{"id":7581,"title":"第1讲 | 为什么要学习网络协议？","content":"<p>《圣经》中有一个通天塔的故事，大致是说，上帝为了阻止人类联合起来，就让人类说不同的语言。人类没法儿沟通，达不成“协议”，通天塔的计划就失败了。</p><p>但是千年以后，有一种叫“程序猿”的物种，敲着一种这个群体通用的语言，连接着全世界所有的人，打造这互联网世界的通天塔。如今的世界，正是因为互联网，才连接在一起。</p><p>当\"Hello World!\"从显示器打印出来的时候，还记得你激动的心情吗？</p><pre><code>public class HelloWorld {\n  public static void main(String[] args){\n    System.out.println(&quot;Hello World!&quot;);\n  }\n}\n</code></pre><p>如果你是程序员，一定看得懂上面这一段文字。这是每一个程序员向计算机世界说“你好，世界”的方式。但是，你不一定知道，这段文字也是一种协议，是人类和计算机沟通的协议，<strong>只有通过这种协议，计算机才知道我们想让它做什么。</strong></p><h2>协议三要素</h2><p>当然，这种协议还是更接近人类语言，机器不能直接读懂，需要进行翻译，翻译的工作教给编译器，也就是程序员常说的compile。这个过程比较复杂，其中的编译原理非常复杂，我在这里不进行详述。</p><p><img src=\"https://static001.geekbang.org/resource/image/e8/7d/e823209e795faacdbb9b557750e7d37d.jpg?wh=2653*559\" alt=\"\"></p><p>但是可以看得出，计算机语言作为程序员控制一台计算机工作的协议，具备了协议的三要素。</p><ul>\n<li>\n<p><strong>语法</strong>，就是这一段内容要符合一定的规则和格式。例如，括号要成对，结束要使用分号等。</p>\n</li>\n<li>\n<p><strong>语义</strong>，就是这一段内容要代表某种意义。例如数字减去数字是有意义的，数字减去文本一般来说就没有意义。</p>\n</li>\n<li>\n<p><strong>顺序</strong>，就是先干啥，后干啥。例如，可以先加上某个数值，然后再减去某个数值。</p>\n</li>\n</ul><!-- [[[read_end]]] --><p>会了计算机语言，你就能够教给一台计算机完成你的工作了。恭喜你，入门了！</p><p>但是，要想打造互联网世界的通天塔，只教给一台机器做什么是不够的，你需要学会教给一大片机器做什么。这就需要网络协议。<strong>只有通过网络协议，才能使一大片机器互相协作、共同完成一件事。</strong></p><p>这个时候，你可能会问，网络协议长啥样，这么神奇，能干成啥事？我先拿一个简单的例子，让你尝尝鲜，然后再讲一个大事。</p><p>当你想要买一个商品，常规的做法就是打开浏览器，输入购物网站的地址。浏览器就会给你显示一个缤纷多彩的页面。</p><p>那你有没有深入思考过，浏览器是如何做到这件事情的？它之所以能够显示缤纷多彩的页面，是因为它收到了一段来自HTTP协议的“东西”。我拿网易考拉来举例，格式就像下面这样：</p><pre><code>HTTP/1.1 200 OK\nDate: Tue, 27 Mar 2018 16:50:26 GMT\nContent-Type: text/html;charset=UTF-8\nContent-Language: zh-CN\n\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;base href=&quot;https://pages.kaola.com/&quot; /&gt;\n&lt;meta charset=&quot;utf-8&quot;/&gt; &lt;title&gt;网易考拉3周年主会场&lt;/title&gt;\n</code></pre><p>这符合协议的三要素吗？我带你来看一下。</p><p>首先，符合语法，也就是说，只有按照上面那个格式来，浏览器才认。例如，上来是<strong>状态</strong>，然后是<strong>首部</strong>，然后是<strong>内容</strong>。</p><p>第二，符合语义，就是要按照约定的意思来。例如，状态200，表述的意思是网页成功返回。如果不成功，就是我们常见的“404”。</p><p>第三，符合顺序，你一点浏览器，就是发送出一个HTTP请求，然后才有上面那一串HTTP返回的东西。</p><p>浏览器显然按照协议商定好的做了，最后一个五彩缤纷的页面就出现在你面前了。</p><h2>我们常用的网络协议有哪些？</h2><p>接下来揭秘我要说的大事情，“双十一”。这和我们要讲的网络协议有什么关系呢？</p><p>在经济学领域，有个伦纳德·里德（Leonard E. Read）创作的《铅笔的故事》。这个故事通过一个铅笔的诞生过程，来讲述复杂的经济学理论。这里，我也用一个下单的过程，看看互联网世界的运行过程中，都使用了哪些网络协议。</p><p>你先在浏览器里面输入 <a href=\"https://www.kaola.com\">https://www.kaola.com</a> ，这是一个<strong>URL</strong>。浏览器只知道名字是“www.kaola.com”，但是不知道具体的地点，所以不知道应该如何访问。于是，它打开地址簿去查找。可以使用一般的地址簿协议<strong>DNS</strong>去查找，还可以使用另一种更加精准的地址簿查找协议<strong>HTTPDNS</strong>。</p><p>无论用哪一种方法查找，最终都会得到这个地址：106.114.138.24。这个是<strong>IP</strong>地址，是互联网世界的“门牌号”。</p><p>知道了目标地址，浏览器就开始打包它的请求。对于普通的浏览请求，往往会使用<strong>HTTP</strong>协议；但是对于购物的请求，往往需要进行加密传输，因而会使用<strong>HTTPS</strong>协议。无论是什么协议，里面都会写明“你要买什么和买多少”。</p><p><img src=\"https://static001.geekbang.org/resource/image/70/e9/70e8ad0531ada8baac174ce6862fede9.jpg?wh=1420*673\" alt=\"\"></p><p>DNS、HTTP、HTTPS所在的层我们称为<strong>应用层</strong>。经过应用层封装后，浏览器会将应用层的包交给下一层去完成，通过socket编程来实现。下一层是<strong>传输层</strong>。传输层有两种协议，一种是无连接的协议<strong>UDP</strong>，一种是面向连接的协议<strong>TCP</strong>。对于支付来讲，往往使用TCP协议。所谓的面向连接就是，TCP会保证这个包能够到达目的地。如果不能到达，就会重新发送，直至到达。</p><p>TCP协议里面会有两个端口，一个是浏览器监听的端口，一个是电商的服务器监听的端口。操作系统往往通过端口来判断，它得到的包应该给哪个进程。</p><p><img src=\"https://static001.geekbang.org/resource/image/64/0c/64fcf0cc5baade70769da2160637d70c.jpg?wh=1435*877\" alt=\"\"></p><p>传输层封装完毕后，浏览器会将包交给操作系统的<strong>网络层</strong>。网络层的协议是IP协议。在IP协议里面会有源IP地址，即浏览器所在机器的IP地址和目标IP地址，也即电商网站所在服务器的IP地址。</p><p><img src=\"https://static001.geekbang.org/resource/image/19/62/191947411849da8738dfea8394780962.jpg?wh=1459*1087\" alt=\"\"></p><p>操作系统既然知道了目标IP地址，就开始想如何根据这个门牌号找到目标机器。操作系统往往会判断，这个目标IP地址是本地人，还是外地人。如果是本地人，从门牌号就能看出来，但是显然电商网站不在本地，而在遥远的地方。</p><p>操作系统知道要离开本地去远方。虽然不知道远方在何处，但是可以这样类比一下：如果去国外要去海关，去外地就要去<strong>网关</strong>。而操作系统启动的时候，就会被DHCP协议配置IP地址，以及默认的网关的IP地址192.168.1.1。</p><p>操作系统如何将IP地址发给网关呢？在本地通信基本靠吼，于是操作系统大吼一声，谁是192.168.1.1啊？网关会回答它，我就是，我的本地地址在村东头。这个本地地址就是<strong>MAC</strong>地址，而大吼的那一声是<strong>ARP</strong>协议。</p><p><img src=\"https://static001.geekbang.org/resource/image/9b/79/9b0d10b384ecd0de11c8596f8890df79.jpg?wh=1459*1297\" alt=\"\"></p><p>于是操作系统将IP包交给了下一层，也就是<strong>MAC层</strong>。网卡再将包发出去。由于这个包里面是有MAC地址的，因而它能够到达网关。</p><p>网关收到包之后，会根据自己的知识，判断下一步应该怎么走。网关往往是一个路由器，到某个IP地址应该怎么走，这个叫作路由表。</p><p>路由器有点像玄奘西行路过的一个个国家的一个个城关。每个城关都连着两个国家，每个国家相当于一个局域网，在每个国家内部，都可以使用本地的地址MAC进行通信。</p><p>一旦跨越城关，就需要拿出IP头来，里面写着贫僧来自东土大唐（就是源IP地址），欲往西天拜佛求经（指的是目标IP地址）。路过宝地，借宿一晚，明日启程，请问接下来该怎么走啊？</p><p><img src=\"https://static001.geekbang.org/resource/image/08/6f/080495a63148905877f252d097be786f.jpg?wh=2303*533\" alt=\"\"></p><p>城关往往是知道这些“知识”的，因为城关和临近的城关也会经常沟通。到哪里应该怎么走，这种沟通的协议称为<strong>路由协议</strong>，常用的有<strong>OSPF</strong>和<strong>BGP</strong>。</p><p><img src=\"https://static001.geekbang.org/resource/image/7a/39/7a59ab81ffe91bbe98cc0b55eba25d39.jpg?wh=2203*1873\" alt=\"\"></p><p>城关与城关之间是一个国家，当网络包知道了下一步去哪个城关，还是要使用国家内部的MAC地址，通过下一个城关的MAC地址，找到下一个城关，然后再问下一步的路怎么走，一直到走出最后一个城关。</p><p>最后一个城关知道这个网络包要去的地方。于是，对着这个国家吼一声，谁是目标IP啊？目标服务器就会回复一个MAC地址。网络包过关后，通过这个MAC地址就能找到目标服务器。</p><p>目标服务器发现MAC地址对上了，取下MAC头来，发送给操作系统的网络层。发现IP也对上了，就取下IP头。IP头里会写上一层封装的是TCP协议，然后将其交给传输层，即<strong>TCP层</strong>。</p><p>在这一层里，对于收到的每个包，都会有一个回复的包说明收到了。这个回复的包绝非这次下单请求的结果，例如购物是否成功，扣了多少钱等，而仅仅是TCP层的一个说明，即收到之后的回复。当然这个回复，会沿着刚才来的方向走回去，报个平安。</p><p>因为一旦出了国门，西行路上千难万险，如果在这个过程中，网络包走丢了，例如进了大沙漠，或者被强盗抢劫杀害怎么办呢？因而到了要报个平安。</p><p>如果过一段时间还是没到，发送端的TCP层会重新发送这个包，还是上面的过程，直到有一天收到平安到达的回复。<strong>这个重试绝非你的浏览器重新将下单这个动作重新请求一次</strong>。对于浏览器来讲，就发送了一次下单请求，TCP层不断自己闷头重试。除非TCP这一层出了问题，例如连接断了，才轮到浏览器的应用层重新发送下单请求。</p><p>当网络包平安到达TCP层之后，TCP头中有目标端口号，通过这个端口号，可以找到电商网站的进程正在监听这个端口号，假设一个Tomcat，将这个包发给电商网站。</p><p><img src=\"https://static001.geekbang.org/resource/image/a3/9e/a35e16acd0912ae3e79567ca0358df9e.jpg?wh=4456*4699\" alt=\"\"></p><p>电商网站的进程得到HTTP请求的内容，知道了要买东西，买多少。往往一个电商网站最初接待请求的这个Tomcat只是个接待员，负责统筹处理这个请求，而不是所有的事情都自己做。例如，这个接待员要告诉专门管理订单的进程，登记要买某个商品，买多少，要告诉管理库存的进程，库存要减少多少，要告诉支付的进程，应该付多少钱，等等。</p><p>如何告诉相关的进程呢？往往通过RPC调用，即远程过程调用的方式来实现。远程过程调用就是当告诉管理订单进程的时候，接待员不用关心中间的网络互连问题，会由RPC框架统一处理。RPC框架有很多种，有基于HTTP协议放在HTTP的报文里面的，有直接封装在TCP报文里面的。</p><p>当接待员发现相应的部门都处理完毕，就回复一个HTTPS的包，告知下单成功。这个HTTPS的包，会像来的时候一样，经过千难万险到达你的个人电脑，最终进入浏览器，显示支付成功。</p><h2>小结</h2><p>看到了吧，一个简简单单的下单过程，中间牵扯到这么多的协议。而管理一大片机器，更是一件特别有技术含量的事情。除此之外，像最近比较火的云计算、容器、微服务等技术，也都需要借助各种协议，来达成大规模机器之间的合作。</p><p>我在这里列一下之后要讲的网络协议，之后我会按照从底层到上层的顺序来讲述。</p><p><img src=\"https://static001.geekbang.org/resource/image/59/54/5985d6d430e1b1d3f165bf0f916ed954.jpg?wh=1603*1198\" alt=\"\"></p><p>上面的“双十一”故事只是为了给你一个大致的框架，这里面有些协议，我在故事里已经提到了，有些还没有提到。在这门课的最后一章，当所有的协议都讲过之后，我会再重新讲一遍这个故事，到时候你就能明白更多的细节。</p><p>最后，学完了这一节，给你留一个问题吧。</p><p>当网络包到达一个城关的时候，可以通过路由表得到下一个城关的IP地址，直接通过IP地址找就可以了，为什么还要通过本地的MAC地址呢？</p><p>欢迎你留言和我讨论。趣谈网络协议，我们下期见！</p>","comments":[{"had_liked":false,"id":21255,"user_name":"陶家顺","can_delete":false,"product_type":"c1","uid":1177899,"ip_address":"","ucode":"E465FB07353BE7","user_header":"https://static001.geekbang.org/account/avatar/00/11/f9/2b/1c365c41.jpg","comment_is_top":false,"comment_ctime":1534986605,"is_pvip":false,"replies":[{"id":7481,"content":"这个解释太详细了","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1534990302,"ip_address":"","comment_id":21255,"utype":1}],"discussion_count":39,"race_medal":0,"score":2,"product_id":100007101,"comment_content":"1. mac地址是唯一的，为什么可以修改?想想身份证，身份证号是唯一的，不能改变的，但是可以造价。mac地址全球唯一，它是固化在网卡里的。网卡毕竟是个硬件，需要软件支持，既操作系统识别。重点来了，操作系统识别出来的mac地址是可以更改的，它只不过是一个字符串。我们常说的修改mac指的是修改电脑中记录的既注册表中的记录。\n2. 有了mac地址为什么还要有ip地址。举个例子，身份证号是你的唯一标识，不会重复，一落户就有（网卡一出厂就有mac）。现在我要和你通信（写信给你），地址用你的姓名+身份证，信能送到你手上吗?明显不能！身份证号前六位能定位你出生的县。mac地址前几位也可以定位生产厂家。但是你出生后会离开这个县（哪怕在这个县，也不能具体找到你）。所以一般写个人信息就要有出生地和现居地址了。","like_count":1412,"discussions":[{"author":{"id":2641267,"avatar":"https://static001.geekbang.org/account/avatar/00/28/4d/73/0141be45.jpg","nickname":"湛途","note":"","ucode":"058DB2C0F0658A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376463,"discussion_content":"mac地址就是身份证(独一无二），ip地址就是你的现居地址，好","likes_number":37,"is_delete":false,"is_hidden":false,"ctime":1622131996,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2263998,"avatar":"https://static001.geekbang.org/account/avatar/00/22/8b/be/7dab7a32.jpg","nickname":"孙嘉乐","note":"","ucode":"9B66ADE7156E11","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":324843,"discussion_content":"讲得贼好 mac是身份证 ip是现住址 这样才能快速准确定位","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1605179744,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1149084,"avatar":"https://static001.geekbang.org/account/avatar/00/11/88/9c/cbc463e6.jpg","nickname":"仰望星空","note":"","ucode":"A9E46C9FDB3275","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":65294,"discussion_content":"mac地址比喻成身份证号，一个出厂就有一个出生就有，ip地址比喻成现居住地。将网络通信比喻成用信件沟通，要想寄给收件人，不可能用身份证号，只能用ip地址","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1574993886,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1004133,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/65/d984d4e8.jpg","nickname":"令","note":"","ucode":"284FB90098734F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373138,"discussion_content":"有Mac地址为啥还要用ip地址，你这个解释的非常详细，但是已经知道IP地址（现居住地），为啥还要用Mac地址呢？","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1620628968,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":8,"child_discussions":[{"author":{"id":2641303,"avatar":"https://static001.geekbang.org/account/avatar/00/28/4d/97/1d99a0a3.jpg","nickname":"柒城","note":"","ucode":"CAC7861175232A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1004133,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/65/d984d4e8.jpg","nickname":"令","note":"","ucode":"284FB90098734F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":404893,"discussion_content":"因为还要确认一遍啊，你一个出租屋可能住两个人嘛，再报一次身份证万无一失","likes_number":22,"is_delete":false,"is_hidden":false,"ctime":1634452742,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":373138,"ip_address":"","group_id":0},"score":404893,"extra":""},{"author":{"id":2364297,"avatar":"","nickname":"MarkusZhang","note":"","ucode":"7F635B1E3897D1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2641303,"avatar":"https://static001.geekbang.org/account/avatar/00/28/4d/97/1d99a0a3.jpg","nickname":"柒城","note":"","ucode":"CAC7861175232A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545534,"discussion_content":"赞，瞬间清晰了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641988870,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":404893,"ip_address":"","group_id":0},"score":545534,"extra":""},{"author":{"id":2598894,"avatar":"https://static001.geekbang.org/account/avatar/00/27/a7/ee/cbb92643.jpg","nickname":"Geek_1b7f39","note":"","ucode":"F4B9B0F281A66E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2641303,"avatar":"https://static001.geekbang.org/account/avatar/00/28/4d/97/1d99a0a3.jpg","nickname":"柒城","note":"","ucode":"CAC7861175232A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546717,"discussion_content":"不是很懂怎么获取服务器的身份证号的。文中说大喊一声谁是目标IP，然后服务器返回mac地址，那按照您说的一个出租屋住两个人，也就是有两个mac地址，那怎么知道返回哪个mac地址呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642403179,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":404893,"ip_address":"","group_id":0},"score":546717,"extra":""}]},{"author":{"id":1545789,"avatar":"https://static001.geekbang.org/account/avatar/00/17/96/3d/99c58108.jpg","nickname":"董懂","note":"","ucode":"EDF4CAB275A69B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":55833,"discussion_content":"精彩，Mac地址是户籍地，ip是现居地，这个比喻太绝，哈哈。","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1574404289,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2415448,"avatar":"https://static001.geekbang.org/account/avatar/00/24/db/58/a7a0a85b.jpg","nickname":"二饼","note":"","ucode":"48120565D135F7","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575533,"discussion_content":"理解了，mac地址是用来确认身份的，ip地址是用来定位地址的。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1654924570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1330531,"avatar":"https://static001.geekbang.org/account/avatar/00/14/4d/63/f90516f3.jpg","nickname":"liu_song","note":"","ucode":"8550B497544A26","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":18991,"discussion_content":"操作系统里面可以重新设置mac地址，上大学的时候学校的校园网就是学号，密码＋mac地址绑定的，经常蹭同学的账号上网","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1569126232,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422601,"discussion_content":"这个解释太详细了","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1534990302,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2620846,"avatar":"https://static001.geekbang.org/account/avatar/00/27/fd/ae/1576570d.jpg","nickname":"学徒","note":"","ucode":"436A212F90C560","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373886,"discussion_content":"谢谢，受教了","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1620905305,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1531572,"avatar":"https://static001.geekbang.org/account/avatar/00/17/5e/b4/2e8bcd53.jpg","nickname":"Darricklin","note":"","ucode":"149C383DB03136","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":363676,"discussion_content":"一语点醒梦中人","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1617259941,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1691454,"avatar":"https://static001.geekbang.org/account/avatar/00/19/cf/3e/af77dbeb.jpg","nickname":"程李文华","note":"","ucode":"B09869815059F1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":175716,"discussion_content":"精彩，Mac地址是户籍地，IP地址是现住地址","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1581991575,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2161609,"avatar":"","nickname":"Geek_e6b26e","note":"","ucode":"E0840488F65CD3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1691454,"avatar":"https://static001.geekbang.org/account/avatar/00/19/cf/3e/af77dbeb.jpg","nickname":"程李文华","note":"","ucode":"B09869815059F1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302813,"discussion_content":"Mac怎么是户籍地了。。。不应该是类似身份证么？？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599036878,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":175716,"ip_address":"","group_id":0},"score":302813,"extra":""}]},{"author":{"id":2260390,"avatar":"https://static001.geekbang.org/account/avatar/00/22/7d/a6/15798bf2.jpg","nickname":"温雅小公子","note":"","ucode":"9EA63E36D7C85C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593045,"discussion_content":"且慢，有了ip地址为什么还要有mac地址？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667898101,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"河北","group_id":0},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1249969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/12/b1/3a112b27.jpg","nickname":"段帅帅","note":"","ucode":"2675BC0BE154E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570493,"discussion_content":"66","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651798333,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2100403,"avatar":"https://static001.geekbang.org/account/avatar/00/20/0c/b3/7e13920b.jpg","nickname":"🎓Dream-seeker","note":"","ucode":"3C8477DE9DD766","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548847,"discussion_content":"牛","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643423654,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1251243,"avatar":"https://static001.geekbang.org/account/avatar/00/13/17/ab/c0235b70.jpg","nickname":"遥遥无妻","note":"","ucode":"30A765B411D059","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379201,"discussion_content":"M","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623751107,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2528769,"avatar":"https://static001.geekbang.org/account/avatar/00/26/96/01/13db70bc.jpg","nickname":"叫你皮","note":"","ucode":"A2E33ACB0F7908","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364010,"discussion_content":"牛","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617349116,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1118111,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0f/9f/f4b06bd5.jpg","nickname":"见南山","note":"","ucode":"6A8BB82B7573CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347034,"discussion_content":"牛","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612142833,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1300285,"avatar":"https://static001.geekbang.org/account/avatar/00/13/d7/3d/a076faf1.jpg","nickname":"蜗牛","note":"","ucode":"A99C9C890F95E4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332104,"discussion_content":"简单明了，通俗易懂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607066073,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2299354,"avatar":"","nickname":"Geek_530978","note":"","ucode":"0E58C7DBB798AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":323217,"discussion_content":"可以可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604899699,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2103031,"avatar":"","nickname":"Geek_e8026d","note":"","ucode":"CFB894E418B685","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295936,"discussion_content":"卧槽！！醍醐灌顶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596384074,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1554995,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ba/33/2d83d174.jpg","nickname":"时光守护者-基兰","note":"","ucode":"F0B0887B1979D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":277876,"discussion_content":"这也太6了吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591111457,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1165201,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7mAt63VrbLZPHpeZxSc4IlBYswQSnaAB5wGePaGFDehgiaNfIxI1SJ5yIHIlmVk8hsw0RaoaSCPA/132","nickname":"Stephen","note":"","ucode":"0D49223E6CB7B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":257898,"discussion_content":"牛逼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588608450,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1937446,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/90/26/6943b5fe.jpg","nickname":"安静","note":"","ucode":"E5A0B1A6463193","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216423,"discussion_content":"这个解释简单易懂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585448634,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1221877,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a4/f5/9ce95dd5.jpg","nickname":"JeffMony","note":"","ucode":"9AA0671C297604","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":203699,"discussion_content":"通俗易懂。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584067607,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1050191,"avatar":"https://static001.geekbang.org/account/avatar/00/10/06/4f/14cc4b53.jpg","nickname":"不专注的linuxer","note":"","ucode":"28ED11C1E2942C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":157174,"discussion_content":"6666~，解释得相当精彩","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580450411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1504234,"avatar":"https://static001.geekbang.org/account/avatar/00/16/f3/ea/2b2adda5.jpg","nickname":"EncodedStar","note":"","ucode":"03958CA7DDD6AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":133692,"discussion_content":"这个比喻可以，很恰当啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578980904,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1675475,"avatar":"https://static001.geekbang.org/account/avatar/00/19/90/d3/ab5db902.jpg","nickname":"Chiron","note":"","ucode":"76BBD1F32A35D1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":128477,"discussion_content":"mac地址就是出生地址，ip是现住地址","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578643214,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1654207,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3d/bf/446dc2bb.jpg","nickname":"大聪哥","note":"","ucode":"A96A6C27477A0A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":78039,"discussion_content":"精彩","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575970615,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005368,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/38/ba6a106f.jpg","nickname":"Phoenix","note":"","ucode":"C51BE4C948755B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":53445,"discussion_content":"太精准了， IP 地址是会变的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574169190,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592643,"avatar":"","nickname":"赵晋","note":"","ucode":"0F7096E08EE0E4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4922,"discussion_content":"mac地址就是出生地址，ip是现住地址","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565833147,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10496,"user_name":"党","can_delete":false,"product_type":"c1","uid":1071974,"ip_address":"","ucode":"EE531DB3EA124D","user_header":"https://static001.geekbang.org/account/avatar/00/10/5b/66/ad35bc68.jpg","comment_is_top":false,"comment_ctime":1527564120,"is_pvip":false,"replies":[{"id":3345,"content":"对的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1527584934,"ip_address":"","comment_id":10496,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100007101,"comment_content":"ip是网络层使用的 mac是链路层使用的 ip包最终还是要通过物理链接和mac地址进行交互的","like_count":217,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418502,"discussion_content":"对的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527584934,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2848072,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/75/48/2243ff86.jpg","nickname":"赵通","note":"","ucode":"42C76C8489B1D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":598987,"discussion_content":"学习了，看问题比较准。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673259246,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1374957,"avatar":"https://static001.geekbang.org/account/avatar/00/14/fa/ed/0742b854.jpg","nickname":"Jun Ma","note":"","ucode":"0C5E2AB51E6A83","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":210773,"discussion_content":"问一个问题，我的机器IP在我这个局域网里是192.168.10.10。目标机器在他的局域网里是 192.168.10.11。那我发送请求，是先用Mac地址去找。但是在我局域网里面找不到?然后，怎么办？发不出去么?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584770152,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":94907,"user_name":"糖小宝","can_delete":false,"product_type":"c1","uid":1386966,"ip_address":"","ucode":"15A8B649F668B1","user_header":"https://static001.geekbang.org/account/avatar/00/15/29/d6/6dafc576.jpg","comment_is_top":false,"comment_ctime":1557919771,"is_pvip":true,"replies":[{"id":34101,"content":"赞","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1558068054,"ip_address":"","comment_id":94907,"utype":1}],"discussion_count":7,"race_medal":0,"score":2,"product_id":100007101,"comment_content":"感觉Mac地址是手机号码，IP地址是省市区加街道详情\n点外卖的话，只有手机号码是找不到订餐人的\n只有按照省市区加街道详情，找到对应办公室\n大吼一声：“尾号XXXX是哪位？您的外卖到了！！！”\n订餐人：“这儿呐~我哒~~~”\nEND","like_count":94,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450255,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558068054,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1980522,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJTWcjlTDia4Szn6vDKRobBacSIowD5DOh0hgouM3q4N2pCLmzWEQy8afgLoDfduIdXaoyDGYE9h8w/132","nickname":"李颖喆","note":"","ucode":"63351D40F865DD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":275845,"discussion_content":"我感觉Mac地址像身份证号，IP像手机号，根据身份证号码你联系不到我，手机号可以联系到我，而且手机号可能会变","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1590765925,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1807566,"avatar":"","nickname":"Geek_a6bdf1","note":"","ucode":"E0D6E4F9302B67","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":245561,"discussion_content":"哈哈，外卖吃多了，很形象","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1587686492,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2304398,"avatar":"","nickname":"zlhyp","note":"","ucode":"1212A94A4FCC13","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":608094,"discussion_content":"是不是刚好说反了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678264308,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1327864,"avatar":"https://static001.geekbang.org/account/avatar/00/14/42/f8/9a22b3aa.jpg","nickname":"日积跬步","note":"","ucode":"53BA6AB79C3CED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2304398,"avatar":"","nickname":"zlhyp","note":"","ucode":"1212A94A4FCC13","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":609355,"discussion_content":"感觉是。但是你如果理解成“手机号是唯一编号，居住地址用来定位你的位置“，这就没问题了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678956651,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":608094,"ip_address":"广东","group_id":0},"score":609355,"extra":""}]},{"author":{"id":1983034,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/42/3a/bca96a7f.jpg","nickname":"小番薯","note":"","ucode":"052538EFD0B1D6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":394578,"discussion_content":"牛逼的比喻能力","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631945497,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1251243,"avatar":"https://static001.geekbang.org/account/avatar/00/13/17/ab/c0235b70.jpg","nickname":"遥遥无妻","note":"","ucode":"30A765B411D059","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379337,"discussion_content":"M","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623833996,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10787,"user_name":"iceco1a","can_delete":false,"product_type":"c1","uid":1039779,"ip_address":"","ucode":"C06F19F9821A88","user_header":"https://static001.geekbang.org/account/avatar/00/0f/dd/a3/be94d6c3.jpg","comment_is_top":false,"comment_ctime":1527699444,"is_pvip":false,"replies":[{"id":3447,"content":"赞","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1527743267,"ip_address":"","comment_id":10787,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100007101,"comment_content":"网卡MAC码是由全球惟一的一个固定组织来分配的，未经认证和授权的厂家无权生产网卡。每块网卡都有一个固定的卡号，并且任何正规厂家生产的网卡上都直接标明了卡号，一般为一组12位的16进制数。其中前6位代表网卡的生产厂商。后面的位数是设备号。当然在操作系统级别改Mac地址又是一种说法。","like_count":64,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418595,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527743267,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1485365,"avatar":"https://static001.geekbang.org/account/avatar/00/16/aa/35/1a4884f9.jpg","nickname":"1043","note":"","ucode":"AAA69CC175AEE3","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376249,"discussion_content":"mac地址分前24位和后24位，如果按数字计数为了避免和二进制的位搞混，还是说前6个数和后6位数字比较好吧？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622038096,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1485365,"avatar":"https://static001.geekbang.org/account/avatar/00/16/aa/35/1a4884f9.jpg","nickname":"1043","note":"","ucode":"AAA69CC175AEE3","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376246,"discussion_content":"网卡分两部分，llc子层归操作系统，特别是驱动部分；mac子层归网络协议","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622038006,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1722584,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/48/d8/73fe04ad.jpg","nickname":"Amo^=^轩辕成树^=","note":"","ucode":"BD6F7D79B30524","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":72149,"discussion_content":"我觉得吧，操作系统和网卡是分开的，操作系统不包括网卡系统，网卡提供接口，我们只能说操作系统使用网卡，就像我让你帮我把东西送给某个人，但是我肯定不能叫你改名字吧，你也不给我这个权限。我们两个就不是同一个人，一个脑子控制不了吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575471038,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77107,"user_name":"LIU","can_delete":false,"product_type":"c1","uid":1463301,"ip_address":"","ucode":"CDB7155BC5A82F","user_header":"https://static001.geekbang.org/account/avatar/00/16/54/05/47e30eef.jpg","comment_is_top":false,"comment_ctime":1552834680,"is_pvip":false,"replies":[{"id":50241,"content":"太棒了","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1567827660,"ip_address":"","comment_id":77107,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100007101,"comment_content":"Mac是identify; IP是locate","like_count":62,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443583,"discussion_content":"太棒了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567827660,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1327864,"avatar":"https://static001.geekbang.org/account/avatar/00/14/42/f8/9a22b3aa.jpg","nickname":"日积跬步","note":"","ucode":"53BA6AB79C3CED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":609361,"discussion_content":"这是从why的层面来理解的。结合其他人的比喻是从what的层面理解的，mac地址是身份证号，ip地址是现居住地址。这两种解释刚好一问一答，对上了，哈哈。\n我们要找一个人，得先定位他的位置，靠什么定位，现居住地址。然后就要识别出哪个是我们要找的人，因为这个地址有可能住了很多人，怎么识别呢，靠身份证号。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678957293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2848072,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/75/48/2243ff86.jpg","nickname":"赵通","note":"","ucode":"42C76C8489B1D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":598988,"discussion_content":"学习了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673259331,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1179622,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ff/e6/4b0ddfcf.jpg","nickname":"李飞","note":"","ucode":"4B23FF72AA4BA0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386525,"discussion_content":"精辟","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627627992,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46293,"user_name":"罗格","can_delete":false,"product_type":"c1","uid":1206701,"ip_address":"","ucode":"B5DAA40E7DE008","user_header":"https://static001.geekbang.org/account/avatar/00/12/69/ad/f5df3e6a.jpg","comment_is_top":false,"comment_ctime":1543894199,"is_pvip":false,"replies":[{"id":16888,"content":"问题一，你的理解正确。问题二，去哪个网段应该怎么走，用ospf，也就是城关管理员直接交换信息用ospf，一旦一个包来到城关，就根据已知信息选择下一个城关，一旦选择了城关，就通过arp得到地址发送。问题三，本地是指局域网。问题四，一个局域网不会有多个路由器，局域网边界上是路由器","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1544109436,"ip_address":"","comment_id":46293,"utype":1}],"discussion_count":10,"race_medal":0,"score":2,"product_id":100007101,"comment_content":"十分感谢作者大大的回复，今天才看到不好意思，我自己后来发现还是有些疑问在纠结，查了许多相关资料还是没解决，又厚着脸皮来请教……\n一、文中说”每个城关都连着两个国家，”，又说“城关与城关之间是一个国家”，因为“城关是路由器，国家是局域网”，那关系就是“局域网—路由器—局域网—路由器—局域网”这样子吗？\n二、&quot;当网络包知道了下一步去哪个城关，还是要使用国家内部的mac地址&quot;，是因为上面路由器和局域网关系中的两个路由器都处于中间那个局域网中的原因所以可以使用arp协议获取对方的mac地址吗？还是上面说的OSPF协议呢（我查的资料里说OSPF获取的是链路状态，具体没说mac地址还是ip地址）？\n三、“本地通讯基本kao吼”，ARP协议只在本地作用么？这个“本地”是指局域网还是什么？\n四、我查阅的资料里说自治系统中是包含多个路由器的，而且通常一个自治系统也包含多个局域网，那一个局域网里会包含多个路由器吗？如果我第一个问题里的图成立的话那意味着每个局域网都有两个路由器？\n上述四个问题困扰我许久，对我原来的认知产生了一些颠覆，还望作者大大不吝赐教，万分感谢…… ","like_count":38,"discussions":[{"author":{"id":1608600,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8b/98/ddbdea57.jpg","nickname":"暝","note":"","ucode":"20AE1FDFE6DD91","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":154876,"discussion_content":"路由器每个端口连接一个局域网","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1580194278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1008100,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/61/e4/db3f783b.jpg","nickname":"Karson","note":"","ucode":"E0286BF6CA7281","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1608600,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8b/98/ddbdea57.jpg","nickname":"暝","note":"","ucode":"20AE1FDFE6DD91","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":168276,"discussion_content":"还是有点不理解。可否指点一下？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581568162,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":154876,"ip_address":"","group_id":0},"score":168276,"extra":""},{"author":{"id":1608600,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8b/98/ddbdea57.jpg","nickname":"暝","note":"","ucode":"20AE1FDFE6DD91","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1008100,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/61/e4/db3f783b.jpg","nickname":"Karson","note":"","ucode":"E0286BF6CA7281","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":178264,"discussion_content":"哪方面不理解呢\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1582129596,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":168276,"ip_address":"","group_id":0},"score":178264,"extra":""},{"author":{"id":1008100,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/61/e4/db3f783b.jpg","nickname":"Karson","note":"","ucode":"E0286BF6CA7281","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1608600,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8b/98/ddbdea57.jpg","nickname":"暝","note":"","ucode":"20AE1FDFE6DD91","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":179232,"discussion_content":"一周过去了，想问啥忘了😣。下次直接提问😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582210718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":178264,"ip_address":"","group_id":0},"score":179232,"extra":""}]},{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431412,"discussion_content":"问题一，你的理解正确。问题二，去哪个网段应该怎么走，用ospf，也就是城关管理员直接交换信息用ospf，一旦一个包来到城关，就根据已知信息选择下一个城关，一旦选择了城关，就通过arp得到地址发送。问题三，本地是指局域网。问题四，一个局域网不会有多个路由器，局域网边界上是路由器","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1544109436,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1310826,"avatar":"https://static001.geekbang.org/account/avatar/00/14/00/6a/da96c764.jpg","nickname":"尹希闯","note":"","ucode":"A35F70179808D8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":224713,"discussion_content":"我也有个不理解，发送端只知道目的地址IP，不知道对方Mac地址，而且按照文章所说IP地址和Mac是不对应的，怎么通过目的IP地址准确找到局域网内部的Mac地址?","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1586324975,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1665471,"avatar":"https://static001.geekbang.org/account/avatar/00/19/69/bf/58f70a2a.jpg","nickname":"程序员花卷","note":"","ucode":"DDCFE578C6C428","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1310826,"avatar":"https://static001.geekbang.org/account/avatar/00/14/00/6a/da96c764.jpg","nickname":"尹希闯","note":"","ucode":"A35F70179808D8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385183,"discussion_content":"1、首先源主机会检查自己的ARP缓存中是否存在目的主机的MAC地址\n2、如果不存在则广播式的请求的目的主机的MAC地址\n3、当其他主机收到请求报文之后，开始判断是不是来找自己的，如果是则会把源主机的IP地址和MAC地址放入自己的缓存表里面，再回应源主机自己的MAC地址。\n4、源主机收到目标主机的MAC地址之后，放入自己的缓存中，然后它们就可以开始通信了。\n\n以上就是如何找到局域网内部的Mac地址的过程","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1626935680,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":224713,"ip_address":"","group_id":0},"score":385183,"extra":""}]},{"author":{"id":1154572,"avatar":"https://static001.geekbang.org/account/avatar/00/11/9e/0c/16545faf.jpg","nickname":"顺子","note":"","ucode":"D6AA375352B737","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578307,"discussion_content":"我的理解是路由器对内看到的是局域网，路由器对外看到的是路由器。有的中间链路的路由器没有对内的局域网，只有对外的路由器，相当于转发器。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656645975,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1485365,"avatar":"https://static001.geekbang.org/account/avatar/00/16/aa/35/1a4884f9.jpg","nickname":"1043","note":"","ucode":"AAA69CC175AEE3","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376252,"discussion_content":"一个网段内，不过网关就是本地（局域网），跨了网段就要靠路由，要么二层交换机+路由器子接口实现单臂路由，要么三层交换机直接实现。ospf一般来来说在中大型网络中采才用，小型网络要么写静态路由要么ripv2协议。如果用ospf也是用单区域实现即可。mac地址就是在本地通信，跨广播域如果没有arp代理就必须用路由协议。而且arp代理很耗资源，有些厂商的路由器还默认是关闭arp代理的……\n这个知识不用看ospf协议，主要看看tcp/ip协议或者tcp/ip路由技术的arp协议部分就懂了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622039027,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2142126,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/QfNSgehchHicIWA8tXI19JxDqHCMUbXtKZX9HEFIjednbYNV7IhdVJicHdYibsEZy5SrUDut8QGZCkdnn78SDNiblA/132","nickname":"Geek_6621b0","note":"","ucode":"3ABE5EAF2138B2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300557,"discussion_content":"ospf没有那么简单。路由协议分为距离矢量路由协议和链路状态路由协议。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598169703,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9086,"user_name":"Geek-Leon","can_delete":false,"product_type":"c1","uid":1112130,"ip_address":"","ucode":"BE6742C5D416EE","user_header":"https://static001.geekbang.org/account/avatar/00/10/f8/42/1e0b1170.jpg","comment_is_top":false,"comment_ctime":1526606515,"is_pvip":false,"replies":[{"id":2706,"content":"有的，传输层大部分情况下是tcp和udp，但是也有其他的协议比如sctp","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1526607053,"ip_address":"","comment_id":9086,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007101,"comment_content":"有既不走UDP又不走TCP的应用层协议吗？","like_count":36,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417968,"discussion_content":"有的，传输层大部分情况下是tcp和udp，但是也有其他的协议比如sctp","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526607053,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9816,"user_name":"Len","can_delete":false,"product_type":"c1","uid":1022767,"ip_address":"","ucode":"53C623CE17973F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9b/2f/b7a3625e.jpg","comment_is_top":false,"comment_ctime":1527119087,"is_pvip":false,"replies":[{"id":3045,"content":"你的包出去的时候，会在外网网关nat一下，把私网地址改为公网地址，到达局域网的时候，是通过mac的，回来的时候，在你的那个网关再nat回来","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1527151108,"ip_address":"","comment_id":9816,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007101,"comment_content":"除了网络分层基础之外，我想这个问题的主要原因是: 并不是每一个设备都有一个“物理”或“外网” IP，我们的目标 IP 可能是一个局域网。( 想想家里面每一台设备都间接的通过连接路由器上网，但是我们所有设备的外网出口 IP 都是同一个。) 当我们的数据包达到目标 IP 后，通过 Mac 地址送达到具体“局域网”的某台具体物理设备上。是这样吗？","like_count":11,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418214,"discussion_content":"你的包出去的时候，会在外网网关nat一下，把私网地址改为公网地址，到达局域网的时候，是通过mac的，回来的时候，在你的那个网关再nat回来","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527151108,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9079,"user_name":"云飞扬","can_delete":false,"product_type":"c1","uid":1001334,"ip_address":"","ucode":"B360910F95ED01","user_header":"https://static001.geekbang.org/account/avatar/00/0f/47/76/6e7bdcc1.jpg","comment_is_top":false,"comment_ctime":1526605446,"is_pvip":false,"replies":[{"id":2707,"content":"这是第一章，先给个大概的印象","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1526607213,"ip_address":"","comment_id":9079,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007101,"comment_content":"有点儿笼统，希望讲的再详细一点\n","like_count":10,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417966,"discussion_content":"这是第一章，先给个大概的印象","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526607213,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10225,"user_name":"zhangc","can_delete":false,"product_type":"c1","uid":1118618,"ip_address":"","ucode":"B3219A3FC4CD76","user_header":"https://static001.geekbang.org/account/avatar/00/11/11/9a/7936b15e.jpg","comment_is_top":false,"comment_ctime":1527388223,"is_pvip":false,"replies":[{"id":3197,"content":"不会的，就算http的重试也不应该导致重复下单，要求接口幂等","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1527407658,"ip_address":"","comment_id":10225,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100007101,"comment_content":"tcp重试有没有可能导致重复下单？","like_count":8,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418400,"discussion_content":"不会的，就算http的重试也不应该导致重复下单，要求接口幂等","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527407658,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1193755,"avatar":"https://static001.geekbang.org/account/avatar/00/12/37/1b/82310e20.jpg","nickname":"拿笔小星","note":"","ucode":"D3D8F6A959710D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":87163,"discussion_content":"那接口不幂等呢？TCP重试会导致 重复下单吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576648667,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2913864,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/MYShyjtRtib2GIQiaK4hV3ZP9pQ1qiaS74DA4K4YHY4SIiaFDfsCKgiaMWwm9zFsSn3bt5pawp5Kdn5MWgiaw5909nug/132","nickname":"Geek_aa1c31","note":"","ucode":"1AC14C053638AF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1193755,"avatar":"https://static001.geekbang.org/account/avatar/00/12/37/1b/82310e20.jpg","nickname":"拿笔小星","note":"","ucode":"D3D8F6A959710D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557475,"discussion_content":"TCP重试是单个segment的重试,  并不是整个http请求重试","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647831790,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":87163,"ip_address":"","group_id":0},"score":557475,"extra":""},{"author":{"id":1093258,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ae/8a/e67def95.jpg","nickname":"念头通达","note":"","ucode":"67476D582D8B6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1193755,"avatar":"https://static001.geekbang.org/account/avatar/00/12/37/1b/82310e20.jpg","nickname":"拿笔小星","note":"","ucode":"D3D8F6A959710D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635862,"discussion_content":"TCP重试你要求完整的包到达后处理，http接口不幂等肯定会重复下单\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1705312080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":87163,"ip_address":"陕西","group_id":0},"score":635862,"extra":""}]}]},{"had_liked":false,"id":15172,"user_name":"sandra","can_delete":false,"product_type":"c1","uid":1140997,"ip_address":"","ucode":"AB91B6B7B0E39B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/40zJiab7J0gZucfyK2jcdZYHJnFquDFxICzILVggyk3AaHkHoicH7iaia991SFq53S2q4r7ibpnCsSPAxLA235nsaFA/132","comment_is_top":false,"comment_ctime":1530953885,"is_pvip":false,"replies":[{"id":5112,"content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1530981768,"ip_address":"","comment_id":15172,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100007101,"comment_content":"看完21节课 再反过头来看这一节 才能看懂","like_count":5,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420269,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1530981768,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2692533,"avatar":"https://static001.geekbang.org/account/avatar/00/29/15/b5/eadd6834.jpg","nickname":"乐缘，青苹果","note":"","ucode":"47309865FD3158","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383084,"discussion_content":"看到这个评论我心安了一点,我刚学这个就是没看懂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625889148,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119950,"user_name":"黄小妖","can_delete":false,"product_type":"c1","uid":1352237,"ip_address":"","ucode":"00FCDE34EA96B2","user_header":"https://static001.geekbang.org/account/avatar/00/14/a2/2d/c4280020.jpg","comment_is_top":false,"comment_ctime":1564735774,"is_pvip":false,"replies":[{"id":46372,"content":"1.通过arp得到MAC地址，在路由器上，根据目标IP地址，通过查路由表，已经可以判断从哪个口出去了，这个时候从这个口发出去arp获得mac就可以了\n2.IP如果不通过NAT的话，是不变的，MAC一直变，换一个网络变一次","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1566297574,"ip_address":"","comment_id":119950,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100007101,"comment_content":"Hello 刘超老师。有一点不是很明白。\n\n当我需要发给外网，我明白可以通过HTTPDNS知道对方的IP地址，并且可以通过ARP，知道我本地网关的MAC地址。\n那么，1. 当我到了网关，我可以通过路由表，知道我下一跳在哪（也就是知道IP），那我怎么知道下一跳的MAC地址呢？网关（路由器）每个端口都是不同的网段呀，不可能通过ARP去得到MAC地址呀？\n2. 当我一跳跳的过程中，IP头和MAC头是不断叠加，还是说我每一跳，就会把原有IP头和MAC头，更新，把原来的MAC地址换成新的MAC地址？（但是感觉逻辑上说不通，觉得应该是不断叠加。）\n\n期待老师的回复解答。谢谢！","like_count":4,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461144,"discussion_content":"1.通过arp得到MAC地址，在路由器上，根据目标IP地址，通过查路由表，已经可以判断从哪个口出去了，这个时候从这个口发出去arp获得mac就可以了\n2.IP如果不通过NAT的话，是不变的，MAC一直变，换一个网络变一次","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566297574,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":3039956,"avatar":"","nickname":"Geek_ce29f7","note":"","ucode":"148BE99846EFBA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":626741,"discussion_content":"懵逼了，不是说mac全球唯一么，咋还换一个网络变一次。。。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1693333733,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":461144,"ip_address":"湖南","group_id":0},"score":626741,"extra":""}]}]},{"had_liked":false,"id":111169,"user_name":"皮皮侠","can_delete":false,"product_type":"c1","uid":1258402,"ip_address":"","ucode":"04205990C1DE1F","user_header":"https://static001.geekbang.org/account/avatar/00/13/33/a2/6c0ffc15.jpg","comment_is_top":false,"comment_ctime":1562497305,"is_pvip":false,"replies":[{"id":46747,"content":"赞","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1566388088,"ip_address":"","comment_id":111169,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100007101,"comment_content":"ip协议只是找到一个子网，mac才能找到局域网的主机","like_count":3,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457262,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566388088,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":99693,"user_name":"coder","can_delete":false,"product_type":"c1","uid":1399673,"ip_address":"","ucode":"929E3FFD14EFC8","user_header":"https://static001.geekbang.org/account/avatar/00/15/5b/79/d55044ac.jpg","comment_is_top":false,"comment_ctime":1559280999,"is_pvip":false,"replies":[{"id":49221,"content":"大概率唯一即可，参考UUID","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1567604150,"ip_address":"","comment_id":99693,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100007101,"comment_content":"老师好，有个问题，关于Mac地址的，一般认为设备的Mac地址是全球唯一的，我好奇的是，世界上有这么多的设备制造商，他们是怎么做到设备的Mac地址不会重复的，怎么理解mac地址的含义？","like_count":3,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452228,"discussion_content":"大概率唯一即可，参考UUID","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567604150,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105249,"user_name":"Geek_d4dee7","can_delete":false,"product_type":"c1","uid":1241569,"ip_address":"","ucode":"636908D6F43C6D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLw9fVyja3eQLGQenLf5EqVaxGQoibo7rq8A7IRjlXED9FhicKukcn0ibCCtiaBqpEib4ZEIWfFOkiaGMSQ/132","comment_is_top":false,"comment_ctime":1560946288,"is_pvip":false,"replies":[{"id":49011,"content":"不一会儿事情，网关是gateway，是一台设备或者电脑，包含多个网卡","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1567579672,"ip_address":"","comment_id":105249,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100007101,"comment_content":"不知道老师还能不能看到留言  网关是什么 网卡跟网关是一回事吗","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454608,"discussion_content":"不一会儿事情，网关是gateway，是一台设备或者电脑，包含多个网卡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567579672,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":14641,"user_name":"比如刘恩","can_delete":false,"product_type":"c1","uid":1169359,"ip_address":"","ucode":"95BE00C09657E2","user_header":"https://static001.geekbang.org/account/avatar/00/11/d7/cf/3c30f1d7.jpg","comment_is_top":false,"comment_ctime":1530581257,"is_pvip":false,"replies":[{"id":4916,"content":"赞","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1530610224,"ip_address":"","comment_id":14641,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100007101,"comment_content":"讲的很赞通俗易\n看到有朋友问参考教材，说一下我了解的仅供参考：\n基础的蓝绿皮 《计算机网络》\n精通的 《tcp&#47;ip详解卷一》\n希望后面看到作者更多场景化、实战化的讲解，赞","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420073,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1530610224,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9103,"user_name":"夏洛克的救赎","can_delete":false,"product_type":"c1","uid":1021334,"ip_address":"","ucode":"44453DD27A3216","user_header":"https://static001.geekbang.org/account/avatar/00/0f/95/96/0020bd67.jpg","comment_is_top":false,"comment_ctime":1526609013,"is_pvip":false,"replies":[{"id":2731,"content":"客户端也是有个端口的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1526610754,"ip_address":"","comment_id":9103,"utype":1}],"discussion_count":5,"race_medal":0,"score":3,"product_id":100007101,"comment_content":"tcp里面为啥会有两个端口？只要电商服务器的监听端口不就够了？操作系统需要知道这两个端口才能确定将得到的包发给哪个进程？比如Tomcat","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417971,"discussion_content":"客户端也是有个端口的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526610754,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1001410,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/c2/e9fa4cf6.jpg","nickname":"Charles","note":"","ucode":"32646D78CC0389","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":37578,"discussion_content":"因为一次完整http请求还包含响应，响应到了需要显示在浏览器对应的进程上显示给用户看","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571640127,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1147347,"avatar":"https://static001.geekbang.org/account/avatar/00/11/81/d3/f0a88806.jpg","nickname":"🍐 🍾 🔆","note":"","ucode":"1B7C90800AD4D0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5632,"discussion_content":"我也很想问  数据响应到浏览器的时候  是如何知道返回到哪个进程上的 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566394114,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1093258,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ae/8a/e67def95.jpg","nickname":"念头通达","note":"","ucode":"67476D582D8B6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1147347,"avatar":"https://static001.geekbang.org/account/avatar/00/11/81/d3/f0a88806.jpg","nickname":"🍐 🍾 🔆","note":"","ucode":"1B7C90800AD4D0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635864,"discussion_content":"浏览器不就是一个进程吗？  对于服务器来说 浏览器是客户端，客户端的端口是随机生成的，在发送到服务器的时候，是绑定的。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1705312262,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":5632,"ip_address":"陕西","group_id":0},"score":635864,"extra":""}]},{"author":{"id":1029473,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b5/61/9802a552.jpg","nickname":"ican_只会0到9","note":"","ucode":"9EE33C42EE519D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3694,"discussion_content":"进程间通信是靠端口确定的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564716506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9043,"user_name":"懒猫","can_delete":false,"product_type":"c1","uid":1133614,"ip_address":"","ucode":"5E284599A29859","user_header":"https://static001.geekbang.org/account/avatar/00/11/4c/2e/4c4582ee.jpg","comment_is_top":false,"comment_ctime":1526602805,"is_pvip":false,"replies":[{"id":2709,"content":"这里的原路返回的意思是原样返回，也就是返回也是这个过程，不一定是完全一样的路径，比喻有点不恰当了","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1526607435,"ip_address":"","comment_id":9043,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100007101,"comment_content":"通过本地是因为报平安的时候需要原路返回，需要留下个来时的记号吗？","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417954,"discussion_content":"这里的原路返回的意思是原样返回，也就是返回也是这个过程，不一定是完全一样的路径，比喻有点不恰当了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526607435,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223495,"user_name":"Shanks-王冲","can_delete":false,"product_type":"c1","uid":1042983,"ip_address":"","ucode":"C4B90A17850E20","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ea/27/a3737d61.jpg","comment_is_top":false,"comment_ctime":1591102292,"is_pvip":false,"replies":[{"id":83032,"content":"第一，数据链路，第二，理论和事实的差距","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1591755614,"ip_address":"","comment_id":223495,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100007101,"comment_content":"1. MAC层属于哪个层(数据链路层 or 物理层？)\n2. 为什么有个OSI七层协议，又有个TCP&#47;IP五层协议，直接用一个不就行了吗？","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497145,"discussion_content":"第一，数据链路，第二，理论和事实的差距","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591755614,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114299,"user_name":"亲斤弓虽😈","can_delete":false,"product_type":"c1","uid":1412163,"ip_address":"","ucode":"575893ECF0B7AA","user_header":"https://static001.geekbang.org/account/avatar/00/15/8c/43/af33659f.jpg","comment_is_top":false,"comment_ctime":1563267406,"is_pvip":false,"replies":[{"id":46616,"content":"赞，这个比喻不错。","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1566367514,"ip_address":"","comment_id":114299,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100007101,"comment_content":"通俗理解一下ARP协议\n我们公司有个大群.我要找张三,我在大群里说:谁是张三?看到请回答.然后张三看到消息后单独跟我小窗私聊\n这个流程可以理解为ARP工作流程.其中人名就是ip地址,私聊就是Mac地址","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458599,"discussion_content":"赞，这个比喻不错。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566367514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":92770,"user_name":"对方正在输入...","can_delete":false,"product_type":"c1","uid":1074186,"ip_address":"","ucode":"B010A161A83300","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/0a/26cb0133.jpg","comment_is_top":false,"comment_ctime":1557323280,"is_pvip":false,"replies":[{"id":49418,"content":"局域网内需要唯一，不然就冲突了","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1567660879,"ip_address":"","comment_id":92770,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100007101,"comment_content":"刘老师，有些场景下报文的dmac填写的是虚拟网关mac，这mac并不是网卡自带的，那怎么保证虚拟网关mac的唯一性呢？也是需要类似DHCP协议来分配吗？","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449375,"discussion_content":"局域网内需要唯一，不然就冲突了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567660879,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":68682,"user_name":"agem00d0r!","can_delete":false,"product_type":"c1","uid":1052885,"ip_address":"","ucode":"969B135644EA75","user_header":"","comment_is_top":false,"comment_ctime":1550571745,"is_pvip":false,"replies":[{"id":24393,"content":"超哥是纯山东人😂","user_name":"编辑回复","user_name_real":"王锦","uid":1058895,"ctime":1550573262,"ip_address":"","comment_id":68682,"utype":2}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100007101,"comment_content":"刘老师您好，听到你的东北口音特亲切，忍俊不禁。有个问题: 在文中购物的例子中，消费者的浏览器是在何时如何得到电商应用端口的值的啊？请求包的TCP头里咋就有了呢？","like_count":1,"discussions":[{"author":{"id":1058895,"avatar":"https://static001.geekbang.org/account/avatar/00/10/28/4f/48e48553.jpg","nickname":"@阿锦啊","note":"","ucode":"3C5F00333D7174","race_medal":0,"user_type":4,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439794,"discussion_content":"超哥是纯山东人😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550573262,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10243,"user_name":"jiwenkang","can_delete":false,"product_type":"c1","uid":1133764,"ip_address":"","ucode":"EB1524E5C0D634","user_header":"https://static001.geekbang.org/account/avatar/00/11/4c/c4/2582df77.jpg","comment_is_top":false,"comment_ctime":1527406261,"is_pvip":false,"replies":[{"id":3216,"content":"是的，必须踏踏实实，一步一个脚印","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1527465131,"ip_address":"","comment_id":10243,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100007101,"comment_content":"技术这种东西不能吹……","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418408,"discussion_content":"是的，必须踏踏实实，一步一个脚印","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527465131,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9608,"user_name":"焱","can_delete":false,"product_type":"c1","uid":1135230,"ip_address":"","ucode":"9E1C66CCF03880","user_header":"https://static001.geekbang.org/account/avatar/00/11/52/7e/2472c320.jpg","comment_is_top":false,"comment_ctime":1526984374,"is_pvip":false,"replies":[{"id":2976,"content":"谢谢","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1527037894,"ip_address":"","comment_id":9608,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100007101,"comment_content":"这一讲真的不错啊","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418137,"discussion_content":"谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527037894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169289,"user_name":"飞火流苏","can_delete":false,"product_type":"c1","uid":1286444,"ip_address":"","ucode":"FD9948121EC3DD","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTImeO3D5b56uwnS9OqzsuhNiciaA3ekC49lNt7NaGoTZ3U7tfLKRLR3V0F7k8hEJQZ4mQD7hfGwWiceQ/132","comment_is_top":false,"comment_ctime":1578306962,"is_pvip":false,"replies":[{"id":66301,"content":"对的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1578827044,"ip_address":"","comment_id":169289,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100007101,"comment_content":"说一下我粗浅的理解~\n当报文沿着网线从路由器的某个网口进到路由器的时候，路由器需要知道该把它往哪里转发——即从哪个网口出去。这个时候只知道下一跳的IP地址是不够的，IP地址只是逻辑地址，而非物理地址，必须知道物理介质对应的地址即mac地址，路由器才知道把报文从哪个网口转发出去。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480495,"discussion_content":"对的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578827044,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123550,"user_name":"美梦与热望","can_delete":false,"product_type":"c1","uid":1471279,"ip_address":"","ucode":"03D569C47B1DA7","user_header":"https://static001.geekbang.org/account/avatar/00/16/73/2f/2b822de2.jpg","comment_is_top":false,"comment_ctime":1565699792,"is_pvip":false,"replies":[{"id":46299,"content":"加油，多看几遍","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1566282949,"ip_address":"","comment_id":123550,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100007101,"comment_content":"好痛苦，我没看懂","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462722,"discussion_content":"加油，多看几遍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566282949,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115666,"user_name":"杨晓维","can_delete":false,"product_type":"c1","uid":1434854,"ip_address":"","ucode":"4B657DD4A1E2C4","user_header":"https://static001.geekbang.org/account/avatar/00/15/e4/e6/5795b1aa.jpg","comment_is_top":false,"comment_ctime":1563690596,"is_pvip":false,"replies":[{"id":46554,"content":"ARP","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1566356701,"ip_address":"","comment_id":115666,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100007101,"comment_content":"老师，您好，最后一个城关知道这个网络包要去的地方。于是，对着这个国家吼一声，谁是目标 IP 啊？这个吼一声可以具体说下，什么意思嘛？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459217,"discussion_content":"ARP","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566356701,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114566,"user_name":"mamba","can_delete":false,"product_type":"c1","uid":1598484,"ip_address":"","ucode":"24DB3BBFFFF8B5","user_header":"https://static001.geekbang.org/account/avatar/00/18/64/14/13f37902.jpg","comment_is_top":false,"comment_ctime":1563338632,"is_pvip":false,"replies":[{"id":46576,"content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1566359092,"ip_address":"","comment_id":114566,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100007101,"comment_content":"请求包和回复包不一定会走同样的路线吧，有可能经过不同的路由","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458727,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566359092,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109310,"user_name":"Zhang_xb💥","can_delete":false,"product_type":"c1","uid":1487369,"ip_address":"","ucode":"0A7B6FBBE56FA0","user_header":"https://static001.geekbang.org/account/avatar/00/16/b2/09/1e20f19d.jpg","comment_is_top":false,"comment_ctime":1561997589,"is_pvip":false,"replies":[{"id":48814,"content":"这个历史故事还需要再研究一下","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1567498883,"ip_address":"","comment_id":109310,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100007101,"comment_content":"个人看法：为什么ip地址可以定位还需要mac地址，我认为在历史上因为先有了一张一张的局域网，局域网中的大哥以太网的通信就是一直在用mac地址，后来要 inter nets，只需要解决gate到gate的通信〈ip层〉，mac层也就没被动过，也没必要动它，保留了下来。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456348,"discussion_content":"这个历史故事还需要再研究一下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567498883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108340,"user_name":"麦芒小蚱蜢","can_delete":false,"product_type":"c1","uid":1270410,"ip_address":"","ucode":"5EC406B13B798E","user_header":"https://static001.geekbang.org/account/avatar/00/13/62/8a/28abe548.jpg","comment_is_top":false,"comment_ctime":1561722640,"is_pvip":false,"replies":[{"id":48833,"content":"先对比mac，再比对ip。tcp连接就是建立的一套数据结构而已，除了tcp之外，其他地方都看不到这个所谓的连接","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1567500207,"ip_address":"","comment_id":108340,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100007101,"comment_content":"看完了老师的所有章节的内容，收获颇多，感谢老师这么好的课程。虽然在学习的过程中也知道在学习软件层面的时候，不要钻进硬件层面去，但是心里一直有一个结：\n\nclientA  ----&gt;  clientB 的http请求，建立tcp连接之后，就开始进行通信，这个建立的”连接“ 究竟指啥啊，还有就是socket 在监听端口的时候，反映到物理层面是也是电波吗？ 如果clientA在发包的时候，目标ip是clientB的，但是同时有clientC也在监听，是不是其实clientC 也能收到这个包，只不过一看ip层的地址不是自己，就丢了？\n\n非科班毕业，对于好多知识都是只知其名，而不知其理，有些困惑！","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455924,"discussion_content":"先对比mac，再比对ip。tcp连接就是建立的一套数据结构而已，除了tcp之外，其他地方都看不到这个所谓的连接","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567500207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107857,"user_name":"N_H","can_delete":false,"product_type":"c1","uid":1541386,"ip_address":"","ucode":"109B67557AB3CE","user_header":"https://static001.geekbang.org/account/avatar/00/17/85/0a/e564e572.jpg","comment_is_top":false,"comment_ctime":1561624192,"is_pvip":false,"replies":[{"id":48846,"content":"城关的一个口，有一个mac地址","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1567501000,"ip_address":"","comment_id":107857,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100007101,"comment_content":"城关是mac地址，相当于整个局域网的地址，信息从一个局域网A到另一个局域网B需要这个网关，也就是mac地址","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455709,"discussion_content":"城关的一个口，有一个mac地址","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567501000,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106520,"user_name":"　　","can_delete":false,"product_type":"c1","uid":1560563,"ip_address":"","ucode":"0D736D44A24C56","user_header":"https://static001.geekbang.org/account/avatar/00/17/cf/f3/48fc6781.jpg","comment_is_top":false,"comment_ctime":1561338893,"is_pvip":false,"replies":[{"id":48869,"content":"可不止80端口呀","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1567502137,"ip_address":"","comment_id":106520,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100007101,"comment_content":"老师，您好，我想问一下为什么TCP协议会有2个端口号？难道除了80端口还是其他端口吗？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455121,"discussion_content":"可不止80端口呀","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567502137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":102458,"user_name":"雪浪","can_delete":false,"product_type":"c1","uid":1541538,"ip_address":"","ucode":"CB33F2F8418557","user_header":"https://static001.geekbang.org/account/avatar/00/17/85/a2/dbeeb6c4.jpg","comment_is_top":false,"comment_ctime":1560224314,"is_pvip":false,"replies":[{"id":36996,"content":"不用纠结","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1560240968,"ip_address":"","comment_id":102458,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100007101,"comment_content":"ARP协议不是网络层的么？？为什么图里面说的是数据链路层？？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453434,"discussion_content":"不用纠结","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560240968,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":102005,"user_name":"LittleJi","can_delete":false,"product_type":"c1","uid":1216722,"ip_address":"","ucode":"111F0E2794BC17","user_header":"https://static001.geekbang.org/account/avatar/00/12/90/d2/a40d7e65.jpg","comment_is_top":false,"comment_ctime":1560094279,"is_pvip":false,"replies":[{"id":37005,"content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1560241218,"ip_address":"","comment_id":102005,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100007101,"comment_content":"最底层是链路层，网络包首先要经过链路层才能到达网络层，所以需要MAC地址。至于其他人说的MAC地址是唯一的，IP地址是可变的，当你IP地址变了，但是MAC地址不会变，所以依然能找到对方，我觉得不对。首先，IP地址变了，那说明你也不再是我要寻找的对象了，那么我拥有你的唯一标示MAC地址有什么用。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453217,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560241218,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101658,"user_name":"Ellison","can_delete":false,"product_type":"c1","uid":1207457,"ip_address":"","ucode":"A2FB94D4F6A332","user_header":"https://static001.geekbang.org/account/avatar/00/12/6c/a1/80d83f0a.jpg","comment_is_top":false,"comment_ctime":1559903420,"is_pvip":false,"replies":[{"id":37024,"content":"可以","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1560253186,"ip_address":"","comment_id":101658,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100007101,"comment_content":"顺序可以理解为时序吧","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453058,"discussion_content":"可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560253186,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101633,"user_name":"花灰","can_delete":false,"product_type":"c1","uid":1077731,"ip_address":"","ucode":"CA1474945A2A7E","user_header":"https://static001.geekbang.org/account/avatar/00/10/71/e3/5c17b81a.jpg","comment_is_top":false,"comment_ctime":1559895718,"is_pvip":false,"replies":[{"id":37025,"content":"对的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1560253196,"ip_address":"","comment_id":101633,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100007101,"comment_content":"因为没有mac，网络包没法在网络上跑，即使从自己网卡扔出去了，到下一个网络设备也会被当成”坏包“丢弃掉。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453045,"discussion_content":"对的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560253196,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":99449,"user_name":"阿拉索","can_delete":false,"product_type":"c1","uid":1468235,"ip_address":"","ucode":"DD6BA3BB6CB76A","user_header":"https://static001.geekbang.org/account/avatar/00/16/67/4b/6a91f14b.jpg","comment_is_top":false,"comment_ctime":1559217286,"is_pvip":false,"replies":[{"id":49226,"content":"？不明白您的问题","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1567604497,"ip_address":"","comment_id":99449,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100007101,"comment_content":"MAC会少一层，提升效率？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452113,"discussion_content":"？不明白您的问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567604497,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93268,"user_name":"blizzard","can_delete":false,"product_type":"c1","uid":1304461,"ip_address":"","ucode":"4670C65B2B929B","user_header":"https://static001.geekbang.org/account/avatar/00/13/e7/8d/b840c69d.jpg","comment_is_top":false,"comment_ctime":1557448964,"is_pvip":false,"replies":[{"id":49401,"content":"到了二层，IP头有，在MAC头里面","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1567656494,"ip_address":"","comment_id":93268,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100007101,"comment_content":"对于虚拟化网络来说 mac是厂商预留的一部分网段 是可以复用的 \n所以mac主要适用于二层寻址 因为到了二层IP包头已经没了","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449553,"discussion_content":"到了二层，IP头有，在MAC头里面","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567656494,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93122,"user_name":"对方正在输入...","can_delete":false,"product_type":"c1","uid":1074186,"ip_address":"","ucode":"B010A161A83300","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/0a/26cb0133.jpg","comment_is_top":false,"comment_ctime":1557401749,"is_pvip":false,"replies":[{"id":49407,"content":"虚拟网关？","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1567656879,"ip_address":"","comment_id":93122,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100007101,"comment_content":"查了下，虚拟网关mac可以自己配置，唯一性只能由管理员保证，如果不配虚拟网关mac的话，默认使用的是设备的桥mac.","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449495,"discussion_content":"虚拟网关？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567656879,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":92514,"user_name":"gaozf","can_delete":false,"product_type":"c1","uid":1256951,"ip_address":"","ucode":"29B879542F24ED","user_header":"https://static001.geekbang.org/account/avatar/00/13/2d/f7/36abba57.jpg","comment_is_top":false,"comment_ctime":1557287887,"is_pvip":false,"replies":[{"id":49429,"content":"ARP","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1567663181,"ip_address":"","comment_id":92514,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100007101,"comment_content":"发起端如何知道服务器端的MAC地址的？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449293,"discussion_content":"ARP","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567663181,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":92021,"user_name":"饶懿","can_delete":false,"product_type":"c1","uid":1518899,"ip_address":"","ucode":"21DDE0B10B4E41","user_header":"https://static001.geekbang.org/account/avatar/00/17/2d/33/4fac73ac.jpg","comment_is_top":false,"comment_ctime":1557155210,"is_pvip":false,"replies":[{"id":49465,"content":"对的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1567672155,"ip_address":"","comment_id":92021,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100007101,"comment_content":"我来科普一下，网卡的MAC是一组顺序的12位16进制数，一般是由计算机的OEM或者主板厂商依据一定的规则分配并烧录到网卡芯片中的，理论上，理论上，理论上全球唯一。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449119,"discussion_content":"对的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567672155,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91840,"user_name":"下吧下吧我要发芽","can_delete":false,"product_type":"c1","uid":1513025,"ip_address":"","ucode":"DB946E6925D423","user_header":"https://static001.geekbang.org/account/avatar/00/17/16/41/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1557118240,"is_pvip":false,"replies":[{"id":49473,"content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1567674616,"ip_address":"","comment_id":91840,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100007101,"comment_content":"公网的ip地址是有限的，局域网ip和公网ip是不可以直接互通的。Mac地址可以理解为局域网内的身份标识。先通过公网ip找到局域网，然后在对应的局域网通过Mac找到对应的机器\n\n\n\n","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449054,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567674616,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":87041,"user_name":"夜空咏叹调","can_delete":false,"product_type":"c1","uid":1189074,"ip_address":"","ucode":"CC9350BCF218CD","user_header":"https://static001.geekbang.org/account/avatar/00/12/24/d2/a5e272ce.jpg","comment_is_top":false,"comment_ctime":1555502331,"is_pvip":false,"replies":[{"id":49617,"content":"没有共用一个Ip地址","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1567693054,"ip_address":"","comment_id":87041,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100007101,"comment_content":"因为ip地址不唯一，不能唯一匹配某个地址。我记得没错的话，网络中会有一个内网的概念，内网共用同一个ip地址，这样就只能通过MAC地址去找了。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447290,"discussion_content":"没有共用一个Ip地址","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567693054,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83296,"user_name":"易儿易","can_delete":false,"product_type":"c1","uid":1242864,"ip_address":"","ucode":"B15D1031CA841E","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqLcWH3mSPmhjrs1aGL4b3TqI7xDqWWibM4nYFrRlp0z7FNSWaJz0mqovrgIA7ibmrPt8zRScSfRaqQ/132","comment_is_top":false,"comment_ctime":1554523497,"is_pvip":false,"replies":[{"id":49918,"content":"两个路由器之间是一个局域网","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1567781946,"ip_address":"","comment_id":83296,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100007101,"comment_content":"为什么两个城关之间是一个国家，而不是每个城关背后是一个国家？这一点是我最疑惑和不解的地方。我是专栏结束之后订阅的，时间过去很久了，不知道老师能否回答。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445963,"discussion_content":"两个路由器之间是一个局域网","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567781946,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":81715,"user_name":"千岁寒","can_delete":false,"product_type":"c1","uid":1043771,"ip_address":"","ucode":"58D4F1347F6058","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ed/3b/daa0ff2d.jpg","comment_is_top":false,"comment_ctime":1554016895,"is_pvip":false,"replies":[{"id":50075,"content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1567791568,"ip_address":"","comment_id":81715,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100007101,"comment_content":"问题的原因是，IP层的报文需要经过MAC层的传输来实现，这一层的通信是基于MAC地址的，否则设备不知道报文要去哪里，IP地址和路由信息描述3层的信息，但是MAC的信息无法获取，而且MAC地址是逐跳变更的，而网络地址是固定的。联系IP层和MAC层的协议是ARP协议和NDP协议。就是刘老师说的吼的那一声。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445311,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567791568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":80415,"user_name":"Jeremy","can_delete":false,"product_type":"c1","uid":1453795,"ip_address":"","ucode":"1DCB0A85533972","user_header":"https://static001.geekbang.org/account/avatar/00/16/2e/e3/1154affe.jpg","comment_is_top":false,"comment_ctime":1553658258,"is_pvip":false,"replies":[{"id":50157,"content":"加油。极客时间是适合音频学习的。一般一开始会浅，后面会深。但是小马过河啦","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1567825192,"ip_address":"","comment_id":80415,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100007101,"comment_content":"朋友说极客时间的内容说得比较浅，作为一名网络初学者，看完这节课，花了一上午，把提到的不懂的概念都记录下来，并上网搜索，感觉学到了不少~继续努力~","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444854,"discussion_content":"加油。极客时间是适合音频学习的。一般一开始会浅，后面会深。但是小马过河啦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567825192,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":80256,"user_name":"相望于江湖","can_delete":false,"product_type":"c1","uid":1253128,"ip_address":"","ucode":"9CCB6F89F92C89","user_header":"https://static001.geekbang.org/account/avatar/00/13/1f/08/14642f9e.jpg","comment_is_top":false,"comment_ctime":1553645423,"is_pvip":false,"replies":[{"id":50168,"content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1567825539,"ip_address":"","comment_id":80256,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100007101,"comment_content":"每一台的mac地址都是唯一的，而ip在不同的局域网里可以重复","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444801,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567825539,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79945,"user_name":"Rêve","can_delete":false,"product_type":"c1","uid":1476458,"ip_address":"","ucode":"B8618AB21265F0","user_header":"https://static001.geekbang.org/account/avatar/00/16/87/6a/9843e019.jpg","comment_is_top":false,"comment_ctime":1553578253,"is_pvip":false,"replies":[{"id":50186,"content":"对的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1567825970,"ip_address":"","comment_id":79945,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100007101,"comment_content":"打比方就还比快递一样，Mac地址就是你手机上的电话号码以及你个人的身份证信息，而IP地址就是你现在所住的城市地点，一个是对地区的区分，一个是下分到个人的区分吧！我这样理解对吗？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444697,"discussion_content":"对的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567825970,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77353,"user_name":"乖乖","can_delete":false,"product_type":"c1","uid":1142190,"ip_address":"","ucode":"6A2F0F23592A0A","user_header":"https://static001.geekbang.org/account/avatar/00/11/6d/ae/61e21298.jpg","comment_is_top":false,"comment_ctime":1552910947,"is_pvip":false,"replies":[{"id":50238,"content":"这个不是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1567827625,"ip_address":"","comment_id":77353,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100007101,"comment_content":"IP地址相当于 防腐层，以保证mac地址的不可变。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443695,"discussion_content":"这个不是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567827625,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76312,"user_name":"hj","can_delete":false,"product_type":"c1","uid":1264287,"ip_address":"","ucode":"6ED34286AC30FA","user_header":"https://static001.geekbang.org/account/avatar/00/13/4a/9f/b92a9139.jpg","comment_is_top":false,"comment_ctime":1552570385,"is_pvip":false,"replies":[{"id":50243,"content":"不纠结层哈","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1567827690,"ip_address":"","comment_id":76312,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100007101,"comment_content":"老师，小结里面那个图，ARP为啥放在数据链路层？应该是网络层的协议吧","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443250,"discussion_content":"不纠结层哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567827690,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75853,"user_name":"不负","can_delete":false,"product_type":"c1","uid":1238323,"ip_address":"","ucode":"147F5860711811","user_header":"https://static001.geekbang.org/account/avatar/00/12/e5/33/ff5c52ad.jpg","comment_is_top":false,"comment_ctime":1552481831,"is_pvip":false,"replies":[{"id":50247,"content":"是的，有风险，可以检测ip和mac的关系防止欺骗","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1567827918,"ip_address":"","comment_id":75853,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100007101,"comment_content":"评论很棒，知道了 识别的 MAC 地址可以造假，那么通过 MAC 地址到网关或目标地址，不是也有风险？是有别的规避措施？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443057,"discussion_content":"是的，有风险，可以检测ip和mac的关系防止欺骗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567827918,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74662,"user_name":"Null","can_delete":false,"product_type":"c1","uid":1382587,"ip_address":"","ucode":"A7D4DF2A43C7D8","user_header":"https://static001.geekbang.org/account/avatar/00/15/18/bb/9299fab1.jpg","comment_is_top":false,"comment_ctime":1552274704,"is_pvip":false,"replies":[{"id":50261,"content":"电商平台一定部署在某台服务器上，就是这个服务器上的tcp，在内核里面。电商平台是个应用，当然包要从内核里面给应用啦","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1567828349,"ip_address":"","comment_id":74662,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100007101,"comment_content":"当网络包平安到达 TCP 层之后，TCP 头中有目标端口号，通过这个端口号，可以找到电商网站的进程正在监听这个端口号。。。到达谁的TCP，我理解是电商服务器接到这个包，那后面又把这个包返回给电商网站是啥意思，不是应该是生成响应包发回给电商网站吗？求老师解释下？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442640,"discussion_content":"电商平台一定部署在某台服务器上，就是这个服务器上的tcp，在内核里面。电商平台是个应用，当然包要从内核里面给应用啦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567828349,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":68960,"user_name":"王肖武","can_delete":false,"product_type":"c1","uid":1282385,"ip_address":"","ucode":"561AF05284EBE2","user_header":"https://static001.geekbang.org/account/avatar/00/13/91/51/234f9a73.jpg","comment_is_top":false,"comment_ctime":1550634475,"is_pvip":false,"replies":[{"id":50299,"content":"需要IP层","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1567840325,"ip_address":"","comment_id":68960,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100007101,"comment_content":"内网通讯还需要ip层吗？可不可以去掉，直接到mac层？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439890,"discussion_content":"需要IP层","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567840325,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":67632,"user_name":"传说中的成大大","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1550214003,"is_pvip":false,"replies":[{"id":25981,"content":"收到的太多了，都要看，收到的时候，不知道哪里发来的，只是判断是不是我的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1551440776,"ip_address":"","comment_id":67632,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100007101,"comment_content":"最后一个城关知道这个网络包要去的地方。于是，对着这个国家吼一声，谁是目标 IP 啊？目标服务器就会回复一个 MAC 地址。网络包过关后，通过这个 MAC 地址就能找到目标服务器。\n\n目标服务器发现 MAC 地址对上了，取下 MAC 头来，发送给操作系统的网络层。发现 IP 也对上了，就取下 IP 头。IP 头里会写上一层封装的是 TCP 协议，然后将其交给传输层，即TCP 层。\n老师你好，我今天是第一天看这个，上面两句话我有个疑问，竟然网关通过ip地址找到了目标服务器的mac地址，发送给目标主机，拆掉mac头为啥到了网络层他还要验证一次ip地址呢？是为了验证，还是怎么回事？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439291,"discussion_content":"收到的太多了，都要看，收到的时候，不知道哪里发来的，只是判断是不是我的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551440776,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":67006,"user_name":"克里斯","can_delete":false,"product_type":"c1","uid":1327103,"ip_address":"","ucode":"86DA0F356E2ACD","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK8UYbedASKg0kicuQFQpnRuq71eKhw2Lwycaaxhnora0ibMucGNwQh4WFxJFhkWSsmjnPvTBzajWwA/132","comment_is_top":false,"comment_ctime":1550054776,"is_pvip":false,"replies":[{"id":25972,"content":"是个知名端口，https的都是443端口，http都是80","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1551439391,"ip_address":"","comment_id":67006,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100007101,"comment_content":"TCP头是怎么知道电商端口号的呢","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439012,"discussion_content":"是个知名端口，https的都是443端口，http都是80","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551439391,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65995,"user_name":"杨槐","can_delete":false,"product_type":"c1","uid":1178889,"ip_address":"","ucode":"A07D7FA4569F5F","user_header":"https://static001.geekbang.org/account/avatar/00/11/fd/09/13f8a4ab.jpg","comment_is_top":false,"comment_ctime":1549844975,"is_pvip":false,"replies":[{"id":25966,"content":"外网，一般会有一个snat网关","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1551438825,"ip_address":"","comment_id":65995,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100007101,"comment_content":"内网访问外网时，外网获取请求ip地址，一般是内网的还是外网的啊","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438670,"discussion_content":"外网，一般会有一个snat网关","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551438825,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65914,"user_name":"卡萨布兰卡","can_delete":false,"product_type":"c1","uid":1137379,"ip_address":"","ucode":"0A4C8E99BA6E83","user_header":"https://static001.geekbang.org/account/avatar/00/11/5a/e3/dec478ac.jpg","comment_is_top":false,"comment_ctime":1549768980,"is_pvip":false,"replies":[{"id":25969,"content":"不是tcp的，http没有超时重发，你的应用应该做这些","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1551439191,"ip_address":"","comment_id":65914,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100007101,"comment_content":"老师，我有个问题。在实践中，发现如果一个请求发送给服务器端，服务器端一段时间没有返回结果（应该是超时），那么浏览器会重新发送一个请求，一共是三次左右。我看了您的课程，觉得这应该不是tcp的超时重发机制，那么这个是http&#47;https的超时重发机制吗？望解答！","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438640,"discussion_content":"不是tcp的，http没有超时重发，你的应用应该做这些","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551439191,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65715,"user_name":"666","can_delete":false,"product_type":"c1","uid":1089792,"ip_address":"","ucode":"E16B1C52DBB550","user_header":"https://static001.geekbang.org/account/avatar/00/10/a1/00/68ffaa02.jpg","comment_is_top":false,"comment_ctime":1549599302,"is_pvip":false,"replies":[{"id":25963,"content":"已有脑图","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1551438670,"ip_address":"","comment_id":65715,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100007101,"comment_content":"老师 我刚开始学习 能不能对这些知识通过脑图的方式整理起来呢？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438561,"discussion_content":"已有脑图","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551438670,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":64075,"user_name":"生","can_delete":false,"product_type":"c1","uid":1243672,"ip_address":"","ucode":"D8774DCE200714","user_header":"https://static001.geekbang.org/account/avatar/00/12/fa/18/d4329a31.jpg","comment_is_top":false,"comment_ctime":1548660208,"is_pvip":false,"replies":[{"id":25820,"content":"mac头里面的src mac也是每次过一个路由器就变一次的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1551424126,"ip_address":"","comment_id":64075,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100007101,"comment_content":"问个问题，MAC头里的网关的MAC是不是经过一个路由就会变一次，而客户端电脑的MAC一直没变","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437845,"discussion_content":"mac头里面的src mac也是每次过一个路由器就变一次的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551424126,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57417,"user_name":"风之翼","can_delete":false,"product_type":"c1","uid":1218129,"ip_address":"","ucode":"FD524CE1530E9A","user_header":"https://static001.geekbang.org/account/avatar/00/12/96/51/dc51d2d4.jpg","comment_is_top":false,"comment_ctime":1546784983,"is_pvip":false,"replies":[{"id":25769,"content":"有的服务器，也可以配置forward，当成路由器","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1551421834,"ip_address":"","comment_id":57417,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100007101,"comment_content":"这里大牛很多啊，我个人发表一个不太成熟的想法：\n请求包经过IP封装后，里面之写入了源ip地址和目标ip，于是虽然有到达下一城关的IP路由表，然而IP报文头中的源目标地址是不能更改的（当然也就不能改为下一跳城关的IP了），否则目的地就丢失了。于是通过MAC进行本地寻址就成了唯一选择（而且MAC相当一个公司的保安，这个保安还有过目就忘的本事。。。你每次想进这家公司做任何是事情都必须先和他打交道，而且必须按照人家的规范（交代你是谁、找谁、来干什么、打电话确认身份等）沟通，否则门都进不了）。\n另外，说明一下路由器和一般PC的IP层网络处理区别：\n对于路由器，在取出报文IP头后，一般里面的目的IP不太可能是自己，根据路由转发协议，他会从路由表中找出去往该目的地的下一跳IP，如果找不到，就丢弃该报文\n对于一般PC或服务器，取出IP头后，如果发现里面的目标IP不是自己，就直接丢弃","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435569,"discussion_content":"有的服务器，也可以配置forward，当成路由器","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551421834,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57381,"user_name":"松三爷","can_delete":false,"product_type":"c1","uid":1367465,"ip_address":"","ucode":"4B1F6B81BC28D4","user_header":"https://static001.geekbang.org/account/avatar/00/14/dd/a9/fa4cb455.jpg","comment_is_top":false,"comment_ctime":1546773225,"is_pvip":false,"replies":[{"id":25766,"content":"不用纠结","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1551421774,"ip_address":"","comment_id":57381,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100007101,"comment_content":"老师，刚开始看您的课最后一张图有个问题： BGP是on top of TCP的， 我们到底应该把它算作网络层的协议，还是传输层的呢？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435550,"discussion_content":"不用纠结","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551421774,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":51153,"user_name":"罗格","can_delete":false,"product_type":"c1","uid":1206701,"ip_address":"","ucode":"B5DAA40E7DE008","user_header":"https://static001.geekbang.org/account/avatar/00/12/69/ad/f5df3e6a.jpg","comment_is_top":false,"comment_ctime":1545121408,"is_pvip":false,"replies":[{"id":18689,"content":"不是圈内是局域网，而且连接两个路由器之间是局域网","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1545221380,"ip_address":"","comment_id":51153,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100007101,"comment_content":"作者大大，我又回过头来看这篇，结合您之前的讲解，文字的 国家—城关 配图是否有些欠妥？按图中的结构，所有城关（路由器）直接连成一圈，而国家（局域网）都“藏”在城关后面，这种结构跟您之前告诉我的那种  局域网——路由器——局域网——路由器——局域网 的结构有差异哦，还是说应该把城关围成的圈也看做一个局域网呢，这地方还是有些困惑，还望赐教...","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433310,"discussion_content":"不是圈内是局域网，而且连接两个路由器之间是局域网","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545221380,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":44904,"user_name":"罗格","can_delete":false,"product_type":"c1","uid":1206701,"ip_address":"","ucode":"B5DAA40E7DE008","user_header":"https://static001.geekbang.org/account/avatar/00/12/69/ad/f5df3e6a.jpg","comment_is_top":false,"comment_ctime":1543504653,"is_pvip":false,"replies":[{"id":16025,"content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1543542395,"ip_address":"","comment_id":44904,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100007101,"comment_content":"城关与城关之间是一个国家，感觉这比喻是否不妥，有点忘了网络的绕了许久才想起来两个路由器应该也是处于同个局域网，所以可以使用mac地址获取到临近的网关……我应该没理解错吧","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430856,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543542395,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":42795,"user_name":"shawn","can_delete":false,"product_type":"c1","uid":1010221,"ip_address":"","ucode":"8F6A8C7920996E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6a/2d/ec4ed8ce.jpg","comment_is_top":false,"comment_ctime":1543047342,"is_pvip":false,"replies":[{"id":15315,"content":"是的，还会丢包","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1543056480,"ip_address":"","comment_id":42795,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100007101,"comment_content":"“这个 HTTPS 的包，会像来的时候一样，经过千难万险到达你的个人电脑，最终进入浏览器，显示支付成功。 ”老师这里说千难万险是指重新选一遍路由么？而不是像tcp 回复那样原路返回。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430201,"discussion_content":"是的，还会丢包","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543056480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":42159,"user_name":"王先统","can_delete":false,"product_type":"c1","uid":1236218,"ip_address":"","ucode":"4D208672C0D359","user_header":"https://static001.geekbang.org/account/avatar/00/12/dc/fa/3975f8da.jpg","comment_is_top":false,"comment_ctime":1542932146,"is_pvip":false,"replies":[{"id":15142,"content":"后面有答复环节","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1542947260,"ip_address":"","comment_id":42159,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100007101,"comment_content":"看了很多留言，好像都没能很好地回答最后的问题，还请老师解答一下","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430001,"discussion_content":"后面有答复环节","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1542947260,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":42066,"user_name":"钟茂坤","can_delete":false,"product_type":"c1","uid":1320992,"ip_address":"","ucode":"B3247F9DAEE04E","user_header":"https://static001.geekbang.org/account/avatar/00/14/28/20/5af0750d.jpg","comment_is_top":false,"comment_ctime":1542900300,"is_pvip":false,"replies":[{"id":15140,"content":"mac找到路由器，到了接收端，再根据ip找到mac","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1542947179,"ip_address":"","comment_id":42066,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100007101,"comment_content":"刘老师，请教个问题。在局域网内，发送端发出数据时，数据包流向是先根据mac地址到交换机再到路由器的吗？根据路由选择到了接收端局域网后，再根据交换机找到对应的mac地址吗","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":429984,"discussion_content":"mac找到路由器，到了接收端，再根据ip找到mac","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1542947179,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":40669,"user_name":"Luke","can_delete":false,"product_type":"c1","uid":1216016,"ip_address":"","ucode":"C34D4C44DBCE03","user_header":"https://static001.geekbang.org/account/avatar/00/12/8e/10/10092bb1.jpg","comment_is_top":false,"comment_ctime":1542640192,"is_pvip":false,"replies":[{"id":14640,"content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1542662178,"ip_address":"","comment_id":40669,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100007101,"comment_content":"TCP重发是指没收到ack的话，客户端TCP再发包给服务器端的TCP层解析，直到收到ack或者超时，这期间都是两端的最底的3层之间的通信，是吧？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":429585,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1542662178,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":33948,"user_name":"Vicky🐣🐣🐣","can_delete":false,"product_type":"c1","uid":1266840,"ip_address":"","ucode":"F659F178A2FF34","user_header":"https://static001.geekbang.org/account/avatar/00/13/54/98/52ca7053.jpg","comment_is_top":false,"comment_ctime":1539925683,"is_pvip":false,"replies":[{"id":12381,"content":"可以的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1540290505,"ip_address":"","comment_id":33948,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100007101,"comment_content":"如果我修改了自己的mac地址，又修改了ip，然后能冒充别人吗？🤭","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":427082,"discussion_content":"可以的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1540290505,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":25092,"user_name":"Liberty","can_delete":false,"product_type":"c1","uid":1115413,"ip_address":"","ucode":"F2A17A4CDD1C52","user_header":"https://static001.geekbang.org/account/avatar/00/11/05/15/b9ddec2d.jpg","comment_is_top":false,"comment_ctime":1537244887,"is_pvip":false,"replies":[{"id":9145,"content":"有人回答过这个问题了，修改的是系统的mac","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1537249788,"ip_address":"","comment_id":25092,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100007101,"comment_content":"其实mac是可以修改的，很多硬件厂商在出厂的时候会使用工具往网卡上写入mac地址，出现重复和冲突是完全有可能的","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424185,"discussion_content":"有人回答过这个问题了，修改的是系统的mac","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537249788,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23826,"user_name":"lewis","can_delete":false,"product_type":"c1","uid":1228695,"ip_address":"","ucode":"79CFB9D89310A8","user_header":"https://static001.geekbang.org/account/avatar/00/12/bf/97/14626661.jpg","comment_is_top":false,"comment_ctime":1536674710,"is_pvip":false,"replies":[{"id":8732,"content":"冲突了，网关就困惑了，谁也收不到","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1536718865,"ip_address":"","comment_id":23826,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100007101,"comment_content":"ip用于路由查找， 到达了目标网络的网关之后， 加入目标网络中有多个机器的内网ip或者mac地址相同， 这个情况是怎样处理的？ 之前见过，电脑会弹出mac地址冲突的提示。 那岂不是多个电脑都能收到同一个包？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423748,"discussion_content":"冲突了，网关就困惑了，谁也收不到","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536718865,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23644,"user_name":"周友军","can_delete":false,"product_type":"c1","uid":1228581,"ip_address":"","ucode":"7089BC3DE151D9","user_header":"https://static001.geekbang.org/account/avatar/00/12/bf/25/0f155a86.jpg","comment_is_top":false,"comment_ctime":1536565663,"is_pvip":false,"replies":[{"id":8597,"content":"给城关发arp","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1536578453,"ip_address":"","comment_id":23644,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100007101,"comment_content":"我理解是不是错误了，网络包已经出去了，到城关了，怎么又回来通过MAC地址？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423656,"discussion_content":"给城关发arp","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536578453,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23460,"user_name":"DaDo Wang","can_delete":false,"product_type":"c1","uid":1025375,"ip_address":"","ucode":"41896B9722141B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a5/5f/05d97868.jpg","comment_is_top":false,"comment_ctime":1536378554,"is_pvip":false,"replies":[{"id":8494,"content":"最后一节是搭建一个环境，将tcpip详解实验做一遍","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1536393862,"ip_address":"","comment_id":23460,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100007101,"comment_content":"请问老师，网络协议这种知识，如何通过实际操作来加深理解和巩固呢？这方面的知识偏理论。。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423571,"discussion_content":"最后一节是搭建一个环境，将tcpip详解实验做一遍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536393862,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23244,"user_name":"小太阳","can_delete":false,"product_type":"c1","uid":1172965,"ip_address":"","ucode":"02C5867917D1D5","user_header":"https://static001.geekbang.org/account/avatar/00/11/e5/e5/0395607e.jpg","comment_is_top":false,"comment_ctime":1536232192,"is_pvip":false,"replies":[{"id":8411,"content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1536236452,"ip_address":"","comment_id":23244,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100007101,"comment_content":"这段代码是java码吗？大佬","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423476,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536236452,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23066,"user_name":"d.keven","can_delete":false,"product_type":"c1","uid":1215250,"ip_address":"","ucode":"CFCC72EB0D21D6","user_header":"https://static001.geekbang.org/account/avatar/00/12/8b/12/bf93acea.jpg","comment_is_top":false,"comment_ctime":1536132740,"is_pvip":false,"replies":[{"id":8362,"content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1536150976,"ip_address":"","comment_id":23066,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100007101,"comment_content":"很多人还是纠结ARP协议到底属于哪一层，事实上你如果是大学生，那考试遇到你就填网络层，如果你是为了做项目，那你纠结这个玩意儿一点意义也没有","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423398,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536150976,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21201,"user_name":"不觉","can_delete":false,"product_type":"c1","uid":1134951,"ip_address":"","ucode":"F456C765032EB4","user_header":"https://static001.geekbang.org/account/avatar/00/11/51/67/4777ccbf.jpg","comment_is_top":false,"comment_ctime":1534982006,"is_pvip":false,"replies":[{"id":7483,"content":"都有代码里，就像咱们平时写程序封装和分层一样","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1534990416,"ip_address":"","comment_id":21201,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100007101,"comment_content":"老师你好，我刚刚看到这个 传输层封装后送到 操作系统的网络层？ 网络层在服务器？还是说各个层有具体位置吗","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422576,"discussion_content":"都有代码里，就像咱们平时写程序封装和分层一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1534990416,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21118,"user_name":"朽木自雕","can_delete":false,"product_type":"c1","uid":1137596,"ip_address":"","ucode":"C7EBFD3FD60958","user_header":"https://static001.geekbang.org/account/avatar/00/11/5b/bc/1b6e3848.jpg","comment_is_top":false,"comment_ctime":1534926485,"is_pvip":false,"replies":[{"id":7484,"content":"是的，这里阐述的是经典的编译原理理论","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1534990551,"ip_address":"","comment_id":21118,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100007101,"comment_content":"刘老师你好，关于您说的java代码的一系列编译过程，您说的这几个应该是前端编译吧，我理解的是（源代码）——词法分析—（符号流）—语法分析—（语法树）—语义分析—（语法树）—中间代码生成\n—（中间代码）——机器无关代码优化—（中间代码）—代码生成—（机器语言）—机器语言——机器相关代码优化——\n分为前端编译和后端编译，我们可以把将.java文件编译为.class文件成为前端编译，之后翻译成机器指令的过程成为后端编译吧","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422546,"discussion_content":"是的，这里阐述的是经典的编译原理理论","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1534990551,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":17835,"user_name":"ashine","can_delete":false,"product_type":"c1","uid":1071194,"ip_address":"","ucode":"774A09CDCCECE6","user_header":"","comment_is_top":false,"comment_ctime":1532994689,"is_pvip":false,"replies":[{"id":6216,"content":"tcp层只是包的重传，重复的包只有一个会到应用层，幂等是应用层的概念，只有两次调用才有幂等的要求","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1533039741,"ip_address":"","comment_id":17835,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100007101,"comment_content":"如果过一段时间还是没到，发送端的 TCP 层会重新发送这这个包。\n请问如果tcp重发这个包，如果没做幂等，岂不是会产生一些问题?tcp是所有请求都会去重试吗?\n","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421296,"discussion_content":"tcp层只是包的重传，重复的包只有一个会到应用层，幂等是应用层的概念，只有两次调用才有幂等的要求","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1533039741,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16356,"user_name":"lishaohui","can_delete":false,"product_type":"c1","uid":1069078,"ip_address":"","ucode":"A1557744C48088","user_header":"https://static001.geekbang.org/account/avatar/00/10/50/16/0a60e36a.jpg","comment_is_top":false,"comment_ctime":1531897584,"is_pvip":false,"replies":[{"id":5680,"content":"是啊，宕机了就访问不到了，所以要做容灾和负载均衡","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1531909234,"ip_address":"","comment_id":16356,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100007101,"comment_content":"有个疑问。我现在的理解是当到达了目标机器所在的网关时，网管会使用Arp协议发送广播来得到目标机器的mac地址。但是如果在这之前目标机器的IP就已经改变了，那不就会有问题了。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420769,"discussion_content":"是啊，宕机了就访问不到了，所以要做容灾和负载均衡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531909234,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":12974,"user_name":"夏夜vv凉","can_delete":false,"product_type":"c1","uid":1154954,"ip_address":"","ucode":"211679543A7F60","user_header":"https://static001.geekbang.org/account/avatar/00/11/9f/8a/abe5cfc5.jpg","comment_is_top":false,"comment_ctime":1529219625,"is_pvip":false,"replies":[{"id":4322,"content":"socket编程的时候，成功不成功会返回一个值，然后读取一个内存，收到了就是收到了。浏览器也不过就是socket编程","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1529303245,"ip_address":"","comment_id":12974,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100007101,"comment_content":"tcp层报平安，怎么确认浏览器收到呢","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":419484,"discussion_content":"socket编程的时候，成功不成功会返回一个值，然后读取一个内存，收到了就是收到了。浏览器也不过就是socket编程","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1529303245,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10788,"user_name":"小北海","can_delete":false,"product_type":"c1","uid":1140557,"ip_address":"","ucode":"9F59C3249E1A30","user_header":"https://static001.geekbang.org/account/avatar/00/11/67/4d/97686bbe.jpg","comment_is_top":false,"comment_ctime":1527701109,"is_pvip":false,"replies":[{"id":3444,"content":"这是一个微服务的课题，其实左耳听风里面讲这个东西了，网上也有很多资料","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1527743178,"ip_address":"","comment_id":10788,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100007101,"comment_content":"&quot;不会的，就算http的重试也不应该导致重复下单，要求接口幂等&quot;我想问下，这个http如何保证幂等性","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418596,"discussion_content":"这是一个微服务的课题，其实左耳听风里面讲这个东西了，网上也有很多资料","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527743178,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10538,"user_name":"程龙","can_delete":false,"product_type":"c1","uid":1131918,"ip_address":"","ucode":"645516BFF8A96F","user_header":"https://static001.geekbang.org/account/avatar/00/11/45/8e/83bac3bb.jpg","comment_is_top":false,"comment_ctime":1527587150,"is_pvip":false,"replies":[{"id":3348,"content":"网站可不是城关，只有路由器是城关，城关比喻的是穿门而过的地方，网站一般是访问终点","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1527591601,"ip_address":"","comment_id":10538,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100007101,"comment_content":"有一个地方不清楚哦，只有两个城之间相连吗？假设我现在新开了一个网站（城关），那上个层是哪里？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418518,"discussion_content":"网站可不是城关，只有路由器是城关，城关比喻的是穿门而过的地方，网站一般是访问终点","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527591601,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10497,"user_name":"党","can_delete":false,"product_type":"c1","uid":1071974,"ip_address":"","ucode":"EE531DB3EA124D","user_header":"https://static001.geekbang.org/account/avatar/00/10/5b/66/ad35bc68.jpg","comment_is_top":false,"comment_ctime":1527564492,"is_pvip":false,"replies":[{"id":3343,"content":"谢谢，赞","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1527581860,"ip_address":"","comment_id":10497,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100007101,"comment_content":"看了那么多人的留言想回复辩解一下 但是没有回复功能 好多人提到了ip是动态的无法跟mac对应，但是老师没说是你机子所在的局域网，而服务器ip一般都是固定的，ip地址是划分层级的，127开头的都是局域网，是不能被外网访问到的，服务器是静态的是能被访问到的。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418503,"discussion_content":"谢谢，赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527581860,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10387,"user_name":"noodles","can_delete":false,"product_type":"c1","uid":1131321,"ip_address":"","ucode":"A0FAF6BDF8E9CB","user_header":"https://static001.geekbang.org/account/avatar/00/11/43/39/7642af93.jpg","comment_is_top":false,"comment_ctime":1527518111,"is_pvip":false,"replies":[{"id":3346,"content":"如果目标是本机，就不用发出去了","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1527585055,"ip_address":"","comment_id":10387,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100007101,"comment_content":"老师。麻烦回答下如何目的ip地址是本地主机。是不是就不需要走网关了。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418462,"discussion_content":"如果目标是本机，就不用发出去了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527585055,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9725,"user_name":"coder王","can_delete":false,"product_type":"c1","uid":1121990,"ip_address":"","ucode":"21465DC3850BCB","user_header":"https://static001.geekbang.org/account/avatar/00/11/1e/c6/6f817e6e.jpg","comment_is_top":false,"comment_ctime":1527048161,"is_pvip":false,"replies":[{"id":3002,"content":"好的，一定","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1527059715,"ip_address":"","comment_id":9725,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100007101,"comment_content":"希望老师有时间的话能多回复下留言，很多别人的问题刚好也是自己的问题😁","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418181,"discussion_content":"好的，一定","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527059715,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9676,"user_name":"大师兄","can_delete":false,"product_type":"c1","uid":1136897,"ip_address":"","ucode":"37273A01E3A205","user_header":"https://static001.geekbang.org/account/avatar/00/11/59/01/b8709bb9.jpg","comment_is_top":false,"comment_ctime":1527034938,"is_pvip":false,"replies":[{"id":2973,"content":"做比喻是有这个问题，但是入门课还是觉得形象点好","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1527037731,"ip_address":"","comment_id":9676,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100007101,"comment_content":"我觉得看这种文章的人都是做技术的，拿国家城关做比较我看的一头雾水，还要自己把城关之类的翻译成术语才能对应起来","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418160,"discussion_content":"做比喻是有这个问题，但是入门课还是觉得形象点好","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527037731,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9663,"user_name":"秋去冬来","can_delete":false,"product_type":"c1","uid":1136715,"ip_address":"","ucode":"0A373BF8A9D1A5","user_header":"https://static001.geekbang.org/account/avatar/00/11/58/4b/34e7ceca.jpg","comment_is_top":false,"comment_ctime":1527030214,"is_pvip":false,"replies":[{"id":2974,"content":"属于哪一层其实使用的时候，不必纠结","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1527037784,"ip_address":"","comment_id":9663,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100007101,"comment_content":"你好，请问一下ARP协议属于那一层，我看到网上都把它归到网络层，你这边给的是在链路层，这点让我不是很理解","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418155,"discussion_content":"属于哪一层其实使用的时候，不必纠结","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527037784,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9461,"user_name":"语鬼","can_delete":false,"product_type":"c1","uid":1061384,"ip_address":"","ucode":"238E4BA7822521","user_header":"https://static001.geekbang.org/account/avatar/00/10/32/08/17fc5b22.jpg","comment_is_top":false,"comment_ctime":1526886798,"is_pvip":false,"replies":[{"id":2847,"content":"是的，不一定原路","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1526908049,"ip_address":"","comment_id":9461,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100007101,"comment_content":"&quot;会沿着刚才来的方向走回去，报个平安&quot;\n\n应该不一定原路返回吧？愚见","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418074,"discussion_content":"是的，不一定原路","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526908049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9055,"user_name":"刘义宝","can_delete":false,"product_type":"c1","uid":1103450,"ip_address":"","ucode":"CF402E390B2442","user_header":"https://static001.geekbang.org/account/avatar/00/10/d6/5a/bd2378eb.jpg","comment_is_top":false,"comment_ctime":1526604036,"is_pvip":false,"replies":[{"id":2708,"content":"是的，这里说的意思是原样返回，就是还是这个过程返回，比喻有点不严谨了","user_name":"作者回复","user_name_real":"刘超@网易云","uid":1001590,"ctime":1526607355,"ip_address":"","comment_id":9055,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100007101,"comment_content":"返回的路和去的路可能不完全一致的","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417958,"discussion_content":"是的，这里说的意思是原样返回，就是还是这个过程返回，比喻有点不严谨了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526607355,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9107,"user_name":"芒果","can_delete":false,"product_type":"c1","uid":1124278,"ip_address":"","ucode":"5AD71E7F9FC738","user_header":"https://static001.geekbang.org/account/avatar/00/11/27/b6/e53c17ee.jpg","comment_is_top":false,"comment_ctime":1526609777,"is_pvip":false,"replies":null,"discussion_count":29,"race_medal":0,"score":10,"product_id":100007101,"comment_content":"个人发表一下对这个问题的看法，抛砖引玉，希望老师指正：1.局域网内IP地址是动态分配的，假如我是192.168.2.100，如果我下线了，可能IP就分配给了另一台电脑。IP和设备并不总是对应的，这对通信就产生了问题，但是MAC地址不同，MAC地址和设备是一一对应且全球唯一的。所以局域网使用MAC地址通信没有问题。2.历史遗留问题：早期的以太网只有交换机，没有路由器，以太网内通过MAC地址通信。后来才有了互联网，为了兼容原本的模式，采用了IP+MAC地址通信的方式。为啥不推到了重来呢？看看IPv6的处境你就知道了。所以是先有MAC地址后有的IP，IP的提出主要还是因为MAC地址本身的缺陷，这个问题换成有了MAC为何还要IP地址也很有意思。3.我这里简单说一下第一：MAC地址本身的缺陷：因为MAC地址是硬件提供商写在网卡中的，MAC地址虽然唯一但是不能表明用户在整个互联网中的位置，除非维护一个超级大MAC地址对应表，那寻址效率肯定爆炸。但是IP地址解决了这个问题，因为IP地址是网络提供商给你的，所以你在哪里整个网络都是知道的。第二：安全问题：获取MAC地址是通过ARP协议来完成的，如果只用MAC地址通信，那么广播风暴是个难题。4.那么我觉得如果哪天每人一个固定的IPv6地址，那么我觉得MAC地址+IPv4的模式是不是可以被替换了？","like_count":1126,"discussions":[{"author":{"id":1130512,"avatar":"https://static001.geekbang.org/account/avatar/00/11/40/10/b6bf3c3c.jpg","nickname":"纯洁的憎恶","note":"","ucode":"5E9757DE6F45DF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6751,"discussion_content":"精彩！对于最后一个问题，我是这么想的不知道对不对。MAC+IPv4的一个重大意义是将网络地址与硬件设备解耦。这样“虚拟”的IP地址与“实体”的MC地址之间可以建立灵活的对应关系。但如果只有IP地址，即使数量足够使用，是否也会造成硬件设备与网络地址的刚性绑定，从而影响灵活性呢？","likes_number":31,"is_delete":false,"is_hidden":false,"ctime":1567082595,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1124278,"avatar":"https://static001.geekbang.org/account/avatar/00/11/27/b6/e53c17ee.jpg","nickname":"芒果","note":"","ucode":"5AD71E7F9FC738","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1130512,"avatar":"https://static001.geekbang.org/account/avatar/00/11/40/10/b6bf3c3c.jpg","nickname":"纯洁的憎恶","note":"","ucode":"5E9757DE6F45DF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":121789,"discussion_content":"你说的也有道理，如果强绑定的话，可能就像是身份证的效果了。至于是否影响灵活性，那就是仁者见仁智者见智了，哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578323070,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6751,"ip_address":"","group_id":0},"score":121789,"extra":""},{"author":{"id":1030082,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b7/c2/196932c7.jpg","nickname":"南琛一梦","note":"","ucode":"6338D5428DB2B0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1130512,"avatar":"https://static001.geekbang.org/account/avatar/00/11/40/10/b6bf3c3c.jpg","nickname":"纯洁的憎恶","note":"","ucode":"5E9757DE6F45DF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332700,"discussion_content":"这个观点很有价值。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607316979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6751,"ip_address":"","group_id":0},"score":332700,"extra":""}]},{"author":{"id":2314165,"avatar":"https://static001.geekbang.org/account/avatar/00/23/4f/b5/bd6140a5.jpg","nickname":"ARM","note":"","ucode":"788FD0DBD39B94","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":330961,"discussion_content":"为什么有了MAC还要IP？简单解释一下，原因是因为IP是分层的，就像地址一样，中国江苏南京玄武区，这样很简单就能缩小范围，这样查找也简单了，而MAC是不确定你在网络什么位置的。","likes_number":25,"is_delete":false,"is_hidden":false,"ctime":1606740240,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2142126,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/QfNSgehchHicIWA8tXI19JxDqHCMUbXtKZX9HEFIjednbYNV7IhdVJicHdYibsEZy5SrUDut8QGZCkdnn78SDNiblA/132","nickname":"Geek_6621b0","note":"","ucode":"3ABE5EAF2138B2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300555,"discussion_content":"如果没有MAC地址，如何解决别人随便使用你的固定IP地址的情况呢。人可以使用身份证能证明你是唯一的，那是因为每个人都是唯一的，而计算机是量产的。","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1598169339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1124278,"avatar":"https://static001.geekbang.org/account/avatar/00/11/27/b6/e53c17ee.jpg","nickname":"芒果","note":"","ucode":"5AD71E7F9FC738","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2142126,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/QfNSgehchHicIWA8tXI19JxDqHCMUbXtKZX9HEFIjednbYNV7IhdVJicHdYibsEZy5SrUDut8QGZCkdnn78SDNiblA/132","nickname":"Geek_6621b0","note":"","ucode":"3ABE5EAF2138B2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300654,"discussion_content":"确实会有他人随意使用IP的情况，考虑到这种问题，其实我觉得是不是可以增加一个认证层的方式来解决。其实随着虚拟化技术的兴起，虚机的MAC地址也可以手动设置，因此理论上MAC地址也可以重复。这个IPv6替代IPv4+MAC的想法是我2年前的一个不成熟的想法。其实现在再看，如果一切推到重来，没有什么是不可能的，相信办法总比困难多。但是一切已成体系，一切已成规范。除非老技术存在致命缺陷，新技术存在特别大的优势，推翻重来，从经济效益上看就是不允许的。即使不考虑经济问题，老系统能跑能用，改造之后各种问题，且没有带来巨大优势，此事谁来担责，其实面临各种各样的问题。","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1598226086,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":300555,"ip_address":"","group_id":0},"score":300654,"extra":""}]},{"author":{"id":1310826,"avatar":"https://static001.geekbang.org/account/avatar/00/14/00/6a/da96c764.jpg","nickname":"尹希闯","note":"","ucode":"A35F70179808D8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":224717,"discussion_content":"\n我也有个不理解，发送端只知道目的地址IP，不知道对方Mac地址，而且按照文章所说IP地址和Mac是可以不对应的，会重新分配或者改动的，怎么通过目的IP地址准确找到局域网内部的目的Mac地址?","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1586325200,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1966234,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/00/9a/4d76df15.jpg","nickname":"王艺霖","note":"","ucode":"10317D715ED64B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1310826,"avatar":"https://static001.geekbang.org/account/avatar/00/14/00/6a/da96c764.jpg","nickname":"尹希闯","note":"","ucode":"A35F70179808D8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":234967,"discussion_content":"ARP","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587008856,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":224717,"ip_address":"","group_id":0},"score":234967,"extra":""},{"author":{"id":2563728,"avatar":"https://static001.geekbang.org/account/avatar/00/27/1e/90/9dd719b0.jpg","nickname":"光辉岁月","note":"","ucode":"A5B3070175ACED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1310826,"avatar":"https://static001.geekbang.org/account/avatar/00/14/00/6a/da96c764.jpg","nickname":"尹希闯","note":"","ucode":"A35F70179808D8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576846,"discussion_content":"通过ARP协议获取收端的mac，保存其ip和mac到发端的arp表中。此外arp表项是有有效期的，隔一段时间会失效。再次发送就会重新arp查询一次，以应对ip改动。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655811311,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":224717,"ip_address":"","group_id":0},"score":576846,"extra":""}]},{"author":{"id":2451104,"avatar":"https://static001.geekbang.org/account/avatar/00/25/66/a0/cb15d216.jpg","nickname":"辰枫","note":"","ucode":"33C07E6A3A8F8F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350802,"discussion_content":"MAC地址不一定唯一因为我就见过两个不同的设备MAC是一样的，MAC没有路由选择的功能，只能全网广播，网络很大时效率会很低，IP正好解决了这个问题。只用IP是的话无法确定物理设备是哪一个设备经常会出现IP冲突的问题","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1614010213,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1170187,"avatar":"https://static001.geekbang.org/account/avatar/00/11/db/0b/6aa6f653.jpg","nickname":"侯聪","note":"","ucode":"AF64D50054A5BA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290498,"discussion_content":"IPV6替换掉 MAC+IPV4。这样的话数据帧的封装也得改了 去掉MAC层","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1594515676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1119593,"avatar":"https://static001.geekbang.org/account/avatar/00/11/15/69/187b9968.jpg","nickname":"南山","note":"","ucode":"94656FE4A6C378","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":27653,"discussion_content":"完美啊","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1570673591,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1705788,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/07/3c/b4c5897b.jpg","nickname":"😊","note":"","ucode":"CA31516547B07C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":408300,"discussion_content":"IPV6取代IP+MAC的形式这种说法真的很有意思啊，这样子的话目前网络中的许多协议都需要做很大的改进了，比如不再需要路由器分配地址，那如何保证各个处在不同网段的ipv6地址可以使用同一个路由器进行通信，这一定很有趣。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635219354,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1736523,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/7f/4b/b0afc0ae.jpg","nickname":"青蛙军曹ψ","note":"","ucode":"F7D6CA78203472","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":402722,"discussion_content":"Mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633938950,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1439411,"avatar":"https://static001.geekbang.org/account/avatar/00/15/f6/b3/ef21d77e.jpg","nickname":"Austin","note":"","ucode":"5D7A0D0642830D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380311,"discussion_content":"非常好。看了很多博客 和你的结论类似。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624434394,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2397608,"avatar":"https://static001.geekbang.org/account/avatar/00/24/95/a8/5f327596.jpg","nickname":"方圆","note":"","ucode":"A23EEF00FC46E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369603,"discussion_content":"这个解释帮我弄明白了谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619091792,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1923927,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/5b/57/4a16a27f.jpg","nickname":"骈","note":"","ucode":"2F76FA30770A83","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":273713,"discussion_content":"万物互联的时代，每个人都有非常多的上网设备，一个固定的ipv6不够吧 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590492081,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1519371,"avatar":"https://static001.geekbang.org/account/avatar/00/17/2f/0b/53b25803.jpg","nickname":"徐方豪","note":"","ucode":"0B2065B9D42078","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1923927,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/5b/57/4a16a27f.jpg","nickname":"骈","note":"","ucode":"2F76FA30770A83","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281684,"discussion_content":"每一粒灰尘一个ip都够用","likes_number":17,"is_delete":false,"is_hidden":false,"ctime":1591792913,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":273713,"ip_address":"","group_id":0},"score":281684,"extra":""}]},{"author":{"id":1696883,"avatar":"https://static001.geekbang.org/account/avatar/00/19/e4/73/74dce191.jpg","nickname":"鼠里鼠气","note":"","ucode":"4793476BBDB202","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":270759,"discussion_content":"厉害  我有一个问题  &#34;Mac地址不能确定用户在整个互联网中的位置，那为什么能在局域网中通信呐？&#34;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590048638,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1124278,"avatar":"https://static001.geekbang.org/account/avatar/00/11/27/b6/e53c17ee.jpg","nickname":"芒果","note":"","ucode":"5AD71E7F9FC738","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1696883,"avatar":"https://static001.geekbang.org/account/avatar/00/19/e4/73/74dce191.jpg","nickname":"鼠里鼠气","note":"","ucode":"4793476BBDB202","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":271448,"discussion_content":"局域网中会通过广播的方式，寻找目标mac地址的机器","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1590139827,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":270759,"ip_address":"","group_id":0},"score":271448,"extra":""},{"author":{"id":1075954,"avatar":"https://static001.geekbang.org/account/avatar/00/10/6a/f2/8829a0b8.jpg","nickname":"@二十一大叔","note":"","ucode":"394A7E80C5034C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1696883,"avatar":"https://static001.geekbang.org/account/avatar/00/19/e4/73/74dce191.jpg","nickname":"鼠里鼠气","note":"","ucode":"4793476BBDB202","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288438,"discussion_content":"应该是mac通过物理链路层的协议吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593750201,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":270759,"ip_address":"","group_id":0},"score":288438,"extra":""}]},{"author":{"id":1643435,"avatar":"https://static001.geekbang.org/account/avatar/00/19/13/ab/d73e25de.jpg","nickname":"Geek_wannaBgeek","note":"","ucode":"6F42F4181981C3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216555,"discussion_content":"很涨知识！\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585463918,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1251224,"avatar":"https://static001.geekbang.org/account/avatar/00/13/17/98/5386341d.jpg","nickname":"Coder","note":"","ucode":"70A8F12B864E4D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":200667,"discussion_content":"IP配合子网掩码可以区分网段，广播只在本网段进行。“那么我觉得如果哪天每人一个固定的IPv6地址，那么我觉得MAC地址+IPv4的模式是不是可以被替换了？” 感觉不能被替换啊，那路由表是不是太长了。。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583712050,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1257546,"avatar":"https://static001.geekbang.org/account/avatar/00/13/30/4a/8be4b8d3.jpg","nickname":"Gospel","note":"","ucode":"C399412DF3FFE1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":164238,"discussion_content":"厉害啊，长见识了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581164591,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1693116,"avatar":"https://static001.geekbang.org/account/avatar/00/19/d5/bc/23e0c5de.jpg","nickname":"陈启明","note":"","ucode":"9B7DA0226DBA10","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":146142,"discussion_content":"还有一点，基于MAC对网络分发layer 2路由器价格较低，所以在局域网很多还是会选择价格便宜的基于MAC的路由器","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579599757,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1504234,"avatar":"https://static001.geekbang.org/account/avatar/00/16/f3/ea/2b2adda5.jpg","nickname":"EncodedStar","note":"","ucode":"03958CA7DDD6AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":133691,"discussion_content":"强绑定必定会达到极限，还是别强绑定了，灵活。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578980782,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1802300,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/80/3c/f30a455d.jpg","nickname":"jack zhou","note":"","ucode":"6EF3F06A4E03F5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":121327,"discussion_content":"这里ipv6就不会导致类似mac地址方风暴之类的东西吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578317258,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1124278,"avatar":"https://static001.geekbang.org/account/avatar/00/11/27/b6/e53c17ee.jpg","nickname":"芒果","note":"","ucode":"5AD71E7F9FC738","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1802300,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/80/3c/f30a455d.jpg","nickname":"jack zhou","note":"","ucode":"6EF3F06A4E03F5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":121747,"discussion_content":"2层通信使用广播的方式，如果广播域过大，或者本身存在环路，就会产生广播风暴。和ipv4还是ipv6关系不大。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1578322637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":121327,"ip_address":"","group_id":0},"score":121747,"extra":""}]},{"author":{"id":1005368,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/38/ba6a106f.jpg","nickname":"Phoenix","note":"","ucode":"C51BE4C948755B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":53444,"discussion_content":"说的很精彩啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574169136,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9768,"user_name":"kid1412z","can_delete":false,"product_type":"c1","uid":1123310,"ip_address":"","ucode":"00652FFE1B1103","user_header":"https://static001.geekbang.org/account/avatar/00/11/23/ee/9a45407e.jpg","comment_is_top":false,"comment_ctime":1527079607,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":10,"product_id":100007101,"comment_content":"mac好比人的身份id，ip好比他的住址，住址可以变，人的身份🆔不会变。","like_count":297,"discussions":[{"author":{"id":1618275,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b1/63/68239c70.jpg","nickname":"Paradise","note":"","ucode":"9CA103A82F5F38","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547658,"discussion_content":"是说我们公司的网络必须配置计算机的mac地址，才可以给我们开通网络，限制必须用公司的电脑，所以不管我们怎么换电脑，在公司也删不了网，因为mac地址是固定的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642782108,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9034,"user_name":"执笔书生","can_delete":false,"product_type":"c1","uid":1134610,"ip_address":"","ucode":"9B9AEC4866826E","user_header":"https://static001.geekbang.org/account/avatar/00/11/50/12/e81db565.jpg","comment_is_top":false,"comment_ctime":1526600870,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":11,"product_id":100007101,"comment_content":"因为mac地址是全世界唯一的，不会找错人！而ip地址会是发生改变的！有可能现在ip地址A是这里的地址！在下一刻就是B的地址了！\n综上所述：所以要有mac地址！","like_count":104,"discussions":[{"author":{"id":2760246,"avatar":"","nickname":"Geek_74dea9","note":"","ucode":"14092EEBC08171","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":402061,"discussion_content":"通过ip找，这个ip肯定是当前ip，ip一旦变化， 找的时候， 就会按照新的ip找。ip变化跟要用mac没有必然关系吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633789300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1439411,"avatar":"https://static001.geekbang.org/account/avatar/00/15/f6/b3/ef21d77e.jpg","nickname":"Austin","note":"","ucode":"5D7A0D0642830D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380312,"discussion_content":"mac是可以伪造的，不过应该不在考虑的范围内","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624434477,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":11307,"user_name":"小田","can_delete":false,"product_type":"c1","uid":1073342,"ip_address":"","ucode":"59CA02059F71E4","user_header":"https://static001.geekbang.org/account/avatar/00/10/60/be/68ce2fd0.jpg","comment_is_top":false,"comment_ctime":1528042186,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":11,"product_id":100007101,"comment_content":"摘要\n# 协议三要素\n语法、语义、顺序\n# 网络数据包结构\nMac头 Ip头 Tcp头 Http头 数据体\n# 网络五层模型\n1. 物理层：连接\n2. 链路层：定位\n3. 传输层：路由\n4. 会话层：会话连接机制\n5. 应用层：数据封装格式","like_count":71,"discussions":[{"author":{"id":1698595,"avatar":"https://static001.geekbang.org/account/avatar/00/19/eb/23/a38bd3ef.jpg","nickname":"罗文杰","note":"","ucode":"48CA8B6437957B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":119932,"discussion_content":"网络层呢","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1578238613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9175,"user_name":"初学者","can_delete":false,"product_type":"c1","uid":1042833,"ip_address":"","ucode":"9471A905D07CE1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e9/91/4219d305.jpg","comment_is_top":false,"comment_ctime":1526652719,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":11,"product_id":100007101,"comment_content":"看到这篇文章，让我想起了一本书：网络是怎样连接的。我看到有小伙伴问推荐的书籍，可惜我无法直接在这里回复它","like_count":71,"discussions":[{"author":{"id":1134895,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/2f/7b04140c.jpg","nickname":"孫やさん","note":"","ucode":"C60877C1C71685","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":408021,"discussion_content":"你的一个评论，让我花了好几十块钱 😄","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1635167728,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1107484,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e6/1c/9d3744ee.jpg","nickname":"程序员俊达","note":"","ucode":"2573037D7C82C8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":32562,"discussion_content":"现在终于有评论的功能了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571047411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9117,"user_name":"Rimin","can_delete":false,"product_type":"c1","uid":1131881,"ip_address":"","ucode":"6293512B5B2AC1","user_header":"https://static001.geekbang.org/account/avatar/00/11/45/69/3c21acef.jpg","comment_is_top":false,"comment_ctime":1526614283,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100007101,"comment_content":"    假如有MAC地址没有ip地址可以吗？答案是不行，因为全世界存在各种网络，它们使用不同硬件地址。要使这些网络能互相通信就必须进行非常复杂的硬件地址转换工作。但可以用抽象的ip地址把这个问题解决。\n      那么假如没有MAC地址而只有ip呢？同样不行，ip地址只是一种抽象的逻辑地址用于标记唯一性，而传输的数据是要从网络层到数据链路层或由数据链路层到网络层的，ip数据报并不能和下层硬件“沟通”，所以还要被封装MAC帧。即将IP地址解析为链路层所需硬件地址。\n   目前是这么理解的，欢迎交流指正。","like_count":48},{"had_liked":false,"id":9177,"user_name":"zwfec","can_delete":false,"product_type":"c1","uid":1110611,"ip_address":"","ucode":"6BDE8813580E24","user_header":"https://static001.geekbang.org/account/avatar/00/10/f2/53/2af50978.jpg","comment_is_top":false,"comment_ctime":1526653087,"is_pvip":false,"replies":null,"discussion_count":9,"race_medal":0,"score":11,"product_id":100007101,"comment_content":"很多人都说mac地址是唯一的，不变的，网络老师也这么说，\n1. 但记得大学时为了能上网，在windows XP下自己改了mac地铁就可以了， 可能只是操作系统级别的修改，但理解起来好矛盾\n2. 如果是全球唯一的，那么意思是这些网卡厂商都要维护自己的mac列表？以保证和其它厂商绝对不重复，有这样的机构吗\n\n真是困惑，自己猜想mac唯一应该也只是保证局域网内保证唯一吧","like_count":45,"discussions":[{"author":{"id":1362815,"avatar":"https://static001.geekbang.org/account/avatar/00/14/cb/7f/76f6d8a1.jpg","nickname":"牵着怪兽的手","note":"","ucode":"4C8D33017AE82C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":24197,"discussion_content":"mac地址12位，前6位可以唯一确定网卡生产厂商，所以只要保证同一家设备商生产的网卡都是唯一的就能保证全球唯一了\n","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1570029742,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1001410,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/c2/e9fa4cf6.jpg","nickname":"Charles","note":"","ucode":"32646D78CC0389","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1362815,"avatar":"https://static001.geekbang.org/account/avatar/00/14/cb/7f/76f6d8a1.jpg","nickname":"牵着怪兽的手","note":"","ucode":"4C8D33017AE82C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":37571,"discussion_content":"生产商出了bug导致同一家设备商生产的网卡不是唯一了 会咋样？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571638542,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":24197,"ip_address":"","group_id":0},"score":37571,"extra":""},{"author":{"id":1362815,"avatar":"https://static001.geekbang.org/account/avatar/00/14/cb/7f/76f6d8a1.jpg","nickname":"牵着怪兽的手","note":"","ucode":"4C8D33017AE82C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1001410,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/c2/e9fa4cf6.jpg","nickname":"Charles","note":"","ucode":"32646D78CC0389","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38435,"discussion_content":"出错概率很低，即使真的出错了，在同一局域网的概率也很低，如果说有两个Mac地址一致的设备存在于同一个局域网中，具体会发生什么我也不确定","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1571789803,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":37571,"ip_address":"","group_id":0},"score":38435,"extra":""},{"author":{"id":1812627,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a8/93/ce0e092f.jpg","nickname":"Kakashi","note":"","ucode":"65ACC0CF12D674","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1362815,"avatar":"https://static001.geekbang.org/account/avatar/00/14/cb/7f/76f6d8a1.jpg","nickname":"牵着怪兽的手","note":"","ucode":"4C8D33017AE82C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":140165,"discussion_content":"严格的说是48位（不是12位），6字节，通常表示为12个16进制数字","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1579350057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":24197,"ip_address":"","group_id":0},"score":140165,"extra":""}]},{"author":{"id":2142126,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/QfNSgehchHicIWA8tXI19JxDqHCMUbXtKZX9HEFIjednbYNV7IhdVJicHdYibsEZy5SrUDut8QGZCkdnn78SDNiblA/132","nickname":"Geek_6621b0","note":"","ucode":"3ABE5EAF2138B2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300556,"discussion_content":"哈哈， MAC地址确实是唯一的（网卡上），但是你确实可以随便更改，只要不在同一个网络中重复就行，在网络传输中源、目的IP地址是不变的，而MAC地址是随时都在变化的。","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1598169555,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1759325,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d8/5d/07dfb3b5.jpg","nickname":"杯莫停","note":"","ucode":"4FA1D5CBBEF702","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":363356,"discussion_content":"如果不是唯一的那你局域网内部也可能不唯一啊，如果可以动态修改，那要mac地址作甚？IP地址不就可以吗？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1617177568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1791274,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/55/2a/1ef26397.jpg","nickname":"FunnyCoder","note":"","ucode":"9ACD895546F15C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":263026,"discussion_content":"和你一样的问题，上学时我也改过MAC","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589164344,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1622953,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/EIxfye0noElD6CgfvHgByRN9ics8hGENNBRuibSmXqeMNakF0BpN8RWpXUWcd8v2Wp8N7bqd9mDia5n8PH2qeUySA/132","nickname":"云龙","note":"","ucode":"FE3DF5E0530D86","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6870,"discussion_content":"mark，我也想知道","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567150412,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9089,"user_name":"橙子","can_delete":false,"product_type":"c1","uid":1020744,"ip_address":"","ucode":"E833462689CF7A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/93/48/79518a01.jpg","comment_is_top":false,"comment_ctime":1526606961,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100007101,"comment_content":"没有MAC地址，靠IP也是可以做MAC地址的事情，但是由于分层，IP负责网络层传输，MAC负责链路层传输，IP和MAC通过ARP协议映射，比如任何人沟通，可以通过电话，短信，微信，或者邮件，但是不同场合用的工具不一样","like_count":40},{"had_liked":false,"id":9154,"user_name":"lujg","can_delete":false,"product_type":"c1","uid":1054963,"ip_address":"","ucode":"6CCCD89A29B06D","user_header":"https://static001.geekbang.org/account/avatar/00/10/18/f3/cd07e64c.jpg","comment_is_top":false,"comment_ctime":1526645892,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100007101,"comment_content":"在公网中通信只能用公网ip，而对于公网ip是按照区域分配的，路由器是可以知道目标ip的大范围的区域，然后从大区域慢慢向小区域传送的。可以类比我们去某地的一个过程，比如你从北京到深圳某公司，你需要先去飞机场，然后坐飞机去深圳，再通过市内交通到达目的地。\n而对于Mac地址，这是标识机器的一个地址，在出厂时就确定的，但是单mac所在的区域不是固定的，而是会移动的。即你从北京到深圳后，你的IP是会变的，但mac是不会变的。所以是无法通过mac地址寻找到你所在位置的。\n理论上是可以通过一个大查找表知道每一个mac所在的位置，然后通过查表知道你所在的位置然后根据mac做一个转发，但是查找的代价是很高的。\n其实手机通过数据上网就是一个通过类似mac寻址的一个网络。在移动网络中是允许你移动的，这是由于基站会记录你的位置信息。并且核心网与公网的通信是通过ip来实现的，而在手机和基站间的通信是通过类似mac的一个唯一码实现的。并且移动网络整体建设成本比互联网的成本高很多，消费也高很多。","like_count":24},{"had_liked":false,"id":19678,"user_name":"clean","can_delete":false,"product_type":"c1","uid":1203613,"ip_address":"","ucode":"30F9783EC5B147","user_header":"https://static001.geekbang.org/account/avatar/00/12/5d/9d/b6e7d961.jpg","comment_is_top":false,"comment_ctime":1533961270,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100007101,"comment_content":"先有mac 后有ip，以前的网络并没有统一，很多地方有自己的网络结构，导致资源互联很难。ip是统一异构网络的。ip是全球范围内的，mac是一跳范围内的。如果真的只用mac来寻址，维护mac的成本很高，而且如果在路由表中记录mac 很容易出现广播风暴 网络就瘫痪了。所以设计者考虑了很多才在mac层上面加一层IP 这样能更好的解决网络异构问题 和 传输效率问题。","like_count":23},{"had_liked":false,"id":9040,"user_name":"hansc","can_delete":false,"product_type":"c1","uid":1052326,"ip_address":"","ucode":"8AC4606D1F48CB","user_header":"https://static001.geekbang.org/account/avatar/00/10/0e/a6/33b33f82.jpg","comment_is_top":false,"comment_ctime":1526602544,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":11,"product_id":100007101,"comment_content":"对于服务器来说，源地址一般是路由器的外网地址，内网机器没有外网地址，目标地址会把报文发给路由器，路由器根据mac地址，在arp缓存找到内网地址。","like_count":19,"discussions":[{"author":{"id":1015754,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7f/ca/ea85bfdd.jpg","nickname":"helloworld","note":"","ucode":"00DF2FEC58D2E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304305,"discussion_content":"？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599542552,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":151517,"user_name":"容若","can_delete":false,"product_type":"c1","uid":1312644,"ip_address":"","ucode":"902863F0B1B921","user_header":"","comment_is_top":false,"comment_ctime":1573734472,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100007101,"comment_content":"作者：知乎用户\n链接：https:&#47;&#47;www.zhihu.com&#47;question&#47;21546408&#47;answer&#47;28155896\n来源：知乎\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n\n一. 整体与局部信息传递时候，需要知道的其实是两个地址：终点地址（Final destination address）下一跳的地址（Next hop address）IP地址本质上是终点地址，它在跳过路由器（hop）的时候不会改变，而MAC地址则是下一跳的地址，每跳过一次路由器都会改变。这就是为什么还要用MAC地址的原因之一，它起到了记录下一跳的信息的作用。注：一般来说IP地址经过路由器是不变的，不过NAT（Network address translation）例外，这也是有些人反对NAT而支持IPV6的原因之一。二. 分层实现如果在IP包头（header）中增加了”下一跳IP地址“这个字段，在逻辑上来说，如果IP地址够用，交换机也支持根据IP地址转发（现在的二层交换机不支持这样做），其实MAC地址并不是必要的。但用MAC地址和IP地址两个地址，用于分别表示物理地址和逻辑地址是有好处的。这样分层可以使网络层与链路层的协议更灵活地替换，网络层不一定非要用『IP』协议，链路层也不一定非用『以太网』协议。这就像OSI七层模型，TCP&#47;IP五层模型其实也不是必要的，用双层模型甚至单层模型实现网络也不是不可以的，只是那样做很蛋疼罢了。三. 早期的『以太网』实现早期的以太网只有集线器（hub），没有交换机（switch），所以发出去的包能被以太网内的所有机器监听到，因此要附带上MAC地址，每个机器只需要接受与自己MAC地址相匹配的包。","like_count":17},{"had_liked":false,"id":9297,"user_name":"行者","can_delete":false,"product_type":"c1","uid":1063734,"ip_address":"","ucode":"EA31201A7C5AE1","user_header":"https://static001.geekbang.org/account/avatar/00/10/3b/36/2d61e080.jpg","comment_is_top":false,"comment_ctime":1526740636,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":12,"product_id":100007101,"comment_content":"写的真好。\n另外老师是不是订阅了薛兆丰老师的经济课，一只铅笔的故事。^ _ ^","like_count":17,"discussions":[{"author":{"id":1179622,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ff/e6/4b0ddfcf.jpg","nickname":"李飞","note":"","ucode":"4B23FF72AA4BA0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386524,"discussion_content":"还是可以的，非常不错","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627627913,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2525070,"avatar":"https://static001.geekbang.org/account/avatar/00/26/87/8e/a718fba8.jpg","nickname":"诸葛","note":"","ucode":"6046438D842533","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383579,"discussion_content":"同为薛兆丰的经济学粉丝","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626166819,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9100,"user_name":"蔡波","can_delete":false,"product_type":"c1","uid":1131827,"ip_address":"","ucode":"53907722DF36D6","user_header":"https://static001.geekbang.org/account/avatar/00/11/45/33/59a7be1e.jpg","comment_is_top":false,"comment_ctime":1526608629,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":12,"product_id":100007101,"comment_content":"IP是负责三层通信通过查找路由表，层层传递，最终到达目的设备，Mac负责二层通信，设备上的ARP表是IP和Mac的对应关系，通过ARP表找到目的IP的Mac地址。","like_count":12},{"had_liked":false,"id":9053,"user_name":"石头","can_delete":false,"product_type":"c1","uid":1134244,"ip_address":"","ucode":"7309B2C8291E54","user_header":"https://static001.geekbang.org/account/avatar/00/11/4e/a4/29b6a598.jpg","comment_is_top":false,"comment_ctime":1526603888,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":12,"product_id":100007101,"comment_content":"刘师，你好，请问有什么通俗易懂的教材可以推荐下吗？","like_count":12,"discussions":[{"author":{"id":1665471,"avatar":"https://static001.geekbang.org/account/avatar/00/19/69/bf/58f70a2a.jpg","nickname":"程序员花卷","note":"","ucode":"DDCFE578C6C428","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385184,"discussion_content":"网络是怎样连接的 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626935734,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9292,"user_name":"徐良红","can_delete":false,"product_type":"c1","uid":1131408,"ip_address":"","ucode":"830C7007B104BC","user_header":"https://static001.geekbang.org/account/avatar/00/11/43/90/167a13fa.jpg","comment_is_top":false,"comment_ctime":1526734869,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":12,"product_id":100007101,"comment_content":"关于老师最后的问题，我觉得是这样：ip报文端到端的传输过程中，目的地址和源地址是不变的，但是每通过一个网关，源mac和目的mac一直在变。两个王国之间的网关要通过mac互相传递报文。","like_count":11},{"had_liked":false,"id":9219,"user_name":"moring~","can_delete":false,"product_type":"c1","uid":1049094,"ip_address":"","ucode":"B1198A34FB9C5D","user_header":"https://static001.geekbang.org/account/avatar/00/10/02/06/3b5a9836.jpg","comment_is_top":false,"comment_ctime":1526695010,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":12,"product_id":100007101,"comment_content":"求解释下名词，比如说，网关","like_count":9,"discussions":[{"author":{"id":1079811,"avatar":"https://static001.geekbang.org/account/avatar/00/10/7a/03/c9b43b21.jpg","nickname":"BewhY","note":"","ucode":"4BC26D47A79967","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":15034,"discussion_content":"自己百度啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568797851,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9224,"user_name":"零下一度","can_delete":false,"product_type":"c1","uid":1132293,"ip_address":"","ucode":"4C53233C020BBF","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/05/18891fe2.jpg","comment_is_top":false,"comment_ctime":1526696667,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":12,"product_id":100007101,"comment_content":"2层的传输是通过MAC地址来标识","like_count":8},{"had_liked":false,"id":9044,"user_name":"linxs","can_delete":false,"product_type":"c1","uid":1006728,"ip_address":"","ucode":"0D860DF26FD150","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5c/88/222d946e.jpg","comment_is_top":false,"comment_ctime":1526603215,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":12,"product_id":100007101,"comment_content":"我个人肤浅的理解，信息在传递过程中，需要终点地址和下一跳的地址。终点地址是目的IP地址，下一跳的地址是Mac地址。在跳到下一级地址的时候，IP地址不会变，Mac地址会变。Mac地址是记录下一跳地址的信息","like_count":8},{"had_liked":false,"id":28567,"user_name":"爱新觉罗老流氓","can_delete":false,"product_type":"c1","uid":1005661,"ip_address":"","ucode":"B13AC4DA358C15","user_header":"https://static001.geekbang.org/account/avatar/00/0f/58/5d/8de7f8dc.jpg","comment_is_top":false,"comment_ctime":1538103155,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":12,"product_id":100007101,"comment_content":"评论区 陶家顺 的留言已经说明了MAC和IP各自的特点。\n\n要回答这一节的每课一练，我总结如下：\n出门找用IP协议，在（国）家里找要用MAC协议。所以每一跳到达后（到达一个网关），要发一次ARP查找目标MAC，找到之后就不需要再发IP包了。","like_count":7},{"had_liked":false,"id":274189,"user_name":"h","can_delete":false,"product_type":"c1","uid":2223369,"ip_address":"","ucode":"1FDCAE05FFD98C","user_header":"https://static001.geekbang.org/account/avatar/00/21/ed/09/5e74d712.jpg","comment_is_top":false,"comment_ctime":1610896248,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":12,"product_id":100007101,"comment_content":"看了大家的回复还是很迷惑，都已经通过ip地址去找到了mac那么就说明这个ip地址和mac是一一对应的关系，为什么ip还不能确定主机？真不是很清楚为什么有了ip还需要mac。大家都在说因为ip会变？这个和ip唯不唯一有关系吗？请大佬们解惑。","like_count":6},{"had_liked":false,"id":9479,"user_name":"千年孤独","can_delete":false,"product_type":"c1","uid":1037215,"ip_address":"","ucode":"282CA1A68E8774","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d3/9f/36ea3be4.jpg","comment_is_top":false,"comment_ctime":1526901564,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":12,"product_id":100007101,"comment_content":"“城关与城关之间是一个国家，当网络包知道了下一步去哪个城关，还是要使用国家内部的 MAC 地址，通过下一个城关的 MAC 地址”这话不是很理解，为何城与城之间一定要存在着国家呢？还望老师解惑","like_count":6},{"had_liked":false,"id":9064,"user_name":"赤脚小子","can_delete":false,"product_type":"c1","uid":1069213,"ip_address":"","ucode":"9F55F0E707F9A7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIvMlvSXsYgJibIyDO78gPacZR1qukEOJrpfHAJmyGVtWPO3XMqVA9dImHhGJm2icp6lDuBw1GrNDbA/132","comment_is_top":false,"comment_ctime":1526604560,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":13,"product_id":100007101,"comment_content":"写的太棒了！我看过几本网易的书都很不错，很多网易人写的文章质量也很高，所以没有任何犹豫的就买了这个课，这一章就让我感受到了花的太值了。","like_count":6,"discussions":[{"author":{"id":1006424,"avatar":"","nickname":"Geek_xbye50","note":"","ucode":"0BF3780C247F22","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578152,"discussion_content":"推荐下看下😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656547242,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9061,"user_name":"亮点","can_delete":false,"product_type":"c1","uid":1073596,"ip_address":"","ucode":"1B8AE07484C69A","user_header":"https://static001.geekbang.org/account/avatar/00/10/61/bc/88a905a5.jpg","comment_is_top":false,"comment_ctime":1526604510,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100007101,"comment_content":"回答一下老师的最后一个问题，城管收到的包中的目标MAC地址是自己，需要根据目标IP地址，通过网络层的协议查询下一跳路由IP地址，根据查询到的IP地址再通过ARP协议查询对应的MAC地址，封装完成后才可以交付成功","like_count":6},{"had_liked":false,"id":232492,"user_name":"Geek_wadehao","can_delete":false,"product_type":"c1","uid":1918225,"ip_address":"","ucode":"F46FFAFC4933D6","user_header":"https://static001.geekbang.org/account/avatar/00/1d/45/11/51aaa953.jpg","comment_is_top":false,"comment_ctime":1594018520,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100007101,"comment_content":"我来试着从另一个角度说说mac地址和ip地址的区别。大家都知道mac地址工作在第二层，ip地址工作在第三层。但第二层和第三层到底有啥区别？一个重要区别就是第二层的协议是多样化的，而第三层的协议（对互联网而言）只有ip协议。这是啥意思呢？就是第二层是异构的，可以是以太网，也可以是wifi，还可以是移动通信网（4G），甚至是广域网协议ppp；这里面只有以太网和无线局域网（wifi）有mac地址，而4G和ppp都没有mac地址，只有ip地址，所以必须有一个通用的第三层协议覆盖在异构的第二层协议之上，才能打通各个第二层协议，使它们互联互通。这也是为什么在局域网内（一般就是以太网）可以直接用mac地址通信，而跨局域网（比如跨路由器连接到手机4G）就必须用IP地址通信了。当然“异构的二层”是必须用ip地址而不能仅仅用mac地址的一个原因。另一种情况是在同构的第二层协议下（比如二层都是以太网），只要这些同构的以太网设备跨过了路由器，就必须用ip地址通信，而不能仅仅通过mac地址通信。这是因为路由器把这些设备划分到了不同的子网subnet之中，即因为路由器是第三层网络互联设备，它（作为信息包通信的把持关口的设备）通信时必查信息包的ip地址，只告诉它mac地址，它是不让信息包通过的。为什么要查ip地址呢？因为ip地址中有子网号，这是区分不同subnet的唯一标志。而mac地址没有子网号。","like_count":5},{"had_liked":false,"id":9092,"user_name":"zwfec","can_delete":false,"product_type":"c1","uid":1110611,"ip_address":"","ucode":"6BDE8813580E24","user_header":"https://static001.geekbang.org/account/avatar/00/10/f2/53/2af50978.jpg","comment_is_top":false,"comment_ctime":1526607718,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":13,"product_id":100007101,"comment_content":"如果过一段时间还是没到，发送端的 TCP 层会重新发送这个包，还是上面的过程，直到有一天收到平安到达的回复。\n\n重复了的话会怎么处理呢","like_count":5,"discussions":[{"author":{"id":2913864,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/MYShyjtRtib2GIQiaK4hV3ZP9pQ1qiaS74DA4K4YHY4SIiaFDfsCKgiaMWwm9zFsSn3bt5pawp5Kdn5MWgiaw5909nug/132","nickname":"Geek_aa1c31","note":"","ucode":"1AC14C053638AF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557476,"discussion_content":"接收方发现包是重复的话应该是会直接丢弃","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647831876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9047,"user_name":"大光头","can_delete":false,"product_type":"c1","uid":1041792,"ip_address":"","ucode":"8EF797AFD1E27C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo3DrWeV7ZwRLXrRZg4V3ic1LQYdZ3u1oicDhqPic47vMguvf5QS69roTiaJrwDr5Re3Sy2UyHDWwmsTA/132","comment_is_top":false,"comment_ctime":1526603482,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100007101,"comment_content":"目标IP是不能更换，它代表你的目的地址在网络协议。而下一站传输是通过第二层mac层实现的，这层只能通过mac地址进行通信","like_count":5},{"had_liked":false,"id":9491,"user_name":"ls","can_delete":false,"product_type":"c1","uid":1007293,"ip_address":"","ucode":"6C14A1D24DDC2E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5e/bd/e28f8ce5.jpg","comment_is_top":false,"comment_ctime":1526909200,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100007101,"comment_content":"学生之间不能回复留言交流。希望老师能多回复下留言，很多精选出来的留言也不知道正确与否。","like_count":4},{"had_liked":false,"id":9390,"user_name":"Luna","can_delete":false,"product_type":"c1","uid":1002508,"ip_address":"","ucode":"481AE77CA0D239","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4c/0c/32ec9763.jpg","comment_is_top":false,"comment_ctime":1526860137,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100007101,"comment_content":"个人愚见：首先IP地址大部分都是变化的，而MAC地址都是每个网卡固定的，通过MAC地址来标识在网络上的机器（类似于我们的身份证），而IP地址就像你现在租住的地方。","like_count":4},{"had_liked":false,"id":9227,"user_name":"ben001","can_delete":false,"product_type":"c1","uid":1014338,"ip_address":"","ucode":"2BD6C466F6BD27","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7a/42/e6477279.jpg","comment_is_top":false,"comment_ctime":1526698070,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100007101,"comment_content":"厉害了，就喜欢作者自己读","like_count":4},{"had_liked":false,"id":9105,"user_name":"C1zel","can_delete":false,"product_type":"c1","uid":1067306,"ip_address":"","ucode":"59DC7D48537FE3","user_header":"https://static001.geekbang.org/account/avatar/00/10/49/2a/83fe5388.jpg","comment_is_top":false,"comment_ctime":1526609364,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100007101,"comment_content":"mac与ip地址绑定，通过arp协议找到真正的机器","like_count":4},{"had_liked":false,"id":9172,"user_name":"卫江","can_delete":false,"product_type":"c1","uid":1101226,"ip_address":"","ucode":"DE2F7A6916F1A9","user_header":"https://static001.geekbang.org/account/avatar/00/10/cd/aa/33d48789.jpg","comment_is_top":false,"comment_ctime":1526652094,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100007101,"comment_content":"ip地址用于确认城关的地址，因为这个是对外的，是开放公开的，但是mac是本地的，相当于城关内部，所以，进去城关之后，需要mac来确认最终的地址","like_count":3},{"had_liked":false,"id":9109,"user_name":"铁丑-王立丰","can_delete":false,"product_type":"c1","uid":1021228,"ip_address":"","ucode":"F0CFDA492F164A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/95/2c/f254f684.jpg","comment_is_top":false,"comment_ctime":1526609922,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100007101,"comment_content":"讲解的非常精彩，正好这些年对网络的学习做个梳理","like_count":3},{"had_liked":false,"id":9059,"user_name":"极客时间用户","can_delete":false,"product_type":"c1","uid":1005947,"ip_address":"","ucode":"659061785DCF4C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/59/7b/ebe8451e.jpg","comment_is_top":false,"comment_ctime":1526604407,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100007101,"comment_content":"看完了，还是不理解，很多专有名词缩写，没有全名，全民有助于理解，建议老师再讲得细一点。假设自己的电脑要通过浏览器打开网页，这样我们有三个东西，电脑「硬件」，操作系统「Windows，Mac」，浏览器，输入网址之后，点击，然后页面就在浏览器里展现了。这样的流程是怎么样的，有哪些硬件，有哪些软件，有哪些协议等等","like_count":3},{"had_liked":false,"id":9039,"user_name":"Christophe","can_delete":false,"product_type":"c1","uid":1066344,"ip_address":"","ucode":"A6E88DB17FD755","user_header":"https://static001.geekbang.org/account/avatar/00/10/45/68/d918758d.jpg","comment_is_top":false,"comment_ctime":1526602526,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100007101,"comment_content":"老师自己读的还是听着更舒服些。不过app还有许多要改进的地方，比如加载速度很慢，音频也经常加载不出来，听着听着就断了，希望能快点改进。","like_count":3},{"had_liked":false,"id":274162,"user_name":"hpu","can_delete":false,"product_type":"c1","uid":2405347,"ip_address":"","ucode":"93D9690709DF36","user_header":"https://static001.geekbang.org/account/avatar/00/24/b3/e3/c6ab74c8.jpg","comment_is_top":false,"comment_ctime":1610878040,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100007101,"comment_content":"当网络包到达一个城关的时候，可以通过路由表得到下一个城关的 IP 地址，直接通过 IP 地址找就可以了，为什么还要通过本地的 MAC 地址呢？\n我觉得：把IP地址比作门牌号，那MAC地址就像定位坐标，如经度纬度。","like_count":2},{"had_liked":false,"id":236491,"user_name":"白开水","can_delete":false,"product_type":"c1","uid":1955459,"ip_address":"","ucode":"2E05353E8D9317","user_header":"https://static001.geekbang.org/account/avatar/00/1d/d6/83/bd4a8410.jpg","comment_is_top":false,"comment_ctime":1595427960,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":14,"product_id":100007101,"comment_content":"我竟然看不懂老师的问题，看了小伙伴的解答才明白一点点。 IP是locate，MAC是identity","like_count":2,"discussions":[{"author":{"id":1710046,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/17/de/36000c5a.jpg","nickname":"Louis","note":"","ucode":"9A8A67FE6A1BF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369159,"discussion_content":"高手的理解总是简洁啊，一针见血，哈哈哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618963533,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":68430,"user_name":"ZERO To One","can_delete":false,"product_type":"c1","uid":1373600,"ip_address":"","ucode":"A520B987D17023","user_header":"https://static001.geekbang.org/account/avatar/00/14/f5/a0/96ee2d50.jpg","comment_is_top":false,"comment_ctime":1550499304,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100007101,"comment_content":"芒果的留言笔记：个人发表一下对这个问题的看法，抛砖引玉，希望老师指正：1.局域网内IP地址是动态分配的，假如我是192.168.2.100，如果我下线了，可能IP就分配给了另一台电脑。IP和设备并不总是对应的，这对通信就产生了问题，但是MAC地址不同，MAC地址和设备是一一对应且全球唯一的。所以局域网使用MAC地址通信没有问题。2.历史遗留问题：早期的以太网只有交换机，没有路由器，以太网内通过MAC地址通信。后来才有了互联网，为了兼容原本的模式，采用了IP+MAC地址通信的方式。为啥不推到了重来呢？看看IPv6的处境你就知道了。所以是先有MAC地址后有的IP，IP的提出主要还是因为MAC地址本身的缺陷，这个问题换成有了MAC为何还要IP地址也很有意思。3.我这里简单说一下第一：MAC地址本身的缺陷：因为MAC地址是硬件提供商写在网卡中的，MAC地址虽然唯一但是不能表明用户在整个互联网中的位置，除非维护一个超级大MAC地址对应表，那寻址效率肯定爆炸。但是IP地址解决了这个问题，因为IP地址是网络提供商给你的，所以你在哪里整个网络都是知道的。第二：安全问题：获取MAC地址是通过ARP协议来完成的，如果只用MAC地址通信，那么广播风暴是个难题。4.那么我觉得如果哪天每人一个固定的IPv6地址，那么我觉得MAC地址+IPv4的模式是不是可以被替换了？","like_count":2},{"had_liked":false,"id":25051,"user_name":"吴彪","can_delete":false,"product_type":"c1","uid":1238385,"ip_address":"","ucode":"04EF499564D438","user_header":"https://static001.geekbang.org/account/avatar/00/12/e5/71/cc94469a.jpg","comment_is_top":false,"comment_ctime":1537239173,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100007101,"comment_content":"Protocol is a set of rules that governs communication.  The key elements of protocol are syntax, semantics and timing.\nSyntax:\nSyntax refers the structure and format of the information data.\nSemantics:\nSemantics refers to the meaning of each section of bits.  It does an route identify the route to be taken or the final destination of the message.\nTiming:\nTiming refers to two characteristics: when data should be sent and how fast it should be sent. ","like_count":2},{"had_liked":false,"id":23680,"user_name":"knull","can_delete":false,"product_type":"c1","uid":1043484,"ip_address":"","ucode":"3BFECF3D29F40C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/1c/d323b066.jpg","comment_is_top":false,"comment_ctime":1536586110,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100007101,"comment_content":"1、传输，是物理层做的事情。物理层只认识mac，所以必须要用mac。\n2、那为啥要ip？ip的目的，就是找路。而且，ip可能不会一下就找到，可能要通过n个中间ip转发。一般是，问下，目的ip在不在同一网断。在，直接发。不在，就发网关。如此反复。（所以，ip主机超时时间很长的，因为本身就要经过n跳）ping里面的ttl，就是转发次数。\n3、就是说，没法直接找的目的ip的mac，但是可以找到下一跳的ip的mac。\n4、内部组网，用ip可以动态分配。如果用mac，难道要必须知道每台机器？所以，IP用于找路，下一跳的点。","like_count":2},{"had_liked":false,"id":9569,"user_name":"Jealone","can_delete":false,"product_type":"c1","uid":1025643,"ip_address":"","ucode":"08810356E0E3D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a6/6b/12d87713.jpg","comment_is_top":false,"comment_ctime":1526953166,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100007101,"comment_content":"因为上层通信其实都是虚拟通信，真正数据交换都是要通过最底层，所以虽然知道了IP，但是仍然要将IP包封装为MAC帧，另外之所以要如此设计也是因为MAC帧在传递过程中，头里面的MAC地址是在不断变化的，因为它只关心最近一跳，但是我们必须通过IP头中信息来保证初始地址和最终地址","like_count":2},{"had_liked":false,"id":9258,"user_name":"何yuan","can_delete":false,"product_type":"c1","uid":1117873,"ip_address":"","ucode":"9515496270D013","user_header":"https://static001.geekbang.org/account/avatar/00/11/0e/b1/aab3759b.jpg","comment_is_top":false,"comment_ctime":1526710005,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100007101,"comment_content":"ip地址只是公网ip，请求到内部后需要Apr协议映射到具体内网的机器上，一般内网都是由多台服务器组成集群的没有Mac地址就没法映射到唯一的机器","like_count":2},{"had_liked":false,"id":9228,"user_name":"ben001","can_delete":false,"product_type":"c1","uid":1014338,"ip_address":"","ucode":"2BD6C466F6BD27","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7a/42/e6477279.jpg","comment_is_top":false,"comment_ctime":1526698102,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100007101,"comment_content":"厉害了，自己朗读","like_count":2},{"had_liked":false,"id":9110,"user_name":"HunterYuan","can_delete":false,"product_type":"c1","uid":1015256,"ip_address":"","ucode":"F8900C33D29AA7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7d/d8/d7c77764.jpg","comment_is_top":false,"comment_ctime":1526610501,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100007101,"comment_content":"当数据包到达一个城关时，虽然可以查路由表得到下个城关的ip怎么找，要修改目的ip吗，这样的话就失去了西天的门牌号，这就发吗，这样的话，下个关卡一看，不是我mac啊，你小子是间谍吧，给我出去，不接受，也就无法到达西天。","like_count":2},{"had_liked":false,"id":9085,"user_name":"Define","can_delete":false,"product_type":"c1","uid":1131608,"ip_address":"","ucode":"1373041CD59CC5","user_header":"https://static001.geekbang.org/account/avatar/00/11/44/58/a5436e61.jpg","comment_is_top":false,"comment_ctime":1526605992,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100007101,"comment_content":"主要解决IP盗用问题 如果没有mac 你自己改了IP 端口什么的 别人发的数据包 你就可以收到了 而有mac 交换机不能映射你的mac 你就收不到别人的数据包了","like_count":2},{"had_liked":false,"id":9071,"user_name":"生煎馒头","can_delete":false,"product_type":"c1","uid":1130759,"ip_address":"","ucode":"9873671284E2AC","user_header":"https://static001.geekbang.org/account/avatar/00/11/41/07/e9ea3254.jpg","comment_is_top":false,"comment_ctime":1526604833,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100007101,"comment_content":"因为数据的物理传输过程是一定要经过二层的MAC","like_count":2},{"had_liked":false,"id":298890,"user_name":"文小武","can_delete":false,"product_type":"c1","uid":2668363,"ip_address":"","ucode":"3795847D5ADF6E","user_header":"https://static001.geekbang.org/account/avatar/00/28/b7/4b/3e952e5a.jpg","comment_is_top":false,"comment_ctime":1624360593,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100007101,"comment_content":"MAC地址是设备生产过程中烧录的编号，IP地址是MAC地址的逻辑属性。比如一个门牌号（IP地址）对应一个物理上的房子（MAC），二者合二为一能简单方便的确定一个具体的设备地址。","like_count":1},{"had_liked":false,"id":206565,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1586881219,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100007101,"comment_content":"TCP联想到的设计模式\n1. 装饰模式：发送的时候一层层包装下去，接收的时候一层层解析\n2. 单一职责：每层只做自己的事","like_count":1},{"had_liked":false,"id":163692,"user_name":"坏小哥","can_delete":false,"product_type":"c1","uid":1783594,"ip_address":"","ucode":"296B0C9645CD94","user_header":"https://static001.geekbang.org/account/avatar/00/1b/37/2a/2b3de7f6.jpg","comment_is_top":false,"comment_ctime":1576768042,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":15,"product_id":100007101,"comment_content":"目标服务器发现 MAC 地址对上了，取下 MAC 头来，发送给操作系统的网络层。这里不太明白，这个mac地址是谁的mac地址，mac层不是只有客户端mac，和本地网关的mac嘛？","like_count":1,"discussions":[{"author":{"id":1821104,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/c9/b0/ee812cd7.jpg","nickname":"yClever","note":"","ucode":"B621B58F0EC8E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":177310,"discussion_content":"我也很不理解，如果是服务器的mac，那客户端怎么得到的？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582093707,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63618,"user_name":"mp.cheung","can_delete":false,"product_type":"c1","uid":1162347,"ip_address":"","ucode":"0C91791588BC33","user_header":"https://static001.geekbang.org/account/avatar/00/11/bc/6b/93049c69.jpg","comment_is_top":false,"comment_ctime":1548417503,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100007101,"comment_content":"因为发送请求是从上往下封装网络包，即从应用层到物理层逐层封装。而解析请求则是从下往上逐层将包分解，即从物理层到数据链路层到网络层，所以mac 地址会比ip 地址先解析。","like_count":1},{"had_liked":false,"id":42676,"user_name":"MJ","can_delete":false,"product_type":"c1","uid":1237145,"ip_address":"","ucode":"FCEC0C21444D2A","user_header":"https://static001.geekbang.org/account/avatar/00/12/e0/99/5d603697.jpg","comment_is_top":false,"comment_ctime":1543018919,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100007101,"comment_content":"信息最终是通过双绞线、光纤等物理介质传输的，三层包需要装换成二层桢结构","like_count":1},{"had_liked":false,"id":31055,"user_name":"曾经瘦过","can_delete":false,"product_type":"c1","uid":1240106,"ip_address":"","ucode":"57C32575A1C1FD","user_header":"https://static001.geekbang.org/account/avatar/00/12/ec/2a/b11d5ad8.jpg","comment_is_top":false,"comment_ctime":1539077002,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100007101,"comment_content":"感觉留言区的留言都很厉害，可以巩固知识，也可以参考下别人的观点","like_count":1},{"had_liked":false,"id":22512,"user_name":"Linux云计算网络","can_delete":false,"product_type":"c1","uid":1114062,"ip_address":"","ucode":"8E1F8B049D3C95","user_header":"https://static001.geekbang.org/account/avatar/00/10/ff/ce/73ee54bf.jpg","comment_is_top":false,"comment_ctime":1535761130,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100007101,"comment_content":"一个是mac地址唯一，另一个是协议栈决定的","like_count":1},{"had_liked":false,"id":18653,"user_name":"Eric","can_delete":false,"product_type":"c1","uid":1196906,"ip_address":"","ucode":"C4DA5340DA6165","user_header":"https://static001.geekbang.org/account/avatar/00/12/43/6a/3ea0c553.jpg","comment_is_top":false,"comment_ctime":1533529676,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100007101,"comment_content":"mac和ip是在不同层的，如果把ip比作个人年度目标，那么mac就是阅读甚至周目标。月周目标会根据进度等修改(正如作者所说，每一跳就是这里的月度目标)，年度目标(最终的目的地ip)是不会变。","like_count":1},{"had_liked":false,"id":18556,"user_name":"钱","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1533450020,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100007101,"comment_content":"信息从一台电脑传递到另一台电脑，中间会经历很多的节点，知识越丰富的人，看的越清楚，上帝应该清楚每一步的转换，每一个变幻的细节。对于吃瓜群众而言，这好像魔法一般。我也是个吃瓜群众，以前学习网络相关的知识的时候大概清楚，一个信息想被两台电脑理解，对应的信息必须符合这两台电脑共同遵守的协议，通俗点就是他们两个的约定，比如：什么格式，什么意思，什么顺序，怎么交互等。也知道网络协议为了更好的控制，采用了分层控制，不过细节就不清楚了，每一层具体干什么，怎么实现的，分层的原则是啥？\n看完此节了解到，一次购物行为背后的复杂网络交互和控制，用到了许多的网络协议，是不是邮件发送、短信发送、微信发送、微信语音或视频聊天、电话通信的都是这样的？有什么监控工具可以一探究竟？\n刘老师讲解的相当好，赞，这次一定受益匪浅！多谢","like_count":1},{"had_liked":false,"id":9919,"user_name":"谷家良（Jack）","can_delete":false,"product_type":"c1","uid":1114339,"ip_address":"","ucode":"A7BAE7263BAB1D","user_header":"https://static001.geekbang.org/account/avatar/00/11/00/e3/00df0dcc.jpg","comment_is_top":false,"comment_ctime":1527160477,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100007101,"comment_content":"mac是姓名，IP是住址，这样就可以准确的找到你了","like_count":1},{"had_liked":false,"id":9607,"user_name":"krugle","can_delete":false,"product_type":"c1","uid":1045770,"ip_address":"","ucode":"60A7D9189C01BE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f5/0a/077b9922.jpg","comment_is_top":false,"comment_ctime":1526984363,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100007101,"comment_content":"所谓的精通tcpip是什么概念，能否让我感知到","like_count":1},{"had_liked":false,"id":9432,"user_name":"进化论","can_delete":false,"product_type":"c1","uid":1124107,"ip_address":"","ucode":"2865A23392B9F9","user_header":"https://static001.geekbang.org/account/avatar/00/11/27/0b/12dee5ed.jpg","comment_is_top":false,"comment_ctime":1526868898,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100007101,"comment_content":"老师讲的很好，加油","like_count":1},{"had_liked":false,"id":9279,"user_name":"flyang","can_delete":false,"product_type":"c1","uid":1059672,"ip_address":"","ucode":"A052A9652A7EA3","user_header":"https://static001.geekbang.org/account/avatar/00/10/2b/58/7e589b77.jpg","comment_is_top":false,"comment_ctime":1526727187,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100007101,"comment_content":"为什么还要通过本地的mac地址？\n好像是两个原因，一个是对于路由表，对端网关需要进行路由更新和老化。\n还有一个原因，二层协议需要使用mac地址进行协议传输，你需要更换二层的mac地址\n简单点说，你的mac地址只在你和网关之间的线路有效。至于下一个网关是不认识你的mac地址的。","like_count":1},{"had_liked":false,"id":9277,"user_name":"逗逼师父","can_delete":false,"product_type":"c1","uid":1017863,"ip_address":"","ucode":"ECC2D82F83CBE6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/88/07/7804f4cc.jpg","comment_is_top":false,"comment_ctime":1526722623,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100007101,"comment_content":"mac地址在物理上是唯一的，ip是会变的","like_count":1},{"had_liked":false,"id":9207,"user_name":"小先生","can_delete":false,"product_type":"c1","uid":1055214,"ip_address":"","ucode":"E5F2052E0323C0","user_header":"https://static001.geekbang.org/account/avatar/00/10/19/ee/e395a35e.jpg","comment_is_top":false,"comment_ctime":1526686858,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100007101,"comment_content":"Mac 地址是保证设备唯一性的。因为烧在了网卡上。而IP地址是会变动。\nMac地址如果在整个互联网中通信，是一个灾难，因为它是通过广播形式查找的，只适合于在局域网中使用。","like_count":1},{"had_liked":false,"id":9131,"user_name":"Recolar","can_delete":false,"product_type":"c1","uid":1132996,"ip_address":"","ucode":"2EBCD5E0D5E814","user_header":"","comment_is_top":false,"comment_ctime":1526627011,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100007101,"comment_content":"因为不能把数据包里面的电商网站的目标IP改为下一个城关的IP，否则就找不到真正的目的地了，所以只能用MAC地址。","like_count":1},{"had_liked":false,"id":9130,"user_name":"蓝色理想","can_delete":false,"product_type":"c1","uid":1015043,"ip_address":"","ucode":"43C8D83DC19A17","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7d/03/4e71c307.jpg","comment_is_top":false,"comment_ctime":1526626149,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":17,"product_id":100007101,"comment_content":"Http请求通过网络访问到服务器时，对方显示的客户机是外网ip还是内网ip呢？","like_count":1},{"had_liked":false,"id":9099,"user_name":"Free style","can_delete":false,"product_type":"c1","uid":1087136,"ip_address":"","ucode":"61E78703EECBD8","user_header":"https://static001.geekbang.org/account/avatar/00/10/96/a0/6231b359.jpg","comment_is_top":false,"comment_ctime":1526608455,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":17,"product_id":100007101,"comment_content":"ip地址是可以更改或者重新分配的，而mac地址是个大网卡厂家协议生产的唯一编号的产品不能更改和变化。所以到达网关后需要取下本地mac地址。","like_count":1},{"had_liked":false,"id":9087,"user_name":"Regular","can_delete":false,"product_type":"c1","uid":1025998,"ip_address":"","ucode":"80B3EA083534CA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a7/ce/7ee0d672.jpg","comment_is_top":false,"comment_ctime":1526606626,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":17,"product_id":100007101,"comment_content":"Mac地址才是直接匹配下一个节点的信息","like_count":1},{"had_liked":false,"id":9069,"user_name":"生煎馒头","can_delete":false,"product_type":"c1","uid":1130759,"ip_address":"","ucode":"9873671284E2AC","user_header":"https://static001.geekbang.org/account/avatar/00/11/41/07/e9ea3254.jpg","comment_is_top":false,"comment_ctime":1526604721,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":17,"product_id":100007101,"comment_content":"因为数据物理传输还是需要通过二层MAC的","like_count":1},{"had_liked":false,"id":9062,"user_name":"kohakuhubo","can_delete":false,"product_type":"c1","uid":1065070,"ip_address":"","ucode":"12703B1C1D3405","user_header":"https://static001.geekbang.org/account/avatar/00/10/40/6e/f6b7d8ae.jpg","comment_is_top":false,"comment_ctime":1526604512,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":17,"product_id":100007101,"comment_content":"ip地址是针对网络层，它的目的是将不同数据链路层的实现和不同物理层的实现可以在相同的标准下实现互联，而Mac地址才是真正要实现主机在数据链路层点到点机的通讯","like_count":1},{"had_liked":false,"id":9054,"user_name":"过河卒","can_delete":false,"product_type":"c1","uid":1047545,"ip_address":"","ucode":"5C117B4E108997","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fb/f9/4514caf4.jpg","comment_is_top":false,"comment_ctime":1526603966,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":17,"product_id":100007101,"comment_content":"Mac地址应该是在局域网广播的时候使用的，唯一的，局域网中若通过IP广播，IP的值是会变化的","like_count":1},{"had_liked":false,"id":9041,"user_name":"Lu","can_delete":false,"product_type":"c1","uid":1128630,"ip_address":"","ucode":"40C9FDEEA728AB","user_header":"https://static001.geekbang.org/account/avatar/00/11/38/b6/a7844bba.jpg","comment_is_top":false,"comment_ctime":1526602655,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":17,"product_id":100007101,"comment_content":"‘网关往往是一个路由器’，那网关机怎么理解比较好呢？在工作中经常会提到网关机，一般用来做数据接收，感觉跟一般的服务器没有什么区别呢？","like_count":1},{"had_liked":false,"id":9031,"user_name":"登高","can_delete":false,"product_type":"c1","uid":1068600,"ip_address":"","ucode":"CD40046238BA18","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/38/3faa8377.jpg","comment_is_top":false,"comment_ctime":1526599688,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":17,"product_id":100007101,"comment_content":"ip是网络层，在网关间传输应该在链路层了，如果要通过ip就要再解包打包，可能会有效率和安全问题吧\n\n贫僧来着东土大唐长安街111号404室，欲往女儿国乾清宫，有趣 期待下节课","like_count":1},{"had_liked":false,"id":385947,"user_name":"硕果阳光","can_delete":false,"product_type":"c1","uid":1064133,"ip_address":"美国","ucode":"C59841EB675535","user_header":"https://static001.geekbang.org/account/avatar/00/10/3c/c5/92017a7b.jpg","comment_is_top":false,"comment_ctime":1703726157,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":17,"product_id":100007101,"comment_content":"您好 这里的操作系统是指浏览器host的操作系统么？","like_count":0},{"had_liked":false,"id":384504,"user_name":"Geek_57d86f","can_delete":false,"product_type":"c1","uid":2143816,"ip_address":"上海","ucode":"0C57E80A1EFEA9","user_header":"","comment_is_top":false,"comment_ctime":1701072293,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":17,"product_id":100007101,"comment_content":"提交一下我对课后问题的初步思考，找到下一个网关的IP之后，数据包需要在该局域网内传递，局域网内传递网络信息是通过数据帧传输的，要求提供源MAC地址和目标MAC地址，因此还是需要通过ARP协议将IP地址解析为MAC地址，否则数据包无法传递到下一个网关或目标服务器了。不知道这么理解是否正确","like_count":0},{"had_liked":false,"id":383089,"user_name":"huangzehao","can_delete":false,"product_type":"c1","uid":1386934,"ip_address":"广东","ucode":"8A6530D82B48E3","user_header":"https://wx.qlogo.cn/mmopen/vi_32/jqDSNBHmPbPGayjtXrm9iciccSKbfg6g8oMgXc147jib4HjoUK1RINorZYfBuiaQBibqJIrQRVG77PKGS0dW5PVAAicw/132","comment_is_top":false,"comment_ctime":1698398140,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":18,"product_id":100007101,"comment_content":"\nip地址是基于软件实现的，mac地址是固化在网卡的，不可改变的\n在消息转发过程当中，都需要ip地址，代表目标的地址，还需要下一跳地址，下一跳地址就是mac地址，因为mac地址是一直在变化过程当中的\n\nip地址是基于网络层，mac地址是基于链路层，ip包最终还是需要和物理连接和mac地址交换的","like_count":0},{"had_liked":false,"id":382246,"user_name":"昵称C","can_delete":false,"product_type":"c1","uid":1234963,"ip_address":"北京","ucode":"1BB2D537942DC2","user_header":"https://static001.geekbang.org/account/avatar/00/12/d8/13/082013bc.jpg","comment_is_top":false,"comment_ctime":1696932283,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":18,"product_id":100007101,"comment_content":"ip像是居住地址，mac像是身份证号；\n根据ip找位置，根据mac确认对象是谁，缺一不可。","like_count":0},{"had_liked":false,"id":382245,"user_name":"昵称C","can_delete":false,"product_type":"c1","uid":1234963,"ip_address":"北京","ucode":"1BB2D537942DC2","user_header":"https://static001.geekbang.org/account/avatar/00/12/d8/13/082013bc.jpg","comment_is_top":false,"comment_ctime":1696932076,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":18,"product_id":100007101,"comment_content":"ip是网络世界分配的标识，mac是硬件唯一标识，ip是可能会变的，mac不会变化，所以只有依据mac找最终目标才不会发生错误。","like_count":0},{"had_liked":false,"id":380593,"user_name":"philo","can_delete":false,"product_type":"c1","uid":2972859,"ip_address":"北京","ucode":"508630C0CA5327","user_header":"https://static001.geekbang.org/account/avatar/00/2d/5c/bb/b547c423.jpg","comment_is_top":false,"comment_ctime":1693880036,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":18,"product_id":100007101,"comment_content":"网络协议和操作系统的关系是什么呢？发出请求添加各层网络协议的头，以及接收到网络包，各层对它进行解析的程序是谁来实现的？","like_count":0},{"had_liked":false,"id":378767,"user_name":"小提莫","can_delete":false,"product_type":"c1","uid":1650640,"ip_address":"广东","ucode":"B4CF9EB106CE77","user_header":"https://static001.geekbang.org/account/avatar/00/19/2f/d0/4407e7fd.jpg","comment_is_top":false,"comment_ctime":1690761994,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":18,"product_id":100007101,"comment_content":"一个ip地址的机器上可能有多个网卡吧","like_count":0},{"had_liked":false,"id":377910,"user_name":"仰望星辰","can_delete":false,"product_type":"c1","uid":2063881,"ip_address":"广东","ucode":"58BA22362DA7A6","user_header":"https://static001.geekbang.org/account/avatar/00/1f/7e/09/f2f3fc24.jpg","comment_is_top":false,"comment_ctime":1689516379,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":18,"product_id":100007101,"comment_content":"一次https请求所使用的协议及方法：\n1、DNS（应用层），去寻找目的域名对应的ip地址\n2、传输层\nsocket(套接字，不同主机应用进程进行双向通信的端点的抽象)，工作在应用层和传输层中\nUDP&#47;TCP(传输层)，无连接、面向连接两种。client端与server端的两个端口号，是对应的通信进程，操作系统判断发给哪个进程\n3、ip（网络层）。\n浏览器所在机器ip地址和目标ip地址。通过ip地址判断是本地，还是外地（保留ip，还是非保留）。\nDHCP(Dynamic Host Configuration Protocol，动态主机配置协议，应用层协议),操作系统启动时，就会配置默认网关的ip地址。\nARP协议（地址解析协议,网络层），本地ip对应的MAC地址。\n4、ip包交给mac层\n由ARP转换默认网关的ip地址为mac地址，网卡就能将包发送给网关\n（注意，这是局域网通信，一台电脑内部通信是不用网卡的）\n网卡与网关区别（网卡的主要作用是数据的封装与解封、链路管理和数据编码与译码，而网关的作用是在不同的网络之间进行通信；网卡通常安装在计算机或网络设备中，用于与同一网络中的其他设备进行通信，而网关通常用于在不同的网络之间进行通信，例如在不同协议的网络之间传递数据）\n5、网关之间传输\n网关通常是一个路由器，路由表里面有从这里到某个ip地址该怎么走，\n走到最后一个网关后，网关知道包要去哪个局域网，目的ip地址通过ARP协议找到mac地址，寻找到了目标服务器。\n（网关连接着两个网络，网络内部通过mac地址通信，网络之前通过ip地址通信。网关通常知道去某个地方需要走哪里，因为网关与临近网关会经常沟通，通常有OSPF和BGP路由协议。）\ntcp的超时重传机制 如何停止: 1、tcp连接断了，浏览器的应用层重新发送下单请求。 2、接收到了成功信号。\n 应用层压根不关心TCP层做的重试。 对于应用层来说，一次请求就是一次请求，应用层开发人员不需要关心底层的语义。这样子写的代码才能够足够清晰。\nIP地址标识了来源和目标，在不断切换路由器中间节点（下一跳）的过程中，这个信息是不能变的，否则没法回去了。因此需要通过mac地址来确定下一站，但是起点和终点不变。\n\n两个问题：OSPF细节、网络内部细节\n","like_count":0},{"had_liked":false,"id":375557,"user_name":"return","can_delete":false,"product_type":"c1","uid":1135528,"ip_address":"四川","ucode":"42B8A3380DF04B","user_header":"https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg","comment_is_top":false,"comment_ctime":1685627510,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":18,"product_id":100007101,"comment_content":"再刷一遍，\n5年了啊，","like_count":0},{"had_liked":false,"id":374963,"user_name":"学习者","can_delete":false,"product_type":"c1","uid":2208635,"ip_address":"广东","ucode":"5F7ED535134B8F","user_header":"https://static001.geekbang.org/account/avatar/00/21/b3/7b/95adaf84.jpg","comment_is_top":false,"comment_ctime":1684731642,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":18,"product_id":100007101,"comment_content":"Mac 地址是必须的，ip 地址用来定位，Mac 用来识别身份，刚才想了一下，每一跳的时候，源ip 和目的ip 不会变，变的是每一跳的mac 。\n\n思考了一下，那能不能在ip 头那里加一个字段，下一跳ip ，用来标记下一跳的ip ，已此来省略掉Mac 头，转念一想不ok ，即使通过下一跳ip 和目的ip 找到了地址，但是也无法判断将包发给谁，因为这个局域网内可能有很多人。","like_count":0,"discussions":[{"author":{"id":2208635,"avatar":"https://static001.geekbang.org/account/avatar/00/21/b3/7b/95adaf84.jpg","nickname":"学习者","note":"","ucode":"5F7ED535134B8F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":618972,"discussion_content":"补充一下，ip 地址用来规划路径，防止数据包走错路，mac 地址用来定位，将发发给正确的地址","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684733001,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":374187,"user_name":"特修斯之船","can_delete":false,"product_type":"c1","uid":1068192,"ip_address":"广东","ucode":"C041A289017D0C","user_header":"https://static001.geekbang.org/account/avatar/00/10/4c/a0/6cfdefa6.jpg","comment_is_top":false,"comment_ctime":1683687580,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":18,"product_id":100007101,"comment_content":"A MAC address is responsible for local identification and an IP address for global identification.","like_count":0},{"had_liked":false,"id":372226,"user_name":"程铭","can_delete":false,"product_type":"c1","uid":3585010,"ip_address":"河南","ucode":"19ECD91FB1228F","user_header":"https://static001.geekbang.org/account/avatar/00/36/b3/f2/bf7e3708.jpg","comment_is_top":false,"comment_ctime":1680858971,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":18,"product_id":100007101,"comment_content":"MAC地址是唯一的，在到下个城关中时，他的IP地址源地址和目标地址不变但是MAC地址会发生变动，使用户的路程移动，到最后的路由路径时判断终点站在本路径里后会将路径下发给下一级【交换机】，交换机在下发给用户看到是自己的IP后就收下包裹，达成目标","like_count":0},{"had_liked":false,"id":369397,"user_name":"元","can_delete":false,"product_type":"c1","uid":2740845,"ip_address":"广东","ucode":"9210CF506C853E","user_header":"https://static001.geekbang.org/account/avatar/00/29/d2/6d/f6b4e44c.jpg","comment_is_top":false,"comment_ctime":1677492097,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":19,"product_id":100007101,"comment_content":"Mac是网卡物理地址是固定不变的，但ip 地址是会发生变化。ip 地址是告诉数据包去到哪一个网络，mac 是哪一台主机，ip 就好像你所居住的地址**省**市**区**街道**小区**栋**房号，mac地址就是这个房里面的哪一个人。","like_count":0},{"had_liked":false,"id":368295,"user_name":"3.0的A7","can_delete":false,"product_type":"c1","uid":1211991,"ip_address":"黑龙江","ucode":"23C5F02B45CE39","user_header":"https://static001.geekbang.org/account/avatar/00/12/7e/57/8c1051b6.jpg","comment_is_top":false,"comment_ctime":1676121924,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":19,"product_id":100007101,"comment_content":"城关与城关之间是一个国家，当网络包知道了下一步去哪个城关，还是要使用国家内部的 MAC 地址，通过下一个城关的 MAC 地址，找到下一个城关，然后再问下一步的路怎么走，一直到走出最后一个城关。\n\n网络包是怎么知道下一跳去哪的呢，如果不能准确的一步到目的地，而是一步一步一步的走，这个方向是怎么把握的呢？","like_count":0},{"had_liked":false,"id":363484,"user_name":"辣么大","can_delete":false,"product_type":"c1","uid":1396951,"ip_address":"广东","ucode":"AB308B6DCA0108","user_header":"https://static001.geekbang.org/account/avatar/00/15/50/d7/f82ed283.jpg","comment_is_top":false,"comment_ctime":1669730232,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":19,"product_id":100007101,"comment_content":"mac地址在链路层使用，是数据传输的物理地址","like_count":0},{"had_liked":false,"id":359939,"user_name":"杨","can_delete":false,"product_type":"c1","uid":1971269,"ip_address":"湖南","ucode":"7EFEFE285975C6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/oltLEqTrmHm2aJP99BK6tHu5h7hp4aj08wR5Wt6H31iadFduDAVvjYKmhQ2nvGbLV3lkVdiat2GRasgWXoJeTibUg/132","comment_is_top":false,"comment_ctime":1666079467,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":19,"product_id":100007101,"comment_content":"看完全篇，回来看第一篇，非常清楚每个协议在哪个位置发挥什么作用","like_count":0},{"had_liked":false,"id":359600,"user_name":"🏴‍☠️","can_delete":false,"product_type":"c1","uid":1478157,"ip_address":"福建","ucode":"E62C53E781AF81","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/8H9JoTQj0gmhgUhtozvFoNesW3fv7pow3IibGeLhakDz5aWlicA3UOjqSc5jWw9C0ibgFIemlK6DkrYUe9Sibcl9Vg/132","comment_is_top":false,"comment_ctime":1665669402,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":19,"product_id":100007101,"comment_content":"目前的网络模型相关协议决定了只通过ip不行，除非搞一套新网络模型出来","like_count":0},{"had_liked":false,"id":359028,"user_name":"喰","can_delete":false,"product_type":"c1","uid":2659564,"ip_address":"北京","ucode":"6133C265D4D63D","user_header":"https://static001.geekbang.org/account/avatar/00/28/94/ec/8db3f04a.jpg","comment_is_top":false,"comment_ctime":1665190105,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":19,"product_id":100007101,"comment_content":"目标ip 地址已经有了，就不能写网关了，通过路由协议找到下一条的路由条目，通过mac 地址到达下一条","like_count":0},{"had_liked":false,"id":355344,"user_name":"Malcolm","can_delete":false,"product_type":"c1","uid":1221280,"ip_address":"山东","ucode":"C957ADB01B5FB8","user_header":"https://static001.geekbang.org/account/avatar/00/12/a2/a0/0aaa34e4.jpg","comment_is_top":false,"comment_ctime":1661310461,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":19,"product_id":100007101,"comment_content":"mac地址相当于一栋房子的经纬度坐标，ip地址只是这栋房子的门牌号。     门牌号可以变，但这栋房子的经纬度坐标可是没法轻易改变的。","like_count":0},{"had_liked":false,"id":353290,"user_name":"Geek_8a1043","can_delete":false,"product_type":"c1","uid":2639785,"ip_address":"云南","ucode":"F8F59B9A66A2F2","user_header":"","comment_is_top":false,"comment_ctime":1659334336,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":19,"product_id":100007101,"comment_content":"为啥有目标地址得IP还需要使用MAC地址？因为不是所有的路由器节点都会记录目标IP地址，就像一个快递到你的手里需要经过多个网点一样，不仅需要知道目的地还需要知道各个网点的地址，这个mac地址就相当于各个网点的地址","like_count":0},{"had_liked":false,"id":350890,"user_name":"柳十三","can_delete":false,"product_type":"c1","uid":1385852,"ip_address":"","ucode":"FE50C9778914C6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/tKvmZ3Vs4t6RZ3X7cAliaW47Zatxhn1aV5PcCYT9NZ9k9WWqRrEBGHicGtRWvsG6yQqHnaWw6cGNSbicNLjZebcHA/132","comment_is_top":false,"comment_ctime":1657286233,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":19,"product_id":100007101,"comment_content":"我的理解，ip是用来寻址的，寻找目标对象，实际传输是mac层传输，mac层传输需要mac地址","like_count":0},{"had_liked":false,"id":350784,"user_name":"柳十三","can_delete":false,"product_type":"c1","uid":1385852,"ip_address":"","ucode":"FE50C9778914C6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/tKvmZ3Vs4t6RZ3X7cAliaW47Zatxhn1aV5PcCYT9NZ9k9WWqRrEBGHicGtRWvsG6yQqHnaWw6cGNSbicNLjZebcHA/132","comment_is_top":false,"comment_ctime":1657189064,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":19,"product_id":100007101,"comment_content":"1.mac地址可以标识主机,ip也可以标识主机，网络传输为什么使用ip，而不使用mac地址呢？","like_count":0},{"had_liked":false,"id":348259,"user_name":"Geek_sth86w","can_delete":false,"product_type":"c1","uid":1024487,"ip_address":"","ucode":"DBA8B1722F118A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a1/e7/78ff9c7d.jpg","comment_is_top":false,"comment_ctime":1654909353,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":20,"product_id":100007101,"comment_content":"MAC用来标识个体，IP用来表示个体在组织架构中的位置。通过层级管理，提高沟通效率。","like_count":0},{"had_liked":false,"id":347850,"user_name":"Geek_05d654","can_delete":false,"product_type":"c1","uid":2903068,"ip_address":"","ucode":"D10FB87A0A62A1","user_header":"","comment_is_top":false,"comment_ctime":1654511990,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":20,"product_id":100007101,"comment_content":"最后一个城关知道这个网络包要去的地方。于是，对着这个国家吼一声，谁是目标 IP 啊？目标服务器就会回复一个 MAC 地址；如果有两个目标服务，一个真的一个假的，会回复两个 mac 地址吗，然后城关怎么区分真假","like_count":0},{"had_liked":false,"id":346486,"user_name":"may_huang","can_delete":false,"product_type":"c1","uid":1451623,"ip_address":"","ucode":"EAF989F18FC109","user_header":"https://static001.geekbang.org/account/avatar/00/16/26/67/c3d90f46.jpg","comment_is_top":false,"comment_ctime":1653193580,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":20,"product_id":100007101,"comment_content":"为什么有了网关的MAC之后就能将数据包发送至网关，这个过程是谁来完成的？","like_count":0},{"had_liked":false,"id":346199,"user_name":"William Ning","can_delete":false,"product_type":"c1","uid":1592279,"ip_address":"","ucode":"4DB8D05E69E5F3","user_header":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","comment_is_top":false,"comment_ctime":1652887399,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":20,"product_id":100007101,"comment_content":"录音中“谁是 192.168.1.1 啊？”这个我挺一遍笑一遍～～","like_count":0},{"had_liked":false,"id":346108,"user_name":"娃哈哈","can_delete":false,"product_type":"c1","uid":2981739,"ip_address":"","ucode":"355EADE8479480","user_header":"https://static001.geekbang.org/account/avatar/00/2d/7f/6b/83236a96.jpg","comment_is_top":false,"comment_ctime":1652843454,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":20,"product_id":100007101,"comment_content":"本地MAC是个中间件，ip发送到网关就像从A国到B国一样，得要证明，这个证明就是MAC，而这个查证明的就是网关，ip就是你自己，刚学这个，大佬们多多指教","like_count":0},{"had_liked":false,"id":345950,"user_name":"Wade","can_delete":false,"product_type":"c1","uid":1364465,"ip_address":"","ucode":"0DED9400BEFE7C","user_header":"https://static001.geekbang.org/account/avatar/00/14/d1/f1/ffa93b4b.jpg","comment_is_top":false,"comment_ctime":1652711345,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":20,"product_id":100007101,"comment_content":"摘要\n# 网络数据包结构\nMac头 Ip头 Tcp头 Http头 数据体\n# 网络五层模型\n1. 物理层：连接\n2. 链路层：定位\n3. 传输层：路由\n4. 会话层：会话连接机制\n5. 应用层：数据封装格式","like_count":0},{"had_liked":false,"id":345762,"user_name":"Geek_115bc8","can_delete":false,"product_type":"c1","uid":1673843,"ip_address":"","ucode":"71FBC9F02AFE1B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erXRaa98A3zjLDkOibUJV1254aQ4EYFTbSLJuEvD0nXicMNA8pLoxOfHf5kPTbGLXNicg8CPFH3Tn0mA/132","comment_is_top":false,"comment_ctime":1652580421,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":20,"product_id":100007101,"comment_content":"我感觉应该是为了方便快速的找到对应的元ip地址。","like_count":0},{"had_liked":false,"id":345050,"user_name":"Hyacinth","can_delete":false,"product_type":"c1","uid":1414510,"ip_address":"","ucode":"C9A251CC2FFA70","user_header":"https://static001.geekbang.org/account/avatar/00/15/95/6e/6f20ea3b.jpg","comment_is_top":false,"comment_ctime":1651983036,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":20,"product_id":100007101,"comment_content":"Arp协议在网络层 不是数据链路层吧","like_count":0},{"had_liked":false,"id":344683,"user_name":"tofu","can_delete":false,"product_type":"c1","uid":1262144,"ip_address":"","ucode":"93BFF835968A03","user_header":"https://static001.geekbang.org/account/avatar/00/13/42/40/c7444091.jpg","comment_is_top":false,"comment_ctime":1651722286,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":20,"product_id":100007101,"comment_content":"mac地址具有唯一性（一个网域内）  但是不能用来定位。","like_count":0},{"had_liked":false,"id":338136,"user_name":"luojielu","can_delete":false,"product_type":"c1","uid":2907771,"ip_address":"","ucode":"6EAD95C95A9CA5","user_header":"https://static001.geekbang.org/account/avatar/00/2c/5e/7b/0e1eb97a.jpg","comment_is_top":false,"comment_ctime":1647317180,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":20,"product_id":100007101,"comment_content":"使用MAC地址不是因为全球唯一这个因素，MAC地址只能做到理论上的唯一，因为MAC地址是可以修改的。现实场景一般是通过“公网IP”+“私网IP&#47;MAC地址”通信的（私网IP和私网内的MAC地址有映射关系）","like_count":0},{"had_liked":false,"id":338134,"user_name":"luojielu","can_delete":false,"product_type":"c1","uid":2907771,"ip_address":"","ucode":"6EAD95C95A9CA5","user_header":"https://static001.geekbang.org/account/avatar/00/2c/5e/7b/0e1eb97a.jpg","comment_is_top":false,"comment_ctime":1647316739,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":21,"product_id":100007101,"comment_content":"1、因为要避免IP地址重复的问题，在公共网使用公网IP地址进行传输，到了私网后使用Mac地址。\n2、公网IP地址有限\n3、私网可以更灵活地部署","like_count":0},{"had_liked":false,"id":335657,"user_name":"徐亦快","can_delete":false,"product_type":"c1","uid":1441568,"ip_address":"","ucode":"D3F17AE0E8D90F","user_header":"https://static001.geekbang.org/account/avatar/00/15/ff/20/8fe8f225.jpg","comment_is_top":false,"comment_ctime":1645616143,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":21,"product_id":100007101,"comment_content":"mac地址是硬件特征，ip是网络上的位置特征。","like_count":0},{"had_liked":false,"id":335049,"user_name":"进化菌","can_delete":false,"product_type":"c1","uid":1276861,"ip_address":"","ucode":"B30A5F78BB4171","user_header":"https://static001.geekbang.org/account/avatar/00/13/7b/bd/ccb37425.jpg","comment_is_top":false,"comment_ctime":1645270941,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":21,"product_id":100007101,"comment_content":"挺有趣的，一个网络请求走过很多路，没想到还能那么快。\n网络协议就是契约是沟通的桥梁，通过Ta，就可以互相协作办事，真棒！","like_count":0},{"had_liked":false,"id":334821,"user_name":"Dillon Liang","can_delete":false,"product_type":"c1","uid":1437454,"ip_address":"","ucode":"EDD7C41CBAE554","user_header":"https://static001.geekbang.org/account/avatar/00/15/ef/0e/bc0dc820.jpg","comment_is_top":false,"comment_ctime":1645147789,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":21,"product_id":100007101,"comment_content":"同一局域网出口IP一样，可以通过mac地址找到局域网中的某台机器","like_count":0},{"had_liked":false,"id":332865,"user_name":"Z宇锤锤","can_delete":false,"product_type":"c1","uid":2188142,"ip_address":"","ucode":"7DB36E986A7A51","user_header":"https://static001.geekbang.org/account/avatar/00/21/63/6e/6b971571.jpg","comment_is_top":false,"comment_ctime":1643768964,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":21,"product_id":100007101,"comment_content":"因为IP地址是可以变化的，MAC地址不变化。","like_count":0},{"had_liked":false,"id":331879,"user_name":"...","can_delete":false,"product_type":"c1","uid":1444578,"ip_address":"","ucode":"49670311EDF894","user_header":"https://static001.geekbang.org/account/avatar/00/16/0a/e2/aa8c2de2.jpg","comment_is_top":false,"comment_ctime":1642847933,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":21,"product_id":100007101,"comment_content":"本地mac地址是全球惟一的，不会改变，而ip地址是可变的， 所以需要结合不变的","like_count":0},{"had_liked":false,"id":326722,"user_name":"Geek6084","can_delete":false,"product_type":"c1","uid":2845361,"ip_address":"","ucode":"D0A052F707D6C8","user_header":"","comment_is_top":false,"comment_ctime":1639646140,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":21,"product_id":100007101,"comment_content":"&quot;当网络包到达一个城关的时候，可以通过路由表得到下一个城关的 IP 地址，直接通过 IP 地址找就可以了，为什么还要通过本地的 MAC 地址呢？&quot; ------- \n\n高赞回答&quot;因为源ip和目的ip在传输过程中保持，需要通过mac地址记录下一跳的地址。&quot;该答案可以解释跨局域网需要mac地址，但不能解释局域网内部通信需要mac地址。\n局域网内部通信需要mac地址，个人理解这是一种分层的思想，二层无需理会上层的协议字段，可以做到兼容不同的上层协议。\n","like_count":0},{"had_liked":false,"id":320743,"user_name":"Paul Shan","can_delete":false,"product_type":"c1","uid":1593140,"ip_address":"","ucode":"32D99989028284","user_header":"","comment_is_top":false,"comment_ctime":1636495665,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":21,"product_id":100007101,"comment_content":"有了ip地址并不能直接访问机器，还需要吼一声，获得mac地址，通过数据链路层来访问，网关已经有了其他网关的mac地址，就可以免去这一步了，直接通过数据链路层传输。","like_count":0},{"had_liked":false,"id":319769,"user_name":"lliill","can_delete":false,"product_type":"c1","uid":1179412,"ip_address":"","ucode":"E01B1377D3EE57","user_header":"https://static001.geekbang.org/account/avatar/00/11/ff/14/4d5dfbfb.jpg","comment_is_top":false,"comment_ctime":1635933980,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":21,"product_id":100007101,"comment_content":"一个IP地址只需要4个字节，MAC地址需要6个字节，可能也有占用内存大小的考虑","like_count":0},{"had_liked":false,"id":314486,"user_name":"LFive","can_delete":false,"product_type":"c1","uid":2370441,"ip_address":"","ucode":"E5C0A26C7111FF","user_header":"https://static001.geekbang.org/account/avatar/00/24/2b/89/d56da279.jpg","comment_is_top":false,"comment_ctime":1633136332,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":21,"product_id":100007101,"comment_content":"举个例子吧，场景是快递员给你送快递，快递员a 只知道你的 身份证号（mac地址），快递员b知道你的 家庭住址（ip地址）和身份证号（mac地址），那么哪个快递员给你送快递更简单？","like_count":0},{"had_liked":false,"id":310884,"user_name":"rockrobo","can_delete":false,"product_type":"c1","uid":1602143,"ip_address":"","ucode":"FBC02D4F50F0EF","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/3s31upu6rw0y5hHkeOlrriafpvGK5P8k0lzDohTyoww7ia4RWY4Z1lNPHBiaxHeTecbqpia0BttZuic9ktnmF5ooCbQ/132","comment_is_top":false,"comment_ctime":1630947094,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":22,"product_id":100007101,"comment_content":"因为要接收报平安的个包","like_count":0},{"had_liked":false,"id":310188,"user_name":"Sargeras","can_delete":false,"product_type":"c1","uid":2754580,"ip_address":"","ucode":"DAD4EF980A0BCF","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Kia7YsnQF8XwKV5DQwZiaWmbh33yFKajVWicB4z7gbfaam9Q9t6zjrARWcalqTndL9xu8bG63iaNsibpqDSVSnIzmFg/132","comment_is_top":false,"comment_ctime":1630542413,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":22,"product_id":100007101,"comment_content":"国与国之间链路层协议使用PPP，那么还会涉及到MAC地址问题么？","like_count":0},{"had_liked":false,"id":309962,"user_name":"HCIE大师之路","can_delete":false,"product_type":"c1","uid":2723905,"ip_address":"","ucode":"90806DB2826226","user_header":"https://static001.geekbang.org/account/avatar/00/29/90/41/055661bb.jpg","comment_is_top":false,"comment_ctime":1630414785,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":22,"product_id":100007101,"comment_content":"协议三要素是语法、语意、和时序","like_count":0},{"had_liked":false,"id":309500,"user_name":"Sunny","can_delete":false,"product_type":"c1","uid":1305257,"ip_address":"","ucode":"BB7B274CE0672E","user_header":"https://static001.geekbang.org/account/avatar/00/13/ea/a9/0a917f2c.jpg","comment_is_top":false,"comment_ctime":1630199505,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":22,"product_id":100007101,"comment_content":"文中说“城关和城关之间是一个国家”，具体该怎样理解呢？","like_count":0},{"had_liked":false,"id":304014,"user_name":"周无争","can_delete":false,"product_type":"c1","uid":2713921,"ip_address":"","ucode":"B188767F463EED","user_header":"https://static001.geekbang.org/account/avatar/00/29/69/41/9c3c1317.jpg","comment_is_top":false,"comment_ctime":1627183512,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":22,"product_id":100007101,"comment_content":"IP地址根据ABC级别只在同一局域网内通信时直接使用，出了对应的局域网就不能保证唯一性了","like_count":0},{"had_liked":false,"id":303681,"user_name":"程序员花卷","can_delete":false,"product_type":"c1","uid":1665471,"ip_address":"","ucode":"DDCFE578C6C428","user_header":"https://static001.geekbang.org/account/avatar/00/19/69/bf/58f70a2a.jpg","comment_is_top":false,"comment_ctime":1626926267,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":22,"product_id":100007101,"comment_content":"IP地址相当于我们寄邮件时的名字，MAC地址相当地理位置","like_count":0},{"had_liked":false,"id":299764,"user_name":"Hello World","can_delete":false,"product_type":"c1","uid":2676832,"ip_address":"","ucode":"1331E1C080DDB3","user_header":"https://static001.geekbang.org/account/avatar/00/28/d8/60/9c1c6822.jpg","comment_is_top":false,"comment_ctime":1624849351,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":22,"product_id":100007101,"comment_content":"Mac地址是二层的。时候的数据包最终还是要走到物理链路上来。物理链路上只认识二层Frame。 一层套一层","like_count":0},{"had_liked":false,"id":298199,"user_name":"朝闻道","can_delete":false,"product_type":"c1","uid":1203260,"ip_address":"","ucode":"F7F2120A660285","user_header":"","comment_is_top":false,"comment_ctime":1623943732,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":22,"product_id":100007101,"comment_content":"为什么Bgp在网络层？","like_count":0},{"had_liked":false,"id":294666,"user_name":"1043","can_delete":false,"product_type":"c1","uid":1485365,"ip_address":"","ucode":"AAA69CC175AEE3","user_header":"https://static001.geekbang.org/account/avatar/00/16/aa/35/1a4884f9.jpg","comment_is_top":false,"comment_ctime":1622038332,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":1,"score":22,"product_id":100007101,"comment_content":"在以太网中真实通信就是靠mac地址，用ip只不过是通过arp解析到mac地址然后再二层通信。没有mac地址严格来说就只能通过arp不断广播查找，找不到mac就不能通信。","like_count":0},{"had_liked":false,"id":294588,"user_name":"Allan","can_delete":false,"product_type":"c1","uid":1310388,"ip_address":"","ucode":"8DA4DBECC2C45C","user_header":"https://static001.geekbang.org/account/avatar/00/13/fe/b4/295338e7.jpg","comment_is_top":false,"comment_ctime":1622010704,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":22,"product_id":100007101,"comment_content":"课后题：ip地址对于我们机器来说不是固定的，可能会设置为动态分配。而mac地址对于机器来说，每台机器就对应唯一一个。","like_count":0},{"had_liked":false,"id":292700,"user_name":"～","can_delete":false,"product_type":"c1","uid":1494270,"ip_address":"","ucode":"BF9A5925C978C4","user_header":"https://static001.geekbang.org/account/avatar/00/16/cc/fe/702cf7bf.jpg","comment_is_top":false,"comment_ctime":1620931116,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":23,"product_id":100007101,"comment_content":"刘老师，请问下外网数据包响应到目标IP路由器时，如何找到内网主机进程端口号？客户端把数据包发送到一个公网IP，先经过本地网关然后再到目标网关，然后抵达服务器进程，然后响应数据包，这个时候响应的目标IP是一个公网地址(就是发送请求的源IP)，到了这里数据包怎么找到客户端IP的？备注:因为我们服务器拿到源IP不是客户端的内网IP是网关的出口IP，所以才有这个疑问","like_count":0,"discussions":[{"author":{"id":1494270,"avatar":"https://static001.geekbang.org/account/avatar/00/16/cc/fe/702cf7bf.jpg","nickname":"～","note":"","ucode":"BF9A5925C978C4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374275,"discussion_content":"我搞清楚了，中间有nat转换","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621091070,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":291636,"user_name":"写意","can_delete":false,"product_type":"c1","uid":1520582,"ip_address":"","ucode":"9F535A044FFEBB","user_header":"https://static001.geekbang.org/account/avatar/00/17/33/c6/f073c434.jpg","comment_is_top":false,"comment_ctime":1620395155,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":23,"product_id":100007101,"comment_content":"ip地址时动态变化的，mac地址是唯一地址。","like_count":0},{"had_liked":false,"id":290947,"user_name":"斯文先生","can_delete":false,"product_type":"c1","uid":2447976,"ip_address":"","ucode":"0547A3657C99A1","user_header":"https://static001.geekbang.org/account/avatar/00/25/5a/68/2d161fe0.jpg","comment_is_top":false,"comment_ctime":1619871938,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":23,"product_id":100007101,"comment_content":"老师讲的很好，听得很过瘾。我来说说自己的想法。首先，MAC地址不只是每一个主机的唯一标识，也是路由器，交换机之类的设备的标识，所以想通过网络达到最终目的地，mac地址是必须的。其次，ip只是在一个局域网中，比如以太网，令牌环网这种局域网中不会重复，可不是在世界所有主机中不会重复，事实上ip v4已经不够用了，所以才有ip6这样的进化协议出现。打个比方mac地址就像身份证号，而ip就像你的名字，身份证号是绝对不会重复的，但是你名字也许在全国会有很多。所以，只有mac+ip才能保证一个数据块能找到归处。\n         一点小小看法，有不对的请给位大佬指正，多谢多谢😀","like_count":0},{"had_liked":false,"id":290304,"user_name":"泥沼","can_delete":false,"product_type":"c1","uid":1653309,"ip_address":"","ucode":"87DCAF762C9576","user_header":"https://static001.geekbang.org/account/avatar/00/19/3a/3d/086893ae.jpg","comment_is_top":false,"comment_ctime":1619492558,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":23,"product_id":100007101,"comment_content":"当网络包通过路由表知道下一网关ip地址hoist，为什么不通过ip地址寻找，而通过mac地址呢？我的理解是:因为网络包是通过目标ip地址来确定收货人，如果通过网关中转时修改了目标ip地址，那到了下一网关后，此路由器就不知道接收的包发往何处。而通过mac地址传输就没有这个弊端了，通过ip地址确定路径，再通过mac地址来传输。此时此刻，有一句话不吐不快:不忘初心，方得始终❤️。发明这些协议的前辈们，太🐮了","like_count":0},{"had_liked":false,"id":286166,"user_name":"杯莫停","can_delete":false,"product_type":"c1","uid":1759325,"ip_address":"","ucode":"4FA1D5CBBEF702","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d8/5d/07dfb3b5.jpg","comment_is_top":false,"comment_ctime":1617174568,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":23,"product_id":100007101,"comment_content":"网关和路由器区别在于：\n通过网关连接的是不同的网络，比如私网局域网与互联网的连接需要经过网关，它是另一种网络的入口。\n通过路由器连接的是相似的网络，比如出于不同网段的PC和Phone本身没有路由寻址的功能，此时就需要路由器来寻找对方。\n不知道说的对不对请指正。","like_count":0},{"had_liked":false,"id":284794,"user_name":"Geek_44c356","can_delete":false,"product_type":"c1","uid":2535683,"ip_address":"","ucode":"5F37DDAE24B300","user_header":"","comment_is_top":false,"comment_ctime":1616475721,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":23,"product_id":100007101,"comment_content":"老师我有个想法，需要你纠正一下。如果DNS是找到对应的IP地址，然后又根据IP地址又找到MAC地址，那能不能直接使用DNS映射出MAC地址，把IP层给砍掉。","like_count":0},{"had_liked":false,"id":283510,"user_name":"涨姿势","can_delete":false,"product_type":"c1","uid":1928814,"ip_address":"","ucode":"707F9539162508","user_header":"","comment_is_top":false,"comment_ctime":1615801437,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":23,"product_id":100007101,"comment_content":"我的理解是：ip协议是网络层协议，而mac地址计算机网络的底层物理地址，只知道ip是无法在物理链路层进行寻址传输的，需要有mac地址的支持才行。","like_count":0},{"had_liked":false,"id":282152,"user_name":"Matthew","can_delete":false,"product_type":"c1","uid":2232087,"ip_address":"","ucode":"87ED4D4EC704D3","user_header":"https://static001.geekbang.org/account/avatar/00/22/0f/17/14c30983.jpg","comment_is_top":false,"comment_ctime":1615108715,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":23,"product_id":100007101,"comment_content":"Mac地址用于路由之间的跳转，每次跳转destination 的mac地址都会修改为下一路由的MAC","like_count":0},{"had_liked":false,"id":280760,"user_name":"Reina","can_delete":false,"product_type":"c1","uid":1367221,"ip_address":"","ucode":"AFF6C03FF07F4F","user_header":"https://static001.geekbang.org/account/avatar/00/14/dc/b5/7fd5f418.jpg","comment_is_top":false,"comment_ctime":1614350012,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":23,"product_id":100007101,"comment_content":"Mac是物理设备唯一的编号，链路层physical的.IP是网上虚拟出的一层，网络层的动态分配的地址是logical的","like_count":0},{"had_liked":false,"id":278249,"user_name":"Geek_969f3f","can_delete":false,"product_type":"c1","uid":2437851,"ip_address":"","ucode":"6366669F8C0BDF","user_header":"","comment_is_top":false,"comment_ctime":1612845438,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":23,"product_id":100007101,"comment_content":"“在这一层里，对于收到的每个包，都会有一个回复的包说明收到了。这个回复的包绝非这次下单请求的结果，例如购物是否成功，扣了多少钱等，而仅仅是 TCP 层的一个说明，即收到之后的回复。当然这个回复，会沿着刚才来的方向走回去，报个平安。”这里的表述虽然很有趣味，但是表意非常模糊。比如，原路返回，是返回给谁？在图表中显示的是返还给电商服务器的MAC层，但文中的表述似乎是说返还给用户服务器？另外，“收到的每个包”，是否在单次传输过程中，除了文中讲到的封装TCP协议的IP头，还有别的包？非常感谢您的解答！","like_count":0},{"had_liked":false,"id":271973,"user_name":"。","can_delete":false,"product_type":"c1","uid":2405403,"ip_address":"","ucode":"6A92F3375D366B","user_header":"https://static001.geekbang.org/account/avatar/00/24/b4/1b/a95db146.jpg","comment_is_top":false,"comment_ctime":1609899602,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":24,"product_id":100007101,"comment_content":"Ip地址可变 mac不可变(一般情况下) 所以常用ip地址路由 mac地址确认身份","like_count":0},{"had_liked":false,"id":271679,"user_name":"H","can_delete":false,"product_type":"c1","uid":1793962,"ip_address":"","ucode":"04D7D030245E27","user_header":"https://static001.geekbang.org/account/avatar/00/1b/5f/aa/63e641c1.jpg","comment_is_top":false,"comment_ctime":1609754326,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":24,"product_id":100007101,"comment_content":"对于问题：当网络包到达一个城关的时候，可以通过路由表得到下一个城关的 IP 地址，直接通过 IP 地址找就可以了，为什么还要通过本地的 MAC 地址呢？\n我的回答是这个，正确吗？\nD：链路层的目标mac地址栏，在寻找目标ip时，切换不同的路由，目标mac地址，会不断切换","like_count":0},{"had_liked":false,"id":270461,"user_name":"JDl","can_delete":false,"product_type":"c1","uid":2391866,"ip_address":"","ucode":"B1FE9C2F304AE0","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/xkcmhUlSNcmkDIUIGVwjK4WyI7ldM2Y3rWIDzpIwXV6bKibJgicsS5hVvVia90Oia1rVhibfpxbZ0nM1KVYFqaiaMlhg/132","comment_is_top":false,"comment_ctime":1609137633,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":24,"product_id":100007101,"comment_content":"数据包发出去后ip是固定的，只记录着最终的目的地，数据包每到达一个中转站都会更新mac地址，依靠mac地址来确定具体的走向。简单说就是，ip决定目的地，所有的mac地址构成转发路径。","like_count":0},{"had_liked":false,"id":265964,"user_name":"Geek_db37b3","can_delete":false,"product_type":"c1","uid":2344273,"ip_address":"","ucode":"A9F61199FB3D92","user_header":"","comment_is_top":false,"comment_ctime":1607079229,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":24,"product_id":100007101,"comment_content":"突然想到一个问题：如果取消了MAC地址，采用ipv6（ip够用的话），路由表仍采用分层的思想，那么可行吗？求解答，谢谢。","like_count":0},{"had_liked":false,"id":265890,"user_name":"beiliu","can_delete":false,"product_type":"c1","uid":1292128,"ip_address":"","ucode":"06E1EC1244A52B","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLmBgic9UlGySyG377pCVzNnbgsGttrKTCFztunJlBTDS32oTyHsJjAFJJsYJyhk9cNE5OZeGKWJ6Q/132","comment_is_top":false,"comment_ctime":1607062728,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":24,"product_id":100007101,"comment_content":"地址需要有唯一性和层次性，MAC地址提供了唯一性，IP地址提供了层次性。","like_count":0},{"had_liked":false,"id":264845,"user_name":"marquis","can_delete":false,"product_type":"c1","uid":1084392,"ip_address":"","ucode":"05DA7B5ADF7C53","user_header":"https://static001.geekbang.org/account/avatar/00/10/8b/e8/c1bd68fe.jpg","comment_is_top":false,"comment_ctime":1606670968,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":24,"product_id":100007101,"comment_content":"对于老师提出来的“为啥有IP还要有MAC地址”这个问题，我还是不太明白，特别是看了比喻之后更加困惑：很多提到，IP地址类似住址，MAC地址类似身份证。那我们在提出请求后，获得的是一个IP地址（所谓的住址），但是整个封装下来，也没有说我们要的MAC地址就是确定的某值。且，在最后的网关面前，这个MAC地址，也是目标IP自己丢出来给我们的MAC，那怎么确定这个MAC就是我们想要的？如果确认不了，那它存在的意义又是啥嘞？希望得到刘老师解惑，谢谢~","like_count":0},{"had_liked":false,"id":264840,"user_name":"marquis","can_delete":false,"product_type":"c1","uid":1084392,"ip_address":"","ucode":"05DA7B5ADF7C53","user_header":"https://static001.geekbang.org/account/avatar/00/10/8b/e8/c1bd68fe.jpg","comment_is_top":false,"comment_ctime":1606666657,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":24,"product_id":100007101,"comment_content":"感动，谢谢刘老师！寻寻觅觅一直想要这样系统讲述的内容终于在这找到宝藏了！","like_count":0},{"had_liked":false,"id":259822,"user_name":"window0006","can_delete":false,"product_type":"c1","uid":1154178,"ip_address":"","ucode":"B2BFBCD2E3F5B1","user_header":"https://static001.geekbang.org/account/avatar/00/11/9c/82/27527c00.jpg","comment_is_top":false,"comment_ctime":1604846856,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":24,"product_id":100007101,"comment_content":"看上面的图，IP层会记录当前IP以留给目标机器回包用，但是如果记录的是私网地址，目标机器如何根据这个IP回包呢？","like_count":0},{"had_liked":false,"id":258756,"user_name":"15619123802","can_delete":false,"product_type":"c1","uid":2280660,"ip_address":"","ucode":"3060C113234AD6","user_header":"","comment_is_top":false,"comment_ctime":1604549525,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":24,"product_id":100007101,"comment_content":"讲的太好了，很多以前模糊的地方豁然开朗。","like_count":0},{"had_liked":false,"id":256976,"user_name":"Geek_embeded","can_delete":false,"product_type":"c1","uid":1764854,"ip_address":"","ucode":"1ABFAA34E983F5","user_header":"https://static001.geekbang.org/account/avatar/00/1a/ed/f6/4a083c7e.jpg","comment_is_top":false,"comment_ctime":1603802191,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":24,"product_id":100007101,"comment_content":"取西经的方式来举例真的太秀了！","like_count":0},{"had_liked":false,"id":254524,"user_name":"蚝不鱿鱼","can_delete":false,"product_type":"c1","uid":1428043,"ip_address":"","ucode":"5DB98E406F1D3E","user_header":"https://static001.geekbang.org/account/avatar/00/15/ca/4b/c1ace3aa.jpg","comment_is_top":false,"comment_ctime":1603122651,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":25,"product_id":100007101,"comment_content":"基础不牢，地动山摇，我来还自己欠下的债","like_count":0},{"had_liked":false,"id":252330,"user_name":"qo","can_delete":false,"product_type":"c1","uid":2223117,"ip_address":"","ucode":"0014847FA5E301","user_header":"","comment_is_top":false,"comment_ctime":1602240189,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":25,"product_id":100007101,"comment_content":"ip地址是可以改变的，而mac地址一般来说是全球唯一的","like_count":0},{"had_liked":false,"id":252241,"user_name":"杨","can_delete":false,"product_type":"c1","uid":1971269,"ip_address":"","ucode":"7EFEFE285975C6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/oltLEqTrmHm2aJP99BK6tHu5h7hp4aj08wR5Wt6H31iadFduDAVvjYKmhQ2nvGbLV3lkVdiat2GRasgWXoJeTibUg/132","comment_is_top":false,"comment_ctime":1602210821,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":25,"product_id":100007101,"comment_content":"我是半路做go开发的，这节课我学了半个小时，并且认真看了前两条留言，学到了很多，现在对一个https请求的过程有了一定的理解，期待后面的课程","like_count":0},{"had_liked":false,"id":251269,"user_name":"piboye","can_delete":false,"product_type":"c1","uid":1066752,"ip_address":"","ucode":"7CFD8712857A85","user_header":"https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg","comment_is_top":false,"comment_ctime":1601445390,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":25,"product_id":100007101,"comment_content":"mac只是链路层的一种最主流的协议","like_count":0},{"had_liked":false,"id":251268,"user_name":"piboye","can_delete":false,"product_type":"c1","uid":1066752,"ip_address":"","ucode":"7CFD8712857A85","user_header":"https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg","comment_is_top":false,"comment_ctime":1601445308,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":25,"product_id":100007101,"comment_content":"mac层是链路层，他本来出现的也更早，只用ip层的硬件也可以造出来，但是历史原因，你不能让周边的人都换设备，而且设备也是工业生态的，新的设备成本也更高。","like_count":0},{"had_liked":false,"id":250285,"user_name":"静心","can_delete":false,"product_type":"c1","uid":1335457,"ip_address":"","ucode":"EB264FA6519FDA","user_header":"https://static001.geekbang.org/account/avatar/00/14/60/a1/45ffdca3.jpg","comment_is_top":false,"comment_ctime":1601010384,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":25,"product_id":100007101,"comment_content":"故事讲的真好，要是基于这个讲稿做个动画片，绝对精彩","like_count":0},{"had_liked":false,"id":247230,"user_name":"King-ZJ","can_delete":false,"product_type":"c1","uid":1915385,"ip_address":"","ucode":"7448A4BBB5A118","user_header":"https://static001.geekbang.org/account/avatar/00/1d/39/f9/b2fe7b63.jpg","comment_is_top":false,"comment_ctime":1599637651,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":25,"product_id":100007101,"comment_content":"看下来觉得懂，自己还是要手动梳理一下作者的思路，让自己也思路变得清晰和深刻。","like_count":0},{"had_liked":false,"id":243735,"user_name":"ripple","can_delete":false,"product_type":"c1","uid":1090051,"ip_address":"","ucode":"99008FD0533F68","user_header":"https://wx.qlogo.cn/mmopen/vi_32/ywSuwVNMKNjRLPMjZmpQOQHWW2usAu8RwRIOlBHaVVU6J3xHdtibgO6FVzYkRIkV50vCr62ia4OwJp07giabiazUGA/132","comment_is_top":false,"comment_ctime":1598260423,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":25,"product_id":100007101,"comment_content":"老师，请教个问题，譬如使用websocket进行通信，如果要和自己的服务器进行wss加密的通信，那么客户端需要传入服务器的证书路径么？如果不需要，那么客户端如何加密数据呢？如果需要，为什么在android，ios等平台上，进行加密通信，从来没有在本地配置过相关的公钥，证书等。","like_count":0},{"had_liked":false,"id":243575,"user_name":"赖赖","can_delete":false,"product_type":"c1","uid":1322888,"ip_address":"","ucode":"12E53CD11AAA03","user_header":"https://static001.geekbang.org/account/avatar/00/14/2f/88/c04bedc9.jpg","comment_is_top":false,"comment_ctime":1598192418,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":25,"product_id":100007101,"comment_content":"开始学习第二遍，希望有不一样的收获，2020-08-23，加油！","like_count":0},{"had_liked":false,"id":242459,"user_name":"郑祖煌","can_delete":false,"product_type":"c1","uid":1469608,"ip_address":"","ucode":"49A0D2E3279826","user_header":"https://static001.geekbang.org/account/avatar/00/16/6c/a8/1922a0f5.jpg","comment_is_top":false,"comment_ctime":1597734579,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":25,"product_id":100007101,"comment_content":"因为IP地址不是唯一的，而且IP地址可以设置成动态IP，随时分配。而MAC地址是厂家制造网卡时候写入的。是全世界都唯一的。所以mac地址具有唯一标识性。","like_count":0},{"had_liked":false,"id":238956,"user_name":"羽蝶曲","can_delete":false,"product_type":"c1","uid":1337216,"ip_address":"","ucode":"FEA9FB7F321874","user_header":"https://static001.geekbang.org/account/avatar/00/14/67/80/dae518d2.jpg","comment_is_top":false,"comment_ctime":1596380987,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":26,"product_id":100007101,"comment_content":"通过IP来做路由表对比，确定下个城关是那个，而下个路由的mac则是真实要去的位置，所以城关之前的内部还是需要确定mac，因为只有mac才是真实的位置。好比你从杭州到上海，我知道ip是上海，但是上海太大了，我需要确定走那个高速收费站（路由的mac）","like_count":0},{"had_liked":false,"id":238264,"user_name":"麦克华斯基","can_delete":false,"product_type":"c1","uid":1114940,"ip_address":"","ucode":"EBFF326FC86509","user_header":"https://static001.geekbang.org/account/avatar/00/11/03/3c/fc43b1af.jpg","comment_is_top":false,"comment_ctime":1596105726,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":26,"product_id":100007101,"comment_content":"讲网络协议，也不告知几层协议，一脸懵，到最后总结了才罗列出来，顺序能否调整一下。另外，名词也缺少必要的解释，要是这些词实际含义都明白，基本上也不用听这个课程了，就是不清楚才需要听课的，否则一头雾水，学习效果也不会好。","like_count":0},{"had_liked":false,"id":234150,"user_name":"ISA007","can_delete":false,"product_type":"c1","uid":1103374,"ip_address":"","ucode":"232AA4463EA357","user_header":"https://static001.geekbang.org/account/avatar/00/10/d6/0e/711721c3.jpg","comment_is_top":false,"comment_ctime":1594605123,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":26,"product_id":100007101,"comment_content":"“TCP 协议里面会有两个端口，一个是浏览器监听的端口，一个是电商的服务器监听的端口。操作系统往往通过端口来判断，它得到的包应该给哪个进程。”，为什么是两个端口呢？两个端口的作用分别是什么？这两个端口需要一一对应么？","like_count":0},{"had_liked":false,"id":233947,"user_name":"东风","can_delete":false,"product_type":"c1","uid":1083454,"ip_address":"","ucode":"EB0214A64B28E6","user_header":"https://static001.geekbang.org/account/avatar/00/10/88/3e/5a91d9f3.jpg","comment_is_top":false,"comment_ctime":1594527243,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":26,"product_id":100007101,"comment_content":"都是程序员，解释问题能不能别打比喻？简单的问题搞得很复杂","like_count":0},{"had_liked":false,"id":232495,"user_name":"Geek_wadehao","can_delete":false,"product_type":"c1","uid":1918225,"ip_address":"","ucode":"F46FFAFC4933D6","user_header":"https://static001.geekbang.org/account/avatar/00/1d/45/11/51aaa953.jpg","comment_is_top":false,"comment_ctime":1594018973,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":26,"product_id":100007101,"comment_content":"而为什么要用路由器连接更多的的子网subnet呢？当然，这就是网络的根本作用了，即连接更多的设备(机器在子网中，连子网就是连设备)，覆盖更广的距离。","like_count":0},{"had_liked":false,"id":227576,"user_name":"卡尔","can_delete":false,"product_type":"c1","uid":1445936,"ip_address":"","ucode":"BD6F76BC18FF8F","user_header":"https://static001.geekbang.org/account/avatar/00/16/10/30/c07d419c.jpg","comment_is_top":false,"comment_ctime":1592435417,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":26,"product_id":100007101,"comment_content":"老师，一个局域网不只一个城关是吗？第二个问题，如果下单的包正常到达服务器，只是回复的包丢了，那客户端还重复发送下单的包吗？如果重复发送，是不是说服务端会收到多份下单的包，这样不会重复下单吗","like_count":0},{"had_liked":false,"id":227575,"user_name":"卡尔","can_delete":false,"product_type":"c1","uid":1445936,"ip_address":"","ucode":"BD6F76BC18FF8F","user_header":"https://static001.geekbang.org/account/avatar/00/16/10/30/c07d419c.jpg","comment_is_top":false,"comment_ctime":1592435062,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":26,"product_id":100007101,"comment_content":"城关与城关之间是一个国家，当网络包知道了下一步去哪个城关，还是要使用国家内部的 MAC 地址，通过下一个城关的 MAC 地址，找到下一个城关，然后再问下一步的路怎么走，一直到走出最后一个城关。\n这里不是通过ip走到下一个遥远的城关吗？MAC也能在局域网以外使用吗","like_count":0},{"had_liked":false,"id":217803,"user_name":"D调很BLUE","can_delete":false,"product_type":"c1","uid":1382301,"ip_address":"","ucode":"BD0AD19830C22C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK4sicib3krrUs2iaLQGlj68SOfsobJoSlMUbS8zJYzlDqkahKIpibJGVjiaQdBjdx74IXEbflq1F3ZbJA/132","comment_is_top":false,"comment_ctime":1589616469,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":26,"product_id":100007101,"comment_content":"因为在局域网内部，需要MAC地址进行通信","like_count":0},{"had_liked":false,"id":215655,"user_name":"小菜鸟学php","can_delete":false,"product_type":"c1","uid":1683755,"ip_address":"","ucode":"C417C76E18B062","user_header":"https://static001.geekbang.org/account/avatar/00/19/b1/2b/9406d19a.jpg","comment_is_top":false,"comment_ctime":1589059708,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":26,"product_id":100007101,"comment_content":"加入组织，加油！","like_count":0},{"had_liked":false,"id":214946,"user_name":"谭倩倩_巴扎黑","can_delete":false,"product_type":"c1","uid":1119207,"ip_address":"","ucode":"18DD717AD2BE9E","user_header":"https://static001.geekbang.org/account/avatar/00/11/13/e7/6e75012c.jpg","comment_is_top":false,"comment_ctime":1588855046,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":26,"product_id":100007101,"comment_content":"作者大大我有个问题，浏览器访问服务器时，只知道公网ip，那到路由器的时候，怎么就知道发送到具体哪台服务器呢？貌似没有那台服务器的mac地址？","like_count":0},{"had_liked":false,"id":214334,"user_name":"王丰","can_delete":false,"product_type":"c1","uid":1084423,"ip_address":"","ucode":"E4A668D873A32A","user_header":"https://static001.geekbang.org/account/avatar/00/10/8c/07/b4ea8f10.jpg","comment_is_top":false,"comment_ctime":1588726120,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":27,"product_id":100007101,"comment_content":"Mac地址是唯一的身份标识","like_count":0},{"had_liked":false,"id":210534,"user_name":"意无尽","can_delete":false,"product_type":"c1","uid":1234489,"ip_address":"","ucode":"DA179626C46B81","user_header":"https://static001.geekbang.org/account/avatar/00/12/d6/39/6b45878d.jpg","comment_is_top":false,"comment_ctime":1587785010,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":27,"product_id":100007101,"comment_content":"非科班的，计算机网络知识点一直没有搞明白过，这次在家待了几个月的时间，学完了极客时间的几个专栏，自己慢慢养成了看极客时间专栏的习惯，每天都要打开看看，才发现原来自己在家也能够静下来好好学习！\n\n小结一下吧：\n\n1) 最顶层的是应用层，协议包括 DNS，HTTP，HTTPS 等协议。一般 HTTP 头会包括 POST，URL，正文等内容。浏览器将应用层的包交给下一层处理是通过 socket 编程来实现的。\n\n2) 传输层，包括 TCP，UDP 等协议。TCP 协议是一种面向连接的协议，所以这个协议就会让包一定达到目的地，如果不行就会不断重新发送。UDP 是一种无连接的协议，不能保证一定能送达。这一层主要是包括发送地与目的地的端口号。\n\n3) 网络层，主要是 IP 协议，路由协议 (主要是 OSPF，BGP)。包括客户端和服务端的 IP 地址。而要找到对方的 IP 地址，一般要通过网关去寻找 (网关往往是路由器，路由器连接着两个不同的“国家”，在同一个“国家”内部是通过 MAC 进行通信)，一旦跨过“国家”，就得拿出 IP 头来进行确认，不是则接着进行传输。因为相临近的“国家”是互相沟通的，到哪了需要怎么走，而这种沟通的协议就是路由协议。一直找到最后一个“国家”。\n\n4) 链路层，有ARP 协议。找到最后一个“国家”后，网关就会通过 ARP 协议确定是否是目标的 IP 地址，目标服务器就会回复一个 MAC 地址，通过这个 MAC 地址就能到到目标服务器。然后操作系统将包发给网络层匹配 IP 地址，再发给传输层，在进一步往下，得知要干什么。。。\n\n5) 最后，Tomcat 类似于接待员，不会做所有的事情，而是统筹处理相关的请求。例如，这个接待员要告诉专门管理订单的进程，登记要买某个商品，买多少，要告诉管理库存的进程，库存要减少多少，要告诉支付的进程，应该付多少钱，等等。","like_count":0},{"had_liked":false,"id":210186,"user_name":"大帅","can_delete":false,"product_type":"c1","uid":1880872,"ip_address":"","ucode":"561FE99296E7AE","user_header":"https://static001.geekbang.org/account/avatar/00/1c/b3/28/316341ff.jpg","comment_is_top":false,"comment_ctime":1587695494,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":27,"product_id":100007101,"comment_content":"不同网络（局域网）的mac地址可以相同吗？我的理解是经过网关后mac地址并不会冲突了，不同网络是可以用同一个mac地址的","like_count":0},{"had_liked":false,"id":205214,"user_name":"Geek_代同学","can_delete":false,"product_type":"c1","uid":1898689,"ip_address":"","ucode":"99C26DCAB16E8D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLUvjibzVW2YRghtgxaFPTAMHJMdLGsekwHLGYPyAjx2VTiaicjQMuedojuogED3UleRczovhMibro1xg/132","comment_is_top":false,"comment_ctime":1586572108,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":27,"product_id":100007101,"comment_content":"个人理解，mac地址具有唯一性，就像身份证手机号，ip地址只是地址门牌号，但门牌号是可以重复的，你找到他住的地方，但是不代表你和他建立了联系，陌生人见面都是手机号确认或者看身份证，贵重物品快递到了后要查看本人身份证就是这个道理","like_count":0},{"had_liked":false,"id":198674,"user_name":"这得从我捡到一个鼠标垫开始说起","can_delete":false,"product_type":"c1","uid":1272321,"ip_address":"","ucode":"2FF4347B4E7A9B","user_header":"https://static001.geekbang.org/account/avatar/00/13/6a/01/d9cb531d.jpg","comment_is_top":false,"comment_ctime":1585463422,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":27,"product_id":100007101,"comment_content":"通过ip地址地址找到目标的所在地，通过mac确认发起请求的人","like_count":0},{"had_liked":false,"id":198543,"user_name":"瞭望塔","can_delete":false,"product_type":"c1","uid":1058063,"ip_address":"","ucode":"D9747975B16E2D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqI8ZIibPxzp0MjydjvFoFhQMkUT9NhrxvBHDIQviaP7cKw1icosibLYBUVpYdQImzictqjccLlibSFJnMw/132","comment_is_top":false,"comment_ctime":1585455988,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":27,"product_id":100007101,"comment_content":"1.我个人认为MAC地址就是身份证，一出生就有，证明自己身份的。IP地址就是门牌号，通过门牌号去找到拥有这个身份证的我。如果单单只通过我的身份证不知道我门牌号到处去找我就很困难了。如果我不住在这里了，换了个房子就会有新的门牌号。也可以通过新的门牌号找到拥有这个身份证的我。\n2.ip就犹如我的住址。\n3.路由表就犹如我的地图。\n4.中间所经过的那些设备就犹如交通工具。\n5.数据的通信过程就犹如人旅行一样。","like_count":0},{"had_liked":false,"id":197209,"user_name":"渐入佳境","can_delete":false,"product_type":"c1","uid":1666737,"ip_address":"","ucode":"F56E203FE0D6B1","user_header":"https://static001.geekbang.org/account/avatar/00/19/6e/b1/4fb7e6d6.jpg","comment_is_top":false,"comment_ctime":1585363333,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":27,"product_id":100007101,"comment_content":"跟着老师重新捡起网络协议","like_count":0},{"had_liked":false,"id":195005,"user_name":"冰湖","can_delete":false,"product_type":"c1","uid":1324994,"ip_address":"","ucode":"0435098A3C789A","user_header":"https://static001.geekbang.org/account/avatar/00/14/37/c2/834c4b8c.jpg","comment_is_top":false,"comment_ctime":1585127328,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":27,"product_id":100007101,"comment_content":"有个疑问，比如客户端a一开始在浏览器里输入服务器b的ip网址，此时，a是知道b的ip地址的，但不知道b的mac地址。那么，如果这个网络包要传给b，是不是意味着，b的IP地址是独享的，而不是说，这个ip代表着一个局域网？","like_count":0},{"had_liked":false,"id":191425,"user_name":"宋健","can_delete":false,"product_type":"c1","uid":1283082,"ip_address":"","ucode":"7DD1CAB40440C3","user_header":"https://static001.geekbang.org/account/avatar/00/13/94/0a/7f7c9b25.jpg","comment_is_top":false,"comment_ctime":1584772243,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":27,"product_id":100007101,"comment_content":"很不错啊n","like_count":0},{"had_liked":false,"id":191424,"user_name":"宋健","can_delete":false,"product_type":"c1","uid":1283082,"ip_address":"","ucode":"7DD1CAB40440C3","user_header":"https://static001.geekbang.org/account/avatar/00/13/94/0a/7f7c9b25.jpg","comment_is_top":false,"comment_ctime":1584772236,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":27,"product_id":100007101,"comment_content":"收获很大","like_count":0},{"had_liked":false,"id":191395,"user_name":"Jun Ma","can_delete":false,"product_type":"c1","uid":1374957,"ip_address":"","ucode":"0C5E2AB51E6A83","user_header":"https://static001.geekbang.org/account/avatar/00/14/fa/ed/0742b854.jpg","comment_is_top":false,"comment_ctime":1584769987,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":28,"product_id":100007101,"comment_content":"有一个疑问。如果当前局域网我的机器分配到的IP是192.168.10.10，我要访问的目标机器的在他的局域网里分配到的IP也是192.168.10.10。。。这怎么办？  目标机器的IP值究竟是多少？这跟国家IP是什么关系","like_count":0},{"had_liked":false,"id":190313,"user_name":"King-ZJ","can_delete":false,"product_type":"c1","uid":1915385,"ip_address":"","ucode":"7448A4BBB5A118","user_header":"https://static001.geekbang.org/account/avatar/00/1d/39/f9/b2fe7b63.jpg","comment_is_top":false,"comment_ctime":1584628555,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":28,"product_id":100007101,"comment_content":"网络协议的学习确实刚刚在接触的时候，需要一个框架来搭建你学习的路径，即有树根、树干和树枝，之后通过碎片化的学习（树叶）来达到枝繁叶茂。文中通过一个网购页面呈现的事情来展现网络协议这个框架是怎么运作的，还是比较生动的，比很多大学老师生硬地照本宣科强太多了，真的是当你把一样东西理解的够通透了后，外行人都知道你在讲什么。回答问题：知道了IP，为啥还需要MAC？还得回到网络协议框架，在数据包封装时，在网络层之下还有数据链路层（MAC层），需要MAC去进行帧的封装。","like_count":0},{"had_liked":false,"id":189096,"user_name":"chenzesam","can_delete":false,"product_type":"c1","uid":1045011,"ip_address":"","ucode":"34E76BB9C7618D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f2/13/3ee5a9b4.jpg","comment_is_top":false,"comment_ctime":1584455272,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":28,"product_id":100007101,"comment_content":"有趣","like_count":0},{"had_liked":false,"id":187565,"user_name":"Zeal","can_delete":false,"product_type":"c1","uid":1898857,"ip_address":"","ucode":"327D516A1D0F0E","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f9/69/384e33e6.jpg","comment_is_top":false,"comment_ctime":1584158533,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":28,"product_id":100007101,"comment_content":"ip与mac = 居住地址与身份证号码","like_count":0},{"had_liked":false,"id":185846,"user_name":"Coder","can_delete":false,"product_type":"c1","uid":1251224,"ip_address":"","ucode":"70A8F12B864E4D","user_header":"https://static001.geekbang.org/account/avatar/00/13/17/98/5386341d.jpg","comment_is_top":false,"comment_ctime":1583711728,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":28,"product_id":100007101,"comment_content":"路由表里，为什么不同时写上下一跳的网关的IP和他的静态MAC地址 ？这样可以省去一次ARP广播，也可以防止ARP欺骗。","like_count":0},{"had_liked":false,"id":184214,"user_name":"程序员俊达","can_delete":false,"product_type":"c1","uid":1107484,"ip_address":"","ucode":"2573037D7C82C8","user_header":"https://static001.geekbang.org/account/avatar/00/10/e6/1c/9d3744ee.jpg","comment_is_top":false,"comment_ctime":1583248121,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":28,"product_id":100007101,"comment_content":"1. MAC 地址是唯一的，每一个网卡都有自己的 MAC 地址。\n2.我认为设计者的初衷就是每个机器都有唯一的MAC地址，是可以通过MAC地址进行访问的，但是随着机器越来越多，访问起来肯定就慢了。就像数据库为什么有索引一样。所以就出现了ip。","like_count":0},{"had_liked":false,"id":179507,"user_name":"Geek_16654","can_delete":false,"product_type":"c1","uid":1876219,"ip_address":"","ucode":"946732D76ED3CF","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/UA5SKtlyH7w6lQAlqERrsrDsltF8Vk8UN0e4bTuq0Preaf9fJN0FWibC8f4pv0SiauJ1lNibY0du8tt70Uh3CkRlA/132","comment_is_top":false,"comment_ctime":1582017240,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":28,"product_id":100007101,"comment_content":"城关与城关之间用mac地址标示相互的位置，各个城关之间处于局域网关系","like_count":0},{"had_liked":false,"id":177610,"user_name":"dellyoung","can_delete":false,"product_type":"c1","uid":1133028,"ip_address":"","ucode":"3672FF1D1F8EFD","user_header":"https://static001.geekbang.org/account/avatar/00/11/49/e4/fb47bfcd.jpg","comment_is_top":false,"comment_ctime":1581433501,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":28,"product_id":100007101,"comment_content":"mac地址相当于是出生地，而ip地址相当于是现居住地","like_count":0},{"had_liked":false,"id":176781,"user_name":"Jin","can_delete":false,"product_type":"c1","uid":1814682,"ip_address":"","ucode":"6E2711D4F69D25","user_header":"https://static001.geekbang.org/account/avatar/00/1b/b0/9a/a58aeb1a.jpg","comment_is_top":false,"comment_ctime":1581165408,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":28,"product_id":100007101,"comment_content":"IP地址是三层，要送上物理链路传输，还需要经过二层，也就是需要目的MAC地址，来完成二层报文的封装，并且有可能目的IP需要多个设备转发后才能到达目的IP对应的网关，简单总结一下就是：目的IP是保持不变的，而目的MAC地址一路会发生变化，永远指向直接下一个设备的MAC地址","like_count":0},{"had_liked":false,"id":176778,"user_name":"Gospel","can_delete":false,"product_type":"c1","uid":1257546,"ip_address":"","ucode":"C399412DF3FFE1","user_header":"https://static001.geekbang.org/account/avatar/00/13/30/4a/8be4b8d3.jpg","comment_is_top":false,"comment_ctime":1581165008,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":28,"product_id":100007101,"comment_content":"写的真好，之前学了网络，文章每个词都认识。也能说出一些概念。但是头一次串联起来所有的知识，感觉获得了新的理解。","like_count":0},{"had_liked":false,"id":171804,"user_name":"咕咕咕","can_delete":false,"product_type":"c1","uid":1319375,"ip_address":"","ucode":"E939C1FD951235","user_header":"https://static001.geekbang.org/account/avatar/00/14/21/cf/f47e092d.jpg","comment_is_top":false,"comment_ctime":1579015358,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":29,"product_id":100007101,"comment_content":"打卡！个人理解其中一点原因是发包传输最终还是基于物理设备，所以需要MAC地址来确定物理设备的唯一性，进行身份识别，保证传输的目标是正确的；而IP是用来在逻辑层面上来定义通信双方的地址的，但是不能仅仅根据IP来进行定位。所以需要MAC地址+IP地址组合方式来进行传输寻址。个人感觉可以类比（who + where）来进行理解。","like_count":0},{"had_liked":false,"id":165779,"user_name":"绝望旅行家","can_delete":false,"product_type":"c1","uid":1281160,"ip_address":"","ucode":"4C30AFD8168411","user_header":"https://static001.geekbang.org/account/avatar/00/13/8c/88/5a018819.jpg","comment_is_top":false,"comment_ctime":1577321899,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":29,"product_id":100007101,"comment_content":"网络协议\n\n2019年12月25日\n21:28\n\n协议三要素\n\t1. 语法：这一段内容要符合一定的规则和格式\n\t2. 语义：代表某种意义\n\t3. 顺序：先干点啥，后干点啥\n\n\n通过网络协议，才能使一大片机器互相协作，共同完成一件事。\n\n浏览器输入URL后发生了什么\n\t1. 浏览器输入 URL 地址\n\t2. 根据地址簿协议DNS 查找对应IP，或者更精确的HTTPDNS 查找\n\t3. 找到公网IP 106.114.138.24\n\t4. 找到目标地址，浏览器开始打包请求，普通会使用HTTP 协议请求，涉及加密传输的用HTTPS 协议 （应用层）\n\t5. 经过应用层封装，浏览器会将应用层的包交给下一层（传输层）去完成，使用TCP 或者UPD协议\n\t6. 传输层封装完毕后，会交给操作系统的网络层(IP 协议，会有源IP和目标IP)。\n\t7. 操作系统知道了目标IP，会判断是局域网IP 还是公网IP\n\t\ta. 操作系统在启动时候会被DHCP 协议配置IP 地址\n\t\tb. 以及默认网关的IP地址192.168.1.1\n\t\tc. 然后通过ARP协议去找到网关的MAC 地址\n\t8. 找到了网关的MAC 地址后，操作系统就将IP 包交给下一层MAC 层，因为有MAC地址，所以会找到网关。\n\t9. 网关通常是一个路由器，通过路由表找到去某个IP地址怎么走。\n\t\ta. 路由表记录着网关内所有的MAC 地址，同一个网关下的系统可以通过MAC 地址进行通信（局域网）\n\t\tb. 网关也会经常沟通，沟通协议为路由协议，常用的OSPF和BGP\n\t10. 数据包通过一层一层的网关。。。\n\t11. 最后一个网关会通过ARP 协议去询问目标IP 的MAC地址\n\t12. 通过目标MAC 地址会找到目标服务器\n\t13. 之后一层一层解析\n\t14. 请求到达传输层TCP 协议，这时会回复一个数据包，这个数据包会说明目标地址收到数据（只是说明）\n\t15. TCP 层会有一个端口号，通过端口号去找到服务器的目标进程\n\t16. 目标进程的服务处理完后，会再发送一个应用层的HTTP数据包，回复源浏览器,\n\t该数据包会原路返回。\n\t\n\n\n\t\t\n传输层 Tcp 面向连接\n\t• TCP 会保证这个包能到达目的地，如果不能到达，就会重发，直到到达。\n\t• 协议里面会有两个端口，一个是浏览器监听的端口，另一个是服务器监听的端口，操作系统会通过端口判断，得到的包给哪个进程。\n\n\n网络数据包结构\nMac 头、IP头、Tcp头、Http头、数据体\n数据每传输一层加一个头\n\n网络五层模型\n应用层\t数据格式封装\tDNS，HTTP，HTTPS,RTMP,P2P,DNS,GTP,RPC\n传输层\t会话连接机制\tTCP：面向连接，UDP 面向无连接\n网络层\t路由\tIP 协议：会有源IP 和目标IP，ICMP,OSPF,BGP,IPSec,GRE\n链路层\t定位\tARP，VLAN,STP\n物理层\t连接\t网线，光纤，网络跳线\n","like_count":0},{"had_liked":false,"id":162295,"user_name":"仰望星空","can_delete":false,"product_type":"c1","uid":1149084,"ip_address":"","ucode":"A9E46C9FDB3275","user_header":"https://static001.geekbang.org/account/avatar/00/11/88/9c/cbc463e6.jpg","comment_is_top":false,"comment_ctime":1576493799,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":29,"product_id":100007101,"comment_content":"由于网络分层，想要将数据从一个网关传递给另一个网关，必须经过数据链路层，而该层需要使用到mac","like_count":0},{"had_liked":false,"id":156250,"user_name":"DFighting","can_delete":false,"product_type":"c1","uid":1233193,"ip_address":"","ucode":"F3BA2426FF8582","user_header":"https://static001.geekbang.org/account/avatar/00/12/d1/29/1b1234ed.jpg","comment_is_top":false,"comment_ctime":1574843130,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":29,"product_id":100007101,"comment_content":"借用评论区大牛的思想，mac地址是身份证id，IP是居住地地址，找人必须得IP+MAC，不然没法准确将报文送达","like_count":0},{"had_liked":false,"id":152081,"user_name":"꧁平常心꧂","can_delete":false,"product_type":"c1","uid":1159708,"ip_address":"","ucode":"01D04BBEB1C7A0","user_header":"https://static001.geekbang.org/account/avatar/00/11/b2/1c/b39d7fe2.jpg","comment_is_top":false,"comment_ctime":1573872761,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":29,"product_id":100007101,"comment_content":"对于最后的问题我得理解是\n就像最近电视里的谍战片一样，从上级到敌人内部的间谍，通信联络的都是各层的领导，每个领导有自己不同的下线，任务由领导来协调安排\n一但自己的下线不足(牺牲)也可以继续招募(扩充)\n    这样做既能分担组织的压力也能保证组织的安全\n互联网这样设计我猜也是为了保证用户隐私和网络的压力吧！\n才疏学浅理解能力有限，望大家多指正","like_count":0},{"had_liked":false,"id":151001,"user_name":"李元标","can_delete":false,"product_type":"c1","uid":1010986,"ip_address":"","ucode":"D048B7850902B2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6d/2a/a2acc011.jpg","comment_is_top":false,"comment_ctime":1573640579,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":29,"product_id":100007101,"comment_content":"评论比正文精彩系列","like_count":0},{"had_liked":false,"id":145551,"user_name":"joshuayingwhat","can_delete":false,"product_type":"c1","uid":1183071,"ip_address":"","ucode":"B2194CC014B264","user_header":"https://static001.geekbang.org/account/avatar/00/12/0d/5f/7a144eda.jpg","comment_is_top":false,"comment_ctime":1572314528,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":29,"product_id":100007101,"comment_content":"ip地址就相当于找到了大楼,Mac就相当于房间。虽然找到了大楼但是没有mac地址是无法定位给哪个房间的(给大楼里的哪个网卡)","like_count":0},{"had_liked":false,"id":142036,"user_name":"顾贵宾","can_delete":false,"product_type":"c1","uid":1082214,"ip_address":"","ucode":"C8988E23E5C77E","user_header":"https://static001.geekbang.org/account/avatar/00/10/83/66/bd294255.jpg","comment_is_top":false,"comment_ctime":1571281579,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":29,"product_id":100007101,"comment_content":"针对老师的问题，我的理解是：网络协议是分层设计，各层各司其职，也就是说网络协议就是这样设计的，两个相连的节点对于网络层信息(我来自哪里，到哪里去)交换必须是通过链路层的协议传递的。通过这些描述也能看出网络层与链路层的职责：网络层用于提供“被传递信息”的“源头与目的信息”，链路层用于将这些信息从一个点传递到与之相连另一个点，最终经过多次的链路传递到达目的地。至于在每次传递的下个点的信息是通过路由功能来获知。\n这样设计的好处就是负责链路层的设备或者相关功能不需要知道网络层具体的实现，它只管负责将这些信息从一个点传送到与之相连的另一个点即可。这样网络层的变动就不会影响链路层的实现，也就是说利于扩展和改进，比如新增一个IPv6协议，只需要在负责网络层的设备或者相关功能增加IPv6的支持即可。不然的话负责网络层和链路层的相关功能和设备都要改动。","like_count":0},{"had_liked":false,"id":141294,"user_name":"125","can_delete":false,"product_type":"c1","uid":1672165,"ip_address":"","ucode":"8F831D59FD6C2C","user_header":"https://static001.geekbang.org/account/avatar/00/19/83/e5/094dccf8.jpg","comment_is_top":false,"comment_ctime":1571136664,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":29,"product_id":100007101,"comment_content":"讲的真好\n","like_count":0},{"had_liked":false,"id":138564,"user_name":"随缘","can_delete":false,"product_type":"c1","uid":1682696,"ip_address":"","ucode":"F66CD77A07B59B","user_header":"","comment_is_top":false,"comment_ctime":1570339253,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":29,"product_id":100007101,"comment_content":"为了避免出现IP冲突","like_count":0},{"had_liked":false,"id":137793,"user_name":"追风筝的人","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1569853857,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":30,"product_id":100007101,"comment_content":"mac地址是唯一的，IP地址是会发生变化的，数据包要从IP层去往数据链路层，需要mac地址","like_count":0},{"had_liked":false,"id":134149,"user_name":"bolo","can_delete":false,"product_type":"c1","uid":1357170,"ip_address":"","ucode":"7C91CEA2F1970E","user_header":"https://static001.geekbang.org/account/avatar/00/14/b5/72/bb10f3d0.jpg","comment_is_top":false,"comment_ctime":1568767575,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":30,"product_id":100007101,"comment_content":"mac地址是设备唯一的，而ip地址分配分为两种 动态和静态分配。 如果是静态的ip地址可以使用老师说的那种方式，如果是动态分配的就不能使用了。\n\n还有一个原因就是不能保证所有的ip地址都是走的静态分配的方式。使用mac地址是更好的方式。","like_count":0},{"had_liked":false,"id":133747,"user_name":"Huiwang","can_delete":false,"product_type":"c1","uid":1041005,"ip_address":"","ucode":"13AA893713C65E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e2/6d/7604b872.jpg","comment_is_top":false,"comment_ctime":1568645313,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":30,"product_id":100007101,"comment_content":"每个城关可能连着三个或者四个国家吗，路由器是否只能连着两个网段，这个比较迷惑\n","like_count":0},{"had_liked":false,"id":133141,"user_name":"博瑞2010","can_delete":false,"product_type":"c1","uid":1150496,"ip_address":"","ucode":"4C17927B1AAD38","user_header":"https://static001.geekbang.org/account/avatar/00/11/8e/20/1d747873.jpg","comment_is_top":false,"comment_ctime":1568383961,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":30,"product_id":100007101,"comment_content":"因为每个国家的内部都是通过MAC地址通信的，也就是，网关和下一个网关之间经过的都是二层设备，二层设备只能识别MAC地址，只有三层以上的设备才能识别IP地址","like_count":0},{"had_liked":false,"id":128804,"user_name":"zjgking","can_delete":false,"product_type":"c1","uid":1583023,"ip_address":"","ucode":"C4557239BCC08C","user_header":"","comment_is_top":false,"comment_ctime":1566965879,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":30,"product_id":100007101,"comment_content":"学习了，hello world","like_count":0},{"had_liked":false,"id":123555,"user_name":"美梦与热望","can_delete":false,"product_type":"c1","uid":1471279,"ip_address":"","ucode":"03D569C47B1DA7","user_header":"https://static001.geekbang.org/account/avatar/00/16/73/2f/2b822de2.jpg","comment_is_top":false,"comment_ctime":1565700956,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":30,"product_id":100007101,"comment_content":"“经过应用层封装后，浏览器会将应用层的包交给下一层去完成&quot;","like_count":0},{"had_liked":false,"id":111660,"user_name":"炎黄伙哥","can_delete":false,"product_type":"c1","uid":1461692,"ip_address":"","ucode":"ACA4DFD5D30C9B","user_header":"https://static001.geekbang.org/account/avatar/00/16/4d/bc/e26f63d9.jpg","comment_is_top":false,"comment_ctime":1562579669,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":30,"product_id":100007101,"comment_content":"关于有了ip地址为什么还要用mac查询，从课程的描述中，我的理解是通过ip根本就不能定位到具体机器，文中说了，在局域网的话，ip相当于人名，mac相当于住址，知道名字以后通过ARP问问这个人住哪，才能实现网络传输（谁是 192.168.1.1 啊？网关会回答它，我就是，我的我的本地地址在村东头。这个本地地址就是MAC地址）；在网关与网关之间，也需要通过路由协议，这里ip也相当于地名，mac相当于地址，根据地名去查到地址在哪，才能知道怎么走（贫僧来自东土大唐（就是源 IP 地址），欲往西天拜佛求经（指的是目标 IP 地址），路过宝地，借宿一晚，明日启行，请问接下来该怎么走啊）。以前没了解过，纯粹通过这篇讲座理解，不知道理解的对不对","like_count":0},{"had_liked":false,"id":107687,"user_name":"大鹏","can_delete":false,"product_type":"c1","uid":1270632,"ip_address":"","ucode":"F4611B80B08A3A","user_header":"https://static001.geekbang.org/account/avatar/00/13/63/68/14b98bbc.jpg","comment_is_top":false,"comment_ctime":1561596760,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":30,"product_id":100007101,"comment_content":"业界良心👍","like_count":0},{"had_liked":false,"id":103564,"user_name":"呵呵","can_delete":false,"product_type":"c1","uid":1047362,"ip_address":"","ucode":"41F39EAFA460BD","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Wps7nuvHDicQuZSE4Fkt23l6EDXbhztIKwzNJaQ29rBjVDLYwAFVTVE8JqZuSEPenFdicN7kKnciba4J3ziafXScHw/132","comment_is_top":false,"comment_ctime":1560473699,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":30,"product_id":100007101,"comment_content":"1. 是不是可以这样比喻：ip地址是一个国家的地址。mac地址是一个国家内部具体某个人的地址？\n2. 光有ip没有mac，会不会有可能找不到目标设备，目的地服务器？\n3.光有Mac，没有ip是不是就可以定位到目的地服务器？\n4.如果23成立，那么我们直接只使用Mac地址去定位最终目标，就可以？无需再用ip","like_count":0},{"had_liked":false,"id":98992,"user_name":"陈景堂","can_delete":false,"product_type":"c1","uid":1349516,"ip_address":"","ucode":"5C97A9F44D0898","user_header":"https://static001.geekbang.org/account/avatar/00/14/97/8c/ce589b9f.jpg","comment_is_top":false,"comment_ctime":1559127097,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":30,"product_id":100007101,"comment_content":"ip 冲突就能回答这个问题了。","like_count":0},{"had_liked":false,"id":89135,"user_name":"傲娇的小宝","can_delete":false,"product_type":"c1","uid":1493922,"ip_address":"","ucode":"C079B19BCC1B7C","user_header":"https://static001.geekbang.org/account/avatar/00/16/cb/a2/5e7c557e.jpg","comment_is_top":false,"comment_ctime":1556088694,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":31,"product_id":100007101,"comment_content":"不同的局域网存在相同的ip，MAC地址才是唯一（除非是伪造的MAC地址）","like_count":0},{"had_liked":false,"id":88822,"user_name":"子杨","can_delete":false,"product_type":"c1","uid":1236803,"ip_address":"","ucode":"EA7555EEE6DECE","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/43/1aa8708a.jpg","comment_is_top":false,"comment_ctime":1556008294,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":31,"product_id":100007101,"comment_content":"MAC 地址是固定不变的，而 IP 地址是可能改变的，因此需要通过 ARP 协议来找到 MAC 地址， MAC 地址就是一个唯一的身份标识。","like_count":0},{"had_liked":false,"id":87949,"user_name":"曲冠儒","can_delete":false,"product_type":"c1","uid":1088278,"ip_address":"","ucode":"C9D211DFD16B4C","user_header":"https://static001.geekbang.org/account/avatar/00/10/9b/16/1dd3e6fa.jpg","comment_is_top":false,"comment_ctime":1555764859,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":31,"product_id":100007101,"comment_content":"很有收获","like_count":0},{"had_liked":false,"id":84938,"user_name":"All the time","can_delete":false,"product_type":"c1","uid":1479792,"ip_address":"","ucode":"9FDB18344463B0","user_header":"https://static001.geekbang.org/account/avatar/00/16/94/70/b2821a0a.jpg","comment_is_top":false,"comment_ctime":1554947018,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":31,"product_id":100007101,"comment_content":"多数人的疑问不是mac地址和ip地址的区别。也不是什么身份证号和地址什么的。而是既然ip地址可以定位到一台主机，为啥还需要mac? \n答：ip 是动态的，也就是同一个ip 在不同的时间可能在不同的主机上。所以需要再用mac标示一下。","like_count":0},{"had_liked":false,"id":82910,"user_name":"Leo","can_delete":false,"product_type":"c1","uid":1484372,"ip_address":"","ucode":"E67376CCD66861","user_header":"https://static001.geekbang.org/account/avatar/00/16/a6/54/0509ccb7.jpg","comment_is_top":false,"comment_ctime":1554347289,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":31,"product_id":100007101,"comment_content":"感觉第一位和第二位的留言只谈到了为什么有mac还用ip，但是没谈到为什么有ip而还要mac。首先应该是分层导致在链路层是只能通过mac来匹配，然后问题就变成了为什么要怎么分层，这时候两位中的回答倒是可能有呼应到这个问题。","like_count":0},{"had_liked":false,"id":81322,"user_name":"张三","can_delete":false,"product_type":"c1","uid":1381318,"ip_address":"","ucode":"4C89D4F7910FBF","user_header":"https://static001.geekbang.org/account/avatar/00/15/13/c6/df9c2392.jpg","comment_is_top":false,"comment_ctime":1553861538,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":31,"product_id":100007101,"comment_content":"看了五遍，因为是跨行，有点像是盲人摸象，遇到陌生的词汇就查，最后才大概理解。真是不容易！","like_count":0},{"had_liked":false,"id":79425,"user_name":"main","can_delete":false,"product_type":"c1","uid":1467965,"ip_address":"","ucode":"7395C31AF54C03","user_header":"https://static001.geekbang.org/account/avatar/00/16/66/3d/96ae6c64.jpg","comment_is_top":false,"comment_ctime":1553481510,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":31,"product_id":100007101,"comment_content":"对于老师留的问题，我有以下看法:Mac地址就像是每个人特有的身份证一样，全世界唯一的，所以，通过网关时，必须去寻找Mac地址，如果去寻找ip地址，就会有其他别有用心的主机冒充，这些主机会冒充你当前寻找到ip。所以，我认为，出于信息传输的安全考虑，要寻找Mac地址而不是ip地址。","like_count":0},{"had_liked":false,"id":75846,"user_name":"不负","can_delete":false,"product_type":"c1","uid":1238323,"ip_address":"","ucode":"147F5860711811","user_header":"https://static001.geekbang.org/account/avatar/00/12/e5/33/ff5c52ad.jpg","comment_is_top":false,"comment_ctime":1552481198,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":31,"product_id":100007101,"comment_content":"尝试回答：因为一般使用的都是动态 IP 地址，是会变的，要是路由表没有及时更新，就会出现找错人了，所以每次需要通过 MAC 地址到达网关","like_count":0},{"had_liked":false,"id":73981,"user_name":"Geek_f4ef24","can_delete":false,"product_type":"c1","uid":1445470,"ip_address":"","ucode":"E08867C2100407","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/n2N3Gg1kfc80sKGDRicYWa9L35GXZjia9ErMEdpXpltaCMF2dYCBCu6rlbKaRTxVZUFKZD4Hp4nCFp1AKibOQYNPw/132","comment_is_top":false,"comment_ctime":1552052712,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":31,"product_id":100007101,"comment_content":"打个卡吧，一直做看客，不互动。技术学来学去，赶热潮，心累，反反复复后，终究要回到最基本的网络、操作系统、数据库来。没有网络基础，希望这个课程领入门，系统的学一遍。","like_count":0},{"had_liked":false,"id":68429,"user_name":"ZERO To One","can_delete":false,"product_type":"c1","uid":1373600,"ip_address":"","ucode":"A520B987D17023","user_header":"https://static001.geekbang.org/account/avatar/00/14/f5/a0/96ee2d50.jpg","comment_is_top":false,"comment_ctime":1550499272,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":31,"product_id":100007101,"comment_content":"陶家顺的留言笔记：1. mac地址是唯一的，为什么可以修改?想想身份证，身份证号是唯一的，不能改变的，但是可以造价。mac地址全球唯一，它是固化在网卡里的。网卡毕竟是个硬件，需要软件支持，既操作系统识别。重点来了，操作系统识别出来的mac地址是可以更改的，它只不过是一个字符串。我们常说的修改mac指的是修改电脑中记录的既注册表中的记录。\n2. 有了mac地址为什么还要有ip地址。举个例子，身份证号是你的唯一标识，不会重复，一落户就有（网卡一出厂就有mac）。现在我要和你通信（写信给你），地址用你的姓名+身份证，信能送到你手上吗?明显不能！身份证号前六位能定位你出生的县。mac地址前几位也可以定位生产厂家。但是你出生后会离开这个县（哪怕在这个县，也不能具体找到你）。所以一般写个人信息就要有出生地和现居地址了。","like_count":0},{"had_liked":false,"id":67379,"user_name":"这是谁 辣么帅","can_delete":false,"product_type":"c1","uid":1329293,"ip_address":"","ucode":"DD30830BAD20A6","user_header":"https://static001.geekbang.org/account/avatar/00/14/48/8d/7764c5c2.jpg","comment_is_top":false,"comment_ctime":1550137040,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":32,"product_id":100007101,"comment_content":"我的理解是Mac地址就像是我们的身份证是用来确认身份的，IP地址是用来寻找某个身份的地址，比如通过IP地址找到某个房间，这里面的人之前是A，后面可能是另外一个人B了，所以通过IP找到人位置之后为了确认没有找错人还需要用Mac来确认一下这个人是不是A。不知道我理解的对不对。","like_count":0},{"had_liked":false,"id":64093,"user_name":"xfan","can_delete":false,"product_type":"c1","uid":1315147,"ip_address":"","ucode":"48ED8D498D7F56","user_header":"https://static001.geekbang.org/account/avatar/00/14/11/4b/fa64f061.jpg","comment_is_top":false,"comment_ctime":1548665486,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":32,"product_id":100007101,"comment_content":"有一点我有异议，城关和城关之间我觉得不是国家，而是边境，类似于我这边是中国，你那边是俄罗斯，我们的网段不同，但是我能通过mac地址找到你，ip是不能跨网段通信的，但是可以通过学习路由表，配置路由表根据mac地址来转发","like_count":0},{"had_liked":false,"id":61544,"user_name":"杰之7","can_delete":false,"product_type":"c1","uid":1297232,"ip_address":"","ucode":"F7DA2E21085332","user_header":"https://static001.geekbang.org/account/avatar/00/13/cb/50/66d0bd7f.jpg","comment_is_top":false,"comment_ctime":1547719385,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":32,"product_id":100007101,"comment_content":"阅读了二遍，听了一遍，老师声音不错。","like_count":0},{"had_liked":false,"id":56668,"user_name":"geekYang","can_delete":false,"product_type":"c1","uid":1255232,"ip_address":"","ucode":"B2E50D3BFDE8C6","user_header":"https://static001.geekbang.org/account/avatar/00/13/27/40/ae886719.jpg","comment_is_top":false,"comment_ctime":1546519322,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":32,"product_id":100007101,"comment_content":"看了一下其他人的评论，很精彩。\n我的感觉就是：ip可以定位到你在互联网上的大致位置，然后通过mac可以定位到你的具体位置。ip的作用就是你的现居地址，而mac的作用就是标识你现居地址中所有人里面的你自己。","like_count":0},{"had_liked":false,"id":55587,"user_name":"一命赌快乐","can_delete":false,"product_type":"c1","uid":1331869,"ip_address":"","ucode":"BB7CE5D3056C87","user_header":"https://static001.geekbang.org/account/avatar/00/14/52/9d/5d51fda4.jpg","comment_is_top":false,"comment_ctime":1546237967,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":32,"product_id":100007101,"comment_content":"个人认为，有了ip地址但是mac地址还在用的的主要原因，可能是为了兼容历史。如果先有ip地址……","like_count":0},{"had_liked":false,"id":54732,"user_name":"彭金意","can_delete":false,"product_type":"c1","uid":1318401,"ip_address":"","ucode":"8D8003A7D3C666","user_header":"https://static001.geekbang.org/account/avatar/00/14/1e/01/7c477407.jpg","comment_is_top":false,"comment_ctime":1545957872,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":32,"product_id":100007101,"comment_content":"网络包中的源IP和目标IP用于标识来源和目的，不可变，也就是IP层(含)以上的信息在来源处已经写死，能变的且有唯一标识性的就剩MAC","like_count":0},{"had_liked":false,"id":54391,"user_name":"古夜","can_delete":false,"product_type":"c1","uid":1341612,"ip_address":"","ucode":"0A82D3CFCEDF07","user_header":"https://static001.geekbang.org/account/avatar/00/14/78/ac/e5e6e7f3.jpg","comment_is_top":false,"comment_ctime":1545840763,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":32,"product_id":100007101,"comment_content":"关于这个问题，首先局域网IP是动态的，就是说你每次开关机IP都是会变的。当数据包到了你所在的网关后它能根据动态IP找到你的电脑吗？明显不能，还是得有个能唯一确认电脑是目标电脑的标识，即Mac","like_count":0},{"had_liked":false,"id":53939,"user_name":"沃野伏地","can_delete":false,"product_type":"c1","uid":1256735,"ip_address":"","ucode":"E681344BBE441F","user_header":"https://static001.geekbang.org/account/avatar/00/13/2d/1f/8d53c785.jpg","comment_is_top":false,"comment_ctime":1545768810,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":32,"product_id":100007101,"comment_content":"留本地的MAC是为了识别是哪一台设备发的信息，同一个IP会有多台设备在使用","like_count":0},{"had_liked":false,"id":50270,"user_name":"赵大宝","can_delete":false,"product_type":"c1","uid":1117072,"ip_address":"","ucode":"B5730C4175B05D","user_header":"https://static001.geekbang.org/account/avatar/00/11/0b/90/f161b09a.jpg","comment_is_top":false,"comment_ctime":1544939557,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":32,"product_id":100007101,"comment_content":"操作系统是通过 ARP 协议将 IP 发送给网关，然后网关获取到 MAC 地址，然后将 MAC 地址打包再发送给 MAC 层，然后再发送给网关么？","like_count":0},{"had_liked":false,"id":50269,"user_name":"赵大宝","can_delete":false,"product_type":"c1","uid":1117072,"ip_address":"","ucode":"B5730C4175B05D","user_header":"https://static001.geekbang.org/account/avatar/00/11/0b/90/f161b09a.jpg","comment_is_top":false,"comment_ctime":1544939056,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":32,"product_id":100007101,"comment_content":"通过DNS已经找到了目标的IP地址，为什么还会在网络层通过IP协议再次获取目标IP地址呢？","like_count":0},{"had_liked":false,"id":49855,"user_name":"caohuan","can_delete":false,"product_type":"c1","uid":1256428,"ip_address":"","ucode":"4B092E33F3DF1E","user_header":"https://static001.geekbang.org/account/avatar/00/13/2b/ec/af6d0b10.jpg","comment_is_top":false,"comment_ctime":1544780195,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":33,"product_id":100007101,"comment_content":"本篇所得1.程序员物种 重新获得 创造 通天塔的能力，创造新世界 2.协议的三要素：语法、语气、顺序，刘超老师讲的很有趣，比较笨的我 听二边还是没有捋清楚 通信的过程，期待 后面老师的复盘。\n\n回答老师的问题：需要通过本地的Mac，找到具体的设备，这次连接 通讯后，下一步戒指去寻找目标，还需要回头 走回 出发的地址，所以需要知道Mac地址。","like_count":0},{"had_liked":false,"id":49694,"user_name":"维和土豆","can_delete":false,"product_type":"c1","uid":1347473,"ip_address":"","ucode":"94BCC5F48B268E","user_header":"https://static001.geekbang.org/account/avatar/00/14/8f/91/b4c3df48.jpg","comment_is_top":false,"comment_ctime":1544753227,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":33,"product_id":100007101,"comment_content":"看了评论知道ip和mac的映射关系，但还是有一个疑问:如果本机的ip不是最终ip，那么为什么不进行直接转发，只有当ip对了的时候才需要去找本机的mac地址，这样不是更加高效吗？","like_count":0},{"had_liked":false,"id":47415,"user_name":"yang","can_delete":false,"product_type":"c1","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1544143032,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":33,"product_id":100007101,"comment_content":"第一讲，笼统介绍，打卡！","like_count":0},{"had_liked":false,"id":44335,"user_name":"老蒙","can_delete":false,"product_type":"c1","uid":1303913,"ip_address":"","ucode":"8A1003799850E9","user_header":"https://static001.geekbang.org/account/avatar/00/13/e5/69/80441a0a.jpg","comment_is_top":false,"comment_ctime":1543410565,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":33,"product_id":100007101,"comment_content":"本地是通过mac寻址的，如果封装mac不对，城关就会丢弃，更别谈什么路由数据包。","like_count":0},{"had_liked":false,"id":43110,"user_name":"为了寻找2B9","can_delete":false,"product_type":"c1","uid":1270162,"ip_address":"","ucode":"95E766825D9DFE","user_header":"https://static001.geekbang.org/account/avatar/00/13/61/92/d0087aff.jpg","comment_is_top":false,"comment_ctime":1543165590,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":33,"product_id":100007101,"comment_content":"（从书上看到最多的解释）ip毕竟是虚拟的网络结构，是逻辑上的网络，他使各种原本很难通信的异构物理网络结构统一起来，使用同一个协议来达成通信，但是在物理层面实际通信还是要依靠实际的线路和网卡，而唯一实际上能找到你的就是固化在网卡上的mac地址。","like_count":0},{"had_liked":false,"id":42012,"user_name":"乖鱼","can_delete":false,"product_type":"c1","uid":1313816,"ip_address":"","ucode":"28F9B75728044C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJx6YiaEictwmdAfVE1KBRohxfVsMYXNKqBw0WhIqiaAClCkuXpydSW0TWP7y37JKPiccpEna20zTpAlw/132","comment_is_top":false,"comment_ctime":1542892014,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":33,"product_id":100007101,"comment_content":"请问为何知道mac地址就可以进行数据包的定向发送（而不是发给所有局域网里的机器），这可能跟物理层有关，但一直不理解这个底层原理。","like_count":0},{"had_liked":false,"id":40400,"user_name":"hhhh","can_delete":false,"product_type":"c1","uid":1256101,"ip_address":"","ucode":"9E87017424B382","user_header":"https://static001.geekbang.org/account/avatar/00/13/2a/a5/625c0a2e.jpg","comment_is_top":false,"comment_ctime":1542615288,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":33,"product_id":100007101,"comment_content":"mac地址与机器是一一对应，ip地址是动态的，使用ip地址定位，有可能走错地方","like_count":0},{"had_liked":false,"id":40384,"user_name":"胡永","can_delete":false,"product_type":"c1","uid":1200543,"ip_address":"","ucode":"6C8BA1E0BED9C0","user_header":"https://static001.geekbang.org/account/avatar/00/12/51/9f/1840385e.jpg","comment_is_top":false,"comment_ctime":1542611713,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":33,"product_id":100007101,"comment_content":"到达城关的时候已经开始属于网内通信，这个时候就使用MAC进行数据传输","like_count":0},{"had_liked":false,"id":39972,"user_name":"Enterprize","can_delete":false,"product_type":"c1","uid":1215130,"ip_address":"","ucode":"3C120E9023B6C5","user_header":"https://static001.geekbang.org/account/avatar/00/12/8a/9a/7270d764.jpg","comment_is_top":false,"comment_ctime":1542425409,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":33,"product_id":100007101,"comment_content":"mac地址就是一个人的身份证号，但是要找到你得有你的地址，并且你今天在北京明天可能在上海，你的地址就是ip地址","like_count":0},{"had_liked":false,"id":39723,"user_name":"Aaron","can_delete":false,"product_type":"c1","uid":1025106,"ip_address":"","ucode":"309E66A973CDCB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a4/52/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1542341882,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":33,"product_id":100007101,"comment_content":"外行听热闹，不错，很热闹","like_count":0},{"had_liked":false,"id":38479,"user_name":"夜空中最亮的星","can_delete":false,"product_type":"c1","uid":1267566,"ip_address":"","ucode":"ADC3E7B6789955","user_header":"https://static001.geekbang.org/account/avatar/00/13/57/6e/b6795c44.jpg","comment_is_top":false,"comment_ctime":1542065399,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":34,"product_id":100007101,"comment_content":"IP，是分层的需要","like_count":0},{"had_liked":false,"id":32939,"user_name":"何须拥有","can_delete":false,"product_type":"c1","uid":1136270,"ip_address":"","ucode":"7837AE57323D6D","user_header":"https://static001.geekbang.org/account/avatar/00/11/56/8e/4bcf5f82.jpg","comment_is_top":false,"comment_ctime":1539736874,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":34,"product_id":100007101,"comment_content":"包回源到请求机器时能更快的知道是谁做的请求  而不需要再进行广播","like_count":0},{"had_liked":false,"id":31430,"user_name":"爱新觉罗老流氓","can_delete":false,"product_type":"c1","uid":1005661,"ip_address":"","ucode":"B13AC4DA358C15","user_header":"https://static001.geekbang.org/account/avatar/00/0f/58/5d/8de7f8dc.jpg","comment_is_top":false,"comment_ctime":1539178100,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":34,"product_id":100007101,"comment_content":"刘老师，通过DNS可以得到URL的IP，那么TCP上的 电商端口 是在哪里获得的呢","like_count":0},{"had_liked":false,"id":29263,"user_name":"金龟","can_delete":false,"product_type":"c1","uid":1228500,"ip_address":"","ucode":"1C7D35C8AE8D9D","user_header":"https://static001.geekbang.org/account/avatar/00/12/be/d4/ff1c1319.jpg","comment_is_top":false,"comment_ctime":1538314003,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":34,"product_id":100007101,"comment_content":"因为底层传输的原因， 底层的传输是解析不了ip的，只能通mac通信","like_count":0},{"had_liked":false,"id":28822,"user_name":"a man is a man","can_delete":false,"product_type":"c1","uid":1229407,"ip_address":"","ucode":"45D23378DA067E","user_header":"https://static001.geekbang.org/account/avatar/00/12/c2/5f/dd745376.jpg","comment_is_top":false,"comment_ctime":1538151388,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":34,"product_id":100007101,"comment_content":"通俗易懂，赞","like_count":0},{"had_liked":false,"id":27475,"user_name":"SeLiNnnn","can_delete":false,"product_type":"c1","uid":1234537,"ip_address":"","ucode":"466512D9F22ECC","user_header":"https://static001.geekbang.org/account/avatar/00/12/d6/69/77409ffe.jpg","comment_is_top":false,"comment_ctime":1537892069,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":34,"product_id":100007101,"comment_content":"来晚了。。。刚开始看 感觉。。好难😷","like_count":0},{"had_liked":false,"id":26643,"user_name":"一","can_delete":false,"product_type":"c1","uid":1220750,"ip_address":"","ucode":"28E0605EA1AE88","user_header":"https://static001.geekbang.org/account/avatar/00/12/a0/8e/6e4c7509.jpg","comment_is_top":false,"comment_ctime":1537708951,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":34,"product_id":100007101,"comment_content":"感谢作者大大！","like_count":0},{"had_liked":false,"id":23611,"user_name":"Dong","can_delete":false,"product_type":"c1","uid":1165374,"ip_address":"","ucode":"B8F609828E7A87","user_header":"https://static001.geekbang.org/account/avatar/00/11/c8/3e/83021f4c.jpg","comment_is_top":false,"comment_ctime":1536545646,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":34,"product_id":100007101,"comment_content":"涉及二层转发，交换机会通过mac进行arp学习","like_count":0},{"had_liked":false,"id":23594,"user_name":"Untitled","can_delete":false,"product_type":"c1","uid":1039464,"ip_address":"","ucode":"8DD6ABA3E81A2E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/dc/68/006ba72c.jpg","comment_is_top":false,"comment_ctime":1536540245,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":34,"product_id":100007101,"comment_content":"听了10多节课，再重温第一节，发现有很多遗漏没仔细读懂的内容，温故而知新啊","like_count":0},{"had_liked":false,"id":23459,"user_name":"MAMBH","can_delete":false,"product_type":"c1","uid":1124471,"ip_address":"","ucode":"E594D93D2BFDD6","user_header":"https://static001.geekbang.org/account/avatar/00/11/28/77/a3ff90d1.jpg","comment_is_top":false,"comment_ctime":1536378276,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":34,"product_id":100007101,"comment_content":"讲的很不错，很直白，我一个新手都能看懂。","like_count":0},{"had_liked":false,"id":22834,"user_name":"LDxy","can_delete":false,"product_type":"c1","uid":1188710,"ip_address":"","ucode":"956432CE7B7761","user_header":"https://static001.geekbang.org/account/avatar/00/12/23/66/413c0bb5.jpg","comment_is_top":false,"comment_ctime":1535989882,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":35,"product_id":100007101,"comment_content":"因为网卡只认识Mac 地址","like_count":0},{"had_liked":false,"id":21537,"user_name":"Allen","can_delete":false,"product_type":"c1","uid":1211051,"ip_address":"","ucode":"B57ECE1E99A77D","user_header":"https://static001.geekbang.org/account/avatar/00/12/7a/ab/99bdf0ee.jpg","comment_is_top":false,"comment_ctime":1535159884,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":35,"product_id":100007101,"comment_content":"因为下一个ip地址不在同一个国家","like_count":0},{"had_liked":false,"id":21304,"user_name":"起而行","can_delete":false,"product_type":"c1","uid":1131399,"ip_address":"","ucode":"4F116B0B740776","user_header":"https://static001.geekbang.org/account/avatar/00/11/43/87/7604d7a4.jpg","comment_is_top":false,"comment_ctime":1535009522,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":35,"product_id":100007101,"comment_content":"要把大目标拆成小目标，比如从北京到巴塞罗那，直接告诉你IP地址去找的话。每次面临的都是一个大任务，消耗的精力大。要是先从家到北京海关，从海关到飞机，从飞机到巴塞罗那海关，再从海关到巴塞罗那。每次面临的都是小目标，便于记忆和解决，记忆也就是说不用存储太多的信息","like_count":0},{"had_liked":false,"id":19618,"user_name":"Nevermore","can_delete":false,"product_type":"c1","uid":1136894,"ip_address":"","ucode":"867BD81078C8E7","user_header":"https://static001.geekbang.org/account/avatar/00/11/58/fe/4a970adb.jpg","comment_is_top":false,"comment_ctime":1533909411,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":35,"product_id":100007101,"comment_content":"讲的很详细，但感觉有点繁琐了。","like_count":0},{"had_liked":false,"id":17940,"user_name":"张建川","can_delete":false,"product_type":"c1","uid":1127000,"ip_address":"","ucode":"A97D676424FD3F","user_header":"https://static001.geekbang.org/account/avatar/00/11/32/58/f2b89637.jpg","comment_is_top":false,"comment_ctime":1533039450,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":35,"product_id":100007101,"comment_content":"有点蒙   就是这篇文章里面一直提到mac地址   mac地址分为电脑mac地址以及网关mac地址  而文章中一直说的mac地址是指的哪一个啊","like_count":0},{"had_liked":false,"id":17938,"user_name":"张建川","can_delete":false,"product_type":"c1","uid":1127000,"ip_address":"","ucode":"A97D676424FD3F","user_header":"https://static001.geekbang.org/account/avatar/00/11/32/58/f2b89637.jpg","comment_is_top":false,"comment_ctime":1533038434,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":35,"product_id":100007101,"comment_content":"我一直不清楚DNS   域名解析器是放在哪里的  去哪里查找啊","like_count":0},{"had_liked":false,"id":17668,"user_name":"摊开你的掌心","can_delete":false,"product_type":"c1","uid":1177979,"ip_address":"","ucode":"E7087898D963DE","user_header":"https://static001.geekbang.org/account/avatar/00/11/f9/7b/894df2dc.jpg","comment_is_top":false,"comment_ctime":1532859179,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":35,"product_id":100007101,"comment_content":"可以讲讲连接的概念吗？还有这个连接在网络中是怎么维护的，比如tcp连接，但是其实这个连接只是逻辑上的，再比如连接两端到底是哪两端，挺疑惑的！看到的网上资料都说tcp是面向连接，还有什么第一次握手后客户端是半打开状态。","like_count":0},{"had_liked":false,"id":17621,"user_name":"尹秀波","can_delete":false,"product_type":"c1","uid":1031114,"ip_address":"","ucode":"BAD5E981B4EE35","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bb/ca/31daa96e.jpg","comment_is_top":false,"comment_ctime":1532787603,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":35,"product_id":100007101,"comment_content":"数据包在传输的过程中是要进行封装的","like_count":0},{"had_liked":false,"id":17522,"user_name":"哈$@鱼","can_delete":false,"product_type":"c1","uid":1189703,"ip_address":"","ucode":"C51015BDAB575D","user_header":"https://static001.geekbang.org/account/avatar/00/12/27/47/f0694cf4.jpg","comment_is_top":false,"comment_ctime":1532706624,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":35,"product_id":100007101,"comment_content":"之前就遇到过发出的包是通过专线走的，回来的包是从VPN过来的","like_count":0},{"had_liked":false,"id":17521,"user_name":"哈$@鱼","can_delete":false,"product_type":"c1","uid":1189703,"ip_address":"","ucode":"C51015BDAB575D","user_header":"https://static001.geekbang.org/account/avatar/00/12/27/47/f0694cf4.jpg","comment_is_top":false,"comment_ctime":1532705156,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":35,"product_id":100007101,"comment_content":"arp和反向a r p","like_count":0},{"had_liked":false,"id":17503,"user_name":"不专注的linuxer","can_delete":false,"product_type":"c1","uid":1050191,"ip_address":"","ucode":"28ED11C1E2942C","user_header":"https://static001.geekbang.org/account/avatar/00/10/06/4f/14cc4b53.jpg","comment_is_top":false,"comment_ctime":1532692109,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":36,"product_id":100007101,"comment_content":"刘老师，您好！我觉得用户“芒果”的留言好像说得不错，点赞数最多，重点是，他问如果以后每人有一个唯一的ipv6地址，Mac地址+ipv4地址这种模式可以被替换掉，有可能吗？能不能麻烦您解答一下","like_count":0},{"had_liked":false,"id":17376,"user_name":"不专注的linuxer","can_delete":false,"product_type":"c1","uid":1050191,"ip_address":"","ucode":"28ED11C1E2942C","user_header":"https://static001.geekbang.org/account/avatar/00/10/06/4f/14cc4b53.jpg","comment_is_top":false,"comment_ctime":1532604336,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":36,"product_id":100007101,"comment_content":"想问一下刘超老师，有人说Mac地址是全球唯一的不可变的，也有人说Mac地址不是唯一的且是可变的，可以通过软件改变的，那么，Mac地址是不是全球唯一且不可变的？","like_count":0},{"had_liked":false,"id":16814,"user_name":"　","can_delete":false,"product_type":"c1","uid":1067213,"ip_address":"","ucode":"177EEDFE57F767","user_header":"https://static001.geekbang.org/account/avatar/00/10/48/cd/7734ea88.jpg","comment_is_top":false,"comment_ctime":1532231264,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":36,"product_id":100007101,"comment_content":"就像送信一样。需要一个确定的地址（Mac 唯一），去投递。","like_count":0},{"had_liked":false,"id":16794,"user_name":"Lion胡","can_delete":false,"product_type":"c1","uid":1034097,"ip_address":"","ucode":"91C37658767125","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c7/71/54841938.jpg","comment_is_top":false,"comment_ctime":1532192732,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":36,"product_id":100007101,"comment_content":"有个问题，如何保证mac地址不会重复","like_count":0},{"had_liked":false,"id":16433,"user_name":"尹秀波","can_delete":false,"product_type":"c1","uid":1031114,"ip_address":"","ucode":"BAD5E981B4EE35","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bb/ca/31daa96e.jpg","comment_is_top":false,"comment_ctime":1531960673,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":36,"product_id":100007101,"comment_content":"因为在进行数据包的封装的时候需要不断的查mac表，根据mac进行封装和转发","like_count":0},{"had_liked":false,"id":16399,"user_name":"snail🐌","can_delete":false,"product_type":"c1","uid":1169978,"ip_address":"","ucode":"82B46734435002","user_header":"https://static001.geekbang.org/account/avatar/00/11/da/3a/208b0859.jpg","comment_is_top":false,"comment_ctime":1531924435,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":36,"product_id":100007101,"comment_content":"因为包向下封装的时候，三层封ip，二层要封mac地址，实际链路上是通过mac表来判断从哪个出接口丢包出去的？有没有大神可以通俗易懂讲清楚下～","like_count":0},{"had_liked":false,"id":14649,"user_name":"f•ﻌ•l","can_delete":false,"product_type":"c1","uid":1130882,"ip_address":"","ucode":"5863A86C7D73DB","user_header":"https://static001.geekbang.org/account/avatar/00/11/41/82/0f5b9bfd.jpg","comment_is_top":false,"comment_ctime":1530583787,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":36,"product_id":100007101,"comment_content":"IP是可以做子网和路由的，MAC做不了网段","like_count":0},{"had_liked":false,"id":14624,"user_name":"Vincent","can_delete":false,"product_type":"c1","uid":1135159,"ip_address":"","ucode":"CD8B84A57A6A0C","user_header":"https://static001.geekbang.org/account/avatar/00/11/52/37/13b4c8aa.jpg","comment_is_top":false,"comment_ctime":1530579210,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":36,"product_id":100007101,"comment_content":"谁跟你们说Mac地址是全世界唯一的，只要满足局域网没主机间的MAC地址唯一即可","like_count":0},{"had_liked":false,"id":14447,"user_name":"Qidukeji","can_delete":false,"product_type":"c1","uid":1006792,"ip_address":"","ucode":"8A67873DA062CA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5c/c8/be0ce609.jpg","comment_is_top":false,"comment_ctime":1530442169,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":36,"product_id":100007101,"comment_content":"城关与城关之间用国家内部地址，这个不太懂，难道不是用ip吗？城关到底属于哪个国家呢？","like_count":0},{"had_liked":false,"id":14406,"user_name":"jason0407","can_delete":false,"product_type":"c1","uid":1079988,"ip_address":"","ucode":"9DC05FEA7A27C6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM7VpZKASxVvmeiarqaz6JS20kqziarRxvk1xbNl6DGk9ibFQJh3fWdqewwc8zyUzdJdcE3wDXyQcqeQA/132","comment_is_top":false,"comment_ctime":1530400818,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":36,"product_id":100007101,"comment_content":"请教下老师，想问下是否有软件可以做到，和不同软件通讯时发送不同的MAC地址而主机目的地是相同！既现在有些软件是按MAC地址来注册的，这样安全不安全，是否很容易可以被破解？","like_count":0},{"had_liked":false,"id":14139,"user_name":"gc","can_delete":false,"product_type":"c1","uid":1159933,"ip_address":"","ucode":"F45A536FDEF37D","user_header":"https://static001.geekbang.org/account/avatar/00/11/b2/fd/e10b39e4.jpg","comment_is_top":false,"comment_ctime":1530192632,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":37,"product_id":100007101,"comment_content":"厉害厉害👍🏻，看了第一章虽然只明白一半，但是这个例子很形象，强","like_count":0},{"had_liked":false,"id":13885,"user_name":"HNA","can_delete":false,"product_type":"c1","uid":1153952,"ip_address":"","ucode":"C8FB9C24CF1D70","user_header":"https://static001.geekbang.org/account/avatar/00/11/9b/a0/1571129f.jpg","comment_is_top":false,"comment_ctime":1530059753,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":37,"product_id":100007101,"comment_content":"「操作系统往往通过端口来判断，它得到的包应该给哪个进程」说的是服务器而非客户端吧？","like_count":0},{"had_liked":false,"id":13620,"user_name":"是KK呀","can_delete":false,"product_type":"c1","uid":1064894,"ip_address":"","ucode":"5DCEB53A13D049","user_header":"https://static001.geekbang.org/account/avatar/00/10/3f/be/c7141382.jpg","comment_is_top":false,"comment_ctime":1529884812,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":37,"product_id":100007101,"comment_content":"超哥哥是东北人吧？哈哈","like_count":0},{"had_liked":false,"id":13421,"user_name":"江湖","can_delete":false,"product_type":"c1","uid":1075005,"ip_address":"","ucode":"7865F4E9932061","user_header":"https://static001.geekbang.org/account/avatar/00/10/67/3d/4e7aec2f.jpg","comment_is_top":false,"comment_ctime":1529621685,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":37,"product_id":100007101,"comment_content":"mac地址的唯一性，ip地址的动态性，所以选择mac地址。","like_count":0},{"had_liked":false,"id":13238,"user_name":"Beyond_JG","can_delete":false,"product_type":"c1","uid":1020825,"ip_address":"","ucode":"60CF343C35EF7C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/93/99/a232aa5a.jpg","comment_is_top":false,"comment_ctime":1529461949,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":37,"product_id":100007101,"comment_content":"因为使用的以太网协议，通过以太网协议传输需要使用MAC地址来确认目标地址。这也是一个分层，以太网协议可以传输很多中类型包，只要包有MAC头部，就可以通过以太网协议传输。常见的类型有IP类型，ARP类型，IPv6等等～\n","like_count":0},{"had_liked":false,"id":12558,"user_name":"Super陶","can_delete":false,"product_type":"c1","uid":1156330,"ip_address":"","ucode":"79ED334E317EB6","user_header":"https://static001.geekbang.org/account/avatar/00/11/a4/ea/5bd0f0a2.jpg","comment_is_top":false,"comment_ctime":1528910456,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":37,"product_id":100007101,"comment_content":"我认为有2点好处\n1.IP的流动性太高，用IP确认身份就会很慢\n2.服务端和客户端拆包的时候使用IP和MAC地址进行双重效验会更加准确\n\n又快又准才是王道","like_count":0},{"had_liked":false,"id":12153,"user_name":"小侠","can_delete":false,"product_type":"c1","uid":1045025,"ip_address":"","ucode":"A35A61061E41B2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f2/21/00600713.jpg","comment_is_top":false,"comment_ctime":1528623420,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":37,"product_id":100007101,"comment_content":"本地一般走以太网，Mac地址是以太网用的","like_count":0},{"had_liked":false,"id":11839,"user_name":"Delicate","can_delete":false,"product_type":"c1","uid":1149463,"ip_address":"","ucode":"E79FF87AB14FE1","user_header":"https://static001.geekbang.org/account/avatar/00/11/8a/17/e5b99b44.jpg","comment_is_top":false,"comment_ctime":1528382215,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":37,"product_id":100007101,"comment_content":"我觉得是这样的，如果不对，希望老师指正。\n好比我要从中国出发去一个美国朋友A的家(ip)，我中间要经过美国的海关(mac)。有一天，我朋友A搬家到了另一个街区(ip改变)，我仍然从中国出发去找他，我还是要通过美国的海关(mac)，所以虽然ip和mac都是唯一的，但仍然同时需要mac地址和ip地址","like_count":0},{"had_liked":false,"id":10723,"user_name":"还是不要说话","can_delete":false,"product_type":"c1","uid":1132685,"ip_address":"","ucode":"1BFC4C8C3AC3C0","user_header":"https://static001.geekbang.org/account/avatar/00/11/48/8d/9cb4750d.jpg","comment_is_top":false,"comment_ctime":1527675818,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":37,"product_id":100007101,"comment_content":"按逻辑，通天塔的计划应该是成功了","like_count":0},{"had_liked":false,"id":10556,"user_name":"noodles","can_delete":false,"product_type":"c1","uid":1131321,"ip_address":"","ucode":"A0FAF6BDF8E9CB","user_header":"https://static001.geekbang.org/account/avatar/00/11/43/39/7642af93.jpg","comment_is_top":false,"comment_ctime":1527593425,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":37,"product_id":100007101,"comment_content":"老师。之前的提问没说清楚 如果目的主机是同局域网的主机 是通过广播获取目的主机的mac地址。还是走网关。从网关处获取mac地址呢","like_count":0},{"had_liked":false,"id":10278,"user_name":"feifei","can_delete":false,"product_type":"c1","uid":1105431,"ip_address":"","ucode":"B1F8AE3AD82C51","user_header":"https://static001.geekbang.org/account/avatar/00/10/de/17/75e2b624.jpg","comment_is_top":false,"comment_ctime":1527435704,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":38,"product_id":100007101,"comment_content":"最终的都是mac to mac，ip 是在寻找最终的mac","like_count":0},{"had_liked":false,"id":10269,"user_name":"维维","can_delete":false,"product_type":"c1","uid":1050285,"ip_address":"","ucode":"0C0D96362B30DB","user_header":"https://static001.geekbang.org/account/avatar/00/10/06/ad/fe79da1d.jpg","comment_is_top":false,"comment_ctime":1527430909,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":38,"product_id":100007101,"comment_content":"有的文章介绍ARP是网络层协议，这里介绍是数据链路层协议，到底是哪一层很困惑。","like_count":0},{"had_liked":false,"id":9843,"user_name":"shanglt","can_delete":false,"product_type":"c1","uid":1028676,"ip_address":"","ucode":"B2C02CFB961698","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b2/44/461b5236.jpg","comment_is_top":false,"comment_ctime":1527123880,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":38,"product_id":100007101,"comment_content":"我觉得IP更像小区，mac是更详细的楼号单元和门牌号，一个小区可以只有一户人家，这样返回IP也没有问题，但这个小区是可以有多户的，直接返回IP是无法确定要到哪家的","like_count":0},{"had_liked":false,"id":9783,"user_name":"静界","can_delete":false,"product_type":"c1","uid":1132393,"ip_address":"","ucode":"7BE759DF502D1F","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/69/022c2231.jpg","comment_is_top":false,"comment_ctime":1527084634,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":38,"product_id":100007101,"comment_content":"MAC地址有专门的组织负责分配，理论上是全球唯一的，用于区分网络设备。IP地址是组网时分配的地址，更易于管理。","like_count":0},{"had_liked":false,"id":9743,"user_name":"Geek_d8f635","can_delete":false,"product_type":"c1","uid":1092024,"ip_address":"","ucode":"5B5CC1AD18D712","user_header":"https://static001.geekbang.org/account/avatar/00/10/a9/b8/d7182af2.jpg","comment_is_top":false,"comment_ctime":1527057828,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":38,"product_id":100007101,"comment_content":"是为了安全考虑的吧","like_count":0},{"had_liked":false,"id":9690,"user_name":"生活发言权","can_delete":false,"product_type":"c1","uid":1136291,"ip_address":"","ucode":"B6269BE979DF35","user_header":"https://static001.geekbang.org/account/avatar/00/11/56/a3/0141096a.jpg","comment_is_top":false,"comment_ctime":1527036168,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":38,"product_id":100007101,"comment_content":"因为会出现IP漂移","like_count":0},{"had_liked":false,"id":9627,"user_name":"弄潮","can_delete":false,"product_type":"c1","uid":1045033,"ip_address":"","ucode":"B00DA4CCC59B73","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f2/29/aacc3a50.jpg","comment_is_top":false,"comment_ctime":1526993360,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":38,"product_id":100007101,"comment_content":"回答: 报文的目的IP保持不变，协议不允许城关间通讯用IP（没地方放下一跳城关目的IP）。","like_count":0},{"had_liked":false,"id":9576,"user_name":"化雨","can_delete":false,"product_type":"c1","uid":1130880,"ip_address":"","ucode":"3402A03CF31B50","user_header":"https://static001.geekbang.org/account/avatar/00/11/41/80/bd6419bb.jpg","comment_is_top":false,"comment_ctime":1526955016,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":38,"product_id":100007101,"comment_content":"刚听完第2讲，正好找到了回答这个问题的思路和角度：mac层之上运行的网络层不光可以是tcp&#47;ip，也可以是其他的网络层框架。所以必须加上mac地址，这样不同的网络架构也可以共存互通。","like_count":0},{"had_liked":false,"id":9503,"user_name":"俊飞","can_delete":false,"product_type":"c1","uid":1137490,"ip_address":"","ucode":"A67B07520E0715","user_header":"https://static001.geekbang.org/account/avatar/00/11/5b/52/fea5ec99.jpg","comment_is_top":false,"comment_ctime":1526917477,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":38,"product_id":100007101,"comment_content":"预防arp欺骗","like_count":0},{"had_liked":false,"id":9474,"user_name":"Ant","can_delete":false,"product_type":"c1","uid":1007804,"ip_address":"","ucode":"FAADD0EE79E9A4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/60/bc/c6ba84bd.jpg","comment_is_top":false,"comment_ctime":1526898832,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":38,"product_id":100007101,"comment_content":"阅读疑问待查：1，本机查询根据DNS协议获取目标IP过程？2，TCP头中电商应用端口是何时如何获取到的？","like_count":0},{"had_liked":false,"id":9400,"user_name":"daydream","can_delete":false,"product_type":"c1","uid":1090891,"ip_address":"","ucode":"E9CA4CD9E6C611","user_header":"https://static001.geekbang.org/account/avatar/00/10/a5/4b/0e2f6910.jpg","comment_is_top":false,"comment_ctime":1526862612,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":39,"product_id":100007101,"comment_content":"通俗易懂","like_count":0},{"had_liked":false,"id":9394,"user_name":"Tianwei","can_delete":false,"product_type":"c1","uid":1135516,"ip_address":"","ucode":"AB338FAF1C52F9","user_header":"","comment_is_top":false,"comment_ctime":1526861539,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":39,"product_id":100007101,"comment_content":"下一跳属于本地地址，本地通信只能用二层协议，也就是说下一跳路由器收到的源mac地址就是上一个网关的出口地址","like_count":0},{"had_liked":false,"id":9370,"user_name":"jutsu","can_delete":false,"product_type":"c1","uid":1124574,"ip_address":"","ucode":"95CEDEF5D085CF","user_header":"https://static001.geekbang.org/account/avatar/00/11/28/de/54667f13.jpg","comment_is_top":false,"comment_ctime":1526824742,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":39,"product_id":100007101,"comment_content":"读完了收获多多，断然订购希望老师后面都是干货","like_count":0},{"had_liked":false,"id":9359,"user_name":"夏健","can_delete":false,"product_type":"c1","uid":1039388,"ip_address":"","ucode":"C930548D173DA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/dc/1c/f242dc72.jpg","comment_is_top":false,"comment_ctime":1526819489,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":39,"product_id":100007101,"comment_content":"通过网络协议，才能让更多的机器一起工作！ 所以，了解协议很重要！","like_count":0},{"had_liked":false,"id":9358,"user_name":"肩膀","can_delete":false,"product_type":"c1","uid":1135392,"ip_address":"","ucode":"B3D0713E812C8F","user_header":"https://static001.geekbang.org/account/avatar/00/11/53/20/1fb3e42f.jpg","comment_is_top":false,"comment_ctime":1526817604,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":39,"product_id":100007101,"comment_content":"因为Mac是在ARP协议里的，出了路由后是走TCP&#47;IP协议，所以只有IP地址了","like_count":0},{"had_liked":false,"id":9346,"user_name":"瓶子","can_delete":false,"product_type":"c1","uid":1118366,"ip_address":"","ucode":"3B2B09E3AC5951","user_header":"https://static001.geekbang.org/account/avatar/00/11/10/9e/b9a2953a.jpg","comment_is_top":false,"comment_ctime":1526805948,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":39,"product_id":100007101,"comment_content":"内在逻辑很清晰，老师写的真好","like_count":0},{"had_liked":false,"id":9326,"user_name":"心","can_delete":false,"product_type":"c1","uid":1130609,"ip_address":"","ucode":"E9CF5121CB3B0D","user_header":"https://static001.geekbang.org/account/avatar/00/11/40/71/999c5b2f.jpg","comment_is_top":false,"comment_ctime":1526787701,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":39,"product_id":100007101,"comment_content":"路由网络层 mac链路层 什么时候需要网关 需要经过三层转发的时候  arp先会询问某个ip对应的mac 如果没有则会丢给网关  到网关通信的时候直接打上包 就会给默认路由 然后默认路由在用自己的mac表打包一步一步走下去 在走回来 层层递进打包 层层递进解包","like_count":0},{"had_liked":false,"id":9322,"user_name":"2102","can_delete":false,"product_type":"c1","uid":1070298,"ip_address":"","ucode":"A67068F2A3157E","user_header":"https://static001.geekbang.org/account/avatar/00/10/54/da/e2e5ddf7.jpg","comment_is_top":false,"comment_ctime":1526786530,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":39,"product_id":100007101,"comment_content":"这个IP地址只是找到了网关吧","like_count":0},{"had_liked":false,"id":9308,"user_name":"M_A_R_K","can_delete":false,"product_type":"c1","uid":1110873,"ip_address":"","ucode":"48928A840A994B","user_header":"https://static001.geekbang.org/account/avatar/00/10/f3/59/04731ca9.jpg","comment_is_top":false,"comment_ctime":1526778054,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":39,"product_id":100007101,"comment_content":"到达城关的目的是为了与城内通信，而城内是通过MAC来找人，所以只通过路由表ip的话，一是如果路由表未更新，可能找错人；二是最终还是得通过MAC来找人","like_count":0},{"had_liked":false,"id":9298,"user_name":"徐良红","can_delete":false,"product_type":"c1","uid":1131408,"ip_address":"","ucode":"830C7007B104BC","user_header":"https://static001.geekbang.org/account/avatar/00/11/43/90/167a13fa.jpg","comment_is_top":false,"comment_ctime":1526740728,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":39,"product_id":100007101,"comment_content":"mac地址理论上唯一，实际情况由于种种原因（例如一些小厂家乱用，mac修改器），mac一样的情况在现实网络中存在","like_count":0},{"had_liked":false,"id":9289,"user_name":"auroroa","can_delete":false,"product_type":"c1","uid":1057164,"ip_address":"","ucode":"0FF44C9A40E8CD","user_header":"https://static001.geekbang.org/account/avatar/00/10/21/8c/f7a24bc5.jpg","comment_is_top":false,"comment_ctime":1526733132,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":40,"product_id":100007101,"comment_content":"1.IP 可能是动态的\n2.一个 IP 可能对应多个终端，比如家庭局域网对外使用一个 IP","like_count":0},{"had_liked":false,"id":9288,"user_name":"alex","can_delete":false,"product_type":"c1","uid":1132659,"ip_address":"","ucode":"FD68A2A8A5B64A","user_header":"https://static001.geekbang.org/account/avatar/00/11/48/73/cefaaf71.jpg","comment_is_top":false,"comment_ctime":1526732000,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":40,"product_id":100007101,"comment_content":"ip是网络层的，arp在ip层下面，知道了ip又能怎样，还是要交给下层去处理。主要不同子网类型不一样，可能是以太网，或是其它网类型，还是要他们自己才知道，ip不管也不知道这些","like_count":0},{"had_liked":false,"id":9238,"user_name":"文竹","can_delete":false,"product_type":"c1","uid":1103167,"ip_address":"","ucode":"74413B1975976B","user_header":"https://static001.geekbang.org/account/avatar/00/10/d5/3f/80bf4841.jpg","comment_is_top":false,"comment_ctime":1526699812,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":40,"product_id":100007101,"comment_content":"目标机器是在链路层检查mac的，先于IP，最终通信都通过mac. IP主要在于好记，更方便进行路由转发。","like_count":0},{"had_liked":false,"id":9234,"user_name":"一叶か知秋","can_delete":false,"product_type":"c1","uid":1132089,"ip_address":"","ucode":"99916DBD4988BF","user_header":"https://static001.geekbang.org/account/avatar/00/11/46/39/0a284d36.jpg","comment_is_top":false,"comment_ctime":1526699307,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":40,"product_id":100007101,"comment_content":"圣经中的是巴别塔，我是基督徒，ʕ•͓͡•ʔ-̫͡-ʕ•̫͡•ʔ","like_count":0},{"had_liked":false,"id":9231,"user_name":"ben001","can_delete":false,"product_type":"c1","uid":1014338,"ip_address":"","ucode":"2BD6C466F6BD27","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7a/42/e6477279.jpg","comment_is_top":false,"comment_ctime":1526698805,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":40,"product_id":100007101,"comment_content":"websockt是http协议吗","like_count":0},{"had_liked":false,"id":9206,"user_name":"小先生","can_delete":false,"product_type":"c1","uid":1055214,"ip_address":"","ucode":"E5F2052E0323C0","user_header":"https://static001.geekbang.org/account/avatar/00/10/19/ee/e395a35e.jpg","comment_is_top":false,"comment_ctime":1526686857,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":40,"product_id":100007101,"comment_content":"Mac 地址是保证设备唯一性的。因为烧在了网卡上。而IP地址是会变动。\nMac地址如果在整个互联网中通信，是一个灾难，因为它是通过广播形式查找的，只适合于在局域网中使用。","like_count":0},{"had_liked":false,"id":9194,"user_name":"子悠","can_delete":false,"product_type":"c1","uid":1000383,"ip_address":"","ucode":"070BB09477E8A8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/43/bf/9a982bc1.jpg","comment_is_top":false,"comment_ctime":1526662897,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":40,"product_id":100007101,"comment_content":"看到好多说Mac 地址是唯一的，但是现实社会中，不说其他的，就我所在的智能电视行业，就发现有好多Mac 重复的现象。","like_count":0},{"had_liked":false,"id":9193,"user_name":"奔腾ing","can_delete":false,"product_type":"c1","uid":1136372,"ip_address":"","ucode":"09446E9E25E734","user_header":"https://static001.geekbang.org/account/avatar/00/11/56/f4/8ca92aa0.jpg","comment_is_top":false,"comment_ctime":1526662296,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":40,"product_id":100007101,"comment_content":"平时在工作中用的比较多的是应用层和传输层的协议，很少关注网络层和链路层的协议，这几层在日常工作中，会有哪些问题吗？什么样的场景下会出现这些问题？怎么解决？","like_count":0},{"had_liked":false,"id":9171,"user_name":"pflnh","can_delete":false,"product_type":"c1","uid":1068144,"ip_address":"","ucode":"FFB5D7AA33D797","user_header":"https://static001.geekbang.org/account/avatar/00/10/4c/70/05109d48.jpg","comment_is_top":false,"comment_ctime":1526651795,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":40,"product_id":100007101,"comment_content":"拜读了","like_count":0},{"had_liked":false,"id":9170,"user_name":"pflnh","can_delete":false,"product_type":"c1","uid":1068144,"ip_address":"","ucode":"FFB5D7AA33D797","user_header":"https://static001.geekbang.org/account/avatar/00/10/4c/70/05109d48.jpg","comment_is_top":false,"comment_ctime":1526651745,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":40,"product_id":100007101,"comment_content":"拜读了","like_count":0},{"had_liked":false,"id":9167,"user_name":"!Anonymous","can_delete":false,"product_type":"c1","uid":1007038,"ip_address":"","ucode":"87197C70CD3727","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5d/be/8e8c0176.jpg","comment_is_top":false,"comment_ctime":1526651083,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":41,"product_id":100007101,"comment_content":"因为硬件通信是电平变化，MAC 地址对于了一串电平。","like_count":0},{"had_liked":false,"id":9164,"user_name":"MJ·GAO","can_delete":false,"product_type":"c1","uid":1135078,"ip_address":"","ucode":"ED65F0241D5F9A","user_header":"https://static001.geekbang.org/account/avatar/00/11/51/e6/63d17350.jpg","comment_is_top":false,"comment_ctime":1526650199,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":41,"product_id":100007101,"comment_content":"前端工程师，来捧场啦……","like_count":0},{"had_liked":false,"id":9162,"user_name":"小顿细路","can_delete":false,"product_type":"c1","uid":1134308,"ip_address":"","ucode":"CD3435705F9FAC","user_header":"https://static001.geekbang.org/account/avatar/00/11/4e/e4/d0f1875d.jpg","comment_is_top":false,"comment_ctime":1526650093,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":41,"product_id":100007101,"comment_content":"因为MAC地址是唯一，但IP地址是可以动态的(ಡωಡ) 对吗？","like_count":0},{"had_liked":false,"id":9149,"user_name":"Tierney","can_delete":false,"product_type":"c1","uid":1133987,"ip_address":"","ucode":"4BD726C38EB56B","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/a3/6b830568.jpg","comment_is_top":false,"comment_ctime":1526643743,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":41,"product_id":100007101,"comment_content":"城关要知道去往目的ip要走哪个城关，这个是记录在每个城关，由城关维护这个信息记录吗？","like_count":0},{"had_liked":false,"id":9146,"user_name":"Dr.Li","can_delete":false,"product_type":"c1","uid":1025671,"ip_address":"","ucode":"A26A4183504B6B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a6/87/e802a33e.jpg","comment_is_top":false,"comment_ctime":1526642952,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":41,"product_id":100007101,"comment_content":"arp协议可以把ip地址和mac对应起来，所以需要mac","like_count":0},{"had_liked":false,"id":9141,"user_name":"Sunc","can_delete":false,"product_type":"c1","uid":1018339,"ip_address":"","ucode":"DA719B4EB7A5F7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/89/e3/bef82d3c.jpg","comment_is_top":false,"comment_ctime":1526633025,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":41,"product_id":100007101,"comment_content":"Tcp&#47;ip 协议采用分层设计共4层，数据流最终需要物理媒介传输，ip属于网络层，需要把数据交给下一层接入层来传输，所以需要接入层协议地址来完成此工作。","like_count":0},{"had_liked":false,"id":9140,"user_name":"kafka","can_delete":false,"product_type":"c1","uid":1077804,"ip_address":"","ucode":"19C30337758CF0","user_header":"","comment_is_top":false,"comment_ctime":1526632809,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":41,"product_id":100007101,"comment_content":"因为大多IP是动态的，MAC确实唯一的。而且网络层和传输层只关心目标主机的IP地址。使用IP协议时，数据链路层接到的上层数据中，只包含目的主机的IP地址。这就需要根据目的主机的IP地址，获得其MAC地址，于是也就有了ARP解析协议。","like_count":0},{"had_liked":false,"id":9129,"user_name":"夏洛克的救赎","can_delete":false,"product_type":"c1","uid":1021334,"ip_address":"","ucode":"44453DD27A3216","user_header":"https://static001.geekbang.org/account/avatar/00/0f/95/96/0020bd67.jpg","comment_is_top":false,"comment_ctime":1526625349,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":41,"product_id":100007101,"comment_content":"tcp中客户端的端口是服务端返回数据需要使用的吧","like_count":0},{"had_liked":false,"id":9128,"user_name":"code4j","can_delete":false,"product_type":"c1","uid":1127649,"ip_address":"","ucode":"371B890B715144","user_header":"https://static001.geekbang.org/account/avatar/00/11/34/e1/d1f201ae.jpg","comment_is_top":false,"comment_ctime":1526622265,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":41,"product_id":100007101,"comment_content":"请求的原ip地址是自己的ip，目标ip是对方tomcat所在机器。那么从我们机器的网关出去，经过每一个网关的时候，不需要过往路由器的io吗，只需要下一个路由器的mac地址就行了么？不是说mac地址在本地通过arp才能找到具体机器么，不同路由器之间怎么把mac转换成ip呢","like_count":0},{"had_liked":false,"id":9125,"user_name":"一周思进","can_delete":false,"product_type":"c1","uid":1032125,"ip_address":"","ucode":"00BE5402479B16","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bf/bd/0c40979f.jpg","comment_is_top":false,"comment_ctime":1526618852,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":41,"product_id":100007101,"comment_content":"我看到的问题是知道目标IP，为啥还要查找目标MAC地址来最终转发数据。最先想到的就是MAC地址唯一，IP不固定的因数，但这和上面好像文不对题。然后想到的是历史问题，最先网络简单，开始应该就是直接通过MAC地址通信，随着网络规模的扩大，使用交换机已严重影响网络通信，需要通过路由转发来进行网络隔离，才有的IP网段的划分。但既然有了IP，为啥不直接IP寻址通信，还是没回答到点上的感觉…  只能觉得一是为了兼容已有的链路层协议，二还是因为MAC地址的唯一性，防止arp欺骗提高安全性…","like_count":0},{"had_liked":false,"id":9123,"user_name":"Frank_龙","can_delete":false,"product_type":"c1","uid":1045048,"ip_address":"","ucode":"8599A648600345","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f2/38/e8f65d1d.jpg","comment_is_top":false,"comment_ctime":1526618511,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":42,"product_id":100007101,"comment_content":"谢谢大佬，通俗易懂，深入浅出","like_count":0},{"had_liked":false,"id":9122,"user_name":"小小鸟","can_delete":false,"product_type":"c1","uid":1102550,"ip_address":"","ucode":"11C15D267DE457","user_header":"https://static001.geekbang.org/account/avatar/00/10/d2/d6/d393593d.jpg","comment_is_top":false,"comment_ctime":1526618030,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":42,"product_id":100007101,"comment_content":"一直对网络协议比较模糊 期待这次学习","like_count":0},{"had_liked":false,"id":9120,"user_name":"新","can_delete":false,"product_type":"c1","uid":1132816,"ip_address":"","ucode":"1B7E69C29046A0","user_header":"https://static001.geekbang.org/account/avatar/00/11/49/10/46da7082.jpg","comment_is_top":false,"comment_ctime":1526617292,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":42,"product_id":100007101,"comment_content":"因为mac地址是网卡的地址，用于两台机器通信。带上Mac地址可以再其他层通信出现问题或者返回成功报文的时候找到源主机","like_count":0},{"had_liked":false,"id":9112,"user_name":"Fan","can_delete":false,"product_type":"c1","uid":1115232,"ip_address":"","ucode":"3BF28670FD9407","user_header":"https://static001.geekbang.org/account/avatar/00/11/04/60/64d166b6.jpg","comment_is_top":false,"comment_ctime":1526611621,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":42,"product_id":100007101,"comment_content":"讲得不错，通熟易懂，希望后面能讲得稍微深入点。👍","like_count":0},{"had_liked":false,"id":9106,"user_name":"空空道人","can_delete":false,"product_type":"c1","uid":1100835,"ip_address":"","ucode":"22B06EE4C600A9","user_header":"https://static001.geekbang.org/account/avatar/00/10/cc/23/b1725b57.jpg","comment_is_top":false,"comment_ctime":1526609516,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":42,"product_id":100007101,"comment_content":"局域网里面的IP地址都是不固定的","like_count":0},{"had_liked":false,"id":9102,"user_name":"chenyigang","can_delete":false,"product_type":"c1","uid":1105738,"ip_address":"","ucode":"B128BE3F96593B","user_header":"https://static001.geekbang.org/account/avatar/00/10/df/4a/cba0cabc.jpg","comment_is_top":false,"comment_ctime":1526608860,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":42,"product_id":100007101,"comment_content":"如果有2个ip一样的，就不知道传给谁了。mac地址设计时要求唯一，一个网卡一个唯一mac地址。有了唯一性，使用mac地址就知道传给谁了。","like_count":0},{"had_liked":false,"id":9098,"user_name":"ivan","can_delete":false,"product_type":"c1","uid":1112120,"ip_address":"","ucode":"B9DFB4AE99B269","user_header":"https://static001.geekbang.org/account/avatar/00/10/f8/38/5a857c96.jpg","comment_is_top":false,"comment_ctime":1526608353,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":42,"product_id":100007101,"comment_content":"帮我理清了不少概念 感谢。\n对于最后的问题想不清楚，一个网关ip对应一个确切的网关，我认为通过ip是可以到达网关的。单单说网络分层里面，各个层的职责有明确分工，链路层不能识别ip，链路层需要基于mac工作，好像很牵强","like_count":0},{"had_liked":false,"id":9094,"user_name":"Aaaaaaaaaaayou","can_delete":false,"product_type":"c1","uid":1073601,"ip_address":"","ucode":"67BA315B87587D","user_header":"https://static001.geekbang.org/account/avatar/00/10/61/c1/93031a2a.jpg","comment_is_top":false,"comment_ctime":1526607801,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":42,"product_id":100007101,"comment_content":"因为上一层的数据是作为载荷放到下一层进行传输的","like_count":0},{"had_liked":false,"id":9083,"user_name":"张周强","can_delete":false,"product_type":"c1","uid":1122784,"ip_address":"","ucode":"E48CD936F86D64","user_header":"https://static001.geekbang.org/account/avatar/00/11/21/e0/c3b52b4d.jpg","comment_is_top":false,"comment_ctime":1526605899,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":42,"product_id":100007101,"comment_content":"数据有上层到下层，最后从底层（物理层）出去，对吗？","like_count":0},{"had_liked":false,"id":9081,"user_name":"飞","can_delete":false,"product_type":"c1","uid":1064960,"ip_address":"","ucode":"AE7C9C6232F5C3","user_header":"https://static001.geekbang.org/account/avatar/00/10/40/00/0759bde1.jpg","comment_is_top":false,"comment_ctime":1526605578,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":42,"product_id":100007101,"comment_content":"找到城关IP后还不行，要找到城内具体目标机器还是要通过Mac地址的","like_count":0},{"had_liked":false,"id":9078,"user_name":"lalala","can_delete":false,"product_type":"c1","uid":1130859,"ip_address":"","ucode":"231B081D912BAA","user_header":"https://static001.geekbang.org/account/avatar/00/11/41/6b/6c0c0f29.jpg","comment_is_top":false,"comment_ctime":1526605370,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":43,"product_id":100007101,"comment_content":"我个人理解应 有了mac地址能从外网通过路由器定位到内网的指定机器","like_count":0},{"had_liked":false,"id":9076,"user_name":"没心没肺","can_delete":false,"product_type":"c1","uid":1048207,"ip_address":"","ucode":"2F80ACC4697EEE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fe/8f/466f880d.jpg","comment_is_top":false,"comment_ctime":1526605366,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":43,"product_id":100007101,"comment_content":"写作业。因为一个网段内部通信（或者说二层通信）使用MAC地址，跨网段通信使用IP地址（且源目IP不变）。在网段内部可以使用SW的CAM表转发数据，跨网段需要查找路由表转发数据。","like_count":0},{"had_liked":false,"id":9072,"user_name":"小文同学","can_delete":false,"product_type":"c1","uid":1001893,"ip_address":"","ucode":"48F2AEB989C12A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/a5/e4c1c2d4.jpg","comment_is_top":false,"comment_ctime":1526605140,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":43,"product_id":100007101,"comment_content":"我想，假如数据包A期望发送到地址1.1.1.10，收到这个包的路由器ip地址可能是1.1.1.0，这个路由器和目标主机又刚好处于同一个数据链路中，那ARP协议可以根据ip地址获得MAC地址而直接发送数据包到目标主机去。\n\n我的考虑是从最后一个网关的状态出发的，对回答没十足把握，望老师指点一二。","like_count":0},{"had_liked":false,"id":9070,"user_name":"夏清风","can_delete":false,"product_type":"c1","uid":1031653,"ip_address":"","ucode":"99FE5038EE8F2C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bd/e5/6b8477f8.jpg","comment_is_top":false,"comment_ctime":1526604815,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":43,"product_id":100007101,"comment_content":"Mac地址相当于身份证号码，唯一标识。","like_count":0},{"had_liked":false,"id":9066,"user_name":"唐唐","can_delete":false,"product_type":"c1","uid":1029186,"ip_address":"","ucode":"52876E04BB3A9F","user_header":"","comment_is_top":false,"comment_ctime":1526604596,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":43,"product_id":100007101,"comment_content":"通俗易懂，👍","like_count":0},{"had_liked":false,"id":9065,"user_name":"明明","can_delete":false,"product_type":"c1","uid":1131283,"ip_address":"","ucode":"95F26B8DB0C79C","user_header":"https://static001.geekbang.org/account/avatar/00/11/43/13/f065aaa8.jpg","comment_is_top":false,"comment_ctime":1526604594,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":43,"product_id":100007101,"comment_content":"Mac地址是固定的不会变的，是这个原因么","like_count":0},{"had_liked":false,"id":9060,"user_name":"nicky_chin","can_delete":false,"product_type":"c1","uid":1132280,"ip_address":"","ucode":"934A839B27B622","user_header":"https://static001.geekbang.org/account/avatar/00/11/46/f8/1657d5b1.jpg","comment_is_top":false,"comment_ctime":1526604474,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":43,"product_id":100007101,"comment_content":"去找请求的ip就是城关这一步不理解，不知它怎么找到的，为什么一定螚找到🙄","like_count":0},{"had_liked":false,"id":9056,"user_name":"SMTCode","can_delete":false,"product_type":"c1","uid":1109038,"ip_address":"","ucode":"0D837A753E4FAB","user_header":"https://static001.geekbang.org/account/avatar/00/10/ec/2e/49d13bd2.jpg","comment_is_top":false,"comment_ctime":1526604277,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":43,"product_id":100007101,"comment_content":"我的理解是：MAC地址是网卡的标识，实际的数据是通过网卡硬件间的电信号进行传输，经过网卡驱动的解析，将电信号还原成IP层识别的包。","like_count":0},{"had_liked":false,"id":9048,"user_name":"王威","can_delete":false,"product_type":"c1","uid":1126110,"ip_address":"","ucode":"A2740692A4638B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ993ibxRIUE6SX8X0EmXQpic8rib5n2bDT4eicOqaMbibOKtdCCtibtNYHia2lOy0Qf9BEFm4T3Yvr6USEw/132","comment_is_top":false,"comment_ctime":1526603552,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":43,"product_id":100007101,"comment_content":"我理解是这样的，ip包的发送在实现上是需要封装成数据链路层的包，然后最终通过电信号发送出去，而数据链路层的路由是根据mac地址来实现的。","like_count":0},{"had_liked":false,"id":9036,"user_name":"小马哥","can_delete":false,"product_type":"c1","uid":1107153,"ip_address":"","ucode":"376833AC2A1589","user_header":"https://static001.geekbang.org/account/avatar/00/10/e4/d1/002f9955.jpg","comment_is_top":false,"comment_ctime":1526601500,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":43,"product_id":100007101,"comment_content":"本地对外ip只有一个，里面可能有好多机器，请求是要发到具体服务器上，mac能定位到具体的机器，不知对否。","like_count":0},{"had_liked":false,"id":9033,"user_name":"小先生","can_delete":false,"product_type":"c1","uid":1055214,"ip_address":"","ucode":"E5F2052E0323C0","user_header":"https://static001.geekbang.org/account/avatar/00/10/19/ee/e395a35e.jpg","comment_is_top":false,"comment_ctime":1526600468,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":44,"product_id":100007101,"comment_content":"终于开更，先留名再读。","like_count":0}]}