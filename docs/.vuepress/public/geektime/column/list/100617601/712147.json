{"id":712147,"title":"15ï½œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼šé€šè¿‡RAGåŠ©åŠ›é²œèŠ±è¿è¥","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é»„ä½³ï¼Œæ¬¢è¿æ¥åˆ°LangChainå®æˆ˜è¯¾ï¼</p><p>åœ¨<a href=\"https://time.geekbang.org/column/article/699436\">ç¬¬2è¯¾</a>ä¸­ï¼Œæˆ‘æ›¾ç»å¸¦ç€ä½ å®Œæˆäº†ä¸€ä¸ªåŸºäºæœ¬åœ°æ–‡æ¡£çš„é—®ç­”ç³»ç»Ÿã€‚ç”¨å½“ä¸‹æ—¶é«¦çš„è¯è¯´ï¼Œä½ å®ç°äº†ä¸€ä¸ªRAG åº”ç”¨ã€‚</p><p>ä»€ä¹ˆæ˜¯RAGï¼Ÿå…¶å…¨ç§°ä¸ºRetrieval-Augmented Generationï¼Œå³æ£€ç´¢å¢å¼ºç”Ÿæˆï¼Œå®ƒç»“åˆäº†æ£€ç´¢å’Œç”Ÿæˆçš„èƒ½åŠ›ï¼Œä¸ºæ–‡æœ¬åºåˆ—ç”Ÿæˆä»»åŠ¡å¼•å…¥å¤–éƒ¨çŸ¥è¯†ã€‚RAGå°†ä¼ ç»Ÿçš„è¯­è¨€ç”Ÿæˆæ¨¡å‹ä¸å¤§è§„æ¨¡çš„å¤–éƒ¨çŸ¥è¯†åº“ç›¸ç»“åˆï¼Œä½¿æ¨¡å‹åœ¨ç”Ÿæˆå“åº”æˆ–æ–‡æœ¬æ—¶å¯ä»¥åŠ¨æ€åœ°ä»è¿™äº›çŸ¥è¯†åº“ä¸­æ£€ç´¢ç›¸å…³ä¿¡æ¯ã€‚è¿™ç§ç»“åˆæ–¹æ³•æ—¨åœ¨å¢å¼ºæ¨¡å‹çš„ç”Ÿæˆèƒ½åŠ›ï¼Œä½¿å…¶èƒ½å¤Ÿäº§ç”Ÿæ›´ä¸ºä¸°å¯Œã€å‡†ç¡®å’Œæœ‰æ ¹æ®çš„å†…å®¹ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦å…·ä½“ç»†èŠ‚æˆ–å¤–éƒ¨äº‹å®æ”¯æŒçš„åœºåˆã€‚</p><p>RAG çš„å·¥ä½œåŸç†å¯ä»¥æ¦‚æ‹¬ä¸ºå‡ ä¸ªæ­¥éª¤ã€‚</p><ol>\n<li><strong>æ£€ç´¢</strong><strong>ï¼š</strong>å¯¹äºç»™å®šçš„è¾“å…¥ï¼ˆé—®é¢˜ï¼‰ï¼Œæ¨¡å‹é¦–å…ˆä½¿ç”¨æ£€ç´¢ç³»ç»Ÿä»å¤§å‹æ–‡æ¡£é›†åˆä¸­æŸ¥æ‰¾ç›¸å…³çš„æ–‡æ¡£æˆ–æ®µè½ã€‚è¿™ä¸ªæ£€ç´¢ç³»ç»Ÿé€šå¸¸åŸºäºå¯†é›†å‘é‡æœç´¢ï¼Œä¾‹å¦‚ChromaDBã€Faissè¿™æ ·çš„å‘é‡æ•°æ®åº“ã€‚</li>\n<li><strong>ä¸Šä¸‹æ–‡ç¼–ç </strong><strong>ï¼š</strong>æ‰¾åˆ°ç›¸å…³çš„æ–‡æ¡£æˆ–æ®µè½åï¼Œæ¨¡å‹å°†å®ƒä»¬ä¸åŸå§‹è¾“å…¥ï¼ˆé—®é¢˜ï¼‰ä¸€èµ·ç¼–ç ã€‚</li>\n<li><strong>ç”Ÿæˆ</strong><strong>ï¼š</strong>ä½¿ç”¨ç¼–ç çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œæ¨¡å‹ç”Ÿæˆè¾“å‡ºï¼ˆç­”æ¡ˆï¼‰ã€‚è¿™é€šå¸¸å½“ç„¶æ˜¯é€šè¿‡å¤§æ¨¡å‹å®Œæˆçš„ã€‚</li>\n</ol><p>RAG çš„ä¸€ä¸ªå…³é”®ç‰¹ç‚¹æ˜¯ï¼Œå®ƒä¸ä»…ä»…ä¾èµ–äºè®­ç»ƒæ•°æ®ä¸­çš„ä¿¡æ¯ï¼Œè¿˜å¯ä»¥ä»å¤§å‹å¤–éƒ¨çŸ¥è¯†åº“ä¸­æ£€ç´¢ä¿¡æ¯ã€‚è¿™ä½¿å¾—RAGæ¨¡å‹ç‰¹åˆ«é€‚åˆå¤„ç†åœ¨è®­ç»ƒæ•°æ®ä¸­æœªå‡ºç°çš„é—®é¢˜ã€‚</p><!-- [[[read_end]]] --><p><img src=\"https://static001.geekbang.org/resource/image/f3/0d/f326343298bc0bc540978604203a3e0d.jpg?wh=4256x1472\" alt=\"\" title=\"RAG çš„ Pipeline\"></p><p>RAGç±»çš„ä»»åŠ¡ï¼Œç›®å‰ä¼ä¸šå®é™…åº”ç”¨åœºæ™¯ä¸­çš„éœ€æ±‚é‡ç›¸å½“å¤§ï¼Œä¹Ÿæ˜¯LangChainæ‰€å…³æ³¨çš„ä¸€ä¸ªé‡ç‚¹å†…å®¹ã€‚åœ¨è¿™èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä¼šå¯¹LangChainä¸­æ‰€æœ‰ä¸ä¹‹ç›¸å…³çš„å·¥å…·è¿›è¡Œä¸€ä¸ªæ¢³ç†ï¼Œä¾¿äºä½ æŠŠæ¡LangChainåœ¨è¿™ä¸ªé¢†åŸŸä¸­éƒ½èƒ½å¤Ÿåšåˆ°äº›ä»€ä¹ˆã€‚</p><h2>æ–‡æ¡£åŠ è½½</h2><p>RAGçš„ç¬¬ä¸€æ­¥æ˜¯æ–‡æ¡£åŠ è½½ã€‚LangChain æä¾›äº†å¤šç§ç±»å‹çš„æ–‡æ¡£åŠ è½½å™¨ï¼Œä»¥åŠ è½½å„ç§ç±»å‹çš„æ–‡æ¡£ï¼ˆHTMLã€PDFã€ä»£ç ï¼‰ï¼Œå¹¶ä¸è¯¥é¢†åŸŸçš„å…¶ä»–ä¸»è¦æä¾›å•†å¦‚ Airbyte å’Œ Unstructured.IO è¿›è¡Œäº†é›†æˆã€‚</p><p>ä¸‹é¢ç»™å‡ºå¸¸ç”¨çš„æ–‡æ¡£åŠ è½½å™¨åˆ—è¡¨ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/2a/67/2af251fa78768b54a7d6a4a96423a867.jpg?wh=1584x656\" alt=\"\"></p><h2>æ–‡æœ¬è½¬æ¢</h2><p>åŠ è½½æ–‡æ¡£åï¼Œä¸‹ä¸€ä¸ªæ­¥éª¤æ˜¯å¯¹æ–‡æœ¬è¿›è¡Œè½¬æ¢ï¼Œè€Œæœ€å¸¸è§çš„æ–‡æœ¬è½¬æ¢å°±æ˜¯æŠŠé•¿æ–‡æ¡£åˆ†å‰²æˆæ›´å°çš„å—ï¼ˆæˆ–è€…æ˜¯ç‰‡ï¼Œæˆ–è€…æ˜¯èŠ‚ç‚¹ï¼‰ï¼Œä»¥é€‚åˆæ¨¡å‹çš„ä¸Šä¸‹æ–‡çª—å£ã€‚LangChain æœ‰è®¸å¤šå†…ç½®çš„æ–‡æ¡£è½¬æ¢å™¨ï¼Œå¯ä»¥è½»æ¾åœ°æ‹†åˆ†ã€ç»„åˆã€è¿‡æ»¤å’Œä»¥å…¶ä»–æ–¹å¼æ“ä½œæ–‡æ¡£ã€‚</p><h3>æ–‡æœ¬åˆ†å‰²å™¨</h3><p>æŠŠé•¿æ–‡æœ¬åˆ†å‰²æˆå—å¬èµ·æ¥å¾ˆç®€å•ï¼Œå…¶å®ä¹Ÿå­˜åœ¨ä¸€äº›ç»†èŠ‚ã€‚æ–‡æœ¬åˆ†å‰²çš„è´¨é‡ä¼šå½±å“æ£€ç´¢çš„ç»“æœè´¨é‡ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›å°†è¯­ä¹‰ç›¸å…³çš„æ–‡æœ¬ç‰‡æ®µä¿ç•™åœ¨ä¸€èµ·ã€‚</p><p>LangChainä¸­ï¼Œæ–‡æœ¬åˆ†å‰²å™¨çš„å·¥ä½œåŸç†å¦‚ä¸‹ï¼š</p><ol>\n<li>å°†æ–‡æœ¬åˆ†æˆå°çš„ã€å…·æœ‰è¯­ä¹‰æ„ä¹‰çš„å—ï¼ˆé€šå¸¸æ˜¯å¥å­ï¼‰ã€‚</li>\n<li>å¼€å§‹å°†è¿™äº›å°å—ç»„åˆæˆä¸€ä¸ªæ›´å¤§çš„å—ï¼Œç›´åˆ°è¾¾åˆ°ä¸€å®šçš„å¤§å°ã€‚</li>\n<li>ä¸€æ—¦è¾¾åˆ°è¯¥å¤§å°ï¼Œä¸€ä¸ªå—å°±å½¢æˆäº†ï¼Œå¯ä»¥å¼€å§‹åˆ›å»ºæ–°æ–‡æœ¬å—ã€‚è¿™ä¸ªæ–°æ–‡æœ¬å—å’Œåˆšåˆšç”Ÿæˆçš„å—è¦æœ‰ä¸€äº›é‡å ï¼Œä»¥ä¿æŒå—ä¹‹é—´çš„ä¸Šä¸‹æ–‡ã€‚</li>\n</ol><p>å› æ­¤ï¼ŒLangChainæä¾›çš„å„ç§æ–‡æœ¬æ‹†åˆ†å™¨å¯ä»¥å¸®åŠ©ä½ ä»ä¸‹é¢å‡ ä¸ªè§’åº¦è®¾å®šä½ çš„åˆ†å‰²ç­–ç•¥å’Œå‚æ•°ï¼š</p><ol>\n<li>æ–‡æœ¬å¦‚ä½•åˆ†å‰²</li>\n<li>å—çš„å¤§å°</li>\n<li>å—ä¹‹é—´é‡å æ–‡æœ¬çš„é•¿åº¦</li>\n</ol><p>è¿™äº›æ–‡æœ¬åˆ†å‰²å™¨çš„è¯´æ˜å’Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/51/83/517c22ba8c7d78a755d5b29ec16d3e83.jpg?wh=2020x887\" alt=\"\"></p><p>ä½ å¯èƒ½ä¼šå…³å¿ƒï¼Œæ–‡æœ¬åˆ†å‰²åœ¨å®è·µï¼Œæœ‰å“ªäº›å…·ä½“çš„è€ƒé‡å› ç´ ï¼Œæˆ‘æ€»ç»“äº†ä¸‹é¢å‡ ç‚¹ã€‚</p><p><strong>é¦–å…ˆï¼Œå°±æ˜¯LLM çš„å…·ä½“é™åˆ¶ã€‚</strong>GPT-3.5-turboæ”¯æŒçš„ä¸Šä¸‹æ–‡çª—å£ä¸º4096ä¸ªä»¤ç‰Œï¼Œè¿™æ„å‘³ç€è¾“å…¥ä»¤ç‰Œå’Œç”Ÿæˆçš„è¾“å‡ºä»¤ç‰Œçš„æ€»å’Œä¸èƒ½è¶…è¿‡4096ï¼Œå¦åˆ™ä¼šå‡ºé”™ã€‚ä¸ºäº†ä¿è¯ä¸è¶…è¿‡è¿™ä¸ªé™åˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥é¢„ç•™çº¦2000ä¸ªä»¤ç‰Œä½œä¸ºè¾“å…¥æç¤ºï¼Œç•™ä¸‹çº¦2000ä¸ªä»¤ç‰Œä½œä¸ºè¿”å›çš„æ¶ˆæ¯ã€‚è¿™æ ·ï¼Œå¦‚æœä½ æå–å‡ºäº†äº”ä¸ªç›¸å…³ä¿¡æ¯å—ï¼Œé‚£ä¹ˆæ¯ä¸ªç‰‡çš„å¤§å°ä¸åº”è¶…è¿‡400ä¸ªä»¤ç‰Œã€‚</p><p><strong>æ­¤å¤–ï¼Œæ–‡æœ¬åˆ†å‰²ç­–ç•¥çš„é€‰æ‹©å’Œä»»åŠ¡ç±»å‹ç›¸å…³ã€‚</strong></p><ul>\n<li>éœ€è¦ç»†è‡´æŸ¥çœ‹æ–‡æœ¬çš„ä»»åŠ¡ï¼Œæœ€å¥½ä½¿ç”¨è¾ƒå°çš„åˆ†å—ã€‚ä¾‹å¦‚ï¼Œæ‹¼å†™æ£€æŸ¥ã€è¯­æ³•æ£€æŸ¥å’Œæ–‡æœ¬åˆ†æå¯èƒ½éœ€è¦è¯†åˆ«æ–‡æœ¬ä¸­çš„å•ä¸ªå•è¯æˆ–å­—ç¬¦ã€‚åƒåœ¾é‚®ä»¶è¯†åˆ«ã€æŸ¥æ‰¾å‰½çªƒå’Œæƒ…æ„Ÿåˆ†æç±»ä»»åŠ¡ï¼Œä»¥åŠæœç´¢å¼•æ“ä¼˜åŒ–ã€ä¸»é¢˜å»ºæ¨¡ä¸­å¸¸ç”¨çš„å…³é”®å­—æå–ä»»åŠ¡ä¹Ÿå±äºè¿™ç±»ç»†è‡´ä»»åŠ¡ã€‚</li>\n<li>éœ€è¦å…¨é¢äº†è§£æ–‡æœ¬çš„ä»»åŠ¡ï¼Œåˆ™ä½¿ç”¨è¾ƒå¤§çš„åˆ†å—ã€‚ä¾‹å¦‚ï¼Œæœºå™¨ç¿»è¯‘ã€æ–‡æœ¬æ‘˜è¦å’Œé—®ç­”ä»»åŠ¡éœ€è¦ç†è§£æ–‡æœ¬çš„æ•´ä½“å«ä¹‰ã€‚è€Œè‡ªç„¶è¯­è¨€æ¨ç†ã€é—®ç­”å’Œæœºå™¨ç¿»è¯‘éœ€è¦è¯†åˆ«æ–‡æœ¬ä¸­ä¸åŒéƒ¨åˆ†ä¹‹é—´çš„å…³ç³»ã€‚è¿˜æœ‰åˆ›æ„å†™ä½œï¼Œéƒ½å±äºè¿™ç§ç²—æ”¾å‹çš„ä»»åŠ¡ã€‚</li>\n</ul><p><strong>æœ€åï¼Œä½ ä¹Ÿè¦è€ƒè™‘æ‰€åˆ†å‰²çš„æ–‡æœ¬çš„æ€§è´¨ã€‚</strong>ä¾‹å¦‚ï¼Œå¦‚æœæ–‡æœ¬ç»“æ„å¾ˆå¼ºï¼Œå¦‚ä»£ç æˆ–HTMLï¼Œä½ å¯èƒ½æƒ³ä½¿ç”¨è¾ƒå¤§çš„å—ï¼Œå¦‚æœæ–‡æœ¬ç»“æ„è¾ƒå¼±ï¼Œå¦‚å°è¯´æˆ–æ–°é—»æ–‡ç« ï¼Œä½ å¯èƒ½æƒ³ä½¿ç”¨è¾ƒå°çš„å—ã€‚</p><p>ä½ å¯ä»¥åå¤è¯•éªŒä¸åŒå¤§å°çš„å—å’Œå—ä¸å—ä¹‹é—´é‡å çª—å£çš„å¤§å°ï¼Œæ‰¾åˆ°æœ€é€‚åˆä½ ç‰¹å®šé—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚</p><h3>å…¶ä»–å½¢å¼çš„æ–‡æœ¬è½¬æ¢</h3><p>é™¤æ‹†åˆ†æ–‡æœ¬ä¹‹å¤–ï¼ŒLangChainä¸­è¿˜é›†æˆäº†å„ç§å·¥å…·å¯¹æ–‡æ¡£æ‰§è¡Œçš„å…¶ä»–ç±»å‹çš„è½¬æ¢ã€‚ä¸‹é¢è®©æˆ‘ä»¬å¯¹å…¶è¿›è¡Œé€ç‚¹åˆ†æã€‚</p><ol>\n<li>è¿‡æ»¤å†—ä½™çš„æ–‡æ¡£ï¼šä½¿ç”¨ EmbeddingsRedundantFilter å·¥å…·å¯ä»¥è¯†åˆ«ç›¸ä¼¼çš„æ–‡æ¡£å¹¶è¿‡æ»¤æ‰å†—ä½™ä¿¡æ¯ã€‚è¿™æ„å‘³ç€å¦‚æœä½ æœ‰å¤šä»½é«˜åº¦ç›¸ä¼¼æˆ–å‡ ä¹ç›¸åŒçš„æ–‡æ¡£ï¼Œè¿™ä¸ªåŠŸèƒ½å¯ä»¥å¸®åŠ©è¯†åˆ«å¹¶åˆ é™¤è¿™äº›å¤šä½™çš„å‰¯æœ¬ï¼Œä»è€ŒèŠ‚çœå­˜å‚¨ç©ºé—´å¹¶æé«˜æ£€ç´¢æ•ˆç‡ã€‚</li>\n<li>ç¿»è¯‘æ–‡æ¡£ï¼šé€šè¿‡ä¸å·¥å…· doctran è¿›è¡Œé›†æˆï¼Œå¯ä»¥å°†æ–‡æ¡£ä»ä¸€ç§è¯­è¨€ç¿»è¯‘æˆå¦ä¸€ç§è¯­è¨€ã€‚</li>\n<li>æå–å…ƒæ•°æ®ï¼šé€šè¿‡ä¸å·¥å…· doctran è¿›è¡Œé›†æˆï¼Œå¯ä»¥ä»æ–‡æ¡£å†…å®¹ä¸­æå–å…³é”®ä¿¡æ¯ï¼ˆå¦‚æ—¥æœŸã€ä½œè€…ã€å…³é”®å­—ç­‰ï¼‰ï¼Œå¹¶å°†å…¶å­˜å‚¨ä¸ºå…ƒæ•°æ®ã€‚å…ƒæ•°æ®æ˜¯æè¿°æ–‡æ¡£å±æ€§æˆ–å†…å®¹çš„æ•°æ®ï¼Œè¿™æœ‰åŠ©äºæ›´æœ‰æ•ˆåœ°ç®¡ç†ã€åˆ†ç±»å’Œæ£€ç´¢æ–‡æ¡£ã€‚</li>\n<li>è½¬æ¢å¯¹è¯æ ¼å¼ï¼šé€šè¿‡ä¸å·¥å…· doctran è¿›è¡Œé›†æˆï¼Œå¯ä»¥å°†å¯¹è¯å¼çš„æ–‡æ¡£å†…å®¹è½¬åŒ–ä¸ºé—®ç­”ï¼ˆQ/Aï¼‰æ ¼å¼ï¼Œä»è€Œæ›´å®¹æ˜“åœ°æå–å’ŒæŸ¥è¯¢ç‰¹å®šçš„ä¿¡æ¯æˆ–å›ç­”ã€‚è¿™åœ¨å¤„ç†å¦‚è®¿è°ˆã€å¯¹è¯æˆ–å…¶ä»–äº¤äº’å¼å†…å®¹æ—¶éå¸¸æœ‰ç”¨ã€‚</li>\n</ol><p>æ‰€ä»¥è¯´ï¼Œæ–‡æ¡£è½¬æ¢ä¸ä»…é™äºç®€å•çš„æ–‡æœ¬æ‹†åˆ†ï¼Œè¿˜å¯ä»¥åŒ…å«é™„åŠ çš„æ“ä½œï¼Œè¿™äº›æ“ä½œçš„ç›®çš„éƒ½æ˜¯æ›´å¥½åœ°å‡†å¤‡å’Œä¼˜åŒ–æ–‡æ¡£ï¼Œä»¥ä¾›åç»­ç”Ÿæˆæ›´å¥½çš„ç´¢å¼•å’Œæ£€ç´¢åŠŸèƒ½ã€‚</p><h2>æ–‡æœ¬åµŒå…¥</h2><p>æ–‡æœ¬å—å½¢æˆä¹‹åï¼Œæˆ‘ä»¬å°±é€šè¿‡LLMæ¥åšåµŒå…¥ï¼ˆEmbeddingsï¼‰ï¼Œå°†æ–‡æœ¬è½¬æ¢ä¸ºæ•°å€¼è¡¨ç¤ºï¼Œä½¿å¾—è®¡ç®—æœºå¯ä»¥æ›´å®¹æ˜“åœ°å¤„ç†å’Œæ¯”è¾ƒæ–‡æœ¬ã€‚OpenAIã€Cohereã€Hugging Face ä¸­éƒ½æœ‰èƒ½åšæ–‡æœ¬åµŒå…¥çš„æ¨¡å‹ã€‚</p><p>Embeddings ä¼šåˆ›å»ºä¸€æ®µæ–‡æœ¬çš„å‘é‡è¡¨ç¤ºï¼Œè®©æˆ‘ä»¬å¯ä»¥åœ¨å‘é‡ç©ºé—´ä¸­æ€è€ƒæ–‡æœ¬ï¼Œå¹¶æ‰§è¡Œè¯­ä¹‰æœç´¢ä¹‹ç±»çš„æ“ä½œï¼Œåœ¨å‘é‡ç©ºé—´ä¸­æŸ¥æ‰¾æœ€ç›¸ä¼¼çš„æ–‡æœ¬ç‰‡æ®µã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/b5/ba/b54fc88694120820cd1afea29946d9ba.png?wh=1505x527\" alt=\"\" title=\"å›¾ç‰‡æ¥æºç½‘ç»œ\"></p><p>LangChainä¸­çš„Embeddings ç±»æ˜¯è®¾è®¡ç”¨äºä¸æ–‡æœ¬åµŒå…¥æ¨¡å‹äº¤äº’çš„ç±»ã€‚è¿™ä¸ªç±»ä¸ºæ‰€æœ‰è¿™äº›æä¾›è€…æä¾›æ ‡å‡†æ¥å£ã€‚</p><pre><code class=\"language-plain\"># åˆå§‹åŒ–Embeddingç±»\nfrom langchain.embeddings import OpenAIEmbeddings\nembeddings_model = OpenAIEmbeddings()\n</code></pre><p>å®ƒæä¾›ä¸¤ç§æ–¹æ³•ï¼š</p><ol>\n<li>ç¬¬ä¸€ç§æ˜¯ embed_documents æ–¹æ³•ï¼Œä¸ºæ–‡æ¡£åˆ›å»ºåµŒå…¥ã€‚è¿™ä¸ªæ–¹æ³•æ¥æ”¶å¤šä¸ªæ–‡æœ¬ä½œä¸ºè¾“å…¥ï¼Œæ„å‘³ç€ä½ å¯ä»¥ä¸€æ¬¡æ€§å°†å¤šä¸ªæ–‡æ¡£è½¬æ¢ä¸ºå®ƒä»¬çš„å‘é‡è¡¨ç¤ºã€‚</li>\n<li>ç¬¬äºŒç§æ˜¯ embed_query æ–¹æ³•ï¼Œä¸ºæŸ¥è¯¢åˆ›å»ºåµŒå…¥ã€‚è¿™ä¸ªæ–¹æ³•åªæ¥æ”¶ä¸€ä¸ªæ–‡æœ¬ä½œä¸ºè¾“å…¥ï¼Œé€šå¸¸æ˜¯ç”¨æˆ·çš„æœç´¢æŸ¥è¯¢ã€‚</li>\n</ol><p><strong>ä¸º</strong><strong>ä»€ä¹ˆéœ€è¦ä¸¤ç§æ–¹æ³•ï¼Ÿ</strong>è™½ç„¶çœ‹èµ·æ¥è¿™ä¸¤ç§æ–¹æ³•éƒ½æ˜¯ä¸ºäº†æ–‡æœ¬åµŒå…¥ï¼Œä½†æ˜¯LangChainå°†å®ƒä»¬åˆ†å¼€äº†ã€‚åŸå› æ˜¯ä¸€äº›åµŒå…¥æä¾›è€…å¯¹äºæ–‡æ¡£å’ŒæŸ¥è¯¢ä½¿ç”¨çš„æ˜¯ä¸åŒçš„åµŒå…¥æ–¹æ³•ã€‚æ–‡æ¡£æ˜¯è¦è¢«æœç´¢çš„å†…å®¹ï¼Œè€ŒæŸ¥è¯¢æ˜¯å®é™…çš„æœç´¢è¯·æ±‚ã€‚è¿™ä¸¤è€…å¯èƒ½å› ä¸ºå…¶æ€§è´¨å’Œç›®çš„ï¼Œè€Œéœ€è¦ä¸åŒçš„å¤„ç†æˆ–ä¼˜åŒ–ã€‚</p><p>embed_documents æ–¹æ³•çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\">embeddings = embeddings_model.embed_documents(\n    [\n        \"æ‚¨å¥½ï¼Œæœ‰ä»€ä¹ˆéœ€è¦å¸®å¿™çš„å—ï¼Ÿ\",\n        \"å“¦ï¼Œä½ å¥½ï¼æ˜¨å¤©æˆ‘è®¢çš„èŠ±å‡ å¤©é€è¾¾\",\n        \"è¯·æ‚¨æä¾›ä¸€äº›è®¢å•å·ï¼Ÿ\",\n        \"12345678\",\n    ]\n)\nlen(embeddings), len(embeddings[0])\n</code></pre><p>è¾“å‡ºï¼š</p><pre><code class=\"language-plain\">(4, 1536)\n</code></pre><p>embed_query æ–¹æ³•çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\">embedded_query = embeddings_model.embed_query(\"åˆšæ‰å¯¹è¯ä¸­çš„è®¢å•å·æ˜¯å¤šå°‘?\")\nembedded_query[:3]\n</code></pre><p>è¾“å‡ºï¼š</p><pre><code class=\"language-plain\">[-0.0029746221837547455, -0.007710168602107487, 0.00923260021751183]\n</code></pre><h2>å­˜å‚¨åµŒå…¥</h2><p>è®¡ç®—åµŒå…¥å¯èƒ½æ˜¯ä¸€ä¸ªæ—¶é—´æ¶ˆè€—å¤§çš„è¿‡ç¨‹ã€‚ä¸ºäº†åŠ é€Ÿè¿™ä¸€è¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†è®¡ç®—å‡ºçš„åµŒå…¥å­˜å‚¨æˆ–ä¸´æ—¶ç¼“å­˜ï¼Œè¿™æ ·åœ¨ä¸‹æ¬¡éœ€è¦å®ƒä»¬æ—¶ï¼Œå°±å¯ä»¥ç›´æ¥è¯»å–ï¼Œæ— éœ€é‡æ–°è®¡ç®—ã€‚</p><h3>ç¼“å­˜å­˜å‚¨</h3><p>CacheBackedEmbeddingsæ˜¯ä¸€ä¸ªæ”¯æŒç¼“å­˜çš„åµŒå…¥å¼åŒ…è£…å™¨ï¼Œå®ƒå¯ä»¥å°†åµŒå…¥ç¼“å­˜åœ¨é”®å€¼å­˜å‚¨ä¸­ã€‚å…·ä½“æ“ä½œæ˜¯ï¼šå¯¹æ–‡æœ¬è¿›è¡Œå“ˆå¸Œå¤„ç†ï¼Œå¹¶å°†æ­¤å“ˆå¸Œå€¼ç”¨ä½œç¼“å­˜çš„é”®ã€‚</p><p>è¦åˆå§‹åŒ–ä¸€ä¸ªCacheBackedEmbeddingsï¼Œä¸»è¦çš„æ–¹å¼æ˜¯ä½¿ç”¨from_bytes_storeã€‚å…¶éœ€è¦ä»¥ä¸‹å‚æ•°ï¼š</p><ul>\n<li>underlying_embedderï¼šå®é™…è®¡ç®—åµŒå…¥çš„åµŒå…¥å™¨ã€‚</li>\n<li>document_embedding_cacheï¼šç”¨äºå­˜å‚¨æ–‡æ¡£åµŒå…¥çš„ç¼“å­˜ã€‚</li>\n<li>namespaceï¼ˆå¯é€‰ï¼‰ï¼šç”¨äºæ–‡æ¡£ç¼“å­˜çš„å‘½åç©ºé—´ï¼Œé¿å…ä¸å…¶ä»–ç¼“å­˜å‘ç”Ÿå†²çªã€‚</li>\n</ul><p><strong>ä¸åŒçš„ç¼“å­˜ç­–ç•¥å¦‚ä¸‹ï¼š</strong></p><ol>\n<li>InMemoryStoreï¼šåœ¨å†…å­˜ä¸­ç¼“å­˜åµŒå…¥ã€‚ä¸»è¦ç”¨äºå•å…ƒæµ‹è¯•æˆ–åŸå‹è®¾è®¡ã€‚å¦‚æœéœ€è¦é•¿æœŸå­˜å‚¨åµŒå…¥ï¼Œè¯·å‹¿ä½¿ç”¨æ­¤ç¼“å­˜ã€‚</li>\n<li>LocalFileStoreï¼šåœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­å­˜å‚¨åµŒå…¥ã€‚é€‚ç”¨äºé‚£äº›ä¸æƒ³ä¾èµ–å¤–éƒ¨æ•°æ®åº“æˆ–å­˜å‚¨è§£å†³æ–¹æ¡ˆçš„æƒ…å†µã€‚</li>\n<li>RedisStoreï¼šåœ¨Redisæ•°æ®åº“ä¸­ç¼“å­˜åµŒå…¥ã€‚å½“éœ€è¦ä¸€ä¸ªé«˜é€Ÿä¸”å¯æ‰©å±•çš„ç¼“å­˜è§£å†³æ–¹æ¡ˆæ—¶ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚</li>\n</ol><p>åœ¨å†…å­˜ä¸­ç¼“å­˜åµŒå…¥çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\"># å¯¼å…¥å†…å­˜å­˜å‚¨åº“ï¼Œè¯¥åº“å…è®¸æˆ‘ä»¬åœ¨RAMä¸­ä¸´æ—¶å­˜å‚¨æ•°æ®\nfrom langchain.storage import InMemoryStore\n\n# åˆ›å»ºä¸€ä¸ªInMemoryStoreçš„å®ä¾‹\nstore = InMemoryStore()\n\n# å¯¼å…¥ä¸åµŒå…¥ç›¸å…³çš„åº“ã€‚OpenAIEmbeddingsæ˜¯ç”¨äºç”ŸæˆåµŒå…¥çš„å·¥å…·ï¼Œè€ŒCacheBackedEmbeddingså…è®¸æˆ‘ä»¬ç¼“å­˜è¿™äº›åµŒå…¥\nfrom langchain.embeddings import OpenAIEmbeddings, CacheBackedEmbeddings\n\n# åˆ›å»ºä¸€ä¸ªOpenAIEmbeddingsçš„å®ä¾‹ï¼Œè¿™å°†ç”¨äºå®é™…è®¡ç®—æ–‡æ¡£çš„åµŒå…¥\nunderlying_embeddings = OpenAIEmbeddings()\n\n# åˆ›å»ºä¸€ä¸ªCacheBackedEmbeddingsçš„å®ä¾‹ã€‚\n# è¿™å°†ä¸ºunderlying_embeddingsæä¾›ç¼“å­˜åŠŸèƒ½ï¼ŒåµŒå…¥ä¼šè¢«å­˜å‚¨åœ¨ä¸Šé¢åˆ›å»ºçš„InMemoryStoreä¸­ã€‚\n# æˆ‘ä»¬è¿˜ä¸ºç¼“å­˜æŒ‡å®šäº†ä¸€ä¸ªå‘½åç©ºé—´ï¼Œä»¥ç¡®ä¿ä¸åŒçš„åµŒå…¥æ¨¡å‹ä¹‹é—´ä¸ä¼šå‡ºç°å†²çªã€‚\nembedder = CacheBackedEmbeddings.from_bytes_store(\n&nbsp; &nbsp; underlying_embeddings,&nbsp; # å®é™…ç”ŸæˆåµŒå…¥çš„å·¥å…·\n&nbsp; &nbsp; store,&nbsp; # åµŒå…¥çš„ç¼“å­˜ä½ç½®\n&nbsp; &nbsp; namespace=underlying_embeddings.model&nbsp; # åµŒå…¥ç¼“å­˜çš„å‘½åç©ºé—´\n)\n\n# ä½¿ç”¨embedderä¸ºä¸¤æ®µæ–‡æœ¬ç”ŸæˆåµŒå…¥ã€‚\n# ç»“æœï¼Œå³åµŒå…¥å‘é‡ï¼Œå°†è¢«å­˜å‚¨åœ¨ä¸Šé¢å®šä¹‰çš„å†…å­˜å­˜å‚¨ä¸­ã€‚\nembeddings = embedder.embed_documents([\"ä½ å¥½\", \"æ™ºèƒ½é²œèŠ±å®¢æœ\"])\n</code></pre><p>è§£é‡Šä¸‹è¿™æ®µä»£ç ã€‚é¦–å…ˆæˆ‘ä»¬åœ¨å†…å­˜ä¸­è®¾ç½®äº†ä¸€ä¸ªå­˜å‚¨ç©ºé—´ï¼Œç„¶ååˆå§‹åŒ–äº†ä¸€ä¸ªåµŒå…¥å·¥å…·ï¼Œè¯¥å·¥å…·å°†å®é™…ç”ŸæˆåµŒå…¥ã€‚ä¹‹åï¼Œè¿™ä¸ªåµŒå…¥å·¥å…·è¢«åŒ…è£…åœ¨ä¸€ä¸ªç¼“å­˜å·¥å…·ä¸­ï¼Œç”¨äºä¸ºä¸¤æ®µæ–‡æœ¬ç”ŸæˆåµŒå…¥ã€‚</p><p>è‡³äºå…¶ä»–ä¸¤ç§ç¼“å­˜å™¨ï¼ŒåµŒå…¥çš„ä½¿ç”¨æ–¹å¼ä¹Ÿä¸å¤æ‚ï¼Œä½ å¯ä»¥å‚è€ƒLangChainæ–‡æ¡£è‡ªè¡Œå­¦ä¹ ã€‚</p><h3>å‘é‡æ•°æ®åº“ï¼ˆå‘é‡å­˜å‚¨ï¼‰</h3><p>æ›´å¸¸è§çš„å­˜å‚¨å‘é‡çš„æ–¹å¼æ˜¯é€šè¿‡å‘é‡æ•°æ®åº“ï¼ˆVector Storeï¼‰æ¥ä¿å­˜å®ƒä»¬ã€‚LangChainæ”¯æŒéå¸¸å¤šç§å‘é‡æ•°æ®åº“ï¼Œå…¶ä¸­æœ‰å¾ˆå¤šæ˜¯å¼€æºçš„ï¼Œä¹Ÿæœ‰å¾ˆå¤šæ˜¯å•†ç”¨çš„ã€‚æ¯”å¦‚Elasticsearchã€Faissã€Chromaå’ŒQdrantç­‰ç­‰ã€‚</p><p>å› ä¸ºé€‰æ‹©å®åœ¨æ˜¯å¤ªå¤šäº†ï¼Œæˆ‘ä¹Ÿç»™ä½ åˆ—å‡ºæ¥äº†ä¸€ä¸ªè¡¨ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/2e/77/2eb52480f790fd3281ae905ee1c58077.jpg?wh=2911x7734\" alt=\"\"></p><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œé¢å¯¹è¿™ä¹ˆå¤šç§ç±»çš„å‘é‡æ•°æ®åº“ï¼Œåº”è¯¥å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿ</p><p>è¿™å°±æ¶‰åŠåˆ°è®¸å¤šæŠ€æœ¯å’Œä¸šåŠ¡å±‚é¢çš„è€ƒé‡ï¼Œä½ åº”è¯¥<strong>æ ¹æ®å…·ä½“éœ€æ±‚è¿›è¡Œé€‰å‹</strong>ã€‚</p><ol>\n<li>æ•°æ®è§„æ¨¡å’Œé€Ÿåº¦éœ€æ±‚ï¼šè€ƒè™‘ä½ çš„æ•°æ®é‡å¤§å°ä»¥åŠæŸ¥è¯¢é€Ÿåº¦çš„è¦æ±‚ã€‚ä¸€äº›å‘é‡æ•°æ®åº“åœ¨å¤„ç†å¤§è§„æ¨¡æ•°æ®æ—¶æ›´åŠ å‡ºè‰²ï¼Œè€Œå¦ä¸€äº›åœ¨ä½å»¶è¿ŸæŸ¥è¯¢ä¸­è¡¨ç°æ›´å¥½ã€‚</li>\n<li>æŒä¹…æ€§å’Œå¯é æ€§ï¼šæ ¹æ®ä½ çš„åº”ç”¨åœºæ™¯ï¼Œç¡®å®šä½ æ˜¯å¦éœ€è¦æ•°æ®çš„é«˜å¯ç”¨æ€§ã€å¤‡ä»½å’Œæ•…éšœè½¬ç§»åŠŸèƒ½ã€‚</li>\n<li>æ˜“ç”¨æ€§å’Œç¤¾åŒºæ”¯æŒï¼šè€ƒè™‘å‘é‡æ•°æ®åº“çš„å­¦ä¹ æ›²çº¿ã€æ–‡æ¡£çš„å®Œæ•´æ€§ä»¥åŠç¤¾åŒºçš„æ´»è·ƒåº¦ã€‚</li>\n<li>æˆæœ¬ï¼šè€ƒè™‘æ€»ä½“æ‹¥æœ‰æˆæœ¬ï¼ŒåŒ…æ‹¬è®¸å¯ã€ç¡¬ä»¶ã€è¿è¥å’Œç»´æŠ¤æˆæœ¬ã€‚</li>\n<li>ç‰¹æ€§ï¼šè€ƒè™‘ä½ æ˜¯å¦éœ€è¦ç‰¹å®šçš„åŠŸèƒ½ï¼Œä¾‹å¦‚å¤šæ¨¡æ€æœç´¢ç­‰ã€‚</li>\n<li>å®‰å…¨æ€§ï¼šç¡®ä¿å‘é‡æ•°æ®åº“ç¬¦åˆä½ çš„å®‰å…¨å’Œåˆè§„è¦æ±‚ã€‚</li>\n</ol><p>åœ¨è¿›è¡Œå‘é‡æ•°æ®åº“çš„è¯„æµ‹æ—¶ï¼Œè¿›è¡Œ<strong>æ€§èƒ½åŸºå‡†æµ‹è¯•</strong>æ˜¯äº†è§£å‘é‡æ•°æ®åº“å®é™…è¡¨ç°çš„å…³é”®ã€‚è¿™å¯ä»¥å¸®åŠ©ä½ è¯„ä¼°æŸ¥è¯¢é€Ÿåº¦ã€å†™å…¥é€Ÿåº¦ã€å¹¶å‘æ€§èƒ½ç­‰ã€‚</p><p>æ²¡æœ‰â€œæœ€å¥½â€çš„å‘é‡æ•°æ®åº“ï¼Œåªæœ‰â€œæœ€é€‚åˆâ€çš„å‘é‡æ•°æ®åº“ã€‚åœ¨ä½ çš„éœ€æ±‚ä¸Šåšäº›ç ”ç©¶å’Œæµ‹è¯•ï¼Œç¡®ä¿ä½ é€‰æ‹©çš„å‘é‡æ•°æ®åº“æ»¡è¶³ä½ çš„ä¸šåŠ¡å’ŒæŠ€æœ¯è¦æ±‚å°±å¥½ã€‚</p><h2>æ•°æ®æ£€ç´¢</h2><p>åœ¨LangChainä¸­ï¼ŒRetrieverï¼Œä¹Ÿå°±æ˜¯æ£€ç´¢å™¨ï¼Œæ˜¯æ•°æ®æ£€ç´¢æ¨¡å—çš„æ ¸å¿ƒå…¥å£ï¼Œå®ƒé€šè¿‡éç»“æ„åŒ–æŸ¥è¯¢è¿”å›ç›¸å…³çš„æ–‡æ¡£ã€‚</p><h3>å‘é‡å­˜å‚¨æ£€ç´¢å™¨</h3><p>å‘é‡å­˜å‚¨æ£€ç´¢å™¨æ˜¯æœ€å¸¸è§çš„ï¼Œå®ƒä¸»è¦æ”¯æŒå‘é‡æ£€ç´¢ã€‚å½“ç„¶LangChainä¹Ÿæœ‰æ”¯æŒå…¶ä»–ç±»å‹å­˜å‚¨æ ¼å¼çš„æ£€ç´¢å™¨ã€‚</p><p>ä¸‹é¢å®ç°ä¸€ä¸ªç«¯åˆ°ç«¯çš„æ•°æ®æ£€ç´¢åŠŸèƒ½ï¼Œæˆ‘ä»¬é€šè¿‡VectorstoreIndexCreatoræ¥åˆ›å»ºç´¢å¼•ï¼Œå¹¶åœ¨ç´¢å¼•çš„queryæ–¹æ³•ä¸­ï¼Œé€šè¿‡vectorstoreç±»çš„as_retrieveræ–¹æ³•ï¼ŒæŠŠå‘é‡æ•°æ®åº“ï¼ˆVector Storeï¼‰ç›´æ¥ä½œä¸ºæ£€ç´¢å™¨ï¼Œæ¥å®Œæˆæ£€ç´¢ä»»åŠ¡ã€‚</p><pre><code class=\"language-plain\"># è®¾ç½®OpenAIçš„APIå¯†é’¥\nimport os\nos.environ[\"OPENAI_API_KEY\"] = 'Your OpenAI Key'\n\n# å¯¼å…¥æ–‡æ¡£åŠ è½½å™¨æ¨¡å—ï¼Œå¹¶ä½¿ç”¨TextLoaderæ¥åŠ è½½æ–‡æœ¬æ–‡ä»¶\nfrom langchain.document_loaders import TextLoader\nloader = TextLoader('LangChainSamples/OneFlower/æ˜“é€Ÿé²œèŠ±èŠ±è¯­å¤§å…¨.txt', encoding='utf8')\n\n# ä½¿ç”¨VectorstoreIndexCreatoræ¥ä»åŠ è½½å™¨åˆ›å»ºç´¢å¼•\nfrom langchain.indexes import VectorstoreIndexCreator\nindex = VectorstoreIndexCreator().from_loaders([loader])\n\n# å®šä¹‰æŸ¥è¯¢å­—ç¬¦ä¸², ä½¿ç”¨åˆ›å»ºçš„ç´¢å¼•æ‰§è¡ŒæŸ¥è¯¢\nquery = \"ç«ç‘°èŠ±çš„èŠ±è¯­æ˜¯ä»€ä¹ˆï¼Ÿ\"\nresult = index.query(query)\nprint(result) # æ‰“å°æŸ¥è¯¢ç»“æœ\n</code></pre><p>è¾“å‡ºï¼š</p><pre><code class=\"language-plain\">ç«ç‘°èŠ±çš„èŠ±è¯­æ˜¯çˆ±æƒ…ã€çƒ­æƒ…ã€ç¾ä¸½ã€‚\n</code></pre><p>ä½ å¯èƒ½ä¼šè§‰å¾—ï¼Œè¿™ä¸ªæ•°æ®æ£€ç´¢è¿‡ç¨‹å¤ªç®€å•äº†ã€‚è¿™å°±è¦å½’åŠŸäºLangChainçš„å¼ºå¤§å°è£…èƒ½åŠ›ã€‚å¦‚æœæˆ‘ä»¬å®¡è§†ä¸€ä¸‹ä½äºvectorstore.pyä¸­çš„VectorstoreIndexCreatorç±»çš„ä»£ç ï¼Œä½ å°±ä¼šå‘ç°ï¼Œå®ƒå…¶ä¸­å°è£…äº†vectorstoreã€embeddingä»¥åŠtext_splitterï¼Œç”šè‡³document loaderï¼ˆå¦‚æœä½ ä½¿ç”¨from_documentsæ–¹æ³•çš„è¯ï¼‰ã€‚</p><pre><code class=\"language-plain\">class VectorstoreIndexCreator(BaseModel):\n&nbsp; &nbsp; \"\"\"Logic for creating indexes.\"\"\"\n\n&nbsp; &nbsp; vectorstore_cls: Type[VectorStore] = Chroma\n&nbsp; &nbsp; embedding: Embeddings = Field(default_factory=OpenAIEmbeddings)\n&nbsp; &nbsp; text_splitter: TextSplitter = Field(default_factory=_get_default_text_splitter)\n&nbsp; &nbsp; vectorstore_kwargs: dict = Field(default_factory=dict)\n\n&nbsp; &nbsp; class Config:\n&nbsp; &nbsp; &nbsp; &nbsp; \"\"\"Configuration for this pydantic object.\"\"\"\n\n&nbsp; &nbsp; &nbsp; &nbsp; extra = Extra.forbid\n&nbsp; &nbsp; &nbsp; &nbsp; arbitrary_types_allowed = True\n\n&nbsp; &nbsp; def from_loaders(self, loaders: List[BaseLoader]) -&gt; VectorStoreIndexWrapper:\n&nbsp; &nbsp; &nbsp; &nbsp; \"\"\"Create a vectorstore index from loaders.\"\"\"\n&nbsp; &nbsp; &nbsp; &nbsp; docs = []\n&nbsp; &nbsp; &nbsp; &nbsp; for loader in loaders:\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; docs.extend(loader.load())\n&nbsp; &nbsp; &nbsp; &nbsp; return self.from_documents(docs)\n\n&nbsp; &nbsp; def from_documents(self, documents: List[Document]) -&gt; VectorStoreIndexWrapper:\n&nbsp; &nbsp; &nbsp; &nbsp; \"\"\"Create a vectorstore index from documents.\"\"\"\n&nbsp; &nbsp; &nbsp; &nbsp; sub_docs = self.text_splitter.split_documents(documents)\n&nbsp; &nbsp; &nbsp; &nbsp; vectorstore = self.vectorstore_cls.from_documents(\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sub_docs, self.embedding, **self.vectorstore_kwargs\n&nbsp; &nbsp; &nbsp; &nbsp; )\n&nbsp; &nbsp; &nbsp; &nbsp; return VectorStoreIndexWrapper(vectorstore=vectorstore)\n</code></pre><p>å› æ­¤ï¼Œä¸Šé¢çš„æ£€ç´¢åŠŸèƒ½å°±ç›¸å½“äºæˆ‘ä»¬ç¬¬2è¯¾ä¸­è®²è¿‡çš„ä¸€ç³»åˆ—å·¥å…·çš„æ•´åˆã€‚è€Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç ï¼Œæ¥æ˜¾å¼åœ°æŒ‡å®šç´¢å¼•åˆ›å»ºå™¨çš„vectorstoreã€embeddingä»¥åŠtext_splitterï¼Œå¹¶æŠŠå®ƒä»¬æ›¿æ¢æˆä½ æ‰€éœ€è¦çš„å·¥å…·ï¼Œæ¯”å¦‚å¦å¤–ä¸€ç§å‘é‡æ•°æ®åº“æˆ–è€…åˆ«çš„Embeddingæ¨¡å‹ã€‚</p><pre><code class=\"language-plain\">from langchain.text_splitter import CharacterTextSplitter\ntext_splitter = CharacterTextSplitter(chunk_size=1000, chunk_overlap=0)\nfrom langchain.vectorstores import Chroma\nfrom langchain.embeddings import OpenAIEmbeddings\nembeddings = OpenAIEmbeddings()\nindex_creator = VectorstoreIndexCreator(\n&nbsp; &nbsp; vectorstore_cls=Chroma,\n&nbsp; &nbsp; embedding=OpenAIEmbeddings(),\n&nbsp; &nbsp; text_splitter=CharacterTextSplitter(chunk_size=1000, chunk_overlap=0)\n)\n</code></pre><p>é‚£ä¹ˆï¼Œä¸‹ä¸€ä¸ªé—®é¢˜æ˜¯ index.query(query)ï¼Œåˆæ˜¯å¦‚ä½•å®Œæˆå…·ä½“çš„æ£€ç´¢åŠæ–‡æœ¬ç”Ÿæˆä»»åŠ¡çš„å‘¢ï¼Ÿæˆ‘ä»¬æ­¤å¤„æ—¢æ²¡æœ‰çœ‹åˆ°å¤§æ¨¡å‹ï¼Œåˆæ²¡æœ‰çœ‹åˆ°LangChainçš„æ–‡æ¡£æ£€ç´¢å·¥å…·ï¼ˆæ¯”å¦‚æˆ‘ä»¬åœ¨ç¬¬2è¯¾ä¸­è§è¿‡çš„QARetrivalé“¾ï¼‰ã€‚</p><p>ç§˜å¯†ä»ç„¶å­˜åœ¨äºæºç ä¸­ï¼Œåœ¨VectorStoreIndexWrapperç±»çš„queryæ–¹æ³•ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œåœ¨è°ƒç”¨æ–¹æ³•çš„åŒæ—¶ï¼ŒRetrievalQAé“¾è¢«å¯åŠ¨ï¼Œä»¥å®Œæˆæ£€ç´¢åŠŸèƒ½ã€‚</p><pre><code class=\"language-plain\">class VectorStoreIndexWrapper(BaseModel):\n&nbsp; &nbsp; \"\"\"Wrapper around a vectorstore for easy access.\"\"\"\n\n&nbsp; &nbsp; vectorstore: VectorStore\n\n&nbsp; &nbsp; class Config:\n&nbsp; &nbsp; &nbsp; &nbsp; \"\"\"Configuration for this pydantic object.\"\"\"\n\n&nbsp; &nbsp; &nbsp; &nbsp; extra = Extra.forbid\n&nbsp; &nbsp; &nbsp; &nbsp; arbitrary_types_allowed = True\n\n&nbsp; &nbsp; def query(\n&nbsp; &nbsp; &nbsp; &nbsp; self,\n&nbsp; &nbsp; &nbsp; &nbsp; question: str,\n&nbsp; &nbsp; &nbsp; &nbsp; llm: Optional[BaseLanguageModel] = None,\n&nbsp; &nbsp; &nbsp; &nbsp; retriever_kwargs: Optional[Dict[str, Any]] = None,\n&nbsp; &nbsp; &nbsp; &nbsp; **kwargs: Any\n&nbsp; &nbsp; ) -&gt; str:\n&nbsp; &nbsp; &nbsp; &nbsp; \"\"\"Query the vectorstore.\"\"\"\n&nbsp; &nbsp; &nbsp; &nbsp; llm = llm or OpenAI(temperature=0)\n&nbsp; &nbsp; &nbsp; &nbsp; retriever_kwargs = retriever_kwargs or {}\n&nbsp; &nbsp; &nbsp; &nbsp; chain = RetrievalQA.from_chain_type(\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; llm, retriever=self.vectorstore.as_retriever(**retriever_kwargs), **kwargs\n&nbsp; &nbsp; &nbsp; &nbsp; )\n&nbsp; &nbsp; &nbsp; &nbsp; return chain.run(question)\n</code></pre><p>ä¸Šé¢æˆ‘ä»¬ç”¨åˆ°çš„å‘é‡å­˜å‚¨æ£€ç´¢å™¨ï¼Œæ˜¯å‘é‡å­˜å‚¨ç±»çš„è½»é‡çº§åŒ…è£…å™¨ï¼Œä½¿å…¶ç¬¦åˆæ£€ç´¢å™¨æ¥å£ã€‚å®ƒä½¿ç”¨å‘é‡å­˜å‚¨ä¸­çš„æœç´¢æ–¹æ³•ï¼ˆä¾‹å¦‚ç›¸ä¼¼æ€§æœç´¢å’Œ MMRï¼‰æ¥æŸ¥è¯¢å‘é‡å­˜å‚¨ä¸­çš„æ–‡æœ¬ã€‚</p><h3>å„ç§ç±»å‹çš„æ£€ç´¢å™¨</h3><p>é™¤å‘é‡å­˜å‚¨æ£€ç´¢å™¨ä¹‹å¤–ï¼ŒLangChainä¸­è¿˜æä¾›å¾ˆå¤šç§å…¶ä»–çš„æ£€ç´¢å·¥å…·ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f8/a8/f87c2d22bb1e71419ee129c9871724a8.jpg?wh=1761x1210\" alt=\"\"></p><p>è¿™äº›æ£€ç´¢å·¥å…·ï¼Œå„æœ‰å…¶åŠŸèƒ½ç‰¹ç‚¹ï¼Œä½ å¯ä»¥æŸ¥æ‰¾å®ƒä»¬çš„æ–‡æ¡£è¯´æ˜ï¼Œå¹¶å°è¯•ä½¿ç”¨ã€‚</p><h2>ç´¢å¼•</h2><p>åœ¨æœ¬èŠ‚è¯¾çš„æœ€åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹LangChainä¸­çš„ç´¢å¼•ï¼ˆIndexï¼‰ã€‚ç®€å•çš„è¯´ï¼Œç´¢å¼•æ˜¯ä¸€ç§é«˜æ•ˆåœ°ç®¡ç†å’Œå®šä½æ–‡æ¡£ä¿¡æ¯çš„æ–¹æ³•ï¼Œç¡®ä¿æ¯ä¸ªæ–‡æ¡£å…·æœ‰å”¯ä¸€æ ‡è¯†å¹¶ä¾¿äºæ£€ç´¢ã€‚</p><p>å°½ç®¡åœ¨<a href=\"https://time.geekbang.org/column/article/699436\">ç¬¬2è¯¾</a>çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰æ˜¾å¼çš„ä½¿ç”¨åˆ°ç´¢å¼•å°±å®Œæˆäº†ä¸€ä¸ªRAGä»»åŠ¡ï¼Œä½†åœ¨å¤æ‚çš„ä¿¡æ¯æ£€ç´¢ä»»åŠ¡ä¸­ï¼Œæœ‰æ•ˆåœ°ç®¡ç†å’Œç´¢å¼•æ–‡æ¡£æ˜¯å…³é”®çš„ä¸€æ­¥ã€‚LangChain æä¾›çš„ç´¢å¼• API ä¸ºå¼€å‘è€…å¸¦æ¥äº†ä¸€ä¸ªé«˜æ•ˆä¸”ç›´è§‚çš„è§£å†³æ–¹æ¡ˆã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒçš„ä¼˜åŠ¿åŒ…æ‹¬ï¼š</p><ul>\n<li>é¿å…é‡å¤å†…å®¹ï¼šç¡®ä¿ä½ çš„å‘é‡å­˜å‚¨ä¸­ä¸ä¼šæœ‰å†—ä½™æ•°æ®ã€‚</li>\n<li>åªæ›´æ–°æ›´æ”¹çš„å†…å®¹ï¼šèƒ½æ£€æµ‹å“ªäº›å†…å®¹å·²æ›´æ–°ï¼Œé¿å…ä¸å¿…è¦çš„é‡å†™ã€‚</li>\n<li>çœæ—¶çœé’±ï¼šä¸å¯¹æœªæ›´æ”¹çš„å†…å®¹é‡æ–°è®¡ç®—åµŒå…¥ï¼Œä»è€Œå‡å°‘äº†è®¡ç®—èµ„æºçš„æ¶ˆè€—ã€‚</li>\n<li>ä¼˜åŒ–æœç´¢ç»“æœï¼šå‡å°‘é‡å¤å’Œä¸ç›¸å…³çš„æ•°æ®ï¼Œä»è€Œæé«˜æœç´¢çš„å‡†ç¡®æ€§ã€‚</li>\n</ul><p>LangChain åˆ©ç”¨äº†è®°å½•ç®¡ç†å™¨ï¼ˆRecordManagerï¼‰æ¥è·Ÿè¸ªå“ªäº›æ–‡æ¡£å·²ç»è¢«å†™å…¥å‘é‡å­˜å‚¨ã€‚</p><p>åœ¨è¿›è¡Œç´¢å¼•æ—¶ï¼ŒAPI ä¼šå¯¹æ¯ä¸ªæ–‡æ¡£è¿›è¡Œå“ˆå¸Œå¤„ç†ï¼Œç¡®ä¿æ¯ä¸ªæ–‡æ¡£éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ã€‚è¿™ä¸ªå“ˆå¸Œå€¼ä¸ä»…ä»…åŸºäºæ–‡æ¡£çš„å†…å®¹ï¼Œè¿˜è€ƒè™‘äº†æ–‡æ¡£çš„å…ƒæ•°æ®ã€‚</p><p>ä¸€æ—¦å“ˆå¸Œå®Œæˆï¼Œä»¥ä¸‹ä¿¡æ¯ä¼šè¢«ä¿å­˜åœ¨è®°å½•ç®¡ç†å™¨ä¸­ï¼š</p><ul>\n<li>æ–‡æ¡£å“ˆå¸Œï¼šåŸºäºæ–‡æ¡£å†…å®¹å’Œå…ƒæ•°æ®è®¡ç®—å‡ºçš„å”¯ä¸€æ ‡è¯†ã€‚</li>\n<li>å†™å…¥æ—¶é—´ï¼šè®°å½•æ–‡æ¡£ä½•æ—¶è¢«æ·»åŠ åˆ°å‘é‡å­˜å‚¨ä¸­ã€‚</li>\n<li>æº IDï¼šè¿™æ˜¯ä¸€ä¸ªå…ƒæ•°æ®å­—æ®µï¼Œè¡¨ç¤ºæ–‡æ¡£çš„åŸå§‹æ¥æºã€‚</li>\n</ul><p>è¿™ç§æ–¹æ³•ç¡®ä¿äº†å³ä½¿æ–‡æ¡£ç»å†äº†å¤šæ¬¡è½¬æ¢æˆ–å¤„ç†ï¼Œä¹Ÿèƒ½å¤Ÿç²¾ç¡®åœ°è·Ÿè¸ªå®ƒçš„çŠ¶æ€å’Œæ¥æºï¼Œç¡®ä¿æ–‡æ¡£æ•°æ®è¢«æ­£ç¡®ç®¡ç†å’Œç´¢å¼•ã€‚</p><h2>æ€»ç»“æ—¶åˆ»</h2><p>è¿™èŠ‚è¯¾çš„å†…å®¹éå¸¸å¤šï¼Œè€Œä¸”æˆ‘ç»™å‡ºäº†å¾ˆå¤šè¡¨æ ¼ä¾›ä½ æŸ¥è¯¢ä¹‹ç”¨ï¼Œä¿¡æ¯é‡å¾ˆå¤§ã€‚åŒæ—¶ï¼Œä½ å¯ä»¥å¤ä¹ <a href=\"https://time.geekbang.org/column/article/699436\">ç¬¬2è¯¾</a>çš„å†…å®¹ï¼Œæˆ‘å¸Œæœ›ä½ å¯¹RAGçš„æµç¨‹æœ‰ä¸ªæ›´æ·±çš„ç†è§£ã€‚</p><p>é€šè¿‡æ£€ç´¢å¢å¼ºç”Ÿæˆæ¥å­˜å‚¨å’Œæœç´¢éç»“æ„åŒ–æ•°æ®çš„æœ€å¸¸è§æ–¹æ³•æ˜¯ï¼Œç»™è¿™äº›éç»“æ„åŒ–çš„æ•°æ®åšåµŒå…¥å¹¶å­˜å‚¨ç”Ÿæˆçš„åµŒå…¥å‘é‡ï¼Œç„¶ååœ¨æŸ¥è¯¢æ—¶ç»™è¦æŸ¥è¯¢çš„æ–‡æœ¬ä¹ŸåšåµŒå…¥ï¼Œå¹¶æ£€ç´¢ä¸åµŒå…¥æŸ¥è¯¢â€œæœ€ç›¸ä¼¼â€çš„åµŒå…¥å‘é‡ã€‚å‘é‡æ•°æ®åº“åˆ™è´Ÿè´£å­˜å‚¨åµŒå…¥æ•°æ®ï¼Œå¹¶ä¸ºä½ æ‰§è¡Œå‘é‡çš„æœç´¢ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/39/84/39ab4b67b2689e6daf9a83bc5895b684.jpg?wh=4096x1701\" alt=\"\"></p><p>ä½ çœ‹ï¼ŒRAGå®é™…ä¸Šæ˜¯ä¸ºéç»“æ„åŒ–æ•°æ®åˆ›å»ºäº†ä¸€ä¸ªâ€œåœ°å›¾â€ã€‚å½“ç”¨æˆ·æœ‰æŸ¥è¯¢è¯·æ±‚æ—¶ï¼Œè¯¥æŸ¥è¯¢åŒæ ·è¢«åµŒå…¥ï¼Œç„¶åä½ çš„åº”ç”¨ç¨‹åºä¼šåœ¨è¿™ä¸ªâ€œåœ°å›¾â€ä¸­å¯»æ‰¾ä¸ä¹‹æœ€åŒ¹é…çš„ä½ç½®ï¼Œä»è€Œå¿«é€Ÿå‡†ç¡®åœ°æ£€ç´¢ä¿¡æ¯ã€‚</p><p>åœ¨æˆ‘ä»¬çš„é²œèŠ±è¿è¥åœºæ™¯ä¸­ï¼ŒRAGå½“ç„¶å¯ä»¥åœ¨å¾ˆå¤šæ–¹é¢å‘æŒ¥å·¨å¤§çš„ä½œç”¨ã€‚ä½ çš„é²œèŠ±æœ‰å„ç§å„æ ·çš„å“ç§ã€é¢œè‰²å’ŒèŠ±è¯­ï¼Œè¿™äº›æ•°æ®å¾€å¾€æ˜¯è‡ªç„¶çš„ã€æ¾æ•£çš„ï¼Œä¹Ÿå°±æ˜¯éç»“æ„åŒ–çš„ã€‚ä½¿ç”¨RAGï¼Œä½ å¯ä»¥é€šè¿‡åµŒå…¥å‘é‡ï¼ŒæŠŠåº“å­˜çš„é²œèŠ±ä¸ç›¸å…³çš„éç»“æ„åŒ–ä¿¡æ¯ï¼ˆå¦‚èŠ±è¯­ã€é¢œè‰²ã€äº§åœ°ç­‰ï¼‰å…³è”èµ·æ¥ã€‚å½“å®¢æˆ·æˆ–è€…å‘˜å·¥æƒ³è¦æŸ¥è¯¢æŸç§é²œèŠ±çš„ä¿¡æ¯æ—¶ï¼Œç³»ç»Ÿå¯ä»¥å¿«é€Ÿåœ°æä¾›å‡†ç¡®çš„ç­”æ¡ˆã€‚</p><p>æ­¤å¤–ï¼ŒRAGè¿˜å¯ä»¥åº”ç”¨äºè®¢å•ç®¡ç†ã€‚æ¯ä¸ªè®¢å•ï¼Œæ— è®ºæ˜¯å®¢æˆ·çš„å§“åã€åœ°å€ã€è´­ä¹°çš„é²œèŠ±ç§ç±»ï¼Œè¿˜æ˜¯è®¢å•çŠ¶æ€ï¼Œéƒ½å¯ä»¥è¢«è§†ä¸ºéç»“æ„åŒ–æ•°æ®ã€‚é€šè¿‡RAGï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°åµŒå…¥å¹¶æ£€ç´¢è¿™äº›è®¢å•ï¼Œä¸ºå®¢æˆ·æä¾›å®æ—¶çš„è®¢å•æ›´æ–°ã€è·Ÿè¸ªå’ŒæŸ¥è¯¢æœåŠ¡ã€‚</p><p>å½“ç„¶ï¼Œå¯¹äºè®¢å•è¿™æ ·çš„ä¿¡æ¯ï¼Œæ›´å¸¸è§çš„æƒ…å†µä»æ˜¯æŠŠå®ƒä»¬ç»„ç»‡æˆç»“æ„åŒ–çš„æ•°æ®ï¼Œå­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼ˆè‡³å°‘ä¹Ÿæ˜¯CSVæˆ–è€…Excelè¡¨ä¸­ï¼‰ï¼Œä»¥ä¾¿é«˜æ•ˆã€ç²¾å‡†åœ°æŸ¥è¯¢ã€‚é‚£ä¹ˆï¼ŒLLMèƒ½å¦å¸®åŠ©æˆ‘ä»¬æŸ¥è¯¢æ•°æ®åº“è¡¨ä¸­çš„æ¡ç›®å‘¢ï¼Ÿåœ¨ä¸‹ä¸€è¯¾ä¸­ï¼Œæˆ‘å°†ä¸ºä½ æ­æ™“ç­”æ¡ˆã€‚</p><h2>æ€è€ƒé¢˜</h2><ol>\n<li>è¯·ä½ å°è¯•ä½¿ç”¨ä¸€ç§æ–‡æœ¬åˆ†å‰²å™¨æ¥ç»™ä½ çš„æ–‡æ¡£åˆ†å—ã€‚</li>\n<li>è¯·ä½ å°è¯•ä½¿ç”¨ä¸€ç§æ–°çš„å‘é‡æ•°æ®åº“æ¥å­˜å‚¨ä½ çš„æ–‡æœ¬åµŒå…¥ã€‚</li>\n<li>è¯·ä½ å°è¯•ä½¿ç”¨ä¸€ç§æ–°çš„æ£€ç´¢å™¨æ¥æå–ä¿¡æ¯ã€‚</li>\n</ol><p>æœŸå¾…åœ¨ç•™è¨€åŒºçœ‹åˆ°ä½ çš„å®è·µæˆæœï¼Œå¦‚æœä½ è§‰å¾—å†…å®¹å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¹Ÿæ¬¢è¿åˆ†äº«ç»™æœ‰éœ€è¦çš„æœ‹å‹ï¼æœ€åå¦‚æœä½ å­¦æœ‰ä½™åŠ›ï¼Œå¯ä»¥è¿›ä¸€æ­¥å­¦ä¹ ä¸‹é¢çš„å»¶ä¼¸é˜…è¯»ã€‚</p><h2>å»¶ä¼¸é˜…è¯»</h2><ol>\n<li>Githubï¼š<a href=\"https://github.com/psychic-api/doctran/tree/main\">doctran</a>ï¼Œè¾…åŠ©LangChainè¿›è¡Œæ–‡æœ¬è½¬æ¢</li>\n<li>æ–‡æ¡£ï¼šLangChainä¸­ <a href=\"https://python.langchain.com/docs/modules/data_connection/indexing\">Indexing</a> çš„è¯´æ˜</li>\n</ol>","neighbors":{"left":{"article_title":"14ï½œå·¥å…·å’Œå·¥å…·ç®±ï¼šLangChainä¸­çš„Toolå’ŒToolkitsä¸€è§ˆ","id":709523},"right":{"article_title":"16ï½œè¿æ¥æ•°æ®åº“ï¼šé€šè¿‡é“¾å’Œä»£ç†æŸ¥è¯¢é²œèŠ±ä¿¡æ¯","id":713462}},"comments":[{"had_liked":false,"id":382506,"user_name":"Geek_f55576","can_delete":false,"product_type":"c1","uid":1833846,"ip_address":"æµ™æ±Ÿ","ucode":"E110971B78CF1E","user_header":"","comment_is_top":false,"comment_ctime":1697501155,"is_pvip":false,"replies":[{"id":139339,"content":"æœ‰å¾ˆå¤šå…·ä½“çš„ç­–ç•¥ï¼š\n1. ä¸€èˆ¬æ¥è¯´ï¼Œéƒ½å¯ä»¥åœ¨åˆ‡ç‰‡æ—¶è®¾ç½®ä¸Šä¸‹æ–‡çš„é‡å åŒºåŸŸï¼Œä¹Ÿå°±æ˜¯é‡å çª—å£ã€‚å¯ä»¥è®¾å¤§ä¸€ç‚¹ã€‚\n2. æœ‰ä¸€äº›åŒ…æ”¯æŒæŠŠä¸Šä¸€ä¸ªç‰‡ï¼Œå’Œä¸‹ä¸€ä¸ªç‰‡ï¼Œéƒ½ä½œä¸ºMetadataæ¥ä¿å­˜åœ¨ç´¢å¼•ä¸­ï¼Œè¿™æ ·ï¼Œæ£€ç´¢å‡ºä¸€ä¸ªç‰‡ï¼Œä¹Ÿå°±åŒæ—¶æ£€ç´¢äº†ä¸Šä¸‹æ–‡ã€‚\n3. å¦‚æœä½ çš„æ–‡æ¡£éƒ½æ˜¯ä¸€é—®ï¼Œä¸€ç­”çš„å½¢å¼ã€‚ä½ å¯ä»¥è‡ªå·±ä¿®æ”¹åˆ‡ç‰‡é€»è¾‘ï¼Œåˆ»æ„çš„æŠŠé—®ç­”æ†ç»‘åœ¨ä¸€èµ·ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1697616814,"ip_address":"ç‘å£«","comment_id":382506,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"è€å¸ˆå¦‚æœå¯¹æ–‡ä»¶åˆ‡ç‰‡æ—¶å€™ï¼Œæ–‡ä»¶ä¸­çš„çš„é—®é¢˜å’Œå›ç­”è¢«åˆ‡æˆ2ä¸ªä¸åŒçš„chuncké‚£ä¹ˆç»å¸¸ä¼šæ— æ³•æ£€ç´¢åˆ°ç­”æ¡ˆï¼Œè¿™ç§åœºæ™¯æœ‰ä»€ä¹ˆä¼˜åŒ–æ–¹æ³•å—ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629770,"discussion_content":"æœ‰å¾ˆå¤šå…·ä½“çš„ç­–ç•¥ï¼š\n1. ä¸€èˆ¬æ¥è¯´ï¼Œéƒ½å¯ä»¥åœ¨åˆ‡ç‰‡æ—¶è®¾ç½®ä¸Šä¸‹æ–‡çš„é‡å åŒºåŸŸï¼Œä¹Ÿå°±æ˜¯é‡å çª—å£ã€‚å¯ä»¥è®¾å¤§ä¸€ç‚¹ã€‚\n2. æœ‰ä¸€äº›åŒ…æ”¯æŒæŠŠä¸Šä¸€ä¸ªç‰‡ï¼Œå’Œä¸‹ä¸€ä¸ªç‰‡ï¼Œéƒ½ä½œä¸ºMetadataæ¥ä¿å­˜åœ¨ç´¢å¼•ä¸­ï¼Œè¿™æ ·ï¼Œæ£€ç´¢å‡ºä¸€ä¸ªç‰‡ï¼Œä¹Ÿå°±åŒæ—¶æ£€ç´¢äº†ä¸Šä¸‹æ–‡ã€‚\n3. å¦‚æœä½ çš„æ–‡æ¡£éƒ½æ˜¯ä¸€é—®ï¼Œä¸€ç­”çš„å½¢å¼ã€‚ä½ å¯ä»¥è‡ªå·±ä¿®æ”¹åˆ‡ç‰‡é€»è¾‘ï¼Œåˆ»æ„çš„æŠŠé—®ç­”æ†ç»‘åœ¨ä¸€èµ·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1697616814,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":389859,"user_name":"ä¸‡ä¸‡æ²¡æƒ³åˆ°","can_delete":false,"product_type":"c1","uid":2789057,"ip_address":"å±±ä¸œ","ucode":"2F9BA81315D3C7","user_header":"https://static001.geekbang.org/account/avatar/00/2a/8e/c1/ab1110f8.jpg","comment_is_top":false,"comment_ctime":1713693276,"is_pvip":false,"replies":[{"id":142311,"content":"è¦å¤§æ¨¡å‹æ•´åˆï¼Œé—®é¢˜ï¼ŒçŸ¥è¯†ï¼Œæ£€ç´¢ç»“æœï¼Œâ€”â€”ã€‹æœ€ç»ˆç”Ÿæˆäººç±»èƒ½æ‡‚çš„â€œå®¢æœâ€è¯­è¨€ã€‚æ¯”å¦‚è¯´ï¼Œè°¢è°¢ï¼Œè¿™å°±æ˜¯æˆ‘æ£€ç´¢åˆ°çš„ï¼Œæœ‰å…¶ä»–é—®é¢˜ç»§ç»­é—®æˆ‘å“Ÿï¼ï¼â€”â€”è¿™äº›ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1717952890,"ip_address":"æ–°åŠ å¡","comment_id":389859,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"è¿˜æ˜¯ä¸èƒ½æ˜ç™½gptè¿™æ ·çš„è¯­è¨€æ¨¡å‹åœ¨RAGä¸­çš„ä½œç”¨ã€ä¸æ˜¯ç›´æ¥åœ¨å‘é‡æ•°æ®åº“ä¸­å°±æŸ¥å‡ºæ¥äº†ä¹ˆã€æœ€åä¸€æ­¥ä¸ºä»€ä¹ˆè¦ä¸¢ç»™gptè¾“å‡ºã€è€Œä¸æ˜¯ç›´æ¥è¾“å‡º","like_count":2,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646429,"discussion_content":"è¦å¤§æ¨¡å‹æ•´åˆï¼Œé—®é¢˜ï¼ŒçŸ¥è¯†ï¼Œæ£€ç´¢ç»“æœï¼Œâ€”â€”ã€‹æœ€ç»ˆç”Ÿæˆäººç±»èƒ½æ‡‚çš„â€œå®¢æœâ€è¯­è¨€ã€‚æ¯”å¦‚è¯´ï¼Œè°¢è°¢ï¼Œè¿™å°±æ˜¯æˆ‘æ£€ç´¢åˆ°çš„ï¼Œæœ‰å…¶ä»–é—®é¢˜ç»§ç»­é—®æˆ‘å“Ÿï¼ï¼â€”â€”è¿™äº›ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1717952890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1023093,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9c/75/525e53b1.jpg","nickname":"Hobby","note":"","ucode":"8954830380D44F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":643799,"discussion_content":"è¿™æ˜¯ä¼ ç»Ÿæœç´¢å¼•æ“ä¸åŠ æŒäº†GPTçš„Bingçš„åŒºåˆ«ï¼Œæ˜¯åªç»™ä½œä¸šç­”æ¡ˆä¸æä¾›è€å¸ˆè®²è§£çš„ä½œä¸šè§£ç­”çš„åŒºåˆ«ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1714636844,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3881055,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEJB0SU5GGD0QGFAQiaLcqf6G1zkibWtNlK7YwJ7Am9KE6xlwVwRR6sLicYrRWNpLM9ZpicgXJ1IuUYYIibxZuLYkfQOdBicw5ibSh4GibiaCnW6ccIJ3vA/132","nickname":"Geek_69d6c4","note":"","ucode":"498C6F89D5E961","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":643065,"discussion_content":"ç›´æ¥è¾“å‡ºé‚£å°±ä¸æ˜¯ç”Ÿæˆå¼äº†ï¼Œè€Œæ˜¯æœç´¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1714014064,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ‹‰è„±ç»´äºš","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382323,"user_name":"Lominnave","can_delete":false,"product_type":"c1","uid":1066748,"ip_address":"æµ™æ±Ÿ","ucode":"0674B630718AD9","user_header":"https://static001.geekbang.org/account/avatar/00/10/46/fc/147e38d9.jpg","comment_is_top":false,"comment_ctime":1697073786,"is_pvip":false,"replies":[{"id":139274,"content":"å½“ç„¶å¯ä»¥äº†ã€‚ç¨€ç–å‘é‡æ˜¯æŒ‡ä¸€ä¸ªå¤§å¤šæ•°å…ƒç´ éƒ½æ˜¯é›¶ï¼ˆæˆ–æœªå®šä¹‰ã€nullï¼‰çš„å‘é‡ã€‚ä¸ä¹‹ç›¸å¯¹çš„æ˜¯å¯†é›†å‘é‡ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†å…ƒç´ éƒ½æ˜¯éé›¶çš„ã€‚ç¨€ç–å‘é‡åœ¨å¾ˆå¤šåœºåˆéƒ½éå¸¸æœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨é«˜ç»´æ•°æ®ä¸­ï¼Œå…¶ä¸­å¾ˆå¤šç»´åº¦å¯¹äºæŸäº›è§‚å¯Ÿå€¼æ¥è¯´å¯èƒ½æ˜¯ä¸ç›¸å…³æˆ–ç¼ºå¤±çš„ã€‚ä¾‹å¦‚ï¼Œåœ¨è‡ªç„¶è¯­è¨€å¤„ç†ä¸­ï¼Œè¯è¢‹æ¨¡å‹ï¼ˆBag-of-Words, BoWï¼‰äº§ç”Ÿçš„æ˜¯ç¨€ç–å‘é‡ï¼Œå› ä¸ºå¤§é‡çš„è¯åœ¨ç‰¹å®šæ–‡æ¡£ä¸­å¯èƒ½æ²¡æœ‰å‡ºç°ã€‚ç¨€ç–å‘é‡çš„ä¼˜ç‚¹ï¼šå­˜å‚¨æ•ˆç‡ï¼šç”±äºå‘é‡ä¸­çš„å¤§éƒ¨åˆ†å€¼éƒ½æ˜¯é›¶ï¼Œæˆ‘ä»¬åªéœ€è¦å­˜å‚¨éé›¶çš„å…ƒç´ åŠå…¶ç´¢å¼•ï¼Œè¿™å¤§å¤§èŠ‚çœäº†å­˜å‚¨ç©ºé—´ã€‚è®¡ç®—æ•ˆç‡ï¼šæŸäº›ç®—æ³•å¯ä»¥ä¼˜åŒ–å¤„ç†ç¨€ç–æ•°æ®ï¼Œä»è€Œæ›´å¿«åœ°è¿è¡Œã€‚\nç¨€ç–å‘é‡æ˜¯æŒ‡ä¸€ä¸ªå¤§å¤šæ•°å…ƒç´ éƒ½æ˜¯é›¶ï¼ˆæˆ–æœªå®šä¹‰ã€nullï¼‰çš„å‘é‡ã€‚ä¸ä¹‹ç›¸å¯¹çš„æ˜¯å¯†é›†å‘é‡ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†å…ƒç´ éƒ½æ˜¯éé›¶çš„ã€‚ç¨€ç–å‘é‡åœ¨å¾ˆå¤šåœºåˆéƒ½éå¸¸æœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨é«˜ç»´æ•°æ®ä¸­ï¼Œå…¶ä¸­å¾ˆå¤šç»´åº¦å¯¹äºæŸäº›è§‚å¯Ÿå€¼æ¥è¯´å¯èƒ½æ˜¯ä¸ç›¸å…³æˆ–ç¼ºå¤±çš„ã€‚\n\nä¾‹å¦‚ï¼Œåœ¨è‡ªç„¶è¯­è¨€å¤„ç†ä¸­ï¼Œè¯è¢‹æ¨¡å‹ï¼ˆBag-of-Words, BoWï¼‰äº§ç”Ÿçš„æ˜¯ç¨€ç–å‘é‡ï¼Œå› ä¸ºå¤§é‡çš„è¯åœ¨ç‰¹å®šæ–‡æ¡£ä¸­å¯èƒ½æ²¡æœ‰å‡ºç°ã€‚\n\nç¨€ç–å‘é‡çš„ä¼˜ç‚¹ï¼š\nå­˜å‚¨æ•ˆç‡ï¼šç”±äºå‘é‡ä¸­çš„å¤§éƒ¨åˆ†å€¼éƒ½æ˜¯é›¶ï¼Œæˆ‘ä»¬åªéœ€è¦å­˜å‚¨éé›¶çš„å…ƒç´ åŠå…¶ç´¢å¼•ï¼Œè¿™å¤§å¤§èŠ‚çœäº†å­˜å‚¨ç©ºé—´ã€‚\nè®¡ç®—æ•ˆç‡ï¼šæŸäº›ç®—æ³•å¯ä»¥ä¼˜åŒ–å¤„ç†ç¨€ç–æ•°æ®ï¼Œä»è€Œæ›´å¿«åœ°è¿è¡Œã€‚\nå¦‚æœåŒå­¦æƒ³å¾€æ·±äº†å­¦Embeddingçš„åŸç†ï¼Œå¯ä»¥çœ‹ä¸€ä¸ªæˆ‘çš„è§†é¢‘è¯¾ï¼šâ€œç”Ÿæˆå¼é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹ï¼šç†è®ºä¸å®æˆ˜ é»„ä½³â€ã€‚æœä¸€ä¸‹å°±å‡ºæ¥äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1697165813,"ip_address":"ç‘å£«","comment_id":382323,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"è€å¸ˆå¯ä»¥ä»‹ç»ä¸‹ç¨€ç–å‘é‡ä¹ˆï¼Œå¦å¤–ç¨€ç–-å¯†é›†å‘é‡ç»“åˆå¦‚ä½•æé«˜å¬å›æ•ˆæœï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629516,"discussion_content":"å½“ç„¶å¯ä»¥äº†ã€‚ç¨€ç–å‘é‡æ˜¯æŒ‡ä¸€ä¸ªå¤§å¤šæ•°å…ƒç´ éƒ½æ˜¯é›¶ï¼ˆæˆ–æœªå®šä¹‰ã€nullï¼‰çš„å‘é‡ã€‚ä¸ä¹‹ç›¸å¯¹çš„æ˜¯å¯†é›†å‘é‡ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†å…ƒç´ éƒ½æ˜¯éé›¶çš„ã€‚ç¨€ç–å‘é‡åœ¨å¾ˆå¤šåœºåˆéƒ½éå¸¸æœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨é«˜ç»´æ•°æ®ä¸­ï¼Œå…¶ä¸­å¾ˆå¤šç»´åº¦å¯¹äºæŸäº›è§‚å¯Ÿå€¼æ¥è¯´å¯èƒ½æ˜¯ä¸ç›¸å…³æˆ–ç¼ºå¤±çš„ã€‚ä¾‹å¦‚ï¼Œåœ¨è‡ªç„¶è¯­è¨€å¤„ç†ä¸­ï¼Œè¯è¢‹æ¨¡å‹ï¼ˆBag-of-Words, BoWï¼‰äº§ç”Ÿçš„æ˜¯ç¨€ç–å‘é‡ï¼Œå› ä¸ºå¤§é‡çš„è¯åœ¨ç‰¹å®šæ–‡æ¡£ä¸­å¯èƒ½æ²¡æœ‰å‡ºç°ã€‚ç¨€ç–å‘é‡çš„ä¼˜ç‚¹ï¼šå­˜å‚¨æ•ˆç‡ï¼šç”±äºå‘é‡ä¸­çš„å¤§éƒ¨åˆ†å€¼éƒ½æ˜¯é›¶ï¼Œæˆ‘ä»¬åªéœ€è¦å­˜å‚¨éé›¶çš„å…ƒç´ åŠå…¶ç´¢å¼•ï¼Œè¿™å¤§å¤§èŠ‚çœäº†å­˜å‚¨ç©ºé—´ã€‚è®¡ç®—æ•ˆç‡ï¼šæŸäº›ç®—æ³•å¯ä»¥ä¼˜åŒ–å¤„ç†ç¨€ç–æ•°æ®ï¼Œä»è€Œæ›´å¿«åœ°è¿è¡Œã€‚\nç¨€ç–å‘é‡æ˜¯æŒ‡ä¸€ä¸ªå¤§å¤šæ•°å…ƒç´ éƒ½æ˜¯é›¶ï¼ˆæˆ–æœªå®šä¹‰ã€nullï¼‰çš„å‘é‡ã€‚ä¸ä¹‹ç›¸å¯¹çš„æ˜¯å¯†é›†å‘é‡ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†å…ƒç´ éƒ½æ˜¯éé›¶çš„ã€‚ç¨€ç–å‘é‡åœ¨å¾ˆå¤šåœºåˆéƒ½éå¸¸æœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨é«˜ç»´æ•°æ®ä¸­ï¼Œå…¶ä¸­å¾ˆå¤šç»´åº¦å¯¹äºæŸäº›è§‚å¯Ÿå€¼æ¥è¯´å¯èƒ½æ˜¯ä¸ç›¸å…³æˆ–ç¼ºå¤±çš„ã€‚\n\nä¾‹å¦‚ï¼Œåœ¨è‡ªç„¶è¯­è¨€å¤„ç†ä¸­ï¼Œè¯è¢‹æ¨¡å‹ï¼ˆBag-of-Words, BoWï¼‰äº§ç”Ÿçš„æ˜¯ç¨€ç–å‘é‡ï¼Œå› ä¸ºå¤§é‡çš„è¯åœ¨ç‰¹å®šæ–‡æ¡£ä¸­å¯èƒ½æ²¡æœ‰å‡ºç°ã€‚\n\nç¨€ç–å‘é‡çš„ä¼˜ç‚¹ï¼š\nå­˜å‚¨æ•ˆç‡ï¼šç”±äºå‘é‡ä¸­çš„å¤§éƒ¨åˆ†å€¼éƒ½æ˜¯é›¶ï¼Œæˆ‘ä»¬åªéœ€è¦å­˜å‚¨éé›¶çš„å…ƒç´ åŠå…¶ç´¢å¼•ï¼Œè¿™å¤§å¤§èŠ‚çœäº†å­˜å‚¨ç©ºé—´ã€‚\nè®¡ç®—æ•ˆç‡ï¼šæŸäº›ç®—æ³•å¯ä»¥ä¼˜åŒ–å¤„ç†ç¨€ç–æ•°æ®ï¼Œä»è€Œæ›´å¿«åœ°è¿è¡Œã€‚\nå¦‚æœåŒå­¦æƒ³å¾€æ·±äº†å­¦Embeddingçš„åŸç†ï¼Œå¯ä»¥çœ‹ä¸€ä¸ªæˆ‘çš„è§†é¢‘è¯¾ï¼šâ€œç”Ÿæˆå¼é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹ï¼šç†è®ºä¸å®æˆ˜ é»„ä½³â€ã€‚æœä¸€ä¸‹å°±å‡ºæ¥äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1697165813,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382902,"user_name":"zjl","can_delete":false,"product_type":"c1","uid":3020164,"ip_address":"åŒ—äº¬","ucode":"A0678190770C44","user_header":"https://static001.geekbang.org/account/avatar/00/2e/15/84/2734c72c.jpg","comment_is_top":false,"comment_ctime":1698168026,"is_pvip":false,"replies":[{"id":139517,"content":"å¯ä»¥å•Šï¼ŒæŠŠRetrivalæ¨¡å—å’ŒReActä»£ç†ç»“åˆèµ·æ¥ã€‚ä½ å¯ä»¥æ„å»ºè‡ªå·±çš„Custom Toolã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1698375110,"ip_address":"ç‘å£«","comment_id":382902,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"langchainæœ‰æ²¡æœ‰è°ƒç”¨æœ¬åœ°æ£€ç´¢çš„toolå‘¢ï¼Ÿæˆ–è®¸å¯ä»¥å°è¯•ç”¨æœ¬åœ°æ£€ç´¢å»åšreAct","like_count":1,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630376,"discussion_content":"å¯ä»¥å•Šï¼ŒæŠŠRetrivalæ¨¡å—å’ŒReActä»£ç†ç»“åˆèµ·æ¥ã€‚ä½ å¯ä»¥æ„å»ºè‡ªå·±çš„Custom Toolã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698375110,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2851308,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epEexjZIhNpYNiaAibdLD0Jsl797U6hianjrDs2QT4Q4HOicIEeILxjOcEF7gXGyQeJRJHaeenibb3N9QQ/132","nickname":"enbool","note":"","ucode":"BB460DCCA87099","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630259,"discussion_content":"åº”è¯¥åœ¨tools é‡Œé¢ï¼Œæˆ–è€…è‡ªå·±å®ç°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698221943,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å››å·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382304,"user_name":"é˜¿æ–¯è’‚èŠ¬","can_delete":false,"product_type":"c1","uid":1024164,"ip_address":"å¹¿ä¸œ","ucode":"61D5E3BDA4EBC5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a0/a4/b060c723.jpg","comment_is_top":false,"comment_ctime":1697018432,"is_pvip":false,"replies":[{"id":139273,"content":"åŒå­¦çš„é—®é¢˜ç‰¹åˆ«å¥½ã€‚è¿™è¾¹LangChainå¹¶æ²¡æœ‰åšç‰¹åˆ«çš„å¤„ç†ï¼Œè€Œç›®å‰çš„LLMè¿˜æ— æ³•å¤„ç†è¶…é•¿çš„æ–‡æœ¬ã€‚é‚£ä¹ˆï¼Œé¦–å…ˆï¼šä½ çš„é—®é¢˜è¦éå¸¸ç»†ã€‚è§£è¯»å¿ƒç†æ´»åŠ¨ï¼Œè§£è¯»é‚£éƒ¨åˆ†ï¼Ÿå“ªå¹´å“ªæœˆï¼Ÿå“ªä¸ªç¯å¢ƒï¼Ÿä½ æ³›æ³›ï¼Œå›ç­”è‚¯å®šä¸å‡†ã€‚ä½ é—®é¢˜ç»†ï¼Œå°±æœ‰å¯èƒ½æ£€ç´¢å‡ºæ¥ç›¸å…³çš„åµŒå…¥å—ã€‚å¦å¤–ï¼Œå·¥ç¨‹ä¸Šéœ€è¦è®¾è®¡Metadataç»™æ¯ä¸ªå—ï¼Œéœ€è¦åšSummaryï¼Œéœ€è¦è€ƒè™‘é€’å½’å¼çš„æ£€ç´¢ç­–ç•¥ï¼Œåˆ†å±‚çš„æ£€ç´¢ç­–ç•¥ã€‚è¿™æ˜¯å¦ä¸€ä¸ªå¤§è¯¾é¢˜äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1697165468,"ip_address":"ç‘å£«","comment_id":382304,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"ã€ç¬¬äºŒç§æ˜¯ embed_query æ–¹æ³•ï¼Œä¸ºæŸ¥è¯¢åˆ›å»ºåµŒå…¥ã€‘ä¸€ç›´æœ‰ä¸ªç–‘é—®ï¼Œå¦‚æœqueryæ˜¯éœ€è¦â€œå¤æ‚ç†è§£â€çš„ï¼Œé‚£ä¹ˆæ˜¯æ€ä¹ˆé€šè¿‡â€œç›¸ä¼¼åº¦â€å»matchåˆ°æ–‡æ¡£å†…å®¹çš„å‘¢ã€‚æ¯”å¦‚æ–‡æ¡£æ˜¯ä¸€ç‰‡å°è¯´ï¼Œè€Œqueryæ˜¯ï¼šè¯·è§£è¯»æ–‡ä¸­æå†™ä¸»äººç¿å¿ƒç†æ´»åŠ¨çš„éƒ¨åˆ†ï¼Ÿè¿™é‡Œé¢ LangChain æ˜¯å¦åšäº†ç‰¹æ®Šå¤„ç†ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629514,"discussion_content":"åŒå­¦çš„é—®é¢˜ç‰¹åˆ«å¥½ã€‚è¿™è¾¹LangChainå¹¶æ²¡æœ‰åšç‰¹åˆ«çš„å¤„ç†ï¼Œè€Œç›®å‰çš„LLMè¿˜æ— æ³•å¤„ç†è¶…é•¿çš„æ–‡æœ¬ã€‚é‚£ä¹ˆï¼Œé¦–å…ˆï¼šä½ çš„é—®é¢˜è¦éå¸¸ç»†ã€‚è§£è¯»å¿ƒç†æ´»åŠ¨ï¼Œè§£è¯»é‚£éƒ¨åˆ†ï¼Ÿå“ªå¹´å“ªæœˆï¼Ÿå“ªä¸ªç¯å¢ƒï¼Ÿä½ æ³›æ³›ï¼Œå›ç­”è‚¯å®šä¸å‡†ã€‚ä½ é—®é¢˜ç»†ï¼Œå°±æœ‰å¯èƒ½æ£€ç´¢å‡ºæ¥ç›¸å…³çš„åµŒå…¥å—ã€‚å¦å¤–ï¼Œå·¥ç¨‹ä¸Šéœ€è¦è®¾è®¡Metadataç»™æ¯ä¸ªå—ï¼Œéœ€è¦åšSummaryï¼Œéœ€è¦è€ƒè™‘é€’å½’å¼çš„æ£€ç´¢ç­–ç•¥ï¼Œåˆ†å±‚çš„æ£€ç´¢ç­–ç•¥ã€‚è¿™æ˜¯å¦ä¸€ä¸ªå¤§è¯¾é¢˜äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1697165468,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1024164,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a0/a4/b060c723.jpg","nickname":"é˜¿æ–¯è’‚èŠ¬","note":"","ucode":"61D5E3BDA4EBC5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":629756,"discussion_content":"æ„Ÿè°¢è€å¸ˆæŒ‡ç‚¹ï¼Œåˆæ‰“å¼€äº†æ–°çš„æ€è€ƒæ–¹å‘ã€‚\n1. â€œé—®é¢˜è¦ç»†â€ï¼Œè¿™æ˜¯å·¥ç¨‹å±‚é¢å¯ä»¥è§£å†³çš„å—ï¼Ÿè¿˜æ˜¯è¯´è¦å¯èƒ½è¦å€ŸåŠ©ä¸€ä¸ªä¸“é—¨çš„å°æ¨¡å‹æ¥æ‰©å±• prompt ä¹‹ç±»ï¼Ÿè¿˜æ˜¯è¯´å¢åŠ ä¸€äº› few-shot prompt ä¹Ÿå¯ä»¥æå‡æ•ˆæœï¼ˆæƒ³æ¥è¿™ä¸ªæˆ‘åº”è¯¥äº²è‡ªå®è·µæ¯”è¾ƒå¥½ï¼‰ï¼Ÿ\n2. ä»æ¨¡å‹å±‚é¢çœ‹ï¼Œé’ˆå¯¹æ€§çš„å¯¹è¿™ä¸ªæ–‡å­¦QAåœºæ™¯åšå¾®è°ƒï¼Œæ˜¯å¦ä¹Ÿèƒ½èµ·åˆ°æå‡æ•ˆæœï¼Ÿ\n3. metadataã€summaryã€é€’å½’å¼æ£€ç´¢ã€åˆ†å±‚æ£€ç´¢ï¼Œè¿™äº›æœ¬è¯¾ç¨‹ä¼šæœ‰æåŠå—ï¼Œå¦‚æœæ²¡æœ‰ï¼Œæœªæ¥è€å¸ˆæœ‰è¯¾å— ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1697599367,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":629514,"ip_address":"å¹¿ä¸œ","group_id":0},"score":629756,"extra":""}]},{"author":{"id":1070253,"avatar":"https://static001.geekbang.org/account/avatar/00/10/54/ad/6ee2b7cb.jpg","nickname":"Jacob.C","note":"","ucode":"034998E7A7CCD1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":633216,"discussion_content":"å¥½é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1701913658,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382284,"user_name":"æ„Ÿæ€§å³è‡ªç„¶çš„ç†æ€§","can_delete":false,"product_type":"c1","uid":3716675,"ip_address":"åŒ—äº¬","ucode":"61C42C41493132","user_header":"https://static001.geekbang.org/account/avatar/00/38/b6/43/8ee89342.jpg","comment_is_top":false,"comment_ctime":1697004263,"is_pvip":false,"replies":[{"id":139270,"content":"å¥½çš„ï¼ŒåŒå­¦çš„æ„æ€æ˜¯åˆ©ç”¨Streamlitè¿™ç§WebUIæ¡†æ¶å¼€å‘äº¤äº’å¼çš„æœºå™¨å­¦ä¹ åº”ç”¨æ˜¯ä¹ˆï¼Ÿå¦‚æœæ˜¯çš„ï¼Œæˆ‘ä»¬æœ€åçš„é¡¹ç›®ä¼šæœ‰ä¸€äº›è¿™éƒ¨åˆ†çš„å†…å®¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1697159179,"ip_address":"ç‘å£«","comment_id":382284,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"å¸Œæœ›è€å¸ˆå¯ä»¥æœ€åçš„å†…å®¹é‡Œé¢æ¶‰åŠåˆ°ç›¸å…³äº¤äº’é¡µé¢çš„å†…å®¹ï¼Œå°±æ˜¯å›¾å½¢é¡µé¢çš„å†…å®¹","like_count":1,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629507,"discussion_content":"å¥½çš„ï¼ŒåŒå­¦çš„æ„æ€æ˜¯åˆ©ç”¨Streamlitè¿™ç§WebUIæ¡†æ¶å¼€å‘äº¤äº’å¼çš„æœºå™¨å­¦ä¹ åº”ç”¨æ˜¯ä¹ˆï¼Ÿå¦‚æœæ˜¯çš„ï¼Œæˆ‘ä»¬æœ€åçš„é¡¹ç›®ä¼šæœ‰ä¸€äº›è¿™éƒ¨åˆ†çš„å†…å®¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1697159179,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":384473,"user_name":"æ—¥æš®é€”è¿œ","can_delete":false,"product_type":"c1","uid":1551030,"ip_address":"ä¸Šæµ·","ucode":"2A1FBE7894BF35","user_header":"https://static001.geekbang.org/account/avatar/00/17/aa/b6/9d021ab4.jpg","comment_is_top":false,"comment_ctime":1701003251,"is_pvip":false,"replies":[{"id":140933,"content":"å¥½çš„ï¼Œå¤šè°¢åŒå­¦ï¼Œé©¬ä¸Šä¿®æ”¹æ–‡å­—ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1705283782,"ip_address":"ç‘å£«","comment_id":384473,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"embed_documentså’Œembed_queryè¿™ä¸€å—çš„æ–‡æ¡£æ˜¯ä¸æ˜¯å†™é”™äº†ï¼Ÿå‡ºç°äº†2æ¬¡ã€Œembed_documents æ–¹æ³•çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼šã€","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635830,"discussion_content":"å¥½çš„ï¼Œå¤šè°¢åŒå­¦ï¼Œé©¬ä¸Šä¿®æ”¹æ–‡å­—ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1705283783,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383171,"user_name":"qkyong","can_delete":false,"product_type":"c1","uid":1118978,"ip_address":"å¹¿ä¸œ","ucode":"641B0E9D9BC170","user_header":"https://static001.geekbang.org/account/avatar/00/11/13/02/cb050516.jpg","comment_is_top":false,"comment_ctime":1698626725,"is_pvip":false,"replies":[{"id":139609,"content":"åŒå­¦å…·ä½“æŒ‡å¾—é‚£æ®µä»£ç ã€‚ä¸€èˆ¬æ¥è¯´text-splitteræ˜¯ç”ŸæˆçŸ¢é‡å­˜å‚¨ç‰‡ä¹‹å‰ç”¨åˆ°çš„å·¥å…·ã€‚æ£€ç´¢æ—¶å€™ï¼Œå°±ç›´æ¥è®¡ç®—å‘é‡è·ç¦»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":1809833,"ctime":1698771662,"ip_address":"ç‘å£«","comment_id":383171,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"æ£€ç´¢æ—¶ä¸ºå•¥è¦æŒ‡å®štext-splitterï¼Ÿç†è®ºä¸Šç›´æ¥è®¡ç®—å‘é‡è·ç¦»å‘€","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630681,"discussion_content":"åŒå­¦å…·ä½“æŒ‡å¾—é‚£æ®µä»£ç ã€‚ä¸€èˆ¬æ¥è¯´text-splitteræ˜¯ç”ŸæˆçŸ¢é‡å­˜å‚¨ç‰‡ä¹‹å‰ç”¨åˆ°çš„å·¥å…·ã€‚æ£€ç´¢æ—¶å€™ï¼Œå°±ç›´æ¥è®¡ç®—å‘é‡è·ç¦»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698771662,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":393460,"user_name":"yanyu-xin","can_delete":false,"product_type":"c1","uid":1899757,"ip_address":"å¹¿ä¸œ","ucode":"3AA389F9E4C236","user_header":"","comment_is_top":false,"comment_ctime":1723892182,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"ç”¨ç™¾å·æ™ºèƒ½åµŒå…¥æ¨¡å‹æ”¹å†™æ–‡æœ¬åµŒå…¥ã€å­˜å‚¨åµŒå…¥\n\n## æ—§ä»£ç 1ï¼š\nfrom langchain.embeddings import OpenAIEmbeddings\nembeddings_model = OpenAIEmbeddings()\n## æ–°ä»£ç 1ï¼š\nfrom langchain_community.embeddings import BaichuanTextEmbeddings  # å¯¼å…¥ç™¾å·æ¨¡å‹\nembeddings_model = BaichuanTextEmbeddings(baichuan_api_key=&quot;key&quot;) # åˆå§‹åŒ–ç™¾å·æ¨¡å‹ã€‚KEY ç”¨ä½ çš„keyä»£æ›¿\n\n## æ—§ä»£ç 2ï¼š\nunderlying_embeddings = OpenAIEmbeddings()\nnamespace=underlying_embeddings.model \n## æ–°ä»£ç 2ï¼š\nunderlying_embeddings=embeddings_model\nnamespace=&quot;baichuan_embeddings&quot;   # ç”¨è‡ªå®šä¹‰å‘½ååµŒå…¥ç¼“å­˜çš„å‘½åç©ºé—´\n\n### æ–°ä»£ç 3ï¼šé‡‡ç”¨å…¶ä»–æ–‡æœ¬åˆ†å‰²å™¨ã€å‘é‡æ•°æ®åº“ã€æ£€ç´¢å™¨çš„çš„ä»£ç \n\n# å¯¼å…¥æ–‡æ¡£\nfrom langchain_community.document_loaders import Docx2txtLoader\nloader = Docx2txtLoader(&#39;.&#47;å»ºç­‘åƒåœ¾å¤„ç†æŠ€æœ¯æ ‡å‡†.docx&#39;)\n\n# å¯¼å…¥åˆå§‹åŒ–ç™¾å·æ¨¡å‹\nfrom langchain_community.embeddings import BaichuanTextEmbeddings\nembeddings_model = BaichuanTextEmbeddings(baichuan_api_key=&quot;KEY&quot;) #æ­¤å¤„ç”¨ä½ çš„keyä»£æ›¿\n\n# ä»åŠ è½½å™¨åˆ›å»ºç´¢å¼•\nfrom langchain.indexes import VectorstoreIndexCreator\nindex = VectorstoreIndexCreator(embedding=embeddings_model).from_loaders([loader])\n\n# llmç”¨é˜¿é‡Œåƒé—®å¤§æ¨¡å‹æ›¿æ¢\nfrom langchain_openai import ChatOpenAI\nllm = ChatOpenAI(\n    api_key=&quot;key&quot;, # ç”¨æ‚¨çš„KEYæ›¿æ¢\n    base_url=&quot;https:&#47;&#47;dashscope.aliyuncs.com&#47;compatible-mode&#47;v1&quot;, \n    model=&#39;qwen-long&#39; \n    )\n\n# æ›¿æ¢æ–‡æœ¬åˆ†å‰²å™¨ \nfrom langchain.text_splitter import RecursiveCharacterTextSplitter\ntext_splitter = RecursiveCharacterTextSplitter(chunk_size=1000, chunk_overlap=0)\n\n# æ›¿æ¢å‘é‡å­˜å‚¨ \nfrom langchain_community.vectorstores import LanceDB\nembeddings = embeddings_model\n\n# ä»åŠ è½½å™¨åˆ›å»ºç´¢å¼• \nindex_creator = VectorstoreIndexCreator(\n    vectorstore_cls= LanceDB, # ä½¿ç”¨LanceDBå‘é‡å­˜å‚¨æ›¿æ¢\n    embedding=embeddings, # ä½¿ç”¨ç™¾å·æ™ºèƒ½åµŒå…¥æ¨¡å‹æ›¿æ¢\n    text_splitter=text_splitter # ä½¿ç”¨RecursiveCharacterTextSplitteræ–‡æœ¬åˆ†å‰²å™¨\n)\n\nquery = &quot;å„ç±»å»ºç­‘åƒåœ¾å¦‚ä½•å¤„ç†ï¼Ÿ&quot;\nindex = index_creator.from_loaders([loader])\n# åœ¨queryéœ€è¦å¢åŠ å¤§è¯­è¨€æ¨¡å‹llm\nresult = index.query(llm = llm, question = query)\nprint(result)","like_count":2},{"had_liked":false,"id":394996,"user_name":"yanyu-xin","can_delete":false,"product_type":"c1","uid":1899757,"ip_address":"åŒ—äº¬","ucode":"3AA389F9E4C236","user_header":"","comment_is_top":false,"comment_ctime":1729054629,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"# æ–‡æ¡£åŠ è½½å™¨åˆ—è¡¨çš„å›¾ç‰‡è¡¨æ ¼ä¸­ï¼Œç¤ºä¾‹ä»£ç çš„æ˜¾ç¤ºå‡ºç°ä¸€äº›å°é”™è¯¯ã€‚åº”è¯¥åˆ†éš”çš„ä»£ç æ²¡æœ‰ç”¨ç©ºæ ¼åˆ†éš”ï¼Œå•è¯è¿æ¥åœ¨ä¸€èµ·ã€‚å¦‚åŠ è½½æ–‡æœ¬æ–‡æ¡£çš„ä»£ç ï¼š\nfrom langchain.document_loaders import TextLoaderloader =\nTextloader(&quot;example_data&#47;index.md&quot;)data = loader.load()\n\nä»£ç æ˜¾ç¤ºé”™è¯¯ï¼Œåº”è¯¥åœ¨å…¶ä¸­å¢åŠ ç©ºæ ¼çš„ï¼Œå’Œå¢åŠ æ¢è¡Œï¼š\nfrom langchain.document_loaders import TextLoader\nloader = Textloader(&quot;example_data&#47;index.md&quot;) \ndata= loader.load()\n\n# æ–‡æ¡£åŠ è½½å’Œæ–‡æœ¬åˆ†å‰²çš„ç¤ºä¾‹ä»£ç éƒ½å­˜åœ¨ç±»ä¼¼åˆ†éš”ã€æ¢è¡Œæ˜¾ç¤ºé—®é¢˜ï¼Œå»ºè®®ä¿®è®¢ã€‚","like_count":1},{"had_liked":false,"id":387984,"user_name":"ManerFan","can_delete":false,"product_type":"c1","uid":1055586,"ip_address":"åŒ—äº¬","ucode":"9C7164E19E0284","user_header":"https://static001.geekbang.org/account/avatar/00/10/1b/62/81a5a17d.jpg","comment_is_top":false,"comment_ctime":1709099650,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100617601,"comment_content":"ç›¸æ¯” langchainçš„Retrivalå’Œllama indexï¼Œåº”è¯¥å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿ","like_count":1},{"had_liked":false,"id":392601,"user_name":"å¼ ç”³å‚²","can_delete":false,"product_type":"c1","uid":1182372,"ip_address":"åŒ—äº¬","ucode":"22D46BC529BA8A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0a/a4/828a431f.jpg","comment_is_top":false,"comment_ctime":1721274669,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":2,"score":3,"product_id":100617601,"comment_content":"ç¬¬15è®²æ‰“å¡~\nä¸€ä¸ªå…¸å‹çš„RAGç³»ç»Ÿçš„æ ¸å¿ƒå¤„ç†æµç¨‹ï¼šLoading -&gt; Transform(Splitting) -&gt; Embedding -&gt; Store -&gt; Retrieving","like_count":0},{"had_liked":false,"id":392351,"user_name":"Geek_2d85f8","can_delete":false,"product_type":"c1","uid":3917682,"ip_address":"æ±Ÿè‹","ucode":"4C155E04676A75","user_header":"","comment_is_top":false,"comment_ctime":1720666967,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100617601,"comment_content":"ç”±äºlangchainçš„æ›´æ–°ï¼Œè¯¾ç¨‹é‡Œçš„VectorstoreIndexCreatorä½¿ç”¨æ—¶éœ€è¦å¢åŠ embeddingï¼Œå¦‚ï¼š\nindex = VectorstoreIndexCreator(embedding=OpenAIEmbeddings()).from_loaders([loader])\nåŒæ—¶åœ¨index.queryä¸­ï¼Œä¹Ÿéœ€è¦å¢åŠ å¤§è¯­è¨€æ¨¡å‹llmï¼ˆéœ€æå‰åˆ›å»ºï¼‰ï¼Œå¦‚ï¼š\nindex.query(llm = llm, question = query)","like_count":0}]}