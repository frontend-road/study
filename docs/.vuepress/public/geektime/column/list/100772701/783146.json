{"id":783146,"title":"02ï½œåˆ†å¸ƒå¼å­˜å‚¨æ•°æ®ç»“æ„LSMï¼Œå¦‚ä½•ä¼˜åŒ–è¯»å†™æ€§èƒ½ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å½­æ—­ã€‚</p><p>å½“å‰æ•°æ®åº“éƒ½ä½¿ç”¨ç¡¬ç›˜æ¥æŒä¹…åŒ–å­˜å‚¨æ•°æ®ã€‚å¸‚é¢ä¸Šçš„ç¡¬ç›˜ä¸»è¦åˆ†ä¸ºSSDå›ºæ€ç¡¬ç›˜å’ŒHHDæœºæ¢°ç¡¬ç›˜ã€‚å…¶ä¸­ï¼ŒSSDå›ºæ€ç¡¬ç›˜è¯»å†™æ€§èƒ½é«˜ï¼Œä½†æ˜¯ä»·æ ¼è´µï¼Œä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“ç”¨å¾—æ¯”è¾ƒå¤šã€‚</p><p>å¤§æ•°æ®ã€åˆ†å¸ƒå¼å­˜å‚¨ç”±äºæ•°æ®é‡å¤§ï¼Œä½¿ç”¨SSDç¡¬ç›˜ä¼šå¯¼è‡´å­˜å‚¨æˆæœ¬è¿‡é«˜ã€‚æ‰€ä»¥ï¼Œå¤§å¤šæ•°åˆ†å¸ƒå¼å­˜å‚¨å¼•æ“ï¼Œæ¯”å¦‚HDFSéƒ½ä½¿ç”¨HDDæœºæ¢°ç¡¬ç›˜ä½œä¸ºæ•°æ®èŠ‚ç‚¹çš„å­˜å‚¨è®¾å¤‡ã€‚</p><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼ŒHHDçš„è¯»å†™æ€§èƒ½å¯ä¸åƒSSDé‚£ä¹ˆé«˜ã€‚æ•°æ®å¦‚æœæ’åºåå­˜å‚¨åœ¨æ•°æ®æ–‡ä»¶é‡Œï¼Œç›´æ¥æ›´æ–°çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šæ¶‰åŠç£ç›˜çš„éšæœºIOï¼Œä½¿ç”¨HDDç¡¬ç›˜ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚</p><p>é‚£ä¹ˆï¼Œè¿™äº›å­˜å‚¨å¼•æ“æ€ä¹ˆæ‰èƒ½åœ¨ä½¿ç”¨æœºæ¢°ç¡¬ç›˜å­˜å‚¨çš„æƒ…å†µä¸‹ï¼Œè§£å†³æ›´æ–°æ•°æ®å¯èƒ½éœ€è¦éšæœºå†™å…¥ï¼Œå¯¼è‡´æ€§èƒ½ä¸å¥½çš„æƒ…å†µå‘¢ï¼Ÿ</p><p>åœ¨å¤§æ•°æ®é¢†åŸŸï¼Œé’ˆå¯¹æ•°æ®å­˜å‚¨å‡ºç°äº†å¾ˆå¤šç”¨æ¥ä¼˜åŒ–éšæœºè¯»å†™æˆ–è€…è¯´å¹³è¡¡è¯»å†™æ€§èƒ½çš„æŠ€æœ¯ï¼Œä»æ–‡ä»¶çš„ç»„ç»‡å½¢å¼æ¥è¯´å¯ä»¥åˆ†ä¸ºä¸¤ç§ã€‚</p><p>ç¬¬ä¸€ç§ï¼Œ<strong>Copy-On-Writeã€‚</strong>è¿™ä¸ªç±»ä¼¼Javaå¹¶å‘ç¼–ç¨‹é‡Œé¢çš„CopyOnWriteArrayListï¼Œæ•°æ®æ–°å¢ã€æ›´æ–°ã€åˆ é™¤çš„æ—¶å€™ï¼Œä¼šå»æ‰¾åˆ°æ•°æ®åº”è¯¥å½’å±çš„æ–‡ä»¶ï¼Œå°†è¿™ä¸ªæ–‡ä»¶ç”¨æœ€æ–°çš„å†…å®¹è¦†ç›–åé‡å†™ä¸€ä¸ªæ–°çš„æ–‡ä»¶ã€‚</p><p>è¿™ç§æ¨¡å¼å¯¹è¯»éå¸¸å‹å¥½ï¼Œè¯»å–çš„æ—¶å€™åªéœ€è¦è¯»å–æœ€æ–°çš„æ–‡ä»¶å³å¯å¾—åˆ°æœ€æ–°çš„å†…å®¹ã€‚ä½†æ˜¯å†™å…¥çš„æ—¶å€™æˆæœ¬å¾ˆé«˜ã€‚å› æ­¤ï¼Œå®ƒé€‚åˆå†™å…¥ä¸å¤šï¼Œè¯»å–é¢‘ç¹çš„åœºæ™¯ã€‚</p><!-- [[[read_end]]] --><p>ç¬¬äºŒç§ï¼Œ<strong>Merge-On-Read</strong>ã€‚æ•°æ®å†™å…¥çš„æ—¶å€™ç›´æ¥å†™å…¥æ–°çš„æ–‡ä»¶ï¼Œæ‰€ä»¥è¯»å–çš„æ—¶å€™å¯èƒ½éœ€è¦Mergeå¤šä¸ªæ–‡ä»¶æ¥è·å–æœ€æ–°ç‰ˆçš„æ•°æ®ã€‚è¿™ç§æ¨¡å¼å¯¹å†™å…¥å‹å¥½ï¼Œä½†æ˜¯è¯»å–çš„ä»£ä»·è¾ƒé«˜ï¼Œå› æ­¤é€‚åˆå†™å¤šè¯»å°‘çš„åœºæ™¯ã€‚</p><p>å½“ç„¶è¿˜æœ‰ä¸€äº›å¦‚Delta-Storeã€Delete-And-Insertä¹Ÿåœ¨å¹³è¡¡è¯»å†™çš„æ€§èƒ½ï¼ŒåŸºæœ¬éƒ½æ˜¯ç‰ºç‰²ä¸€äº›å†™å…¥çš„æ€§èƒ½ï¼Œæ„å»ºä¸€äº›ç´¢å¼•ã€æ’åºåè®©è¯»å–æ€§èƒ½æå‡ã€‚</p><p>è€Œæˆ‘ä»¬ä»Šå¤©è¦è¯´çš„LSMï¼ˆLog-Structured Merge-Treeï¼Œæ—¥å¿—ç»“æ„åˆå¹¶æ ‘ï¼‰ï¼Œåˆ©ç”¨äº†MORï¼ˆMerge-On-Readï¼‰å†™å…¥çš„ä¼˜ç‚¹ï¼ŒåŒæ—¶åˆé€šè¿‡Compactæ¥é¿å…äº†MORè¯»å–æ—¶éœ€è¦è¯»å–å¤šä¸ªæ–‡ä»¶çš„ç¼ºç‚¹ï¼Œè¢«å¾ˆå¤šå­˜å‚¨å¼•æ“ç”¨æ¥æå‡å†™å…¥æ€§èƒ½ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/26/ba/267ecb49f5b1e022b9aca5d2835e90ba.jpg?wh=2136x1026\" alt=\"\"></p><p><strong>ç†è§£äº†LSMï¼Œä¸€å®šä¼šè®©ä½ æ›´å¿«é€Ÿåœ°å®šä½å„ç§é—®é¢˜åŸå› </strong>ï¼Œæ¯”å¦‚å†™å…¥æ”¾å¤§ã€è¯»å–å»¶è¿Ÿæˆ–è€…åˆå¹¶ç­–ç•¥é…ç½®ä¸å½“ï¼Œç”šè‡³ä½ ä¹Ÿå¯ä»¥åœ¨ä½ è‡ªå·±çš„ä¸€äº›åº”ç”¨è®¾è®¡ä¸­é‡‡ç”¨ç±»ä¼¼çš„æ¶æ„ï¼Œç”¨å„ç§æ‰‹æ®µå¹³è¡¡è¯»å†™ã€å¹³è¡¡æ—¶é—´ä¸ç©ºé—´ã€å¹³è¡¡æ€§èƒ½ä¸å‡†ç¡®æ€§ç­‰ç­‰ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±è¯¦ç»†è¯´è¯´HBaseæ˜¯æ€ä¹ˆç”¨LSMæå‡è¯»å†™æ€§èƒ½çš„ã€‚</p><h2>LSMæ€ä¹ˆæå‡è¯»å†™æ€§èƒ½ï¼Ÿ</h2><p>LSMæ ‘çš„å‡ºç°æ˜¯ä¸ºäº†è§£å†³ç£ç›˜éšæœºI/Oé€Ÿåº¦è¿‡æ…¢çš„é—®é¢˜ï¼Œå°†æ•°æ®çš„éšæœºç£ç›˜I/Oè¯»å†™éƒ½è½¬åŒ–ä¸ºå†…å­˜çš„è¯»å†™ï¼Œç„¶åé€šè¿‡æ‰¹é‡å†™å…¥ç£ç›˜å’Œå»¶è¿Ÿåˆå¹¶æ“ä½œæ¥æé«˜å†™å…¥æ€§èƒ½ã€‚</p><p>æˆ‘ä»¬å…ˆçœ‹ä¸‹LSMçš„æ¶æ„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/83/b9/8332995375106483daa8fd431e854db9.png?wh=1870x1203\" alt=\"å›¾ç‰‡\"></p><p>ä½ çœ‹ï¼ŒHBaseæ•°æ®å†™å…¥çš„æ—¶å€™ï¼Œæ— è®ºæ˜¯æ–°å¢æ•°æ®è¿˜æ˜¯æ›´æ–°åˆ é™¤æ•°æ®ï¼Œéƒ½ä¼šå…ˆå†™å…¥å†…å­˜ä¸­ç§°ä¹‹ä¸ºMemStoreçš„ç»„ä»¶ã€‚è€ŒMemStoreåœ¨å†…å­˜ä¸­ä¼šä½¿ç”¨ä¸€ä¸ªæœ‰åºçš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚è·³è¡¨ï¼Œç»™è¿™äº›å†™å…¥çš„æ•°æ®æ’å¥½åºã€‚</p><p>å½“MemStoreçš„å¤§å°è¾¾åˆ°é…ç½®çš„é˜ˆå€¼æˆ–è€…ç»è¿‡ä¸€å®šæ—¶é—´åï¼ŒMemStoreå°±ä¼šå°†æ•°æ®åˆ·æ–°è¾“å‡ºåˆ°ç£ç›˜ã€‚</p><p>è¿™é‡Œä¼šæ˜¯ä¸€ä¸ªç£ç›˜çš„æ‰¹é‡é¡ºåºå†™å…¥ï¼Œæ‰€ä»¥é€Ÿåº¦å¾ˆå¿«ã€‚åˆå› ä¸ºæ•°æ®å·²ç»æ’å¥½åºäº†ï¼Œæ‰€ä»¥åç»­æ•°æ®çš„è¯»å–ä¹Ÿèƒ½å¤ŸåŸºäºç´¢å¼•å»åšäºŒåˆ†æŸ¥æ‰¾ç­‰ç­‰è¿™æ ·çš„å¿«é€Ÿè¯»å–ã€‚</p><p>è¿™æ ·ï¼ŒHBaseæ•°æ®å†™å…¥çš„æ—¶å€™ï¼Œæ›´æ–°ã€åˆ é™¤æ•°æ®éœ€è¦çš„ç£ç›˜éšæœºI/Oè½¬åŒ–æˆä¸ºäº†å†…å­˜çš„è¯»å†™ä¸ç£ç›˜çš„é¡ºåºå†™å…¥ï¼Œè€Œå†…å­˜çš„å†™å…¥åŸºæœ¬ä¸Šæ˜¯çº³ç§’åˆ°å¾®ç§’çº§åˆ«ã€‚æ‰€ä»¥ï¼Œæ•°æ®çš„å†™å…¥æ€§èƒ½å°±æœ‰äº†ä¸€ä¸ªå·¨å¤§çš„æå‡ã€‚</p><p>æ³¨æ„ï¼Œè¿™ä¸ªå¯¹å†™å…¥æ€§èƒ½çš„ä¼˜åŒ–å¸¦æ¥äº†ä¸¤ä¸ªæ–°çš„é—®é¢˜ã€‚</p><p><strong>ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæ˜¯æ•°æ®å…ˆå†™å…¥å†…å­˜ã€‚ä½†å¦‚æœå†…å­˜å› ä¸ºç¨‹åºå´©æºƒæˆ–è€…æ–­ç”µå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œåˆè¯¥æ€ä¹ˆåŠå‘¢</strong><strong>ï¼Ÿ</strong></p><p>ç±»ä¼¼å…³ç³»å‹æ•°æ®åº“çš„Redoæ—¥å¿—ï¼ŒLSMä¹Ÿå¼•å…¥äº†WALï¼ˆWrite-Ahead-Logï¼Œé¢„å†™å¼æ—¥å¿—ï¼‰æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ•°æ®å†™å…¥MemStoreä¹‹å‰ï¼Œä¼šå°†å¯¹æ•°æ®çš„æ“ä½œï¼ˆå¦‚Putã€Deleteç­‰æ“ä½œï¼‰å…ˆè®°å½•åˆ°ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯WALé¢„å†™å…¥æ—¥å¿—æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä»¥è¿½åŠ çš„å½¢å¼æ‰¹é‡é¡ºåºå†™å…¥ç£ç›˜ï¼Œæ‰€ä»¥é€Ÿåº¦å¾ˆå¿«ï¼Œå½“ç¨‹åºå´©æºƒå¯¼è‡´å†…å­˜MemStoreæ•°æ®ä¸¢å¤±åï¼ŒHBase RegionServerä¼šé‡æ”¾è¿™ä¸ªWALæ—¥å¿—æ–‡ä»¶ä¸­çš„æ•°æ®æ“ä½œï¼Œåœ¨å†…å­˜ä¸­é‡å»ºMemStoreçš„æ•°æ®ã€‚</p><p><strong>ç¬¬äºŒä¸ª<strong><strong>é—®é¢˜ï¼Œ<strong><strong>éšç€MemStoreåˆ·æ–°è¾“å‡ºåˆ°ç£ç›˜å½¢æˆäº†StoreFileï¼Œè¿™äº›StoreFileçš„æ•°é‡å¢é•¿</strong></strong>å¾—</strong></strong>è¶Šæ¥è¶Šå¤šï¼Œ<strong><strong>å¯èƒ½ä¼š</strong></strong>å½±å“æŸ¥è¯¢æ€§èƒ½ï¼Œ<strong><strong>æ€ä¹ˆ</strong></strong>å¤„ç†ï¼Ÿ</strong></p><p>å…¶å®ï¼ŒHBaseåœ¨åå°å¼•å…¥äº†ä¸€ä¸ªæ–‡ä»¶åˆå¹¶Compactæœºåˆ¶ã€‚Compactåˆåˆ†ä¸ºMinor Compactå’ŒMajor Compactã€‚</p><p><strong>Minor Compact</strong> è¢«è§¦å‘çš„æƒ…æ™¯è¾ƒå¤šï¼Œæ¯”å¦‚StoreFileæ–‡ä»¶å¤§å°è¾¾åˆ°é…ç½®çš„compacté˜ˆå€¼ã€å°æ–‡ä»¶è¿‡å¤šç­‰ç­‰ã€‚è¿™æ—¶å€™ï¼ŒMinor Compactä¼šæŒ‘é€‰å°½é‡å¤šçš„å°æ–‡ä»¶æ¥åˆå¹¶ï¼Œç›®æ ‡æ˜¯å‡å°‘æ–‡ä»¶çš„æ•°é‡ï¼Œç§»é™¤ä¸€äº›å¤šç‰ˆæœ¬è¿‡æ—¶çš„æ•°æ®ã€‚è¿™æ ·å¯ä»¥è®©æ•°æ®è¯»å–çš„æ—¶å€™å¯ä»¥æ‰«æå°½é‡å°‘çš„æ–‡ä»¶ï¼Œæå‡è¯»å–æ•ˆç‡ã€‚</p><p><strong>Major Compact</strong> åˆ™æ˜¯æ ¹æ®é…ç½®å‚æ•°hbase.hregion.majorcompactionï¼ŒæŒ‰å›ºå®šçš„é—´éš”æ—¶é—´è§¦å‘çš„ã€‚Major Compactä¼šå°†æ‰€æœ‰çš„StoreFileæ–‡ä»¶åˆå¹¶æˆä¸ºä¸€ä¸ªå¤§çš„æ–‡ä»¶ï¼Œåœ¨åˆå¹¶çš„è¿‡ç¨‹ä¸­ä¼šæ¸…ç†è¢«åˆ é™¤ã€è¿‡æœŸçš„æ•°æ®ã€‚è¿™é‡Œè¦æ³¨æ„ï¼ŒMajor Compactå¯¹ç³»ç»Ÿçš„æ€§èƒ½å½±å“æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸èƒ½åœ¨ä¸šåŠ¡é«˜å³°æœŸæ‰§è¡Œï¼Œéœ€è¦ç”¨ç¨‹åºè„šæœ¬åœ¨ä¸šåŠ¡éé«˜å³°æœŸè§¦å‘ã€‚</p><p>æ­£å¸¸æƒ…å†µä¸‹Minor Compactå¯¹æ€§èƒ½å½±å“è¾ƒå°ï¼Œä½†æ˜¯å¦‚æœé¢‘ç¹Minor Compactæˆ–è€…å¤šä¸ªRegionåŒæ—¶è¿›è¡ŒMinor Compactï¼Œä¹Ÿå¯èƒ½å› ä¸ºèµ„æºç«äº‰ä»è€Œå½±å“é›†ç¾¤æ€§èƒ½ï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦åˆç†åœ°é…ç½®compactionç›¸å…³å‚æ•°ã€‚</p><p>å’±ä»¬è¿™é—¨è¯¾è¦è®²åˆ°çš„HBaseå°±æä¾›äº†å¤šç§Compactç­–ç•¥ï¼Œå¦‚StripeCompactionPolicyã€DateTieredCompactionPolicyã€RatioBasedCompactionPolicyç­‰ï¼Œä½†é»˜è®¤çš„Compactç­–ç•¥æ˜¯RatioBasedCompactionPolicyï¼Œå®ƒçš„é€»è¾‘æ˜¯åˆå¹¶å°½é‡å¤šçš„å°æ–‡ä»¶ï¼Œè¿™æ ·å¯¹æ€§èƒ½çš„æå‡æœ€å¤§ã€‚</p><p>æˆ‘ç”¨ä¸€ä¸ªç®€åŒ–ç‰ˆçš„ä»£ç æ¥ä»‹ç»ä¸€ä¸‹RatioBasedCompactionPolicyã€‚</p><p>å…ˆä»‹ç»ä¸€ä¸‹å½±å“åˆ°compactç­–ç•¥çš„å‡ ä¸ªé…ç½®é¡¹ã€‚</p><ul>\n<li>hbase.hstore.compaction.ratioï¼šåˆå¹¶æ¯”ä¾‹å‚æ•°ï¼Œé»˜è®¤ä¸º1.2ï¼Œå‡è®¾ä¸ºRã€‚</li>\n<li>hbase.hstore.compaction.minï¼ˆ2.0ä»¥ä¸‹ç‰ˆæœ¬ä¸ºhbase.hstore.compactionThresholdï¼‰ï¼šæœ€å°å¾…åˆå¹¶æ–‡ä»¶æ•°ï¼Œé»˜è®¤ä¸º3ï¼Œå‡è®¾ä¸ºAã€‚</li>\n<li>hbase.hstore.compaction.maxï¼šæœ€å¤§å¾…åˆå¹¶æ–‡ä»¶æ•°ï¼Œé»˜è®¤ä¸º10ï¼Œå‡è®¾ä¸ºBã€‚</li>\n<li>hbase.hstore.compaction.min.sizeï¼šæœ€å°åˆå¹¶æ–‡ä»¶æ€»å¤§å°ï¼Œé»˜è®¤ä¸º128Mï¼Œå‡è®¾ä¸ºCã€‚</li>\n</ul><p>è¿™é‡Œä»¥R=1.2ï¼ŒA=3ï¼ŒB=10ï¼ŒC=100ï¼Œå¾…åˆå¹¶çš„æ–‡ä»¶ä¸ºL=[8200, 4300, 160, 150, 80, 70, 30, 20, 5] ä¸ºä¾‹å­ï¼Œæ–‡ä»¶æ•°ç»„çš„å€¼ä¸ºå¾…åˆå¹¶æ–‡ä»¶çš„å¤§å°ï¼Œä»¥æ–‡ä»¶ä»å¤§åˆ°å°æ’åºï¼Œä¸€èˆ¬æ¥è¯´è¶Šè€çš„æ–‡ä»¶è¶Šå¤§ã€‚</p><p>è¿™ä¸ªç­–ç•¥æŒ‘é€‰æ–‡ä»¶åˆå¹¶çš„æ­¥éª¤æ˜¯è¿™æ ·çš„ã€‚</p><ol>\n<li>è®¡ç®—ä¸€ä¸ªå¾…åˆå¹¶æ–‡ä»¶æ€»å¤§å°çš„æ•°ç»„fileSizes[i,i+B-1) ï¼Œå¾—åˆ°X = [13015, 4815, 515, 355, 205, 125, 55, 25, 5]ã€‚</li>\n<li>éå†Lï¼Œä»æ—§åˆ°æ–°æ–‡ä»¶ï¼Œé€ä¸€åˆ¤æ–­æ–‡ä»¶å¤§å°æ˜¯å¦æ»¡è¶³ L[i].fileSizes() &gt; Math.max(C, (X[i + 1] * R)) ï¼Œå½“æ¡ä»¶ä¸æ»¡è¶³åï¼Œiå³ä¸ºå¾…åˆå¹¶çš„æ–‡ä»¶å¼€å§‹ä½ç½®ï¼Œè¯¥æ­¥éª¤æ˜¯ä¸ºäº†è¿‡æ»¤æ‰å¤§çš„æ–‡ä»¶ï¼Œæ­¤å¤„å¾—åˆ°i=2ï¼Œå› ä¸ºL[2].fileSize()=160 &lt; 355*1.2ã€‚</li>\n<li>æœ€åå¾—åˆ°éœ€è¦åˆå¹¶çš„æ–‡ä»¶åˆ—è¡¨ä¸ºL.subList(2,L.size-1)ï¼Œå¾—å‡ºç»“æœä¸º [160, 150, 80, 70, 30, 20, 5]ã€‚</li>\n</ol><p>ç®€åŒ–åçš„ä»£ç ç‰‡æ®µå¦‚ä¸‹æ‰€ç¤ºï¼Œä½ ä¹Ÿå¯ä»¥åœ¨æˆ‘çš„<a href=\"https://github.com/ZHAMoonlight/referencebook\">ä»£ç ä»“åº“</a>æ‰¾åˆ°æ‰€æœ‰æºä»£ç ã€‚</p><pre><code class=\"language-plain\">package com.mt.hbase.chpt07.compact;\n\nimport java.util.Arrays;\nimport java.util.LinkedList;\nimport java.util.List;\n\npublic class RatioCompactPolicy {\n\n&nbsp; &nbsp; public static List&lt;Integer&gt; applyCompactionPolicy(List&lt;Integer&gt; candidates,\n&nbsp; &nbsp; &nbsp; &nbsp; boolean mayBeStuck) {\n&nbsp; &nbsp; &nbsp; &nbsp; int minFileToCompact = 3;\n&nbsp; &nbsp; &nbsp; &nbsp; int maxFileToCompact = 10;\n&nbsp; &nbsp; &nbsp; &nbsp; int minCompactSize = 100;\n&nbsp; &nbsp; &nbsp; &nbsp; double ratio = 1.2;\n&nbsp; &nbsp; &nbsp; &nbsp; int start = 0;\n&nbsp; &nbsp; &nbsp; &nbsp; // get store file sizes for incremental compacting selection.\n&nbsp; &nbsp; &nbsp; &nbsp; final int countOfFiles = candidates.size();\n&nbsp; &nbsp; &nbsp; &nbsp; long[] fileSizes = new long[countOfFiles];\n&nbsp; &nbsp; &nbsp; &nbsp; long[] sumSize = new long[countOfFiles];\n&nbsp; &nbsp; &nbsp; &nbsp; for (int i = countOfFiles - 1; i &gt;= 0; --i) {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fileSizes[i] = candidates.get(i);\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // calculate the sum of fileSizes[i,i+maxFilesToCompact-1) for algo\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int tooFar = i + maxFileToCompact - 1;\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sumSize[i] = fileSizes[i] + ((i + 1 &lt; countOfFiles) ? sumSize[i + 1] : 0) - ((tooFar\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt; countOfFiles) ? fileSizes[tooFar] : 0);\n&nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; &nbsp; &nbsp; while (countOfFiles - start &gt;= minFileToCompact &amp;&amp;\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fileSizes[start] &gt; Math.max(minCompactSize, (sumSize[start + 1] * ratio))) {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ++start;\n&nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; &nbsp; &nbsp; if (start &lt; countOfFiles) {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; System.out.println(\"Default compaction algorithm has selected \" + (countOfFiles - start)\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + \" files from \" + countOfFiles + \" candidates\");\n&nbsp; &nbsp; &nbsp; &nbsp; } else if (mayBeStuck) {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // We may be stuck. Compact the latest files if we can.\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int filesToLeave = candidates.size() - minFileToCompact;\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (filesToLeave &gt;= 0) {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; start = filesToLeave;\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; &nbsp; &nbsp; System.out.println(\"sumSize=\" + Arrays.toString(sumSize));\n&nbsp; &nbsp; &nbsp; &nbsp; System.out.println(\"start=\" + start);\n&nbsp; &nbsp; &nbsp; &nbsp; candidates.subList(0, start).clear();\n&nbsp; &nbsp; &nbsp; &nbsp; System.out.println(\"fileToCompact =\" + candidates);\n&nbsp; &nbsp; &nbsp; &nbsp; return candidates;\n&nbsp; &nbsp; }\n\n&nbsp; &nbsp; public static void main(String[] args) {\n&nbsp; &nbsp; &nbsp; &nbsp; int[] candidateIntArray = new int[]{8200, 4300, 160, 150, 80, 70, 30, 20, 5};\n&nbsp; &nbsp; &nbsp; &nbsp; List&lt;Integer&gt; candidateList = new LinkedList&lt;Integer&gt;();\n&nbsp; &nbsp; &nbsp; &nbsp; for (Integer candidate : candidateIntArray) {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; candidateList.add(candidate);\n&nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; &nbsp; &nbsp; applyCompactionPolicy(candidateList, true);\n&nbsp; &nbsp; }\n}\n</code></pre><p>ä»£ç æ‰§è¡Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/0d/b0/0d38e8c1be6cf9c500c9c54fb4b776b0.png?wh=791x182\" alt=\"å›¾ç‰‡\"></p><p>ä»ç»“æœæˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªç­–ç•¥æŒ‘å‡ºäº†å¾…åˆå¹¶æ–‡ä»¶ä¸­çš„å°æ–‡ä»¶ï¼Œè¿‡æ»¤æ‰äº†å¤§æ–‡ä»¶ã€‚ä¹Ÿå°±æ˜¯ä»æ–‡ä»¶åˆ—è¡¨ L=[8200, 4300, 160, 150, 80, 70, 30, 20, 5] ä¸­è¿‡æ»¤æ‰äº†8200ã€4300è¿™ä¸¤ä¸ªå¤§æ–‡ä»¶ï¼Œè€ŒæŒ‘å‡ºå…¶ä»–å‰©ä¸‹çš„å°æ–‡ä»¶åšäº†åˆå¹¶ã€‚</p><p><strong>ä½ å¯èƒ½æ³¨æ„åˆ°äº†ï¼ŒCompactè¿‡ç¨‹ä¸­å…¶å®å­˜åœ¨ä¸€å®šçš„å†™æ”¾å¤§ï¼Œå°¤å…¶æ˜¯åˆšæ‰æåˆ°çš„Minor Compactå’ŒMajor Compactè¿™ç§åˆ†å±‚çš„è®¾è®¡ã€‚</strong></p><p>æˆ‘æ¥è¯¦ç»†è§£é‡Šä¸€ä¸‹ã€‚åœ¨ä¸€è¡Œæ•°æ®ä»MemStoreåˆ·æ–°è¾“å‡ºåˆ°StoreFileåï¼ŒMinor Compactä¼šå°†è¿™è¡Œæ•°æ®ä»ä¸€ä¸ªStoreFileæ–‡ä»¶è¯»å–å‡ºæ¥ï¼Œåˆå¹¶åå†™å…¥ä¸€ä¸ªç¨å¤§çš„StoreFileæ–‡ä»¶ï¼Œç„¶åç»§ç»­ç»è¿‡å¤šæ¬¡åˆå¹¶ï¼Œæœ€ååœ¨Major Compactè¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰çš„æ–‡ä»¶åˆè¢«åˆå¹¶æˆä¸ºä¸€ä¸ªæ€»çš„StoreFileã€‚</p><p>è¿™ä¸ªè¿‡ç¨‹å¾ªç¯å¾€å¤ï¼Œè¿™è¡Œæ•°æ®å°±è¢«è¯»å–ã€å†™å…¥äº†å¾ˆå¤šæ¬¡ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¯´çš„å†™æ”¾å¤§ã€‚å†™æ”¾å¤§å¯èƒ½ä¼šå½±å“ç³»ç»Ÿçš„æ€§èƒ½ï¼Œç”šè‡³å½±å“å­˜å‚¨ä»‹è´¨çš„å¯¿å‘½ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¬æå‡è¯»æ€§èƒ½å¿…ç„¶ä¼šå¸¦æ¥çš„ä¸€äº›è´Ÿé¢å½±å“ã€‚</p><p>ä½†æ˜¯ç±»ä¼¼å†™æ‰©å¤§çš„å†™æ‰©æ•£æ¨¡å‹ï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹ä¼šæ˜¯ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„è®¾è®¡ï¼Œæ¯”å¦‚å¾®ä¿¡æœ‹å‹åœˆçš„è®¾è®¡ã€‚</p><h2>å¸ƒéš†è¿‡æ»¤å™¨</h2><p>æ­¤å¤–ï¼Œä¸ºäº†è¿›ä¸€æ­¥æå‡æ•°æ®è¯»å–æ€§èƒ½ï¼Œå‡å°‘è¯»å–æ•°æ®æ—¶éœ€è¦æ‰«æçš„StoreFileæ•°é‡ï¼ŒHBaseè¿˜å¼•å…¥äº†å¸ƒéš†è¿‡æ»¤å™¨æ¥è¿‡æ»¤æ‰ä¸€äº›æ˜ç¡®ä¸å­˜åœ¨æ•°æ®è¡Œçš„æ–‡ä»¶ã€‚</p><p>è®¾æƒ³ä¸€ä¸‹ï¼Œä½ èµ°è¿›äº†ä¸€ä¸ªå·¨å¤§çš„å›¾ä¹¦é¦†ï¼Œæƒ³è¦æ‰¾ä¸€æœ¬ç‰¹å®šçš„ä¹¦ã€‚è¿™ä¸ªå›¾ä¹¦é¦†éå¸¸åºå¤§ï¼Œæ‹¥æœ‰æˆåƒä¸Šä¸‡çš„ä¹¦ç±ï¼Œä½†æ²¡æœ‰ä¸€ä¸ªæ ‡å‡†çš„ç›®å½•ç³»ç»Ÿã€‚ç›¸åï¼Œå®ƒä½¿ç”¨äº†ä¸€ä¸ªç‰¹æ®Šçš„â€œæ’ä»–ç›®å½•â€ã€‚è¿™ä¸ªâ€œæ’ä»–ç›®å½•â€ä¸èƒ½å‘Šè¯‰ä½ â€œä¹¦åœ¨å›¾ä¹¦é¦†â€æˆ–è€…ä¹¦æ¶çš„ç²¾ç¡®ä½ç½®ï¼Œä½†å®ƒå¯ä»¥è¿…é€Ÿå‘Šè¯‰ä½ å›¾ä¹¦é¦†é‡Œæœ‰æ²¡æœ‰è¿™æœ¬ä¹¦ã€‚</p><p>å½“ä½ è¯¢é—®â€œæ’ä»–ç›®å½•â€ä¸€æœ¬ç‰¹å®šçš„ä¹¦æ˜¯å¦å­˜åœ¨çš„æ—¶å€™ï¼Œå®ƒä¼šè¿›è¡Œä¸€ç³»åˆ—çš„å¿«é€Ÿæ£€æŸ¥ã€‚å¦‚æœæ‰€æœ‰æ£€æŸ¥éƒ½æ˜¾ç¤ºè¿™æœ¬ä¹¦å¯èƒ½åœ¨å›¾ä¹¦é¦†é‡Œï¼Œé‚£ä¹ˆä½ å°±å¾—äº²è‡ªå»ä¹¦æ¶ä¸Šç¡®è®¤ä¹¦çš„å­˜åœ¨ã€‚ä½†å¦‚æœâ€œæ’ä»–ç›®å½•â€çš„ç»“æœæ˜¾ç¤ºå›¾ä¹¦é¦†ä¸å­˜åœ¨è¿™æœ¬ä¹¦ï¼Œä½ å°±å¯ä»¥ç«‹å³ç¡®å®šå›¾ä¹¦é¦†ä¸­æ²¡æœ‰è¿™æœ¬ä¹¦ï¼Œä»è€ŒèŠ‚çœäº†å¾ˆå¤šæ—¶é—´ã€‚</p><p>ä¾‹å­é‡Œé¢çš„â€œè¿™æœ¬ä¹¦â€ï¼Œåœ¨HBaseé‡Œä¸€èˆ¬å¯¹åº”æ•°æ®çš„è¡Œé”®ã€‚æœ‰äº›è¡¨å¦‚æœä½¿ç”¨ROWCOLä½œä¸ºå¸ƒéš†è¿‡æ»¤å™¨çš„è¯ï¼Œé‚£ä¹ˆâ€œè¿™æœ¬ä¹¦â€å°±å¯¹åº”æ•°æ®çš„è¡Œé”®åŠ åˆ—åã€‚</p><p><strong>è‡³äºè¿™ä¸ªâ€œæ’ä»–ç›®å½•â€ï¼Œå°±æ˜¯å¸ƒéš†è¿‡æ»¤å™¨</strong>ã€‚ä½¿ç”¨äº†å¸ƒéš†è¿‡æ»¤å™¨åï¼ŒHBaseçš„æ¯ä¸ªStoreFileé‡Œé¢éƒ½ä¼šå­˜å‚¨ä¸€ä¸ªâ€œæ’ä»–ç›®å½•â€ã€‚å›¾ä¹¦é¦†ä¸€ç³»åˆ—çš„å¿«é€Ÿæ£€æŸ¥ï¼Œå…¶å®å°±æ˜¯å¯¹â€œè¿™æœ¬ä¹¦â€è¿›è¡Œä¸€ç³»åˆ—çš„hashå‡½æ•°è®¡ç®—å¾—åˆ°ä¸€ä¸ªå¯¹åº”çš„å€¼ï¼Œç„¶åå†æ£€æŸ¥hashè¡¨ä¸Šå¯¹åº”çš„æ¡¶æ˜¯å¦å­˜åœ¨å·²ç»å†™å…¥çš„å€¼ã€‚</p><p>å¸ƒéš†è¿‡æ»¤å™¨å¯ä»¥éå¸¸å¿«é€Ÿåœ°æ£€æŸ¥å‡ºä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨ä¸€ä¸ªé›†åˆä¸­ã€‚ä¸è¿‡è¦æ³¨æ„ä¸€ç‚¹ï¼Œå½“å¸ƒéš†è¿‡æ»¤å™¨è¯´æŸæ ·ä¸œè¥¿ä¸åœ¨é›†åˆé‡Œæ—¶ï¼Œå®ƒæ˜¯100%æ­£ç¡®çš„ï¼›ä½†å½“å®ƒè¯´æŸæ ·ä¸œè¥¿å¯èƒ½åœ¨é›†åˆé‡Œæ—¶ï¼Œå®ƒå¯èƒ½æ˜¯é”™è¯¯çš„ï¼Œè¿™ç§æƒ…å†µç§°ä¸ºâ€œå‡é˜³æ€§â€ã€‚</p><p>æ¢å¥è¯è¯´ï¼Œå°±æ˜¯æœ‰æ—¶å¸ƒéš†è¿‡æ»¤å™¨ä¼šå‘Šè¯‰ä½ æŸæ ·ä¸œè¥¿å¯èƒ½å­˜åœ¨ï¼Œä½†å®é™…ä¸Šå¹¶ä¸å­˜åœ¨ï¼Œå°±åƒâ€œæ’ä»–ç›®å½•â€å¯èƒ½é”™è¯¯åœ°æš—ç¤ºä¸€æœ¬ä¹¦æ˜¯åœ¨å›¾ä¹¦é¦†é‡Œï¼Œè¿˜éœ€è¦ä½ äº²è‡ªå»ä¹¦æ¶ä¸Šç¡®è®¤æœ‰æ²¡æœ‰è¿™æœ¬ä¹¦ä¸€æ ·ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/45/38/450c63e1c032136a5eyy75114e348838.png?wh=1836x1036\" alt=\"\"><br>\né‚£ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§æƒ…å†µå‘¢ï¼Ÿæˆ‘ä»¬çœ‹ä¸Šé¢è¿™å¼ å›¾ï¼Œå¸ƒéš†è¿‡æ»¤å™¨ä½¿ç”¨ä¸€ä¸ªä½å›¾ä½œä¸ºæ•°æ®å­˜å‚¨ç»“æ„ã€‚</p><p>ä»¥ä¸€ä¸ªåŸºäºè¡Œé”®çš„å¸ƒéš†è¿‡æ»¤å™¨ä¸ºä¾‹ã€‚</p><p>æ•°æ®å†™å…¥çš„æ—¶å€™ï¼Œç”¨æ•°æ®çš„è¡Œé”®ï¼Œè¿™é‡Œæ˜¯â€œè¡Œé”®1â€è¿›è¡Œäº†ä¸€ç³»åˆ—çš„hashè®¡ç®—ï¼Œæ¯”å¦‚å›¾ä¸­è¿›è¡Œäº†Hash1ã€Hash2ã€Hash3æ€»è®¡3ä¸ªå‡½æ•°è®¡ç®—ï¼Œå°†æ¯ä¸ªhashå‡½æ•°è®¡ç®—ç»“æœæ˜ å°„åˆ°äº†ä½å›¾çš„ä¸€ä¸ªbitä½æˆ–è€…è¯´hashæ¡¶ã€‚è¿™é‡Œæˆ‘è®©â€œè¡Œé”®1â€æ˜ å°„åˆ°äº†ä¸‹æ ‡ä¸º2ã€5ã€7çš„3ä¸ªbitä½ã€‚</p><p>æ•°æ®æŸ¥è¯¢çš„æ—¶å€™ï¼ŒåŒæ ·å°†è¡Œé”®è¿›è¡Œä¸€ç³»åˆ—çš„hashè¿ç®—å¾—åˆ°æ˜ å°„åˆ°ä½å›¾çš„bitä½ï¼Œç„¶åæ£€æŸ¥ä½å›¾å¯¹åº”çš„æ‰€æœ‰bitä½æ˜¯ä¸æ˜¯éƒ½ä¸º1ã€‚å¦‚æœæœ‰ä»»æ„1ä¸ªbitä½æ•°æ®ä¸ä¸º1ï¼Œå³è¡¨ç¤ºæ•°æ®ä¸å­˜åœ¨ã€‚å¦‚æœä¸º1ï¼Œåˆ™éœ€è¦è¿›ä¸€æ­¥æ‰«ææ–‡ä»¶æŸ¥è¯¢æ•°æ®ï¼Œå› ä¸ºæœ‰å¯èƒ½ä½å›¾ä¸­æŸäº›bitä½æ˜¯å…¶ä»–è¡Œé”®hashåå†™å…¥çš„ã€‚</p><p>æ‰€ä»¥ï¼Œ<strong>å¸ƒéš†è¿‡æ»¤å™¨çš„ä½å›¾é•¿åº¦ä¸èƒ½å¤ªå°ã€‚</strong>å¦‚æœæ˜¯è¿‡å°çš„ä½å›¾ï¼Œé‚£ä¹ˆå¾ˆå¿«æ‰€æœ‰çš„ bit ä½éƒ½ä¼šè¢«ç½®ä¸º1ï¼Œé‚£ä¹ˆæŸ¥è¯¢ä»»ä½•å€¼éƒ½ä¼šè¿”å›â€œå¯èƒ½å­˜åœ¨â€ï¼Œèµ·ä¸åˆ°è¿‡æ»¤çš„ç›®çš„äº†ã€‚</p><p>åŒæ—¶ï¼Œå“ˆå¸Œå‡½æ•°çš„ä¸ªæ•°ä¹Ÿéœ€è¦æƒè¡¡ã€‚ä¸ªæ•°è¶Šå¤šï¼Œåˆ™å¸ƒéš†è¿‡æ»¤å™¨ bit ä½ç½®å˜ä¸º1çš„é€Ÿåº¦è¶Šå¿«ï¼Œä¸”å¸ƒéš†è¿‡æ»¤å™¨çš„æ•ˆç‡è¶Šä½ï¼›å¦‚æœä¸ªæ•°å¤ªå°‘çš„è¯ï¼Œè¯¯æŠ¥ç‡å°±ä¼šå˜é«˜ã€‚</p><p>æ¯”å¦‚ä½¿ç”¨2ä¸ªhashå‡½æ•°å°†è¡Œé”®hashåæ˜ å°„åˆ°2ä¸ªbitä½ï¼Œè¿™ä¸¤ä¸ªbitä½å¯èƒ½å¾ˆå¿«å°±è¢«å…¶ä»–æ•°æ®hashåå†™å…¥äº†ã€‚è¿™æ ·å°±å¯¼è‡´å¸ƒéš†è¿‡æ»¤å™¨æç¤ºæ•°æ®â€œå¯èƒ½å­˜åœ¨â€çš„è¯¯æŠ¥ã€‚ä½†æ˜¯å¦‚æœä½¿ç”¨äº†10ä¸ªhashå‡½æ•°å°†è¡Œé”®æ˜ å°„åˆ°10ä¸ªbitä½ï¼Œé‚£ä¹ˆè¿™10ä¸ªbitä½å…¨éƒ¨è¢«å…¶ä»–æ•°æ®å†™å…¥çš„æ¦‚ç‡å°±ä¼šå¤§å¤§é™ä½äº†ï¼Œä»è€Œé™ä½äº†è¯¯æŠ¥ç‡ã€‚</p><h2>å°ç»“</h2><p>æ•°æ®çš„å†™å…¥ä¸€å®šæ˜¯éœ€è¦æŒä¹…åŒ–åˆ°ç£ç›˜æ‰èƒ½ç®—æ˜¯æˆåŠŸï¼ŒæŸäº›åœºæ™¯ä¸‹ç”šè‡³è¦å†™å…¥å¤šä¸ªå‰¯æœ¬æ‰ç®—æˆåŠŸï¼Œä½†æ˜¯ç£ç›˜çš„éšæœºå†™å…¥æ€§èƒ½å ªå¿§ï¼Œæ‰€ä»¥å¾ˆå¤šæ•°æ®å­˜å‚¨å¼•æ“éƒ½ä¼šé‡‡ç”¨å„ç§æ‰‹æ®µï¼Œæ¶ˆé™¤æˆ–è€…å»¶åéšæœºå†™å…¥ï¼Œè½¬åŒ–ä¸ºé¡ºåºå†™å…¥ã€‚</p><p>HBaseå°±é€šè¿‡LSMæ¥å°†ç£ç›˜çš„éšæœºå†™å…¥è½¬åŒ–ä¸ºå†…å­˜çš„è¯»å†™ä»¥åŠç£ç›˜çš„æ‰¹é‡é¡ºåºå†™å…¥ï¼Œå¤§å¤§æå‡äº†æ•°æ®å†™å…¥çš„æ€§èƒ½ã€‚æ‰€ä»¥ï¼ŒHBaseéå¸¸é€‚åˆæ‰¹é‡å†™å…¥è¾ƒå¤šã€æŸ¥è¯¢è¾ƒå°‘çš„åœºæ™¯ã€‚</p><p>åŒæ—¶ï¼ŒHBaseåœ¨æ•°æ®è¯»å–ä¸Šä¹Ÿåšäº†å¾ˆå¤šä¼˜åŒ–ï¼Œæ¯”å¦‚åå°Compactæ•°æ®åˆå¹¶å‡å°‘éœ€è¦æ‰«æçš„æ–‡ä»¶æ•°é‡ï¼Œä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨æ¥æ’é™¤æ‰«æè‚¯å®šä¸å­˜åœ¨æ•°æ®çš„æ–‡ä»¶ã€‚</p><p>å½“ç„¶ï¼ŒHBaseè¿˜æœ‰å¾ˆå¤šæ€§èƒ½ä¼˜åŒ–æ‰‹æ®µï¼Œæ¯”å¦‚ä½¿ç”¨ç¼“å­˜ã€å¯¹æ•°æ®è¿›è¡Œç¼–ç ã€å‹ç¼©ç­‰ã€‚æ€»ä½“æ¥è¯´ï¼ŒHBaseé€šè¿‡è¿™äº›è®¾è®¡ï¼Œå³ä½¿åœ¨ä½¿ç”¨æœºæ¢°ç¡¬ç›˜çš„æƒ…å†µä¸‹ï¼Œä¹Ÿèƒ½å¤Ÿå®ç°æ¯«ç§’çº§çš„å“åº”ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>ä½ çŸ¥é“å¾®ä¿¡æœ‹å‹åœˆçš„è®¾è®¡ï¼Œæ˜¯å¦‚ä½•ä½¿ç”¨å†™æ‰©æ•£æ¨¡å‹æ¥æå‡è¯»å–æ€§èƒ½çš„å—ï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºå’Œæˆ‘äº¤æµã€‚å¦‚æœè§‰å¾—æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿå¯ä»¥æŠŠè¯¾ç¨‹åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·äº¤æµå­¦ä¹ ã€‚æ¬¢è¿ä½ åŠ å…¥æˆ‘ä»¬çš„<a href=\"http://jinshuju.net/f/QX5mGO\">è¯»è€…äº¤æµç¾¤</a>ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ï¼</p>","neighbors":{"left":{"article_title":"01ï½œåˆ—å¼å­˜å‚¨å·²ç»å–ä»£è¡Œå¼å­˜å‚¨äº†å—ï¼Ÿ","id":782320},"right":{"article_title":"03ï½œç¼–ç å’Œå‹ç¼©æœ‰ä»€ä¹ˆç”¨ï¼Ÿ","id":783471}},"comments":[{"had_liked":false,"id":391742,"user_name":"zheng","can_delete":false,"product_type":"c1","uid":1404773,"ip_address":"æ±Ÿè‹","ucode":"D61E7182921DD8","user_header":"https://static001.geekbang.org/account/avatar/00/15/6f/65/26f998b2.jpg","comment_is_top":false,"comment_ctime":1718969079,"is_pvip":false,"replies":[{"id":142447,"content":"èµï¼æ˜¯è¿™ä¸ªé€»è¾‘ï¼Œè€ƒè™‘åˆ°Aå‘å®Œæœ‹å‹åœˆï¼ŒBå¹¶ä¸éœ€è¦é©¬ä¸Šçœ‹åˆ°ï¼Œæ‰€ä»¥å¯ä»¥å¼‚æ­¥å†™å…¥Bçš„timelineï¼Œæå‡è¯»æ€§èƒ½","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1466402,"ctime":1719029750,"ip_address":"å¹¿ä¸œ","comment_id":391742,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100772701,"comment_content":"æœ‹å‹åœˆå­˜å‚¨å¯èƒ½ä»¥çœ‹çš„äººä¸ºkeyï¼Œä¹Ÿå¯ä»¥ä»¥å‘çš„äººä¸ºkeyã€‚Aå‘çš„Bçœ‹ã€‚\næŠŠAå‘çš„ä¸€èµ·å­˜åœ¨æ–‡ä»¶açš„è¯ï¼ŒBåˆ·çš„æ—¶å€™å°±éœ€è¦æŸ¥è¯¢æ‰€æœ‰æœ‹å‹ï¼ˆABCDEï¼‰å‘çš„åœ¨ä»¥æ—¶é—´çº¿åˆå¹¶ã€‚è¿™æ ·è‚¯å®šæ˜¯éšæœºè¯»ã€‚å¥½å¤„æ˜¯å†™çš„æ€§èƒ½é«˜ã€‚\nå¦‚æœæŠŠBèƒ½çœ‹çš„å­˜ä¸€èµ·çš„è¯ï¼Œé‚£çœ‹çš„æ—¶å€™å°±æ‹¿è‡ªå·±çš„æ–‡ä»¶å°±è¡Œï¼Œé¡ºåºè¯»ã€‚ä½†æ˜¯å¦‚æœAåˆ é™¤äº†æˆ–è€…æ›´æ”¹æƒé™ï¼Œé‚£å°±å¤æ‚ä¸€äº›ï¼Œä½†è¿™æ˜¯ä½é¢‘æ“ä½œ","like_count":7,"discussions":[{"author":{"id":1466402,"avatar":"https://static001.geekbang.org/account/avatar/00/16/60/22/25b3951a.jpg","nickname":"moonlight_peng","note":"","ucode":"CDCAD90BD95073","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646922,"discussion_content":"èµï¼æ˜¯è¿™ä¸ªé€»è¾‘ï¼Œè€ƒè™‘åˆ°Aå‘å®Œæœ‹å‹åœˆï¼ŒBå¹¶ä¸éœ€è¦é©¬ä¸Šçœ‹åˆ°ï¼Œæ‰€ä»¥å¯ä»¥å¼‚æ­¥å†™å…¥Bçš„timelineï¼Œæå‡è¯»æ€§èƒ½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1719029750,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391574,"user_name":"xzy","can_delete":false,"product_type":"c1","uid":1002095,"ip_address":"æ²³åŒ—","ucode":"1A44368083A19E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4a/6f/e36b3908.jpg","comment_is_top":false,"comment_ctime":1718586827,"is_pvip":false,"replies":[{"id":142383,"content":"å…¶å®è¿™é‡Œå°±æ˜¯ä¸€ä¸ªå†™æ‰©æ•£æ¨¡å‹ï¼Œä½ å‘çš„ä¸€ä¸ªæœ‹å‹åœˆæ•°æ®ï¼Œä¼šå†™å…¥å¤šä¸ªå¥½å‹çš„timeline, ä¹Ÿå°±æ˜¯ç”¨å¤šä¸ªæ•°æ®å‰¯æœ¬çš„å†™å…¥æ¥æå‡è¯»æ€§èƒ½","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1466402,"ctime":1718588406,"ip_address":"å¹¿ä¸œ","comment_id":391574,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100772701,"comment_content":"æ€è€ƒé¢˜ï¼šå½“ä¸€ä¸ªäººå‘æœ‹å‹åœˆæ—¶ï¼Œè¿™ä¸ªæœ‹å‹åœˆçš„ä¿¡æ¯ä¼šè¢«å†™å…¥å…¶æ¯ä¸ªå¥½å‹çš„æ”¶ä»¶ç®±ä¸­ï¼›ç„¶åæ¯ä¸ªäººè¯»å–è‡ªå·±çš„æ”¶ä»¶ç®±å°±å¯ä»¥çœ‹åˆ°è‡ªå·±å¥½å‹å‘çš„æ‰€æœ‰çš„æœ‹å‹åœˆå†…å®¹äº†ã€‚\n\nè€å¸ˆæœ‰æ²¡æœ‰å…´è¶£è®²è®²timelineæ•°æ®åº“çš„è®¾è®¡ã€‚","like_count":3,"discussions":[{"author":{"id":1466402,"avatar":"https://static001.geekbang.org/account/avatar/00/16/60/22/25b3951a.jpg","nickname":"moonlight_peng","note":"","ucode":"CDCAD90BD95073","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646704,"discussion_content":"å…¶å®è¿™é‡Œå°±æ˜¯ä¸€ä¸ªå†™æ‰©æ•£æ¨¡å‹ï¼Œä½ å‘çš„ä¸€ä¸ªæœ‹å‹åœˆæ•°æ®ï¼Œä¼šå†™å…¥å¤šä¸ªå¥½å‹çš„timeline, ä¹Ÿå°±æ˜¯ç”¨å¤šä¸ªæ•°æ®å‰¯æœ¬çš„å†™å…¥æ¥æå‡è¯»æ€§èƒ½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1718588406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":392219,"user_name":"å®Œç¾åšæŒ","can_delete":false,"product_type":"c1","uid":1919541,"ip_address":"å±±è¥¿","ucode":"AE0261D8DDEF64","user_header":"https://static001.geekbang.org/account/avatar/00/1d/4a/35/66caeed9.jpg","comment_is_top":false,"comment_ctime":1720305456,"is_pvip":false,"replies":[{"id":142583,"content":"èµï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1466402,"ctime":1720422304,"ip_address":"å¹¿ä¸œ","comment_id":392219,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100772701,"comment_content":"### å¾®ä¿¡æœ‹å‹åœˆçš„å†™æ‰©æ•£æ¨¡å‹\n\nåœ¨å¾®ä¿¡æœ‹å‹åœˆçš„è®¾è®¡ä¸­ï¼Œå†™æ‰©æ•£æ¨¡å‹è¢«å¹¿æ³›åº”ç”¨ä»¥æå‡è¯»å–æ€§èƒ½ã€‚è¿™ç§æ¨¡å‹çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œå½“ä¸€ä¸ªç”¨æˆ·å‘å¸ƒæœ‹å‹åœˆæ—¶ï¼Œç³»ç»Ÿä¼šå°†è¿™æ¡æœ‹å‹åœˆçš„ä¿¡æ¯å†™å…¥æ¯ä¸ªå¥½å‹çš„æ”¶ä»¶ç®±ï¼ˆæˆ–æ—¶é—´çº¿ï¼‰ã€‚è¿™æ ·ï¼Œæ¯ä¸ªç”¨æˆ·åœ¨æŸ¥çœ‹æœ‹å‹åœˆæ—¶ï¼Œåªéœ€è¯»å–è‡ªå·±çš„æ”¶ä»¶ç®±ï¼Œé¿å…äº†å¤§é‡çš„éšæœºè¯»æ“ä½œã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è§£é‡Šï¼š\n\n#### åŸºæœ¬æ€è·¯\n\n- **ä»¥å‘çš„äººä¸ºä¸»**ï¼š\n  å½“ç”¨æˆ·Aå‘å¸ƒä¸€æ¡æœ‹å‹åœˆæ—¶ï¼Œè¿™æ¡ä¿¡æ¯ä¼šè¢«å†™å…¥ä¸€ä¸ªå­˜å‚¨å•å…ƒï¼Œè¯¥å•å…ƒä»¥Aä¸ºkeyã€‚è¿™ç§æ–¹æ³•å†™å…¥æ•ˆç‡é«˜ï¼Œä½†è¯»å–æ—¶éœ€è¦åˆå¹¶å¤šä¸ªç”¨æˆ·ï¼ˆæœ‹å‹ä»¬ï¼‰çš„æ•°æ®ï¼Œå¯¼è‡´å¤§é‡çš„éšæœºè¯»ã€‚\n\n- **ä»¥çœ‹çš„äººä¸ºä¸»**ï¼š\n  å½“ç”¨æˆ·Aå‘å¸ƒä¸€æ¡æœ‹å‹åœˆæ—¶ï¼Œè¿™æ¡ä¿¡æ¯ä¼šè¢«å†™å…¥æ¯ä¸ªå¥½å‹Bã€Cã€Dç­‰çš„æ”¶ä»¶ç®±ä¸­ã€‚è¿™æ ·ï¼Œå½“BæŸ¥çœ‹æœ‹å‹åœˆæ—¶ï¼Œåªéœ€é¡ºåºè¯»å–è‡ªå·±çš„æ”¶ä»¶ç®±å³å¯ã€‚è¿™ç§æ–¹æ³•ä¼˜åŒ–äº†è¯»æ“ä½œï¼Œå‡å°‘äº†éšæœºè¯»ã€‚\n\n#### å®ç°ç»†èŠ‚\n\n1. **å‘å¸ƒæ—¶å†™æ‰©æ•£**ï¼š\n   - ç”¨æˆ·Aå‘å¸ƒä¸€æ¡æœ‹å‹åœˆï¼Œç³»ç»Ÿå°†è¿™æ¡ä¿¡æ¯å¼‚æ­¥å†™å…¥æ¯ä¸ªå¥½å‹çš„æ”¶ä»¶ç®±ã€‚\n   - ç”±äºæœ‹å‹åœˆä¸éœ€è¦å®æ—¶å‘ˆç°ï¼Œå¼‚æ­¥å†™å…¥å¯ä»¥å‡å°‘å‘å¸ƒæ“ä½œçš„å»¶è¿Ÿã€‚\n\n2. **è¯»å–æ—¶é¡ºåºè¯»**ï¼š\n   - ç”¨æˆ·BæŸ¥çœ‹æœ‹å‹åœˆæ—¶ï¼Œåªéœ€é¡ºåºè¯»å–è‡ªå·±çš„æ”¶ä»¶ç®±ï¼Œè·å–å¥½å‹ä»¬å‘å¸ƒçš„æ‰€æœ‰æœ‹å‹åœˆå†…å®¹ã€‚\n   - è¿™ç§æ–¹å¼ä¼˜åŒ–äº†è¯»æ€§èƒ½ï¼Œå› ä¸ºé¡ºåºè¯»æ¯”éšæœºè¯»æ›´å¿«ã€‚\n\n3. **åˆ é™¤å’Œæƒé™å˜æ›´**ï¼š\n   - å¦‚æœç”¨æˆ·Aåˆ é™¤äº†ä¸€æ¡æœ‹å‹åœˆæˆ–ä¿®æ”¹äº†å…¶æƒé™ï¼Œç³»ç»Ÿéœ€è¦æ›´æ–°æ¯ä¸ªå¥½å‹çš„æ”¶ä»¶ç®±ã€‚\n   - ç”±äºåˆ é™¤å’Œæƒé™å˜æ›´æ˜¯ä½é¢‘æ“ä½œï¼Œè™½ç„¶è¿™ç§æ“ä½œå¤æ‚ï¼Œä½†æ•´ä½“å½±å“è¾ƒå°ã€‚\n\n### ä¼˜ç¼ºç‚¹åˆ†æ\n\n#### ä¼˜ç‚¹\n\n1. **æå‡è¯»æ€§èƒ½**ï¼š\n   - é€šè¿‡å°†å‘å¸ƒçš„æœ‹å‹åœˆä¿¡æ¯å†™å…¥æ¯ä¸ªå¥½å‹çš„æ”¶ä»¶ç®±ï¼Œç”¨æˆ·åœ¨è¯»å–æ—¶åªéœ€é¡ºåºè¯»å–è‡ªå·±çš„æ•°æ®ï¼Œä»è€Œå¤§å¤§æå‡äº†è¯»å–æ€§èƒ½ã€‚\n   \n2. **ç®€åŒ–è¯»æ“ä½œ**ï¼š\n   - æ¯ä¸ªç”¨æˆ·åªéœ€è¯»å–è‡ªå·±çš„æ”¶ä»¶ç®±å³å¯çœ‹åˆ°æ‰€æœ‰å¥½å‹çš„æœ‹å‹åœˆï¼Œé¿å…äº†ä»å¤šä¸ªå­˜å‚¨å•å…ƒä¸­è¯»å–æ•°æ®å¹¶åˆå¹¶çš„å¤æ‚è¿‡ç¨‹ã€‚\n\n3. **å‡å°‘éšæœºè¯»**ï¼š\n   - é¡ºåºè¯»å–ç”¨æˆ·çš„æ”¶ä»¶ç®±å¯ä»¥æ˜¾è‘—å‡å°‘ç£ç›˜çš„éšæœºè¯»æ“ä½œï¼Œæé«˜è¯»å–é€Ÿåº¦å’Œç³»ç»Ÿæ€§èƒ½ã€‚\n\n#### ç¼ºç‚¹\n\n1. **å†™æ”¾å¤§**ï¼š\n   - æ¯æ¬¡å‘å¸ƒä¸€æ¡æœ‹å‹åœˆï¼Œéƒ½éœ€è¦å°†ä¿¡æ¯å†™å…¥å¤šä¸ªå¥½å‹çš„æ”¶ä»¶ç®±ï¼Œå¯¼è‡´å†™æ“ä½œçš„æ”¾å¤§ã€‚è¿™ä¼šå¢åŠ ç³»ç»Ÿçš„å†™å…¥å‹åŠ›ï¼Œå¹¶å¯èƒ½å½±å“å­˜å‚¨ä»‹è´¨çš„å¯¿å‘½ã€‚\n   \n2. **æ•°æ®ä¸€è‡´æ€§å¤æ‚**ï¼š\n   - åˆ é™¤æˆ–ä¿®æ”¹æœ‹å‹åœˆä¿¡æ¯æ—¶ï¼Œéœ€è¦åŒæ­¥æ›´æ–°æ¯ä¸ªå¥½å‹çš„æ”¶ä»¶ç®±ï¼Œå¢åŠ äº†æ•°æ®ä¸€è‡´æ€§çš„å¤æ‚æ€§å’Œç»´æŠ¤æˆæœ¬ã€‚\n\n3. **å­˜å‚¨ç©ºé—´**ï¼š\n   - ç”±äºæ¯æ¡æœ‹å‹åœˆä¿¡æ¯éœ€è¦åœ¨å¤šä¸ªå¥½å‹çš„æ”¶ä»¶ç®±ä¸­ä¿å­˜å‰¯æœ¬ï¼Œå­˜å‚¨ç©ºé—´éœ€æ±‚è¾ƒå¤§ã€‚\n\n","like_count":1,"discussions":[{"author":{"id":1466402,"avatar":"https://static001.geekbang.org/account/avatar/00/16/60/22/25b3951a.jpg","nickname":"moonlight_peng","note":"","ucode":"CDCAD90BD95073","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":647670,"discussion_content":"èµï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1720422305,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391604,"user_name":"-HedonğŸ­","can_delete":false,"product_type":"c1","uid":3176234,"ip_address":"æ¹–åŒ—","ucode":"FAE541E7A2B88F","user_header":"https://static001.geekbang.org/account/avatar/00/30/77/2a/0cd4c373.jpg","comment_is_top":false,"comment_ctime":1718623118,"is_pvip":false,"replies":[{"id":142391,"content":"è¯»å–çš„æ˜¯æœ€æ–°çš„é‚£ä¸€ä»½æ•°æ®ï¼Œæœ€æ–°çš„æ•°æ®ä¹Ÿå°±æ˜¯æœ€è¿‘å†™å…¥ï¼ŒåŒ…å«å…¨é‡æ•°æ®çš„é‚£ä¸€ä»½","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1466402,"ctime":1718641469,"ip_address":"å¹¿ä¸œ","comment_id":391604,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100772701,"comment_content":"Copy On Write è¯»å–çš„æ˜¯æ—§æ•°æ®è¿˜æ˜¯æ–°æ•°æ®ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1466402,"avatar":"https://static001.geekbang.org/account/avatar/00/16/60/22/25b3951a.jpg","nickname":"moonlight_peng","note":"","ucode":"CDCAD90BD95073","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646736,"discussion_content":"è¯»å–çš„æ˜¯æœ€æ–°çš„é‚£ä¸€ä»½æ•°æ®ï¼Œæœ€æ–°çš„æ•°æ®ä¹Ÿå°±æ˜¯æœ€è¿‘å†™å…¥ï¼ŒåŒ…å«å…¨é‡æ•°æ®çš„é‚£ä¸€ä»½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1718641469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391793,"user_name":"Hadesu","can_delete":false,"product_type":"c1","uid":1715909,"ip_address":"å¹¿ä¸œ","ucode":"48D6B656D6FF70","user_header":"https://static001.geekbang.org/account/avatar/00/1a/2e/c5/231114ed.jpg","comment_is_top":false,"comment_ctime":1719088236,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100772701,"comment_content":"lsmæå‡è¯»æ€§èƒ½çš„åšæ³•æ¯”æœ¬æ–‡ä»‹ç»çš„æ›´åŠ å¤æ‚ã€‚","like_count":2,"discussions":[{"author":{"id":2986043,"avatar":"https://static001.geekbang.org/account/avatar/00/2d/90/3b/791d0f5e.jpg","nickname":"è¿›å‡»çš„å’Œå’Œ","note":"","ucode":"8978AF077FA6AD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":647335,"discussion_content":"æˆ‘çœ‹leveldbå’ŒRocksDBé‚£äº›çš„lsm,å†…å­˜å¥½åƒæ˜¯ä¸¤ä¸ª,æ–‡ä»¶åˆå¹¶æ˜¯ä¸€å±‚å±‚å¾€ä¸‹åˆå¹¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1719887974,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å››å·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":392220,"user_name":"å®Œç¾åšæŒ","can_delete":false,"product_type":"c1","uid":1919541,"ip_address":"å±±è¥¿","ucode":"AE0261D8DDEF64","user_header":"https://static001.geekbang.org/account/avatar/00/1d/4a/35/66caeed9.jpg","comment_is_top":false,"comment_ctime":1720305465,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100772701,"comment_content":"æ€»ç»“\nå¾®ä¿¡æœ‹å‹åœˆçš„å†™æ‰©æ•£æ¨¡å‹é€šè¿‡åœ¨å‘å¸ƒæ—¶å°†æ•°æ®å†™å…¥æ¯ä¸ªå¥½å‹çš„æ”¶ä»¶ç®±ï¼Œä¼˜åŒ–äº†è¯»å–æ€§èƒ½ã€‚è¿™ç§è®¾è®¡åœ¨è¯»å–æ“ä½œé¢‘ç¹çš„ç¤¾äº¤ç½‘ç»œåœºæ™¯ä¸­éå¸¸æœ‰æ•ˆï¼Œä½†ä¹Ÿå¸¦æ¥äº†å†™æ”¾å¤§å’Œæ•°æ®ä¸€è‡´æ€§ç®¡ç†çš„æŒ‘æˆ˜ã€‚æ•´ä½“ä¸Šï¼Œè¿™ç§æ¨¡å‹åœ¨æå‡ç”¨æˆ·ä½“éªŒå’Œç³»ç»Ÿæ€§èƒ½æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œå°½ç®¡éœ€è¦åœ¨å­˜å‚¨ç©ºé—´å’Œå†™å…¥å‹åŠ›æ–¹é¢è¿›è¡Œå¹³è¡¡ã€‚","like_count":0}]}