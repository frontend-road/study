{"id":212722,"title":"02 | 系统可用性：没有故障，系统就一定是稳定的吗？","content":"<p>你好，我是赵成，欢迎回来。</p><p>我们先来复习一下上一讲的内容，总结下来就是，SRE是个体系化工程，我们通过构建SRE这样一套体系来保证系统稳定性，具体来说就是“提升MTBF，降低MTTR”。有了这样一个激动人心的目标，你是不是想着那咱还等什么，赶快、立马就入手建设SRE体系吧！</p><p>嗯，好想法，我也很想咱就直接“撸起袖子加油干”。不过今天我们要先缓一缓，在正式进入SRE落地细节之前，我们得先讨论一下目前业界常用的“系统可用性（Availability）”这个概念，也就是我们常常听到的“3个9”（99.9%或99.95%）、“4个9”（99.99%或99.995%）。</p><p>为什么要先来讨论“系统可用性”这个大家已经很熟悉的概念呢？</p><p>一方面，系统可用性和我们建设SRE的目标强相关，SRE的稳定性目标其实就是尽量减少系统故障或异常运行状态的发生，提升系统可用的运行时间占比。很明显，这个可用时长就非常关键了。</p><p>另一方面，系统可用性这个概念看似简单，但我发现真的深入进去，大家的理解其实有很多不一致的地方，比如到底怎样才算是可用时长，怎样算是不可用时长呢？这个标准是怎么定义的？除了从时间维度来衡量可用性，还有其它的衡量方式吗？“3个9”、“4个9”听起来都很好，那具体来说我们的系统要达到“几个9”才算是稳定的呢？</p><!-- [[[read_end]]] --><p>所以，今天我们先慢下来，花时间把上面这些问题都彻底搞清楚，达成共识，打好基础，咱后面的SRE学习才能事半功倍。</p><h2>衡量系统可用性的2种方式</h2><p>那我就直接给答案了，目前业界有两种衡量系统可用性的方式，一个是时间维度，一个是请求维度，我们先来看这两个维度的计算公式。</p><ul>\n<li><strong>时间维度：Availability = Uptime / (Uptime + Downtime)</strong></li>\n<li><strong>请求维度：Availability = Successful request / Total request</strong></li>\n</ul><p>这两个公式很简单，我们得深入进去，一一来看。</p><p>我们先来看时间维度的系统可用性。用一句话来概括：<strong>时长维度，是从故障角度出发对系统稳定性进行评估</strong>。</p><p>这类计算方式我们最常见，毕竟你的系统在一段时间里不出现故障，就说明它很稳定嘛！不过，在真实的使用场景中，怎么样才算是可用时长，什么情况下又是不可用时长，这个是怎么定义的呢？</p><p>细想一下这个问题，你会发现还真有点复杂，那我就举个发烧生病的例子来说明一下。</p><p>我们知道，一个人如果发烧了，体温一般会超过37.5度，那如果这个人的体温正好达到这个温度，是不是代表他一定是生病了呢？依据生活经验，我们知道不一定。为什么呢？因为我们判断一个人是否发烧生病，不是只看这一次、一时的体温，还要看他体温是不是持续超过37.5度。</p><p>所以，这里就涉及到一个测量方法和判定方法的问题，包含三个要素：一个是<strong>衡量指标</strong>，比如体温就是衡量指标；第二个是<strong>衡量目标</strong>，达到什么目标是正常，达不到就是异常，低于37.5度算正常，超过37.5度就是异常，但是单次测量不能说明问题，我们可以多次测量，比如6次中有至少4次低于37.5度才算正常，转化成比例的话就是67%；第三个是<strong>影响时长</strong>，比如持续超过12小时。</p><p>对应到系统上，我们也会用一系列的标准和判定逻辑来说明系统是否正常。比如，系统请求状态码为非5xx的比例，也就是请求成功率低于95%，已经连续超过10分钟，这时就要算作故障，那么10分钟就要纳入Downtime（宕机时间），如果达不到这个标准，就不算作故障，只是算作一般或偶然的异常问题。</p><p>这里同样有三个要素：<strong>衡量指标</strong>，系统请求状态码；<strong>衡量目标</strong>，非5xx占比，也就是成功率达到95%；<strong>影响时长</strong>，持续10分钟。</p><p>因此，只有当问题达到一定影响程度才会算作故障，这时才会计算不可用时长，也就是上面公式中的Downtime。同时，我们还要求一个周期内，允许的Downtime，或者说是系统的“生病时间”是有限的，用这个有限时间来约束系统稳定性。</p><p>下面是我们常见的按时长维度统计的可用性对照表，也就是我们前面提到的几个9：<br>\n<img src=\"https://static001.geekbang.org/resource/image/32/b6/32793cc21e9aa296c92a9ed59b0a41b6.jpg?wh=3107*1874\" alt=\"\"><br>\n讲到这里，针对时长维度的稳定性计算方式就比较清楚了，但是从这种计算方式中，你有没有看出一些问题呢？</p><p>我想你肯定看出来了，这里最显著的问题就是，稳定性只与故障发生挂钩。</p><p>我们来想一想，这样做会带来哪些问题？比如有一个系统，因为网络抖动，有短暂的几秒、十几秒，或者几分钟异常，但是后来系统自己恢复了，业务并没有中断，这时我们按照时长维度来判断，这肯定不会算作系统故障。但是如果这种短暂的影响频度非常高，一天来个5、6次，持续一两周，我们应该可以判定系统运行状况也是不正常的，可能不是故障，但肯定是不稳定了。</p><p>所以这种用时长维度来衡量系统稳定性的方式，其主要缺点就是粒度不够精细。这些小的异常问题和它们的影响，如果从更长的周期来看，也是有一定参考价值的。那怎样才能衡量得更精细些呢？</p><p>这就需要第二种衡量方式了，也就是从请求维度来衡量系统可用性。</p><p>用一句话来说，<strong>请求维度，是从成功请求占比的角度出发，对系统的稳定性进行评估</strong>。</p><p>假定我们的系统一天内有100,000次请求，我们期望的成功率至少是95%，如果有5001次请求失败了，也就是成功率低于95%了，我们就认为系统运行状态是不正常的。</p><p>请求维度的系统可用性同样包含三个关键要素，第一个<strong>衡量指标</strong>，请求成功率；第二个<strong>衡量目标</strong>，成功率达到95%才算系统运行正常；第三个是<strong>统计周期</strong>，比如一天、一周、一个月等等，我们是在一个统计周期内计算整体状况，而不是看单次的。</p><p>你看，这种方式对系统运行状况是否稳定监管得更为严格，不会漏掉任何一次问题的影响，因为它对系统整体运行的稳定性判定，不仅仅会通过单次的异常影响进行评估，还会累计叠加进行周期性的评估。</p><p>到这里，我们就总结出一条至关重要的经验了：<strong>故障一定意味着不稳定，但是不稳定，并不意味着一定有故障发生</strong>。</p><p>到这里，我们掌握了衡量系统可用性的两个维度、两种算法，它们都包含三个关键要素：衡量指标、衡量目标、影响时长/统计周期。这两种算法最后都会落脚到“几个9”上，那系统到底定“几个9”才算是稳定的呢？接下来，我们就来回答这个问题。</p><h2>设定系统稳定性目标要考虑的3个因素</h2><p>这个问题其实并没有标准答案，从我的经验来看，到底定“几个9”主要取决于以下三个因素。</p><p><strong>第一个，成本因素。</strong></p><p>从理论上来说，肯定是9越多稳定性越好，但是相应付出的成本和代价也会更高。比如为了更高的可用性，要有更多的冗余资源投入，甚至要做主备、双活甚至是多活。如果一家公司的业务量和影响力都发展到一定程度，那这个成本不管多高都是必须要付出的。但是，肯定不是所有的公司都需要付出这么高的成本，而是要先考虑ROI（回报率）。这时候就要看企业自身对成本压力的承担情况了。</p><p><strong>第二个，业务容忍度。</strong></p><p>稳定性怎么设定，很大程度上还要取决于业务上的容忍度。对于核心业务或核心应用，比如电商的交易和支付系统，我们当然是希望成功率越高越好，一般对系统稳定性要求是“3个9”或“4个9”。因为这些系统一旦出问题，就会直接影响整个网站和公司的收益，这些都是钱，所以对稳定性要求必然就会提高。</p><p>但是，对于非核心业务或应用，比如商品评论，商品评分等，或许“2个9”也能容忍。因为短时间的评论看不到，并不会对业务收入和用户体验造成太大的影响。</p><p><strong>第三个，系统当前的稳定性状况。</strong></p><p>结合系统的实际情况，<strong>定一个合理的标准比定一个更高的标准会更重要</strong>。这个合理的值应该怎么来定呢？</p><p>我个人的建议是从系统现状入手，比如，如果系统可用性是低于99%的，那首先第一步是不是可以做到99%，然后再争取做到99.5%，再到99.9%，一步一步朝着更高的标准迈进。同时，这样做也会更容易落地，因为你如果定一个太高的目标，又始终达不成，反而会打击到团队的自信心和积极性。</p><p>结合上面这三个因素，对于到底应该定“几个9”这个问题，你应该有了一个更清晰的认识了。</p><h2>总结</h2><p>好了，到这里，今天我们要讨论的系统可用性就讲完了。关于系统可用性，业界有两种计算方式，一种是时长维度，另一种是请求维度，这两种方式各有优劣。在SRE的实践中，应该选择哪一个呢？很明显，SRE会更多采用请求维度的统计方式，因为<strong>SRE关注的稳定性是系统的整体运行状态，而不仅仅只关注故障状态下的稳定性，在系统运行过程中的任何异常，都会被纳入稳定性的评估范畴中。</strong></p><p>这个知识点要拿一整节课来讲，是因为接下来我们就要讨论SRE的稳定性指标和目标了，理解了今天的内容，你才能更好地理解SRE体系中的指标（SLI）和目标（SLO）。今天我先把SLI和SLO这两个概念抛出来，如果你觉得有点陌生，没有关系，准备好下节课和我一起掌握它们。</p><h2>思考题</h2><p>对于系统可用性的描述，今天我们仅用了“状态码”这一个指标来示例，但是在实际情况下，我们还会有其它多个指标来同时标识一个系统的稳定性，你能想到还有哪些指标？欢迎你在留言区写下自己的思考。</p><p>考虑这些指标的时候，不妨想想你是怎么选择的，你的判断标准是什么？这些也将是我们下节课程的重点内容。</p><p>如果今天的内容对你有帮助，也欢迎你分享给身边的朋友，和他一起精进。</p><p>我是赵成，我们下节课见。</p>","neighbors":{"left":{"article_title":"01｜SRE迷思：无所不能的角色？还是运维的升级？","id":212728},"right":{"article_title":"03 | SRE切入点：选择SLI，设定SLO","id":215004}},"comments":[{"had_liked":false,"id":189854,"user_name":"春来草自青","can_delete":false,"product_type":"c1","uid":1033087,"ip_address":"","ucode":"C5F7EF54B6B9F4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/rkfQQekacJcVEP7icwfF1ibvzolibHgibibPqg9aIich1vd4ffmMj4CJH64BcqJsXcSFB9BVxb9YUH5rb5T78EUOcKJQ/132","comment_is_top":false,"comment_ctime":1584577614,"is_pvip":false,"replies":[{"id":"73229","content":"很好的问题。从两个方面来看：<br><br>1、返回的业务内容不是预期的，这一点应该更多的是要QA来解决，这个本质是是功能问题，其实SRE是不需要关注这样的异常的。<br><br>2、如果可以做到内容不同，返回码不同，也可以做到稳定性的监控。比如对于一个用户登录应用，如果登录成功是200ok，验证码错误是1001，密码错误是1002，如果总是提示验证码错误，这种也是可以纳入到稳定性的监控指标中的。<br><br>关于第二个问题，7*24小时值守，这个看业务特点，比如对于证券类的应用，每天就是几个固定时段，所以没必要7*24小时。","user_name":"作者回复","user_name_real":"赵成","uid":"1001380","ctime":1584667148,"ip_address":"","comment_id":189854,"utype":1}],"discussion_count":1,"race_medal":0,"score":"87483923534","product_id":100048201,"comment_content":"从业务部门的视角来看，状态码是多少他们是不关心的，他们关心的是业务是否真正的可用。比如，极端一点，状态码正常，但返回的内容不是预期的。<br><br>另外，如果业务不是需要7*24的，可用性指标应该是仅限定在业务开展期间。<br><br>有点扯远了……","like_count":20,"discussions":[{"author":{"id":1001380,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/a4/6076bd5f.jpg","nickname":"赵成","note":"","ucode":"934FC7D12479AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487812,"discussion_content":"很好的问题。从两个方面来看：\n\n1、返回的业务内容不是预期的，这一点应该更多的是要QA来解决，这个本质是是功能问题，其实SRE是不需要关注这样的异常的。\n\n2、如果可以做到内容不同，返回码不同，也可以做到稳定性的监控。比如对于一个用户登录应用，如果登录成功是200ok，验证码错误是1001，密码错误是1002，如果总是提示验证码错误，这种也是可以纳入到稳定性的监控指标中的。\n\n关于第二个问题，7*24小时值守，这个看业务特点，比如对于证券类的应用，每天就是几个固定时段，所以没必要7*24小时。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584667148,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":202115,"user_name":"于加硕","can_delete":false,"product_type":"c1","uid":1445845,"ip_address":"","ucode":"723797D27971A4","user_header":"https://static001.geekbang.org/account/avatar/00/16/0f/d5/73ebd489.jpg","comment_is_top":false,"comment_ctime":1585904353,"is_pvip":false,"replies":[{"id":"75611","content":"感谢你的非常详细地分析，你这里其实是针对我们可用性的内容又向下深入了一层，已经深入到了定位系统不问题的根因是什么。<br><br>关注系统可用性，我们通过几个关键指标就可以，但是深入定位根因，就像你说的，我们需要更加立体化的监控，甚至是AIOps的手段。<br><br>非常棒的分享。","user_name":"作者回复","user_name_real":"赵成","uid":"1001380","ctime":1585994395,"ip_address":"","comment_id":202115,"utype":1}],"discussion_count":4,"race_medal":0,"score":"44535577313","product_id":100048201,"comment_content":"“标识系统稳定性指标”<br>\t我将这里的系统理解为一个服务，例如order这个服务，用于标识它稳定行指标有如下<br>\t<br>\t基础设施层：物理设备，操作系统<br>\t<br>\t应用层：全链路监控针对服务功能埋点监控<br>\t<br>\t服务层：服务提供的rpc，http服务的表现<br><br>\t用户层：APM将从外部因素（用户视角）检测业务功能，收集各个区域&#47;设备对业务的稳定性的表现<br>\t<br>\t说到这里，我又感觉有点像立体化监控似的。<br>\t<br>\t选择这些指标的判断标准是：<br>\t\t为什么我不能只关注http的状态呢？<br>\t\t\t举个我自己例子，公司order.xx.com出现了问题，5xx超过2000次，这样的告警其实只是将故障的表象层告出来，业务不可用，一定会有5xx，但哪里引起的5xx？哪些告警是故障的表象层，哪些是故障点的告警，一时间难以区分，如果有一个自上而下的汇聚指标供我查看，我也许就能及时的定位到原因。在上面几个层级的指标中，经常是相互作用的，例如基础设施层宕机，会引起上面多个层级指标波动；用户层的流量激增又会带来下层的指标波动；APM中的外部因素——区域网络波动又会引起内部服务层指标499波动等。所以我个人觉得稳定性讲的是一整条请求链(从用户设备到IDC)的事，要解决稳定性就必须清楚的看到整个链路的情况，所以“标识系统稳定性指标”我选择这样几个层级。这是我的观点，希望老师指正。","like_count":10,"discussions":[{"author":{"id":1001380,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/a4/6076bd5f.jpg","nickname":"赵成","note":"","ucode":"934FC7D12479AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490506,"discussion_content":"感谢你的非常详细地分析，你这里其实是针对我们可用性的内容又向下深入了一层，已经深入到了定位系统不问题的根因是什么。\n\n关注系统可用性，我们通过几个关键指标就可以，但是深入定位根因，就像你说的，我们需要更加立体化的监控，甚至是AIOps的手段。\n\n非常棒的分享。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585994395,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2504378,"avatar":"https://static001.geekbang.org/account/avatar/00/26/36/ba/b177d176.jpg","nickname":"可观测性无声笛","note":"","ucode":"709CE03E7EFCC4","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1001380,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/a4/6076bd5f.jpg","nickname":"赵成","note":"","ucode":"934FC7D12479AE","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":575643,"discussion_content":"可观测性","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654998301,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":490506,"ip_address":""},"score":575643,"extra":""}]},{"author":{"id":2504378,"avatar":"https://static001.geekbang.org/account/avatar/00/26/36/ba/b177d176.jpg","nickname":"可观测性无声笛","note":"","ucode":"709CE03E7EFCC4","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575642,"discussion_content":"从用户服务体验保障视角整合所有it系统的全链路的可用性指标才有用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654998283,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1445845,"avatar":"https://static001.geekbang.org/account/avatar/00/16/0f/d5/73ebd489.jpg","nickname":"于加硕","note":"","ucode":"723797D27971A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":317068,"discussion_content":"赵老师讲了系统的稳定性从时长和请求两个维度来综合衡量。稳定一词的含义指的是一种状态，指所处的环境或者心境在一定量的时间之内不会轻易变化；所以我还想到 &#34;延时&#34;，也可以加入衡量稳定性的一个维度；","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603503806,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":190661,"user_name":"OlafOO","can_delete":false,"product_type":"c1","uid":1019254,"ip_address":"","ucode":"105F8B194ED37B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/76/994a9929.jpg","comment_is_top":false,"comment_ctime":1584678775,"is_pvip":true,"replies":[{"id":"73306","content":"赞！","user_name":"作者回复","user_name_real":"赵成","uid":"1001380","ctime":1584695237,"ip_address":"","comment_id":190661,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27354482551","product_id":100048201,"comment_content":"机器性能指标<br>应用层级指标<br>服务质量指标","like_count":6,"discussions":[{"author":{"id":1001380,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/a4/6076bd5f.jpg","nickname":"赵成","note":"","ucode":"934FC7D12479AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488030,"discussion_content":"赞！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584695237,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":189621,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1584534849,"is_pvip":false,"replies":[{"id":"73231","content":"你的分享也非常用心，总能抓住很多关键点，很赞！","user_name":"作者回复","user_name_real":"赵成","uid":"1001380","ctime":1584667267,"ip_address":"","comment_id":189621,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27354338625","product_id":100048201,"comment_content":"就像老师课程中所提及的三要素”成本因素、业务容忍度、系统当前的稳定性状况“。这三点无一不需要综合考虑，甚至有时都得考虑三者之间的比例。<br>个人在此之外会考虑”离散度“：确实有时觉得好像还稳定，可是离散度是否正常。记得老师的推荐的书籍中就提及过，&quot;系统正常是系统异常的特殊情况&quot;;有故障才是是常态。没有故障且稳定说明大家都在做机械化重复操作，如何从故障和不稳定中找出问题才是根源。<br>老师在上一堂课中给出&quot;建设演练&#47;oncall-&gt;应急响应-&gt;复盘改进&#47;oncall”我觉得就非常好的体现了SRE的理念。谢谢老师今天的分享，让我又享受在学习的过程之中。","like_count":6,"discussions":[{"author":{"id":1001380,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/a4/6076bd5f.jpg","nickname":"赵成","note":"","ucode":"934FC7D12479AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487750,"discussion_content":"你的分享也非常用心，总能抓住很多关键点，很赞！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584667267,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":191549,"user_name":"大尾巴老猫","can_delete":false,"product_type":"c1","uid":1260089,"ip_address":"","ucode":"246AB375244773","user_header":"https://static001.geekbang.org/account/avatar/00/13/3a/39/72d81605.jpg","comment_is_top":false,"comment_ctime":1584780367,"is_pvip":true,"replies":[{"id":"73424","content":"要清楚，AIOps对业务本身是没有价值的，它是为运维服务的，所以它的价值更多的体现在运维层面。<br><br>体现在运维层面的哪里呢？就是问题发生前的预判、以及根因分析这些，因为在大规模分布式系统下，没有这个手段就没法处理问题。<br><br>但是AI要有两个要素，一个是算法，一个是数据，算法是靠数据训练的，这里算法不是问题，但是数据量是不是足够大就是问题，所以一定要业务体量足够大，资源规模足够大，产生的日志信息足够丰富，这时AIOps才有意义，如果只有几十几百台服务器的规模，业务体量也没有那么大的情况下，AIOps的作用是不大的。","user_name":"作者回复","user_name_real":"赵成","uid":"1001380","ctime":1584791717,"ip_address":"","comment_id":191549,"utype":1}],"discussion_count":3,"race_medal":0,"score":"23059616847","product_id":100048201,"comment_content":"请教一下，老师怎么看AIOPS，AIOPS对线上的业务来说，真的有（真实的）价值吗？","like_count":5,"discussions":[{"author":{"id":1001380,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/a4/6076bd5f.jpg","nickname":"赵成","note":"","ucode":"934FC7D12479AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488201,"discussion_content":"要清楚，AIOps对业务本身是没有价值的，它是为运维服务的，所以它的价值更多的体现在运维层面。\n\n体现在运维层面的哪里呢？就是问题发生前的预判、以及根因分析这些，因为在大规模分布式系统下，没有这个手段就没法处理问题。\n\n但是AI要有两个要素，一个是算法，一个是数据，算法是靠数据训练的，这里算法不是问题，但是数据量是不是足够大就是问题，所以一定要业务体量足够大，资源规模足够大，产生的日志信息足够丰富，这时AIOps才有意义，如果只有几十几百台服务器的规模，业务体量也没有那么大的情况下，AIOps的作用是不大的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584791717,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1445845,"avatar":"https://static001.geekbang.org/account/avatar/00/16/0f/d5/73ebd489.jpg","nickname":"于加硕","note":"","ucode":"723797D27971A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":317060,"discussion_content":"故障自动处理，应该属于故障自愈范畴内的吧！参考腾讯蓝鲸","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603503525,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1168658,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d5/12/ba7214ce.jpg","nickname":"lzkfun","note":"","ucode":"8FB1EFB10E5DA2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304798,"discussion_content":"老师公司AIOps主要用来做事前预判和事后根因分析吗, 有没有进一步用在故障自动处理中?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599664175,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":192560,"user_name":"张春阳","can_delete":false,"product_type":"c1","uid":1259397,"ip_address":"","ucode":"02C89D7A9F489A","user_header":"https://static001.geekbang.org/account/avatar/00/13/37/85/d91dec8c.jpg","comment_is_top":false,"comment_ctime":1584860342,"is_pvip":false,"replies":[{"id":"73697","content":"感谢你提供了用户可用性这个维度，从SRE角度，离用户越近的指标，越有价值。","user_name":"作者回复","user_name_real":"赵成","uid":"1001380","ctime":1584925240,"ip_address":"","comment_id":192560,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14469762230","product_id":100048201,"comment_content":"可用性指标，我觉得还需要区分下<br>1. 业务可用性，可以称之为“源站””，这里的统计指标最好给业务提供最大的灵活性，授权rd自身配置uei，请求方法，以及正常状态码。这里需要注意一个问题，有时候301&#47;302&#47;499也是错误码（比如为了友好提示5xx内部跳转，触发请求限流503），所以最好将body自定义内容作为判断指标。<br>2. 网络（用户）可用性。源站可用，不意味着用户也可用。可以通过监控班类的APM统计可用行指标和响应延迟（比如大于5s以上且5个节点，某某运营商线路丢包或者抖动等等）","like_count":3,"discussions":[{"author":{"id":1001380,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/a4/6076bd5f.jpg","nickname":"赵成","note":"","ucode":"934FC7D12479AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488423,"discussion_content":"感谢你提供了用户可用性这个维度，从SRE角度，离用户越近的指标，越有价值。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584925240,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1445845,"avatar":"https://static001.geekbang.org/account/avatar/00/16/0f/d5/73ebd489.jpg","nickname":"于加硕","note":"","ucode":"723797D27971A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":220586,"discussion_content":"@赵成，赵老师，从你的这个答复中，我突然想到舆情分析是否也可以算作是SRE的指标范畴呢？可能撤的有点远了......","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585901725,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":190086,"user_name":"foxracle","can_delete":false,"product_type":"c1","uid":1043220,"ip_address":"","ucode":"1CBC9486E867EE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/eb/14/b6929253.jpg","comment_is_top":false,"comment_ctime":1584600737,"is_pvip":false,"replies":[{"id":"73228","content":"从用户角度来评价，这个点把握的非常准确。<br>","user_name":"作者回复","user_name_real":"赵成","uid":"1001380","ctime":1584667113,"ip_address":"","comment_id":190086,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14469502625","product_id":100048201,"comment_content":"系统可用性从用户角度来评价最直接，至少包括<br>1：能否访问到。这应该包括从用户操作到收到响应整个端到端的是否可用，对于用户最后一公里的不可控段也需要能感知和预警。<br>2：访问是否顺畅。响应时间是否异常","like_count":3,"discussions":[{"author":{"id":1001380,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/a4/6076bd5f.jpg","nickname":"赵成","note":"","ucode":"934FC7D12479AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487882,"discussion_content":"从用户角度来评价，这个点把握的非常准确。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584667113,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1445845,"avatar":"https://static001.geekbang.org/account/avatar/00/16/0f/d5/73ebd489.jpg","nickname":"于加硕","note":"","ucode":"723797D27971A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":317075,"discussion_content":"站在用户角度来评价系统可用性就是APM的范畴了，可以作为一个参考方向。个人觉得不能作为SRE衡量系统稳定性的方法，原因是我们对用户不可控。只要把握住了时长，请求维度，解决这个上面的问题，用户角度会有明显提升。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603504187,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":204377,"user_name":"爱吃鱼的猫","can_delete":false,"product_type":"c1","uid":1311392,"ip_address":"","ucode":"5B77CCE330D580","user_header":"https://static001.geekbang.org/account/avatar/00/14/02/a0/891a7a1f.jpg","comment_is_top":false,"comment_ctime":1586393610,"is_pvip":false,"replies":[{"id":"76408","content":"非常正确！","user_name":"作者回复","user_name_real":"赵成","uid":"1001380","ctime":1586397506,"ip_address":"","comment_id":204377,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10176328202","product_id":100048201,"comment_content":"稳定性还是要看应用的等级，核心应用可能会投入更多的资源和成本，从架构等多个方面做到更好的高可用，没必要为一个非核心业务投入太多资源","like_count":2,"discussions":[{"author":{"id":1001380,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/a4/6076bd5f.jpg","nickname":"赵成","note":"","ucode":"934FC7D12479AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491159,"discussion_content":"非常正确！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586397506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1445845,"avatar":"https://static001.geekbang.org/account/avatar/00/16/0f/d5/73ebd489.jpg","nickname":"于加硕","note":"","ucode":"723797D27971A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":317079,"discussion_content":"2.业务容忍度\n    例如黄金流程的业务要求保障99.99%； 普通服务98%\n    #可以将业务划分为不同的等级，给每一个等级设定固定的SLO(服务等级目标)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603504275,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":194971,"user_name":"H.Z","can_delete":false,"product_type":"c1","uid":1643296,"ip_address":"","ucode":"728417BD5B4DA8","user_header":"https://static001.geekbang.org/account/avatar/00/19/13/20/2d22b331.jpg","comment_is_top":false,"comment_ctime":1585125044,"is_pvip":false,"replies":[{"id":"74271","content":"总结地很好。可以看看后面两篇文章，看看有没有进一步的启发和思考。","user_name":"作者回复","user_name_real":"赵成","uid":"1001380","ctime":1585192367,"ip_address":"","comment_id":194971,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10175059636","product_id":100048201,"comment_content":"1. 系统层面：CPU、内存、磁盘IO、网络IO<br>2. 业务层面：网站返回状态码、接口返回时间<br>就想到这些","like_count":2,"discussions":[{"author":{"id":1001380,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/a4/6076bd5f.jpg","nickname":"赵成","note":"","ucode":"934FC7D12479AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488940,"discussion_content":"总结地很好。可以看看后面两篇文章，看看有没有进一步的启发和思考。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585192367,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":189958,"user_name":"小圣","can_delete":false,"product_type":"c1","uid":1076531,"ip_address":"","ucode":"0D156CE4CF8029","user_header":"https://static001.geekbang.org/account/avatar/00/10/6d/33/2ea1134b.jpg","comment_is_top":false,"comment_ctime":1584585570,"is_pvip":false,"replies":[{"id":"73230","content":"谢谢！看看能不能用简介清晰的几句话表达出来呢^_^","user_name":"作者回复","user_name_real":"赵成","uid":"1001380","ctime":1584667214,"ip_address":"","comment_id":189958,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10174520162","product_id":100048201,"comment_content":"简洁，清晰","like_count":2,"discussions":[{"author":{"id":1001380,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/a4/6076bd5f.jpg","nickname":"赵成","note":"","ucode":"934FC7D12479AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487841,"discussion_content":"谢谢！看看能不能用简介清晰的几句话表达出来呢^_^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584667214,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228553,"user_name":"寞月","can_delete":false,"product_type":"c1","uid":1226786,"ip_address":"","ucode":"7243313ED73754","user_header":"https://static001.geekbang.org/account/avatar/00/12/b8/22/6d63d3fc.jpg","comment_is_top":false,"comment_ctime":1592733609,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5887700905","product_id":100048201,"comment_content":"对于CS类应用，想到的指标有：<br>## 服务端监控指标<br>### 业务维度<br>- 业务服务健康检查：业务服务、DB、缓存组件<br>- 上下游依赖服务健康检查<br>- 请求状态码(错误请求百分比)<br>- 响应时间(慢请求百分比)<br>### 基础设施维度<br>- 服务器uptime：服务器可以是物理机、虚机、容器，cpu内存磁盘问题都会影响uptime<br>- 服务健康检查：基础组件服务、ops服务等健康状态检查<br>- 网络指标<br>## 客户端上报指标<br>同样是请求状态码和请求响应时间，但体现的是用户端的感受，可以与服务端数据对比来评估问题出在服务端还是用户端网络或cdn等。<br><br>","like_count":1},{"had_liked":false,"id":219052,"user_name":"方勇(gopher)","can_delete":false,"product_type":"c1","uid":1290625,"ip_address":"","ucode":"D199911C4CFEF5","user_header":"https://static001.geekbang.org/account/avatar/00/13/b1/81/13f23d1e.jpg","comment_is_top":false,"comment_ctime":1589937654,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5884904950","product_id":100048201,"comment_content":"应用可用性指标，请求耗时，成功率都是基于日志的能很好的分析出来，中间件是为应用服务的，单个节点有异常，集群其实还是可用的，到节点切换的时候，可能有慢sql，应用异常不太和中间件关联上，一般都是事后人为分析","like_count":1},{"had_liked":false,"id":206470,"user_name":"Donald","can_delete":false,"product_type":"c1","uid":1043694,"ip_address":"","ucode":"78337CC105B102","user_header":"","comment_is_top":false,"comment_ctime":1586866189,"is_pvip":true,"replies":[{"id":"77386","content":"理解基本正确。","user_name":"作者回复","user_name_real":"赵成","uid":"1001380","ctime":1587016325,"ip_address":"","comment_id":206470,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5881833485","product_id":100048201,"comment_content":"我其实还是不太明白，应该是先明确故障的定义，还是先明确不可用时长的定义？<br>先定义故障？似乎不太合理。<br>先明确不可用时长？比如，影响了不可用时长，就算做一个故障？-似乎合理。<br><br>那么，是不是可以这样理解？<br>比如，如果按照时长维度来定义，会出现一种情况，就是没有达到不可用的定义，但是频繁发生，比如持续发生但是未超过10min。<br>而另一种衡量方式，通过请求比例，比如，每发生一次，不管持续多久，都算作1。那么，每一次不稳定的发生，都会计算进不可用。-所以也是这个原因，才说是通过请求比例的定义会更合理？","like_count":1,"discussions":[{"author":{"id":1001380,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/a4/6076bd5f.jpg","nickname":"赵成","note":"","ucode":"934FC7D12479AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491802,"discussion_content":"理解基本正确。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587016325,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360619,"user_name":"BertGeek","can_delete":false,"product_type":"c1","uid":1452799,"ip_address":"陕西","ucode":"8E1D72C9F9778C","user_header":"https://static001.geekbang.org/account/avatar/00/16/2a/ff/a9d72102.jpg","comment_is_top":false,"comment_ctime":1666691814,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1666691814","product_id":100048201,"comment_content":"系统稳定性，需要提前规划定义标准值范围和方法<br>综合多方因素和现有储备，适合项目在线需求，达到业务稳定标准。<br>","like_count":0},{"had_liked":false,"id":356242,"user_name":"训虎","can_delete":false,"product_type":"c1","uid":1519110,"ip_address":"江苏","ucode":"7C20E4A70A0B10","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJjzTQ6HPGw2LLGqeicQAPYHcgL1KJ9diaMLrZ42pB8icymWR5YWhRDaa8ibJlhNTqUWtW5eAKZzKGQmw/132","comment_is_top":false,"comment_ctime":1662083213,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1662083213","product_id":100048201,"comment_content":"SRE是一个方法论，一个工程方法","like_count":0},{"had_liked":false,"id":348574,"user_name":"郭新鹏","can_delete":false,"product_type":"c1","uid":1154281,"ip_address":"","ucode":"F9D76691B335FC","user_header":"https://static001.geekbang.org/account/avatar/00/11/9c/e9/5ba8b1a3.jpg","comment_is_top":false,"comment_ctime":1655205651,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1655205651","product_id":100048201,"comment_content":"其实客服反馈一个周期内，有多少例反馈也是故障。","like_count":0},{"had_liked":false,"id":295624,"user_name":"木","can_delete":false,"product_type":"c1","uid":1018733,"ip_address":"","ucode":"54D193F7B3B32B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8b/6d/2824396e.jpg","comment_is_top":false,"comment_ctime":1622519137,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622519137","product_id":100048201,"comment_content":"服务响应延迟","like_count":0},{"had_liked":false,"id":276079,"user_name":"Podman","can_delete":false,"product_type":"c1","uid":1801003,"ip_address":"","ucode":"1C9C7EA8C28ED7","user_header":"https://static001.geekbang.org/account/avatar/00/1b/7b/2b/97e4d599.jpg","comment_is_top":false,"comment_ctime":1611769987,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611769987","product_id":100048201,"comment_content":"有一个计算问题不是很明白：<br>对应到系统上，我们也会用一系列的标准和判定逻辑来说明系统是否正常。比如，系统请求状态码为非 5xx 的比例，也就是请求成功率低于 95%，已经连续超过 10 分钟，这时就要算作故障，那么 10 分钟就要纳入 Downtime（宕机时间）<br><br>意思是说，如果统计10分钟的全部请求状态码，其中5xx的数量占比高于5%，那么这10分钟就要纳入宕机时间么？如果10分钟之内，其实前5分钟是没有5xx状态码的，但是后面5分钟陆续出了好多5xx，把整个10分钟的5xx占比拉高到大于5%，那么也要把10分钟都算进宕机时间么","like_count":0},{"had_liked":false,"id":254446,"user_name":"Browser","can_delete":false,"product_type":"c1","uid":1486986,"ip_address":"","ucode":"5DC1176A4A5A71","user_header":"https://static001.geekbang.org/account/avatar/00/16/b0/8a/3ecf6853.jpg","comment_is_top":false,"comment_ctime":1603117005,"is_pvip":false,"replies":[{"id":"95126","content":"很多企业往往就是这样的","user_name":"作者回复","user_name_real":"赵成","uid":"1001380","ctime":1605664511,"ip_address":"","comment_id":254446,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1603117005","product_id":100048201,"comment_content":"面向领导的运维😁","like_count":0,"discussions":[{"author":{"id":1001380,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/a4/6076bd5f.jpg","nickname":"赵成","note":"","ucode":"934FC7D12479AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":507399,"discussion_content":"很多企业往往就是这样的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605664511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":247348,"user_name":"lzkfun","can_delete":false,"product_type":"c1","uid":1168658,"ip_address":"","ucode":"8FB1EFB10E5DA2","user_header":"https://static001.geekbang.org/account/avatar/00/11/d5/12/ba7214ce.jpg","comment_is_top":false,"comment_ctime":1599664687,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1599664687","product_id":100048201,"comment_content":"感觉两个维度并不是都适用于任何情况. 比如外部网络异常中断的情况下, 没有任何请求可以到达就没法从请求维度来考虑.","like_count":0,"discussions":[{"author":{"id":1445845,"avatar":"https://static001.geekbang.org/account/avatar/00/16/0f/d5/73ebd489.jpg","nickname":"于加硕","note":"","ucode":"723797D27971A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":317095,"discussion_content":"我觉得这里得定义一个范围。\n稳定性的范围应该是SRE可控，可保障的；外部因素我们似乎无法介入，可以统计作为参考，但不纳入可用性指标中；例如光纤挖断了。我作为一个公司的SRE，我能咋办呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603504674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219049,"user_name":"方勇(gopher)","can_delete":false,"product_type":"c1","uid":1290625,"ip_address":"","ucode":"D199911C4CFEF5","user_header":"https://static001.geekbang.org/account/avatar/00/13/b1/81/13f23d1e.jpg","comment_is_top":false,"comment_ctime":1589937386,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1589937386","product_id":100048201,"comment_content":"中间件稳定性不太好衡量，大部分中间件都是集群，比如MySQL如果查询慢可能是业务sql写的有问题，也可能是MySQL负载高，只有事后分析才知道是哪里的问题，这种影响时长也只能事后统计，对自动化报表处理不友好，大家一般怎么监控中间件异常的，有哪些slo","like_count":0,"discussions":[{"author":{"id":1346225,"avatar":"https://static001.geekbang.org/account/avatar/00/14/8a/b1/980ea8c0.jpg","nickname":"王运祥","note":"","ucode":"6A69D65D9E773E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288963,"discussion_content":"中间件异常导致的服务故障也是在排障时要重点关注的，不仅仅是事后分析。我们会通过黑盒监控的方式来做中间价监控，比如redis通过set一个key再get这个key来监控redis集群的可用性，而忽略掉redis集群内部的细节，只关注其能否为应用层正常提供服务。还有一种方式是通过监控一个和中间价交互的单一功能的业务api来间接判断中间价是否有问题。通过多个采集节点同一时刻的采集数据，聚合分析某一时刻中间价的可用性","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593944874,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206065,"user_name":"Donald","can_delete":false,"product_type":"c1","uid":1043694,"ip_address":"","ucode":"78337CC105B102","user_header":"","comment_is_top":false,"comment_ctime":1586783453,"is_pvip":true,"replies":[{"id":"77031","content":"所以，怎么样才算一个故障，这个是根本问题。<br><br>不可用时长的计算也是基于对故障的定义来计算的。","user_name":"作者回复","user_name_real":"赵成","uid":"1001380","ctime":1586832115,"ip_address":"","comment_id":206065,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1586783453","product_id":100048201,"comment_content":"一般情况，是根据不可用时长来定义故障，还是根据故障的定义来计算不可用时长呢？<br>比如，你这里举得例子，就是先定义好什么是故障，比如持续10min。然后再看有没有超过10min，如果超过了，就算是一个故障，然后计算出实际的不可用时长。如果没有超过10min，就不算是故障，相应的，也就不计算不可用时长。--所以，这种不可用时长的计算方式才在某些情况下体现不出稳定性？<br><br>而且我发现，很多公司都很难明确定义一个故障？比如，怎么样的表现就算是一个故障？","like_count":0,"discussions":[{"author":{"id":1001380,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/a4/6076bd5f.jpg","nickname":"赵成","note":"","ucode":"934FC7D12479AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491656,"discussion_content":"所以，怎么样才算一个故障，这个是根本问题。\n\n不可用时长的计算也是基于对故障的定义来计算的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586832115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1445845,"avatar":"https://static001.geekbang.org/account/avatar/00/16/0f/d5/73ebd489.jpg","nickname":"于加硕","note":"","ucode":"723797D27971A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":317096,"discussion_content":"我理解的比较简单：故障最好的定义就是影响营收了，影响APP主流程了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603504757,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205967,"user_name":"牧野静风","can_delete":false,"product_type":"c1","uid":1311629,"ip_address":"","ucode":"FB5963F97C23AA","user_header":"https://static001.geekbang.org/account/avatar/00/14/03/8d/38a98dc6.jpg","comment_is_top":false,"comment_ctime":1586765193,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586765193","product_id":100048201,"comment_content":"还是要从用户角度会好点，比如一个功能有多个接口，单纯的请求可能正常，但是综合起来的功能不可用。还是要通过APM一些工具","like_count":0},{"had_liked":false,"id":201537,"user_name":"行与修","can_delete":false,"product_type":"c1","uid":1241842,"ip_address":"","ucode":"11F21B663EF6D3","user_header":"https://static001.geekbang.org/account/avatar/00/12/f2/f2/2a9a6e9a.jpg","comment_is_top":false,"comment_ctime":1585801326,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1585801326","product_id":100048201,"comment_content":"容错率、自纠正能力、人工干预度、线上迭代平滑度","like_count":0,"discussions":[{"author":{"id":1445845,"avatar":"https://static001.geekbang.org/account/avatar/00/16/0f/d5/73ebd489.jpg","nickname":"于加硕","note":"","ucode":"723797D27971A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":220568,"discussion_content":"似乎在度量DevOps，能否详细解释下这几个词，和公式","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585898395,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":197264,"user_name":"soong","can_delete":false,"product_type":"c1","uid":1049954,"ip_address":"","ucode":"E3BECF2088F3D9","user_header":"https://static001.geekbang.org/account/avatar/00/10/05/62/0a4e5831.jpg","comment_is_top":false,"comment_ctime":1585365992,"is_pvip":false,"replies":[{"id":"74636","content":"你的理解很正确，可以借着看03-05的内容，可以回答你的问题。","user_name":"作者回复","user_name_real":"赵成","uid":"1001380","ctime":1585404442,"ip_address":"","comment_id":197264,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1585365992","product_id":100048201,"comment_content":"关于系统稳定性的指标，状态码是一些比较基础组件的运行状态反应。此外，响应时间是另一个重要的体现系统稳定性的指标，一段时间内响应时间增加，意味着系统的吞吐量减少，也会影响系统的运行状态！还有，比如CPU占用，内存使用，I&#47;O等等，都是重要的指标！只是，这些指标往往散落在不同的系统里面，如何将所有的这些数据整合起来，如何整合开发、运维的能力，实现整体更好的目标，与这些相关的实践，成哥有什么建议呢？","like_count":0,"discussions":[{"author":{"id":1001380,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/a4/6076bd5f.jpg","nickname":"赵成","note":"","ucode":"934FC7D12479AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489486,"discussion_content":"你的理解很正确，可以借着看03-05的内容，可以回答你的问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585404442,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1346225,"avatar":"https://static001.geekbang.org/account/avatar/00/14/8a/b1/980ea8c0.jpg","nickname":"王运祥","note":"","ucode":"6A69D65D9E773E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298225,"discussion_content":"要建立整体的dashboard，一可用于日常巡检，二可在故障时迅速确定影响面","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597223058,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1445845,"avatar":"https://static001.geekbang.org/account/avatar/00/16/0f/d5/73ebd489.jpg","nickname":"于加硕","note":"","ucode":"723797D27971A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":220571,"discussion_content":"&#34;只是，这些指标往往散落在不同的系统里面，如何将所有的这些数据整合起来，如何整合开发、运维的能力，实现整体更好的目标，&#34;。我们有在实践这部分，方便QQ交流不，1652990801","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585898536,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":195578,"user_name":"Mander","can_delete":false,"product_type":"c1","uid":1148826,"ip_address":"","ucode":"66C083042843ED","user_header":"https://static001.geekbang.org/account/avatar/00/11/87/9a/40d73657.jpg","comment_is_top":false,"comment_ctime":1585199129,"is_pvip":false,"replies":[{"id":"74306","content":"很好的问题，我会在地05篇讲到这个问题，可以关注下。","user_name":"作者回复","user_name_real":"赵成","uid":"1001380","ctime":1585211222,"ip_address":"","comment_id":195578,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1585199129","product_id":100048201,"comment_content":"当前的系统架构都是微服务，是单个应用统计可用性，还是一个模块多个应用统计一个可用性？ 系统可用性中系统粒度要怎么样统计才合理？","like_count":0,"discussions":[{"author":{"id":1001380,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/a4/6076bd5f.jpg","nickname":"赵成","note":"","ucode":"934FC7D12479AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489117,"discussion_content":"很好的问题，我会在地05篇讲到这个问题，可以关注下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585211222,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":191551,"user_name":"大尾巴老猫","can_delete":false,"product_type":"c1","uid":1260089,"ip_address":"","ucode":"246AB375244773","user_header":"https://static001.geekbang.org/account/avatar/00/13/3a/39/72d81605.jpg","comment_is_top":false,"comment_ctime":1584780540,"is_pvip":true,"replies":[{"id":"73463","content":"很有意思的回答，我再提一个问题，就是four golden signals适合做衡量稳定性的指标吗？","user_name":"作者回复","user_name_real":"赵成","uid":"1001380","ctime":1584796578,"ip_address":"","comment_id":191551,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1584780540","product_id":100048201,"comment_content":"RED、USE、four golden signals","like_count":0,"discussions":[{"author":{"id":1001380,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/a4/6076bd5f.jpg","nickname":"赵成","note":"","ucode":"934FC7D12479AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488202,"discussion_content":"很有意思的回答，我再提一个问题，就是four golden signals适合做衡量稳定性的指标吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584796578,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1346225,"avatar":"https://static001.geekbang.org/account/avatar/00/14/8a/b1/980ea8c0.jpg","nickname":"王运祥","note":"","ucode":"6A69D65D9E773E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288964,"discussion_content":"我认为不能，这些指标都不能反映出业务功能不可用，只有业务视角的黑盒监控才能衡量系统稳定性，比如电商场景，核心功能就是用户完成交易，那用户交易链条上的比如首页，登陆，商详，购物车，下单，支付等这些功能的异常是与文档性直接挂钩的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593945565,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":191475,"user_name":"jenven","can_delete":false,"product_type":"c1","uid":1044369,"ip_address":"","ucode":"7FB13C5CC40F0B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ef/91/0dc4772b.jpg","comment_is_top":false,"comment_ctime":1584776880,"is_pvip":false,"replies":[{"id":"73413","content":"你提供了一个很好的案例。你提到的是针对单次请求的成功与否，但是如果要判断服务是不是正常，单次判断是不是够？如果不够，那应该采取什么样的判断方式呢？<br><br>可以尝试思考下这两个问题。","user_name":"作者回复","user_name_real":"赵成","uid":"1001380","ctime":1584790239,"ip_address":"","comment_id":191475,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1584776880","product_id":100048201,"comment_content":"系统的稳定性的衡量指标最关键要与业务结合一起。<br>我认为最重要的是要引入服务的健康检查机制，具体说明：<br>如A服务依赖诸多中间件例如数据库、消息队列等，也依赖其他B、C等服务。A服务对检查的服务所依赖的不同的中间件或服务定义为HealthCheck的最终结果为true或false，任何一个HealthCheck的healthy结果为false，那么最终状态就会是false。{<br> &quot;healthcheck&quot;:[<br>           { &quot;status&quot;: &quot;true|false&quot;           <br>           }<br>        ]<br> \t &quot;rds&quot;:[<br>    \t  {<br>        \t &quot;name&quot;:&quot;实例1 &quot; ,<br>         \t &quot;status&quot;: &quot;http_code_status&quot;,<br>     \t },<br>    \t {<br>             &quot;name&quot;:&quot;实例2&quot; ,<br>             &quot;status&quot;: &quot;http_code_status&quot;<br>      \t },<br>\t    ]<br>  \t&quot;redis&quot;:[<br>    \t  {<br>        \t &quot;name&quot;:&quot;实例1 &quot; ,<br>       \t\t &quot;status&quot;: &quot;http_code_status&quot;<br>     \t  },<br>     \t {<br>         \t &quot;name&quot;:&quot;实例2&quot; ,<br>         \t &quot;status&quot;: &quot;http_code_status&quot;<br>     \t  }<br>     \t]<br> \t &quot;mongodb&quot;:[<br>     \t {<br>         \t&quot;name&quot;:&quot;实例1 &quot; ,<br>        \t &quot;status&quot;: &quot;http_code_status&quot;<br>      },<br>     \t{<br>         \t&quot;name&quot;:&quot;实例2&quot; ,<br>         \t&quot;status&quot;: &quot;http_code_status&quot;<br>      }<br>     ]<br>  \t&quot;app&quot;:[<br>         {<br>         \t&quot;name&quot;:&quot;domainB&quot; ,<br>         \t&quot;status&quot;: &quot;http_code_status&quot;<br>         },<br>        {<br>        \t&quot;name&quot;:&quot;donmainC&quot; ,<br>         \t&quot;status&quot;: &quot;http_code_status&quot;<br>     \t }<br>   \t  ]<br>}<br>上面是个比较简单的服务健康检查，可以应用到部署检查和服务可用性探测。<br>这里，也可以再完善，可以对调用的服务或组件进行优先级划分，比如调用数据库1是核心库（高优先级服务），那么服务A调用数据库1返回状态为非200（自行根据业务场景设置请求次数），那么服务A就不可用（可以标记为“紧急“），调用其他数据库2或服务B为非核心库或非核心服务（低优先级服务），这里服务并不影响核心功能，可以认为此服务可用，那么这里调用返回结果可标记为“警告”。<br>","like_count":0,"discussions":[{"author":{"id":1001380,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/a4/6076bd5f.jpg","nickname":"赵成","note":"","ucode":"934FC7D12479AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488185,"discussion_content":"你提供了一个很好的案例。你提到的是针对单次请求的成功与否，但是如果要判断服务是不是正常，单次判断是不是够？如果不够，那应该采取什么样的判断方式呢？\n\n可以尝试思考下这两个问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584790239,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1445845,"avatar":"https://static001.geekbang.org/account/avatar/00/16/0f/d5/73ebd489.jpg","nickname":"于加硕","note":"","ucode":"723797D27971A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":220579,"discussion_content":"@sda，你好；&#34;服务的健康检查机制&#34; 从你的描述中我理解起来更像是对业务的各个流程进行监控，这部分使用APM是可以做到的，apm将从用户角度描述某个业务流程是否可以跑通；一个服务中往往包含很多业务功能点，如果要监控服务中所有的功能点是否异常，这部分在全链路监控中是有实践的；不知道我理解的是否正确呢！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585899870,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1496301,"avatar":"https://static001.geekbang.org/account/avatar/00/16/d4/ed/61cb2759.jpg","nickname":"tsk","note":"","ucode":"852D28188C78C6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215742,"discussion_content":"我理解探测方式是不够的，如果要监控服务状态，只有在代码中借助监控工具的sdk实现监控逻辑，比如最简单的，实现对具体异常的统计。这样也可以有助于更因分析时快速定位问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585377090,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1044369,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ef/91/0dc4772b.jpg","nickname":"jenven","note":"","ucode":"7FB13C5CC40F0B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":211269,"discussion_content":"这个是不能靠单次来检测。我们当时解试用一个产品的时候，定义的检测规则是［10秒检测一次，连续5次］。当然可以根据不同的业务级别去定制。这个实际接入中有些阻力：\n1.研发改造成本\n2.研发可能也不知道哪些调用服务的优先级高低，在他看来只要任何服务调用失败对他来说都要关注。所以这个是需要和研发一起沟通确定的。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584835371,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":191052,"user_name":"Helios","can_delete":false,"product_type":"c1","uid":1380758,"ip_address":"","ucode":"BE6B98EE8F0D09","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJrOl63enWXCRxN0SoucliclBme0qrRb19ATrWIOIvibKIz8UAuVgicBMibIVUznerHnjotI4dm6ibODA/132","comment_is_top":false,"comment_ctime":1584720304,"is_pvip":false,"replies":[{"id":"73368","content":"这个问题你可以先思考下，因为接下来的一讲，我们就会详细讲解这部分内容。","user_name":"作者回复","user_name_real":"赵成","uid":"1001380","ctime":1584758512,"ip_address":"","comment_id":191052,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1584720304","product_id":100048201,"comment_content":"这一节感觉类似于监控～<br>可收集的指标有<br>机器性能，比如说磁盘io，cpu占用率，内存使用率，这些在空闲的时候和忙碌的时候对请求的影响肯定不一样，如果是对读写有要求的应用，磁盘读写会影响很大。<br><br>网络带宽，带宽占用率大的时候也会对请求有影响。<br><br>还有就是应用本身的请求返回时间，也是重要滴。<br><br>请教老师个问题，如果收集指标过多的话，会不会加权打分来判断异常程度呢","like_count":0,"discussions":[{"author":{"id":1001380,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/a4/6076bd5f.jpg","nickname":"赵成","note":"","ucode":"934FC7D12479AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488107,"discussion_content":"这个问题你可以先思考下，因为接下来的一讲，我们就会详细讲解这部分内容。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584758512,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":190863,"user_name":"海华(海菜)","can_delete":false,"product_type":"c1","uid":1764432,"ip_address":"","ucode":"2EAC2B01AC4E2F","user_header":"https://static001.geekbang.org/account/avatar/00/1a/ec/50/fc9b338e.jpg","comment_is_top":false,"comment_ctime":1584700482,"is_pvip":false,"replies":[{"id":"73337","content":"是的，就是业务容忍度。<br><br>不过你提到的在快速增长阶段要特殊考虑，确实也是一个需要考虑的维度和因素。","user_name":"作者回复","user_name_real":"赵成","uid":"1001380","ctime":1584709041,"ip_address":"","comment_id":190863,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1584700482","product_id":100048201,"comment_content":"可用性和新功能是矛盾，考虑到这个矛盾关系，可用性目标还跟新功能的需求有关系吧，例如公司&#47;产品快速增长阶段甚至能适当容忍可用性故障","like_count":0,"discussions":[{"author":{"id":1001380,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/a4/6076bd5f.jpg","nickname":"赵成","note":"","ucode":"934FC7D12479AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488069,"discussion_content":"是的，就是业务容忍度。\n\n不过你提到的在快速增长阶段要特殊考虑，确实也是一个需要考虑的维度和因素。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584709041,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":190727,"user_name":"云峰","can_delete":false,"product_type":"c1","uid":1207098,"ip_address":"","ucode":"A5A0487F14C0BE","user_header":"https://static001.geekbang.org/account/avatar/00/12/6b/3a/1ed3634f.jpg","comment_is_top":false,"comment_ctime":1584687605,"is_pvip":true,"replies":[{"id":"73309","content":"最后一句，动态请求要靠经验和历史数据，其实也可以形成一种度量标准，接下来的第03部分，就会介绍到。","user_name":"作者回复","user_name_real":"赵成","uid":"1001380","ctime":1584695618,"ip_address":"","comment_id":190727,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1584687605","product_id":100048201,"comment_content":"请求成功率的判定需要一定分类和标准。请求可以分类，静态请求，动态请求。动态请求还可以按业务模块进行细分，这样故障时初步就可以定位故障位置，影响范围。静态请求比较好判定，排除网络问题，基本可以访问到就可以。动态请求，这个得具体分析，有的请求比较复杂，正常就慢，这块判断就得靠人员经验和历史数据了。","like_count":0,"discussions":[{"author":{"id":1001380,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/a4/6076bd5f.jpg","nickname":"赵成","note":"","ucode":"934FC7D12479AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488047,"discussion_content":"最后一句，动态请求要靠经验和历史数据，其实也可以形成一种度量标准，接下来的第03部分，就会介绍到。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584695618,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":190566,"user_name":"蓝魔丶","can_delete":false,"product_type":"c1","uid":1219438,"ip_address":"","ucode":"2AE4359E263558","user_header":"https://static001.geekbang.org/account/avatar/00/12/9b/6e/edd2da0c.jpg","comment_is_top":false,"comment_ctime":1584669002,"is_pvip":false,"replies":[{"id":"73277","content":"非常好，如果能尝试再分个类就更棒了。再就是，要看下，响应时间、吞吐量、资源占用，他们的主体是谁？","user_name":"作者回复","user_name_real":"赵成","uid":"1001380","ctime":1584675569,"ip_address":"","comment_id":190566,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1584669002","product_id":100048201,"comment_content":"响应时间，吞吐量，系统资源占用","like_count":0,"discussions":[{"author":{"id":1001380,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/a4/6076bd5f.jpg","nickname":"赵成","note":"","ucode":"934FC7D12479AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488005,"discussion_content":"非常好，如果能尝试再分个类就更棒了。再就是，要看下，响应时间、吞吐量、资源占用，他们的主体是谁？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584675569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}