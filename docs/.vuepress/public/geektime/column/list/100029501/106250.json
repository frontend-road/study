{"id":106250,"title":"13ä¸¨ä»€ä¹ˆæ˜¯å­˜å‚¨è¿‡ç¨‹ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­ç”¨å¾—å¤šä¹ˆï¼Ÿ","content":"<p>ä¸Šä¸€èŠ‚æˆ‘ä»‹ç»äº†è§†å›¾ï¼Œå®ƒæ˜¯SQLä¸­çš„ä¸€ä¸ªé‡è¦åº”ç”¨ï¼Œä½¿ç”¨è§†å›¾å¯¹SQLæŸ¥è¯¢è¿›è¡Œå°è£…ï¼Œå¯ä»¥è®©SQLçš„ä»£ç ç»“æ„æ›´æ¸…æ™°ï¼Œè®©ç”¨æˆ·æƒé™ç®¡ç†æ›´å®‰å…¨ã€‚</p><p>ä»Šå¤©æˆ‘æ¥è®²ä¸€ä¸‹SQLçš„å­˜å‚¨è¿‡ç¨‹ï¼Œå®ƒæ˜¯SQLä¸­å¦ä¸€ä¸ªé‡è¦åº”ç”¨ï¼Œå’Œè§†å›¾ä¸€æ ·ï¼Œéƒ½æ˜¯å¯¹SQLä»£ç è¿›è¡Œå°è£…ï¼Œå¯ä»¥åå¤åˆ©ç”¨ã€‚å®ƒå’Œè§†å›¾æœ‰ç€åŒæ ·çš„ä¼˜ç‚¹ï¼Œæ¸…æ™°ã€å®‰å…¨ï¼Œè¿˜å¯ä»¥å‡å°‘ç½‘ç»œä¼ è¾“é‡ã€‚ä¸è¿‡å®ƒå’Œè§†å›¾ä¸åŒï¼Œè§†å›¾æ˜¯è™šæ‹Ÿè¡¨ï¼Œé€šå¸¸ä¸å¯¹åº•å±‚æ•°æ®è¡¨ç›´æ¥æ“ä½œï¼Œè€Œå­˜å‚¨è¿‡ç¨‹æ˜¯ç¨‹åºåŒ–çš„SQLï¼Œå¯ä»¥ç›´æ¥æ“ä½œåº•å±‚æ•°æ®è¡¨ï¼Œç›¸æ¯”äºé¢å‘é›†åˆçš„æ“ä½œæ–¹å¼ï¼Œèƒ½å¤Ÿå®ç°ä¸€äº›æ›´å¤æ‚çš„æ•°æ®å¤„ç†ã€‚å­˜å‚¨è¿‡ç¨‹å¯ä»¥è¯´æ˜¯ç”±SQLè¯­å¥å’Œæµæ§åˆ¶è¯­å¥æ„æˆçš„è¯­å¥é›†åˆï¼Œå®ƒå’Œæˆ‘ä»¬ä¹‹å‰å­¦åˆ°çš„å‡½æ•°ä¸€æ ·ï¼Œå¯ä»¥æ¥æ”¶è¾“å…¥å‚æ•°ï¼Œä¹Ÿå¯ä»¥è¿”å›è¾“å‡ºå‚æ•°ç»™è°ƒç”¨è€…ï¼Œè¿”å›è®¡ç®—ç»“æœã€‚</p><p>ä»Šå¤©æœ‰å…³å­˜å‚¨è¿‡ç¨‹çš„å†…å®¹ï¼Œä½ å°†é‡ç‚¹æŒæ¡ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ol>\n<li>ä»€ä¹ˆæ˜¯å­˜å‚¨è¿‡ç¨‹ï¼Œå¦‚ä½•åˆ›å»ºä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹ï¼Ÿ</li>\n<li>æµæ§åˆ¶è¯­å¥éƒ½æœ‰å“ªäº›ï¼Œå¦‚ä½•ä½¿ç”¨å®ƒä»¬ï¼Ÿ</li>\n<li>å„å¤§å…¬å¸æ˜¯å¦‚ä½•çœ‹å¾…å­˜å‚¨è¿‡ç¨‹çš„ï¼Ÿåœ¨å®é™…å·¥ä½œä¸­ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Ÿ</li>\n</ol><h2>ä»€ä¹ˆæ˜¯å­˜å‚¨è¿‡ç¨‹ï¼Œå¦‚ä½•åˆ›å»ºä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹</h2><p>å­˜å‚¨è¿‡ç¨‹çš„è‹±æ–‡æ˜¯Stored Procedureã€‚å®ƒçš„æ€æƒ³å¾ˆç®€å•ï¼Œå°±æ˜¯SQLè¯­å¥çš„å°è£…ã€‚ä¸€æ—¦å­˜å‚¨è¿‡ç¨‹è¢«åˆ›å»ºå‡ºæ¥ï¼Œä½¿ç”¨å®ƒå°±åƒä½¿ç”¨å‡½æ•°ä¸€æ ·ç®€å•ï¼Œæˆ‘ä»¬ç›´æ¥é€šè¿‡è°ƒç”¨å­˜å‚¨è¿‡ç¨‹åå³å¯ã€‚æˆ‘åœ¨å‰é¢è®²è¿‡ï¼Œå­˜å‚¨è¿‡ç¨‹å®é™…ä¸Šç”±SQLè¯­å¥å’Œæµæ§åˆ¶è¯­å¥å…±åŒç»„æˆã€‚æµæ§åˆ¶è¯­å¥éƒ½æœ‰å“ªäº›å‘¢ï¼Ÿè¿™ä¸ªæˆ‘ç¨åè®²è§£ã€‚</p><!-- [[[read_end]]] --><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹å¦‚ä½•å®šä¹‰ä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹ï¼š</p><pre><code>CREATE PROCEDURE å­˜å‚¨è¿‡ç¨‹åç§°([å‚æ•°åˆ—è¡¨])\nBEGIN\n    éœ€è¦æ‰§è¡Œçš„è¯­å¥\nEND    \n</code></pre><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨CREATE PROCEDUREåˆ›å»ºä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹ï¼Œåé¢æ˜¯å­˜å‚¨è¿‡ç¨‹çš„åç§°ï¼Œä»¥åŠè¿‡ç¨‹æ‰€å¸¦çš„å‚æ•°ï¼Œå¯ä»¥åŒ…æ‹¬è¾“å…¥å‚æ•°å’Œè¾“å‡ºå‚æ•°ã€‚æœ€åç”±BEGINå’ŒENDæ¥å®šä¹‰æˆ‘ä»¬æ‰€è¦æ‰§è¡Œçš„è¯­å¥å—ã€‚</p><p>å’Œè§†å›¾ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥åˆ é™¤å·²ç»åˆ›å»ºçš„å­˜å‚¨è¿‡ç¨‹ï¼Œä½¿ç”¨çš„æ˜¯DROP PROCEDUREã€‚å¦‚æœè¦æ›´æ–°å­˜å‚¨è¿‡ç¨‹ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ALTER PROCEDUREã€‚</p><p>è®²å®Œäº†å¦‚ä½•åˆ›å»ºï¼Œæ›´æ–°å’Œåˆ é™¤ä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸‹å¦‚ä½•å®ç°ä¸€ä¸ªç®€å•çš„å­˜å‚¨è¿‡ç¨‹ã€‚æ¯”å¦‚æˆ‘æƒ³åšä¸€ä¸ªç´¯åŠ è¿ç®—ï¼Œè®¡ç®—1+2+â€¦+nç­‰äºå¤šå°‘ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å‚æ•°næ¥è¡¨ç¤ºæƒ³è¦ç´¯åŠ çš„ä¸ªæ•°ï¼Œé‚£ä¹ˆå¦‚ä½•ç”¨å­˜å‚¨è¿‡ç¨‹å®ç°è¿™ä¸€ç›®çš„å‘¢ï¼Ÿè¿™é‡Œæˆ‘åšä¸€ä¸ªadd_numçš„å­˜å‚¨è¿‡ç¨‹ï¼Œå…·ä½“çš„ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>CREATE PROCEDURE `add_num`(IN n INT)\nBEGIN\n       DECLARE i INT;\n       DECLARE sum INT;\n       \n       SET i = 1;\n       SET sum = 0;\n       WHILE i &lt;= n DO\n              SET sum = sum + i;\n              SET i = i +1;\n       END WHILE;\n       SELECT sum;\nEND\n</code></pre><p>å½“æˆ‘ä»¬éœ€è¦å†æ¬¡ä½¿ç”¨è¿™ä¸ªå­˜å‚¨è¿‡ç¨‹çš„æ—¶å€™ï¼Œç›´æ¥ä½¿ç”¨ <code>CALL add_num(50);</code>å³å¯ã€‚è¿™é‡Œæˆ‘ä¼ å…¥çš„å‚æ•°ä¸º50ï¼Œä¹Ÿå°±æ˜¯ç»Ÿè®¡1+2+â€¦+50çš„ç§¯ç´¯ä¹‹å’Œï¼ŒæŸ¥è¯¢ç»“æœä¸ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/e4/1e/e4e29b71160980a9208c8da4dc2a6f1e.png?wh=220*121\" alt=\"\"><br>\nè¿™å°±æ˜¯ä¸€ä¸ªç®€å•çš„å­˜å‚¨è¿‡ç¨‹ï¼Œé™¤äº†ç†è§£1+2+â€¦+nçš„å®ç°è¿‡ç¨‹ï¼Œè¿˜æœ‰ä¸¤ç‚¹ä½ éœ€è¦ç†è§£ï¼Œä¸€ä¸ªæ˜¯DELIMITERå®šä¹‰è¯­å¥çš„ç»“æŸç¬¦ï¼Œå¦ä¸€ä¸ªæ˜¯å­˜å‚¨è¿‡ç¨‹çš„ä¸‰ç§å‚æ•°ç±»å‹ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹DELIMITERçš„ä½œç”¨ã€‚å¦‚æœä½ ä½¿ç”¨Navicatè¿™ä¸ªå·¥å…·æ¥ç®¡ç†MySQLæ‰§è¡Œå­˜å‚¨è¿‡ç¨‹ï¼Œé‚£ä¹ˆç›´æ¥æ‰§è¡Œä¸Šé¢è¿™æ®µä»£ç å°±å¯ä»¥äº†ã€‚å¦‚æœç”¨çš„æ˜¯MySQLï¼Œä½ è¿˜éœ€è¦ç”¨DELIMITERæ¥ä¸´æ—¶å®šä¹‰æ–°çš„ç»“æŸç¬¦ã€‚å› ä¸ºé»˜è®¤æƒ…å†µä¸‹SQLé‡‡ç”¨ï¼ˆï¼›ï¼‰ä½œä¸ºç»“æŸç¬¦ï¼Œè¿™æ ·å½“å­˜å‚¨è¿‡ç¨‹ä¸­çš„æ¯ä¸€å¥SQLç»“æŸä¹‹åï¼Œé‡‡ç”¨ï¼ˆï¼›ï¼‰ä½œä¸ºç»“æŸç¬¦ï¼Œå°±ç›¸å½“äºå‘Šè¯‰SQLå¯ä»¥æ‰§è¡Œè¿™ä¸€å¥äº†ã€‚ä½†æ˜¯å­˜å‚¨è¿‡ç¨‹æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›SQLé€æ¡æ‰§è¡Œï¼Œè€Œæ˜¯é‡‡ç”¨å­˜å‚¨è¿‡ç¨‹æ•´æ®µæ‰§è¡Œçš„æ–¹å¼ï¼Œå› æ­¤æˆ‘ä»¬å°±éœ€è¦ä¸´æ—¶å®šä¹‰æ–°çš„DELIMITERï¼Œæ–°çš„ç»“æŸç¬¦å¯ä»¥ç”¨ï¼ˆ//ï¼‰æˆ–è€…ï¼ˆ$$ï¼‰ã€‚å¦‚æœä½ ç”¨çš„æ˜¯MySQLï¼Œé‚£ä¹ˆä¸Šé¢è¿™æ®µä»£ç ï¼Œåº”è¯¥å†™æˆä¸‹é¢è¿™æ ·ï¼š</p><pre><code>DELIMITER //\nCREATE PROCEDURE `add_num`(IN n INT)\nBEGIN\n       DECLARE i INT;\n       DECLARE sum INT;\n       \n       SET i = 1;\n       SET sum = 0;\n       WHILE i &lt;= n DO\n              SET sum = sum + i;\n              SET i = i +1;\n       END WHILE;\n       SELECT sum;\nEND //\nDELIMITER ;\n</code></pre><p>é¦–å…ˆæˆ‘ç”¨ï¼ˆ//ï¼‰ä½œä¸ºç»“æŸç¬¦ï¼Œåˆåœ¨æ•´ä¸ªå­˜å‚¨è¿‡ç¨‹ç»“æŸåé‡‡ç”¨äº†ï¼ˆ//ï¼‰ä½œä¸ºç»“æŸç¬¦å·ï¼Œå‘Šè¯‰SQLå¯ä»¥æ‰§è¡Œäº†ï¼Œç„¶åå†å°†ç»“æŸç¬¦è¿˜åŸæˆé»˜è®¤çš„ï¼ˆ;ï¼‰ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ ç”¨çš„æ˜¯Navicatå·¥å…·ï¼Œé‚£ä¹ˆåœ¨ç¼–å†™å­˜å‚¨è¿‡ç¨‹çš„æ—¶å€™ï¼ŒNavicatä¼šè‡ªåŠ¨è®¾ç½®DELIMITERä¸ºå…¶ä»–ç¬¦å·ï¼Œæˆ‘ä»¬ä¸éœ€è¦å†è¿›è¡ŒDELIMITERçš„æ“ä½œã€‚</p><p>æˆ‘ä»¬å†æ¥çœ‹ä¸‹å­˜å‚¨è¿‡ç¨‹çš„3ç§å‚æ•°ç±»å‹ã€‚åœ¨åˆšæ‰çš„å­˜å‚¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†INç±»å‹çš„å‚æ•°ï¼Œå¦å¤–è¿˜æœ‰OUTç±»å‹å’ŒINOUTç±»å‹ï¼Œä½œç”¨å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/8c/29/8c12ca959dbc6cfe1d62459481454429.png?wh=1016*323\" alt=\"\"><br>\nINå’ŒOUTçš„ç»“åˆï¼Œæ—¢ç”¨äºå­˜å‚¨è¿‡ç¨‹çš„ä¼ å…¥å‚æ•°ï¼ŒåŒæ—¶åˆå¯ä»¥æŠŠè®¡ç®—ç»“æœæ”¾åˆ°å‚æ•°ä¸­ï¼Œè°ƒç”¨è€…å¯ä»¥å¾—åˆ°è¿”å›å€¼ã€‚</p><p>ä½ èƒ½çœ‹åˆ°ï¼ŒINå‚æ•°å¿…é¡»åœ¨è°ƒç”¨å­˜å‚¨è¿‡ç¨‹æ—¶æŒ‡å®šï¼Œè€Œåœ¨å­˜å‚¨è¿‡ç¨‹ä¸­ä¿®æ”¹è¯¥å‚æ•°çš„å€¼ä¸èƒ½è¢«è¿”å›ã€‚è€ŒOUTå‚æ•°å’ŒINOUTå‚æ•°å¯ä»¥åœ¨å­˜å‚¨è¿‡ç¨‹ä¸­è¢«æ”¹å˜ï¼Œå¹¶å¯è¿”å›ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œè¿™é‡Œä¼šç”¨åˆ°æˆ‘ä»¬ä¹‹å‰è®²è¿‡çš„ç‹è€…è£è€€çš„è‹±é›„æ•°æ®è¡¨herosã€‚å‡è®¾æˆ‘æƒ³åˆ›å»ºä¸€ä¸ªå­˜å‚¨ç±»å‹get_hero_scoresï¼Œç”¨æ¥æŸ¥è¯¢æŸä¸€ç±»å‹è‹±é›„ä¸­çš„æœ€å¤§çš„æœ€å¤§ç”Ÿå‘½å€¼ï¼Œæœ€å°çš„æœ€å¤§é­”æ³•å€¼ï¼Œä»¥åŠå¹³å‡æœ€å¤§æ”»å‡»å€¼ï¼Œé‚£ä¹ˆè¯¥æ€ä¹ˆå†™å‘¢ï¼Ÿ</p><pre><code>CREATE PROCEDURE `get_hero_scores`(\n       OUT max_max_hp FLOAT,\n       OUT min_max_mp FLOAT,\n       OUT avg_max_attack FLOAT,  \n       s VARCHAR(255)\n       )\nBEGIN\n       SELECT MAX(hp_max), MIN(mp_max), AVG(attack_max) FROM heros WHERE role_main = s INTO max_max_hp, min_max_mp, avg_max_attack;\nEND\n</code></pre><p>ä½ èƒ½çœ‹åˆ°æˆ‘å®šä¹‰äº†4ä¸ªå‚æ•°ç±»å‹ï¼Œå…¶ä¸­3ä¸ªä¸ºOUTç±»å‹ï¼Œåˆ†åˆ«ä¸ºmax_max_hpã€min_max_mpå’Œavg_max_attackï¼Œå¦ä¸€ä¸ªå‚æ•°sä¸ºINç±»å‹ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬ä»herosæ•°æ®è¡¨ä¸­ç­›é€‰ä¸»è¦è‹±é›„å®šä½ä¸ºsçš„è‹±é›„æ•°æ®ï¼Œå³ç­›é€‰æ¡ä»¶ä¸ºrole_main=sï¼Œæå–è¿™äº›æ•°æ®ä¸­çš„æœ€å¤§çš„æœ€å¤§ç”Ÿå‘½å€¼ï¼Œæœ€å°çš„æœ€å¤§é­”æ³•å€¼ï¼Œä»¥åŠå¹³å‡æœ€å¤§æ”»å‡»å€¼ï¼Œåˆ†åˆ«èµ‹å€¼ç»™å˜é‡max_max_hpã€min_max_mpå’Œavg_max_attackã€‚</p><p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œä½¿ç”¨ä¸‹é¢è¿™æ®µä»£ç å³å¯ï¼š</p><pre><code>CALL get_hero_scores(@max_max_hp, @min_max_mp, @avg_max_attack, 'æˆ˜å£«');\nSELECT @max_max_hp, @min_max_mp, @avg_max_attack;\n</code></pre><p>è¿è¡Œç»“æœï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/7f/e9/7f059f3cb9c345530c67db42af5d04e9.png?wh=825*117\" alt=\"\"></p><h2>æµæ§åˆ¶è¯­å¥</h2><p>æµæ§åˆ¶è¯­å¥æ˜¯ç”¨æ¥åšæµç¨‹æ§åˆ¶çš„ï¼Œæˆ‘åˆšæ‰è®²äº†ä¸¤ä¸ªç®€å•çš„å­˜å‚¨è¿‡ç¨‹çš„ä¾‹å­ï¼Œä¸€ä¸ªæ˜¯1+2+â€¦+nçš„ç»“æœè®¡ç®—ï¼Œä¸€ä¸ªæ˜¯ç‹è€…è£è€€çš„æ•°æ®æŸ¥è¯¢ï¼Œä½ èƒ½çœ‹åˆ°è¿™ä¸¤ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ç”¨åˆ°äº†ä¸‹é¢çš„æµæ§åˆ¶è¯­å¥ï¼š</p><ol>\n<li>BEGINâ€¦ENDï¼šBEGINâ€¦ENDä¸­é—´åŒ…å«äº†å¤šä¸ªè¯­å¥ï¼Œæ¯ä¸ªè¯­å¥éƒ½ä»¥ï¼ˆ;ï¼‰å·ä¸ºç»“æŸç¬¦ã€‚</li>\n<li>DECLAREï¼šDECLAREç”¨æ¥å£°æ˜å˜é‡ï¼Œä½¿ç”¨çš„ä½ç½®åœ¨äºBEGINâ€¦ENDè¯­å¥ä¸­é—´ï¼Œè€Œä¸”éœ€è¦åœ¨å…¶ä»–è¯­å¥ä½¿ç”¨ä¹‹å‰è¿›è¡Œå˜é‡çš„å£°æ˜ã€‚</li>\n<li>SETï¼šèµ‹å€¼è¯­å¥ï¼Œç”¨äºå¯¹å˜é‡è¿›è¡Œèµ‹å€¼ã€‚</li>\n<li>SELECTâ€¦INTOï¼šæŠŠä»æ•°æ®è¡¨ä¸­æŸ¥è¯¢çš„ç»“æœå­˜æ”¾åˆ°å˜é‡ä¸­ï¼Œä¹Ÿå°±æ˜¯ä¸ºå˜é‡èµ‹å€¼ã€‚</li>\n</ol><p>é™¤äº†ä¸Šé¢è¿™äº›ç”¨åˆ°çš„æµæ§åˆ¶è¯­å¥ä»¥å¤–ï¼Œè¿˜æœ‰ä¸€äº›å¸¸ç”¨çš„æµæ§åˆ¶è¯­å¥ï¼š</p><p>1.IFâ€¦THENâ€¦ENDIFï¼šæ¡ä»¶åˆ¤æ–­è¯­å¥ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨IFâ€¦THENâ€¦ENDIFä¸­ä½¿ç”¨ELSEå’ŒELSEIFæ¥è¿›è¡Œæ¡ä»¶åˆ¤æ–­ã€‚<br>\n2.CASEï¼šCASEè¯­å¥ç”¨äºå¤šæ¡ä»¶çš„åˆ†æ”¯åˆ¤æ–­ï¼Œä½¿ç”¨çš„è¯­æ³•æ˜¯ä¸‹é¢è¿™æ ·çš„ã€‚</p><pre><code>CASE \n\tWHEN expression1 THEN ...\n\tWHEN expression2 THEN ...\n\t...\n    ELSE \n    --ELSEè¯­å¥å¯ä»¥åŠ ï¼Œä¹Ÿå¯ä»¥ä¸åŠ ã€‚åŠ çš„è¯ä»£è¡¨çš„æ‰€æœ‰æ¡ä»¶éƒ½ä¸æ»¡è¶³æ—¶é‡‡ç”¨çš„æ–¹å¼ã€‚\nEND\n</code></pre><p>3.LOOPã€LEAVEå’ŒITERATEï¼šLOOPæ˜¯å¾ªç¯è¯­å¥ï¼Œä½¿ç”¨LEAVEå¯ä»¥è·³å‡ºå¾ªç¯ï¼Œä½¿ç”¨ITERATEåˆ™å¯ä»¥è¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯ã€‚å¦‚æœä½ æœ‰é¢å‘è¿‡ç¨‹çš„ç¼–ç¨‹è¯­è¨€çš„ä½¿ç”¨ç»éªŒï¼Œä½ å¯ä»¥æŠŠLEAVEç†è§£ä¸ºBREAKï¼ŒæŠŠITERATEç†è§£ä¸ºCONTINUEã€‚<br>\n4.REPEATâ€¦UNTILâ€¦END REPEATï¼šè¿™æ˜¯ä¸€ä¸ªå¾ªç¯è¯­å¥ï¼Œé¦–å…ˆä¼šæ‰§è¡Œä¸€æ¬¡å¾ªç¯ï¼Œç„¶ååœ¨UNTILä¸­è¿›è¡Œè¡¨è¾¾å¼çš„åˆ¤æ–­ï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶å°±é€€å‡ºï¼Œå³END REPEATï¼›å¦‚æœæ¡ä»¶ä¸æ»¡è¶³ï¼Œåˆ™ä¼šå°±ç»§ç»­æ‰§è¡Œå¾ªç¯ï¼Œç›´åˆ°æ»¡è¶³é€€å‡ºæ¡ä»¶ä¸ºæ­¢ã€‚<br>\n5.WHILEâ€¦DOâ€¦END WHILEï¼šè¿™ä¹Ÿæ˜¯å¾ªç¯è¯­å¥ï¼Œå’ŒREPEATå¾ªç¯ä¸åŒçš„æ˜¯ï¼Œè¿™ä¸ªè¯­å¥éœ€è¦å…ˆè¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶å°±è¿›è¡Œå¾ªç¯ï¼Œå¦‚æœä¸æ»¡è¶³æ¡ä»¶å°±é€€å‡ºå¾ªç¯ã€‚</p><p>æˆ‘ä»¬ä¹‹å‰è¯´è¿‡SQLæ˜¯å£°æ˜å‹è¯­è¨€ï¼Œä½¿ç”¨SQLå°±åƒåœ¨ä½¿ç”¨è‹±è¯­ï¼Œç®€å•ç›´æ¥ã€‚ä»Šå¤©è®²çš„å­˜å‚¨è¿‡ç¨‹ï¼Œå°¤å…¶æ˜¯åœ¨å­˜å‚¨è¿‡ç¨‹ä¸­ä½¿ç”¨åˆ°çš„æµæ§åˆ¶è¯­å¥ï¼Œå±äºè¿‡ç¨‹æ€§è¯­è¨€ï¼Œç±»ä¼¼äºC++è¯­è¨€ä¸­å‡½æ•°ï¼Œè¿™äº›è¯­å¥å¯ä»¥å¸®æˆ‘ä»¬è§£å†³å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ã€‚</p><h2>å…³äºå­˜å‚¨è¿‡ç¨‹ä½¿ç”¨çš„äº‰è®®</h2><p>å°½ç®¡å­˜å‚¨è¿‡ç¨‹æœ‰è¯¸å¤šä¼˜ç‚¹ï¼Œä½†æ˜¯å¯¹äºå­˜å‚¨è¿‡ç¨‹çš„ä½¿ç”¨ï¼Œä¸€ç›´éƒ½å­˜åœ¨ç€å¾ˆå¤šäº‰è®®ï¼Œæ¯”å¦‚æœ‰äº›å…¬å¸å¯¹äºå¤§å‹é¡¹ç›®è¦æ±‚ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œè€Œæœ‰äº›å…¬å¸åœ¨æ‰‹å†Œä¸­æ˜ç¡®ç¦æ­¢ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œä¸ºä»€ä¹ˆè¿™äº›å…¬å¸å¯¹å­˜å‚¨è¿‡ç¨‹çš„ä½¿ç”¨éœ€æ±‚å·®åˆ«è¿™ä¹ˆå¤§å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å¾—ä»å­˜å‚¨è¿‡ç¨‹çš„ç‰¹ç‚¹æ¥æ‰¾ç­”æ¡ˆã€‚</p><p>ä½ èƒ½çœ‹åˆ°å­˜å‚¨è¿‡ç¨‹æœ‰å¾ˆå¤šå¥½å¤„ã€‚</p><p>é¦–å…ˆå­˜å‚¨è¿‡ç¨‹å¯ä»¥ä¸€æ¬¡ç¼–è¯‘å¤šæ¬¡ä½¿ç”¨ã€‚å­˜å‚¨è¿‡ç¨‹åªåœ¨åˆ›é€ æ—¶è¿›è¡Œç¼–è¯‘ï¼Œä¹‹åçš„ä½¿ç”¨éƒ½ä¸éœ€è¦é‡æ–°ç¼–è¯‘ï¼Œè¿™å°±æå‡äº†SQLçš„æ‰§è¡Œæ•ˆç‡ã€‚å…¶æ¬¡å®ƒå¯ä»¥å‡å°‘å¼€å‘å·¥ä½œé‡ã€‚å°†ä»£ç å°è£…æˆæ¨¡å—ï¼Œå®é™…ä¸Šæ˜¯ç¼–ç¨‹çš„æ ¸å¿ƒæ€æƒ³ä¹‹ä¸€ï¼Œè¿™æ ·å¯ä»¥æŠŠå¤æ‚çš„é—®é¢˜æ‹†è§£æˆä¸åŒçš„æ¨¡å—ï¼Œç„¶åæ¨¡å—ä¹‹é—´å¯ä»¥é‡å¤ä½¿ç”¨ï¼Œåœ¨å‡å°‘å¼€å‘å·¥ä½œé‡çš„åŒæ—¶ï¼Œè¿˜èƒ½ä¿è¯ä»£ç çš„ç»“æ„æ¸…æ™°ã€‚è¿˜æœ‰ä¸€ç‚¹ï¼Œå­˜å‚¨è¿‡ç¨‹çš„å®‰å…¨æ€§å¼ºï¼Œæˆ‘ä»¬åœ¨è®¾å®šå­˜å‚¨è¿‡ç¨‹çš„æ—¶å€™å¯ä»¥è®¾ç½®å¯¹ç”¨æˆ·çš„ä½¿ç”¨æƒé™ï¼Œè¿™æ ·å°±å’Œè§†å›¾ä¸€æ ·å…·æœ‰è¾ƒå¼ºçš„å®‰å…¨æ€§ã€‚æœ€åå®ƒå¯ä»¥å‡å°‘ç½‘ç»œä¼ è¾“é‡ï¼Œå› ä¸ºä»£ç å°è£…åˆ°å­˜å‚¨è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡ä½¿ç”¨åªéœ€è¦è°ƒç”¨å­˜å‚¨è¿‡ç¨‹å³å¯ï¼Œè¿™æ ·å°±å‡å°‘äº†ç½‘ç»œä¼ è¾“é‡ã€‚åŒæ—¶åœ¨è¿›è¡Œç›¸å¯¹å¤æ‚çš„æ•°æ®åº“æ“ä½œæ—¶ï¼ŒåŸæœ¬éœ€è¦ä½¿ç”¨ä¸€æ¡ä¸€æ¡çš„SQLè¯­å¥ï¼Œå¯èƒ½è¦è¿æ¥å¤šæ¬¡æ•°æ®åº“æ‰èƒ½å®Œæˆçš„æ“ä½œï¼Œç°åœ¨å˜æˆäº†ä¸€æ¬¡å­˜å‚¨è¿‡ç¨‹ï¼Œåªéœ€è¦è¿æ¥ä¸€æ¬¡å³å¯ã€‚</p><p>åŸºäºä¸Šé¢è¿™äº›ä¼˜ç‚¹ï¼Œä¸å°‘å¤§å…¬å¸éƒ½è¦æ±‚å¤§å‹é¡¹ç›®ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œæ¯”å¦‚å¾®è½¯ã€IBMç­‰å…¬å¸ã€‚ä½†æ˜¯å›½å†…çš„é˜¿é‡Œå¹¶ä¸æ¨èå¼€å‘äººå‘˜ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>å­˜å‚¨è¿‡ç¨‹è™½ç„¶æœ‰è¯¸å¦‚ä¸Šé¢çš„å¥½å¤„ï¼Œä½†ç¼ºç‚¹ä¹Ÿæ˜¯å¾ˆæ˜æ˜¾çš„ã€‚</p><p>å®ƒçš„å¯ç§»æ¤æ€§å·®ï¼Œå­˜å‚¨è¿‡ç¨‹ä¸èƒ½è·¨æ•°æ®åº“ç§»æ¤ï¼Œæ¯”å¦‚åœ¨MySQLã€Oracleå’ŒSQL Serveré‡Œç¼–å†™çš„å­˜å‚¨è¿‡ç¨‹ï¼Œåœ¨æ¢æˆå…¶ä»–æ•°æ®åº“æ—¶éƒ½éœ€è¦é‡æ–°ç¼–å†™ã€‚</p><p>å…¶æ¬¡è°ƒè¯•å›°éš¾ï¼Œåªæœ‰å°‘æ•°DBMSæ”¯æŒå­˜å‚¨è¿‡ç¨‹çš„è°ƒè¯•ã€‚å¯¹äºå¤æ‚çš„å­˜å‚¨è¿‡ç¨‹æ¥è¯´ï¼Œå¼€å‘å’Œç»´æŠ¤éƒ½ä¸å®¹æ˜“ã€‚</p><p>æ­¤å¤–ï¼Œå­˜å‚¨è¿‡ç¨‹çš„ç‰ˆæœ¬ç®¡ç†ä¹Ÿå¾ˆå›°éš¾ï¼Œæ¯”å¦‚æ•°æ®è¡¨ç´¢å¼•å‘ç”Ÿå˜åŒ–äº†ï¼Œå¯èƒ½ä¼šå¯¼è‡´å­˜å‚¨è¿‡ç¨‹å¤±æ•ˆã€‚æˆ‘ä»¬åœ¨å¼€å‘è½¯ä»¶çš„æ—¶å€™å¾€å¾€éœ€è¦è¿›è¡Œç‰ˆæœ¬ç®¡ç†ï¼Œä½†æ˜¯å­˜å‚¨è¿‡ç¨‹æœ¬èº«æ²¡æœ‰ç‰ˆæœ¬æ§åˆ¶ï¼Œç‰ˆæœ¬è¿­ä»£æ›´æ–°çš„æ—¶å€™å¾ˆéº»çƒ¦ã€‚</p><p>æœ€åå®ƒä¸é€‚åˆé«˜å¹¶å‘çš„åœºæ™¯ï¼Œé«˜å¹¶å‘çš„åœºæ™¯éœ€è¦å‡å°‘æ•°æ®åº“çš„å‹åŠ›ï¼Œæœ‰æ—¶æ•°æ®åº“ä¼šé‡‡ç”¨åˆ†åº“åˆ†è¡¨çš„æ–¹å¼ï¼Œè€Œä¸”å¯¹å¯æ‰©å±•æ€§è¦æ±‚å¾ˆé«˜ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå­˜å‚¨è¿‡ç¨‹ä¼šå˜å¾—éš¾ä»¥ç»´æŠ¤ï¼Œå¢åŠ æ•°æ®åº“çš„å‹åŠ›ï¼Œæ˜¾ç„¶å°±ä¸é€‚ç”¨äº†ã€‚</p><p>äº†è§£äº†å­˜å‚¨è¿‡ç¨‹çš„ä¼˜ç¼ºç‚¹ä¹‹åï¼Œæˆ‘æƒ³è¯´çš„æ˜¯ï¼Œå­˜å‚¨è¿‡ç¨‹æ—¢æ–¹ä¾¿ï¼Œåˆæœ‰å±€é™æ€§ã€‚å°½ç®¡ä¸åŒçš„å…¬å¸å¯¹å­˜å‚¨è¿‡ç¨‹çš„æ€åº¦ä¸ä¸€ï¼Œä½†æ˜¯å¯¹äºæˆ‘ä»¬å¼€å‘äººå‘˜æ¥è¯´ï¼Œä¸è®ºæ€æ ·ï¼ŒæŒæ¡å­˜å‚¨è¿‡ç¨‹éƒ½æ˜¯å¿…å¤‡çš„æŠ€èƒ½ä¹‹ä¸€ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/54/9f/54a0d3b0c0e5336c1da6fc84c909a49f.jpg?wh=2376*2313\" alt=\"\"><br>\næœ€åæˆ‘ä»¬åšä¸€ä¸ªå°ç»ƒä¹ å§ã€‚é’ˆå¯¹ç‹è€…è£è€€çš„è‹±é›„æ•°æ®è¡¨herosè¡¨ï¼Œè¯·ç¼–å†™å­˜å‚¨è¿‡ç¨‹get_sum_scoreï¼Œç”¨æ¥å¾—åˆ°æŸä¸€ç±»å‹è‹±é›„ï¼ˆä¸»è¦å®šä½ä¸ºæŸä¸€ç±»å‹å³å¯ï¼‰çš„æœ€å¤§ç”Ÿå‘½å€¼çš„æ€»å’Œã€‚</p><p>æ¬¢è¿ä½ åœ¨è¯„è®ºåŒºå†™ä¸‹ä½ çš„ç­”æ¡ˆï¼Œä¹Ÿæ¬¢è¿æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–è€…åŒäº‹ï¼Œä¸€èµ·äº¤æµä¸€ä¸‹ã€‚</p>","neighbors":{"left":{"article_title":"12ä¸¨è§†å›¾åœ¨SQLä¸­çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Œå®ƒæ˜¯æ€æ ·å·¥ä½œçš„ï¼Ÿ","id":105643},"right":{"article_title":"14ä¸¨ä»€ä¹ˆæ˜¯äº‹åŠ¡å¤„ç†ï¼Œå¦‚ä½•ä½¿ç”¨COMMITå’ŒROLLBACKè¿›è¡Œæ“ä½œï¼Ÿ","id":107143}},"comments":[{"had_liked":false,"id":112254,"user_name":"æé±¼çš„æ¬ç –å¥‡","can_delete":false,"product_type":"c1","uid":1021539,"ip_address":"","ucode":"2FD194C4DA26E5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/96/63/7eb32c9b.jpg","comment_is_top":false,"comment_ctime":1562691411,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"147591579475","product_id":100029501,"comment_content":"DELIMITER &#47;&#47;<br>create procedure `get_sum_score`(IN roleMain VARCHAR(255),OUT total FLOAT)<br>BEGIN<br>select sum(hp_max) as sum_hp_max from heros where role_main=roleMain INTO total;<br>END&#47;&#47;<br>DELIMITER ;<br><br>call get_sum_score(&#39;å¦å…‹&#39;,@total);<br>select @total","like_count":34},{"had_liked":false,"id":113168,"user_name":"æ¯›è±†","can_delete":false,"product_type":"c1","uid":1547185,"ip_address":"","ucode":"7D838CA50D044D","user_header":"https://static001.geekbang.org/account/avatar/00/17/9b/b1/74b04ee6.jpg","comment_is_top":false,"comment_ctime":1562906690,"is_pvip":false,"replies":[{"id":"41206","content":"å¯ä»¥ è€ƒè™‘åœ¨è¿›é˜¶ç¯‡åŠ ä¸€ç¯‡å…³äºå­˜å‚¨è¿‡ç¨‹çš„ä½¿ç”¨ã€‚è¿™ä¸ªåœ¨å·¥ä½œä¸­è¿˜æ¯”è¾ƒå¸¸ç”¨","user_name":"ä½œè€…å›å¤","comment_id":113168,"uid":"1306094","ip_address":"","utype":1,"ctime":1562920012,"user_name_real":"cy"}],"discussion_count":2,"race_medal":0,"score":"61692448834","product_id":100029501,"comment_content":"å­˜å‚¨è¿‡ç¨‹å¾ˆé‡è¦ï¼Œå¯ä¸å¯ä»¥è¯¦ç»†è®²è®²","like_count":14,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458089,"discussion_content":"å¯ä»¥ è€ƒè™‘åœ¨è¿›é˜¶ç¯‡åŠ ä¸€ç¯‡å…³äºå­˜å‚¨è¿‡ç¨‹çš„ä½¿ç”¨ã€‚è¿™ä¸ªåœ¨å·¥ä½œä¸­è¿˜æ¯”è¾ƒå¸¸ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562920012,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1508654,"avatar":"https://static001.geekbang.org/account/avatar/00/17/05/2e/5a6b6b6e.jpg","nickname":"Fortune","note":"","ucode":"6B9465AC996523","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299744,"discussion_content":"è¿›é˜¶ç¯‡ä¹Ÿåœ¨è¿™ä¸ªè¯¾ç¨‹å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597804596,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144478,"user_name":"åŠç“¶é†‹","can_delete":false,"product_type":"c1","uid":1282746,"ip_address":"","ucode":"8C898E244D0417","user_header":"https://static001.geekbang.org/account/avatar/00/13/92/ba/9833f06f.jpg","comment_is_top":false,"comment_ctime":1571933537,"is_pvip":true,"replies":[{"id":"63770","content":"Good Job å¯¹çš„ ä¸æ˜¯å•å¼•å·","user_name":"ä½œè€…å›å¤","comment_id":144478,"uid":"1306094","ip_address":"","utype":1,"ctime":1577540916,"user_name_real":"cy"}],"discussion_count":6,"race_medal":0,"score":"57406508385","product_id":100029501,"comment_content":"æ³¨æ„ï¼šCREATE PROCEDURE `get_sum_score`è¿™é‡Œä¸æ˜¯å•å¼•å·ï¼Œæ˜¯` `å·å“¦~<br># ç¼–å†™å­˜å‚¨è¿‡ç¨‹get_sum_scoreï¼Œç”¨æ¥å¾—åˆ°æŸä¸€ç±»å‹è‹±é›„çš„æœ€å¤§ç”Ÿå‘½å€¼çš„æ€»å’Œ<br><br>CREATE PROCEDURE `get_sum_score`(<br>        OUT sum_max_hp FLOAT,<br>        IN s VARCHAR(255)<br>    )<br>BEGIN<br>    SELECT<br>        sum(hp_max)<br>    FROM heros <br>    WHERE role_main = s<br>    INTO sum_max_hp;<br>END<br><br># è°ƒç”¨å­˜å‚¨è¿‡ç¨‹<br>CALL get_sum_score(@sum_max_hp,&#39;æˆ˜å£«&#39;)<br>SELECT @sum_max_hp;","like_count":14,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471964,"discussion_content":"Good Job å¯¹çš„ ä¸æ˜¯å•å¼•å·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577540916,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1868570,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/83/1a/f9d9225f.jpg","nickname":"æ¬§é˜³å•Š","note":"","ucode":"CF1D0F0802713B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":188017,"discussion_content":"å¾ˆæ„Ÿè°¢è¿™ä¸ªæé†’","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1582788347,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1170379,"avatar":"https://static001.geekbang.org/account/avatar/00/11/db/cb/58f4b5d2.jpg","nickname":"èŒé¢èµµå…ˆç”Ÿ","note":"","ucode":"CC51AB1C925E13","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":171936,"discussion_content":"CALL get_sum_score(@sum_max_hp,&#39;æˆ˜å£«&#39;);","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1581760285,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1330305,"avatar":"https://static001.geekbang.org/account/avatar/00/14/4c/81/34398512.jpg","nickname":"PCC","note":"","ucode":"BA27B7737E232B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1170379,"avatar":"https://static001.geekbang.org/account/avatar/00/11/db/cb/58f4b5d2.jpg","nickname":"èŒé¢èµµå…ˆç”Ÿ","note":"","ucode":"CC51AB1C925E13","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561148,"discussion_content":"ç¬¬ä¸€å¥CALLçš„æœ€åä¹Ÿéœ€è¦åŠ ; å·ï¼Œæˆ‘å°±è¯´æˆ‘è°ƒè¯•äº†åŠå¤©ï¼Œä¸ºä»€ä¹ˆä¸€ç›´æŠ¥è¯­æ³•é”™è¯¯ï¼å¤šè°¢æŒ‡å‡ºï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649561672,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":171936,"ip_address":""},"score":561148,"extra":""}]},{"author":{"id":1172090,"avatar":"https://static001.geekbang.org/account/avatar/00/11/e2/7a/38a27e47.jpg","nickname":"è“¦ç„¶å›é¦–","note":"","ucode":"B17658DCFE6402","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348361,"discussion_content":"åªæµ‹è¯•è¿‡MYSQL8.0","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612525198,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1172090,"avatar":"https://static001.geekbang.org/account/avatar/00/11/e2/7a/38a27e47.jpg","nickname":"è“¦ç„¶å›é¦–","note":"","ucode":"B17658DCFE6402","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348360,"discussion_content":"ä¸åŠ ä¹Ÿå¯ä»¥ï¼Œç›´æ¥å†™åç§°ï¼Œä¹Ÿèƒ½åˆ›å»ºæˆåŠŸ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612525181,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155824,"user_name":"ç•ªèŒ„","can_delete":false,"product_type":"c1","uid":1583667,"ip_address":"","ucode":"7354EEB2D8A43D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTICAILuSqtnAfl1zcgRWIULia2nbjzlybTEQJUMT68KPj80BicwQyibAK3Icxp4qwC03LqrtvfX0fbZg/132","comment_is_top":false,"comment_ctime":1574761589,"is_pvip":false,"replies":[{"id":"62616","content":"CALL get_hero_scores(@max_max_hp, @min_max_mp, @avg_max_attack, &#39;æˆ˜å£«&#39;); è¿™é‡Œæ˜¯æŠŠç»“æœæ”¾åˆ°max_max_hp, min_max_mp, avg_max_attack è¿™ä¸‰ä¸ªå˜é‡ä¸­è¿›è¡Œè¿”å›ï¼Œå¦‚æœè¦æ˜¾ç¤ºå‡ºæ¥ç»“æœï¼Œå¯ä»¥ä½¿ç”¨ï¼šSELECT @max_max_hp, @min_max_mp, @avg_max_attack;","user_name":"ä½œè€…å›å¤","comment_id":155824,"uid":"1306094","ip_address":"","utype":1,"ctime":1577077884,"user_name_real":"cy"}],"discussion_count":1,"race_medal":0,"score":"48819401845","product_id":100029501,"comment_content":"è¯·æ•™ä¸‹è€å¸ˆæˆ–è€…å„ä½å°ä¼™ä¼´ï¼Œè°ƒç”¨ç¨‹åºè¿™é‡Œï¼Œç›´æ¥callå°±å‡ºç»“æœäº†ï¼Œä¸‹é¢é‚£å¥selectä¸ºä»€ä¹ˆè¦åŠ ä¸Šå‘¢<br><br>CALL get_hero_scores(@max_max_hp, @min_max_mp, @avg_max_attack, &#39;æˆ˜å£«&#39;);<br>SELECT @max_max_hp, @min_max_mp, @avg_max_attack;","like_count":11,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475888,"discussion_content":"CALL get_hero_scores(@max_max_hp, @min_max_mp, @avg_max_attack, &amp;#39;æˆ˜å£«&amp;#39;); è¿™é‡Œæ˜¯æŠŠç»“æœæ”¾åˆ°max_max_hp, min_max_mp, avg_max_attack è¿™ä¸‰ä¸ªå˜é‡ä¸­è¿›è¡Œè¿”å›ï¼Œå¦‚æœè¦æ˜¾ç¤ºå‡ºæ¥ç»“æœï¼Œå¯ä»¥ä½¿ç”¨ï¼šSELECT @max_max_hp, @min_max_mp, @avg_max_attack;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577077884,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":146568,"user_name":"é«˜å¿—å¼º","can_delete":false,"product_type":"c1","uid":1276563,"ip_address":"","ucode":"68737002043752","user_header":"https://static001.geekbang.org/account/avatar/00/13/7a/93/c9302518.jpg","comment_is_top":false,"comment_ctime":1572574850,"is_pvip":false,"replies":[{"id":"59754","content":"åŠ æ²¹å¿—å¼º","user_name":"ä½œè€…å›å¤","comment_id":146568,"uid":"1306094","ip_address":"","utype":1,"ctime":1574739760,"user_name_real":"cy"}],"discussion_count":1,"race_medal":0,"score":"27342378626","product_id":100029501,"comment_content":"ç»ˆäºæ˜ç™½äº†å•¥æ˜¯å­˜å‚¨è¿‡ç¨‹ï¼Œè°¢è°¢è€å¸ˆ~","like_count":6,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472919,"discussion_content":"åŠ æ²¹å¿—å¼º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574739760,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121688,"user_name":"Monday","can_delete":false,"product_type":"c1","uid":1250907,"ip_address":"","ucode":"77B9BACC783598","user_header":"https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg","comment_is_top":false,"comment_ctime":1565183063,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18745052247","product_id":100029501,"comment_content":"å…³äºå…³äºå­˜å‚¨è¿‡ç¨‹çš„ç‰ˆæœ¬æ§åˆ¶è¯·æ•™ä»¥ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼Œæœ›è€å¸ˆå›å¤ï¼Œè°¢è°¢ï¼<br>1ã€ç‰ˆæœ¬æ§åˆ¶æŒ‡çš„æ˜¯å­˜å‚¨è¿‡ç¨‹ä¿®æ”¹å­˜å‚¨è¿‡ç¨‹çš„å®šä¹‰ï¼Œå³ä¿®æ”¹å­˜å‚¨è¿‡ç¨‹çš„åˆ›å»ºè¯­å¥ï¼Ÿ<br>2ã€è¯·ä¸¾ä¾‹è¯´æ˜è¡¨ç´¢å¼•å‘ç”Ÿäº†å˜åŒ–ï¼Œä¼šå¯¼è‡´å­˜å‚¨è¿‡ç¨‹å¤±æ•ˆï¼Ÿ","like_count":4},{"had_liked":false,"id":121684,"user_name":"Monday","can_delete":false,"product_type":"c1","uid":1250907,"ip_address":"","ucode":"77B9BACC783598","user_header":"https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg","comment_is_top":false,"comment_ctime":1565182272,"is_pvip":false,"replies":[{"id":"63567","content":"æ„Ÿè°¢ æˆ‘æ”¾åˆ°GitHubä¸Šäº†ï¼Œå¯ä»¥çœ‹ä¸‹","user_name":"ä½œè€…å›å¤","comment_id":121684,"uid":"1306094","ip_address":"","utype":1,"ctime":1577518390,"user_name_real":"cy"}],"discussion_count":3,"race_medal":0,"score":"18745051456","product_id":100029501,"comment_content":"è€å¸ˆçš„è„‘å›¾æ€»ç»“å¾—å¾ˆåˆ°ä½ï¼Œæ±‚å…±äº«å•Šã€‚è°¢è°¢","like_count":4,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461903,"discussion_content":"æ„Ÿè°¢ æˆ‘æ”¾åˆ°GitHubä¸Šäº†ï¼Œå¯ä»¥çœ‹ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577518390,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1661704,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","nickname":"ä¸ä¸å†é™©è®°","note":"","ucode":"A43829E454C067","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375062,"discussion_content":"å›¾ç‰‡å¯ä»¥ç‚¹å¼€çš„ï¼Œä¿å­˜åˆ°ç›¸å†Œå°±å¯ä»¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621472618,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1088040,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9a/28/03613c22.jpg","nickname":"track6688","note":"","ucode":"0A9E893F8FD379","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":213573,"discussion_content":"è€å¸ˆçš„è„‘å›¾æ˜¯ä¸€å¤§ç‰¹è‰²","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585106748,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112381,"user_name":"æˆ‘è¡Œæˆ‘ç´ ","can_delete":false,"product_type":"c1","uid":1224678,"ip_address":"","ucode":"4C69542FAB0671","user_header":"https://static001.geekbang.org/account/avatar/00/12/af/e6/9c77acff.jpg","comment_is_top":false,"comment_ctime":1562725795,"is_pvip":false,"replies":[{"id":"63727","content":"Good Job","user_name":"ä½œè€…å›å¤","comment_id":112381,"uid":"1306094","ip_address":"","utype":1,"ctime":1577530659,"user_name_real":"cy"}],"discussion_count":1,"race_medal":0,"score":"14447627683","product_id":100029501,"comment_content":"CREATE PROCEDURE `get_sum_score`(<br>\t\t\t\tOUT sum_hp_max FLOAT,<br>\t\t\t\ts VARCHAR(255)<br>\t\t\t\t)<br>BEGIN<br>\t\tSELECT sum(hp_max) FROM heros WHERE role_main = s INTO sum_hp_max;<br>END<br><br>CALL get_sum_score(@sum_hp_max, &#39;æ³•å¸ˆ&#39;);<br>SELECT @sum_hp_max;","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457708,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577530659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":203876,"user_name":"åˆ˜æ™ºæ’ohhhhh","can_delete":false,"product_type":"c1","uid":1879555,"ip_address":"","ucode":"A762D9BE157010","user_header":"https://static001.geekbang.org/account/avatar/00/1c/ae/03/4736ba9d.jpg","comment_is_top":false,"comment_ctime":1586280263,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10176214855","product_id":100029501,"comment_content":"è€å¸ˆï¼Œè¯·é—®æˆ‘æŒ‰ç…§æ‚¨çš„ä»£ç è¿›è¡Œç¼–è¯‘çš„ï¼Œé—®ä»€ä¹ˆç»“æœéƒ½æ˜¯null","like_count":2,"discussions":[{"author":{"id":1586887,"avatar":"http://thirdwx.qlogo.cn/mmopen/uqaRIfRCAhJ6t1z92XYEzYru4PksRhFQhND9PSIFI7zOrx5xK8Kibc4Aeich2XMCDia2fYDic5JfZoGTibicVEQOlJsrNsPQBibsbHT/132","nickname":"M1keLee","note":"","ucode":"1A4E0D516B1595","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":274143,"discussion_content":"é‡åˆ°äº†ä¸€æ ·çš„æƒ…å†µï¼Œè¯·é—®ä½ è§£å†³äº†ä¹ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590545680,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115676,"user_name":"Elliot","can_delete":false,"product_type":"c1","uid":1030070,"ip_address":"","ucode":"CC58A6FD2F338C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b7/b6/17103195.jpg","comment_is_top":false,"comment_ctime":1563694002,"is_pvip":false,"replies":[{"id":"63654","content":"å¤šè°¢åé¦ˆ","user_name":"ä½œè€…å›å¤","comment_id":115676,"uid":"1306094","ip_address":"","utype":1,"ctime":1577526710,"user_name_real":"cy"}],"discussion_count":2,"race_medal":0,"score":"10153628594","product_id":100029501,"comment_content":"æè¯¾æ—¶é—´é¡µé¢çš„äº¤äº’è¦æ˜¯èƒ½åƒMediumé‚£æ ·å°±æ›´å®Œç¾äº†ï¼Œæ¯”å¦‚å¯ä»¥è‡ªå·±markä¸€äº›ä¹¦ç­¾æ ‡è®°","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459223,"discussion_content":"å¤šè°¢åé¦ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577526710,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1030070,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b7/b6/17103195.jpg","nickname":"Elliot","note":"","ucode":"CC58A6FD2F338C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":142579,"discussion_content":"å¤ªé…·äº†ï¼Œç°åœ¨æ”¯æŒäº†ï¼Œæ˜¯ä¸æ˜¯åº”è¯¥ç»™ç‚¹é¼“åŠ±å•¥çš„ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579480142,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113562,"user_name":"æŸ”è½¯çš„èƒ–","can_delete":false,"product_type":"c1","uid":1573853,"ip_address":"","ucode":"32B0CDA0E03BC5","user_header":"https://static001.geekbang.org/account/avatar/00/18/03/dd/e9f4c243.jpg","comment_is_top":false,"comment_ctime":1563078523,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10153013115","product_id":100029501,"comment_content":"å­˜å‚¨è¿‡ç¨‹ç”¨åˆ°äº†BEGINå…³é”®å­—ï¼Œæ˜¯ä¸æ˜¯è¡¨ç¤ºå­˜å‚¨è¿‡ç¨‹å°±æ˜¯ä¸€ä¸ªäº‹åŠ¡ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1012325,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/72/65/68bd8177.jpg","nickname":"é›ªé£é¸¿","note":"","ucode":"65D7B030828809","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2491,"discussion_content":"BEGIN...ENDç”¨äºè¡¨ç¤ºä¸€ç»„è¯­å¥ï¼Œå’Œäº‹åŠ¡æ²¡å…³ç³»\nhttps://docs.microsoft.com/en-us/sql/t-sql/language-elements/begin-end-transact-sql?view=sql-server-2017","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1563712955,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112530,"user_name":"å¤œè·¯ç ´æ™“","can_delete":false,"product_type":"c1","uid":1353577,"ip_address":"","ucode":"9B875F94B759B9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/3hZfficKPGCq2kjFBu9SgaMjibJTEl7iaW1ta6pZNyiaWP8XEsNpunlnsiaOtBpWTXfT5BvRP3qNByml6p9rtBvqewg/132","comment_is_top":false,"comment_ctime":1562752628,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"10152687220","product_id":100029501,"comment_content":"å‘ç°ä½†å‡¡å­—æ®µä¸€å¤š,å°¤å…¶æ˜¯è¿˜å¸¦ä¸‹åˆ’çº¿çš„,æ¯”è¾ƒå®¹æ˜“å‡ºç°åˆ›å»ºè¡¨å,å†fromæ–°å»ºè¡¨ä¼šæŠ¥é”™.æ¯”å¦‚ç¬¬äºŒä¾‹,å³ä¾¿æ˜¯å¤å†™,å› ä¸ºæœªå¯Ÿè§‰çš„å¤±è¯¯å¯¼è‡´æŸä¸ªå­—æ®µåå†™é”™,é‚£ä¹ˆè¿è¡Œ&quot;æˆ˜å£«&quot;å®ä¾‹æ—¶ä¼šæŠ¥é”™.ä½†æ˜¯æˆ‘å¤åˆ¶è€å¸ˆçš„ä»£ç è¿è¡Œæ— è¯¯.ä¸¤ç›¸å¯¹ç…§å‘ç°å°±æ˜¯æŸä¸ªå­—æ®µçš„æŸä¸ªå­—æ¯æˆ–è€…ä¸‹åˆ’çº¿å¯¼è‡´çš„.<br>é—®é¢˜ä¸€:<br>s varchar(255)  å‰é¢æ²¡æœ‰IN ,æˆ‘èƒ½ç†è§£ä¸ºå‚æ•°ç±»å‹é»˜è®¤æ˜¯INå—?<br>é—®é¢˜äºŒ:<br>è¿è¡ŒCALLå®ä¾‹ä¸­,å­—æ®µå‰åŠ @æ˜¯å›ºå®šç”¨æ³•å—? ","like_count":2,"discussions":[{"author":{"id":1463474,"avatar":"https://static001.geekbang.org/account/avatar/00/16/54/b2/5ea0b709.jpg","nickname":"Danpier","note":"","ucode":"11E208FDE34961","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2601,"discussion_content":"å•ä¸ª@åŠ å˜é‡ååœ¨ MySQL ä»£è¡¨è‡ªå®šä¹‰å˜é‡ï¼Œè¿™é‡Œç›¸å½“äºè‡ªå®šä¹‰ä¸ªå˜é‡ï¼Œç„¶åæ¥æ”¶å‡½æ•°è¿”å›çš„ç»“æœï¼Œæ‰€ä»¥è¿™é‡Œçš„å˜é‡åå’Œå‡½æ•°é‡Œå®šä¹‰çš„å˜é‡åä¸ä¸€æ ·ä¹Ÿæ²¡å½±å“ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1563783803,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1048028,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fd/dc/245fee32.jpg","nickname":"å¼ é©°çš“","note":"","ucode":"448CAA944097E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":96074,"discussion_content":"åŒæ ·å‘ç°äº†é‡Œé¢ç¼ºä¸ª in","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577029540,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":293630,"user_name":"ä¸ä¸å†é™©è®°","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1621472539,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5916439835","product_id":100029501,"comment_content":"äºŒåˆ·äº†ï¼Œè¿˜æ˜¯é‚£ä¸ªè§‚ç‚¹ï¼Œå­˜å‚¨è¿‡ç¨‹å°±æ˜¯å¨ç¿”ï¼Œç®¡å¥½æ•°æ®å°±å¯ä»¥äº†ï¼Œä¸è¦æ²¡äº‹æ‰¾äº‹å»æŠ˜è…¾ä¸šåŠ¡ã€‚","like_count":1},{"had_liked":false,"id":151553,"user_name":"ä¸ä¸å†é™©è®°","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1573739197,"is_pvip":false,"replies":[{"id":"59804","content":"å¯¹ æ ¹æ®ä¸šåŠ¡æƒ…å†µé€‰æ‹©æŠŠï¼Œæœ‰äº›å…¬å¸ä¸ç”¨ï¼Œä¹Ÿæœ‰ä¸€äº›å…¬å¸åœ¨ä½¿ç”¨","user_name":"ä½œè€…å›å¤","comment_id":151553,"uid":"1306094","ip_address":"","utype":1,"ctime":1574756065,"user_name_real":"cy"}],"discussion_count":5,"race_medal":0,"score":"5868706493","product_id":100029501,"comment_content":"å°±æ˜¯ä¸ªæ¯’ç˜¤ï¼Œæ…ç”¨","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474529,"discussion_content":"å¯¹ æ ¹æ®ä¸šåŠ¡æƒ…å†µé€‰æ‹©æŠŠï¼Œæœ‰äº›å…¬å¸ä¸ç”¨ï¼Œä¹Ÿæœ‰ä¸€äº›å…¬å¸åœ¨ä½¿ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574756065,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1661704,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","nickname":"ä¸ä¸å†é™©è®°","note":"","ucode":"A43829E454C067","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":61135,"discussion_content":"ç®€å•çš„æŸ¥è¯¢æ²¡å¿…è¦å­˜å‚¨è¿‡ç¨‹ï¼Œå¤æ‚çš„è¿‡ç¨‹ä¸€ç”¨å­˜å‚¨è¿‡ç¨‹å°±æ„å‘³ç€è¿™ä¸ªåœ°æ–¹ä¸æ€ä¹ˆå¥½æ”¹äº†ã€‚ä¿—ç§°è¿™å—å†™æ­»ã€‚\nç›´æ¥è¿èƒŒocp  ï¼Œå†åŠ ä¸Šäº‹å®ä¸Šä¼˜è´¨æ¶æ„ç¨€ç¼ºï¼Œå‘è´§ç¨‹åºå‘˜ä¹±å†™ã€‚\né‚£ç‚¹å‹ç¼©ä¼ è¾“çš„ä¼˜åŠ¿è¿˜æ˜¯ç®—äº†å§ï¼Œè¯´åˆ°ç®€åŒ–å¼€å‘æ›´è°ˆä¸ä¸Šã€‚è‡³å°‘æˆ‘ä»¬å…¬å¸ï¼Œæˆ‘ç»ä¸å…è®¸å‡ºç°ã€‚\næˆ‘å°±å¥½å¥‡ï¼Œè¿˜æœ‰å¤§å‚æ•¢åœ¨å…³é”®æœ‰å˜åŒ–çš„ä¸šåŠ¡ä¸Šç”¨å­˜å‚¨è¿‡ç¨‹ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ\nå…·ä½“æ˜¯åŸºäºä»€ä¹ˆè€ƒè™‘ï¼Œå‡ºç°çš„çœŸå®åœºæ™¯æ˜¯å•¥ï¼Œæ‹¿å®ä¾‹å‡ºæ¥è®¨è®ºï¼Œåˆ«æè™šçš„ï¼Œå¤§å®¶éƒ½æ˜¯ä¸€çº¿å¼€å‘é€æ­¥è½¬æ¶æ„çš„ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1574773942,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1339724,"avatar":"https://static001.geekbang.org/account/avatar/00/14/71/4c/2cefec07.jpg","nickname":"é™æ°´æµæ·±","note":"","ucode":"644F05EFBD2E7B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1661704,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","nickname":"ä¸ä¸å†é™©è®°","note":"","ucode":"A43829E454C067","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":223829,"discussion_content":"æˆ‘ä¸€çœ‹åˆ°å­˜å‚¨è¿‡ç¨‹å°±æƒ³ç ¸ç”µè„‘","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1586257673,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":61135,"ip_address":""},"score":223829,"extra":""}]},{"author":{"id":1302228,"avatar":"https://static001.geekbang.org/account/avatar/00/13/de/d4/b83c4185.jpg","nickname":"David.cui","note":"","ucode":"AB46F310403612","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":171836,"discussion_content":"åŒæ„ä½ çš„è§‚ç‚¹ã€‚å‡¡æ˜¯å¤§é‡ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹çš„å‚å®¶ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯æ²¡æœ‰é‡åˆ°æ•°æ®åº“æ€§èƒ½ç“¶é¢ˆçš„ï¼Œæˆ–æ˜¯å·å·¥å‡æ–™åšå¼€å‘çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581752212,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1661704,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","nickname":"ä¸ä¸å†é™©è®°","note":"","ucode":"A43829E454C067","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":61138,"discussion_content":"ä»”ç»†æƒ³æƒ³ï¼Œä¸€æ—¦å¯¹å­˜å‚¨è¿‡ç¨‹äº§ç”Ÿæ›´ç»†ç²’åº¦çš„éœ€æ±‚ï¼Œé‚£ä¸¥é‡æŠŠsolid åŸåˆ™è¿èƒŒäº†ä¸ªéã€‚\nè¿™è¿˜ä¸æ˜¯æ¯’ç˜¤ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574774054,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113473,"user_name":"æ—å½¦","can_delete":false,"product_type":"c1","uid":1032615,"ip_address":"","ucode":"5094CC6ED7B40C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c1/a7/5e66d331.jpg","comment_is_top":false,"comment_ctime":1563025147,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5857992443","product_id":100029501,"comment_content":"1. è¯¾ç¨‹é‡Œæåˆ°â€œIN å‚æ•°å¿…é¡»åœ¨è°ƒç”¨å­˜å‚¨è¿‡ç¨‹æ—¶æŒ‡å®šï¼Œè€Œåœ¨å­˜å‚¨è¿‡ç¨‹ä¸­ä¿®æ”¹è¯¥å‚æ•°çš„å€¼ä¸èƒ½è¢«è¿”å›ã€‚â€è¿™é‡Œçš„IN å‚æ•°å¿…é¡»åœ¨è°ƒç”¨å­˜å‚¨è¿‡ç¨‹æ—¶æŒ‡å®šçš„å«ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘æŸ¥è¯¢äº†MySQLçš„å­˜å‚¨è¿‡ç¨‹å®šä¹‰æ—¶å¯ä»¥ä¸åŒ…å« IN å‚æ•°ã€‚è¿™å¥è¯æœ‰è¡¨ç¤ºå½“å­˜å‚¨è¿‡ç¨‹çš„å®šä¹‰è¯­å¥é‡Œæœ‰ IN å‚æ•°æ—¶ï¼Œå­˜å‚¨è¿‡ç¨‹çš„è¯­å¥ä¸­å¿…é¡»ç”¨åˆ°è¿™ä¸ª IN å‚æ•°å—?<br><br>2. æåˆ°å­˜å‚¨è¿‡ç¨‹çš„ç¼ºç‚¹æ—¶è®²åˆ°é«˜å¹¶å‘çš„åœºæ™¯ä¸‹ï¼Œæ•°æ®åº“ä¼šé‡‡ç”¨åˆ†åº“åˆ†è¡¨çš„æ–¹å¼ï¼Œå¯¹å¯æ‰©å±•æ€§è¦æ±‚é«˜ï¼Œè¿™ç§æƒ…å†µä¸‹å­˜å‚¨è¿‡ç¨‹ä¼šå¢åŠ æ•°æ®åº“çš„å‹åŠ›ã€‚èƒ½ç®€å•å¯¹æ¯”è®²è§£è¿™ç§æƒ…å†µä¸‹å­˜å‚¨è¿‡ç¨‹æ˜¯å’Œæ™®é€šçš„SQLè¯­å¥æ¯”æ›´å¢åŠ æ•°æ®åº“çš„å‹åŠ›å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ<br><br>3. ä¸€ä¸ªè¯¾å¤–è¯é¢˜ã€‚TeraDataé‡Œçš„BTEQæ„Ÿè§‰å’Œå­˜å‚¨è¿‡ç¨‹ä¸€æ ·èƒ½åŒ…å«SQLè¯­å¥(è‡³å°‘ä¸€éƒ¨åˆ†ï¼Œå¦‚DDLï¼ŒDML)ï¼Œå’Œæµæ§åˆ¶è¯­å¥ã€‚å¦å¤–è¿˜å¤šäº†ä¸€äº›åŠŸèƒ½ã€‚ä½œç”¨ä¸Šæœ‰ç‚¹åƒå­˜å‚¨è¿‡ç¨‹çš„åŠ å¼ºæˆ–å»¶ä¼¸ã€‚å¦å¤–èƒ½ä»¥æ–‡ä»¶æ–¹å¼(æ‰¹å¤„ç†)æ‰§è¡Œã€‚ä¸çŸ¥é“åé¢çš„è¯¾ç¨‹ä¼šä¸ä¼šæœ‰æ›´å¤šç±»ä¼¼è¿™æ ·çš„åº”ç”¨ï¼Œæˆ–è€…é€šè¿‡å­˜å‚¨è¿‡ç¨‹å®ç°è‡ªåŠ¨åŒ–æ‰§è¡Œçš„å†…å®¹ã€‚","like_count":1},{"had_liked":false,"id":357834,"user_name":"å¼ å…´","can_delete":false,"product_type":"c1","uid":3175551,"ip_address":"ä¸Šæµ·","ucode":"6BE80A3C026E36","user_header":"","comment_is_top":false,"comment_ctime":1663669241,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1663669241","product_id":100029501,"comment_content":"<br>DELIMITER &#47;&#47;<br>CREATE PROCEDURE `get_sum_score`(<br>\t\tIN roleMain VARCHAR(255),<br>\t\tOUT total FLOAT<br>)<br>BEGIN<br>\t\tSELECT SUM(hp_max) FROM heros <br>\t\tWHERE role_main = roleMain<br>\t\tINTO total;<br>END&#47;&#47;<br>DELIMITER ;<br><br>CALL get_sum_score(&#39;æˆ˜å£«&#39;,@ZS_Total);<br>SELECT @ZS_Total;","like_count":0},{"had_liked":false,"id":356795,"user_name":"å¹´å°‘æŒ½æ»‘ç¨½ä¸–æ— åŒ","can_delete":false,"product_type":"c1","uid":2962599,"ip_address":"å››å·","ucode":"793DCBDE25A07B","user_header":"https://static001.geekbang.org/account/avatar/00/2d/34/a7/52c4ea60.jpg","comment_is_top":false,"comment_ctime":1662600491,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1662600491","product_id":100029501,"comment_content":"# é’ˆå¯¹ç‹è€…è£è€€çš„è‹±é›„æ•°æ®è¡¨ heros è¡¨ï¼Œè¯·ç¼–å†™å­˜å‚¨è¿‡ç¨‹ get_sum_scoreï¼Œç”¨æ¥å¾—åˆ°æŸä¸€ç±»å‹è‹±é›„ï¼ˆä¸»è¦å®šä½ä¸ºæŸä¸€ç±»å‹å³å¯ï¼‰çš„æœ€å¤§ç”Ÿå‘½å€¼çš„æ€»å’Œã€‚<br>CREATE PROCEDURE `get_sum_score`(<br>\t\tOUT sum_max_hp INT,<br>\t\tIN s VARCHAR(255)<br>)<br>BEGIN<br>\t\tSELECT SUM(hp_max) <br>\t\tFROM heros<br>\t\tWHERE role_main = s INTO sum_max_hp;<br>END<br><br>CALL get_sum_score(@sum_max_hp, &#39;æˆ˜å£«&#39;);<br>SELECT @sum_max_hp;","like_count":0},{"had_liked":false,"id":337431,"user_name":"woJA1wCgAA3aj6p1ELWENTCq8KX2zC2w","can_delete":false,"product_type":"c1","uid":2911626,"ip_address":"","ucode":"558FF6A6A2714B","user_header":"","comment_is_top":false,"comment_ctime":1646818617,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1646818617","product_id":100029501,"comment_content":"oracleä¸­çš„å­˜å‚¨è¿‡ç¨‹å¦‚ä¸‹ï¼š<br>CREATE OR REPLACE PROCEDURE SP_DDM_PBC_CHRTC_PIB1(P_I_DATE IN VARCHAR2,<br>                                                  P_O_CODE OUT NUMBER) IS<br><br><br><br>æˆ‘ç”¨call SP_DDM_PBC_CHRTC_PIB1(&#39;20121231&#39;,@P_O_CODE ); <br>æ‰§è¡Œæç¤ºç¼ºå¤±è¡¨è¾¾å¼ï¼Œè¯·æ•™è€å¸ˆå“ªé‡Œé”™äº†<br>","like_count":0},{"had_liked":false,"id":336530,"user_name":"songhyunmin","can_delete":false,"product_type":"c1","uid":1317847,"ip_address":"","ucode":"D5A98668CD8532","user_header":"https://static001.geekbang.org/account/avatar/00/14/1b/d7/868d26ce.jpg","comment_is_top":false,"comment_ctime":1646204071,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1646204071","product_id":100029501,"comment_content":"#DROP PROCEDURE get_sum_hp;<br>#å®šä¹‰å­˜å‚¨è¿‡ç¨‹åå­—ç”¨``è€Œä¸æ˜¯å•å¼•å·ï¼›<br>CREATE PROCEDURE `get_sum_hp`(<br>       OUT sum_max_hp INT,<br>\t\t\t s VARCHAR(255)<br>\t\t\t )<br>BEGIN<br>       SELECT SUM(hp_max) FROM heros WHERE role_main = s INTO sum_max_hp;<br>END<br><br>CALL get_sum_hp(@sum_max_hp, &#39;å°„æ‰‹&#39;);<br>SELECT @sum_max_hp;","like_count":0},{"had_liked":false,"id":325799,"user_name":"åˆ°é“å¯é“","can_delete":false,"product_type":"c1","uid":1031181,"ip_address":"","ucode":"12B94B6C26BE0D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bc/0d/00424e81.jpg","comment_is_top":false,"comment_ctime":1639135835,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1639135835","product_id":100029501,"comment_content":"CREATE PROCEDURE `get_sum_score`(<br>    OUT sum_max_hp FLOAT,<br>    IN s VARCHAR(255)<br>)<br>BEGIN<br>    SELECT SUM(hp_max) FROM heros WHERE role_main = s INTO sum_max_hp;<br>END;<br><br>CALL get_sum_score(@sum_max_hp, &#39;æˆ˜å£«&#39;);<br>SELECT @sum_max_hp;","like_count":0},{"had_liked":false,"id":317675,"user_name":"Geek_28670d","can_delete":false,"product_type":"c1","uid":2814926,"ip_address":"","ucode":"7BA10C23E56F1E","user_header":"","comment_is_top":false,"comment_ctime":1634887624,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634887624","product_id":100029501,"comment_content":"å‚¨å­˜è¿‡ç¨‹æ˜¯å¯¹sqlè¯­å¥å’Œæµç¨‹æ§åˆ¶è¯­å¥çš„å°è£…å‡½æ•°ï¼Œä¼˜ç‚¹æ˜¯å¯å¤ç”¨ï¼Œå¯ä»¥ç”¨æ¥è§£å†³å¤æ‚æŸ¥è¯¢éœ€æ±‚ï¼Œç¼ºç‚¹æ˜¯ç»´æŠ¤è°ƒè¯•å›°éš¾ï¼Œå¯ç§»æ¤æ€§å·®ã€‚","like_count":0},{"had_liked":false,"id":317670,"user_name":"Geek_28670d","can_delete":false,"product_type":"c1","uid":2814926,"ip_address":"","ucode":"7BA10C23E56F1E","user_header":"","comment_is_top":false,"comment_ctime":1634886916,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634886916","product_id":100029501,"comment_content":"DROP PROCEDURE IF EXISTS hero_hp_sum_by_type;<br>DELIMITER &#47;&#47;<br>CREATE PROCEDURE hero_hp_sum_by_type(IN role_name VARCHAR(100),OUT res INT )<br>BEGIN<br>\tSELECT SUM(hp_max)AS res FROM `heros` WHERE role_main = role_name INTO res;<br>END &#47;&#47;<br>DELIMITER ;<br>CALL hero_hp_sum_by_type(&quot;å¦å…‹&quot;,@res)<br>SELECT @res","like_count":0},{"had_liked":false,"id":312807,"user_name":"Soul of the Dragon","can_delete":false,"product_type":"c1","uid":2438011,"ip_address":"","ucode":"21603099E51B8A","user_header":"https://static001.geekbang.org/account/avatar/00/25/33/7b/9e012181.jpg","comment_is_top":false,"comment_ctime":1632034239,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632034239","product_id":100029501,"comment_content":"è¯¾åç»ƒä¹ ï¼š<br>CREATE PROCEDURE `get_sum_score`(<br>      OUT sum_max_hp FLOAT,<br>      s VARCHAR(255)<br>     )<br>BEGIN<br>      SELECT SUM(hp_max) FROM heros WHERE role_main=s INTO sum_max_hp;<br>END<br><br>è°ƒç”¨ï¼š<br>CALL get_sum_score(@sum_max_hp, &#39;æˆ˜å£«&#39;);<br>SELECT @sum_max_hp;","like_count":0},{"had_liked":false,"id":277717,"user_name":"è“¦ç„¶å›é¦–","can_delete":false,"product_type":"c1","uid":1172090,"ip_address":"","ucode":"B17658DCFE6402","user_header":"https://static001.geekbang.org/account/avatar/00/11/e2/7a/38a27e47.jpg","comment_is_top":false,"comment_ctime":1612525449,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1612525449","product_id":100029501,"comment_content":"å¥½åƒçœ‹äº†ä¸€ä¸‹MYSQLæ•™ç¨‹ã€ŠMYSQLå¿…çŸ¥å¿…ä¼šã€‹ä¸Šé¢ä¹Ÿæ²¡æœ‰åŠ ``è¿™ä¸ªï¼Œæ ‡å‡†æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ","like_count":0},{"had_liked":false,"id":277715,"user_name":"è“¦ç„¶å›é¦–","can_delete":false,"product_type":"c1","uid":1172090,"ip_address":"","ucode":"B17658DCFE6402","user_header":"https://static001.geekbang.org/account/avatar/00/11/e2/7a/38a27e47.jpg","comment_is_top":false,"comment_ctime":1612525146,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1612525146","product_id":100029501,"comment_content":"å­˜å‚¨è¿‡ç¨‹åç§°ä¸¤è¾¹ä¸ç”¨åŠ å¼•å·ï¼Œå¥½åƒä¹Ÿä¸æ˜¯å•å¼•å·ï¼Œä¸çŸ¥é“æ€ä¹ˆå«è¿™ä¸ªç¬¦å·ï¼Œå“ˆå“ˆï¼Œä¸åŠ ï¼Œè¯•è¯•ä¹Ÿå¯ä»¥","like_count":0,"discussions":[{"author":{"id":1471657,"avatar":"https://static001.geekbang.org/account/avatar/00/16/74/a9/5eb3ebc6.jpg","nickname":"å”é¾™","note":"","ucode":"87A10AE04F2037","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384119,"discussion_content":"åå¼•å·ï¼Œé”®ç›˜ä¸Šåœ¨1çš„å·¦è¾¹ï¼Œå’Œ~åœ¨åŒä¸€æŒ‰é”®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626393530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":274699,"user_name":"Flychen","can_delete":false,"product_type":"c1","uid":1880782,"ip_address":"","ucode":"4029A8F1D3C361","user_header":"https://static001.geekbang.org/account/avatar/00/1c/b2/ce/5638be2b.jpg","comment_is_top":false,"comment_ctime":1611130208,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1611130208","product_id":100029501,"comment_content":"navicatåˆ›å»ºå­˜å‚¨è¿‡ç¨‹ï¼Œä¼¼ä¹å¿…é¡»ç•Œé¢å¯¹è¯æ¡†å®šä¹‰ è¾“å…¥è¾“å‡ºå˜é‡ï¼›ä¸èƒ½ç›´æ¥å†™ä»£ç é‡Œ æ‰§è¡Œ","like_count":0,"discussions":[{"author":{"id":1172090,"avatar":"https://static001.geekbang.org/account/avatar/00/11/e2/7a/38a27e47.jpg","nickname":"è“¦ç„¶å›é¦–","note":"","ucode":"B17658DCFE6402","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348362,"discussion_content":"è¿˜æ˜¯åœ¨å¯¹åº”çš„å‘½ä»¤è¡Œï¼Œæˆ–è€…navicatçš„å‘½ä»¤è¡Œä¸Šé¢æµ‹è¯•ï¼Œè¿™æ ·æ›´æ¥è¿‘å®é™…ä½¿ç”¨ï¼Œä½ é‚£æ ·ç”¨ç•Œé¢æ“ä½œï¼Œåªæ˜¯ä¸ºäº†å¿«é€ŸéªŒè¯å­˜å‚¨è¿‡ç¨‹æ˜¯å¦æ­£ç¡®è€Œå·²ï¼Œå®é™…ä¸Šï¼Œå¼€å‘ä¸­ä¸€èˆ¬ä¸ä¼šè¿™æ ·ä½¿ç”¨å§ï¼","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1612525541,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":266509,"user_name":"é—«åŸå“²","can_delete":false,"product_type":"c1","uid":1624846,"ip_address":"","ucode":"1903E022DF6A6F","user_header":"https://static001.geekbang.org/account/avatar/00/18/cb/0e/a9fee0b6.jpg","comment_is_top":false,"comment_ctime":1607360088,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607360088","product_id":100029501,"comment_content":"-- get_sum_scoreï¼Œç”¨æ¥å¾—åˆ°æŸä¸€ç±»å‹è‹±é›„ï¼ˆä¸»è¦å®šä½ä¸ºæŸä¸€ç±»å‹å³å¯ï¼‰çš„æœ€å¤§ç”Ÿå‘½å€¼çš„æ€»å’Œã€‚<br>create PROCEDURE `get_sum_score`(<br>\tOUT  hp_sum_max int,<br>\ts VARCHAR(255)<br>\t<br>)<br>begin<br>\tselect SUM(hp_max) from heros order by s INTO hp_sum_max;<br>end<br><br>call get_sum_score(@result,&quot;attack_range&quot;);<br>select @result;","like_count":0},{"had_liked":false,"id":260643,"user_name":"Wang","can_delete":false,"product_type":"c1","uid":1052957,"ip_address":"","ucode":"9BEFA46433F86B","user_header":"https://static001.geekbang.org/account/avatar/00/10/11/1d/6ad7eb3c.jpg","comment_is_top":false,"comment_ctime":1605076839,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1605076839","product_id":100029501,"comment_content":"è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©ã€‚è¿˜æœ‰æ²¡æœ‰ä¸€äº›èµ„æ–™å¯ä»¥æ›´ç»†è‡´çš„å­¦ä¹ å­˜å‚¨è¿‡ç¨‹ï¼Œå·¥ä½œä¸­åœ¨ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ã€‚","like_count":0},{"had_liked":false,"id":244491,"user_name":"xiaopi3","can_delete":false,"product_type":"c1","uid":1837697,"ip_address":"","ucode":"1C92D0CDC0B39E","user_header":"https://static001.geekbang.org/account/avatar/00/1c/0a/81/69fecff9.jpg","comment_is_top":false,"comment_ctime":1598536453,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598536453","product_id":100029501,"comment_content":"ç®€å•ç‚¹ï¼š<br>DELIMITER &#47;&#47;<br>CREATE PROCEDURE get_sum_score(IN X VARCHAR(255))<br>BEGIN<br>\tSELECT SUM(hp_max) FROM heros WHERE role_main = X;<br>END &#47;&#47;<br>DELIMITER ;<br><br>CALL get_sum_score(&#39;æˆ˜å£«&#39;);<br><br>è¯è¯´@xxxæ˜¯å•¥æ„æ€å•Šï¼Ÿæˆ‘çœ‹è¿™ä¸ªæ„æ€å¥½åƒæ˜¯å®šä¹‰ä¸€ä¸ªå˜é‡å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":242245,"user_name":"0000000","can_delete":false,"product_type":"c1","uid":2076755,"ip_address":"","ucode":"AF9AFCC5A893D1","user_header":"https://static001.geekbang.org/account/avatar/00/1f/b0/53/198fdc84.jpg","comment_is_top":false,"comment_ctime":1597646558,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597646558","product_id":100029501,"comment_content":"è€å¸ˆè¯·é—®@ ç¬¦å·çš„ä½œç”¨ï¼Œä¸ºä»€ä¹ˆæœ‰çš„æœ‰ï¼Œæœ‰çš„æ²¡æœ‰å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":239670,"user_name":"LIKE","can_delete":false,"product_type":"c1","uid":1254252,"ip_address":"","ucode":"9DAB7F9051648A","user_header":"https://static001.geekbang.org/account/avatar/00/13/23/6c/82ba5e1f.jpg","comment_is_top":false,"comment_ctime":1596611163,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1596611163","product_id":100029501,"comment_content":"1.â€œin role_name varchar(255)â€œï¼Œmysql version 5.7.25 ä¸æŒ‡å®šé•¿åº¦ä¼šæŠ¥é”™ã€‚<br>2.å·¥ä½œä¸­åº”ç”¨å­˜å‚¨è¿‡ç¨‹æ¯”è¾ƒå¤šçš„ï¼Œæ˜¯æ‰¹é‡æ’å…¥æ•°æ®ï¼Œæ¨¡æ‹Ÿå®šé‡æ•°æ®ã€‚<br><br>","like_count":0,"discussions":[{"author":{"id":2565173,"avatar":"https://static001.geekbang.org/account/avatar/00/27/24/35/03603e95.jpg","nickname":"ç‰›å“¥","note":"","ucode":"27D8619DC2B946","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384808,"discussion_content":"8.0ç‰ˆæœ¬ä¹ŸæŠ¥é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626761729,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":239405,"user_name":"Geek_gong1zu","can_delete":false,"product_type":"c1","uid":2086659,"ip_address":"","ucode":"D629A6652AB8E2","user_header":"https://static001.geekbang.org/account/avatar/00/1f/d7/03/db060811.jpg","comment_is_top":false,"comment_ctime":1596525157,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1596525157","product_id":100029501,"comment_content":"DELIMETER&#47;&#47;<br>CREATE PROCEDURE get_sum_score(<br>          OUT sum_max_hp FLOAT,<br>        IN s VARCHAR(20)<br>    )<br>BEGIN<br>    SELECT sum(hp_max)  FROM heros WHERE role_main = S INTO sum_max_hp;<br>END<br><br># è°ƒç”¨å­˜å‚¨è¿‡ç¨‹<br>CALL get_sum_score(@sum_max_hp,&#39;æˆ˜å£«&#39;)<br>SELECT @sum_max_hp;","like_count":0},{"had_liked":false,"id":238692,"user_name":"Everlaa","can_delete":false,"product_type":"c1","uid":1708271,"ip_address":"","ucode":"9B4FFFABD62B07","user_header":"https://static001.geekbang.org/account/avatar/00/1a/10/ef/4c9b2383.jpg","comment_is_top":false,"comment_ctime":1596263146,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596263146","product_id":100029501,"comment_content":"çœ‹äº†å¾ˆå¤šæ–‡ç« éƒ½æ²¡æœ‰æŠŠè¿™ä¸ªæ¦‚å¿µè®²æ¸…æ¥šï¼Œä»Šå¤©ç»ˆäºæ˜æœ—äº†ï¼Œè°¢è°¢è€å¸ˆ","like_count":0},{"had_liked":false,"id":230112,"user_name":"å®æ‚¦","can_delete":false,"product_type":"c1","uid":1901403,"ip_address":"","ucode":"68844C314FEEF8","user_header":"https://static001.geekbang.org/account/avatar/00/1d/03/5b/3cdbc9fa.jpg","comment_is_top":false,"comment_ctime":1593266424,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593266424","product_id":100029501,"comment_content":"CREATE PROCEDURE `get_sum_score`(<br>      OUT sum_max_hp FLOAT,<br>      s VARCHAR(255)<br>       )<br> BEGIN<br>       SELECT SUM(hp_max) FROM heros WHERE role_main = s INTO sum_max_hp;<br>END<br><br>","like_count":0},{"had_liked":false,"id":221600,"user_name":"M1keLee","can_delete":false,"product_type":"c1","uid":1586887,"ip_address":"","ucode":"1A4E0D516B1595","user_header":"http://thirdwx.qlogo.cn/mmopen/uqaRIfRCAhJ6t1z92XYEzYru4PksRhFQhND9PSIFI7zOrx5xK8Kibc4Aeich2XMCDia2fYDic5JfZoGTibicVEQOlJsrNsPQBibsbHT/132","comment_is_top":false,"comment_ctime":1590547469,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1590547469","product_id":100029501,"comment_content":"ç”¨DataGripè¿è¡Œâ€œCALL get_hero_scores(@max_max_hp, @min_max_mp, @avg_max_attack,&#39;æˆ˜å£«&#39;);â€æ—¶æŠ¥é”™â€œ[HY000][1366] Incorrect string value: &#39;\\xE6\\x88\\x98\\xE5\\xA3\\xAB&#39; for column &#39;s&#39; at row 1â€ï¼Œå°†â€œæˆ˜å£«â€æ›¿æ¢æˆè‹±æ–‡å­—ç¬¦ä¸²æ— errorã€‚æ£€æŸ¥tableå·²ç»æ˜¯CHARSET=utf8ï¼Œè¯·é—®åº”è¯¥å¦‚ä½•è§£å†³ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1120348,"avatar":"https://static001.geekbang.org/account/avatar/00/11/18/5c/1a58e8f6.jpg","nickname":"è‰åŸä¸Šçš„å¥”è·‘","note":"","ucode":"D69C617F767736","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583690,"discussion_content":"IN s VARCHAR(255) CHARACTER SET utf8ï¼Œ å­—ç¬¦å‹å­—æ®µåé¢æŒ‡å®šç¼–ç ç±»å‹å°±å¯ä»¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660294874,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1583391,"avatar":"https://static001.geekbang.org/account/avatar/00/18/29/1f/81fce62e.jpg","nickname":"å“ˆå¤§æ²™","note":"","ucode":"864868E0AAEFA0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304592,"discussion_content":"ç”¨Navicat Premiumé‡åˆ°åŒæ ·çš„é—®é¢˜ï¼Œå“¥ä»¬è§£å†³æ²¡ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599621395,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1120348,"avatar":"https://static001.geekbang.org/account/avatar/00/11/18/5c/1a58e8f6.jpg","nickname":"è‰åŸä¸Šçš„å¥”è·‘","note":"","ucode":"D69C617F767736","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1583391,"avatar":"https://static001.geekbang.org/account/avatar/00/18/29/1f/81fce62e.jpg","nickname":"å“ˆå¤§æ²™","note":"","ucode":"864868E0AAEFA0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583691,"discussion_content":"IN s VARCHAR(255) CHARACTER SET utf8ï¼Œ å­—ç¬¦å‹å­—æ®µåé¢æŒ‡å®šç¼–ç ç±»å‹å°±å¯ä»¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660294894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":304592,"ip_address":"æ±Ÿè‹"},"score":583691,"extra":""}]}]},{"had_liked":false,"id":220929,"user_name":"Edward","can_delete":false,"product_type":"c1","uid":1008343,"ip_address":"","ucode":"4ABF119D75C46F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/62/d7/48a7fb45.jpg","comment_is_top":false,"comment_ctime":1590344562,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590344562","product_id":100029501,"comment_content":"åªæœ‰ä¹‹å‰nbaçš„æ•°æ®ï¼Œå°±æ±‚äº†ä¸€ä¸ªæ ¹æ®çƒå‘˜IDè·å–èº«é«˜çº§åˆ«ä»¥åŠåŒèº«é«˜çº§åˆ«çƒå‘˜çš„èº«é«˜ä¹‹å’Œã€‚<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>DELIMITER &#47;&#47;<br>CREATE PROCEDURE `get_max_height`<br>(<br>IN pid INT, <br>OUT genre varchar(255), <br>OUT max_height FLOAT<br>)<br>BEGIN <br>  DECLARE lowest FLOAT;<br>  DECLARE highest FLOAT;<br>  SELECT height_level, height_lowest, height_highest  <br>  FROM height_grades <br>  WHERE <br>    (SELECT height FROM player WHERE player_id = pid) BETWEEN height_lowest AND height_highest   <br>  INTO genre, lowest, highest;<br><br>  SELECT SUM(height) FROM player WHERE height BETWEEN lowest AND highest INTO max_height; <br>END &#47;&#47;<br>DELIMITER ;","like_count":0},{"had_liked":false,"id":202013,"user_name":"å½­çºªç¨‹","can_delete":false,"product_type":"c1","uid":1682468,"ip_address":"","ucode":"F9222D72E791C8","user_header":"https://static001.geekbang.org/account/avatar/00/19/ac/24/0684a141.jpg","comment_is_top":false,"comment_ctime":1585887662,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585887662","product_id":100029501,"comment_content":"DELIMITER &#47;&#47;<br><br>CREATE PROCEDURE get_sum_score(IN s VARCHAR(255), OUT sum_maxhp FLOAT)<br>BEGIN <br>\tSELECT  SUM(hp_max) FROM heros WHERE role_main = s INTO  sum_maxhp;<br>END &#47;&#47;<br>DELIMITER ;<br>CALL get_sum_score(&#39;æ³•å¸ˆ&#39;,@sum_hp_max);<br>SELECT &#39;æ³•å¸ˆ&#39;, @sum_hp_max;","like_count":0},{"had_liked":false,"id":194795,"user_name":"track6688","can_delete":false,"product_type":"c1","uid":1088040,"ip_address":"","ucode":"0A9E893F8FD379","user_header":"https://static001.geekbang.org/account/avatar/00/10/9a/28/03613c22.jpg","comment_is_top":false,"comment_ctime":1585106653,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585106653","product_id":100029501,"comment_content":"ä¹‹å‰äº†è§£è¿‡å­˜å‚¨è¿‡ç¨‹ï¼Œä½†æ˜¯ä¸€ç›´æ²¡æœ‰å†™è¿‡ã€‚<br>CREATE PROCEDURE get_sum_score(IN hero_type VARCHAR(255), <br>\tOUT max_hp_sum FLOAT<br>)<br>BEGIN<br>\tSELECT SUM(h.hp_max) FROM heros h WHERE h.role_main = hero_type INTO max_hp_sum;<br>END<br><br>CALL get_sum_score(&#39;æˆ˜å£«&#39;, @max_hp_sum);<br>SELECT @max_hp_sum;","like_count":0},{"had_liked":false,"id":189465,"user_name":"ç´¢æ—­ä¸œ","can_delete":false,"product_type":"c1","uid":1139039,"ip_address":"","ucode":"BFD07BCD8C8CAE","user_header":"https://static001.geekbang.org/account/avatar/00/11/61/5f/b279daaf.jpg","comment_is_top":false,"comment_ctime":1584519556,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584519556","product_id":100029501,"comment_content":"DELIMITER &#47;&#47;<br>create procedure `get_sum_score`(IN roleMain VARCHAR(255))<br>BEGIN<br>select sum(hp_max) as sum_hp_max from heros where role_main=roleMain;<br>END&#47;&#47;<br>DELIMITER ;<br><br>call get_sum_score(&#39;å¦å…‹&#39;);<br>select @total","like_count":0},{"had_liked":false,"id":188174,"user_name":"Amy","can_delete":false,"product_type":"c1","uid":1151869,"ip_address":"","ucode":"22ABF84ACD1F77","user_header":"https://static001.geekbang.org/account/avatar/00/11/93/7d/177bf48a.jpg","comment_is_top":false,"comment_ctime":1584326398,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1584326398","product_id":100029501,"comment_content":"CREATE PROCEDURE `get_sum_score`(<br>       OUT sum_max_hp FLOAT,     <br>       r VARCHAR(255)<br>       )<br>BEGIN<br>   SELECT sum(hp_max) FROM `heros` WHERE role_main=r INTO sum_max_hp;<br>END","like_count":0},{"had_liked":false,"id":182442,"user_name":"æ¬§é˜³å•Š","can_delete":false,"product_type":"c1","uid":1868570,"ip_address":"","ucode":"CF1D0F0802713B","user_header":"https://static001.geekbang.org/account/avatar/00/1c/83/1a/f9d9225f.jpg","comment_is_top":false,"comment_ctime":1582788448,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582788448","product_id":100029501,"comment_content":"-- ä½œä¸š<br>CREATE PROCEDURE `get_sum_score`(s VARCHAR(255))<br>BEGIN<br>    DECLARE sum_hp_max FLOAT;<br>    SELECT SUM(DISTINCT h.hp_max) from heros h where h.role_main = s OR h.role_assist = s into sum_hp_max;<br>    SELECT sum_hp_max;<br>END<br>CALL get_sum_score(&#39;æˆ˜å£«&#39;);","like_count":0},{"had_liked":false,"id":178585,"user_name":"David.cui","can_delete":false,"product_type":"c1","uid":1302228,"ip_address":"","ucode":"AB46F310403612","user_header":"https://static001.geekbang.org/account/avatar/00/13/de/d4/b83c4185.jpg","comment_is_top":false,"comment_ctime":1581752092,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581752092","product_id":100029501,"comment_content":"æˆ‘å¹¶ä¸èµæˆå¤§é‡çš„æˆ–å¤æ‚çš„ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œå°±å’Œè€å¸ˆæ€»ç»“çš„ä¸€æ ·ã€‚ä¸€ä¸ªæ˜¯è¿ç§»èµ·æ¥ä»£ä»·æå¤§ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯å¾ˆå¤šè®¡ç®—çš„å‹åŠ›éƒ½é›†ä¸­åœ¨äº†æ•°æ®åº“ä¸Šã€‚","like_count":0},{"had_liked":false,"id":171427,"user_name":"å¼ é©°çš“","can_delete":false,"product_type":"c1","uid":1048028,"ip_address":"","ucode":"448CAA944097E6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fd/dc/245fee32.jpg","comment_is_top":false,"comment_ctime":1578922021,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578922021","product_id":100029501,"comment_content":"è¯¾ç¨‹é‡Œè²Œä¼¼æ²¡æœ‰è®²åˆ°å­˜å‚¨è¿‡ç¨‹æ€æ ·æ‰¹é‡è°ƒç”¨ï¼Ÿæ¯”å¦‚åˆ›å»ºäº†ä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹åï¼Œæƒ³ä¼ å…¥å¤šæ¬¡è¾“å…¥æ¥è·å–å¯¹åº”è¾“å‡ºï¼Œè¿™æ ·åº”è¯¥æ€ä¹ˆå†™è¯­å¥å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":162787,"user_name":"taoist","can_delete":false,"product_type":"c1","uid":1195004,"ip_address":"","ucode":"D70AFE25CD8F10","user_header":"https://static001.geekbang.org/account/avatar/00/12/3b/fc/04a75cd0.jpg","comment_is_top":false,"comment_ctime":1576589928,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1576589928","product_id":100029501,"comment_content":"--MariaDB<br>CREATE PROCEDURE `get_sum_score`(<br>OUT sum_hp_max FLOAT,<br>s VARCHAR(255)<br>)<br>BEGIN<br>SELECT sum(hp_max) FROM heros WHERE role_main = s INTO sum_hp_max;<br>END<br>CALL get_sum_score(@sum_hp_max, &#39;æ³•å¸ˆ&#39;);<br>SELECT @sum_hp_max;","like_count":0},{"had_liked":false,"id":152432,"user_name":"æ¢","can_delete":false,"product_type":"c1","uid":1267198,"ip_address":"","ucode":"29A10759821D96","user_header":"https://static001.geekbang.org/account/avatar/00/13/55/fe/e8fb06fb.jpg","comment_is_top":false,"comment_ctime":1574000217,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574000217","product_id":100029501,"comment_content":"ä¸ºå•¥å­˜å‚¨è¿‡ç¨‹å¯¹é«˜å¹¶å‘æ”¯æŒä¸å¥½å‘¢ï¼Ÿæœ‰ä¸€äº›åŒå­¦ä¹Ÿè¯´ä¸é€‚åˆåœ¨oltpä¸­è·‘ï¼Œå®ƒä¸å°±ä¹Ÿæ˜¯å‘èµ·ä¸€ä¸ªç®€å•çš„è¯­å¥æ‰§è¡Œï¼Œå…·ä½“æ‰§è¡Œçš„æ•ˆç‡è¦çœ‹æ‰§è¡Œè®¡åˆ’å‘€ ï¼Ÿ","like_count":0},{"had_liked":false,"id":145210,"user_name":"æ‰¶å¹½","can_delete":false,"product_type":"c1","uid":1322612,"ip_address":"","ucode":"1400EDFF8970D3","user_header":"https://static001.geekbang.org/account/avatar/00/14/2e/74/88c613e0.jpg","comment_is_top":false,"comment_ctime":1572230355,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1572230355","product_id":100029501,"comment_content":"å°ç»ƒä¹ ï¼š<br>DELIMITER &#47;&#47;<br>CREATE PROCEDURE get_sum_score(IN main_role1 VARCHAR(255), OUT sums INT)<br>BEGIN<br>        SELECT SUM(hp_max) FROM heros WHERE main_role=main_role1;<br>END &#47;&#47;<br>DELIMITER ;","like_count":0},{"had_liked":false,"id":143453,"user_name":"Coool","can_delete":false,"product_type":"c1","uid":1701702,"ip_address":"","ucode":"1D1AB3270B02B9","user_header":"https://static001.geekbang.org/account/avatar/00/19/f7/46/209ca424.jpg","comment_is_top":false,"comment_ctime":1571711159,"is_pvip":false,"replies":[{"id":"62776","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577091048,"ip_address":"","comment_id":143453,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571711159","product_id":100029501,"comment_content":"CREATE  PROCEDURE `get_sum_score`(out sum_max_hp float,in s varchar(255))<br>BEGIN<br>    select sum(hp_max) <br>    from heros<br>    where role_main=s<br>    into sum_max_hp;<br>END<br><br>call get_sum_score(@sum_max_hp,&#39;æˆ˜å£«&#39;) ;<br>select @sum_max_hp ;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471546,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577091048,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142169,"user_name":"æ™¶","can_delete":false,"product_type":"c1","uid":1437376,"ip_address":"","ucode":"645E674503B3D8","user_header":"https://static001.geekbang.org/account/avatar/00/15/ee/c0/b3d1593b.jpg","comment_is_top":false,"comment_ctime":1571303368,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571303368","product_id":100029501,"comment_content":"å¯ä»¥è®²ä¸€ä¸‹è§¦å‘å™¨å—ï¼Ÿè°¢è°¢","like_count":0},{"had_liked":false,"id":142107,"user_name":"Cola_","can_delete":false,"product_type":"c1","uid":1264718,"ip_address":"","ucode":"99996D04CA4171","user_header":"https://static001.geekbang.org/account/avatar/00/13/4c/4e/91267714.jpg","comment_is_top":false,"comment_ctime":1571294982,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571294982","product_id":100029501,"comment_content":"delimiter &#47;&#47;<br>CREATE PROCEDURE `get_sum_scores`(<br>       OUT sum_max_hp FLOAT, <br>       s VARCHAR(255)<br>       )<br>BEGIN<br>       SELECT SUM(hp_max) FROM heros WHERE role_main = s INTO sum_max_hp;<br>END &#47;&#47;<br>delimiter ;<br><br>call get_sum_scores(@sum_max_hp,â€™æ³•å¸ˆâ€™);<br>select @sum_max_hp;","like_count":0},{"had_liked":false,"id":132562,"user_name":"qfå¹´é—´","can_delete":false,"product_type":"c1","uid":1463023,"ip_address":"","ucode":"AA08AC984637EE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLbchZfeEnshPuUwEsQkn1XbWxjs3rRUpSRUxjW4q7rOcrPvXld0IxEZ1jlpEJdklFeEVERJoOfibg/132","comment_is_top":false,"comment_ctime":1568166074,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568166074","product_id":100029501,"comment_content":"å­˜å‚¨è¿‡ç¨‹çš„è°ƒç”¨å…·ä½“æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Œå¦‚ä½•ä¼ å…¥å‚æ•°å‘¢","like_count":0},{"had_liked":false,"id":121818,"user_name":"æœªæ¥çš„èƒ¡å…ˆæ£®","can_delete":false,"product_type":"c1","uid":1234682,"ip_address":"","ucode":"AFF193AC0E2E6C","user_header":"https://static001.geekbang.org/account/avatar/00/12/d6/fa/1f5bf642.jpg","comment_is_top":false,"comment_ctime":1565227794,"is_pvip":false,"replies":[{"id":"63880","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577603261,"ip_address":"","comment_id":121818,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565227794","product_id":100029501,"comment_content":"äº¤ä½œä¸šäº†<br>DELIMITER &#47;&#47;<br>CREATE PROCEDURE get_sum_score(<br>\t\t\tOUT sum_max_hp FLOAT,<br>\t\t\tt VARCHAR(255))<br>BEGIN<br>\tSELECT SUM(hp_max)<br>\tFROM heros<br>\tWHERE role_main=t<br>\tINTO sum_max_hp;<br>END &#47;&#47;<br>DELIMITER ;<br><br>CALL get_sum_score(@sum_max_hp,&#39;æˆ˜å£«&#39;);<br>SELECT @sum_max_hp;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461960,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577603261,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117161,"user_name":"Fargo","can_delete":false,"product_type":"c1","uid":1018174,"ip_address":"","ucode":"434FC4C5D61750","user_header":"https://static001.geekbang.org/account/avatar/00/0f/89/3e/1976b66f.jpg","comment_is_top":false,"comment_ctime":1563978955,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563978955","product_id":100029501,"comment_content":"mysql&gt; CREATE PROCEDURE `get_sum_score`(<br>    -&gt; OUT sum_max_score FLOAT,<br>    -&gt; s VARCHAR(255))<br>    -&gt; BEGIN <br>    -&gt; SELECT SUM(hp_max) FROM heros WHERE role_main = s INTO sum_max_score; END;<br><br>mysql&gt; CALL get_sum_score(@sum_max_score, &#39;å°„æ‰‹&#39;)ï¼›<br>mysql&gt; SELECT @sum_max_score;<br>+----------------+<br>| @sum_max_score |<br>+----------------+<br>|          57985 |<br>+----------------+","like_count":0},{"had_liked":false,"id":116575,"user_name":"Ronnyz","can_delete":false,"product_type":"c1","uid":1488280,"ip_address":"","ucode":"9F34527B1D343D","user_header":"https://static001.geekbang.org/account/avatar/00/16/b5/98/ffaf2aca.jpg","comment_is_top":false,"comment_ctime":1563873490,"is_pvip":false,"replies":[{"id":"63802","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577542246,"ip_address":"","comment_id":116575,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563873490","product_id":100029501,"comment_content":"ä½œä¸šï¼š<br>CREATE DEFINER=`root`@`localhost` PROCEDURE `get_sum_score`(<br>\tOUT max_hp_sum INT,<br>\ts VARCHAR(255)<br>)<br>BEGIN<br>\tSELECT SUM(hp_max) FROM heros WHERE role_main=s INTO max_hp_sum;<br>END<br><br>CALL get_sum_score(@max_hp_sum,&#39;æˆ˜å£«&#39;);<br>SELECT @max_hp_sum;<br>+-------------+<br>| @max_hp_sum |<br>+-------------+<br>|      124873 |<br>+-------------+","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459597,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577542246,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115178,"user_name":"Redevil","can_delete":false,"product_type":"c1","uid":1527609,"ip_address":"","ucode":"21C90472DC6357","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PrKSgib1DcguTZYoOAqNw8tpLKylQU6dQPwI4NLJkd6344EWHaLF5yHe6PpAD6fsxSm0no7qiakiaEHUYw4nzTEyw/132","comment_is_top":false,"comment_ctime":1563503902,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563503902","product_id":100029501,"comment_content":"DROP PROCEDURE IF EXISTS `get_sum_score`;<br>DELIMITER &#47;&#47;<br>CREATE PROCEDURE `get_sum_score`(IN role VARCHAR(255))<br>BEGIN <br>\tSELECT SUM(hp_max) FROM heros where role_main = role;<br>END &#47;&#47;<br>CALL get_sum_score(&#39;æˆ˜å£«&#39;);","like_count":0},{"had_liked":false,"id":114913,"user_name":"mickey","can_delete":false,"product_type":"c1","uid":1051663,"ip_address":"","ucode":"8B490C2DDE4010","user_header":"https://static001.geekbang.org/account/avatar/00/10/0c/0f/93d1c8eb.jpg","comment_is_top":false,"comment_ctime":1563432058,"is_pvip":false,"replies":[{"id":"63808","content":"æ­£ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577542348,"ip_address":"","comment_id":114913,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563432058","product_id":100029501,"comment_content":"&#47;*<br>ç¼–å†™å­˜å‚¨è¿‡ç¨‹get_sum_scoreï¼Œç”¨æ¥å¾—åˆ°æŸä¸€ç±»å‹è‹±é›„ï¼ˆä¸»è¦å®šä½ä¸ºæŸä¸€ç±»å‹å³å¯ï¼‰çš„æœ€å¤§ç”Ÿå‘½å€¼çš„æ€»å’Œã€‚<br>*&#47;<br>DROP PROCEDURE IF EXISTS `get_sum_score`;<br>CREATE PROCEDURE `get_sum_score`(<br>       OUT o_total_hp_max FLOAT,  <br>       i_role_main VARCHAR(255)<br>       )<br>BEGIN<br>       SELECT SUM(hp_max) FROM heros WHERE role_main = i_role_main INTO o_total_hp_max;<br>END;<br>CALL get_sum_score(@total_hp_max, &#39;æˆ˜å£«&#39;);<br>SELECT @total_hp_max as &#39;æœ€å¤§ç”Ÿå‘½å€¼çš„æ€»å’Œ [æˆ˜å£«]&#39;;<br>CALL get_sum_score(@total_hp_max, &#39;æ³•å¸ˆ&#39;);<br>SELECT @total_hp_max as &#39;æœ€å¤§ç”Ÿå‘½å€¼çš„æ€»å’Œ [æ³•å¸ˆ]&#39;;<br>CALL get_sum_score(@total_hp_max, &#39;å¦å…‹&#39;);<br>SELECT @total_hp_max as &#39;æœ€å¤§ç”Ÿå‘½å€¼çš„æ€»å’Œ [å¦å…‹]&#39;;<br><br>æœ€å¤§ç”Ÿå‘½å€¼çš„æ€»å’Œ [æˆ˜å£«]<br>124873<br><br>æœ€å¤§ç”Ÿå‘½å€¼çš„æ€»å’Œ [æ³•å¸ˆ]<br>111317<br><br>æœ€å¤§ç”Ÿå‘½å€¼çš„æ€»å’Œ [å¦å…‹]<br>83124<br>","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458882,"discussion_content":"æ­£ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577542348,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113900,"user_name":"å‡è£…è‡ªå·±ä¸èƒ–","can_delete":false,"product_type":"c1","uid":1412994,"ip_address":"","ucode":"308F1BAA96CDA5","user_header":"https://static001.geekbang.org/account/avatar/00/15/8f/82/374f43a1.jpg","comment_is_top":false,"comment_ctime":1563183037,"is_pvip":false,"replies":[{"id":"63698","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577528496,"ip_address":"","comment_id":113900,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563183037","product_id":100029501,"comment_content":"CREATE PROCEDURE `get_sum_score`(<br>OUT sum_hp_max FLOAT,<br>s VARCHAR(255)<br>)<br>BEGIN<br>SELECT sum(hp_max) FROM heros WHERE role_main = s and hp_max = (select max(hp_max) from heros) INTO sum_hp_max;<br>END<br><br>CALL get_sum_score(@sum_hp_max, &#39;æ³•å¸ˆ&#39;);<br>SELECT @sum_hp_max;<br><br><br>å·äº†ä¸€ä¸ªåŒå­¦çš„æ”¹äº†æ”¹","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458429,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577528496,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113560,"user_name":"Regis","can_delete":false,"product_type":"c1","uid":1435632,"ip_address":"","ucode":"3911E4EDE27F4E","user_header":"https://static001.geekbang.org/account/avatar/00/15/e7/f0/d0bf3a5f.jpg","comment_is_top":false,"comment_ctime":1563077475,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563077475","product_id":100029501,"comment_content":"åœ¨OLAPç³»ç»Ÿä¸­ï¼Œä½¿ç”¨ORACLEï¼ŒSQLServeræ•°æ®åº“çš„ï¼Œå‡ ä¹éƒ½ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œä¸»è¦æ˜¯å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œè·å–æŠ¥è¡¨çš„åŸºç¡€æ•°æ®ï¼Œåœ¨OLTPç³»ç»Ÿå­˜å‚¨è¿‡ç¨‹ç”¨çš„è¿˜æ˜¯æ¯”è¾ƒå°‘å§ï¼Œå°¤å…¶æ˜¯MySQLæ•°æ®åº“ï¼Œå®é™…é¡¹ç›®ç”¨çš„å¾ˆå°‘","like_count":0},{"had_liked":false,"id":113531,"user_name":"supermouse","can_delete":false,"product_type":"c1","uid":1321860,"ip_address":"","ucode":"88072D5F881827","user_header":"https://static001.geekbang.org/account/avatar/00/14/2b/84/07f0c0d6.jpg","comment_is_top":false,"comment_ctime":1563070438,"is_pvip":false,"replies":[{"id":"63815","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577542558,"ip_address":"","comment_id":113531,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563070438","product_id":100029501,"comment_content":"åˆ›å»ºå­˜å‚¨è¿‡ç¨‹ï¼š<br>DELIMITER &#47;&#47;<br>CREATE PROCEDURE `get_sum_scores`(<br>       OUT max_hp_sum INT,<br>       s VARCHAR(255)<br>       )<br>BEGIN<br>       SELECT SUM(hp_max) FROM heros WHERE role_main=s INTO max_hp_sum;<br>END &#47;&#47;<br>DELIMITER ;<br><br>è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ï¼š<br>CALL get_sum_scores(@max_hp_sum, &#39;åˆºå®¢&#39;);<br>SELECT @max_hp_sum;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458261,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577542558,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113195,"user_name":"Geek_70747e","can_delete":false,"product_type":"c1","uid":1309814,"ip_address":"","ucode":"A832E20E951A00","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKdzXiawss5gGmlPicx9IiblxOTf4oSW16MWd696fue60zDA9NJTrGWenuLxS0COZZSzekV8QZGicyJOQ/132","comment_is_top":false,"comment_ctime":1562912345,"is_pvip":true,"replies":[{"id":"63974","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577606538,"ip_address":"","comment_id":113195,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562912345","product_id":100029501,"comment_content":"è¯¾åä½œä¸š<br>DROP PROCEDURE IF EXISTS get_sum_score;<br>DELIMITER &#47;&#47;<br>CREATE PROCEDURE get_sum_score (<br>\tIN role VARCHAR (32),<br>\tOUT sum_score_4_role FLOAT<br>)<br>BEGIN<br>\tSELECT<br>\t\tsum(hp_max)<br>\tFROM<br>\t\theros<br>\tWHERE<br>\t\trole_main = role INTO sum_score_4_role;<br>END &#47;&#47;<br><br>CALL get_sum_score (&#39;æˆ˜å£«&#39; ,@sum_score);<br>SELECT @sum_score;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458105,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577606538,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113118,"user_name":"cricket1981","can_delete":false,"product_type":"c1","uid":1001715,"ip_address":"","ucode":"758262F5958DA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/f3/f1034ffd.jpg","comment_is_top":false,"comment_ctime":1562899439,"is_pvip":false,"replies":[{"id":"41356","content":"æ­£ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1563070106,"ip_address":"","comment_id":113118,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562899439","product_id":100029501,"comment_content":"DELIMITER &#47;&#47;<br>CREATE PROCEDURE `get_sum_score`(IN s VARCHAR(255), OUT sum_hp_max FLOAT)<br>BEGIN<br>       SELECT SUM(hp_max) FROM heros WHERE role_main = s INTO sum_hp_max;<br>END &#47;&#47;<br>DELIMITER ;<br><br><br>CALL get_sum_score(&#39;æˆ˜å£«&#39;, @sum_hp_max);<br><br>SELECT @sum_hp_max;<br><br>+------------+<br>| sum_hp_max |<br>+------------+<br>|     124873 |<br>+------------+<br>1 row in set (0.00 sec)","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458064,"discussion_content":"æ­£ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563070106,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113114,"user_name":"é¸¡å„¿ğŸ¤ä¸æ”¾å‡","can_delete":false,"product_type":"c1","uid":1586579,"ip_address":"","ucode":"6DC348EC279906","user_header":"https://static001.geekbang.org/account/avatar/00/18/35/93/a4fe46e0.jpg","comment_is_top":false,"comment_ctime":1562898597,"is_pvip":false,"replies":[{"id":"41355","content":"æˆ‘åˆšè¿è¡Œäº†ä¸‹ æ˜¯OKçš„","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1563069652,"ip_address":"","comment_id":113114,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1562898597","product_id":100029501,"comment_content":"è·ªæ±‚å¤§ç¥ï¼š<br>åˆ›å»ºå­˜å‚¨è¿‡ç¨‹æˆåŠŸ<br>CREATE PROCEDURE sum_hero_hp(IN s VARCHAR(20),OUT sum_hp int )<br>\tBEGIN <br>\t\tSELECT SUM(hp_max) FROM heros WHERE role_main=s INTO sum_hp;<br>\tEND<br>è°ƒç”¨æ—¶æŠ¥é”™äº†ï¼š\tCALL sum_hero_hp(&#39;æ³•å¸ˆ&#39;,@sum_hp2);<br><br>CALL sum_hero_hp(&#39;æ³•å¸ˆ&#39;,@sum_hp)<br>&gt; 1366 - Incorrect string value: &#39;\\xE6\\xB3\\x95\\xE5\\xB8\\x88&#39; for column &#39;s&#39; at row 313<br>&gt; æ—¶é—´: 0.002s","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458060,"discussion_content":"æˆ‘åˆšè¿è¡Œäº†ä¸‹ æ˜¯OKçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563069652,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1120348,"avatar":"https://static001.geekbang.org/account/avatar/00/11/18/5c/1a58e8f6.jpg","nickname":"è‰åŸä¸Šçš„å¥”è·‘","note":"","ucode":"D69C617F767736","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583692,"discussion_content":"IN s VARCHAR(255) CHARACTER SET utf8ï¼Œ å­—ç¬¦å‹å­—æ®µåé¢æŒ‡å®šç¼–ç ç±»å‹å°±å¯ä»¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660294944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112954,"user_name":"é‡é©¬","can_delete":false,"product_type":"c1","uid":1065176,"ip_address":"","ucode":"CC58CBF541D34A","user_header":"https://static001.geekbang.org/account/avatar/00/10/40/d8/69722032.jpg","comment_is_top":false,"comment_ctime":1562854188,"is_pvip":false,"replies":[{"id":"63707","content":"å°±æ˜¯ä½ ä½¿ç”¨çš„DBMSæ”¯æŒçš„æ•°æ®ç±»å‹","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577529669,"ip_address":"","comment_id":112954,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1562854188","product_id":100029501,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œåœ¨ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹å£°æ˜å˜é‡æ—¶ï¼Œæ•°æ®ç±»å‹éƒ½æ”¯æŒå“ªäº›å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457972,"discussion_content":"å°±æ˜¯ä½ ä½¿ç”¨çš„DBMSæ”¯æŒçš„æ•°æ®ç±»å‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577529669,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"ä¸€æ­¥","note":"","ucode":"73CEA468CE70C3","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1832,"discussion_content":"Mysql çš„æ•°æ®ç±»å‹éƒ½æ”¯æŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562936997,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112836,"user_name":"æ—¶é—´æ˜¯æœ€çœŸçš„ç­”æ¡ˆ","can_delete":false,"product_type":"c1","uid":1183601,"ip_address":"","ucode":"B90F3EF769F865","user_header":"https://static001.geekbang.org/account/avatar/00/12/0f/71/9273e8a4.jpg","comment_is_top":false,"comment_ctime":1562829429,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562829429","product_id":100029501,"comment_content":"é—®ä¸€ä¸ªé¢å¤–çš„é—®é¢˜ï¼š<br>SHOW TABLE STATUS LIKE table_name ; ä¸­ Data_free è¿™åˆ—æœ‰ä»€ä¹ˆç”¨ï¼Œæ¯”å¦‚åœ¨ MyISAM å’Œ InnoDB å¼•æ“ä¸‹åˆ†åˆ«æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ","like_count":0},{"had_liked":false,"id":112623,"user_name":"åœ†å­è›‹","can_delete":false,"product_type":"c1","uid":1585794,"ip_address":"","ucode":"9E8FE5D4DAC79E","user_header":"https://static001.geekbang.org/account/avatar/00/18/32/82/273a44cd.jpg","comment_is_top":false,"comment_ctime":1562773591,"is_pvip":false,"replies":[{"id":"63712","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577530169,"ip_address":"","comment_id":112623,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562773591","product_id":100029501,"comment_content":"CREATE PROCEDURE &#39;get_sum_score&#39;(OUT sum_hp_max FLOATï¼ŒIN role_name VARCHAR(255))<br>BEGIN<br>SELECT SUM(hp_max) FROM heros WHERE role_main = role_name INTO sum_hp_max;<br>END<br>è°ƒç”¨å­˜å‚¨è¿‡ç¨‹<br>CALL get_sum_score(@sum_hp_maxï¼Œ&#39;æˆ˜å£«&#39;);<br>SELECT @sum_hp_maxï¼Œ","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457824,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577530169,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112606,"user_name":"å¤§æ–Œ","can_delete":false,"product_type":"c1","uid":1002183,"ip_address":"","ucode":"1434C2B0A29135","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4a/c7/ec18673b.jpg","comment_is_top":false,"comment_ctime":1562770207,"is_pvip":false,"replies":[{"id":"63713","content":"God Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577530176,"ip_address":"","comment_id":112606,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562770207","product_id":100029501,"comment_content":"MySQLä»£ç ï¼ˆNavicatï¼‰ï¼š<br>CREATE DEFINER=`root`@`localhost` PROCEDURE `get_sum_score`(role_main_var VARCHAR(20),OUT max_hp_sum int)<br>BEGIN<br>\tSELECT SUM(hp_max) from heros where role_main=role_main_var INTO max_hp_sum;<br>END<br><br>è°ƒç”¨ï¼š<br>CALL get_sum_score(&#39;æ³•å¸ˆ&#39;,@max_hp_sum);<br>SELECT @max_hp_sum;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457816,"discussion_content":"God Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577530176,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112538,"user_name":"2525","can_delete":false,"product_type":"c1","uid":1180247,"ip_address":"","ucode":"2426488C258203","user_header":"https://static001.geekbang.org/account/avatar/00/12/02/57/9b235866.jpg","comment_is_top":false,"comment_ctime":1562754498,"is_pvip":false,"replies":[{"id":"63715","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577530244,"ip_address":"","comment_id":112538,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562754498","product_id":100029501,"comment_content":"åˆ›å»ºå­˜å‚¨è¿‡ç¨‹ï¼š<br>CREATE PROCEDURE get_sum_score (<br>\tIN role_main_var VARCHAR (20),<br>\tOUT hp_sum int<br>)<br>BEGIN<br>\tselect sum(hp_max) from heros where role_main=role_main_var INTO hp_sum;<br>END<br>è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ï¼š<br>call get_sum_score(&#39;å¦å…‹&#39;,@sum_hp);<br>select @sum_hp","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457787,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577530244,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112506,"user_name":"ABC","can_delete":false,"product_type":"c1","uid":1054958,"ip_address":"","ucode":"7501AD9C0C4A70","user_header":"https://static001.geekbang.org/account/avatar/00/10/18/ee/a1ed60d1.jpg","comment_is_top":false,"comment_ctime":1562748342,"is_pvip":false,"replies":[{"id":"63816","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577542578,"ip_address":"","comment_id":112506,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562748342","product_id":100029501,"comment_content":"ä½œä¸š<br><br>å®šä¹‰:<br><br>DELIMITER &#47;&#47;<br>CREATE PROCEDURE `get_sum_score`(<br>       OUT sum_max_hp FLOAT,<br>       s VARCHAR(255)<br>       )<br>BEGIN<br>       SELECT SUM(hp_max) FROM heros WHERE role_main = s INTO sum_max_hp;<br>end &#47;&#47;<br>DELIMITER ;<br><br><br>æŸ¥è¯¢: <br><br>call get_sum_score(@sum_hp_max,&#39;å¦å…‹&#39;);<br>select @sum_hp_max;<br><br>æŸ¥è¯¢ç»“æœ:<br><br>@sum_hp_max|<br>-----------|<br>      83124<br><br><br>æŸ¥è¯¢2:<br><br>call get_sum_score(@sum_hp_max,&#39;æˆ˜å£«&#39;);<br>select @sum_hp_max;<br><br>æŸ¥è¯¢ç»“æœ:<br><br>@sum_hp_max|<br>-----------|<br>     124873","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457769,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577542578,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112497,"user_name":"é™ˆæ´","can_delete":false,"product_type":"c1","uid":1570514,"ip_address":"","ucode":"8DBDF7A85DB4BC","user_header":"https://static001.geekbang.org/account/avatar/00/17/f6/d2/dcf628d3.jpg","comment_is_top":false,"comment_ctime":1562747799,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562747799","product_id":100029501,"comment_content":"CREATE PROCEDURE<br>get_sum_score(<br>OUT sum_max_hp FLOAT,s VARCHAR(255)<br>)<br>BEGIN<br>SELECT SUM(hp_max) FROM heros WHERE role_main = s INTO sum_max_hp;<br>END<br><br>CALL get_sum_score(@sum_max_hp,&#39;æˆ˜å£«&#39;);<br>SELECT @sum_max_hp ;","like_count":0},{"had_liked":false,"id":112495,"user_name":"æ—¶é—´æ˜¯æœ€çœŸçš„ç­”æ¡ˆ","can_delete":false,"product_type":"c1","uid":1183601,"ip_address":"","ucode":"B90F3EF769F865","user_header":"https://static001.geekbang.org/account/avatar/00/12/0f/71/9273e8a4.jpg","comment_is_top":false,"comment_ctime":1562747453,"is_pvip":false,"replies":[{"id":"63719","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577530326,"ip_address":"","comment_id":112495,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562747453","product_id":100029501,"comment_content":"CREATE PROCEDURE get_sum_score(IN s VARCHAR(255),OUT sum_max_hp FLOAT)<br>BEGIN<br>\tSELECT SUM(mp_max) FROM heros WHERE role_main = s INTO sum_max_hp ;<br>END;<br><br><br>CALL get_sum_score(&#39;æˆ˜å£«&#39;,@sum_max_hp);<br>SELECT @sum_max_hp ;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457764,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577530326,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112486,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1562744702,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562744702","product_id":100029501,"comment_content":"       ç¦ç”¨çš„æ˜¯è§¦å‘å™¨-éå†ä¸”æ•ˆç‡åä½ï¼šå¤§å¤šæ•°æ®åº“å¯¹å…¶æ”¯æŒä¸å¥½ï¼›å­˜å‚¨è¿‡ç¨‹æœ€å¤§çš„å¥½å¤„æ˜¯è°ƒç”¨æ–¹ä¾¿ã€‚<br>      å…¶å®functionåŒæ ·æ˜¯ï¼šè‡ªå·±å†™ä¸€äº›è‡ªå®šä¹‰å‡½æ•°è¿˜æ˜¯æ¯”è¾ƒæ–¹ä¾¿ï¼›å¼€å‘å¤§å¤šä¸å–œæ¬¢ï¼Œä¸æ“…é•¿ä¸”æœ€åˆéº»çƒ¦ï¼›ä¸è¿‡æ¸…æ™°æ˜äº†ã€‚å­˜å‚¨ä¸­åŠ å…¥é€»è¾‘ï¼Œå¯ä»¥ä½¿å¾—ä»£ç ç®€æ´ä¸”å®Œæˆä¸€äº›é€»è¾‘å¤„ç†ã€‚<br>       æœ‰ç¦ç”¨çš„å­˜å‚¨è¿‡ç¨‹å…¶å®ä¹Ÿæœ‰ç¦ç”¨è§†å›¾ï¼šç¦ç”¨å¤§å¤šæ˜¯èƒ½åŠ›æœ‰é™ä¸”å¯¹å…¶æŒæ¡ä¸å¥½ã€‚ä»»ä½•ä¸€ç§å·¥å…·éƒ½æœ‰ä¼˜åŠ£ï¼šç”¨å¥½äº†å°±æ˜¯åˆ©å™¨ï¼Œç”¨ä¸å¥½å°±åå‘ä¼¤äº†è‡ªå·±ã€‚<br>      ","like_count":0},{"had_liked":false,"id":112481,"user_name":"åå¤","can_delete":false,"product_type":"c1","uid":1449474,"ip_address":"","ucode":"4D627CFA5A4B82","user_header":"https://static001.geekbang.org/account/avatar/00/16/1e/02/2864e0f2.jpg","comment_is_top":false,"comment_ctime":1562743645,"is_pvip":false,"replies":[{"id":"63723","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577530593,"ip_address":"","comment_id":112481,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562743645","product_id":100029501,"comment_content":"mysql&gt; DELIMITER &#47;&#47;<br>mysql&gt; CREATE PROCEDURE `get_sum_score`(<br>    -&gt;        OUT sum_max_hp FLOAT,<br>    -&gt;        s VARCHAR(255)<br>    -&gt;        )<br>    -&gt; BEGIN<br>    -&gt;        SELECT SUM(hp_max) FROM heros WHERE role_main = s INTO sum_max_hp; <br>    -&gt; END &#47;&#47;<br>Query OK, 0 rows affected (0.00 sec)<br><br>mysql&gt; DELIMITER ;<br>mysql&gt; CALL get_sum_score(@sum_max_hp, &#39;æ³•å¸ˆ&#39;);<br>Query OK, 1 row affected (0.00 sec)<br><br>mysql&gt; SELECT @sum_max_hp;<br>+-------------+<br>| @sum_max_hp |<br>+-------------+<br>|      111317 |<br>+-------------+<br>1 row in set (0.00 sec)<br><br>","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457755,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577530593,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112452,"user_name":"å†è§æ¹–æ°´","can_delete":false,"product_type":"c1","uid":1580023,"ip_address":"","ucode":"2B384DB0F5DC3D","user_header":"https://static001.geekbang.org/account/avatar/00/18/1b/f7/b839e412.jpg","comment_is_top":false,"comment_ctime":1562738524,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562738524","product_id":100029501,"comment_content":"DROP PROCEDURE IF EXISTS get_sum_score<br>DELIMITER&#47;&#47;<br>CREATE PROCEDURE get_sum_score<br>(s VARCHAR(255),<br>OUT sum_max_hp FLOAT)<br>BEGIN <br>SELECT SUM(`hp_max`) FROM `heros` WHERE `role_main`=s INTO sum_max_hp;<br>END&#47;&#47;<br>DELIMITER;<br><br>CALL get_sum_score(@sum_max_hp,&#39;æˆ˜å£«&#39;);<br>SELECT @sum_max_hp<br><br>è€å¸ˆä¸ºä»€ä¹ˆå‡ºç°OUT or INOUT argument 2 for routine myemployees.get_sum_score is not a variable or NEW pseudo-variable in BEFORE triggerçš„é”™è¯¯ è°¢è°¢å•¦","like_count":0},{"had_liked":false,"id":112419,"user_name":"hlz-123","can_delete":false,"product_type":"c1","uid":1433586,"ip_address":"","ucode":"B7E5EF0C260BD2","user_header":"","comment_is_top":false,"comment_ctime":1562730030,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562730030","product_id":100029501,"comment_content":"DROP PROCEDURE IF EXISTS get_sum_core;<br>DELIMITER &#47;&#47;<br>CREATE PROCEDURE get_sum_core(<br>                 OUT sum_score FLOAT,<br>                 IN roleMain VARCHAR(255)<br>                 )<br>BEGIN<br>     SELECT SUM(hp_max) AS sum_hp_max FROM heros <br>            WHERE role_main=roleMain INTO sum_score;<br>END &#47;&#47;<br>DELIMITER ;<br>CALL get_sum_core(@sum_score,&#39;æˆ˜å£«&#39;);<br>SELECT @sum_score;","like_count":0},{"had_liked":false,"id":112413,"user_name":"TKbook","can_delete":false,"product_type":"c1","uid":1073829,"ip_address":"","ucode":"F6E0E99CC79059","user_header":"https://static001.geekbang.org/account/avatar/00/10/62/a5/43aa0c27.jpg","comment_is_top":false,"comment_ctime":1562729509,"is_pvip":false,"replies":[{"id":"63725","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577530612,"ip_address":"","comment_id":112413,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562729509","product_id":100029501,"comment_content":"CREATE DEFINER=`root`@`localhost` PROCEDURE `get_sum_score`(OUT `hp_sum` float,IN `role` varchar(255))<br>BEGIN<br>\tSELECT sum(hp_max) FROM heros WHERE role_main = role INTO hp_sum;<br>END","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457723,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577530612,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112408,"user_name":"ä¸€å¶çŸ¥ç§‹","can_delete":false,"product_type":"c1","uid":1445189,"ip_address":"","ucode":"15A95FA86B7AE4","user_header":"https://static001.geekbang.org/account/avatar/00/16/0d/45/b88a1794.jpg","comment_is_top":false,"comment_ctime":1562729297,"is_pvip":false,"replies":[{"id":"63726","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577530617,"ip_address":"","comment_id":112408,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562729297","product_id":100029501,"comment_content":"mysql&gt; delimiter &#47;&#47;<br>mysql&gt; create procedure get_sum_score(out sum_hp float, in main_type varchar(255))<br>    -&gt; begin<br>    -&gt; select sum(hp_max) from heros where role_main=main_type into sum_hp;<br>    -&gt; end&#47;&#47;<br>Query OK, 0 rows affected (0.00 sec)<br><br>mysql&gt; delimiter ;<br><br>","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457721,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577530617,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112380,"user_name":"Abyssknight","can_delete":false,"product_type":"c1","uid":1336361,"ip_address":"","ucode":"08E8D68E4B76BB","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/29/da537902.jpg","comment_is_top":false,"comment_ctime":1562725785,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562725785","product_id":100029501,"comment_content":"drop procedure if exists get_sum_score;<br>create procedure get_sum_score(in role varchar(255))<br>begin<br>  select sum(hp_max) as sum_hp_max from heros where role_main = role;<br>end;<br><br>call get_sum_score(&#39;æˆ˜å£«&#39;);","like_count":0},{"had_liked":false,"id":112353,"user_name":"Defensor","can_delete":false,"product_type":"c1","uid":1575714,"ip_address":"","ucode":"BA636359596936","user_header":"https://static001.geekbang.org/account/avatar/00/18/0b/22/a26031d6.jpg","comment_is_top":false,"comment_ctime":1562722903,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1562722903","product_id":100029501,"comment_content":"CREATE PROCEDURE `get_hero_scores`(<br>       OUT max_max_hp FLOAT,<br>       OUT min_max_mp FLOAT,<br>       OUT avg_max_attack FLOAT,  <br>       s VARCHAR(255)<br>       )<br>BEGIN<br>       SELECT MAX(hp_max), MIN(mp_max), AVG(attack_max) FROM heros WHERE role_main = s INTO max_max_hp, min_max_mp, avg_max_attack;<br>END<br> è€å¸ˆè¿™ä¸ªä¾‹å­ä¸­çš„sä¸ºä»€ä¹ˆæ²¡æœ‰æ ‡æ˜INå‘¢","like_count":0,"discussions":[{"author":{"id":1336361,"avatar":"https://static001.geekbang.org/account/avatar/00/14/64/29/da537902.jpg","nickname":"Abyssknight","note":"","ucode":"08E8D68E4B76BB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1599,"discussion_content":"å¯èƒ½æ˜¯ä¸æ˜¾å¼å£°æ˜ é»˜è®¤ä¸º in","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562725825,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112330,"user_name":"æŸ¯å¯Ÿé‡‘","can_delete":false,"product_type":"c1","uid":1115149,"ip_address":"","ucode":"F722BF8FCD2C47","user_header":"https://static001.geekbang.org/account/avatar/00/11/04/0d/3dc5683a.jpg","comment_is_top":false,"comment_ctime":1562721365,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562721365","product_id":100029501,"comment_content":"è€å¸ˆï¼Œé—®ä¸€ä¸ªä¸ä¸»é¢˜ä¸å¤§ç›¸å…³çš„é—®é¢˜ã€‚ç°åœ¨æœ‰ä¸€æ¡ SQL è¯­å¥ï¼Œæ˜¯ç»Ÿè®¡æœ€è¿‘ä¸€æ®µæ—¶é—´æ¯å¤©è¿›å…¥çš„å®¢æˆ·ã€‚ç”±äºç³»ç»Ÿå­˜æ”¾çš„æ˜¯æ—¶é—´æˆ³ï¼Œselect ä¸­ç”¨å‡½æ•°è¿›è¡Œå°†å…¶è½¬æ¢ä¸ºäº† yyyymmdd æ ¼å¼ã€‚å¤§è‡´æ˜¯è¿™ä¸ªæ ·å­çš„:  select datefunc(createdtime) as day, count(*)as num from customer where createdtime &gt; 1562000000 group by day order by num;<br><br>è¿™ä¸ªè¯­å¥ç‰¹åˆ«æ…¢ï¼Œåˆæ­¥åˆ¤æ–­åŸå› æ˜¯ç”±äºæœ€è¿‘ä¸€æ®µæ—¶é—´åŠ å…¥çš„å®¢æˆ·ç‰¹åˆ«å¤šï¼Œä¼°è®¡æœ‰ä¸Šåƒä¸‡ï¼Œç„¶å select è¯­å¥ä¸­çš„å‡½æ•°è½¬æ¢æ¶ˆè€—äº†å¾ˆå¤šæ—¶é—´ã€‚ä½†æ˜¯ï¼Œä¸è¿›è¡Œæ—¶é—´æˆ³è½¬æ¢ä¸ºæ—¶é—´ï¼Œå°±æ²¡æœ‰åŠæ³•ç»Ÿè®¡æ¯ä¸€å¤©åŠ å…¥å®¢æˆ·çš„æ•°é‡ã€‚<br><br>è€å¸ˆï¼Œæœ‰ä»€ä¹ˆå¥½çš„åŠæ³•æˆ–è€…æ”¹è¿›å»ºè®®å—","like_count":0},{"had_liked":false,"id":112311,"user_name":"ack","can_delete":false,"product_type":"c1","uid":1440912,"ip_address":"","ucode":"69CA1233EEA8E2","user_header":"https://static001.geekbang.org/account/avatar/00/15/fc/90/c9df0459.jpg","comment_is_top":false,"comment_ctime":1562719251,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562719251","product_id":100029501,"comment_content":"DELIMITER &#47;&#47;<br>CREATE PROCEDURE get_sum_score(IN type VARCHAR(255),OUT sum FLOAT)<br>BEGIN<br>  SELECT SUM(hp_max) FROM heros WHERE role_main=type INTO sum;<br>END &#47;&#47;<br>DELEMITER ;","like_count":0}]}