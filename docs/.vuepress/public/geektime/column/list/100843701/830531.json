{"id":830531,"title":"开篇词｜如何成为Go服务开发高手？","content":"<p>你好，我是徐逸，欢迎来到我的 Go 服务开发高手课。</p><p>先简单做个自我介绍。我一直在大厂使用 Go 做开发工作。先前负责过腾讯云网络自动化平台、腾讯少儿教育 App 开心鼠的产品研发。目前，我在另一个大厂负责亿级DAU产品的后端研发工作，通过高并发设计、性能优化和稳定性建设，支撑了部分场景千万DAU、百万QPS访问。</p><p>近些年来，我留意到很多公司和团队开始使用 Go 进行项目开发或是积极转向Go。其中既包括腾讯、阿里、字节这样的大厂，也不乏一些快速发展的新兴赛道（比如Web 3领域）以及创业公司。</p><p>从公司的视角很好理解，选择 Go 就是因为它的超高性价比，在确保功能与性能能够满足业务诉求的前提下，尽可能降低所投入的时间以及人力成本。</p><p>相应地，求职市场上 Go 相关岗位的待遇也比较可观，尤其是高级的 Go 开发者、专家。而想要应聘或者晋升到这个level，就必须要深入了解 Go 语言技术原理，具备高并发、可扩展、高可用方面的实践经验。</p><h2>Go 服务开发面临哪些挑战？</h2><p>虽然Go语言容易上手，但在实践中想真正用Go做好服务开发并不容易。随着公司业务发展，Go项目的复杂度也越来越高，研发除了完成各种产品功能需求外，还要应对技术需求的挑战。</p><p>就我的亲身经验和观察来看，最常见但也最有挑战性的需求是以下几类：</p><!-- [[[read_end]]] --><p>首先就是<strong>性能需求</strong>，这是支撑我们产品或服务发展的核心基础。除了堆机器，我们还需要掌握提升服务吞吐、优化性能的可行方案。</p><p>其次是<strong>可维护需求</strong>，这是我们保证乃至提升工程效率的强大保障。这需要我们掌握项目拆分、目录结构和代码设计的相关技巧。</p><p>最后还有<strong>稳定性需求</strong>，为了把故障消灭在萌芽里，服务的稳定可靠也十分重要。为了保障服务的稳定性，我们需要掌握常见保障服务稳定性的Go编码技巧和架构、流程手段。</p><p>可以说应对上面这些需求，既是我们Go开发者的必修课，也是<strong>区分初级Go开发和中高级Go开发的分水岭。</strong></p><h2>成为Go服务开发高手难在哪？</h2><p>不过比起单纯掌握Go语言来说，想要掌握这些技能并不容易。</p><p>根据我的观察，很多人都挣扎在一知半解的状态，要么对原理一知半解，<strong>要么是编码、架构和流程方面的技能不扎实，或者虽然有相关知识的储备，但就是不会用。</strong></p><p>比如性能优化方面，虽然知道一些用协程做并发处理的技巧，但并不清楚原理。这样一来，遇到延时问题，就可能会盲目地增加协程数量，结果反而导致系统资源过度消耗，性能下降，而又无法从原理层面去分析和解决。</p><p>还有些同学，对Go语言原理很熟悉，但是当真正碰到性能任务时，却不知道该如何快速定位性能瓶颈。而且，知道了瓶颈，除了语言编码方面，也不知道该怎么从框架和架构层面做优化。</p><p>再比如系统可维护方面，很多人虽然会注意命名规范，但是项目的目录结构却非常混乱，不注意按职责分层，这直接升高了理解和修改的成本。</p><p>我还留意到，有一些人虽然学习过设计模式方面的知识，但在实际的项目实践当中，却并不清楚应当如何去运用这些设计模式。</p><p>就拿常见的情况来说，在代码中时常会出现很长一串 if-else 语句块来处理不同的情况。但实际上，其中有不少场景是可以借助策略模式来解决的，可我们要么压根就没有想到能够运用策略模式来处理，要么甚至都没有意识到，自己所编写的代码在本质上其实已经趋近于使用了策略模式，只是没有以一种规范、清晰的策略模式结构来呈现。</p><p>同样，在服务稳定性方面，很多朋友也存在知识盲区。比如说虽然知道灰度发布，但没掌握灰度发布过程要点，最后导致大批量线上用户下不了单，造成事故。在架构上，有些人也不知道该怎么保障线上服务的稳定性。比如偶尔有突发流量，服务直接被打爆，不知道提前限流。或者是下游有问题，不知道该怎么降级，也不知道怎么防护自身，导致核心业务场景受损。</p><p>说了这么多，其实我们和高手的差距无非是这三个层面：</p><ul>\n<li><strong>Know What（是什么）</strong>：性能、可维护性、稳定性方面的知识和技能缺失。</li>\n<li><strong>Know How（怎么做）</strong>：掌握了一定的知识和技能，但不知道该如何用到实处。</li>\n<li><strong>Know Why（为什么）</strong>：虽然积累了一定的技巧和解决方案，但并没掌握底层原理，情况稍一复杂就无法灵活应对。</li>\n</ul><h2>我们课程是如何设计的？</h2><p>我始终认为，任何技术都是为了解决问题而存在的，所以我结合自己工作中的实践、思考和总结写下了这门课程，目的是让你能够<strong>独立应对并高效解决生产实践里的技术难题，成为 Go服务开发领域的高手。</strong></p><p>为了实现这一目标，大部分课程我们都会先还原生产实践场景里的痛点问题，然后一步步分析和动手实现，剖析相关原理，最终让你真正融会贯通。</p><p>比如说学习高性能数据的处理技巧（第四节课），我们就会从一段有性能问题的代码开始，带你用火焰图和Benchmark工具去做性能优化，在这个过程中，逐步学习Go语言底层是如何实现的，为什么这些处理技巧可以提升性能。</p><p>在比如讲如何组织项目目录结构（第十六节课），我们也不是上来就直接介绍一个清晰的项目目录结构，而是会从一个维护复杂的大文件开始，带你逐步重构成分层目录结构，让你知道目录的每一层是怎么来的，为什么要分层。</p><p>再说说这门课程的整体规划，一共分为3章。</p><p><strong>第一章：高性能实践</strong></p><p>高并发场景下对性能有着极致要求，需要从多个关键方面进行优化。这个部分我们学习服务性能优化流程、性能优化工具、高性能编码和架构技巧等，让你在高并发场景下如鱼得水，轻松应对各种性能挑战。</p><p><strong>第二章：代码可维护实践</strong></p><p>代码可维护是软件长期发展的关键。这部分我们将学习 Go 语言中实现维护性强的项目的各种实践，包括项目拆分、目录结构设计、常用的设计原则和设计模式、函数设计等。让你打造出易于扩展、容易理解的高质量软件系统。</p><p><strong>第三章：服务稳定性实践</strong></p><p>软件系统的稳定、可靠也至关重要。第三章包含编码、架构和流程3个方面，我们将掌握Go编程中容易踩的坑和编码规范，并学习如何从架构和流程上保证服务的稳定性（包括熔断、降级、限流、隔离、灰度发布等）。</p><h2>学完这门课你将获得什么？</h2><p>说了这么多，这门课到底能让你学到哪些具体的技能点呢？我用一张图展示一下。</p><p><img src=\"https://static001.geekbang.org/resource/image/45/8d/4542cfa1137d993d2576d3aed2f1748d.jpg?wh=3992x1828\" alt=\"\"><br>\n当然，这门课目的不仅是想教给你一个个技能点，而是想让你掌握解决服务性能、代码维护性、稳定性方面实际问题的能力。学完整门课程之后，我们将会达成以下目标：</p><ul>\n<li>\n<p>掌握 Go 在高并发低延时场景下的性能优化方案，能够设计和编写出高性能的系统，提升服务吞吐，降低接口延时。</p>\n</li>\n<li>\n<p>学会构建维护性强的 Go 项目和代码结构，能够轻松应对未来的功能扩展和需求变化，提高代码的可读性和可扩展性。</p>\n</li>\n<li>\n<p>了解 Go 容易踩的坑和代码规范，从流程和架构上保障服务稳定性，确保写出无bug、稳定运行的系统，增强系统的稳定性。</p>\n</li>\n<li>\n<p>提升整体的 Go 编码和架构水平，能够开发出高效、可靠、易于维护的软件系统，为企业和个人项目带来更大的价值。</p>\n</li>\n</ul><p>最后，关于怎么学习这门课，我还想给你一些建议。</p><ol>\n<li>\n<p>第一，注重实战。课程所有的演示源码，我都会放在 <a href=\"https://github.com/xuyi19921216/server-go/tree/master\">Github</a> 上。建议你学习完每节的图文内容以后，亲自动手跑跑代码，看看实际效果。</p>\n</li>\n<li>\n<p>第二，注重思考。课程里的内容来自于我从工作实践中的思考和总结。我希望你在学习的时候，除了关注技能点，还能留意技能的使用场景，掌握我用这个技能点解决问题的思考过程。这样你才能举一反三，把学到内容在实际工作里灵活运用。</p>\n</li>\n</ol><p>高手不是一蹴而就的奇迹，而是稳定持续地变强。让我们踏上Go服务开发高手的修炼之旅，一同迎接更广阔的未来！</p>","comments":[{"had_liked":false,"id":396255,"user_name":"请务必优秀","can_delete":false,"product_type":"c1","uid":2025816,"ip_address":"湖北","ucode":"2B7AE4EF41C972","user_header":"https://static001.geekbang.org/account/avatar/00/1e/e9/58/7bb2c561.jpg","comment_is_top":false,"comment_ctime":1733763756,"is_pvip":true,"replies":[{"id":143852,"content":"后面的章节，很多都是从案例带你一步步去分析优化的～","user_name":"作者回复","user_name_real":"编辑","uid":1313417,"ctime":1733842629,"ip_address":"广东","comment_id":396255,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100843701,"comment_content":"希望有一些实际的生产故障案例排查案例过程","like_count":1,"discussions":[{"author":{"id":1313417,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0a/89/eb8c28a4.jpg","nickname":"徐逸","note":"","ucode":"DCFDEE08FD263A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":654951,"discussion_content":"后面的章节，很多都是从案例带你一步步去分析优化的～","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1733842629,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":1,"child_discussions":[{"author":{"id":2025816,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/e9/58/7bb2c561.jpg","nickname":"请务必优秀","note":"","ucode":"2B7AE4EF41C972","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1313417,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0a/89/eb8c28a4.jpg","nickname":"徐逸","note":"","ucode":"DCFDEE08FD263A","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":654958,"discussion_content":"期待","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1733881512,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":654951,"ip_address":"湖北","group_id":0},"score":654958,"extra":""}]}]},{"had_liked":false,"id":396254,"user_name":"请务必优秀","can_delete":false,"product_type":"c1","uid":2025816,"ip_address":"湖北","ucode":"2B7AE4EF41C972","user_header":"https://static001.geekbang.org/account/avatar/00/1e/e9/58/7bb2c561.jpg","comment_is_top":false,"comment_ctime":1733763683,"is_pvip":true,"replies":[{"id":143848,"content":"用Rust重写，本质是牺牲一定的研发效率来提升服务性能。目前了解到的情况，只有少数C端高性能场景会用Rust重写，目前是两类服务：\n1.服务集群CPU核数比较多，成本比较高的服务。这样的服务用Rust重写，可以用更少的CPU满足相同QPS的性能需求，达到降本的目的。\n2.数据大量缓存在本地内存的服务。目前Golang GC会导致服务延时抖动，用bigcache类的框架可以避免GC，但是会增加反序列化开销，而且也不是很方便，因为Rust没有GC，因此这类服务也可能会去用Rust重构。","user_name":"作者回复","user_name_real":"编辑","uid":1313417,"ctime":1733828645,"ip_address":"广东","comment_id":396254,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100843701,"comment_content":"老师对目前字节部分服务开始go转rust怎么看呢，甚至会将一个go服务其中一部分用动态链接库的形式拿rust重构","like_count":1,"discussions":[{"author":{"id":1313417,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0a/89/eb8c28a4.jpg","nickname":"徐逸","note":"","ucode":"DCFDEE08FD263A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":654945,"discussion_content":"用Rust重写，本质是牺牲一定的研发效率来提升服务性能。目前了解到的情况，只有少数C端高性能场景会用Rust重写，目前是两类服务：\n1.服务集群CPU核数比较多，成本比较高的服务。这样的服务用Rust重写，可以用更少的CPU满足相同QPS的性能需求，达到降本的目的。\n2.数据大量缓存在本地内存的服务。目前Golang GC会导致服务延时抖动，用bigcache类的框架可以避免GC，但是会增加反序列化开销，而且也不是很方便，因为Rust没有GC，因此这类服务也可能会去用Rust重构。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1733828646,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":1,"child_discussions":[{"author":{"id":2025816,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/e9/58/7bb2c561.jpg","nickname":"请务必优秀","note":"","ucode":"2B7AE4EF41C972","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1313417,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0a/89/eb8c28a4.jpg","nickname":"徐逸","note":"","ucode":"DCFDEE08FD263A","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":654959,"discussion_content":"了解，老师比我之前了解到的解释的更详细，我是基础架构方向，我这个领域目前的大趋势基本都是在用rust重构db和消息队列这些，所以想看看除了go之外，多会一门  应该机会会更多","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1733881692,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":654945,"ip_address":"湖北","group_id":0},"score":654959,"extra":""}]}]},{"had_liked":false,"id":396544,"user_name":"WenjieXu","can_delete":false,"product_type":"c1","uid":1218138,"ip_address":"上海","ucode":"E76EF8A64EABF2","user_header":"https://static001.geekbang.org/account/avatar/00/12/96/5a/45a56b3a.jpg","comment_is_top":false,"comment_ctime":1734879969,"is_pvip":false,"replies":[{"id":143955,"content":"🤝相信一定能有收获～","user_name":"作者回复","user_name_real":"编辑","uid":1313417,"ctime":1734994078,"ip_address":"广东","comment_id":396544,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100843701,"comment_content":"创作不易，支持一下！正好想系统看下性能调优方面的知识。","like_count":0,"discussions":[{"author":{"id":1313417,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0a/89/eb8c28a4.jpg","nickname":"徐逸","note":"","ucode":"DCFDEE08FD263A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":655457,"discussion_content":"🤝相信一定能有收获～","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1734994078,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":396454,"user_name":"🇲 🇳 🇸 🇮 🇳 🇷","can_delete":false,"product_type":"c1","uid":2626977,"ip_address":"北京","ucode":"ECE45138BE7C1F","user_header":"https://static001.geekbang.org/account/avatar/00/28/15/a1/eb056e50.jpg","comment_is_top":false,"comment_ctime":1734515877,"is_pvip":false,"replies":[{"id":143925,"content":"👏学完一定会有收获的～","user_name":"作者回复","user_name_real":"编辑","uid":1313417,"ctime":1734584999,"ip_address":"广东","comment_id":396454,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100843701,"comment_content":"希望有所收获！","like_count":0,"discussions":[{"author":{"id":1313417,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0a/89/eb8c28a4.jpg","nickname":"徐逸","note":"","ucode":"DCFDEE08FD263A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":655306,"discussion_content":"👏学完一定会有收获的～","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1734585000,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":396304,"user_name":"Geek_2302dc","can_delete":false,"product_type":"c1","uid":2102405,"ip_address":"北京","ucode":"06C2FD009B37F3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/VYAcsjtkT1VGwEqdfQjoNSCSw5FkG3iaS4mpLaLqoEztp2bGSRjKD9mqeWtWIslxWmXBq1wSpIHL0UicpR3n8Y1Q/132","comment_is_top":false,"comment_ctime":1733915430,"is_pvip":false,"replies":[{"id":143868,"content":"👍👍，后面会有很多工作中的问题场景和解决过程","user_name":"作者回复","user_name_real":"编辑","uid":1313417,"ctime":1734006777,"ip_address":"广东","comment_id":396304,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100843701,"comment_content":"刚准备好好学一下，发现老师还在写，支持一下，希望能结合实际场景深入浅出的讲一下","like_count":0,"discussions":[{"author":{"id":1313417,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0a/89/eb8c28a4.jpg","nickname":"徐逸","note":"","ucode":"DCFDEE08FD263A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":655029,"discussion_content":"👍👍，后面会有很多工作中的问题场景和解决过程","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1734006777,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":396271,"user_name":"彭梦清","can_delete":false,"product_type":"c1","uid":1966277,"ip_address":"湖北","ucode":"1628983F0E0996","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/RmhTHaZ6YNLG1PSgiapPeTicuoedxjXLVk3gzp7sLJkAFRvhmuul042MyhWwIRah59EicjHzfwtJOib0swcTPnErkQ/132","comment_is_top":false,"comment_ctime":1733827201,"is_pvip":false,"replies":[{"id":143851,"content":"加油～","user_name":"作者回复","user_name_real":"编辑","uid":1313417,"ctime":1733842432,"ip_address":"广东","comment_id":396271,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100843701,"comment_content":"支持大佬","like_count":0,"discussions":[{"author":{"id":1313417,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0a/89/eb8c28a4.jpg","nickname":"徐逸","note":"","ucode":"DCFDEE08FD263A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":654950,"discussion_content":"加油～","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1733842432,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":396238,"user_name":"CodeFish-Xiao","can_delete":false,"product_type":"c1","uid":2217807,"ip_address":"广东","ucode":"E0834E4560B0BE","user_header":"https://static001.geekbang.org/account/avatar/00/21/d7/4f/5059c43a.jpg","comment_is_top":false,"comment_ctime":1733722890,"is_pvip":false,"replies":[{"id":143844,"content":"👋加油，相信学完你一定会收获满满～","user_name":"作者回复","user_name_real":"编辑","uid":1313417,"ctime":1733756070,"ip_address":"广东","comment_id":396238,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100843701,"comment_content":"看这个大纲感觉挺有用的，可以追一手\n","like_count":0,"discussions":[{"author":{"id":1313417,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0a/89/eb8c28a4.jpg","nickname":"徐逸","note":"","ucode":"DCFDEE08FD263A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":654910,"discussion_content":"👋加油，相信学完你一定会收获满满～","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1733756070,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]}]}