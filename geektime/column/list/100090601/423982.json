{"id":423982,"title":"09ï½œè‡ªç ”orå€ŸåŠ›ï¼ˆä¸‹ï¼‰ï¼šé›†æˆGinæ›¿æ¢å·²æœ‰æ ¸å¿ƒ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯è½©è„‰åˆƒã€‚</p><p>åœ¨ä¸Šä¸€èŠ‚è¯¾ï¼Œæ¯”å¯¹äº† Gin æ¡†æ¶å’Œæˆ‘ä»¬ä¹‹å‰å†™çš„æ¡†æ¶ï¼Œæ˜ç¡®æ¡†æ¶è®¾è®¡çš„ç›®æ ‡æ˜¯ï¼Œè¦è®¾è®¡å‡ºçœŸæ­£å…·æœ‰å®ç”¨æ€§çš„ä¸€ä¸ªå·¥ä¸šçº§æ¡†æ¶ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥ä¼šåŸºäºç°æœ‰çš„æ¯”è¾ƒæˆç†Ÿçš„ Gin æ¡†æ¶ï¼Œå¹¶ä¸”å¥½å¥½åˆ©ç”¨å…¶ä¸­é—´ä»¶çš„ç”Ÿæ€ï¼Œç«™åœ¨å·¨äººçš„è‚©è†€ï¼Œç»§ç»­æ­å»ºè‡ªå·±çš„æ¡†æ¶ã€‚</p><h2>å¦‚ä½•å€ŸåŠ›ï¼Œè®¨è®ºå¼€æºé¡¹ç›®çš„è®¸å¯åè®®</h2><p>æœ‰çš„äººå¯èƒ½å°±æœ‰ç‚¹å›°æƒ‘äº†ï¼Œè¿™æ ·å€Ÿé‰´å…¶ä»–æ¡†æ¶æˆ–è€…å…¶ä»–åº“ä¸æ˜¯ä¾µæƒè¡Œä¸ºå—ï¼Ÿ</p><p>è¦è§£ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¾—å…ˆææ¸…æ¥šç«™åœ¨å·¨äººè‚©è†€æ˜¯è¦åšä»€ä¹ˆæ“ä½œã€‚å€Ÿé‰´å’Œä½¿ç”¨ Gin æ¡†æ¶ä½œä¸ºæˆ‘ä»¬çš„åº•å±‚æ¡†æ¶åŸºæœ¬æ€è·¯æ˜¯ï¼Œä»¥å¤åˆ¶çš„å½¢å¼å°† Gin æ¡†æ¶å¼•å…¥åˆ°æˆ‘ä»¬çš„è‡ªç ”æ¡†æ¶ä¸­ï¼Œæ›¿æ¢å’Œä¿®æ”¹ä¹‹å‰å®ç°çš„å‡ ä¸ªæ ¸å¿ƒæ¨¡å—ã€‚</p><p>æˆ‘ä»¬åç»­ä¼šåœ¨è¿™ä¸ªä»¥ Gin ä¸ºæ ¸å¿ƒçš„æ–°æ¡†æ¶ä¸Šï¼Œè¿›è¡Œå…¶ä½™æ ¸å¿ƒæˆ–è€…éæ ¸å¿ƒæ¡†æ¶æ¨¡å—çš„è®¾è®¡å’Œå¼€å‘ï¼ŒåŒæ—¶æˆ‘ä»¬ä¹Ÿéœ€è¦æ‰¾åˆ°æ¯”è¾ƒå¥½çš„æ–¹å¼ï¼Œèƒ½å°† Gin ç”Ÿæ€ä¸­ä¸°å¯Œçš„å¼€æºä¸­é—´ä»¶è¿›è¡Œå¤åˆ¶å’Œä½¿ç”¨ã€‚</p><p>ç°åœ¨æˆ‘ä»¬å†æ¥å›ç­”æ˜¯å¦ä¾µæƒçš„é—®é¢˜ï¼Œé¦–å…ˆå¾—äº†è§£å¼€æºè®¸å¯è¯ï¼Œå¹¶ä¸”çŸ¥é“å¯ä»¥å¯¹ Gin æ¡†æ¶åšäº›ä»€ä¹ˆæ“ä½œï¼Ÿ</p><p>å¼€æºç¤¾åŒºæœ‰éå¸¸å¤šçš„å¼€æºé¡¹ç›®ï¼Œæ¯ä¸ªé¡¹ç›®éƒ½éœ€è¦æœ‰è®¸å¯è¯´æ˜ï¼ŒåŒ…å«ï¼šæ˜¯å¦å¯ä»¥å¼•ç”¨ã€æ˜¯å¦å…è®¸ä¿®æ”¹ã€æ˜¯å¦å…è®¸å•†ç”¨ç­‰ã€‚ç›®å‰çš„å¼€æºè®¸å¯è¯æœ‰éå¸¸å¤šç§ï¼Œæ¯ä¸ªè®¸å¯è¯éƒ½æ˜¯ä¸€ä»½ä½¿ç”¨è¿™ä¸ªå¼€æºé¡¹ç›®éœ€è¦éµå®ˆçš„åè®®ï¼Œè€Œä¸»æµçš„å¼€æºè®¸å¯è¯åœ¨ OSI ç»„ç»‡ï¼ˆå¼€æ”¾æºä»£ç ä¿ƒè¿›ä¼šï¼‰éƒ½æœ‰ <a href=\"https://opensource.org/licenses\">ç™»è®°</a> ã€‚<strong>æœ€ä¸»æµçš„å¼€æºè®¸å¯è¯æœ‰ 6 ç§ï¼šApacheã€BSDã€GPLã€LGPLã€MITã€Mozillia</strong>ã€‚</p><!-- [[[read_end]]] --><p>BSD è®¸å¯è¯ã€MIT è®¸å¯è¯å’Œ Apache è®¸å¯è¯å±äºä¸‰ä¸ªæ¯”è¾ƒå®½æ¾çš„è®¸å¯ï¼Œéƒ½å…è®¸å¯¹æºä»£ç è¿›è¡Œä¿®æ”¹ï¼Œä¸”å¯ä»¥åœ¨é—­æºè½¯ä»¶ä¸­ä½¿ç”¨ï¼ŒåŒºåˆ«åœ¨äºå¯¹æ–°çš„ä¿®æ”¹ï¼Œæ˜¯å¦å¿…é¡»ä½¿ç”¨åŸå…ˆçš„è®¸å¯è¯æ ¼å¼ï¼Œä»¥åŠä¿®æ”¹åçš„è½¯ä»¶æ˜¯å¦èƒ½ä»¥åŸè½¯ä»¶çš„åä¹‰è¿›è¡Œé”€å”®ç­‰ã€‚</p><p>æˆ‘ä»¬è¿™é‡Œé‡ç‚¹è®²ä¸€ä¸‹ Gin æ¡†æ¶ä½¿ç”¨çš„ <a href=\"https://github.com/gin-gonic/gin/blob/master/LICENSE\">MITå¼€æºè®¸å¯è¯</a> ï¼Œè¿™ä¸ªè®¸å¯è¯å†…å®¹éå¸¸ç®€å•ï¼Œå¯¹ä½¿ç”¨è€…çš„è¦æ±‚ä¹Ÿæœ€ä½ã€‚</p><ul>\n<li>å…è®¸è¢«è®¸å¯äººä½¿ç”¨ã€å¤åˆ¶ã€ä¿®æ”¹ã€åˆå¹¶ã€å‡ºç‰ˆå‘è¡Œã€æ•£å¸ƒã€å†è®¸å¯ã€å”®å–è½¯ä»¶åŠè½¯ä»¶å‰¯æœ¬ã€‚</li>\n<li>å”¯ä¸€æ¡ä»¶æ˜¯åœ¨è½¯ä»¶å’Œè½¯ä»¶å‰¯æœ¬ä¸­å¿…é¡»åŒ…å«è‘—ä½œæƒå£°æ˜å’Œæœ¬è®¸å¯å£°æ˜ã€‚</li>\n</ul><p>æ‰€ä»¥å¦‚æœè½¯ä»¶ç”¨çš„æ˜¯MITè®¸å¯è¯ï¼Œä¸ç®¡ä½ å¼€å‘çš„é¡¹ç›®æ˜¯å¼€æºçš„ï¼Œè¿˜æ˜¯å•†ä¸šé—­æºçš„ï¼Œéƒ½å¯ä»¥æ”¾å¿ƒä½¿ç”¨è¿™ä¸ªè½¯ä»¶ï¼Œ<strong>åªéœ€è¦åœ¨è½¯ä»¶ä¸­åŒ…å«è‘—ä½œæƒå£°æ˜å’Œè®¸å¯åè®®å£°æ˜å°±è¡Œï¼Œä¸”ä¸è¦æ±‚æ–°çš„æ–‡ä»¶å¿…é¡»ä½¿ç”¨ MIT åè®®</strong>ã€‚</p><p>ä»¥ä½¿ç”¨äº† MIT åè®®çš„ Gin æ¡†æ¶ä¸ºä¾‹ï¼Œä½ å¯ä»¥åœ¨æ–°é¡¹ç›®ä¸­ä»¥å¼•ç”¨æˆ–è€…å¤åˆ¶çš„å½¢å¼ï¼Œä½¿ç”¨ Gin æ¡†æ¶ï¼Œä¹Ÿå…è®¸ä½ åœ¨å¤åˆ¶çš„ Gin æ¡†æ¶ä¸­è¿›è¡Œä¿®æ”¹ï¼Œä¿®æ”¹å¯ä»¥ä¸ç”¨æ³¨æ˜ Gin çš„ç‰ˆæƒï¼Œä½†æ˜¯éä¿®æ”¹éƒ¨åˆ†æ˜¯éœ€è¦åŒ…å«ç‰ˆæƒå£°æ˜çš„ã€‚</p><p>æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨å¤åˆ¶å½¢å¼ä½¿ç”¨ Gin æ¡†æ¶çš„è¯ï¼Œéœ€è¦åœ¨ Gin æ¡†æ¶æ¯ä¸ªæ–‡ä»¶çš„å¤´éƒ¨ï¼Œå¢åŠ ä¸Šè‘—ä½œæƒå’Œè®¸å¯å£°æ˜ï¼š</p><pre><code class=\"language-go\">// Copyright 2014 Manu Martinez-Almeida.&nbsp; All rights reserved.\n// Use of this source code is governed by a MIT style\n// license that can be found in the LICENSE file.\n</code></pre><h2>å¦‚ä½•å°† Gin è¿ç§»è¿›å…¥æˆ‘ä»¬çš„æ¡†æ¶</h2><p>æ˜ç¡®äº† Gin æ˜¯å…è®¸è¢«å¤åˆ¶ã€ä¿®æ”¹å’Œåˆå¹¶è¿›å…¥æˆ‘ä»¬çš„æ¡†æ¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹è§„åˆ’è¿ç§»çš„å…·ä½“æ–¹æ¡ˆäº†ã€‚</p><p>é¦–å…ˆç¡®å®š Gin çš„è¿ç§»ç‰ˆæœ¬ï¼Œæˆªæ­¢åˆ°ç›®å‰ï¼ˆ2021 å¹´ 8 æœˆ 14 æ—¥ï¼‰æœ€æ–°çš„ Gin ç‰ˆæœ¬ä¸º 1.7.3ï¼Œæ‰€ä»¥æˆ‘ä»¬å°† Gin çš„ç‰ˆæœ¬ç¡®å®šä¸º <a href=\"https://github.com/gin-gonic/gin/releases/tag/v1.7.3\">1.7.3</a> ã€‚</p><p>åœ¨ Golang ä¸­ï¼Œè¦åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­å¼•å…¥å¦å¤–ä¸€ä¸ªé¡¹ç›®ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§åšæ³•ï¼Œä¸€ç§åšæ³•æ˜¯<strong>æŠŠè¦å¼•ç”¨çš„é¡¹ç›®é€šè¿‡ go mod å¼•å…¥åˆ°ç›®æ ‡åº“ä¸­</strong>ï¼Œè€Œå¦å¤–ä¸€ç§åšæ³•åˆ™è´¹åŠ²çš„å¤šï¼Œ<strong>ä½¿ç”¨å¤åˆ¶æºç çš„æ–¹å¼å¼•å…¥è¦å¼•ç”¨çš„é¡¹ç›®</strong>ã€‚</p><p>go mod æ˜¯ Go å®˜æ–¹æä¾›çš„ç¬¬ä¸‰æ–¹åº“ç®¡ç†å·¥å…·ã€‚go mod çš„ä½¿ç”¨æ–¹å¼æ˜¯åœ¨ä»£ç æ–¹é¢ï¼Œä¹Ÿå°±æ˜¯åœ¨ä½ è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“åŠŸèƒ½çš„æ—¶å€™ï¼Œä½¿ç”¨ import å…³é”®å­—è¿›è¡Œå¼•ç”¨ã€‚å®ƒçš„å¥½å¤„æ˜¯ç®€å•æ–¹ä¾¿ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨å®˜æ–¹æä¾›çš„ go get æ–¹æ³•ï¼Œå°±èƒ½å°†æŸä¸ªæ¡†æ¶è¿›è¡Œä½¿ç”¨å’Œå‡çº§ã€‚</p><p>ä½†æ˜¯å¦‚æœå¸Œæœ›å¯¹ç¬¬ä¸‰æ–¹åº“è¿›è¡Œæºç çº§åˆ«çš„ä¿®æ”¹ï¼Œgo mod çš„æ–¹å¼å°±ä¼šå—åˆ°é™åˆ¶äº†ã€‚æ¯”å¦‚æˆ‘ä»¬ä½¿ç”¨äº† Gin é¡¹ç›®ï¼Œæƒ³æ‰©å±•é¡¹ç›®ä¸­çš„ Context è¿™ä¸ªç»“æ„ï¼Œä¸ºå…¶å¢åŠ ä¸€ä¸ªå‡½æ•°æ–¹æ³• Aï¼Œè¿™ä¸ªéœ€æ±‚ç”¨ go mod çš„æ–¹å¼æ˜¯åšä¸åˆ°çš„ã€‚</p><p>go mod çš„æ–¹å¼æå€¡çš„æ˜¯â€œä½¿ç”¨ç¬¬ä¸‰æ–¹åº“â€è€Œä¸æ˜¯â€œå®šåˆ¶ç¬¬ä¸‰æ–¹åº“â€ã€‚æ‰€ä»¥<strong>å¯¹äºå¾ˆå¼ºçš„å®šåˆ¶ç¬¬ä¸‰æ–¹åº“çš„éœ€æ±‚ï¼Œæˆ‘ä»¬åªèƒ½é€‰æ‹©å¤åˆ¶æºç çš„æ–¹å¼</strong>ã€‚</p><p>æœ‰çš„åŒå­¦å¯èƒ½ä¼šè§‰å¾—è¿™ç§æºç å¤åˆ¶çš„æ–¹å¼æœ‰ç‚¹å¥‡æ€ªï¼Œä½†æ˜¯è¿™ç§å¤åˆ¶å‡ºæ¥ï¼Œå†è¿›è¡Œå®šåˆ¶åŒ–çš„æ–¹å¼ï¼Œå…¶å®åœ¨ä¸€äº›é¡¹ç›®ä¸­æ˜¯å¸¸å¸¸å¯ä»¥è§åˆ°çš„ã€‚</p><p>æ¯”å¦‚ Gin æ¡†æ¶åœ¨ä½¿ç”¨ httprouter çš„æ—¶å€™ï¼Œç”±äºè¦å¯¹å…¶è¿›è¡Œæ·±åº¦å®šåˆ¶åŒ–å’Œä¼˜åŒ–ï¼Œæ‰€ä»¥ç›´æ¥å°† httprouter çš„ä»£ç ä»¥å¤åˆ¶çš„æ–¹å¼å¼•å…¥åˆ°è‡ªå·±çš„é¡¹ç›®ä¸­ï¼›ä¸Šä¸€è®²ç®€å•æè¿‡ï¼Œæ¯”è¾ƒæˆåŠŸçš„å¼€æºé¡¹ç›® <a href=\"https://github.com/go-macaron/macaron\">macaron</a> ï¼Œåœ¨é¡¹ç›®çš„æœ€åˆæœŸä¹Ÿæ˜¯å‚è€ƒå¦å¤–ä¸€ä¸ªé¡¹ç›® <a href=\"https://github.com/go-martini/martini\">martini</a> ï¼Œå°† martini ä¸­çš„ä¸€äº›æºç æ‹·è´åè¿›è¡Œä¼˜åŒ–ã€‚æˆ‘ä»¬è¿˜èƒ½åœ¨è¿™ä¸¤ä¸ªé¡¹ç›®çš„æŸäº›ä»£ç æ–‡ä»¶ä¸­çœ‹åˆ°å¯¹ç¬¬ä¸‰æ–¹åº“çš„ç‰ˆæƒç”³æ˜ã€‚</p><p>ç”±äºæˆ‘ä»¬å¯¹Ginæ¡†æ¶æœ‰æ·±åº¦å®šåˆ¶æ”¹é€ çš„éœ€æ±‚ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥ä¹Ÿé‡‡ç”¨æºç å¤åˆ¶çš„æ–¹å¼å¼•å…¥Ginæ¡†æ¶ã€‚é¦–å…ˆå°†Gin1.7.3çš„æºç å®Œæ•´å¤åˆ¶è¿›å…¥é¡¹ç›®ï¼Œå­˜æ”¾åœ¨frameworkç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªginç›®å½•ã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/e0/3a/e0ae3bba9e6775d407893969eb26253a.png?wh=1084x962\" alt=\"\"></p><p>å¤åˆ¶ä¹‹åéœ€è¦åšä¸¤æ­¥æ“ä½œï¼š</p><ul>\n<li>å°†Ginç›®å½•ä¸‹çš„go.modçš„å†…å®¹æ”¾åœ¨é¡¹ç›®ç›®å½•ä¸‹</li>\n</ul><p>æ—¢ç„¶æˆ‘ä»¬ä»¥å¤åˆ¶æºç çš„æ–¹å¼å¼•å…¥äº†Ginï¼Œé‚£ä¹ˆGinçš„åœ°å€å°±æˆä¸ºæˆ‘ä»¬é¡¹ç›®ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒå°±ä¸æ˜¯ä¸€ä¸ªæœ‰go.modçš„ç¬¬ä¸‰æ–¹åº“äº†ï¼Œè€ŒGinåŸæœ¬å¼•å…¥çš„ç¬¬ä¸‰æ–¹åº“ï¼Œæˆä¸ºäº†æˆ‘ä»¬é¡¹ç›®æ‰€éœ€è¦çš„ç¬¬ä¸‰æ–¹åº“ã€‚æ‰€ä»¥ç¬¬ä¸€æ­¥éœ€è¦å°†Ginç›®å½•ä¸‹çš„go.modå’Œgo.sumåˆ é™¤ï¼Œå¹¶ä¸”å°†go.modçš„å†…å®¹å¤åˆ¶åˆ°é¡¹ç›®çš„æ ¹ç›®å½•ä¸­ã€‚</p><ul>\n<li>å°†Ginä¸­åŸæœ‰Ginåº“çš„å¼•ç”¨åœ°å€ï¼Œç»Ÿä¸€æ›¿æ¢ä¸ºå½“å‰é¡¹ç›®çš„åœ°å€</li>\n</ul><p>go.modä¸­çš„moduleä»£è¡¨äº†å½“å‰é¡¹ç›®çš„æ¨¡å—åç§°ï¼Œè€Œåœ¨é¡¹ç›®çš„go.modä¸­ï¼Œæˆ‘ä»¬å°†æˆ‘ä»¬è¿™ä¸ªæ¡†æ¶çš„æ¨¡å—åç§°ä»â€œcoredemoâ€ä¿®æ”¹ä¸ºâ€œgithub.com/gohade/hadeâ€ã€‚åœ¨é¡¹ç›®çš„go.modæ–‡ä»¶ï¼š</p><pre><code class=\"language-go\">module github.com/gohade/hade\n\ngo 1.15\n\nrequire (\n   ...\n)\n\n</code></pre><p>å…¶å®è¿™ä¸ªmoduleå¹¶ä¸ä¸€å®šæ˜¯GitHubä¸Šçš„ä¸€ä¸ªé¡¹ç›®åœ°å€ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å®šä¹‰çš„ï¼Œæˆ‘ä»¬ä¹‹å‰ç”¨çš„coredemoå°±æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„å­—ç¬¦ä¸²ã€‚ä½†æ˜¯å¼€æºé¡¹ç›®çš„æ™®éåšæ³•æ˜¯ï¼Œå°†æ¨¡å—åå®šä¹‰ä¸ºä½ çš„å¼€æºåœ°å€åç§°ï¼Œè¿™æ ·èƒ½è®©å¼€æºé¡¹ç›®ä½¿ç”¨è€…åœ¨å¯¼å…¥åŒ…çš„æ—¶å€™ï¼Œç›´æ¥æ ¹æ®æ¨¡å—åæŸ¥æ‰¾åˆ°å¯¹åº”æ–‡ä»¶ã€‚</p><p>æ‰€æœ‰ç¬¬ä¸‰æ–¹å¼•ç”¨åœ¨æŸ¥è¯¢æ—¶ï¼Œgo.modä¸­çš„å½“å‰æ¨¡å—åç§°ä¸ºgithub.com/gohade/hadeï¼Œé‚£ä¹ˆå¤åˆ¶è¿‡æ¥ä¹‹åï¼Œå¯¹åº”çš„Ginæ¡†æ¶çš„å¼•ç”¨åœ°å€å°±æ˜¯github.com/gohade/hade/framework/ginï¼Œè€ŒGinæ¡†æ¶ä¹‹å‰go.modä¸­çš„æ¨¡å—åç§°ä¸ºgithub.com/gin-gonic/ginã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œ<strong>è¦åšä¸€æ¬¡ç»Ÿä¸€æ›¿æ¢</strong>ï¼Œå°†ä¹‹å‰Ginæ¡†æ¶ä¸­çš„æ‰€æœ‰å¼•ç”¨github.com/gin-gonic/ginçš„åœ°æ–¹æ›¿æ¢ä¸ºgithub.com/gohade/hade/framework/ginã€‚</p><p>æ¯”å¦‚ï¼š</p><pre><code class=\"language-plain\">\"github.com/gin-gonic/gin/binding\"  æ›¿æ¢ä¸º \"github.com/gohade/hade/framework/gin/binding\"\n\"github.com/gin-gonic/gin/render\"  æ›¿æ¢ä¸º \"github.com/gohade/hade/framework/gin/render\"\n</code></pre><p>è¿™é‡Œå°±è¦å€Ÿç”¨IDEçš„å¼ºå¤§æ›¿æ¢å·¥å…·äº†ï¼Œè¿›è¡Œä¸€æ¬¡æ‰¹é‡æ›¿æ¢ã€‚</p><p>åšå®Œä¸Šè¿°ä¸¤æ­¥çš„æ“ä½œä¹‹åï¼Œæˆ‘ä»¬çš„é¡¹ç›®github.com/gohade/hadeå°±åŒ…å«äº†Gin 1.3.7äº†ã€‚ä¸‹é¢å°±æ˜¯é‡å¤´æˆäº†ï¼Œéœ€è¦æ€è€ƒå¦‚ä½•å°†ä¹‹å‰ç ”å‘çš„å®šåˆ¶åŒ–åŠŸèƒ½è¿ç§»åˆ°Ginä¸Šã€‚</p><h2>å¦‚ä½•è¿ç§»</h2><p>é¦–å…ˆï¼Œæ¢³ç†ä¸‹ç›®å‰å·²ç»å®ç°çš„æ¨¡å—ï¼š</p><ul>\n<li>Contextï¼šè¯·æ±‚æ§åˆ¶å™¨ï¼Œæ§åˆ¶æ¯ä¸ªè¯·æ±‚çš„è¶…æ—¶ç­‰é€»è¾‘ï¼›</li>\n<li>è·¯ç”±ï¼šè®©è¯·æ±‚æ›´å¿«å¯»æ‰¾ç›®æ ‡å‡½æ•°ï¼Œå¹¶ä¸”æ”¯æŒé€šé…ç¬¦ã€åˆ†ç»„ç­‰æ–¹å¼åˆ¶å®šè·¯ç”±è§„åˆ™ï¼›</li>\n<li>ä¸­é—´ä»¶ï¼šèƒ½å°†é€šç”¨é€»è¾‘è½¬åŒ–ä¸ºä¸­é—´ä»¶ï¼Œå¹¶ä¸²è”ä¸­é—´ä»¶å®ç°ä¸šåŠ¡é€»è¾‘ï¼›</li>\n<li>å°è£…ï¼šæä¾›æ˜“ç”¨çš„é€»è¾‘ï¼ŒæŠŠ request å’Œ response å°è£…åœ¨ Context ç»“æ„ä¸­ï¼›</li>\n<li>é‡å¯ï¼šå®ç°ä¼˜é›…å…³é—­æœºåˆ¶ï¼Œè®©æœåŠ¡å¯ä»¥é‡å¯ã€‚</li>\n</ul><p>åœ¨ Gin çš„æ¡†æ¶ä¸­ï¼ŒContextã€è·¯ç”±ã€ä¸­é—´ä»¶ï¼Œéƒ½å·²ç»æœ‰äº† Gin è‡ªå·±çš„å®ç°ï¼Œè€Œä¸”æˆ‘ä»¬ä»æºç ä¸Šåˆ†æäº†ç»†èŠ‚ã€‚</p><p>Contextæ–¹é¢ï¼ŒGinçš„å®ç°åŸºæœ¬å’Œæˆ‘ä»¬ä¹‹å‰çš„å®ç°æ˜¯ä¸€è‡´çš„ã€‚ä¹‹å‰å®ç°çš„Coreæ•°æ®ç»“æ„å¯¹åº”Ginä¸­çš„Engineï¼ŒGroupæ•°æ®ç»“æ„å¯¹åº”Ginçš„Groupç»“æ„ï¼ŒContextæ•°æ®ç»“æ„å¯¹åº”Ginçš„Contextæ•°æ®ç»“æ„ã€‚</p><p>è·¯ç”±æ–¹é¢ï¼ŒGinçš„è·¯ç”±å®ç°å¾—æ¯”æˆ‘ä»¬è¦å¥½ï¼Œè¿™ä¸€ç‚¹ä¸Šä¸€èŠ‚è¯¾è¯¦ç»†åˆ†æäº†Ginè·¯ç”±å°±ä¸å†èµ˜è¿°ã€‚</p><p>ä¸­é—´ä»¶æ–¹é¢ï¼ŒGinçš„ä¸­é—´ä»¶å®ç°å’Œæˆ‘ä»¬ä¹‹å‰çš„æ²¡æœ‰ä»€ä¹ˆå¤ªå¤§çš„å·®åˆ«ï¼Œåªæœ‰ä¸€ç‚¹ï¼Œæˆ‘ä»¬å®šä¹‰çš„Handlerä¸ºï¼š</p><pre><code class=\"language-plain\">type ControllerHandler func(c *Context) error\n</code></pre><p>è€ŒGinå®šä¹‰çš„Handlerä¸ºï¼š</p><pre><code class=\"language-plain\">type HandlerFunc func(*Context)\n</code></pre><p>å¯ä»¥çœ‹åˆ°ç›¸æ¯”Ginï¼Œæˆ‘ä»¬å¤šå®šä¹‰äº†ä¸€ä¸ªerrorè¿”å›å€¼ã€‚å› ä¸ºGinçš„ä½œè€…è®¤ä¸ºï¼Œä¸­æ–­ä¸€ä¸ªè¯·æ±‚è¿”å›ä¸€ä¸ªerrorå¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œ<strong>ä»–å¸Œæœ›ä¸­æ–­ä¸€ä¸ªè¯·æ±‚çš„æ—¶å€™ç›´æ¥æ“ä½œResponse</strong>ï¼Œæ¯”å¦‚è®¾ç½®è¿”å›çŠ¶æ€ç ã€è®¾ç½®è¿”å›é”™è¯¯ä¿¡æ¯ï¼Œè€Œä¸å¸Œæœ›ç”¨erroræ¥è¿›è¡Œè¿”å›ï¼Œæ‰€ä»¥æ¡†æ¶ä¹Ÿä¸ä¼šç”¨è¿™ä¸ªerroræ¥æ“ä½œä»»ä½•çš„è¿”å›ä¿¡æ¯ã€‚è¿™ä¸€ç‚¹æˆ‘è®¤ä¸ºGinæ¡†æ¶çš„è€ƒé‡æ˜¯æœ‰é“ç†çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿæ²¿ç”¨è¿™ç§æ–¹å¼ã€‚<br>\nè€Œå¯¹äº Request å’Œ Response çš„å°è£…ï¼Œ Gin çš„å®ç°æ¯”è¾ƒç®€é™‹ã€‚Ginå¯¹Requestå¹¶æ²¡æœ‰ä»¥æ¥å£çš„æ–¹å¼ï¼Œå°†Requestæ”¯æŒå“ªäº›æ¥å£å±•ç¤ºå‡ºæ¥ï¼›å¹¶ä¸”åœ¨å‚æ•°æŸ¥è¯¢çš„æ—¶å€™ï¼Œè¿”å›ç±»å‹å¹¶ä¸å¤šï¼Œæ¯”å¦‚ä»Formä¸­è·å–å‚æ•°çš„ç³»åˆ—æ–¹æ³•ï¼ŒGinåªå®ç°äº†å‡ ä¸ªæ–¹æ³•ï¼š</p><pre><code class=\"language-go\">PostForm\nDefaultPostForm\nGetPostForm\nPostFormArray\nGetPostFormArray\nPostFormMap\nGetPostFormMap\n</code></pre><p>ä½†æ˜¯åœ¨æˆ‘ä»¬å®šä¹‰çš„Requestä¸­ï¼Œæˆ‘ä»¬å®ç°äº†æŒ‰ç…§ä¸åŒç±»å‹è·å–å‚æ•°çš„æ–¹æ³•ã€‚</p><pre><code class=\"language-go\">// formè¡¨å•ä¸­å¸¦çš„å‚æ•°\nDefaultFormInt(key string, def int) (int, bool)\nDefaultFormInt64(key string, def int64) (int64, bool)\nDefaultFormFloat64(key string, def float64) (float64, bool)\nDefaultFormFloat32(key string, def float32) (float32, bool)\nDefaultFormBool(key string, def bool) (bool, bool)\nDefaultFormString(key string, def string) (string, bool)\nDefaultFormStringSlice(key string, def []string) ([]string, bool)\nDefaultFormFile(key string) (*multipart.FileHeader, error)\nDefaultForm(key string) interface{}\n</code></pre><p>è€Œä¸”åœ¨Responseä¸­ï¼Œæˆ‘ä»¬çš„è®¾è®¡æ˜¯å¸¦æœ‰é“¾å¼è°ƒç”¨æ–¹æ³•çš„ï¼Œè€ŒGinä¸­æ²¡æœ‰ã€‚</p><pre><code class=\"language-plain\">c.SetOkStatus().Json(\"ok, UserLoginController: \" + foo)\n</code></pre><p>è¿™ä¸¤ç‚¹åœ¨ä½¿ç”¨è€…ä½¿ç”¨æ¡†æ¶å¼€å‘å…·ä½“ä¸šåŠ¡çš„æ—¶å€™ä¼šéå¸¸ä¾¿åˆ©ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†è¿™äº›åŠŸèƒ½é›†æˆåˆ°Ginä¸­ï¼Œè¿ç§»è¿™éƒ¨åˆ†Requestå’ŒResponseçš„å°è£…ã€‚</p><p>æœ€åä¸€ä¸ªä¼˜é›…å…³é—­çš„é€»è¾‘ï¼Œæˆ‘ä»¬å’ŒGinéƒ½æ˜¯ç›´æ¥ä½¿ç”¨ HTTP åº“çš„ server.Shutdown å®ç°çš„ï¼Œä¸å— Gin ä»£ç è¿ç§»çš„å½±å“ã€‚</p><p>æ‰€ä»¥å†æ˜ç¡®ä¸‹ï¼Œcontextã€è·¯ç”±ã€ä¸­é—´ä»¶ã€é‡å¯æœºåˆ¶ï¼Œæˆ‘ä»¬éƒ½ä¸éœ€è¦è¿ç§»ï¼Œå”¯ä¸€éœ€è¦è¿ç§»çš„æ˜¯å¯¹Requestå’ŒResponseçš„å°è£…ã€‚</p><h3>ä½¿ç”¨åŠ æ³•æœ€å°åŒ–å’Œå®šåˆ¶åŒ–æˆ‘ä»¬çš„éœ€æ±‚</h3><p>å¯¹äº request å’Œ response çš„å°è£…ï¼Œæ¶‰åŠæ˜“ç”¨æ€§ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½ä¿ç•™è‡ªå·±çš„å®šåˆ¶åŒ–éœ€æ±‚ï¼ŒåŒæ—¶åˆä¸å¸Œæœ›å½±å“ Gin åŸæœ‰çš„ä»£ç é€»è¾‘ã€‚æ‰€ä»¥ï¼Œå¯ä»¥ç”¨<strong>åŠ æ³•æœ€å°åŒ–çš„æ–¹å¼</strong>è¿ç§»è¿™ä¸ªå°è£…ã€‚</p><p>ä¸ºäº†å°½é‡ä¸ä¾µå…¥åŸæœ‰çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬åˆ›å»ºä¸¤ä¸ªæ–°çš„æ–‡ä»¶ hade_request.goã€hade_response.go æ¥å­˜æ”¾ä¹‹å‰å¯¹requestå’Œresponseçš„å°è£…ã€‚</p><p>å›é¡¾ä¸‹ç¬¬äº”èŠ‚è¯¾å°è£…çš„requestï¼Œå®šä¹‰çš„IRequestæ¥å£åŒ…å«ï¼šé€šè¿‡åœ°å€URLè·å–å‚æ•°çš„QueryXXXç³»åˆ—æ¥å£ã€é€šè¿‡è·¯ç”±åŒ¹é…è·å–å‚æ•°çš„ParamXXXç³»åˆ—æ¥å£ã€é€šè¿‡Formè¡¨å•è·å–å‚æ•°çš„FormXXXç³»åˆ—æ¥å£ï¼Œä»¥åŠä¸€äº›åŸºç¡€æ¥å£ã€‚</p><p><strong>æ‰€ä»¥ç°åœ¨çš„ç›®æ ‡æ˜¯ï¼Œè¦è®©Ginæ¡†æ¶çš„Contextä¹Ÿå®ç°è¿™äº›æ¥å£</strong>ã€‚å¯¹æ¯”ä¹‹å‰å†™çš„å’ŒGinæ¡†æ¶åŸæœ‰çš„å®ç°æ–¹æ³•ï¼Œå¯ä»¥å‘ç°ï¼Œæ¥å£å­˜åœ¨ä¸‹åˆ—ä¸‰ç§æƒ…å†µï¼š</p><ol>\n<li>Ginæ¡†æ¶ä¸­å·²ç»å­˜åœ¨ç›¸åŒå‚æ•°ã€ç›¸åŒè¿”å›å€¼ã€ç›¸åŒæ¥å£åçš„æ¥å£</li>\n<li>Ginæ¡†æ¶ä¸­ä¸å­˜åœ¨ç›¸åŒæ¥å£åçš„æ¥å£</li>\n<li>Ginæ¡†æ¶ä¸­å­˜åœ¨ç›¸åŒæ¥å£åï¼Œä½†æ˜¯ä¸åŒè¿”å›å€¼çš„æ¥å£</li>\n</ol><p>ç¬¬ä¸€ç§æƒ…å†µï¼Œç”±äºGinæ¡†æ¶åŸå…ˆå°±å·²ç»æœ‰äº†ç›¸åŒçš„æ¥å£ï¼Œæ‰€ä»¥ä¸éœ€è¦åšä»»ä½•è¿ç§»åŠ¨ä½œï¼ŒGinçš„Contextå°±å·²ç»å…·å¤‡äº†æˆ‘ä»¬è®¾è®¡çš„å°è£…ã€‚å¯¹ç¬¬äºŒç§æƒ…å†µæ¥è¯´ï¼Œç”±äºGinæ¡†æ¶æ²¡æœ‰å¯¹åº”æ¥å£ï¼Œæˆ‘ä»¬æŠŠä¹‹å‰å®ç°çš„æ¥å£åŸå°ä¸åŠ¨è¿ç§»è¿‡æ¥å³å¯ã€‚</p><p>å¯¹äºç¬¬ä¸‰ç§æƒ…å†µåˆ™æ£˜æ‰‹ä¸€äº›ã€‚ä»¥Ginä¸­å·²ç»æœ‰çš„QueryXXXç³»åˆ—æ¥å£ä¸ºä¾‹ï¼Œå®ƒçš„QueryXXXç³»åˆ—æ¥å£å’Œæˆ‘ä»¬æƒ³è¦çš„æœ‰ä¸€å®šå·®åˆ«ï¼Œæ¯”å¦‚å®ƒçš„Queryä¸æ”¯æŒå¤šç§æ•°æ®ç±»å‹çš„ç›´æ¥è·å–ã€‚æ€ä¹ˆåŠï¼Ÿ</p><p><strong>å¯ä»¥é€‰æ‹©å°†QueryXXXç³»åˆ—æ¥å£é‡æ–°å‘½å</strong>ï¼Œåˆå› ä¸ºQueryæ¥å£éƒ½å¸¦æœ‰ä¸€ä¸ªé»˜è®¤å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å…¶é‡æ–°å‘½åä¸ºDefaultQueryXXXã€‚</p><p>ç»è¿‡ä¸Šè¿°ä¸‰ç§æƒ…å†µçš„ä¿®æ”¹ï¼ŒIRequestçš„å®šä¹‰ä¿®æ”¹ä¸º(åœ¨æ¡†æ¶ç›®å½•çš„framework/gin/hade_request.goä¸­)ï¼š</p><pre><code class=\"language-go\">// ä»£è¡¨è¯·æ±‚åŒ…å«çš„æ–¹æ³•\ntype IRequest interface {\n\n\t// è¯·æ±‚åœ°å€urlä¸­å¸¦çš„å‚æ•°\n\t// å½¢å¦‚: foo.com?a=1&amp;b=bar&amp;c[]=bar\n\tDefaultQueryInt(key string, def int) (int, bool)\n\tDefaultQueryInt64(key string, def int64) (int64, bool)\n\tDefaultQueryFloat64(key string, def float64) (float64, bool)\n\tDefaultQueryFloat32(key string, def float32) (float32, bool)\n\tDefaultQueryBool(key string, def bool) (bool, bool)\n\tDefaultQueryString(key string, def string) (string, bool)\n\tDefaultQueryStringSlice(key string, def []string) ([]string, bool)\n\n\t// è·¯ç”±åŒ¹é…ä¸­å¸¦çš„å‚æ•°\n\t// å½¢å¦‚ /book/:id\n\tDefaultParamInt(key string, def int) (int, bool)\n\tDefaultParamInt64(key string, def int64) (int64, bool)\n\tDefaultParamFloat64(key string, def float64) (float64, bool)\n\tDefaultParamFloat32(key string, def float32) (float32, bool)\n\tDefaultParamBool(key string, def bool) (bool, bool)\n\tDefaultParamString(key string, def string) (string, bool)\n\tDefaultParam(key string) interface{}\n\n\t// formè¡¨å•ä¸­å¸¦çš„å‚æ•°\n\tDefaultFormInt(key string, def int) (int, bool)\n\tDefaultFormInt64(key string, def int64) (int64, bool)\n\tDefaultFormFloat64(key string, def float64) (float64, bool)\n\tDefaultFormFloat32(key string, def float32) (float32, bool)\n\tDefaultFormBool(key string, def bool) (bool, bool)\n\tDefaultFormString(key string, def string) (string, bool)\n\tDefaultFormStringSlice(key string, def []string) ([]string, bool)\n\tDefaultFormFile(key string) (*multipart.FileHeader, error)\n\tDefaultForm(key string) interface{}\n\n\t// json body\n\tBindJson(obj interface{}) error\n\n\t// xml body\n\tBindXml(obj interface{}) error\n\n\t// å…¶ä»–æ ¼å¼\n\tGetRawData() ([]byte, error)\n\n\t// åŸºç¡€ä¿¡æ¯\n\tUri() string\n\tMethod() string\n\tHost() string\n\tClientIp() string\n\n\t// header\n\tHeaders() map[string]string\n\tHeader(key string) (string, bool)\n\n\t// cookie\n\tCookies() map[string]string\n\tCookie(key string) (string, bool)\n}\n</code></pre><p>IRequestçš„å°è£…å°±è¿ç§»å®Œæˆäº†ï¼Œå¯¹äºæˆ‘ä»¬å°è£…çš„IResponseç»“æ„ï¼Œä¹Ÿæ˜¯åŒæ ·çš„æ€è·¯ã€‚</p><p>å’ŒGinçš„responseå®ç°å¯¹æ¯”ä¹‹åï¼Œæˆ‘ä»¬å‘ç°ç”±äºè®¾è®¡äº†ä¸€ä¸ªé“¾å¼è°ƒç”¨ï¼Œå¾ˆå¤šæ–¹æ³•çš„è¿”å›å€¼ä½¿ç”¨ IResponse æ¥å£æœ¬èº«ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†å®šä¹‰çš„IResponseçš„æ¥å£ï¼Œåœ¨Ginä¸­éƒ½æœ‰åŒæ ·æ¥å£åï¼Œä½†æ˜¯è¿”å›å€¼ä¸åŒã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨åŒæ ·çš„æ–¹å¼æ¥ä¿®æ”¹æ¥å£åã€‚</p><p>å› ä¸ºå¤§éƒ½è¿”å›IResponseæ¥å£ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨æ‰€æœ‰æ¥å£åå‰é¢ï¼ŒåŠ ä¸€ä¸ªIå­—æ¯ä½œä¸ºåŒºåˆ†ã€‚åœ¨ framework/gin/hade_response.goä¸­ï¼š</p><pre><code class=\"language-go\">// IResponseä»£è¡¨è¿”å›æ–¹æ³•\ntype IResponse interface {\n\t// Jsonè¾“å‡º\n\tIJson(obj interface{}) IResponse\n\n\t// Jsonpè¾“å‡º\n\tIJsonp(obj interface{}) IResponse\n\n\t//xmlè¾“å‡º\n\tIXml(obj interface{}) IResponse\n\n\t// htmlè¾“å‡º\n\tIHtml(template string, obj interface{}) IResponse\n\n\t// string\n\tIText(format string, values ...interface{}) IResponse\n\n\t// é‡å®šå‘\n\tIRedirect(path string) IResponse\n\n\t// header\n\tISetHeader(key string, val string) IResponse\n\n\t// Cookie\n\tISetCookie(key string, val string, maxAge int, path, domain string, secure, httpOnly bool) IResponse\n\n\t// è®¾ç½®çŠ¶æ€ç \n\tISetStatus(code int) IResponse\n\n\t// è®¾ç½®200çŠ¶æ€\n\tISetOkStatus() IResponse\n}\n</code></pre><p>ç°åœ¨ IRequest å’Œ IResponse æ¥å£çš„ä¿®æ”¹å·²ç»å®Œæˆäº†ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å°±åº”è¯¥è¿ç§»æ¯ä¸ªæ¥å£çš„å…·ä½“å®ç°ã€‚è¿™é‡Œæ¥å£çš„å®ç°æ¯”è¾ƒå¤šï¼Œå°±ä¸ä¸€ä¸€èµ˜è¿°ï¼ŒRequestå’ŒResponseæˆ‘ä»¬åˆ†åˆ«ä¸¾å…¶ä¸­ä¸€ä¸ªæ¥å£ä¾‹å­è¿›è¡Œè¯´æ˜ï¼Œå…¶ä»–çš„æ¥å£è¿ç§»å¯ä»¥å…·ä½“å‚è€ƒGitHubä»“åº“çš„<a href=\"https://github.com/gohade/coredemo/tree/geekbang/09\">geekbang/09åˆ†æ”¯</a>ã€‚</p><p>åœ¨Requestä¸­æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªDefaultQueryIntæ–¹æ³•ï¼Œæ˜¯Ginæ¡†æ¶ä¸­æ²¡æœ‰çš„ï¼Œæ€ä¹ˆè¿ç§»è¿™ä¸ªæ¥å£å‘¢ï¼Ÿé¦–å…ˆå°†ä¹‹å‰å®šä¹‰çš„QueryIntè¿ç§»è¿‡æ¥ï¼Œå¹¶é‡æ–°å‘½åä¸º DefaultQueryIntã€‚</p><pre><code class=\"language-go\">// è·å–è¯·æ±‚åœ°å€ä¸­æ‰€æœ‰å‚æ•°\nfunc (ctx *Context) QueryAll() map[string][]string {\n   if ctx.request != nil {\n      return map[string][]string(ctx.request.URL.Query())\n   }\n   return map[string][]string{}\n}\n\n// è·å–Intç±»å‹çš„è¯·æ±‚å‚æ•°\nfunc (ctx *Context) DefaultQueryInt(key string, def int) (int, bool) {\n   params := ctx.QueryAll()\n   if vals, ok := params[key]; ok {\n      if len(vals) &gt; 0 {\n         // ä½¿ç”¨caståº“å°†stringè½¬æ¢ä¸ºInt\n         return cast.ToInt(vals[0]), true\n      }\n   }\n   return def, false\n}\n</code></pre><p>ç„¶åè¿™é‡Œçœ‹QueryAllå‡½æ•°ï¼Œå…¶å®æ˜¯å¯ä»¥ä¼˜åŒ–çš„ã€‚Ginæ¡†æ¶åœ¨è·å–QueryAllçš„æ—¶å€™ï¼Œä½¿ç”¨äº†ä¸€ä¸ªQueryCacheï¼Œå®ç°äº†åœ¨ç¬¬ä¸€æ¬¡è·å–å‚æ•°çš„æ—¶å€™ï¼Œç”¨æ–¹æ³•initQueryCache å°† ctx.request.URL.Query() ç¼“å­˜åœ¨å†…å­˜ä¸­ã€‚</p><p>æ‰€ä»¥æ—¢ç„¶å·²ç»æºç å¼•å…¥Ginæ¡†æ¶äº†ï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ¥ä¼˜åŒ–QueryAll() æ–¹æ³•çš„ï¼Œå…ˆè°ƒç”¨initQueryCacheï¼Œå†ç›´æ¥ä»queryCacheä¸­è¿”å›å‚æ•°ï¼š</p><pre><code class=\"language-go\">// è·å–è¯·æ±‚åœ°å€ä¸­æ‰€æœ‰å‚æ•°\nfunc (ctx *Context) QueryAll() map[string][]string {\n   ctx.initQueryCache()\n   return map[string][]string(ctx.queryCache)\n}\n</code></pre><p>è¿™æ ·QueryAllæ–¹æ³•å’ŒDefaultQueryIntæ–¹æ³•å°±éƒ½è¿ç§»æ”¹é€ å®Œæˆäº†ã€‚</p><p>åœ¨Responseä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰éœ€è¦ä¼˜åŒ–çš„ç‚¹ï¼Œåªè¦å°†ä»£ç è¿ç§»å°±è¡Œã€‚æ¯”å¦‚åŸå…ˆå®šä¹‰çš„Jsonpæ–¹æ³•ï¼š</p><pre><code class=\"language-go\">// Jsonpè¾“å‡º\nfunc (ctx *Context) Jsonp(obj interface{}) IResponse {\n   ...\n}\n</code></pre><p>ç›´æ¥ä¿®æ”¹å‡½æ•°åä¸ºIJsonpå³å¯ï¼š</p><pre><code class=\"language-go\">// Jsonpè¾“å‡º\nfunc (ctx *Context) IJsonp(obj interface{}) IResponse {\n   ...\n}\n</code></pre><p>æ¥å£å’Œå®ç°éƒ½ä¿®æ”¹äº†ï¼Œæœ€åè‚¯å®šè¿˜è¦å¯¹åº”ä¿®æ”¹ä¸‹ä¸šåŠ¡ä»£ç ä¸­ä¹‹å‰å®šä¹‰çš„ä¸€äº›æ§åˆ¶å™¨ã€‚</p><p>ç¬¬ä¸€ä¸ªæ˜¯æ§åˆ¶å™¨çš„å‚æ•°ï¼Œä»framework.Context ä¿®æ”¹ä¸º gin.Contextï¼Œ è¿™é‡Œçš„ginæ˜¯å¼•ç”¨github.com/gohade/hade/framework/ginï¼Œè¿˜æœ‰æŠŠä¹‹å‰å®šä¹‰çš„Handlerçš„errorè¿”å›å€¼åˆ é™¤ã€‚</p><p>ç¬¬äºŒä¸ªæ˜¯ä¿®æ”¹é‡Œé¢çš„è°ƒç”¨ï¼Œå› ä¸ºç°åœ¨çš„Responseæ–¹æ³•éƒ½å¸¦ä¸Šäº†ä¸€ä¸ªå‰ç¼€Iã€‚æ¯”å¦‚åœ¨ä¸šåŠ¡ç›®å½•ä¸‹subject_controller.goä¸­ï¼ŒæŠŠåŸå…ˆçš„SubjectListControllerï¼š</p><pre><code class=\"language-go\">func SubjectListController(c *framework.Context) error {\n   c.SetOkStatus().Json(\"ok, SubjectListController\")\n   return nil\n}\n</code></pre><p>ä¿®æ”¹ä¸ºï¼š</p><pre><code class=\"language-go\">func SubjectListController(c *gin.Context) {\n   c.ISetOkStatus().IJson(\"ok, SubjectListController\")\n}\n</code></pre><h2>éªŒè¯</h2><p>æ‰€æœ‰ä¿®æ”¹å®Œæˆä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ testæ¥è¿›è¡ŒéªŒè¯ï¼Œè°ƒç”¨ <code>go test ./...</code> æ¥è¿è¡ŒGinç¨‹åºçš„æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ï¼Œæ˜¾ç¤ºæˆåŠŸåˆ™è¡¨ç¤ºæˆ‘ä»¬çš„è¿ç§»æˆåŠŸã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/85/30/85832f31e6835617b804239de53cd430.png?wh=1630x378\" alt=\"\"></p><p>å¹¶ä¸”æˆ‘ä»¬é€šè¿‡  <code>go build &amp;&amp; ./hade</code> å¯ä»¥çœ‹åˆ°ç†Ÿæ‚‰çš„ginè°ƒè¯•æ¨¡å¼çš„è¾“å‡ºï¼š<br>\n<img src=\"https://static001.geekbang.org/resource/image/c3/55/c3f631feba724cc00f51033801480d55.png?wh=1378x542\" alt=\"\"></p><h2>å°ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬è®¨è®ºå‡ ä¸ªå¼€æºé¡¹ç›®çš„è®¸å¯åè®®ï¼Œæ¯”å¦‚Gin æ¡†æ¶ä½¿ç”¨çš„ MIT åè®®ï¼Œåœ¨æ˜ç¡®ä¿®æ”¹æƒé™åï¼Œæˆ‘ä»¬å°†Ginæ¡†æ¶è¿ç§»è¿›è‡ªå·±æ‰‹å†™çš„hadeæ¡†æ¶ï¼Œæ›¿æ¢å‰é¢å¼€å‘çš„Contextã€è·¯ç”±ç­‰æ¨¡å—ï¼Œä¸ºåç»­æ‹“å±•åšå¥½å‡†å¤‡ã€‚</p><p>åœ¨è¿ç§»çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨å¤åˆ¶æºç çš„æ–¹å¼è¿›è¡Œæ›¿æ¢ï¼Œå¹¶ä¸”ç”¨äº†åŠ æ³•æœ€å°åŒ–çš„æ–¹æ³•ï¼Œå°½é‡ä¿ç•™äº†æˆ‘ä»¬çš„å®šåˆ¶åŒ–æ¥å£ã€‚å¯èƒ½æœ‰çš„åŒå­¦ä¼šè§‰å¾—è¿™ç§æ–¹å¼æ¯”è¾ƒæš´åŠ›ï¼Œä½†æ˜¯åç»­éšç€æˆ‘ä»¬å¯¹æ¡†æ¶çš„æ”¹é€ éœ€æ±‚ä¸æ–­å¢åŠ ï¼Œè¿™ç§æ–¹å¼ä¼šè¶Šæ¥è¶Šä½“ç°å‡ºå…¶ä¼˜åŠ¿ã€‚</p><h3>æ€è€ƒé¢˜</h3><p>æˆ‘ä»¬çš„hadeæ¡†æ¶ä¹Ÿå¸Œæœ›ç”¨MITåè®®è¿›è¡Œå¼€æºï¼Œä½ çŸ¥é“å¦‚ä½•æ”¹é€ æ¥å°†å®ƒå¼€æºä¹ˆï¼Ÿ</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„æ€è€ƒã€‚æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œå¦‚æœä½ è§‰å¾—æœ‰æ”¶è·ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™ä½ èº«è¾¹çš„æœ‹å‹ï¼Œé‚€ä»–ä¸€èµ·å­¦ä¹ ã€‚æˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ã€‚</p>","comments":[{"had_liked":false,"id":314827,"user_name":"é¸­è¡¥ä¸€ç”Ÿå¦‚æ¢¦","can_delete":false,"product_type":"c1","uid":2070978,"ip_address":"","ucode":"7A33EF6DAF37AC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI7rprdxQqcea53sw1HCz1YZjQNlSvWg7GETnWYicZLYOQR2GUMOwUnrhAIYzUKJt1zZhUv9icOCztQ/132","comment_is_top":false,"comment_ctime":1633486971,"is_pvip":true,"discussion_count":6,"race_medal":0,"score":"44583159931","product_id":100090601,"comment_content":"ç°åœ¨å®šåˆ¶çš„æ˜¯ gin çš„ 1.7.3 ç‰ˆæœ¬ï¼Œé‚£ä¹ˆåç»­ gin å‡çº§äº†ï¼Œå°¤å…¶æ˜¯é¢‘ç¹å‡çº§ï¼Œæˆ‘ä»¬å¦‚ä½•å¿«é€ŸåŠæ—¶çš„è¿›è¡Œå‡çº§æ›´æ–°ï¼Ÿ<br>æˆ–è€…è¯´éš”ä¸€æ®µæ—¶é—´å†æ›´æ–°ï¼Ÿ","like_count":11,"discussions":[{"author":{"id":1203078,"avatar":"https://static001.geekbang.org/account/avatar/00/12/5b/86/dba8214e.jpg","nickname":"æ˜ŸæœŸä¸‰ã€‚","note":"","ucode":"EF3C461AB5399D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538692,"discussion_content":"åŒæ–‡ï¼Œæ€»ä¸èƒ½æŠŠginæœ€æ–°çš„ä»£ç å†é‡æ–°æ‹·è´å§","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1639488057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2536820,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b5/74/cd80b9f4.jpg","nickname":"å‹","note":"","ucode":"972A4333A8B101","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535723,"discussion_content":"ä¸ªäººè§è§£å°±æ˜¯ ginæœ‰å¼€æºç¤¾åŒºä¼šæŒç»­è¿­ä»£ å¦‚æœæƒ³åšå¥½è¿™ä¸ªæ¡†æ¶ä¹Ÿéœ€è¦æŒç»­è¿­ä»£ã€‚å¤šåœ¨ginç¤¾åŒºæ´»è·ƒä¸‹ ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1638524477,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2171383,"avatar":"https://static001.geekbang.org/account/avatar/00/21/21/f7/aaa19872.jpg","nickname":"å¤§å¸ˆå…„","note":"","ucode":"D245FED96F663A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570662,"discussion_content":"åŒé—®ï¼Œä¸ªäººä¸å¤ªå–œæ¬¢å…¥ä¾µå¼€æºçš„æ¡†æ¶ï¼Œå°†æ¥æœ‰å‡çº§ã€å®‰å…¨è¡¥ä¸ä»€ä¹ˆçš„ä¼šæ¯”è¾ƒéº»çƒ¦å“Ÿï¼Œæœ›è€å¸ˆèƒ½æ…é‡è€ƒè™‘è¿™ç§æ–¹å¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651848608,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2136069,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/rxz5aKicRkvqWmt6c6c7eayHvh577uibBTVQzcJKwSTqI9FaxZSRlx7NRVw4atWpqER8ncA5jErQb3wb4cPzZxlA/132","nickname":"Geek_065895","note":"","ucode":"2E6FCCC78E5767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554936,"discussion_content":"æˆ‘è§‰å¾—è¿˜æ˜¯åŸºäºå¼€æºæ¡†æ¶äºŒæ¬¡å¼€å‘å¥½ä¸€ç‚¹ï¼Œé™¤éå¤§å…¬å¸æœ‰ä¸“é—¨çš„äººæ¥å¹²è¿™ç§è¿ç§»çš„æ´»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646667048,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1435458,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e7/42/eb551423.jpg","nickname":"é£˜è¡","note":"","ucode":"783AD2692AEC7F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533634,"discussion_content":"åŒé—®ï¼Œä¸ä¼šæ˜¯å†é‡æ–°åŸºäºæœ€æ–°ç‰ˆæœ¬çš„Ginçš„å†™ä¸€å¥—æ¡†æ¶å§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637920481,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1350159,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9a/0f/da7ed75a.jpg","nickname":"èŠ’æœå°‘ä¾ ","note":"","ucode":"98D0BBB52BB80F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":401614,"discussion_content":"åŒé—®ï¼Œè¯·é—®è€å¸ˆå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæˆ–è€…è¯´æœ‰ä»€ä¹ˆæ€è€ƒå‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633698472,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":337124,"user_name":"Geek_cdef71","can_delete":false,"product_type":"c1","uid":2021362,"ip_address":"","ucode":"BF967703F342A2","user_header":"https://static001.geekbang.org/account/avatar/00/1e/d7/f2/82e1dc03.jpg","comment_is_top":false,"comment_ctime":1646637318,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"10236571910","product_id":100090601,"comment_content":"--- FAIL: TestContextFormFileFailed (0.00s)<br>panic: runtime error: invalid memory address or nil pointer dereference [recovered]<br>        panic: runtime error: invalid memory address or nil pointer dereference<br>[signal SIGSEGV: segmentation violation code=0x1 addr=0x18 pc=0x6678d2]<br><br><br>è¿™æ˜¯å•¥åŸå› ","like_count":2,"discussions":[{"author":{"id":1718011,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/36/fb/b480f2ac.jpg","nickname":"äººé—´ç†æƒ³","note":"","ucode":"0D6A4C402D7CBD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570406,"discussion_content":"æœ‰å¯èƒ½æ˜¯ä½ ä½¿ç”¨çš„go1.17æ‰§è¡Œtestçš„æ—¶å€™ä¼šæŠ¥é”™ï¼Œå¯ä»¥ä½¿ç”¨go1.15æˆ–è€…å»githubä¸Šæ‰¾ä¸€ä¸‹ginçš„issueçœ‹ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651757553,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2227201,"avatar":"https://static001.geekbang.org/account/avatar/00/21/fc/01/4883d12c.jpg","nickname":"î‰ç‚’î”®è›‹","note":"","ucode":"AEE472693CC341","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556761,"discussion_content":"æˆ‘ä¹Ÿç¢°åˆ°äº†ï¼Œä½ è§£å†³äº†å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647502807,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":315218,"user_name":"èŠ’æœå°‘ä¾ ","can_delete":false,"product_type":"c1","uid":1350159,"ip_address":"","ucode":"98D0BBB52BB80F","user_header":"https://static001.geekbang.org/account/avatar/00/14/9a/0f/da7ed75a.jpg","comment_is_top":false,"comment_ctime":1633752094,"is_pvip":true,"discussion_count":5,"race_medal":0,"score":"5928719390","product_id":100090601,"comment_content":"è¿ç§»å®Œæˆåï¼Œé‡åˆ°testcaseä¸é€šè¿‡çš„é—®é¢˜ã€‚<br>https:&#47;&#47;github.com&#47;gin-gonic&#47;gin&#47;blob&#47;21125bbb3f550dbfa4c64151f7e01f58dd64e2b8&#47;context_test.go#L352<br>å¦‚æœæ˜¯è¿™ä¸ªtestcaseï¼Œä¿®æ”¹æ­£åˆ™ä¸­åŒ…è·¯å¾„é‚£éƒ¨åˆ†å³å¯ï¼ˆä¸è‡ªå·±é¡¹ç›®go module pathä¿æŒä¸€è‡´å³å¯ï¼‰ã€‚","like_count":2,"discussions":[{"author":{"id":3203828,"avatar":"https://static001.geekbang.org/account/avatar/00/30/e2/f4/6292bba7.jpg","nickname":"é»˜å°”ç´¢","note":"","ucode":"EFCDC041BF5776","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591502,"discussion_content":"è¯·é—®æ­£åˆ™ä¸­åŒ…è·¯å¾„åœ¨å“ªé‡Œå‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666601548,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1656956,"avatar":"https://static001.geekbang.org/account/avatar/00/19/48/7c/2aaf50e5.jpg","nickname":"coder","note":"","ucode":"3A0940EBF94577","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590520,"discussion_content":"å¥½äººå•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665835184,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":3203828,"avatar":"https://static001.geekbang.org/account/avatar/00/30/e2/f4/6292bba7.jpg","nickname":"é»˜å°”ç´¢","note":"","ucode":"EFCDC041BF5776","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1656956,"avatar":"https://static001.geekbang.org/account/avatar/00/19/48/7c/2aaf50e5.jpg","nickname":"coder","note":"","ucode":"3A0940EBF94577","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591504,"discussion_content":"è¯·é—®æ­£åˆ™ä¸­åŒ…è·¯å¾„åœ¨å“ªé‡Œå‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666601554,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":590520,"ip_address":"ä¸Šæµ·"},"score":591504,"extra":""}]},{"author":{"id":1718011,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/36/fb/b480f2ac.jpg","nickname":"äººé—´ç†æƒ³","note":"","ucode":"0D6A4C402D7CBD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570405,"discussion_content":"æ„Ÿæ©ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651757509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":3203828,"avatar":"https://static001.geekbang.org/account/avatar/00/30/e2/f4/6292bba7.jpg","nickname":"é»˜å°”ç´¢","note":"","ucode":"EFCDC041BF5776","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1718011,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/36/fb/b480f2ac.jpg","nickname":"äººé—´ç†æƒ³","note":"","ucode":"0D6A4C402D7CBD","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":591503,"discussion_content":"è¯·é—®æ­£åˆ™ä¸­åŒ…è·¯å¾„åœ¨å“ªé‡Œå‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666601552,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":570405,"ip_address":"ä¸Šæµ·"},"score":591503,"extra":""}]}]},{"had_liked":false,"id":314445,"user_name":"æœ¨å°æŸ’","can_delete":false,"product_type":"c1","uid":1000802,"ip_address":"","ucode":"947439CDD0B5B1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/45/62/3c6041e7.jpg","comment_is_top":false,"comment_ctime":1633064908,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5928032204","product_id":100090601,"comment_content":"DefaultQueryXXX æ˜¯ä¸æ˜¯æ²¡æœ‰å®ç° å½¢å¦‚: foo.com?a=1&amp;b=bar&amp;c[]=bar ä¸­ c çš„è·å–ï¼Ÿ<br>æˆ‘çœ‹ é»˜è®¤å°±æ”¯æŒ c=1&amp;c=2&amp;c=3 èƒ½è·å–åˆ° c çš„ slice [1, 2, 3]<br>ä½†æ˜¯ c[]=1&amp;c[]=2&amp;c[]=3 æ˜¯è·å–ä¸åˆ°çš„ï¼Œé™¤äº†è‡ªå·±è§£æä¸çŸ¥é“æœ‰æ²¡æœ‰æ›´æ­£å¸¸ä¸€ç‚¹çš„æ–¹å¼","like_count":1,"discussions":[{"author":{"id":1107540,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e6/54/86056001.jpg","nickname":"å°é©¬ğŸ","note":"","ucode":"8CA466A4004BDB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591088,"discussion_content":"è‡ªå·±å°è£…ä¸€ä¸ªæ¥å—æ•°ç»„å½¢å¼çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666269158,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":348561,"user_name":"i_chase","can_delete":false,"product_type":"c1","uid":1795511,"ip_address":"","ucode":"09C41C863F4EA3","user_header":"https://static001.geekbang.org/account/avatar/00/1b/65/b7/058276dc.jpg","comment_is_top":false,"comment_ctime":1655198750,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1655198750","product_id":100090601,"comment_content":"http.requestå’Œresponseå…¶å®æ²¡æœ‰å¯æ‰©å±•çš„ï¼Œæ‰€ä»¥ginæ²¡æœ‰ä½¿ç”¨æ¥å£å§","like_count":0},{"had_liked":false,"id":344081,"user_name":"ğŸŒ¿","can_delete":false,"product_type":"c1","uid":2066322,"ip_address":"","ucode":"5F819BBD11054E","user_header":"https://static001.geekbang.org/account/avatar/00/1f/87/92/9ac4c335.jpg","comment_is_top":false,"comment_ctime":1651224682,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651224682","product_id":100090601,"comment_content":"hade_request.go,hade_response.go,hade_context.goï¼›ç±»å‹ã€ç»“æ„ä½“ã€æ–¹æ³•ç­‰å‘½åå¯é‡‡ç”¨Object-Cçš„å‰ç¼€å‘½åè§„åˆ™","like_count":0},{"had_liked":false,"id":324692,"user_name":"å‹","can_delete":false,"product_type":"c1","uid":2536820,"ip_address":"","ucode":"972A4333A8B101","user_header":"https://static001.geekbang.org/account/avatar/00/26/b5/74/cd80b9f4.jpg","comment_is_top":false,"comment_ctime":1638547365,"is_pvip":false,"replies":[{"id":"117991","content":"æ„Ÿè°¢æé†’","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1069186","ctime":1638841571,"ip_address":"","comment_id":324692,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1638547365","product_id":100090601,"comment_content":"å¤§å®¶ä¸è¦åªçœ‹æ–‡ç« ä¸çœ‹githubçš„ä»£ç  å¾ˆç»†èŠ‚çš„æ”¾åœ¨æ–‡ç« ä¸­ å¾ˆå ç¯‡å¹… ä¸€èˆ¬éƒ½æ˜¯è¯´ä¸ªæ€è·¯ ç„¶åè‡ªå·±å»è¿ç§»<br>ä¸è¿‡ githubçš„ä»£ç æœ‰äº›ç»†èŠ‚æ²¡å¤„ç†å¥½<br> IRequest å¾ˆå¤šæ–¹æ³•å…¶å®å·²ç»åˆ é™¤äº† ä½†æ˜¯æ¥å£å®šä¹‰è¿˜åœ¨ ä¼šè®©äººè¿·ç³Š  æ‰€ä»¥ä¼šæœ‰å°ä¼™ä¼´è¯´æ²¡æœ‰å®ç°æ‰€æœ‰åŠæ³• è¿™ä¸ªå¾—è‡ªå·±å»åˆ¤æ–­æ€è€ƒçš„ã€‚<br>ä¸è¿‡å¸Œæœ›è€å¸ˆä¹‹åå¯ä»¥æ³¨æ„ä¸‹","like_count":1,"discussions":[{"author":{"id":1069186,"avatar":"https://static001.geekbang.org/account/avatar/00/10/50/82/32a2bf86.jpg","nickname":"å¶å‰‘å³°","note":"","ucode":"3974D917C69C29","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536654,"discussion_content":"æ„Ÿè°¢æé†’","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638841571,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":324685,"user_name":"å‹","can_delete":false,"product_type":"c1","uid":2536820,"ip_address":"","ucode":"972A4333A8B101","user_header":"https://static001.geekbang.org/account/avatar/00/26/b5/74/cd80b9f4.jpg","comment_is_top":false,"comment_ctime":1638543856,"is_pvip":false,"replies":[{"id":"118674","content":"æœ‰ç‚¹æ²¡æœ‰ç†è§£ï¼ŒFormAll ï¼Œ QueryAll è¿™ä¸ªè¯­ä¹‰ä¸Šæ˜¯æ²¡æœ‰Defaultçš„å±æ€§ï¼Œå‚æ•°ä¹Ÿæ²¡æœ‰defaultçš„å€¼ï¼Œæ‰€ä»¥è¿™ä¸ªå‘½åæ²¡é—®é¢˜å§","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1069186","ctime":1639618310,"ip_address":"","comment_id":324685,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1638543856","product_id":100090601,"comment_content":"ä½œä¸º æ–¹æ³•åå«åš QueryAll ä»¥åŠ Form  å’Œ Param è¿™ç§æ–¹æ³• æ”¹å˜æˆ DefaultXXX æ–¹æ³•ç­¾åè¯­ä¹‰ä¸Šå¹¶æ²¡æœ‰defaultçš„å±æ€§  è€å¸ˆè¿™é‡Œæ˜¯å¦å¯ä»¥ä¿®æ”¹ä¸‹ è¿˜æ˜¯è¯´ä¹Ÿæ˜¯åˆç†çš„","like_count":0,"discussions":[{"author":{"id":1069186,"avatar":"https://static001.geekbang.org/account/avatar/00/10/50/82/32a2bf86.jpg","nickname":"å¶å‰‘å³°","note":"","ucode":"3974D917C69C29","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539127,"discussion_content":"æœ‰ç‚¹æ²¡æœ‰ç†è§£ï¼ŒFormAll ï¼Œ QueryAll è¿™ä¸ªè¯­ä¹‰ä¸Šæ˜¯æ²¡æœ‰Defaultçš„å±æ€§ï¼Œå‚æ•°ä¹Ÿæ²¡æœ‰defaultçš„å€¼ï¼Œæ‰€ä»¥è¿™ä¸ªå‘½åæ²¡é—®é¢˜å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639618310,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322844,"user_name":"å®™æ–¯","can_delete":false,"product_type":"c1","uid":2041396,"ip_address":"","ucode":"80DF36BAD298AD","user_header":"https://static001.geekbang.org/account/avatar/00/1f/26/34/891dd45b.jpg","comment_is_top":false,"comment_ctime":1637631225,"is_pvip":true,"replies":[{"id":"119261","content":"æ˜¯å¯ä»¥çš„ï¼Œä¸»è¦èƒ½ç›´æ¥ä½¿ç”¨contextæ¥makeå®¹å™¨ä¸­çš„æœåŠ¡å‡ºæ¥ï¼Œå¦‚æœåœ¨ginå¤–é¢å†å°è£…ä¸€å±‚ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1069186","ctime":1640223598,"ip_address":"","comment_id":322844,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637631225","product_id":100090601,"comment_content":"æœ‰æ²¡æœ‰å¯èƒ½å°†ginå°è£…ä¸€ä¸ªproviderï¼Œç„¶ååœ¨å°è£…çš„provideré‡Œé¢åŠ containerï¼Œè¿™æ ·å°±ä¸ç”¨åœ¨ginæºç ä¸Šæ›´æ”¹äº†å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1069186,"avatar":"https://static001.geekbang.org/account/avatar/00/10/50/82/32a2bf86.jpg","nickname":"å¶å‰‘å³°","note":"","ucode":"3974D917C69C29","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540968,"discussion_content":"æ˜¯å¯ä»¥çš„ï¼Œä¸»è¦èƒ½ç›´æ¥ä½¿ç”¨contextæ¥makeå®¹å™¨ä¸­çš„æœåŠ¡å‡ºæ¥ï¼Œå¦‚æœåœ¨ginå¤–é¢å†å°è£…ä¸€å±‚ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640223598,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321204,"user_name":"void","can_delete":false,"product_type":"c1","uid":1145429,"ip_address":"","ucode":"502ED161F271B3","user_header":"https://static001.geekbang.org/account/avatar/00/11/7a/55/2f4055f6.jpg","comment_is_top":false,"comment_ctime":1636706348,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636706348","product_id":100090601,"comment_content":"è¿™èŠ‚çš„ä»£ç å¹¶æ²¡æœ‰æŠŠ IRequest æ¥å£çš„æ–¹æ³•éƒ½å®ç°å‘€","like_count":0}]}