{"id":210337,"title":"03 | çº¿ç¨‹æ± ï¼šä¸šåŠ¡ä»£ç æœ€å¸¸ç”¨ä¹Ÿæœ€å®¹æ˜“çŠ¯é”™çš„ç»„ä»¶","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æœ±æ™”ã€‚ä»Šå¤©ï¼Œæˆ‘æ¥è®²è®²ä½¿ç”¨çº¿ç¨‹æ± éœ€è¦æ³¨æ„çš„ä¸€äº›é—®é¢˜ã€‚</p><p>åœ¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä¼šç”¨å„ç§æ± åŒ–æŠ€æœ¯æ¥ç¼“å­˜åˆ›å»ºæ˜‚è´µçš„å¯¹è±¡ï¼Œæ¯”å¦‚çº¿ç¨‹æ± ã€è¿æ¥æ± ã€å†…å­˜æ± ã€‚ä¸€èˆ¬æ˜¯é¢„å…ˆåˆ›å»ºä¸€äº›å¯¹è±¡æ”¾å…¥æ± ä¸­ï¼Œä½¿ç”¨çš„æ—¶å€™ç›´æ¥å–å‡ºä½¿ç”¨ï¼Œç”¨å®Œå½’è¿˜ä»¥ä¾¿å¤ç”¨ï¼Œè¿˜ä¼šé€šè¿‡ä¸€å®šçš„ç­–ç•¥è°ƒæ•´æ± ä¸­ç¼“å­˜å¯¹è±¡çš„æ•°é‡ï¼Œå®ç°æ± çš„åŠ¨æ€ä¼¸ç¼©ã€‚</p><p>ç”±äºçº¿ç¨‹çš„åˆ›å»ºæ¯”è¾ƒæ˜‚è´µï¼Œéšæ„ã€æ²¡æœ‰æ§åˆ¶åœ°åˆ›å»ºå¤§é‡çº¿ç¨‹ä¼šé€ æˆæ€§èƒ½é—®é¢˜ï¼Œå› æ­¤çŸ­å¹³å¿«çš„ä»»åŠ¡ä¸€èˆ¬è€ƒè™‘ä½¿ç”¨çº¿ç¨‹æ± æ¥å¤„ç†ï¼Œè€Œä¸æ˜¯ç›´æ¥åˆ›å»ºçº¿ç¨‹ã€‚</p><p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±é’ˆå¯¹çº¿ç¨‹æ± è¿™ä¸ªè¯é¢˜å±•å¼€è®¨è®ºï¼Œé€šè¿‡ä¸‰ä¸ªç”Ÿäº§äº‹æ•…ï¼Œæ¥çœ‹çœ‹ä½¿ç”¨çº¿ç¨‹æ± åº”è¯¥æ³¨æ„äº›ä»€ä¹ˆã€‚</p><h2>çº¿ç¨‹æ± çš„å£°æ˜éœ€è¦æ‰‹åŠ¨è¿›è¡Œ</h2><p>Javaä¸­çš„Executorsç±»å®šä¹‰äº†ä¸€äº›å¿«æ·çš„å·¥å…·æ–¹æ³•ï¼Œæ¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿåˆ›å»ºçº¿ç¨‹æ± ã€‚ã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ä¸­æåˆ°ï¼Œç¦æ­¢ä½¿ç”¨è¿™äº›æ–¹æ³•æ¥åˆ›å»ºçº¿ç¨‹æ± ï¼Œè€Œåº”è¯¥æ‰‹åŠ¨new ThreadPoolExecutoræ¥åˆ›å»ºçº¿ç¨‹æ± ã€‚è¿™ä¸€æ¡è§„åˆ™çš„èƒŒåï¼Œæ˜¯å¤§é‡è¡€æ·‹æ·‹çš„ç”Ÿäº§äº‹æ•…ï¼Œæœ€å…¸å‹çš„å°±æ˜¯newFixedThreadPoolå’ŒnewCachedThreadPoolï¼Œå¯èƒ½å› ä¸ºèµ„æºè€—å°½å¯¼è‡´OOMé—®é¢˜ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹newFixedThreadPoolä¸ºä»€ä¹ˆå¯èƒ½ä¼šå‡ºç°OOMçš„é—®é¢˜ã€‚</p><p>æˆ‘ä»¬å†™ä¸€æ®µæµ‹è¯•ä»£ç ï¼Œæ¥åˆå§‹åŒ–ä¸€ä¸ªå•çº¿ç¨‹çš„FixedThreadPoolï¼Œå¾ªç¯1äº¿æ¬¡å‘çº¿ç¨‹æ± æäº¤ä»»åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ¯”è¾ƒå¤§çš„å­—ç¬¦ä¸²ç„¶åä¼‘çœ ä¸€å°æ—¶ï¼š</p><!-- [[[read_end]]] --><pre><code>@GetMapping(&quot;oom1&quot;)\npublic void oom1() throws InterruptedException {\n\n    ThreadPoolExecutor threadPool = (ThreadPoolExecutor) Executors.newFixedThreadPool(1);\n    //æ‰“å°çº¿ç¨‹æ± çš„ä¿¡æ¯ï¼Œç¨åæˆ‘ä¼šè§£é‡Šè¿™æ®µä»£ç \n    printStats(threadPool); \n    for (int i = 0; i &lt; 100000000; i++) {\n        threadPool.execute(() -&gt; {\n            String payload = IntStream.rangeClosed(1, 1000000)\n                    .mapToObj(__ -&gt; &quot;a&quot;)\n                    .collect(Collectors.joining(&quot;&quot;)) + UUID.randomUUID().toString();\n            try {\n                TimeUnit.HOURS.sleep(1);\n            } catch (InterruptedException e) {\n            }\n            log.info(payload);\n        });\n    }\n\n    threadPool.shutdown();\n    threadPool.awaitTermination(1, TimeUnit.HOURS);\n}\n</code></pre><p>æ‰§è¡Œç¨‹åºåä¸ä¹…ï¼Œæ—¥å¿—ä¸­å°±å‡ºç°äº†å¦‚ä¸‹OOMï¼š</p><pre><code>Exception in thread &quot;http-nio-45678-ClientPoller&quot; java.lang.OutOfMemoryError: GC overhead limit exceeded\n</code></pre><p>ç¿»çœ‹newFixedThreadPoolæ–¹æ³•çš„æºç ä¸éš¾å‘ç°ï¼Œçº¿ç¨‹æ± çš„å·¥ä½œé˜Ÿåˆ—ç›´æ¥newäº†ä¸€ä¸ªLinkedBlockingQueueï¼Œ<strong>è€Œé»˜è®¤æ„é€ æ–¹æ³•çš„LinkedBlockingQueueæ˜¯ä¸€ä¸ªInteger.MAX_VALUEé•¿åº¦çš„é˜Ÿåˆ—ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯æ— ç•Œçš„</strong>ï¼š</p><pre><code>public static ExecutorService newFixedThreadPool(int nThreads) {\n    return new ThreadPoolExecutor(nThreads, nThreads,\n                                  0L, TimeUnit.MILLISECONDS,\n                                  new LinkedBlockingQueue&lt;Runnable&gt;());\n}\n\npublic class LinkedBlockingQueue&lt;E&gt; extends AbstractQueue&lt;E&gt;\n        implements BlockingQueue&lt;E&gt;, java.io.Serializable {\n    ...\n\n\n    /**\n     * Creates a {@code LinkedBlockingQueue} with a capacity of\n     * {@link Integer#MAX_VALUE}.\n     */\n    public LinkedBlockingQueue() {\n        this(Integer.MAX_VALUE);\n    }\n...\n}\n</code></pre><p>è™½ç„¶ä½¿ç”¨newFixedThreadPoolå¯ä»¥æŠŠå·¥ä½œçº¿ç¨‹æ§åˆ¶åœ¨å›ºå®šçš„æ•°é‡ä¸Šï¼Œä½†ä»»åŠ¡é˜Ÿåˆ—æ˜¯æ— ç•Œçš„ã€‚å¦‚æœä»»åŠ¡è¾ƒå¤šå¹¶ä¸”æ‰§è¡Œè¾ƒæ…¢çš„è¯ï¼Œé˜Ÿåˆ—å¯èƒ½ä¼šå¿«é€Ÿç§¯å‹ï¼Œæ’‘çˆ†å†…å­˜å¯¼è‡´OOMã€‚</p><p>æˆ‘ä»¬å†æŠŠåˆšæ‰çš„ä¾‹å­ç¨å¾®æ”¹ä¸€ä¸‹ï¼Œæ”¹ä¸ºä½¿ç”¨newCachedThreadPoolæ–¹æ³•æ¥è·å¾—çº¿ç¨‹æ± ã€‚ç¨‹åºè¿è¡Œä¸ä¹…åï¼ŒåŒæ ·çœ‹åˆ°äº†å¦‚ä¸‹OOMå¼‚å¸¸ï¼š</p><pre><code>[11:30:30.487] [http-nio-45678-exec-1] [ERROR] [.a.c.c.C.[.[.[/].[dispatcherServlet]:175 ] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Handler dispatch failed; nested exception is java.lang.OutOfMemoryError: unable to create new native thread] with root cause\njava.lang.OutOfMemoryError: unable to create new native thread \n</code></pre><p>ä»æ—¥å¿—ä¸­å¯ä»¥çœ‹åˆ°ï¼Œè¿™æ¬¡OOMçš„åŸå› æ˜¯æ— æ³•åˆ›å»ºçº¿ç¨‹ï¼Œç¿»çœ‹newCachedThreadPoolçš„æºç å¯ä»¥çœ‹åˆ°ï¼Œ<strong>è¿™ç§çº¿ç¨‹æ± çš„æœ€å¤§çº¿ç¨‹æ•°æ˜¯Integer.MAX_VALUEï¼Œå¯ä»¥è®¤ä¸ºæ˜¯æ²¡æœ‰ä¸Šé™çš„ï¼Œè€Œå…¶å·¥ä½œé˜Ÿåˆ—SynchronousQueueæ˜¯ä¸€ä¸ªæ²¡æœ‰å­˜å‚¨ç©ºé—´çš„é˜»å¡é˜Ÿåˆ—</strong>ã€‚è¿™æ„å‘³ç€ï¼Œåªè¦æœ‰è¯·æ±‚åˆ°æ¥ï¼Œå°±å¿…é¡»æ‰¾åˆ°ä¸€æ¡å·¥ä½œçº¿ç¨‹æ¥å¤„ç†ï¼Œå¦‚æœå½“å‰æ²¡æœ‰ç©ºé—²çš„çº¿ç¨‹å°±å†åˆ›å»ºä¸€æ¡æ–°çš„ã€‚</p><p>ç”±äºæˆ‘ä»¬çš„ä»»åŠ¡éœ€è¦1å°æ—¶æ‰èƒ½æ‰§è¡Œå®Œæˆï¼Œå¤§é‡çš„ä»»åŠ¡è¿›æ¥åä¼šåˆ›å»ºå¤§é‡çš„çº¿ç¨‹ã€‚æˆ‘ä»¬çŸ¥é“çº¿ç¨‹æ˜¯éœ€è¦åˆ†é…ä¸€å®šçš„å†…å­˜ç©ºé—´ä½œä¸ºçº¿ç¨‹æ ˆçš„ï¼Œæ¯”å¦‚1MBï¼Œå› æ­¤æ— é™åˆ¶åˆ›å»ºçº¿ç¨‹å¿…ç„¶ä¼šå¯¼è‡´OOMï¼š</p><pre><code>public static ExecutorService newCachedThreadPool() {\n    return new ThreadPoolExecutor(0, Integer.MAX_VALUE,\n                                  60L, TimeUnit.SECONDS,\n                                  new SynchronousQueue&lt;Runnable&gt;());\n</code></pre><p>å…¶å®ï¼Œå¤§éƒ¨åˆ†Javaå¼€å‘åŒå­¦çŸ¥é“è¿™ä¸¤ç§çº¿ç¨‹æ± çš„ç‰¹æ€§ï¼Œåªæ˜¯æŠ±æœ‰ä¾¥å¹¸å¿ƒç†ï¼Œè§‰å¾—åªæ˜¯ä½¿ç”¨çº¿ç¨‹æ± åšä¸€äº›è½»é‡çº§çš„ä»»åŠ¡ï¼Œä¸å¯èƒ½é€ æˆé˜Ÿåˆ—ç§¯å‹æˆ–å¼€å¯å¤§é‡çº¿ç¨‹ã€‚</p><p>ä½†ï¼Œç°å®å¾€å¾€æ˜¯æ®‹é…·çš„ã€‚æˆ‘ä¹‹å‰å°±é‡åˆ°è¿‡è¿™ä¹ˆä¸€ä¸ªäº‹æ•…ï¼šç”¨æˆ·æ³¨å†Œåï¼Œæˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªå¤–éƒ¨æœåŠ¡å»å‘é€çŸ­ä¿¡ï¼Œå‘é€çŸ­ä¿¡æ¥å£æ­£å¸¸æ—¶å¯ä»¥åœ¨100æ¯«ç§’å†…å“åº”ï¼ŒTPS 100çš„æ³¨å†Œé‡ï¼ŒCachedThreadPoolèƒ½ç¨³å®šåœ¨å ç”¨10ä¸ªå·¦å³çº¿ç¨‹çš„æƒ…å†µä¸‹æ»¡è¶³éœ€æ±‚ã€‚åœ¨æŸä¸ªæ—¶é—´ç‚¹ï¼Œå¤–éƒ¨çŸ­ä¿¡æœåŠ¡ä¸å¯ç”¨äº†ï¼Œæˆ‘ä»¬è°ƒç”¨è¿™ä¸ªæœåŠ¡çš„è¶…æ—¶åˆç‰¹åˆ«é•¿ï¼Œæ¯”å¦‚1åˆ†é’Ÿï¼Œ1åˆ†é’Ÿå¯èƒ½å°±è¿›æ¥äº†6000ç”¨æˆ·ï¼Œäº§ç”Ÿ6000ä¸ªå‘é€çŸ­ä¿¡çš„ä»»åŠ¡ï¼Œéœ€è¦6000ä¸ªçº¿ç¨‹ï¼Œæ²¡å¤šä¹…å°±å› ä¸ºæ— æ³•åˆ›å»ºçº¿ç¨‹å¯¼è‡´äº†OOMï¼Œæ•´ä¸ªåº”ç”¨ç¨‹åºå´©æºƒã€‚</p><p>å› æ­¤ï¼Œ<strong>æˆ‘åŒæ ·ä¸å»ºè®®ä½¿ç”¨Executorsæä¾›çš„ä¸¤ç§å¿«æ·çš„çº¿ç¨‹æ± ï¼ŒåŸå› å¦‚ä¸‹</strong>ï¼š</p><ul>\n<li>æˆ‘ä»¬éœ€è¦æ ¹æ®è‡ªå·±çš„åœºæ™¯ã€å¹¶å‘æƒ…å†µæ¥è¯„ä¼°çº¿ç¨‹æ± çš„å‡ ä¸ªæ ¸å¿ƒå‚æ•°ï¼ŒåŒ…æ‹¬æ ¸å¿ƒçº¿ç¨‹æ•°ã€æœ€å¤§çº¿ç¨‹æ•°ã€çº¿ç¨‹å›æ”¶ç­–ç•¥ã€å·¥ä½œé˜Ÿåˆ—çš„ç±»å‹ï¼Œä»¥åŠæ‹’ç»ç­–ç•¥ï¼Œç¡®ä¿çº¿ç¨‹æ± çš„å·¥ä½œè¡Œä¸ºç¬¦åˆéœ€æ±‚ï¼Œä¸€èˆ¬éƒ½éœ€è¦è®¾ç½®æœ‰ç•Œçš„å·¥ä½œé˜Ÿåˆ—å’Œå¯æ§çš„çº¿ç¨‹æ•°ã€‚</li>\n<li>ä»»ä½•æ—¶å€™ï¼Œéƒ½åº”è¯¥ä¸ºè‡ªå®šä¹‰çº¿ç¨‹æ± æŒ‡å®šæœ‰æ„ä¹‰çš„åç§°ï¼Œä»¥æ–¹ä¾¿æ’æŸ¥é—®é¢˜ã€‚å½“å‡ºç°çº¿ç¨‹æ•°é‡æš´å¢ã€çº¿ç¨‹æ­»é”ã€çº¿ç¨‹å ç”¨å¤§é‡CPUã€çº¿ç¨‹æ‰§è¡Œå‡ºç°å¼‚å¸¸ç­‰é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šæŠ“å–çº¿ç¨‹æ ˆã€‚æ­¤æ—¶ï¼Œæœ‰æ„ä¹‰çš„çº¿ç¨‹åç§°ï¼Œå°±å¯ä»¥æ–¹ä¾¿æˆ‘ä»¬å®šä½é—®é¢˜ã€‚</li>\n</ul><p>é™¤äº†å»ºè®®æ‰‹åŠ¨å£°æ˜çº¿ç¨‹æ± ä»¥å¤–ï¼Œæˆ‘è¿˜å»ºè®®<strong>ç”¨ä¸€äº›ç›‘æ§æ‰‹æ®µæ¥è§‚å¯Ÿçº¿ç¨‹æ± çš„çŠ¶æ€</strong>ã€‚çº¿ç¨‹æ± è¿™ä¸ªç»„ä»¶å¾€å¾€ä¼šè¡¨ç°å¾—ä»»åŠ³ä»»æ€¨ã€é»˜é»˜æ— é—»ï¼Œé™¤éæ˜¯å‡ºç°äº†æ‹’ç»ç­–ç•¥ï¼Œå¦åˆ™å‹åŠ›å†å¤§éƒ½ä¸ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚å¦‚æœæˆ‘ä»¬èƒ½æå‰è§‚å¯Ÿåˆ°çº¿ç¨‹æ± é˜Ÿåˆ—çš„ç§¯å‹ï¼Œæˆ–è€…çº¿ç¨‹æ•°é‡çš„å¿«é€Ÿè†¨èƒ€ï¼Œå¾€å¾€å¯ä»¥ææ—©å‘ç°å¹¶è§£å†³é—®é¢˜ã€‚</p><h2>çº¿ç¨‹æ± çº¿ç¨‹ç®¡ç†ç­–ç•¥è¯¦è§£</h2><p>åœ¨ä¹‹å‰çš„Demoä¸­ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªprintStatsæ–¹æ³•å®ç°äº†æœ€ç®€é™‹çš„ç›‘æ§ï¼Œæ¯ç§’è¾“å‡ºä¸€æ¬¡çº¿ç¨‹æ± çš„åŸºæœ¬å†…éƒ¨ä¿¡æ¯ï¼ŒåŒ…æ‹¬çº¿ç¨‹æ•°ã€æ´»è·ƒçº¿ç¨‹æ•°ã€å®Œæˆäº†å¤šå°‘ä»»åŠ¡ï¼Œä»¥åŠé˜Ÿåˆ—ä¸­è¿˜æœ‰å¤šå°‘ç§¯å‹ä»»åŠ¡ç­‰ä¿¡æ¯ï¼š</p><pre><code>private void printStats(ThreadPoolExecutor threadPool) {\n   Executors.newSingleThreadScheduledExecutor().scheduleAtFixedRate(() -&gt; {\n        log.info(&quot;=========================&quot;);\n        log.info(&quot;Pool Size: {}&quot;, threadPool.getPoolSize());\n        log.info(&quot;Active Threads: {}&quot;, threadPool.getActiveCount());\n        log.info(&quot;Number of Tasks Completed: {}&quot;, threadPool.getCompletedTaskCount());\n        log.info(&quot;Number of Tasks in Queue: {}&quot;, threadPool.getQueue().size());\n\n        log.info(&quot;=========================&quot;);\n    }, 0, 1, TimeUnit.SECONDS);\n}\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±åˆ©ç”¨è¿™ä¸ªæ–¹æ³•æ¥è§‚å¯Ÿä¸€ä¸‹çº¿ç¨‹æ± çš„åŸºæœ¬ç‰¹æ€§å§ã€‚</p><p>é¦–å…ˆï¼Œè‡ªå®šä¹‰ä¸€ä¸ªçº¿ç¨‹æ± ã€‚è¿™ä¸ªçº¿ç¨‹æ± å…·æœ‰2ä¸ªæ ¸å¿ƒçº¿ç¨‹ã€5ä¸ªæœ€å¤§çº¿ç¨‹ã€ä½¿ç”¨å®¹é‡ä¸º10çš„ArrayBlockingQueueé˜»å¡é˜Ÿåˆ—ä½œä¸ºå·¥ä½œé˜Ÿåˆ—ï¼Œä½¿ç”¨é»˜è®¤çš„AbortPolicyæ‹’ç»ç­–ç•¥ï¼Œä¹Ÿå°±æ˜¯ä»»åŠ¡æ·»åŠ åˆ°çº¿ç¨‹æ± å¤±è´¥ä¼šæŠ›å‡ºRejectedExecutionExceptionã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å€ŸåŠ©äº†Joddç±»åº“çš„ThreadFactoryBuilderæ–¹æ³•æ¥æ„é€ ä¸€ä¸ªçº¿ç¨‹å·¥å‚ï¼Œå®ç°çº¿ç¨‹æ± çº¿ç¨‹çš„è‡ªå®šä¹‰å‘½åã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬å†™ä¸€æ®µæµ‹è¯•ä»£ç æ¥è§‚å¯Ÿçº¿ç¨‹æ± ç®¡ç†çº¿ç¨‹çš„ç­–ç•¥ã€‚æµ‹è¯•ä»£ç çš„é€»è¾‘ä¸ºï¼Œæ¯æ¬¡é—´éš”1ç§’å‘çº¿ç¨‹æ± æäº¤ä»»åŠ¡ï¼Œå¾ªç¯20æ¬¡ï¼Œæ¯ä¸ªä»»åŠ¡éœ€è¦10ç§’æ‰èƒ½æ‰§è¡Œå®Œæˆï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code>@GetMapping(&quot;right&quot;)\npublic int right() throws InterruptedException {\n    //ä½¿ç”¨ä¸€ä¸ªè®¡æ•°å™¨è·Ÿè¸ªå®Œæˆçš„ä»»åŠ¡æ•°\n    AtomicInteger atomicInteger = new AtomicInteger();\n    //åˆ›å»ºä¸€ä¸ªå…·æœ‰2ä¸ªæ ¸å¿ƒçº¿ç¨‹ã€5ä¸ªæœ€å¤§çº¿ç¨‹ï¼Œä½¿ç”¨å®¹é‡ä¸º10çš„ArrayBlockingQueueé˜»å¡é˜Ÿåˆ—ä½œä¸ºå·¥ä½œé˜Ÿåˆ—çš„çº¿ç¨‹æ± ï¼Œä½¿ç”¨é»˜è®¤çš„AbortPolicyæ‹’ç»ç­–ç•¥\n    ThreadPoolExecutor threadPool = new ThreadPoolExecutor(\n            2, 5,\n            5, TimeUnit.SECONDS,\n            new ArrayBlockingQueue&lt;&gt;(10),\n            new ThreadFactoryBuilder().setNameFormat(&quot;demo-threadpool-%d&quot;).get(),\n            new ThreadPoolExecutor.AbortPolicy());\n\n    printStats(threadPool);\n    //æ¯éš”1ç§’æäº¤ä¸€æ¬¡ï¼Œä¸€å…±æäº¤20æ¬¡ä»»åŠ¡\n    IntStream.rangeClosed(1, 20).forEach(i -&gt; {\n        try {\n            TimeUnit.SECONDS.sleep(1);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        int id = atomicInteger.incrementAndGet();\n        try {\n            threadPool.submit(() -&gt; {\n                log.info(&quot;{} started&quot;, id);\n                //æ¯ä¸ªä»»åŠ¡è€—æ—¶10ç§’\n                try {\n                    TimeUnit.SECONDS.sleep(10);\n                } catch (InterruptedException e) {\n                }\n                log.info(&quot;{} finished&quot;, id);\n            });\n        } catch (Exception ex) {\n            //æäº¤å‡ºç°å¼‚å¸¸çš„è¯ï¼Œæ‰“å°å‡ºé”™ä¿¡æ¯å¹¶ä¸ºè®¡æ•°å™¨å‡ä¸€\n            log.error(&quot;error submitting task {}&quot;, id, ex);\n            atomicInteger.decrementAndGet();\n        }\n    });\n\n    TimeUnit.SECONDS.sleep(60);\n    return atomicInteger.intValue();\n}\n</code></pre><p>60ç§’åé¡µé¢è¾“å‡ºäº†17ï¼Œæœ‰3æ¬¡æäº¤å¤±è´¥äº†ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/4b/2c/4b820e0b24ce0deefbf2dd7af295c32c.png?wh=970*204\" alt=\"\"></p><p>å¹¶ä¸”æ—¥å¿—ä¸­ä¹Ÿå‡ºç°äº†3æ¬¡ç±»ä¼¼çš„é”™è¯¯ä¿¡æ¯ï¼š</p><pre><code>[14:24:52.879] [http-nio-45678-exec-1] [ERROR] [.t.c.t.demo1.ThreadPoolOOMController:103 ] - error submitting task 18\njava.util.concurrent.RejectedExecutionException: Task java.util.concurrent.FutureTask@163a2dec rejected from java.util.concurrent.ThreadPoolExecutor@18061ad2[Running, pool size = 5, active threads = 5, queued tasks = 10, completed tasks = 2]\n</code></pre><p>æˆ‘ä»¬æŠŠprintStatsæ–¹æ³•æ‰“å°å‡ºçš„æ—¥å¿—ç»˜åˆ¶æˆå›¾è¡¨ï¼Œå¾—å‡ºå¦‚ä¸‹æ›²çº¿ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/d8/1e/d819035f60bf1c0022a98051d50e031e.png?wh=1738*684\" alt=\"\"></p><p><strong>è‡³æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºçº¿ç¨‹æ± é»˜è®¤çš„å·¥ä½œè¡Œä¸º</strong>ï¼š</p><ul>\n<li>ä¸ä¼šåˆå§‹åŒ–corePoolSizeä¸ªçº¿ç¨‹ï¼Œæœ‰ä»»åŠ¡æ¥äº†æ‰åˆ›å»ºå·¥ä½œçº¿ç¨‹ï¼›</li>\n<li>å½“æ ¸å¿ƒçº¿ç¨‹æ»¡äº†ä¹‹åä¸ä¼šç«‹å³æ‰©å®¹çº¿ç¨‹æ± ï¼Œè€Œæ˜¯æŠŠä»»åŠ¡å †ç§¯åˆ°å·¥ä½œé˜Ÿåˆ—ä¸­ï¼›</li>\n<li>å½“å·¥ä½œé˜Ÿåˆ—æ»¡äº†åæ‰©å®¹çº¿ç¨‹æ± ï¼Œä¸€ç›´åˆ°çº¿ç¨‹ä¸ªæ•°è¾¾åˆ°maximumPoolSizeä¸ºæ­¢ï¼›</li>\n<li>å¦‚æœé˜Ÿåˆ—å·²æ»¡ä¸”è¾¾åˆ°äº†æœ€å¤§çº¿ç¨‹åè¿˜æœ‰ä»»åŠ¡è¿›æ¥ï¼ŒæŒ‰ç…§æ‹’ç»ç­–ç•¥å¤„ç†ï¼›</li>\n<li>å½“çº¿ç¨‹æ•°å¤§äºæ ¸å¿ƒçº¿ç¨‹æ•°æ—¶ï¼Œçº¿ç¨‹ç­‰å¾…keepAliveTimeåè¿˜æ˜¯æ²¡æœ‰ä»»åŠ¡éœ€è¦å¤„ç†çš„è¯ï¼Œæ”¶ç¼©çº¿ç¨‹åˆ°æ ¸å¿ƒçº¿ç¨‹æ•°ã€‚</li>\n</ul><p>äº†è§£è¿™ä¸ªç­–ç•¥ï¼Œæœ‰åŠ©äºæˆ‘ä»¬æ ¹æ®å®é™…çš„å®¹é‡è§„åˆ’éœ€æ±‚ï¼Œä¸ºçº¿ç¨‹æ± è®¾ç½®åˆé€‚çš„åˆå§‹åŒ–å‚æ•°ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä¸€äº›æ‰‹æ®µæ¥æ”¹å˜è¿™äº›é»˜è®¤å·¥ä½œè¡Œä¸ºï¼Œæ¯”å¦‚ï¼š</p><ul>\n<li>å£°æ˜çº¿ç¨‹æ± åç«‹å³è°ƒç”¨prestartAllCoreThreadsæ–¹æ³•ï¼Œæ¥å¯åŠ¨æ‰€æœ‰æ ¸å¿ƒçº¿ç¨‹ï¼›</li>\n<li>ä¼ å…¥trueç»™allowCoreThreadTimeOutæ–¹æ³•ï¼Œæ¥è®©çº¿ç¨‹æ± åœ¨ç©ºé—²çš„æ—¶å€™åŒæ ·å›æ”¶æ ¸å¿ƒçº¿ç¨‹ã€‚</li>\n</ul><p>ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼šJavaçº¿ç¨‹æ± æ˜¯å…ˆç”¨å·¥ä½œé˜Ÿåˆ—æ¥å­˜æ”¾æ¥ä¸åŠå¤„ç†çš„ä»»åŠ¡ï¼Œæ»¡äº†ä¹‹åå†æ‰©å®¹çº¿ç¨‹æ± ã€‚å½“æˆ‘ä»¬çš„å·¥ä½œé˜Ÿåˆ—è®¾ç½®å¾—å¾ˆå¤§æ—¶ï¼Œæœ€å¤§çº¿ç¨‹æ•°è¿™ä¸ªå‚æ•°æ˜¾å¾—æ²¡æœ‰æ„ä¹‰ï¼Œå› ä¸ºé˜Ÿåˆ—å¾ˆéš¾æ»¡ï¼Œæˆ–è€…åˆ°æ»¡çš„æ—¶å€™å†å»æ‰©å®¹çº¿ç¨‹æ± å·²ç»äºäº‹æ— è¡¥äº†ã€‚</p><p>é‚£ä¹ˆï¼Œ<strong>æˆ‘ä»¬æœ‰æ²¡æœ‰åŠæ³•è®©çº¿ç¨‹æ± </strong><strong>æ›´æ¿€è¿›ä¸€ç‚¹ï¼Œä¼˜å…ˆå¼€å¯æ›´å¤šçš„çº¿ç¨‹ï¼Œè€ŒæŠŠé˜Ÿåˆ—å½“æˆä¸€ä¸ªåå¤‡æ–¹æ¡ˆå‘¢ï¼Ÿ</strong>æ¯”å¦‚æˆ‘ä»¬è¿™ä¸ªä¾‹å­ï¼Œä»»åŠ¡æ‰§è¡Œå¾—å¾ˆæ…¢ï¼Œéœ€è¦10ç§’ï¼Œå¦‚æœçº¿ç¨‹æ± å¯ä»¥ä¼˜å…ˆæ‰©å®¹åˆ°5ä¸ªæœ€å¤§çº¿ç¨‹ï¼Œé‚£ä¹ˆè¿™äº›ä»»åŠ¡æœ€ç»ˆéƒ½å¯ä»¥å®Œæˆï¼Œè€Œä¸ä¼šå› ä¸ºçº¿ç¨‹æ± æ‰©å®¹è¿‡æ™šå¯¼è‡´æ…¢ä»»åŠ¡æ¥ä¸åŠå¤„ç†ã€‚</p><p>é™äºç¯‡å¹…ï¼Œè¿™é‡Œæˆ‘åªç»™ä½ ä¸€ä¸ªå¤§è‡´æ€è·¯ï¼š</p><ol>\n<li>ç”±äºçº¿ç¨‹æ± åœ¨å·¥ä½œé˜Ÿåˆ—æ»¡äº†æ— æ³•å…¥é˜Ÿçš„æƒ…å†µä¸‹ä¼šæ‰©å®¹çº¿ç¨‹æ± ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥é‡å†™é˜Ÿåˆ—çš„offeræ–¹æ³•ï¼Œé€ æˆè¿™ä¸ªé˜Ÿåˆ—å·²æ»¡çš„å‡è±¡å‘¢ï¼Ÿ</li>\n<li>ç”±äºæˆ‘ä»¬Hackäº†é˜Ÿåˆ—ï¼Œåœ¨è¾¾åˆ°äº†æœ€å¤§çº¿ç¨‹ååŠ¿å¿…ä¼šè§¦å‘æ‹’ç»ç­–ç•¥ï¼Œé‚£ä¹ˆèƒ½å¦å®ç°ä¸€ä¸ªè‡ªå®šä¹‰çš„æ‹’ç»ç­–ç•¥å¤„ç†ç¨‹åºï¼Œè¿™ä¸ªæ—¶å€™å†æŠŠä»»åŠ¡çœŸæ­£æ’å…¥é˜Ÿåˆ—å‘¢ï¼Ÿ</li>\n</ol><p>æ¥ä¸‹æ¥ï¼Œå°±è¯·ä½ åŠ¨æ‰‹è¯•è¯•çœ‹å¦‚ä½•å®ç°è¿™æ ·ä¸€ä¸ªâ€œå¼¹æ€§â€çº¿ç¨‹æ± å§ã€‚Tomcatçº¿ç¨‹æ± ä¹Ÿå®ç°äº†ç±»ä¼¼çš„æ•ˆæœï¼Œå¯ä¾›ä½ å€Ÿé‰´ã€‚</p><h2>åŠ¡å¿…ç¡®è®¤æ¸…æ¥šçº¿ç¨‹æ± æœ¬èº«æ˜¯ä¸æ˜¯å¤ç”¨çš„</h2><p>ä¸ä¹…ä¹‹å‰æˆ‘é‡åˆ°äº†è¿™æ ·ä¸€ä¸ªäº‹æ•…ï¼šæŸé¡¹ç›®ç”Ÿäº§ç¯å¢ƒæ—¶ä¸æ—¶æœ‰æŠ¥è­¦æç¤ºçº¿ç¨‹æ•°è¿‡å¤šï¼Œè¶…è¿‡2000ä¸ªï¼Œæ”¶åˆ°æŠ¥è­¦åæŸ¥çœ‹ç›‘æ§å‘ç°ï¼Œç¬æ—¶çº¿ç¨‹æ•°æ¯”è¾ƒå¤šä½†è¿‡ä¸€ä¼šå„¿åˆä¼šé™ä¸‹æ¥ï¼Œçº¿ç¨‹æ•°æŠ–åŠ¨å¾ˆå‰å®³ï¼Œè€Œåº”ç”¨çš„è®¿é—®é‡å˜åŒ–ä¸å¤§ã€‚</p><p>ä¸ºäº†å®šä½é—®é¢˜ï¼Œæˆ‘ä»¬åœ¨çº¿ç¨‹æ•°æ¯”è¾ƒé«˜çš„æ—¶å€™è¿›è¡Œçº¿ç¨‹æ ˆæŠ“å–ï¼ŒæŠ“å–åå‘ç°å†…å­˜ä¸­æœ‰1000å¤šä¸ªè‡ªå®šä¹‰çº¿ç¨‹æ± ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œçº¿ç¨‹æ± è‚¯å®šæ˜¯å¤ç”¨çš„ï¼Œæœ‰5ä¸ªä»¥å†…çš„çº¿ç¨‹æ± éƒ½å¯ä»¥è®¤ä¸ºæ­£å¸¸ï¼Œè€Œ1000å¤šä¸ªçº¿ç¨‹æ± è‚¯å®šä¸æ­£å¸¸ã€‚</p><p>åœ¨é¡¹ç›®ä»£ç é‡Œï¼Œæˆ‘ä»¬æ²¡æœ‰æœåˆ°å£°æ˜çº¿ç¨‹æ± çš„åœ°æ–¹ï¼Œæœç´¢executeå…³é”®å­—åå®šä½åˆ°ï¼ŒåŸæ¥æ˜¯ä¸šåŠ¡ä»£ç è°ƒç”¨äº†ä¸€ä¸ªç±»åº“æ¥è·å¾—çº¿ç¨‹æ± ï¼Œç±»ä¼¼å¦‚ä¸‹çš„ä¸šåŠ¡ä»£ç ï¼šè°ƒç”¨ThreadPoolHelperçš„getThreadPoolæ–¹æ³•æ¥è·å¾—çº¿ç¨‹æ± ï¼Œç„¶åæäº¤æ•°ä¸ªä»»åŠ¡åˆ°çº¿ç¨‹æ± å¤„ç†ï¼Œçœ‹ä¸å‡ºä»€ä¹ˆå¼‚å¸¸ã€‚</p><pre><code>@GetMapping(&quot;wrong&quot;)\npublic String wrong() throws InterruptedException {\n    ThreadPoolExecutor threadPool = ThreadPoolHelper.getThreadPool();\n    IntStream.rangeClosed(1, 10).forEach(i -&gt; {\n        threadPool.execute(() -&gt; {\n            ...\n            try {\n                TimeUnit.SECONDS.sleep(1);\n            } catch (InterruptedException e) {\n            }\n        });\n    });\n    return &quot;OK&quot;;\n}\n</code></pre><p>ä½†æ˜¯ï¼Œæ¥åˆ°ThreadPoolHelperçš„å®ç°è®©äººå¤§è·Œçœ¼é•œï¼Œ<strong>getThreadPoolæ–¹æ³•å±…ç„¶æ˜¯æ¯æ¬¡éƒ½ä½¿ç”¨Executors.newCachedThreadPoolæ¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± </strong>ã€‚</p><pre><code>class ThreadPoolHelper {\n    public static ThreadPoolExecutor getThreadPool() {\n        //çº¿ç¨‹æ± æ²¡æœ‰å¤ç”¨\n        return (ThreadPoolExecutor) Executors.newCachedThreadPool();\n    }\n}\n</code></pre><p>é€šè¿‡ä¸Šä¸€å°èŠ‚çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³åˆ°newCachedThreadPoolä¼šåœ¨éœ€è¦æ—¶åˆ›å»ºå¿…è¦å¤šçš„çº¿ç¨‹ï¼Œä¸šåŠ¡ä»£ç çš„ä¸€æ¬¡ä¸šåŠ¡æ“ä½œä¼šå‘çº¿ç¨‹æ± æäº¤å¤šä¸ªæ…¢ä»»åŠ¡ï¼Œè¿™æ ·æ‰§è¡Œä¸€æ¬¡ä¸šåŠ¡æ“ä½œå°±ä¼šå¼€å¯å¤šä¸ªçº¿ç¨‹ã€‚å¦‚æœä¸šåŠ¡æ“ä½œå¹¶å‘é‡è¾ƒå¤§çš„è¯ï¼Œçš„ç¡®æœ‰å¯èƒ½ä¸€ä¸‹å­å¼€å¯å‡ åƒä¸ªçº¿ç¨‹ã€‚</p><p>é‚£ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬èƒ½åœ¨ç›‘æ§ä¸­çœ‹åˆ°çº¿ç¨‹æ•°é‡ä¼šä¸‹é™ï¼Œè€Œä¸ä¼šæ’‘çˆ†å†…å­˜å‘¢ï¼Ÿ</p><p>å›åˆ°newCachedThreadPoolçš„å®šä¹‰å°±ä¼šå‘ç°ï¼Œå®ƒçš„æ ¸å¿ƒçº¿ç¨‹æ•°æ˜¯0ï¼Œè€ŒkeepAliveTimeæ˜¯60ç§’ï¼Œä¹Ÿå°±æ˜¯åœ¨60ç§’ä¹‹åæ‰€æœ‰çš„çº¿ç¨‹éƒ½æ˜¯å¯ä»¥å›æ”¶çš„ã€‚å¥½å§ï¼Œå°±å› ä¸ºè¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬çš„ä¸šåŠ¡ç¨‹åºæ­»å¾—æ²¡å¤ªéš¾çœ‹ã€‚</p><p>è¦ä¿®å¤è¿™ä¸ªBugä¹Ÿå¾ˆç®€å•ï¼Œä½¿ç”¨ä¸€ä¸ªé™æ€å­—æ®µæ¥å­˜æ”¾çº¿ç¨‹æ± çš„å¼•ç”¨ï¼Œè¿”å›çº¿ç¨‹æ± çš„ä»£ç ç›´æ¥è¿”å›è¿™ä¸ªé™æ€å­—æ®µå³å¯ã€‚è¿™é‡Œä¸€å®šè¦è®°å¾—æˆ‘ä»¬çš„æœ€ä½³å®è·µï¼Œæ‰‹åŠ¨åˆ›å»ºçº¿ç¨‹æ± ã€‚ä¿®å¤åçš„ThreadPoolHelperç±»å¦‚ä¸‹ï¼š</p><pre><code>class ThreadPoolHelper {\n\tprivate static ThreadPoolExecutor threadPoolExecutor = new ThreadPoolExecutor(\n\t\t10, 50,\n\t\t2, TimeUnit.SECONDS,\n\t\tnew ArrayBlockingQueue&lt;&gt;(1000),\n\t\tnew ThreadFactoryBuilder().setNameFormat(&quot;demo-threadpool-%d&quot;).get());\n\tpublic static ThreadPoolExecutor getRightThreadPool() {\n\t\treturn threadPoolExecutor;\n\t}\n}\n</code></pre><h2>éœ€è¦ä»”ç»†æ–Ÿé…Œçº¿ç¨‹æ± çš„æ··ç”¨ç­–ç•¥</h2><p>çº¿ç¨‹æ± çš„æ„ä¹‰åœ¨äºå¤ç”¨ï¼Œé‚£è¿™æ˜¯ä¸æ˜¯æ„å‘³ç€ç¨‹åºåº”è¯¥å§‹ç»ˆä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹æ± å‘¢ï¼Ÿ</p><p>å½“ç„¶ä¸æ˜¯ã€‚é€šè¿‡ç¬¬ä¸€å°èŠ‚çš„å­¦ä¹ æˆ‘ä»¬çŸ¥é“ï¼Œ<strong>è¦æ ¹æ®ä»»åŠ¡çš„â€œè½»é‡ç¼“æ€¥â€æ¥æŒ‡å®šçº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°ï¼ŒåŒ…æ‹¬çº¿ç¨‹æ•°ã€å›æ”¶ç­–ç•¥å’Œä»»åŠ¡é˜Ÿåˆ—</strong>ï¼š</p><ul>\n<li>å¯¹äºæ‰§è¡Œæ¯”è¾ƒæ…¢ã€æ•°é‡ä¸å¤§çš„IOä»»åŠ¡ï¼Œæˆ–è®¸è¦è€ƒè™‘æ›´å¤šçš„çº¿ç¨‹æ•°ï¼Œè€Œä¸éœ€è¦å¤ªå¤§çš„é˜Ÿåˆ—ã€‚</li>\n<li>è€Œå¯¹äºååé‡è¾ƒå¤§çš„è®¡ç®—å‹ä»»åŠ¡ï¼Œçº¿ç¨‹æ•°é‡ä¸å®œè¿‡å¤šï¼Œå¯ä»¥æ˜¯CPUæ ¸æ•°æˆ–æ ¸æ•°*2ï¼ˆç†ç”±æ˜¯ï¼Œçº¿ç¨‹ä¸€å®šè°ƒåº¦åˆ°æŸä¸ªCPUè¿›è¡Œæ‰§è¡Œï¼Œå¦‚æœä»»åŠ¡æœ¬èº«æ˜¯CPUç»‘å®šçš„ä»»åŠ¡ï¼Œé‚£ä¹ˆè¿‡å¤šçš„çº¿ç¨‹åªä¼šå¢åŠ çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€ï¼Œå¹¶ä¸èƒ½æå‡ååé‡ï¼‰ï¼Œä½†å¯èƒ½éœ€è¦è¾ƒé•¿çš„é˜Ÿåˆ—æ¥åšç¼“å†²ã€‚</li>\n</ul><p>ä¹‹å‰æˆ‘ä¹Ÿé‡åˆ°è¿‡è¿™ä¹ˆä¸€ä¸ªé—®é¢˜ï¼Œä¸šåŠ¡ä»£ç ä½¿ç”¨äº†çº¿ç¨‹æ± å¼‚æ­¥å¤„ç†ä¸€äº›å†…å­˜ä¸­çš„æ•°æ®ï¼Œä½†é€šè¿‡ç›‘æ§å‘ç°å¤„ç†å¾—éå¸¸æ…¢ï¼Œæ•´ä¸ªå¤„ç†è¿‡ç¨‹éƒ½æ˜¯å†…å­˜ä¸­çš„è®¡ç®—ä¸æ¶‰åŠIOæ“ä½œï¼Œä¹Ÿéœ€è¦æ•°ç§’çš„å¤„ç†æ—¶é—´ï¼Œåº”ç”¨ç¨‹åºCPUå ç”¨ä¹Ÿä¸æ˜¯ç‰¹åˆ«é«˜ï¼Œæœ‰ç‚¹ä¸å¯æ€è®®ã€‚</p><p>ç»æ’æŸ¥å‘ç°ï¼Œä¸šåŠ¡ä»£ç ä½¿ç”¨çš„çº¿ç¨‹æ± ï¼Œè¿˜è¢«ä¸€ä¸ªåå°çš„æ–‡ä»¶æ‰¹å¤„ç†ä»»åŠ¡ç”¨åˆ°äº†ã€‚</p><p>æˆ–è®¸æ˜¯å¤Ÿç”¨å°±å¥½çš„åŸåˆ™ï¼Œè¿™ä¸ªçº¿ç¨‹æ± åªæœ‰2ä¸ªæ ¸å¿ƒçº¿ç¨‹ï¼Œæœ€å¤§çº¿ç¨‹ä¹Ÿæ˜¯2ï¼Œä½¿ç”¨äº†å®¹é‡ä¸º100çš„ArrayBlockingQueueä½œä¸ºå·¥ä½œé˜Ÿåˆ—ï¼Œä½¿ç”¨äº†CallerRunsPolicyæ‹’ç»ç­–ç•¥ï¼š</p><pre><code>private static ThreadPoolExecutor threadPool = new ThreadPoolExecutor(\n        2, 2,\n        1, TimeUnit.HOURS,\n        new ArrayBlockingQueue&lt;&gt;(100),\n        new ThreadFactoryBuilder().setNameFormat(&quot;batchfileprocess-threadpool-%d&quot;).get(),\n        new ThreadPoolExecutor.CallerRunsPolicy());\n</code></pre><p>è¿™é‡Œï¼Œæˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸‹æ–‡ä»¶æ‰¹å¤„ç†çš„ä»£ç ï¼Œåœ¨ç¨‹åºå¯åŠ¨åé€šè¿‡ä¸€ä¸ªçº¿ç¨‹å¼€å¯æ­»å¾ªç¯é€»è¾‘ï¼Œä¸æ–­å‘çº¿ç¨‹æ± æäº¤ä»»åŠ¡ï¼Œä»»åŠ¡çš„é€»è¾‘æ˜¯å‘ä¸€ä¸ªæ–‡ä»¶ä¸­å†™å…¥å¤§é‡çš„æ•°æ®ï¼š</p><pre><code>@PostConstruct\npublic void init() {\n    printStats(threadPool);\n\n    new Thread(() -&gt; {\n        //æ¨¡æ‹Ÿéœ€è¦å†™å…¥çš„å¤§é‡æ•°æ®\n        String payload = IntStream.rangeClosed(1, 1_000_000)\n                .mapToObj(__ -&gt; &quot;a&quot;)\n                .collect(Collectors.joining(&quot;&quot;));\n        while (true) {\n            threadPool.execute(() -&gt; {\n                try {\n                    //æ¯æ¬¡éƒ½æ˜¯åˆ›å»ºå¹¶å†™å…¥ç›¸åŒçš„æ•°æ®åˆ°ç›¸åŒçš„æ–‡ä»¶\n                    Files.write(Paths.get(&quot;demo.txt&quot;), Collections.singletonList(LocalTime.now().toString() + &quot;:&quot; + payload), UTF_8, CREATE, TRUNCATE_EXISTING);\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n                log.info(&quot;batch file processing done&quot;);\n            });\n        }\n    }).start();\n}\n</code></pre><p>å¯ä»¥æƒ³è±¡åˆ°ï¼Œè¿™ä¸ªçº¿ç¨‹æ± ä¸­çš„2ä¸ªçº¿ç¨‹ä»»åŠ¡æ˜¯ç›¸å½“é‡çš„ã€‚é€šè¿‡printStatsæ–¹æ³•æ‰“å°å‡ºçš„æ—¥å¿—ï¼Œæˆ‘ä»¬è§‚å¯Ÿä¸‹çº¿ç¨‹æ± çš„è´Ÿæ‹…ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/49/55/49c132595db60f109530e0dec55ccd55.png?wh=2732*508\" alt=\"\"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œ<strong>çº¿ç¨‹æ± çš„2ä¸ªçº¿ç¨‹å§‹ç»ˆå¤„äºæ´»è·ƒçŠ¶æ€ï¼Œé˜Ÿåˆ—ä¹ŸåŸºæœ¬å¤„äºæ‰“æ»¡çŠ¶æ€ã€‚</strong>å› ä¸ºå¼€å¯äº†CallerRunsPolicyæ‹’ç»å¤„ç†ç­–ç•¥ï¼Œæ‰€ä»¥å½“çº¿ç¨‹æ»¡è½½é˜Ÿåˆ—ä¹Ÿæ»¡çš„æƒ…å†µä¸‹ï¼Œä»»åŠ¡ä¼šåœ¨æäº¤ä»»åŠ¡çš„çº¿ç¨‹ï¼Œæˆ–è€…è¯´è°ƒç”¨executeæ–¹æ³•çš„çº¿ç¨‹æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ä¸èƒ½è®¤ä¸ºæäº¤åˆ°çº¿ç¨‹æ± çš„ä»»åŠ¡å°±ä¸€å®šæ˜¯å¼‚æ­¥å¤„ç†çš„ã€‚å¦‚æœä½¿ç”¨äº†CallerRunsPolicyç­–ç•¥ï¼Œé‚£ä¹ˆæœ‰å¯èƒ½å¼‚æ­¥ä»»åŠ¡å˜ä¸ºåŒæ­¥æ‰§è¡Œã€‚ä»æ—¥å¿—çš„ç¬¬å››è¡Œä¹Ÿå¯ä»¥çœ‹åˆ°è¿™ç‚¹ã€‚è¿™ä¹Ÿæ˜¯è¿™ä¸ªæ‹’ç»ç­–ç•¥æ¯”è¾ƒç‰¹åˆ«çš„åŸå› ã€‚</p><p>ä¸çŸ¥é“å†™ä»£ç çš„åŒå­¦ä¸ºä»€ä¹ˆè®¾ç½®è¿™ä¸ªç­–ç•¥ï¼Œæˆ–è®¸æ˜¯æµ‹è¯•æ—¶å‘ç°çº¿ç¨‹æ± å› ä¸ºä»»åŠ¡å¤„ç†ä¸è¿‡æ¥å‡ºç°äº†å¼‚å¸¸ï¼Œè€Œåˆä¸å¸Œæœ›çº¿ç¨‹æ± ä¸¢å¼ƒä»»åŠ¡ï¼Œæ‰€ä»¥æœ€ç»ˆé€‰æ‹©äº†è¿™æ ·çš„æ‹’ç»ç­–ç•¥ã€‚ä¸ç®¡æ€æ ·ï¼Œè¿™äº›æ—¥å¿—è¶³ä»¥è¯´æ˜çº¿ç¨‹æ± æ˜¯é¥±å’ŒçŠ¶æ€ã€‚</p><p>å¯ä»¥æƒ³è±¡åˆ°ï¼Œä¸šåŠ¡ä»£ç å¤ç”¨è¿™æ ·çš„çº¿ç¨‹æ± æ¥åšå†…å­˜è®¡ç®—ï¼Œå‘½è¿ä¸€å®šæ˜¯æ‚²æƒ¨çš„ã€‚æˆ‘ä»¬å†™ä¸€æ®µä»£ç æµ‹è¯•ä¸‹ï¼Œå‘çº¿ç¨‹æ± æäº¤ä¸€ä¸ªç®€å•çš„ä»»åŠ¡ï¼Œè¿™ä¸ªä»»åŠ¡åªæ˜¯ä¼‘çœ 10æ¯«ç§’æ²¡æœ‰å…¶ä»–é€»è¾‘ï¼š</p><pre><code>private Callable&lt;Integer&gt; calcTask() {\n    return () -&gt; {\n        TimeUnit.MILLISECONDS.sleep(10);\n        return 1;\n    };\n}\n\n@GetMapping(&quot;wrong&quot;)\npublic int wrong() throws ExecutionException, InterruptedException {\n    return threadPool.submit(calcTask()).get();\n}\n</code></pre><p>æˆ‘ä»¬ä½¿ç”¨wrkå·¥å…·å¯¹è¿™ä¸ªæ¥å£è¿›è¡Œä¸€ä¸ªç®€å•çš„å‹æµ‹ï¼Œå¯ä»¥çœ‹åˆ°TPSä¸º75ï¼Œæ€§èƒ½çš„ç¡®éå¸¸å·®ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/98/07/989f7ab383e59e21751adb77a9b53507.png?wh=1188*344\" alt=\"\"></p><p>ç»†æƒ³ä¸€ä¸‹ï¼Œé—®é¢˜å…¶å®æ²¡æœ‰è¿™ä¹ˆç®€å•ã€‚å› ä¸ºåŸæ¥æ‰§è¡ŒIOä»»åŠ¡çš„çº¿ç¨‹æ± ä½¿ç”¨çš„æ˜¯CallerRunsPolicyç­–ç•¥ï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªçº¿ç¨‹æ± è¿›è¡Œå¼‚æ­¥è®¡ç®—çš„è¯ï¼Œ<strong>å½“çº¿ç¨‹æ± é¥±å’Œçš„æ—¶å€™ï¼Œè®¡ç®—ä»»åŠ¡ä¼šåœ¨æ‰§è¡ŒWebè¯·æ±‚çš„Tomcatçº¿ç¨‹æ‰§è¡Œï¼Œè¿™æ—¶å°±ä¼šè¿›ä¸€æ­¥å½±å“åˆ°å…¶ä»–åŒæ­¥å¤„ç†çš„çº¿ç¨‹ï¼Œç”šè‡³é€ æˆæ•´ä¸ªåº”ç”¨ç¨‹åºå´©æºƒ</strong>ã€‚</p><p>è§£å†³æ–¹æ¡ˆå¾ˆç®€å•ï¼Œä½¿ç”¨ç‹¬ç«‹çš„çº¿ç¨‹æ± æ¥åšè¿™æ ·çš„â€œè®¡ç®—ä»»åŠ¡â€å³å¯ã€‚è®¡ç®—ä»»åŠ¡æ‰“äº†åŒå¼•å·ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬çš„æ¨¡æ‹Ÿä»£ç æ‰§è¡Œçš„æ˜¯ä¼‘çœ æ“ä½œï¼Œå¹¶ä¸å±äºCPUç»‘å®šçš„æ“ä½œï¼Œæ›´ç±»ä¼¼IOç»‘å®šçš„æ“ä½œï¼Œå¦‚æœçº¿ç¨‹æ± çº¿ç¨‹æ•°è®¾ç½®å¤ªå°ä¼šé™åˆ¶ååèƒ½åŠ›ï¼š</p><pre><code>private static ThreadPoolExecutor asyncCalcThreadPool = new ThreadPoolExecutor(\n\t200, 200,\n\t1, TimeUnit.HOURS,\n\tnew ArrayBlockingQueue&lt;&gt;(1000),\n\tnew ThreadFactoryBuilder().setNameFormat(&quot;asynccalc-threadpool-%d&quot;).get());\n\n\n@GetMapping(&quot;right&quot;)\npublic int right() throws ExecutionException, InterruptedException {\n\treturn asyncCalcThreadPool.submit(calcTask()).get();\n}\n</code></pre><p>ä½¿ç”¨å•ç‹¬çš„çº¿ç¨‹æ± æ”¹é€ ä»£ç åå†æ¥æµ‹è¯•ä¸€ä¸‹æ€§èƒ½ï¼ŒTPSæé«˜åˆ°äº†1727ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/c2/06/c21eed38ccd18758d38745dd09496a06.png?wh=1214*346\" alt=\"\"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œç›²ç›®å¤ç”¨çº¿ç¨‹æ± æ··ç”¨çº¿ç¨‹çš„é—®é¢˜åœ¨äºï¼Œåˆ«äººå®šä¹‰çš„çº¿ç¨‹æ± å±æ€§ä¸ä¸€å®šé€‚åˆä½ çš„ä»»åŠ¡ï¼Œè€Œä¸”æ··ç”¨ä¼šç›¸äº’å¹²æ‰°ã€‚è¿™å°±å¥½æ¯”ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šç”¨è™šæ‹ŸåŒ–æŠ€æœ¯æ¥å®ç°èµ„æºçš„éš”ç¦»ï¼Œè€Œä¸æ˜¯è®©æ‰€æœ‰åº”ç”¨ç¨‹åºéƒ½ç›´æ¥ä½¿ç”¨ç‰©ç†æœºã€‚</p><p>å°±çº¿ç¨‹æ± æ··ç”¨é—®é¢˜ï¼Œæˆ‘æƒ³å†å’Œä½ è¡¥å……ä¸€ä¸ªå‘ï¼š<strong>Java 8çš„parallel streamåŠŸèƒ½ï¼Œå¯ä»¥è®©æˆ‘ä»¬å¾ˆæ–¹ä¾¿åœ°å¹¶è¡Œå¤„ç†é›†åˆä¸­çš„å…ƒç´ ï¼Œå…¶èƒŒåæ˜¯å…±äº«åŒä¸€ä¸ªForkJoinPoolï¼Œé»˜è®¤å¹¶è¡Œåº¦æ˜¯CPUæ ¸æ•°-1</strong>ã€‚å¯¹äºCPUç»‘å®šçš„ä»»åŠ¡æ¥è¯´ï¼Œä½¿ç”¨è¿™æ ·çš„é…ç½®æ¯”è¾ƒåˆé€‚ï¼Œä½†å¦‚æœé›†åˆæ“ä½œæ¶‰åŠåŒæ­¥IOæ“ä½œçš„è¯ï¼ˆæ¯”å¦‚æ•°æ®åº“æ“ä½œã€å¤–éƒ¨æœåŠ¡è°ƒç”¨ç­‰ï¼‰ï¼Œå»ºè®®è‡ªå®šä¹‰ä¸€ä¸ªForkJoinPoolï¼ˆæˆ–æ™®é€šçº¿ç¨‹æ± ï¼‰ã€‚ä½ å¯ä»¥å‚è€ƒ<a href=\"https://time.geekbang.org/column/article/209494\">ç¬¬ä¸€è®²</a>çš„ç›¸å…³Demoã€‚</p><h2>é‡ç‚¹å›é¡¾</h2><p>çº¿ç¨‹æ± ç®¡ç†ç€çº¿ç¨‹ï¼Œçº¿ç¨‹åˆå±äºå®è´µçš„èµ„æºï¼Œæœ‰è®¸å¤šåº”ç”¨ç¨‹åºçš„æ€§èƒ½é—®é¢˜éƒ½æ¥è‡ªçº¿ç¨‹æ± çš„é…ç½®å’Œä½¿ç”¨ä¸å½“ã€‚åœ¨ä»Šå¤©çš„å­¦ä¹ ä¸­ï¼Œæˆ‘é€šè¿‡ä¸‰ä¸ªå’Œçº¿ç¨‹æ± ç›¸å…³çš„ç”Ÿäº§äº‹æ•…ï¼Œå’Œä½ åˆ†äº«äº†ä½¿ç”¨çº¿ç¨‹æ± çš„å‡ ä¸ªæœ€ä½³å®è·µã€‚</p><p>ç¬¬ä¸€ï¼ŒExecutorsç±»æä¾›çš„ä¸€äº›å¿«æ·å£°æ˜çº¿ç¨‹æ± çš„æ–¹æ³•è™½ç„¶ç®€å•ï¼Œä½†éšè—äº†çº¿ç¨‹æ± çš„å‚æ•°ç»†èŠ‚ã€‚å› æ­¤ï¼Œä½¿ç”¨çº¿ç¨‹æ± æ—¶ï¼Œæˆ‘ä»¬ä¸€å®šè¦æ ¹æ®åœºæ™¯å’Œéœ€æ±‚é…ç½®åˆç†çš„çº¿ç¨‹æ•°ã€ä»»åŠ¡é˜Ÿåˆ—ã€æ‹’ç»ç­–ç•¥ã€çº¿ç¨‹å›æ”¶ç­–ç•¥ï¼Œå¹¶å¯¹çº¿ç¨‹è¿›è¡Œæ˜ç¡®çš„å‘½åæ–¹ä¾¿æ’æŸ¥é—®é¢˜ã€‚</p><p>ç¬¬äºŒï¼Œæ—¢ç„¶ä½¿ç”¨äº†çº¿ç¨‹æ± å°±éœ€è¦ç¡®ä¿çº¿ç¨‹æ± æ˜¯åœ¨å¤ç”¨çš„ï¼Œæ¯æ¬¡newä¸€ä¸ªçº¿ç¨‹æ± å‡ºæ¥å¯èƒ½æ¯”ä¸ç”¨çº¿ç¨‹æ± è¿˜ç³Ÿç³•ã€‚å¦‚æœä½ æ²¡æœ‰ç›´æ¥å£°æ˜çº¿ç¨‹æ± è€Œæ˜¯ä½¿ç”¨å…¶ä»–åŒå­¦æä¾›çš„ç±»åº“æ¥è·å¾—ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œè¯·åŠ¡å¿…æŸ¥çœ‹æºç ï¼Œä»¥ç¡®è®¤çº¿ç¨‹æ± çš„å®ä¾‹åŒ–æ–¹å¼å’Œé…ç½®æ˜¯ç¬¦åˆé¢„æœŸçš„ã€‚</p><p>ç¬¬ä¸‰ï¼Œå¤ç”¨çº¿ç¨‹æ± ä¸ä»£è¡¨åº”ç”¨ç¨‹åºå§‹ç»ˆä½¿ç”¨åŒä¸€ä¸ªçº¿ç¨‹æ± ï¼Œæˆ‘ä»¬åº”è¯¥æ ¹æ®ä»»åŠ¡çš„æ€§è´¨æ¥é€‰ç”¨ä¸åŒçš„çº¿ç¨‹æ± ã€‚ç‰¹åˆ«æ³¨æ„IOç»‘å®šçš„ä»»åŠ¡å’ŒCPUç»‘å®šçš„ä»»åŠ¡å¯¹äºçº¿ç¨‹æ± å±æ€§çš„åå¥½ï¼Œå¦‚æœå¸Œæœ›å‡å°‘ä»»åŠ¡é—´çš„ç›¸äº’å¹²æ‰°ï¼Œè€ƒè™‘æŒ‰éœ€ä½¿ç”¨éš”ç¦»çš„çº¿ç¨‹æ± ã€‚</p><p>æœ€åæˆ‘æƒ³å¼ºè°ƒçš„æ˜¯ï¼Œ<strong>çº¿ç¨‹æ± ä½œä¸ºåº”ç”¨ç¨‹åºå†…éƒ¨çš„æ ¸å¿ƒç»„ä»¶å¾€å¾€ç¼ºä¹ç›‘æ§</strong>ï¼ˆå¦‚æœä½ ä½¿ç”¨ç±»ä¼¼RabbitMQè¿™æ ·çš„MQä¸­é—´ä»¶ï¼Œè¿ç»´åŒå­¦ä¸€èˆ¬ä¼šå¸®æˆ‘ä»¬åšå¥½ä¸­é—´ä»¶ç›‘æ§ï¼‰ï¼Œå¾€å¾€åˆ°ç¨‹åºå´©æºƒåæ‰å‘ç°çº¿ç¨‹æ± çš„é—®é¢˜ï¼Œå¾ˆè¢«åŠ¨ã€‚åœ¨è®¾è®¡ç¯‡ä¸­æˆ‘ä»¬ä¼šé‡æ–°è°ˆåŠè¿™ä¸ªé—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆã€‚</p><p>ä»Šå¤©ç”¨åˆ°çš„ä»£ç ï¼Œæˆ‘éƒ½æ”¾åœ¨äº†GitHubä¸Šï¼Œä½ å¯ä»¥ç‚¹å‡»<a href=\"https://github.com/JosephZhu1983/java-common-mistakes\">è¿™ä¸ªé“¾æ¥</a>æŸ¥çœ‹ã€‚</p><h2>æ€è€ƒä¸è®¨è®º</h2><ol>\n<li>åœ¨ç¬¬ä¸€èŠ‚ä¸­æˆ‘ä»¬æåˆ°ï¼Œæˆ–è®¸ä¸€ä¸ªæ¿€è¿›åˆ›å»ºçº¿ç¨‹çš„å¼¹æ€§çº¿ç¨‹æ± æ›´ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚ï¼Œä½ èƒ½ç»™å‡ºç›¸å…³çš„å®ç°å—ï¼Ÿå®ç°åå†æµ‹è¯•ä¸€ä¸‹ï¼Œæ˜¯å¦æ‰€æœ‰çš„ä»»åŠ¡éƒ½å¯ä»¥æ­£å¸¸å¤„ç†å®Œæˆå‘¢ï¼Ÿ</li>\n<li>åœ¨ç¬¬äºŒèŠ‚ä¸­ï¼Œæˆ‘ä»¬æ”¹è¿›äº†ThreadPoolHelperä½¿å…¶èƒ½å¤Ÿè¿”å›å¤ç”¨çš„çº¿ç¨‹æ± ã€‚å¦‚æœæˆ‘ä»¬ä¸å°å¿ƒæ¯æ¬¡éƒ½åˆ›å»ºäº†è¿™æ ·ä¸€ä¸ªè‡ªå®šä¹‰çš„çº¿ç¨‹æ± ï¼ˆ10æ ¸å¿ƒçº¿ç¨‹ï¼Œ50æœ€å¤§çº¿ç¨‹ï¼Œ2ç§’å›æ”¶çš„ï¼‰ï¼Œåå¤æ‰§è¡Œæµ‹è¯•æ¥å£çº¿ç¨‹ï¼Œæœ€ç»ˆå¯ä»¥è¢«å›æ”¶å—ï¼Ÿä¼šå‡ºç°OOMé—®é¢˜å—ï¼Ÿ</li>\n</ol><p>ä½ è¿˜é‡åˆ°è¿‡çº¿ç¨‹æ± ç›¸å…³çš„å…¶ä»–å‘å—ï¼Ÿæˆ‘æ˜¯æœ±æ™”ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºä¸æˆ‘ç•™è¨€åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–åŒäº‹ï¼Œä¸€èµ·äº¤æµã€‚</p>","neighbors":{"left":{"article_title":"02 | ä»£ç åŠ é”ï¼šä¸è¦è®©â€œé”â€äº‹æˆä¸ºçƒ¦å¿ƒäº‹","id":209520},"right":{"article_title":"04 | è¿æ¥æ± ï¼šåˆ«è®©è¿æ¥æ± å¸®äº†å€’å¿™","id":211388}},"comments":[{"had_liked":false,"id":186988,"user_name":"Darren","can_delete":false,"product_type":"c1","uid":1254968,"ip_address":"","ucode":"CCD2B2C492BE9A","user_header":"https://static001.geekbang.org/account/avatar/00/13/26/38/ef063dc2.jpg","comment_is_top":true,"comment_ctime":1583984097,"is_pvip":true,"replies":[{"id":"72131","content":"ç›´æ¥ç”¨putå³å¯ï¼Œå¯ä»¥å‚è€ƒè¿™é‡Œçš„å›å¤ï¼š<br>https:&#47;&#47;stackoverflow.com&#47;questions&#47;19528304&#47;how-to-get-the-threadpoolexecutor-to-increase-threads-to-max-before-queueing<br>ä¸è¿‡è¦è€ƒè™‘é€‰æ‹©ä¸¢æ•°æ®è¿˜æ˜¯é˜»å¡<br><br>å…¶å®ï¼Œå®ç°è‡ªå·±çš„RejectedExecutionHandlerè€¦åˆè‡ªå·±çš„Queueä¹Ÿæ— å¯åšéã€‚Tomcatä¹Ÿæ˜¯è¿™æ ·çš„ï¼Œå…¶å®ç°å‚è€ƒè¿™é‡Œï¼šhttps:&#47;&#47;github.com&#47;apache&#47;tomcat&#47;blob&#47;a801409b37294c3f3dd5590453fb9580d7e33af2&#47;java&#47;org&#47;apache&#47;tomcat&#47;util&#47;threads&#47;ThreadPoolExecutor.java","user_name":"ä½œè€…å›å¤","comment_id":186988,"uid":"1001470","ip_address":"","utype":1,"ctime":1583988941,"user_name_real":"æœ±æ™”"}],"discussion_count":6,"race_medal":0,"score":"9.2233721458128998e+18","product_id":100047701,"comment_content":"ç¬¬ä¸€ä¸ªé—®é¢˜çš„æ¥äº†ï¼Œè¯·è€å¸ˆæŒ‡ç‚¹ï¼š<br>https:&#47;&#47;github.com&#47;y645194203&#47;geektime-java-100&#47;blob&#47;master&#47;ExtremeThreadPoolExecutor.java<br><br>é‡Œé¢è‡ªå®šä¹‰äº†ä¸€ä¸ªextremeOfferæ–¹æ³•ï¼Œå› ä¸ºä¸æ˜¯BlockQUeueæ¥å£çš„æ–¹æ³•ï¼Œæ‰€ä»¥åœ¨æ‰§è¡Œæ‹’ç»ç­–ç•¥åï¼ŒçœŸæ­£åŠ å…¥é˜»å¡é˜Ÿåˆ—çš„æ—¶å€™å¼ºè½¬äº†ä¸€äº›ï¼Œæ„Ÿè§‰ä¸æ˜¯å¾ˆå¥½ï¼Œæœ‰æ²¡æœ‰æ›´å¥½çš„å¤„ç†æ–¹æ³•ï¼Œè¯·è€å¸ˆæŒ‡ç‚¹ä¸‹ã€‚<br><br><br>åŠ ä¸Šä¹‹å‰å›ç­”çš„ç¬¬äºŒä¸ªé—®é¢˜ç­”æ¡ˆï¼š<br>ä¸ä¼šè¢«å›æ”¶ï¼Œä¼šOOMï¼Œå³ä½¿æ˜¯è‡ªå®šä¹‰çº¿ç¨‹æ± ï¼Œæ ¸å¿ƒçº¿ç¨‹æ˜¯ä¸ä¼šå›æ”¶çš„ï¼Œæ¯æ¬¡éœ€è¦10ä¸ªçº¿ç¨‹ï¼Œåˆšå¥½æ˜¯æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œå› æ­¤æ¯æ¬¡è¯·æ±‚éƒ½ä¼šåˆ›å»º10ä¸ªæ ¸å¿ƒçº¿ç¨‹æ•°çš„çº¿ç¨‹æ± ï¼Œè¯·æ±‚æ¬¡æ•°å¤šäº†åï¼Œå¾ˆå¿«å°±å›OOMã€‚<br>Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: unable to create new native thread","like_count":26,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486945,"discussion_content":"ç›´æ¥ç”¨putå³å¯ï¼Œå¯ä»¥å‚è€ƒè¿™é‡Œçš„å›å¤ï¼š\nhttps://stackoverflow.com/questions/19528304/how-to-get-the-threadpoolexecutor-to-increase-threads-to-max-before-queueing\nä¸è¿‡è¦è€ƒè™‘é€‰æ‹©ä¸¢æ•°æ®è¿˜æ˜¯é˜»å¡\n\nå…¶å®ï¼Œå®ç°è‡ªå·±çš„RejectedExecutionHandlerè€¦åˆè‡ªå·±çš„Queueä¹Ÿæ— å¯åšéã€‚Tomcatä¹Ÿæ˜¯è¿™æ ·çš„ï¼Œå…¶å®ç°å‚è€ƒè¿™é‡Œï¼šhttps://github.com/apache/tomcat/blob/a801409b37294c3f3dd5590453fb9580d7e33af2/java/org/apache/tomcat/util/threads/ThreadPoolExecutor.java","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583988941,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1254968,"avatar":"https://static001.geekbang.org/account/avatar/00/13/26/38/ef063dc2.jpg","nickname":"Darren","note":"","ucode":"CCD2B2C492BE9A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":203070,"discussion_content":"å…¶å®è€å¸ˆç»™çš„stackoverflowæˆ‘ä¸æ˜¯å¾ˆèµæˆï¼Œä½†æ˜¯æ€ä¹ˆå›å¤è€å¸ˆæ‰èƒ½çœ‹è§ï¼Œç›®å‰è¿˜ä¸çŸ¥é“ã€‚ã€‚ã€‚ã€‚\nä¸èµæˆçš„åŸå› æ˜¯putæ˜¯ä¸€ä¸ªé˜»å¡æ–¹æ³•ï¼Œå½“é˜Ÿåˆ—æ»¡äº†åï¼Œputæ–¹æ³•ä¼šä¸€ç›´è¢«é˜»å¡ç€ï¼Œå°±ä¸ä¼šçœŸæ­£çš„è§¦å‘æ‹’ç»ç­–ç•¥äº†ï¼Œä¸”æŒ‰ç…§æˆ‘çš„ç†è§£puté˜»å¡çš„åº”è¯¥å°±æ˜¯ä¸»çº¿ç¨‹ï¼Œè¿™ä¹ˆåšè‚¯å®šæ˜¯ä¸å¤ªå¥½çš„ã€‚\n","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1583991691,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1254968,"avatar":"https://static001.geekbang.org/account/avatar/00/13/26/38/ef063dc2.jpg","nickname":"Darren","note":"","ucode":"CCD2B2C492BE9A","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":203167,"discussion_content":"ä½ è¯´çš„ä¸€ç‚¹æ²¡é”™ï¼Œæ‰€ä»¥è¿™æ˜¯å®ç°ä¸Šçš„é€‰æ‹©ï¼Œtomcatè¿˜æ˜¯ä½¿ç”¨äº†offerã€‚å¦‚æœofferé‚£ä¸ªé‡è½½è¢«å ç”¨äº†ï¼Œæˆ–è®¸å¯ä»¥ç”¨executor.getQueue().offer(r, 0, TimeUnit.SECONDS) è¿™ä¸ªï¼Ÿ","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1584006507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":203070,"ip_address":""},"score":203167,"extra":""},{"author":{"id":1254968,"avatar":"https://static001.geekbang.org/account/avatar/00/13/26/38/ef063dc2.jpg","nickname":"Darren","note":"","ucode":"CCD2B2C492BE9A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":203210,"discussion_content":"æ˜ç™½äº†ï¼Œè°¢è°¢è€å¸ˆï¼Œæ˜ç™½äº†ï¼Œå…¶å®æ²¡æœ‰å¥½ä¸å¥½çš„é—®é¢˜ï¼Œåªæœ‰åˆä¸åˆé€‚çš„é—®é¢˜ï¼Œä¸ç®¡æ˜¯å¼ºè½¬ï¼Œè¿˜æ˜¯é‡è½½offeræˆ–è€…putï¼Œéƒ½æ˜¯è¦æ ¹æ®å…·ä½“çš„ä¸šåŠ¡æ¥å†³å®š","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1584010412,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":203167,"ip_address":""},"score":203210,"extra":""}]},{"author":{"id":1200704,"avatar":"https://static001.geekbang.org/account/avatar/00/12/52/40/e57a736e.jpg","nickname":"pedro","note":"","ucode":"F40C839DDFD599","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":203061,"discussion_content":"å…„å¼Ÿï¼Œçœ‹äº†ä¸€ä¸‹ä½ çš„ä»£ç ï¼ŒæŒ‰ç…§è€å¸ˆçš„ä¸¤ä¸ªç‚¹æ”¹çš„ï¼Œä¸€çœ‹å°±æ‡‚ğŸ˜„","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1583989068,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walleæ–Œ","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381324,"discussion_content":"ç¬¬ä¸€ä¸ªé—®é¢˜ æ€è€ƒä¸‹tomcatè®¾è®¡çº¿ç¨‹æ±  è‚¯å®šä¸æ˜¯jdkè¿™ä¸ªç©æ³•ï¼ŒwebæœåŠ¡å˜›ï¼Œåå¼¹æ€§çš„ã€‚æ‰€ä»¥ç›´æ¥æŸ¥çœ‹tomcatæºç å³å¯ï¼ŒæŒ‰ç…§tomcatçš„ç»Ÿä¸€è®¾è®¡ ç›´æ¥æ‰“StandardThreadExecutorå°±å‡ºæ¥äº†ã€‚  å…¶å®å°±æ˜¯executeæ–¹æ³•ä¸å˜ï¼Œç„¶åé‡è½½äº†é˜»å¡é˜Ÿåˆ—çš„offeræ–¹æ³•å³å¯ï¼Œå¾ˆæ˜¯å·§å¦™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625015407,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187603,"user_name":"èš‚èšå†…æ¨+v","can_delete":false,"product_type":"c1","uid":1050508,"ip_address":"","ucode":"24B10AEE54B3FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/07/8c/0d886dcc.jpg","comment_is_top":true,"comment_ctime":1584170683,"is_pvip":false,"replies":[{"id":"72416","content":"ThreadPoolExecutorå›æ”¶ä¸äº†ï¼Œå¯ä»¥çœ‹çœ‹å…¶æºç ï¼Œå·¥ä½œçº¿ç¨‹Workeræ˜¯å†…éƒ¨ç±»ï¼Œåªè¦å®ƒæ´»ç€ï¼Œæ¢å¥è¯è¯´çº¿ç¨‹åœ¨è·‘ï¼Œå°±ä¼šé˜»æ­¢ThreadPoolExecutorå›æ”¶ï¼Œæ‰€ä»¥å…¶å®ThreadPoolExecutoræ˜¯æ— æ³•å›æ”¶çš„ï¼Œå¹¶ä¸èƒ½è®¤ä¸ºThreadPoolExecutoræ²¡æœ‰å¼•ç”¨å°±èƒ½å›æ”¶","user_name":"ä½œè€…å›å¤","comment_id":187603,"uid":"1001470","ip_address":"","utype":1,"ctime":1584186595,"user_name_real":"æœ±æ™”"}],"discussion_count":6,"race_medal":0,"score":"9.2233721372232008e+18","product_id":100047701,"comment_content":"ç¬¬äºŒä¸ªé—®é¢˜å¤§å®¶éƒ½è¯´æ ¸å¿ƒçº¿ç¨‹æ•°ä¸ä¼šè¢«å›æ”¶ï¼Œä½†æ˜¯æ–¹æ³•æ‰§è¡Œå®Œçº¿ç¨‹æ± çš„å¼•ç”¨å·²ç»å¼•ç”¨ä¸åˆ°äº†å§ï¼Œçº¿ç¨‹æ± å¯¹è±¡ä¼šè¢«åƒåœ¾å›æ”¶å§ï¼Œåƒåœ¾å›æ”¶æ—¶æ ¸å¿ƒçº¿ç¨‹æ€ä¹ˆåŠå‘¢","like_count":24,"discussions":[{"author":{"id":1203293,"avatar":"https://static001.geekbang.org/account/avatar/00/12/5c/5d/974b033f.jpg","nickname":"é™†è€å¸ˆ","note":"","ucode":"0EA27C4755FF4A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":245906,"discussion_content":"å†…éƒ¨çš„Workeræ‰§è¡Œå®ŒfirstTaskï¼Œä¼šå¾ªç¯ä»é˜Ÿåˆ—é‡Œå–ä»»åŠ¡ã€‚è¯¦è§ThreadPoolExecutor#runWorker","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1587710285,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487163,"discussion_content":"ThreadPoolExecutorå›æ”¶ä¸äº†ï¼Œå¯ä»¥çœ‹çœ‹å…¶æºç ï¼Œå·¥ä½œçº¿ç¨‹Workeræ˜¯å†…éƒ¨ç±»ï¼Œåªè¦å®ƒæ´»ç€ï¼Œæ¢å¥è¯è¯´çº¿ç¨‹åœ¨è·‘ï¼Œå°±ä¼šé˜»æ­¢ThreadPoolExecutorå›æ”¶ï¼Œæ‰€ä»¥å…¶å®ThreadPoolExecutoræ˜¯æ— æ³•å›æ”¶çš„ï¼Œå¹¶ä¸èƒ½è®¤ä¸ºThreadPoolExecutoræ²¡æœ‰å¼•ç”¨å°±èƒ½å›æ”¶","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584186595,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1441783,"avatar":"https://static001.geekbang.org/account/avatar/00/15/ff/f7/fbab42ce.jpg","nickname":"co","note":"","ucode":"99E1237D7F1907","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584442,"discussion_content":"çº¿ç¨‹æ˜¯gc rootï¼Œç„¶åçº¿ç¨‹åˆæ˜¯å¼•ç”¨äº†å¤–éƒ¨çš„çº¿ç¨‹æ± ï¼Œåªè¦çº¿ç¨‹ä¸è¢«å›æ”¶ï¼ˆæ ¸å¿ƒçº¿ç¨‹åœ¨çº¿ç¨‹æ± å®ä¾‹çš„ä¸€ä¸ªå±æ€§allowCoreThreadTimeOuté»˜è®¤ä¸ºfalseçš„æƒ…å†µä¸‹ä¸ä¼šè¢«å›æ”¶ï¼‰ï¼Œé‚£ä¹ˆçº¿ç¨‹æ± ä¹Ÿä¸ä¼šè¢«å›æ”¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660820524,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1509790,"avatar":"https://static001.geekbang.org/account/avatar/00/17/09/9e/24b58986.jpg","nickname":"é»‘ç³","note":"","ucode":"0A48B19BAE5337","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332243,"discussion_content":"é‚£å¦‚æœçº¿ç¨‹æ± æ˜¯ä¸ªå±€éƒ¨å˜é‡ï¼Œå¹¶ä¸”åœ¨æ ¸å¿ƒçº¿ç¨‹å·²ç»returnçš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªçº¿ç¨‹æ± å¯¹è±¡æ˜¯ä¸æ˜¯ä¹Ÿä¼šåƒæ™®é€šå¯¹è±¡ä¸€æ ·è¢«å›æ”¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607128805,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2015438,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/c0/ce/eb1b4ae1.jpg","nickname":"å¯åœˆå¯ä¸¶","note":"","ucode":"EB527E176EDE91","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1509790,"avatar":"https://static001.geekbang.org/account/avatar/00/17/09/9e/24b58986.jpg","nickname":"é»‘ç³","note":"","ucode":"0A48B19BAE5337","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582577,"discussion_content":"å¹¶ä¸ä¼šï¼Œå¦‚æœallowCoreThreadTimeOutæ²¡æœ‰è®¾ç½®ä¸ºtrueï¼Œå°±ç®—çº¿ç¨‹æ± æ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œæ–¹æ³•ä¹Ÿå·²ç»è°ƒç”¨ç»“æŸäº†çº¿ç¨‹æ± ä¹Ÿä¸ä¼šè¢«å›æ”¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659514157,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":332243,"ip_address":"å¹¿ä¸œ"},"score":582577,"extra":""}]},{"author":{"id":1549364,"avatar":"","nickname":"Geek_3b1096","note":"","ucode":"A6BD92B79B3632","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216355,"discussion_content":"ä¹Ÿæœ‰åŒæ ·ç–‘æƒ‘è°¢è°¢åŒå­¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585441478,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":189224,"user_name":"è§‚å¼ˆé“äºº","can_delete":false,"product_type":"c1","uid":1016905,"ip_address":"","ucode":"F3BB619A33C605","user_header":"https://static001.geekbang.org/account/avatar/00/0f/84/49/47d48fd0.jpg","comment_is_top":false,"comment_ctime":1584490740,"is_pvip":false,"replies":[{"id":"72993","content":"Excel...","user_name":"ä½œè€…å›å¤","comment_id":189224,"uid":"1001470","ip_address":"","utype":1,"ctime":1584495452,"user_name_real":"æœ±æ™”"}],"discussion_count":1,"race_medal":0,"score":"216332855540","product_id":100047701,"comment_content":"&quot;æˆ‘ä»¬æŠŠ printStats æ–¹æ³•æ‰“å°å‡ºçš„æ—¥å¿—ç»˜åˆ¶æˆå›¾è¡¨&quot;ï¼Œæƒ³é—®ä¸‹è€å¸ˆï¼Œè¿™ä¸ªå›¾è¡¨å’‹ç»˜åˆ¶çš„ï¼Œæƒ³å­¦ä¹ ä¸‹","like_count":51,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487638,"discussion_content":"Excel...","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584495452,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187531,"user_name":"æ±æ—å¤–å²","can_delete":false,"product_type":"c1","uid":1188906,"ip_address":"","ucode":"3C66C0F0537A99","user_header":"https://static001.geekbang.org/account/avatar/00/12/24/2a/33441e2b.jpg","comment_is_top":false,"comment_ctime":1584153451,"is_pvip":false,"replies":[{"id":"72359","content":"1. ä½ è¯´çš„è¿™ç§ç­–ç•¥ï¼Œæ­¤æ–‡ä¹Ÿæœ‰æåˆ°ï¼š https:&#47;&#47;stackoverflow.com&#47;questions&#47;19528304&#47;how-to-get-the-threadpoolexecutor-to-increase-threads-to-max-before-queueing <br>å…¶å®ï¼Œæˆ‘ä»¬å¸Œæœ›çš„æ˜¯å°½é‡ç¡®ä¿æœ‰è¶³å¤Ÿå¤šçš„çº¿ç¨‹èƒ½å¤„ç†ä»»åŠ¡ï¼Œä½†æ˜¯åˆä¸é—²ç½®è¿‡å¤šçº¿ç¨‹ï¼Œæˆ–ä¸´æ—¶åˆ›å»ºè¿‡å¤šçº¿ç¨‹ï¼Œæ¢å¥è¯è¯´è®©çº¿ç¨‹çš„åˆ›å»ºå’Œå›æ”¶ä¸è¦å¤ªé¢‘ç¹ã€‚é€‰æ‹©å“ªä¸ªç­–ç•¥è¦æ ¹æ®ä»»åŠ¡çš„æ€§è´¨å’Œå‹åŠ›çš„æµé‡å½¢æ€æ¥å†³å®šã€‚<br><br>2. è¿™é‡Œæˆ‘è¯´çš„å¤ç”¨çº¿ç¨‹æ± æ˜¯æŒ‡ä¸æ¯æ¬¡éƒ½åˆ›å»ºçº¿ç¨‹æ± ï¼Œçº¿ç¨‹æ± å¿…é¡»å¤ç”¨è€Œä¸æ˜¯æŒ‰éœ€åˆ›å»ºï¼Œä½†æ˜¯ä¸æ¨èä¸€å‘³æ··ç”¨ä¸€ä¸ªçº¿ç¨‹æ± ã€‚å¯¹äºé€‰æ‹©æ˜¯å¦æ··ç”¨çº¿ç¨‹æ± ï¼Œè‡³å°‘å¯¹äºé¢‘+å¿«çš„ä»»åŠ¡å’Œå°‘+æ…¢çš„ä»»åŠ¡åº”è¯¥åˆ†å¼€ï¼Œè¿˜æ˜¯è¦æ ¹æ®å®é™…ä»»åŠ¡çš„æ€§è´¨æ¥é€‰æ‹©ã€‚","user_name":"ä½œè€…å›å¤","comment_id":187531,"uid":"1001470","ip_address":"","utype":1,"ctime":1584154572,"user_name_real":"æœ±æ™”"}],"discussion_count":1,"race_medal":0,"score":"70303630187","product_id":100047701,"comment_content":"1. æ—¢ç„¶é€‰æ‹©å…ˆæ‰©å®¹çº¿ç¨‹æ± å†åŠ å…¥é˜Ÿåˆ—ï¼Œé‚£ä¸ºä»€ä¹ˆä¸å¹²è„†æŠŠæ ¸å¿ƒçº¿ç¨‹æ•°è®¾ç½®å¤§ä¸€äº›ï¼Œç„¶åæ ¸å¿ƒçº¿ç¨‹æ•°å¯å›æ”¶è¿™ç§ç­–ç•¥å‘¢ï¼Ÿ<br>2. å¤ç”¨çº¿ç¨‹æ± ï¼Œä»»åŠ¡å¾ˆæ…¢ï¼Œä¸»çº¿ç¨‹getç»“æœçš„æ—¶å€™ä¸ä¼šå¯¼è‡´ä¸»çº¿ç¨‹å¡æ­»çš„çŠ¶æ€å—ï¼Ÿä¸æ˜¯ä¹Ÿæå€¡ä¸åŒçš„ä»»åŠ¡ç”¨ä¸åŒçš„çº¿ç¨‹æ± ï¼Œé‚£å¤ç”¨ä¸ä¸å¤ç”¨çš„è¾¹ç•Œåœ¨å“ªé‡Œå‘¢ï¼Ÿæ˜¯è¦æ ¹æ®ä¹Ÿæ— éœ€æ±‚è‡ªå·±è¯„ä¼°å—ï¼Ÿ","like_count":16,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487134,"discussion_content":"1. ä½ è¯´çš„è¿™ç§ç­–ç•¥ï¼Œæ­¤æ–‡ä¹Ÿæœ‰æåˆ°ï¼š https://stackoverflow.com/questions/19528304/how-to-get-the-threadpoolexecutor-to-increase-threads-to-max-before-queueing \nå…¶å®ï¼Œæˆ‘ä»¬å¸Œæœ›çš„æ˜¯å°½é‡ç¡®ä¿æœ‰è¶³å¤Ÿå¤šçš„çº¿ç¨‹èƒ½å¤„ç†ä»»åŠ¡ï¼Œä½†æ˜¯åˆä¸é—²ç½®è¿‡å¤šçº¿ç¨‹ï¼Œæˆ–ä¸´æ—¶åˆ›å»ºè¿‡å¤šçº¿ç¨‹ï¼Œæ¢å¥è¯è¯´è®©çº¿ç¨‹çš„åˆ›å»ºå’Œå›æ”¶ä¸è¦å¤ªé¢‘ç¹ã€‚é€‰æ‹©å“ªä¸ªç­–ç•¥è¦æ ¹æ®ä»»åŠ¡çš„æ€§è´¨å’Œå‹åŠ›çš„æµé‡å½¢æ€æ¥å†³å®šã€‚\n\n2. è¿™é‡Œæˆ‘è¯´çš„å¤ç”¨çº¿ç¨‹æ± æ˜¯æŒ‡ä¸æ¯æ¬¡éƒ½åˆ›å»ºçº¿ç¨‹æ± ï¼Œçº¿ç¨‹æ± å¿…é¡»å¤ç”¨è€Œä¸æ˜¯æŒ‰éœ€åˆ›å»ºï¼Œä½†æ˜¯ä¸æ¨èä¸€å‘³æ··ç”¨ä¸€ä¸ªçº¿ç¨‹æ± ã€‚å¯¹äºé€‰æ‹©æ˜¯å¦æ··ç”¨çº¿ç¨‹æ± ï¼Œè‡³å°‘å¯¹äºé¢‘+å¿«çš„ä»»åŠ¡å’Œå°‘+æ…¢çš„ä»»åŠ¡åº”è¯¥åˆ†å¼€ï¼Œè¿˜æ˜¯è¦æ ¹æ®å®é™…ä»»åŠ¡çš„æ€§è´¨æ¥é€‰æ‹©ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584154572,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":186968,"user_name":"é™ˆå¤©æŸ±","can_delete":false,"product_type":"c1","uid":1696225,"ip_address":"","ucode":"917BFDC845760D","user_header":"https://static001.geekbang.org/account/avatar/00/19/e1/e1/441df85d.jpg","comment_is_top":false,"comment_ctime":1583980311,"is_pvip":false,"replies":[{"id":"72124","content":"ğŸ‘ğŸ»","user_name":"ä½œè€…å›å¤","comment_id":186968,"uid":"1001470","ip_address":"","utype":1,"ctime":1583983604,"user_name_real":"æœ±æ™”"}],"discussion_count":4,"race_medal":0,"score":"40238685975","product_id":100047701,"comment_content":"é¦–å…ˆèµä¸€ä¸‹è€å¸ˆçš„æ’æŸ¥é—®é¢˜çš„æ€è·¯ï¼ï¼ï¼ç„¶åé’ˆå¯¹ç¬¬äºŒä¸ªé—®é¢˜ï¼Œæˆ‘è§‰å¾—ä¸ä¼šè¢«å›æ”¶ä¸”å¾ˆå¿«å°±ä¼šOOMäº†ï¼Œå› ä¸ºæ¯æ¬¡è¯·æ±‚éƒ½æ–°å»ºçº¿ç¨‹æ± ï¼Œæ¯ä¸ªçº¿ç¨‹æ± çš„æ ¸å¿ƒæ•°éƒ½æ˜¯10, è™½ç„¶è‡ªå®šä¹‰çº¿ç¨‹æ± è®¾ç½®2ç§’å›æ”¶ï¼Œä½†æ˜¯æ²¡è¶…è¿‡çº¿ç¨‹æ± æ ¸å¿ƒæ•°10æ˜¯ä¸ä¼šè¢«å›æ”¶çš„, ä¸é—´æ–­çš„è¯·æ±‚è¿‡æ¥å¯¼è‡´åˆ›å»ºå¤§é‡çº¿ç¨‹ï¼Œæœ€ç»ˆOOM","like_count":9,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486940,"discussion_content":"ğŸ‘ğŸ»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583983604,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1274787,"avatar":"https://static001.geekbang.org/account/avatar/00/13/73/a3/2b077607.jpg","nickname":"Michael","note":"","ucode":"C233DF1D224EC1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295760,"discussion_content":"æˆ‘ä»¬åŒäº‹å°±æå‡ºæ¥ä¸ªäº‹æƒ…ï¼Œçº¿ç¨‹æ± æ˜¯åœ¨æ¥å£è¢«è°ƒç”¨çš„æ–¹æ³•ä¸­newçš„ï¼Œäº¤æ˜“é‡ä¸Šæ¥ï¼ŒæŠŠè¿™ä¸ªç³»ç»Ÿéƒ½ææŒ‚äº†ï¼Œè€Œä¸”è¿™ä¸ªäº¤æ˜“æ˜¯èµ„äº§è´Ÿå€ºç›¸å…³çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596335489,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1274787,"avatar":"https://static001.geekbang.org/account/avatar/00/13/73/a3/2b077607.jpg","nickname":"Michael","note":"","ucode":"C233DF1D224EC1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295759,"discussion_content":"æˆ‘ä»¬åŒäº‹å°±æå‡ºæ¥ä¸ªäº‹æƒ…ï¼Œçº¿ç¨‹æ± æ˜¯åœ¨æ¥å£è¢«è°ƒç”¨çš„æ–¹æ³•ä¸­newçš„ï¼Œäº¤æ˜“é‡ä¸Šæ¥ï¼ŒæŠŠè¿™ä¸ªç³»ç»Ÿéƒ½ææŒ‚äº†ï¼Œè€Œä¸”è¿™ä¸ªäº¤æ˜“æ˜¯èµ„äº§è´Ÿå€ºç›¸å…³çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596335488,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1104576,"avatar":"https://static001.geekbang.org/account/avatar/00/10/da/c0/9fc31f2d.jpg","nickname":"åˆå¿ƒ","note":"","ucode":"C090A1723E3474","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":208001,"discussion_content":"æ± ä¸­æ ¸å¿ƒçº¿ç¨‹å¤§äºè¯·æ±‚ä»»åŠ¡æ—¶ï¼Œä¼šè¢«å›æ”¶å§ï¼Œæ˜¯è¿™æ ·å—ï¼Ÿè€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584531262,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":189676,"user_name":"æ¢¦å€šæ æ†","can_delete":false,"product_type":"c1","uid":1095857,"ip_address":"","ucode":"BDEB97F2822445","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/bvj76PmeUvW8kokyu91IZWuRATKmabibDWbzAj2TajeEic7WvKCJOLaOh6jibEmdQ36EO3sBUZ0HibAiapsrZo64U8w/132","comment_is_top":false,"comment_ctime":1584540192,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"35944278560","product_id":100047701,"comment_content":"åˆ†äº«ä¸€ä¸‹ï¼š<br>è€å¸ˆçš„demoæƒ³è¦ä¸å®‰è£…èµ„æºç±»ç›´æ¥è¿è¡Œï¼Œå¯ä»¥ä¿®æ”¹ä¸¤ä¸ªåœ°æ–¹ã€‚<br>1.pomæ–‡ä»¶ï¼šåˆ é™¤spring-boot-starter-actuator ä¾èµ–ï¼›redisson-spring-boot-starter é‡Œexclude redisson-spring-boot-starter ä¾èµ–ã€‚<br>2.å¯¹åº”çš„@SpringBootApplication æ³¨è§£ä¸Šæ·»åŠ exclude = { DataSourceAutoConfiguration.class, RedissonAutoConfiguration.class }<br><br>","like_count":8,"discussions":[{"author":{"id":1238436,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e5/a4/e16dca6a.jpg","nickname":"é˜¿å‡¯æ–‡","note":"","ucode":"F17CF201E74849","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287794,"discussion_content":"pomæ–‡ä»¶ä¸ç”¨åˆ é™¤ä¾èµ–ï¼Œåˆ äº†æœ‰äº›ç±»ä¼šç¼–è¯‘æŠ¥é”™ï¼Œå¯åŠ¨ç±»æ’é™¤ä»–ä»¬ä¸è£…é…mysqlå’Œredisçš„beanå°±å¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593541781,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1640343,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIibDIDT8fER3rKSjuPvVoUwFbrxftdVRr2g6NwD6eHnibof93eUngsTaf7EE8dYT4AaNBWXGcicEvZA/132","nickname":"å°é±¼","note":"","ucode":"C5AF04616748D0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":248829,"discussion_content":"è¯·æ•™ä¸‹ï¼Œä¸ºå•¥è¦excludeé‡Œé¢çš„ç±»ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587899790,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1095857,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/bvj76PmeUvW8kokyu91IZWuRATKmabibDWbzAj2TajeEic7WvKCJOLaOh6jibEmdQ36EO3sBUZ0HibAiapsrZo64U8w/132","nickname":"æ¢¦å€šæ æ†","note":"","ucode":"BDEB97F2822445","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1640343,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIibDIDT8fER3rKSjuPvVoUwFbrxftdVRr2g6NwD6eHnibof93eUngsTaf7EE8dYT4AaNBWXGcicEvZA/132","nickname":"å°é±¼","note":"","ucode":"C5AF04616748D0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":248941,"discussion_content":"è¿™äº›ç±»ä¼šåœ¨å¯åŠ¨çš„æ—¶å€™æ³¨å†Œç›¸å…³çš„connectionï¼Œä¹Ÿå°±æ˜¯ä¼šè¿æ¥æ•°æ®åº“ï¼Œredis","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587903492,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":248829,"ip_address":""},"score":248941,"extra":""}]}]},{"had_liked":false,"id":186885,"user_name":"Gå°è°ƒ","can_delete":false,"product_type":"c1","uid":1145529,"ip_address":"","ucode":"8F3D50E2C1A559","user_header":"https://static001.geekbang.org/account/avatar/00/11/7a/b9/c3d3a92f.jpg","comment_is_top":false,"comment_ctime":1583944511,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"35943682879","product_id":100047701,"comment_content":"æ–‡ç« éå¸¸æ£’ é€šè¿‡çœŸå®æ¡ˆä¾‹è®²è§£ é€è¿‡ç°è±¡çœ‹æœ¬è´¨","like_count":8},{"had_liked":false,"id":207711,"user_name":"CDz","can_delete":false,"product_type":"c1","uid":1114779,"ip_address":"","ucode":"A23BEE1C4A5922","user_header":"https://static001.geekbang.org/account/avatar/00/11/02/9b/b1a3c60d.jpg","comment_is_top":false,"comment_ctime":1587145780,"is_pvip":false,"replies":[{"id":"77567","content":"æ€»ç»“ä¸é”™","user_name":"ä½œè€…å›å¤","comment_id":207711,"uid":"1001470","ip_address":"","utype":1,"ctime":1587167444,"user_name_real":"æœ±æ™”"}],"discussion_count":1,"race_medal":0,"score":"31651916852","product_id":100047701,"comment_content":"1. çº¿ç¨‹æ± è¿‡å¤šé€ æˆOOM å› ä¸ºæ´»è·ƒçº¿ç¨‹è¿‡å¤šå’Œçº¿ç¨‹æ± ä¸ä¼šè¢«å›æ”¶<br>2. Java Stream Apiå¼‚æ­¥åˆ†æµ å…¬ç”¨ä¸€ä¸ªé»˜è®¤forkjionçº¿ç¨‹æ± ï¼Œä½¿ç”¨æ—¶è¦æ³¨æ„<br>3. çº¿ç¨‹æ± åˆ›å»ºæ—¶è¦åˆ†ææ‰§è¡Œä»»åŠ¡æ˜¯IOèµ„æºå‹è¿˜æ˜¯CPUèµ„æºå‹<br>4. IOèµ„æºå‹æˆ–è€…è¯´æ‰§è¡Œè¾ƒé•¿æ—¶é—´ä»»åŠ¡ï¼Œå¹¶ä¸”æ‹’ç»ç­–ç•¥ä¸ºCallæ—¶ï¼Œä¼šåœ¨çº¿ç¨‹æ± æ»¡çŠ¶æ€åäº¤ç»™**è°ƒç”¨è€…**çº¿ç¨‹æ‰§è¡Œï¼Œå¦‚æœæ˜¯WebæœåŠ¡è·‘åœ¨tomcatâ¬†ï¸çš„è¯ï¼Œå°±å¯¼è‡´æ•´ä½“ååé‡ä¸‹é™","like_count":8,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492220,"discussion_content":"æ€»ç»“ä¸é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587167444,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200887,"user_name":"miniluo","can_delete":false,"product_type":"c1","uid":1397339,"ip_address":"","ucode":"5735B6DEE7902B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/FheCgo4Ovibo0L1vAGgMdZkzQMm1GUMHMMqQ8aglufXaD2hW9z96DjQicAam723jOCZwXVmiaNiaaq4PLsf4COibZ5A/132","comment_is_top":false,"comment_ctime":1585667915,"is_pvip":false,"replies":[{"id":"75190","content":"æä¾›æ–¹ä¾¿çš„apiè¿™ä¸ªäº‹æƒ…æœ¬èº«æ²¡é”™  ä½¿ç”¨è€…è‡ªå·±éœ€è¦ä½¿ç”¨apiä¹‹å‰è¯¦ç»†é˜…è¯»è¯´æ˜","user_name":"ä½œè€…å›å¤","comment_id":200887,"uid":"1001470","ip_address":"","utype":1,"ctime":1585702722,"user_name_real":"æœ±æ™”"}],"discussion_count":2,"race_medal":0,"score":"23060504395","product_id":100047701,"comment_content":"é‚£JDKæä¾›çš„å››ç§å¿«æ·åˆ›å»ºçº¿ç¨‹æ± çš„æ–¹å¼æ—¶å€™æ²¡æœ‰æƒ³åˆ°è¿™äº›å‘å—ï¼Ÿå¦‚æœæƒ³åˆ°äº†ä¸ºä½•è¿˜æä¾›è¿™äº›æ–¹ä¾¿çš„æ–¹å¼å‘¢ï¼Ÿè¿˜è¦éº»çƒ¦è€å¸ˆè§£ç­”ï¼Œè°¢è°¢~","like_count":5,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490165,"discussion_content":"æä¾›æ–¹ä¾¿çš„apiè¿™ä¸ªäº‹æƒ…æœ¬èº«æ²¡é”™  ä½¿ç”¨è€…è‡ªå·±éœ€è¦ä½¿ç”¨apiä¹‹å‰è¯¦ç»†é˜…è¯»è¯´æ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585702722,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1974876,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJUCiacuh59wMZAeeNRwLiaGaRMZHibF05IibXeiaZfjcFfkmTwJTmPszibXLAQkk2mMdx8chPjTs2yvpZg/132","nickname":"Sky1225","note":"","ucode":"6F428AF396D99D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385649,"discussion_content":"æˆ‘ç†è§£ä¸å»ºè®®ä½¿ç”¨è¿™äº›apiå°±æ˜¯è€ƒè™‘åˆ°å®è·µçš„æ—¶å€™å¤§å®¶å¯¹apiç†è§£ä¸é€å½»ï¼Œå‡ºç°äº†å¾ˆå¤šå‘ï¼Œæ‰€ä»¥æ‰ä¸æ¨èä½¿ç”¨ã€‚apiæœ¬èº«æ²¡é—®é¢˜ï¼Œè€Œä¸”è¿˜æä¾›äº†ä¸€äº›åœºæ™¯ä½¿ç”¨çº¿ç¨‹æ± çš„æ€è·¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627196216,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":188936,"user_name":"ç¨‹åºå‘˜å°è·ƒ","can_delete":false,"product_type":"c1","uid":1015483,"ip_address":"","ucode":"25BB96E0791A60","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7e/bb/947c329a.jpg","comment_is_top":false,"comment_ctime":1584435691,"is_pvip":true,"replies":[{"id":"72887","content":"çš„ç¡®æ˜¯äº«å—","user_name":"ä½œè€…å›å¤","comment_id":188936,"uid":"1001470","ip_address":"","utype":1,"ctime":1584438498,"user_name_real":"æœ±æ™”"}],"discussion_count":1,"race_medal":0,"score":"18764304875","product_id":100047701,"comment_content":"çœ‹å¤§å®¶çš„æ€è€ƒé¢˜ä¹Ÿæ˜¯ä¸€ç§äº«å—ã€‚<br><br>çº¿ç¨‹æ± è¿™ä¸ªï¼Œè®°å¾—åˆšå­¦ä¼šç¼–ç¨‹çš„æ—¶å€™ï¼Œé¢è¯•å°±é—®çº¿ç¨‹æ± çš„åˆ›å»ºï¼Œç„¶åå›æ¥çœ‹ä¹¦çŸ¥é“äº†å¦‚ä½•åˆ›å»ºå„ç§å„æ ·çš„çº¿ç¨‹æ± ï¼›ä½†æ˜¯é¡¹ç›®ä¸­è¿˜æ˜¯æ²¡é‡åˆ°æ›´å¤šçš„å‘ï¼Œçœ‹äº†è€å¸ˆçš„è§£æï¼Œè®©æˆ‘ä»¥åå¯¹çº¿ç¨‹æ± çš„ä½¿ç”¨æ›´åŠ è°¨æ…äº†ã€‚","like_count":5,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487570,"discussion_content":"çš„ç¡®æ˜¯äº«å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584438498,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187011,"user_name":"pedro","can_delete":false,"product_type":"c1","uid":1200704,"ip_address":"","ucode":"F40C839DDFD599","user_header":"https://static001.geekbang.org/account/avatar/00/12/52/40/e57a736e.jpg","comment_is_top":false,"comment_ctime":1583989386,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14468891274","product_id":100047701,"comment_content":"æ€»ç»“ä¸€ä¸‹ä»Šå¤©å­¦åˆ°çš„ï¼›1ã€çº¿ç¨‹æ± çš„OOMé—®é¢˜ï¼Œå¯èƒ½æ˜¯é˜Ÿåˆ—æ»¡é€ æˆçš„ï¼Œä¹Ÿå¯èƒ½æ˜¯çº¿ç¨‹å¤ªå¤šé€ æˆçš„ï¼Œè‡³äºåé¢çš„é‚£ä¸ª2000ä¸ªçº¿ç¨‹æ± å¤ªå¤šï¼Œå¤§æ¦‚æ˜¯è¿™è¾ˆå­éƒ½ä¸ä¼šé‡åˆ°è¿™ç§é”™è¯¯å§ğŸ˜‚ã€‚2ã€çº¿ç¨‹æ± çš„ç­–ç•¥é—®é¢˜ï¼Œä¼˜å…ˆæ ¹æ®åœºæ™¯æ¥é€‰æ‹©åˆé€‚çš„å‚æ•°æ¥æ–°å»ºçº¿ç¨‹æ± ï¼Œè‹¥è¿˜æ˜¯æ— æ³•æ»¡è¶³ï¼Œå¯è‡ªå®šä¹‰çº¿ç¨‹æ± ï¼Œæ€»ä¹‹ä¸€åˆ‡ä»¥å®é™…ä¸ºå‡†ã€‚","like_count":3},{"had_liked":false,"id":186935,"user_name":"JavaGuide","can_delete":false,"product_type":"c1","uid":1184210,"ip_address":"","ucode":"246D2EAEA0ACEC","user_header":"https://static001.geekbang.org/account/avatar/00/12/11/d2/fb38b86f.jpg","comment_is_top":false,"comment_ctime":1583975629,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14468877517","product_id":100047701,"comment_content":"å¾ˆæ£’ï¼","like_count":3},{"had_liked":false,"id":186884,"user_name":"Darren","can_delete":false,"product_type":"c1","uid":1254968,"ip_address":"","ucode":"CCD2B2C492BE9A","user_header":"https://static001.geekbang.org/account/avatar/00/13/26/38/ef063dc2.jpg","comment_is_top":false,"comment_ctime":1583944254,"is_pvip":true,"replies":[{"id":"72125","content":"ğŸ‘ğŸ»","user_name":"ä½œè€…å›å¤","comment_id":186884,"uid":"1001470","ip_address":"","utype":1,"ctime":1583983663,"user_name_real":"æœ±æ™”"}],"discussion_count":1,"race_medal":0,"score":"14468846142","product_id":100047701,"comment_content":"å…ˆå›ç­”ç¬¬äºŒä¸ªé—®é¢˜å§ï¼Œç¬¬ä¸€ä¸ªç­‰å¤©äº®äº†ï¼Œè¯•ä¸€è¯•<br>ä¸ä¼šè¢«å›æ”¶ï¼Œä¼šOOMï¼Œå³ä½¿æ˜¯è‡ªå®šä¹‰çº¿ç¨‹æ± ï¼Œæ ¸å¿ƒçº¿ç¨‹æ˜¯ä¸ä¼šå›æ”¶çš„ï¼Œæ¯æ¬¡éœ€è¦10ä¸ªçº¿ç¨‹ï¼Œåˆšå¥½æ˜¯æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œå› æ­¤æ¯æ¬¡è¯·æ±‚éƒ½ä¼šåˆ›å»º10ä¸ªæ ¸å¿ƒçº¿ç¨‹æ•°çš„çº¿ç¨‹æ± ï¼Œè¯·æ±‚æ¬¡æ•°å¤šäº†åï¼Œå¾ˆå¿«å°±å›OOMã€‚<br>Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: unable to create new native thread","like_count":3,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486903,"discussion_content":"ğŸ‘ğŸ»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583983663,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243466,"user_name":"maybe","can_delete":false,"product_type":"c1","uid":1475528,"ip_address":"","ucode":"93D160F617E750","user_header":"https://static001.geekbang.org/account/avatar/00/16/83/c8/5ce842f6.jpg","comment_is_top":false,"comment_ctime":1598146476,"is_pvip":false,"discussion_count":0,"race_medal":4,"score":"10188081068","product_id":100047701,"comment_content":"1ã€çº¿ç¨‹æ± ä¸€å®šè¦é€šè¿‡newæ–¹å¼åˆ›å»ºï¼Œæ ¹æ®å…·ä½“æƒ…å†µè®¾ç½®åˆé€‚çš„å‚æ•°<br>2ã€å…¬å…±çº¿ç¨‹æ± ç­¾ä¸€å®šè¦æ³¨æ„çº¿ç¨‹æ± çš„å‚æ•°è®¾ç½®ã€åˆ›å»ºç­–ç•¥ã€æ‹’ç»ç­–ç•¥ç­‰ã€‚ä¸åŒç±»å‹çš„ä»»åŠ¡ã€cpuå¯†é›†å‹ã€ioå¯†é›†å‹ä¸åŒï¼Œcpuå¯†é›†å‹éœ€è¦æ›´é•¿çš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œioå¯†é›†å‹éœ€è¦æ›´å¤šçš„çº¿ç¨‹<br>3ã€çº¿ç¨‹æ± ä¸å¤ç”¨å¯¼è‡´oomï¼Œæ¯æ¬¡åˆ›å»ºçº¿ç¨‹æ± ï¼Œå› ä¸ºæ ¸å¿ƒçº¿ç¨‹è¿˜åœ¨è¿è¡Œï¼Œå³ä½¿æ²¡æœ‰å¼•ç”¨æŒ‡å‘çº¿ç¨‹æ± ï¼Œä¹Ÿä¸ä¼šè¢«å›æ”¶","like_count":3},{"had_liked":false,"id":195057,"user_name":"Joker","can_delete":false,"product_type":"c1","uid":1156592,"ip_address":"","ucode":"126AF848001A1E","user_header":"https://static001.geekbang.org/account/avatar/00/11/a5/f0/8648c464.jpg","comment_is_top":false,"comment_ctime":1585131887,"is_pvip":false,"replies":[{"id":"74178","content":"ä¸ä¼šï¼Œæ²¡å¿…è¦å•ç‹¬æ±‡æ€»ä¸€ç¯‡ï¼Œæˆ‘çš„ç­”æ¡ˆä¹Ÿä¸ä¸€å®šæ˜¯æ ‡å‡†ç­”æ¡ˆï¼Œçœ‹çœ‹å¤§å®¶çš„è®¨è®ºä¸æ˜¯æŒºå¥½ï¼Ÿ","user_name":"ä½œè€…å›å¤","comment_id":195057,"uid":"1001470","ip_address":"","utype":1,"ctime":1585138254,"user_name_real":"æœ±æ™”"}],"discussion_count":1,"race_medal":0,"score":"10175066479","product_id":100047701,"comment_content":"è€å¸ˆä¼šè£…é—¨å†™ä¸€ç¯‡ è¯¾åå›ç­”çš„è§£ç­”æ¥å›ç­”è¿™äº›é—®é¢˜å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488960,"discussion_content":"ä¸ä¼šï¼Œæ²¡å¿…è¦å•ç‹¬æ±‡æ€»ä¸€ç¯‡ï¼Œæˆ‘çš„ç­”æ¡ˆä¹Ÿä¸ä¸€å®šæ˜¯æ ‡å‡†ç­”æ¡ˆï¼Œçœ‹çœ‹å¤§å®¶çš„è®¨è®ºä¸æ˜¯æŒºå¥½ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585138254,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":192968,"user_name":"Michael","can_delete":false,"product_type":"c1","uid":1274787,"ip_address":"","ucode":"C233DF1D224EC1","user_header":"https://static001.geekbang.org/account/avatar/00/13/73/a3/2b077607.jpg","comment_is_top":false,"comment_ctime":1584880698,"is_pvip":true,"replies":[{"id":"73650","content":"æ¶ˆæ¯åˆ—è¡¨èšåˆæ¥å£ï¼Ÿå¦‚æœå¹¶è¡Œè°ƒç”¨ï¼Œé‚£ä¹ˆæœ€çŸ­æ¿çš„ä»»åŠ¡å†³å®šäº†æ•´ä¸ªæ¥å£çš„æ€§èƒ½ï¼Œå°è¯•ä¼˜åŒ–ä¸€ä¸‹çŸ­æ¿ï¼Œä¸æ–­æ˜¯å¤–éƒ¨æ¥å£è¿˜æ˜¯æ•°æ®åº“ã€‚ä¹Ÿå¯ä»¥è€ƒè™‘ä¸€ä¸‹ä¸ºä»€ä¹ˆè¿™äº›æé†’ä¼šæ¶‰åŠåˆ°å¤šä¸ªåœ°æ–¹ç”šè‡³å…¶ä»–æ¥å£ï¼Œä¸ºä½•ä¸èƒ½æ‰€æœ‰é€šçŸ¥ç›´æ¥è¿›å…¥ä¸€ä¸ªè¡¨ï¼Œè€Œä¸”é€šçŸ¥æ˜¯æœ€å®¹æ˜“æŒ‰ç…§ç”¨æˆ·çº¬åº¦åˆ†è¡¨çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":192968,"uid":"1001470","ip_address":"","utype":1,"ctime":1584886570,"user_name_real":"æœ±æ™”"}],"discussion_count":5,"race_medal":0,"score":"10174815290","product_id":100047701,"comment_content":"è€å¸ˆè¯·æ•™ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬ç³»ç»Ÿæœ‰ä¸ªä¸šåŠ¡æ¥å£ï¼Œä¸€ä¸ªäººä¼šæ”¶åˆ°è‹¥å¹²ç§ä¸šåŠ¡æ¶ˆæ¯æé†’ï¼Œæ¯ä¸ªæé†’è‡³å°‘æ¶‰åŠä¸€å¼ è¡¨ï¼Œæœ‰çš„æé†’è¿˜ä¼šæ¶‰åŠåˆ°è°ƒç”¨å¤–ç³»ç»Ÿåå°æ¥å£ï¼Œè™½ç„¶ç°åœ¨ç”¨å¤šçº¿ç¨‹çš„æ–¹å¼ï¼Œå¼‚æ­¥å¹¶è¡Œè°ƒç”¨ï¼Œä½†æ˜¯æ¥å£è€—æ—¶ä»ç„¶è¾¾åˆ°äº†2så·¦å³ï¼Œåé¢éšç€ä¸šåŠ¡éœ€æ±‚çš„ä¸æ–­å¢åŠ ï¼Œè€—æ—¶å¯èƒ½ä¼šåŠ å‰§ï¼Œè€å¸ˆæœ‰ä»€ä¹ˆæ›´å¥½çš„æ–¹æ¡ˆå˜›ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488486,"discussion_content":"æ¶ˆæ¯åˆ—è¡¨èšåˆæ¥å£ï¼Ÿå¦‚æœå¹¶è¡Œè°ƒç”¨ï¼Œé‚£ä¹ˆæœ€çŸ­æ¿çš„ä»»åŠ¡å†³å®šäº†æ•´ä¸ªæ¥å£çš„æ€§èƒ½ï¼Œå°è¯•ä¼˜åŒ–ä¸€ä¸‹çŸ­æ¿ï¼Œä¸æ–­æ˜¯å¤–éƒ¨æ¥å£è¿˜æ˜¯æ•°æ®åº“ã€‚ä¹Ÿå¯ä»¥è€ƒè™‘ä¸€ä¸‹ä¸ºä»€ä¹ˆè¿™äº›æé†’ä¼šæ¶‰åŠåˆ°å¤šä¸ªåœ°æ–¹ç”šè‡³å…¶ä»–æ¥å£ï¼Œä¸ºä½•ä¸èƒ½æ‰€æœ‰é€šçŸ¥ç›´æ¥è¿›å…¥ä¸€ä¸ªè¡¨ï¼Œè€Œä¸”é€šçŸ¥æ˜¯æœ€å®¹æ˜“æŒ‰ç…§ç”¨æˆ·çº¬åº¦åˆ†è¡¨çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584886570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":212081,"discussion_content":"å†™å…¥æ—¶æ±‡æ€»çš„éº»çƒ¦å’Œè¯»å–æ—¶æ±‡æ€»çš„æ…¢ï¼Œè¿˜æ˜¯è¦é€‰æ‹©","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1584932156,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1274787,"avatar":"https://static001.geekbang.org/account/avatar/00/13/73/a3/2b077607.jpg","nickname":"Michael","note":"","ucode":"C233DF1D224EC1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":211852,"discussion_content":"ä¸»è¦æ˜¯æ•°æ®åº“è¡¨çš„å¢åŠ ï¼Œä¸šåŠ¡è¡¨åŸºæœ¬éƒ½æ˜¯ctrmå®šæ—¶ä½œä¸šæ¯æ—¥è·‘æ‰¹å¯¼å…¥åˆ°æˆ‘ä»¬ç³»ç»Ÿï¼Œè€Œä¸”åŸºæœ¬ä¸åŒçš„ä¸šåŠ¡è¡¨éƒ½æ¥è‡ªäºä¸åŒçš„ç³»ç»Ÿï¼Œæ‰€æœ‰çš„æ¶ˆæ¯è¡¨æ•°æ®åŸºæœ¬ä¸æ˜¯åŒæ—¶åˆ°è¾¾ï¼Œéƒ½æ˜¯å‡Œæ™¨ä»¥åï¼Œè‹¥æ˜¯åŠ å·¥åˆ°åŒä¸€å¼ è¡¨é‡Œï¼Œä¸šåŠ¡æ•°æ®çš„åŠ å·¥åœ¨å®šæ—¶shellè„šæœ¬ä¸­å¤„ç†ä¼šæ˜¾å¾—ç›¸å½“å¤æ‚ï¼ŒåŸºæœ¬æ²¡æ³•æåˆ°ä¸€å¼ è¡¨ï¼Œç”¨Javaå®šæ—¶ä»»åŠ¡å»å¤„ç†è¿˜æ˜¯ç‰¹åˆ«éº»çƒ¦ï¼Œæ¶ˆæ¯æé†’åˆè¦å®æ—¶æé†’ï¼Œæ‰€ä»¥ç¼“å­˜ä¹Ÿç”¨ä¸äº†ï¼ŒçœŸæ˜¯å¤´ç–¼","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584890411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2071309,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/9b/0d/4752c20a.jpg","nickname":"æš®æ±Ÿä½³äººè¿œ","note":"","ucode":"9CBAFC314F2876","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1274787,"avatar":"https://static001.geekbang.org/account/avatar/00/13/73/a3/2b077607.jpg","nickname":"Michael","note":"","ucode":"C233DF1D224EC1","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":302913,"discussion_content":"è¯·é—®æœ€åä½ æ˜¯æ€ä¹ˆè§£å†³çš„ï¼Ÿæ˜¯ä¸æ˜¯å¯ä»¥ç”¨æµå¼è®¡ç®—æ¡†æ¶å»åšèšåˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599061870,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":211852,"ip_address":""},"score":302913,"extra":""}]},{"author":{"id":1225974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b4/f6/e39d5af1.jpg","nickname":"é’±ç±³","note":"","ucode":"07AA44C6A40D34","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388456,"discussion_content":"æ¶ˆæ¯æé†’ä¸€èˆ¬æ˜¯å¼‚æ­¥åšã€‚çœ‹çœ‹å¾®ä¿¡ã€è®¢é¤ã€ç‚¹é¤æ¶ˆæ¯é€šçŸ¥éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œå¯ä»¥ä¼˜åŒ–è®¾è®¡æ–¹æ¡ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628770637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":190287,"user_name":"îŒ®ä¸«ç´î€ƒ ï¼ˆæœ‹å‹ï¼‰îˆ¯","can_delete":false,"product_type":"c1","uid":1903763,"ip_address":"","ucode":"821909D7D88E62","user_header":"https://static001.geekbang.org/account/avatar/00/1d/0c/93/30bbdf6f.jpg","comment_is_top":false,"comment_ctime":1584626934,"is_pvip":false,"replies":[{"id":"73196","content":"çº¿ç¨‹è¿‡å¤šè‚¯å®šä¼šæœ‰å½±å“ï¼Œåˆ†è¿˜æ˜¯åˆéœ€è¦ä»”ç»†è€ƒè™‘","user_name":"ä½œè€…å›å¤","comment_id":190287,"uid":"1001470","ip_address":"","utype":1,"ctime":1584628667,"user_name_real":"æœ±æ™”"}],"discussion_count":1,"race_medal":0,"score":"10174561526","product_id":100047701,"comment_content":"æˆ‘ä»¬ä¸€ä¸ªé¡¹ç›®é‡Œé¢å¦‚æœæœ‰10ä¸ªåœºæ™¯ä¸ä¸€æ ·ï¼Œæ˜¯ä¸æ˜¯å¾—åˆ›å»º10ä¸ªçº¿ç¨‹æ± ï¼Œè¿™æ ·å­ä¼šå¯¹æœåŠ¡å™¨æœ‰å½±å“å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487939,"discussion_content":"çº¿ç¨‹è¿‡å¤šè‚¯å®šä¼šæœ‰å½±å“ï¼Œåˆ†è¿˜æ˜¯åˆéœ€è¦ä»”ç»†è€ƒè™‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584628667,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187438,"user_name":"å¼ å°‘å","can_delete":false,"product_type":"c1","uid":1855708,"ip_address":"","ucode":"09DA0D3E7E0331","user_header":"","comment_is_top":false,"comment_ctime":1584109611,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10174044203","product_id":100047701,"comment_content":"æŒºå‰å®³","like_count":2},{"had_liked":false,"id":230354,"user_name":"è‚–å°‘å","can_delete":false,"product_type":"c1","uid":1285654,"ip_address":"","ucode":"C4AC98BE89929B","user_header":"https://static001.geekbang.org/account/avatar/00/13/9e/16/7d64001d.jpg","comment_is_top":false,"comment_ctime":1593354348,"is_pvip":false,"replies":[{"id":"85047","content":"å…¶å®æˆ‘çš„é—®é¢˜æ˜¯ å¦‚æœæˆ‘ä»¬ä¸å°å¿ƒæ¯æ¬¡éƒ½åˆ›å»ºäº†è¿™æ ·ä¸€ä¸ªè‡ªå®šä¹‰çš„çº¿ç¨‹æ± ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰å¤ç”¨çº¿ç¨‹æ± çš„æƒ…å†µ","user_name":"ä½œè€…å›å¤","comment_id":230354,"uid":"1001470","ip_address":"","utype":1,"ctime":1593396968,"user_name_real":"æœ±æ™”"}],"discussion_count":3,"race_medal":0,"score":"5888321644","product_id":100047701,"comment_content":"è€å¸ˆä½ å¥½ï¼Œå…³äºæ–‡ä¸­çš„ æ”¹é€ åçš„ThreadPoolHelperï¼Œç•™è¨€çš„åŒå­¦éƒ½è¯´ä¼šOOMï¼Œæ˜¯é¢‘ç¹åˆ›å»ºçº¿ç¨‹æ± å¯¼è‡´çš„ï¼Œæˆ‘æœ‰ç‚¹å°ç–‘æƒ‘ï¼Œè¿™ä¸ªé™æ€çš„ä¸æ˜¯ä¸ä¼šé‡å¤åˆ›å»ºçš„å—","like_count":1,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499848,"discussion_content":"å…¶å®æˆ‘çš„é—®é¢˜æ˜¯ å¦‚æœæˆ‘ä»¬ä¸å°å¿ƒæ¯æ¬¡éƒ½åˆ›å»ºäº†è¿™æ ·ä¸€ä¸ªè‡ªå®šä¹‰çš„çº¿ç¨‹æ± ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰å¤ç”¨çº¿ç¨‹æ± çš„æƒ…å†µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593396968,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1153455,"avatar":"https://static001.geekbang.org/account/avatar/00/11/99/af/d29273e2.jpg","nickname":"é¥­ç²’","note":"","ucode":"4C3220B0D43997","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":398566,"discussion_content":"ä¹Ÿæœ‰è¿™ä¸ªç–‘æƒ‘ï¼Œæ‰¾åˆ°è§£ç­”äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632813794,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1048329,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ff/09/e0c39733.jpg","nickname":"Jayliud","note":"","ucode":"0274FC2607B1BF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336845,"discussion_content":"ä½†å¦‚æœå¤ç”¨çš„è¯ï¼Œçº¿ç¨‹æ± å¦‚åªå¼€å¯äº†10ä¸ªï¼Œä½†æ˜¯è¯·æ±‚å¯èƒ½æ˜¯1000ï¼Œé‚£æ˜¯éƒ½å¾—æ’é˜Ÿç­‰ä¹ˆ?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608715090,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":191783,"user_name":"îŒ®ä¸«ç´î€ƒ ï¼ˆæœ‹å‹ï¼‰îˆ¯","can_delete":false,"product_type":"c1","uid":1903763,"ip_address":"","ucode":"821909D7D88E62","user_header":"https://static001.geekbang.org/account/avatar/00/1d/0c/93/30bbdf6f.jpg","comment_is_top":false,"comment_ctime":1584796497,"is_pvip":false,"replies":[{"id":"73466","content":"æˆ‘ä»¬å®é™…ç”¨åˆ°è¿™ç§æƒ…å†µå¤šå—<br>å…¶ä¸­è¿™ç§æƒ…å†µæ˜¯æŒ‡ä»€ä¹ˆï¼Ÿ","user_name":"ä½œè€…å›å¤","comment_id":191783,"uid":"1001470","ip_address":"","utype":1,"ctime":1584798065,"user_name_real":"æœ±æ™”"}],"discussion_count":3,"race_medal":0,"score":"5879763793","product_id":100047701,"comment_content":"æƒ³å’¨è¯¢ä¸‹ï¼Œæ¯”å¦‚æ‚¨åœ¨é¥¿äº†ä¹ˆæˆ–è€…ç°åœ¨çš„å…¬å¸ï¼Œæˆ‘ä»¬å®é™…ç”¨åˆ°è¿™ç§æƒ…å†µå¤šå—ï¼Ÿå› ä¸ºæ„Ÿè§‰å­¦äº†ï¼Œä½†æ˜¯å®é™…åº”ç”¨è¿˜æ˜¯æŒºå›°éš¾ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡åŠæ³•ä¿è¯å®é™…å¹¶å‘çš„é‡æœ‰å¤šå¤§","like_count":1,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488257,"discussion_content":"æˆ‘ä»¬å®é™…ç”¨åˆ°è¿™ç§æƒ…å†µå¤šå—\nå…¶ä¸­è¿™ç§æƒ…å†µæ˜¯æŒ‡ä»€ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584798065,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1903763,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/0c/93/30bbdf6f.jpg","nickname":"îŒ®ä¸«ç´î€ƒ ï¼ˆæœ‹å‹ï¼‰îˆ¯","note":"","ucode":"821909D7D88E62","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":211348,"discussion_content":"å°±æ˜¯å®é™…ç”¨åˆ°è¿™ç§æ‰‹åŠ¨çº¿ç¨‹æ± çš„ä¸šåŠ¡åœºæ™¯å¤šå—ï¼Ÿæˆ–è€…è¯´åœ¨ä¸€ä¸ªé¡¹ç›®é‡Œé¢æ­£å¸¸ä¼šæœ‰å¤šå°‘ä¸ªçº¿ç¨‹æ± å·¥å…·ç±»ï¼Ÿå› ä¸ºè‚¯å®šæ˜¯è¦å¤ç”¨çš„ï¼Œåªæ˜¯åº”è¯¥æ˜¯è¦æŒ‰å®é™…éœ€æ±‚å»åˆ›å»ºä¸åŒçš„åœºæ™¯çš„å·¥å…·ç±»å§","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584842847,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1301304,"avatar":"https://static001.geekbang.org/account/avatar/00/13/db/38/7ab139a3.jpg","nickname":"zå°ä¿Šã€Arno","note":"","ucode":"312B3DDCF15102","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1903763,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/0c/93/30bbdf6f.jpg","nickname":"îŒ®ä¸«ç´î€ƒ ï¼ˆæœ‹å‹ï¼‰îˆ¯","note":"","ucode":"821909D7D88E62","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":217509,"discussion_content":"åœ¨å·¥ä½œæ—¶ï¼Œè€ƒè™‘åˆ°è¿™äº›é—®é¢˜å°±å¥½äº†ï¼Œå°±æˆ‘å·¥ä½œå››å¹´çš„æŠ€æœ¯æ¥è®²ï¼ŒçŸ¥è¯†é¢ä¹Ÿæ˜¯ä»£ç è´¨é‡çš„ä¿è¯ï¼Œæ­£å¸¸æ¥è¯´ï¼Œè¿™ç§é€šç”¨çš„ä»£ç æ¨¡å—éƒ½å·²ç»è¢«æ¶æ„å¸ˆå†™å¥½äº†ï¼Œæ¶æ„å¸ˆä»¥å…¬å¸è§„æ¨¡æˆ–è€…æ‰€é€‰æ¡†æ¶å†³å®šçš„ã€‚æ–°æ‰‹ç›´æ¥æ“ä½œçº¿ç¨‹çš„æƒ…å†µä¸è¿‡ï¼Œä½†æ˜¯ç»å¯¹æœ‰å¿…è¦ç†Ÿæ‚‰ï¼Œæ¯•ç«Ÿçº¿ç¨‹æ˜¯é¢è¯•çƒ­ç‚¹ï¼Œå’Œé’±æŒ‚é’©","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1585566370,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":211348,"ip_address":""},"score":217509,"extra":""}]}]},{"had_liked":false,"id":189929,"user_name":"é£é£","can_delete":false,"product_type":"c1","uid":1118395,"ip_address":"","ucode":"31BEBE1325DE19","user_header":"https://static001.geekbang.org/account/avatar/00/11/10/bb/1616a0aa.jpg","comment_is_top":false,"comment_ctime":1584582861,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5879550157","product_id":100047701,"comment_content":"è€å¸ˆï¼Œèƒ½åˆ†äº«ä¸‹çº¿ç¨‹æ± å…³é—­ç›¸å…³çš„ç»éªŒå—","like_count":1},{"had_liked":false,"id":189535,"user_name":"ä½•å²¸åº·","can_delete":false,"product_type":"c1","uid":1444317,"ip_address":"","ucode":"F24898244A170D","user_header":"https://static001.geekbang.org/account/avatar/00/16/09/dd/02c73bd3.jpg","comment_is_top":false,"comment_ctime":1584526592,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5879493888","product_id":100047701,"comment_content":"é—®é¢˜ä¸€ï¼š<br>æ„Ÿè§‰ä½¿ç”¨ç»„åˆè¦æ¯”ç»§æ‰¿æ›´é€‚åˆã€‚<br>public class OfferToQueuePolicy implements RejectedExecutionHandler {<br><br>    public OfferToQueuePolicy() {<br>    }<br><br>    public OfferToQueuePolicy(RejectedExecutionHandler rejectedExecutionHandler) {<br>        this.rejectedExecutionHandler = rejectedExecutionHandler;<br>    }<br><br>    private RejectedExecutionHandler rejectedExecutionHandler;<br><br>    @Override<br>    public void rejectedExecution(Runnable r, ThreadPoolExecutor e) {<br><br>        BlockingQueue&lt;Runnable&gt; workQueue = e.getQueue();<br>        try {<br>            if (e.isShutdown()) {<br>                if (!workQueue.offer(r, 0, TimeUnit.MILLISECONDS)) {<br>                    rejectedExecutionHandler.rejectedExecution(r, e);<br>                }<br>                if (e.isShutdown()) {<br>                    e.remove(r);<br>                }<br>            }<br>        } catch (InterruptedException ex) {<br>            rejectedExecutionHandler.rejectedExecution(r, e);<br>        }<br>    }<br><br>}<br><br>public class AggressiveBlockingQueue&lt;E&gt; implements BlockingQueue&lt;E&gt;, java.io.Serializable{<br><br>    private BlockingQueue&lt;E&gt; blockingQueue;<br><br><br>    @Override<br>    public Iterator&lt;E&gt; iterator() {<br>        return blockingQueue.iterator();<br>    }<br><br>    @Override<br>    public boolean offer(E e) {<br>        return false;<br>    }<br>    <br>    @Override<br>    public E take() throws InterruptedException {<br>        return blockingQueue.take();<br>    }<br>    <br>    .......<br>}","like_count":1,"discussions":[{"author":{"id":1974876,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJUCiacuh59wMZAeeNRwLiaGaRMZHibF05IibXeiaZfjcFfkmTwJTmPszibXLAQkk2mMdx8chPjTs2yvpZg/132","nickname":"Sky1225","note":"","ucode":"6F428AF396D99D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385650,"discussion_content":"ç†ç”±å‘¢ï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627196350,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187541,"user_name":"mgs2002","can_delete":false,"product_type":"c1","uid":1812970,"ip_address":"","ucode":"F5931108BD509B","user_header":"https://static001.geekbang.org/account/avatar/00/1b/a9/ea/5bfce6c5.jpg","comment_is_top":false,"comment_ctime":1584154713,"is_pvip":false,"replies":[{"id":"72362","content":"è¿™æ®µä»£ç ä¸æ˜¯å¾ˆèƒ½ç†è§£æ„æ€ï¼ŒtestCompletableFutureDefaultExecutoræ˜¯ä»€ä¹ˆï¼Ÿæœ€å¥½ç»™å‡ºæºç é“¾æ¥","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1584156760,"ip_address":"","comment_id":187541,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5879122009","product_id":100047701,"comment_content":" è€å¸ˆï¼Œæˆ‘è¿˜æœ‰ä¸ªé—®é¢˜ï¼Œ æˆ‘åœ¨æœ¬æœºåšäº†ä¸€ä¸‹é»˜è®¤çº¿ç¨‹æ± ï¼ˆCompletableFutureï¼‰å’Œè‡ªå®šä¹‰çº¿ç¨‹æ± çš„è°ƒç”¨æ—¶é—´å¯¹æ¯”ï¼Œæµ‹è¯•äº†å¥½å¤šæ¬¡æ¯æ¬¡éƒ½æ˜¯é»˜è®¤çº¿ç¨‹æ± çš„æ—¶é—´å¿«ï¼Œä»»åŠ¡è¶Šå¤šè‡ªå®šä¹‰çº¿ç¨‹æ± çš„æ—¶é—´å°±è¶Šæ…¢ï¼Œé»˜è®¤çš„ç›¸å¯¹ç¨³å®šï¼Œä¸æ‡‚æ€ä¹ˆå›äº‹äº†ã€‚ã€‚<br>è¿™æ˜¯æˆ‘çš„æµ‹è¯•ç»“æœï¼Œdefaultæ˜¯é»˜è®¤çš„ï¼Œcustomæ˜¯è‡ªå®šä¹‰çš„<br> When 1 tasks =&gt; future default: 11,future custom: 4<br> When 3 tasks =&gt; future default: 1,future custom: 2<br> When 4 tasks =&gt; future default: 1,future custom: 2<br> When 5 tasks =&gt; future default: 1,future custom: 6<br> When 6 tasks =&gt; future default: 1,future custom: 7<br> When 8 tasks =&gt; future default: 1,future custom: 5<br> When 9 tasks =&gt; future default: 0,future custom: 5<br> When 14 tasks =&gt; future default: 1,future custom: 5<br> When 20 tasks =&gt; future default: 2,future custom: 9<br> When 21 tasks =&gt; future default: 1,future custom: 7<br> When 34 tasks =&gt; future default: 2,future custom: 4<br> When 54 tasks =&gt; future default: 1,future custom: 2<br> When 104 tasks =&gt; future default: 2,future custom: 2<br> When 154 tasks =&gt; future default: 3,future custom: 3<br> When 204 tasks =&gt; future default: 4,future custom: 47<br> When 304 tasks =&gt; future default: 5,future custom: 481<br> When 604 tasks =&gt; future default: 9,future custom: 488<br> When 1004 tasks =&gt; future default: 18,future custom: 783<br> When 2004 tasks =&gt; future default: 41,future custom: 1573<br> When 3004 tasks =&gt; future default: 64,future custom: 2628<br>è‡ªå®šä¹‰è¿æ¥æ± è®¾å®šå‚æ•°ï¼š <br>    corePoolSizeï¼š200 maximumPoolSizeï¼š200 keepAliveTimeï¼š1 unitï¼šHOUR workQueueï¼š200 <br>    é»˜è®¤æ‹’ç»ç­–ç•¥<br>æµ‹è¯•ä»£ç ï¼š<br> @PostMapping(&quot;&#47;testPool&quot;)<br>    public Result list(@Valid @RequestBody SchoolRequest schoolRequest){<br>        Arrays.asList(-3, -1, 0, 1, 2, 4, 5, 10, 16, 17, 30, 50, 100, 150, 200, 300,600,1000,2000,3000).forEach(offset -&gt; {<br>            int jobNum = 4 + offset;<br>            log.info(String.format(&quot;When %s tasks =&gt; future default: %s,future custom: %s&quot;,jobNum,  testCompletableFutureDefaultExecutor(jobNum,schoolRequest),testCompletableFutureCustomExecutor(jobNum,schoolRequest)));<br>        });<br>        return Result.successInstance();<br>    }","like_count":1,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487140,"discussion_content":"è¿™æ®µä»£ç ä¸æ˜¯å¾ˆèƒ½ç†è§£æ„æ€ï¼ŒtestCompletableFutureDefaultExecutoræ˜¯ä»€ä¹ˆï¼Ÿæœ€å¥½ç»™å‡ºæºç é“¾æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584156760,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187325,"user_name":"mgs2002","can_delete":false,"product_type":"c1","uid":1812970,"ip_address":"","ucode":"F5931108BD509B","user_header":"https://static001.geekbang.org/account/avatar/00/1b/a9/ea/5bfce6c5.jpg","comment_is_top":false,"comment_ctime":1584083695,"is_pvip":false,"replies":[{"id":"72287","content":"é€šè¿‡æ•°æ®åº“æ¥æŸ¥è¯¢ç»Ÿè®¡å°±æ˜¯IOæ“ä½œï¼Œæ—¢ç„¶é¡¹ç›®éƒ½ä¸åŒäº†ï¼Œé‚£ä¹ˆå°±ä¸æ˜¯ä¸€ä¸ªè¿›ç¨‹äº†ï¼Œæˆ‘ä»¬è¯´çš„çº¿ç¨‹æ± éš”ç¦»æ˜¯é’ˆå¯¹ä¸€ä¸ªè¿›ç¨‹çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1584084556,"ip_address":"","comment_id":187325,"utype":1}],"discussion_count":4,"race_medal":0,"score":"5879050991","product_id":100047701,"comment_content":"å­¦åˆ°äº†ï¼Œæˆ‘ç°åœ¨ä»£ç è¿˜æ˜¯ç”¨çš„CompletableFutureé»˜è®¤çº¿ç¨‹æ± ã€‚ã€‚ã€‚æœ‰ä¸ªé—®é¢˜è¯·æ•™è€å¸ˆï¼Œæˆ‘æœ‰ä¸¤ä¸ªé¡¹ç›®ï¼Œé‡Œé¢æœ‰å¾ˆå¤šæ•°æ®ç»Ÿè®¡çš„åœ°æ–¹ä½¿ç”¨åˆ°äº†çº¿ç¨‹æ± ï¼Œè¿™ç§æ˜¯å±äºCPUç»‘å®šç±»å‹çš„å§ï¼ˆé€šè¿‡æ•°æ®åº“æ¥æŸ¥è¯¢ç»Ÿè®¡ï¼‰ï¼Œè¿˜æœ‰æˆ‘æƒ³åˆ†åˆ«ç»™ä¸¤ä¸ªé¡¹ç›®è®¾ç½®ä¸åŒçš„çº¿ç¨‹æ± å¯è¡Œå—","like_count":1,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487074,"discussion_content":"é€šè¿‡æ•°æ®åº“æ¥æŸ¥è¯¢ç»Ÿè®¡å°±æ˜¯IOæ“ä½œï¼Œæ—¢ç„¶é¡¹ç›®éƒ½ä¸åŒäº†ï¼Œé‚£ä¹ˆå°±ä¸æ˜¯ä¸€ä¸ªè¿›ç¨‹äº†ï¼Œæˆ‘ä»¬è¯´çš„çº¿ç¨‹æ± éš”ç¦»æ˜¯é’ˆå¯¹ä¸€ä¸ªè¿›ç¨‹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584084556,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1461075,"avatar":"https://static001.geekbang.org/account/avatar/00/16/4b/53/f797f031.jpg","nickname":"æ— é“win","note":"","ucode":"0C026BB03A53EA","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302719,"discussion_content":"CompletableFutureè·Ÿparallel stream ä¸€æ ·ï¼ŒèƒŒåæ˜¯å…±äº«åŒä¸€ä¸ª ForkJoinPoolï¼Œä¸è¿‡CompletableFutureæ„é€ å‡½æ•°æ”¯æŒä¼ å…¥è‡ªå®šä¹‰çº¿ç¨‹æ± ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1599014167,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1812970,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a9/ea/5bfce6c5.jpg","nickname":"mgs2002","note":"","ucode":"F5931108BD509B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":203813,"discussion_content":"å“¦ï¼Œäº†è§£äº†ï¼Œé‚£ä¸€ä¸ªè¿›ç¨‹é‡Œä¸åŒçš„ç»Ÿè®¡ä»»åŠ¡æœ‰å¿…è¦åˆ›å»ºä¸åŒçš„çº¿ç¨‹æ± æ¥éš”ç¦»å—","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584085766,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1461075,"avatar":"https://static001.geekbang.org/account/avatar/00/16/4b/53/f797f031.jpg","nickname":"æ— é“win","note":"","ucode":"0C026BB03A53EA","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1812970,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a9/ea/5bfce6c5.jpg","nickname":"mgs2002","note":"","ucode":"F5931108BD509B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302717,"discussion_content":"å¦‚æœä»»åŠ¡ä¹‹é—´æœ‰ä¾èµ–å…³ç³»çš„è¯ï¼Œæœ€å¥½è¿˜æ˜¯è¿›è¡Œéš”ç¦»ï¼Œä¸è¦æäº¤åˆ°åŒä¸€çº¿ç¨‹æ± é‡Œé¢ã€‚ä¸ç„¶æœ‰å¯èƒ½é€ æˆæ­»é”çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599014029,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":203813,"ip_address":""},"score":302717,"extra":""}]}]},{"had_liked":false,"id":187168,"user_name":"13W3H","can_delete":false,"product_type":"c1","uid":1046497,"ip_address":"","ucode":"83189FD92DC082","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f7/e1/36676a49.jpg","comment_is_top":false,"comment_ctime":1584030996,"is_pvip":false,"replies":[{"id":"72228","content":"ä½ æ˜¯ä»€ä¹ˆoså‘¢ï¼Ÿæˆ‘æ˜¯macosæ²¡æœ‰é‡åˆ°è¿‡è¿™ä¸ªé—®é¢˜ï¼Œå°è¯•å…ˆé‡å¯docker serviceï¼Œæˆ–OSã€‚docker-composeæ˜¯æ–¹ä¾¿å¤§å®¶å¿«é€Ÿå¯åŠ¨ä¾èµ–ï¼Œä¸æ˜¯å¿…é¡»çš„ï¼Œå®åœ¨ä¸è¡Œä½ å¯ä»¥è‡ªå·±æ‰‹åŠ¨å®‰è£…mysqlï¼Œéƒ½æ˜¯ä¸€æ ·çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1584059460,"ip_address":"","comment_id":187168,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5878998292","product_id":100047701,"comment_content":"mysqld: Table &#39;mysql.plugin&#39; doesn&#39;t exist<br>[Warning] Insecure configuration for --pid-file: Location &#39;&#47;var&#47;run&#47;mysqld&#39; in the path is accessible to all OS users. Consider choos<br>[Warning] Failed to open optimizer cost constant tables<br>[ERROR] Fatal error: Can&#39;t open and lock privilege tables: Table &#39;mysql.user&#39; doesn&#39;t exist<br>[ERROR] Fatal error: Failed to initialize ACL&#47;grant&#47;time zones structures or failed to remove temporary table files.<br>[ERROR] Aborting<br>mysqld: Shutdown complete<br><br>---<br>è€å¸ˆæ‚¨å¥½ï¼Œdocker-compose up åœ¨å¯åŠ¨mysqlæ—¶é‡åˆ°äº†è¿™ä¸ªå¼‚å¸¸ï¼Œçœ‹ç½‘ä¸Šæ˜¯è¯´æ²¡æœ‰åˆå§‹åŒ–mysqlï¼Œéº»çƒ¦è¯·é—®ä¸‹ï¼Œæ˜¯éœ€è¦è¿›åˆ°dockerå®¹å™¨é‡Œé¢å»è¿›è¡Œåˆå§‹åŒ–æˆ–é…ç½®å—ï¼Ÿï¼ˆåˆšåˆšæ¥è§¦dockerï¼Œè¿˜æœ›æŒ‡ç‚¹ä¸€ä¸‹ï¼Œè°¢è°¢ï¼‰","like_count":1,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487012,"discussion_content":"ä½ æ˜¯ä»€ä¹ˆoså‘¢ï¼Ÿæˆ‘æ˜¯macosæ²¡æœ‰é‡åˆ°è¿‡è¿™ä¸ªé—®é¢˜ï¼Œå°è¯•å…ˆé‡å¯docker serviceï¼Œæˆ–OSã€‚docker-composeæ˜¯æ–¹ä¾¿å¤§å®¶å¿«é€Ÿå¯åŠ¨ä¾èµ–ï¼Œä¸æ˜¯å¿…é¡»çš„ï¼Œå®åœ¨ä¸è¡Œä½ å¯ä»¥è‡ªå·±æ‰‹åŠ¨å®‰è£…mysqlï¼Œéƒ½æ˜¯ä¸€æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584059460,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":203764,"discussion_content":"ok","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584078718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1046497,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/e1/36676a49.jpg","nickname":"13W3H","note":"","ucode":"83189FD92DC082","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":203645,"discussion_content":"å·²è§£å†³ï¼Œè°¢è°¢è€å¸ˆã€‚æ˜¯win10ç³»ç»Ÿå®‰è£…çš„dockerã€‚åˆšæƒ³åˆ°æ˜¯ä¸æ˜¯ç”¨æˆ·æƒé™çš„é—®é¢˜ï¼ŒæœçœŸæ˜¯è¿™ä¸ªé—®é¢˜ã€‚ç”¨ç®¡ç†å‘˜æƒé™å¯åŠ¨Windows PowerShell åæ‰§è¡Œdocker-compose up å‘½ä»¤å°±å¯ä»¥æ­£å¸¸å¯åŠ¨äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584062523,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187015,"user_name":"æ±æ—å¤–å²","can_delete":false,"product_type":"c1","uid":1188906,"ip_address":"","ucode":"3C66C0F0537A99","user_header":"https://static001.geekbang.org/account/avatar/00/12/24/2a/33441e2b.jpg","comment_is_top":false,"comment_ctime":1583990748,"is_pvip":false,"replies":[{"id":"72136","content":"1ã€å¯ä»¥æƒ³æƒ³tomcatä¸ºä»€ä¹ˆè§‰å¾—è¿™æ ·æ¿€è¿›çš„çº¿ç¨‹æ›´é€‚åˆã€‚å…¶å®.NETçš„çº¿ç¨‹æ± å°±æ˜¯è¿™æ ·çš„å¼¹æ€§çº¿ç¨‹æ± ï¼Œåªä¸è¿‡åˆ›å»ºæ–°çš„çº¿ç¨‹è¿˜ä¼šæœ‰ä¸€å®šçš„æ€è€ƒæ—¶é—´ï¼Œå»¶è¿Ÿæ–°çº¿ç¨‹çš„åˆ›å»ºï¼Œæ›´æ™ºèƒ½ã€‚<br>2ã€å…¶å®å’Œä»»åŠ¡æ…¢ä¸æ…¢æ²¡æœ‰å¤ªå¤§å…³ç³»ï¼Œå³ä½¿ä»»åŠ¡ä¸æ…¢ï¼Œä¸å¤ç”¨ä¹Ÿæ˜¯æœ‰é—®é¢˜çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1583996581,"ip_address":"","comment_id":187015,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5878958044","product_id":100047701,"comment_content":"è€å¸ˆçš„æ–‡ç« çœŸçš„æ˜¯çœ‹å¾—å¾ˆçˆ½ã€‚é—®é¢˜å¦‚ä¸‹ï¼š<br>1.æ¿€è¿›çš„éƒ½é€‚åº”ä»€ä¹ˆåœºåˆå‘¢ï¼Ÿå…ˆæ‰©å®¹çº¿ç¨‹æ± å†åŠ å…¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¹Ÿå¯èƒ½é˜Ÿåˆ—æ»¡äº†è¿˜æ¥ä»»åŠ¡ï¼Œè¿˜æ˜¯è¦å†æ‹’ç»ã€‚<br>2.å› ä¸ºæ ¸å¿ƒçº¿ç¨‹ä¸ä¼šå›æ”¶ï¼Œæ‰€ä»¥ä¼šOOMã€‚å¯ä»¥è®¾ç½®allowCoreThreadTimeOutå‚æ•°è®©æ ¸å¿ƒçº¿ç¨‹ä¹Ÿå¯ä»¥å›æ”¶ã€‚ å¦å¤–æ–‡ä¸­çš„ThreadPoolHelperæ˜¯ç”¨æ¥å¤ç”¨çº¿ç¨‹æ± çš„ï¼Œä½†æ˜¯æäº¤çš„éƒ½æ˜¯æ…¢ä»»åŠ¡ï¼Œå¾ˆå¤šåœ°æ–¹éƒ½æäº¤çš„è¯ä¸ä¼šå¯¼è‡´çº¿ç¨‹æ± å§‹ç»ˆå¤„äºæ»¡çš„çŠ¶æ€ï¼Œå¯¼è‡´åæ¥çš„ä»»åŠ¡å§‹ç»ˆå¾—ä¸åˆ°æ‰§è¡Œå—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486960,"discussion_content":"1ã€å¯ä»¥æƒ³æƒ³tomcatä¸ºä»€ä¹ˆè§‰å¾—è¿™æ ·æ¿€è¿›çš„çº¿ç¨‹æ›´é€‚åˆã€‚å…¶å®.NETçš„çº¿ç¨‹æ± å°±æ˜¯è¿™æ ·çš„å¼¹æ€§çº¿ç¨‹æ± ï¼Œåªä¸è¿‡åˆ›å»ºæ–°çš„çº¿ç¨‹è¿˜ä¼šæœ‰ä¸€å®šçš„æ€è€ƒæ—¶é—´ï¼Œå»¶è¿Ÿæ–°çº¿ç¨‹çš„åˆ›å»ºï¼Œæ›´æ™ºèƒ½ã€‚\n2ã€å…¶å®å’Œä»»åŠ¡æ…¢ä¸æ…¢æ²¡æœ‰å¤ªå¤§å…³ç³»ï¼Œå³ä½¿ä»»åŠ¡ä¸æ…¢ï¼Œä¸å¤ç”¨ä¹Ÿæ˜¯æœ‰é—®é¢˜çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583996581,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":186980,"user_name":"ğŸ¾","can_delete":false,"product_type":"c1","uid":1087256,"ip_address":"","ucode":"D0AD0260351C31","user_header":"https://static001.geekbang.org/account/avatar/00/10/97/18/a5218104.jpg","comment_is_top":false,"comment_ctime":1583982322,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5878949618","product_id":100047701,"comment_content":"OOMï¼Œå…¨ç§°â€œOut Of Memoryâ€ï¼Œä¸­æ–‡æ„æ€æ˜¯â€œå†…å­˜ç”¨å°½â€ã€‚å½“ JVM å› ä¸ºæ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜æ¥ä¸ºå¯¹è±¡åˆ†é…ç©ºé—´ï¼Œå¹¶ä¸”åƒåœ¾å›æ”¶å™¨ä¹Ÿæ²¡æœ‰ç©ºé—´å¯å›æ”¶æ—¶ï¼Œå°±ä¼šæŠ›å‡ºè¿™ä¸ª Errorã€‚","like_count":1,"discussions":[{"author":{"id":1488356,"avatar":"https://static001.geekbang.org/account/avatar/00/16/b5/e4/e6faf686.jpg","nickname":"æ¡äº†ä¸ªå¤§èš‚èš±","note":"","ucode":"AD34AD4FA37371","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339948,"discussion_content":"è¿™ä½ éƒ½çŸ¥é“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609847374,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356495,"user_name":"åœ¨é›¨ä¸­","can_delete":false,"product_type":"c1","uid":1188220,"ip_address":"æ±Ÿè¥¿","ucode":"C4A0B725C8A009","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/7c/940627a7.jpg","comment_is_top":false,"comment_ctime":1662366846,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1662366846","product_id":100047701,"comment_content":"è¯·é—®ä¸‹è€å¸ˆï¼ŒThreadPoolHelperåˆ›å»ºçš„çº¿ç¨‹æ± å¹¶æ²¡æœ‰è®¾ç½®        &#47;&#47; é¢„çƒ­ä¸€ä¸ªæ ¸å¿ƒçº¿ç¨‹<br>        &#47;&#47; threadPoolExecutor.prestartCoreThread();<br>        &#47;&#47; é¢„çƒ­æ‰€æœ‰æ ¸å¿ƒçº¿ç¨‹<br>        &#47;&#47; threadPoolExecutor.prestartAllCoreThreads();","like_count":0},{"had_liked":false,"id":352027,"user_name":"dudu-benny","can_delete":false,"product_type":"c1","uid":1683951,"ip_address":"","ucode":"026ECAC9AFDE0D","user_header":"https://static001.geekbang.org/account/avatar/00/19/b1/ef/2356b51e.jpg","comment_is_top":false,"comment_ctime":1658334966,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1658334966","product_id":100047701,"comment_content":"&quot;ä¼ å…¥ true ç»™ allowCoreThreadTimeOut æ–¹æ³•ï¼Œæ¥è®©çº¿ç¨‹æ± åœ¨ç©ºé—²çš„æ—¶å€™åŒæ ·å›æ”¶æ ¸å¿ƒçº¿ç¨‹&quot;  å’Œ &quot;ç”±äºçº¿ç¨‹æ± åœ¨å·¥ä½œé˜Ÿåˆ—æ»¡äº†æ— æ³•å…¥é˜Ÿçš„æƒ…å†µä¸‹ä¼šæ‰©å®¹çº¿ç¨‹æ± ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥é‡å†™é˜Ÿåˆ—çš„ offer æ–¹æ³•ï¼Œé€ æˆè¿™ä¸ªé˜Ÿåˆ—å·²æ»¡çš„å‡è±¡å‘¢&quot;  ä¸èƒ½åŒæ—¶ä½¿ç”¨ï¼Œå‘ç°å®ç°offer è¿”å›false å çº¿ç¨‹æ± ä¼šè®¤ä¸ºé˜Ÿé‡Œå·²ç»æ”¾ä¸ä¸‹äº†ï¼Œåˆ™å¼€å§‹åˆ›å»ºæ–°çº¿ç¨‹ç›´åˆ°æœ€å¤§çº¿ç¨‹æ•°ï¼Œå½“çº¿ç¨‹æ± ç©ºé—²çš„æ—¶å€™ï¼Œä¼šå›æ”¶æœ€å¤§çº¿ç¨‹æ•°ç›´åˆ°æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œofferè¿”å›falseè¿˜æ˜¯æˆç«‹ æ‰€ä»¥allowCoreThreadTimeOut ä¼ å…¥true æ— æ•ˆï¼Œå…·ä½“è¦äº†è§£ä¸€ä¸‹æºä»£ç   ","like_count":0},{"had_liked":false,"id":348689,"user_name":"æµ®çŸ³æ²‰æœ¨","can_delete":false,"product_type":"c1","uid":2223167,"ip_address":"","ucode":"D585768321B84A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/mQddXC7nRiaKHTwdficicTB3bH0q5ic5UoSab51Omic7eyLBz0SNcvbLpQnNib7zP1yJFm7xxx4ia81iahfibRVnbTwHmhw/132","comment_is_top":false,"comment_ctime":1655303348,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1655303348","product_id":100047701,"comment_content":"è€å¸ˆï¼Œç°åœ¨æœ‰ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬ä¹‹å‰å«Œå•çº¿ç¨‹æŸ¥è¯¢ä¸€ä¸ªé•¿æ—¶é—´åºåˆ—çš„æ•°æ®å¤ªè€—æ—¶äº†ï¼Œä¸ºäº†åŠ å¿«å“åº”é€Ÿåº¦ï¼Œæ”¹æˆæ¯æ¬¡æ¥ä¸ªè¯·æ±‚å°±newä¸€ä¸ªçº¿ç¨‹æ± ï¼Œæ¯ä¸ªå­çº¿ç¨‹æŸ¥è¯¢ä¸€æ®µæ•°æ®ï¼Œæœ€åæ±‡æ€»è¿”å›ã€‚æ¯æ¬¡æ–°å»ºä¸€ä¸ªçº¿ç¨‹æ± æ˜¯ä¸æ˜¯æ²¡æœ‰å¿…è¦ï¼Œèƒ½ä¸èƒ½åœ¨springbootä¸­ç»´æŒä¸€ä¸ªå•ä¾‹çš„çº¿ç¨‹æ± ï¼Ÿå½“è¯·æ±‚æ•°é‡è¿‡å¤šçš„æ—¶å€™ï¼Œè¿™äº›çº¿ç¨‹ä¸€æ—¶åŠä¼šæä¸åˆ°æ•°æ®ï¼ŒCPUä½¿ç”¨ç‡é£™å‡çš„å¯èƒ½æ€§ï¼Œå¦‚æœå­˜åœ¨è¿™ç§å¯èƒ½æ€§ï¼Œåº”è¯¥ä»å“ªæ–¹é¢ç€æ‰‹ä¼˜åŒ–å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":348687,"user_name":"æµ®çŸ³æ²‰æœ¨","can_delete":false,"product_type":"c1","uid":2223167,"ip_address":"","ucode":"D585768321B84A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/mQddXC7nRiaKHTwdficicTB3bH0q5ic5UoSab51Omic7eyLBz0SNcvbLpQnNib7zP1yJFm7xxx4ia81iahfibRVnbTwHmhw/132","comment_is_top":false,"comment_ctime":1655302996,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1655302996","product_id":100047701,"comment_content":"è€å¸ˆï¼Œæˆ‘ä»¬ç°åœ¨æœ‰ä¸ªåœºæ™¯ï¼Œå› ä¸ºä¹‹å‰å•çº¿ç¨‹å»æŸ¥ä¸€ä¸ªå¾ˆé•¿æ—¶é—´åºåˆ—çš„æ•°æ®åº“æ•°æ®ï¼Œå“åº”å¤ªæ…¢ï¼Œåè¾¹ä»£ç æ”¹æˆæ¯æ¥ä¸€æ¬¡è¯·æ±‚ï¼Œæˆ‘ä»¬å°±newä¸€ä¸ªçº¿ç¨‹æ± ï¼Œæ¯ä¸ªå­çº¿ç¨‹åˆ†æ‰¹æŸ¥è¯¢ä¸€å°æ®µæ—¶é—´åºåˆ—çš„æ•°æ®ï¼Œæœ€åæ±‡æ€»ã€‚è¿™æ ·ä¼šä¸ä¼šå¯¼è‡´ï¼š","like_count":0},{"had_liked":false,"id":345500,"user_name":"18168789972","can_delete":false,"product_type":"c1","uid":2270110,"ip_address":"","ucode":"FA57A540D6BC35","user_header":"","comment_is_top":false,"comment_ctime":1652336662,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652336662","product_id":100047701,"comment_content":"æ‚¨å¥½ è€å¸ˆ!<br>åœ¨ä½¿ç”¨å¤šçº¿ç¨‹çš„æ—¶å€™ï¼Œå¥½åƒå‡ºç°äº†åŒæ­¥çš„é—®é¢˜ï¼Œè®©æˆ‘æœ‰ç‚¹ä¸çŸ¥æ‰€æª ï¼Œéº»çƒ¦è€å¸ˆç»™æŒ‡ç‚¹ä¸€ä¸‹ï¼<br>ä»printStats(threadPool)æ‰“å°çš„æ•°æ®çœ‹ å®Œæˆçš„ä»»åŠ¡æ•°åœ¨+1æ“ä½œï¼ŒæŸä¸€æ—¶é—´ç‚¹ä¼š+30<br>30wçš„æ•°æ®èŠ±è´¹çš„æ—¶é—´å·¨å¤§ï¼Œ1wå•çº¿ç¨‹çš„è¯14s<br>ThreadPoolExecutor threadPool = new ThreadPoolExecutor(<br>                60,<br>                60,<br>                60,<br>                TimeUnit.SECONDS,<br>                new ArrayBlockingQueue&lt;&gt;(10),<br>                new ThreadFactoryBuilder().setNameFormat(&quot;demo-threadpool-%d&quot;).build(),<br>                new ThreadPoolExecutor.AbortPolicy());<br>printStats(threadPool);<br>&#47;&#47;è®¡æ•°å™¨<br>CountDownLatch downLatch = new CountDownLatch(60);<br>AtomicInteger incr = new AtomicInteger(0);<br>for (int i = 0; i &lt; 60; i++) {<br>    int offset=i*5000;<br>    threadPool.execute(()-&gt;{<br>       &#47;&#47; æŸ¥è¯¢æ•°æ®åº“ æ¯æ¬¡æŸ¥5kæ¡ï¼Œlimité™åˆ¶ä½ç§»é‡<br>       select * from [è¡¨] limit 5000 offset #{offset};<br>       &#47;&#47; IO å†™æ“ä½œ<br>       ...<br>       fileOutputStream.write(out.toByteArray());<br>       ...<br>       fileOutputStream.close();<br>    });<br>}<br>downLatch.await();","like_count":0},{"had_liked":false,"id":344087,"user_name":"é˜²è…åŸº","can_delete":false,"product_type":"c1","uid":2696605,"ip_address":"","ucode":"0FF3BF30631995","user_header":"https://static001.geekbang.org/account/avatar/00/29/25/9d/d612cbf8.jpg","comment_is_top":false,"comment_ctime":1651227676,"is_pvip":true,"replies":[{"id":"125700","content":"èµ°MQæ¯”è¾ƒå¥½","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1001470","ctime":1651492327,"ip_address":"","comment_id":344087,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1651227676","product_id":100047701,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘ä»¬å·¥ä½œä¸­æœ‰ä¸ªåœºæ™¯æ˜¯ä»˜æ¬¾æˆåŠŸåï¼Œç»™ç”¨æˆ·å‘è®¢é˜…æ¶ˆæ¯æˆ–çŸ­ä¿¡é€šçŸ¥ï¼Œå‘é€šçŸ¥çš„éƒ¨åˆ†æˆ‘ä»¬æƒ³ç”¨çº¿ç¨‹æ± ï¼Œè€å¸ˆå¯ä»¥ç»™ä¸ªåˆé€‚çš„å‚æ•°é…ç½®å—ï¼Œæˆ‘è¿™è¾¹å¯ä»¥é€‚å½“å‚è€ƒã€‚ç¡¬ä»¶æ˜¯CPU8æ ¸å†…å­˜16Gã€‚","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":569592,"discussion_content":"èµ°MQæ¯”è¾ƒå¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651492327,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342632,"user_name":"csdev_sch","can_delete":false,"product_type":"c1","uid":2940733,"ip_address":"","ucode":"BE8013E72F9BAE","user_header":"https://static001.geekbang.org/account/avatar/00/2c/df/3d/7df2b086.jpg","comment_is_top":false,"comment_ctime":1650373836,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650373836","product_id":100047701,"comment_content":"new å‡ºæ¥çš„ForkJoinPoolæ²¡æœ‰æ˜¾å¼è°ƒç”¨shutdownæ–¹æ³•ï¼Œæœ€åèƒ½è¢«jvmèƒ½å›æ”¶å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":341990,"user_name":"èŠ±èŠ±å¤§è„¸çŒ«","can_delete":false,"product_type":"c1","uid":1117318,"ip_address":"","ucode":"8ABDB3F7F4FB0F","user_header":"https://static001.geekbang.org/account/avatar/00/11/0c/86/8e52afb8.jpg","comment_is_top":false,"comment_ctime":1649943082,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1649943082","product_id":100047701,"comment_content":"è¿™ä¸ªé—®é¢˜æœ€è¿‘åˆšåœ¨ç”Ÿäº§ç¯å¢ƒçœ‹åˆ°è¿‡ã€‚ã€‚ç¡®å®å¯¹äºä»£ç çš„ä¹¦å†™ä¹ æƒ¯è€Œè¨€è¦æœ‰æ•¬ç•ä¹‹å¿ƒï¼Œå°¤å…¶æ˜¯ç‰µæ¶‰åˆ°å¤šçº¿ç¨‹æ‰§è¡Œï¼Œthreadlocalå¯¹è±¡ï¼Œå…±äº«èµ„æºé”ç«äº‰ç­‰ï¼Œå¿…é¡»è¦æ˜ç¡®äº†è§£ä½¿ç”¨åœºæ™¯ä¸åŸç†","like_count":0},{"had_liked":false,"id":341499,"user_name":"å¯¹å¯¹å¯¹ï¼Œæ˜¯æˆ‘ï¼Œæ˜¯æˆ‘","can_delete":false,"product_type":"c1","uid":1182133,"ip_address":"","ucode":"4DBD73850A9B41","user_header":"https://static001.geekbang.org/account/avatar/00/12/09/b5/bbb93647.jpg","comment_is_top":false,"comment_ctime":1649664237,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1649664237","product_id":100047701,"comment_content":"æˆ‘çš„ç”µè„‘ç¬¬ä¸€ä¸ªä¾‹å­æ²¡æœ‰æŠ¥OOMï¼Œé˜Ÿåˆ—åˆ°äº†99999999ä¹‹åä¸€ç›´æ˜¯è¿™ä¸ªå€¼<br>2022-04-11 16:02:18.932  INFO 5822 --- [pool-4-thread-1] c.e.b.c.z.c.c.t.FixedThreadPoolError     : Pool Size: 1<br>2022-04-11 16:02:18.932  INFO 5822 --- [pool-4-thread-1] c.e.b.c.z.c.c.t.FixedThreadPoolError     : Active Threads: 1<br>2022-04-11 16:02:18.932  INFO 5822 --- [pool-4-thread-1] c.e.b.c.z.c.c.t.FixedThreadPoolError     : Number of Tasks Completed: 0<br>2022-04-11 16:02:18.932  INFO 5822 --- [pool-4-thread-1] c.e.b.c.z.c.c.t.FixedThreadPoolError     : Number of Tasks in Queue: 99999999<br>2022-04-11 16:02:18.932  INFO 5822 --- [pool-4-thread-1] c.e.b.c.z.c.c.t.FixedThreadPoolError     : =========================<br>2022-04-11 16:02:19.932  INFO 5822 --- [pool-4-thread-1] c.e.b.c.z.c.c.t.FixedThreadPoolError     : =========================<br>2022-04-11 16:02:19.933  INFO 5822 --- [pool-4-thread-1] c.e.b.c.z.c.c.t.FixedThreadPoolError     : Pool Size: 1<br>2022-04-11 16:02:19.933  INFO 5822 --- [pool-4-thread-1] c.e.b.c.z.c.c.t.FixedThreadPoolError     : Active Threads: 1<br>2022-04-11 16:02:19.934  INFO 5822 --- [pool-4-thread-1] c.e.b.c.z.c.c.t.FixedThreadPoolError     : Number of Tasks Completed: 0<br>2022-04-11 16:02:19.934  INFO 5822 --- [pool-4-thread-1] c.e.b.c.z.c.c.t.FixedThreadPoolError     : Number of Tasks in Queue: 99999999<br>","like_count":0},{"had_liked":false,"id":333636,"user_name":"ææ³½å½¬","can_delete":false,"product_type":"c1","uid":1047442,"ip_address":"","ucode":"F540DADF3AAD87","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fb/92/4de0c05c.jpg","comment_is_top":false,"comment_ctime":1644457174,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1644457174","product_id":100047701,"comment_content":"ç”¨äº†çº¿ç¨‹æ± ï¼Œè¿˜èƒ½å®ç°ä¼˜é›…å…³é—­ï¼Œå“åº”ä¸­æ–­","like_count":0},{"had_liked":false,"id":333053,"user_name":"JoJi","can_delete":false,"product_type":"c1","uid":2066986,"ip_address":"","ucode":"B88997A80E76AC","user_header":"https://static001.geekbang.org/account/avatar/00/1f/8a/2a/f94db4dc.jpg","comment_is_top":false,"comment_ctime":1644031168,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1644031168","product_id":100047701,"comment_content":"è€å¸ˆï¼Œæˆ‘çœ‹Eurekaçš„DiscoveryClient ä¹Ÿåœ¨ä½¿ç”¨Executors.newScheduledThreadPool,çº¿ç¨‹æ•°æ˜¯INTEGER.MAX,ä¸ºå•¥å°±æ²¡æ²¡å¬äººè¯´è¿‡æœ‰é—®é¢˜å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":331995,"user_name":"ç‹å°","can_delete":false,"product_type":"c1","uid":1382006,"ip_address":"","ucode":"03DDDB3FD20D5F","user_header":"https://static001.geekbang.org/account/avatar/00/15/16/76/f2422695.jpg","comment_is_top":false,"comment_ctime":1642951655,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1642951655","product_id":100047701,"comment_content":"è€å¸ˆ ä¸€èˆ¬æˆ‘ä»¬äº†è§£åˆ°çº¿ç¨‹çš„5ç§çŠ¶æ€éƒ½æ˜¯è·Ÿcpuè·å–æœ‰å…³ç³»ï¼Œé‚£å¯¹äºæ­£åœ¨è°ƒç”¨ioçš„çº¿ç¨‹æ˜¯ä¸æ˜¯æ²¡è·å–åˆ°cpuï¼Œä¹Ÿæ­£åœ¨æ‰§è¡Œï¼Ÿ","like_count":0},{"had_liked":false,"id":318165,"user_name":"æ­¦æ—ä¸‰","can_delete":false,"product_type":"c1","uid":2823633,"ip_address":"","ucode":"A597E89627D26C","user_header":"","comment_is_top":false,"comment_ctime":1635168657,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635168657","product_id":100047701,"comment_content":"è€å¸ˆçš„åˆ†äº«å¾ˆæ£’ï¼Œä½†æˆ‘æœ‰ä¸ªç–‘æƒ‘ï¼Œè¯¥å¦‚ä½•å°†è¿™äº›å®è´µçš„ç»éªŒæŒæ¡åº”ç”¨åˆ°å·¥ä½œä¸­å‘¢ï¼ŸCURDå¾ˆå¤šå¹´äº†","like_count":0},{"had_liked":false,"id":299774,"user_name":"BabyQ","can_delete":false,"product_type":"c1","uid":2670182,"ip_address":"","ucode":"23F4667010613F","user_header":"https://static001.geekbang.org/account/avatar/00/28/be/66/bdfe3784.jpg","comment_is_top":false,"comment_ctime":1624855113,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624855113","product_id":100047701,"comment_content":"<br>@GetMapping(&quot;wrong&quot;)<br>public String wrong() throws InterruptedException {<br>    ThreadPoolExecutor threadPool = ThreadPoolHelper.getThreadPool();<br>    IntStream.rangeClosed(1, 10).forEach(i -&gt; {<br>        threadPool.execute(() -&gt; {<br>            ...<br>            try {<br>                TimeUnit.SECONDS.sleep(1);<br>            } catch (InterruptedException e) {<br>            }<br>        });<br>    });<br>    return &quot;OK&quot;;<br>}<br>å¯¹äºä¸Šè¿°çš„æ¯æ¬¡è¯·æ±‚åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± ä¿®å¤åï¼Œæˆ‘æœ‰ä¸ªé—®é¢˜ï¼Œæ¯æ¬¡è¯·æ±‚ çº¿ç¨‹æ± å¤„ç†å®Œä»»åŠ¡åï¼Œå‡å¦‚è¦åœæ­¢æ•´ä¸ªç¨‹åºçš„è¯ï¼Œè¿™ä¸ªçº¿ç¨‹æ± æ˜¯æ€ä¹ˆå…³é—­å‘¢","like_count":0},{"had_liked":false,"id":298842,"user_name":"Geek6530","can_delete":false,"product_type":"c1","uid":2328982,"ip_address":"","ucode":"8A5E02A73BEF25","user_header":"","comment_is_top":false,"comment_ctime":1624343966,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1624343966","product_id":100047701,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œæˆ‘ç”¨æ‚¨ç¬¬ä¸€ä¸ªä¾‹å­çš„ä»£ç ï¼ˆå›ºå®šä¸º1çš„çº¿ç¨‹æ± ï¼‰ï¼Œæˆ‘è¿™è¾¹æ˜¯æ²¡æœ‰æŠ¥OOMå¼‚å¸¸çš„ã€‚æˆ‘ç†è§£çš„æ˜¯è¿™æ®µä»£ç åœ¨çŸ­æ—¶é—´å†…åªåˆ›å»ºäº†ä¸€ä¸ªå¤§çš„Stringå¯¹è±¡ï¼Œç„¶ååˆ›å»ºäº†1äº¿ä¸ªRunableå¯¹è±¡çš„å¼•ç”¨ï¼Œæ‰€ä»¥æ˜¯ä¸ä¼šæŠ¥OOMçš„ï¼Œä¸çŸ¥é“æˆ‘ç†è§£çš„æ˜¯å¦æ­£ç¡®ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1603004,"avatar":"https://static001.geekbang.org/account/avatar/00/18/75/bc/e24e181e.jpg","nickname":"Calvin","note":"","ucode":"0EEF5B207623B5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":403680,"discussion_content":"ä½ æŠŠå †å†…å­˜å¼„å°ç‚¹ï¼Œå¯ä»¥å¾ˆå¿«åˆ°è¾¾ä¸´ç•Œç‚¹ä»è€Œ OOMï¼Œæ¯”å¦‚ï¼š-Xms512m -Xmx512m","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634130489,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":294235,"user_name":"ææ–‡å¸Œ","can_delete":false,"product_type":"c1","uid":2361093,"ip_address":"","ucode":"F2E359B099C667","user_header":"https://static001.geekbang.org/account/avatar/00/24/07/05/cac1e09e.jpg","comment_is_top":false,"comment_ctime":1621843690,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621843690","product_id":100047701,"comment_content":"ä¸ºä»€ä¹ˆ60ç§’åè¾“å‡º17çš„æµç¨‹è§£æ:<br>1 åˆ›å»ºä¸€ä¸ªä»»åŠ¡, ä½¿ç”¨äº†ç¬¬1ä¸ªæ ¸å¿ƒçº¿ç¨‹,è¿˜æœ‰1ä¸ªæ ¸å¿ƒçº¿ç¨‹ç©ºé—²,å·¥ä½œé˜Ÿåˆ—é•¿åº¦ä¸º0<br>2 åˆ›å»ºä¸€ä¸ªä»»åŠ¡, ä½¿ç”¨äº†ç¬¬2ä¸ªæ ¸å¿ƒçº¿ç¨‹,æ²¡æœ‰æ ¸å¿ƒçº¿ç¨‹ç©ºé—²,å·¥ä½œé˜Ÿåˆ—é•¿åº¦ä¸º0<br>3 åˆ›å»ºä¸€ä¸ªä»»åŠ¡, æ²¡æœ‰æ ¸å¿ƒçº¿ç¨‹å¯ä»¥ä½¿ç”¨,å°†ä»»åŠ¡æ”¾å…¥åˆ°å·¥ä½œé˜Ÿåˆ—ä¸­,é•¿åº¦ä¸º1<br>4 åˆ›å»ºä¸€ä¸ªä»»åŠ¡, æ²¡æœ‰æ ¸å¿ƒçº¿ç¨‹å¯ä»¥ä½¿ç”¨,å°†ä»»åŠ¡æ”¾å…¥åˆ°å·¥ä½œé˜Ÿåˆ—ä¸­,é•¿åº¦ä¸º2<br>5 åˆ›å»ºä¸€ä¸ªä»»åŠ¡, æ²¡æœ‰æ ¸å¿ƒçº¿ç¨‹å¯ä»¥ä½¿ç”¨,å°†ä»»åŠ¡æ”¾å…¥åˆ°å·¥ä½œé˜Ÿåˆ—ä¸­,é•¿åº¦ä¸º3<br>6 åˆ›å»ºä¸€ä¸ªä»»åŠ¡, æ²¡æœ‰æ ¸å¿ƒçº¿ç¨‹å¯ä»¥ä½¿ç”¨,å°†ä»»åŠ¡æ”¾å…¥åˆ°å·¥ä½œé˜Ÿåˆ—ä¸­,é•¿åº¦ä¸º4<br>7 åˆ›å»ºä¸€ä¸ªä»»åŠ¡, æ²¡æœ‰æ ¸å¿ƒçº¿ç¨‹å¯ä»¥ä½¿ç”¨,å°†ä»»åŠ¡æ”¾å…¥åˆ°å·¥ä½œé˜Ÿåˆ—ä¸­,é•¿åº¦ä¸º5<br>8 åˆ›å»ºä¸€ä¸ªä»»åŠ¡, æ²¡æœ‰æ ¸å¿ƒçº¿ç¨‹å¯ä»¥ä½¿ç”¨,å°†ä»»åŠ¡æ”¾å…¥åˆ°å·¥ä½œé˜Ÿåˆ—ä¸­,é•¿åº¦ä¸º6<br>9 åˆ›å»ºä¸€ä¸ªä»»åŠ¡, æ²¡æœ‰æ ¸å¿ƒçº¿ç¨‹å¯ä»¥ä½¿ç”¨,å°†ä»»åŠ¡æ”¾å…¥åˆ°å·¥ä½œé˜Ÿåˆ—ä¸­,é•¿åº¦ä¸º7<br>10 åˆ›å»ºä¸€ä¸ªä»»åŠ¡, æ²¡æœ‰æ ¸å¿ƒçº¿ç¨‹å¯ä»¥ä½¿ç”¨,å°†ä»»åŠ¡æ”¾å…¥åˆ°å·¥ä½œé˜Ÿåˆ—ä¸­,é•¿åº¦ä¸º8<br>11 åˆ›å»ºä¸€ä¸ªä»»åŠ¡, ç¬¬1ä¸ªæ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œå®Œæ¯•,ä»å·¥ä½œé˜Ÿåˆ—ä¸­å–ä¸€ä¸ªä»»åŠ¡æ¥æ‰§è¡Œ,åˆšåˆ›å»ºçš„ä»»åŠ¡æ— æ ¸å¿ƒçº¿ç¨‹å¯ç”¨,å°†ä»»åŠ¡æ”¾å…¥åˆ°å·¥ä½œé˜Ÿåˆ—ä¸­,é•¿åº¦ä¸º8<br>12 åˆ›å»ºä¸€ä¸ªä»»åŠ¡, ç¬¬2ä¸ªæ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œå®Œæ¯•,ä»å·¥ä½œé˜Ÿåˆ—ä¸­å–ä¸€ä¸ªä»»åŠ¡æ¥æ‰§è¡Œ,åˆšåˆ›å»ºçš„ä»»åŠ¡æ— æ ¸å¿ƒçº¿ç¨‹å¯ç”¨,å°†ä»»åŠ¡æ”¾å…¥åˆ°å·¥ä½œé˜Ÿåˆ—ä¸­,é•¿åº¦ä¸º8<br>13 åˆ›å»ºä¸€ä¸ªä»»åŠ¡, æ²¡æœ‰æ ¸å¿ƒçº¿ç¨‹å¯ä»¥ä½¿ç”¨,å°†ä»»åŠ¡æ”¾å…¥åˆ°å·¥ä½œé˜Ÿåˆ—ä¸­,é•¿åº¦ä¸º9<br>14 åˆ›å»ºä¸€ä¸ªä»»åŠ¡, æ²¡æœ‰æ ¸å¿ƒçº¿ç¨‹å¯ä»¥ä½¿ç”¨,å°†ä»»åŠ¡æ”¾å…¥åˆ°å·¥ä½œé˜Ÿåˆ—ä¸­,é•¿åº¦ä¸º10<br>15 åˆ›å»ºä¸€ä¸ªä»»åŠ¡, æ²¡æœ‰æ ¸å¿ƒçº¿ç¨‹å¯ä»¥ä½¿ç”¨,å·¥ä½œé˜Ÿåˆ—é•¿åº¦è¾¾åˆ°æœ€å¤§å€¼,çº¿ç¨‹æ± çº¿ç¨‹æ•°åŠ 1,ç¬¬3ä¸ªçº¿ç¨‹ä»å·¥ä½œé˜Ÿåˆ—ä¸­å–ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œ,åŒæ—¶å°†è¯¥åˆ›å»ºçš„ä»»åŠ¡æ”¾å…¥å·¥ä½œé˜Ÿåˆ—ä¸­,å½“å‰é•¿åº¦ä¸º10<br>16 åˆ›å»ºä¸€ä¸ªä»»åŠ¡, æ²¡æœ‰æ ¸å¿ƒçº¿ç¨‹å¯ä»¥ä½¿ç”¨,å·¥ä½œé˜Ÿåˆ—é•¿åº¦è¾¾åˆ°æœ€å¤§å€¼,çº¿ç¨‹æ± çº¿ç¨‹æ•°åŠ 1,ç¬¬4ä¸ªçº¿ç¨‹ä»å·¥ä½œé˜Ÿåˆ—ä¸­å–ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œ,åŒæ—¶å°†è¯¥åˆ›å»ºçš„ä»»åŠ¡æ”¾å…¥å·¥ä½œé˜Ÿåˆ—ä¸­,å½“å‰é•¿åº¦ä¸º10<br>17 åˆ›å»ºä¸€ä¸ªä»»åŠ¡, æ²¡æœ‰æ ¸å¿ƒçº¿ç¨‹å¯ä»¥ä½¿ç”¨,å·¥ä½œé˜Ÿåˆ—é•¿åº¦è¾¾åˆ°æœ€å¤§å€¼,çº¿ç¨‹æ± çº¿ç¨‹æ•°åŠ 1,ç¬¬5ä¸ªçº¿ç¨‹ä»å·¥ä½œé˜Ÿåˆ—ä¸­å–ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œ,åŒæ—¶å°†è¯¥åˆ›å»ºçš„ä»»åŠ¡æ”¾å…¥å·¥ä½œé˜Ÿåˆ—ä¸­,å½“å‰é•¿åº¦ä¸º10<br>18 åˆ›å»ºä¸€ä¸ªä»»åŠ¡, æ²¡æœ‰æ ¸å¿ƒçº¿ç¨‹å¯ä»¥ä½¿ç”¨,å·¥ä½œé˜Ÿåˆ—é•¿åº¦è¾¾åˆ°æœ€å¤§å€¼,çº¿ç¨‹æ± çº¿ç¨‹æ•°è¾¾åˆ°æœ€å¤§å€¼,æŒ‰ç…§æ‹’ç»ç­–ç•¥,ç¬¬ä¸€æ¬¡æŠ›å‡ºå¼‚å¸¸<br>19 åˆ›å»ºä¸€ä¸ªä»»åŠ¡, æ²¡æœ‰æ ¸å¿ƒçº¿ç¨‹å¯ä»¥ä½¿ç”¨,å·¥ä½œé˜Ÿåˆ—é•¿åº¦è¾¾åˆ°æœ€å¤§å€¼,çº¿ç¨‹æ± çº¿ç¨‹æ•°è¾¾åˆ°æœ€å¤§å€¼,æŒ‰ç…§æ‹’ç»ç­–ç•¥,ç¬¬äºŒæ¬¡æŠ›å‡ºå¼‚å¸¸<br>20 åˆ›å»ºä¸€ä¸ªä»»åŠ¡, æ²¡æœ‰æ ¸å¿ƒçº¿ç¨‹å¯ä»¥ä½¿ç”¨,å·¥ä½œé˜Ÿåˆ—é•¿åº¦è¾¾åˆ°æœ€å¤§å€¼,çº¿ç¨‹æ± çº¿ç¨‹æ•°è¾¾åˆ°æœ€å¤§å€¼,æŒ‰ç…§æ‹’ç»ç­–ç•¥,ç¬¬ä¸‰æ¬¡æŠ›å‡ºå¼‚å¸¸","like_count":1},{"had_liked":false,"id":291452,"user_name":"Tom","can_delete":false,"product_type":"c1","uid":1908926,"ip_address":"","ucode":"0BA98E780BB34C","user_header":"https://static001.geekbang.org/account/avatar/00/1d/20/be/bf6a570f.jpg","comment_is_top":false,"comment_ctime":1620292138,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1620292138","product_id":100047701,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œè¯·é—®çº¿ç¨‹æ± ä¸­çš„corePoolSizeï¼ŒmaxPoolSizï¼Œä»¥åŠé˜Ÿåˆ—é•¿åº¦å‚æ•°ï¼Œæœ‰ä»€ä¹ˆé€šç”¨çš„è®¾ç½®ç­–ç•¥å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":285380,"user_name":"JoJi","can_delete":false,"product_type":"c1","uid":2066986,"ip_address":"","ucode":"B88997A80E76AC","user_header":"https://static001.geekbang.org/account/avatar/00/1f/8a/2a/f94db4dc.jpg","comment_is_top":false,"comment_ctime":1616763814,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616763814","product_id":100047701,"comment_content":"è€å¸ˆï¼Œç¬¬ä¸€ä¸ªä¾‹å­æ¯æ¬¡åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± ï¼Œç”¨å®Œè¿‡åå…³é—­è¿™ç§æ€•æ˜¯æ§åˆ¶ä¸ä½çº¿ç¨‹æ•°å§(æˆ‘ä»¬é¡¹ç›®æœ‰è¿™ç§..)ã€‚ ä»¥å•ä¾‹çš„æ¨¡å¼ä½¿ç”¨çº¿ç¨‹æ± ï¼Œæ˜¯ä¸æ˜¯æ›´å¥½ä¸€äº›ï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":258562,"user_name":"JoJi","can_delete":false,"product_type":"c1","uid":2066986,"ip_address":"","ucode":"B88997A80E76AC","user_header":"https://static001.geekbang.org/account/avatar/00/1f/8a/2a/f94db4dc.jpg","comment_is_top":false,"comment_ctime":1604483798,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1604483798","product_id":100047701,"comment_content":"è€å¸ˆï¼Œçº¿ç¨‹æ± æ˜¯ä¸æ˜¯æ²¡æœ‰é’ˆå¯¹çº¿ç¨‹çš„ç»ˆæ­¢æ–¹æ³•å‘€?æƒ³å®ç°çº¿ç¨‹æ± æ‰§è¡Œä¸€æ‰¹ä»»åŠ¡ï¼Œè¿™æ‰¹ä»»åŠ¡è¶…æ—¶åå¼ºåˆ¶å…³é—­è¿˜åœ¨æ‰§è¡Œçš„çº¿ç¨‹ã€‚","like_count":0},{"had_liked":false,"id":255061,"user_name":"guanineğŸ€","can_delete":false,"product_type":"c1","uid":2251446,"ip_address":"","ucode":"8AFDD724F77C99","user_header":"https://static001.geekbang.org/account/avatar/00/22/5a/b6/abf52ebe.jpg","comment_is_top":false,"comment_ctime":1603261527,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603261527","product_id":100047701,"comment_content":"å¯ä»¥è®¾ç½®å±æ€§ï¼ŒallowCoreThreadTimeOutä¸ºtrue","like_count":0},{"had_liked":false,"id":250774,"user_name":"åœŸåœŸåœŸâ€","can_delete":false,"product_type":"c1","uid":1120794,"ip_address":"","ucode":"31D42CD027E108","user_header":"https://static001.geekbang.org/account/avatar/00/11/1a/1a/3afd1b46.jpg","comment_is_top":false,"comment_ctime":1601215457,"is_pvip":false,"replies":[{"id":"91769","content":"n+1çš„æ„æ€æ˜¯é™åˆ¶è¿‡å¤šçš„çº¿ç¨‹ï¼Œå¤šäº†æ²¡æ„ä¹‰","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1601258747,"ip_address":"","comment_id":250774,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1601215457","product_id":100047701,"comment_content":"æœ‰ä¸€ç‚¹æ²¡æ˜ç™½ï¼Œcpuè®¡ç®—å‹ä»»åŠ¡æ ¸å¿ƒçº¿ç¨‹å»ºè®®n+1ã€‚cpuåªæœ‰4æ ¸ï¼Œé‚£ä¹ˆæˆ‘é¡¹ç›®çº¿ç¨‹æ± æœ‰å¥½å¤šä¸ªn+1çš„ã€‚å¹¶ä¸”åŒæ—¶æ‰§è¡Œï¼Œé‚£ä¹ˆ4æ ¸cpuéœ€è¦ä¸æ–­åˆ‡æ¢ï¼Œè¿™æ ·æ•ˆç‡ä¸é«˜å§ã€‚è¿˜æ˜¯è¯´æˆ‘é¡¹ç›®åªèƒ½æœ‰ä¸€ä¸ªm+1çš„çº¿ç¨‹æ± ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506280,"discussion_content":"n+1çš„æ„æ€æ˜¯é™åˆ¶è¿‡å¤šçš„çº¿ç¨‹ï¼Œå¤šäº†æ²¡æ„ä¹‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601258747,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":246091,"user_name":"è¡Œåˆ™å°†è‡³","can_delete":false,"product_type":"c1","uid":1542987,"ip_address":"","ucode":"DB972F2DF059C4","user_header":"https://static001.geekbang.org/account/avatar/00/17/8b/4b/fa52d222.jpg","comment_is_top":false,"comment_ctime":1599177211,"is_pvip":false,"replies":[{"id":"90457","content":"å¤ªå°å¼¹æ€§ä¸å¤Ÿï¼Œå¤ªå¤§ä¸¢å¤±æ•°æ®æŸå¤±å°±å¤§ï¼Œçœ‹æ•°æ®ç±»å‹ã€å¹¶å‘ç­‰","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1599196314,"ip_address":"","comment_id":246091,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1599177211","product_id":100047701,"comment_content":"è€å¸ˆï¼Œçº¿ç¨‹æ± çš„é˜Ÿåˆ—å¤§å°å¦‚ä½•ç¡®å®šï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505059,"discussion_content":"å¤ªå°å¼¹æ€§ä¸å¤Ÿï¼Œå¤ªå¤§ä¸¢å¤±æ•°æ®æŸå¤±å°±å¤§ï¼Œçœ‹æ•°æ®ç±»å‹ã€å¹¶å‘ç­‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599196314,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244816,"user_name":"å¤§ç‹","can_delete":false,"product_type":"c1","uid":2104710,"ip_address":"","ucode":"866B3A9913237D","user_header":"https://static001.geekbang.org/account/avatar/00/20/1d/86/ce0c9c17.jpg","comment_is_top":false,"comment_ctime":1598689616,"is_pvip":false,"replies":[{"id":"90088","content":"å‹æµ‹çš„è¿˜æ˜¯å•æ¬¡æµ‹è¯•","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1598705537,"ip_address":"","comment_id":244816,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1598689616","product_id":100047701,"comment_content":"    è€å¸ˆï¼Œæœ€è¿‘é‡åˆ°ä¸€ä¸ªå‘ï¼ŒSpring booté¡¹ç›®ï¼ŒJPAè®¿é—®Oracleã€‚æŸ¥è¯¢å”¯ä¸€é”®ï¼Œ<br>    ç¬¬äºŒç§æ¯”ç¬¬ä¸€ç§é€Ÿåº¦å¿«10å€ï¼Œä¸Šé¢æ˜¯24msï¼Œä¸‹é¢é‚£ä¸ªåªè¦2msï¼Œä¸çŸ¥é“ä»€ä¹ˆå›äº‹ï¼Œ<br>   æµ‹è¯•ç¯å¢ƒåœ¨æ²¡æœ‰åˆ«çš„è®¿é—®æƒ…å†µä¸‹ï¼Œä¹Ÿå¤ç°äº†è¿™ä¸ªé—®é¢˜ï¼Œ<br>    ä¸€ä¸ªä½¿ç”¨tomcat æ± çš„çº¿ç¨‹ï¼Œä¸€ä¸ªæ˜¯ä½¿ç”¨jdkçº¿ç¨‹è€Œå·²ï¼Œè€å¸ˆèƒ½çŸ¥é“è¿™ä¸ªè¯¡å¼‚é—®é¢˜çš„åŸå› å—ï¼Ÿ<br>    @PostMapping(&quot;&#47;cal_account2&quot;)<br>    public String calAccount2() {<br>        StopWatch stopWatch = new StopWatch();<br>        stopWatch.start();<br>        AccountInfo accountInfo = new AccountInfo();<br>        accountInfo.setAccountId(&quot;351819670792110080&quot;);<br>        accountService.getAccountInfo(accountInfo);<br>        stopWatch.stop();<br>        log.info(&quot;http&quot;, stopWatch.prettyPrint());<br>        return &quot;æ“ä½œæˆåŠŸ&quot;;<br>    }<br><br>    @PostMapping(&quot;&#47;cal_account3&quot;)<br>    public String calAccount3() {<br>        asyncCallThreadPool.execute(() -&gt; {<br>            StopWatch stopWatch = new StopWatch();<br>            stopWatch.start();<br>            AccountInfo accountInfo = new AccountInfo();<br>            accountInfo.setAccountId(&quot;351819670792110080&quot;);<br>            accountService.getAccountInfo(accountInfo);<br>            stopWatch.stop();<br>            log.info(&quot;async&quot;, stopWatch.prettyPrint());<br>        });<br>        return &quot;æ“ä½œæˆåŠŸ&quot;;<br>    }","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504708,"discussion_content":"å‹æµ‹çš„è¿˜æ˜¯å•æ¬¡æµ‹è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598705537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2104710,"avatar":"https://static001.geekbang.org/account/avatar/00/20/1d/86/ce0c9c17.jpg","nickname":"å¤§ç‹","note":"","ucode":"866B3A9913237D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301907,"discussion_content":"æ—¥å¿—æ˜¯åŒæ­¥çš„ï¼Œè¿™ä¸ªæ—¶é—´æ˜¯stopwatch,ä»¥åŠæ‰“å°sqlé¡ºåºæ—¶é—´åˆ†æéƒ½ä¸€æ ·çš„ï¼Œç½‘ç»œæµé‡çš„æ˜æ˜¾http-nioçº¿ç¨‹çš„æµé‡å°ä¸€äº›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598706515,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2104710,"avatar":"https://static001.geekbang.org/account/avatar/00/20/1d/86/ce0c9c17.jpg","nickname":"å¤§ç‹","note":"","ucode":"866B3A9913237D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301905,"discussion_content":"å•æ¬¡æµ‹è¯•ï¼Œæ¯æ¬¡æµ‹è¯•éƒ½æ˜¯è¿™æ ·ï¼Œé—®é¢˜èµ·æºäºç”Ÿäº§ç¯å¢ƒä»¥å‰æ˜¯å®šæ—¶è·‘è¯•ç®—ä»»åŠ¡ï¼Œåé¢å› ä¸ºä¸Šä¸‹æ¸¸ç³»ç»Ÿå‡çº§ï¼Œéœ€è¦æŸä¸€ä¸ªæ—¶åˆ»æ‰‹åŠ¨å‘èµ·ï¼Œå°±å†…éƒ¨curlæ–¹å¼è°ƒå®šæ—¶ä»»åŠ¡ä»£ç ï¼Œä»£ç ä¸€æ ·ï¼Œå•çº¿ç¨‹çš„ï¼Œåªæ˜¯ä¸€ä¸ªtomcatçº¿ç¨‹ï¼Œå¾ˆæ…¢æ‰§è¡Œèµ·æ¥ï¼Œä½†éƒ½åœ¨æ‰§è¡Œï¼Œåªæ˜¯è¯»å–æ•°æ®åº“æ“ä½œioéƒ½å¾ˆæ…¢ï¼Œä»¥å‰quarzeçš„å®šæ—¶ä»»åŠ¡å°±å¾ˆå¿«ï¼Œæ‰€ä»¥å¾ˆå¥‡æ€ªï¼Œéƒ½æ˜¯çº¿ç¨‹ä¸å­˜åœ¨æœ‰å¿«æ…¢ä¹‹åˆ†ï¼Œæ²¡æœ‰å•¥æ€è·¯äº†ï¼Œè€Œä¸”æ˜¯åˆ«çš„ä¸Šæ¸¸åœæœæ“ä½œï¼Œæ²¡æœ‰ä»»ä½•æµé‡ï¼Œæ‰€ä»¥å¾ˆå¥‡æ€ªï¼Œæ‰¾ä¸åˆ°å•¥æ€è·¯äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598706220,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243448,"user_name":"é˜¿å½¬","can_delete":false,"product_type":"c1","uid":2019590,"ip_address":"","ucode":"A5A341C625000A","user_header":"https://static001.geekbang.org/account/avatar/00/1e/d1/06/2ebe1586.jpg","comment_is_top":false,"comment_ctime":1598111916,"is_pvip":false,"replies":[{"id":"89716","content":"è¿™å’Œä»€ä¹ˆç±»å‹çš„çº¿ç¨‹æ± æ²¡å…³ç³» å¦‚æœä½ æ— é™ç”³è¯·newsinglethreadexecutoræ€»æ˜¯æœ‰é—®é¢˜çš„ å°±çœ‹æ˜¯ä¸æ˜¯æ­£ç¡®ä½¿ç”¨èµ„æº","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1598164669,"ip_address":"","comment_id":243448,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1598111916","product_id":100047701,"comment_content":"å¤§ä½¬ï¼Œnewsinglethreadexecutor ä¼šoomå—","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504289,"discussion_content":"è¿™å’Œä»€ä¹ˆç±»å‹çš„çº¿ç¨‹æ± æ²¡å…³ç³» å¦‚æœä½ æ— é™ç”³è¯·newsinglethreadexecutoræ€»æ˜¯æœ‰é—®é¢˜çš„ å°±çœ‹æ˜¯ä¸æ˜¯æ­£ç¡®ä½¿ç”¨èµ„æº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598164669,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":239774,"user_name":"Geek_b70da7","can_delete":false,"product_type":"c1","uid":2062505,"ip_address":"","ucode":"BA81153E36FEA1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/06icm3r7fRGSjdEYGIWIx4VV5ibkKibzvlaJ08ibBXyzRoricX93YmvJvvsurahgCNics6Rt5cGqxMSh24KxMJ3RjNmA/132","comment_is_top":false,"comment_ctime":1596638985,"is_pvip":false,"replies":[{"id":"88561","content":"å››æ ¸200æœ‰ç‚¹å¤šäº†","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1596673784,"ip_address":"","comment_id":239774,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1596638985","product_id":100047701,"comment_content":"Tps75å‡åˆ°1727é‚£ä¸ªæ¡ˆä¾‹ï¼Œç”Ÿäº§ç¯å¢ƒä»»åŠ¡èƒ½è®¾ç½®æ ¸å¿ƒçº¿ç¨‹200ä¹ˆï¼Œçº¿ä¸Šç¯å¢ƒcpu4æ ¸ï¼Œä»»åŠ¡æ˜¯ioå¯†é›†å‹","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503215,"discussion_content":"å››æ ¸200æœ‰ç‚¹å¤šäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596673784,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":238827,"user_name":"Michael","can_delete":false,"product_type":"c1","uid":1274787,"ip_address":"","ucode":"C233DF1D224EC1","user_header":"https://static001.geekbang.org/account/avatar/00/13/73/a3/2b077607.jpg","comment_is_top":false,"comment_ctime":1596335247,"is_pvip":true,"replies":[{"id":"88206","content":"å®ç°è‡ªå®šä¹‰çš„Runnableç±»ï¼ŒRejectedExecutionHandleré‡Œé¢å¼ºåˆ¶è½¬æ¢ä¸€ä¸‹Runnableå‚æ•°","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1596346359,"ip_address":"","comment_id":238827,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1596335247","product_id":100047701,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼<br>æˆ‘æœ‰ä¸€ä¸ªé—®é¢˜ï¼š<br>ä¸€ä¸ªç”¨æˆ·å‘ç”Ÿäº¤æ˜“ï¼Œç»™ç”¨æˆ·ä¸‹ç²‰ä¸ç”¨æˆ·å‘æé†’ï¼Œä½¿ç”¨å¤šçº¿ç¨‹å¾ªç¯è¯¥ç²‰ä¸åˆ—è¡¨ï¼Œè°ƒç”¨å¼‚æ­¥æ¥å£å‘é€æ¶ˆæ¯ç›’å­ã€‚<br>ç›®å‰çº¿ç¨‹æ± æ‹’ç»ç­–ç•¥ä½¿ç”¨ä¸¢å¼ƒï¼Œé˜Ÿåˆ—å¤§å°æ˜¯512ï¼Œå‘ç°ç°åœ¨äº¤æ˜“é‡ä¸Šæ¥äº†ï¼Œç”¨æˆ·åˆ—è¡¨ç”±åŸæ¥çš„å‡ åä¸ç­‰åˆ°äº†è¿‘ä¸‡ï¼Œè‹¥å¹²ä¸ªç”¨æˆ·åŒæ—¶è¿›æ¥äº¤æ˜“ï¼Œç²‰ä¸é‡å¯èƒ½ä¸€ä¸‹å­ä¼šè¾¾åˆ°30000+ï¼Œå°±å‡ºç°äº†è¶…å‡ºé˜Ÿåˆ—å¤§å°è€Œä¸¢å¼ƒå‘é€ä»»åŠ¡çš„æƒ…å†µã€‚ æ´»åŠ¨ç«çˆ†ï¼Œç²‰ä¸æ•°ç°åœ¨ä¸å¥½è¯„ä¼°ï¼Œé˜Ÿåˆ—å¤§å°è®¾ç½®å¤šå°‘åˆé€‚ä¸çŸ¥ã€‚<br>æƒ³è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥ï¼Œæ‹’ç»æ—¶æ‹¿åˆ°å¤±è´¥æƒ…å†µçš„ä¸šåŠ¡å‚æ•°ç¼“å­˜ä¸‹æ¥ï¼Œè¡¥å‘æ¶ˆæ¯ï¼Œå¦‚ä½•åœ¨è‡ªå®šä¹‰çš„æ‹’ç»ç­–ç•¥é‡Œé¢æ‹¿åˆ°ä¸šåŠ¡å‚æ•°ï¼Ÿå®ç°è‡ªå®šä¹‰ç­–ç•¥æ–¹æ³•ä¸­æ‹¿åˆ°çš„å‚æ•°æ˜¯runnableå’ŒExecutorï¼Œè¿™ä¸¤ä¸ªå‚æ•°å¦‚ä½•æ‹¿åˆ°ä¸šåŠ¡å‚æ•°ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502866,"discussion_content":"å®ç°è‡ªå®šä¹‰çš„Runnableç±»ï¼ŒRejectedExecutionHandleré‡Œé¢å¼ºåˆ¶è½¬æ¢ä¸€ä¸‹Runnableå‚æ•°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596346359,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2251446,"avatar":"https://static001.geekbang.org/account/avatar/00/22/5a/b6/abf52ebe.jpg","nickname":"guanineğŸ€","note":"","ucode":"8AFDD724F77C99","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":315307,"discussion_content":"å¦‚æœä¸éœ€è¦å¾ˆå®æ—¶çš„æ¶ˆæ¯é€šçŸ¥ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥è€ƒè™‘ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—å‰Šå³°çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603262158,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":238750,"user_name":"Michael","can_delete":false,"product_type":"c1","uid":1274787,"ip_address":"","ucode":"C233DF1D224EC1","user_header":"https://static001.geekbang.org/account/avatar/00/13/73/a3/2b077607.jpg","comment_is_top":false,"comment_ctime":1596281041,"is_pvip":true,"replies":[{"id":"88197","content":"æ„é€ æ–¹æ³•è¿˜æ˜¯setteræ–¹æ³•åˆå§‹åŒ–éƒ½å¯ä»¥","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1596334197,"ip_address":"","comment_id":238750,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1596281041","product_id":100047701,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼<br>çº¿ç¨‹æ± çš„å¼€è¾Ÿåˆ°åº•ä½¿ç”¨æ„é€ æ–¹æ³•å¼€å¯è¿˜æ˜¯é…ç½®ç±»å¼€å¯<br>private static ThreadPoolExecutor asyncCalcThreadPool = new ThreadPoolExecutor( 200, 200, 1, TimeUnit.HOURS, new ArrayBlockingQueue&lt;&gt;(1000), new ThreadFactoryBuilder().setNameFormat(&quot;asynccalc-threadpool-%d&quot;).get());<br><br>    @Bean(&quot;feedExecutor&quot;)<br>    public Executor feedExecutor() {<br>        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();<br>        executor.setCorePoolSize(8);<br>        executor.setMaxPoolSize(20);<br>        executor.setQueueCapacity(1000);<br>        executor.setKeepAliveSeconds(100);<br>        executor.setThreadNamePrefix(&quot;feed-executor-&quot;);<br>        executor.setRejectedExecutionHandler(new ThreadPoolExecutor.CallerRunsPolicy());<br>        return executor;<br>    }","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502843,"discussion_content":"æ„é€ æ–¹æ³•è¿˜æ˜¯setteræ–¹æ³•åˆå§‹åŒ–éƒ½å¯ä»¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596334197,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":236147,"user_name":"tongmin_tsai","can_delete":false,"product_type":"c1","uid":1045090,"ip_address":"","ucode":"D9423E770D5846","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f2/62/f873cd8f.jpg","comment_is_top":false,"comment_ctime":1595328543,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595328543","product_id":100047701,"comment_content":"è€å¸ˆï¼Œèƒ½åˆ†äº«ä¸€ä¸‹æœ€ä½³å®æˆ˜å—ï¼Ÿæ¯”å¦‚çº¿ç¨‹ï¼Œçº¿ç¨‹æ± çš„ä¼˜é›…å…³é—­","like_count":0},{"had_liked":false,"id":235468,"user_name":"Better me","can_delete":false,"product_type":"c1","uid":1261959,"ip_address":"","ucode":"CADF08D357489A","user_header":"https://static001.geekbang.org/account/avatar/00/13/41/87/46d7e1c2.jpg","comment_is_top":false,"comment_ctime":1595048896,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"1595048896","product_id":100047701,"comment_content":"å£°æ˜çº¿ç¨‹æ± åç«‹å³è°ƒç”¨ prestartAllCoreThreads æ–¹æ³•ï¼Œæ¥å¯åŠ¨æ‰€æœ‰æ ¸å¿ƒçº¿ç¨‹ï¼›<br>ä¼ å…¥ true ç»™ allowCoreThreadTimeOut æ–¹æ³•ï¼Œæ¥è®©çº¿ç¨‹æ± åœ¨ç©ºé—²çš„æ—¶å€™åŒæ ·å›æ”¶æ ¸å¿ƒçº¿ç¨‹ã€‚<br><br>è€å¸ˆåœ¨æ–‡ä¸­è¯´çš„è¿™ä¸¤ç‚¹ä¸€èµ·ä½¿ç”¨ä¼šä¸ä¼šæœ‰å†²çªï¼Œæ¯”å¦‚åˆšå¼€å§‹åˆå§‹åŒ–å¥½çš„æ ¸å¿ƒçº¿ç¨‹åˆè¢«å›æ”¶äº†","like_count":0,"discussions":[{"author":{"id":1488356,"avatar":"https://static001.geekbang.org/account/avatar/00/16/b5/e4/e6faf686.jpg","nickname":"æ¡äº†ä¸ªå¤§èš‚èš±","note":"","ucode":"AD34AD4FA37371","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339952,"discussion_content":"è›¤è›¤ï¼Œä½ å¾ˆæœ‰æ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609847775,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1261959,"avatar":"https://static001.geekbang.org/account/avatar/00/13/41/87/46d7e1c2.jpg","nickname":"Better me","note":"","ucode":"CADF08D357489A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1488356,"avatar":"https://static001.geekbang.org/account/avatar/00/16/b5/e4/e6faf686.jpg","nickname":"æ¡äº†ä¸ªå¤§èš‚èš±","note":"","ucode":"AD34AD4FA37371","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339964,"discussion_content":"å“ˆå“ˆå¯ä»¥ä¸€èµ·äº¤æµğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609850343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":339952,"ip_address":""},"score":339964,"extra":""}]}]},{"had_liked":false,"id":230080,"user_name":"Xcode","can_delete":false,"product_type":"c1","uid":1983768,"ip_address":"","ucode":"1CFE859EEA4928","user_header":"https://static001.geekbang.org/account/avatar/00/1e/45/18/a29b1fa3.jpg","comment_is_top":false,"comment_ctime":1593253149,"is_pvip":false,"replies":[{"id":"84914","content":"è‚¯å®šçš„","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1593262900,"ip_address":"","comment_id":230080,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1593253149","product_id":100047701,"comment_content":"å¦‚æœæ¯ä¸ªè¯·æ±‚éƒ½åœ¨serviceé‡Œ newä¸€ä¸ªçº¿ç¨‹æ± ï¼Œå¹¶å‘æƒ…å†µä¸‹çº¿ç¨‹æ± æ˜¯ä¸æ˜¯åˆ›å»ºå¤ªå¤šäº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499755,"discussion_content":"è‚¯å®šçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593262900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226037,"user_name":"The One","can_delete":false,"product_type":"c1","uid":1319368,"ip_address":"","ucode":"D3438E31543332","user_header":"https://static001.geekbang.org/account/avatar/00/14/21/c8/33828cfc.jpg","comment_is_top":false,"comment_ctime":1591933431,"is_pvip":true,"replies":[{"id":"83279","content":"1. å¦‚æœä½ å¤„ç†ä»»åŠ¡çš„æ—¶å€™å“åº”äº†InterruptedExceptioné‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹å°±åºŸäº†é‡æ–°èµ·ä¸€ä¸ªçº¿ç¨‹<br>2. æ™®é€šçš„ä¸šåŠ¡é€»è¾‘ä¸å¤ªå»ºè®®é€šè¿‡future.cancel(true) +  çº¿ç¨‹çš„ä¸­æ–­æœºåˆ¶æ¥åšè¿™äº›å¤„ç†ï¼Œå»ºè®®è¿˜æ˜¯æ¯ä¸ªä»»åŠ¡è‡ªå·±åœ¨ä»»åŠ¡å¤„ç†çš„é—´éš™ï¼ˆæ¯”å¦‚å¾ªç¯ä¸­ï¼‰é€šè¿‡å¤–éƒ¨çŠ¶æ€ä½åˆ¤æ–­ä»»åŠ¡æ˜¯å¦éœ€è¦ç»§ç»­æ‰§è¡Œï¼Œä¸éœ€è¦çš„è¯å°±æå‰ç»“æŸ<br>3. åªè¿”å›ä¸€ä¸ªFutureå¯ä»¥ä½¿ç”¨ CompletableFuture.anyOf()æ¥å®Œæˆï¼Œç»“åˆæˆ‘ç¬¬äºŒç‚¹è¯´çš„ä»»åŠ¡é‡Œè‡ªå·±åˆ¤æ–­çŠ¶æ€å†³å®šæ˜¯å¦è¦ç»§ç»­æ‰§è¡Œå…¶å®ƒä»»åŠ¡æ¥å®ç°<br>4. å¦‚æœä½ çš„ä»»åŠ¡ä¸åˆ†é˜¶æ®µï¼Œä¹Ÿä¸æ¶‰åŠInterruptedExceptionï¼Œé‚£ä¹ˆæ‰§è¡Œäº†ç¡®å®å°±æ— æ³•ä¸­æ–­","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1591946090,"ip_address":"","comment_id":226037,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591933431","product_id":100047701,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œè¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œçº¿ç¨‹æ±  æ‰§è¡Œä»»åŠ¡ï¼Œé€šè¿‡æŒæœ‰çš„Future cancelä»»åŠ¡ä¹‹åï¼Œçº¿ç¨‹æ± é‡Œé¢æ‰§è¡Œè¯¥ä»»åŠ¡çš„çº¿ç¨‹çŠ¶æ€å¦‚ä½•ï¼Ÿè¿˜èƒ½è¢«å¤ç”¨ å—ï¼Ÿæ„Ÿè°¢<br>éœ€æ±‚æ˜¯è¿™æ ·ï¼ŒA.B.Cä¸‰ä¸ªä»»åŠ¡äº¤ç»™çº¿ç¨‹æ± æ‰§è¡Œï¼Œåªè¦æœ‰ä¸€ä¸ªè¿”å›æˆ‘å°±çŸ¥é“ç»“æœè¿”ç»™å‰ç«¯ï¼Œè¿™æ—¶å€™éœ€è¦ä¸­æ­¢å…¶ä½™çš„ä»»åŠ¡ï¼Œè°ƒç”¨cancelä¹‹åï¼Œçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹çŠ¶æ€ä¼šå¦‚ä½•ï¼Ÿé’ˆå¯¹è¿™ä¸ªéœ€æ±‚è¿˜æœ‰æ›´å¥½çš„å®ç°æ–¹å¼å—ï¼Ÿæ„Ÿè°¢","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498087,"discussion_content":"1. å¦‚æœä½ å¤„ç†ä»»åŠ¡çš„æ—¶å€™å“åº”äº†InterruptedExceptioné‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹å°±åºŸäº†é‡æ–°èµ·ä¸€ä¸ªçº¿ç¨‹\n2. æ™®é€šçš„ä¸šåŠ¡é€»è¾‘ä¸å¤ªå»ºè®®é€šè¿‡future.cancel(true) +  çº¿ç¨‹çš„ä¸­æ–­æœºåˆ¶æ¥åšè¿™äº›å¤„ç†ï¼Œå»ºè®®è¿˜æ˜¯æ¯ä¸ªä»»åŠ¡è‡ªå·±åœ¨ä»»åŠ¡å¤„ç†çš„é—´éš™ï¼ˆæ¯”å¦‚å¾ªç¯ä¸­ï¼‰é€šè¿‡å¤–éƒ¨çŠ¶æ€ä½åˆ¤æ–­ä»»åŠ¡æ˜¯å¦éœ€è¦ç»§ç»­æ‰§è¡Œï¼Œä¸éœ€è¦çš„è¯å°±æå‰ç»“æŸ\n3. åªè¿”å›ä¸€ä¸ªFutureå¯ä»¥ä½¿ç”¨ CompletableFuture.anyOf()æ¥å®Œæˆï¼Œç»“åˆæˆ‘ç¬¬äºŒç‚¹è¯´çš„ä»»åŠ¡é‡Œè‡ªå·±åˆ¤æ–­çŠ¶æ€å†³å®šæ˜¯å¦è¦ç»§ç»­æ‰§è¡Œå…¶å®ƒä»»åŠ¡æ¥å®ç°\n4. å¦‚æœä½ çš„ä»»åŠ¡ä¸åˆ†é˜¶æ®µï¼Œä¹Ÿä¸æ¶‰åŠInterruptedExceptionï¼Œé‚£ä¹ˆæ‰§è¡Œäº†ç¡®å®å°±æ— æ³•ä¸­æ–­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591946090,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225577,"user_name":"Tokiomi","can_delete":false,"product_type":"c1","uid":1632052,"ip_address":"","ucode":"E2C0A59D1B1D4F","user_header":"https://static001.geekbang.org/account/avatar/00/18/e7/34/66289bd6.jpg","comment_is_top":false,"comment_ctime":1591793209,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591793209","product_id":100047701,"comment_content":"å­¦åˆ°äº†å¥½å¤šå·¥å…·ç±»ã€‚ã€‚","like_count":0},{"had_liked":false,"id":224888,"user_name":"VIC","can_delete":false,"product_type":"c1","uid":1114064,"ip_address":"","ucode":"3B3E6D344488B2","user_header":"https://static001.geekbang.org/account/avatar/00/10/ff/d0/402be1e9.jpg","comment_is_top":false,"comment_ctime":1591583461,"is_pvip":false,"replies":[{"id":"82782","content":"åˆ¤æ–­å¯ä»¥ä½¿ç”¨isDone()ï¼ŒæŠ¥é”™è¯´æ˜ä»»åŠ¡å¯èƒ½ä¸­æ–­ã€å‡ºé”™æˆ–å–æ¶ˆäº†","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1591607298,"ip_address":"","comment_id":224888,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591583461","product_id":100047701,"comment_content":"æ€ä¹ˆåˆ¤æ–­ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Ÿfuture.getæŠ¥é”™","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497646,"discussion_content":"åˆ¤æ–­å¯ä»¥ä½¿ç”¨isDone()ï¼ŒæŠ¥é”™è¯´æ˜ä»»åŠ¡å¯èƒ½ä¸­æ–­ã€å‡ºé”™æˆ–å–æ¶ˆäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591607298,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224858,"user_name":"VIC","can_delete":false,"product_type":"c1","uid":1114064,"ip_address":"","ucode":"3B3E6D344488B2","user_header":"https://static001.geekbang.org/account/avatar/00/10/ff/d0/402be1e9.jpg","comment_is_top":false,"comment_ctime":1591577744,"is_pvip":false,"replies":[{"id":"82762","content":"é€šè¿‡Futureæ‹¿ä»»åŠ¡ç»“æœï¼ˆè‡ªå·±ä¿å­˜Futureçš„Listï¼‰ï¼Œä¸éœ€è¦é€šè¿‡çº¿ç¨‹æ± æ¥åŒºåˆ†","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1591580725,"ip_address":"","comment_id":224858,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1591577744","product_id":100047701,"comment_content":"æˆ‘ä»¬çš„ä»£ç æ²¡æœ‰å¤ç”¨çº¿ç¨‹æ± ã€‚æäº¤çš„ä»»åŠ¡ï¼Œè¦ç­‰å¾…å¤„ç†ç»“æŸæ‹¿åˆ°ç»“æœã€‚ä¸Šæ¬¡æçš„ä»»åŠ¡å’Œä¸‹æ¬¡æäº¤çš„ä»»åŠ¡ï¼Œæ€ä¹ˆåˆ†å‡ºæ¥","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497633,"discussion_content":"é€šè¿‡Futureæ‹¿ä»»åŠ¡ç»“æœï¼ˆè‡ªå·±ä¿å­˜Futureçš„Listï¼‰ï¼Œä¸éœ€è¦é€šè¿‡çº¿ç¨‹æ± æ¥åŒºåˆ†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591580725,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1114064,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ff/d0/402be1e9.jpg","nickname":"VIC","note":"","ucode":"3B3E6D344488B2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293007,"discussion_content":"è€å¸ˆï¼Œèƒ½åŠ å¾®ä¿¡å—ï¼Ÿnyzfl123","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595410761,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1114064,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ff/d0/402be1e9.jpg","nickname":"VIC","note":"","ucode":"3B3E6D344488B2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293004,"discussion_content":"å¤ç”¨çº¿ç¨‹æ± ï¼Œä¸€ç›´ä¸å…³é—­å—ï¼Ÿ\né‡åˆ°çš„é—®é¢˜æ˜¯çº¿ç¨‹è·‘çš„è¶Šæ¥è¶Šæ…¢ï¼Œæ€ä¹ˆæ•´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595410113,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1114064,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ff/d0/402be1e9.jpg","nickname":"VIC","note":"","ucode":"3B3E6D344488B2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":280635,"discussion_content":"é‚£éœ€è¦åˆ¤æ–­çº¿ç¨‹æ± ç»“æŸå—ï¼Ÿç”¨é˜»å¡çš„getå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591581627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224802,"user_name":"æé±¼çš„æ¬ç –å¥‡","can_delete":false,"product_type":"c1","uid":1021539,"ip_address":"","ucode":"2FD194C4DA26E5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/96/63/7eb32c9b.jpg","comment_is_top":false,"comment_ctime":1591543207,"is_pvip":false,"replies":[{"id":"82761","content":"org.redisson:redisson:jar:3.11.5","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1591580690,"ip_address":"","comment_id":224802,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591543207","product_id":100047701,"comment_content":"è¯·é—®jodd çš„çš„ jar æ˜¯å“ªä¸ªä¾èµ–å¼•å…¥çš„å‘¢","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497611,"discussion_content":"org.redisson:redisson:jar:3.11.5","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591580690,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219139,"user_name":"gogogo","can_delete":false,"product_type":"c1","uid":1016860,"ip_address":"","ucode":"EB19D75BB7100E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/84/1c/7997352e.jpg","comment_is_top":false,"comment_ctime":1589954401,"is_pvip":false,"replies":[{"id":"80965","content":"é‚£å°±æ˜¯æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚åˆ¤æ–­æ˜¯å¦åˆé€‚å¤„ç†ï¼Œä¸åˆé€‚çš„è¯æ‰”åˆ°MQï¼Ÿæˆ‘ä¸çŸ¥é“å…·ä½“ä½ çš„éœ€æ±‚æ˜¯å•¥ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥ç”±ç½‘å…³æ¥æ ¹æ®å¤´è¿›è¡Œè½¬å‘è¯·æ±‚åˆ°åˆé€‚çš„æœåŠ¡å¤„ç†å‘¢ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1589964295,"ip_address":"","comment_id":219139,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1589954401","product_id":100047701,"comment_content":"ä»tomcatæ‹¿å‡ºä¸€ä¸ªä»»åŠ¡ï¼Œæå–headerå­—æ®µï¼Œåˆ¤æ–­æ˜¯å¦å¯ä»¥æ‰§è¡Œï¼Œä¸æ‰§è¡Œçš„è¯æŠŠå®ƒé‡æ–°æ”¾å›ä»»åŠ¡é˜Ÿåˆ—ï¼Œæœ‰ä»€ä¹ˆæ–¹æ¡ˆå‚è€ƒå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495695,"discussion_content":"é‚£å°±æ˜¯æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚åˆ¤æ–­æ˜¯å¦åˆé€‚å¤„ç†ï¼Œä¸åˆé€‚çš„è¯æ‰”åˆ°MQï¼Ÿæˆ‘ä¸çŸ¥é“å…·ä½“ä½ çš„éœ€æ±‚æ˜¯å•¥ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥ç”±ç½‘å…³æ¥æ ¹æ®å¤´è¿›è¡Œè½¬å‘è¯·æ±‚åˆ°åˆé€‚çš„æœåŠ¡å¤„ç†å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589964295,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":216536,"user_name":"Geek_f4f0d4","can_delete":false,"product_type":"c1","uid":1149509,"ip_address":"","ucode":"DBC7614E0A7070","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL1BLgfPicBbSuXUK5uaEdQ76j2icNaPvicJcRrsxpLOjyuiczpD8efxoKrLEiaHs4At4loauOTLWOHQmg/132","comment_is_top":false,"comment_ctime":1589278859,"is_pvip":false,"replies":[{"id":"80117","content":"ä¸è¡Œ æ–‡ä¸­æœ‰æåˆ° æœ‰çš„æ—¶å€™éœ€è¦å¤šä¸ªçº¿ç¨‹æ±   ","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1589282183,"ip_address":"","comment_id":216536,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1589278859","product_id":100047701,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œâ€œæ—¢ç„¶ä½¿ç”¨äº†çº¿ç¨‹æ± å°±éœ€è¦ç¡®ä¿çº¿ç¨‹æ± æ˜¯åœ¨å¤ç”¨çš„ï¼Œæ¯æ¬¡ new ä¸€ä¸ªçº¿ç¨‹æ± å‡ºæ¥å¯èƒ½æ¯”ä¸ç”¨çº¿ç¨‹æ± è¿˜ç³Ÿç³•ã€‚â€ï¼Œé‚£ä¹ˆå°†çº¿ç¨‹æ± è®¾è®¡æˆå•ä¾‹æ¨¡å‹æ˜¯ä¸æ˜¯å¯ä»¥è§„é¿è¿™ä¸ªé—®é¢˜ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494853,"discussion_content":"ä¸è¡Œ æ–‡ä¸­æœ‰æåˆ° æœ‰çš„æ—¶å€™éœ€è¦å¤šä¸ªçº¿ç¨‹æ±   ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589282183,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214640,"user_name":"Richie","can_delete":false,"product_type":"c1","uid":1019588,"ip_address":"","ucode":"12314EF0347693","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8e/c4/8d1150f3.jpg","comment_is_top":false,"comment_ctime":1588776264,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588776264","product_id":100047701,"comment_content":"â€œä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼šJava çº¿ç¨‹æ± æ˜¯å…ˆç”¨å·¥ä½œé˜Ÿåˆ—æ¥å­˜æ”¾æ¥ä¸åŠå¤„ç†çš„ä»»åŠ¡ï¼Œæ»¡äº†ä¹‹åå†æ‰©å®¹çº¿ç¨‹æ± ã€‚å½“æˆ‘ä»¬çš„å·¥ä½œé˜Ÿåˆ—è®¾ç½®å¾—å¾ˆå¤§æ—¶ï¼Œæœ€å¤§çº¿ç¨‹æ•°è¿™ä¸ªå‚æ•°æ˜¾å¾—æ²¡æœ‰æ„ä¹‰ï¼Œå› ä¸ºé˜Ÿåˆ—å¾ˆéš¾æ»¡ï¼Œæˆ–è€…åˆ°æ»¡çš„æ—¶å€™å†å»æ‰©å®¹çº¿ç¨‹æ± å·²ç»äºäº‹æ— è¡¥äº†ã€‚â€<br>--------------------<br>ç¬¬ä¸€æ¬¡äº†è§£åˆ°è¿™å—é€»è¾‘çš„æ—¶å€™ä¹Ÿåœ¨å¥½å¥‡ï¼Œä¸ºä»€ä¹ˆè¦è®¾è®¡æˆè¿™æ ·å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸å…ˆæ‰©å®¹çº¿ç¨‹ï¼Œè¾¾åˆ°æœ€å¤§çº¿ç¨‹æ•°æ—¶å†æ”¾åˆ°å·¥ä½œé˜Ÿåˆ—é‡Œå‘¢ï¼Ÿ<br>","like_count":1},{"had_liked":false,"id":214290,"user_name":"aiwen","can_delete":false,"product_type":"c1","uid":1104346,"ip_address":"","ucode":"504F06CCC7B4FB","user_header":"https://static001.geekbang.org/account/avatar/00/10/d9/da/23a4a0c4.jpg","comment_is_top":false,"comment_ctime":1588695398,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1588695398","product_id":100047701,"comment_content":"ä¸è¯´è¯´çº¿ç¨‹æ•°é‡é…ç½®å¤šå¤§åˆé€‚ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1488356,"avatar":"https://static001.geekbang.org/account/avatar/00/16/b5/e4/e6faf686.jpg","nickname":"æ¡äº†ä¸ªå¤§èš‚èš±","note":"","ucode":"AD34AD4FA37371","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339953,"discussion_content":"ä¸æ˜¯è¯´äº†æ ¸æ•°+1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609847888,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":210647,"user_name":"é¾™çŒ«","can_delete":false,"product_type":"c1","uid":1112490,"ip_address":"","ucode":"FD726CC969EF9C","user_header":"https://static001.geekbang.org/account/avatar/00/10/f9/aa/3e80212e.jpg","comment_is_top":false,"comment_ctime":1587802386,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587802386","product_id":100047701,"comment_content":"çº¿ç¨‹æ± è¦æ³¨æ„å¤„ç†å¹¶å‘é—®é¢˜ï¼Œä»¥åŠçº¿ç¨‹åä½œ(æ‰§è¡Œé¡ºåº)é—®é¢˜","like_count":0},{"had_liked":false,"id":207022,"user_name":"lyuzh","can_delete":false,"product_type":"c1","uid":1263250,"ip_address":"","ucode":"E2203D92C70DA0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKibhEIEcmUmz20DNlwHfS8DuqzYTnrqicicicCmHzzxQeHnMEfq4lBY6fytIuVDPQOB9MoZpBl2UuOEQ/132","comment_is_top":false,"comment_ctime":1586997927,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586997927","product_id":100047701,"comment_content":"æœ±è€å¸ˆ æ‚¨å¥½ï¼æœ±è€å¸ˆæ˜¯å¦å¯ä»¥å†ä»‹ç»ä¸€äº›çº¿ç¨‹æ± å…³é—­æ—¶çš„å‘ç‚¹å‘€(shutdown and shutdown Now)","like_count":0},{"had_liked":false,"id":205576,"user_name":"åƒé¥­","can_delete":false,"product_type":"c1","uid":1692756,"ip_address":"","ucode":"AF0D7165D5F049","user_header":"https://static001.geekbang.org/account/avatar/00/19/d4/54/7263deb2.jpg","comment_is_top":false,"comment_ctime":1586677354,"is_pvip":false,"replies":[{"id":"76806","content":"åœ¨è®¾è®¡ç¯‡çš„ç”Ÿäº§å°±ç»ªä¸€æ–‡æˆ‘ä¼šæœ‰ä¸€äº›åˆ†äº«ã€‚æœ€ç®€å•çš„æ–¹å¼æ˜¯è‡ªå·±å†™ä»£ç æ‰“ç‚¹å®ç°ä¸€äº›ç›‘æ§ã€‚æˆ‘ä»¬å…¬å¸å†…éƒ¨ä¼šé€šè¿‡Java Agentæ–¹å¼æ¥å®ç°æ— ä»£ç çš„ç›‘æ§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1586681694,"ip_address":"","comment_id":205576,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1586677354","product_id":100047701,"comment_content":"çº¿ç¨‹æ± çš„ç›‘æ§æœ‰æ²¡æœ‰ä»€ä¹ˆç”Ÿäº§çº§åˆ«çš„å¥½çš„æ–¹å¼","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491519,"discussion_content":"åœ¨è®¾è®¡ç¯‡çš„ç”Ÿäº§å°±ç»ªä¸€æ–‡æˆ‘ä¼šæœ‰ä¸€äº›åˆ†äº«ã€‚æœ€ç®€å•çš„æ–¹å¼æ˜¯è‡ªå·±å†™ä»£ç æ‰“ç‚¹å®ç°ä¸€äº›ç›‘æ§ã€‚æˆ‘ä»¬å…¬å¸å†…éƒ¨ä¼šé€šè¿‡Java Agentæ–¹å¼æ¥å®ç°æ— ä»£ç çš„ç›‘æ§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586681694,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200515,"user_name":"æ½‡æ´’çš„æ¯…å°å³°","can_delete":false,"product_type":"c1","uid":1118141,"ip_address":"","ucode":"24638DAED92F08","user_header":"https://static001.geekbang.org/account/avatar/00/11/0f/bd/7a9b2a0c.jpg","comment_is_top":false,"comment_ctime":1585614895,"is_pvip":false,"replies":[{"id":"74992","content":"ä¸ç®¡æ˜¯æ–‡ä¸­è¿˜æ˜¯æºç ä¸­éƒ½æ˜¯æœ‰çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1585615075,"ip_address":"","comment_id":200515,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1585614895","product_id":100047701,"comment_content":"æ‰¾ä¸åˆ°printStatsè¿™ä¸ªæ–¹æ³•å‘€èƒ½å‘ŠçŸ¥ä¸€ä¸‹å—è€å¸ˆ","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490054,"discussion_content":"ä¸ç®¡æ˜¯æ–‡ä¸­è¿˜æ˜¯æºç ä¸­éƒ½æ˜¯æœ‰çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585615075,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":195056,"user_name":"Joker","can_delete":false,"product_type":"c1","uid":1156592,"ip_address":"","ucode":"126AF848001A1E","user_header":"https://static001.geekbang.org/account/avatar/00/11/a5/f0/8648c464.jpg","comment_is_top":false,"comment_ctime":1585131838,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585131838","product_id":100047701,"comment_content":"ThreadPoolExecutor è¿™ä¸ªéœ€è¦shutdownå§ï¼Œä¼šä¸€ç›´å­˜åœ¨çš„ï¼Œæˆ‘æœ‰çš„æ—¶å€™æµ‹è¯•çš„æ—¶å€™ï¼Œæ²¡æœ‰æ‰‹åŠ¨shutdownçš„è¯ï¼Œç¨‹åºå°±ä¸ä¼šç»“æŸã€‚<br>ä¸ºäº†é˜²æ­¢åˆ›å»ºè¿‡å¤šçš„çº¿ç¨‹æ± çš„é—®é¢˜ï¼Œè¿˜æ˜¯è¦å¼€å‘å¥½ç›‘æ§ï¼Œæœ‰ç›‘æ§çš„è¯ï¼Œå‡ºç°äº†çº¿ç¨‹æ•°ä¸º0çš„çº¿ç¨‹æ± å°± shutdownå°±è¡Œäº†ã€‚","like_count":0}]}