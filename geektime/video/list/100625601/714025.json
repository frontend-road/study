{"id":714025,"title":"07｜LangChain Agent：让GPT学会使用工具","content":"","comments":[{"had_liked":false,"id":383822,"user_name":"I. Z.","can_delete":false,"product_type":"c3","uid":1159572,"ip_address":"加拿大","ucode":"44498300297516","user_header":"https://static001.geekbang.org/account/avatar/00/11/b1/94/ae6dcfb9.jpg","comment_is_top":false,"comment_ctime":1699749836,"is_pvip":false,"replies":[{"id":139981,"content":"谢谢🙏你的认可！\n目前没有学员群。","user_name":"作者回复","user_name_real":"编辑","uid":1008262,"ctime":1699799455,"ip_address":"北京","comment_id":383822,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100625601,"comment_content":"感谢老师，课程简洁实用！ \n想问下我们有学员群吗，我这里是一个加拿大初创企业，希望找人合作（有偿）帮助开发一些基于langchain gpt 的产品","like_count":1,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631597,"discussion_content":"谢谢🙏你的认可！\n目前没有学员群。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1699799455,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":392010,"user_name":"绘世浮夸 つ","can_delete":false,"product_type":"c3","uid":1763933,"ip_address":"福建","ucode":"6A3960195753BA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/ea/5d/ccb4c205.jpg","comment_is_top":false,"comment_ctime":1719678934,"is_pvip":false,"replies":[{"id":142574,"content":"这个就是我们的prompt，对于工具的使用时机的描述让gpt做出了这样的选择。","user_name":"作者回复","user_name_real":"编辑","uid":1008262,"ctime":1720315251,"ip_address":"北京","comment_id":392010,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100625601,"comment_content":"老师有一个疑惑，在询问ADX集群这个问题的时候，为什么没有调用第一个query_baidu这个工具呢，这个问题其实也可以百度啊，gpt是怎么跳过第一个直接到第二个工具的呢","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":647614,"discussion_content":"这个就是我们的prompt，对于工具的使用时机的描述让gpt做出了这样的选择。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1720315251,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383380,"user_name":"脱尼","can_delete":false,"product_type":"c3","uid":1579987,"ip_address":"中国香港","ucode":"627947E7BED072","user_header":"https://static001.geekbang.org/account/avatar/00/18/1b/d3/5cf53a64.jpg","comment_is_top":false,"comment_ctime":1698939799,"is_pvip":false,"replies":[{"id":139662,"content":"你需要重新启动运行jupyter notebook的终端。\n如果还有问题可以直接在代码里设置环境变量：\nimport os\nos.environ[&#39;WOLFRAM_ALPHA_APPID&#39;] = ....","user_name":"作者回复","user_name_real":"编辑","uid":1008262,"ctime":1698976320,"ip_address":"北京","comment_id":383380,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100625601,"comment_content":"环境变量里面配置了 WOLFRAM_ALPHA_APPID 并且执行了source ~&#47;.bash_profile ，最后还重启了jupyter ，依旧报错，读取不到。\nDid not find wolfram_alpha_appid, please add an environment variable `WOLFRAM_ALPHA_APPID` which contains it, or pass  `wolfram_alpha_appid` as a named parameter. (type=value_error)\n\n另外，请问函数里面如何直接传这个appId ？","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630849,"discussion_content":"你需要重新启动运行jupyter notebook的终端。\n如果还有问题可以直接在代码里设置环境变量：\nimport os\nos.environ[&#39;WOLFRAM_ALPHA_APPID&#39;] = ....","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698976320,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2843865,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKSVuNarJuDhBSvHY0giaq6yriceEBKiaKuc04wCYWOuso50noqDexaPJJibJN7PHwvcQppnzsDia1icZkw/132","nickname":"Matthew","note":"","ucode":"96093089773740","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":644830,"discussion_content":"不需要设置 WOLFRAM_ALPHA_APPID","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1715531529,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"江苏","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1579987,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1b/d3/5cf53a64.jpg","nickname":"脱尼","note":"","ucode":"627947E7BED072","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630846,"discussion_content":"import os\nos.environ[&#34;WOLFRAM_ALPHA_APPID&#34;] = &#34;xxx&#34;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698973624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382770,"user_name":"fireshort","can_delete":false,"product_type":"c3","uid":1008312,"ip_address":"广东","ucode":"10550CA9C6C730","user_header":"https://static001.geekbang.org/account/avatar/00/0f/62/b8/0e1b655e.jpg","comment_is_top":false,"comment_ctime":1698033291,"is_pvip":false,"replies":[{"id":139395,"content":"👍","user_name":"作者回复","user_name_real":"编辑","uid":1008262,"ctime":1698058588,"ip_address":"北京","comment_id":382770,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100625601,"comment_content":"注意要去https:&#47;&#47;www.wolframalpha.com&#47;注册，并且要确认你的邮箱，不然调用接口的时候会提示：Invalid appid。\n\n去https:&#47;&#47;developer.wolframalpha.com&#47;access 获取app id，再设置环境变量WOLFRAM_ALPHA_APPID","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630048,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698058588,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2843865,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKSVuNarJuDhBSvHY0giaq6yriceEBKiaKuc04wCYWOuso50noqDexaPJJibJN7PHwvcQppnzsDia1icZkw/132","nickname":"Matthew","note":"","ucode":"96093089773740","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":644831,"discussion_content":"不需要设置 WOLFRAM_ALPHA_APPID","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1715531556,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"江苏","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":390514,"user_name":"Matthew","can_delete":false,"product_type":"c3","uid":2843865,"ip_address":"江苏","ucode":"96093089773740","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKSVuNarJuDhBSvHY0giaq6yriceEBKiaKuc04wCYWOuso50noqDexaPJJibJN7PHwvcQppnzsDia1icZkw/132","comment_is_top":false,"comment_ctime":1715531693,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100625601,"comment_content":"通义千问 的推理能力还是要比 GPT 要差一点，按照老师给的问题没有直接调用到方法。\n\n我改成下面这样：\nagent.run(&quot;在一个外星球上，这里的鸡都长着3只脚1个头，免子有4只脚1个头，一个装着鸡和免子的笼子里一共有20个头，71只脚，请问笼子里各有多少只鸡和免子？请调用wolfram_api方法解决&quot;)\n相当于告诉大模型，这个问题就是要调用 wolfram_api方法来解决，它才能给出正确的推理和思考过程。","like_count":0,"discussions":[{"author":{"id":2843865,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKSVuNarJuDhBSvHY0giaq6yriceEBKiaKuc04wCYWOuso50noqDexaPJJibJN7PHwvcQppnzsDia1icZkw/132","nickname":"Matthew","note":"","ucode":"96093089773740","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":644861,"discussion_content":"agent.run(&#34;请解决如下数学问题：在一个外星球上，这里的鸡都长着3只脚1个头，免子有4只脚1个头，一个装着鸡和免子的笼子里一共有20个头，71只脚，请问笼子里各有多少只鸡和免子？&#34;)\n\n改成这样提问，也可以调用到 wolfram_api","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1715569321,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"江苏","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":390512,"user_name":"Matthew","can_delete":false,"product_type":"c3","uid":2843865,"ip_address":"江苏","ucode":"96093089773740","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKSVuNarJuDhBSvHY0giaq6yriceEBKiaKuc04wCYWOuso50noqDexaPJJibJN7PHwvcQppnzsDia1icZkw/132","comment_is_top":false,"comment_ctime":1715530325,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100625601,"comment_content":"选择 通义千问 的模型，agent没有推理到应该调用 Wolfram|Alpha 的方法，结果如下：\n\n&gt; Entering new AgentExecutor chain...\n 提供的工具对回答该问题帮助较小，我将不使用工具直接作答。\nFinal Answer: 设鸡的数量为x，兔子的数量为y。\n\n根据题意，我们可以列出两个方程：\n1. 鸡和兔子的头数总和：x + y = 20\n2. 鸡和兔子的脚数总和：3x + 4y = 71\n\n现在我们解这个方程组。从第一个方程得到 y = 20 - x ，然后将其代入第二个方程：\n3x + 4(20 - x) = 71\n\n解这个方程：\n3x + 80 - 4x = 71\n-x = 71 - 80\n-x = -9\nx = 9\n\n现在我们知道鸡有9只，代入第一个方程求得兔子的数量：\ny = 20 - 9\ny = 11\n\n所以，笼子里有9只鸡和11只兔子。\n\n&gt; Finished chain.","like_count":0}]}