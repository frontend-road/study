{"id":104024,"title":"15 | 海纳百川：HTTP的实体数据","content":"<p>你好，我是Chrono。</p><p>今天我要与你分享的话题是“海纳百川：HTTP的实体数据”。</p><p>这一讲是“进阶篇”的第一讲，从今天开始，我会用连续的8讲的篇幅来详细解析HTTP协议里的各种头字段，包括定义、功能、使用方式、注意事项等等。学完了这些课程，你就可以完全掌握HTTP协议。</p><p>在前面的“基础篇”里我们了解了HTTP报文的结构，知道一个HTTP报文是由“header+body”组成的。但那时我们主要研究的是header，没有涉及到body。所以，“进阶篇”的第一讲就从HTTP的body谈起。</p><h2>数据类型与编码</h2><p>在TCP/IP协议栈里，传输数据基本上都是“header+body”的格式。但TCP、UDP因为是传输层的协议，它们不会关心body数据是什么，只要把数据发送到对方就算是完成了任务。</p><p>而HTTP协议则不同，它是应用层的协议，数据到达之后工作只能说是完成了一半，还必须要告诉上层应用这是什么数据才行，否则上层应用就会“不知所措”。</p><p>你可以设想一下，假如HTTP没有告知数据类型的功能，服务器把“一大坨”数据发给了浏览器，浏览器看到的是一个“黑盒子”，这时候该怎么办呢？</p><p>当然，它可以“猜”。因为很多数据都是有固定格式的，所以通过检查数据的前几个字节也许就能知道这是个GIF图片、或者是个MP3音乐文件，但这种方式无疑十分低效，而且有很大几率会检查不出来文件类型。</p><!-- [[[read_end]]] --><p>幸运的是，早在HTTP协议诞生之前就已经有了针对这种问题的解决方案，不过它是用在电子邮件系统里的，让电子邮件可以发送ASCII码以外的任意数据，方案的名字叫做“<strong>多用途互联网邮件扩展</strong>”（Multipurpose Internet Mail Extensions），简称为MIME。</p><p>MIME是一个很大的标准规范，但HTTP只“顺手牵羊”取了其中的一部分，用来标记body的数据类型，这就是我们平常总能听到的“<strong>MIME type</strong>”。</p><p>MIME把数据分成了八大类，每个大类下再细分出多个子类，形式是“type/subtype”的字符串，巧得很，刚好也符合了HTTP明文的特点，所以能够很容易地纳入HTTP头字段里。</p><p>这里简单列举一下在HTTP里经常遇到的几个类别：</p><ol>\n<li>text：即文本格式的可读数据，我们最熟悉的应该就是text/html了，表示超文本文档，此外还有纯文本text/plain、样式表text/css等。</li>\n<li>image：即图像文件，有image/gif、image/jpeg、image/png等。</li>\n<li>audio/video：音频和视频数据，例如audio/mpeg、video/mp4等。</li>\n<li>application：数据格式不固定，可能是文本也可能是二进制，必须由上层应用程序来解释。常见的有application/json，application/javascript、application/pdf等，另外，如果实在是不知道数据是什么类型，像刚才说的“黑盒”，就会是application/octet-stream，即不透明的二进制数据。</li>\n</ol><p>但仅有MIME type还不够，因为HTTP在传输时为了节约带宽，有时候还会压缩数据，为了不要让浏览器继续“猜”，还需要有一个“Encoding type”，告诉数据是用的什么编码格式，这样对方才能正确解压缩，还原出原始的数据。</p><p>比起MIME type来说，Encoding type就少了很多，常用的只有下面三种：</p><ol>\n<li>gzip：GNU zip压缩格式，也是互联网上最流行的压缩格式；</li>\n<li>deflate：zlib（deflate）压缩格式，流行程度仅次于gzip；</li>\n<li>br：一种专门为HTTP优化的新压缩算法（Brotli）。</li>\n</ol><h2>数据类型使用的头字段</h2><p>有了MIME type和Encoding type，无论是浏览器还是服务器就都可以轻松识别出body的类型，也就能够正确处理数据了。</p><p>HTTP协议为此定义了两个Accept请求头字段和两个Content实体头字段，用于客户端和服务器进行“<strong>内容协商</strong>”。也就是说，客户端用Accept头告诉服务器希望接收什么样的数据，而服务器用Content头告诉客户端实际发送了什么样的数据。</p><p><img src=\"https://static001.geekbang.org/resource/image/51/b9/5191bce1329efa157a6cc37ab9e789b9.png?wh=2000*1121\" alt=\"\"></p><p><strong>Accept</strong>字段标记的是客户端可理解的MIME type，可以用“,”做分隔符列出多个类型，让服务器有更多的选择余地，例如下面的这个头：</p><pre><code>Accept: text/html,application/xml,image/webp,image/png\n</code></pre><p>这就是告诉服务器：“我能够看懂HTML、XML的文本，还有webp和png的图片，请给我这四类格式的数据”。</p><p>相应的，服务器会在响应报文里用头字段<strong>Content-Type</strong>告诉实体数据的真实类型：</p><pre><code>Content-Type: text/html\nContent-Type: image/png\n</code></pre><p>这样浏览器看到报文里的类型是“text/html”就知道是HTML文件，会调用排版引擎渲染出页面，看到“image/png”就知道是一个PNG文件，就会在页面上显示出图像。</p><p><strong>Accept-Encoding</strong>字段标记的是客户端支持的压缩格式，例如上面说的gzip、deflate等，同样也可以用“,”列出多个，服务器可以选择其中一种来压缩数据，实际使用的压缩格式放在响应头字段<strong>Content-Encoding</strong>里。</p><pre><code>Accept-Encoding: gzip, deflate, br\nContent-Encoding: gzip\n</code></pre><p>不过这两个字段是可以省略的，如果请求报文里没有Accept-Encoding字段，就表示客户端不支持压缩数据；如果响应报文里没有Content-Encoding字段，就表示响应数据没有被压缩。</p><h2>语言类型与编码</h2><p>MIME type和Encoding type解决了计算机理解body数据的问题，但互联网遍布全球，不同国家不同地区的人使用了很多不同的语言，虽然都是text/html，但如何让浏览器显示出每个人都可理解可阅读的语言文字呢？</p><p>这实际上就是“国际化”的问题。HTTP采用了与数据类型相似的解决方案，又引入了两个概念：语言类型与字符集。</p><p>所谓的“<strong>语言类型</strong>”就是人类使用的自然语言，例如英语、汉语、日语等，而这些自然语言可能还有下属的地区性方言，所以在需要明确区分的时候也要使用“type-subtype”的形式，不过这里的格式与数据类型不同，<strong>分隔符不是“/”，而是“-”</strong>。</p><p>举几个例子：en表示任意的英语，en-US表示美式英语，en-GB表示英式英语，而zh-CN就表示我们最常使用的汉语。</p><p>关于自然语言的计算机处理还有一个更麻烦的东西叫做“字符集”。</p><p>在计算机发展的早期，各个国家和地区的人们“各自为政”，发明了许多字符编码方式来处理文字，比如英语世界用的ASCII、汉语世界用的GBK、BIG5，日语世界用的Shift_JIS等。同样的一段文字，用一种编码显示正常，换另一种编码后可能就会变得一团糟。</p><p>所以后来就出现了Unicode和UTF-8，把世界上所有的语言都容纳在一种编码方案里，遵循UTF-8字符编码方式的Unicode字符集也成为了互联网上的标准字符集。</p><h2>语言类型使用的头字段</h2><p>同样的，HTTP协议也使用Accept请求头字段和Content实体头字段，用于客户端和服务器就语言与编码进行“<strong>内容协商</strong>”。</p><p><strong>Accept-Language</strong>字段标记了客户端可理解的自然语言，也允许用“,”做分隔符列出多个类型，例如：</p><pre><code>Accept-Language: zh-CN, zh, en\n</code></pre><p>这个请求头会告诉服务器：“最好给我zh-CN的汉语文字，如果没有就用其他的汉语方言，如果还没有就给英文”。</p><p>相应的，服务器应该在响应报文里用头字段<strong>Content-Language</strong>告诉客户端实体数据使用的实际语言类型：</p><pre><code>Content-Language: zh-CN\n</code></pre><p>字符集在HTTP里使用的请求头字段是<strong>Accept-Charset</strong>，但响应头里却没有对应的Content-Charset，而是在<strong>Content-Type</strong>字段的数据类型后面用“charset=xxx”来表示，这点需要特别注意。</p><p>例如，浏览器请求GBK或UTF-8的字符集，然后服务器返回的是UTF-8编码，就是下面这样：</p><pre><code>Accept-Charset: gbk, utf-8\nContent-Type: text/html; charset=utf-8\n</code></pre><p>不过现在的浏览器都支持多种字符集，通常不会发送Accept-Charset，而服务器也不会发送Content-Language，因为使用的语言完全可以由字符集推断出来，所以在请求头里一般只会有Accept-Language字段，响应头里只会有Content-Type字段。</p><p><img src=\"https://static001.geekbang.org/resource/image/0e/10/0e9bcd6922fa8908bdba79d98ae5fa10.png?wh=2000*1121\" alt=\"\"></p><h2>内容协商的质量值</h2><p>在HTTP协议里用Accept、Accept-Encoding、Accept-Language等请求头字段进行内容协商的时候，还可以用一种特殊的“q”参数表示权重来设定优先级，这里的“q”是“quality factor”的意思。</p><p>权重的最大值是1，最小值是0.01，默认值是1，如果值是0就表示拒绝。具体的形式是在数据类型或语言代码后面加一个“;”，然后是“q=value”。</p><p>这里要提醒的是“;”的用法，在大多数编程语言里“;”的断句语气要强于“,”，而在HTTP的内容协商里却恰好反了过来，“;”的意义是小于“,”的。</p><p>例如下面的Accept字段：</p><pre><code>Accept: text/html,application/xml;q=0.9,*/*;q=0.8\n</code></pre><p>它表示浏览器最希望使用的是HTML文件，权重是1，其次是XML文件，权重是0.9，最后是任意数据类型，权重是0.8。服务器收到请求头后，就会计算权重，再根据自己的实际情况优先输出HTML或者XML。</p><h2>内容协商的结果</h2><p>内容协商的过程是不透明的，每个Web服务器使用的算法都不一样。但有的时候，服务器会在响应头里多加一个<strong>Vary</strong>字段，记录服务器在内容协商时参考的请求头字段，给出一点信息，例如：</p><pre><code>Vary: Accept-Encoding,User-Agent,Accept\n</code></pre><p>这个Vary字段表示服务器依据了Accept-Encoding、User-Agent和Accept这三个头字段，然后决定了发回的响应报文。</p><p>Vary字段可以认为是响应报文的一个特殊的“版本标记”。每当Accept等请求头变化时，Vary也会随着响应报文一起变化。也就是说，同一个URI可能会有多个不同的“版本”，主要用在传输链路中间的代理服务器实现缓存服务，这个之后讲“HTTP缓存”时还会再提到。</p><h2>动手实验</h2><p>上面讲完了理论部分，接下来就是实际动手操作了。可以用我们的实验环境，在www目录下有一个mime目录，里面预先存放了几个文件，可以用URI“/15-1?name=file”的形式访问，例如：</p><pre><code>http://www.chrono.com/15-1?name=a.json\nhttp://www.chrono.com/15-1?name=a.xml\n</code></pre><p>在Chrome里打开开发者工具，就能够看到Accept和Content头：</p><p><img src=\"https://static001.geekbang.org/resource/image/b4/9e/b4d1671872876a60ad717821f0fb819e.png?wh=2000*906\" alt=\"\"></p><p>你也可以把任意的文件拷贝到mime目录下，比如压缩包、MP3、图片、视频等，再用Chrome访问，观察更多的MIME type。</p><p>有了这些经验后，你还可以离开实验环境，直接访问各大门户网站，看看真实网络世界里的HTTP报文是什么样子的。</p><h2>小结</h2><p>今天我们学习了HTTP里的数据类型和语言类型，在这里为今天的内容做个小结。</p><p><img src=\"https://static001.geekbang.org/resource/image/b2/58/b2118315a977969ddfcc7ab9d26cb358.png?wh=2000*1009\" alt=\"\"></p><ol>\n<li><span class=\"orange\">数据类型表示实体数据的内容是什么，使用的是MIME type，相关的头字段是Accept和Content-Type；</span></li>\n<li><span class=\"orange\">数据编码表示实体数据的压缩方式，相关的头字段是Accept-Encoding和Content-Encoding；</span></li>\n<li><span class=\"orange\">语言类型表示实体数据的自然语言，相关的头字段是Accept-Language和Content-Language；</span></li>\n<li><span class=\"orange\">字符集表示实体数据的编码方式，相关的头字段是Accept-Charset和Content-Type；</span></li>\n<li><span class=\"orange\">客户端需要在请求头里使用Accept等头字段与服务器进行“内容协商”，要求服务器返回最合适的数据；</span></li>\n<li><span class=\"orange\">Accept等头字段可以用“,”顺序列出多个可能的选项，还可以用“;q=”参数来精确指定权重。</span></li>\n</ol><h2>课下作业</h2><ol>\n<li>试着解释一下这个请求头“Accept-Encoding: gzip, deflate;q=1.0, *;q=0.5, br;q=0”，再模拟一下服务器的响应头。</li>\n<li>假设你要使用POST方法向服务器提交一些JSON格式的数据，里面包含有中文，请求头应该是什么样子的呢？</li>\n<li>试着用快递发货收货比喻一下MIME、Encoding等概念。</li>\n</ol><p>欢迎你把自己的答案写在留言区，与我和其他同学一起讨论。如果你觉得有所收获，欢迎你把文章分享给你的朋友。</p><p></p>","neighbors":{"left":{"article_title":"14 | HTTP有哪些优点？又有哪些缺点？","id":103746},"right":{"article_title":"16 | 把大象装进冰箱：HTTP传输大文件的方法","id":104456}},"comments":[{"had_liked":false,"id":109082,"user_name":"彧豪","can_delete":false,"product_type":"c1","uid":1161233,"ip_address":"","ucode":"8979F477E0BC5B","user_header":"https://static001.geekbang.org/account/avatar/00/11/b8/11/26838646.jpg","comment_is_top":false,"comment_ctime":1561957476,"is_pvip":false,"replies":[{"id":"39492","content":"是的，看来是我没说清楚，导致有的同学误会了。<br><br>content-type是实体字段，所以请求和响应里都可以用，作用是指明body数据的类型。<br><br>正文里为了叙述方便，只在服务器的响应报文里出现了content-type，实际上它是个通用字段，如果要发post请求，就需要带上它。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1561965569,"ip_address":"","comment_id":109082,"utype":1}],"discussion_count":2,"race_medal":0,"score":"375224112228","product_id":100029001,"comment_content":"上周五和服务端做上传图片的时候遇到过这个content-type的问题，上传图片时候我这边需要设置content-type:&quot;image&#47;jpg&quot;，然后传完了，我在预览的时候获取图片的地址，此时比如通过a标签的方式打开新标签预览该图片时才能成功预览，不然如果使用上传的js-sdk设置的默认类型：content-type:&quot;octet-stream&quot;，那么浏览器就不认识这个图片了，转而会下载这个文件(图片)，所以我是不是可以理解为content-type这字段在请求头，和响应头里都能使用？或者上传文件这个业务又不同于一般的请求操作呢？","like_count":88,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456237,"discussion_content":"是的，看来是我没说清楚，导致有的同学误会了。\n\ncontent-type是实体字段，所以请求和响应里都可以用，作用是指明body数据的类型。\n\n正文里为了叙述方便，只在服务器的响应报文里出现了content-type，实际上它是个通用字段，如果要发post请求，就需要带上它。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1561965569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1624355,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c9/23/76511858.jpg","nickname":"洛奇","note":"","ucode":"662B4005721119","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584010,"discussion_content":"请问js-sdk是什么？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660558733,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"上海"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":110198,"user_name":"走马","can_delete":false,"product_type":"c1","uid":1251016,"ip_address":"","ucode":"EEFE8F7590FFA4","user_header":"https://static001.geekbang.org/account/avatar/00/13/16/c8/980776fc.jpg","comment_is_top":false,"comment_ctime":1562206876,"is_pvip":false,"replies":[{"id":"39962","content":"√","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1562209118,"ip_address":"","comment_id":110198,"utype":1}],"discussion_count":4,"race_medal":0,"score":"143296127644","product_id":100029001,"comment_content":"accept 表达的是你想要的<br>而你发送 post请求时，你发送的数据是给服务器的，这时候就需要像 服务器会用 content-type 标明它给你的数据类型一样，你也需要用 content- 来表明你给别人的数据的一些属性","like_count":34,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456772,"discussion_content":"√","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562209118,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1245504,"avatar":"https://static001.geekbang.org/account/avatar/00/13/01/40/a203a3b9.jpg","nickname":"爱学习不害怕","note":"","ucode":"BE325C02E4C92F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281709,"discussion_content":"可以理解为事实上的c/s和逻辑上的c/s。当客户端通过post请求向服务端上传数据的时候，可以在逻辑上把进行这个通信的事实的客户端可以看作是服务端，事实的服务端看作是客户端。所以，只要是“服务端”向“客户端”发送数据，都要用content-*字段","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591796590,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2697683,"avatar":"https://static001.geekbang.org/account/avatar/00/29/29/d3/b193a463.jpg","nickname":"明明如月","note":"","ucode":"937488EEAA522E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413327,"discussion_content":"content是我发给你的数据的数据类型\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636447082,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2697683,"avatar":"https://static001.geekbang.org/account/avatar/00/29/29/d3/b193a463.jpg","nickname":"明明如月","note":"","ucode":"937488EEAA522E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413325,"discussion_content":"accept  是我想要的数据类型","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636447063,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109144,"user_name":"亚洲舞王.尼古拉斯赵四","can_delete":false,"product_type":"c1","uid":1443078,"ip_address":"","ucode":"7159F5D7232696","user_header":"https://static001.geekbang.org/account/avatar/00/16/05/06/f5979d65.jpg","comment_is_top":false,"comment_ctime":1561971079,"is_pvip":false,"replies":[{"id":"39598","content":"回答的不错。<br><br>第二个问题要修改一下，这也怪我没有说清楚。<br><br>content-*字段也可以用在请求报文里，说明请求体的数据类型。在这里不能用accept字段，因为是post，所以要用content-language来指明body的语言类型，在content-type里用charset指明编码类型。<br><br>可以参考其他同学的回答。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1562028942,"ip_address":"","comment_id":109144,"utype":1}],"discussion_count":5,"race_medal":0,"score":"134705957255","product_id":100029001,"comment_content":"1.含义是：我这个请求最希望服务器给我返回的编码方式是gzip和deflate，他们俩在我这是最优的地位，我不接受br的编码方式，如果还有其他的编码方式的话对我来说权重0.5。服务器可能的响应头是<br>HTTP&#47;1.1 200 OK<br>Content-Encoding: gzip<br><br>2.请求头可能是<br>POST &#47;serv&#47;v1&#47;user&#47;auth HTTP&#47;1.1<br>Content-Type: application&#47;json<br>Accept-Language: zh-CN, zh<br>Accept-Charset: gbk, utf-8<br>3.MIME类比快递的话就是你要快递的物品（衣服，食物等），Encoding就是快递你这个物品的包装方式，如果是衣服可能就随意一点一个袋子，如果是食物担心腐烂给你放个冰袋进去<br>不知道回答的对不对，请老师指正","like_count":32,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456265,"discussion_content":"回答的不错。\n\n第二个问题要修改一下，这也怪我没有说清楚。\n\ncontent-*字段也可以用在请求报文里，说明请求体的数据类型。在这里不能用accept字段，因为是post，所以要用content-language来指明body的语言类型，在content-type里用charset指明编码类型。\n\n可以参考其他同学的回答。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562028942,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1669795,"avatar":"https://static001.geekbang.org/account/avatar/00/19/7a/a3/19d9bf76.jpg","nickname":"田","note":"","ucode":"2CC99CC96D59CC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296422,"discussion_content":"post  应该也是可以用accept的\n我的测试是：\n1、以本页面为例，打开浏览器找一个接口；\n2、curl 抓包 https://time.geekbang.org/serv/v1/article&#39;\n执行\ncurl -v &#39;https://time.geekbang.org/serv/v1/article&#39; \\\n其中有\n-H &#39;Accept-Language: zh-CN,zh;q=0.9&#39; \\\n-H &#39;Accept: application/json, text/plain, */*&#39; \\\n-H &#39;Accept-Language: zh-CN,zh;q=0.9&#39; \\\n...\n其他的post相关信息省略\n3、抓包结果\n\n> POST /serv/v1/article HTTP/1.1\n> Host: time.geekbang.org\n> Accept-Encoding: deflate, gzip\n> Accept: application/json, text/plain, */*\n> Accept-Language: zh-CN,zh;q=0.9\n...","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1596538928,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1116335,"avatar":"https://static001.geekbang.org/account/avatar/00/11/08/af/b2f87e01.jpg","nickname":"stormkang","note":"","ucode":"1D6D396E1F4BAB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281284,"discussion_content":"额, 我看到下面大佬的回答了...","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591705411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1116335,"avatar":"https://static001.geekbang.org/account/avatar/00/11/08/af/b2f87e01.jpg","nickname":"stormkang","note":"","ucode":"1D6D396E1F4BAB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281281,"discussion_content":"弱弱的问个问题: 为什么post请求不能用accept字段?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591705291,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1748599,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/ae/77/7066354b.jpg","nickname":"s(t)","note":"","ucode":"1415FAA5E0C5EB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1116335,"avatar":"https://static001.geekbang.org/account/avatar/00/11/08/af/b2f87e01.jpg","nickname":"stormkang","note":"","ucode":"1D6D396E1F4BAB","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326648,"discussion_content":"老师的意思应该是针对这个题目不该用accept，因为只提到要发中文","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1605639338,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":281281,"ip_address":""},"score":326648,"extra":""}]}]},{"had_liked":false,"id":138001,"user_name":"隰有荷","can_delete":false,"product_type":"c1","uid":1357944,"ip_address":"","ucode":"2BE9A32AB28963","user_header":"https://static001.geekbang.org/account/avatar/00/14/b8/78/2828195b.jpg","comment_is_top":false,"comment_ctime":1569976840,"is_pvip":false,"replies":[{"id":"53478","content":"post和get时都可以使用Accept-Language，表示客户端可以理解的语言，要求服务器按照指示返回数据。<br><br>Content-Language表示的是body数据的语言，因为post带有body，所以要用Content-Language来告诉服务器，报文的body是什么。<br><br>如果get报文也有body，那么它也可以使用Content-Language。<br><br>Accept-Language是请求头字段，只要是发请求就可以带。<br><br>Content-Language是实体头字段，只要是有body就可以带。<br>","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1570496911,"ip_address":"","comment_id":138001,"utype":1}],"discussion_count":1,"race_medal":0,"score":"121829061128","product_id":100029001,"comment_content":"用post方法请求接口时，在客户端语言的设置上不能使用Accept-Language吗？为什么一定是Contenr-Language呢？是不是Accept-Language只用于get方式时，表明客户端需要的的语言呢？","like_count":27,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469345,"discussion_content":"post和get时都可以使用Accept-Language，表示客户端可以理解的语言，要求服务器按照指示返回数据。\n\nContent-Language表示的是body数据的语言，因为post带有body，所以要用Content-Language来告诉服务器，报文的body是什么。\n\n如果get报文也有body，那么它也可以使用Content-Language。\n\nAccept-Language是请求头字段，只要是发请求就可以带。\n\nContent-Language是实体头字段，只要是有body就可以带。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570496911,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109341,"user_name":"苦行僧","can_delete":false,"product_type":"c1","uid":1055334,"ip_address":"","ucode":"726024A9A9CF44","user_header":"https://static001.geekbang.org/account/avatar/00/10/1a/66/2d9db9ed.jpg","comment_is_top":false,"comment_ctime":1562023184,"is_pvip":false,"replies":[{"id":"39594","content":"经验之谈！","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1562028759,"ip_address":"","comment_id":109341,"utype":1}],"discussion_count":2,"race_medal":0,"score":"113231172880","product_id":100029001,"comment_content":"现在很多小文件 比如图片 都往云存上放了 千万指定正确content-type 一旦指定错 批量修改太麻烦 而且会影响终端的解析","like_count":27,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456366,"discussion_content":"经验之谈！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562028759,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1078951,"avatar":"https://static001.geekbang.org/account/avatar/00/10/76/a7/374e86a7.jpg","nickname":"欢乐的小马驹","note":"","ucode":"B594106688CEE7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":203806,"discussion_content":"老师，你说这个经验之谈是指人家说的对还是不太对？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584084936,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":110459,"user_name":"MJ","can_delete":false,"product_type":"c1","uid":1237145,"ip_address":"","ucode":"FCEC0C21444D2A","user_header":"https://static001.geekbang.org/account/avatar/00/12/e0/99/5d603697.jpg","comment_is_top":false,"comment_ctime":1562283250,"is_pvip":false,"replies":[{"id":"40158","content":"每建立一个连接就需要tcp握手，对同一个ip地址+端口，浏览器通常最多建立6个并发连接。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1562288245,"ip_address":"","comment_id":110459,"utype":1}],"discussion_count":1,"race_medal":0,"score":"96051563762","product_id":100029001,"comment_content":"老师，每一个并发连接，都需要新建tcp三次握手吗？还是一次tcp握手后，可以并发多个连接？","like_count":22,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456894,"discussion_content":"每建立一个连接就需要tcp握手，对同一个ip地址+端口，浏览器通常最多建立6个并发连接。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562288245,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109156,"user_name":"1900","can_delete":false,"product_type":"c1","uid":1105774,"ip_address":"","ucode":"320D65D14817D3","user_header":"https://static001.geekbang.org/account/avatar/00/10/df/6e/267bd6ee.jpg","comment_is_top":false,"comment_ctime":1561972459,"is_pvip":true,"replies":[{"id":"39508","content":"嗯，我说的时候不太准确。utf-8只是编码方案，Unicode是字符集。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1561976531,"ip_address":"","comment_id":109156,"utype":1}],"discussion_count":1,"race_medal":0,"score":"65986481899","product_id":100029001,"comment_content":"“所以后来就出现了 Unicode 和 UTF-8，把世界上所有的语言都容纳在一种编码方案里，UTF-8 也成为了互联网上的标准字符集。”<br><br>这句话最后有点问题吧？Unicode才是字符集，应该是“遵循UTF-8字符编码方式的Unicode字符集也成为了互联网上的标准字符集”，是么？","like_count":16,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456272,"discussion_content":"嗯，我说的时候不太准确。utf-8只是编码方案，Unicode是字符集。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561976531,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108953,"user_name":"BellenHsin","can_delete":false,"product_type":"c1","uid":1345271,"ip_address":"","ucode":"5BCA1354486C01","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTImeO3D5b56u2oHuQ13e58OmLexGVjYt6NTn1W4XjALJUrx7vh0FE2OVZvpxiczt8SibZM6TTFp2ASA/132","comment_is_top":false,"comment_ctime":1561942007,"is_pvip":false,"replies":[{"id":"39408","content":"thanks。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1561942853,"ip_address":"","comment_id":108953,"utype":1}],"discussion_count":2,"race_medal":0,"score":"48806582263","product_id":100029001,"comment_content":"这篇写的不错","like_count":11,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456180,"discussion_content":"thanks。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561942853,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1336475,"avatar":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","nickname":"J.Smile","note":"","ucode":"C4D98DFDBF7584","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":313772,"discussion_content":"这篇写的干货很多，解答了很多的疑惑，赞������","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603088574,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219331,"user_name":"do it","can_delete":false,"product_type":"c1","uid":1309911,"ip_address":"","ucode":"E0753912E8F2AF","user_header":"https://static001.geekbang.org/account/avatar/00/13/fc/d7/b102034a.jpg","comment_is_top":false,"comment_ctime":1589989970,"is_pvip":false,"replies":[{"id":"81031","content":"回答的很好，继续努力。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1590022220,"ip_address":"","comment_id":219331,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27359793746","product_id":100029001,"comment_content":"1、试着解释一下这个请求头“Accept-Encoding: gzip, deflate;q=1.0, *;q=0.5, br;q=0”，再模拟一下服务器的响应头。<br>  ：最好使用gzip,deflate压缩格式，我不接受br压缩，如果都没有的话就选择其他格式<br><br>2、假设你要使用 POST 方法向服务器提交一些 JSON 格式的数据，里面包含有中文，请求头应该是什么样子的呢？<br>      content-type: application&#47;json, charset=gbk<br>      content-language:zh-cn, zh<br><br>3、试着用快递发货收货比喻一下 MIME、Encoding 等概念。<br>     物品的种类（水果、衣服）就是MIME，包装方式就是Encoding","like_count":6,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495768,"discussion_content":"回答的很好，继续努力。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590022220,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108963,"user_name":"-W.LI-","can_delete":false,"product_type":"c1","uid":1210699,"ip_address":"","ucode":"3556786538664F","user_header":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","comment_is_top":false,"comment_ctime":1561942649,"is_pvip":false,"replies":[{"id":"39414","content":"客户端在发送请求的时候也有义务设置content-type，也应该是知道数据是什么类型的，你设置成json，服务器看到了就好处理。<br><br>content-type是实体字段，请求响应里都可以出现。<br><br>accept是告诉服务器，客户端支持什么类型，防止服务器发过来的数据不认识。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1561943379,"ip_address":"","comment_id":108963,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23036779129","product_id":100029001,"comment_content":"老师好!有个问题,之前遇到过一个发送ajax请求。前端忘记在content-type里面指定，application&#47;json。后端接受数据失败。具体表现不太记得了好像都是null。后来前端加了content-type就好了。accept比较好理解就是发起请求放想要接受的内容。content-type是服务器，是响应类型的话。客户端在发送请求时压根就不知道啊，也不应该由客户端来设置。<br>所以我想问的是，accept相关的都是请求头里面的数据<br>content-type相关的都是响应头里的数据么?<br>至于我前面正确的写法应该是在accept里面设置json类型。错写了content-type。框架做了兼容处理(在服务端看起来content-type起作用了)?<br>谢谢老师","like_count":5,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456184,"discussion_content":"客户端在发送请求的时候也有义务设置content-type，也应该是知道数据是什么类型的，你设置成json，服务器看到了就好处理。\n\ncontent-type是实体字段，请求响应里都可以出现。\n\naccept是告诉服务器，客户端支持什么类型，防止服务器发过来的数据不认识。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561943379,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":198343,"user_name":"钱","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1585446132,"is_pvip":false,"replies":[{"id":"74806","content":"<br>1.这个是rfc的规定，其实以前还要小。<br><br>2.http协议对大小没有限制，这些应该都是网站服务器做的限制，比如Nginx就可以设置client body的大小。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1585531487,"ip_address":"","comment_id":198343,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18765315316","product_id":100029001,"comment_content":"做web开发有两个问题，估计许多人都遇到过，一个是乱码问题，这个是字符集设置不一致导致的具体哪里设置的不一致通常需要观察所有需要数据转换的地方，一般是客户端和服务器端不一致了。另外，就是文件上传，这个格式一定要设置对，否则就会感到莫名其妙。<br>我想请教老师两个问题：<br>1：看到说浏览器最多会有六个连接并发执行，为什么是六个，不会是因为六六大顺吧？<br>2：文件上传的速度和文件的大小密切相关，文件上传的大小限制都是有哪些限制或控制？之前，这是老早了，发现有些框架默认只能是2g","like_count":4,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489685,"discussion_content":"\n1.这个是rfc的规定，其实以前还要小。\n\n2.http协议对大小没有限制，这些应该都是网站服务器做的限制，比如Nginx就可以设置client body的大小。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585531487,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108974,"user_name":"-W.LI-","can_delete":false,"product_type":"c1","uid":1210699,"ip_address":"","ucode":"3556786538664F","user_header":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","comment_is_top":false,"comment_ctime":1561943306,"is_pvip":false,"replies":[{"id":"39434","content":"1.accept是你说的第一个意思，没有第二个意思。<br><br>2.第二个意思应该用Content-Type<br><br>3.看后台逻辑如何处理，数据是肯定可以拿到的，而且json也属于text。<br><br>4.在请求头里可以加content-type字段，表示请求体的数据类型。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1561946448,"ip_address":"","comment_id":108974,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18741812490","product_id":100029001,"comment_content":"老师好!那accept是不是有两个语意<br>1.客户端希望接受(支持)的数据类型<br>2.我发送的数据就是这个类型的。请用这些方式解析?<br>问题:accept指定text。实际传的数据是一个json这样的后台会用text解析。然后拿不到数据是么?在请求头里加content -type这些字段会起作用么?","like_count":4,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456187,"discussion_content":"1.accept是你说的第一个意思，没有第二个意思。\n\n2.第二个意思应该用Content-Type\n\n3.看后台逻辑如何处理，数据是肯定可以拿到的，而且json也属于text。\n\n4.在请求头里可以加content-type字段，表示请求体的数据类型。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561946448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214681,"user_name":"Jinlee","can_delete":false,"product_type":"c1","uid":1644723,"ip_address":"","ucode":"8EDA9B0C5184EA","user_header":"https://static001.geekbang.org/account/avatar/00/19/18/b3/848ffa10.jpg","comment_is_top":false,"comment_ctime":1588781208,"is_pvip":false,"replies":[{"id":"79493","content":"回答的很好。<br><br>第二个问题，少了个content-language，而且charset不能同时使用两种编码。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1588813149,"ip_address":"","comment_id":214681,"utype":1}],"discussion_count":2,"race_medal":1,"score":"14473683096","product_id":100029001,"comment_content":"1. 含义：服务器，你返回的数据编码方式最好是gzip或者deflate，实在不行返回其他的编码方式也行，但是，我不接受br类型的数据编码方式<br><br>模拟服务器响应头：<br>HTTP&#47;1.1 200 OK<br>Content-Encoding: gzip <br><br>2. 请求头：<br>POST &#47; HTTP&#47;1.1<br>Content-type:text&#47;json; chartset=GBK, utf-8<br><br>3. 收发快递比喻：<br>MIME type就是要发收的具体物品，如文件、生鲜、衣物等。Encoding就是快递的包装方式，如果是文件呢，那我就用专用文件袋给你寄过去；如果是生鲜，那我就给你套个保鲜泡沫寄过去；如果是衣物，那我就给你个一般的快递包装寄过去。<br><br>参考其他优秀同学的答案😬<br><br>","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494173,"discussion_content":"回答的很好。\n\n第二个问题，少了个content-language，而且charset不能同时使用两种编码。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588813149,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1644723,"avatar":"https://static001.geekbang.org/account/avatar/00/19/18/b3/848ffa10.jpg","nickname":"Jinlee","note":"","ucode":"8EDA9B0C5184EA","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":260084,"discussion_content":"好滴，谢谢老师","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588846861,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109644,"user_name":"啦啦啦","can_delete":false,"product_type":"c1","uid":1131687,"ip_address":"","ucode":"6B12EC90A62525","user_header":"https://static001.geekbang.org/account/avatar/00/11/44/a7/171c1e86.jpg","comment_is_top":false,"comment_ctime":1562071003,"is_pvip":false,"replies":[{"id":"39769","content":"继续努力。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1562116080,"ip_address":"","comment_id":109644,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14446972891","product_id":100029001,"comment_content":"不错不错，靠谱这篇，天天看这些参数一直不知道具体意思，今天老师讲了以后理解了","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456495,"discussion_content":"继续努力。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562116080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":303362,"user_name":"兔嘟嘟","can_delete":false,"product_type":"c1","uid":2028811,"ip_address":"","ucode":"5A9042B4C7670C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f5/0b/73628618.jpg","comment_is_top":false,"comment_ctime":1626751719,"is_pvip":false,"replies":[{"id":"109809","content":"http协议当初设计的时候可没有考虑过前后端开发的问题，它的目标是给互联网上的各种人群去阅读，所以就需要有语言编码。<br><br>在你说的开发领域，前后端都约定好了，自然就不需要用accept-language来交换信息了，但对于普通的浏览网页来说，还是要用这个字段的。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1626758749,"ip_address":"","comment_id":303362,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10216686311","product_id":100029001,"comment_content":"罗老师，我不是很能理解accept-language这类字段的意义，因为我们开发前后端肯定是有一套接口文档的，里面约定了各种开发细节，前后端应该使用什么编码什么语言，为何还要在报文里去提accept-language？<br>总不能前端写好了，发送一个报文给后端，后端程序员慢慢看里面的字段，再开始后端的编程吧？","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523648,"discussion_content":"http协议当初设计的时候可没有考虑过前后端开发的问题，它的目标是给互联网上的各种人群去阅读，所以就需要有语言编码。\n\n在你说的开发领域，前后端都约定好了，自然就不需要用accept-language来交换信息了，但对于普通的浏览网页来说，还是要用这个字段的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626758749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2028811,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f5/0b/73628618.jpg","nickname":"兔嘟嘟","note":"","ucode":"5A9042B4C7670C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384803,"discussion_content":"理解了，感谢罗老师，这种突如其来的神经质问题平时也没人去探讨，感谢罗老师的解答","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1626760500,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":145625,"user_name":"蓝配鸡","can_delete":false,"product_type":"c1","uid":1348738,"ip_address":"","ucode":"C79A7CA8885B7C","user_header":"https://static001.geekbang.org/account/avatar/00/14/94/82/d0a417ba.jpg","comment_is_top":false,"comment_ctime":1572332036,"is_pvip":false,"replies":[{"id":"56227","content":"good，很勤奋啊。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1572337474,"ip_address":"","comment_id":145625,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10162266628","product_id":100029001,"comment_content":"试着解释一下这个请求头“Accept-Encoding: gzip, deflate;q=1.0, *;q=0.5, br;q=0”，再模拟一下服务器的响应头。<br>我希望用GZIP或者deflate压缩算法，实在不行给我其他的算法也行，但千万别给我br压缩过的数据，我这边可不会这个算法！<br><br>假设你要使用 POST 方法向服务器提交一些 JSON 格式的数据，里面包含有中文，请求头应该是什么样子的呢？<br>content-type: zh-CN, zh, charset=utf-8, application&#47;json<br><br>试着用快递发货收货比喻一下 MIME、Encoding 等概念。<br>比如说我想在某宝上买乐高，<br>MIME 确定了我购买的乐高种类，是成品呢， 还是零散的需要自己拼装。<br>Encoding好比这个乐高的包装方式，某宝可以选择把所有的乐高零件全都放在一个包装里， 也可以分模块把零件放在不同的包装里。 我也可以主动告诉某宝我想要哪一种包装方式。","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472497,"discussion_content":"good，很勤奋啊。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572337474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":111942,"user_name":"aNught","can_delete":false,"product_type":"c1","uid":1401349,"ip_address":"","ucode":"FA39358106B4B9","user_header":"https://static001.geekbang.org/account/avatar/00/15/62/05/30ae6faf.jpg","comment_is_top":false,"comment_ctime":1562640862,"is_pvip":false,"replies":[{"id":"40765","content":"accep-encoding:gzip表示客户端支持gzip，但服务器发过来的是否经过压缩需要看content-encoding，也有可能不压缩。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1562677355,"ip_address":"","comment_id":111942,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10152575454","product_id":100029001,"comment_content":"老师，您好，如果我accep-encoding填写了gzip，那服务端发来的报文是是gzip压缩过的吗，我需要解压才行是吗？","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457509,"discussion_content":"accep-encoding:gzip表示客户端支持gzip，但服务器发过来的是否经过压缩需要看content-encoding，也有可能不压缩。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562677355,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108970,"user_name":"djfhchdh","can_delete":false,"product_type":"c1","uid":1484184,"ip_address":"","ucode":"E71D75328CE398","user_header":"https://static001.geekbang.org/account/avatar/00/16/a5/98/a65ff31a.jpg","comment_is_top":false,"comment_ctime":1561943106,"is_pvip":false,"replies":[{"id":"39436","content":"√","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1561946480,"ip_address":"","comment_id":108970,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10151877698","product_id":100029001,"comment_content":"1.服务器优先按照gzip和deflate压缩，否则用其他压缩算法，但是不用brotli算法","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456186,"discussion_content":"√","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561946480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282085,"user_name":"搏未来","can_delete":false,"product_type":"c1","uid":1034079,"ip_address":"","ucode":"4A339B35E3B419","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c7/5f/2028aae5.jpg","comment_is_top":false,"comment_ctime":1615078914,"is_pvip":false,"replies":[{"id":"102435","content":"总结的很到位！","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1615104908,"ip_address":"","comment_id":282085,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5910046210","product_id":100029001,"comment_content":"Accept表示客户端能接受什么，Content-*表示提供的具体信息，由于客户端与服务端都可以提供信息，所以Content-*是可以在两端都可以用的。","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516615,"discussion_content":"总结的很到位！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615104908,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":196553,"user_name":"Celine","can_delete":false,"product_type":"c1","uid":1926366,"ip_address":"","ucode":"63D5F2E8FB2130","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erwIgbTd3oy4GzkdCUBmz8lHGIIWBwoSIfibgQzwDlQuvTrLlqwTh7p99NBJIsu98ziaYoroQCSENwA/132","comment_is_top":false,"comment_ctime":1585292728,"is_pvip":false,"replies":[{"id":"74438","content":"有小错误，注意没有Content-charset这样的字段。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1585295342,"ip_address":"","comment_id":196553,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5880260024","product_id":100029001,"comment_content":"1，接收的编码格式最好是GUN zip 和deflate ,不接受br,如果还有其他格式。我勉为其难也接受一下吧，权重是0.5；http响应头应该是  Http 1.1 200 Ok  Conten-Encoding: gzip<br>2,Content-Type:Application&#47;json<br>   Content-Language: cn-zh<br>   Content-charset: gbk, utf-8<br><br>    <br>   ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489328,"discussion_content":"有小错误，注意没有Content-charset这样的字段。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585295342,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1959482,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/e6/3a/382cf024.jpg","nickname":"rongyefeng","note":"","ucode":"9A15D947E9D645","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":273144,"discussion_content":"字符编码方式不能同时有两种","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590415808,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":173164,"user_name":"芒果","can_delete":false,"product_type":"c1","uid":1154458,"ip_address":"","ucode":"08E6D77030CEE8","user_header":"https://static001.geekbang.org/account/avatar/00/11/9d/9a/4cf0e500.jpg","comment_is_top":false,"comment_ctime":1579442789,"is_pvip":false,"replies":[{"id":"67163","content":"诚惶诚恐。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1579482972,"ip_address":"","comment_id":173164,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5874410085","product_id":100029001,"comment_content":"给老师点赞，大牛就是大牛","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481983,"discussion_content":"诚惶诚恐。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579482972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168630,"user_name":"Wr","can_delete":false,"product_type":"c1","uid":1713790,"ip_address":"","ucode":"738B316AA2AD66","user_header":"https://static001.geekbang.org/account/avatar/00/1a/26/7e/823c083e.jpg","comment_is_top":false,"comment_ctime":1578126324,"is_pvip":false,"replies":[{"id":"65554","content":"<br>1.对。<br><br>2.不对。accept头表示的希望服务器返回的数据类型，这里的场景是向服务器说明客户端发送的数据类型，所以应该用content头。<br><br>3.对。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1578273635,"ip_address":"","comment_id":168630,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5873093620","product_id":100029001,"comment_content":"1. 客户端最想接受的编码格式是gzip，deflate，权重是1，不接受br格式，如果还有其他格式，权重是0.5<br>2. accept-chartset：utf-8，<br>    accept-langue：zh-cn，<br>3. mime可以看作快递物品的类型，encoding可以看作打包物品的方法","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480273,"discussion_content":"\n1.对。\n\n2.不对。accept头表示的希望服务器返回的数据类型，这里的场景是向服务器说明客户端发送的数据类型，所以应该用content头。\n\n3.对。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578273635,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":145577,"user_name":"蓝配鸡","can_delete":false,"product_type":"c1","uid":1348738,"ip_address":"","ucode":"C79A7CA8885B7C","user_header":"https://static001.geekbang.org/account/avatar/00/14/94/82/d0a417ba.jpg","comment_is_top":false,"comment_ctime":1572319265,"is_pvip":false,"replies":[{"id":"56209","content":"浏览器作为客户端，它自己是知道可以处理什么字符集和编码的，所以就在accept字段里列出支持的类型。<br><br>比如，你自己要写一个浏览器，只支持英语，那么就可以设置accept: en。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1572323228,"ip_address":"","comment_id":145577,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5867286561","product_id":100029001,"comment_content":"有个问题：<br>浏览器是依据什么来设置 accept 头字段的呢？还是说浏览器只是把所有可以accept的类型列出来？","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472476,"discussion_content":"浏览器作为客户端，它自己是知道可以处理什么字符集和编码的，所以就在accept字段里列出支持的类型。\n\n比如，你自己要写一个浏览器，只支持英语，那么就可以设置accept: en。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572323228,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":145445,"user_name":"听雨","can_delete":false,"product_type":"c1","uid":1254493,"ip_address":"","ucode":"252754F9FCFF0C","user_header":"https://static001.geekbang.org/account/avatar/00/13/24/5d/65e61dcb.jpg","comment_is_top":false,"comment_ctime":1572274222,"is_pvip":false,"replies":[{"id":"56149","content":"Accept-*字段是请求头字段，只要是发请求，get&#47;post都可以用。<br><br>Content-*字段是实体头字段，只要有body，无论是请求响应、get&#47;post都可以带。<br><br>它们的使用场景与get&#47;post、请求&#47;响应是混杂的，还是要多注意多体会。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1572310998,"ip_address":"","comment_id":145445,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5867241518","product_id":100029001,"comment_content":"老师，是否可以这样理解：<br>get请求下，请求使用Accept-*字段，响应使用Content-*；post的话，请求相应就都需要用Content-*字段","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472401,"discussion_content":"Accept-*字段是请求头字段，只要是发请求，get/post都可以用。\n\nContent-*字段是实体头字段，只要有body，无论是请求响应、get/post都可以带。\n\n它们的使用场景与get/post、请求/响应是混杂的，还是要多注意多体会。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572310998,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112458,"user_name":"啦啦啦","can_delete":false,"product_type":"c1","uid":1131687,"ip_address":"","ucode":"6B12EC90A62525","user_header":"https://static001.geekbang.org/account/avatar/00/11/44/a7/171c1e86.jpg","comment_is_top":false,"comment_ctime":1562739641,"is_pvip":false,"replies":[{"id":"40934","content":"努力学习！","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1562754540,"ip_address":"","comment_id":112458,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5857706937","product_id":100029001,"comment_content":"二刷","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457741,"discussion_content":"努力学习！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562754540,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":110415,"user_name":"响雨","can_delete":false,"product_type":"c1","uid":1581705,"ip_address":"","ucode":"C5FB3A3BC68F92","user_header":"https://static001.geekbang.org/account/avatar/00/18/22/89/73397ccb.jpg","comment_is_top":false,"comment_ctime":1562251581,"is_pvip":false,"replies":[{"id":"40162","content":"应该用content-language，post时应该用content*字段描述body的语言。<br><br>","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1562288616,"ip_address":"","comment_id":110415,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5857218877","product_id":100029001,"comment_content":"Content-type: application&#47;json; charset=utf-8<br>Accept-language: zh-CN<br>python中的requests模块发送url请求，post时一定要在header中加上Content-type，不然会报错。<br>老师，我在mime中放了1G的MP4视频，为什么只有声音没有画面啊。<br>","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456869,"discussion_content":"应该用content-language，post时应该用content*字段描述body的语言。\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562288616,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1477120,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI8mFt5wSkia31qc8paRg2uPSB6AuEBDricrSxvFBuTpP3NnnflekpJ7wqvN0nRrJyu7zVbzd7Lwjxw/132","nickname":"Geek_steven_wang","note":"","ucode":"8CC8F4C9726191","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5039,"discussion_content":"解释一下请求头“Accept-Encoding: gzip, deflate;q=1.0, *;q=0.5, br;q=0”，\n请服务器优先用gzip压缩，权重为1，其次是deflate权重0.5，最后用br。\n\n请求头\n Accept: application/json\nAccept-Encoding: gzip, deflate, br\nAccept-Language: zh-CN, zh, en\nAccept-Charset: utf-8，gbk\n\n\n小张 想发个快递，生鲜大闸蟹（Mime）请带保鲜盒或保鲜袋，优先保鲜盒（encoding）\n快递小哥 好的，我们可以送当日生鲜（mime）, 我们用保鲜盒。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565908709,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":110053,"user_name":"聂成阳","can_delete":false,"product_type":"c1","uid":1388926,"ip_address":"","ucode":"BA339600C85E1D","user_header":"https://static001.geekbang.org/account/avatar/00/15/31/7e/ce1cf9b2.jpg","comment_is_top":false,"comment_ctime":1562161781,"is_pvip":true,"replies":[{"id":"39923","content":"发post请求，服务器也会有响应报文，所以就需要用accept头告诉服务器，客户端能够接受什么样的数据。<br><br>否则服务器发过来一个pb或者msgpack，你就没法处理了。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1562203543,"ip_address":"","comment_id":110053,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5857129077","product_id":100029001,"comment_content":"老师，我访问极客时间https:&#47;&#47;account.geekbang.org&#47;dashboard&#47;user它的请求头是这样的：<br>POST &#47;account&#47;user HTTP&#47;1.1<br>Host: account.geekbang.org<br>Connection: keep-alive<br>Content-Length: 2<br>Accept: application&#47;json, text&#47;plain, *&#47;*<br>Origin: https:&#47;&#47;account.geekbang.org<br>User-Agent: Mozilla&#47;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#47;537.36 (KHTML, like Gecko) Chrome&#47;75.0.3770.100 Safari&#47;537.36<br>Content-Type: application&#47;json<br>Referer: https:&#47;&#47;account.geekbang.org&#47;dashboard&#47;buy<br>Accept-Encoding: gzip, deflate, br<br>Accept-Language: zh-CN,zh;q=0.9<br>为啥post也使用accept-*呢？","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456698,"discussion_content":"发post请求，服务器也会有响应报文，所以就需要用accept头告诉服务器，客户端能够接受什么样的数据。\n\n否则服务器发过来一个pb或者msgpack，你就没法处理了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562203543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1959482,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/e6/3a/382cf024.jpg","nickname":"rongyefeng","note":"","ucode":"9A15D947E9D645","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":273132,"discussion_content":"为什么我用这个URI访问的方式是GET？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590415181,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109647,"user_name":"啦啦啦","can_delete":false,"product_type":"c1","uid":1131687,"ip_address":"","ucode":"6B12EC90A62525","user_header":"https://static001.geekbang.org/account/avatar/00/11/44/a7/171c1e86.jpg","comment_is_top":false,"comment_ctime":1562071347,"is_pvip":false,"replies":[{"id":"39768","content":"学习也要劳逸结合，有张有弛。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1562116071,"ip_address":"","comment_id":109647,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5857038643","product_id":100029001,"comment_content":"今天凌晨买的课程，然后现在一口气看完了","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456497,"discussion_content":"学习也要劳逸结合，有张有弛。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562116071,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109450,"user_name":"六维","can_delete":false,"product_type":"c1","uid":1022887,"ip_address":"","ucode":"EB1C15AC06A8DF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9b/a7/440aff07.jpg","comment_is_top":false,"comment_ctime":1562034881,"is_pvip":false,"replies":[{"id":"39634","content":"1对。<br><br>2需要使用content-*字段，不能用accept字段，可参考其他同学的回答。<br><br>3的比喻还差一点，换成外包装比较合适。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1562039637,"ip_address":"","comment_id":109450,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5857002177","product_id":100029001,"comment_content":"1、gzip的权重为1，deflate权重为1，其他的为0.5，br拒绝。<br>2、<br>Accept:appliction&#47;json<br>Accept-Encoding:gzip,deflate<br>Accept-Language:zh-CN,zh;q=0.8<br>3、MIME类比快递中的物品类型，如：酒类、生鲜类、药品类等，Encoding类比现付、货到付款（好像不是很贴切）","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456416,"discussion_content":"1对。\n\n2需要使用content-*字段，不能用accept字段，可参考其他同学的回答。\n\n3的比喻还差一点，换成外包装比较合适。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562039637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109340,"user_name":"苦行僧","can_delete":false,"product_type":"c1","uid":1055334,"ip_address":"","ucode":"726024A9A9CF44","user_header":"https://static001.geekbang.org/account/avatar/00/10/1a/66/2d9db9ed.jpg","comment_is_top":false,"comment_ctime":1562022998,"is_pvip":false,"replies":[{"id":"39595","content":"好经验多分享。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1562028772,"ip_address":"","comment_id":109340,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5856990294","product_id":100029001,"comment_content":"content-type 千万不能填错 否则其他终端解析会存在问题","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456365,"discussion_content":"好经验多分享。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562028772,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109306,"user_name":"レイン小雨","can_delete":false,"product_type":"c1","uid":1219933,"ip_address":"","ucode":"45BED977EFE852","user_header":"https://static001.geekbang.org/account/avatar/00/12/9d/5d/3fdead91.jpg","comment_is_top":false,"comment_ctime":1561996645,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5856963941","product_id":100029001,"comment_content":"真棒","like_count":1},{"had_liked":false,"id":109078,"user_name":"djfhchdh","can_delete":false,"product_type":"c1","uid":1484184,"ip_address":"","ucode":"E71D75328CE398","user_header":"https://static001.geekbang.org/account/avatar/00/16/a5/98/a65ff31a.jpg","comment_is_top":false,"comment_ctime":1561957092,"is_pvip":false,"replies":[{"id":"39491","content":"对，不过最好还是加上content-language。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1561965443,"ip_address":"","comment_id":109078,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5856924388","product_id":100029001,"comment_content":"content-type: application&#47;json; charset=gbk   如果有压缩用content-encoding指定下，使用的语言可以通过charset判断出来     ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456235,"discussion_content":"对，不过最好还是加上content-language。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561965443,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1484184,"avatar":"https://static001.geekbang.org/account/avatar/00/16/a5/98/a65ff31a.jpg","nickname":"djfhchdh","note":"","ucode":"E71D75328CE398","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":710,"discussion_content":"嗯，感谢老师解答，辛苦！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561972371,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109029,"user_name":"Aviation","can_delete":false,"product_type":"c1","uid":1140593,"ip_address":"","ucode":"38A083FD04951C","user_header":"https://static001.geekbang.org/account/avatar/00/11/67/71/ef1100c7.jpg","comment_is_top":false,"comment_ctime":1561950778,"is_pvip":false,"replies":[{"id":"39464","content":"有收获就是好事。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1561952292,"ip_address":"","comment_id":109029,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5856918074","product_id":100029001,"comment_content":"这里面的, 优先级高于; 第一次理解了.  还有q值.  哈哈","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456219,"discussion_content":"有收获就是好事。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561952292,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108976,"user_name":"djfhchdh","can_delete":false,"product_type":"c1","uid":1484184,"ip_address":"","ucode":"E71D75328CE398","user_header":"https://static001.geekbang.org/account/avatar/00/16/a5/98/a65ff31a.jpg","comment_is_top":false,"comment_ctime":1561943446,"is_pvip":false,"replies":[{"id":"39438","content":"不应该用accept头，而是应该用content-*头，因为accept是“希望”服务器返回什么样的数据，问题里是客户端发出的数据，要告诉服务器是什么样的数据。<br><br>试着再改一下。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1561946597,"ip_address":"","comment_id":108976,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5856910742","product_id":100029001,"comment_content":"2. accept language: zh-CN  accept: application&#47; json   post json数据一般会有压缩，因此accept encoding: gzip","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456188,"discussion_content":"不应该用accept头，而是应该用content-*头，因为accept是“希望”服务器返回什么样的数据，问题里是客户端发出的数据，要告诉服务器是什么样的数据。\n\n试着再改一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561946597,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":347244,"user_name":"Geek_0e3b40","can_delete":false,"product_type":"c1","uid":1908431,"ip_address":"","ucode":"8C5468129A684E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM7JkdLdZXNYZeopVSxeI8ml4MptQMCWI7oIHaJpfYuYjlV9Efic7x19lWickckLQzmTuFlgCVmVicZ9A/132","comment_is_top":false,"comment_ctime":1653845862,"is_pvip":false,"replies":[{"id":"126693","content":"great","user_name":"作者回复","user_name_real":"编辑","uid":"1181974","ctime":1654086301,"ip_address":"","comment_id":347244,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1653845862","product_id":100029001,"comment_content":"1. 客户端希望收到的数据：<br>        压缩格式：gzip权重为1，deflate权重为1，任意类型权重为0.5，br权重为0<br>    服务器返回的数据:<br>        Content-Encoding: gzip<br>2.<br>    Accept: text&#47;JSON<br>    Accept-Encoding: gzip<br>    Accept-Language: zh-CN<br>3. MIME好比是包裹的物品类型，易碎品，食品等，Encoding好比是打包方式，如用缓冲垫包裹，密封加冰等","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574499,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654086301,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":346431,"user_name":"Geek凹","can_delete":false,"product_type":"c1","uid":1843828,"ip_address":"","ucode":"E9EF800812EAA1","user_header":"","comment_is_top":false,"comment_ctime":1653129905,"is_pvip":true,"replies":[{"id":"126384","content":"great","user_name":"作者回复","user_name_real":"编辑","uid":"1181974","ctime":1653192116,"ip_address":"","comment_id":346431,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1653129905","product_id":100029001,"comment_content":"accept-* 标识http请求期望响应数据模式，它只出现在客户端（浏览器）请求报文头；content-*标识了http报文body部分数据模式，http请求和响应都可具有body，可以看出body不区分请求还是响应","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573075,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653192116,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":338456,"user_name":"Geek_76c9ea","can_delete":false,"product_type":"c1","uid":1399621,"ip_address":"","ucode":"9B8D0D140134BA","user_header":"","comment_is_top":false,"comment_ctime":1647508081,"is_pvip":true,"replies":[{"id":"123731","content":"great","user_name":"作者回复","user_name_real":"编辑","uid":"1181974","ctime":1647562483,"ip_address":"","comment_id":338456,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1647508081","product_id":100029001,"comment_content":"希望得到gizp和deflate压缩合适的数据，其他格式的也可，但拒绝br的<br>Content-type:application&#47;json;content-language;zh<br>什么类型的商品，改用什么去包装","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556874,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647562483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312113,"user_name":"Cris","can_delete":false,"product_type":"c1","uid":1473520,"ip_address":"","ucode":"F8A287134F1078","user_header":"https://static001.geekbang.org/account/avatar/00/16/7b/f0/269139d5.jpg","comment_is_top":false,"comment_ctime":1631629357,"is_pvip":false,"replies":[{"id":"113122","content":"是的，从字段名字就可以看出来，表示“我能接受XXX”。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1631670573,"ip_address":"","comment_id":312113,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631629357","product_id":100029001,"comment_content":"老师，Accept和Accept-Encoding字段是不是只能是请求头字段？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526867,"discussion_content":"是的，从字段名字就可以看出来，表示“我能接受XXX”。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631670573,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311075,"user_name":"维他命","can_delete":false,"product_type":"c1","uid":1954783,"ip_address":"","ucode":"FA62363F61B87E","user_header":"https://static001.geekbang.org/account/avatar/00/1d/d3/df/34fd4ebf.jpg","comment_is_top":false,"comment_ctime":1631064418,"is_pvip":false,"replies":[{"id":"112752","content":"是的，理解的很对。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1631085538,"ip_address":"","comment_id":311075,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631064418","product_id":100029001,"comment_content":"Content-相关的头字段是用于描述 body 数据的信息，那么它是不是相当于都是通用字段？因为浏览器在发送 post 请求的时候也要携带 body 数据，所以它应该也要告诉服务器 body 数据的信息吧。。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526463,"discussion_content":"是的，理解的很对。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631085538,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":310668,"user_name":"a sycamore tree","can_delete":false,"product_type":"c1","uid":2743838,"ip_address":"","ucode":"397A7B2870EF50","user_header":"https://static001.geekbang.org/account/avatar/00/29/de/1e/b339439a.jpg","comment_is_top":false,"comment_ctime":1630830151,"is_pvip":false,"replies":[{"id":"112573","content":"基本正确，可参考其他同学的回答。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1630883049,"ip_address":"","comment_id":310668,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1630830151","product_id":100029001,"comment_content":"1.Content-Encoding:gzip<br>2.Aceept-Language:zh-CN<br>3.MIME:比作快递里面的东西<br>Ecoding：比作给快递进行二次包装","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526304,"discussion_content":"基本正确，可参考其他同学的回答。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630883049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":306402,"user_name":"cake","can_delete":false,"product_type":"c1","uid":1966533,"ip_address":"","ucode":"55A7FC6CC1204C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/01/c5/b48d25da.jpg","comment_is_top":false,"comment_ctime":1628526280,"is_pvip":false,"replies":[{"id":"110947","content":"有先后顺序。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1628567911,"ip_address":"","comment_id":306402,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1628526280","product_id":100029001,"comment_content":"<br>Accept-Language: zh-CN, zh, en<br>“最好给我 zh-CN 的汉语文字，如果没有就用其他的汉语方言，如果还没有就给英文”。 老师请问下这个都是默认权重，为什么说最好给我汉语文字呢","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524749,"discussion_content":"有先后顺序。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628567911,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":300718,"user_name":"Stacey","can_delete":false,"product_type":"c1","uid":1384672,"ip_address":"","ucode":"372600DB8B582E","user_header":"https://static001.geekbang.org/account/avatar/00/15/20/e0/37cf9011.jpg","comment_is_top":false,"comment_ctime":1625325323,"is_pvip":false,"replies":[{"id":"108944","content":"继续努力！","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1625371843,"ip_address":"","comment_id":300718,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1625325323","product_id":100029001,"comment_content":"老师讲的好好，把字段的来由都讲清楚了，我之前都是死记硬背","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522803,"discussion_content":"继续努力！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625371843,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":294049,"user_name":"Unknown element","can_delete":false,"product_type":"c1","uid":2028277,"ip_address":"","ucode":"34A129800D0238","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f2/f5/b82f410d.jpg","comment_is_top":false,"comment_ctime":1621727793,"is_pvip":false,"replies":[{"id":"106663","content":"这两个头字段没有要求说一定要匹配的。<br><br>虽然客户端用accept说了支持哪些格式，但服务器也可以无视，返回其他的格式，一般来说客户端都可以处理。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1621753327,"ip_address":"","comment_id":294049,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1621727793","product_id":100029001,"comment_content":"老师实验环境的请求头中的accept和响应头中的content-type不匹配啊？比如访问http:&#47;&#47;www.chrono.com&#47;15-1?name=a.json请求头中的accept是<br>Accept: text&#47;html,application&#47;xhtml+xml,application&#47;xml;q=0.9,image&#47;avif,image&#47;webp,image&#47;apng,*&#47;*;q=0.8,application&#47;signed-exchange;v=b3;q=0.9<br>而响应的content-type是application&#47;json，没有在accept字段中出现？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520487,"discussion_content":"这两个头字段没有要求说一定要匹配的。\n\n虽然客户端用accept说了支持哪些格式，但服务器也可以无视，返回其他的格式，一般来说客户端都可以处理。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621753327,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289963,"user_name":"Geek_Maggie","can_delete":false,"product_type":"c1","uid":1609708,"ip_address":"","ucode":"3B74088B2C7B93","user_header":"https://static001.geekbang.org/account/avatar/00/18/8f/ec/c30b45d4.jpg","comment_is_top":false,"comment_ctime":1619279694,"is_pvip":false,"replies":[{"id":"105141","content":"great。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1619312184,"ip_address":"","comment_id":289963,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1619279694","product_id":100029001,"comment_content":"1.试着解释一下这个请求头“Accept-Encoding: gzip, deflate;q=1.0, *;q=0.5, br;q=0”，再模拟一下服务器的响应头<br><br>解释：客户端支持的压缩格式为gzip和deflate，不接受br格式。其他格式权重为0.5<br><br>服务器响应头：Content-Encoding:gzip<br><br>2.假设你要使用 POST 方法向服务器提交一些 JSON 格式的数据，里面包含有中文，请求头应该是什么样子的呢？<br><br>content-type: application&#47;json,charset=gbk<br>content-language:zh-cn,zh<br><br>3.试着用快递发货收货比喻一下MIME、Encoding等概念。<br><br>MIME用于标记数据种类的。就像快递发货时需要知道物品的种类，是文件类，日用品类、生鲜类、服装类或者其他的类型。<br>Encoding用于表示数据编码格式。就像快递打包，对不同种类物品要有不同包装方式。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519069,"discussion_content":"great。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619312184,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":283018,"user_name":"刘杰","can_delete":false,"product_type":"c1","uid":2460800,"ip_address":"","ucode":"5B3A55700D6063","user_header":"https://static001.geekbang.org/account/avatar/00/25/8c/80/7310baac.jpg","comment_is_top":false,"comment_ctime":1615520418,"is_pvip":false,"replies":[{"id":"102707","content":"<br>1.不太正确，br是brotli压缩算法。<br><br>2.应该用content-type字段，告诉服务器body的信息。<br><br>可以再参考其他同学的回答。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1615529149,"ip_address":"","comment_id":283018,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1615520418","product_id":100029001,"comment_content":"1、客户端可接受gzip编码格式的数据权重为1，也可接口编码格式为deflate编码格式的数据，权重为1，其次是任意数据类型，权重是0.5，最后是换行，权重为0。响应头应该是Content-Encoding: gzip,deflate,br<br>2、Accept:text&#47;html,application&#47;json<br>     Accept-Language: zh-CN,zh<br>3、客户请求发快递时，告诉可以接收的快递类型Accept是text&#47;html,application&#47;json，可以接收的数据编码Accept-Encoding是gzip,deflate，可以接收的语言Accept-Language是zh-CN,zh，可以接收的字符集Accept-Charset是utf-8，发货公司收到请求，给客户发的货是，<br>Content-type:text&#47;html,appliaction&#47;json;charset=utf-8<br>Content-Encoding:gzip,deflate<br>Content-Language:zh-CN,zh","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516911,"discussion_content":"\n1.不太正确，br是brotli压缩算法。\n\n2.应该用content-type字段，告诉服务器body的信息。\n\n可以再参考其他同学的回答。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615529149,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":281391,"user_name":"💻","can_delete":false,"product_type":"c1","uid":2340391,"ip_address":"","ucode":"91DA148F3675EB","user_header":"https://static001.geekbang.org/account/avatar/00/23/b6/27/91d81a08.jpg","comment_is_top":false,"comment_ctime":1614736685,"is_pvip":false,"replies":[{"id":"102168","content":"可以参考一下其他同学的答案。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1614740682,"ip_address":"","comment_id":281391,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1614736685","product_id":100029001,"comment_content":"2.content-type: application&#47;json;charset=UTF-8","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516386,"discussion_content":"可以参考一下其他同学的答案。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614740682,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":281329,"user_name":"James","can_delete":false,"product_type":"c1","uid":1036309,"ip_address":"","ucode":"7A0DC75746CB3A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d0/15/c5dc2b0d.jpg","comment_is_top":false,"comment_ctime":1614693344,"is_pvip":false,"replies":[{"id":"102155","content":"我觉得这样分类应该说是含义更明确一些吧，分得细，我们用起来就更容易一些，而且实体头字段描述的是body，从重要性上来看单独一类也是应该的。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1614734481,"ip_address":"","comment_id":281329,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1614693344","product_id":100029001,"comment_content":"想问下老师从分类上来看，实体首部也是通用首部（请求报文和响应报文都会使用），那怎么还单独分了一个类来描述他，不应该归于通用首部或者属于通用首部的一个分支吗？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516362,"discussion_content":"我觉得这样分类应该说是含义更明确一些吧，分得细，我们用起来就更容易一些，而且实体头字段描述的是body，从重要性上来看单独一类也是应该的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614734481,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":277694,"user_name":"乘风破浪","can_delete":false,"product_type":"c1","uid":2406841,"ip_address":"","ucode":"937AF15F3FEBDC","user_header":"https://static001.geekbang.org/account/avatar/00/24/b9/b9/9e4d7aa4.jpg","comment_is_top":false,"comment_ctime":1612517419,"is_pvip":false,"replies":[{"id":"100833","content":"Content-*字段是为了方便服务器端处理，不用去费力解析数据，就知道是个什么类型，如果不给这个字段服务器就只能猜了。<br><br>当然，如何客户端和服务器提前约定好了，都知道内容肯定是图片，那么这个字段就没有必要了。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1612653775,"ip_address":"","comment_id":277694,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1612517419","product_id":100029001,"comment_content":"不是很理解为什么Post要带Content-*字段，以及为什么还有后继影响？<br>对客户端而言，它有解析需求。<br>我理解，对于服务器，客户端POST一个图片，服务器只是收到一个文件，只要是2进制方式传上去的，就ok，怎么查看的，又为什么有问题？<br>没有实战过，请有相关经验的同学解惑。<br>","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515142,"discussion_content":"Content-*字段是为了方便服务器端处理，不用去费力解析数据，就知道是个什么类型，如果不给这个字段服务器就只能猜了。\n\n当然，如何客户端和服务器提前约定好了，都知道内容肯定是图片，那么这个字段就没有必要了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612653775,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1299095,"avatar":"https://static001.geekbang.org/account/avatar/00/13/d2/97/5f4cd8da.jpg","nickname":"虎虎生威的程坚强","note":"","ucode":"321C89298D3682","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":401440,"discussion_content":"比如上传场景：有些通用的文件类型，可以根据字节流的前n个字节就知道知道类型，不一定不要带上这个content-type，比如图片个视频等，但是对于一些不是常规类型的，如果不指定，服务器可能识别不了，然后默认给了二进制类型，导致用户访问的时候可能出现问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633669858,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244753,"user_name":"Javatar","can_delete":false,"product_type":"c1","uid":2032840,"ip_address":"","ucode":"E216645CDF632C","user_header":"https://static001.geekbang.org/account/avatar/00/1f/04/c8/3c7af100.jpg","comment_is_top":false,"comment_ctime":1598668293,"is_pvip":false,"replies":[{"id":"90091","content":"感谢褒奖。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1598706997,"ip_address":"","comment_id":244753,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1598668293","product_id":100029001,"comment_content":"不吹不黑，老师这个专栏写的真的是通俗易懂。比某网络协议的那个好很多。respect。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504690,"discussion_content":"感谢褒奖。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598706997,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243157,"user_name":"满怀","can_delete":false,"product_type":"c1","uid":1483113,"ip_address":"","ucode":"EFAC662A37D684","user_header":"https://static001.geekbang.org/account/avatar/00/16/a1/69/0ddda908.jpg","comment_is_top":false,"comment_ctime":1597978593,"is_pvip":false,"replies":[{"id":"89648","content":"nice","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1597992084,"ip_address":"","comment_id":243157,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1597978593","product_id":100029001,"comment_content":"Q:假设你要使用 POST 方法向服务器提交一些 JSON 格式的数据，里面包含有中文，请求头应该是什么样子的呢？<br>A:<br>Content-Type：application&#47;json; charset=gbk<br>Content-Language：zh-CN","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504201,"discussion_content":"nice","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597992084,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243152,"user_name":"满怀","can_delete":false,"product_type":"c1","uid":1483113,"ip_address":"","ucode":"EFAC662A37D684","user_header":"https://static001.geekbang.org/account/avatar/00/16/a1/69/0ddda908.jpg","comment_is_top":false,"comment_ctime":1597977778,"is_pvip":false,"replies":[{"id":"89649","content":"包裹类型对应mime很好，不过后面的快递类型（顺丰等）感觉不是太确切，这个更像是tcp&#47;udp&#47;quic&#47;http2等传输方式。<br><br>Encoding可以比喻成货物的包装形式，比如信封、塑料袋、纸箱什么的。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1597992215,"ip_address":"","comment_id":243152,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1597977778","product_id":100029001,"comment_content":"快递收发货都需会有单号信息，而其中的包裹类型(易碎品、生活用品、文档等等)便对应了我们的MIME表示body中传输数据的类型，而其中的快递类型(顺丰、韵达、中通等等)便对应了我们的Encoding表示body中数据的压缩方式。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504199,"discussion_content":"包裹类型对应mime很好，不过后面的快递类型（顺丰等）感觉不是太确切，这个更像是tcp/udp/quic/http2等传输方式。\n\nEncoding可以比喻成货物的包装形式，比如信封、塑料袋、纸箱什么的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597992215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226309,"user_name":"潇潇雨歇","can_delete":false,"product_type":"c1","uid":1251429,"ip_address":"","ucode":"4BD52BF0F0A084","user_header":"https://static001.geekbang.org/account/avatar/00/13/18/65/35361f02.jpg","comment_is_top":false,"comment_ctime":1592032854,"is_pvip":false,"replies":[{"id":"83371","content":"good","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1592091680,"ip_address":"","comment_id":226309,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1592032854","product_id":100029001,"comment_content":"2、Content-Type：application&#47;json；charset=UTF-8<br>Content-Language：zh-CN","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498183,"discussion_content":"good","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592091680,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226307,"user_name":"潇潇雨歇","can_delete":false,"product_type":"c1","uid":1251429,"ip_address":"","ucode":"4BD52BF0F0A084","user_header":"https://static001.geekbang.org/account/avatar/00/13/18/65/35361f02.jpg","comment_is_top":false,"comment_ctime":1592031975,"is_pvip":false,"replies":[{"id":"83370","content":"说的很好。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1592091667,"ip_address":"","comment_id":226307,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1592031975","product_id":100029001,"comment_content":"1、优先接收gzip，deflate编码格式，br编码格式不接受，其他编码格式权重为0.5<br>2、Content-Type为application&#47;json，Content-Language为zh-CN<br>3、MIME就是不同的包裹类型，Encoding就是不同的包装，打包不一样","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498182,"discussion_content":"说的很好。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592091667,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225931,"user_name":"Maske","can_delete":false,"product_type":"c1","uid":1696847,"ip_address":"","ucode":"A19BB41A47E852","user_header":"https://static001.geekbang.org/account/avatar/00/19/e4/4f/df6d810d.jpg","comment_is_top":false,"comment_ctime":1591895716,"is_pvip":true,"replies":[{"id":"83250","content":"<br>1.说的对。<br><br>2.注意是post给服务器，要用头字段说明内容的格式，所以不应该用accept字段。<br><br>3.比喻的不错，后两个有点牵强，但有思考就是好事。<br><br>4.可以参考其他同学的回答，再给出正确的答案。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1591924460,"ip_address":"","comment_id":225931,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591895716","product_id":100029001,"comment_content":"1.客户端接收该请求的资源的压缩类型有gzip,默认权重为1，deflate，指定权重为1，其他类型的权重为0.5，拒绝接收br压缩类型的资源；响应头中的Content-Encoding: gzip。<br>2.<br>POST &#47;path  HTTP&#47;1.1<br>accept: application&#47;json <br>accept-language: zh-CN<br>accept-encoding: gzip, deflate, br<br>3.mime ：快递包裹类型（电子产品、易碎物品、金属制品、衣服等物品）<br>压缩方式：包裹的打包方式，对于易碎物品一般会在包裹中填充泡沫，防止运输过程损坏。对于电子产品如手机或笔记本电脑，其包装盒一般采用多层硬纸板，对于衣服，一般采用多层塑料包装袋或者单层纸板。<br>语言类型：快递应该使用哪家快递公司进行运输<br>字符集：约定送货上门的具体时间（这个类比感觉有点勉强）","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498047,"discussion_content":"\n1.说的对。\n\n2.注意是post给服务器，要用头字段说明内容的格式，所以不应该用accept字段。\n\n3.比喻的不错，后两个有点牵强，但有思考就是好事。\n\n4.可以参考其他同学的回答，再给出正确的答案。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591924460,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":160827,"user_name":"💢 星星💢","can_delete":false,"product_type":"c1","uid":1254392,"ip_address":"","ucode":"A402B765222C35","user_header":"https://static001.geekbang.org/account/avatar/00/13/23/f8/24fcccea.jpg","comment_is_top":false,"comment_ctime":1576040998,"is_pvip":false,"replies":[{"id":"61347","content":"做实验的时候请求头当然是浏览器发出来的，如果要自己构造请求头就要使用telnet了，比较麻烦，如果会Python等脚本语言也可以自己添加请求头。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1576052424,"ip_address":"","comment_id":160827,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1576040998","product_id":100029001,"comment_content":"做实验的时候，想知道老师您是在哪里写好的请求头的，怎么就会出现那些请求头。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477492,"discussion_content":"做实验的时候请求头当然是浏览器发出来的，如果要自己构造请求头就要使用telnet了，比较麻烦，如果会Python等脚本语言也可以自己添加请求头。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576052424,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155833,"user_name":"Edward_Elric","can_delete":false,"product_type":"c1","uid":1121855,"ip_address":"","ucode":"C8114E7FA19D4C","user_header":"https://static001.geekbang.org/account/avatar/00/11/1e/3f/5fc064d4.jpg","comment_is_top":false,"comment_ctime":1574763645,"is_pvip":false,"replies":[{"id":"59942","content":"在“www&#47;conf&#47;http&#47;servers&#47;locations.inc”。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1574815525,"ip_address":"","comment_id":155833,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1574763645","product_id":100029001,"comment_content":"老师好，&#47;15-1?name=file，测试环境您是在哪里配置的那？翻看了conf文件夹中的配置,也没看到在哪里配置的，求解释，谢谢。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475891,"discussion_content":"在“www/conf/http/servers/locations.inc”。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574815525,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":150513,"user_name":"itschenxiang","can_delete":false,"product_type":"c1","uid":1519547,"ip_address":"","ucode":"7D90194AC52435","user_header":"https://static001.geekbang.org/account/avatar/00/17/2f/bb/4236d712.jpg","comment_is_top":false,"comment_ctime":1573548019,"is_pvip":false,"replies":[{"id":"57873","content":"是的，按照http协议，这表明客户端没有解压缩的能力，服务器就不会做压缩。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1573549798,"ip_address":"","comment_id":150513,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1573548019","product_id":100029001,"comment_content":"“如果请求报文里没有 Accept-Encoding 字段，就表示客户端不支持压缩数据；.....”，那请求报文中没有 Accept-Encoding，是不是服务器端一般就不会采用压缩算法？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474185,"discussion_content":"是的，按照http协议，这表明客户端没有解压缩的能力，服务器就不会做压缩。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573549798,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144470,"user_name":"蓝白条纹","can_delete":false,"product_type":"c1","uid":1334712,"ip_address":"","ucode":"953B5EA3743550","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIRrgrGQYmic2XzN3QqE0iakHsyGmoNQTIaicYfBr2xQ7rTBAjlUI82vZNnQUfOHOl5DVSjqiapzQGibiag/132","comment_is_top":false,"comment_ctime":1571931295,"is_pvip":false,"replies":[{"id":"55694","content":"accept-language表示客户端能够识别的编码，但因为http只是协议，服务器也可以不遵守，忽略这个字段的指示，返回任意字符编码的数据。<br><br>不过因为utf-8现在已经非常通用了，所以一般也不会有什么问题。<br><br>当然如果客户端用accept-language:gbk，服务器返回utf-8，这样做就没有完全遵守http协议。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1571964730,"ip_address":"","comment_id":144470,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571931295","product_id":100029001,"comment_content":"老师我测试了一下，好像网页都是回复UTF-8的charset，是不是accept-language其实设置并不会改变返回的charset。可以这样理解吗？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471959,"discussion_content":"accept-language表示客户端能够识别的编码，但因为http只是协议，服务器也可以不遵守，忽略这个字段的指示，返回任意字符编码的数据。\n\n不过因为utf-8现在已经非常通用了，所以一般也不会有什么问题。\n\n当然如果客户端用accept-language:gbk，服务器返回utf-8，这样做就没有完全遵守http协议。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571964730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125884,"user_name":"siloen","can_delete":false,"product_type":"c1","uid":1058734,"ip_address":"","ucode":"526A861A4552FF","user_header":"https://static001.geekbang.org/account/avatar/00/10/27/ae/d17c0de8.jpg","comment_is_top":false,"comment_ctime":1566268092,"is_pvip":false,"replies":[{"id":"46527","content":"*是通配符，就是任何格式都可以，没有特别的限制。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1566354412,"ip_address":"","comment_id":125884,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566268092","product_id":100029001,"comment_content":"Accept *&#47;*代表什么呀","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463734,"discussion_content":"*是通配符，就是任何格式都可以，没有特别的限制。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566354412,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125655,"user_name":"四月的紫色花","can_delete":false,"product_type":"c1","uid":1564190,"ip_address":"","ucode":"67863848E5D766","user_header":"https://static001.geekbang.org/account/avatar/00/17/de/1e/ca04d2c5.jpg","comment_is_top":false,"comment_ctime":1566222127,"is_pvip":false,"replies":[{"id":"46231","content":"<br>1，对<br><br>2，是不是还应该加上accept-encoding。<br><br>3，基本正确。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1566265639,"ip_address":"","comment_id":125655,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1566222127","product_id":100029001,"comment_content":"<br>1.试着解释一下这个请求头“Accept-Encoding: gzip, deflate;q=1.0, *;q=0.5, br;q=0”，再模拟一下服务器的响应头。<br>客户端接受gzip，deflate的压缩格式权重都是1，请优先给我这两种合适的压缩形式，对于其他形式的压缩接受权重为0.5，拒绝br形式的压缩<br>服务器的响应：Content-Encoding：gzip<br>2.假设你要使用 POST 方法向服务器提交一些 JSON 格式的数据，里面包含有中文，请求头应该是什么样子的呢？<br>POST  &#47;  HTTP&#47;1.1<br>Host：www.chrono.com：5080<br>Accept:text&#47;html，apolication&#47;json<br>Accept-Language:zh-CN,en<br><br>3.试着用快递发货收货比喻一下 MIME、Encoding 等概念。<br>MIME就相当于寄快递时填写的那个寄件类型，可以是文件，衣服，海鲜等，即文字，图片，音视频等；Encoding-type就像是快递类型，可以选择用中通或者顺丰或者其他的","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463647,"discussion_content":"\n1，对\n\n2，是不是还应该加上accept-encoding。\n\n3，基本正确。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566265639,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1959482,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/e6/3a/382cf024.jpg","nickname":"rongyefeng","note":"","ucode":"9A15D947E9D645","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":273151,"discussion_content":"不是应该使用content-*字段吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590416196,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125206,"user_name":"ly","can_delete":false,"product_type":"c1","uid":1221628,"ip_address":"","ucode":"5E2B85252DABF3","user_header":"https://static001.geekbang.org/account/avatar/00/12/a3/fc/379387a4.jpg","comment_is_top":false,"comment_ctime":1566118698,"is_pvip":false,"replies":[{"id":"46200","content":"是的。<br><br>accept等字段表示的是客户端对内容的支持能力，服务器需要在这些选项内挑出一个最合适的返回给客户端。<br><br>例如br算法，如果客户端不支持，那么服务器就不会做br压缩。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1566262418,"ip_address":"","comment_id":125206,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566118698","product_id":100029001,"comment_content":"对本课的理解是，这些客户端发起的Accept选项更重要的是建立在服务端对这些选项支持的情况下才有效。例如压缩，压缩的方法应该是服务器中间件实现的（可能支持），跟应用程序业务层应该没有关系；例如语言，我记得java中的spring支持i18n，就是根据accept-language来决定采用哪个国际化配置文件，总之，所有的特性都是需要服务端做好了相应的支持工作才能实现。另外文中提到的content-type，服务端会根据此字段要解析http报文，一旦整错，服务端解析程序可能解析出错。对于服务端返回的content-type，客户端通过这个来显示。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463476,"discussion_content":"是的。\n\naccept等字段表示的是客户端对内容的支持能力，服务器需要在这些选项内挑出一个最合适的返回给客户端。\n\n例如br算法，如果客户端不支持，那么服务器就不会做br压缩。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566262418,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122947,"user_name":"稻草人","can_delete":false,"product_type":"c1","uid":1564387,"ip_address":"","ucode":"F60076B4B60619","user_header":"","comment_is_top":false,"comment_ctime":1565577512,"is_pvip":false,"replies":[{"id":"45186","content":"努力就有收获，贵在坚持。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1565580764,"ip_address":"","comment_id":122947,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565577512","product_id":100029001,"comment_content":"罗老师，您好，您的文章对我这个业余菜鸟来说，简直是及时雨，文章通俗易懂，我由于工作跟这不沾边，只是因为爱好，所以只有空闲时间看您的文章，以前网上找的其他的文章总会有些地方摸不着头脑，从您开课以来，就看了3、4篇，发现真的很棒。希望老师能出类似更好的作品，我会检查把老师的课看下去。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462470,"discussion_content":"努力就有收获，贵在坚持。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565580764,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122713,"user_name":"Geek_66666","can_delete":false,"product_type":"c1","uid":1619479,"ip_address":"","ucode":"36F79954146DE8","user_header":"https://static001.geekbang.org/account/avatar/00/18/b6/17/76f29bfb.jpg","comment_is_top":false,"comment_ctime":1565498907,"is_pvip":false,"replies":[{"id":"45080","content":"是的，vary字段就表示服务器根据请求头里的哪些字段决定了输出的响应内容，在你这里就是只判断了Accept-Encoding，这跟服务器的策略有关。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1565572353,"ip_address":"","comment_id":122713,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565498907","product_id":100029001,"comment_content":"我看很多网站响应头中vary字段的值都是Accept-Encoding，这意味请求方发送的其他内容协商字段无效吗？比如我用python requests试了accept-language = en-US，返回的依然是中文（那个网站应该没有英文网页），在&#39;Accept-Charset&#39;: &#39;utf-8&#39;请求下，返回的response.encoding = &#39;ISO-8859-1&#39;,是不是因为vary字段的值是Accept-Encoding","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462369,"discussion_content":"是的，vary字段就表示服务器根据请求头里的哪些字段决定了输出的响应内容，在你这里就是只判断了Accept-Encoding，这跟服务器的策略有关。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565572353,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119563,"user_name":"吴晨辉","can_delete":false,"product_type":"c1","uid":1257913,"ip_address":"","ucode":"3524E1615F555A","user_header":"https://static001.geekbang.org/account/avatar/00/13/31/b9/f40fee88.jpg","comment_is_top":false,"comment_ctime":1564626752,"is_pvip":false,"replies":[{"id":"43872","content":"我查了一下，它表示可以接受的内容是Signed HTTP Exchanges，后面的v=b3没有找到具体的说明，可能是版本号。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1564627856,"ip_address":"","comment_id":119563,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1564626752","product_id":100029001,"comment_content":"看到课程的截图里面有 application&#47;signed-exchange;v=b3， 这里的v=b3是怎么理解的呢？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460956,"discussion_content":"我查了一下，它表示可以接受的内容是Signed HTTP Exchanges，后面的v=b3没有找到具体的说明，可能是版本号。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564627856,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117701,"user_name":"🌞🇨🇳👦","can_delete":false,"product_type":"c1","uid":1168085,"ip_address":"","ucode":"6BB08F05546D06","user_header":"https://static001.geekbang.org/account/avatar/00/11/d2/d5/ed93f2fa.jpg","comment_is_top":false,"comment_ctime":1564113623,"is_pvip":false,"replies":[{"id":"43115","content":"不是的，虽然都是文本，但会有多种语言和编码，比如日语、法语、意大利语等等，不知道语言就无法正常显示。<br>","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1564117637,"ip_address":"","comment_id":117701,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1564113623","product_id":100029001,"comment_content":"我有个疑问，content-language的作用是什么，我认为有了content-type就知道了编码对应的字符是什么了，难道对应的字符会根据content-language 长得不一样吗🤔️","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460088,"discussion_content":"不是的，虽然都是文本，但会有多种语言和编码，比如日语、法语、意大利语等等，不知道语言就无法正常显示。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564117637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1314724,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0f/a4/0b49469f.jpg","nickname":"木子00","note":"","ucode":"8F78CA722EB29B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533157,"discussion_content":"content-language 意思是：body是用什么语言。\ncontent-type值中的charset 意思是：body是埇什么编码。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637805626,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]}]}