{"id":778871,"title":"05ï½œç”¨5ç§ä¸åŒæ¨¡å‹å±•ç¤ºæ¨¡å‹äº¤äº’5å¤§åŸºæœ¬åŸåˆ™","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é»„ä½³ã€‚æ¬¢è¿ä½ å­¦ä¹ å¤§æ¨¡å‹åº”ç”¨å¼€å‘å®æˆ˜è¯¾ã€‚</p><p>åœ¨ä¹‹å‰çš„å¯ç¨‹ç¯‡ä¸­ï¼Œæˆ‘ç€é‡ç»™ä½ ä»‹ç»äº†Assistants APIçš„ä½¿ç”¨ã€‚è¿™èŠ‚è¯¾æˆ‘ä»¬è¿›å…¥ä¸€ä¸ªçŸ­å°ä½†æ˜¯é‡è¦çš„ç¯‡ç« â€”â€”æç¤ºå·¥ç¨‹ã€‚</p><p>æ‰€è°“æç¤ºå·¥ç¨‹ï¼Œå°±æ˜¯ç²¾å¿ƒè®¾è®¡è¾“å…¥ç»™AIæ¨¡å‹çš„æ–‡æœ¬ï¼ˆå³æç¤ºï¼‰ï¼Œå¼•å¯¼æ¨¡å‹ç”Ÿæˆæˆ‘ä»¬æœŸæœ›çš„è¾“å‡ºã€‚è¿™å°±åƒæ˜¯å’Œä½ çš„åŒäº‹ã€é¢†å¯¼ã€ä¸‹å±æˆ–è€…æœ‹å‹å¯¹è¯ï¼Œä½ éœ€è¦ç»™å®ƒæ˜ç¡®çš„æŒ‡ä»¤ã€‚ä½ æä¾›å……è¶³çš„èƒŒæ™¯ä¿¡æ¯ï¼Œæ‰èƒ½å¾—åˆ°æ»¡æ„çš„å›ç­”ã€‚å¯ä»¥è¯´ï¼Œä¼˜ç§€çš„æç¤ºæ˜¯äººç±»æ™ºæ…§å’Œæœºå™¨èƒ½åŠ›çš„å®Œç¾ç»“åˆï¼Œå®ƒè™½ç„¶æ²¡æœ‰æ”¹å˜AIçš„æ€ç»´èƒ½åŠ›ä¸Šé™ï¼Œä½†æ˜¯èƒ½å¤Ÿ<strong>æŠŠ</strong> <strong>AI</strong> <strong>çš„è¡¨ç°æå‡åˆ°æ¥è¿‘å…¶ä¸Šé™çš„ä½ç½®</strong>ã€‚è¿™å…¶å®éå¸¸é‡è¦ã€‚</p><p>åœ¨è¿™ä¸€è¯¾ä¸­ï¼Œæˆ‘å°†ç”¨5ç§ä¸åŒæ¨¡å‹ï¼Œé€šè¿‡5ä¸ªå®ç”¨çš„ä¾‹å­ï¼Œæ¥å‘ä½ å±•ç¤ºå’Œæ¨¡å‹å¯¹è¯äº¤äº’çš„5å¤§åŸºæœ¬åŸåˆ™ã€‚</p><h2>æŠ€å·§ä¸€ï¼šç¼–å†™æ¸…æ™°çš„æŒ‡ä»¤ï¼Œè®©æ¨¡å‹â€œä¸€æ­¥åˆ°ä½â€åœ°å®Œæˆä»»åŠ¡</h2><p>æ¨¡å‹å°±åƒæ˜¯ä½ çš„å¾—åŠ›åŠ©æ‰‹ï¼Œä½†å®ƒä»¬å¹¶ä¸ä¼šè¯»å¿ƒæœ¯ã€‚ä¸ºäº†è®©åŠ©æ‰‹é«˜æ•ˆå·¥ä½œï¼Œä½ éœ€è¦æä¾›æ¸…æ™°ã€è¯¦å°½çš„æŒ‡ä»¤ï¼Œè®©å®ƒæ˜ç™½ä½ çš„éœ€æ±‚ã€‚å‡è®¾æˆ‘ä»¬è¦ç”Ÿæˆä¸€æ®µPythonä»£ç ï¼Œå¦‚æœæˆ‘ä»¬è¯¦ç»†æè¿°äº†ä»£ç ç¼–å†™çš„è¦æ±‚ï¼Œæ¨¡å‹å°±èƒ½æ›´å¥½åœ°å®Œæˆä»»åŠ¡ã€‚</p><p>ä¾‹å¦‚ï¼Œè¦é€šè¿‡Pythonå®ç°å¯¹åˆ—è¡¨å…ƒç´ æ±‚å’Œï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•è¿™æ ·çš„æç¤ºã€‚</p><pre><code>prompt = &quot;&quot;&quot;\nè¯·ç¼–å†™ä¸€ä¸ªPythonå‡½æ•°å®ç°å¯¹åˆ—è¡¨æ±‚å’Œã€‚è¦æ±‚:\nå‡½æ•°åä¸ºsum_list,æ¥å—ä¸€ä¸ªåˆ—è¡¨ä½œä¸ºå‚æ•°\nä½¿ç”¨å†…ç½®çš„sum()å‡½æ•°å®ç°åˆ—è¡¨æ±‚å’Œ\næ·»åŠ å¿…è¦çš„æ³¨é‡Š,è¯´æ˜å‡½æ•°çš„è¾“å…¥è¾“å‡º\nåœ¨å‡½æ•°æœ«å°¾æ·»åŠ å‡ ä¸ªæµ‹è¯•ç”¨ä¾‹,å¹¶æ‰“å°ç»“æœ\n&quot;&quot;&quot;\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªæç¤ºæ˜ç¡®äº†å‡½æ•°åã€å®ç°æ–¹å¼ã€æ³¨é‡Šè¦æ±‚ã€æµ‹è¯•ç”¨ä¾‹ç­‰å„ä¸ªæ–¹é¢ï¼ŒçŠ¹å¦‚ä¸€ä»½è¯¦å°½çš„â€œç¼–ç¨‹ä½œä¸šè¦æ±‚â€ã€‚æœ‰äº†è¿™æ ·çš„è¾“å…¥ï¼Œå³ä½¿æ˜¯èƒ½åŠ›è¾ƒå¼±çš„æ¨¡å‹ï¼ˆå¦‚GPT3.5ï¼‰ä¹Ÿèƒ½è¾“å‡ºä¸€æ®µé«˜è´¨é‡çš„ä»£ç ã€‚</p><!-- [[[read_end]]] --><pre><code class=\"language-plain\"># åˆ›å»ºOpenAI Client\nfrom openai import OpenAI\nclient = OpenAI()\n\n# å®šä¹‰ä½¿ç”¨OpenAIçš„GPT-3.5-Turboæ¨¡å‹ç”Ÿæˆä»£ç çš„å‡½æ•°\ndef generate_code(prompt):\n&nbsp; &nbsp; client = OpenAI()\n&nbsp; &nbsp; response = client.chat.completions.create(\n&nbsp; &nbsp; &nbsp; &nbsp; model=\"gpt-3.5-turbo\",\n&nbsp; &nbsp; &nbsp; &nbsp; messages=[\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\"role\": \"system\", \"content\": \"You are a helpful Python programming assistant.\"},\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\"role\": \"user\", \"content\": prompt}\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]\n&nbsp; &nbsp; &nbsp; &nbsp; )\n&nbsp; &nbsp; return response.choices[0].message.content\n\n# å®šä¹‰æç¤ºä¿¡æ¯,åŒ…å«å‡½æ•°è¦æ±‚\nprompt = \"\"\"\n&nbsp; &nbsp; è¯·ç¼–å†™ä¸€ä¸ªPythonå‡½æ•°å®ç°å¯¹åˆ—è¡¨æ±‚å’Œã€‚è¦æ±‚:\n\n&nbsp; &nbsp; å‡½æ•°åä¸ºsum_list,æ¥å—ä¸€ä¸ªåˆ—è¡¨ä½œä¸ºå‚æ•°\n&nbsp; &nbsp; ä½¿ç”¨å†…ç½®çš„sum()å‡½æ•°å®ç°åˆ—è¡¨æ±‚å’Œ\n&nbsp; &nbsp; æ·»åŠ å¿…è¦çš„æ³¨é‡Š,è¯´æ˜å‡½æ•°çš„è¾“å…¥è¾“å‡º\n&nbsp; &nbsp; åœ¨å‡½æ•°æœ«å°¾æ·»åŠ å‡ ä¸ªæµ‹è¯•ç”¨ä¾‹,å¹¶æ‰“å°ç»“æœ \"\"\"\n\n# ç”Ÿæˆä»£ç \ngenerated_code = generate_code(prompt)\nprint(generated_code)\n</code></pre><p>è¾“å‡ºå¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\">```python\ndef sum_list(lst):\n&nbsp; &nbsp; \"\"\"\n&nbsp; &nbsp; å¯¹åˆ—è¡¨ä¸­çš„å…ƒç´ è¿›è¡Œæ±‚å’Œ\n\n&nbsp; &nbsp; Parameters:\n&nbsp; &nbsp; lst (list): åŒ…å«æ•°å­—çš„åˆ—è¡¨\n\n&nbsp; &nbsp; Returns:\n&nbsp; &nbsp; int: åˆ—è¡¨å…ƒç´ çš„æ€»å’Œ\n&nbsp; &nbsp; \"\"\"\n&nbsp; &nbsp; return sum(lst)\n\n# æµ‹è¯•ç”¨ä¾‹\ntest_list1 = [1, 2, 3, 4, 5]\nprint(sum_list(test_list1))&nbsp; # è¾“å‡º: 15\n\ntest_list2 = [10, 20, 30]\nprint(sum_list(test_list2))&nbsp; # è¾“å‡º: 60\n\ntest_list3 = [0, -1, 1]\nprint(sum_list(test_list3))&nbsp; # è¾“å‡º: 0\n```\\\n</code></pre><p>GPT3.5å½“ç„¶èƒ½å¤Ÿä¾æ®æ¸…æ™°çš„æŒ‡ä»¤å®Œæˆä»»åŠ¡ã€‚</p><h2>æŠ€å·§äºŒï¼šæä¾›å‚è€ƒèµ„æ–™ï¼Œç»™æ¨¡å‹â€œæŸ¥å­—å…¸â€çš„æœºä¼š</h2><p>å…¶å®ï¼Œè¿™ä¸ªæŠ€å·§å°±æ˜¯æœ€ç®€ç‰ˆçš„RAGï¼ˆæ£€ç´¢å¢å¼ºå¼ç”Ÿæˆï¼‰ã€‚å°½ç®¡å¤§æ¨¡å‹å°±åƒä¸€ä½åšå­¦å¤šæ‰çš„åŠ©æ‰‹ï¼Œä½†å®ƒçš„çŸ¥è¯†å…¨éƒ¨è¢«å›ºå®šåœ¨äº†å…¶è®­ç»ƒå®Œæˆçš„é‚£ä¸€ä¸ªåˆ¹é‚£ï¼Œå› æ­¤å¾ˆå¤šæƒ…å†µä¸‹å®ƒéœ€è¦æŸ¥é˜…èµ„æ–™æ¥å›ç­”é—®é¢˜ã€‚</p><p>ä½ å¯ä»¥åœ¨æç¤ºä¸­æä¾›ç›¸å…³çš„èƒŒæ™¯çŸ¥è¯†ï¼Œæ¨¡å‹å°±èƒ½æ ¹æ®è¿™äº›çº¿ç´¢äº§ç”Ÿæ›´å‡†ç¡®ã€å¯ä¿¡çš„å›ç­”ã€‚æ¥çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚</p><p>ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†Claude-3çš„æœ€å¼ºæ¨¡å‹claude-3-opusã€‚è¯·ä½ å…ˆå»<a href=\"https://www.anthropic.com/\">Anthropicå®˜ç½‘</a>æ³¨å†Œä¸€ä¸‹è‡ªå·±çš„API Keyã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/cf/3e/cf64e0f23fcdf92405e336e478dd253e.png?wh=1769x999\" alt=\"å›¾ç‰‡\"></p><pre><code class=\"language-plain\">import os\nimport anthropic\n\n# é”€å”®æ•°æ®\nreference_data = \"\"\"\né”€å”®æ•°æ®:\næ—¥æœŸ,äº§å“,é”€é‡,å•ä»·,æ€»æ”¶å…¥\n2023-01-01,iPhone 13,100,6000,600000\n2023-01-01,iPhone 14,50,8000,400000\n2023-01-02,iPhone 13,80,6000,480000\n2023-01-02,iPhone 14,60,8000,480000\n2023-01-03,iPhone 13,120,5800,696000\n2023-01-03,iPhone 14,80,7800,624000\n\"\"\"\n\n# åˆ›å»ºAnthropicå®¢æˆ·ç«¯\nclient = anthropic.Anthropic(api_key=os.environ[\"ANTHROPIC_API_KEY\"])\n\n# ç”Ÿæˆé”€å”®æŠ¥å‘Šçš„å‡½æ•°\ndef generate_sales_report(reference_data, prompt):\n&nbsp; &nbsp; response = client.messages.create(\n&nbsp; &nbsp; &nbsp; &nbsp; model=\"claude-3-opus-20240229\",\n&nbsp; &nbsp; &nbsp; &nbsp; max_tokens=1000,\n&nbsp; &nbsp; &nbsp; &nbsp; temperature=0.0,\n&nbsp; &nbsp; &nbsp; &nbsp; system=\"You are an AI assistant that generates sales reports based on the given data.\",\n&nbsp; &nbsp; &nbsp; &nbsp; messages=[\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\"role\": \"user\", \"content\": f\"Here is the sales data:\\n{reference_data}\\n\\nPlease generate a report to answer the following question:\\n{prompt}\"}\n&nbsp; &nbsp; &nbsp; &nbsp; ] &nbsp; &nbsp;)\n&nbsp; &nbsp; return response.content\n\n# æµ‹è¯•ç¤ºä¾‹\nprompt1 = \"æ ¹æ®ä¸Šè¿°é”€å”®æ•°æ®,è®¡ç®—iPhone 13å’ŒiPhone 14çš„æ€»é”€é‡å„æ˜¯å¤šå°‘?\"\nreport1 = generate_sales_report(reference_data, prompt1)\nprint(\"æŸ¥è¯¢1ç»“æœ:\\n\", report1)\n\nprompt2 = \"æ ¹æ®ä¸Šè¿°é”€å”®æ•°æ®,å“ªä¸ªäº§å“çš„æ€»æ”¶å…¥æ›´é«˜?é«˜å¤šå°‘?\"\nreport2 = generate_sales_report(reference_data, prompt2)\nprint(\"æŸ¥è¯¢2ç»“æœ:\\n\", report2)\n</code></pre><p>è¾“å‡ºå¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\">æŸ¥è¯¢1ç»“æœ:\n&nbsp;[ContentBlock(text='æ ¹æ®æä¾›çš„é”€å”®æ•°æ®,æˆ‘è®¡ç®—å¾—å‡ºiPhone 13å’ŒiPhone 14åœ¨è¿™3å¤©çš„æ€»é”€é‡å¦‚ä¸‹:\\n\\niPhone 13æ€»é”€é‡:\\n2023-01-01: 100å°\\n2023-01-02: 80å° \\n2023-01-03: 120å°\\niPhone 13æ€»é”€é‡ = 100 + 80 + 120 = 300å°\\n\\niPhone 14æ€»é”€é‡:\\n2023-01-01: 50å°\\n2023-01-02: 60å°\\n2023-01-03: 80å°&nbsp; \\niPhone 14æ€»é”€é‡ = 50 + 60 + 80 = 190å°\\n\\nç»¼ä¸Šæ‰€è¿°,åœ¨2023å¹´1æœˆ1æ—¥è‡³3æ—¥è¿™ä¸‰å¤©:\\niPhone 13çš„æ€»é”€é‡ä¸º300å°\\niPhone 14çš„æ€»é”€é‡ä¸º190å°', type='text')]\næŸ¥è¯¢2ç»“æœ:\n&nbsp;[ContentBlock(text='æ ¹æ®ç»™å‡ºçš„é”€å”®æ•°æ®,æˆ‘å¯¹ iPhone 13 å’Œ iPhone 14 çš„é”€å”®æƒ…å†µè¿›è¡Œäº†åˆ†ææ¯”è¾ƒ,å¾—å‡ºä»¥ä¸‹ç»“è®º:\\n\\niPhone 13 æ€»é”€é‡:300 å°\\niPhone 13 æ€»æ”¶å…¥:1,776,000 å…ƒ\\n\\niPhone 14 æ€»é”€é‡:190 å° \\niPhone 14 æ€»æ”¶å…¥:1,504,000 å…ƒ\\n\\né€šè¿‡è®¡ç®—å¯ä»¥çœ‹å‡º,iPhone 13 çš„æ€»æ”¶å…¥æ¯” iPhone 14 é«˜å‡º 272,000 å…ƒã€‚\\n\\nè™½ç„¶ iPhone 14 çš„å•ä»·æ›´é«˜,ä½†ç”±äº iPhone 13 çš„é”€é‡è¿œè¶… iPhone 14,å› æ­¤æœ€ç»ˆ iPhone 13 çš„æ€»æ”¶å…¥æ›´é«˜ã€‚\\n\\nç»¼ä¸Šæ‰€è¿°,iPhone 13 çš„æ€»æ”¶å…¥æ¯” iPhone 14 é«˜ 272,000 å…ƒã€‚iPhone 13 å‡­å€Ÿæ›´é«˜çš„æ€§ä»·æ¯”åœ¨é”€é‡ä¸Šå æ®ä¼˜åŠ¿,ä½¿å…¶æ€»æ”¶å…¥è¶…è¿‡äº† iPhone 14ã€‚', type='text')]\n</code></pre><p>ä¸éš¾çœ‹å‡ºï¼ŒClaude APIçš„ä½¿ç”¨æ–¹å¼å’Œè°ƒç”¨è¯­æ³•ä¸OpenAI APIéƒ½æ˜¯éå¸¸ç›¸ä¼¼çš„ã€‚å¦‚æœä½ æ³¨å†ŒClaude APIé‡åˆ°äº†éº»çƒ¦ï¼Œä½ ä¹Ÿå¯ä»¥è¯•ç€ç”¨Open AIçš„GPTæ¨¡å‹å®ŒæˆåŒæ ·çš„åŠŸèƒ½ã€‚</p><h2>æŠ€å·§ä¸‰ï¼šåˆ†è€Œæ²»ä¹‹ï¼ŒåŒ–ç¹ä¸ºç®€ã€é€æ­¥æ±‚è§£</h2><p>é¢å¯¹å¤æ‚çš„å¤§é—®é¢˜ï¼Œå¤§æ¨¡å‹å¯èƒ½ä¹Ÿä¼šâ€œæœ›è€Œç”Ÿç•â€ã€‚è¿™æ—¶ä¸å¦¨å°†å¤§ä»»åŠ¡æ‹†è§£æˆå¤šä¸ªå°ä»»åŠ¡ï¼Œå¼•å¯¼æ¨¡å‹ä¸€æ­¥æ­¥å®Œæˆã€‚æ­£æ‰€è°“â€œåˆ†è€Œæ²»ä¹‹â€ï¼Œé—®é¢˜å°±è¿åˆƒè€Œè§£äº†ã€‚</p><p>è¯·çœ‹è¿™ä¸ªä½¿ç”¨ChatGLM3ï¼ˆæ¥è‡ªæ™ºè°±AIçš„è‘—åä¸­æ–‡å¼€æºæ¨¡å‹ï¼‰å†™æ•°æ®åˆ†ææŠ¥å‘Šçš„ä¾‹å­ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a6/6a/a68fbca01e8d60e2e79a97926730ec6a.png?wh=2467x1858\" alt=\"å›¾ç‰‡\"></p><p>ä¸‹é¢è¿™ä¸ªç¨‹åºè¦ä»<a href=\"https://huggingface.co/\">Hugging Face Transformersåº“</a>ä¸­å¯¼å…¥AutoTokenizerå’ŒAutoModelï¼Œå¹¶åŠ è½½ChatGLMçš„tokenizerå’Œmodelã€‚å› æ­¤ï¼Œè¦ç¡®ä¿ä½ å·²ç»å®‰è£…äº†Transformersåº“ï¼Œå¹¶ä¸”æœ‰è¶³å¤Ÿçš„GPUå†…å­˜æ¥åŠ è½½æ¨¡å‹ã€‚</p><pre><code class=\"language-plain\"># å¯¼å…¥Transformeråº“\nfrom transformers import AutoTokenizer, AutoModel\n\n# åŠ è½½ChatGLM tokenizerå’Œmodel\ntokenizer = AutoTokenizer.from_pretrained(\"THUDM/chatglm3-6b\", trust_remote_code=True)\nmodel = AutoModel.from_pretrained(\"THUDM/chatglm3-6b\", trust_remote_code=True).half().cuda()\n\n# å®šä¹‰ä»»åŠ¡æ‹†è§£æ­¥éª¤\nsteps = [\n&nbsp; &nbsp; \"æå‡º 2 ä¸ªåˆ‡å…¥ç‚¹\",\n&nbsp; &nbsp; \"åˆ—å‡ºæ¯ä¸ªåˆ‡å…¥ç‚¹è¦åˆ†æçš„æŒ‡æ ‡\",\n&nbsp; &nbsp; \"å‡è®¾ä½ å‘ç°äº†æœ‰ä»·å€¼çš„æ´è§,æå‡º 2 æ¡å¯è¡Œçš„å»ºè®®\",\n&nbsp; &nbsp; \"ç»¼åˆæˆä¸€ä»½å®Œæ•´æŠ¥å‘Š\"\n]\n\n# å°†æ‰€æœ‰æ­¥éª¤åˆå¹¶æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ¯ä¸ªæ­¥éª¤ç”¨é€—å·å’Œç©ºæ ¼åˆ†éš”\ncombined_steps = ', '.join(steps)\n\n# ä½¿ç”¨f-stringæ ¼å¼åŒ–æœ€ç»ˆçš„prompt\nprompt = f\"ä½œä¸ºä¸€ä½æ•°æ®åˆ†æå¸ˆï¼Œè¯·æ ¹æ®ä»¥ä¸‹æ­¥éª¤æ’°å†™ä¸€ä»½æ•°æ®åˆ†ææŠ¥å‘Šï¼š{combined_steps}ã€‚\"\n\n# å¯¹promptè¿›è¡Œtokenize\ninputs = tokenizer(prompt, return_tensors=\"pt\")\ninputs = {k: v.cuda() for k, v in inputs.items()}\n\n# ä½¿ç”¨modelè¿›è¡Œæ¨ç†\noutput = model.generate(**inputs, max_length=2048, top_p=0.7, top_k=0)\n\n# å¯¹è¾“å‡ºè¿›è¡Œè§£ç \nresponse = tokenizer.decode(output[0])\n\n# æ‰“å°ç»“æœ\nprint(\"ChatGLMç”Ÿæˆçš„å›å¤:\")\nprint(response)\n</code></pre><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨tokenizerå¯¹promptè¿›è¡Œç¼–ç ï¼Œå¹¶å°†ç¼–ç åçš„è¾“å…¥è½¬ç§»åˆ°GPUä¸Šã€‚ä½¿ç”¨modelè¿›è¡Œæ¨ç†ï¼Œç”Ÿæˆè¾“å‡ºã€‚ä½ å¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´max_lengthã€top_på’Œtop_kç­‰å‚æ•°ã€‚å¯¹ç”Ÿæˆçš„è¾“å‡ºè¿›è¡Œè§£ç ï¼Œå¾—åˆ°æœ€ç»ˆçš„å›å¤æ–‡æœ¬ã€‚</p><pre><code># å®šä¹‰ä»»åŠ¡æ‹†è§£æ­¥éª¤\nsteps = [\n    &quot;æå‡º 2 ä¸ªåˆ‡å…¥ç‚¹&quot;,\n    &quot;åˆ—å‡ºæ¯ä¸ªåˆ‡å…¥ç‚¹è¦åˆ†æçš„æŒ‡æ ‡&quot;,\n    &quot;å‡è®¾ä½ å‘ç°äº†æœ‰ä»·å€¼çš„æ´è§,æå‡º 2 æ¡å¯è¡Œçš„å»ºè®®&quot;,\n    &quot;ç»¼åˆæˆä¸€ä»½å®Œæ•´æŠ¥å‘Š&quot;\n]\n</code></pre><p>ä¸Šé¢è¿™ä¸ªæç¤ºçš„ä¼˜ç‚¹åœ¨äºï¼Œå®ƒå¹¶ä¸ç¬¼ç»Ÿï¼Œè€Œæ˜¯æŠŠä¸€ä¸ªå¤§ç›®æ ‡ï¼ˆæ’°å†™æ•°æ®åˆ†ææŠ¥å‘Šï¼‰æ‹†è§£æˆäº†å‡ ä¸ªæ¸…æ™°æ˜ç¡®çš„æ­¥éª¤ï¼Œè¿™æ ·å°±è®©å¤§æ¨¡å‹çš„æ€è·¯æ›´åŠ æœ‰é€»è¾‘ï¼Œæ›´åŠ æ¸…æ™°ã€‚ä»»åŠ¡è¶Šå…·ä½“ï¼Œå¤§æ¨¡å‹å°±èƒ½åšåˆ°æœ‰çš„æ”¾çŸ¢ã€‚</p><p>è¾“å‡ºå¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\">ChatGLMç”Ÿæˆçš„å›å¤:\n[gMASK] sop ä½œä¸ºä¸€ä½æ•°æ®åˆ†æå¸ˆï¼Œè¯·æ ¹æ®ä»¥ä¸‹æ­¥éª¤æ’°å†™ä¸€ä»½æ•°æ®åˆ†ææŠ¥å‘Šï¼šæå‡º 2 ä¸ªåˆ‡å…¥ç‚¹, åˆ—å‡ºæ¯ä¸ªåˆ‡å…¥ç‚¹è¦åˆ†æçš„æŒ‡æ ‡, å‡è®¾ä½ å‘ç°äº†æœ‰ä»·å€¼çš„æ´è§,æå‡º 2 æ¡å¯è¡Œçš„å»ºè®®, ç»¼åˆæˆä¸€ä»½å®Œæ•´æŠ¥å‘Šã€‚\nåˆ‡å…¥ç‚¹ä¸€ï¼šåˆ†æç”¨æˆ·åœ¨ç¤¾äº¤åª’ä½“ä¸Šçš„è¡Œä¸ºã€‚ åˆ‡å…¥ç‚¹äºŒï¼šåˆ†æç”¨æˆ·åœ¨ç”µå•†å¹³å°ä¸Šçš„è¡Œä¸ºã€‚\n\næŠ¥å‘Šæ ‡é¢˜ï¼šç¤¾äº¤åª’ä½“ä¸ç”µå•†å¹³å°ç”¨æˆ·è¡Œä¸ºåˆ†ææŠ¥å‘Š\n\nä¸€ã€èƒŒæ™¯ä»‹ç»\n\néšç€äº’è”ç½‘çš„æ™®åŠå’Œç¤¾äº¤åª’ä½“ã€ç”µå•†å¹³å°çš„å¿«é€Ÿå‘å±•ï¼Œè¶Šæ¥è¶Šå¤šçš„ç”¨æˆ·åœ¨çº¿ç¤¾äº¤å’Œè´­ç‰©ã€‚ä½œä¸ºä¸€ä½æ•°æ®åˆ†æå¸ˆï¼Œæˆ‘ä»¬é€‰å–äº†ä¸¤ä¸ªåˆ‡å…¥ç‚¹æ¥åˆ†æç”¨æˆ·çš„è¡Œä¸ºï¼Œåˆ†åˆ«æ˜¯ç¤¾äº¤åª’ä½“å’Œç”µå•†å¹³å°ã€‚é€šè¿‡åˆ†æè¿™äº›æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å¥½åœ°äº†è§£ç”¨æˆ·çš„éœ€æ±‚å’Œè¡Œä¸ºæ¨¡å¼ï¼Œä»è€Œä¸ºäº§å“ä¼˜åŒ–å’Œè¥é”€ç­–ç•¥æä¾›æœ‰ä»·å€¼çš„å‚è€ƒã€‚\n\näºŒã€åˆ‡å…¥ç‚¹ä¸€ï¼šåˆ†æç”¨æˆ·åœ¨ç¤¾äº¤åª’ä½“ä¸Šçš„è¡Œä¸º\n\n1. åˆ†ææŒ‡æ ‡\n\n(1) ç”¨æˆ·æ´»è·ƒåº¦ï¼šåŒ…æ‹¬æ—¥æ´»è·ƒç”¨æˆ·ã€å‘¨æ´»è·ƒç”¨æˆ·ã€æœˆæ´»è·ƒç”¨æˆ·ç­‰ï¼Œç”¨äºäº†è§£ç”¨æˆ·çš„æ´»è·ƒç¨‹åº¦å’Œç”¨æˆ·ç²˜æ€§ã€‚\n\n(2) ç”¨æˆ·äº’åŠ¨åº¦ï¼šåŒ…æ‹¬è¯„è®ºã€ç‚¹èµã€åˆ†äº«ç­‰ï¼Œç”¨äºäº†è§£ç”¨æˆ·ä¹‹é—´çš„äº’åŠ¨æƒ…å†µä»¥åŠç”¨æˆ·å¯¹å†…å®¹çš„å–œå¥½ç¨‹åº¦ã€‚\n\n(3) ç”¨æˆ·å…³æ³¨åº¦ï¼šå…³æ³¨çš„äººæ•°å’Œå…³æ³¨æ¯”ä¾‹ï¼Œç”¨äºäº†è§£ç”¨æˆ·å¯¹æŸäº›å†…å®¹æˆ–äººç‰©çš„å…´è¶£ç¨‹åº¦ã€‚\n\n(4) ç”¨æˆ·ç•™å­˜ç‡ï¼šç”¨æˆ·åœ¨ä¸€æ®µæ—¶é—´å†…ç»§ç»­ä½¿ç”¨ç¤¾äº¤åª’ä½“çš„æ¯”ä¾‹ï¼Œç”¨äºäº†è§£ç”¨æˆ·çš„å¿ è¯šåº¦å’Œæ»¡æ„åº¦ã€‚\n\n2. æ•°æ®æ”¶é›†ä¸å¤„ç†\n\n(1) æ•°æ®æ”¶é›†ï¼šä»ç¤¾äº¤åª’ä½“å¹³å°è·å–ç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼ŒåŒ…æ‹¬ç”¨æˆ·æ´»è·ƒåº¦ã€äº’åŠ¨åº¦ã€å…³æ³¨åº¦ã€ç•™å­˜ç‡ç­‰ã€‚\n\n(2) æ•°æ®å¤„ç†ï¼šå¯¹æ”¶é›†åˆ°çš„æ•°æ®è¿›è¡Œæ¸…æ´—å’Œæ•´ç†ï¼Œå»é™¤å¼‚å¸¸å€¼å’Œé‡å¤æ•°æ®ï¼Œä¿è¯æ•°æ®çš„å‡†ç¡®æ€§å’Œå®Œæ•´æ€§ã€‚\n\n(3) æ•°æ®åˆ†æï¼šé€šè¿‡æè¿°æ€§ç»Ÿè®¡ã€ç›¸å…³æ€§åˆ†æã€è¶‹åŠ¿åˆ†æç­‰æ–¹æ³•ï¼Œå¯¹æ•°æ®è¿›è¡Œæ·±å…¥æŒ–æ˜ï¼Œå‘ç°æœ‰ä»·å€¼çš„æ´è§ã€‚\n\nä¸‰ã€åˆ‡å…¥ç‚¹äºŒï¼šåˆ†æç”¨æˆ·åœ¨ç”µå•†å¹³å°ä¸Šçš„è¡Œä¸º\n\n1. åˆ†ææŒ‡æ ‡\n\n(1) ç”¨æˆ·è®¿é—®é‡ï¼šåŒ…æ‹¬æ—¥è®¿é—®é‡ã€å‘¨è®¿é—®é‡ã€æœˆè®¿é—®é‡ç­‰ï¼Œç”¨äºäº†è§£ç”¨æˆ·çš„è®¿é—®é¢‘ç‡å’Œç”¨æˆ·æ¥æºã€‚\n\n(2) ç”¨æˆ·è½¬åŒ–ç‡ï¼šç”¨æˆ·åœ¨è®¿é—®ç”µå•†å¹³å°åå®Œæˆè´­ä¹°çš„æ¯”ä¾‹ï¼Œç”¨äºäº†è§£ç”¨æˆ·çš„è´­ç‰©æ„æ„¿å’Œè´­ç‰©ä½“éªŒã€‚\n\n(3) ç”¨æˆ·ç•™å­˜ç‡ï¼šç”¨æˆ·åœ¨ä¸€æ®µæ—¶é—´å†…ç»§ç»­åœ¨ç”µå•†å¹³å°ä¸Šçš„æ¯”ä¾‹ï¼Œç”¨äºäº†è§£ç”¨æˆ·çš„å¿ è¯šåº¦å’Œæ»¡æ„åº¦ã€‚\n\n(4) ç”¨æˆ·è¯„ä»·ï¼šç”¨æˆ·çš„è¯„ä»·å’Œåé¦ˆï¼Œç”¨äºäº†è§£ç”¨æˆ·å¯¹å•†å“å’ŒæœåŠ¡çš„æ»¡æ„åº¦ã€‚\n\n2. æ•°æ®æ”¶é›†ä¸å¤„ç†\n\n(1) æ•°æ®æ”¶é›†ï¼šä»ç”µå•†å¹³å°è·å–ç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼ŒåŒ…æ‹¬ç”¨æˆ·è®¿é—®é‡ã€è½¬åŒ–ç‡ã€ç•™å­˜ç‡ã€è¯„ä»·ç­‰ã€‚\n\n(2) æ•°æ®å¤„ç†ï¼šå¯¹æ”¶é›†åˆ°çš„æ•°æ®è¿›è¡Œæ¸…æ´—å’Œæ•´ç†ï¼Œå»é™¤å¼‚å¸¸å€¼å’Œé‡å¤æ•°æ®ï¼Œä¿è¯æ•°æ®çš„å‡†ç¡®æ€§å’Œå®Œæ•´æ€§ã€‚\n\n(3) æ•°æ®åˆ†æï¼šé€šè¿‡æè¿°æ€§ç»Ÿè®¡ã€ç›¸å…³æ€§åˆ†æã€è¶‹åŠ¿åˆ†æç­‰æ–¹æ³•ï¼Œå¯¹æ•°æ®è¿›è¡Œæ·±å…¥æŒ–æ˜ï¼Œå‘ç°æœ‰ä»·å€¼çš„æ´è§ã€‚\n\nå››ã€ç»“è®ºä¸å»ºè®®\n\né€šè¿‡ä»¥ä¸Šåˆ†æï¼Œæˆ‘ä»¬å‘ç°ç¤¾äº¤åª’ä½“å’Œç”µå•†å¹³å°ä¸Šçš„ç”¨æˆ·è¡Œä¸ºå­˜åœ¨ä¸€å®šçš„å…³è”æ€§ã€‚ä¾‹å¦‚ï¼Œåœ¨ç¤¾äº¤åª’ä½“ä¸Šæ´»è·ƒçš„ç”¨æˆ·åœ¨ç”µå•†å¹³å°ä¸Šçš„è®¿é—®é‡ä¹Ÿå¯èƒ½è¾ƒé«˜ï¼Œä¸”å®Œæˆè´­ä¹°çš„æ¯”ä¾‹ä¹Ÿè¾ƒé«˜ã€‚åŒæ—¶ï¼Œç”¨æˆ·åœ¨ç¤¾äº¤åª’ä½“ä¸Šçš„äº’åŠ¨åº¦å’Œå…³æ³¨åº¦è¾ƒé«˜çš„å†…å®¹ï¼Œåœ¨ç”µå•†å¹³å°ä¸Šä¹Ÿå¾€å¾€å…·æœ‰è¾ƒé«˜çš„ç”¨æˆ·ç•™å­˜ç‡å’Œè½¬åŒ–ç‡ã€‚\n\nåŸºäºä»¥ä¸Šå‘ç°ï¼Œæˆ‘ä»¬æå‡ºä»¥ä¸‹å»ºè®®ï¼š\n\n1. é’ˆå¯¹ç¤¾äº¤åª’ä½“å¹³å°ï¼Œå¯ä»¥åŠ å¤§ä¸ç”¨æˆ·äº’åŠ¨çš„å†…å®¹å’Œè¯é¢˜çš„æ¨å¹¿ï¼Œæé«˜ç”¨æˆ·çš„æ´»è·ƒåº¦å’Œç•™å­˜ç‡ã€‚åŒæ—¶ï¼Œå¯ä»¥åŠ å¼ºå¯¹ç”¨æˆ·å…³æ³¨åº¦å’Œäº’åŠ¨åº¦çš„æ•°æ®åˆ†æï¼ŒæŒ–æ˜æœ‰ä»·å€¼çš„å†…å®¹å’Œè¯é¢˜ï¼Œæé«˜ç”¨æˆ·çš„å‚ä¸åº¦å’Œå¿ è¯šåº¦ã€‚\n\n2. é’ˆå¯¹ç”µå•†å¹³å°ï¼Œå¯ä»¥ä¼˜åŒ–è´­ç‰©ä½“éªŒï¼Œæé«˜ç”¨æˆ·è½¬åŒ–ç‡ã€‚åŒæ—¶ï¼Œå¯ä»¥é€šè¿‡ç”¨æˆ·è¯„ä»·å’Œåé¦ˆï¼Œäº†è§£ç”¨æˆ·å¯¹å•†å“å’ŒæœåŠ¡çš„æ»¡æ„åº¦ï¼Œä¸æ–­ä¼˜åŒ–å•†å“å’ŒæœåŠ¡ï¼Œæé«˜ç”¨æˆ·ç•™å­˜ç‡å’Œè½¬åŒ–ç‡ã€‚\n\næ€»ä¹‹ï¼Œé€šè¿‡æ•°æ®åˆ†æå¯ä»¥æ›´å¥½åœ°äº†è§£ç”¨æˆ·çš„è¡Œä¸ºæ¨¡å¼å’Œéœ€æ±‚ï¼Œä»è€Œä¸ºäº§å“ä¼˜åŒ–å’Œè¥é”€ç­–ç•¥æä¾›æœ‰åŠ›æ”¯æŒã€‚\n</code></pre><p>ä»è¾“å‡ºç»“æœä¸Šçœ‹ï¼ŒChatGLM3è¿™ä¸ªå¼€æºæ¨¡å‹ï¼Œå‡ºè‰²åœ°å®Œæˆäº†ä¸€ä»½æ•°æ®åˆ†ææŠ¥å‘Šã€‚è¿™ä¸ªæ­¥æ­¥ä¸ºè¥ã€åˆ†è€Œæ²»ä¹‹çš„æç¤ºï¼Œèµ·åˆ°äº†é‡è¦çš„å¼•å¯¼ä½œç”¨ï¼ŒåŠŸä¸å¯æ²¡ã€‚</p><h2>æŠ€å·§å››ï¼šæ€è€ƒã€å†æ€è€ƒï¼Œå…¨é¢å®¡è§†é—®é¢˜ï¼Œå¾—å‡ºå‘¨å…¨ç»“è®º</h2><p>æœ‰æ—¶æ¨¡å‹ä¼šå¾—å‡ºè‰ç‡çš„ç»“è®ºï¼Œæˆ‘ä»¬å¯ä»¥å¼•å¯¼å®ƒå¤šè§’åº¦æ€è€ƒé—®é¢˜ï¼Œå†ä¸‹å®šè®ºã€‚è¿™å°±åƒé¢è¯•å®˜å¸¸é—®çš„â€œä½ è¿˜æœ‰ä»€ä¹ˆè¦è¡¥å……çš„å—â€ï¼Œâ€œè¿™ä¸ªæ–¹æ¡ˆå¯èƒ½ä¼šæœ‰å“ªäº›æ¼æ´â€ï¼Œâ€œè¿˜æœ‰ä»€ä¹ˆå…¶å®ƒåˆ‡å…¥ç‚¹â€ï¼Œæ—¨åœ¨å…¨é¢å®¡è§†é—®é¢˜ï¼Œé¿å…é—æ¼é‡è¦ä¿¡æ¯ã€‚</p><p>æ¥çœ‹ä¸€ä¸ªå¼•å¯¼æ¨¡å‹åå¤æ€è€ƒçš„ä¾‹å­ã€‚åœ¨ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å¤§å°ä»…æœ‰2.2Gçš„TinyLlamaæ¥å°è¯•å®Œæˆä¸€ä¸ªè¾ƒå¤æ‚çš„æ¨ç†ã€‚</p><pre><code class=\"language-plain\"># å¯¼å…¥Transformeråº“\nfrom transformers import AutoTokenizer, AutoModelForCausalLM\n\ntokenizer = AutoTokenizer.from_pretrained(\"TinyLlama/TinyLlama-1.1B-Chat-v1.0\")\nmodel = AutoModelForCausalLM.from_pretrained(\"TinyLlama/TinyLlama-1.1B-Chat-v1.0\")\n\n# å®šä¹‰åˆå§‹çš„é—®é¢˜å’Œprompt\nquestion = \"ä»¥ä¸‹æ˜¯ä¸€ä½å¤§å­¦ç”Ÿç”³è¯·ç ”ç©¶ç”Ÿçš„åŸºæœ¬æƒ…å†µ:\\n- GPA: 3.8, ä¸“ä¸š: è®¡ç®—æœºç§‘å­¦\\n- GRE: V 158, Q 170, AW 4.0\\n- æ¨èä¿¡: ä¸¤å°å¼ºæ¨\\n- ç§‘ç ”ç»å†: ä¸€å¹´å›¾åƒå¤„ç†é¡¹ç›®,ä¸€ç¯‡ç›¸å…³é¢†åŸŸå‘è¡¨è®ºæ–‡\\n- ç”³è¯·æ–¹å‘: äººå·¥æ™ºèƒ½\\n\\nè¯·åˆ†æè¯¥å­¦ç”Ÿçš„ç”³è¯·ç«äº‰åŠ›,å¹¶ç»™å‡ºä½ çš„å½•å–ç»“è®ºã€‚\"\nprompt = f\"{question}\\n\\nå›ç­”:\"\n\n# ç¬¬ä¸€æ¬¡æ¨ç†\ninputs = tokenizer(prompt, return_tensors=\"pt\").to(model.device)\noutputs = model.generate(**inputs, max_new_tokens=200, top_p=0.9, temperature=0.7)\nfirst_conclusion = tokenizer.decode(outputs[0], skip_special_tokens=True)\n\n# ç¬¬äºŒæ¬¡æ¨ç†,è€ƒè™‘å…¶ä»–å› ç´ \nsecond_prompt = f\"{question}\\n\\nå‰é¢æˆ‘ä»¬ä»å­¦ä¸šæˆç»©ã€ç§‘ç ”ç»å†ç­‰æ–¹é¢åˆ†æäº†è¿™ä½å­¦ç”Ÿçš„ç«äº‰åŠ›,å¾—å‡ºäº†åˆæ­¥ç»“è®ºã€‚ç°åœ¨è¯·ä½ è¿›ä¸€æ­¥æ€è€ƒ:\\n\\n1. é™¤äº†å·²ç»è€ƒè™‘çš„å› ç´ ,è¿˜æœ‰å“ªäº›æ–¹é¢å¯èƒ½å½±å“å½•å–ç»“æœ?\\n2. è¿™ä½å­¦ç”Ÿçš„ç”³è¯·è¿˜æœ‰å“ªäº›æ½œåœ¨çš„ä¸è¶³ä¹‹å¤„?\\n\\nè¯·ç»¼åˆè¿™äº›é¢å¤–çš„å› ç´ ,ç»™å‡ºä¸€ä¸ªæ›´åŠ å…¨é¢çš„åˆ†æå’Œç»“è®ºã€‚\\n\\nå›ç­”:\"\ninputs = tokenizer(second_prompt, return_tensors=\"pt\").to(model.device) &nbsp;\noutputs = model.generate(**inputs, max_new_tokens=300, top_p=0.9, temperature=0.7)\nsecond_conclusion = tokenizer.decode(outputs[0], skip_special_tokens=True)\n\n# æ‰“å°ä¸¤æ¬¡æ¨ç†çš„ç»“è®º\nprint(\"ç¬¬ä¸€æ¬¡æ¨ç†çš„ç»“è®º:\")\nprint(first_conclusion)\nprint(\"\\nç¬¬äºŒæ¬¡æ¨ç†çš„ç»“è®º:\")\nprint(second_conclusion)\n</code></pre><p>è¾“å‡ºå¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\">ç¬¬ä¸€æ¬¡æ¨ç†çš„ç»“è®º:\nä»¥ä¸‹æ˜¯ä¸€ä½å¤§å­¦ç”Ÿç”³è¯·ç ”ç©¶ç”Ÿçš„åŸºæœ¬æƒ…å†µ:\n- GPA: 3.8, ä¸“ä¸š: è®¡ç®—æœºç§‘å­¦\n- GRE: V 158, Q 170, AW 4.0\n- æ¨èä¿¡: ä¸¤å°å¼ºæ¨\n- ç§‘ç ”ç»å†: ä¸€å¹´å›¾åƒå¤„ç†é¡¹ç›®,ä¸€ç¯‡ç›¸å…³é¢†åŸŸå‘è¡¨è®ºæ–‡\n- ç”³è¯·æ–¹å‘: äººå·¥æ™ºèƒ½\n\nè¯·åˆ†æè¯¥å­¦ç”Ÿçš„ç”³è¯·ç«äº‰åŠ›,å¹¶ç»™å‡ºä½ çš„å½•å–ç»“è®ºã€‚\n\nå›ç­”:\n\nè¯¥å­¦ç”Ÿçš„ç”³è¯·ç«äº‰åŠ›å¾ˆé«˜,å› ä¸ºä»–ä»¬æ‹¥æœ‰ä¸€ä¸ªå¼ºå¤§çš„GPAå’ŒGREåˆ†æ•°,å¹¶ä¸”ä»–ä»¬å·²ç»å…·æœ‰ä¸€å¹´å›¾åƒå¤„ç†é¡¹ç›®å’Œç›¸å…³é¢†åŸŸå‘è¡¨è®ºæ–‡çš„ç§‘ç ”ç»å†ã€‚ä»–ä»¬çš„ç”³è¯·æ–¹å‘ä¹Ÿå¾ˆæœ‰è¶£,äººå·¥æ™ºèƒ½æ˜¯ä¸€ä¸ªå…·æœ‰å¾ˆé«˜çš„ç«äº‰åŠ›çš„é¢†åŸŸ,å› ä¸ºå®ƒæ˜¯ä¸€ä¸ªå…·æœ‰å·¨å¤§çš„æœªæ¥å‘å±•çš„é¢†åŸŸã€‚\n\nå› æ­¤,æˆ‘ä»¬å°†æ¨èè¯¥å­¦ç”Ÿè·å¾—å½•å–ã€‚\n\nç¬¬äºŒæ¬¡æ¨ç†çš„ç»“è®º:\nä»¥ä¸‹æ˜¯ä¸€ä½å¤§å­¦ç”Ÿç”³è¯·ç ”ç©¶ç”Ÿçš„åŸºæœ¬æƒ…å†µ:\n- GPA: 3.8, ä¸“ä¸š: è®¡ç®—æœºç§‘å­¦\n- GRE: V 158, Q 170, AW 4.0\n- æ¨èä¿¡: ä¸¤å°å¼ºæ¨\n- ç§‘ç ”ç»å†: ä¸€å¹´å›¾åƒå¤„ç†é¡¹ç›®,ä¸€ç¯‡ç›¸å…³é¢†åŸŸå‘è¡¨è®ºæ–‡\n- ç”³è¯·æ–¹å‘: äººå·¥æ™ºèƒ½\n\nè¯·åˆ†æè¯¥å­¦ç”Ÿçš„ç”³è¯·ç«äº‰åŠ›,å¹¶ç»™å‡ºä½ çš„å½•å–ç»“è®ºã€‚\n\nå‰é¢æˆ‘ä»¬ä»å­¦ä¸šæˆç»©ã€ç§‘ç ”ç»å†ç­‰æ–¹é¢åˆ†æäº†è¿™ä½å­¦ç”Ÿçš„ç«äº‰åŠ›,å¾—å‡ºäº†åˆæ­¥ç»“è®ºã€‚ç°åœ¨è¯·ä½ è¿›ä¸€æ­¥æ€è€ƒ:\n\n1. é™¤äº†å·²ç»è€ƒè™‘çš„å› ç´ ,è¿˜æœ‰å“ªäº›æ–¹é¢å¯èƒ½å½±å“å½•å–ç»“æœ?\n2. è¿™ä½å­¦ç”Ÿçš„ç”³è¯·è¿˜æœ‰å“ªäº›æ½œåœ¨çš„ä¸è¶³ä¹‹å¤„?\n\nè¯·ç»¼åˆè¿™äº›é¢å¤–çš„å› ç´ ,ç»™å‡ºä¸€ä¸ªæ›´åŠ å…¨é¢çš„åˆ†æå’Œç»“è®ºã€‚\n\nå›ç­”:\n\n1. é™¤äº†å·²ç»è€ƒè™‘çš„å› ç´ ,è¿˜æœ‰å“ªäº›æ–¹é¢å¯èƒ½å½±å“å½•å–ç»“æœ?\n\n- è¿™ä½å­¦ç”Ÿçš„ç”³è¯·è¿˜æœ‰å“ªäº›æ½œåœ¨çš„ä¸è¶³ä¹‹å¤„?\n\n- è¿™ä½å­¦ç”Ÿçš„ç”³è¯·ç«äº‰åŠ›è¿˜æœ‰å“ªäº›æ–¹é¢å¸®åŠ©ä»–/å¥¹è·å¾—å½•å–?\n\n2. è¿™ä½å­¦ç”Ÿçš„ç”³è¯·ç«äº‰åŠ›è¿˜æœ‰å“ªäº›æ–¹é¢å¸®åŠ©ä»–/å¥¹è·å¾—å½•å–?\n\n- è¿™ä½å­¦ç”Ÿçš„ç”³è¯·ç«äº‰åŠ›è¿˜æœ‰å“ªäº›æ–¹é¢å¸®åŠ©ä»–/å¥¹è·å¾—å½•å–?\n\n- è¿™ä½å­¦ç”Ÿçš„ç”³è¯·ç«äº‰åŠ›è¿˜æœ‰å“ªäº›æ–¹é¢å¸®åŠ©ä»–/å¥¹è·å¾—å½•å–?\n\n- è¿™ä½å­¦ç”Ÿçš„ç”³è¯·ç«äº‰åŠ›è¿˜æœ‰å“ªäº›æ–¹é¢å¸®åŠ©ä»–/å¥¹è·å¾—å½•å–?\n</code></pre><p>ä»è¾“å‡ºçš„ç»“æœæ¥çœ‹ï¼Œç¬¬ä¸€æ¬¡æ¨ç†çš„ç»“æœè¿˜æ¯”è¾ƒç†æƒ³ã€‚ç„¶è€Œå½“æˆ‘ä»¬è¦æ±‚æ¨¡å‹å†æ¬¡è¿›è¡Œæ›´ä¸ºæ·±å…¥çš„æ€è€ƒï¼ŒTinyLlamaè¿™ä¸ªè§„æ¨¡çš„æ¨¡å‹ä¼¼ä¹æ— æ³•è·Ÿä¸Šæç¤ºè¯çš„æ€è·¯ï¼Œä¹Ÿæ— æ³•è¿›è¡Œè¿›ä¸€æ­¥çš„æ€è€ƒã€‚</p><p>å› æ­¤ï¼Œè¦å®Œæˆæ›´å¤æ‚çš„æ¨ç†ï¼Œå¦‚æœç¡¬ä»¶æ¡ä»¶å…è®¸ï¼Œä½ åº”è¯¥é€‰æ‹©æ›´å¤§çš„æ¨¡å‹ï¼Œå¦‚ llama3-7bã€13bæˆ–è€… 70b çš„æ¨¡å‹è¿›è¡Œå°è¯•ã€‚å½“ç„¶å¦‚æœä½ æ²¡æœ‰è¶³å¤Ÿçš„GPUç®—åŠ›èµ„æºï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡APIè°ƒç”¨GPT-4æˆ–è€…Claude-3è¿™ç§å¼ºå¤§çš„é—­æºæ¨¡å‹è¿›è¡Œå°è¯•ã€‚</p><h2>æŠ€å·§äº”ï¼šå·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ï¼Œç”¨å¤–éƒ¨å·¥å…·å¢å¼ºæ¨¡å‹èƒ½åŠ›</h2><p>å¤§æ¨¡å‹æœ¬èº«å›ºç„¶å¼ºï¼Œä½†æœ‰æ—¶ä¹Ÿéœ€è¦å€ŸåŠ©å¤–éƒ¨å·¥å…·æ¥å®Œæˆä»»åŠ¡ã€‚å°±åƒå·¥åŒ éœ€è¦å„ç§åˆ©å™¨ä¸€æ ·ï¼Œæ¨¡å‹ä¹Ÿå¯ä»¥é€šè¿‡ç¼–å†™ä»£ç ã€è°ƒç”¨APIç­‰æ–¹å¼ï¼Œä¸å¤–éƒ¨å·¥å…·ååŒï¼Œå°±ç›¸å½“äºä¸ºå¤§æ¨¡å‹å®‰è£…ä¸Šäº†èƒ½å¤Ÿé£ç¿”çš„ç¿…è†€ã€‚</p><p>å…ˆçœ‹ä¸‹é¢çš„ä¾‹å­ï¼Œè¿™æ˜¯ä¸€ä¸ªæŸ¥è¯¢å¤©æ°”ä¿¡æ¯çš„ç®€å•APIç¤ºä¾‹ã€‚ï¼ˆè¿™éƒ¨åˆ†æ²¡æœ‰å¤§æ¨¡å‹çš„ä»‹å…¥ï¼Œåªæ˜¯æƒ³ç»™ä½ ä»‹ç»è¿™ä¸ªAPIçš„ä½¿ç”¨æ–¹æ³•ã€‚ï¼‰</p><pre><code class=\"language-plain\">import requests\n\ndef get_weather(city):\n&nbsp; &nbsp; api_key = \"213745ddc9d6130ff1335e7b92b93294\" &nbsp;# æ›¿æ¢ä¸ºä½ è‡ªå·±çš„OpenWeatherMap APIå¯†é’¥\n&nbsp; &nbsp; url = f\"http://api.openweathermap.org/data/2.5/weather?q={city}&amp;appid={api_key}&amp;units=metric\"\n&nbsp; &nbsp; \n&nbsp; &nbsp; response = requests.get(url)\n&nbsp; &nbsp; if response.status_code == 200:\n&nbsp; &nbsp; &nbsp; &nbsp; data = response.json()\n&nbsp; &nbsp; &nbsp; &nbsp; weather = data[\"weather\"][0][\"description\"]\n&nbsp; &nbsp; &nbsp; &nbsp; temp = data[\"main\"][\"temp\"]\n&nbsp; &nbsp; &nbsp; &nbsp; return f\"The weather in {city} is {weather} with a temperature of {temp}Â°C.\"\n&nbsp; &nbsp; else:\n&nbsp; &nbsp; &nbsp; &nbsp; return f\"Unable to fetch weather data for {city}.\"\n\ndef main():\n&nbsp; &nbsp; city = input(\"Enter a city name: \")\n&nbsp; &nbsp; weather_info = get_weather(city)\n&nbsp; &nbsp; print(weather_info)\n\nif __name__ == \"__main__\":\n&nbsp; &nbsp; main()\n</code></pre><p>å½“æˆ‘ä»¬è¾“å…¥beijingï¼Œç¨‹åºå°±ä¼šæ ¹æ®å½“æ—¶çš„å¤©æ°”è¿”å›ç±»ä¼¼äºä¸‹é¢çš„ç»“æœã€‚</p><pre><code class=\"language-plain\">Enter a city name: beijing\nThe weather in beijing is broken clouds with a temperature of 10.94Â°C.\n</code></pre><p>ä¸‹é¢è¿™ä¸ªç¨‹åºåˆ™æ˜¯ä¸€ä¸ªä½¿ç”¨Anthropicçš„Claudeæ¨¡å‹ï¼ˆè¿™é‡Œæˆ‘ä»¬é€‰æ‹©æ¬¡å¼ºçš„Sonnetæ¨¡å‹ï¼‰æ¥åŠ¨æ€è°ƒç”¨ OpenWeatherMap API çš„ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨å¤–éƒ¨å·¥å…·å¢å¼ºClaudeæ¨¡å‹çš„èƒ½åŠ›ã€‚</p><pre><code class=\"language-plain\"># å¯¼å…¥æ‰€éœ€çš„åº“\nimport re\nimport requests\nfrom anthropic import Anthropic\n\nclient = Anthropic()\nMODEL_NAME = \"claude-3-sonnet-20240229\" &nbsp;# æŒ‡å®šè¦ä½¿ç”¨çš„Claudeæ¨¡å‹çš„åç§°\n\n# å®šä¹‰è·å–å¤©æ°”ä¿¡æ¯çš„å‡½æ•°\ndef get_weather(city):\n&nbsp; &nbsp;api_key = \"213745ddc9d6130ff1335e7b92b93294\" &nbsp;# æ›¿æ¢ä¸ºä½ è‡ªå·±çš„OpenWeatherMap APIå¯†é’¥\n&nbsp; &nbsp;url = f\"http://api.openweathermap.org/data/2.5/weather?q={city}&amp;appid={api_key}&amp;units=metric\"\n&nbsp; &nbsp;\n&nbsp; &nbsp;response = requests.get(url)\n&nbsp; &nbsp;if response.status_code == 200:\n&nbsp; &nbsp; &nbsp; &nbsp;data = response.json()\n&nbsp; &nbsp; &nbsp; &nbsp;weather = data[\"weather\"][0][\"description\"]\n&nbsp; &nbsp; &nbsp; &nbsp;temp = data[\"main\"][\"temp\"]\n&nbsp; &nbsp; &nbsp; &nbsp;return f\"The weather in {city} is {weather} with a temperature of {temp}Â°C.\"\n&nbsp; &nbsp;else:\n&nbsp; &nbsp; &nbsp; &nbsp;return f\"Unable to fetch weather data for {city}.\"\n\n# æ„å»ºæ ¼å¼åŒ–çš„å·¥å…·æè¿°å­—ç¬¦ä¸²\ndef construct_format_tool_for_claude_prompt(name, description, parameters):\n&nbsp; &nbsp;constructed_prompt = (\n&nbsp; &nbsp; &nbsp; &nbsp;\"&lt;tool_description&gt;\\n\"\n&nbsp; &nbsp; &nbsp; &nbsp;f\"&lt;tool_name&gt;{name}&lt;/tool_name&gt;\\n\"\n&nbsp; &nbsp; &nbsp; &nbsp;\"&lt;description&gt;\\n\"\n&nbsp; &nbsp; &nbsp; &nbsp;f\"{description}\\n\"\n&nbsp; &nbsp; &nbsp; &nbsp;\"&lt;/description&gt;\\n\"\n&nbsp; &nbsp; &nbsp; &nbsp;\"&lt;parameters&gt;\\n\"\n&nbsp; &nbsp; &nbsp; &nbsp;f\"{construct_format_parameters_prompt(parameters)}\\n\"\n&nbsp; &nbsp; &nbsp; &nbsp;\"&lt;/parameters&gt;\\n\"\n&nbsp; &nbsp; &nbsp; &nbsp;\"&lt;/tool_description&gt;\"\n&nbsp; &nbsp;)\n&nbsp; &nbsp;return constructed_prompt\n\n# æ„å»ºæ ¼å¼åŒ–çš„å·¥å…·å‚æ•°æè¿°å­—ç¬¦ä¸²\ndef construct_format_parameters_prompt(parameters):\n&nbsp; &nbsp;constructed_prompt = \"\\n\".join(f\"&lt;parameter&gt;\\n&lt;name&gt;{parameter['name']}&lt;/name&gt;\\n&lt;type&gt;{parameter['type']}&lt;/type&gt;\\n&lt;description&gt;{parameter['description']}&lt;/description&gt;\\n&lt;/parameter&gt;\" for parameter in parameters)\n\n&nbsp; &nbsp;return constructed_prompt\n\n# æ„å»ºç³»ç»Ÿæç¤º,å‘Šè¯‰Claudeå¦‚ä½•ä½¿ç”¨å¯ç”¨çš„å·¥å…·\ndef construct_tool_use_system_prompt(tools):\n&nbsp; &nbsp;tool_use_system_prompt = (\n&nbsp; &nbsp; &nbsp; &nbsp;\"In this environment you have access to a set of tools you can use to answer the user's question.\\n\"\n&nbsp; &nbsp; &nbsp; &nbsp;\"\\n\"\n&nbsp; &nbsp; &nbsp; &nbsp;\"You may call them like this:\\n\"\n&nbsp; &nbsp; &nbsp; &nbsp;\"&lt;function_calls&gt;\\n\"\n&nbsp; &nbsp; &nbsp; &nbsp;\"&lt;invoke&gt;\\n\"\n&nbsp; &nbsp; &nbsp; &nbsp;\"&lt;tool_name&gt;$TOOL_NAME&lt;/tool_name&gt;\\n\"\n&nbsp; &nbsp; &nbsp; &nbsp;\"&lt;parameters&gt;\\n\"\n&nbsp; &nbsp; &nbsp; &nbsp;\"&lt;$PARAMETER_NAME&gt;$PARAMETER_VALUE&lt;/$PARAMETER_NAME&gt;\\n\"\n&nbsp; &nbsp; &nbsp; &nbsp;\"...\\n\"\n&nbsp; &nbsp; &nbsp; &nbsp;\"&lt;/parameters&gt;\\n\"\n&nbsp; &nbsp; &nbsp; &nbsp;\"&lt;/invoke&gt;\\n\"\n&nbsp; &nbsp; &nbsp; &nbsp;\"&lt;/function_calls&gt;\\n\"\n&nbsp; &nbsp; &nbsp; &nbsp;\"\\n\"\n&nbsp; &nbsp; &nbsp; &nbsp;\"Here are the tools available:\\n\"\n&nbsp; &nbsp; &nbsp; &nbsp;\"&lt;tools&gt;\\n\"\n&nbsp; &nbsp; &nbsp; &nbsp;+ '\\n'.join([tool for tool in tools]) +\n&nbsp; &nbsp; &nbsp; &nbsp;\"\\n&lt;/tools&gt;\"\n&nbsp; &nbsp;)\n&nbsp; &nbsp;return tool_use_system_prompt\n\n# ä»ç»™å®šçš„å­—ç¬¦ä¸²ä¸­æå–æŒ‡å®šæ ‡ç­¾ä¹‹é—´çš„å†…å®¹\ndef extract_between_tags(tag: str, string: str, strip: bool = False) -&gt; list[str]:\n&nbsp; &nbsp;ext_list = re.findall(f\"&lt;{tag}&gt;(.+?)&lt;/{tag}&gt;\", string, re.DOTALL)\n&nbsp; &nbsp;if strip:\n&nbsp; &nbsp; &nbsp; &nbsp;ext_list = [e.strip() for e in ext_list]\n&nbsp; &nbsp;return ext_list\n\n# æ„å»ºæ ¼å¼åŒ–çš„å‡½æ•°è°ƒç”¨ç»“æœå­—ç¬¦ä¸²\ndef construct_successful_function_run_injection_prompt(invoke_results):\n&nbsp; &nbsp;constructed_prompt = (\n&nbsp; &nbsp; &nbsp; &nbsp;\"&lt;function_results&gt;\\n\"\n&nbsp; &nbsp; &nbsp; &nbsp;+ '\\n'.join(\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;f\"&lt;result&gt;\\n&lt;tool_name&gt;{res['tool_name']}&lt;/tool_name&gt;\\n&lt;stdout&gt;\\n{res['tool_result']}\\n&lt;/stdout&gt;\\n&lt;/result&gt;\" \n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for res in invoke_results\n&nbsp; &nbsp; &nbsp; &nbsp;) + \"\\n&lt;/function_results&gt;\"\n&nbsp; &nbsp;)\n&nbsp; &nbsp;\n&nbsp; &nbsp;return constructed_prompt\n\n# å®šä¹‰å¤©æ°”æŸ¥è¯¢å·¥å…·çš„åç§°ã€æè¿°å’Œå‚æ•°\ntool_name = \"weather\"\ntool_description = \"A tool to get the current weather for a given city.\"\n\nparameters = [\n&nbsp; &nbsp;{\n&nbsp; &nbsp; &nbsp; &nbsp;\"name\": \"city\",\n&nbsp; &nbsp; &nbsp; &nbsp;\"type\": \"str\", \n&nbsp; &nbsp; &nbsp; &nbsp;\"description\": \"The name of the city to get the weather for.\"\n&nbsp; &nbsp;}\n]\n\n# æ„å»ºå¤©æ°”æŸ¥è¯¢å·¥å…·çš„æè¿°å­—ç¬¦ä¸²å’Œç³»ç»Ÿæç¤º\ntool = construct_format_tool_for_claude_prompt(tool_name, tool_description, parameters)\nsystem_prompt = construct_tool_use_system_prompt([tool])\n\n# å®šä¹‰ç”¨æˆ·æ¶ˆæ¯,è¯¢é—®ä¼¦æ•¦çš„å¤©æ°”\nweather_message = {\n&nbsp; &nbsp;\"role\": \"user\", \n&nbsp; &nbsp;\"content\": \"What's the weather like in London?\"\n}\n\n# å‘é€ç”¨æˆ·æ¶ˆæ¯ç»™Claude,è·å–Claudeçš„éƒ¨åˆ†è¿”å›,å…¶ä¸­åŒ…å«å¯¹å¤©æ°”æŸ¥è¯¢å·¥å…·çš„è°ƒç”¨\nfunction_calling_message = client.messages.create(\n&nbsp; &nbsp;model=MODEL_NAME,\n&nbsp; &nbsp;max_tokens=1024,\n&nbsp; &nbsp;messages=[weather_message],\n&nbsp; &nbsp;system=system_prompt,\n&nbsp; &nbsp;stop_sequences=[\"\\n\\nHuman:\", \"\\n\\nAssistant\", \"&lt;/function_calls&gt;\"]\n).content[0].text\n\n# ä»Claudeçš„éƒ¨åˆ†è¿”å›ä¸­æå–åŸå¸‚åç§°,å¹¶è°ƒç”¨get_weatherå‡½æ•°è·å–å¤©æ°”ä¿¡æ¯\ncity = extract_between_tags(\"city\", function_calling_message)[0]\nresult = get_weather(city)\n\n# å°†get_weatherå‡½æ•°çš„è¿”å›å€¼æ ¼å¼åŒ–ä¸ºClaudeæœŸæœ›çš„æ ¼å¼\nformatted_results = [{\n&nbsp; &nbsp;'tool_name': 'get_weather',\n&nbsp; &nbsp;'tool_result': result\n}]\nfunction_results = construct_successful_function_run_injection_prompt(formatted_results)\n\n# å°†åŸå§‹æ¶ˆæ¯ã€Claudeçš„éƒ¨åˆ†è¿”å›å’Œæ ¼å¼åŒ–çš„å‡½æ•°è°ƒç”¨ç»“æœç»„åˆæˆæœ€ç»ˆçš„æç¤º\npartial_assistant_message = function_calling_message + \"&lt;/function_calls&gt;\" + function_results\n\n# å°†æœ€ç»ˆçš„æç¤ºå‘é€ç»™Claude,è·å–å¹¶æ‰“å°å‡ºåŒ…å«å®é™…å¤©æ°”ä¿¡æ¯çš„å®Œæ•´å›å¤\nfinal_message = client.messages.create(\n&nbsp; &nbsp;model=MODEL_NAME,\n&nbsp; &nbsp;max_tokens=1024,\n&nbsp; &nbsp;messages=[\n&nbsp; &nbsp; &nbsp; &nbsp;weather_message,\n&nbsp; &nbsp; &nbsp; &nbsp;{\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\"role\": \"assistant\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\"content\": partial_assistant_message\n&nbsp; &nbsp; &nbsp; &nbsp;}\n&nbsp; &nbsp;],\n&nbsp; &nbsp;system=system_prompt\n).content[0].text\n\nprint(partial_assistant_message + final_message)\n</code></pre><p>è¿™ä¸ªç¨‹åºçš„æç¤ºæ„é€ æµç¨‹ä¸»è¦æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol>\n<li>å¯¼å…¥æ‰€éœ€çš„åº“ï¼ˆreã€requestså’Œanthropicï¼‰å¹¶åˆ›å»ºä¸€ä¸ªAnthropicå®¢æˆ·ç«¯ã€‚</li>\n<li>å®šä¹‰get_weatherå‡½æ•°ï¼Œä½¿ç”¨OpenWeatherMap APIè·å–æŒ‡å®šåŸå¸‚çš„å½“å‰å¤©æ°”ä¿¡æ¯ã€‚</li>\n<li>å®šä¹‰å‡ ä¸ªè¾…åŠ©å‡½æ•°ï¼ˆconstruct_format_tool_for_claude_promptã€construct_format_parameters_promptã€construct_tool_use_system_promptã€extract_between_tags å’Œ construct_successful_function_run_injection_promptï¼‰ï¼Œç”¨äºæ„å»ºæ ¼å¼åŒ–çš„å·¥å…·æè¿°ã€å‚æ•°æè¿°ã€ç³»ç»Ÿæç¤ºå’Œå‡½æ•°è°ƒç”¨ç»“æœã€‚</li>\n<li>åˆ›å»ºä¸€ä¸ªå¤©æ°”æŸ¥è¯¢å·¥å…·çš„æè¿°ï¼Œå¹¶å°†å…¶æ’å…¥åˆ°ç³»ç»Ÿæç¤ºä¸­ã€‚</li>\n<li>å‘Claudeå‘é€ä¸€ä¸ªåŒ…å«åŸå¸‚åç§°çš„æ¶ˆæ¯ï¼Œå¹¶è·å–Claudeçš„éƒ¨åˆ†è¿”å›ï¼Œå…¶ä¸­åŒ…å«å¯¹å¤©æ°”æŸ¥è¯¢å·¥å…·çš„è°ƒç”¨ã€‚</li>\n<li>ä»Claudeçš„éƒ¨åˆ†è¿”å›ä¸­æå–åŸå¸‚åç§°ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™get_weatherå‡½æ•°ï¼Œè·å–å®é™…çš„å¤©æ°”ä¿¡æ¯ã€‚</li>\n<li>å°†get_weatherå‡½æ•°çš„è¿”å›å€¼æ ¼å¼åŒ–ä¸ºClaudeæœŸæœ›çš„æ ¼å¼ï¼Œå¹¶å°†å…¶ä¸åŸå§‹æ¶ˆæ¯å’ŒClaudeçš„éƒ¨åˆ†è¿”å›ç»“åˆèµ·æ¥ï¼Œå½¢æˆæœ€ç»ˆçš„æç¤ºã€‚</li>\n<li>å°†æœ€ç»ˆçš„æç¤ºå‘é€ç»™Claudeï¼Œè·å–å¹¶æ‰“å°å‡ºåŒ…å«å®é™…å¤©æ°”ä¿¡æ¯çš„å®Œæ•´å›å¤ã€‚</li>\n</ol><p>è¾“å‡ºå¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\">Okay, let's get the weather for London:\n\n&lt;function_calls&gt;\n&lt;invoke&gt;\n&lt;tool_name&gt;weather&lt;/tool_name&gt;\n&lt;parameters&gt;\n&lt;city&gt;London&lt;/city&gt;\n&lt;/parameters&gt;\n&lt;/invoke&gt;\n&lt;/function_calls&gt;&lt;function_results&gt;\n&lt;result&gt;\n&lt;tool_name&gt;get_weather&lt;/tool_name&gt;\n&lt;stdout&gt;\nThe weather in London is broken clouds with a temperature of 12.81Â°C.\n&lt;/stdout&gt;\n&lt;/result&gt;\n&lt;/function_results&gt;\n\nThe weather report states that it is broken clouds in London at the moment, with a temperature of around 13Â°C.\n</code></pre><p>è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•æ„é€ æ¯”è¾ƒå¤æ‚çš„æç¤ºï¼Œå½¢æˆFunction Callï¼Œå¹¶ä½¿ç”¨å¤–éƒ¨APIå¢å¼ºClaudeæ¨¡å‹çš„èƒ½åŠ›ï¼Œè®©å®ƒèƒ½å¤Ÿæ ¹æ®ç”¨æˆ·çš„è¯·æ±‚è·å–å®æ—¶çš„å¤©æ°”ä¿¡æ¯ã€‚ä½ å¯ä»¥å‚è€ƒè¿™ä¸ªæ¨¡å¼ï¼Œå®ç°å…¶ä»–ç±»å‹çš„å·¥å…·è°ƒç”¨ï¼Œå¦‚æœç´¢ã€æ•°æ®åº“æŸ¥è¯¢æˆ–å…¶ä»–APIè°ƒç”¨ã€‚</p><h2>æ€»ç»“æ—¶åˆ»</h2><p>ä»¥ä¸Šå°±æ˜¯5ä¸ªå¸¸ç”¨çš„æç¤ºå·¥ç¨‹æŠ€å·§åŠå…¶ç¤ºä¾‹ã€‚æ€»è€Œè¨€ä¹‹ï¼Œè®¾è®¡æç¤ºå°±åƒé€šè¿‡è‡ªç„¶è¯­è¨€æ¥ç»™æ¨¡å‹â€œç¼–ç¨‹â€ï¼Œéœ€è¦æ˜ç¡®ä»»åŠ¡ç›®æ ‡ï¼Œæä¾›å……è¶³çš„ä¿¡æ¯ï¼ŒåŒæ—¶åˆ©ç”¨æ°å½“çš„æŠ€å·§æ¥ä¼˜åŒ–æ¨¡å‹çš„è¡¨ç°ã€‚é€šè¿‡å·§å¦™çš„æç¤ºï¼Œæˆ‘ä»¬å¯ä»¥è®©æ¨¡å‹å‘æŒ¥å‡ºæƒŠäººçš„åˆ›é€ åŠ›ï¼Œä¸ºæˆ‘ä»¬è§£å†³å„ç§ç°å®é—®é¢˜ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬ç”¨äº†5ç§ä¸åŒçš„æ¨¡å‹ï¼Œä¸€ç§GPTæ¨¡å‹ï¼Œä¸¤ç§Claudeæ¨¡å‹ï¼Œä»¥åŠä¸¤ç§å¼€æºæ¨¡å‹ï¼Œä¸€ç§æ˜¯ä¸­æ–‡æ¨¡å‹ChatGLMï¼Œä¸€ç§æ˜¯TinyLlamaã€‚</p><p>ä½ ä¹Ÿè®¸æ„Ÿå—åˆ°è¿™äº›æ¨¡å‹æ¨ç†æ•ˆæœå’Œä½¿ç”¨æ–¹å¼çš„ä¸åŒä¹‹å¤„äº†ã€‚</p><ul>\n<li>ç”¨GPTæˆ–è€…Claudeè¿™ç§æ”¶è´¹æ¨¡å‹ï¼Œç®€å•è€Œç›´æ¥ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œä½†æ˜¯éœ€è¦ä»˜è´¹ã€‚</li>\n<li>ç”¨å¼€æºæ¨¡å‹ï¼Œåˆ™éœ€è¦ä»Transformersåº“ä¸­ä¸‹è½½æ¨¡å‹åˆ°æœ¬åœ°ï¼Œè€Œä¸”éœ€è¦å¼ºå¤§çš„GPUèµ„æºã€‚</li>\n<li>æœ‰äº›å°å‹å¼€æºæ¨¡å‹ï¼Œå¦‚TinyLlamaï¼Œæˆ–è®¸å¯ä»¥åœ¨CPUä¸Šè¿è¡Œï¼Œä½†æ˜¯æ¨ç†èƒ½åŠ›å—é™ã€‚</li>\n</ul><p>ä»¥ä¸Šï¼Œå°±æ˜¯å¤§è¯­è¨€æ¨¡å‹ç°é˜¶æ®µçš„åŸºæœ¬æƒ…å†µï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡åœºæ™¯å’Œå®é™…éœ€è¦è¿›è¡Œé€‰æ‹©ã€‚</p><h2>æ€è€ƒé¢˜</h2><ol>\n<li>æŠ€å·§å››ä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©çš„æ¨¡å‹å¤ªå°ï¼Œå› æ­¤ç»“æœä¸å°½å¦‚äººæ„ã€‚ä½ å¯å¦è¯•ç€ä½¿ç”¨æ›´å¼ºçš„æ¨¡å‹æ¥å®ç°éœ€æ±‚ï¼Ÿ</li>\n<li>å¤§æ¨¡å‹çš„Tool Callsæˆ–è€…Function CallingåŠŸèƒ½å®åœ¨æ˜¯ç¥å…µåˆ©å™¨ï¼Œè¯·ä½ ç”¨GPTçš„Function CallingåŠŸèƒ½æ¥æ”¹é€ æŠ€å·§äº”ä¸­çš„ç¨‹åºï¼Œçœ‹çœ‹å“ªå®¶çš„æ¨¡å‹å’ŒAPIæ›´å¥½ç”¨ï¼Ÿ</li>\n<li>æˆ‘ç»™å‡ºçš„5ä¸ªæç¤ºæŠ€å·§ï¼Œä»…ä»…æ˜¯ç®¡ä¸­çª¥è±¹ï¼Œä»…ä»…æ˜¯æç¤ºå·¥ç¨‹å·¥ä½œçš„å†°å±±ä¸€è§’ï¼Œè¯·ä½ åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„å®ç”¨æç¤ºæŠ€å·§ï¼Œä»¥åŠé€šè¿‡å¥½çš„æç¤ºå®Œæˆäº†å“ªäº›å¥½ç©çš„äº‹å„¿ã€‚</li>\n</ol><p>æœŸå¾…ä½ çš„åˆ†äº«ï¼Œæ¬¢è¿ä¸æˆ‘äº¤æµã€‚å¦‚æœä»Šå¤©çš„å†…å®¹è®©ä½ æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™èŠ‚è¯¾è½¬å‘ç»™æœ‰éœ€è¦çš„æœ‹å‹ï¼æˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼</p>","neighbors":{"left":{"article_title":"04ï½œç”¨Assistantsä¸­çš„File searchï¼ˆRAGï¼‰å·¥å…·åšçŸ¥è¯†æ£€ç´¢","id":778111},"right":{"article_title":"06ï½œé€šè¿‡è®¾ç½®æ€è€ƒæ¡†æ¶ï¼Œå¼•å¯¼æ¨¡å‹è¿›è¡Œæ›´å¥½çš„æ¨ç†","id":779775}},"comments":[{"had_liked":false,"id":391007,"user_name":"å‘¨æ˜±é£","can_delete":false,"product_type":"c1","uid":3679542,"ip_address":"ä¸­å›½å°æ¹¾","ucode":"AA12FED49E1918","user_header":"https://static001.geekbang.org/account/avatar/00/38/25/36/d0de604d.jpg","comment_is_top":false,"comment_ctime":1717041245,"is_pvip":false,"replies":[{"id":142223,"content":"å¤§æ¨¡å‹åšè¿™ä¹ˆå‡ ä»¶äº‹ï¼š\n1.ç†è§£ç”¨æˆ·çš„é—®é¢˜ï¼›\n2.æ ¹æ®ç”¨æˆ·çš„é—®é¢˜è°ƒç”¨å·¥å…·ï¼ˆget_weatherï¼‰ï¼Œå¾—åˆ°ç»“æœï¼›\n3.æŠŠæŸ¥è¯¢çš„æ¸©åº¦ç»“æœæ•´åˆæˆè‡ªç„¶è¯­è¨€ï¼Œå›ç­”ç”¨æˆ·çš„é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1717081823,"ip_address":"æ–°åŠ å¡","comment_id":391007,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100764201,"comment_content":"æœ€åè¿™ä¸ªå¤©æ°”çš„ä¾‹å­æˆ‘æ²¡ç†è§£ã€‚è°ƒç”¨get_weatherå‡½æ•°æ˜¯åœ¨ä»£ç ä¸­ï¼Œä¸æ˜¯åœ¨å¤§æ¨¡å‹é‡Œï¼Œæœ€ç»ˆçš„ç»“æœä¹Ÿæ˜¯æ¸©åº¦æ‹¼æ¥è¿‡å»ã€‚é‚£å¤§æ¨¡å‹åšçš„æ˜¯ä»€ä¹ˆå‘¢","like_count":0,"discussions":[{"author":{"id":1144829,"avatar":"https://static001.geekbang.org/account/avatar/00/11/77/fd/98bbabd1.jpg","nickname":"å•ç¡•ğŸ˜","note":"","ucode":"205B0DAD551A8D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646833,"discussion_content":"å¤§æ¨¡å‹åªæŠŠéœ€è¦è°ƒç”¨çš„æ–¹æ³•ä¸ªå‚æ•°è¿”å›ï¼Œç„¶åä½ çš„ç¨‹åºéœ€è¦åœ¨æœ¬åœ°æ ¹æ®ä¸Šé¢è¿”å›çš„ä¿¡æ¯è°ƒç”¨æœ¬åœ°æ–¹æ³•ï¼Œç„¶åæŠŠæœ¬åœ°æ–¹æ³•çš„ç»“æœå†ä¼ ç»™å¤§æ¨¡å‹æˆ–è€…ç›´æ¥ç»“æŸ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1718810460,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646001,"discussion_content":"å¤§æ¨¡å‹åšè¿™ä¹ˆå‡ ä»¶äº‹ï¼š\n1.ç†è§£ç”¨æˆ·çš„é—®é¢˜ï¼›\n2.æ ¹æ®ç”¨æˆ·çš„é—®é¢˜è°ƒç”¨å·¥å…·ï¼ˆget_weatherï¼‰ï¼Œå¾—åˆ°ç»“æœï¼›\n3.æŠŠæŸ¥è¯¢çš„æ¸©åº¦ç»“æœæ•´åˆæˆè‡ªç„¶è¯­è¨€ï¼Œå›ç­”ç”¨æˆ·çš„é—®é¢˜ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1717081823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":392771,"user_name":"æå®¢é…±é…±","can_delete":false,"product_type":"c1","uid":2934665,"ip_address":"å››å·","ucode":"18CDC1DB754D58","user_header":"https://static001.geekbang.org/account/avatar/00/2c/c7/89/16437396.jpg","comment_is_top":false,"comment_ctime":1721731236,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100764201,"comment_content":"æ„Ÿè§‰Claudeçš„function callåŠŸèƒ½æ²¡æœ‰openaiçš„ç®€æ´å‘¢","like_count":0}]}