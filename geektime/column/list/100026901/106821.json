{"id":106821,"title":"29 | å·§ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨å’ŒWithè¯­å¥ç²¾ç®€ä»£ç ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æ™¯éœ„ã€‚</p><p>æˆ‘æƒ³ä½ å¯¹Pythonä¸­çš„withè¯­å¥ä¸€å®šä¸é™Œç”Ÿï¼Œåœ¨ä¸“æ é‡Œå®ƒä¹Ÿæ›¾å¤šæ¬¡å‡ºç°ï¼Œå°¤å…¶æ˜¯åœ¨æ–‡ä»¶çš„è¾“å…¥è¾“å‡ºæ“ä½œä¸­ï¼Œä¸è¿‡æˆ‘æƒ³ï¼Œå¤§éƒ¨åˆ†äººå¯èƒ½ä¹ æƒ¯äº†å®ƒçš„ä½¿ç”¨ï¼Œå´å¹¶ä¸çŸ¥é“éšè—åœ¨å…¶èƒŒåçš„â€œç§˜å¯†â€ã€‚</p><p>é‚£ä¹ˆï¼Œç©¶ç«Ÿwithè¯­å¥è¦æ€ä¹ˆç”¨ï¼Œä¸ä¹‹ç›¸å…³çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼ˆcontext managerï¼‰æ˜¯ä»€ä¹ˆï¼Œå®ƒä»¬ä¹‹é—´åˆæœ‰ç€æ€æ ·çš„è”ç³»å‘¢ï¼Ÿè¿™èŠ‚è¯¾ï¼Œæˆ‘å°±å¸¦ä½ ä¸€èµ·æ­å¼€å®ƒä»¬çš„ç¥ç§˜é¢çº±ã€‚</p><h2>ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Ÿ</h2><p>åœ¨ä»»ä½•ä¸€é—¨ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæ–‡ä»¶çš„è¾“å…¥è¾“å‡ºã€æ•°æ®åº“çš„è¿æ¥æ–­å¼€ç­‰ï¼Œéƒ½æ˜¯å¾ˆå¸¸è§çš„èµ„æºç®¡ç†æ“ä½œã€‚ä½†èµ„æºéƒ½æ˜¯æœ‰é™çš„ï¼Œåœ¨å†™ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬å¿…é¡»ä¿è¯è¿™äº›èµ„æºåœ¨ä½¿ç”¨è¿‡åå¾—åˆ°é‡Šæ”¾ï¼Œä¸ç„¶å°±å®¹æ˜“é€ æˆèµ„æºæ³„éœ²ï¼Œè½»è€…ä½¿å¾—ç³»ç»Ÿå¤„ç†ç¼“æ…¢ï¼Œé‡åˆ™ä¼šä½¿ç³»ç»Ÿå´©æºƒã€‚</p><p>å…‰è¯´è¿™äº›æ¦‚å¿µï¼Œä½ å¯èƒ½ä½“ä¼šä¸åˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><pre><code>for x in range(10000000): \n    f = open('test.txt', 'w')\n    f.write('hello') \n</code></pre><p>è¿™é‡Œæˆ‘ä»¬ä¸€å…±æ‰“å¼€äº†10000000ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯ç”¨å®Œä»¥åéƒ½æ²¡æœ‰å…³é—­å®ƒä»¬ï¼Œå¦‚æœä½ è¿è¡Œè¯¥æ®µä»£ç ï¼Œä¾¿ä¼šæŠ¥é”™ï¼š</p><pre><code>OSError: [Errno 23] Too many open files in system: 'test.txt'\n</code></pre><p>è¿™å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„èµ„æºæ³„éœ²çš„ä¾‹å­ã€‚å› ä¸ºç¨‹åºä¸­åŒæ—¶æ‰“å¼€äº†å¤ªå¤šçš„æ–‡ä»¶ï¼Œå æ®äº†å¤ªå¤šçš„èµ„æºï¼Œé€ æˆç³»ç»Ÿå´©æºƒã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸åŒçš„ç¼–ç¨‹è¯­è¨€éƒ½å¼•å…¥äº†ä¸åŒçš„æœºåˆ¶ã€‚è€Œåœ¨Pythonä¸­ï¼Œå¯¹åº”çš„è§£å†³æ–¹å¼ä¾¿æ˜¯ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼ˆcontext managerï¼‰ã€‚ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œèƒ½å¤Ÿå¸®åŠ©ä½ è‡ªåŠ¨åˆ†é…å¹¶ä¸”é‡Šæ”¾èµ„æºï¼Œå…¶ä¸­æœ€å…¸å‹çš„åº”ç”¨ä¾¿æ˜¯withè¯­å¥ã€‚æ‰€ä»¥ï¼Œä¸Šé¢ä»£ç çš„æ­£ç¡®å†™æ³•åº”è¯¥å¦‚ä¸‹æ‰€ç¤ºï¼š</p><!-- [[[read_end]]] --><pre><code>for x in range(10000000):\n    with open('test.txt', 'w') as f:\n        f.write('hello')\n</code></pre><p>è¿™æ ·ï¼Œæˆ‘ä»¬æ¯æ¬¡æ‰“å¼€æ–‡ä»¶<code>â€œtest.txtâ€</code>ï¼Œå¹¶å†™å…¥<code>â€˜helloâ€™</code>ä¹‹åï¼Œè¿™ä¸ªæ–‡ä»¶ä¾¿ä¼šè‡ªåŠ¨å…³é—­ï¼Œç›¸åº”çš„èµ„æºä¹Ÿå¯ä»¥å¾—åˆ°é‡Šæ”¾ï¼Œé˜²æ­¢èµ„æºæ³„éœ²ã€‚å½“ç„¶ï¼Œwithè¯­å¥çš„ä»£ç ï¼Œä¹Ÿå¯ä»¥ç”¨ä¸‹é¢çš„å½¢å¼è¡¨ç¤ºï¼š</p><pre><code>f = open('test.txt', 'w')\ntry:\n    f.write('hello')\nfinally:\n    f.close()\n</code></pre><p>è¦æ³¨æ„çš„æ˜¯ï¼Œæœ€åçš„finally blockå°¤å…¶é‡è¦ï¼Œå“ªæ€•åœ¨å†™å…¥æ–‡ä»¶æ—¶å‘ç”Ÿé”™è¯¯å¼‚å¸¸ï¼Œå®ƒä¹Ÿå¯ä»¥ä¿è¯è¯¥æ–‡ä»¶æœ€ç»ˆè¢«å…³é—­ã€‚ä¸è¿‡ä¸withè¯­å¥ç›¸æ¯”ï¼Œè¿™æ ·çš„ä»£ç å°±æ˜¾å¾—å†—ä½™äº†ï¼Œå¹¶ä¸”è¿˜å®¹æ˜“æ¼å†™ï¼Œå› æ­¤æˆ‘ä»¬ä¸€èˆ¬æ›´å€¾å‘äºä½¿ç”¨withè¯­å¥ã€‚</p><p>å¦å¤–ä¸€ä¸ªå…¸å‹çš„ä¾‹å­ï¼Œæ˜¯Pythonä¸­çš„threading.lockç±»ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚æˆ‘æƒ³è¦è·å–ä¸€ä¸ªé”ï¼Œæ‰§è¡Œç›¸åº”çš„æ“ä½œï¼Œå®Œæˆåå†é‡Šæ”¾ï¼Œé‚£ä¹ˆä»£ç å°±å¯ä»¥å†™æˆä¸‹é¢è¿™æ ·ï¼š</p><pre><code>some_lock = threading.Lock()\nsome_lock.acquire()\ntry:\n    ...\nfinally:\n    some_lock.release()\n</code></pre><p>è€Œå¯¹åº”çš„withè¯­å¥ï¼ŒåŒæ ·éå¸¸ç®€æ´ï¼š</p><pre><code>some_lock = threading.Lock()\nwith somelock:\n    ...\n</code></pre><p>æˆ‘ä»¬å¯ä»¥ä»è¿™ä¸¤ä¸ªä¾‹å­ä¸­çœ‹åˆ°ï¼Œwithè¯­å¥çš„ä½¿ç”¨ï¼Œå¯ä»¥ç®€åŒ–äº†ä»£ç ï¼Œæœ‰æ•ˆé¿å…èµ„æºæ³„éœ²çš„å‘ç”Ÿã€‚</p><h2>ä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„å®ç°</h2><h3>åŸºäºç±»çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨</h3><p>äº†è§£äº†ä¸Šä¸‹æ–‡ç®¡ç†çš„æ¦‚å¿µå’Œä¼˜ç‚¹åï¼Œä¸‹é¢æˆ‘ä»¬å°±é€šè¿‡å…·ä½“çš„ä¾‹å­ï¼Œä¸€èµ·æ¥çœ‹çœ‹ä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„åŸç†ï¼Œææ¸…æ¥šå®ƒçš„å†…éƒ¨å®ç°ã€‚è¿™é‡Œï¼Œæˆ‘è‡ªå®šä¹‰äº†ä¸€ä¸ªä¸Šä¸‹æ–‡ç®¡ç†ç±»FileManagerï¼Œæ¨¡æ‹ŸPythonçš„æ‰“å¼€ã€å…³é—­æ–‡ä»¶æ“ä½œï¼š</p><pre><code>class FileManager:\n    def __init__(self, name, mode):\n        print('calling __init__ method')\n        self.name = name\n        self.mode = mode \n        self.file = None\n        \n    def __enter__(self):\n        print('calling __enter__ method')\n        self.file = open(self.name, self.mode)\n        return self.file\n\n\n    def __exit__(self, exc_type, exc_val, exc_tb):\n        print('calling __exit__ method')\n        if self.file:\n            self.file.close()\n            \nwith FileManager('test.txt', 'w') as f:\n    print('ready to write to file')\n    f.write('hello world')\n    \n## è¾“å‡º\ncalling __init__ method\ncalling __enter__ method\nready to write to file\ncalling __exit__ method\n</code></pre><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“æˆ‘ä»¬ç”¨ç±»æ¥åˆ›å»ºä¸Šä¸‹æ–‡ç®¡ç†å™¨æ—¶ï¼Œå¿…é¡»ä¿è¯è¿™ä¸ªç±»åŒ…æ‹¬æ–¹æ³•<code>â€__enter__()â€</code>å’Œæ–¹æ³•<code>â€œ__exit__()â€</code>ã€‚å…¶ä¸­ï¼Œæ–¹æ³•<code>â€œ__enter__()â€</code>è¿”å›éœ€è¦è¢«ç®¡ç†çš„èµ„æºï¼Œæ–¹æ³•<code>â€œ__exit__()â€</code>é‡Œé€šå¸¸ä¼šå­˜åœ¨ä¸€äº›é‡Šæ”¾ã€æ¸…ç†èµ„æºçš„æ“ä½œï¼Œæ¯”å¦‚è¿™ä¸ªä¾‹å­ä¸­çš„å…³é—­æ–‡ä»¶ç­‰ç­‰ã€‚</p><p>è€Œå½“æˆ‘ä»¬ç”¨withè¯­å¥ï¼Œæ‰§è¡Œè¿™ä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨æ—¶ï¼š</p><pre><code>with FileManager('test.txt', 'w') as f:\n    f.write('hello world')\n</code></pre><p>ä¸‹é¢è¿™å››æ­¥æ“ä½œä¼šä¾æ¬¡å‘ç”Ÿï¼š</p><ol>\n<li>æ–¹æ³•<code>â€œ__init__()â€</code>è¢«è°ƒç”¨ï¼Œç¨‹åºåˆå§‹åŒ–å¯¹è±¡FileManagerï¼Œä½¿å¾—æ–‡ä»¶åï¼ˆnameï¼‰æ˜¯<code>\"test.txt\"</code>ï¼Œæ–‡ä»¶æ¨¡å¼(mode)æ˜¯<code>'w'</code>ï¼›</li>\n<li>æ–¹æ³•<code>â€œ__enter__()â€</code>è¢«è°ƒç”¨ï¼Œæ–‡ä»¶<code>â€œtest.txtâ€</code>ä»¥å†™å…¥çš„æ¨¡å¼è¢«æ‰“å¼€ï¼Œå¹¶ä¸”è¿”å›FileManagerå¯¹è±¡èµ‹äºˆå˜é‡fï¼›</li>\n<li>å­—ç¬¦ä¸²<code>â€œhello worldâ€</code>è¢«å†™å…¥æ–‡ä»¶<code>â€œtest.txtâ€</code>ï¼›</li>\n<li>æ–¹æ³•<code>â€œ__exit__()â€</code>è¢«è°ƒç”¨ï¼Œè´Ÿè´£å…³é—­ä¹‹å‰æ‰“å¼€çš„æ–‡ä»¶æµã€‚</li>\n</ol><p>å› æ­¤ï¼Œè¿™ä¸ªç¨‹åºçš„è¾“å‡ºæ˜¯ï¼š</p><pre><code>calling __init__ method\ncalling __enter__ method\nready to write to file\ncalling __exit__ meth\n</code></pre><p>å¦å¤–ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œæ–¹æ³•<code>â€œ__exit__()â€</code>ä¸­çš„å‚æ•°<code>â€œexc_type, exc_val, exc_tbâ€</code>ï¼Œåˆ†åˆ«è¡¨ç¤ºexception_typeã€exception_valueå’Œtracebackã€‚å½“æˆ‘ä»¬æ‰§è¡Œå«æœ‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„withè¯­å¥æ—¶ï¼Œå¦‚æœæœ‰å¼‚å¸¸æŠ›å‡ºï¼Œå¼‚å¸¸çš„ä¿¡æ¯å°±ä¼šåŒ…å«åœ¨è¿™ä¸‰ä¸ªå˜é‡ä¸­ï¼Œä¼ å…¥æ–¹æ³•<code>â€œ__exit__()â€</code>ã€‚</p><p>å› æ­¤ï¼Œå¦‚æœä½ éœ€è¦å¤„ç†å¯èƒ½å‘ç”Ÿçš„å¼‚å¸¸ï¼Œå¯ä»¥åœ¨<code>â€œ__exit__()â€</code>æ·»åŠ ç›¸åº”çš„ä»£ç ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ ·æ¥å†™ï¼š</p><pre><code>class Foo:\n    def __init__(self):\n        print('__init__ called')        \n\n    def __enter__(self):\n        print('__enter__ called')\n        return self\n    \n    def __exit__(self, exc_type, exc_value, exc_tb):\n        print('__exit__ called')\n        if exc_type:\n            print(f'exc_type: {exc_type}')\n            print(f'exc_value: {exc_value}')\n            print(f'exc_traceback: {exc_tb}')\n            print('exception handled')\n        return True\n    \nwith Foo() as obj:\n    raise Exception('exception raised').with_traceback(None)\n\n# è¾“å‡º\n__init__ called\n__enter__ called\n__exit__ called\nexc_type: &lt;class 'Exception'&gt;\nexc_value: exception raised\nexc_traceback: &lt;traceback object at 0x1046036c8&gt;\nexception handled\n</code></pre><p>è¿™é‡Œï¼Œæˆ‘ä»¬åœ¨withè¯­å¥ä¸­æ‰‹åŠ¨æŠ›å‡ºäº†å¼‚å¸¸â€œexception raisedâ€ï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼Œ<code>â€œ__exit__()â€</code>æ–¹æ³•ä¸­å¼‚å¸¸ï¼Œè¢«é¡ºåˆ©æ•æ‰å¹¶è¿›è¡Œäº†å¤„ç†ã€‚ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæ–¹æ³•<code>â€œ__exit__()â€</code>æ²¡æœ‰è¿”å›Trueï¼Œå¼‚å¸¸ä»ç„¶ä¼šè¢«æŠ›å‡ºã€‚å› æ­¤ï¼Œå¦‚æœä½ ç¡®å®šå¼‚å¸¸å·²ç»è¢«å¤„ç†äº†ï¼Œè¯·åœ¨<code>â€œ__exit__()â€</code>çš„æœ€åï¼ŒåŠ ä¸Š<code>â€œreturn Trueâ€</code>è¿™æ¡è¯­å¥ã€‚</p><p>åŒæ ·çš„ï¼Œæ•°æ®åº“çš„è¿æ¥æ“ä½œï¼Œä¹Ÿå¸¸å¸¸ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ¥è¡¨ç¤ºï¼Œè¿™é‡Œæˆ‘ç»™å‡ºäº†æ¯”è¾ƒç®€åŒ–çš„ä»£ç ï¼š</p><pre><code>class DBConnectionManager: \n    def __init__(self, hostname, port): \n        self.hostname = hostname \n        self.port = port \n        self.connection = None\n  \n    def __enter__(self): \n        self.connection = DBClient(self.hostname, self.port) \n        return self\n  \n    def __exit__(self, exc_type, exc_val, exc_tb): \n        self.connection.close() \n  \nwith DBConnectionManager('localhost', '8080') as db_client: \n</code></pre><p>ä¸å‰é¢FileManagerçš„ä¾‹å­ç±»ä¼¼ï¼š</p><ul>\n<li>æ–¹æ³•<code>â€œ__init__()â€</code>è´Ÿè´£å¯¹æ•°æ®åº“è¿›è¡Œåˆå§‹åŒ–ï¼Œä¹Ÿå°±æ˜¯å°†ä¸»æœºåã€æ¥å£ï¼ˆè¿™é‡Œæ˜¯localhostå’Œ8080ï¼‰åˆ†åˆ«èµ‹äºˆå˜é‡hostnameå’Œportï¼›</li>\n<li>æ–¹æ³•<code>â€œ__enter__()â€</code>è¿æ¥æ•°æ®åº“ï¼Œå¹¶ä¸”è¿”å›å¯¹è±¡DBConnectionManagerï¼›</li>\n<li>æ–¹æ³•<code>â€œ__exit__()â€</code>åˆ™è´Ÿè´£å…³é—­æ•°æ®åº“çš„è¿æ¥ã€‚</li>\n</ul><p>è¿™æ ·ä¸€æ¥ï¼Œåªè¦ä½ å†™å®Œäº†DBconnectionManagerè¿™ä¸ªç±»ï¼Œé‚£ä¹ˆåœ¨ç¨‹åºæ¯æ¬¡è¿æ¥æ•°æ®åº“æ—¶ï¼Œæˆ‘ä»¬éƒ½åªéœ€è¦ç®€å•åœ°è°ƒç”¨withè¯­å¥å³å¯ï¼Œå¹¶ä¸éœ€è¦å…³å¿ƒæ•°æ®åº“çš„å…³é—­ã€å¼‚å¸¸ç­‰ç­‰ï¼Œæ˜¾ç„¶å¤§å¤§æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚</p><h3>åŸºäºç”Ÿæˆå™¨çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨</h3><p>è¯šç„¶ï¼ŒåŸºäºç±»çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œåœ¨Pythonä¸­åº”ç”¨å¹¿æ³›ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬ç»å¸¸çœ‹åˆ°çš„å½¢å¼ï¼Œä¸è¿‡Pythonä¸­çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨å¹¶ä¸å±€é™äºæ­¤ã€‚é™¤äº†åŸºäºç±»ï¼Œå®ƒè¿˜å¯ä»¥åŸºäºç”Ÿæˆå™¨å®ç°ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ã€‚</p><p>æ¯”å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨è£…é¥°å™¨contextlib.contextmanagerï¼Œæ¥å®šä¹‰è‡ªå·±æ‰€éœ€çš„åŸºäºç”Ÿæˆå™¨çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œç”¨ä»¥æ”¯æŒwithè¯­å¥ã€‚è¿˜æ˜¯æ‹¿å‰é¢çš„ç±»ä¸Šä¸‹æ–‡ç®¡ç†å™¨FileManageræ¥è¯´ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ä¸‹é¢å½¢å¼æ¥è¡¨ç¤ºï¼š</p><pre><code>from contextlib import contextmanager\n\n@contextmanager\ndef file_manager(name, mode):\n    try:\n        f = open(name, mode)\n        yield f\n    finally:\n        f.close()\n        \nwith file_manager('test.txt', 'w') as f:\n    f.write('hello world')\n</code></pre><p>è¿™æ®µä»£ç ä¸­ï¼Œå‡½æ•°file_manager()æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œå½“æˆ‘ä»¬æ‰§è¡Œwithè¯­å¥æ—¶ï¼Œä¾¿ä¼šæ‰“å¼€æ–‡ä»¶ï¼Œå¹¶è¿”å›æ–‡ä»¶å¯¹è±¡fï¼›å½“withè¯­å¥æ‰§è¡Œå®Œåï¼Œfinally blockä¸­çš„å…³é—­æ–‡ä»¶æ“ä½œä¾¿ä¼šæ‰§è¡Œã€‚</p><p>ä½ å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨åŸºäºç”Ÿæˆå™¨çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ—¶ï¼Œæˆ‘ä»¬ä¸å†ç”¨å®šä¹‰<code>â€œ__enter__()â€</code>å’Œ<code>â€œ__exit__()â€</code>æ–¹æ³•ï¼Œä½†è¯·åŠ¡å¿…åŠ ä¸Šè£…é¥°å™¨@contextmanagerï¼Œè¿™ä¸€ç‚¹æ–°æ‰‹å¾ˆå®¹æ˜“ç–å¿½ã€‚</p><p>è®²å®Œè¿™ä¸¤ç§ä¸åŒåŸç†çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨åï¼Œè¿˜éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼ŒåŸºäºç±»çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨å’ŒåŸºäºç”Ÿæˆå™¨çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œè¿™ä¸¤è€…åœ¨åŠŸèƒ½ä¸Šæ˜¯ä¸€è‡´çš„ã€‚åªä¸è¿‡ï¼Œ</p><ul>\n<li>åŸºäºç±»çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ›´åŠ flexibleï¼Œé€‚ç”¨äºå¤§å‹çš„ç³»ç»Ÿå¼€å‘ï¼›</li>\n<li>è€ŒåŸºäºç”Ÿæˆå™¨çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ›´åŠ æ–¹ä¾¿ã€ç®€æ´ï¼Œé€‚ç”¨äºä¸­å°å‹ç¨‹åºã€‚</li>\n</ul><p>æ— è®ºä½ ä½¿ç”¨å“ªä¸€ç§ï¼Œè¯·ä¸ç”¨å¿˜è®°åœ¨æ–¹æ³•<code>â€œ__exit__()â€</code>æˆ–è€…æ˜¯finally blockä¸­é‡Šæ”¾èµ„æºï¼Œè¿™ä¸€ç‚¹å°¤å…¶é‡è¦ã€‚</p><h2>æ€»ç»“</h2><p>è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œäº†è§£äº†èµ„æºæ³„éœ²çš„æ˜“å‘ç”Ÿæ€§ï¼Œå’Œå…¶å¸¦æ¥çš„ä¸¥é‡åæœï¼Œä»è€Œå¼•å…¥äº†åº”å¯¹æ–¹æ¡ˆâ€”â€”å³ä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„æ¦‚å¿µã€‚ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œé€šå¸¸åº”ç”¨åœ¨æ–‡ä»¶çš„æ‰“å¼€å…³é—­å’Œæ•°æ®åº“çš„è¿æ¥å…³é—­ç­‰åœºæ™¯ä¸­ï¼Œå¯ä»¥ç¡®ä¿ç”¨è¿‡çš„èµ„æºå¾—åˆ°è¿…é€Ÿé‡Šæ”¾ï¼Œæœ‰æ•ˆæé«˜äº†ç¨‹åºçš„å®‰å…¨æ€§ï¼Œ</p><p>æ¥ç€ï¼Œæˆ‘ä»¬é€šè¿‡è‡ªå®šä¹‰ä¸Šä¸‹æ–‡ç®¡ç†çš„å®ä¾‹ï¼Œäº†è§£äº†ä¸Šä¸‹æ–‡ç®¡ç†å·¥ä½œçš„åŸç†ï¼Œå¹¶ä¸€èµ·å­¦ä¹ äº†åŸºäºç±»çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨å’ŒåŸºäºç”Ÿæˆå™¨çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œè¿™ä¸¤è€…çš„åŠŸèƒ½ç›¸åŒï¼Œå…·ä½“ç”¨å“ªä¸ªï¼Œå–å†³äºä½ çš„å…·ä½“ä½¿ç”¨åœºæ™¯ã€‚</p><p>å¦å¤–ï¼Œä¸Šä¸‹æ–‡ç®¡ç†å™¨é€šå¸¸å’Œwithè¯­å¥ä¸€èµ·ä½¿ç”¨ï¼Œå¤§å¤§æé«˜äº†ç¨‹åºçš„ç®€æ´åº¦ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“æˆ‘ä»¬ç”¨withè¯­å¥æ‰§è¡Œä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„æ“ä½œæ—¶ï¼Œä¸€æ—¦æœ‰å¼‚å¸¸æŠ›å‡ºï¼Œå¼‚å¸¸çš„ç±»å‹ã€å€¼ç­‰å…·ä½“ä¿¡æ¯ï¼Œéƒ½ä¼šé€šè¿‡å‚æ•°ä¼ å…¥<code>â€œ__exit__()â€</code>å‡½æ•°ä¸­ã€‚ä½ å¯ä»¥è‡ªè¡Œå®šä¹‰ç›¸å…³çš„æ“ä½œå¯¹å¼‚å¸¸è¿›è¡Œå¤„ç†ï¼Œè€Œå¤„ç†å®Œå¼‚å¸¸åï¼Œä¹Ÿåˆ«å¿˜äº†åŠ ä¸Š<code>â€œreturn Trueâ€</code>è¿™æ¡è¯­å¥ï¼Œå¦åˆ™ä»ç„¶ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>é‚£ä¹ˆï¼Œåœ¨ä½ æ—¥å¸¸çš„å­¦ä¹ å·¥ä½œä¸­ï¼Œå“ªäº›åœºæ™¯ä½¿ç”¨è¿‡ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Ÿä½¿ç”¨è¿‡ç¨‹ä¸­åˆé‡åˆ°äº†å“ªäº›é—®é¢˜ï¼Œæˆ–æ˜¯æœ‰ä»€ä¹ˆæ–°çš„å‘ç°å‘¢ï¼Ÿæ¬¢è¿åœ¨ä¸‹æ–¹ç•™è¨€ä¸æˆ‘è®¨è®ºï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«å‡ºå»ï¼Œæˆ‘ä»¬ä¸€èµ·äº¤æµï¼Œä¸€èµ·è¿›æ­¥ã€‚</p><p></p>","comments":[{"had_liked":false,"id":113723,"user_name":"AllenGFLiu","can_delete":false,"product_type":"c1","uid":1221991,"ip_address":"","ucode":"90FA8A619A2629","user_header":"https://static001.geekbang.org/account/avatar/00/12/a5/67/bf286335.jpg","comment_is_top":false,"comment_ctime":1563147897,"is_pvip":false,"replies":[{"id":"41481","content":"å—¯å—¯ï¼Œæ˜¯è¿™æ ·çš„","user_name":"ä½œè€…å›å¤","user_name_real":"Jingxiao","uid":"1259521","ctime":1563169123,"ip_address":"","comment_id":113723,"utype":1}],"discussion_count":2,"race_medal":0,"score":"100347395705","product_id":100026901,"comment_content":"ç¬¬ä¸€æ¬¡æœ‰æ•™ç¨‹æåˆ°è¿™ä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œå­¦ä¹ ã€‚<br>å¯¹çŸ¥è¯†çš„å­¦ä¹ å°±æ˜¯éœ€è¦ä»å¤šè§’åº¦é‡å¤å»çœ‹ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æŸ¥é—è¡¥ç¼ºï¼Œæ‰èƒ½ä¿æŒä¸æ–­è¿›æ­¥ã€‚","like_count":24,"discussions":[{"author":{"id":1259521,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJOlibibPFEWOib8ib7RtfAtxND5FUqCxxoeTuLAbBI9ic23xuwdXT4IyiaWq3Fic9RgEAYI0lBTbEp2rcg/132","nickname":"Jingxiao","note":"","ucode":"EB966BB87132F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458361,"discussion_content":"å—¯å—¯ï¼Œæ˜¯è¿™æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563169123,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1848630,"avatar":"","nickname":"xiaoyan","note":"","ucode":"064CCE4FC356F2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":236829,"discussion_content":"ä½ çœ‹çš„å¤šåŠæ˜¯é˜‰å‰²ç‰ˆçš„æ•™ç¨‹å§ï¼Œmark lutzè€å¸ˆçš„ä¹¦æ‰€æœ‰å†…å®¹éƒ½æœ‰ï¼Œä½ å¯ä»¥çœ‹çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587125775,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113979,"user_name":"ajodfaj","can_delete":false,"product_type":"c1","uid":1019618,"ip_address":"","ucode":"4E96DDDF9D686D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8e/e2/fc6260fb.jpg","comment_is_top":false,"comment_ctime":1563197954,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"61692740098","product_id":100026901,"comment_content":"with tf.Session() as sess","like_count":15,"discussions":[{"author":{"id":1528865,"avatar":"https://static001.geekbang.org/account/avatar/00/17/54/21/aaf74594.jpg","nickname":"Fullmetal Alchemist","note":"","ucode":"4D260084DBC2B2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385223,"discussion_content":"ä¸€çœ‹å°±æ˜¯è€ç‚¼ä¸¹å¸ˆäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626945275,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113746,"user_name":"enjoylearning","can_delete":false,"product_type":"c1","uid":1000237,"ip_address":"","ucode":"DCAF8538DEA277","user_header":"https://static001.geekbang.org/account/avatar/00/0f/43/2d/af86d73f.jpg","comment_is_top":false,"comment_ctime":1563150830,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"57397725678","product_id":100026901,"comment_content":"ä¸»è¦ç”¨äºæ•°æ®åº“è¿æ¥","like_count":14},{"had_liked":false,"id":113749,"user_name":"new","can_delete":false,"product_type":"c1","uid":1096252,"ip_address":"","ucode":"DFFCDC2123CCAA","user_header":"https://static001.geekbang.org/account/avatar/00/10/ba/3c/2b642c9a.jpg","comment_is_top":false,"comment_ctime":1563151539,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"53102759091","product_id":100026901,"comment_content":"æ‰“å¼€æ–‡ä»¶æ—¶ç”¨æœ€æ–¹ä¾¿","like_count":13},{"had_liked":false,"id":113854,"user_name":"LJK","can_delete":false,"product_type":"c1","uid":1199213,"ip_address":"","ucode":"12B2441099FF1D","user_header":"https://static001.geekbang.org/account/avatar/00/12/4c/6d/c20f2d5a.jpg","comment_is_top":false,"comment_ctime":1563173518,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"35922911886","product_id":100026901,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·é—®åŸºäºç±»çš„ä¸Šä¸‹æ–‡ï¼Œâ€œ__enter__â€œæ–¹æ³•ä»€ä¹ˆæ—¶å€™è¿”å›selfå‘¢ï¼ŸDBConnectionManagerçš„ä¾‹å­ä¸­å¯ä»¥è¯´æ˜ä¸€ä¸‹ä¸ºä»€ä¹ˆæ˜¯è¿”å›selfä¸æ˜¯è¿”å›self.connectionä¹ˆï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1130122,"avatar":"https://static001.geekbang.org/account/avatar/00/11/3e/8a/891b0e58.jpg","nickname":"wnz27","note":"","ucode":"BC9ACB6B7C6FD9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":71669,"discussion_content":"å–å†³äºä½ withè¯­å¥è¦ç”¨ä»€ä¹ˆï¼Œæˆ‘è§‰å¾—åé¢çš„é‚£ä¸ªconnectionæ¼äº†ï¼Œselfçš„æ„æ€æ˜¯ç±»çš„å®ä¾‹ï¼Œä½†æˆ‘è§‰å¾—é‚£ä¸ªwithè¯­å¥é‡Œè¦ä½¿ç”¨çš„æ˜¯é‚£ä¸ªconnectionã€‚","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1575446248,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2977554,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLCmEAVBUFDcT4pChy93J4RKHA2OasbwWaIYXB70t1CJsmrD71sxnpWlDfY1diaLLKz1zUwDjzAKibGQ/132","nickname":"Geek_dcd08f","note":"","ucode":"1ECA7B63CA95A5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570101,"discussion_content":"import pymongo\n\nclass DBConnectionManager:\n    def __init__(self, hostname, port):\n        self.hostname = hostname\n        self.port = port\n        self.connection = None\n\n    def DBClient(self, hostname, port):\n        my_client = pymongo.MongoClient(host=hostname, port=port)\n        return my_client\n\n    def __enter__(self):\n        self.connection = self.DBClient(self.hostname, self.port)\n        return self.connection\n\n    def __exit__(self, exc_type, exc_val, exc_tb):\n        self.connection.close()\n\n\nwith DBConnectionManager(&#39;localhost&#39;, 27017) as db_client:\n    mydb = db_client[æ•°æ®åº“]\n    mongod_con = mydb[é›†åˆ]\n    mongod_con.insert_one(data)\n    print(&#39;è¿æ¥æˆåŠŸ&#39;)\néƒ½è¡Œå–å†³ä½ è¦ä»€ä¹ˆ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651664676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113731,"user_name":"å®‰æ’","can_delete":false,"product_type":"c1","uid":1260026,"ip_address":"","ucode":"F78CFA9624CAEF","user_header":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","comment_is_top":false,"comment_ctime":1563148695,"is_pvip":false,"replies":[{"id":"41480","content":"å‡†ç¡®çš„è¯´é‡Šæ”¾èµ„æºçš„è¡Œä¸ºå‘ç”Ÿåœ¨withè¯­å¥çš„æœ€åï¼ˆä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„__exit__å‡½æ•°å†…ï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"Jingxiao","uid":"1259521","ctime":1563169102,"ip_address":"","comment_id":113731,"utype":1}],"discussion_count":2,"race_medal":0,"score":"27332952471","product_id":100026901,"comment_content":"æ˜¯ä¸æ˜¯åªæœ‰ç¨‹åºå‡ºäº†withä»£ç å—ï¼Œç®¡ç†çš„å¯¹è±¡æ‰ä¼šææ„ï¼Œä¹Ÿå°±æ˜¯é‡Šæ”¾èµ„æºï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1259521,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJOlibibPFEWOib8ib7RtfAtxND5FUqCxxoeTuLAbBI9ic23xuwdXT4IyiaWq3Fic9RgEAYI0lBTbEp2rcg/132","nickname":"Jingxiao","note":"","ucode":"EB966BB87132F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458364,"discussion_content":"å‡†ç¡®çš„è¯´é‡Šæ”¾èµ„æºçš„è¡Œä¸ºå‘ç”Ÿåœ¨withè¯­å¥çš„æœ€åï¼ˆä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„__exit__å‡½æ•°å†…ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563169102,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1126441,"avatar":"https://static001.geekbang.org/account/avatar/00/11/30/29/d6816ebf.jpg","nickname":"å°ä¾ é¾™æ—‹é£","note":"","ucode":"073F3924A99835","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2465,"discussion_content":"ææ„æ˜¯__del__ï¼Œå’Œ__exit__ä¸ä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563677553,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114281,"user_name":"Geek_59f23e","can_delete":false,"product_type":"c1","uid":1513783,"ip_address":"","ucode":"A463C6EB7447FD","user_header":"https://static001.geekbang.org/account/avatar/00/17/19/37/e0a9bf99.jpg","comment_is_top":false,"comment_ctime":1563265116,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18743134300","product_id":100026901,"comment_content":"UnboundLocalError: local variable &#39;f&#39; referenced before assignment<br>æœ€åä¸€ä¸ªä¾‹å­æœ‰æŠ¥é”™å“¦ï¼ŒåŸºäºç”Ÿæˆå™¨çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨é‚£å„¿ï¼Œæç¤ºè¯´finallyè¯­å¥é‡Œçš„få˜é‡æ²¡æœ‰å…ˆå£°æ˜ã€‚","like_count":4,"discussions":[{"author":{"id":1934873,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/86/19/86d74814.jpg","nickname":"å¤©å‡‰å¥½ä¸ªç§‹","note":"","ucode":"718D353E16C8F5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332694,"discussion_content":"åœ¨tryä¹‹å‰å£°æ˜ä¸€ä¸ªglobal","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607313322,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":246498,"user_name":"å¸ƒå‡¡","can_delete":false,"product_type":"c1","uid":1202465,"ip_address":"","ucode":"346FCD332F8BFA","user_header":"https://static001.geekbang.org/account/avatar/00/12/59/21/d2efde18.jpg","comment_is_top":false,"comment_ctime":1599379442,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10189314034","product_id":100026901,"comment_content":"è¿™é‡Œwith çš„ç”¨æ³•å’ŒC#ä¸­çš„using ä¸€æ ·ï¼Œè¡¨ç¤ºèµ„æºå˜é‡åœ¨ä¸€ä¸ªå—ä¸­æœ‰æ•ˆï¼Œå—ç»“æŸåè‡ªåŠ¨å›æ”¶èµ„æº","like_count":2},{"had_liked":false,"id":146848,"user_name":"ç«é”…å°ç‹å­","can_delete":false,"product_type":"c1","uid":1053262,"ip_address":"","ucode":"7D1BF39C437A99","user_header":"https://static001.geekbang.org/account/avatar/00/10/12/4e/ff0702fc.jpg","comment_is_top":false,"comment_ctime":1572675438,"is_pvip":false,"replies":[{"id":"66796","content":"åé¢æœ‰è®²åˆ°","user_name":"ä½œè€…å›å¤","user_name_real":"Jingxiao","uid":"1259521","ctime":1579136111,"ip_address":"","comment_id":146848,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10162610030","product_id":100026901,"comment_content":"ç°åœ¨æ‰å­¦è¿™ä¸ªä¸“æ  æ„Ÿè§‰è½åäº†å¥½å¤šåŒå­¦ æƒ³é—®ä¸‹è€å¸ˆä¸€ä¸ªé—®é¢˜ è¿™é‡Œè®²åˆ°äº†ä¸Šä¸‹æ–‡ç®¡ç†å™¨ å¯ä¸å¯ä»¥åˆ†æä¸‹async withå¼‚æ­¥ä¸Šä¸‹æ–‡çš„é€»è¾‘å’Œç”¨æ³• ï¼Ÿä¸€ç›´ä¸æ˜¯å¾ˆæ˜ç™½è¿™ä¸ªç‚¹ ğŸ˜€","like_count":2,"discussions":[{"author":{"id":1259521,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJOlibibPFEWOib8ib7RtfAtxND5FUqCxxoeTuLAbBI9ic23xuwdXT4IyiaWq3Fic9RgEAYI0lBTbEp2rcg/132","nickname":"Jingxiao","note":"","ucode":"EB966BB87132F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473031,"discussion_content":"åé¢æœ‰è®²åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579136111,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143158,"user_name":"Carl","can_delete":false,"product_type":"c1","uid":1355401,"ip_address":"","ucode":"B611507DCFFA11","user_header":"https://static001.geekbang.org/account/avatar/00/14/ae/89/81404170.jpg","comment_is_top":false,"comment_ctime":1571640852,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"10161575444","product_id":100026901,"comment_content":"ä¸ºä»€ä¹ˆå¹³æ—¶ä½¿ç”¨ with open() as f æ—¶å¯ä»¥ç•…é€šæ— é˜»å‘¢?<br>æ˜¯å› ä¸ºopenè¿™ä¸ªå‡½æ•°åœ¨æºç é‡Œå°±ç”¨@contextmanagerè£…é¥°äº†å—?","like_count":2,"discussions":[{"author":{"id":1313840,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0c/30/bb4bfe9d.jpg","nickname":"lyonger","note":"","ucode":"E89A75DADEA2A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306803,"discussion_content":"å¯ä»¥çœ‹ä¸‹è¿™é‡Œï¼šhttps://stackoverflow.com/questions/43757161/why-can-you-use-open-as-context-manager","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1600394070,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2034865,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/0c/b1/f85dbb1e.jpg","nickname":"å°è¥¿å­","note":"","ucode":"321C9C6075FFE2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290457,"discussion_content":"åŒé—®ï¼Œè¯·é—®åŒå­¦ææ¸…æ¥šäº†å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594479400,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114562,"user_name":"ç³æ¢¦","can_delete":false,"product_type":"c1","uid":1596386,"ip_address":"","ucode":"A86FC44F6321BD","user_header":"","comment_is_top":false,"comment_ctime":1563336882,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10153271474","product_id":100026901,"comment_content":"è¯·é—®æ•°æ®åº“çš„é‚£ä¸ªä¾‹å­ï¼Œ__enter__()ä¸­è¿”å›self.connectionæ˜¯ä¸æ˜¯æ›´ç¬¦åˆå®é™…åº”ç”¨ä¸­çš„æƒ…å†µã€‚ ","like_count":2},{"had_liked":false,"id":120339,"user_name":"fly1024","can_delete":false,"product_type":"c1","uid":1076193,"ip_address":"","ucode":"EBABDE1D13B509","user_header":"https://static001.geekbang.org/account/avatar/00/10/6b/e1/90d63f3e.jpg","comment_is_top":false,"comment_ctime":1564837335,"is_pvip":false,"replies":[{"id":"48149","content":"å¯¹","user_name":"ä½œè€…å›å¤","user_name_real":"Jingxiao","uid":"1259521","ctime":1567123892,"ip_address":"","comment_id":120339,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5859804631","product_id":100026901,"comment_content":"æœ‰ä¸ªç–‘é—®: å¯¹äºfileå’ŒLockè¿™ä¸¤ä¸ªä½¿ç”¨withç”¨æ³•ï¼Œpythonä¼šè‡ªåŠ¨è°ƒç”¨å¯¹åº”é‡Šæ”¾èµ„æºçš„å‡½æ•°(closeå’Œrelease)ï¼Œè¿™ä¸¤ä¸ªé‡Šæ”¾èµ„æºçš„å‡½æ•°ä¹Ÿæ˜¯å®šä¹‰__exitå‡½æ•°é‡Œçš„å—ï¼Ÿå¸Œæœ›è€å¸ˆè§£ç­”ä¸€ä¸‹ã€‚","like_count":1,"discussions":[{"author":{"id":1259521,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJOlibibPFEWOib8ib7RtfAtxND5FUqCxxoeTuLAbBI9ic23xuwdXT4IyiaWq3Fic9RgEAYI0lBTbEp2rcg/132","nickname":"Jingxiao","note":"","ucode":"EB966BB87132F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461292,"discussion_content":"å¯¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567123892,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118227,"user_name":"å¼ æ´ªé˜†","can_delete":false,"product_type":"c1","uid":1001954,"ip_address":"","ucode":"CFF7035D0DF059","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/e2/1fad12eb.jpg","comment_is_top":false,"comment_ctime":1564296786,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5859264082","product_id":100026901,"comment_content":"withé™åˆ¶äº†å¯¹è±¡çš„ä½œç”¨åŸŸï¼Œç›¸å½“äºæ˜¯ä¸ªä¸´æ—¶å¯¹è±¡","like_count":1},{"had_liked":false,"id":113817,"user_name":"Geek_d848f7","can_delete":false,"product_type":"c1","uid":1524021,"ip_address":"","ucode":"F24BC59B6E9E6B","user_header":"","comment_is_top":false,"comment_ctime":1563160993,"is_pvip":false,"replies":[{"id":"41478","content":"å“ªé‡Œä¸æ˜ç™½ï¼Ÿæ–‡ç« ä¸­åº”è¯¥è®²çš„å¾ˆæ¸…æ¥šäº†","user_name":"ä½œè€…å›å¤","user_name_real":"Jingxiao","uid":"1259521","ctime":1563168972,"ip_address":"","comment_id":113817,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5858128289","product_id":100026901,"comment_content":"è¿˜æ˜¯ä¸æ€ä¹ˆæ¸…æ¥šåŸºäºç”Ÿæˆå™¨çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„è¿è¡Œè¿‡ç¨‹","like_count":1,"discussions":[{"author":{"id":1259521,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJOlibibPFEWOib8ib7RtfAtxND5FUqCxxoeTuLAbBI9ic23xuwdXT4IyiaWq3Fic9RgEAYI0lBTbEp2rcg/132","nickname":"Jingxiao","note":"","ucode":"EB966BB87132F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458399,"discussion_content":"å“ªé‡Œä¸æ˜ç™½ï¼Ÿæ–‡ç« ä¸­åº”è¯¥è®²çš„å¾ˆæ¸…æ¥šäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563168972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113786,"user_name":"å€¾","can_delete":false,"product_type":"c1","uid":1524099,"ip_address":"","ucode":"ADE03757A4AAE2","user_header":"https://static001.geekbang.org/account/avatar/00/17/41/83/a6263932.jpg","comment_is_top":false,"comment_ctime":1563156613,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5858123909","product_id":100026901,"comment_content":"åªæ˜¯åœ¨æ–‡ä»¶æ“ä½œæ—¶ä½¿ç”¨ï¼Œä»Šå¤©ç¬¬ä¸€æ¬¡å­¦ä¹ åˆ°è¿˜èƒ½è¿™ä¹ˆç”¨ã€‚","like_count":1},{"had_liked":false,"id":327125,"user_name":"Fearless.","can_delete":false,"product_type":"c1","uid":2416390,"ip_address":"","ucode":"0870B7BB23E294","user_header":"https://static001.geekbang.org/account/avatar/00/24/df/06/72f90828.jpg","comment_is_top":false,"comment_ctime":1639926942,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1639926942","product_id":100026901,"comment_content":"  yield f  <br>è¿™é‡Œç”¨ç”Ÿæˆå™¨çš„æ„ä¹‰æ˜¯å•¥å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":255415,"user_name":"ç‹ä½åº†","can_delete":false,"product_type":"c1","uid":1180978,"ip_address":"","ucode":"D480AEA92894FE","user_header":"https://static001.geekbang.org/account/avatar/00/12/05/32/7440d47d.jpg","comment_is_top":false,"comment_ctime":1603339242,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603339242","product_id":100026901,"comment_content":"æœ€è¿‘æ­£å¥½çœ‹withè¯­å¥ï¼Œç„¶åçœ‹è¯¾ç¨‹å­¦ä¹ äº†ä¸€ä¸‹ã€‚åŸºæœ¬äº†è§£äº†åŸç†","like_count":0},{"had_liked":false,"id":253859,"user_name":"éƒ­çº¯","can_delete":false,"product_type":"c1","uid":1314521,"ip_address":"","ucode":"2613860B4642C4","user_header":"https://static001.geekbang.org/account/avatar/00/14/0e/d9/e61ce097.jpg","comment_is_top":false,"comment_ctime":1602921182,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602921182","product_id":100026901,"comment_content":"æˆ‘çš„ç†è§£åœ¨ __enter__ å’Œ __exit__ é­”æœ¯æ–¹æ³•å†…å®šä¹‰èµ„æºåˆå§‹åŒ–å’Œèµ„æºé‡Šæ”¾çš„é€»è¾‘.ä¹Ÿå°±æ˜¯ä¸¤ä¸ªå›è°ƒé’©å­. å½“ä½¿ç”¨ with çš„æ—¶å€™ä¼šåœ¨ä»£ç å—å†…åˆ›å»ºä¸Šä¸‹æ–‡.åœ¨ä¸Šä¸‹æ–‡å¼€å§‹çš„æ—¶å€™æ‰§è¡Œ __enter__ é’©å­å‡½æ•°. åœ¨ä¸Šä¸‹æ–‡é”€æ¯ä¹‹å‰æ‰§è¡Œ__exit__ é’©å­å‡½æ•°. æä¾›äº†ç±»ä¼¼ç”Ÿå‘½å‘¨æœŸçš„æœºåˆ¶.","like_count":0},{"had_liked":false,"id":241158,"user_name":"è¿½é£ç­çš„äºº","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1597204571,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597204571","product_id":100026901,"comment_content":"è¿™ä¸€èŠ‚å­¦åˆ°äº†with çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œä¹‹å‰éƒ½æ˜¯f.close(  )  ","like_count":0},{"had_liked":false,"id":161898,"user_name":"é£å«å¶","can_delete":false,"product_type":"c1","uid":1162800,"ip_address":"","ucode":"7AE8D3963343AB","user_header":"https://static001.geekbang.org/account/avatar/00/11/be/30/1154657e.jpg","comment_is_top":false,"comment_ctime":1576395723,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576395723","product_id":100026901,"comment_content":"1. ä¸»è¦æ˜¯ io æ“ä½œï¼ŒåŒ…å« æ–‡ä»¶æ‰“å¼€å…³é—­ã€ç½‘ç»œè¯·æ±‚","like_count":0},{"had_liked":false,"id":154349,"user_name":"Paul Shan","can_delete":false,"product_type":"c1","uid":1593140,"ip_address":"","ucode":"32D99989028284","user_header":"","comment_is_top":false,"comment_ctime":1574412803,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574412803","product_id":100026901,"comment_content":"å†…å­˜ç®¡ç†Pythonå·²ç»å®ç°ï¼Œwithè¯­å¥æ˜¯ç®¡ç†å…¶ä»–ç±»å‹èµ„æºçš„ç®€ä¾¿æ–¹æ³•ã€‚","like_count":0},{"had_liked":false,"id":142896,"user_name":"è‡ªç”±æ°‘","can_delete":false,"product_type":"c1","uid":1346236,"ip_address":"","ucode":"435C67531697F1","user_header":"https://static001.geekbang.org/account/avatar/00/14/8a/bc/cb39ed38.jpg","comment_is_top":false,"comment_ctime":1571577605,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571577605","product_id":100026901,"comment_content":"æ²¡ç”¨è¿‡ï¼Œä»¥å‰åœ¨c&#47;c++é‡Œéƒ½æ˜¯è‡ªå·±é‡Šæ”¾èµ„æºçš„ã€‚æœ€å¤šåœ¨ç±»çš„ææ„å‡½æ•°é‡Œé‡Šæ”¾ï¼Œä½†æ˜¯è¿™æ ·è¿˜æ˜¯æœ‰å¯èƒ½ä¼šèµ„æºæ³„éœ²çš„ã€‚","like_count":0},{"had_liked":false,"id":138814,"user_name":"ä¸ä¸å†é™©è®°","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1570459559,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570459559","product_id":100026901,"comment_content":"è¶…å–œæ¬¢py è¿™æ€»æŠŠå•°å“©å·´å—¦çš„å®ç°ç®€åŒ–çš„å¥—è·¯ã€‚","like_count":0},{"had_liked":false,"id":137762,"user_name":"djfhchdh","can_delete":false,"product_type":"c1","uid":1484184,"ip_address":"","ucode":"E71D75328CE398","user_header":"https://static001.geekbang.org/account/avatar/00/16/a5/98/a65ff31a.jpg","comment_is_top":false,"comment_ctime":1569839000,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1569839000","product_id":100026901,"comment_content":"â€œ__enter__()è¿”å›FileManager å¯¹è±¡èµ‹ç»™å˜é‡fâ€è¿™é‡Œåº”è¯¥å†™é”™äº†ï¼Œåº”è¯¥æ˜¯è¿”å›èµ„æºself.fileç»™å˜é‡f","like_count":0},{"had_liked":false,"id":125502,"user_name":"æ¸©è‹¥","can_delete":false,"product_type":"c1","uid":1633918,"ip_address":"","ucode":"F9DA0C07F11FF3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI9TONIzolbQaRAubeRv37J4zfwRicsOPe8T6LpAgfLxusiaiaibAWmTwNRxb3OeChNbc0kIgtlhoIEWw/132","comment_is_top":false,"comment_ctime":1566195850,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566195850","product_id":100026901,"comment_content":"some_lock = threading.Lock()<br>with somelock:<br>    ...<br><br>è¿™ä¸ªç¬¬äºŒè¡Œæ˜¯ä¸æ˜¯ with some_lock ? ","like_count":0},{"had_liked":false,"id":116510,"user_name":"magician","can_delete":false,"product_type":"c1","uid":1483968,"ip_address":"","ucode":"1BD1125C7C907A","user_header":"https://static001.geekbang.org/account/avatar/00/16/a4/c0/c6880c07.jpg","comment_is_top":false,"comment_ctime":1563860435,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563860435","product_id":100026901,"comment_content":"DBClientç”¨äº†ä»€ä¹ˆpython package?","like_count":0},{"had_liked":false,"id":115625,"user_name":"å°ä¾ é¾™æ—‹é£","can_delete":false,"product_type":"c1","uid":1126441,"ip_address":"","ucode":"073F3924A99835","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/29/d6816ebf.jpg","comment_is_top":false,"comment_ctime":1563677742,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563677742","product_id":100026901,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œthreading.Lock()æ¡ˆä¾‹èƒ½å¦å†™å¾—è¯¦ç»†ä¸€ç‚¹","like_count":0},{"had_liked":false,"id":115207,"user_name":"Geek_077da0","can_delete":false,"product_type":"c1","uid":1479000,"ip_address":"","ucode":"EBA26487CB0482","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIenBesolAerbtjodfkbSsM9VFsHkr6icdZgPqkbQkx1Easl8jqRPWQubEfib3plicD1zXwnTbQ2xU1A/132","comment_is_top":false,"comment_ctime":1563507927,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1563507927","product_id":100026901,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œåœ¨DBConnectionManagerä¸­çš„__enter__æ–¹æ³•è¿”å›çš„æ˜¯selfï¼Œå³å½“å‰å¯¹è±¡ï¼Œä½†æ˜¯åœ¨FileManagerç±»çš„__enter__æ–¹æ³•ä¸­è¿”å›çš„å´æ˜¯self.fileã€‚<br>è¯·é—®ç©¶ç«Ÿæ˜¯åº”è¯¥è¿”å›å¯¹è±¡æœ¬èº«ï¼Œè¿˜æ˜¯åº”è¯¥è¿”å›è¿™ä¸ªå¯¹è±¡å…·ä½“è¦æ“ä½œçš„é‚£ä¸ªèµ„æºå‘¢ï¼Ÿå¸Œæœ›èƒ½å¾—åˆ°æ‚¨çš„è§£ç­”ã€‚","like_count":0,"discussions":[{"author":{"id":1126441,"avatar":"https://static001.geekbang.org/account/avatar/00/11/30/29/d6816ebf.jpg","nickname":"å°ä¾ é¾™æ—‹é£","note":"","ucode":"073F3924A99835","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2466,"discussion_content":"åº”è¯¥å†™æˆself.connectionå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563677638,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114153,"user_name":"å²æœˆå©§å¥½","can_delete":false,"product_type":"c1","uid":1580287,"ip_address":"","ucode":"A75DB677DE61D3","user_header":"https://static001.geekbang.org/account/avatar/00/18/1c/ff/cfc25424.jpg","comment_is_top":false,"comment_ctime":1563243624,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563243624","product_id":100026901,"comment_content":"ä¸»è¦ç”¨äº æ‰“å¼€æ–‡ä»¶ã€è¿æ¥æ•°æ®åº“ç­‰","like_count":0},{"had_liked":false,"id":114074,"user_name":"converseâœª","can_delete":false,"product_type":"c1","uid":1433812,"ip_address":"","ucode":"0CC4C24A6458B6","user_header":"https://static001.geekbang.org/account/avatar/00/15/e0/d4/bdd3ed27.jpg","comment_is_top":false,"comment_ctime":1563236188,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563236188","product_id":100026901,"comment_content":"æ–‡ä»¶æ“ä½œæœ€å¸¸ç”¨","like_count":0},{"had_liked":false,"id":114019,"user_name":"å“é›¨","can_delete":false,"product_type":"c1","uid":1581705,"ip_address":"","ucode":"C5FB3A3BC68F92","user_header":"https://static001.geekbang.org/account/avatar/00/18/22/89/73397ccb.jpg","comment_is_top":false,"comment_ctime":1563205529,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563205529","product_id":100026901,"comment_content":"æ‰“å¼€æ–‡ä»¶çš„æ“ä½œä½¿ç”¨withè¯­å¥ï¼Œè¿™æ ·å°±ä¸ä¼šå¿˜è®°å…³é—­æ–‡ä»¶äº†","like_count":0},{"had_liked":false,"id":113872,"user_name":"KaitoShy","can_delete":false,"product_type":"c1","uid":1038415,"ip_address":"","ucode":"E2E2E9BD3F5048","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d8/4f/65abc6f0.jpg","comment_is_top":false,"comment_ctime":1563176731,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563176731","product_id":100026901,"comment_content":"æ²¡æœ‰åœ¨å¤§å‹é¡¹ç›®ä½¿ç”¨è¿‡ï¼Œç”±äºç›®å‰è¿˜åœ¨å­¦ä¹ é˜¶æ®µï¼Œåªæœ‰åœ¨è‡ªå·±åšæ•°æ®åˆ†æï¼Œæ‰“å¼€è¡¨æ ¼æ–‡ä»¶çš„æ—¶å€™ä½¿ç”¨è¿‡withã€‚è¿˜æœ‰å‘ç°ä¸€ä¸ªæ— ä¼¤å¤§é›…çš„ç¬”è¯¯ï¼š&quot;exception_typeã€exception_valueå’Œtracebook&quot;, æœ€åä¸€ä¸ªtracebookåº”è¯¥æ˜¯tracebackå§ï¼Ÿè°ƒç”¨æ ˆï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":113813,"user_name":"Geek_d848f7","can_delete":false,"product_type":"c1","uid":1524021,"ip_address":"","ucode":"F24BC59B6E9E6B","user_header":"","comment_is_top":false,"comment_ctime":1563160367,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563160367","product_id":100026901,"comment_content":"åˆ©ç”¨é‚®ç®±å‘é‚®ä»¶ä¸­ä½¿ç”¨åˆ°äº†ï¼Œä½†æ–‡ä¸­æåˆ°çš„åŸºäºç”Ÿæˆå™¨çš„ä¸Šä¸‹æ–‡ç®¡ç†ç¬¬ä¸€æ¬¡å¬è¿‡ï¼Œè¿™ä¸ªçš„ä½¿ç”¨æ˜¯ä¸æ˜¯ä¸»è¦åœ¨äºéœ€è¦å…³æ³¨èµ„æºæ˜¯å¦è¢«é‡Šæ”¾çš„ç”Ÿæˆå™¨ä¸­å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":113789,"user_name":"ç¨‹åºå‘˜äººç”Ÿ","can_delete":false,"product_type":"c1","uid":1113668,"ip_address":"","ucode":"C5C5073D89AAA2","user_header":"https://static001.geekbang.org/account/avatar/00/10/fe/44/3e3040ac.jpg","comment_is_top":false,"comment_ctime":1563157171,"is_pvip":false,"replies":[{"id":"41479","content":"è°¢è°¢æŒ‡æ­£ï¼Œå·²æ›´æ–°","user_name":"ä½œè€…å›å¤","user_name_real":"Jingxiao","uid":"1259521","ctime":1563168986,"ip_address":"","comment_id":113789,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563157171","product_id":100026901,"comment_content":"è€å¸ˆï¼Œæœ€åä¸€æ®µä»£ç æ‰§è¡ŒåæŠ¥è¿™ä¸ªé”™ï¼š<br>TypeError: file_manager() missing 1 required positional argument: &#39;mode&#39;<br><br>åº”è¯¥å†™æˆè¿™æ ·æŠŠï¼Œ<br>with file_manager(&#39;test.txt&#39;,&#39;w&#39;) as f:<br>    f.write(&#39;hello world2&#39;)","like_count":0,"discussions":[{"author":{"id":1259521,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJOlibibPFEWOib8ib7RtfAtxND5FUqCxxoeTuLAbBI9ic23xuwdXT4IyiaWq3Fic9RgEAYI0lBTbEp2rcg/132","nickname":"Jingxiao","note":"","ucode":"EB966BB87132F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458388,"discussion_content":"è°¢è°¢æŒ‡æ­£ï¼Œå·²æ›´æ–°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563168986,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113763,"user_name":"ZJYğŸ˜‡","can_delete":false,"product_type":"c1","uid":1524683,"ip_address":"","ucode":"766DB464A0403C","user_header":"https://static001.geekbang.org/account/avatar/00/17/43/cb/665048ce.jpg","comment_is_top":false,"comment_ctime":1563152965,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563152965","product_id":100026901,"comment_content":"httpçš„sessionæ˜¯ä¸Šä¸‹æ–‡ç®¡ç†å™¨å—ï¼Ÿ","like_count":0}]}