{"id":349725,"title":"01 | 存储：一个完整的数据存储过程是怎样的？","content":"<p>你好，我是朱晓峰。今天，我想跟你聊一聊MySQL是怎么存储数据的。</p><p>存储数据是处理数据的第一步。在咱们的超市项目中，每天都要处理大量的商品，比如说进货、卖货、盘点库存，商品的种类很多，而且数量也比较大。只有正确地把数据存储起来，我们才能进行有效的处理和分析，进而对经营情况进行科学的评估，超市负责人在做决策时，就能够拿到数据支持。否则，只能是一团乱麻，没有头绪，也无从着手。</p><p>那么，怎样才能把用户各种经营相关的、纷繁复杂的数据，有序和高效地存储起来呢？</p><p>在MySQL中，一个完整的<strong>数据存储过程总共有4步，分别是创建数据库、确认字段、创建数据表、插入数据。</strong></p><p><img src=\"https://static001.geekbang.org/resource/image/8b/b1/8b8b594631a175e3016686da88d569b1.jpg?wh=1803*363\" alt=\"\"></p><p>接下来，我就给你详细讲解一下这个过程的每一步，帮你掌握MySQL的数据存储机制。</p><p>先提醒你一句，这节课最后有一个视频，我在视频里演示了今天讲到的所有操作。我建议你学完文字以后，跟着视频实操一下。</p><p>好了，话不多说，我们现在开始。</p><h2>创建MySQL数据库</h2><p><strong>数据存储的第一步，就是创建数据库</strong>。</p><p>你可能会问，为啥我们要先创建一个数据库，而不是直接创建数据表呢？</p><p>这是个很好的问题。其实啊，这是因为，从系统架构的层次上看，MySQL数据库系统从大到小依次是数据库服务器、数据库、数据表、数据表的行与列。</p><!-- [[[read_end]]] --><p>安装程序已经帮我们安装了MySQL数据库服务器，所以，我们必须从创建数据库开始。</p><p><strong>数据库是MySQL里面最大的存储单元</strong>。数据表、数据表里的数据，以及我们以后会学到的表与表之间的关系，还有在它们的基础上衍生出来的各种工具，都存储在数据库里面。<strong>没有数据库，数据表就没有载体，也就无法存储数据。</strong></p><p>下面我就来给你具体介绍下，怎么在我们安装的MySQL服务器里面创建、删除和查看数据库。</p><h3>1.如何创建数据库？</h3><p>创建数据库，我们已经在上节课介绍过了，你可以在Workbench的工作区，通过下面的SQL语句创建数据库“demo”：</p><pre><code>CREATE DATABASE demo；\n</code></pre><h3>2.如何查看数据库？</h3><p>下面我们来看一下，如何查看数据库。</p><p>在Workbench的导航栏，我们可以看到数据库服务器里的所有数据库，如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/da/9e/da02212629a3084da3ee3d67d982fa9e.png?wh=1005*555\" alt=\"\"></p><p>你也可以在Workbench右边的工作区，通过查询语句，查看所有的数据库：</p><pre><code>mysql&gt; SHOW DATABASES;\n+--------------------+\n| Database           |\n+--------------------+\n| demo               |\n| information_schema |\n| mysql              |\n| performance_schema |\n| sys                |\n+--------------------+\n5 rows in set (0.00 sec)\n</code></pre><p>看到这儿，你是不是觉得很奇怪，为什么Workbench导航栏里面的数据库只有两个（我们创建的数据库“demo”和安装完MySQL就有的数据库“sys”）呢？</p><p>换句话说，为什么有的数据库我们可以在Workbench里面看到，有的数据库却必须通过查询语句才可以看到呢？要弄明白这个问题，你必须要知道这些数据库都是干什么的。</p><ul>\n<li>“demo”是我们通过SQL语句创建的数据库，是我们用来存储用户数据的，也是我们使用的主要数据库。</li>\n<li>“information_schema”是MySQL系统自带的数据库，主要保存MySQL数据库服务器的系统信息，比如数据库的名称、数据表的名称、字段名称、存取权限、数据文件所在的文件夹和系统使用的文件夹，等等。</li>\n<li>“performance_schema”是MySQL系统自带的数据库，可以用来监控MySQL的各类性能指标。</li>\n<li>“sys”数据库是MySQL系统自带的数据库，主要作用是，以一种更容易被理解的方式展示MySQL数据库服务器的各类性能指标，帮助系统管理员和开发人员监控MySQL的技术性能。</li>\n<li>“mysql”数据库保存了MySQL数据库服务器运行时需要的系统信息，比如数据文件夹、当前使用的字符集、约束检查信息，等等。</li>\n</ul><p>如果你是DBA，或者是MySQL数据库程序员，想深入了解MySQL数据库系统的相关信息，可以看下<a href=\"https://dev.mysql.com/doc/refman/8.0/en/system-schema.html\">官方文档</a>。</p><p>话说回来，为什么Workbench里面我们只能看到“demo”和“sys”这2个数据库呢？其实啊，这是因为，Workbench是图形化的管理工具，主要面向开发人员，“demo”和“sys”这2个数据库已经够用了。如果有特殊需求，比如，需要监控MySQL数据库各项性能指标、直接操作MySQL数据库系统文件等，可以由DBA通过SQL语句，查看其它的系统数据库。</p><h2>确认字段</h2><p><strong>数据存储流程的第二步是确认表的字段</strong>。</p><p>创建好数据库之后，我们选择要导入的Excel数据文件，MySQL会让我们确认新表中有哪些列，以及它们的数据类型。这些列就是MySQL数据表的字段。</p><p>MySQL数据表由行与列组成，一行就是一条数据记录，每一条数据记录都被分成许多列，一列就叫一个字段。每个字段都需要定义数据类型，这个数据类型叫做字段类型。</p><p><img src=\"https://static001.geekbang.org/resource/image/d1/b0/d17b6e27ce7e64a7c9e7c9c6938c50b0.png?wh=584*262\" alt=\"\"></p><p>这样一来，每一条数据记录的每一个片段，就按照字段的定义被严格地管理起来了，从而使数据有序而且可靠。MySQL支持多种字段类型，字段的定义会影响数据的取值范围、精度，以及系统的可靠性，下节课我会重点给你讲一讲字段的定义。这里你只要选择系统默认的字段类型，就可以了。</p><h2>创建数据表</h2><p><strong>数据存储流程的第三步，是创建数据表。</strong></p><p>当我们确认好了表的字段，点击下一步，Workbench就帮助我们创建了一张表。</p><p>MySQL中的数据表是什么呢？<strong>你可以把它看成用来存储数据的最主要工具</strong>。数据表对存储在里面的数据进行组织和管理，使数据变得有序，并且能够实现高效查询和处理。</p><p>虽然Workbench帮助我们创建了一个表，但大多数情况下，我们是不会先准备一个Excel文件，再通过Workbench的数据导入来创建表的，这样太麻烦了。<strong>我们可以通过SQL语句，自己来创建表。</strong></p><p>具体咋做呢？我来介绍一下。</p><p>首先，在Workbench的工作区，输入以下SQL语句：</p><pre><code>CREATE TABLE demo.test\n( \n  barcode text,\n  goodsname text,\n  price int\n); \n</code></pre><p>执行这个SQL语句之后，就能创建出一个与导入的Excel表一样的MySQL数据表了。</p><p>这里有2点需要你格外注意一下。</p><ul>\n<li><strong>创建表的时候，最好指明数据库</strong>。否则，如果你没有选中数据库，Workbench会提示错误；要是你当前选中的数据库不对，还可能把表创建到错误的数据库中。</li>\n<li><strong>不要在最后一个字段的后面加逗号“,”，这也是初学者容易犯的错误</strong>。</li>\n</ul><p>下面我们就来聊一聊，查看数据表的结构、查看数据库中的表的方法。</p><h3>1.如何查看表的结构？</h3><p>创建好了表，再来看看如何查看表的结构。</p><p>我们运行下面的SQL语句：</p><pre><code>DESCRIBE demo.test;\n</code></pre><p>运行结果如下：</p><pre><code>mysql&gt; DESCRIBE demo.test;\n+-----------+------+------+-----+---------+-------+\n| Field     | Type | Null | Key | Default | Extra |\n+-----------+------+------+-----+---------+-------+\n| barcode   | text | YES  |     | NULL    |       |\n| goodsname | text | YES  |     | NULL    |       |\n| price     | int  | YES  |     | NULL    |       |\n+-----------+------+------+-----+---------+-------+\n3 rows in set (0.00 sec)\n</code></pre><p>我来解释下这些信息都代表什么意思。</p><ul>\n<li>Field：表示字段名称。</li>\n<li>Type：表示字段类型，这里barcode、goodsname是文本型的，price是整数类型的。</li>\n<li>Null：表示这个字段是否允许是空值（NULL）。这里你一定要注意，在MySQL里面，空值不等于空字符串。一个空字符串的长度是0，而一个空值的长度是空。而且，在MySQL里面，空值是占用空间的。</li>\n<li>Key：我们暂时把它叫做键。</li>\n<li>Default：表示默认值。我们导入的表的所有的字段都允许是空，默认值都是NULL。</li>\n<li>Extra：表示附加信息。</li>\n</ul><p>关于字段类型和Key，后面我会具体讲解，这里你只需要知道它们的含义就可以了。</p><h3>2.如何查看数据库中的表？</h3><p>创建完成后，怎么查看表有没有真的被创建出来呢？</p><p>我们可以通过Workbench的导航栏，点击数据库下面的“Tables”，找到这个数据库中的所有数据表。另外，我们也可以在工作区，通过SQL语句查询某个数据库中的数据表。</p><p>先用USE语句选择数据库：</p><pre><code>USE demo;\n</code></pre><p>运行后，进入demo数据库，然后用SHOW语句查询这个数据库中所有的表：</p><pre><code>SHOW TABLES;\n</code></pre><p>运行后结果如下：</p><pre><code>mysql&gt; SHOW TABLES;\n+----------------+\n| Tables_in_demo |\n+----------------+\n| test           |\n+----------------+\n1 row in set (0.00 sec)\n</code></pre><p>这样我们就可以看到数据库“demo”里面，只有一个数据表“test”。</p><h3>3.如何设置主键？</h3><p>讲到了数据表，我就一定要给你讲一讲主键。<strong>因为主键可以确保数据的唯一性，而且能够减少数据错误</strong>。</p><p>举个简单的小例子。主键就像是咱们的身份证号码，它是唯一的。每个身份证号码只对应唯一的一个人。同样，每一个人只有唯一的身份证号码。</p><p>MySQL中数据表的主键，是表中的一个字段或者几个字段的组合。它主要有3个特征：</p><ul>\n<li>必须唯一，不能重复；</li>\n<li>不能是空；</li>\n<li>必须可以唯一标识数据表中的记录。</li>\n</ul><p>一个MySQL数据表中只能有一个主键。虽然MySQL也允许创建没有主键的表，但是，<strong>我建议你一定要给表定义主键，并且养成习惯。因为主键可以帮助你减少错误数据，并且提高查询的速度</strong>（后面我会专门用一节课的时间介绍“怎么用好主键”）。</p><p>我来举个例子，假设我们有这样一张表：</p><p><img src=\"https://static001.geekbang.org/resource/image/ca/0e/ca3b0c3f2e7b1de8065a5efb427bc70e.jpg?wh=2800*674\" alt=\"\"></p><p>我们给它起个名字，叫“goodsmaster”，意思是商品表。说到这儿，你可能注意到了，我的表名、字段名都用的是英文。其实，MySQL也允许数据表名称、字段名称用中文，但我还是<strong>建议你用英文，原因有2个：一是书写方便；二是不容易出错</strong>。如果用汉字，涉及到编码问题，就会容易出现错误。</p><p>那么，在这个表里，哪个字段是主键呢？</p><p>商品名称“goodsname”行不行呢？不行，原因是重名的商品太多了，比如“笔”，大家都可以生产一种叫“笔”的商品，各种各样的笔，不同规格的，比如长的、短的；不同材料的，比如墨水的、铅芯的……由于可能重复，商品名称和数据记录之间不能形成一一对应的关系，所以“goodsname”不能作为主键。同样，价格“price”重复的可能性很大，也不能做主键。</p><p>商品条码“barcode”能不能成为这个数据表的主键呢？</p><p>好像可以。商品的条码都是由中国物品编码中心统一编制的，一种商品对应一个条码，一个条码对应一种商品。这不就是一一对应的关系吗？</p><p>在实际操作中，有例外的情况。比较典型的就是用户的门店里面有很多自己生产或者加工的商品。比如，馒头、面条等自产食品，散装的糕点、糖果等称重商品，等等。为了管理方便，门店往往会自己给它们设置条码。这样，很容易产生重复、重用的现象。</p><p><img src=\"https://static001.geekbang.org/resource/image/06/38/061b762a72bb2999ac3ae3da54e54638.jpg?wh=2789*1113\" alt=\"\"></p><p>这么说，商品条码“barcode”也有重复的可能，也不能用做主键。</p><p>那么，如果数据表中所有的字段都有重复的可能，我们怎么设置主键呢？答案是<strong>我们可以自己添加一个不会重复的字段来做主键</strong>。</p><p>比如在上面的例子中，我们就可以添加一个字段，字段类型是整数，我们给它取个名字叫商品编号“itemnumber”。而且，我们可以每次增加一条新数据的时候，让这个字段的值自动加1，这样就永远不会重复了，如下表所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/84/4c/849157b071fcc6d8c7d28c9a1aaf1b4c.jpg?wh=2832*1146\" alt=\"\"></p><p>我们添加字段商品编号“itemnumber”为主键，这样，我们的商品表“goodsmaster”就有了主键。</p><p>在Workbench中，我们可以通过修改表结构，来增加一个主键字段：</p><p><img src=\"https://static001.geekbang.org/resource/image/fe/a7/febd6a85383f2b7de02b59eb4fe3f6a7.png?wh=1051*411\" alt=\"\"></p><p>你也可以通过一条SQL语句，修改表的结构，来增加一个主键字段：</p><pre><code>ALTER TABLE demo.test\nADD COLUMN itemnumber int PRIMARY KEY AUTO_INCREMENT;\n</code></pre><p>我简单解释下这些关键字的含义。</p><ul>\n<li>ALTER TABLE，表示修改表；</li>\n<li>ADD COLUMN，表示增加一列；</li>\n<li>PRIMARY KEY，表示这一列是主键；</li>\n<li>AUTO_INCREMENT，表示每增加一条记录，这个值自动增加。一会儿讲到添加数据的时候，我还会详细介绍一下它。</li>\n</ul><h2>插入数据</h2><p><strong>数据存储流程的第四步，也是最后一步，是把数据插入到表当中去。</strong></p><p>Workbench的数据导入功能，可以帮助我们把Excel的数据导入到表里面，那么，我们自己怎么向数据表中插入一条数据呢？我们可以借助SQL语句。</p><pre><code>INSERT INTO demo.test\n(barcode,goodsname,price)\nVALUES ('0001','本',3);\n</code></pre><p>这里的INSERT INTO表示向demo.test中插入数据，后面是要插入数据的字段名，VALUES表示对应的值。</p><p>在添加数据的时候，有2点需要你格外注意一下。</p><ol>\n<li>要插入数据的字段名也可以不写，但是我建议你不要怕麻烦，<strong>一定要每次都写</strong>。这样做的好处是可读性好，不易出错，而且容易修改。否则，如果你记不住表的字段，就只能去查表的结构，才能知道值所对应的字段了。</li>\n<li>由于字段itemnumber定义了AUTO_INCREMENT，所以我们插入一条记录的时候，不给它赋值，系统也会自动给它赋值。而且，每次赋值，都会在上次的赋值基础上，自动增加1。你也可以在插入一条记录的时候给itemnumber 赋值，由于它是主键，新的值必须与已有记录的itemnumber值不同，否则系统会提示错误。</li>\n</ol><p>最后，我还专门录制了一段视频，把今天讲到的实际操作演示了一遍，你可以跟着视频再演练下。</p><p><video poster=\"https://media001.geekbang.org/4b8954c165a84537b7cdbd5f54d23755/snapshots/322a5fe009b34275989e4f0682bebd58-00005.jpg\" preload=\"none\" controls=\"\"><source src=\"https://media001.geekbang.org/customerTrans/7e27d07d27d407ebcc195a0e78395f55/4d6e2c6f-17810d406a4-0000-0000-01d-dbacd.mp4\" type=\"video/mp4\"><source src=\" https://media001.geekbang.org/f3b7a5474307482d8387645e348dccf9/4342ca9da931447eae4723d1901e9913-d1b210472a78fe4f269073cc7af8891a-sd.m3u8\" type=\"application/x-mpegURL\"></video></p><h2>总结</h2><p>今天，我们学习了数据存储的完整过程，包括创建数据库、创建数据表、确认字段和插入数据。建议你跟着文字和视频实际操作一下，熟练掌握存储数据的方法。</p><p>在进行具体操作的时候，我们会用到8种SQL语句，我再给你汇总下。</p><pre><code>-- 创建数据库\nCREATE DATABASE demo；\n-- 删除数据库\nDROP DATABASE demo；\n-- 查看数据库\nSHOW DATABASES;\n-- 创建数据表：\nCREATE TABLE demo.test\n(  \n  barcode text,\n  goodsname text,\n  price int\n); \n-- 查看表结构\nDESCRIBE demo.test;\n-- 查看所有表\nSHOW TABLES;\n-- 添加主键\nALTER TABLE demo.test\nADD COLUMN itemnumber int PRIMARY KEY AUTO_INCREMENT;\n-- 向表中添加数据\nINSERT INTO demo.test\n(barcode,goodsname,price)\nVALUES ('0001','本',3);\n</code></pre><p>最后，我还想再给你讲一讲MySQL中SQL语句的书写规范。</p><p>MySQL以分号来识别一条SQL语句结束，所以，<strong>你写的每一条SQL语句的最后，都必须有一个分号，否则，MySQL会认为这条语句没有完成，提示语法错误</strong>。</p><p>所以，我建议你写在SQL语句时遵循统一的样式，以增加可读性，减少错误。如果你不是很清楚具体的规范，可以点击这个<a href=\"https://www.sqlstyle.guide/zh/\">链接</a>学习下。</p><h2>思考题</h2><p>我想请你思考一下，假设用户现在要销售商品，你能不能帮它设计一个销售表，把销售信息（商品名称、价格、数量、金额等）都保存起来？</p><p>欢迎在留言区写下你的思考和答案，我们一起交流讨论。如果你觉得今天的内容对你有所帮助，也欢迎你分享你的朋友或同事，我们下节课见。</p>","comments":[{"had_liked":false,"id":282566,"user_name":"星空下","can_delete":false,"product_type":"c1","uid":1183639,"ip_address":"","ucode":"473643B567674A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0f/97/372d8628.jpg","comment_is_top":false,"comment_ctime":1615302695,"is_pvip":false,"replies":[{"id":"102694","content":"问题很好，下面是我的理解，供你参考：<br>1. MySQL Innodb的主键索引是一个B+树，数据存储在叶子节点上，10条数据，就有10个叶子节点。<br>2. sex索引是辅助索引，也是一个B+树，不同之处在于，叶子节点存储的是主键值，由于sex只有2个可能的值：男和女，因此，这个B+树只有2个叶子节点，比主键索引的B+树小的多<br>3. 这个表有主键，因此不存在所有字段都为空的记录，所以COUNT(*)只要统计所有主键的值就可以了，不需要回表读取数据<br>4. SELECT COUNT(*) FROM t，使用sex索引，只需要访问辅助索引的小B+树，而使用主键索引，要访问主键索引的那个大B+树，明细工作量大，这就是为什么，优化器使用辅助索引的原因","user_name":"作者回复","comment_id":282566,"uid":"2356905","ip_address":"","utype":1,"ctime":1615514623,"user_name_real":"朱晓峰"}],"discussion_count":8,"race_medal":0,"score":"203478765607","product_id":100073201,"comment_content":"老师，面试遇到的一个问题，select  count(*) from t;<br>t中有id(主键)，name，age,sex4个字段。假设数据10条，对sex添加索引。用explain 查看执行计划发现用了sex索引，为什么不是主键索引呢?主键索引应该更快的","like_count":47,"discussions":[{"author":{"id":1622109,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erPMtAfnQdpx1yOZQ2ic7icqUs3tvibEjUXQMUXKiaakyuIho6k6vmdl46nrdWjXIjPIRg9Pmco00tR5w/132","nickname":"小氘","note":"","ucode":"DA55B9A02D9EE0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":355061,"discussion_content":"你的语句是查询表t的行数，无论走哪个索引行数都是一样的，所以优化器会选择小的b+树，sex这棵树小。","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1615379904,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1183639,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0f/97/372d8628.jpg","nickname":"星空下","note":"","ucode":"473643B567674A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1622109,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erPMtAfnQdpx1yOZQ2ic7icqUs3tvibEjUXQMUXKiaakyuIho6k6vmdl46nrdWjXIjPIRg9Pmco00tR5w/132","nickname":"小氘","note":"","ucode":"DA55B9A02D9EE0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":355138,"discussion_content":"谢谢解答，可以说下sex索引的树小吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615385609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":355061,"ip_address":""},"score":355138,"extra":""},{"author":{"id":1622109,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erPMtAfnQdpx1yOZQ2ic7icqUs3tvibEjUXQMUXKiaakyuIho6k6vmdl46nrdWjXIjPIRg9Pmco00tR5w/132","nickname":"小氘","note":"","ucode":"DA55B9A02D9EE0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1183639,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0f/97/372d8628.jpg","nickname":"星空下","note":"","ucode":"473643B567674A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":355186,"discussion_content":"主键索引这棵树上有全表数据，非主键索引树上只有自己的值和主键值，性别索引这棵树只有性别和主键id两个字段的值。","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1615387749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":355138,"ip_address":""},"score":355186,"extra":""},{"author":{"id":1183639,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0f/97/372d8628.jpg","nickname":"星空下","note":"","ucode":"473643B567674A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1622109,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erPMtAfnQdpx1yOZQ2ic7icqUs3tvibEjUXQMUXKiaakyuIho6k6vmdl46nrdWjXIjPIRg9Pmco00tR5w/132","nickname":"小氘","note":"","ucode":"DA55B9A02D9EE0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":355759,"discussion_content":"好像明白了，谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615473572,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":355186,"ip_address":""},"score":355759,"extra":""}]},{"author":{"id":1105427,"avatar":"https://static001.geekbang.org/account/avatar/00/10/de/13/8c177be0.jpg","nickname":"轻舞飞扬","note":"","ucode":"4CA4EE4104F90F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381534,"discussion_content":"这个B+树只有2个叶子节点==>应该是：这个B+树只有2个非叶子节点吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625117414,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005290,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/56/ea/32608c44.jpg","nickname":"giteebravo","note":"","ucode":"C087E8D6B5A98B","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":357206,"discussion_content":"\n怎么理解 回表读取数据 呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615766862,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2557346,"avatar":"https://static001.geekbang.org/account/avatar/00/27/05/a2/24d5e88e.jpg","nickname":"king🐳","note":"","ucode":"88DA7981062AB5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1005290,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/56/ea/32608c44.jpg","nickname":"giteebravo","note":"","ucode":"C087E8D6B5A98B","race_medal":1,"user_type":1,"is_pvip":false},"discussion":{"id":378953,"discussion_content":"辅助索引子节点上面存储的是I’d。要回主键索引里面去查找对应的数据","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623560098,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":357206,"ip_address":""},"score":378953,"extra":""}]},{"author":{"id":1005290,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/56/ea/32608c44.jpg","nickname":"giteebravo","note":"","ucode":"C087E8D6B5A98B","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":357114,"discussion_content":"\n好问题，好回复","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615733922,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282417,"user_name":"Gavin","can_delete":false,"product_type":"c1","uid":1106680,"ip_address":"","ucode":"7004C06B3E6A17","user_header":"https://static001.geekbang.org/account/avatar/00/10/e2/f8/6e5da436.jpg","comment_is_top":false,"comment_ctime":1615230548,"is_pvip":false,"replies":[{"id":"102550","content":"我以为，程序员的第一性原理应该是实际业务需求，技术服务于业务，一切从实际需求出发。","user_name":"作者回复","comment_id":282417,"uid":"2356905","ip_address":"","utype":1,"ctime":1615258233,"user_name_real":"Geek_2c4b28"}],"discussion_count":1,"race_medal":0,"score":"108989412948","product_id":100073201,"comment_content":"老师，程序员的第一性原理是什么?","like_count":25,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516737,"discussion_content":"我以为，程序员的第一性原理应该是实际业务需求，技术服务于业务，一切从实际需求出发。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615258233,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282316,"user_name":"出卖灵魂的教练Kerry","can_delete":false,"product_type":"c1","uid":1807943,"ip_address":"","ucode":"8C64517DA556FE","user_header":"https://static001.geekbang.org/account/avatar/00/1b/96/47/93838ff7.jpg","comment_is_top":false,"comment_ctime":1615195498,"is_pvip":true,"replies":[{"id":"102555","content":"感谢鼓励","user_name":"作者回复","comment_id":282316,"uid":"2356905","ip_address":"","utype":1,"ctime":1615261455,"user_name_real":"Geek_2c4b28"}],"discussion_count":1,"race_medal":0,"score":"57449770346","product_id":100073201,"comment_content":"老师，不要太优秀啊，很接地气的专栏。","like_count":13,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516699,"discussion_content":"感谢鼓励","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615261455,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282593,"user_name":"石头","can_delete":false,"product_type":"c1","uid":1131574,"ip_address":"","ucode":"8908B1989A3C4A","user_header":"https://static001.geekbang.org/account/avatar/00/11/44/36/c5dc914f.jpg","comment_is_top":false,"comment_ctime":1615332626,"is_pvip":false,"replies":[{"id":"102647","content":"是从零开始的入门课，随着课程的展开，我会遵循由浅入深，循序渐进的原则进行讲解。后面肯定会不断深入。","user_name":"作者回复","comment_id":282593,"uid":"2356905","ip_address":"","utype":1,"ctime":1615434955,"user_name_real":"朱晓峰"}],"discussion_count":1,"race_medal":0,"score":"44565005586","product_id":100073201,"comment_content":"这是入门课吗，后面会讲得深入一些吗","like_count":10,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516785,"discussion_content":"是从零开始的入门课，随着课程的展开，我会遵循由浅入深，循序渐进的原则进行讲解。后面肯定会不断深入。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615434955,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282393,"user_name":"封志强","can_delete":false,"product_type":"c1","uid":1227989,"ip_address":"","ucode":"ADE15283C10CAE","user_header":"https://static001.geekbang.org/account/avatar/00/12/bc/d5/036bc464.jpg","comment_is_top":false,"comment_ctime":1615212617,"is_pvip":false,"replies":[{"id":"102552","content":"谢谢鼓励","user_name":"作者回复","comment_id":282393,"uid":"2356905","ip_address":"","utype":1,"ctime":1615260970,"user_name_real":"Geek_2c4b28"}],"discussion_count":1,"race_medal":0,"score":"35974950985","product_id":100073201,"comment_content":"老师说的很细，👏👏👏","like_count":8,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516732,"discussion_content":"谢谢鼓励","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615260970,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282390,"user_name":"蓝色梦幻","can_delete":false,"product_type":"c1","uid":1903003,"ip_address":"","ucode":"D18804255E8949","user_header":"https://static001.geekbang.org/account/avatar/00/1d/09/9b/5ab8b792.jpg","comment_is_top":false,"comment_ctime":1615211979,"is_pvip":false,"replies":[{"id":"102553","content":"这个要看是什么场景，比如，web端的应用，我一般是用Java来处理与MySQL的数据交互。主要是Java功能比较强大，我也比较熟。如果是PC端的应用，我比较喜欢用VC++。","user_name":"作者回复","comment_id":282390,"uid":"2356905","ip_address":"","utype":1,"ctime":1615261348,"user_name_real":"Geek_2c4b28"}],"discussion_count":1,"race_medal":0,"score":"27385015755","product_id":100073201,"comment_content":"后面做项目的时候，老师选择哪个语言？","like_count":6,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516730,"discussion_content":"这个要看是什么场景，比如，web端的应用，我一般是用Java来处理与MySQL的数据交互。主要是Java功能比较强大，我也比较熟。如果是PC端的应用，我比较喜欢用VC++。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615261348,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":283512,"user_name":"Initiative Thinker","can_delete":false,"product_type":"c1","uid":1736297,"ip_address":"","ucode":"A884396A1581EF","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI9zRdkKuXMKh30ibeludlAsztmR4rD9iaiclPicOfIhbC4fWxGPz7iceb3o4hKx7qgX2dKwogYvT6VQ0g/132","comment_is_top":false,"comment_ctime":1615801763,"is_pvip":true,"replies":[{"id":"103663","content":"应该是你没有指定varchar类型的最大长度。MySQL要求指定varchar类型的时候，必须要指定最大长度。否则没法分配存储空间","user_name":"作者回复","comment_id":283512,"uid":"2356905","ip_address":"","utype":1,"ctime":1616981344,"user_name_real":"朱晓峰"}],"discussion_count":1,"race_medal":0,"score":"23090638243","product_id":100073201,"comment_content":"为什么设置goodsname字段的数据类型为varchar会出错呢？","like_count":5,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517060,"discussion_content":"应该是你没有指定varchar类型的最大长度。MySQL要求指定varchar类型的时候，必须要指定最大长度。否则没法分配存储空间","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616981344,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":294356,"user_name":"时光过客","can_delete":false,"product_type":"c1","uid":2481050,"ip_address":"","ucode":"B4EBA23017D65B","user_header":"https://static001.geekbang.org/account/avatar/00/25/db/9a/1c827ac9.jpg","comment_is_top":false,"comment_ctime":1621912420,"is_pvip":false,"replies":[{"id":"107769","content":"hana采用了一些优化策略，比如把数据存储在内存中，这样数据库的性能有很大提升，不过都支持标准的SQL语句，这方面与MySQL差别不大。建议通过产品对应的官方网站查询相关的信息","user_name":"作者回复","comment_id":294356,"uid":"2356905","ip_address":"","utype":1,"ctime":1623119387,"user_name_real":"朱晓峰"}],"discussion_count":2,"race_medal":0,"score":"18801781604","product_id":100073201,"comment_content":"老师，问一下其他问题，如果使用其他数据库（如hana），这个数据库与mysql差异性有多大，在哪里可以获取到这方面的信息。<br>或者说，在mysql这里学习的内容，去其他数据库中操作时，差异性大吗？","like_count":4,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520619,"discussion_content":"hana采用了一些优化策略，比如把数据存储在内存中，这样数据库的性能有很大提升，不过都支持标准的SQL语句，这方面与MySQL差别不大。建议通过产品对应的官方网站查询相关的信息","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1623119387,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2481050,"avatar":"https://static001.geekbang.org/account/avatar/00/25/db/9a/1c827ac9.jpg","nickname":"时光过客","note":"","ucode":"B4EBA23017D65B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378226,"discussion_content":"收到，十分感谢。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623119788,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284167,"user_name":"Paul _Chan","can_delete":false,"product_type":"c1","uid":1634711,"ip_address":"","ucode":"81790E14061ABB","user_header":"https://static001.geekbang.org/account/avatar/00/18/f1/97/d98667cd.jpg","comment_is_top":false,"comment_ctime":1616109212,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18795978396","product_id":100073201,"comment_content":"太详细了<br>","like_count":4},{"had_liked":false,"id":282832,"user_name":"行与修","can_delete":false,"product_type":"c1","uid":1241842,"ip_address":"","ucode":"11F21B663EF6D3","user_header":"https://static001.geekbang.org/account/avatar/00/12/f2/f2/2a9a6e9a.jpg","comment_is_top":false,"comment_ctime":1615432177,"is_pvip":false,"replies":[{"id":"102700","content":"如果不需要合并数据，可以用自增字段做主键。加上商品名称，我是赞成的，这样的冗余有好处","user_name":"作者回复","comment_id":282832,"uid":"2356905","ip_address":"","utype":1,"ctime":1615515652,"user_name_real":"朱晓峰"}],"discussion_count":2,"race_medal":0,"score":"18795301361","product_id":100073201,"comment_content":"<br>CREATE TABLE demo.goodSales<br>( <br>id int PRIMARY KEY AUTO_INCREMENT,<br>goodId int, <br>goodsname text, <br>price int,<br>quantity int,<br>cost int);<br><br>销售表有自己的主键，也可以是类guid的唯一标识；<br>商品表的主键id作为销售表的外键；<br>此处的商品名称也可以不加，冗余只为前端显示时不用再关联查询。","like_count":4,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516851,"discussion_content":"如果不需要合并数据，可以用自增字段做主键。加上商品名称，我是赞成的，这样的冗余有好处","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615515652,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005290,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/56/ea/32608c44.jpg","nickname":"giteebravo","note":"","ucode":"C087E8D6B5A98B","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":357112,"discussion_content":"\n什么情况下需要合并数据呢？\n商品名称这个冗余很有必要。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615733773,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282446,"user_name":"zhongsun","can_delete":false,"product_type":"c1","uid":2485474,"ip_address":"","ucode":"8484012BB6F73B","user_header":"https://static001.geekbang.org/account/avatar/00/25/ec/e2/fb95b5c7.jpg","comment_is_top":false,"comment_ctime":1615254447,"is_pvip":false,"replies":[{"id":"102548","content":"navicat也可以连接MySQL。新建连接-&gt;选择MySQL-&gt;编辑连接参数，端口3306，本机localhost，密码是你自己安装MySQL时候设置的root的密码。参数填写完成，就可以连接了","user_name":"作者回复","comment_id":282446,"uid":"2356905","ip_address":"","utype":1,"ctime":1615256614,"user_name_real":"Geek_2c4b28"}],"discussion_count":1,"race_medal":0,"score":"18795123631","product_id":100073201,"comment_content":"navicat可以吗？","like_count":4,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516745,"discussion_content":"navicat也可以连接MySQL。新建连接-&amp;gt;选择MySQL-&amp;gt;编辑连接参数，端口3306，本机localhost，密码是你自己安装MySQL时候设置的root的密码。参数填写完成，就可以连接了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615256614,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286854,"user_name":"cheriston","can_delete":false,"product_type":"c1","uid":1309984,"ip_address":"","ucode":"617CBFCE0925C4","user_header":"https://static001.geekbang.org/account/avatar/00/13/fd/20/2761ef0e.jpg","comment_is_top":false,"comment_ctime":1617634262,"is_pvip":false,"replies":[{"id":"106377","content":"这个要根据实际情况，一般来说不建议使用与业务有关的字段做主键","user_name":"作者回复","comment_id":286854,"uid":"2356905","ip_address":"","utype":1,"ctime":1621498952,"user_name_real":"朱晓峰"}],"discussion_count":2,"race_medal":0,"score":"14502536150","product_id":100073201,"comment_content":"我们设计表通常给表添加一个与表业务无关的Id作为主键，如果现在与业务有关的ID作为主键可以吗","like_count":3,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518109,"discussion_content":"这个要根据实际情况，一般来说不建议使用与业务有关的字段做主键","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621498952,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2680555,"avatar":"https://static001.geekbang.org/account/avatar/00/28/e6/eb/7b7c0101.jpg","nickname":"彭彬","note":"","ucode":"5AF4F4D7163DFE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392294,"discussion_content":"老师：为什么不建议使用与业务有关的字段做主键？拜托细讲一下！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630936148,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":283052,"user_name":"袋袋","can_delete":false,"product_type":"c1","uid":2481351,"ip_address":"","ucode":"85FDD854529B3D","user_header":"https://static001.geekbang.org/account/avatar/00/25/dc/c7/cd64312d.jpg","comment_is_top":false,"comment_ctime":1615531817,"is_pvip":false,"replies":[{"id":"103649","content":"对的","user_name":"作者回复","comment_id":283052,"uid":"2356905","ip_address":"","utype":1,"ctime":1616978678,"user_name_real":"朱晓峰"}],"discussion_count":1,"race_medal":0,"score":"14500433705","product_id":100073201,"comment_content":"create table goodsname; -- 新建一个表goodsname<br>insert into goodsname <br>(number,barcode,goodsname,price)<br>values(&#39;0001&#39;,&#39;00000101&#39;,&#39;本子&#39;,3),(&#39;0002&#39;,&#39;00000103&#39;,&#39;铅笔&#39;,1.0),(&#39;0003&#39;,&#39;00000105&#39;,&#39;钢笔&#39;,10),<br>(&#39;0004&#39;,&#39;00000107&#39;,&#39;订书机&#39;,8),(&#39;0005&#39;,&#39;00000108&#39;,&#39;中性笔芯&#39;,0.5);","like_count":3,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516920,"discussion_content":"对的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616978678,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282616,"user_name":"Kansei","can_delete":false,"product_type":"c1","uid":1683450,"ip_address":"","ucode":"44B427B8A53A22","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI0MMdRXKH3O6QibmoKH8GjHAOM6Zz2sYmI1A0E9eWCbO978PQ4JZSCjbNk6fIbxyadSZGAYib6c5GQ/132","comment_is_top":false,"comment_ctime":1615341182,"is_pvip":false,"replies":[{"id":"102645","content":"我会从SQL语句设计，表的设计，以及服务器调优等方面进行阐述，SQLserver也是关系型数据库，很多方面的思路是一样的。相信会对你的工作，有所帮助。","user_name":"作者回复","comment_id":282616,"uid":"2356905","ip_address":"","utype":1,"ctime":1615434836,"user_name_real":"朱晓峰"}],"discussion_count":1,"race_medal":0,"score":"14500243070","product_id":100073201,"comment_content":"老师您好，我工作上使用的是SQL Server 在高峰期大量读写的时候经常会很慢，希望老师在讲优化的时候，尽量多讲一些日常我们遇到类似这样的情况的时候，我们应该如何处理","like_count":3,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516791,"discussion_content":"我会从SQL语句设计，表的设计，以及服务器调优等方面进行阐述，SQLserver也是关系型数据库，很多方面的思路是一样的。相信会对你的工作，有所帮助。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615434836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282516,"user_name":"右耳朵猫咪","can_delete":false,"product_type":"c1","uid":1014984,"ip_address":"","ucode":"3AB186CC780FBB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/c8/8627f5c1.jpg","comment_is_top":false,"comment_ctime":1615288373,"is_pvip":true,"replies":[{"id":"102703","content":"这个问题有点大，我理解是不是问的“MySQL的工作原理”。那么可以从客户端，服务器两个方面阐述。包括客户端为各种开发环境提供的数据库接口，服务器端的链接层、服务层和存储层。这部分内容，我在直播中有所阐述，你也可以通过极客时间的哔站找到直播相关的PPT，作为参考。","user_name":"作者回复","comment_id":282516,"uid":"2356905","ip_address":"","utype":1,"ctime":1615518103,"user_name_real":"朱晓峰"}],"discussion_count":1,"race_medal":0,"score":"14500190261","product_id":100073201,"comment_content":"老师，面试的时候被问到mysql的原理是什么？我该从哪几个方面回答呢？","like_count":3,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516771,"discussion_content":"这个问题有点大，我理解是不是问的“MySQL的工作原理”。那么可以从客户端，服务器两个方面阐述。包括客户端为各种开发环境提供的数据库接口，服务器端的链接层、服务层和存储层。这部分内容，我在直播中有所阐述，你也可以通过极客时间的哔站找到直播相关的PPT，作为参考。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615518103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321327,"user_name":"路漫漫","can_delete":false,"product_type":"c1","uid":1273044,"ip_address":"","ucode":"F70F1DC612DE9D","user_header":"https://static001.geekbang.org/account/avatar/00/13/6c/d4/85ef1463.jpg","comment_is_top":false,"comment_ctime":1636793726,"is_pvip":false,"replies":[{"id":"120722","content":"前端掌握sql的知识，对编写代码也是很有帮助的","user_name":"作者回复","comment_id":321327,"uid":"2356905","ip_address":"","utype":1,"ctime":1642303336,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"10226728318","product_id":100073201,"comment_content":"前端来学sql，不算太卷吧","like_count":2,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546348,"discussion_content":"前端掌握sql的知识，对编写代码也是很有帮助的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642303336,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282934,"user_name":"kingtiwns","can_delete":false,"product_type":"c1","uid":1114532,"ip_address":"","ucode":"DA0863D4A1DA35","user_header":"https://static001.geekbang.org/account/avatar/00/11/01/a4/51cbabe7.jpg","comment_is_top":false,"comment_ctime":1615469835,"is_pvip":true,"replies":[{"id":"102704","content":"规范的目的是为了提高可读性。SQL规范只是可读性好的书写方式的一种示例，并不是说一定要按照规范来书写，如果你们单位有自己统一的书写标准，大家都遵循，而且有连续性，我觉得完全可以按照你们自己的规范来写。","user_name":"作者回复","comment_id":282934,"uid":"2356905","ip_address":"","utype":1,"ctime":1615518471,"user_name_real":"朱晓峰"}],"discussion_count":1,"race_medal":0,"score":"10205404427","product_id":100073201,"comment_content":"看了sql规范，说表格名不要用tlb开头，那要怎么写，我们都是用t表示table，v表示视图","like_count":2,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516883,"discussion_content":"规范的目的是为了提高可读性。SQL规范只是可读性好的书写方式的一种示例，并不是说一定要按照规范来书写，如果你们单位有自己统一的书写标准，大家都遵循，而且有连续性，我觉得完全可以按照你们自己的规范来写。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615518471,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":310852,"user_name":"彭彬","can_delete":false,"product_type":"c1","uid":2680555,"ip_address":"","ucode":"5AF4F4D7163DFE","user_header":"https://static001.geekbang.org/account/avatar/00/28/e6/eb/7b7c0101.jpg","comment_is_top":false,"comment_ctime":1630936312,"is_pvip":false,"replies":[{"id":"113744","content":"建议学习一下第5讲《如何正确设置主键？》，里面有详细说明。","user_name":"作者回复","comment_id":310852,"uid":"2356905","ip_address":"","utype":1,"ctime":1632798779,"user_name_real":"朱晓峰"}],"discussion_count":1,"race_medal":0,"score":"5925903608","product_id":100073201,"comment_content":"老师：为什么不建议使用与业务有关的字段做主键？拜托细讲一下！","like_count":1,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526378,"discussion_content":"建议学习一下第5讲《如何正确设置主键？》，里面有详细说明。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632798779,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361276,"user_name":"曙光","can_delete":false,"product_type":"c1","uid":1476450,"ip_address":"江西","ucode":"04D65BF7F19845","user_header":"https://static001.geekbang.org/account/avatar/00/16/87/62/f99b5b05.jpg","comment_is_top":false,"comment_ctime":1667379357,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1667379357","product_id":100073201,"comment_content":"老师，我用workbench 8.0.30，通过“Query”&gt;&gt;&quot;Export Results&quot;导出 SQL INSERT(*.sql)文件时，sql语句没有表名。 <br>stackoverflow也有我一样的问题（https:&#47;&#47;stackoverflow.com&#47;questions&#47;64285009&#47;mysql-workbench-export-recordset-to-an-external-file-sql-inserts-contain-bla）<br>老师，您遇到过么？或是有解决办法么？","like_count":0},{"had_liked":false,"id":357291,"user_name":"蒋礼益","can_delete":false,"product_type":"c1","uid":2804255,"ip_address":"广东","ucode":"4546C69BC2A9DE","user_header":"","comment_is_top":false,"comment_ctime":1663140593,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1663140593","product_id":100073201,"comment_content":"老师，请问前一讲的思考答案在哪里呢","like_count":0},{"had_liked":false,"id":350463,"user_name":"yz","can_delete":false,"product_type":"c1","uid":2436032,"ip_address":"","ucode":"4E7D6E13AA0E7B","user_header":"https://static001.geekbang.org/account/avatar/00/25/2b/c0/79c2be8e.jpg","comment_is_top":false,"comment_ctime":1656927767,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1656927767","product_id":100073201,"comment_content":"老是，我想请教一个问题：我在通过图形化管理工具导入excle文件数据的时候遇到过这么一个问题：我设置了一列自增id，并把他设计成主键，但是当我导入文件之后，我发现id并不是连续的。是什么原因导致的呢，这种问题会存在什么影响呢，谢谢您","like_count":0},{"had_liked":false,"id":348002,"user_name":"Geek_gong1zu","can_delete":false,"product_type":"c1","uid":2086659,"ip_address":"","ucode":"D629A6652AB8E2","user_header":"https://static001.geekbang.org/account/avatar/00/1f/d7/03/db060811.jpg","comment_is_top":false,"comment_ctime":1654658129,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1654658129","product_id":100073201,"comment_content":"CREATE TABLE demo.sales<br>(<br>id int <br>goodsname text,<br>price int PRIMARY KEY AUTO_INCREMENT,<br>num int,<br>cost int<br>);<br>","like_count":0},{"had_liked":false,"id":347999,"user_name":"Geek_gong1zu","can_delete":false,"product_type":"c1","uid":2086659,"ip_address":"","ucode":"D629A6652AB8E2","user_header":"https://static001.geekbang.org/account/avatar/00/1f/d7/03/db060811.jpg","comment_is_top":false,"comment_ctime":1654657215,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1654657215","product_id":100073201,"comment_content":"按照老师一样的操作，报错。<br>Executing:<br>ALTER TABLE `demo`.`test` <br>ADD COLUMN `itemnumber` INT NOT NULL AFTER `price`,<br>ADD PRIMARY KEY (`itemnumber`);<br>;<br><br>Operation failed: There was an error while applying the SQL script to the database.<br>ERROR 1062: Duplicate entry &#39;0&#39; for key &#39;test.PRIMARY&#39;<br>SQL Statement:<br>ALTER TABLE `demo`.`test` <br>ADD COLUMN `itemnumber` INT NOT NULL AFTER `price`,<br>ADD PRIMARY KEY (`itemnumber`)<br><br>查了一下，新建字段的时候 要把AI（自增设置）选上就行","like_count":0},{"had_liked":false,"id":333305,"user_name":"SharpBB","can_delete":false,"product_type":"c1","uid":2014573,"ip_address":"","ucode":"D30C5B798B8E8C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/bd/6d/7010f98e.jpg","comment_is_top":false,"comment_ctime":1644282699,"is_pvip":true,"replies":[{"id":"123480","content":"对","user_name":"作者回复","user_name_real":"编辑","uid":"2356905","ctime":1647075115,"ip_address":"","comment_id":333305,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1644282699","product_id":100073201,"comment_content":"1.数据库是mysql最大的载体<br>\t创建数据库<br>\t\tcreate database demo;<br>\t查看所有<br>\t\tshow databases;<br>2.库中可以有多个表<br>\t创建表<br>\t\t<br>CREATE TABLE demo.test<br>( <br>  barcode text,<br>  goodsname text,<br>  price int<br>); <br>\t\t最好指明数据库<br>\t查看表结构<br>\t\tdescribe demo.test;<br>\t查看库中所有表<br>\t\t使用对应数据库<br>\t\t\tuse demo;<br>\t\t展示表<br>\t\t\tshow tables;<br>3.主键<br>\t一般来讲 主键 非空 唯一 不重复<br>\t\t可以自己添加一个冗余字段来保证不重复 不干扰<br>\t\t表中新增主键<br>\t\t\tALTER TABLE mytest<br>ADD COLUMN id int PRIMARY KEY AUTO_INCREMENT;<br>4.插入数据<br>\tINSERT INTO demo.test<br>(barcode,goodsname,price)<br>VALUES (&#39;0001&#39;,&#39;本&#39;,3);<br>\t插入最好注明前面的字段 不容易出错 可读性好<br>5.sql语句汇总<br>\t<br>-- 创建数据库<br>CREATE DATABASE demo；<br>-- 删除数据库<br>DROP DATABASE demo；<br>-- 查看数据库<br>SHOW DATABASES;<br>-- 创建数据表：<br>CREATE TABLE demo.test<br>(  <br>  barcode text,<br>  goodsname text,<br>  price int<br>); <br>-- 查看表结构<br>DESCRIBE demo.test;<br>-- 查看所有表<br>SHOW TABLES;<br>-- 添加主键<br>ALTER TABLE demo.test<br>ADD COLUMN itemnumber int PRIMARY KEY AUTO_INCREMENT;<br>-- 向表中添加数据<br>INSERT INTO demo.test<br>(barcode,goodsname,price)<br>VALUES (&#39;0001&#39;,&#39;本&#39;,3);<br>\t注意：sql语句最后的分号不要漏掉","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555793,"discussion_content":"对","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647075116,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332876,"user_name":"Ankhetsin","can_delete":false,"product_type":"c1","uid":1028469,"ip_address":"","ucode":"3CA233D08D4A72","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b1/75/60a71bbd.jpg","comment_is_top":false,"comment_ctime":1643779184,"is_pvip":false,"replies":[{"id":"123474","content":"MySQL中，一个数据表的字段数上限是4096，根据字段长度等因素，实际数据表中的字段数上限一般都要少于4096，因此，一个表中不可以有一万个字段。","user_name":"作者回复","user_name_real":"编辑","uid":"2356905","ctime":1647073250,"ip_address":"","comment_id":332876,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1643779184","product_id":100073201,"comment_content":"一个表可以有一万个字段吗？","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555781,"discussion_content":"MySQL中，一个数据表的字段数上限是4096，根据字段长度等因素，实际数据表中的字段数上限一般都要少于4096，因此，一个表中不可以有一万个字段。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647073250,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332503,"user_name":"我爱琴妹妹","can_delete":false,"product_type":"c1","uid":1582495,"ip_address":"","ucode":"F2D2AD4848B9FF","user_header":"https://static001.geekbang.org/account/avatar/00/18/25/9f/bff9c251.jpg","comment_is_top":false,"comment_ctime":1643278634,"is_pvip":true,"replies":[{"id":"123472","content":"请参考思考题答案","user_name":"作者回复","user_name_real":"编辑","uid":"2356905","ctime":1647072616,"ip_address":"","comment_id":332503,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1643278634","product_id":100073201,"comment_content":"作业：<br>CREATE TABLE demo.sales_list (<br>    sale_id INT PRIMARY KEY AUTO_INCREMENT COMMENT &#39;主键&#39;,<br>    goods_name TEXT COMMENT &#39;商品名称&#39;,<br>    goods_price INT COMMENT &#39;商品价格&#39;,<br>    goods_amount INT COMMENT &#39;商品数量&#39;,<br>    goods_money INT COMMENT &#39;商品金额&#39;<br>);","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555778,"discussion_content":"请参考思考题答案","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647072617,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":330173,"user_name":"七月的雨","can_delete":false,"product_type":"c1","uid":2839126,"ip_address":"","ucode":"7B3829576985D4","user_header":"https://static001.geekbang.org/account/avatar/00/2b/52/56/6ac8be3c.jpg","comment_is_top":false,"comment_ctime":1641828118,"is_pvip":false,"replies":[{"id":"120775","content":"试试用引号把中文括起来","user_name":"作者回复","user_name_real":"编辑","uid":"2356905","ctime":1642309465,"ip_address":"","comment_id":330173,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1641828118","product_id":100073201,"comment_content":"老师，用workbench插入语句insert插入中文的时候报错Incorrect string value，换成英文是可以的，这个要怎么解决","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546414,"discussion_content":"试试用引号把中文括起来","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642309465,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":330087,"user_name":"枫林血舞","can_delete":false,"product_type":"c1","uid":2809867,"ip_address":"","ucode":"EE7F6DA78D21EA","user_header":"https://static001.geekbang.org/account/avatar/00/2a/e0/0b/6f667b2c.jpg","comment_is_top":false,"comment_ctime":1641792732,"is_pvip":true,"replies":[{"id":"120771","content":"这个要根据业务的需要来定","user_name":"作者回复","user_name_real":"编辑","uid":"2356905","ctime":1642309362,"ip_address":"","comment_id":330087,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1641792732","product_id":100073201,"comment_content":"create table demo.sale <br>(<br>    id int primary key auto_increment,<br>    itemnumber int,<br>    goods_name text,<br>    goods_price double,<br>    sale_num int,<br>    total_price double<br>);<br>id，自增的主键；itemnumber，商品表的主键；goods_name，商品名称；goods_price，商品价格；sale_num，销售数量；total_price，销售总价。<br>我觉着将商品表的主键作为一个列，那么商品名称和商品价格应该就可以不用加在这个销售表里头了，算是冗余字段了吧。","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546410,"discussion_content":"这个要根据业务的需要来定","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642309363,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":324966,"user_name":"首富手记","can_delete":false,"product_type":"c1","uid":1286588,"ip_address":"","ucode":"879DED4078303C","user_header":"https://static001.geekbang.org/account/avatar/00/13/a1/bc/ef0f26fa.jpg","comment_is_top":false,"comment_ctime":1638760971,"is_pvip":true,"replies":[{"id":"120737","content":"请参考思考题答案","user_name":"作者回复","user_name_real":"编辑","uid":"2356905","ctime":1642307437,"ip_address":"","comment_id":324966,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1638760971","product_id":100073201,"comment_content":"create table damo.goodsname(<br>\tid int NOT NULL PRIMARY KEY AUTO_INCREMENT COMMENT &#39;主键&#39;,<br>    barcode varchar(10) comment &#39;商品条形码&#39;,<br>    goodsname text COMMENT &#39;商品名称&#39;,<br>    price int COMMENT &#39;商品价格&#39;,<br>    inventory int comment &#39;库存数量&#39;<br>);","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546374,"discussion_content":"请参考思考题答案","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642307437,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":324910,"user_name":"GeekZd","can_delete":false,"product_type":"c1","uid":1039886,"ip_address":"","ucode":"D2AA3305A6AFE8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/de/0e/af8dd241.jpg","comment_is_top":false,"comment_ctime":1638712351,"is_pvip":true,"replies":[{"id":"120734","content":"“ALTER TABLE demo.testADD COLUMN itemnumber int PRIMARY KEY AUTO_INCREMENT;”这个语句，少了一个空格，应该是“ALTER TABLE demo.test ADD COLUMN itemnumber int PRIMARY KEY AUTO_INCREMENT;”，这样就不会报错了","user_name":"作者回复","user_name_real":"编辑","uid":"2356905","ctime":1642306103,"ip_address":"","comment_id":324910,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1638712351","product_id":100073201,"comment_content":"执行这个sql 语句报错 ALTER TABLE demo.testADD COLUMN itemnumber int PRIMARY KEY AUTO_INCREMENT;<br>错误信息： ERROR 1025 (HY000): Error on rename of &#39;.&#47;demo&#47;test&#39; to &#39;.&#47;demo&#47;#sql2-7ea-5&#39; (errno: -1)<br>有人遇到同样的问题吗？","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546368,"discussion_content":"“ALTER TABLE demo.testADD COLUMN itemnumber int PRIMARY KEY AUTO_INCREMENT;”这个语句，少了一个空格，应该是“ALTER TABLE demo.test ADD COLUMN itemnumber int PRIMARY KEY AUTO_INCREMENT;”，这样就不会报错了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642306103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323088,"user_name":"鱼","can_delete":false,"product_type":"c1","uid":1287331,"ip_address":"","ucode":"5F4007C125E3FA","user_header":"https://static001.geekbang.org/account/avatar/00/13/a4/a3/d9d14e32.jpg","comment_is_top":false,"comment_ctime":1637724569,"is_pvip":true,"replies":[{"id":"120731","content":"请参考思考题答案","user_name":"作者回复","user_name_real":"编辑","uid":"2356905","ctime":1642305222,"ip_address":"","comment_id":323088,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637724569","product_id":100073201,"comment_content":"-- 假设用户现在要销售商品，你能不能帮它设计一个销售表，把销售信息（商品名称、价格、数量、金额等）都保存起来？<br>create table tail_demo.sale(<br>\tid int(10) not null PRIMARY key auto_increment COMMENT &quot;自增主键&quot;,<br>\tgood_name varchar(100) not null COMMENT &quot;商品名称&quot;,<br>\tprice varchar(30) not null COMMENT &quot;价格&quot;,<br>\tnum int(10)  DEFAULT 0 COMMENT &quot;数量&quot;,<br>\tamount varchar(30)  DEFAULT 0 COMMENT  &quot;金额&quot;   -- 这个字段与价格是不是冲突<br>);<br><br>DESCRIBE tail_demo.sale;","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546360,"discussion_content":"请参考思考题答案","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642305222,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":314883,"user_name":"逆丶侍","can_delete":false,"product_type":"c1","uid":2793017,"ip_address":"","ucode":"BBDA6F7780C996","user_header":"https://static001.geekbang.org/account/avatar/00/2a/9e/39/8b91b65c.jpg","comment_is_top":false,"comment_ctime":1633526674,"is_pvip":false,"replies":[{"id":"116464","content":"思考题答案可以在下一讲后面找到","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1636615156,"ip_address":"","comment_id":314883,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1633526674","product_id":100073201,"comment_content":"弱弱的问下老师和大家，思考题答案在哪里看呀？","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527826,"discussion_content":"思考题答案可以在下一讲后面找到","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636615156,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":307604,"user_name":"Geek_48e778","can_delete":false,"product_type":"c1","uid":2033337,"ip_address":"","ucode":"8621DCB8B65CBB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epJT1bQ1le38EPpPpYVPn1jreNWRl4lVVQdMXe7bibwhohicEH46KVUteaic3JJKUJph9ZPgOwDfOE6Q/132","comment_is_top":false,"comment_ctime":1629171323,"is_pvip":false,"replies":[{"id":"112618","content":"请参考思考题答案","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1630912774,"ip_address":"","comment_id":307604,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1629171323","product_id":100073201,"comment_content":"create table goods_sell<br>(<br><br>&#47;*<br>--text类型mysql只能索引前几个字符，<br>不能做主键，所以用varchar<br>但长度也不能超过255,超过255<br>varchar会被当做text处理<br>*&#47;<br>order_no varchar(16) primary key, <br>goods_no text,<br>goods_name text,<br>goods_price int,<br>sell_num int,<br>sell_price int<br>);<br><br>INSERT INTO demo.goods_sell<br>(order_no,goods_no,goods_name,goods_price,sell_num,sell_price)<br>values(&#39;001&#39;,&#39;003&#39;,&#39;书&#39;,2,20,40);","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525214,"discussion_content":"请参考思考题答案","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630912774,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":305324,"user_name":"潇","can_delete":false,"product_type":"c1","uid":2720411,"ip_address":"","ucode":"05A01E55D59FEF","user_header":"https://static001.geekbang.org/account/avatar/00/29/82/9b/cbdd4481.jpg","comment_is_top":false,"comment_ctime":1627906840,"is_pvip":false,"replies":[{"id":"112583","content":"请参考思考题答案","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1630895400,"ip_address":"","comment_id":305324,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1627906840","product_id":100073201,"comment_content":"CREATE TABLE demo.sale1\r<br> ( \r<br>      goodsname  text,\r<br>      price int,\r<br>      number int,\r<br>      money int\r<br>      );\r<br>      \r<br>INSERT INTO demo.sale1\r<br>(goodsname,price,number,money)\r<br>VALUES(&#39;酒&#39;,2,10,20);\r<br>SELECT * FROM demo.sale1;","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524348,"discussion_content":"请参考思考题答案","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630895400,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":292887,"user_name":"小氘","can_delete":false,"product_type":"c1","uid":1622109,"ip_address":"","ucode":"DA55B9A02D9EE0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erPMtAfnQdpx1yOZQ2ic7icqUs3tvibEjUXQMUXKiaakyuIho6k6vmdl46nrdWjXIjPIRg9Pmco00tR5w/132","comment_is_top":false,"comment_ctime":1621053287,"is_pvip":false,"replies":[{"id":"106543","content":"请参考思考题答案","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1621567281,"ip_address":"","comment_id":292887,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1621053287","product_id":100073201,"comment_content":"课后思考题：CREATE TABLE `sale` (<br>  `id` int(11) NOT NULL AUTO_INCREMENT,<br>  `goodsname` text COMMENT &#39;商品名称&#39;,<br>  `price` decimal(10,2) DEFAULT NULL COMMENT &#39;价格&#39;,<br>  `count` int(11) DEFAULT NULL COMMENT &#39;数量&#39;,<br>  PRIMARY KEY (`id`)<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT=&#39;销售表&#39;","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519998,"discussion_content":"请参考思考题答案","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621567281,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286576,"user_name":"黑化肥","can_delete":false,"product_type":"c1","uid":1083451,"ip_address":"","ucode":"564185846CB43F","user_header":"https://static001.geekbang.org/account/avatar/00/10/88/3b/d1b3a9e7.jpg","comment_is_top":false,"comment_ctime":1617382340,"is_pvip":true,"replies":[{"id":"106369","content":"请参考思考题的答案","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1621498288,"ip_address":"","comment_id":286576,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1617382340","product_id":100073201,"comment_content":"销售表：流水单号，子流水号，商品id ，商品名称，商品数量，销售金额，销售店铺id ，成交时间<br>其中流水单号和子流水号做联合主键（不清楚MySQL能不能设置联合主键），商品id 和销售店铺id  分别做商品表和店铺表的外键。","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518035,"discussion_content":"请参考思考题的答案","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621498288,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":285152,"user_name":"武明","can_delete":false,"product_type":"c1","uid":1083763,"ip_address":"","ucode":"73521E4633085B","user_header":"https://static001.geekbang.org/account/avatar/00/10/89/73/2deb24ab.jpg","comment_is_top":false,"comment_ctime":1616644309,"is_pvip":false,"replies":[{"id":"104977","content":"数据库名称使用英文字母、数字和下划线是可以的","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1618993932,"ip_address":"","comment_id":285152,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1616644309","product_id":100073201,"comment_content":"老师好，数据库名称是不是不能带小数点“.”啊，已经带了点的数据库怎么操作 DESCRIBE 命令，我用了括号、引号试试都不行","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517598,"discussion_content":"数据库名称使用英文字母、数字和下划线是可以的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618993932,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}