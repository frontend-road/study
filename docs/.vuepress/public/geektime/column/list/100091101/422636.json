{"id":422636,"title":"05 | The Google File System ï¼ˆä¸‰ï¼‰ï¼š å¤šå†™å‡ æ¬¡ä¹Ÿæ²¡å…³ç³»","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å¾æ–‡æµ©ã€‚åœ¨å‰é¢çš„ä¸¤è®²ä¸­ï¼Œæˆ‘ä»¬ä¸€èµ·æ¢è®¨äº†GFSç³»ç»Ÿè®¾è®¡ä¸­ç§‰æŒçš„ä¸¤ä¸ªåŸåˆ™ï¼Œåˆ†åˆ«æ˜¯â€œä¿æŒç®€å•â€å’Œâ€œæ ¹æ®ç¡¬ä»¶ç‰¹æ€§è®¾è®¡ç³»ç»Ÿâ€ï¼Œè€Œä»Šå¤©æˆ‘ä»¬è¦è®¨è®ºçš„GFSçš„æœ€åä¸€ä¸ªè®¾è®¡ç‰¹ç‚¹ï¼Œæ˜¯â€œ<strong>æ”¾å®½æ•°æ®ä¸€è‡´æ€§çš„è¦æ±‚</strong>â€ã€‚</p><p>åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸€è‡´æ€§è¦æ±‚æ˜¯ä¸€ä¸ªå¾ˆæœ‰æŒ‘æˆ˜çš„è¯é¢˜ã€‚å¦‚æœè¯´åˆ†å¸ƒå¼ç³»ç»Ÿå¤©ç”Ÿé€šè¿‡æ›´å¤šçš„æœåŠ¡å™¨æå‡äº†æ€§èƒ½ï¼Œæ˜¯ä¸€ä¸ªå¤©ç„¶çš„ä¼˜ç‚¹ï¼Œé‚£ä¹ˆåœ¨è¿™äº›é€šè¿‡ç½‘ç»œè¿èµ·æ¥çš„æœåŠ¡å™¨ä¹‹é—´ä¿æŒæ•°æ®ä¸€è‡´ï¼Œå°±æ˜¯ä¸€ä¸ªå·¨å¤§çš„æŒ‘æˆ˜ã€‚æ¯•ç«Ÿç½‘ç»œä¼ è¾“æ€»æœ‰å»¶æ—¶ï¼Œç¡¬ä»¶æ€»ä¼šæœ‰æ•…éšœï¼Œä½ çš„ç¨‹åºç¨æœ‰ä¸æ…ï¼Œå°±ä¼šé‡åˆ°ç”²æœåŠ¡å™¨è§‰å¾—ä½ çš„é’±è½¬è´¦å¤±è´¥ï¼Œè€Œä¹™æœåŠ¡å™¨å´è§‰å¾—é’±å·²ç»è½¬èµ°äº†çš„æƒ…å†µã€‚å¯ä»¥è¯´ï¼Œ<strong>ä¸€è‡´æ€§æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿé‡Œçš„ä¸€ä¸ªæ°¸æ’çš„è¯é¢˜</strong>ã€‚</p><p>ä¸è¿‡2003å¹´çš„GFSï¼Œå¯¹äºä¸€è‡´æ€§çš„è¦æ±‚ï¼Œæ˜¯éå¸¸å®½æ¾çš„ã€‚ä¸€æ–¹é¢ï¼Œè¿™æ˜¯ä¸ºäº†éµå¾ªç¬¬ä¸€ä¸ªè®¾è®¡åŸåˆ™ï¼Œå°±æ˜¯â€œä¿æŒç®€å•â€ï¼Œç®€å•çš„è®¾è®¡ä½¿å¾—åšåˆ°å¾ˆå¼ºçš„ä¸€è‡´æ€§å˜å¾—å›°éš¾ã€‚å¦ä¸€æ–¹é¢ï¼Œåˆ™æ˜¯è¦è€ƒè™‘â€œç¡¬ä»¶ç‰¹æ€§â€ï¼ŒGFSå¸Œæœ›åœ¨æœºæ¢°ç¡¬ç›˜ä¸Šå°½é‡æœ‰æ¯”è¾ƒé«˜çš„å†™å…¥æ€§èƒ½ï¼Œæ‰€ä»¥å®ƒåªå¯¹é¡ºåºå†™å…¥è€ƒè™‘äº†ä¸€è‡´æ€§ï¼Œè¿™å°±è‡ªç„¶å¸¦æ¥äº†å®½æ¾çš„ä¸€è‡´æ€§ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/22/73/224bffba53c4398bd39cd55342341673.jpg?wh=1920x904\" alt=\"å›¾ç‰‡\"></p><p>å¥½ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬åˆ‡å…¥æ­£é¢˜ã€‚</p><h2>éšæœºå†™å…¥åªæ˜¯â€œç¡®å®šâ€çš„</h2><p>é€šè¿‡ä¸Šä¸€è®²çš„å­¦ä¹ ï¼Œæˆ‘ä»¬çŸ¥é“äº†åœ¨GFSä¸­ï¼Œå®¢æˆ·ç«¯æ˜¯æ€ä¹ˆæŠŠæ•°æ®å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿé‡Œçš„ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰æ¢è®¨ä¸€ä¸ªéå¸¸é‡è¦çš„é—®é¢˜ï¼Œå°±æ˜¯æ•°æ®å†™å…¥çš„ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰é—®é¢˜ã€‚è¿™ä¸ªä¸€è‡´æ€§ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬å¸¸å¸¸å¬è¯´çš„CAPç†è®ºä¸­çš„Cï¼Œå³ä¸€è‡´æ€§ã€å¯ç”¨æ€§ã€åˆ†åŒºå®¹é”™æ€§åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä¸‰è€…ä¸èƒ½å…¼å¾—ä¸­çš„ä¸€è‡´æ€§é—®é¢˜ã€‚è¿™ä¸ªCï¼Œä¹Ÿæ­£æ¥è‡ªäºä¸€è‡´æ€§çš„è‹±æ–‡Consitencyçš„é¦–å­—æ¯ã€‚</p><!-- [[[read_end]]] --><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ï¼Œä¸€è‡´æ€§åˆ°åº•æŒ‡çš„æ˜¯ä»€ä¹ˆä¸œè¥¿ã€‚åœ¨GFSé‡Œé¢ï¼Œä¸»è¦å®šä¹‰äº†å¯¹ä¸€è‡´æ€§çš„ä¸¤ä¸ªå±‚çº§çš„æ¦‚å¿µï¼š</p><ul>\n<li>ç¬¬ä¸€ä¸ªï¼Œå°±å«åšâ€œä¸€è‡´çš„ï¼ˆConsistentï¼‰â€ã€‚è¿™ä¸ªå°±æ˜¯æŒ‡ï¼Œå¤šä¸ªå®¢æˆ·ç«¯æ— è®ºæ˜¯ä»ä¸»å‰¯æœ¬è¯»å–æ•°æ®ï¼Œè¿˜æ˜¯ä»æ¬¡å‰¯æœ¬è¯»å–æ•°æ®ï¼Œ<strong>è¯»åˆ°çš„æ•°æ®éƒ½æ˜¯ä¸€æ ·çš„</strong>ã€‚</li>\n<li>ç¬¬äºŒä¸ªï¼Œå«åšâ€œç¡®å®šçš„ï¼ˆDefinedï¼‰â€ã€‚è¿™ä¸ªè¦æ±‚ä¼šé«˜ä¸€äº›ï¼ŒæŒ‡çš„æ˜¯å¯¹äºå®¢æˆ·ç«¯å†™å…¥åˆ°GFSçš„æ•°æ®ï¼Œèƒ½å¤Ÿ<strong>å®Œæ•´åœ°è¢«è¯»åˆ°</strong>ã€‚å¯èƒ½çœ‹åˆ°è¿™ä¸ªå®šä¹‰ï¼Œä½ è¿˜æ˜¯ä¸æ¸…æ¥šï¼Œæ²¡å…³ç³»ï¼Œæˆ‘ä¸‹é¢ä¼šç»™ä½ è¯¦ç»†è®²è§£â€œç¡®å®šçš„â€åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆé—®é¢˜ã€‚</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/f0/76/f08de0776c1338980a22f5e57014b976.jpg?wh=1920x589\" alt=\"å›¾ç‰‡\" title=\"GFSè®ºæ–‡ä¸­çš„Table 1ï¼šåœ¨å˜åŒ–åæ–‡ä»¶åŒºåŸŸçš„çŠ¶æ€\"></p><p>ç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹GFSçš„è®ºæ–‡é‡Œç•™çš„ä¸€ä¸ªè¡¨æ ¼ï¼Œå…¶ä¸­å‘Šè¯‰äº†æˆ‘ä»¬GFSå¯¹äºæ•°æ®å†™å…¥çš„ä¸€è‡´æ€§é—®é¢˜ã€‚</p><ul>\n<li><strong>é¦–å…ˆï¼Œå¦‚æœæ•°æ®å†™å…¥å¤±è´¥ï¼ŒGFSé‡Œçš„æ•°æ®å°±æ˜¯ä¸ä¸€è‡´çš„ã€‚</strong></li>\n</ul><p>è¿™ä¸ªå¾ˆå®¹æ˜“ç†è§£ï¼ŒGFSé‡Œé¢çš„æ•°æ®å†™å…¥ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªäº‹åŠ¡ã€‚ä¸Šä¸€è®²é‡Œè¯´è¿‡ï¼Œä¸»å‰¯æœ¬ä¼šæŠŠå†™å…¥æŒ‡ä»¤ä¸‹å‘åˆ°ä¸¤ä¸ªæ¬¡å‰¯æœ¬ï¼Œå¦‚æœæ¬¡å‰¯æœ¬å†™å…¥å¤±è´¥äº†ï¼Œå®ƒä¼šå‘Šè¯‰ä¸»å‰¯æœ¬ã€‚ä½†æ˜¯ï¼Œæ­¤æ—¶ä¸»å‰¯æœ¬å’Œå¦ä¸€ä¸ªæ¬¡å‰¯æœ¬éƒ½å·²ç»å†™å…¥æˆåŠŸäº†ã€‚é‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼ŒGFSé‡Œçš„ä¸‰ä¸ªå‰¯æœ¬çš„æ•°æ®ï¼Œå°±æ˜¯ä¸ä¸€è‡´çš„äº†ã€‚ä¸åŒçš„å®¢æˆ·ç«¯ï¼Œå°±å¯èƒ½è¯»åˆ°ä¸åŒçš„æ•°æ®ã€‚</p><ul>\n<li><strong>å…¶æ¬¡ï¼Œå¦‚æœå®¢æˆ·ç«¯çš„æ•°æ®å†™å…¥æ˜¯é¡ºåºçš„ï¼Œå¹¶ä¸”å†™å…¥æˆåŠŸäº†ï¼Œé‚£ä¹ˆæ–‡ä»¶é‡Œé¢çš„å†…å®¹å°±æ˜¯ç¡®å®šçš„ã€‚</strong></li>\n</ul><p>æ¯”å¦‚ï¼Œä½ å…ˆå¾€ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œå†™å…¥ä¸€éƒ¨ç”µå½±ã€Šæ˜Ÿçƒå¤§æˆ˜ã€‹ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå®¢æˆ·ç«¯æ— è®ºä»å“ªä¸ªå‰¯æœ¬è¯»æ•°æ®ï¼Œè¯»åˆ°çš„éƒ½æ˜¯æ˜Ÿçƒå¤§æˆ˜ã€‚ç„¶åå†å†™å…¥ã€Šæ˜Ÿé™…è¿·èˆªã€‹ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯å†è¯»æ•°æ®ï¼Œè¯»åˆ°çš„ä¹Ÿä¸€å®šæ˜¯ã€Šæ˜Ÿé™…è¿·èˆªã€‹ã€‚</p><ul>\n<li><strong>ä½†æ˜¯ï¼Œå¦‚æœç”±å¤šä¸ªå®¢æˆ·ç«¯å¹¶å‘å†™å…¥æ•°æ®ï¼Œå³ä½¿å†™å…¥æˆåŠŸäº†ï¼ŒGFSé‡Œçš„æ•°æ®ä¹Ÿå¯èƒ½ä¼šè¿›å…¥ä¸€ä¸ªä¸€è‡´ä½†æ˜¯éç¡®å®šçš„çŠ¶æ€ã€‚</strong></li>\n</ul><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸¤ä¸ªå®¢æˆ·ç«¯å¹¶å‘å¾€ä¸€ä¸ªæ–‡ä»¶é‡Œé¢å†™æ•°æ®ï¼Œä¸€ä¸ªæƒ³è¦å†™å…¥ã€Šæ˜Ÿçƒå¤§æˆ˜ã€‹ï¼Œä¸€ä¸ªæƒ³è¦å†™å…¥ã€Šæ˜Ÿé™…è¿·èˆªã€‹ï¼Œä¸¤ä¸ªå†™å…¥éƒ½æˆåŠŸäº†ã€‚è¿™ä¸ªæ—¶å€™ï¼ŒGFSé‡Œé¢ä¸‰ä»½å‰¯æœ¬çš„æ•°æ®æ˜¯ä¸€æ ·çš„ï¼Œå®¢æˆ·ç«¯è¯»åˆ°çš„æ•°æ®æ— è®ºæ˜¯ä»å“ªä¸ªå‰¯æœ¬é‡Œè¯»ï¼Œéƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><p>ä½†æ˜¯å‘¢ï¼Œå®¢æˆ·ç«¯å¯èƒ½è¯»å‡ºæ¥çš„æ•°æ®é‡Œï¼Œå‰ä¸€å°æ—¶æ˜¯ã€Šæ˜Ÿçƒå¤§æˆ˜ã€‹ï¼Œåä¸€å°æ—¶æ˜¯ã€Šæ˜Ÿé™…è¿·èˆªã€‹ã€‚æ— è®ºå“ªä¸ªæ—¶é—´èŠ‚ç‚¹å»è¯»æ•°æ®ï¼Œå®¢æˆ·ç«¯éƒ½ä¸èƒ½è¯»åˆ°ä¸€éƒ¨å®Œæ•´çš„ã€Šæ˜Ÿçƒå¤§æˆ˜ã€‹ï¼Œæˆ–è€…æ˜¯ã€Šæ˜Ÿé™…è¿·èˆªã€‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/16/20/16097c4fd15e13f3810401a5491d5b20.jpg?wh=1920x1444\" alt=\"å›¾ç‰‡\"></p><p>é‚£ä¹ˆï¼Œ<strong>ä¸ºä»€ä¹ˆGFSçš„æ•°æ®å†™å…¥ä¼šå‡ºç°ä¸€è‡´ä½†æ˜¯éç¡®å®šçš„çŠ¶æ€å‘¢ï¼Ÿ</strong>è¿™ä¸ªæ¥è‡ªäºä¸¤ä¸ªå› ç´ ã€‚</p><p>ç¬¬ä¸€ç§å› ç´ æ˜¯åœ¨GFSçš„æ•°æ®è¯»å†™ä¸­ï¼Œä¸ºäº†å‡è½»Masterçš„è´Ÿè½½ï¼Œæ•°æ®çš„å†™å…¥é¡ºåºå¹¶ä¸éœ€è¦é€šè¿‡Masteræ¥è¿›è¡Œåè°ƒï¼Œè€Œæ˜¯ç›´æ¥ç”±å­˜å‚¨äº†ä¸»å‰¯æœ¬çš„chunkserverï¼Œæ¥ç®¡ç†åŒä¸€ä¸ªchunkä¸‹æ•°æ®å†™å…¥çš„æ“ä½œé¡ºåºã€‚</p><p>ç¬¬äºŒç§å› ç´ æ˜¯éšæœºçš„æ•°æ®å†™å…¥ææœ‰å¯èƒ½è¦è·¨è¶Šå¤šä¸ªchunkã€‚</p><p>æˆ‘ä»¬åœ¨å†™å…¥ã€Šæ˜Ÿçƒå¤§æˆ˜ã€‹å’Œã€Šæ˜Ÿé™…è¿·èˆªã€‹çš„æ—¶å€™ï¼Œå‰ä¸€ä¸ªå°æ—¶çš„ç”µå½±æ˜¯åœ¨chunk 1ï¼Œå¯¹åº”çš„ä¸»å‰¯æœ¬åœ¨server Aï¼Œåä¸€ä¸ªå°æ—¶çš„ç”µå½±æ˜¯åœ¨chunk 2ï¼Œå¯¹åº”çš„ä¸»å‰¯æœ¬åœ¨server Bã€‚ç„¶åå†™å…¥è¯·æ±‚åˆ°server Açš„æ—¶å€™ï¼Œã€Šæ˜Ÿé™…è¿·èˆªã€‹åœ¨å‰ï¼Œã€Šæ˜Ÿçƒå¤§æˆ˜ã€‹åœ¨åï¼Œé‚£ä¹ˆã€Šæ˜Ÿçƒå¤§æˆ˜ã€‹çš„æ•°æ®å°±è¦†ç›–äº†ã€Šæ˜Ÿé™…è¿·èˆªã€‹ã€‚</p><p>è€Œåˆ°server Bçš„æ—¶å€™åˆ™æ˜¯åè¿‡æ¥ï¼Œã€Šæ˜Ÿé™…è¿·èˆªã€‹åˆè¦†ç›–äº†ã€Šæ˜Ÿçƒå¤§æˆ˜ã€‹ã€‚äºæ˜¯ï¼Œå°±ä¼šå‡ºç°å®¢æˆ·ç«¯è¯»æ•°æ®ï¼Œå‰åŠæ®µæ˜¯ã€Šæ˜Ÿçƒå¤§æˆ˜ã€‹ï¼ŒååŠæ®µæ˜¯ã€Šæ˜Ÿé™…è¿·èˆªã€‹çš„å¥‡æ€ªç°è±¡äº†ã€‚</p><p>å…¶å®ï¼Œè¿™ä¸ªä¸€è‡´ä½†æ˜¯éç¡®å®šçš„çŠ¶æ€ï¼Œæ˜¯å› ä¸ºéšæœºçš„æ•°æ®å†™å…¥ï¼Œæ²¡æœ‰<strong>åŸå­æ€§</strong>ï¼ˆAtomicï¼‰æˆ–è€…<strong>äº‹åŠ¡æ€§ï¼ˆ</strong>Transactionalï¼‰ã€‚å¦‚æœæƒ³è¦éšæœºä¿®æ”¹GFSä¸Šçš„æ•°æ®ï¼Œä¸€èˆ¬ä¼šå»ºè®®ä½¿ç”¨æ–¹åœ¨å®¢æˆ·ç«¯çš„åº”ç”¨å±‚é¢ï¼Œä¿éšœæ•°æ®å†™å…¥æ˜¯é¡ºåºçš„ï¼Œä»è€Œå¯ä»¥é¿å…å¹¶å‘å†™å…¥çš„å‡ºç°ã€‚</p><h2>è¿½åŠ å†™å…¥çš„â€œè‡³å°‘ä¸€æ¬¡â€çš„ä¿éšœ</h2><p>çœ‹åˆ°è¿™é‡Œï¼Œä½ å¯èƒ½è¦çº³é—·äº†ã€‚ä¸æ˜¯è¯´GFSæ”¯æŒå‡ ç™¾ä¸ªå®¢æˆ·ç«¯å¹¶å‘è¯»å†™å—ï¼Ÿç°åœ¨æ€ä¹ˆåˆè¯´ï¼Œå†™å…¥è¦å®¢æˆ·ç«¯è‡ªå·±ä¿éšœæ˜¯â€œé¡ºåºâ€çš„å‘¢ï¼Ÿ</p><p>å®é™…ä¸Šï¼Œè¿™æ˜¯å› ä¸ºéšæœºå†™å…¥å¹¶ä¸æ˜¯GFSè®¾è®¡çš„ä¸»è¦çš„æ•°æ®å†™å…¥æ¨¡å¼ï¼ŒGFSè®¾è®¡äº†ä¸€ä¸ªä¸“é—¨çš„æ“ä½œï¼Œå«åš<strong>è®°å½•è¿½åŠ </strong>ï¼ˆRecord Appendsï¼‰ã€‚è¿™æ˜¯GFSå¸Œæœ›æˆ‘ä»¬ä¸»è¦ä½¿ç”¨çš„æ•°æ®å†™å…¥çš„æ–¹å¼ï¼Œè€Œä¸”å®ƒæ˜¯åŸå­æ€§ï¼ˆAtomicï¼‰çš„ï¼Œèƒ½å¤Ÿåšåˆ°åœ¨å¹¶å‘å†™å…¥æ—¶å€™æ˜¯åŸºæœ¬ç¡®å®šçš„ã€‚</p><p>ä¸è¿‡ï¼Œä½œä¸ºä¸€ä¸ªä¸¥è°¨çš„å·¥ç¨‹å¸ˆï¼Œå¬åˆ°â€œåŸºæœ¬â€è¿™ä¸¤ä¸ªå­—ä½ å¯èƒ½å¿ƒé‡Œä¸€é¢¤ã€‚åˆ«æ…Œï¼Œæ¥ä¸‹æ¥æˆ‘å°±å¸¦ä½ ä¸€èµ·çœ‹ä¸€ä¸‹ï¼Œè¿™ä¸ªåŸºæœ¬åˆ°åº•æ˜¯æ€ä¹ˆå›äº‹å„¿ã€‚</p><p>GFSçš„è®°å½•è¿½åŠ çš„å†™å…¥è¿‡ç¨‹ï¼Œå’Œä¸Šä¸€è®²çš„æ•°æ®å†™å…¥å‡ ä¹ä¸€æ ·ã€‚å®ƒä»¬ä¹‹é—´çš„å·®åˆ«ä¸»è¦åœ¨äºï¼ŒGFSå¹¶ä¸ä¼šæŒ‡å®šåœ¨chunkçš„å“ªä¸ªä½ç½®ä¸Šå†™å…¥æ•°æ®ï¼Œè€Œæ˜¯å‘Šè¯‰æœ€åä¸€ä¸ªchunkæ‰€åœ¨çš„ä¸»å‰¯æœ¬æœåŠ¡å™¨ï¼Œâ€œæˆ‘â€è¦è¿›è¡Œè®°å½•è¿½åŠ ã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼Œä¸»å‰¯æœ¬æ‰€åœ¨çš„chunkserverä¼šåšè¿™æ ·å‡ ä»¶äº‹æƒ…ï¼š</p><ol>\n<li>æ£€æŸ¥å½“å‰çš„chunkæ˜¯ä¸æ˜¯å¯ä»¥å†™å¾—ä¸‹ç°åœ¨è¦è¿½åŠ çš„è®°å½•ã€‚å¦‚æœå†™å¾—ä¸‹ï¼Œé‚£ä¹ˆå°±æŠŠå½“å‰çš„è¿½åŠ è®°å½•å†™è¿›å»ï¼ŒåŒæ—¶ï¼Œè¿™ä¸ªæ•°æ®å†™å…¥ä¹Ÿä¼šå‘é€ç»™å…¶ä»–æ¬¡å‰¯æœ¬ï¼Œåœ¨æ¬¡å‰¯æœ¬ä¸Šä¹Ÿå†™ä¸€éã€‚</li>\n<li>å¦‚æœå½“å‰chunkå·²ç»æ”¾ä¸ä¸‹äº†ï¼Œé‚£ä¹ˆå®ƒå…ˆä¼šæŠŠå½“å‰chunkå¡«æ»¡ç©ºæ•°æ®ï¼Œå¹¶ä¸”è®©æ¬¡å‰¯æœ¬ä¹Ÿä¸€æ ·å¡«æ»¡ç©ºæ•°æ®ã€‚ç„¶åï¼Œä¸»å‰¯æœ¬ä¼šå‘Šè¯‰å®¢æˆ·ç«¯ï¼Œè®©å®ƒåœ¨ä¸‹ä¸€ä¸ªchunkä¸Šé‡æ–°è¯•éªŒã€‚è¿™æ—¶å€™ï¼Œå®¢æˆ·ç«¯å°±ä¼šå»ä¸€ä¸ªæ–°çš„chunkæ‰€åœ¨çš„chunkserverè¿›è¡Œè®°å½•è¿½åŠ ã€‚</li>\n<li>å› ä¸ºä¸»å‰¯æœ¬æ‰€åœ¨çš„chunkserveræ§åˆ¶äº†æ•°æ®å†™å…¥çš„æ“ä½œé¡ºåºï¼Œå¹¶ä¸”æ•°æ®åªä¼šå¾€åè¿½åŠ ï¼Œæ‰€ä»¥å³ä½¿åœ¨æœ‰å¹¶å‘å†™å…¥çš„æƒ…å†µä¸‹ï¼Œè¯·æ±‚ä¹Ÿéƒ½ä¼šåˆ°ä¸»å‰¯æœ¬æ‰€åœ¨çš„åŒä¸€ä¸ªchunkserverä¸Šæ’é˜Ÿï¼Œä¹Ÿå°±ä¸ä¼šæœ‰æ•°æ®å†™å…¥åˆ°åŒä¸€å—åŒºåŸŸï¼Œè¦†ç›–æ‰å·²ç»è¢«è¿½åŠ å†™å…¥çš„æ•°æ®çš„æƒ…å†µäº†ã€‚</li>\n<li>è€Œä¸ºäº†ä¿éšœchunké‡Œèƒ½å­˜çš„ä¸‹éœ€è¦è¿½åŠ çš„æ•°æ®ï¼ŒGFSé™åˆ¶äº†ä¸€æ¬¡è®°å½•è¿½åŠ çš„æ•°æ®é‡æ˜¯16MBï¼Œè€Œchunkserveré‡Œçš„ä¸€ä¸ªchunkçš„å¤§å°æ˜¯64MBã€‚æ‰€ä»¥ï¼Œåœ¨è®°å½•è¿½åŠ éœ€è¦åœ¨chunké‡Œå¡«ç©ºæ•°æ®çš„æ—¶å€™ï¼Œæœ€å¤šä¹Ÿå°±æ˜¯å¡«å…¥16MBï¼Œä¹Ÿå°±æ˜¯chunkserverçš„å­˜å‚¨ç©ºé—´æœ€å¤šä¼šæµªè´¹1/4ã€‚</li>\n</ol><p><img src=\"https://static001.geekbang.org/resource/image/44/0c/44440eb6b88c073763efdcb58e6f410c.jpg?wh=1920x1444\" alt=\"å›¾ç‰‡\"></p><p>é‚£ä¹ˆåˆ°äº†è¿™é‡Œï¼Œä½ å¯èƒ½è¦é—®äº†ï¼š<strong>å¦‚æœåœ¨ä¸»å‰¯æœ¬ä¸Šå†™å…¥æˆåŠŸäº†ï¼Œä½†æ˜¯åœ¨æ¬¡å‰¯æœ¬ä¸Šå†™å…¥å¤±è´¥äº†æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™æ ·ä¸æ˜¯è¿˜ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µå—ï¼Ÿ</strong></p><p>å…¶å®åœ¨è¿™ä¸ªæ—¶å€™ï¼Œä¸»å‰¯æœ¬ä¼šå‘Šè¯‰å®¢æˆ·ç«¯æ•°æ®å†™å…¥å¤±è´¥ï¼Œç„¶åè®©å®¢æˆ·ç«¯é‡è¯•ã€‚ä¸è¿‡å®¢æˆ·ç«¯å‘èµ·çš„é‡è¯•ï¼Œå¹¶ä¸æ˜¯åœ¨åŸæ¥çš„ä½ç½®å»å†™å…¥æ•°æ®ï¼Œè€Œæ˜¯å‘èµ·ä¸€ä¸ªæ–°çš„è®°å½•è¿½åŠ æ“ä½œã€‚è¿™ä¸ªæ—¶å€™ï¼Œå¯èƒ½å·²ç»æœ‰å…¶ä»–çš„å¹¶å‘è¿½åŠ å†™å…¥è¯·æ±‚æˆåŠŸäº†ï¼Œé‚£ä¹ˆè¿™æ¬¡é‡è¯•ä¼šå†™å…¥åˆ°æ›´åé¢ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä¸€èµ·æ¥çœ‹è¿™æ ·ä¸€ä¸ªä¾‹å­ï¼šæœ‰ä¸‰ä¸ªå®¢æˆ·ç«¯Xã€Yã€Zå¹¶å‘å‘åŒä¸€ä¸ªæ–‡ä»¶è¿›è¡Œè®°å½•è¿½åŠ ï¼Œå†™å…¥æ•°æ®Aã€Bã€Cï¼Œå¯¹åº”çš„ä¸‰ä¸ªå‰¯æœ¬çš„chunkserveråˆ†åˆ«æ˜¯Qã€Pã€Rã€‚</p><p>ä¸»å‰¯æœ¬å…ˆæ”¶åˆ°æ•°æ®Açš„è®°å½•è¿½åŠ ï¼Œåœ¨ä¸»å‰¯æœ¬å’Œæ¬¡å‰¯æœ¬ä¸Šè¿›è¡Œæ•°æ®å†™å…¥ã€‚åœ¨Aå†™å…¥çš„åŒæ—¶ï¼ŒBï¼ŒCçš„è®°å½•è¿½åŠ è¯·æ±‚ä¹Ÿæ¥äº†ï¼Œè¿™ä¸ªæ—¶å€™å†™å…¥ä¼šå¹¶è¡Œè¿›è¡Œï¼Œè¿½åŠ åœ¨Açš„åé¢ã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼ŒAçš„å†™å…¥åœ¨æŸä¸ªæ¬¡å‰¯æœ¬Rä¸Šå¤±è´¥äº†ï¼Œäºæ˜¯ä¸»å‰¯æœ¬å‘Šè¯‰å®¢æˆ·ç«¯å»é‡è¯•ï¼›åŒæ—¶ï¼Œå®¢æˆ·ç«¯å†æ¬¡å‘èµ·è®°å½•è¿½åŠ çš„é‡è¯•ï¼Œè¿™æ¬¡çš„æ•°æ®å†™å…¥ï¼Œä¸åœ¨AåŸæ¥çš„ä½ç½®ï¼Œè€Œä¼šæ˜¯åœ¨Cåé¢ã€‚</p><p>å¦‚æ­¤ä¸€æ¥ï¼Œåœ¨Bå’ŒCçš„å†™å…¥ï¼Œä»¥åŠAçš„é‡è¯•å®Œæˆä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š</p><ul>\n<li>åœ¨Qå’ŒPä¸Šï¼Œchunkserveré‡Œé¢çš„æ•°æ®é¡ºåºæ˜¯ A-B-C-Aï¼›</li>\n<li>ä½†æ˜¯åœ¨Rä¸Šï¼Œchunkserveré‡Œé¢çš„æ•°æ®é¡ºåºæ˜¯ N/A-B-C-Aï¼›</li>\n<li>ä¹Ÿå°±æ˜¯Qå’ŒPä¸Šï¼ŒAçš„æ•°æ®è¢«å†™å…¥äº†ä¸¤æ¬¡ï¼Œè€Œåœ¨Rä¸Šï¼Œæ•°æ®é‡Œé¢æœ‰ä¸€æ®µæ˜¯æœ‰ä¸å¯ç”¨çš„è„æ•°æ®ã€‚</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/d3/d9/d36e354c23d0312df6e06eb31d8de0d9.jpg?wh=1920x1444\" alt=\"å›¾ç‰‡\"></p><p>æ‰€ä»¥åœ¨è¿™ä¸ªè®°å½•è¿½åŠ çš„åœºæ™¯ä¸‹ï¼ŒGFSæ‰¿è¯ºçš„ä¸€è‡´æ€§ï¼Œå«åšâ€œ<strong>è‡³å°‘ä¸€æ¬¡ï¼ˆAt Least Onceï¼‰</strong>â€ã€‚ä¹Ÿå°±æ˜¯å†™å…¥ä¸€ä»½æ•°æ®Aï¼Œåœ¨é‡è¯•çš„æƒ…å†µä¸‹ï¼Œè‡³å°‘ä¼šå®Œæ•´åœ°åœ¨ä¸‰ä¸ªå‰¯æœ¬çš„åŒä¸€ä¸ªä½ç½®å†™å…¥ä¸€æ¬¡ã€‚ä½†æ˜¯ä¹Ÿå¯èƒ½ä¼šå› ä¸ºå¤±è´¥ï¼Œåœ¨æŸäº›å‰¯æœ¬é‡Œé¢å†™å…¥å¤šæ¬¡ã€‚é‚£ä¹ˆï¼Œåœ¨ä¸æ–­è¿½åŠ æ•°æ®çš„æƒ…å†µä¸‹ï¼Œä½ ä¼šçœ‹åˆ°å¤§éƒ¨åˆ†æ•°æ®éƒ½æ˜¯ä¸€è‡´çš„ï¼Œå¹¶ä¸”æ˜¯ç¡®å®šçš„ï¼Œä½†æ˜¯æ•´ä¸ªæ–‡ä»¶ä¸­ï¼Œä¼šå¤¹æ‚ç€å°‘æ•°ä¸ä¸€è‡´ä¹Ÿä¸ç¡®å®šçš„æ•°æ®ã€‚</p><h2>è§£å†³ä¸€è‡´æ€§çš„æœºåˆ¶</h2><p>çœ‹åˆ°è¿™é‡Œï¼Œä½ å‘ç°æ²¡æœ‰ï¼ŒGFSçš„å†™å…¥æ•°æ®çš„ä¸€è‡´æ€§ä¿éšœæ˜¯ç›¸å½“ä½çš„ã€‚å®ƒåªæ˜¯ä¿éšœäº†æ‰€æœ‰æ•°æ®è¿½åŠ è‡³å°‘è¢«å†™å…¥ä¸€æ¬¡ï¼Œå¹¶ä¸”è¿˜ä¿éšœä¸äº†æ•°æ®è¿½åŠ çš„é¡ºåºã€‚è¿™ä½¿å¾—å®¢æˆ·ç«¯è¯»å–åˆ°çš„å‰¯æœ¬ä¸­ï¼Œå¯èƒ½ä¹Ÿä¼šå­˜åœ¨é‡å¤çš„æ•°æ®æˆ–è€…ç©ºçš„å¡«å……æ•°æ®ï¼Œè¿™æ ·çš„æ–‡ä»¶ç³»ç»Ÿå®åœ¨ä¸å’‹æ ·ã€‚</p><p>ä¸è¿‡ï¼Œ<strong>è¿™ä¸ªâ€œè‡³å°‘ä¸€æ¬¡â€çš„æœºåˆ¶ï¼Œå…¶å®å¾ˆé€‚åˆGoogleçš„åº”ç”¨åœºæ™¯</strong>ã€‚ä½ æƒ³åƒä¸€ä¸‹ï¼Œå¦‚æœä½ æ˜¯ä¸€ä¸ªæœç´¢å¼•æ“ï¼Œä¸æ–­æŠ“å–ç½‘é¡µç„¶åå­˜åˆ°GFSä¸Šã€‚å…¶å®ä½ å¹¶ä¸ä¼šå¤ªåœ¨æ„è¿™ä¸ªç½‘é¡µä¿¡æ¯æ˜¯ä¸æ˜¯è¢«é‡å¤å­˜äº†ä¸¤æ¬¡ï¼Œä½ ä¹Ÿä¸å¤ªä¼šåœ¨æ„ä¸åŒçš„ä¸¤ä¸ªç½‘é¡µå­˜å‚¨çš„é¡ºåºã€‚è€Œä¸”å³ä½¿ä½ åœ¨æ„è¿™ä¸¤ç‚¹ï¼Œæ¯”å¦‚ä½ å­˜çš„ä¸æ˜¯ç½‘é¡µï¼Œè€Œæ˜¯ç”¨æˆ·çš„æœç´¢æ—¥å¿—æˆ–å¹¿å‘Šå±•ç¤ºå’Œç‚¹å‡»çš„æ—¥å¿—æ•°æ®ã€‚æˆ–è€…ä½ æ‹…å¿ƒæ•°æ®å†™å…¥å¤±è´¥ï¼Œå¸¦æ¥çš„æ˜¯éƒ¨åˆ†ä¸å®Œæ•´çš„æ•°æ®ï¼Œä¹Ÿæœ‰å¾ˆå¤šç®€å•çš„è§£å†³åŠæ³•ã€‚</p><p>äº‹å®ä¸Šï¼ŒGFSçš„å®¢æˆ·ç«¯é‡Œé¢è‡ªå¸¦äº†å¯¹å†™å…¥çš„æ•°æ®å»æ·»åŠ <strong>æ ¡éªŒå’Œ</strong>ï¼ˆchecksumï¼‰ï¼Œå¹¶åœ¨è¯»å–çš„æ—¶å€™è®¡ç®—æ¥éªŒè¯æ•°æ®å®Œæ•´æ€§çš„åŠŸèƒ½ã€‚è€Œå¯¹äºæ•°æ®å¯èƒ½é‡å¤å†™å…¥å¤šæ¬¡çš„é—®é¢˜ï¼Œä½ ä¹Ÿå¯ä»¥å¯¹æ¯ä¸€æ¡è¦å†™å…¥çš„æ•°æ®ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„IDï¼Œå¹¶ä¸”åœ¨é‡Œé¢å¸¦ä¸Šå½“æ—¶çš„æ—¶é—´æˆ³ã€‚è¿™æ ·ï¼Œå³ä½¿è¿™äº›æ—¥å¿—é¡ºåºä¸å¯¹ã€æœ‰é‡å¤ï¼Œä½ ä¹Ÿå¯ä»¥å¾ˆå®¹æ˜“åœ°åœ¨ä½ åç»­çš„æ•°æ®å¤„ç†ç¨‹åºä¸­ï¼Œé€šè¿‡è¿™ä¸ªIDè¿›è¡Œæ’åºå’Œå»é‡ã€‚</p><p>è€Œè¿™ä¸ªâ€œè‡³å°‘ä¸€æ¬¡â€çš„å†™å…¥æ¨¡å‹ä¹Ÿå¸¦æ¥äº†ä¸¤ä¸ªå·¨å¤§çš„å¥½å¤„ã€‚</p><p>ç¬¬ä¸€æ˜¯<strong>é«˜å¹¶å‘å’Œé«˜æ€§èƒ½</strong>ï¼Œè¿™ä¸ªè®¾è®¡ä½¿å¾—æˆ‘ä»¬å¯ä»¥æœ‰å¾ˆå¤šä¸ªå®¢æˆ·ç«¯å¹¶å‘å‘åŒä¸€ä¸ªGFSä¸Šçš„æ–‡ä»¶è¿›è¡Œè¿½åŠ å†™å…¥ï¼Œè€Œé«˜æ€§èƒ½æœ¬èº«ä¹Ÿæ˜¯æˆ‘ä»¬éœ€è¦åˆ†å¸ƒå¼ç³»ç»Ÿçš„èµ·ç‚¹ã€‚</p><p>ç¬¬äºŒæ˜¯<strong>ç®€å•</strong>ï¼ŒGFSé‡‡ç”¨äº†ä¸€ä¸ªéå¸¸ç®€å•çš„å•master serverï¼Œå¤šä¸ªchunkserveræ¶æ„ï¼Œæ‰€æœ‰çš„åè°ƒåŠ¨ä½œéƒ½ç”±masteræ¥åšï¼Œè€Œä¸éœ€è¦å¤æ‚çš„ä¸€è‡´æ€§æ¨¡å‹ã€‚æ¯•ç«Ÿï¼Œ2003å¹´æˆ‘ä»¬åªæœ‰æå…¶éš¾ä»¥è¯»æ‡‚çš„Paxosè®ºæ–‡ï¼ŒRaftè¿™æ ·çš„åˆ†å¸ƒå¼å…±è¯†ç®—æ³•è¦åœ¨10å¹´ä¹‹åçš„2013å¹´æ‰ä¼šè¯ç”Ÿã€‚è€Œç®€å•çš„æ¶æ„è®¾è®¡ï¼Œä½¿å¾—ç³»ç»Ÿä¸å®¹æ˜“å‡ºBugï¼Œå‡ºäº†å„ç§Bugä¹Ÿæ›´å®¹æ˜“ç»´æŠ¤ã€‚</p><p>è€Œå³ä½¿GFSé‡Œçš„æ•°æ®éšæœºå†™å…¥èƒ½å¤Ÿä¿éšœ<strong>ç¡®å®šæ€§</strong>ï¼Œåœ¨é‚£ä¸ªå¹´ä»£çš„å®ç”¨ä»·å€¼ä¹Ÿä¸é«˜ã€‚å› ä¸ºé‚£ä¸ªæ—¶å€™ï¼Œå¤§å®¶ç”¨çš„è¿˜éƒ½æ˜¯5400è½¬ï¼Œæˆ–è€…7200è½¬çš„æœºæ¢°ç¡¬ç›˜ã€‚å¦‚æœä½ è¯»è¿‡æˆ‘çš„<a href=\"https://time.geekbang.org/column/article/116104\">ã€Šæ·±å…¥æµ…å‡ºè®¡ç®—æœºç»„æˆåŸç†ã€‹</a>ï¼Œä½ ä¸€å®šè¿˜è®°å¾—æœºæ¢°ç¡¬ç›˜çš„IOPSä¹Ÿå°±æ˜¯åœ¨70å·¦å³ï¼Œå‡ ç™¾ä¸ªå®¢æˆ·ç«¯è¦æ˜¯å¹¶å‘å†™å…¥ä¸€ä¸ªä½ç½®ï¼Œç¡¬ç›˜æ ¹æœ¬æŠ—ä¸ä½ã€‚</p><p>å¯¹äºéšæœºæ•°æ®å†™å…¥çš„ä¸€è‡´æ€§ï¼Œæˆ‘ä¼šåœ¨åé¢Bigtableçš„è®ºæ–‡é‡Œï¼Œå†å¸¦ä½ çœ‹çœ‹Googleæ˜¯å¦‚ä½•åœ¨è¿™ä¸ªä¸å¯é çš„GFSä¸Šï¼Œæ¶èµ·ä¸€ä¸ªé«˜å¯ç”¨æ€§ã€å¯ä»¥éšæœºè¯»å†™çš„KVæ•°æ®åº“ã€‚</p><h2>å°ç»“</h2><p>å¥½äº†ï¼Œåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬é€šè¿‡ä¸‰è®²æŠŠGFSçš„è®ºæ–‡è®²å®Œäº†ã€‚åœ¨ä»Šå¤©çš„æœ€åä¸€è®²ä¸­ï¼Œæˆ‘ä»¬æ·±å…¥å‰–æäº†GFSéå¸¸å®½æ¾çš„ä¸€è‡´æ€§æ¨¡å‹ã€‚å¯¹äºéšæœºæ•°æ®å†™å…¥ï¼ŒGFSé’ˆå¯¹æˆåŠŸçš„å¹¶å‘å†™å…¥ï¼Œ<strong>åªä¿éšœä¸€è‡´æ€§ï¼Œä½†æ˜¯ä¸ä¿éšœç¡®å®šæ€§</strong>ã€‚</p><p>è€Œå¯¹äºè®°å½•è¿½åŠ è¿™æ ·ä¸“é—¨è®¾è®¡å‡ºæ¥çš„æ“ä½œï¼ŒGFSä¹Ÿ<strong>åªä¿éšœâ€œè‡³å°‘ä¸€æ¬¡â€çš„å†™å…¥</strong>ï¼Œé¿å…ä¸äº†ç¡®å®šçš„æ•°æ®ä¸­ï¼Œå¤¹æ‚ç€ä¸ä¸€è‡´å’Œä¸ç¡®å®šçš„è„æ•°æ®ã€‚è€Œè¿™äº›æ•°æ®ï¼Œéƒ½éœ€è¦ä½ é€šè¿‡æ ¡éªŒå’Œä¹ƒè‡³åº”ç”¨å±‚è‡ªè¡Œå»é‡æ¥è¿›è¡Œå¤„ç†ã€‚è¿™äº›è®¾è®¡å’Œæœºåˆ¶ï¼Œéƒ½æ˜¯å’ŒGFSé¢ä¸´çš„åº”ç”¨åœºæ™¯æ‰€åŒ¹é…çš„ï¼Œå³é«˜å¹¶å‘å¤§é‡è¿½åŠ å†™å…¥æ–°çš„æ—¥å¿—ã€ç½‘é¡µã€ç”Ÿæˆçš„ç´¢å¼•ç­‰ç­‰çš„åº”ç”¨åœºæ™¯ã€‚</p><p>å›é¡¾è¿‡å»ä¸‰è®²ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°GFSçš„è®¾è®¡åŸåˆ™ï¼Œå°±æ˜¯ç®€å•ã€å›´ç»•ç¡¬ä»¶æ€§èƒ½è®¾è®¡ï¼Œä»¥åŠåœ¨è¿™ä¸¤ä¸ªå‰æä¸‹å¯¹äºä¸€è‡´æ€§çš„å®½æ¾è¦æ±‚ã€‚å¯ä»¥è¯´ï¼ŒGFSä¸æ˜¯ä¸€ä¸ªâ€œé»‘ç§‘æŠ€â€ç³»ç»Ÿï¼Œè€Œæ˜¯<strong>ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„å·¥ç¨‹åŒ–ç³»ç»Ÿ</strong>ã€‚åœ¨åé¢çš„MapReduceä»¥åŠBigtableçš„è®ºæ–‡ä¸­ï¼Œæˆ‘ä»¬è¿˜ä¼šåå¤çœ‹åˆ°ç±»ä¼¼çš„è®¾è®¡é€‰æ‹©ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/0f/87/0f716aaaa4e182b8ddd2c26c8c919987.jpg?wh=1920x892\" alt=\"å›¾ç‰‡\"></p><h2>æ¨èé˜…è¯»</h2><p>ä»Šå¤©æˆ‘ä»¬æ‰€è®²çš„ï¼Œå…¶å®æ˜¯åœ¨å¤§æ•°æ®åŠåˆ†å¸ƒå¼é¢†åŸŸä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„ä¸»é¢˜ï¼Œé‚£å°±æ˜¯CAPé—®é¢˜ã€‚åœ¨ä¹‹åçš„å¾ˆå¤šè®ºæ–‡é‡Œï¼Œä½ ä¹Ÿå¯ä»¥çœ‹åˆ°ä¸åŒç³»ç»Ÿæ˜¯å¦‚ä½•å¤„ç†CAPé—®é¢˜å¸¦æ¥çš„æŒ‘æˆ˜çš„ã€‚åœ¨å­¦å®Œä»Šå¤©è¿™èŠ‚è¯¾ä¹‹åï¼Œæˆ‘æ¯”è¾ƒæ¨èä½ å»è¯»ä¸€è¯»2012å¹´ï¼Œåœ¨CAPç†è®ºå‘è¡¨12å¹´åï¼Œä½œè€…åŸƒé‡Œå…‹Â·å¸ƒé²å°”ï¼ˆEric Brewerï¼‰å¯¹CAPé—®é¢˜çš„å›é¡¾æ–‡ç« <a href=\"http://www.infoq.com/cn/articles/cap-twelve-years-later-how-the-rules-have-changed\">ã€ŠCAPç†è®ºåäºŒå¹´å›é¡¾ï¼šâ€œè§„åˆ™â€å˜äº†ã€‹</a>ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æœ€åï¼Œæˆ‘ä»¬è¿˜æ˜¯æ¥é’ˆå¯¹ä»Šå¤©æ‰€å­¦çš„å†…å®¹ï¼Œæ¥æ€è€ƒä¸€ä¸ªç®€å•çš„é—®é¢˜ï¼šGFSçš„æ–‡ä»¶ï¼Œåªèƒ½ä¿éšœâ€œè‡³å°‘ä¸€æ¬¡â€çš„è¿½åŠ å†™å…¥ã€‚é‚£ä¹ˆï¼Œå¦‚æœæˆ‘ä»¬é€šè¿‡GFSçš„å®¢æˆ·ç«¯è¦å†™å…¥ä¸€éƒ¨ç”µå½±åˆ°GFSï¼Œç„¶åè¿‡ä¸€é˜µå†è¯»å‡ºæ¥ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥æœ‰å“ªäº›æ–¹å¼ï¼Œæ¥ä¿éšœè¿™ä¸ªç”µå½±è¯»å–ä¹‹åèƒ½å¤Ÿæ­£å¸¸æ’­æ”¾å‘¢ï¼Ÿ</p><p>æ— è®ºæ˜¯åœ¨è¯»ã€è¿˜æ˜¯å†™ã€è¿˜æ˜¯æ’­æ”¾çš„æ—¶å€™è¿›è¡ŒæŠ€æœ¯å¤„ç†çš„æ–¹æ³•ï¼Œä½ éƒ½å¯ä»¥åœ¨ç•™è¨€åŒºæå‡ºæ¥ï¼Œæˆ‘ä»¬ä¸€èµ·è®¨è®ºã€‚å¦‚æœè§‰å¾—æœ‰æ”¶è·ï¼Œæ¬¢è¿ä½ æŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p>","neighbors":{"left":{"article_title":"04 | The Google File System ï¼ˆäºŒï¼‰ï¼š å¦‚ä½•åº”å¯¹ç½‘ç»œç“¶é¢ˆï¼Ÿ","id":422468},"right":{"article_title":"06 | MapReduceï¼ˆä¸€ï¼‰ï¼šæºèµ·Unixçš„è®¾è®¡æ€æƒ³","id":423595}},"comments":[{"had_liked":false,"id":323821,"user_name":"thomas","can_delete":false,"product_type":"c1","uid":1016777,"ip_address":"","ucode":"9AB945308F1B50","user_header":"https://static001.geekbang.org/account/avatar/00/0f/83/c9/5d03981a.jpg","comment_is_top":false,"comment_ctime":1638174792,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"27407978568","product_id":100091101,"comment_content":"è€å¸ˆè¯·é—®ï¼š æœ¬èŠ‚ä»‹ç»çš„è¿½åŠ å†™ä¸ºä»€ä¹ˆæ²¡æœ‰ç”¨åˆ°ä¸Šä¸€èŠ‚è¯¾ä»‹ç»çš„æµæ°´çº¿å¼çš„æ•°æ®å­˜å‚¨ï¼Œè€Œæ˜¯ç”±ä¸»å‰¯æœ¬èŠ‚ç‚¹åˆ†åˆ«å‘æ¬¡å‰¯æœ¬èŠ‚ç‚¹åŒæ­¥ï¼Ÿ è€Œä¸”è¿½åŠ å†™æ˜¯GFSä¿å­˜æ•°æ®çš„ä¸»è¦æ–¹å¼ï¼Œé‚£ä¾ç„¶å­˜åœ¨ç½‘ç»œä¼ è¾“çš„ç“¶é¢ˆ","like_count":6,"discussions":[{"author":{"id":2314156,"avatar":"https://static001.geekbang.org/account/avatar/00/23/4f/ac/52ed0816.jpg","nickname":"å°æ˜","note":"","ucode":"E77B35315E3198","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572386,"discussion_content":"æ˜¯æ§åˆ¶æµåŒæ­¥ã€‚ä¾ç„¶æ˜¯ç“¶é¢ˆï¼Œä½†ç“¶é¢ˆå¯¹æ•°æ®å†™å…¥çš„åˆ¶çº¦å˜ä¸ºåŸæ¥çš„1/3","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1652757866,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":314437,"user_name":"å´å°æ™º","can_delete":false,"product_type":"c1","uid":1310798,"ip_address":"","ucode":"C7C9F58B5C9F7B","user_header":"https://static001.geekbang.org/account/avatar/00/14/00/4e/be2b206b.jpg","comment_is_top":false,"comment_ctime":1633056649,"is_pvip":false,"replies":[{"id":"113908","content":"å¯¹äºæ•°æ®å®Œæ•´æ€§å’Œæ ¡éªŒçš„åŸºæœ¬é—®é¢˜ï¼Œå¯ä»¥å»çœ‹ã€Œæ·±å…¥æµ…å‡ºè®¡ç®—æœºç»„æˆåŸç†ã€é‡Œé¢çš„49å’Œ50ä¸¤è®²ã€‚<br><br>å…³äºGFSæˆ‘ç®€å•å›å•ä¸€ä¸‹ï¼š<br><br>GFSå…¶å®åŒ…æ‹¬åé¢çš„BigTableè¿™äº›æ•°æ®éƒ½æ˜¯ç”¨ç±»ä¼¼çš„æ–¹å¼æ¥ä¿éšœ Data Integrityã€‚<br><br>* æŠŠæ•°æ®æŒ‰ç…§å›ºå®šå°ºå¯¸æ‰“åŒ…ï¼Œæ¯”å¦‚GFSé‡Œå°±æ˜¯64Kå¤§å°ä¸€ä¸ªåŒ…<br>* é’ˆå¯¹è¿™ä¸ªåŒ…è®¡ç®—ä¸€ä¸ªChecksuméªŒè¯ç ï¼Œé€šå¸¸ç”¨CRC33<br>* ç„¶åè¯»çš„æ—¶å€™ä¼šæ ¡éªŒï¼Œå‘ç°æ•°æ®å’Œæ ¡éªŒç ä¸ä¸€è‡´ï¼Œå°±è®¤ä¸ºData Corruptedï¼Œç„¶åä»åˆ«çš„å‰¯æœ¬æ‹¿åˆ°æ­£ç¡®çš„æ•°æ®<br><br>è¿™ä¸ªäº‹æƒ…chunkserverä¸éœ€è¦ä»»ä½•é¢å¤–ä¿¡æ¯ï¼Œåªéœ€è¦æœ¬åœ°çš„æ•°æ®å°±å¥½äº†ï¼Œæ‰€ä»¥å«ç‹¬ç«‹æ£€æŸ¥æ•°æ®çš„å®Œæ•´æ€§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1633162594,"ip_address":"","comment_id":314437,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23107893129","product_id":100091101,"comment_content":"è€å¸ˆèƒ½å¦æŠ½æ—¶é—´è®²ä¸€ä¸‹ GFS ä¸­ 5.2 Data Integrity ç« èŠ‚å…³äºæ•°æ®å®Œæ•´æ€§çš„å†…å®¹ï¼Œè®ºæ–‡è¯´æ˜¯ä¸åŒçš„ chunkserver ç‹¬ç«‹æ£€æŸ¥æ•°æ®çš„å®Œæ•´æ€§ï¼Œä¸æ€ä¹ˆçœ‹æ‡‚ï¼Œè€å¸ˆèƒ½å¦è§£ç­”ä¸‹ã€‚","like_count":6,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527682,"discussion_content":"å¯¹äºæ•°æ®å®Œæ•´æ€§å’Œæ ¡éªŒçš„åŸºæœ¬é—®é¢˜ï¼Œå¯ä»¥å»çœ‹ã€Œæ·±å…¥æµ…å‡ºè®¡ç®—æœºç»„æˆåŸç†ã€é‡Œé¢çš„49å’Œ50ä¸¤è®²ã€‚\n\nå…³äºGFSæˆ‘ç®€å•å›å•ä¸€ä¸‹ï¼š\n\nGFSå…¶å®åŒ…æ‹¬åé¢çš„BigTableè¿™äº›æ•°æ®éƒ½æ˜¯ç”¨ç±»ä¼¼çš„æ–¹å¼æ¥ä¿éšœ Data Integrityã€‚\n\n* æŠŠæ•°æ®æŒ‰ç…§å›ºå®šå°ºå¯¸æ‰“åŒ…ï¼Œæ¯”å¦‚GFSé‡Œå°±æ˜¯64Kå¤§å°ä¸€ä¸ªåŒ…\n* é’ˆå¯¹è¿™ä¸ªåŒ…è®¡ç®—ä¸€ä¸ªChecksuméªŒè¯ç ï¼Œé€šå¸¸ç”¨CRC33\n* ç„¶åè¯»çš„æ—¶å€™ä¼šæ ¡éªŒï¼Œå‘ç°æ•°æ®å’Œæ ¡éªŒç ä¸ä¸€è‡´ï¼Œå°±è®¤ä¸ºData Corruptedï¼Œç„¶åä»åˆ«çš„å‰¯æœ¬æ‹¿åˆ°æ­£ç¡®çš„æ•°æ®\n\nè¿™ä¸ªäº‹æƒ…chunkserverä¸éœ€è¦ä»»ä½•é¢å¤–ä¿¡æ¯ï¼Œåªéœ€è¦æœ¬åœ°çš„æ•°æ®å°±å¥½äº†ï¼Œæ‰€ä»¥å«ç‹¬ç«‹æ£€æŸ¥æ•°æ®çš„å®Œæ•´æ€§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633162594,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1131300,"avatar":"https://static001.geekbang.org/account/avatar/00/11/43/24/3f9f7c70.jpg","nickname":"zixuan","note":"","ucode":"C72920DD05B074","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542412,"discussion_content":"5.2è¯´çš„æ˜¯æ—¶é—´é•¿äº†åŸæœ¬å¥½çš„æ•°æ®åäº†çš„æƒ…å†µï¼Œå’Œè¿™é‡Œè¯´çš„åº”ç”¨å±‚æ ¡éªŒï¼ˆå†™å¤±è´¥ã€paddingã€è¢«è¦†ç›–ç­‰ï¼‰è¿˜ä¸æ˜¯ä¸€ä¸ªåœºæ™¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640745617,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":314136,"user_name":"å³°","can_delete":false,"product_type":"c1","uid":1056019,"ip_address":"","ucode":"C53CB64E8E7D19","user_header":"https://static001.geekbang.org/account/avatar/00/10/1d/13/31ea1b0b.jpg","comment_is_top":false,"comment_ctime":1632874618,"is_pvip":true,"replies":[{"id":"113885","content":"ğŸ‘<br>è¿™æ˜¯ä¸€ä¸ªåˆç†çš„æ€è·¯ï¼Œå°±æ˜¯åœ¨å†™çš„æ—¶å€™ä¿éšœï¼Œå¹¶ä¸”é€šè¿‡å…ƒæ•°æ®ç®¡ç†æ¥åšè¿™ä¸ªäº‹æƒ…ã€‚è¿™æ ·çš„è¯ï¼Œä¹Ÿèƒ½å¤Ÿåˆ†æ®µå¹¶è¡Œå†™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1633154752,"ip_address":"","comment_id":314136,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18812743802","product_id":100091101,"comment_content":"å¦‚æœåœ¨å†™å…¥æ—¶å°±ä¿è¯æ–‡ä»¶æ˜¯okçš„ï¼Œé‚£ä¹ˆå°±æ˜¯è¦åšä¸ªå¤±è´¥é‡è¯•ï¼Œå³ï¼Œå†™å…¥å¤±è´¥å°±æ•´ä¸ªæ”¾å¼ƒé‡æ–°å†™ä¸€ä¸ªæ–‡ä»¶ã€‚<br>å¦ä¸€ä¸ªæ€è·¯æ˜¯ï¼Œè®°å½•ä¸‹æ¯æ¬¡å‘å…¶å†™å…¥è¯·æ±‚æ˜¯å¤±è´¥è¿˜æ˜¯æˆåŠŸï¼Œä»¥åŠæ¯æ¬¡å†™å…¥çš„å¤§å°ï¼Œä¹Ÿå°±å½¢æˆäº†ä¸€ä¸ªlistï¼ˆæˆåŠŸå¤±è´¥ï¼Œå†™å…¥å¤§å°ï¼‰æ¯æ¬¡è¯»ç”µå½±æ–‡ä»¶çš„æ—¶å€™ï¼Œå°±å¯ä»¥æ ¹æ®è¿™ä¸ªä¿¡æ¯ï¼Œè¯»æ–‡ä»¶äº†ï¼Œæ¯”å¦‚å¼€å§‹è¯»å¤±è´¥äº†ï¼Œæ‰€ä»¥è·³è¿‡è¿™æ¬¡å†™å…¥å¤§å°ï¼Œè¯»æˆåŠŸäº†ï¼Œåˆ™è¯»å–è¿™æ¬¡å†™å…¥å¤§å°ã€‚ æ€ä¹ˆä¿å­˜è¿™ä¸ªä¿¡æ¯å­˜çš„æ˜¯okçš„ï¼Œåˆå¯ä»¥ä¸“é—¨ä¸ºgfsï¼Œè®¾è®¡ä¸€ç§æ–‡ä»¶æ ¼å¼æ¥ä¿è¯æˆ–è€…å½“ä½œæ–‡ä»¶çš„å…ƒæ•°æ®ä¿¡æ¯å­˜å…¥masterï¼ˆå½“ç„¶ä¸æ˜¯å¥½æ€è·¯ï¼‰ã€‚<br><br>","like_count":5,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527584,"discussion_content":"ğŸ‘\nè¿™æ˜¯ä¸€ä¸ªåˆç†çš„æ€è·¯ï¼Œå°±æ˜¯åœ¨å†™çš„æ—¶å€™ä¿éšœï¼Œå¹¶ä¸”é€šè¿‡å…ƒæ•°æ®ç®¡ç†æ¥åšè¿™ä¸ªäº‹æƒ…ã€‚è¿™æ ·çš„è¯ï¼Œä¹Ÿèƒ½å¤Ÿåˆ†æ®µå¹¶è¡Œå†™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633154752,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":329369,"user_name":"Amon Tin","can_delete":false,"product_type":"c1","uid":2618193,"ip_address":"","ucode":"25391BEEB6A719","user_header":"https://static001.geekbang.org/account/avatar/00/27/f3/51/c8eb2d0c.jpg","comment_is_top":false,"comment_ctime":1641302965,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"14526204853","product_id":100091101,"comment_content":"â€œå®¢æˆ·ç«¯å¯èƒ½è¯»å‡ºæ¥çš„æ•°æ®é‡Œï¼Œå‰ä¸€å°æ—¶æ˜¯ã€Šæ˜Ÿçƒå¤§æˆ˜ã€‹ï¼Œåä¸€å°æ—¶æ˜¯ã€Šæ˜Ÿé™…è¿·èˆªã€‹ã€‚â€<br>æˆ‘ç†è§£è¿™ä¸ªé—®é¢˜æ˜¯å› ä¸ºåœ¨å¹¶å‘éšæœºå†™çš„åœºæ™¯ä¸‹ï¼Œä¸¤ä¸ªå®¢æˆ·ç«¯ä»masteræ‹¿åˆ°çš„å†™å…¥chunk handleå’Œå†™å…¥çš„åç§»ä½ç½®æ˜¯ç›¸åŒçš„ï¼Œè™½ç„¶ä¸»å‰¯æœ¬åœ¨å†™å…¥ç¼“å­˜åŒºæ—¶å¯¹å¤šä¸ªå®¢æˆ·ç«¯çš„å†™å…¥é¡ºåºåšäº†æ’åºï¼Œä½†ç”±äºè¿™ä¸¤ä¸ªå†™å…¥æ“ä½œéƒ½æŒ‡å®šäº†æ˜¯è¦å¾€åŒä¸€ä¸ªåç§»ä½ç½®å†™ï¼Œæ‰€ä»¥ä¸ç®¡æ’åºç»“æœæ˜¯å…ˆæ‰§è¡Œã€Šæ˜Ÿçƒå¤§æˆ˜ã€‹çš„å†™å…¥ï¼Œè¿˜æ˜¯å…ˆæ‰§è¡Œã€Šæ˜Ÿé™…è¿·èˆªã€‹çš„å†™å…¥ï¼Œä»–ä»¬éƒ½ä¸€å®šä¼šå†™åˆ°åŒä¸€ä¸ªåç§»ä½ç½®ä¸Šï¼Œå¯¼è‡´æ•°æ®è¢«è¦†ç›–ã€‚<br>è€Œè¿½åŠ å†™å…¥è¿‡ç¨‹ä¸­ï¼Œå®¢æˆ·ç«¯ä¸éœ€è¦è·å–å…·ä½“çš„å†™å…¥åç§»ä½ç½®ï¼Œæ‰€ä»¥ä¸»å‰¯æœ¬åœ¨å¯¹å¤šä¸ªå†™å…¥è¯·æ±‚æ’åºåï¼Œä¸€å®šä¼šä¿è¯åå†™å…¥çš„æ˜¯è¿½åŠ åœ¨å…ˆå†™å…¥çš„åç§»ä½ç½®ä¹‹åçš„ï¼Œå°±ä¸ä¼šå†™å…¥è¦†ç›–çš„æƒ…å†µå‘ç”Ÿã€‚<br>ä¸çŸ¥é“æˆ‘çš„ç†è§£æ­£ä¸æ­£ç¡®ã€‚","like_count":4},{"had_liked":false,"id":316995,"user_name":"thomas","can_delete":false,"product_type":"c1","uid":1016777,"ip_address":"","ucode":"9AB945308F1B50","user_header":"https://static001.geekbang.org/account/avatar/00/0f/83/c9/5d03981a.jpg","comment_is_top":false,"comment_ctime":1634635142,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"14519537030","product_id":100091101,"comment_content":"ä¸ºä»€ä¹ˆè¦ç»™ç©ºé—´ä¸è¶³çš„chunk å¡«æ»¡ç©ºæ•°æ®åï¼Œå†å¯»æ‰¾ä¸‹ä¸€ä¸ªchunk?   ä¸å¡«å……ç©ºæ•°æ®æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1096652,"avatar":"https://static001.geekbang.org/account/avatar/00/10/bb/cc/fac12364.jpg","nickname":"xxx","note":"","ucode":"E79CEA70430449","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531197,"discussion_content":"æˆ‘çŒœchunk åœ¨ç£ç›˜ä¸Šæ˜¯è¿ç»­å­˜å‚¨çš„ï¼Œæ‰€ä»¥å¯ä»¥æ ¹æ®åç§»é‡å¾ˆå¿«åœ°å®šä½ã€‚ä½ ä¸å¡«å……çš„è¯ï¼Œé‚£å°±ä¹±äº†ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1637247130,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":315794,"user_name":"å·å·","can_delete":false,"product_type":"c1","uid":1382517,"ip_address":"","ucode":"DA092CAC7F294D","user_header":"https://static001.geekbang.org/account/avatar/00/15/18/75/68487e89.jpg","comment_is_top":false,"comment_ctime":1634003077,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10223937669","product_id":100091101,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæœ‰ä¸€ç‚¹æˆ‘æ„Ÿè§‰ç‰¹åˆ«ä¸ç†è§£ã€‚æ–‡ç« è¯´åˆ°GFSé‡‡ç”¨è¿½åŠ çš„æ–¹å¼ä¸€æ¬¡æœ€å¤š16MBï¼Œä½†ç”±äºæœ€åä¸€ä¸ªchunkå¾ˆå¯èƒ½å‰©ä½™ç©ºé—´å°äº64Mï¼Œè¿™æ„å‘³ç€æŸä¸€ä»½æ•°æ®å•ä¸ªchunkä¼šåˆ†å¸ƒåœ¨chunkserverçš„å¤šä¸ªç‰©ç†çš„chunkæ–‡ä»¶ä¸Šã€‚è¿™é‡Œæ˜¯å¦åº”è¯¥æœ‰ä¸¤ä¸ªæ¦‚å¿µï¼š<br>1.æˆ‘ä»¬éœ€è¦å­˜å‚¨çš„æ•°æ®è¢«æ‹†åˆ†æˆäº†å¹³å‡å¤§å°64MBçš„é€»è¾‘chunk<br>2.chunkserverä¸­çš„chunkæ–‡ä»¶å®é™…ä¸Šæ˜¯æ¯ä¸ª64MB<br>ç»“è®ºï¼šæ—¢ç„¶é‡‡ç”¨è¿½åŠ çš„æ–¹å¼æ˜¯ä¸æ˜¯èƒ½å¤Ÿè¯´æ˜æˆ‘çš„ç–‘æƒ‘ï¼Œå•ä¸ªé€»è¾‘chunkæ•°æ®å®é™…ä¸Šä¼šåˆ†å¸ƒåœ¨chunkserverä¸¤ä¸ªè¿ç»­çš„chunkæ–‡ä»¶ä¸Šã€‚é‚£è¿™æ ·å…ƒæ•°æ®å®é™…ä¸Šä¹Ÿä¼šå­˜é€»è¾‘chunkåœ¨æŒ‡å®šchunkæ–‡ä»¶çš„startå’Œoffset","like_count":2},{"had_liked":false,"id":314200,"user_name":"zhanyd","can_delete":false,"product_type":"c1","uid":1073845,"ip_address":"","ucode":"4C994EE512A3C4","user_header":"https://static001.geekbang.org/account/avatar/00/10/62/b5/4159fa05.jpg","comment_is_top":false,"comment_ctime":1632895888,"is_pvip":false,"replies":[{"id":"113921","content":"è¿™ä»½åˆ†ç»„ä¼ è¾“çš„æ–¹å¼çš„ç¡®æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„åŠæ³•","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1633164907,"ip_address":"","comment_id":314200,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10222830480","product_id":100091101,"comment_content":"å¦‚æœæˆ‘ä»¬é€šè¿‡ GFS çš„å®¢æˆ·ç«¯è¦å†™å…¥ä¸€éƒ¨ç”µå½±åˆ° GFSï¼Œç„¶åè¿‡ä¸€é˜µå†è¯»å‡ºæ¥ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥æœ‰å“ªäº›æ–¹å¼ï¼Œæ¥ä¿éšœè¿™ä¸ªç”µå½±è¯»å–ä¹‹åèƒ½å¤Ÿæ­£å¸¸æ’­æ”¾å‘¢ï¼Ÿ<br><br>å¯ä»¥æŒ‰ç…§è€å¸ˆè¯´çš„ï¼Œç»™æ¯ä¸€æ¡è¦å†™å…¥çš„æ•°æ®ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„IDï¼Œå¹¶ä¸”åœ¨é‡Œé¢å¸¦ä¸Šå½“æ—¶çš„æ—¶é—´æˆ³ï¼Œè¯»å–çš„æ—¶å€™å†æŒ‰IDçš„é¡ºåºå»é‡è¯»å–å³å¯ã€‚<br>","like_count":3,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527610,"discussion_content":"è¿™ä»½åˆ†ç»„ä¼ è¾“çš„æ–¹å¼çš„ç¡®æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„åŠæ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633164907,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":348334,"user_name":"ç¨»è‰äºº","can_delete":false,"product_type":"c1","uid":1033871,"ip_address":"","ucode":"672A78A5760B65","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c6/8f/a1504d13.jpg","comment_is_top":false,"comment_ctime":1655003665,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5949970961","product_id":100091101,"comment_content":"â€œè‡³å°‘ä¸€æ¬¡â€é‚£é‡Œ1ã€äº§ç”Ÿçš„è„æ•°æ®å¦‚ä½•å¤„ç†çš„å‘¢ï¼Ÿ æ˜¯å¦ä¼šé€ æˆç©ºé—´æµªè´¹ï¼›2ã€å¦å¤–çš„ä¸¤ä¸ªå¹¶å‘å®¢æˆ·ç«¯ä¹Ÿäº§ç”Ÿäº†æ•°æ®ï¼Œè¿™éƒ¨åˆ†æ•°æ®ä¹Ÿæ˜¯æ²¡ç”¨çš„ï¼Œåˆæ˜¯æ€ä¹ˆå¤„ç†çš„å‘¢ï¼Ÿ","like_count":1},{"had_liked":false,"id":347653,"user_name":"Chloe","can_delete":false,"product_type":"c1","uid":1004953,"ip_address":"","ucode":"C4848ED5B35752","user_header":"https://static001.geekbang.org/account/avatar/00/0f/55/99/4bdadfd3.jpg","comment_is_top":false,"comment_ctime":1654253863,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5949221159","product_id":100091101,"comment_content":"ä¸ªäººæ„Ÿè§‰ï¼Œä»è¿™ç¯‡å¼€å§‹ï¼Œéœ€è¦å¤šè¯»å‡ éæ–‡ç« ï¼Œæ‰èƒ½æ¶ˆåŒ–ï¼Œå¤§å®¶è§‰å¾—å‘¢ï¼Ÿ","like_count":1},{"had_liked":false,"id":322305,"user_name":"æ ¸æ¡ƒ","can_delete":false,"product_type":"c1","uid":1385204,"ip_address":"","ucode":"7AB05270CBCCCB","user_header":"https://static001.geekbang.org/account/avatar/00/15/22/f4/9fd6f8f0.jpg","comment_is_top":false,"comment_ctime":1637294019,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5932261315","product_id":100091101,"comment_content":"è¿™é‡Œé‡å¤å†™ä¼šå¸¦æ¥å†™æ”¾å¤§é—®é¢˜ï¼Œå¦å¤–ä¸€è‡´æ€§çš„è¦æ±‚å§ï¼Œç°åœ¨å¾ˆå¤šå·²ç»æ²¡æœ‰è¦æ±‚æ‰€æœ‰å‰¯æœ¬éƒ½æˆåŠŸæ‰ç®—æˆåŠŸçš„ã€‚åƒelasticsearchçš„è¯ï¼Œå¯ä»¥åªè¦æ±‚ä¸»å‰¯æœ¬æˆåŠŸå°±ç®—æˆåŠŸäº†ï¼Œå¹¶ä¸”å†™å…¥æ˜¯å¼‚æ­¥çš„ï¼Œå¯¹ä¸€è‡´æ€§è¦æ±‚éå¸¸å®½æ¾äº†ï¼Œä½†æ˜¯å¸¦æ¥éå¸¸å¤šå™©æ¢¦èˆ¬çš„éš¾é¢˜ï¼Œä¾‹å¦‚ä¸»å‰¯æœ¬å†™å…¥çš„æ—¶å€™ï¼Œæ°å¥½å‘ç”Ÿäº†leaderåˆ‡æ¢ï¼Œå¯¼è‡´äº‹åŠ¡æ ¡éªŒé€»è¾‘å°±éå¸¸å¤æ‚äº†ï¼Œç”šè‡³ä¼šå‡ºç°äº’ç›¸åˆ é™¤å¯¹æ–¹æ–‡ä»¶çš„æƒ…å†µã€‚","like_count":1},{"had_liked":false,"id":314209,"user_name":"åœ¨è·¯ä¸Š","can_delete":false,"product_type":"c1","uid":1402511,"ip_address":"","ucode":"6E31908EFE1107","user_header":"https://static001.geekbang.org/account/avatar/00/15/66/8f/02be926d.jpg","comment_is_top":false,"comment_ctime":1632899794,"is_pvip":false,"replies":[{"id":"113924","content":"åœ¨è¯»å–æ•°æ®çš„æ—¶å€™æ’åºä¸æ˜¯ä¸€ä¸ªå¥½åŠæ³•ï¼Œä¸»è¦æ˜¯ç”µå½±è¿™ä¹ˆå¤§çš„æ•°æ®è‚¯å®šæ˜¯æµå¼ä¼ è¾“è·å–ï¼Œä¸å¤ªå¯èƒ½å…¨éƒ½è¯»è¿‡æ¥æ’åºã€‚<br><br>ä¸è¿‡åˆ†ç»„ç»„è£…çš„æ€è·¯æ˜¯æ²¡é”™çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1633165259,"ip_address":"","comment_id":314209,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5927867090","product_id":100091101,"comment_content":"å¾è€å¸ˆå¥½ï¼Œéå¸¸æ„Ÿè°¢å¯¹CAPé—®é¢˜çš„åˆ†äº«ï¼Œå¸Œæœ›èƒ½å¤šåˆ†äº«ä¸€äº›ä¸­æ–‡èµ„æ–™ã€‚å›ç­”è€å¸ˆçš„é—®é¢˜ï¼Œå¦‚æœä¿è¯ä¸€éƒ¨ç”µå½±å†™å…¥GFSä¹‹åï¼Œè¯»å‡ºæ¥èƒ½æ­£å¸¸æ’­æ”¾ï¼Ÿå¯ä»¥å°†ç”µå½±æ•°æ®æ‹†åˆ†æˆkä»½ï¼Œæ¯ä¸€ä»½çš„å¤§å°å°äºGFSå•æ¬¡è¿½åŠ çš„æ•°æ®ï¼Œåœ¨æ¯ä¸€ä»½æ•°æ®å‰é¢å¢åŠ ç”µå½±ç¼–å·å’Œæ•°æ®å—ç¼–å·ï¼Œä»¥ä¾¿åœ¨è¯»å–æ—¶é‡æ–°ç»„è£…æ•°æ®ã€‚å¦‚æœæ•°æ®é¡ºåºå†™å…¥GFSï¼Œè¯»å–æ—¶åªéœ€è¦å»é‡ï¼Œå¦‚æœæ•°æ®å¹¶å‘å†™å…¥GFSï¼Œè¯»å–æ—¶æ—¢éœ€è¦å»é‡ï¼Œä¹Ÿéœ€è¦é‡æ’åºã€‚è€ƒè™‘åˆ°æ’­æ”¾ç”µå½±è¿™ä¸ªä¸šåŠ¡åœºæ™¯ï¼Œå¯ä»¥é‡‡ç”¨64ä½æ•°æ®ä¿å­˜ç”µå½±idï¼Œ32ä½æ•°æ®ä¿å­˜æ•°æ®å—ç¼–å·ï¼Œå‡æ‰è¿™12Bçš„æ•°æ®ï¼Œå‰©ä½™çš„æ•°æ®ï¼ˆ16MB-12Bï¼‰å­˜å‚¨ç”µå½±æ•°æ®ã€‚ç”µå½±é€šå¸¸æ˜¯é¡ºåºæ’­æ”¾çš„ï¼Œæ‰€ä»¥æ•°æ®æœ€å¥½é¡ºåºå†™å…¥GFSï¼Œä¾¿äºå¿«é€Ÿè¯»å–ç”µå½±æ¥ä¸‹æ¥çš„å†…å®¹ã€‚","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527614,"discussion_content":"åœ¨è¯»å–æ•°æ®çš„æ—¶å€™æ’åºä¸æ˜¯ä¸€ä¸ªå¥½åŠæ³•ï¼Œä¸»è¦æ˜¯ç”µå½±è¿™ä¹ˆå¤§çš„æ•°æ®è‚¯å®šæ˜¯æµå¼ä¼ è¾“è·å–ï¼Œä¸å¤ªå¯èƒ½å…¨éƒ½è¯»è¿‡æ¥æ’åºã€‚\n\nä¸è¿‡åˆ†ç»„ç»„è£…çš„æ€è·¯æ˜¯æ²¡é”™çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633165259,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356403,"user_name":"@","can_delete":false,"product_type":"c1","uid":2069664,"ip_address":"æµ™æ±Ÿ","ucode":"BD87484261ED85","user_header":"https://static001.geekbang.org/account/avatar/00/1f/94/a0/84342a0d.jpg","comment_is_top":false,"comment_ctime":1662269065,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1662269065","product_id":100091101,"comment_content":"è€å¸ˆ è¯·æ•™ä¸€ä¸‹ GFSçš„chunkserveræ˜¯å¦‚ä½•åŠ¨æ€æ‰©å±•çš„ æ–°æ·»åŠ ä¸€ä¸ªchunkserveræœåŠ¡å™¨åï¼Œä¹‹åçš„å†™æ•°æ®æ“ä½œæµç¨‹","like_count":0},{"had_liked":false,"id":337739,"user_name":"wy","can_delete":false,"product_type":"c1","uid":1064681,"ip_address":"","ucode":"41C1B304E7F032","user_header":"https://static001.geekbang.org/account/avatar/00/10/3e/e9/116f1dee.jpg","comment_is_top":false,"comment_ctime":1646998747,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1646998747","product_id":100091101,"comment_content":"è€å¸ˆï¼Œhdfsé‡Œé¢æœ‰ä¸€ä¸ªleaseï¼ˆå¥‘çº¦ï¼‰çš„æ¦‚å¿µï¼Œç¡®ä¿ä¸€ä¸ªæ–‡ä»¶åŒä¸€æ—¶å€™åªæœ‰ä¸€ä¸ªå®¢æˆ·ç«¯æœ‰æƒé™å»å†™ï¼Œè¿™ä¸ªç®—æ˜¯è§£å†³ä¸€è‡´æ€§é—®é¢˜çš„æ–¹æ³•å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2956164,"avatar":"","nickname":"Geek_718f9d","note":"","ucode":"4CB58AF9D99842","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558513,"discussion_content":"gfsé‡Œä¹Ÿæœ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648362382,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322243,"user_name":"Xiaosong","can_delete":false,"product_type":"c1","uid":1883431,"ip_address":"","ucode":"28A03027343F9D","user_header":"https://static001.geekbang.org/account/avatar/00/1c/bd/27/e653a220.jpg","comment_is_top":false,"comment_ctime":1637254680,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637254680","product_id":100091101,"comment_content":"æ‰€ä»¥gfsçš„å®¢æˆ·ç«¯æ˜¯ä¹Ÿåœ¨gfsæœºç¾¤é‡Œé¢çš„å—ï¼Œä¸ç„¶ä¸ºä»€ä¹ˆå¯ä»¥accessåˆ°é›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹","like_count":0},{"had_liked":false,"id":316545,"user_name":"Geek_025c6d","can_delete":false,"product_type":"c1","uid":2175778,"ip_address":"","ucode":"BE2A27DF6DB058","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJUDU5biaVLrseyIJ4mk4KojBD6N64tqHSX3SazM2eQsfqlic6Ppccgd41eq1eicEmE2WRWPjaHD6S9w/132","comment_is_top":false,"comment_ctime":1634379350,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634379350","product_id":100091101,"comment_content":"è¿˜æ²¡çœ‹è¯„è®ºï¼Œè¯´ä¸€ä¸‹æ€è€ƒé¢˜çš„æ€è·¯ï¼ŒæŠŠè¦å†™çš„ç”µå½±æ–‡ä»¶çš„å­—èŠ‚åºåˆ—æ‹†æˆå¤šä¸ªæ•°æ®å¸§ï¼Œè§„å®šæ¯ä¸ªæ•°æ®å¸§åŒ…æ‹¬äº†å†™æ–‡ä»¶æ—¶ç”Ÿæˆçš„ä¸€ä¸ªå…¨å±€å”¯ä¸€idï¼Œæ•°æ®æ®µçš„ç¼–å·ï¼Œæ•°æ®é•¿åº¦å’Œæ•°æ®ï¼Œè¿½åŠ å†™å…¥åˆ°æ–‡ä»¶ã€‚è¯»çš„æ—¶å€™æ‰¾å¯¹åº”çš„å”¯ä¸€idï¼ŒæŠŠæ‰€æœ‰æ•°æ®æ®µè¯»è¿›æ¥åæŒ‰æ•°æ®æ®µå·æ’åºå³å¯","like_count":0},{"had_liked":false,"id":315481,"user_name":"zart","can_delete":false,"product_type":"c1","uid":1148637,"ip_address":"","ucode":"E32677C0FD4421","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eomCrCRrLAWib0gMI2L2NbicMummlxOY6nVmphsDO0J3xx7OygNd8wJicc88RbNoHrcuXBsKLtCMvgFQ/132","comment_is_top":false,"comment_ctime":1633912753,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1633912753","product_id":100091101,"comment_content":"â€œè¿™ä½¿å¾—å®¢æˆ·ç«¯è¯»å–åˆ°çš„å‰¯æœ¬ä¸­ï¼Œå¯èƒ½ä¹Ÿä¼šå­˜åœ¨é‡å¤çš„æ•°æ®æˆ–è€…ç©ºçš„å¡«å……æ•°æ®ï¼Œè¿™æ ·çš„æ–‡ä»¶ç³»ç»Ÿå®åœ¨ä¸å’‹æ ·ã€‚â€<br>è¯·é—®è€å¸ˆè¿™ä¹ˆç†è§£å¯¹ä¸å¯¹ï¼šå¦‚æœç¬¬ä¸€æ¬¡æŸä¸ªå‰¯æœ¬å†™å¤±è´¥ï¼Œä¸»å‰¯æœ¬å‘Šè¯‰å®¢æˆ·ç«¯é‡è¯•ï¼Œä½†æ˜¯æ²¡æœ‰åŒæ­¥masterã€‚ç¬¬äºŒæ¬¡å†™å…¥å®¢æˆ·ç«¯æŠŠä¹‹å‰çš„äº¤äº’å†èµ°ä¸€éã€‚ç¬¬äºŒæ¬¡æˆåŠŸåï¼Œå…¶å®masterä¸­è®°å½•å†™äº†ä¸¤æ¬¡ã€‚ç­‰åˆ°å®¢æˆ·ç«¯è¯»çš„æ—¶å€™ï¼Œä¼šæŠŠè¿™ä¸¤æ¬¡çš„chunkä¿¡æ¯éƒ½å‘ç»™å®¢æˆ·ç«¯ï¼Œè¿™ä¸ªæ—¶å€™å®¢æˆ·ç«¯å°±å¯èƒ½è¯»åˆ°ç©ºæ•°æ®ã€‚","like_count":0},{"had_liked":false,"id":315176,"user_name":"å²æœˆå¦‚æ­Œ","can_delete":false,"product_type":"c1","uid":1428828,"ip_address":"","ucode":"1AEBD6F79941B7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/QFE00aXGzaS6ibbfJSJsDrpIkqs0OrIYjzZv6L9vZmMhOlut2j24iaeZb0MCQazToE6FRXN960nNiaTrsmw09YjGw/132","comment_is_top":false,"comment_ctime":1633741551,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633741551","product_id":100091101,"comment_content":"æ€è€ƒé¢˜: <br>ç¤ºä¾‹å¹¶å‘å†™å…¥A-B-Cï¼ŒAå†™å…¥å¤±è´¥æ­¤æ—¶å®¢æˆ·ç«¯å°†ä¼šé‡è¯•ã€‚<br>æ–¹å¼ä¸€ï¼š å¯åœ¨å®¢æˆ·ç«¯æ”¶åˆ°é‡è¯•æ¶ˆæ¯åï¼Œå‘matserå‘é€æ¶ˆæ¯å…ˆä½œåºŸå¤±è´¥å…ƒæ•°æ®ï¼Œå†å‘è¯·æ±‚å†™å…¥Aï¼Œä¿è¯matserä¸ä¼šä¿å­˜æ— æ•ˆå…ƒæ•°æ®ã€‚<br>æ–¹å¼äºŒï¼š å¯åœ¨å®¢æˆ·ç«¯æ‹¿åˆ°masteræ‰€æœ‰å…ƒæ•°æ®åæ£€æŸ¥æ£€éªŒå’Œç­‰æ–¹å¼ï¼ŒéªŒè¯å…ƒæ•°æ®çš„å®Œæ•´æ€§ï¼Œä¸ç¬¦åˆè¦æ±‚ç›´æ¥ä¸¢å¼ƒã€‚","like_count":0},{"had_liked":false,"id":315070,"user_name":"é™ˆè¿ª","can_delete":false,"product_type":"c1","uid":1019744,"ip_address":"","ucode":"1A64122CC47337","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8f/60/be0a8805.jpg","comment_is_top":false,"comment_ctime":1633679704,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1633679704","product_id":100091101,"comment_content":"æ„Ÿè§‰ä¸æ˜¯å¾ˆç†è§£è¿™ä¸ªæ€è€ƒé¢˜ã€‚å†™å…¥ä¸€éƒ¨ç”µå½±ï¼Œå°±è¿½åŠ å†™ï¼Œç„¶åå¤±è´¥é‡è¯•ï¼Œä¼šæœ‰å•¥é—®é¢˜ä¹ˆï¼Ÿ<br><br>chunkè¿½åŠ å†™å…¥éƒ¨åˆ†æœºå™¨å¤±è´¥å¯¼è‡´é‡è¯•ï¼Œè¿›è€Œå¯¼è‡´æŸäº›â€œæˆåŠŸâ€çš„æœºå™¨ä¸Šå­˜æœ‰â€œé‡å¤â€çš„chunkï¼Œè¿™ä¸ªå¯¹å®¢æˆ·ç«¯å¯è§ä¹ˆï¼Ÿåº”ç”¨ç¨‹åºéœ€è¦å¤„ç†è¿™ä¸ªé‡å¤å—ä¹ˆï¼Ÿæˆ‘æ„Ÿè§‰ä¸éœ€è¦å•Šï¼Œåº”è¯¥æ˜¯å…¨éƒ¨å†™å…¥æˆåŠŸæ‰åœ¨Masterä¸Šé¢çš„è®°å½•ä¸‹æ¥è¿™ä¸ªå—ä½ç½®å§ï¼Ÿä¸‹æ¬¡è¯»ï¼Œè™½ç„¶è¿™ä¸ªå—ç‰©ç†ä¸Šå­˜åœ¨åœ¨æœºå™¨ä¸Šï¼Œä½†æ˜¯å®¢æˆ·ç«¯é€šè¿‡å…ƒæ•°æ®æ˜¯çœ‹ä¸åˆ°è¿™ä¸ªå—çš„ã€‚<br>","like_count":0,"discussions":[{"author":{"id":1096652,"avatar":"https://static001.geekbang.org/account/avatar/00/10/bb/cc/fac12364.jpg","nickname":"xxx","note":"","ucode":"E79CEA70430449","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531201,"discussion_content":"æˆ‘è§‰å¾—å…ƒæ•°æ®ä¸­æ˜¯ä¼šæœ‰é‡å¤çš„ã€‚chunk serverå¹¶ä¸åŒºåˆ†ä¸€æ¬¡è¿½åŠ å†™å…¥æ˜¯é‡è¯•è¿˜æ˜¯æ–°å†™çš„ï¼Œè€Œæ˜¯éƒ½å½“ä½œæ–°å†™çš„ï¼Œæ‰€ä»¥å…ƒæ•°æ®ä¸­ä¼šæœ‰é‡å¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637247399,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":314901,"user_name":"é£ç¿”","can_delete":false,"product_type":"c1","uid":1068571,"ip_address":"","ucode":"65AF6AF292DAD6","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/1b/f4b786b9.jpg","comment_is_top":false,"comment_ctime":1633561263,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1633561263","product_id":100091101,"comment_content":"masterå‘Šè¯‰å®¢æˆ·ç«¯çš„ä¿¡æ¯æ˜¯å»å“ªä¸ªæœºå™¨çš„å“ªä¸ªchunkè¯» è¿˜æ˜¯ä»…ä»…æ˜¯å“ªä¸ªæœºå™¨ã€‚è®©chunkservierå†³å®šå†™åœ¨å“ªä¸ªchunkï¼Ÿ","like_count":0},{"had_liked":false,"id":314471,"user_name":"webmin","can_delete":false,"product_type":"c1","uid":1047014,"ip_address":"","ucode":"98B0CA882454E8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f9/e6/47742988.jpg","comment_is_top":false,"comment_ctime":1633099503,"is_pvip":true,"replies":[{"id":"113889","content":"ä¸å¤ªä¸€æ ·ï¼Œè¿½åŠ ä¸€æ¬¡ä¸æ˜¯ä¸€å®š16MBï¼Œæ˜¯æœ€å¤š16MBã€‚å®é™…å­˜å‚¨è¿˜æ˜¯è¿ç»­çš„ï¼Œæ¯”å¦‚ä½ å¯ä»¥è¿½åŠ ä¸€æ¡1KBçš„æ—¥å¿—ï¼Œä¸ç„¶ç©ºé—´åˆ©ç”¨ä¹Ÿå¤ªæµªè´¹äº†ã€‚<br><br>çš„ç¡®ï¼Œé€šè¿‡åˆ†ç»„ä¼ è¾“æ˜¯ä¸€ä¸ªå¸¸è§çš„è®¡ç®—æœºé¢†åŸŸçš„åŠæ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1633156193,"ip_address":"","comment_id":314471,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1633099503","product_id":100091101,"comment_content":"ä¸€ä¸ªchunkæœ‰64MBï¼Œè¿½åŠ ä¸€æ¬¡16MBï¼Œè¿™ä¸ªæ˜¯ä¸æ˜¯æœ‰ç‚¹åƒæ˜¯ä¸€ä¸ªåµŒå¥—æ•°ç»„ï¼Œç¬¬ä¸€ç»´å®šä½chunkï¼Œç¬¬äºŒç»´å®šä½æ¯æ¬¡è¿½åŠ å†™å…¥ï¼Œç®¡ç†æ–‡ä»¶å—ä¸ç®¡ç†å†…å­˜å—æ¯”è¾ƒç±»ä¼¼ã€‚<br>æ€è€ƒé¢˜ï¼š<br>å¯ä»¥å‚è€ƒTCPåè®®ï¼ŒTCPæ˜¯æµå¼åè®®ï¼Œå‘ç½‘ç»œå†™å…¥1MBï¼Œåœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­ï¼Œè¿™ä¸€1MBä¼šè¢«åˆ‡åˆ†ä¸ºè‹¥å¹²åŒ…ï¼Œåœ¨åŒ…å¤–å¥—ä¸Šä¸€å±‚TCPåè®®çš„å¤´ï¼Œå…¶ä¸­æœ‰Seqç­‰ä¿¡æ¯ï¼Œäº¤æ¢æœºåœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­æœ‰å¯èƒ½ä¼šé€šè¿‡å¤šæ¡è·¯å¾„æ¥ä¼ è¾“æ•°æ®ï¼Œæ•°æ®åˆ°è¾¾ç›®æ ‡æœºå™¨çš„å…ˆåé¡ºåºä¸ä¸€å®šå’Œå‘é€é¡ºåºä¸€è‡³ï¼ŒåŒ…åˆ°è¾¾ç›®æ ‡æœºå™¨åï¼Œå¦‚æœå‰åºè¿˜æœªè¾¾åˆ°ï¼ŒOSæ˜¯ä¸ä¼šè®©åº”ç”¨ç¨‹åºè¯»å–åˆ°è¿™äº›æ•°æ®çš„ï¼Œåªæœ‰SeqæŒ‰åºçš„åŒ…åˆ°è¾¾OSæ‰æä¾›ç»™åº”ç”¨ç¨‹åºï¼Œé‚£ä¹ˆåŒç†GFSä¹Ÿå¯ä»¥ç»™16MBçš„å—åŠ ä¸Šä¸€ä¸ªåè®®å¤´å…¶ä¸­å¯ä»¥åŒ…å«åºå·ç­‰ä¿¡æ¯ã€‚","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527690,"discussion_content":"ä¸å¤ªä¸€æ ·ï¼Œè¿½åŠ ä¸€æ¬¡ä¸æ˜¯ä¸€å®š16MBï¼Œæ˜¯æœ€å¤š16MBã€‚å®é™…å­˜å‚¨è¿˜æ˜¯è¿ç»­çš„ï¼Œæ¯”å¦‚ä½ å¯ä»¥è¿½åŠ ä¸€æ¡1KBçš„æ—¥å¿—ï¼Œä¸ç„¶ç©ºé—´åˆ©ç”¨ä¹Ÿå¤ªæµªè´¹äº†ã€‚\n\nçš„ç¡®ï¼Œé€šè¿‡åˆ†ç»„ä¼ è¾“æ˜¯ä¸€ä¸ªå¸¸è§çš„è®¡ç®—æœºé¢†åŸŸçš„åŠæ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633156193,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}