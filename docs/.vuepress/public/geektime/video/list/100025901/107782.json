{"id":107782,"title":"94 | 使用UserNotifications接收远程推送","content":"<p><strong>PDF 课件和源代码下载地址：</strong></p><p><a href=\"https://gitee.com/geektime-geekbang/geektime-ios-course\">https://gitee.com/geektime-geekbang/geektime-ios-course</a></p>","comments":[{"had_liked":false,"id":241944,"user_name":"晓冰","can_delete":false,"product_type":"c3","uid":1139231,"ip_address":"","ucode":"E0117E14E6BB8C","user_header":"https://static001.geekbang.org/account/avatar/00/11/62/1f/cd1cbdb1.jpg","comment_is_top":false,"comment_ctime":1597511864,"is_pvip":false,"replies":[{"id":90641,"content":"目前做不到哈 微信这个比较特殊 对普通app参考的价值不大","user_name":"作者回复","user_name_real":"zzz","uid":1041455,"ctime":1599447821,"ip_address":"","comment_id":241944,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"老师，问你一个业务层面的问题，微信后台杀死后来语音通话或者视频通话可以持续震动，这个怎么搞？经过调研发现要用pushkit，但是又必须使用callkit，中国大陆又禁用callkit，就是不禁用callkit也会弹出系统的电话页面，请问一下微信是什么方案做的。","like_count":0,"discussions":[{"author":{"id":1041455,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJ3dLlYr6tznfnZXJNsD7Jw48BVnFSib3RO3VWEN0pgebRY1jaR8YXLQ6iaAjTsFiamOWSA3UPAa37A/132","nickname":"Geek_e7jq8k","note":"","ucode":"352964E5D793DA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503883,"discussion_content":"目前做不到哈 微信这个比较特殊 对普通app参考的价值不大","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599447821,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136177,"user_name":"Geek_jg3r26","can_delete":false,"product_type":"c3","uid":1454691,"ip_address":"","ucode":"7D093ED7273CBE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEK5icO2A4K7HYTYfQoagTz7VbtgxfS2ibBqLnKVWwQZgsePibZWFvFJEhPT8BtpQSaFx9IEodyp6c0dw/132","comment_is_top":false,"comment_ctime":1569378115,"is_pvip":false,"replies":[{"id":52977,"content":"可以使用extension，也可以创建一个单独的类实现相应的逻辑，在appdelegate的函数中直接调用工具类的方法。收敛的原因之一是，对于push 或者 scheme跳转 这两个外部拉起的常用场景，很多业务逻辑是相似的，但是对于appdelegate是不同的回调函数，如果有单独的类可以统一这类跳转拉起逻辑。","user_name":"作者回复","user_name_real":"朱德权","uid":1041455,"ctime":1569896183,"ip_address":"","comment_id":136177,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"老师， 你说的功能 push功能收敛到相应到工具类里， \n是不是给appdelegate做一个extesion来使用呢； ","like_count":0,"discussions":[{"author":{"id":1041455,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJ3dLlYr6tznfnZXJNsD7Jw48BVnFSib3RO3VWEN0pgebRY1jaR8YXLQ6iaAjTsFiamOWSA3UPAa37A/132","nickname":"Geek_e7jq8k","note":"","ucode":"352964E5D793DA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468494,"discussion_content":"可以使用extension，也可以创建一个单独的类实现相应的逻辑，在appdelegate的函数中直接调用工具类的方法。收敛的原因之一是，对于push 或者 scheme跳转 这两个外部拉起的常用场景，很多业务逻辑是相似的，但是对于appdelegate是不同的回调函数，如果有单独的类可以统一这类跳转拉起逻辑。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569896183,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136088,"user_name":"Geek_jg3r26","can_delete":false,"product_type":"c3","uid":1454691,"ip_address":"","ucode":"7D093ED7273CBE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEK5icO2A4K7HYTYfQoagTz7VbtgxfS2ibBqLnKVWwQZgsePibZWFvFJEhPT8BtpQSaFx9IEodyp6c0dw/132","comment_is_top":false,"comment_ctime":1569341932,"is_pvip":false,"replies":[{"id":53090,"content":"是的，push的能力需要使用付费账号。如果你使用的是示例工程，在Capability中看不到push是因为已经添加了。如果将添加的Push Notifications删除掉，就会在Capability中重新看到哈。","user_name":"作者回复","user_name_real":"朱德权","uid":1041455,"ctime":1570018592,"ip_address":"","comment_id":136088,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"老师，远程推送，免费的账号是不是不能测试，需要付费的账号开启推送才可以，xcode11里capability都没有push notification这个功能","like_count":0,"discussions":[{"author":{"id":1041455,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJ3dLlYr6tznfnZXJNsD7Jw48BVnFSib3RO3VWEN0pgebRY1jaR8YXLQ6iaAjTsFiamOWSA3UPAa37A/132","nickname":"Geek_e7jq8k","note":"","ucode":"352964E5D793DA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468452,"discussion_content":"是的，push的能力需要使用付费账号。如果你使用的是示例工程，在Capability中看不到push是因为已经添加了。如果将添加的Push Notifications删除掉，就会在Capability中重新看到哈。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570018592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":288309,"user_name":"东风","can_delete":false,"product_type":"c3","uid":1039451,"ip_address":"","ucode":"6CE32DA27F7D49","user_header":"https://static001.geekbang.org/account/avatar/00/0f/dc/5b/a60deed6.jpg","comment_is_top":false,"comment_ctime":1618403088,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"老师您好！请教一个问题，应用在收到远程推送后，不点击推送横幅，直接打开APP，然后推送横幅就消失了，如何才能做到不点击推送横幅的时候，推送常驻通知栏呢？就是收到推送后直接打开APP不清除通知栏的推送横幅","like_count":0}]}