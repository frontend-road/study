{"id":612566,"title":"01ï½œå¦‚ä½•å°†ä¸šåŠ¡ä»£ç æ„å»ºä¸ºå®¹å™¨é•œåƒï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ç‹ç‚œã€‚ä»è¿™èŠ‚è¯¾å¼€å§‹ï¼Œæˆ‘ä»¬æ­£å¼è¿›å…¥ä¸“æ çš„å­¦ä¹ ã€‚è¿™èŠ‚è¯¾æˆ‘ä»¬é‡ç‚¹æ¥çœ‹ä¸€ä¸‹ï¼Œå¦‚ä½•å°†ä¸šåŠ¡ä»£ç æ„å»ºä¸ºå®¹å™¨é•œåƒã€‚</p><p>åœ¨å·¥ä½œä¸­ï¼Œæˆ‘ç›¸ä¿¡ä½ ç»å¸¸ä¼šä»åŒäº‹é‚£é‡Œå¬åˆ°è¿™å‡ ä¸ªç†Ÿæ‚‰çš„è¯ï¼šDockerã€é•œåƒã€é•œåƒä»“åº“ã€å®¹å™¨ç­‰ç­‰ã€‚</p><p>ç´§æ¥ç€ï¼Œä½ è„‘æµ·ä¸­ä¼šæµ®ç°å‡ºå‡ ä¸ªé—®é¢˜ï¼šå®¹å™¨å’Œé•œåƒä¹‹é—´çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•å°†ä¸šåŠ¡ä»£ç æ„å»ºä¸ºå®¹å™¨é•œåƒï¼Ÿå®¹å™¨é•œåƒåˆæ˜¯æ€ä¹ˆå­˜å‚¨å’Œä½¿ç”¨çš„å‘¢ï¼Ÿ</p><p>åˆ«ç€æ€¥ï¼Œè¿™èŠ‚è¯¾ï¼Œæˆ‘ä¼šå¸¦ä½ ä» 0 å¼€å§‹è®¤è¯†ä½œä¸ºäº‘åŸç”ŸåŸºçŸ³çš„å®¹å™¨é•œåƒï¼Œè®©ä½ åœ¨å®è·µä¸­ç†è§£é•œåƒå’Œå®¹å™¨çš„æ¦‚å¿µï¼Œä¹Ÿåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æ„å»ºä½ çš„ç¬¬ä¸€ä¸ªå®¹å™¨é•œåƒã€‚</p><h2>åˆè¯†å®¹å™¨é•œåƒ</h2><p>åœ¨å¼€å§‹å®è·µä¹‹å‰ï¼Œä½ éœ€è¦å‡†å¤‡ä¸€å°ç”µè„‘ï¼Œæ¨è Linux æˆ–è€… macOSï¼Œå¹¶å®‰è£…å¥½ Dockerï¼Œå…·ä½“æµç¨‹ä½ å¯ä»¥å‚è€ƒ<a href=\"https://docs.docker.com/get-docker/\">å®˜ç½‘</a>ã€‚Windows ç³»ç»Ÿä¹ŸåŒæ ·é€‚ç”¨ï¼Œåªæ˜¯éœ€è¦æ³¨æ„ä¸€äº›æ“ä½œä¸Šçš„å·®å¼‚ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨æœ¬åœ°æ‹‰å–ä¸€ä¸ªé•œåƒå¹¶å°†å®ƒè¿è¡Œèµ·æ¥ï¼Œçœ‹çœ‹é•œåƒåˆ°åº•èƒ½åšä»€ä¹ˆã€‚</p><p>æˆ‘ä»¬é¦–å…ˆè¦ç”¨ä¸‹é¢è¿™ä¸ªå‘½ä»¤ä»å®˜æ–¹é•œåƒä»“åº“ä¸­æ‹‰å–ä¸€ä¸ªé•œåƒåˆ°æœ¬åœ°ï¼Œè¿™æ˜¯æˆ‘æå‰åˆ¶ä½œå¥½çš„æ¼”ç¤ºé•œåƒã€‚</p><pre><code class=\"language-powershell\">$ docker pull lyzhang1999/hello-world-flask:latest\n</code></pre><p>æé†’ä¸€ä¸‹ï¼Œå¦‚æœæ‹‰å–é•œåƒå¤±è´¥ï¼Œæ¨èä½ å¼€é€šä¸€å°å›½å†…äº‘å‚å•†çš„é¦™æ¸¯ Linux ä¸»æœºè¿›è¡Œæ¥ä¸‹æ¥çš„å®éªŒã€‚</p><!-- [[[read_end]]] --><p>è¿™é‡Œè¦æ³¨æ„ä¸¤ä¸ªç»†èŠ‚ã€‚ç¬¬ä¸€ï¼Œè¿™é‡Œå¹¶æ²¡æœ‰æŒ‡å®šå®Œæ•´çš„é•œåƒåœ°å€ï¼ŒDocker ä¼šé»˜è®¤ä» docker.io å®˜æ–¹é•œåƒä»“åº“ä¸­æœç´¢ã€‚æ‰€ä»¥ï¼Œä½ å¯ä»¥ç†è§£ä¸ºï¼Œä¸Šé¢è¿™æ®µä»£ç çš„ lyzhang1999/hello-world-flask:latest å’Œ docker.io/lyzhang1999/hello-world-flask:latest æ˜¯ç­‰æ•ˆçš„ã€‚ç¬¬äºŒä¸ªç»†èŠ‚æ˜¯ï¼Œå†’å·åé¢çš„ latest æŒ‡çš„æ˜¯é•œåƒç‰ˆæœ¬å·ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆæŸ¥çœ‹æœ¬åœ°å·²ç»æ‹‰å–äº†å“ªäº›é•œåƒå‘¢ï¼Ÿä½ å¯ä»¥ä½¿ç”¨ docker images å‘½ä»¤æ¥æŸ¥çœ‹å®ƒä»¬ï¼š</p><pre><code class=\"language-powershell\">$ docker images\nREPOSITORY&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TAG&nbsp; &nbsp; &nbsp; &nbsp; IMAGE ID&nbsp; &nbsp; &nbsp; &nbsp;CREATED&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SIZE\nlyzhang1999/hello-world-flask&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;latest&nbsp; &nbsp; &nbsp;e2b1a18ed1c1&nbsp; &nbsp;1 minutes ago&nbsp; &nbsp;116MB\n</code></pre><p>æ˜¾ç„¶ï¼Œè¿™é‡Œæ‰“å°çš„ç»“æœå°±æ˜¯æˆ‘ä»¬åˆšæ‰æ‹‰å–çš„é•œåƒã€‚</p><p>æ¥ä¸‹æ¥ï¼Œåˆ°äº†æœ€é‡è¦çš„ä¸€æ­¥ï¼š<strong>è¿è¡Œé•œåƒã€‚</strong>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ docker run å‘½ä»¤æ¥è¿è¡Œé•œåƒã€‚</p><pre><code class=\"language-powershell\">$ docker run -d -p 8000:5000 lyzhang1999/hello-world-flask:latest\nc370825640b6b3669cae20f14e2684ec82b20e4980b329c02b47e47771c931fd\n</code></pre><p>çœ‹åˆ°ä¸Šé¢çš„è¾“å‡ºè¯´æ˜æˆ‘ä»¬æˆåŠŸå¯åŠ¨äº† hello-world-flask é•œåƒã€‚</p><p>-d ä»£è¡¨â€œåœ¨åå°è¿è¡Œå®¹å™¨â€ï¼ŒåŒæ—¶å®ƒä¼šè¾“å‡ºå®¹å™¨ IDï¼Œè¿™æ˜¯è¿è¡Œå®¹å™¨çš„å”¯ä¸€æ ‡è¯†ã€‚</p><p>-p ä»£è¡¨â€œå°†å®¹å™¨å†…çš„ 5000 ç«¯å£æš´éœ²åˆ°å®¿ä¸»æœºï¼ˆæœ¬åœ°çš„ 8000 ç«¯å£ï¼‰â€ï¼Œè¿™å¯ä»¥æ–¹ä¾¿æˆ‘ä»¬åœ¨æœ¬åœ°è¿›è¡Œè®¿é—®ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨è®¿é—® localhost:8000ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢è¿™æ®µè¾“å‡ºå†…å®¹ï¼š</p><pre><code class=\"language-plain\">Hello, my first docker images!\n</code></pre><p>é€šè¿‡è¿™ä¹ˆç®€å•çš„å‡ æ¡å‘½ä»¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†ä»æ‹‰å–é•œåƒåˆ°è¿è¡Œé•œåƒçš„å…¨è¿‡ç¨‹ã€‚æ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯æ¯”æƒ³è±¡ä¸­æ›´åŠ ç®€å•ï¼Ÿ</p><p>è®©æˆ‘ä»¬ç»§ç»­æ¢ç©¶è¿™ä¸ªæ­£åœ¨è¿è¡Œä¸­çš„å®¹å™¨ã€‚<strong>æˆ‘ä»¬å°è¯•è¿›å…¥å®¹å™¨å†…éƒ¨ã€‚</strong></p><p>é¦–å…ˆï¼Œä½ å¯ä»¥ä½¿ç”¨ docker ps å‘½ä»¤æ¥æŸ¥çœ‹å½“å‰è¿è¡Œä¸­çš„å®¹å™¨åˆ—è¡¨ï¼Œè¾“å‡ºç»“æœçš„ â€œc370825640b6â€ å³ä¸ºå®¹å™¨ IDï¼š</p><pre><code class=\"language-powershell\">$ docker ps\nCONTAINER ID&nbsp; &nbsp;IMAGE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; COMMAND&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CREATED&nbsp; &nbsp; &nbsp; &nbsp; STATUS&nbsp; &nbsp; &nbsp; &nbsp; PORTS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;NAMES\nc370825640b6&nbsp; &nbsp;lyzhang1999/hello-world-flask:latest&nbsp; &nbsp;\"python3 -m flask ruâ€¦\"&nbsp; &nbsp;1 hours ago&nbsp; &nbsp;Up 1 hours&nbsp; &nbsp;0.0.0.0:8000-&gt;5000/tcp&nbsp; &nbsp; &nbsp; xenodochial_black\n</code></pre><p>ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨ docker exec [å®¹å™¨ ID] è¿›å…¥å®¹å™¨å†…éƒ¨ï¼š</p><pre><code class=\"language-powershell\">$ docker exec -it c370825640b6 bash\nroot@c370825640b6:/app#\n</code></pre><p>-it çš„å«ä¹‰æ˜¯â€œä¿æŒ STDIN æ‰“å¼€çŠ¶æ€ï¼Œå¹¶ä¸”åˆ†é…ä¸€ä¸ªè™šæ‹Ÿçš„ç»ˆç«¯ï¼ˆTerminalï¼‰â€ã€‚ä½ å¯ä»¥ç®€å•ç†è§£ä¸ºï¼Œæˆ‘ä»¬é€šè¿‡ SSH ç™»å½•åˆ°äº†å®¹å™¨å†…éƒ¨ï¼Œåœ¨å½“å‰ç»ˆç«¯ä¸‹è¿è¡Œçš„æ‰€æœ‰å‘½ä»¤éƒ½æ˜¯åŸºäºå®¹å™¨å†…çš„ã€‚</p><p>ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨å½“å‰ç»ˆç«¯æ‰§è¡Œ ls æŸ¥çœ‹å®¹å™¨å†…çš„æ–‡ä»¶ï¼š</p><pre><code class=\"language-powershell\">$ root@c370825640b6:/app# ls\nDockerfile&nbsp; __pycache__&nbsp; app.py&nbsp; requirements.txt\n</code></pre><p>ä»ä¸Šé¢çš„è¿”å›ç»“æœæ¥çœ‹ï¼Œå®¹å™¨å†…çš„å·¥ä½œç›®å½• /app åŒ…å«äº†æˆ‘ä»¬ä¹‹å‰ä»æœ¬åœ°å¤åˆ¶åˆ°é•œåƒå†…çš„ Dockerfileã€app.py å’Œ requirements.txt ä¸‰ä¸ªæ–‡ä»¶ï¼Œè¿™å’Œæˆ‘ä»¬å¯¹ Dockerfile çš„ COPY æŒ‡ä»¤é¢„æœŸçš„è¡Œä¸ºæ˜¯ä¸€è‡´çš„ã€‚</p><p><strong>ç°åœ¨ï¼Œæˆ‘ä»¬å°è¯•ç€ç¼–è¾‘å®¹å™¨å†…çš„ app.pyã€‚</strong></p><pre><code class=\"language-powershell\">$ vi app.py\n</code></pre><p>ä¿®æ”¹ç¬¬ 8 è¡Œçš„è¾“å‡ºå¹¶ä¿å­˜ï¼Œé‡æ–°åˆ·æ–°æµè§ˆå™¨ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬å¯¹å®¹å™¨å†…çš„ä¿®æ”¹å®æ—¶ç”Ÿæ•ˆäº†ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬å¯ä»¥åƒé€€å‡º SSH ç™»å½•ä¸€æ ·ï¼Œåœ¨å®¹å™¨çš„ç»ˆç«¯ä¸‹æ‰§è¡Œ exit å‘½ä»¤é€€å‡ºï¼Œè¿”å›å®¿ä¸»æœºä¹Ÿå°±æ˜¯æˆ‘ä»¬æœ¬æœºçš„ç»ˆç«¯ã€‚</p><pre><code class=\"language-powershell\">$ root@c370825640b6:/app# exit\n</code></pre><p>åˆ—å‡ºå’Œç¼–è¾‘æ–‡ä»¶çš„æ“ä½œï¼Œäº‹å®ä¸Šéƒ½æ˜¯å¯¹å®¹å™¨çš„æ“ä½œã€‚æˆ‘åˆšå¼€å§‹å­¦ä¹ çš„æ—¶å€™ï¼Œç»å¸¸æŠŠé•œåƒå’Œå®¹å™¨è¿™ä¸¤ä¸ªæ¦‚å¿µææ··ã€‚</p><p>é€šä¿—åœ°è¯´ï¼Œé•œåƒæ˜¯ä¸€ä¸ªåŒæ—¶åŒ…å«ä¸šåŠ¡åº”ç”¨å’Œè¿è¡Œç¯å¢ƒçš„â€œç³»ç»Ÿå®‰è£…åŒ…â€ï¼Œå®ƒéœ€è¦è¿è¡Œèµ·æ¥ä¹‹åæ‰èƒ½æä¾›æœåŠ¡ï¼Œè¿è¡Œåé•œåƒçš„â€œå®ä¾‹åŒ–â€ç§°ä¸ºå®¹å™¨ï¼ˆContainerï¼‰ã€‚ä½ å¯ä»¥å¯¹åŒä¸€ä¸ªé•œåƒå®ä¾‹åŒ–å¤šæ¬¡ï¼Œäº§ç”Ÿå¤šä¸ªç‹¬ç«‹çš„å®¹å™¨ï¼Œè¿™äº›å®¹å™¨æ‹¥æœ‰ä¸åŒçš„å®¹å™¨ IDï¼Œä¸åŒçš„å®¹å™¨ä¹‹é—´æ˜¯ç›¸äº’éš”ç¦»çš„ã€‚</p><p>è¿›ä¸€æ­¥ç†è§£ï¼Œä½ å¯ä»¥æŠŠå®¹å™¨æ¯”å–»ä¸ºè™šæ‹Ÿæœºï¼Œè™šæ‹Ÿæœºä¹Ÿæ˜¯ï¼Œå½¼æ­¤ä¹‹é—´çš„æ•°æ®å’ŒçŠ¶æ€éƒ½æ˜¯éš”ç¦»çš„ã€‚</p><p>æœ€åï¼Œè¦æƒ³åœæ­¢è¿è¡Œä¸­çš„å®¹å™¨å‘¢ï¼Œåªéœ€è¦ä½¿ç”¨ docker stop [å®¹å™¨ ID] å‘½ä»¤å°±å¯ä»¥äº†ã€‚</p><pre><code class=\"language-powershell\">$ docker stop c370825640b6\n</code></pre><p>åˆ°è¿™é‡Œï¼Œæˆ‘ç›¸ä¿¡ä½ å¯¹é•œåƒå’Œå®¹å™¨å·²ç»æœ‰äº†åŸºæœ¬çš„è®¤è¯†ã€‚</p><h2>é•œåƒæ˜¯æ€ä¹ˆæ„å»ºå‡ºæ¥çš„ï¼Ÿ</h2><p>ä½†é•œåƒåˆ°åº•æ˜¯æ€ä¹ˆè¢«æ„å»ºå‡ºæ¥çš„å‘¢ï¼Ÿæˆ‘çš„ä¸šåŠ¡ä»£ç å¦‚ä½•æ‰“åŒ…æˆé•œåƒï¼Ÿæ¥ä¸‹æ¥ï¼Œæˆ‘å°±å¸¦ä½ ä» 0 å¼€å§‹æ„å»ºä½ çš„ç¬¬ä¸€ä¸ªé•œåƒã€‚</p><p>è¿™é‡Œæˆ‘ä½¿ç”¨ Python ç¼–å†™çš„ Flask Web åº”ç”¨ä½œä¸ºä¾‹å­ã€‚<strong>é¦–å…ˆï¼Œå‡è®¾è¿™æ˜¯æˆ‘çš„ä¸šåŠ¡ä»£ç ï¼Œè¯·ä½ å°†ä¸‹é¢è¿™æ®µä»£ç ä¿å­˜ä¸º app.pyã€‚</strong></p><pre><code class=\"language-python\">from flask import Flask\nimport os\napp = Flask(__name__)\napp.run(debug=True)\n\n@app.route('/')\ndef hello_world():\n    return 'Hello, my first docker images! ' + os.getenv(\"HOSTNAME\") + ''\n</code></pre><p>è¿™æ®µä»£ç çš„å«ä¹‰éå¸¸ç®€å•ï¼Œå¯åŠ¨ä¸€ä¸ª Web æœåŠ¡å™¨ï¼Œå½“æ¥æ”¶åˆ° HTTP è¯·æ±‚æ—¶ï¼Œè¿”å› â€œHello, my first docker images!â€ ä»¥åŠ HOSTNAME ç¯å¢ƒå˜é‡ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»º Python çš„ä¾èµ–æ–‡ä»¶ requirements.txt ï¼Œç”¨å®ƒæ¥å®‰è£…æˆ‘ä»¬æ‰€ä¾èµ–çš„ Flask æ¡†æ¶ã€‚ä½ å¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ¥åˆ›å»º requirements.txt æ–‡ä»¶å¹¶å°† Flask==2.2.2 å†…å®¹å†™å…¥è¯¥æ–‡ä»¶ã€‚</p><pre><code class=\"language-powershell\">$ echo \"Flask==2.2.2\" &gt;&gt; requirements.txt\n</code></pre><p>ç†Ÿæ‚‰ Python çš„åŒå­¦éƒ½çŸ¥é“ï¼Œæœ‰äº†è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥åœ¨æœ¬åœ°å¯åŠ¨è¿™ä¸ª Python Web åº”ç”¨äº†ï¼Œä½†è¿™ä¸æ˜¯æˆ‘ä»¬çš„ç›®æ ‡ã€‚</p><p><strong>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¼€å§‹å°†è¿™æ®µæœ€ç®€å•çš„ Python ä¸šåŠ¡ä»£ç åˆ¶ä½œæˆé•œåƒã€‚</strong></p><p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–‡ä»¶æ¥æè¿°é•œåƒæ˜¯å¦‚ä½•è¢«æ„å»ºçš„ï¼Œè¿™ä¸ªæ–‡ä»¶å«åš <strong>Dockerfile</strong>ï¼Œè¯·å°†ä»¥ä¸‹å†…å®¹ä¿å­˜ä¸º Dockerfile æ–‡ä»¶ã€‚</p><pre><code class=\"language-dockerfile\"># syntax=docker/dockerfile:1\n\nFROM python:3.8-slim-buster\n\nRUN apt-get update &amp;&amp; apt-get install -y procps vim apache2-utils &amp;&amp; rm -rf /var/lib/apt/lists/*\n\nWORKDIR /app\n\nCOPY requirements.txt requirements.txt\nRUN pip3 install -r requirements.txt\n\nCOPY . .\n\nCMD [ \"python3\", \"-m\" , \"flask\", \"run\", \"--host=0.0.0.0\"]\n</code></pre><p>è¿™ä¸ª Dockerfile åªæœ‰å‡ è¡Œï¼Œçœ‹èµ·æ¥éå¸¸ç®€å•ï¼Œä½†ä»–ä»£è¡¨äº†ä¸€ç§éå¸¸å…¸å‹çš„é•œåƒæ„å»ºçš„å‘½ä»¤ã€‚ä¾‹å¦‚ FROMã€COPYã€RUNã€CMD ç­‰å‘½ä»¤ï¼Œå®ƒä»¬æ˜¯ä»ä¸Šåˆ°ä¸‹æŒ‰é¡ºåºæ‰§è¡Œçš„ã€‚å½“ç„¶ï¼Œ Dockefile è¿˜æœ‰å¾ˆå¤šå…¶ä»–å‘½ä»¤ï¼Œä½ åªéœ€è¦äº†è§£æœ€å¸¸ç”¨çš„è¿™å‡ ä¸ªå‘½ä»¤å°±å¤Ÿäº†ã€‚</p><p>æˆ‘ä»¬è§£é‡Šä¸€ä¸‹ Dockerfile æ–‡ä»¶é‡Œçš„è¿™å‡ ä¸ªå‘½ä»¤ã€‚</p><p>ç¬¬ä¸€è¡Œä»¥ syntax å¼€å¤´çš„æ˜¯è§£æå™¨æ³¨é‡Šï¼Œå®ƒä¸ Docker æ„å»ºé•œåƒçš„å·¥å…· buildkit ç›¸å…³ï¼Œåœ¨ä¸€èˆ¬æƒ…å†µï¼Œæˆ‘éƒ½å»ºè®®ä½ ä½¿ç”¨ docker/dockerfile:1ï¼Œå®ƒä»£è¡¨å§‹ç»ˆæŒ‡å‘æœ€æ–°çš„è¯­æ³•ç‰ˆæœ¬ã€‚</p><p>FROM å‘½ä»¤ï¼Œè¡¨ç¤ºä½¿ç”¨å®˜æ–¹ä»“åº“çš„ python:3.8-slim-buster é•œåƒä½œä¸ºåŸºç¡€é•œåƒã€‚åœ¨æˆ‘ä»¬ç†Ÿæ‚‰çš„ç¼–ç¨‹æ–¹æ³•ä¸­ï¼Œä½ å¯ä»¥ç†è§£ä¸ºä»è¯¥é•œåƒç»§æ‰¿ã€‚è¿™ä¸ªé•œåƒå·²ç»å®‰è£…äº† Python3 å’Œ Pip3 ç­‰æ‰€æœ‰çš„ Python ç›¸å…³çš„å·¥å…·å’ŒåŒ…ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p><p>RUN çš„å«ä¹‰æ˜¯åœ¨é•œåƒå†…è¿è¡ŒæŒ‡å®šçš„å‘½ä»¤ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸ºé•œåƒå®‰è£…äº†ä¸€äº›å¿…è¦çš„å·¥å…·ã€‚</p><p>WORKDIR çš„å«ä¹‰æ˜¯é•œåƒçš„å·¥ä½œç›®å½•ï¼Œä½ å¯ä»¥ç†è§£ä¸ºåç»­æ‰€æœ‰çš„å‘½ä»¤éƒ½å°†ä»¥æ­¤ä¸ºåŸºå‡†è·¯å¾„ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨åç»­çš„å‘½ä»¤ä¸­ä½¿ç”¨ç›¸å¯¹è·¯å¾„è€Œä¸æ˜¯å®Œæ•´è·¯å¾„äº†ã€‚</p><p>COPY çš„å«ä¹‰æ˜¯å°†æœ¬åœ°çš„æ–‡ä»¶æˆ–ç›®å½•å¤åˆ¶åˆ°é•œåƒå†…æŒ‡å®šçš„ä½ç½®ã€‚ç¬¬ä¸€ä¸ªå‚æ•°ä»£è¡¨æœ¬åœ°æ–‡ä»¶æˆ–ç›®å½•ï¼Œç¬¬äºŒä¸ªå‚æ•°ä»£è¡¨è¦å¤åˆ¶åˆ°é•œåƒå†…çš„ä½ç½®ã€‚ä¾‹å¦‚ï¼Œç¬¬ä¸ƒè¡Œ COPY è¡¨ç¤ºï¼Œå°†æœ¬åœ°å½“å‰ç›®å½•ä¸‹çš„ requirements.txt æ–‡ä»¶å¤åˆ¶åˆ°é•œåƒå·¥ä½œç›®å½• /app ä¸­ï¼Œæ–‡ä»¶å‘½ååŒæ ·ä¸º requirements.txtã€‚</p><p>ç¬¬åè¡Œ RUN çš„å«ä¹‰æ˜¯åœ¨é•œåƒé‡Œè¿è¡Œ pip3 å®‰è£… Python ä¾èµ–ã€‚è¯·æ³¨æ„ï¼Œè¿™äº›ä¾èµ–å°†ä¼šè¢«å®‰è£…åœ¨é•œåƒé‡Œè€Œä¸æ˜¯æœ¬åœ°ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œç¬¬åè¡Œåˆå‡ºç°äº†ä¸€ä¸ª COPY å‘½ä»¤ï¼Œå®ƒçš„å«ä¹‰æ˜¯å°†å½“å‰ç›®å½•æ‰€æœ‰çš„æºä»£ç å¤åˆ¶åˆ°é•œåƒçš„å·¥ä½œç›®å½• /app ä¸‹ï¼Œå¤åˆ¶ç›®å½•çš„è¯­æ³•å’Œæˆ‘ä»¬ä¹‹å‰æåˆ°çš„å¤åˆ¶æ–‡ä»¶æ˜¯ç±»ä¼¼çš„ã€‚</p><p>æœ€åä¸€è¡Œ CMD çš„å«ä¹‰æ˜¯é•œåƒçš„å¯åŠ¨å‘½ä»¤ã€‚åœ¨ä¸€ä¸ª Dockerfile ä¸­ï¼Œåªèƒ½æœ‰ä¸€ä¸ª CMD å‘½ä»¤ï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œé‚£ä¹ˆåªæœ‰æœ€åä¸€ä¸ª CMD å‘½ä»¤ä¼šèµ·ä½œç”¨ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨é•œåƒè¢«è¿è¡Œæ—¶å¯åŠ¨ Python Flask Web æœåŠ¡å™¨ï¼Œå¹¶ç›‘å¬åœ¨ç‰¹å®šä¸»æœºä¸Šã€‚CMD çš„ç¬¬ä¸€ä¸ªå‚æ•° python3 æ˜¯æˆ‘ä»¬å¸Œæœ›è¿è¡Œçš„å¯æ‰§è¡Œå‘½ä»¤ï¼Œåé¢çš„å‚æ•°è¡¨ç¤ºè¿è¡Œ python3 å‘½ä»¤æ‰€éœ€è¦çš„å‚æ•°ã€‚</p><p>åœ¨ä¸€äº›åœºæ™¯ä¸‹ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ°å¦ä¸€ç§ä¸ CMD ç±»ä¼¼çš„å‘½ä»¤ï¼šENTRYPOINTã€‚å®ƒçš„åŠŸèƒ½å’Œ CMD ç±»ä¼¼ï¼Œä½†åˆæœ‰ä¸€äº›å·®å¼‚ã€‚åœ¨ç°é˜¶æ®µï¼Œæˆ‘ä»¬åªéœ€è¦å…ˆè®°ä½ CMD å‘½ä»¤ï¼Œè¿™å¯ä»¥æ»¡è¶³å¤§éƒ¨åˆ†ä½¿ç”¨åœºæ™¯ã€‚</p><p>å¥½äº†ï¼Œä¸‡äº‹ä¿±å¤‡ï¼Œ<strong>æ¥ä¸‹æ¥æˆ‘ä»¬æ­£å¼å¼€å§‹æ„å»ºå±äºè‡ªå·±çš„ç¬¬ä¸€ä¸ªé•œåƒã€‚</strong></p><p>æˆ‘ä»¬è¦åœ¨æœ¬åœ°ç”µè„‘çš„å½“å‰ç›®å½•æ‰§è¡Œ ls å‘½ä»¤ï¼Œç¡®è®¤æˆ‘ä»¬åˆšæ‰ä¿å­˜çš„ app.pyã€requirements.txt ä»¥åŠ Dockefile æ˜¯å¦å­˜åœ¨ã€‚</p><pre><code class=\"language-powershell\">$ ls\nDockerfile&nbsp; &nbsp; &nbsp; &nbsp;app.py&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;requirements.txt\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œ<strong>åœ¨æœ¬æœºçš„å½“å‰ç›®å½•ä¸‹æ‰§è¡Œ docker build å‘½ä»¤</strong>ï¼Œè¿™æ ·å°±å¯ä»¥å¼€å§‹åˆ¶ä½œé•œåƒäº†ã€‚</p><pre><code class=\"language-powershell\">$ docker build -t hello-world-flask .\n</code></pre><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ-t ä»£è¡¨çš„æ˜¯æˆ‘ä»¬çš„é•œåƒåã€‚è¿˜è®°å¾—æˆ‘ä»¬ä¹‹å‰æåˆ°çš„é•œåƒç‰ˆæœ¬çš„æ¦‚å¿µå—ï¼Ÿè¿™é‡Œéšå«äº†é•œåƒç‰ˆæœ¬ï¼ŒDocker ä¼šé»˜è®¤ç”¨ latest ä½œä¸ºç‰ˆæœ¬å·ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œhello-world-flask ä¸ hello-world-flask:latest çš„å†™æ³•æ˜¯ç­‰ä»·çš„ã€‚</p><p>æ­¤å¤–ï¼Œä½ è¿˜éœ€è¦æ³¨æ„æœ€åé¢æœ‰ä¸€ä¸ª â€œ.â€ ï¼Œè¿™ä»£è¡¨äº†æ„å»ºé•œåƒçš„ä¸Šä¸‹æ–‡ã€‚ç°é˜¶æ®µä½ åªéœ€è¦çŸ¥é“è¿™ä»£è¡¨æœ¬åœ°æºç ä¸æ‰§è¡Œ docker build å‘½ä»¤çš„ç›¸å¯¹ä½ç½®å³å¯ã€‚</p><p>æ‰§è¡Œè¿™æ¡å‘½ä»¤æ—¶ï¼ŒDocker ä¼šå¸®æˆ‘ä»¬ä»å®˜æ–¹é•œåƒä»“åº“æ‹‰å– python:3.8-slim-buster é•œåƒï¼Œå¹¶å¯åŠ¨è¯¥é•œåƒã€‚æ¥ä¸‹æ¥ï¼Œè¯¥å®¹å™¨ä¼šä¾æ¬¡æ‰§è¡Œæˆ‘ä»¬åœ¨ Dockerfile ä¸­ä¹¦å†™çš„å‘½ä»¤ï¼Œä¾‹å¦‚ WORKDIRã€COPYã€RUN ç­‰ç­‰ã€‚</p><p>æ„å»ºå¥½é•œåƒä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ docker images å‘½ä»¤æ¥æŸ¥çœ‹æœ¬åœ°é•œåƒã€‚è¿˜è®°å¾—å—ï¼Ÿè¿™æ¡å‘½ä»¤æˆ‘ä»¬åœ¨ä¹‹å‰ docker pull æ‹‰å–é•œåƒåˆ°æœ¬åœ°ä¹‹åä¹Ÿä½¿ç”¨è¿‡ã€‚</p><pre><code class=\"language-powershell\">$ docker images\nREPOSITORY&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TAG&nbsp; &nbsp; &nbsp; &nbsp; IMAGE ID&nbsp; &nbsp; &nbsp; &nbsp;CREATED&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SIZE\nhello-world-flask&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;latest&nbsp; &nbsp; &nbsp;3b0803ab8c9c&nbsp; &nbsp;1 hours ago&nbsp; &nbsp; 121MB\n</code></pre><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ docker run å¯åŠ¨é•œåƒï¼ŒéªŒè¯æ˜¯ä¸æ˜¯å·²ç»æˆåŠŸæŠŠä¸šåŠ¡ä»£ç æ‰“åŒ…ä¸ºå®¹å™¨é•œåƒäº†ã€‚</p><pre><code class=\"language-powershell\">$ docker run -d -p 8000:5000 hello-world-flask:latest\n</code></pre><p>è¿™é‡Œæˆ‘ä»¬å†å¤ä¹ ä¸€é -d å’Œ -p å‚æ•°çš„å«ä¹‰ï¼Œä½ å¯ä»¥èŠ±å‡ ç§’é’Ÿçš„æ—¶é—´å›æƒ³ä¸€ä¸‹ã€‚å¦‚æœè®°ä¸æ¸…äº†ï¼Œè®°å¾—å›å»æ¸©ä¹ ä¸€ä¸‹ã€‚</p><p>ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨è®¿é—® localhost:8000ï¼Œå¦‚æœçœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼Œè¯´æ˜æˆ‘ä»¬å·²ç»æˆåŠŸå°†ä¸šåŠ¡ä»£ç æ‰“åŒ…ä¸ºäº†å®¹å™¨é•œåƒã€‚</p><pre><code class=\"language-powershell\">$ Hello, my first docker images!\n</code></pre><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±é€šè¿‡ Python Web åº”ç”¨çš„ä¾‹å­ï¼Œå­¦ä¹ äº†ä»ä¸šåŠ¡ä»£ç æ‰“åŒ…ä¸ºå®¹å™¨é•œåƒæ‰€æ¶‰åŠåˆ°çš„ Dockerfile ä»¥åŠç›¸å…³å‘½ä»¤ã€‚</p><h2><strong>æ„å»ºå®¹å™¨é•œåƒçš„åŸºæœ¬å¥—è·¯</strong></h2><p>å¯æ˜¯ï¼Œå¦‚æœä½ çš„ä¸šåŠ¡ä»£ç æ˜¯å…¶ä»–ç¼–ç¨‹è¯­è¨€æ€ä¹ˆåŠå‘¢ï¼Ÿä¾‹å¦‚ï¼Œä½ ç”¨çš„å¯èƒ½æ˜¯ Javaã€Golangã€Node.js ç­‰ã€‚<strong>è¿™é‡Œæˆ‘ä¸ºä½ æ€»ç»“äº†ä¸šåŠ¡ä»£ç æ„å»ºä¸ºå®¹å™¨é•œåƒçš„åŸºæœ¬å¥—è·¯ã€‚</strong></p><ol>\n<li>ä½¿ç”¨ FROM å‘½ä»¤æŒ‡å®šä¸€ä¸ªå·²ç»å®‰è£…äº†ç‰¹å®šç¼–ç¨‹è¯­è¨€ç¼–è¯‘å·¥å…·çš„åŸºç¡€é•œåƒã€‚ä½ å¯ä»¥åœ¨<a href=\"https://hub.docker.com\">å®˜æ–¹é•œåƒä»“åº“</a>æ‰¾åˆ°ä½ æ‰€éœ€çš„ä»»ä½•åŸºç¡€é•œåƒã€‚ä¾‹å¦‚ï¼Œå¯¹äº Java è€Œè¨€ï¼Œä½ å¯ä»¥ä½¿ç”¨ eclipse-temurin:17-jdk-jammyï¼Œå¯¹äº Golang è€Œè¨€ï¼Œä½ å¯ä»¥ä½¿ç”¨ golang:1.16-alpineã€‚</li>\n<li>ä½¿ç”¨ WORKDIR å‘½ä»¤é…ç½®ä¸€ä¸ªé•œåƒçš„å·¥ä½œç›®å½•ï¼Œå¦‚ WORKDIR /appã€‚</li>\n<li>ä½¿ç”¨ COPY å‘½ä»¤å°†æœ¬åœ°ç›®å½•çš„æºç å¤åˆ¶åˆ°é•œåƒçš„å·¥ä½œç›®å½•ä¸‹ï¼Œä¾‹å¦‚ COPY ã€‚</li>\n<li>ä½¿ç”¨ RUN å‘½ä»¤ä¸‹è½½ä¸šåŠ¡ä¾èµ–ï¼Œä¾‹å¦‚ pip3 installã€‚å¦‚æœæ˜¯é™æ€è¯­è¨€ï¼Œé‚£ä¹ˆè¦è¿›ä¸€æ­¥ç¼–è¯‘æºç ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚</li>\n<li>æœ€åï¼Œä½¿ç”¨ CMD å‘½ä»¤é…ç½®é•œåƒçš„å¯åŠ¨å‘½ä»¤ï¼Œä¹Ÿå°±æ˜¯å°†ä½ çš„ä¸šåŠ¡ä»£ç å¯åŠ¨èµ·æ¥ã€‚</li>\n</ol><p>å®é™…ä¸Šï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆç¼–ç¨‹è¯­è¨€ï¼Œæ„å»ºé•œåƒçš„æ–¹æ³•éƒ½æ˜¯å¤§åŒå°å¼‚çš„ã€‚æˆ‘ä¸ºä½ æ€»ç»“çš„è¿™ 5 ä¸ªæ–¹æ³•æ­¥éª¤å¯ä»¥æ»¡è¶³æˆ‘ä»¬æ„å»ºå®¹å™¨é•œåƒçš„æœ€åŸºæœ¬è¦æ±‚ã€‚</p><p>å½“ç„¶ï¼Œæ„å»ºé•œåƒè¿˜æœ‰å¾ˆå¤šé«˜çº§æŠ€å·§ï¼Œä¾‹å¦‚åŸºç¡€é•œåƒçš„é€‰æ‹©ã€å¤šé˜¶æ®µæ„å»ºã€è·¨å¹³å°æ„å»ºã€buildkit ä¾èµ–ç¼“å­˜ç­‰ç­‰ï¼Œè¿™äº›å†…å®¹åœ¨åˆå­¦è¿‡ç¨‹å¹¶ä¸å¸¸ç”¨ï¼Œæˆ‘ä¼šåœ¨åç»­çš„è¯¾ç¨‹é‡Œä¸ºä½ è¯¦ç»†ä»‹ç»ã€‚</p><p><strong>æœ€åï¼Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ã€‚å¦‚æœæˆ‘ä»¬æƒ³è®©åˆ«äººåœ¨ä»–çš„ç”µè„‘ä¸Šå¯åŠ¨æˆ‘åˆ¶ä½œçš„é•œåƒæ€ä¹ˆåŠï¼Ÿæˆ–è€…ï¼Œæ€ä¹ˆåœ¨å›¢é˜Ÿä¹‹é—´å…±äº«é•œåƒå‘¢ï¼Ÿ</strong></p><p>è¿˜è®°å¾—æˆ‘ä»¬åœ¨å‰æ–‡ä½¿ç”¨ docker pull æ‹‰å–é•œåƒçš„è¿‡ç¨‹å—ï¼Ÿå¦‚æœæˆ‘ä»¬æŠŠè‡ªå·±åˆ¶ä½œçš„é•œåƒä¸Šä¼ åˆ° Docker å®˜æ–¹çš„é•œåƒä»“åº“ï¼Œå°±å¯ä»¥å’Œå…¶ä»–äººå…±äº«äº†ã€‚</p><p>ä¸ºäº†èƒ½å¤Ÿä¸Šä¼ é•œåƒï¼Œä½ éœ€è¦å…ˆæ³¨å†Œä¸€ä¸ª <a href=\"https://hub.docker.com\">Docker Hub</a> çš„è´¦å·ï¼Œå¹¶ä¸”ä½¿ç”¨ docker login ç™»å½•ï¼Œè¿™å’Œæˆ‘ä»¬ä½¿ç”¨çš„ Git å·¥å…·ç±»ä¼¼ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œä½¿ç”¨ docke tag é‡å‘½åæˆ‘ä»¬ä¹‹å‰åœ¨æœ¬åœ°æ„å»ºçš„é•œåƒã€‚</p><pre><code class=\"language-powershell\">$ docker tag hello-world-flask my_dockerhub_name/hello-world-flask\n</code></pre><p>è¯·æ³¨æ„ï¼Œè¿™é‡Œéœ€è¦æŠŠ my_dockerhub_name æ›¿æ¢ä¸ºä½ å®é™…çš„ Docker Hub è´¦æˆ·åï¼Œä¹Ÿç§°ä¸ºé•œåƒä»“åº“çš„åå­—ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ docker push æŠŠæœ¬åœ°çš„é•œåƒä¸Šä¼ åˆ° Docker Hub äº†ã€‚</p><pre><code class=\"language-powershell\">$ docker push my_dockerhub_name/hello-world-flask\n</code></pre><p>æˆåŠŸä¸Šä¼ åï¼Œå…¶ä»–äººå¯ä»¥é€šè¿‡ docker pull å‘½ä»¤æ¥æ‹‰å–æˆ‘ä»¬ä¸Šä¼ çš„é•œåƒã€‚</p><h2>æ€»ç»“</h2><p>è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç»å…¸çš„ Python åº”ç”¨å®ä¾‹ï¼Œä» 0 å¼€å§‹è®¤è¯†äº† Docker é•œåƒå’Œå®¹å™¨ä»¥åŠ Docker ç›¸å…³çš„å‘½ä»¤ã€‚æˆ‘è¿˜å¸¦ä½ äº†è§£äº†å¦‚ä½•æ„å»ºå®¹å™¨é•œåƒï¼Œå¦‚ä½•ä¸Šä¼ å’Œåˆ†äº«é•œåƒã€‚</p><p>ä¸ç®¡ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆç¼–ç¨‹è¯­è¨€ï¼Œæ„å»ºé•œåƒçš„æ–¹æ³•éƒ½æ˜¯å·®ä¸å¤šçš„ï¼Œæˆ‘ä¸ºä½ æ€»ç»“äº†ä¸€å¥—æ–¹æ³•è®ºï¼Œç†Ÿæ‚‰äº†è¿™ä¸ªæ–¹æ³•ï¼Œå·¥ä½œä¸­è¦æ±‚çš„ Docker æ–¹é¢çš„çŸ¥è¯†åŸºæœ¬ä¸Šå°±å¤Ÿç”¨äº†ã€‚</p><p>æ€ä¹ˆæ ·ï¼Œç°åœ¨æ˜¯ä¸æ˜¯è§‰å¾—ä» 0 å¼€å§‹æ„å»ºå®¹å™¨é•œåƒä¹Ÿæ²¡æœ‰è¿™ä¹ˆéš¾ï¼Ÿ</p><p>åœ¨ä¸‹ä¸€èŠ‚è¯¾ä¸­ï¼Œæˆ‘å°†å¸¦ä½ ä» 0 æ­å»ºä¸€ä¸ª K8s é›†ç¾¤ï¼Œå¹¶æŠŠè¿™èŠ‚è¯¾æ„å»ºçš„å®¹å™¨é•œåƒéƒ¨ç½²åˆ° K8s é›†ç¾¤ä¸­ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æœ€åï¼Œç»™ä½ ç•™ä¸€é“æ€è€ƒé¢˜å§ã€‚</p><p>åœ¨æ„å»ºé•œåƒçš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆè¦å…ˆ COPY requirements.txt å†å®‰è£…ä¾èµ–ï¼Œè€Œä¸æ˜¯ COPY æ‰€æœ‰çš„æ–‡ä»¶åå†å®‰è£…ä¾èµ–å‘¢ï¼Ÿ</p><p>æ¬¢è¿ä½ ç»™æˆ‘ç•™è¨€äº¤æµè®¨è®ºï¼Œä½ ä¹Ÿå¯ä»¥æŠŠè¿™èŠ‚è¯¾åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚æˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ã€‚</p>","comments":[{"had_liked":false,"id":364343,"user_name":"é™ˆå¿—æˆ","can_delete":false,"product_type":"c1","uid":1150083,"ip_address":"å¹¿ä¸œ","ucode":"4ACAC378EA2735","user_header":"https://static001.geekbang.org/account/avatar/00/11/8c/83/1974d757.jpg","comment_is_top":false,"comment_ctime":1670845123,"is_pvip":true,"replies":[{"id":132493,"content":"ğŸ‘ğŸ» éå¸¸æ­£ç¡®ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1275456,"ctime":1671092529,"ip_address":"å¹¿ä¸œ","comment_id":364343,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100312001,"comment_content":"å› ä¸º docker é•œåƒæ˜¯åˆ†å±‚çš„ï¼Œå…ˆ COPY requirements.txt å†å®‰è£…ä¾èµ–ï¼Œè¿™æ · COPYï¼Œinstall è¿™ä¸¤å±‚ä¸åŒ…å«ä»£ç æ–‡ä»¶ï¼Œè¿™æ ·æ•´ä½“çš„é•œåƒå¤§å°ç›¸å¯¹æ›´å°ã€‚","like_count":32,"discussions":[{"author":{"id":1275456,"avatar":"https://static001.geekbang.org/account/avatar/00/13/76/40/791d0f5e.jpg","nickname":"ç‹ç‚œ","note":"","ucode":"B6F98A1EC06BDB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596559,"discussion_content":"ğŸ‘ğŸ» éå¸¸æ­£ç¡®ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671092530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1150083,"avatar":"https://static001.geekbang.org/account/avatar/00/11/8c/83/1974d757.jpg","nickname":"é™ˆå¿—æˆ","note":"","ucode":"4ACAC378EA2735","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596494,"discussion_content":"å®é™…ä¸­å˜åŒ–æ¯”è¾ƒå¤šçš„æ˜¯ä»£ç æ–‡ä»¶ï¼Œç›¸å¯¹å˜åŒ–æ¯”è¾ƒå°‘çš„æ˜¯é¡¹ç›®çš„ä¾èµ–ï¼ŒæŠŠä¾èµ–æ”¾åœ¨åº•å±‚ï¼Œè¿™æ ·ä»£ç å˜åŒ–æ—¶ï¼Œç›´æ¥æŠŠé¡¶å±‚çš„ä»£ç é‡æ–°æ›´æ–°ä¸€ä¸‹å°±å¥½äº†ï¼Œä¸éœ€è¦åŠ¨ä¸‹å±‚çš„ä¾èµ–ã€‚å¦‚æœåè¿‡æ¥ï¼Œæ¯æ¬¡ä»£ç æ›´æ–°éƒ½è¦æŠŠä¾èµ–è¿™ä¸€å±‚æ€èµ·æ¥ï¼Œæ‰èƒ½æ›´æ–°ä»£ç ï¼Œå®Œäº‹è¿˜è¦é‡æ–°å®‰è£…ä¾èµ–ï¼Œæ—¶é—´éƒ½ç™½ç™½æµªè´¹äº†ã€‚","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1671031265,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸­å›½å°æ¹¾","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1728431,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/5f/af/a2a7c866.jpg","nickname":"toranx11","note":"","ucode":"80F54B52BEE8B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1150083,"avatar":"https://static001.geekbang.org/account/avatar/00/11/8c/83/1974d757.jpg","nickname":"é™ˆå¿—æˆ","note":"","ucode":"4ACAC378EA2735","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":596547,"discussion_content":"å°±æ˜¯å¯ä»¥ä½¿ç”¨å®‰è£…ä¾èµ–çš„cache å±‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671079585,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":596494,"ip_address":"æ¹–å—","group_id":0},"score":596547,"extra":""},{"author":{"id":1675966,"avatar":"https://static001.geekbang.org/account/avatar/00/19/92/be/8de4e1fe.jpg","nickname":"kaizen","note":"","ucode":"313EEA97AEC7C3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1728431,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/5f/af/a2a7c866.jpg","nickname":"toranx11","note":"","ucode":"80F54B52BEE8B3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597642,"discussion_content":"åº”è¯¥æ˜¯ layer æœªè¢«ä¿®æ”¹çš„å±‚åœ¨ hub é‡Œæ˜¯å¤ç”¨çš„ï¼Œå¦‚æœå‡ æ¬¡ä»£ç ä¿®æ”¹ä¾èµ–éƒ½æœªæ”¹å˜ï¼Œä½ ä¸Šä¼ å’Œä¸‹è½½é•œåƒæ—¶ï¼Œå¯¹åº”çš„ä¾èµ–å±‚ layer å°±ä¸ç”¨é‡æ–°pull å’Œ push äº†ï¼Œåœ¨åºå¤§çš„é¡¹ç›®ä¸­ï¼Œå³çœäº†å¸¦å®½ä¹Ÿçœäº†å­˜å‚¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1672124604,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":596547,"ip_address":"åŒ—äº¬","group_id":0},"score":597642,"extra":""}]}]},{"had_liked":false,"id":364348,"user_name":"Daniel","can_delete":false,"product_type":"c1","uid":1020529,"ip_address":"å¹¿ä¸œ","ucode":"282E09B3146501","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/71/9fd7cd7a.jpg","comment_is_top":false,"comment_ctime":1670854975,"is_pvip":true,"replies":[{"id":132494,"content":"æ„Ÿè°¢ä½ å¯¹è¯¾ç¨‹çš„è®¤å¯ï¼Œæˆ‘ä¸ªäººä¹Ÿæ¯”è¾ƒå–œæ¬¢ä»å®æˆ˜å­¦ä¹ ä¸€é—¨æŠ€æœ¯ã€‚\n\nå›åˆ°ä½ çš„é—®é¢˜ï¼Œä»ç¼“å­˜çš„è§’åº¦ä¸Šæ¥è¯´æ˜¯è¿™æ ·çš„ã€‚æ‰€ä»¥åœ¨æ„å»ºé•œåƒçš„æ—¶å€™è¦æ³¨æ„æŠŠç»å¸¸ä¼šå˜åŒ–ä»¥åŠä¸å˜çš„åŒºåˆ†å¼€ï¼Œè¿™æ ·å¯ä»¥æœ€å¤§ç¨‹åº¦åˆ©ç”¨ç¼“å­˜ï¼ŒåŠ é€Ÿé•œåƒæ„å»ºé•œåƒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":1275456,"ctime":1671092712,"ip_address":"å¹¿ä¸œ","comment_id":364348,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100312001,"comment_content":"é¦–å…ˆæ„Ÿè°¢è€å¸ˆçš„æ–‡ç« ï¼Œæ¯”è¾ƒé€‚åˆæˆ‘è¿™ç§ å…ˆæ„Ÿå—,å†ç†è®ºï¼ˆå…ˆfeel it,å†know it)çš„å®æˆ˜æ´¾ã€‚\n\né—®é¢˜ä¸­çš„&quot;æ‰€æœ‰çš„æ–‡ä»¶&quot; å¯èƒ½æ˜¯ä¸€ä¸ªåŠ¨æ€å˜åŒ–çš„â€œä¸€å †æ–‡ä»¶â€ï¼Œå› ä¸ºåæœŸéšç€é¡¹ç›®çš„ä¸æ–­è¿­ä»£ï¼Œé‡Œé¢ä¼šå¼•è¿›ä¸€äº›å…¶å®ƒçš„æ–‡ä»¶ï¼Œå› æ­¤è¿™ä¸ªæ‰€è°“çš„â€œæ‰€æœ‰æ–‡ä»¶â€å¯èƒ½æ˜¯ä¸€ä¸ªåŠ¨æ€æ–‡ä»¶ï¼Œ è€Œ COPY requirements.txt åœ¨ä»Šåçš„é•œåƒæ„å»ºé‡Œæ˜¯ä¸€ä¸ªé™æ€çš„å•ä¸€æ–‡ä»¶ï¼Œå› ä¸ºåªæœ‰&#39;requirements.txt&#39;ã€‚\n\ndocker åœ¨æ„å»ºé•œåƒçš„æ—¶å€™ï¼Œdockerfileçš„ä¼šæ¯ä¸€ä¸ªå‘½ä»¤ä¼šæ„å»ºä¸€ä¸ªå±‚ï¼Œ\nè€Œåœ¨æ„å»ºçš„æ—¶å€™æ˜¯æœ‰ä¸€ä¸ªç¼“å­˜çš„ç‰¹ç‚¹ï¼Œè€Œè¿™ä¸ªç¼“å­˜æœºåˆ¶å¦‚æœæ˜¯é‡åˆ°å‘ç”Ÿå˜åŒ–çš„å±‚ï¼Œå³ä½¿åé¢çš„å±‚æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œä¹Ÿä¼šé‡æ–°æ„å»ºï¼Œè¿›è€Œå¹¶ä¸ä¼šç”¨åˆ°ç¼“å­˜ã€‚\næ‰€ä»¥ï¼ŒæŠŠä¸å˜çš„å±‚æ”¾åœ¨å‰é¢ï¼Œå˜çš„å±‚æ”¾åœ¨åé¢ï¼Œå°±ä¼šè®©å˜åŒ–ä¹‹å‰çš„å±‚åˆ©ç”¨åˆ°æ„å»ºé•œåƒçš„ç¼“å­˜æœºåˆ¶ï¼Œæ¥åŠ é€Ÿæ„å»ºé•œåƒçš„æ—¶é—´ã€‚\n\nä¸çŸ¥é“æˆ‘è¯´çš„å¯¹ä¸ï¼Œè¿˜è¯·è€å¸ˆæŒ‡ç‚¹ï¼Œæˆ‘ä¹‹å‰æœ‰é‡åˆ°è¿‡è¿™ä¸ªé—®é¢˜ã€‚","like_count":12,"discussions":[{"author":{"id":1275456,"avatar":"https://static001.geekbang.org/account/avatar/00/13/76/40/791d0f5e.jpg","nickname":"ç‹ç‚œ","note":"","ucode":"B6F98A1EC06BDB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596560,"discussion_content":"æ„Ÿè°¢ä½ å¯¹è¯¾ç¨‹çš„è®¤å¯ï¼Œæˆ‘ä¸ªäººä¹Ÿæ¯”è¾ƒå–œæ¬¢ä»å®æˆ˜å­¦ä¹ ä¸€é—¨æŠ€æœ¯ã€‚\n\nå›åˆ°ä½ çš„é—®é¢˜ï¼Œä»ç¼“å­˜çš„è§’åº¦ä¸Šæ¥è¯´æ˜¯è¿™æ ·çš„ã€‚æ‰€ä»¥åœ¨æ„å»ºé•œåƒçš„æ—¶å€™è¦æ³¨æ„æŠŠç»å¸¸ä¼šå˜åŒ–ä»¥åŠä¸å˜çš„åŒºåˆ†å¼€ï¼Œè¿™æ ·å¯ä»¥æœ€å¤§ç¨‹åº¦åˆ©ç”¨ç¼“å­˜ï¼ŒåŠ é€Ÿé•œåƒæ„å»ºé•œåƒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671092712,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364796,"user_name":"Librant","can_delete":false,"product_type":"c1","uid":1210476,"ip_address":"å¹¿ä¸œ","ucode":"08173F7B9994C1","user_header":"https://static001.geekbang.org/account/avatar/00/12/78/6c/be47a916.jpg","comment_is_top":false,"comment_ctime":1671507828,"is_pvip":false,"replies":[{"id":132837,"content":"å¤ªæ£’äº†ï¼å·² Starã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1275456,"ctime":1671521066,"ip_address":"å¹¿ä¸œ","comment_id":364796,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100312001,"comment_content":"è·Ÿç€è€å¸ˆä¸€æ­¥ä¸€ä¸ªè„šå°ï¼Œgithub.com&#47;librant&#47;git-ops-learn æ¯ç« èŠ‚çš„è¯¦ç»†å®è·µï¼Œå¯ä»¥å¤§å®¶ä¸€èµ·å­¦ä¹ åˆ†äº«ï¼Œè§‰å¾—ä¸é”™çš„å¯ä»¥å¸®å¿™ starä¸€ä¸‹ï¼Œæˆ‘ä¼šåšæŒåˆ°è¯¾ç¨‹ç»“æŸå˜","like_count":6,"discussions":[{"author":{"id":1275456,"avatar":"https://static001.geekbang.org/account/avatar/00/13/76/40/791d0f5e.jpg","nickname":"ç‹ç‚œ","note":"","ucode":"B6F98A1EC06BDB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597190,"discussion_content":"å¤ªæ£’äº†ï¼å·² Starã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671521066,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1523520,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/IOUaxuWlsqMTsq26688iay3mjwibPue3vU6MylMPeWXUrNKB91qS5rxuicL2nKB5T5gMibhapRO39KjdMWyr532zLw/132","nickname":"feixia5712","note":"","ucode":"ED68E4FBCA40BB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606707,"discussion_content":"æ²¡æŒç»­æ›´æ–°å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677318466,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å±±ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364356,"user_name":"Dexter","can_delete":false,"product_type":"c1","uid":2608728,"ip_address":"å¹¿ä¸œ","ucode":"909CABC4AC4AC9","user_header":"https://static001.geekbang.org/account/avatar/00/27/ce/58/71ed845f.jpg","comment_is_top":false,"comment_ctime":1670891535,"is_pvip":true,"replies":[{"id":132496,"content":"å¯¹å¤§çš„åŒºåˆ«æ˜¯ BuildKit æ”¯æŒå¹¶è¡Œæ„å»ºï¼Œæ ‡å‡†çš„ docker build å‘½ä»¤æ˜¯ä¸²è¡Œæ„å»ºçš„ã€‚å½“ç„¶å®ƒè¿˜æœ‰å…¶ä»–å¾ˆå¤šçš„ç‰¹æ€§ï¼Œæ¯”å¦‚è‡ªåŠ¨åƒåœ¾å›æ”¶ã€æ›´é«˜æ•ˆçš„ç¼“å­˜ï¼ˆæ”¯æŒä»è¿œç«¯ä»“åº“è¯»å–ç¼“å­˜ï¼‰ã€ä¸éœ€è¦ Root ç‰¹æƒç­‰ç­‰ã€‚\nBuildKit å…¶å®ä¸ä»…ä»…å¯ä»¥ç”¨æ¥æ„å»ºé•œåƒï¼Œæœ€è¿‘æ¯”è¾ƒç« Dagger é¡¹ç›®ç”¨ BuildKit åš CI&#47;CDï¼Œéå¸¸æœ‰æ„æ€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1275456,"ctime":1671093537,"ip_address":"å¹¿ä¸œ","comment_id":364356,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100312001,"comment_content":"è€å¸ˆè®²ä¸€ä¸‹æœ€æ–°çš„buildkitå’Œä¹‹å‰docker builtä¹‹é—´çš„å¼‚åŒ","like_count":5,"discussions":[{"author":{"id":1275456,"avatar":"https://static001.geekbang.org/account/avatar/00/13/76/40/791d0f5e.jpg","nickname":"ç‹ç‚œ","note":"","ucode":"B6F98A1EC06BDB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596564,"discussion_content":"å¯¹å¤§çš„åŒºåˆ«æ˜¯ BuildKit æ”¯æŒå¹¶è¡Œæ„å»ºï¼Œæ ‡å‡†çš„ docker build å‘½ä»¤æ˜¯ä¸²è¡Œæ„å»ºçš„ã€‚å½“ç„¶å®ƒè¿˜æœ‰å…¶ä»–å¾ˆå¤šçš„ç‰¹æ€§ï¼Œæ¯”å¦‚è‡ªåŠ¨åƒåœ¾å›æ”¶ã€æ›´é«˜æ•ˆçš„ç¼“å­˜ï¼ˆæ”¯æŒä»è¿œç«¯ä»“åº“è¯»å–ç¼“å­˜ï¼‰ã€ä¸éœ€è¦ Root ç‰¹æƒç­‰ç­‰ã€‚\nBuildKit å…¶å®ä¸ä»…ä»…å¯ä»¥ç”¨æ¥æ„å»ºé•œåƒï¼Œæœ€è¿‘æ¯”è¾ƒç« Dagger é¡¹ç›®ç”¨ BuildKit åš CI/CDï¼Œéå¸¸æœ‰æ„æ€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671093537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364462,"user_name":"ä¸¹æ«æŸ“ç§‹è‰²","can_delete":false,"product_type":"c1","uid":1023930,"ip_address":"å¹¿ä¸œ","ucode":"4E9A35439B615F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9f/ba/5a9cb72f.jpg","comment_is_top":false,"comment_ctime":1670996116,"is_pvip":false,"replies":[{"id":132507,"content":"âœ…","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1275456,"ctime":1671095294,"ip_address":"å¹¿ä¸œ","comment_id":364462,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100312001,"comment_content":"æ€è€ƒé¢˜ï¼šå› ä¸ºé•œåƒæ˜¯æŒ‰ç…§åˆ†å±‚æ„å»ºçš„ï¼Œå¦‚æœæ¯ä¸€å±‚çš„æ–‡ä»¶æ²¡æœ‰å˜åŒ–ï¼Œæ˜¯ä¸ä¼šé‡å¤æ„å»ºçš„ï¼Œä¼šä½¿ç”¨ä¹‹å‰æ„å»ºå¥½çš„å±‚ï¼ŒåŠ å¿«æ„å»ºé€Ÿåº¦","like_count":4,"discussions":[{"author":{"id":1275456,"avatar":"https://static001.geekbang.org/account/avatar/00/13/76/40/791d0f5e.jpg","nickname":"ç‹ç‚œ","note":"","ucode":"B6F98A1EC06BDB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596577,"discussion_content":"âœ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671095294,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":365308,"user_name":"Layne","can_delete":false,"product_type":"c1","uid":1479934,"ip_address":"å¹¿ä¸œ","ucode":"1FEAACD900AB39","user_header":"https://static001.geekbang.org/account/avatar/00/16/94/fe/5fbf1bdc.jpg","comment_is_top":false,"comment_ctime":1672363350,"is_pvip":true,"replies":[{"id":133069,"content":"æ­£ç¡®ï¼æœ€å¤§ç¨‹åº¦åˆ©ç”¨ç¼“å­˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1275456,"ctime":1672370539,"ip_address":"å¹¿ä¸œ","comment_id":365308,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100312001,"comment_content":"dockeråœ¨æ„å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œæ˜¯æœ‰ä¸ªåˆ†å±‚çš„æ¦‚å¿µï¼Œå¯ä»¥é€šè¿‡æŒ‡ä»¤ docker inspect 185eac234bc3ã€‚å¯ä»¥çœ‹åˆ°å¯¹åº”çš„åˆ†å±‚RootFSä¿¡æ¯ã€‚æ‰€ä»¥åœ¨ç¼–å†™æ„å»ºè¯­å¥çš„æ—¶å€™ï¼Œéœ€è¦è€ƒè™‘é™æ€å’ŒåŠ¨æ€ä¿¡æ¯ï¼Œè¿™æ ·å¯ä»¥å‡å°‘å­˜å‚¨å¤§å°ï¼Œé™æ€ä¿¡æ¯å¯¹åº”çš„åˆ†å±‚æ˜¯ä¸éœ€è¦é‡æ–°ç”Ÿæˆçš„ã€‚","like_count":1,"discussions":[{"author":{"id":1275456,"avatar":"https://static001.geekbang.org/account/avatar/00/13/76/40/791d0f5e.jpg","nickname":"ç‹ç‚œ","note":"","ucode":"B6F98A1EC06BDB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597955,"discussion_content":"æ­£ç¡®ï¼æœ€å¤§ç¨‹åº¦åˆ©ç”¨ç¼“å­˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1672370539,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366907,"user_name":"èŒƒé£æ‰¬","can_delete":false,"product_type":"c1","uid":2721761,"ip_address":"å¹¿è¥¿","ucode":"A665DF46833A81","user_header":"https://static001.geekbang.org/account/avatar/00/29/87/e1/b3edcc09.jpg","comment_is_top":false,"comment_ctime":1674573520,"is_pvip":false,"replies":[{"id":133918,"content":"æ„Ÿè°¢ï¼Œå¾ˆå¥½çš„å»ºè®®~","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1275456,"ctime":1675416329,"ip_address":"å¹¿ä¸œ","comment_id":366907,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100312001,"comment_content":"æœ‰ä¸ªå°å»ºè®®ï¼Œæ–‡ä¸­shellå‘½ä»¤å¯ä»¥å»æ‰å‰é¢çš„$ç¬¦å·å—ï¼Œå› ä¸ºæŒ‰â€œå¤åˆ¶ä»£ç â€çš„æ—¶å€™ä¹Ÿä¼šæŠŠ$å¤åˆ¶è¿›æ¥ã€‚ã€Šk8så…¥é—¨å®æˆ˜ã€‹å°±æ˜¯æˆ‘è¯´çš„è¿™æ ·çš„","like_count":0,"discussions":[{"author":{"id":1275456,"avatar":"https://static001.geekbang.org/account/avatar/00/13/76/40/791d0f5e.jpg","nickname":"ç‹ç‚œ","note":"","ucode":"B6F98A1EC06BDB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":601823,"discussion_content":"æ„Ÿè°¢ï¼Œå¾ˆå¥½çš„å»ºè®®~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1675416329,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364420,"user_name":"ç å°å‘†","can_delete":false,"product_type":"c1","uid":2055809,"ip_address":"å¹¿ä¸œ","ucode":"44532D6ABF9340","user_header":"https://static001.geekbang.org/account/avatar/00/1f/5e/81/82709d6e.jpg","comment_is_top":false,"comment_ctime":1670942671,"is_pvip":false,"replies":[{"id":132503,"content":"å¯ä»¥å®è·µä¸€ä¸‹è¯•è¯•çœ‹~","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1275456,"ctime":1671094883,"ip_address":"å¹¿ä¸œ","comment_id":364420,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100312001,"comment_content":"å› ä¸ºè¯­å¥æ˜¯è‡ªä¸Šè€Œä¸‹æ‰§è¡Œçš„,å¦‚æœéƒ½copyæ–‡ä»¶,é‚£ä¹ˆæœ‰äº›æ–‡ä»¶çš„ä¾èµ–æ²¡æœ‰å®‰è£…,é‚£ä¹ˆæ‰§è¡Œå°±ä¼šä¿æŒ,é•œåƒå°±æ— æ³•æ„å»ºæˆåŠŸ,ä¼šå¤±è´¥,æ‰€ä»¥éœ€è¦å…ˆå®‰è£…ä¾èµ–,åœ¨copyæ‰€æœ‰æ–‡ä»¶","like_count":0,"discussions":[{"author":{"id":1275456,"avatar":"https://static001.geekbang.org/account/avatar/00/13/76/40/791d0f5e.jpg","nickname":"ç‹ç‚œ","note":"","ucode":"B6F98A1EC06BDB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596573,"discussion_content":"å¯ä»¥å®è·µä¸€ä¸‹è¯•è¯•çœ‹~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671094883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364775,"user_name":"ghostwritten","can_delete":false,"product_type":"c1","uid":1308196,"ip_address":"åŒ—äº¬","ucode":"AE512F2E24A1A0","user_header":"https://static001.geekbang.org/account/avatar/00/13/f6/24/547439f1.jpg","comment_is_top":false,"comment_ctime":1671467631,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":1,"score":2,"product_id":100312001,"comment_content":"åº”ç”¨ï¼š\n - python flask demo\n - go gin demo\n - nodejs\n - shell........\n\ndocker login -u &lt;user&gt; -p &lt;passwd&gt; url\ndocker pull &amp; docker push\ndocker tag &lt;image&gt;:tag  &lt;rep&gt;&#47;&lt;image&gt;:new-tag\ndocker build -t flask:v1.0.0 -f Dockerfile .   \ndocker run -ti -p 8080:5000 -v &#47;app&#47;data:&#47;app&#47;data -v &#47;app&#47;config:&#47;app&#47;config --name flask-demo hello-world-flask:latest\n\nç¼–å†™ Dockerfileï¼š\nhttps:&#47;&#47;smoothies.com.cn&#47;docker-docs&#47;Docker&#47;Dockerfile&#47;\n\né•œåƒæ„å»ºå·¥å…·ï¼š[buildah](https:&#47;&#47;ghostwritten.blog.csdn.net&#47;article&#47;details&#47;128024372)\né•œåƒæ¬è¿å·¥å…·ï¼š[skopeo](https:&#47;&#47;ghostwritten.blog.csdn.net&#47;article&#47;details&#47;127342981)\nç§æœ‰é•œåƒä»“åº“ï¼šregistryã€VMware harborã€ jfrog artifactoryã€SUSE Portusã€Sonatype Nexus\nå…¬å…±é•œåƒä»“åº“ï¼šdocker.ioã€quay.io.......\næ— å®ˆæŠ¤è¿›ç¨‹å®¹å™¨å¼•æ“ï¼š[podman](https:&#47;&#47;blog.csdn.net&#47;xixihahalelehehe&#47;article&#47;details&#47;121611523)","like_count":2},{"had_liked":false,"id":383650,"user_name":"dj","can_delete":false,"product_type":"c1","uid":1512964,"ip_address":"åŒ—äº¬","ucode":"F6803089067D80","user_header":"https://static001.geekbang.org/account/avatar/00/17/16/04/3168b413.jpg","comment_is_top":false,"comment_ctime":1699408421,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100312001,"comment_content":"è‡ªå·± docker build å®¹å™¨è·‘ä¸èµ·æ¥ \n\n$ docker ps\nCONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES  \n\nå·²ç»æ‰§è¡Œ äº†\n$ docker run -d -p 8000:5000 hello-word-flask\n15b89d9d304cee1ee8377bebbf657ff7c5ddbef3fab8772e9dc0a6b674906160\n","like_count":0,"discussions":[{"author":{"id":1442097,"avatar":"https://static001.geekbang.org/account/avatar/00/16/01/31/4d116521.jpg","nickname":"é¹é¹å“¥","note":"","ucode":"28452AB202EA9A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635750,"discussion_content":"docker logs 15b89d9d304 çœ‹ä¸‹å…·ä½“æŠ¥é”™","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1705119689,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸­å›½é¦™æ¸¯","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383648,"user_name":"dj","can_delete":false,"product_type":"c1","uid":1512964,"ip_address":"åŒ—äº¬","ucode":"F6803089067D80","user_header":"https://static001.geekbang.org/account/avatar/00/17/16/04/3168b413.jpg","comment_is_top":false,"comment_ctime":1699407348,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100312001,"comment_content":"build æŠ¥é”™\n\n------\nDockerfile:5\n--------------------\n   3 |     FROM python:3.8-slim-buster\n   4 |\n   5 | &gt;&gt;&gt; RUN apt-get update &amp;&amp; apt-get install -y procps vim apache2-utils &amp;&amp; rm -rf &#47;var&#47;lib&#47;apt&#47;lists&#47;*\n   6 |\n   7 |     WORKDIR &#47;app\n--------------------\nERROR: failed to solve: process &quot;&#47;bin&#47;sh -c apt-get update &amp;&amp; apt-get install -y procps vim apache2-utils &amp;&amp; rm -rf &#47;var&#47;lib&#47;apt&#47;lists&#47;*&quot; did not complete successfully: exit code: 100","like_count":0},{"had_liked":false,"id":383482,"user_name":"Geek_xhmiao","can_delete":false,"product_type":"c1","uid":1527933,"ip_address":"åŒ—äº¬","ucode":"671B512C2DAE26","user_header":"https://static001.geekbang.org/account/avatar/00/17/50/7d/ffdc60e6.jpg","comment_is_top":false,"comment_ctime":1699115130,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":3,"product_id":100312001,"comment_content":"æˆ‘è‡ªå·±buildå‡ºæ¥çš„å®¹å™¨ï¼Œä¸€è¿è¡Œå°±æŠ¥é”™ï¼Œæ˜¯æ€ä¹ˆå›äº‹å‘€ï¼Ÿ\nTraceback (most recent call last):\n  File &quot;&#47;usr&#47;local&#47;lib&#47;python3.8&#47;runpy.py&quot;, line 185, in _run_module_as_main\n    mod_name, mod_spec, code = _get_module_details(mod_name, _Error)\n  File &quot;&#47;usr&#47;local&#47;lib&#47;python3.8&#47;runpy.py&quot;, line 144, in _get_module_details\n    return _get_module_details(pkg_main_name, error)\n  File &quot;&#47;usr&#47;local&#47;lib&#47;python3.8&#47;runpy.py&quot;, line 111, in _get_module_details\n    __import__(pkg_name)\n  File &quot;&#47;usr&#47;local&#47;lib&#47;python3.8&#47;site-packages&#47;flask&#47;__init__.py&quot;, line 5, in &lt;module&gt;\n    from .app import Flask as Flask\n  File &quot;&#47;usr&#47;local&#47;lib&#47;python3.8&#47;site-packages&#47;flask&#47;app.py&quot;, line 30, in &lt;module&gt;\n    from werkzeug.urls import url_quote\nImportError: cannot import name &#39;url_quote&#39; from &#39;werkzeug.urls&#39; (&#47;usr&#47;local&#47;lib&#47;python3.8&#47;site-packages&#47;werkzeug&#47;urls.py)\nçœ‹èµ·æ¥åƒæ˜¯werkzeugç‰ˆæœ¬çš„é—®é¢˜ï¼Œä½†éƒ½æ˜¯é€šè¿‡requirements.txtè‡ªåŠ¨ä¸‹è½½çš„å‘€ï¼Œæ±‚æŒ‡å¯¼","like_count":0,"discussions":[{"author":{"id":1442097,"avatar":"https://static001.geekbang.org/account/avatar/00/16/01/31/4d116521.jpg","nickname":"é¹é¹å“¥","note":"","ucode":"28452AB202EA9A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635749,"discussion_content":"é»˜è®¤å®‰è£… flaskä¾èµ–çš„Werkzeugç‰ˆæœ¬ä¸º3.0.0ï¼Œä½†æ˜¯ä¸å…¼å®¹Flask 2.2.2ï¼Œéœ€è¦åœ¨requirements.txtæ–‡ä»¶ä¸­æŒ‡å®š Werkzeug==2.2.2å³å¯ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1705119314,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸­å›½é¦™æ¸¯","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1372780,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f2/6c/1a080d7c.jpg","nickname":"Edward Guo","note":"","ucode":"7235E87BAB3CD0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":638842,"discussion_content":"éå¸¸æ„Ÿè°¢ï¼Œæœç„¶æœ‰æ•ˆï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1709989058,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383480,"user_name":"Geek_xhmiao","can_delete":false,"product_type":"c1","uid":1527933,"ip_address":"åŒ—äº¬","ucode":"671B512C2DAE26","user_header":"https://static001.geekbang.org/account/avatar/00/17/50/7d/ffdc60e6.jpg","comment_is_top":false,"comment_ctime":1699109444,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100312001,"comment_content":"é•œåƒæ„å»ºä¸€ç›´å¡ç€ä¸åŠ¨å’‹åŠå‘€ï¼Ÿ ç”¨çš„å·²ç»æ˜¯å›½å†…çš„æºäº†\n[root@k8s-master01 gitops]# docker build -t hello-world-flask .\nSending build context to Docker daemon  4.096kB\nStep 1&#47;7 : FROM python:3.8-slim-buster\n ---&gt; 5cc8cb0c433a\nStep 2&#47;7 : RUN apt-get update &amp;&amp; apt-get install -y procps vim apache2-utils &amp;&amp; rm -rf &#47;var&#47;lib&#47;apt&#47;lists&#47;*\n ---&gt; Running in d71828d7172d\nGet:1 http:&#47;&#47;security.debian.org&#47;debian-security buster&#47;updates InRelease [34.8 kB]\nGet:2 http:&#47;&#47;deb.debian.org&#47;debian buster InRelease [122 kB]\nGet:3 http:&#47;&#47;deb.debian.org&#47;debian buster-updates InRelease [56.6 kB]\nGet:4 http:&#47;&#47;security.debian.org&#47;debian-security buster&#47;updates&#47;main amd64 Packages [568 kB]\nGet:5 http:&#47;&#47;deb.debian.org&#47;debian buster&#47;main amd64 Packages [7909 kB]\n","like_count":0}]}