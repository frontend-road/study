{"id":96994,"title":"12 | è¿›ç¨‹å†…ååŒï¼šåŒæ­¥ã€äº’æ–¥ä¸é€šè®¯","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ä¸ƒç‰›äº‘è®¸å¼ä¼Ÿã€‚</p><p>ä¸Šä¸€è®²å¼€å§‹æˆ‘ä»¬è¿›å…¥äº†å¤šä»»åŠ¡çš„ä¸–ç•Œï¼Œæˆ‘ä»¬è¯¦ç»†ä»‹ç»äº†ä¸‰ç±»æ‰§è¡Œä½“ï¼šè¿›ç¨‹ã€çº¿ç¨‹å’Œåç¨‹ï¼Œå¹¶ä¸”ä»‹ç»äº†æ¯ä¸€ç§æ‰§è¡Œä½“çš„ç‰¹ç‚¹ã€‚</p><p>æ—¢ç„¶å¯åŠ¨äº†å¤šä¸ªæ‰§è¡Œä½“ï¼Œå®ƒä»¬å°±éœ€è¦ç›¸äº’ååŒï¼Œä»Šå¤©æˆ‘ä»¬å…ˆè®¨è®ºè¿›ç¨‹å†…çš„æ‰§è¡Œä½“ååŒã€‚</p><p>è€ƒè™‘åˆ°è¿›ç¨‹å†…çš„æ‰§è¡Œä½“æœ‰ä¸¤ç±»ï¼šç”¨æˆ·æ€çš„åç¨‹ï¼ˆä»¥ Go è¯­è¨€çš„ goroutine ä¸ºä»£è¡¨ï¼‰ã€æ“ä½œç³»ç»Ÿçš„çº¿ç¨‹ï¼Œæˆ‘ä»¬å¯¹è¿™ä¸¤ç±»æ‰§è¡Œä½“çš„ååŒæœºåˆ¶åšä¸ªæ¦‚è¦ã€‚å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/57/1b/575d31c0ebf3f4a6148a211387bdae1b.jpg?wh=613*571\" alt=\"\"></p><p>è®©æˆ‘ä»¬é€ä¸€è¯¦ç»†åˆ†æä¸€ä¸‹å®ƒä»¬ã€‚</p><h2>åŸå­æ“ä½œ</h2><p>é¦–å…ˆè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹åŸå­æ“ä½œã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒåŸå­æ“ä½œæ˜¯ CPU æä¾›çš„èƒ½åŠ›ï¼Œä¸æ“ä½œç³»ç»Ÿæ— å…³ã€‚è¿™é‡Œåˆ—ä¸Šåªæ˜¯ä¸ºäº†è®©ä½ èƒ½å¤Ÿçœ‹åˆ°è¿›ç¨‹å†…é€šè®¯çš„å…¨è²Œã€‚</p><p>é¡¾åæ€ä¹‰ï¼ŒåŸå­æ“ä½œçš„æ¯ä¸€ä¸ªæ“ä½œéƒ½æ˜¯åŸå­çš„ï¼Œä¸ä¼šä¸­é€”è¢«äººæ‰“æ–­ï¼Œè¿™ä¸ªåŸå­æ€§æ˜¯ CPU ä¿è¯çš„ï¼Œä¸æ‰§è¡Œä½“çš„ç§ç±»æ— å…³ï¼Œæ— è®º goroutine è¿˜æ˜¯æ“ä½œç³»ç»Ÿçº¿ç¨‹éƒ½é€‚ç”¨ã€‚</p><p>ä»è¯­ä¹‰ä¸Šæ¥è¯´ï¼ŒåŸå­æ“ä½œå¯ä»¥ç”¨äº’æ–¥ä½“æ¥å®ç°ï¼Œåªä¸è¿‡åŸå­æ“ä½œè¦å¿«å¾—å¤šã€‚</p><p>ä¾‹å¦‚ï¼š</p><pre><code>var val int32\n...\nnewval = atomic.AddInt32(&amp;val, delta)\n</code></pre><p>ç­‰ä»·äºï¼š</p><pre><code>var val int32\nvar mutex sync.Mutex\n...\nmutex.Lock()\nval += delta\nnewval = val\nmutex.Unlock()\n</code></pre><h2>æ‰§è¡Œä½“çš„äº’æ–¥</h2><p>äº’æ–¥ä½“ä¹Ÿå«é”ã€‚é”ç”¨äºå¤šä¸ªæ‰§è¡Œä½“ä¹‹é—´çš„äº’æ–¥è®¿é—®ï¼Œé¿å…å¤šä¸ªæ‰§è¡Œä½“åŒæ—¶æ“ä½œä¸€ç»„æ•°æ®äº§ç”Ÿç«äº‰ã€‚å…¶ä½¿ç”¨ç•Œé¢ä¸Šå¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p><pre><code>func (m *Mutex) Lock()\nfunc (m *Mutex) Unlock()\n</code></pre><p>é”çš„ä½¿ç”¨èŒƒå¼æ¯”è¾ƒç®€å•ï¼šåœ¨æ“ä½œéœ€è¦äº’æ–¥çš„æ•°æ®å‰ï¼Œå…ˆè°ƒç”¨ Lockï¼Œæ“ä½œå®Œæˆåå°±è°ƒç”¨ Unlockã€‚ä½†æ€»æ˜¯å­˜åœ¨ä¸€äº›ä¸æ±‚ç”šè§£çš„äººï¼Œå¯¹é”å­˜åœ¨å„ç§è¯¯è§£ã€‚</p><!-- [[[read_end]]] --><p>æœ‰çš„äººä¼šè¯´é”å¾ˆæ…¢ã€‚ç”šè‡³æˆ‘æ›¾çœ‹åˆ°æœ‰ Go ç¨‹åºå‘˜ç”¨ channel æ¥æ¨¡æ‹Ÿé”ï¼Œç†ç”±å°±æ˜¯é”å¤ªæ…¢äº†ï¼Œå°½é‡ä¸è¦ç”¨é”ã€‚äº§ç”Ÿâ€œé”æ…¢ï¼Œchannel å¿«â€è¿™ç§é”™è§‰çš„ä¸€ä¸ªåŸå› ï¼Œå¯èƒ½æ˜¯äººä»¬ç»å¸¸çœ‹åˆ°è¿™æ ·çš„å¿ å‘Šï¼š</p><blockquote>\n<p><strong>ä¸è¦é€šè¿‡å…±äº«å†…å­˜ï¼ˆé”ï¼‰æ¥é€šä¿¡ï¼Œè¦é€šè¿‡é€šä¿¡ï¼ˆchannelï¼‰æ¥å…±äº«å†…å­˜ã€‚</strong></p>\n</blockquote><p>ä¸æ˜å°±é‡Œçš„äººä»¬çœ‹åˆ°è¿™è¯åï¼Œå¯èƒ½å°±æœ‰äº†è¿™æ ·çš„å°è±¡ï¼šé”æ˜¯åçš„ï¼Œé”æ˜¯æ€§èƒ½æ€æ‰‹ï¼Œchannel æ˜¯å¥½çš„ï¼Œæ˜¯ Go å‘æ˜çš„å…ˆè¿›æ­¦å™¨ï¼Œåº”è¯¥å°½å¯èƒ½ç”¨ channelï¼Œè€Œä¸è¦ç”¨é”ã€‚</p><p>å¿«æ…¢æ˜¯ç›¸å¯¹è€Œè¨€çš„ã€‚é”çš„ç¡®ä¼šå¯¼è‡´ä»£ç ä¸²è¡Œæ‰§è¡Œï¼Œæ‰€ä»¥åœ¨æŸæ®µä»£ç å¹¶å‘åº¦éå¸¸é«˜çš„æƒ…å†µä¸‹ï¼Œä¸²è¡Œæ‰§è¡Œçš„ç¡®ä¼šå¯¼è‡´æ€§èƒ½çš„æ˜¾è‘—é™ä½ã€‚ä½†å¹³å¿ƒè€Œè®ºï¼Œç›¸æ¯”å…¶ä»–çš„è¿›ç¨‹å†…é€šè®¯çš„åŸè¯­æ¥è¯´ï¼Œé”å¹¶ä¸æ…¢ã€‚ä»è¿›ç¨‹å†…é€šè®¯æ¥è¯´ï¼Œæ¯”é”å¿«çš„ä¸œè¥¿ï¼Œåªæœ‰åŸå­æ“ä½œã€‚</p><p>ä¾‹å¦‚ channelï¼Œä½œä¸ºè¿›ç¨‹å†…æ‰§è¡Œä½“é—´ä¼ é€’æ•°æ®çš„è®¾æ–½æ¥è¯´ï¼Œå®ƒæœ¬èº«æ˜¯å…±äº«å˜é‡ï¼Œæ‰€ä»¥ channel çš„æ¯ä¸ªæ“ä½œå¿…ç„¶æ˜¯æœ‰é”çš„ã€‚äº‹å®ä¸Šï¼Œchannel çš„æ¯ä¸ªæ“ä½œéƒ½æ¯”è¾ƒè€—æ—¶ã€‚å…³äºè¿™ä¸€ç‚¹ï¼Œåœ¨ä¸‹æ–‡è§£é‡Š channel èƒŒåçš„å·¥ä½œæœºç†åï¼Œä½ å°±ä¼šæ¸…æ¥šçŸ¥é“ã€‚</p><p>é‚£ä¹ˆé”çš„é—®é¢˜åœ¨å“ªé‡Œï¼Ÿé”çš„æœ€å¤§é—®é¢˜åœ¨äºä¸å®¹æ˜“æ§åˆ¶ã€‚é” Lock äº†ä½†æ˜¯å¿˜è®° Unlock åæ˜¯ç¾éš¾æ€§çš„ï¼Œå› ä¸ºç›¸å½“äºæœåŠ¡å™¨æŒ‚äº†ï¼Œæ‰€æœ‰å’Œè¯¥é”ç›¸å…³çš„ä»£ç éƒ½ä¸èƒ½è¢«æ‰§è¡Œã€‚</p><p>æ¯”å¦‚ï¼š</p><pre><code>mutex.Lock()\ndoSth()\nmutex.Unlock()\n</code></pre><p>åœ¨è€ƒè™‘å¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œè¿™æ®µä»£ç æ˜¯ä¸å®‰å…¨çš„ï¼Œå¦‚æœ doSth æŠ›å‡ºäº†å¼‚å¸¸ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±ä¼šå‡ºç°é—®é¢˜ã€‚</p><p>ä¸ºæ­¤ Go è¯­è¨€è¿˜ä¸“é—¨å‘æ˜äº†ä¸€ä¸ª defer è¯­æ³•æ¥ä¿è¯é…å¯¹ï¼š</p><pre><code>mutex.Lock()\ndefer mutex.Unlock()\ndoSth()\n</code></pre><p>è¿™æ ·å¯ä»¥ä¿è¯å³ä½¿ doSth å‘ç”Ÿå¼‚å¸¸ï¼Œmutex.Unlock ä»ç„¶ä¼šè¢«æ­£ç¡®åœ°æ‰§è¡Œã€‚è¿™ç±»åœ¨å¼‚å¸¸æƒ…å†µä¸‹ä¹Ÿèƒ½å¤Ÿæ­£å¸¸å·¥ä½œçš„ä»£ç ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º â€œå¯¹å¼‚å¸¸å®‰å…¨çš„ä»£ç â€ã€‚å¦‚æœè¯­è¨€ä¸æ”¯æŒ deferï¼Œè€Œæ˜¯æ”¯æŒ try .. catchï¼Œé‚£ä¹ˆä»£ç å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š</p><pre><code>mutex.Lock()\ntry {\n    doSth()\n} catch (e Exception) {\n    mutex.Unlock()\n    throw e\n}\nmutex.Unlock()\n</code></pre><p>é”ä¸å®¹æ˜“æ§åˆ¶çš„å¦ä¸€ä¸ªè¡¨ç°æ˜¯é”ç²’åº¦çš„é—®é¢˜ã€‚ä¾‹å¦‚ä¸Šé¢ doSth å‡½æ•°é‡Œé¢å¦‚æœè°ƒç”¨äº†ç½‘ç»œ IO è¯·æ±‚ï¼Œè€Œç½‘ç»œ IO è¯·æ±‚åœ¨å°‘æ•°ç‰¹æ®Šæƒ…å†µä¸‹å¯èƒ½ä¼šå‡ºç°æ…¢è¯·æ±‚ï¼Œè¦å¥½å‡ ç§’æ‰è¿”å›ã€‚é‚£ä¹ˆè¿™å‡ ç§’å¯¹æœåŠ¡å™¨æ¥è¯´å°±å¥½åƒæŒ‚äº†ï¼Œæ— æ³•å¤„ç†è¯·æ±‚ã€‚</p><p>å¯¹æœåŠ¡å™¨æ¥è¯´è¿™æ˜¯æä¸ºè‡´å‘½çš„ã€‚å¯¹åç«¯ç¨‹åºå‘˜æ¥è¯´ï¼Œæœ‰ä¸€å¥ç®´è¨€è¦ç‰¢è®°ï¼š</p><blockquote>\n<p><strong>ä¸è¦åœ¨é”é‡Œé¢æ‰§è¡Œè´¹æ—¶æ“ä½œã€‚</strong></p>\n</blockquote><p>è¿™é‡Œ â€œé”é‡Œé¢â€ æ˜¯æŒ‡åœ¨<code>mutex.Lock</code>å’Œ<code>mutex.Unlock</code>ä¹‹é—´çš„ä»£ç ã€‚</p><p>åœ¨é”çš„æœ€ä½³ç¼–ç¨‹å®è·µä¸­ï¼Œå¦‚æœæ˜ç¡®ä¸€ç»„æ•°æ®çš„å¹¶å‘è®¿é—®ç¬¦åˆ â€œç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹æ˜¯è¯»æ“ä½œï¼Œå°‘é‡æƒ…å†µæœ‰å†™æ“ä½œâ€ ï¼Œè¿™ç§ â€œè¯»å¤šå†™å°‘â€ ç‰¹å¾ï¼Œé‚£ä¹ˆåº”è¯¥ç”¨è¯»å†™é”ã€‚</p><p>æ‰€è°“è¯»å†™é”ï¼Œæ˜¯æŠŠé”é‡Œé¢çš„æ“ä½œåˆ†ä¸ºè¯»æ“ä½œå’Œå†™æ“ä½œä¸¤ç§ï¼Œå¯¹åº”è°ƒç”¨ä¸åŒçš„äº’æ–¥æ“ä½œã€‚</p><p>å¦‚æœæ˜¯è¯»æ“ä½œï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code>mutex.RLock()\ndefer mutex.RUnlock()\ndoReadOnlyThings\n</code></pre><p>å¦‚æœæ˜¯é”é‡Œé¢æ˜¯å†™æ“ä½œï¼Œä»£ç å°±å’Œæ™®é€šé”ä¸€æ ·ï¼Œå¦‚ä¸‹ï¼š</p><pre><code>mutex.Lock()\ndefer mutex.Unlock()\ndoWriteThings\n</code></pre><p>ä¸ºä»€ä¹ˆåœ¨ â€œè¯»å¤šå†™å°‘â€ çš„æƒ…å†µä¸‹ï¼Œè¿™æ ·çš„ä½¿ç”¨èŒƒå¼èƒ½å¤Ÿä¼˜åŒ–æ€§èƒ½ï¼Ÿ</p><p>å› ä¸ºä»éœ€æ±‚ä¸Šæ¥è¯´ï¼Œå¦‚æœå½“å‰æˆ‘ä»¬æ­£åœ¨æ‰§è¡ŒæŸä¸ªè¯»æ“ä½œï¼Œé‚£ä¹ˆå†æ¥ä¸€ä¸ªæ–°çš„è¯»æ“ä½œï¼Œæ˜¯ä¸åº”è¯¥æŒ¡åœ¨å¤–é¢çš„ï¼Œå¤§å®¶éƒ½ä¸ä¿®æ”¹æ•°æ®ï¼Œå¯ä»¥å®‰å…¨åœ°å¹¶å‘æ‰§è¡Œã€‚ä½†å¦‚æœæ¥çš„æ˜¯å†™æ“ä½œï¼Œå°±åº”è¯¥æŒ¡åœ¨å¤–é¢ï¼Œç­‰å¾…è¯»æ“ä½œæ‰§è¡Œå®Œã€‚æ•´ä½“æ¥è¯´ï¼Œè¯»å†™é”çš„ç‰¹æ€§å°±æ˜¯ï¼š</p><blockquote>\n<p><strong>è¯»æ“ä½œä¸é˜»æ­¢è¯»æ“ä½œï¼Œé˜»æ­¢å†™æ“ä½œï¼›</strong><br>\n<strong>å†™æ“ä½œé˜»æ­¢ä¸€åˆ‡ï¼Œä¸ç®¡è¯»æ“ä½œè¿˜æ˜¯å†™æ“ä½œã€‚</strong></p>\n</blockquote><h2>æ‰§è¡Œä½“çš„åŒæ­¥</h2><p>èŠå®Œäº†æ‰§è¡Œä½“çš„äº’æ–¥ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸‹æ‰§è¡Œä½“ä¹‹é—´çš„åŒæ­¥ã€‚</p><p>åŒæ­¥çš„ä¸€ä¸ªæœ€å¸¸è§çš„åœºæ™¯æ˜¯ï¼šæŠŠä¸€ä¸ªå¤§ä»»åŠ¡åˆ†è§£ä¸ºnä¸ªå°ä»»åŠ¡ï¼Œåˆ†é…ç»™nä¸ªæ‰§è¡Œä½“å¹¶è¡Œå»åšï¼Œç­‰å¾…å®ƒä»¬ä¸€èµ·åšå®Œã€‚è¿™ç§åŒæ­¥æœºåˆ¶æˆ‘ä»¬å« â€œç­‰å¾…ç»„â€ã€‚</p><p>å…¶ä½¿ç”¨ç•Œé¢ä¸Šå¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p><pre><code>func (wg *WaitGroup) Add(n int)\nfunc (wg *WaitGroup) Done()\nfunc (wg *WaitGroup) Wait()\n</code></pre><p>ç”¨æ³•ä¸Šå¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p><pre><code>var wg WaitGroup\n...\nwg.Add(n)\nfor å¾ªç¯næ¬¡ {\n    go func() {\n        defer wg.Done()\n        doTaski  // æ‰§è¡Œç¬¬iä¸ªä»»åŠ¡\n    }()\n}\nwg.Wait()\n</code></pre><p>ç®€è€Œè¨€ä¹‹ï¼Œåœ¨æ¯ä¸ªä»»åŠ¡å¼€å§‹çš„æ—¶å€™è°ƒç”¨ wg.Add(1)ï¼Œç»“æŸçš„æ—¶å€™è°ƒç”¨ wg.Done()ï¼Œç„¶ååœ¨ä¸»æ‰§è¡Œä½“è°ƒç”¨ wg.Wait() ç­‰å¾…è¿™äº›ä»»åŠ¡ç»“æŸã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œwg.Add(1) æ˜¯è¦åœ¨ä»»åŠ¡çš„ goroutine è¿˜æ²¡æœ‰å¼€å§‹å°±å…ˆè°ƒç”¨ï¼Œå¦åˆ™å¯èƒ½å‡ºç°æŸä¸ªä»»åŠ¡è¿˜æ²¡æœ‰å¼€å§‹æ‰§è¡Œå°±è¢«è®¤ä¸ºç»“æŸäº†ã€‚</p><p>æ¡ä»¶å˜é‡ï¼ˆCondition Variableï¼‰æ˜¯ä¸€ä¸ªæ›´é€šç”¨çš„åŒæ­¥åŸè¯­ï¼Œè®¾è®¡ç²¾å·§åˆæä¸ºå¼ºå¤§ã€‚å¼ºå¤§åˆ°ä»€ä¹ˆç¨‹åº¦ï¼Ÿåƒ channel è¿™æ ·çš„é€šè®¯æœºåˆ¶éƒ½å¯ä»¥ç”¨å®ƒæ¥å®ç°ã€‚</p><p>æ¡ä»¶å˜é‡çš„ä½¿ç”¨ç•Œé¢ä¸Šå¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p><pre><code>func NewCond(l Locker) *Cond\nfunc (c *Cond) Broadcast()\nfunc (c *Cond) Signal()\nfunc (c *Cond) Wait()\n</code></pre><p>é‚£ä¹ˆï¼Œæ€ä¹ˆç”¨æ¡ä»¶å˜é‡ï¼Ÿ</p><p>æˆ‘ä»¬å…ˆçœ‹ä¸‹åˆå§‹åŒ–ã€‚æ¡ä»¶å˜é‡åˆå§‹åŒ–çš„æ—¶å€™éœ€è¦ä¼ å…¥ä¸€ä¸ªäº’æ–¥ä½“ï¼Œå®ƒå¯ä»¥æ˜¯æ™®é€šé”ï¼ˆMutex)ï¼Œä¹Ÿå¯ä»¥æ˜¯è¯»å†™é”ï¼ˆRWMutexï¼‰ã€‚å¦‚ä¸‹ï¼š</p><pre><code>var mutex sync.Mutex  // ä¹Ÿå¯ä»¥æ˜¯ sync.RWMutex\nvar cond = sync.NewCond(&amp;mutex)\n...\n</code></pre><p>ä¸ºä»€ä¹ˆåˆ›å»ºæ¡ä»¶å˜é‡éœ€è¦ä¼ å…¥é”ï¼Ÿå› ä¸º cond.Wait() çš„éœ€è¦ã€‚Wait å†…éƒ¨å®ç°é€»è¾‘æ˜¯ï¼š</p><pre><code>æŠŠè‡ªå·±åŠ å…¥åˆ°æŒ‚èµ·é˜Ÿåˆ—\nmutex.Unlock()\nç­‰å¾…è¢«å”¤é†’  // æŒ‚èµ·çš„æ‰§è¡Œä½“ä¼šè¢«åç»­çš„ cond.Broadcast æˆ– cond.Signal() å”¤é†’\nmutex.Lock()\n</code></pre><p>åˆå§‹åŒ–äº†æ¡ä»¶å˜é‡åï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹å®ƒçš„ä½¿ç”¨æ–¹å¼ã€‚æ¡ä»¶å˜é‡çš„ç”¨æ³•æœ‰ä¸€ä¸ªæ ‡å‡†åŒ–çš„æ¨¡æ¿ï¼Œçœ‹èµ·æ¥å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p><pre><code>mutex.Lock()\ndefer mutex.Unlock()\nfor conditionNotMetToDo {\n    cond.Wait()\n}\ndoSomething\nif conditionNeedNotify {\n    cond.Broadcast()\n    // æœ‰æ—¶å¯ä»¥ä¼˜åŒ–ä¸º cond.Signal()\n}\n</code></pre><p>çœ‹èµ·æ¥æœ‰äº›å¤æ‚ï¼Œè®©æˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹ã€‚åŠ é”åï¼Œå…ˆç”¨ä¸€ä¸ª for å¾ªç¯åˆ¤æ–­å½“å‰æ˜¯å¦èƒ½å¤Ÿåšæˆ‘ä»¬æƒ³åšçš„äº‹æƒ…ï¼Œå¦‚æœåšä¸äº†å°±è°ƒç”¨ cond.Wait() è¿›è¡Œç­‰å¾…ã€‚</p><p>è¿™é‡Œå¾ˆé‡è¦çš„ä¸€ä¸ªç»†èŠ‚æ˜¯æ³¨æ„ç”¨çš„æ˜¯ for å¾ªç¯ï¼Œè€Œä¸æ˜¯ if è¯­å¥ã€‚è¿™æ˜¯å› ä¸º cond.Wait() å¾—åˆ°äº†æ‰§è¡Œæƒåä¸ä»£è¡¨æˆ‘ä»¬æƒ³åšçš„äº‹æƒ…å°±ä¸€å®šèƒ½å¤Ÿå¹²äº†ï¼Œæ‰€ä»¥è¦å†é‡æ–°åˆ¤æ–­ä¸€æ¬¡æ¡ä»¶æ˜¯å¦æ»¡è¶³ã€‚</p><p>ç¡®å®šèƒ½å¤Ÿåšäº‹æƒ…äº†ï¼Œäºæ˜¯ doSomethingã€‚åœ¨åšçš„è¿‡ç¨‹ä¸­é—´ï¼Œå¦‚æœæˆ‘ä»¬åˆ¤æ–­å¯èƒ½æŒ‚èµ·é˜Ÿåˆ—ä¸­çš„éƒ¨åˆ†æ‰§è¡Œä½“æ»¡è¶³äº†é‡æ–°æ‰§è¡Œçš„æ¡ä»¶ï¼Œå°±ç”¨ cond.Broadcast æˆ– cond.Signal å”¤é†’å®ƒä»¬ã€‚</p><p>cond.Broadcast æ¯”è¾ƒç²—æš´ï¼Œå®ƒå”¤é†’äº†æ‰€æœ‰åœ¨è¿™ä¸ªæ¡ä»¶å˜é‡æŒ‚èµ·çš„æ‰§è¡Œä½“ï¼Œè€Œ cond.Signal åˆ™åªå”¤é†’å…¶ä¸­çš„ä¸€ä¸ªã€‚</p><p>ä»€ä¹ˆæƒ…å†µä¸‹åº”è¯¥ç”¨ cond.Broadcastï¼Œä»€ä¹ˆæƒ…å†µä¸‹åº”è¯¥ç”¨ cond.Signalï¼Ÿæœ€å·æ‡’çš„æ–¹å¼å½“ç„¶æ˜¯ä¸ç®¡ä¸‰ä¸ƒäºŒåä¸€ï¼Œç”¨ cond.Broadcast ä¸€å®šæ²¡é—®é¢˜ã€‚ä½†æ˜¯æœ¬ç€ç»æµçš„è§’åº¦ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦äº¤ä»£æ¸…æ¥š cond.Signal çš„é€‚ç”¨èŒƒå›´ï¼š</p><ul>\n<li>æŒ‚èµ·åœ¨è¿™ä¸ªæ¡ä»¶å˜é‡ä¸Šçš„æ‰§è¡Œä½“ï¼Œå®ƒä»¬ç­‰å¾…çš„æ¡ä»¶æ˜¯ä¸€è‡´çš„ï¼›</li>\n<li>æœ¬æ¬¡ doSomething æ“ä½œå®Œæˆåï¼Œæ‰€é‡Šæ”¾çš„èµ„æºåªå¤Ÿä¸€ä¸ªæ‰§è¡Œä½“æ¥åšäº‹æƒ…ã€‚</li>\n</ul><p>Cond åŸè¯­è™½ç„¶å«æ¡ä»¶å˜é‡ï¼Œä½†æ˜¯å®é™…ä¸Šå®ƒæ—¢æ²¡æœ‰æ˜ç™½è¯´å˜é‡å…·ä½“æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œä¹Ÿæ²¡æœ‰è¯´æ¡ä»¶å…·ä½“æ˜¯ä»€ä¹ˆæ ·çš„ã€‚å˜é‡æ˜¯æŒ‡ â€œä¸€ç»„è¦åœ¨å¤šä¸ªæ‰§è¡Œä½“ä¹‹é—´ååŒçš„æ•°æ®â€ã€‚æ¡ä»¶æ˜¯æŒ‡åšä»»åŠ¡å‰ Wait çš„ â€œå‰ç½®æ¡ä»¶â€ï¼Œå’Œåšä»»åŠ¡æ—¶éœ€è¦å”¤é†’å…¶å®ƒäººçš„ â€œå”¤é†’æ¡ä»¶â€ã€‚</p><p>è¿™æ ·çš„ä»‹ç»ç›¸å½“çš„æŠ½è±¡ã€‚æˆ‘ä»¬æ‹¿ Go è¯­è¨€çš„ channel å¼€åˆ€ï¼Œè‡ªå·±å®ç°ä¸€ä¸ªã€‚ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>type Channel struct {\n    mutex sync.Mutex\n    cond *sync.Cond\n    queue *Queue\n    n int\n}\n\nfunc NewChannel(n int) *Channel {\n    if n &lt; 1 {\n        panic(&quot;todo: support unbuffered channel&quot;)\n    }\n    c := new(Channel)\n    c.cond = sync.NewCond(&amp;c.mutex)\n    c.queue = NewQueue()\n    // è¿™é‡Œ NewQueue å¾—åˆ°ä¸€ä¸ªæ™®é€šçš„é˜Ÿåˆ—\n    // ä»£ç ä»ç•¥\n    c.n = n\n    return c\n}\n\nfunc (c *Channel) Push(v interface{}) {\n    c.mutex.Lock()\n    defer c.mutex.Unlock()\n    for c.queue.Len() == c.n { // ç­‰å¾…é˜Ÿåˆ—ä¸æ»¡\n        c.cond.Wait()\n    }\n    if c.queue.Len() == 0 { // åŸæ¥é˜Ÿåˆ—æ˜¯ç©ºçš„ï¼Œå¯èƒ½æœ‰äººç­‰å¾…æ•°æ®ï¼Œé€šçŸ¥å®ƒä»¬\n        c.cond.Broadcast()\n    }\n    c.queue.Push(v)\n}\n\nfunc (c *Channel) Pop() (v interface{}) {\n    c.mutex.Lock()\n    defer c.mutex.Unlock()\n    for c.queue.Len() == 0 { // ç­‰å¾…é˜Ÿåˆ—ä¸ç©º\n        c.cond.Wait()\n    }\n    if c.queue.Len() == c.n { // åŸæ¥é˜Ÿåˆ—æ˜¯æ»¡çš„ï¼Œå¯èƒ½æœ‰äººç­‰ç€å†™æ•°æ®ï¼Œé€šçŸ¥å®ƒä»¬\n        c.cond.Broadcast()\n    }\n    return c.queue.Pop()\n}\n\nfunc (c *Channel) TryPop() (v interface{}, ok bool) {\n    c.mutex.Lock()\n    defer c.mutex.Unlock()\n    if c.queue.Len() == 0 { // å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œç›´æ¥è¿”å›\n        return\n    }\n    if c.queue.Len() == c.n { // åŸæ¥é˜Ÿåˆ—æ˜¯æ»¡çš„ï¼Œå¯èƒ½æœ‰äººç­‰ç€å†™æ•°æ®ï¼Œé€šçŸ¥å®ƒä»¬\n        c.cond.Broadcast()\n    }\n    return c.queue.Pop(), true\n}\n\nfunc (c *Channel) TryPush(v interface{}) (ok bool) {\n    c.mutex.Lock()\n    defer c.mutex.Unlock()\n    if c.queue.Len() == c.n { // å¦‚æœé˜Ÿåˆ—æ»¡ï¼Œç›´æ¥è¿”å›\n        return\n    }\n    if c.queue.Len() == 0 { // åŸæ¥é˜Ÿåˆ—æ˜¯ç©ºçš„ï¼Œå¯èƒ½æœ‰äººç­‰å¾…æ•°æ®ï¼Œé€šçŸ¥å®ƒä»¬\n        c.cond.Broadcast()\n    }\n    c.queue.Push(v)\n    return true\n}\n</code></pre><p>å¯¹ç€è¿™ä¸ª Channel çš„å®ç°ï¼Œä½ æ˜¯å¦å¯¹æ¡ä»¶å˜é‡æœ‰æ„Ÿè§‰å¾ˆå¤šï¼Ÿé¡ºä¾¿æé†’ä¸€ç‚¹ï¼Œè¿™ä¸ª Channel çš„å®ç°ä¸æ”¯æŒæ— ç¼“å†² channelï¼Œä¹Ÿå°±æ˜¯ä¸æ”¯æŒ NewChannel(0) çš„æƒ…å†µã€‚å¦‚æœä½ æ„Ÿå…´è¶£ï¼Œå¯ä»¥æ”¹æ”¹è¿™ä¸ªé—®é¢˜ã€‚</p><h2>æ‰§è¡Œä½“çš„é€šè®¯</h2><p>èŠå®ŒåŒæ­¥ä¸äº’æ–¥ï¼Œæˆ‘ä»¬æ¥ç€èŠæ‰§è¡Œä½“çš„é€šè®¯ï¼šæ€ä¹ˆåœ¨æ‰§è¡Œä½“é—´æ”¶å‘æ¶ˆæ¯ã€‚</p><p>ç®¡é“æ˜¯å¤§å®¶éƒ½å¾ˆç†ŸçŸ¥çš„æ‰§è¡Œä½“é—´çš„é€šè®¯æœºåˆ¶ã€‚è§„æ ¼å¦‚ä¸‹ï¼š</p><pre><code>func Pipe() (pr *PipeReader, pw PipeWriter)\n</code></pre><p>ç”¨æ³•ä¸Šï¼Œå…ˆè°ƒç”¨<code>pr, pw := io.Pipe()</code>å¾—åˆ°ç®¡é“çš„å†™å…¥ç«¯å’Œè¯»å‡ºç«¯ï¼Œåˆ†åˆ«ä¼ ç»™ä¸¤ä¸ªå¹¶è¡Œæ‰§è¡Œçš„ goroutineï¼ˆå…¶ä»–è¯­è¨€ä¹Ÿç±»ä¼¼ï¼‰ï¼Œç„¶åä¸€ä¸ª goroutine è¯»ï¼Œä¸€ä¸ª goroutine å†™å°±å¥½äº†ã€‚</p><p>ç®¡é“ç”¨å¤„å¾ˆå¤šã€‚ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„ç”¨æ³•æ˜¯åšè¯»å†™è½¬æ¢ï¼Œä¾‹å¦‚ï¼Œå‡è®¾æˆ‘æ‰‹å¤´æœ‰ä¸€ä¸ªç®—æ³•ï¼š</p><pre><code>func Foo(w io.Writer) error\n</code></pre><p>è¿™ä¸ªç®—æ³•ç”Ÿæˆçš„æ•°æ®æµï¼Œéœ€è¦ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„è¾“å…¥ï¼Œä½†æ˜¯è¿™ä¸ªå‡½æ•°çš„è¾“å…¥æ˜¯ io.Readerï¼ŒåŸå‹å¦‚ä¸‹ï¼š</p><pre><code>func Bar(r io.Reader)\n</code></pre><p>é‚£ä¹ˆæ€ä¹ˆæŠŠå®ƒä»¬ä¸²èµ·æ¥å‘¢ï¼Ÿç”¨ç®¡é“æˆ‘ä»¬å¾ˆå®¹æ˜“å®ç°è¿™æ ·çš„å˜æ¢ï¼š</p><pre><code>func FooReader() io.ReadCloser {\n    pr, pw := io.Pipe()\n    go func() {\n        err := Foo(pw)\n        pw.CloseWithError(err)\n    }()\n    return pr\n}\n</code></pre><p>è¿™ä¸ª FooReader å‡½æ•°å‡ å¥è¯å°±æŠŠ Foo å˜æˆäº†ä¸€ä¸ªç¬¦åˆ io.Reader æ¥å£çš„å¯¹è±¡ï¼Œå®ƒå°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„å’Œ Bar å‡½æ•°ç»“åˆäº†ã€‚</p><p>å…¶å® Go è¯­è¨€ä¸­å¼•å…¥çš„ channel ä¹Ÿæ˜¯ç®¡é“ï¼Œåªä¸è¿‡å®ƒæ˜¯ç±»å‹å®‰å…¨çš„ç®¡é“ã€‚å…·ä½“ç”¨æ³•å¦‚ä¸‹ï¼š</p><pre><code>c := make(chan Type, n) // åˆ›å»ºä¸€ä¸ªèƒ½å¤Ÿä¼ é€’ Type ç±»å‹æ•°æ®çš„ç®¡é“ï¼Œç¼“å†²å¤§å°ä¸º n\n...\ngo func() {\n    val := &lt;-c // ä»ç®¡é“è¯»å…¥\n}()\n...\ngo func() {\n    c &lt;- val // å‘ç®¡é“å†™å…¥\n}()\n</code></pre><p>æˆ‘ä»¬åé¢åœ¨ â€œæœåŠ¡ç«¯å¼€å‘â€ ä¸€ç« ï¼Œæˆ‘ä»¬è¿˜ä¼šæ¯”è¾ƒè¯¦ç»†è®¨è®º channelï¼Œä»Šå¤©å…ˆäº†è§£ä¸€ä¸ªå¤§ä½“çš„è¯­ä¹‰ã€‚</p><h2>ç»“è¯­</h2><p>æ€»ç»“ä¸€ä¸‹ï¼Œæˆ‘ä»¬ä»Šå¤©ä¸»è¦èŠäº†æ‰§è¡Œä½“é—´çš„ååŒæœºåˆ¶ï¼šåŸå­æ“ä½œã€åŒæ­¥ã€äº’æ–¥ä¸é€šè®¯ã€‚æˆ‘ä»¬é‡ç‚¹èŠäº†é”å’ŒåŒæ­¥åŸè¯­ â€œæ¡ä»¶å˜é‡â€ã€‚</p><p>é”åœ¨ä¸€äº›äººå¿ƒä¸­æ˜¯æœ‰è¯¯è§£çš„ï¼Œä½†å®é™…ä¸Šé”åœ¨æœåŠ¡ç«¯ç¼–ç¨‹ä¸­çš„æ¯”é‡å¹¶ä¸ä½ï¼Œæˆ‘ä»¬å¯èƒ½ç»å¸¸éœ€è¦å’Œå®ƒæ‰“äº¤é“ï¼Œå»ºè®®å¤šèŠ±ç²¾åŠ›ç†è§£å®ƒä»¬ã€‚</p><p>æ¡ä»¶å˜é‡æ˜¯æœ€å¤æ‚çš„åŒæ­¥åŸè¯­ï¼ŒåŠŸèƒ½å¼ºå¤§ã€‚è™½ç„¶å¹³å¸¸æˆ‘ä»¬ç›´æ¥ä½¿ç”¨æ¡ä»¶å˜é‡çš„æœºä¼šä¸æ˜¯å¤ªå¤šï¼Œå¤§éƒ¨åˆ†å¸¸è§çš„åœºæ™¯å¾€å¾€æœ‰æ›´é«˜é˜¶çš„åŸè¯­ï¼ˆä¾‹å¦‚ channelï¼‰å¯ä»¥å–ä»£ã€‚ä½†æ˜¯å®ƒçš„è®¾è®¡ç²¾å·§è€Œé«˜æ•ˆï¼Œå€¼å¾—ç»†ç»†ä½“ä¼šã€‚</p><p>ä½ ä¼šå‘ç°ï¼Œæ“ä½œç³»ç»Ÿè¯¾æœ¬ä¸Šçš„ä¿¡å·é‡è¿™æ ·çš„åŒæ­¥åŸè¯­ï¼Œæˆ‘ä»¬è¿™é‡Œæ²¡æœ‰äº¤ä»£ï¼Œè¿™æ˜¯å› ä¸ºå®ƒè¢«æ›´å¼ºå¤§è€Œä¸”æ€§èƒ½æ›´å¥½çš„åŒæ­¥åŸè¯­ â€œæ¡ä»¶å˜é‡â€ æ‰€å–ä»£äº†ã€‚</p><p>ä¸Šé¢æˆ‘ä»¬ä¸ºäº†ä»‹ç»æ¡ä»¶å˜é‡çš„ç”¨æ³•ï¼Œæˆ‘ä»¬å®ä½œäº†ä¸€ä¸ª channelï¼Œä½ ä¹Ÿå¯ä»¥è€ƒè™‘ç”¨ä¿¡å·é‡è¿™æ ·çš„ä¸œè¥¿æ¥å®ç°ä¸€éï¼Œç„¶ååˆ†æä¸€ä¸‹ä¸ºä»€ä¹ˆæˆ‘ä»¬è¯´åŸºäº â€œæ¡ä»¶å˜é‡â€ çš„ç‰ˆæœ¬æ˜¯æ›´ä¼˜çš„ã€‚</p><p>å¦‚æœä½ å¯¹ä»Šå¤©çš„å†…å®¹æœ‰ä»€ä¹ˆæ€è€ƒä¸è§£è¯»ï¼Œæ¬¢è¿ç»™æˆ‘ç•™è¨€ï¼Œæˆ‘ä»¬ä¸€èµ·è®¨è®ºã€‚åœ¨ä¸‹æœŸï¼Œæˆ‘ä»¬å°†è®¨è®ºè¿›ç¨‹ä¸è¿›ç¨‹ä¹‹é—´çš„ååŒï¼šè¿›ç¨‹é—´çš„åŒæ­¥äº’æ–¥ã€èµ„æºå…±äº«ä¸é€šè®¯ã€‚</p><p>å¦‚æœä½ è§‰å¾—æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿æŠŠæ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œæˆ‘ä»¬ä¸‹æœŸå†è§ã€‚</p>","neighbors":{"left":{"article_title":"11 | å¤šä»»åŠ¡ï¼šè¿›ç¨‹ã€çº¿ç¨‹ä¸åç¨‹","id":96324},"right":{"article_title":"13 | è¿›ç¨‹é—´çš„åŒæ­¥äº’æ–¥ã€èµ„æºå…±äº«ä¸é€šè®¯","id":97617}},"comments":[{"had_liked":false,"id":97451,"user_name":"ç¬¨æ‹™çš„è‡ªç”±","can_delete":false,"product_type":"c1","uid":1309452,"ip_address":"","ucode":"BEDD613DEDD8ED","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLRwauvbuyKfib8Qm3NBNU908zhKS0WPnvTEN4EJYSJyKwMuSHTWgXqP5WrSexgQAhLSiblydA24EMg/132","comment_is_top":false,"comment_ctime":1558674013,"is_pvip":false,"replies":[{"id":"34868","content":"å¦‚æœç”¨ Javaï¼Œä»£ç çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š<br><br>class Channel {<br>    private final Lock lock = new ReentrantLock();<br>    private Condition cond = lock.newCondition();<br>    private final Queue queue = new Queue();<br>    private int n;<br><br>    public Channel(int cap) {<br>         n = cap;<br>    }<br><br>    public void push(Object v) {<br>         lock.lock();<br>         try {<br>             while (queue.size() == n) {<br>                  cond.await();<br>             }<br>             if (queue.size() == 0) {<br>                  cond.signalAll();<br>             }<br>             queue.push(v);<br>         } finally {<br>             lock.unlock();<br>         }<br>    }<br><br>    public Object pop() {<br>         lock.lock();<br>         try {<br>             while (queue.size() == 0) {<br>                  cond.await();<br>             }<br>             if (queue.size() == n) {<br>                  cond.signalAll();<br>             }<br>             return queue.pop();<br>         } finally {<br>             lock.unlock();<br>         }<br>    }<br>}","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1558688857,"ip_address":"","comment_id":97451,"utype":1}],"discussion_count":3,"race_medal":0,"score":"216307038813","product_id":100025201,"comment_content":"å¸Œæœ›è€å¸ˆç±»æ¯”javaè¯´ä¸€ä¸‹,ç‰¹åˆ«æ˜¯æ¡ä»¶åŸè¯­é‚£å—çœ‹å¾—æœ‰ç‚¹æ‡µ","like_count":51,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451283,"discussion_content":"å¦‚æœç”¨ Javaï¼Œä»£ç çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š\n\nclass Channel {\n    private final Lock lock = new ReentrantLock();\n    private Condition cond = lock.newCondition();\n    private final Queue queue = new Queue();\n    private int n;\n\n    public Channel(int cap) {\n         n = cap;\n    }\n\n    public void push(Object v) {\n         lock.lock();\n         try {\n             while (queue.size() == n) {\n                  cond.await();\n             }\n             if (queue.size() == 0) {\n                  cond.signalAll();\n             }\n             queue.push(v);\n         } finally {\n             lock.unlock();\n         }\n    }\n\n    public Object pop() {\n         lock.lock();\n         try {\n             while (queue.size() == 0) {\n                  cond.await();\n             }\n             if (queue.size() == n) {\n                  cond.signalAll();\n             }\n             return queue.pop();\n         } finally {\n             lock.unlock();\n         }\n    }\n}","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558688857,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1021825,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/97/81/e1eaf621.jpg","nickname":"David","note":"","ucode":"22CBBC13FC97A9","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384942,"discussion_content":"blockingqueue","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626828852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1311772,"avatar":"https://static001.geekbang.org/account/avatar/00/14/04/1c/b0c6c009.jpg","nickname":"zhj","note":"","ucode":"65B9E222D6E075","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":196681,"discussion_content":"ç±»æ¯”javaçš„blockqueueå°±å¯ä»¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583368756,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98198,"user_name":"ç«‹è€³","can_delete":false,"product_type":"c1","uid":1497753,"ip_address":"","ucode":"99C8E4DC67ED01","user_header":"https://static001.geekbang.org/account/avatar/00/16/da/99/80222c2a.jpg","comment_is_top":false,"comment_ctime":1558929026,"is_pvip":false,"replies":[{"id":"35155","content":"ä»£ç æ²¡æœ‰é—®é¢˜çš„ã€‚å…ˆ Push è¿˜æ˜¯å…ˆé€šçŸ¥éƒ½å¯ä»¥ï¼Œæ¬¡åºå¯ä»¥äº¤æ¢çš„ã€‚å› ä¸ºåæ­£é”è¿˜æ²¡æœ‰é‡Šæ”¾ï¼Œè¿™é‡Œåªæ˜¯æ ‡è®°ä¸€ä¸‹å“ªäº›æ‰§è¡Œä½“å¯ä»¥è°ƒåº¦ï¼Œå¹¶æ²¡æœ‰çœŸæ­£å‘ç”Ÿæ§åˆ¶æƒçš„è½¬ç§»ã€‚è€Œä¸”å°±ç®—è½¬ç§»äº†ä¹Ÿæ²¡é—®é¢˜çš„ï¼Œä½ å¯ä»¥ç•™æ„ä¸‹æœ¬æ–‡è´´çš„æ¡ä»¶å˜é‡çš„ Wait å‡½æ•°å®ç°ï¼Œå®ƒè·å¾—æ§åˆ¶æƒåä¸‹ä¸€å¥å°±æ˜¯ mutex.Lock å»ç”³è¯·é”ï¼Œè€Œæˆ‘ä»¬è¿™é‡Œæ˜¯ Push åæ‰è°ƒç”¨ mutex.Unlock é‡Šæ”¾é”çš„ï¼Œæ‰€ä»¥ Broadcast å’Œ Push çš„æ¬¡åºå¯ä»¥éšæ„äº¤æ¢ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1558938276,"ip_address":"","comment_id":98198,"utype":1}],"discussion_count":4,"race_medal":0,"score":"87458274946","product_id":100025201,"comment_content":"è®¸è€å¸ˆï¼Œä¸‹é¢çš„è¿™æ®µä»£ç æ˜¯ä¸æ˜¯å­˜åœ¨é—®é¢˜ï¼Œä»¥Pushä¸ºä¾‹ï¼Œåº”è¯¥å…ˆæ‰§è¡Œ c.queue.Push å†è¿›è¡Œå¹¿æ’­ï¼Œå¦åˆ™å¯èƒ½é€šçŸ¥åˆ°å…¶ä»–åç¨‹è¿›è¡ŒPopï¼Œç³»ç»Ÿè°ƒåº¦å¯èƒ½å…ˆè¿›è¡Œäº†å¦å¤–ä¸€ä¸ªåç¨‹çš„c.queue.Pop()ï¼Œ è¿™ä¸ªæ—¶å€™è¿˜æ²¡æœ‰å…¥é˜Ÿåˆ—ã€‚<br> <br>func (c *Channel) Push(v interface{}) {<br>    c.mutex.Lock()<br>    defer c.mutex.Unlock()<br>    for c.queue.Len() == c.n { &#47;&#47; ç­‰å¾…é˜Ÿåˆ—ä¸æ»¡<br>        c.cond.Wait()<br>    }<br>    if c.queue.Len() == 0 { &#47;&#47; åŸæ¥é˜Ÿåˆ—æ˜¯ç©ºçš„ï¼Œå¯èƒ½æœ‰äººç­‰å¾…æ•°æ®ï¼Œé€šçŸ¥å®ƒä»¬<br>        c.cond.Broadcast()<br>    }<br>    c.queue.Push(v)<br>}<br><br>func (c *Channel) Pop() (v interface{}) {<br>    c.mutex.Lock()<br>    defer c.mutex.Unlock()<br>    for c.queue.Len() == 0 { &#47;&#47; ç­‰å¾…é˜Ÿåˆ—ä¸ç©º<br>        c.cond.Wait()<br>    }<br>    if c.queue.Len() == c.n { &#47;&#47; åŸæ¥é˜Ÿåˆ—æ˜¯æ»¡çš„ï¼Œå¯èƒ½æœ‰äººç­‰ç€å†™æ•°æ®ï¼Œé€šçŸ¥å®ƒä»¬<br>        c.cond.Broadcast()<br>    }<br>    return c.queue.Pop()<br>}<br><br>func (c *Channel) TryPop() (v interface{}, ok bool) {<br>    c.mutex.Lock()<br>    defer c.mutex.Unlock()<br>    if c.queue.Len() == 0 { &#47;&#47; å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œç›´æ¥è¿”å›<br>        return<br>    }<br>    if c.queue.Len() == c.n { &#47;&#47; åŸæ¥é˜Ÿåˆ—æ˜¯æ»¡çš„ï¼Œå¯èƒ½æœ‰äººç­‰ç€å†™æ•°æ®ï¼Œé€šçŸ¥å®ƒä»¬<br>        c.cond.Broadcast()<br>    }<br>    return c.queue.Pop(), true<br>}<br><br>func (c *Channel) TryPush(v interface{}) (ok bool) {<br>    c.mutex.Lock()<br>    defer c.mutex.Unlock()<br>    if c.queue.Len() == c.n { &#47;&#47; å¦‚æœé˜Ÿåˆ—æ»¡ï¼Œç›´æ¥è¿”å›<br>        return<br>    }<br>    if c.queue.Len() == 0 { &#47;&#47; åŸæ¥é˜Ÿåˆ—æ˜¯ç©ºçš„ï¼Œå¯èƒ½æœ‰äººç­‰å¾…æ•°æ®ï¼Œé€šçŸ¥å®ƒä»¬<br>        c.cond.Broadcast()<br>    }<br>    c.queue.Push(v)<br>    return true<br>}<br>","like_count":21,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451595,"discussion_content":"ä»£ç æ²¡æœ‰é—®é¢˜çš„ã€‚å…ˆ Push è¿˜æ˜¯å…ˆé€šçŸ¥éƒ½å¯ä»¥ï¼Œæ¬¡åºå¯ä»¥äº¤æ¢çš„ã€‚å› ä¸ºåæ­£é”è¿˜æ²¡æœ‰é‡Šæ”¾ï¼Œè¿™é‡Œåªæ˜¯æ ‡è®°ä¸€ä¸‹å“ªäº›æ‰§è¡Œä½“å¯ä»¥è°ƒåº¦ï¼Œå¹¶æ²¡æœ‰çœŸæ­£å‘ç”Ÿæ§åˆ¶æƒçš„è½¬ç§»ã€‚è€Œä¸”å°±ç®—è½¬ç§»äº†ä¹Ÿæ²¡é—®é¢˜çš„ï¼Œä½ å¯ä»¥ç•™æ„ä¸‹æœ¬æ–‡è´´çš„æ¡ä»¶å˜é‡çš„ Wait å‡½æ•°å®ç°ï¼Œå®ƒè·å¾—æ§åˆ¶æƒåä¸‹ä¸€å¥å°±æ˜¯ mutex.Lock å»ç”³è¯·é”ï¼Œè€Œæˆ‘ä»¬è¿™é‡Œæ˜¯ Push åæ‰è°ƒç”¨ mutex.Unlock é‡Šæ”¾é”çš„ï¼Œæ‰€ä»¥ Broadcast å’Œ Push çš„æ¬¡åºå¯ä»¥éšæ„äº¤æ¢ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1558938276,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572571,"discussion_content":"è¿™ä»£ç åº”è¯¥æ˜¯æ–‡ä¸­çš„ä»£ç å—ï¼Œå…¶å®å¯ä»¥è¯´æ˜æ˜¯å“ªä¸ªä»£ç å—å°±è¡Œï¼Œç‰ˆé¢å æ®å¤ªå¤§ï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652860187,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1105385,"avatar":"https://static001.geekbang.org/account/avatar/00/10/dd/e9/40a98e2f.jpg","nickname":"å“ä¿®æ­¦","note":"","ucode":"21B8FFBDCACBDF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":265456,"discussion_content":"æ ‡è®°å¯ä»¥è°ƒåº¦çš„æ‰§è¡Œä½“ï¼Œä»¥æ‰§è¡Œä½“æ˜¯çº¿ç¨‹ä¸ºä¾‹ï¼Œ  è¿™ä¸ªæ˜¯æ“ä½œç³»ç»Ÿæ¥å®Œæˆçš„å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589388250,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1474356,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI3F4IdQuDZrhN8ThibP85eCiaSWTYpTrcC6QB9EoAkw3IIj6otMibb1CgrS1uzITAnJmGLXQ2tgIkAQ/132","nickname":"cugphoenix","note":"","ucode":"80101AF04C00D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":96409,"discussion_content":"è¿™æ¡ç•™è¨€é—®äº†æˆ‘æƒ³é—®çš„ï¼Œè®¸è€å¸ˆçš„è§£ç­”ä¹Ÿçœ‹æ‡‚äº†ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577063769,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97438,"user_name":"èš‚èšå†…æ¨+v","can_delete":false,"product_type":"c1","uid":1050508,"ip_address":"","ucode":"24B10AEE54B3FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/07/8c/0d886dcc.jpg","comment_is_top":false,"comment_ctime":1558669100,"is_pvip":false,"replies":[{"id":"34851","content":"ä¸€ä¸ªæ“ä½œç³»ç»Ÿè°ƒåº¦ï¼Œä¸€ä¸ªç”¨æˆ·æ€è‡ªå·±æ¥è°ƒåº¦","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1558675961,"ip_address":"","comment_id":97438,"utype":1}],"discussion_count":4,"race_medal":0,"score":"53098276652","product_id":100025201,"comment_content":"åç¨‹å’Œçº¿ç¨‹è¿˜æ˜¯æ²¡åŒºåˆ«æ¸…æ¥š","like_count":13,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451280,"discussion_content":"ä¸€ä¸ªæ“ä½œç³»ç»Ÿè°ƒåº¦ï¼Œä¸€ä¸ªç”¨æˆ·æ€è‡ªå·±æ¥è°ƒåº¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558675961,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2038718,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/1b/be/525e05ae.jpg","nickname":"NiceBlueChai","note":"","ucode":"2043333890C448","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375406,"discussion_content":"å…¶å®çº¿ç¨‹ä¹Ÿåˆ†ç”¨æˆ·æ€çº¿ç¨‹å’Œå†…æ ¸æ€çš„çº¿ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621609971,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1676962,"avatar":"https://static001.geekbang.org/account/avatar/00/19/96/a2/c1596dd8.jpg","nickname":"ğŸ¤”","note":"","ucode":"40ACB53BF3C6B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2038718,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/1b/be/525e05ae.jpg","nickname":"NiceBlueChai","note":"","ucode":"2043333890C448","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":566474,"discussion_content":"ç”¨æˆ·çº¿ç¨‹çš„ç¼ºç‚¹ä¸»è¦æœ‰ï¼šçº¿ç¨‹å‘ç”ŸI/Oæˆ–é¡µé¢æ•…éšœå¼•èµ·çš„é˜»å¡æ—¶ï¼Œå¦‚æœè°ƒç”¨é˜»å¡ç³»ç»Ÿè°ƒç”¨åˆ™å†…æ ¸ç”±äºä¸çŸ¥é“æœ‰å¤šçº¿ç¨‹çš„å­˜åœ¨ï¼Œè€Œä¼šé˜»å¡æ•´ä¸ªè¿›ç¨‹ä»è€Œé˜»å¡æ‰€æœ‰çº¿ç¨‹, å› æ­¤åŒä¸€è¿›ç¨‹ä¸­åªèƒ½åŒæ—¶æœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è¿è¡Œï¼›goåç¨‹å°±æ˜¯è§£å†³äº†è¿™ä¸ªç¼ºç‚¹äº†\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650699075,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":375406,"ip_address":""},"score":566474,"extra":""}]},{"author":{"id":1394115,"avatar":"https://static001.geekbang.org/account/avatar/00/15/45/c3/051ffe83.jpg","nickname":"rubys_","note":"","ucode":"931AD02864126A","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":362956,"discussion_content":"çº¿ç¨‹ä¸æ˜¯æ“ä½œç³»ç»Ÿè°ƒåº¦çš„å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617080012,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97869,"user_name":"Geek_gooy","can_delete":false,"product_type":"c1","uid":1504570,"ip_address":"","ucode":"FC168C31530040","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLluwfFjxlCmg9p2rJVicBdBo6OYpN0EAotUguias8wc78WtAEPHsWic0880CqGwyNypy2KZqVpYhGiag/132","comment_is_top":false,"comment_ctime":1558800581,"is_pvip":false,"replies":[{"id":"34991","content":"æ˜¯è¿™æ ·ï¼Œä½ å¯ä»¥çœ‹æˆ‘æ–‡ç« ä¸­Waitçš„ä»£ç ï¼Œåœ¨å”¤é†’åç¬¬ä¸€ä»¶äº‹æƒ…æ˜¯lockï¼Œä¹Ÿå°±æ˜¯è¯·æ±‚é”ï¼Œæ‰€ä»¥åªæœ‰Açº¿ç¨‹unlockåï¼Œå…¶ä»–è¢«å”¤é†’çš„çº¿ç¨‹ä¸­çš„ä¸€ä¸ªä¼šå¾—åˆ°é”å¾€ä¸‹èµ°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1558828401,"ip_address":"","comment_id":97869,"utype":1}],"discussion_count":1,"race_medal":0,"score":"44508473541","product_id":100025201,"comment_content":"è€å¸ˆ<br>æˆ‘æ˜ç™½äº†ï¼Œ æ¯”å¦‚Açº¿ç¨‹notifyæˆ–è€…signalï¼Œè¢«å”¤é†’çš„çº¿ç¨‹å¹¶ä¸ä¼šé©¬ä¸Šæ‰§è¡Œï¼Œè€Œæ˜¯éœ€è¦ç­‰å¾…Açº¿ç¨‹é€€å‡ºåŒæ­¥å—æˆ–è€…unlockæ‰ä¼šæ‰§è¡Œã€‚<br><br>å¦‚æœæ˜¯notifyAllï¼Œä¹ŸåŒæ ·å¦‚æ­¤ï¼Œä½†æ˜¯ç­‰åˆ°å”¤é†’å¹¶è·å¾—æ‰§è¡Œæƒçš„çº¿ç¨‹æ‰§è¡Œç»“æŸåï¼ŒCPUä¼šä¼˜å…ˆæŠŠæ‰§è¡Œæƒäº¤ç»™ä¸Šæ¬¡å”¤é†’æ²¡æœ‰å¾—åˆ°æ‰§è¡Œæƒçš„æŸä¸ªçº¿ç¨‹ï¼Œè€Œä¸ä¼šç»™é˜»å¡åœ¨é”å¤–é¢ç­‰å¾…é”çš„çº¿ç¨‹ã€‚å’Œè°ƒç”¨notifyåªå”¤é†’ä¸€ä¸ªè¿˜æ˜¯æœ‰äº›è®¸åŒºåˆ«çš„ã€‚","like_count":11,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451456,"discussion_content":"æ˜¯è¿™æ ·ï¼Œä½ å¯ä»¥çœ‹æˆ‘æ–‡ç« ä¸­Waitçš„ä»£ç ï¼Œåœ¨å”¤é†’åç¬¬ä¸€ä»¶äº‹æƒ…æ˜¯lockï¼Œä¹Ÿå°±æ˜¯è¯·æ±‚é”ï¼Œæ‰€ä»¥åªæœ‰Açº¿ç¨‹unlockåï¼Œå…¶ä»–è¢«å”¤é†’çš„çº¿ç¨‹ä¸­çš„ä¸€ä¸ªä¼šå¾—åˆ°é”å¾€ä¸‹èµ°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558828401,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97834,"user_name":"Geek_gooy","can_delete":false,"product_type":"c1","uid":1504570,"ip_address":"","ucode":"FC168C31530040","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLluwfFjxlCmg9p2rJVicBdBo6OYpN0EAotUguias8wc78WtAEPHsWic0880CqGwyNypy2KZqVpYhGiag/132","comment_is_top":false,"comment_ctime":1558790686,"is_pvip":false,"replies":[{"id":"34982","content":"1ã€ä½ æ˜¯å¯¹çš„ï¼Œç”¨ä¸¤ä¸ªcondæ€§èƒ½ä¼šæ›´å¥½ã€‚ä½†æ˜¯ç”¨ä¸€ä¸ªä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸å·¥ä½œçš„ã€‚<br>2ã€cond.signal ä¸æ˜¯æŠŠé”é‡Šæ”¾äº†ï¼Œæ˜¯è®©ç­‰å¾…åœ¨è¿™ä¸ªcondä¸Šçš„æ‰§è¡Œä½“æ”¹å˜çŠ¶æ€ï¼ˆä»æŒ‚èµ·åˆ°å¯è¢«è°ƒåº¦ï¼‰ï¼Œä»è€Œå…è®¸è°ƒåº¦ç¨‹åºç»™å®ƒæ‰§è¡Œæƒã€‚<br>3ã€å¯¹çš„","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1558796959,"ip_address":"","comment_id":97834,"utype":1}],"discussion_count":1,"race_medal":0,"score":"44508463646","product_id":100025201,"comment_content":"è€å¸ˆ<br>1ã€åƒè¿™ç§æœ‰è¿›æœ‰å‡ºçš„æ˜¯ä¸æ˜¯åº”è¯¥åˆ›å»ºä¸¤ä¸ªconditionã€‚å¤§å°ä¸ºæ»¡æ—¶ï¼Œé¿å…è¿›çš„çº¿ç¨‹ï¼Œå”¤é†’çš„å¯èƒ½è¿˜æ˜¯è¿›çš„çº¿ç¨‹ã€‚å¤§å°ä¸ºé›¶æ—¶ï¼Œå‡ºçš„å”¤é†’çš„è¿˜æ˜¯å‡ºçš„çº¿ç¨‹ã€‚<br>2ã€cond.signal()æ–¹æ³•æŠŠlocké”é‡Šæ”¾äº†å—ï¼Œå¦‚æœé‡Šæ”¾äº†ï¼Œåé¢å†unlockæ˜¯ä¸æ˜¯æ²¡åšä»»ä½•æ“ä½œã€‚<br>3ã€åƒè€å¸ˆè¯„è®ºä¸­çš„Javaå•é”channelä¸¾ä¾‹æ”¹ä¸ºæ™®é€šçš„sync,object.wait(),notifyæ˜¯ä¸æ˜¯æ•ˆæœä¸€æ ·ï¼Œä½†æ€§èƒ½æ²¡lockå¥½ã€‚å¯¹äºä¸¤ä¸ªconditionï¼Œjavaå¯¹è±¡çš„notifyå°±ä¸å¥½æŒ‡å®šå”¤é†’äº†ã€‚","like_count":11,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451444,"discussion_content":"1ã€ä½ æ˜¯å¯¹çš„ï¼Œç”¨ä¸¤ä¸ªcondæ€§èƒ½ä¼šæ›´å¥½ã€‚ä½†æ˜¯ç”¨ä¸€ä¸ªä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸å·¥ä½œçš„ã€‚\n2ã€cond.signal ä¸æ˜¯æŠŠé”é‡Šæ”¾äº†ï¼Œæ˜¯è®©ç­‰å¾…åœ¨è¿™ä¸ªcondä¸Šçš„æ‰§è¡Œä½“æ”¹å˜çŠ¶æ€ï¼ˆä»æŒ‚èµ·åˆ°å¯è¢«è°ƒåº¦ï¼‰ï¼Œä»è€Œå…è®¸è°ƒåº¦ç¨‹åºç»™å®ƒæ‰§è¡Œæƒã€‚\n3ã€å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558796959,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97666,"user_name":"Taozi","can_delete":false,"product_type":"c1","uid":1021926,"ip_address":"","ucode":"DD6567A31B3E33","user_header":"","comment_is_top":false,"comment_ctime":1558745869,"is_pvip":false,"replies":[{"id":"34926","content":"å¯¹çš„","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1558759844,"ip_address":"","comment_id":97666,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35918484237","product_id":100025201,"comment_content":"æ€»ç®—æ˜ç™½ä¸ºä»€ä¹ˆå«æ¡ä»¶å˜é‡äº†ï¼Œæ‹¿è¿™é‡Œçš„Channel å®ç°æ¥è¯´ï¼Œå‡ ä¸ªæ‰§è¡Œä½“è¦è¯»å†™çš„é˜Ÿåˆ—æ˜¯â€œå˜é‡â€ï¼Œé˜Ÿåˆ—çš„é•¿åº¦æ˜¯â€œç­‰å¾…æ¡ä»¶â€å’Œâ€œå”¤é†’æ¡ä»¶â€ã€‚æ˜¯è¿™æ ·ç†è§£å—ï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451367,"discussion_content":"å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558759844,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98665,"user_name":"Cordova","can_delete":false,"product_type":"c1","uid":1507212,"ip_address":"","ucode":"CADCB5D4F48F33","user_header":"https://static001.geekbang.org/account/avatar/00/16/ff/8c/a6a2b26b.jpg","comment_is_top":false,"comment_ctime":1559053514,"is_pvip":false,"replies":[{"id":"35314","content":"1ã€goå’Œjavaçš„ä»£ç åªæ˜¯å½¢ä¼¼ï¼Œå®è´¨ä¸åŒï¼Œå› ä¸ºgoé‡Œé¢çš„channelæ˜¯åç¨‹çš„é€šè®¯è®¾æ–½ï¼Œjavaç‰ˆæœ¬çš„æ˜¯çº¿ç¨‹çš„é€šè®¯è®¾æ–½ï¼Œå¤§ç›¸å¾„åº­ï¼›<br>2ã€æˆ‘ä»¬æœ¬èŠ‚æçš„åŒæ­¥ï¼Œå’ŒåŒæ­¥ioçš„åŒæ­¥ï¼Œä¸¤ä¸ªæ˜¯å®Œå…¨ä¸åŒå«ä¹‰çš„åŒæ­¥ï¼›<br>3ã€æˆ‘ä»¬è¯¾ç¨‹ä¸å¤ªä¼šè®²èµ„æ–™å·²ç»ç›¸å¯¹å¤šçš„æŸä¸ªç»†èŠ‚ï¼Œé™¤éè¿™ä¸ªç»†èŠ‚éå¸¸å…³é”®å½±å“åˆ°å…¨å±€çš„ç†è§£ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1559059822,"ip_address":"","comment_id":98665,"utype":1}],"discussion_count":2,"race_medal":0,"score":"31623824586","product_id":100025201,"comment_content":"çœ‹å®Œä»£ç åå‘ç°goåšçš„é€šä¿¡å‘ç°å¹¶æ²¡æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Œå…¶ä»–è¯­è¨€åšé€šä¿¡ä¹Ÿè¿™ä¹ˆå¹²ã€åˆ·äº†ä¸‹è¯„è®ºåŒºæåˆ°libeventã€æ‰æç„¶å‘ç°æ ‡é¢˜è¿™èŠ‚è®²çš„æ˜¯åŒæ­¥ï¼å¯èƒ½æ˜¯æˆ‘å¤ªæœŸå¾…è®¸è€å¸ˆè®²å¼‚æ­¥äº†ğŸ˜‚ï½ ç›®å‰pythonæˆ‘ç”¨å¼‚æ­¥é¦–é€‰ä¼šæŠŠå¼‚æ­¥è¿‡ç¨‹äº¤ç»™libuvã€‚å¬äº†è€å¸ˆä¸ŠèŠ‚è®²åˆ°pythonçš„åç¨‹åªæ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œæƒ³åˆ°å†…ç½®çš„asyncioè™½ç„¶æ˜¯åšäº†å¼‚æ­¥ä½†è¿˜æ˜¯æœ‰å¾ˆè¾ƒå¤§çš„æ€§èƒ½æå‡ç©ºé—´è¿™ä¸ªé€»è¾‘ä¹Ÿå°±é€šäº†ï¼å¸Œæœ›è®¸è€å¸ˆåœ¨è®²å¼‚æ­¥çš„æ—¶å€™èƒ½å¤šæä¸€æè·¨å¹³å°å¼‚æ­¥åº“ä»–ä»¬æ˜¯æ€ä¹ˆå®ç°","like_count":7,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451777,"discussion_content":"1ã€goå’Œjavaçš„ä»£ç åªæ˜¯å½¢ä¼¼ï¼Œå®è´¨ä¸åŒï¼Œå› ä¸ºgoé‡Œé¢çš„channelæ˜¯åç¨‹çš„é€šè®¯è®¾æ–½ï¼Œjavaç‰ˆæœ¬çš„æ˜¯çº¿ç¨‹çš„é€šè®¯è®¾æ–½ï¼Œå¤§ç›¸å¾„åº­ï¼›\n2ã€æˆ‘ä»¬æœ¬èŠ‚æçš„åŒæ­¥ï¼Œå’ŒåŒæ­¥ioçš„åŒæ­¥ï¼Œä¸¤ä¸ªæ˜¯å®Œå…¨ä¸åŒå«ä¹‰çš„åŒæ­¥ï¼›\n3ã€æˆ‘ä»¬è¯¾ç¨‹ä¸å¤ªä¼šè®²èµ„æ–™å·²ç»ç›¸å¯¹å¤šçš„æŸä¸ªç»†èŠ‚ï¼Œé™¤éè¿™ä¸ªç»†èŠ‚éå¸¸å…³é”®å½±å“åˆ°å…¨å±€çš„ç†è§£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559059822,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572573,"discussion_content":"â€œæˆ‘ä»¬æœ¬èŠ‚æçš„åŒæ­¥ï¼Œå’ŒåŒæ­¥ioçš„åŒæ­¥ï¼Œä¸¤ä¸ªæ˜¯å®Œå…¨ä¸åŒå«ä¹‰çš„åŒæ­¥ï¼›â€ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652861376,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97908,"user_name":"fæŠµè¾¾","can_delete":false,"product_type":"c1","uid":1147808,"ip_address":"","ucode":"98D52386C35AA8","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIIDUnsfAibxPWsyo6y0yZ3ZUZVzgN1U3uvYHGvJ1tSfmDtNwUVDcm0pM3uHzzR5Lwlu28519aUMQQ/132","comment_is_top":false,"comment_ctime":1558837774,"is_pvip":false,"replies":[{"id":"35028","content":"å¯„å­˜å™¨ä¸æ˜¯è¾“å…¥è¾“å‡ºè®¾å¤‡ï¼Œæ“ä½œå¯„å­˜å™¨ä¸éœ€è¦ç»è¿‡æ“ä½œç³»ç»Ÿï¼Œç¼–è¯‘å™¨æ•´å¤©å’Œå¯„å­˜å™¨æ‰“äº¤é“çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1558855214,"ip_address":"","comment_id":97908,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31623608846","product_id":100025201,"comment_content":"å¦‚æœæ˜¯ç”¨æˆ·å¤ªè‡ªå·±å¯¹å¯„å­˜å™¨è¿›è¡Œæ“ä½œï¼Ÿ<br>å¯¹ç‰©ç†å™¨ä»¶çš„æ“ä½œä¸éƒ½æ˜¯è¦ç»è¿‡ç³»ç»Ÿè°ƒç”¨ä¹ˆï¼Ÿ<br>éš¾é“åç¨‹xæ˜¯ç”¨æˆ·æ€çš„æ“ä½œç³»ç»Ÿï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451467,"discussion_content":"å¯„å­˜å™¨ä¸æ˜¯è¾“å…¥è¾“å‡ºè®¾å¤‡ï¼Œæ“ä½œå¯„å­˜å™¨ä¸éœ€è¦ç»è¿‡æ“ä½œç³»ç»Ÿï¼Œç¼–è¯‘å™¨æ•´å¤©å’Œå¯„å­˜å™¨æ‰“äº¤é“çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558855214,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":247635,"user_name":"Eternal","can_delete":false,"product_type":"c1","uid":1188023,"ip_address":"","ucode":"EA6FE7CC98F740","user_header":"https://static001.geekbang.org/account/avatar/00/12/20/b7/bdb3bcf0.jpg","comment_is_top":false,"comment_ctime":1599784240,"is_pvip":false,"replies":[{"id":"90939","content":"ä¿¡å·é‡çš„æ¡ä»¶å¤ªæ­»æ¿ï¼Œä¸å¯ç¼–ç¨‹ã€‚æ¡ä»¶å˜é‡çš„æ¡ä»¶æ˜¯ä»»æ„æ¡ä»¶ï¼Œæ˜¯å¯ç¼–ç¨‹çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1599793369,"ip_address":"","comment_id":247635,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18779653424","product_id":100025201,"comment_content":"ä¿¡å·é‡åªèƒ½å®ç°ä¸€ä¸ªæ¡ä»¶ï¼Œæ¡ä»¶å˜é‡èƒ½å®ç°å¤šäº†æ¡ä»¶ï¼Œä¸çŸ¥ç†è§£å¯¹ä¸å¯¹","like_count":5,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505457,"discussion_content":"ä¿¡å·é‡çš„æ¡ä»¶å¤ªæ­»æ¿ï¼Œä¸å¯ç¼–ç¨‹ã€‚æ¡ä»¶å˜é‡çš„æ¡ä»¶æ˜¯ä»»æ„æ¡ä»¶ï¼Œæ˜¯å¯ç¼–ç¨‹çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599793369,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101437,"user_name":"Ender","can_delete":false,"product_type":"c1","uid":1354521,"ip_address":"","ucode":"FB33FCE576912D","user_header":"https://static001.geekbang.org/account/avatar/00/14/ab/19/23034ffa.jpg","comment_is_top":false,"comment_ctime":1559808871,"is_pvip":false,"replies":[{"id":"36572","content":"å‘ channel.push ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œè¦è€ƒè™‘ channel æ»¡äº†ï¼Œè¿™æ—¶ä¼šç­‰å¾…ï¼Œè¿™å°±æ˜¯ cond.Wait çš„é€»è¾‘","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1559815763,"ip_address":"","comment_id":101437,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14444710759","product_id":100025201,"comment_content":"è¿˜æ˜¯æ²¡å¤ªæ˜ç™½æ¡ä»¶å˜é‡åœ¨channelä»£ç é‡Œé¢çš„æ„ä¹‰ï¼Œæ‰€æœ‰æ“ä½œéƒ½æ˜¯å…ˆè·å–é”ï¼Œåœ¨ä¸€ä¸ªæ“ä½œæ²¡å®Œæˆçš„æƒ…å†µä¸‹å…¶ä»–éƒ½ä¸ä¼šè¿›åˆ°cond.Wait()å‘€ã€‚æŒ‰ç†åªéœ€è¦é”å°±èƒ½åšåˆ°äº†channelçš„å®ç°äº†ã€‚","like_count":4,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452961,"discussion_content":"å‘ channel.push ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œè¦è€ƒè™‘ channel æ»¡äº†ï¼Œè¿™æ—¶ä¼šç­‰å¾…ï¼Œè¿™å°±æ˜¯ cond.Wait çš„é€»è¾‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559815763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97905,"user_name":"Geek_03056e","can_delete":false,"product_type":"c1","uid":1509657,"ip_address":"","ucode":"6D4289AD71BC1A","user_header":"","comment_is_top":false,"comment_ctime":1558837099,"is_pvip":false,"replies":[{"id":"35027","content":"ä¸ä¸€æ ·ï¼Œè¿™æ ·å†™æœ€ç»ˆç”¨çš„æ˜¯libeventçš„å¼‚æ­¥å›è°ƒæ¨¡å¼ã€‚æ²¡æ³•ç”¨åŒæ­¥ioæ¨¡å‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1558855107,"ip_address":"","comment_id":97905,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14443738987","product_id":100025201,"comment_content":"å°†çº¿ç¨‹ç»Ÿä¸€ç”³è¯·ï¼Œå¼„ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œä½¿ç”¨æ¡ä»¶å˜é‡å”¤é†’ï¼Œä½¿ç”¨æ—¶å”¤é†’ï¼Œç”¨å®Œåä¼‘çœ ï¼Œå°±åƒnginxä¸­çš„çº¿ç¨‹æ± ã€‚è¿™ç§è®¾è®¡æ˜¯ä¸å’Œåç¨‹å°±ä¸€æ ·äº†ï¼Œåœ¨ç”¨æˆ·æ€æ„å»ºæ‰§è¡Œä½“ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451466,"discussion_content":"ä¸ä¸€æ ·ï¼Œè¿™æ ·å†™æœ€ç»ˆç”¨çš„æ˜¯libeventçš„å¼‚æ­¥å›è°ƒæ¨¡å¼ã€‚æ²¡æ³•ç”¨åŒæ­¥ioæ¨¡å‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558855107,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97773,"user_name":"ç™½å°ç‹®","can_delete":false,"product_type":"c1","uid":1148049,"ip_address":"","ucode":"222BAC022A630A","user_header":"https://static001.geekbang.org/account/avatar/00/11/84/91/1a7dc912.jpg","comment_is_top":false,"comment_ctime":1558770169,"is_pvip":false,"replies":[{"id":"34937","content":"è®¾è®¡ä¸Šï¼Œgoroutine åº”è¯¥è‡ªå·±å» recover é”™è¯¯ï¼Œè€Œä¸æ˜¯ä¸»è¿›ç¨‹æ¥ recoverã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1558777765,"ip_address":"","comment_id":97773,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14443672057","product_id":100025201,"comment_content":"goä¸­çš„panicä¼šå¯¼è‡´æ•´ä¸ªä¸»è¿›ç¨‹éƒ½æŒ‚æ‰ï¼Œgoroutineé‡Œé¢çš„panicåcoverä¸ä½ï¼Œæ˜¯é€»è¾‘ä¸Šå°±æ˜¯åº”è¯¥æ•´ä¸ªä¸»è¿›ç¨‹éƒ½é€€å‡ºå—","like_count":3,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451412,"discussion_content":"è®¾è®¡ä¸Šï¼Œgoroutine åº”è¯¥è‡ªå·±å» recover é”™è¯¯ï¼Œè€Œä¸æ˜¯ä¸»è¿›ç¨‹æ¥ recoverã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558777765,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97715,"user_name":"cc","can_delete":false,"product_type":"c1","uid":1239833,"ip_address":"","ucode":"AA1B8EA613E3A9","user_header":"https://static001.geekbang.org/account/avatar/00/12/eb/19/19e706a5.jpg","comment_is_top":false,"comment_ctime":1558752944,"is_pvip":false,"replies":[{"id":"34925","content":"æ¬¡åºå¯ä»¥äº¤æ¢çš„ã€‚å› ä¸ºåæ­£é”è¿˜æ²¡æœ‰é‡Šæ”¾ï¼Œè¿™é‡Œåªæ˜¯æ ‡è®°ä¸€ä¸‹å“ªäº›æ‰§è¡Œä½“å¯ä»¥è°ƒåº¦","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1558759710,"ip_address":"","comment_id":97715,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14443654832","product_id":100025201,"comment_content":"è€å¸ˆï¼Œæˆ‘çœ‹ä½ çš„chanelä»£ç å®ç°ï¼Œæ¯”å¦‚popæ–¹æ³•ã€‚æ˜¯å…ˆbroadcastï¼Œåpopã€‚æˆ‘çš„ç†è§£åˆšå¥½ç›¸åã€‚åº”è¯¥æ˜¯å…ˆpopåé€šçŸ¥ã€‚è¯·æ•™ä¸‹é—®ä»€ä¹ˆ","like_count":3,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451383,"discussion_content":"æ¬¡åºå¯ä»¥äº¤æ¢çš„ã€‚å› ä¸ºåæ­£é”è¿˜æ²¡æœ‰é‡Šæ”¾ï¼Œè¿™é‡Œåªæ˜¯æ ‡è®°ä¸€ä¸‹å“ªäº›æ‰§è¡Œä½“å¯ä»¥è°ƒåº¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558759710,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97439,"user_name":"è¼ªè¿´","can_delete":false,"product_type":"c1","uid":1010641,"ip_address":"","ucode":"7504F61285BE35","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6b/d1/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1558669231,"is_pvip":true,"replies":[{"id":"34852","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1558677427,"ip_address":"","comment_id":97439,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14443571119","product_id":100025201,"comment_content":"åŒæ—¶åœ¨çœ‹ã€Šæ·±å…¥æµ…å‡ºè®¡ç®—æœºç»„æˆåŸç†ã€‹å’Œã€ŠGO è¯­è¨€ä»å…¥é—¨åˆ°å®æˆ˜ã€‹ï¼Œå‘ç°ä¸‰ä¸ªè¯¾ç¨‹ä¹‹é—´çš„å…³è”æ€§è¿˜æ˜¯è›®å¤šçš„ï¼Œç›¸è¾…ç›¸æˆï¼Œæ›´åŠ å¸®åŠ©çŸ¥è¯†ç‚¹çš„æ·±å…¥ç†è§£","like_count":4,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451281,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558677427,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97392,"user_name":"mz","can_delete":false,"product_type":"c1","uid":1003581,"ip_address":"","ucode":"1D714C23F78446","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/MlmSR4YXUfrNlZdMv7bv1ic64HaxxVKcVtaxjzhXCvNC4XByICCmYUTprhOESzIV8p59N6DnSJ7HywfvGr5nicgA/132","comment_is_top":false,"comment_ctime":1558663922,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"14443565810","product_id":100025201,"comment_content":"æ„Ÿè§‰å’Œ Java çš„ wait notify notifyall å¾ˆåƒ","like_count":3,"discussions":[{"author":{"id":1188023,"avatar":"https://static001.geekbang.org/account/avatar/00/12/20/b7/bdb3bcf0.jpg","nickname":"Eternal","note":"","ucode":"EA6FE7CC98F740","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305094,"discussion_content":"wait notify notifyallåªå®ç°äº†ä¸€ä¸ªä¿¡å·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599784050,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98699,"user_name":"thewangzl","can_delete":false,"product_type":"c1","uid":1006661,"ip_address":"","ucode":"5968FDED0C5AC8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5c/45/2fa66e67.jpg","comment_is_top":false,"comment_ctime":1559059926,"is_pvip":false,"replies":[{"id":"35326","content":"ä½ è¯´çš„æ˜¯å¯¹çš„ã€‚æˆ‘å…¶å®æ²¡æƒ³åˆ°ä»€ä¹ˆæƒ…å†µä¸‹ç”¨signalï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½æ˜¯ç”¨ broadcastï¼ŒåŒ…æ‹¬æœ¬æ–‡ä¸­çš„ä¾‹å­ã€‚å› ä¸ºç”¨ signal æ„å‘³ç€æ¯æ¬¡èµ„æºçš„ä½¿ç”¨éƒ½è¦é€šçŸ¥ï¼Œå…¶å®é€€åŒ–ä¸ºä¿¡å·é‡çš„ PV æ“ä½œäº†ï¼Œè¿™ä¸€å®šæ€§èƒ½æ˜¯å˜å·®çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1559083676,"ip_address":"","comment_id":98699,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10148994518","product_id":100025201,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæ–‡ç« ä¸­è¯´Signalæ¯”Broadcastå¥½äº›ï¼Œä½†æ˜¯ç‹å®ä»¤è€å¸ˆçš„ä¸“æ ã€ŠJavaå¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹ç¬¬15ç« æåˆ°Dubboå”¤é†’ç­‰å¾…çº¿ç¨‹ä»signalä¼˜åŒ–ä¸ºsignalAllã€‚æ˜¯å› ä¸ºjavaä¸­çš„signal&#47;signalAllå’ŒGoçš„Signal&#47;Broadcastæœ‰å·®å¼‚å—ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451796,"discussion_content":"ä½ è¯´çš„æ˜¯å¯¹çš„ã€‚æˆ‘å…¶å®æ²¡æƒ³åˆ°ä»€ä¹ˆæƒ…å†µä¸‹ç”¨signalï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½æ˜¯ç”¨ broadcastï¼ŒåŒ…æ‹¬æœ¬æ–‡ä¸­çš„ä¾‹å­ã€‚å› ä¸ºç”¨ signal æ„å‘³ç€æ¯æ¬¡èµ„æºçš„ä½¿ç”¨éƒ½è¦é€šçŸ¥ï¼Œå…¶å®é€€åŒ–ä¸ºä¿¡å·é‡çš„ PV æ“ä½œäº†ï¼Œè¿™ä¸€å®šæ€§èƒ½æ˜¯å˜å·®çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559083676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98433,"user_name":"Bachue Zhou","can_delete":false,"product_type":"c1","uid":1494491,"ip_address":"","ucode":"3175754775CA32","user_header":"https://static001.geekbang.org/account/avatar/00/16/cd/db/7467ad23.jpg","comment_is_top":false,"comment_ctime":1559004147,"is_pvip":false,"replies":[{"id":"35199","content":"ç®¡é“åˆç†çš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1559005707,"ip_address":"","comment_id":98433,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10148938739","product_id":100025201,"comment_content":"çœ‹ä¸æ‡‚ä¸ºä»€ä¹ˆè¦æŠŠç®¡é“çš„ä½¿ç”¨åœºæ™¯æ”¾åœ¨ Goroutine ä¹‹é—´é€šè®¯ï¼Œè¿™å¹¶ä¸æ˜¯ç®¡é“åˆç†çš„ä½¿ç”¨åœºæ™¯å•Šï¼Œè‡³äºå’Œ Channel åšå¯¹æ¯”å°±æ›´æ²¡æœ‰æ„ä¹‰äº†ã€‚","like_count":2,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451685,"discussion_content":"ç®¡é“åˆç†çš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559005707,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572574,"discussion_content":"ä¸ªäººæƒ³æ³•ï¼ŒChannelè¿™é‡Œçš„æ„æ€æ˜¯é€šé“ï¼Œç®¡é“ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652861989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98420,"user_name":"82","can_delete":false,"product_type":"c1","uid":1494935,"ip_address":"","ucode":"C58365A8A3843D","user_header":"https://static001.geekbang.org/account/avatar/00/16/cf/97/fcd8957d.jpg","comment_is_top":false,"comment_ctime":1559002811,"is_pvip":true,"replies":[{"id":"35197","content":"è·å–é”å¤±è´¥åªæœ‰ä¸€ç§å¯èƒ½å°±æ˜¯mutexå¯¹è±¡éæ³•ï¼ˆæ¯”å¦‚ä¸ºnilï¼‰ï¼Œé‚£å°±æŠ›å‡ºå¼‚å¸¸ï¼Œæœ¬èº«ä¹Ÿæ˜¯å±äºå¼‚å¸¸å®‰å…¨çš„ä»£ç ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1559003102,"ip_address":"","comment_id":98420,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10148937403","product_id":100025201,"comment_content":"è·å–é”æœ¬èº«æ˜¯ä»€ä¹ˆæ ·çš„æ“ä½œï¼Œæ€ä¹ˆä¿è¯åœ¨è¿™ä¸ªç‚¹ä¸Šä¸å‡ºç°å¼‚å¸¸å‘¢ï¼Ÿ<br>","like_count":2,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451679,"discussion_content":"è·å–é”å¤±è´¥åªæœ‰ä¸€ç§å¯èƒ½å°±æ˜¯mutexå¯¹è±¡éæ³•ï¼ˆæ¯”å¦‚ä¸ºnilï¼‰ï¼Œé‚£å°±æŠ›å‡ºå¼‚å¸¸ï¼Œæœ¬èº«ä¹Ÿæ˜¯å±äºå¼‚å¸¸å®‰å…¨çš„ä»£ç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559003102,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97376,"user_name":"è§‰","can_delete":false,"product_type":"c1","uid":1503600,"ip_address":"","ucode":"95E85D30E92170","user_header":"https://static001.geekbang.org/account/avatar/00/16/f1/70/bca09d2d.jpg","comment_is_top":false,"comment_ctime":1558662022,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10148596614","product_id":100025201,"comment_content":"æ„Ÿæ©å¤§ä½¬åˆ†äº« éšå–œå¤§ä½¬","like_count":2},{"had_liked":false,"id":97365,"user_name":"kylexy_0817","can_delete":false,"product_type":"c1","uid":1068372,"ip_address":"","ucode":"392DD9DD5E4B6E","user_header":"https://static001.geekbang.org/account/avatar/00/10/4d/54/9c214885.jpg","comment_is_top":false,"comment_ctime":1558660387,"is_pvip":false,"replies":[{"id":"34798","content":"channel æœ‰é”è¿™æ˜¯ä»å®ç°è§’åº¦æ¥è®²ï¼Œå†…éƒ¨ç”¨åˆ°äº†é”ã€‚channel æ˜¯é”ï¼Œè¿™æ˜¯ä»ä½¿ç”¨ç•Œé¢æ¥è®²ï¼Œè¿™æ˜¾ç„¶æ˜¯é”™è¯¯çš„ã€‚channel ä¼šé˜»å¡ï¼Œæ˜¯å› ä¸ºå®ƒå®ç°äº†ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ï¼Œå¦‚æœä¸¤è¾¹çš„é€Ÿåº¦ä¸åŒ¹é…ï¼Œè‡ªç„¶ä¼šå‡ºç°ç­‰å¾…ï¼Œè¿™æœ¬èº«æ˜¯ä¸€ä¸ªfeatureï¼Œä¸æ˜¯é—®é¢˜ã€‚channel çš„å¼€é”€æ›´å¤§ï¼Œä½†æ˜¯è¯´ä¸ä¸Šè°å¥½æˆ–è€…ä¸å¥½ï¼Œå› ä¸ºé”å’Œchannelé€‚ç”¨çš„åœºæ™¯å‡ ä¹æ²¡æœ‰é‡å ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1558661677,"ip_address":"","comment_id":97365,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10148594979","product_id":100025201,"comment_content":"ä»Šå¤©åˆšå¥½é˜…è¯»åˆ°è€å¸ˆå†™çš„goè¯­è¨€ç¼–ç¨‹å¹¶å‘çš„ç« èŠ‚ï¼Œé‡Œé¢è¯´åˆ°é€šè¿‡channelè¿›è¡Œgoroutineé—´çš„æ¶ˆæ¯ä¼ é€’ï¼Œæ˜¯ä¼šé˜»å¡çš„ï¼Œæ‰€ä»¥å¯ä»¥ç†è§£æˆä¹Ÿæ˜¯é”å—ï¼Ÿæ€§èƒ½æ–¹é¢å¹¶ä¸ä¼šæ¯”é”å¥½ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451250,"discussion_content":"channel æœ‰é”è¿™æ˜¯ä»å®ç°è§’åº¦æ¥è®²ï¼Œå†…éƒ¨ç”¨åˆ°äº†é”ã€‚channel æ˜¯é”ï¼Œè¿™æ˜¯ä»ä½¿ç”¨ç•Œé¢æ¥è®²ï¼Œè¿™æ˜¾ç„¶æ˜¯é”™è¯¯çš„ã€‚channel ä¼šé˜»å¡ï¼Œæ˜¯å› ä¸ºå®ƒå®ç°äº†ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ï¼Œå¦‚æœä¸¤è¾¹çš„é€Ÿåº¦ä¸åŒ¹é…ï¼Œè‡ªç„¶ä¼šå‡ºç°ç­‰å¾…ï¼Œè¿™æœ¬èº«æ˜¯ä¸€ä¸ªfeatureï¼Œä¸æ˜¯é—®é¢˜ã€‚channel çš„å¼€é”€æ›´å¤§ï¼Œä½†æ˜¯è¯´ä¸ä¸Šè°å¥½æˆ–è€…ä¸å¥½ï¼Œå› ä¸ºé”å’Œchannelé€‚ç”¨çš„åœºæ™¯å‡ ä¹æ²¡æœ‰é‡å ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558661677,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":293923,"user_name":"NiceBlueChai","can_delete":false,"product_type":"c1","uid":2038718,"ip_address":"","ucode":"2043333890C448","user_header":"https://static001.geekbang.org/account/avatar/00/1f/1b/be/525e05ae.jpg","comment_is_top":false,"comment_ctime":1621609915,"is_pvip":true,"replies":[{"id":"106586","content":"c++ä¸€ç›´åœ¨æ±‚å¤§è€Œå…¨","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1621640729,"ip_address":"","comment_id":293923,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5916577211","product_id":100025201,"comment_content":"è¿™é‡Œå°±æœ‰æˆ‘å°±æœ‰ç–‘é—®äº†,æ—¢ç„¶æ¡ä»¶å˜é‡æ›´ä¼˜, é‚£æ—¢ç„¶c++11ä¸­å¼•å…¥äº†ä¿¡å·é‡, ä¸ºå•¥åˆåœ¨æœ€æ–°ç‰ˆçš„C++20æ ‡å‡†ä¸­å¼•å…¥äº†ä¿¡å·é‡(Semaphore)","like_count":1,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520431,"discussion_content":"c++ä¸€ç›´åœ¨æ±‚å¤§è€Œå…¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621640729,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572575,"discussion_content":"â€œæ—¢ç„¶c++11ä¸­å¼•å…¥äº†ä¿¡å·é‡, ä¸ºå•¥åˆåœ¨æœ€æ–°ç‰ˆçš„C++20æ ‡å‡†ä¸­å¼•å…¥äº†ä¿¡å·é‡(Semaphore)â€ ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652862233,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205457,"user_name":"å–†é‡Œ","can_delete":false,"product_type":"c1","uid":1125033,"ip_address":"","ucode":"0B4B38104645CA","user_header":"https://static001.geekbang.org/account/avatar/00/11/2a/a9/83684d4a.jpg","comment_is_top":false,"comment_ctime":1586620464,"is_pvip":true,"replies":[{"id":"76761","content":"åªæœ‰åœ¨ == 0 çš„æ—¶å€™ï¼Œæ‰æœ‰å¯èƒ½æœ‰ goroutine å› ä¸ºæ²¡æœ‰æ•°æ®è€Œç­‰å¾…ã€‚ä¸ç®¡ä¸‰ä¸ƒäºŒåä¸€å°± broadcast å›ºç„¶ä¸ä¼šæœ‰é—®é¢˜ï¼Œä½†æ˜¯è¦çŸ¥é“è¿™æ˜¯ä¸€ä¸ªè´¹æ—¶æ“ä½œï¼Œè°ƒç”¨æ¬¡æ•°å½“ç„¶è¶Šå°‘è¶Šå¥½ã€‚æˆ‘ä¸ºä»€ä¹ˆè¯´ Cond æ˜¯ä¿¡å·é‡ï¼ˆsemaï¼‰çš„æ”¹è¿›ç‰ˆæœ¬ä¹Ÿæ˜¯è¿™ä¸ªåŸå› ï¼Œå› ä¸ºä¿¡å·é‡æ˜¯æ¯æ¬¡éƒ½éœ€è¦æ“ä½œçš„ï¼Œå°¤å…¶å½“ sema æ˜¯ä¸€ä¸ªå†…æ ¸å¯¹è±¡æ—¶ï¼Œå¯ä»¥æƒ³è±¡æ€§èƒ½ä¸å¯èƒ½å¤ªå¥½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1586665439,"ip_address":"","comment_id":205457,"utype":1}],"discussion_count":2,"race_medal":1,"score":"5881587760","product_id":100025201,"comment_content":"è¯·æ•™ä¸ªé—®é¢˜ï¼Œå¯¹channelå®ç°ä»£ç çš„push å’Œpop çš„  c.cond.Broadcast()æ—¶æœºä¸å¤§ç†è§£ã€‚<br>ä¸åº”è¯¥æ˜¯c.queue.Push(v) å®Œç›´æ¥ c.cond.Broadcast()ï¼Œå‘Šè¯‰æœ‰æ•°æ®äº†ï¼Œå¯ä»¥æ¥å–äº†ï¼Œä¸ºä»€ä¹ˆè¦åŠ ä¸Šc.queue.Len() == 0çš„åˆ¤æ–­ï¼Ÿ<br>åŒæ ·ä¸åº”è¯¥æ˜¯popå®Œï¼Œç›´æ¥Broadcastï¼Œå‘Šè¯‰æ•°æ®æ¶ˆè´¹å®Œäº†ï¼Œæœ‰ç©ºé—´äº†ï¼Œå¯ä»¥å­˜äº†ï¼Œä¸ºä»€ä¹ˆè¦åŠ c.queue.Len() == c.nï¼Ÿ<br>è¿˜å¸Œæœ›è®¸è€å¸ˆå¤šå¤šæŒ‡æ•™<br>","like_count":1,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491486,"discussion_content":"åªæœ‰åœ¨ == 0 çš„æ—¶å€™ï¼Œæ‰æœ‰å¯èƒ½æœ‰ goroutine å› ä¸ºæ²¡æœ‰æ•°æ®è€Œç­‰å¾…ã€‚ä¸ç®¡ä¸‰ä¸ƒäºŒåä¸€å°± broadcast å›ºç„¶ä¸ä¼šæœ‰é—®é¢˜ï¼Œä½†æ˜¯è¦çŸ¥é“è¿™æ˜¯ä¸€ä¸ªè´¹æ—¶æ“ä½œï¼Œè°ƒç”¨æ¬¡æ•°å½“ç„¶è¶Šå°‘è¶Šå¥½ã€‚æˆ‘ä¸ºä»€ä¹ˆè¯´ Cond æ˜¯ä¿¡å·é‡ï¼ˆsemaï¼‰çš„æ”¹è¿›ç‰ˆæœ¬ä¹Ÿæ˜¯è¿™ä¸ªåŸå› ï¼Œå› ä¸ºä¿¡å·é‡æ˜¯æ¯æ¬¡éƒ½éœ€è¦æ“ä½œçš„ï¼Œå°¤å…¶å½“ sema æ˜¯ä¸€ä¸ªå†…æ ¸å¯¹è±¡æ—¶ï¼Œå¯ä»¥æƒ³è±¡æ€§èƒ½ä¸å¯èƒ½å¤ªå¥½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586665439,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572576,"discussion_content":"sema = Semaphore","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652862297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172693,"user_name":"Yayu","can_delete":false,"product_type":"c1","uid":1058015,"ip_address":"","ucode":"5E7842458D8229","user_header":"https://static001.geekbang.org/account/avatar/00/10/24/df/645f8087.jpg","comment_is_top":false,"comment_ctime":1579252274,"is_pvip":false,"replies":[{"id":"66988","content":"æ˜¯è¿™æ ·ï¼Œç†è§£å®Œå…¨æ­£ç¡®ã€‚ç”¨Goçš„æ¡ä»¶å˜é‡æ€§èƒ½ä¸Šä¼šæ›´å¥½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1579256881,"ip_address":"","comment_id":172693,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5874219570","product_id":100025201,"comment_content":"Go ä¸­æ¡ä»¶å˜é‡çš„å°è£…æ˜¯ç”¨æ¥æ§åˆ¶ goroutine çš„ï¼Œæ˜¯ä¸æ˜¯æ„å‘³ç€ sync.cond å¹¶ä¸æ˜¯å¯¹å„ä¸ªæ“ä½œç³»ç»Ÿä¸­æ¡ä»¶å˜é‡ api çš„å°è£…ï¼Œè€Œæ˜¯è‡ªå·±å®ç°äº†ä¸€å¥—ç”¨æ¥æ§åˆ¶å¤šä¸ª goroutine ä¹‹é—´çš„åŒæ­¥æ§åˆ¶çš„åŒæ­¥åŸè¯­ï¼Ÿå› ä¸ºå‰é¢è®²è¿‡åŒºåˆ«äºç³»ç»Ÿçº¿ç¨‹ goroutine æ˜¯ç”¨æˆ·çº§å¹¶å‘æ‰§è¡Œä½“æŠ½è±¡ã€‚","like_count":1,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481821,"discussion_content":"æ˜¯è¿™æ ·ï¼Œç†è§£å®Œå…¨æ­£ç¡®ã€‚ç”¨Goçš„æ¡ä»¶å˜é‡æ€§èƒ½ä¸Šä¼šæ›´å¥½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579256881,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129420,"user_name":"aiueo","can_delete":false,"product_type":"c1","uid":1230099,"ip_address":"","ucode":"96100CD14AB501","user_header":"https://static001.geekbang.org/account/avatar/00/12/c5/13/99baef26.jpg","comment_is_top":false,"comment_ctime":1567127739,"is_pvip":false,"replies":[{"id":"48201","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1567131697,"ip_address":"","comment_id":129420,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5862095035","product_id":100025201,"comment_content":"æ–‡ç« ä¸­:<br><br>æŠŠè‡ªå·±åŠ å…¥åˆ°æŒ‚èµ·é˜Ÿåˆ—<br>mutex.Unlock()<br>ç­‰å¾…è¢«å”¤é†’  &#47;&#47; æŒ‚èµ·çš„æ‰§è¡Œä½“ä¼šè¢«åç»­çš„ cond.Broadcast æˆ– cond.Signal() å”¤é†’<br>mutex.Lock()<br><br>è¿™æ®µè¯´æ˜ä¸æ˜¯å¾ˆç†è§£ å…ˆè§£é”ï¼Œç„¶åç­‰å¾…å”¤é†’åå†åŠ é”å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465458,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567131697,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98459,"user_name":"Bachue Zhou","can_delete":false,"product_type":"c1","uid":1494491,"ip_address":"","ucode":"3175754775CA32","user_header":"https://static001.geekbang.org/account/avatar/00/16/cd/db/7467ad23.jpg","comment_is_top":false,"comment_ctime":1559006314,"is_pvip":false,"replies":[{"id":"35236","content":"Goè¯­è¨€é‡Œé¢æœ‰ä¸¤ä¸ªç®¡é“å®ç°ï¼Œä¸€ä¸ªio.Pipeï¼Œæ˜¯ç”¨äºgoroutineä¹‹é—´çš„ï¼›ä¸€ä¸ªæ˜¯os.Pipeï¼Œæ˜¯ç”¨äºè¿›ç¨‹ä¹‹é—´çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1559011809,"ip_address":"","comment_id":98459,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5853973610","product_id":100025201,"comment_content":"ç®¡é“åˆç†çš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿéš¾é“ä¸æ˜¯çˆ¶å­é—´è¿›ç¨‹é€šè®¯æˆ–æ˜¯å­è¿›ç¨‹ä¹‹é—´çš„é€šè®¯å—ï¼Ÿè¿›ç¨‹é—´é€šè®¯å¯ä¸æ˜¯ Goroutine èƒ½è½»æ˜“å–ä»£çš„ã€‚","like_count":1,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451697,"discussion_content":"Goè¯­è¨€é‡Œé¢æœ‰ä¸¤ä¸ªç®¡é“å®ç°ï¼Œä¸€ä¸ªio.Pipeï¼Œæ˜¯ç”¨äºgoroutineä¹‹é—´çš„ï¼›ä¸€ä¸ªæ˜¯os.Pipeï¼Œæ˜¯ç”¨äºè¿›ç¨‹ä¹‹é—´çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559011809,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98432,"user_name":"82","can_delete":false,"product_type":"c1","uid":1494935,"ip_address":"","ucode":"C58365A8A3843D","user_header":"https://static001.geekbang.org/account/avatar/00/16/cf/97/fcd8957d.jpg","comment_is_top":false,"comment_ctime":1559004145,"is_pvip":true,"replies":[{"id":"35208","content":"å½“ç„¶æ˜¯é”ã€‚å¦‚æœè¿™éƒ½ä¿è¯ä¸äº†ï¼Œé‚£å®ƒå°±ä¸æ˜¯é”äº†","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1559006380,"ip_address":"","comment_id":98432,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5853971441","product_id":100025201,"comment_content":"åœ¨é«˜å¹¶å‘ä¸‹è·å–é”æ“ä½œï¼Œè°æ¥ä¿è¯å•æ¬¡æ“ä½œçš„åŸå­æ€§ï¼Œæ“ä½œç³»ç»Ÿè¿˜æ˜¯cpuæˆ–è€…å…¶ä»–å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451684,"discussion_content":"å½“ç„¶æ˜¯é”ã€‚å¦‚æœè¿™éƒ½ä¿è¯ä¸äº†ï¼Œé‚£å®ƒå°±ä¸æ˜¯é”äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559006380,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98127,"user_name":"keshawn","can_delete":false,"product_type":"c1","uid":1319270,"ip_address":"","ucode":"CFCC24F58D1651","user_header":"https://static001.geekbang.org/account/avatar/00/14/21/66/f9125286.jpg","comment_is_top":false,"comment_ctime":1558918410,"is_pvip":false,"replies":[{"id":"35152","content":"æœ¬è´¨ä¸Šæ˜¯çš„ï¼Œä¸è¿‡å®ƒæœ‰ä¸€äº›é«˜çº§ç”¨æ³•æ˜¯å¸¸è§„é˜Ÿåˆ—æ²¡æœ‰çš„ï¼Œæ¯”å¦‚ç”¨selectå»å¤šä¸ªchannelåŒæ—¶è¿›è¡Œè¯»å†™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1558936490,"ip_address":"","comment_id":98127,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5853885706","product_id":100025201,"comment_content":"Channelåªæ˜¯ä¸€ä¸ªå¹¶å‘é˜»å¡é˜Ÿåˆ—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451569,"discussion_content":"æœ¬è´¨ä¸Šæ˜¯çš„ï¼Œä¸è¿‡å®ƒæœ‰ä¸€äº›é«˜çº§ç”¨æ³•æ˜¯å¸¸è§„é˜Ÿåˆ—æ²¡æœ‰çš„ï¼Œæ¯”å¦‚ç”¨selectå»å¤šä¸ªchannelåŒæ—¶è¿›è¡Œè¯»å†™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558936490,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98039,"user_name":"Dean","can_delete":false,"product_type":"c1","uid":1178744,"ip_address":"","ucode":"23B6BE5CAEE11C","user_header":"https://static001.geekbang.org/account/avatar/00/11/fc/78/ef1cb09c.jpg","comment_is_top":false,"comment_ctime":1558880985,"is_pvip":false,"replies":[{"id":"35072","content":"å¦‚æœåªæ˜¯ç®€å•å®ç°ï¼Œæˆ‘æ–‡ç« ä¸­ç»™å‡ºçš„æ˜¯ä¸€ç§å‚è€ƒã€‚ä¸è¿‡Goè¯­è¨€çš„channelåŠŸèƒ½å…¶å®ä¸æ­¢äºæ­¤ï¼Œè¦å®Œæ•´å®ç°æ˜¯æ¯”è¾ƒéš¾çš„ï¼Œå°¤å…¶æ˜¯Go channelè¿˜æ”¯æŒå¤šchannelä¸€èµ·è¯»æˆ–å–ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1558915427,"ip_address":"","comment_id":98039,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5853848281","product_id":100025201,"comment_content":"è¯·é—®javaå¦‚ä½•å®ç°ç®¡é“ï¼Œæ˜¯ç±»ä¼¼SynchronousQueueçš„æ–¹å¼å—","like_count":1,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451529,"discussion_content":"å¦‚æœåªæ˜¯ç®€å•å®ç°ï¼Œæˆ‘æ–‡ç« ä¸­ç»™å‡ºçš„æ˜¯ä¸€ç§å‚è€ƒã€‚ä¸è¿‡Goè¯­è¨€çš„channelåŠŸèƒ½å…¶å®ä¸æ­¢äºæ­¤ï¼Œè¦å®Œæ•´å®ç°æ˜¯æ¯”è¾ƒéš¾çš„ï¼Œå°¤å…¶æ˜¯Go channelè¿˜æ”¯æŒå¤šchannelä¸€èµ·è¯»æˆ–å–ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558915427,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97830,"user_name":"stern","can_delete":false,"product_type":"c1","uid":1501057,"ip_address":"","ucode":"3120A647C6B6AD","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKx6EdicYYuYKibnUiajL1ba1cmzXpK6RmvAoIX4mTgdzVELf6Ljzk2chQIBhk37xRuOAnAwtOjkaRMA/132","comment_is_top":false,"comment_ctime":1558789178,"is_pvip":false,"replies":[{"id":"34981","content":"è¿™ä¸ªæ˜¯ä½ è‡ªå·±çš„ç¨‹åºé€»è¾‘ï¼Œçº¿ç¨‹å¹¶æ²¡æœ‰ä»€ä¹ˆæœºä¼šå»å¸®ä½ åˆ¤æ–­","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1558796479,"ip_address":"","comment_id":97830,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5853756474","product_id":100025201,"comment_content":"éå¸¸é’¦ä½©è€å¸ˆå­¦é—®æ·±åº¦ğŸ˜€ğŸ˜€ï¼Œè¯»å†™é”æ˜¯ä¸æ˜¯å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªè¯·æ±‚è¿‡æ¥ï¼Œå½“å‰çº¿ç¨‹åˆ¤æ–­è¯¥æ“ä½œæ˜¯è¯»æ“ä½œè¿˜æ˜¯å†™æ“ä½œï¼Œå¦‚æœæ˜¯è¯»æ“ä½œåˆ™å…è®¸æ‰§è¡Œï¼Œå¦‚æœæ˜¯å†™æ“ä½œåˆ™ç­‰å¾…é”é‡Šæ”¾åæ‰§è¡Œï¼Œå¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œé‚£è¯»æ“ä½œè¿˜éœ€è¦åŠ æ–‡ä¸­å†™åˆ°çš„mutex.RLockå—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451442,"discussion_content":"è¿™ä¸ªæ˜¯ä½ è‡ªå·±çš„ç¨‹åºé€»è¾‘ï¼Œçº¿ç¨‹å¹¶æ²¡æœ‰ä»€ä¹ˆæœºä¼šå»å¸®ä½ åˆ¤æ–­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558796479,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97761,"user_name":"ç§‘æ˜¥","can_delete":false,"product_type":"c1","uid":1500869,"ip_address":"","ucode":"5766A7E9B9F497","user_header":"https://static001.geekbang.org/account/avatar/00/16/e6/c5/d7aa290b.jpg","comment_is_top":false,"comment_ctime":1558767812,"is_pvip":false,"replies":[{"id":"34929","content":"å»ºè®®å»å­¦ä¹ ä¸€ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1558769168,"ip_address":"","comment_id":97761,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5853735108","product_id":100025201,"comment_content":"å“å‘€ï¼Œè¿›å…¥åˆ°æœ‰ç¨‹åºä»£ç ç« èŠ‚å°±çœ‹ä¸æ‡‚äº†ï¼Œæ²¡æœ‰ç¼–ç¨‹çš„ç»éªŒã€‚","like_count":1,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451403,"discussion_content":"å»ºè®®å»å­¦ä¹ ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558769168,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97405,"user_name":"å†¯åŒå­¦","can_delete":false,"product_type":"c1","uid":1385963,"ip_address":"","ucode":"5C20A9545650C1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTII0u388mhWLGy3XE8lzAqAUj79OpUpHRPpvc3e7icmmCZFJt2DqSTZUlFBy7QWCHfd6dyicHicCruEg/132","comment_is_top":false,"comment_ctime":1558665318,"is_pvip":false,"replies":[{"id":"34839","content":"å¿½ç•¥è¯­æ³•ï¼Œç†è§£ä¸€ä¸‹è¯­ä¹‰å°±è¡Œ","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1558670200,"ip_address":"","comment_id":97405,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5853632614","product_id":100025201,"comment_content":"èƒ½åŒæ—¶ç±»æ¯”ä¸‹JAVAä¹ˆï¼Œæ„Ÿè§‰goæ²¡å­¦è¿‡æœ‰ç‚¹åƒåŠ›","like_count":1,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451270,"discussion_content":"å¿½ç•¥è¯­æ³•ï¼Œç†è§£ä¸€ä¸‹è¯­ä¹‰å°±è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558670200,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97397,"user_name":"æµ…é†‰","can_delete":false,"product_type":"c1","uid":1522672,"ip_address":"","ucode":"5E6EE05F0E732F","user_header":"https://static001.geekbang.org/account/avatar/00/17/3b/f0/4bd5234f.jpg","comment_is_top":false,"comment_ctime":1558664528,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5853631824","product_id":100025201,"comment_content":"æ²¡æœ‰æ¥è§¦è¿‡goğŸ˜‚","like_count":1},{"had_liked":false,"id":97387,"user_name":"é¾™å®å®","can_delete":false,"product_type":"c1","uid":1511926,"ip_address":"","ucode":"355AF9ADC92CE8","user_header":"https://static001.geekbang.org/account/avatar/00/17/11/f6/36bd007d.jpg","comment_is_top":false,"comment_ctime":1558663353,"is_pvip":false,"replies":[{"id":"34842","content":"è¿™ä¸ªæè¿°å¯èƒ½ä¸æ˜¯å¾ˆåˆ°ä½ï¼Œå¯ä»¥çœ‹ä¸‹åé¢è¯¦ç»†çš„ä»‹ç»","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1558670554,"ip_address":"","comment_id":97387,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5853630649","product_id":100025201,"comment_content":"æ–‡ç« ä¸­ç¬¬ä¸€å¼ å›¾ç‰‡ä¸­çš„ æ¡ä»¶å˜é‡å¯¹åº”çš„è¯­ä¹‰è¯´æ˜ â€œå¦‚æœèµ„æºä¸è¶³ä¸‹ç­‰å¾…â€ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451262,"discussion_content":"è¿™ä¸ªæè¿°å¯èƒ½ä¸æ˜¯å¾ˆåˆ°ä½ï¼Œå¯ä»¥çœ‹ä¸‹åé¢è¯¦ç»†çš„ä»‹ç»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558670554,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97374,"user_name":"æœè¶…","can_delete":false,"product_type":"c1","uid":1183380,"ip_address":"","ucode":"8123F1E13D6A68","user_header":"https://static001.geekbang.org/account/avatar/00/12/0e/94/67fffed1.jpg","comment_is_top":false,"comment_ctime":1558661894,"is_pvip":true,"replies":[{"id":"34840","content":"å¿½ç•¥è¯­æ³•ï¼Œç†è§£ä¸€ä¸‹è¯­ä¹‰å°±è¡Œ","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1558670213,"ip_address":"","comment_id":97374,"utype":1}],"discussion_count":1,"race_medal":1,"score":"5853629190","product_id":100025201,"comment_content":"è¿™â€¦â€¦  æ˜¯ä¸æ˜¯å¾—å…ˆå­¦ä¸‹go","like_count":1,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451254,"discussion_content":"å¿½ç•¥è¯­æ³•ï¼Œç†è§£ä¸€ä¸‹è¯­ä¹‰å°±è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558670213,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97319,"user_name":"ä¸€ç¬”ä¸€ç”»","can_delete":false,"product_type":"c1","uid":1495254,"ip_address":"","ucode":"2B9BC8ADF97106","user_header":"https://static001.geekbang.org/account/avatar/00/16/d0/d6/f335954b.jpg","comment_is_top":false,"comment_ctime":1558656322,"is_pvip":false,"replies":[{"id":"34799","content":"Goæœ‰æŒºå¥½çš„ç«äº‰æ£€æµ‹ï¼Œä¸€èˆ¬è¿™ç§æƒ…å†µä¸‹ä¼šå¼‚å¸¸è€Œå´©æºƒï¼Œæ³¨æ„çœ‹é”™è¯¯ä¿¡æ¯é‡Œé¢æ‰“å°çš„å †æ ˆä¿¡æ¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1558661806,"ip_address":"","comment_id":97319,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5853623618","product_id":100025201,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸‹ï¼Œgoè¯­è¨€é‡Œé¢æ¶‰åŠé”æŒ‚æ­»ï¼Œæœ‰ä»€ä¹ˆå¥½çš„è°ƒè¯•æ–¹æ³•å—","like_count":1,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451224,"discussion_content":"Goæœ‰æŒºå¥½çš„ç«äº‰æ£€æµ‹ï¼Œä¸€èˆ¬è¿™ç§æƒ…å†µä¸‹ä¼šå¼‚å¸¸è€Œå´©æºƒï¼Œæ³¨æ„çœ‹é”™è¯¯ä¿¡æ¯é‡Œé¢æ‰“å°çš„å †æ ˆä¿¡æ¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558661806,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":301522,"user_name":"coderç”²","can_delete":false,"product_type":"c1","uid":1503417,"ip_address":"","ucode":"B57E6026AF4A70","user_header":"https://static001.geekbang.org/account/avatar/00/16/f0/b9/67167dc2.jpg","comment_is_top":false,"comment_ctime":1625727483,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625727483","product_id":100025201,"comment_content":"å¸Œæœ›è€å¸ˆæ¨èå‡ æœ¬å…³äºè®¡ç®—æœºåŸç†ã€æ•°æ®ç»“æ„ã€æ“ä½œç³»ç»Ÿã€ç¼–è¯‘åŸç†ç­‰ç±»å‹çš„ï¼Œèƒ½å¤Ÿäº†è§£å¤§å¦åŸºå±‚çš„ä¹¦ç±ï¼Œæˆ–è€…è€å¸ˆè‡ªå·±å‡ºä¸€ç³»åˆ—æ­¤ç±»çš„è¯¾ç¨‹å§ã€‚","like_count":0},{"had_liked":false,"id":294261,"user_name":"æ¬æ¯…","can_delete":false,"product_type":"c1","uid":1015240,"ip_address":"","ucode":"914ED16F3BE714","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7d/c8/e4727683.jpg","comment_is_top":false,"comment_ctime":1621853479,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621853479","product_id":100025201,"comment_content":"çœ‹ç¬¬äºŒéçš„æ—¶å€™ï¼Œé€šé€äº†ä¸€äº›ï¼Œå…¶å®æ˜¯å›´ç»•ç€ç¬¬ä¸€è¡¨æ ¼å±•å¼€è®²çš„ã€‚<br>1ã€goçš„æ¡ä»¶ç±»ä¼¼äºjavaçš„åŒæ­¥ã€‚åªä¸è¿‡javaæ˜¯çº¿ç¨‹é—´çš„åŒæ­¥ï¼Œgoçš„æ¡ä»¶å˜é‡æ˜¯åç¨‹ä¹‹é—´çš„ï¼Œæ€§èƒ½ä¸Šgoä¼˜äºjava<br>2ã€javaçš„åŒæ­¥æ˜¯ç›´æ¥ç”¨sychronize{}ï¼Œç„¶åå¤§æ‹¬å·é‡Œé¢çš„ä»£ç éƒ½æ˜¯åŒæ­¥çš„ï¼Œä¸ä¼šå­˜åœ¨æ¼å†™çš„é—®é¢˜ï¼Œè€Œgoçš„lockå’Œunlockåˆ†å¼€äº†ã€‚å®¹æ˜“æ¼æ‰ï¼Œè¿™ä¸ªjavaå¯ä»¥è¯´åœ¨è¯­æ³•å®‰å…¨ä¿è¯æ–¹é¢ç•¥èƒœä¸€ç­¹ã€‚","like_count":0},{"had_liked":false,"id":285851,"user_name":"ä¸æ¸©æš–å•Šä¸çº¯è‰¯","can_delete":false,"product_type":"c1","uid":2079117,"ip_address":"","ucode":"204474A214E00C","user_header":"https://static001.geekbang.org/account/avatar/00/1f/b9/8d/00bded19.jpg","comment_is_top":false,"comment_ctime":1617032301,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617032301","product_id":100025201,"comment_content":"è¿™ä¸€è®²æˆ‘ç†è§£çš„å‡ ä¸ªçº¿ç¨‹ä¹‹é—´çš„åä½œæ–¹å¼ã€‚<br><br>çº¿ç¨‹é”ã€‚ä»–è®¾è®¡æ˜¯ä¸ºäº†é¿å…å¤šä¸ªçº¿ç¨‹åŒæ—¶å»æ”¹å˜åŒä¸€ä¸ªæ•°æ®ï¼Œä»–è¿˜æœ‰ä¸€ä¸ªè¯»å†™é”çš„æ¦‚å¿µï¼Œè¯»çš„æ“ä½œä¸ä¼šåŸæœ¬çš„æ•°æ®ï¼Œæ‰€ä»¥å½“ä¸‹ä¸€ä¸ªçº¿ç¨‹ä¾ç„¶æ˜¯æ¯’è¯»æ“ä½œï¼Œå°±ä¸éœ€è¦åŠ é”ï¼Œä½¿ç”¨æ—¶è¿˜éœ€è¦æ³¨æ„ï¼Œåœ¨é”çš„å†…éƒ¨ä¸åº”å½“æ‰§è¡Œæ¯”è¾ƒè´¹æ—¶çš„æ“ä½œã€‚<br><br>ç­‰å¾…ç»„ä¾ç„¶éœ€è¦ä¾èµ–ï¼Œäº’æ–¥ä½“(çº¿ç¨‹é”)æ¥å®Œæˆï¼Œç­‰å¾…æ¡ä»¶ï¼Œæ˜¯æŒ‡å‰é¢çš„çº¿ç¨‹è¿˜æ²¡æœ‰æ‰§è¡Œå®Œæ¯•ï¼Œè¿™ä¸ªæ—¶å€™æ­¤å¿åŸæ˜¯ç­‰å¾…çŠ¶æ€ã€‚å”¤é†’æ¡ä»¶ï¼Œæ˜¯æŒ‡å‰é¢çš„å¿åŸå·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œå­çº¿ç¨‹è¢«å”¤é†’ï¼Œç„¶åå»é‡Šæ”¾å‰ä¸€ä¸ªçº¿ç¨‹çš„çº¿ç¨‹é”ï¼Œç„¶åå†ç»™è‡ªå·±åŠ é”ï¼Œå¼€å§‹æ‰§è¡Œï¼Œå”¤é†’ä¸­æœ‰å…¨éƒ¨å”¤é†’å’Œå•ä¸ªå”¤é†’ï¼Œå…¨éƒ¨å”¤é†’çš„è¯ï¼Œå¦‚æœå¯æ‰§è¡Œèµ„æºä¸å¤Ÿï¼Œé‚£å°±å¾—è¿™äº›è¢«å”¤é†’çš„çº¿ç¨‹å»æŠ¢é”ï¼Œè°æŠ¢åˆ°é”è°å°±å¯ä»¥æ‰§è¡Œï¼Œå…¶ä»–çš„åˆ™ç»§ç»­ç­‰å¾…ã€‚<br><br>ç®¡é“æ˜¯çº¿ç¨‹ä¹‹é—´çš„é€šè®¯æ‰‹æ®µï¼Œä¸¤ä¸ªç°æˆçš„é€šè®¯åŠ¨ä½œï¼Œä¸€ä¸ªè´Ÿè´£å¾€ç®¡é“é‡Œé¢å†™æ•°æ®ï¼Œä¸€ä¸ªè´Ÿè´£ä»ç®¡é“é‡Œä¼ è¯»æ•°æ®ï¼Œè¿™æ ·ä¾¿å®Œæˆäº†å¿åŸä¹‹é—´çš„é€šè®¯ã€‚<br><br>ä»¥ä¸Šå°±æ˜¯å¯¹æœ¬ç¯‡æ–‡ç« çš„æ€è€ƒï¼Œå¦‚æœæœ‰ç†è§£ä¸å¯¹çš„åœ°æ–¹ï¼Œè¿˜è¯·è€å¸ˆæŒ‡å‡ºã€‚","like_count":0},{"had_liked":false,"id":284664,"user_name":"KK","can_delete":false,"product_type":"c1","uid":1096397,"ip_address":"","ucode":"14C0858C413E00","user_header":"https://static001.geekbang.org/account/avatar/00/10/ba/cd/1f91aa44.jpg","comment_is_top":false,"comment_ctime":1616409631,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616409631","product_id":100025201,"comment_content":"è€å¸ˆè¯´çš„æ˜¯ç”¨æˆ·æ€ä¿®æ”¹å¯„å­˜å™¨ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥ç†è§£ä¸ºç”¨æˆ·æ€å·²ç»æ‹¿åˆ°äº†å¯„å­˜å™¨çš„åœ°å€ã€‚å¯ä»¥æ ¹æ®å¯„å­˜å™¨åç§°ç›´æ¥ä¿®æ”¹ã€‚","like_count":0},{"had_liked":false,"id":284311,"user_name":"æäºŒæœ¨","can_delete":false,"product_type":"c1","uid":1103091,"ip_address":"","ucode":"30E03BB84ADB27","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/f3/129d6dfe.jpg","comment_is_top":false,"comment_ctime":1616159105,"is_pvip":true,"replies":[{"id":"103123","content":"ä¿¡å·é‡ç”¨å¾—ä¸å¤šäº† ä¸€èˆ¬ä¼šç”¨æ¡ä»¶å˜é‡","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1616163220,"ip_address":"","comment_id":284311,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1616159105","product_id":100025201,"comment_content":"è¿›ç¨‹å†…åŒè¡Œæ–¹å¼å¯ä»¥ç”¨ï¼š<br>é”ï¼ˆMutexï¼‰ï¼›<br>è¯»å†™é”ï¼ˆRWMutexï¼‰ï¼›<br>ä¿¡å·é‡ï¼ˆSemaphoreï¼‰ï¼›<br>ç­‰å¾…ç»„ï¼ˆWaitGroupï¼‰ï¼›<br>æ¡ä»¶å˜é‡ï¼ˆCondï¼‰ã€‚","like_count":0,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517306,"discussion_content":"ä¿¡å·é‡ç”¨å¾—ä¸å¤šäº† ä¸€èˆ¬ä¼šç”¨æ¡ä»¶å˜é‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616163220,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284305,"user_name":"æäºŒæœ¨","can_delete":false,"product_type":"c1","uid":1103091,"ip_address":"","ucode":"30E03BB84ADB27","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/f3/129d6dfe.jpg","comment_is_top":false,"comment_ctime":1616157088,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1616157088","product_id":100025201,"comment_content":"ç”¨é”é‡è¦æé†’ï¼š ä¸è¦åœ¨é”é‡Œé¢æ‰§è¡Œè´¹æ—¶æ“ä½œã€‚","like_count":0},{"had_liked":false,"id":266783,"user_name":"Jerry Chou","can_delete":false,"product_type":"c1","uid":2336895,"ip_address":"","ucode":"87206EA1B9E0CA","user_header":"https://static001.geekbang.org/account/avatar/00/23/a8/7f/c2ce3fc2.jpg","comment_is_top":false,"comment_ctime":1607486270,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607486270","product_id":100025201,"comment_content":"çœ‹å®Œæ–‡ç« ï¼ŒåŒ…æ‹¬ç•™è¨€ï¼Œå‘ç°é‚£ä¸ªPushçš„å®ç°é—®é¢˜æ˜¯ä¸æ˜¯è€è®¸ç‰¹åœ°ç•™åœ¨é‚£é‡Œçš„ã€‚<br>è¿™ä¸ªåœ°æ–¹ï¼Œæˆ‘è‡ªå·±ä¹Ÿå’¯å™”äº†ä¸€ä¸‹ï¼Œéšååœ¨ä»”ç»†çœ‹ä»£ç å°±èƒ½æ˜ç™½è¿™é‡Œå…ˆpushè¿˜æ˜¯å…ˆé€šçŸ¥é¡ºåºå¹¶ä¸é‡è¦äº†äº†ã€‚<br><br>è¿™ä¹Ÿä»ä¾§é¢è¯´æ˜äº†ä¸€ä¸ªé—®é¢˜ï¼Œå¼‚æ­¥æ˜¯åç›´è§‰çš„ï¼Œä½ èƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šç†è§£ï¼ŒåŠ ä¸Šå®ç°çš„å¤æ‚åº¦çš„æ—¶å€™è¿˜æ˜¯å¾ˆå®¹æ˜“å‡ºé”™ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä½œä¸ºgoè¦èŠ±è¿™ä¹ˆå¤§ç²¾åŠ›å°†å¼‚æ­¥è°ƒç”¨å°½é‡åœ¨ä½¿ç”¨æ–¹çœ‹èµ·æ¥æ˜¯åŒæ­¥çš„ã€‚","like_count":0},{"had_liked":false,"id":194084,"user_name":"æ´»æ°´","can_delete":false,"product_type":"c1","uid":1154935,"ip_address":"","ucode":"8A93734B62AF04","user_header":"https://static001.geekbang.org/account/avatar/00/11/9f/77/3a8fb89f.jpg","comment_is_top":false,"comment_ctime":1585023148,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585023148","product_id":100025201,"comment_content":"è¿™èŠ‚å’Œgoå¯†åˆ‡ç»‘å®šäº†ï¼Œéœ€è¦ç±»æ¯”å…¶ä»–è¯­è¨€çš„å®ç°ï¼Œæ˜¯å¦æœ‰ç±»ä¼¼çš„ç”¨æ³•ï¼Œæ‰èƒ½å­¦ä¹ åˆ°åŸç†","like_count":0},{"had_liked":false,"id":184605,"user_name":"zhj","can_delete":false,"product_type":"c1","uid":1311772,"ip_address":"","ucode":"65B9E222D6E075","user_header":"https://static001.geekbang.org/account/avatar/00/14/04/1c/b0c6c009.jpg","comment_is_top":false,"comment_ctime":1583370224,"is_pvip":false,"replies":[{"id":"71407","content":"1ã€å¯¹çš„ï¼Œåç¨‹é€šå¸¸æ˜¯è·‘åœ¨çº¿ç¨‹æ± ä¸Šçš„ï¼›2ã€å¯¹çš„","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1583384799,"ip_address":"","comment_id":184605,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1583370224","product_id":100025201,"comment_content":"1 å› ä¸ºæ“ä½œç³»ç»Ÿæœ€å°è°ƒåº¦çš„æ‰§è¡Œä½“æ˜¯çº¿ç¨‹ï¼Œæ‰€ä»¥å³ä¾¿æ˜¯æ¨¡æ‹Ÿå‡ºäº†ç”¨æˆ·æ€åç¨‹æ‰§è¡Œä½“ï¼Œåœ¨æ“ä½œç³»ç»Ÿçœ‹æœ¬è´¨ä¸Šä¹Ÿæ˜¯è·‘åœ¨çº¿ç¨‹ä¸Šçš„å§ï¼Ÿ2  è¿˜æœ‰åç¨‹çš„ioåŒæ­¥ä¹Ÿä¼šé˜»å¡ï¼Œåªæ˜¯é˜»å¡åˆ‡æ¢çš„æˆæœ¬ç”±äºæ˜¯ç”¨æˆ·æ€å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œåº•å±‚æ˜¯å§”æ‰˜å¼‚æ­¥ç½‘ç»œioçº¿ç¨‹æ¨¡å‹æ¥åšçš„ï¼Œåªæ˜¯åº“å±è”½äº†å¼‚æ­¥çš„å¤æ‚æ€§ï¼Œå‘ä¸Šå±‚å°è£…äº†æ˜“ç”¨çš„åŒæ­¥æ¥å£ï¼Œè¿™æ ·ç†è§£å¯¹å—","like_count":0,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486063,"discussion_content":"1ã€å¯¹çš„ï¼Œåç¨‹é€šå¸¸æ˜¯è·‘åœ¨çº¿ç¨‹æ± ä¸Šçš„ï¼›2ã€å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583384799,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":173057,"user_name":"Yayu","can_delete":false,"product_type":"c1","uid":1058015,"ip_address":"","ucode":"5E7842458D8229","user_header":"https://static001.geekbang.org/account/avatar/00/10/24/df/645f8087.jpg","comment_is_top":false,"comment_ctime":1579418442,"is_pvip":false,"replies":[{"id":"67121","content":"æ˜¯è¿™æ ·","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1579439343,"ip_address":"","comment_id":173057,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1579418442","product_id":100025201,"comment_content":"è¯·æ•™è€å¸ˆï¼Œæ–‡ä¸­â€œå…¶å® Go è¯­è¨€ä¸­å¼•å…¥çš„ channel ä¹Ÿæ˜¯ç®¡é“ï¼Œåªä¸è¿‡å®ƒæ˜¯ç±»å‹å®‰å…¨çš„ç®¡é“ã€‚â€ å¯å¦è¿™æ ·ç†è§£ï¼Œchannel æ˜¯ Go è¯­è¨€ä¸ºäº†é¿å…å¼€å‘äººå‘˜ç¼–å†™è¿‡ç¨‹å‡ºç°ç±»å‹é”™è¯¯è€Œå®šä¹‰çš„ä¸€ä¸ªå†…ç½®æ•°æ®ç±»å‹ã€‚è€ŒæŠ›å¼€ç±»å‹å®‰å…¨çš„é—®é¢˜ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥ä½¿ç”¨ io.pipe æ¥å®ç° goroutine ä¹‹é—´çš„æ•°æ®ä¼ è¾“ï¼Œå½“ç„¶ï¼Œio.pipe åªèƒ½å®ç° unbuffered channel ç±»ä¼¼çš„è¯­æ„ã€‚","like_count":0,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481944,"discussion_content":"æ˜¯è¿™æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579439343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":173042,"user_name":"Yayu","can_delete":false,"product_type":"c1","uid":1058015,"ip_address":"","ucode":"5E7842458D8229","user_header":"https://static001.geekbang.org/account/avatar/00/10/24/df/645f8087.jpg","comment_is_top":false,"comment_ctime":1579416629,"is_pvip":false,"replies":[{"id":"67122","content":"ç±»å‹å®‰å…¨æ˜¯æŒ‡channelè§„å®šäº†æ•°æ®ä¼ é€’çš„ç±»å‹ï¼Œæ¯”å¦‚ chan int åªèƒ½ä¼ é€’æ•´å‹å€¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1579439408,"ip_address":"","comment_id":173042,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1579416629","product_id":100025201,"comment_content":"è¯·é—®è€å¸ˆæ–‡ä¸­æåŠçš„ â€œå…¶å® Go è¯­è¨€ä¸­å¼•å…¥çš„ channel ä¹Ÿæ˜¯ç®¡é“ï¼Œåªä¸è¿‡å®ƒæ˜¯ç±»å‹å®‰å…¨çš„ç®¡é“ã€‚â€ å…¶ä¸­â€œç±»å‹å®‰å…¨â€åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481938,"discussion_content":"ç±»å‹å®‰å…¨æ˜¯æŒ‡channelè§„å®šäº†æ•°æ®ä¼ é€’çš„ç±»å‹ï¼Œæ¯”å¦‚ chan int åªèƒ½ä¼ é€’æ•´å‹å€¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579439408,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159411,"user_name":"sswrock","can_delete":false,"product_type":"c1","uid":1683896,"ip_address":"","ucode":"9D8DA794D7378D","user_header":"https://static001.geekbang.org/account/avatar/00/19/b1/b8/9ff50118.jpg","comment_is_top":false,"comment_ctime":1575617197,"is_pvip":false,"replies":[{"id":"60930","content":"ç±»ä¼¼ï¼Œåªæ˜¯ç‰¹æ€§ä¼šæœ‰è¾ƒå¤§ä¸åŒ","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1575623357,"ip_address":"","comment_id":159411,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1575617197","product_id":100025201,"comment_content":"goçš„channelï¼Œä¸ªäººæ„Ÿè§‰å¯ä»¥ç†è§£æˆjavaçš„BlockingQueue ï¼ˆè²Œä¼¼é‡Œé¢çš„å®ç°åŸç†æ˜¯ä¸€æ ·çš„ï¼‰<br>","like_count":0,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477046,"discussion_content":"ç±»ä¼¼ï¼Œåªæ˜¯ç‰¹æ€§ä¼šæœ‰è¾ƒå¤§ä¸åŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575623357,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155805,"user_name":"è™¢åœ‹æŠ€é†¬","can_delete":false,"product_type":"c1","uid":1056807,"ip_address":"","ucode":"5A192262AA037E","user_header":"https://static001.geekbang.org/account/avatar/00/10/20/27/a6932fbe.jpg","comment_is_top":false,"comment_ctime":1574759315,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574759315","product_id":100025201,"comment_content":"è¿™ç¯‡ä¼°è®¡gopherç«¥é‹çœ‹èµ·æ¥æ¯”è¾ƒå—¨ğŸ˜„","like_count":0},{"had_liked":false,"id":131236,"user_name":"feihui","can_delete":false,"product_type":"c1","uid":1007294,"ip_address":"","ucode":"13F1D4A82BC650","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5e/be/9ea55f46.jpg","comment_is_top":false,"comment_ctime":1567676313,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1567676313","product_id":100025201,"comment_content":"è¯„ä»·ä¸€ç§å®ç°ä¸å¦ä¸€ç§å®ç°çš„æ€§èƒ½å·®è·ï¼Œç›´æ¥çœ‹ä¸‹æºç æœ€ä¸ºç›´è§‚ï¼Œå°±æ–‡ä¸­è¯´çš„ lock å’Œ channel çš„è¯¯åŒºï¼ŒæŒ‰ç…§æˆ‘è‡ªå·±çš„ç†è§£ channel æ—¢ç„¶è¦å®ç°åŒæ­¥ï¼Œä¹Ÿè‚¯å®šå°‘ä¸äº† cas æˆ–è€… lock çš„ï¼Œå½“ç„¶è¿™ä¸ªæ˜¯æˆ‘å¯¹ java åº“å®ç°çš„ç†è§£ï¼Œä¸çŸ¥é“ go çš„å®ç°æœ‰æ²¡æœ‰å·®å¼‚ã€‚","like_count":0},{"had_liked":false,"id":120739,"user_name":"åŠæ¡¶æ°´","can_delete":false,"product_type":"c1","uid":1000475,"ip_address":"","ucode":"AFC053EB627E48","user_header":"https://static001.geekbang.org/account/avatar/00/0f/44/1b/fa287ed5.jpg","comment_is_top":false,"comment_ctime":1564987473,"is_pvip":false,"replies":[{"id":"44355","content":"Cå¯ä»¥","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1565005944,"ip_address":"","comment_id":120739,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1564987473","product_id":100025201,"comment_content":"è¯»å†™é”ä¸€ä¸ªç–‘é—®ï¼Œå‡è®¾Aè·å–äº†è¯»é”ï¼Œè¿™æ—¶å€™Bå°è¯•è·å–å†™é”ï¼ŒAè¿˜æ²¡é‡Šæ”¾é”Cåˆå°è¯•å»è·å–è¯»é”ï¼Œè¿™ä¸ªæ—¶å€™Cèƒ½å¦æˆåŠŸè·å–åˆ°è¯»é”ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461455,"discussion_content":"Cå¯ä»¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565005944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1411864,"avatar":"https://static001.geekbang.org/account/avatar/00/15/8b/18/e0d71ce7.jpg","nickname":"pretender","note":"","ucode":"E10CE42D27A612","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":111031,"discussion_content":"çœ‹äº†ä¸€ä¸‹ï¼Œgoçš„RWMutexæ˜¯å…¬å¹³é”ï¼ŒCå¾—ç­‰Bç”¨å®Œ    \n    22  // If a goroutine holds a RWMutex for reading and another goroutine might\n    23  // call Lock, no goroutine should expect to be able to acquire a read lock\n    24  // until the initial read lock is released. In particular, this prohibits\n    25  // recursive read locking. This is to ensure that the lock eventually becomes\n    26  // available; a blocked Lock call excludes new readers from acquiring the\n    27  // lock.\n    28  type RWMutex struct {","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577773614,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1411864,"avatar":"https://static001.geekbang.org/account/avatar/00/15/8b/18/e0d71ce7.jpg","nickname":"pretender","note":"","ucode":"E10CE42D27A612","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":110907,"discussion_content":"å¯¹goä¸å¤ªç†Ÿæ‚‰ï¼Œå¦‚æœæ˜¯Javaçš„è¯ï¼Œåˆå§‹åŒ–æ—¶å¯ä»¥æŒ‡å®šä¸ºå…¬å¹³é”æˆ–éå…¬å¹³é”ï¼Œéå…¬å¹³é”çš„æƒ…å†µä¸‹Cå¯ä»¥ç›´æ¥è·å–åˆ°è¯»é”ï¼Œç¼ºç‚¹æ˜¯åœ¨ä¸€ä¸ªè¯»æ“ä½œå¾ˆé¢‘ç¹çš„ç¯å¢ƒä¸‹ï¼ŒBæœ‰å¯èƒ½ä¼šâ€œé¥¿æ­»â€ï¼Œå› ä¸ºä¸€ç›´æœ‰è¯»æ“ä½œæ— æ³•è·å–åˆ°å†™é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577764248,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119627,"user_name":"äº”å¹´","can_delete":false,"product_type":"c1","uid":1081224,"ip_address":"","ucode":"28A6F945FB0626","user_header":"https://static001.geekbang.org/account/avatar/00/10/7f/88/c4263c58.jpg","comment_is_top":false,"comment_ctime":1564640691,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564640691","product_id":100025201,"comment_content":"è·Ÿç€å¯¹goçš„ç†è§£ä¹Ÿæ·±å…¥äº†å¥½å¤š ğŸ‘","like_count":0},{"had_liked":false,"id":119066,"user_name":"é¥­","can_delete":false,"product_type":"c1","uid":1610573,"ip_address":"","ucode":"B3F1702D4DE604","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJKj3GbvevFibxwJibTqm16NaE8MXibwDUlnt5tt73KF9WS2uypha2m1Myxic6Q47Zaj2DZOwia3AgicO7Q/132","comment_is_top":false,"comment_ctime":1564496014,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564496014","product_id":100025201,"comment_content":"è€å¸ˆï¼Œæˆ‘ä¸æ‡‚GOï¼Œå¦‚æœæŒ‰JAVAæ¥ç†è§£çš„è¯ï¼Œåç¨‹çš„æ€æƒ³ä¸»è¦ä½“ç°åœ¨å“ªäº›åœ°æ–¹äº†","like_count":0},{"had_liked":false,"id":104993,"user_name":"nightmare","can_delete":false,"product_type":"c1","uid":1056314,"ip_address":"","ucode":"EF2E51C2122A86","user_header":"https://static001.geekbang.org/account/avatar/00/10/1e/3a/5b21c01c.jpg","comment_is_top":false,"comment_ctime":1560903980,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560903980","product_id":100025201,"comment_content":"æ„Ÿè§‰goçš„chanelå°±ç›¸å½“äºjavaçš„ä¸€ä¸ªæœ‰ç•Œé˜Ÿåˆ—ï¼Œåªä¸è¿‡æ˜¯åŸºäºåç¨‹è°ƒåº¦ï¼Œä¸ä¼šå‘ç”Ÿå†…æ ¸åˆ‡æ¢","like_count":0},{"had_liked":false,"id":102389,"user_name":"Julian","can_delete":false,"product_type":"c1","uid":1020566,"ip_address":"","ucode":"6DD1BB78E0E265","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/96/586fe25a.jpg","comment_is_top":false,"comment_ctime":1560215364,"is_pvip":false,"replies":[{"id":"36934","content":"åŸå­æ“ä½œå’Œé”è¯­ä¹‰å®Œå…¨ä¸åŒã€‚åªä¸è¿‡å¯ä»¥ç”¨é”æ¥å®ç°åŸå­æ“ä½œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1560220246,"ip_address":"","comment_id":102389,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1560215364","product_id":100025201,"comment_content":"è¯·é—®æ‚¨è®²çš„åŸå­æ“ä½œå’Œäº’æ–¥ä½“ï¼ˆé”ï¼‰çš„è¯­ä¹‰æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä»–ä»¬åˆ°åº•æœ‰ä»€ä¹ˆä¸ä¸€æ ·å‘¢ï¼Ÿèƒ½è¯¦ç»†è®²è®²å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453393,"discussion_content":"åŸå­æ“ä½œå’Œé”è¯­ä¹‰å®Œå…¨ä¸åŒã€‚åªä¸è¿‡å¯ä»¥ç”¨é”æ¥å®ç°åŸå­æ“ä½œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560220246,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101969,"user_name":"å·","can_delete":false,"product_type":"c1","uid":1030859,"ip_address":"","ucode":"0C1C11A3B31AE8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ba/cb/f1355b40.jpg","comment_is_top":false,"comment_ctime":1560077178,"is_pvip":true,"replies":[{"id":"36763","content":"åªæ˜¯å€Ÿç”¨äº†goçš„è¯­æ³•","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1560088937,"ip_address":"","comment_id":101969,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1560077178","product_id":100025201,"comment_content":"è™½ç„¶æˆ‘ä¹Ÿæ˜¯goç²‰ï¼Œä½†è¿™ç« å®åœ¨æ˜¯è¿‡äºåƒgolangç§‘æ™®è€Œéæ™®é€‚æ€§çš„å¯¹é—®é¢˜çš„æŠ½è±¡å’Œå»ºæ¨¡äº†ã€‚ä¸çŸ¥é“æ²¡å­¦è¿‡goçš„è¯»è€…çœ‹èµ·æ¥ä¼šæ˜¯ä»€ä¹ˆä½“éªŒã€‚","like_count":0,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453194,"discussion_content":"åªæ˜¯å€Ÿç”¨äº†goçš„è¯­æ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560088937,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1114772,"avatar":"https://static001.geekbang.org/account/avatar/00/11/02/94/2bf394f3.jpg","nickname":"Numbpad1","note":"","ucode":"2F075AC7E3847D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535442,"discussion_content":"ä½“éªŒæå·®ï¼Œå¯¹äºä¸äº†è§£goçš„åŒå­¦æ¥è¯´å­¦ä¹ æˆæœ¬è¾ƒé«˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638444215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1676962,"avatar":"https://static001.geekbang.org/account/avatar/00/19/96/a2/c1596dd8.jpg","nickname":"ğŸ¤”","note":"","ucode":"40ACB53BF3C6B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1114772,"avatar":"https://static001.geekbang.org/account/avatar/00/11/02/94/2bf394f3.jpg","nickname":"Numbpad1","note":"","ucode":"2F075AC7E3847D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566477,"discussion_content":"è¿™ç¯‡ä¼°è®¡gopherç«¥é‹çœ‹èµ·æ¥æ¯”è¾ƒå—¨ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650699367,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":535442,"ip_address":""},"score":566477,"extra":""}]}]},{"had_liked":false,"id":101383,"user_name":"è‹ŸèŒƒå„¿","can_delete":false,"product_type":"c1","uid":1364883,"ip_address":"","ucode":"B06B86765512FA","user_header":"https://static001.geekbang.org/account/avatar/00/14/d3/93/bef5a186.jpg","comment_is_top":false,"comment_ctime":1559794192,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559794192","product_id":100025201,"comment_content":"æ„Ÿè°¢è€å¸ˆå¯¹åŒæ­¥ã€äº’æ–¥ã€é€šè®¯çš„è®²è§£ï½","like_count":0},{"had_liked":false,"id":101330,"user_name":"é—«é£","can_delete":false,"product_type":"c1","uid":1013162,"ip_address":"","ucode":"30C782D30108D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/aa/21275b9d.jpg","comment_is_top":false,"comment_ctime":1559783064,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559783064","product_id":100025201,"comment_content":"Rustè¯­è¨€é‡‡ç”¨å¼ºåˆ¶çš„ownershipæ£€æŸ¥ï¼Œå¯¹è±¡ç”Ÿå‘½å‘¨æœŸä¸€è‡´æ€§æ£€æŸ¥å’Œä¸»åŠ¨çš„å†²çªæ£€æµ‹è¯•å›¾ä»å¦å¤–ä¸€ä¸ªå±‚é¢è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ‰æ²¡æœ‰ç”¨æˆ·æ€çš„GCè®¾æ–½çš„å¼€é”€ï¼Œåº”è¯¥æ˜¯å¦å¤–ä¸€ä¸ªä¸é”™çš„æ–¹å‘ã€‚Talkoåº“éå¸¸å¼ºå¤§äº†ï¼Œå¯æƒœRust2018å…³äºåŒæ­¥æ–¹é¢çš„è®¾æ–½è¿˜æ²¡æœ‰å®Œå…¨æˆç†Ÿã€‚","like_count":0},{"had_liked":false,"id":99562,"user_name":"è€Œç«‹æ–‹","can_delete":false,"product_type":"c1","uid":1087258,"ip_address":"","ucode":"5FED6E9E148195","user_header":"https://static001.geekbang.org/account/avatar/00/10/97/1a/389eab84.jpg","comment_is_top":false,"comment_ctime":1559261209,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559261209","product_id":100025201,"comment_content":"è€å¸ˆæƒ³å‘ˆç°å‡ºæ¥çš„æ˜¯è€è™ğŸ¯ï¼Œè€Œæˆ‘è¿˜å¤©çœŸçš„ä»¥ä¸ºè¿™æ˜¯ä¸€åªè€é¼ ğŸ­ï¼Œè¿çŒ«ğŸ±éƒ½æ²¡æœ‰æƒ³åˆ°","like_count":0},{"had_liked":false,"id":98105,"user_name":"Barry","can_delete":false,"product_type":"c1","uid":1003308,"ip_address":"","ucode":"79117738B2B26E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4f/2c/a17b23f7.jpg","comment_is_top":false,"comment_ctime":1558916293,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558916293","product_id":100025201,"comment_content":"è™½ç„¶å¯¹goçš„è¯­æ³•åªæ˜¯ä¸€ä¸ªåŸºæœ¬çš„äº†è§£ï¼Œä½†æ˜¯çœ‹åˆ°ä»£ç çš„è¯­ä¹‰ï¼Œæ„Ÿè§‰ç¬é—´é¡¿æ‚Ÿäº†å¥½å¤šã€‚ä¹Ÿä½“ä¼šåˆ°äº†è¿™äº›ä»£ç è®¾è®¡çš„å·§å¦™ä¹‹å¤„ï¼Œç‰¹åˆ«æ˜¯æ˜¯æ¡ä»¶å˜é‡ã€‚æˆ‘è§‰å¾—è¿™äº›è®¾è®¡å¯ä»¥åœ¨ä¸å°‘çš„ä¸šåŠ¡åœºæ™¯ä¸­è¿ç”¨èµ·æ¥ï¼Œæ— å…³è¯­è¨€ã€‚èµ","like_count":0},{"had_liked":false,"id":98037,"user_name":"Dean","can_delete":false,"product_type":"c1","uid":1178744,"ip_address":"","ucode":"23B6BE5CAEE11C","user_header":"https://static001.geekbang.org/account/avatar/00/11/fc/78/ef1cb09c.jpg","comment_is_top":false,"comment_ctime":1558880544,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558880544","product_id":100025201,"comment_content":"channelçš„ä¾‹å­å¾ˆåƒjucçš„å¾ˆå¤šå®ç°","like_count":0},{"had_liked":false,"id":97672,"user_name":"å°è¾‰è¾‰","can_delete":false,"product_type":"c1","uid":1189661,"ip_address":"","ucode":"9FF25E25C85350","user_header":"https://static001.geekbang.org/account/avatar/00/12/27/1d/1cb36854.jpg","comment_is_top":false,"comment_ctime":1558747201,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558747201","product_id":100025201,"comment_content":"ä¹‹å‰æŠŠä¸¤ä¸ªå­¦ä¹ goçš„ä¸“æ çœ‹å®Œäº†ï¼Œå†æ¥ç†è§£è€å¸ˆè¯´çš„è¿™ä¸ªï¼Œåˆè®©æˆ‘åŠ æ·±äº†å¯¹goçš„ç†è§£ğŸ˜€ğŸ˜€ğŸ˜€   çœ‹è¯„è®ºè¯´æƒ³çœ‹javaä¾‹å­çš„ï¼Œæˆ‘æ¨èç‹å®ä»¤è€å¸ˆçš„ã€Šjavaå¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹ä¸“æ ï¼Œé‡Œé¢è®²çš„ä¹Ÿä¸é”™ã€‚å½“ç„¶åƒè®¸è€å¸ˆè¯´çš„ï¼Œå¯ä»¥å¿½ç•¥è¯­æ³•ï¼Œä¸è¿‡å¯¹æ¯”ç€çœ‹å¯ä»¥æ›´æ¸…æ¥šåŸç†ã€‚","like_count":0},{"had_liked":false,"id":97603,"user_name":"ljf10000","can_delete":false,"product_type":"c1","uid":1494064,"ip_address":"","ucode":"44957329A61EAE","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eop9WylZJicLQ5wib49kcMPqCTRT1aThh6mMAVl6qseLwbVOLhicVLjZCxCoyQd5CrrHHibs2CVPaoK3g/132","comment_is_top":false,"comment_ctime":1558709536,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558709536","product_id":100025201,"comment_content":"é”åªèƒ½ä¿éšœèµ„æºçš„äº’æ–¥ï¼Œä½†æ— æ³•ä¿éšœæ—¶åºã€‚","like_count":0},{"had_liked":false,"id":97317,"user_name":"Aaron Cheung","can_delete":false,"product_type":"c1","uid":1079816,"ip_address":"","ucode":"03972759C53667","user_header":"https://static001.geekbang.org/account/avatar/00/10/7a/08/4d3e47dd.jpg","comment_is_top":false,"comment_ctime":1558655265,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558655265","product_id":100025201,"comment_content":"æ‰“å¡12 æ·±å…¥è¿›ç¨‹","like_count":0},{"had_liked":false,"id":97307,"user_name":"lckfaæé’Š","can_delete":false,"product_type":"c1","uid":1356899,"ip_address":"","ucode":"AD13D205104AA6","user_header":"https://static001.geekbang.org/account/avatar/00/14/b4/63/84960032.jpg","comment_is_top":false,"comment_ctime":1558651942,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558651942","product_id":100025201,"comment_content":"ä¸ªäººç†è§£ è¿›ç¨‹å†…çš„ååŒ ï¼Œå…¶å®å°±æ˜¯çº¿ç¨‹æˆ–åç¨‹çš„ååŒï¼ˆå¯¹åç¨‹æ²¡å¤šå°‘æ¦‚å¿µï¼Œä¸ç¡®å®š åç¨‹å¦‚ä½•ä¸çº¿ç¨‹ååŒï¼‰ï¼ŒååŒåŒ…æ‹¬äº†å¤§å®¶å…ˆå„è‡ªä¸ºæ”¿ï¼Œå¶å°”çš„äº¤æµå¾€æ¥ï¼Œä¹Ÿå¯èƒ½éœ€è¦ä¿æŒæ•°æ®åŒæ­¥ã€‚æ—¢ç„¶éœ€è¦å„è‡ªä¸ºæ”¿ï¼Œå°±å¾—ä¿è¯äº’ä¸å¹²æ‰°ï¼Œäºæ˜¯å°±éœ€è¦æŠŠæŸäº›å…¬ç”¨çš„èµ„æºåœ¨ä½¿ç”¨æ—¶åšè®°å·ï¼ŒåŸå­ï¼Œäº’æ–¥æ“ä½œå¯ä»¥è¾¾æˆè¿™ä¸ªç›®åœ°ï¼Œå…¬ç”¨èµ„æºçš„ä½¿ç”¨å¾€å¾€æœ‰è°æŠ¢åˆ°è°ç”¨ï¼Œååˆ°çš„å°±ç»™æˆ‘ç­‰ç€çš„æ„å‘³ï¼›äº¤æµå¾€æ¥æ—¶å¯ä»¥ä½¿ç”¨ç®¡é“ï¼Œåœ¨äºŒè€…ä¹‹é—´å»ºç«‹è¿æ¥ï¼Œæœ‰å•å‘çš„ç®¡é“ï¼Œä¹Ÿæœ‰åŒå‘çš„ç®¡é“ï¼Œçœ‹é€šä¿¡çš„éœ€æ±‚è€Œå®šï¼›æœ€åï¼Œäº¤æµæ–¹ä¹Ÿå¯èƒ½éœ€è¦ä¿æŒåŒæ­¥ï¼Œè§„å®šè°å…ˆè°åï¼Œæ­¤æ—¶ï¼Œä¿¡å·é‡ï¼Œæ¡ä»¶å˜é‡å°±å¯ä»¥ç™»åœºäº†ï¼Œä¸€èˆ¬çš„è¯´ï¼ŒåŒæ­¥å…¶å®åŒ…å«äº†äº’æ–¥ï¼Œæ¯”å¦‚å¯ä»¥å¯¹æŸå…¬å…±èµ„æºçš„ä½¿ç”¨ï¼Œé€šè¿‡åŒæ­¥ä¿è¯ä¸€å®šæ˜¯Aå…ˆBåçš„ä½¿ç”¨ã€‚","like_count":0}]}