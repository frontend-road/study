{"id":643915,"title":"06ï½œChatGPTæ¥äº†ï¼Œè®©æˆ‘ä»¬å¿«é€Ÿåšä¸ªAIåº”ç”¨","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å¾æ–‡æµ©ã€‚</p><p>è¿‡å»çš„ä¸¤è®²ï¼Œæˆ‘å¸¦ç€ä½ é€šè¿‡OpenAIæä¾›çš„Embeddingæ¥å£ï¼Œå®Œæˆäº†æ–‡æœ¬åˆ†ç±»çš„åŠŸèƒ½ã€‚é‚£ä¹ˆï¼Œè¿™ä¸€è®²é‡Œï¼Œæˆ‘ä»¬é‡æ–°å›åˆ°Completionæ¥å£ã€‚è€Œä¸”è¿™ä¸€è®²é‡Œï¼Œæˆ‘ä»¬è¿˜ä¼šå¿«é€Ÿæ­å»ºå‡ºä¸€ä¸ªæœ‰ç•Œé¢çš„èŠå¤©æœºå™¨äººæ¥ç»™ä½ ç”¨ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹é‡Œï¼Œä½ ä¹Ÿä¼šç¬¬ä¸€æ¬¡ä½¿ç”¨ HuggingFace è¿™ä¸ªå¹³å°ã€‚</p><p>HuggingFace æ˜¯ç°åœ¨æœ€æµè¡Œçš„æ·±åº¦æ¨¡å‹çš„ç¤¾åŒºï¼Œä½ å¯ä»¥åœ¨é‡Œé¢ä¸‹è½½åˆ°æœ€æ–°å¼€æºçš„æ¨¡å‹ï¼Œä»¥åŠçœ‹åˆ°åˆ«äººæä¾›çš„ç¤ºä¾‹ä»£ç ã€‚</p><h2>ChatGPTæ¥äº†ï¼Œæ›´å¿«çš„é€Ÿåº¦æ›´ä½çš„ä»·æ ¼</h2><p>æˆ‘åœ¨<a href=\"https://time.geekbang.org/column/article/642197\">ç¬¬03è®²</a>é‡Œï¼Œå·²ç»ç»™ä½ çœ‹äº†å¦‚ä½•é€šè¿‡Completionçš„æ¥å£ï¼Œå®ç°ä¸€ä¸ªèŠå¤©æœºå™¨äººçš„åŠŸèƒ½ã€‚åœ¨é‚£ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬é‡‡ç”¨çš„æ˜¯è‡ªå·±å°†æ•´ä¸ªå¯¹è¯æ‹¼æ¥èµ·æ¥ï¼Œå°†æ•´ä¸ªä¸Šä¸‹æ–‡éƒ½å‘é€ç»™OpenAIçš„Completion APIçš„æ–¹å¼ã€‚ä¸è¿‡ï¼Œåœ¨3æœˆ2æ—¥ï¼Œå› ä¸ºChatGPTçš„ç«çƒ­ï¼ŒOpenAIæ”¾å‡ºäº†ä¸€ä¸ªç›´æ¥å¯ä»¥è¿›è¡Œå¯¹è¯èŠå¤©çš„æ¥å£ã€‚è¿™ä¸ªæ¥å£å«åš <strong>ChatCompletion</strong>ï¼Œå¯¹åº”çš„æ¨¡å‹å«åšgpt-3.5-turboï¼Œä¸ä½†ç”¨èµ·æ¥æ›´å®¹æ˜“äº†ï¼Œé€Ÿåº¦è¿˜å¿«ï¼Œè€Œä¸”ä»·æ ¼ä¹Ÿæ˜¯æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨çš„ text-davinci-003 çš„ååˆ†ä¹‹ä¸€ï¼Œå¯è°“æ˜¯ç‰©ç¾ä»·å»‰äº†ã€‚</p><pre><code class=\"language-python\">import openai\nopenai.ChatCompletion.create(\n  model=\"gpt-3.5-turbo\",\n  messages=[\n        {\"role\": \"system\", \"content\": \"You are a helpful assistant.\"},\n        {\"role\": \"user\", \"content\": \"Who won the world series in 2020?\"},\n        {\"role\": \"assistant\", \"content\": \"The Los Angeles Dodgers won the World Series in 2020.\"},\n        {\"role\": \"user\", \"content\": \"Where was it played?\"}\n    ]\n)\n</code></pre><!-- [[[read_end]]] --><p><span class=\"reference\">æ³¨ï¼šç‚¹å‡»åœ¨è¿™ä¸ª<a href=\"https://platform.openai.com/docs/guides/chat\">é“¾æ¥</a>ä½ å¯ä»¥çœ‹åˆ°æ¥å£è°ƒç”¨ç¤ºä¾‹ã€‚</span></p><p>åœ¨OpenAIçš„å®˜æ–¹æ–‡æ¡£é‡Œï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸ªæ¥å£ä¹Ÿéå¸¸ç®€å•ã€‚ä½ éœ€è¦ä¼ å…¥çš„å‚æ•°ï¼Œä»ä¸€æ®µPromptå˜æˆäº†ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„æ¯ä¸ªå…ƒç´ éƒ½æœ‰roleå’Œcontentä¸¤ä¸ªå­—æ®µã€‚</p><ol>\n<li>roleè¿™ä¸ªå­—æ®µä¸€å…±æœ‰ä¸‰ä¸ªè§’è‰²å¯ä»¥é€‰æ‹©ï¼Œå…¶ä¸­ system ä»£è¡¨ç³»ç»Ÿï¼Œuserä»£è¡¨ç”¨æˆ·ï¼Œè€Œassistantåˆ™ä»£è¡¨AIçš„å›ç­”ã€‚</li>\n<li>å½“roleæ˜¯systemçš„æ—¶å€™ï¼Œcontenté‡Œé¢çš„å†…å®¹ä»£è¡¨æˆ‘ä»¬ç»™AIçš„ä¸€ä¸ªæŒ‡ä»¤ï¼Œä¹Ÿå°±æ˜¯å‘Šè¯‰AIåº”è¯¥æ€ä¹ˆå›ç­”ç”¨æˆ·çš„é—®é¢˜ã€‚æ¯”å¦‚æˆ‘ä»¬å¸Œæœ›AIéƒ½é€šè¿‡ä¸­æ–‡å›ç­”ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨contenté‡Œé¢å†™â€œä½ æ˜¯ä¸€ä¸ªåªä¼šç”¨ä¸­æ–‡å›ç­”é—®é¢˜çš„åŠ©ç†â€ï¼Œè¿™æ ·å³ä½¿ç”¨æˆ·é—®çš„é—®é¢˜éƒ½æ˜¯è‹±æ–‡çš„ï¼ŒAIçš„å›å¤ä¹Ÿéƒ½ä¼šæ˜¯ä¸­æ–‡çš„ã€‚</li>\n<li>è€Œå½“roleæ˜¯useræˆ–è€…assistantçš„æ—¶å€™ï¼Œcontenté‡Œé¢çš„å†…å®¹å°±ä»£è¡¨ç”¨æˆ·å’ŒAIå¯¹è¯çš„å†…å®¹ã€‚å’Œæˆ‘ä»¬åœ¨<a href=\"https://time.geekbang.org/column/article/642197\">ç¬¬03è®²</a>é‡Œåšçš„èŠå¤©æœºå™¨äººä¸€æ ·ï¼Œä½ éœ€è¦æŠŠå†å²ä¸Šçš„å¯¹è¯ä¸€èµ·å‘é€ç»™OpenAIçš„æ¥å£ï¼Œå®ƒæ‰èƒ½æœ‰ç†è§£æ•´ä¸ªå¯¹è¯çš„ä¸Šä¸‹æ–‡çš„èƒ½åŠ›ã€‚</li>\n</ol><p>æœ‰äº†è¿™ä¸ªæ¥å£ï¼Œæˆ‘ä»¬å°±å¾ˆå®¹æ˜“å»å°è£…ä¸€ä¸ªèŠå¤©æœºå™¨äººäº†ï¼Œæˆ‘æŠŠä»£ç æ”¾åœ¨äº†ä¸‹é¢ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€çœ‹ã€‚</p><pre><code class=\"language-python\">import openai\nimport os\n\nopenai.api_key = os.environ.get(\"OPENAI_API_KEY\")\n\nclass Conversation:\n    def __init__(self, prompt, num_of_round):\n        self.prompt = prompt\n        self.num_of_round = num_of_round\n        self.messages = []\n        self.messages.append({\"role\": \"system\", \"content\": self.prompt})\n\n    def ask(self, question):\n        try:\n            self.messages.append({\"role\": \"user\", \"content\": question})\n            response = openai.ChatCompletion.create(\n                model=\"gpt-3.5-turbo\",\n                messages=self.messages,\n                temperature=0.5,\n                max_tokens=2048,\n                top_p=1,\n            )\n        except Exception as e:\n            print(e)\n            return e\n\n        message = response[\"choices\"][0][\"message\"][\"content\"]\n        self.messages.append({\"role\": \"assistant\", \"content\": message})\n\n        if len(self.messages) &gt; self.num_of_round*2 + 1:\n            del self.messages[1:3] //Remove the first round conversation left.\n        return message\n</code></pre><ol>\n<li>æˆ‘ä»¬å°è£…äº†ä¸€ä¸ªConversationç±»ï¼Œå®ƒçš„æ„é€ å‡½æ•° <strong>init</strong> ä¼šæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œprompt ä½œä¸º systemçš„contentï¼Œä»£è¡¨æˆ‘ä»¬å¯¹è¿™ä¸ªèŠå¤©æœºå™¨äººçš„æŒ‡ä»¤ï¼Œnum_of_round ä»£è¡¨æ¯æ¬¡å‘ChatGPTå‘èµ·è¯·æ±‚çš„æ—¶å€™ï¼Œä¿ç•™è¿‡å»å‡ è½®ä¼šè¯ã€‚</li>\n<li>Conversationç±»æœ¬èº«åªæœ‰ä¸€ä¸ªaskå‡½æ•°ï¼Œè¾“å…¥æ˜¯ä¸€ä¸ªstringç±»å‹çš„questionï¼Œè¿”å›ç»“æœä¹Ÿæ˜¯stringç±»å‹çš„ä¸€æ¡messageã€‚</li>\n<li>æ¯æ¬¡è°ƒç”¨askå‡½æ•°ï¼Œéƒ½ä¼šå‘ChatGPTå‘èµ·ä¸€ä¸ªè¯·æ±‚ã€‚åœ¨è¿™ä¸ªè¯·æ±‚é‡Œï¼Œæˆ‘ä»¬éƒ½ä¼šæŠŠæœ€æ–°çš„é—®é¢˜æ‹¼æ¥åˆ°æ•´ä¸ªå¯¹è¯æ•°ç»„çš„æœ€åï¼Œè€Œåœ¨å¾—åˆ°ChatGPTçš„å›ç­”ä¹‹åä¹Ÿä¼šæŠŠå›ç­”æ‹¼æ¥ä¸Šå»ã€‚å¦‚æœå›ç­”å®Œä¹‹åï¼Œå‘ç°ä¼šè¯çš„è½®æ•°è¶…è¿‡æˆ‘ä»¬è®¾ç½®çš„num_of_roundï¼Œæˆ‘ä»¬å°±å»æ‰æœ€å‰é¢çš„ä¸€è½®ä¼šè¯ã€‚</li>\n</ol><p>ä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¥è¯•ä¸€è¯•è¿™ä¸ªConversationç±»å¥½ä¸å¥½ä½¿ã€‚</p><pre><code class=\"language-python\">prompt = \"\"\"ä½ æ˜¯ä¸€ä¸ªä¸­å›½å¨å¸ˆï¼Œç”¨ä¸­æ–‡å›ç­”åšèœçš„é—®é¢˜ã€‚ä½ çš„å›ç­”éœ€è¦æ»¡è¶³ä»¥ä¸‹è¦æ±‚:\n1. ä½ çš„å›ç­”å¿…é¡»æ˜¯ä¸­æ–‡\n2. å›ç­”é™åˆ¶åœ¨100ä¸ªå­—ä»¥å†…\"\"\"\nconv1 = Conversation(prompt, 2)\nquestion1 = \"ä½ æ˜¯è°ï¼Ÿ\"\nprint(\"User : %s\" % question1)\nprint(\"Assistant : %s\\n\" % conv1.ask(question1))\n\nquestion2 = \"è¯·é—®é±¼é¦™è‚‰ä¸æ€ä¹ˆåšï¼Ÿ\"\nprint(\"User : %s\" % question2)\nprint(\"Assistant : %s\\n\" % conv1.ask(question2))\n\nquestion3 = \"é‚£èšæ²¹ç‰›è‚‰å‘¢ï¼Ÿ\"\nprint(\"User : %s\" % question3)\nprint(\"Assistant : %s\\n\" % conv1.ask(question3))\n</code></pre><ol>\n<li>æˆ‘ä»¬ç»™åˆ°äº†ChatGPTä¸€ä¸ªæŒ‡ä»¤ï¼Œå‘Šè¯‰å®ƒå®ƒæ˜¯ä¸€ä¸ªä¸­å›½å¨å­ï¼Œç”¨ä¸­æ–‡å›ç­”é—®é¢˜ï¼Œè€Œä¸”å›ç­”åœ¨100ä¸ªå­—ä»¥å†…ï¼Œå¹¶ä¸”æˆ‘ä»¬è®¾å®šäº†AIåªè®°ä½è¿‡å»3è½®çš„å¯¹è¯ã€‚</li>\n<li>ç„¶åï¼Œæˆ‘ä»¬æŒ‰ç…§é¡ºåºé—®äº†ä»–ï¼Œâ€œä½ æ˜¯è°â€ï¼Œâ€œé±¼é¦™è‚‰ä¸æ€ä¹ˆåšâ€ä»¥åŠâ€œé‚£èšæ²¹ç‰›è‚‰å‘¢â€è¿™ä¸‰ä¸ªé—®é¢˜ã€‚</li>\n<li>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å›ç­”é‡Œå®ƒè¯´è‡ªå·±å¯ä»¥å›ç­”åšèœçš„é—®é¢˜ï¼Œè€Œä¸”å›ç­”éƒ½åœ¨100ä¸ªå­—ä»¥å†…ã€‚</li>\n<li>å¹¶ä¸”ï¼Œæˆ‘ä»¬é—®ä»–â€œé‚£èšæ²¹ç‰›è‚‰å‘¢â€çš„æ—¶å€™ï¼Œå®ƒä¹Ÿçš„ç¡®è®°ä½äº†ä¸Šä¸‹æ–‡ï¼ŒçŸ¥é“æˆ‘ä»¬é—®çš„æ˜¯èœçš„åšæ³•ï¼Œè€Œä¸æ˜¯ä»·æ ¼æˆ–è€…å…¶ä»–ä¿¡æ¯ã€‚</li>\n</ol><pre><code class=\"language-python\">User : ä½ æ˜¯è°ï¼Ÿ\nAssistant : æˆ‘æ˜¯ä¸€ä¸ªAIè¯­è¨€æ¨¡å‹ï¼Œå¯ä»¥å›ç­”ä½ çš„åšèœé—®é¢˜ã€‚\nUser : è¯·é—®é±¼é¦™è‚‰ä¸æ€ä¹ˆåšï¼Ÿ\nAssistant : é±¼é¦™è‚‰ä¸çš„åšæ³•ï¼š\n1. ç˜¦çŒªè‚‰åˆ‡ä¸ï¼Œç”¨ç›ã€æ·€ç²‰ã€æ–™é…’è…Œåˆ¶ï¼›\n2. é¦™è‘±ã€å§œã€è’œåˆ‡æœ«å¤‡ç”¨ï¼›\n3. é’çº¢æ¤’åˆ‡ä¸å¤‡ç”¨ï¼›\n4. çƒ­é”…å‡‰æ²¹ï¼Œæ”¾å…¥è‚‰ä¸ç…¸ç‚’è‡³å˜è‰²ï¼›\n5. æ”¾å…¥è‘±å§œè’œæœ«å’Œé’çº¢æ¤’ä¸ç…¸ç‚’ï¼›\n6. åŠ å…¥é€‚é‡ç›ã€ç³–ã€é†‹ã€é…±æ²¹ã€æ–™é…’ã€æ°´æ·€ç²‰ç¿»ç‚’å‡åŒ€ï¼›\n7. æ·‹ä¸Šå°‘è®¸é¦™æ²¹å³å¯ã€‚\nUser : é‚£èšæ²¹ç‰›è‚‰å‘¢ï¼Ÿ\nAssistant : èšæ²¹ç‰›è‚‰çš„åšæ³•ï¼š\n1. ç‰›è‚‰åˆ‡è–„ç‰‡ï¼ŒåŠ å…¥ç›ã€ç”ŸæŠ½ã€æ·€ç²‰è…Œåˆ¶20åˆ†é’Ÿï¼›\n2. é’çº¢æ¤’åˆ‡ä¸ï¼Œå§œè’œåˆ‡æœ«å¤‡ç”¨ï¼›\n3. çƒ­é”…å†·æ²¹ï¼Œä¸‹å§œè’œæœ«ç…¸ç‚’å‡ºé¦™å‘³ï¼›\n4. åŠ å…¥ç‰›è‚‰ç‰‡å¿«é€Ÿç¿»ç‚’è‡³å˜è‰²ï¼›\n5. åŠ å…¥é’çº¢æ¤’ä¸ç¿»ç‚’å‡åŒ€ï¼›\n6. å€’å…¥èšæ²¹ã€ç”ŸæŠ½ã€ç³–ã€æ°´æ·€ç²‰è°ƒå‘³ï¼›\n7. ç¿»ç‚’å‡åŒ€ï¼Œæ”¶æ±åæ·‹ä¸Šé¦™æ²¹å³å¯ã€‚\n</code></pre><p>åœ¨é—®å®Œäº†3ä¸ªé—®é¢˜ä¹‹åï¼Œæˆ‘ä»¬åˆé—®äº†å®ƒç¬¬å››ä¸ªé—®é¢˜ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬é—®å®ƒçš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ä»€ä¹ˆã€‚è¿™ä¸ªæ—¶å€™ï¼Œå®ƒå› ä¸ºè®°å½•äº†è¿‡å»ç¬¬1-3è½®çš„å¯¹è¯ï¼Œæ‰€ä»¥è¿˜èƒ½æ­£ç¡®åœ°å›ç­”å‡ºæ¥ï¼Œæˆ‘ä»¬é—®çš„æ˜¯â€œä½ æ˜¯è°â€ã€‚</p><pre><code class=\"language-python\">question4 = \"æˆ‘é—®ä½ çš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ\"\nprint(\"User : %s\" % question4)\nprint(\"Assistant : %s\\n\" % conv1.ask(question4))\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-python\">User : æˆ‘é—®ä½ çš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ\nAssistant : ä½ é—®æˆ‘ï¼šâ€œä½ æ˜¯è°ï¼Ÿâ€\n</code></pre><p>è€Œè¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬é‡æ–°å†é—®ä¸€éâ€œæˆ‘é—®ä½ çš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ä»€ä¹ˆâ€ï¼Œä½ ä¼šå‘ç°å›ç­”å˜äº†ã€‚å› ä¸ºå•Šï¼Œä¸Šä¸€è½®å·²ç»æ˜¯ç¬¬å››è½®äº†ï¼Œè€Œæˆ‘ä»¬è®¾ç½®è®°ä½çš„num_of_roundæ˜¯3ã€‚åœ¨ä¸Šä¸€è½®çš„é—®é¢˜å›ç­”å®Œäº†ä¹‹åï¼Œç¬¬ä¸€è½®çš„å…³äºâ€œä½ æ˜¯è°â€çš„é—®ç­”ï¼Œè¢«æˆ‘ä»¬ä»ChatGPTçš„å¯¹è¯å†å²é‡Œå»æ‰äº†ã€‚æ‰€ä»¥è¿™ä¸ªæ—¶å€™ï¼Œå®ƒä¼šå‘Šè¯‰æˆ‘ä»¬ï¼Œç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯â€œé±¼é¦™è‚‰ä¸æ€ä¹ˆåšâ€ã€‚</p><pre><code class=\"language-python\">question5 = \"æˆ‘é—®ä½ çš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ\"\nprint(\"User : %s\" % question5)\nprint(\"Assistant : %s\\n\" % conv1.ask(question5))\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-python\">User : æˆ‘é—®ä½ çš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ\nAssistant : ä½ é—®æˆ‘ï¼šâ€œè¯·é—®é±¼é¦™è‚‰ä¸æ€ä¹ˆåšï¼Ÿâ€\n</code></pre><h2>è®¡ç®—èŠå¤©æœºå™¨äººçš„æˆæœ¬</h2><p>æ— è®ºæ˜¯åœ¨<a href=\"https://time.geekbang.org/column/article/642197\">ç¬¬03è®²</a>é‡Œï¼Œè¿˜æ˜¯è¿™ä¸€è®²é‡Œï¼Œæˆ‘ä»¬æ¯æ¬¡éƒ½è¦å‘é€ä¸€å¤§æ®µä¹‹å‰çš„èŠå¤©è®°å½•ç»™åˆ°OpenAIã€‚è¿™æ˜¯ç”±OpenAIçš„GPT-3ç³»åˆ—çš„å¤§è¯­è¨€æ¨¡å‹çš„åŸç†æ‰€å†³å®šçš„ã€‚GPT-3ç³»åˆ—çš„æ¨¡å‹èƒ½å¤Ÿå®ç°çš„åŠŸèƒ½éå¸¸ç®€å•ï¼Œå®ƒå°±æ˜¯æ ¹æ®ä½ ç»™ä»–çš„ä¸€å¤§æ®µæ–‡å­—å»ç»­å†™åé¢çš„å†…å®¹ã€‚è€Œä¸ºäº†èƒ½å¤Ÿæ–¹ä¾¿åœ°ä¸ºæ‰€æœ‰äººæä¾›æœåŠ¡ï¼ŒOpenAIä¹Ÿæ²¡æœ‰åœ¨æœåŠ¡å™¨ç«¯ç»´æŠ¤æ•´ä¸ªå¯¹è¯è¿‡ç¨‹è‡ªå·±å»æ‹¼æ¥ï¼Œæ‰€ä»¥å°±ä¸å¾—ä¸ç”±ä½ æ¥æ‹¼æ¥äº†ã€‚</p><p>å³ä½¿ChatGPTçš„æ¥å£æ˜¯æŠŠå¯¹è¯åˆ†æˆäº†ä¸€ä¸ªæ•°ç»„ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œ<strong>æœ€ç»ˆå‘é€ç»™æ¨¡å‹çš„è¿˜æ˜¯æ‹¼æ¥åˆ°ä¸€èµ·çš„å­—ç¬¦ä¸²</strong>ã€‚OpenAIåœ¨å®ƒçš„Pythonåº“é‡Œé¢æä¾›äº†ä¸€ä¸ªå«åš <a href=\"https://github.com/openai/openai-python/blob/main/chatml.md\">ChatML</a> çš„æ ¼å¼ï¼Œå…¶å®å°±æ˜¯ChatGPTçš„APIçš„åº•å±‚å®ç°ã€‚OpenAIå®é™…åšçš„ï¼Œå°±æ˜¯æ ¹æ®ä¸€ä¸ªå®šä¹‰å¥½ç‰¹å®šåˆ†éš”ç¬¦çš„æ ¼å¼ï¼Œå°†ä½ æä¾›çš„å¤šè½®å¯¹è¯çš„å†…å®¹æ‹¼æ¥åœ¨ä¸€èµ·ï¼Œæäº¤ç»™ gpt-3.5-turbo è¿™ä¸ªæ¨¡å‹ã€‚</p><pre><code class=\"language-python\">&lt;|im_start|&gt;system\nYou are ChatGPT, a large language model trained by OpenAI. Answer as concisely as possible.\nKnowledge cutoff: 2021-09-01\nCurrent date: 2023-03-01&lt;|im_end|&gt;\n&lt;|im_start|&gt;user\nHow are you&lt;|im_end|&gt;\n&lt;|im_start|&gt;assistant\nI am doing well!&lt;|im_end|&gt;\n&lt;|im_start|&gt;user\nHow are you now?&lt;|im_end|&gt;\n</code></pre><p><span class=\"reference\">æ³¨ï¼šchatmlçš„æ–‡æ¡£é‡Œï¼Œä½ å¯ä»¥çœ‹åˆ°ä½ çš„å¯¹è¯ï¼Œå°±æ˜¯é€šè¿‡ &lt;|im_start|&gt;system|user|assistantã€&lt;|im_end|&gt; è¿™äº›åˆ†éš”ç¬¦åˆ†å‰²æ‹¼è£…çš„å­—ç¬¦ä¸²ã€‚åº•å±‚ä»ç„¶æ˜¯ä¸€ä¸ªå†…å®¹ç»­å†™çš„å¤§è¯­è¨€æ¨¡å‹ã€‚</span></p><p>ChatGPTçš„å¯¹è¯æ¨¡å‹ç”¨èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ã€‚å°±æ˜¯åœ¨è¿™ä¸ªéœ€è¦ä¼ é€å¤§é‡ä¸Šä¸‹æ–‡çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªè´¹ç”¨ä¼šæ¯”ä½ æƒ³è±¡çš„é«˜ã€‚OpenAIæ˜¯é€šè¿‡æ¨¡å‹å¤„ç†çš„Tokenæ•°é‡æ¥æ”¶è´¹çš„ï¼Œä½†æ˜¯è¦æ³¨æ„ï¼Œè¿™ä¸ªæ”¶è´¹æ˜¯â€œåŒå‘æ”¶è´¹â€ã€‚å®ƒæ˜¯æŒ‰ç…§ä½ å‘é€ç»™å®ƒçš„ä¸Šä¸‹æ–‡ï¼ŒåŠ ä¸Šå®ƒè¿”å›ç»™ä½ çš„å†…å®¹çš„æ€»Tokenæ•°æ¥è®¡ç®—èŠ±è´¹çš„Tokenæ•°é‡çš„ã€‚</p><p>è¿™ä¸ªä»æ¨¡å‹çš„åŸç†ä¸Šæ˜¯åˆç†çš„ï¼Œå› ä¸ºæ¯ä¸€ä¸ªTokenï¼Œæ— è®ºæ˜¯ä½ å‘ç»™å®ƒçš„ï¼Œè¿˜æ˜¯å®ƒè¿”å›ç»™ä½ çš„ï¼Œéƒ½éœ€è¦é€šè¿‡GPUæˆ–è€…CPUè¿ç®—ã€‚æ‰€ä»¥ä½ å‘çš„ä¸Šä¸‹æ–‡è¶Šé•¿ï¼Œå®ƒæ¶ˆè€—çš„èµ„æºä¹Ÿè¶Šå¤šã€‚ä½†æ˜¯åœ¨ä½¿ç”¨ä¸­ï¼Œä½ å¯èƒ½è§‰å¾—æˆ‘æ¥äº†10è½®å¯¹è¯ï¼Œä¸€å…±1000ä¸ªTokenï¼Œå°±åªä¼šæ”¶1000ä¸ªTokençš„è´¹ç”¨ã€‚è€Œå®é™…ä¸Šï¼Œç¬¬ä¸€è½®å¯¹è¯æ˜¯åªæ¶ˆè€—äº†100ä¸ªTokenï¼Œä½†æ˜¯ç¬¬äºŒè½®å› ä¸ºè¦æŠŠå‰é¢çš„ä¸Šä¸‹æ–‡éƒ½å‘é€å‡ºå»ï¼Œæ‰€ä»¥éœ€è¦200ä¸ªï¼Œè¿™æ ·10è½®ä¸‹æ¥ï¼Œæ˜¯éœ€è¦èŠ±è´¹5500ä¸ªTokenï¼Œæ¯”å‰é¢è¯´çš„1000ä¸ªå¯å¤šäº†ä¸å°‘ã€‚</p><p>æ‰€ä»¥ï¼Œå¦‚æœåšäº†åº”ç”¨è¦è®¡ç®—èŠ±è´¹çš„æˆæœ¬ï¼Œä½ å°±éœ€è¦å­¦ä¼šè®¡ç®—Tokenæ•°ã€‚ä¸‹é¢ï¼Œæˆ‘ç»™äº†ä½ ä¸€æ®µç¤ºä¾‹ä»£ç ï¼Œçœ‹çœ‹åœ¨ChatGPTçš„å¯¹è¯æ¨¡å‹ä¸‹ï¼Œæ€ä¹ˆè®¡ç®—Tokenæ•°é‡ã€‚</p><h3>é€šè¿‡APIè®¡ç®—Tokenæ•°é‡</h3><p>ç¬¬ä¸€ç§è®¡ç®—Tokenæ•°é‡çš„æ–¹å¼ï¼Œæ˜¯ä»APIè¿”å›çš„ç»“æœé‡Œé¢è·å–ã€‚æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹åˆšæ‰çš„Conversationç±»ï¼Œé‡æ–°åˆ›å»ºä¸€ä¸ªConversation2ç±»ã€‚å’Œä¹‹å‰åªæœ‰ä¸€ä¸ªä¸åŒï¼Œaskå‡½æ•°é™¤äº†è¿”å›å›å¤çš„æ¶ˆæ¯ä¹‹å¤–ï¼Œè¿˜ä¼šè¿”å›è¿™æ¬¡è¯·æ±‚æ¶ˆè€—çš„Tokenæ•°ã€‚</p><pre><code class=\"language-python\">class Conversation2:\n    def __init__(self, prompt, num_of_round):\n        self.prompt = prompt\n        self.num_of_round = num_of_round\n        self.messages = []\n        self.messages.append({\"role\": \"system\", \"content\": self.prompt})\n\n    def ask(self, question):\n        try:\n            self.messages.append( {\"role\": \"user\", \"content\": question})\n            response = openai.ChatCompletion.create(\n                model=\"gpt-3.5-turbo\",\n                messages=self.messages,\n                temperature=0.5,\n                max_tokens=2048,\n                top_p=1,\n            )\n        except Exception as e:\n            print(e)\n            return e\n\n        message = response[\"choices\"][0][\"message\"][\"content\"]\n        num_of_tokens = response['usage']['total_tokens']\n        self.messages.append({\"role\": \"assistant\", \"content\": message})\n        \n        if len(self.messages) &gt; self.num_of_round*2 + 1:\n            del self.messages[1:3]\n        return message, num_of_tokens\n</code></pre><p>ç„¶åæˆ‘ä»¬è¿˜æ˜¯é—®ä¸€éä¹‹å‰çš„é—®é¢˜ï¼Œçœ‹çœ‹æ¯ä¸€è½®é—®ç­”æ¶ˆè€—çš„Tokenæ•°é‡ã€‚</p><pre><code class=\"language-python\">conv2 = Conversation2(prompt, 3)\nquestions = [question1, question2, question3, question4, question5]\nfor question in questions:\n    answer, num_of_tokens = conv2.ask(question)\n    print(\"è¯¢é—® {%s} æ¶ˆè€—çš„tokenæ•°é‡æ˜¯ : %d\" % (question, num_of_tokens))è¾“å‡ºç»“æœï¼š\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-python\">è¯¢é—® {ä½ æ˜¯è°ï¼Ÿ} æ¶ˆè€—çš„tokenæ•°é‡æ˜¯ : 108\nè¯¢é—® {è¯·é—®é±¼é¦™è‚‰ä¸æ€ä¹ˆåšï¼Ÿ} æ¶ˆè€—çš„tokenæ•°é‡æ˜¯ : 410\nè¯¢é—® {é‚£èšæ²¹ç‰›è‚‰å‘¢ï¼Ÿ} æ¶ˆè€—çš„tokenæ•°é‡æ˜¯ : 733\nè¯¢é—® {æˆ‘é—®ä½ çš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ} æ¶ˆè€—çš„tokenæ•°é‡æ˜¯ : 767\nè¯¢é—® {æˆ‘é—®ä½ çš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ} æ¶ˆè€—çš„tokenæ•°é‡æ˜¯ : 774\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œå‰å‡ è½®çš„Tokenæ¶ˆè€—æ•°é‡åœ¨é€æ¸å¢å¤šï¼Œä½†æ˜¯æœ€å3è½®æ˜¯ä¸€æ ·çš„ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬ä»£ç é‡Œåªä½¿ç”¨è¿‡å»3è½®çš„å¯¹è¯å†…å®¹å‘ChatGPTå‘èµ·è¯·æ±‚ã€‚</p><h3>é€šè¿‡Tiktokenåº“è®¡ç®—Tokenæ•°é‡</h3><p>ç¬¬äºŒç§æ–¹å¼ï¼Œæˆ‘ä»¬åœ¨ä¸Šä¸€è®²ç”¨è¿‡ï¼Œå°±æ˜¯ä½¿ç”¨Tiktokenè¿™ä¸ªPythonåº“ï¼Œå°†æ–‡æœ¬åˆ†è¯ï¼Œç„¶åæ•°ä¸€æ•°Tokençš„æ•°é‡ã€‚</p><p>éœ€è¦æ³¨æ„ï¼Œä½¿ç”¨ä¸åŒçš„GPTæ¨¡å‹ï¼Œå¯¹åº”ç€ä¸åŒçš„Tiktokençš„ç¼–ç å™¨æ¨¡å‹ã€‚å¯¹åº”çš„æ–‡æ¡£ï¼Œå¯ä»¥æŸ¥è¯¢è¿™ä¸ªé“¾æ¥ï¼š<a href=\"https://github.com/openai/openai-cookbook/blob/main/examples/How_to_count_tokens_with_tiktoken.ipynb\">https://github.com/openai/openai-cookbook/blob/main/examples/How_to_count_tokens_with_tiktoken.ipynb</a></p><p>æˆ‘ä»¬ä½¿ç”¨çš„ChatGPTï¼Œé‡‡ç”¨çš„æ˜¯cl100k_baseçš„ç¼–ç ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¯•ç€ç”¨å®ƒè®¡ç®—ä¸€ä¸‹ç¬¬ä¸€è½®å¯¹è¯ä½¿ç”¨çš„Tokenæ•°é‡ã€‚</p><pre><code class=\"language-python\">import tiktoken\nencoding = tiktoken.get_encoding(\"cl100k_base\")\n\nconv2 = Conversation2(prompt, 3)\nquestion1 = \"ä½ æ˜¯è°ï¼Ÿ\"\nanswer1, num_of_tokens = conv2.ask(question1)\nprint(\"æ€»å…±æ¶ˆè€—çš„tokenæ•°é‡æ˜¯ : %d\" % (num_of_tokens))\n\nprompt_count = len(encoding.encode(prompt))\nquestion1_count = len(encoding.encode(question1))\nanswer1_count = len(encoding.encode(answer1))\ntotal_count = prompt_count + question1_count + answer1_count\nprint(\"Promptæ¶ˆè€— %d Token, é—®é¢˜æ¶ˆè€— %d Tokenï¼Œå›ç­”æ¶ˆè€— %d Tokenï¼Œæ€»å…±æ¶ˆè€— %d Token\" % (prompt_count, question1_count, answer1_count, total_count))\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-python\">æ€»å…±æ¶ˆè€—çš„tokenæ•°é‡æ˜¯ : 104\nPromptæ¶ˆè€— 65 Token, é—®é¢˜æ¶ˆè€— 5 Tokenï¼Œå›ç­”æ¶ˆè€— 20 Tokenï¼Œæ€»å…±æ¶ˆè€— 90 Token\n</code></pre><p>æˆ‘ä»¬é€šè¿‡APIè·å¾—äº†æ¶ˆè€—çš„Tokenæ•°ï¼Œç„¶ååˆé€šè¿‡Tiktokenåˆ†åˆ«è®¡ç®—äº†Systemçš„æŒ‡ç¤ºå†…å®¹ã€ç”¨æˆ·çš„é—®é¢˜å’ŒAIç”Ÿæˆçš„å›ç­”ï¼Œå‘ç°äº†ä¸¤è€…è¿˜æœ‰å°å°çš„å·®å¼‚ã€‚è¿™ä¸ªæ˜¯å› ä¸ºï¼Œæˆ‘ä»¬æ²¡æœ‰è®¡ç®—OpenAIå»æ‹¼æ¥å®ƒä»¬å†…éƒ¨éœ€è¦çš„æ ¼å¼çš„Tokenæ•°é‡ã€‚å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éƒ½éœ€è¦é€šè¿‡Tiktokené¢„å…ˆè®¡ç®—ä¸€ä¸‹Tokenæ•°é‡ï¼Œé¿å…æäº¤çš„å†…å®¹å¤ªå¤šï¼Œå¯¼è‡´APIè¿”å›æŠ¥é”™ã€‚</p><h2>Gradioå¸®ä½ å¿«é€Ÿæ­å»ºä¸€ä¸ªèŠå¤©ç•Œé¢</h2><p>æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªå°è£…å¥½çš„èŠå¤©æœºå™¨äººäº†ã€‚ä½†æ˜¯ï¼Œç°åœ¨è¿™ä¸ªæœºå™¨äººï¼Œæˆ‘ä»¬åªèƒ½è‡ªå·±åœ¨Python Notebooké‡Œé¢ç©ï¼Œæ¯æ¬¡é—®ç‚¹é—®é¢˜è¿˜è¦è°ƒç”¨ä»£ç ã€‚é‚£ä¹ˆï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±ç»™æˆ‘ä»¬å°è£…å¥½çš„Convesationæ¥å£å¼€å‘ä¸€ä¸ªç•Œé¢ã€‚</p><p>æˆ‘ä»¬ç›´æ¥é€‰ç”¨Gradioè¿™ä¸ªPythonåº“æ¥å¼€å‘è¿™ä¸ªèŠå¤©æœºå™¨äººçš„ç•Œé¢ï¼Œå› ä¸ºå®ƒæœ‰è¿™æ ·å‡ ä¸ªå¥½å¤„ã€‚</p><ol>\n<li>æˆ‘ä»¬ç°æœ‰çš„ä»£ç éƒ½æ˜¯ç”¨Pythonå®ç°çš„ï¼Œä½ ä¸éœ€è¦å†å»å­¦ä¹ JavaScriptã€TypeScriptä»¥åŠç›¸å…³çš„å‰ç«¯æ¡†æ¶äº†ã€‚</li>\n<li>Gradioæ¸²æŸ“å‡ºæ¥çš„ç•Œé¢å¯ä»¥ç›´æ¥åœ¨Jupyter Notebooké‡Œé¢æ˜¾ç¤ºå‡ºæ¥ï¼Œå¯¹äºä¸äº†è§£æŠ€æœ¯çš„åŒå­¦ï¼Œä¹Ÿä¸å†éœ€è¦è§£å†³å…¶ä»–ç¯å¢ƒæ­å»ºçš„é—®é¢˜ã€‚</li>\n<li>Gradioè¿™ä¸ªå…¬å¸ï¼Œå·²ç»è¢«ç›®å‰æœ€å¤§çš„å¼€æºæœºå™¨å­¦ä¹ æ¨¡å‹ç¤¾åŒºHuggingFaceæ”¶è´­äº†ã€‚ä½ å¯ä»¥å…è´¹æŠŠGradioçš„åº”ç”¨éƒ¨ç½²åˆ°HuggingFaceä¸Šã€‚æˆ‘ç­‰ä¸€ä¸‹å°±æ•™ä½ æ€ä¹ˆéƒ¨ç½²ï¼Œä½ å¯ä»¥æŠŠä½ è‡ªå·±åšå‡ºæ¥çš„èŠå¤©æœºå™¨äººéƒ¨ç½²ä¸Šå»ç»™ä½ çš„æœ‹å‹ä»¬ç”¨ã€‚</li>\n<li>åœ¨åé¢çš„è¯¾ç¨‹é‡Œï¼Œæœ‰äº›æ—¶å€™æˆ‘ä»¬ä¹Ÿä¼šä½¿ç”¨ä¸€äº›å¼€æºçš„æ¨¡å‹ï¼Œè¿™äº›æ¨¡å‹å¾€å¾€ä¹Ÿæ‰˜ç®¡åœ¨HuggingFaceä¸Šã€‚æ‰€ä»¥ä½¿ç”¨HuggingFace+Gradioçš„éƒ¨ç½²æ–¹å¼ï¼Œç‰¹åˆ«æ–¹ä¾¿æˆ‘ä»¬æ¼”ç¤ºç»™å…¶ä»–äººçœ‹ã€‚</li>\n</ol><p><span class=\"reference\">æ³¨ï¼šGradioå®˜æ–¹ä¹Ÿæœ‰ç”¨å…¶ä»–å¼€æºé¢„è®­ç»ƒæ¨¡å‹åˆ›å»ºChatbotçš„æ•™ç¨‹<a href=\"https://gradio.app/creating-a-chatbot/\">https://gradio.app/creating-a-chatbot/</a></span></p><p>åœ¨å®é™…å¼€å‘ä¹‹å‰ï¼Œè¿˜æ˜¯æŒ‰ç…§æƒ¯ä¾‹æˆ‘ä»¬å…ˆå®‰è£…ä¸€ä¸‹Pythonçš„Gradioçš„åŒ…ã€‚</p><pre><code class=\"language-python\">conda install -c conda-forge gradio\n</code></pre><p>Gradioåº”ç”¨çš„ä»£ç æˆ‘ä¹Ÿåˆ—åœ¨äº†ä¸‹é¢ï¼Œå¯¹åº”çš„é€»è¾‘ä¹Ÿéå¸¸ç®€å•ã€‚</p><ol>\n<li>é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰å¥½äº†systemè¿™ä¸ªç³»ç»Ÿè§’è‰²çš„æç¤ºè¯­ï¼Œåˆ›å»ºäº†ä¸€ä¸ªConversationå¯¹è±¡ã€‚</li>\n<li>ç„¶åï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªansweræ–¹æ³•ï¼Œç®€å•å°è£…äº†ä¸€ä¸‹Conversationçš„askæ–¹æ³•ã€‚ä¸»è¦æ˜¯é€šè¿‡historyç»´æŠ¤äº†æ•´ä¸ªä¼šè¯çš„å†å²è®°å½•ã€‚å¹¶ä¸”é€šè¿‡responsesï¼Œå°†ç”¨æˆ·å’ŒAIçš„å¯¹è¯åˆ†ç»„ã€‚ç„¶åå°†å®ƒä»¬ä¸¤ä¸ªä½œä¸ºå‡½æ•°çš„è¿”å›å€¼ã€‚è¿™ä¸ªå‡½æ•°çš„ç­¾åæ˜¯ä¸ºäº†ç¬¦åˆGradioé‡ŒChatbotç»„ä»¶çš„å‡½æ•°ç­¾åçš„éœ€æ±‚ã€‚</li>\n<li>æœ€åï¼Œæˆ‘ä»¬é€šè¿‡ä¸€æ®µwithä»£ç ï¼Œåˆ›å»ºäº†å¯¹åº”çš„èŠå¤©ç•Œé¢ã€‚Gradioæä¾›äº†ä¸€ä¸ªç°æˆçš„Chatbotç»„ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨å®ƒï¼Œç„¶åæä¾›ä¸€ä¸ªæ–‡æœ¬è¾“å…¥æ¡†å°±å¥½äº†ã€‚</li>\n</ol><pre><code class=\"language-python\">import gradio as gr\nprompt = \"\"\"ä½ æ˜¯ä¸€ä¸ªä¸­å›½å¨å¸ˆï¼Œç”¨ä¸­æ–‡å›ç­”åšèœçš„é—®é¢˜ã€‚ä½ çš„å›ç­”éœ€è¦æ»¡è¶³ä»¥ä¸‹è¦æ±‚:\n1. ä½ çš„å›ç­”å¿…é¡»æ˜¯ä¸­æ–‡\n2. å›ç­”é™åˆ¶åœ¨100ä¸ªå­—ä»¥å†…\"\"\"\n\nconv = Conversation(prompt, 10)\n\ndef answer(question, history=[]):\n    history.append(question)\n    response = conv.ask(question)\n    history.append(response)\n    responses = [(u,b) for u,b in zip(history[::2], history[1::2])]\n    return responses, history\n\nwith gr.Blocks(css=\"#chatbot{height:300px} .overflow-y-auto{height:500px}\") as demo:\n    chatbot = gr.Chatbot(elem_id=\"chatbot\")\n    state = gr.State([])\n\n    with gr.Row():\n        txt = gr.Textbox(show_label=False, placeholder=\"Enter text and press enter\").style(container=False)\n\n    txt.submit(answer, [txt, state], [chatbot, state])\n\ndemo.launch()\n</code></pre><p>ä½ ç›´æ¥åœ¨Colabæˆ–è€…ä½ æœ¬åœ°çš„Jupyter Notebooké‡Œé¢ï¼Œæ‰§è¡Œä¸€ä¸‹è¿™ä¸€è®²åˆ°ç›®å‰çš„æ‰€æœ‰ä»£ç ï¼Œå°±å¾—åˆ°äº†ä¸€ä¸ªå¯ä»¥å’ŒChatGPTèŠå¤©çš„æœºå™¨äººäº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a5/02/a57a0f1197de3b8b8e625d9cfe506502.png?wh=754x485\" alt=\"å›¾ç‰‡\"></p><h2>æŠŠæœºå™¨äººéƒ¨ç½²åˆ°HuggingFaceä¸Šå»</h2><p>æœ‰äº†ä¸€ä¸ªå¯ä»¥èŠå¤©çš„æœºå™¨äººï¼Œç›¸ä¿¡ä½ å·²ç»è¿«ä¸åŠå¾…åœ°æƒ³è®©ä½ çš„æœ‹å‹ä¹Ÿèƒ½ç”¨ä¸Šå®ƒäº†ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±æŠŠå®ƒéƒ¨ç½²åˆ° <a href=\"https://huggingface.co/\">HuggingFace</a> ä¸Šå»ã€‚</p><ol>\n<li>é¦–å…ˆä½ éœ€è¦æ³¨å†Œä¸€ä¸ªHuggingFaceçš„è´¦å·ï¼Œç‚¹å‡»å·¦ä¸Šè§’çš„å¤´åƒï¼Œç„¶åç‚¹å‡» â€œ+New Spaceâ€ åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®ç©ºé—´ã€‚</li>\n</ol><p><img src=\"https://static001.geekbang.org/resource/image/50/b1/5073d7572f5d62ab8cd3bd708bba33b1.png?wh=1268x426\" alt=\"\"></p><ol start=\"2\">\n<li>åœ¨æ¥ä¸‹æ¥çš„ç•Œé¢é‡Œï¼Œç»™ä½ çš„Spaceå–ä¸€ä¸ªåå­—ï¼Œç„¶ååœ¨Select the Space SDKé‡Œé¢ï¼Œé€‰æ‹©ç¬¬äºŒä¸ªGradioã€‚ç¡¬ä»¶æˆ‘ä»¬åœ¨è¿™é‡Œå°±é€‰æ‹©å…è´¹çš„ï¼Œé¡¹ç›®æˆ‘ä»¬åœ¨è¿™é‡Œé€‰æ‹©publicï¼Œè®©å…¶ä»–äººä¹Ÿèƒ½å¤Ÿçœ‹åˆ°ã€‚ä¸è¿‡è¦æ³¨æ„ï¼Œpublicçš„spaceï¼Œæ˜¯è¿ä½ åé¢ä¸Šä¼ çš„ä»£ç ä¹Ÿèƒ½å¤Ÿçœ‹åˆ°çš„ã€‚</li>\n</ol><p><img src=\"https://static001.geekbang.org/resource/image/a8/c5/a8a502a4a6b6d6a6fc4aebbee7ayy7c5.png?wh=692x1172\" alt=\"\"></p><ol start=\"3\">\n<li>åˆ›å»ºæˆåŠŸåï¼Œä¼šè·³è½¬åˆ°HuggingFaceçš„Appç•Œé¢ã€‚é‡Œé¢ç»™äº†ä½ å¦‚ä½•Cloneå½“å‰çš„spaceï¼Œç„¶åæäº¤ä»£ç éƒ¨ç½²Appçš„æ–¹å¼ã€‚æˆ‘ä»¬åªéœ€è¦é€šè¿‡GitæŠŠå½“å‰spaceä¸‹è½½ä¸‹æ¥ï¼Œç„¶åæäº¤ä¸¤ä¸ªæ–‡ä»¶å°±å¯ä»¥äº†ï¼Œåˆ†åˆ«æ˜¯ï¼š</li>\n</ol><ul>\n<li>app.py åŒ…å«äº†æˆ‘ä»¬çš„Gradioåº”ç”¨ï¼›</li>\n<li>requirements.txt åŒ…å«äº†è¿™ä¸ªåº”ç”¨ä¾èµ–çš„PythonåŒ…ï¼Œè¿™é‡Œæˆ‘ä»¬åªä¾èµ–OpenAIè¿™ä¸€ä¸ªåŒ…ã€‚</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/e2/52/e24d1f90f9a67a61182dbb4e20899852.png?wh=1014x358\" alt=\"\" title=\"ä½ å¯ä»¥å¾—åˆ°è¿™ä¸ªHuggingFace spaceçš„Gitåœ°å€\"><br>\n<img src=\"https://static001.geekbang.org/resource/image/30/c6/30c7739844201fee8da9e86752ea4ec6.png?wh=1013x165\" alt=\"\"></p><p>ä»£ç æäº¤ä¹‹åï¼ŒHuggingFaceçš„é¡µé¢ä¼šè‡ªåŠ¨åˆ·æ–°ï¼Œä½ å¯ä»¥ç›´æ¥çœ‹åˆ°å¯¹åº”çš„æ—¥å¿—å’ŒChatbotçš„åº”ç”¨ã€‚ä¸è¿‡è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬è¿˜å·®ä¸€æ­¥å·¥ä½œã€‚</p><ol start=\"4\">\n<li>å› ä¸ºæˆ‘ä»¬çš„ä»£ç é‡Œæ˜¯é€šè¿‡ç¯å¢ƒå˜é‡è·å–OpenAIçš„API Keyçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜è¦åœ¨è¿™ä¸ªHuggingFaceçš„Spaceé‡Œè®¾ç½®ä¸€ä¸‹è¿™ä¸ªç¯å¢ƒå˜é‡ã€‚</li>\n</ol><ul>\n<li>ä½ å¯ä»¥ç‚¹å‡»ç•Œé¢é‡Œé¢çš„Settingsï¼Œç„¶åå¾€ä¸‹æ‰¾åˆ°Repository secretã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/75/d9/7576e32270d02302c4397254d9deb5d9.png?wh=1014x177\" alt=\"\"><br>\n<img src=\"https://static001.geekbang.org/resource/image/41/75/4165279b0c1580da31e5fd152f23d875.png?wh=1009x414\" alt=\"å›¾ç‰‡\"></li>\n</ul><p>åœ¨Nameè¿™é‡Œè¾“å…¥ <span class=\"orange\">OPENAI_API_KEY</span>ï¼Œç„¶ååœ¨Secret valueé‡Œé¢å¡«å…¥ä½ çš„OpenAIçš„å¯†é’¥ã€‚</p><ul>\n<li>è®¾ç½®å®Œæˆä¹‹åï¼Œä½ è¿˜éœ€è¦ç‚¹å‡»ä¸€ä¸‹Restart this spaceç¡®ä¿è¿™ä¸ªåº”ç”¨é‡æ–°åŠ è½½ä¸€éï¼Œä»¥è·å–åˆ°æ–°è®¾ç½®çš„ç¯å¢ƒå˜é‡ã€‚</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/c2/fc/c29226b9bf2490a7cb7dc0b84eccdbfc.png?wh=999x997\" alt=\"å›¾ç‰‡\"></p><p>å¥½å•¦ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œä½ å¯ä»¥é‡æ–°ç‚¹å‡»Appè¿™ä¸ªTabé¡µé¢ï¼Œè¯•è¯•ä½ çš„èŠå¤©æœºå™¨äººæ˜¯å¦å¯ä»¥æ­£å¸¸å·¥ä½œäº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/46/0a/46d4b47402e78d54718a5738f005700a.png?wh=1015x489\" alt=\"\"></p><p>æˆ‘æŠŠä»Šå¤©ç»™ä½ çœ‹åˆ°çš„Chatbotåº”ç”¨æ”¾åˆ°äº†HuggingFaceä¸Šï¼Œä½ å¯ä»¥ç›´æ¥å¤åˆ¶ä¸‹æ¥è¯•ä¸€è¯•ã€‚</p><p>åœ°å€ï¼š<a href=\"https://huggingface.co/spaces/xuwenhao83/simple_chatbot\">https://huggingface.co/spaces/xuwenhao83/simple_chatbot</a></p><h2>å°ç»“</h2><p>å¸Œæœ›é€šè¿‡è¿™ä¸€è®²ï¼Œä½ å·²ç»å­¦ä¼šäº†æ€ä¹ˆä½¿ç”¨ChatGPTçš„æ¥å£æ¥å®ç°ä¸€ä¸ªèŠå¤©æœºå™¨äººäº†ã€‚æˆ‘ä»¬åˆ†åˆ«å®ç°äº†åªä¿ç•™å›ºå®šè½®æ•°çš„å¯¹è¯ï¼Œå¹¶ä¸”ä½“éªŒäº†å®ƒçš„æ•ˆæœã€‚æˆ‘ä»¬ä¹Ÿæ˜ç™½äº†ä¸ºä»€ä¹ˆæˆ‘ä»¬æ€»æ˜¯éœ€è¦æŠŠæ‰€æœ‰çš„ä¸Šä¸‹æ–‡éƒ½å‘é€ç»™OpenAIçš„æ¥å£ã€‚ç„¶åæˆ‘ä»¬é€šè¿‡Gradioè¿™ä¸ªåº“å¼€å‘äº†ä¸€ä¸ªèŠå¤©æœºå™¨äººç•Œé¢ã€‚æœ€åï¼Œæˆ‘ä»¬å°†è¿™ä¸ªç®€å•çš„èŠå¤©æœºå™¨äººéƒ¨ç½²åˆ°äº†HuggingFaceä¸Šï¼Œè®©ä½ å¯ä»¥åˆ†äº«ç»™è‡ªå·±çš„æœ‹å‹ä½¿ç”¨ã€‚å¸Œæœ›ä½ ç©å¾—é«˜å…´ï¼</p><h2>è¯¾åç»ƒä¹ </h2><p>åœ¨è¿™ä¸€è®²é‡Œï¼Œæˆ‘ä»¬çš„Chatbotåªèƒ½ç»´æŠ¤è¿‡å»Nè½®çš„å¯¹è¯ã€‚è¿™æ„å‘³ç€å¦‚æœå¯¹è¯å¾ˆé•¿çš„è¯ï¼Œæˆ‘ä»¬ä¸€å¼€å§‹å¯¹è¯çš„ä¿¡æ¯å°±è¢«ä¸¢æ‰äº†ã€‚æœ‰ä¸€ç§æ–¹å¼æ˜¯æˆ‘ä»¬ä¸è®¾å®šè½®æ•°ï¼Œåªé™åˆ¶ä¼ å…¥çš„ä¸Šä¸‹æ–‡çš„Tokenæ•°é‡ã€‚</p><ol>\n<li>ä½ èƒ½æ ¹æ®è¿™ä¸€è®²å­¦åˆ°çš„å†…å®¹ï¼Œä¿®æ”¹ä¸€ä¸‹ä»£ç ï¼Œè®©è¿™ä¸ªèŠå¤©æœºå™¨äººä¸é™åˆ¶è½®æ•°ï¼Œåªåœ¨Tokenæ•°é‡è¦è¶…æ ‡çš„æ—¶å€™å†åˆ å‡æœ€å¼€å§‹çš„å¯¹è¯ä¹ˆï¼Ÿ</li>\n<li>é™¤äº†â€œå¿˜è®°â€å¼€å§‹çš„å‡ è½®ï¼Œä½ è¿˜èƒ½æƒ³åˆ°ä»€ä¹ˆåŠæ³•è®©AIå°½å¯èƒ½å¤šåœ°è®°ä½ä¸Šä¸‹æ–‡å—ï¼Ÿ</li>\n</ol><p>æœŸå¾…èƒ½åœ¨è¯„è®ºåŒºçœ‹åˆ°ä½ çš„æ€è€ƒï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™èŠ‚è¯¾åˆ†äº«ç»™æ„Ÿå…´è¶£çš„æœ‹å‹ï¼Œæˆ‘ä»¬ä¸‹ä¸€è®²å†è§ã€‚</p>","comments":[{"had_liked":false,"id":386962,"user_name":"Geek_19eca2","can_delete":false,"product_type":"c1","uid":1655161,"ip_address":"æµ™æ±Ÿ","ucode":"7A910AB1386532","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLAD2YLZnuaicxibvPo6SEC3VoZ9Yra2g7HXDeqkWodb4nUvfRkhaOJxechJjUHBib4Ih1ryymCOW7AkQ/132","comment_is_top":true,"comment_ctime":1706002614,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"æœ€æ–°ä»£ç ï¼š \nimport os\n\nfrom openai import OpenAI\nclient = OpenAI()\n\nclass Conversation:\n    def __init__(self, prompt, num_of_round):\n        self.prompt = prompt\n        self.num_of_round = num_of_round\n        self.messages = []\n        self.messages.append({&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: self.prompt})\n\n    def ask(self, question):\n        try:\n            self.messages.append({&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: question})\n            response = client.chat.completions.create(\n                model=&quot;gpt-3.5-turbo&quot;,\n                messages=self.messages,\n                temperature=0.5,\n                max_tokens=2048,\n                top_p=1,\n            )\n        except Exception as e:\n            print(e)\n            return e\n\n        message = response.choices[0].message.content\n        self.messages.append({&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: message})\n\n        if len(self.messages) &gt; self.num_of_round*2 + 1:\n            del self.messages[1:3] # Remove the first round conversation left.\n        return message\n\n\nä¸ç„¶è·‘ä¸è¿‡å»ã€‚ã€‚openaiæ”¹äº†ã€‚ã€‚ã€‚\n","like_count":6},{"had_liked":false,"id":371563,"user_name":"æˆ‘è‡ªå·±å¸¦ç›","can_delete":false,"product_type":"c1","uid":1933777,"ip_address":"å¹¿ä¸œ","ucode":"40ACC81C8131BA","user_header":"https://static001.geekbang.org/account/avatar/00/1d/81/d1/c06ba7a2.jpg","comment_is_top":false,"comment_ctime":1680068681,"is_pvip":false,"replies":[{"id":135723,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680582060,"ip_address":"ä¸Šæµ·","comment_id":371563,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"å¯ä»¥è®¤æ¨¡å‹æ€»ç»“ä¸€ä¸‹ï¼Œå…¨éƒ¨çš„å¯¹è¯ï¼Œå†å‘è¿‡å»","like_count":29,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612222,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680582060,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612982,"discussion_content":"ä¸æ„§æ˜¯è‡ªå·±å¸¦ç›çš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1681050689,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371546,"user_name":"é»„ç¨","can_delete":false,"product_type":"c1","uid":1089706,"ip_address":"åŒ—äº¬","ucode":"786BF74290B25A","user_header":"https://static001.geekbang.org/account/avatar/00/10/a0/aa/a4c1fa31.jpg","comment_is_top":false,"comment_ctime":1680055728,"is_pvip":false,"replies":[{"id":135780,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680589083,"ip_address":"ä¸Šæµ·","comment_id":371546,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"é—®é¢˜1: ä¸ºäº†é˜²æ­¢è¶…æ ‡ï¼Œå¯èƒ½éœ€è¦åœ¨å¯¹è¯å¼€å§‹å‰è®¾ç½®ä¸€ä¸ªå…è®¸æœ€å¤§çš„tokené˜ˆå€¼ï¼Œæ¯”å¦‚ MAX_TOKEN_LIMIT = 2000ï¼Œå†è®¾ç½®ä¸€ä¸ªå°äºæŸä¸ªæ•°é‡å°±éœ€è¦æé†’çš„è­¦å‘Šå€¼ï¼Œæ¯”å¦‚ MIN_TOKEN_LIMIT = 200ï¼Œå¯¹è¯å‰åˆå§‹åŒ–ä¸€ä¸ªæœ€å¤§å€¼ï¼Œå¯¹è¯è¿‡ç¨‹ä¸­å‡å»æ¯è½®æ‰€æ¶ˆè€—çš„tokenæ•°é‡ï¼Œå½“ç»“æœå°‘äºæœ€å°å€¼çš„æ—¶å€™ï¼Œå†è°ƒç”¨åˆ å‡å¯¹è¯æ•°ç»„çš„ä»£ç ã€‚\n\né—®é¢˜2: é™åˆ¶æ–‡æœ¬é•¿åº¦ã€‚æˆ–è®¸å¯ä»¥æŠŠå¯¹è¯ä¸­çš„å¤§æ®µæ–‡æœ¬ç¼©å‡ä¸ºç²¾ç®€æ‘˜è¦ï¼Œä»¥å‡å°‘tokenæ•°é‡ï¼Œæ¯”å¦‚æŠŠâ€œé±¼é¦™è‚‰ä¸çš„åšæ³•æ˜¯......â€è¿™ç§ç²¾ç®€åçš„æ–‡æœ¬å¸¦å…¥åˆ°ä¸Šä¸‹æ–‡ä¸­å»ã€‚åˆ«çš„æš‚æ—¶æƒ³ä¸åˆ° =_=!","like_count":16,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612291,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680589084,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371627,"user_name":"LiuHu","can_delete":false,"product_type":"c1","uid":1039768,"ip_address":"æ±Ÿè‹","ucode":"284E2025C554BB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/dd/98/883c42b4.jpg","comment_is_top":false,"comment_ctime":1680132828,"is_pvip":false,"replies":[{"id":135760,"content":"å¯¹è¯åœºæ™¯ç”¨è¿™ä¸ªæ–¹å¼å…¶å®ä¸å¤ªåˆé€‚ã€‚ä¸“é—¨çš„ç¡®å®šçš„èµ„æ–™åº“è¿™æ ·åšå¯ä»¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680587040,"ip_address":"ä¸Šæµ·","comment_id":371627,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"ç”¨å‘é‡æ•°æ®åº“æŠŠå†å²å›è¯ä¿å­˜åˆ°æœ¬åœ°ï¼Œæ–°çš„é—®é¢˜å…ˆè½¬å‘é‡ï¼Œä»å‘é‡åº“ä¸­æœå‡ºç›¸å…³å†…å®¹ï¼Œå†æŠŠæœå‡ºçš„å†…å®¹ä½œä¸ºä¸Šä¸‹æ–‡+æ–°é—®é¢˜ä¸€èµ·å¸¦è¿‡å»","like_count":9,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612266,"discussion_content":"å¯¹è¯åœºæ™¯ç”¨è¿™ä¸ªæ–¹å¼å…¶å®ä¸å¤ªåˆé€‚ã€‚ä¸“é—¨çš„ç¡®å®šçš„èµ„æ–™åº“è¿™æ ·åšå¯ä»¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680587041,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2028238,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f2/ce/791d0f5e.jpg","nickname":"å¼ å¼€å…ƒ","note":"","ucode":"455838B89BF154","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":626817,"discussion_content":"ä¸ºä»€ä¹ˆå‘€ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1693399817,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":612266,"ip_address":"åŒ—äº¬","group_id":0},"score":626817,"extra":""}]}]},{"had_liked":false,"id":371762,"user_name":"æµ©ä»”æ˜¯ç¨‹åºå‘˜","can_delete":false,"product_type":"c1","uid":1104601,"ip_address":"å¹¿ä¸œ","ucode":"A7E5CF9E1571A2","user_header":"https://static001.geekbang.org/account/avatar/00/10/da/d9/f051962f.jpg","comment_is_top":false,"comment_ctime":1680280113,"is_pvip":false,"replies":[{"id":135716,"content":"æ˜¯çš„ï¼Œè¿™æ˜¯ç”±ç°åœ¨çš„GPTç±»å‹æ¨¡å‹çš„åŸç†å†³å®šçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680581533,"ip_address":"ä¸Šæµ·","comment_id":371762,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"ç›®å‰chatGPTçš„ä¸Šä¸‹æ–‡åŠŸèƒ½ä¹Ÿæ˜¯è¿™ä¹ˆå®ç°çš„å—ï¼Ÿæ¯æ¬¡éƒ½è¦å‘ä¹‹å‰çš„é—®é¢˜å’Œç­”æ¡ˆï¼Œæ„Ÿè§‰å¾ˆè ¢","like_count":6,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612215,"discussion_content":"æ˜¯çš„ï¼Œè¿™æ˜¯ç”±ç°åœ¨çš„GPTç±»å‹æ¨¡å‹çš„åŸç†å†³å®šçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680581533,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1811277,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a3/4d/59390ba9.jpg","nickname":"æ’éª¨","note":"","ucode":"A413CF46211E1F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":645758,"discussion_content":"æˆ‘è§‰å¾—è¿™æ ·æ›´å¥½ï¼Œç›´æ¥æ— çŠ¶æ€åŒ–äº†ï¼Œç®€å•æ–¹ä¾¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1716692433,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1358045,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b8/dd/37726c34.jpg","nickname":"å°é©¬å“¥","note":"","ucode":"B2C0FF38F8C9BC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":640621,"discussion_content":"ä½ è§‰å¾—, å¦‚æœè®©OpenAIåœ¨æœåŠ¡å™¨è®°å½•æ‰€æœ‰åœ¨çº¿ç”¨æˆ·çš„ä¸Šä¸‹æ–‡, è¿™ä»¶äº‹æƒ…ç›¸æ¯”å®¢æˆ·ç«¯ä¼ é€’ä¸Šä¸‹æ–‡, å®ç°èµ·æ¥å®¹æ˜“å—? ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1711670314,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2409553,"avatar":"https://static001.geekbang.org/account/avatar/00/24/c4/51/5bca1604.jpg","nickname":"aLong","note":"","ucode":"11DB1B9C579811","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":638501,"discussion_content":"æˆ‘è§‰å¾—å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œä»–ä¸“èŒåšçš„äº‹æƒ…æ˜¯ç”Ÿæˆå†…å®¹çš„æœåŠ¡ã€‚ä½ æåˆ°çš„è®°å½•æ˜¯éœ€è¦å¦å¤–æœåŠ¡å»åšçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1709636543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371554,"user_name":"èƒ¡èåœ","can_delete":false,"product_type":"c1","uid":2456594,"ip_address":"ä¸Šæµ·","ucode":"54DF5159C1704C","user_header":"https://static001.geekbang.org/account/avatar/00/25/7c/12/7b9a2efb.jpg","comment_is_top":false,"comment_ctime":1680059669,"is_pvip":false,"replies":[{"id":135775,"content":"ğŸ‘ è¿™ä¸ªæŠ€å·§ä¹Ÿæ˜¯å¾ˆæœ‰ç”¨çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680588005,"ip_address":"ä¸Šæµ·","comment_id":371554,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"è¾“å…¥æ–‡æœ¬è¶…é•¿æ—¶éœ€è¦ä¸èƒ½ç›´æ¥æˆªæ–­ï¼Œä¸ç„¶å¯èƒ½ä¸å¬æŒ‡ä»¤ç›´æ¥ç»­å†™ã€‚æˆªæ–­åæŠŠæœ€åä¸€ä¸ªå¥å­å»æ‰ï¼Œå¹¶ä»¥å¥å·ç»“å°¾é˜²æ­¢å‡ºç°å¥‡æ€ªçš„å›å¤ã€‚","like_count":6,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612286,"discussion_content":"ğŸ‘ è¿™ä¸ªæŠ€å·§ä¹Ÿæ˜¯å¾ˆæœ‰ç”¨çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680588005,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372223,"user_name":"Allan","can_delete":false,"product_type":"c1","uid":1310388,"ip_address":"åŒ—äº¬","ucode":"8DA4DBECC2C45C","user_header":"https://static001.geekbang.org/account/avatar/00/13/fe/b4/295338e7.jpg","comment_is_top":false,"comment_ctime":1680856497,"is_pvip":false,"replies":[{"id":135875,"content":"æ‰€æœ‰ä»£ç éƒ½ä»¥Jupyter Notebookçš„æ–‡ä»¶æ ¼å¼æ”¾åœ¨ https:&#47;&#47;github.com&#47;xuwenhao&#47;geektime-ai-course é‡Œ\n\nå¯¼è¯»é‚£ä¸€è®²é‡Œæ”¾äº†å¯¹åº”çš„é“¾æ¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680973610,"ip_address":"æ—¥æœ¬","comment_id":372223,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"è€å¸ˆå¯ä»¥æŠŠæ¯èŠ‚è¯¾çš„é¡¹ç›®éƒ½æ”¾åˆ°ä¸€ä¸ªå·¥ç¨‹é‡Œé¢å—ï¼Ÿç„¶åæˆ‘ä»¬å¯ä»¥ä¸‹è½½è¿™æ ·æ˜¯ä¸æ˜¯æ–¹ä¾¿ä¸€äº›ã€‚","like_count":3,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612870,"discussion_content":"æ‰€æœ‰ä»£ç éƒ½ä»¥Jupyter Notebookçš„æ–‡ä»¶æ ¼å¼æ”¾åœ¨ https://github.com/xuwenhao/geektime-ai-course é‡Œ\n\nå¯¼è¯»é‚£ä¸€è®²é‡Œæ”¾äº†å¯¹åº”çš„é“¾æ¥ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1680973610,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ—¥æœ¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371933,"user_name":"new one","can_delete":false,"product_type":"c1","uid":3582142,"ip_address":"æ±Ÿè‹","ucode":"870D6195E1815E","user_header":"https://static001.geekbang.org/account/avatar/00/36/a8/be/e98383cc.jpg","comment_is_top":false,"comment_ctime":1680529356,"is_pvip":false,"replies":[{"id":135778,"content":"æ„Ÿè§‰è¿˜æ˜¯SSLæ¡æ‰‹å¤±è´¥ï¼Œå…ˆåœ¨Colabä¸Šçœ‹çœ‹èƒ½ä¸èƒ½è·‘é€šï¼Ÿå†çœ‹çœ‹ç®€å•HTTPSè¯·æ±‚åˆ«çš„ç½‘ç«™æ˜¯å¦æ­£å¸¸æ¥å®šä½é—®é¢˜ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680588897,"ip_address":"ä¸Šæµ·","comment_id":371933,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":" å‡ºç°SSLæ¡æ‰‹å¤±è´¥çš„é—®é¢˜ï¼Œè¯·æ•™ä¸€ä¸‹åº”è¯¥æ€ä¹ˆè§£å†³ï¼Œé—®äº†chatgptï¼Œä½¿ç”¨äº†ï¼š\nimport ssl\ncontext = ssl.create_default_context()\ncontext.load_verify_locations(&quot;D:\\Anaconda\\Library\\ssl\\cert.pem&quot;)\nå¹¶æ²¡æœ‰å¾—åˆ°è§£å†³\n\nå…·ä½“æŠ¥é”™å¦‚ä¸‹ï¼š\nError communicating with OpenAI: HTTPSConnectionPool(host=&#39;api.openai.com&#39;, port=443): Max retries exceeded with url: &#47;v1&#47;chat&#47;completions (Caused by SSLError(SSLError(1, &#39;[SSL: SSLV3_ALERT_HANDSHAKE_FAILURE] sslv3 alert handshake failure (_ssl.c:1129)&#39;)))\nAssistant : Error communicating with OpenAI: HTTPSConnectionPool(host=&#39;api.openai.com&#39;, port=443): Max retries exceeded with url: &#47;v1&#47;chat&#47;completions (Caused by SSLError(SSLError(1, &#39;[SSL: SSLV3_ALERT_HANDSHAKE_FAILURE] sslv3 alert handshake failure (_ssl.c:1129)&#39;)))","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612289,"discussion_content":"æ„Ÿè§‰è¿˜æ˜¯SSLæ¡æ‰‹å¤±è´¥ï¼Œå…ˆåœ¨Colabä¸Šçœ‹çœ‹èƒ½ä¸èƒ½è·‘é€šï¼Ÿå†çœ‹çœ‹ç®€å•HTTPSè¯·æ±‚åˆ«çš„ç½‘ç«™æ˜¯å¦æ­£å¸¸æ¥å®šä½é—®é¢˜ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680588898,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371724,"user_name":"å·æœˆ","can_delete":false,"product_type":"c1","uid":3579438,"ip_address":"å››å·","ucode":"CAB1218259CFC5","user_header":"https://static001.geekbang.org/account/avatar/00/36/9e/2e/e46ab171.jpg","comment_is_top":false,"comment_ctime":1680234246,"is_pvip":false,"replies":[{"id":135736,"content":"æ­£å¥½ä½ å¯ä»¥è¯•ç€æŠŠé—®é¢˜æ‰”ç»™ChatGPTçœ‹çœ‹å®ƒä¼šæ€ä¹ˆè§£ç­”ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680583323,"ip_address":"ä¸Šæµ·","comment_id":371724,"utype":1}],"discussion_count":6,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"    del self.messages[1:3] &#47;&#47;Remove the first round conversation left.\n        ^\nSyntaxError: cannot delete operator ä¸ºä»€ä¹ˆè¿™ä¸ªæŠ¥é”™å•Š","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612236,"discussion_content":"æ­£å¥½ä½ å¯ä»¥è¯•ç€æŠŠé—®é¢˜æ‰”ç»™ChatGPTçœ‹çœ‹å®ƒä¼šæ€ä¹ˆè§£ç­”ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680583323,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1899757,"avatar":"","nickname":"yanyu-xin","note":"","ucode":"3AA389F9E4C236","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611827,"discussion_content":"å°†&#34;//&#34; æ”¹ä¸º â€#â€œ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1680345920,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1698770,"avatar":"https://static001.geekbang.org/account/avatar/00/19/eb/d2/3d51e170.jpg","nickname":"æ«","note":"","ucode":"759FC1885B07A5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627836,"discussion_content":"copyåœ¨colabæˆ‘ä¹Ÿé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œä¹ æƒ¯æ€§ä»è¯„è®ºåŒºæ‰¾ç»“è®ºï¼Œchatgptçš„å›ç­”çœ‹ä¸æ‡‚ï¼Œç»“æœä¸€çœ‹æˆ‘è¦æ¶ˆæ¯ï¼Œæ³¨é‡Šçš„ç¬¦å·ä¸ä¸€æ ·ï¼ŒçœŸçš„è¦ç¬‘æ­»ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694593738,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1452167,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcwXucibksEYRSYg6icjibzGa7efcMrCsGec2UwibjTd57icqDz0zzkEEOM2pXVju60dibzcnQKPfRkN9g/132","nickname":"Geek_93970d","note":"","ucode":"52AC308BEC7737","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":619320,"discussion_content":"chatgtp å»ºè®®è¿™æ ·æ”¹:\nself.messages = self.messages[:1] + self.messages[3:]. \nï¼Œä½†æ˜¯ä¸ºå•¥è¦ç•™ç€ index=0 çš„å…ƒç´ å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684982006,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1559128,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ca/58/6fe1854c.jpg","nickname":"é‡‘î„","note":"","ucode":"48D0B5CB8E5F9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613912,"discussion_content":"æˆ‘æ‹·è´è¿™ä¸ªä»£ç åˆ°pycharm, å‘ç°ä¸¤ä¸ªé—®é¢˜\n1. //ä¸æ˜¯pythonçš„æ³¨é‡Šæ–¹æ³•\n2. è¿™ä¸ªæ³¨é‡Šå˜æˆäº†å¤šè¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681599828,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ¹–å—","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1911235,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/29/c3/791d0f5e.jpg","nickname":"æ¸£æ¸£è¾‰","note":"","ucode":"730838D9161579","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612441,"discussion_content":"è¿™ä¸ªæŠ¥é”™æˆ‘çœ‹äº†åŠå¤©æ‰å¼„æ˜ç™½ç¬‘æ­»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680691187,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ—¥æœ¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371663,"user_name":"Bonnenultä¸¶å‡‰ç…œ","can_delete":false,"product_type":"c1","uid":1448629,"ip_address":"ä¸­å›½å°æ¹¾","ucode":"9CF78FCAE98AC3","user_header":"https://static001.geekbang.org/account/avatar/00/16/1a/b5/9635696d.jpg","comment_is_top":false,"comment_ctime":1680161626,"is_pvip":false,"replies":[{"id":135746,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680586077,"ip_address":"ä¸Šæµ·","comment_id":371663,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"å®‰è£…gradioéœ€è¦ä½¿ç”¨è¿™ä¸ªå‘½ä»¤conda install -c conda-forge gradio","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612252,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680586077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":374535,"user_name":"é™ˆé¹","can_delete":false,"product_type":"c1","uid":1574748,"ip_address":"ç«‹é™¶å®›","ucode":"777F23D9178A6A","user_header":"https://static001.geekbang.org/account/avatar/00/18/07/5c/2b75c836.jpg","comment_is_top":false,"comment_ctime":1684160550,"is_pvip":false,"replies":[{"id":136807,"content":"æœ‰çš„ï¼Œå¯ä»¥è®¾ç½®å¯¹åº”çš„å‚æ•°ï¼Œçœ‹ä¸€ä¸‹åé¢ä»‹ç»Visual ChatGPTçš„éƒ¨åˆ†æœ‰ä¸€ä¸ªè®¾ç½®å¯ä»¥è®¾ç½®æ²¡æœ‰äººç”¨å¤šé•¿æ—¶é—´ä¼šè‡ªåŠ¨åœæ­¢ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1684725428,"ip_address":"æ–°åŠ å¡","comment_id":374535,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"æˆåŠŸè¿è¡Œï¼Œå¼€å¿ƒã€‚\nè¯·æ•™è€å¸ˆä¸€ä¸ªé—®é¢˜ï¼šç”¨hugging face è‡ªå·±æ­å»ºçš„appï¼Œä¼šä¸€ç›´è¿è¡Œå—ï¼Ÿå¹³å°æ˜¯å¦æœ‰ç­–ç•¥åˆ°ä¸€å®šæ—¶é—´ååœæ­¢æˆ‘çš„appï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":618952,"discussion_content":"æœ‰çš„ï¼Œå¯ä»¥è®¾ç½®å¯¹åº”çš„å‚æ•°ï¼Œçœ‹ä¸€ä¸‹åé¢ä»‹ç»Visual ChatGPTçš„éƒ¨åˆ†æœ‰ä¸€ä¸ªè®¾ç½®å¯ä»¥è®¾ç½®æ²¡æœ‰äººç”¨å¤šé•¿æ—¶é—´ä¼šè‡ªåŠ¨åœæ­¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684725428,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":374366,"user_name":"ç‹çŸ³ç£Š","can_delete":false,"product_type":"c1","uid":1905809,"ip_address":"åœŸè€³å…¶","ucode":"CD8E0C5CF120E1","user_header":"https://static001.geekbang.org/account/avatar/00/1d/14/91/794687ef.jpg","comment_is_top":false,"comment_ctime":1684033611,"is_pvip":false,"replies":[{"id":136842,"content":"çœ‹èµ·æ¥è¿˜åƒæ˜¯ä»£ç†çš„é—®é¢˜ï¼Ÿåœ¨Colabä¸Šèƒ½è¿è¡ŒæˆåŠŸä¹ˆï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1684748613,"ip_address":"ä¸Šæµ·","comment_id":374366,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"æˆ‘çš„ç¤ºä¾‹æŠ¥é”™ç°è±¡æ˜¯è¿™æ ·çš„ï¼Œç¨‹åºä»£ç ä¸­è®¾ç½®äº† API_KEY å’Œ ç½‘è·¯ä»£ç†ï¼Œè¿è¡Œå…¶ä»–å‰é¢çš„ä»£ç æ­£å¸¸ï¼Œæœ¬èŠ‚è¯¾çš„ä»£ç å‡ºç°äº†ã€‚ä¸‹é¢çš„é—®é¢˜ã€‚ä¸å­˜åœ¨API_KEY è´¹ç”¨ä¸è¶³æˆ–è°·æ­Œä¸èƒ½è®¿é—®çš„æƒ…å†µã€‚\nopenai.api_key = os.environ[&quot;OPENAI_API_KEY&quot;]\nos.environ[&quot;http_proxy&quot;] = &quot;socks5:&#47;&#47;127.0.0.1:xxx&quot;\nos.environ[&quot;https_proxy&quot;] = &quot;socks5:&#47;&#47;127.0.0.1:xxx&quot;\nTraceback (most recent call last):\n  File &quot;D:\\Python3810\\lib\\site-packages\\urllib3\\connectionpool.py&quot;, line 703, in urlopen\n    httplib_response = self._make_request(\n  File &quot;D:\\Python3810\\lib\\site-packages\\urllib3\\connectionpool.py&quot;, line 449, in _make_request\n    six.raise_from(e, None)\n  File &quot;&lt;string&gt;&quot;, line 3, in raise_from\n  File &quot;D:\\Python3810\\lib\\site-packages\\urllib3\\connectionpool.py&quot;, line 444, in _make_request\n    httplib_response = conn.getresponse()\n  File &quot;D:\\Python3810\\lib\\http\\client.py&quot;, line 1344, in getresponse\n    response.begin()\n  File &quot;D:\\Python3810\\lib\\http\\client.py&quot;, line 307, in begin\n    version, status, reason = self._read_status()\n  File &quot;D:\\Python3810\\lib\\http\\client.py&quot;, line 276, in _read_status\n    raise RemoteDisconnected(&quot;Remote end closed connection without&quot;\nhttp.client.RemoteDisconnected: Remote end closed connection without response\n\nDuring handling of the above exception, another exception occurred:","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":619020,"discussion_content":"çœ‹èµ·æ¥è¿˜åƒæ˜¯ä»£ç†çš„é—®é¢˜ï¼Ÿåœ¨Colabä¸Šèƒ½è¿è¡ŒæˆåŠŸä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684748613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1905809,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/14/91/794687ef.jpg","nickname":"ç‹çŸ³ç£Š","note":"","ucode":"CD8E0C5CF120E1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":618328,"discussion_content":"é€šè¿‡å…¶ä»–ä»£ç†å·¥å…·ï¼Œå¯ä»¥å®Œæˆï¼Œç›®å‰å·²ç¡®å®šæ—¶v2rayçš„Bug","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684195858,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1905809,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/14/91/794687ef.jpg","nickname":"ç‹çŸ³ç£Š","note":"","ucode":"CD8E0C5CF120E1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":618147,"discussion_content":"åŸºæœ¬ç¡®å®šäº†æ˜¯ä¸ªäººä»£ç†å·¥å…·(V2ray)çš„é—®é¢˜ï¼Œä¸‹é¢éœ€è¦è§£å†³ä»£ç†å·¥å…·çš„é—®é¢˜äº†\n2023/05/15 13:09:27 [Warning] [2069902137] app/proxyman/inbound: connection ends &gt; proxy/http: failed to read http request &gt; malformed HTTP request &#34;\\x05\\x01\\x00&#34;\n2023/05/15 13:09:32 [Warning] [3570874343] app/proxyman/inbound: connection ends &gt; proxy/http: failed to read http request &gt; malformed HTTP request &#34;\\x05\\x01\\x00&#34;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684127458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373974,"user_name":"é™ˆé¹","can_delete":false,"product_type":"c1","uid":1574748,"ip_address":"ä¸­å›½å°æ¹¾","ucode":"777F23D9178A6A","user_header":"https://static001.geekbang.org/account/avatar/00/18/07/5c/2b75c836.jpg","comment_is_top":false,"comment_ctime":1683429031,"is_pvip":false,"replies":[{"id":136865,"content":"æˆ‘ä»¬æ˜¯åœ¨æ¯è½®ç»“æŸçš„æ—¶å€™é€šè¿‡ &gt; åˆ¤æ–­ï¼Œè€Œä¸”indexä»0èµ·æ­¥ï¼Œæ‰€ä»¥åº”è¯¥æ˜¯ 2 æ²¡é—®é¢˜å•Š","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1684752908,"ip_address":"ä¸Šæµ·","comment_id":373974,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"è€å¸ˆï¼Œç¬¬ä¸€æ®µä»£ç ç¤ºä¾‹ä¸­çš„num_of_round=2ï¼Œæ˜¯ä¸æ˜¯è¦æ”¹ä¸º3ï¼Ÿ  æ„Ÿè§‰ å‰åå†…å®¹å¯¹åº”ä¸ä¸Šï¼Œå‰é¢num_of_roundè®¾ä¸º2ï¼Œè™½ç„¶ç¬¬ä¸‰è½®å¯¹è¯èƒ½ç»ƒä¹ ä¸Šä¸‹æ–‡ï¼Œä½†æ˜¯é—®äº†é—®é¢˜3åï¼Œç¬¬ä¸€ä¸ªé—®é¢˜å’Œå›ç­”å·²ç»åˆ é™¤äº†","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":619051,"discussion_content":"æˆ‘ä»¬æ˜¯åœ¨æ¯è½®ç»“æŸçš„æ—¶å€™é€šè¿‡ &gt; åˆ¤æ–­ï¼Œè€Œä¸”indexä»0èµ·æ­¥ï¼Œæ‰€ä»¥åº”è¯¥æ˜¯ 2 æ²¡é—®é¢˜å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684752908,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1138460,"avatar":"https://static001.geekbang.org/account/avatar/00/11/5f/1c/abb7bfe3.jpg","nickname":"è¥¿å£å¾„","note":"","ucode":"19B203A560BB6B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":617336,"discussion_content":"æ˜¯çš„ï¼Œå¯èƒ½ç¬”è¯¯å•¦ï¼Œæ²¡æ³¨æ„åˆ°ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1683513211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373171,"user_name":"å‹‡.Max","can_delete":false,"product_type":"c1","uid":1248128,"ip_address":"æ¾³å¤§åˆ©äºš","ucode":"AE5DBC10805A9B","user_header":"https://static001.geekbang.org/account/avatar/00/13/0b/80/a0533acb.jpg","comment_is_top":false,"comment_ctime":1682214349,"is_pvip":false,"replies":[{"id":136525,"content":"æ²¡æœ‰ç›´æ¥åœ¨jupyterå†…æ˜¾ç¤ºå‡ºæ¥gradioçš„åº”ç”¨ä¹ˆï¼Ÿ\n\næˆ‘æ²¡æœ‰m1æ‰€ä»¥ä¸å¥½è¯´ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1683094003,"ip_address":"ä¸Šæµ·","comment_id":373171,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"gradioåº”ç”¨ä»£ç ï¼Œæˆ‘åœ¨jupyter-labä¸Šè¿è¡Œï¼Œå·¦ä¸‹è§’ä¸€ç›´æ˜¾ç¤ºBusyï¼Œå¡ç€ä¸åŠ¨ã€‚\næˆ‘ç”µè„‘é…ç½®å¹¶ä¸ä½ï¼ˆmacbook pro m1ï¼‰ï¼Œç½‘ç»œä¹Ÿæ²¡é—®é¢˜ã€‚è¯·é—®è€å¸ˆè¿™ç§é—®é¢˜å¦‚ä½•è§£å†³å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":616766,"discussion_content":"æ²¡æœ‰ç›´æ¥åœ¨jupyterå†…æ˜¾ç¤ºå‡ºæ¥gradioçš„åº”ç”¨ä¹ˆï¼Ÿ\n\næˆ‘æ²¡æœ‰m1æ‰€ä»¥ä¸å¥½è¯´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683094003,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373139,"user_name":"ç»˜ä¸–æµ®å¤¸ ã¤","can_delete":false,"product_type":"c1","uid":1763933,"ip_address":"æ±Ÿè‹","ucode":"6A3960195753BA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/ea/5d/ccb4c205.jpg","comment_is_top":false,"comment_ctime":1682087061,"is_pvip":false,"replies":[{"id":136489,"content":"èŠ±é’±å˜æˆä»˜è´¹ç”¨æˆ·â€¦â€¦","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1683086992,"ip_address":"ä¸Šæµ·","comment_id":373139,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"å¯¹äºç°åœ¨apiåšäº†é™åˆ¶æ¯åˆ†é’Ÿåªèƒ½æé—®ä¸‰æ¬¡æ€ä¹ˆè§£å†³è€å¸ˆ","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":616725,"discussion_content":"èŠ±é’±å˜æˆä»˜è´¹ç”¨æˆ·â€¦â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683086993,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373112,"user_name":"Geek_053159","can_delete":false,"product_type":"c1","uid":3603126,"ip_address":"å››å·","ucode":"6435D4A6D83FAE","user_header":"","comment_is_top":false,"comment_ctime":1682059080,"is_pvip":false,"replies":[{"id":136514,"content":"æ²¡æœ‰ç‰¹æ®ŠæŒ‡ä»¤ï¼Œä½ å¯ä»¥è‡ªå·±åˆ¤åˆ«ä¸€ä¸‹ç”¨æˆ·æ„å›¾æ¥åšè¿™ä¸ªï¼Œä½†æ˜¯æˆ‘è§‰å¾—æ²¡æœ‰å¿…è¦\n\nå¯ä»¥å¾€åçœ‹çœ‹14-17è®²ï¼Œæœ‰æ›´å¤šä½¿ç”¨memoryçš„æ–¹å¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1683091764,"ip_address":"ä¸Šæµ·","comment_id":373112,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"è€å¸ˆ chatGPT ç†è§£ä¸Šä¸‹æ–‡éƒ½æ˜¯éœ€è¦æŠŠæ¯æ¬¡çš„ä¼šè¯å…¨éƒ¨ä¼ é€’ç»™å®ƒ é‚£å¦‚æœæ˜¯ä¸‹é¢è¿™ç§åœºæ™¯æœ‰æ²¡æœ‰å¤„ç†åŠæ³•å‘¢ å³æˆ‘åœ¨å’Œå®ƒçš„å‰é¢å››æ¬¡ä¼šè¯ä¸­æˆ‘éœ€è¦å®ƒè®°ä½ä¸Šä¸‹æ–‡ åœ¨ç¬¬äº”æ¬¡ä¼šè¯ä¸­ ä¸ºäº†èŠ‚çº¦tokenæ¶ˆè€—å’Œä¸å½±å“å›ç­”çš„æ•ˆæœ æˆ‘éœ€è¦å®ƒå¿˜è®°å‰é¢å››æ¬¡çš„ä¼šè¯ è¿™ç§åœºæ™¯æœ‰æ²¡æœ‰ç‰¹æ®Šçš„æŒ‡ä»¤å¯ä»¥å®ç° æ¯”å¦‚ç›´æ¥è®©å‘Šè¯‰chatgpt ï¼šå¿˜è®°å‰é¢çš„å¯¹è¯","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":616755,"discussion_content":"æ²¡æœ‰ç‰¹æ®ŠæŒ‡ä»¤ï¼Œä½ å¯ä»¥è‡ªå·±åˆ¤åˆ«ä¸€ä¸‹ç”¨æˆ·æ„å›¾æ¥åšè¿™ä¸ªï¼Œä½†æ˜¯æˆ‘è§‰å¾—æ²¡æœ‰å¿…è¦\n\nå¯ä»¥å¾€åçœ‹çœ‹14-17è®²ï¼Œæœ‰æ›´å¤šä½¿ç”¨memoryçš„æ–¹å¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683091764,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372483,"user_name":"ç‹¬ç«‹æ€è€ƒ","can_delete":false,"product_type":"c1","uid":2309581,"ip_address":"ä¿„ç½—æ–¯","ucode":"A49E977C4682F2","user_header":"https://static001.geekbang.org/account/avatar/00/23/3d/cd/65e6b3d3.jpg","comment_is_top":false,"comment_ctime":1681195629,"is_pvip":false,"replies":[{"id":135967,"content":"pip install -U openai\n\nå‡çº§ä¸€ä¸‹openaiçš„sdkç‰ˆæœ¬ï¼Œä½ åº”è¯¥æ˜¯ä¹‹å‰åœ¨ChatGPT APIè¿˜æ²¡æœ‰å‡ºæ¥çš„æ—¶å€™å°±å®‰è£…è¿‡openaiçš„sdkäº†","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681262917,"ip_address":"ä¸Šæµ·","comment_id":372483,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"æŠ¥é”™ï¼šmodule &#39;openai&#39; has no attribute &#39;ChatCompletion&#39;ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613308,"discussion_content":"pip install -U openai\n\nå‡çº§ä¸€ä¸‹openaiçš„sdkç‰ˆæœ¬ï¼Œä½ åº”è¯¥æ˜¯ä¹‹å‰åœ¨ChatGPT APIè¿˜æ²¡æœ‰å‡ºæ¥çš„æ—¶å€™å°±å®‰è£…è¿‡openaiçš„sdkäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681262917,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1023293,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9d/3d/2a39752e.jpg","nickname":"æ°´ä»–","note":"","ucode":"B67105561CFA71","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":614060,"discussion_content":"requrements.txté‡Œå†™æˆ openai==0.27.0","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1681654324,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372427,"user_name":"ä¸œæ–¹å¥‡éª¥","can_delete":false,"product_type":"c1","uid":1354850,"ip_address":"å››å·","ucode":"DEE7085F7E55A4","user_header":"https://static001.geekbang.org/account/avatar/00/14/ac/62/37912d51.jpg","comment_is_top":false,"comment_ctime":1681126127,"is_pvip":false,"replies":[{"id":135948,"content":"æ¯æ–°å¢ä¸€è½®å¯¹è¯ï¼Œæˆ‘ä»¬åªæ˜¯è¦åˆ æ‰æœ€å‰é¢çš„ä¸€è½®å¯¹è¯ï¼Œæ•°ç»„é‡Œindexä¸º1å’Œ2çš„ä¸¤å¤©è®°å½•å‘€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681142370,"ip_address":"ä¸Šæµ·","comment_id":372427,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"del self.messages[1: 3] ä¸ºä»€ä¹ˆæ˜¯3å‘¢ï¼Ÿç†è§£åº”è¯¥æ˜¯ del self.messages[1: self.num_of_round + 1]ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613168,"discussion_content":"æ¯æ–°å¢ä¸€è½®å¯¹è¯ï¼Œæˆ‘ä»¬åªæ˜¯è¦åˆ æ‰æœ€å‰é¢çš„ä¸€è½®å¯¹è¯ï¼Œæ•°ç»„é‡Œindexä¸º1å’Œ2çš„ä¸¤å¤©è®°å½•å‘€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681142370,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372159,"user_name":"å¾è¿æŒ¯","can_delete":false,"product_type":"c1","uid":1634661,"ip_address":"æµ™æ±Ÿ","ucode":"42745EB93851DA","user_header":"https://static001.geekbang.org/account/avatar/00/18/f1/65/b6508936.jpg","comment_is_top":false,"comment_ctime":1680788793,"is_pvip":false,"replies":[{"id":135877,"content":"çœ‹ä¸€ä¸‹ https:&#47;&#47;github.com&#47;openai&#47;openai-cookbook&#47;blob&#47;main&#47;examples&#47;How_to_count_tokens_with_tiktoken.ipynb\n\néƒ¨åˆ†ç¼–ç æœ‰\nhttps:&#47;&#47;github.com&#47;hyunwoongko&#47;gpt2-tokenizer-java\n\n","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680973752,"ip_address":"æ—¥æœ¬","comment_id":372159,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼è®¡ç®—gpt-3.5-turboæ¨¡å‹çš„tokenæ•°æœ‰å¯¹åº”çš„Javaåº“å—ï¼Ÿå› ä¸ºæˆ‘ä»¬çš„åº”ç”¨æ˜¯Javaå†™çš„ï¼Œå†™çš„ä¹Ÿæ¯”è¾ƒå¤æ‚å’Œæˆç†Ÿäº†ï¼Œä¸æƒ³å†éƒ¨ç½²ä¸€ä¸ªPythonæœåŠ¡ï¼Œæœ‰è®¡ç®—tokenæ•°Javaå¯¹åº”çš„åº“å—ï¼Ÿæ±‚æ¨è","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612872,"discussion_content":"çœ‹ä¸€ä¸‹ https://github.com/openai/openai-cookbook/blob/main/examples/How_to_count_tokens_with_tiktoken.ipynb\n\néƒ¨åˆ†ç¼–ç æœ‰\nhttps://github.com/hyunwoongko/gpt2-tokenizer-java\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680973752,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ—¥æœ¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372082,"user_name":"æ¸£æ¸£è¾‰","can_delete":false,"product_type":"c1","uid":1911235,"ip_address":"æ—¥æœ¬","ucode":"730838D9161579","user_header":"https://static001.geekbang.org/account/avatar/00/1d/29/c3/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1680691599,"is_pvip":false,"replies":[{"id":135900,"content":"Sorryï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰ç†è§£ä½ çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿèƒ½æ›´å…·ä½“ä¸€ç‚¹ä¸¾ä¸ªä¾‹å­ä¹ˆï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680975255,"ip_address":"æ—¥æœ¬","comment_id":372082,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"æˆ‘è¿™é‡Œæœ‰ä¸ªç–‘é—®ï¼Œå¦‚æœè€å¸ˆå·²ç»è®²è¿‡äº†çš„è¯ååˆ†æŠ±æ­‰ã€‚åœ¨è€å¸ˆç»™çš„ä»£ç é‡Œæç¤ºè¯promptä¸ä¼šå› ä¸ºè¾¾åˆ°æœ€å¤§tokenè¢«åˆ é™¤æ‰ã€‚å› æ­¤æˆ‘å¾—å‡ºåœ¨å®é™…çš„ä½¿ç”¨ä¸Špromptæ˜¯è¦æ±‚ä¸å¯ä»¥è¢«åˆ æ‰çš„å‚æ•°ã€‚æˆ‘çš„ç»“è®ºå¯¹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612896,"discussion_content":"Sorryï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰ç†è§£ä½ çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿèƒ½æ›´å…·ä½“ä¸€ç‚¹ä¸¾ä¸ªä¾‹å­ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680975255,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ—¥æœ¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372031,"user_name":"ç‹æ˜Šç¿”Harry","can_delete":false,"product_type":"c1","uid":3573206,"ip_address":"è‹±å›½","ucode":"D4B5FDFF6E1A50","user_header":"https://static001.geekbang.org/account/avatar/00/36/85/d6/0221579f.jpg","comment_is_top":false,"comment_ctime":1680607479,"is_pvip":false,"replies":[{"id":135889,"content":"è¿™ä¸ªåº”è¯¥æ˜¯å‰é¢çš„ä»£ç ä½ æ²¡æœ‰è¿è¡Œ\n\nå» https:&#47;&#47;github.com&#47;xuwenhao&#47;geektime-ai-course æ‹¿åˆ°åŸå§‹çš„notebookï¼Œä»ä¸Šå¾€ä¸‹è¿è¡Œå°±å¥½äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680974452,"ip_address":"æ—¥æœ¬","comment_id":372031,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"æ²¡æœ‰ç¼–ç¨‹çš„æ–°æ‰‹ï¼Œåœ¨è·‘ä»£ç çš„æ—¶å€™å¸¸å¸¸å‡ºç° NameError                                 Traceback (most recent call last)\n&lt;ipython-input-12-a8673c85e21c&gt; in &lt;cell line: 4&gt;()\n      2 1. ä½ çš„å›ç­”å¿…é¡»æ˜¯ä¸­æ–‡\n      3 2. å›ç­”é™åˆ¶åœ¨100ä¸ªå­—ä»¥å†…&quot;&quot;&quot;\n----&gt; 4 conv1 = Conversation(prompt, 2)\n      5 question1 = &quot;ä½ æ˜¯è°ï¼Ÿ&quot;\n      6 print(&quot;User : %s&quot; % question1)\n\nNameError: name &#39;Conversation&#39; is not defined\nè¿™ä¸€ç±»é—®é¢˜ã€‚ä½†æ˜¯æ²¡æœ‰å…·ä½“çš„è§£é‡Šã€‚Pandasä¸€äº›ä¸‹è½½çš„æ–¹å¼ä¹Ÿæœ‰äº›è¿·èŒ«ã€‚æ— æ³•æ¨è¿›","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612885,"discussion_content":"è¿™ä¸ªåº”è¯¥æ˜¯å‰é¢çš„ä»£ç ä½ æ²¡æœ‰è¿è¡Œ\n\nå» https://github.com/xuwenhao/geektime-ai-course æ‹¿åˆ°åŸå§‹çš„notebookï¼Œä»ä¸Šå¾€ä¸‹è¿è¡Œå°±å¥½äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680974452,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ—¥æœ¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2354198,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKib5EEL89P7Mpz2ib8QYmUwibiblzeziacHYCeIRCWv43l8E0FPPLtoDibsJ5xO56XSGLBaOFoSIA6dQ5A/132","nickname":"115121","note":"","ucode":"1DDB6FCA0788A5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612520,"discussion_content":"ä½ è¿™é‡Œæ²¡æœ‰å£°æ˜å°±ç›´æ¥è°ƒç”¨äº†Conversationå‡½æ•°ã€‚ä½ è¦åœ¨æ‰§è¡Œè¿™æ®µä»£ç ä¹‹å‰ï¼Œå…ˆæ‰§è¡Œä¸Šè¾¹é‚£ä¸ªclass Conversation:xxxxxxé‚£ä¸€æ®µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680766590,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371901,"user_name":"Zhang.Q.W","can_delete":false,"product_type":"c1","uid":2865804,"ip_address":"æ–°åŠ å¡","ucode":"3F8A2B4C143AB3","user_header":"https://static001.geekbang.org/account/avatar/00/2b/ba/8c/c57520b3.jpg","comment_is_top":false,"comment_ctime":1680508217,"is_pvip":false,"replies":[{"id":135707,"content":"çœ‹ä¸€ä¸‹æ˜¯åœ¨ä»€ä¹ˆç¯å¢ƒè¿è¡Œçš„ï¼Œå¯èƒ½éœ€è¦é‡å¯ä¸€ä¸‹jupyter notebookçš„kernelã€‚ç¯å¢ƒé—®é¢˜æœ€ç®€å•çš„æ–¹å¼æ˜¯çœ‹ä¸€ä¸‹åœ¨Colabä¸Šæ˜¯å¦å¯ä»¥è¿è¡Œï¼Œå¦‚æœå¯ä»¥çš„è¯ï¼Œå¤šåŠæ˜¯æœ¬åœ°ç¯å¢ƒå“ªé‡Œå¯åŠ¨çš„æ—¶å€™æ²¡æœ‰åˆ‡åˆ°åˆé€‚çš„envæˆ–è€…éœ€è¦é‡å¯ä¸€ä¸‹jupyter notebook","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680580999,"ip_address":"ä¸Šæµ·","comment_id":371901,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"è¯·æ•™ä¸€ä¸‹ï¼š\nè¿è¡Œæ—¶\nimport gradio as gr\n\næŠ¥é”™\nModuleNotFoundError: No module named &#39;gradio&#39;\n\nåœ¨è¿è¡Œ pip install gradio å’Œpip list ä¹Ÿå¯ä»¥æŸ¥çœ‹åˆ°gradioï¼Œåœ¨è¿è¡Œæ—¶ ä¾ç„¶æŠ¥é”™ModuleNotFoundError","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612206,"discussion_content":"çœ‹ä¸€ä¸‹æ˜¯åœ¨ä»€ä¹ˆç¯å¢ƒè¿è¡Œçš„ï¼Œå¯èƒ½éœ€è¦é‡å¯ä¸€ä¸‹jupyter notebookçš„kernelã€‚ç¯å¢ƒé—®é¢˜æœ€ç®€å•çš„æ–¹å¼æ˜¯çœ‹ä¸€ä¸‹åœ¨Colabä¸Šæ˜¯å¦å¯ä»¥è¿è¡Œï¼Œå¦‚æœå¯ä»¥çš„è¯ï¼Œå¤šåŠæ˜¯æœ¬åœ°ç¯å¢ƒå“ªé‡Œå¯åŠ¨çš„æ—¶å€™æ²¡æœ‰åˆ‡åˆ°åˆé€‚çš„envæˆ–è€…éœ€è¦é‡å¯ä¸€ä¸‹jupyter notebook","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680580999,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371871,"user_name":"æ™ºå‹‡åŒå…¨","can_delete":false,"product_type":"c1","uid":1335421,"ip_address":"å¹¿ä¸œ","ucode":"8A9931139D199A","user_header":"https://static001.geekbang.org/account/avatar/00/14/60/7d/adf4f7c3.jpg","comment_is_top":false,"comment_ctime":1680451586,"is_pvip":false,"replies":[{"id":135719,"content":"æŠŠéœ€è¦çš„ä»£ç æå–å‡ºæ¥ï¼Œå˜æˆä¸€ä¸ª.pyæ–‡ä»¶ï¼Œå°±å½“æˆä¸€ä¸ªæ™®é€šçš„pythonç¨‹åºå»éƒ¨ç½²å°±å¥½äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680581690,"ip_address":"ä¸Šæµ·","comment_id":371871,"utype":1}],"discussion_count":3,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"æƒ³éƒ¨ç½²åˆ°è‡ªå·±çš„è…¾è®¯äº‘ä¸Šè¯¥å¦‚ä½•æ“ä½œå‘¢","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612218,"discussion_content":"æŠŠéœ€è¦çš„ä»£ç æå–å‡ºæ¥ï¼Œå˜æˆä¸€ä¸ª.pyæ–‡ä»¶ï¼Œå°±å½“æˆä¸€ä¸ªæ™®é€šçš„pythonç¨‹åºå»éƒ¨ç½²å°±å¥½äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680581690,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1559128,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ca/58/6fe1854c.jpg","nickname":"é‡‘î„","note":"","ucode":"48D0B5CB8E5F9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613910,"discussion_content":"è…¾è®¯äº‘å¯ä»¥è®¿é—®å¤–ç½‘å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681597052,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ¹–å—","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1335421,"avatar":"https://static001.geekbang.org/account/avatar/00/14/60/7d/adf4f7c3.jpg","nickname":"æ™ºå‹‡åŒå…¨","note":"","ucode":"8A9931139D199A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1559128,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ca/58/6fe1854c.jpg","nickname":"é‡‘î„","note":"","ucode":"48D0B5CB8E5F9E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":615447,"discussion_content":"å¯ä»¥â†’_â†’","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1682263065,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":613910,"ip_address":"å¹¿ä¸œ","group_id":0},"score":615447,"extra":""}]}]},{"had_liked":false,"id":371702,"user_name":"zhihai.tu","can_delete":false,"product_type":"c1","uid":1045888,"ip_address":"ä¸Šæµ·","ucode":"61371EA3EF6988","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f5/80/baddf03b.jpg","comment_is_top":false,"comment_ctime":1680192551,"is_pvip":true,"replies":[{"id":135731,"content":"åº”è¯¥æ˜¯æˆ‘æ”¾çš„ä¸€ä¸ªå…è´¹çš„API Keyçš„é¢åº¦ç”¨å®Œäº†ã€‚\n\nè¿˜æ˜¯åœ¨æœ¬åœ°è·‘èµ·æ¥Gradioç”¨è‡ªå·±çš„Keyå§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680582527,"ip_address":"ä¸Šæµ·","comment_id":371702,"utype":1}],"discussion_count":10,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"è€å¸ˆå¥½ï¼Œhttps:&#47;&#47;huggingface.co&#47;spaces&#47;xuwenhao83&#47;simple_chatbotè¿™ä¸ªé“¾æ¥æˆ‘è¯•äº†ä¸‹ï¼Œå¥½åƒè¾“å…¥é—®é¢˜åæŒ‰å›è½¦æ²¡æœ‰ååº”ï¼Œæ˜¯ä»€ä¹ˆåŸå› å•Šï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612230,"discussion_content":"åº”è¯¥æ˜¯æˆ‘æ”¾çš„ä¸€ä¸ªå…è´¹çš„API Keyçš„é¢åº¦ç”¨å®Œäº†ã€‚\n\nè¿˜æ˜¯åœ¨æœ¬åœ°è·‘èµ·æ¥Gradioç”¨è‡ªå·±çš„Keyå§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680582527,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":3,"child_discussions":[{"author":{"id":3601762,"avatar":"https://static001.geekbang.org/account/avatar/00/36/f5/62/65f811cc.jpg","nickname":"é˜¿é˜®å‘€","note":"","ucode":"3B1D6E16BB917C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":614815,"discussion_content":"Gradioç”¨è‡ªå·±çš„Keyï¼Œä¹Ÿä¸€æ ·æŒ‰å›è½¦é”®æ²¡æœ‰ç»“æœï¼Œè¯·é—®æ˜¯ä»€ä¹ˆåŸå› å‘€ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681913853,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":612230,"ip_address":"åŒ—äº¬","group_id":0},"score":614815,"extra":""},{"author":{"id":2011138,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/b0/02/98f8b0ee.jpg","nickname":"æ–¹åElton","note":"","ucode":"180D03AADB5D2C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":3601762,"avatar":"https://static001.geekbang.org/account/avatar/00/36/f5/62/65f811cc.jpg","nickname":"é˜¿é˜®å‘€","note":"","ucode":"3B1D6E16BB917C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":618863,"discussion_content":"æˆ‘ä¹Ÿæ˜¯ï¼ŒåŒå­¦ä½ è§£å†³äº†å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684658440,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":614815,"ip_address":"ç¾å›½","group_id":0},"score":618863,"extra":""},{"author":{"id":2011138,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/b0/02/98f8b0ee.jpg","nickname":"æ–¹åElton","note":"","ucode":"180D03AADB5D2C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":618866,"discussion_content":"è€å¸ˆé‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯gradioåœ¨æœ¬åœ°pycharmä¸­è¿è¡Œï¼Œæœ€åçš„äº¤äº’ç•Œé¢ä¸€ç›´äº§ç”Ÿä¸äº†ç»“æœï¼Œç„¶ååœ¨colabä¸Šè¿è¡Œå°±å¯ä»¥è¿è¡Œã€‚ç–‘æƒ‘åŸå› æ˜¯ä»€ä¹ˆï¼Œæœ¬åœ°pycharmç¯å¢ƒä¸å®‰è£…gradioç•Œé¢å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œä½†æ˜¯åˆ°äº¤äº’ç•Œé¢ä¸Šå´ä¸èƒ½è¿è¡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684659794,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":612230,"ip_address":"è¾½å®","group_id":0},"score":618866,"extra":""}]},{"author":{"id":1023093,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9c/75/525e53b1.jpg","nickname":"Hobby","note":"","ucode":"8954830380D44F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":615283,"discussion_content":"æˆ‘ç”¨è€å¸ˆhttps://huggingface.co/spaces/xuwenhao83/simple_chatbot/blob/main/app.pyçš„å¯ä»¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1682165842,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1001745,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/49/11/75a31d88.jpg","nickname":"LunaElf","note":"","ucode":"22E002C13C6EF2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612185,"discussion_content":"æŒ‡å®š requirements.txt ä¸­çš„ openai ç‰ˆæœ¬ï¼Œä¾‹å¦‚ openai==0.27.2ã€‚å› ä¸º ChatCompletion åœ¨ 0.27.0 ç‰ˆæœ¬åŠä»¥ä¸Šæ‰æœ‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680573545,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1023093,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9c/75/525e53b1.jpg","nickname":"Hobby","note":"","ucode":"8954830380D44F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1001745,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/49/11/75a31d88.jpg","nickname":"LunaElf","note":"","ucode":"22E002C13C6EF2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":615281,"discussion_content":"è¿™ä¸ªä¸å¯¹çš„è¯ï¼ŒBuildingåº”è¯¥å°±failäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1682165496,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":612185,"ip_address":"ä¸Šæµ·","group_id":0},"score":615281,"extra":""}]},{"author":{"id":2160005,"avatar":"https://static001.geekbang.org/account/avatar/00/20/f5/85/5cd2ce4c.jpg","nickname":"ä»—å‰‘èµ°å¤©æ¶¯","note":"","ucode":"DC7E2484065C33","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611667,"discussion_content":"æˆ‘è¯•äº†ä¹Ÿæ˜¯åŒæ ·çš„é—®é¢˜ï¼ŒEnterä»¥åå°±é—ªä¸€ä¸‹ï¼Œæ²¡æœ‰ç»“æœï¼Œéº»çƒ¦è€å¸ˆå¸®å¿™çœ‹çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680230349,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å±±è¥¿","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1270612,"avatar":"https://static001.geekbang.org/account/avatar/00/13/63/54/84e7c168.jpg","nickname":"g4","note":"","ucode":"EFA0709EFDF4DE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2160005,"avatar":"https://static001.geekbang.org/account/avatar/00/20/f5/85/5cd2ce4c.jpg","nickname":"ä»—å‰‘èµ°å¤©æ¶¯","note":"","ucode":"DC7E2484065C33","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612788,"discussion_content":"æˆ‘ä¹Ÿæ˜¯ä¸€æ ·çš„é—®é¢˜ï¼Œåœ¨colabé‡Œæ˜¯OKçš„ï¼Œéƒ¨ç½²åˆ°huggingfaceä¸Šä¸è¡Œ  çœ‹æ—¥å¿— ä¹Ÿæ²¡æŠ¥é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680942069,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":611667,"ip_address":"å››å·","group_id":0},"score":612788,"extra":""},{"author":{"id":3579262,"avatar":"https://static001.geekbang.org/account/avatar/00/36/9d/7e/83524ccd.jpg","nickname":"ç‹å°¼ç›","note":"","ucode":"0F48004336502A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1270612,"avatar":"https://static001.geekbang.org/account/avatar/00/13/63/54/84e7c168.jpg","nickname":"g4","note":"","ucode":"EFA0709EFDF4DE","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":617542,"discussion_content":"çœ‹ä¸‹æ˜¯ä¸å¯¹åº”çš„conversionç±»ä¸å¯¹ï¼Œè€å¸ˆçš„æ•™ç¨‹é‡Œåˆ›å»ºè¿‡ä¸¤ä¸ªï¼Œæœ‰ä¸€ä¸ªä¼šè¿”å›ä¸¤ä¸ªå€¼ï¼šå›ç­”å’Œå¯¹åº”çš„tokenï¼Œ éœ€è¦ä½¿ç”¨é‚£ä¸ªåªreturnç­”æ¡ˆçš„conversionç±»ï¼Œæˆ‘é‡åˆ°çš„æ˜¯è¿™ä¸ªæƒ…å†µï¼Œå¯ä»¥çœ‹ä¸‹\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683638121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":612788,"ip_address":"åŒ—äº¬","group_id":0},"score":617542,"extra":""}]}]},{"had_liked":false,"id":371579,"user_name":"ä»£ç äº”èŠ±è‚‰","can_delete":false,"product_type":"c1","uid":3295685,"ip_address":"éŸ©å›½","ucode":"F7AAD5E7A15F7B","user_header":"https://static001.geekbang.org/account/avatar/00/32/49/c5/80c33529.jpg","comment_is_top":false,"comment_ctime":1680077174,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"è®¾ç½®ä¸€ä¸ªé˜ˆå€¼ï¼Œå¦‚æœè¶…è¿‡é˜ˆå€¼çš„è¯ï¼Œå°±è®©AIæ€»ç»“ä¸€ä¸‹ï¼Œé™å®šå­—æ•°ï¼Œç„¶åæ¸…ç©ºå¯¹è¯è®°å½•ï¼Œå‡å¦‚æ€»ç»“çš„è¿™æ®µè¯ä½œä¸ºè¿‡å¾€èŠå¤©è®°å½•å†ä¸€èµ·å‘é€ï¼Œç¼ºç‚¹æ˜¯è¦å¤šè°ƒç”¨APIï¼Œå¤šæ¶ˆè€—tokenã€‚","like_count":4},{"had_liked":false,"id":374212,"user_name":"Geek_b83fff","can_delete":false,"product_type":"c1","uid":2902752,"ip_address":"å¹¿ä¸œ","ucode":"AFA20C90BCBF02","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJaaRiaBo5xtYPib3az6lBtSG8ibebDUVGgSMRPD3nGn9hr0Iz8dDZXxMzsUV2M7uiaicBg9HdBxcSFic7g/132","comment_is_top":false,"comment_ctime":1683712294,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"æˆåŠŸè¿è¡Œï¼Œapp.py å’Œrequire.txtï¼› è€å¸ˆæ²¡æœ‰å±•å¼€è¯´æ˜ï¼Œä¸æ˜¯å¼€å‘äººå‘˜å¯èƒ½è¿™ä¸€æ­¥ä¼šå¡ä¸»","like_count":2,"discussions":[{"author":{"id":1452167,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcwXucibksEYRSYg6icjibzGa7efcMrCsGec2UwibjTd57icqDz0zzkEEOM2pXVju60dibzcnQKPfRkN9g/132","nickname":"Geek_93970d","note":"","ucode":"52AC308BEC7737","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":619340,"discussion_content":"requirements.txt é‡Œæ”¾ä¸Š openai","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1685003013,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1182967,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0c/f7/d6547adb.jpg","nickname":"åŠªåŠ›åŠªåŠ›å†åŠªåŠ›","note":"","ucode":"F71E16290CB58C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":619528,"discussion_content":"åªè¦è·Ÿä¸‹æ¥çš„ï¼Œåº”è¯¥æ²¡é—®é¢˜çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1685242455,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371557,"user_name":"å°æŒæŸœ","can_delete":false,"product_type":"c1","uid":2141953,"ip_address":"å±±ä¸œ","ucode":"D9C21E6690CF77","user_header":"https://static001.geekbang.org/account/avatar/00/20/af/01/44fb3104.jpg","comment_is_top":false,"comment_ctime":1680061614,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"æ²¡æœ‰è§†é¢‘å—ï¼Ÿ","like_count":1},{"had_liked":false,"id":394685,"user_name":"Mamba","can_delete":false,"product_type":"c1","uid":1475049,"ip_address":"æ¹–åŒ—","ucode":"8B3EC90736B8EB","user_header":"https://static001.geekbang.org/account/avatar/00/16/81/e9/d131dd81.jpg","comment_is_top":false,"comment_ctime":1727595744,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"ä½ èƒ½æ ¹æ®è¿™ä¸€è®²å­¦åˆ°çš„å†…å®¹ï¼Œä¿®æ”¹ä¸€ä¸‹ä»£ç ï¼Œè®©è¿™ä¸ªèŠå¤©æœºå™¨äººä¸é™åˆ¶è½®æ•°ï¼Œåªåœ¨ Token æ•°é‡è¦è¶…æ ‡çš„æ—¶å€™å†åˆ å‡æœ€å¼€å§‹çš„å¯¹è¯ä¹ˆï¼Ÿé™¤äº†â€œå¿˜è®°â€å¼€å§‹çš„å‡ è½®ï¼Œä½ è¿˜èƒ½æƒ³åˆ°ä»€ä¹ˆåŠæ³•è®© AI å°½å¯èƒ½å¤šåœ°è®°ä½ä¸Šä¸‹æ–‡å—ï¼Ÿ\næŠŠä¸¤ä¸ªéœ€æ±‚ä¸€èµ·è§£å†³ï¼Œé™åˆ¶tokensæ•°é‡ï¼Œå½“è¦è¶…æ ‡äº†çš„æ—¶å€™ï¼Œå°†å‰æ–‡å¯¹è¯æ€»ç»“å¹¶æ›¿æ¢æ‰ä¹‹å‰çš„å¯¹è¯ï¼Œç„¶åå°±å¯ä»¥ä½¿å¾—AIâ€œè®°ä½â€æ›´å¤šçš„ä¸Šä¸‹æ–‡ä¿¡æ¯\nclass Conversation:\n    def __init__(self, prompt, tokens):\n        self.prompt = prompt\n        self.instruct = &#39;è¯·ç”¨ç®€çŸ­çš„è¯æ€»ç»“ç›®å‰å¯¹è¯çš„æ‰€æœ‰å†…å®¹ã€‚&#39;\n        self.tokens = tokens\n        # self.num_of_round = num_of_round\n        self.messages = []\n        self.messages.append({&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: self.prompt})\n\n    def ask(self, question):\n        try:\n            self.messages.append({&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: question})\n            response = client.chat.completions.create(\n                model=&quot;gpt-4o-mini&quot;,\n                messages=self.messages,\n                temperature=0.5,\n                max_tokens=1024,\n                top_p=1,\n            )\n        except Exception as e:\n            print(e)\n            return e\n\n        message = response.choices[0].message.content\n        self.messages.append({&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: message})\n        # ç»Ÿè®¡tokens\n        num_of_tokens = response.usage.total_tokens\n\n        # å¦‚æœè¶…è¿‡ä¸€å®štokensé¢åº¦å°±æŠŠå‰é¢çš„å¯¹è¯æ€»ç»“å¹¶æ›¿æ¢\n        if num_of_tokens &gt; self.tokens:\n            self.messages.append({&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: self.instruct})\n            summary = response.choices[0].message.content\n            del self.messages[1:]\n            # print(summary)\n            self.messages.append({&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: summary})\n            \n        # if len(self.messages) &gt; self.num_of_round*2 + 1:  # sytem+n*(user+assistant)\n        #     del self.messages[1:3] #Remove the first round conversation left.\n        return message,num_of_tokens","like_count":0},{"had_liked":false,"id":394085,"user_name":"Mamba","can_delete":false,"product_type":"c1","uid":1475049,"ip_address":"ç¾å›½","ucode":"8B3EC90736B8EB","user_header":"https://static001.geekbang.org/account/avatar/00/16/81/e9/d131dd81.jpg","comment_is_top":false,"comment_ctime":1725776658,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"å¤ªæ£’äº†ï¼Œå‘å¸ƒäº†ç¬¬ä¸€ä¸ªå±äºè‡ªå·±çš„gptï¼è™½ç„¶åªæ˜¯ä¸€ä¸ªdemoï¼Œæ„Ÿè§‰å¾ˆå¤šåœ°æ–¹å¯ä»¥æ‹“å±•ï¼Œæ¯”å¦‚å¤–è§‚ç•Œé¢ï¼Œä¸Šä¸‹æ–‡é•¿åº¦ï¼Œè°ƒç”¨å¤–éƒ¨æ¥å£â€¦â€¦å¼€å§‹åœ¨è‡ªå·±æœ¬åœ°æµ‹è¯•æ€»æ˜¯ä¸è¡Œï¼Œä¸çŸ¥é“æ˜¯ä»£ç†å“ªé‡Œæ²¡è®¾ç½®æ­£ç¡®ï¼Œä½†éƒ¨ç½²ä¹‹åå°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ï¼","like_count":0},{"had_liked":false,"id":393368,"user_name":"æ—æ™¨æ™¨","can_delete":false,"product_type":"c1","uid":2363025,"ip_address":"å¹¿ä¸œ","ucode":"E81CFAA2240F1A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKuAaicIfRL8yyG4MZ64DoBhFrJS2TXAYs4hS8ibicoAHlSt3wx7xKMEloncnjgWbwzGqCq3IENvOvWw/132","comment_is_top":false,"comment_ctime":1723610790,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"æˆ‘èƒ½ä¸èƒ½è®©aiå¸®å¿™æŠŠæ‰€æœ‰çš„å¯¹è¯æ¦‚æ‹¬å†™ä¸€ä¸‹ï¼Œç„¶åå†é‡æ–°å–‚åˆ°æç¤ºä¸­å»ï¼Ÿ","like_count":0},{"had_liked":false,"id":386960,"user_name":"Geek_19eca2","can_delete":false,"product_type":"c1","uid":1655161,"ip_address":"æµ™æ±Ÿ","ucode":"7A910AB1386532","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLAD2YLZnuaicxibvPo6SEC3VoZ9Yra2g7HXDeqkWodb4nUvfRkhaOJxechJjUHBib4Ih1ryymCOW7AkQ/132","comment_is_top":false,"comment_ctime":1706001496,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"You tried to access openai.ChatCompletion, but this is no longer supported in openai&gt;=1.0.0 - see the README at https:&#47;&#47;github.com&#47;openai&#47;openai-python for the API.  è¿™ä¸ªé”™è¯¯æ€ä¹ˆè§£å†³ï¼Ÿ \n","like_count":0},{"had_liked":false,"id":386143,"user_name":"æ¨é€¸æ—","can_delete":false,"product_type":"c1","uid":1167233,"ip_address":"æµ™æ±Ÿ","ucode":"4BF3CF3E2F1AC7","user_header":"https://static001.geekbang.org/account/avatar/00/11/cf/81/96f656ef.jpg","comment_is_top":false,"comment_ctime":1704187671,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"æœ€æ–°çš„ ChatGPT è°ƒç”¨å·²ç»æ”¹äº†ï¼Œæ€»çš„ä»£ç æ¢æˆæˆ‘ä¸‹é¢è¿™ä¸ªã€‚ä¸ç„¶ç”¨æ–°çš„ openai çš„ API ä¼šæŠ¥é”™ã€‚\n\n```python\nimport gradio as gr\nfrom openai import OpenAI\nimport os\n\n\napi_key = os.environ.get(&quot;OPENAI_API_KEY&quot;)\nclient = OpenAI(api_key=api_key)\n\nclass Conversation:\n    def __init__(self, prompt, num_of_round):\n        self.prompt = prompt\n        self.num_of_round = num_of_round\n        self.messages = []\n        self.messages.append({&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: self.prompt})\n\n    def ask(self, question):\n        try:\n            self.messages.append({&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: question})\n            completion = client.chat.completions.create(\n                model=&quot;gpt-3.5-turbo&quot;,\n                messages=self.messages,\n                temperature=0.5,\n                max_tokens=2048,\n                top_p=1,\n            )\n        except Exception as e:\n            print(e)\n            return e\n\n        message = completion.choices[0].message.content\n        self.messages.append({&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: message})\n\n        if len(self.messages) &gt; self.num_of_round*2 + 1:\n            del self.messages[1:3]\n        return message\n\n\n\nprompt = &quot;&quot;&quot;ä½ æ˜¯ä¸€ä¸ªä¸­å›½å¨å¸ˆï¼Œç”¨ä¸­æ–‡å›ç­”åšèœçš„é—®é¢˜ã€‚ä½ çš„å›ç­”éœ€è¦æ»¡è¶³ä»¥ä¸‹è¦æ±‚:\n1. ä½ çš„å›ç­”å¿…é¡»æ˜¯ä¸­æ–‡\n2. å›ç­”é™åˆ¶åœ¨100ä¸ªå­—ä»¥å†…&quot;&quot;&quot;\n\nconv = Conversation(prompt, 10)\n\ndef answer(question, history=[]):\n    history.append(question)\n    response = conv.ask(question)\n    history.append(response)\n    responses = [(u,b) for u,b in zip(history[::2], history[1::2])]\n    return responses, history\n\nwith gr.Blocks(css=&quot;#chatbot{height:300px} .overflow-y-auto{height:500px}&quot;) as demo:\n    chatbot = gr.Chatbot(elem_id=&quot;chatbot&quot;)\n    state = gr.State([])\n\n    with gr.Row():\n        txt = gr.Textbox(show_label=False, placeholder=&quot;Enter text and press enter&quot;)\n\n    txt.submit(answer, [txt, state], [chatbot, state])\n\ndemo.launch()\n```","like_count":0},{"had_liked":false,"id":384514,"user_name":"ShawnWu","can_delete":false,"product_type":"c1","uid":1253140,"ip_address":"åŒ—äº¬","ucode":"A3E8397FDD20D6","user_header":"https://static001.geekbang.org/account/avatar/00/13/1f/14/57cb7926.jpg","comment_is_top":false,"comment_ctime":1701078795,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":1,"score":5,"product_id":100541001,"comment_content":"ç°åœ¨api keyéƒ½è·å–ä¸åˆ°äº†ï¼Œå’‹æ•´å•Š","like_count":0},{"had_liked":false,"id":381082,"user_name":"æ«","can_delete":false,"product_type":"c1","uid":1698770,"ip_address":"å¹¿ä¸œ","ucode":"759FC1885B07A5","user_header":"https://static001.geekbang.org/account/avatar/00/19/eb/d2/3d51e170.jpg","comment_is_top":false,"comment_ctime":1694658315,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"æˆ‘ä»¬åªéœ€è¦é€šè¿‡ Git æŠŠå½“å‰ space ä¸‹è½½ä¸‹æ¥ï¼Œç„¶åæäº¤ä¸¤ä¸ªæ–‡ä»¶\nå„ä½å¤§ä½¬ï¼Œæœ‰äººçŸ¥é“git cloneç©ºé—´æ˜¯åœ¨å“ªé‡Œæ—©é”™å—ï¼Œç”µè„‘çš„ç»ˆç«¯ï¼Œè¿˜æ˜¯colabï¼ˆæˆ‘ä¸€ç›´åœ¨ç”¨colabï¼‰\nä»¥åŠæäº¤ä¸¤ä¸ªæ–‡ä»¶æ˜¯åœ¨å“ªæ“ä½œå‘¢ï¼Ÿï¼ˆæˆ‘ç†è§£ä¹Ÿæ˜¯colabï¼‰","like_count":0},{"had_liked":false,"id":379535,"user_name":"jeff","can_delete":false,"product_type":"c1","uid":1026894,"ip_address":"æ²³åŒ—","ucode":"68456DD035BDF4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ab/4e/82e9657c.jpg","comment_is_top":false,"comment_ctime":1692077453,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"gradio æ˜¯å“ªä¸ªç‰ˆæœ¬ï¼Œç›®å‰å®‰è£…çš„3.23.0ï¼Œæ€»æ˜¯æç¤ºï¼šRuntimeError: Attempted to use SOCKS support, but the `socksio` package is not installed. Use &#39;pip install httpcore[socks]&#39;.\n","like_count":0},{"had_liked":false,"id":377868,"user_name":"Qweasd","can_delete":false,"product_type":"c1","uid":3003302,"ip_address":"å¹¿ä¸œ","ucode":"1157FC1EE1E9B4","user_header":"https://static001.geekbang.org/account/avatar/00/2d/d3/a6/cb3d35fc.jpg","comment_is_top":false,"comment_ctime":1689408630,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"ä¸ºä»€ä¹ˆé‚£ä¸ªèŠå¤©ç•Œé¢ï¼ŒæŒ‰å›è½¦éƒ½æ²¡ååº”çš„","like_count":0},{"had_liked":false,"id":377708,"user_name":"å°ç†æƒ³ã€‚","can_delete":false,"product_type":"c1","uid":2238528,"ip_address":"åŒ—äº¬","ucode":"EDC35A907570DB","user_header":"https://static001.geekbang.org/account/avatar/00/22/28/40/82d748e6.jpg","comment_is_top":false,"comment_ctime":1689066395,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"colabå¿«é€Ÿå¼€å‘å°å°çš„æœºå™¨äººï¼Œèµ","like_count":0},{"had_liked":false,"id":377238,"user_name":"è®¸ç›Š","can_delete":false,"product_type":"c1","uid":3010834,"ip_address":"æ±Ÿè‹","ucode":"FEECA2203E5A52","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoToJnYyiaCt3iaNnmiaN4dYzoAymt4WR9FibQAqdhdseicX8mwibqCqSSwhBOSicLFEwVuEsGEb6ZrNq1Mg/132","comment_is_top":false,"comment_ctime":1688115447,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"è¯·é—®ä¸€ä¸‹ï¼Œæœ¬åœ°èµ·gradioï¼Œchromeæµè§ˆå™¨æ‰“å¼€èŠå¤©äº¤äº’é¡µé¢æ²¡é—®é¢˜ã€‚ä½†æ˜¯è¿›è¡ŒèŠå¤©æ—¶ï¼Œæˆ‘è¾“å…¥â€œä½ å¥½â€æŠ¥é”™ï¼Œé”™è¯¯æ˜¯ï¼šFileNotFoundError: [Errno 2] No such file or directory: &#39;ä½ å¥½ï¼æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å‘¢ï¼Ÿ&#39;ã€‚ä¹Ÿå°±æ˜¯gptå·²ç»å›å¤ï¼šä½ å¥½ï¼æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å‘¢ã€‚ä½†æ˜¯gradioå¹¶æ²¡æœ‰æ­£å¸¸è¿”å›ç­”æ¡ˆã€‚è€å¸ˆå¯ä»¥å¸®å¿™çœ‹çœ‹å…·ä½“ä»€ä¹ˆåŸå› å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1052643,"avatar":"https://static001.geekbang.org/account/avatar/00/10/0f/e3/c49aa508.jpg","nickname":"é²¸é±¼","note":"","ucode":"71437C1C601040","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":622479,"discussion_content":"çœ‹ä¸€ä¸‹ä½ çš„Conversationç±»çš„askå‡½æ•°è¿”å›å€¼ï¼Œæ˜¯ä¸æ˜¯å¤šè¿”å›äº†ä¸¤ä¸ªç»“æœ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1688310611,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ—¥æœ¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":377171,"user_name":"è®¸ç›Š","can_delete":false,"product_type":"c1","uid":3010834,"ip_address":"æ±Ÿè‹","ucode":"FEECA2203E5A52","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoToJnYyiaCt3iaNnmiaN4dYzoAymt4WR9FibQAqdhdseicX8mwibqCqSSwhBOSicLFEwVuEsGEb6ZrNq1Mg/132","comment_is_top":false,"comment_ctime":1688024407,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"è¿™è¯¾ç¨‹è¶Šå­¦è¶Šä¸Šå¤´ï¼Œå¾ˆä¹…æ²¡æœ‰è¿™æ ·çš„å……ç”µä½“éªŒäº†ï¼","like_count":0},{"had_liked":false,"id":376278,"user_name":"whhbbq","can_delete":false,"product_type":"c1","uid":1018494,"ip_address":"æµ™æ±Ÿ","ucode":"4A93F3E375CB44","user_header":"","comment_is_top":false,"comment_ctime":1686638159,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"æˆåŠŸè¿è¡Œã€‚ä½†ä¸€ä¸ªé—®é¢˜30sæ‰å“åº”ï¼Œå´©æºƒ","like_count":0},{"had_liked":false,"id":376249,"user_name":"å¼ å†¶å›½","can_delete":false,"product_type":"c1","uid":2038954,"ip_address":"åŒ—äº¬","ucode":"45088436A0CE65","user_header":"https://static001.geekbang.org/account/avatar/00/1f/1c/aa/b3440242.jpg","comment_is_top":false,"comment_ctime":1686587224,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100541001,"comment_content":"è€å¸ˆå¥½ï¼Œå¼€å¯stream=Trueçš„æ—¶å€™ï¼Œä½¿ç”¨tiktokenè®¡ç®—tokenæ•°çš„æ—¶å€™ä¼šè¿”å›&#39;generator&#39;Â objectÂ isÂ notÂ subscriptableï¼Œæˆ‘æ—¢æƒ³è¦ä¿æŒæµå¼è¿”å›ï¼Œä¹Ÿæƒ³è¦è®¡ç®—tokenæ•°è¯¥å¦‚ä½•è§£å†³ï¼Ÿè°¢è°¢è€å¸ˆè§£ç­”","like_count":0},{"had_liked":false,"id":375972,"user_name":"auscará¶˜ áµ’á´¥áµ’á¶…","can_delete":false,"product_type":"c1","uid":1073756,"ip_address":"å¹¿ä¸œ","ucode":"639D40557863BE","user_header":"https://static001.geekbang.org/account/avatar/00/10/62/5c/550fb243.jpg","comment_is_top":false,"comment_ctime":1686194958,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":6,"product_id":100541001,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ç”¨çš„æ˜¯Azureçš„openaiæœåŠ¡ï¼Œå³ä½¿ç”¨äº†æµå¼è¿”å›ï¼Œæ•°æ®æœ€å¿«ä¹Ÿè¦ 3ï½7 ç§’çš„æ—¶å€™æ‰èƒ½è¿”å›ç»“æœï¼Œè¿™ä¸ªé—®é¢˜æœ‰åŠæ³•æ”¹å–„å—ï¼Ÿä»¥å‰æˆ‘ç›´æ¥è°ƒç”¨openaiçš„apiæ—¶ï¼Œå¤§æ¦‚æ˜¯1ï½2ç§’å°±èƒ½è¿”å›ç»“æœ","like_count":0,"discussions":[{"author":{"id":2120663,"avatar":"https://static001.geekbang.org/account/avatar/00/20/5b/d7/d88c1850.jpg","nickname":"å’ŒæŸæ¬¢","note":"","ucode":"5E0F27533597F1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":620538,"discussion_content":"åŒé—®ï¼Œazureæœ‰æ—¶å€™å“åº”è¶…è¿‡30ç§’","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1686273255,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å››å·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":375519,"user_name":"Geek_7ee455","can_delete":false,"product_type":"c1","uid":1527581,"ip_address":"æµ™æ±Ÿ","ucode":"76C69F26B0F653","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/270T9KAFd4oCxXXB1giaMDaJuTQVib8gPt77VkM5dbS3hW60kwTNnxMYpVibwWVdnASCrymBbwT7HI77URia0KUylw/132","comment_is_top":false,"comment_ctime":1685590001,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100541001,"comment_content":"ç°åœ¨å¥½åƒèƒ½è®°å¿†çš„å¯¹è¯è½®æ¬¡å˜å¤šäº†å¾ˆå¤š","like_count":0},{"had_liked":false,"id":375137,"user_name":"Geek_93970d","can_delete":false,"product_type":"c1","uid":1452167,"ip_address":"åŒ—äº¬","ucode":"52AC308BEC7737","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcwXucibksEYRSYg6icjibzGa7efcMrCsGec2UwibjTd57icqDz0zzkEEOM2pXVju60dibzcnQKPfRkN9g/132","comment_is_top":false,"comment_ctime":1684975174,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100541001,"comment_content":"That model is currently overloaded with other requests. You can retry your request, or contact us through our help center at help.openai.com if the error persists. (Please include the request ID 5ba226322800e158aeeb81b25ccfa933 in your message.)","like_count":0},{"had_liked":false,"id":372770,"user_name":"é‡‘î„","can_delete":false,"product_type":"c1","uid":1559128,"ip_address":"æ¹–å—","ucode":"48D0B5CB8E5F9E","user_header":"https://static001.geekbang.org/account/avatar/00/17/ca/58/6fe1854c.jpg","comment_is_top":false,"comment_ctime":1681605387,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100541001,"comment_content":"æ­å¥½äº† ä½†æ˜¯å¥½åƒç”¨äº†å‡ æ¬¡å°±ç”¨ä¸äº†äº† çœ‹æ¥è¿˜å¾—æ‰¾å¹³æ›¿","like_count":0},{"had_liked":false,"id":371939,"user_name":"LunaElf","can_delete":false,"product_type":"c1","uid":1001745,"ip_address":"æµ™æ±Ÿ","ucode":"22E002C13C6EF2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/11/75a31d88.jpg","comment_is_top":false,"comment_ctime":1680533845,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":6,"product_id":100541001,"comment_content":"question4 å’Œ question5 çš„å›ç­”éƒ½æ˜¯ã€Œä½ çš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ï¼šâ€œè¯·é—®é±¼é¦™è‚‰ä¸æ€ä¹ˆåšï¼Ÿâ€ã€\n\næœ‰ä¸€å®šçš„å‡ ç‡ä¼šè¿™ä¹ˆå›ç­”ã€‚","like_count":0,"discussions":[{"author":{"id":3579262,"avatar":"https://static001.geekbang.org/account/avatar/00/36/9d/7e/83524ccd.jpg","nickname":"ç‹å°¼ç›","note":"","ucode":"0F48004336502A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":617540,"discussion_content":"å¯¹ï¼Œæˆ‘ä¹Ÿæ˜¯è¿™æ ·çš„æƒ…å†µï¼Œæ„Ÿè§‰æ˜¯å› ä¸ºä¸Šä¸‹æ–‡é‡Œæœ‰ä¸€æ ·çš„é—®é¢˜ï¼Œgptå°±åœ¨ä¸Šä¸‹æ–‡é‡Œæ‰¾åˆ°å¯¹åº”çš„ç­”æ¡ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683637761,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371866,"user_name":"Rocky_zd","can_delete":false,"product_type":"c1","uid":3014658,"ip_address":"å¹¿ä¸œ","ucode":"2C0629236B1884","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ6a62xdMTZ3jibIoWGRj3trQIB3LAXNA6CNHRWszMdJpkGfXdANm7TLD4d8StZRw90OQ43sIEMx1A/132","comment_is_top":false,"comment_ctime":1680446899,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100541001,"comment_content":"ä½œä¸ºä¸€ä¸ªé—¨å¤–æ±‰ï¼Œè·Ÿç€è€å¸ˆèƒ½æŠŠä¾‹å­å®ç°å‡ºæ¥ï¼Œè›®å¥½ç©çš„","like_count":0}]}