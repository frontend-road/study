{"id":179675,"title":"27 | å·¨äººçš„è‚©è†€ï¼šé‚£äº›ä½ ä¸èƒ½å¿½è§†çš„å¼€æºå·¥å…·","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯çŸ³é›ªå³°ã€‚</p><p>è‡ªç ”å·¥å…·å¹³å°å¯¹å…¬å¸æ¥è¯´æ˜¯ä¸€ä»¶é«˜æˆæœ¬å’Œé«˜æŠ•å…¥çš„äº‹æƒ…ï¼Œå¯¹äºæŠ€æœ¯äººå‘˜çš„è¦æ±‚ä¹Ÿéå¸¸é«˜ã€‚å¾ˆå°‘æœ‰å…¬å¸èƒ½å¤ŸåƒBATä¸€æ ·æŠ•å…¥è¿‘ç™¾äººçš„å›¢é˜Ÿæ¥å¼€å‘å†…éƒ¨ç³»ç»Ÿå·¥å…·ï¼Œæ¯•ç«Ÿï¼Œå¦‚æœæ²¡æœ‰è¿™ä¹ˆå¤§è§„æ¨¡çš„å›¢é˜Ÿï¼Œå¹³å°äº§ç”Ÿçš„æ”¶ç›Šä¹Ÿæ¯”è¾ƒæœ‰é™ã€‚</p><p>å¦å¤–ï¼Œä¹Ÿå¾ˆå°‘æœ‰å…¬å¸åƒä¸€äº›è¡Œä¸šå¤´éƒ¨å…¬å¸ä¸€æ ·ï¼Œä¼šç›´æ¥æŠ•å…¥å¤§é‡èµ„é‡‘è´­ä¹°æˆç†Ÿçš„å•†ä¸šåŒ–å·¥å…·æˆ–è€…é€šè¿‡ä¹™æ–¹åˆä½œçš„æ–¹å¼è”åˆå…±å»ºã€‚</p><p>è¿™äº›æ–¹æ³•çš„é•¿æœŸæŠ•å…¥éƒ½æ¯”è¾ƒå¤§ï¼Œä¸å¤ªé€‚ç”¨äºä¸­å°å‹ä¼ä¸šã€‚é‚£ä¹ˆï¼Œæœ‰å…¶ä»–å¯ä»¥ä½æˆæœ¬ã€å¿«é€Ÿè§æ•ˆçš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿ</p><p>å®é™…ä¸Šï¼Œç°åœ¨çš„å¼€æºå·¥å…·å·²ç»éå¸¸æˆç†Ÿäº†ï¼Œåªè¦ç¨åŠ ç†Ÿæ‚‰ï¼Œå°±èƒ½å¿«é€Ÿåœ°åŸºäºå¼€æºå·¥å…·æ­å»ºä¸€æ•´å¥—ç ”å‘äº¤ä»˜å·¥å…·é“¾å¹³å°ã€‚</p><p>å‡ å¹´å‰ï¼Œæˆ‘è·Ÿå‡ ä¸ªæœ‹å‹åˆ©ç”¨ä¸šä½™æ—¶é—´å°±æ­å»ºäº†è¿™æ ·ä¸€å¥—å¼€æºçš„ç«¯åˆ°ç«¯æµæ°´çº¿è§£å†³æ–¹æ¡ˆã€‚æˆ‘ä¾ç¨€è®°å¾—ï¼Œè¿™ä¸ªè§£å†³æ–¹æ¡ˆæ¶æ„å›¾æ˜¯åœ¨åŒ—äº¬å¼€å¾€ä¸Šæµ·çš„é«˜é“ä¸Šå®Œæˆçš„ã€‚ç›®å‰ï¼Œè¿™ä¸ªæ–¹æ¡ˆåœ¨è¡Œä¸šå†…å¹¿ä¸ºæµä¼ ï¼Œæˆä¸ºäº†å¾ˆå¤šå…¬å¸æ­å»ºè‡ªå·±å†…éƒ¨å·¥å…·é“¾å¹³å°çš„å‚è€ƒèµ„æ–™ã€‚è¿™ä¸ªç³»ç»Ÿçš„æ¶æ„å›¾å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/54/65/540e6527c7e2d54d0e33abc591349a65.png?wh=1759*1080\" alt=\"\"></p><p>ä»Šå¤©ï¼Œæˆ‘ä¼šåŸºäºè¿™ä¸ªè§£å†³æ–¹æ¡ˆï¼Œç»™ä½ ä»‹ç»ä¸€ä¸‹ç ”å‘ä»£ç æäº¤é˜¶æ®µã€é›†æˆæµ‹è¯•é˜¶æ®µå’Œéƒ¨ç½²å‘å¸ƒé˜¶æ®µçš„å·¥å…·ä½¿ç”¨æŠ€å·§ï¼Œå·¥å…·é€‰å‹ä»¥ä¸»æµå¼€æºè§£å†³æ–¹æ¡ˆä¸ºä¸»ï¼Œå•†ä¸šå·¥å…·ä¸ºè¾…ï¼Œæ¶µç›–äº†Jiraã€GitLabã€Jenkinsã€SonarQubeå’ŒKubernetesç­‰ï¼Œå¸Œæœ›å¯ä»¥æ‰‹æŠŠæ‰‹åœ°å¸®åŠ©ä½ å¿«é€Ÿæ­å»ºä¸€å¥—å®Œæ•´çš„æŒç»­äº¤ä»˜å¹³å°ã€‚</p><!-- [[[read_end]]] --><p><strong>å¯¹äºæŒç»­äº¤ä»˜å·¥å…·é“¾ä½“ç³»æ¥è¯´ï¼Œå·¥å…·çš„è¿é€šæ€§æ˜¯æ ¸å¿ƒè¦ç´ </strong>ï¼Œæ‰€ä»¥æˆ‘ä¸ä¼šèŠ±å¤ªå¤šæ—¶é—´ä»‹ç»å·¥å…·åº”è¯¥å¦‚ä½•æ­å»ºï¼Œæ¯•ç«Ÿè¿™ç±»èµ„æ–™æœ‰å¾ˆå¤šï¼Œæˆ–è€…ï¼Œä½ å‚è€ƒä¸€ä¸‹å®˜ç½‘çš„æ­å»ºæ–‡æ¡£å°±å¯ä»¥äº†ã€‚å°¤å…¶æ˜¯ç°åœ¨å¾ˆå¤šå·¥å…·éƒ½æä¾›äº†å®¹å™¨åŒ–çš„éƒ¨ç½²æ–¹å¼ï¼Œè¿›ä¸€æ­¥ç®€åŒ–äº†è‡ªèº«å·¥å…·çš„å»ºè®¾æˆæœ¬ã€‚</p><h2>éœ€æ±‚ç®¡ç† - Jira</h2><p>åœ¨Jiraå®˜ç½‘ä¸Šçš„é†’ç›®ä½ç½®ï¼Œå†™ç€ä¸€å¥è¯ï¼š<strong>æ•æ·å¼€å‘å·¥å…·çš„ç¬¬ä¸€é€‰æ‹©</strong>ã€‚åœ¨æˆ‘çœ‹æ¥ï¼ŒAtlassianå…¬å¸çš„ç¡®æœ‰è¿™ä¸ªåº•æ°”ï¼Œå› ä¸º<strong>Jiraç¡®å®è¶³å¤Ÿä¼˜ç§€ï¼Œè·ŸConfluenceçš„ç»„åˆå‡ ä¹å·²ç»æˆä¸ºäº†å¾ˆå¤šä¼ä¸šçš„æ ‡é…</strong>ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘æ²¡æœ‰é€‰æ‹©å¼€æºå·¥å…·Redmineæˆ–è€…å…¶ä»–è¯¸å¦‚Teambitionç­‰çš„SaaSåŒ–æœåŠ¡ã€‚</p><p>å½“ç„¶ï¼Œè¿‘äº›å¹´æ¥ï¼Œå„å¤§å‚å•†ä¹Ÿåœ¨ç§¯æåœ°å¯¹å¤–è¾“å‡ºç ”å‘å·¥å…·èƒ½åŠ›ï¼Œä»¥è…¾è®¯çš„TAPDä¸ºä»£è¡¨çš„æ•æ·ååŒå¼€å‘å·¥å…·ï¼Œå°±ä½¿ç”¨å¾—éå¸¸å¹¿æ³›ã€‚ä½†æ˜¯ï¼Œå…¶å®äº§å“çš„æ€è·¯éƒ½å¤§åŒå°å¼‚ï¼Œæå®šäº†Jiraï¼Œå…¶ä»–å·¥å…·åŸºæœ¬ä¹Ÿå°±ä¸åœ¨è¯ä¸‹äº†ã€‚</p><p>ä½œä¸ºæ•æ·ååŒå·¥å…·ï¼ŒJiraæ–°å»ºå·¥ç¨‹å¯ä»¥é€‰æ‹©å›¢é˜Ÿçš„ç ”å‘æ¨¡å¼æ˜¯åŸºäºScrumï¼Œè¿˜æ˜¯çœ‹æ¿æ–¹æ³•ï¼Œä½ å¯ä»¥æŒ‰éœ€é€‰æ‹©ã€‚åœ¨ä¸“æ çš„<a href=\"https://time.geekbang.org/column/article/156884\">ç¬¬8è®²</a>å’Œ<a href=\"https://time.geekbang.org/column/article/158789\">ç¬¬9è®²</a>ä¸­ï¼Œæˆ‘ç»™ä½ ä»‹ç»äº†ç²¾ç›Šçœ‹æ¿ï¼Œä½ å®Œå…¨å¯ä»¥åœ¨Jiraä¸­å®šåˆ¶è‡ªå·±å›¢é˜Ÿçš„å¯è§†åŒ–çœ‹æ¿ã€‚</p><p>çœ‹æ¿çš„é…ç½®è¿‡ç¨‹å¹¶ä¸å¤æ‚ï¼Œæˆ‘æŠŠå®ƒæ•´ç†æˆäº†æ–‡æ¡£ï¼Œä½ å¯ä»¥ç‚¹å‡»ç½‘ç›˜<a href=\"https://pan.baidu.com/s/1SAmWYv7WeYgM6yZSRs5nag\">é“¾æ¥</a>è·å–ï¼Œæå–ç æ˜¯mrtdã€‚éœ€è¦æé†’ä½ çš„ä¸€ç‚¹æ˜¯ï¼š<strong>åˆ«å¿˜äº†æ·»åŠ WIPåœ¨åˆ¶å“çº¦æŸï¼Œåˆ«è®©ä½ çš„ç²¾ç›Šçœ‹æ¿å˜æˆäº†å¯è§†åŒ–çœ‹æ¿</strong>ã€‚</p><p>éœ€æ±‚ä½œä¸ºä¸€åˆ‡å¼€å‘å·¥ä½œçš„èµ·ç‚¹ï¼Œæ˜¯è´¯ç©¿æ•´ä¸ªç ”å‘å·¥ä½œçš„é‡è¦æŠ“æ‰‹ã€‚<strong>å¯¹äºJiraæ¥è¯´ï¼Œé‡ç‚¹æ˜¯è¦å®ç°è·Ÿç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå’Œå¼€å‘è€…å·¥å…·çš„æ‰“é€š</strong>ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ†åˆ«æ¥çœ‹ä¸‹åº”è¯¥å¦‚ä½•å®ç°ã€‚</p><p>å¦‚æœä½ ä¹Ÿåœ¨ä½¿ç”¨ç‰¹æ€§åˆ†æ”¯å¼€å‘æ¨¡å¼ï¼Œä½ åº”è¯¥çŸ¥é“ï¼Œä¸€ä¸ªç‰¹æ€§å°±å¯¹åº”åˆ°ä¸€ä¸ªJiraä¸­çš„ä»»åŠ¡ã€‚é€šè¿‡ä»»åŠ¡æ¥åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼Œå¹¶ä¸”å°†æ‰€æœ‰åˆ†æ”¯ä¸Šçš„æäº¤ç»‘å®šåˆ°å…·ä½“ä»»åŠ¡ä¸Šï¼Œä»è€Œå»ºç«‹æ¸…æ™°çš„ç‰¹æ€§ä»£ç å…³è”ã€‚æˆ‘ç»™ä½ æ¨èä¸¤ç§å®ç°æ–¹å¼ã€‚</p><p>ç¬¬ä¸€ç§æ–¹å¼æ˜¯åŸºäºJiraæä¾›çš„åŸç”Ÿæ’ä»¶ï¼Œæ¯”å¦‚ <a href=\"https://marketplace.atlassian.com/apps/4984/git-integration-for-jira\">Git Integration for Jira</a>ã€‚è¿™ä¸ªæ’ä»¶é…ç½®èµ·æ¥éå¸¸ç®€å•ï¼Œä½ åªéœ€è¦æ·»åŠ ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„åœ°å€å’Œè®¤è¯æ–¹å¼å³å¯ã€‚ç„¶åï¼Œä½ å°±å¯ä»¥åœ¨Jiraä¸Šè¿›è¡ŒæŸ¥çœ‹æäº¤ä¿¡æ¯ã€å¯¹æ¯”å·®å¼‚ã€åˆ›å»ºåˆ†æ”¯å’ŒMRç­‰æ“ä½œã€‚ä½†æ˜¯è¿™ä¸ªæ’ä»¶å±äºæ”¶è´¹ç‰ˆæœ¬ï¼Œä½ å¯ä»¥å…è´¹ä½¿ç”¨30å¤©ï¼Œåˆ°æœŸæ›´æ–°å³å¯ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/16/d9/1641afb86fdb0872d0b83e893a4803d9.png?wh=1404*687\" alt=\"\"></p><p>ç¬¬äºŒç§æ–¹å¼ï¼Œå°±æ˜¯<strong>ä½¿ç”¨Jiraå’ŒGitLabçš„Webhookè¿›è¡Œæ‰“é€š</strong>ã€‚</p><p>é¦–å…ˆï¼Œä½ è¦åœ¨GitLabé¡¹ç›®çš„â€œè®¾ç½® - é›†æˆâ€ä¸­æ‰¾åˆ°Jiraé€‰é¡¹ï¼ŒæŒ‰ä¸‹å›¾æ·»åŠ ç›¸åº”é…ç½®å³å¯ã€‚é…ç½®å®Œæˆä¹‹åï¼Œä½ åªéœ€è¦åœ¨æäº¤æ³¨é‡Šä¸­æ·»åŠ ä¸€ä¸ªJiraçš„ä»»åŠ¡IDï¼Œå°±å¯ä»¥å®ç°Jiraä»»åŠ¡å’Œä»£ç æäº¤çš„å…³è”ï¼Œè¿™äº›å…³è”ä½“ç°åœ¨Jiraä»»åŠ¡çš„Issue linkséƒ¨åˆ†ã€‚</p><p>å¦å¤–ï¼Œä½ ä¹Ÿå¯ä»¥å®ç°Jiraä»»åŠ¡çš„çŠ¶æ€è‡ªåŠ¨æµè½¬æ“ä½œï¼Œæ— éœ€æ‰‹åŠ¨ç§»åŠ¨ä»»åŠ¡å¡ç‰‡ã€‚æˆ‘ç»™ä½ æä¾›ä¸€ä»½  <a href=\"http://confluence.gjingao.com/pages/viewpage.action?pageId=6520911\">é…ç½®è¯´æ˜</a>  ï¼Œä½ å¯ä»¥å‚è€ƒä¸€ä¸‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/55/48/55e7b81af5f2f96e124493e3d36d9648.png?wh=752*498\" alt=\"\"></p><p>ä¸è¿‡ï¼Œå¦‚æœåªæ˜¯è¿™æ ·çš„è¯ï¼Œè¿˜ä¸èƒ½å®ç°æ ¹æ®Jiraä»»åŠ¡æ¥è‡ªåŠ¨åˆ›å»ºåˆ†æ”¯ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥ï¼Œè¿˜è¦è¿›è¡ŒJiraçš„Webhooké…ç½®ã€‚åœ¨Jiraçš„ç³»ç»Ÿç®¡ç†ç•Œé¢ä¸­ï¼Œä½ å¯ä»¥æ‰¾åˆ°â€œé«˜çº§è®¾ç½® - Webhookâ€é€‰é¡¹ï¼Œæ·»åŠ Webhookåï¼Œå¯ä»¥ç»‘å®šå„ç§ç³»ç»Ÿæä¾›çš„äº‹ä»¶ï¼Œæ¯”å¦‚åˆ›å»ºä»»åŠ¡ã€æ›´æ–°ä»»åŠ¡ç­‰ï¼Œè¿™åŸºæœ¬å¯ä»¥æ»¡è¶³ç»å¤§å¤šæ•°åœºæ™¯çš„éœ€æ±‚ã€‚</p><p>å‡è®¾æˆ‘ä»¬çš„ç³»ç»Ÿåœ¨åˆ›å»ºJiraä»»åŠ¡çš„æ—¶å€™ï¼Œè¦è‡ªåŠ¨åœ¨GitLabä¸­åŸºäºä¸»çº¿åˆ›å»ºä¸€æ¡åˆ†æ”¯ï¼Œé‚£ä¹ˆä½ å¯ä»¥å°†GitLabæä¾›çš„åˆ›å»ºåˆ†æ”¯APIå†™åœ¨Jiraè§¦å‘çš„Webhookåœ°å€ä¸­ã€‚å‚è€ƒæ ·ä¾‹å¦‚ä¸‹ï¼š</p><blockquote>\n<p>https : //è¿™é‡Œæ›¿æ¢æˆä½ çš„GitLabæœåŠ¡åœ°å€/repository/branches?branch=${issue.key}&amp;ref=master&amp;private_token=[è¿™é‡Œæ›¿æ¢æˆä½ çš„è´¦å·Token]</p>\n</blockquote><p><img src=\"https://static001.geekbang.org/resource/image/50/f2/504a61becf60fe6a2ddcfca5f624b9f2.png?wh=728*559\" alt=\"\"></p><p>åˆ°è¿™é‡Œï¼ŒJiraå’ŒGitLabçš„æ‰“é€šå°±å®Œæˆäº†ã€‚æˆ‘ä»¬æ¥æ€»ç»“ä¸‹å·²ç»å®ç°çš„åŠŸèƒ½ï¼š</p><ol>\n<li>GitLabæ¯æ¬¡ä»£ç å˜æ›´çŠ¶æ€éƒ½ä¼šåŒæ­¥åˆ°Jiraä»»åŠ¡ä¸­ï¼Œå¹¶ä¸”å®ç°äº†Jiraä»»åŠ¡å’Œä»£ç çš„è‡ªåŠ¨å…³è”ï¼ˆIssue linksï¼‰ï¼›</li>\n<li>å¯ä»¥åœ¨MRä¸­å¢åŠ å…³é”®å­— Fixes/Resolves/Closes Jiraä»»åŠ¡å·ï¼Œå®ç°Jiraçš„è‡ªåŠ¨çŠ¶æ€æµè½¬ï¼›</li>\n<li>æ¯æ¬¡åœ¨Jiraä¸­åˆ›å»ºä»»åŠ¡æ—¶ï¼Œéƒ½ä¼šè‡ªåŠ¨åˆ›å»ºç‰¹æ€§åˆ†æ”¯ã€‚</li>\n</ol><p>å…³äºJiraå’Œå¼€å‘è€…å·¥å…·çš„æ‰“é€šï¼Œæˆ‘æŠŠæ“ä½œæ­¥éª¤ä¹Ÿåˆ†äº«ç»™ä½ ã€‚ä½ å¯ä»¥ç‚¹å‡»<a href=\"https://pan.baidu.com/s/1ByoVZRTzG48yt8Nmgf2cJg\">ç½‘ç›˜é“¾æ¥</a>è·å–ï¼Œæå–ç æ˜¯kf3tã€‚ç°åœ¨å¾ˆå¤šå·¥å…·å¹³å°çš„å»ºè®¾éƒ½æ˜¯ä»¥æœåŠ¡å¼€å‘è€…ä¸ºå¯¼å‘çš„ï¼Œæ‰€ä»¥è·ç¦»å¼€å‘è€…æœ€è¿‘çš„IDEå·¥å…·å°±æˆäº†æ–°çš„æ•ˆç‡æå‡é˜µåœ°ï¼ŒåŒ…æ‹¬äº‘IDEã€IDEæ’ä»¶ç­‰ï¼Œéƒ½æ˜¯ä¸ºäº†æ–¹ä¾¿å¼€å‘è€…å¯ä»¥åœ¨IDEé‡Œé¢å®Œæˆæ‰€æœ‰çš„æ—¥å¸¸ä»»åŠ¡ï¼Œå¯¹äºç®¡ç†åˆ†æ”¯å’ŒJiraä»»åŠ¡ï¼Œè‡ªç„¶ä¹Ÿä¸åœ¨è¯ä¸‹ã€‚</p><h2>ä»£ç ç®¡ç† - GitLab</h2><p>è¿™ä¸ªç¤ºä¾‹é¡¹ç›®ä¸­çš„å¼€å‘æµç¨‹æ˜¯æ€æ ·çš„å‘¢ï¼Ÿæˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸‹ã€‚</p><p>ç¬¬1æ­¥ï¼šåœ¨éœ€æ±‚ç®¡ç†å¹³å°åˆ›å»ºä»»åŠ¡ï¼Œè¿™ä¸ªä»»åŠ¡ä¸€èˆ¬éƒ½æ˜¯å¯ä»¥äº¤ä»˜çš„ç‰¹æ€§ã€‚ä½ è¿˜è®°å¾—å—ï¼Ÿé€šè¿‡å‰é¢çš„æ­¥éª¤ï¼Œæˆ‘ä»¬å·²ç»å®ç°äº†è‡ªåŠ¨åˆ›å»ºç‰¹æ€§åˆ†æ”¯ã€‚</p><p>ç¬¬2æ­¥ï¼šå¼€å‘è€…åœ¨ç‰¹æ€§åˆ†æ”¯ä¸Šè¿›è¡Œå¼€å‘å’Œæœ¬åœ°è‡ªæµ‹ï¼Œåœ¨å¼€å‘å®Œæˆåï¼Œå†å°†ä»£ç æ¨é€åˆ°ç‰¹æ€§åˆ†æ”¯ï¼Œå¹¶è§¦å‘æäº¤é˜¶æ®µçš„æµæ°´çº¿ã€‚è¿™æ¡æµæ°´çº¿ä¸»è¦ç”¨äº<strong>å¿«é€ŸéªŒè¯æäº¤ä»£ç çš„åŸºæœ¬è´¨é‡</strong>ã€‚</p><p>ç¬¬3æ­¥ï¼šå½“æäº¤é˜¶æ®µæµæ°´çº¿é€šè¿‡ä¹‹åï¼Œå¼€å‘è€…åˆ›å»ºåˆå¹¶è¯·æ±‚ï¼ˆMerge Requestï¼‰ï¼Œç”³è¯·å°†ç‰¹æ€§åˆ†æ”¯åˆå¹¶åˆ°ä¸»å¹²ä»£ç ä¸­ã€‚</p><p>ç¬¬4æ­¥ï¼šä»£ç è¯„å®¡è€…å¯¹åˆå¹¶è¯·æ±‚è¿›è¡ŒReviewï¼Œå‘ç°é—®é¢˜çš„è¯ï¼Œå°±åœ¨åˆå¹¶è¯·æ±‚ä¸­æŒ‡å‡ºæ¥ï¼Œæœ€ç»ˆæ¥å—åˆå¹¶è¯·æ±‚ï¼Œå¹¶å°†ç‰¹æ€§ä»£ç åˆå…¥ä¸»å¹²ã€‚</p><p>ç¬¬5æ­¥ï¼šä»£ç åˆå…¥ä¸»å¹²åï¼Œç«‹å³è§¦å‘é›†æˆé˜¶æ®µæµæ°´çº¿ã€‚è¿™ä¸ªé˜¶æ®µçš„æ£€æŸ¥ä»»åŠ¡æ›´åŠ ä¸°å¯Œï¼Œæµ‹è¯•äººå‘˜å¯ä»¥æ‰‹åŠ¨å®Œæˆæµ‹è¯•ç¯å¢ƒéƒ¨ç½²ï¼Œå¹¶éªŒè¯æ–°åŠŸèƒ½ã€‚</p><p>ç¬¬6æ­¥ï¼šç‰¹æ€§ç»å†äº†æµ‹è¯•ç¯å¢ƒã€é¢„å‘å¸ƒç¯å¢ƒï¼Œå¹¶é€šè¿‡éƒ¨ç½²æµæ°´çº¿æœ€ç»ˆéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ã€‚</p><p>åœ¨ä¸“æ çš„<a href=\"https://time.geekbang.org/column/article/161549\">ç¬¬12è®²</a>ä¸­ï¼Œæˆ‘æåˆ°è¿‡ï¼ŒæŒç»­é›†æˆçš„ç†å¿µæ˜¯é€šè¿‡å°½æ—©å’ŒåŠæ—¶çš„ä»£ç é›†æˆï¼Œä»è€Œå»ºç«‹ä»£ç è´¨é‡çš„å¿«é€Ÿåé¦ˆç¯ã€‚æ‰€ä»¥ï¼Œ<strong>ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå’ŒæŒç»­é›†æˆç³»ç»Ÿä¹Ÿéœ€è¦åŒå‘æ‰“é€š</strong>ã€‚</p><p>è¿™é‡Œçš„åŒå‘æ‰“é€šæ˜¯æŒ‡ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå¯ä»¥è§¦å‘æŒç»­é›†æˆç³»ç»Ÿï¼ŒæŒç»­é›†æˆçš„ç»“æœä¹Ÿéœ€è¦è¿”å›ç»™ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹çœ‹å…·ä½“æ€ä¹ˆå®ç°ã€‚</p><h3>ä»£ç æäº¤è§¦å‘æŒç»­é›†æˆ</h3><p>é¦–å…ˆï¼Œä½ éœ€è¦åœ¨Jenkinsä¸­å®‰è£…<a href=\"https://plugins.jenkins.io/gitlab-plugin\">GitLabæ’ä»¶</a>ã€‚è¿™ä¸ªæ’ä»¶æä¾›äº†å¾ˆå¤š<a href=\"https://github.com/jenkinsci/gitlab-plugin#defined-variables\">GitLabç¯å¢ƒå˜é‡</a>ï¼Œç”¨äºè·å–GitLabçš„ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼ŒgitlabSourceBranchè¿™ä¸ªå‚æ•°å°±éå¸¸æœ‰ç”¨ï¼Œå®ƒå¯ä»¥æå–æœ¬æ¬¡è§¦å‘çš„Webhookçš„åˆ†æ”¯ä¿¡æ¯ã€‚æ¯•ç«Ÿï¼Œè¿™ä¸ªä¿¡æ¯åªæœ‰GitLabçŸ¥é“ã€‚åªæœ‰åŒæ­¥ç»™Jenkinsï¼Œæ‰èƒ½æ‹‰å–æ­£ç¡®çš„åˆ†æ”¯ä»£ç æ‰§è¡ŒæŒç»­é›†æˆè¿‡ç¨‹ã€‚</p><p>å½“GitLabç›‘å¬åˆ°ä»£ç å˜æ›´çš„äº‹ä»¶åï¼Œä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªæ’ä»¶æä¾›çš„Webhookåœ°å€ï¼Œå¹¶å®ç°è§£æWebhookæ•°æ®å’Œè§¦å‘Jenkinsä»»åŠ¡çš„åŠŸèƒ½ã€‚</p><p>å…¶å®ï¼Œæˆ‘ä»¬åœ¨è‡ªç ”æµæ°´çº¿å¹³å°çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥å‚è€ƒè¿™ä¸ªæ€è·¯ï¼š<strong>é€šè¿‡åå°è°ƒç”¨GitLabçš„APIå®ŒæˆWebhookçš„è‡ªåŠ¨æ³¨å†Œï¼Œä»è€Œå®ç°å¯¹ä»£ç å˜æ›´äº‹ä»¶çš„ç›‘å¬å’Œä»»åŠ¡çš„è‡ªåŠ¨åŒ–æ‰§è¡Œ</strong>ã€‚</p><p>å½“GitLabæ’ä»¶å®‰è£…å®Œæˆåï¼Œä½ å¯ä»¥åœ¨Jenkinsä»»åŠ¡çš„Build Triggersä¸­å‘ç°ä¸€ä¸ªæ–°çš„é€‰é¡¹ï¼Œå‹¾é€‰è¿™ä¸ªé€‰é¡¹ï¼Œå°±å¯ä»¥æ¿€æ´»GitLabè‡ªåŠ¨è§¦å‘é…ç½®ã€‚å…¶ä¸­æ¯”è¾ƒé‡è¦çš„ä¸¤ä¸ªä¿¡æ¯ï¼Œæˆ‘åœ¨ä¸‹é¢çš„å›¾ç‰‡ä¸­ç”¨çº¢è‰²æ–¹å—åœˆå‡ºæ¥äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/18/64/18400444f248087f0b3f33c34303ed64.png?wh=1378*806\" alt=\"\"></p><ul>\n<li>ä¸Šé¢çš„é“¾æ¥å°±æ˜¯Webhookåœ°å€ï¼Œæ¯ä¸ªJenkinsä»»åŠ¡éƒ½ä¸ç›¸åŒï¼›</li>\n<li>ä¸‹é¢çš„æ˜¯è¿™ä¸ªWebhookå¯¹åº”çš„è®¤è¯Tokenã€‚</li>\n</ul><p>ä½ éœ€è¦æŠŠè¿™ä¸¤ä¸ªä¿¡æ¯ä¸€èµ·æ·»åŠ åˆ°GitLabçš„é›†æˆé…ç½®ä¸­ã€‚æ‰“å¼€GitLabä»“åº“çš„â€œè®¾ç½®-é›†æˆâ€é€‰é¡¹ï¼Œå¯ä»¥çœ‹åˆ°GitLabçš„Webhooké…ç½®é¡µé¢ï¼Œå°†Jenkinsæ’ä»¶ç”Ÿæˆçš„åœ°å€å’ŒTokenä¿¡æ¯å¤åˆ¶åˆ°é…ç½®é€‰é¡¹ä¸­ï¼Œå¹¶å‹¾é€‰å¯¹åº”çš„è§¦å‘é€‰é¡¹ã€‚</p><p>GitLabé»˜è®¤æä¾›äº†å¤šç§è§¦å‘é€‰é¡¹ï¼Œåœ¨ä¸‹é¢çš„æˆªå›¾ä¸­ï¼Œåªå‹¾é€‰äº†Pushäº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯åªæœ‰ç›‘å¬åˆ°Git PushåŠ¨ä½œçš„æ—¶å€™,æ‰ä¼šè§¦å‘Webhookã€‚å½“ç„¶ï¼Œä½ å¯ä»¥é…ç½®ç›‘å¬çš„åˆ†æ”¯ä¿¡æ¯ï¼Œåªé’ˆå¯¹ç‰¹æ€§åˆ†æ”¯æ‰§è¡Œå…³è”çš„Jenkinsä»»åŠ¡ã€‚åœ¨GitLabä¸­é…ç½®å®Œæˆåï¼Œå¯ä»¥çœ‹åˆ°æ–°æ·»åŠ çš„Webhookä¿¡æ¯ï¼Œç‚¹å‡»â€œæµ‹è¯•â€éªŒè¯æ˜¯å¦å¯ä»¥æ­£å¸¸æ‰§è¡Œï¼Œå¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œåˆ™ä¼šæç¤ºâ€œ200-OKâ€ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/9b/8d/9b30070e1c038d301943c2d8adcc948d.png?wh=1004*527\" alt=\"\"></p><h3>æŒç»­é›†æˆæ›´æ–°ä»£ç çŠ¶æ€</h3><p>æ‰“å¼€Jenkinsçš„ç³»ç»Ÿç®¡ç†é¡µé¢ï¼Œæ‰¾åˆ°GitLabé…ç½®ï¼Œæ·»åŠ GitLabæœåŠ¡å™¨çš„åœ°å€å’Œè®¤è¯æ–¹å¼ã€‚æ³¨æ„ï¼Œè¿™é‡Œçš„Credentialsè¦é€‰æ‹©GitLab API Tokenç±»å‹ï¼Œå¯¹åº”çš„Tokenå¯ä»¥åœ¨GitLabçš„â€œç”¨æˆ· - è®¾ç½® - Access Tokensâ€ä¸­ç”Ÿæˆã€‚ç”±äºTokençš„ç‰¹æ®Šæ€§ï¼Œåªæœ‰åœ¨ç”Ÿæˆçš„æ—¶å€™å¯è§ï¼Œä»¥åå°±å†ä¹Ÿçœ‹ä¸åˆ°äº†ã€‚æ‰€ä»¥ï¼Œåœ¨ç”ŸæˆTokenä»¥åï¼Œä½ éœ€è¦å¦¥å–„åœ°ä¿å­˜è¿™ä¸ªä¿¡æ¯ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e5/32/e533cac2cc18bb852f2e8ff200427232.png?wh=970*282\" alt=\"\"><br>\n<img src=\"https://static001.geekbang.org/resource/image/db/bf/db49222bd6fac25909294de44d0204bf.png?wh=681*360\" alt=\"\"></p><p>é‚£ä¹ˆï¼Œé…ç½®å®Œæˆåï¼Œè¦å¦‚ä½•æ›´æ–°GitLabçš„æäº¤çŠ¶æ€å‘¢ï¼Ÿè¿™å°±éœ€è¦ç”¨åˆ°æ’ä»¶æä¾›çš„<a href=\"https://github.com/jenkinsci/gitlab-plugin#build-status-configuration\">æ›´æ–°æ„å»ºç»“æœ</a>å‘½ä»¤äº†ã€‚</p><p>å¯¹äºè‡ªç”±é£æ ¼ç±»å‹çš„Jenkinsä»»åŠ¡ï¼Œä½ å¯ä»¥æ·»åŠ æ„å»ºåå¤„ç†æ­¥éª¤ - Publish build status to GitLabï¼Œå®ƒä¼šè‡ªåŠ¨å°†æ’é˜Ÿçš„ä»»åŠ¡æ›´æ–°ä¸ºâ€œPendingâ€ï¼Œè¿è¡Œçš„ä»»åŠ¡æ›´æ–°ä¸ºâ€œRunningâ€ï¼Œå®Œæˆçš„ä»»åŠ¡æ ¹æ®ç»“æœæ›´æ–°ä¸ºâ€œSuccessâ€æˆ–è€…æ˜¯â€œFailedâ€ã€‚</p><p>å¯¹äºä½¿ç”¨æµæ°´çº¿çš„ä»»åŠ¡æ¥è¯´ï¼Œå®˜æ–¹ä¹Ÿæä¾›äº†ç›¸åº”çš„<a href=\"https://github.com/jenkinsci/gitlab-plugin#declarative-pipeline-jobs\">ç¤ºä¾‹ä»£ç </a>ï¼Œä½ åªéœ€è¦å¯¹ç…§ç€å†™åœ¨Jenkinsfileé‡Œé¢å°±å¯ä»¥äº†ã€‚</p><pre><code>updateGitlabCommitStatus name: 'build', state: 'success'\n</code></pre><p>è¿™æ ·ä¸€æ¥ï¼Œæ¯æ¬¡æäº¤ä»£ç è§¦å‘çš„æµæ°´çº¿ç»“æœä¹Ÿä¼šæ˜¾ç¤ºåœ¨GitLabçš„æäº¤çŠ¶æ€ä¸­ï¼Œå¯ä»¥åœ¨æŸ¥çœ‹åˆå¹¶è¯·æ±‚æ—¶ä½œä¸ºå‚è€ƒã€‚æœ‰çš„å…¬å¸æ›´åŠ ç›´æ¥ï¼šå¦‚æœæµæ°´çº¿çš„çŠ¶æ€ä¸æ˜¯æˆåŠŸçŠ¶æ€ï¼Œé‚£ä¹ˆå°±ä¼šè‡ªåŠ¨å…³é—­æäº¤çš„åˆå¹¶è¯·æ±‚ã€‚å…¶å®æ— è®ºé‡‡ç”¨å“ªç§æ–¹å¼ï¼Œåˆè¡·éƒ½æ˜¯<strong>å¸Œæœ›å¼€å‘è€…åœ¨ç¬¬ä¸€æ—¶é—´ä¿®å¤æŒç»­é›†æˆçš„é—®é¢˜</strong>ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ac/12/ac621c245c87edb3de95f7aac626c012.png?wh=1040*466\" alt=\"\"></p><p>æˆ‘ä»¬å†é˜¶æ®µæ€§åœ°æ€»ç»“ä¸€ä¸‹å·²ç»å®ç°çš„åŠŸèƒ½ï¼š</p><ol>\n<li>æ¯æ¬¡GitLabä¸Šçš„ä»£ç æäº¤éƒ½å¯ä»¥é€šè¿‡Webhookè§¦å‘å¯¹åº”çš„Jenkinsä»»åŠ¡ã€‚å…·ä½“è§¦å‘å“ªä¸ªä»»åŠ¡ï¼Œå–å†³äºä½ å°†å“ªä¸ªJenkinsä»»åŠ¡çš„åœ°å€æ·»åŠ åˆ°äº†GitLabçš„Webhooké…ç½®ä¸­ï¼›</li>\n<li>æ¯æ¬¡Jenkinsä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œä¼šå°†æ‰§è¡Œç»“æœå†™åˆ°GitLabçš„æäº¤è®°å½•ä¸­ã€‚ä½ å¯ä»¥æŸ¥çœ‹æ‰§è¡ŒçŠ¶æ€ï¼Œå†³å®šæ˜¯å¦æ¥å—åˆå¹¶è¯·æ±‚ã€‚</li>\n</ol><h2>ä»£ç è´¨é‡ - SonarQube</h2><p>SonarQubeä½œä¸ºä¸€ä¸ªå¸¸è§çš„å¼€æºä»£ç è´¨é‡å¹³å°ï¼Œå¯ä»¥ç”¨æ¥å®ç°é™æ€ä»£ç æ‰«æï¼Œå‘ç°ä»£ç ä¸­çš„ç¼ºé™·å’Œæ¼æ´ï¼Œè¿˜æä¾›äº†æ¯”è¾ƒåŸºç¡€çš„å®‰å…¨æ£€æŸ¥èƒ½åŠ›ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒè¿˜èƒ½æ”¶é›†å•å…ƒæµ‹è¯•çš„è¦†ç›–ç‡ã€ä»£ç é‡å¤ç‡ç­‰ã€‚</p><p>å¯¹äºåˆšå¼€å§‹å…³æ³¨ä»£ç è´¨é‡å’ŒæŠ€æœ¯å€ºåŠ¡çš„å…¬å¸æ¥è¯´ï¼Œæ˜¯ä¸€ä¸ªæ¯”è¾ƒå®¹æ˜“ä¸Šæ‰‹çš„é€‰æ‹©ã€‚å…³äºæŠ€æœ¯å€ºåŠ¡ï¼Œåœ¨ä¸“æ çš„<a href=\"https://time.geekbang.org/column/article/165480\">ç¬¬15è®²</a>ä¸­æœ‰æ·±å…¥è®²è§£ï¼Œå¦‚æœä½ ä¸è®°å¾—äº†ï¼Œåˆ«å¿˜è®°å›å»å¤ä¹ ä¸€ä¸‹ã€‚</p><p>é‚£ä¹ˆï¼Œä»£ç è´¨é‡æ£€æŸ¥è¿™ç±»é¢‘ç¹æ‰§è¡Œçš„ä¾‹è¡Œå·¥ä½œï¼Œä¹Ÿæ¯”è¾ƒé€‚åˆè‡ªåŠ¨åŒ–å®Œæˆï¼Œ<strong>æœ€ä½³é€”å¾„å°±æ˜¯é›†æˆåˆ°æµæ°´çº¿ä¸­ï¼Œä¹Ÿå°±æ˜¯éœ€è¦è·ŸJenkinsè¿›è¡Œæ‰“é€š</strong>ã€‚æˆ‘ç¨å¾®ä»‹ç»ä¸€ä¸‹æ‰§è¡Œçš„é€»è¾‘ï¼Œå¸Œæœ›å¯ä»¥å¸®ä½ æ›´å¥½åœ°ç†è§£è¿™ä¸ªé…ç½®çš„è¿‡ç¨‹ã€‚</p><p>SonarQubeå¹³å°å®é™…åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼š</p><ul>\n<li>ä¸€ä¸ªæ˜¯å¹³å°ç«¯ï¼Œç”¨äºæ”¶é›†å’Œå±•ç¤ºä»£ç è´¨é‡æ•°æ®ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬æ¯”è¾ƒå¸¸ç”¨çš„åŠŸèƒ½ã€‚</li>\n<li>å¦å¤–ä¸€ä¸ªæ˜¯å®¢æˆ·ç«¯ï¼Œä¹Ÿå°±æ˜¯SonarQubeçš„Scannerå·¥å…·ã€‚è¿™ä¸ªå·¥å…·æ˜¯åœ¨å®¢æˆ·ç«¯æœ¬åœ°æ‰§è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è·Ÿä»£ç åœ¨ä¸€ä¸ªç¯å¢ƒä¸­ï¼Œç”¨äºçœŸæ­£åœ°æ‰§è¡Œåˆ†æã€æ”¶é›†å’Œä¸ŠæŠ¥æ•°æ®ã€‚è¿™ä¸ªå·¥å…·ä¹‹æ‰€ä»¥ä¸æ˜¯ç‰¹åˆ«å¼•äººæ³¨æ„ï¼Œæ˜¯å› ä¸ºåœ¨Jenkinsä¸­ï¼Œåå°é…ç½®äº†è¿™ä¸ªå·¥å…·ï¼Œå¦‚æœå‘ç°èŠ‚ç‚¹ä¸Šæ²¡æœ‰æ‰¾åˆ°å·¥å…·ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨ä¸‹è½½ã€‚ä½ å¯ä»¥åœ¨Jenkinsçš„å…¨å±€å·¥å…·é…ç½®ä¸­æ‰¾åˆ°å®ƒã€‚</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/e9/2d/e919f073a1269135dcf45d04dadf8b2d.png?wh=788*271\" alt=\"\"></p><p>äº†è§£äº†ä»£ç è´¨é‡æ‰«æçš„æ‰§è¡Œé€»è¾‘ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥çŸ¥é“ï¼Œå¯¹äºSonarQubeå’ŒJenkinsçš„é›†æˆï¼Œåªéœ€è¦å•å‘è¿›è¡Œå³å¯ã€‚è¿™ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦ä¿è¯Jenkinsçš„Scannerå·¥å…·é‡‡é›†åˆ°çš„æ•°æ®å¯ä»¥æ­£ç¡®åœ°ä¸ŠæŠ¥åˆ°SonarQubeå¹³å°ç«¯å³å¯ã€‚</p><p>è¿™ä¸ªé…ç½®ä¹Ÿéå¸¸ç®€å•ï¼Œä½ åªéœ€è¦åœ¨Jenkinsçš„å…¨å±€è®¾ç½®ä¸­æ·»åŠ SonarQubeçš„å¹³å°åœ°å€å°±è¡Œäº†ã€‚æ³¨æ„å‹¾é€‰ç¬¬ä¸€ä¸ªé€‰é¡¹ï¼Œä¿è¯SonarQubeæœåŠ¡å™¨çš„é…ç½®ä¿¡æ¯å¯ä»¥è‡ªåŠ¨æ³¨å…¥æµæ°´çº¿çš„ç¯å¢ƒå˜é‡ä¸­ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f2/38/f2907fecbee87af49cd1fffc9b6fb438.png?wh=1122*284\" alt=\"\"></p><p>åœ¨æ‰§è¡ŒJenkinsä»»åŠ¡çš„æ—¶å€™ï¼ŒåŒæ ·å¯ä»¥é’ˆå¯¹è‡ªç”±é£æ ¼çš„ä»»åŠ¡å’Œæµæ°´çº¿ç±»å‹çš„ä»»åŠ¡ï¼Œæ·»åŠ ä¸åŒçš„ä¸ŠæŠ¥æ–¹å¼ã€‚å…³äºå…·ä½“çš„å†…å®¹ï¼Œä½ å¯ä»¥å‚è€ƒSonarQubeçš„<a href=\"https://docs.sonarqube.org/latest/analysis/scan/sonarscanner-for-jenkins/\">å®˜æ–¹ç½‘ç«™</a>ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚</p><p>åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å®ç°äº†GitLabã€Jenkinså’ŒSonarQubeçš„æ‰“é€šã€‚æˆ‘ç»™ä½ åˆ†äº«ä¸€å¹…ç³»ç»Ÿå…³ç³»ç¤ºæ„å›¾ï¼Œå¸Œæœ›å¯ä»¥å¸®åŠ©ä½ æ›´å¥½åœ°äº†è§£ç³»ç»Ÿæ‰“é€šçš„å«ä¹‰å’Œå®ç°è¿‡ç¨‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/0e/53/0ecc003fb103eb633c5c02c291342d53.png?wh=1486*1138\" alt=\"\"></p><h2>ç¯å¢ƒç®¡ç† - Kubernetes</h2><p>æœ€åï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹ç¯å¢ƒç®¡ç†éƒ¨åˆ†ã€‚ä½œä¸ºäº‘åŸç”Ÿæ—¶ä»£çš„æ“ä½œç³»ç»Ÿï¼ŒKuberneteså·²ç»æˆä¸ºäº†äº‘æ—¶ä»£å®¹å™¨ç¼–æ’çš„äº‹å®æ ‡å‡†ã€‚å¯¹äºDevOpså·¥ç¨‹å¸ˆæ¥è¯´ï¼ŒKuberneteså±äºå¿…å­¦å¿…ä¼šçš„æŠ€èƒ½ï¼Œè¿™ä¸ªè¶‹åŠ¿å·²ç»éå¸¸æ˜æ˜¾äº†ã€‚</p><p>åœ¨ç¤ºä¾‹é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬åŒæ ·ç”¨åˆ°äº†Kubernetesä½œä¸ºåŸºç¡€ç¯å¢ƒï¼Œæ‰€æœ‰Jenkinsä»»åŠ¡çš„ç¯å¢ƒéƒ½é€šè¿‡Kubernetesæ¥åŠ¨æ€åˆå§‹åŒ–ç”Ÿæˆã€‚</p><p>è¿™æ ·åšçš„å¥½å¤„éå¸¸å¤šã€‚ä¸€æ–¹é¢ï¼Œå¯ä»¥å®ç°ç¯å¢ƒçš„æ ‡å‡†åŒ–ã€‚æ‰€æœ‰ç¯å¢ƒé…ç½®éƒ½æ˜¯ä»¥ä»£ç çš„å½¢å¼å†™åœ¨Dockerfileä¸­çš„ï¼Œå®ç°äº†ç¯å¢ƒçš„ç»Ÿä¸€å¯æ§ã€‚å¦ä¸€æ–¹é¢ï¼Œç¯å¢ƒçš„èµ„æºåˆ©ç”¨ç‡å¤§å¤§æå‡ï¼Œä¸å†ä¾æ‰˜äºå®¿ä¸»æœºè‡ªèº«çš„ç¯å¢ƒé…ç½®å’Œèµ„æºå¤§å°ï¼Œä½ åªéœ€è¦å‘Šè¯‰Kuberneteséœ€è¦å¤šå°‘èµ„æºï¼Œå®ƒå°±ä¼šå¸®åŠ©ä½ æ‰¾åˆ°åˆé€‚çš„ç‰©ç†èŠ‚ç‚¹è¿è¡Œå®¹å™¨ã€‚èµ„æºçš„è°ƒåº¦å’Œåˆ†é…ç»Ÿä¸€é€šè¿‡Kuberneteså®Œæˆï¼Œè¿™å°±è¿›ä¸€æ­¥æå‡äº†èµ„æºçš„æœ‰æ•ˆåˆ©ç”¨ç‡ã€‚æƒ³è¦åˆå§‹åŒ–ä¸€å¥—å®Œæ•´çš„ç¯å¢ƒï¼Œå¯¹äºä¸­å°ç³»ç»Ÿæ¥è¯´ï¼Œæ˜¯åˆ†åˆ†é’Ÿå°±å¯ä»¥å®Œæˆçš„äº‹æƒ…ã€‚å…³äºè¿™ä¸€ç‚¹ï¼Œæˆ‘ä¼šåœ¨è®²â€œäº‘åŸç”Ÿæ—¶ä»£åº”ç”¨çš„å¹³å°å»ºè®¾â€æ—¶è·Ÿä½ æ¢è®¨ã€‚</p><p>é‚£ä¹ˆï¼Œ<strong>æƒ³è¦å®ç°åŠ¨æ€åˆå§‹åŒ–ç¯å¢ƒï¼Œéœ€è¦æ‰“é€šJenkinså’ŒKubernetes</strong>ã€‚å¥½åœ¨Jenkinså·²ç»æä¾›äº†å®˜æ–¹çš„<a href=\"https://plugins.jenkins.io/kubernetes\">Kubernetesæ’ä»¶</a>æ¥å®Œæˆè¿™ä¸ªåŠŸèƒ½ã€‚ä½ å¯ä»¥åœ¨Jenkinsç³»ç»Ÿé…ç½®ä¸­æ·»åŠ äº‘ - Kubernetesï¼Œç„¶åå†å‚è€ƒä¸‹å›¾è¿›è¡Œé…ç½®ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>å¿…é¡»æ­£ç¡®é…ç½®Jenkinsçš„åœ°å€ï¼ˆç³»ç»Ÿé…ç½® - Jenkins Locationï¼‰ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ–°å»ºå®¹å™¨æ— æ³•è¿æ¥Jenkinsã€‚</strong></p><p><img src=\"https://static001.geekbang.org/resource/image/b2/b0/b20afc90dc6736828c0f1bdab8fa9bb0.png?wh=1587*600\" alt=\"\"></p><p>ç”ŸæˆåŠ¨æ€èŠ‚ç‚¹æ—¶ï¼Œéœ€è¦ä½¿ç”¨åˆ°JNLPåè®®ï¼Œæˆ‘æ¨èä½ ä½¿ç”¨<strong>Jenkinså®˜æ–¹æä¾›çš„é•œåƒ</strong>ã€‚</p><p>JNLPåè®®çš„å…¨ç§°æ˜¯Java Network Launch Protocolï¼Œæ˜¯ä¸€ç§é€šç”¨çš„è¿œç¨‹è¿æ¥Javaåº”ç”¨çš„åè®®æ–¹å¼ã€‚å…¸å‹çš„ä½¿ç”¨åœºæ™¯å°±æ˜¯åœ¨æ„å»ºèŠ‚ç‚¹ï¼ˆä¹Ÿå°±æ˜¯ä¹ æƒ¯ä¸Šçš„SlaveèŠ‚ç‚¹ï¼‰ä¸Šå‘èµ·å‘MasterèŠ‚ç‚¹çš„è¿æ¥è¯·æ±‚ï¼Œå°†æ„å»ºèŠ‚ç‚¹ä¸»åŠ¨æŒ‚è½½åˆ°Jenkins Masterä¸Šï¼Œä¾›Masterè°ƒåº¦ä½¿ç”¨ã€‚<strong>åŒºåˆ«äºä½¿ç”¨SSHé•¿è¿æ¥çš„æ–¹å¼ï¼Œè¿™ç§åŠ¨æ€è¿æ¥çš„åè®®ç‰¹åˆ«é€‚åˆäºKubernetesè¿™ç±»çš„åŠ¨æ€èŠ‚ç‚¹</strong>ã€‚é•œåƒé…ç½®å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/30/f5/307b1ab57a92f0359a0de3de09dff9f5.png?wh=1383*734\" alt=\"\"></p><p>åœ¨é…ç½®åŠ¨æ€èŠ‚ç‚¹çš„æ—¶å€™ï¼Œæœ‰å‡ ä¸ªè¦ç‚¹ä½ éœ€è¦ç‰¹åˆ«å…³æ³¨ä¸‹ã€‚</p><ol>\n<li><strong> é™æ€ç›®å½•æŒ‚è½½</strong>ã€‚ç”±äºæ¯æ¬¡ç”Ÿæˆä¸€ä¸ªå…¨æ–°çš„å®¹å™¨ç¯å¢ƒï¼Œæ‰€ä»¥å°±éœ€è¦å°†ä»£ç ç¼“å­˜ï¼ˆæ¯”å¦‚.gitç›®å½•ï¼‰ã€ä¾èµ–ç¼“å­˜ï¼ˆ.m2, .gradle, .npmï¼‰ä»¥åŠå¤–éƒ¨å·¥å…·ç­‰é™æ€æ•°æ®é€šè¿‡volumeçš„æ–¹å¼æŒ‚è½½åˆ°å®¹å™¨ä¸­ï¼Œä»¥å…æ¯æ¬¡é‡æ–°ä¸‹è½½æ—¶å½±å“æ‰§è¡Œæ—¶é—´ã€‚</li>\n<li>å¦‚æœä½ çš„Jenkinsä¹Ÿæ˜¯åœ¨Kubernetesä¸­è¿è¡Œçš„ï¼Œæ³¨æ„<strong>é…ç½®Jenkinsçš„JNLPç«¯å£å·</strong>ï¼ˆä½¿ç”¨ç¯å¢ƒå˜é‡ï¼šJENKINS_SLAVE_AGENT_PORTï¼‰ã€‚å¦åˆ™ï¼Œåœ¨ç³»ç»Ÿä¸­é…ç½®çš„ç«¯å£å·æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚</li>\n<li>ç”±äºæ¯æ¬¡åˆå§‹åŒ–å®¹å™¨æœ‰ä¸€å®šçš„æ—¶é—´æŸè€—ï¼Œæ‰€ä»¥ä½ å¯ä»¥<strong>é…ç½®ä¸€ä¸ªç­‰å¾…æ—¶é•¿</strong>ã€‚è¿™æ ·ä¸€æ¥ï¼Œåœ¨ä»»åŠ¡è¿è¡Œç»“æŸåï¼Œç¯å¢ƒè¿˜ä¼šä¿å­˜ä¸€æ®µæ—¶é—´ã€‚å¦‚æœè¿™ä¸ªæ—¶å€™æœ‰æ–°ä»»åŠ¡è¿è¡Œï¼Œå°±å¯ä»¥ç›´æ¥å¤ç”¨å·²æœ‰çš„å®¹å™¨ç¯å¢ƒï¼Œè€Œæ— éœ€é‡æ–°ç”Ÿæˆã€‚</li>\n<li><strong>å¦‚æœç½‘ç»œæ¡ä»¶ä¸å¥½ï¼Œå¯ä»¥é€‚å½“åœ°åŠ å¤§åˆ›å»ºå®¹å™¨çš„è¶…æ—¶æ—¶é—´</strong>ï¼Œé»˜è®¤æ˜¯100ç§’ã€‚å¦‚æœåœ¨è¿™ä¸ªæ—¶é—´å†…æ— æ³•å®Œæˆå®¹å™¨åˆ›å»ºï¼Œé‚£ä¹ˆJenkinså°±ä¼šè‡ªåŠ¨æ€æ‰åˆ›å»ºè¿‡ç¨‹å¹¶é‡æ–°å°è¯•ã€‚</li>\n</ol><p>å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼ŒåŠ¨æ€Kubernetesç¯å¢ƒå°±ä¹Ÿå¯ä»¥ä½¿ç”¨äº†ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®Œæ•´åœ°è¿è¡Œä¸€æ¡æµæ°´çº¿äº†ã€‚åœ¨è®¾è®¡æµæ°´çº¿çš„æ—¶å€™ï¼Œä½ éœ€è¦æ³¨æ„çš„æ˜¯<strong>æµæ°´çº¿çš„åˆ†å±‚</strong>ã€‚å…·ä½“çš„æµæ°´çº¿æ­¥éª¤ï¼Œæˆ‘å·²ç»å†™åœ¨äº†ç³»ç»Ÿæ¶æ„å›¾ä¸­ã€‚æ¯”å¦‚ï¼Œæäº¤é˜¶æ®µæµæ°´çº¿éœ€è¦å®Œæˆæ‹‰å–ä»£ç ã€ç¼–è¯‘æ‰“åŒ…ã€å•å…ƒæµ‹è¯•å’Œä»£ç è´¨é‡åˆ†æå››ä¸ªæ­¥éª¤ï¼Œå¯¹åº”çš„ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>// pipeline 2.0 - Commit stage - front-end\npipeline {\n    agent {\n        // KubernetesèŠ‚ç‚¹çš„æ ‡ç­¾\n        label 'pipeline-slave'\n\n\n    }\n    environment {\n        // é•œåƒä»“åº“åœ°å€\n        HARBOR_HOST= '123.207.154.16'\n        IMAGE_NAME = &quot;front-end&quot;\n        REPO = 'front-end'\n        HOST_CODE_DIR = &quot;/home/jenkins-slave/workspace/${JOB_NAME}&quot;\n        GROUP = 'weaveworksdemos'\n        COMMIT = &quot;${currentBuild.id}&quot;\n        TAG = &quot;${currentBuild.id}&quot;\n        TEST_ENV_NAME = 'test'\n        STAGE_ENV_NAME = 'staging'\n        PROD_ENV_NAME = 'prod'\n        BUILD_USER = &quot;${BUILD_USER_ID}&quot;\n        // éœ€è¦æŒ‚è½½åˆ°å®¹å™¨ä¸­çš„é™æ€æ•°æ®\n        COMMON_VOLUME = ' -v /nfs/.m2:/root/.m2  -v /nfs/.sonar:/root/.sonar -v /nfs/.npm:/root/.npm '\n    }\n    stages {\n        stage('Checkout') {\n            steps {\n                git branch: 'xxx', credentialsId: '707ff66e-1bac-4918-9cb7-fb9c0c3a0946', url: 'http://1.1.1.1/shixuefeng/front-end.git'\n            }\n        }\n        stage('Prepare Test') {\n            steps {\n                sh '''\n                docker build -t ${IMAGE_NAME} -f test/Dockerfile .\n                docker run --rm -v ${HOST_CODE_DIR}:/usr/src/app ${IMAGE_NAME} /usr/local/bin/cnpm install\n                '''\n            }\n        }\n        stage('Code Quality') {\n            parallel {\n                stage('Unit Test') {\n                    steps {\n                        sh '''\n                        docker run --rm -v ${HOST_CODE_DIR}:/usr/src/app ${IMAGE_NAME} /usr/local/bin/cnpm test\n                        '''\n                    }\n                }\n                stage('Static Scan') {\n                    steps {\n                        sh 'echo &quot;sonar.exclusions=node_modules/**&quot; &gt;&gt; sonar-project.properties'\n                        script {\n                            def scannerHome = tool 'SonarQubeScanner';\n                            withSonarQubeEnv('DevOpsSonar') {\n                                sh &quot;${scannerHome}/bin/sonar-scanner&quot;\n                                updateGitlabCommitStatus name: 'build', state: 'success'\n                            }\n                        }\n                    }\n                }\n            }\n        }       \n    }\n}\n</code></pre><p>å¦‚æœä½ æŒ‰ç…§åˆšåˆšæˆ‘æ‰€ä»‹ç»çš„æ­¥éª¤æ“ä½œçš„è¯ï¼Œä½ å°±ä¼šå¾—åˆ°è¿™æ ·ä¸€å¼ å®Œæ•´çš„æµæ°´çº¿æ¼”ç¤ºæ•ˆæœå›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/0f/b3/0f36a2ac9cfc8d5878ac7cf68dcc05b3.png?wh=1845*255\" alt=\"\" title=\"ç³»ç»Ÿæˆªå›¾\"></p><p>ç»“åˆJenkinsè‡ªèº«çš„äººå·¥å®¡æ‰¹ç¯èŠ‚ï¼Œå¯ä»¥å®ç°å¤šç¯å¢ƒçš„è‡ªåŠ¨å’Œæ‰‹åŠ¨éƒ¨ç½²ï¼Œæ„å»ºä¸€ä¸ªçœŸæ­£çš„ç«¯åˆ°ç«¯æŒç»­äº¤ä»˜æµæ°´çº¿ã€‚</p><h2>æ€»ç»“</h2><p>åœ¨ä»Šå¤©çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘é€šè¿‡ä¸€ä¸ªå¼€æºæµæ°´çº¿çš„è§£å†³æ–¹æ¡ˆï¼Œç»™ä½ ä»‹ç»äº†å¦‚ä½•å»ºç«‹ä¸€ä¸ªå¼€æºå·¥å…·ä¸ºä¸»çš„æŒç»­äº¤ä»˜æµæ°´çº¿å¹³å°ã€‚ä½ åº”è¯¥ä¹Ÿæœ‰æ„Ÿè§‰ï¼Œå¯¹äºDevOpsæ¥è¯´ï¼ŒçœŸæ­£çš„éš¾ç‚¹ä¸åœ¨äºå·¥å…·æœ¬èº«ï¼Œè€Œåœ¨äºå¦‚ä½•åŸºäºæ•´ä¸ªç ”å‘æµç¨‹å°†å·¥å…·ä¸²è”æ‰“é€šï¼ŒæŠŠå®ƒä»¬ç»“åˆåœ¨ä¸€èµ·ï¼Œå‘æŒ¥å‡ºæœ€å¤§çš„ä¼˜åŠ¿ã€‚è¿™äº›ç†å¿µå¯¹äºè‡ªå»ºå¹³å°æ¥è¯´ä¹ŸåŒæ ·é€‚ç”¨ï¼Œä½ éœ€è¦åœ¨å®è·µä¸­å¤šåŠ å°è¯•ï¼Œæ‰èƒ½åœ¨åº”ç”¨è¿‡ç¨‹ä¸­æ¸¸åˆƒæœ‰ä½™ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>å…³äºè¿™å¥—å¼€æºæµæ°´çº¿è§£å†³æ–¹æ¡ˆï¼Œä½ å¯¹æ•´ä½“çš„å·¥å…·é“¾ã€é…ç½®ã€è®¾è®¡æ€è·¯è¿˜æœ‰ä»€ä¹ˆç–‘é—®å—ï¼Ÿåœ¨å®æ–½è¿‡ç¨‹ä¸­ï¼Œä½ é‡åˆ°äº†å“ªäº›ç»•ä¸è¿‡å»çš„é—®é¢˜å‘¢ï¼Ÿ</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå†™ä¸‹ä½ çš„æ€è€ƒå’Œç­”æ¡ˆï¼Œæˆ‘ä»¬ä¸€èµ·è®¨è®ºï¼Œå…±åŒå­¦ä¹ è¿›æ­¥ã€‚å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠæ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p>","neighbors":{"left":{"article_title":"26 | å¹³å°äº§å“ç ”å‘ï¼šä¸‰ä¸ªæœˆå®Œæˆåƒäººè§„æ¨¡çš„äº§å“è¦æ€ä¹ˆåšï¼Ÿ","id":178830},"right":{"article_title":"28 | è¿ˆå‘äº‘ç«¯ï¼šäº‘åŸç”Ÿåº”ç”¨æ—¶ä»£çš„å¹³å°æ€è€ƒ","id":180496}},"comments":[{"had_liked":false,"id":224073,"user_name":"Fan","can_delete":false,"product_type":"c1","uid":1058920,"ip_address":"","ucode":"F00ADED91FC429","user_header":"https://static001.geekbang.org/account/avatar/00/10/28/68/774b1619.jpg","comment_is_top":false,"comment_ctime":1591266150,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"14476168038","product_id":100036601,"comment_content":"â€œä½¿ç”¨ Jira å’Œ GitLab çš„ Webhook è¿›è¡Œæ‰“é€šâ€ çš„é…ç½®é“¾æ¥å¤±æ•ˆäº†<br>http:&#47;&#47;confluence.gjingao.com&#47;pages&#47;viewpage.action?pageId=6520911","like_count":3,"discussions":[{"author":{"id":1105958,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e0/26/4942a09e.jpg","nickname":"çŒ«å¤´é¹°çˆ±æ‹¿é“","note":"","ucode":"24266B58968428","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588424,"discussion_content":"the same ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663753262,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1392306,"avatar":"https://static001.geekbang.org/account/avatar/00/15/3e/b2/b514d71a.jpg","nickname":"å°çš“","note":"","ucode":"61F6C6317689BA","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":359819,"discussion_content":"è¯·æ±‚æ¢å¤é“¾æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616295822,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1158436,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ad/24/c6b763b4.jpg","nickname":"æ¡ƒå­-å¤å‹‡æ°","note":"","ucode":"5D5F38AABA980F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":320781,"discussion_content":"è¯·æ±‚æ¢å¤é“¾æ¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604477848,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1207076,"avatar":"https://static001.geekbang.org/account/avatar/00/12/6b/24/ab3fe3cd.jpg","nickname":"Lactoni","note":"","ucode":"539B78114A0A66","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289187,"discussion_content":"æˆ‘ä¹Ÿæ²¡æ³•æŸ¥çœ‹äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594020920,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163409,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1576718119,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10166652711","product_id":100036601,"comment_content":"      ä»Šå¤©çš„å†…å®¹å°±æ˜¯ä¸€ä¸ªç²¾ç®€ç‰ˆçš„å¯ä»¥ç›´æ¥ä¸Šæ‰‹ä½¿ç”¨çš„DevOpsï¼šä¸è¿‡ç¯‡ç« åˆ’åˆ†æ„Ÿè§‰é”™äº†-åº”å½“æ˜¯ã€Šæ¡ˆä¾‹æ€»ç»“&#47;åˆ†æã€‹ç¯‡ä¹‹ç±»çš„ï¼Œä¸€ä¸ªä¸é”™çš„ç»å…¸å°å‹å®æˆ˜ç±»é¡¹ç›®ï¼Œæ­£æ‰¾æ¡ˆä¾‹å‘¢ï¼›åˆšå¥½åé¢å¯ä»¥æ‹¿æ¥å¯ä»¥ç”¨ã€‚<br>       ä¸çŸ¥ä¸è§‰å°±33è®²äº†ï¼Œå¥½å¿«å•Šï¼›è°¢è°¢ä»Šå¤©çš„åˆ†äº«ï¼ŒæœŸå¾…åç»­çš„å†…å®¹ã€‚","like_count":3},{"had_liked":false,"id":163380,"user_name":"swordman","can_delete":false,"product_type":"c1","uid":1002980,"ip_address":"","ucode":"F6719BD5E20B37","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/e4/94b543c3.jpg","comment_is_top":false,"comment_ctime":1576715493,"is_pvip":false,"replies":[{"id":"67655","content":"ä½ å¥½ï¼Œæˆ‘éå¸¸èµåŒå·¥å…·ä¸²è”è¦åœºæ™¯åŒ–ï¼Œä¹Ÿå°±æ˜¯è¦è§£å†³å®é™…çš„é—®é¢˜ï¼Œæˆ‘è®¤ä¸ºè¿™é‡Œé¢åŒ…å«ä¸¤ç‚¹ï¼š<br>1. éœ€æ±‚çŠ¶æ€çš„è‡ªåŠ¨åŒæ­¥ï¼šè¦è§£å†³çš„é—®é¢˜å°±æ˜¯çŠ¶æ€æ›´æ–°ä¸åŠæ—¶ï¼Œå¯¼è‡´çš„æ•°æ®åº¦é‡å¤±çœŸï¼Œæ‰€ä»¥ç›¸æ¯”äºä»»åŠ¡å®Œæˆæ—¶è‡ªåŠ¨è§¦å‘æµæ°´çº¿ï¼Œæˆ‘è®¤ä¸ºä»»åŠ¡å®Œæˆçš„åŠ¨ä½œåŒæ ·è¦åšåˆ°è‡ªåŠ¨åŒ–æµè½¬ï¼Œæ¯”å¦‚æˆ‘ä»¬å°±æ˜¯è·Ÿææµ‹å¹³å°æ‰“é€šå®ç°çš„çŠ¶æ€è‡ªåŠ¨åŒæ­¥ã€‚<br>2. éœ€æ±‚å’Œä»£ç çš„å…³è”æ‰“é€šï¼šè¦å®ç°çš„å°±æ˜¯éœ€æ±‚å’Œä»£ç çš„è¿½æº¯ï¼Œæ‰€ä»¥åœ¨Jiraä¸­è¦èƒ½æŸ¥çœ‹åˆ°ä»£ç çš„å˜æ›´ï¼ŒåŒæ ·ä»£ç ä¸­ä¹Ÿè¦å…³è”Jiraçš„ä»»åŠ¡ç¼–å·ï¼Œè¿™å¯¹äºåç«¯æµ‹è¯•ç¯èŠ‚éå¸¸é‡è¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"çŸ³é›ªå³°","uid":"1117795","ctime":1579853809,"ip_address":"","comment_id":163380,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10166650085","product_id":100036601,"comment_content":"ç»ˆäºç­‰æ¥äº†å·¥å…·ä¸²è”ç¯èŠ‚ï¼Œæ­£æ˜¯æˆ‘æƒ³è¦çš„ï¼Œå†™å¾—éå¸¸æ¸…æ¥šï¼Œå€¼å¾—æ”¶è—ã€‚è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯Jenkinså’ŒJiraè¿é€šçš„åœºæ™¯ï¼Œèƒ½å¦èƒ½å†åˆ†äº«ä¸€ä¸‹ã€‚é™„ä¸Šæˆ‘ä»¬ç°åœ¨å®ç°ï¼šï¼ˆ1ï¼‰ä»£ç æäº¤æµæ°´çº¿å¤±è´¥ï¼Œè‡ªåŠ¨å¾€Jiraä¸Šæ·»åŠ ä¸€ä¸ªæ•…éšœï¼Œç„¶åå¼€å‘äººå‘˜åœ¨å¼€å‘IDEä¸­é€‰æ‹©è¿™ä¸ªæ•…éšœï¼Œå±•å¼€å¼€å‘å’Œæäº¤å·¥ä½œï¼ˆ2ï¼‰Jiraä»»åŠ¡å˜æ›´ä¸ºå®Œæˆæ—¶ï¼Œè‡ªåŠ¨è§¦å‘Jenkinsæµæ°´çº¿ï¼Œæµæ°´çº¿å®Œæˆæ‹‰å–åˆ†æ”¯ä»£ç ï¼Œç¼–è¯‘æ‰“åŒ…ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•ç­‰å·¥ä½œï¼Œå¦‚æœè¿è¡Œå¤±è´¥ï¼Œåˆ™ä¿®æ”¹Jiraä»»åŠ¡çŠ¶æ€ä¸ºè¿›è¡Œä¸­ã€‚ä¸çŸ¥é“è¿˜æœ‰å“ªäº›å®ç”¨çš„ä¸²æ¥åœºæ™¯ï¼Ÿè°¢è°¢ï¼","like_count":3,"discussions":[{"author":{"id":1117795,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0e/63/cef8f0f4.jpg","nickname":"çŸ³é›ªå³°","note":"","ucode":"2B3EA5B86D9A0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478373,"discussion_content":"ä½ å¥½ï¼Œæˆ‘éå¸¸èµåŒå·¥å…·ä¸²è”è¦åœºæ™¯åŒ–ï¼Œä¹Ÿå°±æ˜¯è¦è§£å†³å®é™…çš„é—®é¢˜ï¼Œæˆ‘è®¤ä¸ºè¿™é‡Œé¢åŒ…å«ä¸¤ç‚¹ï¼š\n1. éœ€æ±‚çŠ¶æ€çš„è‡ªåŠ¨åŒæ­¥ï¼šè¦è§£å†³çš„é—®é¢˜å°±æ˜¯çŠ¶æ€æ›´æ–°ä¸åŠæ—¶ï¼Œå¯¼è‡´çš„æ•°æ®åº¦é‡å¤±çœŸï¼Œæ‰€ä»¥ç›¸æ¯”äºä»»åŠ¡å®Œæˆæ—¶è‡ªåŠ¨è§¦å‘æµæ°´çº¿ï¼Œæˆ‘è®¤ä¸ºä»»åŠ¡å®Œæˆçš„åŠ¨ä½œåŒæ ·è¦åšåˆ°è‡ªåŠ¨åŒ–æµè½¬ï¼Œæ¯”å¦‚æˆ‘ä»¬å°±æ˜¯è·Ÿææµ‹å¹³å°æ‰“é€šå®ç°çš„çŠ¶æ€è‡ªåŠ¨åŒæ­¥ã€‚\n2. éœ€æ±‚å’Œä»£ç çš„å…³è”æ‰“é€šï¼šè¦å®ç°çš„å°±æ˜¯éœ€æ±‚å’Œä»£ç çš„è¿½æº¯ï¼Œæ‰€ä»¥åœ¨Jiraä¸­è¦èƒ½æŸ¥çœ‹åˆ°ä»£ç çš„å˜æ›´ï¼ŒåŒæ ·ä»£ç ä¸­ä¹Ÿè¦å…³è”Jiraçš„ä»»åŠ¡ç¼–å·ï¼Œè¿™å¯¹äºåç«¯æµ‹è¯•ç¯èŠ‚éå¸¸é‡è¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579853809,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165989,"user_name":"é²å»ºé£","can_delete":false,"product_type":"c1","uid":1231907,"ip_address":"","ucode":"5CC55E8B2CB4EF","user_header":"https://static001.geekbang.org/account/avatar/00/12/cc/23/4d622bea.jpg","comment_is_top":false,"comment_ctime":1577359202,"is_pvip":false,"replies":[{"id":"63824","content":"æ˜¯çš„ï¼ŒåŸºæœ¬ä¸Šè®²å¼€æºæµæ°´çº¿éƒ½ç¦»ä¸å¼€è¿™ä¸‰ä¸ªå·¥å…·å“ˆï¼Œå¯ä»¥åœ¨è¿™ä¸ªåŸºç¡€ä¸Šè¿›è¡Œå‘å‰å’Œå‘åçš„å»¶å±•ï¼Œå¾ˆå¤šå…¬å¸ä¹Ÿæ˜¯è¿™æ ·åšçš„","user_name":"ä½œè€…å›å¤","user_name_real":"çŸ³é›ªå³°","uid":"1117795","ctime":1577545400,"ip_address":"","comment_id":165989,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5872326498","product_id":100036601,"comment_content":"æœ€æ—©æ¥è§¦çš„devopså°±æ˜¯Jenkins+sonar+gitlab","like_count":2,"discussions":[{"author":{"id":1117795,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0e/63/cef8f0f4.jpg","nickname":"çŸ³é›ªå³°","note":"","ucode":"2B3EA5B86D9A0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479342,"discussion_content":"æ˜¯çš„ï¼ŒåŸºæœ¬ä¸Šè®²å¼€æºæµæ°´çº¿éƒ½ç¦»ä¸å¼€è¿™ä¸‰ä¸ªå·¥å…·å“ˆï¼Œå¯ä»¥åœ¨è¿™ä¸ªåŸºç¡€ä¸Šè¿›è¡Œå‘å‰å’Œå‘åçš„å»¶å±•ï¼Œå¾ˆå¤šå…¬å¸ä¹Ÿæ˜¯è¿™æ ·åšçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577545400,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":315779,"user_name":"é˜¿å¡é˜¿å¡","can_delete":false,"product_type":"c1","uid":2727489,"ip_address":"","ucode":"A84748A3F1625C","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIMKarLmFgMUYYZ8zdN3FLKkt7iaLgheLic2HgwVsZBOUVzycClCt9CjfWJJzAMdel1oOMJ4Uialxatg/132","comment_is_top":false,"comment_ctime":1633998715,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633998715","product_id":100036601,"comment_content":"Jenkins å¦‚ä½•è·ŸOpenShift æ‰“é€šæµç¨‹å‘¢","like_count":0},{"had_liked":false,"id":273788,"user_name":"Geek_bc63a1","can_delete":false,"product_type":"c1","uid":2333678,"ip_address":"","ucode":"450F120047252E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/iaRiaKz5VweoRNz2NibVZh6N63MMh1s5evKBfaMXZTBwSoZcib10h1Me4SpZjZv95krQxMpvDxTrN3ia9VNG56icnk7w/132","comment_is_top":false,"comment_ctime":1610677503,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1610677503","product_id":100036601,"comment_content":"çŸ³è€å¸ˆï¼Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼ŒDevOpså¹³å°çš„èƒ½åˆ†åˆ«åœ¨å¼€å‘ç¯å¢ƒå¼€å‘ã€æµ‹è¯•ç¯å¢ƒæµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒé‡Œé¢æ­£å¼ä½¿ç”¨å—ï¼Ÿæˆ‘ä»¬å›¢é˜Ÿç›®å‰é‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œåƒå¸¸è§„é¡¹ç›®ä¸€æ ·å®æ–½ï¼Œéœ€è¦åœ¨ä¸‰ä¸ªç¯å¢ƒé‡Œé¢åˆ†åˆ«éƒ¨ç½²ä¸€æ•´å¥—æ‰€æœ‰çš„å·¥å…·ï¼Œéå¸¸éº»çƒ¦ï¼Œæ˜¯ä¸æ˜¯å¿…é¡»è¦è¿™æ ·å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":264954,"user_name":"ç‹ä¸°","can_delete":false,"product_type":"c1","uid":1084423,"ip_address":"","ucode":"E4A668D873A32A","user_header":"https://static001.geekbang.org/account/avatar/00/10/8c/07/b4ea8f10.jpg","comment_is_top":false,"comment_ctime":1606720335,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606720335","product_id":100036601,"comment_content":"â€œä½¿ç”¨ Jira å’Œ GitLab çš„ Webhook è¿›è¡Œæ‰“é€šâ€ çš„é…ç½®é“¾æ¥å¤±æ•ˆäº†<br>http:&#47;&#47;confluence.gjingao.com&#47;pages&#47;viewpage.action?pageId=6520911","like_count":0},{"had_liked":false,"id":240159,"user_name":"Geek_599062","can_delete":false,"product_type":"c1","uid":1137592,"ip_address":"","ucode":"B8C8A6750DB713","user_header":"https://static001.geekbang.org/account/avatar/00/11/5b/b8/7b39de23.jpg","comment_is_top":false,"comment_ctime":1596772589,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596772589","product_id":100036601,"comment_content":"ä¸é”™çš„æµæ°´çº¿æ­å»ºä»‹ç»","like_count":0},{"had_liked":false,"id":236826,"user_name":"yyz","can_delete":false,"product_type":"c1","uid":1098513,"ip_address":"","ucode":"364D3C40C3E917","user_header":"https://static001.geekbang.org/account/avatar/00/10/c3/11/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1595558334,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595558334","product_id":100036601,"comment_content":"æƒ³é—®ä¸€ä¸‹ æ ¹æ®æµç¨‹å›¾ï¼Œå¦‚ä½•è§¦å‘ ä¸åŒçš„åˆ†æ”¯ èµ°ä¸åŒçš„ç­–ç•¥çš„å‘¢ï¼Ÿ æœ‰æœ€ä½³å®è·µæ¨èå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":222629,"user_name":"é€æ™®é€‰","can_delete":false,"product_type":"c1","uid":1220775,"ip_address":"","ucode":"AB2C98BB9C3A5D","user_header":"https://static001.geekbang.org/account/avatar/00/12/a0/a7/db7a7c50.jpg","comment_is_top":false,"comment_ctime":1590851991,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590851991","product_id":100036601,"comment_content":"çŸ³è€å¸ˆï¼Œæµ‹è¯•ç¯å¢ƒä½¿ç”¨k8så®¹å™¨å¹³å°æŒºå¥½ï¼Œæ˜¯å¦ä¾èµ–å…¬å¸èƒ½æä¾›çš„k8så®¹å™¨è¿è¡Œå¹³å°ï¼Œè‹¥å…¬å¸è¿˜æ²¡æœ‰è‡ªå·±å»ºè®¾ä¸€å¥—æ˜¯å¦å¤ªè´¹æ—¶é—´è´¹åŠ›äº†ï¼Ÿè°¢è°¢","like_count":0},{"had_liked":false,"id":215004,"user_name":"ä¼¼æ›¾ç›¸è¯†","can_delete":false,"product_type":"c1","uid":1971079,"ip_address":"","ucode":"DCBA5F6ABC7401","user_header":"https://static001.geekbang.org/account/avatar/00/1e/13/87/73a17c60.jpg","comment_is_top":false,"comment_ctime":1588866834,"is_pvip":false,"replies":[{"id":"80746","content":"å¦‚æœåªæ˜¯å•çº¯ä½¿ç”¨ï¼Œå…¶å®å·®ä¸å¤šï¼Œå“ªä¸ªç”¨çš„ç†Ÿç»ƒç”¨å“ªä¸ªğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"çŸ³é›ªå³°","uid":"1117795","ctime":1589792900,"ip_address":"","comment_id":215004,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1588866834","product_id":100036601,"comment_content":"è€å¸ˆ gitlab runner ä¸jenkinså¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1117795,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0e/63/cef8f0f4.jpg","nickname":"çŸ³é›ªå³°","note":"","ucode":"2B3EA5B86D9A0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494271,"discussion_content":"å¦‚æœåªæ˜¯å•çº¯ä½¿ç”¨ï¼Œå…¶å®å·®ä¸å¤šï¼Œå“ªä¸ªç”¨çš„ç†Ÿç»ƒç”¨å“ªä¸ªğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589792900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1104850,"avatar":"https://static001.geekbang.org/account/avatar/00/10/db/d2/e29f8834.jpg","nickname":"lidashuang","note":"","ucode":"560ABE8032760E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293778,"discussion_content":"å¯ä»¥éƒ½ç”¨å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595666246,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167882,"user_name":"zero","can_delete":false,"product_type":"c1","uid":1000718,"ip_address":"","ucode":"61C28D2DEDDD2D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/45/0e/f7f27802.jpg","comment_is_top":false,"comment_ctime":1577957239,"is_pvip":false,"replies":[{"id":"65251","content":"æˆ‘ç†è§£ä¸åº”è¯¥å‡ºç°è¿™ç§é—®é¢˜å‘€ï¼Œæˆ‘æ˜å¤©å»å…¬å¸çœ‹ä¸‹ï¼Œä½ å¯ä»¥åŠ æˆ‘å¾®ä¿¡æ²Ÿé€šå“ˆï¼Œcendrier","user_name":"ä½œè€…å›å¤","user_name_real":"çŸ³é›ªå³°","uid":"1117795","ctime":1577983903,"ip_address":"","comment_id":167882,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577957239","product_id":100036601,"comment_content":"å¯¹äºjenkinsçš„ä½¿ç”¨ï¼Œæœ‰ä¸€ä¸ªåœºæ™¯éœ€æ±‚ï¼š æœ‰ä¸¤ä¸ªè´¦å·user1,user2ï¼Œåˆ†åˆ«å»ºç«‹è§†å›¾view1,view2 ã€‚user1ç™»å½•åªèƒ½çœ‹åˆ°view1;user2ç™»å½•åªèƒ½çœ‹åˆ°user2ã€‚ä½†æ˜¯ï¼Œå®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°ï¼Œåšä¸åˆ°è§†å›¾éšè—ã€‚user1ç™»å½•ä¾ç„¶å¯ä»¥çœ‹åˆ°view2ï¼Œè™½ç„¶view2è§†å›¾ä¸‹æ²¡æœ‰ä»»åŠ¡ã€‚ä½¿ç”¨æ’ä»¶è¿‡æ»¤ï¼Œä½†æ˜¯åªèƒ½å¯¹ä»»åŠ¡ç”Ÿæ•ˆï¼ŒçŸ³è€å¸ˆæ˜¯å¦æœ‰å¥½çš„å»ºè®®ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1117795,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0e/63/cef8f0f4.jpg","nickname":"çŸ³é›ªå³°","note":"","ucode":"2B3EA5B86D9A0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480040,"discussion_content":"æˆ‘ç†è§£ä¸åº”è¯¥å‡ºç°è¿™ç§é—®é¢˜å‘€ï¼Œæˆ‘æ˜å¤©å»å…¬å¸çœ‹ä¸‹ï¼Œä½ å¯ä»¥åŠ æˆ‘å¾®ä¿¡æ²Ÿé€šå“ˆï¼Œcendrier","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577983903,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}