{"id":165506,"title":"24 | Android Toast识别","content":"<p><strong>Appium参考文档汇总与安装、课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/Geek_AppAutomationTesting\">https://gitee.com/geektime-geekbang/Geek_AppAutomationTesting</a><br>\n<strong>APIDemos-debug.apk</strong><br>\n<a href=\"https://github.com/appium/java-client/blob/master/src/test/java/io/appium/java_client/ApiDemos-debug.apk\">https://github.com/appium/java-client/blob/master/src/test/java/io/appium/java_client/ApiDemos-debug.apk</a></p>","comments":[{"had_liked":false,"id":154198,"user_name":"Meghan","can_delete":false,"product_type":"c3","uid":1630311,"ip_address":"","ucode":"E69C460D2AE653","user_header":"https://static001.geekbang.org/account/avatar/00/18/e0/67/2932c17e.jpg","comment_is_top":false,"comment_ctime":1574390216,"is_pvip":false,"replies":[{"id":59232,"content":"seveniruby:~ seveniruby$ find $ANDROID_HOME -name aapt\n&#47;Users&#47;seveniruby&#47;Library&#47;Android&#47;sdk&#47;&#47;build-tools&#47;28.0.3&#47;aapt\n&#47;Users&#47;seveniruby&#47;Library&#47;Android&#47;sdk&#47;&#47;build-tools&#47;23.0.3&#47;aapt\n\n这是我的结果，说明你可能只是安装了sdk，却没下载任何对应的构建工具，你可以在用里面的工具安装下常用的几个android版本的构建工具","user_name":"作者回复","user_name_real":"seveniruby","uid":1029333,"ctime":1574405850,"ip_address":"","comment_id":154198,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100038001,"comment_content":"最后运行时报错如下，请老师同学们帮忙看下～～谢谢～\n\n&gt;       raise exception_class(message, screen, stacktrace)\nE       selenium.common.exceptions.WebDriverException: Message: An unknown server-side error occurred while processing the command. Original error: Could not find &#39;aapt&#39; in [&quot;&#47;Users&#47;yh&#47;Library&#47;Android&#47;sdk&#47;platform-tools&#47;aapt&quot;,&quot;&#47;Users&#47;yh&#47;Library&#47;Android&#47;sdk&#47;emulator&#47;aapt&quot;,&quot;&#47;Users&#47;yh&#47;Library&#47;Android&#47;sdk&#47;tools&#47;aapt&quot;,&quot;&#47;Users&#47;yh&#47;Library&#47;Android&#47;sdk&#47;tools&#47;bin&#47;aapt&quot;]. Do you have Android Build Tools installed at &#39;&#47;Users&#47;yh&#47;Library&#47;Android&#47;sdk&#39;?\n\nvenv&#47;lib&#47;python3.7&#47;site-packages&#47;selenium&#47;webdriver&#47;remote&#47;errorhandler.py:242: WebDriverException\n\nAssertion failed","like_count":0,"discussions":[{"author":{"id":1029333,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erNI8QsCiaEX6OPqbVjAExp28Un7mamZHTbKRgiaC8VnW2ON9mv3hBibiavKQFLH1qFv2JNWibHRdwMHTQ/132","nickname":"seveniruby","note":"","ucode":"F4E4FD1E0D55B1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475405,"discussion_content":"seveniruby:~ seveniruby$ find $ANDROID_HOME -name aapt\n/Users/seveniruby/Library/Android/sdk//build-tools/28.0.3/aapt\n/Users/seveniruby/Library/Android/sdk//build-tools/23.0.3/aapt\n\n这是我的结果，说明你可能只是安装了sdk，却没下载任何对应的构建工具，你可以在用里面的工具安装下常用的几个android版本的构建工具","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574405850,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":153965,"user_name":"never","can_delete":false,"product_type":"c3","uid":1579932,"ip_address":"","ucode":"D8DA4ED4D576C2","user_header":"https://static001.geekbang.org/account/avatar/00/18/1b/9c/53e111be.jpg","comment_is_top":false,"comment_ctime":1574337929,"is_pvip":false,"replies":[{"id":59234,"content":"你得自己检查下\n1、你的应用弹出的是标准的toast，还是自己做的提示控件\n2、你用的是否是automationName=Uiautomator2","user_name":"作者回复","user_name_real":"seveniruby","uid":1029333,"ctime":1574405953,"ip_address":"","comment_id":153965,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100038001,"comment_content":"java获取toast的driver.findElementByXPath(&quot;&#47;&#47;*[@class=\\&quot;android.widget.Toast\\&quot;]&quot;).getText();\n一直报错，提示获取不到，报---org.openqa.selenium.NoSuchElementException: An element could not be located on the page using the given search parameters.  每次都是到最后一步就报错了，麻烦老师帮忙看下~~","like_count":0,"discussions":[{"author":{"id":1029333,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erNI8QsCiaEX6OPqbVjAExp28Un7mamZHTbKRgiaC8VnW2ON9mv3hBibiavKQFLH1qFv2JNWibHRdwMHTQ/132","nickname":"seveniruby","note":"","ucode":"F4E4FD1E0D55B1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475339,"discussion_content":"你得自己检查下\n1、你的应用弹出的是标准的toast，还是自己做的提示控件\n2、你用的是否是automationName=Uiautomator2","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574405953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1579932,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1b/9c/53e111be.jpg","nickname":"never","note":"","ucode":"D8DA4ED4D576C2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":56042,"discussion_content":"嗯嗯，已经找到原因了，因为电脑上装的是appium1.13.0版本，用的是Uiautomator，升级版本之后用Uiautomator2就好了，谢谢~","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574426734,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1546346,"avatar":"https://static001.geekbang.org/account/avatar/00/17/98/6a/28036635.jpg","nickname":"竹筒粽子变寿司🍣","note":"","ucode":"E99AED7B2D22C4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1579932,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1b/9c/53e111be.jpg","nickname":"never","note":"","ucode":"D8DA4ED4D576C2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":154867,"discussion_content":"你好，能加个微信或者扣扣吗？我也在学这个课程，想找个一块学习的人沟通交流","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580193098,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":56042,"ip_address":"","group_id":0},"score":154867,"extra":""}]},{"author":{"id":1717103,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/33/6f/9b58ffca.jpg","nickname":"肥鸽子","note":"","ucode":"F071FD08C2C2B5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":122860,"discussion_content":"已解决","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578377185,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":153338,"user_name":"MR. 許","can_delete":false,"product_type":"c3","uid":1713584,"ip_address":"","ucode":"44A0EAFBCE70C4","user_header":"https://static001.geekbang.org/account/avatar/00/1a/25/b0/1eb9a920.jpg","comment_is_top":false,"comment_ctime":1574219952,"is_pvip":false,"replies":[{"id":59250,"content":"new UiScrollable(\nnew UiSelector().scrollable(true).instance(0)\n)代表寻找一个可以滚动的控件，并赋值给一个具备滚动方法的类实例里。\n\n.scrollIntoView(new UiSelector().text(&quot;2025&quot;).instance(0));\n代表滚动到特定的控件，滚动时只要出现对应元素就停止滚动。这是Uiautomator底层封装的一个便捷功能。","user_name":"作者回复","user_name_real":"seveniruby","uid":1029333,"ctime":1574407388,"ip_address":"","comment_id":153338,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100038001,"comment_content":"老师，能不能演示下时间控件的滑动，我用了&#39;new UiScrollable(new UiSelector().scrollable(true).instance(0)).scrollIntoView(new UiSelector().text(&quot;2025&quot;).instance(0));&#39;\n但是我并不能滑动到2025年。还有能不能具体解释下这条命令是如何使用的，比如instance是啥意思","like_count":0,"discussions":[{"author":{"id":1029333,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erNI8QsCiaEX6OPqbVjAExp28Un7mamZHTbKRgiaC8VnW2ON9mv3hBibiavKQFLH1qFv2JNWibHRdwMHTQ/132","nickname":"seveniruby","note":"","ucode":"F4E4FD1E0D55B1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475127,"discussion_content":"new UiScrollable(\nnew UiSelector().scrollable(true).instance(0)\n)代表寻找一个可以滚动的控件，并赋值给一个具备滚动方法的类实例里。\n\n.scrollIntoView(new UiSelector().text(&amp;quot;2025&amp;quot;).instance(0));\n代表滚动到特定的控件，滚动时只要出现对应元素就停止滚动。这是Uiautomator底层封装的一个便捷功能。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574407388,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221294,"user_name":"176","can_delete":false,"product_type":"c3","uid":1448494,"ip_address":"","ucode":"838D56DC1112E4","user_header":"https://static001.geekbang.org/account/avatar/00/16/1a/2e/3e647221.jpg","comment_is_top":false,"comment_ctime":1590465638,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100038001,"comment_content":"请问一个关于客户端自定的toast控件如何定位的问题（跟系统差不多属性的toast控件）\n在appium desktop 以及 uiautomatorviewer内的截屏均能看到该元素，但是在控件树内是没有这个元素的相关信息\n请问这种要如何定位呢","like_count":2},{"had_liked":false,"id":206988,"user_name":"延续","can_delete":false,"product_type":"c3","uid":1224140,"ip_address":"","ucode":"82CDD56922BDEC","user_header":"","comment_is_top":false,"comment_ctime":1586969665,"is_pvip":false,"replies":null,"discussion_count":3,"race_medal":0,"score":2,"product_id":100038001,"comment_content":"https:&#47;&#47;github.com&#47;appium&#47;java-client&#47;blob&#47;master&#47;src&#47;test&#47;java&#47;io&#47;appium&#47;java_client&#47;ApiDemos-debug.apk，，课程下面给的这个链接打不开呀，显示404错误，有同学下载成功了么？","like_count":2,"discussions":[{"author":{"id":1175287,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ee/f7/76f2e97b.jpg","nickname":"莉","note":"","ucode":"763AC7CB28422E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550452,"discussion_content":"https://github.com/appium/android-apidemos/releases 这个可以\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644548546,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1395937,"avatar":"https://static001.geekbang.org/account/avatar/00/15/4c/e1/814431e9.jpg","nickname":"阎晓静","note":"","ucode":"55DA133B3B5E4E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296091,"discussion_content":"https://github.com/appium/appium/blob/master/sample-code/apps/ApiDemos-debug.apk 这个链接可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596449583,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2031630,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/00/0e/71e97a7f.jpg","nickname":"PLUTO","note":"","ucode":"C917BA509D0CFC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":280705,"discussion_content":"同打不开","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591602458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":378841,"user_name":"Ming","can_delete":false,"product_type":"c3","uid":1211781,"ip_address":"上海","ucode":"240D91130D77EE","user_header":"https://static001.geekbang.org/account/avatar/00/12/7d/85/bcb08e74.jpg","comment_is_top":false,"comment_ctime":1690874144,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100038001,"comment_content":"https:&#47;&#47;testerhome.com&#47;topics&#47;21102\n霍格沃兹测试学院 appium课程参考资料\n\nOops, Page not found\n似乎没有这个页面哦！大哥，回去看看别的吧。","like_count":0},{"had_liked":false,"id":186996,"user_name":"wlp","can_delete":false,"product_type":"c3","uid":1848381,"ip_address":"","ucode":"86331734151D3C","user_header":"","comment_is_top":false,"comment_ctime":1583985241,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100038001,"comment_content":"想到一个问题, 平时h5页面上如果有需要下拉的操作眼睛才能看到需要定位的组件,但是该组件在html已经加载出来了,所以并没有加下拉这一步操作到自动化里,为什么appium跟selenium在这一点上不一样,安卓上可以这么做么,或者说是不是我之前的操作不规范","like_count":0,"discussions":[{"author":{"id":1388479,"avatar":"https://static001.geekbang.org/account/avatar/00/15/2f/bf/85b957fc.jpg","nickname":"咕咕咕","note":"","ucode":"5D35932F7118EC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":229889,"discussion_content":"安卓不能 安卓的recylerview里面的子元素是复用的，一开始后面的并不会加载到视图中 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586697708,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":175443,"user_name":"胖虫子","can_delete":false,"product_type":"c3","uid":1100956,"ip_address":"","ucode":"21FC09D0121B4F","user_header":"https://static001.geekbang.org/account/avatar/00/10/cc/9c/ec71155f.jpg","comment_is_top":false,"comment_ctime":1580721296,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100038001,"comment_content":"老师，设置启动参数uiautomator2 ，一启动就报错，提示，make sure the application under test does not crash and investigate the logcat output ，如果不用uiaotomator2 ，用1正常","like_count":0},{"had_liked":false,"id":173699,"user_name":"竹筒粽子变寿司🍣","can_delete":false,"product_type":"c3","uid":1546346,"ip_address":"","ucode":"E99AED7B2D22C4","user_header":"https://static001.geekbang.org/account/avatar/00/17/98/6a/28036635.jpg","comment_is_top":false,"comment_ctime":1579662753,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100038001,"comment_content":"老师，我用了和视频里一样的定位方法，对toast进行定位并且捕获内容，但运行结果提示失败说找不到这样的元素。我用的是mumu模拟器","like_count":0,"discussions":[{"author":{"id":1784306,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/39/f2/9cc0eacd.jpg","nickname":"HaiYan","note":"","ucode":"6BC5616458FB76","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":165733,"discussion_content":"我的也是，我使用的是真机，也捕获不到Toast","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581319243,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}