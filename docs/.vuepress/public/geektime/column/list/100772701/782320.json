{"id":782320,"title":"01ï½œåˆ—å¼å­˜å‚¨å·²ç»å–ä»£è¡Œå¼å­˜å‚¨äº†å—ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å½­æ—­ã€‚</p><p>ä»è¿™èŠ‚è¯¾å¼€å§‹ï¼Œæˆ‘ä»¬è¦ç§¯ç´¯ä¸€éƒ¨åˆ†æ•°æ®åº“çš„åŸºç¡€çŸ¥è¯†ã€‚ä»Šå¤©æˆ‘ä»¬ä¸»è¦èšç„¦åœ¨åˆ—å¼å­˜å‚¨å’Œè¡Œå¼å­˜å‚¨çš„åŒºåˆ«ä¸Šï¼Œå†ç»™ä½ ä»‹ç»ä¸€ä¸ªè¢«å¤šä¸ªæ•°æ®åº“å¼•æ“æ”¯æŒçš„ã€æœ€æµè¡Œçš„åˆ—å¼æ•°æ®å­˜å‚¨æ ¼å¼ã€‚</p><p>åœ¨å¤§æ•°æ®æ—¶ä»£ï¼Œåˆ—å¼å­˜å‚¨å‡ºç°çš„é¢‘ç‡å¾ˆé«˜ï¼Œè®¨è®ºåˆ—å¼å­˜å‚¨ä¼˜åŠ¿çš„æ–‡ç« æ±—ç‰›å……æ ‹ï¼Œè¿™äº›ä¿¡æ¯ç»™äººä¸€ç§â€œåˆ—å¼å­˜å‚¨éš¾é“æ˜¯æœ€ä¼˜ç§€çš„æ•°æ®åº“å­˜å‚¨æ ¼å¼â€çš„æ„Ÿè§‰ï¼Œå®é™…ä¸Šè¿™å¯èƒ½æ˜¯ä¸€ä¸ªâ€œå¯å¾—æ€§å¯å‘â€ã€‚æ¯”å¦‚å¦‚æœä½ ç»å¸¸å¬åˆ°é£æœºäº‹æ•…ï¼Œä½ å¯èƒ½ä¼šè§‰å¾—é£æœºæ˜¯æœ€å±é™©çš„äº¤é€šå·¥å…·ä¸€æ ·ï¼Œè€Œå®é™…ä¸Šé£æœºæ˜¯ä¸€ä¸ªç›¸å¯¹æ›´å®‰å…¨çš„äº¤é€šå·¥å…·ã€‚</p><p>é‚£è¡Œå¼å­˜å‚¨çœŸçš„ä¼šè¢«åˆ—å¼å­˜å‚¨æ›¿ä»£å—ï¼Ÿæˆ‘ä»¬å…ˆæ¥ç®€å•å¯¹æ¯”ä¸€ä¸‹å®ƒä»¬ä¹‹é—´çš„ä¸åŒã€‚</p><h2>è¡Œåˆ—å­˜å‚¨å¯¹æ¯”</h2><p>é¡¾åæ€ä¹‰ï¼Œè¡Œå¼å­˜å‚¨å…¶å®å°±æ˜¯å°†æ•°æ®åº“çš„ä¸€è¡Œæ•°æ®ç‰©ç†ä¸Šä¹Ÿå­˜å‚¨åœ¨ä¸€èµ·ï¼Œåˆ—å¼å­˜å‚¨åˆ™æ˜¯æŒ‰ç…§åˆ—å°†æ•°æ®ç‰©ç†ä¸Šå­˜å‚¨åœ¨ä¸€èµ·ã€‚</p><p>ä½ çœ‹ä¸‹é¢è¿™å¼ å›¾ï¼ŒR1C1ä»£è¡¨ç¬¬1è¡Œæ•°æ®çš„ç¬¬1åˆ—ï¼ŒR3C1ä»£è¡¨ç¬¬3è¡Œçš„ç¬¬1åˆ—ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/23/7f/23023606553ae2ba3649f8bf921eea7f.png?wh=1352x1024\" alt=\"å›¾ç‰‡\"></p><p>æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿå‡ºä¸¤ç‚¹ã€‚</p><ul>\n<li>åœ¨åˆ—å¼å­˜å‚¨ä¸‹ï¼Œåˆ—C1çš„æ•°æ®åœ¨ç£ç›˜ä¸Šèšç°‡åœ°å­˜å‚¨åœ¨æ•°æ®å—ï¼ˆæˆ–è€…é¡µï¼‰ï¼Œä½†æ˜¯ä¸€åˆ—å¯ä»¥ç”±å¤šä¸ªæ•°æ®å—æˆ–è€…æ•°æ®æ–‡ä»¶å­˜å‚¨ã€‚</li>\n<li>åœ¨è¡Œå¼å­˜å‚¨ä¸‹ï¼Œè¡ŒR1çš„æ•°æ®åœ¨ç£ç›˜ä¸Šèšç°‡åœ°å­˜å‚¨åœ¨æ•°æ®å—ä¸Šã€‚</li>\n</ul><p>å…¶å®è¡Œå¼å­˜å‚¨ä¸åˆ—å¼å­˜å‚¨çš„å‘å±•ï¼Œä¸å…¶å¯¹åº”çš„ä¸åŒç±»å‹çš„æ•°æ®åº“å‘å±•æ¯æ¯ç›¸å…³ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­ã€‚å‡è®¾ä¸€ä¸ªè®¢å•è¡¨æœ‰40ä¸ªå­—æ®µï¼ŒåŒ…æ‹¬è®¢å•ç¼–å·ã€è®¢å•é‡‘é¢ã€è®¢å•çŠ¶æ€ã€å•†å“åç§°ã€ä¼šå‘˜ä¿¡æ¯ç­‰ã€‚</p><!-- [[[read_end]]] --><p>åœ¨<strong>OLTPï¼ˆ<strong><strong>è”æœº</strong></strong>äº‹åŠ¡å¤„ç†ï¼‰åœºæ™¯</strong>ä¸‹ï¼Œé€šå¸¸æˆ‘ä»¬çš„éœ€æ±‚æ˜¯æ ¹æ®è®¢å•ç¼–å·æ¥æ›´æ–°è®¢å•çŠ¶æ€ï¼Œæˆ–è€…é€šè¿‡è®¢å•ç¼–å·æŸ¥è¯¢è®¢å•çš„ç»†èŠ‚ä¿¡æ¯ï¼ˆé‡‘é¢ã€å•†å“åç§°ç­‰ï¼‰æ¥å¤„ç†å”®åéœ€æ±‚ç­‰ã€‚</p><p>åœ¨è¿™äº›åœºæ™¯é‡Œï¼Œéƒ½éœ€è¦ç”¨è®¢å•ç¼–å·æ¥æŠŠè®¢å•çš„è¯¦æƒ…ï¼Œä¹Ÿå°±æ˜¯è¿™40ä¸ªå­—æ®µéƒ½æŸ¥è¯¢ã€å±•ç¤ºå‡ºæ¥ï¼Œæ›´æ–°æŸäº›å­—æ®µåï¼Œå†æ•´è¡Œå­˜å‚¨ã€‚</p><p>å¦‚æœä½¿ç”¨è¡Œå¼å­˜å‚¨ï¼Œè¿™40ä¸ªå­—æ®µå°±ä¼šå­˜å‚¨åœ¨ç£ç›˜çš„åŒä¸€ä¸ªæ•°æ®å—é‡Œï¼Œè¯»å–æ•°æ®çš„æ—¶å€™èƒ½å¤Ÿä¸€æ¬¡æ€§é¡ºåºè¯»å–å‡ºæ¥ã€‚åä¹‹ï¼Œå¦‚æœä½¿ç”¨åˆ—å¼å­˜å‚¨ï¼Œä¸€è¡Œæ•°æ®çš„è¿™40ä¸ªå­—æ®µå¯èƒ½åˆ†å¸ƒåœ¨40ä¸ªæ•°æ®å—é‡Œï¼Œæˆ‘ä»¬è¦éå†è¿™40ä¸ªæ•°æ®å—æ‰èƒ½å°†è¿™ä¸ªè®¢å•çš„è¯¦æƒ…â€œå‡‘â€å®Œæ•´ï¼Œæ˜¯ä¸æ˜¯å¾ˆæ¼ç«ï¼Ÿ</p><p>æ‰€ä»¥ï¼ŒOLTPåœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨è¡Œå¼å­˜å‚¨ï¼Œè¿™å°±æ˜¯ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“çš„åšæ³•ã€‚</p><p>å¥½ï¼Œæ€»ç»“ä¸€ä¸‹ã€‚è™½ç„¶ä¸æ˜¯è¯´å…³ç³»å‹æ•°æ®åº“å°±ä¸€å®šè¦ç”¨è¡Œå¼å­˜å‚¨ï¼Œä½†æ˜¯å…³ç³»å‹æ•°æ®åº“çš„ä¸€äº›ç‰¹æ€§å°±å†³å®šäº†ä½¿ç”¨è¡Œå¼å­˜å‚¨æ˜¯ä¸€ä¸ªè¾ƒä¼˜çš„é€‰æ‹©ã€‚</p><ol>\n<li>åœ¨OLTPåœºæ™¯ï¼Œæ•°æ®ä¸€èˆ¬ä»¥è¡Œçš„å½¢å¼è¿›è¡Œå¤„ç†ä¸æŸ¥è¯¢ï¼Œä¸€è¡Œæ•°æ®é€šå¸¸è¢«ä¸€èµ·æ’å…¥ã€ä¸€èµ·æŸ¥è¯¢ã€ä¸€èµ·æ›´æ–°ï¼Œè¿™æ ·ï¼Œä½¿ç”¨è¡Œå¼å­˜å‚¨å°±èƒ½å¤Ÿä»¥æœ€å°‘çš„ç£ç›˜è¯»å†™ä»£ä»·å¤„ç†ä¸€è¡Œä¸šåŠ¡æ•°æ®çš„è¯»å†™ã€‚</li>\n<li>å…³ç³»å‹æ•°æ®åº“éœ€è¦æ”¯æŒäº‹åŠ¡ï¼Œä¸€è¡Œæ•°æ®æˆ–è€…å¤šè¡Œæ•°æ®éœ€è¦èƒ½å¤Ÿä¸€èµ·æŒä¹…åŒ–æˆåŠŸæˆ–è€…ä¸€èµ·å¤±è´¥ï¼ŒæŒ‰è¡Œå­˜å‚¨èƒ½å¤Ÿç®€åŒ–è¯»å†™çš„I/Oï¼Œæå‡æ€§èƒ½ã€‚</li>\n</ol><p>è¿™é‡Œæä¸€å¥ï¼ŒMySQLè¿™ç§å…³ç³»å‹æ•°æ®åº“æ•°æ®çš„å†™å…¥å¹¶ä¸æ˜¯ç›´æ¥å‘ç”Ÿåœ¨ç£ç›˜ä¸Šçš„ã€‚å®ƒçš„æ›´æ–°æ“ä½œé¦–å…ˆæ˜¯å°†æ•°æ®å†™å…¥å†…å­˜ï¼Œå¹¶åŒæ—¶ç”Ÿæˆä¸€æ¡Redoæ—¥å¿—è®°å½•ã€‚è¿™ç§æ—¥å¿—è®°å½•æœºåˆ¶ä¿è¯äº†æ•°æ®çš„æŒä¹…æ€§å’Œå¯æ¢å¤æ€§ï¼Œç”¨äºæ•…éšœæ—¶é‡åšæ¥æ¢å¤æ•°æ®ã€‚å½“è¾¾åˆ°ç‰¹å®šçš„åˆ·æ–°é˜ˆå€¼æ—¶ï¼Œå¦‚äº‹åŠ¡æäº¤æˆ–æ—¥å¿—ç¼“å†²åŒºæ»¡ï¼Œå†…å­˜ä¸­çš„æ•°æ®æ‰ä¼šè¢«å†™å…¥ç£ç›˜ã€‚</p><p>å› æ­¤ï¼Œå³ä½¿åœ¨äº‹åŠ¡çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œæ•°æ®çš„å†™å…¥æˆ–æ›´æ–°ä¹Ÿä¸æ˜¯ç«‹å³æ˜ å°„åˆ°ç£ç›˜ä¸Šçš„è¡Œå¼å­˜å‚¨ç»“æ„ä¸­çš„ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯ç”±InnoDBå­˜å‚¨å¼•æ“å†…éƒ¨çš„ç¼“å†²å’Œæ—¥å¿—åˆ·æ–°æœºåˆ¶å†³å®šçš„ï¼Œèƒ½å¤Ÿæœ‰æ•ˆåœ°æé«˜äº‹åŠ¡å¤„ç†çš„æ€§èƒ½ã€‚</p><p>é‚£åˆ°äº†<strong>OLAPï¼ˆè”æœºåˆ†æå¤„ç†ï¼‰åœºæ™¯</strong>ä¸‹å‘¢ï¼ŸåŒæ ·çš„è®¢å•è¡¨ï¼Œæˆ‘ä»¬å…³æ³¨çš„æ˜¯é”€å”®é¢æ€ä¹ˆæ ·ï¼Œå“ªäº›å•†å“å“ç±»å–å¾—æ¯”è¾ƒå¥½ç­‰ã€‚è¿™æ—¶å€™é€šå¸¸æ˜¯æŒ‰æ—¥æœŸç»Ÿè®¡ä¸€ä¸‹è®¢å•é‡‘é¢å­—æ®µçš„æ€»å’Œã€‚</p><p>å¦‚æœä½¿ç”¨åˆ—å¼å­˜å‚¨ï¼ŒåŒä¸€åˆ—çš„å€¼å­˜å‚¨åœ¨ä¸€èµ·ï¼Œå‡è®¾æŸå¤©çš„é”€å”®é¢æœ‰10000ä¸ªè®¢å•éœ€è¦ç»Ÿè®¡ï¼Œé‚£ä¹ˆå¯èƒ½5000ä¸ªè®¢å•çš„è®¢å•é‡‘é¢åˆ—å­˜å‚¨åœ¨ä¸€èµ·ï¼Œè®¢å•é‡‘é¢è¿™ä¸€åˆ—å°±åªå ç”¨2ä¸ªæ•°æ®å—ï¼Œè¿™æ ·åªéœ€è¦æ‰«æè¿™2ä¸ªæ•°æ®å—ï¼Œå°†æ‰«æåˆ°çš„æ•°æ®ç›´æ¥ç´¯åŠ ï¼Œå°±å¾—åˆ°äº†é”€å”®é¢ã€‚</p><p>åä¹‹ï¼Œå¦‚æœä½¿ç”¨è¡Œå¼å­˜å‚¨ï¼Œä¸€ä¸ªæ•°æ®å—å³ä½¿èƒ½å¤Ÿå­˜å‚¨1000è¡Œæ•°æ®ï¼Œé‚£ä¹ˆä¹Ÿè¦æ‰«æ10000/1000=10ä¸ªæ•°æ®å—ï¼Œæ‰«æå®Œå…¨éƒ¨æ•°æ®ï¼Œä»æ•°æ®è¡Œä¸­æŒ‘å‡ºè®¢å•é‡‘é¢çš„åˆ—ï¼Œæ‰èƒ½ç´¯åŠ å¾—åˆ°è®¢å•é‡‘é¢çš„æ±‡æ€»ã€‚</p><p>æ‰€ä»¥OLAPåœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨åˆ—å¼å­˜å‚¨ï¼Œè¿™ä¹Ÿæ˜¯åˆ†æå‹æ•°æ®åº“çš„åšæ³•ã€‚</p><p>å¥½ï¼Œå’±ä»¬ç”¨æ›´ä¸“ä¸šçš„è¯æ€»ç»“ä¸€ä¸‹ã€‚åˆ—å¼å­˜å‚¨é€‚ç”¨äºåˆ†æå‹æ•°æ®åº“ï¼Œæœ‰ä¸¤ç‚¹åŸå› ã€‚</p><ol>\n<li>åˆ†æå‹æ•°æ®åº“ä¸€èˆ¬éƒ½æ˜¯æ‰¹é‡å†™å…¥æ•°æ®ï¼ŒåŒä¸€åˆ—æ•°æ®ä¸€èµ·æ‰¹é‡å†™å…¥ï¼Œè¿™ä¸€åˆ—çš„æ•°æ®ç±»å‹ç›¸åŒï¼Œæ‰€ä»¥å…·å¤‡æ›´é«˜çš„å‹ç¼©ç‡ï¼Œå¯ä»¥åŠ å¿«æ•°æ®çš„è¯»å†™é€Ÿåº¦ã€‚</li>\n<li>OLAPåœºæ™¯ä¸€èˆ¬éœ€è¦æ‰«æå¤§é‡æ•°æ®è¡Œï¼Œä½†æ˜¯åŸºæœ¬æ˜¯å¯¹ä¸€åˆ—æˆ–è€…å¤šåˆ—è¿›è¡Œç»Ÿè®¡åˆ†æã€èšåˆç­‰ï¼Œåˆ—å¼å­˜å‚¨å¯ä»¥åªè¯»å–æ‰€éœ€çš„åˆ—ï¼Œä»è€Œé¿å…åŠ è½½æ•´ä¸ªè¡Œçš„æ•°æ®ï¼Œè¿™å¤§å¤§å‡å°‘äº†I/Oæ“ä½œï¼Œæé«˜äº†æŸ¥è¯¢æ•ˆç‡ã€‚</li>\n</ol><p>ç”¨æ¯”å–»æ¥è¯´çš„è¯ï¼ŒOLTPåƒå•ä¸ªä¸šåŠ¡æ‰§è¡Œè€…ï¼Œå¿«é€Ÿçš„å¤„ç†å•ä¸ªäº‹åŠ¡ä»¥åŠæœ‰é™æ¡æ•°æ®ï¼Œç¡®ä¿ä¸šåŠ¡é¡ºç•…è¿›è¡Œï¼›è€ŒOLAPå°±åƒæ˜¯æˆ˜ç•¥åˆ†æå®¶ï¼Œæ·±å…¥å‰–ææ•°æ®ï¼Œä¸ºå†³ç­–æä¾›æ”¯æŒã€‚</p><p>å›åˆ°å¼€å¤´ï¼Œå…¶å®åˆ—å¼å­˜å‚¨è¢«æåŠè¶Šæ¥è¶Šå¤šä¸»è¦è¿˜æ˜¯å¤§æ•°æ®æŠ€æœ¯çš„å‘å±•ï¼Œæ•°æ®å·²ç»æ˜¯ä¼ä¸šæ•°å­—åŒ–å†³ç­–ä¸æˆ˜ç•¥æ–¹å‘åˆ¶å®šçš„ä¸€ä¸ªå¯é å‚è€ƒã€‚è€Œè¿™äº›å†³ç­–çš„æ•°æ®æ”¯æ’‘éƒ½æ˜¯é€šè¿‡é‡‡é›†ä¼ä¸šå†…å¤–éƒ¨å„ä¸ªç³»ç»Ÿçš„æ•°æ®ï¼Œç„¶åæ±‡èšåˆ°åŸºäºåˆ—å¼å­˜å‚¨çš„æ•°æ®ä»“åº“ï¼Œæœ€åé€šè¿‡å¤šç»´åˆ†ææŒ–æ˜å‡ºæ¥çš„ã€‚æ‰€ä»¥æ‰ä¼šç»™ä½ ä¸€ç§åˆ—å¼å­˜å‚¨é©¬ä¸Šè¦å–ä»£è¡Œå¼å­˜å‚¨çš„é”™è§‰ã€‚</p><p>è¯è¯´å›æ¥ï¼Œåˆ†å¸ƒå¼æ—¶ä»£çš„æ•°æ®åº“ï¼ŒåŸºæœ¬éƒ½ä½¿ç”¨çš„æ˜¯åˆ—å¼å­˜å‚¨ï¼Œæ¯”å¦‚HBaseã€Cassandraã€ClickHouseã€StarRocksç­‰ã€‚è¿™é‡Œæä¸€ä¸‹å…¶å®HBaseæ˜¯ä¸€ä¸ªå®½åˆ—å­˜å‚¨ï¼ŒåŸºæœ¬è·Ÿè¡Œå¼å­˜å‚¨å·®ä¸å¤šäº†ã€‚</p><p>æˆ‘ç»™ä½ æä¾›ä¸€ä¸ªè¡¨æ ¼ï¼Œæ˜¯å’±ä»¬åé¢è¦å­¦ä¹ çš„HBaseã€StarRockså’ŒClickHouseçš„å­˜å‚¨æ¨¡å¼å’Œé€‚ç”¨åœºæ™¯ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/86/9d/8687ce7e95yy4a3bc774c41935438b9d.png?wh=4446x2667\" alt=\"å›¾ç‰‡\"></p><p>æœ‰ä¸€ä¸ªç»†èŠ‚éœ€è¦æ³¨æ„ï¼Œè¡¨æ ¼é‡Œè™½ç„¶å†™ç€HBaseæ˜¯å®½åˆ—å­˜å‚¨æ¨¡å¼ï¼Œä½†åŸºæœ¬ä¸Šè¿˜æ˜¯ä¸€è¡Œæ•°æ®å­˜å‚¨åœ¨ä¸€èµ·ï¼Œæ‰€ä»¥èƒ½å¤Ÿåœ¨é«˜å¹¶å‘ã€å®æ—¶è¦æ±‚é«˜çš„OLTPåœºæ™¯ä¸‹ä½¿ç”¨ï¼Œå…¶ä»–ä¸¤ä¸ªåˆ—å¼å­˜å‚¨çš„æ•°æ®åº“åˆ™éƒ½é€‚ç”¨äºæ•°æ®åˆ†æçš„åœºæ™¯ï¼Œä¸è¿‡åœ¨å¤§é‡æ•°æ®åˆ†æä¸å®æ—¶æ€§èƒ½ä¸Šåšäº†ä¸€äº›å¹³è¡¡å–èˆã€‚</p><h2>Parquetï¼šä¸€ç§å­˜å‚¨æ ¼å¼</h2><p>åˆ—å¼å­˜å‚¨ä½œä¸ºæˆ‘ä»¬æ¥ä¸‹æ¥è¦ä»‹ç»çš„å‡ ç§ç±»å‹æ•°æ®åº“çš„åŸºçŸ³ï¼Œå¾ˆå€¼å¾—è¯¦ç»†è¯´è¯´ã€‚å°¤å…¶å®ƒæ”¯æŒçš„å¾ˆå¤šç§å­˜å‚¨æ ¼å¼ï¼Œæœ‰Apache Parquetã€Apache ORCç­‰ç­‰ã€‚</p><p>è¿™èŠ‚è¯¾æˆ‘ä»¬å…ˆèŠèŠApache Parquetã€‚ä¹‹æ‰€ä»¥é€‰å®ƒï¼Œå°±æ˜¯å› ä¸ºå®ƒæ˜¯åˆ—å¼å­˜å‚¨ä¸­æœ€æµè¡Œçš„æ ¼å¼ï¼Œä¸»æµæ•°æ®åº“åŸºæœ¬éƒ½æ”¯æŒï¼Œå¾ˆå¤šåˆ†æå·¥å…·ä¹Ÿèƒ½ç›´æ¥åˆ†æParquetæ–‡ä»¶ï¼Œå·¥ä½œä¸­éœ€è¦è¿ç§»æ•°æ®ã€åˆ†ææ•°æ®ã€å®æ—¶è®¡ç®—ç­‰ç­‰ï¼Œå¤§å¤šéƒ½ä¼šå’Œè¿™ç§æ ¼å¼æ‰“äº¤é“ã€‚</p><p>æˆ‘ä»¬å°†è¦ä»‹ç»çš„å‡ ä¸ªæ•°æ®åº“ä¹Ÿéƒ½ä¸Parquetæœ‰åƒä¸ä¸‡ç¼•çš„å…³è”ï¼Œæ¯”å¦‚HBaseæ•°æ®å¯ä»¥å¯¼å‡ºä¸ºParquetï¼Œç„¶åç”¨Sparkç­‰å·¥å…·æ¥è¿›è¡Œæ‰¹é‡åˆ†æã€‚ClickHouseä¸StarRockséƒ½æ”¯æŒç›´æ¥è¯»å–ä¸å†™å…¥Parquetæ•°æ®ã€‚</p><p>å®é™…ä¸Šï¼ŒParquetä¸å•å•æ˜¯ä¸€ä¸ªæ•°æ®åº“çš„å­˜å‚¨æ ¼å¼ï¼Œå®ƒåŒæ ·èƒ½å¤Ÿç”¨äºå¤§è§„æ¨¡çš„æ•°æ®åˆ†æä¸å¤„ç†ï¼Œæ¯”å¦‚ä¸Sparkã€Flinkç­‰é›†æˆï¼Œä¹Ÿæ”¯æŒç›´æ¥ç”¨Pythonã€Javaç­‰è¯­è¨€æ¥è¯»å†™ï¼Œç”šè‡³ä½ å¯ä»¥å°†è‡ªå·±çš„æ•°æ®å†™æˆä¸€ä¸ªParquetæ–‡ä»¶ï¼Œç„¶åä½¿ç”¨æ”¯æŒParquetæ ¼å¼çš„å¼•æ“æ¥åˆ†æä½ çš„æ•°æ®ã€‚</p><p>é‚£Parquetåˆ°åº•ä¸ºä»€ä¹ˆèƒ½è¢«å¹¿æ³›æ¥å—å¹¶æµè¡Œèµ·æ¥å‘¢ï¼Ÿå› ä¸ºé™¤äº†ä¾æ‰˜äºHadoopç”Ÿæ€ä½“ç³»çš„æ”¯æŒå¤–ï¼ŒParquetä¹Ÿæ»¡è¶³äº†ä¸€ä¸ªä¼˜ç§€çš„å­˜å‚¨æ ¼å¼è®¾è®¡å„ä¸ªæ–¹é¢çš„è¦æ±‚ã€‚</p><ol>\n<li>æ”¯æŒå¤šç§é«˜æ•ˆçš„ç¼–ç ä¸å‹ç¼©ç®—æ³•ï¼Œåœ¨å‡å°‘å­˜å‚¨ç©ºé—´çš„åŒæ—¶ï¼Œä»ç„¶èƒ½å¤Ÿä¿æŒè‰¯å¥½çš„è¯»å–æ€§èƒ½ã€‚</li>\n<li>å…¼å®¹æ€§æ–¹é¢ä¸å±€é™äºHadoopç”Ÿæ€ï¼Œä¸å±€é™äºè¯­è¨€ï¼Œæä¾›äº†è·¨å¹³å°çš„æ•°æ®äº¤æ¢èƒ½åŠ›ã€‚</li>\n<li>æä¾›é«˜æ€§èƒ½æ”¯æŒï¼Œæ¯”å¦‚ä½¿ç”¨åˆ†åŒºã€ç´¢å¼•ã€å¸ƒéš†è¿‡æ»¤å™¨ç­‰æ¥æ”¯æŒè¿‡æ»¤æ‰ä¸éœ€è¦æ‰«æçš„æ•°æ®ç­‰ã€‚</li>\n</ol><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹Parquetæ–‡ä»¶æ ¼å¼é•¿ä»€ä¹ˆæ ·å­ã€‚</p><pre><code class=\"language-plain\">    4-byte magic number \"PAR1\"\n    &lt;Column 1 Chunk 1 + Column Metadata&gt;\n    &lt;Column 2 Chunk 1 + Column Metadata&gt;\n    ...\n    &lt;Column N Chunk 1 + Column Metadata&gt;\n    &lt;Column 1 Chunk 2 + Column Metadata&gt;\n    &lt;Column 2 Chunk 2 + Column Metadata&gt;\n    ...\n    &lt;Column N Chunk 2 + Column Metadata&gt;\n    ...\n    &lt;Column 1 Chunk M + Column Metadata&gt;\n    &lt;Column 2 Chunk M + Column Metadata&gt;\n    ...\n    &lt;Column N Chunk M + Column Metadata&gt;\n    File Metadata\n    4-byte length in bytes of file metadata (little endian)\n    4-byte magic number \"PAR1\"\n</code></pre><p>ç®€å•æ¥è¯´ï¼Œè¿™é‡Œæè¿°äº†ä¸€ä¸ªNåˆ—çš„è¡¨ï¼Œæ¯ä¸€åˆ—åˆè¢«åˆ†æˆMä¸ªè¡Œç»„ï¼ˆRow Groupï¼‰ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢çš„â€œChunk 1åˆ°Mâ€ã€‚è¡Œç»„å¯ä»¥çœ‹ä½œæ˜¯Parquetæ–‡ä»¶å†…éƒ¨çš„åˆ†åŒºï¼Œå­˜å‚¨ç€ä¸€å®šæ•°é‡çš„æ•°æ®è¡Œã€‚æ–‡ä»¶å†…å®¹ä¸­ï¼Œåˆ—å—æ—è¾¹è¿˜å­˜å‚¨ç€ä¸€ä¸ªåˆ—çš„å…ƒæ•°æ®ï¼Œåˆ—çš„å…ƒæ•°æ®åŒ…å«äº†åˆ—çš„æ•°æ®ç±»å‹ã€ç¼–ç å‹ç¼©æ–¹å¼ã€æ•°æ®çš„èµ·å§‹ä½ç½®ã€ç»Ÿè®¡å€¼ç­‰ã€‚</p><p>å†ä¸‹é¢çš„ä½ç½®ï¼Œè¿˜æœ‰ä¸€ä¸ªFile Metadataï¼Œæ˜¯æ–‡ä»¶çš„å…ƒæ•°æ®ã€‚æ–‡ä»¶å…ƒæ•°æ®ç”¨æ¥æè¿°æ•´ä¸ªæ–‡ä»¶çš„ç‰ˆæœ¬ä¿¡æ¯ã€schemaã€è¡Œç»„ä¿¡æ¯ç­‰ã€‚æ–‡ä»¶çš„å…ƒæ•°æ®çš„å†™å…¥æ˜¯åœ¨æ•°æ®å†™å…¥ä¹‹åå®Œæˆçš„ã€‚è¿™æ ·ï¼Œä¸€æ—¦æ•°æ®å†™å…¥å®Œæˆï¼Œå¯¹åº”çš„å…ƒæ•°æ®ä¹Ÿå°±ç¡®å®šäº†ã€‚è¿™ç§æ–¹å¼å¯ä»¥ä¸€æ¬¡æ€§å°†æ•°æ®å’Œå…ƒæ•°æ®ä¸€èµ·å†™å…¥æ–‡ä»¶ï¼Œé¿å…äº†éœ€è¦è¿›è¡Œæ›´æ–°çš„æƒ…å†µã€‚æ•°æ®è¯»å–çš„æ—¶å€™ä¹Ÿèƒ½é€šè¿‡æ–‡ä»¶å…ƒæ•°æ®å¿«é€Ÿæ‰¾åˆ°éœ€è¦è¯»å–çš„åˆ—å—ï¼ˆColumn Chunkï¼‰ã€‚</p><p>å½“ç„¶ä½ ä¹Ÿä¸éœ€è¦å»è®°ä½Parquetæ–‡ä»¶çš„è¯¦ç»†æ ¼å¼ï¼Œåªéœ€äº†è§£æ–‡ä»¶é‡Œé¢å­˜å‚¨äº†å“ªäº›æ•°æ®ä»¥åŠè¿™äº›æ•°æ®å¯ä»¥ç”¨æ¥å¹²ä»€ä¹ˆå°±å¥½äº†ã€‚</p><h3>æ„å»ºä½ è‡ªå·±çš„Parquetæ–‡ä»¶</h3><p>å‰é¢è¿˜æåˆ°Parquetå…·å¤‡å¾ˆå¥½çš„å…¼å®¹æ€§ï¼Œä¸å±€é™äºè¯­è¨€ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¾ˆå¤šæ–¹å¼æ¥æ„å»ºè‡ªå·±çš„Parquetæ•°æ®æ–‡ä»¶ã€‚æ¯”å¦‚ä½¿ç”¨Pythonæä¾›çš„PyArrowåº“ï¼Œå°±å¯ä»¥å¿«é€Ÿåœ°å°†ä½ çš„æ•°æ®å­˜å‚¨ä¸ºParquetæ–‡ä»¶ã€‚</p><p>åœ¨å¤§è§„æ¨¡çš„åˆ†å¸ƒå¼æ•°æ®ç³»ç»Ÿä¸­ï¼ŒåŒæ—¶å¤„ç†å¤§æ•°æ®é‡çš„å®æ—¶éšæœºå­˜å–ä¸æ‰¹é‡åˆ†ææ˜¯ä¸€ä¸ªå¾ˆå¤æ‚çš„é—®é¢˜ï¼Œå› ä¸ºæ²¡æœ‰ä¸€ä¸ªå­˜å‚¨å¼•æ“èƒ½å¤ŸåŒæ—¶ç²¾é€šå®æ—¶éšæœºå­˜å–ä¸æ‰¹é‡åˆ†æï¼Œæ‰€ä»¥è¯ç”Ÿäº†ä¸€ä¸ªå«åšLambdaçš„æ¶æ„ã€‚</p><p>Lambdaçš„æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡åˆ†å±‚ä¸ç®¡é“æ¥æ„å»ºä¸€ä¸ªæ··åˆæ¶æ„ã€‚æ¯”å¦‚é‡‡ç”¨HBaseæ¥æ»¡è¶³å®æ—¶éšæœºå­˜å–çš„éœ€æ±‚ï¼Œç„¶åå°†HBaseçš„æ•°æ®å¯¼å‡ºæ¥ï¼Œè½¬æˆParquetæ–‡ä»¶ï¼Œæ¥ç€å°†Parquetæ–‡ä»¶å¯¼å…¥åˆ°åƒHDFSä¹‹ç±»çš„æ–‡ä»¶å­˜å‚¨ä¸­ï¼Œæœ€åé€šè¿‡Sparkã€Impalaä¹‹ç±»çš„åˆ†æå¼•æ“æ¥æŸ¥è¯¢æ•°æ®ï¼Œæ»¡è¶³æ‰¹é‡åˆ†æçš„éœ€æ±‚ã€‚</p><p>å½“ç„¶ï¼ŒLambdaæ¶æ„å®é™…ä¸Šæ›´å¤æ‚ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥æ¨¡æ‹Ÿå†™å…¥æ•°æ®ç”Ÿäº§Parquetæ–‡ä»¶ï¼Œç„¶åä½¿ç”¨PySparkæ¥åˆ†æè¿™ä¸ªæ–‡ä»¶ã€‚</p><pre><code class=\"language-plain\">import pyarrow as pa\nimport pyarrow.parquet as pq\n# åˆ›å»ºä¸€ä¸ªå‘˜å·¥è¡¨ï¼ŒåŒ…å«å‘˜å·¥IDã€éƒ¨é—¨IDã€è–ªèµ„ 3åˆ—\ndata = {\n    'employ_id': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],\n    'dep_no': [1, 1, 1, 2, 2, 2, 3, 3, 3, 3],\n    'salary': [1000, 2000, 3000, 4000, 5000, 6000, 7000, 8000, 9000, 10000],\n}\ntable = pa.table(data)\n# å°†å‘˜å·¥è¡¨æ•°æ®å†™å…¥ Parquet æ–‡ä»¶\npq.write_table(table, 'ls1_output.parquet')\n</code></pre><p>å¯ä»¥çœ‹åˆ°è¿™æ®µä»£ç ç”¨ä¸€ä¸ªDataFrameå£°æ˜äº†ä¸€ä¸ªè¡¨æ•°æ®ï¼Œç„¶ååŸºäºè¡¨æ•°æ®è½¬åŒ–æˆä¸€ä¸ªpaçš„è¡¨ï¼Œæœ€åå°†è¡¨ä½¿ç”¨PyArrowå¼•æ“å†™å…¥äº†ls1_output.parquetæ–‡ä»¶ï¼Œå½“ç„¶å®é™…ä¸Šæˆ‘ä»¬è¿˜æœ‰å¾ˆå¤šäº‹æƒ…å¯ä»¥å¤„ç†ï¼Œæ¯”å¦‚è®¾ç½®å†™å…¥çš„Parquetæ–‡ä»¶åˆ—çš„å‹ç¼©æ–¹å¼ã€ç¼–ç æ–¹å¼ç­‰ã€‚è¿™äº›ä¼šåœ¨åé¢çš„è¯¾ç¨‹é™†ç»­ä»‹ç»ã€‚</p><p>æ³¨æ„ï¼Œè¾“å‡ºçš„Parquetæ–‡ä»¶æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ— æ³•ç›´æ¥æŸ¥çœ‹ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ParquetViewerè¿™ç±»å·¥å…·æŸ¥çœ‹æˆ–è€…è®©ç¨‹åºè¯»å–ã€‚</p><h3>è¯»å–åˆ†æä½ çš„Parquetæ–‡ä»¶</h3><p>Parquetæ–‡ä»¶çš„è¯»å–åˆ†æä¹Ÿå¾ˆç®€å•ï¼Œå¸¸ç”¨çš„å¤§æ•°æ®åˆ†æå¼•æ“åŸºæœ¬éƒ½èƒ½å¤Ÿæ”¯æŒï¼Œæ¯”å¦‚Apache Sparkã€Apache Drillã€Apache Impalaã€Prestoç­‰ã€‚</p><p>é‚£æ€ä¹ˆä½¿ç”¨Sparkè¯»å–æˆ‘ä»¬æ„å»ºçš„Parquetæ–‡ä»¶å‘¢ï¼Ÿ</p><p>çœ‹ä¸‹é¢çš„ä»£ç ï¼Œè¿™ä¸ªå°±æ˜¯ä»åˆšåˆšæˆ‘ä»¬å†™å…¥çš„Parquetæ–‡ä»¶è¯»å–æ•°æ®ï¼Œå®ç°çš„æŒ‰éƒ¨é—¨æ±‡æ€»è–ªèµ„çš„ç»Ÿè®¡åˆ†æã€‚</p><pre><code class=\"language-plain\">from pyspark.sql import SparkSession\nfrom pyspark.sql import functions as F\n# åˆ›å»ºä¸€ä¸ªSparkSessionå¯¹è±¡\nspark = SparkSession.builder \\\n    .appName(\"ls1_parquet_read\") \\\n    .getOrCreate()\n# è¯»å–Parquetæ–‡ä»¶\ndf = spark.read.parquet('ls1_output.parquet')\n# æ˜¾ç¤ºDataFrameçš„å†…å®¹\ndf.show()\n# è®¡ç®—DataFrameä¸­çš„è®°å½•æ•°\nrecord_count = df.count()\nprint(f\"Total records: {record_count}\")\n# æŒ‰éƒ¨é—¨ç¼–å·åˆ†ç»„ç»Ÿè®¡è–ªèµ„\ngrouped_data = df.groupBy(\"dep_no\").agg(F.sum(\"salary\").alias(\"total_salary\"))\ngrouped_data.show()\n# å…³é—­SparkSession\nspark.stop()\n\n</code></pre><p>è¾“å‡ºç»“æœå¦‚å›¾æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/6d/e2/6dd7a02cc9e8716d98e1db2fe8e0c2e2.png?wh=288x568\" alt=\"å›¾ç‰‡\"></p><p>å¥½äº†ï¼Œåˆ°è¿™é‡Œç›¸ä¿¡ä½ å¯¹åˆ—å¼å­˜å‚¨å·²ç»æœ‰äº†ä¸€å®šçš„äº†è§£ï¼Œä¹ŸçŸ¥é“äº†å¦‚ä½•åŸºäºè‡ªå·±çš„æ•°æ®æ„å»ºParquetåˆ—å¼å­˜å‚¨æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨å·¥å…·è¿›è¡Œç»Ÿè®¡åˆ†æã€‚</p><h2>å°ç»“</h2><p>è¿™èŠ‚è¯¾æˆ‘ä»¬ä»‹ç»äº†ä¸¤ä¸ªé‡ç‚¹å†…å®¹ï¼Œè¡Œå¼å­˜å‚¨ä¸åˆ—å¼å­˜å‚¨çš„ä¸åŒï¼Œä»¥åŠåˆ—å¼å­˜å‚¨æ ¼å¼Parquetã€‚</p><p>è¡Œå¼å­˜å‚¨é€‚ç”¨äºOLTPç³»ç»Ÿé’ˆå¯¹å•è¡Œè¯»å†™è¾ƒå¤šçš„åœºæ™¯ï¼Œè€Œåˆ—å¼å­˜å‚¨åˆ™é€‚åˆåœ¨OLAPåœºæ™¯ä¸‹ï¼Œæ‰¹é‡å¯¼å…¥ï¼Œå¤šæ¬¡æŸ¥è¯¢ã€‚</p><p>å’±ä»¬çš„è¯¾ç¨‹ä¼šä¸“æ³¨äºåˆ—å¼å­˜å‚¨æ•°æ®åº“ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä¹Ÿç»™ä½ ä»‹ç»äº†HBaseã€ClickHouseã€StarRocksè¿™å‡ ç§æ•°æ®åº“çš„å­˜å‚¨æ¨¡å¼ã€‚å…¶å®ï¼Œä¸€èˆ¬é«˜æ•ˆçš„æ•°æ®åº“ï¼Œéƒ½ä¼šè‡ªè¡Œå®šä¹‰è‡ªæœ‰çš„ä¸€ä¸ªæ•°æ®å­˜å‚¨æ ¼å¼ï¼Œä½†æ˜¯ä¹Ÿéƒ½ä¼šæä¾›å¯¹è¯¸å¦‚Parquetä¹‹ç±»æ ¼å¼æ–‡ä»¶çš„æ”¯æŒä¸é›†æˆã€‚ä¹Ÿæ­£æ˜¯å› ä¸ºå¦‚æ­¤ï¼Œæ‰ä¼šæ˜¾å¾—Parquetå¦‚æ­¤é‡è¦ã€‚</p><p>Parquetä½œä¸ºå¤§æ•°æ®æ—¶ä»£ä¸‹æœ€æµè¡Œçš„åˆ—å¼å­˜å‚¨æ ¼å¼ï¼Œå¾ˆå¤šåˆ†å¸ƒå¼æ•°æ®åº“éƒ½æ”¯æŒå°†Parquetæ–‡ä»¶ä½œä¸ºå¤–éƒ¨è¡¨ï¼Œæ¯”å¦‚StarRocksã€Hiveç­‰ï¼Œä¹Ÿæœ‰å¾ˆå¤šæ•°æ®æŸ¥è¯¢å¼•æ“ä¸è®¡ç®—æ¡†æ¶å¦‚Sparkã€Prestoã€MapReduceç­‰éƒ½æ”¯æŒç›´æ¥è¯»å–åˆ†æParquetæ–‡ä»¶ã€‚</p><p>æˆ‘è¿˜ä¸¾äº†ä¸€ä¸ªåœ¨Lambdaåœºæ™¯ä¸‹ä½¿ç”¨Parquetä½œä¸ºæ•°æ®ç®¡é“ä¼ é€’æ ¼å¼çš„ç®€å•ç¤ºä¾‹ï¼Œå°†ä¸€ä¸ªå‘˜å·¥è¡¨çš„æ•°æ®é€šè¿‡PyArrowå†™æˆäº†ä¸€ä¸ªParquetæ–‡ä»¶ï¼Œç”¨Sparkåšäº†ç»Ÿè®¡åˆ†æã€‚ç›¸ä¿¡ä½ å·²ç»çŸ¥é“äº†å¦‚ä½•ä½¿ç”¨Parquetæ¥å­˜å‚¨ã€åˆ†ææ•°æ®äº†ã€‚</p><p>ä¸‹èŠ‚è¯¾ï¼Œæˆ‘ä»¬ä»ç„¶ä¼šä»‹ç»å­˜å‚¨ç›¸å…³çš„å†…å®¹ï¼Œçœ‹çœ‹è¢«å¤§æ•°æ®å­˜å‚¨å¼•æ“å¹¿æ³›ä½¿ç”¨çš„æ•°æ®ç»“æ„LSMæ ‘æ˜¯æ€æ ·ä¼˜åŒ–æ•°æ®åº“çš„è¯»å†™æ€§èƒ½çš„ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>ä½ è§‰å¾—æ•°æ®åº“å­˜å‚¨æ¨¡å¼çš„å‘å±•è¶‹åŠ¿ä¼šæ˜¯æ€æ ·ï¼Ÿè¡Œå¼å­˜å‚¨è¿˜æ˜¯åˆ—å¼å­˜å‚¨ä¼˜å…ˆï¼Ÿæˆ–è€…è¯´æ··åˆæ¨¡å¼ä¼˜å…ˆï¼Ÿ</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå’Œæˆ‘äº¤æµã€‚å¦‚æœè§‰å¾—æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿå¯ä»¥æŠŠè¯¾ç¨‹åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·å­¦ä¹ ã€‚æ¬¢è¿ä½ åŠ å…¥æˆ‘ä»¬çš„<a href=\"http://jinshuju.net/f/QX5mGO\">è¯»è€…äº¤æµç¾¤</a>ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ï¼</p>","neighbors":{"left":{"article_title":"å¼€ç¯‡è¯ï½œç©è½¬æ•°æ®åº“ï¼Œè®©æ•°æ®å°½åœ¨ä½ çš„æŒæ§","id":782256},"right":{"article_title":"02ï½œåˆ†å¸ƒå¼å­˜å‚¨æ•°æ®ç»“æ„LSMï¼Œå¦‚ä½•ä¼˜åŒ–è¯»å†™æ€§èƒ½ï¼Ÿ","id":783146}},"comments":[{"had_liked":false,"id":391442,"user_name":"-HedonğŸ­","can_delete":false,"product_type":"c1","uid":3176234,"ip_address":"æ¹–åŒ—","ucode":"FAE541E7A2B88F","user_header":"https://static001.geekbang.org/account/avatar/00/30/77/2a/0cd4c373.jpg","comment_is_top":false,"comment_ctime":1718272321,"is_pvip":false,"replies":[{"id":142356,"content":"ç¡®å®ï¼Œå…¶å®è¿˜æ˜¯ç”±éœ€æ±‚åœºæ™¯å†³å®šï¼ŒåƒStarRocksè™½ç„¶æ˜¯ä¸ªOLAPæ•°æ®åº“ï¼Œä¸ºäº†æ”¯æŒå°‘æ•°è¡Œå®æ—¶æ•°æ®å¿«é€Ÿæ›´æ–°ï¼Œå®ƒçš„ä¸»é”®æ¨¡å‹å·²ç»åœ¨ç”¨æ··å­˜æ¨¡å¼äº†","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1466402,"ctime":1718273702,"ip_address":"å¹¿ä¸œ","comment_id":391442,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100772701,"comment_content":"æ€è€ƒé¢˜ï¼š\n\nè¡Œå¼å­˜å‚¨å’Œåˆ—å¼å­˜å‚¨éƒ½æœ‰å…¶æ›´åŠ é€‚åˆçš„åœºæ™¯ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºï¼Œä¸€ç§æ•°æ®åº“å•çº¯æ”¯æŒä¸€ç§å­˜å‚¨æ ¼å¼ï¼Œæ‰æœ‰å¯èƒ½å°†è¿™ç§å­˜å‚¨æ ¼å¼å¤Ÿåšåˆ°æè‡´ï¼Œå¯¹äºæŸäº›å•ä¸€å›ºå®šçš„åœºæ™¯ï¼Œé€‰æ‹©è¡Œå¼å­˜å‚¨æˆ–åˆ—å¼å­˜å‚¨ä¸­æŸä¸€ä¸ªå¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚\nä½†æ˜¯ç»å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½ä¸éœ€è¦è¿™ç§â€œæè‡´â€ï¼Œç›¸åâ€œçµæ´»æ€§â€èƒ½å¸¦æ¥æ›´å¤§çš„æ”¶ç›Šã€‚æ‰€ä»¥æ··åˆæ¨¡å¼å¯èƒ½åœ¨æœªæ¥ä¼šæ›´å…·æœ‰å‘å±•æ½œåŠ›ã€‚å› ä¸ºå®ƒèƒ½å¤Ÿæä¾›æ›´å¤§çš„çµæ´»æ€§å’Œä¼˜å¼‚çš„æ€§èƒ½ï¼Œé€‚åº”ä¸åŒçš„å·¥ä½œè´Ÿè½½éœ€æ±‚ã€‚","like_count":7,"discussions":[{"author":{"id":1466402,"avatar":"https://static001.geekbang.org/account/avatar/00/16/60/22/25b3951a.jpg","nickname":"moonlight_peng","note":"","ucode":"CDCAD90BD95073","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646598,"discussion_content":"ç¡®å®ï¼Œå…¶å®è¿˜æ˜¯ç”±éœ€æ±‚åœºæ™¯å†³å®šï¼ŒåƒStarRocksè™½ç„¶æ˜¯ä¸ªOLAPæ•°æ®åº“ï¼Œä¸ºäº†æ”¯æŒå°‘æ•°è¡Œå®æ—¶æ•°æ®å¿«é€Ÿæ›´æ–°ï¼Œå®ƒçš„ä¸»é”®æ¨¡å‹å·²ç»åœ¨ç”¨æ··å­˜æ¨¡å¼äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1718273702,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":1,"child_discussions":[{"author":{"id":1301955,"avatar":"https://static001.geekbang.org/account/avatar/00/13/dd/c3/6bb8b410.jpg","nickname":"ä¸€ç±³é˜³å…‰","note":"","ucode":"E198243A39AD84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1466402,"avatar":"https://static001.geekbang.org/account/avatar/00/16/60/22/25b3951a.jpg","nickname":"moonlight_peng","note":"","ucode":"CDCAD90BD95073","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":647078,"discussion_content":"å­¦ä¹ äº†ï¼Œç°åœ¨obä¹Ÿåœ¨å‘äº†åšè¡Œåˆ—æ··åˆçš„æ¨¡å¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1719419733,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":646598,"ip_address":"å¹¿ä¸œ","group_id":0},"score":647078,"extra":""}]}]},{"had_liked":false,"id":391456,"user_name":"æ–¹èˆŸå‹‡å£«","can_delete":false,"product_type":"c1","uid":1218162,"ip_address":"å¹¿ä¸œ","ucode":"53D3D844B08B92","user_header":"https://static001.geekbang.org/account/avatar/00/12/96/72/a517bf25.jpg","comment_is_top":false,"comment_ctime":1718287773,"is_pvip":false,"replies":[{"id":142363,"content":"åœ¨å¤§æ•°æ®å­˜å‚¨ä¸æ‰¹é‡åˆ†æå­˜å‚¨åœºæ™¯ä¸‹ï¼Œç¡®å®æ˜¯åˆ—å¼å­˜å‚¨ä¼˜å…ˆï¼Œä½†æ˜¯åˆ—å¼å­˜å‚¨å¯¹å®æ—¶æ•°æ®å†™å…¥å’Œé¢‘ç¹æ›´æ–°ã€éœ€è¦äº‹åŠ¡çš„ä¸€äº›åœºæ™¯ï¼Œæ”¯æŒç›¸å¯¹ä¸ä½³ï¼Œæ‰€ä»¥ä»å½“å‰æŠ€æœ¯æ¥çœ‹ï¼Œè¿˜æ˜¯å¾—æŒ‰åœºæ™¯ä½¿ç”¨ä¸åŒæ–¹æ¡ˆï¼Œæ··åˆå­˜å‚¨å…¶å®ä¹Ÿæ˜¯ç”¨ç©ºé—´æ¥æ¢æ—¶é—´ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1466402,"ctime":1718346952,"ip_address":"å¹¿ä¸œ","comment_id":391456,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100772701,"comment_content":"æˆ‘è§‰å¾—åº”è¯¥æ˜¯åˆ—å¼å­˜å‚¨ä¼˜å…ˆã€‚æŠ€æœ¯ä»¥æ‘©å°”å®šå¾‹æ¥å‘å±•ï¼Œä¸šåŠ¡ä¸æ‰©å¼ è¿˜å€’é€€ï¼Œæ²¡æœ‰é‚£ä¹ˆå¤šä¸šåŠ¡æ•°æ®è¦å†™å…¥ï¼Œåˆ—å¼å­˜å‚¨å†ä¼˜åŒ–ä¼˜åŒ–ï¼Œæ˜¯ä¸æ˜¯å°±å¤Ÿç”¨äº†ã€‚","like_count":3,"discussions":[{"author":{"id":1466402,"avatar":"https://static001.geekbang.org/account/avatar/00/16/60/22/25b3951a.jpg","nickname":"moonlight_peng","note":"","ucode":"CDCAD90BD95073","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646624,"discussion_content":"åœ¨å¤§æ•°æ®å­˜å‚¨ä¸æ‰¹é‡åˆ†æå­˜å‚¨åœºæ™¯ä¸‹ï¼Œç¡®å®æ˜¯åˆ—å¼å­˜å‚¨ä¼˜å…ˆï¼Œä½†æ˜¯åˆ—å¼å­˜å‚¨å¯¹å®æ—¶æ•°æ®å†™å…¥å’Œé¢‘ç¹æ›´æ–°ã€éœ€è¦äº‹åŠ¡çš„ä¸€äº›åœºæ™¯ï¼Œæ”¯æŒç›¸å¯¹ä¸ä½³ï¼Œæ‰€ä»¥ä»å½“å‰æŠ€æœ¯æ¥çœ‹ï¼Œè¿˜æ˜¯å¾—æŒ‰åœºæ™¯ä½¿ç”¨ä¸åŒæ–¹æ¡ˆï¼Œæ··åˆå­˜å‚¨å…¶å®ä¹Ÿæ˜¯ç”¨ç©ºé—´æ¥æ¢æ—¶é—´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1718346952,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391844,"user_name":"æ§‘Â·å…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1445744,"ip_address":"åŒ—äº¬","ucode":"897F0475592E3A","user_header":"https://static001.geekbang.org/account/avatar/00/16/0f/70/f59db672.jpg","comment_is_top":false,"comment_ctime":1719249508,"is_pvip":true,"replies":[{"id":142467,"content":"æ”¶åˆ°ï¼åé¢çœ‹çœ‹æ˜¯å¦å¯ä»¥è¡¥å……ä¸€äº›ç¯‡å¹…ï¼Œä½ ä¹Ÿå¯ä»¥å‚è€ƒinfoQä¸Šè¿™ç¯‡æ•°æ®æ ¼å¼å¯¹æ¯”æ–‡ç« å…ˆäº†è§£ä¸€ä¸‹https:&#47;&#47;xie.infoq.cn&#47;article&#47;0e6f006292097fdb8db6afb30","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1466402,"ctime":1719369447,"ip_address":"å¹¿ä¸œ","comment_id":391844,"utype":1}],"discussion_count":1,"race_medal":2,"score":2,"product_id":100772701,"comment_content":"æ„Ÿè§‰è®²å¾—æœ‰äº›ç²—ç•¥ï¼Œæƒ³äº†è§£parquetè®¾è®¡ä¹‹ä¸­çš„äº®ç‚¹å’Œä¼˜åŠ£åŠ¿åˆ†æã€‚","like_count":2,"discussions":[{"author":{"id":1466402,"avatar":"https://static001.geekbang.org/account/avatar/00/16/60/22/25b3951a.jpg","nickname":"moonlight_peng","note":"","ucode":"CDCAD90BD95073","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":647054,"discussion_content":"æ”¶åˆ°ï¼åé¢çœ‹çœ‹æ˜¯å¦å¯ä»¥è¡¥å……ä¸€äº›ç¯‡å¹…ï¼Œä½ ä¹Ÿå¯ä»¥å‚è€ƒinfoQä¸Šè¿™ç¯‡æ•°æ®æ ¼å¼å¯¹æ¯”æ–‡ç« å…ˆäº†è§£ä¸€ä¸‹https://xie.infoq.cn/article/0e6f006292097fdb8db6afb30","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1719369447,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391559,"user_name":"CJJ","can_delete":false,"product_type":"c1","uid":1194060,"ip_address":"å¹¿ä¸œ","ucode":"7E02A6A8547559","user_header":"https://static001.geekbang.org/account/avatar/00/12/38/4c/5426e2e0.jpg","comment_is_top":false,"comment_ctime":1718526473,"is_pvip":true,"replies":[{"id":142382,"content":"è¿™ä¸ªé—®é¢˜å¾ˆå¥½ï¼Œæœ‰ä¸¤ä¸ªç‚¹ï¼Œé¦–å…ˆStarRocksåœ¨ç”Ÿäº§ç¯å¢ƒå®é™…é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œä¼šæ¶ˆè€—å¤§é‡çš„CPU å†…å­˜ï¼Œ å…¶æ¬¡ç›¸æ¯”OLTPçš„é«˜å¹¶å‘éœ€æ±‚ï¼Œqpsç›®å‰çœ‹è¿˜æ˜¯å·®äº†ä¸€ç‚¹","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1466402,"ctime":1718588064,"ip_address":"å¹¿ä¸œ","comment_id":391559,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100772701,"comment_content":"æœ‰ä¸ªç–‘é—®ï¼Œstarrocksçš„å®˜ç½‘å…¶ä¸­ä¸€ä¸ªæè¿°æ˜¯é«˜å¹¶å‘æ•°æ®åˆ†æï¼Œä¸ºå•¥è€å¸ˆçš„è¡¨æ ¼é‡Œé¢å†™ç€starrocksé€‚ç”¨åœºæ™¯é‡Œé¢è¯´å¯¹é«˜å¹¶å‘æ”¯æŒæ²¡é‚£ä¹ˆå¥½å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1466402,"avatar":"https://static001.geekbang.org/account/avatar/00/16/60/22/25b3951a.jpg","nickname":"moonlight_peng","note":"","ucode":"CDCAD90BD95073","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646702,"discussion_content":"è¿™ä¸ªé—®é¢˜å¾ˆå¥½ï¼Œæœ‰ä¸¤ä¸ªç‚¹ï¼Œé¦–å…ˆStarRocksåœ¨ç”Ÿäº§ç¯å¢ƒå®é™…é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œä¼šæ¶ˆè€—å¤§é‡çš„CPU å†…å­˜ï¼Œ å…¶æ¬¡ç›¸æ¯”OLTPçš„é«˜å¹¶å‘éœ€æ±‚ï¼Œqpsç›®å‰çœ‹è¿˜æ˜¯å·®äº†ä¸€ç‚¹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1718588064,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":2,"child_discussions":[{"author":{"id":1194060,"avatar":"https://static001.geekbang.org/account/avatar/00/12/38/4c/5426e2e0.jpg","nickname":"CJJ","note":"","ucode":"7E02A6A8547559","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1466402,"avatar":"https://static001.geekbang.org/account/avatar/00/16/60/22/25b3951a.jpg","nickname":"moonlight_peng","note":"","ucode":"CDCAD90BD95073","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":646716,"discussion_content":"å™¢å™¢ï¼Œäº†è§£äº†ï¼Œè°¢è°¢è€å¸ˆè§£ç­”ğŸ˜Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1718605170,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":646702,"ip_address":"å¹¿ä¸œ","group_id":0},"score":646716,"extra":""},{"author":{"id":1013669,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/77/a5/c5ae871d.jpg","nickname":"zenk","note":"","ucode":"B235D5EBCF49BC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1466402,"avatar":"https://static001.geekbang.org/account/avatar/00/16/60/22/25b3951a.jpg","nickname":"moonlight_peng","note":"","ucode":"CDCAD90BD95073","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":646917,"discussion_content":"ckæ˜¯ä¸æ˜¯æ¯”dorisè¦å¥½\n\næ²¡æ·±ç©¶ï¼Œæˆ‘ä»¬å…¬å¸éƒ½è§‰å¾—ckæ›´æ–°å¾ˆæ…¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1719022090,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":646702,"ip_address":"ä¸Šæµ·","group_id":0},"score":646917,"extra":""}]}]},{"had_liked":false,"id":391497,"user_name":"xzy","can_delete":false,"product_type":"c1","uid":1002095,"ip_address":"æ²³åŒ—","ucode":"1A44368083A19E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4a/6f/e36b3908.jpg","comment_is_top":false,"comment_ctime":1718346346,"is_pvip":false,"replies":[{"id":142366,"content":"å¾ˆæ£’ï¼åœ¨åé¢ä»‹ç»æ•°æ®åº“çš„æ—¶å€™ä¼šæœ‰è®²åˆ°ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1466402,"ctime":1718411557,"ip_address":"å¹¿ä¸œ","comment_id":391497,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100772701,"comment_content":"åˆ—å¼å­˜å‚¨é€šå¸¸å¾ˆé€‚åˆå‹ç¼©\n\nè¿™ä¸ªåˆ—å¼å­˜å‚¨çš„éå¸¸é‡è¦çš„ç‚¹ï¼Œè€å¸ˆæ²¡æœ‰è®²åˆ°ã€‚\n\n","like_count":1,"discussions":[{"author":{"id":1466402,"avatar":"https://static001.geekbang.org/account/avatar/00/16/60/22/25b3951a.jpg","nickname":"moonlight_peng","note":"","ucode":"CDCAD90BD95073","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646642,"discussion_content":"å¾ˆæ£’ï¼åœ¨åé¢ä»‹ç»æ•°æ®åº“çš„æ—¶å€™ä¼šæœ‰è®²åˆ°ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1718411557,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391499,"user_name":"æ—é¾","can_delete":false,"product_type":"c1","uid":1766285,"ip_address":"å¹¿ä¸œ","ucode":"61A98DC0DC1E8A","user_header":"https://static001.geekbang.org/account/avatar/00/1a/f3/8d/402e0e0f.jpg","comment_is_top":false,"comment_ctime":1718347227,"is_pvip":false,"replies":[{"id":142367,"content":"æƒ³è±¡ä¸‹å­—æ®µä¸Šæœ‰ç´¢å¼•çš„æƒ…å†µï¼ŒCBOä¼šé€‰æ‹©åˆé€‚çš„ç´¢å¼•ï¼Œé€šè¿‡ç´¢å¼•å­—æ®µè¿‡æ»¤æ‰å¤§éƒ¨åˆ†æ•°æ®ï¼Œå†æ£€æŸ¥å…¶ä»–æŸ¥è¯¢æ¡ä»¶ã€‚å°±æ˜¯ä½ è¯´çš„ç¬¬äºŒç§æ–¹å¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1466402,"ctime":1718412984,"ip_address":"å¹¿ä¸œ","comment_id":391499,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100772701,"comment_content":"åˆ—å¼å­˜å‚¨å¤šæ¡ä»¶æ˜¯å¦‚ä½•è·å–??   å‡å¦‚æˆ‘æœ‰ä¸‰ä¸ªå­—æ®µ(æ—¶é—´,åŒºåŸŸ,é‡‘é¢)ã€‚éœ€è¦ç»Ÿè®¡ä»Šå¤©åå—åœ°åŒºçš„æ€»é¢ã€‚ç”¨å®ç°ä¸‹é¢å“ªä¸ªæ–¹å¼ã€‚\n\n1.è·å¾—æ—¶é—´åˆ—æ¡ä»¶æŸ¥æ‰¾åç§»é‡æ•°æ®ï¼Œè·å¾—åŒºåŸŸæ¡ä»¶æŸ¥æ‰¾åç§»é‡æ•°æ®ï¼Œç„¶åæ±‚äº¤é›†å»é‡‘é¢åˆ—æ±‚å’Œã€‚\n\n2.å…ˆä»æ—¶é—´åˆ—æ¡ä»¶æŸ¥æ‰¾åç§»é‡æ•°æ®å¦‚åªæœ‰(1,2,3)ï¼Œå»åŒºåŸŸæ¡ä»¶æŸ¥æ‰¾åç§»é‡æ•°æ®(åªåœ¨1,2,3)é‡Œé¢æŸ¥è¯¢ã€‚å»é‡‘é¢åˆ—æ±‚å’Œã€‚\n\n1.æ˜¯å¯ä»¥åœ¨ä¸¤ä¸ªæ¡ä»¶å¹¶å‘è·å–ï¼Œæœ€ç»ˆæ±‚å¹¶é›†\n2.æ˜¯æ¡ä»¶2ä¾èµ–æ¡ä»¶1,è™½ç„¶ä¸èƒ½å¹¶å‘è·å–ï¼Œä½†æ˜¯æŸ¥æ‰¾çš„æ•°æ®ä¼šå°‘å¾ˆå¤šã€‚\n\n\n","like_count":0,"discussions":[{"author":{"id":1466402,"avatar":"https://static001.geekbang.org/account/avatar/00/16/60/22/25b3951a.jpg","nickname":"moonlight_peng","note":"","ucode":"CDCAD90BD95073","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646643,"discussion_content":"æƒ³è±¡ä¸‹å­—æ®µä¸Šæœ‰ç´¢å¼•çš„æƒ…å†µï¼ŒCBOä¼šé€‰æ‹©åˆé€‚çš„ç´¢å¼•ï¼Œé€šè¿‡ç´¢å¼•å­—æ®µè¿‡æ»¤æ‰å¤§éƒ¨åˆ†æ•°æ®ï¼Œå†æ£€æŸ¥å…¶ä»–æŸ¥è¯¢æ¡ä»¶ã€‚å°±æ˜¯ä½ è¯´çš„ç¬¬äºŒç§æ–¹å¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1718412984,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":392255,"user_name":"å®Œç¾åšæŒ","can_delete":false,"product_type":"c1","uid":1919541,"ip_address":"å±±è¥¿","ucode":"AE0261D8DDEF64","user_header":"https://static001.geekbang.org/account/avatar/00/1d/4a/35/66caeed9.jpg","comment_is_top":false,"comment_ctime":1720422827,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100772701,"comment_content":"StarRocks å’Œ ClickHouse\nStarRocks\nè®¾è®¡ç›®æ ‡ï¼šStarRocks æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„åˆ†å¸ƒå¼ SQL æ•°æ®åº“ï¼Œä¸»è¦ç”¨äºå®æ—¶åˆ†æå’Œå¤šç»´æ•°æ®åˆ†æï¼ˆOLAPï¼‰ã€‚\næ•°æ®å­˜å‚¨ï¼šStarRocks ä½¿ç”¨åˆ—å­˜å‚¨ç»“æ„ï¼Œå¹¶ä¸”é€šè¿‡åŸºäºåˆ†å¸ƒå¼æ¶æ„è®¾è®¡æ¥æå‡æŸ¥è¯¢æ€§èƒ½ã€‚\nç‰¹æ€§ï¼šæ”¯æŒé«˜å¹¶å‘çš„ä½å»¶è¿ŸæŸ¥è¯¢ï¼Œå…·æœ‰ä¸°å¯Œçš„æ•°æ®å»ºæ¨¡èƒ½åŠ›ï¼Œèƒ½å¤Ÿå¤„ç†å¤æ‚æŸ¥è¯¢ã€‚\nå…¸å‹ä½¿ç”¨åœºæ™¯ï¼šå®æ—¶æ•°æ®åˆ†æã€æ•°æ®ä»“åº“ã€å•†ä¸šæ™ºèƒ½ï¼ˆBIï¼‰åº”ç”¨ã€‚\nClickHouse\nè®¾è®¡ç›®æ ‡ï¼šClickHouse æ˜¯ä¸€ä¸ªé¢å‘è”æœºåˆ†æå¤„ç†ï¼ˆOLAPï¼‰çš„åˆ—å¼æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œè®¾è®¡ç”¨äºé«˜æ€§èƒ½çš„å®æ—¶åˆ†æã€‚\næ•°æ®å­˜å‚¨ï¼šClickHouse ä½¿ç”¨åˆ—å¼å­˜å‚¨ç»“æ„ï¼Œå¹¶é€šè¿‡æ•°æ®å‹ç¼©å’Œåˆ†åŒºæ¥æé«˜æŸ¥è¯¢æ€§èƒ½ã€‚\nç‰¹æ€§ï¼šæ”¯æŒé«˜é€Ÿçš„æ•°æ®å†™å…¥å’Œå¤æ‚æŸ¥è¯¢ï¼Œèƒ½å¤Ÿå¤„ç†éå¸¸å¤§çš„æ•°æ®é‡ï¼Œæä¾›ä¸°å¯Œçš„èšåˆå’Œåˆ†æåŠŸèƒ½ã€‚\nå…¸å‹ä½¿ç”¨åœºæ™¯ï¼šå®æ—¶åˆ†æã€ç”¨æˆ·è¡Œä¸ºåˆ†æã€ç›‘æ§å’Œæ—¥å¿—åˆ†æã€‚\nå…³ç³»\nç›¸ä¼¼æ€§ï¼šStarRocks å’Œ ClickHouse éƒ½æ˜¯ä¸º OLAP åœºæ™¯è®¾è®¡çš„é«˜æ€§èƒ½åˆ—å¼æ•°æ®åº“ï¼Œæ”¯æŒå®æ—¶æ•°æ®åˆ†æå’Œé«˜å¹¶å‘æŸ¥è¯¢ã€‚\nåŒºåˆ«ï¼šä¸¤è€…åœ¨æ¶æ„è®¾è®¡ã€ç‰¹æ€§å’Œå…·ä½“å®ç°ä¸Šæœ‰æ‰€ä¸åŒã€‚StarRocks å¼ºè°ƒé«˜æ€§èƒ½å’Œçµæ´»æ€§ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤šç»´æ•°æ®åˆ†æä¸Šæœ‰ä¼˜åŠ¿ã€‚ClickHouse åˆ™ä»¥å…¶é«˜æ•ˆçš„åˆ—å¼å­˜å‚¨å’ŒæŸ¥è¯¢ä¼˜åŒ–æŠ€æœ¯é—»åã€‚\næ€»ç»“\nHive vs. HBaseï¼šHive æ˜¯ç”¨äºæ‰¹é‡æ•°æ®åˆ†æçš„æ•°æ®ä»“åº“å·¥å…·ï¼ŒHBase æ˜¯æ”¯æŒå®æ—¶è¯»å†™æ“ä½œçš„ NoSQL æ•°æ®åº“ã€‚å®ƒä»¬å¯ä»¥ç»“åˆä½¿ç”¨ï¼Œä»¥æ»¡è¶³ä¸åŒçš„åˆ†æéœ€æ±‚ã€‚\nStarRocks vs. ClickHouseï¼šStarRocks å’Œ ClickHouse éƒ½æ˜¯é«˜æ€§èƒ½çš„åˆ—å¼æ•°æ®åº“ï¼Œä¸»è¦ç”¨äºå®æ—¶æ•°æ®åˆ†æå’Œ OLAP åº”ç”¨ã€‚å®ƒä»¬åœ¨ç‰¹æ€§å’Œå®ç°ä¸Šæœ‰ç»†å¾®å·®åˆ«ï¼Œé€‰æ‹©å“ªä¸€ä¸ªå–å†³äºå…·ä½“çš„ä½¿ç”¨åœºæ™¯å’Œéœ€æ±‚ã€‚\nè¿™äº›å·¥å…·å„æœ‰ç‰¹ç‚¹ï¼Œé€‰æ‹©æ—¶åº”æ ¹æ®å…·ä½“åº”ç”¨åœºæ™¯å’Œéœ€æ±‚æ¥å†³å®šã€‚","like_count":1},{"had_liked":false,"id":394753,"user_name":"æŸ¯å¯Ÿé‡‘","can_delete":false,"product_type":"c1","uid":1115149,"ip_address":"ä¸Šæµ·","ucode":"F722BF8FCD2C47","user_header":"https://static001.geekbang.org/account/avatar/00/11/04/0d/3dc5683a.jpg","comment_is_top":false,"comment_ctime":1728112792,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100772701,"comment_content":"è¯» parquet æ–‡ä»¶çš„æ—¶å€™ï¼Œå¯ä¸å¯ä»¥ç›´æ¥è¯»å– file metaï¼Œè·å– shcemaï¼Œè€Œä¸ç”¨å…¨éƒ¨è¯»å–æ•°æ®ï¼Ÿï¼Ÿï¼Ÿ","like_count":0},{"had_liked":false,"id":392254,"user_name":"å®Œç¾åšæŒ","can_delete":false,"product_type":"c1","uid":1919541,"ip_address":"å±±è¥¿","ucode":"AE0261D8DDEF64","user_header":"https://static001.geekbang.org/account/avatar/00/1d/4a/35/66caeed9.jpg","comment_is_top":false,"comment_ctime":1720422819,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100772701,"comment_content":"Hive å’Œ HBase\nHive\nè®¾è®¡ç›®æ ‡ï¼šHive æ˜¯ä¸€ä¸ªæ•°æ®ä»“åº“åŸºç¡€è®¾æ–½ï¼Œç”¨äºåœ¨ Hadoop ä¸Šè¿›è¡Œæ•°æ®æŸ¥è¯¢å’Œåˆ†æã€‚å®ƒæä¾›äº†ç±»ä¼¼ SQL çš„æŸ¥è¯¢è¯­è¨€ï¼ˆHiveQLï¼‰æ¥æŸ¥è¯¢å­˜å‚¨åœ¨ Hadoop åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼ˆHDFSï¼‰ä¸­çš„å¤§æ•°æ®ã€‚\næ•°æ®å­˜å‚¨ï¼šHive çš„æ•°æ®å­˜å‚¨åœ¨ HDFS ä¸­ï¼Œå¹¶ä¸”é‡‡ç”¨æ‰¹å¤„ç†çš„æ–¹å¼æ¥å¤„ç†å¤§æ•°æ®ã€‚\næ•°æ®æ¨¡å‹ï¼šHive ä½¿ç”¨å…³ç³»å‹æ•°æ®åº“çš„æ¨¡å‹ï¼Œå³è¡¨ã€è¡Œã€åˆ—çš„å½¢å¼æ¥ç»„ç»‡æ•°æ®ã€‚\nå…¸å‹ä½¿ç”¨åœºæ™¯ï¼šæ•°æ®åˆ†æå’ŒæŠ¥è¡¨ç”Ÿæˆï¼Œå¤„ç†å¤§è§„æ¨¡çš„æ‰¹é‡æ•°æ®ã€‚\nHBase\nè®¾è®¡ç›®æ ‡ï¼šHBase æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ã€é¢å‘åˆ—çš„ NoSQL æ•°æ®åº“ï¼Œæ—¨åœ¨ä¸º Hadoop æä¾›å®æ—¶è¯»å†™è®¿é—®ã€‚\næ•°æ®å­˜å‚¨ï¼šHBase çš„æ•°æ®å­˜å‚¨åœ¨ HDFS æˆ– HDFS å…¼å®¹çš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œå¹¶ä¸”æ”¯æŒéšæœºå®æ—¶è¯»å†™æ“ä½œã€‚\næ•°æ®æ¨¡å‹ï¼šHBase ä½¿ç”¨ Bigtable æ¨¡å‹ï¼Œæ•°æ®ä»¥è¡Œå’Œåˆ—æ—çš„å½¢å¼å­˜å‚¨ï¼Œè¡Œé”®å¯ä»¥æ’åºã€‚\nå…¸å‹ä½¿ç”¨åœºæ™¯ï¼šéœ€è¦é«˜ååé‡å’Œä½å»¶è¿Ÿçš„åº”ç”¨ï¼Œå¦‚å®æ—¶æ•°æ®å¤„ç†å’Œåœ¨çº¿æœåŠ¡ã€‚\nå…³ç³»\né›†æˆï¼šHive å’Œ HBase å¯ä»¥ç»“åˆä½¿ç”¨ã€‚Hive å¯ä»¥é€šè¿‡ HBase çš„å­˜å‚¨å¤„ç†æ•°æ®ï¼Œä»è€Œæ”¯æŒå®æ—¶è¯»å†™æ“ä½œã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨ Hive ä¸­åˆ›å»ºå¤–éƒ¨è¡¨ï¼Œè¡¨æ•°æ®å­˜å‚¨åœ¨ HBase ä¸­ï¼Œåˆ©ç”¨ HiveQL æŸ¥è¯¢ HBase æ•°æ®ã€‚\näº’è¡¥æ€§ï¼šHive é€‚åˆæ‰¹å¤„ç†å’Œå¤æ‚æŸ¥è¯¢åˆ†æï¼Œè€Œ HBase é€‚åˆå®æ—¶æ•°æ®è¯»å†™å’Œå¿«é€ŸæŸ¥è¯¢ã€‚å®ƒä»¬ç»“åˆä½¿ç”¨å¯ä»¥æ»¡è¶³ä¸åŒç±»å‹çš„å¤§æ•°æ®å¤„ç†éœ€æ±‚ã€‚","like_count":0}]}