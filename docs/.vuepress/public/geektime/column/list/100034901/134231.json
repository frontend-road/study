{"id":134231,"title":"08 | æ™ºèƒ½å¿ƒè·³æœºåˆ¶ï¼šè§£å†³ç½‘ç»œçš„ä¸ç¡®å®šæ€§","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯è¢æ­¦æ—ã€‚</p><p>åœ¨å‰é¢çš„ç« èŠ‚é‡Œï¼Œæˆ‘è®²åˆ°äº†åœ¨å³æ—¶æ¶ˆæ¯åœºæ™¯ä¸­éå¸¸é‡è¦çš„ä¸¤ä¸ªç‰¹æ€§ï¼šâ€œå¯é æŠ•é€’â€å’Œâ€œå®æ—¶æ€§â€ã€‚</p><p>ä¸ºäº†è®©æ¶ˆæ¯èƒ½æ›´åŠ å®æ—¶ã€å¯é ã€å¿«é€Ÿåœ°è§¦è¾¾åˆ°æ¥æ”¶æ–¹ï¼Œå¤§éƒ¨åˆ†IMç³»ç»Ÿä¼šé€šè¿‡â€œé•¿è¿æ¥â€çš„æ–¹å¼æ¥å»ºç«‹æ”¶å‘åŒæ–¹çš„é€šä¿¡é€šé“ï¼Œè¿™äº›åŸºäºTCPé•¿è¿æ¥çš„é€šä¿¡åè®®ï¼Œåœ¨ç”¨æˆ·ä¸Šçº¿è¿æ¥æ—¶ï¼Œä¼šåœ¨æœåŠ¡ç«¯ç»´æŠ¤å¥½è¿æ¥åˆ°æœåŠ¡å™¨çš„ç”¨æˆ·è®¾å¤‡å’Œå…·ä½“TCPè¿æ¥çš„æ˜ å°„å…³ç³»ï¼Œé€šè¿‡è¿™ç§æ–¹å¼æœåŠ¡ç«¯ä¹Ÿèƒ½é€šè¿‡è¿™ä¸ªæ˜ å°„å…³ç³»éšæ—¶æ‰¾åˆ°å¯¹åº”åœ¨çº¿çš„ç”¨æˆ·çš„å®¢æˆ·ç«¯ï¼Œè€Œä¸”è¿™ä¸ªé•¿è¿æ¥ä¸€æ—¦å»ºç«‹ï¼Œå°±ä¸€ç›´å­˜åœ¨ï¼Œé™¤éç½‘ç»œè¢«ä¸­æ–­ã€‚</p><p>å› ä¸ºâ€œé•¿è¿æ¥â€æ–¹å¼ç›¸æ¯”â€œçŸ­è¿æ¥è½®è¯¢â€ï¼Œä¸ä»…èƒ½èŠ‚çº¦ä¸å¿…è¦çš„èµ„æºå¼€é”€ï¼Œæœ€é‡è¦çš„æ˜¯èƒ½å¤Ÿé€šè¿‡â€œæœåŠ¡ç«¯æ¨é€â€ï¼Œæä¾›æ›´åŠ å®æ—¶çš„æ¶ˆæ¯ä¸‹å‘ã€‚</p><p>åŒæ ·ï¼Œå¯¹äºå‘é€æ–¹æ¥è¯´ï¼Œå¦‚æœå‘é€æ¶ˆæ¯ä¹Ÿèƒ½é€šè¿‡â€œé•¿è¿æ¥â€é€šé“æŠŠæ¶ˆæ¯ç»™åˆ°IMæœåŠ¡ç«¯ï¼Œç›¸å¯¹äºçŸ­è¿æ¥æ–¹å¼ï¼Œä¹Ÿèƒ½çœç•¥TCPæ¡æ‰‹å’ŒTLSæ¡æ‰‹çš„å‡ ä¸ªRTTçš„æ—¶é—´å¼€é”€ï¼Œåœ¨ç”¨æˆ·ä½“éªŒå’Œå®æ—¶æ€§ä¸Šä¹Ÿä¼šæ›´å¥½ã€‚</p><h2>ä¸ºä»€ä¹ˆéœ€è¦å¿ƒè·³æœºåˆ¶</h2><p>â€œé•¿è¿æ¥â€æ–¹å¼ç»™æˆ‘ä»¬å¸¦æ¥äº†ä¼—å¤šå¥½å¤„ï¼Œé‚£ä¹ˆè¦è®©æ¶ˆæ¯é€šè¿‡â€œé•¿è¿æ¥â€å®ç°å¯é æŠ•é€’ï¼Œæœ€é‡è¦çš„ç¯èŠ‚å°±åœ¨äºå¦‚ä½•ç»´æŠ¤å¥½è¿™ä¸ªâ€œé•¿è¿æ¥â€ã€‚</p><p>ç”±äºè¿™ä¸ªâ€œé•¿è¿æ¥â€åº•å±‚ä½¿ç”¨çš„TCPè¿æ¥å¹¶ä¸æ˜¯ä¸€ä¸ªçœŸæ­£å­˜åœ¨çš„ç‰©ç†è¿æ¥ï¼Œå®é™…ä¸Šåªæ˜¯ä¸€ä¸ªæ— æ„ŸçŸ¥çš„è™šæ‹Ÿè¿æ¥ï¼Œä¸­é—´é“¾è·¯çš„æ–­å¼€è¿æ¥çš„ä¸¤ç«¯ä¸ä¼šæ„ŸçŸ¥åˆ°ï¼Œå› æ­¤ç»´æŠ¤å¥½è¿™ä¸ªâ€œé•¿è¿æ¥â€ä¸€ä¸ªå…³é”®çš„é—®é¢˜åœ¨äºèƒ½å¤Ÿè®©è¿™ä¸ªâ€œé•¿è¿æ¥â€èƒ½å¤Ÿåœ¨ä¸­é—´é“¾è·¯å‡ºç°é—®é¢˜æ—¶ï¼Œè®©è¿æ¥çš„ä¸¤ç«¯èƒ½å¿«é€Ÿå¾—åˆ°é€šçŸ¥ï¼Œç„¶åé€šè¿‡â€œé‡è¿â€æ¥é‡æ–°å»ºç«‹æ–°çš„å¯ç”¨è¿æ¥ï¼Œä»è€Œè®©æˆ‘ä»¬è¿™ä¸ªâ€œé•¿è¿æ¥â€ä¸€ç›´ä¿æŒâ€œé«˜å¯ç”¨â€çŠ¶æ€ã€‚</p><!-- [[[read_end]]] --><p>è¿™ä¸ªèƒ½å¤Ÿâ€œå¿«é€Ÿâ€â€œä¸é—´æ–­â€è¯†åˆ«è¿æ¥å¯ç”¨æ€§çš„æœºåˆ¶ï¼Œè¢«ç§°ä¸ºâ€œå¿ƒè·³æœºåˆ¶â€ã€‚â€œå¿ƒè·³æœºåˆ¶â€é€šè¿‡æŒç»­åœ°å¾€è¿æ¥ä¸Šå‘é€â€œæ¨¡æ‹Ÿæ•°æ®â€æ¥è¯•æ¢è¿æ¥çš„å¯ç”¨æ€§ï¼ŒåŒæ—¶ä¹Ÿè®©æˆ‘ä»¬çš„è¿æ¥åœ¨æ²¡æœ‰çœŸæ­£ä¸šåŠ¡æ•°æ®æ”¶å‘çš„æ—¶å€™ï¼Œä¹ŸæŒç»­æœ‰æ•°æ®æµé€šï¼Œè€Œä¸ä¼šè¢«ä¸­é—´çš„ç½‘ç»œè¿è¥å•†ä»¥ä¸ºè¿æ¥å·²ç»æ²¡æœ‰åœ¨ä½¿ç”¨è€ŒæŠŠè¿æ¥åˆ‡æ–­ã€‚</p><p>ä¸‹é¢ï¼Œæˆ‘ä¼šä»ä¸¤ä¸ªæ–¹é¢å¸¦ä½ è¯¦ç»†äº†è§£ä¸€ä¸‹å¿ƒè·³æœºåˆ¶åœ¨é•¿è¿æ¥ç»´æŠ¤ä¸­çš„å¿…è¦æ€§ã€‚</p><h3>é™ä½æœåŠ¡ç«¯è¿æ¥ç»´æŠ¤çš„å¼€é”€</h3><p>é¦–å…ˆï¼Œå¿ƒè·³æœºåˆ¶å¯ä»¥è®©IMæœåŠ¡ç«¯èƒ½å°½å¿«æ„ŸçŸ¥åˆ°è¿æ¥çš„å˜åŒ–ï¼Œä»è€Œå°½æ—©æ¸…ç†æœåŠ¡ç«¯ç»´æŠ¤è¿æ¥ä½¿ç”¨çš„èµ„æºã€‚</p><p>å¯¹äºå¤§éƒ¨åˆ†å³æ—¶é€šè®¯åœºæ™¯ï¼Œæ¶ˆæ¯æ”¶å‘åŒæ–¹ç»å¸¸å¤„äºç§»åŠ¨ç½‘ç»œç¯å¢ƒä¸­ï¼Œæ‰‹æœºä¿¡å·å¼ºå¼±å˜åŒ–åŠä¸­é—´è·¯ç”±æ•…éšœç­‰ï¼Œéƒ½å¯èƒ½å¯¼è‡´â€œé•¿è¿æ¥â€å®é™…å¤„äºä¸å¯ç”¨çŠ¶æ€ã€‚</p><p>æ¯”å¦‚ï¼šç”¨æˆ·æ‹¿ç€æ‰‹æœºè¿›ç”µæ¢¯äº†ï¼Œæ‰‹æœºç½‘ç»œä¿¡å·å¿½ç„¶å®Œå…¨æ²¡äº†ï¼Œé•¿è¿æ¥æ­¤æ—¶å·²ç»ä¸å¯ç”¨ï¼Œä½†IMæœåŠ¡ç«¯æ— æ³•æ„ŸçŸ¥åˆ°è¿™ä¸ªâ€œè¿æ¥ä¸å¯ç”¨â€çš„æƒ…å†µï¼›å¦å¤–ï¼Œå‡å¦‚æˆ‘ä»¬ä¸Šç½‘çš„è·¯ç”±å™¨å¿½ç„¶æ‰çº¿äº†ï¼Œä¹‹å‰Appå’ŒIMæœåŠ¡ç«¯å»ºç«‹çš„é•¿è¿æ¥ï¼Œæ­¤æ—¶å®é™…ä¹Ÿå¤„äºä¸å¯ç”¨çŠ¶æ€ï¼Œä½†æ˜¯å®¢æˆ·ç«¯å’ŒIMæœåŠ¡å™¨ä¹Ÿéƒ½æ— æ³•æ„ŸçŸ¥ã€‚</p><p>æˆ‘åœ¨å‰é¢è®²è¿‡ï¼Œä¹‹æ‰€ä»¥èƒ½å¤Ÿå®ç°æ¶ˆæ¯çš„â€œæœåŠ¡ç«¯æ¨é€â€ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬é’ˆå¯¹æ¯ä¸€å°ä¸Šçº¿çš„è®¾å¤‡ï¼Œéƒ½ä¼šåœ¨IMæœåŠ¡ç«¯ç»´æŠ¤ç›¸åº”çš„â€œç”¨æˆ·è®¾å¤‡â€å’Œâ€œç½‘ç»œè¿æ¥â€è¿™ä¹ˆä¸€ä¸ªæ˜ å°„å…³ç³»ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå¾ˆå¤šæ—¶å€™ä¸ºäº†èŠ‚çœç½‘ç»œå¼€é”€ï¼Œè¿˜ä¼šåœ¨æœåŠ¡ç«¯ä¸´æ—¶ç¼“å­˜ä¸€äº›æ²¡å¿…è¦æ¯æ¬¡è¯·æ±‚éƒ½æºå¸¦çš„å®¢æˆ·ç«¯çš„ä¿¡æ¯ï¼ˆæ¯”å¦‚ï¼šappç‰ˆæœ¬å·ã€æ“ä½œç³»ç»Ÿã€ç½‘ç»œçŠ¶æ€ç­‰ï¼‰ï¼Œè¿™æ ·å®¢æˆ·ç«¯ä¸€æ—¦å»ºå¥½é•¿è¿åï¼Œåªéœ€è¦é¦–æ¬¡æºå¸¦è¿™äº›ä¿¡æ¯ï¼Œåç»­è¯·æ±‚å¯ä»¥ä¸ç”¨å†æºå¸¦ï¼Œè€Œæ˜¯ä½¿ç”¨IMæœåŠ¡ç«¯ç¼“å­˜çš„è¿™äº›ä¿¡æ¯ã€‚å¦å¤–ï¼Œåœ¨å¾ˆå¤šIMçš„å®ç°ä¸Šï¼Œè¿˜ä¼šåœ¨æœåŠ¡ç«¯ç»´æŠ¤ä¸€äº›â€œç”¨æˆ·åœ¨çº¿çŠ¶æ€â€å’Œâ€œæ‰€æœ‰åœ¨çº¿è®¾å¤‡â€è¿™äº›ä¿¡æ¯ï¼Œä¾¿äºä¸šåŠ¡ä½¿ç”¨ã€‚</p><p>å¦‚æœIMæœåŠ¡ç«¯æ— æ³•æ„ŸçŸ¥åˆ°è¿™äº›è¿æ¥çš„å¼‚å¸¸æƒ…å†µï¼Œä¼šå¯¼è‡´çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼šIMæœåŠ¡ç«¯å¯èƒ½ç»´æŠ¤äº†å¤§é‡â€œæ— æ•ˆçš„è¿æ¥â€ï¼Œä»è€Œå¯¼è‡´ä¸¥é‡çš„è¿æ¥å¥æŸ„çš„èµ„æºæµªè´¹ï¼›åŒæ—¶ä¹Ÿä¼šç¼“å­˜äº†å¤§é‡å®é™…ä¸Šå·²ç»æ²¡æœ‰ç”¨äº†çš„â€œæ˜ å°„å…³ç³»â€â€œè®¾å¤‡ä¿¡æ¯â€â€œåœ¨çº¿çŠ¶æ€â€ç­‰ä¿¡æ¯ï¼Œä¹Ÿæ˜¯å¯¹èµ„æºçš„æµªè´¹ï¼›å¦å¤–ï¼ŒIMæœåŠ¡ç«¯åœ¨å¾€â€œæ— æ•ˆé•¿è¿æ¥â€æ¨é€æ¶ˆæ¯ï¼Œä»¥åŠåç»­çš„é‡è¯•æ¨é€éƒ½ä¼šé™ä½æœåŠ¡çš„æ•´ä½“æ€§èƒ½ã€‚</p><h3>æ”¯æŒå®¢æˆ·ç«¯æ–­çº¿é‡è¿</h3><p>é€šè¿‡â€œå¿ƒè·³â€å¿«é€Ÿè¯†åˆ«è¿æ¥çš„å¯ç”¨æ€§ï¼Œé™¤äº†å¯ä»¥é™ä½æœåŠ¡ç«¯çš„èµ„æºå¼€é”€ï¼Œä¹Ÿè¢«ç”¨äºæ”¯æ’‘å®¢æˆ·ç«¯çš„æ–­å¼€é‡è¿æœºåˆ¶ã€‚</p><p>å¯¹äºå®¢æˆ·ç«¯å‘å‡ºå¿ƒè·³åŒ…ï¼Œå¦‚æœåœ¨ä¸€å®šçš„è¶…æ—¶æ—¶é—´å†…ï¼ˆè€ƒè™‘åˆ°ç½‘ç»œä¼ è¾“å…·æœ‰ä¸€å®šçš„å»¶è¿Ÿæ€§ï¼Œè¿™ä¸ªè¶…æ—¶æ—¶é—´è‡³å°‘è¦å¤§äºä¸€ä¸ªå¿ƒè·³çš„é—´éš”ï¼‰ï¼Œæ¯”å¦‚è¿ç»­ä¸¤æ¬¡å‘é€å¿ƒè·³åŒ…ï¼Œéƒ½æ²¡æœ‰æ”¶åˆ°IMæœåŠ¡ç«¯çš„å“åº”ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯å¯ä»¥è®¤ä¸ºå’ŒæœåŠ¡ç«¯çš„é•¿è¿æ¥ä¸å¯ç”¨ï¼Œè¿™æ—¶å®¢æˆ·ç«¯å¯ä»¥æ–­çº¿é‡è¿ã€‚</p><p>å¯¼è‡´æœåŠ¡ç«¯æ²¡æœ‰å“åº”çš„åŸå› å¯èƒ½æ˜¯å’ŒæœåŠ¡ç«¯çš„ç½‘ç»œåœ¨ä¸­é—´ç¯èŠ‚è¢«æ–­å¼€ï¼Œä¹Ÿå¯èƒ½æ˜¯æœåŠ¡å™¨è´Ÿè½½è¿‡é«˜æ— æ³•å“åº”å¿ƒè·³åŒ…ï¼Œä¸ç®¡ä»€ä¹ˆæƒ…å†µï¼Œè¿™ç§åœºæ™¯ä¸‹æ–­çº¿é‡è¿æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œå®ƒèƒ½å¤Ÿè®©å®¢æˆ·ç«¯å¿«é€Ÿè‡ªåŠ¨ç»´æŠ¤è¿æ¥çš„å¯ç”¨æ€§ã€‚</p><h3>è¿æ¥ä¿æ´»</h3><p>ç»´æŠ¤ä¸€æ¡â€œé«˜å¯ç”¨â€çš„é•¿è¿æ¥ï¼Œè¿˜æœ‰ä¸€ä¸ªé‡è¦çš„ä»»åŠ¡å°±æ˜¯<strong>å°½é‡è®©å»ºç«‹çš„é•¿è¿æ¥å­˜æ´»æ—¶é—´æ›´é•¿</strong>ã€‚</p><p>è¿™é‡Œä½ å¯èƒ½ä¼šé—®ï¼šéš¾é“åœ¨ç”¨æˆ·ç½‘ç»œå’Œä¸­é—´è·¯ç”±ç½‘ç»œéƒ½æ­£å¸¸çš„æƒ…å†µä¸‹ï¼Œé•¿è¿æ¥è¿˜å¯èƒ½ä¼šè¢«æ€æ­»ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯ï¼šç¡®å®ä¼šã€‚</p><p>æ¢ç©¶è¿™ä¸ªåŸå› çš„è¯ï¼Œæˆ‘å¯èƒ½è¦ä»IPv4è¯´èµ·ã€‚ç”±äºIPv4çš„å…¬ç½‘IPçš„èµ„æºæœ‰é™æ€§ï¼ˆçº¦43äº¿ä¸ªï¼‰ï¼Œä¸ºäº†èŠ‚çœå…¬ç½‘IPçš„ä½¿ç”¨ï¼Œé€šè¿‡ç§»åŠ¨è¿è¥å•†ä¸Šç½‘çš„æ‰‹æœºå®é™…ä¸Šåªæ˜¯åˆ†é…äº†ä¸€ä¸ªè¿è¥å•†å†…ç½‘çš„IPã€‚</p><p>åœ¨è®¿é—®Internetæ—¶ï¼Œè¿è¥å•†ç½‘å…³é€šè¿‡ä¸€ä¸ªâ€œå¤–ç½‘IPå’Œç«¯å£â€åˆ°â€œå†…ç½‘IPå’Œç«¯å£â€çš„åŒå‘æ˜ å°„è¡¨ï¼Œæ¥è®©å®é™…ä½¿ç”¨å†…ç½‘IPçš„æ‰‹æœºèƒ½å’Œå¤–ç½‘äº’é€šï¼Œè¿™ä¸ªç½‘ç»œåœ°å€çš„è½¬æ¢è¿‡ç¨‹å«åšNATï¼ˆNetwork Address Translationï¼‰ã€‚</p><p>NATæœ¬èº«çš„å®ç°æœºåˆ¶å¹¶æ²¡æœ‰ä»€ä¹ˆä¸å¦¥ï¼Œé—®é¢˜åœ¨äºå¾ˆå¤šè¿è¥å•†ä¸ºäº†èŠ‚çœèµ„æºå’Œé™ä½è‡ªèº«ç½‘å…³çš„å‹åŠ›ï¼Œå¯¹äºä¸€æ®µæ—¶é—´æ²¡æœ‰æ•°æ®æ”¶å‘çš„è¿æ¥ï¼Œè¿è¥å•†ä¼šå°†å®ƒä»¬ä»NATæ˜ å°„è¡¨ä¸­æ¸…é™¤æ‰ï¼Œè€Œä¸”è¿™ä¸ªæ¸…é™¤åŠ¨ä½œä¹Ÿä¸ä¼šè¢«æ‰‹æœºç«¯å’ŒIMæœåŠ¡ç«¯æ„ŸçŸ¥åˆ°ã€‚</p><p>è¿™æ ·çš„è¯ï¼Œå¦‚æœæ²¡æœ‰äº†NATæ˜ å°„å…³ç³»ï¼Œé•¿è¿æ¥ä¸Šçš„æ¶ˆæ¯æ”¶å‘éƒ½æ— æ³•æ­£å¸¸è¿›è¡Œã€‚è€Œä¸”å¤šé•¿æ—¶é—´ä¼šä»NATæ˜ å°„è¡¨æ¸…é™¤ï¼Œæ¯ä¸ªåœ°æ–¹çš„è¿è¥å•†ä¹Ÿæ˜¯ä¸å°½ç›¸åŒï¼Œä»å‡ åˆ†é’Ÿåˆ°å‡ å°æ—¶éƒ½æœ‰ã€‚å‡è®¾ç”¨æˆ·æœ‰å‡ åˆ†é’Ÿæ²¡æœ‰æ”¶å‘æ¶ˆæ¯ï¼Œå¯èƒ½è¿™ä¸ªé•¿è¿æ¥å°±å·²ç»å¤„äºä¸å¯ç”¨çŠ¶æ€äº†ã€‚</p><p>é‚£ä¹ˆï¼Œå¦‚æœæˆ‘ä»¬çš„å®¢æˆ·ç«¯èƒ½åœ¨æ²¡æœ‰æ¶ˆæ¯æ”¶å‘çš„ç©ºé—²æ—¶é—´ç»™æœåŠ¡ç«¯å‘é€ä¸€äº›ä¿¡ä»¤ï¼Œå°±èƒ½é¿å…é•¿è¿æ¥è¢«è¿è¥å•†NATå¹²æ‰äº†ï¼Œè¿™äº›â€œä¿¡ä»¤â€ä¸€èˆ¬å°±æ˜¯é€šè¿‡å¿ƒè·³åŒ…æ¥å®ç°ã€‚</p><h2>å¿ƒè·³æ£€æµ‹çš„å‡ ç§å®ç°æ–¹å¼</h2><p>ä»‹ç»å®Œäº†å¿ƒè·³æœºåˆ¶çš„é‡è¦æ€§ï¼Œæˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹å¦‚ä½•å»å®ç°å¿ƒè·³æ£€æµ‹ã€‚ç›®å‰ä¸šç•Œæœ‰ä¸‰ç§å¸¸ç”¨çš„å®ç°æ–¹æ³•ï¼šTCP Keepaliveã€åº”ç”¨å±‚å¿ƒè·³åŠæ™ºèƒ½å¿ƒè·³ã€‚ä¸‹é¢æˆ‘ä»¬åˆ†åˆ«æ¥çœ‹ä¸€çœ‹ã€‚</p><h3>TCP Keepalive</h3><p>TCPçš„Keepaliveä½œä¸ºæ“ä½œç³»ç»Ÿçš„TCP/IPåè®®æ ˆå®ç°çš„ä¸€éƒ¨åˆ†ï¼Œå¯¹äºæœ¬æœºçš„TCPè¿æ¥ï¼Œä¼šåœ¨è¿æ¥ç©ºé—²æœŸæŒ‰ä¸€å®šçš„é¢‘æ¬¡ï¼Œè‡ªåŠ¨å‘é€ä¸æºå¸¦æ•°æ®çš„æ¢æµ‹æŠ¥æ–‡ï¼Œæ¥æ¢æµ‹å¯¹æ–¹æ˜¯å¦å­˜æ´»ã€‚æ“ä½œç³»ç»Ÿé»˜è®¤æ˜¯å…³é—­è¿™ä¸ªç‰¹æ€§çš„ï¼Œéœ€è¦ç”±åº”ç”¨å±‚æ¥å¼€å¯ã€‚</p><p>é»˜è®¤çš„ä¸‰ä¸ªé…ç½®é¡¹ï¼šå¿ƒè·³å‘¨æœŸæ˜¯2å°æ—¶ï¼Œå¤±è´¥åå†é‡è¯•9æ¬¡ï¼Œè¶…æ—¶æ—¶é—´75sã€‚ä¸‰ä¸ªé…ç½®é¡¹å‡å¯ä»¥è°ƒæ•´ã€‚</p><p>è¿™æ ·æ¥çœ‹ï¼ŒTCPçš„Keepaliveä½œä¸ºç³»ç»Ÿå±‚TCP/IPåè®®æ ˆçš„å·²æœ‰å®ç°ï¼Œä¸éœ€è¦å…¶ä»–å¼€å‘å·¥ä½œé‡ï¼Œç”¨æ¥ä½œä¸ºè¿æ¥å­˜æ´»ä¸å¦çš„æ¢æµ‹æœºåˆ¶æ˜¯éå¸¸æ–¹ä¾¿çš„ï¼›ä¸Šå±‚åº”ç”¨åªéœ€è¦å¤„ç†æ¢æµ‹åçš„è¿æ¥å¼‚å¸¸æƒ…å†µå³å¯ï¼Œè€Œä¸”å¿ƒè·³åŒ…ä¸æºå¸¦æ•°æ®ï¼Œå¸¦å®½èµ„æºçš„æµªè´¹ä¹Ÿæ˜¯æœ€å°‘çš„ã€‚</p><p>ç”±äºæ˜“ç”¨æ€§å¥½ã€ç½‘ç»œæ¶ˆè€—å°ç­‰ä¼˜åŠ¿ï¼ŒTCP Keepaliveåœ¨å¾ˆå¤šIMç³»ç»Ÿä¸­è¢«å¼€å¯ä½¿ç”¨ï¼Œä¹‹å‰æŠ“åŒ…å°±å‘ç°ï¼ŒWhatsAppsä½¿ç”¨ç©ºé—²æœŸ10ç§’é—´éš”çš„TCP Keepaliveæ¥è¿›è¡Œå­˜æ´»æ¢æµ‹ã€‚</p><p>è™½ç„¶æ‹¥æœ‰ä¼—å¤šä¼˜åŠ¿ï¼Œä½†TCP Keepaliveæœ¬èº«è¿˜æ˜¯å­˜åœ¨ä¸€äº›ç¼ºé™·çš„ï¼Œæ¯”å¦‚å¿ƒè·³é—´éš”çµæ´»æ€§è¾ƒå·®ï¼Œä¸€å°æœåŠ¡å™¨æŸä¸€æ—¶é—´åªèƒ½è°ƒæ•´ä¸ºå›ºå®šé—´éš”çš„å¿ƒè·³ï¼›å¦å¤–TCP Keepaliveè™½ç„¶èƒ½å¤Ÿç”¨äºè¿æ¥å±‚å­˜æ´»çš„æ¢æµ‹ï¼Œä½†å¹¶ä¸ä»£è¡¨çœŸæ­£çš„åº”ç”¨å±‚å¤„äºå¯ç”¨çŠ¶æ€ã€‚</p><p>æˆ‘ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œæ¯”å¦‚IMç³»ç»Ÿå‡ºç°ä»£ç æ­»é”ã€é˜»å¡çš„æƒ…å†µä¸‹ï¼Œå®é™…ä¸Šå·²ç»æ— æ³•å¤„ç†ä¸šåŠ¡è¯·æ±‚äº†ï¼Œä½†æ­¤æ—¶è¿æ¥å±‚TCP Keepaliveçš„æ¢é’ˆä¸éœ€è¦åº”ç”¨å±‚å‚ä¸ï¼Œä»ç„¶èƒ½å¤Ÿåœ¨å†…æ ¸å±‚æ­£å¸¸å“åº”ã€‚è¿™ç§æƒ…å†µå°±ä¼šå¯¼è‡´æ¢æµ‹çš„è¯¯åˆ¤ï¼Œè®©å·²å¤±å»ä¸šåŠ¡å¤„ç†èƒ½åŠ›çš„æœºå™¨ä¸èƒ½è¢«åŠæ—¶å‘ç°ã€‚</p><h3>åº”ç”¨å±‚å¿ƒè·³</h3><p>ä¸ºäº†è§£å†³TCP Keepaliveå­˜åœ¨çš„ä¸€äº›ä¸è¶³çš„é—®é¢˜ï¼Œå¾ˆå¤šIMæœåŠ¡ä½¿ç”¨åº”ç”¨å±‚å¿ƒè·³æ¥æå‡æ¢æµ‹çš„çµæ´»æ€§å’Œå‡†ç¡®æ€§ã€‚<strong>åº”ç”¨å±‚å¿ƒè·³å®é™…ä¸Šå°±æ˜¯å®¢æˆ·ç«¯æ¯éš”ä¸€å®šæ—¶é—´é—´éš”ï¼Œå‘IMæœåŠ¡ç«¯å‘é€ä¸€ä¸ªä¸šåŠ¡å±‚çš„æ•°æ®åŒ…å‘ŠçŸ¥è‡ªèº«å­˜æ´»ã€‚</strong></p><p>å¦‚æœIMæœåŠ¡ç«¯åœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°å¿ƒè·³åŒ…ï¼Œå°±è®¤å®šå®¢æˆ·ç«¯ç”±äºæŸç§åŸå› è¿æ¥ä¸å¯è¾¾äº†ï¼Œæ­¤æ—¶å°±ä¼šä»IMæœåŠ¡ç«¯æŠŠè¿™ä¸ªè¿æ¥æ–­å¼€ï¼ŒåŒæ—¶æ¸…é™¤ç›¸åº”åˆ†é…çš„å…¶ä»–èµ„æºã€‚</p><p>åº”ç”¨å±‚å¿ƒè·³å’ŒTCP Keepaliveå¿ƒè·³ç›¸æ¯”ï¼Œç”±äºä¸å±äºTCP/IPåè®®æ ˆçš„å®ç°ï¼Œå› æ­¤ä¼šæœ‰ä¸€äº›é¢å¤–çš„æ•°æ®ä¼ è¾“å¼€é”€ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†åº”ç”¨å±‚å¿ƒè·³çš„è®¾è®¡ä¸Šå¿ƒè·³åŒ…éƒ½å°½é‡ç²¾ç®€ï¼Œä¸€èˆ¬å°±å‡ ä¸ªå­—èŠ‚ï¼Œæ¯”å¦‚æœ‰äº›åº”ç”¨å±‚å¿ƒè·³åŒ…åªæ˜¯ä¸€ä¸ªç©ºåŒ…ç”¨äºä¿æ´»ï¼Œæœ‰çš„å¿ƒè·³åŒ…åªæ˜¯æºå¸¦äº†å¿ƒè·³é—´éš”ï¼Œç”¨äºå®¢æˆ·ç«¯è°ƒæ•´ä¸‹ä¸€æ¬¡çš„å¿ƒè·³ï¼Œæ‰€ä»¥é¢å¤–çš„æ•°æ®å¼€é”€éƒ½éå¸¸å°ã€‚</p><p>åº”ç”¨å±‚å¿ƒè·³ç›¸æ¯”TCP Keepaliveï¼Œç”±äºéœ€è¦åœ¨åº”ç”¨å±‚è¿›è¡Œå‘é€å’Œæ¥æ”¶çš„å¤„ç†ï¼Œå› æ­¤æ›´èƒ½åæ˜ åº”ç”¨çš„å¯ç”¨æ€§ï¼Œè€Œä¸æ˜¯ä»…ä»…ä»£è¡¨ç½‘ç»œå¯ç”¨ã€‚</p><p>è€Œä¸”åº”ç”¨å±‚å¿ƒè·³å¯ä»¥æ ¹æ®å®é™…ç½‘ç»œçš„æƒ…å†µï¼Œæ¥çµæ´»è®¾ç½®å¿ƒè·³é—´éš”ï¼Œå¯¹äºå›½å†…è¿è¥å•†NATè¶…æ—¶æ··ä¹±çš„å®é™…æƒ…å†µä¸‹ï¼Œçµæ´»å¯è®¾ç½®çš„å¿ƒè·³é—´éš”åœ¨èŠ‚çœç½‘ç»œæµé‡å’Œä¿æ´»å±‚é¢ä¼˜åŠ¿æ›´æ˜æ˜¾ã€‚</p><p>ç›®å‰å¤§éƒ¨åˆ†IMéƒ½é‡‡ç”¨äº†åº”ç”¨å±‚å¿ƒè·³æ–¹æ¡ˆæ¥è§£å†³è¿æ¥ä¿æ´»å’Œå¯ç”¨æ€§æ¢æµ‹çš„é—®é¢˜ã€‚æ¯”å¦‚ä¹‹å‰æŠ“åŒ…ä¸­å‘ç°WhatAppsçš„åº”ç”¨å±‚å¿ƒè·³é—´éš”æœ‰30ç§’å’Œ1åˆ†é’Ÿï¼Œå¾®ä¿¡çš„åº”ç”¨å±‚å¿ƒè·³é—´éš”å¤§éƒ¨åˆ†æƒ…å†µæ˜¯4åˆ†åŠé’Ÿï¼Œç›®å‰å¾®åšé•¿è¿æ¥é‡‡ç”¨çš„æ˜¯2åˆ†é’Ÿçš„å¿ƒè·³é—´éš”ã€‚</p><p>æ¯ç§IMå®¢æˆ·ç«¯å‘é€å¿ƒè·³ç­–ç•¥ä¹Ÿéƒ½ä¸ä¸€æ ·ï¼Œæœ€ç®€å•çš„å°±æ˜¯æŒ‰ç…§å›ºå®šé¢‘ç‡å‘é€å¿ƒè·³åŒ…ï¼Œä¸ç®¡è¿æ¥æ˜¯å¦å¤„äºç©ºé—²çŠ¶æ€ã€‚ä¹‹å‰æŠ“æ‰‹æœºQQçš„åŒ…ï¼Œå°±å‘ç°Appå¤§æ¦‚æŒ‰ç…§45sçš„é¢‘ç‡å›ºå®šå‘å¿ƒè·³ï¼›è¿˜æœ‰ç¨å¾®å¤æ‚çš„ç­–ç•¥æ˜¯å®¢æˆ·ç«¯åœ¨å‘é€æ•°æ®ç©ºé—²åæ‰å‘é€å¿ƒè·³åŒ…ï¼Œè¿™ç§ç›¸æ¯”è¾ƒå¯¹æµé‡èŠ‚çœæ›´å¥½ï¼Œä½†å®ç°ä¸Šç•¥å¾®å¤æ‚ä¸€äº›ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„åº”ç”¨å±‚å¿ƒè·³çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„å¤„ç†æµç¨‹å›¾ï¼Œä»å›¾ä¸­å¯ä»¥çœ‹å‡ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ï¼Œå„è‡ªé€šè¿‡å¿ƒè·³æœºåˆ¶æ¥å®ç°â€œæ–­çº¿é‡è¿â€å’Œâ€œèµ„æºæ¸…ç†â€ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/bc/01/bcb269cadc8b781b56c35071e316e301.png?wh=2276*2412\" alt=\"\"></p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œåˆ¤æ–­è¿æ¥æ˜¯å¦ç©ºé—²çš„æ—¶é—´æ˜¯æ—¢å®šçš„å¿ƒè·³é—´éš”æ—¶é—´ï¼Œè€Œå¯¹äºæœåŠ¡ç«¯æ¥è¯´ï¼Œè€ƒè™‘åˆ°ç½‘ç»œæ•°æ®ä¼ è¾“æœ‰ä¸€å®šçš„å»¶è¿Ÿï¼Œå› æ­¤åˆ¤æ–­è¿æ¥æ˜¯å¦ç©ºé—²çš„è¶…æ—¶æ—¶é—´éœ€è¦å¤§äºå¿ƒè·³é—´éš”æ—¶é—´ï¼Œè¿™æ ·èƒ½é¿å…ç”±äºç½‘ç»œä¼ è¾“å»¶è¿Ÿå¯¼è‡´è¿æ¥å¯ç”¨æ€§çš„è¯¯åˆ¤ã€‚</p><h3>æ™ºèƒ½å¿ƒè·³</h3><p>åœ¨å›½å†…ç§»åŠ¨ç½‘ç»œåœºæ™¯ä¸‹ï¼Œå„ä¸ªåœ°æ–¹è¿è¥å•†åœ¨ä¸åŒçš„ç½‘ç»œç±»å‹ä¸‹NATè¶…æ—¶çš„æ—¶é—´å·®å¼‚æ€§å¾ˆå¤§ã€‚é‡‡ç”¨å›ºå®šé¢‘ç‡çš„åº”ç”¨å±‚å¿ƒè·³åœ¨å®ç°ä¸Šè™½ç„¶ç›¸å¯¹è¾ƒä¸ºç®€å•ï¼Œä½†ä¸ºäº†é¿å…NATè¶…æ—¶ï¼Œåªèƒ½å°†å¿ƒè·³é—´éš”è®¾ç½®ä¸ºå°äºæ‰€æœ‰ç½‘ç»œç¯å¢ƒä¸‹NATè¶…æ—¶çš„æœ€çŸ­æ—¶é—´ï¼Œè™½ç„¶ä¹Ÿèƒ½è§£å†³é—®é¢˜ï¼Œä½†å¯¹äºè®¾å¤‡CPUã€ç”µé‡ã€ç½‘ç»œæµé‡çš„èµ„æºæ— æ³•åšåˆ°æœ€å¤§ç¨‹åº¦çš„èŠ‚çº¦ã€‚</p><p>ä¸ºäº†ä¼˜åŒ–è¿™ä¸ªç°è±¡ï¼Œå¾ˆå¤šå³æ—¶é€šè®¯åœºæ™¯ä¼šé‡‡ç”¨â€œæ™ºèƒ½å¿ƒè·³â€çš„æ–¹æ¡ˆï¼Œæ¥å¹³è¡¡â€œNATè¶…æ—¶â€å’Œâ€œè®¾å¤‡èµ„æºèŠ‚çº¦â€ã€‚æ‰€è°“æ™ºèƒ½å¿ƒè·³ï¼Œå°±æ˜¯è®©å¿ƒè·³é—´éš”èƒ½å¤Ÿæ ¹æ®ç½‘ç»œç¯å¢ƒæ¥è‡ªåŠ¨è°ƒæ•´ï¼Œé€šè¿‡ä¸æ–­è‡ªåŠ¨è°ƒæ•´å¿ƒè·³é—´éš”çš„æ–¹å¼ï¼Œé€æ­¥é€¼è¿‘NATè¶…æ—¶ä¸´ç•Œç‚¹ï¼Œåœ¨ä¿è¯NATä¸è¶…æ—¶çš„æƒ…å†µä¸‹å°½é‡èŠ‚çº¦è®¾å¤‡èµ„æºã€‚æ®è¯´å¾®ä¿¡å°±é‡‡ç”¨äº†æ™ºèƒ½å¿ƒè·³æ–¹æ¡ˆæ¥ä¼˜åŒ–å¿ƒè·³é—´éš”ã€‚</p><p>ä¸è¿‡ä»ä¸ªäººè§’åº¦çœ‹ï¼Œéšç€ç›®å‰ç§»åŠ¨èµ„è´¹çš„å¤§å¹…é™ä½ï¼Œæ‰‹æœºç«¯ç¡¬ä»¶è®¾å¤‡æ¡ä»¶ä¹Ÿè¶Šæ¥è¶Šå¥½ï¼Œæ™ºèƒ½å¿ƒè·³å¯¹äºè®¾å¤‡èµ„æºçš„èŠ‚çº¦æ•ˆæœæœ‰é™ã€‚è€Œä¸”æ™ºèƒ½å¿ƒè·³æ–¹æ¡ˆåœ¨ç¡®è®¤NATè¶…æ—¶ä¸´ç•Œç‚¹çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ä¸æ–­å°è¯•ï¼Œå¯èƒ½ä¹Ÿä¼šä»ä¸€å®šç¨‹åº¦ä¸Šé™ä½â€œè¶…æ—¶ç¡®è®¤é˜¶æ®µâ€è¿æ¥çš„å¯ç”¨æ€§ï¼Œå› æ­¤ï¼Œæˆ‘å»ºè®®ä½ å¯ä»¥æ ¹æ®è‡ªèº«ä¸šåŠ¡åœºæ™¯çš„éœ€è¦ï¼Œæ¥æƒè¡¡å¿…è¦æ€§ã€‚</p><h2>å°ç»“</h2><p>ç®€å•å›é¡¾ä¸€ä¸‹ä»Šå¤©çš„å†…å®¹ï¼šä¸ºäº†ä¿è¯æ¶ˆæ¯ä¸‹å‘çš„å®æ—¶æ€§ï¼Œå¾ˆå¤šå³æ—¶é€šè®¯åœºæ™¯ä½¿ç”¨â€œé•¿è¿æ¥â€æ¥é™ä½æ¯æ¬¡å»ºç«‹è¿æ¥æ¶ˆè€—çš„æ—¶é—´ï¼ŒåŒæ—¶é¿å…äº†â€œçŸ­è¿æ¥è½®è¯¢â€å¸¦æ¥çš„ä¸å¿…è¦çš„èµ„æºæµªè´¹ã€‚</p><p>ä½†æ˜¯ï¼Œç”±äºç§»åŠ¨ç½‘ç»œç¯å¢ƒé”™ç»¼å¤æ‚ï¼Œç½‘ç»œçŠ¶æ€å˜åŒ–ã€ä¸­é—´é“¾è·¯æ–­å¼€ã€è¿è¥å•†NATè¶…æ—¶éƒ½å¯èƒ½å¯¼è‡´è¿™ä¸ªâ€œé•¿è¿æ¥â€å¤„äºä¸å¯ç”¨çŠ¶æ€ï¼Œè€Œä¸”æ”¶å‘åŒå‘æ— æ³•æ„ŸçŸ¥åˆ°ã€‚</p><p>é€šè¿‡å®¢æˆ·ç«¯å’ŒIMæœåŠ¡ç«¯å»ºç«‹çš„â€œå¿ƒè·³æœºåˆ¶â€å¯ä»¥å¿«é€Ÿè‡ªåŠ¨è¯†åˆ«è¿æ¥æ˜¯å¦å¯ç”¨ï¼ŒåŒæ—¶é¿å…è¿è¥å•†NATè¶…æ—¶è¢«æ–­å¼€çš„æƒ…å†µã€‚â€œå¿ƒè·³æœºåˆ¶â€è§£å†³äº†ä»¥ä¸‹ä¸‰æ–¹é¢çš„é—®é¢˜ï¼š</p><ul>\n<li><strong>é™ä½æœåŠ¡ç«¯è¿æ¥ç»´æŠ¤æ— æ•ˆè¿æ¥çš„å¼€é”€ã€‚</strong></li>\n<li><strong>æ”¯æŒå®¢æˆ·ç«¯å¿«é€Ÿè¯†åˆ«æ— æ•ˆè¿æ¥ï¼Œè‡ªåŠ¨æ–­çº¿é‡è¿ã€‚</strong></li>\n<li><strong>è¿æ¥ä¿æ´»ï¼Œé¿å…è¢«è¿è¥å•†NATè¶…æ—¶æ–­å¼€ã€‚</strong></li>\n</ul><p>å¿ƒè·³æ¢æµ‹çš„å®ç°ä¸šç•Œå¤§éƒ¨åˆ†ç»¼åˆé‡‡ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š</p><ul>\n<li><strong>TCP Keepaliveã€‚</strong>æ“ä½œç³»ç»ŸTCP/IPåè®®æ ˆè‡ªå¸¦ï¼Œæ— éœ€äºŒæ¬¡å¼€å‘ï¼Œä½¿ç”¨ç®€å•ï¼Œä¸æºå¸¦æ•°æ®ç½‘ç»œæµé‡æ¶ˆè€—å°‘ã€‚ä½†å­˜åœ¨çµæ´»æ€§ä¸å¤Ÿå’Œæ— æ³•åˆ¤æ–­åº”ç”¨å±‚æ˜¯å¦å¯ç”¨çš„ç¼ºé™·ã€‚</li>\n<li><strong>åº”ç”¨å±‚å¿ƒè·³ã€‚</strong>åº”ç”¨è‡ªå·±å®ç°å¿ƒè·³æœºåˆ¶ï¼Œéœ€è¦ä¸€å®šçš„ä»£ç å¼€å‘é‡ï¼Œç½‘ç»œæµé‡æ¶ˆè€—ç¨å¾®å¤šä¸€ç‚¹ï¼Œä½†å¿ƒè·³é—´éš”çš„çµæ´»æ€§å¥½ï¼Œé…åˆæ™ºèƒ½å¿ƒè·³æœºåˆ¶ï¼Œå¯ä»¥åšåˆ°â€œä¿è¯NATä¸è¶…æ—¶çš„æƒ…å†µä¸‹æœ€å¤§åŒ–èŠ‚çº¦è®¾å¤‡èµ„æºæ¶ˆè€—â€ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ›´ç²¾ç¡®åé¦ˆåº”ç”¨å±‚çš„çœŸå®å¯ç”¨æ€§ã€‚</li>\n</ul><p>æœ€åç»™å¤§å®¶ç•™ä¸€é“æ€è€ƒé¢˜ï¼š</p><p><strong>å¿ƒè·³æœºåˆ¶ä¸­å¯ä»¥ç»“åˆTCPçš„keepaliveå’Œåº”ç”¨å±‚å¿ƒè·³æ¥ä¸€èµ·ä½¿ç”¨å—ï¼Ÿ</strong></p><p>ä»¥ä¸Šå°±æ˜¯ä»Šå¤©è¯¾ç¨‹çš„å†…å®¹ï¼Œæ¬¢è¿ä½ ç»™æˆ‘ç•™è¨€ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç•™è¨€åŒºä¸€èµ·è®¨è®ºã€‚æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œæˆ‘ä»¬ä¸‹æœŸå†è§ã€‚</p>","comments":[{"had_liked":false,"id":133272,"user_name":"ç‹æ£•ç”Ÿ","can_delete":false,"product_type":"c1","uid":1337944,"ip_address":"","ucode":"901BD0447A871E","user_header":"https://static001.geekbang.org/account/avatar/00/14/6a/58/f2c6d65b.jpg","comment_is_top":false,"comment_ctime":1568472887,"is_pvip":false,"replies":[{"id":"51300","content":"æ˜¯çš„ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1568628352,"ip_address":"","comment_id":133272,"utype":1}],"discussion_count":2,"race_medal":0,"score":"186252066615","product_id":100034901,"comment_content":"è§£ç­”é—®é¢˜ï¼šå¦‚æœä»å®ç°åŠŸèƒ½è§’åº¦çœ‹ï¼Œä¼ è¾“å±‚å’Œåº”ç”¨å±‚çš„å¿ƒè·³æœºåˆ¶æ²¡æœ‰ç»“åˆçš„å¿…è¦ï¼Œå› ä¸ºä¼ è¾“å±‚çš„å¿ƒè·³æ¢æµ‹è¿æ¥å¯ç”¨æ€§ï¼Œåº”ç”¨å±‚çš„å¿ƒè·³æœºåˆ¶ä¹Ÿå¯ä»¥å®Œæˆæ¢æµ‹; ä½†ä»debugè§’åº¦çœ‹ï¼Œåº”ç”¨å±‚çš„å¿ƒè·³æ¢æµ‹æœºåˆ¶æ— æ³•å®šä½æ˜¯ç½‘ç»œçš„é—®é¢˜è¿˜æ˜¯ç³»ç»Ÿçš„é—®é¢˜ï¼Œæ­¤æ—¶ç”±ä¼ è¾“å±‚è¾…åŠ©å°±éå¸¸å¥½ï¼Œä½†å®ç°ä¼šç›¸å¯¹å¤æ‚ï¼","like_count":42,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467329,"discussion_content":"æ˜¯çš„ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568628352,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2349972,"avatar":"https://static001.geekbang.org/account/avatar/00/23/db/94/b8a2c768.jpg","nickname":"å¼ å®‡è¿ª","note":"","ucode":"A13903B84CE5C6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375514,"discussion_content":"å¥½åˆ—å®³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621700174,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133030,"user_name":"é’¢","can_delete":false,"product_type":"c1","uid":1106184,"ip_address":"","ucode":"A49848BF63A579","user_header":"https://static001.geekbang.org/account/avatar/00/10/e1/08/3dc76043.jpg","comment_is_top":false,"comment_ctime":1568329507,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"96057610019","product_id":100034901,"comment_content":"tcp keepaliveè§£å†³ç½‘ç»œå¯ç”¨æ€§ï¼Œåº”ç”¨å±‚keepaliveè§£å†³ç½‘ç»œå’ŒæœåŠ¡å¯ç”¨æ€§ï¼Œåº”ç”¨å±‚æ— æ³•åŒºåˆ«ç½‘ç»œè¿˜æ˜¯æœåŠ¡é—®é¢˜ï¼ŒåŠ ä¸Štcpå¿ƒè·³åŒ…å¯ä»¥è¿›ä¸€æ­¥åŒºåˆ†ï¼Œæœ‰åŠ©äºå®¢æˆ·ç«¯åšåŠ¨æ€è°ƒæ•´","like_count":23},{"had_liked":false,"id":144343,"user_name":"rfyiamcool","can_delete":false,"product_type":"c1","uid":1118627,"ip_address":"","ucode":"65FCBF05B13893","user_header":"https://static001.geekbang.org/account/avatar/00/11/11/a3/7a2405ca.jpg","comment_is_top":false,"comment_ctime":1571900317,"is_pvip":true,"replies":[{"id":"55749","content":"å…¶å®å°±æ˜¯ä¸‹ä¸€æ¬¡åŠ¨æ€è°ƒæ•´çš„å¿ƒè·³é—´éš”æ˜¯ï¼šå½“å‰å·²ç»ç¡®è®¤çš„å®‰å…¨çš„å¿ƒè·³é—´éš”æœ€å¤§å€¼ å’Œ å·²ç»ç¡®è®¤çš„å¿ƒè·³æ¢æµ‹è¿‡å¤§çš„æœ€å°å€¼ çš„ä¸­é—´å‡å€¼ã€‚æ¯”å¦‚ä¸Šä¸€æ¬¡å¿ƒè·³é—´éš”æ˜¯4åˆ†é’Ÿï¼Œè€Œä¸”è¿ç»­Næ¬¡éƒ½æˆåŠŸackäº†ï¼Œé‚£ä¹ˆå½“å‰å·²ç»ç¡®è®¤çš„å®‰å…¨çš„å¿ƒè·³é—´éš”æ˜¯4åˆ†é’Ÿï¼Œå‡è®¾å·²ç»ç¡®è®¤10åˆ†é’Ÿæ—¶å¿ƒè·³é—´éš”è¿‡å¤§äº†ï¼Œé‚£ä¹ˆä¸‹ä¸€æ¬¡è°ƒæ•´çš„å¿ƒè·³å°±æ˜¯ 4 + 10 &#47; 2 = 7åˆ†é’Ÿã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1571987870,"ip_address":"","comment_id":144343,"utype":1}],"discussion_count":2,"race_medal":0,"score":"40226605981","product_id":100034901,"comment_content":"èƒ½ç®€å•è¯´ä¸‹ äºŒåˆ†æ³•æ¥è¿›è¡Œå¿ƒè·³æ¢æµ‹ çš„é€»è¾‘ä¹ˆï¼Ÿ ","like_count":10,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471895,"discussion_content":"å…¶å®å°±æ˜¯ä¸‹ä¸€æ¬¡åŠ¨æ€è°ƒæ•´çš„å¿ƒè·³é—´éš”æ˜¯ï¼šå½“å‰å·²ç»ç¡®è®¤çš„å®‰å…¨çš„å¿ƒè·³é—´éš”æœ€å¤§å€¼ å’Œ å·²ç»ç¡®è®¤çš„å¿ƒè·³æ¢æµ‹è¿‡å¤§çš„æœ€å°å€¼ çš„ä¸­é—´å‡å€¼ã€‚æ¯”å¦‚ä¸Šä¸€æ¬¡å¿ƒè·³é—´éš”æ˜¯4åˆ†é’Ÿï¼Œè€Œä¸”è¿ç»­Næ¬¡éƒ½æˆåŠŸackäº†ï¼Œé‚£ä¹ˆå½“å‰å·²ç»ç¡®è®¤çš„å®‰å…¨çš„å¿ƒè·³é—´éš”æ˜¯4åˆ†é’Ÿï¼Œå‡è®¾å·²ç»ç¡®è®¤10åˆ†é’Ÿæ—¶å¿ƒè·³é—´éš”è¿‡å¤§äº†ï¼Œé‚£ä¹ˆä¸‹ä¸€æ¬¡è°ƒæ•´çš„å¿ƒè·³å°±æ˜¯ 4 + 10 / 2 = 7åˆ†é’Ÿã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571987870,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1118627,"avatar":"https://static001.geekbang.org/account/avatar/00/11/11/a3/7a2405ca.jpg","nickname":"rfyiamcool","note":"","ucode":"65FCBF05B13893","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":41176,"discussion_content":"è°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572361758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134928,"user_name":"éš°æœ‰è·","can_delete":false,"product_type":"c1","uid":1357944,"ip_address":"","ucode":"2BE9A32AB28963","user_header":"https://static001.geekbang.org/account/avatar/00/14/b8/78/2828195b.jpg","comment_is_top":false,"comment_ctime":1568957669,"is_pvip":false,"replies":[{"id":"51779","content":"tcpçš„keepaliveå¼€å¯æ¯”è¾ƒç®€å•ï¼Œæ¯”å¦‚nettyä¸‹å¯ä»¥é€šè¿‡å¦‚ä¸‹ä»£ç å¼€å¯ï¼š<br><br>ServerBootstrap bootstrap = new ServerBootstrap();<br>bootstrap.childOption(ChannelOption.SO_KEEPALIVE, true);<br><br>å¦å¤–tcp keepaliveçš„å¿ƒè·³é—´éš”çš„é…ç½®ä¹Ÿéœ€è¦ä¿®æ”¹ä¸€ä¸‹ç³»ç»Ÿçš„&#47;etc&#47;sysctl.confï¼Œç±»ä¼¼ä¸‹é¢ï¼š<br><br>net.ipv4.tcp_keepalive_time=120<br>net.ipv4.tcp_keepalive_intvl=30<br>net.ipv4.tcp_keepalive_probes=3","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1568967196,"ip_address":"","comment_id":134928,"utype":1}],"discussion_count":1,"race_medal":0,"score":"40223663333","product_id":100034901,"comment_content":"çœ‹äº†è€å¸ˆçš„è®²è§£ï¼Œåœ¨ç†è®ºä¸Šæ˜¯æ˜ç™½äº†ï¼Œä½†æ˜¯å…·ä½“å®è·µä¸Šè¯¥å¦‚ä½•æ“ä½œï¼Ÿæ¯”å¦‚ï¼štcpçš„keepaliveè¯¥å¦‚ä½•é€šè¿‡å…·ä½“çš„ä»£ç è¯­è¨€å»å®ç°ã€‚è¿™äº›å…·ä½“æ“ä½œæ€§çš„çŸ¥è¯†ï¼Œä¸çŸ¥é“æœ¬è¯¾ç¨‹åé¢æ˜¯å¦æœ‰æ¶‰åŠåˆ°ï¼Ÿ","like_count":9,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467961,"discussion_content":"tcpçš„keepaliveå¼€å¯æ¯”è¾ƒç®€å•ï¼Œæ¯”å¦‚nettyä¸‹å¯ä»¥é€šè¿‡å¦‚ä¸‹ä»£ç å¼€å¯ï¼š\n\nServerBootstrap bootstrap = new ServerBootstrap();\nbootstrap.childOption(ChannelOption.SO_KEEPALIVE, true);\n\nå¦å¤–tcp keepaliveçš„å¿ƒè·³é—´éš”çš„é…ç½®ä¹Ÿéœ€è¦ä¿®æ”¹ä¸€ä¸‹ç³»ç»Ÿçš„/etc/sysctl.confï¼Œç±»ä¼¼ä¸‹é¢ï¼š\n\nnet.ipv4.tcp_keepalive_time=120\nnet.ipv4.tcp_keepalive_intvl=30\nnet.ipv4.tcp_keepalive_probes=3","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568967196,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133019,"user_name":"newzai","can_delete":false,"product_type":"c1","uid":1102367,"ip_address":"","ucode":"D5E34D427D65FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/d2/1f/2ef2514b.jpg","comment_is_top":false,"comment_ctime":1568314425,"is_pvip":false,"replies":[{"id":"51288","content":"æ¯”è¾ƒå¸¸è§çš„æœ‰äºŒåˆ†æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1568623045,"ip_address":"","comment_id":133019,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23043150905","product_id":100034901,"comment_content":"æ™ºèƒ½å¿ƒè·³ï¼Œé‡‡ç”¨ä»€ä¹ˆç®—æ³•é€¼è¿‘æˆ–è€…é€‰æ‹©å¿ƒè·³å‘¨æœŸï¼Ÿå¦‚ä½•æ„ŸçŸ¥å½“å‰çš„å¿ƒè·³å‘¨æœŸæ˜¯å¦å¤ªå°ï¼Ÿå› ä¸ºä¸€æ—¦å¤ªå¤§å°±ä¼šå¯¼è‡´è¿æ¥æ–­å¼€","like_count":5,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467220,"discussion_content":"æ¯”è¾ƒå¸¸è§çš„æœ‰äºŒåˆ†æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568623045,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133594,"user_name":"dongdong","can_delete":false,"product_type":"c1","uid":1305580,"ip_address":"","ucode":"25CB9FC6AE7737","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/UqxY58hlwdaypDeLwsjSBfBe2Q7YhZyJniaPEf7Ws7tneSzgQ6js6Uh0KT5FjCBIRUCGyVZ0zsvBUPVz2bK2YWQ/132","comment_is_top":false,"comment_ctime":1568617015,"is_pvip":false,"replies":[{"id":"51307","content":"å¿ƒè·³é—´éš”æ˜¯å¤šå°‘ï¼Ÿå¤–ç½‘çš„ä¸­é—´è·¯ç”±ç¯èŠ‚å’Œè¿è¥å•†ç½‘ç»œéƒ½å¯èƒ½åœ¨ ä¸€ä¸ªè¿æ¥ä¸€æ®µæ—¶é—´æ²¡æœ‰æ•°æ®ä¼ è¾“çš„æ—¶å€™ ä»NATè¡¨åˆ é™¤è¿™ä¸ªè¿æ¥çš„æ˜ å°„ã€‚æ‰€ä»¥å¿ƒè·³é—´éš”æœ€å¥½ä¸è¦å¤§äº5åˆ†é’Ÿã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1568629369,"ip_address":"","comment_id":133594,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14453518903","product_id":100034901,"comment_content":"è¯·é—®è€å¸ˆï¼Œæˆ‘è¿™é‡Œä½¿ç”¨åº”ç”¨å±‚å‘å¿ƒè·³åŒ…ï¼Œå¾ˆå¥‡æ€ªåœ¨å†…ç½‘æµ‹è¯•ç¯å¢ƒï¼Œç½‘é¡µä¸€ç›´ä¸æ“ä½œéƒ½ä¸ä¼šæ–­çº¿ï¼Œä½†åœ¨å¤–ç½‘åŒå¥—ä»£ç ï¼Œä¸æ“ä½œ1ï¼Œ2ä¸ªå°æ—¶åï¼Œç½‘é¡µçš„é•¿é“¾æ¥å°±ä¼šæ–­çº¿ï¼ŒWSè„šæœ¬é‡è¿ä¹Ÿè¿ä¸ä¸Šï¼Œä½†åªè¦é‡æ–°åˆ·æ–°é¡µé¢å°±å¯ä»¥è¿ä¸Šäº†ï¼Œè¿™æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467440,"discussion_content":"å¿ƒè·³é—´éš”æ˜¯å¤šå°‘ï¼Ÿå¤–ç½‘çš„ä¸­é—´è·¯ç”±ç¯èŠ‚å’Œè¿è¥å•†ç½‘ç»œéƒ½å¯èƒ½åœ¨ ä¸€ä¸ªè¿æ¥ä¸€æ®µæ—¶é—´æ²¡æœ‰æ•°æ®ä¼ è¾“çš„æ—¶å€™ ä»NATè¡¨åˆ é™¤è¿™ä¸ªè¿æ¥çš„æ˜ å°„ã€‚æ‰€ä»¥å¿ƒè·³é—´éš”æœ€å¥½ä¸è¦å¤§äº5åˆ†é’Ÿã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568629369,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133058,"user_name":"äº‘å¸ˆå…„","can_delete":false,"product_type":"c1","uid":1010459,"ip_address":"","ucode":"4475AF1598FBFD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6b/1b/4b397b80.jpg","comment_is_top":false,"comment_ctime":1568341400,"is_pvip":false,"replies":[{"id":"51291","content":"ä¼šåŒæ¨ï¼Œèµ°APNsä¸ä¼šç›´æ¥è½åœ°appçš„dbï¼Œè‹¹æœä¼šæ ¹æ®åº”ç”¨åœ¨å‰å°è¿˜æ˜¯åœ¨åå°æ¥å†³å®šè¦ä¸è¦å±•ç¤ºAPNsèµ°é€šçŸ¥æ çš„æ¶ˆæ¯ã€‚ç°åœ¨ä¹Ÿæœ‰å¾ˆå¤šåº”ç”¨æ”¯æŒåº”ç”¨åœ¨å‰å°æ—¶ä¹Ÿå±•ç¤ºé€šçŸ¥æ çš„æ¶ˆæ¯ï¼Œçœ‹å…·ä½“éœ€æ±‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1568623699,"ip_address":"","comment_id":133058,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14453243288","product_id":100034901,"comment_content":"æœåŠ¡ç«¯åœ¨è¿›è¡Œæ¨é€æ—¶å€™ï¼Œå‡è®¾åˆ¤æ–­ç”¨æˆ·è¿æ¥æœ‰æ•ˆï¼Œå³ç”¨æˆ·åœ¨çº¿ï¼Œæ­¤æ—¶æ¨é€æ˜¯åŒæ—¶æ¨ä¸å®¢æˆ·ç«¯åº”ç”¨ä¿æŒçš„é•¿è¿æ¥å’Œapnsç­‰å¤šæ¡é€šé“å—ï¼Ÿç„¶ååœ¨å®¢æˆ·ç«¯å»é‡ï¼Ÿè¿˜æ˜¯æ¯æ¬¡åªä¼šé€‰æ‹©ä¸€æ¡é€šé“ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467243,"discussion_content":"ä¼šåŒæ¨ï¼Œèµ°APNsä¸ä¼šç›´æ¥è½åœ°appçš„dbï¼Œè‹¹æœä¼šæ ¹æ®åº”ç”¨åœ¨å‰å°è¿˜æ˜¯åœ¨åå°æ¥å†³å®šè¦ä¸è¦å±•ç¤ºAPNsèµ°é€šçŸ¥æ çš„æ¶ˆæ¯ã€‚ç°åœ¨ä¹Ÿæœ‰å¾ˆå¤šåº”ç”¨æ”¯æŒåº”ç”¨åœ¨å‰å°æ—¶ä¹Ÿå±•ç¤ºé€šçŸ¥æ çš„æ¶ˆæ¯ï¼Œçœ‹å…·ä½“éœ€æ±‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568623699,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142203,"user_name":"Geek_e7834d","can_delete":false,"product_type":"c1","uid":1530493,"ip_address":"","ucode":"ABAF1B1B7E6490","user_header":"","comment_is_top":false,"comment_ctime":1571311024,"is_pvip":false,"replies":[{"id":"54997","content":"å…·ä½“æ˜¯å“ªä¸ªå›¾å‘€ï¼Œç†è§£ä¸å¤ªå¯¹ï¼Œå¿ƒè·³å’Œæ¨é€æ˜¯ç‹¬ç«‹çš„ï¼Œå¹¶ä¸ä¼šåœ¨æ¨é€çš„æ—¶å€™è¿›è¡Œæ£€æµ‹ï¼Œä¸€èˆ¬ä¼šç”±ç‹¬ç«‹çš„å®šæ—¶å™¨æ¥æ ¹æ®ä¸€å®šæ—¶é—´å†…socketä¸­æ˜¯å¦æœ‰æ•°æ®æ”¶å‘æ¥å®šæ—¶è§¦å‘çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1571404223,"ip_address":"","comment_id":142203,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10161245616","product_id":100034901,"comment_content":"çœ‹æµç¨‹å›¾ï¼ŒæœåŠ¡å™¨æ£€æŸ¥å¿ƒè·³å¹¶ä¸æ˜¯å®šæ—¶çš„ï¼Œ è€Œåªæ˜¯æ¨é€çš„æ—¶å€™æ£€æµ‹ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471028,"discussion_content":"å…·ä½“æ˜¯å“ªä¸ªå›¾å‘€ï¼Œç†è§£ä¸å¤ªå¯¹ï¼Œå¿ƒè·³å’Œæ¨é€æ˜¯ç‹¬ç«‹çš„ï¼Œå¹¶ä¸ä¼šåœ¨æ¨é€çš„æ—¶å€™è¿›è¡Œæ£€æµ‹ï¼Œä¸€èˆ¬ä¼šç”±ç‹¬ç«‹çš„å®šæ—¶å™¨æ¥æ ¹æ®ä¸€å®šæ—¶é—´å†…socketä¸­æ˜¯å¦æœ‰æ•°æ®æ”¶å‘æ¥å®šæ—¶è§¦å‘çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571404223,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133703,"user_name":"èŠ±æŒ‡ä»¤","can_delete":false,"product_type":"c1","uid":1110252,"ip_address":"","ucode":"E0C92F7AAC2585","user_header":"https://static001.geekbang.org/account/avatar/00/10/f0/ec/5e147cbf.jpg","comment_is_top":false,"comment_ctime":1568639100,"is_pvip":false,"replies":[{"id":"51486","content":"å› ä¸ºtcpæœ¬èº«æ˜¯ä¸€ä¸ªè™šæ‹Ÿè¿æ¥ï¼Œä¸­é—´é“¾è·¯æ–­å¼€çš„è¯å¦ä¸€ç«¯æ˜¯æ„ŸçŸ¥ä¸åˆ°çš„ï¼Œå¦å¤–ï¼Œç§»åŠ¨è¿è¥å•†çš„NATä¼šå¯¹ä¸€æ®µæ—¶é—´æ²¡æœ‰æ•°æ®ä¼ è¾“çš„è¿æ¥åˆ‡æ–­ï¼Œæ‰€ä»¥å¯¹äºç»´æŠ¤é«˜å¯ç”¨çš„ä¸€æ¡é•¿è¿æ¥å¿ƒè·³æ˜¯å¿…ä¸å¯å°‘çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1568805793,"ip_address":"","comment_id":133703,"utype":1}],"discussion_count":4,"race_medal":0,"score":"10158573692","product_id":100034901,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘ç”¨goçš„tcpsocketï¼Œæœ‰ä¸€ç«¯å¼‚å¸¸é€€å‡ºæ—¶ï¼Œå¦ä¸€ç«¯ä¼šè§¦å‘æ‰çº¿é€šçŸ¥ã€‚æ‰€ä»¥æˆ‘ä¸æ˜ç™½çš„æ˜¯ï¼Œsocketæ˜¯ä¸æ˜¯ä¸éœ€è¦å¿ƒè·³ï¼Ÿè¿˜æ˜¯æ˜¯å› ä¸ºæˆ‘æ˜¯åœ¨å±€åŸŸç½‘æµ‹è¯•ï¼Œå’Œå…¬ç½‘æƒ…å†µä¸ä¸€æ ·ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467478,"discussion_content":"å› ä¸ºtcpæœ¬èº«æ˜¯ä¸€ä¸ªè™šæ‹Ÿè¿æ¥ï¼Œä¸­é—´é“¾è·¯æ–­å¼€çš„è¯å¦ä¸€ç«¯æ˜¯æ„ŸçŸ¥ä¸åˆ°çš„ï¼Œå¦å¤–ï¼Œç§»åŠ¨è¿è¥å•†çš„NATä¼šå¯¹ä¸€æ®µæ—¶é—´æ²¡æœ‰æ•°æ®ä¼ è¾“çš„è¿æ¥åˆ‡æ–­ï¼Œæ‰€ä»¥å¯¹äºç»´æŠ¤é«˜å¯ç”¨çš„ä¸€æ¡é•¿è¿æ¥å¿ƒè·³æ˜¯å¿…ä¸å¯å°‘çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568805793,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1237556,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e2/34/0c2c1200.jpg","nickname":"L","note":"","ucode":"0BDC32D02DB267","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":65558,"discussion_content":"websocketå°±æ˜¯è¿™æ ·ï¼Œä¹‹å‰å…¬å¸çš„äº§å“å°±æ˜¯åŸºäºwsçš„ï¼Œäº²æµ‹webç«¯çš„IMå¦‚æœå…³é—­æµè§ˆå™¨é¡µé¢çš„è¯å¦ä¸€ç«¯å¯ä»¥é©¬ä¸ŠçŸ¥é“ï¼Œå¦‚æœç›´æ¥æ–­å¼€wifiæˆ–è€…æ‹”æ‰ç½‘çº¿å°±ä¸è¡Œäº†ï¼Œå¦ä¸€ç«¯æ²¡ååº”ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1575012054,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1237556,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e2/34/0c2c1200.jpg","nickname":"L","note":"","ucode":"0BDC32D02DB267","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":65556,"discussion_content":"å¼‚å¸¸åˆ†å¤šé’Ÿï¼Œå¦‚æœæ˜¯è¿›ç¨‹æ­»æ‰ï¼Œå¦ä¸€ç«¯ä¸€èˆ¬èƒ½çŸ¥é“ï¼Œå¦‚æœæ˜¯è®¾å¤‡æ‰ç”µï¼Œç½‘çº¿æ–­å¼€ï¼Œè·¯ç”±å™¨æ–­ç½‘ï¼Œè¿™äº›å¼‚å¸¸çš„è¯ï¼Œå¦ä¸€ç«¯æ˜¯ä¸èƒ½ç«‹å³æ„ŸçŸ¥åˆ°çš„ï¼Œ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1575011941,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1110252,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f0/ec/5e147cbf.jpg","nickname":"èŠ±æŒ‡ä»¤","note":"","ucode":"E0C92F7AAC2585","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1237556,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e2/34/0c2c1200.jpg","nickname":"L","note":"","ucode":"0BDC32D02DB267","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69397,"discussion_content":"æ˜ç™½äº†ï¼Œæ„Ÿè°¢è§£ç­”ï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575285604,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":65556,"ip_address":""},"score":69397,"extra":""}]}]},{"had_liked":false,"id":133261,"user_name":"å¤§é­”ç‹æ±ªæ±ª","can_delete":false,"product_type":"c1","uid":1010680,"ip_address":"","ucode":"4B205CB52FC95F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6b/f8/b4da7936.jpg","comment_is_top":false,"comment_ctime":1568469794,"is_pvip":false,"replies":[{"id":"51299","content":"ä¸€ç§æ–¹å¼æ˜¯å®¢æˆ·ç«¯é‡‡ç”¨å›ºå®štimeræ¥å®šæ—¶å‘é€å¿ƒè·³åŒ…ï¼Œä¹Ÿå¯ä»¥åœ¨å®¢æˆ·ç«¯æ²¡æœ‰æ¶ˆæ¯æ”¶å‘åçš„ä¸€æ®µæ—¶é—´æ‰å¯ä»¥å‘é€å¿ƒè·³åŒ…ï¼Œè¿™æ ·èƒ½èŠ‚çº¦ä¸€äº›æµé‡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1568628335,"ip_address":"","comment_id":133261,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10158404386","product_id":100034901,"comment_content":"è€å¸ˆ å®¢æˆ·ç«¯æˆ–æœåŠ¡ç«¯å¿ƒè·³å®ç°æ˜¯åœ¨å®¢æˆ·ç«¯ç»´æŒä¸€ä¸ªè½®è®­æœåŠ¡å—ï¼Ÿè¿™æ ·ä¼šä¸ä¼šæœ‰æµªè´¹å®¢æˆ·ç«¯èµ„æºçš„é—®é¢˜ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆå¥½æ–¹æ³•è§£å†³è½®è®­å®šæ—¶å™¨è¿™ç§èµ„æºæµªè´¹é—®é¢˜","like_count":2,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467321,"discussion_content":"ä¸€ç§æ–¹å¼æ˜¯å®¢æˆ·ç«¯é‡‡ç”¨å›ºå®štimeræ¥å®šæ—¶å‘é€å¿ƒè·³åŒ…ï¼Œä¹Ÿå¯ä»¥åœ¨å®¢æˆ·ç«¯æ²¡æœ‰æ¶ˆæ¯æ”¶å‘åçš„ä¸€æ®µæ—¶é—´æ‰å¯ä»¥å‘é€å¿ƒè·³åŒ…ï¼Œè¿™æ ·èƒ½èŠ‚çº¦ä¸€äº›æµé‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568628335,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133174,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1568431819,"is_pvip":true,"replies":[{"id":"51297","content":"æœåŠ¡ç«¯ä¸çŸ¥é“å®¢æˆ·ç«¯çš„å›ºå®šè¿æ¥åœ°å€å‘€ï¼Œæ‰€ä»¥é‡è¿ä¸€èˆ¬éƒ½æ˜¯ç”±å®¢æˆ·ç«¯å‘èµ·ã€‚æœåŠ¡ç«¯ä¸€èˆ¬ä¸éœ€è¦å‘é€å¿ƒè·³ï¼Œæ˜¯ç”±å®¢æˆ·ç«¯æ¥å‘é€å¿ƒè·³ï¼ŒæœåŠ¡ç«¯ä¸€æ®µæ—¶é—´æ²¡æœ‰æ”¶åˆ°å®¢æˆ·ç«¯çš„å¿ƒè·³åŒ…çš„æ—¶å€™å°±å¯ä»¥åˆ¤æ–­è¿æ¥å¼‚å¸¸ï¼Œä¸»åŠ¨æ–­å¼€ç­‰å®¢æˆ·ç«¯é‡è¿ä¸Šçº¿å°±å¯ä»¥äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1568628234,"ip_address":"","comment_id":133174,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10158366411","product_id":100034901,"comment_content":"æˆ‘çœ‹ä¸Šå›¾ å¿ƒè·³å¤„ç†æµç¨‹ï¼Œåªæœ‰å®¢æˆ·ç«¯å½“åˆ¤æ–­è¿æ¥æ— æ•ˆçš„æ—¶å€™æ‰ä¼šè¿›è¡Œ è¿æ¥é‡è¿ï¼Œé‡è¿çš„è¿™ä¸ªåŠ¨ä½œæœåŠ¡ç«¯ä¸ä¼šè¿›è¡Œå—ï¼Ÿ å¦‚æœè¿™æ ·çš„è¯æœåŠ¡ç«¯è¿˜è¦å‘é€å¿ƒè·³æ¶ˆæ¯è¿›è¡Œå¿ƒè·³æ£€æµ‹åšä»€ä¹ˆå‘¢ï¼ŸæœåŠ¡ç«¯æ˜¯ä¸æ˜¯å¯ä»¥è¿™æ ·å¤„ç†ï¼Œå½“ä¸€æ®µæ—¶é—´æ²¡æœ‰æ”¶åˆ°å®¢æˆ·ç«¯çš„å¿ƒè·³åŒ…çš„æ—¶å€™å°±åˆ¤æ–­ä¸è¯¥å®¢æˆ·ç«¯çš„å¿ƒè·³è¿æ¥æ–­å¼€äº†ï¼Œç›´æ¥é‡Šæ”¾å¯¹åº”çš„èµ„æºä¸å°±å¯ä»¥äº†å—ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467280,"discussion_content":"æœåŠ¡ç«¯ä¸çŸ¥é“å®¢æˆ·ç«¯çš„å›ºå®šè¿æ¥åœ°å€å‘€ï¼Œæ‰€ä»¥é‡è¿ä¸€èˆ¬éƒ½æ˜¯ç”±å®¢æˆ·ç«¯å‘èµ·ã€‚æœåŠ¡ç«¯ä¸€èˆ¬ä¸éœ€è¦å‘é€å¿ƒè·³ï¼Œæ˜¯ç”±å®¢æˆ·ç«¯æ¥å‘é€å¿ƒè·³ï¼ŒæœåŠ¡ç«¯ä¸€æ®µæ—¶é—´æ²¡æœ‰æ”¶åˆ°å®¢æˆ·ç«¯çš„å¿ƒè·³åŒ…çš„æ—¶å€™å°±å¯ä»¥åˆ¤æ–­è¿æ¥å¼‚å¸¸ï¼Œä¸»åŠ¨æ–­å¼€ç­‰å®¢æˆ·ç«¯é‡è¿ä¸Šçº¿å°±å¯ä»¥äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568628234,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":197684,"user_name":"0xTang","can_delete":false,"product_type":"c1","uid":1019659,"ip_address":"","ucode":"82F5282EF3044B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8f/0b/a438de52.jpg","comment_is_top":false,"comment_ctime":1585391937,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5880359233","product_id":100034901,"comment_content":"å¿ƒè·³ä¸€èˆ¬åªéœ€ç«¯åˆ°æœï¼Œè¿™æ ·ç«¯æ£€æµ‹è¶…æ—¶å¯ä»¥å‘èµ·é‡è¿ã€‚","like_count":1},{"had_liked":false,"id":184841,"user_name":"Geek_a2849d","can_delete":false,"product_type":"c1","uid":1183791,"ip_address":"","ucode":"B2EE30752C836E","user_header":"https://static001.geekbang.org/account/avatar/00/12/10/2f/cdd0b5d1.jpg","comment_is_top":false,"comment_ctime":1583416851,"is_pvip":false,"replies":[{"id":"72293","content":"è¿™ä¸ªæœ€å¥½åŒç«¯æŠ“åŒ…æ¥åˆ†æä¸€ä¸‹ï¼Œçœ‹ä¸‹æœ€ç»ˆçš„æ–­çº¿æ˜¯å“ªä¸€è¾¹ä¸»åŠ¨å‘èµ·çš„ï¼Œæ¯”å¦‚å®‰å“æ¯å±æˆ–è€…åˆ‡åå°ä¹‹ç±»çš„æ˜¯å¦æœ‰æ–­è¿çš„æ“ä½œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1584085695,"ip_address":"","comment_id":184841,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5878384147","product_id":100034901,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œå¸Œæœ›æ‚¨èƒ½å¸®æˆ‘è§£ç­”ä¸‹ï¼Œå…¬å¸å¼€å‘çš„ç§»åŠ¨ç«¯IMï¼ŒæœåŠ¡ç«¯è®¾ç½®å¿ƒè·³è¶…æ—¶æ—¶é—´120ç§’ï¼Œå®¢æˆ·ç«¯30ç§’å‘é€å¿ƒè·³åŒ…ï¼Œä½†æ˜¯å®‰å“ç«¯è¿˜æ˜¯ä¼šé¢‘ç¹æ‰çº¿ï¼Œæœ‰çš„æ—¶å€™åœç•™åœ¨appèŠå¤©é¡µé¢ä¹Ÿä¼šæ–­çº¿ï¼Œè¯·é—®ä¸‹è¿™ä¸ªæ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486143,"discussion_content":"è¿™ä¸ªæœ€å¥½åŒç«¯æŠ“åŒ…æ¥åˆ†æä¸€ä¸‹ï¼Œçœ‹ä¸‹æœ€ç»ˆçš„æ–­çº¿æ˜¯å“ªä¸€è¾¹ä¸»åŠ¨å‘èµ·çš„ï¼Œæ¯”å¦‚å®‰å“æ¯å±æˆ–è€…åˆ‡åå°ä¹‹ç±»çš„æ˜¯å¦æœ‰æ–­è¿çš„æ“ä½œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584085695,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":146434,"user_name":"wuhaka","can_delete":false,"product_type":"c1","uid":1717134,"ip_address":"","ucode":"7628FE50C69F4C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKRn8Mcfib1laX6wddDlKRaSH8BjJESVNt1RD6iay3icbcyCcZib214Q93A8vZI9zarcuBianLUe06bwoQ/132","comment_is_top":false,"comment_ctime":1572521928,"is_pvip":false,"replies":[{"id":"57185","content":"æ˜¯ä¸ªå¥½æƒ³æ³•ï¼Œä¸è¿‡QUICä¹‹æ‰€ä»¥èƒ½å¤Ÿå®ç°æŠ½è±¡çš„connection idåº”è¯¥ä¹Ÿæ˜¯å¾—ç›Šäºåº•å±‚ä¾èµ–çš„UDPæ˜¯æ— çŠ¶æ€ä¼ è¾“åè®®ï¼ŒåŸºäºTCPä¹‹ä¸Šè¦è§£å†³è¿æ¥è¿ç§»çš„é—®é¢˜ä¼°è®¡ä¼šå¾ˆéš¾ã€‚è¦æ˜¯ä½ æœ‰ä¸€äº›æ€è·¯å’±ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1573030483,"ip_address":"","comment_id":146434,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5867489224","product_id":100034901,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæ‚¨è¿™èŠ‚åªè®²äº†tcpçš„å¿ƒè·³æœºåˆ¶ï¼Œæˆ‘è§‰å¾—å¯ä»¥é‡‡ç”¨ç±»ä¼¼QUICåè®®ï¼Œè‡ªå®šä¹‰connection idåˆ¤æ–­é€»è¾‘è¿æ¥çŠ¶æ€ï¼Œæ— éœ€é€šè¿‡é€šä¿¡äº”å…ƒç»„æ¥åˆ¤æ–­æ˜¯å¦ä¸ºåŒä¸€è¿æ¥ï¼Œè¿™æ ·å¯ä»¥é¿å…å„ç§NATè®¾å¤‡ï¼Œæˆ–nginxä»£ç†ç­‰å‡ºç°çš„æ˜ å°„å¤±æ•ˆé—®é¢˜ï¼Œåœ¨å¤æ‚ç½‘ç»œç¯å¢ƒä¸­ä¸ç”¨åœ¨é¢‘ç¹æ–­çº¿é‡è¿èŠ‚çœå¼€é”€","like_count":1,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472858,"discussion_content":"æ˜¯ä¸ªå¥½æƒ³æ³•ï¼Œä¸è¿‡QUICä¹‹æ‰€ä»¥èƒ½å¤Ÿå®ç°æŠ½è±¡çš„connection idåº”è¯¥ä¹Ÿæ˜¯å¾—ç›Šäºåº•å±‚ä¾èµ–çš„UDPæ˜¯æ— çŠ¶æ€ä¼ è¾“åè®®ï¼ŒåŸºäºTCPä¹‹ä¸Šè¦è§£å†³è¿æ¥è¿ç§»çš„é—®é¢˜ä¼°è®¡ä¼šå¾ˆéš¾ã€‚è¦æ˜¯ä½ æœ‰ä¸€äº›æ€è·¯å’±ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573030483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144179,"user_name":"Csquare","can_delete":false,"product_type":"c1","uid":1137203,"ip_address":"","ucode":"23CAC353A82D1D","user_header":"https://static001.geekbang.org/account/avatar/00/11/5a/33/9a66d0b8.jpg","comment_is_top":false,"comment_ctime":1571876171,"is_pvip":false,"replies":[{"id":"55748","content":"åœ¨çº¿çŠ¶æ€å¯ä»¥åœ¨ç”¨æˆ·å®Œæˆä¸Šçº¿æ“ä½œåè®°å½•åˆ°uidç»´åº¦çš„å­˜å‚¨é‡Œä¾›ä½¿ç”¨ã€‚ä¿æ´»æœºåˆ¶ä¸ä¸€å®šèƒ½ä¿è¯ç”¨æˆ·ä¸€ç›´åœ¨çº¿ï¼Œåªæ˜¯èƒ½é™ä½è¿è¥å•†NATè¶…æ—¶å¯¼è‡´è¿æ¥è¢«å¼ºåˆ¶ä¸­æ–­çš„æ¦‚ç‡ï¼ŒåŒæ—¶é€šè¿‡å¿ƒè·³ä¿æ´»è¿˜èƒ½åŠæ—¶å‘ç°è¿æ¥æ˜¯å¦å¯ç”¨ï¼Œä»è€Œå¿«é€Ÿè¿›è¡Œé‡è¿ï¼Œæ¥æå‡è¿æ¥çš„å¯ç”¨æ€§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1571986694,"ip_address":"","comment_id":144179,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5866843467","product_id":100034901,"comment_content":"å¦‚æœç”¨äº†é•¿è¿æ¥ï¼Œæ€ä¹ˆæ”¯æŒæ˜¾ç¤ºç”¨æˆ·åœ¨çº¿çŠ¶æ€çš„åŠŸèƒ½äº†ï¼Œä¿æ´»æœºåˆ¶ä¼šè®©ç”¨æˆ·ä¸€ç›´åœ¨çº¿å§ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471838,"discussion_content":"åœ¨çº¿çŠ¶æ€å¯ä»¥åœ¨ç”¨æˆ·å®Œæˆä¸Šçº¿æ“ä½œåè®°å½•åˆ°uidç»´åº¦çš„å­˜å‚¨é‡Œä¾›ä½¿ç”¨ã€‚ä¿æ´»æœºåˆ¶ä¸ä¸€å®šèƒ½ä¿è¯ç”¨æˆ·ä¸€ç›´åœ¨çº¿ï¼Œåªæ˜¯èƒ½é™ä½è¿è¥å•†NATè¶…æ—¶å¯¼è‡´è¿æ¥è¢«å¼ºåˆ¶ä¸­æ–­çš„æ¦‚ç‡ï¼ŒåŒæ—¶é€šè¿‡å¿ƒè·³ä¿æ´»è¿˜èƒ½åŠæ—¶å‘ç°è¿æ¥æ˜¯å¦å¯ç”¨ï¼Œä»è€Œå¿«é€Ÿè¿›è¡Œé‡è¿ï¼Œæ¥æå‡è¿æ¥çš„å¯ç”¨æ€§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571986694,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133317,"user_name":"Geek_e986e3","can_delete":false,"product_type":"c1","uid":1642716,"ip_address":"","ucode":"EF53D2DEA59A8F","user_header":"","comment_is_top":false,"comment_ctime":1568514291,"is_pvip":false,"replies":[{"id":"51301","content":"ä¸€èˆ¬å¯ä»¥é‡‡ç”¨äºŒåˆ†æ³•æ¥è¿›è¡Œå¿ƒè·³æ¢æµ‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1568628680,"ip_address":"","comment_id":133317,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5863481587","product_id":100034901,"comment_content":"æ™ºèƒ½å¿ƒè·³çš„ç®—æ³•æ˜¯å’‹æ ·çš„","like_count":1,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467345,"discussion_content":"ä¸€èˆ¬å¯ä»¥é‡‡ç”¨äºŒåˆ†æ³•æ¥è¿›è¡Œå¿ƒè·³æ¢æµ‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568628680,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":334330,"user_name":"pdf","can_delete":false,"product_type":"c1","uid":1649662,"ip_address":"","ucode":"A44250955878BB","user_header":"https://static001.geekbang.org/account/avatar/00/19/2b/fe/7925eb7e.jpg","comment_is_top":false,"comment_ctime":1644889746,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1644889746","product_id":100034901,"comment_content":"è€å¸ˆï¼Œå„ä½åŒå­¦<br>å¦‚æœæœåŠ¡ç«¯æ£€æµ‹å¿ƒè·³è¶…æ—¶ä¹‹å‰ï¼Œé“¾æ¥å¤„äºå‡æ­»çŠ¶æ€ï¼ŒæœåŠ¡ç«¯è®¤ä¸ºè¯¥é“¾æ¥å¯ç”¨ï¼Œå‘é€pushæ¶ˆæ¯ï¼Œæ­¤æ—¶å†™tcp bufferæ˜¯ä¼šæˆåŠŸè¿˜æ˜¯å¤±è´¥å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":302891,"user_name":"æå®¢â€”æœˆ","can_delete":false,"product_type":"c1","uid":1318468,"ip_address":"","ucode":"EE12EEBF242B1D","user_header":"","comment_is_top":false,"comment_ctime":1626424442,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1626424442","product_id":100034901,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªç–‘é—®æœ›è§£ç­”ä¸‹ï¼Œå¤§é‡ç”¨æˆ·åœ¨å¿ƒè·³æ£€æµ‹ä¸‹çº¿åï¼ŒæœåŠ¡ç«¯åº”è¯¥é‡‡ç”¨æ€æ ·çš„æ–¹å¼æ¸…ç†ç”¨æˆ·å¥½å‘¢ï¼Ÿ(æˆ‘ä»¬ä½¿ç”¨LRUæ¸…ç†ï¼Œä½†æ˜¯Goä¸­Listæ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥åªèƒ½å•çº¿ç¨‹æ¸…ç†ï¼Œå¤§é‡ç”¨æˆ·ä¸‹çº¿æ—¶ï¼Œå¾€å¾€æ¸…ç†ä¸è¿‡æ¥)","like_count":0},{"had_liked":false,"id":219257,"user_name":"å€”å¼ºå°å¾·æ™®","can_delete":false,"product_type":"c1","uid":1180884,"ip_address":"","ucode":"4795B744BDDBDD","user_header":"https://static001.geekbang.org/account/avatar/00/12/04/d4/7173785e.jpg","comment_is_top":false,"comment_ctime":1589977799,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589977799","product_id":100034901,"comment_content":"å®¢æˆ·ç«¯æ˜¯å‘é€å¿ƒè·³åŒ…æ£€æµ‹ é•¿é“¾çŠ¶æ€çš„ã€‚æœåŠ¡ç«¯ä¸€èˆ¬é€šè¿‡ä»€ä¹ˆæœºåˆ¶ï¼Œæ¥è¯†åˆ«é•¿é“¾æ˜¯å¦å¥åº·ã€‚æ ¹æ®æœ€åä¸€æ¬¡æ¶ˆæ¯çš„æ—¶é—´å— ","like_count":0},{"had_liked":false,"id":207606,"user_name":"linâ€†yu","can_delete":false,"product_type":"c1","uid":1126028,"ip_address":"","ucode":"3F2E0AF47750FE","user_header":"https://static001.geekbang.org/account/avatar/00/11/2e/8c/75936ae2.jpg","comment_is_top":false,"comment_ctime":1587117201,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1587117201","product_id":100034901,"comment_content":"çœ‹ç€æ˜¯å¾ˆæ˜ç™½äº†ï¼Œä½†æ˜¯å†™ä¸å‡ºæ¥ï¼Œåº”ç”¨å±‚å¿ƒè·³æ€ä¹ˆé€šè¿‡å…·ä½“ä»£ç å®ç°","like_count":0,"discussions":[{"author":{"id":1763335,"avatar":"","nickname":"Geek_373e87","note":"","ucode":"9DBAD30E4ED24A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":276846,"discussion_content":"nettyå¯ä»¥ç”¨idelstatehandler\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590940661,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":204764,"user_name":"tm1234","can_delete":false,"product_type":"c1","uid":1947612,"ip_address":"","ucode":"4042321C713186","user_header":"","comment_is_top":false,"comment_ctime":1586452093,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586452093","product_id":100034901,"comment_content":"è¯·é—®è€å¸ˆ å¦‚æœIMéœ€è¦æ˜¾ç¤ºç”¨æˆ·åœ¨çº¿&#47;idle&#47;è·¯çº¿ çŠ¶æ€ï¼Œåœ¨keep aliveçš„æƒ…å†µä¸‹ï¼ŒæœåŠ¡ç«¯æ˜¯æ€ä¹ˆå‘ç°ç”¨æˆ·ç¦»çº¿äº†å‘¢ï¼Ÿç”¨æˆ·åœ¨çº¿æ˜¯å¯ä»¥é€šè¿‡ç”¨æˆ·ä¸Šçº¿æ—¶æ³¨å†Œå‘ç°ï¼Œä½†æ˜¯ç”±äºä¸€ç›´keep aliveï¼Œæ˜¯ä¸æ˜¯å°±æ²¡æ³•æ£€æµ‹åˆ°ç”¨æˆ·å®é™…å·²ç»ä¸‹çº¿äº†å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":182082,"user_name":"ä¸€ä¸ªå·¥åŒ ","can_delete":false,"product_type":"c1","uid":1038449,"ip_address":"","ucode":"2168BA6F926074","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d8/71/d6f79534.jpg","comment_is_top":false,"comment_ctime":1582705353,"is_pvip":true,"replies":[{"id":"72290","content":"å¿ƒè·³ä¸»è¦è§£å†³çš„å°±æ˜¯æœºå™¨æ–­ç”µã€ç½‘çº¿æ‹”å‡ºã€é˜²ç«å¢™è¿™äº›å¯¼è‡´çš„æ–­çº¿æƒ…å†µã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1584085200,"ip_address":"","comment_id":182082,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1582705353","product_id":100034901,"comment_content":"é˜²ç«å¢™ä¹Ÿæ˜¯å¿ƒè·³è®¾è®¡ä¸­éœ€è¦è€ƒè™‘çš„ä¸€ä¸ªé‡è¦å› ç´ ã€‚","like_count":0,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485219,"discussion_content":"å¿ƒè·³ä¸»è¦è§£å†³çš„å°±æ˜¯æœºå™¨æ–­ç”µã€ç½‘çº¿æ‹”å‡ºã€é˜²ç«å¢™è¿™äº›å¯¼è‡´çš„æ–­çº¿æƒ…å†µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584085200,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180339,"user_name":"å°”å†¬æ©™","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1582259997,"is_pvip":false,"replies":[{"id":"72288","content":"æ¯”å¦‚ä½ å®¶é‡Œä¸Šç½‘çš„è·¯ç”±å™¨ç½‘ç»œæ•…éšœä¹‹ç±»çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1584084584,"ip_address":"","comment_id":180339,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1582259997","product_id":100034901,"comment_content":"ä¸­é—´é“¾è·¯å‡ºé—®é¢˜ä¼šå¯¼è‡´æœåŠ¡ç«¯å®¢æˆ·ç«¯é“¾æ¥å‡æ­»ï¼Œé‚£è€å¸ˆä¸­é—´é“¾è·¯å‡ºé—®é¢˜ä¸€èˆ¬æ˜¯ä»€ä¹ˆæƒ…å†µï¼Œæ¯”å¦‚æ–­ç½‘æ˜¯å§","like_count":0,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484616,"discussion_content":"æ¯”å¦‚ä½ å®¶é‡Œä¸Šç½‘çš„è·¯ç”±å™¨ç½‘ç»œæ•…éšœä¹‹ç±»çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584084584,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133588,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1568615655,"is_pvip":false,"replies":[{"id":"51306","content":"ç»“åˆä½¿ç”¨æ˜¯æ²¡é—®é¢˜çš„ï¼Œtcp keepaliveå’Œåº”ç”¨å±‚å¿ƒè·³é…åˆä½¿ç”¨ï¼Œå½“å‡ºç°æ¶ˆæ¯æ”¶å‘é—®é¢˜çš„æ—¶å€™ï¼Œèƒ½å¤ŸååŠ©æˆ‘ä»¬å‘ç°æ˜¯ç½‘ç»œå±‚é—®é¢˜è¿˜æ˜¯åº”ç”¨å±‚é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1568629251,"ip_address":"","comment_id":133588,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568615655","product_id":100034901,"comment_content":"         æˆ‘è§‰å¾—å¯ä»¥ï¼šæ¯•ç«Ÿä¸æ˜¯å®Œå…¨åŸºäºåŒä¸€å±‚ï¼›TCP Keepaliveæ˜¯åŸºäºä¼ è¾“å±‚ï¼Œåº”ç”¨å±‚å¿ƒè·³æ˜¯åŸºäºåº”ç”¨å±‚çš„ï¼Œå…³é”®åœ¨äºå¦‚ä½•åˆç†ç»„åˆä½¿ç”¨ï¼Œä¸­é—´å¦‚ä½•å»å¤„ç†ã€‚<br>       æ˜¨å¤©æŸä¸ªå®Œè¯¾çš„è¯¾ç¨‹è€å¸ˆå‘Šè¯‰æˆ‘ä¸€å®šè¦æ³¨æ„çŸ¥è¯†çš„å…³è”æ€§ï¼šè¿™é—¨è¯¾ç¨‹çœ‹äº†ä¸€éå…¶å®æ˜¯åå‘å†æ¥çœ‹çš„-è§‰å¾—è‡ªå·±å½“æ—¶æ²¡æ³¨æ„ä¸€äº›çŸ¥è¯†ï¼Œæ ¹æ®ä¸ƒå±‚ç½‘ç»œåè®®å„å±‚åˆ†åˆ«ç›¸äº’äº¤ä»˜è€Œè¨€æˆ‘è®¤ä¸ºæ˜¯å¯ä»¥çš„ï¼›å…¶å®å…³é”®é—®é¢˜å°±åœ¨äºTCP Keepaliveçš„éƒ¨åˆ†äº‹æƒ…å¦‚ä½•å’Œåº”ç”¨å±‚å¿ƒè·³åˆç†ç»“åˆ-è¿™æ‰æ˜¯é—®é¢˜å¤„ç†çš„éš¾ç‚¹ã€‚<br>      è¿™ä¸ªå°±åƒæ—©æœŸæˆ‘ä»¬åšè½¯ä»¶ç›´æ¥CSæˆ–BSæ¶æ„ï¼šç°åœ¨æ•°æ®ç³»ç»Ÿå±‚å¾€å¾€ä¼šå¤šä¸€ä¸ªNo sql DBï¼Œç”¨çš„åˆç†æ˜¯èƒ½è§£å†³å¾ˆå¤šé—®é¢˜-å…³é”®éš¾ç‚¹å°±åœ¨å¦‚ä½•åˆç†ä½¿ç”¨ï¼›è¿™æ˜¯æˆ‘çš„ä¸ªäººç†è§£ã€‚ä»»ä½•æ¶æ„åšä¸å¥½å®Œç¾ï¼Œä¸è¿‡ä½¿ç”¨åˆç†å¯ä»¥å¢å¼ºæ•ˆæœ&#47;æ­£ç¡®ç‡ã€‚<br>","like_count":0,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467437,"discussion_content":"ç»“åˆä½¿ç”¨æ˜¯æ²¡é—®é¢˜çš„ï¼Œtcp keepaliveå’Œåº”ç”¨å±‚å¿ƒè·³é…åˆä½¿ç”¨ï¼Œå½“å‡ºç°æ¶ˆæ¯æ”¶å‘é—®é¢˜çš„æ—¶å€™ï¼Œèƒ½å¤ŸååŠ©æˆ‘ä»¬å‘ç°æ˜¯ç½‘ç»œå±‚é—®é¢˜è¿˜æ˜¯åº”ç”¨å±‚é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568629251,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133117,"user_name":"lorancechen","can_delete":false,"product_type":"c1","uid":1114303,"ip_address":"","ucode":"2A16CFA4726AE7","user_header":"https://static001.geekbang.org/account/avatar/00/11/00/bf/a44cde46.jpg","comment_is_top":false,"comment_ctime":1568365862,"is_pvip":false,"replies":[{"id":"51294","content":"æ˜¯æŒ‡å®¢æˆ·ç«¯å‘é€å¿ƒè·³åŒ…çš„é—´éš”ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1568624012,"ip_address":"","comment_id":133117,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568365862","product_id":100034901,"comment_content":"æ–‡ç« ä¸­æŒ‡å‡ºçš„å¿ƒè·³ç›‘æµ‹çš„æ—¶é—´é—´éš”æ˜¯å‘é€","like_count":0,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467257,"discussion_content":"æ˜¯æŒ‡å®¢æˆ·ç«¯å‘é€å¿ƒè·³åŒ…çš„é—´éš”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568624012,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133065,"user_name":"å«æ±Ÿ","can_delete":false,"product_type":"c1","uid":1101226,"ip_address":"","ucode":"DE2F7A6916F1A9","user_header":"https://static001.geekbang.org/account/avatar/00/10/cd/aa/33d48789.jpg","comment_is_top":false,"comment_ctime":1568343961,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568343961","product_id":100034901,"comment_content":"é—®é¢˜ï¼šå¿ƒè·³æœºåˆ¶æ˜¯ä¸æ˜¯å¯ä»¥ç»“åˆtcpçš„keepaliveå’Œåº”ç”¨å±‚çš„å¿ƒè·³åè®®ï¼Ÿå½“ç„¶å¯ä»¥ï¼Œä¸è¿‡åªä½¿ç”¨åº”ç”¨å±‚çš„å¿ƒè·³åè®®å°±å¯ä»¥äº†ï¼Œå› ä¸ºä¸€æ—¦åº”ç”¨å±‚çš„å¿ƒè·³å‡ºç°é—®é¢˜æ„å‘³ç€è¿æ¥å‡ºé—®é¢˜æˆ–æœåŠ¡å¤„ç†ä¸è¿‡æ¥ï¼Œä¸è®ºä»€ä¹ˆé—®é¢˜ï¼Œå®ƒæ›´èƒ½ååº”åº”ç”¨çœŸå®çš„æ•´ä½“æƒ…å†µï¼Œæ¯”å¦‚è´Ÿè½½å‡è¡¡ä¸åç«¯æœåŠ¡å™¨ä¹‹é—´çš„åº”ç”¨å¿ƒè·³å°±èƒ½æ›´å®¢è§‚çš„ååº”åº”ç”¨æƒ…å†µè€Œä¾¿äºè¿›ä¸€æ­¥å¤„ç†ï¼Œæ¯”å¦‚æ‘˜é™¤è¿™ä¸ªåç«¯æœåŠ¡å™¨å¹¶æŠ¥è­¦ï¼Œè€Œå¦‚æœåªæ˜¯ä½¿ç”¨tcpçš„keepaliveçš„ååº”çš„é—®é¢˜å°±æ¯”è¾ƒç‰‡é¢ï¼Œåªæ˜¯é’ˆå¯¹äºç½‘ç»œçš„ï¼Œè€Œä¸èƒ½ååº”åº”ç”¨æ•´ä½“çš„æƒ…å†µï¼Œè€Œå¦‚æœåº”ç”¨æ•´ä½“å‡ºé—®é¢˜ï¼Œè¿æ¥æ²¡æœ‰é—®é¢˜ä¹Ÿæ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ã€‚ä¸è¿‡ä»å®ç°è§’åº¦æ¥è¯´ï¼Œtcpçš„keepaliveå’Œä½¿ç”¨tcpçš„åº”ç”¨å¿ƒè·³ä¸€èµ·ä½¿ç”¨å¹¶ä¸ä¼šå¢åŠ åº”ç”¨å¤„ç†ç½‘ç»œäº‹ä»¶çš„å¤æ‚åº¦ï¼Œå› ä¸ºåŸºäºtcpï¼Œæˆ‘ä»¬éƒ½æ˜¯é€šè¿‡readå’Œwriteæ¥è·å–è¿æ¥çŠ¶æ€çš„ï¼Œæ‰€ä»¥ä¸€èµ·å¼€å¯ä¹Ÿæ— æ‰€è°“ã€‚","like_count":0},{"had_liked":false,"id":133029,"user_name":"é’¢","can_delete":false,"product_type":"c1","uid":1106184,"ip_address":"","ucode":"A49848BF63A579","user_header":"https://static001.geekbang.org/account/avatar/00/10/e1/08/3dc76043.jpg","comment_is_top":false,"comment_ctime":1568328970,"is_pvip":false,"replies":[{"id":"51289","content":"å¿ƒè·³åŒ…çš„è®¾è®¡è²Œä¼¼æ²¡æœ‰å›ºå®šçš„è®¾è®¡è§„èŒƒï¼Œç›®çš„å°±æ˜¯å°½é‡ç²¾ç®€ï¼Œæ¯”å¦‚åªåŒ…æ‹¬é€šç”¨Headerçš„ç©ºåŒ…ï¼Œæˆ–è€…bodyå†…å®¹æ˜¯å½“å‰å¿ƒè·³é—´éš”ï¼ˆæ™ºèƒ½å¿ƒè·³å¯èƒ½éœ€è¦ç”¨åˆ°ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1568623213,"ip_address":"","comment_id":133029,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568328970","product_id":100034901,"comment_content":"è€å¸ˆï¼Œæœ‰æ²¡æœ‰åº”ç”¨å±‚å¿ƒè·³åŒ…çš„è®¾è®¡è§„èŒƒåŠè¦æ±‚çš„æ–‡ç« æ¨èçš„","like_count":0,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467225,"discussion_content":"å¿ƒè·³åŒ…çš„è®¾è®¡è²Œä¼¼æ²¡æœ‰å›ºå®šçš„è®¾è®¡è§„èŒƒï¼Œç›®çš„å°±æ˜¯å°½é‡ç²¾ç®€ï¼Œæ¯”å¦‚åªåŒ…æ‹¬é€šç”¨Headerçš„ç©ºåŒ…ï¼Œæˆ–è€…bodyå†…å®¹æ˜¯å½“å‰å¿ƒè·³é—´éš”ï¼ˆæ™ºèƒ½å¿ƒè·³å¯èƒ½éœ€è¦ç”¨åˆ°ï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568623213,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}