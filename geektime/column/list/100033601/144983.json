{"id":144983,"title":"27 | 渐进式网页应用（PWA）：它究竟解决了Web应用的哪些问题？","content":"<p>在专栏<a href=\"https://time.geekbang.org/column/article/113399\">开篇词</a>中，我们提到过浏览器的三大进化路线：</p><ul>\n<li>第一个是应用程序Web化；</li>\n<li>第二个是Web应用移动化；</li>\n<li>第三个是Web操作系统化；</li>\n</ul><p>其中，第二个Web应用移动化是Google梦寐以求而又一直在发力的一件事，不过对于移动设备来说，前有本地App，后有移动小程序，想要浏览器切入到移动端是相当困难的一件事，因为浏览器的运行性能是低于本地App的，并且Google也没有类似微信或者Facebook这种体量的用户群体。</p><p>但是要让浏览器切入到移动端，让其取得和原生应用同等待遇可是Google的梦想，那该怎么做呢？</p><p>这就是我们本节要聊的PWA。那什么是PWA？PWA又是以什么方式切入到移动端的呢？</p><p>PWA，全称是Progressive Web App，翻译过来就是渐进式网页应用。根据字面意思，它就是“渐进式+Web应用”。对于Web应用很好理解了，就是目前我们普通的Web页面，所以PWA所支持的首先是一个Web页面。至于“渐进式”，就需要从下面两个方面来理解。</p><ul>\n<li>站在Web应用开发者来说，PWA提供了一个渐进式的过渡方案，让Web应用能逐步具有本地应用的能力。采取渐进式可以降低站点改造的代价，使得站点逐步支持各项新技术，而不是一步到位。</li>\n<li>站在技术角度来说，PWA技术也是一个渐进式的演化过程，在技术层面会一点点演进，比如逐渐提供更好的设备特性支持，不断优化更加流畅的动画效果，不断让页面的加载速度变得更快，不断实现本地应用的特性。</li>\n</ul><!-- [[[read_end]]] --><p>从这两点可以看出来，PWA采取的是非常一个缓和的渐进式策略，不再像以前那样激进，动不动就是取代本地App、取代小程序。与之相反，而是要充分发挥Web的优势，渐进式地缩短和本地应用或者小程序的距离。</p><p>那么Web最大的优势是什么呢？我认为是自由开放，也正是因为自由和开放，所以大家就很容易对同一件事情达成共识，达成共识之后，一套代码就可以运行在各种设备之上了，这就是跨平台，这也恰恰是本地应用所不具备的。而对于小程序，倒是可以实现跨平台，但要让各家达成共识，目前来看，似乎还是非常不切实际的。</p><p>所以我给PWA的定义就是：<strong>它是一套理念，渐进式增强Web的优势，并通过技术手段渐进式缩短和本地应用或者小程序的距离</strong>。基于这套理念之下的技术都可以归类到PWA。</p><p>那今天我们就主要来聊聊PWA主要采用了哪些技术手段来缩短它和本地应用或者小程序的距离。</p><h2>Web应用  VS  本地应用</h2><p>那相对于本地应用，Web页面到底缺少了什么？</p><ul>\n<li>首先，Web应用缺少离线使用能力，在离线或者在弱网环境下基本上是无法使用的。而用户需要的是沉浸式的体验，在离线或者弱网环境下能够流畅地使用是用户对一个应用的基本要求。</li>\n<li>其次，Web应用还缺少了消息推送的能力，因为作为一个App厂商，需要有将消息送达到应用的能力。</li>\n<li>最后，Web应用缺少一级入口，也就是将Web应用安装到桌面，在需要的时候直接从桌面打开Web应用，而不是每次都需要通过浏览器来打开。</li>\n</ul><p><strong>针对以上Web缺陷，PWA提出了两种解决方案：通过引入Service Worker来试着解决离线存储和消息推送的问题，通过引入manifest.json来解决一级入口的问题</strong>。下面我们就来详细分析下Service Worker是如何工作的。</p><h2>什么是Service Worker</h2><p>我们先来看看 Service Worker是怎么解决离线存储和消息推送的问题。</p><p>其实在Service Worker之前，WHATWG小组就推出过用App Cache标准来缓存页面，不过在使用过程中App Cache所暴露的问题比较多，遭到多方吐槽，所以这个标准最终也只能被废弃了，可见一个成功的标准是需要经历实践考量的。</p><p>所以在2014年的时候，标准委员会就提出了Service Worker的概念，它的主要思想是<strong>在页面和网络之间增加一个拦截器，用来缓存和拦截请求</strong>。整体结构如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/23/12/23b97b087c346cdd378b26b2d158e812.png?wh=1142*420\" alt=\"\"></p><center><span class=\"reference\">Service Worker结构示意图</span></center><p>在没有安装Service Worker之前，WebApp都是直接通过网络模块来请求资源的。安装了Service Worker模块之后，WebApp请求资源时，会先通过Service Worker，让它判断是返回Service Worker 缓存的资源还是重新去网络请求资源。一切的控制权都交由Service Worker来处理。</p><h2>Service Worker的设计思路</h2><p>现在我们知道Service Worker的主要功能就是拦截请求和缓存资源，接下来我们就从Web应用的需求角度来看看Service Worker的设计思路。</p><h3>1. 架构</h3><p>通过前面<strong>页面循环系统</strong>的分析，我们已经知道了JavaScript和页面渲染流水线的任务都是在页面主线程上执行的，如果一段JavaScript执行时间过久，那么就会阻塞主线程，使得渲染一帧的时间变长，从而让用户产生卡顿的感觉，这对用户来说体验是非常不好的。</p><p>为了避免JavaScript过多占用页面主线程时长的情况，浏览器实现了Web Worker的功能。Web Worker的目的是让JavaScript能够运行在页面主线程之外，不过由于Web Worker中是没有当前页面的DOM环境的，所以在Web Worker中只能执行一些和DOM无关的JavaScript脚本，并通过postMessage方法将执行的结果返回给主线程。所以说在Chrome中， Web Worker其实就是在渲染进程中开启的一个新线程，它的生命周期是和页面关联的。</p><p><strong>“让其运行在主线程之外”就是Service Worker来自Web Worker的一个核心思想</strong>。不过Web Worker是临时的，每次JavaScript脚本执行完成之后都会退出，执行结果也不能保存下来，如果下次还有同样的操作，就还得重新来一遍。所以Service Worker需要在Web Worker的基础之上加上储存功能。</p><p>另外，由于Service Worker还需要会为多个页面提供服务，所以还<strong>不能把Service Worker和单个页面绑定起来</strong>。在目前的Chrome架构中，Service Worker是运行在浏览器进程中的，因为浏览器进程生命周期是最长的，所以在浏览器的生命周期内，能够为所有的页面提供服务。</p><h3>2. 消息推送</h3><p><strong>消息推送也是基于Service Worker来实现的</strong>。因为消息推送时，浏览器页面也许并没有启动，这时就需要Service Worker来接收服务器推送的消息，并将消息通过一定方式展示给用户。关于消息推送的细节这里我们就不详述了，如果你感兴趣的话可以自行搜索相关资料去学习。</p><h3>3. 安全</h3><p>基于Web应用的业务越来越多了，其安全问题是不可忽视的，所以在设计Service Worker之初，安全问题就被提上了日程。</p><p>关于安全，其中最为核心的一条就是HTTP。我们知道，HTTP采用的是明文传输信息，存在被窃听、被篡改和被劫持的风险，在项目中使用HTTP来传输数据无疑是“裸奔”。所以在设计之初，就考虑对Service Worker采用HTTPS协议，因为采用HTTPS 的通信数据都是经过加密的，即便拦截了数据，也无法破解数据内容，而且HTTPS还有校验机制，通信双方很容易知道数据是否被篡改。关于HTTPS协议，我们会在最后的安全模块详细介绍。</p><p>所以要使站点支持Service Worker，首先必要的一步就是要将站点升级到HTTPS。</p><p>除了必须要使用HTTPS，Service Worker还需要同时支持Web页面默认的安全策略，诸如同源策略、内容安全策略（CSP）等，关于这些，后续我们也会详细介绍。</p><h2>总结</h2><p>好了，今天就介绍到这里，下面我来总结下本文的主要内容。</p><p>我们先分析了PWA，它是由很多技术组成的一个理念，其核心思想是<strong>渐进式</strong>。对于开发者，它提供了非常温和的方式，让开发者将普通的站点逐步过渡到Web应用。对于技术本身而言，它是渐进式演进，逐渐将Web技术发挥到极致的同时，也逐渐缩小和本地应用的差距。在此基础上，我们又分析了PWA中的Service Worker的设计思路。</p><p>另外，PWA 还提供了 manifest.json 配置文件，可以让开发者自定义桌面的图标、显示名称、启动方式等信息，还可以设置启动画面、页面主题颜色等信息。关于manifest.json的配置还是比较简单的，详细使用教程网上有很多，这里我就不做介绍了。</p><p>添加桌面标、增加离线缓存、增加消息推送等功能是PWA走向设备的必备功能，但我认为真正决定PWA能否崛起的还是底层技术，比如页面渲染效率、对系统设备的支持程度、WebAssembly等，而这些技术也在渐进式进化过程中。所以未来如何，我们拭目以待。</p><h2>思考时间</h2><p>预测未来最好的方式是理解现在，那么今天我留给你的思考题是：你觉得PWA能进入移动设备吗？</p><p>欢迎在留言区与我分享你的想法，也欢迎你在留言区记录你的思考过程。感谢阅读，如果你觉得这篇文章对你有帮助的话，也欢迎把它分享给更多的朋友。</p>","comments":[{"had_liked":false,"id":138924,"user_name":"小黑彪Geek_070fb4","can_delete":false,"product_type":"c1","uid":1623533,"ip_address":"","ucode":"49A65316DB4B5D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqfenHHNSUm2lVWfeFKMjHNcd9PjGFFZ4e2mbsgkpDmwq1oxNic3ZmaDUda517HFYWsficeReL8aA2w/132","comment_is_top":false,"comment_ctime":1570508904,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"169074233448","product_id":100033601,"comment_content":"感觉机会不大：首先这个东西需要浏览器的支持，苹果方面因该有顾虑，绕过审核直接上线；其次这个东西在国内推进也是困难重重，各大厂商定制化系统，再就是谷歌的东西太容易被墙；最后这个没有商业化的闭环，不能为开发者提供用户资源等，很难和国内BAT小程序和快应用等抗衡。 总之，前途堪忧。","like_count":40,"discussions":[{"author":{"id":1708271,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/10/ef/4c9b2383.jpg","nickname":"Everlaa","note":"","ucode":"9B4FFFABD62B07","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288560,"discussion_content":"国内的受众并不会对google技术发展路线起到什么重要影响吧","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1593788722,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1566826,"avatar":"https://static001.geekbang.org/account/avatar/00/17/e8/6a/6438c61b.jpg","nickname":"小、sen","note":"","ucode":"0FEB3465198330","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547698,"discussion_content":"这个技术要是实现了，其他ios 安卓  小程序是不是都走下破路了。谷歌岂不是一家独大？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642829436,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":138544,"user_name":"Taopoppy","can_delete":false,"product_type":"c1","uid":1586140,"ip_address":"","ucode":"C7D1BE0576AFD4","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTICu7auk7qLuLNXfgXlia9ptcqiaKMXVuUCZTKF0FHvLW0wsSe9QJrq6B6fBgPDL4HSqyaUfReJD4Kw/132","comment_is_top":false,"comment_ctime":1570327085,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"78879738413","product_id":100033601,"comment_content":"老师，后面来一门前端优化的课程，和这个课就搭上了","like_count":18,"discussions":[{"author":{"id":2757253,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/12/85/b7d82817.jpg","nickname":"🌙","note":"","ucode":"4946214519E2CD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537698,"discussion_content":"可以查看这个网站 https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639146353,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":235055,"user_name":"neohope","can_delete":false,"product_type":"c1","uid":1043475,"ip_address":"","ucode":"C0268F6E7E2B6E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/13/49e98289.jpg","comment_is_top":false,"comment_ctime":1594879877,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"53134487429","product_id":100033601,"comment_content":"如果要达到浏览器通吃的目标，除了老师文中讲的这三点（消息通知，离线存储，一级入口），浏览器还有几个问题需要解决：<br>1、硬件操作能力<br>2、系统底层调用能力<br>3、执行效率<br>4、沙箱管理能力<br>其中：<br>1硬件操作和2系统底层调用，现在一般用hybrid方式来解决，纯浏览器暂时没有好的方案<br>3执行效率，有两方面，一个是期待浏览器不断变强（比如OpenGL支持），一个是Web Assembly可以期待一下<br>4沙箱问题（网站隔离、用户隔离），现在并没有看到很好的解决方案<br><br>另外，我一直以来的另一个问题是，现在浏览器其实已经很复杂了，如果封装很多的系统功能到浏览器里面，那最终和Android&#47;IOS有什么区别呢，除了开发语言？是否会向这个方向发展呢？","like_count":12},{"had_liked":false,"id":138532,"user_name":"mfist","can_delete":false,"product_type":"c1","uid":1373624,"ip_address":"","ucode":"4F99F422C23FB4","user_header":"https://static001.geekbang.org/account/avatar/00/14/f5/b8/9f165f4b.jpg","comment_is_top":false,"comment_ctime":1570318484,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"31635089556","product_id":100033601,"comment_content":"如果PWA能够从操作系统（andriod）层面切入应该会和当前的快应用、小程序分一杯羹。技术之间是互相学习和进步的，未来技术可能会趋同，找到一个浏览器应用（pwa）、大流量应用（微信、支付宝的小程序）、手机厂商（快应用）都满意的方案","like_count":7},{"had_liked":false,"id":138456,"user_name":"William","can_delete":false,"product_type":"c1","uid":1241365,"ip_address":"","ucode":"4499F99B180102","user_header":"https://static001.geekbang.org/account/avatar/00/12/f1/15/8fcf8038.jpg","comment_is_top":false,"comment_ctime":1570257116,"is_pvip":true,"discussion_count":1,"race_medal":2,"score":"14455159004","product_id":100033601,"comment_content":"已经进入了呀，现在安卓各大应用商店很对应用都有提供快应用。免安装，无广告，用完即走","like_count":3,"discussions":[{"author":{"id":1437967,"avatar":"https://static001.geekbang.org/account/avatar/00/15/f1/0f/8b36016d.jpg","nickname":"陈十二","note":"","ucode":"09D901552ABA78","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":80764,"discussion_content":"快应用是安卓联盟搞得，和 google 的 pwa 区别很大","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576194661,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177963,"user_name":"小蛋糕","can_delete":false,"product_type":"c1","uid":1807662,"ip_address":"","ucode":"335A6F4301CF22","user_header":"https://static001.geekbang.org/account/avatar/00/1b/95/2e/f8575abb.jpg","comment_is_top":false,"comment_ctime":1581562967,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10171497559","product_id":100033601,"comment_content":"对于 PC 机来说的话：<br><br>我记得 google 有发行一个 chrome OS 的笔记本电脑，其给人的感觉就是一个电脑就是一个浏览器。<br><br>那么如果这个 chrome OS 能够得到很好的普及的话，也算是为 PWA 的发展道路铺开了一个非常不错的基础设施。<br><br>对于 chrome OS 的未来的话，我个人还是抱有一定的好感的，毕竟电信行业的发展还是很快速的，所以未来的应用网络传输可能越来越快速。<br><br>另外 WebAssembly 的发展也让人期待，未来一些相对底层的操作可以委托给 WebAssembly 来实现。<br><br>对于移动设备的话：<br><br>目前看起来并不乐观，如果 chrome OS 也能覆盖移动设备的话就另当别论了。","like_count":2},{"had_liked":false,"id":138451,"user_name":"宇宙全栈","can_delete":false,"product_type":"c1","uid":1001309,"ip_address":"","ucode":"2E984CA0ECFB85","user_header":"https://static001.geekbang.org/account/avatar/00/0f/47/5d/9afdf648.jpg","comment_is_top":false,"comment_ctime":1570249212,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10160183804","product_id":100033601,"comment_content":"我觉得 PWA 从商业角度和技术角度来看都没有足够的优势进入移动端，因为目前移动端的商业生态已经成熟，并且小程序技术和 Flutter 技术已经抢占了先机。商业上，目前的移动端生态已经成熟，iOS 会阻止 PWA 破坏它的生态，就像阻止小程序一样。Android 生态中，如果 Google 如果能把 Android 变成直接支持 PWA 的操作系统，可能会有一些帮助，但是帮助不大。技术上，微信等各大超级 App 都已经使用了小程序技术，也就是说小程序技术已经抢占了先机。另外，Flutter 技术也在进入移动端，所以 PWA 在技术上的竞争太激烈。","like_count":2},{"had_liked":false,"id":185713,"user_name":"大前端洞见","can_delete":false,"product_type":"c1","uid":1010463,"ip_address":"","ucode":"1FA227A25F6056","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6b/1f/f7be5246.jpg","comment_is_top":false,"comment_ctime":1583669358,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5878636654","product_id":100033601,"comment_content":"通过一种说法，Web应用PWA技术等未能快速发展起来，很大的一部分原因是商业利益影响的。因为PWA应用起来了，会给APP和其他应用带来打击，各厂商为了保证利益，对PWA这种技术都会实行冷漠和阻拦的方式。比如苹果公司，是最不愿意PWA能发展起来的，苹果公司也不会积极的配合这方面技术的推进。","like_count":1},{"had_liked":false,"id":143359,"user_name":"Cris","can_delete":false,"product_type":"c1","uid":1473520,"ip_address":"","ucode":"F8A287134F1078","user_header":"https://static001.geekbang.org/account/avatar/00/16/7b/f0/269139d5.jpg","comment_is_top":false,"comment_ctime":1571676231,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5866643527","product_id":100033601,"comment_content":"老师，能否透露下您看好pwa的理由？","like_count":1},{"had_liked":false,"id":139274,"user_name":"再学习","can_delete":false,"product_type":"c1","uid":1034611,"ip_address":"","ucode":"ECB17DF8D89D8D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c9/73/a0db6d58.jpg","comment_is_top":false,"comment_ctime":1570599324,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"5865566620","product_id":100033601,"comment_content":"作为新一代“浏览器”，国内有小程序，国外有PWA。<br>认为在国外PWA会发展的不错，国内因为用户对微信的依赖，可能还是小程序发展的更好。","like_count":1,"discussions":[{"author":{"id":1156074,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a3/ea/53333dd5.jpg","nickname":"HoSalt","note":"","ucode":"610B03E2A002D1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":229506,"discussion_content":"面向用户群体不一样，如果把鸡蛋都放在小程序上，太容易受制于人了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586658864,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":138431,"user_name":"柒月","can_delete":false,"product_type":"c1","uid":1371240,"ip_address":"","ucode":"839A8F88C376A3","user_header":"https://static001.geekbang.org/account/avatar/00/14/ec/68/06d59613.jpg","comment_is_top":false,"comment_ctime":1570238312,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5865205608","product_id":100033601,"comment_content":"可以的。我觉得后面整个移动设备的系统就是一个浏览器。<br>好处的话就像现在的小程序，不用下载安装，随用随走。<br>难点的话一个是用户体验，流畅性方面。另一个的话就是跟手机底层硬件的交互能力了。","like_count":1},{"had_liked":false,"id":358861,"user_name":"Chin 是我啊","can_delete":false,"product_type":"c1","uid":2444863,"ip_address":"北京","ucode":"F52E85B13C7BAC","user_header":"https://static001.geekbang.org/account/avatar/00/25/4e/3f/3e84f39e.jpg","comment_is_top":false,"comment_ctime":1664939634,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1664939634","product_id":100033601,"comment_content":"三年了，PWA 并没有进入移动设备","like_count":0},{"had_liked":false,"id":295808,"user_name":"是天才指挥官呀","can_delete":false,"product_type":"c1","uid":2440301,"ip_address":"","ucode":"5EA4B6F9A17C4D","user_header":"https://static001.geekbang.org/account/avatar/00/25/3c/6d/70b0d892.jpg","comment_is_top":false,"comment_ctime":1622604861,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622604861","product_id":100033601,"comment_content":"web应用是披着羊皮的狼","like_count":0},{"had_liked":false,"id":220621,"user_name":"sh","can_delete":false,"product_type":"c1","uid":1428920,"ip_address":"","ucode":"720991D01D50D9","user_header":"https://static001.geekbang.org/account/avatar/00/15/cd/b8/14597b01.jpg","comment_is_top":false,"comment_ctime":1590295691,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1590295691","product_id":100033601,"comment_content":"web的一大缺点是离线能力 离开网络就啥也没了","like_count":0,"discussions":[{"author":{"id":1490169,"avatar":"https://static001.geekbang.org/account/avatar/00/16/bc/f9/f4345ea6.jpg","nickname":"聆听","note":"","ucode":"D7232626C6394D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":409710,"discussion_content":"那么问题来了 哪个APP离开了网络还能活？微信还是QQ？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1635493915,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2840430,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/57/6e/0010eec8.jpg","nickname":"月光林地","note":"","ucode":"827DFEBA385367","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533876,"discussion_content":"缓存是最容易解决的一点，更大的问题是性能和操作系统底层的操作能力，还有商业化能力","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638004398,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":211855,"user_name":"Roy","can_delete":false,"product_type":"c1","uid":1930723,"ip_address":"","ucode":"909B8B605C317A","user_header":"https://static001.geekbang.org/account/avatar/00/1d/75/e3/ef489d57.jpg","comment_is_top":false,"comment_ctime":1588031955,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588031955","product_id":100033601,"comment_content":"除了要解决使用场景和本地app一样外，还需要说服开发者各大公司加入，形成生态。","like_count":0},{"had_liked":false,"id":201616,"user_name":"王晓蘅","can_delete":false,"product_type":"c1","uid":1467926,"ip_address":"","ucode":"09B6D5D8A40CAA","user_header":"https://static001.geekbang.org/account/avatar/00/16/66/16/b8e6436c.jpg","comment_is_top":false,"comment_ctime":1585812543,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585812543","product_id":100033601,"comment_content":"有一个疑问，小程序这样的技术，算不算是PWA的一种应用呢？消息提醒的部分其实通过公众号推送的，其实是分离。<br>PWA在国外的app出现的比较多，使用体验肯定是比不上原生的，但是基本功能是可以实现的，就是给对应的底层用户使用的。","like_count":0},{"had_liked":false,"id":162601,"user_name":"李艺轩","can_delete":false,"product_type":"c1","uid":1375756,"ip_address":"","ucode":"EF387413327B1D","user_header":"https://static001.geekbang.org/account/avatar/00/14/fe/0c/f9cb1af4.jpg","comment_is_top":false,"comment_ctime":1576563248,"is_pvip":true,"replies":[{"id":"61859","content":"这个算我表示不严谨，第二句的本意是让传统页面过渡到Web应用。<br><br>这里传统的web页面也就是那些没有使用web新特性的页面。","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1576574738,"ip_address":"","comment_id":162601,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1576563248","product_id":100033601,"comment_content":"前面说【web应用就是普通的web页面】，后面说【让普通站点逐步过渡到web应用】，那么普通站点和普通web页面有什么区别？","like_count":0,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478097,"discussion_content":"这个算我表示不严谨，第二句的本意是让传统页面过渡到Web应用。\n\n这里传统的web页面也就是那些没有使用web新特性的页面。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576574738,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161331,"user_name":"陈十二","can_delete":false,"product_type":"c1","uid":1437967,"ip_address":"","ucode":"09D901552ABA78","user_header":"https://static001.geekbang.org/account/avatar/00/15/f1/0f/8b36016d.jpg","comment_is_top":false,"comment_ctime":1576195019,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576195019","product_id":100033601,"comment_content":"目前不看好，可以关注下相关信息，PWA 在能力更新方面很慢，目前来看离跨平台替代部分原生应用还有很长的路要走","like_count":0},{"had_liked":false,"id":139258,"user_name":"Geek_b63d98","can_delete":false,"product_type":"c1","uid":1566301,"ip_address":"","ucode":"3DA5A15FF9A26A","user_header":"https://static001.geekbang.org/account/avatar/00/17/e6/5d/291dbf69.jpg","comment_is_top":false,"comment_ctime":1570594193,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570594193","product_id":100033601,"comment_content":"instgram twitter webpackdocumention","like_count":0}]}