{"id":121710,"title":"40 | ç­”ç–‘è¯¾å ‚ï¼šMySQLä¸­InnoDBçš„çŸ¥è¯†ç‚¹ä¸²è®²","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯åˆ˜è¶…ã€‚</p><p>æ¨¡å—å…­æœ‰å…³æ•°æ®åº“è°ƒä¼˜çš„å†…å®¹åˆ°æœ¬å‘¨ä¹Ÿæ­£å¼ç»“æŸäº†ï¼Œä»Šå¤©æˆ‘ä»¬ä¸€èµ·ä¸²ä¸‹MySQLä¸­InnoDBçš„çŸ¥è¯†ç‚¹ã€‚InnoDBå­˜å‚¨å¼•æ“ä½œä¸ºæˆ‘ä»¬æœ€å¸¸ç”¨åˆ°çš„å­˜å‚¨å¼•æ“ä¹‹ä¸€ï¼Œå……åˆ†ç†Ÿæ‚‰å®ƒçš„çš„å®ç°å’Œè¿è¡ŒåŸç†ï¼Œæœ‰åŠ©äºæˆ‘ä»¬æ›´å¥½åœ°åˆ›å»ºå’Œç»´æŠ¤æ•°æ®åº“è¡¨ã€‚</p><h2>InnoDBä½“ç³»æ¶æ„</h2><p>InnoDBä¸»è¦åŒ…æ‹¬äº†å†…å­˜æ± ã€åå°çº¿ç¨‹ä»¥åŠå­˜å‚¨æ–‡ä»¶ã€‚å†…å­˜æ± åˆæ˜¯ç”±å¤šä¸ªå†…å­˜å—ç»„æˆçš„ï¼Œä¸»è¦åŒ…æ‹¬ç¼“å­˜ç£ç›˜æ•°æ®ã€redo logç¼“å†²ç­‰ï¼›åå°çº¿ç¨‹åˆ™åŒ…æ‹¬äº†Master Threadã€IO Threadä»¥åŠPurge Threadç­‰ï¼›ç”±InnoDBå­˜å‚¨å¼•æ“å®ç°çš„è¡¨çš„å­˜å‚¨ç»“æ„æ–‡ä»¶ä¸€èˆ¬åŒ…æ‹¬è¡¨ç»“æ„æ–‡ä»¶ï¼ˆ.frmï¼‰ã€å…±äº«è¡¨ç©ºé—´æ–‡ä»¶ï¼ˆibdata1ï¼‰ã€ç‹¬å è¡¨ç©ºé—´æ–‡ä»¶ï¼ˆibdï¼‰ä»¥åŠæ—¥å¿—æ–‡ä»¶ï¼ˆredoæ–‡ä»¶ç­‰ï¼‰ç­‰ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f2/92/f26b2fad64a9a527b5ac0e8c7f4be992.jpg?wh=1768*1020\" alt=\"\"></p><h3>1. å†…å­˜æ± </h3><p>æˆ‘ä»¬çŸ¥é“ï¼Œå¦‚æœå®¢æˆ·ç«¯ä»æ•°æ®åº“ä¸­è¯»å–æ•°æ®æ˜¯ç›´æ¥ä»ç£ç›˜è¯»å–çš„è¯ï¼Œæ— ç–‘ä¼šå¸¦æ¥ä¸€å®šçš„æ€§èƒ½ç“¶é¢ˆï¼Œç¼“å†²æ± çš„ä½œç”¨å°±æ˜¯æé«˜æ•´ä¸ªæ•°æ®åº“çš„è¯»å†™æ€§èƒ½ã€‚</p><p>å®¢æˆ·ç«¯è¯»å–æ•°æ®æ—¶ï¼Œå¦‚æœæ•°æ®å­˜åœ¨äºç¼“å†²æ± ä¸­ï¼Œå®¢æˆ·ç«¯å°±ä¼šç›´æ¥è¯»å–ç¼“å†²æ± ä¸­çš„æ•°æ®ï¼Œå¦åˆ™å†å»ç£ç›˜ä¸­è¯»å–ï¼›å¯¹äºæ•°æ®åº“ä¸­çš„ä¿®æ”¹æ•°æ®ï¼Œé¦–å…ˆæ˜¯ä¿®æ”¹åœ¨ç¼“å†²æ± ä¸­çš„æ•°æ®ï¼Œç„¶åå†é€šè¿‡Master Threadçº¿ç¨‹åˆ·æ–°åˆ°ç£ç›˜ä¸Šã€‚</p><p>ç†è®ºä¸Šæ¥è¯´ï¼Œç¼“å†²æ± çš„å†…å­˜è¶Šå¤§è¶Šå¥½ã€‚æˆ‘ä»¬åœ¨<a href=\"https://time.geekbang.org/column/article/120160\">ç¬¬38è®²</a>ä¸­è¯¦ç»†è®²è¿‡äº†ç¼“å†²æ± çš„å¤§å°é…ç½®æ–¹å¼ä»¥åŠè°ƒä¼˜ã€‚</p><!-- [[[read_end]]] --><p>ç¼“å†²æ± ä¸­ä¸ä»…ç¼“å­˜ç´¢å¼•é¡µå’Œæ•°æ®é¡µï¼Œè¿˜åŒ…æ‹¬äº†undoé¡µï¼Œæ’å…¥ç¼“å­˜ã€è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•ä»¥åŠInnoDBçš„é”ä¿¡æ¯ç­‰ç­‰ã€‚</p><p>InnoDBå…è®¸å¤šä¸ªç¼“å†²æ± å®ä¾‹ï¼Œä»è€Œå‡å°‘æ•°æ®åº“å†…éƒ¨èµ„æºçš„ç«äº‰ï¼Œå¢å¼ºæ•°æ®åº“çš„å¹¶å‘å¤„ç†èƒ½åŠ›ï¼Œ<a href=\"https://time.geekbang.org/column/article/120160\">ç¬¬38è®²</a>è¿˜è®²åˆ°äº†ç¼“å†²æ± å®ä¾‹çš„é…ç½®ä»¥åŠè°ƒä¼˜ã€‚</p><p>InnoDBå­˜å‚¨å¼•æ“ä¼šå…ˆå°†é‡åšæ—¥å¿—ä¿¡æ¯æ”¾å…¥åˆ°ç¼“å†²åŒºä¸­ï¼Œç„¶åå†åˆ·æ–°åˆ°é‡åšæ—¥å¿—æ–‡ä»¶ä¸­ã€‚</p><h3>2. åå°çº¿ç¨‹</h3><p>Master Thread  ä¸»è¦è´Ÿè´£å°†ç¼“å†²æ± ä¸­çš„æ•°æ®å¼‚æ­¥åˆ·æ–°åˆ°ç£ç›˜ä¸­ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜åŒ…æ‹¬æ’å…¥ç¼“å­˜ã€undoé¡µçš„å›æ”¶ç­‰ï¼ŒIO Threadæ˜¯è´Ÿè´£è¯»å†™IOçš„çº¿ç¨‹ï¼Œè€ŒPurge Threadä¸»è¦ç”¨äºå›æ”¶äº‹åŠ¡å·²ç»æäº¤äº†çš„undo logï¼ŒPager Cleaner Threadæ˜¯æ–°å¼•å…¥çš„ä¸€ä¸ªç”¨äºååŠ©Master Threadåˆ·æ–°è„é¡µåˆ°ç£ç›˜çš„çº¿ç¨‹ï¼Œå®ƒå¯ä»¥å‡è½»Master Threadçš„å·¥ä½œå‹åŠ›ï¼Œå‡å°‘é˜»å¡ã€‚</p><h3>3. å­˜å‚¨æ–‡ä»¶</h3><p>åœ¨MySQLä¸­å»ºç«‹ä¸€å¼ è¡¨éƒ½ä¼šç”Ÿæˆä¸€ä¸ª.frmæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æ˜¯ç”¨æ¥ä¿å­˜æ¯ä¸ªè¡¨çš„å…ƒæ•°æ®ä¿¡æ¯çš„ï¼Œä¸»è¦åŒ…å«è¡¨ç»“æ„å®šä¹‰ã€‚</p><p>åœ¨InnoDBä¸­ï¼Œå­˜å‚¨æ•°æ®éƒ½æ˜¯æŒ‰è¡¨ç©ºé—´è¿›è¡Œå­˜æ”¾çš„ï¼Œé»˜è®¤ä¸ºå…±äº«è¡¨ç©ºé—´ï¼Œå­˜å‚¨çš„æ–‡ä»¶å³ä¸ºå…±äº«è¡¨ç©ºé—´æ–‡ä»¶ï¼ˆibdata1ï¼‰ã€‚è‹¥è®¾ç½®äº†å‚æ•°innodb_file_per_tableä¸º1ï¼Œåˆ™ä¼šå°†å­˜å‚¨çš„æ•°æ®ã€ç´¢å¼•ç­‰ä¿¡æ¯å•ç‹¬å­˜å‚¨åœ¨ä¸€ä¸ªç‹¬å è¡¨ç©ºé—´ï¼Œå› æ­¤ä¹Ÿä¼šäº§ç”Ÿä¸€ä¸ªç‹¬å è¡¨ç©ºé—´æ–‡ä»¶ï¼ˆibdï¼‰ã€‚å¦‚æœä½ å¯¹å…±äº«è¡¨ç©ºé—´å’Œç‹¬å è¡¨ç©ºé—´çš„ç†è§£è¿˜ä¸å¤Ÿé€å½»ï¼Œæ¥ä¸‹æ¥æˆ‘ä¼šè¯¦è§£ã€‚</p><p>è€Œæ—¥å¿—æ–‡ä»¶åˆ™ä¸»è¦æ˜¯é‡åšæ—¥å¿—æ–‡ä»¶ï¼Œä¸»è¦è®°å½•äº‹åŠ¡äº§ç”Ÿçš„é‡åšæ—¥å¿—ï¼Œä¿è¯äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚</p><h2>InnoDBé€»è¾‘å­˜å‚¨ç»“æ„</h2><p>InnoDBé€»è¾‘å­˜å‚¨ç»“æ„åˆ†ä¸ºè¡¨ç©ºé—´ï¼ˆTablespaceï¼‰ã€æ®µ(Segment)ã€åŒº(Extent)ã€é¡µPage)ä»¥åŠè¡Œ(row)ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/88/76/88b4ae3373eb5428c238b70423a13e76.jpg?wh=1290*858\" alt=\"\"></p><h3>1. è¡¨ç©ºé—´ï¼ˆTablespaceï¼‰</h3><p>InnoDBæä¾›äº†ä¸¤ç§è¡¨ç©ºé—´å­˜å‚¨æ•°æ®çš„æ–¹å¼ï¼Œä¸€ç§æ˜¯å…±äº«è¡¨ç©ºé—´ï¼Œä¸€ç§æ˜¯ç‹¬å è¡¨ç©ºé—´ã€‚ InnoDB é»˜è®¤ä¼šå°†å…¶æ‰€æœ‰çš„è¡¨æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªå…±äº«è¡¨ç©ºé—´ä¸­ï¼Œå³ibdata1ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®innodb_file_per_tableå‚æ•°ä¸º1ï¼ˆ1ä»£è¡¨ç‹¬å æ–¹å¼ï¼‰å¼€å¯ç‹¬å è¡¨ç©ºé—´æ¨¡å¼ã€‚å¼€å¯ä¹‹åï¼Œæ¯ä¸ªè¡¨éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„è¡¨ç©ºé—´ç‰©ç†æ–‡ä»¶ï¼Œæ‰€æœ‰çš„æ•°æ®ä»¥åŠç´¢å¼•éƒ½ä¼šå­˜å‚¨åœ¨è¯¥æ–‡ä»¶ä¸­ï¼Œè¿™æ ·æ–¹ä¾¿å¤‡ä»½ä»¥åŠæ¢å¤æ•°æ®ã€‚</p><h3>2. æ®µ(Segment)</h3><p>è¡¨ç©ºé—´æ˜¯ç”±å„ä¸ªæ®µç»„æˆçš„ï¼Œæ®µä¸€èˆ¬åˆ†ä¸ºæ•°æ®æ®µã€ç´¢å¼•æ®µå’Œå›æ»šæ®µç­‰ã€‚æˆ‘ä»¬çŸ¥é“ï¼ŒInnoDBé»˜è®¤æ˜¯åŸºäºB +æ ‘å®ç°çš„æ•°æ®å­˜å‚¨ã€‚</p><p>è¿™é‡Œçš„ç´¢å¼•æ®µåˆ™æ˜¯æŒ‡çš„B +æ ‘çš„éå¶å­èŠ‚ç‚¹ï¼Œè€Œæ•°æ®æ®µåˆ™æ˜¯B +æ ‘çš„å¶å­èŠ‚ç‚¹ã€‚è€Œå›æ»šæ®µåˆ™æŒ‡çš„æ˜¯å›æ»šæ•°æ®ï¼Œä¹‹å‰æˆ‘ä»¬åœ¨è®²äº‹åŠ¡éš”ç¦»çš„æ—¶å€™å°±ä»‹ç»åˆ°äº†MVCCåˆ©ç”¨äº†å›æ»šæ®µå®ç°äº†å¤šç‰ˆæœ¬æŸ¥è¯¢æ•°æ®ã€‚</p><h3>3. åŒº(Extent) / é¡µï¼ˆPageï¼‰</h3><p>åŒºæ˜¯è¡¨ç©ºé—´çš„å•å…ƒç»“æ„ï¼Œæ¯ä¸ªåŒºçš„å¤§å°ä¸º1MBã€‚è€Œé¡µæ˜¯ç»„æˆåŒºçš„æœ€å°å•å…ƒï¼Œé¡µä¹Ÿæ˜¯InnoDBå­˜å‚¨å¼•æ“ç£ç›˜ç®¡ç†çš„æœ€å°å•å…ƒï¼Œæ¯ä¸ªé¡µçš„å¤§å°é»˜è®¤ä¸º16KBã€‚ä¸ºäº†ä¿è¯é¡µçš„è¿ç»­æ€§ï¼ŒInnoDBå­˜å‚¨å¼•æ“æ¯æ¬¡ä»ç£ç›˜ç”³è¯·4-5ä¸ªåŒºã€‚</p><h3>4. è¡Œï¼ˆRowï¼‰</h3><p>InnoDBå­˜å‚¨å¼•æ“æ˜¯é¢å‘è¡Œçš„ï¼ˆrow-oriented)ï¼Œä¹Ÿå°±æ˜¯è¯´æ•°æ®æ˜¯æŒ‰è¡Œè¿›è¡Œå­˜æ”¾çš„ï¼Œæ¯ä¸ªé¡µå­˜æ”¾çš„è¡Œè®°å½•ä¹Ÿæ˜¯æœ‰ç¡¬æ€§å®šä¹‰çš„ï¼Œæœ€å¤šå…è®¸å­˜æ”¾16KB/2-200è¡Œï¼Œå³7992è¡Œè®°å½•ã€‚</p><h2>InnoDBäº‹åŠ¡ä¹‹redo logå·¥ä½œåŸç†</h2><p>InnoDBæ˜¯ä¸€ä¸ªäº‹åŠ¡æ€§çš„å­˜å‚¨å¼•æ“ï¼Œè€ŒInnoDBçš„äº‹åŠ¡å®ç°æ˜¯åŸºäºäº‹åŠ¡æ—¥å¿—redo logå’Œundo logå®ç°çš„ã€‚redo logæ˜¯é‡åšæ—¥å¿—ï¼Œæä¾›å†å†™å…¥æ“ä½œï¼Œå®ç°äº‹åŠ¡çš„æŒä¹…æ€§ï¼›undo logæ˜¯å›æ»šæ—¥å¿—ï¼Œæä¾›å›æ»šæ“ä½œï¼Œä¿è¯äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚</p><p>redo logåˆåŒ…æ‹¬äº†å†…å­˜ä¸­çš„æ—¥å¿—ç¼“å†²ï¼ˆredo log bufferï¼‰ä»¥åŠä¿å­˜åœ¨ç£ç›˜çš„é‡åšæ—¥å¿—æ–‡ä»¶ï¼ˆredo log fileï¼‰ï¼Œå‰è€…å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå®¹æ˜“ä¸¢å¤±ï¼Œåè€…æŒä¹…åŒ–åœ¨ç£ç›˜ä¸­ï¼Œä¸ä¼šä¸¢å¤±ã€‚</p><p>InnoDBçš„æ›´æ–°æ“ä½œé‡‡ç”¨çš„æ˜¯Write Ahead Logç­–ç•¥ï¼Œå³å…ˆå†™æ—¥å¿—ï¼Œå†å†™å…¥ç£ç›˜ã€‚å½“ä¸€æ¡è®°å½•æ›´æ–°æ—¶ï¼ŒInnoDBä¼šå…ˆæŠŠè®°å½•å†™å…¥åˆ°redo log bufferä¸­ï¼Œå¹¶æ›´æ–°å†…å­˜æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å‚æ•°innodb_flush_log_at_trx_commitè‡ªå®šä¹‰commitæ—¶ï¼Œå¦‚ä½•å°†redo log bufferä¸­çš„æ—¥å¿—åˆ·æ–°åˆ°redo log fileä¸­ã€‚</p><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯InnoDBçš„redo logçš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œåˆ†åˆ«æœ‰å¤šä¸ªæ—¥å¿—æ–‡ä»¶é‡‡ç”¨å¾ªç¯æ–¹å¼ç»„æˆä¸€ä¸ªå¾ªç¯é—­ç¯ï¼Œå½“å†™åˆ°ç»“å°¾æ—¶ï¼Œä¼šå›åˆ°å¼€å¤´å¾ªç¯å†™æ—¥å¿—ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å‚æ•°innodb_log_files_in_groupå’Œinnodb_log_file_sizeé…ç½®æ—¥å¿—æ–‡ä»¶æ•°é‡å’Œæ¯ä¸ªæ—¥å¿—æ–‡ä»¶çš„å¤§å°ã€‚</p><p>Buffer Poolä¸­æ›´æ–°çš„æ•°æ®æœªåˆ·æ–°åˆ°ç£ç›˜ä¸­ï¼Œè¯¥å†…å­˜é¡µæˆ‘ä»¬ç§°ä¹‹ä¸ºè„é¡µã€‚æœ€ç»ˆè„é¡µçš„æ•°æ®ä¼šåˆ·æ–°åˆ°ç£ç›˜ä¸­ï¼Œå°†ç£ç›˜ä¸­çš„æ•°æ®è¦†ç›–ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸redo logä¸ä¸€å®šæœ‰å…³ç³»ã€‚</p><p>åªæœ‰å½“redo logæ—¥å¿—æ»¡äº†çš„æƒ…å†µä¸‹ï¼Œæ‰ä¼šä¸»åŠ¨è§¦å‘è„é¡µåˆ·æ–°åˆ°ç£ç›˜ï¼Œè€Œè„é¡µä¸ä»…åªæœ‰redo logæ—¥å¿—æ»¡äº†çš„æƒ…å†µæ‰ä¼šåˆ·æ–°åˆ°ç£ç›˜ï¼Œä»¥ä¸‹å‡ ç§æƒ…å†µåŒæ ·ä¼šè§¦å‘è„é¡µçš„åˆ·æ–°ï¼š</p><ul>\n<li>ç³»ç»Ÿå†…å­˜ä¸è¶³æ—¶ï¼Œéœ€è¦å°†ä¸€éƒ¨åˆ†æ•°æ®é¡µæ·˜æ±°æ‰ï¼Œå¦‚æœæ·˜æ±°çš„æ˜¯è„é¡µï¼Œéœ€è¦å…ˆå°†è„é¡µåŒæ­¥åˆ°ç£ç›˜ï¼›</li>\n<li>MySQLè®¤ä¸ºç©ºé—²çš„æ—¶é—´ï¼Œè¿™ç§æƒ…å†µæ²¡æœ‰æ€§èƒ½é—®é¢˜ï¼›</li>\n<li>MySQLæ­£å¸¸å…³é—­ä¹‹å‰ï¼Œä¼šæŠŠæ‰€æœ‰çš„è„é¡µåˆ·å…¥åˆ°ç£ç›˜ï¼Œè¿™ç§æƒ…å†µä¹Ÿæ²¡æœ‰æ€§èƒ½é—®é¢˜ã€‚</li>\n</ul><p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¦‚æœæˆ‘ä»¬å¼€å¯äº†æ…¢SQLç›‘æ§ï¼Œä½ ä¼šå‘ç°å¶å°”ä¼šå‡ºç°ä¸€äº›ç”¨æ—¶ç¨é•¿çš„SQLã€‚è¿™æ˜¯å› ä¸ºè„é¡µåœ¨åˆ·æ–°åˆ°ç£ç›˜æ—¶å¯èƒ½ä¼šç»™æ•°æ®åº“å¸¦æ¥æ€§èƒ½å¼€é”€ï¼Œå¯¼è‡´æ•°æ®åº“æ“ä½œæŠ–åŠ¨ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/2a/fd/2a32f1dc2dfbb1f9bc169ee55174d2fd.jpg?wh=1146*1342\" alt=\"\"></p><h2>LRUæ·˜æ±°ç­–ç•¥</h2><p>ä»¥ä¸Šæˆ‘ä»¬äº†è§£äº†InnoDBçš„æ›´æ–°å’Œæ’å…¥æ“ä½œçš„å…·ä½“å®ç°åŸç†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥äº†è§£ä¸‹è¯»çš„å®ç°å’Œä¼˜åŒ–æ–¹å¼ã€‚</p><p>InnoDBå­˜å‚¨å¼•æ“æ˜¯åŸºäºé›†åˆç´¢å¼•å®ç°çš„æ•°æ®å­˜å‚¨ï¼Œä¹Ÿå°±æ˜¯é™¤äº†ç´¢å¼•åˆ—ä»¥åŠä¸»é”®æ˜¯å­˜å‚¨åœ¨B +æ ‘ä¹‹å¤–ï¼Œå…¶å®ƒåˆ—æ•°æ®ä¹Ÿå­˜å‚¨åœ¨B + æ ‘çš„å¶å­èŠ‚ç‚¹ä¸­ã€‚è€Œè¿™é‡Œçš„ç´¢å¼•é¡µå’Œæ•°æ®é¡µéƒ½ä¼šç¼“å­˜åœ¨ç¼“å†²æ± ä¸­ï¼Œåœ¨æŸ¥è¯¢æ•°æ®æ—¶ï¼Œåªè¦åœ¨ç¼“å†²æ± ä¸­å­˜åœ¨è¯¥æ•°æ®ï¼ŒInnoDBå°±ä¸ç”¨æ¯æ¬¡éƒ½å»ç£ç›˜ä¸­è¯»å–é¡µï¼Œä»è€Œæé«˜æ•°æ®åº“çš„æŸ¥è¯¢æ€§èƒ½ã€‚</p><p>è™½ç„¶ç¼“å†²æ± æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„å†…å­˜åŒºåŸŸï¼Œä½†ç”±äºå­˜æ”¾äº†å„ç§ç±»å‹çš„æ•°æ®ï¼ŒåŠ ä¸Šå­˜å‚¨æ•°æ®é‡ä¹‹å¤§ï¼Œç¼“å†²æ± æ— æ³•å°†æ‰€æœ‰çš„æ•°æ®éƒ½å­˜å‚¨åœ¨å…¶ä¸­ã€‚å› æ­¤ï¼Œç¼“å†²æ± éœ€è¦é€šè¿‡LRUç®—æ³•å°†æœ€è¿‘ä¸”ç»å¸¸æŸ¥è¯¢çš„æ•°æ®ç¼“å­˜åœ¨å…¶ä¸­ï¼Œè€Œä¸å¸¸æŸ¥è¯¢çš„æ•°æ®å°±æ·˜æ±°å‡ºå»ã€‚</p><p>InnoDBå¯¹LRUåšäº†ä¸€äº›ä¼˜åŒ–ï¼Œæˆ‘ä»¬ç†Ÿæ‚‰çš„LRUç®—æ³•é€šå¸¸æ˜¯å°†æœ€è¿‘æŸ¥è¯¢çš„æ•°æ®æ”¾åˆ°LRUåˆ—è¡¨çš„é¦–éƒ¨ï¼Œè€ŒInnoDBåˆ™æ˜¯å°†æ•°æ®æ”¾åœ¨ä¸€ä¸ªmidpointä½ç½®ï¼Œé€šå¸¸è¿™ä¸ªmidpointä¸ºåˆ—è¡¨é•¿åº¦çš„5/8ã€‚</p><p>è¿™ç§ç­–ç•¥ä¸»è¦æ˜¯ä¸ºäº†é¿å…ä¸€äº›ä¸å¸¸æŸ¥è¯¢çš„æ“ä½œçªç„¶å°†çƒ­ç‚¹æ•°æ®æ·˜æ±°å‡ºå»ï¼Œè€Œçƒ­ç‚¹æ•°æ®è¢«å†æ¬¡æŸ¥è¯¢æ—¶ï¼Œéœ€è¦å†æ¬¡ä»ç£ç›˜ä¸­è·å–ï¼Œä»è€Œå½±å“æ•°æ®åº“çš„æŸ¥è¯¢æ€§èƒ½ã€‚</p><p>å¦‚æœæˆ‘ä»¬çš„çƒ­ç‚¹æ•°æ®æ¯”è¾ƒå¤šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒæ•´midpointå€¼æ¥å¢åŠ çƒ­ç‚¹æ•°æ®çš„å­˜å‚¨é‡ï¼Œä»è€Œé™ä½çƒ­ç‚¹æ•°æ®çš„æ·˜æ±°ç‡ã€‚</p><h2>æ€»ç»“</h2><p>ä»¥ä¸ŠInnoDBçš„å®ç°å’Œè¿è¡ŒåŸç†åˆ°è¿™é‡Œå°±ä»‹ç»å®Œäº†ã€‚å›é¡¾æ¨¡å—å…­ï¼Œå‰ä¸‰è®²æˆ‘ä¸»è¦ä»‹ç»äº†æ•°æ®åº“æ“ä½œçš„æ€§èƒ½ä¼˜åŒ–ï¼ŒåŒ…æ‹¬SQLè¯­å¥ã€äº‹åŠ¡ä»¥åŠç´¢å¼•çš„ä¼˜åŒ–ï¼Œæ¥ä¸‹æ¥æˆ‘åˆè®²åˆ°äº†æ•°æ®åº“è¡¨ä¼˜åŒ–ï¼ŒåŒ…æ‹¬è¡¨è®¾è®¡ã€åˆ†è¡¨åˆ†åº“çš„å®ç°ç­‰ç­‰ï¼Œæœ€åæˆ‘è¿˜ä»‹ç»äº†ä¸€äº›æ•°æ®åº“å‚æ•°çš„è°ƒä¼˜ã€‚</p><p>æ€»çš„æ¥è®²ï¼Œä½œä¸ºå¼€å‘å·¥ç¨‹å¸ˆï¼Œæˆ‘ä»¬åº”è¯¥æŒæ¡æ•°æ®åº“å‡ ä¸ªå¤§çš„çŸ¥è¯†ç‚¹ï¼Œç„¶åå†æ·±å…¥åˆ°æ•°æ®åº“å†…éƒ¨å®ç°çš„ç»†èŠ‚ï¼Œè¿™æ ·æ‰èƒ½é¿å…ç»å¸¸å†™å‡ºä¸€äº›å…·æœ‰æ€§èƒ½é—®é¢˜çš„SQLï¼ŒåŸ¹å…»è°ƒä¼˜æ•°æ®åº“æ€§èƒ½çš„èƒ½åŠ›ã€‚</p><p>è¿™ä¸€è®²çš„å†…å®¹å°±åˆ°è¿™é‡Œï¼Œç›¸å¯¹åŸºç¡€ï¼Œä¸ç†Ÿæ‚‰çš„åŒå­¦æŠ“ç´§è¡¥è¡¥è¯¾ï¼Œå¦‚æœ‰ç–‘é—®ï¼Œæ¬¢è¿ç•™è¨€è®¨è®ºã€‚ä¹Ÿæ¬¢è¿ä½ ç‚¹å‡»â€œè¯·æœ‹å‹è¯»â€ï¼ŒæŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™èº«è¾¹çš„æœ‹å‹ï¼Œé‚€è¯·ä»–ä¸€èµ·å­¦ä¹ ã€‚</p><p><span class=\"reference\"></span></p>","comments":[{"had_liked":false,"id":133389,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1568543287,"is_pvip":false,"replies":[{"id":"51395","content":"ğŸ‘åŠ æ²¹","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1568724818,"ip_address":"","comment_id":133389,"utype":1}],"discussion_count":4,"race_medal":0,"score":"108942725687","product_id":100028001,"comment_content":"åˆ°æ­¤åˆ»Javaæ€§èƒ½è°ƒä¼˜å®æˆ˜ç®—æ˜¯ä»å¤´åˆ°å°¾çš„å­¦ä¹ äº†ä¸€éï¼Œé¦–å…ˆï¼Œä¸ºè€å¸ˆçš„æ•¬ä¸šæ€åº¦ç‚¹èµï¼Œè·Ÿç€è€å¸ˆä¹Ÿå­¦ä¹ åˆ°äº†è®¸å¤šæ€§èƒ½è°ƒä¼˜çš„æ–¹æ³•å’ŒæŠ€å·§ã€‚ä¹‹å‰ä¹Ÿçœ‹è¿‡ä¹¦ï¼ŒåŠ å…¥ç›®å‰çš„å…¬å¸ååŠ ç­æ¯”è¾ƒä¸¥é‡ï¼Œçœ‹ä¹¦çš„æ•ˆç‡ä¹Ÿä¸é«˜äº†ï¼Œä»å»å¹´åœ¨æå®¢æ—¶é—´å­¦ä¹ åå°±ä¸€å‘ä¸å¯æ”¶æ‹¾ä¹°äº†å‡ åä¸ªä¸“æ ï¼Œç°åœ¨è¿˜æœ‰è®¸å¤šæœªå¼€å§‹å­¦ä¹ ï¼Œä¸è¿‡ä¹°ä¸“æ æœ‰ç§ä»¤äººå®‰å¿ƒçš„æ„Ÿè§‰ï¼Œæ¯å¤©ä¹Ÿåœ¨ä¸æ–­çš„å­¦ä¹ ï¼Œçœ‹çš„å¤šäº†å‘ç°ä¸åŒçš„ä¸“æ é‡å¤çš„å†…å®¹ä¹Ÿå¤šäº†ï¼Œå½“ç„¶ï¼Œçœ‹ä¸å®Œäº†è¿˜ç»§ç»­ä¹°ï¼Œæˆ‘è§‰å¾—ä¹°ä¸“æ çš„é’±å…¶å®ç›¸å¯¹äºå­¦ä¹ åˆ°çš„çŸ¥è¯†æ¥è®²æ˜¯éå¸¸å€¼å¾—çš„ã€‚å“ªæ€•åªå­¦ä¹ ä¸€éï¼Œæœ‰äº›ä¸“æ å€¼å¾—ä¸€åˆ·å†åˆ·ï¼Œæ¯•ç«Ÿå†™ä¸“æ çš„è€å¸ˆæ°´è´§å°‘ï¼Œæå®¢æ—¶é—´é€‰æ‹©è®²å¸ˆçš„ä¸“ä¸šæ€§ï¼Œä¹Ÿæ˜¯æˆ‘ä¸æ–­åœ¨è¿™é‡Œä»˜è´¹çš„ä¸€ä¸ªåŸå› ã€‚æˆ‘å‘ç°æ²¡æœ‰ä¹é˜³ç¥åŠŸçœŸæ˜¯å­¦ä»€ä¹ˆéƒ½æ…¢ï¼Œåœ¨è®¡ç®—æœºçš„ä¸–ç•Œé‡Œè®¡ç®—æœºç»„æˆåŸç†&#47;æ“ä½œç³»ç»ŸåŸç†&#47;ç¼–è¯‘åŸç†&#47;è®¡ç®—æœºç½‘ç»œåŸç†&#47;è®¡ç®—æœºæ•°æ®åº“åŸç†&#47;æ•°æ®ç»“æ„ä¸ç®—æ³•è¿™äº›å°±æ˜¯ä¹é˜³ç¥åŠŸï¼Œå¦‚æœè¿™äº›ç²¾é€šï¼Œä»€ä¹ˆè¿™ä¸ªé‚£ä¸ªæ‹›å¼å…¨éƒ½ä¸€å­¦å°±ä¼šä¸”é€Ÿåº¦å¿«å°è±¡æ·±ã€‚<br>è®¡ç®—æœºç•Œæ‰€æœ‰çš„è¿™ä¸ªç†è®ºé‚£ä¸ªåŸç†åŸºæœ¬éƒ½æ˜¯å›´ç»•æ€§èƒ½å’Œå®¹é‡åœ¨åšæ–‡ç« ï¼Œéƒ½æƒ³è¦æ›´å¿«çš„é€Ÿåº¦æ›´å¤§çš„å­˜å‚¨ç©ºé—´ï¼Œåœ¨å‡ä¸€å±‚å°±æ˜¯ä¸ºäº†å’Œæ—¶é—´èµ›è·‘å¼€æ‹“æ›´ä¸ºå¹¿é˜”çš„ç©ºé—´ï¼Œå¿«èƒ½å æ®è®¸å¤šçš„å…ˆæœºï¼Œä¸ç®¡ä»€ä¹ˆè¡Œä¸šå¿«éƒ½å…·æœ‰ä¼˜åŠ¿ã€‚åœ¨æå®¢æ—¶é—´æˆ‘æ„Ÿè§‰å¢é•¿è§é—»çš„æ•ˆç‡è¿˜æ˜¯æŒºé«˜çš„ï¼Œä¸è¿‡ä¸çœ‹ä¹¦è¿˜æ˜¯ä¸è¡Œï¼Œæ·±åº¦ç»†è‡´åº¦ç³»ç»Ÿæ€§è¿™äº›çŸ¥è¯†ä½“éªŒè¿˜æ˜¯ä¸èƒ½å’Œä¹¦åª²ç¾ã€‚ä¸å­¦ä¹ æ˜¯ä¸å¯èƒ½çš„ï¼Œäººç”Ÿå¦‚é€†æ°´è¡ŒèˆŸä¸è¿›åˆ™é€€ï¼Œå…¶å®å­¦ä¹ çš„æ…¢ä¹Ÿä¼šæ¸æ¸å¤±å»ç«äº‰ä¼˜åŠ¿ã€‚å¥½å¥‡è€å¸ˆè¿™ä¹ˆå¤šçŸ¥è¯†ç§¯ç´¯äº†å¤šä¹…ï¼Ÿéƒ½æ˜¯æ€ä¹ˆç§¯ç´¯çš„?é™¤äº†åšæŒè¿˜æœ‰ä»€ä¹ˆåˆ«å·§å¦™å˜›ï¼Ÿ<br>æˆ‘çš„åŒäº‹ä¸­æœ‰ä¸€ä½éå¸¸æ‹¼å‘½ï¼Œä¸¤å¹´å­¦ä¹ çš„ä¸œè¥¿é¡¶åˆ«äººå››äº”å¹´ï¼Œä½åœ¨å…¬å¸é™„è¿‘å‡ ä¹æ¯å¤©éƒ½ç–¯ç‹‚åŠ ç­å­¦ä¹ ï¼Œç°åœ¨ä¹Ÿéå¸¸å‰å®³ä»å·¥èµ„ä¸Šæ¥è¯´å·²ç»ç§’æ€äº†è®¸å¤šå·¥ä½œä¸ƒå…«å¹´çš„äººã€‚å…ˆå»é˜¿é‡Œå†å»æ‹¼å¤šå¤šï¼ŒçœŸæ˜¯å¤ªæ‹¼äº†ï¼Œç”Ÿæ´»å°±æ˜¯ä¸Šç­åŠ ç­å­¦ä¹ ã€‚å…¶å®æˆ‘ä¹Ÿæƒ³è¿™ä¹ˆæ‹¼ï¼Œæˆ‘ä¹Ÿæƒ³å¹´å…¥ç™¾ä¸‡ï¼Œä¸è¿‡å³ä½¿æ—¶é—´ä»˜å‡ºçš„å·®ä¸å¤šï¼Œäººçš„è„‘å›æ²ŸåŠè¿‡å¾€çš„å—æ•™è‚²ç»å†ç‰¹åˆ«æ˜¯æ€ç»´æ–¹å¼çš„è®­ç»ƒåŠ è‹±è¯­çš„åŠ æŒä¹Ÿä¼šå¯¼è‡´éå¸¸å¤§çš„å·®å¼‚ã€‚<br>å—¯ï¼Œæ„Ÿæ…¨æœ‰ç‚¹å¤šï¼Œç»§ç»­åŠ æ²¹å§!ä¿æŒå¥½å­¦ä¹ çš„èŠ‚å¥ï¼Œä¹°çš„ä¸“æ æˆ–ä¹¦ï¼Œå¦‚æœä¸çœ‹ä¸å­¦ï¼Œè¿˜ä¸å¦‚ä¹°å‡ å·å«ç”Ÿçº¸ã€‚<br>å†æ¬¡æ„Ÿè°¢è€å¸ˆçš„åˆ†äº«ï¼Œæˆ‘ç›¸ä¿¡æœ‰æœä¸€æ—¥æˆ‘ä¹Ÿä¼šåƒè€å¸ˆä¸€æ ·ç‰›é€¼!","like_count":25,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467375,"discussion_content":"ğŸ‘åŠ æ²¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568724818,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2532285,"avatar":"","nickname":"Geek_926921","note":"","ucode":"51C3B0178D77E1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575657,"discussion_content":"åŠ ç­å¤šçœŸæ˜¯ä¸ªé€šç—…ï¼Œæ¯å¤©9ç‚¹å¤šåˆ°å®¶åªæƒ³æ´—æ¾¡ç¡è§‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655006067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1399853,"avatar":"https://static001.geekbang.org/account/avatar/00/15/5c/2d/226a3631.jpg","nickname":"MZC","note":"","ucode":"46278027D522FB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":56329,"discussion_content":"è™½ç„¶æ²¡ä½ ä¹°çš„å¤š  ä½†æ˜¯ä¹°ä¸“æ çœŸçš„ä¼šè®©æˆ‘å®‰å¿ƒğŸ˜Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574474233,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2532285,"avatar":"","nickname":"Geek_926921","note":"","ucode":"51C3B0178D77E1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1399853,"avatar":"https://static001.geekbang.org/account/avatar/00/15/5c/2d/226a3631.jpg","nickname":"MZC","note":"","ucode":"46278027D522FB","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382625,"discussion_content":"æˆ‘ä¹Ÿæ˜¯è¿™æ ·å­çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625648350,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":56329,"ip_address":""},"score":382625,"extra":""}]}]},{"had_liked":false,"id":126764,"user_name":"æ‹’ç»","can_delete":false,"product_type":"c1","uid":1335155,"ip_address":"","ucode":"CB0264C4D3FE17","user_header":"https://static001.geekbang.org/account/avatar/00/14/5f/73/bb3dc468.jpg","comment_is_top":false,"comment_ctime":1566466909,"is_pvip":false,"replies":[{"id":"47073","content":"å¯¹çš„ï¼Œæˆ‘ä»¬ä¹‹å‰è®¨è®ºè¿‡serverå±‚çš„cacheï¼Œä¸»è¦æ˜¯æ˜¯æ ¹æ®æˆ‘ä»¬æŸ¥è¯¢SQLçš„hashå€¼ä½œä¸ºkeyï¼ŒæŸ¥è¯¢ç»“æœä½œä¸ºvalueå€¼ä¿å­˜åœ¨cacheå±‚ã€‚è€Œå­˜å‚¨å¼•æ“å±‚çš„ç¼“å†²æ± ï¼Œç¼“å†²äº†å¾ˆå¤šç±»å‹çš„æ•°æ®ï¼Œä¾‹å¦‚ç´¢å¼•é¡µã€æ•°æ®é¡µç­‰ã€‚<br><br>å¦‚æœä¸€å¼ è¡¨çš„æ•°æ®ç»å¸¸è¢«æ–°å¢ã€æ›´æ–°ã€åˆ é™¤ï¼Œåˆ™å¯¼è‡´Cacheå±‚çš„å¤±æ•ˆç‡éå¸¸é«˜ï¼Œä»è€Œå¯¼è‡´é¢‘ç¹æ¸…é™¤å·²ç¼“å­˜çš„æ•°æ®ï¼Œserverå±‚çš„cacheå¯èƒ½ä¼šå¢åŠ æ•°æ®åº“çš„æ€§èƒ½ï¼Œåœ¨MySQL8.0å·²ç»ç§»é™¤è¯¥åŠŸèƒ½ï¼Œå»ºè®®æˆ‘ä»¬åœ¨ä¸šåŠ¡å±‚æˆ–æ•°æ®åº“ä¸­é—´ä»£ç†å±‚æ¥ç¼“å­˜æŸ¥è¯¢çš„ç»“æœã€‚ä¾‹å¦‚mybatiså’Œhibernateä¸­åˆ©ç”¨ä¸€çº§ç¼“å­˜æ¥ç¼“å­˜é¢‘ç¹æŸ¥è¯¢çš„æ•°æ®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1566611279,"ip_address":"","comment_id":126764,"utype":1}],"discussion_count":3,"race_medal":0,"score":"27336270685","product_id":100028001,"comment_content":"è€å¸ˆï¼Œæœ¬è®²çš„ç¼“å­˜æ± æ˜¯åŸºäºå¼•æ“å±‚çš„ç¼“å­˜å—ï¼Ÿä¸serverå±‚çš„ç¼“å­˜æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ<br>æ¯ä¸ªé¡µå­˜æ”¾çš„è¡Œè®°å½•ä¹Ÿæ˜¯æœ‰ç¡¬æ€§å®šä¹‰çš„ï¼Œæœ€å¤šå…è®¸å­˜æ”¾ 16KB&#47;2-200è¡Œï¼Œå³7992è¡Œï¼Œæ˜¯æ€ä¹ˆè®¡ç®—æ¥çš„ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464155,"discussion_content":"å¯¹çš„ï¼Œæˆ‘ä»¬ä¹‹å‰è®¨è®ºè¿‡serverå±‚çš„cacheï¼Œä¸»è¦æ˜¯æ˜¯æ ¹æ®æˆ‘ä»¬æŸ¥è¯¢SQLçš„hashå€¼ä½œä¸ºkeyï¼ŒæŸ¥è¯¢ç»“æœä½œä¸ºvalueå€¼ä¿å­˜åœ¨cacheå±‚ã€‚è€Œå­˜å‚¨å¼•æ“å±‚çš„ç¼“å†²æ± ï¼Œç¼“å†²äº†å¾ˆå¤šç±»å‹çš„æ•°æ®ï¼Œä¾‹å¦‚ç´¢å¼•é¡µã€æ•°æ®é¡µç­‰ã€‚\n\nå¦‚æœä¸€å¼ è¡¨çš„æ•°æ®ç»å¸¸è¢«æ–°å¢ã€æ›´æ–°ã€åˆ é™¤ï¼Œåˆ™å¯¼è‡´Cacheå±‚çš„å¤±æ•ˆç‡éå¸¸é«˜ï¼Œä»è€Œå¯¼è‡´é¢‘ç¹æ¸…é™¤å·²ç¼“å­˜çš„æ•°æ®ï¼Œserverå±‚çš„cacheå¯èƒ½ä¼šå¢åŠ æ•°æ®åº“çš„æ€§èƒ½ï¼Œåœ¨MySQL8.0å·²ç»ç§»é™¤è¯¥åŠŸèƒ½ï¼Œå»ºè®®æˆ‘ä»¬åœ¨ä¸šåŠ¡å±‚æˆ–æ•°æ®åº“ä¸­é—´ä»£ç†å±‚æ¥ç¼“å­˜æŸ¥è¯¢çš„ç»“æœã€‚ä¾‹å¦‚mybatiså’Œhibernateä¸­åˆ©ç”¨ä¸€çº§ç¼“å­˜æ¥ç¼“å­˜é¢‘ç¹æŸ¥è¯¢çš„æ•°æ®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566611279,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1263977,"avatar":"https://static001.geekbang.org/account/avatar/00/13/49/69/c0fcf4e8.jpg","nickname":"def","note":"","ucode":"39BDBEA0560C13","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":355563,"discussion_content":"å›ç­”ä¸€ä¸‹è®¡ç®—çš„é—®é¢˜ï¼Œæ˜¯ä»¥å­—èŠ‚Bä¸ºå•ä½ï¼Œ16KB=16*1024B=16384Bï¼Œ16384/2-200=7992","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615452289,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1142335,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6e/3f/49e5079f.jpg","nickname":"æ¥ä¼½å±±äºº","note":"","ucode":"5859C06DAC790D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1263977,"avatar":"https://static001.geekbang.org/account/avatar/00/13/49/69/c0fcf4e8.jpg","nickname":"def","note":"","ucode":"39BDBEA0560C13","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542459,"discussion_content":"ä¸ºå•¥æ˜¯é™¤ä»¥2å†å‡200å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640756587,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":355563,"ip_address":""},"score":542459,"extra":""}]}]},{"had_liked":false,"id":158589,"user_name":"å¹³å‡¡ä¹‹è·¯","can_delete":false,"product_type":"c1","uid":1669273,"ip_address":"","ucode":"96CE12339BD5FD","user_header":"https://static001.geekbang.org/account/avatar/00/19/78/99/6060eb2d.jpg","comment_is_top":false,"comment_ctime":1575421064,"is_pvip":false,"replies":[{"id":"60850","content":"å¦‚æœæ˜¯åŒä¸€æ—¶åˆ»éƒ½è¿›å…¥åˆ°æ•°æ®åº“ï¼Œå…¶ä»–9000äººè‚¯å®šæ˜¯åœ¨ç­‰å¾…çŠ¶æ€ã€‚æ•°æ®åº“æ“ä½œéƒ½æ˜¯æ¯«ç§’çº§çš„ï¼Œ1000äººä½¿ç”¨å®Œä¹‹åï¼Œç©ºé—²çš„è¿æ¥ä¼šè¢«é‡Šæ”¾å‡ºæ¥ï¼Œæ‰€ä»¥å“ªæ€•æ˜¯9000äººç­‰å¾…ï¼Œåé¢ä¹Ÿä¼šåœ¨ä¸€ç§’ä¹‹å†…å®Œæˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1575537406,"ip_address":"","comment_id":158589,"utype":1}],"discussion_count":4,"race_medal":0,"score":"18755290248","product_id":100028001,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œæˆ‘ä¸€ç›´æœ‰ä¸ªç–‘é—®ï¼Œå¦‚æœæ•°æ®åº“è®¾ç½®æœ€å¤§è¿æ¥æ•°ä¸º1000ï¼Œå¦‚æœåƒç”µå•†ç³»ç»Ÿè¿™æ ·çš„ç½‘ç«™ï¼ŒåŒæ—¶æœ‰10000ä¸ªäººè®¿é—®ç™»å½•ï¼Œé‚£ä¸æ˜¯æœ‰9000äººéƒ½è¦ç­‰å¾…ï¼Ÿç”µå•†ç³»ç»Ÿæ˜¯ç”¨çš„å…¶ä»–æ•°æ®åº“å­˜å‚¨ç³»ç»Ÿå—ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476775,"discussion_content":"å¦‚æœæ˜¯åŒä¸€æ—¶åˆ»éƒ½è¿›å…¥åˆ°æ•°æ®åº“ï¼Œå…¶ä»–9000äººè‚¯å®šæ˜¯åœ¨ç­‰å¾…çŠ¶æ€ã€‚æ•°æ®åº“æ“ä½œéƒ½æ˜¯æ¯«ç§’çº§çš„ï¼Œ1000äººä½¿ç”¨å®Œä¹‹åï¼Œç©ºé—²çš„è¿æ¥ä¼šè¢«é‡Šæ”¾å‡ºæ¥ï¼Œæ‰€ä»¥å“ªæ€•æ˜¯9000äººç­‰å¾…ï¼Œåé¢ä¹Ÿä¼šåœ¨ä¸€ç§’ä¹‹å†…å®Œæˆã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575537406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1672674,"avatar":"https://static001.geekbang.org/account/avatar/00/19/85/e2/540b91fa.jpg","nickname":"å‡¯è€","note":"","ucode":"DF9C2170509BD0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372160,"discussion_content":"åšè¿‡æ€§èƒ½å‹æµ‹æœ€åæŠŠé—®é¢˜å®šä½åˆ°æ•°æ®åº“æœ€å¤§è¿æ¥æ•°è®¾å€¼è¿‡å°å¯¼è‡´äº†TPSä¸Šä¸å»çš„æ€§èƒ½é—®é¢˜","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1620215863,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1669273,"avatar":"https://static001.geekbang.org/account/avatar/00/19/78/99/6060eb2d.jpg","nickname":"å¹³å‡¡ä¹‹è·¯","note":"","ucode":"96CE12339BD5FD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":72935,"discussion_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œæˆ‘æœ‰ç‚¹è¿˜æ˜¯ä¸æ˜ç™½ï¼Œ1000ä¸ªäººè¿æ¥åï¼Œè¿˜è¦å¢åˆ æ”¹æŸ¥è¿™äº›æ“ä½œï¼Œå¦‚æœåšè¿™äº›æ“ä½œï¼Œè¿˜è¦é‡è¿æ¥å—ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575544015,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1348830,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/SM4fwn9uFicXU8cQ1rNF2LQdKNbZI1FX1jmdwaE2MTrBawbugj4TQKjMKWG0sGbmqQickyARXZFS8NZtobvoWTHA/132","nickname":"td901105","note":"","ucode":"32D42A4F36FA02","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1669273,"avatar":"https://static001.geekbang.org/account/avatar/00/19/78/99/6060eb2d.jpg","nickname":"å¹³å‡¡ä¹‹è·¯","note":"","ucode":"96CE12339BD5FD","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278956,"discussion_content":"å¦‚æœç³»ç»Ÿæœ‰è¿æ¥æ± çš„è¯å°±ä¸ç”¨é‡æ–°è¿æ¥","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591263997,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":72935,"ip_address":""},"score":278956,"extra":""}]}]},{"had_liked":false,"id":126583,"user_name":"å¼ å­¦ç£Š","can_delete":false,"product_type":"c1","uid":1250029,"ip_address":"","ucode":"F545F384A6F1E1","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eotSSnZic41tGkbflx0ogIg3ia6g2muFY1hCgosL2t3icZm7I8Ax1hcv1jNgr6vrZ53dpBuGhaoc6DKg/132","comment_is_top":false,"comment_ctime":1566433102,"is_pvip":false,"replies":[{"id":"50390","content":"ä¼˜å…ˆä¸ç¼“å†²æ± äº¤äº’ã€‚é—®é¢˜å·²æ”¹æ­£ï¼Œè°¢è°¢æŒ‡æ­£ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1567947196,"ip_address":"","comment_id":126583,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10156367694","product_id":100028001,"comment_content":"è€å¸ˆï¼Œå®¢æˆ·ç«¯è¯»å–æ•°æ®æ—¶ï¼Œå¦‚æœæ•°æ®å­˜åœ¨äºç¼“å†²æ± ä¸­ï¼Œå®¢æˆ·ç«¯å°±ä¼šç›´æ¥è¯»å–ç¼“å†²æ± ä¸­çš„æ•°æ®ï¼Œå¦åˆ™å°†ç£ç›˜ä¸­çš„æ•°æ®åŠ è½½åˆ°ç¼“å†²æ± ï¼Œå†ä»ç¼“å†²æ± ä¸­è¯»å–ï¼Œå®¢æˆ·ç«¯å§‹ç»ˆå’Œç¼“å†²æ± äº¤äº’ï¼Œå‡†ç¡®çš„è¯´æ˜¯ä¸æ˜¯åº”è¯¥è¿™æ ·ï¼Ÿ<br>å¦å¤–æœ‰ä¸€å¤„ç¼–è¾‘é”™è¯¯ï¼ŒInnoDB å­˜å‚¨å¼•æ“æ˜¯é¢å‘åˆ—çš„ï¼ˆrow-oriented)ï¼Œåº”è¯¥å†™æˆè¡Œã€‚","like_count":2,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464069,"discussion_content":"ä¼˜å…ˆä¸ç¼“å†²æ± äº¤äº’ã€‚é—®é¢˜å·²æ”¹æ­£ï¼Œè°¢è°¢æŒ‡æ­£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567947196,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":328505,"user_name":"æ¥ä¼½å±±äºº","can_delete":false,"product_type":"c1","uid":1142335,"ip_address":"","ucode":"5859C06DAC790D","user_header":"https://static001.geekbang.org/account/avatar/00/11/6e/3f/49e5079f.jpg","comment_is_top":false,"comment_ctime":1640756810,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5935724106","product_id":100028001,"comment_content":"è€å¸ˆ æ‚¨å¥½ undo logæ˜¯è§£å†³ACIDä¸­çš„Aå§ ä¸æ˜¯Cå§","like_count":1,"discussions":[{"author":{"id":1483912,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL4bZibSxNmZ2Ygpib7N4BWYanDZKWdX2epvXmR4G6ryHN9zsG43wUtoXb1ZtF65icTrz4SWdLiclAuicg/132","nickname":"solzs","note":"","ucode":"E8B7569A359235","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568143,"discussion_content":"æ˜¯cå’Œ éš”ç¦»æ€§æ˜¯é”å®ç°çš„, åŸå­å’ŒæŒä¹…æ€§æ˜¯redo logä¿è¯, undo logä¿è¯ä¸€è‡´æ€§, å¯å‚è€ƒã€ŠmysqlæŠ€æœ¯å†…å¹• innodbå­˜å‚¨å¼•æ“ã€‹ä¸€ä¹¦å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651070511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1682336,"avatar":"https://static001.geekbang.org/account/avatar/00/19/ab/a0/6a84ae8c.jpg","nickname":"å¢¨ç—•","note":"","ucode":"1EC93BFECA6B06","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555080,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646737116,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":175070,"user_name":"å¤©å¤©å‘ä¸Š","can_delete":false,"product_type":"c1","uid":1242455,"ip_address":"","ucode":"0CCCA6F4DCC480","user_header":"https://static001.geekbang.org/account/avatar/00/12/f5/57/ce10fb1b.jpg","comment_is_top":false,"comment_ctime":1580545978,"is_pvip":false,"replies":[{"id":"70526","content":"å¦‚æœé¢‘ç¹è®¿é—®ä¸”å˜æ›´éå¸¸å°‘çš„æ•°æ®ï¼Œå»ºè®®åœ¨ä¸šåŠ¡å±‚è¿›è¡Œç¼“å­˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1582722588,"ip_address":"","comment_id":175070,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5875513274","product_id":100028001,"comment_content":"è€å¸ˆåœ¨ï¼šMySQL8.0å–æ¶ˆcache é‚£å²‚ä¸æ˜¯æ¯æ¬¡æŸ¥è¯¢éƒ½è¦è®¿é—®ç£ç›˜ è¿™æ ·ä¸åˆç†å§ çš„å›å¤ä¸­å›ç­”ï¼šè¿˜æœ‰ä¸€å±‚ç¼“å†²æ± ã€‚ä½†æ˜¯ç¼“å†²æ± å‘½ä¸­çš„æ¦‚ç‡å¾ˆä½å¾ˆä½å§ã€‚<br>","like_count":1,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482614,"discussion_content":"å¦‚æœé¢‘ç¹è®¿é—®ä¸”å˜æ›´éå¸¸å°‘çš„æ•°æ®ï¼Œå»ºè®®åœ¨ä¸šåŠ¡å±‚è¿›è¡Œç¼“å­˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582722588,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130703,"user_name":"å¼ å¾·","can_delete":false,"product_type":"c1","uid":1101929,"ip_address":"","ucode":"31FE63E8725EFC","user_header":"https://static001.geekbang.org/account/avatar/00/10/d0/69/5dbdc245.jpg","comment_is_top":false,"comment_ctime":1567514054,"is_pvip":false,"replies":[{"id":"49137","content":"ä¸ä¼šçš„ï¼Œè¿˜æœ‰ä¸€å±‚ç¼“å†²æ± ","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1567596374,"ip_address":"","comment_id":130703,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5862481350","product_id":100028001,"comment_content":"è€å¸ˆ  MySQL8.0å–æ¶ˆcache   é‚£å²‚ä¸æ˜¯æ¯æ¬¡æŸ¥è¯¢éƒ½è¦è®¿é—®ç£ç›˜  è¿™æ ·ä¸åˆç†å§  è¿˜æ˜¯æˆ‘ç†è§£é”™äº†","like_count":1,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466078,"discussion_content":"ä¸ä¼šçš„ï¼Œè¿˜æœ‰ä¸€å±‚ç¼“å†²æ± ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567596374,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1079345,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/31/c7f8d1db.jpg","nickname":"Laputa","note":"","ucode":"64C157042CF138","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297666,"discussion_content":"MySQL 8å–æ¶ˆçš„æ˜¯sqlçš„æŸ¥è¯¢ç»“æœçš„ç¼“å­˜ï¼Œæ•°æ®é¡µçš„ç¼“å­˜è¿˜æ˜¯æœ‰çš„ï¼Œå› ä¸ºsqlç»“æœçš„ç¼“å­˜è¦æ±‚å¾ˆè‹›åˆ»ï¼Œæ•ˆæœä¸å°½äººæ„ï¼Œæ‰€ä»¥å–æ¶ˆäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597020658,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354096,"user_name":"FiRerOUNd","can_delete":false,"product_type":"c1","uid":1315438,"ip_address":"åŒ—äº¬","ucode":"571CB6565F9713","user_header":"https://static001.geekbang.org/account/avatar/00/14/12/6e/3a0b4930.jpg","comment_is_top":false,"comment_ctime":1660095638,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1660095638","product_id":100028001,"comment_content":"æˆ‘ç†è§£çš„innodbæ²¡æœ‰å®ç°redologï¼Œè¿™ä¸ªæ˜¯mysqlæœåŠ¡å™¨å±‚å®ç°çš„ï¼Œæ‰€æœ‰å­˜å‚¨å¼•æ“å…±åŒè¿™ä¸ªæ–‡ä»¶ã€‚","like_count":0},{"had_liked":false,"id":341389,"user_name":"ETLshow","can_delete":false,"product_type":"c1","uid":1117852,"ip_address":"","ucode":"B57C574B3343CD","user_header":"https://static001.geekbang.org/account/avatar/00/11/0e/9c/2413fd6f.jpg","comment_is_top":false,"comment_ctime":1649575832,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1649575832","product_id":100028001,"comment_content":"æ€§èƒ½è°ƒä¼˜è¿˜æ˜¯è¦å¤šåˆ·å‡ é","like_count":0},{"had_liked":false,"id":278722,"user_name":"ty_young","can_delete":false,"product_type":"c1","uid":1284337,"ip_address":"","ucode":"EB1D5DB0AE7B33","user_header":"","comment_is_top":false,"comment_ctime":1613239304,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1613239304","product_id":100028001,"comment_content":"â€œPager Cleaner Thread æ˜¯æ–°å¼•å…¥çš„ä¸€ä¸ªç”¨äºååŠ© Master Thread åˆ·æ–°è„é¡µåˆ°ç£ç›˜çš„çº¿ç¨‹â€ï¼Œè€å¸ˆå¥½ï¼Œè¯·é—®è¿™ä¸ªè„é¡µå€¼çš„æ˜¯ä»€ä¹ˆ","like_count":0},{"had_liked":false,"id":247949,"user_name":"æ—…é€”","can_delete":false,"product_type":"c1","uid":1212902,"ip_address":"","ucode":"5022477E8E9441","user_header":"https://static001.geekbang.org/account/avatar/00/12/81/e6/6cafed37.jpg","comment_is_top":false,"comment_ctime":1599929333,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1599929333","product_id":100028001,"comment_content":"Buffer Pool ä¸­æ›´æ–°çš„æ•°æ®æœªåˆ·æ–°åˆ°ç£ç›˜ä¸­ï¼Œè¯¥å†…å­˜é¡µæˆ‘ä»¬ç§°ä¹‹ä¸ºè„é¡µ  <br>é—®ä¸‹è€å¸ˆ è¿™å¥è¯çš„æ„æ€æ˜¯æ›´æ–°çš„æ•°æ®æœªæˆåŠŸåˆ·æ–°åˆ°ç£ç›˜è¿˜æ˜¯åœ¨å†…å­˜ä¸­æœªåˆ·æ–°åˆ°ç£ç›˜","like_count":0,"discussions":[{"author":{"id":1307497,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f3/69/7039d03f.jpg","nickname":"ä¹¦ç­–ç¨ æµŠ","note":"","ucode":"A29875CE15FDA3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391454,"discussion_content":"\nä½ è¯´çš„è¿™ä¸¤ä¸ªæ˜¯ä¸€å›äº‹å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630471721,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139777,"user_name":"ty_young","can_delete":false,"product_type":"c1","uid":1284337,"ip_address":"","ucode":"EB1D5DB0AE7B33","user_header":"","comment_is_top":false,"comment_ctime":1570721534,"is_pvip":false,"replies":[{"id":"54278","content":"åœ¨InnoDB 1.1ä¹‹å‰ï¼Œè¿™ä¸ªåŠ¨ä½œåœ¨master threadä¸­è¿›è¡Œï¼Œåœ¨1.1ä¹‹åï¼Œç‹¬ç«‹åˆ°äº†purge threadä¸­è¿›è¡Œï¼Œæ‰€ä»¥æ˜¯ä¸€å›äº‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1570957200,"ip_address":"","comment_id":139777,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1570721534","product_id":100028001,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œè¯·é—®Master Threadå›æ”¶çš„undoé¡µå’ŒPurge Threadå›æ”¶çš„undo logæ˜¯ä¸€å›äº‹ä¹ˆ","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470108,"discussion_content":"åœ¨InnoDB 1.1ä¹‹å‰ï¼Œè¿™ä¸ªåŠ¨ä½œåœ¨master threadä¸­è¿›è¡Œï¼Œåœ¨1.1ä¹‹åï¼Œç‹¬ç«‹åˆ°äº†purge threadä¸­è¿›è¡Œï¼Œæ‰€ä»¥æ˜¯ä¸€å›äº‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570957200,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126719,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1566457138,"is_pvip":false,"replies":[{"id":"47070","content":"ä¸€èµ·è¿›æ­¥","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1566610736,"ip_address":"","comment_id":126719,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566457138","product_id":100028001,"comment_content":"è€å¸ˆè®²å¾—å¾ˆå¥½ï¼Œè¿™ä¸ªçŸ¥è¯†ä¸²è®²å¾ˆä¸é”™ï¼Œè·Ÿç€è€å¸ˆä¸€èµ·ç²¾è¿›ã€‚","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464135,"discussion_content":"ä¸€èµ·è¿›æ­¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566610736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}