{"id":85001,"title":"05 | ä¸€ä¸å°å¿ƒå°±æ­»é”äº†ï¼Œæ€ä¹ˆåŠï¼Ÿ","content":"<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ç”¨Account.classä½œä¸ºäº’æ–¥é”ï¼Œæ¥è§£å†³é“¶è¡Œä¸šåŠ¡é‡Œé¢çš„è½¬è´¦é—®é¢˜ï¼Œè™½ç„¶è¿™ä¸ªæ–¹æ¡ˆä¸å­˜åœ¨å¹¶å‘é—®é¢˜ï¼Œä½†æ˜¯æ‰€æœ‰è´¦æˆ·çš„è½¬è´¦æ“ä½œéƒ½æ˜¯ä¸²è¡Œçš„ï¼Œä¾‹å¦‚è´¦æˆ·A è½¬è´¦æˆ·Bã€è´¦æˆ·C è½¬è´¦æˆ·Dè¿™ä¸¤ä¸ªè½¬è´¦æ“ä½œç°å®ä¸–ç•Œé‡Œæ˜¯å¯ä»¥å¹¶è¡Œçš„ï¼Œä½†æ˜¯åœ¨è¿™ä¸ªæ–¹æ¡ˆé‡Œå´è¢«ä¸²è¡ŒåŒ–äº†ï¼Œè¿™æ ·çš„è¯ï¼Œæ€§èƒ½å¤ªå·®ã€‚</p><p>è¯•æƒ³äº’è”ç½‘æ”¯ä»˜ç››è¡Œçš„å½“ä¸‹ï¼Œ8äº¿ç½‘æ°‘æ¯äººæ¯å¤©ä¸€ç¬”äº¤æ˜“ï¼Œæ¯å¤©å°±æ˜¯8äº¿ç¬”äº¤æ˜“ï¼›æ¯ç¬”äº¤æ˜“éƒ½å¯¹åº”ç€ä¸€æ¬¡è½¬è´¦æ“ä½œï¼Œ8äº¿ç¬”äº¤æ˜“å°±æ˜¯8äº¿æ¬¡è½¬è´¦æ“ä½œï¼Œä¹Ÿå°±æ˜¯è¯´å¹³å‡åˆ°æ¯ç§’å°±æ˜¯è¿‘1ä¸‡æ¬¡è½¬è´¦æ“ä½œï¼Œè‹¥æ‰€æœ‰çš„è½¬è´¦æ“ä½œéƒ½ä¸²è¡Œï¼Œæ€§èƒ½å®Œå…¨ä¸èƒ½æ¥å—ã€‚</p><p>é‚£ä¸‹é¢æˆ‘ä»¬å°±å°è¯•ç€æŠŠæ€§èƒ½æå‡ä¸€ä¸‹ã€‚</p><h2>å‘ç°å®ä¸–ç•Œè¦ç­”æ¡ˆ</h2><p>ç°å®ä¸–ç•Œé‡Œï¼Œè´¦æˆ·è½¬è´¦æ“ä½œæ˜¯æ”¯æŒå¹¶å‘çš„ï¼Œè€Œä¸”ç»å¯¹æ˜¯çœŸæ­£çš„å¹¶è¡Œï¼Œé“¶è¡Œæ‰€æœ‰çš„çª—å£éƒ½å¯ä»¥åšè½¬è´¦æ“ä½œã€‚åªè¦æˆ‘ä»¬èƒ½ä»¿ç…§ç°å®ä¸–ç•Œåšè½¬è´¦æ“ä½œï¼Œä¸²è¡Œçš„é—®é¢˜å°±è§£å†³äº†ã€‚</p><p>æˆ‘ä»¬è¯•æƒ³åœ¨å¤ä»£ï¼Œæ²¡æœ‰ä¿¡æ¯åŒ–ï¼Œè´¦æˆ·çš„å­˜åœ¨å½¢å¼çœŸçš„å°±æ˜¯ä¸€ä¸ªè´¦æœ¬ï¼Œè€Œä¸”æ¯ä¸ªè´¦æˆ·éƒ½æœ‰ä¸€ä¸ªè´¦æœ¬ï¼Œè¿™äº›è´¦æœ¬éƒ½ç»Ÿä¸€å­˜æ”¾åœ¨æ–‡ä»¶æ¶ä¸Šã€‚é“¶è¡ŒæŸœå‘˜åœ¨ç»™æˆ‘ä»¬åšè½¬è´¦æ—¶ï¼Œè¦å»æ–‡ä»¶æ¶ä¸ŠæŠŠè½¬å‡ºè´¦æœ¬å’Œè½¬å…¥è´¦æœ¬éƒ½æ‹¿åˆ°æ‰‹ï¼Œç„¶ååšè½¬è´¦ã€‚è¿™ä¸ªæŸœå‘˜åœ¨æ‹¿è´¦æœ¬çš„æ—¶å€™å¯èƒ½é‡åˆ°ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š</p><ol>\n<li>æ–‡ä»¶æ¶ä¸Šæ°å¥½æœ‰è½¬å‡ºè´¦æœ¬å’Œè½¬å…¥è´¦æœ¬ï¼Œé‚£å°±åŒæ—¶æ‹¿èµ°ï¼›</li>\n<li>å¦‚æœæ–‡ä»¶æ¶ä¸Šåªæœ‰è½¬å‡ºè´¦æœ¬å’Œè½¬å…¥è´¦æœ¬ä¹‹ä¸€ï¼Œé‚£è¿™ä¸ªæŸœå‘˜å°±å…ˆæŠŠæ–‡ä»¶æ¶ä¸Šæœ‰çš„è´¦æœ¬æ‹¿åˆ°æ‰‹ï¼ŒåŒæ—¶ç­‰ç€å…¶ä»–æŸœå‘˜æŠŠå¦å¤–ä¸€ä¸ªè´¦æœ¬é€å›æ¥ï¼›</li>\n<li>è½¬å‡ºè´¦æœ¬å’Œè½¬å…¥è´¦æœ¬éƒ½æ²¡æœ‰ï¼Œé‚£è¿™ä¸ªæŸœå‘˜å°±ç­‰ç€ä¸¤ä¸ªè´¦æœ¬éƒ½è¢«é€å›æ¥ã€‚</li>\n</ol><!-- [[[read_end]]] --><p>ä¸Šé¢è¿™ä¸ªè¿‡ç¨‹åœ¨ç¼–ç¨‹çš„ä¸–ç•Œé‡Œæ€ä¹ˆå®ç°å‘¢ï¼Ÿå…¶å®ç”¨ä¸¤æŠŠé”å°±å®ç°äº†ï¼Œè½¬å‡ºè´¦æœ¬ä¸€æŠŠï¼Œè½¬å…¥è´¦æœ¬å¦ä¸€æŠŠã€‚åœ¨transfer()æ–¹æ³•å†…éƒ¨ï¼Œæˆ‘ä»¬é¦–å…ˆå°è¯•é”å®šè½¬å‡ºè´¦æˆ·thisï¼ˆå…ˆæŠŠè½¬å‡ºè´¦æœ¬æ‹¿åˆ°æ‰‹ï¼‰ï¼Œç„¶åå°è¯•é”å®šè½¬å…¥è´¦æˆ·targetï¼ˆå†æŠŠè½¬å…¥è´¦æœ¬æ‹¿åˆ°æ‰‹ï¼‰ï¼Œåªæœ‰å½“ä¸¤è€…éƒ½æˆåŠŸæ—¶ï¼Œæ‰æ‰§è¡Œè½¬è´¦æ“ä½œã€‚è¿™ä¸ªé€»è¾‘å¯ä»¥å›¾å½¢åŒ–ä¸ºä¸‹å›¾è¿™ä¸ªæ ·å­ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/cb/55/cb18e672732ab76fc61d60bdf66bf855.png?wh=1142*640\" alt=\"\"></p><center><span class=\"reference\">ä¸¤ä¸ªè½¬è´¦æ“ä½œå¹¶è¡Œç¤ºæ„å›¾</span></center><p>è€Œè‡³äºè¯¦ç»†çš„ä»£ç å®ç°ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ç»è¿‡è¿™æ ·çš„ä¼˜åŒ–åï¼Œè´¦æˆ·A è½¬è´¦æˆ·Bå’Œè´¦æˆ·C è½¬è´¦æˆ·Dè¿™ä¸¤ä¸ªè½¬è´¦æ“ä½œå°±å¯ä»¥å¹¶è¡Œäº†ã€‚</p><pre><code>class Account {\n  private int balance;\n  // è½¬è´¦\n  void transfer(Account target, int amt){\n    // é”å®šè½¬å‡ºè´¦æˆ·\n    synchronized(this) {              \n      // é”å®šè½¬å…¥è´¦æˆ·\n      synchronized(target) {           \n        if (this.balance &gt; amt) {\n          this.balance -= amt;\n          target.balance += amt;\n        }\n      }\n    }\n  } \n}\n</code></pre><h2>æ²¡æœ‰å…è´¹çš„åˆé¤</h2><p>ä¸Šé¢çš„å®ç°çœ‹ä¸Šå»å¾ˆå®Œç¾ï¼Œå¹¶ä¸”ä¹Ÿç®—æ˜¯å°†é”ç”¨å¾—å‡ºç¥å…¥åŒ–äº†ã€‚ç›¸å¯¹äºç”¨Account.classä½œä¸ºäº’æ–¥é”ï¼Œé”å®šçš„èŒƒå›´å¤ªå¤§ï¼Œè€Œæˆ‘ä»¬é”å®šä¸¤ä¸ªè´¦æˆ·èŒƒå›´å°±å°å¤šäº†ï¼Œè¿™æ ·çš„é”ï¼Œä¸Šä¸€ç« æˆ‘ä»¬ä»‹ç»è¿‡ï¼Œå«<strong>ç»†ç²’åº¦é”</strong>ã€‚<strong>ä½¿ç”¨ç»†ç²’åº¦é”å¯ä»¥æé«˜å¹¶è¡Œåº¦ï¼Œæ˜¯æ€§èƒ½ä¼˜åŒ–çš„ä¸€ä¸ªé‡è¦æ‰‹æ®µ</strong>ã€‚</p><p>è¿™ä¸ªæ—¶å€™å¯èƒ½ä½ å·²ç»å¼€å§‹è­¦è§‰äº†ï¼Œä½¿ç”¨ç»†ç²’åº¦é”è¿™ä¹ˆç®€å•ï¼Œæœ‰è¿™æ ·çš„å¥½äº‹ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿè¦ä»˜å‡ºç‚¹ä»€ä¹ˆä»£ä»·å•Šï¼Ÿç¼–å†™å¹¶å‘ç¨‹åºå°±éœ€è¦è¿™æ ·æ—¶æ—¶åˆ»åˆ»ä¿æŒè°¨æ…ã€‚</p><p><strong>çš„ç¡®ï¼Œä½¿ç”¨ç»†ç²’åº¦é”æ˜¯æœ‰ä»£ä»·çš„ï¼Œè¿™ä¸ªä»£ä»·å°±æ˜¯å¯èƒ½ä¼šå¯¼è‡´æ­»é”ã€‚</strong></p><p>åœ¨è¯¦ç»†ä»‹ç»æ­»é”ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹ç°å®ä¸–ç•Œé‡Œçš„ä¸€ç§ç‰¹æ®Šåœºæ™¯ã€‚å¦‚æœæœ‰å®¢æˆ·æ‰¾æŸœå‘˜å¼ ä¸‰åšä¸ªè½¬è´¦ä¸šåŠ¡ï¼šè´¦æˆ·A è½¬è´¦æˆ·B 100å…ƒï¼Œæ­¤æ—¶å¦ä¸€ä¸ªå®¢æˆ·æ‰¾æŸœå‘˜æå››ä¹Ÿåšä¸ªè½¬è´¦ä¸šåŠ¡ï¼šè´¦æˆ·B è½¬è´¦æˆ·A 100 å…ƒï¼Œäºæ˜¯å¼ ä¸‰å’Œæå››åŒæ—¶éƒ½å»æ–‡ä»¶æ¶ä¸Šæ‹¿è´¦æœ¬ï¼Œè¿™æ—¶å€™æœ‰å¯èƒ½å‡‘å·§å¼ ä¸‰æ‹¿åˆ°äº†è´¦æœ¬Aï¼Œæå››æ‹¿åˆ°äº†è´¦æœ¬Bã€‚å¼ ä¸‰æ‹¿åˆ°è´¦æœ¬Aåå°±ç­‰ç€è´¦æœ¬Bï¼ˆè´¦æœ¬Bå·²ç»è¢«æå››æ‹¿èµ°ï¼‰ï¼Œè€Œæå››æ‹¿åˆ°è´¦æœ¬Båå°±ç­‰ç€è´¦æœ¬Aï¼ˆè´¦æœ¬Aå·²ç»è¢«å¼ ä¸‰æ‹¿èµ°ï¼‰ï¼Œä»–ä»¬è¦ç­‰å¤šä¹…å‘¢ï¼Ÿä»–ä»¬ä¼šæ°¸è¿œç­‰å¾…ä¸‹å»â€¦å› ä¸ºå¼ ä¸‰ä¸ä¼šæŠŠè´¦æœ¬Aé€å›å»ï¼Œæå››ä¹Ÿä¸ä¼šæŠŠè´¦æœ¬Bé€å›å»ã€‚æˆ‘ä»¬å§‘ä¸”ç§°ä¸ºæ­»ç­‰å§ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f2/88/f293dc0d92b7c8255bd0bc790fc2a088.png?wh=1142*640\" alt=\"\"></p><center><span class=\"reference\">è½¬è´¦ä¸šåŠ¡ä¸­çš„â€œæ­»ç­‰â€</span></center><p>ç°å®ä¸–ç•Œé‡Œçš„æ­»ç­‰ï¼Œå°±æ˜¯ç¼–ç¨‹é¢†åŸŸçš„æ­»é”äº†ã€‚<strong>æ­»é”</strong>çš„ä¸€ä¸ªæ¯”è¾ƒä¸“ä¸šçš„å®šä¹‰æ˜¯ï¼š<strong>ä¸€ç»„äº’ç›¸ç«äº‰èµ„æºçš„çº¿ç¨‹å› äº’ç›¸ç­‰å¾…ï¼Œå¯¼è‡´â€œæ°¸ä¹…â€é˜»å¡çš„ç°è±¡</strong>ã€‚</p><p>ä¸Šé¢è½¬è´¦çš„ä»£ç æ˜¯æ€ä¹ˆå‘ç”Ÿæ­»é”çš„å‘¢ï¼Ÿæˆ‘ä»¬å‡è®¾çº¿ç¨‹T1æ‰§è¡Œè´¦æˆ·Aè½¬è´¦æˆ·Bçš„æ“ä½œï¼Œè´¦æˆ·A.transfer(è´¦æˆ·B)ï¼›åŒæ—¶çº¿ç¨‹T2æ‰§è¡Œè´¦æˆ·Bè½¬è´¦æˆ·Açš„æ“ä½œï¼Œè´¦æˆ·B.transfer(è´¦æˆ·A)ã€‚å½“T1å’ŒT2åŒæ—¶æ‰§è¡Œå®Œâ‘ å¤„çš„ä»£ç æ—¶ï¼ŒT1è·å¾—äº†è´¦æˆ·Açš„é”ï¼ˆå¯¹äºT1ï¼Œthisæ˜¯è´¦æˆ·Aï¼‰ï¼Œè€ŒT2è·å¾—äº†è´¦æˆ·Bçš„é”ï¼ˆå¯¹äºT2ï¼Œthisæ˜¯è´¦æˆ·Bï¼‰ã€‚ä¹‹åT1å’ŒT2åœ¨æ‰§è¡Œâ‘¡å¤„çš„ä»£ç æ—¶ï¼ŒT1è¯•å›¾è·å–è´¦æˆ·Bçš„é”æ—¶ï¼Œå‘ç°è´¦æˆ·Bå·²ç»è¢«é”å®šï¼ˆè¢«T2é”å®šï¼‰ï¼Œæ‰€ä»¥T1å¼€å§‹ç­‰å¾…ï¼›T2åˆ™è¯•å›¾è·å–è´¦æˆ·Açš„é”æ—¶ï¼Œå‘ç°è´¦æˆ·Aå·²ç»è¢«é”å®šï¼ˆè¢«T1é”å®šï¼‰ï¼Œæ‰€ä»¥T2ä¹Ÿå¼€å§‹ç­‰å¾…ã€‚äºæ˜¯T1å’ŒT2ä¼šæ— æœŸé™åœ°ç­‰å¾…ä¸‹å»ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„æ­»é”äº†ã€‚</p><pre><code>class Account {\n  private int balance;\n  // è½¬è´¦\n  void transfer(Account target, int amt){\n    // é”å®šè½¬å‡ºè´¦æˆ·\n    synchronized(this){     â‘ \n      // é”å®šè½¬å…¥è´¦æˆ·\n      synchronized(target){ â‘¡\n        if (this.balance &gt; amt) {\n          this.balance -= amt;\n          target.balance += amt;\n        }\n      }\n    }\n  } \n}\n</code></pre><p>å…³äºè¿™ç§ç°è±¡ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å€ŸåŠ©èµ„æºåˆ†é…å›¾æ¥å¯è§†åŒ–é”çš„å ç”¨æƒ…å†µï¼ˆèµ„æºåˆ†é…å›¾æ˜¯ä¸ªæœ‰å‘å›¾ï¼Œå®ƒå¯ä»¥æè¿°èµ„æºå’Œçº¿ç¨‹çš„çŠ¶æ€ï¼‰ã€‚å…¶ä¸­ï¼Œèµ„æºç”¨æ–¹å½¢èŠ‚ç‚¹è¡¨ç¤ºï¼Œçº¿ç¨‹ç”¨åœ†å½¢èŠ‚ç‚¹è¡¨ç¤ºï¼›èµ„æºä¸­çš„ç‚¹æŒ‡å‘çº¿ç¨‹çš„è¾¹è¡¨ç¤ºçº¿ç¨‹å·²ç»è·å¾—è¯¥èµ„æºï¼Œçº¿ç¨‹æŒ‡å‘èµ„æºçš„è¾¹åˆ™è¡¨ç¤ºçº¿ç¨‹è¯·æ±‚èµ„æºï¼Œä½†å°šæœªå¾—åˆ°ã€‚è½¬è´¦å‘ç”Ÿæ­»é”æ—¶çš„èµ„æºåˆ†é…å›¾å°±å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸€ä¸ªâ€œå„æ®å±±å¤´æ­»ç­‰â€çš„å°´å°¬å±€é¢ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/82/1c/829d69c7d32c3ad1b89d89fc56017d1c.png?wh=1142*682\" alt=\"\"></p><center><span class=\"reference\">è½¬è´¦å‘ç”Ÿæ­»é”æ—¶çš„èµ„æºåˆ†é…å›¾</span></center><h2>å¦‚ä½•é¢„é˜²æ­»é”</h2><p>å¹¶å‘ç¨‹åºä¸€æ—¦æ­»é”ï¼Œä¸€èˆ¬æ²¡æœ‰ç‰¹åˆ«å¥½çš„æ–¹æ³•ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬åªèƒ½é‡å¯åº”ç”¨ã€‚å› æ­¤ï¼Œè§£å†³æ­»é”é—®é¢˜æœ€å¥½çš„åŠæ³•è¿˜æ˜¯è§„é¿æ­»é”ã€‚</p><p>é‚£å¦‚ä½•é¿å…æ­»é”å‘¢ï¼Ÿè¦é¿å…æ­»é”å°±éœ€è¦åˆ†ææ­»é”å‘ç”Ÿçš„æ¡ä»¶ï¼Œæœ‰ä¸ªå«Coffmançš„ç‰›äººæ—©å°±æ€»ç»“è¿‡äº†ï¼Œåªæœ‰ä»¥ä¸‹è¿™å››ä¸ªæ¡ä»¶éƒ½å‘ç”Ÿæ—¶æ‰ä¼šå‡ºç°æ­»é”ï¼š</p><blockquote></blockquote><ol>\n<li>äº’æ–¥ï¼Œå…±äº«èµ„æºXå’ŒYåªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹å ç”¨ï¼›</li>\n<li>å æœ‰ä¸”ç­‰å¾…ï¼Œçº¿ç¨‹T1å·²ç»å–å¾—å…±äº«èµ„æºXï¼Œåœ¨ç­‰å¾…å…±äº«èµ„æºYçš„æ—¶å€™ï¼Œä¸é‡Šæ”¾å…±äº«èµ„æºXï¼›</li>\n<li>ä¸å¯æŠ¢å ï¼Œå…¶ä»–çº¿ç¨‹ä¸èƒ½å¼ºè¡ŒæŠ¢å çº¿ç¨‹T1å æœ‰çš„èµ„æºï¼›</li>\n<li>å¾ªç¯ç­‰å¾…ï¼Œçº¿ç¨‹T1ç­‰å¾…çº¿ç¨‹T2å æœ‰çš„èµ„æºï¼Œçº¿ç¨‹T2ç­‰å¾…çº¿ç¨‹T1å æœ‰çš„èµ„æºï¼Œå°±æ˜¯å¾ªç¯ç­‰å¾…ã€‚</li>\n</ol><p>åè¿‡æ¥åˆ†æï¼Œ<strong>ä¹Ÿå°±æ˜¯è¯´åªè¦æˆ‘ä»¬ç ´åå…¶ä¸­ä¸€ä¸ªï¼Œå°±å¯ä»¥æˆåŠŸé¿å…æ­»é”çš„å‘ç”Ÿ</strong>ã€‚</p><p>å…¶ä¸­ï¼Œäº’æ–¥è¿™ä¸ªæ¡ä»¶æˆ‘ä»¬æ²¡æœ‰åŠæ³•ç ´åï¼Œå› ä¸ºæˆ‘ä»¬ç”¨é”ä¸ºçš„å°±æ˜¯äº’æ–¥ã€‚ä¸è¿‡å…¶ä»–ä¸‰ä¸ªæ¡ä»¶éƒ½æ˜¯æœ‰åŠæ³•ç ´åæ‰çš„ï¼Œåˆ°åº•å¦‚ä½•åšå‘¢ï¼Ÿ</p><ol>\n<li>å¯¹äºâ€œå ç”¨ä¸”ç­‰å¾…â€è¿™ä¸ªæ¡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰çš„èµ„æºï¼Œè¿™æ ·å°±ä¸å­˜åœ¨ç­‰å¾…äº†ã€‚</li>\n<li>å¯¹äºâ€œä¸å¯æŠ¢å â€è¿™ä¸ªæ¡ä»¶ï¼Œå ç”¨éƒ¨åˆ†èµ„æºçš„çº¿ç¨‹è¿›ä¸€æ­¥ç”³è¯·å…¶ä»–èµ„æºæ—¶ï¼Œå¦‚æœç”³è¯·ä¸åˆ°ï¼Œå¯ä»¥ä¸»åŠ¨é‡Šæ”¾å®ƒå æœ‰çš„èµ„æºï¼Œè¿™æ ·ä¸å¯æŠ¢å è¿™ä¸ªæ¡ä»¶å°±ç ´åæ‰äº†ã€‚</li>\n<li>å¯¹äºâ€œå¾ªç¯ç­‰å¾…â€è¿™ä¸ªæ¡ä»¶ï¼Œå¯ä»¥é æŒ‰åºç”³è¯·èµ„æºæ¥é¢„é˜²ã€‚æ‰€è°“æŒ‰åºç”³è¯·ï¼Œæ˜¯æŒ‡èµ„æºæ˜¯æœ‰çº¿æ€§é¡ºåºçš„ï¼Œç”³è¯·çš„æ—¶å€™å¯ä»¥å…ˆç”³è¯·èµ„æºåºå·å°çš„ï¼Œå†ç”³è¯·èµ„æºåºå·å¤§çš„ï¼Œè¿™æ ·çº¿æ€§åŒ–åè‡ªç„¶å°±ä¸å­˜åœ¨å¾ªç¯äº†ã€‚</li>\n</ol><p>æˆ‘ä»¬å·²ç»ä»ç†è®ºä¸Šè§£å†³äº†å¦‚ä½•é¢„é˜²æ­»é”ï¼Œé‚£å…·ä½“å¦‚ä½•ä½“ç°åœ¨ä»£ç ä¸Šå‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬å°±æ¥å°è¯•ç”¨ä»£ç å®è·µä¸€ä¸‹è¿™äº›ç†è®ºã€‚</p><h3>1. ç ´åå ç”¨ä¸”ç­‰å¾…æ¡ä»¶</h3><p>ä»ç†è®ºä¸Šè®²ï¼Œè¦ç ´åè¿™ä¸ªæ¡ä»¶ï¼Œå¯ä»¥ä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰èµ„æºã€‚åœ¨ç°å®ä¸–ç•Œé‡Œï¼Œå°±æ‹¿å‰é¢æˆ‘ä»¬æåˆ°çš„è½¬è´¦æ“ä½œæ¥è®²ï¼Œå®ƒéœ€è¦çš„èµ„æºæœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯è½¬å‡ºè´¦æˆ·ï¼Œå¦ä¸€ä¸ªæ˜¯è½¬å…¥è´¦æˆ·ï¼Œå½“è¿™ä¸¤ä¸ªè´¦æˆ·åŒæ—¶è¢«ç”³è¯·æ—¶ï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p><p>å¯ä»¥å¢åŠ ä¸€ä¸ªè´¦æœ¬ç®¡ç†å‘˜ï¼Œç„¶ååªå…è®¸è´¦æœ¬ç®¡ç†å‘˜ä»æ–‡ä»¶æ¶ä¸Šæ‹¿è´¦æœ¬ï¼Œä¹Ÿå°±æ˜¯è¯´æŸœå‘˜ä¸èƒ½ç›´æ¥åœ¨æ–‡ä»¶æ¶ä¸Šæ‹¿è´¦æœ¬ï¼Œå¿…é¡»é€šè¿‡è´¦æœ¬ç®¡ç†å‘˜æ‰èƒ½æ‹¿åˆ°æƒ³è¦çš„è´¦æœ¬ã€‚ä¾‹å¦‚ï¼Œå¼ ä¸‰åŒæ—¶ç”³è¯·è´¦æœ¬Aå’ŒBï¼Œè´¦æœ¬ç®¡ç†å‘˜å¦‚æœå‘ç°æ–‡ä»¶æ¶ä¸Šåªæœ‰è´¦æœ¬Aï¼Œè¿™ä¸ªæ—¶å€™è´¦æœ¬ç®¡ç†å‘˜æ˜¯ä¸ä¼šæŠŠè´¦æœ¬Aæ‹¿ä¸‹æ¥ç»™å¼ ä¸‰çš„ï¼Œåªæœ‰è´¦æœ¬Aå’ŒBéƒ½åœ¨çš„æ—¶å€™æ‰ä¼šç»™å¼ ä¸‰ã€‚è¿™æ ·å°±ä¿è¯äº†â€œä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰èµ„æºâ€ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/27/db/273af8c2ee60bd659f18673d2af005db.png?wh=1142*640\" alt=\"\"></p><center><span class=\"reference\">é€šè¿‡è´¦æœ¬ç®¡ç†å‘˜æ‹¿è´¦æœ¬</span></center><p>å¯¹åº”åˆ°ç¼–ç¨‹é¢†åŸŸï¼Œâ€œåŒæ—¶ç”³è¯·â€è¿™ä¸ªæ“ä½œæ˜¯ä¸€ä¸ªä¸´ç•ŒåŒºï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦ä¸€ä¸ªè§’è‰²ï¼ˆJavaé‡Œé¢çš„ç±»ï¼‰æ¥ç®¡ç†è¿™ä¸ªä¸´ç•ŒåŒºï¼Œæˆ‘ä»¬å°±æŠŠè¿™ä¸ªè§’è‰²å®šä¸ºAllocatorã€‚å®ƒæœ‰ä¸¤ä¸ªé‡è¦åŠŸèƒ½ï¼Œåˆ†åˆ«æ˜¯ï¼šåŒæ—¶ç”³è¯·èµ„æºapply()å’ŒåŒæ—¶é‡Šæ”¾èµ„æºfree()ã€‚è´¦æˆ·Account ç±»é‡Œé¢æŒæœ‰ä¸€ä¸ªAllocatorçš„å•ä¾‹ï¼ˆå¿…é¡»æ˜¯å•ä¾‹ï¼Œåªèƒ½ç”±ä¸€ä¸ªäººæ¥åˆ†é…èµ„æºï¼‰ã€‚å½“è´¦æˆ·Accountåœ¨æ‰§è¡Œè½¬è´¦æ“ä½œçš„æ—¶å€™ï¼Œé¦–å…ˆå‘AllocatoråŒæ—¶ç”³è¯·è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·è¿™ä¸¤ä¸ªèµ„æºï¼ŒæˆåŠŸåå†é”å®šè¿™ä¸¤ä¸ªèµ„æºï¼›å½“è½¬è´¦æ“ä½œæ‰§è¡Œå®Œï¼Œé‡Šæ”¾é”ä¹‹åï¼Œæˆ‘ä»¬éœ€é€šçŸ¥AllocatoråŒæ—¶é‡Šæ”¾è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·è¿™ä¸¤ä¸ªèµ„æºã€‚å…·ä½“çš„ä»£ç å®ç°å¦‚ä¸‹ã€‚</p><pre><code>class Allocator {\n  private List&lt;Object&gt; als =\n    new ArrayList&lt;&gt;();\n  // ä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰èµ„æº\n  synchronized boolean apply(\n    Object from, Object to){\n    if(als.contains(from) ||\n         als.contains(to)){\n      return false;  \n    } else {\n      als.add(from);\n      als.add(to);  \n    }\n    return true;\n  }\n  // å½’è¿˜èµ„æº\n  synchronized void free(\n    Object from, Object to){\n    als.remove(from);\n    als.remove(to);\n  }\n}\n\nclass Account {\n  // actråº”è¯¥ä¸ºå•ä¾‹\n  private Allocator actr;\n  private int balance;\n  // è½¬è´¦\n  void transfer(Account target, int amt){\n    // ä¸€æ¬¡æ€§ç”³è¯·è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·ï¼Œç›´åˆ°æˆåŠŸ\n    while(!actr.apply(this, target))\n      ï¼›\n    try{\n      // é”å®šè½¬å‡ºè´¦æˆ·\n      synchronized(this){              \n        // é”å®šè½¬å…¥è´¦æˆ·\n        synchronized(target){           \n          if (this.balance &gt; amt){\n            this.balance -= amt;\n            target.balance += amt;\n          }\n        }\n      }\n    } finally {\n      actr.free(this, target)\n    }\n  } \n}\n</code></pre><h3>2. ç ´åä¸å¯æŠ¢å æ¡ä»¶</h3><p>ç ´åä¸å¯æŠ¢å æ¡ä»¶çœ‹ä¸Šå»å¾ˆç®€å•ï¼Œæ ¸å¿ƒæ˜¯è¦èƒ½å¤Ÿä¸»åŠ¨é‡Šæ”¾å®ƒå æœ‰çš„èµ„æºï¼Œè¿™ä¸€ç‚¹synchronizedæ˜¯åšä¸åˆ°çš„ã€‚åŸå› æ˜¯synchronizedç”³è¯·èµ„æºçš„æ—¶å€™ï¼Œå¦‚æœç”³è¯·ä¸åˆ°ï¼Œçº¿ç¨‹ç›´æ¥è¿›å…¥é˜»å¡çŠ¶æ€äº†ï¼Œè€Œçº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œå•¥éƒ½å¹²ä¸äº†ï¼Œä¹Ÿé‡Šæ”¾ä¸äº†çº¿ç¨‹å·²ç»å æœ‰çš„èµ„æºã€‚</p><p>ä½ å¯èƒ½ä¼šè´¨ç–‘ï¼Œâ€œJavaä½œä¸ºæ’è¡Œæ¦œç¬¬ä¸€çš„è¯­è¨€ï¼Œè¿™éƒ½è§£å†³ä¸äº†ï¼Ÿâ€ä½ çš„æ€€ç–‘å¾ˆæœ‰é“ç†ï¼ŒJavaåœ¨è¯­è¨€å±‚æ¬¡ç¡®å®æ²¡æœ‰è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸è¿‡åœ¨SDKå±‚é¢è¿˜æ˜¯è§£å†³äº†çš„ï¼Œjava.util.concurrentè¿™ä¸ªåŒ…ä¸‹é¢æä¾›çš„Lockæ˜¯å¯ä»¥è½»æ¾è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚å…³äºè¿™ä¸ªè¯é¢˜ï¼Œå’±ä»¬åé¢ä¼šè¯¦ç»†è®²ã€‚</p><h3>3. ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶</h3><p>ç ´åè¿™ä¸ªæ¡ä»¶ï¼Œéœ€è¦å¯¹èµ„æºè¿›è¡Œæ’åºï¼Œç„¶åæŒ‰åºç”³è¯·èµ„æºã€‚è¿™ä¸ªå®ç°éå¸¸ç®€å•ï¼Œæˆ‘ä»¬å‡è®¾æ¯ä¸ªè´¦æˆ·éƒ½æœ‰ä¸åŒçš„å±æ€§ idï¼Œè¿™ä¸ª id å¯ä»¥ä½œä¸ºæ’åºå­—æ®µï¼Œç”³è¯·çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§ä»å°åˆ°å¤§çš„é¡ºåºæ¥ç”³è¯·ã€‚æ¯”å¦‚ä¸‹é¢ä»£ç ä¸­ï¼Œâ‘ ~â‘¥å¤„çš„ä»£ç å¯¹è½¬å‡ºè´¦æˆ·ï¼ˆthisï¼‰å’Œè½¬å…¥è´¦æˆ·ï¼ˆtargetï¼‰æ’åºï¼Œç„¶åæŒ‰ç…§åºå·ä»å°åˆ°å¤§çš„é¡ºåºé”å®šè´¦æˆ·ã€‚è¿™æ ·å°±ä¸å­˜åœ¨â€œå¾ªç¯â€ç­‰å¾…äº†ã€‚</p><pre><code>class Account {\n  private int id;\n  private int balance;\n  // è½¬è´¦\n  void transfer(Account target, int amt){\n    Account left = this        â‘ \n    Account right = target;    â‘¡\n    if (this.id &gt; target.id) { â‘¢\n      left = target;           â‘£\n      right = this;            â‘¤\n    }                          â‘¥\n    // é”å®šåºå·å°çš„è´¦æˆ·\n    synchronized(left){\n      // é”å®šåºå·å¤§çš„è´¦æˆ·\n      synchronized(right){ \n        if (this.balance &gt; amt){\n          this.balance -= amt;\n          target.balance += amt;\n        }\n      }\n    }\n  } \n}\n</code></pre><h2>æ€»ç»“</h2><p>å½“æˆ‘ä»¬åœ¨ç¼–ç¨‹ä¸–ç•Œé‡Œé‡åˆ°é—®é¢˜æ—¶ï¼Œåº”ä¸å±€é™äºå½“ä¸‹ï¼Œå¯ä»¥æ¢ä¸ªæ€è·¯ï¼Œå‘ç°å®ä¸–ç•Œè¦ç­”æ¡ˆï¼Œ<strong>åˆ©ç”¨ç°å®ä¸–ç•Œçš„æ¨¡å‹æ¥æ„æ€è§£å†³æ–¹æ¡ˆ</strong>ï¼Œè¿™æ ·å¾€å¾€èƒ½å¤Ÿè®©æˆ‘ä»¬çš„æ–¹æ¡ˆæ›´å®¹æ˜“ç†è§£ï¼Œä¹Ÿæ›´èƒ½å¤Ÿçœ‹æ¸…æ¥šé—®é¢˜çš„æœ¬è´¨ã€‚</p><p>ä½†æ˜¯ç°å®ä¸–ç•Œçš„æ¨¡å‹æœ‰äº›ç»†èŠ‚å¾€å¾€ä¼šè¢«æˆ‘ä»¬å¿½è§†ã€‚å› ä¸ºåœ¨ç°å®ä¸–ç•Œé‡Œï¼Œäººå¤ªæ™ºèƒ½äº†ï¼Œä»¥è‡´æœ‰äº›ç»†èŠ‚å®åœ¨æ˜¯æ˜¾å¾—å¤ªä¸é‡è¦äº†ã€‚åœ¨è½¬è´¦çš„æ¨¡å‹ä¸­ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆä¼šå¿½è§†æ­»é”é—®é¢˜å‘¢ï¼ŸåŸå› ä¸»è¦æ˜¯åœ¨ç°å®ä¸–ç•Œï¼Œæˆ‘ä»¬ä¼šäº¤æµï¼Œå¹¶ä¸”ä¼šå¾ˆæ™ºèƒ½åœ°äº¤æµã€‚è€Œç¼–ç¨‹ä¸–ç•Œé‡Œï¼Œä¸¤ä¸ªçº¿ç¨‹æ˜¯ä¸ä¼šæ™ºèƒ½åœ°äº¤æµçš„ã€‚æ‰€ä»¥åœ¨åˆ©ç”¨ç°å®æ¨¡å‹å»ºæ¨¡çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜è¦ä»”ç»†å¯¹æ¯”ç°å®ä¸–ç•Œå’Œç¼–ç¨‹ä¸–ç•Œé‡Œçš„å„è§’è‰²ä¹‹é—´çš„å·®å¼‚ã€‚</p><p>æˆ‘ä»¬ä»Šå¤©è¿™ä¸€ç¯‡æ–‡ç« ä¸»è¦è®²äº†<strong>ç”¨ç»†ç²’åº¦é”æ¥é”å®šå¤šä¸ªèµ„æºæ—¶ï¼Œè¦æ³¨æ„æ­»é”çš„é—®é¢˜</strong>ã€‚è¿™ä¸ªå°±éœ€è¦ä½ èƒ½æŠŠå®ƒå¼ºåŒ–ä¸ºä¸€ä¸ªæ€ç»´å®šåŠ¿ï¼Œé‡åˆ°è¿™ç§åœºæ™¯ï¼Œé©¬ä¸Šæƒ³åˆ°å¯èƒ½å­˜åœ¨æ­»é”é—®é¢˜ã€‚å½“ä½ çŸ¥é“é£é™©ä¹‹åï¼Œæ‰æœ‰æœºä¼šè°ˆå¦‚ä½•é¢„é˜²å’Œé¿å…ï¼Œå› æ­¤ï¼Œ<strong>è¯†åˆ«å‡ºé£é™©å¾ˆé‡è¦</strong>ã€‚</p><p>é¢„é˜²æ­»é”ä¸»è¦æ˜¯ç ´åä¸‰ä¸ªæ¡ä»¶ä¸­çš„ä¸€ä¸ªï¼Œæœ‰äº†è¿™ä¸ªæ€è·¯åï¼Œå®ç°å°±ç®€å•äº†ã€‚ä½†ä»éœ€æ³¨æ„çš„æ˜¯ï¼Œæœ‰æ—¶å€™é¢„é˜²æ­»é”æˆæœ¬ä¹Ÿæ˜¯å¾ˆé«˜çš„ã€‚ä¾‹å¦‚ä¸Šé¢è½¬è´¦é‚£ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬ç ´åå ç”¨ä¸”ç­‰å¾…æ¡ä»¶çš„æˆæœ¬å°±æ¯”ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶çš„æˆæœ¬é«˜ï¼Œç ´åå ç”¨ä¸”ç­‰å¾…æ¡ä»¶ï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯é”äº†æ‰€æœ‰çš„è´¦æˆ·ï¼Œè€Œä¸”è¿˜æ˜¯ç”¨äº†æ­»å¾ªç¯ <code>while(!actr.apply(this, target));</code>æ–¹æ³•ï¼Œä¸è¿‡å¥½åœ¨apply()è¿™ä¸ªæ–¹æ³•åŸºæœ¬ä¸è€—æ—¶ã€‚ åœ¨è½¬è´¦è¿™ä¸ªä¾‹å­ä¸­ï¼Œç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶å°±æ˜¯æˆæœ¬æœ€ä½çš„ä¸€ä¸ªæ–¹æ¡ˆã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬åœ¨é€‰æ‹©å…·ä½“æ–¹æ¡ˆçš„æ—¶å€™ï¼Œè¿˜éœ€è¦<strong>è¯„ä¼°ä¸€ä¸‹æ“ä½œæˆæœ¬ï¼Œä»ä¸­é€‰æ‹©ä¸€ä¸ªæˆæœ¬æœ€ä½çš„æ–¹æ¡ˆ</strong>ã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>æˆ‘ä»¬ä¸Šé¢æåˆ°ï¼šç ´åå ç”¨ä¸”ç­‰å¾…æ¡ä»¶ï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯é”äº†æ‰€æœ‰çš„è´¦æˆ·ï¼Œè€Œä¸”è¿˜æ˜¯ç”¨äº†æ­»å¾ªç¯ <code>while(!actr.apply(this, target));</code>è¿™ä¸ªæ–¹æ³•ï¼Œé‚£å®ƒæ¯”synchronized(Account.class)æœ‰æ²¡æœ‰æ€§èƒ½ä¼˜åŠ¿å‘¢ï¼Ÿ</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºä¸æˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºè®°å½•ä½ çš„æ€è€ƒè¿‡ç¨‹ã€‚æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p><p></p>","comments":[{"had_liked":false,"id":74019,"user_name":"æé±¼çš„æ¬ç –å¥‡","can_delete":false,"product_type":"c1","uid":1021539,"ip_address":"","ucode":"2FD194C4DA26E5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/96/63/7eb32c9b.jpg","comment_is_top":false,"comment_ctime":1552065517,"is_pvip":false,"replies":[{"id":"27037","content":"è¿˜çœŸæ˜¯è¿™æ ·å•Šï¼<br>","user_name":"ä½œè€…å›å¤","comment_id":74019,"uid":"1269969","ip_address":"","utype":1,"ctime":1552091804,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":16,"race_medal":0,"score":"607142454253","product_id":100023901,"comment_content":"synchronized(Account.class) é”äº†Accountç±»ç›¸å…³çš„æ‰€æœ‰æ“ä½œã€‚ç›¸å½“äºæ–‡ä¸­è¯´çš„åŒ…åœºäº†ï¼Œåªè¦ä¸Accountæœ‰å…³è”ï¼Œé€šé€šéœ€è¦ç­‰å¾…å½“å‰çº¿ç¨‹æ“ä½œå®Œæˆã€‚whileæ­»å¾ªç¯çš„æ–¹å¼åªé”å®šäº†å½“å‰æ“ä½œçš„ä¸¤ä¸ªç›¸å…³çš„å¯¹è±¡ã€‚ä¸¤ç§å½±å“åˆ°çš„èŒƒå›´ä¸åŒã€‚","like_count":141,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442389,"discussion_content":"è¿˜çœŸæ˜¯è¿™æ ·å•Šï¼\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552091804,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1141682,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6b/b2/05c4c057.jpg","nickname":"Solarex","note":"","ucode":"1C866A79956896","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":223,"discussion_content":"whileæ­»å¾ªç¯é”çš„æ˜¯Allocatorçš„å•ä¾‹å¯¹è±¡å®ä¾‹ï¼Œsynchronizedé”çš„æ˜¯Account.classï¼Œé”çš„ç²’åº¦æ„Ÿè§‰åœ¨åŒä¸€JVMä¸Šå·®ä¸å¤šå•Šï¼Ÿ","likes_number":11,"is_delete":false,"is_hidden":false,"ctime":1561306441,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1018809,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/b9/abb7bfe3.jpg","nickname":"å­™æ¸…é†’","note":"","ucode":"28FF7A3BD8221F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1141682,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6b/b2/05c4c057.jpg","nickname":"Solarex","note":"","ucode":"1C866A79956896","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":133877,"discussion_content":"ä½†æ˜¯åªæ˜¯åœ¨è½¬è´¦çš„æ—¶å€™æ‰å»è·å¾—Allocatorå¯¹è±¡é”ï¼Œå…¶ä»–æ“ä½œæ²¡æœ‰å»è·å–Allocatorå¯¹è±¡é”ã€‚","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1578997930,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":223,"ip_address":""},"score":133877,"extra":""},{"author":{"id":1043789,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ed/4d/1d1a1a00.jpg","nickname":"magict4","note":"","ucode":"CB6F063D881AAC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1018809,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/b9/abb7bfe3.jpg","nickname":"å­™æ¸…é†’","note":"","ucode":"28FF7A3BD8221F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542460,"discussion_content":"å…¶ä»–æ“ä½œæ²¡æœ‰å»è·å–Allocatorå¯¹è±¡é” -&gt; è¿™æ ·ä¼šä¸ä¼šæ›´åŠ å±é™©ï¼Ÿå…¶ä»–æ“ä½œï¼Œä¾‹å¦‚å–æ¬¾ï¼Œå¦‚æœæ²¡æœ‰é€šè¿‡ Allocator è·å–é”ï¼Œä¼šä¸ä¼šä¸è½¬è´¦æ“ä½œäº§ç”Ÿçº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640756592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":133877,"ip_address":""},"score":542460,"extra":""}]},{"author":{"id":1702117,"avatar":"https://static001.geekbang.org/account/avatar/00/19/f8/e5/119d5c15.jpg","nickname":"å±±æµ·","note":"","ucode":"77FA9967E58FA3","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348503,"discussion_content":"æˆ‘è§‰å¾—Allocatorè¿™ä¸ªå¯¹è±¡æ˜¯å…¨å±€çš„ï¼Œåœ¨æ‰§è¡Œè¿™ä¸ªapplyæ—¶è¿˜æ˜¯å…¨å±€ä¸²è¡Œï¼Œåªæ˜¯è¿™é‡Œçš„é€»è¾‘éƒ½åœ¨å†…å­˜ä¸­è¿›è¡Œï¼Œæ¯”è¾ƒå¿«ã€‚ ä½†æ˜¯Accountè¿™ä¸ªæ“ä½œåœ¨çœŸæ­£éƒ½ä¸šåŠ¡é€»è¾‘ä¸­å¯èƒ½æ¶‰åŠåˆ°æ•°æ®åº“æ“ä½œï¼Œæ—¶é—´å°±æ¯”è¾ƒé•¿äº†ã€‚æ‰€ä»¥ä»–ä»¬åªæ˜¯æŒæœ‰é”æ—¶é—´ç¼©çŸ­äº†","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1612604759,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1786788,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJINWmZjibZA4eibL31PzMDia2yt1icOc9QnFWwTKuXbWTFCAZaMgCrqO7Oa5sZka81pHoibPgSM8nCjibA/132","nickname":"è¶…èƒ½åŠ›å…ˆç”Ÿ","note":"","ucode":"C042DB628CAA86","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":107721,"discussion_content":"ä½†æ˜¯allocatoråªæœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥æ‰€æœ‰è´¦å·è¿˜æ˜¯è¢«é”å®šäº†å•Š","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1577602264,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1756562,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/92/f75a00dd.jpg","nickname":"ã€è½å¶ä¸ºä½ èˆ","note":"","ucode":"A196460774A33F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1786788,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJINWmZjibZA4eibL31PzMDia2yt1icOc9QnFWwTKuXbWTFCAZaMgCrqO7Oa5sZka81pHoibPgSM8nCjibA/132","nickname":"è¶…èƒ½åŠ›å…ˆç”Ÿ","note":"","ucode":"C042DB628CAA86","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":228521,"discussion_content":"Aå‘Bè½¬è´¦ï¼ŒCå‘Dè½¬è´¦ï¼Œsynchronized(Account.class)è¿™ä¸¤ä¸ªæ“ä½œåªèƒ½ä¸²è¡Œï¼ŒAllocator æ‹¿é”æ—¶æ˜¯ä¸²è¡Œï¼Œä½†æ˜¯è½¬è´¦è¿‡ç¨‹æ˜¯å¯ä»¥å¹¶è¡Œçš„","likes_number":24,"is_delete":false,"is_hidden":false,"ctime":1586541010,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":107721,"ip_address":""},"score":228521,"extra":""},{"author":{"id":1987202,"avatar":"","nickname":"Geek_783cc7","note":"","ucode":"C43F76B1978FA9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1756562,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/92/f75a00dd.jpg","nickname":"ã€è½å¶ä¸ºä½ èˆ","note":"","ucode":"A196460774A33F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":322337,"discussion_content":"æ˜ç™½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604726315,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":228521,"ip_address":""},"score":322337,"extra":""}]},{"author":{"id":1032755,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c2/33/ccbf2045.jpg","nickname":"sta","note":"","ucode":"D840070850EA5B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351998,"discussion_content":"æœ‰æ€§èƒ½ä¼˜åŠ¿ï¼Œä¸¤ä¸ªéƒ½æ˜¯å…¨å±€é”ã€‚ä¸€ä¸ªæ˜¯åœ¨whileå¾ªç¯æ—¶ï¼Œå³è·å–èµ„æºæ—¶ï¼Œæ˜¯å…¨å±€çš„ä¸²è¡Œæ‰§è¡Œï¼›ä¸€ä¸ªæ˜¯åœ¨æ‰§è¡Œè½¬è´¦æ“ä½œçš„æ—¶å€™ä¸²è¡Œæ‰§è¡Œã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè·å–èµ„æºæ“ä½œæ¯”è½¬è´¦æ‰§è¡Œæ“ä½œè€—æ—¶ä¼šæ›´çŸ­ï¼Œæ‰€ä»¥å•ä¸ªä¸²è¡Œæ‰§è¡Œçš„æ—¶é—´ä¼šæ›´çŸ­ï¼Œæ€»çš„ä¸²è¡Œæ•ˆç‡å°±ä¼šæ›´é«˜ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1614562365,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2192295,"avatar":"https://static001.geekbang.org/account/avatar/00/21/73/a7/c8ea0a62.jpg","nickname":"åŒ—äº¬å°å¦","note":"","ucode":"5A327F761E2DFA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337331,"discussion_content":"ä¸å¯¹ï¼Œæ­»å¾ªç¯çš„ä»£ç ä¸­è¦è·å–Allocatorå•ä¾‹å›¾é”ï¼Œè¿™ä¸ªå•ä¾‹æ˜¯å…¨å±€ç›¸å…³çš„ï¼Œå› æ­¤è¿™ç§æ–¹å¼å’Œè·å–Accountç±»å¯¹è±¡çš„é”åŸºæœ¬æ²¡åŒºåˆ«","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1608876759,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2139604,"avatar":"","nickname":"æˆç”µå¸…æ‰","note":"","ucode":"DDE757138F41D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2192295,"avatar":"https://static001.geekbang.org/account/avatar/00/21/73/a7/c8ea0a62.jpg","nickname":"åŒ—äº¬å°å¦","note":"","ucode":"5A327F761E2DFA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347540,"discussion_content":"æƒ³äº†ä¸€ä¸‹ï¼Œè¿˜æ˜¯æœ‰åŒºåˆ«çš„ï¼ŒAccountå’Œå•ä¾‹è™½ç„¶éƒ½æ˜¯å…¨å±€çš„ï¼Œä½†æ˜¯Accounté˜»å¡åœ¨ä¸šåŠ¡ä¸Šï¼Œå•ä¾‹é˜»å¡åœ¨æ ‡è®°ä¸Šï¼ˆæ˜¯å¦æˆåŠŸåŠ é”çš„æ ‡è®°ï¼‰ï¼Œå¦‚æœä¸šåŠ¡ä»£ç æ‰§è¡Œæ—¶é—´é•¿çš„è¯ï¼Œaccountçš„æ€§èƒ½å¾ˆä½ï¼Œä½†æ˜¯å•ä¾‹çš„è¿™ç§é˜»å¡å¾ˆçŸ­","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1612252463,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":337331,"ip_address":""},"score":347540,"extra":""},{"author":{"id":1433737,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e0/89/c3db1efc.jpg","nickname":"é’æ¢…ç…®é©¬","note":"","ucode":"529AEBCF25E828","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2139604,"avatar":"","nickname":"æˆç”µå¸…æ‰","note":"","ucode":"DDE757138F41D2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534152,"discussion_content":"æƒ³åˆ°ä¸€ä¸ªä¸æ°å½“çš„ä¾‹å­ã€‚\nå‡å¦‚è¯´å› ä¸ºç–«æƒ…ï¼ŒåŠ¨ç‰©å›­åªèƒ½çª—å£è´­ç¥¨ï¼Œå¹¶ä¸”åªå¼€æ”¾ä¸€ä¸ªçª—å£ï¼Œå¤§å®¶éƒ½æ’é˜Ÿã€‚è¿™å°±æ˜¯class çš„é”ã€‚åæ¥å› ä¸ºå¤ªæ…¢ï¼Œå°±å•ç‹¬è®¾ç½®äº†ä¸€ä¸ªçœ‹å¥åº·ç çš„å°å§å§ï¼ŒäºŒç»´ç é€šè¿‡åå¼€æ”¾åä¸ªçª—å£ã€‚è™½ç„¶ä¹Ÿè¦æ’é˜Ÿï¼Œä½†æ˜¯é€Ÿåº¦å¯èƒ½å°±ä¼šå¿«å¾ˆå¤šã€‚å½“ç„¶è¦æ˜¯è¿™ä¸ªå°å§å§æ²‰è¿·èŠå¤©æ— æ³•è‡ªæ‹”ï¼Œå¯èƒ½è¿˜ä¸å¦‚ä¸€ä¸ªçª—å£å¿«ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1638109574,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":347540,"ip_address":""},"score":534152,"extra":""}]},{"author":{"id":1619082,"avatar":"","nickname":"Geek_b77477","note":"","ucode":"9B27C9F12122CB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3628,"discussion_content":"æˆ‘ä¹Ÿæ„Ÿè§‰ä¸¤è€…ç²’åº¦å·®ä¸å¤š","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1564647530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1063308,"avatar":"https://static001.geekbang.org/account/avatar/00/10/39/8c/089525aa.jpg","nickname":"å°ä¹™å“¥","note":"","ucode":"C77E79BEA0C325","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292176,"discussion_content":"æœ¬è´¨æ˜¯é”çš„èŒƒå›´ä¸ä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595130339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1175383,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ef/57/935c0ea1.jpg","nickname":"0+1","note":"","ucode":"03E5A11F8A3D37","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":283559,"discussion_content":"åœ¨å¹¶å‘æ¯”è¾ƒå°çš„æ—¶å€™whileè¿™ç§è‡ªæ—‹æ–¹å¼å¯èƒ½æ•ˆç‡é«˜ç‚¹ï¼Œå¹¶å‘å¤§äº†å°±æ²¡syncæ•ˆç‡é«˜äº†ï¼Œéƒ½åœ¨é‚£whileäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592296911,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1174199,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ea/b7/1a18a39d.jpg","nickname":"5-åˆ˜æ–°æ³¢(Arvin)","note":"","ucode":"DBD135D2587A93","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4173,"discussion_content":"ç²¾è¾Ÿï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565184627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74091,"user_name":"Tony Du","can_delete":false,"product_type":"c1","uid":1001661,"ip_address":"","ucode":"F5FCC400E615EA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/bd/6c7d4230.jpg","comment_is_top":false,"comment_ctime":1552102058,"is_pvip":false,"replies":[{"id":"27086","content":"ä½ è€ƒè™‘çš„å¾ˆå‘¨åˆ°ï¼ğŸ‘<br>åŠ è¶…æ—¶åœ¨å®é™…é¡¹ç›®ä¸­éå¸¸é‡è¦ï¼","user_name":"ä½œè€…å›å¤","comment_id":74091,"uid":"1269969","ip_address":"","utype":1,"ctime":1552111203,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":5,"race_medal":0,"score":"469703537322","product_id":100023901,"comment_content":"whileå¾ªç¯æ˜¯ä¸æ˜¯åº”è¯¥æœ‰ä¸ªtimeoutï¼Œé¿å…ä¸€ç›´é˜»å¡ä¸‹å»ï¼Ÿ","like_count":109,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442437,"discussion_content":"ä½ è€ƒè™‘çš„å¾ˆå‘¨åˆ°ï¼ğŸ‘\nåŠ è¶…æ—¶åœ¨å®é™…é¡¹ç›®ä¸­éå¸¸é‡è¦ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552111203,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1135912,"avatar":"https://static001.geekbang.org/account/avatar/00/11/55/28/31b0cf2f.jpg","nickname":"é»‘è‰²æ¯›è¡£","note":"","ucode":"FF7E235F91BA5C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38575,"discussion_content":"æˆ‘è§‰å¾—è¿™ä¸ª while æœ‰ç§ CAS çš„è®¾è®¡ç†å¿µï¼Œå¤±è´¥é‡è¯•","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1571805388,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2280894,"avatar":"","nickname":"Geek_781cba","note":"","ucode":"E419728928D36E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336210,"discussion_content":"è¿™ä¸å°±æ˜¯ä¼ è¯´ä¸­çš„è‡ªæ—‹é”äº†å—","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1608530485,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1135912,"avatar":"https://static001.geekbang.org/account/avatar/00/11/55/28/31b0cf2f.jpg","nickname":"é»‘è‰²æ¯›è¡£","note":"","ucode":"FF7E235F91BA5C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38573,"discussion_content":"ä¸ä¼šä¸€ç›´é˜»å¡å§ï¼Œé˜¶æ®µæ€§é˜»ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1571805335,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2455382,"avatar":"https://static001.geekbang.org/account/avatar/00/25/77/56/dd035ec9.jpg","nickname":"è¿½é€å¤ªé˜³çš„çŒªå“¼å“¼","note":"","ucode":"9E77CB1D8CC4B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1135912,"avatar":"https://static001.geekbang.org/account/avatar/00/11/55/28/31b0cf2f.jpg","nickname":"é»‘è‰²æ¯›è¡£","note":"","ucode":"FF7E235F91BA5C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":355737,"discussion_content":"åªæ˜¯å„è‡ªçš„çº¿ç¨‹é˜»å¡äº†ï¼Œå•ä¾‹é‚£é‡Œå¹¶ä¸ä¼šï¼Œæ‹¿ä¸åˆ°å°±å‡ºå»ä¸´ç•ŒåŒºï¼Œç»§ç»­ä¸‹ä¸€è½®æŠ¢é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615472527,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":38573,"ip_address":""},"score":355737,"extra":""}]}]},{"had_liked":false,"id":75402,"user_name":"å¼ ç«‹å","can_delete":false,"product_type":"c1","uid":1231713,"ip_address":"","ucode":"173B938DD9478A","user_header":"https://static001.geekbang.org/account/avatar/00/12/cb/61/b62d8a3b.jpg","comment_is_top":false,"comment_ctime":1552391672,"is_pvip":false,"replies":[{"id":"27468","content":"è¿™ä¸ªæ–¹æ¡ˆæœ€ç®€å•<br>","user_name":"ä½œè€…å›å¤","comment_id":75402,"uid":"1269969","ip_address":"","utype":1,"ctime":1552393718,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":6,"race_medal":0,"score":"396689382904","product_id":100023901,"comment_content":"ä¹‹å‰é‡åˆ°æ­»é”ï¼Œæˆ‘å°±æ˜¯ç”¨èµ„æºidçš„ä»å°åˆ°å¤§çš„é¡ºåºå»ç”³è¯·é”è§£å†³çš„","like_count":92,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442883,"discussion_content":"è¿™ä¸ªæ–¹æ¡ˆæœ€ç®€å•\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552393718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1494622,"avatar":"https://static001.geekbang.org/account/avatar/00/16/ce/5e/b103d538.jpg","nickname":"å¤§æ˜çŒ©","note":"","ucode":"61D330B42AE3C4","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393813,"discussion_content":"çœ‹å¤´åƒå°±æ˜¯é«˜æ‰‹","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1631609483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1174199,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ea/b7/1a18a39d.jpg","nickname":"5-åˆ˜æ–°æ³¢(Arvin)","note":"","ucode":"DBD135D2587A93","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4174,"discussion_content":"è°ç‰Œå¤§ï¼Œè°å…ˆèµ°","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1565184876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1393856,"avatar":"https://static001.geekbang.org/account/avatar/00/15/44/c0/a39672a3.jpg","nickname":"ç‹è€…ä¹‹é’»","note":"","ucode":"D877B496829D1A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590882,"discussion_content":"æ€ä¹ˆç”¨èµ„æºå¤§å°idç”³è¯·é”ï¼Œæ±‚è§£ç­”ï¼Œæœ€å¥½ä¸Šä»£ç ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666149333,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3071431,"avatar":"https://static001.geekbang.org/account/avatar/00/2e/dd/c7/9523b3dc.jpg","nickname":"æœˆå½±","note":"","ucode":"39D5315F2365A8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587842,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663317595,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1818343,"avatar":"","nickname":"åˆ˜åŒé’","note":"","ucode":"84B62DF8BC61FB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":280198,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591513517,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74104,"user_name":"Demon.Lee","can_delete":false,"product_type":"c1","uid":1052859,"ip_address":"","ucode":"7F0E5493A8E345","user_header":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","comment_is_top":false,"comment_ctime":1552104484,"is_pvip":false,"replies":[{"id":"27075","content":"ä½ å‘ç°äº†ä¸ªå¤§bug!æ„Ÿè°¢æ„Ÿè°¢ï¼ï¼ï¼æˆ‘è¿™å°±ä¿®æ”¹ä¸€ä¸‹å•Š<br>","user_name":"ä½œè€…å›å¤","comment_id":74104,"uid":"1269969","ip_address":"","utype":1,"ctime":1552107501,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":4,"race_medal":1,"score":"323674651684","product_id":100023901,"comment_content":"while(actr.apply(this, target)); --&gt; while(!actr.apply(this, target));<br>æˆ‘æ„Ÿè§‰åº”è¯¥æ˜¯è¿™æ ·ï¼Œè€å¸ˆï¼Œæˆ‘ç†è§£é”™äº†ï¼Ÿ","like_count":75,"discussions":[{"author":{"id":1018706,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/52/6659dc1b.jpg","nickname":"é»‘ç±³","note":"","ucode":"E7DBEA7867862A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391107,"discussion_content":"å“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630296754,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2583432,"avatar":"https://static001.geekbang.org/account/avatar/00/27/6b/88/6315d04c.jpg","nickname":"Geek_Black","note":"","ucode":"8CFB324D281FC5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387788,"discussion_content":"ä¸ºä»€ä¹ˆæ˜¯éå•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628414694,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1758825,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d6/69/f59d4f6f.jpg","nickname":"Ryan","note":"","ucode":"387955FD53E98C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2583432,"avatar":"https://static001.geekbang.org/account/avatar/00/27/6b/88/6315d04c.jpg","nickname":"Geek_Black","note":"","ucode":"8CFB324D281FC5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412998,"discussion_content":"æœªè·å–åˆ°èµ„æºå°±ä¸€ç›´è½¬ï¼Œè·å–åˆ°äº†æ‰èƒ½å¾€ä¸‹èµ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636355837,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":387788,"ip_address":""},"score":412998,"extra":""}]},{"author":{"id":1702511,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKUVVjoibAO1cWoM0VcOcbibT0O9bbOvgjJmn6fWyKRNWgrZsOuj7mSMSubFXknOxRP3ozoicdwp1zibw/132","nickname":"è¡¡å±±å¼Ÿå­","note":"","ucode":"5C635588688A88","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216694,"discussion_content":"666","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585477871,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74265,"user_name":"å‡ å­—å‡‰äº†ç§‹ä¸¶","can_delete":false,"product_type":"c1","uid":1178503,"ip_address":"","ucode":"B1B7A3726AD4E5","user_header":"https://static001.geekbang.org/account/avatar/00/11/fb/87/9c2dc94f.jpg","comment_is_top":false,"comment_ctime":1552149266,"is_pvip":false,"replies":[{"id":"27165","content":"å®é™…å¼€å‘ä¸­éƒ½æ˜¯ç”¨æ•°æ®åº“äº‹åŠ¡+ä¹è§‚é”çš„æ–¹å¼è§£å†³çš„ã€‚è¿™ä¸ªå°±æ˜¯ä¸ªä¾‹å­ï¼Œä¸ºäº†è¯´æ˜æ­»é”æ˜¯æ€ä¹ˆå›äº‹ï¼Œä»¥åŠæ­»é”é—®é¢˜æ€ä¹ˆè§£å†³ã€‚","user_name":"ä½œè€…å›å¤","comment_id":74265,"uid":"1269969","ip_address":"","utype":1,"ctime":1552189724,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":4,"race_medal":0,"score":"254955219730","product_id":100023901,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸€ä¸‹ï¼Œåœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œaccountå¯¹è±¡åº”è¯¥æ˜¯ä»æ•°æ®åº“ä¸­æŸ¥è¯¢å‡ºæ¥çš„å§ï¼Œå‡å¦‚Aè½¬Bï¼ŒCè½¬Bä¸€èµ·æ‰§è¡Œï¼Œé‚£Bçš„accountå¯¹è±¡å¦‚ä½•ä¿è¯æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œä¸å¤ªç†è§£ã€‚ã€‚ã€‚","like_count":59,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442501,"discussion_content":"å®é™…å¼€å‘ä¸­éƒ½æ˜¯ç”¨æ•°æ®åº“äº‹åŠ¡+ä¹è§‚é”çš„æ–¹å¼è§£å†³çš„ã€‚è¿™ä¸ªå°±æ˜¯ä¸ªä¾‹å­ï¼Œä¸ºäº†è¯´æ˜æ­»é”æ˜¯æ€ä¹ˆå›äº‹ï¼Œä»¥åŠæ­»é”é—®é¢˜æ€ä¹ˆè§£å†³ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552189724,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1039544,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/dc/b8/31c7e110.jpg","nickname":"LVM_23","note":"","ucode":"5E54F9DB582E9F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":394309,"discussion_content":"æˆ‘ä¹Ÿæ˜¯æƒ³åˆ°è¿™ä¸ªï¼Œç”¨this æ€ä¹ˆä¿è¯æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631839048,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1462645,"avatar":"https://static001.geekbang.org/account/avatar/00/16/51/75/6997e91a.jpg","nickname":"Sean ğŸ“","note":"","ucode":"652F4C2A8D93A1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1039544,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/dc/b8/31c7e110.jpg","nickname":"LVM_23","note":"","ucode":"5E54F9DB582E9F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572242,"discussion_content":"è¿™ä¸ªåªæ˜¯ä¸ªä¾‹å­ï¼Œå®é™…åœºæ™¯å¯ä»¥ç”¨è´¦æˆ·idæˆ–è€…ç¼–å·è¿™æ ·çš„ä½œä¸ºåˆ†å¸ƒå¼é”ä½¿ç”¨ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1652671876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":394309,"ip_address":""},"score":572242,"extra":""}]},{"author":{"id":2280894,"avatar":"","nickname":"Geek_781cba","note":"","ucode":"E419728928D36E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336214,"discussion_content":"ä½ è¿™ç§åœ¨ä¸šåŠ¡å±‚çš„è¯ï¼Œå¯ä»¥ç”¨åˆ†å¸ƒå¼é”äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608530641,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76114,"user_name":"åˆ«çš±çœ‰","can_delete":false,"product_type":"c1","uid":1177354,"ip_address":"","ucode":"D24F65EFF65586","user_header":"https://static001.geekbang.org/account/avatar/00/11/f7/0a/067537fc.jpg","comment_is_top":false,"comment_ctime":1552532439,"is_pvip":false,"replies":[{"id":"27737","content":"ä½ è¯´åˆ°æˆ‘å¿ƒé‡Œäº†ğŸ˜ƒğŸ˜ƒğŸ˜ƒ<br>","user_name":"ä½œè€…å›å¤","comment_id":76114,"uid":"1269969","ip_address":"","utype":1,"ctime":1552537403,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":15,"race_medal":0,"score":"194826060759","product_id":100023901,"comment_content":"@é˜¿å®˜ æˆ‘æ¥å›ç­”ä¸‹ä½ çš„é—®é¢˜<br><br>ä»¥ä¸‹æ˜¯é˜¿å®˜çš„é—®é¢˜<br>-------------------------------------------------------<br>è€å¸ˆï¼Œåœ¨ç ´åå ç”¨ä¸”ç­‰å¾…çš„æ¡ˆä¾‹ä¸­ï¼Œä¸ºä½•ç”³è¯·å®Œä¸¤ä¸ªè´¦æˆ·çš„èµ„æºåè¿˜éœ€è¦å†åˆ†åˆ«é”å®šthiså’Œtargetè´¦æˆ·å‘¢ï¼Ÿ<br>-------------------------------------------------------<br>å› ä¸ºè¿˜å­˜åœ¨å…¶ä»–ä¸šåŠ¡å•Š æ¯”å¦‚å®¢æˆ·å–æ¬¾<br>è¿™ä¸ªæ—¶å€™ä¹Ÿæ˜¯å¯¹å…¨å±€å˜é‡balanceåšæ“ä½œ<br>å¦‚æœä¸åŠ é” å¹¶å‘æƒ…å†µä¸‹ä¼šå‡ºé—®é¢˜<br><br>è€å¸ˆä½ çœ‹æˆ‘è¯´çš„å¯¹å—ğŸ˜„ğŸ˜„","like_count":45,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443183,"discussion_content":"ä½ è¯´åˆ°æˆ‘å¿ƒé‡Œäº†ğŸ˜ƒğŸ˜ƒğŸ˜ƒ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552537403,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1210890,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7a/0a/0ce5c232.jpg","nickname":"å•","note":"","ucode":"8F08E2CB81C4C3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":202447,"discussion_content":"çœ‹åˆ°è¯„è®ºæ‰æ˜ç™½ï¼Œæ€ªä¸å¾—ä¹‹é—´æˆ‘è§‰å¾—æœ‰äº†Allocatoråï¼Œåº”è¯¥å°±ä¸éœ€è¦åè¾¹çš„ä¸¤æŠŠé”äº†ï¼ŒåŸæ¥æ˜¯ä¸ºäº†é˜²æ­¢å…¶ä»–çš„ä¸šåŠ¡åŠŸèƒ½","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1583918747,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2343086,"avatar":"https://static001.geekbang.org/account/avatar/00/23/c0/ae/e5e62510.jpg","nickname":"å¾å¿—è¶…-Klaus","note":"","ucode":"CF26B39965F2A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389332,"discussion_content":"ç®¡ç†å‘˜å¯¹è±¡ä¹Ÿå¯ä»¥å†™ä¸€ä¸ªé‡è½½æ–¹æ³•åªè·å–ä¸€æŠŠé”çš„æ–¹æ³•ï¼Œå…¶ä»–ä¸šåŠ¡å°±å»åˆ¤æ–­é›†åˆé‡Œæ˜¯å¦æœ‰æŸä¸€æŠŠé”ä¸å°±è¡Œäº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1629223161,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1585829,"avatar":"https://static001.geekbang.org/account/avatar/00/18/32/a5/9868cd56.jpg","nickname":"southday","note":"","ucode":"4A8FB63D35F6E1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2054,"discussion_content":"é‚£è¿™ä¹ˆè¯´æ¥ï¼Œç»“åˆå…¶ä»–ä¸šåŠ¡ï¼Œè¿˜æ˜¯å¯èƒ½å­˜åœ¨æ­»é”å’¯","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1563206379,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1250262,"avatar":"https://static001.geekbang.org/account/avatar/00/13/13/d6/0cf21fe8.jpg","nickname":"Skylar","note":"","ucode":"9E8D1697BEE884","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1585829,"avatar":"https://static001.geekbang.org/account/avatar/00/18/32/a5/9868cd56.jpg","nickname":"southday","note":"","ucode":"4A8FB63D35F6E1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6328,"discussion_content":"ä¸ä¼šå•Šï¼Œå› ä¸ºæœ‰ç»Ÿä¸€çš„ç®¡ç†å‘˜Allocatoråˆ†é…è´¦æˆ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566833455,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":2054,"ip_address":""},"score":6328,"extra":""}]},{"author":{"id":2753834,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/05/2a/cfbcb0b2.jpg","nickname":"Donkey","note":"","ucode":"3DB4DFF6D99035","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":403982,"discussion_content":"è·å–ä¸¤ä¸ªè´¦æœ¬åï¼Œä¸åŠ é”å°±ä¼šè¢«åˆ«äººæŠ¢èµ°äº†ã€‚å¿…é¡»è½¬è´¦å®Œæˆï¼Œæ‰èƒ½é‡Šæ”¾è´¦æœ¬ï¼Œæ‰€ä»¥åŠ é”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634204074,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2313724,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/drctCc7ys2K91CKqc1OgBeAJWgx0wvGvtlgCo8gmtobmVicu1W9Z89RCqaHW86emMRt17Cr1RHaQvnR7QqUUPfg/132","nickname":"Geek_edc76d","note":"","ucode":"E6B9E1930C3AAD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374707,"discussion_content":"å¦‚æœä¸è€ƒè™‘å…¶ä»–ä¸šåŠ¡çš„è¯,è¿™é‡ŒæŠŠè¿™ä¸¤æŠŠé”å»æ‰,ç„¶åç”¨volatileä¿®é¥°balanceå˜é‡æ›´å¥½.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621321840,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2343086,"avatar":"https://static001.geekbang.org/account/avatar/00/23/c0/ae/e5e62510.jpg","nickname":"å¾å¿—è¶…-Klaus","note":"","ucode":"CF26B39965F2A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2313724,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/drctCc7ys2K91CKqc1OgBeAJWgx0wvGvtlgCo8gmtobmVicu1W9Z89RCqaHW86emMRt17Cr1RHaQvnR7QqUUPfg/132","nickname":"Geek_edc76d","note":"","ucode":"E6B9E1930C3AAD","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389331,"discussion_content":"ä¸ºä½•è¦åŠ volatile ï¼Ÿhappensbeforeäº’æ–¥é”é‚£æ¡å’Œç¬¬ä¸€æ¡åŠ ç¬¬ä¸‰æ¡ä¸èƒ½ä¿è¯å¯è§æ€§å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629222936,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":374707,"ip_address":""},"score":389331,"extra":""},{"author":{"id":2753834,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/05/2a/cfbcb0b2.jpg","nickname":"Donkey","note":"","ucode":"3DB4DFF6D99035","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2313724,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/drctCc7ys2K91CKqc1OgBeAJWgx0wvGvtlgCo8gmtobmVicu1W9Z89RCqaHW86emMRt17Cr1RHaQvnR7QqUUPfg/132","nickname":"Geek_edc76d","note":"","ucode":"E6B9E1930C3AAD","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":403983,"discussion_content":"ä¸ä¿è¯åŸå­æ€§æ˜¯ä¸è¡Œæ»´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634204238,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":374707,"ip_address":""},"score":403983,"extra":""}]},{"author":{"id":1018182,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/89/46/0b7828a1.jpg","nickname":"å°èƒ¡å­","note":"","ucode":"79FEC6400D25DA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295017,"discussion_content":"å…¶ä»–ä¸šåŠ¡æ“ä½œä¸æ˜¯ä¹Ÿå·²ç»åŠ é”ï¼Œè¿˜æ˜¯æ²¡ç†è§£ç¬¬äºŒæ¬¡åŠ é”çš„åŸå› ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596070334,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1018182,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/89/46/0b7828a1.jpg","nickname":"å°èƒ¡å­","note":"","ucode":"79FEC6400D25DA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295016,"discussion_content":"å…¶ä»–ä¸šåŠ¡æ“ä½œä¸æ˜¯ä¹Ÿå·²ç»åŠ é”ï¼Œè¿˜æ˜¯æ²¡ç†è§£ç¬¬äºŒæ¬¡åŠ é”çš„åŸå› ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596070332,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1018182,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/89/46/0b7828a1.jpg","nickname":"å°èƒ¡å­","note":"","ucode":"79FEC6400D25DA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295015,"discussion_content":"å…¶ä»–ä¸šåŠ¡æ“ä½œä¸æ˜¯ä¹Ÿå·²ç»åŠ é”ï¼Œè¿˜æ˜¯æ²¡ç†è§£ç¬¬äºŒæ¬¡åŠ é”çš„åŸå› ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596070327,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1133545,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJQyCFqdkJB97EXF7VVO1n0nRZUmxfWwDicJMmupDdDia7VnPkLSJicFyEe28eUtZamH9uprtBJ4Ojjw/132","nickname":"qhj","note":"","ucode":"A9A9370BB2EE0E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1018182,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/89/46/0b7828a1.jpg","nickname":"å°èƒ¡å­","note":"","ucode":"79FEC6400D25DA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304106,"discussion_content":"å…¶ä»–æ“ä½œå¹¶æ²¡æœ‰åŒæ—¶ç”³è¯·ä¸¤ä¸ªèµ„æºï¼Œæ‰€ä»¥æ²¡æœ‰åŠ é”","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1599469799,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":295015,"ip_address":""},"score":304106,"extra":""}]},{"author":{"id":1818343,"avatar":"","nickname":"åˆ˜åŒé’","note":"","ucode":"84B62DF8BC61FB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":280204,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591513690,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1250907,"avatar":"https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg","nickname":"Monday","note":"","ucode":"77B9BACC783598","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":137257,"discussion_content":"ä¹Ÿå°±æ˜¯è¯´å¦‚æœåªæœ‰ä¾‹å­ä¸­è¿™ä¸€ä¸ªè½¬è´¦ä¸šåŠ¡ï¼Œé‚£åé¢çš„é”å°±æ²¡æœ‰å¿…è¦äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579183053,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77013,"user_name":"æå¯å¨","can_delete":false,"product_type":"c1","uid":1440757,"ip_address":"","ucode":"7BB0B44076A4F4","user_header":"https://static001.geekbang.org/account/avatar/00/15/fb/f5/6521cb02.jpg","comment_is_top":false,"comment_ctime":1552804867,"is_pvip":false,"replies":[{"id":"28093","content":"å¾ªç¯ç­‰å¾…ï¼Œä¸€å®šæ˜¯A-&gt;B-&gt;C-&gt;...-&gt;N-&gt;Aå½¢æˆç¯çŠ¶ã€‚<br>å¦‚æœæŒ‰éœ€ç”³è¯·ï¼Œæ˜¯ä¸å…è®¸N-&gt;Aå‡ºç°çš„ï¼Œåªèƒ½N-&gt;Pã€‚æ²¡æœ‰ç¯çŠ¶ï¼Œä¹Ÿå°±ä¸ä¼šæ­»é”äº†ã€‚","user_name":"ä½œè€…å›å¤","comment_id":77013,"uid":"1269969","ip_address":"","utype":1,"ctime":1552814102,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":7,"race_medal":0,"score":"151876660227","product_id":100023901,"comment_content":"è€å¸ˆä¸ºä»€ä¹ˆæŒ‰åºç”³è¯·èµ„æºå°±å¯ä»¥ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶å‘¢ï¼Ÿè¿™ç‚¹æ²¡æœ‰çœ‹æ‡‚æ±‚è§£ç­”","like_count":35,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443541,"discussion_content":"å¾ªç¯ç­‰å¾…ï¼Œä¸€å®šæ˜¯A-&amp;gt;B-&amp;gt;C-&amp;gt;...-&amp;gt;N-&amp;gt;Aå½¢æˆç¯çŠ¶ã€‚\nå¦‚æœæŒ‰éœ€ç”³è¯·ï¼Œæ˜¯ä¸å…è®¸N-&amp;gt;Aå‡ºç°çš„ï¼Œåªèƒ½N-&amp;gt;Pã€‚æ²¡æœ‰ç¯çŠ¶ï¼Œä¹Ÿå°±ä¸ä¼šæ­»é”äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552814102,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1078849,"avatar":"https://static001.geekbang.org/account/avatar/00/10/76/41/7ff49c40.jpg","nickname":"E^cho","note":"","ucode":"23DE4B7AD6C23C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372339,"discussion_content":"å¾ªç¯ç­‰å¾…ä½ å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå¯†å®¤è¿›å»éœ€è¦å¼€ä¸¤æ‰‡é—¨ï¼Œä¸¤æ‰‡é—¨åˆ†åˆ«æœ‰ä¸¤æŠŠé’¥åŒ™ï¼Œå° Aæ‹¿äº†é’¥åŒ™1ç­‰å°BæŠŠé’¥åŒ™2ç»™è‡ªå·±ç”¨ï¼Œå°Bæ‹¿äº†é’¥åŒ™2ç­‰å°AæŠŠé’¥åŒ™1ç»™è‡ªå·±ç”¨ï¼Œå°Aè¯´æˆ‘è¦ä¸¤æ‰‡é—¨éƒ½å¼€äº†æ‰èƒ½æŠŠé’¥åŒ™è®©å‡ºæ¥ï¼Œå°Bè¯´æˆ‘ä¹Ÿæ˜¯ï¼Œä»–ä»¬äº’ç›¸ç­‰å°±å¯¼è‡´æ­»é”äº†ã€‚å‡å¦‚æ‹¿é’¥åŒ™æœ‰é¡ºåºï¼Œéƒ½å¿…é¡»å…ˆæ‹¿é’¥åŒ™1ç„¶åæ‰èƒ½æ‹¿é’¥åŒ™2çš„è¯ï¼Œå°±ä¸ä¼šå‘ç”Ÿä¸¤ä¸ªçº¿ç¨‹äº’ç›¸å ç”¨å¯¹æ–¹éœ€è¦çš„é”ï¼Œå°±ä¸ä¼šæ­»é”","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1620289182,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1184678,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJDgV2qia6eAL7Fb4egX3odViclRRwOlkfCBrjhU9lLeib90KGkIDjdddSibNVs47N90L36Brgnr6ppiag/132","nickname":"ddww","note":"","ucode":"2871112FC9B3F7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383133,"discussion_content":"æŒ‰åºç”³è¯·èµ„æºï¼Œä¸å°±æ˜¯ï¼Œä¸Šå¸å®šä¹‰äº†1,2,3ä¸‰ä¸ªé¡ºåºçš„taskã€‚ä¸€ä¸ªäººæŒ‰é¡ºåºæŠŠtaskå®Œæˆåï¼Œä¸‹ä¸€ä¸ªäººæ‰å¯ä»¥æ¥ç€å®Œæˆtaskã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1625921613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1333094,"avatar":"https://static001.geekbang.org/account/avatar/00/14/57/66/e57bdb18.jpg","nickname":"liliumss","note":"","ucode":"A52AC5042F3115","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":200831,"discussion_content":"çº¿æ€§å•å‘åŠ é”","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1583727899,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1135912,"avatar":"https://static001.geekbang.org/account/avatar/00/11/55/28/31b0cf2f.jpg","nickname":"é»‘è‰²æ¯›è¡£","note":"","ucode":"FF7E235F91BA5C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38544,"discussion_content":"å°±æ˜¯è¯´æ°¸è¿œæ˜¯æŒ‰ç…§  0 1 2 3... çš„é¡ºåºç”³è¯·ï¼Œä¸ä¼šå‡ºç°ä¸€ä¸ªç”³è¯·äº† 0ï¼Œ å¦ä¸€ä¸ªç›´æ¥ç”³è¯·äº† 1 å¯¼è‡´å¾ªç¯ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1571801046,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2113978,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLLniccwC1Mootc7IQsRGUTX3ZkkCKPc7lYV0g8CAqscWtAjd8xkHYcY3UFbYvicm42FXuAO5bZP6WQ/132","nickname":"Geek_417e74","note":"","ucode":"BEA8915879274D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553984,"discussion_content":"æŒ‰åºç”³è¯·ï¼šéƒ½æ˜¯å°çš„ç­‰å¤§çš„ï¼Œä¸ä¼šå‡ºç°å¤§çš„ç­‰å°çš„ï¼Œå°±æ²¡æœ‰å¾ªç¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646154915,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2330905,"avatar":"https://static001.geekbang.org/account/avatar/00/23/91/19/6a3e7efc.jpg","nickname":"ç¨‹åºå‘˜9527","note":"","ucode":"1A1609F6BEAD84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379455,"discussion_content":"å¿…é¡»å…ˆæ‹¿åˆ°1é”ï¼Œæ‰èƒ½æ‹¿åˆ°2é”ï¼Œä¸å…è®¸ç›´æ¥æ‹¿2é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623913637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":89767,"user_name":"Brightä¸¶","can_delete":false,"product_type":"c1","uid":1138016,"ip_address":"","ucode":"B1DEA8C8100538","user_header":"https://static001.geekbang.org/account/avatar/00/11/5d/60/38ea52c5.jpg","comment_is_top":false,"comment_ctime":1556259240,"is_pvip":false,"replies":[{"id":"32181","content":"å®é™…å·¥ä½œä¸­ä¹Ÿæœ‰è¿™ä¹ˆåšçš„ï¼Œåªä¸è¿‡æ˜¯æŠŠè½¬å…¥æ“ä½œæ”¾åˆ°mqé‡Œé¢ï¼Œmqæ¶ˆè´¹å¤±è´¥ä¼šé‡è¯•ï¼Œæ‰€ä»¥èƒ½ä¿è¯æœ€ç»ˆä¸€è‡´æ€§ã€‚","user_name":"ä½œè€…å›å¤","comment_id":89767,"uid":"1269969","ip_address":"","utype":1,"ctime":1556280682,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":20,"race_medal":0,"score":"130405278120","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæ„Ÿè§‰ä¸‹é¢çš„ä»£ç ä¹Ÿèƒ½é¿å…æ­»é”ï¼Œå¹¶ä¸”èƒ½å®ç°åŠŸèƒ½ï¼š<br>void transfer(Account target, int amt){<br>    boolean isTransfer  = false;<br>&#47;&#47; é”å®šè½¬å‡ºè´¦æˆ·<br>    synchronized(this){<br>          if (this.balance &gt; amt) {<br>          this.balance -= amt;<br>          isTransfer = true;<br>    }   <br>    if (!isTransfer) {<br>         return;<br>    }<br>      &#47;&#47; é”å®šè½¬å…¥è´¦æˆ·<br>      synchronized(target){ <br>          target.balance += amt;<br>      }<br>  }<br><br>åæ˜ åˆ°ç°å®ä¸­çš„åœºæ™¯ï¼šæœåŠ¡å‘˜Aæ‹¿åˆ°è´¦æœ¬1å…ˆåˆ¤æ–­ä½™é¢å¤Ÿä¸å¤Ÿï¼Œå¤Ÿçš„è¯å…ˆæ‰£æ¬¾ï¼Œå†ç­‰å¾…å…¶ä»–äººæ“ä½œå®Œè´¦æœ¬2ï¼Œæ‰å¢åŠ å®ƒçš„é¢åº¦ã€‚<br><br>ä½†æ˜¯è¿™æ ·è½¬è´¦å’Œåˆ°è´¦å°±å­˜åœ¨ä¸€ä¸ªæ—¶å·®ï¼Œç°å®ç”Ÿæ´»ä¸­ä¹Ÿæ˜¯è¿™æ ·ï¼Œè½¬è´¦ä¸ä¼šç«‹é©¬åˆ°è´¦ï¼ŒçŸ­ä¿¡æé†’24å°æ—¶å†…åˆ°è´¦ï¼Œæ‰€è°“çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚ <br><br>è€å¸ˆå¸®å¿™çœ‹çœ‹è¿™æ ·å®ç°ä¼šä¸ä¼šæœ‰å•¥å…¶ä»–é—®é¢˜ï¼Ÿ","like_count":30,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448254,"discussion_content":"å®é™…å·¥ä½œä¸­ä¹Ÿæœ‰è¿™ä¹ˆåšçš„ï¼Œåªä¸è¿‡æ˜¯æŠŠè½¬å…¥æ“ä½œæ”¾åˆ°mqé‡Œé¢ï¼Œmqæ¶ˆè´¹å¤±è´¥ä¼šé‡è¯•ï¼Œæ‰€ä»¥èƒ½ä¿è¯æœ€ç»ˆä¸€è‡´æ€§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556280682,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1323652,"avatar":"","nickname":"sibyl","note":"","ucode":"0D142011860D69","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289306,"discussion_content":"å¯¹äºâ€œå æœ‰ä¸”ç­‰å¾…è¿™ä¸ªæ¡ä»¶â€ï¼Œå®é™…å°±æ˜¯ã€é€ä¸€ã€‘çš„å æœ‰ã€å…¨éƒ¨ã€‘èµ„æºã€‚\n\nå› æ­¤å¯ä»¥é€šè¿‡é¿å…ã€é€ä¸€ã€‘ï¼Œå³ä¸€æ¬¡æ€§å æœ‰ï¼Œæ¥ç ´åè¿™ä¸ªæ¡ä»¶ï¼Œå®é™…å°±æ˜¯å¯¹æ‰€æœ‰ç›¸å…³çš„å…±äº«èµ„æºåŠ åŒä¸€æŠŠé”ã€‚\nè¿˜å¯ä»¥é€šè¿‡é¿å…ã€å…¨éƒ¨ã€‘ï¼Œå°±ç ´åäº†å æœ‰ä¸”ç­‰å¾…ï¼Œå®é™…å°±æ˜¯å¯¹èµ„æºå•ç‹¬å¤„ç†ï¼Œå¤„ç†ä»¥åç«‹åˆ»é‡Šæ”¾","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1594048828,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1323652,"avatar":"","nickname":"sibyl","note":"","ucode":"0D142011860D69","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289304,"discussion_content":"æ¥¼ä¸»è¿™ä¸ªæ–¹æ¡ˆä¹Ÿæ˜¯ç ´åå æœ‰ä¸”ç­‰å¾…çš„æ–¹æ³•ï¼Œæ¯ä¸ªèµ„æºéƒ½æ˜¯å•ç‹¬å æœ‰å•ç‹¬å¤„ç†å•ç‹¬é‡Šæ”¾ï¼Œè€Œä¸æ˜¯è¯•å›¾é€ä¸€çš„è·å–å…¨éƒ¨èµ„æº","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1594048314,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1960096,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/e8/a0/14de6984.jpg","nickname":"Eric W.Liu","note":"","ucode":"8B394A3C1448BA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":230762,"discussion_content":"å¦‚æœåœ¨é”å®šè´¦æˆ·çš„æ“ä½œä¸­æœ‰æ¡ä»¶åˆ¤æ–­ï¼Œä¸æ»¡è¶³æŸäº›æ¡ä»¶ä¼šå¤±è´¥ï¼Œä¼šå¯¼è‡´ï¼ŒAæ‰£äº†é’±ä½†æ˜¯Bæœªåˆ°è´¦çš„æƒ…å†µ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1586770001,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1138016,"avatar":"https://static001.geekbang.org/account/avatar/00/11/5d/60/38ea52c5.jpg","nickname":"Brightä¸¶","note":"","ucode":"B1DEA8C8100538","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1960096,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/e8/a0/14de6984.jpg","nickname":"Eric W.Liu","note":"","ucode":"8B394A3C1448BA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":251174,"discussion_content":"ä¼šé€šè¿‡å…¶ä»–æ–¹å¼ä¿è¯æœ€ç»ˆä¸€è‡´æ€§","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1588071602,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":230762,"ip_address":""},"score":251174,"extra":""}]},{"author":{"id":2568744,"avatar":"https://static001.geekbang.org/account/avatar/00/27/32/28/078ec46c.jpg","nickname":"topå•¦å®ƒ","note":"","ucode":"1F2656293D1B9F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554834,"discussion_content":"å“¥ï¼Œå¦‚æœåœ¨aç»™bè½¬è´¦çš„åŒæ—¶ï¼Œbä¹Ÿç»™aè½¬è´¦ã€‚åº”è¯¥ä¼šäº§ç”Ÿæ­»é”å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646639979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1075913,"avatar":"https://static001.geekbang.org/account/avatar/00/10/6a/c9/ba39a8a4.jpg","nickname":"Kon","note":"","ucode":"F9E0EB1B244A6C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2568744,"avatar":"https://static001.geekbang.org/account/avatar/00/27/32/28/078ec46c.jpg","nickname":"topå•¦å®ƒ","note":"","ucode":"1F2656293D1B9F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575710,"discussion_content":"æ˜¯åˆ†åˆ«sync åŠ çš„é”ï¼Œä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655045418,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":554834,"ip_address":""},"score":575710,"extra":""}]},{"author":{"id":1433737,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e0/89/c3db1efc.jpg","nickname":"é’æ¢…ç…®é©¬","note":"","ucode":"529AEBCF25E828","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534161,"discussion_content":"è¿™æ ·target å°±åˆ«æ”¾åœ¨å…¥å‚äº†ï¼Œé¿å…è·‘äº†ä¸€åŠtarget å˜äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638110560,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1018706,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/52/6659dc1b.jpg","nickname":"é»‘ç±³","note":"","ucode":"E7DBEA7867862A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391115,"discussion_content":"ä½ è¿™ä¸ªåŸå§‹çš„ä»£ç synchronized(this)é‡Œçš„ifæ˜¯ä¸æ˜¯æ¼äº†ä¸ªæ‹¬å·ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630299493,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1089385,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9f/69/bb533bad.jpg","nickname":"lee","note":"","ucode":"47E318CD6A0471","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369112,"discussion_content":"åˆ†å¸ƒå¼äº‹åŠ¡ä½¿ç”¨æŸ”æ€§äº‹åŠ¡ä¹Ÿå°±æ˜¯æœ€ç»ˆä¸€è‡´æ€§çš„è§£å†³æ–¹æ¡ˆï¼Œæœ‰ä¸ªæ¡ä»¶å“¦ï¼Œå°±æ˜¯è¢«åŠ¨è€…ä¸å…è®¸å­˜åœ¨ä¸šåŠ¡å¼‚å¸¸ï¼Œè¿™ä¸ªè½¬è´¦åœºæ™¯æ˜æ˜¾ä¸è¡Œå•Šï¼Œè´¦å·ä½™é¢ä¸è¶³è¿™ç§ä¸šåŠ¡å¼‚å¸¸æ˜¯ä¸å…è®¸æœ€ç»ˆä¸€è‡´æ€§çš„ï¼Œåªèƒ½ç”¨tccåˆšæ€§äº‹åŠ¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618930376,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1687656,"avatar":"https://static001.geekbang.org/account/avatar/00/19/c0/68/314e8306.jpg","nickname":"å¨å…ˆæ£®","note":"","ucode":"5F445C6832274B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352785,"discussion_content":"è¿™ä¸ªå¹¶ä¸èƒ½ä¿è¯æœ€åè½¬è´¦èƒ½æˆåŠŸï¼Œtargetè‚¯å®šæ˜¯ä»åº“æŸ¥è¯¢å‡ºæ¥çš„ï¼Œåœ¨ä½ æœ€åtargetä½™é¢æ›´æ–°å…¥åº“è¿™ä¸ªæ—¶é—´å·®ä¸­ï¼Œå¯èƒ½targetçš„ä½™é¢åˆå‘ç”Ÿå˜åŒ–äº†ï¼Œè¿˜æ˜¯éœ€è¦å…¶ä»–æªæ–½ä¿è¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614849362,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2410092,"avatar":"https://static001.geekbang.org/account/avatar/00/24/c6/6c/a400175a.jpg","nickname":"FARO_Z","note":"","ucode":"B33BCC36C2A74E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1687656,"avatar":"https://static001.geekbang.org/account/avatar/00/19/c0/68/314e8306.jpg","nickname":"å¨å…ˆæ£®","note":"","ucode":"5F445C6832274B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539105,"discussion_content":"æ„Ÿè§‰æ²¡æœ‰é—®é¢˜è¯¶ï¼Œtarget ä½™é¢å‘ç”Ÿå˜åŒ–ï¼Œä¹Ÿæ˜¯å’Œå…¶ä»–è´¦æˆ·è¿›è¡Œäº†è½¬è´¦æ“ä½œï¼Œä½†æ˜¯åªè¦æœ€ç»ˆæ‰€æœ‰è½¬è´¦æ“ä½œéƒ½ç»“æŸï¼Œtarget è‡ªèº«çš„ä½™é¢æ˜¯æ­£ç¡®å€¼å°±è¡Œäº†ï¼ˆä¹Ÿå°±æ˜¯æ¥¼ä¸»æåˆ°çš„æœ€ç»ˆä¸€è‡´æ€§ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639610815,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":352785,"ip_address":""},"score":539105,"extra":""}]},{"author":{"id":1702117,"avatar":"https://static001.geekbang.org/account/avatar/00/19/f8/e5/119d5c15.jpg","nickname":"å±±æµ·","note":"","ucode":"77FA9967E58FA3","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348508,"discussion_content":"    if (!isTransfer) {\n         return;\n    }\nè¿™ä¸ªæ²¡å¤ªç†è§£ï¼Œåœ¨ä¸Šé¢ä»£ç æ‰§è¡Œå®Œä¹‹åï¼Œ isTransferè‚¯å®šå°±æ˜¯ç­‰äºtrueäº†ã€‚ è¿™é‡Œè®¾ç½®çš„æ„ä¹‰åœ¨å“ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612605135,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1687656,"avatar":"https://static001.geekbang.org/account/avatar/00/19/c0/68/314e8306.jpg","nickname":"å¨å…ˆæ£®","note":"","ucode":"5F445C6832274B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1702117,"avatar":"https://static001.geekbang.org/account/avatar/00/19/f8/e5/119d5c15.jpg","nickname":"å±±æµ·","note":"","ucode":"77FA9967E58FA3","race_medal":1,"user_type":1,"is_pvip":false},"discussion":{"id":352784,"discussion_content":"é˜²æ­¢è½¬å‡ºè´¦æˆ·ä½™é¢ä¸è¶³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614849191,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":348508,"ip_address":""},"score":352784,"extra":""}]},{"author":{"id":1605330,"avatar":"https://static001.geekbang.org/account/avatar/00/18/7e/d2/be993431.jpg","nickname":"æ°µåˆå¼“è™½","note":"","ucode":"A62F060B02CDD7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":233683,"discussion_content":"ä¸å¤ªæ‡‚è¿™é‡Œæ€ä¹ˆé¿å…æ­»é”ï¼Œä¸¤ä¸ªçº¿ç¨‹A,Bç”¨æˆ·äº’ç›¸è½¬è´¦çš„è¯ï¼Œéƒ½æ‰§è¡Œåˆ°â€œ// é”å®šè½¬å…¥è´¦æˆ·â€œé‚£ä¸€æ­¥ä¸æ˜¯å°±ä¼šæ­»é”äº†ä¹ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586938798,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1138016,"avatar":"https://static001.geekbang.org/account/avatar/00/11/5d/60/38ea52c5.jpg","nickname":"Brightä¸¶","note":"","ucode":"B1DEA8C8100538","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1605330,"avatar":"https://static001.geekbang.org/account/avatar/00/18/7e/d2/be993431.jpg","nickname":"æ°µåˆå¼“è™½","note":"","ucode":"A62F060B02CDD7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":251176,"discussion_content":"ä¸åµŒå¥—é”å°±å¯ä»¥é¿å…","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1588071660,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":233683,"ip_address":""},"score":251176,"extra":""},{"author":{"id":1277081,"avatar":"https://static001.geekbang.org/account/avatar/00/13/7c/99/4dac6ce6.jpg","nickname":"lakeslove","note":"","ucode":"65E14D29D3C981","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1605330,"avatar":"https://static001.geekbang.org/account/avatar/00/18/7e/d2/be993431.jpg","nickname":"æ°µåˆå¼“è™½","note":"","ucode":"A62F060B02CDD7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":318223,"discussion_content":"æ‰§è¡Œåˆ°è½¬å…¥æ—¶ï¼Œä¸Šé¢çš„é‚£ä¸ªthisé”å·²ç»é‡Šæ”¾äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603682075,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":233683,"ip_address":""},"score":318223,"extra":""},{"author":{"id":1554995,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ba/33/2d83d174.jpg","nickname":"æ—¶å…‰å®ˆæŠ¤è€…-åŸºå…°","note":"","ucode":"F0B0887B1979D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1277081,"avatar":"https://static001.geekbang.org/account/avatar/00/13/7c/99/4dac6ce6.jpg","nickname":"lakeslove","note":"","ucode":"65E14D29D3C981","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":357997,"discussion_content":"è¿™ä»£ç é”æ˜¯åµŒå¥—çš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1615902926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":318223,"ip_address":""},"score":357997,"extra":""}]},{"author":{"id":1508339,"avatar":"https://static001.geekbang.org/account/avatar/00/17/03/f3/0bd094ad.jpg","nickname":"zhangchao","note":"","ucode":"E665D153A85DE0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":210677,"discussion_content":"è¿™ä¸ªæƒ³æ³•ç‰›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584760029,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74143,"user_name":"è½»æ­Œèµ‹","can_delete":false,"product_type":"c1","uid":1251574,"ip_address":"","ucode":"22F62446208805","user_header":"https://static001.geekbang.org/account/avatar/00/13/18/f6/2ff7bc7a.jpg","comment_is_top":false,"comment_ctime":1552114853,"is_pvip":false,"replies":[{"id":"27131","content":"å¯ä»¥ç”¨topå‘½ä»¤æŸ¥çœ‹Javaçº¿ç¨‹çš„cpuåˆ©ç”¨ç‡ï¼Œç”¨jstackæ¥dumpçº¿ç¨‹ã€‚å¼€å‘ç¯å¢ƒå¯ä»¥ç”¨ java visualvmæŸ¥çœ‹çº¿ç¨‹æ‰§è¡Œæƒ…å†µ","user_name":"ä½œè€…å›å¤","comment_id":74143,"uid":"1269969","ip_address":"","utype":1,"ctime":1552138621,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"113221264549","product_id":100023901,"comment_content":"å­˜åœ¨æ€§èƒ½å·®è·ï¼Œè™½ç„¶ç”³è¯·çš„æ—¶å€™åŠ é”å¯¼è‡´å•çº¿ç¨‹è®¿é—®ï¼Œä½†æ˜¯hashåˆ¤æ–­å’Œèµ‹å€¼æ—¶é—´å¤æ‚åº¦ä½ï¼Œè€Œåœ¨é”ä¸­æ‰§è¡Œä¸šåŠ¡ä»£ç æ—¶é—´é•¿å¾ˆå¤šã€‚<br>ç”³è¯·çš„æ—¶å€™å•çº¿ç¨‹ï¼Œä½†æ˜¯æ‰§è¡Œçš„æ—¶å€™å°±å¯ä»¥å¤šçº¿ç¨‹äº†ï¼Œè¿™é‡Œæ€§èƒ½æå‡æ¯”è¾ƒæ˜æ˜¾<br><br>æƒ³é—®é—®è€å¸ˆï¼Œå¦‚ä½•åˆ¤æ–­å¤šçº¿ç¨‹çš„é˜»å¡å¯¼è‡´çš„é—®é¢˜å‘¢ï¼Ÿæœ‰ä»€ä¹ˆå·¥å…·å—","like_count":26,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442464,"discussion_content":"å¯ä»¥ç”¨topå‘½ä»¤æŸ¥çœ‹Javaçº¿ç¨‹çš„cpuåˆ©ç”¨ç‡ï¼Œç”¨jstackæ¥dumpçº¿ç¨‹ã€‚å¼€å‘ç¯å¢ƒå¯ä»¥ç”¨ java visualvmæŸ¥çœ‹çº¿ç¨‹æ‰§è¡Œæƒ…å†µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552138621,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128914,"user_name":"ç‹äºŒå®","can_delete":false,"product_type":"c1","uid":1042241,"ip_address":"","ucode":"E147D6E597EF5B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e7/41/2ea1f5dc.jpg","comment_is_top":false,"comment_ctime":1566982880,"is_pvip":false,"replies":[{"id":"48101","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","comment_id":128914,"uid":"1269969","ip_address":"","utype":1,"ctime":1567080935,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":2,"race_medal":0,"score":"91761296096","product_id":100023901,"comment_content":"æœ€å¸¸è§çš„å°±æ˜¯Bè½¬Açš„åŒæ—¶ï¼ŒAè½¬è´¦ç»™Bï¼Œé‚£ä¹ˆå…ˆé”Bå†é”Aï¼Œä½†æ˜¯ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹æ˜¯å…ˆé”Aå†é”Bï¼Œç„¶è€Œï¼Œå¦‚æœä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œï¼Œé‚£ä¹ˆå°±æ˜¯å‡ºç°æ­»é”çš„æƒ…å†µï¼Œçº¿ç¨‹T1é”äº†Aè¯·æ±‚é”Bï¼Œæ­¤æ—¶çº¿ç¨‹T2é”äº†Bè¯·æ±‚é”Aï¼Œéƒ½åœ¨ç­‰ç€å¯¹æ–¹é‡Šæ”¾é”ï¼Œç„¶è€Œè‡ªå·±éƒ½ä¸ä¼šé‡Šæ”¾é”ï¼Œæ•…æ­»é”ã€‚<br>æœ€ç®€å•çš„åŠæ³•ï¼Œå°±æ˜¯æ— è®ºå“ªä¸ªçº¿ç¨‹æ‰§è¡Œçš„æ—¶å€™ï¼Œéƒ½æŒ‰ç…§é¡ºåºåŠ é”ï¼Œå³æŒ‰ç…§Aå’ŒBçš„idå¤§å°æ¥åŠ é”ï¼Œè¿™æ ·ï¼Œæ— è®ºå“ªä¸ªçº¿ç¨‹æ‰§è¡Œçš„æ—¶å€™ï¼Œéƒ½ä¼šå…ˆåŠ é”Aï¼Œå†åŠ é”Bï¼ŒAè¢«åŠ é”ï¼Œåˆ™ç­‰å¾…é‡Šæ”¾ã€‚è¿™æ ·å°±ä¸ä¼šè¢«æ­»é”äº†ã€‚","like_count":21,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465172,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567080935,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2434363,"avatar":"https://static001.geekbang.org/account/avatar/00/25/25/3b/864c5115.jpg","nickname":"saiuna","note":"","ucode":"8DB9C47C965195","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":365204,"discussion_content":"ğŸ‚ğŸº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617728169,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74051,"user_name":"é‚‹é¢çš„æµæµªå‰‘å®¢","can_delete":false,"product_type":"c1","uid":1260881,"ip_address":"","ucode":"32AF6F9070506D","user_header":"https://static001.geekbang.org/account/avatar/00/13/3d/51/9723276c.jpg","comment_is_top":false,"comment_ctime":1552094068,"is_pvip":false,"replies":[{"id":"27055","content":"è¿™ä¸€éƒ¨åˆ†çš„æœ€åä¸€ç« ï¼Œè¦ä¸å°±ç»™ç­”æ¡ˆå§<br>","user_name":"ä½œè€…å›å¤","comment_id":74051,"uid":"1269969","ip_address":"","utype":1,"ctime":1552098091,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"78861505396","product_id":100023901,"comment_content":"æ€è€ƒé¢˜çš„è¯å¸Œæœ›è€å¸ˆèƒ½å¤Ÿè¿‡åç»™å‡ºä¸€ä¸ªæ¯”è¾ƒæ ‡å‡†çš„ç­”æ¡ˆï¼Œæ¯•ç«Ÿå¤§å®¶çš„ç•™è¨€ä¸­è¯´æ³•å„ä¸ç›¸åŒå¾ˆéš¾å»åˆ¤æ–­ç­”æ¡ˆçš„å¯¹é”™","like_count":18,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442409,"discussion_content":"è¿™ä¸€éƒ¨åˆ†çš„æœ€åä¸€ç« ï¼Œè¦ä¸å°±ç»™ç­”æ¡ˆå§\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552098091,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134089,"user_name":"é“¿ç„¶","can_delete":false,"product_type":"c1","uid":1162461,"ip_address":"","ucode":"D529242EC2E2EA","user_header":"https://static001.geekbang.org/account/avatar/00/11/bc/dd/c9413f59.jpg","comment_is_top":false,"comment_ctime":1568737178,"is_pvip":true,"discussion_count":4,"race_medal":0,"score":"70288213914","product_id":100023901,"comment_content":"å¦‚æœæœ‰äººæ²¡æœ‰ç†è§£é€å½»ï¼Œçœ‹ç€ä¾‹å­æ¥å†™ç”Ÿäº§ä»£ç ï¼Œé‚£ä¹ˆå¹¶å‘æƒ…å†µä¸‹ä¼šå‡ºé—®é¢˜ï¼Œå¦‚æœå¹¶å‘å°ï¼Œä¸€ç›´æ²¡å‡ºé—®é¢˜ï¼Œä¼šä»¥ä¸ºä»£ç æ²¡é—®é¢˜ï¼ŒçœŸæ­£å‡ºé—®é¢˜çš„æ—¶å€™éƒ½åˆ†æä¸å‡ºæ¥å“ªé‡Œé”™äº†ã€‚<br><br>å¹¶å‘æƒ…å†µä¸‹ï¼Œè¿™äº›ä»£ç çš„åŠ é”å¯¹è±¡å¹¶ä¸æ˜¯åŒä¸€ä¸ªï¼Œæ‰€ä»¥æ˜¯æœ‰é—®é¢˜çš„ã€‚-- ä¸åŒçš„çº¿ç¨‹éƒ½è·å–åˆ°äº†è´¦æˆ·Açš„å®ä¾‹å¯¹è±¡ï¼Œä½†è¿™äº›å®ä¾‹å¯¹è±¡ä¸æ˜¯åŒä¸€ä¸ªã€‚<br><br>å¸Œæœ›æ‰€æœ‰è¯»è€…éƒ½èƒ½çœ‹é€è¿™ä¸ªï¼Œå¤šçº¿ç¨‹å¯¹è´¦æˆ·Aï¼ŒBå®ä¾‹åŠ é”æ—¶ä¸€å®šè¦ä¿è¯æ˜¯åŒä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œå°±åƒåœ¨æ•°æ®åº“è¡¨ä¸­é€šè¿‡select * from account where account_id = ? for update åŠ é”ä¸€æ ·ï¼Œé”ä½çš„æ˜¯åŒä¸€æ¡è´¦æˆ·è®°å½•ã€‚","like_count":16,"discussions":[{"author":{"id":1744053,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/9c/b5/c936c54b.jpg","nickname":"ğŸ’£","note":"","ucode":"F3B82CEB6B6934","race_medal":2,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":313993,"discussion_content":"æ„æ€æ˜¯éœ€è¦ä¿è¯æ˜¯åœ¨å•ä¾‹æ¨¡å¼ä¸‹ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603110425,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1162461,"avatar":"https://static001.geekbang.org/account/avatar/00/11/bc/dd/c9413f59.jpg","nickname":"é“¿ç„¶","note":"","ucode":"D529242EC2E2EA","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1744053,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/9c/b5/c936c54b.jpg","nickname":"ğŸ’£","note":"","ucode":"F3B82CEB6B6934","race_medal":2,"user_type":1,"is_pvip":true},"discussion":{"id":379115,"discussion_content":"ä¸æ˜¯ï¼Œç¡®ä¿æ˜¯åŒä¸€ä¸ªé”å°±è¡Œï¼Œå®ç°æ–¹å¼ğŸˆ¶å¾ˆå¤šï¼Œå¯ä»¥ä¼ å…¥é”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623696903,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":313993,"ip_address":""},"score":379115,"extra":""}]},{"author":{"id":1083238,"avatar":"https://static001.geekbang.org/account/avatar/00/10/87/66/31629628.jpg","nickname":"MaO","note":"","ucode":"3D839733E87435","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296723,"discussion_content":"æ•°æ®åº“æ“ä½œåˆæ˜¯ioæ“ä½œï¼Œä¸æ˜¯çš„ssdç¡¬ç›˜ç¯å¢ƒä¸‹æ“ä½œç³»ç»Ÿå’Œè™šæ‹Ÿæœºæ˜¯å¦æœ‰ä¸“é—¨çš„ä¼˜åŒ–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596632412,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1485018,"avatar":"https://static001.geekbang.org/account/avatar/00/16/a8/da/63dd5078.jpg","nickname":"æ¼”å‘˜","note":"","ucode":"20040EC3D42025","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":237448,"discussion_content":"è¯´çš„éå¸¸å¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587141595,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76069,"user_name":"aguan(^ï½¥ï½ªï½¥^)","can_delete":false,"product_type":"c1","uid":1107177,"ip_address":"","ucode":"04833EF2D18E1A","user_header":"https://static001.geekbang.org/account/avatar/00/10/e4/e9/0dd3829f.jpg","comment_is_top":false,"comment_ctime":1552527851,"is_pvip":false,"replies":[{"id":"27734","content":"ä¸ºäº†ä¿é™©è€Œå·²ï¼Œå•çº¯è¿™ä¸ªä¾‹å­æ˜¯ä¸éœ€è¦çš„ï¼Œå¦‚æœè¿˜æœ‰å–æ¬¾æ“ä½œå°±éœ€è¦äº†<br>","user_name":"ä½œè€…å›å¤","comment_id":76069,"uid":"1269969","ip_address":"","utype":1,"ctime":1552536937,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":3,"race_medal":0,"score":"70272004587","product_id":100023901,"comment_content":"è€å¸ˆï¼Œåœ¨ç ´åå ç”¨ä¸”ç­‰å¾…çš„æ¡ˆä¾‹ä¸­ï¼Œä¸ºä½•ç”³è¯·å®Œä¸¤ä¸ªè´¦æˆ·çš„èµ„æºåè¿˜éœ€è¦å†åˆ†åˆ«é”å®šthiså’Œtargetè´¦æˆ·å‘¢ï¼Ÿ","like_count":16,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443163,"discussion_content":"ä¸ºäº†ä¿é™©è€Œå·²ï¼Œå•çº¯è¿™ä¸ªä¾‹å­æ˜¯ä¸éœ€è¦çš„ï¼Œå¦‚æœè¿˜æœ‰å–æ¬¾æ“ä½œå°±éœ€è¦äº†\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552536937,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2445017,"avatar":"https://static001.geekbang.org/account/avatar/00/25/4e/d9/a559e58c.jpg","nickname":"éƒ­æ©™è¼-","note":"","ucode":"2B61A22448E5DD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":409966,"discussion_content":"mark, è¿™ä¸ªæˆ‘ä¹Ÿå›°æ‰°å¾ˆä¹…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635561457,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1323652,"avatar":"","nickname":"sibyl","note":"","ucode":"0D142011860D69","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289120,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593998454,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74325,"user_name":"gogo","can_delete":false,"product_type":"c1","uid":1003104,"ip_address":"","ucode":"E8F0F3B000020A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4e/60/0d5aa340.jpg","comment_is_top":false,"comment_ctime":1552190122,"is_pvip":false,"replies":[{"id":"27175","content":"æ˜¯çš„ï¼Œå°±æ˜¯idçš„æ¬¡åºã€‚","user_name":"ä½œè€…å›å¤","comment_id":74325,"uid":"1269969","ip_address":"","utype":1,"ctime":1552200564,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":6,"race_medal":0,"score":"61681732266","product_id":100023901,"comment_content":"çœ‹äº†è€å¸ˆçš„è®²è§£å­¦åˆ°äº†å¾ˆå¤šï¼Œè”æƒ³äº†ä¸‹å®é™…è½¬è´¦ä¸šåŠ¡ï¼Œåº”è¯¥æ˜¯æ•°æ®åº“æ¥å®ç°çš„ï¼Œå‡å¦‚æœ‰è´¦æˆ·è¡¨accountï¼Œåˆ©ç”¨mysqlçš„æ‚²è§‚é”select ...for updateå¯¹aï¼Œbä¸¤æ¡æ•°æ®é”å®šï¼Œè¿™æ—¶ä¹Ÿæœ‰å¯èƒ½å‘ç”Ÿæ­»é”ï¼ŒæŒ‰ç…§æ‚¨è®²åˆ°çš„ç¬¬ä¸‰ç§ç ´åå¾ªç¯ç­‰å¾…çš„æ–¹å¼ï¼ŒæŒ‰ç…§idçš„å¤§å°é¡ºåºä¾æ¬¡é”å®šã€‚æˆ‘è¿™æ ·ç†è§£çš„å¯¹å—ï¼Ÿ","like_count":14,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442532,"discussion_content":"æ˜¯çš„ï¼Œå°±æ˜¯idçš„æ¬¡åºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552200564,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2583432,"avatar":"https://static001.geekbang.org/account/avatar/00/27/6b/88/6315d04c.jpg","nickname":"Geek_Black","note":"","ucode":"8CFB324D281FC5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387787,"discussion_content":"IDé¡ºåº  å…·ä½“æ€ä¹ˆå†™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628414375,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2192295,"avatar":"https://static001.geekbang.org/account/avatar/00/21/73/a7/c8ea0a62.jpg","nickname":"åŒ—äº¬å°å¦","note":"","ucode":"5A327F761E2DFA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373043,"discussion_content":"è€å“¥ä»¬ï¼Œæ„æ€æ˜¯æ‰§è¡Œ4å¥sql:\n1.select for update A;\n2.select from update B;\n3.update A set A = A - num;\n4.update B set B = B + num;\nè¿™æ ·å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620575795,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1083238,"avatar":"https://static001.geekbang.org/account/avatar/00/10/87/66/31629628.jpg","nickname":"MaO","note":"","ucode":"3D839733E87435","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296722,"discussion_content":"æ•°æ®for update å¥½åƒå¯ä»¥å®šä¹‰timeout\nè¿™æ ·å®Œæ•´å¾—è§£å†³æ–¹æ¡ˆå²‚ä¸æ˜¯å¯ä»¥è¿™æ ·\næŒ‰å¤§å°é¡ºåº for update\ntimeout æŠ›å¼‚å¸¸\nå¼‚å¸¸å¤„ç†å›æ»šäº‹åŠ¡\nå®Œç¾","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596632247,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1542037,"avatar":"https://static001.geekbang.org/account/avatar/00/17/87/95/cba0a896.jpg","nickname":"å¢","note":"","ucode":"B6A9F41AEE348C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292224,"discussion_content":"æ¸¸æˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595147048,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1323652,"avatar":"","nickname":"sibyl","note":"","ucode":"0D142011860D69","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289121,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593998485,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76146,"user_name":"é™ˆå","can_delete":false,"product_type":"c1","uid":1082730,"ip_address":"","ucode":"3AF9E8EB39E507","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtS26SJpSF7JLu9pusGsy1Qln0NdQg1eV2YKOJxpX2QXaBuuyXMqZY3fm0rhzKwsqN5aa6CVNOQQ/132","comment_is_top":false,"comment_ctime":1552535784,"is_pvip":false,"replies":[{"id":"27736","content":"èƒ½èµ·ä½œç”¨ï¼Œè¿™ä¿©æ“ä½œä¸ä¼šæ­»é”<br>","user_name":"ä½œè€…å›å¤","comment_id":76146,"uid":"1269969","ip_address":"","utype":1,"ctime":1552537364,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":7,"race_medal":0,"score":"53092143336","product_id":100023901,"comment_content":"å¯¹äºç¬¬ä¸‰ç‚¹ï¼ŒæŒ‰èµ„æºé¡ºåºæ¥é”å°±èƒ½æ‰“ç ´å¾ªç¯ç­‰å¾…æœ‰ç–‘é—®ã€‚<br>ä¾‹å¦‚ï¼šè´¦æˆ· 1 å‘ è´¦æˆ· 3 è½¬è´¦<br>  åŒæ—¶ è´¦æˆ· 3 å‘ è´¦æˆ· 5 è½¬è´¦<br>å³ä½¿æŒ‰èµ„æºé¡ºåºæ¥é”ï¼Œä¹Ÿæ˜¯èµ·ä¸äº†å•¥ä½œç”¨å§ï¼ï¼Ÿï¼Œ","like_count":12,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443196,"discussion_content":"èƒ½èµ·ä½œç”¨ï¼Œè¿™ä¿©æ“ä½œä¸ä¼šæ­»é”\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552537364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1178651,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fc/1b/7fa5823c.jpg","nickname":"åœ¨ä¸‹ä»¤ç‹å†²","note":"","ucode":"6228893CCF8C09","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293178,"discussion_content":"è¿™ç§æƒ…å†µä¸å«æ­»é”ï¼Œæç«¯æƒ…å†µä¸‹å°±æ˜¯è·å–é”è¶…æ—¶ï¼Œè´¦æˆ·3å¾€5è½¬è´¦å®Œæˆäº†ä¹‹åï¼Œè´¦æˆ·1è½¬3å°±èƒ½è·å–åˆ°3çš„é”äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1595469165,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1083238,"avatar":"https://static001.geekbang.org/account/avatar/00/10/87/66/31629628.jpg","nickname":"MaO","note":"","ucode":"3D839733E87435","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296724,"discussion_content":"å®é™…ç¯å¢ƒä¸­å¯èƒ½ä¼šå‡ºç°å› ä¸ºç­‰å¾…å…³é”®èµ„æºè€Œå¯¼è‡´å¤§é‡è¶…æ—¶ï¼Œä½†ä¸ä¼šæ­»é”å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596632502,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1063308,"avatar":"https://static001.geekbang.org/account/avatar/00/10/39/8c/089525aa.jpg","nickname":"å°ä¹™å“¥","note":"","ucode":"C77E79BEA0C325","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292177,"discussion_content":"å¯ä»¥æ‰§è¡Œçš„ï¼Œä¸ä¼šæ­»é”ã€‚æˆ‘åˆšå¼€å§‹ä¹Ÿæœ‰è¿™ä¸ªç–‘é—®ã€‚åŒæ—¶è½¬è´¦çš„è¯ï¼Œæ€»æœ‰ä¸€ä¸ªä¼šæˆåŠŸï¼Œå¦å¤–ä¸€ä¸ªå°±ä¼šè¢«é˜»å¡äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595130813,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1810576,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/eLNeJNaEkwGSK7xvtamMibVLMy2MpbIqX3iaEhT7JtSnTRMRTwZ2j4HX7WAapiashbiaBDVriaXKSP0Oeic6ZAEVEXag/132","nickname":"M","note":"","ucode":"06F26E1D62E9C9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":242062,"discussion_content":"åªè¦æ˜¯A-B-C-D-Aè¿™ç§çš„å°±ä¼šå‡ºç°æ­»é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587462126,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1587129,"avatar":"https://static001.geekbang.org/account/avatar/00/18/37/b9/e72b2e2e.jpg","nickname":"Harvey","note":"","ucode":"9658EE9693574A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1217,"discussion_content":"obj1 > obj2 ,  å‡å¦‚ä»å¤§åˆ°å°é¡ºåºä¸Šé”   Açº¿ç¨‹é”äº†obj1  é‚£Bçº¿ç¨‹è‚¯å®šé”ä¸äº†obj1ï¼Œ å³ä¸ä¼šæ­»é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562406968,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1055854,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1c/6e/6c5f5734.jpg","nickname":"ç»ˆç»“è€…999å·","note":"","ucode":"33ADE61580B6DD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1587129,"avatar":"https://static001.geekbang.org/account/avatar/00/18/37/b9/e72b2e2e.jpg","nickname":"Harvey","note":"","ucode":"9658EE9693574A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":163986,"discussion_content":"Bçº¿ç¨‹åªä¼šé”obj2æ˜¯å˜›ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581133432,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":1217,"ip_address":""},"score":163986,"extra":""}]}]},{"had_liked":false,"id":74165,"user_name":"Howie","can_delete":false,"product_type":"c1","uid":1127629,"ip_address":"","ucode":"30393BD92D9ADD","user_header":"https://static001.geekbang.org/account/avatar/00/11/34/cd/4e2cd598.jpg","comment_is_top":false,"comment_ctime":1552123172,"is_pvip":false,"replies":[{"id":"27129","content":"è‡ªæ—‹é”åœ¨JVMé‡Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„é”æœºåˆ¶ï¼Œè‡ªè¯©ä¸ä¼šé˜»å¡çº¿ç¨‹çš„ã€‚å’±ä»¬è¿™ä¸ªå…¶å®è¿˜æ˜¯ä¼šé˜»å¡çº¿ç¨‹çš„ã€‚ä¸è¿‡åŸç†éƒ½ä¸€æ ·ï¼Œä½ è¿™æ ·ç†è§£ä¹Ÿæ²¡é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","comment_id":74165,"uid":"1269969","ip_address":"","utype":1,"ctime":1552138107,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"53091730724","product_id":100023901,"comment_content":"while å¾ªç¯å°±æ˜¯ä¸€ä¸ªè‡ªæ—‹é”æœºåˆ¶å§ï¼Œè‡ªæ—‹é”çš„è¯è¦å…³æ³¨å®ƒçš„å¾ªç¯æ—¶é—´ï¼Œä¸èƒ½ä¸€ç›´å¾ªç¯ä¸‹å»ï¼Œä¸ç„¶ä¼šæµªè´¹ cpu èµ„æºã€‚","like_count":12,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442476,"discussion_content":"è‡ªæ—‹é”åœ¨JVMé‡Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„é”æœºåˆ¶ï¼Œè‡ªè¯©ä¸ä¼šé˜»å¡çº¿ç¨‹çš„ã€‚å’±ä»¬è¿™ä¸ªå…¶å®è¿˜æ˜¯ä¼šé˜»å¡çº¿ç¨‹çš„ã€‚ä¸è¿‡åŸç†éƒ½ä¸€æ ·ï¼Œä½ è¿™æ ·ç†è§£ä¹Ÿæ²¡é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552138107,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75828,"user_name":"GP","can_delete":false,"product_type":"c1","uid":1099980,"ip_address":"","ucode":"01115F293F02C0","user_header":"https://static001.geekbang.org/account/avatar/00/10/c8/cc/d52d3317.jpg","comment_is_top":false,"comment_ctime":1552476948,"is_pvip":false,"replies":[{"id":"27657","content":"ä¿æŠ¤çš„æ˜¯å¯¹è±¡é‡Œé¢çš„æˆå‘˜ï¼Œè¿™ä¿©å¯¹è±¡å˜ä¹Ÿåªèƒ½æ˜¯é‡Œé¢æˆå‘˜å˜ï¼Œç›¸å¯¹äºé‡Œé¢çš„æˆå‘˜æ¥è¯´ï¼Œè¿™ä¿©å¯¹è±¡æ˜¯æ°¸è¿œä¸ä¼šå˜çš„ã€‚ä½ å¯ä»¥è¿™æ ·ç†è§£ã€‚ä¸æ˜¯ç»å¯¹ä¸èƒ½ç”¨äºå¯å˜å¯¹è±¡ï¼Œåªæ˜¯ä¸€æ¡æœ€ä½³å®è·µã€‚","user_name":"ä½œè€…å›å¤","comment_id":75828,"uid":"1269969","ip_address":"","utype":1,"ctime":1552483458,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":2,"race_medal":0,"score":"48797117204","product_id":100023901,"comment_content":"é—®ä¸‹ï¼Œä¸ŠèŠ‚æœ€åè¯´åˆ°ï¼Œä¸èƒ½ç”¨å¯å˜å¯¹è±¡åšé”ï¼Œè¿™é‡Œä¸ºä½•åˆsynchronizedï¼ˆleftï¼‰ï¼Ÿ","like_count":11,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443047,"discussion_content":"ä¿æŠ¤çš„æ˜¯å¯¹è±¡é‡Œé¢çš„æˆå‘˜ï¼Œè¿™ä¿©å¯¹è±¡å˜ä¹Ÿåªèƒ½æ˜¯é‡Œé¢æˆå‘˜å˜ï¼Œç›¸å¯¹äºé‡Œé¢çš„æˆå‘˜æ¥è¯´ï¼Œè¿™ä¿©å¯¹è±¡æ˜¯æ°¸è¿œä¸ä¼šå˜çš„ã€‚ä½ å¯ä»¥è¿™æ ·ç†è§£ã€‚ä¸æ˜¯ç»å¯¹ä¸èƒ½ç”¨äºå¯å˜å¯¹è±¡ï¼Œåªæ˜¯ä¸€æ¡æœ€ä½³å®è·µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552483458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1533266,"avatar":"https://static001.geekbang.org/account/avatar/00/17/65/52/07c09c7f.jpg","nickname":"josancpp","note":"","ucode":"0CDC39B3E716A3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":265162,"discussion_content":"é”ä½çš„å¯¹è±¡æ²¡å˜ï½åœ°å€æ²¡å˜","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1589377977,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75643,"user_name":"é•¿çœ‰_å¼ æ°¸","can_delete":false,"product_type":"c1","uid":1442279,"ip_address":"","ucode":"B3DCA68BDD473E","user_header":"https://static001.geekbang.org/account/avatar/00/16/01/e7/091804b7.jpg","comment_is_top":false,"comment_ctime":1552442849,"is_pvip":false,"replies":[{"id":"27608","content":"æ˜¯å•Šï¼Œæ‰€ä»¥çŸ¥è¯†åªæ˜¯çŸ¥è¯†ï¼Œä¸æ˜¯èƒ½åŠ›","user_name":"ä½œè€…å›å¤","comment_id":75643,"uid":"1269969","ip_address":"","utype":1,"ctime":1552455004,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"48797083105","product_id":100023901,"comment_content":"å…³é”®æ˜¯å¦‚ä½•æ‰¾åˆ°æœ€åˆé€‚çš„é”çš„åŠ›åº¦ã€‚","like_count":11,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442971,"discussion_content":"æ˜¯å•Šï¼Œæ‰€ä»¥çŸ¥è¯†åªæ˜¯çŸ¥è¯†ï¼Œä¸æ˜¯èƒ½åŠ›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552455004,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74725,"user_name":"Nero.t.Kang","can_delete":false,"product_type":"c1","uid":1111864,"ip_address":"","ucode":"0F2806A17E3198","user_header":"https://static001.geekbang.org/account/avatar/00/10/f7/38/1b74f53d.jpg","comment_is_top":false,"comment_ctime":1552286777,"is_pvip":false,"replies":[{"id":"27268","content":"æœ‰åŒºåˆ«ï¼Œå¦‚æœè½¬è´¦æ“ä½œå¾ˆè€—æ—¶ï¼Œé‚£ä¹ˆa-b,c-dèƒ½å¹¶è¡Œè¿˜æ˜¯æœ‰ä»·å€¼çš„<br>","user_name":"ä½œè€…å›å¤","comment_id":74725,"uid":"1269969","ip_address":"","utype":1,"ctime":1552305986,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":5,"race_medal":0,"score":"48796927033","product_id":100023901,"comment_content":"è™½ç„¶çœ‹èµ·æ¥ while(!actr.apply(this, target));åªæ˜¯é”ä½äº†ä¸¤ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯å› ä¸ºactræ˜¯ä¸€ä¸ªå•ä¾‹çš„å¯¹è±¡ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œçš„æ—¶å€™ä¹Ÿéœ€è¦é”ä½actrï¼Œåœ¨å¤šçº¿ç¨‹çŠ¶æ€ä¸‹ä¹Ÿç›¸å½“äºæ˜¯ä¸²è¡ŒåŒ–äº†ï¼Œé‚£ä¹ˆè¿™å’ŒåŠ ä¸Šä¸€ä¸ªAccount.classçš„ç±»é”çš„ä¸²è¡ŒåŒ–æœ‰ä»€ä¹ˆåŒºåˆ«å—?è¯·è€å¸ˆèµæ•™ï¼Œè°¢è°¢ã€‚","like_count":11,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442662,"discussion_content":"æœ‰åŒºåˆ«ï¼Œå¦‚æœè½¬è´¦æ“ä½œå¾ˆè€—æ—¶ï¼Œé‚£ä¹ˆa-b,c-dèƒ½å¹¶è¡Œè¿˜æ˜¯æœ‰ä»·å€¼çš„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552305986,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2697700,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/LFJZ4x47rvShGhsePLIxc8EzdlBxAmVAIjJ2FQZ4NEpo8E4JCZQEOb2NIfOuiaQLL6Otkt7W3Rmu6Tv3AkgYdRA/132","nickname":"é”®ç›˜ä¸Šçš„é­”æœ¯","note":"","ucode":"A731D721FB8D3A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":554261,"discussion_content":"è€å¸ˆï¼Œè¿˜æ˜¯æ²¡æ˜ç™½åŒºåˆ«åœ¨å“ªé‡Œã€‚ a-bç”³è¯·èµ„æº(æŒæœ‰å•ä¾‹å¯¹è±¡actré”)ï¼Œç„¶åè½¬è´¦ï¼Œå†é‡Šæ”¾èµ„æº(é‡Šæ”¾å•ä¾‹actré”)ã€‚ ç”³è¯·èµ„æºå¦‚æœæ˜¯ä¸²è¡Œçš„ï¼Œ c-dæ­¤æ—¶æ ¹æœ¬æ— æ³•ç”³è¯·åˆ°èµ„æºï¼Œå¿…é¡»ç­‰åˆ°a-bè½¬è´¦ç»“æŸäº†ï¼Œé‡Šæ”¾äº†æ‰è¡Œ(finallyæ‰é‡Šæ”¾ï¼Œæ˜¯åœ¨è½¬è´¦åçš„)ã€‚  æ€ä¹ˆå¯èƒ½ä¼šå‡ºç°a-bï¼Œc-då¹¶è¡Œè½¬è´¦å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646291675,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":442662,"ip_address":""},"score":554261,"extra":""}]},{"author":{"id":1771658,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/08/8a/c141ff16.jpg","nickname":"I am watermelon","note":"","ucode":"009EFA2065221C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":265848,"discussion_content":"æ„Ÿè§‰è€æ˜¯è¯´çš„è¿™ä¸ªå¹¶è¡Œæ˜¯æŒ‡è¿›ç¨‹çš„å¹¶è¡Œï¼Œä¸¤ä¸ªè¿›ç¨‹æœ‰ä¸¤ä¸ªå•ä¾‹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1589446859,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1554995,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ba/33/2d83d174.jpg","nickname":"æ—¶å…‰å®ˆæŠ¤è€…-åŸºå…°","note":"","ucode":"F0B0887B1979D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1771658,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/08/8a/c141ff16.jpg","nickname":"I am watermelon","note":"","ucode":"009EFA2065221C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358006,"discussion_content":"a-bå¾ˆè€—æ—¶çš„è¯åœ¨è¿™æœŸé—´c-dæœ‰å¯èƒ½è·å–åˆ°Allocatoré”å»åå»è½¬è´¦ï¼Œæ­¤æ—¶a-bï¼Œc-då¹¶è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615903574,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":265848,"ip_address":""},"score":358006,"extra":""},{"author":{"id":2697700,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/LFJZ4x47rvShGhsePLIxc8EzdlBxAmVAIjJ2FQZ4NEpo8E4JCZQEOb2NIfOuiaQLL6Otkt7W3Rmu6Tv3AkgYdRA/132","nickname":"é”®ç›˜ä¸Šçš„é­”æœ¯","note":"","ucode":"A731D721FB8D3A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1554995,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ba/33/2d83d174.jpg","nickname":"æ—¶å…‰å®ˆæŠ¤è€…-åŸºå…°","note":"","ucode":"F0B0887B1979D2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554262,"discussion_content":"ä¸æ‡‚ï¼Œa-bé‡Šæ”¾é”æ˜¯åœ¨finallyå—é‡Œï¼Œè¦ç­‰åˆ°a-bè½¬è´¦ç»“æŸå§ã€‚ è¿™ä¸ªæ—¶å€™c-dæ‰èƒ½æ‹¿åˆ°é”ï¼Œç„¶åå†è½¬è´¦ã€‚ æ€ä¹ˆå¹¶è¡Œè½¬è´¦ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646291838,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":358006,"ip_address":""},"score":554262,"extra":""}]}]},{"had_liked":false,"id":126504,"user_name":"æ’’æ—¦çš„å •è½","can_delete":false,"product_type":"c1","uid":1116864,"ip_address":"","ucode":"15F6AA41EE556F","user_header":"https://static001.geekbang.org/account/avatar/00/11/0a/c0/401c240e.jpg","comment_is_top":false,"comment_ctime":1566397354,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"40221103018","product_id":100023901,"comment_content":"è™½ç„¶ä¸Šé¢ä¸¤ç§é”çš„æ–¹å¼éƒ½æ˜¯ä¸²è¡ŒåŒ–äº†ï¼Œä½†æ˜¯å…·ä½“è¿˜æ˜¯æœ‰ä¸€ç‚¹åŒºåˆ«çš„ï¼šsynchronized(Account.class)çš„æ–¹å¼ç›¸å½“äºA-&gt;B è½¬è´¦ï¼ŒC-&gt;Dè½¬è´¦ å…ˆåæ‰§è¡Œï¼Œè€Œ actr.apply(this, target)çš„æ–¹å¼åˆ™æ˜¯apply--&gt;è½¬è´¦--&gt;freeè¿™æ ·çš„ä¸²è¡Œæ–¹å¼æ‰§è¡Œï¼Œä½†æ˜¯åœ¨è½¬è´¦ä¸­æ˜¯å¯ä»¥A-&gt;Bï¼ŒC-&gt;Dè½¬è´¦çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œçš„ï¼Œæ­£å¦‚æ–‡ä¸­æåˆ°çš„applyæ–¹æ³•è€—æ—¶å¾ˆå°‘ æ‰€ä»¥æ¯”å¦‚ä¸€æ¬¡è½¬è´¦è€—æ—¶200ms,apply+releaseæ–¹å¼æ‰§è¡Œè¦20ms,æ‰€ä»¥ç”¨synchronizedçš„æ–¹å¼A-&gt;B,C-&gt;Dåˆ™éœ€è¦è€—æ—¶400ms,è€Œappyçš„æ–¹å¼åˆ™è¦200+20*2=240ms,å¹¶ä¸”åŒæ—¶è½¬è´¦çš„äººè¶Šå¤š applyæ–¹å¼çš„è½¬è´¦å¹¶è¡Œåº¦è¶Šé«˜ æ¯”synchronizedçš„æ–¹å¼çš„ä¼˜åŠ¿è¶Šæ˜æ˜¾ã€‚ ä½†æ˜¯æœ‰ä¸€ä¸ªä¸æ˜ç™½çš„åœ°æ–¹,å¯¹äºå·²ç»é€šè¿‡applyè·å–é”çš„çº¿ç¨‹ï¼Œæ„Ÿè§‰æ²¡æœ‰å¿…è¦å¯¹è½¬è´¦çš„è´¦æˆ·é”å®šäº†ï¼Œå› ä¸ºå…¶ä»–çš„çº¿ç¨‹æƒ³å¯¹ç›¸åŒçš„è´¦æˆ·è¿›è¡Œè½¬è´¦ è°ƒç”¨applyæ–¹å¼æ˜¯æ²¡æ³•è¿”å›trueçš„(å·²ç»æœ‰çº¿ç¨‹å¯¹liståŠ å…¥è´¦æˆ·äº†) ","like_count":9,"discussions":[{"author":{"id":2192295,"avatar":"https://static001.geekbang.org/account/avatar/00/21/73/a7/c8ea0a62.jpg","nickname":"åŒ—äº¬å°å¦","note":"","ucode":"5A327F761E2DFA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373044,"discussion_content":"è¦é”å®šï¼Œè¦æ•°æ®å†™å¯¹å…¶ä»–çº¿ç¨‹çš„å¯è§æ€§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620575912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1341612,"avatar":"https://static001.geekbang.org/account/avatar/00/14/78/ac/e5e6e7f3.jpg","nickname":"å¤å¤œ","note":"","ucode":"0A82D3CFCEDF07","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":274599,"discussion_content":"å‰å®³ï¼Œä»”ç»†çœ‹äº†ä½ çš„å›ç­”ä¸¤éï¼Œå¯¹æ¯”ç€ä»£ç ï¼Œæœ‰äº†æ›´æ·±åˆ»çš„ç†è§£ï¼Œå¤šè°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590593529,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74844,"user_name":"Î»","can_delete":false,"product_type":"c1","uid":1441520,"ip_address":"","ucode":"71709A827123E0","user_header":"https://static001.geekbang.org/account/avatar/00/15/fe/f0/135c2cd9.jpg","comment_is_top":false,"comment_ctime":1552303749,"is_pvip":false,"replies":[{"id":"27287","content":"æ˜¯ä¸²è¡Œï¼Œä½†æ˜¯å…è®¸Aè½¬Bï¼ŒCè½¬D","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552310309,"ip_address":"","comment_id":74844,"utype":1}],"discussion_count":4,"race_medal":0,"score":"35912042117","product_id":100023901,"comment_content":"å•ä¾‹å¯¼è‡´æ“ä½œä¹Ÿæ˜¯ä¸²è¡Œçš„å§","like_count":8,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442704,"discussion_content":"æ˜¯ä¸²è¡Œï¼Œä½†æ˜¯å…è®¸Aè½¬Bï¼ŒCè½¬D","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552310309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1810576,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/eLNeJNaEkwGSK7xvtamMibVLMy2MpbIqX3iaEhT7JtSnTRMRTwZ2j4HX7WAapiashbiaBDVriaXKSP0Oeic6ZAEVEXag/132","nickname":"M","note":"","ucode":"06F26E1D62E9C9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":229623,"discussion_content":"å¦‚æœé”å¯¹è±¡æ˜¯sy(actr)è¿™ç§çš„è¯ï¼Œå°±åŒ…åœºäº†ï¼Œæ‰€æœ‰è½¬è´¦æ“ä½œå˜æˆäº†ä¸²è¡Œã€‚\nè€Œä¾‹å­ä¸­é”å¯¹è±¡æ˜¯thisã€targetï¼Œæ‰€ä»¥å³ä¾¿ä¸²è¡Œä¹Ÿæ”¯æŒAè½¬Bï¼ŒCè½¬D","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586675093,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1109892,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ef/84/a0ffbd8b.jpg","nickname":"ç™½ä¸‰å²","note":"","ucode":"39594C357FEA1B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":226198,"discussion_content":"ç”³è¯·é”çš„æ—¶å€™æ˜¯ä¸²è¡Œï¼Œåç»­çš„è½¬è´¦æ“ä½œæ˜¯å¹¶è¡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586427735,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1225224,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","nickname":"å°”å†¬æ©™","note":"","ucode":"0B013A49BC18DA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1953,"discussion_content":"è¯·é—®è¿™ä»£ä¹°é‡Œæ˜¯å•ä¾‹ä¹ˆï¼Œæˆ‘æ€ä¹ˆæ²¡çœ‹å‡ºæ¥ã€‚ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563117317,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74121,"user_name":"winter","can_delete":false,"product_type":"c1","uid":1323233,"ip_address":"","ucode":"04D4DE4A60C4C7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLBywibUar2Q8TmCy6ZrNQk9qia7sQgosBYInmygZI118vzrWu4CfUQnbOefvP82c8Inhb6xVqymhvYw/132","comment_is_top":false,"comment_ctime":1552107530,"is_pvip":true,"replies":[{"id":"27112","content":"æ˜¯çš„ï¼Œæœ‰æ—¶å€™æ€§èƒ½æ›´å·®ï¼Œæ¯•ç«Ÿè¦synchronizedä¸‰æ¬¡ã€‚ä½†æ˜¯æœ‰äº›åœºæ™¯ä¼šæ›´å¥½ï¼Œä¾‹å¦‚è½¬è´¦æ“ä½œå¾ˆæ…¢ï¼Œè€Œapplyå¾ˆå¿«ï¼Œè¿™ä¸ªæ—¶å€™å…è®¸a-&gt;b,c-&gt;då¹¶è¡Œå°±æœ‰ä¼˜åŠ¿äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552114905,"ip_address":"","comment_id":74121,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31616878602","product_id":100023901,"comment_content":"æˆ‘çš„æƒ³æ³•æ˜¯ï¼Œå¦‚æœAccountå¯¹è±¡ä¸­åªæœ‰è½¬è´¦ä¸šåŠ¡çš„è¯ï¼Œwhile(actr.apply(this, target)å’Œå¯¹è±¡é”synchronized(Account.class)çš„æ€§èƒ½ä¼˜åŠ¿å‡ ä¹çœ‹ä¸å‡ºæ¥ï¼Œsynchronized(Account.class)çš„æ€§èƒ½ç”šè‡³æ›´å·®ï¼›ä½†æ˜¯å¦‚æœAccountå¯¹è±¡ä¸­å¦‚æœè¿˜æœ‰å…¶å®ƒä¸šåŠ¡ï¼Œæ¯”å¦‚æŸ¥çœ‹ä½™é¢ç­‰åŠŸèƒ½ä¹ŸåŠ äº†synchronized(Account.class)ä¿®é¥°ï¼Œé‚£ä¹ˆæŠŠå•ç‹¬çš„è½¬è´¦ä¸šåŠ¡å‰¥ç¦»å‡ºæ¥ï¼Œæ€§èƒ½çš„æå‡å¯èƒ½å°±æ¯”è¾ƒæ˜æ˜¾äº†ã€‚<br>","like_count":7,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442457,"discussion_content":"æ˜¯çš„ï¼Œæœ‰æ—¶å€™æ€§èƒ½æ›´å·®ï¼Œæ¯•ç«Ÿè¦synchronizedä¸‰æ¬¡ã€‚ä½†æ˜¯æœ‰äº›åœºæ™¯ä¼šæ›´å¥½ï¼Œä¾‹å¦‚è½¬è´¦æ“ä½œå¾ˆæ…¢ï¼Œè€Œapplyå¾ˆå¿«ï¼Œè¿™ä¸ªæ—¶å€™å…è®¸a-&amp;gt;b,c-&amp;gt;då¹¶è¡Œå°±æœ‰ä¼˜åŠ¿äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552114905,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143411,"user_name":"æ— è¨€çš„çº¦å®š","can_delete":false,"product_type":"c1","uid":1128953,"ip_address":"","ucode":"5E8046EB6B7956","user_header":"https://static001.geekbang.org/account/avatar/00/11/39/f9/acfb9a48.jpg","comment_is_top":false,"comment_ctime":1571706607,"is_pvip":false,"replies":[{"id":"55684","content":"éƒ½åœ¨ï¼Œè¯´æ˜éƒ½è¢«åˆ«äººæ‹¿èµ°äº†ï¼Œæ‰€ä»¥ä¸èƒ½å†åˆ†é…ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1571926079,"ip_address":"","comment_id":143411,"utype":1}],"discussion_count":4,"race_medal":0,"score":"14456608495","product_id":100023901,"comment_content":"class Allocator {<br>  private List&lt;Object&gt; als =<br>    new ArrayList&lt;&gt;();<br>  &#47;&#47; ä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰èµ„æº<br>  synchronized boolean apply(<br>    Object from, Object to){<br>    if(als.contains(from) ||<br>         als.contains(to)){<br>      return false;  <br>    } else {<br>      als.add(from);<br>      als.add(to);  <br>    }<br>    return true;<br>  }<br>  &#47;&#47; å½’è¿˜èµ„æº<br>  synchronized void free(<br>    Object from, Object to){<br>    als.remove(from);<br>    als.remove(to);<br>  }<br>}<br><br>ç›®æµ‹ifæ¡ä»¶æœ‰é—®é¢˜ï¼Œå½“fromå’Œtoéƒ½åœ¨listä¸­æ—¶ï¼Œè¿”å›çš„æ˜¯false","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471523,"discussion_content":"éƒ½åœ¨ï¼Œè¯´æ˜éƒ½è¢«åˆ«äººæ‹¿èµ°äº†ï¼Œæ‰€ä»¥ä¸èƒ½å†åˆ†é…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571926079,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2598274,"avatar":"","nickname":"Geek_97d1b0","note":"","ucode":"B8FF1ED262B612","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370770,"discussion_content":"å½’è¿˜èµ„æºæ˜¯remove,è¯·æ±‚èµ„æºæ˜¯æ·»åŠ ,è¿™ä¸ªè®¾è®¡æœ‰ç‚¹åå‘æ€ç»´å•Š,æœ‰ç‚¹æ›²æŠ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619527753,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1150234,"avatar":"https://static001.geekbang.org/account/avatar/00/11/8d/1a/ecacb992.jpg","nickname":"æ–‡å“²","note":"","ucode":"62DBD7CA1E7726","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298398,"discussion_content":"ä»–çš„ç®¡ç†å‘˜æ˜¯å•ä¾‹ï¼Œå¦‚æœå½“å‰çº¿ç¨‹(å³å½“å‰ç”¨æˆ·)åˆ¤æ–­æœ‰è´¦æœ¬ï¼ˆè¿™é‡Œçš„è´¦æœ¬è¦é—¨éƒ½æœ‰è¦ä¹ˆéƒ½æ²¡æœ‰ï¼‰ï¼Œå°±è¯´æ˜åˆ«äººå·²ç»æ‹¿èµ°è´¦æœ¬äº†ï¼Œè¿›å…¥è´¦æˆ·è½¬è´¦ç¯èŠ‚äº†ï¼Œè¿™æ—¶ï¼Œè¯¥çº¿ç¨‹åªèƒ½ç­‰é‚£ä¸ªçº¿ç¨‹é‡Šæ”¾è´¦æœ¬ã€‚ä¸»è¦æ˜¯å› ä¸ºå•ä¾‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597289190,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2598274,"avatar":"","nickname":"Geek_97d1b0","note":"","ucode":"B8FF1ED262B612","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1150234,"avatar":"https://static001.geekbang.org/account/avatar/00/11/8d/1a/ecacb992.jpg","nickname":"æ–‡å“²","note":"","ucode":"62DBD7CA1E7726","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370771,"discussion_content":"æ–‡ä¸å¯¹é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619528112,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":298398,"ip_address":""},"score":370771,"extra":""}]}]},{"had_liked":false,"id":74298,"user_name":"çº¦ä¹¦äºš","can_delete":false,"product_type":"c1","uid":1046714,"ip_address":"","ucode":"81EA27ADD9EC1A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/14e05601.jpg","comment_is_top":false,"comment_ctime":1552183694,"is_pvip":false,"replies":[{"id":"27172","content":"ä¸‹ä¸€ç« è®²ä¼˜åŒ–","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552190924,"ip_address":"","comment_id":74298,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14437085582","product_id":100023901,"comment_content":"è€ƒè™‘ç°å®åœºæ™¯ï¼Œåšå‡ºå¦‚ä¸‹å‡è®¾ï¼šè½¬è´¦æ“ä½œä¼šç›¸å¯¹applyæ–¹æ³•è€—æ—¶ã€‚<br>é‚£åœ¨é«˜å¹¶å‘ä¸‹synchronized(Account.class)ä¼šä½¿å¾—æ‰€æœ‰è½¬è´¦ä¸²è¡ŒåŒ–ï¼Œä½¿ç”¨applyæ–¹æ³•èƒ½æé«˜è½¬è´¦çš„ååé‡ã€‚<br>ä½†applyæ–¹æ³•ä¹Ÿæœ‰é—®é¢˜ï¼Œåœ¨åŒä¸€ä¸ªè´¦æˆ·è½¬è´¦æ“ä½œå¹¶å‘é‡é«˜çš„åœºæ™¯ä¸‹ï¼Œapplyæ–¹æ³•é¢‘ç¹å¤±è´¥ï¼Œè½¬è´¦çš„çº¿ç¨‹ä¼šä¸æ–­çš„é˜»å¡å”¤é†’é˜»å¡å”¤é†’ï¼Œå¼€é”€å¤§ã€‚<br>ä¹Ÿè®¸åº”è¯¥æ”¹è¿›ä¸€ä¸‹ç”±Allocatorè´Ÿè´£åœ¨æœ‰èµ„æºçš„æƒ…å†µä¸‹å”¤é†’è°ƒç”¨applyçš„çº¿ç¨‹ï¼Ÿ<br>","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442517,"discussion_content":"ä¸‹ä¸€ç« è®²ä¼˜åŒ–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552190924,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":179795,"user_name":"Geek_bb89c3","can_delete":false,"product_type":"c1","uid":1331828,"ip_address":"","ucode":"0F97B5B0F2DDD6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/IZKGetBZDuMEa2VwwtesTELvLORIyV749ItgfAqNPv30n4zEv71wuGNr1aNVIVltG0icvH53DHDuqPuzNpiauWAg/132","comment_is_top":false,"comment_ctime":1582101553,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10172036145","product_id":100023901,"comment_content":"æ­»é”æ˜¯å½“ä¸¤ä¸ªä¸¤ä¸ªçº¿ç¨‹éœ€è¦å æœ‰å¤šä¸ªé”ï¼Œä¸¤ä¸ªçº¿ç¨‹éƒ½å æœ‰äº†å¯¹è±¡éœ€è¦çš„é”è€Œç­‰å¾…å¯¹æ–¹å æœ‰çš„é”çš„æ—¶å€™ã€‚ä¸¤ä¸ªçº¿ç¨‹ä¸€ç›´ç­‰å¾…å°±ä¼šå½¢æˆæ­»é”ã€‚<br><br>æ­»é”çš„æ¡ä»¶æ˜¯ï¼š<br>1.èµ„æºæ˜¯äº’æ–¥çš„ï¼Œ<br>2.å æœ‰ç­‰å¾…ï¼Œå æœ‰ä¸€ä¸ªèµ„æºï¼Œç­‰å¾…å…¶ä»–çš„èµ„æºã€‚<br>3.ä¸å¯å‰¥å¤ºã€‚çº¿ç¨‹å æœ‰èµ„æºä»¥åï¼Œä¸ä¼šè¢«å‰¥å¤ºã€‚<br>4.å¾ªç¯ç­‰å¾…ã€‚<br>è¿™å››ä¸ªé—®é¢˜ ä¸­ï¼šäº’æ–¥é—®é¢˜æ˜¯æ ¹æœ¬é—®é¢˜ï¼Œæ— æ³•è§£å†³ã€‚<br>å¯¹äº<br>1.å æœ‰ç­‰å¾…ã€‚å¯ä»¥è¦ä¹ˆå…¨éƒ¨åŠ é”ï¼Œè¦ä¹ˆéƒ½ä¸åŠ é”ã€‚<br>2.ä¸å¯å‰¥å¤ºã€‚å½“çº¿ç¨‹ç”³è¯·é”çš„æ—¶å€™ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œæ²¡æœ‰ç”³è¯·åˆ°ï¼Œè¿™ä¸ªæ—¶å€™ä¹Ÿä¼šé‡Šæ”¾è‡ªå·±å æœ‰çš„é”ã€‚<br>3.å¾ªç¯ç­‰å¾…ã€‚æŒ‰ç…§ä¸€å®šçš„é¡ºåºé”å®šèµ„æºã€‚<br><br>","like_count":2},{"had_liked":false,"id":137774,"user_name":"Mr.Jason_Sam","can_delete":false,"product_type":"c1","uid":1517294,"ip_address":"","ucode":"5CD5CE952344CB","user_header":"https://static001.geekbang.org/account/avatar/00/17/26/ee/ba1f2c31.jpg","comment_is_top":false,"comment_ctime":1569842205,"is_pvip":false,"replies":[{"id":"53014","content":"æ„Ÿè°¢å¤§å­¦è€å¸ˆğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1569928535,"ip_address":"","comment_id":137774,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10159776797","product_id":100023901,"comment_content":"å“²å­¦å®¶å°±é¤ç»å…¸è§£æ³•ï¼Œèµ„æºæ’åºå’Œæ‰˜ç®¡è€…ã€‚ä½œè€…åŸºç¡€çŸ¥è¯†æ æ çš„å•Š","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469254,"discussion_content":"æ„Ÿè°¢å¤§å­¦è€å¸ˆğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569928535,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1018706,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/52/6659dc1b.jpg","nickname":"é»‘ç±³","note":"","ucode":"E7DBEA7867862A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391111,"discussion_content":"å“²å­¦å®¶é¥¿æ­»é—®é¢˜è¯´èµ·æ¥å°±æƒ³èµ·å¤§å­¦çš„å²æœˆå•Šï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630298291,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125396,"user_name":"zyz","can_delete":false,"product_type":"c1","uid":1019339,"ip_address":"","ucode":"0092F8C0FFA375","user_header":"","comment_is_top":false,"comment_ctime":1566178902,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10156113494","product_id":100023901,"comment_content":"while(actr.apply(this, target))å’Œå¯¹è±¡é”synchronized(Account.class)æ“ä½œçš„æ—¶å€™é”å®šèŒƒå›´æ˜¯ä¸€æ ·çš„ï¼Œactræ˜¯å•ä¾‹ï¼Œä½†æ˜¯actr.apply(this, target)æ˜¯åˆ¤æ–­ä¸¤ä¸ªè´¦æˆ·æ˜¯å¦è¢«é”å®šï¼Œé©¬ä¸Šè¿”å›ç»“æœï¼ŒåŒæ—¶ä¹Ÿé‡Šæ”¾äº†actrçš„é”ã€‚","like_count":2},{"had_liked":false,"id":107411,"user_name":"æ¨é¹ç¨‹baci","can_delete":false,"product_type":"c1","uid":1205949,"ip_address":"","ucode":"3D22F6B74340A8","user_header":"https://static001.geekbang.org/account/avatar/00/12/66/bd/bd5d503e.jpg","comment_is_top":false,"comment_ctime":1561531750,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10151466342","product_id":100023901,"comment_content":"è€å¸ˆï¼Œå¯¹äºç ´åå ç”¨ç­‰å¾…æ¡ä»¶çš„ä»£ç ï¼Œæˆ‘ç†è§£æ‰€æœ‰çš„ç”³è¯·èµ„æºæ“ä½œæ˜¯ä¸²è¡Œçš„ï¼Œä½†æ˜¯åé¢çš„è½¬è´¦å°±æ”¯æŒå¹¶è¡Œæ“ä½œäº†","like_count":2},{"had_liked":false,"id":97085,"user_name":"æ±Ÿå—è±†æ²™åŒ…","can_delete":false,"product_type":"c1","uid":1061596,"ip_address":"","ucode":"4B7833260F9F2F","user_header":"https://static001.geekbang.org/account/avatar/00/10/32/dc/d3e3847f.jpg","comment_is_top":false,"comment_ctime":1558583582,"is_pvip":false,"replies":[{"id":"34748","content":"è§£å†³ä¸äº†ï¼Œsynchè·å–ä¸åˆ°é”ä¼šå‚»ç­‰","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1558616787,"ip_address":"","comment_id":97085,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10148518174","product_id":100023901,"comment_content":"è€å¸ˆæåˆ°çš„å‘ç°å®ä¸–ç•Œè¦ç­”æ¡ˆï¼Œå¯¹äºå–è´¦æœ¬è¿™ä¸ªåœºæ™¯ï¼Œå‡å¦‚å¼ ä¸‰æŸœå‘˜æ‹¿äº†aè´¦æœ¬ï¼Œç­‰å¾…bè´¦æœ¬ï¼Œæå››æŸœå‘˜æ‹¿äº†bè´¦æœ¬ï¼Œç­‰å¾…aè´¦æœ¬ã€‚è¿™ç§æƒ…å†µç°å®ä¸­ä¸€èˆ¬æ˜¯å¼ ä¸‰å’Œæå››å…ˆè‡ªè¡Œåå•†ï¼Œä¸€èˆ¬æƒ…å†µä¸‹éƒ½èƒ½åå•†å¥½ï¼Œç»™æŸä¸ªäººå…ˆç”¨ï¼Œç„¶åå¦ä¸€ä¸ªäººå†ç”¨ï¼›å¦‚æœåå•†ä¸å¥½ï¼Œä¸€èˆ¬å°±æ˜¯é—®é¢˜ä¸Šå‡ï¼Œç”±é¢†å¯¼å†³å®šè°å…ˆä½¿ç”¨ã€‚å¦‚æœsynchronizedå…³é”®å­—èƒ½å‚è€ƒè¿™ä¸ªé€»è¾‘å®ç°ï¼Œæ˜¯å¦å¯ä»¥è§£å†³ ä¸å¯æŠ¢å  è¿™ä¸ªé—®é¢˜ã€‚<br>","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451133,"discussion_content":"è§£å†³ä¸äº†ï¼Œsynchè·å–ä¸åˆ°é”ä¼šå‚»ç­‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558616787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":94868,"user_name":"Michael","can_delete":false,"product_type":"c1","uid":1435138,"ip_address":"","ucode":"2817C6A41C2E53","user_header":"https://static001.geekbang.org/account/avatar/00/15/e6/02/65a764fe.jpg","comment_is_top":false,"comment_ctime":1557913570,"is_pvip":false,"replies":[{"id":"33935","content":"æ‰“å°çš„æ—¶å€™ï¼Œé‚£ä¸‰ä¸ªçº¿ç¨‹è¿˜æ²¡æ‰§è¡Œå®Œï¼Œæ‰“å°å‰éœ€è¦joinä¸€ä¸‹é‚£ä¸‰ä¸ªçº¿ç¨‹","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1557929912,"ip_address":"","comment_id":94868,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10147848162","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæˆ‘è¿è¡Œä¸‹é¢çš„ä»£ç ä¸ºä»€ä¹ˆç»“æœæ˜¯éšæœºçš„ï¼Œæ­£ç¡®æƒ…å†µåº”è¯¥éƒ½æ˜¯200ã€‚è¯·è€å¸ˆæŒ‡æ­£<br>public class Test {<br><br>  public static void main(String[] args) throws InterruptedException {<br>    Account a = new Account();<br>    Account b = new Account();<br>    Account c = new Account();<br><br>    for (int i = 0; i &lt; 3000; i++) {<br>      Thread t1 = new Thread(()-&gt;{<br>        a.transfer(b, 100);<br>      });<br>      Thread t2 = new Thread(()-&gt;{<br>        b.transfer(c, 100);<br>      });<br><br>      Thread t3 = new Thread(()-&gt;{<br>        c.transfer(a, 100);<br>      });<br><br>      t1.start();<br>      t2.start();<br>      t3.start();<br>    }<br><br>    System.out.println(a.getBalance());<br>    System.out.println(b.getBalance());<br>    System.out.println(c.getBalance());<br>  }<br>}<br><br>class Account {<br>  private int balance = 200;<br><br>  void transfer(Account target, int amount) {<br>    synchronized (this) {<br>      synchronized (target) {<br>        if (this.balance &gt; amount) {<br>          this.balance -= amount;<br>          target.balance += amount;<br>        }<br>      }<br>    }<br>  }<br><br>  public int getBalance() {<br>    return balance;<br>  }<br>}<br>","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450239,"discussion_content":"æ‰“å°çš„æ—¶å€™ï¼Œé‚£ä¸‰ä¸ªçº¿ç¨‹è¿˜æ²¡æ‰§è¡Œå®Œï¼Œæ‰“å°å‰éœ€è¦joinä¸€ä¸‹é‚£ä¸‰ä¸ªçº¿ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557929912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90284,"user_name":"æˆ‘æ˜¯çˆ¹","can_delete":false,"product_type":"c1","uid":1269600,"ip_address":"","ucode":"E02D8A7A916B61","user_header":"https://static001.geekbang.org/account/avatar/00/13/5f/60/7ea2d646.jpg","comment_is_top":false,"comment_ctime":1556466059,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"10146400651","product_id":100023901,"comment_content":"&#47;&#47; ä¸€æ¬¡æ€§ç”³è¯·è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·ï¼Œç›´åˆ°æˆåŠŸ<br>while(!actr.apply(this, target))<br>     ;<br>è¿™é‡Œå·²ç»ä¸€æ¬¡æ€§ç”³è¯·äº†æ‰€æœ‰èµ„æºï¼Œä¸ºä»€ä¹ˆè¿˜è¦é” è½¬å‡ºå’Œè½¬å…¥ å¯¹è±¡","like_count":2,"discussions":[{"author":{"id":1613854,"avatar":"https://static001.geekbang.org/account/avatar/00/18/a0/1e/6189499c.jpg","nickname":"hqyang","note":"","ucode":"A5E9D3A403BC00","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2792,"discussion_content":"å› ä¸º while(!actr.apply(this, target))ç”³è¯·å®Œäº†æ‰€æœ‰èµ„æºå,thiså’Œtargetè¿˜æ²¡æœ‰æ‰§è¡Œè½¬è´¦æ“ä½œï¼Œå¦‚æœåœ¨è¿™ä¸ªæ—¶å€™ï¼Œå¦å¤–ä¸€ä¸ª while(!actr.apply(this, target))èµ„æºç”³è¯·æˆåŠŸåï¼Œæƒ³æƒ³ä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563936548,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1577580,"avatar":"https://static001.geekbang.org/account/avatar/00/18/12/6c/61a598e9.jpg","nickname":"è‹æš®æ²‰è§","note":"","ucode":"532B816D4EF47B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1613854,"avatar":"https://static001.geekbang.org/account/avatar/00/18/a0/1e/6189499c.jpg","nickname":"hqyang","note":"","ucode":"A5E9D3A403BC00","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":49411,"discussion_content":"ç¬¬ä¸€ä¸ª while(!actr.apply(this, target))ç”³è¯·æˆåŠŸï¼Œå¦‚æœç¬¬ä¸€ä¸ªæ²¡æœ‰actr.free(this, target),ç¬¬äºŒä¸ªwhile(!actr.apply(this, target))æ€ä¹ˆä¼šæˆåŠŸï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1573576284,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":2792,"ip_address":""},"score":49411,"extra":""}]},{"author":{"id":1334774,"avatar":"","nickname":"noma","note":"","ucode":"ADB9D589B9A798","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2438,"discussion_content":"åŒæ„ï¼Œæˆ‘è¯•äº†ä¸€ä¸‹æŠŠlä¸¤ä¸ªsynchronizedå»æ‰ï¼Œä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚å¸Œæœ›è€å¸ˆè§£ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563617160,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1577580,"avatar":"https://static001.geekbang.org/account/avatar/00/18/12/6c/61a598e9.jpg","nickname":"è‹æš®æ²‰è§","note":"","ucode":"532B816D4EF47B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1179101,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fd/dd/baeda83e.jpg","nickname":"Monster!","note":"","ucode":"74F1D3BB5E3915","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":49412,"discussion_content":"while(!actr.apply(a, b)) æˆåŠŸä»¥åï¼Œå¦‚æœæ²¡æœ‰free(a,b),while(!actr.apply(a, c)) åº”è¯¥æˆåŠŸä¸äº†å§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573576372,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":13043,"ip_address":""},"score":49412,"extra":""}]}]},{"had_liked":false,"id":88449,"user_name":"vision","can_delete":false,"product_type":"c1","uid":1229373,"ip_address":"","ucode":"A08979AEC048E6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJLrECTVEkicdKJDBCROtfjjsZ4mpCeG2nj7bTKz1JseC7icKfDCS03bSGDUDtAdO5s2ouiclkeu7s4Q/132","comment_is_top":false,"comment_ctime":1555920599,"is_pvip":false,"replies":[{"id":"31757","content":"5å‘1è½¬ï¼ŒåŠ é”é¡ºåºæ˜¯1ï¼Œ5ï¼Œè¿™æ‰å«é¡ºåº<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1555941033,"ip_address":"","comment_id":88449,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10145855191","product_id":100023901,"comment_content":"å¯¹äºç¬¬ä¸‰ç‚¹ï¼ŒæŒ‰èµ„æºé¡ºåºæ¥é”å°±èƒ½æ‰“ç ´å¾ªç¯ç­‰å¾…æœ‰ç–‘é—®ã€‚<br>ä¾‹å¦‚ï¼šè´¦æˆ· 1 å‘ è´¦æˆ· 3 è½¬è´¦<br>         è´¦æˆ· 3 å‘ è´¦æˆ· 5 è½¬è´¦<br>         è´¦æˆ· 5 å‘ è´¦æˆ· 1 è½¬è´¦ <br>3ä¸ªçº¿ç¨‹åŒæ—¶åš3ä¸ªè½¬è´¦æ“ä½œï¼Œå‡è®¾t1 æ‰§è¡Œè´¦æˆ·1è½¬è´¦æˆ·3ï¼Œé”1ç­‰å¾…é”3ï¼›t2 æ‰§è¡Œè´¦æˆ·3è½¬è´¦æˆ·5ï¼Œé”3ç­‰å¾…é”5ï¼›t3æ‰§è¡Œè´¦æˆ·5è½¬è´¦æˆ·1ï¼Œ ç­‰å¾…é”1ï¼Œè¿™æ˜¯ä¸æ˜¯å°±æ­»é”äº†ï¼Ÿ ","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447799,"discussion_content":"5å‘1è½¬ï¼ŒåŠ é”é¡ºåºæ˜¯1ï¼Œ5ï¼Œè¿™æ‰å«é¡ºåº\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555941033,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76504,"user_name":"å°ä¼Ÿ","can_delete":false,"product_type":"c1","uid":1359701,"ip_address":"","ucode":"124953423491E2","user_header":"https://static001.geekbang.org/account/avatar/00/14/bf/55/198c6104.jpg","comment_is_top":false,"comment_ctime":1552620372,"is_pvip":false,"replies":[{"id":"27935","content":"ğŸ‘ğŸ‘<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552650982,"ip_address":"","comment_id":76504,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10142554964","product_id":100023901,"comment_content":"æ‰‹å†™äº†è½¬è´¦çš„ä»£ç ï¼Œå‘ç°æ­»å¾ªç¯çš„ç¡®æ€§èƒ½æˆé—®é¢˜ï¼Œ10ä¸ªçº¿ç¨‹å¹¶å‘åŒæ ·ä¸¤ä¸ªè´¦æˆ·é—´è½¬è´¦ï¼Œä¸”è½¬è´¦é€»è¾‘ä¸è€—æ—¶ï¼Œå°±ä¼šæœ‰30wæ¬¡å·¦å³çš„é”å°è¯•ã€‚å¿…é¡»åŠ intervalå’Œtimeouté™åˆ¶é”å°è¯•çš„æ¬¡æ•°å’Œè·å–é”çš„æœ€å¤§æ—¶é•¿ï¼Œæ¥æé«˜cpuå’Œèµ„æºåˆ©ç”¨ç‡ã€‚<br><br>total lock failed time is 252153<br>pool-1-thread-10 failed 117866 times!<br>pool-1-thread-2 failed 14645 times!<br>pool-1-thread-3 failed 3661 times!<br>pool-1-thread-4 failed 6163 times!<br>pool-1-thread-5 failed 9908 times!<br>pool-1-thread-6 failed 32832 times!<br>pool-1-thread-7 failed 19087 times!<br>pool-1-thread-8 failed 1334 times!<br>pool-1-thread-9 failed 46648 times!","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443333,"discussion_content":"ğŸ‘ğŸ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552650982,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1702511,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKUVVjoibAO1cWoM0VcOcbibT0O9bbOvgjJmn6fWyKRNWgrZsOuj7mSMSubFXknOxRP3ozoicdwp1zibw/132","nickname":"è¡¡å±±å¼Ÿå­","note":"","ucode":"5C635588688A88","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216695,"discussion_content":"666","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585477952,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75492,"user_name":"walkingonair","can_delete":false,"product_type":"c1","uid":1444748,"ip_address":"","ucode":"0C8BEE064ABF8B","user_header":"https://static001.geekbang.org/account/avatar/00/16/0b/8c/db1ee0a2.jpg","comment_is_top":false,"comment_ctime":1552403818,"is_pvip":false,"replies":[{"id":"27610","content":"å¦‚æœä»…ä»…æ˜¯ç¤ºä¾‹ä»£ç å°±æ²¡å¿…è¦ï¼Œå¦‚æœè´¦æˆ·è¿˜æœ‰å…¶ä»–æ“ä½œï¼Œä¾‹å¦‚å–æ¬¾ï¼Œå°±æœ‰å¿…è¦äº†<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552455218,"ip_address":"","comment_id":75492,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10142338410","product_id":100023901,"comment_content":"å­¦ä¹ äº†ä¸‹ä¸€ç« ä»¥ååˆå›æ¥å­¦ä¹ äº†ä¸€éï¼Œæœ‰ä¸ªç–‘é—®:æ­»å¾ªç¯ä½¿ç”¨applyæ–¹æ³•åˆ¤æ–­åï¼Œé‚£ä¹ˆçº¿ç¨‹ä¼šè¢«é˜»å¡åœ¨è¿™ä¸ªæ–¹æ³•è¿™é‡Œï¼Œé‚£ä¹ˆä¸‹é¢çš„é”è½¬è´¦å¯¹è±¡çš„åŒæ­¥ä»£ç å—è¿˜æœ‰å¿…è¦å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442914,"discussion_content":"å¦‚æœä»…ä»…æ˜¯ç¤ºä¾‹ä»£ç å°±æ²¡å¿…è¦ï¼Œå¦‚æœè´¦æˆ·è¿˜æœ‰å…¶ä»–æ“ä½œï¼Œä¾‹å¦‚å–æ¬¾ï¼Œå°±æœ‰å¿…è¦äº†\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552455218,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74518,"user_name":"Asanz","can_delete":false,"product_type":"c1","uid":1005200,"ip_address":"","ucode":"430AB7ED59EE3F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/90/be01bb8d.jpg","comment_is_top":false,"comment_ctime":1552229648,"is_pvip":false,"replies":[{"id":"27236","content":"æˆ‘æ²¡æŸ¥åˆ°ï¼Œè¦ä¸ä½ ç»™èµä¸ªå¤§åï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552277443,"ip_address":"","comment_id":74518,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10142164240","product_id":100023901,"comment_content":"Coffmançš„å››æ¡åŸåˆ™æœ‰æ²¡æœ‰ä¸€ä¸ªå‘½åï¼Ÿæˆ–è€…ä¸€ä¸ªæ¯”è¾ƒæ­£å¼çš„å­¦æœ¯è¯çš„åç§°ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442587,"discussion_content":"æˆ‘æ²¡æŸ¥åˆ°ï¼Œè¦ä¸ä½ ç»™èµä¸ªå¤§åï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552277443,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74199,"user_name":"QQæ€ª","can_delete":false,"product_type":"c1","uid":1211223,"ip_address":"","ucode":"1A39B8433D9208","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","comment_is_top":false,"comment_ctime":1552140665,"is_pvip":false,"replies":[{"id":"27140","content":"æ­»å¾ªç¯é‡Œå…¶å®ä¹Ÿè¿˜é”äº†ä¸€ä¸ªå…¨å±€å¯¹è±¡","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552143430,"ip_address":"","comment_id":74199,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10142075257","product_id":100023901,"comment_content":"æ­»å¾ªç¯åªæ˜¯é”çš„æ˜¯ä¸¤ä¸ªå¯¹è±¡ï¼Œè€ŒAccounté”çš„æ˜¯æ‰€æœ‰ï¼Œä¸²è¡ŒåŒ–äº†","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442495,"discussion_content":"æ­»å¾ªç¯é‡Œå…¶å®ä¹Ÿè¿˜é”äº†ä¸€ä¸ªå…¨å±€å¯¹è±¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552143430,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74063,"user_name":"æŒ‡å°–æµé€","can_delete":false,"product_type":"c1","uid":1005381,"ip_address":"","ucode":"417009F674FAF1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/45/c418ea5c.jpg","comment_is_top":false,"comment_ctime":1552097053,"is_pvip":false,"replies":[{"id":"27105","content":"é”çš„èŒƒå›´å˜äº†ï¼Œå¦‚æœè½¬è´¦è¿™ä¸ªæ“ä½œå¾ˆè€—æ—¶ï¼Œè€Œapplyå¾ˆå¿«ï¼Œé‚£å°±æœ‰ä¼˜åŠ¿äº†ã€‚è¿™ä¸ªè¦çœ‹å…·ä½“åœºæ™¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552114077,"ip_address":"","comment_id":74063,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10142031645","product_id":100023901,"comment_content":"è¯·é—®ä¸‹ï¼Œæ—¢ç„¶Accountç±»ä¸­ï¼ŒæŒæœ‰çš„Allocatorå®ä¾‹æ—¶å•å®ä¾‹çš„ã€‚é‚£ä¹ˆåœ¨Accountä¸­è°ƒç”¨Allocator.applyæˆ–è€…Allocator.freeæ–¹æ³•æ—¶ï¼Œè¿˜æ˜¯åŒä¸€ä¸ªå¯¹è±¡é”ã€‚è·Ÿç›´æ¥é”Account.classæœ‰æ˜¯æ²¡åŒºåˆ«ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442419,"discussion_content":"é”çš„èŒƒå›´å˜äº†ï¼Œå¦‚æœè½¬è´¦è¿™ä¸ªæ“ä½œå¾ˆè€—æ—¶ï¼Œè€Œapplyå¾ˆå¿«ï¼Œé‚£å°±æœ‰ä¼˜åŠ¿äº†ã€‚è¿™ä¸ªè¦çœ‹å…·ä½“åœºæ™¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552114077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1900550,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqpYdydSevQVgL0xkj7REG9efRYeesEKnMlzSLVzcMxstvib1jD40BFqhXcJaiaX2AOeO69bf2SUx8Q/132","nickname":"æ˜¯æ„›ä¸æ˜¯çˆ±","note":"","ucode":"7577081245E620","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278898,"discussion_content":"è¯·è€å¸ˆèµæ•™ï¼Œè¿™é‡Œæ€ä¹ˆèƒ½ç¡®å®šAllocatoræ˜¯å•ä¾‹çš„å‘¢ï¼Ÿæˆ‘çœ‹äº†å•ä¾‹æ¨¡å¼çš„ä»£ç ï¼Œè¿™é‡Œçš„ä»£ç å¹¶æ²¡æœ‰å¯¹Allocatorçš„æ„é€ æ–¹æ³•è¿›è¡Œç§æœ‰åŒ–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591253880,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74059,"user_name":"ç¨‹åºå‘˜äººç”Ÿ","can_delete":false,"product_type":"c1","uid":1113668,"ip_address":"","ucode":"C5C5073D89AAA2","user_header":"https://static001.geekbang.org/account/avatar/00/10/fe/44/3e3040ac.jpg","comment_is_top":false,"comment_ctime":1552096124,"is_pvip":false,"replies":[{"id":"27067","content":"å¾ˆå¤šäººéƒ½ä¼šæƒ³åˆ°ç”¨1ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552104278,"ip_address":"","comment_id":74059,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10142030716","product_id":100023901,"comment_content":"çœ‹å®Œè¦å“­äº†ï¼Œæˆ‘å¹²è¿‡ç”¨1æ¥è§£å†³æ­»é”é—®é¢˜ï¼Œåæ¥æ”¹æˆ3å°±å¥½å¾ˆå¤šã€‚å½“ç„¶ä¸šåŠ¡åœºæ™¯ä¸æ˜¯è½¬è´¦ã€‚","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442415,"discussion_content":"å¾ˆå¤šäººéƒ½ä¼šæƒ³åˆ°ç”¨1ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552104278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74026,"user_name":"æ–°ä¸–ç•Œ","can_delete":false,"product_type":"c1","uid":1079495,"ip_address":"","ucode":"4473DC1505F158","user_header":"https://static001.geekbang.org/account/avatar/00/10/78/c7/083a3a0b.jpg","comment_is_top":false,"comment_ctime":1552087258,"is_pvip":false,"replies":[{"id":"27046","content":"é”çš„èŒƒå›´å˜äº†ï¼Œæ‰€ä»¥åœºæ™¯ä¸åŒæ€§èƒ½ä¹Ÿä¼šæœ‰å·®å¼‚ï¼Œå¹¶å‘é‡å°çš„è¯ï¼Œæ€§èƒ½è¿˜ä¼šå˜å·®<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552094923,"ip_address":"","comment_id":74026,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10142021850","product_id":100023901,"comment_content":"æ²¡æœ‰æ€§èƒ½ä¼˜åŠ¿ï¼Œalloctorçš„æ“ä½œä¹Ÿæ˜¯è·å–alloctorå¯¹è±¡çš„é”ï¼Œå’Œè·å–accountçš„å¯¹è±¡é”æœ¬è´¨æ²¡æœ‰åŒºåˆ«","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442394,"discussion_content":"é”çš„èŒƒå›´å˜äº†ï¼Œæ‰€ä»¥åœºæ™¯ä¸åŒæ€§èƒ½ä¹Ÿä¼šæœ‰å·®å¼‚ï¼Œå¹¶å‘é‡å°çš„è¯ï¼Œæ€§èƒ½è¿˜ä¼šå˜å·®\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552094923,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74016,"user_name":"è¥¿è¥¿å¼—ä¸å¡å¤«å¡","can_delete":false,"product_type":"c1","uid":1001710,"ip_address":"","ucode":"B4C27B8335B76A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/ee/872ad07e.jpg","comment_is_top":false,"comment_ctime":1552064028,"is_pvip":true,"replies":[{"id":"27096","content":"æ˜¯çš„ï¼Œé”çš„èŒƒå›´æ˜¯ä¸ªå¤§é—®é¢˜ã€‚å…è®¸A-&gt;B å’Œ C-&gt;Då¯ä»¥å¹¶è¡Œè¿˜æ˜¯å¾ˆé‡è¦çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552113158,"ip_address":"","comment_id":74016,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10141998620","product_id":100023901,"comment_content":"æ€§èƒ½ä¼˜åŠ¿è¿˜æ˜¯æœ‰çš„ï¼Œæ¯•ç«Ÿåè€…æ˜¯å¯¹è¿™ä¸ªç±»çš„æ‰€æœ‰è®¿é—®éƒ½æœ‰é”çš„åŠ¨ä½œ","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442387,"discussion_content":"æ˜¯çš„ï¼Œé”çš„èŒƒå›´æ˜¯ä¸ªå¤§é—®é¢˜ã€‚å…è®¸A-&amp;gt;B å’Œ C-&amp;gt;Då¯ä»¥å¹¶è¡Œè¿˜æ˜¯å¾ˆé‡è¦çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552113158,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":150662,"user_name":"è‹æš®æ²‰è§","can_delete":false,"product_type":"c1","uid":1577580,"ip_address":"","ucode":"532B816D4EF47B","user_header":"https://static001.geekbang.org/account/avatar/00/18/12/6c/61a598e9.jpg","comment_is_top":false,"comment_ctime":1573576743,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5868544039","product_id":100023901,"comment_content":"è€å¸ˆï¼Œåœ¨ç ´åå ç”¨ä¸”ç­‰å¾…çš„æ¡ˆä¾‹ä¸­ï¼Œç”³è¯·å®Œä¸¤ä¸ªè´¦æˆ·çš„èµ„æºåå†åˆ†åˆ«é”å®šthiså’Œtargetè´¦æˆ·ã€‚ä½ è¯´å¦‚æœè¿˜æœ‰å–æ¬¾æ“ä½œå°±éœ€è¦äº†ã€‚æˆ‘æœ‰å‡ ä¸ªé—®é¢˜ï¼š<br>1ã€å‡å¦‚a,bä¸¤ä¸ªè´¦å·åšè½¬è´¦ï¼Œå­˜å…¥alsä¸­ï¼Œé‚£ä¹ˆå¦‚æœè¦å¯¹a,båšå…¶ä»–æ“ä½œã€‚ä¸æ˜¯åº”è¯¥å…ˆåˆ¤æ–­a,bæ˜¯å¦åœ¨alsé‡Œå—ï¼Ÿä¸åœ¨æ‰å¯ä»¥ç»§ç»­æ“ä½œã€‚<br>2ã€å¦‚æœæœ‰äº†åˆ¤æ–­a,bæ˜¯å¦åœ¨alsé‡Œï¼Œæ˜¯ä¸æ˜¯å°±ä¸éœ€è¦ç”³è¯·å®Œä¸¤ä¸ªè´¦æˆ·çš„èµ„æºåå†åˆ†åˆ«é”å®šthiså’Œtargetè´¦æˆ·ï¼Ÿ","like_count":1},{"had_liked":false,"id":115517,"user_name":"æ‹¯æ•‘åœ°çƒå¥½ç´¯","can_delete":false,"product_type":"c1","uid":1339022,"ip_address":"","ucode":"7643439601EF4C","user_header":"https://static001.geekbang.org/account/avatar/00/14/6e/8e/5d309a85.jpg","comment_is_top":false,"comment_ctime":1563610171,"is_pvip":false,"replies":[{"id":"53839","content":"æ•°æ®åº“é‡Œæœ‰æ­»é”æ£€æµ‹ï¼Œä¸€èˆ¬çš„ç¨‹åºä¸ä¼šè¿™ä¸ªå¤„ç†","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1570679398,"ip_address":"","comment_id":115517,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5858577467","product_id":100023901,"comment_content":"---é—®é¢˜---<br>1. è§£å†³æ­»é”çš„æ–¹æ³•è¿˜åŒ…æ‹¬å¯¹æ­»é”çš„æ£€æµ‹ï¼ˆå¦‚é“¶è¡Œå®¶ç®—æ³•ï¼‰å’Œæ­»é”å‡ºç°åçš„å¤„ç†ï¼Œè¯·é—®è€å¸ˆè¿™ä¸¤ç§è§£å†³æ–¹æ¡ˆä¼šåœ¨å®é™…åœºæ™¯ä¸­ä½¿ç”¨å—ï¼Ÿ<br><br>è€å¸ˆå¯æŠ½ç©ºå›ç­”ï¼Œè‹¥æœ‰è¡¨è¾¾ä¸æ­£ç¡®ä¹‹å¤„ï¼Œä¹Ÿçƒ¦è¯·æŒ‡å‡ºï¼Œè°¢è°¢ï¼","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459140,"discussion_content":"æ•°æ®åº“é‡Œæœ‰æ­»é”æ£€æµ‹ï¼Œä¸€èˆ¬çš„ç¨‹åºä¸ä¼šè¿™ä¸ªå¤„ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570679398,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115254,"user_name":"ä»è¿™é‡Œèµ°æ¥","can_delete":false,"product_type":"c1","uid":1068285,"ip_address":"","ucode":"9EB775A3B36039","user_header":"https://static001.geekbang.org/account/avatar/00/10/4c/fd/2e8af037.jpg","comment_is_top":false,"comment_ctime":1563518871,"is_pvip":false,"replies":[{"id":"51088","content":"æ‚¨å®¢æ°”å•¦ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1568507414,"ip_address":"","comment_id":115254,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5858486167","product_id":100023901,"comment_content":"è€å¸ˆåˆ†æçš„å¾ˆå¥½ï¼Œè°¢è°¢ï¼","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459029,"discussion_content":"æ‚¨å®¢æ°”å•¦ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568507414,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113936,"user_name":"DOVE","can_delete":false,"product_type":"c1","uid":1584095,"ip_address":"","ucode":"5A8CC3FE7CF002","user_header":"https://static001.geekbang.org/account/avatar/00/18/2b/df/7ec4f12b.jpg","comment_is_top":false,"comment_ctime":1563189502,"is_pvip":false,"replies":[{"id":"41578","content":"å®¢æ°”å•¦ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1563235283,"ip_address":"","comment_id":113936,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5858156798","product_id":100023901,"comment_content":"è€å¸ˆè®²çš„éå¸¸é€šä¿—æ˜“æ‡‚ï¼Œä¾‹å­ä¸¾å¾—å¾ˆå¥½ï¼Œé€šè¿‡ä¾‹å­ç†è§£èµ·æ¥æ¯«ä¸è´¹åŠ›ï¼Œå›¾ç”»å¾—ä¹Ÿå¥½ï¼Œå­¦ä¹ äº†å¾ˆå¤šï¼Œè°¢è°¢è€å¸ˆï¼","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458445,"discussion_content":"å®¢æ°”å•¦ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563235283,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95751,"user_name":"linqw","can_delete":false,"product_type":"c1","uid":1134138,"ip_address":"","ucode":"09DCFE98C54DD8","user_header":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","comment_is_top":false,"comment_ctime":1558164893,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5853132189","product_id":100023901,"comment_content":"Allocatorçš„applyæ–¹æ³•æ— éœ€ä¸€è¿›æ¥å°±åŠ é”ï¼Œåªéœ€åœ¨è¦å°†å…¶é”åŠ è¿›é˜Ÿåˆ—é‡Œï¼Œç„¶åå†åˆ¤æ–­ä¸€æ¬¡ï¼Œè¿˜æœ‰Accounté‡Œä¹Ÿæ— éœ€åœ¨åŠ é”ï¼Œå› ä¸ºæœ‰ç»Ÿä¸€çš„é”åˆ†é…ï¼Œæ— éœ€åœ¨transferé‡Œé¢å†åŠ é”ï¼Œç›´æ¥è½¬è´¦å°±ok<br>class Allocator {<br>  private List&lt;Object&gt; als =<br>    new ArrayList&lt;&gt;();<br>  &#47;&#47; ä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰èµ„æº<br> boolean apply(<br>    Object from, Object to){<br>    if(als.contains(from) ||<br>         als.contains(to)){<br>      return false;  <br>    } else {<br>\tsynchronized(this) {<br>\t\tif(als.contains(from) ||<br>        \t\t\t als.contains(to)){<br>      \t\t\t return false;  <br>    \t\t\t}<br>\t\tals.add(from);<br>      \t\tals.add(to); <br>\t}<br>    }<br>    return true;<br>  }<br>  &#47;&#47; å½’è¿˜èµ„æº<br>  synchronized void free(<br>    Object from, Object to){<br>    als.remove(from);<br>    als.remove(to);<br>  }<br>}<br><br>class Account {<br>  &#47;&#47; actr åº”è¯¥ä¸ºå•ä¾‹<br>  private Allocator actr;<br>  private int balance;<br>  &#47;&#47; è½¬è´¦<br>  void transfer(Account target, int amt){<br>    &#47;&#47; ä¸€æ¬¡æ€§ç”³è¯·è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·ï¼Œç›´åˆ°æˆåŠŸ<br>    while(!actr.apply(this, target))<br>      ï¼›<br>    try{<br>       if (this.balance &gt; amt){<br>            this.balance -= amt;<br>            target.balance += amt;<br>          }<br>    } finally {<br>      actr.free(this, target)<br>    }<br>  } <br>}<br>","like_count":1,"discussions":[{"author":{"id":1360872,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c3/e8/46894786.jpg","nickname":"ProgramerM","note":"","ucode":"717C12BD80CBBE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":20858,"discussion_content":"applyå¼€å§‹çš„éƒ¨åˆ†ä¸åŠ é”æœ‰å¯è§æ€§é—®é¢˜ã€‚ å…¶ä»–çº¿ç¨‹æŠŠals  freeäº†ï¼Œä½†å®ƒçœ‹ä¸åˆ°ã€‚å¯¼è‡´è¿™ä¿©åˆ¤æ–­ä¸€ç›´ä¸ºtrueï¼Œ  \nif(als.contains(from) ||\n         als.contains(to)){\n      return false; \n }","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1569386636,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":92353,"user_name":"LiuHu","can_delete":false,"product_type":"c1","uid":1039768,"ip_address":"","ucode":"284E2025C554BB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/dd/98/883c42b4.jpg","comment_is_top":false,"comment_ctime":1557239013,"is_pvip":false,"replies":[{"id":"33513","content":"åº”è¯¥ï¼Œèƒ½ä¸ç”¨å°±ä¸ç”¨","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1557645904,"ip_address":"","comment_id":92353,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5852206309","product_id":100023901,"comment_content":"while(!actr.apply(this, target)); <br>è¿™ç§å†™æ³•åº”è¯¥æœç»å§~","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449223,"discussion_content":"åº”è¯¥ï¼Œèƒ½ä¸ç”¨å°±ä¸ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557645904,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":88814,"user_name":"Geek_e6f3ec","can_delete":false,"product_type":"c1","uid":1360738,"ip_address":"","ucode":"A0ACE49CD3F9BB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eotuhVFN9phZnUxxXueAm8rDDibjIkj0L8W7VojYRpSeXwHtDSgLW3SdrNjMQy0AcOUuMmTAQSyO3g/132","comment_is_top":false,"comment_ctime":1556007018,"is_pvip":true,"discussion_count":3,"race_medal":0,"score":"5850974314","product_id":100023901,"comment_content":"        ArrayList&lt;Object&gt; list = new ArrayList&lt;&gt;();<br>        SafeCacl a = new SafeCacl();<br>        SafeCacl b = new SafeCacl();<br>        list.add(a);<br>&#47;&#47;        list.add(b);<br><br>        if (list.contains(a)|| list.contains(b)){<br>            System.out.println(&quot;è¿›æ¥äº†&quot;);<br>        }<br><br><br>æˆ‘åœ¨æµ‹è¯•è·å–è½¬è´¦ä»£ç çš„æ—¶å€™ï¼Œæ„Ÿè§‰è¿™é‡Œæœ‰ç‚¹é—®é¢˜ï¼Œä¸¤ä¸ªå¯¹è±¡åªè¦è·å–ä¸€ä¸ªå°±è¿”å›false?","like_count":1,"discussions":[{"author":{"id":1179101,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fd/dd/baeda83e.jpg","nickname":"Monster!","note":"","ucode":"74F1D3BB5E3915","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":13047,"discussion_content":"è¿™ä¹ˆæƒ³ï¼Œå¦‚æœAåœ¨ç»™Bè½¬è´¦ï¼Œè¿™æ—¶listä¸­å°±æœ‰Aï¼Œå¦‚æœCè¦ç»™Aè½¬è´¦çš„è¯éœ€è¦æ‹¿Açš„é”ï¼Œåˆ¤æ–­list.contains(A)ç„¶åapply()è¿”å›falseï¼Œè¿™æ—¶å€™å°±è¯´æ˜Aæ­£åœ¨æœ‰å…¶ä»–æ“ä½œï¼ŒCç­‰ä¸€ä¼šæ‰èƒ½æ‹¿åˆ°Aï¼Œè¿™æ—¶å€™ä¹Ÿå°±æ˜¯A,Bä¹‹é—´çš„äº¤æ˜“å®Œæˆäº†ï¼ŒC,Aå¯ä»¥äº¤æ˜“äº†","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1568634366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1625515,"avatar":"","nickname":"Thong2018","note":"","ucode":"DA05A3B08D1DEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6102,"discussion_content":"åº”è¯¥æ˜¯list.contains(a) &amp;&amp; list.contains(b)å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566689729,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1583859,"avatar":"https://static001.geekbang.org/account/avatar/00/18/2a/f3/b9607a15.jpg","nickname":"ç»…å£«","note":"","ucode":"5B58E5A958F489","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3945,"discussion_content":"æˆ‘ä¹Ÿæœ‰è¿™ä¸ªç–‘é—®ï¼Œå¯¹ç¬¬ä¸‰ç‚¹è¿˜æ˜¯ä¸å¤ªç†è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564999175,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77716,"user_name":"æ¥Š_å®µå¤œ","can_delete":false,"product_type":"c1","uid":1019302,"ip_address":"","ucode":"7BA0CADC5F23BB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/a6/22c37c91.jpg","comment_is_top":false,"comment_ctime":1552986166,"is_pvip":false,"replies":[{"id":"28393","content":"æ„Ÿè°¢ä½ æŠŠæœ‰è¶£è¯»å‡ºæ¥äº†ğŸ˜„<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552997953,"ip_address":"","comment_id":77716,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5847953462","product_id":100023901,"comment_content":"è¨€ç®€æ„èµ…, çœŸæ˜¯å¤ªæœ‰è¶£äº†; è€å¸ˆå¯¹å¹¶å‘çš„è®²è§£æ·±å…¥æµ…å‡º! èµèµèµ!!","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443819,"discussion_content":"æ„Ÿè°¢ä½ æŠŠæœ‰è¶£è¯»å‡ºæ¥äº†ğŸ˜„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552997953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1497346,"avatar":"https://static001.geekbang.org/account/avatar/00/16/d9/02/c4e2d7e8.jpg","nickname":"Geek_Huahui","note":"","ucode":"A688B183E5CE5E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2932,"discussion_content":"è¿™æœ‰è¶£å—= =","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564042103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76421,"user_name":"","can_delete":false,"product_type":"c1","uid":1154194,"ip_address":"","ucode":"","user_header":"","comment_is_top":false,"comment_ctime":1552609391,"is_pvip":false,"replies":[{"id":"27883","content":"é‡Šæ”¾2ä¸ªèµ„æºæ˜¯åœ¨è½¬è´¦å®Œæˆä¹‹åï¼Œè€Œä¸æ˜¯whileæ‰§è¡Œå®Œã€‚çº¿ç¨‹2è·å¾—èµ„æºä¸€å®šæ˜¯çº¿ç¨‹1 æ‰§è¡Œå®Œè½¬è´¦äº†<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552623301,"ip_address":"","comment_id":76421,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5847576687","product_id":100023901,"comment_content":"class Allocator {<br>  private List&lt;Object&gt; als =<br>    new ArrayList&lt;&gt;();<br>  &#47;&#47; ä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰èµ„æº<br>  synchronized boolean apply(<br>    Object from, Object to){<br>    if(als.contains(from) ||<br>         als.contains(to)){<br>      return false;  <br>    } else {<br>      als.add(from);<br>      als.add(to);  <br>    }<br>    return true;<br>  }<br>  &#47;&#47; å½’è¿˜èµ„æº<br>  synchronized void free(<br>    Object from, Object to){<br>    als.remove(from);<br>    als.remove(to);<br>  }<br>}<br><br>class Account {<br>  &#47;&#47; actr åº”è¯¥ä¸ºå•ä¾‹<br>  private Allocator actr;<br>  private int balance;<br>  &#47;&#47; è½¬è´¦<br>  void transfer(Account target, int amt){<br>    &#47;&#47; ä¸€æ¬¡æ€§ç”³è¯·è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·ï¼Œç›´åˆ°æˆåŠŸ<br>    while(!actr.apply(this, target))<br>      ï¼›<br>    try{<br>      &#47;&#47; é”å®šè½¬å‡ºè´¦æˆ·<br>      synchronized(this){              <br>        &#47;&#47; é”å®šè½¬å…¥è´¦æˆ·<br>        synchronized(target){           <br>          if (this.balance &gt; amt){<br>            this.balance -= amt;<br>            target.balance += amt;<br>          }<br>        }<br>      }<br>    } finally {<br>      actr.free(this, target)<br>    }<br>  } <br>}<br>è¿™æ®µä»£ç è¿˜æ˜¯ä¼šå‘ç”Ÿæ­»é”çš„ï¼›åœºæ™¯å¦‚ä¸‹ï¼šçº¿ç¨‹1 Aè½¬è´¦ç»™Bï¼Œçº¿ç¨‹2 Bè½¬è´¦ç»™Aï¼šçº¿ç¨‹1æ‰§è¡Œå®Œwhile(!actr.apply(this, target))ï¼›è¿™æ®µä»£ç ä¹‹åï¼Œé‡Šæ”¾2ä¸ªèµ„æºï¼Œç„¶åäº¤å‡ºCPU;æ­¤æ—¶çº¿ç¨‹2ä¹Ÿæ‰§è¡Œwhile(!actr.apply(this, target))ï¼›è¿™æ®µä»£ç ï¼Œæ¥ç€çº¿ç¨‹2 è·å¾—Bèµ„æºï¼Œäº¤å‡ºCPUï¼Œç­‰å¾…ï¼›æ­¤æ—¶çº¿ç¨‹1è·å¾—Aèµ„æºï¼Œè¿™æ ·ä¸‹å»ï¼Œä¸¤ä¸ªçº¿ç¨‹è¿˜æ˜¯ä¼šæ­»é”çš„ï¼› ---- while(!actr.apply(this, target))è¿™æ®µä»£ç å’Œä¹‹åçš„ä»£ç æ²¡æœ‰å…³è”åœ¨ä¸€èµ·ï¼Œæ˜¯ç‹¬ç«‹çš„ï¼Œä¸æ˜¯åŸå­æ€§çš„ï¼›","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443299,"discussion_content":"é‡Šæ”¾2ä¸ªèµ„æºæ˜¯åœ¨è½¬è´¦å®Œæˆä¹‹åï¼Œè€Œä¸æ˜¯whileæ‰§è¡Œå®Œã€‚çº¿ç¨‹2è·å¾—èµ„æºä¸€å®šæ˜¯çº¿ç¨‹1 æ‰§è¡Œå®Œè½¬è´¦äº†\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552623301,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1326060,"avatar":"https://static001.geekbang.org/account/avatar/00/14/3b/ec/69848c5a.jpg","nickname":"é†‰æ­Œ","note":"","ucode":"6789093C19A633","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586552,"discussion_content":"å»ºè®®æ‰§è¡Œä¸‹ï¼Œå†æ¥å–·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662336784,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å››å·"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1676771,"avatar":"","nickname":"Geek_cae4a2","note":"","ucode":"28B0A987FF11DA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21056,"discussion_content":"emmmmï¼Œè™½ç„¶æ˜¯å­¦çº¿ç¨‹çš„ï¼Œä½†æ˜¯æˆ‘æœ‰ç‚¹æ²¡çœ‹æ‡‚applyé‚£å—çš„é€»è¾‘.....ï¼Œä¸ºå•¥åˆ¤æ–­æ¡ä»¶æ˜¯åŒ…å«ï¼Œä¸åº”è¯¥æ˜¯ä¸åŒ…å«ä¹ˆ...","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569418900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74672,"user_name":"Geek_c42505","can_delete":false,"product_type":"c1","uid":1232899,"ip_address":"","ucode":"6421EB85640C44","user_header":"https://static001.geekbang.org/account/avatar/00/12/d0/03/2e632d36.jpg","comment_is_top":false,"comment_ctime":1552278555,"is_pvip":false,"replies":[{"id":"27292","content":"è¿™ä¸ªè¦çœ‹åœºæ™¯ï¼Œå¦‚æœè½¬è´¦æ“ä½œè€—æ—¶é•¿ï¼Œå…è®¸Aè½¬Bï¼ŒCè½¬Då¹¶è¡Œå°±æ˜¯æœ‰æ„ä¹‰çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552310622,"ip_address":"","comment_id":74672,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5847245851","product_id":100023901,"comment_content":"Account.class é”ä½çš„æ˜¯Accountä¸‹çš„æ‰€æœ‰æ“ä½œï¼Œè™½ç„¶whileé‡Œé¢çœ‹æ˜¯åªé”äº†ä¸¤ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯applyæ–¹æ³•è¿˜æœ‰ä¸€æŠŠé”ï¼Œæ‰€æœ‰è½¬è´¦æ“ä½œéƒ½è¦è°ƒç”¨è¯¥æ–¹æ³•ï¼Œæ‰€ä»¥æ‰€æœ‰è½¬è´¦æ“ä½œéƒ½è¦ç­‰è¿™æŠŠé”ï¼Œæ€§èƒ½ä¹Ÿä¸æ˜¯å¾ˆå¥½ï¼Œå¯¹å—ï¼Ÿæœ›è€å¸ˆï¼ŒæŒ‡æ­£","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442645,"discussion_content":"è¿™ä¸ªè¦çœ‹åœºæ™¯ï¼Œå¦‚æœè½¬è´¦æ“ä½œè€—æ—¶é•¿ï¼Œå…è®¸Aè½¬Bï¼ŒCè½¬Då¹¶è¡Œå°±æ˜¯æœ‰æ„ä¹‰çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552310622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2311005,"avatar":"","nickname":"Geek_067762","note":"","ucode":"B3C3CFD1C05283","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389134,"discussion_content":"å¹¶è¡Œï¼Œå€¼å¾—æ˜¯å¤šä¸ªè¿›ç¨‹äº†å§ï¼Œæ¯”å¦‚æŠŠæœåŠ¡éƒ¨ç½²æˆé›†ç¾¤ã€‚æ¯ä¸ªæœåŠ¡éƒ½ä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹ã€‚æ¯ä¸ªè¿›ç¨‹éƒ½å¯ä»¥åŒæ—¶è·å–åˆ°é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629128234,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74631,"user_name":"çƒåœºè¯—äºº","can_delete":false,"product_type":"c1","uid":1444771,"ip_address":"","ucode":"C172FC05D9AC58","user_header":"https://static001.geekbang.org/account/avatar/00/16/0b/a3/bf1f0f9f.jpg","comment_is_top":false,"comment_ctime":1552269754,"is_pvip":false,"replies":[{"id":"27238","content":"æ•°æ®åº“ï¼Œè€Œä¸”åªèƒ½æ˜¯æ•°æ®åº“<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552277587,"ip_address":"","comment_id":74631,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847237050","product_id":100023901,"comment_content":"å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬æ˜¯æ•°æ®åº“ç”¨çš„å¤šä¸€äº›ï¼Œè¿˜æ˜¯ç”¨è¿™ä¸ªç±»å¤šä¸€äº›","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442626,"discussion_content":"æ•°æ®åº“ï¼Œè€Œä¸”åªèƒ½æ˜¯æ•°æ®åº“\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552277587,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74162,"user_name":"å¶è‰²","can_delete":false,"product_type":"c1","uid":1015131,"ip_address":"","ucode":"6F7AFB18A4A10C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7d/5b/beeeb675.jpg","comment_is_top":false,"comment_ctime":1552122274,"is_pvip":false,"replies":[{"id":"27125","content":"æ˜¯çš„ï¼Œå¾ªç¯å¾ˆæ¶ˆè€—CPUã€‚ä¸‹ä¸€æœŸä¼šä¼˜åŒ–è¿™ä¸ªé—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552137216,"ip_address":"","comment_id":74162,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5847089570","product_id":100023901,"comment_content":"å¦‚æœé”çš„ç«äº‰ä¸æ¿€çƒˆï¼Œç”¨å¾ªç¯å°±å¾ˆå®¹æ˜“è·å–åˆ°é”ï¼Œæ€§èƒ½ä¹Ÿä¼šæ›´å¥½ã€‚<br>å¦‚æœé”ç«äº‰æ¿€çƒˆï¼Œè¿™æ—¶å€™å°±éœ€è¦å¾ªç¯å¾ˆä¹…æ‰èƒ½æ‹¿åˆ°é”ï¼Œæ€§èƒ½å°±ä¸æ˜¯å¤ªå¥½äº†ï¼Œä¹Ÿä¼šæµªè´¹å¾ˆå¤šèµ„æºåœ¨å¾ªç¯ä¸Šï¼Œè¿™æ—¶å€™ç”¨synchronizeä¼šå¥½ä¸€ç‚¹ï¼Œåœ¨ç­‰å¾…é”çš„æ—¶å€™ï¼Œå…¶ä»–çº¿ç¨‹ä¼šä¼‘çœ ï¼Œå‡å°‘èµ„æºæ¶ˆè€—ã€‚","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442473,"discussion_content":"æ˜¯çš„ï¼Œå¾ªç¯å¾ˆæ¶ˆè€—CPUã€‚ä¸‹ä¸€æœŸä¼šä¼˜åŒ–è¿™ä¸ªé—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552137216,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1702511,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKUVVjoibAO1cWoM0VcOcbibT0O9bbOvgjJmn6fWyKRNWgrZsOuj7mSMSubFXknOxRP3ozoicdwp1zibw/132","nickname":"è¡¡å±±å¼Ÿå­","note":"","ucode":"5C635588688A88","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216696,"discussion_content":"66","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585477962,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74122,"user_name":"ack","can_delete":false,"product_type":"c1","uid":1440912,"ip_address":"","ucode":"69CA1233EEA8E2","user_header":"https://static001.geekbang.org/account/avatar/00/15/fc/90/c9df0459.jpg","comment_is_top":false,"comment_ctime":1552107821,"is_pvip":false,"replies":[{"id":"27113","content":"æ˜¯çš„ï¼Œè¦çœ‹åœºæ™¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552114943,"ip_address":"","comment_id":74122,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847075117","product_id":100023901,"comment_content":"è¿™ä¸ªæ–¹æ³•è¿˜æ˜¯æ¯” synchronized(Account.class) æœ‰æ€§èƒ½ä¼˜åŠ¿çš„ï¼Œå¤šä¸ªè´¦æˆ·è¿›è¡Œè½¬è´¦å·¥ä½œè¿™ä¸ªæ€§èƒ½ä¼šæ›´æ˜æ˜¾ï¼Œä¸€ä¸ªä¸²è¡Œç­‰å¾…ï¼Œä¸€ä¸ªå¯å¹¶å‘æ“ä½œã€‚","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442458,"discussion_content":"æ˜¯çš„ï¼Œè¦çœ‹åœºæ™¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552114943,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74053,"user_name":"WolvesLeader","can_delete":false,"product_type":"c1","uid":1103839,"ip_address":"","ucode":"33610E19CA2E96","user_header":"https://static001.geekbang.org/account/avatar/00/10/d7/df/fc0a6709.jpg","comment_is_top":false,"comment_ctime":1552094498,"is_pvip":false,"replies":[{"id":"27050","content":"æ•°æ®åº“è¿™ä¹ˆç‰›é€¼éƒ½å…ä¸äº†ï¼Œlinuxè¿™ä¹ˆç‰›ï¼Œä¹Ÿä¸èƒ½è‡ªè¯æ²¡æœ‰æ­»é”","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552096928,"ip_address":"","comment_id":74053,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847061794","product_id":100023901,"comment_content":"èŒ«èŒ«çš„ä»£ç æµ·æ´‹ï¼Œï¼Œï¼Œæ€ä¹ˆæ‰¾åˆ°å“ªé‡Œå‘ç”Ÿäº†æ­»é”ï¼Œï¼Œï¼Œï¼Œï¼Œ","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442410,"discussion_content":"æ•°æ®åº“è¿™ä¹ˆç‰›é€¼éƒ½å…ä¸äº†ï¼Œlinuxè¿™ä¹ˆç‰›ï¼Œä¹Ÿä¸èƒ½è‡ªè¯æ²¡æœ‰æ­»é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552096928,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74049,"user_name":"å¤šè¥„ä¸¸","can_delete":false,"product_type":"c1","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1552093344,"is_pvip":false,"replies":[{"id":"27106","content":"applyé‡Œé¢ä¹Ÿæœ‰ä¸€ä¸ªé”ï¼Œæ‰€ä»¥å¹¶ä¸å…¬å¹³ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552114233,"ip_address":"","comment_id":74049,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847060640","product_id":100023901,"comment_content":"synchronized(Account.class) å¯¼è‡´å…¶ä»–çº¿ç¨‹æ¥æŠ¢å èµ„æºæ—¶ï¼Œè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œé˜»å¡çº¿ç¨‹çš„å”¤é†’æ˜¯è¦æ¯”ä¸‹é¢è¿™ç§æ›´æ¶ˆè€—èµ„æºçš„å§ï¼Œè¿™ç§é˜»å¡åçš„æŠ¢å ï¼Œå¯ä»¥æ˜¯å…¬å¹³æˆ–è€…éå…¬å¹³çš„ç«äº‰ï¼Œâ€¦â€¦<br><br>Allocatoré‡‡ç”¨while(apply(â€¦))çš„å½¢å¼ç­‰å¾…èµ„æºçš„é‡Šæ”¾ï¼Œå¹¶ä¸ä¼šè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œä½†æ˜¯çº¿ç¨‹ä¸€ç›´å¤„äºæ´»è·ƒçŠ¶æ€ï¼Œå¾ˆå¤šçº¿ç¨‹ä¸‹ä¼šå¯¹cpuä½¿ç”¨ç‡å¢åŠ å§ï¼Œè¿™ç§çš„ç«äº‰åº”è¯¥æ˜¯ çœ‹å“ªä¸ªçº¿ç¨‹å…ˆå¾—åˆ°è¿”å›trueå§ï¼Ÿ è¿™ç§ç®—å…¬å¹³ç«äº‰è¿˜æ˜¯éå…¬å¹³ç«äº‰å‘¢ï¼Ÿ<br><br>æœ‰ç‚¹æƒ³ä¸æ˜ç™½ï¼Œæƒ³è¯·è€å¸ˆå¤§æ¦‚æé†’ä¸€ä¸‹~","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442408,"discussion_content":"applyé‡Œé¢ä¹Ÿæœ‰ä¸€ä¸ªé”ï¼Œæ‰€ä»¥å¹¶ä¸å…¬å¹³ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552114233,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359369,"user_name":"CBeann","can_delete":false,"product_type":"c1","uid":2294042,"ip_address":"é‡åº†","ucode":"1EC7CBEEFD7546","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIym7CJnvZW4Xyj9OurEClibVPcNlh4lUjiakibTlUz4h0sQffwfU4uqB1HwDROFCNsBUTOZtOGGdTiaw/132","comment_is_top":false,"comment_ctime":1665478690,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1665478690","product_id":100023901,"comment_content":"æœ‰ç‚¹åƒè‡ªæ—‹é”å’Œé‡é‡çº§é”","like_count":0},{"had_liked":false,"id":356976,"user_name":"åœ¨è·¯ä¸Š","can_delete":false,"product_type":"c1","uid":1476245,"ip_address":"é‡åº†","ucode":"2668A965FA79F2","user_header":"https://static001.geekbang.org/account/avatar/00/16/86/95/b9d960d9.jpg","comment_is_top":false,"comment_ctime":1662775949,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1662775949","product_id":100023901,"comment_content":"ä¸¤è€…éƒ½ä¼šé˜»å¡çº¿ç¨‹ï¼Œç ´åå ç”¨ä¸”ç­‰å¾…æ˜¯æ‰‹åŠ¨é˜»å¡çº¿ç¨‹ï¼Œé€šè¿‡æ­»å¾ªç¯çš„æ–¹å¼ï¼›synchronized(Account.class)è‡ªåŠ¨é˜»å¡çº¿ç¨‹ï¼Œç®¡ç¨‹ã€‚ä½†æ˜¯å‰è€…åªä¼šé˜»å¡å½“å‰æ“ä½œçš„ä¸¤ä¸ªè´¦æˆ·ç›¸å…³çš„çº¿ç¨‹ï¼Œè€Œåè€…ä¼šå°†æ‰€æœ‰çš„çº¿ç¨‹é˜»å¡","like_count":0},{"had_liked":false,"id":355656,"user_name":"authority","can_delete":false,"product_type":"c1","uid":1264706,"ip_address":"åŒ—äº¬","ucode":"E5CA431B2BBD36","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/nBqcXB2xznHoiaMrnQ3ciaibicwK36nkaYqvKvQ72wqk4fQShcnajIxzaiamwxSXPo7gOngGqAMlHnfhX1iam8nywoOg/132","comment_is_top":false,"comment_ctime":1661599055,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1661599055","product_id":100023901,"comment_content":"ç°å®åœºæ™¯ä¸‹çš„Aç”¨æˆ·ç»™Bç”¨æˆ·è½¬è´¦ï¼ŒBç”¨æˆ·ç»™Cç”¨æˆ·è½¬è´¦ã€‚è¿™ä¸¤ä¸ªæ“ä½œçš„Bç”¨æˆ·æ˜¯åŒä¸€ä¸ªå¯¹è±¡å—ï¼Ÿï¼Ÿ","like_count":0},{"had_liked":false,"id":350221,"user_name":"Geek_11dc8c","can_delete":false,"product_type":"c1","uid":1479664,"ip_address":"","ucode":"49CC02E1D0697B","user_header":"","comment_is_top":false,"comment_ctime":1656667791,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1656667791","product_id":100023901,"comment_content":"è€å¸ˆï¼Œé’ˆå¯¹è½¬è´¦è¿™ä¸ªæ–¹æ³•è€Œè¨€ï¼Œæ—¢ç„¶Allocatorå¯¹è±¡æ˜¯å•ä¾‹å¯¹è±¡ï¼Œåœ¨è·å–è¿™ä¸ªå¯¹è±¡é”æ—¶å’Œè·å–Accountç±»é”ï¼Œæ„Ÿè§‰æˆæœ¬ä¸€æ ·å•Š","like_count":0},{"had_liked":false,"id":349177,"user_name":"å¯åœˆå¯ä¸¶","can_delete":false,"product_type":"c1","uid":2015438,"ip_address":"","ucode":"EB527E176EDE91","user_header":"https://static001.geekbang.org/account/avatar/00/1e/c0/ce/eb1b4ae1.jpg","comment_is_top":false,"comment_ctime":1655783140,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1655783140","product_id":100023901,"comment_content":"æé—®ä¸€ä¸‹ï¼šæ­»é”çš„çº¿ç¨‹æ˜¯å¦å¯ä»¥è¢«ä¸­æ–­ï¼Ÿ<br>ä¾‹å¦‚ï¼šsynchronizeã€lockè¿™äº›","like_count":0},{"had_liked":false,"id":349156,"user_name":"æ²§æµ·ä¸€ç²Ÿ","can_delete":false,"product_type":"c1","uid":1482590,"ip_address":"","ucode":"146961635959E7","user_header":"https://static001.geekbang.org/account/avatar/00/16/9f/5e/479f33a6.jpg","comment_is_top":false,"comment_ctime":1655777097,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1655777097","product_id":100023901,"comment_content":"å¦‚æœé“¶è¡Œé‡Œçš„è´¦å·å¾ˆå¤š <br>private List als = new ArrayList&lt;&gt;();<br>ç”¨HashSetä¼šæ›´é«˜æ•ˆäº›å§ã€‚","like_count":0},{"had_liked":false,"id":349135,"user_name":"yzhao66","can_delete":false,"product_type":"c1","uid":1513503,"ip_address":"","ucode":"9F76363A0ECC4B","user_header":"https://static001.geekbang.org/account/avatar/00/17/18/1f/2c4cbea0.jpg","comment_is_top":false,"comment_ctime":1655768751,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1655768751","product_id":100023901,"comment_content":"æˆ‘ä»¬å‡è®¾çº¿ç¨‹ T1 æ‰§è¡Œè´¦æˆ· A è½¬è´¦æˆ· B çš„æ“ä½œï¼Œè´¦æˆ· A.transfer(è´¦æˆ· B)ï¼›åŒæ—¶çº¿ç¨‹ T2 æ‰§è¡Œè´¦æˆ· B è½¬è´¦æˆ· A çš„æ“ è¿™ç§æƒ…å†µå†ç°å®åœºæ™¯ä¼šæ€ä¹ˆå‘ç”Ÿ","like_count":0},{"had_liked":false,"id":344205,"user_name":"xiaochao321","can_delete":false,"product_type":"c1","uid":1083596,"ip_address":"","ucode":"8F5AC46CD9400C","user_header":"https://static001.geekbang.org/account/avatar/00/10/88/cc/11b10a6f.jpg","comment_is_top":false,"comment_ctime":1651370926,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651370926","product_id":100023901,"comment_content":"ä¸ºäº†è§£å†³æ€§èƒ½é—®é¢˜ï¼Œå¯ä»¥ç”¨ç»†ç²’åº¦é”æ¥è§£å†³ï¼Œä½†æ˜¯ç»†ç²’åº¦é”ä¼šå¸¦æ¥æ­»é”é—®é¢˜ï¼Œå¦‚ä½•è§£å†³æ­»é”ï¼Œä¸»è¦æ˜¯ç ´åæ‰é€ æˆæ­»é”çš„ä¸‰ä¸ªæ¡ä»¶ï¼Œç ´åå æœ‰ä¸”ç­‰å¾…æ¡ä»¶ï¼Œå¼•å…¥åè°ƒå‘˜ï¼Œç ´åä¸å¯æŠ¢ç«™ï¼Œä¸»åŠ¨é‡Šæ”¾é”ï¼Œç ´åå¾ªç¯ç­‰å¾…ï¼Œå¼•å…¥èµ„æºé¡ºåº","like_count":0},{"had_liked":false,"id":341639,"user_name":"Geek_92b8a3","can_delete":false,"product_type":"c1","uid":2642899,"ip_address":"","ucode":"706EB1F2575FAA","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLOWucpCLACCUR59wF1fPRMaJI3lUJAlFYo57ib6Maq0U9aweCuQQicAybjRYN1MeUZBQNW6LXFicyew/132","comment_is_top":false,"comment_ctime":1649746666,"is_pvip":false,"replies":[{"id":"124865","content":"å­¦ä»¥è‡´ç”¨äº†ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1269969","ctime":1649824683,"ip_address":"","comment_id":341639,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1649746666","product_id":100023901,"comment_content":"è”æƒ³åˆ°ï¼Œä¸Šä¸ªæœˆåšçš„å¾®æœåŠ¡é¡¹ç›®ä¸­çš„è½¬è´¦ä¸šåŠ¡ï¼Œè½¬å…¥è´¦æˆ·å’Œè½¬å‡ºè´¦æˆ· æˆ‘å½“æ—¶åŠ çš„åˆ†å¸ƒå¼é”ï¼Œ<br>é”idåˆ†åˆ«åŠ åœ¨äº†è¿™ä¸¤ä¸ªè½¬å…¥å’Œè½¬å‡ºè´¦æˆ·ä¸Šï¼Œä¹Ÿå­˜åœ¨æ­»é”çš„å¯èƒ½ã€‚<br>è€å¸ˆæå‡ºçš„æŒ‰ç…§idæ’åºåå†åŠ é”ï¼Œè¿™ä¸ªæ–¹æ³•ä¸é”™ï¼Œæœ‰æ—¶é—´æˆ‘æŠŠä¹‹å‰çš„ä¸šåŠ¡ä»£ç å†ä¼˜åŒ–ä¸€ä¸‹ï¼Œæ„Ÿè°¢ï¼ï¼ï¼","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":562436,"discussion_content":"å­¦ä»¥è‡´ç”¨äº†ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649824683,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":336687,"user_name":"é”®ç›˜ä¸Šçš„é­”æœ¯","can_delete":false,"product_type":"c1","uid":2697700,"ip_address":"","ucode":"A731D721FB8D3A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/LFJZ4x47rvShGhsePLIxc8EzdlBxAmVAIjJ2FQZ4NEpo8E4JCZQEOb2NIfOuiaQLL6Otkt7W3Rmu6Tv3AkgYdRA/132","comment_is_top":false,"comment_ctime":1646291218,"is_pvip":false,"replies":[{"id":"123163","content":"synchronized(Account.class)é”çš„æ˜¯æ‰€æœ‰è´¦æˆ·ï¼Œæ‰€æœ‰è´¦æˆ·åªèƒ½ä¸²è¡Œã€‚å¦å¤–ä¸€ä¸ªæ–¹å¼æ˜¯ä»…é”è½¬è´¦çš„è´¦æˆ·ï¼ŒAè½¬Bå’ŒCè½¬Dè¿™ä¸¤ä¸ªè½¬è´¦åŠ¨ä½œå¯ä»¥å¹¶è¡Œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1269969","ctime":1646615773,"ip_address":"","comment_id":336687,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1646291218","product_id":100023901,"comment_content":"æˆ‘çœ‹äº†æ€è€ƒé¢˜çš„è¯„è®ºï¼Œè¯´è·å–èµ„æºè™½ç„¶æ˜¯ä¸²è¡Œçš„ï¼Œä½†åé¢è½¬è´¦æ˜¯å¹¶è¡Œçš„ï¼Œæ‰€ä»¥æ¯”synchronized(Account.class)å¥½ã€‚ è¿˜æ˜¯æ²¡æ˜ç™½ï¼Œè¿™é‡Œé‡Šæ”¾èµ„æºæ˜¯åœ¨finallyé‡Œçš„ï¼Œæ˜¯åœ¨è½¬è´¦ä¹‹åæ‰é‡Šæ”¾ã€‚ è½¬è´¦æ ¹æœ¬æ— æ³•å¹¶è¡Œï¼Œå¿…é¡»è¦å‰é¢é‚£ä¸ªè½¬è´¦å®Œæˆå¹¶é‡Šæ”¾äº†èµ„æºï¼Œæ‰èƒ½ç”³è¯·åˆ°èµ„æºå»è½¬è´¦å•Šã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554781,"discussion_content":"synchronized(Account.class)é”çš„æ˜¯æ‰€æœ‰è´¦æˆ·ï¼Œæ‰€æœ‰è´¦æˆ·åªèƒ½ä¸²è¡Œã€‚å¦å¤–ä¸€ä¸ªæ–¹å¼æ˜¯ä»…é”è½¬è´¦çš„è´¦æˆ·ï¼ŒAè½¬Bå’ŒCè½¬Dè¿™ä¸¤ä¸ªè½¬è´¦åŠ¨ä½œå¯ä»¥å¹¶è¡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646615774,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":334897,"user_name":"æ«æ—è¡€èˆ","can_delete":false,"product_type":"c1","uid":2809867,"ip_address":"","ucode":"EE7F6DA78D21EA","user_header":"https://static001.geekbang.org/account/avatar/00/2a/e0/0b/6f667b2c.jpg","comment_is_top":false,"comment_ctime":1645173738,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1645173738","product_id":100023901,"comment_content":"synchronized(Account.class)ï¼šæ˜¯å¯¹Accountå¯¹åº”çš„Classçº§åˆ«çš„é”ï¼Œå±äºç²—ç²’åº¦é”ï¼›while(!actr.apply(this, target))è¿™ç§æ­»å¾ªç¯æ–¹å¼ï¼ŒconcurrentåŒ…ä¸­ç”¨çš„å¾ˆå¤šï¼Œä¸é€šè¿‡åŠ é”å®ç°èµ„æºçš„å æœ‰ï¼ˆè‡ªæ—‹é”ï¼‰ï¼Œæ€§èƒ½ä¸Šä¼˜äºç±»é”ï¼Œä½†æ˜¯ä¼šå ç”¨CPUèµ„æºã€‚","like_count":0},{"had_liked":false,"id":334287,"user_name":"Jit Gwan","can_delete":false,"product_type":"c1","uid":1389981,"ip_address":"","ucode":"CE2C8FC46D9D71","user_header":"https://static001.geekbang.org/account/avatar/00/15/35/9d/4f23ec3d.jpg","comment_is_top":false,"comment_ctime":1644850698,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1644850698","product_id":100023901,"comment_content":"å…³äºè¯¾åæ€è€ƒï¼Œä½¿ç”¨ä¸Šæ–‡å®ç°çš„ Allocator å’Œ synchronized( Account.class ) æ•ˆæœä¸€æ ·ï¼Œéƒ½æ˜¯å…¨éƒ¨æ“ä½œä¸²è¡Œæ‰§è¡Œäº†","like_count":0},{"had_liked":false,"id":331846,"user_name":"Walk beside you","can_delete":false,"product_type":"c1","uid":1803932,"ip_address":"","ucode":"C3FDED0004C763","user_header":"https://static001.geekbang.org/account/avatar/00/1b/86/9c/f1c43834.jpg","comment_is_top":false,"comment_ctime":1642832135,"is_pvip":false,"replies":[{"id":"122154","content":"ä¸èƒ½ç”¨å¯¹è±¡é”ï¼ŒåŒæ—¶è¿˜æœ‰åˆ†å¸ƒå¼çš„æƒ…å†µï¼Œæ‰€ä»¥éƒ½æ˜¯å¼ºä¾èµ–æ•°æ®åº“","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1269969","ctime":1644922767,"ip_address":"","comment_id":331846,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1642832135","product_id":100023901,"comment_content":"è€å¸ˆï¼Œåœ¨çœŸå®çš„å¼€å‘ç¯å¢ƒä¸‹ï¼Œå’±ä»¬çš„æ•°æ®éƒ½æ˜¯ä»æ•°æ®åº“ä¸­æŸ¥è¯¢å‡ºæ¥ç„¶ååˆ›å»ºçš„å¯¹è±¡ï¼Œå‡å¦‚ä¸€ä¸ªè¯·æ±‚è¦Aå¯¹Bè½¬è´¦ï¼Œä¸€ä¸ªè¯·æ±‚Bå¯¹Aè½¬è´¦ï¼Œé‚£ä¹ˆè¿™ç§æƒ…å†µä¸‹æ€ä¹ˆå®ç°ä¸Šé¢è¿™äº›é”å‘¢ï¼Œå¥½åƒè¿™ç§æƒ…å†µä¸‹åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡éƒ½ä¸æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯æ•°æ®ä¸€æ ·ï¼Œä¸èƒ½å¤Ÿä½¿ç”¨å…·ä½“çš„å¯¹è±¡é”å§","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":551196,"discussion_content":"ä¸èƒ½ç”¨å¯¹è±¡é”ï¼ŒåŒæ—¶è¿˜æœ‰åˆ†å¸ƒå¼çš„æƒ…å†µï¼Œæ‰€ä»¥éƒ½æ˜¯å¼ºä¾èµ–æ•°æ®åº“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644922767,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":330203,"user_name":"é’ç¦¾qingh","can_delete":false,"product_type":"c1","uid":1651441,"ip_address":"","ucode":"453FC435B03790","user_header":"https://static001.geekbang.org/account/avatar/00/19/32/f1/fd24d52b.jpg","comment_is_top":false,"comment_ctime":1641865725,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1641865725","product_id":100023901,"comment_content":"1ï¼Œäº’æ–¥ 2ï¼Œå ç”¨ä¸”ç­‰å¾… 3ï¼Œæ— æ³•æŠ¢å  4ï¼Œå¾ªç¯ç­‰å¾…","like_count":0},{"had_liked":false,"id":324388,"user_name":"è¿é“®å¤","can_delete":false,"product_type":"c1","uid":1102201,"ip_address":"","ucode":"B8C910FC41C3C3","user_header":"https://static001.geekbang.org/account/avatar/00/10/d1/79/e21b88fa.jpg","comment_is_top":false,"comment_ctime":1638412572,"is_pvip":false,"replies":[{"id":"117736","content":"applyæ–¹æ³•æ˜¯åŒæ­¥æ–¹æ³•ï¼Œä¸¤ä¸ªçº¿ç¨‹ä¸å¯èƒ½åŒæ—¶æ‰§è¡Œ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1269969","ctime":1638446687,"ip_address":"","comment_id":324388,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1638412572","product_id":100023901,"comment_content":"è€å¸ˆï¼Œç ´åå æœ‰ä¸”ç­‰å¾…æ¡ä»¶ï¼Œè®¾ç½®ä¸€ä¸ªé›†åˆï¼Œå½“é›†åˆä¸ºç©ºè·å¾—ä¸¤ä¸ªå¯¹è±¡æ—¶æ‰èƒ½åŠ é”ã€‚ä½†è¿™æ ·ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¯¹é›†åˆè¿›è¡Œåˆ¤å®šï¼Œæ­¤æ—¶ä¸¤ä¸ªçº¿ç¨‹åˆ¤å®šçš„ç»“æœæ˜¯é›†åˆéƒ½ä¸ºç©ºï¼Œäºæ˜¯é›†åˆåŒæ—¶è·å¾—äº†å¯¹è±¡ï¼Œè¿›å…¥è·å¾—é”é˜¶æ®µã€‚è¿˜æ˜¯ä¼šå‡ºç°æ­»é”é—®é¢˜ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535459,"discussion_content":"applyæ–¹æ³•æ˜¯åŒæ­¥æ–¹æ³•ï¼Œä¸¤ä¸ªçº¿ç¨‹ä¸å¯èƒ½åŒæ—¶æ‰§è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638446687,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323476,"user_name":"é’æ¢…ç…®é©¬","can_delete":false,"product_type":"c1","uid":1433737,"ip_address":"","ucode":"529AEBCF25E828","user_header":"https://static001.geekbang.org/account/avatar/00/15/e0/89/c3db1efc.jpg","comment_is_top":false,"comment_ctime":1637919932,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637919932","product_id":100023901,"comment_content":"è®©æˆ‘æŒæ¡äº†æ›´å¤šå†™bugçš„å§¿åŠ¿","like_count":0},{"had_liked":false,"id":320981,"user_name":"10xiaohu","can_delete":false,"product_type":"c1","uid":1589055,"ip_address":"","ucode":"CAB39DBB93E608","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKKKdCyib4iblXC6JIH7HWDfIFVweTb7SgEOuRjquic3GiaiaGInFSiaU8w2y2bjvZjgiaA3IEQuyibXTaeHQ/132","comment_is_top":false,"comment_ctime":1636610053,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636610053","product_id":100023901,"comment_content":"æ²¡çœ‹æ‡‚Alloctor å•ä¾‹çš„æ„æ€ï¼Œä¸æ˜¯å•ä¾‹å‘€ï¼Œåªå¯¹Accountä¸­çš„å˜é‡ allocatoræ˜¯å”¯ä¸€çš„","like_count":0},{"had_liked":false,"id":320245,"user_name":"luke25","can_delete":false,"product_type":"c1","uid":1543428,"ip_address":"","ucode":"4D667DDBDA898C","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKDrwrfgpyavWAPKRo2IDtWMQ53bh4C1g4tv0egmGCuslicmCvPiaq6RqNURyy3rDqichZPqAexVvwicQ/132","comment_is_top":false,"comment_ctime":1636171067,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636171067","product_id":100023901,"comment_content":"Allocatorè¿™ç§æ–¹å¼å¾ˆæœ‰æ„æ€ï¼Œé”æ˜¯å¹²ä»€ä¹ˆçš„å‘¢ï¼Ÿ é”ç”¨æ¥å®ç°å…±äº«èµ„æºçš„äº’æ–¥ï¼Œæ˜¯å¯¹æŸä¸€ä¸ªå…±äº«èµ„æºçš„ç®¡ç†ï¼Œè€ŒAllocatorå°±æ›´å‰å®³äº†ï¼Œå®ƒæ˜¯å¯¹å¤šä¸ªå…±äº«èµ„æºè¿›è¡Œç»Ÿä¸€ç®¡ç†","like_count":0},{"had_liked":false,"id":320243,"user_name":"luke25","can_delete":false,"product_type":"c1","uid":1543428,"ip_address":"","ucode":"4D667DDBDA898C","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKDrwrfgpyavWAPKRo2IDtWMQ53bh4C1g4tv0egmGCuslicmCvPiaq6RqNURyy3rDqichZPqAexVvwicQ/132","comment_is_top":false,"comment_ctime":1636170816,"is_pvip":false,"replies":[{"id":"116129","content":"æˆ‘è§‰å¾—ç²’åº¦æ˜¯ä¸€æ ·çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1636263967,"ip_address":"","comment_id":320243,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1636170816","product_id":100023901,"comment_content":"è€å¸ˆè¯·æ•™ä¸‹ï¼Œå¯¹Classå¯¹è±¡åŠ é”å’Œå¯¹ä»»æ„ä¸€ä¸ªå•ä¾‹å¯¹è±¡åŠ é”æ•ˆæœæ˜¯ä¸€æ ·çš„ä¹ˆï¼Ÿæˆ‘ç†è§£è¿™ä¸¤ä¸ªçš„é”ç²’åº¦æ˜¯ä¸€æ ·çš„","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529926,"discussion_content":"æˆ‘è§‰å¾—ç²’åº¦æ˜¯ä¸€æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636263967,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":316816,"user_name":"SharpBB","can_delete":false,"product_type":"c1","uid":2014573,"ip_address":"","ucode":"D30C5B798B8E8C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/bd/6d/7010f98e.jpg","comment_is_top":false,"comment_ctime":1634558319,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1634558319","product_id":100023901,"comment_content":"èµå•Š è¿™èŠ‚è¯¾å­¦åˆ°å¾ˆå¤šï¼ï¼ï¼ï¼ï¼ï¼ï¼","like_count":0},{"had_liked":false,"id":314996,"user_name":"å®˜å®å„¿","can_delete":false,"product_type":"c1","uid":2110827,"ip_address":"","ucode":"03B4312475A984","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI5eicXFWltiaF9ibsEh2nNC80OYoHibhhE0X1hPHZ5KuAtY4Yxp5dQ4LsciaDxUHFBPlJM7kgQwkspzsQ/132","comment_is_top":false,"comment_ctime":1633653384,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633653384","product_id":100023901,"comment_content":"å¾ªç¯ç­‰å¾…æ€§èƒ½æ¶ˆè€—æ¯”ç›´æ¥synchronizedæ¥çš„å¤šï¼Œå¾ªç¯ä½“å†…æœ‰é‡å¤çš„contaionsæ“ä½œï¼Œä¸è¿‡è¿™ç§æ–¹æ¡ˆè§„é¿äº†æ­»é”ï¼Œæˆ‘è§‰å¾—idæ’åºæ˜¯æ›´å¥½çš„æ–¹æ¡ˆï¼Œåªæ˜¯å¢åŠ äº†ç”Ÿæˆidçš„å¼€é”€ï¼›","like_count":0},{"had_liked":false,"id":309882,"user_name":"å°å®","can_delete":false,"product_type":"c1","uid":1343456,"ip_address":"","ucode":"08B34C89368649","user_header":"https://static001.geekbang.org/account/avatar/00/14/7f/e0/b77e176e.jpg","comment_is_top":false,"comment_ctime":1630379686,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630379686","product_id":100023901,"comment_content":"æœ‰ã€‚Account.classçš„è¯ã€‚æ‰€æœ‰å’Œè´¦å·æ“ä½œç›¸å…³çš„éƒ½ä¼šè¢«é”ã€‚è€Œwhileæ­»å¾ªç¯çš„æ–¹å¼ï¼Œåªä¼šå½±å“from å’Œ<br>toä¸¤ä¸ªå½“å‰æ“ä½œçš„å¯¹è±¡","like_count":0},{"had_liked":false,"id":306793,"user_name":"Tomy","can_delete":false,"product_type":"c1","uid":1192601,"ip_address":"","ucode":"D7E49E90B0D60F","user_header":"https://static001.geekbang.org/account/avatar/00/12/32/99/91b58bf7.jpg","comment_is_top":false,"comment_ctime":1628726763,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628726763","product_id":100023901,"comment_content":"target.balance += amt;<br>è€å¸ˆè¿™è¡Œä»£ç ä¼šæŠ¥çº¢å‘€","like_count":0},{"had_liked":false,"id":303856,"user_name":"1111","can_delete":false,"product_type":"c1","uid":2704613,"ip_address":"","ucode":"17A4E21927541A","user_header":"http://thirdwx.qlogo.cn/mmopen/DGaO1JGLPvzZ2mvdUia9sD40rvRhpLCavgtOEguakqgKhI8vt3kx9y1kOn8pfZH4l7aHuWocPJvCauOcGwgjkTNnpJwic55Hcp/132","comment_is_top":false,"comment_ctime":1627030194,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1627030194","product_id":100023901,"comment_content":"<br>class Allocator {<br>  private List&lt;Object&gt; als =<br>    new ArrayList&lt;&gt;();<br>  &#47;&#47; ä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰èµ„æº<br>  synchronized boolean apply(<br>    Object from, Object to){<br>    if(als.contains(from) ||<br>         als.contains(to)){<br>      return false;  <br>    } else {<br>      als.add(from);<br>      als.add(to);  <br>    }<br>    return true;<br>  }<br>  &#47;&#47; å½’è¿˜èµ„æº<br>  synchronized void free(<br>    Object from, Object to){<br>    als.remove(from);<br>    als.remove(to);<br>  }<br>}<br><br>class Account {<br>  &#47;&#47; actråº”è¯¥ä¸ºå•ä¾‹<br>  private Allocator actr;<br>  private int balance;<br>  &#47;&#47; è½¬è´¦<br>  void transfer(Account target, int amt){<br>    &#47;&#47; ä¸€æ¬¡æ€§ç”³è¯·è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·ï¼Œç›´åˆ°æˆåŠŸ<br>    while(!actr.apply(this, target))<br>      ï¼›<br>    try{<br>      &#47;&#47; é”å®šè½¬å‡ºè´¦æˆ·<br>      synchronized(this){              <br>        &#47;&#47; é”å®šè½¬å…¥è´¦æˆ·<br>        synchronized(target){           <br>          if (this.balance &gt; amt){<br>            this.balance -= amt;<br>            target.balance += amt;<br>          }<br>        }<br>      }<br>    } finally {<br>      actr.free(this, target)<br>    }<br>  } <br>}<br>å¦‚æœï¼ŒAè½¬B100ï¼ŒBè½¬A100<br>æ­¤æ—¶é˜Ÿåˆ—é‡Œé¢æœ‰Aã€Bä¸¤ä¸ªå¯¹è±¡<br>é‚£ä¹ˆAã€BåŒæ—¶è·³å‡ºï¼Œwhile(!actr.apply(this, target))<br>å‡è®¾Aï¼Œåœ¨synchronized(this)ä¹‹å‰åˆ‡æ¢äº†çº¿ç¨‹ï¼ŒBæ‰§è¡Œäº†synchronized(this)ï¼Œè¿™ä¸ªæ—¶å€™åˆåˆ‡æ¢ä¸ºAï¼ŒAæ‰§è¡Œäº†synchronized(this)ï¼Œä¹‹åè¿˜è¦åœ¨synchronized(target)ï¼ŒAçš„targetæ˜¯Bï¼Œä½†æ˜¯Bå·²ç»è¢«é”äº†ï¼ŒåŒç†Béœ€è¦Aï¼Œä½†æ˜¯Aä¹Ÿå·²ç»è¢«é”äº†ï¼Œè¿™ä¸æ˜¯åˆå‘ç”Ÿäº†æ­»é”å—ï¼Ÿ<br>è€å¸ˆï¼Œæ˜¯æˆ‘ç†è§£é”™äº†å˜›ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1580123,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1c/5b/25932cb6.jpg","nickname":"å°ç¬¨å­©","note":"","ucode":"C0584C7AD28BC3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581243,"discussion_content":"Allocator æ˜¯ä¸ªå•ä¾‹å¯¹è±¡ï¼Œåœ¨Aè½¬B100ï¼Œè°ƒç”¨çš„æ—¶å€™ï¼ŒBè½¬A100ï¼Œæ˜¯é˜»å¡çš„ã€‚Aè½¬Bæ‰§è¡Œå®Œåï¼Œé‡Šæ”¾é”ï¼ŒBè½¬Aæ‹¿åˆ°ï¼Œæ­¤æ—¶ als é‡Œé¢å·²ç»æœ‰Aï¼ŒBå¯¹è±¡äº†ï¼Œè¿”å›çš„æ˜¯falseã€‚Aè½¬B while(!actr.apply(this, target)) ä¼šè·³è¿‡ï¼Œ Bè½¬A ä¼šä¸€ç›´åœ¨å¾ªç¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658660345,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":301797,"user_name":"spring","can_delete":false,"product_type":"c1","uid":2084208,"ip_address":"","ucode":"8E4687397A0344","user_header":"https://static001.geekbang.org/account/avatar/00/1f/cd/70/145e88f0.jpg","comment_is_top":false,"comment_ctime":1625886002,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625886002","product_id":100023901,"comment_content":"è€å¸ˆï¼Œåœ¨åˆ†å¸ƒå¼é¡¹ç›®ä¸­å¤šä¸ªè´¦æˆ·å¾€Bè´¦æˆ·è½¬è´¦ï¼Œç”¨Allocator æ–¹æ¡ˆæ²¡åŠæ³•ä¿éšœå¾€Bè½¬è´¦æ“ä½œçš„äº’æ–¥ï¼Œæ­¤æ—¶è¿™ä¸ªæ–¹æ¡ˆä¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œåº”è¯¥è¦ç”¨åˆ†å¸ƒå¼é”è§£å†³æ˜¯å—ï¼Ÿå¦‚æœæ˜¯ç”¨åˆ†å¸ƒå¼é”è§£å†³æ–¹æ¡ˆåˆæ˜¯æ€æ ·çš„ï¼Ÿéº»çƒ¦è€å¸ˆè§£ç­”ä¸€ä¸‹ï¼Œè°¢è°¢ã€‚","like_count":0},{"had_liked":false,"id":295803,"user_name":"å®‹æŸ¯ä»°","can_delete":false,"product_type":"c1","uid":1422296,"ip_address":"","ucode":"50FB61E3E9DAF8","user_header":"https://static001.geekbang.org/account/avatar/00/15/b3/d8/c56e0f0b.jpg","comment_is_top":false,"comment_ctime":1622603328,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622603328","product_id":100023901,"comment_content":"è€å¸ˆï¼Œè´¦æœ¬ç®¡ç†å‘˜çš„æ–¹æ³•ï¼Œè™½ç„¶æŠŠé”çš„ç²’åº¦å˜ç»†ï¼Œä½†æ˜¯å½“ç”¨æˆ·é‡å¾ˆå¤§ï¼Œè¿™é‡Œä¼šæˆä¸ºæ–°çš„ç“¶é¢ˆï¼Œæ‰€æœ‰ç”¨æˆ·è½¬è´¦éƒ½è¦æŠ¢å è¿™ä¸ªé”ï¼Œå¯¹å§ï¼Ÿ","like_count":0},{"had_liked":false,"id":294504,"user_name":"æå¶","can_delete":false,"product_type":"c1","uid":1470449,"ip_address":"","ucode":"41B33FA8526E48","user_header":"https://static001.geekbang.org/account/avatar/00/16/6f/f1/35f9f16f.jpg","comment_is_top":false,"comment_ctime":1621987303,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621987303","product_id":100023901,"comment_content":"ç ´åå ç”¨ä¸”ç­‰å¾…æ¡ä»¶ï¼Œç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶ï¼Œç ´åä¸å¯æŠ¢å æ¡ä»¶","like_count":0},{"had_liked":false,"id":292598,"user_name":"Yeyw","can_delete":false,"product_type":"c1","uid":1463740,"ip_address":"","ucode":"C9D20DB91C3BE5","user_header":"https://static001.geekbang.org/account/avatar/00/16/55/bc/fad0090b.jpg","comment_is_top":false,"comment_ctime":1620889314,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1620889314","product_id":100023901,"comment_content":"é”å±€éƒ¨ï¼Œå’Œé”å…¨å±€çš„åŒºåˆ«ï¼Œé”å±€éƒ¨ä¸å½±å“å…¶ä»–è´¦æˆ·è½¬è´¦ï¼Œæœ€å¤šæ˜¯åœ¨ç”³è¯·èµ„æºæ’é˜Ÿï¼›è€Œé¡ºåºç”³è¯·èµ„æºæ˜¯æœ€ä¸­æ„çš„ï¼Œå½±å“èŒƒå›´æ˜¯æœ€å°çš„äº†","like_count":0},{"had_liked":false,"id":290517,"user_name":"Geek_b37487","can_delete":false,"product_type":"c1","uid":2043619,"ip_address":"","ucode":"B6E202603B1A84","user_header":"http://thirdwx.qlogo.cn/mmopen/2kpMNDYsSfCibibkl1x62jWiaJYL67ABTOrYO4VBibq5GrB7F2muJpibBPn4t8reWiaAHb7aNxckpGUk3V6mfyGhk2PruoicHdCkKIc/132","comment_is_top":false,"comment_ctime":1619598663,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619598663","product_id":100023901,"comment_content":"æ€ä¹ˆä¹Ÿæƒ³ä¸é€šç¬¬ä¸€ä¸ªä¾‹å­æ˜¯ç”¨ thisåšé”å¯¹è±¡çš„ï¼   è¿™ä¸åˆå›å»äº†ä¹ˆ......  æ¯ä¸ªè°ƒç”¨è¯¥åŠŸèƒ½çš„çº¿ç¨‹ï¼Œéƒ½æœ‰å„è‡ªçš„this, æ„Ÿè§‰å®Œå…¨æ²¡æ„ä¹‰çš„","like_count":0},{"had_liked":false,"id":290376,"user_name":"Geek_b37487","can_delete":false,"product_type":"c1","uid":2043619,"ip_address":"","ucode":"B6E202603B1A84","user_header":"http://thirdwx.qlogo.cn/mmopen/2kpMNDYsSfCibibkl1x62jWiaJYL67ABTOrYO4VBibq5GrB7F2muJpibBPn4t8reWiaAHb7aNxckpGUk3V6mfyGhk2PruoicHdCkKIc/132","comment_is_top":false,"comment_ctime":1619518672,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1619518672","product_id":100023901,"comment_content":"ç¬¬ä¸€ä¸ªä¾‹å­å°±æ„Ÿè§‰æœ‰é—®é¢˜ï¼Œä¸€æ—¦ä½¿ç”¨äº†thisåšé”å¯¹è±¡, å¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶åšA-&gt;Bçš„è½¬è´¦ï¼Œä¹Ÿæ˜¯ä¼šæœ‰é—®é¢˜çš„å“ˆï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½å» new Account() ç„¶ååšè½¬è´¦çš„è¯ï¼Œé‡Œé¢çš„thisæ˜¯å„è‡ªçš„Accountå®ä¾‹  æ˜¯æœ‰é—®é¢˜çš„å•Šã€‚å’Œå‰é¢è¯´çš„è¦ä½¿ç”¨Account.classé‚£é‡ŒçŸ›ç›¾äº†å•Š","like_count":0,"discussions":[{"author":{"id":2311005,"avatar":"","nickname":"Geek_067762","note":"","ucode":"B3C3CFD1C05283","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389136,"discussion_content":"Accountæ˜¯å„è‡ªçš„ï¼Œä½†æ˜¯applyæ–¹æ³•çš„æä¾›è€…Allocatoræ˜¯å•ä¾‹çš„ã€‚æœ€ç»ˆåŠ é”è¿˜æ˜¯ç»™ä¸€ä¸ªå•ä¾‹å¯¹è±¡åŠ é”ã€‚æ‰€ä»¥æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¸çŸ¥é“æˆ‘çš„ç†è§£å¯¹ä¸å¯¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629128501,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":290134,"user_name":"é›¨é£Vee","can_delete":false,"product_type":"c1","uid":1199975,"ip_address":"","ucode":"8AC07868C30E24","user_header":"https://static001.geekbang.org/account/avatar/00/12/4f/67/6a7a7534.jpg","comment_is_top":false,"comment_ctime":1619398185,"is_pvip":true,"replies":[{"id":"105787","content":"æƒ³åŠæ³•è®©ä»–ä»¬ä¸ä¸€æ ·","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1620731682,"ip_address":"","comment_id":290134,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1619398185","product_id":100023901,"comment_content":"ä»å°åˆ°å¤§æ’åºï¼Œä¸¤ä¸ªä¸€æ ·æ€ä¹ˆåŠï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519123,"discussion_content":"æƒ³åŠæ³•è®©ä»–ä»¬ä¸ä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620731682,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289524,"user_name":"å­¤å‚²çš„è™ç‹","can_delete":false,"product_type":"c1","uid":2536451,"ip_address":"","ucode":"FE9B90D6EEBAFB","user_header":"https://static001.geekbang.org/account/avatar/00/26/b4/03/677fd301.jpg","comment_is_top":false,"comment_ctime":1619061214,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619061214","product_id":100023901,"comment_content":"ä¸ºä»€ä¹ˆæˆ‘ä½¿ç”¨åˆ†é…å™¨æ¥è·å–æ‰€æœ‰èµ„æºï¼Œä¸ä¼šå‘ç”Ÿæ­»é”ï¼Œä½†æ˜¯æ•°æ®å´å‡ºç°äº†ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œæ±‚æŒ‡æ•™<br>public class DeadLock {<br>    public static void main(String[] args) {<br>        Alator alator = new Alator();<br>        Account1 account1 = new Account1(alator,1,100);<br>        Account1 account2 = new Account1(alator,2,100);<br><br>        new Thread(()-&gt;{<br>            account1.transfer(account2,50);<br>        }).start();<br>        new Thread(()-&gt;{<br>            account2.transfer(account1,50);<br>        }).start();<br>        System.out.println(account1.getBalance());<br>        System.out.println(account2.getBalance());<br>    }<br><br>}<br><br>class Alator{<br>    private List&lt;Account1&gt; lockList = new ArrayList&lt;&gt;();<br><br>    public synchronized boolean addLock(Account1 account1, Account1 account2){<br>        if(lockList.contains(account1) || lockList.contains(account2)){<br>            return false;<br>        }else{<br>            lockList.add(account1);<br>            lockList.add(account2);<br>        }<br><br><br>        return true;<br>    }<br><br>    public synchronized void freeLock(Account1 account1, Account1 account2){<br>        lockList.remove(account1);<br>        lockList.remove(account2);<br>    }<br>}<br>class Account1{<br>    private Alator alator;<br>    private int id;<br>    private int balance;<br><br>    public Account1(Alator alator, int id, int balance) {<br>        this.alator = alator;<br>        this.id = id;<br>        this.balance = balance;<br>    }<br><br>    public void setBalance(int balance) {<br>        this.balance = balance;<br>    }<br><br>    public int getBalance() {<br>        return balance;<br>    }<br><br>    public void transfer(Account1 target, int amount){<br>        while(!alator.addLock(this,target))<br>            ;<br>        try{<br>            synchronized (this) {<br>                synchronized (target) {<br>                    if (this.balance &gt;= amount) {<br>                        this.balance -= amount;<br>                        target.balance += amount;<br>                    }<br>                }<br>            }<br>        } finally {<br>            alator.freeLock(this,target);<br>        }<br>    }<br>}<br>","like_count":0},{"had_liked":false,"id":287281,"user_name":"RoccoLee","can_delete":false,"product_type":"c1","uid":2508667,"ip_address":"","ucode":"C55AD67FF8C2D7","user_header":"https://static001.geekbang.org/account/avatar/00/26/47/7b/c5ec018c.jpg","comment_is_top":false,"comment_ctime":1617867270,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1617867270","product_id":100023901,"comment_content":"è¯¾åæ€è€ƒï¼šæœ‰ä¸€å®šæ€§èƒ½ä¼˜åŠ¿ï¼Œsynchroinzed(Account.class)æ˜¯ç²—ç²’åº¦é”ï¼Œä½¿ç”¨thiså’Œtargetä¸¤ä¸ªé”å¯¹è±¡ç²’åº¦è¾ƒå°ï¼Œå¹¶å‘ç¨‹åº¦è¾ƒé«˜","like_count":0,"discussions":[{"author":{"id":2043619,"avatar":"http://thirdwx.qlogo.cn/mmopen/2kpMNDYsSfCibibkl1x62jWiaJYL67ABTOrYO4VBibq5GrB7F2muJpibBPn4t8reWiaAHb7aNxckpGUk3V6mfyGhk2PruoicHdCkKIc/132","nickname":"Geek_b37487","note":"","ucode":"B6E202603B1A84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370730,"discussion_content":"é—®é¢˜æ˜¯ä¸€æ—¦ä½¿ç”¨äº†thisåšé”å¯¹è±¡, å¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶åšA->Bçš„è½¬è´¦ï¼Œä¹Ÿæ˜¯ä¼šæœ‰é—®é¢˜çš„å“ˆï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½å» new Account() ç„¶ååšè½¬è´¦çš„è¯ï¼Œé‡Œé¢çš„thisæ˜¯å„è‡ªçš„Accountå®ä¾‹  æ˜¯æœ‰é—®é¢˜çš„å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619518599,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":285286,"user_name":"hu big sea","can_delete":false,"product_type":"c1","uid":1486549,"ip_address":"","ucode":"489F9B4BF819FF","user_header":"https://static001.geekbang.org/account/avatar/00/16/ae/d5/abe7078a.jpg","comment_is_top":false,"comment_ctime":1616724288,"is_pvip":false,"replies":[{"id":"103595","content":"ä¸éœ€è¦äº†","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1616822076,"ip_address":"","comment_id":285286,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1616724288","product_id":100023901,"comment_content":"ä¸€æ¬¡æ€§ç”³è¯·åˆ°æ‰€æœ‰èµ„æºï¼Œä¸ºä»€ä¹ˆåç»­è½¬è´¦è¿˜è¦åŠ ç»†ç²’åº¦é”ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517634,"discussion_content":"ä¸éœ€è¦äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616822076,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284916,"user_name":"æ´›å¥‡","can_delete":false,"product_type":"c1","uid":1624355,"ip_address":"","ucode":"662B4005721119","user_header":"https://static001.geekbang.org/account/avatar/00/18/c9/23/76511858.jpg","comment_is_top":false,"comment_ctime":1616545297,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616545297","product_id":100023901,"comment_content":"åœ¨ç ´åå ç”¨ä¸”ç­‰å¾…æ¡ä»¶æ—¶ï¼Œè½¬è´¦é€»è¾‘é‚£å—(ä¹Ÿå°±æ˜¯åœ¨whileå¾ªç¯ä¹‹åçš„ä»£ç )èƒ½ä¸åŠ é”å—ï¼Ÿæˆ‘è§‰å¾—ä¸åŠ é”ä¹Ÿæ²¡ä»€ä¹ˆä¸å¯ä»¥çš„ï¼Œå› ä¸ºèƒ½é€šè¿‡whileå¾ªç¯å°±è¯´æ˜å·²ç»åŒæ—¶æ‹¿åˆ°äº†è½¬å…¥å’Œè½¬å‡ºè¿™ä¸¤å¥—è´¦æœ¬ï¼Œä¸å¯èƒ½å†æœ‰å…¶ä»–çº¿ç¨‹æ‹¿åˆ°è¿™ä¸¤å¥—è´¦æœ¬ä¸­çš„ä»»ä½•ä¸€ä¸ªäº†ã€‚","like_count":0},{"had_liked":false,"id":283569,"user_name":"æ—¶å…‰å®ˆæŠ¤è€…-åŸºå…°","can_delete":false,"product_type":"c1","uid":1554995,"ip_address":"","ucode":"F0B0887B1979D2","user_header":"https://static001.geekbang.org/account/avatar/00/17/ba/33/2d83d174.jpg","comment_is_top":false,"comment_ctime":1615821074,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615821074","product_id":100023901,"comment_content":"Aå‘Bè½¬è´¦ï¼ŒCå‘Dè½¬è´¦ï¼Œsynchronized(Account.class)è¿™ä¸¤ä¸ªæ“ä½œåªèƒ½ä¸²è¡Œã€‚ä½†æ˜¯ç ´åå ç”¨ä¸”ç­‰å¾…æ¡ä»¶ä¸‹Aå‘Bè½¬è´¦æ‹¿å®ŒAllocator é”å°±å»è½¬è´¦äº†ï¼ˆAllocator é”ä¼šé‡Šæ”¾ï¼‰ï¼Œæ­¤æ—¶Cå‘Dè½¬è´¦å¯ä»¥ç»§ç»­æ‹¿Allocator é”å»è½¬è´¦ï¼ŒAå‘Bè½¬è´¦ï¼ŒCå‘Dè½¬è´¦å¹¶è¡Œæ‰§è¡Œæ€§èƒ½æ˜æ˜¾å¥½","like_count":0},{"had_liked":false,"id":283049,"user_name":"Laughing","can_delete":false,"product_type":"c1","uid":1002134,"ip_address":"","ucode":"F68F1E000CA800","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4a/96/99466a06.jpg","comment_is_top":false,"comment_ctime":1615531409,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615531409","product_id":100023901,"comment_content":"ä¸»è¦çœ‹åœºæ™¯å§ï¼Œå¦‚æœwhileç­‰å¾…æ‹¿é”çš„å¤ªå¤šï¼Œå‡å¦‚æœ‰è€—æ—¶çš„æ“ä½œæˆ–è€…å¼‚å¸¸é‡Šæ”¾ä¸äº†é”ï¼Œæ€§èƒ½è‚¯å®šä¹Ÿä¸‹é™ã€‚","like_count":0},{"had_liked":false,"id":282663,"user_name":"å¼ ç”³å‚²","can_delete":false,"product_type":"c1","uid":1182372,"ip_address":"","ucode":"22D46BC529BA8A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0a/a4/828a431f.jpg","comment_is_top":false,"comment_ctime":1615355697,"is_pvip":true,"discussion_count":1,"race_medal":2,"score":"1615355697","product_id":100023901,"comment_content":"æ­»é”ã€Spring ä¸­çš„å¾ªç¯ä¾èµ–ï¼Œæ„Ÿè§‰é—®é¢˜éƒ½æ˜¯ç±»ä¼¼çš„","like_count":0,"discussions":[{"author":{"id":2330905,"avatar":"https://static001.geekbang.org/account/avatar/00/23/91/19/6a3e7efc.jpg","nickname":"ç¨‹åºå‘˜9527","note":"","ucode":"1A1609F6BEAD84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379509,"discussion_content":"éƒ½æ˜¯å½¢æˆäº†ç¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623932697,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282436,"user_name":"zhunode","can_delete":false,"product_type":"c1","uid":1214421,"ip_address":"","ucode":"D60B6B28C5336C","user_header":"https://static001.geekbang.org/account/avatar/00/12/87/d5/4a6c6890.jpg","comment_is_top":false,"comment_ctime":1615252126,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615252126","product_id":100023901,"comment_content":"æ­»å¾ªç¯æ€§èƒ½è¾ƒä¼˜ã€‚æ­»å¾ªç¯é”äº†ä¸¤ä¸ªç›¸å…³è”å¯¹è±¡çš„èµ„æºï¼Œæ˜¯ç»†ç²’åº¦é”ï¼Œè€Œsynchronizeé”äº†æ•´ä¸ªç±»å¯¹è±¡ï¼Œåªèƒ½ä¸²è¡Œã€‚æ¯”å¦‚æœ‰Nä¸ªå®¢æˆ·ä¸¤ä¸¤è½¬è´¦ï¼Œåˆ™æ­»å¾ªç¯å¯ä»¥N&#47;2ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œï¼Œsynchronizedåªèƒ½Nä¸ªçº¿ç¨‹ä¸²è¡Œã€‚","like_count":0},{"had_liked":false,"id":279568,"user_name":"è’‹æ³¢","can_delete":false,"product_type":"c1","uid":1526325,"ip_address":"","ucode":"611A1F0629F08E","user_header":"https://static001.geekbang.org/account/avatar/00/17/4a/35/16861bf8.jpg","comment_is_top":false,"comment_ctime":1613826085,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1613826085","product_id":100023901,"comment_content":"å¯¹account.classåŠ é”å’Œå¯¹è½¬å…¥è½¬å‡ºè´¦æˆ·åŠ é”ï¼Œä¸¤ä¸ªçš„ç²’åº¦ä¸ä¸€æ ·ï¼Œåè€…ç²’åº¦è¦å°ï¼Œè¿™ä¸ªæƒ…å†µä¸‹åº”è¯¥è½¬å…¥è½¬å‡ºè´¦æˆ·ç²’åº¦ä¼šå¯¼è‡´çš„èµ„æºäº‰å¤ºæ¦‚ç‡åº”è¯¥ä¼šæ›´å°ï¼Œè€å¸ˆï¼Œä¸çŸ¥é“è¿™æ ·ç†è§£å¯¹ä¸å¯¹ï¼Ÿè¿˜æœ‰æƒ³é—®ä¸€ä¸‹æ˜¯ä¸æ˜¯ç²’åº¦è¶Šå°ï¼Œæ€§èƒ½å°±ä¼šæ›´å¥½å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":278752,"user_name":"å°ç™½","can_delete":false,"product_type":"c1","uid":1829834,"ip_address":"","ucode":"83311F4944AB44","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/4mGSZxzsBmU1ib6INyvxWKY3rafl1xT9B6rdggF5RY35jzDKIg9U7YVIoLdlLNHUeEqxhTNbKibNIXs9IOrerM3A/132","comment_is_top":false,"comment_ctime":1613293984,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1613293984","product_id":100023901,"comment_content":"åœ¨ç ´åå æœ‰å¹¶ç­‰å¾…æ¡ä»¶ä»£ç é‡Œï¼Œè½¬è´¦åŠŸèƒ½ï¼Œåªæœ‰ç”³è¯·åˆ°èµ„æºï¼Œæ‰èƒ½å¾€ä¸‹æ‰§è¡Œï¼Œæ²¡æœ‰ç”³è¯·åˆ°èµ„æºçš„ï¼Œéƒ½ä¼šåœ¨å¾ªç¯é‡Œå‡ºä¸æ¥ï¼Œæ˜¯ä¸æ˜¯ä¸ç”¨åŠ é”äº†ï¼Ÿ","like_count":0},{"had_liked":false,"id":278085,"user_name":"Geek_1d40b2","can_delete":false,"product_type":"c1","uid":1626130,"ip_address":"","ucode":"C02603A7C43E1C","user_header":"","comment_is_top":false,"comment_ctime":1612754978,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612754978","product_id":100023901,"comment_content":"ç ´åå ç”¨ä¸”ç­‰å¾…æ¡ä»¶å“ªå—ï¼Œä»…ä»…åªæ˜¯ä¸€æ¬¡æ€§æ‹¿åˆ°æ‰€æœ‰èµ„æºï¼Œå¹¶æœªå¯¹èµ„æºåŠ é”ï¼Œå¦‚æœåˆ«çš„åœ°æ–¹ä»…ä»…å¯¹å•ä¸ªèµ„æºè¿›è¡ŒåŠ é”æ“ä½œï¼Œæ˜¯ä¸æ˜¯æ„å‘³ç€æ‹¿åˆ°æ‰€æœ‰èµ„æºæ²¡æœ‰æ„ä¹‰ï¼ˆå› ä¸ºåˆ«çš„åœ°æ–¹ç…§æ ·å¯ä»¥å¯¹èµ„æºåŠ é”ï¼‰ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥ä¿®æ”¹ä¸ºå¯å˜å‚æ•°ï¼ˆä¿è¯æœ€å°ç²’åº¦ï¼‰ï¼Œæ¯æ¬¡åŠ é”çš„æ—¶å€™ï¼Œéƒ½éœ€è¦apply æˆç«‹ç„¶åå†åŠ é”","like_count":0},{"had_liked":false,"id":275672,"user_name":"PeiXy","can_delete":false,"product_type":"c1","uid":1595503,"ip_address":"","ucode":"0C6A212B0B140D","user_header":"https://static001.geekbang.org/account/avatar/00/18/58/6f/4acc5b43.jpg","comment_is_top":false,"comment_ctime":1611640943,"is_pvip":true,"replies":[{"id":"100067","content":"æ˜¯è¿™ä¸ªæ„æ€","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1611666430,"ip_address":"","comment_id":275672,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1611640943","product_id":100023901,"comment_content":"ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶ è¿™ä¾‹å­æ˜¯ä¸æ˜¯ å°±ç›¸å½“äºABç”¨æˆ·äº’ç›¸è½¬è´¦,åŸå…ˆæ­»é” ç¬¬ä¸€æ¬¡è·å–çš„éƒ½æ˜¯è‡ªå·±çš„é”, è€Œé€šè¿‡ä¾‹å­ä¸‰ ç¬¬ä¸€æ¬¡éƒ½æ˜¯è·å–è¾ƒå°IDçš„é”,ä»è€Œä¿è¯ä¸ä¼šå¾ªç¯é”ä½çš„æƒ…å†µ,","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514432,"discussion_content":"æ˜¯è¿™ä¸ªæ„æ€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611666430,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":272939,"user_name":"å­æ°","can_delete":false,"product_type":"c1","uid":1025250,"ip_address":"","ucode":"717D10394391BE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a4/e2/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1610359801,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1610359801","product_id":100023901,"comment_content":"Account target å¯¹è±¡ä¼šæ˜¯æ¯çº¿ç¨‹ç‹¬äº«çš„ç§æœ‰å˜é‡å—ï¼Ÿç›¸åŒçš„è´¦æˆ·å¯ä»¥æ˜¯ä¸åŒçš„targetå¯¹è±¡ï¼Œç”šè‡³æ¯çº¿ç¨‹ä¼šæœ‰ä¸€ä¸ªtargetå¯¹è±¡ï¼Œè¿™æ ·å°±ç›¸å½“äºæ²¡é”äº†","like_count":0},{"had_liked":false,"id":261930,"user_name":"Geek_89e362","can_delete":false,"product_type":"c1","uid":2308075,"ip_address":"","ucode":"E596C2CFE1CFAF","user_header":"","comment_is_top":false,"comment_ctime":1605582092,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605582092","product_id":100023901,"comment_content":"æœ‰ä¼˜åŠ¿çš„ï¼Œsynchronized å­˜åœ¨çº¿ç¨‹ä¸Šçº¿æ–‡çš„åˆ‡æ¢å¼€é”€ï¼Œè€Œ whilleå¾ªç¯åˆ™ä¸å­˜åœ¨","like_count":0},{"had_liked":false,"id":260991,"user_name":"Geek_c75d82","can_delete":false,"product_type":"c1","uid":2286012,"ip_address":"","ucode":"81202A016FC5D2","user_header":"","comment_is_top":false,"comment_ctime":1605168212,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605168212","product_id":100023901,"comment_content":"é”classï¼Œç²’åº¦æ¯”è¾ƒå¤§ï¼Œæ‰€æœ‰è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œéƒ½ä¼šä¸Šé”ï¼Œå¦‚æœç”¨from,to,åªæ˜¯å¯¹thiså¯¹è±¡å’Œtargetå¯¹è±¡ä¸Šé”ï¼Œé”çš„ç²’åº¦æ¯”è¾ƒå°","like_count":0},{"had_liked":false,"id":256258,"user_name":"èšä¸é±¿é±¼","can_delete":false,"product_type":"c1","uid":1428043,"ip_address":"","ucode":"5DB98E406F1D3E","user_header":"https://static001.geekbang.org/account/avatar/00/15/ca/4b/c1ace3aa.jpg","comment_is_top":false,"comment_ctime":1603587649,"is_pvip":false,"replies":[{"id":"93324","content":"åŠ æ²¹å§ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1603596645,"ip_address":"","comment_id":256258,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1603587649","product_id":100023901,"comment_content":"äºŒåˆ·ï¼Œå¸Œæœ›æˆ‘èƒ½åˆ·å‡ºæ–°çš„è®¤çŸ¥ï¼Œåˆ·å‡ºæ–°çš„è§‰æ‚Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":507983,"discussion_content":"åŠ æ²¹å§ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603596645,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":253882,"user_name":"æå­Ÿ","can_delete":false,"product_type":"c1","uid":1006768,"ip_address":"","ucode":"AD2349CB12F130","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5c/b0/77e5f8c8.jpg","comment_is_top":false,"comment_ctime":1602931477,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1602931477","product_id":100023901,"comment_content":"&#47;&#47;ä¸¤æŠŠé”<br>@Data<br>public class AccountClassLock3 {<br>    private int balance;<br><br>    public AccountClassLock3(int balance) {<br>        this.balance = balance;<br>    }<br><br>    public void transfer(AccountClassLock3 target,int amt){<br>        &#47;&#47;é”å®šè½¬å‡ºè´¦æˆ·<br>        synchronized (this){<br>            &#47;&#47;é”å®šè½¬å…¥è´¦æˆ·<br>            synchronized (target){<br>                if(this.balance &gt; amt){<br>                    this.balance -= amt;<br>                    target.balance += amt;<br>                }<br><br>            }<br>        }<br><br><br>    }<br><br><br>    public static void main(String[] args) throws InterruptedException {<br>        for (int i = 0; i &lt; 1000; i++) {<br>            AccountClassLock3 a = new AccountClassLock3(200);<br>            AccountClassLock3 b = new AccountClassLock3(200);<br>            AccountClassLock3 c = new AccountClassLock3(200);<br><br><br>            Thread t1 = new Thread(()-&gt;{<br>                a.transfer(b,100);<br>            });<br><br><br><br>            Thread t2 = new Thread(()-&gt;{<br>                b.transfer(c,100);<br>            });<br>            t1.start();<br>            t2.start();<br><br><br>            t2.join();<br><br>            System.out.println(a.getBalance());<br>            System.out.println(b.getBalance());<br>            System.out.println(c.getBalance());<br>            System.out.println(&quot;---------------&quot;);<br>        }<br>    }<br>}<br>","like_count":0},{"had_liked":false,"id":253555,"user_name":"Qç½—","can_delete":false,"product_type":"c1","uid":1792098,"ip_address":"","ucode":"E797378F4DA1F4","user_header":"https://static001.geekbang.org/account/avatar/00/1b/58/62/346dd248.jpg","comment_is_top":false,"comment_ctime":1602774893,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602774893","product_id":100023901,"comment_content":"è¿™ç« èŠ‚è®²å¾—å¤ªå®ç”¨äº†ï¼ï¼çœŸæ£’","like_count":0},{"had_liked":false,"id":249014,"user_name":"maybe","can_delete":false,"product_type":"c1","uid":1475528,"ip_address":"","ucode":"93D160F617E750","user_header":"https://static001.geekbang.org/account/avatar/00/16/83/c8/5ce842f6.jpg","comment_is_top":false,"comment_ctime":1600401756,"is_pvip":false,"discussion_count":0,"race_medal":4,"score":"1600401756","product_id":100023901,"comment_content":"æ­»é”å‘ç”Ÿçš„å¿…è¦æ¡ä»¶ï¼š<br>1ã€äº’æ–¥ï¼Œå…±äº«èµ„æºXå’ŒYåªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹å æœ‰<br>2ã€å ç”¨ä¸”ç­‰å¾…ï¼Œçº¿ç¨‹T1å·²ç»å–å¾—å…±äº«èµ„æºXï¼Œåœ¨ç­‰å¾…å…±äº«èµ„æºYçš„æ—¶å€™ä¸é‡Šæ”¾å…±äº«èµ„æºX<br>3ã€ä¸å¯æŠ¢å ï¼Œå…¶å®ƒçº¿ç¨‹ä¸èƒ½å¼ºè¡ŒæŠ¢å çº¿ç¨‹T1å æœ‰çš„èµ„æº<br>4ã€å¾ªç¯ç­‰å¾…ï¼Œçº¿ç¨‹T1ç­‰å¾…çº¿ç¨‹T2å æœ‰çš„èµ„æºï¼Œçº¿ç¨‹T2ç­‰å¾…çº¿ç¨‹T1å æœ‰çš„èµ„æº<br><br>ç ´ç¯å…¶ä¸­ä¸€ä¸ªå°±å¯é¿å…æ­»é”ï¼š<br>1ã€ï¼ˆäº’æ–¥ï¼‰ï¼Œæ— æ³•ç ´åï¼Œæœ¬èº«ç”¨é”å°±æ˜¯è¦äº’æ–¥<br>2ã€ï¼ˆå ç”¨ä¸”ç­‰å¾…ï¼‰ï¼Œä¸€æ¬¡æ€§å¯ä»¥ç”³è¯·æ‰€æœ‰çš„èµ„æºï¼Œè¿™æ ·å°±ä¸å­˜åœ¨ç­‰å¾…äº†<br>3ã€ï¼ˆä¸å¯æŠ¢å ï¼‰ï¼Œå ç”¨éƒ¨åˆ†èµ„æºçš„çº¿ç¨‹è¿›ä¸€æ­¥ç”³è¯·èµ„æºçš„æ—¶å€™ï¼Œå¦‚æœç”³è¯·ä¸åˆ°ï¼Œå°±å¯ä»¥ä¸»åŠ¨é‡Šæ”¾å æœ‰çš„èµ„æº<br>4ã€ï¼ˆå¾ªç¯ç­‰å¾…ï¼‰ï¼Œå¯ä»¥é æŒ‰é¡ºåºç”³è¯·èµ„æºæ¥é¢„é˜²ã€‚æ‰€è°“æŒ‰é¡ºåºç”³è¯·ï¼Œå°±æ˜¯æŒ‡èµ„æºæœ¬èº«æœ‰çº¿æ€§é¡ºåºï¼Œç”³è¯·çš„æ—¶å€™å¯ä»¥å…ˆç”³è¯·èµ„æºåºå·å°çš„ï¼Œå†ç”³è¯·å¤§çš„ï¼Œè¿™æ ·çº¿æ€§åŒ–åè‡ªç„¶ä¸å­˜åœ¨å¾ªç¯äº†","like_count":0},{"had_liked":false,"id":242585,"user_name":"fightingD","can_delete":false,"product_type":"c1","uid":1443637,"ip_address":"","ucode":"AD2876CED5D5AC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKwViav94kcF50CxA0Jw7icicxociaVzut97iacy3b2ciacFqXuFWdiakVq304YcI8pt4HT5A1Yvp8EkYCpw/132","comment_is_top":false,"comment_ctime":1597768230,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597768230","product_id":100023901,"comment_content":"æ˜¯æœ‰æ€§èƒ½ä¼˜åŠ¿çš„ï¼Œç”¨Account.classé”ï¼Œæ‰€æœ‰çš„è½¬è´¦æ“ä½œéƒ½æ˜¯ä¸²è¡Œäº†ï¼Œå¾ªç¯ç­‰å¾…è·å–è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·çš„é”è¿˜æ˜¯è¦æ¯”ä¸²è¡Œæ€§èƒ½è¦å¥½ã€‚","like_count":0},{"had_liked":false,"id":242523,"user_name":"å¯»ç äºº","can_delete":false,"product_type":"c1","uid":1480750,"ip_address":"","ucode":"1CED05494AC7E2","user_header":"https://static001.geekbang.org/account/avatar/00/16/98/2e/9cd3cea8.jpg","comment_is_top":false,"comment_ctime":1597750559,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1597750559","product_id":100023901,"comment_content":"å¯¹èµ„æºè¿›è¡Œæ’åºï¼Œè´¦æˆ·A è´¦æˆ·Bï¼Œä¸¤ä¸ªçº¿ç¨‹éœ€è¦åŒæ—¶å¯¹ABè¿›è¡Œæ“ä½œæ—¶ï¼Œéƒ½ä¼šé¦–å…ˆè·å–Aï¼Œè·å–ä¸åˆ°å°±ç­‰å¾…ä¸ä¼šå†è·å–Bï¼Œå°±ä¸ä¼šå¯¼è‡´å¾ªç¯ç­‰å¾…ã€‚","like_count":0},{"had_liked":false,"id":240455,"user_name":"é»„æ¯…","can_delete":false,"product_type":"c1","uid":1159363,"ip_address":"","ucode":"201C9FD58CF90B","user_header":"https://static001.geekbang.org/account/avatar/00/11/b0/c3/e1e2c097.jpg","comment_is_top":false,"comment_ctime":1596937293,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596937293","product_id":100023901,"comment_content":"åœ¨ç ´åå ç”¨ä¸”ç­‰å¾…æ¡ä»¶å°èŠ‚ä¸­ï¼Œé€šè¿‡Allocaterä¸€æ¬¡æ€§è·å¾—ç”³è¯·èµ„æºåï¼Œåœ¨Accountçš„transferæ–¹æ³•ä¸­ï¼Œè¿˜éœ€è¦åŠ é”thiså’Œtargetçš„åŸå› æ˜¯ä»€ä¹ˆï¼Œéº»çƒ¦è€å¸ˆè§£ç­”ï¼Ÿè°¢è°¢ã€‚","like_count":0},{"had_liked":false,"id":239395,"user_name":"ç»­è´¹ä¸“ç”¨","can_delete":false,"product_type":"c1","uid":2028938,"ip_address":"","ucode":"1B585A131B64B4","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f5/8a/dc9a23a1.jpg","comment_is_top":false,"comment_ctime":1596523063,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596523063","product_id":100023901,"comment_content":"if(als.contains(from) || als.contains(to)){ return false; } else { als.add(from); als.add(to); } è€å¸ˆï¼Œè¿™é‡Œif(als.contains(from) || als.contains(to)){ return false; }   å¦‚æœåªæœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿæ˜¯ä¼šå¾€ä¸‹èµ°å•Šï¼Œæ€ä¹ˆç¡®è®¤åŒæ—¶ç”³è¯·åˆ°äº†ä¸¤ä¸ªèµ„æºå‘¢","like_count":0},{"had_liked":false,"id":237824,"user_name":"7","can_delete":false,"product_type":"c1","uid":1114093,"ip_address":"","ucode":"10A6E57A027D42","user_header":"https://static001.geekbang.org/account/avatar/00/10/ff/ed/b2fc0e7c.jpg","comment_is_top":false,"comment_ctime":1595983595,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1595983595","product_id":100023901,"comment_content":"è™½ç„¶Allocatoræ˜¯å•ä¾‹ï¼Œapplyæ–¹æ³•ä¹ŸåŠ ä¸Šäº†synchornizedï¼ˆç›¸å½“äºä¸²è¡Œç”³è¯·èµ„æºï¼‰ï¼Œä½†ç”³è¯·åˆ°èµ„æºåè½¬è´¦æ“ä½œæ˜¯å¯ä»¥å¹¶è¡Œçš„ã€‚<br><br>ä¸è¿‡åœ¨å¹¶å‘æ¯”è¾ƒå°çš„æ—¶å€™whileè¿™ç§è‡ªæ—‹æ–¹å¼å¯èƒ½æ•ˆç‡é«˜ç‚¹ï¼Œå¹¶å‘å¤§äº†å°±æ²¡synchornizedæ•ˆç‡é«˜äº†ï¼Œéƒ½åœ¨é‚£whileäº†<br>è¿™é‡Œçš„å¹¶å‘å¤§æ˜¯æŒ‡å‡ºç°è½¬è´¦æœ‰å¾ˆå¤šäº¤é›†çš„æƒ…å†µã€‚æ¯”å¦‚Aè½¬Bï¼ŒCè½¬Aï¼Œè¿™é‡Œå‡ºç°Aè´¦æˆ·çš„äº¤é›†<br>","like_count":0,"discussions":[{"author":{"id":2697700,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/LFJZ4x47rvShGhsePLIxc8EzdlBxAmVAIjJ2FQZ4NEpo8E4JCZQEOb2NIfOuiaQLL6Otkt7W3Rmu6Tv3AkgYdRA/132","nickname":"é”®ç›˜ä¸Šçš„é­”æœ¯","note":"","ucode":"A731D721FB8D3A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554268,"discussion_content":"è½¬è´¦æ€ä¹ˆå¹¶è¡Œï¼Ÿ å‰é¢ä¸€ä¸ªçº¿ç¨‹æ²¡æœ‰è½¬è´¦å®Œæˆç„¶åfinallyé‡Œè°ƒç”¨freeæ–¹æ³•ï¼Œåé¢é‚£ä¸ªçº¿ç¨‹éƒ½æ‹¿ä¸åˆ°èµ„æºä¸€ç›´åœ¨whileå¾ªç¯é‡Œï¼Œè‡ªç„¶ä¹Ÿæ— æ³•è½¬è´¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646292952,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":233665,"user_name":"sibyl","can_delete":false,"product_type":"c1","uid":1323652,"ip_address":"","ucode":"0D142011860D69","user_header":"","comment_is_top":false,"comment_ctime":1594377373,"is_pvip":false,"replies":[{"id":"86303","content":"ğŸ‘ğŸ»","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1594461790,"ip_address":"","comment_id":233665,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1594377373","product_id":100023901,"comment_content":"è€å¸ˆå¥½ï¼Œæ ¹æ®è¿™ç¯‡æ–‡ç« ï¼Œå†™äº†ç¯‡åšå®¢ï¼Œç”¨ä»£ç è¯¦ç»†å®ç°äº†è½¬è´¦çš„çº¿ç¨‹ä¸å®‰å…¨å®ç°ï¼Œæ´»é”å®ç°ï¼Œæ­»é”å®ç°å’Œ4ç§æ­£ç¡®çš„å®ç°ï¼Œå¹¶å‘ç°ä¸€æ¬¡æ€§åŠ é”å’ŒtryLock+éšæœºsleepçš„ä¸¤ç§å®ç°çš„æ€§èƒ½æ²¡æœ‰é¡ºåºåŠ é”çš„æ€§èƒ½é«˜ã€‚<br><br>åšæ–‡åœ°å€:  https:&#47;&#47;blog.csdn.net&#47;zhouwenjun0820&#47;java&#47;article&#47;details&#47;107247177","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501125,"discussion_content":"ğŸ‘ğŸ»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594461790,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1323652,"avatar":"","nickname":"sibyl","note":"","ucode":"0D142011860D69","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290555,"discussion_content":"ä¸å¥½æ„æ€ï¼Œæ›´æ–°é“¾æ¥   https://blog.csdn.net/zhouwenjun0820/article/details/107247177?utm_source=app","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594531306,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":232198,"user_name":"Paul","can_delete":false,"product_type":"c1","uid":1076465,"ip_address":"","ucode":"6E3E907E6DFFD7","user_header":"https://static001.geekbang.org/account/avatar/00/10/6c/f1/d4a4fb43.jpg","comment_is_top":false,"comment_ctime":1593916724,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1593916724","product_id":100023901,"comment_content":"whileè¿™ä¸ªè¿˜ä¸è®©åº¦CPUè°ƒåº¦å§ï¼Ÿå°±æ˜¯ä¸ä¼šä½¿å½“å‰è¿™ä¸ªwhileæ‰€æ‰§è¡Œçº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ã€‚æ˜¯å—","like_count":0},{"had_liked":false,"id":232019,"user_name":"13501018051","can_delete":false,"product_type":"c1","uid":1218076,"ip_address":"","ucode":"D90E50B9C249AE","user_header":"","comment_is_top":false,"comment_ctime":1593832815,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593832815","product_id":100023901,"comment_content":"åœ¨â€œç ´åå ç”¨ä¸”ç­‰å¾…æ¡ä»¶â€ä¸­ï¼Œ å·²ç»é€šè¿‡Allocatorçš„æ¥ä¿è¯å¯¹è½¬è´¦çš„ä¸¤ä¸ªAccountèµ„æºçš„æŠ¢å çš„â€œåŸå­æ€§â€ã€‚ Account.transfer æ–¹æ³•ä½“çš„ ä¸¤ä¸ª synchronized æ˜¯å¦å¯ä»¥å»æ‰äº†ï¼Ÿ  ","like_count":0},{"had_liked":false,"id":229127,"user_name":"å‘¨è±ª","can_delete":false,"product_type":"c1","uid":1877217,"ip_address":"","ucode":"C47AE94726A989","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erIBYBQl9STN29VfmS4OSWWNXSCg0jnPI1ibVERGUcHMyseNSibBfIlF68myqFkfox0Ibg75a1hgXCw/132","comment_is_top":false,"comment_ctime":1592902165,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592902165","product_id":100023901,"comment_content":"è€å¸ˆï¼Œä½ å‰é¢æ–‡ç« è¯´ä¸èƒ½ç”¨å¤šä¸ªé”ä¿æŠ¤ä¸€ä¸ªèµ„æºå—ï¼Ÿä½ ä¸Šé¢ç¬¬ä¸€æ®µä»£ç ç”¨ä¸€ä¸ªthisé”å’Œtargeté” é”å®šäº†åŒä¸€ä¸ªèµ„æºï¼Œè¿™æ˜¯ä¸ºå•¥","like_count":0},{"had_liked":false,"id":225791,"user_name":"Become a architect","can_delete":false,"product_type":"c1","uid":1248265,"ip_address":"","ucode":"6F1C9B183095E4","user_header":"https://static001.geekbang.org/account/avatar/00/13/0c/09/a46ad0a6.jpg","comment_is_top":false,"comment_ctime":1591858712,"is_pvip":false,"replies":[{"id":"83305","content":"æ„Ÿè§‰ä¸ä»…æ˜¯è¿™æ ·ï¼Œå¾ªç¯ç­‰å¾…è‡³å°‘æœ‰ä¸¤æŠŠé”ï¼Œä¸€ä¸€å¯¹ä¸Šä¹Ÿä¼šæœ‰é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1591971877,"ip_address":"","comment_id":225791,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591858712","product_id":100023901,"comment_content":"ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶ï¼Œå…³é”®ç‚¹åœ¨äºleftå’Œrightäº¤æ¢è¿™ä¸€ä¸‹ã€‚ä¹Ÿå°±æ˜¯æŠŠé”å’Œèµ„æºä¸€ä¸€å¯¹åº”ä¸Šï¼Œé¿å…ç”¨åˆ«äººå®¶çš„é”ï¼Œé”äº†è‡ªå®¶çš„é—¨ã€‚è€å¸ˆè¿™æ ·ç†è§£å¯¹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497992,"discussion_content":"æ„Ÿè§‰ä¸ä»…æ˜¯è¿™æ ·ï¼Œå¾ªç¯ç­‰å¾…è‡³å°‘æœ‰ä¸¤æŠŠé”ï¼Œä¸€ä¸€å¯¹ä¸Šä¹Ÿä¼šæœ‰é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591971877,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224333,"user_name":"Just","can_delete":false,"product_type":"c1","uid":2022626,"ip_address":"","ucode":"35FA6917DE1D04","user_header":"https://static001.geekbang.org/account/avatar/00/1e/dc/e2/a3abd320.jpg","comment_is_top":false,"comment_ctime":1591346597,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591346597","product_id":100023901,"comment_content":"1ï¼‰åœ¨ç ´åå ç”¨ä¸”ç­‰å¾…çš„æ¡ˆä¾‹ä¸­ï¼Œå¦‚æœè´¦æˆ·Aè½¬è´¦ç»™è´¦æˆ·Bï¼Œè´¦æˆ·Bè½¬è´¦ç»™è´¦æˆ·Cï¼Œè¿˜æ˜¯ä¼šä¸²è¡Œæ‰§è¡Œï¼Œä¸è¿‡å½±å“çš„æ—¶Aã€Bã€Cä¸‰ä¸ªç”¨æˆ·<br>2ï¼‰ç”¨synchronized(Account.class)çš„è¯ï¼Œæœ‰ä¸”åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½è·å–é”","like_count":0},{"had_liked":false,"id":223792,"user_name":"éšå¿ƒ","can_delete":false,"product_type":"c1","uid":1358922,"ip_address":"","ucode":"9D399CF3D4082E","user_header":"https://static001.geekbang.org/account/avatar/00/14/bc/4a/bc5b1748.jpg","comment_is_top":false,"comment_ctime":1591182058,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591182058","product_id":100023901,"comment_content":"æˆ‘è§‰å¾—è¿™ä¸ªè¦çœ‹while()å’Œä¸‹é¢è½¬è´¦æ“ä½œå“ªä¸ªæ›´è€—æ—¶äº†ï¼Œæ¯•ç«Ÿé‚£ä¸ªwhileå¾ªç¯é‡ŒAccountæ˜¯å•ä¾‹ï¼Œæ‰€æœ‰çš„çº¿ç¨‹åœ¨è¿™é‡Œéƒ½æ˜¯ä¸²è¡Œçš„ï¼Œå¦‚æœä¸‹é¢é‚£ä¸ªè½¬è´¦çš„æ“ä½œæ¯”è¾ƒè€—æ—¶ï¼Œä¸¤ä¸ªçº¿ç¨‹çš„è½¬è´¦äººä¹Ÿæ˜¯ä¸åŒçš„ï¼Œé‚£ä¹ˆåªæ˜¯åœ¨åˆ¤æ–­é‚£ä¸€å—ä¸²è¡Œï¼Œä¹‹åå°±å¯ä»¥éƒ½è·å–åˆ°é”ï¼Œç„¶åå¹¶è¡Œå»è½¬è´¦äº†","like_count":0},{"had_liked":false,"id":222269,"user_name":"Lee","can_delete":false,"product_type":"c1","uid":1923267,"ip_address":"","ucode":"FFCE9DE42920E2","user_header":"","comment_is_top":false,"comment_ctime":1590732697,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590732697","product_id":100023901,"comment_content":"ä½ å¥½ï¼Œè€å¸ˆï¼Œåœ¨ä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰èµ„æºçš„ä¾‹å­ä¸­ï¼Œæœ‰ä¸¤ä¸ªåœ°æ–¹çš„synchronizedæ˜¯æ²¡å¿…è¦åŠ çš„ï¼Œç¬¬ä¸€ä¸ªæ˜¯synchronized void freeï¼Œè¿™é‡Œçš„synchronizedæ²¡å¿…è¦åŠ ã€‚ç¬¬äºŒæ˜¯è½¬è´¦æ–¹æ³•ä¸­çš„åµŒå¥—synchronizedï¼Œä¸€ä¸ªæ“ä½œAã€Bè¿™ä¸¤ä¸ªè´¦æˆ·çš„çº¿ç¨‹èƒ½èµ°åˆ°è¿™ä¸ªåœ°æ–¹ï¼Œå°±ä¸ä¼šæœ‰ç¬¬äºŒä¸ªåŒ…å«Aã€Bçš„çº¿ç¨‹èµ°åˆ°è¿™é‡Œäº†ã€‚","like_count":0},{"had_liked":false,"id":216713,"user_name":"å¤§è±¡ä½©å¥‡","can_delete":false,"product_type":"c1","uid":1070165,"ip_address":"","ucode":"EAFB4FA3B9CFEF","user_header":"https://static001.geekbang.org/account/avatar/00/10/54/55/f686c2ed.jpg","comment_is_top":false,"comment_ctime":1589331370,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589331370","product_id":100023901,"comment_content":"ç ´åå æœ‰ä¸”ç­‰å¾…çš„ä»£ç é‡Œï¼ŒAccountä¸­çš„ä¸¤ä¸ªsynchronizedæ˜¯ä¸æ˜¯å¯ä»¥å»æ‰ï¼Œç„¶åæŠŠbalanceæ”¹æˆviolateå°±è¡Œäº†","like_count":0},{"had_liked":false,"id":215423,"user_name":"sky","can_delete":false,"product_type":"c1","uid":1008071,"ip_address":"","ucode":"9FE5F43055D3AB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/61/c7/b64ac05e.jpg","comment_is_top":false,"comment_ctime":1588989034,"is_pvip":false,"replies":[{"id":"80122","content":"å¦‚æœæ˜¯ä¸€æ¬¡æ€§è·å–æ‰€æœ‰é”ï¼Œå°±æ²¡å¿…è¦å†æ’åºäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1589286592,"ip_address":"","comment_id":215423,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1588989034","product_id":100023901,"comment_content":"<br>class Allocator {<br>  private List&lt;Object&gt; als =<br>    new ArrayList&lt;&gt;();<br>  &#47;&#47; ä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰èµ„æº<br>  synchronized boolean apply(<br>    Object from, Object to){<br>    if(als.contains(from) ||<br>         als.contains(to)){<br>      return false;  <br>    } else {<br>      als.add(from);<br>      als.add(to);  <br>    }<br>    return true;<br>  }<br>  &#47;&#47; å½’è¿˜èµ„æº<br>  synchronized void free(<br>    Object from, Object to){<br>    als.remove(from);<br>    als.remove(to);<br>  }<br>}<br><br>class Account {<br>  &#47;&#47; actråº”è¯¥ä¸ºå•ä¾‹<br>  private Allocator actr;<br>  private int balance;<br>  &#47;&#47; è½¬è´¦<br>  void transfer(Account target, int amt){<br>    &#47;&#47; ä¸€æ¬¡æ€§ç”³è¯·è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·ï¼Œç›´åˆ°æˆåŠŸ<br>    while(!actr.apply(this, target))<br>      ï¼›<br>    try{<br>      &#47;&#47; é”å®šè½¬å‡ºè´¦æˆ·<br>      synchronized(this){              <br>        &#47;&#47; é”å®šè½¬å…¥è´¦æˆ·<br>        synchronized(target){           <br>          if (this.balance &gt; amt){<br>            this.balance -= amt;<br>            target.balance += amt;<br>          }<br>        }<br>      }<br>    } finally {<br>      actr.free(this, target)<br>    }<br>  } <br>}<br><br><br><br><br><br><br><br>å¯¹äºè¿™ä¸ªæœ‰ä¸ªç–‘é—®ï¼Œæ—¢ç„¶å·²ç»ä¸€æ¬¡æ‹¿åˆ°äº†æ‰€æœ‰èµ„æºï¼Œå†…éƒ¨æ˜¯ä¸æ˜¯å°±ä¸éœ€è¦å†æ’åºäº†ï¼Œå› ä¸ºä¸ä¼šå†å‡ºç° åŒæ ·çš„ä¸¤ä¸ªaccount å†å¹¶å‘è·å–é” é€ æˆæ­»é”ï¼Œ æˆ‘ç†è§£çš„æœ‰é—®é¢˜ä¸ï¼Œæ±‚è€å¸ˆæŒ‡æ•™","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494429,"discussion_content":"å¦‚æœæ˜¯ä¸€æ¬¡æ€§è·å–æ‰€æœ‰é”ï¼Œå°±æ²¡å¿…è¦å†æ’åºäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589286592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1008071,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/61/c7/b64ac05e.jpg","nickname":"sky","note":"","ucode":"9FE5F43055D3AB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":268949,"discussion_content":"ä¸€æ¬¡æ€§è·å–åˆ°æ‰€æœ‰çš„é”ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿä¸å†éœ€è¦å¯¹ä¸¤ä¸ªå•ç‹¬account å†åˆ†åˆ«ä¸Šé”äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589851054,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215069,"user_name":"wking","can_delete":false,"product_type":"c1","uid":1294634,"ip_address":"","ucode":"47D52E4280D1E6","user_header":"https://static001.geekbang.org/account/avatar/00/13/c1/2a/e7102065.jpg","comment_is_top":false,"comment_ctime":1588900185,"is_pvip":false,"replies":[{"id":"79655","content":"ä¸æ˜¯","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1588943125,"ip_address":"","comment_id":215069,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1588900185","product_id":100023901,"comment_content":"ç ´åå¾ªç¯ç­‰å¾…ï¼Œä»å°åˆ°å¤§é¡ºåºé”ï¼ŒæŒ‰ç…§è¿™æ ·çš„æƒ³æ³•ï¼Œåªèƒ½aè´¦æˆ·ç»™bè´¦æˆ·è½¬è´¦ï¼Œbæ°¸è¿œä¸èƒ½è½¬è´¦ç»™aï¼Œæ˜¯å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494300,"discussion_content":"ä¸æ˜¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588943125,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214572,"user_name":"æµ·ä¸œ","can_delete":false,"product_type":"c1","uid":1635517,"ip_address":"","ucode":"69F48B3151BDCB","user_header":"https://static001.geekbang.org/account/avatar/00/18/f4/bd/8d6b3098.jpg","comment_is_top":false,"comment_ctime":1588767074,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588767074","product_id":100023901,"comment_content":"è€å¸ˆï¼Œä¸ºä»€ä¹ˆæˆ‘è§‰å¾—æ¡ä»¶äºŒå’Œæ¡ä»¶ä¸‰å…¶å®æ˜¯ä¸€å›äº‹ï¼Ÿ å ç”¨ä¸”ç­‰å¾…å°±æ˜¯ä¸èƒ½è¢«æŠ¢å ","like_count":0},{"had_liked":false,"id":213609,"user_name":"kimoti","can_delete":false,"product_type":"c1","uid":1897671,"ip_address":"","ucode":"0A78077408C2B1","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f4/c7/037235c9.jpg","comment_is_top":false,"comment_ctime":1588490313,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588490313","product_id":100023901,"comment_content":"whileå¾ªç¯è¿™ç§æ–¹å¼çš„ç­‰å¾…å°±æ˜¯ä¼ è¯´ä¸­çš„è‡ªæ—‹é”ï¼Ÿ","like_count":0},{"had_liked":false,"id":213376,"user_name":"è§å—å±±","can_delete":false,"product_type":"c1","uid":1118111,"ip_address":"","ucode":"6A8BB82B7573CA","user_header":"https://static001.geekbang.org/account/avatar/00/11/0f/9f/f4b06bd5.jpg","comment_is_top":false,"comment_ctime":1588398585,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588398585","product_id":100023901,"comment_content":"ç»†ç²’åº¦é”èƒ½å¤Ÿæå‡æ€§èƒ½ï¼Œä½†å¯èƒ½ä¼šå¼•å…¥æ­»é”ã€‚æ­»é”éœ€è¦äº’æ–¥ï¼ŒæŒæœ‰å¹¶ç­‰å¾…ï¼Œä¸å¯æŠ¢å ï¼Œå¾ªç¯ç­‰å¾…ç­‰æ¡ä»¶ï¼Œåªéœ€è¦ç ´åå…¶ä¸­ä¸€ç§ã€‚ä¸€èˆ¬å°±æ˜¯ä¸€æ¬¡å…¨éƒ¨è·å–ï¼Œè·å–å¤±è´¥åˆ™é‡Šæ”¾ï¼ŒæŒ‰åºç”³è¯·ç­‰æ–¹å¼ã€‚","like_count":0},{"had_liked":false,"id":209566,"user_name":"è§å—å±±","can_delete":false,"product_type":"c1","uid":1118111,"ip_address":"","ucode":"6A8BB82B7573CA","user_header":"https://static001.geekbang.org/account/avatar/00/11/0f/9f/f4b06bd5.jpg","comment_is_top":false,"comment_ctime":1587567030,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587567030","product_id":100023901,"comment_content":"è®°å½•ä¸‹ï¼Œæ­»é”çš„å‡ºç°æ»¡è¶³å››ä¸ªæ¡ä»¶:äº’æ–¥ï¼Œå æœ‰å¹¶ç­‰å¾…ï¼Œå¾ªç¯ç­‰å¾…ï¼Œä¸å¯æŠ¢å èµ„æºã€‚äº’æ–¥æ˜¯ä½¿ç”¨é”çš„åŸå› ã€‚å æœ‰å¹¶ç­‰å¾…å¯ä»¥é€šè¿‡è·å–ä¸åˆ°é‡Šæ”¾ä¸é˜»å¡tryLockï¼Œå¾ªç¯ç­‰å¾…åˆ™æ˜¯æŒ‰é¡ºåºè·å–é”ï¼Œä¸å¯æŠ¢æˆ˜èµ„æºå…¨éƒ¨ä¸€æ¬¡è·å–ã€‚","like_count":0},{"had_liked":false,"id":208849,"user_name":"ç‰™åŒ»","can_delete":false,"product_type":"c1","uid":1108159,"ip_address":"","ucode":"27791DFF11EF45","user_header":"https://static001.geekbang.org/account/avatar/00/10/e8/bf/39042a46.jpg","comment_is_top":false,"comment_ctime":1587450061,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587450061","product_id":100023901,"comment_content":"C++é‡Œé¢æœ‰adopt_lock,ä¸ºä½•javaä¸èƒ½ä»è¯­è¨€å±‚é¢è§£å†³ä¸€ä¸‹å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":205569,"user_name":"M","can_delete":false,"product_type":"c1","uid":1810576,"ip_address":"","ucode":"06F26E1D62E9C9","user_header":"https://wx.qlogo.cn/mmopen/vi_32/eLNeJNaEkwGSK7xvtamMibVLMy2MpbIqX3iaEhT7JtSnTRMRTwZ2j4HX7WAapiashbiaBDVriaXKSP0Oeic6ZAEVEXag/132","comment_is_top":false,"comment_ctime":1586675682,"is_pvip":false,"replies":[{"id":"76835","content":"æœ‰æ”¶è·å°±å¥½ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1586693788,"ip_address":"","comment_id":205569,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1586675682","product_id":100023901,"comment_content":"3. ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶<br>å½“æˆ‘è¯»ç¬¬ä¸€éä»£ç æ—¶ï¼Œæ²¡çœ‹æ‡‚ï¼Œå¿ƒæƒ³è¿™æ˜¯ä»€ä¹ˆæ„æ€å˜›ã€‚<br>å½“æˆ‘è¯»ç¬¬äºŒéæ—¶ï¼Œå‘ç°æ’åºï¼ˆä»å°åˆ°å¤§ï¼‰ï¼ŒæŒ‰ç…§é¡ºåºåŠ é”ï¼Œç»†ç»†çš„å“å‘³äº†ä¸€ç•ªä»£ç ï¼Œå“‡ï¼ŒåŸæ¥æ˜¯è¿™æ ·ï¼Œå¤ªé«˜æ˜äº†<br><br>è€å¸ˆçœŸçš„å¤ªæ£’äº†ï¼Œè®²è§£çš„å¾ˆé€å½»ï¼Œè°¢è°¢è€å¸ˆæä¾›äº†è¿™ä¸ªä¸“æ ï¼","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491514,"discussion_content":"æœ‰æ”¶è·å°±å¥½ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586693788,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205557,"user_name":"M","can_delete":false,"product_type":"c1","uid":1810576,"ip_address":"","ucode":"06F26E1D62E9C9","user_header":"https://wx.qlogo.cn/mmopen/vi_32/eLNeJNaEkwGSK7xvtamMibVLMy2MpbIqX3iaEhT7JtSnTRMRTwZ2j4HX7WAapiashbiaBDVriaXKSP0Oeic6ZAEVEXag/132","comment_is_top":false,"comment_ctime":1586673261,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586673261","product_id":100023901,"comment_content":"synchronized(Account.classï¼‰è¿™ç§æ‰€æœ‰çš„è½¬è´¦æ“ä½œéƒ½æˆäº†ä¸²è¡Œäº†ï¼Œæ’é˜Ÿç­‰å¾…ã€‚<br>è€Œwhile(!actr.apply(this, target));åªæ˜¯åŒæ—¶å¾ªç¯ç”³è¯·ä¸¤ä¸ªå¯¹è±¡ï¼Œå°±æ¯”å¦‚Aè½¬è´¦Bï¼ŒCè½¬è´¦Dï¼Œç›¸å¯¹äºsyæ¥è¯´è¿™ä¸¤ä¸ªè½¬è´¦å°±æˆäº†ä¸²è¡Œï¼Œè€Œwhileä¹Ÿæ˜¯å¹¶è¡Œæ“ä½œï¼Œåªæ˜¯å¾ªç¯åŒæ—¶è·å–Aå’ŒBçš„é”æˆ–Cå’ŒDçš„é”ï¼Œç›¸å¯¹äºä¸²è¡Œï¼Œwhileæ•ˆç‡è¿˜æ˜¯é«˜ä¸€ç‚¹","like_count":0},{"had_liked":false,"id":203935,"user_name":"å¿†æ°´å¯’","can_delete":false,"product_type":"c1","uid":1147453,"ip_address":"","ucode":"E3F86BD8AA8903","user_header":"https://static001.geekbang.org/account/avatar/00/11/82/3d/356fc3d6.jpg","comment_is_top":false,"comment_ctime":1586308614,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586308614","product_id":100023901,"comment_content":"è€å¸ˆï¼Œå…¶å®synchronizedæ˜¯é‡é”ï¼Œè€Œwhile(!actr.apply(this, target))è¿™ä¸ªæ–¹æ³•ç±»ä¼¼äºCASè‡ªæ—‹ç®—æ³•ï¼Œè™½ç„¶æ¶ˆè€—äº†ä¸€å®šçš„CUPï¼Œä½†æ˜¯æé«˜äº†æ€§èƒ½ã€‚","like_count":0},{"had_liked":false,"id":202587,"user_name":"æ¥Š_å®µå¤œ","can_delete":false,"product_type":"c1","uid":1019302,"ip_address":"","ucode":"7BA0CADC5F23BB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/a6/22c37c91.jpg","comment_is_top":false,"comment_ctime":1586011411,"is_pvip":false,"replies":[{"id":"75864","content":"åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä¸´ç•ŒåŒºçš„ä»£ç ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ä¸å®‰å…¨çš„arraylistï¼Œä¸è¿‡ç™¾ä¸‡çº§åˆ«å¹¶å‘ä½¿ç”¨è¿™ç§æ–¹æ³•ä¸€å®šæœ‰æ€§èƒ½é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1586091304,"ip_address":"","comment_id":202587,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1586011411","product_id":100023901,"comment_content":"ä»¤å“¥å¥½ï¼Œæ¥å¤ä¹ æ–‡ç« çš„æ—¶å€™å‘ç°æœ‰äº›ç–‘é—®â“<br>Allocatorä½œä¸ºå•ä¾‹ï¼Œåœ¨[è½¬è´¦]è¿™ä¸ªä¹Ÿè®¸åœºæ™¯ä¸‹ï¼Œå†…éƒ¨æŒæœ‰ArrayListæ˜¯å¦ä¸å¤ªå¯¹å‘¢ï¼Ÿ<br>æŒ‰æˆ‘ç†è§£ï¼ŒArrayListå±äºçº¿ç¨‹ä¸å®‰å…¨ï¼Œå¦‚æœåœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œç™¾ä¸‡çº§ä»¥ä¸Šç”¨æˆ·åŒæ—¶è½¬è´¦ï¼Œé¢‘ç¹åœ°åŠ åŠ å‡å‡ï¼Œåº”è¯¥ä¼šæœ‰é—®é¢˜å§ï¼ŸğŸ˜‚<br>æœ›ä»¤å“¥æŒ‡æ­£ğŸŒšğŸŒš","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490624,"discussion_content":"åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä¸´ç•ŒåŒºçš„ä»£ç ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ä¸å®‰å…¨çš„arraylistï¼Œä¸è¿‡ç™¾ä¸‡çº§åˆ«å¹¶å‘ä½¿ç”¨è¿™ç§æ–¹æ³•ä¸€å®šæœ‰æ€§èƒ½é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586091304,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":201236,"user_name":"J.N.","can_delete":false,"product_type":"c1","uid":1934147,"ip_address":"","ucode":"E6501AFA8C6BC6","user_header":"https://static001.geekbang.org/account/avatar/00/1d/83/43/2132acb5.jpg","comment_is_top":false,"comment_ctime":1585737938,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585737938","product_id":100023901,"comment_content":"synchronized(Account.class) é”çš„æ˜¯ç±»ï¼Œè¢«æ‰€æœ‰çº¿ç¨‹æ‰€å…±äº«ï¼Œæ‰€ä»¥è°ƒç”¨è¯¥æ–¹æ³•çš„çº¿ç¨‹éƒ½ä¼šè¢«é˜»å¡ï¼Œwhile(!actr.apply(this, target))é”çš„æ˜¯this, targetä¸¤ä¸ªå¯¹è±¡ï¼Œåªæœ‰é”æ˜¯è¿™ä¸¤ä¸ªå¯¹è±¡ä¹‹ä¸€çš„æ‰ä¼šè¢«é˜»å¡","like_count":0},{"had_liked":false,"id":196668,"user_name":"qpzm7903","can_delete":false,"product_type":"c1","uid":1138683,"ip_address":"","ucode":"C7C14962D34BE7","user_header":"https://static001.geekbang.org/account/avatar/00/11/5f/fb/af061ca7.jpg","comment_is_top":false,"comment_ctime":1585301343,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585301343","product_id":100023901,"comment_content":"èµ„æºæ˜¯äº’æ–¥çš„ï¼Œä¸æ˜¯ä½ æ‹¿å°±æ˜¯æˆ‘æ‹¿ï¼Œè‡ªå·±æ‹¿ä¸åˆ°èµ„æºè¿˜å¾—ç­‰ç€ï¼Œä¸èƒ½æŠ¢ã€‚ã€‚","like_count":0},{"had_liked":false,"id":193266,"user_name":"ä¸","can_delete":false,"product_type":"c1","uid":1130108,"ip_address":"","ucode":"33E94956454A3D","user_header":"","comment_is_top":false,"comment_ctime":1584887765,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584887765","product_id":100023901,"comment_content":"ç»“åˆä¸šåŠ¡æ¥è®²ã€‚å¯¹ç†è§£åŸç†å¾ˆæœ‰å¸®åŠ©","like_count":0},{"had_liked":false,"id":192583,"user_name":"Zain Zhu","can_delete":false,"product_type":"c1","uid":1125986,"ip_address":"","ucode":"5402E6FF76333A","user_header":"https://static001.geekbang.org/account/avatar/00/11/2e/62/ea49480e.jpg","comment_is_top":false,"comment_ctime":1584861688,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584861688","product_id":100023901,"comment_content":"å­¦ä¹ äº†ã€‚å‰ä¸€è®²é¦–å…ˆå°±æ˜¯æƒ³åˆ°äº†ç”¨ç±»ä»£æ›¿å®ä¾‹ä½œä¸ºé”ï¼Œä½†æ˜¯æ²¡å†è¿›ä¸€æ­¥æ€è€ƒä¸‹è¿™æ ·ä¼šå¸¦æ¥çš„æ€§èƒ½é—®é¢˜ã€‚ç»†åˆ†ç²’åº¦é”çš„æ—¶å€™ï¼Œåˆæ²¡æœ‰è¿›ä¸€æ­¥æƒ³åˆ°å¯èƒ½éšä¹‹è€Œæ¥çš„æ­»é”é—®é¢˜ã€‚","like_count":0},{"had_liked":false,"id":189110,"user_name":"å¼¹å¼¹æ£‰èŠ±","can_delete":false,"product_type":"c1","uid":1241859,"ip_address":"","ucode":"FCB9FB8338CAF3","user_header":"https://static001.geekbang.org/account/avatar/00/12/f3/03/a5091282.jpg","comment_is_top":false,"comment_ctime":1584456191,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584456191","product_id":100023901,"comment_content":"æ€è€ƒé¢˜ï¼š<br>while(!actr.apply(this, target)) æ€§èƒ½ä¼šé«˜ä¸€äº›ï¼Œå¯¹äºéthiså’Œtargetå¯¹è±¡çš„è´¦æˆ·å¯ä»¥éäº’æ–¥çš„è¿›è¡Œæ“ä½œï¼›","like_count":0},{"had_liked":false,"id":187158,"user_name":"æµæ°“å…”","can_delete":false,"product_type":"c1","uid":1098600,"ip_address":"","ucode":"1A6AC1177BC17E","user_header":"https://static001.geekbang.org/account/avatar/00/10/c3/68/63fabc34.jpg","comment_is_top":false,"comment_ctime":1584028674,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584028674","product_id":100023901,"comment_content":"æŒ‰é“ç†æ¥è¯´ï¼Œåœ¨è¿™ä¸ªè½¬è´¦ä¾‹å­ä¸­ï¼Œä¿®æ”¹Bè´¦æˆ·ä½™é¢åº”è¯¥æ˜¯è°ƒç”¨Bå¯¹è±¡è‡ªèº«çš„æ–¹æ³•æ“ä½œï¼Œä¸åº”è¯¥åœ¨Aå¯¹è±¡é‡Œé¢ç›´æ¥ä¿®æ”¹Bå¯¹è±¡çš„æˆå‘˜å˜é‡ã€‚å¦‚æœæ¯ä¸ªå¯¹è±¡è‡ªèº«çš„å®ä¾‹æ–¹æ³•é‡Œé¢éƒ½ç”¨äº†synchronizedä¿®é¥°ï¼Œé”çš„ç²’åº¦ä¹Ÿæ˜¯æ¯”è¾ƒå°çš„ï¼Œä¸ä¼šå­˜åœ¨å¹¶å‘é—®é¢˜ã€‚","like_count":0},{"had_liked":false,"id":186160,"user_name":"Hugas Chan ğŸ­","can_delete":false,"product_type":"c1","uid":1597153,"ip_address":"","ucode":"10AEBC72784970","user_header":"https://static001.geekbang.org/account/avatar/00/18/5e/e1/261664f8.jpg","comment_is_top":false,"comment_ctime":1583768077,"is_pvip":false,"replies":[{"id":"72703","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1584357366,"ip_address":"","comment_id":186160,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1583768077","product_id":100023901,"comment_content":"é‚£ä¸ªåˆ†å¸ƒå¼çš„æ˜¯ä¸æ˜¯synchronizedå°±æ²¡å•¥ç”¨äº†","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486651,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584357366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176022,"user_name":"èŒ¶æ²¡å–å®Œ","can_delete":false,"product_type":"c1","uid":1644104,"ip_address":"","ucode":"D72D88C42A1258","user_header":"https://static001.geekbang.org/account/avatar/00/19/16/48/09493874.jpg","comment_is_top":false,"comment_ctime":1580913056,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1580913056","product_id":100023901,"comment_content":"æ€è·¯éå¸¸æ¸…æ™°ï¼Œå‰å®³ã€‚","like_count":0},{"had_liked":false,"id":174564,"user_name":"ä¸‰å¹´è¿‡å","can_delete":false,"product_type":"c1","uid":1283157,"ip_address":"","ucode":"5E9106C5F11BED","user_header":"https://static001.geekbang.org/account/avatar/00/13/94/55/afc64956.jpg","comment_is_top":false,"comment_ctime":1580279912,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1580279912","product_id":100023901,"comment_content":"&#47;&#47; ä¸€æ¬¡æ€§ç”³è¯·è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·ï¼Œç›´åˆ°æˆåŠŸ    while(!actr.apply(this, target))      ï¼›    try{      &#47;&#47; é”å®šè½¬å‡ºè´¦æˆ·      synchronized(this){                      &#47;&#47; é”å®šè½¬å…¥è´¦æˆ·        synchronized(target){ <br><br>æœ‰ä¸ªç–‘é—®ï¼šäº¤ç»™èµ„æºç®¡ç†å‘˜å»ç»´æŠ¤é”èµ„æºäº†ï¼Œé‚£ä¹ˆè¿™å—ä»£ç ä¸­çš„è½¬å…¥å’Œè½¬å‡ºè´¦å·å°±ä¸éœ€è¦é”äº†æŠŠï¼Ÿ ","like_count":0},{"had_liked":false,"id":173469,"user_name":"æ±¤å°é«˜","can_delete":false,"product_type":"c1","uid":1555565,"ip_address":"","ucode":"D4AB7766273D52","user_header":"https://static001.geekbang.org/account/avatar/00/17/bc/6d/f6f0a442.jpg","comment_is_top":false,"comment_ctime":1579569849,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1579569849","product_id":100023901,"comment_content":"synchronizedä¸èƒ½ä¿è¯å¯¹åˆ†å¸ƒå¼åœºæ™¯ä¸‹äº’æ–¥èµ„æºçš„åŒæ­¥è®¿é—®ï¼Œåˆ†å¸ƒå¼åœºæ™¯ä¸‹ç”¨ä»€ä¹ˆæ–¹æ¡ˆäº†ï¼Œåˆ†å¸ƒå¼é”åŠ åˆ†å¸ƒå¼äº‹ç‰©å—","like_count":0},{"had_liked":false,"id":171808,"user_name":"åœ¨è·¯ä¸Š","can_delete":false,"product_type":"c1","uid":1641319,"ip_address":"","ucode":"E1184E76B14431","user_header":"https://static001.geekbang.org/account/avatar/00/19/0b/67/dc49a1a8.jpg","comment_is_top":false,"comment_ctime":1579016412,"is_pvip":false,"replies":[{"id":"66868","content":"æ­»é”æ˜¯æ°¸è¿œéƒ½è·å–ä¸åˆ°é”ï¼Œä½ è¯´çš„è¿™é‡ŒCè¿Ÿæ—©ä¼šé‡Šæ”¾çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1579179243,"ip_address":"","comment_id":171808,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1579016412","product_id":100023901,"comment_content":"ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶æ–¹å¼çš„ç¤ºä¾‹å¥½åƒä¹Ÿä¼šå‡ºç°æ­»é”ï¼Œå½“çº¿ç¨‹1å’Œçº¿ç¨‹2æ‰§è¡Œè½¬è´¦A-B B-Cï¼Œç„¶åå°±å‡ºç°çº¿ç¨‹1ç­‰å¾…çº¿ç¨‹2é‡Šæ”¾Bå¯¹è±¡ï¼Œä¸çŸ¥é“ç†è§£çš„æ˜¯å¦æ­£ç¡®ï¼Œè¯·è€å¸ˆå¸®æˆ‘è§£ç­”ä¸€ä¸‹ã€‚è°¢è°¢","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481516,"discussion_content":"æ­»é”æ˜¯æ°¸è¿œéƒ½è·å–ä¸åˆ°é”ï¼Œä½ è¯´çš„è¿™é‡ŒCè¿Ÿæ—©ä¼šé‡Šæ”¾çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579179243,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171708,"user_name":"åœ¨è·¯ä¸Š","can_delete":false,"product_type":"c1","uid":1641319,"ip_address":"","ucode":"E1184E76B14431","user_header":"https://static001.geekbang.org/account/avatar/00/19/0b/67/dc49a1a8.jpg","comment_is_top":false,"comment_ctime":1578994515,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578994515","product_id":100023901,"comment_content":"è¯¾åæ€è€ƒï¼šsynchronized(Account.class)é”çš„ç²’åº¦æ¯”while(!actr.apply(this, target));å¤§ã€‚<br>synchronized(Account.class)åªè¦æ˜¯æ‰§è¡Œçš„æ–¹æ³•å¯¹Account.classè¿›è¡ŒåŠ é”ï¼Œé‚£è¿™äº›æ“ä½œéƒ½æ˜¯ä¸²è¡Œæ‰§è¡Œã€‚<br>while(!actr.apply(this, target));åªä¼šä½¿thisæˆ–targetæ˜¯ç›¸åŒçš„å¯¹è±¡çš„æ“ä½œæ˜¯ä¸²è¡Œæ‰§è¡Œã€‚<br>","like_count":0},{"had_liked":false,"id":170995,"user_name":"Running Man","can_delete":false,"product_type":"c1","uid":1121459,"ip_address":"","ucode":"4DD2F6AF71327E","user_header":"https://static001.geekbang.org/account/avatar/00/11/1c/b3/6d10ba4f.jpg","comment_is_top":false,"comment_ctime":1578814817,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578814817","product_id":100023901,"comment_content":"ç‰›é€¼ï¼Œä¸“æ è¶…å€¼ï¼","like_count":0},{"had_liked":false,"id":167318,"user_name":"ğŸ’¢ æ˜Ÿæ˜ŸğŸ’¢","can_delete":false,"product_type":"c1","uid":1254392,"ip_address":"","ucode":"A402B765222C35","user_header":"https://static001.geekbang.org/account/avatar/00/13/23/f8/24fcccea.jpg","comment_is_top":false,"comment_ctime":1577763136,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577763136","product_id":100023901,"comment_content":"è€å¸ˆæƒ³é—®ä¸€ä¸‹ï¼Œä¸€æ¬¡æ€§ç”³è¯·åˆ°äº†è´¦æˆ·èµ„æºï¼Œè¿›è¡Œè½¬è´¦çš„æ—¶å€™ï¼Œä¸ºå•¥è¿˜éœ€è¦é”å®šè½¬å‡ºè´¦æˆ·ï¼Œå’Œè½¬å…¥è´¦æˆ·ï¼Œè¿™ä¸ªæ—¶å€™ä¸æ˜¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰èƒ½è¿›è¡Œè½¬è´¦äº†ä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":148914,"user_name":"æœ•çˆ±å¾å¦ƒ","can_delete":false,"product_type":"c1","uid":1733692,"ip_address":"","ucode":"B10EB69934F9E2","user_header":"https://static001.geekbang.org/account/avatar/00/1a/74/3c/da79d2a1.jpg","comment_is_top":false,"comment_ctime":1573108678,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573108678","product_id":100023901,"comment_content":"synchronized(Account.class)å’Œwhile(!actr.apply(this, target))ï¼Œå¯ä»¥è¿™æ ·ç†è§£ï¼Œsynchronized(Account.class)ï¼Œæ˜¯æŠŠæ‰€æœ‰äººçš„è´¦æˆ·å†™åŒä¸€ä¸ªè´¦æœ¬ä¸Šï¼Œè€Œwhile(!actr.apply(this, target))ï¼Œå¯ä»¥ç†è§£ä¸ºæ¯ä¸ªäººä¸€ä¸ªè´¦æœ¬ï¼Œæ‰€ä»¥æ€§èƒ½ä¸Šè¿˜æ˜¯while(!actr.apply(this, target))æ€§èƒ½è¦é«˜ä¸€ç‚¹","like_count":0},{"had_liked":false,"id":147531,"user_name":"è€ƒä¼‘","can_delete":false,"product_type":"c1","uid":1053955,"ip_address":"","ucode":"968DFC00D6D0CF","user_header":"https://static001.geekbang.org/account/avatar/00/10/15/03/c0fe1dbf.jpg","comment_is_top":false,"comment_ctime":1572868429,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1572868429","product_id":100023901,"comment_content":"ä»Šå¤©çš„ä¸“æ å·²ç»æ˜¯ä»‹ç»å¹¶å‘ç¼–ç¨‹é”çš„æ¦‚å¿µçš„ç¬¬ä¸‰ç¯‡äº†ï¼Œä¹Ÿç”±æ­¤å¯ä»¥çœ‹å‡ºé”åœ¨å¹¶å‘ç¼–ç¨‹é¢†åŸŸçš„åœ°ä½ï¼Œåœ¨ä¸Šä¸€ç¯‡ä¸­æåˆ°äº†ç”¨ä¸€æŠŠé”ä¿æŠ¤å¤šä¸ªèµ„æºï¼Œæ¯”å¦‚å¯¹classåŠ é”ï¼Œå¯ä»¥ä¿æŠ¤æ‰€æœ‰ç±»å®ä¾‹åŒ–çš„å¯¹è±¡ï¼Œä½†æ˜¯è¿™æ ·å°±å¯¼è‡´æ•ˆç‡æä½ï¼Œæ˜¯ä¸å¯æ¥å—çš„ã€‚<br>æœ¬ç¯‡ä¸­æåˆ°çš„ç»†ç²’åº¦é”ï¼Œå¦‚æœæ˜¯åƒä¹‹å‰é‚£ç§å¯†ç é”ã€è´¦å·ä½™é¢é”çš„å…³ç³»çš„è¯æ˜¯æ²¡é—®é¢˜çš„ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªé”ç›´æ¥ä¸å­˜åœ¨å†²çªï¼Œä½†æ˜¯åƒä»Šå¤©è¿™ç§è½¬è´¦æ“ä½œçš„è´¦å·é”å°±ä¸ä¸€æ ·äº†ï¼Œå› ä¸ºæ˜æ˜¾å¯¹ä¸¤ä¸ªè´¦å·åŠ é”ï¼Œå®é™…ä¸Šé”çš„èµ„æºç±»å‹æ˜¯ç›¸åŒçš„ï¼Œå¿…ç„¶ä¼šå¯¼è‡´å‡ºç°æ­»é”çš„å‘ç”Ÿã€‚<br>æ­»é”æ˜¯å¹¶å‘ç¼–ç¨‹ä¸­éœ€è¦æåŠ›é¿å…çš„ï¼Œå› ä¸ºå‡ºç°äº†æ­»é”å¯¹ç³»ç»Ÿçš„å½±å“å¾ˆå¤§ï¼Œè€Œä¸”æ²¡æœ‰å¾ˆå¥½çš„çº¿ä¸Šè§£å†³æ–¹æ¡ˆï¼Œé€šå¸¸æ˜¯æœåŠ¡é‡å¯ã€‚<br>å› æ¬¡éœ€è¦äº†è§£é¿å…å‘ç”Ÿæ­»é”çš„å‡ ä¸ªæ–¹æ³•ã€‚","like_count":0},{"had_liked":false,"id":143901,"user_name":"é»‘è‰²æ¯›è¡£","can_delete":false,"product_type":"c1","uid":1135912,"ip_address":"","ucode":"FF7E235F91BA5C","user_header":"https://static001.geekbang.org/account/avatar/00/11/55/28/31b0cf2f.jpg","comment_is_top":false,"comment_ctime":1571805214,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571805214","product_id":100023901,"comment_content":"æˆ‘çš„ç†è§£æ˜¯ <br><br>Alloctor æ˜¯ç”¨æ¥ä¸€æ¬¡æ€§åˆ†é…é”å®šâ€¦â€¦åªè¦å¯¹è±¡åœ¨ list é‡Œï¼Œé‚£ä¹ˆä»–çš„é”ä¸€å®šè¢«å…¶ä»–çº¿ç¨‹æŒæœ‰â€¦â€¦","like_count":0},{"had_liked":false,"id":143895,"user_name":"é»‘è‰²æ¯›è¡£","can_delete":false,"product_type":"c1","uid":1135912,"ip_address":"","ucode":"FF7E235F91BA5C","user_header":"https://static001.geekbang.org/account/avatar/00/11/55/28/31b0cf2f.jpg","comment_is_top":false,"comment_ctime":1571804123,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571804123","product_id":100023901,"comment_content":"æˆ‘è§‰å¾—å¹¶æ²¡æœ‰å®Œå…¨é”å®šè´¦æˆ·ï¼Œå› ä¸º transfer çš„ while å¾ªç¯è¿˜æ˜¯å¯ä»¥æ‰§è¡Œçš„â€¦â€¦åªæ˜¯é”å®šäº† ä¸‹é¢çš„éƒ¨åˆ†ã€‚","like_count":0},{"had_liked":false,"id":143889,"user_name":"é»‘è‰²æ¯›è¡£","can_delete":false,"product_type":"c1","uid":1135912,"ip_address":"","ucode":"FF7E235F91BA5C","user_header":"https://static001.geekbang.org/account/avatar/00/11/55/28/31b0cf2f.jpg","comment_is_top":false,"comment_ctime":1571803626,"is_pvip":false,"replies":[{"id":"55682","content":"ä¸åŒçš„æ€ç»´æ–¹å¼ï¼Œä¸€ä¸ªæ˜¯æŠ½è±¡åŒ–çš„ï¼Œä¸€ä¸ªæ˜¯å…·ä½“åŒ–çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1571925658,"ip_address":"","comment_id":143889,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571803626","product_id":100023901,"comment_content":"ä¸ºä»€ä¹ˆå¤§å®¶éƒ½å«é”å®šäº†è´¦æˆ·ï¼Ÿæˆ‘ç†è§£ï¼Œåªæ˜¯æŒæœ‰äº†å¯¹è±¡çš„é”ï¼Œç„¶åé”å®šäº† synchronized å¯¹åº”çš„æ–¹æ³•â€¦â€¦","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471741,"discussion_content":"ä¸åŒçš„æ€ç»´æ–¹å¼ï¼Œä¸€ä¸ªæ˜¯æŠ½è±¡åŒ–çš„ï¼Œä¸€ä¸ªæ˜¯å…·ä½“åŒ–çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571925658,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143855,"user_name":"é»‘è‰²æ¯›è¡£","can_delete":false,"product_type":"c1","uid":1135912,"ip_address":"","ucode":"FF7E235F91BA5C","user_header":"https://static001.geekbang.org/account/avatar/00/11/55/28/31b0cf2f.jpg","comment_is_top":false,"comment_ctime":1571799884,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1571799884","product_id":100023901,"comment_content":"while å¾ªç¯çš„æƒ…å†µï¼Œæ€§èƒ½æŸè€—ä¼šå¤§äº›ï¼Ÿçº¿ç¨‹æ²¡æœ‰é˜»å¡ï¼Œè€Œæ˜¯ä¸€ç›´åœ¨è¿è¡Œï¼›<br>synchronized è‡³å°‘ä¼šé˜»å¡ï¼Œè®©å‡º cpu æ—¶é—´ç‰‡ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1135912,"avatar":"https://static001.geekbang.org/account/avatar/00/11/55/28/31b0cf2f.jpg","nickname":"é»‘è‰²æ¯›è¡£","note":"","ucode":"FF7E235F91BA5C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38560,"discussion_content":"æ±‚æŒ‡ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571803209,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":137128,"user_name":"Jacian","can_delete":false,"product_type":"c1","uid":1460492,"ip_address":"","ucode":"8F0A54EE3C4516","user_header":"https://static001.geekbang.org/account/avatar/00/16/49/0c/b0d13058.jpg","comment_is_top":false,"comment_ctime":1569632487,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1569632487","product_id":100023901,"comment_content":"while(!actr.apply(this, target))<br><br>å¯¹äºè¿™ç§æ–¹å¼ï¼Œå¦‚æœä¸€ä¸ªçº¿ç¨‹aå‘bè½¬è´¦ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹bå‘aè½¬è´¦ï¼Œå¦‚æœè°ƒç”¨è½¬è´¦æ“ä½œçš„å¯¹è±¡å’Œç¬¬ä¸€ä¸ªçº¿ç¨‹ä¸­ä¼ å…¥çš„bå¯¹è±¡ä¸æ˜¯åŒä¸€ä¸ªï¼Œé‚£å°±ä¸è®¤ä¸ºä»–ä»¬æ˜¯åŒä¸€ä¸ªäººå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":134356,"user_name":"DFighting","can_delete":false,"product_type":"c1","uid":1233193,"ip_address":"","ucode":"F3BA2426FF8582","user_header":"https://static001.geekbang.org/account/avatar/00/12/d1/29/1b1234ed.jpg","comment_is_top":false,"comment_ctime":1568812424,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1568812424","product_id":100023901,"comment_content":"åæœŸä¼˜åŒ–çš„æ—¶å€™å¯ä»¥ä¸ºä¸¤ä¸ªèµ„æºç»‘å®šä¸€ä¸ªå®‰å…¨çš„èµ„æºï¼Œæ¯”å¦‚AtomicIntegerï¼Œç„¶ååœ¨å¤–å±‚åˆ©ç”¨CASçš„æœºåˆ¶æ¥æ›¿ä»£è¿™ä¸ªæ­»å¾ªç¯ä¸­çš„é¢‘ç¹è¿›å…¥æ­å–œé‚£ä¸ªèµ„æºåŒºï¼Œå› ä¸ºCASæ¯”Synchronizedæ€§èƒ½è¦å¥½ä¸å°‘ï¼Œè™½ç„¶æˆ‘ä¹Ÿæ²¡ææ¸…æ¥šåº•å±‚å’‹æçš„","like_count":0},{"had_liked":false,"id":134237,"user_name":"æ—¶å…‰","can_delete":false,"product_type":"c1","uid":1347240,"ip_address":"","ucode":"1087509C209C54","user_header":"https://static001.geekbang.org/account/avatar/00/14/8e/a8/c9819e37.jpg","comment_is_top":false,"comment_ctime":1568780613,"is_pvip":true,"replies":[{"id":"54138","content":"é˜²æ­¢æœ‰ç±»ä¼¼å­˜æ¬¾æ“ä½œ","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1570796007,"ip_address":"","comment_id":134237,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568780613","product_id":100023901,"comment_content":"è€å¸ˆï¼Œå…³äº1.ç ´åå ç”¨ä¸”ç­‰å¾…çš„æ¼”ç¤ºä»£ç ä¸­ï¼Œæ—¢ç„¶ä»»æ„ä¸€ä¸ªAccountå¯¹è±¡åœ¨æ‰§è¡Œallocatorçš„applyå¾—åˆ°äº†æ“ä½œç›®æ ‡è´¦æœ¬å’Œè‡ªå·±è´¦æœ¬çš„æƒé™ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ä½¿ç”¨ä¸¤ä¸ªsynchroniedé”ï¼Ÿæˆ‘ç†è§£çš„æ˜¯é€šè¿‡applyæ“ä½œä¹‹åï¼Œåœ¨æˆ‘è‡ªè¡Œfreeä¹‹å‰ï¼Œåˆ«çš„çº¿ç¨‹æ˜¯ä¸ä¼šapplyæˆåŠŸçš„ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467665,"discussion_content":"é˜²æ­¢æœ‰ç±»ä¼¼å­˜æ¬¾æ“ä½œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570796007,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133379,"user_name":"B 612 æ˜Ÿçƒæ¥å®¢","can_delete":false,"product_type":"c1","uid":1113469,"ip_address":"","ucode":"CBFB05B1F1B178","user_header":"https://static001.geekbang.org/account/avatar/00/10/fd/7d/a4bda9ce.jpg","comment_is_top":false,"comment_ctime":1568538855,"is_pvip":false,"replies":[{"id":"51315","content":"æ²¡æœ‰æ•ˆæœï¼Œå¿…é¡»æ˜¯ä¸€ä¸ªå¯¹è±¡","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1568635031,"ip_address":"","comment_id":133379,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568538855","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªé—®é¢˜ï¼Œæˆ‘åœ¨å®é™…å·¥ä½œå½“ä¸­å‘ç°ï¼Œä¸åŒçº¿ç¨‹æŸ¥è¯¢è´¦æˆ·ç”Ÿæˆçš„å¯¹è±¡ï¼Œåœ°å€æ˜¯ä¸åŒçš„ï¼Œè¿™æ„å‘³ç€ï¼Œæˆ‘é”è´¦æˆ·æ²¡æ•ˆæœ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467371,"discussion_content":"æ²¡æœ‰æ•ˆæœï¼Œå¿…é¡»æ˜¯ä¸€ä¸ªå¯¹è±¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568635031,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132858,"user_name":"cpp","can_delete":false,"product_type":"c1","uid":1449812,"ip_address":"","ucode":"85B13736CA43BB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erxAjBHiaJUyZqk8JWz1RHAY196YYlZj5HGGUric3pXYIOotzgRViauYxbz49Qt3TToFYW4YiapOIvQFg/132","comment_is_top":false,"comment_ctime":1568253997,"is_pvip":false,"replies":[{"id":"50908","content":"ä¼šæœ‰","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1568272775,"ip_address":"","comment_id":132858,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568253997","product_id":100023901,"comment_content":"é—®ä¸‹è€å¸ˆï¼Œå¦‚æœç”¨springbootæ¡†æ¶å¼€å‘çš„è¯ï¼Œé‚£ä¹ˆè¿˜ä¼šæœ‰è¿™ç§å¹¶å‘é—®é¢˜ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467148,"discussion_content":"ä¼šæœ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568272775,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128552,"user_name":"robot","can_delete":false,"product_type":"c1","uid":1611676,"ip_address":"","ucode":"C4AC58020DFBED","user_header":"https://static001.geekbang.org/account/avatar/00/18/97/9c/5b41af12.jpg","comment_is_top":false,"comment_ctime":1566900018,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566900018","product_id":100023901,"comment_content":"ä¸ºä»€ä¹ˆçº¿ç¨‹è·å¾—äº†é‡Œå±‚çš„é”å´æ²¡æœ‰è·å¾—å¤–å±‚çš„é”","like_count":0},{"had_liked":false,"id":128489,"user_name":"Simple life","can_delete":false,"product_type":"c1","uid":1571460,"ip_address":"","ucode":"1902D7F72FB43F","user_header":"https://static001.geekbang.org/account/avatar/00/17/fa/84/f01d203a.jpg","comment_is_top":false,"comment_ctime":1566889205,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566889205","product_id":100023901,"comment_content":"allocatoræ–¹æ³•çš„ç»†ç²’åº¦ä½“ç°åœ¨å¤šä¸šåŠ¡ç¯å¢ƒï¼Œå¹¶ä¸æ˜¯å•ä¸€ä¸šåŠ¡ï¼Œæ€§èƒ½è‚¯å®šå¥½ä¸€ç‚¹","like_count":0},{"had_liked":false,"id":127385,"user_name":"Thong2018","can_delete":false,"product_type":"c1","uid":1625515,"ip_address":"","ucode":"DA05A3B08D1DEA","user_header":"","comment_is_top":false,"comment_ctime":1566689686,"is_pvip":false,"replies":[{"id":"47166","content":"ä¸æ˜¯","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1566711912,"ip_address":"","comment_id":127385,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566689686","product_id":100023901,"comment_content":"æ˜¯ä¸æ˜¯åº”è¯¥ç”¨ä¸è¿ç®—å•Šï¼Ÿals.contains(from) &amp;&amp; als.contains(to)ï¼Œåƒè¿™æ ·ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464468,"discussion_content":"ä¸æ˜¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566711912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127384,"user_name":"Thong2018","can_delete":false,"product_type":"c1","uid":1625515,"ip_address":"","ucode":"DA05A3B08D1DEA","user_header":"","comment_is_top":false,"comment_ctime":1566689319,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566689319","product_id":100023901,"comment_content":"while(!actr.apply(this, target)åªé”å®šthiså’Œtargetä¸¤ä¸ªå¯¹è±¡çš„èµ„æºï¼Œè€Œsynchronized(Account.class)æ˜¯é”å®šæ‰€æœ‰çš„Accountå¯¹è±¡çš„èµ„æºï¼Œå‰è€…é”çš„èŒƒå›´æ›´å°ï¼Œåè€…é”çš„èŒƒå›´æ›´å¤šï¼Œæ‰€ä»¥å‰è€…æ›´æœ‰ä¼˜åŠ¿","like_count":0},{"had_liked":false,"id":127261,"user_name":"îˆ± è‡£é¦Ÿé£æ‰¬îˆ°","can_delete":false,"product_type":"c1","uid":1116188,"ip_address":"","ucode":"F2F882B7678055","user_header":"https://static001.geekbang.org/account/avatar/00/11/08/1c/ef15e661.jpg","comment_is_top":false,"comment_ctime":1566627451,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566627451","product_id":100023901,"comment_content":"ä¸€ä¸ªé”æ— æ³•ä¿æŠ¤åŒä¸€ä¸ªç±»ä¸­å…·æœ‰å…³è”å…³ç³»çš„å…±äº«å˜é‡ï¼Œéœ€è¦ç”¨ç±»é”è¿›è¡Œä¿æŠ¤ï¼Œä½†æ˜¯å¹¶å‘æ€§èƒ½ä¼šæœ‰å¾ˆå¤§å½±å“ï¼Œè€ƒè™‘ä½¿ç”¨ä¸¤ä¸ªå¯¹è±¡é”åˆ†åˆ«ä¿æŠ¤è‡ªå·±çš„å…±äº«å˜é‡ã€‚ä½†æ˜¯åˆä¼šå‡ºç°æ­»é”çš„æƒ…å†µï¼Œè€ƒè™‘ä»ç ´åæ­»é”çš„æ¡ä»¶ä¸Šå…¥æ‰‹ï¼Œå³ç ´åå ç”¨ä¸”ç­‰å¾…ã€ä¸å¯æŠ¢å åŠå¾ªç¯ç­‰å¾…ä¸‰ä¸ªæ¡ä»¶ï¼Œä»è€Œè¾¾åˆ°é¿å…æ­»é”çš„æƒ…å†µã€‚","like_count":0},{"had_liked":false,"id":122092,"user_name":"BigCrab","can_delete":false,"product_type":"c1","uid":1591752,"ip_address":"","ucode":"0499088775A144","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJyDiaaDJrwRsSc6GhvviaDmm70pg099gVibUQDUWHwhHibgNMuqicyGjdeKD8LdZPvQFenHzPNZThBpww/132","comment_is_top":false,"comment_ctime":1565284364,"is_pvip":false,"replies":[{"id":"44966","content":"abæ”¾ä¸€èµ·è¿™ä¸ªæ¨¡å‹å°±æœ‰é—®é¢˜ï¼Œbcæ€ä¹ˆåŠï¼Ÿæœ‰ä¸¤ä¸ªbï¼Ÿè¿˜æ˜¯å…±äº«ä¸€ä¸ªbï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1565428843,"ip_address":"","comment_id":122092,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1565284364","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³è¯·æ•™ä¸€ä¸‹æ‚¨ï¼Œæ‚¨ä¸Šé¢â€œç ´åå ç”¨ä¸”ç­‰å¾…æ¡ä»¶â€ä¸­è½¬è´¦çš„ä¾‹å­ï¼Œå¦‚æœæˆ‘æŠŠAå’ŒBæ”¾åˆ°ä¸€ä¸ªç±»é‡Œé¢ï¼Œç„¶åè½¬è´¦æ–¹æ³•ç›´æ¥é”è¿™ä¸ªç±»å¯ä»¥å—ï¼Ÿè¿˜æœ‰è¿™æ ·å’Œæ‚¨çš„ä¾‹å­æœ‰ä»€ä¹ˆä¸åŒï¼Ÿä¸å¥½æ„æ€ï¼Œåˆå­¦å¹¶å‘ç¼–ç¨‹è¿™å—ï¼Œå¾ˆå¤šåœ°æ–¹ä¸æ˜¯å¤ªæ˜ç™½ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462096,"discussion_content":"abæ”¾ä¸€èµ·è¿™ä¸ªæ¨¡å‹å°±æœ‰é—®é¢˜ï¼Œbcæ€ä¹ˆåŠï¼Ÿæœ‰ä¸¤ä¸ªbï¼Ÿè¿˜æ˜¯å…±äº«ä¸€ä¸ªbï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565428843,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1591752,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJyDiaaDJrwRsSc6GhvviaDmm70pg099gVibUQDUWHwhHibgNMuqicyGjdeKD8LdZPvQFenHzPNZThBpww/132","nickname":"BigCrab","note":"","ucode":"0499088775A144","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4521,"discussion_content":"è°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565516679,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120801,"user_name":"ç»…å£«","can_delete":false,"product_type":"c1","uid":1583859,"ip_address":"","ucode":"5B58E5A958F489","user_header":"https://static001.geekbang.org/account/avatar/00/18/2a/f3/b9607a15.jpg","comment_is_top":false,"comment_ctime":1564997971,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1564997971","product_id":100023901,"comment_content":"aè½¬b,bè½¬açš„é—®é¢˜ï¼šç¬¬ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œaè½¬bï¼Œç¬¬äºŒä¸ªçº¿ç¨‹æ‰§è¡Œbè½¬aï¼Œç¬¬ä¸€ï¼Œç¬¬äºŒä¸ªçº¿ç¨‹åŒæ—¶åˆ°è¾¾transferæ–¹æ³•è¿›è¡Œè½¬è´¦<br>çš„æ—¶å€™ï¼Œactræ˜¯å•ä¾‹çš„ï¼Œå‡å¦‚ç¬¬ä¸€ä¸ªçº¿ç¨‹å…ˆæ‰§è¡Œï¼Œè¿›å…¥applyçš„æ–¹æ³•ï¼Œç¬¬ä¸€æ¬¡å°±ä¼šè¿”å›true,ç„¶åè¿›å…¥tryçš„æ–¹æ³•ï¼Œ<br> è¿™é‡Œæœ‰ä¸€ä¸ªç–‘é—®ï¼Ÿç¬¬äºŒä¸ªçº¿ç¨‹è¿›å…¥applyçš„æ–¹æ³•çš„æ—¶å€™ï¼Œalsè¿™ä¸ªæ•°ç»„é‡Œé¢æ˜¯nullçš„è¿˜æ˜¯å·²ç»æœ‰äº†aå’Œbä¸¤ä¸ªå¯¹è±¡äº†","like_count":0,"discussions":[{"author":{"id":1179101,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fd/dd/baeda83e.jpg","nickname":"Monster!","note":"","ucode":"74F1D3BB5E3915","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":13048,"discussion_content":"ä½ è‡ªå·±éƒ½è¯´äº†actræ˜¯å•ä¾‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568634605,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120680,"user_name":"ç»…å£«","can_delete":false,"product_type":"c1","uid":1583859,"ip_address":"","ucode":"5B58E5A958F489","user_header":"https://static001.geekbang.org/account/avatar/00/18/2a/f3/b9607a15.jpg","comment_is_top":false,"comment_ctime":1564972518,"is_pvip":false,"replies":[{"id":"73987","content":"æˆ‘è§‰å¾—å¯¹","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1585048922,"ip_address":"","comment_id":120680,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1564972518","product_id":100023901,"comment_content":"å…³äºæ’åºçš„ç†è§£ï¼š<br>aè½¬b,bè½¬açš„é—®é¢˜ï¼šä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è¿›è¡Œè½¬è´¦æ“ä½œï¼Œç¬¬ä¸€ä¸ªçº¿ç¨‹æ“ä½œaè½¬b,ç¬¬äºŒä¸ªçº¿ç¨‹æ“ä½œbè½¬a,å‡å¦‚aæ˜¯è´¦å·çš„å°çš„ï¼Œç¬¬ä¸€ä¸ªçº¿ç¨‹åˆ°è¾¾ç¬¬ä¸ƒæ­¥ï¼Œ<br>é”å®šçš„æ˜¯a,ç¬¬äºŒä¸ªçº¿ç¨‹åˆ°è¾¾ç¬¬ä¸ƒæ­¥é”å®šçš„ä¹Ÿæ˜¯a,ä½†æ˜¯æ­¤æ—¶aå·²ç»è¢«ç¬¬ä¸€ä¸ªçº¿ç¨‹ç»™é”å®šï¼Œç¬¬äºŒä¸ªçº¿ç¨‹å¦‚æœæƒ³æ‹¿åˆ°aé”ï¼Œå°±å¿…é¡»ç­‰åˆ°ç¬¬ä¸€ä¸ªçº¿ç¨‹<br>é‡Šæ”¾aé”ï¼Œè¿™æ ·ç¬¬ä¸€ä¸ªçº¿ç¨‹å’Œç¬¬äºŒä¸ªçº¿ç¨‹å°±ä¸ä¼šå‡ºç°ç«äº‰æ­»é”çš„é—®é¢˜äº†ï¼Œä¸çŸ¥é“æˆ‘ç†è§£çš„å¯¹ä¸å¯¹ï¼Œè¯·åŒå­¦ä»¬å’Œè€å¸ˆæŒ‡å¯¼","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461430,"discussion_content":"æˆ‘è§‰å¾—å¯¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585048922,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115516,"user_name":"æ‹¯æ•‘åœ°çƒå¥½ç´¯","can_delete":false,"product_type":"c1","uid":1339022,"ip_address":"","ucode":"7643439601EF4C","user_header":"https://static001.geekbang.org/account/avatar/00/14/6e/8e/5d309a85.jpg","comment_is_top":false,"comment_ctime":1563610160,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563610160","product_id":100023901,"comment_content":"---æ€»ç»“---<br>ä»€ä¹ˆæ˜¯æ­»é”ï¼šä¸€ç»„çº¿ç¨‹æŒæœ‰å¯¹æ–¹çš„èµ„æºåå‘å¯¹æ–¹è¯·æ±‚å¯¹æ–¹å·²æŒæœ‰çš„èµ„æºè€Œé€ æˆç›¸äº’ç­‰å¾…ã€‚<br>è§£å†³æ­»é”é—®é¢˜ï¼šé¢„é˜²æ­»é”ï¼›æ£€æµ‹æ­»é”ï¼›æ­»é”å¤„ç†<br>æ­»é”å››å¤§æ¡ä»¶ï¼šäº’æ–¥ï¼›å æœ‰å¹¶ç­‰å¾…ï¼›ä¸å¯æŠ¢å ï¼›å¾ªç¯ç­‰å¾…<br>ç ´åå ç”¨å¹¶ç­‰å¾…ï¼šä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰èµ„æºï¼Œå³è®©ä¸€ç»„èµ„æºçš„è®¿é—®æ˜¯åŸå­æ€§çš„ï¼Œè¿™æ ·ä¸€ç»„èµ„æºçš„æ“ä½œæ–¹å¼å°±åŒä¸€ä¸ªèµ„æºç±»ä¼¼ã€‚<br>ç ´åä¸å¯æŠ¢å ï¼šè®©èµ„æºåœ¨è·å–ä¸åˆ°æƒ³è¦çš„èµ„æºæ—¶èƒ½ä¸»åŠ¨é‡Šæ”¾å æœ‰çš„èµ„æºã€‚è¿™ç§æ–¹å¼åƒæ˜¯æˆ‘æœ‰é”¤å­ä½ æœ‰é’‰å­ï¼Œæˆ‘é‚£ä¸åˆ°é’‰å­ï¼Œé‚£æˆ‘æŠŠé”¤å­å…ˆç»™ä½ ï¼Œä½ å…ˆç”¨å®Œä¸€å¥—ã€‚<br>ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šäººä¸ºåœ°å¯¹èµ„æºè¿›è¡Œæ’åºå¹¶æŒ‰åºç”³è¯·èµ„æºï¼Œè¿™æ ·ä¸€ç»„èµ„æºçš„æ“ä½œæ–¹å¼ä¹Ÿåƒæ˜¯åŒä¸€ä¸ªèµ„æºç±»ä¼¼ã€‚","like_count":0},{"had_liked":false,"id":114734,"user_name":"Shine","can_delete":false,"product_type":"c1","uid":1022568,"ip_address":"","ucode":"C8C617B87C63C7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9a/68/92caeed6.jpg","comment_is_top":false,"comment_ctime":1563373344,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563373344","product_id":100023901,"comment_content":"ä»¥å‰æ“ä½œç³»ç»Ÿè¯¾ç¨‹å­¦è¿‡ï¼Œé‚£æ—¶å€™åªæ˜¯èƒŒä¹¦è€ƒè¯•ï¼Œç†è§£å…¨é æƒ³è±¡","like_count":0},{"had_liked":false,"id":113865,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1015754,"ip_address":"","ucode":"00DF2FEC58D2E6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7f/ca/ea85bfdd.jpg","comment_is_top":false,"comment_ctime":1563175341,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1563175341","product_id":100023901,"comment_content":"æœ‰ä¼˜åŠ¿ï¼Œsynchronized(Account.class)é”çš„èŒƒå›´å¤§ï¼Œåœ¨åŒä¸€æ—¶åˆ»åªèƒ½è¿›è¡Œä¸€ç¬”äº¤æ˜“ï¼›è€Œwhileæ–¹æ³•é”çš„ç²’åº¦æ›´ç»†åŒ–ï¼Œåªå¯¹ç›¸å…³çš„è´¦æˆ·è¿›è¡Œé”åŒæ­¥ï¼Œåœ¨æ€§èƒ½ä¸Šè¦å¥½","like_count":0,"discussions":[{"author":{"id":1004192,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/a0/d308434e.jpg","nickname":"StarKing","note":"","ucode":"EB825CFA70AC1F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":15070,"discussion_content":"synchronized(Account.class)é”çš„èŒƒå›´å¤§,ä½†é€‚åˆå°‘é‡çº¿ç¨‹è·‘.whileæ–¹æ³•é”çš„ç²’åº¦æ›´ç»†åŒ–ï¼Œåªå¯¹ç›¸å…³çš„è´¦æˆ·è¿›è¡Œé”åŒæ­¥ï¼Œåœ¨æ€§èƒ½ä¸Šè¦å¥½.ä½†ä¹Ÿæœ‰ç©ºè½¬ç°è±¡.å¦‚æœä»…æ˜¯2ä¸ªçº¿ç¨‹æœªå¿…å“ªä¸ªå¿«.å“ªä¸ªæ€§èƒ½æ›´å¥½.ä»…åœ¨è¾ƒå¤šçš„å¹¶å‘ä¸‹whileçœ‹èµ·æ¥æœ‰äº›ä¼˜åŠ¿.æ­¤å¤„whileä¹Ÿä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³åŠæ³•.\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1568801611,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2043619,"avatar":"http://thirdwx.qlogo.cn/mmopen/2kpMNDYsSfCibibkl1x62jWiaJYL67ABTOrYO4VBibq5GrB7F2muJpibBPn4t8reWiaAHb7aNxckpGUk3V6mfyGhk2PruoicHdCkKIc/132","nickname":"Geek_b37487","note":"","ucode":"B6E202603B1A84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370731,"discussion_content":"é—®é¢˜æ˜¯ä¸€æ—¦ä½¿ç”¨äº†thisåšé”å¯¹è±¡, å¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶åšA->Bçš„è½¬è´¦ï¼Œä¹Ÿæ˜¯ä¼šæœ‰é—®é¢˜çš„å“ˆï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½å» new Account() ç„¶ååšè½¬è´¦çš„è¯ï¼Œé‡Œé¢çš„thisæ˜¯å„è‡ªçš„Accountå®ä¾‹  æ˜¯æœ‰é—®é¢˜çš„å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619518722,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113819,"user_name":"JackLei","can_delete":false,"product_type":"c1","uid":1099989,"ip_address":"","ucode":"01128A61A9E80F","user_header":"https://static001.geekbang.org/account/avatar/00/10/c8/d5/e88c1805.jpg","comment_is_top":false,"comment_ctime":1563161832,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563161832","product_id":100023901,"comment_content":" 1. ç ´åå ç”¨ä¸”ç­‰å¾…æ¡ä»¶<br>while(!actr.apply(this, targe)<br>;<br> <br> &#47;&#47; é”å®šè½¬å‡ºè´¦æˆ· synchronize...<br>&#47;&#47; é”å®šè½¬å…¥è´¦æˆ· synchronized(...<br>æ˜¯å¦å¯ä»¥ä¸åŠ é”ï¼Œ<br> åªè¦è¿›å…¥äº†while(),å¹¶è·å¾—é”ï¼Œé‚£ä¹ˆä¸‹é¢çš„ä»£ç æ‰§è¡Œæ˜¯å®‰å…¨çš„ã€‚<br>å› ä¸ºï¼ŒAllocatoræ˜¯å•åˆ—ï¼Œå¦‚æœå…¶ä»–çº¿ç¨‹æ¥æŠ¢ç”¨ï¼Œ å…¶ä»–çš„çº¿ç¨‹ï¼Œæ˜¯åœ¨whileå¾ªç¯é‡Œï¼Œåªæœ‰finalé‡Šæ”¾åï¼Œæ‰ä¼šè¿›å…¥ä¸‹é¢çš„è½¬è´¦é€»è¾‘ã€‚<br>","like_count":0},{"had_liked":false,"id":113527,"user_name":"èµµå°æ´›","can_delete":false,"product_type":"c1","uid":1592232,"ip_address":"","ucode":"A326C12B1A1ABA","user_header":"https://static001.geekbang.org/account/avatar/00/18/4b/a8/14b8a860.jpg","comment_is_top":false,"comment_ctime":1563069274,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563069274","product_id":100023901,"comment_content":"synchronize æ¯”è¾ƒè‡ªç§ æ˜¯ä¼š é”ä½æ•´ä¸ª Accountç±»ï¼Œwhileæ­»å¾ªç¯æ˜¯é˜»å¡å±€éƒ¨ã€‚","like_count":0},{"had_liked":false,"id":110767,"user_name":"è€Œç«‹æ–‹","can_delete":false,"product_type":"c1","uid":1087258,"ip_address":"","ucode":"5FED6E9E148195","user_header":"https://static001.geekbang.org/account/avatar/00/10/97/1a/389eab84.jpg","comment_is_top":false,"comment_ctime":1562327242,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1562327242","product_id":100023901,"comment_content":"actrè™½è¯´æ˜¯ä¸ªå•ä¾‹ï¼Œä½†æ˜¯å¯¹ä»–å¹¶æ²¡æœ‰åŠ é”ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªçº¿ç¨‹èƒ½ç”¨ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ä¹Ÿå¯ä»¥ç”¨ï¼Œç”¨ä»–å»ç”³è¯·ä¸¤ä¸ªå…¨å±€å”¯ä¸€çš„ä¸¤ä¸ªè´¦æˆ·from ï¼Œå’Œtargetï¼Œæ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œåªæ˜¯è¿™ç§æ–¹å¼æœ‰äº›æš´åŠ›ï¼Œå­å“§å­å“§ä¸€ç›´åœ¨ç”³è¯·ï¼Œç”³è¯·åˆ°äº†å°±å¼€å§‹è½¬è´¦äº†ã€‚ä»¥å‰åœ¨é“¶è¡Œåšè¿‡ï¼Œä»–ä»¬å®è¡Œå…¨è¡Œä¸€æœ¬è´¦ï¼Œæˆ‘ä¸€ç›´ä»¥ä¸ºè€å¸ˆæ‰€è¯´çš„è´¦æœ¬æ˜¯é‚£ä¸ªå‘¢ï¼Œæ‰€ä»¥å°±å¾ˆè¿·èŒ«","like_count":0,"discussions":[{"author":{"id":1179101,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fd/dd/baeda83e.jpg","nickname":"Monster!","note":"","ucode":"74F1D3BB5E3915","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":13049,"discussion_content":"å•ä¾‹åŠ é”å¹²å•¥ï¼Œå¤šçº¿ç¨‹ç”¨å°±ç”¨å‘—ï¼Œå†å¤šçº¿ç¨‹ç”¨çš„ä¹Ÿæ˜¯åŒä¸€ä¸ªå¯¹è±¡å•Šï¼Œç„¶åè¿›å»æ‰§è¡Œapplyçš„æ—¶å€™æœ‰é”å•Šï¼Œè¿™è¿˜ä¸å¤Ÿï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568634705,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":110762,"user_name":"è€Œç«‹æ–‹","can_delete":false,"product_type":"c1","uid":1087258,"ip_address":"","ucode":"5FED6E9E148195","user_header":"https://static001.geekbang.org/account/avatar/00/10/97/1a/389eab84.jpg","comment_is_top":false,"comment_ctime":1562326749,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562326749","product_id":100023901,"comment_content":"çœ‹äº†nå¤šéä»¥åç»ˆäºæœ‰äº›å…¥é—¨äº†ï¼Œä¸æ˜¯è€å¸ˆè®²çš„ä¸å¥½ï¼Œè€Œæ˜¯è€å­æ‚Ÿæ€§å¤ªä½ã€‚çœŸæ˜¯ä¹¦è¯»ç™¾éå…¶ä¹‰è‡ªè§","like_count":0},{"had_liked":false,"id":110139,"user_name":"ä¸å¯»å¸¸çš„è¿œæ–¹","can_delete":false,"product_type":"c1","uid":1449711,"ip_address":"","ucode":"2B319E01F5F135","user_header":"https://static001.geekbang.org/account/avatar/00/16/1e/ef/1d17edfa.jpg","comment_is_top":false,"comment_ctime":1562200493,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562200493","product_id":100023901,"comment_content":"æ‚¨å¥½è€å¸ˆï¼Œæ‚¨è¯´æ­»é”æ—¶ï¼ŒAç»™Bè½¬100ï¼ŒBç»™Aè½¬100ï¼Œåœ¨accountç±»ä¸­ä¸¤ä¸ªçº¿ç¨‹èµ°åˆ°â‘ ä½ç½®è·å–ä¸åŒé”ï¼ˆthisï¼‰ï¼ŒAæ˜¯Açš„accountå¯¹è±¡ï¼ŒBæ˜¯Bçš„accountå¯¹è±¡åœ¨è¿›å…¥â‘¡çš„ä½ç½®ä¼šæ­»é”ï¼Œä½†æ˜¯è½¬è´¦æ“ä½œæ—¶ï¼Œaccountå¯¹è±¡æŒ‡é’ˆä¸ä¸€æ ·ä¹Ÿå°±æ˜¯Aè½¬è´¦ç»™Bçš„this(Açš„å¯¹è±¡)å’ŒBç»™Aè½¬è´¦çš„targetï¼ˆAçš„å¯¹è±¡ï¼‰ä¸ä¸€æ ·æ€ä¹ˆä¼šæ­»é”å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":108314,"user_name":"å…«ç™¾","can_delete":false,"product_type":"c1","uid":1253530,"ip_address":"","ucode":"79F1F79ADF5A00","user_header":"https://static001.geekbang.org/account/avatar/00/13/20/9a/3b1c65fd.jpg","comment_is_top":false,"comment_ctime":1561716654,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561716654","product_id":100023901,"comment_content":"é”çš„èŒƒå›´ä¸€æ ·å¤§ï¼Œåªæ˜¯é”çš„æ—¶é—´å˜çŸ­äº†ã€‚","like_count":0},{"had_liked":false,"id":108051,"user_name":"a(à¹‘â‰–à¸´Ù¼â‰–à¸´)âœŒ","can_delete":false,"product_type":"c1","uid":1392431,"ip_address":"","ucode":"AEF9B5CA1605DF","user_header":"https://static001.geekbang.org/account/avatar/00/15/3f/2f/8513c4d3.jpg","comment_is_top":false,"comment_ctime":1561654163,"is_pvip":false,"discussion_count":1,"race_medal":1,"score":"1561654163","product_id":100023901,"comment_content":"å“¦è·‘äº†å‡ éæƒ³æ˜ç™½äº†ï¼Œå®ƒæ˜¯æ–¹æ³•å†…çš„å±€éƒ¨å˜é‡ï¼Œä¸ä¼šæœ‰çº¿ç¨‹é—®é¢˜","like_count":0,"discussions":[{"author":{"id":2043619,"avatar":"http://thirdwx.qlogo.cn/mmopen/2kpMNDYsSfCibibkl1x62jWiaJYL67ABTOrYO4VBibq5GrB7F2muJpibBPn4t8reWiaAHb7aNxckpGUk3V6mfyGhk2PruoicHdCkKIc/132","nickname":"Geek_b37487","note":"","ucode":"B6E202603B1A84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370733,"discussion_content":"ä¸€å¼€å§‹å°±è§‰ç€æœ‰é—®é¢˜ï¼Œä¸æ˜¯æ­»ä¸æ­»é”çš„é—®é¢˜ï¼Œè€Œæ˜¯ä¸€æ—¦ä½¿ç”¨äº†thisåšé”å¯¹è±¡, å¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶åšA->Bçš„è½¬è´¦ï¼Œä¹Ÿæ˜¯ä¼šæœ‰é—®é¢˜çš„å“ˆï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½å» new Account() ç„¶ååšè½¬è´¦çš„è¯ï¼Œé‡Œé¢çš„thisæ˜¯å„è‡ªçš„Accountå®ä¾‹  ï¼Œåº”è¯¥è¿˜æ˜¯æœ‰é—®é¢˜çš„å•Š   é™¤éå‰ææ˜¯ä¿è¯Accountæ˜¯å•ä¾‹çš„æ‰è¡Œå•Š  ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619518852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108050,"user_name":"a(à¹‘â‰–à¸´Ù¼â‰–à¸´)âœŒ","can_delete":false,"product_type":"c1","uid":1392431,"ip_address":"","ucode":"AEF9B5CA1605DF","user_header":"https://static001.geekbang.org/account/avatar/00/15/3f/2f/8513c4d3.jpg","comment_is_top":false,"comment_ctime":1561653750,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1561653750","product_id":100023901,"comment_content":"äº¤æ¢accountå¯¹è±¡targetå’Œthisä¼šä¸ä¼šä¹Ÿæœ‰çº¿ç¨‹é—®é¢˜ï¼Œæ€ä¹ˆè§£å†³å‘¢ï¼Œç»™æ’åºå¯¹è±¡è¿™æ®µä»£ç ä¹ŸåŠ ä¸ªé”å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":106861,"user_name":"Kian.Lee","can_delete":false,"product_type":"c1","uid":1086568,"ip_address":"","ucode":"3FB08A00F2DFD7","user_header":"https://static001.geekbang.org/account/avatar/00/10/94/68/56794ea3.jpg","comment_is_top":false,"comment_ctime":1561417470,"is_pvip":false,"discussion_count":0,"race_medal":5,"score":"1561417470","product_id":100023901,"comment_content":"void transfer(Account target, int amt)è¿™ä¸ªç¤ºä¾‹æœ‰äº›ç–‘é—®ï¼ŒAccount target å‡å®šä¸ºè´¦æˆ·Bï¼Œä½†æ˜¯æ— ç‰¹æ®Šå¤„ç†ä¸‹ï¼Œå¯èƒ½ä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œtransferæ—¶ï¼Œè™½ç„¶éƒ½æ˜¯è´¦æˆ·Bä½†æ˜¯ä¸¤ä¸ªJava å¯¹è±¡ï¼Œæ‰€ä»¥æœ€å¥½åšä¸€ä¸‹å£°æ˜ï¼Œè¦åœ¨ä»£ç é‡Œå®ç°ä¸€ä¸ªç‰©ç†è´¦æˆ·å¯¹åº”ä¸€ä¸ªAccountå¯¹è±¡ã€‚","like_count":0},{"had_liked":false,"id":95130,"user_name":"Michael","can_delete":false,"product_type":"c1","uid":1435138,"ip_address":"","ucode":"2817C6A41C2E53","user_header":"https://static001.geekbang.org/account/avatar/00/15/e6/02/65a764fe.jpg","comment_is_top":false,"comment_ctime":1557972254,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557972254","product_id":100023901,"comment_content":"è€å¸ˆä¸‹é¢çš„å†™æ³•ç»“æœè¿˜æ˜¯ä¸æ­£ç¡®ï¼Œæ­£ç¡®ç»“æœåº”è¯¥éƒ½æ˜¯200ï¼Œå®é™…æƒ…å†µæ˜¯éšæœºçš„100ï¼Œ200ï¼Œ300è¯·è€å¸ˆæŒ‡æ­£<br>public class Test {<br><br>  public static void main(String[] args) throws InterruptedException {<br>    Account a = new Account();<br>    Account b = new Account();<br>    Account c = new Account();<br><br>    Thread s1 = new Thread(()-&gt;{<br>      for (int i = 0; i &lt; 1000; i++) {<br>        Thread t1 = new Thread(() -&gt;<br>            a.transfer(b, 100)<br>        );<br>        Thread t2 = new Thread(() -&gt;<br>            b.transfer(c, 100)<br>        );<br><br>        Thread t3 = new Thread(() -&gt;<br>            c.transfer(a, 100)<br>        );<br>        t1.start();<br>        t2.start();<br>        t3.start();<br>        try {<br>          t1.join();<br>          t2.join();<br>          t3.join();<br>        } catch (InterruptedException e) {<br>          e.printStackTrace();<br>        }<br>      }<br>    });<br><br>    Thread s2 = new Thread(()-&gt;{<br>      for (int i = 0; i &lt; 2000; i++) {<br>        Thread t1 = new Thread(() -&gt;<br>            a.transfer(b, 100)<br>        );<br>        Thread t2 = new Thread(() -&gt;<br>            b.transfer(c, 100)<br>        );<br>        Thread t3 = new Thread(() -&gt;<br>            c.transfer(a, 100)<br>        );<br>        t1.start();<br>        t2.start();<br>        t3.start();<br>        try {<br>          t1.join();<br>          t2.join();<br>          t3.join();<br>        } catch (InterruptedException e) {<br>          e.printStackTrace();<br>        }<br>      }<br>    });<br><br>    s1.start();<br>    s2.start();<br>    s1.join();<br>    s2.join();<br><br>    System.out.println(a.getBalance());<br>    System.out.println(b.getBalance());<br>    System.out.println(c.getBalance());<br>  }<br>}<br><br>class Account {<br><br>  private volatile int balance = 200;<br><br>  void transfer(Account target, int amount) {<br>    synchronized (this) {<br>      synchronized (target) {<br>        if (this.balance &gt; amount) {<br>          this.balance -= amount;<br>          target.balance += amount;<br>        }<br>      }<br>    }<br>  }<br><br>  public int getBalance() {<br>    return balance;<br>  }<br>}<br>","like_count":0},{"had_liked":false,"id":94714,"user_name":"æ–°çš„èµ·ç‚¹ï¼Œæ–°çš„å¼€å§‹^_^","can_delete":false,"product_type":"c1","uid":1262068,"ip_address":"","ucode":"9C0810F472AC93","user_header":"https://static001.geekbang.org/account/avatar/00/13/41/f4/5df17eff.jpg","comment_is_top":false,"comment_ctime":1557884430,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557884430","product_id":100023901,"comment_content":"åœ¨æœ€åé‚£ä¸ªç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶çš„æ¡ˆä¾‹ä¸­ï¼Œé€šè¿‡ç»™Aå’ŒBä¸¤ä¸ªè´¦æˆ·ä¸­çš„idæ’åºçš„æ–¹å¼æ¥åŠ åŒæ­¥ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œé‚£è¿™ä¸¤ä¸ªçº¿ç¨‹ä¸­çš„Aå’ŒBæ˜¯åŒä¸€ä¸ªAå’ŒBå—ï¼Œè¿™ä¸¤ä¸ªè´¦æˆ·ä¸æ˜¯newå‡ºæ¥çš„å—ï¼Œå¦‚æœæ˜¯newå‡ºæ¥çš„ï¼Œé‚£ä¸¤ä¸ªçº¿ç¨‹ä¸­çš„Aè´¦æˆ·å°±ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡äº†ï¼Œå³ä½¿æŒ‰åºåŠ é”ï¼Œä¹Ÿä¸ç”Ÿæ•ˆå‘€","like_count":0},{"had_liked":false,"id":91753,"user_name":"zl","can_delete":false,"product_type":"c1","uid":1119422,"ip_address":"","ucode":"9260FC1C6CFECC","user_header":"https://static001.geekbang.org/account/avatar/00/11/14/be/488b85a0.jpg","comment_is_top":false,"comment_ctime":1557104398,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557104398","product_id":100023901,"comment_content":"class Allocator {<br>  private List&lt;Object&gt; als =<br>    new ArrayList&lt;&gt;();<br>  &#47;&#47; ä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰èµ„æº<br>  synchronized boolean apply(<br>    Object from, Object to){<br>    if(als.contains(from) ||<br>         als.contains(to)){<br>      return false;  <br>    } else {<br>      als.add(from);<br>      als.add(to);  <br>    }<br>    return true;<br>  }<br>  &#47;&#47; å½’è¿˜èµ„æº<br>  synchronized void free(<br>    Object from, Object to){<br>    als.remove(from);<br>    als.remove(to);<br>  }<br>}<br><br>class Account {<br>  &#47;&#47; actr åº”è¯¥ä¸ºå•ä¾‹<br>  private Allocator actr;<br>  private int balance;<br>  &#47;&#47; è½¬è´¦<br>  void transfer(Account target, int amt){<br>    &#47;&#47; ä¸€æ¬¡æ€§ç”³è¯·è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·ï¼Œç›´åˆ°æˆåŠŸ<br>    while(!actr.apply(this, target))<br>      ï¼›<br>    try{<br>      &#47;&#47; é”å®šè½¬å‡ºè´¦æˆ·<br>      synchronized(this){              <br>        &#47;&#47; é”å®šè½¬å…¥è´¦æˆ·<br>        synchronized(target){           <br>          if (this.balance &gt; amt){<br>            this.balance -= amt;<br>            target.balance += amt;<br>          }<br>        }<br>      }<br>    } finally {<br>      actr.free(this, target)<br>    }<br>  } <br>}<br>è¿™æ®µä»£ç æ˜¯æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜çš„å•Š","like_count":0},{"had_liked":false,"id":90274,"user_name":"ycfHH","can_delete":false,"product_type":"c1","uid":1498283,"ip_address":"","ucode":"084FF6C86CBCE4","user_header":"","comment_is_top":false,"comment_ctime":1556464841,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556464841","product_id":100023901,"comment_content":"è´¦æˆ· 1 å‘ è´¦æˆ· 3 è½¬è´¦ åŒæ—¶ è´¦æˆ· 3 å‘ è´¦æˆ· 5 è½¬è´¦<br>ç»™èµ„æºæ’åºåç¡®å®èƒ½è§£å†³æ­»é”é—®é¢˜ï¼Œä½†æ˜¯å¹¶å‘é—®é¢˜ä¾ç„¶æ²¡æœ‰è§£å†³ã€‚å³è´¦æˆ·1ç»™è´¦æˆ·3è½¬è´¦ï¼Œèµ„æº1é”ä¸Šåã€‚æ‰§è¡Œè´¦æˆ·3å‘5è½¬è´¦ï¼Œæ­¤æ—¶è´¦æˆ·3èµ„æºæœªåŠ é”ï¼Œæ‰€ä»¥è´¦æˆ·3æˆåŠŸè½¬è´¦åˆ°5ã€‚å†æ‰§è¡Œ1è½¬åˆ°3çš„æ“ä½œï¼Œæ­¤æ—¶3çš„é‡‘é¢æ˜¯ä¸æ­£ç¡®çš„ã€‚ä½†æ˜¯ç¡®å®æ²¡æœ‰æ­»é”é—®é¢˜äº†ã€‚","like_count":0},{"had_liked":false,"id":89779,"user_name":"Geek_bbbda3","can_delete":false,"product_type":"c1","uid":1504651,"ip_address":"","ucode":"737394CE472C21","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKNDKOCoZvCqoYVM1t97Q77QPLmRBGvOLYzFsh8073RicycoIuwGrIsCXpAFEyVBOxcyE3Ih1mr6Vw/132","comment_is_top":false,"comment_ctime":1556263000,"is_pvip":false,"replies":[{"id":"32180","content":"å¦‚æœä»…ä»…æ˜¯è¿™ä¸ªé¢˜ç›®ï¼Œå¯ä»¥å»æ‰ï¼Œå¦‚æœè¿˜æœ‰å­˜æ¬¾ä¸šåŠ¡ï¼Œå°±ä¸èƒ½å»äº†<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1556280248,"ip_address":"","comment_id":89779,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1556263000","product_id":100023901,"comment_content":"class Account {<br>  &#47;&#47; actr åº”è¯¥ä¸ºå•ä¾‹<br>  private Allocator actr;<br>  private int balance;<br>  &#47;&#47; è½¬è´¦<br>  void transfer(Account target, int amt){<br>    &#47;&#47; ä¸€æ¬¡æ€§ç”³è¯·è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·ï¼Œç›´åˆ°æˆåŠŸ<br>    while(!actr.apply(this, target))ï¼›<br>    try{<br>      &#47;&#47; é”å®šè½¬å‡ºè´¦æˆ·<br>      &#47;&#47;synchronized(this){              <br>        &#47;&#47; é”å®šè½¬å…¥è´¦æˆ·<br>        &#47;&#47;synchronized(target){           <br>          if (this.balance &gt; amt){<br>            this.balance -= amt;<br>            target.balance += amt;<br>          }<br>        &#47;&#47;}<br>      &#47;&#47;}<br>    } finally {<br>      actr.free(this, target)<br>    }<br>  } <br>}<br>hiï¼Œwhile é€šè¿‡åï¼Œæ˜¯å¦å¯ä»¥æŠŠsynchronizedä»£ç æ³¨é‡Šæ‰ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448259,"discussion_content":"å¦‚æœä»…ä»…æ˜¯è¿™ä¸ªé¢˜ç›®ï¼Œå¯ä»¥å»æ‰ï¼Œå¦‚æœè¿˜æœ‰å­˜æ¬¾ä¸šåŠ¡ï¼Œå°±ä¸èƒ½å»äº†\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556280248,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":87243,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1555552504,"is_pvip":false,"replies":[{"id":"31551","content":"é€»è¾‘ä¸Šç­‰ä»·<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1555675899,"ip_address":"","comment_id":87243,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1555552504","product_id":100023901,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼ŒAllocator åªå…è®¸å•ä¾‹ï¼Œé‚£ä»£ç æ”¹å†™æˆ synchronized(Allocator.class)&#47; synchronize static apply(...) æ˜¯ä¸æ˜¯ç­‰ä»·çš„ï¼Œè¿™æ ·è¿˜èƒ½é˜²æ­¢å‡ºç° Allocator å¯¹è±¡ä¸ä¸€è‡´çš„æƒ…å†µã€‚<br>è°¢è°¢è€å¸ˆ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447363,"discussion_content":"é€»è¾‘ä¸Šç­‰ä»·\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555675899,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":87223,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1555550626,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555550626","product_id":100023901,"comment_content":"è¯¾åæ€è€ƒï¼š<br>synchronized(Account.class) æ˜¯æ‰€æœ‰è½¬è´¦æ“ä½œéƒ½ä¸²è¡ŒåŒ–äº†ï¼Œå½±å“åˆ°äº†æ— å…³çš„è´¦æˆ·ã€‚<br>è€Œ while-apply çš„æ–¹å¼åªæ˜¯é˜»å¡å½“å‰çš„è¿™æ¬¡è½¬è´¦ã€‚æ€§èƒ½æ˜¯ while-apply è¦å¥½ã€‚ä¸è¿‡å¦‚æœå…¶ä»–çº¿ç¨‹å¿˜äº†é‡Šæ”¾é”èµ„æºï¼Œåˆšå°±æ˜¯æ­»å¾ªç¯äº†ã€‚","like_count":0},{"had_liked":false,"id":85045,"user_name":"è‚–é‚¦çš„å­¦å¾’","can_delete":false,"product_type":"c1","uid":1159128,"ip_address":"","ucode":"1DB95CD3E10F33","user_header":"https://static001.geekbang.org/account/avatar/00/11/af/d8/0f85fc8f.jpg","comment_is_top":false,"comment_ctime":1554966143,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554966143","product_id":100023901,"comment_content":"actr.apply(this, target)å·²ç»åŒæ—¶æ‹¿åˆ°ä¸¤æŠŠé”äº†ï¼Œæ„Ÿè§‰ä¸éœ€è¦åœ¨é”ä½thiså’Œtargetäº† ","like_count":0},{"had_liked":false,"id":83309,"user_name":"linqw","can_delete":false,"product_type":"c1","uid":1134138,"ip_address":"","ucode":"09DCFE98C54DD8","user_header":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","comment_is_top":false,"comment_ctime":1554527662,"is_pvip":false,"replies":[{"id":"30119","content":"å®é™…å·¥ä½œä¸­åŸºæœ¬éƒ½æ˜¯é æ•°æ®åº“è§£å†³çš„ï¼Œè¿™ä¸ªåªæ˜¯ä¸ªä¾‹å­ï¼Œè¯´æ˜å¹¶å‘ç¼–ç¨‹çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µè€Œå·²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554538537,"ip_address":"","comment_id":83309,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554527662","product_id":100023901,"comment_content":"è½¬è´¦ä½¿ç”¨ç»†ç²’åº¦é”ï¼Œæ¯”è¾ƒå¥½å¥‡ä¸€ç‚¹æ˜¯ï¼Œé‚£äº›è´¦æˆ·å¯¹è±¡æ˜¯ä¸€æ ·ï¼Œæ¯”å¦‚çº¿ç¨‹1è´¦æˆ·Aè½¬è´¦ç»™è´¦æˆ·Bï¼Œçº¿ç¨‹2è´¦æˆ·Bè½¬è´¦ç»™è´¦æˆ·C,é‚£ä¸¤ä¸ªçº¿ç¨‹æ‹¿åˆ°è´¦æˆ·Bæ˜¯ä¸€æ ·å¯¹è±¡çš„ï¼Œé‚£è´¦æˆ·é¢„å…ˆå­˜åˆ°ç¼“å­˜ä¸­ï¼Œæ„Ÿè§‰è¿™æ ·åˆä¸åˆç†ï¼Œè€å¸ˆï¼Œåœ¨é“¶è¡Œä¸šåŠ¡æ–¹é¢çœŸæ­£çš„åšæ³•æ˜¯å¦‚ä½•ä¿è¯å¤šä¸ªçº¿ç¨‹æ‹¿åˆ°çš„è´¦æˆ·å¯¹è±¡æ˜¯åŒä¸€ä¸ªï¼Œä¸ç„¶å¯¹è±¡ä¸ä¸€æ ·æ‹¿åˆ°çš„é”å°±ä¸ä¸€æ ·ï¼Œå¸®å¿™è§£ç­”ä¸‹å“¦","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445970,"discussion_content":"å®é™…å·¥ä½œä¸­åŸºæœ¬éƒ½æ˜¯é æ•°æ®åº“è§£å†³çš„ï¼Œè¿™ä¸ªåªæ˜¯ä¸ªä¾‹å­ï¼Œè¯´æ˜å¹¶å‘ç¼–ç¨‹çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µè€Œå·²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554538537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82948,"user_name":"é¾™è…¾","can_delete":false,"product_type":"c1","uid":1439436,"ip_address":"","ucode":"51D41953C90207","user_header":"https://static001.geekbang.org/account/avatar/00/15/f6/cc/dac4c28c.jpg","comment_is_top":false,"comment_ctime":1554356544,"is_pvip":false,"replies":[{"id":"29977","content":"åˆ†å¸ƒå¼æœ‰åˆ†å¸ƒå¼çš„è§£æ³•ğŸ˜‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554379832,"ip_address":"","comment_id":82948,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554356544","product_id":100023901,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘åœ¨ç”¨è¿™ä¸ªAccountç±»çš„æ—¶å€™æ€ä¹ˆæ§åˆ¶ä¸åŒçº¿ç¨‹è®¿é—®è´¦æˆ·aï¼Œaçš„thiséƒ½ä¸ºåŒä¸€ä¸ªå¯¹è±¡ï¼Ÿå¦‚æœæ”¾åˆ°é›†åˆç±»é‡Œçš„è¯æ²¡åŠæ³•æ»¡è¶³åˆ†å¸ƒå¼ï¼Œæ”¾rediså­˜å‚¨å¥½åƒå°±ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡äº†","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445789,"discussion_content":"åˆ†å¸ƒå¼æœ‰åˆ†å¸ƒå¼çš„è§£æ³•ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554379832,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82705,"user_name":"Vincent","can_delete":false,"product_type":"c1","uid":1135159,"ip_address":"","ucode":"CD8B84A57A6A0C","user_header":"https://static001.geekbang.org/account/avatar/00/11/52/37/13b4c8aa.jpg","comment_is_top":false,"comment_ctime":1554281189,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554281189","product_id":100023901,"comment_content":"æ€è€ƒé¢˜: åŒæ­¥ç±»classå®ä¾‹çš„åŒæ­¥èŒƒå›´å¤ªå¤§ï¼Œåªè¦æ¶‰åŠè¯¥ç±»çš„æ“ä½œï¼Œéƒ½ä¼šè¢«åŒæ­¥ï¼Œæ€§èƒ½å¤ªå·®; ç ´åå ç”¨ä¸”ç­‰å¾…æ¡ä»¶ å°†åŒæ­¥èŒƒå›´ç¼©å°ä¸ºæ“ä½œæ¶‰åŠçš„ä¸¤ä¸ªè´¦æˆ·ã€‚æé«˜äº†å¹¶å‘æ€§èƒ½ã€‚å¦å¤–whileå¾ªç¯å¯ä»¥æ›¿æ¢ä¸ºåŸºäºAQSå®ç°çš„åŒæ­¥é˜Ÿåˆ—ï¼Œå‡å°‘CPUæ¶ˆè€—ã€‚","like_count":0},{"had_liked":false,"id":82317,"user_name":"Sunã€","can_delete":false,"product_type":"c1","uid":1441974,"ip_address":"","ucode":"1B11AF8B8A138A","user_header":"https://static001.geekbang.org/account/avatar/00/16/00/b6/c19640cf.jpg","comment_is_top":false,"comment_ctime":1554184183,"is_pvip":false,"replies":[{"id":"29873","content":"ä¸ä¼šæ­»é”ï¼Œb_cä¼šæˆåŠŸï¼Œæœ€ç»ˆé‡Šæ”¾é”ï¼Œç„¶åa_bæˆåŠŸ<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554248910,"ip_address":"","comment_id":82317,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1554184183","product_id":100023901,"comment_content":"å¯¹äºç¬¬3ç‚¹ï¼Œç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶ï¼Œ<br>è€å¸ˆï¼Œé’ˆå¯¹è¿™æœ‰ä¸ªé—®é¢˜ï¼ŒA-&gt;Bå’ŒB-&gt;CåŒæ—¶æ‰§è¡Œï¼Œidä¾æ¬¡å¢åŠ ï¼Œæ˜¯å¦å­˜åœ¨è¿™ç§å¯èƒ½ï¼Œåœ¨A-&gt;Bä¸­ï¼Œæ’åºï¼ŒAä¸Šé”ï¼Œå¯¹Bä¸Šé”çš„æ—¶å€™ï¼ŒB-&gt;Cè·å–åˆ°Bï¼Œå¯¹Bä¸Šé”ï¼Œå‡ºç°æ­»é”ï¼Œè€å¸ˆè¯·æ˜ç¡®ä¸€ä¸‹","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445551,"discussion_content":"ä¸ä¼šæ­»é”ï¼Œb_cä¼šæˆåŠŸï¼Œæœ€ç»ˆé‡Šæ”¾é”ï¼Œç„¶åa_bæˆåŠŸ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554248910,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1123942,"avatar":"https://static001.geekbang.org/account/avatar/00/11/26/66/6643c75d.jpg","nickname":"Geek_a45c0b","note":"","ucode":"D3CFD2A88F0EF0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":202027,"discussion_content":"æ²¡æ‡‚ä¸ºå•¥b cå…ˆæ‰§è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583854277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82048,"user_name":"è™çˆ·","can_delete":false,"product_type":"c1","uid":1024907,"ip_address":"","ucode":"42E8339F183055","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a3/8b/e7389cf5.jpg","comment_is_top":false,"comment_ctime":1554109746,"is_pvip":true,"replies":[{"id":"29708","content":"æˆ‘ä¿¡ğŸ˜„<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554129190,"ip_address":"","comment_id":82048,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1554109746","product_id":100023901,"comment_content":"å®ƒæ¯” synchronized(Account.class)è¿™ä¸ªæ–¹æ³•ï¼Œè¿˜æ˜¯æœ‰æ€§èƒ½ä¼˜åŠ¿çš„ã€‚applyæ–¹æ³•ï¼Œåªé”å®šäº†2ä¸ªå®ä¾‹ï¼Œè½¬å‡ºå’Œè½¬å…¥è¿™2ä¸ªå®ä¾‹ï¼Œè€Œsynchronized(Account.class)è¿™ä¸ªæ–¹æ³•ï¼Œé”çš„æ˜¯æ‰€æœ‰çš„Accountå®ä¾‹ã€‚æˆ‘å£°æ˜å•Šï¼Œæˆ‘æ²¡çœ‹åˆ«äººçš„ã€‚<br><br><br>","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445444,"discussion_content":"æˆ‘ä¿¡ğŸ˜„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554129190,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2043619,"avatar":"http://thirdwx.qlogo.cn/mmopen/2kpMNDYsSfCibibkl1x62jWiaJYL67ABTOrYO4VBibq5GrB7F2muJpibBPn4t8reWiaAHb7aNxckpGUk3V6mfyGhk2PruoicHdCkKIc/132","nickname":"Geek_b37487","note":"","ucode":"B6E202603B1A84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370734,"discussion_content":"ä¸€å¼€å§‹å°±è§‰ç€æœ‰é—®é¢˜ï¼Œä¸æ˜¯æ­»ä¸æ­»é”çš„é—®é¢˜ï¼Œè€Œæ˜¯ä¸€æ—¦ä½¿ç”¨äº†thisåšé”å¯¹è±¡, å¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶åšA->Bçš„è½¬è´¦ï¼Œä¹Ÿæ˜¯ä¼šæœ‰é—®é¢˜çš„å“ˆï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½å» new Account() ç„¶ååšè½¬è´¦çš„è¯ï¼Œé‡Œé¢çš„thisæ˜¯å„è‡ªçš„Accountå®ä¾‹  ï¼Œåº”è¯¥è¿˜æ˜¯æœ‰é—®é¢˜çš„å•Š   é™¤éå‰ææ˜¯ä¿è¯Accountæ˜¯å•ä¾‹çš„æ‰è¡Œå•Š  ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619518869,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":80800,"user_name":"é¾™è…¾","can_delete":false,"product_type":"c1","uid":1439436,"ip_address":"","ucode":"51D41953C90207","user_header":"https://static001.geekbang.org/account/avatar/00/15/f6/cc/dac4c28c.jpg","comment_is_top":false,"comment_ctime":1553735494,"is_pvip":false,"replies":[{"id":"29422","content":"æˆ‘å¾ˆåŠªåŠ›çœ‹ä½ çš„é—®é¢˜äº†ä½†æ˜¯æ²¡çœ‹æ‡‚ï¼Œä¸åŒçº¿ç¨‹è®¿é—®è´¦æˆ·a,açš„thiséƒ½æ˜¯ä¸€ä¸ªï¼Œä¸çŸ¥é“ä½ çš„é—®é¢˜æ˜¯ä»€ä¹ˆ<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1553781061,"ip_address":"","comment_id":80800,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553735494","product_id":100023901,"comment_content":"è€å¸ˆå¥½ï¼Œä¸åŒçº¿ç¨‹è®¿é—®è¿›æ¥ç”¨thiså’Œtargetå¯¹è±¡æ¥ä½œä¸ºé”æ˜¯æ€ä¹ˆåˆ¤æ–­æ˜¯ä¸æ˜¯åŒä¸€ä¸ªè´¦æˆ·çš„å¯¹è±¡ï¼Ÿ<br><br>æˆ‘ç†è§£é‡Œé¢çš„thiså¯¹è±¡æ°¸è¿œä¸ºä¸€ä¸ªå¯¹è±¡ä¸ä¼šé’ˆå¯¹ä¸åŒè´¦æˆ·è¿›è¡ŒåŠ é”å’Œè§£é”ï¼Œå¦‚æœä¸æ˜¯åŒä¸€ä¸ªé‚£åº”è¯¥æ˜¯æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰å„è‡ªçš„å¯¹è±¡ï¼Œå³ä½¿ä¸åŒçº¿ç¨‹æœ‰å¯èƒ½ä¼šæœ‰ç›¸åŒçš„è´¦æˆ·ä½†ä»–ä»¬çš„å¯¹è±¡ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ä¹Ÿä¸ä¼šå½¢æˆäº’æ–¥å§ï¼Ÿtargetå¯¹è±¡ç”±äºæ˜¯ä»å¤–éƒ¨ä¼ è¿›æ¥çš„æ‰€ä»¥æˆ‘è®¤ä¸ºä¼ å…¥çš„å¯¹è±¡ä¸ºæ¯ä¸ªçº¿ç¨‹çš„å¯¹è±¡å³ä½¿ä¸ºç›¸åŒè´¦æˆ·ä½†å¯¹è±¡å†…å­˜åœ°å€ä¸åŒä¹Ÿä¸ä¼šå½¢æˆäº’æ–¥ã€‚<br><br>çœ‹äº†å¥½å‡ éå°±æ˜¯æƒ³ä¸é€šï¼Œæœ›è€å¸ˆè§£æƒ‘ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444979,"discussion_content":"æˆ‘å¾ˆåŠªåŠ›çœ‹ä½ çš„é—®é¢˜äº†ä½†æ˜¯æ²¡çœ‹æ‡‚ï¼Œä¸åŒçº¿ç¨‹è®¿é—®è´¦æˆ·a,açš„thiséƒ½æ˜¯ä¸€ä¸ªï¼Œä¸çŸ¥é“ä½ çš„é—®é¢˜æ˜¯ä»€ä¹ˆ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553781061,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":80619,"user_name":"èƒ¡æ¡¥","can_delete":false,"product_type":"c1","uid":1055874,"ip_address":"","ucode":"673C3207614010","user_header":"https://static001.geekbang.org/account/avatar/00/10/1c/82/74ab79df.jpg","comment_is_top":false,"comment_ctime":1553689525,"is_pvip":false,"replies":[{"id":"29424","content":"ä¸¤ä¸ªçº¿ç¨‹éƒ½æ‰§è¡Œaè½¬b,ä½ çœ‹çœ‹èƒ½ä¸èƒ½åŒæ—¶åˆ°è¾¾ä¸‹é¢<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1553781174,"ip_address":"","comment_id":80619,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553689525","product_id":100023901,"comment_content":"ç¬¬ä¸€æ¡ï¼Œç ´åå ç”¨ä¸”ç­‰å¾…æ¡ä»¶ï¼Œæ„Ÿè§‰while(!actr.apply(this, target))æ²¡æœ‰æ„ä¹‰å•Šï¼Ÿä¸¤ä¸ªçº¿ç¨‹å®Œå…¨æœ‰å¯èƒ½åŒæ—¶ä»whileå‡ºæ¥åˆ°è¾¾ä¸‹é¢çš„tryè¯­å¥å§ã€‚æ²¡çœ‹æ‡‚ï¼Œéº»çƒ¦è€å¸ˆæŒ‡ç‚¹ä¸‹ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444923,"discussion_content":"ä¸¤ä¸ªçº¿ç¨‹éƒ½æ‰§è¡Œaè½¬b,ä½ çœ‹çœ‹èƒ½ä¸èƒ½åŒæ—¶åˆ°è¾¾ä¸‹é¢\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553781174,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79984,"user_name":"ç§‹å¤©æ¥äº†","can_delete":false,"product_type":"c1","uid":1205977,"ip_address":"","ucode":"98781C246B60A6","user_header":"https://static001.geekbang.org/account/avatar/00/12/66/d9/8953d6c6.jpg","comment_is_top":false,"comment_ctime":1553588520,"is_pvip":false,"replies":[{"id":"29189","content":"æœ‰","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1553604514,"ip_address":"","comment_id":79984,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553588520","product_id":100023901,"comment_content":"ä½ ç”¨ArrayListåœ¨å¹¶å‘ä¸‹æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444711,"discussion_content":"æœ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553604514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79027,"user_name":"linqw","can_delete":false,"product_type":"c1","uid":1134138,"ip_address":"","ucode":"09DCFE98C54DD8","user_header":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","comment_is_top":false,"comment_ctime":1553326442,"is_pvip":false,"replies":[{"id":"28856","content":"1.åªæ˜¯è®²è§£ç†è®º<br>2.ç”¨å†…å­˜æ¨¡å‹å»ç†è§£ï¼Œä¸è¦è¯•å›¾æ¨æµ‹jvmæ€ä¹ˆå®ç°çš„<br>3.ä¸èƒ½","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1553388485,"ip_address":"","comment_id":79027,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553326442","product_id":100023901,"comment_content":"1ã€æ„Ÿè§‰ç ´åå ç”¨ä¸”ç­‰å¾…çš„å®ç°ï¼Œä½¿ç”¨å•ä¾‹åˆ†é…å™¨ï¼Œç”¨listè¦æ˜¯è½¬è´¦ç”¨æˆ·æ•°å¤ªå¤šï¼Œå¯¼è‡´åœ¨ä¸€æ¬¡æ€§è·å–é”çš„æ—¶å€™ï¼Œéœ€è¦å…ˆåˆ¤æ–­é”æ˜¯å¦æœ‰åœ¨listé‡Œé¢ï¼Œæ„Ÿè§‰è¿™é‡Œä¹Ÿä¼šå½±å“åˆ°æ€§èƒ½ï¼Œå¹¶ä¸”listå¤ªå¤§å ç”¨jvmå†…å­˜ï¼Œåœ¨ä¸€æ¬¡æ€§è·å–åˆ°é”çš„æ—¶å€™ï¼Œæ„Ÿè§‰å†…éƒ¨æ˜¯ä¸éœ€è¦åœ¨å¯¹è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·è¿›è¡ŒåŠ é”ï¼Œè™½ç„¶åŠ é”ï¼Œjvmä¼šä¼˜åŒ–æˆæ— é”ï¼Œæ„Ÿè§‰åœ¨å®‰å…¨æ–¹é¢ä¹Ÿä¼šæœ‰é—®é¢˜ï¼Œæœ‰å¯èƒ½ä¸€ä¸ªçº¿ç¨‹åŠ çš„é”ï¼Œè¢«å¦ä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾æ‰ï¼Œæ¯”å¦‚å…ˆè°ƒåˆ†é…å™¨çš„freeåœ¨è°ƒapplyï¼Œ\bè€å¸ˆé—®ä¸‹ï¼Œè¿™ä¸ªé¿å…æ­»é”çš„ä½¿ç”¨æ–¹æ³•åº”è¯¥ä½¿ç”¨çš„æ¯”è¾ƒå°‘å§ï¼Œæ„Ÿè§‰ä½¿ç”¨é¡ºåºé¿å…æ­»é”è¾ƒå¸¸ç”¨ã€‚<br>2ã€é”æˆ–è€…volatileï¼Œåœ¨é”ä¸­çš„æ“ä½œï¼Œéƒ½ä¼šå¼ºåˆ¶åˆ·å…¥å†…å­˜ä¹ˆï¼Ÿvolatileçš„æ“ä½œä¹‹å‰çš„æ“ä½œä¹Ÿæ˜¯ä¼šå¼ºåˆ¶åˆ·å†…å­˜ä¹ˆï¼Ÿ<br>3ã€æ„é€ å‡½æ•°æ˜¯ä¸èƒ½ä¿è¯åŸå­çš„ä¹ˆï¼Ÿå¦‚æœæƒ³åœ¨å¹¶å‘çš„æ¡ä»¶ä¸‹ï¼Œåœ¨ä¸€ä¸ªæ–¹æ³•ä¸­æ„é€ ä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨å¦ä¸€ä¸ªå¯¹è±¡èƒ½çœ‹åˆ°æ„é€ å®Œçš„å¯¹è±¡ï¼Œé‡Œé¢çš„å±æ€§éƒ½æ˜¯éœ€è¦ä½¿ç”¨finalå¹¶ä¸”å¯¹è±¡æ²¡æœ‰æº¢å‡ºä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444330,"discussion_content":"1.åªæ˜¯è®²è§£ç†è®º\n2.ç”¨å†…å­˜æ¨¡å‹å»ç†è§£ï¼Œä¸è¦è¯•å›¾æ¨æµ‹jvmæ€ä¹ˆå®ç°çš„\n3.ä¸èƒ½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553388485,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77816,"user_name":"å—å±±","can_delete":false,"product_type":"c1","uid":1119593,"ip_address":"","ucode":"94656FE4A6C378","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/69/187b9968.jpg","comment_is_top":false,"comment_ctime":1553003999,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1553003999","product_id":100023901,"comment_content":"1ã€å¤šçº¿ç¨‹é—´è·å–å…±äº«å˜é‡èµ„æºçš„å†²çªæ¦‚ç‡éå¸¸é«˜ï¼Œä½¿ç”¨synchronizedä¼šå¥½ä¸€äº›<br>2ã€æ¦‚ç‡ä½ï¼Œåˆ™ä½¿ç”¨whileå¥½ä¸€äº›ï¼Œç±»ä¼¼äºä¹è§‚é”çš„åº”ç”¨åœºæ™¯","like_count":0},{"had_liked":false,"id":77777,"user_name":"å¼ ä¸‰","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1552997192,"is_pvip":false,"replies":[{"id":"28392","content":"å‚è€ƒç½‘ç»œä¸Šå•ä¾‹çš„å®ç°ï¼Œæœ‰å¾ˆå¤šæ–¹å¼<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552997895,"ip_address":"","comment_id":77777,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552997192","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³çŸ¥é“å•ä¾‹çš„allocator ä»€ä¹ˆæ—¶å€™ new , ä»€ä¹ˆæ—¶å€™set åˆ° account å¯¹è±¡é‡Œè¾¹ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443848,"discussion_content":"å‚è€ƒç½‘ç»œä¸Šå•ä¾‹çš„å®ç°ï¼Œæœ‰å¾ˆå¤šæ–¹å¼\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552997895,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77755,"user_name":"RedStar","can_delete":false,"product_type":"c1","uid":1318186,"ip_address":"","ucode":"19FB2220CA8859","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/nSsRjJXH3msYEZUazkB7hXHWZpXUZH1ZFDhht8KDFO26Jfpqibjm6OdzEDwqplSz5Y5NGkSicl6MzEicZicStNy5AA/132","comment_is_top":false,"comment_ctime":1552993756,"is_pvip":false,"replies":[{"id":"28500","content":"        final Account a = new Account(200);<br>        final Account b = new Account(200);<br><br>        Thread th1 = new Thread(()-&gt;{<br>            while (true)<br>                a.transfer(b, 100);<br>        }, &quot;T1&quot;);<br>        Thread th2 = new Thread(()-&gt;{<br>            while (true)<br>                b.transfer(a, 100);<br>        }, &quot;T2&quot;);<br><br>        th1.start();<br>        th2.start();<br>        th1.join();<br>        th2.join();","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1553092037,"ip_address":"","comment_id":77755,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552993756","product_id":100023901,"comment_content":"è€å¸ˆï¼Œä¸‹é¢æ­»é”çš„æµ‹è¯•ä»£ç èƒ½ä¸èƒ½è´´å‡ºæ¥å‘¢ï¼Ÿæƒ³åšæµ‹è¯•ä¸çŸ¥é“æ€ä¹ˆæ¨¡æ‹Ÿ...<br>public class Account {<br>\tprivate int balance = 200;<br>\tpublic void transfer(Account target, int amt) {<br>\t\tsynchronized (this) {<br>\t\t\tsynchronized (target) {<br>\t\t\t\tif(this.balance &gt; amt) {<br>\t\t\t\t\tthis.balance -= amt;<br>\t\t\t\t\ttarget.balance += amt;<br>\t\t\t\t}<br>\t\t\t}<br>\t\t}<br>\t}<br><br>\tpublic int getBalance() {<br>\t\treturn balance;<br>\t}<br>}","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443838,"discussion_content":"        final Account a = new Account(200);\n        final Account b = new Account(200);\n\n        Thread th1 = new Thread(()-&amp;gt;{\n            while (true)\n                a.transfer(b, 100);\n        }, &amp;quot;T1&amp;quot;);\n        Thread th2 = new Thread(()-&amp;gt;{\n            while (true)\n                b.transfer(a, 100);\n        }, &amp;quot;T2&amp;quot;);\n\n        th1.start();\n        th2.start();\n        th1.join();\n        th2.join();","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553092037,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77111,"user_name":"alias cd=rm -rf","can_delete":false,"product_type":"c1","uid":1318325,"ip_address":"","ucode":"E7B27D76305B75","user_header":"https://static001.geekbang.org/account/avatar/00/14/1d/b5/971261fd.jpg","comment_is_top":false,"comment_ctime":1552835876,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552835876","product_id":100023901,"comment_content":"å› ä¸ºactr.apply(this, target)åªä¼šé˜»å¡è°ƒç”¨this.transferçš„çº¿ç¨‹ã€‚è€Œsynchronizedé”äº†Account.classç›¸å…³çš„æ“ä½œéƒ½ä¼šå˜æˆä¸²è¡Œã€‚","like_count":0},{"had_liked":false,"id":76611,"user_name":"Enterprise","can_delete":false,"product_type":"c1","uid":1443784,"ip_address":"","ucode":"FCDD57F7F8CC8E","user_header":"https://static001.geekbang.org/account/avatar/00/16/07/c8/14945a9e.jpg","comment_is_top":false,"comment_ctime":1552642996,"is_pvip":false,"replies":[{"id":"27941","content":"åœ¨ifä¸‹é¢sleepä¸€æ®µæ—¶é—´çœ‹çœ‹<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552651727,"ip_address":"","comment_id":76611,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552642996","product_id":100023901,"comment_content":"æˆ‘è¯•äº†ä¸€ä¸‹ç›´æ¥ç»™thisåŠ é”ï¼Œè·‘äº†å¾ˆå¤šéå§‹ç»ˆæ˜¯100 200 300ã€‚æ˜¯ä¸æ˜¯å†™çš„æœ‰ç‚¹å„¿é—®é¢˜ï¼Œå§‹ç»ˆæ²¡æœ‰å‡ºç°bugçš„æƒ…å†µï¼Œæ±‚ç­”ç–‘<br>         public static void main(String[] args) throws InterruptedException {<br>\t\tAccountStupidLock accountStupidLock = new AccountStupidLock();<br>\t\tAccountStupidLock accountStupidLock1 = new AccountStupidLock();<br>\t\tAccountStupidLock accountStupidLock2 =new AccountStupidLock();<br>\t\tThread thread1 = new Thread(() -&gt; {<br>\t\t\taccountStupidLock.transfer(accountStupidLock1,100);<br>\t\t});<br>\t\tThread thread2=new Thread(()-&gt;{<br>\t\t\taccountStupidLock1.transfer(accountStupidLock2,100);<br>\t\t});<br>\t\tthread2.start();<br>\t\tthread1.start();<br>\t\tthread1.join();<br>\t\tthread2.join();<br>\t\tSystem.out.println(accountStupidLock.getBalance());<br>\t\tSystem.out.println(accountStupidLock1.getBalance());<br>\t\tSystem.out.println(accountStupidLock2.getBalance());<br>\t}<br>class AccountStupidLock {<br><br>\tprivate int balance=200;<br><br>\tpublic int getBalance(){<br>\t\treturn balance;<br>\t}<br><br>\t&#47;&#47; è½¬è´¦<br>\tsynchronized void transfer(AccountStupidLock target, int amt) {<br>\t\tif (this.balance &gt; amt) {<br>\t\t\tthis.balance -= amt;<br>\t\t\ttarget.balance += amt;<br>\t\t}<br>\t}<br>","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443377,"discussion_content":"åœ¨ifä¸‹é¢sleepä¸€æ®µæ—¶é—´çœ‹çœ‹\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552651727,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76581,"user_name":"HeroKojima","can_delete":false,"product_type":"c1","uid":1242568,"ip_address":"","ucode":"BA267EE3921E8B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLYBHUSKR9LTS7iaLbbO0pzbmR997SHfSZf7qbuEUhyM9hlvjh5QwnRFlww296XkqVZLdibWcvDEM3A/132","comment_is_top":false,"comment_ctime":1552635385,"is_pvip":false,"replies":[{"id":"27938","content":"ä¼šçš„<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552651417,"ip_address":"","comment_id":76581,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552635385","product_id":100023901,"comment_content":"åœ¨ç ´åå ç”¨ä¸”ç­‰å¾…æ¡ä»¶ä¸­ï¼Œä¿è¯Allocatorä¸ºå•ä¾‹ä¸ä¸Šä¸€èŠ‚ä¸­ä¼ å…¥åŒä¸€ä¸ªå¯¹è±¡ä½œä¸ºé”æ˜¯ä¸æ˜¯ä¸€æ ·çš„ï¼Ÿæ˜¯ä¸æ˜¯ä¹Ÿä¼šé‡åˆ°ä¸åŒå·¥ç¨‹ä¸‹æœ‰å¤šä¸ªAllocatorçš„æƒ…å†µï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443361,"discussion_content":"ä¼šçš„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552651417,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76552,"user_name":"kaizhi","can_delete":false,"product_type":"c1","uid":1257663,"ip_address":"","ucode":"EBD8CDA27DC521","user_header":"https://static001.geekbang.org/account/avatar/00/13/30/bf/c635b6b1.jpg","comment_is_top":false,"comment_ctime":1552631685,"is_pvip":false,"replies":[{"id":"27937","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552651377,"ip_address":"","comment_id":76552,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552631685","product_id":100023901,"comment_content":"æ„Ÿè§‰å˜Ÿå˜Ÿç§‘æŠ€ç ”å‘éƒ¨æ‰€è¯´çš„æ­»é”å…¶å®ä¸ä¼šå‘ç”Ÿï¼Œå› ä¸ºactr.applyæ‰§è¡Œå®Œæˆåå¹¶ä¸ä¼šé‡Šæ”¾ä¸¤ä¸ªèµ„æºï¼Œä¸¤ä¸ªèµ„æºçš„é‡Šæ”¾æ˜¯åœ¨actr.freeä¸­é€šè¿‡removeå®Œæˆçš„ï¼Œè€Œä¸æ˜¯synctorizedæ‰§è¡Œå®Œå°±é‡Šæ”¾è¿™ä¸¤ä¸ªèµ„æºäº†ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443350,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552651377,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76382,"user_name":"å°ä¼Ÿ","can_delete":false,"product_type":"c1","uid":1359701,"ip_address":"","ucode":"124953423491E2","user_header":"https://static001.geekbang.org/account/avatar/00/14/bf/55/198c6104.jpg","comment_is_top":false,"comment_ctime":1552580573,"is_pvip":false,"replies":[{"id":"27885","content":"ç†è®ºä¸Šï¼Œå¦‚æœä¸¤ä¸ªçº¿ç¨‹ä¼˜å…ˆçº§ç›¸åŒï¼Œæ“ä½œç³»ç»Ÿèƒ½ä¿è¯ä»–ä»¬æœºä¼šå‡ç­‰","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552623617,"ip_address":"","comment_id":76382,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1552580573","product_id":100023901,"comment_content":"å…³äºè¯¾åé—®é¢˜å°±ä¸åœ¨å„ä½å¤§ç¥çš„å›å¤ä¹‹åèµ˜è¿°äº†ã€‚<br>æˆ‘æƒ³åˆ°ä¸€ç§å¯èƒ½ï¼Œå¦‚æœapplyï¼ˆaï¼Œbï¼‰æˆåŠŸä¹‹åçš„è½¬è´¦æ“ä½œéœ€è¦10åˆ†é’Ÿï¼Œè€Œä¸‹ä¸ªè¯·æ±‚æ˜¯applyï¼ˆbï¼Œcï¼‰ï¼Œé‚£ä¹ˆapplyï¼ˆbï¼Œcï¼‰åœ¨è¿™10åˆ†é’Ÿä¸€å®šä¼šå¤±è´¥ä¸”ä¸æ–­å°è¯•ã€‚å¦‚æœè¿™æ—¶ä¸€ä¸ªapplyï¼ˆdï¼Œeï¼‰è¿‡æ¥äº†ï¼Œä½†ç”±äºè¿æ°”ä¸å¥½applyï¼ˆbï¼Œcï¼‰åœ¨å‡ºä¸´ç•ŒåŒºåæ€»èƒ½å†æ¬¡å¾—åˆ°allocatorçš„é”ï¼Œä¸€ç›´å æ®allocatorçš„é”ï¼Œé‚£ä¹ˆapplyï¼ˆdï¼Œeï¼‰å²‚ä¸æ˜¯ä¹Ÿä¼šå› ä¸ºä¸€ç›´æ‹¿ä¸åˆ°allocatorçš„é”ä¸€ç›´å¤±è´¥å¹¶å°è¯•ï¼Ÿå³ä½¿çœ‹ä¸Šå»applyï¼ˆaï¼Œbï¼‰å’Œapplyï¼ˆdï¼Œeï¼‰å¯ä»¥å¹¶è¡Œã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443282,"discussion_content":"ç†è®ºä¸Šï¼Œå¦‚æœä¸¤ä¸ªçº¿ç¨‹ä¼˜å…ˆçº§ç›¸åŒï¼Œæ“ä½œç³»ç»Ÿèƒ½ä¿è¯ä»–ä»¬æœºä¼šå‡ç­‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552623617,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1583859,"avatar":"https://static001.geekbang.org/account/avatar/00/18/2a/f3/b9607a15.jpg","nickname":"ç»…å£«","note":"","ucode":"5B58E5A958F489","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3946,"discussion_content":"aè½¬b,bè½¬açš„é—®é¢˜ï¼šç¬¬ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œaè½¬bï¼Œç¬¬äºŒä¸ªçº¿ç¨‹æ‰§è¡Œbè½¬aï¼Œç¬¬ä¸€ï¼Œç¬¬äºŒä¸ªçº¿ç¨‹åŒæ—¶åˆ°è¾¾transferæ–¹æ³•è¿›è¡Œè½¬è´¦\nçš„æ—¶å€™ï¼Œactræ˜¯å•ä¾‹çš„ï¼Œå‡å¦‚ç¬¬ä¸€ä¸ªçº¿ç¨‹å…ˆæ‰§è¡Œï¼Œè¿›å…¥applyçš„æ–¹æ³•ï¼Œç¬¬ä¸€æ¬¡å°±ä¼šè¿”å›true,ç„¶åè¿›å…¥tryçš„æ–¹æ³•ï¼Œ\n è¿™é‡Œæœ‰ä¸€ä¸ªç–‘é—®ï¼Ÿç¬¬äºŒä¸ªçº¿ç¨‹è¿›å…¥applyçš„æ–¹æ³•çš„æ—¶å€™ï¼Œalsè¿™ä¸ªæ•°ç»„é‡Œé¢æ˜¯nullçš„è¿˜æ˜¯å·²ç»æœ‰äº†aå’Œbä¸¤ä¸ªå¯¹è±¡äº†\nä»£ç æœ‰ä¸€ä¸ªå½’è¿˜èµ„æºçš„æ“ä½œï¼Œæ„æ€æ˜¯ï¼Œçº¿ç¨‹ä¸€ä¸æ‰§è¡Œå®Œï¼Œèµ„æºæ˜¯ä¸ä¼šå½’è¿˜çš„ï¼Œä¹Ÿå°±æ˜¯è¯´çº¿ç¨‹äºŒï¼Œåˆ°è¾¾applyçš„æ–¹æ³•å\n ä¼šè¿”å›true,é‚£çº¿ç¨‹äºŒè¿›å…¥tryå²‚ä¸æ˜¯åˆä¼šé€ æˆæ­»é”\nå¸Œæœ›å¸®å°ç™½æŒ‡æ­£ï¼Œæ„Ÿè°¢ğŸ™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564999500,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1361746,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c7/52/c5adf218.jpg","nickname":"å–œæ¬¢åœ°çƒçš„é˜¿åŸ¹åŒå­¦","note":"","ucode":"5F97037585F857","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1583859,"avatar":"https://static001.geekbang.org/account/avatar/00/18/2a/f3/b9607a15.jpg","nickname":"ç»…å£«","note":"","ucode":"5B58E5A958F489","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":91280,"discussion_content":"apply()æ–¹æ³•æœ‰é”ï¼Œåªæœ‰Açº¿ç¨‹æ‰§è¡Œå®Œè½¬è´¦è¿‡åï¼Œæ‰ä¼šæ‰§è¡Œfinallyä¸­çš„actr.free(this, target)æ–¹æ³•ï¼Œè¿™æ—¶Bçº¿ç¨‹æ‰§è¡Œapply()æ‰ä¼šè¿”å›true","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576824210,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":3946,"ip_address":""},"score":91280,"extra":""}]}]},{"had_liked":false,"id":76109,"user_name":"shangyu","can_delete":false,"product_type":"c1","uid":1011389,"ip_address":"","ucode":"13A26E53508D75","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6e/bd/b83ad32d.jpg","comment_is_top":false,"comment_ctime":1552532170,"is_pvip":true,"replies":[{"id":"27738","content":"ä½ å‰å®³ğŸ‘<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552537451,"ip_address":"","comment_id":76109,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552532170","product_id":100023901,"comment_content":"åŒæ ·ï¼Œç°å®ä¸–ç•Œé‡Œçš„é—®é¢˜ ï¼Œä¹Ÿå¯ä»¥å‚è€ƒè½¯ä»¶ä¸–ç•Œé‡Œçš„è§£å†³æ€è·¯","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443182,"discussion_content":"ä½ å‰å®³ğŸ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552537451,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76088,"user_name":"é äººå“å»èµ¢","can_delete":false,"product_type":"c1","uid":1301286,"ip_address":"","ucode":"7A20F9EBE847E1","user_header":"https://static001.geekbang.org/account/avatar/00/13/db/26/54f2c164.jpg","comment_is_top":false,"comment_ctime":1552529819,"is_pvip":false,"replies":[{"id":"27797","content":"æ˜¯çš„ï¼Œè¦çœ‹å…·ä½“åœºæ™¯","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552567094,"ip_address":"","comment_id":76088,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552529819","product_id":100023901,"comment_content":"æˆ‘è§‰å¾—while(!actr.apply(this, target));å’Œsynchronized(Account.class)ä¹Ÿä½¿ç”¨ä¸­ï¼ŒAccountåªæœ‰ä¸€ä¸ªè½¬è´¦æ“ä½œå…¶å®ä¸¤è€…å·®ä¸å¤šã€‚ä½†æ˜¯å¦‚æœAccountä¸­è¿˜æœ‰ä¿®æ”¹å¯†ç ï¼ŒæŸ¥è¯¢ä½™é¢ç­‰ä¹Ÿéœ€è¦åŠ é”çš„æ“ä½œï¼Œé‚£å°±ä¸ä¸€æ ·äº†ã€‚åŠ é”Accountçœ‹ä¼¼ç®€å•æ˜“æ‡‚ä¹Ÿèƒ½ä¿è¯å®‰å…¨ï¼Œä½†æ˜¯æ•ˆç‡ä¸æ•¢æ­ç»´ä½ æ¥ä¸ªç›¸å…³æ“ä½œæˆ‘å°±å…¨ç»™ä½ é”ä¸Šï¼Œè€Œå‰è€…è½¬è´¦å¯¹åº”è½¬è´¦çš„æ“ä½œï¼Œä¿®æ”¹å¯†ç å¯¹åº”ä¿®æ”¹å¯†ç çš„æ“ä½œï¼Œçœ‹ä½™é¢å¯¹åº”ä½™é¢æ“ä½œå½¼æ­¤ç‹¬ç«‹ï¼Œä¸ç”¨å‡ºç°Aæ“ä½œç­‰å¾…Bæ“ä½œå®Œåœºçš„è¿™ç§çŠ¶å†µã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443173,"discussion_content":"æ˜¯çš„ï¼Œè¦çœ‹å…·ä½“åœºæ™¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552567094,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75958,"user_name":"å˜å­","can_delete":false,"product_type":"c1","uid":1273348,"ip_address":"","ucode":"E6FB6E97710C89","user_header":"https://static001.geekbang.org/account/avatar/00/13/6e/04/94677062.jpg","comment_is_top":false,"comment_ctime":1552498528,"is_pvip":false,"replies":[{"id":"27681","content":"æå®¢æ—¶é—´çš„åŒå­¦ç”¨pptç”»çš„<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552523905,"ip_address":"","comment_id":75958,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552498528","product_id":100023901,"comment_content":"æƒ³é—®ä¸€ä¸‹è€å¸ˆï¼Œç”¨çš„æ˜¯ä»€ä¹ˆåšå›¾ç¥å™¨ï¼Ÿåˆå¥½çœ‹åˆæ¸…æ™°ï¼","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443105,"discussion_content":"æå®¢æ—¶é—´çš„åŒå­¦ç”¨pptç”»çš„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552523905,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75914,"user_name":"è™è™â¤ï¸","can_delete":false,"product_type":"c1","uid":1086535,"ip_address":"","ucode":"157F261E80291A","user_header":"https://static001.geekbang.org/account/avatar/00/10/94/47/75875257.jpg","comment_is_top":false,"comment_ctime":1552491222,"is_pvip":false,"replies":[{"id":"27732","content":"å…¶ä»–åŒå­¦è¯´çš„æ˜¯applyé‡Œä¹Ÿæœ‰ä¸€æŠŠé”ï¼Œé‚£æŠŠé”æ‰€æœ‰è½¬è´¦éƒ½è¦å»ç«äº‰<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552536567,"ip_address":"","comment_id":75914,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552491222","product_id":100023901,"comment_content":"åœ¨å¹¶è¡Œæ‰§è¡Œ A-&gt;B B-&gt;C çš„è½¬è´¦è¿‡ç¨‹ä¸­ï¼ŒA-&gt;Bçš„è½¬è´¦è¿‡ç¨‹ï¼Œä¼šåœ¨while(!actr.apply(this, target)); è¿™ä¸ªå¾ªç¯ä¸­ï¼Œé˜»å¡B-&gt;Cçš„è½¬è´¦çº¿ç¨‹ã€‚<br>ç„¶è€Œåœ¨å¹¶è¡Œæ‰§è¡Œ A-&gt;B C-&gt;Dçš„è½¬è´¦è¿‡ç¨‹ä¸­ï¼Œæ˜¯ä¸ä¼šç›¸äº’é˜»å¡çš„ã€‚æ‰€è°“çš„é”äº†æ‰€æœ‰è´¦æˆ·çš„è¯´æ³•ï¼Œæˆ‘ä¸æ˜¯å¾ˆç†è§£ã€‚<br><br>åè§‚ synchronized(Account.class)ï¼Œ ä¸ä»…åœ¨ A-&gt;B C-&gt;Dçš„è½¬è´¦è¿‡ç¨‹ä¸­ä¸èƒ½å¹¶è¡Œã€‚ç”šè‡³ä¼šä¸²è¡Œå…¶ä»–éœ€è¦è·å¾—Account.classè¿™ä¸ªé”çš„æ‰€æœ‰æ“ä½œã€‚ä¾‹å¦‚æŸ¥çœ‹ä½™é¢ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443087,"discussion_content":"å…¶ä»–åŒå­¦è¯´çš„æ˜¯applyé‡Œä¹Ÿæœ‰ä¸€æŠŠé”ï¼Œé‚£æŠŠé”æ‰€æœ‰è½¬è´¦éƒ½è¦å»ç«äº‰\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552536567,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75642,"user_name":"é±¼å®¢","can_delete":false,"product_type":"c1","uid":1070928,"ip_address":"","ucode":"5233FF41D88638","user_header":"https://static001.geekbang.org/account/avatar/00/10/57/50/82097d59.jpg","comment_is_top":false,"comment_ctime":1552442750,"is_pvip":false,"replies":[{"id":"27606","content":"ä¸€æ—¦è¿›æ­¥ç­‰å¾…é˜Ÿåˆ—ï¼Œè¿˜æœ‰æœºä¼šæ‰§è¡Œwaitå—ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552454958,"ip_address":"","comment_id":75642,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552442750","product_id":100023901,"comment_content":"çœ‹äº†ä¸‹ä¸€ç«  å¯¹è¿™ä¸€ç« çš„synchronizeä¸èƒ½ä¸»åŠ¨é‡Šæ”¾èµ„æºè¡¨ç¤ºä¸è§£ éš¾é“waitä¸æ˜¯ä¸»åŠ¨é‡Šæ”¾èµ„æºå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442970,"discussion_content":"ä¸€æ—¦è¿›æ­¥ç­‰å¾…é˜Ÿåˆ—ï¼Œè¿˜æœ‰æœºä¼šæ‰§è¡Œwaitå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552454958,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75631,"user_name":"k2b_dll","can_delete":false,"product_type":"c1","uid":1391618,"ip_address":"","ucode":"0E4FD51E2039E5","user_header":"https://static001.geekbang.org/account/avatar/00/15/3c/02/d9a8c8ce.jpg","comment_is_top":false,"comment_ctime":1552441753,"is_pvip":false,"replies":[{"id":"27635","content":"å†æƒ³æƒ³ä¸ºä»€ä¹ˆä¼šæ­»é”å§ï¼Œå°±æ˜¯æ–‡ä¸­çš„ä¾‹å­ï¼Œè¯»æ‡‚ä¸ºä»€ä¹ˆä¼šæ­»é”å°±çŸ¥é“ç­”æ¡ˆäº†<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552479013,"ip_address":"","comment_id":75631,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552441753","product_id":100023901,"comment_content":"ç ´åå¾ªç¯æ¡ä»¶é‚£ä¸ªè§£å†³æ–¹æ¡ˆé‡Œï¼Œ accounté‡Œçš„id,æœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿ æŒ‰é¡ºåºåŠ é” è·ŸåŸæ¥çš„é”ä¸¤æ¬¡æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ  ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442966,"discussion_content":"å†æƒ³æƒ³ä¸ºä»€ä¹ˆä¼šæ­»é”å§ï¼Œå°±æ˜¯æ–‡ä¸­çš„ä¾‹å­ï¼Œè¯»æ‡‚ä¸ºä»€ä¹ˆä¼šæ­»é”å°±çŸ¥é“ç­”æ¡ˆäº†\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552479013,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75375,"user_name":"æœºé‡å·","can_delete":false,"product_type":"c1","uid":1105053,"ip_address":"","ucode":"A2940DE77BCAEA","user_header":"https://static001.geekbang.org/account/avatar/00/10/dc/9d/e20b37d7.jpg","comment_is_top":false,"comment_ctime":1552384396,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552384396","product_id":100023901,"comment_content":"æˆ‘æŒ‰ç…§ä½ å†™çš„ä»£ç while(actr.apply(this, target));<br>ç¼–è¯‘å™¨æŠ¥é”™","like_count":0},{"had_liked":false,"id":75371,"user_name":"æœºé‡å·","can_delete":false,"product_type":"c1","uid":1105053,"ip_address":"","ucode":"A2940DE77BCAEA","user_header":"https://static001.geekbang.org/account/avatar/00/10/dc/9d/e20b37d7.jpg","comment_is_top":false,"comment_ctime":1552384154,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552384154","product_id":100023901,"comment_content":"å­¦ä¹ ä¸­","like_count":0},{"had_liked":false,"id":75216,"user_name":"æçš®çš®çš®çš®çš®","can_delete":false,"product_type":"c1","uid":1200281,"ip_address":"","ucode":"3BF1DEE4A12359","user_header":"https://static001.geekbang.org/account/avatar/00/12/50/99/44378317.jpg","comment_is_top":false,"comment_ctime":1552365607,"is_pvip":false,"replies":[{"id":"27464","content":"è¿™æ‰æ˜¯ç§‘å­¦å®¶","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552393108,"ip_address":"","comment_id":75216,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552365607","product_id":100023901,"comment_content":"Coffmanæ€»ç»“çš„å¾ˆåˆ°ä½ğŸ˜„","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442825,"discussion_content":"è¿™æ‰æ˜¯ç§‘å­¦å®¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552393108,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75201,"user_name":"Smile","can_delete":false,"product_type":"c1","uid":1125189,"ip_address":"","ucode":"0617032294DC43","user_header":"https://static001.geekbang.org/account/avatar/00/11/2b/45/e8f64725.jpg","comment_is_top":false,"comment_ctime":1552362848,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552362848","product_id":100023901,"comment_content":"ä¹‹å‰æ²¡æœ‰æƒ³åˆ°é€šè¿‡æ¬¡åºæ¥é‡æ–°è°ƒæ•´è·å–é”çš„æ¬¡åºï¼Œä»è€Œè§£å†³å¾ªåç­‰å¾…é—®é¢˜ï¼Œå­¦åˆ°äº†","like_count":0},{"had_liked":false,"id":75058,"user_name":"Sunny_Lu","can_delete":false,"product_type":"c1","uid":1453000,"ip_address":"","ucode":"4327DE41D7DB28","user_header":"https://static001.geekbang.org/account/avatar/00/16/2b/c8/61eeae65.jpg","comment_is_top":false,"comment_ctime":1552352686,"is_pvip":false,"replies":[{"id":"27456","content":"ä¸æ˜¯å•ä¾‹ï¼Œä½†æ˜¯åŒä¸€ä¸ªè´¦æˆ·åªæœ‰ä¸€ä¸ªå®ä¾‹<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552390211,"ip_address":"","comment_id":75058,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552352686","product_id":100023901,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘æœ‰ä¸ªç–‘æƒ‘ï¼ŒAccountå®ä¾‹éš¾é“æ°¸è¿œæ˜¯å•ä¾‹çš„ä¹ˆï¼Ÿç°å®ä¸­å¾€å¾€é’ˆå¯¹è½¬è´¦æ“ä½œä¼šnew ä¸€ä¸ªçº¿ç¨‹ç§æœ‰çš„Accountå¯¹è±¡å§ï¼Ÿé‚£è¿™æ ·é”æ˜¯æ— æ•ˆçš„ï¼Œè¿˜æ˜¯è¯´è€å¸ˆæ‚¨è¯´çš„åœºæ™¯å°±æ˜¯è¦ç¡®ä¿é¡¹ç›®ä¸€å¯åŠ¨ï¼Œæ¯ä¸€ä¸ªAccountéƒ½åªèƒ½æ˜¯å•ä¾‹çš„ï¼Œå¯èƒ½ç†è§£æœ‰è¯¯ï¼Œè¯·è€å¸ˆæŒ‡è¯ï¼","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442790,"discussion_content":"ä¸æ˜¯å•ä¾‹ï¼Œä½†æ˜¯åŒä¸€ä¸ªè´¦æˆ·åªæœ‰ä¸€ä¸ªå®ä¾‹\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552390211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74762,"user_name":"Mark","can_delete":false,"product_type":"c1","uid":1125474,"ip_address":"","ucode":"01437C4021E82E","user_header":"https://static001.geekbang.org/account/avatar/00/11/2c/62/b5fcbf2b.jpg","comment_is_top":false,"comment_ctime":1552293408,"is_pvip":false,"replies":[{"id":"27267","content":"æŒæœ‰çš„æ˜¯åŒä¸€ä¸ªï¼Œä»£ç æ³¨é‡Šé‡Œæäº†ï¼Œactræ˜¯å•ä¾‹ï¼Œåˆ›å»ºå•ä¾‹çš„ä»£ç è¿˜æ˜¯ä¸å†™çš„å¥½ï¼Œå’Œè¿™èŠ‚çš„å†…å®¹æ²¡å…³ç³»","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552305889,"ip_address":"","comment_id":74762,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552293408","product_id":100023901,"comment_content":"åº”è¯¥ä¸èƒ½ï¼Œæœ‰ä¸€è¡Œæ²¡çœ‹æ˜ç™½<br>Accountç±»ä¸­å­—æ®µAllocator actråœ¨å“ªé‡Œå®ä¾‹åŒ–çš„ï¼Œè¿™åº”è¯¥å…³ç³»åˆ°ç”³è¯·èµ„æºæ˜¯å¦å®‰å…¨å§ã€‚<br><br>&#47; è½¬è´¦<br>  void transfer(Account target, int amt){<br>    &#47;&#47; ä¸€æ¬¡æ€§ç”³è¯·è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·ï¼Œç›´åˆ°æˆåŠŸ<br>    while(!actr.apply(this, target))<br>      ï¼›<br>  ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ  å…³é”®è¿™é‡Œæˆ‘æ²¡çœ‹æ˜ç™½ Allocator actr åœ¨å“ªé‡Œå®ä¾‹åŒ–çš„ï¼Œçº¿ç¨‹T1å’ŒT2ï¼ŒæŒæœ‰çš„æ˜¯åŒä¸€ä¸ªAllocatorå®ä¾‹å˜›ï¼Ÿï¼Ÿ<br>    try{<br>      &#47;&#47; é”å®šè½¬å‡ºè´¦æˆ·<br>      synchronized(this){              <br>        &#47;&#47; é”å®šè½¬å…¥è´¦æˆ·","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442672,"discussion_content":"æŒæœ‰çš„æ˜¯åŒä¸€ä¸ªï¼Œä»£ç æ³¨é‡Šé‡Œæäº†ï¼Œactræ˜¯å•ä¾‹ï¼Œåˆ›å»ºå•ä¾‹çš„ä»£ç è¿˜æ˜¯ä¸å†™çš„å¥½ï¼Œå’Œè¿™èŠ‚çš„å†…å®¹æ²¡å…³ç³»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552305889,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74677,"user_name":"Mark","can_delete":false,"product_type":"c1","uid":1125474,"ip_address":"","ucode":"01437C4021E82E","user_header":"https://static001.geekbang.org/account/avatar/00/11/2c/62/b5fcbf2b.jpg","comment_is_top":false,"comment_ctime":1552279314,"is_pvip":false,"replies":[{"id":"27245","content":"ç”³è¯·å®Œabï¼Œè¿˜èƒ½ç”³è¯·baå—ï¼Ÿ<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552284532,"ip_address":"","comment_id":74677,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552279314","product_id":100023901,"comment_content":"ä»£ç 31-35æ­¥ä¸æ˜¯åŸå­çš„å•Šï¼Œ31æ­¥ä¹‹åï¼Œè·å–åˆ°ä¸¤ä¸ªèµ„æºçš„alsé›†åˆå¯è¢«å…¶å®ƒçº¿ç¨‹æ“ä½œå•Šã€‚<br>æœ€å¼€å§‹çš„T1å’ŒT2çº¿ç¨‹åˆ†åˆ«ABå¯¹è±¡æ­»é”æ²¡æœ‰è§£å†³ï¼Œåªæ˜¯é™ä½äº†å¯æ€§ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442648,"discussion_content":"ç”³è¯·å®Œabï¼Œè¿˜èƒ½ç”³è¯·baå—ï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552284532,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74617,"user_name":"Mark","can_delete":false,"product_type":"c1","uid":1125474,"ip_address":"","ucode":"01437C4021E82E","user_header":"https://static001.geekbang.org/account/avatar/00/11/2c/62/b5fcbf2b.jpg","comment_is_top":false,"comment_ctime":1552267964,"is_pvip":false,"replies":[{"id":"27239","content":"ä¸¾ä¸ªä¾‹å­ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552277699,"ip_address":"","comment_id":74617,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552267964","product_id":100023901,"comment_content":"ç ´åå ç”¨ä¸”ç­‰å¾…ç¤ºä¾‹ä»£ç æˆ‘è§‰å¾—æœ‰ç‚¹å„¿é—®é¢˜ï¼ŒAllocatorå’Œaccounté‡Œéƒ½æ˜¯å¯¹è±¡çº§åˆ«é”ï¼Œaccocatoråœ¨returnä¹‹åé‡Šæ”¾äº†allocatorå¯¹è±¡é”ï¼Œåˆ«çš„çº¿ç¨‹å¯ä»¥ç»§ç»­è·å–èµ„æºã€‚accountä¾ç„¶ä¼šæœ‰æ­»é”å¯èƒ½ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442621,"discussion_content":"ä¸¾ä¸ªä¾‹å­ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552277699,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74613,"user_name":"ä¹¦ç­–ç¨ æµŠ","can_delete":false,"product_type":"c1","uid":1307497,"ip_address":"","ucode":"A29875CE15FDA3","user_header":"https://static001.geekbang.org/account/avatar/00/13/f3/69/7039d03f.jpg","comment_is_top":false,"comment_ctime":1552267660,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552267660","product_id":100023901,"comment_content":"æ€è€ƒé¢˜ï¼Œ.classçš„æ–¹å¼æ€§èƒ½æ›´å·®ï¼ŒæŠŠæ‰€æœ‰ä¸ç›¸å…³çš„æ“ä½œä¹Ÿé”ä½äº†ã€‚","like_count":0},{"had_liked":false,"id":74363,"user_name":"Php test","can_delete":false,"product_type":"c1","uid":1107151,"ip_address":"","ucode":"895C6B484FCB53","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIS0nk3C1ibMgufXryCzYkrL5bpO25fXPqbSqodGibZqOvbY8m5HEZ8LG4gTDmPKsIj3uK9Z3ibiceF1g/132","comment_is_top":false,"comment_ctime":1552202764,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552202764","product_id":100023901,"comment_content":"å¾ªç¯è·å–é”ï¼Œå¦‚æœçº¿ç¨‹å°‘åˆ™å“åº”å¿«ï¼Œå¦‚æœçº¿ç¨‹å¤šåˆ™å¤§é‡çº¿ç¨‹æ¶ˆè€—æ€§èƒ½ã€‚","like_count":0},{"had_liked":false,"id":74345,"user_name":"å¤©æ¶¯ç…®é…’","can_delete":false,"product_type":"c1","uid":1241127,"ip_address":"","ucode":"EF9516EC878E4C","user_header":"https://static001.geekbang.org/account/avatar/00/12/f0/27/8b72141c.jpg","comment_is_top":false,"comment_ctime":1552196063,"is_pvip":false,"replies":[{"id":"27179","content":"æœ‰é“ç†ï¼ï¼ï¼ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552200884,"ip_address":"","comment_id":74345,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552196063","product_id":100023901,"comment_content":"æ¡ˆä¾‹ä¸­ä¸ºå•¥ä¸æŠŠalså’Œapply(),free()éƒ½è®¾ä¸ºstaticå‘¢ï¼Ÿæ„Ÿè§‰ä½œç”¨æ˜¯ä¸€æ ·çš„ï¼Œä»£ç ç®€æ´äº›","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442542,"discussion_content":"æœ‰é“ç†ï¼ï¼ï¼ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552200884,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74341,"user_name":"åŒ…å­","can_delete":false,"product_type":"c1","uid":1089345,"ip_address":"","ucode":"6CC4EBB8CD3924","user_header":"https://static001.geekbang.org/account/avatar/00/10/9f/41/82306dfe.jpg","comment_is_top":false,"comment_ctime":1552195389,"is_pvip":false,"replies":[{"id":"27177","content":"å’Œcasè¿˜ä¸ä¸€æ ·ï¼Œapplyé‡Œé¢è¿˜æ˜¯æœ‰synchronizedçš„ã€‚ä¹Ÿå°±æ˜¯è¯´applyè¿˜æ˜¯ä¼šé˜»å¡çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552200801,"ip_address":"","comment_id":74341,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552195389","product_id":100023901,"comment_content":"è€å¸ˆï¼Œè¯¾åé¢˜ï¼Œè¿™ç§æ–¹å¼é¿å…äº†çº¿ç¨‹åå¤åˆ‡æ¢ï¼Œæœ‰æ•ˆå‡å°‘å†…å­˜åˆ‡æ¢çš„å¼€é”€ã€‚å°±åƒcasä¸€æ ·ã€‚<br>æ˜¯è¿™æ ·å—","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442539,"discussion_content":"å’Œcasè¿˜ä¸ä¸€æ ·ï¼Œapplyé‡Œé¢è¿˜æ˜¯æœ‰synchronizedçš„ã€‚ä¹Ÿå°±æ˜¯è¯´applyè¿˜æ˜¯ä¼šé˜»å¡çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552200801,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74329,"user_name":"ç½—","can_delete":false,"product_type":"c1","uid":1259157,"ip_address":"","ucode":"C71E4413130A66","user_header":"https://static001.geekbang.org/account/avatar/00/13/36/95/a5358127.jpg","comment_is_top":false,"comment_ctime":1552190572,"is_pvip":false,"replies":[{"id":"27176","content":"è¿™ä¸ªä¾‹å­é‡Œå¯ä»¥ï¼Œå› ä¸ºé™¤æ­¤ä¹‹å¤–æ²¡æœ‰å…¶ä»–è·¯å¾„èƒ½å¤Ÿè®¿é—®åˆ°thisã€‚å¦‚æœè¿˜æœ‰åˆ«çš„æ–¹æ³•ï¼Œä¾‹å¦‚å–æ¬¾æ“ä½œï¼Œé‚£å°±ä¸å¯ä»¥äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552200728,"ip_address":"","comment_id":74329,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552190572","product_id":100023901,"comment_content":"åœ¨ç¬¬ä¸€ç§æ–¹å¼ä¸­ï¼š<br>class Account {<br>    ... ... <br>    while(!actr.apply(this, target))<br>      ï¼›<br>    try{<br>      &#47;&#47; é”å®šè½¬å‡ºè´¦æˆ·<br>      synchronized(this){              <br>        &#47;&#47; é”å®šè½¬å…¥è´¦æˆ·<br>        synchronized(target){    <br>\t\t<br>ï½<br><br>æˆ‘ä»¬ä½¿ç”¨whileå¾ªç¯è·å–é”ï¼Œåé¢çš„ synchronized(this)ä¸synchronized(target)æ˜¯ä¸æ˜¯å°±å¯ä»¥å»æ‰äº†å‘¢? ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442534,"discussion_content":"è¿™ä¸ªä¾‹å­é‡Œå¯ä»¥ï¼Œå› ä¸ºé™¤æ­¤ä¹‹å¤–æ²¡æœ‰å…¶ä»–è·¯å¾„èƒ½å¤Ÿè®¿é—®åˆ°thisã€‚å¦‚æœè¿˜æœ‰åˆ«çš„æ–¹æ³•ï¼Œä¾‹å¦‚å–æ¬¾æ“ä½œï¼Œé‚£å°±ä¸å¯ä»¥äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552200728,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74285,"user_name":"éšé£è€Œé€","can_delete":false,"product_type":"c1","uid":1447169,"ip_address":"","ucode":"4E4D46905697AB","user_header":"https://static001.geekbang.org/account/avatar/00/16/15/01/927d96e5.jpg","comment_is_top":false,"comment_ctime":1552178043,"is_pvip":false,"replies":[{"id":"27167","content":"è¿™ç§æƒ…å†µä¸‹ï¼ŒAè½¬Bèƒ½æˆåŠŸï¼Œæ‰€ä»¥æœ€ç»ˆä¼šé‡Šæ”¾Aé”ï¼Œä¹‹åCè½¬Aå°±èƒ½æˆåŠŸäº†ã€‚æ‰€ä»¥ä¸ä¼šæ­»é”ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552190309,"ip_address":"","comment_id":74285,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552178043","product_id":100023901,"comment_content":"è€å¸ˆï¼Œç°åœ¨çš„åµŒå¥—é”æ–¹æ¡ˆï¼Œå¯¹äºAè½¬Bï¼ŒCè½¬Açš„æƒ…å†µæ˜¯ä¸æ˜¯ä¹Ÿå¯èƒ½è¢«é”ä½äº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442510,"discussion_content":"è¿™ç§æƒ…å†µä¸‹ï¼ŒAè½¬Bèƒ½æˆåŠŸï¼Œæ‰€ä»¥æœ€ç»ˆä¼šé‡Šæ”¾Aé”ï¼Œä¹‹åCè½¬Aå°±èƒ½æˆåŠŸäº†ã€‚æ‰€ä»¥ä¸ä¼šæ­»é”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552190309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74281,"user_name":"å¯†ç 123456","can_delete":false,"product_type":"c1","uid":1126593,"ip_address":"","ucode":"9889463CC0EA71","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/c1/2dde6700.jpg","comment_is_top":false,"comment_ctime":1552177653,"is_pvip":false,"replies":[{"id":"27174","content":"èŒƒå›´ä¸åŒï¼Œä¸è¿‡æ€§èƒ½æ˜¯å¦æœ‰ä¼˜åŠ¿ï¼Œè¦çœ‹åœºæ™¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552191098,"ip_address":"","comment_id":74281,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552177653","product_id":100023901,"comment_content":"ä¼˜åŠ¿æ˜¯æœ‰çš„ï¼Œç›´æ¥é”classæ–‡ä»¶ï¼Œä¼šé˜»å¡æ‰€æœ‰çš„åŒæ­¥æ–¹æ³•ã€‚ä½¿ç”¨ä¸€ä¸ªæ–°å¯¹è±¡æ¥å®ç°åŒæ­¥ï¼Œä»…ä»…é”ä½çš„è´¦æˆ·è½¬è´¦ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442508,"discussion_content":"èŒƒå›´ä¸åŒï¼Œä¸è¿‡æ€§èƒ½æ˜¯å¦æœ‰ä¼˜åŠ¿ï¼Œè¦çœ‹åœºæ™¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552191098,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74164,"user_name":"æ³¢æ³¢","can_delete":false,"product_type":"c1","uid":1155827,"ip_address":"","ucode":"4344D9F4486D42","user_header":"https://static001.geekbang.org/account/avatar/00/11/a2/f3/aa504fa6.jpg","comment_is_top":false,"comment_ctime":1552123028,"is_pvip":false,"replies":[{"id":"27127","content":"åŸºæœ¬éƒ½ä¼šç”¨ä¼ªç ï¼ŒåŸå› æ˜¯å­—æ•°æ›´å°‘ã€‚æ‰‹æœºå±å¹•å¤ªå°ï¼Œæ¢è¡Œåå¾ˆéš¾çœ‹æ¸…æ¥šã€‚è‡³äºå…¶ä»–çš„æˆ‘å°½åŠ›å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552137814,"ip_address":"","comment_id":74164,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552123028","product_id":100023901,"comment_content":"è€å¸ˆæä¾›çš„æ€è·¯ä¸é”™ï¼Œä½†æ˜¯è´´å‡ºæ¥çš„ä»£ç ï¼Œä¸å¤Ÿä¸¥è°¨ï¼Œé¦–å…ˆå•ä¾‹åˆå§‹åŒ–æ²¡ä½“ç°å‡ºæ¥ï¼Œç„¶åå¾ªç¯åˆ¤æ–­é”™è¯¯ã€‚å»ºè®®è€å¸ˆä»¥åè´´å‡ºæ¥çš„ä»£ç ï¼Œå¯ä»¥å…ˆæ‰§è¡Œï¼Œç¡®ä¿æ²¡é—®é¢˜åå†è´´å‡ºæ¥ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442475,"discussion_content":"åŸºæœ¬éƒ½ä¼šç”¨ä¼ªç ï¼ŒåŸå› æ˜¯å­—æ•°æ›´å°‘ã€‚æ‰‹æœºå±å¹•å¤ªå°ï¼Œæ¢è¡Œåå¾ˆéš¾çœ‹æ¸…æ¥šã€‚è‡³äºå…¶ä»–çš„æˆ‘å°½åŠ›å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552137814,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74093,"user_name":"kevin","can_delete":false,"product_type":"c1","uid":1237471,"ip_address":"","ucode":"5F6D82F118C6F6","user_header":"https://static001.geekbang.org/account/avatar/00/12/e1/df/6e6a4c6b.jpg","comment_is_top":false,"comment_ctime":1552102406,"is_pvip":false,"replies":[{"id":"27104","content":"ä½ ä¹Ÿå‘ç°äº†ä¸€ä¸ªå¤§bugï¼Œæ„Ÿè°¢æ„Ÿè°¢ï¼Œå·²ç»ä¿®å¤äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552113953,"ip_address":"","comment_id":74093,"utype":1}],"discussion_count":0,"race_medal":0,"score":"1552102406","product_id":100023901,"comment_content":"while(actr.apply(this, target))<br><br>è¿™é‡Œæ˜¯ç­‰å¾…å®ˆæŠ¤æ¡ä»¶æˆç«‹ï¼Œä¸æˆç«‹å¾ªç¯å°è¯•ï¼ŒapplyæˆåŠŸååº”è¯¥æ˜¯é€€å‡ºï¼Œæ‰§è¡Œåç»­æ“ä½œ<br>æ‰€ä»¥æ˜¯ä¸æ˜¯åº”è¯¥æ”¹æˆ<br><br>while( !actr.apply(this, target) )","like_count":0},{"had_liked":false,"id":74085,"user_name":"èŠ±è›‹å£³","can_delete":false,"product_type":"c1","uid":1111006,"ip_address":"","ucode":"917BB219120BD2","user_header":"https://static001.geekbang.org/account/avatar/00/10/f3/de/c6509355.jpg","comment_is_top":false,"comment_ctime":1552101121,"is_pvip":false,"replies":[{"id":"27100","content":"æˆ‘å·²ç»å¾ˆåŠªåŠ›çœ‹äº†ï¼Œè¿˜æ˜¯æ²¡çœ‹æ‡‚ï¼Œæœ€å¥½æ˜¯ä»£ç åŒ–ä¸€ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552113758,"ip_address":"","comment_id":74085,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552101121","product_id":100023901,"comment_content":"å¦‚æœalloctorå•ä¾‹å¯¹è±¡åªç”¨åœ¨è½¬è´¦ä¸šåŠ¡ä¸­ï¼Œé‚£ä¹ˆé”çš„èŒƒå›´è‚¯å®šæ²¡æœ‰é”ä½account.classèŒƒå›´å¤§ï¼æˆ‘è¿™é‡Œæœ‰ä¸€ä¸ªä¸šåŠ¡ä¸Šçš„ç–‘é—®ï¼Œå¦‚æœæƒ³è®©åŒä¸€ä¸ªç”¨æˆ·çš„è´¦æˆ·æ“ä½œä¸Šé”ï¼Œä¸åŒç”¨æˆ·ä¹‹é—´è½¬è´¦ä¸šåŠ¡ä¸ç”¨äº’æ–¥ï¼Œè¿™è¯¥å¦‚ä½•æ“ä½œï¼Ÿå‡è®¾æ¯æ¬¡æ“ä½œè¯·æ±‚éƒ½æ˜¯ä¸€ä¸ªæ–°çš„accountå¯¹è±¡ï¼Œå¦‚ä½•ç¡®ä¿ä¸¤ä¸ªä¸åŒçº¿ç¨‹å¯¹ç”¨æˆ·aè´¦æˆ·çš„æ“ä½œæ˜¯äº’æ–¥çš„ï¼Œæ˜¯ä¸æ˜¯åªèƒ½é™åˆ¶åŒä¸€ä¸ªç”¨æˆ·è´¦æˆ·æ“ä½œæ˜¯åŒä¸€ä¸ªaccountå¯¹è±¡ï¼Ÿä¸çŸ¥é“æˆ‘è¿™ä¸ªé—®é¢˜æœ‰æ²¡æœ‰è¡¨è¾¾æ¸…æ¥š","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442433,"discussion_content":"æˆ‘å·²ç»å¾ˆåŠªåŠ›çœ‹äº†ï¼Œè¿˜æ˜¯æ²¡çœ‹æ‡‚ï¼Œæœ€å¥½æ˜¯ä»£ç åŒ–ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552113758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74083,"user_name":"å°å½—æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1423047,"ip_address":"","ucode":"86133944E8AEAC","user_header":"https://static001.geekbang.org/account/avatar/00/15/b6/c7/db31ecba.jpg","comment_is_top":false,"comment_ctime":1552100917,"is_pvip":false,"replies":[{"id":"27099","content":"æ˜¯æœ‰ç‚¹åƒï¼Œä¸è¿‡è¿˜ä¸æ˜¯cas","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552113549,"ip_address":"","comment_id":74083,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552100917","product_id":100023901,"comment_content":"æœ‰ç‚¹åƒè‡ªæ—‹+cas","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442432,"discussion_content":"æ˜¯æœ‰ç‚¹åƒï¼Œä¸è¿‡è¿˜ä¸æ˜¯cas","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552113549,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74074,"user_name":"å°é»„","can_delete":false,"product_type":"c1","uid":1049839,"ip_address":"","ucode":"519BF8191D3A6B","user_header":"https://static001.geekbang.org/account/avatar/00/10/04/ef/fea0fdbd.jpg","comment_is_top":false,"comment_ctime":1552098243,"is_pvip":false,"replies":[{"id":"27098","content":"æ˜¯çš„ï¼Œæˆ‘ä¹Ÿè§‰å¾—è¦çœ‹åº”ç”¨åœºæ™¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552113530,"ip_address":"","comment_id":74074,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552098243","product_id":100023901,"comment_content":"æˆ‘åˆ†æå¾ªç¯ä¸ä¸€å®šæœ‰ä¼˜åŠ¿ï¼Œçœ‹åº”ç”¨åœºæ™¯äº†ã€‚è™½ç„¶apply, freeå¹¶ä¸è€—æ—¶ï¼Œä½†ä»æ˜¯åŒæ­¥æ–¹æ³•ã€‚<br>å¦‚æœä¸€ä¸ªçº¿ç¨‹æ­£åœ¨è¯·æ±‚ï¼ŒåŠ¿å¿…å…¶ä»–çº¿ç¨‹ä¼šè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œè€Œè¯¥çº¿ç¨‹ä¸ä¼šå› ä¸ºå¾ªç¯ä¼šç»§ç»­è¯·æ±‚ï¼Œæ‰€ä»¥ä¸å…¬å¹³<br>","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442426,"discussion_content":"æ˜¯çš„ï¼Œæˆ‘ä¹Ÿè§‰å¾—è¦çœ‹åº”ç”¨åœºæ™¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552113530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74070,"user_name":"WolvesLeader","can_delete":false,"product_type":"c1","uid":1103839,"ip_address":"","ucode":"33610E19CA2E96","user_header":"https://static001.geekbang.org/account/avatar/00/10/d7/df/fc0a6709.jpg","comment_is_top":false,"comment_ctime":1552097921,"is_pvip":false,"replies":[{"id":"27064","content":"javaçš„çº¿ç¨‹dumpèƒ½çœ‹åˆ°æ˜¯ä¸æ˜¯æ­»é”äº†","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552104103,"ip_address":"","comment_id":74070,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552097921","product_id":100023901,"comment_content":"æˆ‘çš„æ„æ€æ˜¯ï¼Œæˆ‘ä»¬æ€èƒ½æ‰¾åˆ°å‘ç”Ÿæ­»é”çš„åœ°æ–¹ï¼Œæ€ä¹ˆæ£€æµ‹æœ‰æ²¡æœ‰æ­»é”","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442423,"discussion_content":"javaçš„çº¿ç¨‹dumpèƒ½çœ‹åˆ°æ˜¯ä¸æ˜¯æ­»é”äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552104103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74066,"user_name":"æ­£åœ¨åŠ è½½æ›´å¤š......","can_delete":false,"product_type":"c1","uid":1321839,"ip_address":"","ucode":"06AF4EA0786D60","user_header":"https://static001.geekbang.org/account/avatar/00/14/2b/6f/4b307aad.jpg","comment_is_top":false,"comment_ctime":1552097334,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552097334","product_id":100023901,"comment_content":"@æé±¼çš„æ¬ç –å¥‡  whileæ­»å¾ªç¯çš„ actr.apply(this, target) çš„è¿™ä¸ªæ–¹æ³•è¿˜è·å–äº†  Alloctor  å¯¹è±¡çš„é”å§ï¼Ÿä¸è·å–Account å¯¹è±¡çš„é”æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«å§","like_count":0},{"had_liked":false,"id":74061,"user_name":"å‘æ¡æ©™å­ ã€‚","can_delete":false,"product_type":"c1","uid":1259218,"ip_address":"","ucode":"ED076F4534FFED","user_header":"https://static001.geekbang.org/account/avatar/00/13/36/d2/c7357723.jpg","comment_is_top":false,"comment_ctime":1552096422,"is_pvip":false,"replies":[{"id":"27066","content":"åé¢ä¼šè®²<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552104203,"ip_address":"","comment_id":74061,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552096422","product_id":100023901,"comment_content":"åˆ’é‡ç‚¹ ï¼Œ è§£å†³æ­»é”çš„ä¸‰ä¸ªæ–¹å‘ç‚¹ ï¼Œ åˆgetåˆ°äº†æ–°å§¿åŠ¿ ğŸ˜<br><br>å¦å¤–ï¼Œè€å¸ˆåé¢ä¼šä¸ä¼šè®²åˆ°çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå’Œçº¿ç¨‹é—´é€šä¿¡çš„ç›¸å…³çŸ¥è¯†","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442417,"discussion_content":"åé¢ä¼šè®²\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552104203,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74047,"user_name":"ç½—æ´²","can_delete":false,"product_type":"c1","uid":1263417,"ip_address":"","ucode":"68133E38A25C17","user_header":"https://static001.geekbang.org/account/avatar/00/13/47/39/0ce1aa62.jpg","comment_is_top":false,"comment_ctime":1552093258,"is_pvip":false,"replies":[{"id":"27049","content":"ä¸¥é‡åŒæ„<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552096826,"ip_address":"","comment_id":74047,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552093258","product_id":100023901,"comment_content":"æ€§èƒ½ä¼˜åŠ¿å–å†³äºæ“ä½œèŒƒå›´ï¼Œå¦‚æœaccount å¯¹è±¡è¿˜æœ‰å…¶ä»–æ“ä½œï¼Œé‚£ä¹ˆå¯¹äºwhile å¾ªç¯åªä¼šé”ä½è½¬è´¦ï¼Œè€Œaccount.classæ˜¯é”ä½æ•´ä¸ªå¯¹è±¡ï¼Œè¿™é‡Œä¼šæ¶‰åŠé”çš„èŒƒå›´ä¸åŒï¼Œå¦‚æœå¿½ç•¥èŒƒå›´ï¼Œæˆ‘è§‰å¾—åœ¨æ€§èƒ½ä¼˜åŠ¿ä¸å¤§","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442406,"discussion_content":"ä¸¥é‡åŒæ„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552096826,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74038,"user_name":"æ¢ç´¢æ— æ­¢å¢ƒ","can_delete":false,"product_type":"c1","uid":1044178,"ip_address":"","ucode":"91D2A9907DFA79","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ee/d2/7024431c.jpg","comment_is_top":false,"comment_ctime":1552091825,"is_pvip":false,"replies":[{"id":"27108","content":"applyé‡Œé¢ä¹Ÿæœ‰ä¸€ä¸ªé”ï¼Œæ‰€ä»¥ä¹Ÿä¸æ˜¯ä»…ä»…é”äº†å½“å‰çš„ä¸¤ä¸ªè´¦æˆ·ã€‚æ€§èƒ½æ˜¯å¦æœ‰ä¼˜åŠ¿ï¼Œè¦çœ‹å…·ä½“åœºæ™¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552114336,"ip_address":"","comment_id":74038,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552091825","product_id":100023901,"comment_content":"æœ‰ä¼˜åŠ¿ï¼Œå› ä¸ºç”¨Acount.classé”å®šçš„æ˜¯å…¨éƒ¨è´¦æˆ·èµ„æºï¼Œè€Œç°åœ¨è¿™ä¸ªåšæ³•åªæ˜¯é”ä½äº†ä¸¤ä¸ªå½“å‰è½¬è´¦çš„è´¦æˆ·å¯¹è±¡ï¼ŒæœŸå¾…è€å¸ˆçš„è§£é‡Šï¼æœŸå¾…åŠ å¿«æ›´æ–°ï¼","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442401,"discussion_content":"applyé‡Œé¢ä¹Ÿæœ‰ä¸€ä¸ªé”ï¼Œæ‰€ä»¥ä¹Ÿä¸æ˜¯ä»…ä»…é”äº†å½“å‰çš„ä¸¤ä¸ªè´¦æˆ·ã€‚æ€§èƒ½æ˜¯å¦æœ‰ä¼˜åŠ¿ï¼Œè¦çœ‹å…·ä½“åœºæ™¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552114336,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74034,"user_name":"ä¸€é“é˜³å…‰","can_delete":false,"product_type":"c1","uid":1239557,"ip_address":"","ucode":"F35207CCCEC6E2","user_header":"https://static001.geekbang.org/account/avatar/00/12/ea/05/c0d8014d.jpg","comment_is_top":false,"comment_ctime":1552090959,"is_pvip":false,"replies":[{"id":"27110","content":"æœ‰äº›åœºæ™¯ï¼Œä¹Ÿèƒ½å¿«ã€‚ä¾‹å¦‚è½¬è´¦æ“ä½œå¾ˆè€—æ—¶çš„æ—¶å€™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552114426,"ip_address":"","comment_id":74034,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552090959","product_id":100023901,"comment_content":"å¯¹äºè½¬è´¦æ“ä½œæ¥è¯´ï¼Œæ˜¯æ²¡æœ‰åŒºåˆ«çš„ï¼Œå› ä¸ºç”³è¯·èµ„æºæ˜¯å•ä¾‹å¯¹è±¡ï¼Œæ‰€æœ‰è½¬è´¦ä¸šåŠ¡éƒ½æ˜¯ä¸²è¡Œæ‰§è¡Œçš„ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442398,"discussion_content":"æœ‰äº›åœºæ™¯ï¼Œä¹Ÿèƒ½å¿«ã€‚ä¾‹å¦‚è½¬è´¦æ“ä½œå¾ˆè€—æ—¶çš„æ—¶å€™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552114426,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74031,"user_name":"æ","can_delete":false,"product_type":"c1","uid":1119312,"ip_address":"","ucode":"5C0FAA211F2E26","user_header":"https://static001.geekbang.org/account/avatar/00/11/14/50/c23cf47d.jpg","comment_is_top":false,"comment_ctime":1552089704,"is_pvip":true,"replies":[{"id":"27097","content":"æœ‰ç‚¹è‡ªæ—‹çš„æ„æ€ã€‚ä½†æ˜¯applyé‡Œé¢æœ‰é”ï¼Œæ‰€ä»¥è¿˜ä¸æ˜¯è‡ªæ—‹ã€‚èƒ½æƒ³åˆ°applyçš„è€—æ—¶å¾ˆå¥½ï¼Œæ— è®ºä»€ä¹ˆæƒ…å†µä¸‹ï¼ŒåŒæ­¥ä»£ç å—é‡Œçš„ä»£ç éƒ½è¦å°½å¯èƒ½å¿«ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552113349,"ip_address":"","comment_id":74031,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552089704","product_id":100023901,"comment_content":"å¦‚æœç”³è¯·è€—æ—¶æ¯”è¾ƒé•¿ï¼Œæ€§èƒ½å°±å·®ã€‚å¦‚æœè€—æ—¶çŸ­ï¼Œæ€§èƒ½å°±æœ‰ä¼˜åŠ¿ã€‚æ„Ÿè§‰æœ‰ç‚¹åƒè‡ªæ—‹é”ã€‚ä¸æ™“å¾—å¾—å¯¹ä¸å¯¹","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442396,"discussion_content":"æœ‰ç‚¹è‡ªæ—‹çš„æ„æ€ã€‚ä½†æ˜¯applyé‡Œé¢æœ‰é”ï¼Œæ‰€ä»¥è¿˜ä¸æ˜¯è‡ªæ—‹ã€‚èƒ½æƒ³åˆ°applyçš„è€—æ—¶å¾ˆå¥½ï¼Œæ— è®ºä»€ä¹ˆæƒ…å†µä¸‹ï¼ŒåŒæ­¥ä»£ç å—é‡Œçš„ä»£ç éƒ½è¦å°½å¯èƒ½å¿«ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552113349,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}