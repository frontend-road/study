{"id":296422,"title":"16 | è¯­æ³•é¢é¢è§‚ï¼šæ™ºèƒ½æŒ‡é’ˆï¼ˆäºŒï¼‰","content":"<p><strong>è¯¾ä»¶åŠDemoä¸‹è½½é“¾æ¥</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geektime-Rust\">https://gitee.com/geektime-geekbang/geektime-Rust</a></p>","comments":[{"had_liked":false,"id":343259,"user_name":"ä¸‡æ­£å®‡","can_delete":false,"product_type":"c3","uid":2985047,"ip_address":"","ucode":"B8E70029D5F131","user_header":"https://static001.geekbang.org/account/avatar/00/2d/8c/57/b7bc2b9e.jpg","comment_is_top":false,"comment_ctime":1650731847,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100060601,"comment_content":"--014\tpattern match\n&#47;&#47;fn sum(x: String, ref y: String) -&gt; String { x + y }    \nfn f(x: &amp;Option&lt;String&gt;) {\n    match x {\n        Some(ref s) =&gt; { println!(&quot;{:?}&quot;, s)},&#47;&#47;refæ¨¡å¼\n        None =&gt; { println!(&quot;none&quot;) }\n    }\n}\nfn main() {\n    let x = Some(&quot;ky-tech&quot;.to_owned());\n    f(&amp;x);\n    &#47;&#47;åŒ¹é…åŠ¨æ€æ•°ç»„\n    let vec = vec![1, 2, 3];\n    match vec[..] {\n        [a, b, c] =&gt; {println!(&quot;{}, {}, {}&quot;, a, b, c)},\n        _ =&gt; { println!(&quot;no match vector&quot;) },\n    };\n}\n\n\n--015\t\nDeRef Trait \tç±»å‹çš„æŒ‡é’ˆè¡Œä¸º\nDrop Trait \t\tç±»å‹çš„ææ„è¡Œä¸º\nimpl&lt;T:?Sized&gt; Deref for Box&lt;T&gt; {\n    type Target = T;\n    fn deref(&amp;self) -&gt; &amp;T { &amp;**self }\n}\n&#47;&#47;&#47;&#47;\nuse std::ops::Deref;\nstruct Point&lt;T&gt;(T);\nimpl&lt;T&gt; Point&lt;T&gt; {\n    fn new(x: T) -&gt; Point&lt;T&gt; { Point(x) }\n}\nimpl&lt;T&gt; Deref for Point&lt;T&gt; {\n    type Target = T;\n    fn deref(&amp;self) -&gt; &amp;T { &amp;self.0 }\n}\nfn main() {\n    let y = Point::new(3);\n    assert_eq!(3, *y);\n    println!(&quot;*y = {:?}&quot;, *y);\n}\n\n\n--016\n*y = *( y.deref() )\nBox&lt;T&gt;\nVec&lt;T&gt;\nString \nRc&lt;T&gt;\nArc&lt;T&gt;\nHashMap&lt;K, V&gt;\t&#47;&#47;impl drop trait\n\n&#47;**\nderef pointer è‡ªåŠ¨è§£å¼•ç”¨\n*&#47;\nimpl&lt;T: ?Sized&gt; Deref for &amp;mut T {\n    type Target = T;\n    fn deref(&amp;self) -&gt; &amp;T { *self }\n}\nstruct User { name: &amp;&#39;static str }","like_count":0},{"had_liked":false,"id":253665,"user_name":"jm26","can_delete":false,"product_type":"c3","uid":1079281,"ip_address":"","ucode":"967305BB8451BB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eocAWvBbWEqT2MfiaNYPHiaBAxWZa4UEsw6p0ZiaOIwzcVcy8DyGjABKkIbwsjbfsgHx1TibEdD4CCxOA/132","comment_is_top":false,"comment_ctime":1602822271,"is_pvip":false,"replies":null,"discussion_count":5,"race_medal":0,"score":2,"product_id":100060601,"comment_content":"æ‚¨å¥½ï¼Œæ‚¨çš„ç¼–ç¨‹ä¹‹é“åœ¨è®²traitå¯¹è±¡æ—¶å…³äºtraitä¸èƒ½æ˜¯Sizedçš„ï¼ŒåŸå› æ˜¯å®ç°è¯¥traitçš„ç±»å¯èƒ½æ²¡æœ‰å®ç°Sizedï¼Œä½†æ˜¯æ—¢ç„¶æ˜¯traitæ˜¯ç»§æ‰¿çš„ï¼Œä¸ºä»€ä¹ˆä¼šå‡ºç°å®ç°äº†è¯¥traitå´æ²¡æœ‰å®ç°ç»§æ‰¿çš„Sizedå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1498664,"avatar":"https://static001.geekbang.org/account/avatar/00/16/de/28/acb248d6.jpg","nickname":"æ™–","note":"","ucode":"D12C7EBDCD4236","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312955,"discussion_content":"ä½ å†ä»”ç»†è¯»ä¸€ä¸‹ã€‚ä¹¦é‡Œè¯´çš„æ˜¯å¦‚æœä¸€ä¸ª Trait è¦è¢«å½“æˆ Trait Object ä½¿ç”¨ï¼Œåˆ™\n- å®ç°è¯¥ Trait çš„ç±»å‹ Self ä¸èƒ½æ˜¯ Sizedï¼Œè€Œéœ€è¦æ˜¯é»˜è®¤çš„éšå¼é™å®š ?Sized\n- Trait ä¸­çš„æ‰€æœ‰æ–¹æ³•éƒ½å¿…é¡»æ˜¯ç±»å‹å®‰å…¨çš„\n\nä¸Šé¢çš„æ€»ç»“ï¼Œå¹¶æ²¡æœ‰è¯´ trait ä¸èƒ½æ˜¯ Sized çš„ã€‚\næ„Ÿè§‰ä½ æŠŠå‡ ä¸ªæ¦‚å¿µæ‰åœ¨ä¸€èµ·äº†ï¼Œåˆ†å¼€çœ‹çœ‹æ¯ä¸€ä¸ªæ¦‚å¿µå†ç†è§£è¯•è¯•ï¼šSized, ?Sized, Trait, Trait Object.","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1602869680,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1047574,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fc/16/0a3f1c15.jpg","nickname":"ç¥ ä¸€ç”Ÿæœ‰ä½ ","note":"","ucode":"423AD11359E265","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":313345,"discussion_content":"let  f: dyn  FLY=Pig; // FLYæ˜¯trait,pigæ˜¯å®ç°FLY  trait\nfå®é™…ä¸Šæ˜¯ä¸€ä¸ªåå«traitçš„ç»“æ„ä½“ï¼Œå®ƒæœ‰ä¸¤ä¸ªæŒ‡é’ˆï¼ŒdataæŒ‡é’ˆæŒ‡å‘äº†åœ¨å †ä¸­çœŸæ­£pigå¯¹è±¡ï¼Œè™šæ–¹æ³•æŒ‡é’ˆæŒ‡å‘åœ¨å †ä¸­åˆ›å»ºçš„è™šæ–¹æ³•è¡¨å¯¹è±¡ï¼Œå½“fè°ƒç”¨ä¸”åªèƒ½è°ƒç”¨FLYä¸­å®šä¹‰çš„æ–¹æ³•(å®‰å…¨æ–¹æ³•)ï¼Œä¹¦ä¸Šè¯´çš„trait:sizedæ˜¯è¯´traitè¿™ä¸ªç‰¹æ®Šç»“æ„åœ¨ç¼–è¯‘æœŸæ˜¯æ— æ³•ç¡®å®šå¤§å°çš„ï¼Œå› ä¸ºå®ç°äº†è¯¥traitç±»å‹ï¼Œåœ¨ç¼–è¯‘æœŸå¯èƒ½æ˜¯æ— æ³•ç¡®å®šå¤§å°ï¼Œæ¯”å¦‚strè¿™æ ·åœ¨ç¼–è¯‘æœŸæ— æ³•ç¡®å®šå¤§å°çš„ç±»å‹å®ç°äº†ä¸€ä¸ªtraitï¼Œåœ¨ç¼–è¯‘æ—¶å°±ä¼šæŠ¥é”™ï¼Œtrait:sizedè¦æ±‚åœ¨ç¼–è¯‘æœŸç¡®å®šå¤§å°ï¼Œè€Œstrç¡®æ˜¯åœ¨ç¼–è¯‘æœŸæ— æ³•ç¡®å®šå¤§å°çš„(å¦‚æœæˆ‘ç†è§£çš„æ²¡é—®é¢˜ï¼Œæ˜¯ä¸æ˜¯ç¼–è¯‘å™¨å‘ç°trait:sizedï¼Œè€Œæœ‰!sizedç±»å‹å®ç°ï¼Œåº”è¯¥ç¦æ­¢!sizedç±»å‹å»å®ç°è¯¥traitï¼Œå› ä¸ºä½ å®šä¹‰traitåˆä¸æ˜¯ä¸ºäº†ç”¨traitå¯¹è±¡ï¼Œä¼°è®¡æˆ‘è¿™ä¸ªæƒ³æ³•rustè§‰å¾—æ²¡å¿…è¦è¿™æ ·å¹²)ï¼Œä¸¤ä¸ªå†²çªï¼Œè‡ªç„¶æ— æ³•ç¼–è¯‘é€šè¿‡","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1603036788,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2831163,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/33/3b/0b25b622.jpg","nickname":"é™†ä¸€é¸£çŒœä¸åŠ¨","note":"","ucode":"68E89A037F9A0C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549948,"discussion_content":"å‰å‡ èŠ‚è¯¾åœ¨è®²é—­åŒ…çš„æ—¶å€™ï¼Œæˆ‘è®°å¾—è¯´traitsä¸æ˜¯ç»§æ‰¿å…³ç³»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644308560,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111835,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f7/1b/db7a0edc.jpg","nickname":"Marvichov","note":"","ucode":"7482099415C41C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373120,"discussion_content":"åº”è¯¥æ˜¯å’Œtrait object safetyæœ‰å…³ https://rust-lang.github.io/rfcs/0255-object-safety.html","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620621932,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1198100,"avatar":"https://static001.geekbang.org/account/avatar/00/12/48/14/bb345fa8.jpg","nickname":"ğŸµAlex","note":"","ucode":"88373FAA431D5A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":320728,"discussion_content":"å…³äºç¼–ç¨‹ä¹‹é“çš„é—®é¢˜ï¼Œå»ç¼–ç¨‹ä¹‹é“éšä¹¦æºç å‘issuesè®¨è®ºæ›´å¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604465800,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}