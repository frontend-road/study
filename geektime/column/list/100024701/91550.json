{"id":91550,"title":"12 | è¿›ç¨‹æ•°æ®ç»“æ„ï¼ˆä¸Šï¼‰ï¼šé¡¹ç›®å¤šäº†å°±éœ€è¦é¡¹ç›®ç®¡ç†ç³»ç»Ÿ","content":"<p>å‰é¢ä¸¤èŠ‚ï¼Œæˆ‘ä»¬è®²äº†å¦‚ä½•ä½¿ç”¨ç³»ç»Ÿè°ƒç”¨ï¼Œåˆ›å»ºè¿›ç¨‹å’Œçº¿ç¨‹ã€‚ä½ æ˜¯ä¸æ˜¯è§‰å¾—è¿›ç¨‹å’Œçº¿ç¨‹ç®¡ç†ï¼Œè¿˜æŒºå¤æ‚çš„å‘¢ï¼Ÿå¦‚æ­¤å¤æ‚çš„ä½“ç³»ï¼Œåœ¨å†…æ ¸é‡Œé¢åº”è¯¥å¦‚ä½•ç®¡ç†å‘¢ï¼Ÿ</p><p>æœ‰çš„è¿›ç¨‹åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œæœ‰çš„è¿›ç¨‹æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œå®ƒä»¬éƒ½éœ€è¦ç”±å†…æ ¸åˆ†é…CPUæ¥å¹²æ´»ã€‚å¯æ˜¯CPUæ€»å…±å°±è¿™ä¹ˆå‡ ä¸ªï¼Œåº”è¯¥æ€ä¹ˆç®¡ç†ï¼Œæ€ä¹ˆè°ƒåº¦å‘¢ï¼Ÿä½ æ˜¯è€æ¿ï¼Œè¿™ä¸ªäº‹å„¿å¾—ä½ æ¥æ“å¿ƒã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬å¾—æ˜ç¡®ï¼Œå…¬å¸çš„é¡¹ç›®å”®å‰å”®åäººå‘˜ï¼Œæ¥æ¥äº†è¿™ä¹ˆå¤šçš„é¡¹ç›®ï¼Œè¿™æ˜¯ä¸ªå¥½äº‹å„¿ã€‚è¿™äº›é¡¹ç›®éƒ½é€šè¿‡åŠäº‹å¤§å…ç«‹äº†é¡¹çš„ï¼Œæœ‰çš„éœ€è¦æ•´ä¸ªé¡¹ç›®ç»„ä¸€èµ·å¼€å‘ï¼Œæœ‰çš„æ˜¯ä¸€ä¸ªé¡¹ç›®ç»„åˆ†æˆå¤šä¸ªå°ç»„å¹¶è¡Œå¼€å‘ã€‚æ— è®ºå“ªç§æ¨¡å¼ï¼Œåˆ°ä½ è¿™ä¸ªè€æ¿è¿™é‡Œï¼Œéƒ½éœ€è¦æœ‰ä¸€ä¸ªé¡¹ç›®ç®¡ç†ä½“ç³»ï¼Œè¿›è¡Œç»Ÿä¸€æ’æœŸã€ç»Ÿä¸€ç®¡ç†å’Œç»Ÿä¸€åè°ƒã€‚è¿™æ ·ï¼Œä½ æ‰èƒ½å¯¹å…¬å¸çš„ä¸šåŠ¡äº†å¦‚æŒ‡æŒã€‚</p><p>é‚£å…·ä½“åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿè¿˜è®°å¾—å’±ä»¬å¹³æ—¶å¼€å‘çš„æ—¶å€™ï¼Œç”¨çš„é¡¹ç›®ç®¡ç†è½¯ä»¶Jiraå§ï¼Ÿå®ƒçš„åŠæ³•å¯¹æˆ‘ä»¬æ¥è®²ï¼Œå°±å¾ˆæœ‰å‚è€ƒæ„ä¹‰ã€‚</p><p>æˆ‘ä»¬è¿™ä¹ˆæ¥çœ‹ï¼Œå…¶å®ï¼Œæ— è®ºæ˜¯ä¸€ä¸ªå¤§çš„é¡¹ç›®ç»„ä¸€èµ·å®Œæˆä¸€ä¸ªå¤§çš„åŠŸèƒ½ï¼ˆå•ä½“åº”ç”¨æ¨¡å¼ï¼‰ï¼Œè¿˜æ˜¯æŠŠä¸€ä¸ªå¤§çš„åŠŸèƒ½æ‹†æˆå°çš„åŠŸèƒ½å¹¶è¡Œå¼€å‘ï¼ˆå¾®æœåŠ¡æ¨¡å¼ï¼‰ï¼Œè¿™äº›éƒ½æ˜¯å¼€å‘ç»„æ ¹æ®å®¢æˆ·çš„éœ€æ±‚æ¥å®šçš„ï¼Œé¡¹ç›®ç»ç†æ²¡åŠæ³•å†³å®šï¼Œä½†æ˜¯ä»é¡¹ç›®ç»ç†çš„è§’åº¦æ¥çœ‹ï¼Œè¿™äº›éƒ½æ˜¯ä»»åŠ¡ï¼Œéœ€è¦åŒæ ·å…³æ³¨è¿›åº¦ã€åè°ƒèµ„æºç­‰ç­‰ã€‚</p><p>åŒæ ·åœ¨Linuxé‡Œé¢ï¼Œæ— è®ºæ˜¯è¿›ç¨‹ï¼Œè¿˜æ˜¯çº¿ç¨‹ï¼Œåˆ°äº†å†…æ ¸é‡Œé¢ï¼Œæˆ‘ä»¬ç»Ÿä¸€éƒ½å«ä»»åŠ¡ï¼ˆTaskï¼‰ï¼Œç”±ä¸€ä¸ªç»Ÿä¸€çš„ç»“æ„<strong>task_struct</strong>è¿›è¡Œç®¡ç†ã€‚è¿™ä¸ªç»“æ„éå¸¸å¤æ‚ï¼Œä½†ä½ ä¹Ÿä¸ç”¨æ€•ï¼Œæˆ‘ä»¬æ…¢æ…¢æ¥è§£æã€‚</p><!-- [[[read_end]]] --><p><img src=\"https://static001.geekbang.org/resource/image/75/2d/75c4d28a9d2daa4acc1107832be84e2d.jpeg?wh=2206*1732\" alt=\"\"></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ²¿ç€å»ºç«‹é¡¹ç›®ç®¡ç†ä½“ç³»çš„æ€è·¯ï¼Œè®¾æƒ³ä¸€ä¸‹ï¼Œ<strong>Linuxçš„ä»»åŠ¡ç®¡ç†éƒ½åº”è¯¥å¹²äº›å•¥ï¼Ÿ</strong></p><p>é¦–å…ˆï¼Œæ‰€æœ‰æ‰§è¡Œçš„é¡¹ç›®åº”è¯¥æœ‰ä¸ªé¡¹ç›®åˆ—è¡¨å§ï¼Œæ‰€ä»¥Linuxå†…æ ¸ä¹Ÿåº”è¯¥å…ˆå¼„ä¸€ä¸ª<strong>é“¾è¡¨</strong>ï¼Œå°†æ‰€æœ‰çš„task_structä¸²èµ·æ¥ã€‚</p><pre><code>struct list_head\t\ttasks;\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹æ¯ä¸€ä¸ªä»»åŠ¡éƒ½åº”è¯¥åŒ…å«å“ªäº›å­—æ®µã€‚</p><h2>ä»»åŠ¡ID</h2><p>æ¯ä¸€ä¸ªä»»åŠ¡éƒ½åº”è¯¥æœ‰ä¸€ä¸ªIDï¼Œä½œä¸ºè¿™ä¸ªä»»åŠ¡çš„å”¯ä¸€æ ‡è¯†ã€‚åˆ°æ—¶å€™æ’æœŸå•Šã€ä¸‹å‘ä»»åŠ¡å•Šç­‰ç­‰ï¼Œéƒ½æŒ‰IDæ¥ï¼Œå°±ä¸ä¼šäº§ç”Ÿæ­§ä¹‰ã€‚</p><p>task_structé‡Œé¢æ¶‰åŠä»»åŠ¡IDçš„ï¼Œæœ‰ä¸‹é¢å‡ ä¸ªï¼š</p><pre><code>pid_t pid;\npid_t tgid;\nstruct task_struct *group_leader; \n</code></pre><p>ä½ å¯èƒ½è§‰å¾—å¥‡æ€ªï¼Œæ—¢ç„¶æ˜¯IDï¼Œæœ‰ä¸€ä¸ªå°±è¶³ä»¥åšå”¯ä¸€æ ‡è¯†äº†ï¼Œè¿™ä¸ªæ€ä¹ˆçœ‹èµ·æ¥è¿™ä¹ˆéº»çƒ¦ï¼Ÿè¿™æ˜¯å› ä¸ºï¼Œä¸Šé¢çš„è¿›ç¨‹å’Œçº¿ç¨‹åˆ°äº†å†…æ ¸è¿™é‡Œï¼Œç»Ÿä¸€å˜æˆäº†ä»»åŠ¡ï¼Œè¿™å°±å¸¦æ¥ä¸¤ä¸ªé—®é¢˜ã€‚</p><p>ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œ<strong>ä»»åŠ¡å±•ç¤º</strong>ã€‚</p><p>å•¥æ˜¯ä»»åŠ¡å±•ç¤ºå‘¢ï¼Ÿè¿™ä¹ˆè¯´å§ï¼Œä½ ä½œä¸ºè€æ¿ï¼Œæƒ³äº†è§£çš„è‚¯å®šæ˜¯ï¼Œå…¬å¸éƒ½æ¥äº†å“ªäº›é¡¹ç›®ï¼Œæ¯ä¸ªé¡¹ç›®å¤šå°‘è¥æ”¶ã€‚ä»€ä¹ˆé¡¹ç›®æ‰§è¡Œæ˜¯ä¸æ˜¯åˆ†äº†å°ç»„ï¼Œæ¯ä¸ªå°ç»„æ˜¯å•¥æƒ…å†µï¼Œè¿™äº›ç»†èŠ‚ï¼Œé¡¹ç›®ç»ç†æ²¡å¿…è¦å…¨éƒ½å±•ç¤ºç»™ä½ çœ‹ã€‚</p><p>å‰é¢æˆ‘ä»¬å­¦ä¹ å‘½ä»¤è¡Œçš„æ—¶å€™ï¼ŒçŸ¥é“pså‘½ä»¤å¯ä»¥å±•ç¤ºå‡ºæ‰€æœ‰çš„è¿›ç¨‹ã€‚ä½†æ˜¯å¦‚æœä½ æ˜¯è¿™ä¸ªå‘½ä»¤çš„å®ç°è€…ï¼Œåˆ°äº†å†…æ ¸ï¼ŒæŒ‰ç…§ä¸Šé¢çš„ä»»åŠ¡åˆ—è¡¨æŠŠè¿™äº›å‘½ä»¤éƒ½æ˜¾ç¤ºå‡ºæ¥ï¼ŒæŠŠæ‰€æœ‰çš„çº¿ç¨‹å…¨éƒ½å¹³æ‘Šå¼€æ¥æ˜¾ç¤ºç»™ç”¨æˆ·ã€‚ç”¨æˆ·è‚¯å®šè§‰å¾—æ—¢å¤æ‚åˆå›°æƒ‘ã€‚å¤æ‚åœ¨äºï¼Œåˆ—è¡¨è¿™ä¹ˆé•¿ï¼›å›°æƒ‘åœ¨äºï¼Œé‡Œé¢å‡ºç°äº†å¾ˆå¤šå¹¶ä¸æ˜¯è‡ªå·±åˆ›å»ºçš„çº¿ç¨‹ã€‚</p><p>ç¬¬äºŒä¸ªé—®é¢˜æ˜¯ï¼Œ<strong>ç»™ä»»åŠ¡ä¸‹å‘æŒ‡ä»¤</strong>ã€‚</p><p>å¦‚æœå®¢æˆ·çªç„¶ç»™é¡¹ç›®ç»„æä¸ªæ–°çš„éœ€æ±‚ï¼Œæ¯”å¦‚è¯´ï¼Œæœ‰çš„å®¢æˆ·è§‰å¾—é¡¹ç›®å·²ç»å®Œæˆï¼Œå¯ä»¥ç»ˆæ­¢ï¼›å†æ¯”å¦‚è¯´ï¼Œæœ‰çš„å®¢æˆ·è§‰å¾—é¡¹ç›®åšåˆ°ä¸€åŠæ²¡å¿…è¦å†è¿›è¡Œä¸‹å»äº†ï¼Œå¯ä»¥ä¸­æ­¢ï¼Œè¿™æ—¶å€™åº”è¯¥ç»™è°å‘æŒ‡ä»¤ï¼Ÿå½“ç„¶åº”è¯¥ç»™æ•´ä¸ªé¡¹ç›®ç»„ï¼Œè€Œä¸æ˜¯æŸä¸ªå°ç»„ã€‚æˆ‘ä»¬ä¸èƒ½è®©å®¢æˆ·çœ‹åˆ°ï¼Œä¸åŒçš„å°ç»„å£å¾„ä¸ä¸€è‡´ã€‚è¿™å°±å¥½æ¯”è¯´ï¼Œä¸­æ­¢é¡¹ç›®çš„æŒ‡ä»¤åˆ°è¾¾ä¸€ä¸ªå°ç»„ï¼Œè¿™ä¸ªå°ç»„å¾ˆå¼€å¿ƒå°±å»ä¼‘æ¯äº†ï¼ŒåŒä¸€ä¸ªé¡¹ç›®ç»„çš„å…¶ä»–å°ç»„è¿˜å¹²çš„çƒ­ç«æœå¤©çš„ã€‚</p><p>Linuxä¹Ÿä¸€æ ·ï¼Œå‰é¢æˆ‘ä»¬å­¦ä¹ å‘½ä»¤è¡Œçš„æ—¶å€™ï¼ŒçŸ¥é“å¯ä»¥é€šè¿‡killæ¥ç»™è¿›ç¨‹å‘ä¿¡å·ï¼Œé€šçŸ¥è¿›ç¨‹é€€å‡ºã€‚å¦‚æœå‘ç»™äº†å…¶ä¸­ä¸€ä¸ªçº¿ç¨‹ï¼Œæˆ‘ä»¬å°±ä¸èƒ½åªé€€å‡ºè¿™ä¸ªçº¿ç¨‹ï¼Œè€Œæ˜¯åº”è¯¥é€€å‡ºæ•´ä¸ªè¿›ç¨‹ã€‚å½“ç„¶ï¼Œæœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›åªç»™æŸä¸ªçº¿ç¨‹å‘ä¿¡å·ã€‚</p><p>æ‰€ä»¥åœ¨å†…æ ¸ä¸­ï¼Œå®ƒä»¬è™½ç„¶éƒ½æ˜¯ä»»åŠ¡ï¼Œä½†æ˜¯åº”è¯¥åŠ ä»¥åŒºåˆ†ã€‚å…¶ä¸­ï¼Œpidæ˜¯process idï¼Œtgidæ˜¯thread group IDã€‚</p><p>ä»»ä½•ä¸€ä¸ªè¿›ç¨‹ï¼Œå¦‚æœåªæœ‰ä¸»çº¿ç¨‹ï¼Œé‚£pidæ˜¯è‡ªå·±ï¼Œtgidæ˜¯è‡ªå·±ï¼Œgroup_leaderæŒ‡å‘çš„è¿˜æ˜¯è‡ªå·±ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœä¸€ä¸ªè¿›ç¨‹åˆ›å»ºäº†å…¶ä»–çº¿ç¨‹ï¼Œé‚£å°±ä¼šæœ‰æ‰€å˜åŒ–äº†ã€‚çº¿ç¨‹æœ‰è‡ªå·±çš„pidï¼Œtgidå°±æ˜¯è¿›ç¨‹çš„ä¸»çº¿ç¨‹çš„pidï¼Œgroup_leaderæŒ‡å‘çš„å°±æ˜¯è¿›ç¨‹çš„ä¸»çº¿ç¨‹ã€‚</p><p>å¥½äº†ï¼Œæœ‰äº†tgidï¼Œæˆ‘ä»¬å°±çŸ¥é“tast_structä»£è¡¨çš„æ˜¯ä¸€ä¸ªè¿›ç¨‹è¿˜æ˜¯ä»£è¡¨ä¸€ä¸ªçº¿ç¨‹äº†ã€‚</p><h2>ä¿¡å·å¤„ç†</h2><p>è¿™é‡Œæ—¢ç„¶æåˆ°äº†ä¸‹å‘æŒ‡ä»¤çš„é—®é¢˜ï¼Œæˆ‘å°±é¡ºä¾¿æä¸€ä¸‹task_structé‡Œé¢å…³äºä¿¡å·å¤„ç†çš„å­—æ®µã€‚</p><pre><code>/* Signal handlers: */\nstruct signal_struct\t\t*signal;\nstruct sighand_struct\t\t*sighand;\nsigset_t\t\t\tblocked;\nsigset_t\t\t\treal_blocked;\nsigset_t\t\t\tsaved_sigmask;\nstruct sigpending\t\tpending;\nunsigned long\t\t\tsas_ss_sp;\nsize_t\t\t\t\tsas_ss_size;\nunsigned int\t\t\tsas_ss_flags;\n</code></pre><p>è¿™é‡Œå®šä¹‰äº†å“ªäº›ä¿¡å·è¢«é˜»å¡æš‚ä¸å¤„ç†ï¼ˆblockedï¼‰ï¼Œå“ªäº›ä¿¡å·å°šç­‰å¾…å¤„ç†ï¼ˆpendingï¼‰ï¼Œå“ªäº›ä¿¡å·æ­£åœ¨é€šè¿‡ä¿¡å·å¤„ç†å‡½æ•°è¿›è¡Œå¤„ç†ï¼ˆsighandï¼‰ã€‚å¤„ç†çš„ç»“æœå¯ä»¥æ˜¯å¿½ç•¥ï¼Œå¯ä»¥æ˜¯ç»“æŸè¿›ç¨‹ç­‰ç­‰ã€‚</p><p>ä¿¡å·å¤„ç†å‡½æ•°é»˜è®¤ä½¿ç”¨ç”¨æˆ·æ€çš„å‡½æ•°æ ˆï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å¼€è¾Ÿæ–°çš„æ ˆä¸“é—¨ç”¨äºä¿¡å·å¤„ç†ï¼Œè¿™å°±æ˜¯sas_ss_xxxè¿™ä¸‰ä¸ªå˜é‡çš„ä½œç”¨ã€‚</p><p>ä¸Šé¢æˆ‘è¯´äº†ä¸‹å‘ä¿¡å·çš„æ—¶å€™ï¼Œéœ€è¦åŒºåˆ†è¿›ç¨‹å’Œçº¿ç¨‹ã€‚ä»è¿™é‡Œæˆ‘ä»¬å…¶å®ä¹Ÿèƒ½çœ‹å‡ºä¸€äº›ç«¯å€ªã€‚</p><p>task_structé‡Œé¢æœ‰ä¸€ä¸ªstruct sigpending pendingã€‚å¦‚æœæˆ‘ä»¬è¿›å…¥struct signal_struct *signalå»çœ‹çš„è¯ï¼Œè¿˜æœ‰ä¸€ä¸ªstruct sigpending shared_pendingã€‚å®ƒä»¬ä¸€ä¸ªæ˜¯æœ¬ä»»åŠ¡çš„ï¼Œä¸€ä¸ªæ˜¯çº¿ç¨‹ç»„å…±äº«çš„ã€‚</p><p>å…³äºä¿¡å·ï¼Œä½ æš‚æ—¶äº†è§£åˆ°è¿™é‡Œå°±å¤Ÿç”¨äº†ï¼Œåé¢æˆ‘ä»¬ä¼šæœ‰å•ç‹¬çš„ç« èŠ‚è¿›è¡Œè§£è¯»ã€‚</p><h2>ä»»åŠ¡çŠ¶æ€</h2><p>ä½œä¸ºä¸€ä¸ªé¡¹ç›®ç»ç†ï¼Œå¦å¤–ä¸€ä¸ªéœ€è¦å…³æ³¨çš„æ˜¯é¡¹ç›®å½“å‰çš„çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œåœ¨Jiraé‡Œé¢ï¼Œä»»åŠ¡çš„è¿è¡Œå°±å¯ä»¥åˆ†æˆä¸‹é¢çš„çŠ¶æ€ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e0/21/e0019fcd11ff1ba33a3389e285b6a121.jpg?wh=1678*993\" alt=\"\"></p><p>åœ¨task_structé‡Œé¢ï¼Œæ¶‰åŠä»»åŠ¡çŠ¶æ€çš„æ˜¯ä¸‹é¢è¿™å‡ ä¸ªå˜é‡ï¼š</p><pre><code> volatile long state;    /* -1 unrunnable, 0 runnable, &gt;0 stopped */\n int exit_state;\n unsigned int flags;\n</code></pre><p>stateï¼ˆçŠ¶æ€ï¼‰å¯ä»¥å–çš„å€¼å®šä¹‰åœ¨include/linux/sched.hå¤´æ–‡ä»¶ä¸­ã€‚</p><pre><code>/* Used in tsk-&gt;state: */\n#define TASK_RUNNING                    0\n#define TASK_INTERRUPTIBLE              1\n#define TASK_UNINTERRUPTIBLE            2\n#define __TASK_STOPPED                  4\n#define __TASK_TRACED                   8\n/* Used in tsk-&gt;exit_state: */\n#define EXIT_DEAD                       16\n#define EXIT_ZOMBIE                     32\n#define EXIT_TRACE                      (EXIT_ZOMBIE | EXIT_DEAD)\n/* Used in tsk-&gt;state again: */\n#define TASK_DEAD                       64\n#define TASK_WAKEKILL                   128\n#define TASK_WAKING                     256\n#define TASK_PARKED                     512\n#define TASK_NOLOAD                     1024\n#define TASK_NEW                        2048\n#define TASK_STATE_MAX                  4096\n</code></pre><p>ä»å®šä¹‰çš„æ•°å€¼å¾ˆå®¹æ˜“çœ‹å‡ºæ¥ï¼Œstateæ˜¯é€šè¿‡bitsetçš„æ–¹å¼è®¾ç½®çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“å‰æ˜¯ä»€ä¹ˆçŠ¶æ€ï¼Œå“ªä¸€ä½å°±ç½®ä¸€ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e2/88/e2fa348c67ce41ef730048ff9ca4c988.jpeg?wh=2050*2017\" alt=\"\"></p><p>TASK_RUNNINGå¹¶ä¸æ˜¯è¯´è¿›ç¨‹æ­£åœ¨è¿è¡Œï¼Œè€Œæ˜¯è¡¨ç¤ºè¿›ç¨‹åœ¨æ—¶åˆ»å‡†å¤‡è¿è¡Œçš„çŠ¶æ€ã€‚å½“å¤„äºè¿™ä¸ªçŠ¶æ€çš„è¿›ç¨‹è·å¾—æ—¶é—´ç‰‡çš„æ—¶å€™ï¼Œå°±æ˜¯åœ¨è¿è¡Œä¸­ï¼›å¦‚æœæ²¡æœ‰è·å¾—æ—¶é—´ç‰‡ï¼Œå°±è¯´æ˜å®ƒè¢«å…¶ä»–è¿›ç¨‹æŠ¢å äº†ï¼Œåœ¨ç­‰å¾…å†æ¬¡åˆ†é…æ—¶é—´ç‰‡ã€‚</p><p>åœ¨è¿è¡Œä¸­çš„è¿›ç¨‹ï¼Œä¸€æ—¦è¦è¿›è¡Œä¸€äº›I/Oæ“ä½œï¼Œéœ€è¦ç­‰å¾…I/Oå®Œæ¯•ï¼Œè¿™ä¸ªæ—¶å€™ä¼šé‡Šæ”¾CPUï¼Œè¿›å…¥ç¡çœ çŠ¶æ€ã€‚</p><p>åœ¨Linuxä¸­ï¼Œæœ‰ä¸¤ç§ç¡çœ çŠ¶æ€ã€‚</p><p>ä¸€ç§æ˜¯<strong>TASK_INTERRUPTIBLE</strong>ï¼Œ<strong>å¯ä¸­æ–­çš„ç¡çœ çŠ¶æ€</strong>ã€‚è¿™æ˜¯ä¸€ç§æµ…ç¡çœ çš„çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè™½ç„¶åœ¨ç¡çœ ï¼Œç­‰å¾…I/Oå®Œæˆï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™ä¸€ä¸ªä¿¡å·æ¥çš„æ—¶å€™ï¼Œè¿›ç¨‹è¿˜æ˜¯è¦è¢«å”¤é†’ã€‚åªä¸è¿‡å”¤é†’åï¼Œä¸æ˜¯ç»§ç»­åˆšæ‰çš„æ“ä½œï¼Œè€Œæ˜¯è¿›è¡Œä¿¡å·å¤„ç†ã€‚å½“ç„¶ç¨‹åºå‘˜å¯ä»¥æ ¹æ®è‡ªå·±çš„æ„æ„¿ï¼Œæ¥å†™ä¿¡å·å¤„ç†å‡½æ•°ï¼Œä¾‹å¦‚æ”¶åˆ°æŸäº›ä¿¡å·ï¼Œå°±æ”¾å¼ƒç­‰å¾…è¿™ä¸ªI/Oæ“ä½œå®Œæˆï¼Œç›´æ¥é€€å‡ºï¼›æˆ–è€…æ”¶åˆ°æŸäº›ä¿¡æ¯ï¼Œç»§ç»­ç­‰å¾…ã€‚</p><p>å¦ä¸€ç§ç¡çœ æ˜¯<strong>TASK_UNINTERRUPTIBLE</strong>ï¼Œ<strong>ä¸å¯ä¸­æ–­çš„ç¡çœ çŠ¶æ€</strong>ã€‚è¿™æ˜¯ä¸€ç§æ·±åº¦ç¡çœ çŠ¶æ€ï¼Œä¸å¯è¢«ä¿¡å·å”¤é†’ï¼Œåªèƒ½æ­»ç­‰I/Oæ“ä½œå®Œæˆã€‚ä¸€æ—¦I/Oæ“ä½œå› ä¸ºç‰¹æ®ŠåŸå› ä¸èƒ½å®Œæˆï¼Œè¿™ä¸ªæ—¶å€™ï¼Œè°ä¹Ÿå«ä¸é†’è¿™ä¸ªè¿›ç¨‹äº†ã€‚ä½ å¯èƒ½ä¼šè¯´ï¼Œæˆ‘killå®ƒå‘¢ï¼Ÿåˆ«å¿˜äº†ï¼Œkillæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªä¿¡å·ï¼Œæ—¢ç„¶è¿™ä¸ªçŠ¶æ€ä¸å¯è¢«ä¿¡å·å”¤é†’ï¼Œkillä¿¡å·ä¹Ÿè¢«å¿½ç•¥äº†ã€‚é™¤éé‡å¯ç”µè„‘ï¼Œæ²¡æœ‰å…¶ä»–åŠæ³•ã€‚</p><p>å› æ­¤ï¼Œè¿™å…¶å®æ˜¯ä¸€ä¸ªæ¯”è¾ƒå±é™©çš„äº‹æƒ…ï¼Œé™¤éç¨‹åºå‘˜æå…¶æœ‰æŠŠæ¡ï¼Œä¸ç„¶è¿˜æ˜¯ä¸è¦è®¾ç½®æˆTASK_UNINTERRUPTIBLEã€‚</p><p>äºæ˜¯ï¼Œæˆ‘ä»¬å°±æœ‰äº†ä¸€ç§æ–°çš„è¿›ç¨‹ç¡çœ çŠ¶æ€ï¼Œ<strong>TASK_KILLABLEï¼Œå¯ä»¥ç»ˆæ­¢çš„æ–°ç¡çœ çŠ¶æ€</strong>ã€‚è¿›ç¨‹å¤„äºè¿™ç§çŠ¶æ€ä¸­ï¼Œå®ƒçš„è¿è¡ŒåŸç†ç±»ä¼¼TASK_UNINTERRUPTIBLEï¼Œåªä¸è¿‡å¯ä»¥å“åº”è‡´å‘½ä¿¡å·ã€‚</p><p>ä»å®šä¹‰å¯ä»¥çœ‹å‡ºï¼ŒTASK_WAKEKILLç”¨äºåœ¨æ¥æ”¶åˆ°è‡´å‘½ä¿¡å·æ—¶å”¤é†’è¿›ç¨‹ï¼Œè€ŒTASK_KILLABLEç›¸å½“äºè¿™ä¸¤ä½éƒ½è®¾ç½®äº†ã€‚</p><pre><code>#define TASK_KILLABLE           (TASK_WAKEKILL | TASK_UNINTERRUPTIBLE)\n</code></pre><p>TASK_STOPPEDæ˜¯åœ¨è¿›ç¨‹æ¥æ”¶åˆ°SIGSTOPã€SIGTTINã€SIGTSTPæˆ–è€…SIGTTOUä¿¡å·ä¹‹åè¿›å…¥è¯¥çŠ¶æ€ã€‚</p><p>TASK_TRACEDè¡¨ç¤ºè¿›ç¨‹è¢«debuggerç­‰è¿›ç¨‹ç›‘è§†ï¼Œè¿›ç¨‹æ‰§è¡Œè¢«è°ƒè¯•ç¨‹åºæ‰€åœæ­¢ã€‚å½“ä¸€ä¸ªè¿›ç¨‹è¢«å¦å¤–çš„è¿›ç¨‹æ‰€ç›‘è§†ï¼Œæ¯ä¸€ä¸ªä¿¡å·éƒ½ä¼šè®©è¿›ç¨‹è¿›å…¥è¯¥çŠ¶æ€ã€‚</p><p>ä¸€æ—¦ä¸€ä¸ªè¿›ç¨‹è¦ç»“æŸï¼Œå…ˆè¿›å…¥çš„æ˜¯EXIT_ZOMBIEçŠ¶æ€ï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™å®ƒçš„çˆ¶è¿›ç¨‹è¿˜æ²¡æœ‰ä½¿ç”¨wait()ç­‰ç³»ç»Ÿè°ƒç”¨æ¥è·çŸ¥å®ƒçš„ç»ˆæ­¢ä¿¡æ¯ï¼Œæ­¤æ—¶è¿›ç¨‹å°±æˆäº†åƒµå°¸è¿›ç¨‹ã€‚</p><p>EXIT_DEADæ˜¯è¿›ç¨‹çš„æœ€ç»ˆçŠ¶æ€ã€‚</p><p>EXIT_ZOMBIEå’ŒEXIT_DEADä¹Ÿå¯ä»¥ç”¨äºexit_stateã€‚</p><p>ä¸Šé¢çš„è¿›ç¨‹çŠ¶æ€å’Œè¿›ç¨‹çš„è¿è¡Œã€è°ƒåº¦æœ‰å…³ç³»ï¼Œè¿˜æœ‰å…¶ä»–çš„ä¸€äº›çŠ¶æ€ï¼Œæˆ‘ä»¬ç§°ä¸º<strong>æ ‡å¿—</strong>ã€‚æ”¾åœ¨flagså­—æ®µä¸­ï¼Œè¿™äº›å­—æ®µéƒ½è¢«å®šä¹‰æˆä¸º<strong>å®</strong>ï¼Œä»¥PFå¼€å¤´ã€‚æˆ‘è¿™é‡Œä¸¾å‡ ä¸ªä¾‹å­ã€‚</p><pre><code>#define PF_EXITING\t\t0x00000004\n#define PF_VCPU\t\t\t0x00000010\n#define PF_FORKNOEXEC\t\t0x00000040\n</code></pre><p><strong>PF_EXITING</strong>è¡¨ç¤ºæ­£åœ¨é€€å‡ºã€‚å½“æœ‰è¿™ä¸ªflagçš„æ—¶å€™ï¼Œåœ¨å‡½æ•°find_alive_threadä¸­ï¼Œæ‰¾æ´»ç€çš„çº¿ç¨‹ï¼Œé‡åˆ°æœ‰è¿™ä¸ªflagçš„ï¼Œå°±ç›´æ¥è·³è¿‡ã€‚</p><p><strong>PF_VCPU</strong>è¡¨ç¤ºè¿›ç¨‹è¿è¡Œåœ¨è™šæ‹ŸCPUä¸Šã€‚åœ¨å‡½æ•°account_system_timeä¸­ï¼Œç»Ÿè®¡è¿›ç¨‹çš„ç³»ç»Ÿè¿è¡Œæ—¶é—´ï¼Œå¦‚æœæœ‰è¿™ä¸ªflagï¼Œå°±è°ƒç”¨account_guest_timeï¼ŒæŒ‰ç…§å®¢æˆ·æœºçš„æ—¶é—´è¿›è¡Œç»Ÿè®¡ã€‚</p><p><strong>PF_FORKNOEXEC</strong>è¡¨ç¤ºforkå®Œäº†ï¼Œè¿˜æ²¡æœ‰execã€‚åœ¨_do_forkå‡½æ•°é‡Œé¢è°ƒç”¨copy_processï¼Œè¿™ä¸ªæ—¶å€™æŠŠflagè®¾ç½®ä¸ºPF_FORKNOEXECã€‚å½“execä¸­è°ƒç”¨äº†load_elf_binaryçš„æ—¶å€™ï¼ŒåˆæŠŠè¿™ä¸ªflagå»æ‰ã€‚</p><h2>è¿›ç¨‹è°ƒåº¦</h2><p>è¿›ç¨‹çš„çŠ¶æ€åˆ‡æ¢å¾€å¾€æ¶‰åŠè°ƒåº¦ï¼Œä¸‹é¢è¿™äº›å­—æ®µéƒ½æ˜¯ç”¨äºè°ƒåº¦çš„ã€‚ä¸ºäº†è®©ä½ ç†è§£task_structè¿›ç¨‹ç®¡ç†çš„å…¨è²Œï¼Œæˆ‘å…ˆåœ¨è¿™é‡Œåˆ—ä¸€ä¸‹ï¼Œå’±ä»¬åé¢ä¼šæœ‰å•ç‹¬çš„ç« èŠ‚è®²è§£ï¼Œè¿™é‡Œä½ åªè¦å¤§æ¦‚çœ‹ä¸€ä¸‹é‡Œé¢çš„æ³¨é‡Šå°±å¥½äº†ã€‚</p><pre><code>//æ˜¯å¦åœ¨è¿è¡Œé˜Ÿåˆ—ä¸Š\nint\t\t\t\ton_rq;\n//ä¼˜å…ˆçº§\nint\t\t\t\tprio;\nint\t\t\t\tstatic_prio;\nint\t\t\t\tnormal_prio;\nunsigned int\t\t\trt_priority;\n//è°ƒåº¦å™¨ç±»\nconst struct sched_class\t*sched_class;\n//è°ƒåº¦å®ä½“\nstruct sched_entity\t\tse;\nstruct sched_rt_entity\t\trt;\nstruct sched_dl_entity\t\tdl;\n//è°ƒåº¦ç­–ç•¥\nunsigned int\t\t\tpolicy;\n//å¯ä»¥ä½¿ç”¨å“ªäº›CPU\nint\t\t\t\tnr_cpus_allowed;\ncpumask_t\t\t\tcpus_allowed;\nstruct sched_info\t\tsched_info;\n</code></pre><h2>æ€»ç»“æ—¶åˆ»</h2><p>è¿™ä¸€èŠ‚ï¼Œæˆ‘ä»¬è®²è¿°äº†è¿›ç¨‹ç®¡ç†å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œæˆ‘è¿˜æ˜¯ç”»ä¸€ä¸ªå›¾æ€»ç»“ä¸€ä¸‹ã€‚è¿™ä¸ªå›¾æ˜¯è¿›ç¨‹ç®¡ç†task_structçš„ç»“æ„å›¾ã€‚å…¶ä¸­çº¢è‰²çš„éƒ¨åˆ†æ˜¯ä»Šå¤©è®²çš„éƒ¨åˆ†ï¼Œä½ å¯ä»¥å¯¹ç€è¿™å¼ å›¾è¯´å‡ºå®ƒä»¬çš„å«ä¹‰ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/01/e8/016ae7fb63f8b3fd0ca072cb9964e3e8.jpeg?wh=2098*2332\" alt=\"\"></p><h2>è¯¾å ‚ç»ƒä¹ </h2><p>è¿™ä¸€èŠ‚æˆ‘ä»¬è®²äº†ä»»åŠ¡çš„çŠ¶æ€ï¼Œä½ å¯ä»¥è¯•ç€åœ¨ä»£ç é‡Œé¢æœç´¢ä¸€ä¸‹è¿™äº›çŠ¶æ€æ”¹å˜çš„åœ°æ–¹æ˜¯å“ªä¸ªå‡½æ•°ï¼Œæ˜¯ä»€ä¹ˆæ—¶æœºï¼Œä»è€Œè¿›ä¸€æ­¥ç†è§£ä»»åŠ¡çš„æ¦‚å¿µã€‚</p><p>æ¬¢è¿ç•™è¨€å’Œæˆ‘åˆ†äº«ä½ çš„ç–‘æƒ‘å’Œè§è§£ï¼Œä¹Ÿæ¬¢è¿ä½ æ”¶è—æœ¬èŠ‚å†…å®¹ï¼Œåå¤ç ”è¯»ã€‚ä½ ä¹Ÿå¯ä»¥æŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™ä½ çš„æœ‹å‹ï¼Œå’Œä»–ä¸€èµ·å­¦ä¹ ã€è¿›æ­¥ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/8c/37/8c0a95fa07a8b9a1abfd394479bdd637.jpg?wh=1110*659\" alt=\"\"></p>","comments":[{"had_liked":false,"id":88482,"user_name":"why","can_delete":false,"product_type":"c1","uid":1012937,"ip_address":"","ucode":"C9E796E53F6F5E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/74/c9/d3439ca4.jpg","comment_is_top":false,"comment_ctime":1555927455,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"413872787871","product_id":100024701,"comment_content":"- å†…æ ¸ä¸­è¿›ç¨‹, çº¿ç¨‹ç»Ÿä¸€ä¸ºä»»åŠ¡, ç”± taks_struct è¡¨ç¤º<br>- é€šè¿‡é“¾è¡¨ä¸²èµ· task_struct<br>- task_struct ä¸­åŒ…å«: ä»»åŠ¡ID; ä»»åŠ¡çŠ¶æ€; ä¿¡å·å¤„ç†ç›¸å…³å­—æ®µ; è°ƒåº¦ç›¸å…³å­—æ®µ; äº²ç¼˜å…³ç³»; æƒé™ç›¸å…³; è¿è¡Œç»Ÿè®¡; å†…å­˜ç®¡ç†; æ–‡ä»¶ä¸æ–‡ä»¶ç³»ç»Ÿ; å†…æ ¸æ ˆ;<br>- ä»»åŠ¡ ID; åŒ…å« pid, tgid å’Œ \\*group_leader<br>    - pid(process id, çº¿ç¨‹çš„id); tgid(thread group id, æ‰€å±è¿›ç¨‹[ä¸»çº¿ç¨‹]çš„id); group_leader æŒ‡å‘ tgid çš„ç»“æ„ä½“<br>    - é€šè¿‡å¯¹æ¯” pid å’Œ tgid å¯åˆ¤æ–­æ˜¯è¿›ç¨‹è¿˜æ˜¯çº¿ç¨‹<br>- ä¿¡å·å¤„ç†, åŒ…å«é˜»å¡æš‚ä¸å¤„ç†; ç­‰å¾…å¤„ç†; æ­£åœ¨å¤„ç†çš„ä¿¡å·<br>    - ä¿¡å·å¤„ç†å‡½æ•°é»˜è®¤ä½¿ç”¨ç”¨æˆ·æ€çš„å‡½æ•°æ ˆ, ä¹Ÿå¯ä»¥å¼€è¾Ÿæ–°çš„æ ˆä¸“é—¨ç”¨äºä¿¡å·å¤„ç†, ç”± sas_ss_xxx æŒ‡å®š<br>    - é€šè¿‡ pending&#47;shared_pending åŒºåˆ†è¿›ç¨‹å’Œçº¿ç¨‹çš„ä¿¡å·<br>- ä»»åŠ¡çŠ¶æ€; åŒ…å« state; exit_state; flags<br>    - å‡†å¤‡è¿è¡ŒçŠ¶æ€ TASK_RUNNING<br>    - ç¡çœ çŠ¶æ€ï¼šå¯ä¸­æ–­; ä¸å¯ä¸­æ–­; å¯æ€<br>        - å¯ä¸­æ–­ TASK_INTERRUPTIBLE, æ”¶åˆ°ä¿¡å·è¦è¢«å”¤é†’<br>        - ä¸å¯ä¸­æ–­ TASK_UNINTERRUPTIBLE, æ”¶åˆ°ä¿¡å·ä¸ä¼šè¢«å”¤é†’, ä¸èƒ½è¢«kill, åªèƒ½é‡å¯<br>        - å¯æ€ TASK_KILLABLE, å¯ä»¥å“åº”è‡´å‘½ä¿¡å·, ç”±ä¸å¯ä¸­æ–­ä¸ TASK_WAKEKILL ç»„åˆ<br>    - åœæ­¢çŠ¶æ€ TASK_STOPPED, ç”±ä¿¡å· SIGSTOP, SIGTTIN, SIGTSTP ä¸ SIGTTOU è§¦å‘è¿›å…¥<br>    - è°ƒè¯•è·Ÿè¸ª TASK_TRACEDï¼Œ è¢« debugger ç­‰è¿›ç¨‹ç›‘è§†æ—¶è¿›å…¥<br>    - ç»“æŸçŠ¶æ€(åŒ…å« exit_state)<br>        - EXIT_ZOMBIE, çˆ¶è¿›ç¨‹è¿˜æ²¡æœ‰ wait()<br>        - EXIT_DEAD, æœ€ç»ˆçŠ¶æ€<br>    - flags, ä¾‹å¦‚ PF_VCPU è¡¨ç¤ºè¿è¡Œåœ¨è™šæ‹Ÿ CPU ä¸Š; PF_FORKNOEXEC \\_do_fork å‡½æ•°é‡Œè®¾ç½®, exec å‡½æ•°ä¸­æ¸…é™¤<br>- è¿›ç¨‹è°ƒåº¦; åŒ…å« æ˜¯å¦åœ¨è¿è¡Œé˜Ÿåˆ—; ä¼˜å…ˆçº§; è°ƒåº¦ç­–ç•¥; å¯ä»¥ä½¿ç”¨é‚£äº› CPU ç­‰ä¿¡æ¯.","like_count":97,"discussions":[{"author":{"id":2028811,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f5/0b/73628618.jpg","nickname":"å…”å˜Ÿå˜Ÿ","note":"","ucode":"5A9042B4C7670C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389568,"discussion_content":"è¿™äº›åŠè§’ç¬¦å·è§†è§‰æ•ˆæœæœ‰ç‚¹ç¾éš¾â€¦â€¦","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1629341699,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90830,"user_name":"å”ç¨³","can_delete":false,"product_type":"c1","uid":1080853,"ip_address":"","ucode":"DCE325A0802FF2","user_header":"https://static001.geekbang.org/account/avatar/00/10/7e/15/dd163405.jpg","comment_is_top":false,"comment_ctime":1556680438,"is_pvip":false,"replies":[{"id":"49500","content":"ä¸åœ¨ä»»ä½•ä¸€ä¸ªçº¿ç¨‹ä¸­ï¼Œåé¢ä¼šè¯¦ç»†è§£æä¿¡å·å¤„ç†çš„è¿‡ç¨‹","user_name":"ä½œè€…å›å¤","comment_id":90830,"uid":"1001590","ip_address":"","utype":1,"ctime":1567676780,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":2,"race_medal":0,"score":"70276157174","product_id":100024701,"comment_content":"ä»‹ç»çš„å¾ˆè¯¦ç»†ï¼Œèµä¸€ä¸ªã€‚<br>æœ‰ä¸ªé—®é¢˜ä¸€ç›´çº ç»“ï¼Œä¿¡å·å¤„ç†å‡½æ•°åˆ°åº•æ˜¯åœ¨å“ªä¸ªçº¿ç¨‹ä¸­è¿è¡Œçš„ï¼Ÿ","like_count":16,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448680,"discussion_content":"ä¸åœ¨ä»»ä½•ä¸€ä¸ªçº¿ç¨‹ä¸­ï¼Œåé¢ä¼šè¯¦ç»†è§£æä¿¡å·å¤„ç†çš„è¿‡ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567676780,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1510495,"avatar":"https://static001.geekbang.org/account/avatar/00/17/0c/5f/4cbcbfb9.jpg","nickname":"hello","note":"","ucode":"C6FC61A90F202B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5297,"discussion_content":"æˆ‘ä¹Ÿæƒ³é—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566140665,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":88231,"user_name":"ç¬¬åäºº","can_delete":false,"product_type":"c1","uid":1050878,"ip_address":"","ucode":"D0DC254CB2AC7E","user_header":"https://static001.geekbang.org/account/avatar/00/10/08/fe/94185b25.jpg","comment_is_top":false,"comment_ctime":1555897269,"is_pvip":false,"replies":[{"id":"32051","content":"ä¸€ä¸ªæ˜¯idï¼Œä¸€ä¸ªæ˜¯æŒ‡é’ˆï¼ŒåªçŸ¥é“IDï¼Œä¸å¾—ä¸€ä¸ªä¸ªæ‰¾ä¹ˆ","user_name":"ä½œè€…å›å¤","comment_id":88231,"uid":"1001590","ip_address":"","utype":1,"ctime":1556197636,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":2,"race_medal":0,"score":"65980406709","product_id":100024701,"comment_content":"tgidå’Œthreadleaderéƒ½æ˜¯è¿›ç¨‹çš„ä¸»çº¿ç¨‹ï¼Œé‚£è¿™ä¸¤ä¸ªå‚æ•°ä¸å°±é‡å¤äº†ä¹ˆï¼Ÿæœ‰å…¶ä»–çš„å«ä¹‰ä¹ˆï¼Ÿ","like_count":15,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447774,"discussion_content":"ä¸€ä¸ªæ˜¯idï¼Œä¸€ä¸ªæ˜¯æŒ‡é’ˆï¼ŒåªçŸ¥é“IDï¼Œä¸å¾—ä¸€ä¸ªä¸ªæ‰¾ä¹ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556197636,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1610552,"avatar":"https://static001.geekbang.org/account/avatar/00/18/93/38/71615300.jpg","nickname":"DayDayUp","note":"","ucode":"9C53659518AB74","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350987,"discussion_content":"ä¸€ä¸ªæ˜¯ä¸»çº¿ç¨‹çš„idï¼Œä¸€ç›´æ˜¯æŒ‡å‘è¿™ä¸ªä¸»çº¿ç¨‹çš„æŒ‡é’ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614090296,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125670,"user_name":"ECHOLOG","can_delete":false,"product_type":"c1","uid":1186004,"ip_address":"","ucode":"4350973F4D4FB0","user_header":"https://static001.geekbang.org/account/avatar/00/12/18/d4/73260a43.jpg","comment_is_top":false,"comment_ctime":1566223980,"is_pvip":true,"replies":[{"id":"46258","content":"å¯¹çš„pthread_join","user_name":"ä½œè€…å›å¤","comment_id":125670,"uid":"1001590","ip_address":"","utype":1,"ctime":1566280180,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"53105831532","product_id":100024701,"comment_content":"ä¸¾ä¸€åä¸‰ä¸€ä¸‹ï¼Œå› ä¸ºçº¿ç¨‹å’Œè¿›ç¨‹éƒ½æ˜¯task_structè¡¨ç¤ºçš„ï¼Œæ‰€ä»¥æœ‰åƒµå°¸è¿›ç¨‹ï¼Œé‚£å°±æœ‰åƒµå°¸çº¿ç¨‹","like_count":13,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463654,"discussion_content":"å¯¹çš„pthread_join","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566280180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93741,"user_name":"å‹¤åŠ³çš„å°èƒ–å­-libo","can_delete":false,"product_type":"c1","uid":1158344,"ip_address":"","ucode":"5BB20CD5A56568","user_header":"https://static001.geekbang.org/account/avatar/00/11/ac/c8/4b1c0d40.jpg","comment_is_top":false,"comment_ctime":1557577295,"is_pvip":false,"replies":[{"id":"33891","content":"ä¸€ä¸ªæ˜¯idï¼Œä¸€ä¸ªæ˜¯åœ°å€ï¼Œæœ‰åœ°å€å°±èƒ½ç›´æ¥æ‰¾åˆ°äº†","user_name":"ä½œè€…å›å¤","comment_id":93741,"uid":"1001590","ip_address":"","utype":1,"ctime":1557899953,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"40212282959","product_id":100024701,"comment_content":"ä»»ä½•ä¸€ä¸ªè¿›ç¨‹ï¼Œå¦‚æœåªæœ‰ä¸»çº¿ç¨‹ï¼Œé‚£ pid æ˜¯è‡ªå·±ï¼Œtgid æ˜¯è‡ªå·±ï¼Œgroup_leader æŒ‡å‘çš„è¿˜æ˜¯è‡ªå·±ã€‚<br><br>ä½†æ˜¯æœ‰å¤šä¸ªçº¿ç¨‹å°±ä¸ä¸€æ ·äº†ï¼Œpidæ˜¯è¿™ä¸ªå­çº¿ç¨‹ï¼Œtgidå’Œgroup_leaderéƒ½æ˜¯æŒ‡å‘ä¸»çº¿ç¨‹ã€‚<br><br>å¥½å¥‡ï¼Œtgidä¸group_leaderä¸å°±ç›¸åŒä½œç”¨å—ï¼Ÿåœ¨ä¸Šé¢çš„äºŒç§æƒ…å†µä¸‹ï¼Œä¸ºä»€ä¹ˆéœ€è¦äºŒä¸ªç›¸åŒåŠŸèƒ½çš„åŸŸï¼Ÿ","like_count":9,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449753,"discussion_content":"ä¸€ä¸ªæ˜¯idï¼Œä¸€ä¸ªæ˜¯åœ°å€ï¼Œæœ‰åœ°å€å°±èƒ½ç›´æ¥æ‰¾åˆ°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557899953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":88327,"user_name":"Egos","can_delete":false,"product_type":"c1","uid":1071143,"ip_address":"","ucode":"9F0055B140E935","user_header":"https://static001.geekbang.org/account/avatar/00/10/58/27/1188e017.jpg","comment_is_top":false,"comment_ctime":1555905123,"is_pvip":false,"replies":[{"id":"32048","content":"è¿›ç¨‹å’Œçº¿ç¨‹åœ¨ä¸€èµ·çš„é“¾è¡¨","user_name":"ä½œè€…å›å¤","comment_id":88327,"uid":"1001590","ip_address":"","utype":1,"ctime":1556197338,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":2,"race_medal":0,"score":"35915643491","product_id":100024701,"comment_content":"çœ‹æ–‡ç« ç†è§£çš„task_struct æ˜¯Thread çš„ä¸€ä¸ªé“¾è¡¨ï¼Ÿ","like_count":9,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447786,"discussion_content":"è¿›ç¨‹å’Œçº¿ç¨‹åœ¨ä¸€èµ·çš„é“¾è¡¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556197338,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1510495,"avatar":"https://static001.geekbang.org/account/avatar/00/17/0c/5f/4cbcbfb9.jpg","nickname":"hello","note":"","ucode":"C6FC61A90F202B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5296,"discussion_content":"å•çº¿ç¨‹çš„è¿›ç¨‹æ˜¯ç‹¬äº«ä¸€äº›èµ„æºçš„ä»»åŠ¡ï¼Œå¤šçº¿ç¨‹çš„è¿›ç¨‹æ˜¯å…±äº«ä¸€éƒ¨åˆ†èµ„æºçš„å¤šä¸ªä»»åŠ¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566140643,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":88797,"user_name":"ä¸€ç¬”ä¸€ç”»","can_delete":false,"product_type":"c1","uid":1495254,"ip_address":"","ucode":"2B9BC8ADF97106","user_header":"https://static001.geekbang.org/account/avatar/00/16/d0/d6/f335954b.jpg","comment_is_top":false,"comment_ctime":1556002304,"is_pvip":false,"replies":[{"id":"32038","content":"æ“ä½œç³»ç»Ÿçš„ç†è®ºæ˜¯æœ‰å¤šç§æ¨¡å‹çš„ï¼Œå¤šå¯¹ä¸€ï¼Œä¸€å¯¹ä¸€ï¼Œå¤šå¯¹å¤šï¼ŒLinuxæ˜¯ä¸€å¯¹ä¸€ã€‚","user_name":"ä½œè€…å›å¤","comment_id":88797,"uid":"1001590","ip_address":"","utype":1,"ctime":1556195929,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"31620773376","product_id":100024701,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸‹ï¼Œä¹‹å‰çœ‹ä¹¦ä¸Šè¯´ç”¨æˆ·è¿›ç¨‹å’Œå†…æ ¸çº¿ç¨‹æ˜¯å¤šå¯¹å¤šçš„æ¨¡å‹ï¼Ÿè¿™ä¸ªæ€ä¹ˆç†è§£ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„å‘è¡Œç‰ˆåˆæ˜¯ä»€ä¹ˆæ ·çš„æ¨¡å‹ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447904,"discussion_content":"æ“ä½œç³»ç»Ÿçš„ç†è®ºæ˜¯æœ‰å¤šç§æ¨¡å‹çš„ï¼Œå¤šå¯¹ä¸€ï¼Œä¸€å¯¹ä¸€ï¼Œå¤šå¯¹å¤šï¼ŒLinuxæ˜¯ä¸€å¯¹ä¸€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556195929,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":88237,"user_name":"ä¸­ç¿…Lzc","can_delete":false,"product_type":"c1","uid":1130926,"ip_address":"","ucode":"9CD64F54B8F003","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/F9wBsptrryHAiaicsqEHREIx2ib37EgBuSFOaEZtCZVN1vP5Irojx8zedDwia5m1OLZ6hTLO1cdGrAK2L1IiaqqvnfQ/132","comment_is_top":false,"comment_ctime":1555897917,"is_pvip":false,"replies":[{"id":"32050","content":"å¯¹çš„","user_name":"ä½œè€…å›å¤","comment_id":88237,"uid":"1001590","ip_address":"","utype":1,"ctime":1556197613,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"31620668989","product_id":100024701,"comment_content":"å¦‚æœè¿›ç¨‹åˆ›å»ºäº†å…¶ä»–å¤šä¸ªçº¿ç¨‹ï¼Œé‚£ä¹ˆtpidå°±æ˜¯ä¸»çº¿ç¨‹idï¼Œpidå°±æ˜¯å…¶ä»–çº¿ç¨‹idäº†ï¼Œä¸¤è€…è‚¯å®šä¸ç›¸ç­‰å•Š","like_count":7,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447777,"discussion_content":"å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556197613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":88624,"user_name":"ç§¯å¾®è‡´çŸ¥","can_delete":false,"product_type":"c1","uid":1476670,"ip_address":"","ucode":"34EDEAB1112122","user_header":"https://static001.geekbang.org/account/avatar/00/16/88/3e/dd4fa2b6.jpg","comment_is_top":false,"comment_ctime":1555975351,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"27325779127","product_id":100024701,"comment_content":"è€å¸ˆå¥½ï¼Œæœ‰ä¸ªç–‘æƒ‘æ‰€æœ‰çš„task_structä¸ºä»€ä¹ˆç”¨é“¾è¡¨ä¸²è”èµ·æ¥è€Œä¸æ˜¯ç”¨æ•°ç»„?<br>æ•°ç»„åœ¨ç‰©ç†ç©ºé—´ä¸Šå¿…é¡»è¦è¿ç»­ï¼Œè€Œé“¾è¡¨ç‰©ç†ç©ºé—´ä¸Šå¯ä»¥ä¸è¿ç»­ã€‚","like_count":6,"discussions":[{"author":{"id":1167046,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ce/c6/958212b5.jpg","nickname":"sugar","note":"","ucode":"454538FF253B5F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":14357,"discussion_content":"ä¸€ä¸ªtaskç»“æŸåå°±æ¶ˆå¤±äº†ï¼Œæ•°ç»„è¿™ç§è¿ç»­å­˜å‚¨ç»“æ„ä¼šå‡ºç°ç©ºæ´ï¼Œé“¾è¡¨ä¸ä¼šã€‚è€Œæ•°ç»„ç›¸æ¯”é“¾è¡¨çš„ä¼˜åŠ¿æ˜¯éšæœºè¯»å–ï¼Œ","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1568735805,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1389695,"avatar":"https://static001.geekbang.org/account/avatar/00/15/34/7f/6c99fc74.jpg","nickname":"å¤§ç†ŠçŒ«æœ‰å®è´","note":"","ucode":"765AC2CF55B9B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":122948,"discussion_content":"ä½¿ç”¨æ•°ç»„éœ€è¦æå‰åˆ†é…å›ºå®šå¤§å°çš„å†…å­˜ è¿™å°±æ„å‘³ç€ä½ é™åˆ¶äº†ç³»ç»Ÿä¸­å¯ä»¥å­˜åœ¨çš„æœ€å¤§çº¿ç¨‹çš„æ•°é‡ è€Œç”¨é“¾è¡¨è¿˜æœ‰ä¸€ä¸ªä¼˜åŠ¿æ˜¯æ›´å¿«çš„æ’å…¥ä¸åˆ é™¤ å®é™…ä¸­ä¹Ÿä¸éœ€è¦è¿ç»­å†…å­˜æ¥åšè¿™ä»¶äº‹æƒ…","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1578381762,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":88541,"user_name":"Dracula","can_delete":false,"product_type":"c1","uid":1081411,"ip_address":"","ucode":"35C54743F2C3DB","user_header":"https://static001.geekbang.org/account/avatar/00/10/80/43/b7c56c58.jpg","comment_is_top":false,"comment_ctime":1555939093,"is_pvip":true,"replies":[{"id":"32043","content":"å¾ˆå¤šæ’å…¥å’Œåˆ é™¤","user_name":"ä½œè€…å›å¤","comment_id":88541,"uid":"1001590","ip_address":"","utype":1,"ctime":1556196120,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"27325742869","product_id":100024701,"comment_content":"è€å¸ˆå¥½ï¼Œæœ‰ä¸ªç–‘æƒ‘æ‰€æœ‰çš„task_structä¸ºä»€ä¹ˆç”¨é“¾è¡¨ä¸²è”èµ·æ¥è€Œä¸æ˜¯ç”¨æ•°ç»„","like_count":6,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447822,"discussion_content":"å¾ˆå¤šæ’å…¥å’Œåˆ é™¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556196120,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":272053,"user_name":"å¼€å¿ƒ","can_delete":false,"product_type":"c1","uid":1517457,"ip_address":"","ucode":"C8E08E8724C7CE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKkzrezV2dOBAgickt9DLzabz3dNFYyDEVXENMQ5ibrWhFbFqXIOia3ZaR21pozvB7UfoxJx4Ar688sA/132","comment_is_top":false,"comment_ctime":1609919097,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"23084755577","product_id":100024701,"comment_content":"1. list_headçš„ç»“æ„ï¼š<br>struct list_head {<br>\tstruct list_head *prev;<br>\tstruct list_head *next;<br>}<br>2. task_structç»“æ„ä¸­æœ‰ä¸€ä¸ªæˆå‘˜å˜é‡taskï¼Œå…¶ç±»å‹ä¸ºlist_head,é€šè¿‡taskï¼ŒæŠŠæ‰€æœ‰task_structæ„æˆä¸€ä¸ªåŒå‘é“¾è¡¨<br>struct task_struct {<br>\t...<br>\tstruct list_head task;<br>\t...<br>}<br>3. ä½†æ˜¯ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä¸¾ä¸ªä¾‹å­ï¼šå‡è®¾ç°åœ¨æœ‰ä¸‰ä¸ªtask_struct,å…¶å…³è”é¡ºåºä¸ºä¸º TSA &lt;-&gt; TSB &lt;-&gt; TSCã€‚æˆ‘ä»¬å¸Œæœ›é€šè¿‡ TSA æ‰¾åˆ°ä»–çš„ä¸‹ä¸€ä¸ªä»»åŠ¡ TSBã€‚<br>é¦–å…ˆé€šè¿‡ TSA æ‰¾åˆ°å…¶æˆå‘˜å˜é‡ taskï¼Œç„¶åé€šè¿‡ task æ‰¾åˆ° nextï¼ˆTSBä¸­çš„taskï¼‰ï¼Œä½†æ˜¯æˆ‘ä»¬è¦çš„æ˜¯TSB,æˆ‘ä»¬åªæ‰¾åˆ°äº†TSBä¸­çš„æˆå‘˜å˜é‡ taskã€‚<br>æ‰€ä»¥å†…æ ¸æœ‰ä¸€ä¸ªå®å®šä¹‰ï¼šlist_entry (ptr,type,member)ï¼Œå°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä½¿ç”¨list_entryå¯ä»¥é€šè¿‡taskçš„åœ°å€æ‰¾åˆ°å®ƒæ‰€åœ¨çš„ task_struct çš„åœ°å€ã€‚<br>4. list_entry (ptr,type,member) åŸç†ï¼š<br>æ ¹æ®ç»“æ„ä½“ä¸­çš„ä¸€ä¸ªæˆå‘˜å˜é‡åœ°å€å¯¼å‡ºåŒ…å«è¿™ä¸ªæˆå‘˜å˜é‡memçš„structåœ°å€ã€‚<br>å¤§æ¦‚å°±æ˜¯æˆ‘ä»¬çŸ¥é“ taskçš„åœ°å€ï¼Œtaskå˜é‡çš„åç§°ï¼Œtaskæ‰€å¤„çš„ç»“æ„ä½“çš„ç±»å‹ï¼ˆåœ¨è¿™é‡Œå°±æ˜¯task_structï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°å“ªäº›å˜é‡ä¸­å¼•ç”¨äº†taskï¼ŒåŒæ—¶é€šè¿‡å˜é‡åç§°ï¼Œæ‰€å¤„ç»“æ„ä½“ç±»å‹ç­›é€‰ï¼Œå¾—åˆ°æ‰€å¤„ç»“æ„ä½“çš„åœ°å€","like_count":5},{"had_liked":false,"id":221774,"user_name":"jnh1983","can_delete":false,"product_type":"c1","uid":1258486,"ip_address":"","ucode":"D6CF456D25CB67","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL70jHXdicq1nGGrHibXQ4ticFqH7GicYS8iciaicbmCO9qJy0Y5Hrb88MPs9Srzn85cAyoMOibyDu9xIhwhg/132","comment_is_top":false,"comment_ctime":1590589598,"is_pvip":false,"replies":[{"id":"83062","content":"èµ","user_name":"ä½œè€…å›å¤","comment_id":221774,"uid":"1001590","ip_address":"","utype":1,"ctime":1591784890,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":2,"race_medal":0,"score":"18770458782","product_id":100024701,"comment_content":"æºç æ˜¯ï¼šinclude&#47;linux&#47;sched.h<br><br>è€å¸ˆæŠŠä»£ç å½’çº³äº†ä¸€ä¸‹ï¼Œæ–¹ä¾¿ç†è§£<br>","like_count":4,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496564,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591784890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1235320,"avatar":"https://static001.geekbang.org/account/avatar/00/12/d9/78/8a328299.jpg","nickname":"ä½³ä½³å¤§é­”ç‹","note":"","ucode":"D5214903D85A0F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294602,"discussion_content":"æˆ‘æ˜¯åœ¨è¿™é‡Œçœ‹åˆ°çš„ï¼Œlinux/kernel/sched/sched.h\næ¥¼ä¸»ç»™çš„ä½ç½®ä¸çŸ¥é“ä¸ºä»€ä¹ˆæ²¡æœ‰å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595939300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":203830,"user_name":"herongwei","can_delete":false,"product_type":"c1","uid":1153928,"ip_address":"","ucode":"E4158BF7AD2E70","user_header":"https://static001.geekbang.org/account/avatar/00/11/9b/88/34c171f1.jpg","comment_is_top":false,"comment_ctime":1586271198,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18766140382","product_id":100024701,"comment_content":"åˆ˜è€å¸ˆå†™çš„æŠ€æœ¯æ–‡ç« ï¼Œå¦‚æŠ½ä¸å‰¥èŒ§ä¸€èˆ¬ï¼Œå€¼å¾—åå¤é˜…è¯»","like_count":4},{"had_liked":false,"id":92937,"user_name":"fangxuan","can_delete":false,"product_type":"c1","uid":1073369,"ip_address":"","ucode":"3870F2BF5679A2","user_header":"https://static001.geekbang.org/account/avatar/00/10/60/d9/829ac53b.jpg","comment_is_top":false,"comment_ctime":1557365527,"is_pvip":false,"replies":[{"id":"49408","content":"ä¸€ä¸ªã€‚","user_name":"ä½œè€…å›å¤","comment_id":92937,"uid":"1001590","ip_address":"","utype":1,"ctime":1567656926,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":1,"score":"18737234711","product_id":100024701,"comment_content":"å¦‚æœä¸€ä¸ªè¿›ç¨‹åªæœ‰ä¸»çº¿ç¨‹ï¼Œé‚£ä¹ˆtask_structæ˜¯ä¸€ä¸ªè¿˜æ˜¯ä¸¤ä¸ªï¼Ÿå¦‚æœæ˜¯ä¸€ä¸ªè¿˜å¥½ï¼Œè¿™ä¸ªtask_structæ—¢ä»£è¡¨è¿›ç¨‹ä¹Ÿä»£è¡¨ä¸»çº¿ç¨‹;å¦‚æœæ˜¯ä¸¤ä¸ªï¼Œè¿›ç¨‹çš„pid,tgidéƒ½æŒ‡å‘è‡ªå·±ï¼Œé‚£æ€ä¹ˆçŸ¥é“ä¸»çº¿ç¨‹æ˜¯è°ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449431,"discussion_content":"ä¸€ä¸ªã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567656926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93742,"user_name":"å‹¤åŠ³çš„å°èƒ–å­-libo","can_delete":false,"product_type":"c1","uid":1158344,"ip_address":"","ucode":"5BB20CD5A56568","user_header":"https://static001.geekbang.org/account/avatar/00/11/ac/c8/4b1c0d40.jpg","comment_is_top":false,"comment_ctime":1557577369,"is_pvip":false,"replies":[{"id":"33892","content":"å¯¹","user_name":"ä½œè€…å›å¤","comment_id":93742,"uid":"1001590","ip_address":"","utype":1,"ctime":1557899967,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"10147511961","product_id":100024701,"comment_content":"åº”è¯¥æ˜¯ä¸€ä¸ªå€¼ï¼Œä¸€ä¸ªæ˜¯æŒ‡é’ˆç”¨äºå¿«é€Ÿè®¿é—®å§ã€‚ã€‚","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449754,"discussion_content":"å¯¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557899967,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90944,"user_name":"LeonğŸ“·","can_delete":false,"product_type":"c1","uid":1219496,"ip_address":"","ucode":"B9BBD1EFAAE5A2","user_header":"https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg","comment_is_top":false,"comment_ctime":1556754136,"is_pvip":false,"replies":[{"id":"32629","content":"ä¸æ˜¯çš„ï¼Œå’Œè½¯ç¡¬ä¸­æ–­æ²¡æœ‰å…³ç³»ï¼Œæ˜¯ä¿¡å·åˆ°æ¥çš„æ—¶å€™çš„å¤„ç†æœºåˆ¶é—®é¢˜","user_name":"ä½œè€…å›å¤","comment_id":90944,"uid":"1001590","ip_address":"","utype":1,"ctime":1556811789,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"10146688728","product_id":100024701,"comment_content":"è€å¸ˆï¼Œå¯ä¸­æ–­ç¡çœ æ˜¯ä¸æ˜¯å¯¹åº”è½¯ä¸­æ–­ï¼Œä¸å¯ä¸­æ–­ç¡çœ å¯¹åº”ç¡¬ä¸­æ–­ï¼Œè¿™å‡ ä¸ªå¯¹åº”å…³ç³»èƒ½è¯¦ç»†è§£é‡Šä¸‹å˜›","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448737,"discussion_content":"ä¸æ˜¯çš„ï¼Œå’Œè½¯ç¡¬ä¸­æ–­æ²¡æœ‰å…³ç³»ï¼Œæ˜¯ä¿¡å·åˆ°æ¥çš„æ—¶å€™çš„å¤„ç†æœºåˆ¶é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556811789,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":89182,"user_name":"å…è´¹çš„äºº","can_delete":false,"product_type":"c1","uid":1032106,"ip_address":"","ucode":"2B12D8ED63C564","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bf/aa/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1556100450,"is_pvip":false,"replies":[{"id":"32023","content":"æ˜¯çš„ï¼Œæƒ³æƒ³æ’å…¥åˆ é™¤","user_name":"ä½œè€…å›å¤","comment_id":89182,"uid":"1001590","ip_address":"","utype":1,"ctime":1556194440,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"10146035042","product_id":100024701,"comment_content":"è¯´ç”¨æ•°ç»„æ›¿æ¢é“¾è¡¨çš„äºº  ä½ ä»¬é—®é—®é¢˜çš„æ—¶å€™æ€è€ƒè¿‡å—","like_count":3,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448043,"discussion_content":"æ˜¯çš„ï¼Œæƒ³æƒ³æ’å…¥åˆ é™¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556194440,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":88782,"user_name":"å…è´¹çš„äºº","can_delete":false,"product_type":"c1","uid":1032106,"ip_address":"","ucode":"2B12D8ED63C564","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bf/aa/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1555999441,"is_pvip":false,"replies":[{"id":"49570","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","comment_id":88782,"uid":"1001590","ip_address":"","utype":1,"ctime":1567688791,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"10145934033","product_id":100024701,"comment_content":"å…³äºEXIT_ZOMBIEçŠ¶æ€ï¼Œå¦‚æœçˆ¶è¿›ç¨‹æ˜¾å¼å¿½ç•¥å­è¿›ç¨‹çš„é€€å‡ºä¿¡å·çš„è¯ï¼Œå­è¿›ç¨‹é€€å‡ºæ—¶æ˜¯ä¸ä¼šè¿›å…¥è¯¥çŠ¶æ€çš„å§ã€‚","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447899,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567688791,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":304401,"user_name":"é©¬æŒ¯","can_delete":false,"product_type":"c1","uid":1136329,"ip_address":"","ucode":"94234F533219C1","user_header":"https://static001.geekbang.org/account/avatar/00/11/56/c9/7b3cd3e0.jpg","comment_is_top":false,"comment_ctime":1627387597,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5922354893","product_id":100024701,"comment_content":"æœ€è¿‘é‡åˆ°äº†è´Ÿè½½é«˜çš„é—®é¢˜ï¼Œè´Ÿè½½æŒ‡çš„æ˜¯åœ¨è¿è¡Œä¸­å’Œä¸å¯ä¸­æ–­ä¸­çš„è¿›ç¨‹ï¼Œæ‰€æœ‰å¦‚æœå› ä¸ºIOæ‰¥è¿›ç¨‹çŠ¶æ€æ˜¯ä¸å¯ä¸­æ–­ï¼Œé‚£å°±å¯èƒ½å‡ºç°cpuå’Œå†…å­˜ä½¿ç”¨ç‡éƒ½å¾ˆä½ï¼Œä½†æ˜¯è´Ÿè½½å¾ˆé«˜çš„ç°è±¡","like_count":1},{"had_liked":false,"id":218260,"user_name":"Brave Shine","can_delete":false,"product_type":"c1","uid":1222003,"ip_address":"","ucode":"CBB1BAF89DB936","user_header":"https://static001.geekbang.org/account/avatar/00/12/a5/73/3ddc7c77.jpg","comment_is_top":false,"comment_ctime":1589766702,"is_pvip":false,"replies":[{"id":"83089","content":"å› ä¸ºtaskè¿˜æŒ‡å‘ä¸€äº›èµ„æºï¼Œæˆ‘ä»¬ä¸€èˆ¬è¯´çº¿ç¨‹çš„æ—¶å€™ï¼Œä¸åŒ…æ‹¬è¿™äº›è¢«è¿›ç¨‹ç®¡ç†çš„èµ„æº","user_name":"ä½œè€…å›å¤","comment_id":218260,"uid":"1001590","ip_address":"","utype":1,"ctime":1591785959,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"5884733998","product_id":100024701,"comment_content":"é‚£å…¶å®å¯ä»¥ç†è§£ä¸ºlinuxå†…æ ¸è°ƒåº¦çš„æ˜¯taskï¼Œè€Œtaskå¯ä»¥æ˜¯å•çº¿ç¨‹çš„è¿›ç¨‹æˆ–è€…å¤šçº¿ç¨‹è¿›ç¨‹çš„çº¿ç¨‹ï¼Œæˆ‘æ€»æ„Ÿè§‰æœ‰ç‚¹ç»•ï¼Œä¸ºå•¥ä¸èƒ½ç›´æ¥ç†è§£æˆlinuxè°ƒåº¦çš„æ˜¯thread.","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495410,"discussion_content":"å› ä¸ºtaskè¿˜æŒ‡å‘ä¸€äº›èµ„æºï¼Œæˆ‘ä»¬ä¸€èˆ¬è¯´çº¿ç¨‹çš„æ—¶å€™ï¼Œä¸åŒ…æ‹¬è¿™äº›è¢«è¿›ç¨‹ç®¡ç†çš„èµ„æº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591785959,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":196521,"user_name":"vsan","can_delete":false,"product_type":"c1","uid":1896461,"ip_address":"","ucode":"20D3C0BF575C9D","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f0/0d/1ddba1aa.jpg","comment_is_top":false,"comment_ctime":1585289707,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5880257003","product_id":100024701,"comment_content":"è¶…å“¥ï¼Œæ¯ç¯‡å¼€å¤´çš„é…å›¾å¾ˆèµï¼Œç¬¦åˆæ„å¢ƒï¼Œå¢è‰²å¾ˆå¤š","like_count":1},{"had_liked":false,"id":180572,"user_name":"herongwei","can_delete":false,"product_type":"c1","uid":1153928,"ip_address":"","ucode":"E4158BF7AD2E70","user_header":"https://static001.geekbang.org/account/avatar/00/11/9b/88/34c171f1.jpg","comment_is_top":false,"comment_ctime":1582339814,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5877307110","product_id":100024701,"comment_content":"è€å¸ˆå¥½ï¼Œæœ‰ä¸ªç–‘æƒ‘ï¼š<br>ä¸ºä»€ä¹ˆä¸€æ—¦ä¸€ä¸ªè¿›ç¨‹è¦ç»“æŸï¼Œå…ˆè¿›å…¥çš„æ˜¯ EXIT_ZOMBIE çŠ¶æ€å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1304195,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtlEYuHnR8VdRkNPcmkIqTM9DKahpcpicDdBvcmBWMIAAhBrd0QNWvl09slqrzB5TibryVcIfPmb7Q/132","nickname":"raisecomer","note":"","ucode":"32EA488E46471F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":361129,"discussion_content":"å°±æ‹¿task_structæ¥è¯´å§ï¼Œè¿™ä¸ªæ•°æ®ç»“æ„æ˜¯å ç”¨å†…å­˜çš„ï¼Œå½“åˆ›å»ºä¸€ä¸ªè¿›ç¨‹æ—¶ï¼Œæ“ä½œç³»ç»Ÿè¦åˆ†é…å†…å­˜ï¼Œå½“è¿›ç¨‹é€€å‡ºåè¦å›æ”¶è¿™ä¸ªå†…å­˜ç©ºé—´ï¼Œè¿›ç¨‹è‡ªå·±æ˜¯ä¸å¯èƒ½å›æ”¶çš„ï¼Œåªèƒ½åœ¨ç»“æŸä»¥åç”±ç³»ç»Ÿå›æ”¶ï¼Œæ­¤æ—¶å°±å¤„äºzombieçŠ¶æ€ï¼Œç­‰å¾…å›æ”¶ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1616597305,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2131643,"avatar":"https://static001.geekbang.org/account/avatar/00/20/86/bb/61c20514.jpg","nickname":"BIG-TğŸ‘»","note":"","ucode":"B03F34D2E9EA62","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348931,"discussion_content":"åº”è¯¥æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹å› ä¸ºå­è¿›ç¨‹é€€å‡ºçš„æ—¶å€™ï¼Œçˆ¶è¿›ç¨‹éœ€è¦è·å¾—å­è¿›ç¨‹çš„ä¸€äº›ä¿¡æ¯ï¼Œæ‰€ä»¥å­è¿›ç¨‹çš„task_structæ²¡æœ‰å®Œå…¨é”€æ¯ï¼Œç‰¹åˆ«æ˜¯pidå·ä¹Ÿæ²¡é”€æ¯ï¼Œæ‰€ä»¥åƒµå°¸è¿›ç¨‹è¿‡å¤šä¼šå ç”¨ç³»ç»Ÿèµ„æºã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1612779262,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108632,"user_name":"garlic","can_delete":false,"product_type":"c1","uid":1019579,"ip_address":"","ucode":"FEB147EDB5774E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8e/bb/c039dc11.jpg","comment_is_top":false,"comment_ctime":1561817534,"is_pvip":true,"replies":[{"id":"48822","content":"èµ","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1567499470,"ip_address":"","comment_id":108632,"utype":1}],"discussion_count":1,"race_medal":1,"score":"5856784830","product_id":100024701,"comment_content":"ç›®å‰ç†è§£çš„ï¼Œ ä»»åŠ¡çŠ¶æ€ä¸»è¦åœ¨TASK_RUNNINGï¼Œ TASK_INTERRUPTIBLEï¼Œ TASK_UNINTERRUPTIBLEï¼Œ TASK_KILLABLEé—´äº’ç›¸è½¬æ¢ï¼Œ å…¶ä»–ä¸€äº›çŠ¶æ€TASK_PARKEDï¼ŒTASK_NEWä¸ºäº†è§£å†³ç›¸å…³é—®é¢˜å¼•å…¥çš„ã€‚ å­¦ä¹ ç¬”è®°https:&#47;&#47;garlicspace.com&#47;2019&#47;06&#47;29&#47;linuxä»»åŠ¡çŠ¶æ€å®šä¹‰&#47;","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456061,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567499470,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91390,"user_name":"å’–å•¡å·§å…‹åŠ›ä¸¶","can_delete":false,"product_type":"c1","uid":1241940,"ip_address":"","ucode":"C205E66058859B","user_header":"https://static001.geekbang.org/account/avatar/00/12/f3/54/bcad6e64.jpg","comment_is_top":false,"comment_ctime":1557022019,"is_pvip":false,"replies":[{"id":"32856","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1557154952,"ip_address":"","comment_id":91390,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5851989315","product_id":100024701,"comment_content":"task_structæ˜¯ä¸ªæè¿°æ¯ä¸ªä»»åŠ¡çš„ç»“æ„ä½“ï¼Œä»»åŠ¡æœ‰ä¸ªé“¾è¡¨ï¼Œç»“ç‚¹å°±æ˜¯æ¯ä¸ªä»»åŠ¡çš„task_struct   æ˜¯è¿™ä¸ªæ„æ€å—","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448901,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557154952,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351569,"user_name":"æ—ä¹‰çš„å¥¥å¦™","can_delete":false,"product_type":"c1","uid":1982685,"ip_address":"","ucode":"3BD27CC75D0919","user_header":"https://static001.geekbang.org/account/avatar/00/1e/40/dd/a79ca0f0.jpg","comment_is_top":false,"comment_ctime":1657939779,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1657939779","product_id":100024701,"comment_content":"task_structåœ¨å“ªä¸ªä½ç½®å¯ä»¥çœ‹åˆ°å®ƒçš„æºä»£ç ï¼Ÿ","like_count":0},{"had_liked":false,"id":351251,"user_name":"| ~æµ‘è›‹~","can_delete":false,"product_type":"c1","uid":3024820,"ip_address":"","ucode":"B6904B44DFA805","user_header":"https://static001.geekbang.org/account/avatar/00/2e/27/b4/df65c0f7.jpg","comment_is_top":false,"comment_ctime":1657638473,"is_pvip":true,"discussion_count":0,"race_medal":3,"score":"1657638473","product_id":100024701,"comment_content":"Javaä¸­åˆ›å»ºçš„çº¿ç¨‹ä¹Ÿå¯¹åº”æ“ä½œç³»ç»Ÿçš„ä¸€ä¸ªtaskå—ï¼Ÿåº”è¯¥æ€ä¹ˆä½¿ç”¨pså‘½ä»¤æŠŠè¿™äº›çº¿ç¨‹å±•ç¤ºå‡ºæ¥ï¼Ÿ","like_count":0},{"had_liked":false,"id":297597,"user_name":"ywz","can_delete":false,"product_type":"c1","uid":2401841,"ip_address":"","ucode":"A93F43B3506FA9","user_header":"https://static001.geekbang.org/account/avatar/00/24/a6/31/0242f7d6.jpg","comment_is_top":false,"comment_ctime":1623659689,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1623659689","product_id":100024701,"comment_content":"è¯·é—®ä¸‹å¤šçº¿ç¨‹çš„ç¨‹åºæœ‰ä»€ä¹ˆå¥½çš„è°ƒè¯•æ‰‹æ®µä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":283059,"user_name":"ltknow","can_delete":false,"product_type":"c1","uid":2009398,"ip_address":"","ucode":"8C1F0F36D374E7","user_header":"https://static001.geekbang.org/account/avatar/00/1e/a9/36/e49b9ccb.jpg","comment_is_top":false,"comment_ctime":1615534046,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615534046","product_id":100024701,"comment_content":"è¯´task_structæ˜¯é€šè¿‡é“¾è¡¨é“¾æ¥èµ·æ¥çš„ï¼Œå…¶å®æ˜¯å›¾è¿™æ ·çš„æ•°æ®ç»“æ„å§ï¼Œ*group_headeræ˜¯ç›´æ¥æŒ‡å‘ä¸»çº¿ç¨‹çš„æŒ‡é’ˆã€‚","like_count":0},{"had_liked":false,"id":281148,"user_name":"ä½³ä¼¦","can_delete":false,"product_type":"c1","uid":1064508,"ip_address":"","ucode":"3AE8098B5BE716","user_header":"https://static001.geekbang.org/account/avatar/00/10/3e/3c/fc3ad983.jpg","comment_is_top":false,"comment_ctime":1614595250,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1614595250","product_id":100024701,"comment_content":"æ²¡å¤ªçœ‹æ‡‚ï¼ŒTASK_RUNNINGæ˜¯å‡†å¤‡è¿è¡ŒçŠ¶æ€ï¼Œé‚£è¿è¡ŒçŠ¶æ€æ€ä¹ˆè¡¨ç¤º","like_count":0,"discussions":[{"author":{"id":2419538,"avatar":"","nickname":"Geek_3b5bba","note":"","ucode":"1EAA5464073906","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":357308,"discussion_content":"åªæœ‰åˆ†é…äº†cpuçš„æ—¶å€™æ‰æ˜¯çœŸæ­£åœ¨è¿è¡Œäº†ï¼ŒTASK_RUNNINGåªæ˜¯è¡¨æ˜æˆ‘å¯ä»¥è¿è¡Œäº†ï¼Œå¿«åˆ†ç»™æˆ‘CPUç‰‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615783020,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":261952,"user_name":"Geek_49c513","can_delete":false,"product_type":"c1","uid":2321651,"ip_address":"","ucode":"99EE2D23BDBD91","user_header":"","comment_is_top":false,"comment_ctime":1605588632,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1605588632","product_id":100024701,"comment_content":"è¿›ç¨‹ç®¡ç†ç»“æ„å›¾ä¸­è¡¥å……namespaceå’Œcgroupç›¸å…³çš„å­—æ®µæ˜¯ä¸æ˜¯æ›´å…¨:)","like_count":0,"discussions":[{"author":{"id":2131643,"avatar":"https://static001.geekbang.org/account/avatar/00/20/86/bb/61c20514.jpg","nickname":"BIG-TğŸ‘»","note":"","ucode":"B03F34D2E9EA62","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348930,"discussion_content":"æ¶‰åŠåˆ°namesapceå’Œcgroupå°±å¾ˆå¤æ‚äº†ï¼Œã€Šæ·±å…¥Linuxå†…æ ¸æ¶æ„ã€‹ä¹Ÿåªæ˜¯ç¨å¾®è®²äº†ä¸‹pid namespace","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612779103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":248422,"user_name":"TinyCalf","can_delete":false,"product_type":"c1","uid":2137418,"ip_address":"","ucode":"0A3EF213359388","user_header":"https://static001.geekbang.org/account/avatar/00/20/9d/4a/09a5041e.jpg","comment_is_top":false,"comment_ctime":1600157272,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1600157272","product_id":100024701,"comment_content":"æˆ‘å¯ä¸å¯ä»¥æŠŠè¿™å‡ èŠ‚è¯¾ä¸­æåˆ°çš„ â€œçº¿ç¨‹â€ç†è§£ä¸ºlinuxçš„â€œè½»é‡çº§è¿›ç¨‹â€ï¼Œå¦‚æœä¸èƒ½é‚£ä¹ˆè¿™ä¸¤è€…æœ‰ä»€ä¹ˆå…·ä½“çš„åŒºåˆ«å‘¢ï¼Œæˆ‘å¾ˆæƒ³ææ˜ç™½è¿™å—","like_count":0,"discussions":[{"author":{"id":1066409,"avatar":"https://static001.geekbang.org/account/avatar/00/10/45/a9/3d48d6a2.jpg","nickname":"Lorry","note":"","ucode":"BD4754D0F1D786","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385220,"discussion_content":"åº”è¯¥æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘å‘ç°æœ‰äº›è°ƒè¯•å·¥å…·æ¯”å¦‚QT Creatorå°±æ˜¯ç”¨LWTæ¥è¡¨ç¤ºçº¿ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626945045,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":232628,"user_name":"No ver","can_delete":false,"product_type":"c1","uid":1106465,"ip_address":"","ucode":"BD5FA90AAF07D8","user_header":"https://static001.geekbang.org/account/avatar/00/10/e2/21/840410d8.jpg","comment_is_top":false,"comment_ctime":1594053613,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1594053613","product_id":100024701,"comment_content":"TASK_STOPPEDçŠ¶æ€ä¸å¤ªç†è§£ï¼Œç½‘ä¸Šå¾ˆå¤šæŠŠå®ƒç¿»è¯‘ä¸ºæŒ‚èµ·çŠ¶æ€ï¼Ÿä½†æ˜¯æ¥æ”¶åˆ°SIGSTOPå‘½ä»¤ç¨‹åºä¸æ˜¯é€€å‡ºäº†å—ï¼ŸTASK_STOPPEDä¹‹åä¼šæ˜¯TASK_DEADå—","like_count":0,"discussions":[{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":324684,"discussion_content":"TASK_STOPPEDåªæ˜¯è¿›ç¨‹åœæ­¢çŠ¶æ€ï¼Œå¦‚æœåé¢è¦é€€å‡ºåˆ™æ˜¯Zï¼Œåä¹‹ä¸æ˜¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605151809,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225847,"user_name":"ç¾½","can_delete":false,"product_type":"c1","uid":1316367,"ip_address":"","ucode":"7E329FECE728E4","user_header":"https://static001.geekbang.org/account/avatar/00/14/16/0f/ebdcc4b7.jpg","comment_is_top":false,"comment_ctime":1591871904,"is_pvip":false,"replies":[{"id":"83465","content":"è¿™ä¸ªå¯ä»¥æŸ¥ä¸€ä¸‹cçš„è¯­æ³•","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1592186113,"ip_address":"","comment_id":225847,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1591871904","product_id":100024701,"comment_content":"è¶…å“¥ èƒ½è§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆè¿™ä¸ªåœ°æ–¹æ˜¯volatile long state;  volatileçš„å— ","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498017,"discussion_content":"è¿™ä¸ªå¯ä»¥æŸ¥ä¸€ä¸‹cçš„è¯­æ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592186113,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1135105,"avatar":"https://static001.geekbang.org/account/avatar/00/11/52/01/c05a82db.jpg","nickname":"å·¦æ€","note":"","ucode":"54D9DC97FB3B40","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297631,"discussion_content":"ä½ å¯ä»¥ç™¾åº¦ä¸‹ï¼Œlinuxå†…æ ¸ä¸­ä¸ºä»€ä¹ˆä¸åº”è¯¥ä½¿ç”¨â€œvolatileâ€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596988764,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177398,"user_name":"èµ·è€Œè¡Œ","can_delete":false,"product_type":"c1","uid":1131399,"ip_address":"","ucode":"4F116B0B740776","user_header":"https://static001.geekbang.org/account/avatar/00/11/43/87/7604d7a4.jpg","comment_is_top":false,"comment_ctime":1581387964,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1581387964","product_id":100024701,"comment_content":"day12ç®€æ´åœ°å±•ç¤ºå‡ºäº†è¿›ç¨‹è°ƒåº¦çš„æµç¨‹ã€‚ç”¨ä»»åŠ¡æ¥ç»Ÿä¸€ç®¡ç†è¿›ç¨‹å’Œçº¿ç¨‹çš„ç¡®æ˜¯å¥½çš„ç³»ç»Ÿè®¾è®¡æ€æƒ³ï¼Œå…¶åç”¨pidå’Œtgidçš„å˜é‡å†æ¥åŒºåˆ†è¿›ç¨‹å’Œçº¿ç¨‹ã€‚æˆ‘çŒœä½¿ç”¨é“¾è¡¨çš„åŸå› æ˜¯ä¸ºäº†ä¾¿äºåˆ é™¤å’ŒåŠ å…¥ï¼Œå› ä¸ºçº¿ç¨‹çš„æ›´æ›¿æ“ä½œä¼šå¾ˆå¤šï¼Œå› æ­¤å¦‚æœç”¨æ•°ç»„çš„è¯ï¼ŒO(n)æ“ä½œå°†éå¸¸è€—æ—¶ã€‚å¦å¤–ï¼Œæ•°ç»„è¿ç»­å­˜å‚¨ï¼Œè¿›ç¨‹æ ˆ8192KBçš„ç©ºé—´å°†ä¼šä¸å¤ªå¤Ÿ","like_count":0},{"had_liked":false,"id":144436,"user_name":"jueyoq","can_delete":false,"product_type":"c1","uid":1129625,"ip_address":"","ucode":"5CD5A9CF9B5B1C","user_header":"https://static001.geekbang.org/account/avatar/00/11/3c/99/6080d269.jpg","comment_is_top":false,"comment_ctime":1571921352,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571921352","product_id":100024701,"comment_content":"1. è¿›ç¨‹çš„æ ‡ç¤º pid&#47;tgid&#47;group_leader  æ˜¯ç”¨æ¥æ–¹ä¾¿åŒºåˆ†ä»»åŠ¡æ˜¯çº¿ç¨‹è¿˜æ˜¯è¿›ç¨‹,è€ŒåŒºåˆ†äºŒè€…çš„éœ€æ±‚æ¥è‡ªè¿œå¤šç»´åº¦çš„å±•ç¤ºä»»åŠ¡ä¸å‘è¿›ç¨‹æˆ–è€…çº¿ç¨‹å‘é€ä¿¡å·<br>2. è¿›ç¨‹çš„çŠ¶æ€è®¾å®šåŒæ ·æ¥æºäºä¸¤ä¸ªéœ€æ±‚, ç›‘æ§ç»Ÿè®¡ä»»åŠ¡çš„æ‰§è¡Œè¿‡ç¨‹,ä»¥åŠè°ƒåº¦ä»»åŠ¡ã€‚è€Œä»»åŠ¡çš„çŠ¶æ€æ¥è‡ªäºå¤„ç†ä»»åŠ¡çš„ä¸€èˆ¬æ€è·¯,åˆ›å»ºä¸€ä¸ªä»»åŠ¡,å‡†å¤‡å¤„ç†ä»»åŠ¡,å¤„ç†ä»»åŠ¡,ä»»åŠ¡è¢«æç½®,ä»»åŠ¡è¢«è§£å†³,åŒæ—¶ä¸ºäº†å¯ä»¥æ›´åŠ ç»†ç²’åº¦çš„ç›‘æ§è¿›ç¨‹å¼•å…¥debugçš„çŠ¶æ€ã€‚","like_count":0},{"had_liked":false,"id":139141,"user_name":"sinfool","can_delete":false,"product_type":"c1","uid":1165971,"ip_address":"","ucode":"AEA84CCBB2D89D","user_header":"https://static001.geekbang.org/account/avatar/00/11/ca/93/181b8e65.jpg","comment_is_top":false,"comment_ctime":1570553508,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1570553508","product_id":100024701,"comment_content":"â€˜é€šè¿‡pid==tgidæ¥åˆ¤æ–­æ˜¯çº¿ç¨‹è¿˜æ˜¯è¿›ç¨‹&#39;è¿™å¥è¯å®åœ¨æ˜¯ä¸æ‡‚ã€‚å¦‚æœæ˜¯å•çº¿ç¨‹ï¼Œpid==tgidï¼Œæ²¡æœ‰é—®é¢˜ï¼›å¦‚æœæ˜¯å¤šçº¿ç¨‹ï¼Œå½“å‰çº¿ç¨‹å¦‚æœæ˜¯ä¸»çº¿ç¨‹ï¼Œpidä¸æ˜¯ä¹Ÿç­‰äºtgidä¹ˆï¼Ÿè¿™æ€ä¹ˆè¯´ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1066409,"avatar":"https://static001.geekbang.org/account/avatar/00/10/45/a9/3d48d6a2.jpg","nickname":"Lorry","note":"","ucode":"BD4754D0F1D786","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385222,"discussion_content":"ä¸æ˜¯å•çº¿/å¤šçº¿ç¨‹ï¼Œè€Œæ˜¯é€šè¿‡è¿™ä¸ªæ¡ä»¶åˆ¤æ–­taskç»“æ„ä»£è¡¨çš„æ˜¯è¿›ç¨‹è¿˜æ˜¯çº¿ç¨‹å“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626945250,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136055,"user_name":"kdb_reboot","can_delete":false,"product_type":"c1","uid":1003594,"ip_address":"","ucode":"4C56FCA563FCA3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/50/4a/04fef27f.jpg","comment_is_top":false,"comment_ctime":1569337012,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1569337012","product_id":100024701,"comment_content":"å†æ¬¡é˜…è¯»,æœ¬ç« å¯ä»¥å‚è€ƒlkd(process management) ä¸€èµ·çœ‹","like_count":0},{"had_liked":false,"id":132668,"user_name":"è®¡ç®—æœºç­é™ˆå…¬å­","can_delete":false,"product_type":"c1","uid":1168448,"ip_address":"","ucode":"0D776A68CBA05D","user_header":"https://static001.geekbang.org/account/avatar/00/11/d4/40/7401ecc1.jpg","comment_is_top":false,"comment_ctime":1568189164,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568189164","product_id":100024701,"comment_content":"è€å¸ˆæœ‰ä¸ªé—®é¢˜å°±æ˜¯åœ¨è¿›ç¨‹çŠ¶æ€å˜æˆzombieåï¼Œä»–åœ¨ç­‰çˆ¶è¿›ç¨‹è°ƒç”¨wait() æ¥å›æ”¶è‡ªå·±çš„ç©ºé—´æ˜¯ä¹ˆï¼Ÿæ‰€ä»¥åœ¨å›æ”¶å®Œä»–çš„ç©ºé—´åä»–å°±å½»åº•è¿›å…¥äº†EXIT_DEADçŠ¶æ€æ˜¯ä¹ˆï¼Ÿå¯æ˜¯ä¸ºä»€ä¹ˆtopå‘½ä»¤ä¸‹çš„S æ é‡Œé¢æ²¡æœ‰deadè¿™ä¸ªçŠ¶æ€ï¼Œè€Œåªæœ‰R,S,D,T,Zè¿™äº”ä¸ªï¼Ÿ<br>å¦å¤–åœ¨è¿›ç¨‹æ”¶åˆ°SIGTERMæˆ–è€…SIGKILLè¿™æ ·terminateç±»çš„ä¿¡å·æ—¶ï¼Œè¿›ç¨‹ä¹Ÿæ˜¯è¿›å…¥äº†EXIT_DEADçŠ¶æ€ä¹ˆï¼Ÿ ","like_count":0},{"had_liked":false,"id":131849,"user_name":"jijun gao","can_delete":false,"product_type":"c1","uid":1171107,"ip_address":"","ucode":"D3CA160F9FDC23","user_header":"https://static001.geekbang.org/account/avatar/00/11/de/a3/c4fcd3db.jpg","comment_is_top":false,"comment_ctime":1567936836,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567936836","product_id":100024701,"comment_content":"æ‰“ä¸ªå¡ï¼štask_structç»“æ„ä¸­ï¼Œpidæ˜¯çº¿ç¨‹idã€‚ä»pidçš„åå­—æ¥çœ‹ï¼Œæ˜¯process idï¼Œ å³è¿›ç¨‹id. æ­¤å¤„ï¼Œå¯ä»¥ç†è§£ä¸ºï¼Œçº¿ç¨‹æ˜¯è½»é‡çº§çš„è¿›ç¨‹ã€‚tgidæ˜¯çº¿ç¨‹æ‰€å±è¿›ç¨‹çš„ä¸»çº¿ç¨‹id","like_count":0},{"had_liked":false,"id":123656,"user_name":"å¤©ç‹","can_delete":false,"product_type":"c1","uid":1239337,"ip_address":"","ucode":"C074B2F9A5F007","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/29/629d9bb0.jpg","comment_is_top":false,"comment_ctime":1565741302,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565741302","product_id":100024701,"comment_content":"è¿›ç¨‹çš„æ•°æ®ç»“æ„1 è¿›ç¨‹å’Œçº¿ç¨‹ï¼Œ1.1æœ‰çš„è¿›ç¨‹åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œæœ‰çš„æœ‰1.2 å¤šä¸ªçº¿ç¨‹ï¼Œéƒ½éœ€è¦å†…æ ¸åˆ†é…CPUæ¥å¹²æ´»ã€‚åœ¨å†…æ ¸é‡Œè¿›ç¨‹å’Œçº¿ç¨‹ç»Ÿç§°ä»»åŠ¡ï¼Œæ•°æ®ç»“æ„éƒ½æ˜¯task_structã€‚1.3 linuxçš„ä»»åŠ¡ç®¡ç†éƒ½åšä»€ä¹ˆç”¨ï¼Œ1.31é¦–å…ˆè¦æœ‰ä¸ªä»»åŠ¡é“¾è¡¨ï¼Œstruct list_headï¼ŒæŠŠæ‰€æœ‰ä»»åŠ¡ä¸²èµ·æ¥1.32 éƒ½æœ‰ä¸€ä¸ªä»»åŠ¡idï¼Œpidå…¨ç§°processidï¼Œtgidå…¨ç§°task group idï¼Œä¹‹æ‰€ä»¥è¦æœ‰pidå’Œtgidï¼Œä¸€æ˜¯ä»»åŠ¡å±•ç¤ºï¼ŒäºŒæ˜¯ç»™ä»»åŠ¡å‘æŒ‡ä»¤ æ˜¯ç»™è¿›ç¨‹å‘è¿˜æ˜¯æŸä¸€ä¸ªçº¿ç¨‹å‘ æœ‰äº†pidå’Œtgidï¼Œç”¨ä¸¤è€…æ˜¯å¦ç›¸ç­‰ï¼Œå°±èƒ½çŸ¥é“æ˜¯çº¿ç¨‹è¿˜æ˜¯è¿›ç¨‹2 ä¿¡å·å¤„ç† task_struct é‡Œé¢ä¹Ÿæœ‰æ¶‰åŠä¿¡å·å¤„ç†çš„å­—æ®µ sigset_t blockedå®šä¹‰äº†ä¿¡å·é˜»å¡æš‚ä¸å¤„ç†ï¼Œsigpending pending å“ªäº›ä¿¡å·å°šç­‰å¾…å¤„ç†ï¼Œå“ªäº›ä¿¡å·æ­£åœ¨é€šè¿‡sighandå‡½æ•°è¿›è¡Œå¤„ç†ï¼Œä¿¡å·å¤„ç†å‡½æ•°é»˜è®¤ä½¿ç”¨ç”¨æˆ·æ€çš„å‡½æ•°æ ˆ 3 è¿›ç¨‹è°ƒåº¦ ä¼˜å…ˆçº§ï¼Œè°ƒåº¦ç±»sched_classï¼Œè°ƒåº¦ç­–ç•¥ï¼Œè°ƒåº¦å®ä½“sched_entityï¼Œ4ä»»åŠ¡çŠ¶æ€ åœ¨task_structç±»ä¸­ï¼Œstateå±æ€§ TASK_RUNNIng è¡¨ç¤ºå¤„äºå³å°†è¿è¡Œçš„çŠ¶æ€ï¼Œæ—¶é—´ç‰‡åˆ‡æ¢åˆ°è¿™ä¸ªè¿›ç¨‹ï¼Œå°±ä¼šç«‹åˆ»è¿è¡Œï¼Œç¡çœ çŠ¶æ€æœ‰3ç§ï¼ŒTask_interruptibleï¼Œå¯ä¸­æ–­çš„ç¡çœ çŠ¶æ€ï¼Œæµ…ç¡çœ çŠ¶æ€ï¼Œä¿¡å·æ¥çš„æ—¶å€™è¢«å”¤é†’ï¼Œå¤„ç†å‡½æ•°å¯ä»¥è‡ªå·±å®šä¹‰ï¼Œtask_uninterruputibleï¼Œä¸å¯å”¤é†’çš„ç¡çœ çŠ¶æ€ï¼Œæ­»ç­‰ioæ“ä½œï¼Œtask_killabeæ”¶åˆ°è‡´å‘½ä¿¡å·å¯ä»¥è¢«å”¤é†’ï¼Œtask_trackè¡¨ç¤ºè¿›ç¨‹è¢«å…¶ä»–è¿›ç¨‹ç›‘è§†ï¼Œè¿›ç¨‹æ‰§è¡Œè¢«è°ƒè¯•è¿›ç¨‹æ‰€ç»ˆæ­¢ï¼Œä¸€ä¸ªè¿›ç¨‹ç»“æŸè¦å…ˆè¿›å…¥exit_zombleçŠ¶æ€ï¼Œå¦‚æœä»–çš„çˆ¶è¿›ç¨‹è¿˜æ²¡æœ‰ä½¿ç”¨waitç­‰ç³»ç»Ÿè°ƒç”¨è·å–ç»ˆæ­¢ä¿¡æ¯ï¼Œè¯¥è¿›ç¨‹å°±æˆäº†åƒµå°¸è¿›ç¨‹ã€‚exit_deadæ˜¯è¿›ç¨‹çš„æœ€ç»ˆçŠ¶æ€ã€‚è°ƒåº¦è¿˜æœ‰ä¸€äº›æ ‡å¿—ä»¥PFå¼€å¤´ï¼Œpf_exitingè¡¨ç¤ºæ­£åœ¨é€€å‡ºï¼Œpf_vcpuè¡¨ç¤ºè¿è¡Œåœ¨è™šæ‹Ÿcpuä¸Šã€‚","like_count":0},{"had_liked":false,"id":123170,"user_name":"...","can_delete":false,"product_type":"c1","uid":1142098,"ip_address":"","ucode":"9D73E00133C236","user_header":"https://static001.geekbang.org/account/avatar/00/11/6d/52/404912c3.jpg","comment_is_top":false,"comment_ctime":1565619431,"is_pvip":false,"replies":[{"id":"46310","content":"ä½ æ˜¯å¯¹çš„ï¼Œæ˜¯state","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1566283534,"ip_address":"","comment_id":123170,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565619431","product_id":100024701,"comment_content":"ä»å®šä¹‰çš„æ•°å€¼å¾ˆå®¹æ˜“çœ‹å‡ºæ¥ï¼Œflags æ˜¯é€šè¿‡ bitset çš„æ–¹å¼è®¾ç½®çš„ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“å‰æ˜¯ä»€ä¹ˆçŠ¶æ€ï¼Œå“ªä¸€ä½å°±ç½®ä¸€ã€‚ ç»“åˆä¸Šä¸‹æ–‡å‘ç°æ˜¯ä¸æ˜¯ç¬”è¯¯ï¼Œflagsåº”è¯¥æ”¹æˆstate","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462566,"discussion_content":"ä½ æ˜¯å¯¹çš„ï¼Œæ˜¯state","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566283534,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":116235,"user_name":"kdb_reboot","can_delete":false,"product_type":"c1","uid":1003594,"ip_address":"","ucode":"4C56FCA563FCA3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/50/4a/04fef27f.jpg","comment_is_top":false,"comment_ctime":1563805883,"is_pvip":false,"replies":[{"id":"46536","content":"èµ","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1566354840,"ip_address":"","comment_id":116235,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563805883","product_id":100024701,"comment_content":"å®åœ¨æ˜¯ä¸ç†è§£ä¸ºä»€ä¹ˆé‚£ä¹ˆå¤šäººé—®&quot;ä¸ºä»€ä¹ˆç”¨é“¾è¡¨è€Œä¸æ˜¯æ•°ç»„...&quot;<br>è¡¥å……: æœ¬èŠ‚è®²çš„å†…å®¹åœ¨sched.hé‡Œé¢, æ€è€ƒé¢˜å®Œå…¨å¯ä»¥æœä¸€ä¸‹è¿™ä¸ª&quot;task-&gt;state&quot;","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459442,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566354840,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107389,"user_name":"æœ›å¤©","can_delete":false,"product_type":"c1","uid":1545448,"ip_address":"","ucode":"EA82334BCE7564","user_header":"","comment_is_top":false,"comment_ctime":1561526138,"is_pvip":false,"replies":[{"id":"48854","content":"èµ","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1567501207,"ip_address":"","comment_id":107389,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561526138","product_id":100024701,"comment_content":"è¯¥ç»“æ„å®šä¹‰åœ¨&lt;include&#47;linux&#47;sched.h&gt;","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455496,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567501207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93178,"user_name":"Milittle","can_delete":false,"product_type":"c1","uid":1045455,"ip_address":"","ucode":"80E566639A8ABB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f3/cf/851dab01.jpg","comment_is_top":false,"comment_ctime":1557415066,"is_pvip":true,"replies":[{"id":"49405","content":"æœç´¢å‡½æ•°åï¼Œå¾ˆå®¹æ˜“æ‰¾åˆ°çš„ï¼Œhttps:&#47;&#47;elixir.bootlin.com&#47;linux&#47;v4.13.16","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1567656623,"ip_address":"","comment_id":93178,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557415066","product_id":100024701,"comment_content":"è¦æ˜¯è€å¸ˆæŠŠå¯¹åº”æºç ä½ç½®ç»™å‡ºå°±å¥½äº†ï¼Œæœ‰æ—¶å€™æ‰¾ä¸åˆ°ï¼Œå¯ä»¥ä¹ˆ","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449513,"discussion_content":"æœç´¢å‡½æ•°åï¼Œå¾ˆå®¹æ˜“æ‰¾åˆ°çš„ï¼Œhttps://elixir.bootlin.com/linux/v4.13.16","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567656623,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":89377,"user_name":"TinnyFlames","can_delete":false,"product_type":"c1","uid":1234723,"ip_address":"","ucode":"0067EFC4210104","user_header":"https://static001.geekbang.org/account/avatar/00/12/d7/23/14b98ea5.jpg","comment_is_top":false,"comment_ctime":1556160574,"is_pvip":false,"replies":[{"id":"32018","content":"æ˜¯é“¾è¡¨å•Š","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1556194281,"ip_address":"","comment_id":89377,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1556160574","product_id":100024701,"comment_content":"æ•°ç»„å’Œé“¾è¡¨è™½ç„¶éƒ½æ˜¯çº¿æ€§è¡¨çš„å®ç°ï¼Œä½†æ˜¯å°±è¿™ä¸ªåº”ç”¨åœºæ™¯æ¥è¯´é“¾è¡¨æ˜æ˜¾ä¸åˆé€‚ã€‚<br>é¦–å…ˆæ•°ç»„çš„æ’å…¥å’Œåˆ é™¤æ˜¯O(N)çº§åˆ«çš„ï¼Œå¯¹äºè¿›ç¨‹ç®¡ç†æ¥è¯´ï¼Œæ˜æ˜¾æ’å…¥å’Œåˆ é™¤æ“ä½œæ˜¯ä¸»è¦éœ€æ±‚ï¼Œè®¾æƒ³æœ‰å¤§é‡çš„è¿›ç¨‹å’Œçº¿ç¨‹åœ¨ä¸€ä¸ªæ•°ç»„é‡Œï¼Œè¿™æ—¶å€™æœ‰è°ƒåº¦éœ€æ±‚ç»™ä»–ä»¬æŒªä½ç½®ç”»é¢å°±å¤ªç¾å¥½äº†â€¦â€¦è€Œä¸”å¯¹äºå¾ˆå¤šè°ƒåº¦ç®—æ³•æ¥è¯´ï¼Œé“¾è¡¨æ“ä½œèµ·æ¥éƒ½éå¸¸æ–¹ä¾¿å¿«é€Ÿã€‚è€Œæ•°ç»„çš„ä¼˜ç‚¹æ— éæ˜¯éšæœºè®¿é—®å’Œå¯¹CPUç¼“å­˜æœºåˆ¶æ›´å‹å¥½ï¼Œä½†è¯´å®è¯æˆ‘æƒ³ä¸åˆ°è¿™ä¸¤ä¸ªç‚¹åœ¨è¿›ç¨‹ç®¡ç†æ—¶æœ‰ä»€ä¹ˆå¤ªå¤§çš„å¥½å¤„<br>å…¶æ¬¡å…¶ä»–è¯„è®ºä¹ŸæŒ‡å‡ºäº†ï¼Œæ•°ç»„æ˜¯è¿ç»­åˆ†é…çš„å†…å­˜ç©ºé—´ï¼Œé“¾è¡¨æ˜¯ç¦»æ•£çš„ï¼Œä»æœ€å¤§åˆ©ç”¨èµ„æºçš„è§’åº¦æ¥è®²é“¾è¡¨ä¹Ÿæ˜¯é¦–é€‰ï¼Œå› ä¸ºä¸€ç‰‡è¿ç»­çš„ç©ºé—´è¿˜æ˜¯å¤ªå¥¢ä¾ˆäº†ç‚¹ï¼Œèƒ½è§ç¼æ’é’ˆçš„é“¾è¡¨è¦å¥½çš„å¤š<br>æ€»ä½“æ¥è®²ï¼Œæ“ä½œç³»ç»Ÿä½œä¸ºä¸€ç§åŸºç¡€è®¾æ–½ï¼Œæ€§èƒ½æ˜¯ç‰¹åˆ«æ•æ„Ÿçš„ï¼Œé€‰ç”¨é“¾è¡¨è€Œä¸ç”¨æ•°ç»„ä¸»è¦å°±æ˜¯æ€§èƒ½ä¸Šçš„è€ƒé‡ï¼Œæ— è®ºç©ºé—´ä¸Šè¿˜æ˜¯æ—¶é—´ä¸Šã€‚","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448108,"discussion_content":"æ˜¯é“¾è¡¨å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556194281,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1202160,"avatar":"https://static001.geekbang.org/account/avatar/00/12/57/f0/f6155d5f.jpg","nickname":"æ–°ç”Ÿ\\","note":"","ucode":"212978C88E242E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3001,"discussion_content":"ä½ çš„è¿‡ç¨‹æ˜¯å¯¹çš„ï¼Œ ç»“è®ºå†™é”™äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564104899,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":89171,"user_name":"åº„å°P","can_delete":false,"product_type":"c1","uid":1489063,"ip_address":"","ucode":"A71FA01F713790","user_header":"","comment_is_top":false,"comment_ctime":1556097297,"is_pvip":false,"replies":[{"id":"32024","content":"è¿™ä¸ªè€ƒè™‘äº†å¥½ä¹…ï¼ŒåŠ ä¸åŠ ä»å“ªä¸ªæ–‡ä»¶åˆ°å“ªä¸ªæ–‡ä»¶ï¼Œåæ¥æƒ³åº”è¯¥æŠŠä»£ç å½“æˆåŸç†å’Œæµç¨‹çš„ä½è¯ï¼Œè€Œä¸æ˜¯ä¸€æœ¬é€è¡Œè§£æä»£ç çš„ä¹¦ï¼Œæ‰€ä»¥å°±æ²¡åŠ ï¼Œåé¢å¯ä»¥è€ƒè™‘åŠ ä¸Š","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1556194526,"ip_address":"","comment_id":89171,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1556097297","product_id":100024701,"comment_content":"è€å¸ˆï¼Œé™„ä¸Šä»£ç çš„èƒ½å¤Ÿèƒ½åŠ ä¸Šæ˜¯å“ªä¸ªå¤´æ–‡ä»¶é‚£ï¼Œæƒ³å…·ä½“çœ‹çœ‹é‡Œé¢çš„æŸäº›ä¸œè¥¿","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448042,"discussion_content":"è¿™ä¸ªè€ƒè™‘äº†å¥½ä¹…ï¼ŒåŠ ä¸åŠ ä»å“ªä¸ªæ–‡ä»¶åˆ°å“ªä¸ªæ–‡ä»¶ï¼Œåæ¥æƒ³åº”è¯¥æŠŠä»£ç å½“æˆåŸç†å’Œæµç¨‹çš„ä½è¯ï¼Œè€Œä¸æ˜¯ä¸€æœ¬é€è¡Œè§£æä»£ç çš„ä¹¦ï¼Œæ‰€ä»¥å°±æ²¡åŠ ï¼Œåé¢å¯ä»¥è€ƒè™‘åŠ ä¸Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556194526,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":88949,"user_name":"tux","can_delete":false,"product_type":"c1","uid":1477811,"ip_address":"","ucode":"BB7202009FC885","user_header":"https://static001.geekbang.org/account/avatar/00/16/8c/b3/a74a7125.jpg","comment_is_top":false,"comment_ctime":1556031396,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556031396","product_id":100024701,"comment_content":"éœ€è¦å¤šä¸‹ä¸€ç•ªåŠªåŠ›(æ–‡ç« æœ«å°¾:åå¤ç ”è¯»)","like_count":0},{"had_liked":false,"id":88918,"user_name":"é€è§‰è¿·é¥","can_delete":false,"product_type":"c1","uid":1070782,"ip_address":"","ucode":"4287B0B6A23A25","user_header":"https://static001.geekbang.org/account/avatar/00/10/56/be/d68998fa.jpg","comment_is_top":false,"comment_ctime":1556026566,"is_pvip":false,"replies":[{"id":"32026","content":"åˆ›å»ºå’Œåˆ é™¤è¿›ç¨‹ï¼Œå†åˆ›å»ºå†åˆ é™¤","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1556195344,"ip_address":"","comment_id":88918,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1556026566","product_id":100024701,"comment_content":"è¯·é—®è€å¸ˆï¼Œè¿™é‡Œåº•å±‚ç”¨é“¾è¡¨æ¥è¿æ¥æ‰€æœ‰task_structæ˜¯å‡ºäºä»€ä¹ˆè€ƒé‡å‘¢ï¼Ÿæƒ³äº†æƒ³æ²¡ç›¸å¤„ç†ç”±ï¼Œå‘ç°æ•°ç»„ä¹Ÿèƒ½å§ã€‚","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447946,"discussion_content":"åˆ›å»ºå’Œåˆ é™¤è¿›ç¨‹ï¼Œå†åˆ›å»ºå†åˆ é™¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556195344,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":88914,"user_name":"é€è§‰è¿·é¥","can_delete":false,"product_type":"c1","uid":1070782,"ip_address":"","ucode":"4287B0B6A23A25","user_header":"https://static001.geekbang.org/account/avatar/00/10/56/be/d68998fa.jpg","comment_is_top":false,"comment_ctime":1556026465,"is_pvip":false,"replies":[{"id":"32028","content":"pidå’Œtgid","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1556195392,"ip_address":"","comment_id":88914,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1556026465","product_id":100024701,"comment_content":"è¿›ç¨‹å’Œçº¿ç¨‹åœ¨åº•å±‚æ ¸å¿ƒç”¨ç»Ÿä¸€çš„æ•°æ®ç»“æ„task_structæ¥è¡¨ç¤ºï¼Œå…¶å®å¯ä»¥æ ¹æ®ä¸€äº›å­—æ®µæ¥åŒºåˆ«æ˜¯å“ªä¸€ç±»å‹ã€‚","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447944,"discussion_content":"pidå’Œtgid","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556195392,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":88742,"user_name":"tiankonghewo","can_delete":false,"product_type":"c1","uid":1476427,"ip_address":"","ucode":"7A55A9C17DD9DF","user_header":"https://static001.geekbang.org/account/avatar/00/16/87/4b/16ea3997.jpg","comment_is_top":false,"comment_ctime":1555988953,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555988953","product_id":100024701,"comment_content":"å­¦ä¹ äº†","like_count":0},{"had_liked":false,"id":88345,"user_name":"dancer","can_delete":false,"product_type":"c1","uid":1019036,"ip_address":"","ucode":"B8D5641A3AC490","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/9c/d48473ab.jpg","comment_is_top":false,"comment_ctime":1555908416,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555908416","product_id":100024701,"comment_content":"day12æ‰“å¡ï¼ŒæŠŠtask_structåˆ†ä¸ºå‡ ç±»ï¼Œå®¹æ˜“ç†è§£è®°å¿†","like_count":0},{"had_liked":false,"id":88187,"user_name":"W.jyao","can_delete":false,"product_type":"c1","uid":1422582,"ip_address":"","ucode":"C57B3A78B6A795","user_header":"https://static001.geekbang.org/account/avatar/00/15/b4/f6/735673f7.jpg","comment_is_top":false,"comment_ctime":1555891941,"is_pvip":false,"replies":[{"id":"32055","content":"pidæ˜¯å½“å‰task_structçš„idï¼Œå…¶å®æ˜¯çº¿ç¨‹çš„idäº†","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1556197845,"ip_address":"","comment_id":88187,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1555891941","product_id":100024701,"comment_content":"æ ¹æ®æ–‡ä¸­æ‰€è¯´ï¼Œä¸€ä¸ªè¿›ç¨‹ï¼Œå¦‚æœåªæœ‰ä¸»çº¿ç¨‹ï¼Œé‚£ä¹ˆtpid = pidï¼Œå¦‚æœè¿›ç¨‹åˆ›å»ºäº†å…¶ä»–çº¿ç¨‹ï¼Œé‚£ä¹ˆtpidå°±æ˜¯ä¸»çº¿ç¨‹idï¼Œä¸»çº¿ç¨‹ä¸æ˜¯å°±æ˜¯å½“å‰è¿›ç¨‹ï¼Ÿé‚£ä¹ˆä¸¤ä¸ªä¸åº”è¯¥è¿˜æ˜¯ç›¸ç­‰ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447762,"discussion_content":"pidæ˜¯å½“å‰task_structçš„idï¼Œå…¶å®æ˜¯çº¿ç¨‹çš„idäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556197845,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}