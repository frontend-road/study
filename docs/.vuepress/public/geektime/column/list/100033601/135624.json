{"id":135624,"title":"18 | å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ï¼šä¸æ˜¯æ‰€æœ‰ä»»åŠ¡éƒ½æ˜¯ä¸€ä¸ªå¾…é‡","content":"<p>åœ¨å‰é¢å‡ ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¹¶ç»“åˆæ¶ˆæ¯é˜Ÿåˆ—ä»‹ç»äº†ä¸¤ç§å…¸å‹çš„WebAPIâ€”â€”<strong>setTimeout</strong>å’Œ<strong>XMLHttpRequest</strong>ï¼Œé€šè¿‡è¿™ä¸¤ä¸ªWebAPIæˆ‘ä»¬ææ¸…æ¥šäº†æµè§ˆå™¨çš„æ¶ˆæ¯å¾ªç¯ç³»ç»Ÿæ˜¯æ€ä¹ˆå·¥ä½œçš„ã€‚ä¸è¿‡éšç€æµè§ˆå™¨çš„åº”ç”¨é¢†åŸŸè¶Šæ¥è¶Šå¹¿æ³›ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ä¸­è¿™ç§ç²—æ—¶é—´é¢—ç²’åº¦çš„ä»»åŠ¡å·²ç»ä¸èƒ½èƒœä»»éƒ¨åˆ†é¢†åŸŸçš„éœ€æ±‚ï¼Œæ‰€ä»¥åˆå‡ºç°äº†ä¸€ç§æ–°çš„æŠ€æœ¯â€”â€”<strong>å¾®ä»»åŠ¡</strong>ã€‚<strong>å¾®ä»»åŠ¡å¯ä»¥åœ¨å®æ—¶æ€§å’Œæ•ˆç‡ä¹‹é—´åšä¸€ä¸ªæœ‰æ•ˆçš„æƒè¡¡</strong>ã€‚</p><p>ä»ç›®å‰çš„æƒ…å†µæ¥çœ‹ï¼Œå¾®ä»»åŠ¡å·²ç»è¢«å¹¿æ³›åœ°åº”ç”¨ï¼ŒåŸºäºå¾®ä»»åŠ¡çš„æŠ€æœ¯æœ‰MutationObserverã€Promiseä»¥åŠä»¥Promiseä¸ºåŸºç¡€å¼€å‘å‡ºæ¥çš„å¾ˆå¤šå…¶ä»–çš„æŠ€æœ¯ã€‚æ‰€ä»¥å¾®ä»»åŠ¡çš„é‡è¦æ€§ä¹Ÿä¸æ—¥ä¿±å¢ï¼Œäº†è§£å…¶åº•å±‚çš„å·¥ä½œåŸç†å¯¹äºä½ è¯»æ‡‚åˆ«äººçš„ä»£ç ï¼Œä»¥åŠå†™å‡ºæ›´é«˜æ•ˆã€æ›´å…·ç°ä»£çš„ä»£ç æœ‰ç€å†³å®šæ€§çš„ä½œç”¨ã€‚</p><p>æœ‰å¾®ä»»åŠ¡ï¼Œä¹Ÿå°±æœ‰å®ä»»åŠ¡ï¼Œé‚£è¿™äºŒè€…åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå®ƒä»¬åˆæ˜¯å¦‚ä½•ç›¸äº’å–é•¿è¡¥çŸ­çš„ï¼Ÿ</p><h2>å®ä»»åŠ¡</h2><p>å‰é¢æˆ‘ä»¬å·²ç»ä»‹ç»è¿‡äº†ï¼Œé¡µé¢ä¸­çš„å¤§éƒ¨åˆ†ä»»åŠ¡éƒ½æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œçš„ï¼Œè¿™äº›ä»»åŠ¡åŒ…æ‹¬äº†ï¼š</p><ul>\n<li>æ¸²æŸ“äº‹ä»¶ï¼ˆå¦‚è§£æDOMã€è®¡ç®—å¸ƒå±€ã€ç»˜åˆ¶ï¼‰ï¼›</li>\n<li>ç”¨æˆ·äº¤äº’äº‹ä»¶ï¼ˆå¦‚é¼ æ ‡ç‚¹å‡»ã€æ»šåŠ¨é¡µé¢ã€æ”¾å¤§ç¼©å°ç­‰ï¼‰ï¼›</li>\n<li>JavaScriptè„šæœ¬æ‰§è¡Œäº‹ä»¶ï¼›</li>\n<li>ç½‘ç»œè¯·æ±‚å®Œæˆã€æ–‡ä»¶è¯»å†™å®Œæˆäº‹ä»¶ã€‚</li>\n</ul><p>ä¸ºäº†åè°ƒè¿™äº›ä»»åŠ¡æœ‰æ¡ä¸ç´Šåœ°åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œé¡µé¢è¿›ç¨‹å¼•å…¥äº†æ¶ˆæ¯é˜Ÿåˆ—å’Œäº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Œæ¸²æŸ“è¿›ç¨‹å†…éƒ¨ä¼šç»´æŠ¤å¤šä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ¯”å¦‚å»¶è¿Ÿæ‰§è¡Œé˜Ÿåˆ—å’Œæ™®é€šçš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚ç„¶åä¸»çº¿ç¨‹é‡‡ç”¨ä¸€ä¸ªforå¾ªç¯ï¼Œä¸æ–­åœ°ä»è¿™äº›ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡å¹¶æ‰§è¡Œä»»åŠ¡ã€‚æˆ‘ä»¬æŠŠè¿™äº›æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ç§°ä¸º<strong>å®ä»»åŠ¡</strong>ã€‚</p><!-- [[[read_end]]] --><p>æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ˜¯é€šè¿‡äº‹ä»¶å¾ªç¯ç³»ç»Ÿæ¥æ‰§è¡Œçš„ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹çœ‹åœ¨<a href=\"https://html.spec.whatwg.org/multipage/webappapis.html#event-loop-processing-model\">WHATWGè§„èŒƒ</a>ä¸­æ˜¯æ€ä¹ˆå®šä¹‰äº‹ä»¶å¾ªç¯æœºåˆ¶çš„ã€‚</p><p>ç”±äºè§„èŒƒéœ€è¦æ”¯æŒè¯­ä¹‰ä¸Šçš„å®Œå¤‡æ€§ï¼Œæ‰€ä»¥é€šå¸¸å†™å¾—éƒ½ä¼šæ¯”è¾ƒå•°å—¦ï¼Œè¿™é‡Œæˆ‘å°±å¤§è‡´æ€»ç»“äº†ä¸‹WHATWGè§„èŒƒå®šä¹‰çš„å¤§è‡´æµç¨‹ï¼š</p><ul>\n<li>å…ˆä»å¤šä¸ªæ¶ˆæ¯é˜Ÿåˆ—ä¸­é€‰å‡ºä¸€ä¸ªæœ€è€çš„ä»»åŠ¡ï¼Œè¿™ä¸ªä»»åŠ¡ç§°ä¸ºoldestTaskï¼›</li>\n<li>ç„¶åå¾ªç¯ç³»ç»Ÿè®°å½•ä»»åŠ¡å¼€å§‹æ‰§è¡Œçš„æ—¶é—´ï¼Œå¹¶æŠŠè¿™ä¸ªoldestTaskè®¾ç½®ä¸ºå½“å‰æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼›</li>\n<li>å½“ä»»åŠ¡æ‰§è¡Œå®Œæˆä¹‹åï¼Œåˆ é™¤å½“å‰æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¹¶ä»å¯¹åº”çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­åˆ é™¤æ‰è¿™ä¸ªoldestTaskï¼›</li>\n<li>æœ€åç»Ÿè®¡æ‰§è¡Œå®Œæˆçš„æ—¶é•¿ç­‰ä¿¡æ¯ã€‚</li>\n</ul><p>ä»¥ä¸Šå°±æ˜¯æ¶ˆæ¯é˜Ÿåˆ—ä¸­å®ä»»åŠ¡çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œé€šè¿‡å‰é¢çš„å­¦ä¹ ï¼Œç›¸ä¿¡ä½ ä¹Ÿå¾ˆç†Ÿæ‚‰è¿™å¥—æ‰§è¡Œæµç¨‹äº†ã€‚</p><p>å®ä»»åŠ¡å¯ä»¥æ»¡è¶³æˆ‘ä»¬å¤§éƒ¨åˆ†çš„æ—¥å¸¸éœ€æ±‚ï¼Œä¸è¿‡å¦‚æœæœ‰å¯¹æ—¶é—´ç²¾åº¦è¦æ±‚è¾ƒé«˜çš„éœ€æ±‚ï¼Œå®ä»»åŠ¡å°±éš¾ä»¥èƒœä»»äº†ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥åˆ†æä¸‹ä¸ºä»€ä¹ˆå®ä»»åŠ¡éš¾ä»¥æ»¡è¶³å¯¹æ—¶é—´ç²¾åº¦è¦æ±‚è¾ƒé«˜çš„ä»»åŠ¡ã€‚</p><p>å‰é¢æˆ‘ä»¬è¯´è¿‡ï¼Œé¡µé¢çš„æ¸²æŸ“äº‹ä»¶ã€å„ç§IOçš„å®Œæˆäº‹ä»¶ã€æ‰§è¡ŒJavaScriptè„šæœ¬çš„äº‹ä»¶ã€ç”¨æˆ·äº¤äº’çš„äº‹ä»¶ç­‰éƒ½éšæ—¶æœ‰å¯èƒ½è¢«æ·»åŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œè€Œä¸”æ·»åŠ äº‹ä»¶æ˜¯ç”±ç³»ç»Ÿæ“ä½œçš„ï¼ŒJavaScriptä»£ç ä¸èƒ½å‡†ç¡®æŒæ§ä»»åŠ¡è¦æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­çš„ä½ç½®ï¼Œæ§åˆ¶ä¸äº†ä»»åŠ¡åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„ä½ç½®ï¼Œæ‰€ä»¥å¾ˆéš¾æ§åˆ¶å¼€å§‹æ‰§è¡Œä»»åŠ¡çš„æ—¶é—´ã€‚ä¸ºäº†ç›´è§‚ç†è§£ï¼Œä½ å¯ä»¥çœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼š</p><pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;body&gt;\n        &lt;div id='demo'&gt;\n            &lt;ol&gt;\n                &lt;li&gt;test&lt;/li&gt;\n            &lt;/ol&gt;\n        &lt;/div&gt;\n    &lt;/body&gt;\n    &lt;script type=&quot;text/javascript&quot;&gt;\n        function timerCallback2(){\n          console.log(2)\n        }\n        function timerCallback(){\n            console.log(1)\n            setTimeout(timerCallback2,0)\n        }\n        setTimeout(timerCallback,0)\n    &lt;/script&gt;\n&lt;/html&gt;\n</code></pre><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘çš„ç›®çš„æ˜¯æƒ³é€šè¿‡setTimeoutæ¥è®¾ç½®ä¸¤ä¸ªå›è°ƒä»»åŠ¡ï¼Œå¹¶è®©å®ƒä»¬æŒ‰ç…§å‰åé¡ºåºæ¥æ‰§è¡Œï¼Œä¸­é—´ä¹Ÿä¸è¦å†æ’å…¥å…¶ä»–çš„ä»»åŠ¡ï¼Œå› ä¸ºå¦‚æœè¿™ä¸¤ä¸ªä»»åŠ¡çš„ä¸­é—´æ’å…¥äº†å…¶ä»–çš„ä»»åŠ¡ï¼Œå°±å¾ˆæœ‰å¯èƒ½ä¼šå½±å“åˆ°ç¬¬äºŒä¸ªå®šæ—¶å™¨çš„æ‰§è¡Œæ—¶é—´äº†ã€‚</p><p>ä½†å®é™…æƒ…å†µæ˜¯æˆ‘ä»¬ä¸èƒ½æ§åˆ¶çš„ï¼Œæ¯”å¦‚åœ¨ä½ è°ƒç”¨setTimeoutæ¥è®¾ç½®å›è°ƒä»»åŠ¡çš„é—´éš™ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ä¸­å°±æœ‰å¯èƒ½è¢«æ’å…¥å¾ˆå¤šç³»ç»Ÿçº§çš„ä»»åŠ¡ã€‚ä½ å¯ä»¥æ‰“å¼€Performanceå·¥å…·ï¼Œæ¥è®°å½•ä¸‹è¿™æ®µä»»åŠ¡çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œä¹Ÿå¯å‚è€ƒæ–‡ä¸­æˆ‘è®°å½•çš„å›¾ç‰‡ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/3c/15/3c2b9b474c4df544df61ebd62a7b3715.png?wh=1142*351\" alt=\"\"></p><center><span class=\"reference\">Performanceè®°å½•</span></center><p>setTimeoutå‡½æ•°è§¦å‘çš„å›è°ƒå‡½æ•°éƒ½æ˜¯å®ä»»åŠ¡ï¼Œå¦‚å›¾ä¸­ï¼Œå·¦å³ä¸¤ä¸ªé»„è‰²å—å°±æ˜¯setTimeoutè§¦å‘çš„ä¸¤ä¸ªå®šæ—¶å™¨ä»»åŠ¡ã€‚</p><p>ç°åœ¨ä½ å¯ä»¥é‡ç‚¹è§‚å¯Ÿä¸Šå›¾ä¸­é—´æµ…çº¢è‰²åŒºåŸŸï¼Œè¿™é‡Œæœ‰å¾ˆå¤šä¸€æ®µä¸€æ®µçš„ä»»åŠ¡ï¼Œè¿™äº›æ˜¯è¢«æ¸²æŸ“å¼•æ“æ’åœ¨ä¸¤ä¸ªå®šæ—¶å™¨ä»»åŠ¡ä¸­é—´çš„ä»»åŠ¡ã€‚è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœä¸­é—´è¢«æ’å…¥çš„ä»»åŠ¡æ‰§è¡Œæ—¶é—´è¿‡ä¹…çš„è¯ï¼Œé‚£ä¹ˆå°±ä¼šå½±å“åˆ°åé¢ä»»åŠ¡çš„æ‰§è¡Œäº†ã€‚</p><p>æ‰€ä»¥è¯´å®ä»»åŠ¡çš„æ—¶é—´ç²’åº¦æ¯”è¾ƒå¤§ï¼Œæ‰§è¡Œçš„æ—¶é—´é—´éš”æ˜¯ä¸èƒ½ç²¾ç¡®æ§åˆ¶çš„ï¼Œå¯¹ä¸€äº›é«˜å®æ—¶æ€§çš„éœ€æ±‚å°±ä¸å¤ªç¬¦åˆäº†ï¼Œæ¯”å¦‚åé¢è¦ä»‹ç»çš„ç›‘å¬DOMå˜åŒ–çš„éœ€æ±‚ã€‚</p><h2>å¾®ä»»åŠ¡</h2><p>åœ¨ç†è§£äº†å®ä»»åŠ¡ä¹‹åï¼Œä¸‹é¢æˆ‘ä»¬å°±å¯ä»¥æ¥çœ‹çœ‹ä»€ä¹ˆæ˜¯å¾®ä»»åŠ¡äº†ã€‚åœ¨<a href=\"https://time.geekbang.org/column/article/135127\">ä¸Šä¸€ç¯‡æ–‡ç« </a>ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»è¿‡å¼‚æ­¥å›è°ƒçš„æ¦‚å¿µï¼Œå…¶ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ã€‚</p><p><strong>ç¬¬ä¸€ç§æ˜¯æŠŠå¼‚æ­¥å›è°ƒå‡½æ•°å°è£…æˆä¸€ä¸ªå®ä»»åŠ¡ï¼Œæ·»åŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—å°¾éƒ¨ï¼Œå½“å¾ªç¯ç³»ç»Ÿæ‰§è¡Œåˆ°è¯¥ä»»åŠ¡çš„æ—¶å€™æ‰§è¡Œå›è°ƒå‡½æ•°</strong>ã€‚è¿™ç§æ¯”è¾ƒå¥½ç†è§£ï¼Œæˆ‘ä»¬å‰é¢ä»‹ç»çš„setTimeoutå’ŒXMLHttpRequestçš„å›è°ƒå‡½æ•°éƒ½æ˜¯é€šè¿‡è¿™ç§æ–¹å¼æ¥å®ç°çš„ã€‚</p><p><strong>ç¬¬äºŒç§æ–¹å¼çš„æ‰§è¡Œæ—¶æœºæ˜¯åœ¨ä¸»å‡½æ•°æ‰§è¡Œç»“æŸä¹‹åã€å½“å‰å®ä»»åŠ¡ç»“æŸä¹‹å‰æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œè¿™é€šå¸¸éƒ½æ˜¯ä»¥å¾®ä»»åŠ¡å½¢å¼ä½“ç°çš„ã€‚</strong></p><p>é‚£è¿™é‡Œè¯´çš„å¾®ä»»åŠ¡åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p><strong>å¾®ä»»åŠ¡å°±æ˜¯ä¸€ä¸ªéœ€è¦å¼‚æ­¥æ‰§è¡Œçš„å‡½æ•°ï¼Œæ‰§è¡Œæ—¶æœºæ˜¯åœ¨ä¸»å‡½æ•°æ‰§è¡Œç»“æŸä¹‹åã€å½“å‰å®ä»»åŠ¡ç»“æŸä¹‹å‰ã€‚</strong></p><p>ä¸è¿‡è¦ææ¸…æ¥šå¾®ä»»åŠ¡ç³»ç»Ÿæ˜¯æ€ä¹ˆè¿è½¬èµ·æ¥çš„ï¼Œå°±å¾—ç«™åœ¨V8å¼•æ“çš„å±‚é¢æ¥åˆ†æä¸‹ã€‚</p><p>æˆ‘ä»¬çŸ¥é“å½“JavaScriptæ‰§è¡Œä¸€æ®µè„šæœ¬çš„æ—¶å€™ï¼ŒV8ä¼šä¸ºå…¶åˆ›å»ºä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œåœ¨åˆ›å»ºå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡çš„åŒæ—¶ï¼ŒV8å¼•æ“ä¹Ÿä¼šåœ¨å†…éƒ¨åˆ›å»ºä¸€ä¸ª<strong>å¾®ä»»åŠ¡é˜Ÿåˆ—</strong>ã€‚é¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ—å°±æ˜¯ç”¨æ¥å­˜æ”¾å¾®ä»»åŠ¡çš„ï¼Œå› ä¸ºåœ¨å½“å‰å®ä»»åŠ¡æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œæœ‰æ—¶å€™ä¼šäº§ç”Ÿå¤šä¸ªå¾®ä»»åŠ¡ï¼Œè¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨è¿™ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ—æ¥ä¿å­˜è¿™äº›å¾®ä»»åŠ¡äº†ã€‚ä¸è¿‡è¿™ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ—æ˜¯ç»™V8å¼•æ“å†…éƒ¨ä½¿ç”¨çš„ï¼Œæ‰€ä»¥ä½ æ˜¯æ— æ³•é€šè¿‡JavaScriptç›´æ¥è®¿é—®çš„ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªå®ä»»åŠ¡éƒ½å…³è”äº†ä¸€ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±éœ€è¦åˆ†æä¸¤ä¸ªé‡è¦çš„æ—¶é—´ç‚¹â€”â€”å¾®ä»»åŠ¡äº§ç”Ÿçš„æ—¶æœºå’Œæ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—çš„æ—¶æœºã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å¾®ä»»åŠ¡æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿåœ¨ç°ä»£æµè§ˆå™¨é‡Œé¢ï¼Œäº§ç”Ÿå¾®ä»»åŠ¡æœ‰ä¸¤ç§æ–¹å¼ã€‚</p><p>ç¬¬ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨MutationObserverç›‘æ§æŸä¸ªDOMèŠ‚ç‚¹ï¼Œç„¶åå†é€šè¿‡JavaScriptæ¥ä¿®æ”¹è¿™ä¸ªèŠ‚ç‚¹ï¼Œæˆ–è€…ä¸ºè¿™ä¸ªèŠ‚ç‚¹æ·»åŠ ã€åˆ é™¤éƒ¨åˆ†å­èŠ‚ç‚¹ï¼Œå½“DOMèŠ‚ç‚¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±ä¼šäº§ç”ŸDOMå˜åŒ–è®°å½•çš„å¾®ä»»åŠ¡ã€‚</p><p>ç¬¬äºŒç§æ–¹å¼æ˜¯ä½¿ç”¨Promiseï¼Œå½“è°ƒç”¨Promise.resolve()æˆ–è€…Promise.reject()çš„æ—¶å€™ï¼Œä¹Ÿä¼šäº§ç”Ÿå¾®ä»»åŠ¡ã€‚</p><p>é€šè¿‡DOMèŠ‚ç‚¹å˜åŒ–äº§ç”Ÿçš„å¾®ä»»åŠ¡æˆ–è€…ä½¿ç”¨Promiseäº§ç”Ÿçš„å¾®ä»»åŠ¡éƒ½ä¼šè¢«JavaScriptå¼•æ“æŒ‰ç…§é¡ºåºä¿å­˜åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚</p><p>å¥½äº†ï¼Œç°åœ¨å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­æœ‰äº†å¾®ä»»åŠ¡äº†ï¼Œé‚£æ¥ä¸‹æ¥å°±è¦çœ‹çœ‹å¾®ä»»åŠ¡é˜Ÿåˆ—æ˜¯ä½•æ—¶è¢«æ‰§è¡Œçš„ã€‚</p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œåœ¨å½“å‰å®ä»»åŠ¡ä¸­çš„JavaScriptå¿«æ‰§è¡Œå®Œæˆæ—¶ï¼Œä¹Ÿå°±åœ¨JavaScriptå¼•æ“å‡†å¤‡é€€å‡ºå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶æ¸…ç©ºè°ƒç”¨æ ˆçš„æ—¶å€™ï¼ŒJavaScriptå¼•æ“ä¼šæ£€æŸ¥å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œç„¶åæŒ‰ç…§é¡ºåºæ‰§è¡Œé˜Ÿåˆ—ä¸­çš„å¾®ä»»åŠ¡ã€‚<strong>WHATWGæŠŠæ‰§è¡Œå¾®ä»»åŠ¡çš„æ—¶é—´ç‚¹ç§°ä¸ºæ£€æŸ¥ç‚¹</strong>ã€‚å½“ç„¶é™¤äº†åœ¨é€€å‡ºå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡å¼è¿™ä¸ªæ£€æŸ¥ç‚¹ä¹‹å¤–ï¼Œè¿˜æœ‰å…¶ä»–çš„æ£€æŸ¥ç‚¹ï¼Œä¸è¿‡ä¸æ˜¯å¤ªé‡è¦ï¼Œè¿™é‡Œå°±ä¸åšä»‹ç»äº†ã€‚</p><p>å¦‚æœåœ¨æ‰§è¡Œå¾®ä»»åŠ¡çš„è¿‡ç¨‹ä¸­ï¼Œäº§ç”Ÿäº†æ–°çš„å¾®ä»»åŠ¡ï¼ŒåŒæ ·ä¼šå°†è¯¥å¾®ä»»åŠ¡æ·»åŠ åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼ŒV8å¼•æ“ä¸€ç›´å¾ªç¯æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºæ‰ç®—æ‰§è¡Œç»“æŸã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨æ‰§è¡Œå¾®ä»»åŠ¡è¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ–°çš„å¾®ä»»åŠ¡å¹¶ä¸ä¼šæ¨è¿Ÿåˆ°ä¸‹ä¸ªå®ä»»åŠ¡ä¸­æ‰§è¡Œï¼Œè€Œæ˜¯åœ¨å½“å‰çš„å®ä»»åŠ¡ä¸­ç»§ç»­æ‰§è¡Œã€‚</p><p>ä¸ºäº†ç›´è§‚åœ°ç†è§£ä»€ä¹ˆæ˜¯å¾®ä»»åŠ¡ï¼Œä½ å¯ä»¥å‚è€ƒä¸‹é¢æˆ‘ç”»çš„ç¤ºæ„å›¾ï¼ˆç”±äºå†…å®¹æ¯”è¾ƒå¤šï¼Œæˆ‘å°†å…¶åˆ†ä¸ºäº†ä¸¤å¼ ï¼‰ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/83/88/839f468be3d683019c309e0acd8cd788.png?wh=1142*466\" alt=\"\"></p><p><img src=\"https://static001.geekbang.org/resource/image/1d/92/1db319c879610816c0cfea22723fc492.png?wh=1142*476\" alt=\"\"></p><center><span class=\"reference\">å¾®ä»»åŠ¡æ·»åŠ å’Œæ‰§è¡Œæµç¨‹ç¤ºæ„å›¾</span></center><p>è¯¥ç¤ºæ„å›¾æ˜¯åœ¨æ‰§è¡Œä¸€ä¸ªParseHTMLçš„å®ä»»åŠ¡ï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œé‡åˆ°äº†JavaScriptè„šæœ¬ï¼Œé‚£ä¹ˆå°±æš‚åœè§£ææµç¨‹ï¼Œè¿›å…¥åˆ°JavaScriptçš„æ‰§è¡Œç¯å¢ƒã€‚ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå…¨å±€ä¸Šä¸‹æ–‡ä¸­åŒ…å«äº†å¾®ä»»åŠ¡åˆ—è¡¨ã€‚</p><p>åœ¨JavaScriptè„šæœ¬çš„åç»­æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œåˆ†åˆ«é€šè¿‡Promiseå’ŒremoveChildåˆ›å»ºäº†ä¸¤ä¸ªå¾®ä»»åŠ¡ï¼Œå¹¶è¢«æ·»åŠ åˆ°å¾®ä»»åŠ¡åˆ—è¡¨ä¸­ã€‚æ¥ç€JavaScriptæ‰§è¡Œç»“æŸï¼Œå‡†å¤‡é€€å‡ºå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œè¿™æ—¶å€™å°±åˆ°äº†æ£€æŸ¥ç‚¹äº†ï¼ŒJavaScriptå¼•æ“ä¼šæ£€æŸ¥å¾®ä»»åŠ¡åˆ—è¡¨ï¼Œå‘ç°å¾®ä»»åŠ¡åˆ—è¡¨ä¸­æœ‰å¾®ä»»åŠ¡ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œä¾æ¬¡æ‰§è¡Œè¿™ä¸¤ä¸ªå¾®ä»»åŠ¡ã€‚ç­‰å¾®ä»»åŠ¡é˜Ÿåˆ—æ¸…ç©ºä¹‹åï¼Œå°±é€€å‡ºå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</p><p>ä»¥ä¸Šå°±æ˜¯å¾®ä»»åŠ¡çš„å·¥ä½œæµç¨‹ï¼Œä»ä¸Šé¢åˆ†ææˆ‘ä»¬å¯ä»¥å¾—å‡ºå¦‚ä¸‹å‡ ä¸ª<strong>ç»“è®º</strong>ï¼š</p><ul>\n<li>å¾®ä»»åŠ¡å’Œå®ä»»åŠ¡æ˜¯ç»‘å®šçš„ï¼Œæ¯ä¸ªå®ä»»åŠ¡åœ¨æ‰§è¡Œæ—¶ï¼Œä¼šåˆ›å»ºè‡ªå·±çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚</li>\n<li>å¾®ä»»åŠ¡çš„æ‰§è¡Œæ—¶é•¿ä¼šå½±å“åˆ°å½“å‰å®ä»»åŠ¡çš„æ—¶é•¿ã€‚æ¯”å¦‚ä¸€ä¸ªå®ä»»åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œäº§ç”Ÿäº†100ä¸ªå¾®ä»»åŠ¡ï¼Œæ‰§è¡Œæ¯ä¸ªå¾®ä»»åŠ¡çš„æ—¶é—´æ˜¯10æ¯«ç§’ï¼Œé‚£ä¹ˆæ‰§è¡Œè¿™100ä¸ªå¾®ä»»åŠ¡çš„æ—¶é—´å°±æ˜¯1000æ¯«ç§’ï¼Œä¹Ÿå¯ä»¥è¯´è¿™100ä¸ªå¾®ä»»åŠ¡è®©å®ä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´å»¶é•¿äº†1000æ¯«ç§’ã€‚æ‰€ä»¥ä½ åœ¨å†™ä»£ç çš„æ—¶å€™ä¸€å®šè¦æ³¨æ„æ§åˆ¶å¾®ä»»åŠ¡çš„æ‰§è¡Œæ—¶é•¿ã€‚</li>\n<li>åœ¨ä¸€ä¸ªå®ä»»åŠ¡ä¸­ï¼Œåˆ†åˆ«åˆ›å»ºä¸€ä¸ªç”¨äºå›è°ƒçš„å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ï¼Œæ— è®ºä»€ä¹ˆæƒ…å†µä¸‹ï¼Œå¾®ä»»åŠ¡éƒ½æ—©äºå®ä»»åŠ¡æ‰§è¡Œã€‚</li>\n</ul><h2>ç›‘å¬DOMå˜åŒ–æ–¹æ³•æ¼”å˜</h2><p>ç°åœ¨çŸ¥é“äº†å¾®ä»»åŠ¡æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Œé‚£æ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥çœ‹çœ‹å¾®ä»»åŠ¡æ˜¯å¦‚ä½•åº”ç”¨åœ¨MutationObserverä¸­çš„ã€‚MutationObserveræ˜¯ç”¨æ¥ç›‘å¬DOMå˜åŒ–çš„ä¸€å¥—æ–¹æ³•ï¼Œè€Œç›‘å¬DOMå˜åŒ–ä¸€ç›´æ˜¯å‰ç«¯å·¥ç¨‹å¸ˆä¸€é¡¹éå¸¸æ ¸å¿ƒçš„éœ€æ±‚ã€‚</p><p>æ¯”å¦‚è®¸å¤šWebåº”ç”¨éƒ½åˆ©ç”¨HTML ä¸ JavaScript æ„å»ºå…¶è‡ªå®šä¹‰æ§ä»¶ï¼Œä¸ä¸€äº›å†…ç½®æ§ä»¶ä¸åŒï¼Œè¿™äº›æ§ä»¶ä¸æ˜¯å›ºæœ‰çš„ã€‚ä¸ºäº†ä¸å†…ç½®æ§ä»¶ä¸€èµ·è‰¯å¥½åœ°å·¥ä½œï¼Œè¿™äº›æ§ä»¶å¿…é¡»èƒ½å¤Ÿé€‚åº”å†…å®¹æ›´æ”¹ã€å“åº”äº‹ä»¶å’Œç”¨æˆ·äº¤äº’ã€‚å› æ­¤ï¼ŒWebåº”ç”¨éœ€è¦<strong>ç›‘è§† DOM å˜åŒ–å¹¶åŠæ—¶åœ°åšå‡ºå“åº”</strong>ã€‚</p><p>è™½ç„¶ç›‘å¬DOMçš„éœ€æ±‚æ˜¯å¦‚æ­¤é‡è¦ï¼Œä¸è¿‡æ—©æœŸé¡µé¢å¹¶æ²¡æœ‰æä¾›å¯¹ç›‘å¬çš„æ”¯æŒï¼Œæ‰€ä»¥é‚£æ—¶è¦è§‚å¯ŸDOMæ˜¯å¦å˜åŒ–ï¼Œå”¯ä¸€èƒ½åšçš„å°±æ˜¯è½®è¯¢æ£€æµ‹ï¼Œæ¯”å¦‚ä½¿ç”¨setTimeoutæˆ–è€…setIntervalæ¥å®šæ—¶æ£€æµ‹DOMæ˜¯å¦æœ‰æ”¹å˜ã€‚è¿™ç§æ–¹å¼ç®€å•ç²—æš´ï¼Œä½†æ˜¯ä¼šé‡åˆ°ä¸¤ä¸ªé—®é¢˜ï¼šå¦‚æœæ—¶é—´é—´éš”è®¾ç½®è¿‡é•¿ï¼ŒDOM å˜åŒ–å“åº”ä¸å¤ŸåŠæ—¶ï¼›åè¿‡æ¥å¦‚æœæ—¶é—´é—´éš”è®¾ç½®è¿‡çŸ­ï¼Œåˆä¼šæµªè´¹å¾ˆå¤šæ— ç”¨çš„å·¥ä½œé‡å»æ£€æŸ¥DOMï¼Œä¼šè®©é¡µé¢å˜å¾—ä½æ•ˆã€‚</p><p>ç›´åˆ°2000å¹´çš„æ—¶å€™å¼•å…¥äº†Mutation Eventï¼ŒMutation Eventé‡‡ç”¨äº†<strong>è§‚å¯Ÿè€…çš„è®¾è®¡æ¨¡å¼</strong>ï¼Œå½“DOM æœ‰å˜åŠ¨æ—¶å°±ä¼šç«‹åˆ»è§¦å‘ç›¸åº”çš„äº‹ä»¶ï¼Œè¿™ç§æ–¹å¼å±äºåŒæ­¥å›è°ƒã€‚</p><p>é‡‡ç”¨Mutation Eventè§£å†³äº†å®æ—¶æ€§çš„é—®é¢˜ï¼Œå› ä¸ºDOMä¸€æ—¦å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šç«‹å³è°ƒç”¨JavaScriptæ¥å£ã€‚ä½†ä¹Ÿæ­£æ˜¯è¿™ç§å®æ—¶æ€§é€ æˆäº†ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ï¼Œå› ä¸ºæ¯æ¬¡DOMå˜åŠ¨ï¼Œæ¸²æŸ“å¼•æ“éƒ½ä¼šå»è°ƒç”¨JavaScriptï¼Œè¿™æ ·ä¼šäº§ç”Ÿè¾ƒå¤§çš„æ€§èƒ½å¼€é”€ã€‚æ¯”å¦‚åˆ©ç”¨JavaScriptåŠ¨æ€åˆ›å»ºæˆ–åŠ¨æ€ä¿®æ”¹50ä¸ªèŠ‚ç‚¹å†…å®¹ï¼Œå°±ä¼šè§¦å‘50æ¬¡å›è°ƒï¼Œè€Œä¸”æ¯ä¸ªå›è°ƒå‡½æ•°éƒ½éœ€è¦ä¸€å®šçš„æ‰§è¡Œæ—¶é—´ï¼Œè¿™é‡Œæˆ‘ä»¬å‡è®¾æ¯æ¬¡å›è°ƒçš„æ‰§è¡Œæ—¶é—´æ˜¯4æ¯«ç§’ï¼Œé‚£ä¹ˆ50æ¬¡å›è°ƒçš„æ‰§è¡Œæ—¶é—´å°±æ˜¯200æ¯«ç§’ï¼Œè‹¥æ­¤æ—¶æµè§ˆå™¨æ­£åœ¨æ‰§è¡Œä¸€ä¸ªåŠ¨ç”»æ•ˆæœï¼Œç”±äºMutation Eventè§¦å‘å›è°ƒäº‹ä»¶ï¼Œå°±ä¼šå¯¼è‡´åŠ¨ç”»çš„å¡é¡¿ã€‚</p><p>ä¹Ÿæ­£æ˜¯å› ä¸ºä½¿ç”¨Mutation Eventä¼šå¯¼è‡´é¡µé¢æ€§èƒ½é—®é¢˜ï¼Œæ‰€ä»¥Mutation Eventè¢«åå¯¹ä½¿ç”¨ï¼Œå¹¶é€æ­¥ä»Webæ ‡å‡†äº‹ä»¶ä¸­åˆ é™¤äº†ã€‚</p><p>ä¸ºäº†è§£å†³äº†Mutation Eventç”±äºåŒæ­¥è°ƒç”¨JavaScriptè€Œé€ æˆçš„æ€§èƒ½é—®é¢˜ï¼Œä»DOM4å¼€å§‹ï¼Œæ¨èä½¿ç”¨ MutationObserver æ¥ä»£æ›¿ Mutation Eventã€‚MutationObserver API å¯ä»¥ç”¨æ¥ç›‘è§† DOM çš„å˜åŒ–ï¼ŒåŒ…æ‹¬å±æ€§çš„å˜åŒ–ã€èŠ‚ç‚¹çš„å¢å‡ã€å†…å®¹çš„å˜åŒ–ç­‰ã€‚</p><p>é‚£ä¹ˆç›¸æ¯”è¾ƒ Mutation Eventï¼ŒMutationObserver åˆ°åº•åšäº†å“ªäº›æ”¹è¿›å‘¢ï¼Ÿ</p><p>é¦–å…ˆï¼ŒMutationObserverå°†å“åº”å‡½æ•°æ”¹æˆå¼‚æ­¥è°ƒç”¨ï¼Œå¯ä»¥ä¸ç”¨åœ¨æ¯æ¬¡DOMå˜åŒ–éƒ½è§¦å‘å¼‚æ­¥è°ƒç”¨ï¼Œè€Œæ˜¯ç­‰å¤šæ¬¡DOMå˜åŒ–åï¼Œ<strong>ä¸€æ¬¡è§¦å‘å¼‚æ­¥è°ƒç”¨</strong>ï¼Œå¹¶ä¸”è¿˜ä¼šä½¿ç”¨ä¸€ä¸ªæ•°æ®ç»“æ„æ¥è®°å½•è¿™æœŸé—´æ‰€æœ‰çš„DOMå˜åŒ–ã€‚è¿™æ ·å³ä½¿é¢‘ç¹åœ°æ“çºµDOMï¼Œä¹Ÿä¸ä¼šå¯¹æ€§èƒ½é€ æˆå¤ªå¤§çš„å½±å“ã€‚</p><p>æˆ‘ä»¬é€šè¿‡å¼‚æ­¥è°ƒç”¨å’Œå‡å°‘è§¦å‘æ¬¡æ•°æ¥ç¼“è§£äº†æ€§èƒ½é—®é¢˜ï¼Œé‚£ä¹ˆå¦‚ä½•ä¿æŒæ¶ˆæ¯é€šçŸ¥çš„åŠæ—¶æ€§å‘¢ï¼Ÿå¦‚æœé‡‡ç”¨setTimeoutåˆ›å»ºå®ä»»åŠ¡æ¥è§¦å‘å›è°ƒçš„è¯ï¼Œé‚£ä¹ˆå®æ—¶æ€§å°±ä¼šå¤§æ‰“æŠ˜æ‰£ï¼Œå› ä¸ºä¸Šé¢æˆ‘ä»¬åˆ†æè¿‡ï¼Œåœ¨ä¸¤ä¸ªä»»åŠ¡ä¹‹é—´ï¼Œå¯èƒ½ä¼šè¢«æ¸²æŸ“è¿›ç¨‹æ’å…¥å…¶ä»–çš„äº‹ä»¶ï¼Œä»è€Œå½±å“åˆ°å“åº”çš„å®æ—¶æ€§ã€‚</p><p>è¿™æ—¶å€™ï¼Œ<strong>å¾®ä»»åŠ¡</strong>å°±å¯ä»¥ä¸Šåœºäº†ï¼Œåœ¨æ¯æ¬¡DOMèŠ‚ç‚¹å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæ¸²æŸ“å¼•æ“å°†å˜åŒ–è®°å½•å°è£…æˆå¾®ä»»åŠ¡ï¼Œå¹¶å°†å¾®ä»»åŠ¡æ·»åŠ è¿›å½“å‰çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚è¿™æ ·å½“æ‰§è¡Œåˆ°æ£€æŸ¥ç‚¹çš„æ—¶å€™ï¼ŒV8å¼•æ“å°±ä¼šæŒ‰ç…§é¡ºåºæ‰§è¡Œå¾®ä»»åŠ¡äº†ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œ MutationObserveré‡‡ç”¨äº†â€œ<strong>å¼‚æ­¥+å¾®ä»»åŠ¡</strong>â€çš„ç­–ç•¥ã€‚</p><ul>\n<li>é€šè¿‡<strong>å¼‚æ­¥</strong>æ“ä½œè§£å†³äº†åŒæ­¥æ“ä½œçš„<strong>æ€§èƒ½é—®é¢˜</strong>ï¼›</li>\n<li>é€šè¿‡<strong>å¾®ä»»åŠ¡</strong>è§£å†³äº†<strong>å®æ—¶æ€§çš„é—®é¢˜</strong>ã€‚</li>\n</ul><h2>æ€»ç»“</h2><p>å¥½äº†ï¼Œä»Šå¤©å°±ä»‹ç»åˆ°è¿™é‡Œï¼Œä¸‹é¢æˆ‘æ¥æ€»ç»“ä¸‹ä»Šå¤©çš„å†…å®¹ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬å›é¡¾äº†å®ä»»åŠ¡ï¼Œç„¶ååœ¨å®ä»»åŠ¡çš„åŸºç¡€ä¹‹ä¸Šï¼Œæˆ‘ä»¬åˆ†æäº†å¼‚æ­¥å›è°ƒå‡½æ•°çš„ä¸¤ç§å½¢å¼ï¼Œå…¶ä¸­æœ€åä¸€ç§å›è°ƒçš„æ–¹å¼å°±æ˜¯é€šè¿‡å¾®ä»»åŠ¡æ¥å®ç°çš„ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬è¯¦ç»†åˆ†æäº†æµè§ˆå™¨æ˜¯å¦‚ä½•å®ç°å¾®ä»»åŠ¡çš„ï¼ŒåŒ…æ‹¬å¾®ä»»åŠ¡é˜Ÿåˆ—ã€æ£€æŸ¥ç‚¹ç­‰æ¦‚å¿µã€‚</p><p>æœ€åæˆ‘ä»¬ä»‹ç»äº†ç›‘å¬DOMå˜åŒ–æŠ€æœ¯æ–¹æ¡ˆçš„æ¼”åŒ–å²ï¼Œä»è½®è¯¢åˆ°Mutation Eventå†åˆ°æœ€æ–°ä½¿ç”¨çš„MutationObserverã€‚MutationObserveræ–¹æ¡ˆçš„æ ¸å¿ƒå°±æ˜¯é‡‡ç”¨äº†å¾®ä»»åŠ¡æœºåˆ¶ï¼Œæœ‰æ•ˆåœ°æƒè¡¡äº†å®æ—¶æ€§å’Œæ‰§è¡Œæ•ˆç‡çš„é—®é¢˜ã€‚</p><h2>æ€è€ƒæ—¶é—´</h2><p>ä¸‹ç¯‡æ–‡ç« æˆ‘ä¼šä»Promiseäº§ç”Ÿçš„åŠ¨æœºè§’åº¦æ¥åˆ†æPromiseï¼Œè¿™éœ€è¦ä¸€å®šçš„PromiseåŸºç¡€ï¼Œæ‰€ä»¥ä»Šå¤©ç•™ç»™ä½ çš„ä½œä¸šæ˜¯ææ¸…æ¥šPromiseçš„å·¥ä½œåŸç†ï¼Œå¼„æ¸…æ¥šä¸‹é¢è¿™æ®µä»£ç çš„è¾“å‡ºç»“æœï¼Œå¹¶è§£é‡Šå…¶åŸå› ã€‚</p><pre><code>function executor(resolve, reject) {\n    let rand = Math.random();\n    console.log(1)\n    console.log(rand)\n    if (rand &gt; 0.5)\n        resolve()\n    else\n        reject()\n}\nvar p0 = new Promise(executor);\n\nvar p1 = p0.then((value) =&gt; {\n    console.log(&quot;succeed-1&quot;)\n    return new Promise(executor)\n})\n\n\nvar p3 = p1.then((value) =&gt; {\n    console.log(&quot;succeed-2&quot;)\n    return new Promise(executor)\n})\n\nvar p4 = p3.then((value) =&gt; {\n    console.log(&quot;succeed-3&quot;)\n    return new Promise(executor)\n})\n\n\np4.catch((error) =&gt; {\n    console.log(&quot;error&quot;)\n})\nconsole.log(2)\n</code></pre><p>æ¬¢è¿åœ¨ç•™è¨€åŒºä¸æˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºè®°å½•ä½ çš„æ€è€ƒè¿‡ç¨‹ã€‚æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p><p></p>","neighbors":{"left":{"article_title":"17 | WebAPIï¼šXMLHttpRequestæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ","id":135127},"right":{"article_title":"19 | Promiseï¼šä½¿ç”¨Promiseï¼Œå‘Šåˆ«å›è°ƒå‡½æ•°","id":136895}},"comments":[{"had_liked":false,"id":134031,"user_name":"é˜¿æ¡","can_delete":false,"product_type":"c1","uid":1160167,"ip_address":"","ucode":"E82211BD6E9E89","user_header":"https://static001.geekbang.org/account/avatar/00/11/b3/e7/227ee616.jpg","comment_is_top":false,"comment_ctime":1568724162,"is_pvip":false,"replies":[{"id":"51448","content":"<br><br>éå¸¸é«˜å…´ä½ èƒ½æå‡ºè¿™äº›é—®é¢˜ã€‚<br><br>ä½ æœ‰è¿™ä¸¤ä¸ªç–‘é—®å¾ˆæ­£å¸¸ï¼Œè¯´æ˜ä½ çœ‹å¾—å¾ˆä»”ç»†ï¼Œä¹‹æ‰€ä»¥ä½ ä¼šæ„Ÿåˆ°ç–‘æƒ‘ï¼Œä¸»è¦æ˜¯æˆ‘åœ¨å†™ä½œè¿‡ç¨‹ä¸­å·æ‡’äº†ã€‚<br><br>æˆ‘å…ˆæ¥è§£ç­”ä½ çš„ç¬¬ä¸€ä¸ªé—®é¢˜ï¼š<br>ç¬¬ä¸€æ®µè¯æ˜¯WHATWGæ ‡å‡†å®šä¹‰çš„ï¼Œåœ¨WHATWGè§„èŒƒï¼Œå®šä¹‰äº†åœ¨ä¸»çº¿ç¨‹çš„å¾ªç¯ç³»ç»Ÿä¸­ï¼Œå¯ä»¥æœ‰å¤šä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ¯”å¦‚é¼ æ ‡äº‹ä»¶çš„é˜Ÿåˆ—ï¼ŒIOå®Œæˆæ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ¸²æŸ“ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¹¶ä¸”å¯ä»¥ç»™è¿™äº›æ¶ˆæ¯é˜Ÿåˆ—æ’ä¼˜å…ˆçº§ã€‚<br><br>ä½†æ˜¯åœ¨æµè§ˆå™¨å®ç°çš„è¿‡ç¨‹ä¸­ï¼Œç›®å‰åªæœ‰ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå’Œä¸€ä¸ªå»¶è¿Ÿæ‰§è¡Œé˜Ÿåˆ—ã€‚<br>ä¸€ä¸ªæ˜¯è§„èŒƒï¼Œä¸€ä¸ªæ˜¯å®ç°ï¼Œä¸»è¦æˆ‘æ²¡æœ‰åœ¨æ–‡ä¸­å¼ºè°ƒè¿™ç‚¹ï¼Œæ‰€ä»¥ä½ ä¼šäº§ç”Ÿçš„è¿™æ ·çš„ç–‘é—®ã€‚<br><br>å…³äºç¬¬äºŒä¸ªé—®é¢˜è§£é‡Šèµ·æ¥å°±æ¯”è¾ƒå¤æ‚äº†ï¼Œæ¶‰åŠåˆ°æ¥äº†V8æ˜¯æ€ä¹ˆæ‰§è¡Œçš„äº†ï¼Œä¸“æ ä¸­çš„&quot;å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡&quot;æˆ‘æ²¡æœ‰æ·±å…¥åˆ†æã€‚æ‰€ä»¥æˆ‘å·æ‡’äº†ï¼ŒæŠŠä¸¤ä¸ªç¨å¾®æœ‰ç‚¹ä¸åŒçš„æ¦‚å¿µéƒ½ç§°ä¸ºäº†â€œå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡â€ï¼Œè¦è§£é‡Šæ¸…æ¥šè¿™ä¸ªé—®é¢˜è¿˜è¦ç‰µæ¶‰åˆ°V8çš„ä¸€ä¸ªåº•å±‚é€»è¾‘ï¼Œæ—¢ç„¶ä½ æå‡ºæ¥äº†ï¼Œé‚£æˆ‘å°±æ‰“ç®—åœ¨è¯¾ç¨‹ç»“æŸåï¼Œé€šè¿‡åŠ é¤çš„å½¢å¼æ¥å¼€ä¸€è®²ï¼Œè®²æ¸…æ¥šäº†è¿™ä¸ªè¿˜èƒ½é¢å¤–åœ°ç†è§£ Realm æ¦‚å¿µã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æå…µ","uid":"1141464","ctime":1568774604,"ip_address":"","comment_id":134031,"utype":1}],"discussion_count":10,"race_medal":0,"score":"542734603458","product_id":100033601,"comment_content":"ä¹°è¿‡ä¸å°‘ä¸“æ ï¼Œæ¯ä¸€ç¯‡éƒ½ç´§è·Ÿå¹¶ä¸”ä¼šåå¤çœ‹çš„ç›®å‰åªæœ‰è¿™ä¸€ä¸ªã€‚ä¸€æ–¹é¢æ‡’å¦ä¸€æ–¹é¢æ˜¯å¥½çš„ç³»ç»Ÿæ€§çš„å­¦ä¹ èµ„æ–™ä¸å¤šï¼Œæ‰€ä»¥ä»¥å‰å¾ˆå°‘å…³æ³¨ååº•å±‚åŸç†æ€§çš„ä¸œè¥¿ï¼Œæ‰€ä»¥è¿™ä¸ªä¸“æ å­¦ä¹ èµ·æ¥æ˜¯æ—¢æ”¶è·æ»¡æ»¡æœ‰æ—¶ä¹Ÿä¸ä¹ä¸€é¢å¤´é—®å·ã€‚<br><br>è¿™é‡Œæœ‰ 2 ä¸ªé—®é¢˜æƒ³å‘è€å¸ˆè¯·æ•™ï¼Œå¸Œæœ›è€å¸ˆç™¾å¿™ä¹‹ä¸­èƒ½æŠ½ç©ºè§£ç­”ä¸€ä¸‹ï¼Œå¤šè°¢å¤šè°¢ã€‚<br><br>1ã€ä¹‹å‰è®²è¿‡ï¼Œåœ¨å¾ªç¯ç³»ç»Ÿçš„ä¸€ä¸ªå¾ªç¯ä¸­ï¼Œå…ˆä»æ¶ˆæ¯é˜Ÿåˆ—å¤´éƒ¨å–å‡ºä¸€ä¸ªä»»åŠ¡æ‰§è¡Œï¼Œè¯¥ä»»åŠ¡æ‰§è¡Œå®Œåï¼Œå†å»å»¶è¿Ÿé˜Ÿåˆ—ä¸­æ‰¾åˆ°æ‰€æœ‰çš„è¿‡æœŸä»»åŠ¡ä¾æ¬¡æ‰§è¡Œå®Œã€‚é‚£å‰é¢è¿™å¥è¯å’Œæœ¬ç¯‡æ–‡ç« çš„è¿™å¥è¯å¥½åƒæœ‰çŸ›ç›¾ï¼š&quot;å…ˆä»å¤šä¸ªæ¶ˆæ¯é˜Ÿåˆ—ä¸­é€‰å‡ºä¸€ä¸ªæœ€è€çš„ä»»åŠ¡ï¼Œè¿™ä¸ªä»»åŠ¡ç§°ä¸º oldestTask&quot;<br><br>2ã€â€é€šå¸¸æƒ…å†µä¸‹ï¼Œåœ¨å½“å‰å®ä»»åŠ¡ä¸­çš„ JavaScript å¿«æ‰§è¡Œå®Œæˆæ—¶ï¼Œä¹Ÿå°±åœ¨ JavaScript å¼•æ“å‡†å¤‡é€€å‡ºå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶æ¸…ç©ºè°ƒç”¨æ ˆçš„æ—¶å€™ï¼ŒJavaScript å¼•æ“ä¼šæ£€æŸ¥å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œç„¶åæŒ‰ç…§é¡ºåºæ‰§è¡Œé˜Ÿåˆ—ä¸­çš„å¾®ä»»åŠ¡ã€‚â€œ<br>åœ¨é¡µé¢ç”Ÿå­˜å‘¨æœŸå†…ï¼Œå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡åªæœ‰ä¸€ä»½å¹¶ä¸”ä¼šä¸€ç›´å­˜åœ¨è°ƒç”¨æ ˆä¸­ï¼Œåªæœ‰å½“é¡µé¢è¢«å…³é—­çš„æ—¶å€™å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡æ‰ä¼šæ¶ˆå¤±ã€‚é¡µé¢éƒ½å¿«å…³é—­äº†ï¼ŒæŠŠå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡éƒ½æ‰§è¡Œä¸€éï¼Œå¥½åƒä¹Ÿæ²¡å•¥æ„ä¹‰ã€‚ç³»ç»Ÿåº”è¯¥ä¸ä¼šåšæ²¡æœ‰æ„ä¹‰çš„äº‹æƒ…ï¼Œæ‰€ä»¥åº”è¯¥æ˜¯æˆ‘å¯¹å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡çš„æŸå¤„ç†è§£æœ‰é—®é¢˜ï¼Œä½†æˆ‘åˆè‡ªæŸ¥ä¸åˆ°ã€‚","like_count":126,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"æå…µ","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467590,"discussion_content":"\n\néå¸¸é«˜å…´ä½ èƒ½æå‡ºè¿™äº›é—®é¢˜ã€‚\n\nä½ æœ‰è¿™ä¸¤ä¸ªç–‘é—®å¾ˆæ­£å¸¸ï¼Œè¯´æ˜ä½ çœ‹å¾—å¾ˆä»”ç»†ï¼Œä¹‹æ‰€ä»¥ä½ ä¼šæ„Ÿåˆ°ç–‘æƒ‘ï¼Œä¸»è¦æ˜¯æˆ‘åœ¨å†™ä½œè¿‡ç¨‹ä¸­å·æ‡’äº†ã€‚\n\næˆ‘å…ˆæ¥è§£ç­”ä½ çš„ç¬¬ä¸€ä¸ªé—®é¢˜ï¼š\nç¬¬ä¸€æ®µè¯æ˜¯WHATWGæ ‡å‡†å®šä¹‰çš„ï¼Œåœ¨WHATWGè§„èŒƒï¼Œå®šä¹‰äº†åœ¨ä¸»çº¿ç¨‹çš„å¾ªç¯ç³»ç»Ÿä¸­ï¼Œå¯ä»¥æœ‰å¤šä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ¯”å¦‚é¼ æ ‡äº‹ä»¶çš„é˜Ÿåˆ—ï¼ŒIOå®Œæˆæ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ¸²æŸ“ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¹¶ä¸”å¯ä»¥ç»™è¿™äº›æ¶ˆæ¯é˜Ÿåˆ—æ’ä¼˜å…ˆçº§ã€‚\n\nä½†æ˜¯åœ¨æµè§ˆå™¨å®ç°çš„è¿‡ç¨‹ä¸­ï¼Œç›®å‰åªæœ‰ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå’Œä¸€ä¸ªå»¶è¿Ÿæ‰§è¡Œé˜Ÿåˆ—ã€‚\nä¸€ä¸ªæ˜¯è§„èŒƒï¼Œä¸€ä¸ªæ˜¯å®ç°ï¼Œä¸»è¦æˆ‘æ²¡æœ‰åœ¨æ–‡ä¸­å¼ºè°ƒè¿™ç‚¹ï¼Œæ‰€ä»¥ä½ ä¼šäº§ç”Ÿçš„è¿™æ ·çš„ç–‘é—®ã€‚\n\nå…³äºç¬¬äºŒä¸ªé—®é¢˜è§£é‡Šèµ·æ¥å°±æ¯”è¾ƒå¤æ‚äº†ï¼Œæ¶‰åŠåˆ°æ¥äº†V8æ˜¯æ€ä¹ˆæ‰§è¡Œçš„äº†ï¼Œä¸“æ ä¸­çš„&amp;quot;å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡&amp;quot;æˆ‘æ²¡æœ‰æ·±å…¥åˆ†æã€‚æ‰€ä»¥æˆ‘å·æ‡’äº†ï¼ŒæŠŠä¸¤ä¸ªç¨å¾®æœ‰ç‚¹ä¸åŒçš„æ¦‚å¿µéƒ½ç§°ä¸ºäº†â€œå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡â€ï¼Œè¦è§£é‡Šæ¸…æ¥šè¿™ä¸ªé—®é¢˜è¿˜è¦ç‰µæ¶‰åˆ°V8çš„ä¸€ä¸ªåº•å±‚é€»è¾‘ï¼Œæ—¢ç„¶ä½ æå‡ºæ¥äº†ï¼Œé‚£æˆ‘å°±æ‰“ç®—åœ¨è¯¾ç¨‹ç»“æŸåï¼Œé€šè¿‡åŠ é¤çš„å½¢å¼æ¥å¼€ä¸€è®²ï¼Œè®²æ¸…æ¥šäº†è¿™ä¸ªè¿˜èƒ½é¢å¤–åœ°ç†è§£ Realm æ¦‚å¿µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568774604,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1782777,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/33/f9/50b76abe.jpg","nickname":"AMIR","note":"","ucode":"65142D9669071B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":98729,"discussion_content":"ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå»¶æ—¶é˜Ÿåˆ—å¦‚æœå­˜åœ¨ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¸¤ä¸ªsetTimeOutä¸­è¢«åŠ å…¥é‚£ä¹ˆå¤šå…¶ä»–ä»»åŠ¡ï¼Œä¸åº”è¯¥æ˜¯æœ€å¤šæ‰§è¡Œä¸€ä¸ªï¼Œç„¶ååˆ¤æ–­å»¶æ—¶é˜Ÿåˆ—æ˜¯å¦æœ‰åˆ°æœŸdeï¼Œç„¶åå°±æ‰§è¡Œå˜›ï¼Ÿæ€ä¹ˆä¼šæ·»åŠ åˆ°å°¾å·´ä¸Š","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577183715,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1440735,"avatar":"https://static001.geekbang.org/account/avatar/00/15/fb/df/8615f2d3.jpg","nickname":"kaiking","note":"","ucode":"DBE91C5855B9FD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379540,"discussion_content":"è¿™é—®é¢˜é—®çš„ï¼Œæˆ‘è¿é¢˜ç›®éƒ½çœ‹ä¸æ˜ç™½ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623945182,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1365541,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d6/25/a95a2064.jpg","nickname":"luwei","note":"","ucode":"0960A09F7B8D59","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287358,"discussion_content":"ä¸ºä»€ä¹ˆè¯´â€œå¾®ä»»åŠ¡æ‰§è¡Œæ—¶æœºæ˜¯å½“å‰å®ä»»åŠ¡ç»“æŸä¹‹å‰ã€‚â€ï¼Ÿå¥½å¤šèµ„æ–™è¯´å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œä¹‹åï¼Œé©¬ä¸Šå»æ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚åˆ°åº•å¾®ä»»åŠ¡æ‰§è¡Œæ—¶æœºæ˜¯åœ¨ä»€ä¹ˆæ—¶å€™ï¼Ÿåœ¨è¯¾ç¨‹åŠ é¤é‡Œæ²¡æ‰¾åˆ°è¿™æ–¹é¢çš„å†…å®¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593423671,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2273206,"avatar":"https://static001.geekbang.org/account/avatar/00/22/af/b6/e5de8ee4.jpg","nickname":"å¼ å»ºè¾‰","note":"","ucode":"C52626DF995726","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1365541,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d6/25/a95a2064.jpg","nickname":"luwei","note":"","ucode":"0960A09F7B8D59","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383897,"discussion_content":"å¾®ä»»åŠ¡æ‰§è¡Œæ—¶æœºæ˜¯åœ¨å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œä¹‹åï¼Œä¼šå»¶é•¿å®ä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´çš„ï¼Œå¯ä»¥æ‰‹å†™ä¸‹ä»£ç ï¼Œç„¶åç”¨ Performance æŸ¥çœ‹ä¸‹å°±æ‡‚äº†","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1626275364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":287358,"ip_address":""},"score":383897,"extra":""}]},{"author":{"id":1376627,"avatar":"https://static001.geekbang.org/account/avatar/00/15/01/73/a3bbaab9.jpg","nickname":"Aiden","note":"","ucode":"3B0FA384541943","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":235155,"discussion_content":"è¿˜æ˜¯æ²¡ææ‡‚è¿™ä¸ªé—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587024584,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1489957,"avatar":"https://static001.geekbang.org/account/avatar/00/16/bc/25/1c92a90c.jpg","nickname":"tt","note":"","ucode":"7753B79AD5A9AC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":221907,"discussion_content":"è°¢è°¢ä½ å¸®æˆ‘æé—®ğŸ˜œà½¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586078851,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1147347,"avatar":"https://static001.geekbang.org/account/avatar/00/11/81/d3/f0a88806.jpg","nickname":"ğŸ ğŸ¾ ğŸ”†","note":"","ucode":"1B7C90800AD4D0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":65486,"discussion_content":"ç¬¬äºŒä¸ªæˆ‘çœ‹çš„æ—¶å€™ä¹Ÿæ²¡æ‡‚ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575005722,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1230187,"avatar":"https://static001.geekbang.org/account/avatar/00/12/c5/6b/e9d0d04a.jpg","nickname":"å¡å¡è¥¿","note":"","ucode":"D42A3395B13D6C","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":25110,"discussion_content":"ç¬¬äºŒä¸ªé—®é¢˜ä¹Ÿæ˜¯æˆ‘çš„ç–‘æƒ‘ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570422473,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1473520,"avatar":"https://static001.geekbang.org/account/avatar/00/16/7b/f0/269139d5.jpg","nickname":"Cris","note":"","ucode":"F8A287134F1078","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":24604,"discussion_content":"æ˜¯ç³»ç»Ÿè°ƒç”¨æ ˆå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570194335,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133201,"user_name":"man-moonth","can_delete":false,"product_type":"c1","uid":1383156,"ip_address":"","ucode":"145EED9CFA19E4","user_header":"https://static001.geekbang.org/account/avatar/00/15/1a/f4/a40453e7.jpg","comment_is_top":false,"comment_ctime":1568442119,"is_pvip":true,"discussion_count":3,"race_medal":0,"score":"48813082375","product_id":100033601,"comment_content":"é”™è¯¯å’Œç¼ºå¤±ä¹‹å¤„çƒ¦è¯·è€å¸ˆæŒ‡æ­£ï¼š<br>1. æ‰§è¡Œ`p0 = new Promise(executor)`ï¼Œç«‹å³è°ƒç”¨`executor()`ã€‚ä¾æ¬¡æ‰“å°`1`å’Œ`rand`ï¼Œæ ¹æ®`rand &gt; 0.5`åˆ¤æ–­æ‰§è¡Œ`resolve()`è¿˜æ˜¯`reject()`ï¼Œåˆ†åˆ«å†³å®šäº†p0çš„çŠ¶æ€ä¸ºfufilledï¼ˆæˆåŠŸï¼‰è¿˜æ˜¯rejected(å¤±è´¥)ã€‚<br>2. ç»§ç»­å¾€ä¸‹æ‰§è¡Œ`p1 = p0.then()`ã€`p3 = p1.then()`ã€`p4 = p3.then()`ã€`p4.catch()`ï¼Œ`p0.then()`ã€`p1.then()`ã€`p3.then()`ã€`p4.catch()`ç­‰ä¾æ¬¡æ¨å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œp1ã€p3ã€p4çš„çŠ¶æ€å˜ä¸ºpending(åˆå§‹çŠ¶æ€)ã€‚æ­¤å¤„p4æ·»åŠ äº†`catch()`æ–¹æ³•ï¼Œè‹¥p4ä¹Ÿæœ‰`then()`æ–¹æ³•ï¼Œé‚£ä¹ˆæ¨å…¥é˜Ÿåˆ—çš„å°±æ˜¯`p4.then().catch()`ã€‚<br>3. æ‰§è¡Œ`console.log(2)`ã€‚å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ã€‚<br>4. ä»å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡º`p0.then()`ã€‚å¦‚æœp0çš„çŠ¶æ€ä¸ºfufilledï¼Œé‚£ä¹ˆæ‰§è¡Œ`p0.then()`ï¼šæ‰“å°`succeed-1`ï¼Œç„¶åæ‰§è¡Œ`new Promise(executor)`ï¼Œå®Œæ¯•åp1çš„çŠ¶æ€è½¬ä¸ºfufilled&#47;rejectedï¼›å¦‚æœp0çš„çŠ¶æ€ä¸ºrejectedï¼Œåˆ™ä¸æ‰§è¡Œ`p0.then()`ï¼Œp1çš„çŠ¶æ€ç½®ä¸ºrejectedã€‚<br>5. ç»§ç»­ä»å¾®ä»»åŠ¡é˜Ÿåˆ—å–å‡º`p1.then()`ã€`p3.then()`ï¼Œä»–ä»¬çš„å¤„ç†æ–¹å¼ä¸ç¬¬3æ­¥åŒç†ã€‚<br>6. å–å‡º`p4.catch()`ï¼Œå¦‚æœp4çš„çŠ¶æ€ä¸ºrejectedï¼Œé‚£ä¹ˆæ‰§è¡Œ`p4.catch()`ï¼Œå¦åˆ™å•¥ä¹Ÿä¸åšã€‚ç»“æŸã€‚","like_count":10,"discussions":[{"author":{"id":1938247,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/93/47/ef2c3c4e.jpg","nickname":"ä½•æ±Ÿæ¶›","note":"","ucode":"844470733623BF","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574922,"discussion_content":"æˆ‘è®°å¾—rejectedå¯ä»¥ä¼ é€’ï¼Œä¹Ÿå°±æ˜¯è¯´p0p1p3ä»»ä½•ä¸€ä¸ªæ‹’ç»ï¼Œéƒ½ä¼šæ‰§è¡Œcatch","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654437640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2172330,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKw8ictgYcqf6upCGib0uBXa6oeWfVJARSLL1SFXtrz3TkJiavPicesLEoBg9RL7ibRYKTtZDexsrJPjJA/132","nickname":"victorykong","note":"","ucode":"76C1BE240D53F8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351754,"discussion_content":"èµï¼Œä¸ Promise A+ å®ç°æ˜¯ä¸€è‡´çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614426366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1256496,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","nickname":"pyhhou","note":"","ucode":"31EF8D50CF91A5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":13464,"discussion_content":"èµï¼Œè¯·æ•™ä¸€ä¸‹ï¼Œç¬¬ 2 æ­¥ä¸­ï¼Œå¦‚æœ p4 æœ‰ `then()` æ–¹æ³•ï¼Œä¸ºä»€ä¹ˆæ¨å…¥é˜Ÿåˆ—çš„æ˜¯ `p4.then().catch()` ? ä¸åº”è¯¥æ˜¯ `p4.then()` å’Œ `p4.catch()` å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568660714,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141661,"user_name":"splm","can_delete":false,"product_type":"c1","uid":1338601,"ip_address":"","ucode":"2216332252CEA7","user_header":"https://static001.geekbang.org/account/avatar/00/14/6c/e9/072b33b9.jpg","comment_is_top":false,"comment_ctime":1571209027,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"35930947395","product_id":100033601,"comment_content":"å‰é¢çš„è¯¾ç¨‹ä¸¾è¿‡è¯´è¿‡ï¼Œæ­£å¸¸ä»»åŠ¡ä¼šè¢«æ”¾åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œå»¶æ—¶ä»»åŠ¡ä¼šæ”¾åœ¨å»¶æ—¶æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œè¿˜ä¸¾è¿‡ä¸€æ®µä»£ç ï¼Œä»»åŠ¡å¾ªç¯ä¼šä¸æ–­çš„ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­å–ä»»åŠ¡ï¼Œå¹¶æ‰§è¡Œï¼Œä¹Ÿä¼šä¸æ–­çš„åˆ¤æ–­å»¶æ—¶ä»»åŠ¡æ˜¯å¦åˆ°æœŸéœ€è¦æ‰§è¡Œã€‚ä½†åœ¨è¿™èŠ‚è¯¾é‡Œé¢å´è¯´å»¶è¿Ÿä»»åŠ¡ä¼šè¿½åŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—æœ«å°¾ï¼Œå¬è¯´å»å°±åƒæ™®é€šä»»åŠ¡å’Œå»¶è¿Ÿä»»åŠ¡éƒ½åœ¨ä¸€èµ·ï¼Œåªæ˜¯å»¶è¿Ÿä»»åŠ¡è¢«è¿½åŠ åˆ°æœ«å°¾ã€‚ç©¶ç«Ÿæœ‰å‡ ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ™®é€šå’Œå»¶è¿Ÿé˜Ÿåˆ—æ˜¯çœŸå®å­˜åœ¨è¿˜æ˜¯åªæ˜¯æ¦‚å¿µåŒºåˆ†ï¼Œå®é™…ä¸¤ç§ä»»åŠ¡éƒ½ä¿å­˜åœ¨ä¸€å—ã€‚","like_count":8,"discussions":[{"author":{"id":1352917,"avatar":"https://static001.geekbang.org/account/avatar/00/14/a4/d5/d1381d9b.jpg","nickname":"å’šå’šå’šä¸œ","note":"","ucode":"BAAF965577592B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336554,"discussion_content":"å¯ä»¥çœ‹ä¸Šä¸€æ¡è¯„è®ºçš„ä½œè€…å›å¤ï¼Œå®ç°ä¸Šæ˜¯æœ‰ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œä¸€ä¸ªæ™®é€šé˜Ÿåˆ—ï¼Œä¸€ä¸ªå»¶è¿Ÿæ‰§è¡Œé˜Ÿåˆ—ã€‚æœ¬æ–‡å†™çš„è¿½åŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—å°¾éƒ¨æ˜¯æŒ‡ï¼Œæ™®é€šä»»åŠ¡è¿½åŠ åˆ°æ™®é€šé˜Ÿåˆ—å°¾éƒ¨ï¼Œå»¶æ—¶ä»»åŠ¡è¿½åŠ åˆ°å»¶æ—¶é˜Ÿåˆ—çš„å°¾éƒ¨ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1608623756,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1352917,"avatar":"https://static001.geekbang.org/account/avatar/00/14/a4/d5/d1381d9b.jpg","nickname":"å’šå’šå’šä¸œ","note":"","ucode":"BAAF965577592B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336552,"discussion_content":"å¯ä»¥çœ‹ä¸Šä¸€æ¡è¯„è®ºçš„ä½œè€…å›å¤ï¼Œå®ç°ä¸Šæ˜¯æœ‰ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œä¸€ä¸ªæ™®é€šé˜Ÿåˆ—ï¼Œä¸€ä¸ªå»¶è¿Ÿæ‰§è¡Œé˜Ÿåˆ—ã€‚æœ¬æ–‡å†™çš„è¿½åŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—å°¾éƒ¨æ˜¯æŒ‡ï¼Œæ™®é€šä»»åŠ¡è¿½åŠ åˆ°æ™®é€šé˜Ÿåˆ—å°¾éƒ¨ï¼Œå»¶æ—¶ä»»åŠ¡è¿½åŠ åˆ°å»¶æ—¶é˜Ÿåˆ—çš„å°¾éƒ¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608623700,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1651132,"avatar":"https://static001.geekbang.org/account/avatar/00/19/31/bc/4e679d81.jpg","nickname":"æ¨è¶Š","note":"","ucode":"88B933F2096E11","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306411,"discussion_content":"å§æ§½ è¯´åˆ°æˆ‘å¿ƒåé‡Œå»äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600264614,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2054146,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/58/02/d07b3c76.jpg","nickname":"hoverCowğŸğŸ°","note":"","ucode":"079E10A6B6FA3B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290879,"discussion_content":"æˆ‘ä¹Ÿæœ‰åŒæ ·çš„ç–‘æƒ‘å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594632392,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133889,"user_name":"èŠ±å„¿ä¸å°‘å¹´","can_delete":false,"product_type":"c1","uid":1046304,"ip_address":"","ucode":"E2D685737E4F1B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f7/20/e2dfa9c2.jpg","comment_is_top":false,"comment_ctime":1568691159,"is_pvip":false,"replies":[{"id":"51510","content":"è¦ç†è§£è¿™ä¸ªå°±å¾—è®²è§‚å¯Ÿè€…æ¨¡å¼äº†ï¼Œä¸è¿‡å±•å¼€åˆæ˜¯ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘åˆ°æ—¶å€™åŠ é¤çš„æ—¶å€™å†æ¥ç»“åˆè§‚å¯Ÿè€…æ¨¡å¼æ¥è®²è¿™ä¸ªã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æå…µ","uid":"1141464","ctime":1568810062,"ip_address":"","comment_id":133889,"utype":1}],"discussion_count":2,"race_medal":0,"score":"31633462231","product_id":100033601,"comment_content":"æé—®: Mutation Eventçš„å›è°ƒ æ˜¯åŒæ­¥çš„å—ï¼Ÿå¦‚æœæ˜¯åŒæ­¥çš„ï¼Œå¼•æ“æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Ÿ<br>åŒæ­¥ä»£ç æ‰§è¡Œçš„æ—¶å€™ï¼Œè¿˜èƒ½æ’å…¥å…¶ä»–ä»£ç (mutation å›è°ƒ)ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"æå…µ","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467546,"discussion_content":"è¦ç†è§£è¿™ä¸ªå°±å¾—è®²è§‚å¯Ÿè€…æ¨¡å¼äº†ï¼Œä¸è¿‡å±•å¼€åˆæ˜¯ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘åˆ°æ—¶å€™åŠ é¤çš„æ—¶å€™å†æ¥ç»“åˆè§‚å¯Ÿè€…æ¨¡å¼æ¥è®²è¿™ä¸ªã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1568810062,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1046304,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/20/e2dfa9c2.jpg","nickname":"èŠ±å„¿ä¸å°‘å¹´","note":"","ucode":"E2D685737E4F1B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":15330,"discussion_content":"å¥½çš„ï¼Œè§‚å¯Ÿè€…æ¨¡å¼æ‡‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568816077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133401,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1568552758,"is_pvip":true,"discussion_count":2,"race_medal":1,"score":"27338356534","product_id":100033601,"comment_content":"è€å¸ˆï¼Œæˆ‘çœ‹æ–‡ç« çš„å›¾å±•ç¤ºï¼Œå¾®ä»»åŠ¡é˜Ÿåˆ—åªå­˜åœ¨å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­å—ï¼Ÿ å¦‚æœä¸€ä¸ªå¾®ä»»åŠ¡æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­äº§ç”Ÿäº†ï¼Œä¹Ÿä¼šä¿å­˜åˆ°å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„å¾®é˜Ÿåˆ—ä¸­å—ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":2448960,"avatar":"https://static001.geekbang.org/account/avatar/00/25/5e/40/dee7906c.jpg","nickname":"å¼ æ¬£","note":"","ucode":"557C42848C77E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":355586,"discussion_content":"å¾®ä»»åŠ¡åº”è¯¥æ˜¯æ·»åŠ åœ¨å½“å‰å®ä»»åŠ¡æœ«å°¾çš„é˜Ÿåˆ—ä¸­ï¼Œåœ¨é‡åˆ°jsçš„æ—¶å€™æ‰§è¡Œjså°±æ„å»ºäº†ä¸€ä¸ªå®ä»»åŠ¡ã€‚è¿™ä¸ªå®ä»»åŠ¡ä¸­æ‰€æœ‰äº§ç”Ÿçš„å¾®ä»»åŠ¡å¼‚æ­¥å›è°ƒéƒ½ä¼šæ·»åŠ åˆ°å½“å‰å®ä»»åŠ¡æœ«å°¾å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œæˆ‘è§‰å¾—è€å¸ˆè¿™è¾¹è¯´çš„åº”è¯¥æ˜¯ç®€åŒ–äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615456089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1295848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/yicibWmBIDaSpBYI5wCBDQcYu6mxjvz3XZzBibxSNXFfqCS6OJOjvy2Nc2lyDicZfmneW9ZY4KbicA1sNgLktVSicgkw/132","nickname":"è€ä½™","note":"","ucode":"17AC6C60D0EB86","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":14815,"discussion_content":"å½“ç„¶å•¦ã€‚å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡çš„outeræœ€ç»ˆä¸€å®šä¼šæŒ‡å‘å…¨å±€ä¸Šä¸‹æ–‡ï¼Œåœ¨å³å°†é€€å‡ºå…¨å±€ä¸Šä¸‹æ–‡çš„æ—¶å€™å»æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568781796,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133157,"user_name":"ytd","can_delete":false,"product_type":"c1","uid":1038790,"ip_address":"","ucode":"C6AEA2D19E447A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d9/c6/8be8664d.jpg","comment_is_top":false,"comment_ctime":1568423050,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"27338226826","product_id":100033601,"comment_content":"æ‰§è¡Œè¿‡ç¨‹ï¼š<br>  ä»ç¬¬10è¡Œå¼€å§‹ï¼š<br>  1ï¼Œåˆ›å»ºpromiseèµ‹å€¼ï¼Œæ‰“å°1 rand<br>  2ï¼Œæ‰§è¡Œlogè¯­å¥ï¼Œæ‰“å°2<br>  3ï¼Œå¦‚æœrand &gt; 0.5ï¼Œpromiseè¢«resolveï¼Œæ‰“å°successï¼Œå¹¶è¿”å›æ–°çš„promseèµ‹å€¼<br>    ç„¶åé‡å¤ç±»ä¼¼æ­¥éª¤1ã€3ã€4<br>  4ï¼Œå¦åˆ™å¦‚æœrand &lt;= 0.5 promise rejectï¼Œç„¶åp1ã€p2ã€p3ã€p4éƒ½åˆ†åˆ«è¢«èµ‹å€¼ä¸ºä¸€ä¸ªæ–°çš„è¢«rejectçš„promiseï¼Œæœ€ååœ¨p4.catchä¸­rejectçŠ¶æ€è¢«æ•è·ï¼Œæ‰“å°error","like_count":5,"discussions":[{"author":{"id":1499244,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e0/6c/ef405cc1.jpg","nickname":"å…³å±±æ¥‚","note":"","ucode":"C32E201FA33045","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":90327,"discussion_content":"ä»€ä¹ˆç®—æ˜¯ä¸€ä¸ªä»»åŠ¡ï¼Ÿconsole.log(2)ä¹Ÿç®—æ˜¯å’Œnew promiseä¸­çš„å‚æ•°æ‰§è¡Œéƒ½æ˜¯å®ä»»åŠ¡å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576768695,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":237487,"user_name":"Jankin","can_delete":false,"product_type":"c1","uid":2067161,"ip_address":"","ucode":"16084255D43B2C","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/o4jsp3yKTVthd1XfEA0ib1mXYFDULB2uUskUbLrtLbxy0AJFtuJqHAKjDSuDwiciazSAfE6fy2OfffLU8ayXmrWkg/132","comment_is_top":false,"comment_ctime":1595843848,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23070680328","product_id":100033601,"comment_content":"ã€‚ã€‚ã€‚è€å¸ˆï¼Œè®°å½•å­¦ä¹ çš„è¯ï¼Œå†™åšå®¢å¯ä»¥å¼•ç”¨æ‚¨çš„è¯ä¹‹ç±»çš„å—ã€‚ã€‚ä¼šæ³¨æ˜ä½œè€…å’Œé“¾æ¥çš„","like_count":5},{"had_liked":false,"id":222742,"user_name":"Matt","can_delete":false,"product_type":"c1","uid":2013524,"ip_address":"","ucode":"B144E65D1BD286","user_header":"https://static001.geekbang.org/account/avatar/00/1e/b9/54/5c6fe2b0.jpg","comment_is_top":false,"comment_ctime":1590903400,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18770772584","product_id":100033601,"comment_content":"æˆ‘æ˜¯è¿™æ ·ç†è§£çš„ï¼ŒsetTimeoutä»£ç è¢«æ‰§è¡Œåï¼Œå»¶è¿Ÿé˜Ÿåˆ—ä¸­ä¼šæ·»åŠ ä¸€ä¸ªå»¶è¿Ÿä»»åŠ¡ã€‚å½“ä¸€ä¸ªå®ä»»åŠ¡è¢«æ‰§è¡Œå®Œåï¼Œæ¸²æŸ“ä¸»çº¿ç¨‹ä¼šå»æ£€æŸ¥å»¶è¿Ÿé˜Ÿåˆ—ä¸­æ˜¯å¦æœ‰åˆ°è¾¾è§¦å‘æ—¶é—´çš„å»¶è¿Ÿä»»åŠ¡ï¼Œå¦‚æœæœ‰ï¼Œåˆ™å°†å…¶ä»å»¶è¿Ÿä»»åŠ¡é˜Ÿåˆ—ä¸­æ¸…é™¤ï¼Œå¹¶åœ¨å®ä»»åŠ¡é˜Ÿåˆ—ä¸­æ·»åŠ ä¸€ä¸ªå¾…æ‰§è¡Œçš„ä»»åŠ¡ï¼ˆsetTimeoutçš„å›è°ƒå‡½æ•°ï¼‰ã€‚æ‰€ä»¥ä¸¤ä¸ªsetTimoutä»»åŠ¡ä¸­é—´æ‰æœ‰å¯èƒ½æ’å…¥å…¶ä»–çš„ç³»ç»Ÿä»»åŠ¡ã€‚","like_count":4,"discussions":[{"author":{"id":2129924,"avatar":"","nickname":"Geek_88f3f7","note":"","ucode":"957899A12C0DD5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303305,"discussion_content":"setTimeoutä¸æ˜¯åœ¨å®ä»»åŠ¡é˜Ÿåˆ—ä¸­æ·»åŠ å›è°ƒï¼Œæ˜¯åœ¨è°ƒç”¨æ ˆé‡Œæ·»åŠ å›è°ƒå‡½æ•°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599209843,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205121,"user_name":"HoSalt","can_delete":false,"product_type":"c1","uid":1156074,"ip_address":"","ucode":"610B03E2A002D1","user_header":"https://static001.geekbang.org/account/avatar/00/11/a3/ea/53333dd5.jpg","comment_is_top":false,"comment_ctime":1586533796,"is_pvip":false,"replies":[{"id":"76677","content":"ä¸ä¼šï¼Œå› ä¸ºæ²¡æœ‰å‡ºå‘jsï¼Œè¿™ä¸ªå¾®ä»»åŠ¡æ˜¯v8è§¦å‘çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æå…µ","uid":"1141464","ctime":1586569680,"ip_address":"","comment_id":205121,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14471435684","product_id":100033601,"comment_content":"è€å¸ˆï¼Œé€šè¿‡æ§åˆ¶é¢æ¿ä¸­ä¿®æ”¹çš„æ ·å¼æ˜¯ä¸æ˜¯ä¸ä¼šè§¦å‘MutationObserverï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"æå…µ","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491395,"discussion_content":"ä¸ä¼šï¼Œå› ä¸ºæ²¡æœ‰å‡ºå‘jsï¼Œè¿™ä¸ªå¾®ä»»åŠ¡æ˜¯v8è§¦å‘çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586569680,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164366,"user_name":"coder","can_delete":false,"product_type":"c1","uid":1059952,"ip_address":"","ucode":"F70511D614B9F4","user_header":"https://static001.geekbang.org/account/avatar/00/10/2c/70/02b627a6.jpg","comment_is_top":false,"comment_ctime":1576946423,"is_pvip":false,"replies":[{"id":"62447","content":"setTimeoutå› ä¸ºæ˜¯å®šæ—¶ä»»åŠ¡ï¼Œè®¾å®šçš„æ—¶é—´é—´éš”æ²¡æœ‰åˆ°æ˜¯ä¸ä¼šæ‰§è¡Œï¼Œç”±æ­¤éœ€è¦ä¸€ä¸ªå•ç‹¬çš„æ¨¡å—æ¥ä¿å­˜å®šæ—¶å™¨çš„æ¶ˆæ¯ï¼Œä½ å¯ä»¥é€šè¿‡è¯¥æ¨¡å—å–å‡ºåˆ°æœŸçš„ä»»åŠ¡ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªæ¨¡å—å«å»¶æ—¶é˜Ÿåˆ—ï¼ŒChromeå†…éƒ¨ç”¨äº†ä¸ªhashmapä¿å­˜æ•°æ®ï¼Œç„¶ååˆå†™äº†å–å‡ºåˆ°æœŸçš„ä»»åŠ¡çš„ç­–ç•¥ï¼<br><br>é€šå¸¸æƒ…å†µä¸‹ï¼Œæ˜¯å½“æ¸²æŸ“ä¸»çº¿ç¨‹åœ¨æ‰§è¡Œå®Œä¸€ä¸ªæ­£å¸¸çš„ä»»åŠ¡ä¹‹åï¼Œå†åˆ¤æ–­è¯¥æ¨¡å—ä¸­æ˜¯å¦æœ‰åˆ°æœŸçš„ä»»åŠ¡ï¼Œå¦‚æœæœ‰å–å‡ºæ¥æ‰§è¡Œï¼","user_name":"ä½œè€…å›å¤","user_name_real":"æå…µ","uid":"1141464","ctime":1576977184,"ip_address":"","comment_id":164366,"utype":1}],"discussion_count":3,"race_medal":0,"score":"14461848311","product_id":100033601,"comment_content":"å¯¹äºæ–‡ä¸­ä¸€å¤„æœ‰ç–‘è™‘ï¼š<br><br>â€œç¬¬ä¸€ç§æ˜¯æŠŠå¼‚æ­¥å›è°ƒå‡½æ•°å°è£…æˆä¸€ä¸ªå®ä»»åŠ¡ï¼Œæ·»åŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—å°¾éƒ¨ï¼Œå½“å¾ªç¯ç³»ç»Ÿæ‰§è¡Œåˆ°è¯¥ä»»åŠ¡çš„æ—¶å€™æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚è¿™ç§æ¯”è¾ƒå¥½ç†è§£ï¼Œæˆ‘ä»¬å‰é¢ä»‹ç»çš„ setTimeout å’Œ XMLHttpRequest çš„å›è°ƒå‡½æ•°éƒ½æ˜¯é€šè¿‡è¿™ç§æ–¹å¼æ¥å®ç°çš„ã€‚â€<br><br>ç¬¬16è®²æåˆ°äº†ï¼ŒsetTimeouté‡Œçš„å»¶è¿Ÿä»»åŠ¡ï¼Œæ˜¯å­˜åœ¨ä¸€ä¸ªå»¶è¿Ÿé˜Ÿåˆ—ä¸­çš„ã€‚æˆ‘çœ‹ç²¾é€‰ç•™è¨€éƒ¨åˆ†è€å¸ˆçš„å›ç­”ï¼Œæåˆ°è¿™ä¸ªå»¶è¿Ÿé˜Ÿåˆ—å®é™…ä¸Šæ˜¯ä¸€ä¸ªhashmapï¼Œé‚£ä¹ˆsetTimeoutçš„å®ç°è¿˜æ˜¯åŠ åˆ°é˜Ÿå°¾ï¼Œç­‰åˆ°å‰é¢çš„éƒ½å‡ºé˜Ÿï¼Œæ‰æ‰§è¡Œåˆ°è¿™ä¸ªä»»åŠ¡çš„å—ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"æå…µ","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478735,"discussion_content":"setTimeoutå› ä¸ºæ˜¯å®šæ—¶ä»»åŠ¡ï¼Œè®¾å®šçš„æ—¶é—´é—´éš”æ²¡æœ‰åˆ°æ˜¯ä¸ä¼šæ‰§è¡Œï¼Œç”±æ­¤éœ€è¦ä¸€ä¸ªå•ç‹¬çš„æ¨¡å—æ¥ä¿å­˜å®šæ—¶å™¨çš„æ¶ˆæ¯ï¼Œä½ å¯ä»¥é€šè¿‡è¯¥æ¨¡å—å–å‡ºåˆ°æœŸçš„ä»»åŠ¡ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªæ¨¡å—å«å»¶æ—¶é˜Ÿåˆ—ï¼ŒChromeå†…éƒ¨ç”¨äº†ä¸ªhashmapä¿å­˜æ•°æ®ï¼Œç„¶ååˆå†™äº†å–å‡ºåˆ°æœŸçš„ä»»åŠ¡çš„ç­–ç•¥ï¼\n\né€šå¸¸æƒ…å†µä¸‹ï¼Œæ˜¯å½“æ¸²æŸ“ä¸»çº¿ç¨‹åœ¨æ‰§è¡Œå®Œä¸€ä¸ªæ­£å¸¸çš„ä»»åŠ¡ä¹‹åï¼Œå†åˆ¤æ–­è¯¥æ¨¡å—ä¸­æ˜¯å¦æœ‰åˆ°æœŸçš„ä»»åŠ¡ï¼Œå¦‚æœæœ‰å–å‡ºæ¥æ‰§è¡Œï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576977184,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1373793,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f6/61/96fe5e93.jpg","nickname":"å¤©ç™½","note":"","ucode":"6F432CB06E7EFD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":202777,"discussion_content":"æˆ‘è®¤ä¸ºå»¶æ—¶é˜Ÿåˆ—æ˜¯ä¸€ä¸ªæ–°çš„å®ä»»åŠ¡ï¼Œä¸»çº¿ç¨‹çš„äº‹ä»¶å¾ªç¯æ˜¯æ‰§è¡Œå®Œä¸€ä¸ªå®ä»»åŠ¡ä¹‹åå»æ‰§è¡Œå»¶è¿Ÿé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼ˆå‚åŠ setTimeouté‚£ä¸€ç¯‡æ–‡ç« ä¸­è€å¸ˆçš„å®ç°ï¼‰ï¼Œè€Œå¾®ä»»åŠ¡æ˜¯åœ¨å®ä»»åŠ¡æ‰§è¡Œå®Œä¹‹å‰æ£€æŸ¥æ‰§è¡Œçš„ï¼Œå› æ­¤åˆ¤æ–­å»¶æ—¶é˜Ÿåˆ—ä¸­åˆ°æœŸçš„ä»»åŠ¡æ˜¯åœ¨å¾®ä»»åŠ¡æ‰§è¡Œä¹‹å","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583942388,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1059952,"avatar":"https://static001.geekbang.org/account/avatar/00/10/2c/70/02b627a6.jpg","nickname":"coder","note":"","ucode":"F70511D614B9F4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":94815,"discussion_content":"æ‰€ä»¥åˆ¤æ–­è¿™ä¸ªæ¨¡å—æ˜¯å¦æœ‰åˆ°æœŸçš„ä»»åŠ¡çš„æ—¶æœºï¼Œæ˜¯åœ¨å¾®ä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œä¹‹å‰è¿˜æ˜¯ä¹‹åï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576991675,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141895,"user_name":"locke","can_delete":false,"product_type":"c1","uid":1598828,"ip_address":"","ucode":"DD0554D06C7937","user_header":"https://static001.geekbang.org/account/avatar/00/18/65/6c/5cb98fc3.jpg","comment_is_top":false,"comment_ctime":1571246757,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10161181349","product_id":100033601,"comment_content":"æ–‡ä¸­â€œç¬¬ä¸€ç§æ˜¯æŠŠå¼‚æ­¥å›è°ƒå‡½æ•°å°è£…æˆä¸€ä¸ªå®ä»»åŠ¡ï¼Œæ·»åŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—å°¾éƒ¨â€ï¼ŒsetTimeoutï¼ï¼ä¸æ˜¯æ·»åŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—å°¾éƒ¨å§ï¼Œä¸åº”è¯¥å»¶è¿Ÿé˜Ÿåˆ—å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1059952,"avatar":"https://static001.geekbang.org/account/avatar/00/10/2c/70/02b627a6.jpg","nickname":"coder","note":"","ucode":"F70511D614B9F4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":79198,"discussion_content":"æœ‰åŒæ ·çš„ç–‘é—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576067039,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141373,"user_name":"Andy Jiang","can_delete":false,"product_type":"c1","uid":1227279,"ip_address":"","ucode":"436609A0A445CF","user_header":"https://static001.geekbang.org/account/avatar/00/12/ba/0f/9789c2cc.jpg","comment_is_top":false,"comment_ctime":1571145908,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10161080500","product_id":100033601,"comment_content":"ä¹‹å‰è®²è¿‡ï¼Œåœ¨å¾ªç¯ç³»ç»Ÿçš„ä¸€ä¸ªå¾ªç¯ä¸­ï¼Œå…ˆä»æ¶ˆæ¯é˜Ÿåˆ—å¤´éƒ¨å–å‡ºä¸€ä¸ªä»»åŠ¡æ‰§è¡Œï¼Œè¯¥ä»»åŠ¡æ‰§è¡Œå®Œåï¼Œå†å»å»¶è¿Ÿé˜Ÿåˆ—ä¸­æ‰¾åˆ°æ‰€æœ‰çš„è¿‡æœŸä»»åŠ¡ä¾æ¬¡æ‰§è¡Œå®Œã€‚æ¶ˆæ¯é˜Ÿåˆ—å¤´éƒ¨å–å‡ºçš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œä¼šå…ˆæ£€æŸ¥å¾®ä»»åŠ¡é˜Ÿåˆ—ä¹ˆï¼Ÿæ£€æŸ¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œç„¶åå†å»å»¶è¿Ÿé˜Ÿåˆ—ä¸­æ‰¾è¿‡æœŸä»»åŠ¡æ‰§è¡Œï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1782777,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/33/f9/50b76abe.jpg","nickname":"AMIR","note":"","ucode":"65142D9669071B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":98763,"discussion_content":"æˆ‘ä¹Ÿæœ‰ç–‘é—®ï¼Œä¸¤ä¸ªSetTimeOutä¹‹é—´æ€ä¹ˆé‚£ä¹ˆå¤šæ¶ˆæ¯ä»»åŠ¡ï¼Œé™¤éé‚£äº›ä»»åŠ¡éƒ½åœ¨4msä¸­æ‰§è¡Œå®Œäº†ï¼Œè¦ä¸ç„¶åº”è¯¥æ‰§è¡Œå®Œä¸€ä¸ªä»»åŠ¡ï¼Œå°±ä»å»¶è¿Ÿé˜Ÿåˆ—ä¸­å–å‡ºè¿™ä¸ªä»»åŠ¡ï¼Œè¿›è¡Œæ‰§è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577185650,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225166,"user_name":"james","can_delete":false,"product_type":"c1","uid":1232771,"ip_address":"","ucode":"AC42035106E5B9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/yyibGRYCArsUNBfCAEAibua09Yb9D5AdO8TkCmXymhAepibqmlz0hzg06ggBLxyvXicnjqFVGr7zYF0rQoZ0aXCBAg/132","comment_is_top":false,"comment_ctime":1591671674,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"5886638970","product_id":100033601,"comment_content":"1. æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼ˆè°ƒç”¨æ ˆï¼‰: å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡+å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆexecutorï¼‰<br>2. new Promiseä¸­æ¥æ”¶çš„å‚æ•°æ˜¯ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œå±äºåŒæ­¥ä»»åŠ¡ï¼Œå› æ­¤ä¼šç«‹å³æ‰§è¡Œï¼Œæ‰“å°å‡º1å’Œéšæœºæ•°ï¼Œå¦‚æœéšæœºæ•°&gt;0.5ï¼Œåˆ™è®©è¿™ä¸ªPromiseå˜ä¸ºæˆåŠŸæ€(fulfilled), å¦åˆ™å˜ä¸ºå¤±è´¥æ€(rejected),æ‰§è¡Œå®Œæˆåï¼Œå†ä¾æ¬¡æ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼Œjså¼•æ“æ‰«æåˆ°p1ã€p3ã€p4ä»¥åŠp4.catchå››ä¸ªæ–¹æ³•ï¼Œè¿™äº›éƒ½æ˜¯åŸºäºå‰ä¸€ä¸ªPromiseåšçš„çŠ¶æ€æ¥æ‰§è¡Œçš„ï¼Œä¼šäº§ç”Ÿå¾®ä»»åŠ¡ï¼Œå› æ­¤ä¼šè¢«æ¨å…¥åˆ°å½“å‰å®ä»»åŠ¡çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œæœ€åé¢æ˜¯ä¸€å¥åŒæ­¥ä»£ç ï¼šconsole.log(2)ï¼Œä¼šç«‹å³æ‰§è¡Œæ‰“å°2ï¼Œåˆ°è¿™é‡Œï¼Œå½“å‰å®ä»»åŠ¡çš„æ‰€æœ‰åŒæ­¥ä»£ç å…¨éƒ¨æ‰§è¡Œå®Œï¼ŒJavaScript å¼•æ“å°±ä¼šæ£€æŸ¥å¾®ä»»åŠ¡åˆ—è¡¨ï¼Œå‘ç°å¾®ä»»åŠ¡åˆ—è¡¨ä¸­æœ‰å¾®ä»»åŠ¡(4ä¸ªPromiseå¾®ä»»åŠ¡å¾…æ‰§è¡Œ)ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œä¾æ¬¡æ‰§è¡Œè¿™å››ä¸ªå¾®ä»»åŠ¡ã€‚ç­‰å¾®ä»»åŠ¡é˜Ÿåˆ—æ¸…ç©ºä¹‹åï¼Œå°±é€€å‡ºå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚","like_count":1},{"had_liked":false,"id":218241,"user_name":"ç‹å¦","can_delete":false,"product_type":"c1","uid":1019641,"ip_address":"","ucode":"D4CCE6C7F7F1C5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8e/f9/8221aac3.jpg","comment_is_top":false,"comment_ctime":1589764281,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5884731577","product_id":100033601,"comment_content":"é¦–å…ˆæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œ<br>promiseçš„æ„é€ å‡½æ•°æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œæ‰€ä»¥å…ˆæ‰§è¡Œexecutorã€‚<br>æ‰“å°1ï¼Œ<br>æ‰“å°randï¼Œ<br>ä¹‹åçœ‹ç”Ÿæˆçš„éšæœºæ•°æ˜¯ä¸æ˜¯å¤§äº0.5ã€‚<br>è¿™é‡Œå‡è®¾æ¯ä¸€æ¬¡éƒ½å¤§äº0.5.<br>å› ä¸ºå¤§äº0.5ï¼Œå°†p0çš„thenå›è°ƒåŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚<br>ç„¶ååŒæ­¥æ‰§è¡Œåˆ°console.log(2),<br>æ‰“å°2<br>è¿™æ˜¯å®ä»»åŠ¡æ‰§è¡Œç»“æŸï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—çš„å†…å®¹ã€‚<br>æ‰“å°â€œsucceed-1â€<br>ç„¶ååŒæ­¥æ‰§è¡Œexecutorã€‚<br>æ‰“å°1<br>æ‰“å°rand<br>ç„¶åå› ä¸ºå¤§äº0.5ï¼Œå°†p1çš„thenå›è°ƒåŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚<br>è¿™æ˜¯ä¸€ä¸ªå¾®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œæ¥ä¸‹æ¥æ‰§è¡ŒåˆšåˆšåŠ å…¥çš„å¾®ä»»åŠ¡ã€‚<br>æ‰“å°&quot;succeed-2&quot;<br>ç„¶ååŒæ­¥æ‰§è¡Œexecutor<br>æ‰“å°1<br>æ‰“å°rand<br>ã€‚ã€‚ã€‚<br>å¦‚æœè¿‡ç¨‹ä¸­æŸä¸€æ­¥äº§ç”Ÿçš„éšæœºæ•°å°äº0.5ï¼Œåˆ™å°†errorå›è°ƒåŠ å…¥å¾®ä»»åŠ¡ï¼Œæ‰“å°errorã€‚ä¸­æ­¢ã€‚<br>","like_count":1},{"had_liked":false,"id":162835,"user_name":"å¤äº†å¤å¤©","can_delete":false,"product_type":"c1","uid":1235375,"ip_address":"","ucode":"F63F1CA10BF8CE","user_header":"https://static001.geekbang.org/account/avatar/00/12/d9/af/747c4d8b.jpg","comment_is_top":false,"comment_ctime":1576599939,"is_pvip":false,"replies":[{"id":"61886","content":"jsåªä¸æ˜¯ä»»åŠ¡çš„ä¸€ä¸ªè¿‡ç¨‹ï¼Œè¿™é‡Œè®²çš„éƒ½æ˜¯C++å±‚é¢çš„ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥è¯´æ˜¯ç³»ç»Ÿè°ƒç”¨æ ˆã€‚ <br><br>å…·ä½“çš„ä½ å¯ä»¥çœ‹çœ‹åŠ é¤5","user_name":"ä½œè€…å›å¤","user_name_real":"æå…µ","uid":"1141464","ctime":1576626074,"ip_address":"","comment_id":162835,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5871567235","product_id":100033601,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸ªç–‘æƒ‘ï¼Œä¸»çº¿ç¨‹è¯»å–æ¶ˆæ¯é˜Ÿåˆ—é‡Œçš„ä»»åŠ¡çš„æ—¶æœºæ˜¯ã€Œç³»ç»Ÿè°ƒç”¨æ ˆã€çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•æ—¶è¿˜æ˜¯ã€ŒJSçš„è°ƒç”¨æ ˆã€æ‰§è¡Œå®Œæ¯•æ—¶ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"æå…µ","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478159,"discussion_content":"jsåªä¸æ˜¯ä»»åŠ¡çš„ä¸€ä¸ªè¿‡ç¨‹ï¼Œè¿™é‡Œè®²çš„éƒ½æ˜¯C++å±‚é¢çš„ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥è¯´æ˜¯ç³»ç»Ÿè°ƒç”¨æ ˆã€‚ \n\nå…·ä½“çš„ä½ å¯ä»¥çœ‹çœ‹åŠ é¤5","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576626074,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141692,"user_name":"splm","can_delete":false,"product_type":"c1","uid":1338601,"ip_address":"","ucode":"2216332252CEA7","user_header":"https://static001.geekbang.org/account/avatar/00/14/6c/e9/072b33b9.jpg","comment_is_top":false,"comment_ctime":1571211592,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5866178888","product_id":100033601,"comment_content":"å»¶è¿Ÿä»»åŠ¡é˜Ÿåˆ—æ˜¯çœŸå®å­˜åœ¨çš„è¿˜æ˜¯åªæ˜¯ä¸€ä¸ªå®šä¹‰ï¼Œå®é™…ä¸Šå°±æ˜¯è¿½åŠ æ™®é€šå®ä»»åŠ¡é˜Ÿåˆ—åé¢æˆ–è€…è¢«æ·»åŠ åˆ°å¾®ä»»åŠ¡ä¸­çš„ä»»åŠ¡é›†ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1305087,"avatar":"","nickname":"randy","note":"","ucode":"4D9E37745E6111","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":89116,"discussion_content":"ä¹‹å‰çš„æ–‡ç« æœ‰è´´ chrome çš„æºç ï¼Œå¯ä»¥çœ‹çœ‹ï¼Œé‡Œé¢çœŸçš„å®šä¹‰äº†ä¸€ä¸ªå»¶è¿Ÿé˜Ÿåˆ—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576750984,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140887,"user_name":"ä»»æŒ¯é¹","can_delete":false,"product_type":"c1","uid":1385329,"ip_address":"","ucode":"D33DC7856947D6","user_header":"https://static001.geekbang.org/account/avatar/00/15/23/71/57c16ecb.jpg","comment_is_top":false,"comment_ctime":1571067256,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5866034552","product_id":100033601,"comment_content":"è°ƒç”¨æ ˆï¼šå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ -&gt; executorå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡<br>å…ˆæ‰§è¡Œå®ä»»åŠ¡é˜Ÿåˆ—ï¼š <br>  å…ˆæ‰“å°1ï¼Œ randï¼Œè¿”å›ä¸€ä¸ªpromissï¼Œexecutorå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡å‡ºæ ˆï¼Œæ‰§è¡Œå…¨å±€ä¸Šä¸‹æ–‡çš„å¾®ä»»åŠ¡é˜Ÿåˆ—åŠ å…¥pomissåœ¨æ‰“å°2<br>ç„¶åæ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼šé‡åˆ°reject æ‰“å°error ç»“æŸï¼Œ å¦åˆ™ï¼šæ‰“å°succeed-1ï¼Œç„¶åexecutorå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡è¿›æ ˆï¼Œç»§ç»­ä¸Šé¢æ­¥éª¤ã€‚ç›´è‡³rejectç»“æŸ<br>ä¸çŸ¥é“ä¸Šé¢çš„åˆ†æå¯¹ä¸å¯¹ï¼Œ å¸Œæœ›è€å¸ˆè§£ç­”ä¸‹ã€‚","like_count":1},{"had_liked":false,"id":136253,"user_name":"è“é…é¸¡","can_delete":false,"product_type":"c1","uid":1348738,"ip_address":"","ucode":"C79A7CA8885B7C","user_header":"https://static001.geekbang.org/account/avatar/00/14/94/82/d0a417ba.jpg","comment_is_top":false,"comment_ctime":1569397101,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5864364397","product_id":100033601,"comment_content":"è¿Ÿåˆ°äº¤ä½œä¸šï¼š<br>æ€è€ƒé¢˜çš„ç»“æœå¤§è‡´å¦‚ä¸‹<br><br>1<br>rand<br>2<br>â€”â€”â€”â€”â€”â€”-åˆ†å‰²çº¿â€”â€”â€”â€”â€”â€”â€”â€”-<br>ä»è¿™é‡Œå¼€å§‹ä¸»å‡½æ•°ç»“æŸï¼Œ å¾®ä»»åŠ¡é˜Ÿåˆ—é‡Œæœ‰ä¸€ä¸ªrejectæˆ–è€…resolve<br>å¦‚æœæ˜¯rejectï¼š<br>è¾“å‡º errorï¼Œç”±äºå¾®ä»»åŠ¡é˜Ÿåˆ—å·²ç©ºï¼Œ é€€å‡ºå½“å‰å®ä»»åŠ¡<br>å¦‚æœæ˜¯resolveï¼š<br>æ‰§è¡Œthené‡Œçš„å›æ‰å‡½æ•°<br>è¾“å‡º succeed-1<br>å¹¶å†ä¸€æ¬¡åˆ›å»ºä¸€ä¸ªpromiseï¼Œ å½“æ‰§è¡Œexecutorçš„æ—¶å€™ä¼šå†ä¸€æ¬¡å¾€å¾®ä»»åŠ¡é˜Ÿåˆ—é‡Œæ·»åŠ ä»»åŠ¡. <br><br>å¾ªç¯â™»ï¸<br>","like_count":1},{"had_liked":false,"id":134511,"user_name":"å°æ™º","can_delete":false,"product_type":"c1","uid":1046777,"ip_address":"","ucode":"C7940D9880CD06","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo3yW0arVaSoQiccftUPYo0LZqRHicMEbqjoBVkEVNw405S7OL5dlFDqVibdyudpPaVQkbxwcywJ1bNg/132","comment_is_top":false,"comment_ctime":1568856972,"is_pvip":false,"replies":[{"id":"51555","content":"å—¯ã€‚åé¢æœ‰ç–‘é—®æ­£å¸¸ï¼Œç†è®ºåå¤šï¼Œè€Œä¸”ç¯‡å¹…ä¹‹é—´çš„ä¾èµ–æ€§æ¯”è¾ƒå¼ºã€‚å¯ä»¥æŠŠä½ çš„é—®é¢˜åˆ—å‡ºæ¥ï¼Œç­”ç–‘çš„æ—¶å€™æˆ‘ä¼šç»“åˆå®é™…åˆ—å­æ¥åˆ†æã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æå…µ","uid":"1141464","ctime":1568857599,"ip_address":"","comment_id":134511,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5863824268","product_id":100033601,"comment_content":"åå¤è¯»äº†å‡ æ¬¡ï¼Œè¿˜æ˜¯æœ‰å¾ˆå¤šç–‘é—®ï¼Œä¸åŒäºæœ€åˆçš„å‡ ç¯‡æ–‡ç« ï¼Œè¿™é‡Œçš„ç†è®ºåå¤šï¼Œå¸Œæœ›èƒ½æœ‰æ›´å¤šçš„æ¡ˆä¾‹ç»“åˆç†è®ºåˆ†æï¼Œæ‰èƒ½è¿›ä¸€æ­¥éªŒè¯å¿ƒä¸­ç†è§£çš„","like_count":1,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"æå…µ","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467780,"discussion_content":"å—¯ã€‚åé¢æœ‰ç–‘é—®æ­£å¸¸ï¼Œç†è®ºåå¤šï¼Œè€Œä¸”ç¯‡å¹…ä¹‹é—´çš„ä¾èµ–æ€§æ¯”è¾ƒå¼ºã€‚å¯ä»¥æŠŠä½ çš„é—®é¢˜åˆ—å‡ºæ¥ï¼Œç­”ç–‘çš„æ—¶å€™æˆ‘ä¼šç»“åˆå®é™…åˆ—å­æ¥åˆ†æã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568857599,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1046777,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo3yW0arVaSoQiccftUPYo0LZqRHicMEbqjoBVkEVNw405S7OL5dlFDqVibdyudpPaVQkbxwcywJ1bNg/132","nickname":"å°æ™º","note":"","ucode":"C7940D9880CD06","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":17059,"discussion_content":"æ„Ÿè°¢è€å¸ˆç™¾å¿™ä¹‹ä¸­è§£ç­”\nåŸæ–‡æåˆ°ï¼ŒV8å†…éƒ¨åˆ›å»ºäº†ä¸€ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ¯ä¸ªå®ä»»åŠ¡å…³è”äº†ä¸€ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚\n\n//æœ‰å¦‚ä¸‹ä»£ç \nconst foo = () => (new Promise((resolve, reject) => {\n    console.log(&#39;first promise constructor&#39;)\n\n    let promise1 = new Promise((resolve, reject) => {\n        console.log(&#39;second promise constructor&#39;)\n\n        setTimeout(() => {\n            console.log(&#39;setTimeout here&#39;)\n            resolve()\n        }, 0)\n\n        resolve(&#39;promise1&#39;)\n    })\n\n    resolve(&#39;promise0&#39;)\n\n    promise1.then(arg => {\n        console.log(arg)\n    })\n}))\n\nfoo().then(arg => {\n    console.log(arg)\n})\n\næˆ‘çš„ç†è§£æ˜¯è¿™æ ·ï¼Œå…ˆæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œå¯ä»¥å¾—å‡ºå…ˆè¾“å‡º â€˜first promise constructorâ€™ å’Œ â€˜second promise constructorâ€™ ã€‚ç„¶åï¼ŒsetTimeoutå›è°ƒå‡½æ•°è¿›å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œpromise1.then å’Œ foo.then å†…å®¹ï¼Œåˆ†åˆ«å…ˆåè¿›å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚æ‰€ä»¥å¾—å‡º promise1 promise0 å…ˆåè¾“å‡ºï¼Œæœ€åå†è¾“å‡º setTimeout hereã€‚åˆ¤æ–­ä¾æ®æ˜¯ å¾®ä»»åŠ¡ä¼˜å…ˆäºå®ä»»åŠ¡ã€‚\nQ1:å¦‚æœç”¨è¿™éƒ¨åˆ†çš„çŸ¥è¯†è¯¦ç»†åˆ†æè¿™æ®µä»£ç ï¼Œè¿™é‡Œé¢çš„å¾®ä»»åŠ¡å’Œå®ä»»åŠ¡ï¼Œåº”è¯¥æ˜¯è°å…³è”è°ï¼Ÿå®ä»»åŠ¡å…³è”å¾®ä»»åŠ¡æœ‰ä»€ä¹ˆæ ·çš„å…·ä½“æ¡ˆä¾‹ï¼Ÿ\nQ2:åŸæ–‡æåˆ°å½“å‰å®ä»»åŠ¡ä¸­çš„ JavaScript å¿«æ‰§è¡Œå®Œæˆæ—¶ï¼Œä¼šå»æ£€æŸ¥å¾®ä»»åŠ¡åˆ—è¡¨ï¼Œâ€˜å¿«æ‰§è¡Œå®Œæˆâ€™è¿™ä¸ªè¯æ„Ÿè§‰å¾ˆå›°æƒ‘ï¼Œä¸€æ®µä»£ç å¦‚æœæ‰§è¡Œè¿‡ï¼Œå¯¹åº”çš„ç»“æœå·²ç»ç”Ÿæˆï¼Œä¸ºä»€ä¹ˆæœ‰å¿«å®Œæˆè¿™ç§è¯´æ³•ï¼Ÿ å¦‚æœä¸€ä¸ªå®ä»»åŠ¡åŒ…å«å¾®ä»»åŠ¡ï¼Œæ˜¯å…ˆå¾—åˆ°å¾®ä»»åŠ¡çš„ç»“æœè¿˜æ˜¯å®ä»»åŠ¡çš„ç»“æœï¼Ÿå¦‚æœæ˜¯2ä¸ªå®ä»»åŠ¡ï¼Œå„è‡ªåŒ…å«ä¸€ä¸ªå¾®ä»»åŠ¡ï¼Œåº”è¯¥æ˜¯æ€æ ·çš„æ‰§è¡Œé¡ºåºã€‚æœ‰å®é™…çš„æ¡ˆä¾‹å—ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1568944805,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133691,"user_name":"liu_xm","can_delete":false,"product_type":"c1","uid":1059215,"ip_address":"","ucode":"AD252F31D5C122","user_header":"https://static001.geekbang.org/account/avatar/00/10/29/8f/a07b72bc.jpg","comment_is_top":false,"comment_ctime":1568637861,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5863605157","product_id":100033601,"comment_content":"æ‚¨å¥½ï¼Œæœ‰äº›ç–‘é—®ã€‚<br>1.å¾®ä»»åŠ¡æ˜¯åœ¨v8å¼•æ“ä¸­æ·»åŠ çš„ï¼Œæ˜¯ä¸æ˜¯åœ¨ieå’Œfirefoxä¸­éƒ½ä¸å­˜åœ¨å‘¢ï¼Ÿ<br>2.å†è¯´domå˜åŒ–å¤šæ¬¡åå†å‡ºå‘muation observerã€‚è¿™ä¸ªå¤šæ¬¡æ˜¯å¦‚ä½•å®šä¹‰å’Œè°æ¥æ§åˆ¶çš„å‘€ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1046304,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/20/e2dfa9c2.jpg","nickname":"èŠ±å„¿ä¸å°‘å¹´","note":"","ucode":"E2D685737E4F1B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":13623,"discussion_content":"é—®é¢˜1 ä¸åŒçš„æµè§ˆå™¨å†…ç½®jså¼•æ“ä¸ä¸€æ ·ï¼Œè¿™äº›å¼•æ“æœ‰è‡ªå·±çš„å®ç°ï¼Œä»–ä»¬ä¼šæŒ‰ç…§è§„èŒƒå®ç°jsç‰¹æ€§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568691274,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359071,"user_name":"å¼€å¼€ä¹‹ä¹‹","can_delete":false,"product_type":"c1","uid":1152069,"ip_address":"å¹¿ä¸œ","ucode":"2B7FC13D6F32C4","user_header":"https://static001.geekbang.org/account/avatar/00/11/94/45/7ea3dd47.jpg","comment_is_top":false,"comment_ctime":1665220833,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1665220833","product_id":100033601,"comment_content":"æ€è€ƒé¢˜äº¤ä½œä¸šï¼š<br>é¦–å…ˆï¼Œåˆå§‹åŒ–promiseçš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œexecutorã€‚<br>ç„¶åè¦ææ¸…æ¥šä»€ä¹ˆæ˜¯ä¸»å‡½æ•°ã€‚<br>var p0 = new Promise(executor);<br>console.log(2)<br>è¿™é‡Œæ˜¯ä¸»å‡½æ•°ï¼Œä¼šå…ˆæ‰§è¡Œexecutoré‡Œé¢çš„console.logï¼Œç„¶åæ ¹æ®ç»“æœæŠŠthenæˆ–è€…catchçš„å›è°ƒå‡½æ•°æ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œç„¶åæ‰§è¡Œconsole.log(2)<br>åœ¨ä¸»å‡½æ•°æ‰§è¡Œå®Œåï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚é‚£ä¹ˆï¼Œå‡è®¾var p0 = new Promise(executor);ä¸­executorçš„ç»“æœæ˜¯å¤§äº0.5, é‚£ä¹ˆä¼šæŠŠp0.thenå›è°ƒå‡½æ•°æ”¾å…¥æ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚<br>æ‰§è¡Œp0.thençš„æ—¶å€™ï¼ŒåŒæ ·æ˜¯ new Promise(executor);ï¼šæ‰§è¡Œconsole.log(1), rand(), å‡è®¾è¿™ä¸ªæ—¶å€™ç»“æœå°äº0.5ï¼Œå°±ä¼šæŠŠcatchå›è°ƒå‡½æ•°æ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚<br>æ‰§è¡Œcatchå›è°ƒã€‚ç»“æŸã€‚<br>ä¹Ÿå°±æ˜¯å…ˆæ‰§è¡Œå®Œä¸»å‡½æ•° =&gt; æ‰§è¡Œresolve&#47;rejectå¯¹åº”çš„å›è°ƒ =&gt; å¦‚æœæ˜¯resolve, resolveå¯¹åº”çš„å‡½æ•°ä¼šæ–°å»ºå¾®ä»»åŠ¡æ”¾å…¥é˜Ÿåˆ—ï¼Œæœ‰ç‚¹é€’å½’çš„æ„æ€ï¼Œæ‰§è¡Œå®Œï¼Œæ”¾å…¥é˜Ÿåˆ—ï¼Œç»§ç»­æ‰§è¡Œé˜Ÿåˆ—ä¸­çš„æ–°ä»»åŠ¡ï¼Œ =&gt; å¦‚æœæ˜¯rejectï¼Œé‚£å°±æ‰§è¡Œå®Œcatchå¯¹åº”çš„å›è°ƒå°±ç»“æŸã€‚ <br><br>","like_count":0},{"had_liked":false,"id":358593,"user_name":"wilson","can_delete":false,"product_type":"c1","uid":1286793,"ip_address":"ä¸Šæµ·","ucode":"55CFA9D4AA9A19","user_header":"https://static001.geekbang.org/account/avatar/00/13/a2/89/7098b532.jpg","comment_is_top":false,"comment_ctime":1664447433,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1664447433","product_id":100033601,"comment_content":"å¾®ä»»åŠ¡å°±æ˜¯ä¸€ä¸ªéœ€è¦å¼‚æ­¥æ‰§è¡Œçš„å‡½æ•°ï¼Œæ‰§è¡Œæ—¶æœºæ˜¯åœ¨ä¸»å‡½æ•°æ‰§è¡Œç»“æŸä¹‹åã€å½“å‰å®ä»»åŠ¡ç»“æŸä¹‹å‰ã€‚<br><br>è€å¸ˆï¼Œè¿™å¥è¯é‡Œçš„ä¸»å‡½æ•°æ˜¯ä»€ä¹ˆå‘€ï¼Ÿ","like_count":0},{"had_liked":false,"id":356712,"user_name":"æœ‰ä¸€ç§è¸å®","can_delete":false,"product_type":"c1","uid":2634945,"ip_address":"ä¸Šæµ·","ucode":"CF9A6273741105","user_header":"https://static001.geekbang.org/account/avatar/00/28/34/c1/4e4917f5.jpg","comment_is_top":false,"comment_ctime":1662524159,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1662524159","product_id":100033601,"comment_content":"å¦‚ä½•è§£é‡Š Parse HTMLã€Paint ä¹‹ç±»çš„å®ä»»åŠ¡ï¼Ÿè¿™ä¸ªè¿‡ç¨‹æœ‰æ¶‰åŠåˆ° JS è°ƒç”¨æ ˆå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":352693,"user_name":"Geek_183f9e","can_delete":false,"product_type":"c1","uid":1576826,"ip_address":"","ucode":"70405BB513AA9E","user_header":"https://static001.geekbang.org/account/avatar/00/18/0f/7a/420b41cd.jpg","comment_is_top":false,"comment_ctime":1658885801,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1658885801","product_id":100033601,"comment_content":"æ–‡ä¸­æŒ‡å‡ºï¼šç¬¬äºŒç§æ–¹å¼æ˜¯ä½¿ç”¨ Promiseï¼Œå½“è°ƒç”¨ Promise.resolve() æˆ–è€… Promise.reject() çš„æ—¶å€™ï¼Œä¹Ÿä¼šäº§ç”Ÿå¾®ä»»åŠ¡ã€‚<br><br>å°±æˆ‘ç›®å‰çš„è®¤çŸ¥ï¼ŒPromiseå’Œasync&#47;awaitä¼šäº§ç”Ÿå¾®ä»»åŠ¡ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯ï¼Œ<br>Promiseçš„thenå›è°ƒå‡½æ•°æ”¾å…¥å¾®ä»»åŠ¡æ¶ˆæ¯é˜Ÿåˆ—ï¼Œ<br>async&#47;awaitçš„awaitä¸‹é¢çš„ä»»åŠ¡æ”¾å…¥å¾®ä»»åŠ¡æ¶ˆæ¯é˜Ÿåˆ—ã€‚<br>","like_count":0},{"had_liked":false,"id":347888,"user_name":"Geek_4becf0","can_delete":false,"product_type":"c1","uid":2444747,"ip_address":"","ucode":"6A96BA0C4B3B64","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIWjdabiaIH7VxjUng9qpJssODr4b7icib0EJsuGhib7Nls1eBnUrEDAPfXXlsL5OjjfwXH84RuWyCn5w/132","comment_is_top":false,"comment_ctime":1654559060,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1654559060","product_id":100033601,"comment_content":"è€å¸ˆæ¯ä¸ªå®ä»»åŠ¡éƒ½æœ‰è‡ªå·±çš„å¾®ä»»åŠ¡é˜Ÿåˆ—å—ï¼Ÿæ„Ÿè§‰æ²¡å•¥å¿…è¦å•Šï¼Œå…¨å±€ä¸€ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ—ä¼šä¸ä¼šå¥½ç‚¹ï¼Œåæ­£å¾®ä»»åŠ¡é˜Ÿåˆ—åœ¨æ¯æ¬¡äº‹ä»¶å¾ªç¯ä¸­éƒ½ä¼šå…¨éƒ¨æ‰§è¡Œå®Œã€‚","like_count":0},{"had_liked":false,"id":347675,"user_name":"è«å‘€å˜›è«ä¸‰çˆ·@æ°´æ»´","can_delete":false,"product_type":"c1","uid":2802421,"ip_address":"","ucode":"4A2EB3A1A0D352","user_header":"https://static001.geekbang.org/account/avatar/00/2a/c2/f5/30804e9e.jpg","comment_is_top":false,"comment_ctime":1654301690,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654301690","product_id":100033601,"comment_content":"è€å¸ˆï¼Œæˆ‘è¿™è¾¹æœ‰ä¸ªç–‘æƒ‘çš„<br><br>ä¸Šé¢è¯´åˆ°å¾®ä»»åŠ¡æ˜¯å¾ˆå®ä»»åŠ¡ç»‘å®šçš„ï¼Œä½†æ˜¯å…¶å®ä»å›¾é‡Œæ¥çœ‹æ¯ä¸€ä¸ªå¾®ä»»åŠ¡éƒ½æ˜¯æ”¾åœ¨äº†å…¨å±€ä¸Šä¸‹æ–‡é‚£é‡Œçš„å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚<br>é‚£ä¹ˆå‡å¦‚settimeoutåˆ›å»ºäº†ä¸€ä¸ªå®ä»»åŠ¡ï¼Œé‡Œé¢åŒ…æ‹¬äº†ä¸€ä¸ªå¾®ä»»åŠ¡ï¼ˆæ¯”å¦‚promiseï¼‰ è¿™ä¸ªæ—¶å€™è¯¥å¾®ä»»åŠ¡æ˜¯ä¼šæ·»åŠ è¿›å…¨å±€ä¸Šä¸‹æ–‡çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œè¿˜æ˜¯è¯¥settimeoutçš„å®ä»»åŠ¡çš„ä¸Šä¸‹æ–‡çš„å¾®ä»»åŠ¡é˜Ÿåˆ—","like_count":0},{"had_liked":false,"id":338059,"user_name":"G","can_delete":false,"product_type":"c1","uid":2330265,"ip_address":"","ucode":"F481F323D40711","user_header":"https://static001.geekbang.org/account/avatar/00/23/8e/99/44acecf1.jpg","comment_is_top":false,"comment_ctime":1647261326,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1647261326","product_id":100033601,"comment_content":"è€å¸ˆå¥½ï¼Œçœ‹é”™äº†ï¼Œå¿½ç•¥é‚£ä¸ªé—®é¢˜","like_count":0},{"had_liked":false,"id":338058,"user_name":"G","can_delete":false,"product_type":"c1","uid":2330265,"ip_address":"","ucode":"F481F323D40711","user_header":"https://static001.geekbang.org/account/avatar/00/23/8e/99/44acecf1.jpg","comment_is_top":false,"comment_ctime":1647261063,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1647261063","product_id":100033601,"comment_content":"è€å¸ˆå¥½ï¼Œ å¾®ä»»åŠ¡ç¤ºæ„å›¾ä¸­ï¼Œä¸ºä»€ä¹ˆmutationå…ˆåŠ å…¥é˜Ÿåˆ—ï¼ŒpromiseååŠ å…¥ã€‚æ‰§è¡Œå¾®ä»»åŠ¡çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆæ˜¯promiseå…ˆæ‰§è¡Œï¼Ÿ","like_count":0},{"had_liked":false,"id":337812,"user_name":"å…­è€³","can_delete":false,"product_type":"c1","uid":2021265,"ip_address":"","ucode":"547AD58D9F5FF7","user_header":"https://static001.geekbang.org/account/avatar/00/1e/d7/91/aa45c7a3.jpg","comment_is_top":false,"comment_ctime":1647075040,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1647075040","product_id":100033601,"comment_content":"è€å¸ˆå¥½ï¼Œæœ‰ä¸€ä¸ªç–‘é—®ã€‚muationObserveræ˜¯å¼‚æ­¥+å¾®ä»»åŠ¡ã€‚æ‚¨è¯´ä½¿ç”¨å¾®ä»»åŠ¡ç¡®ä¿å®æ—¶æ€§ï¼Œè¿™å’Œå¼‚æ­¥ä¸æ˜¯çŸ›ç›¾äº†ä¹ˆã€‚å¼‚æ­¥å¤©ç„¶ä¸èƒ½ä¿è¯å®æ—¶æ€§å‘€","like_count":0},{"had_liked":false,"id":334805,"user_name":"æˆ¡ç‰","can_delete":false,"product_type":"c1","uid":1162123,"ip_address":"","ucode":"398F0C0367E795","user_header":"https://static001.geekbang.org/account/avatar/00/11/bb/8b/028bbe52.jpg","comment_is_top":false,"comment_ctime":1645143960,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645143960","product_id":100033601,"comment_content":"è€å¸ˆè¯´çš„ï¼š&#39;javascriptè„šæœ¬æ‰§è¡Œäº‹ä»¶&#39;æ˜¯ä¸æ˜¯å°±æ˜¯src=&#39;xx.js&#39;å’Œscriptæ ‡ç­¾ä»£ç ï¼Ÿå…¶å®ä¹‹å‰é¢è¯•ä¹Ÿæœ‰é—®åˆ°ï¼Œå…¨å±€scriptä»£ç æ˜¯ä¸æ˜¯å®ä»»åŠ¡ï¼ˆåŒ…æ‹¬scr=&#39;xx.js&#39;ï¼‰ï¼Œé¢è¯•å®˜è¯´ä»…ä»…æ˜¯åŒæ­¥ä»£ç ï¼Œå¸Œæœ›è€å¸ˆè§£ç­”ä¸‹","like_count":0},{"had_liked":false,"id":332853,"user_name":"sundy","can_delete":false,"product_type":"c1","uid":1724856,"ip_address":"","ucode":"581D4B976524B6","user_header":"https://static001.geekbang.org/account/avatar/00/1a/51/b8/f76b15a1.jpg","comment_is_top":false,"comment_ctime":1643732797,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1643732797","product_id":100033601,"comment_content":"JavaScript è„šæœ¬æ‰§è¡Œäº‹ä»¶ï¼›è¯·é—®æŒ‡çš„æ˜¯ä»€ä¹ˆ","like_count":0},{"had_liked":false,"id":316258,"user_name":"Geek_d5c147","can_delete":false,"product_type":"c1","uid":2624745,"ip_address":"","ucode":"5AA1C667338408","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/QXSmwc4hDriaarz6libeAyg5juCEsWoKnyCxhIlXUw6iaEafljlkqksChHzyejJqeFBhVBIFHWrTksj6Hic47ncNrA/132","comment_is_top":false,"comment_ctime":1634226574,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634226574","product_id":100033601,"comment_content":"æƒ³é—®ä¸€ä¸‹ä½œè€…ï¼Œå¦‚æœ  Parse HTML æ˜¯å®ä»»åŠ¡ï¼Œé‚£ä¹ˆ performance é¢æ¿ä¸­çš„ç°è‰²çš„ Task ä»£è¡¨ä»€ä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":307015,"user_name":"å…‰å½±","can_delete":false,"product_type":"c1","uid":2539250,"ip_address":"","ucode":"CE6EF591D3A7B5","user_header":"https://static001.geekbang.org/account/avatar/00/26/be/f2/60711467.jpg","comment_is_top":false,"comment_ctime":1628826222,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1628826222","product_id":100033601,"comment_content":"æ„Ÿè§‰å’Œæˆ‘ç†è§£çš„å¾®ä»»åŠ¡å®ä»»åŠ¡æœ‰å¾ˆå¤šä¸åŒï¼Œä¸ºä»€ä¹ˆå¾®ä»»åŠ¡é˜Ÿåˆ—æ˜¯åœ¨å®ä»»åŠ¡å¿«ç»“æŸï¼Œjså¼•æ“é€€å‡ºå…¨å±€ä¸Šä¸‹æ–‡æ‰æ‰§è¡Œï¼Ÿé‚£è¿™æ ·ï¼ŒsetTimeoutç®—æ˜¯å®ä»»åŠ¡å˜›ï¼Ÿé‚£è¿™ä¹ˆè¯´å²‚ä¸æ˜¯å¤ªç¬¼ç»Ÿäº†","like_count":0,"discussions":[{"author":{"id":2752142,"avatar":"https://static001.geekbang.org/account/avatar/00/29/fe/8e/895f05a2.jpg","nickname":"A LETTER","note":"","ucode":"56C82015945CDE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":400974,"discussion_content":"setTimeoutç®—å®ä»»åŠ¡ï¼Œåªä¸è¿‡å…¶å›è°ƒå‡½æ•°ä¸ä¼šæ·»åŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œè€Œæ˜¯æ·»åŠ åˆ°å»¶æ—¶é˜Ÿåˆ—ä¸­çš„ï¼Œæ•´ä¸ªjså—ä»£ç çš„æ‰§è¡Œç®—ä¸€ä¸ªå®ä»»åŠ¡ï¼Œä¸€ä¸ªå®ä»»åŠ¡ç»´æŒä¸€ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå½“è¿™ä¸ªå®ä»»åŠ¡æ‰§è¡Œå°†è¦ç»“æŸåï¼Œä¼šå°†å¾®ä»»åŠ¡é˜Ÿåˆ—çš„ä»»åŠ¡å…¨éƒ¨æ‰§è¡Œç›´åˆ°æ¸…ç©ºï¼Œç„¶åå†ä»å»¶è¿Ÿé˜Ÿåˆ—ä¸­æ‹¿å–è¿‡æœŸçš„ä»»åŠ¡è¿›è¡Œæ‰§è¡Œï¼Œç”±äºsetTimeoutç®—å®ä»»åŠ¡ï¼Œæ‰€ä»¥è¿™ä¸ªæ‰§è¡Œçš„ä»»åŠ¡ä¹Ÿä¼šç»´æŒä¸€ä¸ªå¾®é˜Ÿåˆ—ï¼Œæ‰€ä»¥è¿™ä¸ªå®ä»»åŠ¡ç»“æŸä¹‹å‰åˆè¦æ¸…ç©ºä¸€æ¬¡è‡ªå·±çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œè¿™ä¹Ÿå°±æ˜¯å¾®ä»»åŠ¡å¯ä»¥æ’é˜Ÿçš„åŸå› ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633507555,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":298025,"user_name":"1830","can_delete":false,"product_type":"c1","uid":1374337,"ip_address":"","ucode":"246FEF7C97F39C","user_header":"https://static001.geekbang.org/account/avatar/00/14/f8/81/bff52f91.jpg","comment_is_top":false,"comment_ctime":1623893126,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1623893126","product_id":100033601,"comment_content":"è€å¸ˆæœ¬æ–‡ä¸­è¯´äº†æ¯ä¸ªå®ä»»åŠ¡éƒ½ä¼šå…³è”ä¸€ä¸ªå¾®ä»»åŠ¡ï¼Œä½†æ˜¯æ‰§è¡Œçš„æ—¶å€™åˆæ˜¯å»åœ¨å…¨å±€çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ä¾æ¬¡æ‰§è¡Œï¼Œè¿™ä¸ªä¸æ˜¯æœ‰ç‚¹çŸ›ç›¾å—ï¼Œå¦‚æœåœ¨å…¨å±€æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæµè§ˆå™¨æ˜¯å¦‚ä½•åŒºåˆ†ä¸åŒå®ä»»åŠ¡å…³è”çš„å¾®ä»»åŠ¡å‘¢","like_count":0},{"had_liked":false,"id":290635,"user_name":"ææ–‡æ¥·","can_delete":false,"product_type":"c1","uid":1925846,"ip_address":"","ucode":"A5BFEE3658AFB5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIlZVyciaHNnK30386OM4MibnOXqYCPUOicyriaic3rcnicw6aAGhvicgVswJWbv926QLJOMZvoCoBcWNAdA/132","comment_is_top":false,"comment_ctime":1619667782,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1619667782","product_id":100033601,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸€ä¸ªç–‘é—®ï¼Œä¸ºä»€ä¹ˆä¸‹é¢è¿™æ®µä»£ç ä¸­çš„4ä¼šåœ¨5ä¹‹åæ‰“å°å‘¢ï¼Œåœ¨æˆ‘ç†è§£ä¸­ï¼Œä»–åº”è¯¥åœ¨5ä¹‹å‰æ‰“å°æ‰å¯¹ï¼Œç™¾æ€ä¸å¾—å…¶è§£ï¼Œè¯·è€å¸ˆè§£é‡Šï¼š<br><br>```js<br>Promise.resolve().then(() =&gt; {<br><br>    console.log(1)<br>    return Promise.resolve(4)<br>}).then(r =&gt; console.log(r))<br><br><br><br>Promise.resolve().then(() =&gt; {<br><br>    console.log(2)<br>    <br>}).then(() =&gt; {<br><br>    console.log(3)<br>}).then(() =&gt; {<br>    console.log(5)<br>}).then(() =&gt; {<br>    console.log(6)<br>})<br>```<br>ç»“æœæ˜¯ 1 2 3 5 46","like_count":0,"discussions":[{"author":{"id":2539250,"avatar":"https://static001.geekbang.org/account/avatar/00/26/be/f2/60711467.jpg","nickname":"å…‰å½±","note":"","ucode":"CE6EF591D3A7B5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388534,"discussion_content":"è¦çœ‹promiseçš„å†…éƒ¨æœºåˆ¶ï¼Œä»–å¦‚æœè¿”å›äº†promiseå®ä¾‹ï¼Œé‚£ä¹ˆå®é™…ä¸Šå†…éƒ¨è¿˜ä¼šå†åŒ…ä¸Šä¸€å±‚å¼‚æ­¥å¤„ç†ï¼Œæ‰€ä»¥ä¼šå†ç¼“ä¸€æ­¥","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1628826107,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":285156,"user_name":"å°ç«¥","can_delete":false,"product_type":"c1","uid":1763395,"ip_address":"","ucode":"300444B520E79D","user_header":"https://static001.geekbang.org/account/avatar/00/1a/e8/43/f9c0faed.jpg","comment_is_top":false,"comment_ctime":1616647265,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616647265","product_id":100033601,"comment_content":"MutationObserver å°†å“åº”å‡½æ•°æ”¹æˆå¼‚æ­¥è°ƒç”¨ï¼Œå¯ä»¥ä¸ç”¨åœ¨æ¯æ¬¡ DOM å˜åŒ–éƒ½è§¦å‘å¼‚æ­¥è°ƒç”¨ï¼Œè€Œæ˜¯ç­‰å¤šæ¬¡ DOM å˜åŒ–åï¼Œä¸€æ¬¡è§¦å‘å¼‚æ­¥è°ƒç”¨ã€‚  è€å¸ˆæˆ‘æ²¡æ˜ç™½ä¸ºä»€ä¹ˆæ¢æˆå¼‚æ­¥è°ƒç”¨å°±è´µå‡å°‘æ¬¡æ•°çš„è°ƒç”¨ï¼Ÿ","like_count":0},{"had_liked":false,"id":284537,"user_name":"å¼ å®—ä¼Ÿ","can_delete":false,"product_type":"c1","uid":1374181,"ip_address":"","ucode":"1447A20C7A8982","user_header":"https://static001.geekbang.org/account/avatar/00/14/f7/e5/ec543f3b.jpg","comment_is_top":false,"comment_ctime":1616325067,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616325067","product_id":100033601,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼å¯¹äºMutationObserverçš„ â€œå¼‚æ­¥+å¾®ä»»åŠ¡â€ç­–ç•¥ï¼š<br>æˆ‘ç†è§£è¿™é‡Œçš„å¼‚æ­¥åº”è¯¥æ˜¯ å¼‚æ­¥å›è°ƒï¼ŒåƒsetTimeout&#47;XMLHttpRequestæ˜¯å°†å…¶æ·»åŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œä½œä¸ºå®ä»»åŠ¡æ‰§è¡Œï¼Œè€ŒMutationObserveræ˜¯å°†å…¶æ·»åŠ åˆ°å½“å‰å®ä»»åŠ¡çš„å¾®ä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œã€‚<br>æ‰€ä»¥æˆ‘çš„ç–‘é—®æ˜¯ MutationObserver ä¸­ å¼‚æ­¥å›è°ƒ æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿè¿˜æ˜¯è¯´å› ä¸ºå°è£…æˆäº† å¾®ä»»åŠ¡ï¼Œä»è€Œå®ç°äº† å¼‚æ­¥ å‘¢ï¼Ÿ<br>è°¢è°¢ï¼","like_count":0},{"had_liked":false,"id":272445,"user_name":"å“ˆå“ˆ","can_delete":false,"product_type":"c1","uid":1577110,"ip_address":"","ucode":"7228F93AF69195","user_header":"https://static001.geekbang.org/account/avatar/00/18/10/96/110e8cf7.jpg","comment_is_top":false,"comment_ctime":1610091948,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1610091948","product_id":100033601,"comment_content":"æˆ‘çœ‹äº†äº›è®²äº‹ä»¶å¾ªç¯çš„åšå®¢ï¼Œæœ‰çš„è¯´å…ˆæ‰§è¡Œå®ä»»åŠ¡ å†æ‰§è¡Œå¾®ä»»åŠ¡ï¼Œäºæ•™ç¨‹ä¸Šé¢ç›¸åè€å¸ˆå¯ä»¥è§£ç­”ä¸€ä¸‹å—?","like_count":0,"discussions":[{"author":{"id":2524182,"avatar":"https://static001.geekbang.org/account/avatar/00/26/84/16/e4df1c0b.jpg","nickname":"hin","note":"","ucode":"368DBF2A797D88","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392780,"discussion_content":"ä¸ªäººç†è§£ï¼šåŒæ­¥ä»£ç å°±æ˜¯ä¸€ä¸ªå®ä»»åŠ¡ï¼Œæ‰€ä»¥ç»å¯¹æ˜¯å…ˆæ‰§è¡Œå®ä»»åŠ¡ï¼Œå†æ‰§è¡Œå¾®ä»»åŠ¡ã€‚è€Œè€å¸ˆä¸Šé¢è¯´çš„ï¼šâ€œåœ¨ä¸€ä¸ªå®ä»»åŠ¡ä¸­ï¼Œåˆ†åˆ«åˆ›å»ºä¸€ä¸ªç”¨äºå›è°ƒçš„å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ï¼Œæ— è®ºä»€ä¹ˆæƒ…å†µä¸‹ï¼Œå¾®ä»»åŠ¡éƒ½æ—©äºå®ä»»åŠ¡æ‰§è¡Œâ€ã€‚ä½ å¯ä»¥ç‚¹ä¸€ä¸‹è¿™å¥è¯ä¸Šé¢çš„é“¾æ¥ï¼Œå…¶å®æ„æ€æ˜¯åœ¨ä¸€ä¸ªå®ä»»åŠ¡ä¸­ï¼Œå†åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å®ä»»åŠ¡å’Œä¸€ä¸ªæ–°çš„å¾®ä»»åŠ¡ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–°çš„å¾®ä»»åŠ¡å°±ä¼šæ·»åŠ åˆ°å½“å‰å®ä»»åŠ¡çš„å¾®ä»»åŠ¡é˜Ÿåˆ—çš„é˜Ÿå°¾ï¼Œè€Œæ–°çš„å®ä»»åŠ¡æ˜¯æ·»åŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—çš„é˜Ÿå°¾ï¼Œå½“å½“å‰å¾®ä»»åŠ¡é˜Ÿåˆ—æ¸…ç©ºäº†ï¼Œæ‰ä¼šæ‰§è¡Œæ¶ˆæ¯é˜Ÿåˆ—ä¸­ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ï¼Œæ‰€ä»¥è¯´å¾®ä»»åŠ¡æ‰§è¡Œå…ˆäºå®ä»»åŠ¡æ˜¯è¿™ä¸ªæ„æ€","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1631115096,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1813484,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/ab/ec/11cce06a.jpg","nickname":"burning","note":"","ucode":"52454289244FFA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566725,"discussion_content":"å› ä¸ºjavascriptæœ¬èº«æ˜¯ä¸€ä¸ªå®ä»»åŠ¡ï¼Œå†™åœ¨scripté‡Œé¢çš„å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ä¸­æ˜¯å¾®ä»»åŠ¡å…ˆæ‰§è¡Œ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1650735729,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":270473,"user_name":"è¶…çº§è¯»ä¹¦éƒ","can_delete":false,"product_type":"c1","uid":1381602,"ip_address":"","ucode":"746DA51EF5FF21","user_header":"https://static001.geekbang.org/account/avatar/00/15/14/e2/e7e13e39.jpg","comment_is_top":false,"comment_ctime":1609142115,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1609142115","product_id":100033601,"comment_content":"è¯·é—®ï¼Œå¦‚æœåœ¨ä¸€ä¸ªå¾®ä»»åŠ¡é‡Œé¢ï¼Œä¸åœçš„é€’å½’çš„åˆ›å»ºå¾®ä»»åŠ¡ï¼Œé‚£æ˜¯ä¸æ˜¯å°±é€ æˆäº†å½“å‰å®ä»»åŠ¡çš„â€œæ­»å¾ªç¯â€ï¼Ÿé€ æˆé¡µé¢çš„â€œå¡æ­»â€ï¼Ÿ","like_count":0},{"had_liked":false,"id":253274,"user_name":"zgy","can_delete":false,"product_type":"c1","uid":1387798,"ip_address":"","ucode":"05EA6845199250","user_header":"https://static001.geekbang.org/account/avatar/00/15/2d/16/b525a71d.jpg","comment_is_top":false,"comment_ctime":1602669770,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602669770","product_id":100033601,"comment_content":"å…ˆæ‰“å°1ã€randã€2 ï¼Œç„¶åæ ¹æ® rand &gt; 0.5 ä¾æ¬¡æ‰“å°thenæˆ–catch çš„ç»“æœã€‚<br>åœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­ï¼Œp0 é¦–å…ˆè¢«åˆ›å»ºï¼Œåœ¨æ‰§è¡Œ resolve() æˆ–reject() æ—¶åˆ›å»ºä¸€ä¸ªå¾®ä»»åŠ¡ï¼Œç„¶åconsolte.log(2)ï¼Œp1 ã€ p2 ã€p3ã€p4","like_count":0},{"had_liked":false,"id":247862,"user_name":"QG","can_delete":false,"product_type":"c1","uid":1155469,"ip_address":"","ucode":"85DB7C41472C6E","user_header":"https://static001.geekbang.org/account/avatar/00/11/a1/8d/b6117f5c.jpg","comment_is_top":false,"comment_ctime":1599896603,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599896603","product_id":100033601,"comment_content":"â€œå½“ DOM èŠ‚ç‚¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±ä¼šäº§ç”Ÿ DOM å˜åŒ–è®°å½•çš„å¾®ä»»åŠ¡ã€‚â€è¿™å¥è¯æ˜¯ä¸æ˜¯æè¿°æœ‰è¯¯ï¼Œéƒ½å·²ç»å‘ç”Ÿå˜åŒ–äº†ï¼Œè¿˜éœ€è¦å¾®ä»»åŠ¡å—ï¼Ÿä¸æ˜¯åº”è¯¥è®°ä½è¦å‘ç”Ÿçš„å˜åŒ–åˆ°å¾®ä»»åŠ¡ä¸­å…ˆå—","like_count":0},{"had_liked":false,"id":245696,"user_name":"Runtime","can_delete":false,"product_type":"c1","uid":1216637,"ip_address":"","ucode":"8CCC73471BCB96","user_header":"https://static001.geekbang.org/account/avatar/00/12/90/7d/db9804be.jpg","comment_is_top":false,"comment_ctime":1599029056,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1599029056","product_id":100033601,"comment_content":"new Promise((resolve,reject)=&gt;{<br>    console.log(&quot;promise1&quot;)<br>    resolve()<br>}).then(()=&gt;{<br>    console.log(&quot;then11&quot;)<br>    new Promise((resolve,reject)=&gt;{<br>        console.log(&quot;promise2&quot;)<br>        resolve()<br>    }).then(()=&gt;{<br>        console.log(&quot;then21&quot;)<br>    }).then(()=&gt;{<br>        console.log(&quot;then23&quot;)<br>    })<br>}).then(()=&gt;{<br>    console.log(&quot;then12&quot;)<br>})<br>è¾“å‡ºç»“æœä¸º: promise1,then11,promise2,then21,then12,then23<br>ä¸ºä»€ä¹ˆthen12ä¼šåœ¨then23ä¹‹å‰æ‰§è¡Œï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2374581,"avatar":"https://static001.geekbang.org/account/avatar/00/24/3b/b5/c6eea696.jpg","nickname":"TyrionJ","note":"","ucode":"CBB10E57538E6D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557576,"discussion_content":"ä¸Šä¸€ä¸ªthenæ‰§è¡Œå®Œä¸‹ä¸€ä¸ªthenæ‰ä¼šè¢«æ¨å…¥é˜Ÿåˆ—ï¼Œthen23çš„å¾®ä»»åŠ¡åœ¨then21æ‰§è¡Œäº†æ‰ä¼šè¢«æ¨å…¥é˜Ÿåˆ—ï¼Œthen11æ‰§è¡Œå®Œåthen12ä¼šè¢«æ¨å…¥é˜Ÿåˆ—ï¼Œè€Œæ­¤æ—¶then21åœ¨é˜Ÿåˆ—ä¸­çš„å¾®ä»»åŠ¡è¿˜æ²¡æ‰§è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647868368,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2374581,"avatar":"https://static001.geekbang.org/account/avatar/00/24/3b/b5/c6eea696.jpg","nickname":"TyrionJ","note":"","ucode":"CBB10E57538E6D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557575,"discussion_content":"æˆ‘æ¥å›ç­”ä¸‹ï¼Œç”¨consoleçš„å†…å®¹ä»£è¡¨æ¯ä¸ªthen,é¦–å…ˆè¾“å‡ºpromise1\nthen11å…¥microTaskQueue, è¾“å‡ºthen11å’Œpromise2,æ­¤æ—¶microTaskQueue:[then11]\nåœ¨æ‰§è¡Œthen11çš„è¿‡ç¨‹ä¸­ï¼Œthen21å…¥microTaskQueue,æ­¤æ—¶microTaskQueue [then21, then11]\nthen11æ‰§è¡Œå®Œï¼Œthen12å…¥microTaskQueueï¼Œæ­¤æ—¶microTaskQueue: [then12,then21]\næ‰§è¡Œthen21,è¾“å‡ºthen21,then23å…¥microTaskQueue[then23,then12]\næ‰§è¡Œthen12,è¾“å‡ºthen12,microTaskQueue:[then23]\næ‰§è¡Œthen23è¾“å‡ºthen23","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647868015,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244782,"user_name":"æµ©æ˜å•¦","can_delete":false,"product_type":"c1","uid":1377422,"ip_address":"","ucode":"120ED8FC45B992","user_header":"https://static001.geekbang.org/account/avatar/00/15/04/8e/e75ecc5e.jpg","comment_is_top":false,"comment_ctime":1598674957,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1598674957","product_id":100033601,"comment_content":"è€å¸ˆæˆ‘æœ‰ä¸ªç–‘é—® ä½¿ç”¨promise .all å»å¹¶è¡Œæ‰§è¡Œpromise æ•°ç»„ï¼Œ æµè§ˆå™¨å†…éƒ¨æ˜¯å¼€å¯å¤šä¸ªçº¿ç¨‹å»å¹¶è¡Œæ‰§è¡Œpromiseçš„å—ï¼Œç„¶åæ‰§è¡Œå®Œæˆåæ”¾åˆ°å¾®ä»»åŠ¡å¯¹æ¥ï¼Ÿ æˆ‘è¿™æ ·ç†è§£å¯¹å—","like_count":0},{"had_liked":false,"id":243782,"user_name":"â€5102","can_delete":false,"product_type":"c1","uid":2116537,"ip_address":"","ucode":"476092AB890CF2","user_header":"https://static001.geekbang.org/account/avatar/00/20/4b/b9/2449c7b7.jpg","comment_is_top":false,"comment_ctime":1598274158,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598274158","product_id":100033601,"comment_content":"è€å¸ˆæˆ‘æœ‰ç–‘é—®ï¼Œçœ‹äº†ä¸Šå›¾çš„è°ƒç”¨æ ˆä¸­ï¼Œå…¨å±€ä¸Šä¸‹æ–‡åº•ä¸‹è¿˜æœ‰parse htmlçš„ä»»åŠ¡ï¼Œè¿™è¯´æ˜parse htmlä¹Ÿæ˜¯åœ¨v8ä¸­æ‰§è¡Œçš„å—ï¼Ÿè¿˜æ˜¯è¯´è€å¸ˆç”»çš„é‚£å¼ å›¾æ˜¯æ¸²æŸ“è¿›ç¨‹ä¸­ä¸»çº¿ç¨‹çš„è°ƒç”¨æ ˆå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":240070,"user_name":"å¤§æ¡¥2å·","can_delete":false,"product_type":"c1","uid":2095749,"ip_address":"","ucode":"2BB88B211C5C8A","user_header":"https://static001.geekbang.org/account/avatar/00/1f/fa/85/1920fa21.jpg","comment_is_top":false,"comment_ctime":1596734952,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596734952","product_id":100033601,"comment_content":"â€å› ä¸ºåœ¨å½“å‰å®ä»»åŠ¡æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œæœ‰æ—¶å€™ä¼šäº§ç”Ÿå¤šä¸ªå¾®ä»»åŠ¡ï¼Œè¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨è¿™ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ—æ¥ä¿å­˜è¿™äº›å¾®ä»»åŠ¡äº†â€œ   ä¸å¤ªæ‡‚è¿™ä¸€å¥ï¼Œ å®ä»»åŠ¡è¿è¡Œçš„æ—¶å€™äº§ç”Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œè¿™ä¸ªä¸æ˜¯ç»å¯¹ä¼šäº§ç”Ÿçš„å§ï¼Ÿä¾‹å¦‚å®ä»»åŠ¡setTImeout é‡Œé¢æˆ‘åªæ‰“å°ä¸€ä¸ªå˜é‡çš„è¯ä¼šå°†è¿™ä¸ªæ‰“å°ä»å®ä»»åŠ¡é˜Ÿåˆ—å–å‡ºæ‰§è¡Œå®Œå°±æ²¡äº†å§ï¼Œä¸ºä»€ä¹ˆè¿˜ä¼šäº§ç”Ÿå¾®ä»»åŠ¡å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":236438,"user_name":"Geek_33e8a7","can_delete":false,"product_type":"c1","uid":1721655,"ip_address":"","ucode":"0EAE7BC6FD9788","user_header":"","comment_is_top":false,"comment_ctime":1595415636,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595415636","product_id":100033601,"comment_content":"å¦‚æœåœ¨å¾®ä»»åŠ¡é‡Œè°ƒç”¨äº†å®ä»»åŠ¡ï¼Œé‚£ä¹ˆæ‰§è¡Œé¡ºåºä¼šæ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿæ¯”å¦‚åœ¨promiseé‡Œè°ƒç”¨XMLHttpRequest","like_count":0},{"had_liked":false,"id":230587,"user_name":"luwei","can_delete":false,"product_type":"c1","uid":1365541,"ip_address":"","ucode":"0960A09F7B8D59","user_header":"https://static001.geekbang.org/account/avatar/00/14/d6/25/a95a2064.jpg","comment_is_top":false,"comment_ctime":1593423547,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1593423547","product_id":100033601,"comment_content":"å¾ˆä¸æ˜ç™½â€œå¾®ä»»åŠ¡çš„æ‰§è¡Œæ—¶æœºæ˜¯åœ¨ä¸»å‡½æ•°æ‰§è¡Œç»“æŸä¹‹åã€å½“å‰å®ä»»åŠ¡ç»“æŸä¹‹å‰ã€‚â€è¿™å¥è¯ï¼Œä¸ºä»€ä¹ˆæ˜¯â€œå½“å‰å®ä»»åŠ¡ç»“æŸä¹‹å‰â€ï¼Œå¥½å¤šèµ„æ–™éƒ½è¯´æ˜¯å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œä¹‹åï¼Œå†å»æ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚çƒ¦è¯·è€å¸ˆç­”ç–‘ã€‚","like_count":0,"discussions":[{"author":{"id":1039904,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/de/20/03130a39.jpg","nickname":"æ²§æµ·ä¸€å£°ç¬‘","note":"","ucode":"5297F2F4736B63","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291550,"discussion_content":"ä½ æƒ³æƒ³ä¸€ä¸ªå¾ªç¯å‘¨æœŸç»“æŸçš„åˆ¤æ–­ä¾æ®æ˜¯ä»€ä¹ˆ åœ¨å®ä»»åŠ¡å¿«è¦ç»“æŸçš„æ—¶å€™ æ¸…ç©ºæ‰€æœ‰çš„å¾®ä»»åŠ¡  ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594866336,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225903,"user_name":"å‚…æ°","can_delete":false,"product_type":"c1","uid":2025085,"ip_address":"","ucode":"1F72CFE0917B21","user_header":"","comment_is_top":false,"comment_ctime":1591886274,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591886274","product_id":100033601,"comment_content":"å¯¹è¿™æ®µè¯ä¸å¤ªç†è§£ï¼š<br><br>  ã€‚æ¯”å¦‚ä¸€ä¸ªå®ä»»åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œäº§ç”Ÿäº† 100 ä¸ªå¾®ä»»åŠ¡ï¼Œæ‰§è¡Œæ¯ä¸ªå¾®ä»»åŠ¡çš„æ—¶é—´æ˜¯ 10 æ¯«ç§’ï¼Œé‚£ä¹ˆæ‰§è¡Œè¿™ 100 ä¸ªå¾®ä»»åŠ¡çš„æ—¶é—´å°±æ˜¯ 1000 æ¯«ç§’ï¼Œä¹Ÿå¯ä»¥è¯´è¿™ 100 ä¸ªå¾®ä»»åŠ¡è®©å®ä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´å»¶é•¿äº† 1000 æ¯«ç§’ã€‚æ‰€ä»¥ä½ åœ¨å†™ä»£ç çš„æ—¶å€™ä¸€å®šè¦æ³¨æ„æ§åˆ¶å¾®ä»»åŠ¡çš„æ‰§è¡Œæ—¶é•¿ã€‚<br><br><br>å¦‚æœæˆ‘ä¸€ä¸ªjsæ–‡ä»¶æ˜¯è¿™æ ·çš„<br><br>new Promise(resolve =&gt; {<br>    setTimeout(() =&gt; {<br>        resolve(1)<br>    }, 1000)<br>}).then((res) =&gt; {<br>    console.log(res)<br>})<br><br><br>new Promise(resolve =&gt; {<br>    setTimeout(() =&gt; {<br>        resolve(2)<br>    }, 1000)<br>}).then((res) =&gt; {<br>    console.log(res)<br>})<br><br><br>new Promise(resolve =&gt; {<br>    setTimeout(() =&gt; {<br>        resolve(3)<br>    }, 1000)<br>}).then((res) =&gt; {<br>    console.log(res)<br>})<br><br><br>new Promise(resolve =&gt; {<br>    setTimeout(() =&gt; {<br>        resolve(4)<br>    }, 1000)<br>}).then((res) =&gt; {<br>    console.log(res)<br>})<br><br>ä»–ä¼šæ¯éš”ä¸€ç§’å†æ‰“å°ä¸‹ä¸€ä¸ªç»“æœå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":220553,"user_name":"å¼ èŒ","can_delete":false,"product_type":"c1","uid":1377299,"ip_address":"","ucode":"89C08DB3239BE5","user_header":"https://static001.geekbang.org/account/avatar/00/15/04/13/84d35588.jpg","comment_is_top":false,"comment_ctime":1590288410,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590288410","product_id":100033601,"comment_content":"æˆ‘ä»¬æ›´æ–° DOM çš„æ—¶é—´ç‚¹ï¼Œåº”è¯¥å°½å¯èƒ½é è¿‘æ¸²æŸ“çš„æ—¶æœºã€‚å½“æˆ‘ä»¬éœ€è¦åœ¨å¼‚æ­¥ä»»åŠ¡ä¸­å®ç° DOM ä¿®æ”¹æ—¶ï¼ŒæŠŠå®ƒåŒ…è£…æˆ micro ä»»åŠ¡æ˜¯ç›¸å¯¹æ˜æ™ºçš„é€‰æ‹©","like_count":0},{"had_liked":false,"id":209261,"user_name":"Tim","can_delete":false,"product_type":"c1","uid":1742972,"ip_address":"","ucode":"F51593465157E4","user_header":"https://static001.geekbang.org/account/avatar/00/1a/98/7c/07e6e7b7.jpg","comment_is_top":false,"comment_ctime":1587525708,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587525708","product_id":100033601,"comment_content":"çœ‹åˆ°æœ‰äººåœ¨çº ç»“å»¶è¿Ÿé˜Ÿåˆ—å»å“ªé‡Œäº†ï¼Œæˆ‘è§‰å¾—æ²¡æœ‰å¿…è¦ï¼ŒsetTimeoutåˆä¸æ˜¯ç«‹åˆ»æŠŠå›è°ƒå‡½æ•°åŠ å…¥åˆ°æ¶ˆæ¯é˜Ÿåˆ—çš„å°¾éƒ¨ï¼Œè€Œæ˜¯æ ¹æ®è®¾ç½®çš„å»¶æ—¶æ—¶é—´æ¥åŠ å…¥é˜Ÿåˆ—ï¼Œæ‰€ä»¥æ‰§è¡Œé¡ºåºå¹¶ä¸ä¼šä¹±æ‰ã€‚<br>è€å¸ˆè®²çš„å»¶è¿Ÿé˜Ÿåˆ—æˆ‘è®¤ä¸ºæ˜¯Chromeçš„å®ç°æ–¹å¼ç½¢äº†ï¼Œæ²¡å‡†åˆ«çš„æµè§ˆå™¨åˆæ˜¯å¦ä¸€ç§å®ç°æ–¹å¼ã€‚<br>æ€»ç»“ä¸€ä¸‹ï¼Œå°±æ˜¯åˆ«æƒ³å¤ªå¤šï¼Œåˆ«è¾ƒçœŸï¼Œä¿¡è€å¸ˆå°±å¯ä»¥äº†ã€‚","like_count":0},{"had_liked":false,"id":203588,"user_name":"ä¾éŸµ","can_delete":false,"product_type":"c1","uid":1153762,"ip_address":"","ucode":"02F5BED8BE0F6E","user_header":"https://static001.geekbang.org/account/avatar/00/11/9a/e2/271e0caf.jpg","comment_is_top":false,"comment_ctime":1586237428,"is_pvip":false,"discussion_count":1,"race_medal":1,"score":"1586237428","product_id":100033601,"comment_content":"æœ‰ä¸€ä¸ªç–‘é—® xhr æ˜¯å±äºå®ä»»åŠ¡è¿˜æ˜¯å¾®ä»»åŠ¡ï¼Ÿæ–°çš„fetchåˆæ˜¯å¦‚ä½•ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1764805,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/ed/c5/5bac4bd8.jpg","nickname":"LOG","note":"","ucode":"9587CDA4C44557","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":233581,"discussion_content":"xhrçš„å®ç°åŸç†å’ŒsetTimeoutç±»ä¼¼ï¼Œæ˜¯ä¼šè¿›å…¥æ¶ˆæ¯é˜Ÿåˆ—çš„ï¼Œæ‰€ä»¥æ˜¯å®ä»»åŠ¡ã€‚fetchåŸå…ˆæ˜¯åŸºäºPromiseå®ç°çš„ï¼Œè€ŒPromiseæ˜¯å¾®ä»»åŠ¡ï¼›è™½ç„¶æ–°çš„fetchä¸æ˜¯åŸºäºPromiseçš„ï¼Œä½†ä¹Ÿåº”è¯¥æ˜¯å¾®ä»»åŠ¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586932230,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200410,"user_name":"ihhuai","can_delete":false,"product_type":"c1","uid":1379127,"ip_address":"","ucode":"A796AF20437B8A","user_header":"https://static001.geekbang.org/account/avatar/00/15/0b/37/fd8355c4.jpg","comment_is_top":false,"comment_ctime":1585580884,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585580884","product_id":100033601,"comment_content":"2 - 1  - random <br>ã€( random &gt; .5 )  success-1ã€‘  -  1 - random ( random &gt; .5 ) success-2 ....<br>( random &lt; .5 ) error","like_count":0},{"had_liked":false,"id":185024,"user_name":"blueBean","can_delete":false,"product_type":"c1","uid":1816697,"ip_address":"","ucode":"6A68D2414BD904","user_header":"https://static001.geekbang.org/account/avatar/00/1b/b8/79/a4dbe9ee.jpg","comment_is_top":false,"comment_ctime":1583466891,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1583466891","product_id":100033601,"comment_content":"æ‰€ä»¥å¾®ä»»åŠ¡æ˜¯å­˜æ”¾åœ¨å»¶è¿Ÿé˜Ÿåˆ—é‡Œçš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2747374,"avatar":"https://static001.geekbang.org/account/avatar/00/29/eb/ee/22930bbc.jpg","nickname":"Geek_Ron","note":"","ucode":"A49296021C0F7E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576106,"discussion_content":"å»¶è¿Ÿé˜Ÿåˆ—çš„ä»»åŠ¡ä¹Ÿæ˜¯å®ä»»åŠ¡ï¼Œå»¶è¿Ÿé˜Ÿåˆ—æ˜¯hashmapç»“æ„ï¼ŒåƒsetTimeoutå®šæœŸä»»åŠ¡ï¼Œå®ƒæ”¾åœ¨å»¶è¿Ÿé˜Ÿåˆ—ï¼Œåˆ°æœŸäº†å°±ä¼šæ‰§è¡Œï¼Œç»“æŸæ‰è¿›å…¥ä¸‹ä¸€ä¸ªå¾ªç¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655279796,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":179876,"user_name":"å°è–›èœèœå­","can_delete":false,"product_type":"c1","uid":1622598,"ip_address":"","ucode":"C4E13239E84544","user_header":"https://static001.geekbang.org/account/avatar/00/18/c2/46/eca306d4.jpg","comment_is_top":false,"comment_ctime":1582115718,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582115718","product_id":100033601,"comment_content":"å‰æ–‡æ›¾è¯´è¿‡ï¼šâ€œå¤„ç†å®Œæ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„ä¸€ä¸ªä»»åŠ¡ä¹‹åï¼Œå°±å¼€å§‹æ‰§è¡Œ ProcessDelayTask å‡½æ•°ã€‚ProcessDelayTask å‡½æ•°ä¼šæ ¹æ®å‘èµ·æ—¶é—´å’Œå»¶è¿Ÿæ—¶é—´è®¡ç®—å‡ºåˆ°æœŸçš„ä»»åŠ¡ï¼Œç„¶åä¾æ¬¡æ‰§è¡Œè¿™äº›åˆ°æœŸçš„ä»»åŠ¡ã€‚ç­‰åˆ°æœŸçš„ä»»åŠ¡æ‰§è¡Œå®Œæˆä¹‹åï¼Œå†ç»§ç»­ä¸‹ä¸€ä¸ªå¾ªç¯è¿‡ç¨‹ã€‚â€ä»è¿™æ®µè¯æ¥çœ‹ï¼Œè¿™ä¸ª ProcessDelayTask æ‰§è¡Œçš„æ­£æ˜¯ setTimeout çš„å›è°ƒï¼Œå¹¶ä¸”æ˜¯ä¸€æ¬¡æ€§å…¨éƒ¨æ‰§è¡Œå®Œæˆçš„ã€‚<br>ä¹Ÿå°±æ˜¯è¯´ï¼ŒsetTimeout åº”è¯¥å®é™…ä¸Šå’Œå¾®ä»»åŠ¡ä¸€æ ·ï¼Œåªè¦åˆ°äº†æ—¶é—´ï¼Œå°±ä¼šåœ¨ã€ä¸€ä¸ªã€‘æ™®é€šæ¶ˆæ¯é˜Ÿåˆ—ä¸­ä»»åŠ¡çš„å®Œæˆä¹‹åå°±è¢«æ‰§è¡Œçš„ï¼Œè€Œä¸æ˜¯æ’å…¥åˆ°æ¶ˆæ¯é˜Ÿåˆ—çš„æœ«å°¾ï¼Œç­‰å¾…å‰é¢æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œæ‰èƒ½æ‰§è¡Œã€‚<br>ä½†æ˜¯æœ¬ç« åˆä¸æ˜¯è¿™ä¸ªæ„æ€ã€‚è¯·é—®å“ªä¸€è¾¹æ˜¯å‡†ç¡®çš„å‘¢ï¼Ÿè¿˜æ˜¯æˆ‘æœ‰ç†è§£ä¸Šçš„è°¬è¯¯å‘¢ï¼Ÿ<br>è¾›è‹¦è€å¸ˆçš„è§£ç­”äº†ï¼","like_count":0},{"had_liked":false,"id":165228,"user_name":"AMIR","can_delete":false,"product_type":"c1","uid":1782777,"ip_address":"","ucode":"65142D9669071B","user_header":"https://static001.geekbang.org/account/avatar/00/1b/33/f9/50b76abe.jpg","comment_is_top":false,"comment_ctime":1577183747,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577183747","product_id":100033601,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªé—®é¢˜è¯·æ•™ä¸€ä¸‹ï¼Œç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå»¶æ—¶é˜Ÿåˆ—å¦‚æœå­˜åœ¨ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¸¤ä¸ªsetTimeOutä¸­è¢«åŠ å…¥é‚£ä¹ˆå¤šå…¶ä»–ä»»åŠ¡ï¼Œä¸åº”è¯¥æ˜¯æœ€å¤šæ‰§è¡Œä¸€ä¸ªï¼Œç„¶ååˆ¤æ–­å»¶æ—¶é˜Ÿåˆ—æ˜¯å¦æœ‰åˆ°æœŸdeï¼Œç„¶åå°±æ‰§è¡Œå˜›ï¼Ÿæ€ä¹ˆä¼šæ·»åŠ åˆ°å°¾å·´ä¸Š","like_count":0},{"had_liked":false,"id":165154,"user_name":"Chao","can_delete":false,"product_type":"c1","uid":1108745,"ip_address":"","ucode":"DD7742F5537521","user_header":"https://static001.geekbang.org/account/avatar/00/10/eb/09/ba5f0135.jpg","comment_is_top":false,"comment_ctime":1577173110,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577173110","product_id":100033601,"comment_content":"å®ä»»åŠ¡å¹¶æœªå‡ºç°åœ¨è§„èŒƒå†…ã€‚ ","like_count":0},{"had_liked":false,"id":159305,"user_name":"æµ·ä¹‹è“å¿ƒ","can_delete":false,"product_type":"c1","uid":1098193,"ip_address":"","ucode":"C15210C86CDC13","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLReFZCZAq532WRg5Bjabx1WX997t0EVnsrLYcBnsNZDaDjk5jHvKDfRibjwibVjqtlm7S3eBJkwPtg/132","comment_is_top":false,"comment_ctime":1575597252,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575597252","product_id":100033601,"comment_content":"è€å¸ˆï¼Œæ–‡ä¸­æåˆ°ï¼Œå¾®ä»»åŠ¡æ—©äºå®ä»»åŠ¡æ‰§è¡Œï¼Ÿ<br>æˆ‘çš„ç†è§£:å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œé€€å‡ºä¹‹å‰ï¼Œå†æ‰§è¡Œå¾®ä»»åŠ¡åˆ—è¡¨çš„ä»»åŠ¡ã€‚<br>è¿˜æœ‰å½“å‰å®ä»»åŠ¡åˆæœ‰å»¶è¿Ÿåˆ—è¡¨ä»»åŠ¡ï¼Œåˆæœ‰å¾®ä»»åŠ¡ï¼Œåº”è¯¥æ€ä¹ˆæ‰§è¡Œï¼Ÿ<br>æ±‚è§£æƒ‘ï¼Ÿï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":146811,"user_name":"å‡­å®åŠ›å†™bug","can_delete":false,"product_type":"c1","uid":1235611,"ip_address":"","ucode":"6F772551F18935","user_header":"https://static001.geekbang.org/account/avatar/00/12/da/9b/e0ef47df.jpg","comment_is_top":false,"comment_ctime":1572663851,"is_pvip":false,"replies":[{"id":"56737","content":"åç»­æœ‰è¡¥å……å†…å®¹","user_name":"ä½œè€…å›å¤","user_name_real":"æå…µ","uid":"1141464","ctime":1572669623,"ip_address":"","comment_id":146811,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1572663851","product_id":100033601,"comment_content":"æ‰§è¡Œæµç¨‹å¾ˆæ¸…æ¥š,ä¹ŸçŸ¥é“äº†å‡ ä¸ªé˜Ÿåˆ—çš„å…³ç³»,çœ‹å®Œå”¯ä¸€è¿·æƒ‘çš„æ˜¯é‚£é‡Œç®—ä¸€ä¸ªä»»åŠ¡,å¯¹ç€performanceæ‰§è¡Œæµç¨‹å°±å¾ˆæ¸…æ™°äº†","like_count":0,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"æå…µ","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473019,"discussion_content":"åç»­æœ‰è¡¥å……å†…å®¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572669623,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":138385,"user_name":"Cris","can_delete":false,"product_type":"c1","uid":1473520,"ip_address":"","ucode":"F8A287134F1078","user_header":"https://static001.geekbang.org/account/avatar/00/16/7b/f0/269139d5.jpg","comment_is_top":false,"comment_ctime":1570190980,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570190980","product_id":100033601,"comment_content":"è¿™ç¯‡èµ","like_count":0},{"had_liked":false,"id":138359,"user_name":"Cris","can_delete":false,"product_type":"c1","uid":1473520,"ip_address":"","ucode":"F8A287134F1078","user_header":"https://static001.geekbang.org/account/avatar/00/16/7b/f0/269139d5.jpg","comment_is_top":false,"comment_ctime":1570177939,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570177939","product_id":100033601,"comment_content":"å…ˆä»å¤šä¸ªæ¶ˆæ¯é˜Ÿåˆ—ä¸­é€‰å‡ºä¸€ä¸ªæœ€è€çš„ä»»åŠ¡ï¼Œè¿™ä¸ªä»»åŠ¡ç§°ä¸º oldestTask<br>è€å¸ˆä¸€æ¬¡äº‹ä»¶å¾ªç¯åªæ‰§è¡Œå¤šä¸ªæ¶ˆæ¯é˜Ÿåˆ—é‡Œæœ€è€çš„ä»»åŠ¡ï¼ˆå³ä¸€æ¬¡äº‹ä»¶å¾ªç¯åªæ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼‰è¿˜æ˜¯å–æ¯ä¸ªæ¶ˆæ¯åˆ—è¡¨é‡Œæœ€è€çš„ä»»åŠ¡ï¼ˆå³ä¸€æ¬¡äº‹ä»¶å¾ªç¯ä¼šæ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼‰ï¼Ÿ","like_count":0},{"had_liked":false,"id":138352,"user_name":"Cris","can_delete":false,"product_type":"c1","uid":1473520,"ip_address":"","ucode":"F8A287134F1078","user_header":"https://static001.geekbang.org/account/avatar/00/16/7b/f0/269139d5.jpg","comment_is_top":false,"comment_ctime":1570177009,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570177009","product_id":100033601,"comment_content":"ä¸ºäº†åè°ƒè¿™äº›ä»»åŠ¡æœ‰æ¡ä¸ç´Šåœ°åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œé¡µé¢è¿›ç¨‹å¼•å…¥äº†æ¶ˆæ¯é˜Ÿåˆ—å’Œäº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Œæ¸²æŸ“è¿›ç¨‹å†…éƒ¨ä¼šç»´æŠ¤å¤šä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ¯”å¦‚å»¶è¿Ÿæ‰§è¡Œé˜Ÿåˆ—å’Œæ™®é€šçš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚è€å¸ˆæ¸²æŸ“è¿›ç¨‹ç»´æŠ¤çš„æ¶ˆæ¯é˜Ÿåˆ—é™¤äº†å»¶æ—¶é˜Ÿåˆ—å’Œæ™®é€šçš„æ¶ˆæ¯é˜Ÿåˆ—æ˜¯ä¸æ˜¯è¿˜æœ‰å…¶ä»–çš„é˜Ÿåˆ—ï¼Ÿ","like_count":0},{"had_liked":false,"id":137510,"user_name":"Djan Unchained","can_delete":false,"product_type":"c1","uid":1387997,"ip_address":"","ucode":"FB5A37B0EE3E98","user_header":"https://static001.geekbang.org/account/avatar/00/15/2d/dd/f2e79297.jpg","comment_is_top":false,"comment_ctime":1569756765,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1569756765","product_id":100033601,"comment_content":"addEventListener æ˜¯ä¸æ˜¯å’Œ Mutation Event ä¸€æ ·ä¹Ÿæ˜¯åŒæ­¥å›è°ƒï¼Ÿå› ä¸ºå®ƒåªç›‘å¬æŸä¸ªDOMèŠ‚ç‚¹ï¼Œæ‰€ä»¥ä¸ä¼šé€ æˆå¤ªå¤§æ€§èƒ½é—®é¢˜ï¼Ÿ","like_count":0},{"had_liked":false,"id":137269,"user_name":"æµªé‡Œè¡ŒèˆŸ","can_delete":false,"product_type":"c1","uid":1430382,"ip_address":"","ucode":"23D7E1C4DD5221","user_header":"https://static001.geekbang.org/account/avatar/00/15/d3/6e/7b6a9d91.jpg","comment_is_top":false,"comment_ctime":1569673909,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"1569673909","product_id":100033601,"comment_content":"&quot;é¡µé¢ä¸­çš„å¤§éƒ¨åˆ†ä»»åŠ¡éƒ½æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œçš„&quot;,è¯·é—®è€å¸ˆ,è¿™é‡Œçš„ä¸»çº¿ç¨‹æ˜¯åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­è¿˜æ˜¯æµè§ˆå™¨ä¸»è¿›ç¨‹ä¸­,è¿™ä¸ªé—®é¢˜å›°æ‰°å¾ˆä¹…,éº»çƒ¦è€å¸ˆæœ‰ç©ºè§£ç­”ä¸‹<br>","like_count":0,"discussions":[{"author":{"id":1591850,"avatar":"","nickname":"ç‹ç£Š","note":"","ucode":"81865EEEFCB631","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":190230,"discussion_content":"æ¸²æŸ“è¿›ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582906862,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1379119,"avatar":"https://static001.geekbang.org/account/avatar/00/15/0b/2f/6efc3051.jpg","nickname":"GY","note":"","ucode":"764214512E67C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":35475,"discussion_content":"æ¸²æŸ“çº¿ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571283902,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1691581,"avatar":"https://static001.geekbang.org/account/avatar/00/19/cf/bd/4fa01a1c.jpg","nickname":"wd2010","note":"","ucode":"E194E4EFECA013","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":27516,"discussion_content":"æˆ‘è§‰å¾—è¿™é‡Œåº”è¯¥æ˜¯æ¸²æŸ“è¿›ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570664488,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1430382,"avatar":"https://static001.geekbang.org/account/avatar/00/15/d3/6e/7b6a9d91.jpg","nickname":"æµªé‡Œè¡ŒèˆŸ","note":"","ucode":"23D7E1C4DD5221","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1691581,"avatar":"https://static001.geekbang.org/account/avatar/00/19/cf/bd/4fa01a1c.jpg","nickname":"wd2010","note":"","ucode":"E194E4EFECA013","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":29964,"discussion_content":"æˆ‘ä¹Ÿè§‰å¾—ï¼Œå°å¿ƒæ±‚è¯","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1570792411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":27516,"ip_address":""},"score":29964,"extra":""}]}]},{"had_liked":false,"id":136247,"user_name":"è“é…é¸¡","can_delete":false,"product_type":"c1","uid":1348738,"ip_address":"","ucode":"C79A7CA8885B7C","user_header":"https://static001.geekbang.org/account/avatar/00/14/94/82/d0a417ba.jpg","comment_is_top":false,"comment_ctime":1569395502,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1569395502","product_id":100033601,"comment_content":"ä¸ºä»€ä¹ˆç”¨mutation observerå¯ä»¥å‡å°‘å›æ‰æ¬¡æ•°å‘¢ï¼Ÿ ä¸åº”è¯¥Domå˜åŒ–å¤šå°‘æ¬¡å°±è°ƒå¤šå°‘æ¬¡å›æ‰å‡½æ•°å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1039904,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/de/20/03130a39.jpg","nickname":"æ²§æµ·ä¸€å£°ç¬‘","note":"","ucode":"5297F2F4736B63","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":222574,"discussion_content":"ç±»ä¼¼èŠ‚æµé˜²æŠ–çš„æ“ä½œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586158322,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134598,"user_name":"AYK","can_delete":false,"product_type":"c1","uid":1159960,"ip_address":"","ucode":"68E8C21A862A7A","user_header":"https://static001.geekbang.org/account/avatar/00/11/b3/18/e061e898.jpg","comment_is_top":false,"comment_ctime":1568876140,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568876140","product_id":100033601,"comment_content":"new Promise(fn)æ˜¯ä¸ªç«‹å³æ‰§è¡ŒåŒæ­¥ä»»åŠ¡  new æ—¶å€™åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡ åœ¨å°†fnå‹æ ˆåˆ›å»ºfnæ‰§è¡Œä¸Šä¸‹æ–‡ å†æ‰§è¡Œresolve()æˆ–è€…reject()åˆ›å»ºresolve&#47;rejectæ‰§è¡Œä¸Šä¸‹æ–‡, åé¢çš„then catchè¿›å¾®ä»»åŠ¡ï¼Œæ‰§è¡Œåˆ°console.log(2)åŒæ­¥ä»»åŠ¡ï¼Œå†æ‰§è¡Œå¾®ä»»åŠ¡ï¼Œå¦‚æœå‰é¢æ‰§è¡Œçš„æ˜¯reject()åˆ™ç›´æ¥console.log(&#39;error&#39;),å¦‚æœæ˜¯resolve()å°±æ‰“å°console.log(&quot;succeed-1&quot;)...æ¥ç€å†é‡å¤ï¼ˆcatchæ˜¯å¯ä»¥ä¸€ç›´onRejectedé€€å‡ºçš„ï¼‰","like_count":0},{"had_liked":false,"id":133618,"user_name":"Chao","can_delete":false,"product_type":"c1","uid":1108745,"ip_address":"","ucode":"DD7742F5537521","user_header":"https://static001.geekbang.org/account/avatar/00/10/eb/09/ba5f0135.jpg","comment_is_top":false,"comment_ctime":1568621859,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1568621859","product_id":100033601,"comment_content":"ä¸€ç›´ç†è§£çš„æ˜¯ ä¸€æ¬¡äº‹ä»¶å¾ªç¯å†… åªå–é˜Ÿå¤´çš„å®ä»»åŠ¡æ‰§è¡Œå’Œæ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚ <br>è€å¸ˆçš„è®²è§£çš„ æ˜¯å®ä»»åŠ¡å…³è”å¾®ä»»åŠ¡ã€‚","like_count":0,"discussions":[{"author":{"id":1480732,"avatar":"https://static001.geekbang.org/account/avatar/00/16/98/1c/d7a1439e.jpg","nickname":"KaKaKa","note":"","ucode":"07D1980A71F321","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":225889,"discussion_content":"ä½ è¯´çš„è¿™ä¸¤ä¸ªä¸æ˜¯ä¸€æ ·å—ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586405148,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133595,"user_name":"Geek_177f82","can_delete":false,"product_type":"c1","uid":1606961,"ip_address":"","ucode":"C1BF9B51E92995","user_header":"","comment_is_top":false,"comment_ctime":1568617816,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568617816","product_id":100033601,"comment_content":"å¼‚æ­¥å›è°ƒå‡½æ•°å°è£…æˆä¸€ä¸ªå®ä»»åŠ¡ï¼Œæ·»åŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—å°¾éƒ¨ï¼Œå½“å¾ªç¯ç³»ç»Ÿæ‰§è¡Œåˆ°è¯¥ä»»åŠ¡çš„æ—¶å€™æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚setTimeout é‡‡ç”¨çš„æ˜¯è¿™ç§æ–¹å¼ã€‚æœ‰ä¸ªç–‘æƒ‘ã€‚é‚£setTimeoutçš„å›è°ƒå‡½æ•°çš„ä»»åŠ¡æ˜¯æ·»åŠ åˆ°å¼‚æ­¥æ¶ˆæ¯é˜Ÿåˆ—è¿˜æ˜¯æ™®é€šçš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿé‚£XMLHttpRequest çš„å›è°ƒå‡½æ•°ä»»åŠ¡å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":133355,"user_name":"mfist","can_delete":false,"product_type":"c1","uid":1373624,"ip_address":"","ucode":"4F99F422C23FB4","user_header":"https://static001.geekbang.org/account/avatar/00/14/f5/b8/9f165f4b.jpg","comment_is_top":false,"comment_ctime":1568527492,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568527492","product_id":100033601,"comment_content":"æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼šï¼ˆæè¿°èµ·æ¥æœ‰ç‚¹ä¹±ï¼Œä¸€ä¸ªæµç¨‹å›¾æ›´å¥½å±•ç°ï¼‰<br>ç¬¬10è¡Œï¼šåˆ›å»ºpromiseï¼Œè¾“å‡º1 éšæœºæ•°çš„å€¼randï¼Œå¦‚æœrand&gt;0.5å¼‚æ­¥è°ƒç”¨æˆåŠŸæ–¹æ³•ï¼Œå¦åˆ™è¿›å…¥å¤±è´¥æ–¹æ³•<br>   32è¡Œï¼šè¾“å…¥2ï¼Œå…¶ä»–then catchæ–¹æ³•é€»è¾‘æ·»åŠ åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—<br>å¦‚æœç¬¬10è¡Œä¸­ï¼šrand è¿›å…¥å¤±è´¥æ–¹æ³• è¾“å‡ºerrorï¼Œç»“æŸ<br>å¦‚æœç¬¬10è¡Œä¸­ï¼šrandè¿›å…¥æˆåŠŸæ–¹æ³•ï¼Œè¾“å‡ºsucceed-1ï¼Œè¿›å…¥ç¬¬10è¡Œé€»è¾‘ã€‚<br>å¦‚æœrandä¸€ç›´å¤§äº0.5ï¼šåˆ™é‡å¤ä¸Šé¢é€»è¾‘è¾“å‡ºsucceed-2 succeed-3 ç»“æŸï¼Œå¦åˆ™ä»å¯¹åº”ç‚¹è·³åˆ°erroré€»è¾‘ï¼Œè¾“å‡ºerrorç»“æŸã€‚<br><br>ä»Šæ—¥æ€»ç»“ï¼š<br>éšç€æ¶ˆæ¯é˜Ÿåˆ—ä¸­ä»»åŠ¡æ—¶é—´é¢—ç²’åº¦è¦æ±‚å˜å°å¼•å‡ºäº†å¾®ä»»åŠ¡çš„æ¦‚å¿µï¼Œä¸»è¦åº”ç”¨çš„æ–¹é¢æ˜¯MutationObserverã€PromiseåŠä»¥å®ƒä¸ºåŸºç¡€çš„æ‰©å±•æŠ€æœ¯ã€‚å¾®ä»»åŠ¡æ‰§è¡Œçš„æ—¶æœºï¼šå½“å‰ä¸»å‡½æ•°ç»“æŸä¹‹åï¼Œå®ä»»åŠ¡çš„æœ«å°¾å»æ‰§è¡Œï¼ˆå¯ä»¥ç†è§£ä¸ºæ¯ä¸ªå®ä»»åŠ¡éƒ½å¯¹åº”ä¸€ä¸ªå¾®ä»»åŠ¡çš„é˜Ÿåˆ—ï¼‰ã€‚ç„¶åè®²äº†mutationObserverçš„æ¼”åŒ–è¿‡ç¨‹","like_count":0},{"had_liked":false,"id":133291,"user_name":"Geek_b42f75","can_delete":false,"product_type":"c1","uid":1609471,"ip_address":"","ucode":"DCE04A7A714EEA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKpW6pOyXOVXF31iaLJsxAqEoPs5pa4om9icGU8fEECAaA1ZPLB21TgyNRiaibypChBiaBrSs3iaMau4qzg/132","comment_is_top":false,"comment_ctime":1568478433,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1568478433","product_id":100033601,"comment_content":"æ‚¨å¥½ï¼Œè€å¸ˆï¼Œæƒ³è¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œæœ¬æ–‡ä¸»è¦è®²è§£äº†å½“ä»Šæµè§ˆå™¨äº§ç”Ÿå¾®ä»»åŠ¡çš„ä¸¤ç§æ–¹å¼ï¼šMutationObserverå’ŒPromiseã€‚é‚£ä¹ˆå¯¹äºprocess.nextTickå’ŒObject.observeåˆè¯¥å¦‚ä½•ç†è§£å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1299829,"avatar":"https://static001.geekbang.org/account/avatar/00/13/d5/75/d93f9648.jpg","nickname":"ğŸª","note":"","ucode":"2B6D01EA82DE97","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":12560,"discussion_content":"å‰é¢ä¸€ä¸ªä¸æ˜¯æµè§ˆå™¨çš„æ ‡å‡†ï¼Œåé¢ä¸€ä¸ªå·²ç»ä¸å†æ˜¯æ ‡å‡†äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568546804,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133290,"user_name":"äº®","can_delete":false,"product_type":"c1","uid":1234697,"ip_address":"","ucode":"E703B472ECB944","user_header":"https://static001.geekbang.org/account/avatar/00/12/d7/09/63ba546a.jpg","comment_is_top":false,"comment_ctime":1568478115,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1568478115","product_id":100033601,"comment_content":"å°è¯•åœ¨æµè§ˆå™¨é‡Œè¿è¡Œä¸‹é¢è¿™æ®µä»£ç :      <br>      let ele = document.querySelector(&#39;.test&#39;)<br>      debugger<br>      ele.remove()<br>      console.log(1)<br>è°ƒè¯•ç»“æœæ˜¯ç¬¬ä¸‰è¡Œè¿è¡Œå®Œæ—¶é¡µé¢ä¸Šçš„èŠ‚ç‚¹ç«‹åˆ»æ¶ˆå¤±äº†ï¼Œç„¶åæ‰æ‰“å° 1ï¼ŒæŒ‰ä¸Šé¢å›¾ä¸­çš„æµç¨‹removeä¼šæ·»åŠ å¾®ä»»åŠ¡ï¼Œç»“æœåº”è¯¥æ˜¯å…ˆæ‰“å°1ç„¶ååˆ é™¤èŠ‚ç‚¹ï¼Œæœ‰ç‚¹æ™•~~","like_count":0,"discussions":[{"author":{"id":1147347,"avatar":"https://static001.geekbang.org/account/avatar/00/11/81/d3/f0a88806.jpg","nickname":"ğŸ ğŸ¾ ğŸ”†","note":"","ucode":"1B7C90800AD4D0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":65489,"discussion_content":"ä½ è¦ç”¨MutationObserverè¿™ä¸ªAPIæ¥æµ‹è¯•å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575005975,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133150,"user_name":"Geek_bca6b0","can_delete":false,"product_type":"c1","uid":1656285,"ip_address":"","ucode":"A8E2DE06BD6F1F","user_header":"","comment_is_top":false,"comment_ctime":1568420010,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568420010","product_id":100033601,"comment_content":"ç†è§£æ˜¯å¦å¯¹ï¼Œé¦–å…ˆæ‰§è¡Œè¿™æ®µè„šæœ¬ï¼Œåˆ›å»ºä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šæ–‡ï¼Œå…ˆæ‰§è¡Œp0ï¼Œå…ˆæ‰“å°1å’Œrandå€¼ï¼Œå†æ‰“å°2ï¼Œç„¶åæ ¹æ®randæ˜¯å¦å¤§äº0.5å†³å®šå°†promise.resolve,æˆ–rejectåŠ å…¥å¾®ä»»åŠ¡çš„é˜Ÿåˆ—ï¼Œç„¶åæ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰§è¡Œresolveçš„å›è°ƒå‡½æ•°ï¼Œè‹¥é‡åˆ°promise.resolve,å†åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¾æ¬¡æ‰§è¡Œï¼Œè‹¥é‡åˆ°å°äº0.5ï¼Œå°±æ•è·é”™è¯¯ã€‚<br>é‚£ä¹ˆï¼Œ<br>  å¦‚æœåœ¨promiseé‡Œé¢åµŒå¥—setTimeoutæˆ–xhrå®è§‚ä»»åŠ¡ï¼Œæ˜¯å¦è¦é€€å‡ºå½“å‰å…¨å±€ä¸Šä¸‹æ–‡ï¼Œç­‰åˆ°å»¶è¿Ÿé˜Ÿåˆ—åˆ°äº†ï¼Œå†æ–°å»ºä¸€ä¸ªå…¨å±€ä¸Šä¸‹æ–‡ï¼Œæ‰§è¡Œå½“å‰å›è°ƒå‡½æ•°ï¼Œé‡åˆ°resolveï¼ŒåŠ å…¥å½“å‰å¾®ä»»åŠ¡é˜Ÿåˆ—å—?ç„¶åpromise.thené‡Œå†æ‰§è¡Œå½“å‰å›è°ƒå‡½æ•°ï¼Ÿ","like_count":0}]}