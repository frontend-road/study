{"id":135422,"title":"26 | 为什么编译Medooze Server这么难？","content":"<p>在<a href=\"https://time.geekbang.org/column/article/134284\">上一篇文章</a>中，我们对 Licode、Janus、Mediasoup以及Medooze 四个 WebRTC 开源流媒体服务器的实现进行对比，对于想研究音视频多方会议、录制回放、直播等流媒体技术的开发人员来说，Medooze 是很好的选择。因为它支持所有这些功能，通过它的源码及其 Demo 就可以对 Medooze 进行深入学习了。</p><p>从本文开始，在接下来的四篇文章我会向你详细讲述 Medooze 的架构、实现以及应用。而本文主要介绍Medooze是如何编译和构建的。</p><p>也许你会觉得Linux下的程序编译有什么可讲的呢，直接在Linux系统下执行一下 build 命令不就行了，还需要专门理解系统的编译过程和构建工具的使用吗？实际上，根据我多年的工作经验来看，理解项目的编译过程、熟悉各种构建工具的使用是非常有必要的。下面我就举几个例子，通过这几个例子，我想你就会对它们有一个深刻感悟了。</p><p>第一个例子，伴随着技术的飞速发展，构建工具也有了很大的变化，从最早的手动编写 Makefile，逐渐过渡到使用 Autotools、CMake、GYP 等构建工具来生成 Makefile，这些构建工具可以大大提高你的工作效率。比如，通过Andorid Studio 创建JNI程序时，在 Android Studio 底层会使用 CMake 来构建项目，你会发现使用 CMake 构建 JNI 非常方便。然而像Chrome浏览器这种大型项目也用 CMake构建就很不合适了，因为Chrome浏览器的代码量巨大，使用 CMake 构建它会花费特别长的时间（\b好几个小时），为了解决这个问题 Chrome 团队自己开发了一个新的构建工具，即GYP，来构建这种大型项目，从而大大提高了构建的效率。由此可见，不同的项目使用不同的构建工具对开发效率的提升是巨大的。</p><!-- [[[read_end]]] --><p>第二个例子，当你研究某个开源项目的源代码时，如果你对 Makefile语法非常熟悉的话，它对你研读项目的源码会起到事半功倍的效果。因为通过 Makefile 你可以了解到项目中引入了哪些第三方库、源文件编译的先后顺序是怎样的、都定义了那些宏等信息，这些信息都可以帮助你更好地理解源码中的实现逻辑。</p><p>第三个例子，对于某些开源项目，很多时候其构建文档并不完整，因此在构建过程中经常会出现各种失败，而这种失败会让人不知所措。但如果你对Makefile特别熟悉的话，你就可以去阅读它里面的内容，很多时候通过这种方法就可以很快找到编译失败的真正原因。</p><p>通过上面的描述，我相信你应该已经知道理解项目的构建过程，熟悉各种构建工具的使用对开发人员有多重要了。</p><p>那接下来我们言归正传，来看看该如何编译Media-server-node 。</p><h2>Media-server-node 项目</h2><p>Media-server-node 是一个 Node.js 项目，其目录结构如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/1b/2e/1b7e5aa7de762d7bd1606c0dbc14382e.png?wh=1142*409\" alt=\"\"></p><center><span class=\"reference\">目录结构图</span></center><p>通过上图你可以看到，在 Media-server-node 项目中，用红框框出来的四个目录比较重要。其中<strong>src 目录</strong>中存放的是 C++ 语言实现的 Native 代码，用于生成 JavaScript 脚本可以调用的 C++ 接口，从而使 J\bavaScript 编写的业务层代码可以调用 Medooze 核心层的 C++代码；<strong>lib 目录</strong>里存放的是在 Node.js 端执行的，控制 Medooze 业务逻辑的 JavaScript 代码；<strong>external 目录</strong>中存放的是 Medooze 使用的第三方库，如 MP4v2 和 SRTP；<strong>media-server 目录</strong>是一个比较重要的目录，它里面存放的是 <strong>Medooze 的核心代码，即 C++ 实现的流媒体服务器代码</strong>。</p><p>这里需要注意的是，Media-server-node 中的 media-server 目录是一个独立的项目，它是通过外部链接引用到Media-server-node项目中的。它既可以随 Media-server-node 一起编译，也可以自己单独编译。对于这一点我们后面还会做详细介绍。</p><h3>1. 构建Media-server-node项目</h3><p>构建 Media-server-node 项目非常简单，只需要执行下面的命令即可构建成功：</p><pre><code>npm install medooze-media-server --save\n</code></pre><p>实际上，在构建 Media-server-node 项目时，重点是对上面三个 C/C++ 目录（即 external、media-server、src）中的 Native 代码的构建。项目构建时会调用 node-gyp 命令将三个目录中的 C++ 代码编译成 Node.js 的 Native 插件，以供 JavaScript 脚本使用。</p><blockquote>\n<p>另外，Media-server-node 目录中的 binding.gyp 文件就是供node-gyp使用来构建C++ Navtie 代码的规则文件。在执行上面的构建命令时，底层会调用 node-gyp命令，node-gyp 以binding.gyp为输入，然后根据 binding.gyp 中的规则对C++ Native代码进行构建的。</p>\n</blockquote><p>下面我们就来看看，node-gyp 是如构建 C++ Native代码的吧。</p><h3>2. node-gyp &amp; GYP</h3><p>首先我们来了解一下node-gyp，<strong>node-gyp 是一个由 Node.js 执行的脚本程序，是专门用于生成在 Node.js 中运行的 C/C++ Native 插件的工具</strong>。</p><p>实际上，你可以简单地将 node-gyp 认为是 gyp 和 Make/Ninja 工具的集合，当构建某个项目时，在底层node-gyp先使用 gyp 工具根据 binding.gyp 中的规则生成Makefile或 build.ninja文件，然后再调用 Make/Ninja 命令进行构建，编译出 Native 插件。</p><p>那上面说的GYP又是什么呢？GYP（Generate Your Projects）是 Chromium 团队使用 Python 语言开发的构建工具，它以 .gyp 为输入文件，可以产生不同平台的 IDE 工程文件，如VS 工程；或产生各种编译文件，如 Makefile 。</p><p>通过上面的描述你可以知道，存在着两个层面的规则文件，.gyp 是由 GYP工具使用的项目规则文件，Makefile/build.ninja是由 Make/Ninja 使用的编译规则文件，我们称它为编译文件。另外，Make/Ninja 命令相对更底层一些，它们执行时会直接调用编译器（如 GCC/G++）对源码进行编译。而 gyp命令更偏项目管理一些，它是为了产生各种工程或Makefile/build.ninja文件而存在的。</p><p>有很多同学对  node-gyp、GYP、Make、Ninja 这些工具是什么关系分不清，通过上面的讲解你应该就清楚它们之间的区别了。下面这张图将它们之间的关系描述得更加清晰：</p><p><img src=\"https://static001.geekbang.org/resource/image/6a/01/6ab82535c85296cdaba1da662045b701.png?wh=1142*628\" alt=\"\"></p><center><span class=\"reference\">node-gyp、GYP关系图</span></center><p>通过上图我们可以看到 gyp 命令是将 binding.gyp文件生成Makefile文件，然后交给 make，最终将 Native 插件编译出来的。</p><p>了解了 node-gyp 和 GYP 之间的关系之后，我们再来了解一下 GYP 规则的语法。首先我们要知道 GYP 规则文件是以 JSON 格式存储的。另外，在 GYP 的规则文件中，它按有效范围将规则分为了两大类，即全局规则和局部规则。下面我们就以 binding.gyp 为例，看看它是如何使用这些规则的。</p><p>所谓全局规则就是指这些规则在整个文件内有效的规则，我们看一下代码吧：</p><p><img src=\"https://static001.geekbang.org/resource/image/22/7f/222c0e4c78f751ddc9293db790e8e57f.png?wh=1142*231\" alt=\"\"></p><p>代码中的 <strong>variables</strong> 用于在GYP规则文件中定义全局变量，这些全局变量被定义好后，就可以在规则文件中的任何地方被引用了。</p><p>GYP中除了<strong>variables</strong>外，还定义了其他几个全局规则，具体的内容可以查看文末的参考一节，这里就不一一列出了。</p><p>在规则文件中最重要的规则要数 target了，它属于局部规则，在 binding.gyp 文件中的 target 描述如下所示：</p><pre><code>&quot;targets&quot;:\n[\n  {\n    &quot;target_name&quot;: &quot;medooze-media-server&quot;,\n    &quot;type&quot;: &quot;static_library&quot;,\n    &quot;cflags&quot;: //设置编译器编译参数\n    [\n      ...\n      &quot;-O3&quot;,\n      &quot;-g&quot;,\n      ...\n    ],\n    &quot;ldflags&quot; : [&quot; -lpthread -lresolv&quot;], //设置编译器连接参数\n    &quot;include_dirs&quot; : //项目需要的头文件目录\n    [\n      '/usr/include/nodejs/',\n      &quot;&lt;!(node -e \\&quot;require('nan')\\&quot;)&quot;\n    ],\n    &quot;link_settings&quot;:\n    {\n     'libraries': [&quot;-lpthread -lpthread -lresolv&quot;] //链接时使用的第三方库\n    },\n    &quot;sources&quot;: //所有需要编译的源码文件\n    [\n      &quot;src/media-server_wrap.cxx&quot;,\n      ...\n    ],\n    \n    &quot;dependencies&quot;:[ //指定依赖的其他的 target\n      ...\n.    \n    ],\n    &quot;conditions&quot; : [ //编译条件\n       [&quot;target_arch=='ia32'&quot;, {\n         ...\n       }],\n       ...\n       ['OS==&quot;linux&quot;',{\n         ...\n       }],\n    ],\n  }\n]\n</code></pre><p>下面我就向你详细讲解一下 target 中每个规则的作用和含义。</p><p><strong>target_name</strong> ，是target 的名字，在一个 .gyp 文件中，名字必须是唯一的，这里是 medooze-media-server。当使用 GYP 生成工程文件时，如 VS 工程或XCode工程，target_name 就是各工程文件的名字。</p><p><strong>type</strong>，指明了生成的 target 的类型，你可以设置为以下几种类型：executable 表示要生成可执行程序，在 Windows 中就是 exe 文件；static_library 表示要生成静态库，生成的文件为 <code>*.a</code> 或者是<code>*.lib</code> 后辍的文件；shared_library 表示要生成共享库，也就是文件后辍名为.so 或者 .dll 的文件；none，表示为无类型，该类型留作特殊用途使用。</p><p>……</p><p>由于篇幅的原因，其他规则就不在这里一一列举了，如果你对它们感兴趣的话可以查看后面的参考一节。</p><p>通过上面的描述可以知道，在调用 npm 构建 Media-server-node 项目时，在它的内部会调用 node-gyp 命令，该命令以 binding.gyp 为输入文件，按照该文件中的规则生成 Makefile 或 build.ninja 文件，最后使用  Make/Ninja 命令来编译 C/C++ 的 Native 代码。这就是 node-gyp 执行编译的基本过程。</p><h2>单独构建media-server项目</h2><p>media-server 是 Medooze 流媒体服务器部分的实现，它用 C++ 实现。由于采用了 C++17 语法，所以需要使用较高版本 GCC 编译器。接下来我们就来看看该如何单独构建 Medooze 的  media-server 项目。</p><blockquote>\n<p>我的构建环境如下，操作系统 Ubuntu18.04 ，编译器版本GCC 7.3.0 。</p>\n</blockquote><h3>1. 安装依赖库</h3><p>由于 Medooze 不仅支持 SFU，而且还支持 MCU 功能，所以它依赖音视频的编解码库和 FFmpeg 库。除此之外，为了与浏览器对接，它还依赖 libssl 库。因此，在构建 media-server 之前我们需要先将这些依赖库安装好。</p><p>安装依赖库的命令如下：</p><pre><code>sudo apt-get install libxmlrpc-c++8-dev\nsudo apt-get install libgsm1-dev\nsudo apt-get install libspeex-dev\nsudo apt-get install libopus-dev\nsudo apt-get install libavresample-dev\nsudo apt-get install libx264-dev\nsudo apt-get install libvpx-dev\nsudo apt-get install libswscale-dev\nsudo apt-get install libavformat-dev\nsudo apt-get install libmp4v2-dev\nsudo apt-get install libgcrypt11-dev\nsudo apt-get install libssl1.0-dev\n</code></pre><p>安装好上面的依赖库后，我们就可以从 GitHub上获取 media-server 项目的代码进行编译了。media-server 项目的源代码地址为：<a href=\"https://github.com/medooze/media-server.git\">https://github.com/medooze/media-server.git</a> 。</p><blockquote>\n<p>需要注意是的，获取代码时，你需要切换到 optimizations 分支。我最开始使用的是 master 分支，但在这个分支上会遇到问题，切换到optimizations<br>\n分支后就没有任何问题了。</p>\n</blockquote><p>media-server代码下载好后，进入到该项目的目录中，然后修改它的配置文件config.mk，修改的内容如下所示：</p><pre><code>...\nSRCDIR = /home/xxx/media-server //注意，media-server的完整路径，后面不能有空格\n...\n</code></pre><p>通过上面的修改，我们就将编译 media-server 的准备工作完成了，接下来的事情就比较简单了。</p><h3>2. 编译common_audio</h3><p>在开始编译 media-server之前，我们还要先将 common_audio 模块编译出来，因为common_audio 是一个公共模块，media-server 依赖于它。</p><p>common_audio 模块是通过 Ninja 编译的，因此我们还需要先安装 ninja-build工具，等ninja-build工具安装好后，执行下面的命令就可以将common_audio 编译好了。</p><pre><code>sudo apt-get install ninja-build\ncd media-server/ext/out/Release\nninja\n</code></pre><h3>3. 编译 media-server</h3><p>有了 common_audio 模块之后，编译 media-server就简单多了，只需要执行下面的命令行即可：</p><pre><code>cd media-server\nmake\n</code></pre><p>至此，media-server 就编译好了。需要注意的是，目前 medooze 的 master 分支代码提交比较频繁，经常会出现编译失败的问题，所以建议你选择稳定的分支进行编译。</p><p>另外，如果你在编译过程中遇到错误，可以按照编译的提示信息进行处理，一般都能将问题解决掉。如果是依赖库缺失的问题，则还需要像上面一样用 <code>apt install</code> 命令将需要的库安装好，再重新对media-server进行编译。</p><h3>4. Ninja</h3><p>在上面的描述中我们看到了 Ninja 命令，它又是干什么的呢？Ninja 与 Make 工具处于同一级别，它们都是从规则文件中读取内容，然后按照规则调用编译工具如 GCC/G++、CLANG/CLANG++ 编译源码文件，只不过 Make 的编译文件是 Makefile，而 Ninja 的编译文件是 build.ninja。</p><p>Ninja 是在 Chrome 浏览器的研发过程中开发出来的，与 GYP一起被研发出来。最早 Chrome 也选择 Make 作为构建工具，然而随着 Chrome 浏览器源码的增长，通过 Make 构建Chrome的时间越来越长，尤其在项目中有超过 30000 个源文件的大型项目中，Make 工具构建项目的时长已经无法让人忍受了。因此 Chrome 工程师开发了一个新的构建工具，即 Ninja。Ninja 的设计哲学是简单、快，因此，它的出现大地的缩短了大型项目的构建时间。</p><p>Ninja 规则文件的文件名以 .ninja 结尾，所以如果我们在项目中看到 .ninja 的文件就可以判断出该项目的构建需要使用 Ninja 工具。Ninja 规则文件一般不需要手写，而是通过生产工具自动生成，像 GYP、CMake 都可以生成 Ninja 规则文件。</p><p>Ninja 的使用非常简单，只要将 Ninja 安装好后，进入到项目目录中，然后运行 Ninja 命令即可。Ninja 运行时默认会在当前目录中查找 build.ninja 文件，如果找到该文件的话，它就按照 build.ninja 中的规则来编译所有的已修改的文件。当然你也可以通过参数指定某个具体的 Ninja 规则文件，如：</p><pre><code>ninja -f xxxxx.ninja\n</code></pre><p>这样，它就可以按 xxxxx.ninja 文件中的规则对源码文件进行编译。</p><h2>小结</h2><p>本文我们以 Media-server-node 为例，首先向你介绍了如何通过 node-gyp 命令构建 Node.js 的Native 插件。通过该讲解，你应该对 Node.js 有了更深的认知，它不光可以让你用 JavaScript 脚本编写服务器程序，而且还可以编写 C/C++的Native插件来增强Node.js的功能。</p><p>另外，我们还介绍了 GYP 规则文件，并以 media-server-node 项目的构建为例，详细讲解了 GYP 文件的一些重要规则及其作用。</p><p>通过本文的学习，我相信你已经对 node-gyp、GYP、Make、Ninja 等工具有了比较清楚的了解，这不仅可以帮你解决Medooze编译经常失败的问题，而且还会对你分析 Medooze 源码起到非常大的帮助作用，因为代码中很多宏的定义以及一些逻辑分支的走向都需要通过Medooze的编译过程进行追踪。所以学习好本文对后面的学习有着至关重要的作用。</p><h2>思考时间</h2><p>知道了 node-gyp、GYP、Make/Ninja 的关系，那你能说说 CMake 在项目编译中的作用以及与 make 的关系吗？</p><p>欢迎在留言区与我分享你的想法，也欢迎你在留言区记录你的思考过程。感谢阅读，如果你觉得这篇文章对你有帮助的话，也欢迎把它分享给更多的朋友。</p><h2>参考</h2><p>GYP规则含义表：<br>\n<img src=\"https://static001.geekbang.org/resource/image/56/7a/56359e4a988c2cfe2acaced69b974b7a.png?wh=1142*927\" alt=\"\"></p><p></p>","neighbors":{"left":{"article_title":"25 | 那些常见的流媒体服务器，你该选择谁？","id":134284},"right":{"article_title":"27 | 让我们一起探索Medooze的具体实现吧（上）","id":136000}},"comments":[{"had_liked":false,"id":271068,"user_name":"piboye","can_delete":false,"product_type":"c1","uid":1066752,"ip_address":"","ucode":"7CFD8712857A85","user_header":"https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg","comment_is_top":false,"comment_ctime":1609392272,"is_pvip":true,"replies":[{"id":"103805","content":"李姓是大户，哈哈","user_name":"作者回复","comment_id":271068,"uid":"1507837","ip_address":"","utype":1,"ctime":1617073673,"user_name_real":"音视频专家-李超"}],"discussion_count":1,"race_medal":0,"score":"5904359568","product_id":100031801,"comment_content":"怎么这么多人叫李工啊😂","like_count":1,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512833,"discussion_content":"李姓是大户，哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617073673,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167935,"user_name":"火哥","can_delete":false,"product_type":"c1","uid":1432264,"ip_address":"","ucode":"13AA65666C1596","user_header":"https://static001.geekbang.org/account/avatar/00/15/da/c8/fc153ea2.jpg","comment_is_top":false,"comment_ctime":1577966511,"is_pvip":false,"replies":[{"id":"66412","content":"它的商业版支持","user_name":"作者回复","comment_id":167935,"uid":"1507837","ip_address":"","utype":1,"ctime":1578897854,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"5872933807","product_id":100031801,"comment_content":"李工，你好，Medooze支持多路合成吗?","like_count":1,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480058,"discussion_content":"它的商业版支持","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578897854,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166702,"user_name":"颜广杰","can_delete":false,"product_type":"c1","uid":1033508,"ip_address":"","ucode":"90FA7789DE7240","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c5/24/dbc4d29d.jpg","comment_is_top":false,"comment_ctime":1577548280,"is_pvip":false,"replies":[{"id":"66416","content":"下载的时候使用git的循环下载，它里边依赖其它子项目，平常的 git clone 方法无法将依赖的子项目代码下载下来，从而导致的问题","user_name":"作者回复","comment_id":166702,"uid":"1507837","ip_address":"","utype":1,"ctime":1578898018,"user_name_real":"garrylee"}],"discussion_count":4,"race_medal":0,"score":"5872515576","product_id":100031801,"comment_content":"老师，我用这个optimizations分支也编译失败，能麻烦帮我看一下吗？<br>root@iZwz9isydglfcdgnqd84a4Z:&#47;home&#47;media-server# make<br>mkdir -p &#47;home&#47;media-server&#47;build&#47;debug<br>mkdir -p &#47;home&#47;media-server&#47;build&#47;debug&#47;test<br>mkdir -p &#47;home&#47;media-server&#47;bin&#47;debug<br>[CXX] debug &#47;home&#47;media-server&#47;src&#47;mcu.cpp<br>In file included from &#47;home&#47;media-server&#47;include&#47;participant.h:14:0,<br>                 from &#47;home&#47;media-server&#47;include&#47;multiconf.h:9,<br>                 from &#47;home&#47;media-server&#47;include&#47;mcu.h:6,<br>                 from &#47;home&#47;media-server&#47;src&#47;mcu.cpp:5:<br>&#47;home&#47;media-server&#47;include&#47;rtpsession.h:10:10: fatal error: srtp2&#47;srtp.h: No such file or directory","like_count":1,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479596,"discussion_content":"下载的时候使用git的循环下载，它里边依赖其它子项目，平常的 git clone 方法无法将依赖的子项目代码下载下来，从而导致的问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578898018,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2023521,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ78AcrbfXwxfgJdqsAe3InbC8aSCY3iaYNdJ4Y2yqe7icgUPdrJ8noXiaTWkwIYu2nULLSxvWTAJS5A/132","nickname":"黄振江","note":"","ucode":"870EB603019E90","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349027,"discussion_content":"添加一个依赖库 sudo apt-get install libsrtp2-dev","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612854264,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2312280,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/9dTx3AVia8Lbx2iaP3dibFvo1ndczZbB8xyumYTkUZiaQibqs3GnMcmsO3t9vC2wYFbLnsPm0Fx6ztndrfynOkOzIEg/132","nickname":"Geek_a7503d","note":"","ucode":"CAB126FE83BFBF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326069,"discussion_content":"后来怎么解决的？？？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605512109,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1225618,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b3/92/3fe36d79.jpg","nickname":"平衡之美","note":"","ucode":"810AE2EAF9918C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":283231,"discussion_content":"git clone --recursive   用的这个 还是没有不行","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592216927,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":145527,"user_name":"一支箭💯¹⁰²⁴","can_delete":false,"product_type":"c1","uid":1367693,"ip_address":"","ucode":"01BE25F9007FBB","user_header":"https://static001.geekbang.org/account/avatar/00/14/de/8d/4c10ba83.jpg","comment_is_top":false,"comment_ctime":1572310955,"is_pvip":false,"replies":[{"id":"56193","content":"没有，你可以到网上搜索我的 mediasoup的课程","user_name":"作者回复","comment_id":145527,"uid":"1507837","ip_address":"","utype":1,"ctime":1572321584,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"5867278251","product_id":100031801,"comment_content":"Media-server-go这个项目有什么教程吗？","like_count":1,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472444,"discussion_content":"没有，你可以到网上搜索我的 mediasoup的课程","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572321584,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135395,"user_name":"Jason","can_delete":false,"product_type":"c1","uid":1053390,"ip_address":"","ucode":"ABB3F1A63E102A","user_header":"https://static001.geekbang.org/account/avatar/00/10/12/ce/a8c8b5e8.jpg","comment_is_top":false,"comment_ctime":1569145004,"is_pvip":false,"replies":[{"id":"51979","content":"谢谢！","user_name":"作者回复","comment_id":135395,"uid":"1507837","ip_address":"","utype":1,"ctime":1569213012,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"5864112300","product_id":100031801,"comment_content":"很赞，不但能学到视频知识，还熟悉了很多工具","like_count":2,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468173,"discussion_content":"谢谢！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569213012,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134026,"user_name":"helloa","can_delete":false,"product_type":"c1","uid":1019045,"ip_address":"","ucode":"A230063B5998B8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/a5/e0d96e36.jpg","comment_is_top":false,"comment_ctime":1568723148,"is_pvip":true,"replies":[{"id":"51461","content":"medooze是WebRTC流媒体服务器, 所有使用 WebRTC的终端都可以与它进行连接","user_name":"作者回复","comment_id":134026,"uid":"1507837","ip_address":"","utype":1,"ctime":1568779597,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"5863690444","product_id":100031801,"comment_content":"medooze支持手机吗？","like_count":2,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467588,"discussion_content":"medooze是WebRTC流媒体服务器, 所有使用 WebRTC的终端都可以与它进行连接","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568779597,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":293783,"user_name":"Geek_82d1fd","can_delete":false,"product_type":"c1","uid":1780653,"ip_address":"","ucode":"642130016EBE1D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJLAxia7JictXmRQ02VwuibKOpib5bMcWbQHZeeQhsV17KeGh5u7ySyibgMVLwcoqCA3ZiayI3dLaVOjibRg/132","comment_is_top":false,"comment_ctime":1621554699,"is_pvip":false,"replies":[{"id":"108007","content":"我一般直接用gdb,我想做服务端开发的同学对它都不陌生","user_name":"作者回复","comment_id":293783,"uid":"1507837","ip_address":"","utype":1,"ctime":1623579979,"user_name_real":"音视频专家-李超"}],"discussion_count":1,"race_medal":0,"score":"1621554699","product_id":100031801,"comment_content":"老师，medooze有没有什么集成开发工具可以断点调试","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520358,"discussion_content":"我一般直接用gdb,我想做服务端开发的同学对它都不陌生","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623579979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289711,"user_name":"阿良","can_delete":false,"product_type":"c1","uid":1969314,"ip_address":"","ucode":"AD8EBD69D38DC0","user_header":"https://static001.geekbang.org/account/avatar/00/1e/0c/a2/14c30983.jpg","comment_is_top":false,"comment_ctime":1619149218,"is_pvip":false,"replies":[{"id":"105420","content":"这个不支持","user_name":"作者回复","comment_id":289711,"uid":"1507837","ip_address":"","utype":1,"ctime":1619870656,"user_name_real":"音视频专家-李超"}],"discussion_count":1,"race_medal":0,"score":"1619149218","product_id":100031801,"comment_content":"老师好，我需要浏览器端的WebRTC与小程序端进行视频通话，小程序端推拉流采用的是rtmp协议(使用的是node-media-server)，请问Medooze能否满足这个需求？","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518998,"discussion_content":"这个不支持","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619870656,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":252297,"user_name":"宇宙之王","can_delete":false,"product_type":"c1","uid":1981915,"ip_address":"","ucode":"5E6C28F8CCFF6D","user_header":"","comment_is_top":false,"comment_ctime":1602227851,"is_pvip":false,"replies":[{"id":"94545","content":"看作者的github，那上边应该有方法","user_name":"作者回复","comment_id":252297,"uid":"1507837","ip_address":"","utype":1,"ctime":1605003932,"user_name_real":"音视频专家-李超"}],"discussion_count":1,"race_medal":0,"score":"1602227851","product_id":100031801,"comment_content":"老师近期有计划整理一套在CentOS下的Medooze部署教程吗？？","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506745,"discussion_content":"看作者的github，那上边应该有方法","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605003932,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":233669,"user_name":"sam","can_delete":false,"product_type":"c1","uid":1988170,"ip_address":"","ucode":"D9DFFABC941E6A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/3giaicn2VaDJicDD7WnaT9mB5VbaF6J7aQszN4W9BVmSWmKoVFxTuN7iaDDgrKhlFp49k1iacvjMYSH3eejVbaH0Vhw/132","comment_is_top":false,"comment_ctime":1594381114,"is_pvip":false,"replies":[{"id":"87924","content":"你直接用 npm install 试试","user_name":"作者回复","comment_id":233669,"uid":"1507837","ip_address":"","utype":1,"ctime":1596023960,"user_name_real":"音视频专家-李超"}],"discussion_count":1,"race_medal":0,"score":"1594381114","product_id":100031801,"comment_content":"在media-server-node目录下执行npm install medooze-media-server --save 出现这个错误<br><br>npm ERR! code ENOSELF<br>npm ERR! Refusing to install package with name &quot;medooze-media-server&quot; under a package<br>npm ERR! also called &quot;medooze-media-server&quot;. Did you name your project the same<br>npm ERR! as the dependency you&#39;re installing?<br>npm ERR! <br>npm ERR! For more information, see:<br>npm ERR!     &lt;https:&#47;&#47;docs.npmjs.com&#47;cli&#47;install#limitations-of-npms-install-algorithm&gt;<br>","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501127,"discussion_content":"你直接用 npm install 试试","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596023960,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226806,"user_name":"平衡之美","can_delete":false,"product_type":"c1","uid":1225618,"ip_address":"","ucode":"810AE2EAF9918C","user_header":"https://static001.geekbang.org/account/avatar/00/12/b3/92/3fe36d79.jpg","comment_is_top":false,"comment_ctime":1592207399,"is_pvip":false,"replies":[{"id":"84428","content":"可以，所有的依赖包自己解决好就行","user_name":"作者回复","comment_id":226806,"uid":"1507837","ip_address":"","utype":1,"ctime":1592877456,"user_name_real":"音视频专家-李超"}],"discussion_count":1,"race_medal":0,"score":"1592207399","product_id":100031801,"comment_content":"老师可以 弄个 centos7 安装的教程吗  我们服务器全部是centos7的","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498371,"discussion_content":"可以，所有的依赖包自己解决好就行","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592877456,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221661,"user_name":"Geek_8a57ad","can_delete":false,"product_type":"c1","uid":2017267,"ip_address":"","ucode":"5CB083054F2267","user_header":"","comment_is_top":false,"comment_ctime":1590560714,"is_pvip":false,"replies":[{"id":"84446","content":"到 github上找找","user_name":"作者回复","comment_id":221661,"uid":"1507837","ip_address":"","utype":1,"ctime":1592879497,"user_name_real":"音视频专家-李超"}],"discussion_count":1,"race_medal":0,"score":"1590560714","product_id":100031801,"comment_content":"medooze有c++客户端sdk吗?","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496529,"discussion_content":"到 github上找找","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592879497,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":190038,"user_name":"taotao","can_delete":false,"product_type":"c1","uid":1904261,"ip_address":"","ucode":"323D4929302C01","user_header":"","comment_is_top":false,"comment_ctime":1584597020,"is_pvip":false,"replies":[{"id":"73326","content":"实际上你可以看一下 Open WebRTC Toolkit， 这个是在licode上修改出来的，应该对你有帮助","user_name":"作者回复","comment_id":190038,"uid":"1507837","ip_address":"","utype":1,"ctime":1584705352,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1584597020","product_id":100031801,"comment_content":"李工，你好 licode mcu 具体怎么配置了，我看源码 没看到支持多路合成了","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487863,"discussion_content":"实际上你可以看一下 Open WebRTC Toolkit， 这个是在licode上修改出来的，应该对你有帮助","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584705352,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":189999,"user_name":"taotao","can_delete":false,"product_type":"c1","uid":1904261,"ip_address":"","ucode":"323D4929302C01","user_header":"","comment_is_top":false,"comment_ctime":1584590703,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584590703","product_id":100031801,"comment_content":"李工，你好 请问licode怎么配置mcu了  我看了代码 没看到它支持多路合成了？","like_count":0},{"had_liked":false,"id":171900,"user_name":"火哥","can_delete":false,"product_type":"c1","uid":1432264,"ip_address":"","ucode":"13AA65666C1596","user_header":"https://static001.geekbang.org/account/avatar/00/15/da/c8/fc153ea2.jpg","comment_is_top":false,"comment_ctime":1579051136,"is_pvip":false,"replies":[{"id":"66756","content":"你可以试试licode，它有两种模式，一种 SFU 模式；一种是 MCU 模式，你试一下 MCU模式看看能不能满足你的需求。它还有一个变种，叫 OWT。","user_name":"作者回复","comment_id":171900,"uid":"1507837","ip_address":"","utype":1,"ctime":1579101567,"user_name_real":"garrylee"}],"discussion_count":2,"race_medal":0,"score":"1579051136","product_id":100031801,"comment_content":"李工，你好，咨询一下，我们现在只是将点对点的两人音视频通话过程合成并录制。也是需要Medooze商业版吗？有没有开源的webrtc流媒体服务架构推荐一下，支持音视频通话&#47;合成&#47;录制.感谢！","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481541,"discussion_content":"你可以试试licode，它有两种模式，一种 SFU 模式；一种是 MCU 模式，你试一下 MCU模式看看能不能满足你的需求。它还有一个变种，叫 OWT。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579101567,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1432264,"avatar":"https://static001.geekbang.org/account/avatar/00/15/da/c8/fc153ea2.jpg","nickname":"火哥","note":"","ucode":"13AA65666C1596","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":136587,"discussion_content":"好的，谢谢!","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579150294,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171884,"user_name":"火哥","can_delete":false,"product_type":"c1","uid":1432264,"ip_address":"","ucode":"13AA65666C1596","user_header":"https://static001.geekbang.org/account/avatar/00/15/da/c8/fc153ea2.jpg","comment_is_top":false,"comment_ctime":1579049910,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1579049910","product_id":100031801,"comment_content":"李工，咨询一下，我们只需要点对点两个人的音视频合成，现在Medooze开源版的支持吗？如果不支持有没有推荐一下支持webrtc并录音录像的流媒体服务框架。感谢！","like_count":0,"discussions":[{"author":{"id":2348753,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/s6UQtwLHUc1xf2xIR2ko0iaibleNGZG2rLxB8eMRmwHu8icIKeCgcXSBMCOVPxEIVZoVfKUHibOyqlvfbviaicUdsTicQ/132","nickname":"Geek_695c45","note":"","ucode":"0E1AC54BA7ED60","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":330968,"discussion_content":"可以试试OpenMCU-ru  支持录音录像的纯MCU, 但还不支持WebRTC","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606740888,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167770,"user_name":"yang","can_delete":false,"product_type":"c1","uid":1227722,"ip_address":"","ucode":"45C1BE2D4AD72B","user_header":"https://static001.geekbang.org/account/avatar/00/12/bb/ca/86d58e40.jpg","comment_is_top":false,"comment_ctime":1577931754,"is_pvip":true,"replies":[{"id":"66415","content":"最好用 ubuntu","user_name":"作者回复","comment_id":167770,"uid":"1507837","ip_address":"","utype":1,"ctime":1578897930,"user_name_real":"garrylee"}],"discussion_count":2,"race_medal":0,"score":"1577931754","product_id":100031801,"comment_content":"呃，坑大了，云上装的是centos7,  官方推荐编译环境ubuntu.一个一个源码下来编译吧。哎.....","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479985,"discussion_content":"最好用 ubuntu","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578897930,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1981915,"avatar":"","nickname":"宇宙之王","note":"","ucode":"5E6C28F8CCFF6D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311532,"discussion_content":"哥们你搞出了吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602388364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":160810,"user_name":"抹染流年听风","can_delete":false,"product_type":"c1","uid":1616471,"ip_address":"","ucode":"136C45201F6107","user_header":"https://static001.geekbang.org/account/avatar/00/18/aa/57/1997dd93.jpg","comment_is_top":false,"comment_ctime":1576036155,"is_pvip":false,"replies":[{"id":"62497","content":"你的操作系统和编译环境太老了吧？","user_name":"作者回复","comment_id":160810,"uid":"1507837","ip_address":"","utype":1,"ctime":1577025930,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1576036155","product_id":100031801,"comment_content":"gyp WARN EACCES user &quot;root&quot; does not have permission to access the dev dir &quot;&#47;root&#47;.node-gyp&#47;10.14.1&quot;<br>gyp WARN EACCES attempting to reinstall using temporary dev dir &quot;&#47;node_modules&#47;medooze-media-server&#47;.node-gyp&quot;<br>gyp WARN install got an error, rolling back install<br>gyp WARN install got an error, rolling back install<br>gyp ERR! configure error <br>gyp ERR! stack Error: EACCES: permission denied, mkdir &#39;&#47;node_modules&#47;medooze-media-server&#47;.node-gyp&#39;<br>gyp ERR! System Linux 3.10.0-693.2.2.el7.x86_64<br>gyp ERR! command &quot;&#47;usr&#47;local&#47;node&#47;bin&#47;node&quot; &quot;&#47;usr&#47;local&#47;node&#47;lib&#47;node_modules&#47;npm&#47;node_modules&#47;node-gyp&#47;bin&#47;node-gyp.js&quot; &quot;configure&quot;<br>gyp ERR! cwd &#47;node_modules&#47;medooze-media-server<br>gyp ERR! node -v v10.14.1<br>gyp ERR! node-gyp -v v3.8.0<br>gyp ERR! not ok <br>npm WARN enoent ENOENT: no such file or directory, open &#39;&#47;package.json&#39;<br>npm WARN !invalid#1 No description<br>npm WARN !invalid#1 No repository field.<br>npm WARN !invalid#1 No README data<br>npm WARN !invalid#1 No license field.<br>npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.1.2 (node_modules&#47;fsevents):<br>npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.1.2: wanted {&quot;os&quot;:&quot;darwin&quot;,&quot;arch&quot;:&quot;any&quot;} (current: {&quot;os&quot;:&quot;linux&quot;,&quot;arch&quot;:&quot;x64&quot;})<br><br>npm ERR! code ELIFECYCLE<br>npm ERR! errno 1<br>npm ERR! medooze-media-server@0.81.1 install: `test -f build&#47;Release&#47;medooze-media-server.node || (node-gyp configure &amp;&amp; node-gyp rebuild --jobs=max)`<br>npm ERR! Exit status 1<br>npm ERR! <br>npm ERR! Failed at the medooze-media-server@0.81.1 install script.<br>npm ERR! This is probably not a problem with npm. There is likely additional logging output above.<br><br>npm ERR! A complete log of this run can be found in:<br>npm ERR!     &#47;root&#47;.npm&#47;_logs&#47;2019-12-11T03_40_52_436Z-debug.log","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477484,"discussion_content":"你的操作系统和编译环境太老了吧？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577025930,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":145581,"user_name":"一支箭💯¹⁰²⁴","can_delete":false,"product_type":"c1","uid":1367693,"ip_address":"","ucode":"01BE25F9007FBB","user_header":"https://static001.geekbang.org/account/avatar/00/14/de/8d/4c10ba83.jpg","comment_is_top":false,"comment_ctime":1572320524,"is_pvip":false,"replies":[{"id":"57406","content":"这你需要问五media-server-go 的作者哈","user_name":"作者回复","comment_id":145581,"uid":"1507837","ip_address":"","utype":1,"ctime":1573192134,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1572320524","product_id":100031801,"comment_content":"golang 版本的 编译后执行报<br># github.com&#47;notedit&#47;media-server-go&#47;wrapper<br>&#47;usr&#47;local&#47;lib&#47;libsrtp2.a(hmac_ossl.o)：在函数‘srtp_hmac_dealloc’中：<br>hmac_ossl.c:(.text+0xd9)：对‘HMAC_CTX_free’未定义的引用<br>&#47;usr&#47;local&#47;lib&#47;libsrtp2.a(hmac_ossl.o)：在函数‘srtp_hmac_alloc’中：<br>hmac_ossl.c:(.text+0x223)：对‘HMAC_CTX_new’未定义的引用<br>collect2: error: ld returned 1 exit status","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472479,"discussion_content":"这你需要问五media-server-go 的作者哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573192134,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144408,"user_name":"Geek_bang","can_delete":false,"product_type":"c1","uid":1602280,"ip_address":"","ucode":"D0BA1B785FA8A8","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er5tJHYf1ica9LdMM5Q9BCfwBL7dPibTPwicbHpuGbicAS3MquenIs7x3VNW5ZbuJhYZBwA84ianfedprA/132","comment_is_top":false,"comment_ctime":1571913326,"is_pvip":false,"replies":[{"id":"57407","content":"应该是你check 的分支不对。这类问题你可以直接在github上向作者提问或者在github原来的问题中找到答案","user_name":"作者回复","comment_id":144408,"uid":"1507837","ip_address":"","utype":1,"ctime":1573192211,"user_name_real":"garrylee"}],"discussion_count":4,"race_medal":0,"score":"1571913326","product_id":100031801,"comment_content":"执行npm install medooze-media-server --save 有遇到这个问题嘛？<br>npm WARN optional Skipping failed optional dependency &#47;chokidar&#47;fsevents:<br>npm WARN notsup Not compatible with your operating system or architecture: fsevents@2.1.1<br>npm WARN enoent ENOENT: no such file or directory, open &#39;&#47;root&#47;workspace&#47;Medooze&#47;test&#47;package.json&#39;<br>npm WARN test No description<br>npm WARN test No repository field.<br>npm WARN test No README data<br>npm WARN test No license field.<br>npm ERR! Linux 4.15.0-20-generic<br>npm ERR! argv &quot;&#47;usr&#47;bin&#47;node&quot; &quot;&#47;usr&#47;bin&#47;npm&quot; &quot;install&quot; &quot;medooze-media-server&quot; &quot;--save&quot;<br>npm ERR! node v8.10.0<br>npm ERR! npm  v3.5.2<br>npm ERR! path &#47;root&#47;workspace&#47;Medooze&#47;test&#47;node_modules&#47;.staging&#47;@types&#47;prop-types-51921f0d<br>npm ERR! code ENOENT<br>npm ERR! errno -2<br>npm ERR! syscall rename<br><br>npm ERR! enoent ENOENT: no such file or directory, rename &#39;&#47;root&#47;workspace&#47;Medooze&#47;test&#47;node_modules&#47;.staging&#47;@types&#47;prop-types-51921f0d&#39; -&gt; &#39;&#47;root&#47;workspace&#47;Medooze&#47;test&#47;node_modules&#47;tap&#47;node_modules&#47;@types&#47;prop-types&#39;<br>npm ERR! enoent ENOENT: no such file or directory, rename &#39;&#47;root&#47;workspace&#47;Medooze&#47;test&#47;node_modules&#47;.staging&#47;@types&#47;prop-types-51921f0d&#39; -&gt; &#39;&#47;root&#47;workspace&#47;Medooze&#47;test&#47;node_modules&#47;tap&#47;node_modules&#47;@types&#47;prop-types&#39;<br>npm ERR! enoent This is most likely not a problem with npm itself<br>npm ERR! enoent and is related to npm not being able to find a file.<br>npm ERR! enoent<br><br>npm ERR! Please include the following file with any support request:<br>npm ERR!     &#47;root&#47;workspace&#47;Medooze&#47;test&#47;npm-debug.log","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471925,"discussion_content":"应该是你check 的分支不对。这类问题你可以直接在github上向作者提问或者在github原来的问题中找到答案","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573192211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1029354,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b4/ea/b3dca4dd.jpg","nickname":"王乐","note":"","ucode":"9261F5F50A8331","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":40309,"discussion_content":"直接使用这条命令，在我的电脑上也有问题，现在我先把文件下载到电脑上，再执行相关操作就可以了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572158634,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1602280,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er5tJHYf1ica9LdMM5Q9BCfwBL7dPibTPwicbHpuGbicAS3MquenIs7x3VNW5ZbuJhYZBwA84ianfedprA/132","nickname":"Geek_bang","note":"","ucode":"D0BA1B785FA8A8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1029354,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b4/ea/b3dca4dd.jpg","nickname":"王乐","note":"","ucode":"9261F5F50A8331","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":41298,"discussion_content":"恩啦，好的我在mac上是可以运行了，刚好方便调试","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572396112,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":40309,"ip_address":""},"score":41298,"extra":""},{"author":{"id":1045903,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f5/8f/dbb3264a.jpg","nickname":"0.0","note":"","ucode":"CD195BF9711B63","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1029354,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b4/ea/b3dca4dd.jpg","nickname":"王乐","note":"","ucode":"9261F5F50A8331","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":186331,"discussion_content":"请问，解决这个是先把代码git clone下来，再安装吗？npm install不就是优先现在代码再安装的吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582677261,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":40309,"ip_address":""},"score":186331,"extra":""}]}]}]}