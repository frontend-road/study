{"id":781412,"title":"03｜探索智能体世界：LangChain与RAG检索增强生成","content":"<p>你好，我是独行。</p><p>上节课我们学习了如何构造提示，让AI大模型高效输出我们需要的内容，相信你已经迫不及待地体验过了，但是你有没有发现AI大模型在使用的过程中是有一些局限的，比如：</p><ol>\n<li><strong>数据的及时性</strong>：大部分AI大模型都是预训练的，拿ChatGPT举例，3.5引擎数据更新时间截止到2022年1月份，4.0引擎数据更新时间截止到2023年12月份，也就是说如果我们问一些最新的信息，大模型是不知道的。</li>\n<li><strong>复杂任务处理</strong>：虽然AI大模型在问答方面表现出色，但它们并不总是能够处理复杂的任务，比如直接编辑或优化Word文档或PDF文件。这些任务通常需要特定的软件工具和用户界面，而大模型主要是基于文本的交互（多模态除外）。</li>\n<li><strong>代码生成与下载</strong>：我们希望大模型根据需求描述生成对应的代码，并提供下载链接，大模型也是不支持的。</li>\n<li><strong>与企业应用场景的集成</strong>：在和企业应用场景打通的时候，我们希望大模型读取关系型数据库里的数据，并根据提示进行任务处理，同样大模型也是不支持的。</li>\n</ol><p>这样的场景非常多，因为大模型的核心能力是<strong>意图理解与文本生成</strong>，而在我们实际应用过程中，输入数据和输出数据不仅仅是纯文本。很多时候我们需要解析用户的输入，比如把Word或PDF文件转化为纯文本，从一个关系型数据库读取数据转化为大模型的输入数据，将大模型的输出内容进行压缩打包并上传至网站供用户下载等等。那这一类任务由谁来做呢？那就是<strong>AI 智能体</strong>，也叫 <strong>AI Agent</strong>。</p><!-- [[[read_end]]] --><h2>AI Agent</h2><p>AI Agent就是以大语言模型为核心控制器的一套代理系统。</p><p>举个形象的例子：如果把人的大脑比作大模型的话，眼睛、耳朵、鼻子、嘴巴、四肢等联合起来叫做Agent，眼睛、耳朵、鼻子感知外界信号作为大脑的输入；嘴巴、四肢等根据大脑处理结果形成反馈进行输出，形成以大脑为核心控制器的一套系统。</p><p><img src=\"https://static001.geekbang.org/resource/image/b6/36/b6651abc9df589fe238fe79e33677a36.png?wh=1065x727\" alt=\"图片\" title=\"图片来源于网络\"></p><p>控制端处于核心地位，承担记忆、思考以及决策制定等基础工作，感知模块则负责接收和处理来自外部环境的多样化信息，如声音、文字、图像、位置等，最后行动模块通过生成文本、API调用、使用工具等方式来执行任务以及改变环境。</p><p>相信通过这样的介绍，你就明白智能体的概念和结构了，接下来我给你介绍一些常见的智能体技术，下面我们统称为Agent。目前比较流行的Agent技术有AutoGen、LangChain等，因为LangChain既是开源的，又提供了一整套围绕大模型的Agent工具，可以说使用起来非常方便，而且从设计到构建、部署、运维等多方面都提供支持，所以下面我们主要介绍一下LangChain的应用场景。</p><h2>LangChain介绍</h2><p>起初，LangChain只是一个技术框架，使用这个框架可以快速开发AI应用程序。这可能是软件开发工程师最容易和AI接触的一个点，因为我们不需要储备太多算法层面的知识，只需要知道如何和模型进行交互，也就是熟练掌握模型暴露的API接口和参数，就可以利用LangChain进行应用开发了。</p><p>LangChain发展到今天，已经不再是一个纯粹的AI应用开发框架，而是成为了一个AI应用程序开发平台，它包含4大组件。</p><ul>\n<li>LangChain：大模型应用开发框架。</li>\n<li>LangSmith：统一的DevOps平台，用于开发、协作、测试、部署和监控大模型应用程序，同时，LangSmith是一套Agent DevOps规范，不仅可以用于LangChain应用程序，还可以用在其他框架下的应用程序中。</li>\n<li>LangServe：部署LangChain应用程序，并提供API管理能力，包含版本回退、升级、数据处理等。</li>\n<li>LangGraph：一个用于使用大模型构建有状态、多参与者应用程序的库，是2024年1月份推出的。</li>\n</ul><p>放到我们传统软件开发场景中，我认为LangChain就类似于SpringCloud；LangSmith类似于Jenkins + Docker + K8s + Prometheus；LangServe类似于API网关；LangGraph类似于Nacos；当然只是简单比拟。</p><p>LangChain可以说是当前最火的AI Agent技术框架，GitHub上拥有超过80k stars，另外使用MIT开源协议，非常友好，自己研究或公司拿来商用都没有问题。</p><p>不过一切还在快速发展中，相信很快就会有更多的技术出来。为什么这么说呢？就拿软件开发举例，现在的开发流程是：开发工程师在IDE（IDEA/Eclipse/VSCode）里编写代码，然后打包部署，测试工程师进行测试，然后发布上线。</p><p>目前看，大模型已经具备代码编写的能力，理想场景不太可能是由大模型把代码写好，我们下载到本地，用IDE打开，然后打包部署、测试，这说白了只是替换了目前代码编写的场景。我觉得如果AI颠覆软件开发行业，一定是从编码到测试，再到部署一整套流程的颠覆。到那个时候，我们的开发流程可能就变成我上节课讲的那样了。</p><p><img src=\"https://static001.geekbang.org/resource/image/fa/ba/faefa1f183c3789f6abc11fb43416bba.png?wh=2516x1086\" alt=\"\"></p><p>当然，也必须要配套相关的技术框架、管理工具来支撑，比如Prompt管理是否还会用Git？会不会有另一套类似于Git用来管理Prompt的工具？代码还会不会存在？大模型可否直接生成可执行程序？还会有Jenkins吗？</p><p>你可以畅想一下，未来一整套的技术架构都有可能会被颠覆。</p><h2>LangChain技术架构</h2><p>接下来我们看一下目前LangChain整个平台技术体系，不包含LangGraph，LangChain框架本身包含三大模块。</p><ul>\n<li>LangChain-Core：基础抽象和LangChain表达式语言。</li>\n<li>LangChain-Community：第三方集成。</li>\n<li>LangChain：构成应用程序认知架构的链、代理和检索策略。</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/12/a4/1280f740f0cd3e71b15bd7e9c0042da4.png?wh=1246x1273\" alt=\"图片\" title=\"图片来源于官方网站\"></p><p>下面我们介绍一下其中的重要模块。</p><h4>模型I/O（Model I/O）</h4><p>模型I/O模块主要由三部分组成：格式化（Format）、预测（Predict）、解析（Parse）。顾名思议，模型I/O主要是和大模型打交道，前面我们提到过，大模型其实可以理解为只接受<strong>文本输入</strong>和<strong>文本输出的模型</strong>。</p><p><span class=\"reference\">此处注意⚠️：目前LangChain里的大模型是纯文本补全模型，不包含多模态模型。</span></p><p>在把数据输入到AI大模型之前，不论它来源于搜索引擎、向量数据库还是第三方系统接口，都必须先对数据进行格式化，转化成大模型能理解的格式。这就是格式化部分做的事情。</p><p><img src=\"https://static001.geekbang.org/resource/image/cf/26/cf91ecc5f16e56781ca47aee521a1626.png?wh=4000x1536\" alt=\"图片\" title=\"图片来源于官方网站\"></p><p>预测是指LangChain原生支持的丰富的API，可以实现对各个大模型的调用。</p><p>解析主要是指对大模型返回的文本内容的解析，随着多模态模型的日益成熟，相信很快就会实现对多模态模型输出结果的解析。</p><h4>Retrieval</h4><p>Retrieval可以翻译成检索、抽取，就是从各种数据源中将数据抓取过来，进行词向量化Embedding（Word Embedding）、向量数据存储、向量数据检索的过程。你可以结合图片来理解整个过程。</p><p><img src=\"https://static001.geekbang.org/resource/image/7b/dc/7bff32c53995cd56850d7ae23ca838dc.png?wh=4256x1472\" alt=\"图片\" title=\"图片来源于官方网站\"></p><p>我会在后面的实战过程中，通过代码来演示各个阶段的含义。</p><h4>Agents</h4><p>Agents（代理）就是指实现具体任务的模块，比如从某个第三方接口获取数据，用来作为大模型的输入，那么获取数据这个模块就可以称为XXX代理，LangChain本身支持多个类型的代理，当然也可以根据实际需要进行自定义。</p><h4>Chains</h4><p>链条就是各种各样的顺序调用，类似于Linux命令里的管道。可以是文件处理链条、SQL查询链条、搜索链条等等。LangChain技术体系里链条主要通过LCEL（LangChain表达式）实现。既然是主要使用LCEL实现，那说明还有一部分不是使用LCEL实现的链条，也就是LegacyChain，一些底层的链条，没有通过LCEL实现。</p><h4>Memory</h4><p>内存是指模型的一些输入和输出，包含历史对话信息，可以放入缓存，提升性能，使用流程和我们软件开发里缓存的使用一样，在执行核心逻辑之前先查询缓存，如果查询到就可以直接使用，在执行完核心逻辑，返回给用户前，将内容写入缓存，方便后面使用。</p><p><img src=\"https://static001.geekbang.org/resource/image/2a/2e/2ab8dyybe6e271b02ceec0c785d9fc2e.png?wh=2880x1472\" alt=\"图片\"></p><h4>Callbacks</h4><p>LangChain针对各个组件提供回调机制，包括链、模型、代理、工具等。回调的原理和普通开发语言里的回调差不多，就是在某些事件执行后唤起提前设定好的调用。LangChain回调有两种：构造函数回调和请求回调。构造函数回调只适用于对象本身，而请求回调适用于对象本身及其所有子对象。</p><h4>LCEL</h4><p>LangChain表达式，前面我们介绍Chains（链）的时候讲过，LCEL是用来构建Chains的，我们看官方的一个例子。</p><pre><code class=\"language-python\">from langchain_core.output_parsers import StrOutputParser\nfrom langchain_core.prompts import ChatPromptTemplate\nfrom langchain_openai import ChatOpenAI\n\nprompt = ChatPromptTemplate.from_template(\"tell me a short joke about {topic}\")\nmodel = ChatOpenAI(model=\"gpt-4\")\noutput_parser = StrOutputParser()\n\nchain = prompt | model | output_parser\n\nchain.invoke({\"topic\": \"ice cream\"})\n</code></pre><p>就像我前面讲到的一样，这里的链和Linux里的管道很像，通过特殊字符 <code>|</code> 来连接不同组件，构成复杂链条，以实现特定的功能。</p><pre><code class=\"language-python\">chain = prompt | model | output_parser\n</code></pre><p>每个组件的输出会作为下一个组件的输入，直到最后一个组件执行完。当然，我们也可以通过LCEL将多个链关联在一起。</p><pre><code class=\"language-python\">chain1 = prompt1 | model | StrOutputParser()\nchain2 = (\n    {\"city\": chain1, \"language\": itemgetter(\"language\")}\n    | prompt2\n    | model\n    | StrOutputParser()\n)\nchain2.invoke({\"person\": \"obama\", \"language\": \"spanish\"})\n</code></pre><p>以上就是LangChain技术体系里比较重要的几个核心概念，整个设计思想还是比较简单的，你只要记住两个核心思想。</p><ol>\n<li>大模型是核心控制器，所有的操作都是围绕大模型的输入和输出在进行。</li>\n<li>链的概念，可以将一系列组件串起来进行功能叠加，这对于逻辑的抽象和组件复用是非常关键的。</li>\n</ol><p>理解这两个思想，玩转LangChain就不难了，下面我举一个RAG的例子来说明Agent的使用流程。</p><h2>Agent使用案例——RAG</h2><p>就像前面讲的，大模型是基于预训练的，一般大模型训练周期1～3个月，因为成本过高，所以大模型注定不可能频繁更新知识。正是这个训练周期的问题，导致大模型掌握的知识基本上都是滞后的，GPT-4的知识更新时间是2023年12月份，如果我们想要大模型能够理解实时数据，或者把企业内部数据喂给大模型进行推理，我们必须进行检索增强，也就是常说的<strong>RAG，检索增强生成</strong>。</p><p>就拿下面这个案例来说吧，我们可以通过RAG技术让大模型支持最新的知识索引。我们先来看一下技术流程图。</p><p><img src=\"https://static001.geekbang.org/resource/image/4f/e8/4fe9d7acd1782e033927c46c5c1a48e8.png?wh=2452x1038\" alt=\"\"></p><p>任务一：先通过网络爬虫，爬取大量的信息，这个和搜索引擎数据爬取过程一样，当然这里不涉及PR（Page Rank），只是纯粹的知识爬取，并向量化存储，为了保障我们有最新的数据。</p><p>任务二：用户提问时，先把问题向量化，然后在向量库里检索，将检索到的信息构建成提示，喂给大模型，大模型处理完进行输出。</p><p>整个过程涉及两个新的概念，一个叫<strong>向量化</strong>，一个叫<strong>向量存储</strong>，你先简单理解下，向量化就是将语言通过数学的方式进行表达，比如男人这个词，通过某种模型向量化后就变成了类似于下面这样的向量数据：</p><pre><code class=\"language-plain\">[0.5,−1.2,0.3,−0.4,0.1,−0.8,1.7,0.6,−1.1,0.9]\n</code></pre><p><span class=\"reference\">注意：此处只是举例，实际使用过程中男人这个词生成的向量数据取决于我们使用的 Embedding模型，这个知识我们会在后面的内容中讲解。</span></p><p>向量存储就是将向量化后的数据存储在向量数据库里，常见的向量数据库有Faiss、Milvus，我们会在后面的实战部分用到Faiss。</p><p>通过任务一、二的结合，大模型就可以使用最新的知识进行推理了。当然不一定只有这一种思路，比如我们不采取预先爬取最新的数据的方式，而是实时调用搜索引擎的接口，获取最新数据，然后向量化后喂给大模型，同样也可以获取结果。在实际的项目中，要综合成本、性能等多方面因素去选择最合适的技术方案。</p><h2>小结</h2><p>这节课我们详细学习了智能体以及LangChain技术体系。目前看来，智能体很有可能在未来一段时间内成为AI发展的一个重要方向。因为大模型实际上是大厂商的游戏（除非未来开发出能够低成本训练和推理的大模型），而智能体不一样，普通玩家一样可以入局，而且现在基本上是一片蓝海。</p><p><img src=\"https://static001.geekbang.org/resource/image/88/7f/889665dc93eb55689bfb5b88c54e3a7f.png?wh=2268x1370\" alt=\"图片\"></p><h2>思考题</h2><p>从软件开发及架构的思路去看，LangChain未来还有可能增加什么组件？你可以对比Java技术体系来思考一下。欢迎你把你思考后的结果分享到评论区，也欢迎你把这节课的内容分享给需要的朋友，我们下节课再见。</p><p><a href=\"https://jinshuju.net/f/D8y8pw\">戳此加入课程交流群</a></p>","comments":[{"had_liked":false,"id":391281,"user_name":"zMansi","can_delete":false,"product_type":"c1","uid":1233480,"ip_address":"广东","ucode":"AFD8B718484FE7","user_header":"https://static001.geekbang.org/account/avatar/00/12/d2/48/7dbd183b.jpg","comment_is_top":false,"comment_ctime":1717811375,"is_pvip":false,"replies":[{"id":142296,"content":"各有优点，langchain适合代码级别的集成，dify界面做的比较好。实际生产环境中，我们最终肯定也是需要界面的，如果用langchain，我们需要自己做相关的界面，用dify的话，有些界面就不需要做了，比如模型的对接，知识库、知识的管理等等。同时，dify是国产的，这一点很重要，产品的交互方面符合国人的使用习惯。最后，dify是商业化产品，有全职人员进行开发，langchain是纯开源产品，质量和稳定性方面可能会稍微欠缺一些。","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1717818630,"ip_address":"浙江","comment_id":391281,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100770601,"comment_content":"老师langchain和dify的在团队实践中如何选择，dify似乎有比较友好的操作界面，langchain似乎对嵌入企业原有流程更加灵活，那么这两个老师有什么看法","like_count":10,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646378,"discussion_content":"各有优点，langchain适合代码级别的集成，dify界面做的比较好。实际生产环境中，我们最终肯定也是需要界面的，如果用langchain，我们需要自己做相关的界面，用dify的话，有些界面就不需要做了，比如模型的对接，知识库、知识的管理等等。同时，dify是国产的，这一点很重要，产品的交互方面符合国人的使用习惯。最后，dify是商业化产品，有全职人员进行开发，langchain是纯开源产品，质量和稳定性方面可能会稍微欠缺一些。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1717818630,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":1,"child_discussions":[{"author":{"id":1028267,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b0/ab/5e1c1456.jpg","nickname":"思遥","note":"","ucode":"587E05EEBBA2E4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":650722,"discussion_content":"langchain也是公司在维护，还融了几千万美金","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1725513835,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":646378,"ip_address":"北京","group_id":0},"score":650722,"extra":""}]}]},{"had_liked":false,"id":391345,"user_name":"风轻扬","can_delete":false,"product_type":"c1","uid":1542987,"ip_address":"河北","ucode":"DB972F2DF059C4","user_header":"https://static001.geekbang.org/account/avatar/00/17/8b/4b/15ab499a.jpg","comment_is_top":false,"comment_ctime":1718066751,"is_pvip":false,"replies":[{"id":142327,"content":"加油！可以优先看dify，dify是国产的，界面比较友好，另外像Prompt和大模型微调也可以慢慢尝试下，都有机会。","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1718086044,"ip_address":"浙江","comment_id":391345,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100770601,"comment_content":"抱着了解的想法看了免费的前4节，现在看收获很大，了解到了一个很重要的概念，AI Agent。一直以来，我对AI都是持观望的态度，感觉自己只是一个普通的业务开发，没有能力参与到AI行业。感觉老师为普通开发者打开了一条新的发展道路，普通开发者也是有机会的。打算深入了解一下langchain和dify，这可能是未来5年甚至10年的工作机会","like_count":6,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646483,"discussion_content":"加油！可以优先看dify，dify是国产的，界面比较友好，另外像Prompt和大模型微调也可以慢慢尝试下，都有机会。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1718086044,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391592,"user_name":"光锥1066","can_delete":false,"product_type":"c1","uid":2402779,"ip_address":"浙江","ucode":"986DFB3C469695","user_header":"https://static001.geekbang.org/account/avatar/00/24/a9/db/db6f9f17.jpg","comment_is_top":false,"comment_ctime":1718612430,"is_pvip":false,"replies":[{"id":142398,"content":"如果走知识库的话，其实就是检索，和传统关键字检索的区别在于，这里我们说的是向量检索，更接近真实意思。输出能否符合预期，要不断调试、调整，文本向量化要先分词，所以有一定的可能性会匹配不上。","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1718690652,"ip_address":"浙江","comment_id":391592,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100770601,"comment_content":"老师想问一下RAG的那个流程，模型没有被这些最新数据或者企业内部数据训练过，怎么能保证模型的输出一定符合预期呢","like_count":3,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646757,"discussion_content":"如果走知识库的话，其实就是检索，和传统关键字检索的区别在于，这里我们说的是向量检索，更接近真实意思。输出能否符合预期，要不断调试、调整，文本向量化要先分词，所以有一定的可能性会匹配不上。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1718690652,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2402779,"avatar":"https://static001.geekbang.org/account/avatar/00/24/a9/db/db6f9f17.jpg","nickname":"光锥1066","note":"","ucode":"986DFB3C469695","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646728,"discussion_content":"我理解了，利用的是推理能力而不是记忆能力","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1718617146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1061748,"avatar":"https://static001.geekbang.org/account/avatar/00/10/33/74/d9d143fa.jpg","nickname":"silentyears","note":"","ucode":"6E137BFEB874CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2402779,"avatar":"https://static001.geekbang.org/account/avatar/00/24/a9/db/db6f9f17.jpg","nickname":"光锥1066","note":"","ucode":"986DFB3C469695","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646886,"discussion_content":"走知识库其实是检索？这是指新加入的知识仅仅是搜索最相关的给出结果，而和经过旧知识训练过的大模型给出的结果的方式存在区别吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1718957120,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":646728,"ip_address":"北京","group_id":0},"score":646886,"extra":""}]}]},{"had_liked":false,"id":391290,"user_name":"hudy_coco","can_delete":false,"product_type":"c1","uid":2943917,"ip_address":"浙江","ucode":"181CED02D4662B","user_header":"https://static001.geekbang.org/account/avatar/00/2c/eb/ad/20b60d15.jpg","comment_is_top":false,"comment_ctime":1717838827,"is_pvip":false,"replies":[{"id":142316,"content":"langchain比较火，其实归功于agent概念的火爆，实践的时候能否用得到，这是个问题，原因是即便langchain支持几百种工具调用，但是现实情况是每家企业需要的工具就几种，大部分用不到。我们公司在落地的时候用了dify，也自己手写了一部分agent。所以目前的课程里只介绍了langchain入门，后面会不会增加目前还不确定。","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1717981298,"ip_address":"浙江","comment_id":391290,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100770601,"comment_content":"老师，现在市场上应用最多的是langchain吗，后面课程会不会讲一点实战案例","like_count":2,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646438,"discussion_content":"langchain比较火，其实归功于agent概念的火爆，实践的时候能否用得到，这是个问题，原因是即便langchain支持几百种工具调用，但是现实情况是每家企业需要的工具就几种，大部分用不到。我们公司在落地的时候用了dify，也自己手写了一部分agent。所以目前的课程里只介绍了langchain入门，后面会不会增加目前还不确定。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1717981298,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1619751,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ1rIbtzMltwtkdOgyk7nxzQOZtocVBwuAsZbUgY2gZHfnds4Onj6Zcxcba7fPI1qyHcb9jzJibZqA/132","nickname":"Geek_9mqneh","note":"","ucode":"C4FC9537DA87EB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":647173,"discussion_content":"dify 使用需要改造吗？现在dify部署只能支持单机docker部署，依赖很多存储组建等；这个有什么办法上云吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1719632887,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2257078,"avatar":"https://static001.geekbang.org/account/avatar/00/22/70/b6/3fc5e622.jpg","nickname":"hugo","note":"","ucode":"D9370FE50AA408","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646484,"discussion_content":"老师，有案例代码可供学习吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1718091416,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":395289,"user_name":"Geek_5203b4","can_delete":false,"product_type":"c1","uid":3905342,"ip_address":"江苏","ucode":"110A14CF86181D","user_header":"","comment_is_top":false,"comment_ctime":1730099624,"is_pvip":false,"replies":[{"id":143651,"content":"现在基本都是这么做的，可以解决知识更新的问题。","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1731470693,"ip_address":"浙江","comment_id":395289,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100770601,"comment_content":"RAG ，文心一言似乎就是这么做的。每次键入问题，首先先去网络上查询数据，再转换成向量喂给大模型作为提示，现在理解了。","like_count":1,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":653816,"discussion_content":"现在基本都是这么做的，可以解决知识更新的问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1731470693,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391989,"user_name":"Geek_frank","can_delete":false,"product_type":"c1","uid":1685433,"ip_address":"上海","ucode":"534D46C2D1EFF5","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erG6I79WlHDjs51JOff9GBibD4Fh2PhITQMvmh2aTUVzH2BKia1tFLLoQr7VFeZddywwRoZlVUyhDDQ/132","comment_is_top":false,"comment_ctime":1719622907,"is_pvip":false,"replies":[{"id":142511,"content":"没错，langchain的发展可以参考传统软件框架的发展","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1719816219,"ip_address":"浙江","comment_id":391989,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100770601,"comment_content":"打卡第三课。\n个人思考，我觉得langchain已经把组件的大框框给框定的差不多了，核心开发框架，运维部署监控框架，以及服务治理框架。要说可能缺少的可以单独拎出来一套自动化测试框架。而且目前的组件是一个大集成，以后可能会把组件细分。 比如retrieval模块可以单独抽出来，方便以后扩展支持多模态的内容录入以及检索。 因为每个模块发展到后来可能都会变得越来越复杂。这也正是以前传统软件框架发展的规律","like_count":1,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":647289,"discussion_content":"没错，langchain的发展可以参考传统软件框架的发展","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1719816219,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391968,"user_name":"文敦复","can_delete":false,"product_type":"c1","uid":1195258,"ip_address":"四川","ucode":"B8F4A6BD5D7805","user_header":"https://static001.geekbang.org/account/avatar/00/12/3c/fa/e2990931.jpg","comment_is_top":false,"comment_ctime":1719542059,"is_pvip":false,"replies":[{"id":142481,"content":"需要你自己确定，要么使用模型推理，要么使用知识库，结合使用也可以，需要你自己看效果来确定\n","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1719565411,"ip_address":"浙江","comment_id":391968,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100770601,"comment_content":"新手提问：在使用RAG模型处理特定问题时，如果我整合的知识与模型预先训练的知识发生冲突，应该如何处理？更具体地说，我们应该依赖模型原有的知识还是优先使用自建的知识库？","like_count":1,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":647157,"discussion_content":"需要你自己确定，要么使用模型推理，要么使用知识库，结合使用也可以，需要你自己看效果来确定\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1719565411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391804,"user_name":"一点点就好","can_delete":false,"product_type":"c1","uid":1055913,"ip_address":"广东","ucode":"3082B6E93FA7D8","user_header":"https://static001.geekbang.org/account/avatar/00/10/1c/a9/49ffc8c7.jpg","comment_is_top":false,"comment_ctime":1719124842,"is_pvip":false,"replies":[{"id":142453,"content":"你可以发一下你的案例，我帮你梳理下，目前没有计划弄一个案例讲解，文中有提到一些通用的场景比如PDF处理这些","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1719195628,"ip_address":"浙江","comment_id":391804,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100770601,"comment_content":"对划分哪些是Agent 指责，哪些是大模型职责，可以用一个案例讲解一下，一个现有业务系统怎么改变成自己的Agent 吗","like_count":1,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646972,"discussion_content":"你可以发一下你的案例，我帮你梳理下，目前没有计划弄一个案例讲解，文中有提到一些通用的场景比如PDF处理这些","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1719195629,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":1,"child_discussions":[{"author":{"id":1195258,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3c/fa/e2990931.jpg","nickname":"文敦复","note":"","ucode":"B8F4A6BD5D7805","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":647137,"discussion_content":"老师，强烈建议 弄一个案例讲解","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1719541823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":646972,"ip_address":"四川","group_id":0},"score":647137,"extra":""}]}]},{"had_liked":false,"id":391392,"user_name":"张申傲","can_delete":false,"product_type":"c1","uid":1182372,"ip_address":"北京","ucode":"22D46BC529BA8A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0a/a4/828a431f.jpg","comment_is_top":false,"comment_ctime":1718177812,"is_pvip":false,"replies":[{"id":142343,"content":"我觉得有可能，我一直把langchain的技术体系参考Java技术体系，在Java体系里有的东西，在Agent领域都会有","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1718192826,"ip_address":"浙江","comment_id":391392,"utype":1}],"discussion_count":1,"race_medal":2,"score":2,"product_id":100770601,"comment_content":"第3讲打卡~\n个人思考：未来LangChain是否有可能扩展数据存储模块，例如LangStore，统一封装对于不同存储引擎的存储、索引和查询相关功能，如搜索场景的ES或者向量数据库Milvus。","like_count":1,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646553,"discussion_content":"我觉得有可能，我一直把langchain的技术体系参考Java技术体系，在Java体系里有的东西，在Agent领域都会有","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1718192826,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391346,"user_name":"mmm","can_delete":false,"product_type":"c1","uid":1204710,"ip_address":"天津","ucode":"D825372FBC8297","user_header":"https://static001.geekbang.org/account/avatar/00/12/61/e6/fedd20dc.jpg","comment_is_top":false,"comment_ctime":1718068634,"is_pvip":false,"replies":[{"id":142326,"content":"一般来说，模型直接生成的都是纯文本（多模态除外），你说的路径规划这些action大概率是经过处理的，学习路径还是要放在实战中，你需要先研究场景，然后确定哪部分是需要大模型做的，哪部分可能是传统小模型，哪部分是agent来做，分析完技术方案就有了","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1718072861,"ip_address":"浙江","comment_id":391346,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100770601,"comment_content":"老师，请问模型通过理解指令并决策后输出的结果是什么形式的，比如在自动驾驶或机器人场景，路径规划，方向盘或电机转角，力矩这些action是模型直接生成的，还是agent对模型输出进行加工处理后得到的，另外这方面的知识有什么途径可以获取和学习吗？","like_count":1,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646477,"discussion_content":"一般来说，模型直接生成的都是纯文本（多模态除外），你说的路径规划这些action大概率是经过处理的，学习路径还是要放在实战中，你需要先研究场景，然后确定哪部分是需要大模型做的，哪部分可能是传统小模型，哪部分是agent来做，分析完技术方案就有了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1718072861,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":395499,"user_name":"like life","can_delete":false,"product_type":"c1","uid":3017830,"ip_address":"湖南","ucode":"8D82CD400FC155","user_header":"https://static001.geekbang.org/account/avatar/00/2e/0c/66/51161385.jpg","comment_is_top":false,"comment_ctime":1730984908,"is_pvip":false,"replies":[{"id":143655,"content":"是的，把传统开发这一套都搬到大模型领域","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1731470830,"ip_address":"浙江","comment_id":395499,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100770601,"comment_content":"LangChain 未来还有可能增加分布式大模型调度组件、支持集群部署、负载均衡😂","like_count":0,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":653820,"discussion_content":"是的，把传统开发这一套都搬到大模型领域","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1731470830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391350,"user_name":"mmm","can_delete":false,"product_type":"c1","uid":1204710,"ip_address":"天津","ucode":"D825372FBC8297","user_header":"https://static001.geekbang.org/account/avatar/00/12/61/e6/fedd20dc.jpg","comment_is_top":false,"comment_ctime":1718072345,"is_pvip":false,"replies":[{"id":142333,"content":"适用的，除了纯文本生成这样的场景，一般应用场景都需要Agent辅助的","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1718162132,"ip_address":"浙江","comment_id":391350,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100770601,"comment_content":"目前这些ai agent的工具在多模态和端侧嵌入式场景适用吗","like_count":0,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646520,"discussion_content":"适用的，除了纯文本生成这样的场景，一般应用场景都需要Agent辅助的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1718162132,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]}]}