{"id":310838,"title":"39 | Redis 6.0çš„æ–°ç‰¹æ€§ï¼šå¤šçº¿ç¨‹ã€å®¢æˆ·ç«¯ç¼“å­˜ä¸å®‰å…¨","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯è’‹å¾·é’§ã€‚</p><p>Rediså®˜æ–¹åœ¨ä»Šå¹´5æœˆä»½æ­£å¼æ¨å‡ºäº†6.0ç‰ˆæœ¬ï¼Œè¿™ä¸ªç‰ˆæœ¬ä¸­æœ‰å¾ˆå¤šçš„æ–°ç‰¹æ€§ã€‚æ‰€ä»¥ï¼Œ6.0åˆšåˆšæ¨å‡ºï¼Œå°±å—åˆ°äº†ä¸šç•Œçš„å¹¿æ³›å…³æ³¨ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨è¯¾ç¨‹çš„æœ€åï¼Œæˆ‘ç‰¹æ„å®‰æ’äº†è¿™èŠ‚è¯¾ï¼Œæƒ³æ¥å’Œä½ èŠèŠRedis 6.0ä¸­çš„å‡ ä¸ªå…³é”®æ–°ç‰¹æ€§ï¼Œåˆ†åˆ«æ˜¯é¢å‘ç½‘ç»œå¤„ç†çš„å¤šIOçº¿ç¨‹ã€å®¢æˆ·ç«¯ç¼“å­˜ã€ç»†ç²’åº¦çš„æƒé™æ§åˆ¶ï¼Œä»¥åŠRESP 3åè®®çš„ä½¿ç”¨ã€‚</p><p>å…¶ä¸­ï¼Œé¢å‘ç½‘ç»œå¤„ç†çš„å¤šIOçº¿ç¨‹å¯ä»¥æé«˜ç½‘ç»œè¯·æ±‚å¤„ç†çš„é€Ÿåº¦ï¼Œè€Œå®¢æˆ·ç«¯ç¼“å­˜å¯ä»¥è®©åº”ç”¨ç›´æ¥åœ¨å®¢æˆ·ç«¯æœ¬åœ°è¯»å–æ•°æ®ï¼Œè¿™ä¸¤ä¸ªç‰¹æ€§å¯ä»¥æå‡Redisçš„æ€§èƒ½ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œç»†ç²’åº¦æƒé™æ§åˆ¶è®©Rediså¯ä»¥æŒ‰ç…§å‘½ä»¤ç²’åº¦æ§åˆ¶ä¸åŒç”¨æˆ·çš„è®¿é—®æƒé™ï¼ŒåŠ å¼ºäº†Redisçš„å®‰å…¨ä¿æŠ¤ã€‚RESP 3åè®®åˆ™å¢å¼ºå®¢æˆ·ç«¯çš„åŠŸèƒ½ï¼Œå¯ä»¥è®©åº”ç”¨æ›´åŠ æ–¹ä¾¿åœ°ä½¿ç”¨Redisçš„ä¸åŒæ•°æ®ç±»å‹ã€‚</p><p>åªæœ‰è¯¦ç»†æŒæ¡äº†è¿™äº›ç‰¹æ€§çš„åŸç†ï¼Œä½ æ‰èƒ½æ›´å¥½åœ°åˆ¤æ–­æ˜¯å¦ä½¿ç”¨6.0ç‰ˆæœ¬ã€‚å¦‚æœä½ å·²ç»åœ¨ä½¿ç”¨6.0äº†ï¼Œä¹Ÿå¯ä»¥çœ‹çœ‹æ€ä¹ˆæ‰èƒ½ç”¨å¾—æ›´å¥½ï¼Œå°‘è¸©å‘ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥äº†è§£ä¸‹6.0ç‰ˆæœ¬ä¸­æ–°å‡ºçš„å¤šçº¿ç¨‹ç‰¹æ€§ã€‚</p><h2>ä»å•çº¿ç¨‹å¤„ç†ç½‘ç»œè¯·æ±‚åˆ°å¤šçº¿ç¨‹å¤„ç†</h2><p><strong>åœ¨Redis 6.0ä¸­ï¼Œéå¸¸å—å…³æ³¨çš„ç¬¬ä¸€ä¸ªæ–°ç‰¹æ€§å°±æ˜¯å¤šçº¿ç¨‹</strong>ã€‚è¿™æ˜¯å› ä¸ºï¼ŒRedisä¸€ç›´è¢«å¤§å®¶ç†ŸçŸ¥çš„å°±æ˜¯å®ƒçš„å•çº¿ç¨‹æ¶æ„ï¼Œè™½ç„¶æœ‰äº›å‘½ä»¤æ“ä½œå¯ä»¥ç”¨åå°çº¿ç¨‹æˆ–å­è¿›ç¨‹æ‰§è¡Œï¼ˆæ¯”å¦‚æ•°æ®åˆ é™¤ã€å¿«ç…§ç”Ÿæˆã€AOFé‡å†™ï¼‰ï¼Œä½†æ˜¯ï¼Œä»ç½‘ç»œIOå¤„ç†åˆ°å®é™…çš„è¯»å†™å‘½ä»¤å¤„ç†ï¼Œéƒ½æ˜¯ç”±å•ä¸ªçº¿ç¨‹å®Œæˆçš„ã€‚</p><!-- [[[read_end]]] --><p>éšç€ç½‘ç»œç¡¬ä»¶çš„æ€§èƒ½æå‡ï¼ŒRedisçš„æ€§èƒ½ç“¶é¢ˆæœ‰æ—¶ä¼šå‡ºç°åœ¨ç½‘ç»œIOçš„å¤„ç†ä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>å•ä¸ªä¸»çº¿ç¨‹å¤„ç†ç½‘ç»œè¯·æ±‚çš„é€Ÿåº¦è·Ÿä¸ä¸Šåº•å±‚ç½‘ç»œç¡¬ä»¶çš„é€Ÿåº¦</strong>ã€‚</p><p>ä¸ºäº†åº”å¯¹è¿™ä¸ªé—®é¢˜ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§æ–¹æ³•ã€‚</p><p>ç¬¬ä¸€ç§æ–¹æ³•æ˜¯ï¼Œç”¨ç”¨æˆ·æ€ç½‘ç»œåè®®æ ˆï¼ˆä¾‹å¦‚DPDKï¼‰å–ä»£å†…æ ¸ç½‘ç»œåè®®æ ˆï¼Œè®©ç½‘ç»œè¯·æ±‚çš„å¤„ç†ä¸ç”¨åœ¨å†…æ ¸é‡Œæ‰§è¡Œï¼Œç›´æ¥åœ¨ç”¨æˆ·æ€å®Œæˆå¤„ç†å°±è¡Œã€‚</p><p>å¯¹äºé«˜æ€§èƒ½çš„Redisæ¥è¯´ï¼Œé¿å…é¢‘ç¹è®©å†…æ ¸è¿›è¡Œç½‘ç»œè¯·æ±‚å¤„ç†ï¼Œå¯ä»¥å¾ˆå¥½åœ°æå‡è¯·æ±‚å¤„ç†æ•ˆç‡ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªæ–¹æ³•è¦æ±‚åœ¨Redisçš„æ•´ä½“æ¶æ„ä¸­ï¼Œæ·»åŠ å¯¹ç”¨æˆ·æ€ç½‘ç»œåè®®æ ˆçš„æ”¯æŒï¼Œéœ€è¦ä¿®æ”¹Redisæºç ä¸­å’Œç½‘ç»œç›¸å…³çš„éƒ¨åˆ†ï¼ˆä¾‹å¦‚ä¿®æ”¹æ‰€æœ‰çš„ç½‘ç»œæ”¶å‘è¯·æ±‚å‡½æ•°ï¼‰ï¼Œè¿™ä¼šå¸¦æ¥å¾ˆå¤šå¼€å‘å·¥ä½œé‡ã€‚è€Œä¸”æ–°å¢ä»£ç è¿˜å¯èƒ½å¼•å…¥æ–°Bugï¼Œå¯¼è‡´ç³»ç»Ÿä¸ç¨³å®šã€‚æ‰€ä»¥ï¼ŒRedis 6.0ä¸­å¹¶æ²¡æœ‰é‡‡ç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p><p>ç¬¬äºŒç§æ–¹æ³•å°±æ˜¯é‡‡ç”¨å¤šä¸ªIOçº¿ç¨‹æ¥å¤„ç†ç½‘ç»œè¯·æ±‚ï¼Œæé«˜ç½‘ç»œè¯·æ±‚å¤„ç†çš„å¹¶è¡Œåº¦ã€‚Redis 6.0å°±æ˜¯é‡‡ç”¨çš„è¿™ç§æ–¹æ³•ã€‚</p><p>ä½†æ˜¯ï¼ŒRedisçš„å¤šIOçº¿ç¨‹åªæ˜¯ç”¨æ¥å¤„ç†ç½‘ç»œè¯·æ±‚çš„ï¼Œå¯¹äºè¯»å†™å‘½ä»¤ï¼ŒRedisä»ç„¶ä½¿ç”¨å•çº¿ç¨‹æ¥å¤„ç†ã€‚è¿™æ˜¯å› ä¸ºï¼ŒRediså¤„ç†è¯·æ±‚æ—¶ï¼Œç½‘ç»œå¤„ç†ç»å¸¸æ˜¯ç“¶é¢ˆï¼Œé€šè¿‡å¤šä¸ªIOçº¿ç¨‹å¹¶è¡Œå¤„ç†ç½‘ç»œæ“ä½œï¼Œå¯ä»¥æå‡å®ä¾‹çš„æ•´ä½“å¤„ç†æ€§èƒ½ã€‚è€Œç»§ç»­ä½¿ç”¨å•çº¿ç¨‹æ‰§è¡Œå‘½ä»¤æ“ä½œï¼Œå°±ä¸ç”¨ä¸ºäº†ä¿è¯Luaè„šæœ¬ã€äº‹åŠ¡çš„åŸå­æ€§ï¼Œé¢å¤–å¼€å‘å¤šçº¿ç¨‹äº’æ–¥æœºåˆ¶äº†ã€‚è¿™æ ·ä¸€æ¥ï¼ŒRedisçº¿ç¨‹æ¨¡å‹å®ç°å°±ç®€å•äº†ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹ä¸‹ï¼Œåœ¨Redis 6.0ä¸­ï¼Œä¸»çº¿ç¨‹å’ŒIOçº¿ç¨‹å…·ä½“æ˜¯æ€ä¹ˆåä½œå®Œæˆè¯·æ±‚å¤„ç†çš„ã€‚æŒæ¡äº†å…·ä½“åŸç†ï¼Œä½ æ‰èƒ½çœŸæ­£åœ°ä¼šç”¨å¤šçº¿ç¨‹ã€‚ä¸ºäº†æ–¹ä¾¿ä½ ç†è§£ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸»çº¿ç¨‹å’Œå¤šIOçº¿ç¨‹çš„åä½œåˆ†æˆå››ä¸ªé˜¶æ®µã€‚</p><p><strong>é˜¶æ®µä¸€ï¼šæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯å»ºç«‹Socketè¿æ¥ï¼Œå¹¶åˆ†é…å¤„ç†çº¿ç¨‹</strong></p><p>é¦–å…ˆï¼Œä¸»çº¿ç¨‹è´Ÿè´£æ¥æ”¶å»ºç«‹è¿æ¥è¯·æ±‚ã€‚å½“æœ‰å®¢æˆ·ç«¯è¯·æ±‚å’Œå®ä¾‹å»ºç«‹Socketè¿æ¥æ—¶ï¼Œä¸»çº¿ç¨‹ä¼šåˆ›å»ºå’Œå®¢æˆ·ç«¯çš„è¿æ¥ï¼Œå¹¶æŠŠ Socket æ”¾å…¥å…¨å±€ç­‰å¾…é˜Ÿåˆ—ä¸­ã€‚ç´§æ¥ç€ï¼Œä¸»çº¿ç¨‹é€šè¿‡è½®è¯¢æ–¹æ³•æŠŠSocketè¿æ¥åˆ†é…ç»™IOçº¿ç¨‹ã€‚</p><p><strong>é˜¶æ®µäºŒï¼šIOçº¿ç¨‹è¯»å–å¹¶è§£æè¯·æ±‚</strong></p><p>ä¸»çº¿ç¨‹ä¸€æ—¦æŠŠSocketåˆ†é…ç»™IOçº¿ç¨‹ï¼Œå°±ä¼šè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œç­‰å¾…IOçº¿ç¨‹å®Œæˆå®¢æˆ·ç«¯è¯·æ±‚è¯»å–å’Œè§£æã€‚å› ä¸ºæœ‰å¤šä¸ªIOçº¿ç¨‹åœ¨å¹¶è¡Œå¤„ç†ï¼Œæ‰€ä»¥ï¼Œè¿™ä¸ªè¿‡ç¨‹å¾ˆå¿«å°±å¯ä»¥å®Œæˆã€‚</p><p><strong>é˜¶æ®µä¸‰ï¼šä¸»çº¿ç¨‹æ‰§è¡Œè¯·æ±‚æ“ä½œ</strong></p><p>ç­‰åˆ°IOçº¿ç¨‹è§£æå®Œè¯·æ±‚ï¼Œä¸»çº¿ç¨‹è¿˜æ˜¯ä¼šä»¥å•çº¿ç¨‹çš„æ–¹å¼æ‰§è¡Œè¿™äº›å‘½ä»¤æ“ä½œã€‚ä¸‹é¢è¿™å¼ å›¾æ˜¾ç¤ºäº†åˆšæ‰ä»‹ç»çš„è¿™ä¸‰ä¸ªé˜¶æ®µï¼Œä½ å¯ä»¥çœ‹ä¸‹ï¼ŒåŠ æ·±ç†è§£ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/58/cd/5817b7e2085e7c00e63534a07c4182cd.jpg?wh=3000*2000\" alt=\"\"></p><p><strong>é˜¶æ®µå››ï¼šIOçº¿ç¨‹å›å†™Socketå’Œä¸»çº¿ç¨‹æ¸…ç©ºå…¨å±€é˜Ÿåˆ—</strong></p><p>å½“ä¸»çº¿ç¨‹æ‰§è¡Œå®Œè¯·æ±‚æ“ä½œåï¼Œä¼šæŠŠéœ€è¦è¿”å›çš„ç»“æœå†™å…¥ç¼“å†²åŒºï¼Œç„¶åï¼Œä¸»çº¿ç¨‹ä¼šé˜»å¡ç­‰å¾…IOçº¿ç¨‹æŠŠè¿™äº›ç»“æœå›å†™åˆ°Socketä¸­ï¼Œå¹¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p><p>å’ŒIOçº¿ç¨‹è¯»å–å’Œè§£æè¯·æ±‚ä¸€æ ·ï¼ŒIOçº¿ç¨‹å›å†™Socketæ—¶ï¼Œä¹Ÿæ˜¯æœ‰å¤šä¸ªçº¿ç¨‹åœ¨å¹¶å‘æ‰§è¡Œï¼Œæ‰€ä»¥å›å†™Socketçš„é€Ÿåº¦ä¹Ÿå¾ˆå¿«ã€‚ç­‰åˆ°IOçº¿ç¨‹å›å†™Socketå®Œæ¯•ï¼Œä¸»çº¿ç¨‹ä¼šæ¸…ç©ºå…¨å±€é˜Ÿåˆ—ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„åç»­è¯·æ±‚ã€‚</p><p>æˆ‘ä¹Ÿç”»äº†ä¸€å¼ å›¾ï¼Œå±•ç¤ºäº†è¿™ä¸ªé˜¶æ®µä¸»çº¿ç¨‹å’ŒIOçº¿ç¨‹çš„æ“ä½œï¼Œä½ å¯ä»¥çœ‹ä¸‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/2e/1b/2e1f3a5bafc43880e935aaa4796d131b.jpg?wh=3000*1693\" alt=\"\"></p><p>äº†è§£äº†Redisä¸»çº¿ç¨‹å’Œå¤šçº¿ç¨‹çš„åä½œæ–¹å¼ï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆå¯ç”¨å¤šçº¿ç¨‹å‘¢ï¼Ÿåœ¨Redis 6.0ä¸­ï¼Œå¤šçº¿ç¨‹æœºåˆ¶é»˜è®¤æ˜¯å…³é—­çš„ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨å¤šçº¿ç¨‹åŠŸèƒ½ï¼Œéœ€è¦åœ¨redis.confä¸­å®Œæˆä¸¤ä¸ªè®¾ç½®ã€‚</p><p><strong>1.è®¾ç½®io-thread-do-readsé…ç½®é¡¹ä¸ºyesï¼Œè¡¨ç¤ºå¯ç”¨å¤šçº¿ç¨‹ã€‚</strong></p><pre><code>io-threads-do-reads yes\n</code></pre><p>2.è®¾ç½®çº¿ç¨‹ä¸ªæ•°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œ<strong>çº¿ç¨‹ä¸ªæ•°è¦å°äºRediså®ä¾‹æ‰€åœ¨æœºå™¨çš„CPUæ ¸ä¸ªæ•°</strong>ï¼Œä¾‹å¦‚ï¼Œå¯¹äºä¸€ä¸ª8æ ¸çš„æœºå™¨æ¥è¯´ï¼ŒRediså®˜æ–¹å»ºè®®é…ç½®6ä¸ªIOçº¿ç¨‹ã€‚</p><pre><code>io-threads  6\n</code></pre><p>å¦‚æœä½ åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå‘ç°Rediså®ä¾‹çš„CPUå¼€é”€ä¸å¤§ï¼Œååé‡å´æ²¡æœ‰æå‡ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨Redis 6.0çš„å¤šçº¿ç¨‹æœºåˆ¶ï¼ŒåŠ é€Ÿç½‘ç»œå¤„ç†ï¼Œè¿›è€Œæå‡å®ä¾‹çš„ååé‡ã€‚</p><h2>å®ç°æœåŠ¡ç«¯ååŠ©çš„å®¢æˆ·ç«¯ç¼“å­˜</h2><p>å’Œä¹‹å‰çš„ç‰ˆæœ¬ç›¸æ¯”ï¼ŒRedis 6.0æ–°å¢äº†ä¸€ä¸ªé‡è¦çš„ç‰¹æ€§ï¼Œå°±æ˜¯å®ç°äº†æœåŠ¡ç«¯ååŠ©çš„å®¢æˆ·ç«¯ç¼“å­˜åŠŸèƒ½ï¼Œä¹Ÿç§°ä¸ºè·Ÿè¸ªï¼ˆTrackingï¼‰åŠŸèƒ½ã€‚æœ‰äº†è¿™ä¸ªåŠŸèƒ½ï¼Œä¸šåŠ¡åº”ç”¨ä¸­çš„Rediså®¢æˆ·ç«¯å°±å¯ä»¥æŠŠè¯»å–çš„æ•°æ®ç¼“å­˜åœ¨ä¸šåŠ¡åº”ç”¨æœ¬åœ°äº†ï¼Œåº”ç”¨å°±å¯ä»¥ç›´æ¥åœ¨æœ¬åœ°å¿«é€Ÿè¯»å–æ•°æ®äº†ã€‚</p><p>ä¸è¿‡ï¼Œå½“æŠŠæ•°æ®ç¼“å­˜åœ¨å®¢æˆ·ç«¯æœ¬åœ°æ—¶ï¼Œæˆ‘ä»¬ä¼šé¢ä¸´ä¸€ä¸ªé—®é¢˜ï¼š<strong>å¦‚æœæ•°æ®è¢«ä¿®æ”¹äº†æˆ–æ˜¯å¤±æ•ˆäº†ï¼Œå¦‚ä½•é€šçŸ¥å®¢æˆ·ç«¯å¯¹ç¼“å­˜çš„æ•°æ®åšå¤±æ•ˆå¤„ç†ï¼Ÿ</strong></p><p>6.0å®ç°çš„TrackingåŠŸèƒ½å®ç°äº†ä¸¤ç§æ¨¡å¼ï¼Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p><strong>ç¬¬ä¸€ç§æ¨¡å¼æ˜¯æ™®é€šæ¨¡å¼</strong>ã€‚åœ¨è¿™ä¸ªæ¨¡å¼ä¸‹ï¼Œå®ä¾‹ä¼šåœ¨æœåŠ¡ç«¯è®°å½•å®¢æˆ·ç«¯è¯»å–è¿‡çš„keyï¼Œå¹¶ç›‘æµ‹keyæ˜¯å¦æœ‰ä¿®æ”¹ã€‚ä¸€æ—¦keyçš„å€¼å‘ç”Ÿå˜åŒ–ï¼ŒæœåŠ¡ç«¯ä¼šç»™å®¢æˆ·ç«¯å‘é€invalidateæ¶ˆæ¯ï¼Œé€šçŸ¥å®¢æˆ·ç«¯ç¼“å­˜å¤±æ•ˆäº†ã€‚</p><p>åœ¨ä½¿ç”¨æ™®é€šæ¨¡å¼æ—¶ï¼Œæœ‰ä¸€ç‚¹ä½ éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼ŒæœåŠ¡ç«¯å¯¹äºè®°å½•çš„keyåªä¼šæŠ¥å‘Šä¸€æ¬¡invalidateæ¶ˆæ¯ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒæœåŠ¡ç«¯åœ¨ç»™å®¢æˆ·ç«¯å‘é€è¿‡ä¸€æ¬¡invalidateæ¶ˆæ¯åï¼Œå¦‚æœkeyå†è¢«ä¿®æ”¹ï¼Œæ­¤æ—¶ï¼ŒæœåŠ¡ç«¯å°±ä¸ä¼šå†æ¬¡ç»™å®¢æˆ·ç«¯å‘é€invalidateæ¶ˆæ¯ã€‚</p><p>åªæœ‰å½“å®¢æˆ·ç«¯å†æ¬¡æ‰§è¡Œè¯»å‘½ä»¤æ—¶ï¼ŒæœåŠ¡ç«¯æ‰ä¼šå†æ¬¡ç›‘æµ‹è¢«è¯»å–çš„keyï¼Œå¹¶åœ¨keyä¿®æ”¹æ—¶å‘é€invalidateæ¶ˆæ¯ã€‚è¿™æ ·è®¾è®¡çš„è€ƒè™‘æ˜¯èŠ‚çœæœ‰é™çš„å†…å­˜ç©ºé—´ã€‚æ¯•ç«Ÿï¼Œå¦‚æœå®¢æˆ·ç«¯ä¸å†è®¿é—®è¿™ä¸ªkeyäº†ï¼Œè€ŒæœåŠ¡ç«¯ä»ç„¶è®°å½•keyçš„ä¿®æ”¹æƒ…å†µï¼Œå°±ä¼šæµªè´¹å†…å­˜èµ„æºã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œæ‰“å¼€æˆ–å…³é—­æ™®é€šæ¨¡å¼ä¸‹çš„TrackingåŠŸèƒ½ã€‚</p><pre><code>CLIENT TRACKING ON|OFF\n</code></pre><p><strong>ç¬¬äºŒç§æ¨¡å¼æ˜¯å¹¿æ’­æ¨¡å¼</strong>ã€‚åœ¨è¿™ä¸ªæ¨¡å¼ä¸‹ï¼ŒæœåŠ¡ç«¯ä¼šç»™å®¢æˆ·ç«¯å¹¿æ’­æ‰€æœ‰keyçš„å¤±æ•ˆæƒ…å†µï¼Œä¸è¿‡ï¼Œè¿™æ ·åšäº†ä¹‹åï¼Œå¦‚æœkey è¢«é¢‘ç¹ä¿®æ”¹ï¼ŒæœåŠ¡ç«¯ä¼šå‘é€å¤§é‡çš„å¤±æ•ˆå¹¿æ’­æ¶ˆæ¯ï¼Œè¿™å°±ä¼šæ¶ˆè€—å¤§é‡çš„ç½‘ç»œå¸¦å®½èµ„æºã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨å®é™…åº”ç”¨æ—¶ï¼Œæˆ‘ä»¬ä¼šè®©å®¢æˆ·ç«¯æ³¨å†Œå¸Œæœ›è·Ÿè¸ªçš„keyçš„å‰ç¼€ï¼Œå½“å¸¦æœ‰æ³¨å†Œå‰ç¼€çš„keyè¢«ä¿®æ”¹æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šæŠŠå¤±æ•ˆæ¶ˆæ¯å¹¿æ’­ç»™æ‰€æœ‰æ³¨å†Œçš„å®¢æˆ·ç«¯ã€‚<strong>å’Œæ™®é€šæ¨¡å¼ä¸åŒï¼Œåœ¨å¹¿æ’­æ¨¡å¼ä¸‹ï¼Œå³ä½¿å®¢æˆ·ç«¯è¿˜æ²¡æœ‰è¯»å–è¿‡keyï¼Œä½†åªè¦å®ƒæ³¨å†Œäº†è¦è·Ÿè¸ªçš„keyï¼ŒæœåŠ¡ç«¯éƒ½ä¼šæŠŠkeyå¤±æ•ˆæ¶ˆæ¯é€šçŸ¥ç»™è¿™ä¸ªå®¢æˆ·ç«¯</strong>ã€‚</p><p>æˆ‘ç»™ä½ ä¸¾ä¸ªä¾‹å­ï¼Œå¸¦ä½ çœ‹ä¸€ä¸‹å®¢æˆ·ç«¯å¦‚ä½•ä½¿ç”¨å¹¿æ’­æ¨¡å¼æ¥æ”¶keyå¤±æ•ˆæ¶ˆæ¯ã€‚å½“æˆ‘ä»¬åœ¨å®¢æˆ·ç«¯æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤åï¼Œå¦‚æœæœåŠ¡ç«¯æ›´æ–°äº†user:id:1003è¿™ä¸ªkeyï¼Œé‚£ä¹ˆï¼Œå®¢æˆ·ç«¯å°±ä¼šæ”¶åˆ°invalidateæ¶ˆæ¯ã€‚</p><pre><code>CLIENT TRACKING ON BCAST PREFIX user\n</code></pre><p>è¿™ç§ç›‘æµ‹å¸¦æœ‰å‰ç¼€çš„keyçš„å¹¿æ’­æ¨¡å¼ï¼Œå’Œæˆ‘ä»¬å¯¹keyçš„å‘½åè§„èŒƒéå¸¸åŒ¹é…ã€‚æˆ‘ä»¬åœ¨å®é™…åº”ç”¨æ—¶ï¼Œä¼šç»™åŒä¸€ä¸šåŠ¡ä¸‹çš„keyè®¾ç½®ç›¸åŒçš„ä¸šåŠ¡åå‰ç¼€ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥éå¸¸æ–¹ä¾¿åœ°ä½¿ç”¨å¹¿æ’­æ¨¡å¼ã€‚</p><p>ä¸è¿‡ï¼Œåˆšæ‰ä»‹ç»çš„æ™®é€šæ¨¡å¼å’Œå¹¿æ’­æ¨¡å¼ï¼Œéœ€è¦å®¢æˆ·ç«¯ä½¿ç”¨RESP 3åè®®ï¼ŒRESP 3åè®®æ˜¯6.0æ–°å¯ç”¨çš„é€šä¿¡åè®®ï¼Œä¸€ä¼šå„¿æˆ‘ä¼šç»™ä½ å…·ä½“ä»‹ç»ã€‚</p><p>å¯¹äºä½¿ç”¨RESP 2åè®®çš„å®¢æˆ·ç«¯æ¥è¯´ï¼Œå°±éœ€è¦ä½¿ç”¨å¦ä¸€ç§æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯é‡å®šå‘æ¨¡å¼ï¼ˆredirectï¼‰ã€‚åœ¨é‡å®šå‘æ¨¡å¼ä¸‹ï¼Œæƒ³è¦è·å¾—å¤±æ•ˆæ¶ˆæ¯é€šçŸ¥çš„å®¢æˆ·ç«¯ï¼Œå°±éœ€è¦æ‰§è¡Œè®¢é˜…å‘½ä»¤SUBSCRIBEï¼Œä¸“é—¨è®¢é˜…ç”¨äºå‘é€å¤±æ•ˆæ¶ˆæ¯çš„é¢‘é“_redis_:invalidateã€‚åŒæ—¶ï¼Œå†ä½¿ç”¨å¦å¤–ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œæ‰§è¡ŒCLIENT TRACKINGå‘½ä»¤ï¼Œè®¾ç½®æœåŠ¡ç«¯å°†å¤±æ•ˆæ¶ˆæ¯è½¬å‘ç»™ä½¿ç”¨RESP 2åè®®çš„å®¢æˆ·ç«¯ã€‚</p><p>æˆ‘å†ç»™ä½ ä¸¾ä¸ªä¾‹å­ï¼Œå¸¦ä½ äº†è§£ä¸‹å¦‚ä½•è®©ä½¿ç”¨RESP 2åè®®çš„å®¢æˆ·ç«¯ä¹Ÿèƒ½æ¥å—å¤±æ•ˆæ¶ˆæ¯ã€‚å‡è®¾å®¢æˆ·ç«¯Bæƒ³è¦è·å–å¤±æ•ˆæ¶ˆæ¯ï¼Œä½†æ˜¯å®¢æˆ·ç«¯Båªæ”¯æŒRESP 2åè®®ï¼Œå®¢æˆ·ç«¯Aæ”¯æŒRESP 3åè®®ã€‚æˆ‘ä»¬å¯ä»¥åˆ†åˆ«åœ¨å®¢æˆ·ç«¯Bå’ŒAä¸Šæ‰§è¡ŒSUBSCRIBEå’ŒCLIENT TRACKINGï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>//å®¢æˆ·ç«¯Bæ‰§è¡Œï¼Œå®¢æˆ·ç«¯Bçš„IDå·æ˜¯303\nSUBSCRIBE _redis_:invalidate\n\n//å®¢æˆ·ç«¯Aæ‰§è¡Œ\nCLIENT TRACKING ON BCAST REDIRECT 303\n</code></pre><p>è¿™æ ·è®¾ç½®ä»¥åï¼Œå¦‚æœæœ‰é”®å€¼å¯¹è¢«ä¿®æ”¹äº†ï¼Œå®¢æˆ·ç«¯Bå°±å¯ä»¥é€šè¿‡_redis_:invalidateé¢‘é“ï¼Œè·å¾—å¤±æ•ˆæ¶ˆæ¯äº†ã€‚</p><p>å¥½äº†ï¼Œäº†è§£äº†6.0 ç‰ˆæœ¬ä¸­çš„å®¢æˆ·ç«¯ç¼“å­˜ç‰¹æ€§åï¼Œæˆ‘ä»¬å†æ¥äº†è§£ä¸‹ç¬¬ä¸‰ä¸ªå…³é”®ç‰¹æ€§ï¼Œä¹Ÿå°±æ˜¯å®ä¾‹çš„è®¿é—®æƒé™æ§åˆ¶åˆ—è¡¨åŠŸèƒ½ï¼ˆAccess Control Listï¼ŒACLï¼‰ï¼Œè¿™ä¸ªç‰¹æ€§å¯ä»¥æœ‰æ•ˆåœ°æå‡Redisçš„ä½¿ç”¨å®‰å…¨æ€§ã€‚</p><h2>ä»ç®€å•çš„åŸºäºå¯†ç è®¿é—®åˆ°ç»†ç²’åº¦çš„æƒé™æ§åˆ¶</h2><p>åœ¨Redis 6.0 ç‰ˆæœ¬ä¹‹å‰ï¼Œè¦æƒ³å®ç°å®ä¾‹çš„å®‰å…¨è®¿é—®ï¼Œåªèƒ½é€šè¿‡è®¾ç½®å¯†ç æ¥æ§åˆ¶ï¼Œä¾‹å¦‚ï¼Œå®¢æˆ·ç«¯è¿æ¥å®ä¾‹å‰éœ€è¦è¾“å…¥å¯†ç ã€‚</p><p>æ­¤å¤–ï¼Œå¯¹äºä¸€äº›é«˜é£é™©çš„å‘½ä»¤ï¼ˆä¾‹å¦‚KEYSã€FLUSHDBã€FLUSHALLç­‰ï¼‰ï¼Œåœ¨Redis 6.0 ä¹‹å‰ï¼Œæˆ‘ä»¬ä¹Ÿåªèƒ½é€šè¿‡rename-commandæ¥é‡æ–°å‘½åè¿™äº›å‘½ä»¤ï¼Œé¿å…å®¢æˆ·ç«¯ç›´æ¥è°ƒç”¨ã€‚</p><p>Redis 6.0 æä¾›äº†æ›´åŠ ç»†ç²’åº¦çš„è®¿é—®æƒé™æ§åˆ¶ï¼Œè¿™ä¸»è¦æœ‰ä¸¤æ–¹é¢çš„ä½“ç°ã€‚</p><p><strong>é¦–å…ˆï¼Œ6.0ç‰ˆæœ¬æ”¯æŒåˆ›å»ºä¸åŒç”¨æˆ·æ¥ä½¿ç”¨Redis</strong>ã€‚åœ¨6.0ç‰ˆæœ¬å‰ï¼Œæ‰€æœ‰å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªå¯†ç è¿›è¡Œç™»å½•ä½¿ç”¨ï¼Œä½†æ˜¯æ²¡æœ‰ç”¨æˆ·çš„æ¦‚å¿µï¼Œè€Œåœ¨6.0ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ACL SETUSERå‘½ä»¤åˆ›å»ºç”¨æˆ·ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œåˆ›å»ºå¹¶å¯ç”¨ä¸€ä¸ªç”¨æˆ·normaluserï¼ŒæŠŠå®ƒçš„å¯†ç è®¾ç½®ä¸ºâ€œabcâ€ï¼š</p><pre><code>ACL SETUSER normaluser on &gt; abc\n</code></pre><p><strong>å¦å¤–ï¼Œ6.0ç‰ˆæœ¬è¿˜æ”¯æŒä»¥ç”¨æˆ·ä¸ºç²’åº¦è®¾ç½®å‘½ä»¤æ“ä½œçš„è®¿é—®æƒé™</strong>ã€‚æˆ‘æŠŠå…·ä½“æ“ä½œåˆ—åœ¨äº†ä¸‹è¡¨ä¸­ï¼Œä½ å¯ä»¥çœ‹ä¸‹ï¼Œå…¶ä¸­ï¼ŒåŠ å·ï¼ˆ+ï¼‰å’Œå‡å·ï¼ˆ-ï¼‰å°±åˆ†åˆ«è¡¨ç¤ºç»™ç”¨æˆ·èµ‹äºˆæˆ–æ’¤é”€å‘½ä»¤çš„è°ƒç”¨æƒé™ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/d1/c8/d1bd6891934cfa879ee080de1c5455c8.jpg?wh=2643*894\" alt=\"\"></p><p>ä¸ºäº†ä¾¿äºä½ ç†è§£ï¼Œæˆ‘ç»™ä½ ä¸¾ä¸ªä¾‹å­ã€‚å‡è®¾æˆ‘ä»¬è¦è®¾ç½®ç”¨æˆ·normaluseråªèƒ½è°ƒç”¨Hashç±»å‹çš„å‘½ä»¤æ“ä½œï¼Œè€Œä¸èƒ½è°ƒç”¨Stringç±»å‹çš„å‘½ä»¤æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><pre><code>ACL SETUSER normaluser +@hash -@string\n</code></pre><p>é™¤äº†è®¾ç½®æŸä¸ªå‘½ä»¤æˆ–æŸç±»å‘½ä»¤çš„è®¿é—®æ§åˆ¶æƒé™ï¼Œ6.0ç‰ˆæœ¬è¿˜æ”¯æŒä»¥keyä¸ºç²’åº¦è®¾ç½®è®¿é—®æƒé™ã€‚</p><p>å…·ä½“çš„åšæ³•æ˜¯ä½¿ç”¨æ³¢æµªå·â€œ~â€å’Œkeyçš„å‰ç¼€æ¥è¡¨ç¤ºæ§åˆ¶è®¿é—®çš„keyã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼Œå°±å¯ä»¥è®¾ç½®ç”¨æˆ·normaluseråªèƒ½å¯¹ä»¥â€œuser:â€ä¸ºå‰ç¼€çš„keyè¿›è¡Œå‘½ä»¤æ“ä½œï¼š</p><pre><code>ACL SETUSER normaluser ~user:* +@all\n</code></pre><p>å¥½äº†ï¼Œåˆ°è¿™é‡Œï¼Œä½ äº†è§£äº†ï¼ŒRedis 6.0å¯ä»¥è®¾ç½®ä¸åŒç”¨æˆ·æ¥è®¿é—®å®ä¾‹ï¼Œè€Œä¸”å¯ä»¥åŸºäºç”¨æˆ·å’Œkeyçš„ç²’åº¦ï¼Œè®¾ç½®æŸä¸ªç”¨æˆ·å¯¹æŸäº›keyå…è®¸æˆ–ç¦æ­¢æ‰§è¡Œçš„å‘½ä»¤æ“ä½œã€‚</p><p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬åœ¨æœ‰å¤šç”¨æˆ·çš„Redisåº”ç”¨åœºæ™¯ä¸‹ï¼Œå°±å¯ä»¥éå¸¸æ–¹ä¾¿å’Œçµæ´»åœ°ä¸ºä¸åŒç”¨æˆ·è®¾ç½®ä¸åŒçº§åˆ«çš„å‘½ä»¤æ“ä½œæƒé™äº†ï¼Œè¿™å¯¹äºæä¾›å®‰å…¨çš„Redisè®¿é—®éå¸¸æœ‰å¸®åŠ©ã€‚</p><h2>å¯ç”¨RESP 3åè®®</h2><p>Redis 6.0å®ç°äº†RESP 3é€šä¿¡åè®®ï¼Œè€Œä¹‹å‰éƒ½æ˜¯ä½¿ç”¨çš„RESP 2ã€‚åœ¨RESP 2ä¸­ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„é€šä¿¡å†…å®¹éƒ½æ˜¯ä»¥å­—èŠ‚æ•°ç»„å½¢å¼è¿›è¡Œç¼–ç çš„ï¼Œå®¢æˆ·ç«¯éœ€è¦æ ¹æ®æ“ä½œçš„å‘½ä»¤æˆ–æ˜¯æ•°æ®ç±»å‹è‡ªè¡Œå¯¹ä¼ è¾“çš„æ•°æ®è¿›è¡Œè§£ç ï¼Œå¢åŠ äº†å®¢æˆ·ç«¯å¼€å‘å¤æ‚åº¦ã€‚</p><p>è€ŒRESP 3ç›´æ¥æ”¯æŒå¤šç§æ•°æ®ç±»å‹çš„åŒºåˆ†ç¼–ç ï¼ŒåŒ…æ‹¬ç©ºå€¼ã€æµ®ç‚¹æ•°ã€å¸ƒå°”å€¼ã€æœ‰åºçš„å­—å…¸é›†åˆã€æ— åºçš„é›†åˆç­‰ã€‚</p><p>æ‰€è°“åŒºåˆ†ç¼–ç ï¼Œå°±æ˜¯æŒ‡ç›´æ¥é€šè¿‡ä¸åŒçš„å¼€å¤´å­—ç¬¦ï¼ŒåŒºåˆ†ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå®¢æˆ·ç«¯å°±å¯ä»¥ç›´æ¥é€šè¿‡åˆ¤æ–­ä¼ é€’æ¶ˆæ¯çš„å¼€å¤´å­—ç¬¦ï¼Œæ¥å®ç°æ•°æ®è½¬æ¢æ“ä½œäº†ï¼Œæå‡äº†å®¢æˆ·ç«¯çš„æ•ˆç‡ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒRESP 3åè®®è¿˜å¯ä»¥æ”¯æŒå®¢æˆ·ç«¯ä»¥æ™®é€šæ¨¡å¼å’Œå¹¿æ’­æ¨¡å¼å®ç°å®¢æˆ·ç«¯ç¼“å­˜ã€‚</p><h2>å°ç»“</h2><p>è¿™èŠ‚è¯¾ï¼Œæˆ‘å‘ä½ ä»‹ç»äº†Redis 6.0çš„æ–°ç‰¹æ€§ï¼Œæˆ‘æŠŠè¿™äº›æ–°ç‰¹æ€§æ€»ç»“åœ¨äº†ä¸€å¼ è¡¨é‡Œï¼Œä½ å¯ä»¥å†å›é¡¾å·©å›ºä¸‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/21/f0/2155c01bf3129d5d58fcb98aefd402f0.jpg?wh=2922*2097\" alt=\"\"></p><p>æœ€åï¼Œæˆ‘ä¹Ÿå†ç»™ä½ ä¸€ä¸ªå°å»ºè®®ï¼šå› ä¸ºRedis 6.0æ˜¯åˆšåˆšæ¨å‡ºçš„ï¼Œæ–°çš„åŠŸèƒ½ç‰¹æ€§è¿˜éœ€è¦åœ¨å®é™…åº”ç”¨ä¸­è¿›è¡Œéƒ¨ç½²å’ŒéªŒè¯ï¼Œæ‰€ä»¥ï¼Œå¦‚æœä½ æƒ³è¯•ç”¨Redis 6.0ï¼Œå¯ä»¥å°è¯•å…ˆåœ¨éæ ¸å¿ƒä¸šåŠ¡ä¸Šä½¿ç”¨Redis 6.0ï¼Œä¸€æ–¹é¢å¯ä»¥éªŒè¯æ–°ç‰¹æ€§å¸¦æ¥çš„æ€§èƒ½æˆ–åŠŸèƒ½ä¼˜åŠ¿ï¼Œå¦ä¸€æ–¹é¢ï¼Œä¹Ÿå¯ä»¥é¿å…å› ä¸ºæ–°ç‰¹æ€§ä¸ç¨³å®šè€Œå¯¼è‡´æ ¸å¿ƒä¸šåŠ¡å—åˆ°å½±å“ã€‚</p><h2>æ¯è¯¾ä¸€é—®</h2><p>ä½ è§‰å¾—ï¼ŒRedis 6.0çš„å“ªä¸ªæˆ–å“ªäº›æ–°ç‰¹æ€§ä¼šå¯¹ä½ æœ‰å¸®åŠ©å‘¢ï¼Ÿ</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå†™ä¸‹ä½ çš„æ€è€ƒå’Œç­”æ¡ˆï¼Œæˆ‘ä»¬ä¸€èµ·äº¤æµè®¨è®ºã€‚å¦‚æœä½ è§‰å¾—ä»Šå¤©çš„å†…å®¹å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œä¹Ÿæ¬¢è¿ä½ åˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–åŒäº‹ã€‚æˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ã€‚</p>","comments":[{"had_liked":false,"id":263256,"user_name":"Kaito","can_delete":false,"product_type":"c1","uid":1020042,"ip_address":"","ucode":"79775FA35A95F2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","comment_is_top":false,"comment_ctime":1606061461,"is_pvip":true,"discussion_count":11,"race_medal":0,"score":"409627954581","product_id":100056701,"comment_content":"Redis 6.0 çš„å“ªäº›æ–°ç‰¹æ€§å¸®åŠ©æœ€å¤§ï¼Ÿ<br><br>æˆ‘è§‰å¾— Redis 6.0 æä¾›çš„å¤š IO çº¿ç¨‹å’Œå®¢æˆ·ç«¯ç¼“å­˜è¿™ä¸¤å¤§ç‰¹æ€§ï¼Œå¯¹äºæˆ‘ä»¬ä½¿ç”¨ Redis å¸®åŠ©æœ€å¤§ã€‚<br><br>å¤š IO çº¿ç¨‹å¯ä»¥è®© Redis åœ¨å¹¶å‘é‡éå¸¸å¤§æ—¶ï¼Œè®©å…¶æ€§èƒ½å†ä¸Šä¸€ä¸ªå°é˜¶ï¼Œæ€§èƒ½æå‡è¿‘ 1 å€ï¼Œå¯¹äºå•æœº Redis æ€§èƒ½è¦æ±‚æ›´é«˜çš„ä¸šåŠ¡åœºæ™¯ï¼Œéå¸¸æœ‰å¸®åŠ©ã€‚<br><br>è€Œå®¢æˆ·ç«¯ç¼“å­˜å¯ä»¥è®© Redis çš„æ•°æ®ç¼“å­˜åœ¨å®¢æˆ·ç«¯ï¼Œç›¸å½“äºæ¯ä¸ªåº”ç”¨è¿›ç¨‹å¤šäº†ä¸€ä¸ªæœ¬åœ°ç¼“å­˜ï¼ŒRedis æ•°æ®æ²¡æœ‰å˜åŒ–æ—¶ï¼Œä¸šåŠ¡ç›´æ¥åœ¨åº”ç”¨è¿›ç¨‹å†…å°±èƒ½æ‹¿åˆ°æ•°æ®ï¼Œè¿™ä¸ä»…èŠ‚çœäº†ç½‘ç»œå¸¦å®½ï¼Œé™ä½äº† Redis çš„è¯·æ±‚å‹åŠ›ï¼Œè¿˜å……åˆ†åˆ©ç”¨äº†ä¸šåŠ¡åº”ç”¨çš„èµ„æºï¼Œå¯¹åº”ç”¨æ€§èƒ½çš„æå‡ä¹Ÿéå¸¸å¤§ã€‚","like_count":96,"discussions":[{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walleæ–Œ","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338260,"discussion_content":"ç¬¬äºŒç‚¹ï¼Œä¹‹å‰è®¸å¤šä¸­å¤§å›¢é˜Ÿéƒ½åšè¿‡å°è¯•ï¼Œä¸»è¦æ˜¯é›†ä¸­åœ¨\n1ï¼‰ã€å°è£…æœ¬åœ°ç¼“å­˜ ä¸ redisï¼Œå¯¹å¤–çœ‹èµ·æ¥æ˜¯ä¸€ä¸ªæ¥å£æˆ–è€…æ–¹æ³•ã€‚\n2ï¼‰ã€æœ¬åœ°ç¼“å­˜å¦‚ä½•è¢«ç›´æ¥æ§åˆ¶ï¼Œä¾‹å¦‚æ¥å—è¯·æ±‚ä¸»åŠ¨åŠ è½½æŸä¸ªkey  ä¸»åŠ¨å¸è½½\næœ€é‡è¦çš„è¦èƒ½å¤Ÿæ‰¿å—åŠ äº†æœ¬åœ°ç¼“å­˜ ä¸ ç¼“å­˜ä¹‹é—´çš„æçŸ­æ—¶é—´å†…çš„ä¸ä¸€è‡´ã€‚","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1609226227,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2326134,"avatar":"https://static001.geekbang.org/account/avatar/00/23/7e/76/368394bf.jpg","nickname":"å“¦","note":"","ucode":"C776659DED9D79","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380785,"discussion_content":"è¯·é—®ï¼Œè¿™é‡ŒRedis6.0çš„å¤šçº¿ç¨‹æ¨¡å¼æ˜¯ä¸æ˜¯å¯ä»¥ç†è§£ä¸ºå¤šReactorå•çº¿ç¨‹çš„æ¨¡å¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624697203,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1411419,"avatar":"https://static001.geekbang.org/account/avatar/00/15/89/5b/b014ce14.jpg","nickname":"å°äº”","note":"","ucode":"B7B1F121837CD9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2326134,"avatar":"https://static001.geekbang.org/account/avatar/00/23/7e/76/368394bf.jpg","nickname":"å“¦","note":"","ucode":"C776659DED9D79","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381382,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625032302,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":380785,"ip_address":""},"score":381382,"extra":""},{"author":{"id":1131165,"avatar":"https://static001.geekbang.org/account/avatar/00/11/42/9d/c36b7ef7.jpg","nickname":"é¡¾éª¨","note":"","ucode":"3F6BA592AB7723","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2326134,"avatar":"https://static001.geekbang.org/account/avatar/00/23/7e/76/368394bf.jpg","nickname":"å“¦","note":"","ucode":"C776659DED9D79","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550147,"discussion_content":"å¤šReactorå•çº¿ç¨‹å®é™…ä¸Šå®Œå…¨æ²¡æœ‰æ„ä¹‰ï¼Œæ„Ÿè§‰æ›´åƒæ˜¯å• Reactor å¤šçº¿ç¨‹çš„å˜ç§ï¼šå‘½ä»¤æ‰§è¡Œä¸åœ¨å­çº¿ç¨‹è€Œæ˜¯åœ¨ä¸»çº¿ç¨‹ã€‚å¯¹æ‰§è¡Œè€—æ—¶é•¿çš„æ“ä½œï¼ˆæ¯”å¦‚bigkeyï¼‰ï¼Œæˆ‘æ„Ÿè§‰æå‡ä¸å¤§","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1644394449,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":380785,"ip_address":""},"score":550147,"extra":""},{"author":{"id":1886364,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJoIDpqWcd3vuowkXguSkPuH2TcwmD9iak0sscUzCDrGAMln89vdC3GuH6KcQJkGg4xjdnb0bdnz2A/132","nickname":"shirly","note":"","ucode":"46875D2FCB9A6F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2326134,"avatar":"https://static001.geekbang.org/account/avatar/00/23/7e/76/368394bf.jpg","nickname":"å“¦","note":"","ucode":"C776659DED9D79","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574899,"discussion_content":"åŒé—®ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654426540,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":380785,"ip_address":""},"score":574899,"extra":""}]},{"author":{"id":1784022,"avatar":"","nickname":"pippin","note":"","ucode":"F7619FCE24D481","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336710,"discussion_content":"èƒ½è¯¦ç»†è¯´ä¸‹ioå¤šè·¯å¤ç”¨å’Œå¤šioçº¿ç¨‹çš„å…³ç³»å˜›ï¼Œè¿™ä¸€ç‚¹æˆ‘æ²¡ç†è§£é€šé¡º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608684857,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walleæ–Œ","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1784022,"avatar":"","nickname":"pippin","note":"","ucode":"F7619FCE24D481","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338271,"discussion_content":"è½¬éš”å£  æ·±å…¥æ‹†è§£Tomcat &amp; Jetty\næœ‰å¯¹è¿™éƒ¨åˆ†åšäº†è›®æ·±åˆ»çš„è®²è§£","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1609228365,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":336710,"ip_address":""},"score":338271,"extra":""},{"author":{"id":2049553,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLUDoNibohMic2oxC3UvaubWmuY5gcaS2Ht1GHcm3q99e5x0Xg0kSEwrR4XVO64zicwLFZEo1gZiaTJoQ/132","nickname":"é™ˆæ—¶é”","note":"","ucode":"8CADD4EF8C2212","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1784022,"avatar":"","nickname":"pippin","note":"","ucode":"F7619FCE24D481","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379299,"discussion_content":"ioå¤šè·¯å¤ç”¨æŒ‡çš„æ˜¯ä¸€ä¸ªçº¿ç¨‹ç­‰å¾…å¤šä¸ªå¥—æ¥å­—çš„è¯»å†™äº‹ä»¶ï¼Œå¤šioçº¿ç¨‹å°±æ˜¯ç”¨å¤šä¸ªioçº¿ç¨‹åšè¿™ä»¶äº‹å§ ï¼Œä¸ªäººç†è§£","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1623819469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":336710,"ip_address":""},"score":379299,"extra":""}]},{"author":{"id":1784022,"avatar":"","nickname":"pippin","note":"","ucode":"F7619FCE24D481","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336709,"discussion_content":"èƒ½è¯¦ç»†è¯´ä¸‹ioå¤šè·¯å¤ç”¨å’Œå¤šioçº¿ç¨‹çš„å…³ç³»å˜›ï¼Œè¿™ä¸€ç‚¹æˆ‘æ²¡ç†è§£é€šé¡º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608684852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2326134,"avatar":"https://static001.geekbang.org/account/avatar/00/23/7e/76/368394bf.jpg","nickname":"å“¦","note":"","ucode":"C776659DED9D79","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1784022,"avatar":"","nickname":"pippin","note":"","ucode":"F7619FCE24D481","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380784,"discussion_content":"IOå¤šè·¯å¤ç”¨æ˜¯æŒ‡ä¸€ä¸ªçº¿ç¨‹ç›‘å¬å¤šä¸ªsocketï¼Œä¸»çº¿ç¨‹è°ƒç”¨selectæ¥å£ä¼ å…¥è¦ç›‘å¬çš„socketï¼Œå†…æ ¸ä¸ºéå†socketè¿›è¡Œç›‘å¬ï¼Œå½“è¿™äº›socketä¸Šé¢æœ‰è¯»å†™ç­‰äº‹ä»¶å‘ç”Ÿçš„æ—¶å€™ï¼Œä¸»çº¿ç¨‹selectè°ƒç”¨è¿”å›ï¼Œç„¶åå†å¯¹å‘ç”Ÿäº‹ä»¶çš„socketè¿›è¡Œæ“ä½œã€‚è€Œå¤šä¸ªIOçº¿ç¨‹æ˜¯æŒ‡å¤šä¸ªçº¿ç¨‹å¤„ç†IOï¼Œè¯»å†™æ•°æ®","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1624697161,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":336709,"ip_address":""},"score":380784,"extra":""}]},{"author":{"id":1247522,"avatar":"https://static001.geekbang.org/account/avatar/00/13/09/22/22c0c4fa.jpg","nickname":"benying","note":"","ucode":"DEBAB485F381CC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328160,"discussion_content":"è¯¾ä»£è¡¨å¥½æ—©","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606093407,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":268098,"user_name":"Geek_04f704","can_delete":false,"product_type":"c1","uid":1311265,"ip_address":"","ucode":"67395AA9DCD2EA","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erKbqXs1LibG86q2OxHLic21eduYd9JPCf5ZaDlic3Dk7P0rS1n9jjExrvE6tmartuhPQhgSeEHZ1SaQ/132","comment_is_top":false,"comment_ctime":1608057660,"is_pvip":false,"replies":[{"id":"97654","content":"Redis 6.0ä¸­çš„å¤šçº¿ç¨‹åªæ˜¯æŒ‡ï¼Œåœ¨å®¢æˆ·ç«¯è¯·æ±‚æ¥æ”¶å’Œè§£æï¼Œä»¥åŠè¯·æ±‚åçš„æ•°æ®é€šè¿‡ç½‘ç»œè¿”å›ç»™å®¢æˆ·ç«¯æ—¶ï¼Œä½¿ç”¨äº†å¤šçº¿ç¨‹ã€‚è€Œå‘½ä»¤è¯·æ±‚æœ¬èº«çš„æ•°æ®è¯»å†™æ“ä½œè¿˜æ˜¯ç”±å•çº¿ç¨‹æ¥å®Œæˆçš„ï¼Œæ‰€ä»¥ä»ç„¶å¯ä»¥ä¿è¯å•å‘½ä»¤æ“ä½œçš„åŸå­æ€§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è’‹å¾·é’§","uid":"1609687","ctime":1608595785,"ip_address":"","comment_id":268098,"utype":1}],"discussion_count":4,"race_medal":0,"score":"96097338172","product_id":100056701,"comment_content":"è€å¸ˆï¼Œredisæ”¯æŒå¤šçº¿ç¨‹åï¼Œæ€ä¹ˆå®ç°å•å‘½ä»¤æ“ä½œåŸå­æ€§çš„ï¼Ÿ","like_count":23,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511841,"discussion_content":"Redis 6.0ä¸­çš„å¤šçº¿ç¨‹åªæ˜¯æŒ‡ï¼Œåœ¨å®¢æˆ·ç«¯è¯·æ±‚æ¥æ”¶å’Œè§£æï¼Œä»¥åŠè¯·æ±‚åçš„æ•°æ®é€šè¿‡ç½‘ç»œè¿”å›ç»™å®¢æˆ·ç«¯æ—¶ï¼Œä½¿ç”¨äº†å¤šçº¿ç¨‹ã€‚è€Œå‘½ä»¤è¯·æ±‚æœ¬èº«çš„æ•°æ®è¯»å†™æ“ä½œè¿˜æ˜¯ç”±å•çº¿ç¨‹æ¥å®Œæˆçš„ï¼Œæ‰€ä»¥ä»ç„¶å¯ä»¥ä¿è¯å•å‘½ä»¤æ“ä½œçš„åŸå­æ€§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608595785,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1415619,"avatar":"https://static001.geekbang.org/account/avatar/00/15/99/c3/e4f408d4.jpg","nickname":"é™Œå…®","note":"","ucode":"00CE47CAECD5CD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553767,"discussion_content":"é˜»å¡ï¼Œå…¨å±€ç­‰å¾…é˜Ÿåˆ—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646061816,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1164531,"avatar":"https://static001.geekbang.org/account/avatar/00/11/c4/f3/92f654f1.jpg","nickname":"Bug? Feature!","note":"","ucode":"F8FA8A0094FBA0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":363997,"discussion_content":"å¤©å‘ ä½ çœ‹æ–‡ç« äº†å—ï¼Œè¿˜é—®è¿™é—®é¢˜ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617345966,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1934802,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/85/d2/045c63fb.jpg","nickname":"ç‹å»ºæ–°","note":"","ucode":"E3151DDC0EEF0D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":345560,"discussion_content":"å¤©å‘ ä½ çœ‹æ–‡ç« äº†å—ï¼Œè¿˜é—®è¿™é—®é¢˜ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611741572,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":263296,"user_name":"é‚£æ—¶åˆ»","can_delete":false,"product_type":"c1","uid":1150927,"ip_address":"","ucode":"B0D150856C3A4A","user_header":"https://static001.geekbang.org/account/avatar/00/11/8f/cf/890f82d6.jpg","comment_is_top":false,"comment_ctime":1606094787,"is_pvip":false,"discussion_count":13,"race_medal":1,"score":"78915506115","product_id":100056701,"comment_content":"Redis 6.0å¢åŠ äº†IOçº¿ç¨‹æ¥å¤„ç†ç½‘ç»œè¯·æ±‚ï¼Œå¦‚æœå®¢æˆ·ç«¯å…ˆå‘é€äº†ä¸€ä¸ª`set key1 val1`å†™å‘½ä»¤ï¼Œç´§æ¥ç€å‘é€ä¸€ä¸ª`get key1`è¯»å‘½ä»¤ã€‚è¯·é—®è€å¸ˆï¼Œç”±äºIOçº¿ç¨‹æ˜¯å¤šçº¿ç¨‹å¤„ç†çš„ï¼Œæ˜¯å¦ä¼šå¯¼è‡´`get key1`è¯»å‘½ä»¤ å…ˆäº `set key1 val1`å†™å‘½ä»¤æ‰§è¡Œå‘¢ï¼Ÿç»“æœå®¢æˆ·ç«¯è¯»åˆ°äº†key1çš„æ—§å€¼ã€‚","like_count":19,"discussions":[{"author":{"id":1049643,"avatar":"https://static001.geekbang.org/account/avatar/00/10/04/2b/68d6ac0d.jpg","nickname":"whiledoing","note":"","ucode":"1BEB769E13F47C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336145,"discussion_content":"ä¸ªäººåˆæ­¥ç†è§£ï¼šéœ€è¦çœ‹å®¢æˆ·ç«¯å®ç°äº†ï¼Œå¦‚æœå®¢æˆ·ç«¯ç”¨çº¿ç¨‹æ± å»è¿æ¥æœåŠ¡å™¨ï¼Œé‚£ä¹ˆå¤šä¸ªè®¿é—®å¯¹åº”ä¸åŒè¿æ¥ï¼Œå¯èƒ½å­˜åœ¨ä¹±åºï¼›å¦‚æœå®¢æˆ·ç«¯å°±ä¸€ä¸ªè¿æ¥ï¼Œé‚£ä¹ˆè¿æ¥å†…æ•°æ®è¯»å–æ˜¯TCPä¿åºçš„ï¼Œä¸ä¼šä¹±åºã€‚","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1608514334,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1193052,"avatar":"https://static001.geekbang.org/account/avatar/00/12/34/5c/6b4757a0.jpg","nickname":"å€ªå¤§äºº","note":"","ucode":"4798D69F3E86FB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328287,"discussion_content":"å¦‚æœæ˜¯åŒä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œç”¨çš„åº”è¯¥æ˜¯åŒä¸€ä¸ªsocketï¼Œé‚£ä¹ˆä¸¤ä¸ªæŒ‡ä»¤åœ¨ioçº¿ç¨‹è¯»å–ã€è§£æçš„æ—¶å€™å°±æ˜¯æœ‰åºçš„ï¼Œä¸»çº¿ç¨‹æ‰§è¡Œçš„æ—¶å€™ä¹Ÿæœ‰åºï¼Œä¸ä¼šè¯»åˆ°æ—§å€¼","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1606119747,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2253496,"avatar":"","nickname":"Geek_3d87cb","note":"","ucode":"F09334D60C3BC8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1193052,"avatar":"https://static001.geekbang.org/account/avatar/00/12/34/5c/6b4757a0.jpg","nickname":"å€ªå¤§äºº","note":"","ucode":"4798D69F3E86FB","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328586,"discussion_content":"ä¸€ä¸ªå®¢æˆ·ç«¯å»ºç«‹ä¸€ä¸ªsocketè¿˜æ˜¯ä¸€ä¸ªè¯·æ±‚å»ºç«‹ä¸€ä¸ªsocket","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606184546,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":328287,"ip_address":""},"score":328586,"extra":""},{"author":{"id":1128491,"avatar":"https://static001.geekbang.org/account/avatar/00/11/38/2b/9db9406b.jpg","nickname":"æ˜Ÿå¤œ","note":"","ucode":"3B46C09D994CEB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2253496,"avatar":"","nickname":"Geek_3d87cb","note":"","ucode":"F09334D60C3BC8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334593,"discussion_content":"ä¸€ä¸ªå®¢æˆ·ç«¯ä¸€ä¸ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607911986,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":328586,"ip_address":""},"score":334593,"extra":""}]},{"author":{"id":1035257,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cb/f9/75d08ccf.jpg","nickname":"Mr.èœœ","note":"","ucode":"C911B81198B3F5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336113,"discussion_content":"å¦‚æœå®¢æˆ·ç«¯åªæœ‰ä¸€ä¸ªçš„è¯ï¼ŒæœåŠ¡å™¨æ¥æ”¶å®¢æˆ·ç«¯çš„è¯·æ±‚æ˜¯æœ‰åºçš„ï¼Œä¸å­˜åœ¨ä½ è¯´çš„é—®é¢˜ã€‚è€Œåœ¨è¯»å†™åˆ†ç¦»çš„åœºæ™¯ï¼Œé‚£ä¹ˆä¸ç®¡æœåŠ¡å™¨æ˜¯å¦å­˜åœ¨å¤šçº¿ç¨‹ï¼Œéƒ½ä¼šå‡ºç°ä½ è¯´çš„é—®é¢˜ã€‚ä»¥ä¸ºsetå’Œgetä¸åœ¨ä¸€ä¸ªå®¢æˆ·ç«¯ä¸­ï¼Œå…¶æ•°æ®åŒæ­¥å­˜åœ¨ä¸€å®šçš„æ—¶å»¶ï¼Œè¿›è€Œå¾ˆæœ‰å¯èƒ½è¯»åˆ°é”™è¯¯çš„æ•°æ®ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1608481283,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1297635,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo7R9LibMTe6CF9sVIcZUee5xCVEAxiava7CUb37V3ic6eFYuWBgFelDqeA0wekG2ibA3HFic94PYJHWlA/132","nickname":"å±±é‡Œå°é¾™","note":"","ucode":"4ADA02F1ED59EA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407271,"discussion_content":"ä¸ä¼šï¼Œå› ä¸ºioçº¿ç¨‹æ˜¯ä¸socketç»‘å®šçš„ï¼Œsockerå†…æ‰§è¡Œæ˜¯æœ‰åºçš„","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1634963515,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1261360,"avatar":"https://static001.geekbang.org/account/avatar/00/13/3f/30/23f6b413.jpg","nickname":"äº”åä¹ç§’","note":"","ucode":"1F34F62193CFF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372966,"discussion_content":"å¦‚æœä¸æ˜¯æŒ‡å®šåœ¨ä¸¤ä¸ªçº¿ç¨‹ä¸­å‘é€setã€getçš„è¯ï¼Œå®¢æˆ·ç«¯å•çº¿ç¨‹ä¸­å‘é€äº†setå‘½ä»¤ï¼Œä¼šé˜»å¡ç­‰å¾…setå‘½ä»¤çš„è¿”å›ç»“æœï¼Œæ”¶åˆ°è¿”å›ç»“æœåæ‰ä¼šå‘é€getå‘½ä»¤ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1620544848,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1386818,"avatar":"https://static001.geekbang.org/account/avatar/00/15/29/42/43d4b1a8.jpg","nickname":"çƒ«çƒ«çƒ«","note":"","ucode":"C06018670DE76A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328280,"discussion_content":"æˆ‘è§‰å¾—æ˜¯æœ‰å¯èƒ½çš„ï¼Œå³ä½¿æ˜¯6.0ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œå¦‚æœè¿™ä¸¤ä¸ªå‘½ä»¤æ²¡æœ‰å†™å…¥Luaæ–‡ä»¶ä¸­æ‰§è¡Œçš„è¯ï¼Œä¸­é—´ä¹Ÿæœ‰å¯èƒ½è¢«å…¶å®ƒçº¿ç¨‹æ’å…¥å‘½ä»¤ï¼Œæ•ˆæœä¹Ÿå·®ä¸å¤šã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1606117886,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1470434,"avatar":"https://static001.geekbang.org/account/avatar/00/16/6f/e2/f3b05833.jpg","nickname":"Aî€² æ‹½ä¸«å¤´","note":"","ucode":"F875D99D18DF6E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1386818,"avatar":"https://static001.geekbang.org/account/avatar/00/15/29/42/43d4b1a8.jpg","nickname":"çƒ«çƒ«çƒ«","note":"","ucode":"C06018670DE76A","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":582606,"discussion_content":"æˆ‘ä¹Ÿè§‰å¾—æœ‰å¯èƒ½ä¹±åº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659523382,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":328280,"ip_address":"ä¸Šæµ·"},"score":582606,"extra":""}]},{"author":{"id":2536290,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/UswOHxYIocRX8LzhxbottcbUkwN0KcsLsw6Q8bFyXefCZzKnh6gCIKh2DicEeECTszLdJcl7l9TCdJzFcTay5Bw/132","nickname":"æœ¨åˆ","note":"","ucode":"6CC0E49A027E3E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377373,"discussion_content":"å¸Œæœ›è€å¸ˆèƒ½å›ç­”ä¸€ä¸‹@","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622619571,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1020629,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/92/d5/699384a0.jpg","nickname":"yeek","note":"","ucode":"A1C71023113CB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329480,"discussion_content":"åªè¦åœ¨redisæœåŠ¡ç«¯çš„socketé“¾æ¥ä¸­ï¼Œä¸æ˜¯åŒä¸€ä¸ªï¼Œå°±ä¸èƒ½ä¿è¯æœ‰åº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606389788,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2253496,"avatar":"","nickname":"Geek_3d87cb","note":"","ucode":"F09334D60C3BC8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328213,"discussion_content":"æˆ‘çš„ç†è§£ä¸»çº¿ç¨‹è·å–socket,è¿™ä¸€æ­¥æ”¶åˆ°çš„å®¢æˆ·ç«¯å‘½ä»¤æ˜¯æœ‰åºçš„,ç„¶ååªæ˜¯åˆ†é…ç»™ioçº¿ç¨‹å¤šçº¿ç¨‹å»è§£æè¯·æ±‚å’Œå†™å›socket,å‘½ä»¤è¿˜æ˜¯åœ¨ä¸»çº¿ç¨‹åœ¨æ‰§è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606106526,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1532404,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIvUlicgrWtibbDzwhLw5cQrDSy2JuE1mVvmXq11KQIwpLicgDuWfpp9asE0VCN6HhibPDWn7wBc2lfmA/132","nickname":"aã€","note":"","ucode":"590FE8DB111492","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2253496,"avatar":"","nickname":"Geek_3d87cb","note":"","ucode":"F09334D60C3BC8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":362375,"discussion_content":"å¤šçº¿ç¨‹è§£æè¯·æ±‚ï¼Œæœ‰æ²¡æœ‰å¯èƒ½æœ¬æ¥ä¸»çº¿ç¨‹å…ˆæ¥å—åˆ°çš„æ˜¯setï¼Œåæ¥å—getï¼Œç„¶åæ”¾åœ¨å…¨å±€ç­‰å¾…é˜Ÿåˆ—é‡Œï¼Œç»™ioçº¿ç¨‹å»å¤„ç†ï¼Œä½†æ˜¯getå…ˆè¢«ä¸€ä¸ªioçº¿ç¨‹è§£æå¥½ï¼Œç„¶åç»™ä¸»çº¿ç¨‹å»æ‰§è¡Œï¼Œè¿™ä¸å°±ä¼šæœ‰é—®é¢˜ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616933261,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":328213,"ip_address":""},"score":362375,"extra":""}]}]},{"had_liked":false,"id":263287,"user_name":"ç‹ä¸–è‰º","can_delete":false,"product_type":"c1","uid":1899435,"ip_address":"","ucode":"04DA844568766B","user_header":"https://static001.geekbang.org/account/avatar/00/1c/fb/ab/c0c29cda.jpg","comment_is_top":false,"comment_ctime":1606092694,"is_pvip":true,"discussion_count":4,"race_medal":0,"score":"57440667542","product_id":100056701,"comment_content":"å¤šçº¿ç¨‹ioå’Œepollå•¥åŒºåˆ«","like_count":14,"discussions":[{"author":{"id":1020629,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/92/d5/699384a0.jpg","nickname":"yeek","note":"","ucode":"A1C71023113CB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329481,"discussion_content":"epollè´Ÿè´£ä»ç½‘ç»œæ¥æ”¶æ•°æ®åˆ°å†…æ ¸ï¼Œå¤šçº¿ç¨‹ioä»epollè®°å½•çš„socketä¸­å°†æ•°æ®ä»å†…æ ¸è¯»å–åˆ°ç”¨æˆ·æ€","likes_number":28,"is_delete":false,"is_hidden":false,"ctime":1606389906,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1035257,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cb/f9/75d08ccf.jpg","nickname":"Mr.èœœ","note":"","ucode":"C911B81198B3F5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336114,"discussion_content":"è¿™æ˜¯2ä¸ªæ¦‚å¿µï¼Œä½†é¦–å…ˆè¿˜æ˜¯è¦äº†è§£epollçš„æœºåˆ¶ã€‚epollæ˜¯å†…æ ¸å»å¤„ç†å’Œæ¥æ”¶ç½‘ç»œæ•°æ®ï¼Œä½†å¦‚æœç½‘ç»œè¯·æ±‚å¾ˆå¤šï¼Œå®¢æˆ·ç«¯ä¹Ÿå¾ˆå¤šï¼Œé‚£ä¹ˆå•çº¿ç¨‹çš„epollçš„å¤„ç†è¿˜æ˜¯é¡ºåºéå†çš„ï¼ˆå¯ä»¥å‚è€ƒselectï¼‰ï¼›å¦‚æœè¿™æ—¶å€™ï¼Œç”¨å¤šçº¿ç¨‹å»åˆ†åˆ«å¤„ç†socketæ•°æ®ï¼Œé‚£ä¹ˆä»–ä»¬å°±å¯ä»¥å¹¶è¡Œçš„æ¥æ”¶æ•°æ®ï¼Œå¢åŠ ç›¸åŒæ—¶é—´çš„ç½‘ç»œæ•°æ®ååç‡ï¼Œä»è€Œæå‡æ€§èƒ½ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1608481577,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1780797,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2c/3d/0bd58aa4.jpg","nickname":"Em","note":"","ucode":"32012A5C603C8A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1035257,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cb/f9/75d08ccf.jpg","nickname":"Mr.èœœ","note":"","ucode":"C911B81198B3F5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578405,"discussion_content":"ä»€ä¹ˆå•Š   epolléå†ä¹Ÿæ˜¯éå†çš„æ´»è·ƒçš„å¥—æ¥å­—  selectå…¨éƒ¨éå†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656701719,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":336114,"ip_address":""},"score":578405,"extra":""}]},{"author":{"id":2359194,"avatar":"https://static001.geekbang.org/account/avatar/00/23/ff/9a/f7d84a69.jpg","nickname":"Andrew.Fang","note":"","ucode":"1D754BBFC223F4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335841,"discussion_content":"redisçš„å•çº¿ç¨‹å’Œå¤šçº¿ç¨‹éƒ½æ˜¯ä½¿ç”¨äº†epollæœºåˆ¶ï¼Œåº•å±‚éƒ½ç”¨åˆ°äº†å¤šè·¯æœç”¨æœºåˆ¶ï¼Œåªæ˜¯é‡‡ç”¨çš„çº¿ç¨‹æ¨¡å‹ä¸åŒã€‚ä¼°è®¡æ¯ä¸ªioçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªselectorç”¨æ¥æ³¨å†Œè¿æ¥ï¼Œä½†æ˜¯æ˜¯åªæ³¨å†Œä¸€ä¸ªè¿˜æ˜¯å¤šä¸ªï¼Œæ²¡è¯´æ˜ç™½ï¼Œä¼°è®¡ä¸ºäº†ç®€åŒ–ï¼Œåªæ³¨å†Œä¸€ä¸ªï¼Œå› ä¸ºä¸€ä¸ªçº¿ç¨‹è¿˜å¯¹åº”ä¸€å¯¹è¯»å†™ç¼“å†²åŒºï¼Œä¸å¥½å¤„ç†å¤šä¸ªè¿æ¥","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1608349174,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":263315,"user_name":"ä¸œ","can_delete":false,"product_type":"c1","uid":1043947,"ip_address":"","ucode":"0FF5018422CEA9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ed/eb/88cac7a5.jpg","comment_is_top":false,"comment_ctime":1606099836,"is_pvip":false,"replies":[{"id":"97932","content":"è¿™æ˜¯ä¸ªå¾ˆå¥½çš„ç”¨ä¾‹åœºæ™¯ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"è’‹å¾·é’§","uid":"1609687","ctime":1608997733,"ip_address":"","comment_id":263315,"utype":1}],"discussion_count":1,"race_medal":0,"score":"48850740092","product_id":100056701,"comment_content":"6.0çš„æƒé™ç»†ç²’åº¦æ§åˆ¶å¯¹æˆ‘ä»¬å¾ˆæœ‰ç”¨ï¼Œä»¥å‰å¤šä¸ªå¾®æœåŠ¡å…±äº«åŒä¸€ä¸ªredisé›†ç¾¤ï¼Œæƒé™æ²¡æ³•éš”ç¦»ï¼Œç°åœ¨å¯ä»¥æ§åˆ¶ä¸åŒçš„æœåŠ¡ä½¿ç”¨ä¸åŒçš„keyå‰ç¼€ï¼Œä»è€Œå¾ˆå¥½çš„éš”ç¦»äº†æœåŠ¡ï¼Œå¯ä»¥æœ‰æ•ˆé¿å…è¯¯æ“ä½œï¼Œæˆ–è€…ä¸€ä¸ªæœåŠ¡çš„bugå½±å“åˆ°æ‰€æœ‰æœåŠ¡ã€‚","like_count":11,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510145,"discussion_content":"è¿™æ˜¯ä¸ªå¾ˆå¥½çš„ç”¨ä¾‹åœºæ™¯ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608997733,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":268769,"user_name":"ğŸŒ¾ğŸŒ¾ğŸŒ¾å°éº¦ğŸŒ¾ğŸŒ¾ğŸŒ¾","can_delete":false,"product_type":"c1","uid":2046490,"ip_address":"","ucode":"ECB0CE18D5B49A","user_header":"https://static001.geekbang.org/account/avatar/00/1f/3a/1a/ae3c1492.jpg","comment_is_top":false,"comment_ctime":1608344326,"is_pvip":false,"replies":[{"id":"97737","content":"æˆ‘ä»¬è¯´çš„ç¼“å­˜æ±¡æŸ“ä¸€èˆ¬æ˜¯æŒ‡ç¼“å­˜ç³»ç»Ÿé‡Œé¢çš„æ•°æ®ä¸è¢«è®¿é—®ï¼Œä½†æ˜¯ç”±äºç¼“å­˜ç­–ç•¥æ²¡æœ‰åŠæ—¶æ·˜æ±°ï¼Œåˆæ»ç•™åœ¨ç¼“å­˜ä¸­ï¼Œå¯¼è‡´ç¼“å­˜ç©ºé—´è¢«å ç”¨ï¼Œä½†æ˜¯åˆä¸æœåŠ¡è®¿é—®è¯·æ±‚ï¼Œé€ æˆäº†æ±¡æŸ“ã€‚<br><br>å®¢æˆ·ç«¯ç¼“å­˜çš„ä¸»è¦é—®é¢˜æ˜¯è¦å’Œç¼“å­˜ç³»ç»Ÿä¸­çš„æ•°æ®ä¿å­˜ä¸€è‡´ï¼Œä¹Ÿå°±æ˜¯è¯´ç¼“å­˜ç³»ç»Ÿä¸­çš„æ•°æ®è¢«æ›´æ–°äº†ï¼Œå®¢æˆ·ç«¯éœ€è¦åŠæ—¶åšinvalidationæ“ä½œï¼Œé¿å…åº”ç”¨åœ¨å®¢æˆ·ç«¯ç¼“å­˜ä¸­è¯»åˆ°æ—§çš„ç¼“å­˜æ•°æ®ã€‚<br><br>å†…å­˜æ³„éœ²ä¸€èˆ¬æ˜¯å†…å­˜æ²¡æœ‰æ­£ç¡®å›æ”¶å¯¼è‡´çš„ï¼Œå’Œç¼“å­˜æ±¡æŸ“ã€å®¢æˆ·ç«¯ç¼“å­˜å€’æ²¡æœ‰å¿…ç„¶çš„è”ç³»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è’‹å¾·é’§","uid":"1609687","ctime":1608684400,"ip_address":"","comment_id":268769,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31673115398","product_id":100056701,"comment_content":"è¯·é—®è€å¸ˆå®¢æˆ·ç«¯ç¼“å­˜ç«¯ç¼“å­˜ä¼šä¸ä¼šå¯¼è‡´ç¼“å­˜æ±¡æŸ“åŠå†…å­˜æ³„éœ²é—®é¢˜ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512030,"discussion_content":"æˆ‘ä»¬è¯´çš„ç¼“å­˜æ±¡æŸ“ä¸€èˆ¬æ˜¯æŒ‡ç¼“å­˜ç³»ç»Ÿé‡Œé¢çš„æ•°æ®ä¸è¢«è®¿é—®ï¼Œä½†æ˜¯ç”±äºç¼“å­˜ç­–ç•¥æ²¡æœ‰åŠæ—¶æ·˜æ±°ï¼Œåˆæ»ç•™åœ¨ç¼“å­˜ä¸­ï¼Œå¯¼è‡´ç¼“å­˜ç©ºé—´è¢«å ç”¨ï¼Œä½†æ˜¯åˆä¸æœåŠ¡è®¿é—®è¯·æ±‚ï¼Œé€ æˆäº†æ±¡æŸ“ã€‚\n\nå®¢æˆ·ç«¯ç¼“å­˜çš„ä¸»è¦é—®é¢˜æ˜¯è¦å’Œç¼“å­˜ç³»ç»Ÿä¸­çš„æ•°æ®ä¿å­˜ä¸€è‡´ï¼Œä¹Ÿå°±æ˜¯è¯´ç¼“å­˜ç³»ç»Ÿä¸­çš„æ•°æ®è¢«æ›´æ–°äº†ï¼Œå®¢æˆ·ç«¯éœ€è¦åŠæ—¶åšinvalidationæ“ä½œï¼Œé¿å…åº”ç”¨åœ¨å®¢æˆ·ç«¯ç¼“å­˜ä¸­è¯»åˆ°æ—§çš„ç¼“å­˜æ•°æ®ã€‚\n\nå†…å­˜æ³„éœ²ä¸€èˆ¬æ˜¯å†…å­˜æ²¡æœ‰æ­£ç¡®å›æ”¶å¯¼è‡´çš„ï¼Œå’Œç¼“å­˜æ±¡æŸ“ã€å®¢æˆ·ç«¯ç¼“å­˜å€’æ²¡æœ‰å¿…ç„¶çš„è”ç³»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608684400,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":271163,"user_name":"Dolly","can_delete":false,"product_type":"c1","uid":1513825,"ip_address":"","ucode":"CC74978F393055","user_header":"https://static001.geekbang.org/account/avatar/00/17/19/61/119cbde2.jpg","comment_is_top":false,"comment_ctime":1609426040,"is_pvip":false,"replies":[{"id":"98413","content":"é™¤äº†ä¿è¯ä¸€è‡´æ€§ï¼Œå®¢æˆ·ç«¯ç¼“å­˜æœ¬èº«ä¹Ÿèƒ½åŠ é€Ÿè®¿é—®ï¼Œæ‰€ä»¥ï¼Œè¿™ä¸ªç‰¹æ€§æ˜¯Redis 6.0ä¸­æ¯”è¾ƒé‡è¦çš„ä¸€ä¸ªï¼Œå¯ä»¥é‡ç‚¹å…³æ³¨ :)","user_name":"ä½œè€…å›å¤","user_name_real":"è’‹å¾·é’§","uid":"1609687","ctime":1609718876,"ip_address":"","comment_id":271163,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27379229816","product_id":100056701,"comment_content":"å®¢æˆ·ç«¯ç¼“å­˜é‚£ä¸ªç›´æ¥è§£å†³rediså’Œæœ¬åœ°ç¼“å­˜çš„ä¸€è‡´æ€§é—®é¢˜","like_count":7,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512853,"discussion_content":"é™¤äº†ä¿è¯ä¸€è‡´æ€§ï¼Œå®¢æˆ·ç«¯ç¼“å­˜æœ¬èº«ä¹Ÿèƒ½åŠ é€Ÿè®¿é—®ï¼Œæ‰€ä»¥ï¼Œè¿™ä¸ªç‰¹æ€§æ˜¯Redis 6.0ä¸­æ¯”è¾ƒé‡è¦çš„ä¸€ä¸ªï¼Œå¯ä»¥é‡ç‚¹å…³æ³¨ :)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609718876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":263426,"user_name":"pretty.zh","can_delete":false,"product_type":"c1","uid":2257169,"ip_address":"","ucode":"E22A1817B39F22","user_header":"https://static001.geekbang.org/account/avatar/00/22/71/11/2d5cdb14.jpg","comment_is_top":false,"comment_ctime":1606131575,"is_pvip":false,"replies":[{"id":"97928","content":"ä½ è¯´çš„æ˜¯æŒ‡Redisä¸­çš„æ•´æ•°å¯¹è±¡å…±äº«æ± ä¹ˆï¼Ÿä¾‹å¦‚0åˆ°9999è¿™äº›æ•´æ•°ä¼šè¢«é¢‘ç¹ç”¨åˆ°ï¼Œæ‰€ä»¥ï¼Œä½¿ç”¨å…±äº«å¯¹è±¡æ¥è¡¨ç¤ºè¿™äº›æ•°ï¼Œæ¯ä¸ªæ•°åªå­˜ä¸€ä»½Stringå¯¹è±¡ï¼Œå¯ä»¥èŠ‚çœå†…å­˜ç©ºé—´ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è’‹å¾·é’§","uid":"1609687","ctime":1608997002,"ip_address":"","comment_id":263426,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18786000759","product_id":100056701,"comment_content":"è€å¸ˆï¼Œrediså¸¸é‡æ± æ˜¯ä»€ä¹ˆ","like_count":4,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510187,"discussion_content":"ä½ è¯´çš„æ˜¯æŒ‡Redisä¸­çš„æ•´æ•°å¯¹è±¡å…±äº«æ± ä¹ˆï¼Ÿä¾‹å¦‚0åˆ°9999è¿™äº›æ•´æ•°ä¼šè¢«é¢‘ç¹ç”¨åˆ°ï¼Œæ‰€ä»¥ï¼Œä½¿ç”¨å…±äº«å¯¹è±¡æ¥è¡¨ç¤ºè¿™äº›æ•°ï¼Œæ¯ä¸ªæ•°åªå­˜ä¸€ä»½Stringå¯¹è±¡ï¼Œå¯ä»¥èŠ‚çœå†…å­˜ç©ºé—´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608997002,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":263283,"user_name":"kevin","can_delete":false,"product_type":"c1","uid":1629537,"ip_address":"","ucode":"8A0F58E2723893","user_header":"https://static001.geekbang.org/account/avatar/00/18/dd/61/544c2838.jpg","comment_is_top":false,"comment_ctime":1606091735,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"18785960919","product_id":100056701,"comment_content":"è¯·é—®ä¸‹ï¼Œredisçš„å®¢æˆ·ç«¯ç¼“å­˜ä¸ä¸šåŠ¡å®ä¾‹çš„æœ¬åœ°ç¼“å­˜æœ‰åŒºåˆ«å—ï¼Ÿ","like_count":4},{"had_liked":false,"id":328056,"user_name":"å¬ç§‹","can_delete":false,"product_type":"c1","uid":2564684,"ip_address":"","ucode":"03CCD3B14980FA","user_header":"https://static001.geekbang.org/account/avatar/00/27/22/4c/d413494f.jpg","comment_is_top":false,"comment_ctime":1640505821,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5935473117","product_id":100056701,"comment_content":"è€å¸ˆï¼Œå®¢æˆ·ç«¯ç¼“å­˜çš„æ™®é€šæ¨¡å¼ï¼Œå½“ä¸åœ¨æ”¶åˆ°æœåŠ¡ç«¯çš„é€šçŸ¥æ—¶ï¼ŒæœåŠ¡ç«¯ çš„ key è¢«ä¿®æ”¹äº†ï¼Œåº”ç”¨è¯»çš„æ˜¯ç¼“å­˜åˆ°æœ¬åœ°çš„æ•°æ®ï¼Œé‚£ä¸å°±è¯»åˆ°æ—§æ•°æ®äº†å—ï¼Ÿ","like_count":1},{"had_liked":false,"id":287468,"user_name":"èŠ‹å¤´","can_delete":false,"product_type":"c1","uid":1227492,"ip_address":"","ucode":"A9C875548E4EE5","user_header":"https://static001.geekbang.org/account/avatar/00/12/ba/e4/6df89add.jpg","comment_is_top":false,"comment_ctime":1617963775,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5912931071","product_id":100056701,"comment_content":"Redis 6.0æ–°ç‰¹æ€§:1.å¤„ç†ç½‘ç»œIOé‡‡ç”¨å¤šçº¿ç¨‹æ¨¡å¼2.æœåŠ¡ç«¯ååŠ©çš„å®¢æˆ·ç«¯çš„ç¼“å­˜ï¼ˆæ™®é€šæ¨¡å¼å’Œå¹¿æ’­æ¨¡å¼åŠé‡å®šå‘æ¨¡å¼é€šçŸ¥å®¢æˆ·ç«¯keyå¤±æ•ˆçš„ä¿¡æ¯ï¼‰3.å®ç°RESP3 åè®®ï¼Œæ”¯æŒå¤šç§ç±»å‹åŒºåˆ†ç¼–ç 4.å®ä¾‹çš„ç»†ç²’åº¦è®¿é—®æƒé™æ§åˆ¶ï¼ˆä¸åŒç”¨æˆ·ä¸åŒæƒé™åŠç”¨æˆ·ä¸ºç²’åº¦çš„å‘½ä»¤æƒé™åŠæ”¯æŒä»¥keyä¸ºç²’åº¦ç”¨æˆ·æƒé™ï¼‰","like_count":1},{"had_liked":false,"id":281045,"user_name":"Kvicii.Y","can_delete":false,"product_type":"c1","uid":1442588,"ip_address":"","ucode":"446BFA633569EA","user_header":"https://static001.geekbang.org/account/avatar/00/16/03/1c/c9fe6738.jpg","comment_is_top":false,"comment_ctime":1614561028,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5909528324","product_id":100056701,"comment_content":"è¿™ä¸ªå¤šIOçº¿ç¨‹æˆ‘æ²¡æœ‰çœ‹æ‡‚ä½œç”¨ã€èƒ½è§£é‡Šä¸‹å—","like_count":1},{"had_liked":false,"id":280483,"user_name":"neohope","can_delete":false,"product_type":"c1","uid":1043475,"ip_address":"","ucode":"C0268F6E7E2B6E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/13/49e98289.jpg","comment_is_top":false,"comment_ctime":1614231682,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"5909198978","product_id":100056701,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘ç¿»äº†ä¸€ä¸‹6.2çš„æºç ï¼Œå¤šçº¿ç¨‹IOå¤„ç†è¿™ä¸ªåœ°æ–¹ï¼Œä¸»çº¿ç¨‹é€šçŸ¥IOçº¿ç¨‹å¤„ç†æ•°æ®åï¼Œçº¿ç¨‹å¥½åƒä¸ç®—æ˜¯é˜»å¡çŠ¶æ€å§ï¼Ÿ<br><br>int handleClientsWithPendingReadsUsingThreads(void) å‡½æ•°é‡Œï¼Œä¸»çº¿ç¨‹ä¼šä¸€æ¬¡æ€§å°†å¤šä¸ªæ¥æ”¶è¯·æ±‚åˆ†é…ç»™å¤šä¸ªIOçº¿ç¨‹ï¼Œç„¶åä¸€ä¸ªæ­»å¾ªç¯ç­‰å¾…IOçº¿ç¨‹å…¨éƒ¨å¤„ç†å®Œæ¯•ï¼Œä½†çº¿ç¨‹çŠ¶æ€åº”è¯¥æ˜¯è¿è¡ŒçŠ¶æ€ï¼Œä¸æ˜¯é˜»å¡çŠ¶æ€å§ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1016575,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/82/ff/00e7614e.jpg","nickname":"robyy","note":"","ucode":"773337C9942A7F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":355873,"discussion_content":"æ­»å¾ªç¯å°±æ˜¯é˜»å¡å§ï¼Œè¿™æ—¶ä¸»çº¿ç¨‹æ— æ³•æ‰§è¡Œå…¶ä»–æ“ä½œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615498608,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1325282,"avatar":"https://static001.geekbang.org/account/avatar/00/14/38/e2/28aa8e6c.jpg","nickname":"ä¼šç©code","note":"","ucode":"9220B072AF68C7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1016575,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/82/ff/00e7614e.jpg","nickname":"robyy","note":"","ucode":"773337C9942A7F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547846,"discussion_content":"è¿™ä¸ªæ—¶å€™å¦‚æœæœ‰å…¶ä»–è¯·æ±‚è¿›æ¥å‘¢ï¼Ÿä¸»çº¿ç¨‹è¿˜èƒ½æ¥æ”¶å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642901888,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":355873,"ip_address":""},"score":547846,"extra":""},{"author":{"id":2365133,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLR2YXdT0AticVATPbtpd1LLOAA0FE1uRJstglZeBs1bAiaPB2PkEnlibIFtUPg1gsseribTib5Oiaw0BBA/132","nickname":"Geek_0cfc2d","note":"","ucode":"4E7A034578A19E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1325282,"avatar":"https://static001.geekbang.org/account/avatar/00/14/38/e2/28aa8e6c.jpg","nickname":"ä¼šç©code","note":"","ucode":"9220B072AF68C7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552660,"discussion_content":"ä¸èƒ½ï¼Œä¼šä¸€ç›´ç­‰å¾…IOçº¿ç¨‹å¤„ç†å®Œæ¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645539321,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":547846,"ip_address":""},"score":552660,"extra":""}]}]},{"had_liked":false,"id":272375,"user_name":"é™Œä¸ŠèŠ±å¼€","can_delete":false,"product_type":"c1","uid":1217933,"ip_address":"","ucode":"F623E6AA54D224","user_header":"https://static001.geekbang.org/account/avatar/00/12/95/8d/e27e5c7a.jpg","comment_is_top":false,"comment_ctime":1610071225,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5905038521","product_id":100056701,"comment_content":"ä¸»çº¿ç¨‹æ¥æ”¶å®Œè¯·æ±‚ä»¥åï¼Œé€šè¿‡è½®è¯¢çš„æ–¹å¼äº¤ç»™IOçº¿ç¨‹å¤„ç†ï¼ŒIOå¤„ç†çš„é€Ÿåº¦å¯èƒ½ä¼šå­˜åœ¨ä¸ä¸€è‡´çš„æƒ…å†µï¼Œå¦‚æœä¿è¯ä¸»çº¿ç¨‹åœ¨æ‰§è¡Œå‘½ä»¤çš„æ—¶å€™æ˜¯æŒ‰ç…§è½®è¯¢çš„é¡ºåºï¼Ÿ","like_count":1},{"had_liked":false,"id":353532,"user_name":"Aî€² æ‹½ä¸«å¤´","can_delete":false,"product_type":"c1","uid":1470434,"ip_address":"ä¸Šæµ·","ucode":"F875D99D18DF6E","user_header":"https://static001.geekbang.org/account/avatar/00/16/6f/e2/f3b05833.jpg","comment_is_top":false,"comment_ctime":1659524333,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1659524333","product_id":100056701,"comment_content":"å¤šçº¿ç¨‹io  å’Œ  ioå¤šè·¯å¤ç”¨æœ‰å•¥åŒºåˆ«ï¼Ÿ æˆ‘æ€ä¹ˆæ„Ÿè§‰è¿™ä¸¤ä¸ªæ˜¯ä¸€ä¸ªå’§","like_count":0},{"had_liked":false,"id":314631,"user_name":"cake","can_delete":false,"product_type":"c1","uid":1966533,"ip_address":"","ucode":"55A7FC6CC1204C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/01/c5/b48d25da.jpg","comment_is_top":false,"comment_ctime":1633266828,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633266828","product_id":100056701,"comment_content":"å®¢æˆ·ç«¯éœ€è¦æ ¹æ®æ“ä½œçš„å‘½ä»¤æˆ–æ˜¯æ•°æ®ç±»å‹è‡ªè¡Œå¯¹ä¼ è¾“çš„æ•°æ®è¿›è¡Œè§£ç ï¼Œå¢åŠ äº†å®¢æˆ·ç«¯å¼€å‘å¤æ‚åº¦   åº”è¯¥æ˜¯å¯¹ä¼ è¾“çš„æ•°æ®è¿›è¡Œç¼–ç å­ 0.0ï¼Ÿ","like_count":0},{"had_liked":false,"id":299537,"user_name":"å“¦","can_delete":false,"product_type":"c1","uid":2326134,"ip_address":"","ucode":"C776659DED9D79","user_header":"https://static001.geekbang.org/account/avatar/00/23/7e/76/368394bf.jpg","comment_is_top":false,"comment_ctime":1624697216,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1624697216","product_id":100056701,"comment_content":"è¯·é—®ï¼Œè¿™é‡ŒRedis6.0çš„å¤šçº¿ç¨‹æ¨¡å¼æ˜¯ä¸æ˜¯å¯ä»¥ç†è§£ä¸ºå¤šReactorå•çº¿ç¨‹çš„æ¨¡å¼","like_count":0,"discussions":[{"author":{"id":1099484,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c6/dc/37dac825.jpg","nickname":"é˜¿è±ª","note":"","ucode":"AF3CB1CE262CEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536805,"discussion_content":"åº”è¯¥æ˜¯çš„ï¼Œå¤šä¸ªrecatorå¤„ç†ç½‘ç»œè¯·æ±‚è§£æå·¥ä½œï¼Œå•workerçº¿ç¨‹æ‰§è¡Œå‘½ä»¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638871776,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296956,"user_name":"æˆ‘","can_delete":false,"product_type":"c1","uid":2277195,"ip_address":"","ucode":"49C9AFFB997A3F","user_header":"https://static001.geekbang.org/account/avatar/00/22/bf/4b/2acf59c1.jpg","comment_is_top":false,"comment_ctime":1623239212,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1623239212","product_id":100056701,"comment_content":"redis6æ–°çš„è¿‡æœŸkeyæ‰«ææœºåˆ¶ï¼Œç›¸æ¯”äºredis4å¯ä»¥æœ‰æ•ˆçš„é˜²æ­¢è¿‡æœŸkeyå †ç§¯ï¼Œå¯ä»¥èŠ‚çº¦æˆæœ¬ã€‚","like_count":0},{"had_liked":false,"id":296387,"user_name":"Acã€","can_delete":false,"product_type":"c1","uid":1610575,"ip_address":"","ucode":"7E7A8458372F33","user_header":"https://static001.geekbang.org/account/avatar/00/18/93/4f/61edeea6.jpg","comment_is_top":false,"comment_ctime":1622949982,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622949982","product_id":100056701,"comment_content":"å¯¹äºRedis 6.0 æ¥è¯´ï¼Œå¦‚æœå¼€å¯å¤š IO çº¿ç¨‹çš„è¯ï¼Œå°±ä¸ç”¨ epollã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¤š IO çº¿ç¨‹æ˜¯ epoll çš„ä¸€ä¸ªæ›¿ä»£æ–¹æ¡ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":293408,"user_name":"Geek_zt","can_delete":false,"product_type":"c1","uid":2094956,"ip_address":"","ucode":"4C70D267B90D03","user_header":"https://static001.geekbang.org/account/avatar/00/1f/f7/6c/c5997b0b.jpg","comment_is_top":false,"comment_ctime":1621385106,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1621385106","product_id":100056701,"comment_content":"å®¢æˆ·ç«¯ï¼ŸæœåŠ¡ç«¯ï¼Ÿæ˜¯æŒ‡ä»€ä¹ˆï¼Œéƒ½æ˜¯rediså®ä¾‹ï¼Œè¿˜æ˜¯ä¸€ä¸ªåç«¯ä¸ºå®¢æˆ·ç«¯ï¼Œrediså®ä¾‹ä¸ºæœåŠ¡ç«¯","like_count":0,"discussions":[{"author":{"id":1650562,"avatar":"https://static001.geekbang.org/account/avatar/00/19/2f/82/bd80d7de.jpg","nickname":"Ben","note":"","ucode":"E436EE4CA7C146","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385344,"discussion_content":"ä¸€èˆ¬æœåŠ¡ç«¯æŒ‡redis serverï¼ˆå®ä¾‹ï¼‰ï¼Œå®¢æˆ·ç«¯å°±æ˜¯è®¿é—®redis serverçš„åº”ç”¨","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1627009041,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286681,"user_name":"escray","can_delete":false,"product_type":"c1","uid":1020525,"ip_address":"","ucode":"1F4204930E47C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","comment_is_top":false,"comment_ctime":1617497024,"is_pvip":true,"discussion_count":0,"race_medal":2,"score":"1617497024","product_id":100056701,"comment_content":"Redis ä½¿ç”¨å¤š IO çº¿ç¨‹å¤„ç†ç½‘ç»œè¯·æ±‚ï¼Œå•çº¿ç¨‹å¤„ç†è¯»å†™å‘½ä»¤ï¼Œè¿™åº”è¯¥æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ trade-offã€‚<br><br>ä¸çŸ¥é“å›½å†…å…¬å¸é‡‡ç”¨ Redis 6.0 çš„å¤šä¸å¤šï¼Œå¯¹é‚£äº›åšäº†äºŒæ¬¡å¼€å‘çš„ï¼Œå¯èƒ½å‡çº§ä¼šå›°éš¾ä¸€äº›ï¼›ç›¸å¯¹è€Œè¨€ï¼Œå¯èƒ½å°å›¢é˜Ÿæ›´å®¹æ˜“å‡çº§ã€‚<br><br>å¯¹äºè¯¾åé¢˜ï¼Œå°ç™½æ— ä»è§£ç­”ï¼Œåªèƒ½æ£æµ‹ã€‚<br><br>æ˜¯å¦éœ€è¦å¤šçº¿ç¨‹ç½‘ç»œ IO å¤„ç†ä»¥åŠæœåŠ¡ç«¯ååŠ©çš„å®¢æˆ·ç«¯ç¼“å­˜ï¼Œå¯èƒ½éœ€è¦çœ‹å…·ä½“çš„ä¸šåŠ¡åœºæ™¯ï¼›ç»†ç²’åº¦çš„æƒé™æ§åˆ¶å’Œ RESP 3 åè®®æ„Ÿè§‰ä¼¼ä¹æ¯”è¾ƒæœ‰ç”¨ã€‚","like_count":0},{"had_liked":false,"id":278798,"user_name":"æ›¾æ³½æµ©","can_delete":false,"product_type":"c1","uid":1104601,"ip_address":"","ucode":"A7E5CF9E1571A2","user_header":"https://static001.geekbang.org/account/avatar/00/10/da/d9/f051962f.jpg","comment_is_top":false,"comment_ctime":1613353875,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1613353875","product_id":100056701,"comment_content":"è€å¸ˆï¼Œå®¢æˆ·ç«¯ç¼“å­˜æ˜¯è¦è‡ªå·±æ ¹æ®trackingç‰¹æ€§åœ¨ä¸šåŠ¡ä¸­å»å®ç°å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":278308,"user_name":"å°è½¨é“ç‹å­","can_delete":false,"product_type":"c1","uid":2430899,"ip_address":"","ucode":"4319DB2F46D14A","user_header":"","comment_is_top":false,"comment_ctime":1612865654,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612865654","product_id":100056701,"comment_content":"ä¸»çº¿ç¨‹å’Œioçº¿ç¨‹äº¤äº’é˜Ÿåˆ—ç±»ä¼¼dpdkçš„æ— é”é˜Ÿåˆ—å—ï¼Ÿioçº¿ç¨‹æ€ä¹ˆæ„ŸçŸ¥ä¸»çº¿ç¨‹æœ‰æ¶ˆæ¯æ‰”è¿‡æ¥äº†ï¼Ÿ","like_count":0},{"had_liked":false,"id":277856,"user_name":"Geek_1e8830","can_delete":false,"product_type":"c1","uid":1506574,"ip_address":"","ucode":"CD84A5AAAE6872","user_header":"","comment_is_top":false,"comment_ctime":1612623638,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612623638","product_id":100056701,"comment_content":"æƒé™æ§åˆ¶åˆ°keyè¿™ä¸ªçº§åˆ«å¯¹æ€§èƒ½ä¼šä¸ä¼šæœ‰å½±å“ï¼Ÿ","like_count":0},{"had_liked":false,"id":277213,"user_name":"èŒ«å†œ","can_delete":false,"product_type":"c1","uid":1206365,"ip_address":"","ucode":"71F7143644C9CB","user_header":"https://static001.geekbang.org/account/avatar/00/12/68/5d/1ccee378.jpg","comment_is_top":false,"comment_ctime":1612317727,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612317727","product_id":100056701,"comment_content":"1ï¼Œä¸»çº¿ç¨‹ç­‰å¾…ioçº¿ç¨‹å†™å®Œæ¸…ç©ºé˜Ÿåˆ—ï¼Œé˜Ÿåˆ—é‡Œå­˜çš„æ˜¯ä»€ä¹ˆï¼Ÿ<br>2ï¼Œç­‰å¾…å†™å®Œæ˜¯è¯´ä¸»çº¿ç¨‹æ˜¯ä¸€æ‰¹ä¸€æ‰¹çš„å¤„ç†è¯·æ±‚å—ï¼Œæ˜¯å¤„ç†å®Œä¸€æ‰¹å†æ¥ä¸€æ‰¹å¤„ç†ï¼Ÿ","like_count":0},{"had_liked":false,"id":267089,"user_name":"Geek_feee06","can_delete":false,"product_type":"c1","uid":1736547,"ip_address":"","ucode":"DB0C3DEEBCD502","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/4qo5a7dgS8002fyNiciczVEWyaHH9Jw0WPoO59aRlIC8XNTRFNuMp3l8ELeC4DSY4yL84klibWIjZaicfL09P2aamA/132","comment_is_top":false,"comment_ctime":1607592255,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607592255","product_id":100056701,"comment_content":"è¿™ç§ç›‘æµ‹å¸¦æœ‰å‰ç¼€çš„ key çš„å¹¿æ’­æ¨¡å¼ï¼Œä¸etcdçš„watch --prefixåŠŸèƒ½ç±»ä¼¼ã€‚ä¸åŒç‚¹åœ¨äºRedisè¿”å›ç»™å®¢æˆ·ç«¯çš„æ˜¯invalidateæ¶ˆæ¯ï¼Œè€Œetcdæ˜¯è¿”å›æ›´æ–°åçš„å€¼ã€‚æ‰€ä»¥etcdä¸­è¿™ä¸ªåŠŸèƒ½ä¸€èˆ¬ç”¨äºé…ç½®å…±äº«ä¸æœåŠ¡å‘ç°ï¼Œè€ŒRedisç›´æ¥è¿”å›æ— æ•ˆï¼Œå®¢æˆ·ç«¯è‹¥æƒ³è·å–æœ€æ–°çš„å€¼ï¼Œå°±å¾—é‡æ–°è¯»å–ã€‚æœ‰ä¸ªç–‘é—®ä¸ºä»€ä¹ˆRedisä¸åƒetcdè¿™æ ·ä¹Ÿè¿”å›æ›´æ–°åçš„å€¼ç»™å®¢æˆ·ç«¯å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":267082,"user_name":"Geek_feee06","can_delete":false,"product_type":"c1","uid":1736547,"ip_address":"","ucode":"DB0C3DEEBCD502","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/4qo5a7dgS8002fyNiciczVEWyaHH9Jw0WPoO59aRlIC8XNTRFNuMp3l8ELeC4DSY4yL84klibWIjZaicfL09P2aamA/132","comment_is_top":false,"comment_ctime":1607591325,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607591325","product_id":100056701,"comment_content":"è¿™ç§ç›‘æµ‹å¸¦æœ‰å‰ç¼€çš„ key çš„å¹¿æ’­æ¨¡å¼ï¼Œå’Œetcdçš„watch prefixåŠŸèƒ½ä¸€æ ·ï¼Œä¸çŸ¥é“åº•å±‚å®ç°å’Œæ€§èƒ½æœ‰ä½•å·®å¼‚ï¼Ÿ","like_count":0},{"had_liked":false,"id":264949,"user_name":"å°è¢","can_delete":false,"product_type":"c1","uid":1811495,"ip_address":"","ucode":"3F5D8721F577D9","user_header":"https://static001.geekbang.org/account/avatar/00/1b/a4/27/15e75982.jpg","comment_is_top":false,"comment_ctime":1606718060,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1606718060","product_id":100056701,"comment_content":"åŸæ–‡æœ‰ä¸€å¥è¯â€œå¦‚æœä½ åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå‘ç° Redis å®ä¾‹çš„ CPU å¼€é”€ä¸å¤§ï¼Œååé‡å´æ²¡æœ‰æå‡ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ Redis 6.0 çš„å¤šçº¿ç¨‹æœºåˆ¶ï¼ŒåŠ é€Ÿç½‘ç»œå¤„ç†ï¼Œè¿›è€Œæå‡å®ä¾‹çš„ååé‡â€ã€‚<br>è¿™å¥è¯æ˜¯ä¸æ˜¯æœ‰é—®é¢˜ï¼Œå¦‚æœçœŸçš„æ˜¯å¯¹ç½‘å¡çš„æ•°æ®æ¥ä¸åŠæ¥æ”¶ï¼Œé‚£è¿›ç¨‹çš„cpuéƒ½å·²ç»è·‘æ»¡äº†æ‰å¯¹ã€‚å¦‚æœcpuæ²¡æœ‰è·‘æ»¡ï¼Œåˆä¸ä»ç½‘å¡å–æ•°æ®ï¼Œè¿™åˆ°åº•æ˜¯ä»€ä¹ˆè¡Œä¸ºï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1180877,"avatar":"https://static001.geekbang.org/account/avatar/00/12/04/cd/3f73dead.jpg","nickname":"é»‘æ›¼å·´ye","note":"","ucode":"3ACFD4B79E46A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":341405,"discussion_content":"redisé»˜è®¤ä½¿ç”¨å•çº¿ç¨‹ï¼Œè€Œå•çº¿ç¨‹æœ€å¤šå ç”¨ä¸€ä¸ªCPUï¼Œå¯¹äºå¤šæ ¸çš„æœºå™¨æ¥è¯´ï¼Œä¸å¯èƒ½è·‘æ»¡çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610412861,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":264946,"user_name":"åƒä¸‡æµ·","can_delete":false,"product_type":"c1","uid":1179560,"ip_address":"","ucode":"941C431A163B83","user_header":"https://static001.geekbang.org/account/avatar/00/11/ff/a8/73cd4a30.jpg","comment_is_top":false,"comment_ctime":1606717327,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606717327","product_id":100056701,"comment_content":"è¿™é‡Œé¢çš„ä¸»çº¿ç¨‹éƒ½æ˜¯æŒ‡åŒä¸€ä¸ªçº¿ç¨‹ä¹ˆï¼Œå¦‚æœæ˜¯ï¼Œä¸ºä»€ä¹ˆå¤„ç†é“¾æ¥å’Œå¤„ç†æ‰§è¡Œå‘½ä»¤çš„çº¿ç¨‹ä¸ºä»€ä¹ˆä¸åˆ†å¼€ï¼Ÿè¿”å›æ•°æ®çš„æ—¶å€™ï¼Œæ—¢ç„¶å·²ç»æŠŠæ•°æ®å†™å…¥äº†ç¼“å†²åŒºäº†ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦io çº¿ç¨‹ä¸“é—¨å†™å…¥socketï¼Ÿ è¿™ä¸ªç¼“å†²åŒºæ˜¯æŒ‡çš„ä»€ä¹ˆç¼“å†²åŒºï¼Ÿä¸æ˜¯è¾“å‡ºç¼“å†²åŒºä¹ˆï¼Ÿè€å¸ˆæˆ–å“ªä¸ªå¤§ä½¬èƒ½è§£ç­”ä¸‹ä¹ˆ<br>","like_count":0},{"had_liked":false,"id":264893,"user_name":"dfuru","can_delete":false,"product_type":"c1","uid":2110772,"ip_address":"","ucode":"0222FADA093D95","user_header":"","comment_is_top":false,"comment_ctime":1606701520,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606701520","product_id":100056701,"comment_content":"å®¢æˆ·ç«¯ç¼“å­˜ï¼Œä¿è¯å®ä¾‹ä¸ç¼“å­˜çš„æ•°æ®ä¸€è‡´æ€§ï¼Œè¿˜æœ‰å…¶å®ƒæ–¹æ³•å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":264248,"user_name":"yeek","can_delete":false,"product_type":"c1","uid":1020629,"ip_address":"","ucode":"A1C71023113CB9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/d5/699384a0.jpg","comment_is_top":false,"comment_ctime":1606390049,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606390049","product_id":100056701,"comment_content":"å®¢æˆ·ç«¯å®ç°æœ¬åœ°ç¼“å­˜ï¼Œåœ¨å†…å­˜æ‰˜ç®¡çš„å¹³å°ä¸Šï¼Œä¼šä¸ä¼šäº§ç”Ÿå†…å­˜æ³„æ¼ï¼Ÿ","like_count":0},{"had_liked":false,"id":263531,"user_name":"ç¿çƒ‚æ˜å¤©","can_delete":false,"product_type":"c1","uid":1322455,"ip_address":"","ucode":"07DA56B0680D0C","user_header":"https://static001.geekbang.org/account/avatar/00/14/2d/d7/74fc8f38.jpg","comment_is_top":false,"comment_ctime":1606176768,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1606176768","product_id":100056701,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸‹ï¼Œè½®è®­çš„æ–¹å¼æŠŠsocketç»™ioçº¿ç¨‹ï¼Œä¸çº¿ç¨‹ç»‘å®šçš„æ—¶å€™æ˜¯ä¸æ˜¯å·²ç»æ˜¯å¯è¯»äº†ï¼Œè¿˜æ˜¯è½®è®­æœ‰å“ªäº›å¯è¯»çš„å†ç»™ioçº¿ç¨‹çš„ï¼Œè¯·è§£æƒ‘ï¼Œéº»çƒ¦è€å¸ˆäº†","like_count":0,"discussions":[{"author":{"id":1020629,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/92/d5/699384a0.jpg","nickname":"yeek","note":"","ucode":"A1C71023113CB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329483,"discussion_content":"epollæ˜¯ç›´æ¥æ‹¿åˆ°å¯è¯»çš„socket","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1606389998,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":263474,"user_name":"î‡ å°¿å¸ƒ","can_delete":false,"product_type":"c1","uid":1476323,"ip_address":"","ucode":"D1C8BDA7540962","user_header":"https://static001.geekbang.org/account/avatar/00/16/86/e3/a31f6869.jpg","comment_is_top":false,"comment_ctime":1606140772,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606140772","product_id":100056701,"comment_content":"2020.11.23æ‰“å¡","like_count":0}]}