{"id":83860,"title":"JavaScript执行（四）：try里面放return，finally还会执行吗？","content":"<p>你好，我是winter。</p><p>在前面几篇文章中，我们已经了解了关于执行上下文、作用域、闭包之间的关系。</p><p>今天，我们则要说一说更为细节的部分：语句。</p><p>语句是任何编程语言的基础结构，与JavaScript对象一样，JavaScript语句同样具有“看起来很像其它语言，但是其实一点都不一样”的特点。</p><p>我们比较常见的语句包括变量声明、表达式、条件、循环等，这些都是大家非常熟悉的东西，对于它们的行为，我在这里就不赘述了。</p><p>为了了解JavaScript语句有哪些特别之处，首先我们要看一个不太常见的例子，我会通过这个例子，来向你介绍JavaScript语句执行机制涉及的一种基础类型：Completion类型。</p><h2>Completion类型</h2><p>我们来看一个例子。在函数foo中，使用了一组try语句。我们可以先来做一个小实验，在try中有return语句，finally中的内容还会执行吗？我们来看一段代码。</p><pre><code>function foo(){\n  try{\n    return 0;\n  } catch(err) {\n\n  } finally {\n    console.log(&quot;a&quot;)\n  }\n}\n\nconsole.log(foo());\n</code></pre><p>通过实际试验，我们可以看到，finally确实执行了，而且return语句也生效了，foo()返回了结果0。</p><p>虽然return执行了，但是函数并没有立即返回，又执行了finally里面的内容，这样的行为违背了很多人的直觉。</p><!-- [[[read_end]]] --><p>如果在这个例子中，我们在finally中加入return语句，会发生什么呢？</p><pre><code>function foo(){\n  try{\n    return 0;\n  } catch(err) {\n\n  } finally {\n    return 1;\n  }\n}\n\nconsole.log(foo());\n</code></pre><p>通过实际执行，我们看到，finally中的return “覆盖”了try中的return。在一个函数中执行了两次return，这已经超出了很多人的常识，也是其它语言中不会出现的一种行为。</p><p>面对如此怪异的行为，我们当然可以把它作为一个孤立的知识去记忆，但是实际上，这背后有一套机制在运作。</p><p>这一机制的基础正是JavaScript语句执行的完成状态，我们用一个标准类型来表示：Completion Record（我在类型一节提到过，Completion Record用于描述异常、跳出等语句执行过程）。</p><p>Completion Record 表示一个语句执行完之后的结果，它有三个字段：</p><ul>\n<li>[[type]] 表示完成的类型，有break continue return throw和normal几种类型；</li>\n<li>[[value]] 表示语句的返回值，如果语句没有，则是empty；</li>\n<li>[[target]] 表示语句的目标，通常是一个JavaScript标签（标签在后文会有介绍）。</li>\n</ul><p>JavaScript正是依靠语句的 Completion Record类型，方才可以在语句的复杂嵌套结构中，实现各种控制。接下来我们要来了解一下JavaScript使用Completion Record类型，控制语句执行的过程。</p><p>首先我们来看看语句有几种分类。</p><p><img src=\"https://static001.geekbang.org/resource/image/98/d5/98ce53be306344c018cddd6c083392d5.jpg?wh=555*872\" alt=\"\"></p><h2>普通的语句</h2><p>在JavaScript中，我们把不带控制能力的语句称为普通语句。普通语句有下面几种。</p><ul>\n<li>声明类语句\n<ul>\n<li>var声明</li>\n<li>const声明</li>\n<li>let声明</li>\n<li>函数声明</li>\n<li>类声明</li>\n</ul>\n</li>\n<li>表达式语句</li>\n<li>空语句</li>\n<li>debugger语句</li>\n</ul><p>这些语句在执行时，从前到后顺次执行（我们这里先忽略var和函数声明的预处理机制），没有任何分支或者重复执行逻辑。</p><p>普通语句执行后，会得到 [[type]] 为 normal 的 Completion Record，JavaScript引擎遇到这样的Completion Record，会继续执行下一条语句。</p><p>这些语句中，只有表达式语句会产生 [[value]]，当然，从引擎控制的角度，这个value并没有什么用处。</p><p>如果你经常使用Chrome自带的调试工具，可以知道，输入一个表达式，在控制台可以得到结果，但是在前面加上var，就变成了undefined。</p><p><img src=\"https://static001.geekbang.org/resource/image/a3/67/a35801b1b82654d17e413e51b340d767.png?wh=376*237\" alt=\"\"></p><p>Chrome控制台显示的正是语句的Completion Record的[[value]]。</p><h2>语句块</h2><p>介绍完了普通语句，我们再来介绍一个比较特殊的语句：语句块。</p><p>语句块就是拿大括号括起来的一组语句，它是一种语句的复合结构，可以嵌套。</p><p>语句块本身并不复杂，我们需要注意的是语句块内部的语句的Completion Record的[[type]] 如果不为 normal，会打断语句块后续的语句执行。</p><p>比如我们考虑，一个[[type]]为return的语句，出现在一个语句块中的情况。</p><p>从语句的这个type中，我们大概可以猜到它由哪些特定语句产生，我们就来说说最开始的例子中的 return。</p><p>return语句可能产生return或者throw类型的Completion Record。我们来看一个例子。</p><p>先给出一个内部为普通语句的语句块：</p><pre><code>{\n  var i = 1; // normal, empty, empty\n  i ++; // normal, 1, empty\n  console.log(i) //normal, undefined, empty\n} // normal, undefined, empty\n</code></pre><p>在每一行的注释中，我给出了语句的Completion Record。</p><p>我们看到，在一个block中，如果每一个语句都是normal类型，那么它会顺次执行。接下来我们加入return试试看。</p><pre><code>{\n  var i = 1; // normal, empty, empty\n  return i; // return, 1, empty\n  i ++; \n  console.log(i)\n} // return, 1, empty\n</code></pre><p>但是假如我们在block中插入了一条return语句，产生了一个非normal记录，那么整个block会成为非normal。这个结构就保证了非normal的完成类型可以穿透复杂的语句嵌套结构，产生控制效果。</p><p>接下来我们就具体讲讲控制类语句。</p><h2>控制型语句</h2><p>控制型语句带有 if、switch关键字，它们会对不同类型的Completion Record产生反应。</p><p>控制类语句分成两部分，一类是对其内部造成影响，如if、switch、while/for、try。</p><p>另一类是对外部造成影响如break、continue、return、throw，这两类语句的配合，会产生控制代码执行顺序和执行逻辑的效果，这也是我们编程的主要工作。</p><p>一般来说， for/while - break/continue 和 try - throw 这样比较符合逻辑的组合，是大家比较熟悉的，但是，实际上，我们需要控制语句跟break 、continue 、return 、throw四种类型与控制语句两两组合产生的效果。</p><p><img src=\"https://static001.geekbang.org/resource/image/77/d3/7760027d7ee09bdc8ec140efa9caf1d3.png?wh=840*463\" alt=\"\"></p><p>通过这个表，我们不难发现知识的盲点，也就是我们最初的的case中的try和return的组合了。</p><p>因为finally中的内容必须保证执行，所以 try/catch执行完毕，即使得到的结果是非normal型的完成记录，也必须要执行finally。</p><p>而当finally执行也得到了非normal记录，则会使finally中的记录作为整个try结构的结果。</p><h2>带标签的语句</h2><p>前文我重点讲了type在语句控制中的作用，接下来我们重点来讲一下最后一个字段：target，这涉及了JavaScript中的一个语法，带标签的语句。</p><p>实际上，任何JavaScript语句是可以加标签的，在语句前加冒号即可：</p><pre><code>    firstStatement: var i = 1;\n</code></pre><p>大部分时候，这个东西类似于注释，没有任何用处。唯一有作用的时候是：与完成记录类型中的target相配合，用于跳出多层循环。</p><pre><code>    outer: while(true) {\n      inner: while(true) {\n          break outer;\n      }\n    }\n    console.log(&quot;finished&quot;)\n</code></pre><p>break/continue 语句如果后跟了关键字，会产生带target的完成记录。一旦完成记录带了target，那么只有拥有对应label的循环语句会消费它。</p><h2>结语</h2><p>我们以Completion Record类型为线索，为你讲解了JavaScript语句执行的原理。</p><p>因为JavaScript语句存在着嵌套关系，所以执行过程实际上主要在一个树形结构上进行， 树形结构的每一个节点执行后产生Completion Record，根据语句的结构和Completion Record，JavaScript实现了各种分支和跳出逻辑。</p><p>你遇到哪些语句中的执行的实际效果，是跟你想象的有所出入呢，你可以给我留言，我们一起讨论。</p><p></p>","neighbors":{"left":{"article_title":"JavaScript执行（三）：你知道现在有多少种函数吗？","id":83719},"right":{"article_title":"JavaScript词法：为什么12.toString会报错？","id":86400}},"comments":[{"had_liked":false,"id":72058,"user_name":"有铭","can_delete":false,"product_type":"c1","uid":1046302,"ip_address":"","ucode":"2C7CB36CA5C04C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/3XbCueYYVWTiclv8T5tFpwiblOxLphvSZxL4ujMdqVMibZnOiaFK2C5nKRGv407iaAsrI0CDICYVQJtiaITzkjfjbvrQ/132","comment_is_top":false,"comment_ctime":1551508885,"is_pvip":false,"discussion_count":8,"race_medal":0,"score":"413868369301","product_id":100023201,"comment_content":"很感兴趣这些高级特性的知识老师是从哪里学到的，我翻过js高级编程那本书都没讲到过这些","like_count":97,"discussions":[{"author":{"id":1253128,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1f/08/14642f9e.jpg","nickname":"相望于江湖","note":"","ucode":"9CCB6F89F92C89","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297334,"discussion_content":"http://www.ecma-international.org/ecma-262/#sec-ecmascript-specification-types","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1596877803,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1016394,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIYg80llu8nzJn5x394p9WsKuac5qgCU506tBXIqUvTbe19YYMLEzo46rf2FQJvNLzcx9lnmYjDeg/132","nickname":"ssaylo","note":"","ucode":"3CBDC64385BEE9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284127,"discussion_content":"ECMA-262","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1592448880,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1470104,"avatar":"https://static001.geekbang.org/account/avatar/00/16/6e/98/44e278ff.jpg","nickname":"dennisleung","note":"","ucode":"607B8F14A0545D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4038,"discussion_content":"可能是直接看es规范","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1565074796,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2765180,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/31/7c/4f94d556.jpg","nickname":"逍遥散人","note":"","ucode":"A9088B5C0844FC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588156,"discussion_content":"JavaScript 权威指南?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663579279,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"山东"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1024788,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a3/14/1f03f07d.jpg","nickname":"懒蝈蝈","note":"","ucode":"574F2CF1A705F0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540299,"discussion_content":"我猜来自于JavaScript引擎怎么实现的一些知识体系","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640011381,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1483630,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJp0JzSialEHSLNFUnSLgpEDicTWkrDYyKbvh0GI6G2kHFyeEtwe3mibPMFMXKkR6uSfkoMb5Yib7r9Kg/132","nickname":"Geek_005778","note":"","ucode":"B4E2DE7B9D0387","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":359839,"discussion_content":"因为它以前是写浏览器的。。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616299203,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1442963,"avatar":"https://static001.geekbang.org/account/avatar/00/16/04/93/d1e9312f.jpg","nickname":"非同凡想","note":"","ucode":"9D1D498339A892","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291311,"discussion_content":"规范，我也是看了一点实在看不懂，就去看规范，规范看完后再来看发现能懂了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594776338,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1231317,"avatar":"https://static001.geekbang.org/account/avatar/00/12/c9/d5/b08a27ed.jpg","nickname":"灵感_idea","note":"","ucode":"E0DBDDFA6040F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":189562,"discussion_content":"语言的细节是很多的，书里面一般只能介绍知识点和概念，顶多加适当的整理和原理解释，写不了这么详细。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582892277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75382,"user_name":"周小成","can_delete":false,"product_type":"c1","uid":1229260,"ip_address":"","ucode":"5B47835DE09E1A","user_header":"https://static001.geekbang.org/account/avatar/00/12/c1/cc/6b6bbd41.jpg","comment_is_top":false,"comment_ctime":1552386431,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"362329639295","product_id":100023201,"comment_content":"穿透和消费，报错应该是连贯的，“穿透”就是指不在当前这一层处理，向外逐层寻找可以“消费”的那一层，直到最后都没找到就报错，比如：function里面有while, while里面有switch, switch里面又有continue，按图表来看，switch-continue应该是穿透，向上层寻找消费，碰到while-contine,那就是消费，再如switch里面是return, switch-return穿透，向上层whlie-return穿透，最后function-return是消费。","like_count":85,"discussions":[{"author":{"id":2660078,"avatar":"","nickname":"杨鹏","note":"","ucode":"3582EEC0BFC2E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391840,"discussion_content":"有点Android 事件分发 那味儿了。消费就是到此为止，穿透就是另找他人。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1630653248,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1624452,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c9/84/899edb1f.jpg","nickname":"CatLoVEr","note":"","ucode":"9B8BA3321873A0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":187863,"discussion_content":"消费是不是直接可以理解成 &#34;生效就可以了&#34; Completion Record 直接生成了 非normal的结果类型 直接就生效了啊 不需要上一层寻找 也不会报错","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582774157,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1380628,"avatar":"https://static001.geekbang.org/account/avatar/00/15/11/14/a46ea8c9.jpg","nickname":"djl","note":"","ucode":"3E1141D082F061","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":82010,"discussion_content":"说得通. 那么消费的意思是, 下次执行还在这里或者执行完毕; 穿透的意思是, 向上层选找消费.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576308953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72052,"user_name":"Rushan-Chen","can_delete":false,"product_type":"c1","uid":1374410,"ip_address":"","ucode":"CE514A1205C61D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/XSnxM4uP67kdzzCRW8KxhS5jkHiaaSrgkuLh1Z5BxawvQase46pbGAL4Bngmd3eFHckQml6zexyukFoWpeNENTg/132","comment_is_top":false,"comment_ctime":1551507861,"is_pvip":false,"discussion_count":13,"race_medal":0,"score":"250659611029","product_id":100023201,"comment_content":"请问老师，表格中的“穿透”和“消费”是什么意思？","like_count":58,"discussions":[{"author":{"id":1376654,"avatar":"https://static001.geekbang.org/account/avatar/00/15/01/8e/48e7c474.jpg","nickname":"一路向北","note":"","ucode":"54D8F1687AE1ED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":102866,"discussion_content":"刚一看我也不理解，但看着就理解了。比方说break只对循环、switch-case有用，如果在if代码块内，break的作用可以理解成穿透if代码块，去外面寻找最新的循环（switch）。消费可以理解为正好在这个条件下起作用了，比方break在for循环内被执行了，跳出循环，就叫消费。","likes_number":16,"is_delete":false,"is_hidden":false,"ctime":1577366498,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1187197,"avatar":"https://static001.geekbang.org/account/avatar/00/12/1d/7d/368df396.jpg","nickname":"somenzz","note":"","ucode":"EA59A170DF8910","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":25417,"discussion_content":"我也想知道，很不喜欢创造一些新术语，难以理解","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1570525426,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":5,"child_discussions":[{"author":{"id":1231317,"avatar":"https://static001.geekbang.org/account/avatar/00/12/c9/d5/b08a27ed.jpg","nickname":"灵感_idea","note":"","ucode":"E0DBDDFA6040F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1187197,"avatar":"https://static001.geekbang.org/account/avatar/00/12/1d/7d/368df396.jpg","nickname":"somenzz","note":"","ucode":"EA59A170DF8910","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":189565,"discussion_content":"赞同，很多文章或者书籍里都会时不时冒出个个人创造的新词汇或者比喻，易懂就罢了，关键很多不好懂，对于学习来说等于多加了一层障碍。","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1582892372,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":25417,"ip_address":""},"score":189565,"extra":""},{"author":{"id":1524242,"avatar":"https://static001.geekbang.org/account/avatar/00/17/42/12/928fa044.jpg","nickname":"杨阳","note":"","ucode":"88FA5140EEE153","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1187197,"avatar":"https://static001.geekbang.org/account/avatar/00/12/1d/7d/368df396.jpg","nickname":"somenzz","note":"","ucode":"EA59A170DF8910","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":240613,"discussion_content":"看这个专栏作业作者老炫一些术语，也不解释，对新手太不友好了，看了这个专栏，这个作者给我的感觉就是太特么能装逼了。","likes_number":30,"is_delete":false,"is_hidden":false,"ctime":1587379110,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":25417,"ip_address":""},"score":240613,"extra":""},{"author":{"id":2716151,"avatar":"https://static001.geekbang.org/account/avatar/00/29/71/f7/a70c8cce.jpg","nickname":"二货仙人","note":"","ucode":"112F20FCAF5C6C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1524242,"avatar":"https://static001.geekbang.org/account/avatar/00/17/42/12/928fa044.jpg","nickname":"杨阳","note":"","ucode":"88FA5140EEE153","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":386228,"discussion_content":"本来也不是给新手看的🙄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627476959,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":240613,"ip_address":""},"score":386228,"extra":""}]},{"author":{"id":1874923,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/9b/eb/f9d5edee.jpg","nickname":"前端劝退工程师","note":"","ucode":"26B051853A0F9B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":323390,"discussion_content":"技术好。但讲的是真不好","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1604927913,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1736797,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/80/5d/b870bb08.jpg","nickname":"从新开始","note":"","ucode":"9BDA8C16C24321","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1874923,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/9b/eb/f9d5edee.jpg","nickname":"前端劝退工程师","note":"","ucode":"26B051853A0F9B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331223,"discussion_content":"确实不够亲民，很多都听不懂","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1606811041,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":323390,"ip_address":""},"score":331223,"extra":""},{"author":{"id":1514372,"avatar":"https://static001.geekbang.org/account/avatar/00/17/1b/84/bda2b034.jpg","nickname":"铭韧","note":"","ucode":"FAF975030B807A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1736797,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/80/5d/b870bb08.jpg","nickname":"从新开始","note":"","ucode":"9BDA8C16C24321","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":368897,"discussion_content":"多看几遍吧，实在不行可以一起前端训练营","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618877328,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":331223,"ip_address":""},"score":368897,"extra":""}]},{"author":{"id":1730175,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/66/7f/1d931615.jpg","nickname":"🌻小叮当","note":"","ucode":"E3EDF2D3F89277","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312687,"discussion_content":"想知道为什么老师没有参与回答。想知道这个问题 也没有在文章中解释这些术语","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1602769547,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1261700,"avatar":"https://static001.geekbang.org/account/avatar/00/13/40/84/65032a15.jpg","nickname":"黄金","note":"","ucode":"3CF4417C9D9264","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369325,"discussion_content":"大约有点感觉，但是没人说它具体啥意思我也不知道我理解的对不对","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619004895,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1568280,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ee/18/802b61e5.jpg","nickname":"西伯利亚雪橇犬","note":"","ucode":"4B8B1656342319","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":128432,"discussion_content":"打印测试一下就好了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578638695,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72086,"user_name":"AICC","can_delete":false,"product_type":"c1","uid":1020746,"ip_address":"","ucode":"C1D18B1E8B2DCE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/93/4a/de82f373.jpg","comment_is_top":false,"comment_ctime":1551516922,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"190530077946","product_id":100023201,"comment_content":"3楼你好，我的理解是，消费指对应的代码被有效的执行了，穿透指对应代码被跳过了，也就是对应控制的语句体被有效执行比如try catch,当try中出现了throw,能被有效捕获进而执行catch，这在我理解就是try被消费执行了，而当catch中还有throw时，由于catch不具备处理throw的能力，于是catch被中断跳出，也就是作者所说的穿透，希望能帮到你","like_count":45},{"had_liked":false,"id":86958,"user_name":"加利率的钟摆","can_delete":false,"product_type":"c1","uid":1005958,"ip_address":"","ucode":"0E802A99455E71","user_header":"https://static001.geekbang.org/account/avatar/00/0f/59/86/0f9f81d5.jpg","comment_is_top":false,"comment_ctime":1555487208,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"138994440680","product_id":100023201,"comment_content":"```javascript<br>function test(){<br>  if(true){<br>    console.log(&quot;111&quot;);<br>    break;<br>  }<br>  if(true){<br>    console.log(&quot;222&quot;);<br>  }<br>}<br><br>test(); &#47;&#47; SyntaxError: Illegal break statement<br>```<br><br>我们可以这么分析：<br><br>1. if 和 break 相遇，break 穿透至 function<br>2. function 和 break 相遇，报错<br><br>```javascript<br>function test() {<br>  var a = 0;<br>  switch (a) {<br>    case 0:<br>      if (true) {<br>        console.log(&quot;111&quot;);<br>        break;<br>      }<br>  }<br><br>  if (true) {<br>    console.log(&quot;222&quot;);<br>  }<br>}<br><br>test();<br>&#47;&#47; 111<br>&#47;&#47; 222<br>```<br><br>我们可以这么分析：<br><br>1. if 和 break 相遇，break 穿透至 switch<br>2. swicth 和 break 相遇，消费掉 break<br>3. 接着执行之后的代码","like_count":33,"discussions":[{"author":{"id":1698735,"avatar":"https://static001.geekbang.org/account/avatar/00/19/eb/af/e49af9a8.jpg","nickname":"JC.彦","note":"","ucode":"E87C1420B140F4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":245932,"discussion_content":"if(true){\n  return 1;\n  console.log(&#34;你是最胖的！&#34;)\n}\nif语句不在function语句内也会报错，是否说明穿透也会报错？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587713669,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1260277,"avatar":"https://static001.geekbang.org/account/avatar/00/13/3a/f5/1fa34f88.jpg","nickname":"润曦","note":"","ucode":"21D36F7DEEB43D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":53914,"discussion_content":"顿悟","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574234129,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1388875,"avatar":"https://static001.geekbang.org/account/avatar/00/15/31/4b/0f5b3a0a.jpg","nickname":"Glee","note":"","ucode":"AA0D428E34D29E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":32471,"discussion_content":"有收获","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571040793,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1384585,"avatar":"https://static001.geekbang.org/account/avatar/00/15/20/89/82986e48.jpg","nickname":"周义竣","note":"","ucode":"57C6AF5BE3CE44","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":20951,"discussion_content":"谢谢分享，有收获。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569404505,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72628,"user_name":"火云邪神0007","can_delete":false,"product_type":"c1","uid":1390886,"ip_address":"","ucode":"158014211134B1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er9YqiaybDPpZMr3ecHDv8P3chyr3dETz5Ljft8s3F47JDN93yOKeOyysxxhaN7MJmXt7ib5X6EgMGQ/132","comment_is_top":false,"comment_ctime":1551682064,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"65976191504","product_id":100023201,"comment_content":"老师在前面讲过，穿透就是去上一层的作用域或者控制语句找可以消费break，continue的执行环境，消费就是在这一层就执行了这个break或者continue","like_count":16},{"had_liked":false,"id":72449,"user_name":"Dream.","can_delete":false,"product_type":"c1","uid":1187286,"ip_address":"","ucode":"49B94CE5BA0D21","user_header":"https://static001.geekbang.org/account/avatar/00/12/1d/d6/76fe5259.jpg","comment_is_top":false,"comment_ctime":1551628677,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"65976138117","product_id":100023201,"comment_content":"第一次看见『消费』与『穿透』这样的描述。<br><br>这两个词的来源自哪里呢？<br><br>结合表格中的控制语句组合使用得到的结果来看，我的理解是<br><br>『消费』是控制语句里的内容执行完毕。<br>『穿透』是控制语句里的内容没能执行完，被中止了。<br>","like_count":15,"discussions":[{"author":{"id":1646242,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1e/a2/083412c6.jpg","nickname":"疯羊先生","note":"","ucode":"09F63E55DA492A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338788,"discussion_content":"for里面的break消费？执行完？不是你这么理解的吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609382353,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72139,"user_name":"夜空中最亮的星","can_delete":false,"product_type":"c1","uid":1267566,"ip_address":"","ucode":"ADC3E7B6789955","user_header":"https://static001.geekbang.org/account/avatar/00/13/57/6e/b6795c44.jpg","comment_is_top":false,"comment_ctime":1551528086,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"44501201046","product_id":100023201,"comment_content":"老师，我昨天成功的把您的课推销出去了一份，哈哈😄高兴","like_count":10},{"had_liked":false,"id":144936,"user_name":"csᵏᵒᵖ","can_delete":false,"product_type":"c1","uid":1684408,"ip_address":"","ucode":"8FA0312B92BE36","user_header":"https://static001.geekbang.org/account/avatar/00/19/b3/b8/62214c79.jpg","comment_is_top":false,"comment_ctime":1572105047,"is_pvip":false,"replies":[{"id":"58894","content":"没错，就是这个。","user_name":"作者回复","user_name_real":"winter","uid":"1268524","ctime":1574219308,"ip_address":"","comment_id":144936,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23046941527","product_id":100023201,"comment_content":"winter老师，特殊处理就是指后面的 “因为 finally 中的内容必须保证执行，所以 try&#47;catch 执行完毕，即使得到的结果是非 normal 型的完成记录，也必须要执行 finally“ 吗","like_count":6,"discussions":[{"author":{"id":1268524,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2c/12bfd3cd.jpg","nickname":"winter","note":"","ucode":"2B068EDEAFEB56","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472174,"discussion_content":"没错，就是这个。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574219308,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2047879,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/3f/87/2ba3140a.jpg","nickname":"吴亮","note":"","ucode":"F7113AAEC583EA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286304,"discussion_content":"对啊，就是必须执行啊！这有神马可说的吗？貌似正确的废话。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593126410,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133871,"user_name":"小say","can_delete":false,"product_type":"c1","uid":1379957,"ip_address":"","ucode":"8740E673AC7B33","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/WADWW2CpTUau6VakOsNXVtdoVaASQR7l1uKIDakINy8iaSibglv5Gjh67PdEAgXNVqzQrmRSrouaKZkJ8MQVVQsA/132","comment_is_top":false,"comment_ctime":1568688344,"is_pvip":false,"replies":[{"id":"54037","content":"是Chrome自己的规定。","user_name":"作者回复","user_name_real":"winter","uid":"1268524","ctime":1570772663,"ip_address":"","comment_id":133871,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23043524824","product_id":100023201,"comment_content":"老师你好，前面说[[value]]如果没有返回值就是empty但是为什么在Chrome调试器下显示的是undefined？<br>后文中语句块中<br>{<br>  var i = 1; &#47;&#47; normal, empty, empty<br>  i ++; &#47;&#47; normal, 1, empty<br>  console.log(i) &#47;&#47;normal, undefined, empty<br>} &#47;&#47; normal, undefined, empty<br>其中 var i = 1; 为什么[[value]]会是empty？console.log(i)的[[value]]为什么是undefined？所以到底什么时候是empty什么时候是undefined？","like_count":5,"discussions":[{"author":{"id":1268524,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2c/12bfd3cd.jpg","nickname":"winter","note":"","ucode":"2B068EDEAFEB56","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467541,"discussion_content":"是Chrome自己的规定。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570772663,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":264368,"user_name":"王大可","can_delete":false,"product_type":"c1","uid":1003033,"ip_address":"","ucode":"9DBCA811C21C9B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4e/19/69f6e2ec.jpg","comment_is_top":false,"comment_ctime":1606447771,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14491349659","product_id":100023201,"comment_content":"配合周爱民老师的专栏食用效果更佳","like_count":3},{"had_liked":false,"id":81254,"user_name":"K4SHIFZ","can_delete":false,"product_type":"c1","uid":1293057,"ip_address":"","ucode":"BFB49AAC0E4C74","user_header":"https://static001.geekbang.org/account/avatar/00/13/bb/01/568ac2d6.jpg","comment_is_top":false,"comment_ctime":1553842591,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14438744479","product_id":100023201,"comment_content":"老师，请出一份ES标准解读。带着我们学一次。必买！","like_count":3},{"had_liked":false,"id":72500,"user_name":"金子菇凉的铁粉小逗","can_delete":false,"product_type":"c1","uid":1000602,"ip_address":"","ucode":"6A2C601F6EEBB5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/44/9a/c03bea17.jpg","comment_is_top":false,"comment_ctime":1551661340,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14436563228","product_id":100023201,"comment_content":"Completion 类型是个神马鬼？","like_count":3},{"had_liked":false,"id":142253,"user_name":"Smallfly","can_delete":false,"product_type":"c1","uid":1013841,"ip_address":"","ucode":"D388D5E0249A69","user_header":"https://static001.geekbang.org/account/avatar/00/0f/78/51/4790e13e.jpg","comment_is_top":false,"comment_ctime":1571320836,"is_pvip":false,"replies":[{"id":"58903","content":"不能，事实上引擎不一定需要按照标准的模型来实现，只要保证运行效果等效即可。","user_name":"作者回复","user_name_real":"winter","uid":"1268524","ctime":1574219720,"ip_address":"","comment_id":142253,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10161255428","product_id":100023201,"comment_content":"winter 老师，有什么工具能查看 JS 引擎的运行时的特殊类型么？","like_count":2,"discussions":[{"author":{"id":1268524,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2c/12bfd3cd.jpg","nickname":"winter","note":"","ucode":"2B068EDEAFEB56","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471046,"discussion_content":"不能，事实上引擎不一定需要按照标准的模型来实现，只要保证运行效果等效即可。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574219720,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":138998,"user_name":"somenzz","can_delete":false,"product_type":"c1","uid":1187197,"ip_address":"","ucode":"EA59A170DF8910","user_header":"https://static001.geekbang.org/account/avatar/00/12/1d/7d/368df396.jpg","comment_is_top":false,"comment_ctime":1570525245,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10160459837","product_id":100023201,"comment_content":"Python的try finally也是这样的，我想知道有语言不是这样的吗？","like_count":2},{"had_liked":false,"id":98883,"user_name":"孤单听雨的猫","can_delete":false,"product_type":"c1","uid":1343228,"ip_address":"","ucode":"27F980034209A4","user_header":"https://static001.geekbang.org/account/avatar/00/14/7e/fc/53ce9019.jpg","comment_is_top":false,"comment_ctime":1559112840,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10149047432","product_id":100023201,"comment_content":"标准 https:&#47;&#47;tc39.github.io&#47;ecma262&#47;","like_count":2},{"had_liked":false,"id":86484,"user_name":"宝贝爱学习","can_delete":false,"product_type":"c1","uid":1196135,"ip_address":"","ucode":"F457788E13D85F","user_header":"https://static001.geekbang.org/account/avatar/00/12/40/67/2f477947.jpg","comment_is_top":false,"comment_ctime":1555381310,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10145315902","product_id":100023201,"comment_content":"try finally 那个跟Java不是一样的吗","like_count":2,"discussions":[{"author":{"id":1187197,"avatar":"https://static001.geekbang.org/account/avatar/00/12/1d/7d/368df396.jpg","nickname":"somenzz","note":"","ucode":"EA59A170DF8910","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":25422,"discussion_content":"Python也一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570525732,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78001,"user_name":"靠人品去赢","can_delete":false,"product_type":"c1","uid":1301286,"ip_address":"","ucode":"7A20F9EBE847E1","user_header":"https://static001.geekbang.org/account/avatar/00/13/db/26/54f2c164.jpg","comment_is_top":false,"comment_ctime":1553052297,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10142986889","product_id":100023201,"comment_content":"这个把completion称作一个类型，感觉有点怪，首先这个不是我们自己去定义的，这个是因为我们执行语句都会有这个东西。小白看到这个“类型”会往前找，发现没这个类型，之前掌握的的语言系统也没有相关的类型，结果就是“我擦，这是啥，ES6的新特性吗？”。关于这个，这是我在MDN上找的相关资料，希望大家指点一下（看run-to-completion这部分）https:&#47;&#47;developer.mozilla.org&#47;en-US&#47;docs&#47;Web&#47;JavaScript&#47;EventLoop<br>","like_count":2},{"had_liked":false,"id":265662,"user_name":"心平气和的韩丽媛","can_delete":false,"product_type":"c1","uid":1177510,"ip_address":"","ucode":"ADB7DB7383EA4A","user_header":"https://static001.geekbang.org/account/avatar/00/11/f7/a6/0b590c34.jpg","comment_is_top":false,"comment_ctime":1606975271,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5901942567","product_id":100023201,"comment_content":"老师基本不在评论区答疑是不太理解的，因为大家提出了问题，就是对课程内容有疑问，半天得不到解答，搞来搞去疑问更多","like_count":2},{"had_liked":false,"id":259288,"user_name":"安石","can_delete":false,"product_type":"c1","uid":1508755,"ip_address":"","ucode":"185AD0046CF1C2","user_header":"https://static001.geekbang.org/account/avatar/00/17/05/93/3c3f2a6d.jpg","comment_is_top":false,"comment_ctime":1604672442,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5899639738","product_id":100023201,"comment_content":"结合下面的评论，我的理解是，消费就是:比如说for循环里面，continue或者break起作用，就是上文提到的completion type 非normal的情况，命中了。穿透就是这个语句架子太大了(县官审理亲王？)让外层的语句（总之上报上级吧一层层的报）来处理。","like_count":2},{"had_liked":false,"id":205664,"user_name":"wingsico","can_delete":false,"product_type":"c1","uid":1126631,"ip_address":"","ucode":"A91CB7B0497708","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/s0bx4WXQNkAJ3c3map0g6dlt3sKDgTtN7Ria96YoufjQcVVI8Shv5CN1jnK1ZTImNnlPcibRqvyiaUuhpIvV1TpnQ/132","comment_is_top":false,"comment_ctime":1586698486,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5881665782","product_id":100023201,"comment_content":"在导语中就特意去了解了completion record(下文简称cr)的具体含义，但仅了解到cr的组成和各种语句对应的cr，但没有实际了解到cr的作用。在这篇文章后，了解了cr的实际作用: 与js的树形嵌套结构结合，对各种分支循环执行相应的逻辑。不同的非normal cr会穿透不同的语句和被不同的语句消费，穿透的实际表示是将整个语句(块)变为相应的cr，消费则是在当前语句(块)内产生作用，并且阻止其继续穿透(整个语句不会变为相应的cr)。第三个参数target则是指定消费该cr的对象，通过js中的标签语法来指定，一般用于跳出外层循环体。<br><br>通过这次学习，从原来现象了解到如今的本质实现和其作用机理，了解到现象背后的原因。<br><br>对于题中的finally问题则是cr和finally的作用方式相结合的结果。finally的必执行加上非normal cr的穿透综合得到的结果。以后对于类似的问题则可以举一反三的解释其背后的原因。","like_count":2},{"had_liked":false,"id":142231,"user_name":"稚鸿同学","can_delete":false,"product_type":"c1","uid":1212581,"ip_address":"","ucode":"989804DB990385","user_header":"https://static001.geekbang.org/account/avatar/00/12/80/a5/83b424bc.jpg","comment_is_top":false,"comment_ctime":1571316844,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5866284140","product_id":100023201,"comment_content":"理解【消费】和【穿透】，从使用经验来说，消费在语句里面直接了当，完全终止；穿透就是悠游寡断，欲断未断的意思；","like_count":1},{"had_liked":false,"id":124363,"user_name":"明月","can_delete":false,"product_type":"c1","uid":1476588,"ip_address":"","ucode":"D3C649B954A519","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJayib1ZcRfOaoLsdsWZokiaO5tLAdC4uNAicQJRIVXrz9fIchib7QwXibnRrsJaoh5TUlia7faUf36g8Bw/132","comment_is_top":false,"comment_ctime":1565866551,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5860833847","product_id":100023201,"comment_content":"我理解的穿透或者消费是break continue return thow对if等的影响范围 如果能影响到if层级之外就是穿透 如果是只影响if语句就是消费 ","like_count":1},{"had_liked":false,"id":106851,"user_name":"Puru","can_delete":false,"product_type":"c1","uid":1383453,"ip_address":"","ucode":"94801A3FAB1A14","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqicfns3FdbrFmETHickC5xibHXhYmFOkNzK3AiaJRpwJLQMAszmpf7BQOvicwnMD0qdAYWG1K78pbxPAw/132","comment_is_top":false,"comment_ctime":1561405452,"is_pvip":false,"replies":[{"id":"58936","content":"所有有这个的语言都是这个行为。","user_name":"作者回复","user_name_real":"winter","uid":"1268524","ctime":1574221863,"ip_address":"","comment_id":106851,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5856372748","product_id":100023201,"comment_content":"Python 也是先执行finally后执行return","like_count":1,"discussions":[{"author":{"id":1268524,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2c/12bfd3cd.jpg","nickname":"winter","note":"","ucode":"2B068EDEAFEB56","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455254,"discussion_content":"所有有这个的语言都是这个行为。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574221863,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1600303,"avatar":"https://static001.geekbang.org/account/avatar/00/18/6b/2f/7354b0f6.jpg","nickname":"Geek_52018a","note":"","ucode":"3928589B9A38B5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381532,"discussion_content":"Java 也这样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625116075,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76229,"user_name":"守候","can_delete":false,"product_type":"c1","uid":1382500,"ip_address":"","ucode":"6757FFF109D9D3","user_header":"https://static001.geekbang.org/account/avatar/00/15/18/64/00d7e8ab.jpg","comment_is_top":false,"comment_ctime":1552554037,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5847521333","product_id":100023201,"comment_content":"学到了","like_count":1},{"had_liked":false,"id":72037,"user_name":"阿成","can_delete":false,"product_type":"c1","uid":1390032,"ip_address":"","ucode":"CEC3CD65FB9333","user_header":"https://static001.geekbang.org/account/avatar/00/15/35/d0/f2ac6d91.jpg","comment_is_top":false,"comment_ctime":1551503697,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5846470993","product_id":100023201,"comment_content":"涨姿势啦<br>不过，从来没用过label...<br>甚至第一次知道js里没有goto...","like_count":1,"discussions":[{"author":{"id":1042089,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/e6/a9/b459efb7.jpg","nickname":"如故","note":"","ucode":"F6895792309942","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343463,"discussion_content":"label不推荐使用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611051522,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327620,"user_name":"风","can_delete":false,"product_type":"c1","uid":1444483,"ip_address":"","ucode":"E1CE0825AAF805","user_header":"https://static001.geekbang.org/account/avatar/00/16/0a/83/f916f903.jpg","comment_is_top":false,"comment_ctime":1640194784,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640194784","product_id":100023201,"comment_content":"要做过脚本引擎或者编译器，才会知道这节课在讲什么。实现语句控制，ecma这里的completion record 只是一种最佳实践而已","like_count":0},{"had_liked":false,"id":323815,"user_name":"胖达","can_delete":false,"product_type":"c1","uid":1422517,"ip_address":"","ucode":"C930A33E1CEBCD","user_header":"https://static001.geekbang.org/account/avatar/00/15/b4/b5/b7ac4724.jpg","comment_is_top":false,"comment_ctime":1638172736,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1638172736","product_id":100023201,"comment_content":"先给出一个内部为普通语句的语句块：<br>var i = 1; &#47;&#47; normal, empty, empty<br>这里是不是写错了？<br>按照上面的讲解<br>value应该是undefined<br>是否应该是这样写<br>var i = 1; &#47;&#47; normal, undefined, empty<br>","like_count":0,"discussions":[{"author":{"id":3166573,"avatar":"https://static001.geekbang.org/account/avatar/00/30/51/6d/e4aed428.jpg","nickname":"%","note":"","ucode":"C5FC6B541307AE","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588991,"discussion_content":"我理解这里value的empty是指规范规定的，undefined是chrome浏览器的实现结果；通过返回undefined实现了empty的含义","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664296869,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"上海"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":271054,"user_name":"疯羊先生","can_delete":false,"product_type":"c1","uid":1646242,"ip_address":"","ucode":"09F63E55DA492A","user_header":"https://static001.geekbang.org/account/avatar/00/19/1e/a2/083412c6.jpg","comment_is_top":false,"comment_ctime":1609383939,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1609383939","product_id":100023201,"comment_content":"关于穿透消费，这些控制语句必须在特定的层中才能有效执行？比如break必须在for等循环语句中才能产生效果","like_count":0},{"had_liked":false,"id":259290,"user_name":"安石","can_delete":false,"product_type":"c1","uid":1508755,"ip_address":"","ucode":"185AD0046CF1C2","user_header":"https://static001.geekbang.org/account/avatar/00/17/05/93/3c3f2a6d.jpg","comment_is_top":false,"comment_ctime":1604673155,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1604673155","product_id":100023201,"comment_content":"不管是什么语句顺利执行就是正常的，record type为normal，比如for循环完全遍历完，type也是normal，当遇到了break，相当于后面未执行的遍历，被break吃掉了，就是消费。遇到return的话则是直接结束所属函数的执行，就是穿透。","like_count":0},{"had_liked":false,"id":245389,"user_name":"ihhuai","can_delete":false,"product_type":"c1","uid":1379127,"ip_address":"","ucode":"A796AF20437B8A","user_header":"https://static001.geekbang.org/account/avatar/00/15/0b/37/fd8355c4.jpg","comment_is_top":false,"comment_ctime":1598929592,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598929592","product_id":100023201,"comment_content":"<br>{<br>  var i = 1; &#47;&#47; normal, empty, empty<br>  return i; &#47;&#47; return, 1, empty<br>  i ++; <br>  console.log(i)<br>} &#47;&#47; return, 1, empty<br>需要更新了<br>这里 return 会抛错， 非法 return ","like_count":0},{"had_liked":false,"id":237211,"user_name":"Yum.X","can_delete":false,"product_type":"c1","uid":1750038,"ip_address":"","ucode":"B95A118133CAB1","user_header":"https://static001.geekbang.org/account/avatar/00/1a/b4/16/f3c36fd8.jpg","comment_is_top":false,"comment_ctime":1595740620,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595740620","product_id":100023201,"comment_content":"var a = 0;if (true){a = 1;function a(){};a=21;console.log(a);}console.log(a); 谁能帮忙解释下这段代码？","like_count":0},{"had_liked":false,"id":235745,"user_name":"binさま","can_delete":false,"product_type":"c1","uid":1737433,"ip_address":"","ucode":"10CCD3AA84EA06","user_header":"https://static001.geekbang.org/account/avatar/00/1a/82/d9/b839e3ff.jpg","comment_is_top":false,"comment_ctime":1595168299,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1595168299","product_id":100023201,"comment_content":"Um...Java的也是这样呀。我一直以为异常处理都是这样的。有语言的异常处理不是这样的吗？","like_count":0,"discussions":[{"author":{"id":3166573,"avatar":"https://static001.geekbang.org/account/avatar/00/30/51/6d/e4aed428.jpg","nickname":"%","note":"","ucode":"C5FC6B541307AE","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588992,"discussion_content":"为了实现finally应该都会这样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664296925,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"上海"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":230552,"user_name":"Ms小丸子小姐","can_delete":false,"product_type":"c1","uid":1584359,"ip_address":"","ucode":"54F064FDBDB941","user_header":"https://static001.geekbang.org/account/avatar/00/18/2c/e7/bd7a0a10.jpg","comment_is_top":false,"comment_ctime":1593415865,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593415865","product_id":100023201,"comment_content":"总觉得这句话不对：“通过实际执行，我们看到，finally 中的 return “覆盖”了 try 中的 return。在一个函数中执行了两次 return，这已经超出了很多人的常识，也是其它语言中不会出现的一种行为”","like_count":0},{"had_liked":false,"id":223491,"user_name":"Thinker","can_delete":false,"product_type":"c1","uid":1465896,"ip_address":"","ucode":"2FC4AB66EFC41D","user_header":"https://static001.geekbang.org/account/avatar/00/16/5e/28/c0a8f859.jpg","comment_is_top":false,"comment_ctime":1591101773,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591101773","product_id":100023201,"comment_content":"穿透指的是交给外层处理，消费指的是本层做出处理","like_count":0},{"had_liked":false,"id":218483,"user_name":"Tommy","can_delete":false,"product_type":"c1","uid":1994991,"ip_address":"","ucode":"336E7703EAD0A0","user_header":"https://static001.geekbang.org/account/avatar/00/1e/70/ef/3717a2c6.jpg","comment_is_top":false,"comment_ctime":1589807743,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1589807743","product_id":100023201,"comment_content":"请问老师<br><br>{<br>  var i = 1; &#47;&#47; normal, empty, empty<br>  i ++; &#47;&#47; normal, 1, empty<br>  console.log(i) &#47;&#47;normal, undefined, empty<br>} &#47;&#47; normal, undefined, empty<br><br>这段代码最终chrome控制台输出结果为2，按本章意思console.log(i)应该输出undefined。<br>是我理解出了错，还是写错了。。","like_count":0,"discussions":[{"author":{"id":1071909,"avatar":"https://static001.geekbang.org/account/avatar/00/10/5b/25/d78cc1fe.jpg","nickname":"都市夜归人","note":"","ucode":"DFF59BE3D80B42","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":277076,"discussion_content":"我觉得这个undefined不是指输出什么值，而是指是否有返回值，js中的函数如果没有return 语句返回值都是undefined","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1590994387,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":217213,"user_name":"姜莱","can_delete":false,"product_type":"c1","uid":2002204,"ip_address":"","ucode":"874A2CC66C548C","user_header":"","comment_is_top":false,"comment_ctime":1589441633,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589441633","product_id":100023201,"comment_content":"愚见，消费是为穿透服务的。比如return的时候，因为function能够使用return（即消费），所以直接去找最近的function并结束它。中途遇到的for，if没有资格使用return，所以直接跳过（即穿透）。","like_count":0},{"had_liked":false,"id":217208,"user_name":"I have a dream","can_delete":false,"product_type":"c1","uid":1468864,"ip_address":"","ucode":"9BBB3B6AE87568","user_header":"https://static001.geekbang.org/account/avatar/00/16/69/c0/5558436f.jpg","comment_is_top":false,"comment_ctime":1589440288,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589440288","product_id":100023201,"comment_content":"老师好，在 catch 中  throw 语句会穿透这点我不太理解。按我的理解在 catch 中捕获到了错误，然后 用throw 语句再抛出去。这样也算消费了吧","like_count":0},{"had_liked":false,"id":215356,"user_name":"zhxxmu","can_delete":false,"product_type":"c1","uid":1058889,"ip_address":"","ucode":"4F74621F2C50D5","user_header":"https://static001.geekbang.org/account/avatar/00/10/28/49/27219a0f.jpg","comment_is_top":false,"comment_ctime":1588980572,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588980572","product_id":100023201,"comment_content":"以前刚开始使ajax的时候，经常被同步，异步执行搞混乱","like_count":0},{"had_liked":false,"id":214434,"user_name":"Yully","can_delete":false,"product_type":"c1","uid":1254946,"ip_address":"","ucode":"66034995A6282F","user_header":"https://static001.geekbang.org/account/avatar/00/13/26/22/dd505e6d.jpg","comment_is_top":false,"comment_ctime":1588749142,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588749142","product_id":100023201,"comment_content":"老师前后呼应的讲解真的很好，一边学一边做笔记才行，\b之前说规范类型的时候只讲了Completion Record这个名字，还着重在笔记上打了一个大大的问号，在这篇里进行了详细的讲解，好奇心被满足","like_count":0},{"had_liked":false,"id":213114,"user_name":"阿感","can_delete":false,"product_type":"c1","uid":1910075,"ip_address":"","ucode":"7BCB7E44A832D1","user_header":"https://static001.geekbang.org/account/avatar/00/1d/25/3b/a971fc8e.jpg","comment_is_top":false,"comment_ctime":1588304485,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588304485","product_id":100023201,"comment_content":"奇怪的知识又在增加了","like_count":0},{"had_liked":false,"id":193726,"user_name":"许啊啊","can_delete":false,"product_type":"c1","uid":1375228,"ip_address":"","ucode":"169F379FFC530A","user_header":"https://static001.geekbang.org/account/avatar/00/14/fb/fc/79b25710.jpg","comment_is_top":false,"comment_ctime":1584955344,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584955344","product_id":100023201,"comment_content":"我也很想知道哪学的。太细了吧~而且感觉有些有点晦涩，虽然都知道是什么意思，但是就是无法从自己嘴里说出来。。。","like_count":0},{"had_liked":false,"id":169969,"user_name":"Lt","can_delete":false,"product_type":"c1","uid":1381744,"ip_address":"","ucode":"C706692C353D65","user_header":"https://static001.geekbang.org/account/avatar/00/15/15/70/3fa85df8.jpg","comment_is_top":false,"comment_ctime":1578485514,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578485514","product_id":100023201,"comment_content":"听了两遍，挺有收获","like_count":0},{"had_liked":false,"id":143867,"user_name":"尤璐洁","can_delete":false,"product_type":"c1","uid":1645251,"ip_address":"","ucode":"4ED9B2FEC90744","user_header":"https://static001.geekbang.org/account/avatar/00/19/1a/c3/02bb2ebe.jpg","comment_is_top":false,"comment_ctime":1571800757,"is_pvip":false,"replies":[{"id":"58899","content":"这是个概念模型，标准这样讲的，但是其实实现不一定这么实现，只要保证跟这个模型等效即可。<br><br>","user_name":"作者回复","user_name_real":"winter","uid":"1268524","ctime":1574219487,"ip_address":"","comment_id":143867,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571800757","product_id":100023201,"comment_content":"winter老师，这些个私有属性的值执行时的值是如何得出的，是靠分析，还是说有某种方式可以看到验证呢？","like_count":0,"discussions":[{"author":{"id":1268524,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2c/12bfd3cd.jpg","nickname":"winter","note":"","ucode":"2B068EDEAFEB56","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471731,"discussion_content":"这是个概念模型，标准这样讲的，但是其实实现不一定这么实现，只要保证跟这个模型等效即可。\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574219487,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133872,"user_name":"小say","can_delete":false,"product_type":"c1","uid":1379957,"ip_address":"","ucode":"8740E673AC7B33","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/WADWW2CpTUau6VakOsNXVtdoVaASQR7l1uKIDakINy8iaSibglv5Gjh67PdEAgXNVqzQrmRSrouaKZkJ8MQVVQsA/132","comment_is_top":false,"comment_ctime":1568688434,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568688434","product_id":100023201,"comment_content":"ada","like_count":0},{"had_liked":false,"id":111946,"user_name":"东","can_delete":false,"product_type":"c1","uid":1144627,"ip_address":"","ucode":"CEE6AC611E351B","user_header":"https://static001.geekbang.org/account/avatar/00/11/77/33/121176bb.jpg","comment_is_top":false,"comment_ctime":1562641147,"is_pvip":false,"replies":[{"id":"58919","content":"穿透的意思是交给外层处理，你外面没循环当然还是报错。","user_name":"作者回复","user_name_real":"winter","uid":"1268524","ctime":1574220992,"ip_address":"","comment_id":111946,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1562641147","product_id":100023201,"comment_content":"void function() {<br>\tif(true){<br>\t\tconsole.log(1)<br>\t\tbreak<br>\t\tconsole.log(2)<br>\t}<br>}()<br>在if中用break、continue会报错VM506:4 Uncaught SyntaxError: Illegal break statement，而不是穿透，为什么和表格举出的不一致呢","like_count":0,"discussions":[{"author":{"id":1268524,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2c/12bfd3cd.jpg","nickname":"winter","note":"","ucode":"2B068EDEAFEB56","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457512,"discussion_content":"穿透的意思是交给外层处理，你外面没循环当然还是报错。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574220992,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1595665,"avatar":"https://static001.geekbang.org/account/avatar/00/18/59/11/d2093b75.jpg","nickname":"醉清玄","note":"","ucode":"F464ECF4B8FFB4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6394,"discussion_content":"是和表格一致的啊，break和if相遇穿透，然后break和function相遇，报错","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566880339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1232623,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ce/ef/f5556442.jpg","nickname":"南京韶邵不说话","note":"","ucode":"094031F99DDE72","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6080,"discussion_content":"应该是穿透出去找了一圈，发现，根本没有东西可以break，所以报错了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566660805,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107358,"user_name":"热爱减肥的胖子","can_delete":false,"product_type":"c1","uid":1474673,"ip_address":"","ucode":"699FCA5694661A","user_header":"https://static001.geekbang.org/account/avatar/00/16/80/71/df2415a6.jpg","comment_is_top":false,"comment_ctime":1561518430,"is_pvip":false,"replies":[{"id":"58934","content":"后面一句就是特殊处理。","user_name":"作者回复","user_name_real":"winter","uid":"1268524","ctime":1574221768,"ip_address":"","comment_id":107358,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561518430","product_id":100023201,"comment_content":"请问，上图上那个“特殊处理”怎么理解？","like_count":0,"discussions":[{"author":{"id":1268524,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2c/12bfd3cd.jpg","nickname":"winter","note":"","ucode":"2B068EDEAFEB56","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455485,"discussion_content":"后面一句就是特殊处理。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574221768,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104244,"user_name":"jacklovepdf","can_delete":false,"product_type":"c1","uid":1501300,"ip_address":"","ucode":"64CF166C45908B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ26xdibLibk37rdrIA3zStsayOo9b0SGiasibNGfic6n2EIJiba1ptZOtWqV797wkszdjDM8aQkz1A2vibw/132","comment_is_top":false,"comment_ctime":1560696807,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560696807","product_id":100023201,"comment_content":"这一节知识点以前没掌握，学习了。","like_count":0},{"had_liked":false,"id":100882,"user_name":"Geek","can_delete":false,"product_type":"c1","uid":1358337,"ip_address":"","ucode":"276E2950D31AFB","user_header":"https://static001.geekbang.org/account/avatar/00/14/ba/01/c5161563.jpg","comment_is_top":false,"comment_ctime":1559661455,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559661455","product_id":100023201,"comment_content":"这篇明显内容精准，给老师个赞","like_count":0},{"had_liked":false,"id":93503,"user_name":"毛哥来了","can_delete":false,"product_type":"c1","uid":1404451,"ip_address":"","ucode":"5A3D61FD29EE69","user_header":"https://static001.geekbang.org/account/avatar/00/15/6e/23/9fce5f72.jpg","comment_is_top":false,"comment_ctime":1557482773,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1557482773","product_id":100023201,"comment_content":"比如<br>&quot;test&quot;;var a = 1;<br>这一句在console中返回的值是&quot;test&quot;,why?","like_count":0,"discussions":[{"author":{"id":1375777,"avatar":"https://static001.geekbang.org/account/avatar/00/14/fe/21/df75ca94.jpg","nickname":"林浩","note":"","ucode":"266C06165AFA47","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":259059,"discussion_content":"var a = 1的Completion Recode value是undefined, 所以控制台返回&#39;test’这个返回值， 按照老师思路我是这么理解","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588756850,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1232623,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ce/ef/f5556442.jpg","nickname":"南京韶邵不说话","note":"","ucode":"094031F99DDE72","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6081,"discussion_content":"不是写一行就是一句，这是两句","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566660889,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91864,"user_name":"Geek_c11e90","can_delete":false,"product_type":"c1","uid":1510252,"ip_address":"","ucode":"297417E0700558","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKVaNK1CMOiaJRzu8Srpkxic98vNo56hPU6a7RiacnnicPPicibxRQE7mqcE2F0NF39XDBIQPiazbjhcCpcg/132","comment_is_top":false,"comment_ctime":1557122061,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557122061","product_id":100023201,"comment_content":"遇到过一些异步的情况，有些理解不了","like_count":0},{"had_liked":false,"id":86890,"user_name":"kovar","can_delete":false,"product_type":"c1","uid":1384697,"ip_address":"","ucode":"A9A6C929FF4BCC","user_header":"","comment_is_top":false,"comment_ctime":1555470574,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555470574","product_id":100023201,"comment_content":"搜了一下，Completion Record好像是ES2020里面的东西，老师果然够前卫，虽然我现在还看不懂就是了https:&#47;&#47;tc39.github.io&#47;ecma262&#47;#sec-runtime-semantics","like_count":0},{"had_liked":false,"id":82410,"user_name":"张驰","can_delete":false,"product_type":"c1","uid":1004106,"ip_address":"","ucode":"3181D1DF5216C2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/4a/56c7591e.jpg","comment_is_top":false,"comment_ctime":1554203934,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554203934","product_id":100023201,"comment_content":"这个章节的知识令人茅塞顿开","like_count":0},{"had_liked":false,"id":82235,"user_name":"Marvin","can_delete":false,"product_type":"c1","uid":1378026,"ip_address":"","ucode":"985D6CA5B9AD73","user_header":"https://static001.geekbang.org/account/avatar/00/15/06/ea/79f6671a.jpg","comment_is_top":false,"comment_ctime":1554167047,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554167047","product_id":100023201,"comment_content":"太强了，太强了，越看发现自己越弱鸡～","like_count":0},{"had_liked":false,"id":75955,"user_name":"zyg","can_delete":false,"product_type":"c1","uid":1011423,"ip_address":"","ucode":"D35A38170BD916","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6e/df/2a3a2fd0.jpg","comment_is_top":false,"comment_ctime":1552497316,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552497316","product_id":100023201,"comment_content":"这种设计是不是很不合理呢增加了复杂度～","like_count":0},{"had_liked":false,"id":73609,"user_name":"[已重置]","can_delete":false,"product_type":"c1","uid":1380263,"ip_address":"","ucode":"7CE91D63AD9481","user_header":"https://static001.geekbang.org/account/avatar/00/15/0f/a7/783e4f88.jpg","comment_is_top":false,"comment_ctime":1551939563,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1551939563","product_id":100023201,"comment_content":"哇实际代码中遇到过类似的问题，从没想过原来还有这种类似于c中label和goto的用法，都是加标志位两次break解决的。","like_count":0},{"had_liked":false,"id":72746,"user_name":"梦在路上的人","can_delete":false,"product_type":"c1","uid":1183169,"ip_address":"","ucode":"F6A9F689E1AD6A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0d/c1/26b97732.jpg","comment_is_top":false,"comment_ctime":1551709251,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1551709251","product_id":100023201,"comment_content":"真的是长见识了，学到了好多高级名词。","like_count":0},{"had_liked":false,"id":72705,"user_name":"火云邪神0007","can_delete":false,"product_type":"c1","uid":1390886,"ip_address":"","ucode":"158014211134B1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er9YqiaybDPpZMr3ecHDv8P3chyr3dETz5Ljft8s3F47JDN93yOKeOyysxxhaN7MJmXt7ib5X6EgMGQ/132","comment_is_top":false,"comment_ctime":1551698519,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1551698519","product_id":100023201,"comment_content":"五月四号就可以在Qcon上见到冬哥了，激动！！！！！！！！！！！！！！","like_count":0},{"had_liked":false,"id":72637,"user_name":"smallbone","can_delete":false,"product_type":"c1","uid":1076485,"ip_address":"","ucode":"DE7E5006D798FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/6d/05/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1551683586,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1551683586","product_id":100023201,"comment_content":"最近在看《你不知道的JS》中卷，其中就有讲到“标签语句”和“try, catch, finally”的内容，但是老师讲的这篇更加深入，赞一个。","like_count":0}]}