{"id":528766,"title":"08｜视频：入门篇实操总结","content":"<p>你好，我是Chrono。</p><p>今天的课程和前面的不太一样，变成了视频的形式。之前也讲过很多次学习Kubernetes要以动手实操为主，加上专栏里单纯的文字配图的形式还是不太直观，所以每到一个学习阶段，我们就会来一个视频总结，把之前学习的内容以视频的形式展现出来，这样也许会让学习的效果更好。</p><p>这次视频课程的主要内容和第7讲差不多，是对“入门篇”的回顾与总结，但侧重点是对Docker的实际操作，不会再重复讲那些理论知识。每个视频后都会附上操作要点，供你快速定位和做笔记。</p><p>好了，我们正式开始吧。</p><hr><h2>一. 熟悉Docker的使用</h2><p><video poster=\"https://static001.geekbang.org/resource/image/25/55/25af57e246123f14a6cfd3c1769eee55.jpg\" preload=\"none\" controls=\"\"><source src=\"https://media001.geekbang.org/customerTrans/7e27d07d27d407ebcc195a0e78395f55/4c51568-181665185d1-0000-0000-01d-dbacd.mp4\" type=\"video/mp4\"><source src=\" https://media001.geekbang.org/9a4443aa451e4e52bc47e835d4982575/e508af03a78646e6a609c1675b3b4eaf-18ed73d12a22be0dedc6e110038bdc7d-sd.m3u8\" type=\"application/x-mpegURL\"></video></p><p>视频操作要点：</p><p>首先来操作一下Docker Engine。</p><p>（有了<a href=\"https://time.geekbang.org/column/article/528614\">课前准备</a>的基础）在这台机器上，Docker已经安装好了，我给你用 <code>docker version</code> 和 <code>docker info</code> 看一下它的信息。</p><p><code>docker version</code> 显示的是Docker Engine 20.10.12，系统是Linux，硬件架构是arm64，也就是Apple M1。</p><p><code>docker info</code> 显示的是当前系统相关的信息，例如CPU、内存、容器数量、镜像数量、容器运行时、存储文件系统等等。这里存储用的文件系统是overlay2，Linux内核是5.13，操作系统是Ubuntu 22.04 Jammy Jellyfish，硬件是aarch64，两个CPU，内存4G。</p><!-- [[[read_end]]] --><p>现在我们用 <code>docker ps</code> 看一下容器列表，应该是空的。</p><p>然后用 <code>docker pull</code> 拉取busybox镜像，再用 <code>docker images</code> 看镜像列表。</p><p>使用 <code>docker run</code> 启动busybox镜像，执行最简单的hello world：</p><pre><code class=\"language-plain\">docker run busybox echo hello world\n</code></pre><p>然后再用 <code>docker ps -a</code> 查看已经结束的容器列表，应该可以看到刚刚运行完毕的Busybox容器，可以用 <code>docker rm</code> 再加上容器ID删除它。</p><h2>二. 镜像和容器</h2><p><video poster=\"https://static001.geekbang.org/resource/image/b4/e6/b49b55222fb8f7edfa90b353665976e6.jpg\" preload=\"none\" controls=\"\"><source src=\"https://media001.geekbang.org/customerTrans/7e27d07d27d407ebcc195a0e78395f55/5a397d17-181665181d0-0000-0000-01d-dbacd.mp4\" type=\"video/mp4\"><source src=\" https://media001.geekbang.org/4c0937f2f02e48919df26de95d3c677f/46ab2d64899941ec964f40efe9812f7a-cc0e523e3afd2b218d24e278e36d4830-sd.m3u8\" type=\"application/x-mpegURL\"></video></p><p>视频操作要点：</p><p>我们再来拉取另一个镜像，操作系统Alpine：</p><pre><code class=\"language-plain\">docker pull alpine\n</code></pre><p>然后用 <code>docker run</code>，加上it参数，运行它里面的shell：</p><pre><code class=\"language-plain\">docker run -it alpine sh\n</code></pre><p>这样就暂时离开当前的Ubuntu操作系统，进入了容器内部的Alpine系统，可以在里面执行任意的命令，比如 <code>cat /etc/os-release</code> 。</p><p>这个容器环境与外面是完全隔离的，进程、文件系统都独立，不过也有没有隔离的部分，比如时间和内核。</p><p>使用exit退出容器，然后在宿主机环境执行date、uname -a，你就可以看到它与容器里是一致的。</p><p>让我们再运行一个容器：</p><pre><code class=\"language-plain\">docker run -d --rm nginx:alpine\n</code></pre><p>在宿主机里用 <code>ps -ef|grep nginx</code> 可以看到有3个Nginx进程，它们其实就是容器里的Nginx进程，用docker stop停止后再用ps，就能发现它们已经消失了。</p><p>这就证明，容器其实就是操作系统里的进程，只是被容器运行环境加上了namespace、cgroup、chroot的限制，所以容器和普通进程在资源的使用方面是没有什么区别的，也因为没有虚拟机的成本，启动更迅速，资源利用率也就更高。</p><h2>三. 构建自己的镜像</h2><p><video poster=\"https://static001.geekbang.org/resource/image/81/76/810c79a88d283ac8231252578f7e2176.jpg\" preload=\"none\" controls=\"\"><source src=\"https://media001.geekbang.org/customerTrans/7e27d07d27d407ebcc195a0e78395f55/5afa4eec-18166517d5b-0000-0000-01d-dbacd.mp4\" type=\"video/mp4\"><source src=\" https://media001.geekbang.org/b095f9aee4fe483f9de80a3fd9b38c02/1e0e936531324001a869c4607f4cebea-d4e2fceb2adfb0b1de22540bd48af3e9-sd.m3u8\" type=\"application/x-mpegURL\"></video></p><p>视频操作要点：</p><p>现在让我们来尝试编写Dockerfile，构建一个自己的镜像。</p><p>这个Dockerfile先用arg指令定义了IMAGE_BASE、IMAGE_TAG两个变量，然后使用from指令指定了构建的基础镜像，把这两个变量结合起来就是 <code>nginx:1.21-alpine</code> 。</p><p>后面的两个env指令定义了PATH和DEBUG两个环境变量。arg指令定义的变量只能在构建镜像的时候使用，而env定义的变量则会在容器运行的时候以环境变量的形式出现，让进程运行时使用。</p><p>接下来是copy指令，它会把构建上下文里的./default.conf拷贝到镜像的/etc/nginx/conf.d/，注意copy指令不能使用绝对路径，必须是构建上下文的相对路径，而且Docker会把构建上下文里的所有文件打包传递给docker daemon，所有尽量只包含必要的文件。</p><p>run指令就是构建镜像时要执行的shell命令，可以是安装软件、创建目录、编译程序等等，这里只是简单地用echo命令生成了一个文本文件。</p><p>最后两条指令是 <code>expose</code> 和 <code>workdir</code>，<code>expose</code> 是声明容器对外服务的端口号，而 <code>workdir</code> 是容器的工作目录。</p><p>了解了Dockerfile的内容之后，我们就要用 <code>docker build</code> 来构建镜像了，使用 <code>-t</code> 打上标签，再加上构建上下文路径，当前目录就用一个点号 <code>.</code>：</p><pre><code class=\"language-plain\">docker build -t ngx-app:1.0 .\n</code></pre><p>构建完成，生成镜像文件，我们可以用 <code>docker run</code> 从镜像启动容器，验证镜像里的文件是否正确生成：</p><pre><code class=\"language-plain\">docker run -it --rm ngx-app:1.0 sh\n</code></pre><p>然后我们还可以用 <code>docker save/load</code> 命令把它导出成压缩包，方便保存和传输：</p><pre><code class=\"language-plain\">docker save ngx-app:1.0 -o ngx.tar\ndocker load -i ngx.tar\n</code></pre><h2>四. 与外部系统互通的操作</h2><p><video poster=\"https://static001.geekbang.org/resource/image/a8/30/a8e77be641768257973d358108f5fc30.jpg\" preload=\"none\" controls=\"\"><source src=\"https://media001.geekbang.org/customerTrans/7e27d07d27d407ebcc195a0e78395f55/2e56a0f-1816651784d-0000-0000-01d-dbacd.mp4\" type=\"video/mp4\"><source src=\" https://media001.geekbang.org/fc59f80b70d649b5a419cb501c38ec3d/84530275ba9342eea09b1c625abc92c6-5d237100c7ca337e30679ca010665c0f-sd.m3u8\" type=\"application/x-mpegURL\"></video></p><p>视频操作要点：</p><p>接下来我们看看容器与外部系统互通的一些操作。</p><p>首先是 <code>docker cp</code> 命令。让我们先启动一个Redis容器：</p><pre><code class=\"language-plain\">docker run -d --rm redis\n</code></pre><p>然后用 <code>echo</code> 命令生成一个简单的文本文件：</p><pre><code class=\"language-plain\">echo 'aaa' &gt; a.txt\n</code></pre><p>用 <code>docker ps</code> 命令看看容器的ID，就可以使用 <code>docker cp</code> 命令把这个文件拷贝进容器里了：</p><pre><code class=\"language-plain\">docker cp a.txt 062:/tmp\n</code></pre><p>使用 <code>docker exec</code> 可以进入容器内部，查看文件是否已经正确拷贝：</p><pre><code class=\"language-plain\">docker exec -it 062 sh\nls /tmp\n</code></pre><p>退出容器，我们再把这个文件改个名字，拷贝出来：</p><pre><code class=\"language-plain\">docker cp 062:/tmp/a.txt ./b.txt\n</code></pre><p>现在我们再看看用 <code>-v</code> 参数直接挂载本地目录，把文件直接映射到容器内部：</p><pre><code class=\"language-plain\">docker run -d --rm -v /tmp:/tmp redis\n</code></pre><p>用 <code>docker exec</code> 进入容器，查看一下容器内的“/tmp”目录，应该就可以看到文件与宿主机是完全一致的。</p><pre><code class=\"language-plain\">docker exec -it b5a sh    # b5a是容器ID\n</code></pre><p><code>-p</code> 参数是映射本机端口到容器端口，我们启动一个Nginx容器，把本机的80端口映射到容器的80端口：</p><pre><code class=\"language-plain\">docker run -d -p 80:80 --rm nginx:alpine\n</code></pre><p><code>docker ps</code> 可以看到端口的映射情况，我们也可以使用curl直接访问容器里的Nginx服务：</p><pre><code class=\"language-plain\">curl 127.1:80&nbsp; &nbsp;-I\n</code></pre><p>再使用exec就可以看到容器里的网卡情况：</p><pre><code class=\"language-plain\">docker exec xxx ip addr\n</code></pre><p>可以发现容器里的网卡设置与宿主机完全不同，eth0是一个虚拟网卡，IP地址是B类私有地址“172.17.0.2”。</p><h2>五. 搭建WordPress</h2><p><video poster=\"https://static001.geekbang.org/resource/image/69/48/690b86fd45b8f1230114baa1544c9e48.jpg\" preload=\"none\" controls=\"\"><source src=\"https://media001.geekbang.org/customerTrans/7e27d07d27d407ebcc195a0e78395f55/56fd1dc1-18166517561-0000-0000-01d-dbacd.mp4\" type=\"video/mp4\"><source src=\" https://media001.geekbang.org/07d309caab5d44a58b71ae70196f73ca/a6ac52dd3c924285baa73513dba793c1-17d1dceebc373ab88398d3629492520d-sd.m3u8\" type=\"application/x-mpegURL\"></video></p><p>视频操作要点：</p><p>最后演示一下使用Docker搭建WordPress的过程。</p><p>因为在Docker命令里写环境变量很麻烦，命令很长，所以我把搭建的过程写成了一个脚本。</p><p>一共有三条命令，首先启动MariaDB，设置数据库名、用户名、密码等环境变量，然后启动WordPress，使用刚才的MariaDB的用户名、密码，db_host必须是MariaDB的IP地址，然后再启动Nginx，它需要在配置文件里指定WordPress的地址，然后用-v参数挂载进容器里。</p><p>执行这个脚本之后，我们用 <code>docker ps</code> 看一下容器的状态。</p><p>确认容器都运行正常，我们就可以在浏览器里输入IP地址，访问WordPress网站了。</p><h2>课下作业</h2><p>今天是动手操作课，作业就是一定记得让自己实际上手操作一遍哦。</p><p>欢迎在留言区分享自己的实操感受，如果有什么疑问也欢迎留言分享参与讨论。我们下节课初级篇见。</p>","comments":[{"had_liked":false,"id":352714,"user_name":"Geek_4d5ba0","can_delete":false,"product_type":"c1","uid":2878398,"ip_address":"","ucode":"B838A0EBF4123C","user_header":"","comment_is_top":false,"comment_ctime":1658894565,"is_pvip":false,"replies":[{"id":128277,"content":"thanks","user_name":"作者回复","user_name_real":"编辑","uid":1181974,"ctime":1658911100,"ip_address":"","comment_id":352714,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"老师讲的太赞了，一个上午看完入门篇，其中的细节讲的特别好，容易理解，像--rm，rm，rmi简直了，把删除镜像，删除容器，删除未运行状态的容器讲的一清二楚，还有容器仓库也是，mariadb这个数据库名字都讲到了。期待老师的后续课程","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581662,"discussion_content":"thanks","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658911100,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350949,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1657379934,"is_pvip":false,"replies":[{"id":127673,"content":"毕竟我们的目标是学习Kubernetes，以后有机会可以专门讲docker。\n\n简单理解，有&lt;none&gt;标记，没标签的就是dangling images，一般是标签被新镜像覆盖了。","user_name":"作者回复","user_name_real":"编辑","uid":1181974,"ctime":1657407887,"ip_address":"","comment_id":350949,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"老师，真不打算讲讲 volumes 相关的内容吗？ 我看这在docker里面好像属于比较核心的内容。\n\n另外，怎么理解：dangling images 这种现象呢？","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579378,"discussion_content":"毕竟我们的目标是学习Kubernetes，以后有机会可以专门讲docker。\n\n简单理解，有&lt;none&gt;标记，没标签的就是dangling images，一般是标签被新镜像覆盖了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657407887,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350893,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1657290702,"is_pvip":false,"replies":[{"id":127658,"content":"sorry，表述不准确，是用run从镜像启动容器。","user_name":"作者回复","user_name_real":"编辑","uid":1181974,"ctime":1657353528,"ip_address":"","comment_id":350893,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"老师文中有这么一句话：“构建完成，生成镜像文件，我们可以用 docker run 进入镜像，验证镜像里的文件是否正确生成。”\n\n这里使用docker run 进入的是容器还是镜像？ 我理解应该是进入容器里面吧？","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579323,"discussion_content":"sorry，表述不准确，是用run从镜像启动容器。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657353528,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350831,"user_name":"Magic","can_delete":false,"product_type":"c1","uid":2137611,"ip_address":"","ucode":"4B865D0C0D4A96","user_header":"https://static001.geekbang.org/account/avatar/00/20/9e/0b/e4d80306.jpg","comment_is_top":false,"comment_ctime":1657247414,"is_pvip":false,"replies":[{"id":127627,"content":"great","user_name":"作者回复","user_name_real":"编辑","uid":1181974,"ctime":1657248530,"ip_address":"","comment_id":350831,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"实践出真知，期待老师的下一节课。","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579199,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657248530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350830,"user_name":"Reiser","can_delete":false,"product_type":"c1","uid":1078669,"ip_address":"","ucode":"E5DBBBA2F86FCE","user_header":"https://static001.geekbang.org/account/avatar/00/10/75/8d/c6a2a048.jpg","comment_is_top":false,"comment_ctime":1657247078,"is_pvip":false,"replies":[{"id":127628,"content":"thanks","user_name":"作者回复","user_name_real":"编辑","uid":1181974,"ctime":1657248534,"ip_address":"","comment_id":350830,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"这种边学边动手的方式太棒啦！","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579200,"discussion_content":"thanks","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657248535,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351615,"user_name":"麻婆豆腐","can_delete":false,"product_type":"c1","uid":1731885,"ip_address":"","ucode":"F371FE05D081D6","user_header":"https://static001.geekbang.org/account/avatar/00/1a/6d/2d/de41f9cf.jpg","comment_is_top":false,"comment_ctime":1658014178,"is_pvip":false,"replies":[{"id":127883,"content":"容器不会保存任何东西，强调的就是用完就扔，想要保存数据就要外挂存储卷。","user_name":"作者回复","user_name_real":"编辑","uid":1181974,"ctime":1658063965,"ip_address":"","comment_id":351615,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"老师好，启动容器后修改了容器里的内容，比如网数据库里写入了数据。容器退出后会自动保存吗。容器有快照吗，可以回滚到某个时间节点。","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580282,"discussion_content":"容器不会保存任何东西，强调的就是用完就扔，想要保存数据就要外挂存储卷。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658063965,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1731885,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/6d/2d/de41f9cf.jpg","nickname":"麻婆豆腐","note":"","ucode":"F371FE05D081D6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":580447,"discussion_content":"明白了，谢谢老师","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658190647,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":580282,"ip_address":"","group_id":0},"score":580447,"extra":""}]}]},{"had_liked":false,"id":350881,"user_name":"一颗红心","can_delete":false,"product_type":"c1","uid":2540587,"ip_address":"","ucode":"9CAB419062DAC2","user_header":"https://static001.geekbang.org/account/avatar/00/26/c4/2b/b3f917ec.jpg","comment_is_top":false,"comment_ctime":1657274232,"is_pvip":false,"replies":[{"id":127655,"content":"thanks for your support.","user_name":"作者回复","user_name_real":"编辑","uid":1181974,"ctime":1657285081,"ip_address":"","comment_id":350881,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"期待更多实战内容 ^_^","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579284,"discussion_content":"thanks for your support.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657285081,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350827,"user_name":"peter","can_delete":false,"product_type":"c1","uid":1058183,"ip_address":"","ucode":"261C3FC001DE2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg","comment_is_top":false,"comment_ctime":1657245915,"is_pvip":false,"replies":[{"id":127637,"content":"\n1. 这个overlay2是union fs文件系统，和Linux的ext3、ext不一样，可以理解成是一种实现技术。\n\n2.uname看内核版本，都是5.15，前面的是主机名。\n\n3.时区不一样，一个是cst，一个是utc。","user_name":"作者回复","user_name_real":"编辑","uid":1181974,"ctime":1657250669,"ip_address":"","comment_id":350827,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"请教老师几个问题啊：\nQ1：docker info的输出中，“存储文件系统”是指宿主机的文件系统吗？ 还是指docker内部的文件系统？ 我感觉应该是docker内部的文件系统。 我用 df –T 命令查询了宿主机的文件系统，并没有发现“overlay2”。\nQ2：docker的内核必须与宿主机一样吗？\n在容器内核宿主机上用uname –a查到的结果必须一样吗？即宿主机和docker的内核必须一样吗？\n宿主机的查询结果：\nLinux peter-vm3 5.15.0-40-generic #43-Ubuntu SMP Wed Jun 15 12:54:21 UTC 2022 x86_64 x86_64 x86_64 GNU&#47;Linux\n容器中的查询结果：\nLinux 60620d76d4f6 5.15.0-40-generic #43-Ubuntu SMP Wed Jun 15 12:54:21 UTC 2022 x86_64 Linux\nQ3：docker与宿主机的date命令查询结果必须一样吗？\n我的查询结果是两个时间是不同的，如下所示：\n宿主机上：022年 07月 08日 星期五 09:48:46 CST\n容器内部：Fri Jul  8 01:48:27 UTC 2022\n","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579214,"discussion_content":"\n1. 这个overlay2是union fs文件系统，和Linux的ext3、ext不一样，可以理解成是一种实现技术。\n\n2.uname看内核版本，都是5.15，前面的是主机名。\n\n3.时区不一样，一个是cst，一个是utc。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657250669,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350822,"user_name":"密码123456","can_delete":false,"product_type":"c1","uid":1126593,"ip_address":"","ucode":"9889463CC0EA71","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/c1/2dde6700.jpg","comment_is_top":false,"comment_ctime":1657243180,"is_pvip":false,"replies":[{"id":127634,"content":"如果是docker hub好像不需要什么改动，Registry开什么协议需要看一下。","user_name":"作者回复","user_name_real":"编辑","uid":1181974,"ctime":1657248694,"ip_address":"","comment_id":350822,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"*⁂((✪⥎✪))⁂*  很不错，虽然之前都敲了一遍。安装仓库的时候，我这边推不成功，网上说，需要把仓库的协议从https改为http才能推送成功，后来改了一下，果然可以了。不知道有同鞋有没有遇到和我一样的问题","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579206,"discussion_content":"如果是docker hub好像不需要什么改动，Registry开什么协议需要看一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657248694,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579287,"discussion_content":"你是用Registry搭建本地私有仓库要改协议吗？ 我没有改过协议。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657289875,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350817,"user_name":"美妙的代码","can_delete":false,"product_type":"c1","uid":1111985,"ip_address":"","ucode":"9DADD72C193296","user_header":"https://static001.geekbang.org/account/avatar/00/10/f7/b1/982ea185.jpg","comment_is_top":false,"comment_ctime":1657241122,"is_pvip":true,"replies":[{"id":127632,"content":"great","user_name":"作者回复","user_name_real":"编辑","uid":1181974,"ctime":1657248623,"ip_address":"","comment_id":350817,"utype":1}],"discussion_count":1,"race_medal":1,"score":2,"product_id":100114501,"comment_content":"这个安排好啊，以后k8s 操作起来方便了","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579204,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657248623,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":374604,"user_name":"Geek_d3f1e0","can_delete":false,"product_type":"c1","uid":3573555,"ip_address":"湖南","ucode":"6194484560BCFF","user_header":"","comment_is_top":false,"comment_ctime":1684224553,"is_pvip":false,"replies":[{"id":136734,"content":"great","user_name":"作者回复","user_name_real":"编辑","uid":1181974,"ctime":1684289276,"ip_address":"北京","comment_id":374604,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"没有docker基础，重新入门学习了docker，回顾了两边，终于按照课程把WordPress跑了起来。\n","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":618490,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684289276,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":370412,"user_name":"马晓文","can_delete":false,"product_type":"c1","uid":2154426,"ip_address":"天津","ucode":"10DF0F9D726FD3","user_header":"https://static001.geekbang.org/account/avatar/00/20/df/ba/ce3c534d.jpg","comment_is_top":false,"comment_ctime":1678795286,"is_pvip":false,"replies":[{"id":135102,"content":"good","user_name":"作者回复","user_name_real":"编辑","uid":1181974,"ctime":1678849025,"ip_address":"上海","comment_id":370412,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"# Dockerfile\n# docker build -t ngx-app .\n# docker build -t ngx-app:1.0 .\n\nARG IMAGE_BASE=&quot;nginx&quot;\nARG IMAGE_TAG=&quot;1.21-alpine&quot;\n\nFROM ${IMAGE_BASE}:${IMAGE_TAG}\n\n\nENV PATH=$PATH:&#47;tmp\nENV DEBUG=OFF\n\nCOPY .&#47;default.conf &#47;etc&#47;nginx&#47;conf.d&#47;\n\nRUN cd &#47;usr&#47;share&#47;nginx&#47;html \\\n    &amp;&amp; echo &quot;hello nginx&quot; &gt; a.txt\n\nEXPOSE 8081 8082 8083\n\nWORKDIR &#47;etc&#47;nginx\n\ngit 地址：https:&#47;&#47;github.com&#47;chronolaw&#47;k8s_study                                                                                                                  ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":609145,"discussion_content":"good","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678849025,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":362152,"user_name":"syz","can_delete":false,"product_type":"c1","uid":1174704,"ip_address":"北京","ucode":"54AF17ACD72645","user_header":"https://static001.geekbang.org/account/avatar/00/11/ec/b0/4e22819f.jpg","comment_is_top":false,"comment_ctime":1668221105,"is_pvip":false,"replies":[{"id":131733,"content":"看到这里用的是docker desktop，也许是环境的问题，换成Linux + docker Engine再看看。","user_name":"作者回复","user_name_real":"编辑","uid":1181974,"ctime":1668297287,"ip_address":"北京","comment_id":362152,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"在宿主机里用 ps -ef|grep nginx 可以看到有 3 个 Nginx 进程，它们其实就是容器里的 Nginx 进程，用 docker stop 停止后再用 ps，就能发现它们已经消失了。\n结果：没有看到3个nginx进程；\n------\ndocker run -d --rm nginx:alpine\n63b08ca159763cf77dce32558cebedcad5716e8dd1177118770883303741c7d3\n syz@localhost  ~  docker ps\nCONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS         PORTS     NAMES\n63b08ca15976   nginx:alpine   &quot;&#47;docker-entrypoint.…&quot;   11 seconds ago   Up 9 seconds   80&#47;tcp    kind_keldysh\n syz@localhost  ~  ps -ef|grep nginx\n  501  5942  5137   0 10:41上午 ttys000    0:00.00 grep --color=auto --exclude-dir=.bzr --exclude-dir=CVS --exclude-dir=.git --exclude-dir=.hg --exclude-dir=.svn --exclude-dir=.idea --exclude-dir=.tox nginx\n syz@localhost  ~  docker info\nClient:\n Context:    default\n Debug Mode: false\n Plugins:\n  buildx: Build with BuildKit (Docker Inc., v0.6.1-docker)\n  compose: Docker Compose (Docker Inc., v2.0.0-rc.3)\n  scan: Docker Scan (Docker Inc., v0.8.0)\n\nServer:\n Containers: 2\n  Running: 1\n  Paused: 0\n  Stopped: 1\n Images: 3\n Server Version: 20.10.8\n Storage Driver: overlay2\n  Backing Filesystem: extfs\n  Supports d_type: true\n  Native Overlay Diff: true\n  userxattr: false\n Logging Driver: json-file\n Cgroup Driver: cgroupfs\n Cgroup Version: 1\n Plugins:\n  Volume: local\n  Network: bridge host ipvlan macvlan null overlay\n  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog\n Swarm: inactive\n Runtimes: io.containerd.runtime.v1.linux runc io.containerd.runc.v2\n Default Runtime: runc\n Init Binary: docker-init\n containerd version: e25210fe30a0a703442421b0f60afac609f950a3\n runc version: v1.0.1-0-g4144b63\n init version: de40ad0\n Security Options:\n  seccomp\n   Profile: default\n Kernel Version: 5.10.47-linuxkit\n Operating System: Docker Desktop\n OSType: linux\n Architecture: x86_64\n CPUs: 6\n Total Memory: 1.939GiB\n Name: docker-desktop\n...","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593503,"discussion_content":"看到这里用的是docker desktop，也许是环境的问题，换成Linux + docker Engine再看看。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668297287,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357215,"user_name":"张申傲","can_delete":false,"product_type":"c1","uid":1182372,"ip_address":"北京","ucode":"22D46BC529BA8A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0a/a4/828a431f.jpg","comment_is_top":false,"comment_ctime":1663070956,"is_pvip":false,"replies":[{"id":130011,"content":"在第4讲里应该已经说得比较清楚了，如果有不清楚再具体提问。","user_name":"作者回复","user_name_real":"编辑","uid":1181974,"ctime":1663109864,"ip_address":"北京","comment_id":357215,"utype":1}],"discussion_count":1,"race_medal":2,"score":3,"product_id":100114501,"comment_content":"请教下老师，Dockerfile 中的 RUN 和 CMD 的作用和区别分别是什么呢？在很多地方看到这两种方式都是用来执行容器命令的。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587496,"discussion_content":"在第4讲里应该已经说得比较清楚了，如果有不清楚再具体提问。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663109864,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352544,"user_name":"大梧桐树","can_delete":false,"product_type":"c1","uid":2250622,"ip_address":"","ucode":"1E910FF0194159","user_header":"https://static001.geekbang.org/account/avatar/00/22/57/7e/453a0db7.jpg","comment_is_top":false,"comment_ctime":1658751645,"is_pvip":false,"replies":[{"id":128226,"content":"它们都在docker的内网环境里，当然可以访问，172.17.0.3是通过docker inspect看到的WordPress的IP地址。","user_name":"作者回复","user_name_real":"作者","uid":1181974,"ctime":1658789448,"ip_address":"","comment_id":352544,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"nginx的proxy_pass为啥指向172.17.0.3？这个内网地址nginx容器能访问到吗？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581431,"discussion_content":"它们都在docker的内网环境里，当然可以访问，172.17.0.3是通过docker inspect看到的WordPress的IP地址。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658789448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351471,"user_name":"Fan","can_delete":false,"product_type":"c1","uid":1115232,"ip_address":"","ucode":"3BF28670FD9407","user_header":"https://static001.geekbang.org/account/avatar/00/11/04/60/64d166b6.jpg","comment_is_top":false,"comment_ctime":1657812089,"is_pvip":false,"replies":[{"id":127831,"content":"这个和Kubernetes的有重叠，我们专栏的目标是Kubernetes，所以docker不可能面面俱到，抱歉了。","user_name":"作者回复","user_name_real":"编辑","uid":1181974,"ctime":1657839599,"ip_address":"","comment_id":351471,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"老师，能否讲讲docker 数据卷，数据持久化呢？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580032,"discussion_content":"这个和Kubernetes的有重叠，我们专栏的目标是Kubernetes，所以docker不可能面面俱到，抱歉了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657839600,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351367,"user_name":"Fan","can_delete":false,"product_type":"c1","uid":1115232,"ip_address":"","ucode":"3BF28670FD9407","user_header":"https://static001.geekbang.org/account/avatar/00/11/04/60/64d166b6.jpg","comment_is_top":false,"comment_ctime":1657727815,"is_pvip":false,"replies":[{"id":127797,"content":"thanks","user_name":"作者回复","user_name_real":"编辑","uid":1181974,"ctime":1657750608,"ip_address":"","comment_id":351367,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"有视频真赞。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579868,"discussion_content":"thanks","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657750608,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351061,"user_name":"纳兰容若","can_delete":false,"product_type":"c1","uid":1605876,"ip_address":"","ucode":"2E1EA2CDFDA1A9","user_header":"https://static001.geekbang.org/account/avatar/00/18/80/f4/564209ea.jpg","comment_is_top":false,"comment_ctime":1657506887,"is_pvip":false,"replies":[{"id":127713,"content":"是的，看课前准备，https:&#47;&#47;github.com&#47;chronolaw&#47;k8s_study。","user_name":"作者回复","user_name_real":"编辑","uid":1181974,"ctime":1657509573,"ip_address":"","comment_id":351061,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"老师您好\n咱们这门课也和其他课程一样在github上有课程的资料和代码么","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579513,"discussion_content":"是的，看课前准备，https://github.com/chronolaw/k8s_study。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657509574,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351001,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1657446372,"is_pvip":false,"replies":[{"id":127710,"content":"就是copy的表现形式不一样，可以按照Linux的cp命令来理解。\n\n其他命令可以参考docker官网文档。","user_name":"作者回复","user_name_real":"编辑","uid":1181974,"ctime":1657506590,"ip_address":"","comment_id":351001,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"老师，我看有的Dockerfile文件中是这么写的，能帮我分析一下分别代表的意思吗？\n\nCOPY [&quot;package.json&quot;, &quot;package-lock.json*&quot;, &quot;npm-shrinkwrap.json*&quot;, &quot;.&#47;&quot;]\n\nCOPY . .\n\nUSER node","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579508,"discussion_content":"就是copy的表现形式不一样，可以按照Linux的cp命令来理解。\n\n其他命令可以参考docker官网文档。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657506590,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350971,"user_name":"pyhhou","can_delete":false,"product_type":"c1","uid":1256496,"ip_address":"","ucode":"31EF8D50CF91A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","comment_is_top":false,"comment_ctime":1657432795,"is_pvip":false,"replies":[{"id":127707,"content":"只要使用正常就没问题，不需要和课程里一模一样。","user_name":"作者回复","user_name_real":"编辑","uid":1181974,"ctime":1657506438,"ip_address":"","comment_id":350971,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"老师，我这边 docker info 输出的操作系统（Operating System）是 Ubuntu 22.04 LTS，和你视频中显示的不一样。因为我是用你在第 2 讲中上传的 Apple M1 Ubuntu 镜像来安装的，按理说应该和你视频中是一样的操作系统才对吧？\n\n想到你之前说过最新的 Ubuntu 对 Apple M1 会有一些兼容性的问题，不知道对接下来的课程环境搭建会不会有影响？到目前为止，用的倒是没啥问题","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579505,"discussion_content":"只要使用正常就没问题，不需要和课程里一模一样。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657506438,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350889,"user_name":"奕","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1657285846,"is_pvip":false,"replies":[{"id":127656,"content":"yes, see you next week.","user_name":"作者回复","user_name_real":"编辑","uid":1181974,"ctime":1657353448,"ip_address":"","comment_id":350889,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100114501,"comment_content":"要开始进入 k8s 了","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579321,"discussion_content":"yes, see you next week.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657353448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350864,"user_name":"美妙的代码","can_delete":false,"product_type":"c1","uid":1111985,"ip_address":"","ucode":"9DADD72C193296","user_header":"https://static001.geekbang.org/account/avatar/00/10/f7/b1/982ea185.jpg","comment_is_top":false,"comment_ctime":1657264448,"is_pvip":true,"replies":[{"id":127645,"content":"会默认使用基础镜像的命令","user_name":"作者回复","user_name_real":"编辑","uid":1181974,"ctime":1657267169,"ip_address":"","comment_id":350864,"utype":1}],"discussion_count":2,"race_medal":1,"score":4,"product_id":100114501,"comment_content":"老师，在使用dockerfile 制作容器镜像nginx：alpine 后。 里面没有写nginx启动命令，这样启动容器后，里面nginx是没有启动的吧？ ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579246,"discussion_content":"会默认使用基础镜像的命令","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657267169,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1111985,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f7/b1/982ea185.jpg","nickname":"美妙的代码","note":"","ucode":"9DADD72C193296","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":579281,"discussion_content":"就是说基础镜像nginx：alpine  会有启动nginx参数， 其他使用这个基础镜像的镜像就会继承了？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657277564,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":579246,"ip_address":"","group_id":0},"score":579281,"extra":""}]}]},{"had_liked":false,"id":350811,"user_name":"下一页","can_delete":false,"product_type":"c1","uid":1053758,"ip_address":"","ucode":"C160C8F7818B67","user_header":"https://static001.geekbang.org/account/avatar/00/10/14/3e/b98bf3de.jpg","comment_is_top":false,"comment_ctime":1657237976,"is_pvip":false,"replies":[{"id":127625,"content":"引老师之前回复程同学的话：“学习的事情急不得，要有一个吸收沉淀的过程。”别着急嘛，如果学习进度非常好，可以找自己感兴趣的项目深入研究研究","user_name":"编辑回复","user_name_real":"编辑","uid":2547771,"ctime":1657246859,"ip_address":"","comment_id":350811,"utype":2}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100114501,"comment_content":"更新太慢了  根本不够看啊","like_count":0,"discussions":[{"author":{"id":2547771,"avatar":"https://static001.geekbang.org/account/avatar/00/26/e0/3b/8ec916b2.jpg","nickname":"多少","note":"","ucode":"0A6EF7AA6E4BB7","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579192,"discussion_content":"引老师之前回复程同学的话：“学习的事情急不得，要有一个吸收沉淀的过程。”别着急嘛，如果学习进度非常好，可以找自己感兴趣的项目深入研究研究","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657246859,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1309759,"avatar":"https://static001.geekbang.org/account/avatar/00/13/fc/3f/7e95156a.jpg","nickname":"啊勇","note":"","ucode":"CB403DD04F920A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582921,"discussion_content":"老师，我按照你的Dockerfile  来build，报如下错误：COPY failed: file not found in build context or excluded by .dockerignore: stat default.conf: file does not exist。请老师帮忙看看，谢谢！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659777160,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"湖南","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}