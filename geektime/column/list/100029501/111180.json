{"id":111180,"title":"21丨范式设计：数据表的范式有哪些，3NF指的是什么？","content":"<p>在日常工作中，我们都需要遵守一定的规范，比如签到打卡、审批流程等，这些规范虽然有一定的约束感，却是非常有必要的，这样可以保证正确性和严谨性，但有些情况下，约束反而会带来效率的下降，比如一个可以直接操作的任务，却需要通过重重审批才能执行。</p><p>实际上，数据表的设计和工作流程的设计很像，我们既需要规范性，也要考虑到执行时的方便性。</p><p>今天，我来讲解一下数据表的设计范式。范式是数据表设计的基本原则，又很容易被忽略。很多时候，当数据库运行了一段时间之后，我们才发现数据表设计得有问题。重新调整数据表的结构，就需要做数据迁移，还有可能影响程序的业务逻辑，以及网站正常的访问。所以在开始设置数据库的时候，我们就需要重视数据表的设计。</p><p>今天的课程你需要掌握以下几个方面的内容：</p><ol>\n<li>数据库的设计范式都有哪些？</li>\n<li>数据表的键都有哪些？</li>\n<li>1NF、2NF和3NF指的是什么？</li>\n</ol><h2>数据库的设计范式都包括哪些</h2><p>我们在设计关系型数据库模型的时候，需要对关系内部各个属性之间联系的合理化程度进行定义，这就有了不同等级的规范要求，这些规范要求被称为范式（NF）。你可以把范式理解为，一张数据表的设计结构需要满足的某种设计标准的级别。</p><p>目前关系型数据库一共有6种范式，按照范式级别，从低到高分别是：1NF（第一范式）、2NF（第二范式）、3NF（第三范式）、BCNF（巴斯-科德范式）、4NF（第四范式）和5NF（第五范式，又叫做完美范式）。</p><!-- [[[read_end]]] --><p>数据库的范式设计越高阶，冗余度就越低，同时高阶的范式一定符合低阶范式的要求，比如满足2NF的一定满足1NF，满足3NF的一定满足2NF，依次类推。</p><p>你可能会问，这么多范式是不是都要掌握呢？</p><p>一般来说数据表的设计应尽量满足3NF。但也不绝对，有时候为了提高某些查询性能，我们还需要破坏范式规则，也就是反规范化。</p><p><img src=\"https://static001.geekbang.org/resource/image/42/9b/4299e5030169710d5b1d29fd0729879b.jpg?wh=766*526\" alt=\"\"></p><h2>数据表中的那些键</h2><p>范式的定义会使用到主键和候选键（因为主键和候选键可以唯一标识元组），数据库中的键（Key）由一个或者多个属性组成。我总结了下数据表中常用的几种键和属性的定义：</p><ul>\n<li>超键：能唯一标识元组的属性集叫做超键。</li>\n<li>候选键：如果超键不包括多余的属性，那么这个超键就是候选键。</li>\n<li>主键：用户可以从候选键中选择一个作为主键。</li>\n<li>外键：如果数据表R1中的某属性集不是R1的主键，而是另一个数据表R2的主键，那么这个属性集就是数据表R1的外键。</li>\n<li>主属性：包含在任一候选键中的属性称为主属性。</li>\n<li>非主属性：与主属性相对，指的是不包含在任何一个候选键中的属性。</li>\n</ul><p>通常，我们也将候选键称之为“码”，把主键也称为“主码”。因为键可能是由多个属性组成的，针对单个属性，我们还可以用主属性和非主属性来进行区分。</p><p>看到上面的描述你可能还是有点懵，我举个简单的例子。</p><p>我们之前用过NBA的球员表（player）和球队表（team）。这里我可以把球员表定义为包含球员编号、姓名、身份证号、年龄和球队编号；球队表包含球队编号、主教练和球队所在地。</p><p>对于球员表来说，超键就是包括球员编号或者身份证号的任意组合，比如（球员编号）（球员编号，姓名）（身份证号，年龄）等。</p><p>候选键就是最小的超键，对于球员表来说，候选键就是（球员编号）或者（身份证号）。</p><p>主键是我们自己选定，也就是从候选键中选择一个，比如（球员编号）。</p><p>外键就是球员表中的球队编号。</p><p>在player表中，主属性是（球员编号）（身份证号），其他的属性（姓名）（年龄）（球队编号）都是非主属性。</p><h2>从1NF到3NF</h2><p>了解了数据表中的4种键之后，我们再来看下1NF、2NF和3NF，BCNF我们放在后面讲。</p><p><strong>1NF指的是数据库表中的任何属性都是原子性的，不可再分</strong>。这很好理解，我们在设计某个字段的时候，对于字段X来说，就不能把字段X拆分成字段X-1和字段X-2。事实上，任何的DBMS都会满足第一范式的要求，不会将字段进行拆分。</p><p><strong>2NF指的数据表里的非主属性都要和这个数据表的候选键有完全依赖关系</strong>。所谓完全依赖不同于部分依赖，也就是不能仅依赖候选键的一部分属性，而必须依赖全部属性。</p><p>这里我举一个没有满足2NF的例子，比如说我们设计一张球员比赛表player_game，里面包含球员编号、姓名、年龄、比赛编号、比赛时间和比赛场地等属性，这里候选键和主键都为（球员编号，比赛编号），我们可以通过候选键来决定如下的关系：</p><p>(球员编号, 比赛编号) → (姓名, 年龄, 比赛时间, 比赛场地，得分)</p><p>上面这个关系说明球员编号和比赛编号的组合决定了球员的姓名、年龄、比赛时间、比赛地点和该比赛的得分数据。</p><p>但是这个数据表不满足第二范式，因为数据表中的字段之间还存在着如下的对应关系：</p><p>(球员编号) → (姓名，年龄)</p><p>(比赛编号) → (比赛时间, 比赛场地)</p><p>也就是说候选键中的某个字段决定了非主属性。你也可以理解为，对于非主属性来说，并非完全依赖候选键。这样会产生怎样的问题呢？</p><ol>\n<li>数据冗余：如果一个球员可以参加m场比赛，那么球员的姓名和年龄就重复了m-1次。一个比赛也可能会有n个球员参加，比赛的时间和地点就重复了n-1次。</li>\n<li>插入异常：如果我们想要添加一场新的比赛，但是这时还没有确定参加的球员都有谁，那么就没法插入。</li>\n<li>删除异常：如果我要删除某个球员编号，如果没有单独保存比赛表的话，就会同时把比赛信息删除掉。</li>\n<li>更新异常：如果我们调整了某个比赛的时间，那么数据表中所有这个比赛的时间都需要进行调整，否则就会出现一场比赛时间不同的情况。</li>\n</ol><p>为了避免出现上述的情况，我们可以把球员比赛表设计为下面的三张表。</p><p>球员player表包含球员编号、姓名和年龄等属性；比赛game表包含比赛编号、比赛时间和比赛场地等属性；球员比赛关系player_game表包含球员编号、比赛编号和得分等属性。</p><p>这样的话，每张数据表都符合第二范式，也就避免了异常情况的发生。某种程度上2NF是对1NF原子性的升级。1NF告诉我们字段属性需要是原子性的，而2NF告诉我们一张表就是一个独立的对象，也就是说一张表只表达一个意思。</p><p><strong>3NF在满足2NF的同时，对任何非主属性都不传递依赖于候选键</strong>。也就是说不能存在非主属性 A 依赖于非主属性 B，非主属性 B 依赖于候选键的情况。</p><p>我们用球员player表举例子，这张表包含的属性包括球员编号、姓名、球队名称和球队主教练。现在，我们把属性之间的依赖关系画出来，如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/42/33/4286e4c955589ab7145ee36ab135b933.jpg?wh=526*253\" alt=\"\"><br>\n你能看到球员编号决定了球队名称，同时球队名称决定了球队主教练，非主属性球队主教练就会传递依赖于球员编号，因此不符合3NF的要求。</p><p>如果要达到3NF的要求，需要把数据表拆成下面这样：</p><p>球员表的属性包括球员编号、姓名和球队名称；球队表的属性包括球队名称、球队主教练。</p><p>我再总结一下，1NF需要保证表中每个属性都保持原子性；2NF需要保证表中的非主属性与候选键完全依赖；3NF需要保证表中的非主属性与候选键不存在传递依赖。</p><h2>总结</h2><p>我们今天讲解了数据表设计的三种范式。关系型数据库的设计都是基于关系模型的，在关系模型中存在着4种键，这些键的核心作用就是标识。</p><p>在这些概念的基础上，我又讲了1NF，2NF和3NF。我们经常会与这三种范式打交道，利用它们建立冗余度小、结构合理的数据库。</p><p>有一点需要注意的是，这些范式只是提出了设计的标准，实际上设计数据表时，未必要符合这些原则。一方面是因为这些范式本身存在一些问题，可能会带来插入，更新，删除等的异常情况（这些会在下一讲举例说明），另一方面，它们也可能降低会查询的效率。这是为什么呢？因为范式等级越高，设计出来的数据表就越多，进行数据查询的时候就可能需要关联多张表，从而影响查询效率。</p><p><img src=\"https://static001.geekbang.org/resource/image/e7/11/e775113e733020a7810196afd4f58711.jpg?wh=3341*1778\" alt=\"\"><br>\n2NF和3NF相对容易混淆，根据今天的内容，你能说下这两个范式之间的区别吗？另外，如果我们现在有一张学生选课表，包含的属性有学号、姓名、课程名称、分数、系别和系主任，如果要改成符合3NF要求的设计，需要怎么修改呢？</p><p>欢迎你在评论区写下你的答案，也欢迎把这篇文章分享给你的朋友或者同事，一起来交流。</p>","comments":[{"had_liked":true,"id":118583,"user_name":"夜路破晓","can_delete":false,"product_type":"c1","uid":1353577,"ip_address":"","ucode":"9B875F94B759B9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/3hZfficKPGCq2kjFBu9SgaMjibJTEl7iaW1ta6pZNyiaWP8XEsNpunlnsiaOtBpWTXfT5BvRP3qNByml6p9rtBvqewg/132","comment_is_top":false,"comment_ctime":1564391866,"is_pvip":false,"replies":[{"id":"63606","content":"很好 竟然能看出境界 厉害","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577520890,"ip_address":"","comment_id":118583,"utype":1}],"discussion_count":7,"race_medal":0,"score":"504075565498","product_id":100029501,"comment_content":"数据库设计三重境：<br>第一重：山无棱，天地合，乃敢与君绝。（1NF：不可分）<br>第二重：玲珑骰子安红豆，入骨相思知不知。（2NF：完全性）<br>第三重：问世间，情为何物，直教人生死相许？（3NF：直接性）","like_count":118,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460469,"discussion_content":"很好 竟然能看出境界 厉害","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577520890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1661704,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","nickname":"丁丁历险记","note":"","ucode":"A43829E454C067","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":105686,"discussion_content":"够扯淡，我喜欢","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1577462430,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1033425,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c4/d1/209abdd6.jpg","nickname":"小狼","note":"","ucode":"FEAC7864FC1D20","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296744,"discussion_content":"诗人","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596637713,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1261224,"avatar":"https://static001.geekbang.org/account/avatar/00/13/3e/a8/9473771b.jpg","nickname":"不过ing","note":"","ucode":"43D81C2D30DABD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":24973,"discussion_content":"佩服佩服","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570352655,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1544930,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/xcB6mPP8PaO3JqIKjgS4UqvC4JUQaTetdViblxibPff8wbtmoOoh1nWicDEGsII12fhXibhbribBPD3JOadz5MsLiaZg/132","nickname":"火鸡科学家","note":"","ucode":"FF2E52B4B175A6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21809,"discussion_content":"老哥牛逼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569542828,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1231549,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ca/bd/a51ae4b2.jpg","nickname":"吃饭饭","note":"","ucode":"95CFA07CDA2957","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3739,"discussion_content":"牛","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564740748,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1145168,"avatar":"https://static001.geekbang.org/account/avatar/00/11/79/50/93f85cd6.jpg","nickname":"燎沉香","note":"","ucode":"4CA5403FFF3489","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3613,"discussion_content":"有才有才！！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564638475,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166538,"user_name":"丁丁历险记","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1577489382,"is_pvip":false,"replies":[{"id":"63471","content":"梳理的不错","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577503707,"ip_address":"","comment_id":166538,"utype":1}],"discussion_count":4,"race_medal":0,"score":"160491279334","product_id":100029501,"comment_content":"啰哩巴嗦的扯一大堆。<br>姓名，年龄分开就是一范<br>加个id  就二范<br>加个foreign key 就三范<br>三降二  通过冗余字断提效率性能，取了个装x 的名字叫反范式。<br>其它的范式，没事别管，不论是开发效率，还是查询效率都很感人。<br>需要时google 下","like_count":38,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479531,"discussion_content":"梳理的不错","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577503707,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2586542,"avatar":"","nickname":"Geek_685cc8","note":"","ucode":"8ABDF7F1431E3B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389284,"discussion_content":"暴躁老哥 强","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1629204452,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2815900,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/f7/9c/69c5c5dc.jpg","nickname":"越锋利","note":"","ucode":"63E9E3F3C7D53D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":410756,"discussion_content":"为啥加个 id 就是 2NF？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635770937,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1341400,"avatar":"https://static001.geekbang.org/account/avatar/00/14/77/d8/0e64251b.jpg","nickname":"Venn_p","note":"","ucode":"8AB530B8EEE4CF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":219120,"discussion_content":"人狠话不多系列\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585737784,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118439,"user_name":"DZ","can_delete":false,"product_type":"c1","uid":1132240,"ip_address":"","ucode":"452555FA0F9E0F","user_header":"https://static001.geekbang.org/account/avatar/00/11/46/d0/6bafd7d4.jpg","comment_is_top":false,"comment_ctime":1564365283,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"156183187939","product_id":100029501,"comment_content":"2NF和3NF都强调非主属性对主属性的依赖关系，2N针对完全依赖，3NF针对直接依赖，都是为了保持表的原子性。<br><br><br>学生选课表，包含的属性有学号、姓名、课程名称、分数、系别和系主任，可拆分成以下表：<br><br>1. 学生表：学号、姓名<br>2. 课程表：课程号、课程名称<br>3. 系别表：系别、系主任<br>4. 学生-课程表：学号、课程号、分数<br>5. 学生-系别表：学号、系别<br><br>拆分之前，“姓名”违反了2NF，“系主任”违反了3NF。<br><br>","like_count":37,"discussions":[{"author":{"id":1690807,"avatar":"https://static001.geekbang.org/account/avatar/00/19/cc/b7/af6ef83d.jpg","nickname":"抢小孩子糖吃","note":"","ucode":"09F302FC76582A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":283187,"discussion_content":"感觉姓名没有违反2NF","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1592207820,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1033956,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/QD6bf8hkS5dHrabdW7M7Oo9An1Oo3QSxqoySJMDh7GTraxFRX77VZ2HZ13x3R4EVYddIGXicRRDAc7V9z5cLDlA/132","nickname":"爬行的蜗牛","note":"","ucode":"6623B62DE63CE9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":78615,"discussion_content":"表1: 学号， 姓名，课程名称， 分数  ： 满足2NF ， 学号或则姓名作为候选键与非主属性（课程和分数）拥有安全依赖关系； 满足3NF ， 非主属性（课程名称和分数不传递依赖姓名）\n表2: 课程名称，系别，系主任","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575992620,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2816162,"avatar":"","nickname":"Geek_bad8d7","note":"","ucode":"C3414C8A9D5580","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1033956,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/QD6bf8hkS5dHrabdW7M7Oo9An1Oo3QSxqoySJMDh7GTraxFRX77VZ2HZ13x3R4EVYddIGXicRRDAc7V9z5cLDlA/132","nickname":"爬行的蜗牛","note":"","ucode":"6623B62DE63CE9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532994,"discussion_content":"发表一下个人愚见，表1超键只有学号，其他都是非主属性，课程名称不依赖于学号，不满足2NF，且违反了3NF，因为这样子课程名称依赖于学号，分数又依赖与学号和课程名称造成了非主属性依赖传递；\n表2违反2NF，课程名称和系别都是超键，而非主属性，系主任只是依赖于系别，并不完全依赖于候选键","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637749047,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":78615,"ip_address":""},"score":532994,"extra":"{\"user_type\":1}"}]}]},{"had_liked":false,"id":122721,"user_name":"Monday","can_delete":false,"product_type":"c1","uid":1250907,"ip_address":"","ucode":"77B9BACC783598","user_header":"https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg","comment_is_top":false,"comment_ctime":1565504052,"is_pvip":false,"replies":[{"id":"63540","content":"正确","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577517359,"ip_address":"","comment_id":122721,"utype":1}],"discussion_count":4,"race_medal":0,"score":"143299424820","product_id":100029501,"comment_content":"1NF：列的原子性，不可拆分<br>2NF：针对于联合主键，非主属性完全依赖于联合主键，而非部分<br>3NF：非主属性只能直接依赖于主键","like_count":34,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462374,"discussion_content":"正确","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577517359,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3175551,"avatar":"","nickname":"张兴","note":"","ucode":"6BE80A3C026E36","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588647,"discussion_content":"一针见血地","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663927533,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"上海"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2962599,"avatar":"https://static001.geekbang.org/account/avatar/00/2d/34/a7/52c4ea60.jpg","nickname":"年少挽滑稽世无双","note":"","ucode":"793DCBDE25A07B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587326,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662977118,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"四川"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1033425,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c4/d1/209abdd6.jpg","nickname":"小狼","note":"","ucode":"FEAC7864FC1D20","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296748,"discussion_content":"经典总结","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596638176,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118456,"user_name":"X5N","can_delete":false,"product_type":"c1","uid":1229961,"ip_address":"","ucode":"FD4B9F375AABE5","user_header":"https://static001.geekbang.org/account/avatar/00/12/c4/89/9b5b2be0.jpg","comment_is_top":false,"comment_ctime":1564367830,"is_pvip":false,"replies":[{"id":"63619","content":"拆成4个表是OK的","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577525083,"ip_address":"","comment_id":118456,"utype":1}],"discussion_count":2,"race_medal":0,"score":"100348615638","product_id":100029501,"comment_content":"又思考了一下课后练习题，感觉可以把“学生选课表”拆分成4个表。<br>1.学生表：学号（主键），姓名，系别编号（外键）。<br>2.课程表：课程编号（主键），课程名称。<br>3.成绩表：学号，课程编号，分数（学号和课程编号，一起构成“联合主键”）。<br>4.院系表：系别编号（主键），系别（名称），系主任。","like_count":24,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460415,"discussion_content":"拆成4个表是OK的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577525083,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2089504,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/e2/20/c01bc5d3.jpg","nickname":"大会","note":"","ucode":"4C052BE39736C5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299259,"discussion_content":"为什么要把，学号，课程名称，分数，这三个字段分成2个表，这3个字段一个表也满足2NF和3NF?\n学号和课程名称是候选键，非主属性分数对于候选键既完全依赖，又不存在传递依赖","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597632923,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123530,"user_name":"未来的胡先森","can_delete":false,"product_type":"c1","uid":1234682,"ip_address":"","ucode":"AFF193AC0E2E6C","user_header":"https://static001.geekbang.org/account/avatar/00/12/d6/fa/1f5bf642.jpg","comment_is_top":false,"comment_ctime":1565694523,"is_pvip":false,"replies":[{"id":"63794","content":"总结的不错 Good Job","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577542089,"ip_address":"","comment_id":123530,"utype":1}],"discussion_count":1,"race_medal":0,"score":"65990203963","product_id":100029501,"comment_content":"我所理解的第二范式和第三范式的不同：<br><br>1、首先第三范式是第二范式的更进一步（要求更严格），要想满足第三范式首先要满足第二范式。<br><br>2、而什么情况下能够满足第二范式呢？候选码能确定一条记录的所有信息。以老师文中的例子来对照：知道球员的编号是可以知道球员信息的，但是比赛编号、比赛时间是无法来通过球员信息来确定的。这张表需要两个候选码（球员编号、比赛编号）才能确定一条记录的信息。类似于这样的关系我们称为「部分依赖」,消除后才能算「第二范式」。<br><br>3、第三范式的核心 —— 消除传递依赖。老师文中的图已经画的很清晰了，A-&gt;B,B-&gt;C,A-&gt;C，类似于这样依靠中间人串起的关系我们称之为「传递依赖」<br><br>学生选课表我的修改：<br><br>学生信息表：学号、姓名、系别编号<br><br>课程信息表：课程编号、课程名称<br><br>课程成绩表：学号、课程编号、分数<br><br>系别信息表：系别编号、系别名称、系主任","like_count":16,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462712,"discussion_content":"总结的不错 Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577542089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121248,"user_name":"发条","can_delete":false,"product_type":"c1","uid":1084458,"ip_address":"","ucode":"75853E7B13D8D4","user_header":"https://static001.geekbang.org/account/avatar/00/10/8c/2a/49e0547d.jpg","comment_is_top":false,"comment_ctime":1565084757,"is_pvip":false,"replies":[{"id":"63578","content":"多谢分享","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577518911,"ip_address":"","comment_id":121248,"utype":1}],"discussion_count":1,"race_medal":0,"score":"61694626901","product_id":100029501,"comment_content":"对于理解1-3NF，CSDN的这篇文章作为辅助阅读挺好的：https:&#47;&#47;blog.csdn.net&#47;wyh7280&#47;article&#47;details&#47;83350722","like_count":15,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461703,"discussion_content":"多谢分享","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577518911,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118364,"user_name":"Cue","can_delete":false,"product_type":"c1","uid":1516991,"ip_address":"","ucode":"A5CB460B54FDB0","user_header":"https://static001.geekbang.org/account/avatar/00/17/25/bf/1e9c853f.jpg","comment_is_top":false,"comment_ctime":1564334254,"is_pvip":false,"replies":[{"id":"47095","content":"哈哈 你也可以起一个叫做 完美范式","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1566630458,"ip_address":"","comment_id":118364,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35924072622","product_id":100029501,"comment_content":"第四范式这家公司起名来源难不成是和这个第四范式有关😄","like_count":9,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460377,"discussion_content":"哈哈 你也可以起一个叫做 完美范式","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566630458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119033,"user_name":"野马","can_delete":false,"product_type":"c1","uid":1065176,"ip_address":"","ucode":"CC58CBF541D34A","user_header":"https://static001.geekbang.org/account/avatar/00/10/40/d8/69722032.jpg","comment_is_top":false,"comment_ctime":1564491167,"is_pvip":false,"replies":[{"id":"63615","content":"范式这块确实名词有些多","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577524630,"ip_address":"","comment_id":119033,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23039327647","product_id":100029501,"comment_content":"对于非计算机专业人来说，名词太多了，已经被这些名词吓到了，希望老师用大白话讲解每一个知识点，让三岁小孩儿或者八十岁老太太都能听懂的讲解方式讲解，谢谢！","like_count":6,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460718,"discussion_content":"范式这块确实名词有些多","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577524630,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120322,"user_name":"law","can_delete":false,"product_type":"c1","uid":1037514,"ip_address":"","ucode":"3B664E2667ED63","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d4/ca/bdb348db.jpg","comment_is_top":false,"comment_ctime":1564830267,"is_pvip":false,"replies":[{"id":"63595","content":"多谢建议，找了一些共性的问题放到答疑篇中了","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577520198,"ip_address":"","comment_id":120322,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18744699451","product_id":100029501,"comment_content":"建议课后习题，老师给出标准答案，或者对一些答案进行点评。","like_count":5,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461286,"discussion_content":"多谢建议，找了一些共性的问题放到答疑篇中了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577520198,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118962,"user_name":"cricket1981","can_delete":false,"product_type":"c1","uid":1001715,"ip_address":"","ucode":"758262F5958DA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/f3/f1034ffd.jpg","comment_is_top":false,"comment_ctime":1564475060,"is_pvip":false,"replies":[{"id":"63605","content":"正确","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577520751,"ip_address":"","comment_id":118962,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18744344244","product_id":100029501,"comment_content":"1. 学生表：学号、姓名、系别<br>2. 课程表：课程名称<br>3. 系别表：系别、系主任<br>4. 成绩表：学号、课程名称、分数","like_count":5,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460689,"discussion_content":"正确","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577520751,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1322427,"avatar":"https://static001.geekbang.org/account/avatar/00/14/2d/bb/3da9ebd2.jpg","nickname":"xuqnqn","note":"","ucode":"5A6D8472CD3AE4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":22589,"discussion_content":"课程名称，系别作为主键，建主键索引时，是不是会占用较多的空间？如果给他们加个自增编号，怎么样？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569656760,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118547,"user_name":"Ronnyz","can_delete":false,"product_type":"c1","uid":1488280,"ip_address":"","ucode":"9F34527B1D343D","user_header":"https://static001.geekbang.org/account/avatar/00/16/b5/98/ffaf2aca.jpg","comment_is_top":false,"comment_ctime":1564385327,"is_pvip":false,"replies":[{"id":"63617","content":"Good Job 整理的不错","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577524725,"ip_address":"","comment_id":118547,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18744254511","product_id":100029501,"comment_content":"作业：<br>3NF区别于2NF是在于：字段非主属性不直接依赖主属性，而是通过依赖于其他非主属性而传递到主属性，解决办法就是让依赖非主属性的字段与依赖字段独立成表<br><br>拆分1<br>学生选课表，包含的属性有学号、姓名、课程名称、分数、系别和系主任<br>- 姓名和系别都是依赖于学号<br>- 系主任依赖系别<br>- 系主任间接依赖学号<br>院系表：系别（主键） 系主任<br>学生表：学号 姓名 课程名称 分数 系别 <br>拆分2<br>学生表，包含的属性有学号 姓名 课程名称 分数 系别 <br>选课那就会有课程表<br>- 课程名称依赖于学号<br>- 分数依赖于课程名称和学号<br>学生表：学号（主键） 姓名 系别（外键）<br>课程表：课程名称 学号 分数 \t&#47;&#47;主键（课程名称，学号）","like_count":5,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460448,"discussion_content":"Good Job 整理的不错","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577524725,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":189472,"user_name":"刘凯","can_delete":false,"product_type":"c1","uid":1350608,"ip_address":"","ucode":"EFDC932CAE61A6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9b/d0/86aee34c.jpg","comment_is_top":false,"comment_ctime":1584520157,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10174454749","product_id":100029501,"comment_content":"范式本来挺明白，被名词搞晕了。","like_count":3},{"had_liked":false,"id":119996,"user_name":"grey927","can_delete":false,"product_type":"c1","uid":1202782,"ip_address":"","ucode":"833E02ED835B4A","user_header":"https://static001.geekbang.org/account/avatar/00/12/5a/5e/a897cb0d.jpg","comment_is_top":false,"comment_ctime":1564748263,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10154682855","product_id":100029501,"comment_content":"1.学号，姓名，系别<br>2.学号，分数，课程名称<br>3.系别，系主任","like_count":3},{"had_liked":false,"id":118964,"user_name":"cricket1981","can_delete":false,"product_type":"c1","uid":1001715,"ip_address":"","ucode":"758262F5958DA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/f3/f1034ffd.jpg","comment_is_top":false,"comment_ctime":1564475124,"is_pvip":false,"replies":[{"id":"63614","content":"BCNF是修正的第三范式","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577524608,"ip_address":"","comment_id":118964,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10154409716","product_id":100029501,"comment_content":"为什么不把BCNF称为第4范式？难道BCNF是后来发现的？","like_count":3,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460690,"discussion_content":"BCNF是修正的第三范式","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577524608,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224905,"user_name":"叮叮叮","can_delete":false,"product_type":"c1","uid":1914201,"ip_address":"","ucode":"956C42489F25DB","user_header":"https://static001.geekbang.org/account/avatar/00/1d/35/59/3a7219de.jpg","comment_is_top":false,"comment_ctime":1591587419,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5886554715","product_id":100029501,"comment_content":"候选键：（学号，课程名称）。姓名、系别和系主任部份依赖于学号，不满足2NF。为满足2NF需要拆成两个表：<br>1：学号、姓名、系别、系主任 ；<br>2：学号、课程名称、分数。<br>此时在表1中，学号-&gt;系别，系别-&gt;系主任，非主属性系主任传递依赖于候选键学号，不满足3NF，因此表1可拆成两个表：<br>1：学号、姓名、系别；<br>2、系别，系主任。","like_count":1},{"had_liked":false,"id":208369,"user_name":"ClaireToffler","can_delete":false,"product_type":"c1","uid":1738030,"ip_address":"","ucode":"0C537F129F4EAF","user_header":"https://static001.geekbang.org/account/avatar/00/1a/85/2e/92c506ce.jpg","comment_is_top":false,"comment_ctime":1587345851,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5882313147","product_id":100029501,"comment_content":"表示对候选键没有明白<br>","like_count":1,"discussions":[{"author":{"id":2260390,"avatar":"https://static001.geekbang.org/account/avatar/00/22/7d/a6/15798bf2.jpg","nickname":"温雅小公子","note":"","ucode":"9EA63E36D7C85C","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":562552,"discussion_content":"当超码集合中没有冗余的属性时，即从超码集合中删除一个属性，不影响它标识全部元素的能力，它就是候选键。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1649850478,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":175138,"user_name":"GeekGray","can_delete":false,"product_type":"c1","uid":1541535,"ip_address":"","ucode":"E8D2279AFF21EB","user_header":"https://static001.geekbang.org/account/avatar/00/17/85/9f/c8cc01e9.jpg","comment_is_top":false,"comment_ctime":1580568186,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5875535482","product_id":100029501,"comment_content":"2NF存在非主属性对主码的传递函数依赖，3NF则是在2NF的基础上消除该函数依赖。根据范式规范化原则，3NF规范化必须保持函数依赖且具有无损连接性，所以模式分解后还要验证是否满足原则！","like_count":1},{"had_liked":false,"id":166517,"user_name":"丁丁历险记","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1577462536,"is_pvip":false,"replies":[{"id":"63861","content":"对的","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577594095,"ip_address":"","comment_id":166517,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5872429832","product_id":100029501,"comment_content":"反范式是典型的时间换空间套路，方便已不同纬度去统计","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479524,"discussion_content":"对的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577594095,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1554764,"avatar":"https://static001.geekbang.org/account/avatar/00/17/b9/4c/8c9edc85.jpg","nickname":"小庞","note":"","ucode":"7C8367CDB47163","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296453,"discussion_content":"空间换时间吧，你是不说反了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596546142,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164485,"user_name":"旅途","can_delete":false,"product_type":"c1","uid":1212902,"ip_address":"","ucode":"5022477E8E9441","user_header":"https://static001.geekbang.org/account/avatar/00/12/81/e6/6cafed37.jpg","comment_is_top":false,"comment_ctime":1577005311,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5871972607","product_id":100029501,"comment_content":"有两个问题没懂  麻烦老师解答下  。<br>1. 文中  所谓完全依赖不同于部分依赖，也就是不能仅依赖候选键的一部分属性，而必须依赖全部属性。<br>候选键的属性 为什么还有 一部分或者全部 ？不就是一个属性吗？<br>2. 如果按1说的  全部依赖了 那么还会有出现3NF的间接依赖吗 间接依赖还算是全部依赖吗？<br><br><br>","like_count":1},{"had_liked":false,"id":141247,"user_name":"Henry","can_delete":false,"product_type":"c1","uid":1003515,"ip_address":"","ucode":"54AFE9C99B31B4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4f/fb/10366b97.jpg","comment_is_top":false,"comment_ctime":1571132017,"is_pvip":true,"replies":[{"id":"59773","content":"哈哈 是稍微有些复杂，慢慢来","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1574741539,"ip_address":"","comment_id":141247,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5866099313","product_id":100029501,"comment_content":"感觉这一篇讲的有点复杂了，读起来有点拗口。","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470701,"discussion_content":"哈哈 是稍微有些复杂，慢慢来","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574741539,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119969,"user_name":"吃饭饭","can_delete":false,"product_type":"c1","uid":1231549,"ip_address":"","ucode":"95CFA07CDA2957","user_header":"https://static001.geekbang.org/account/avatar/00/12/ca/bd/a51ae4b2.jpg","comment_is_top":false,"comment_ctime":1564740972,"is_pvip":false,"replies":[{"id":"63596","content":"对的","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577520344,"ip_address":"","comment_id":119969,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5859708268","product_id":100029501,"comment_content":"区分 2NF 和 3NF 的关键点在于 <br>2NF：非主键列是否完全依赖于主键，还是依赖于主键的一部分；<br>3NF：非主键列是直接依赖于主键，还是直接依赖于非主键列","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461154,"discussion_content":"对的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577520344,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118466,"user_name":"humor","can_delete":false,"product_type":"c1","uid":1181867,"ip_address":"","ucode":"9B48C4C7BEC92C","user_header":"https://static001.geekbang.org/account/avatar/00/12/08/ab/caec7bca.jpg","comment_is_top":false,"comment_ctime":1564370424,"is_pvip":false,"replies":[{"id":"63618","content":"评论中的Bayern同学解释的很好，可以看下","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577525056,"ip_address":"","comment_id":118466,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5859337720","product_id":100029501,"comment_content":"“元组”和“多余的属性”这两个词可以再具体解释一下吗？感觉不是很理解","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460420,"discussion_content":"评论中的Bayern同学解释的很好，可以看下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577525056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1388352,"avatar":"https://static001.geekbang.org/account/avatar/00/15/2f/40/e1cda072.jpg","nickname":"Bayern","note":"","ucode":"CA406A7E396352","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":20511,"discussion_content":"1.元组就是数据表中的每行(也就是每条记录)\n2.多余的属性我是这么理解的:以球员表为例，\n身份证号+姓名可以标识唯一的元组(超键)\n身份证号也可以标识唯一的元组，但是姓名标识不了唯一的元组，这里姓名就是多余的属性，身份证号就是候选键\n如果理解的不对，还请大神们指点，感激不尽","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1569324004,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118448,"user_name":"X5N","can_delete":false,"product_type":"c1","uid":1229961,"ip_address":"","ucode":"FD4B9F375AABE5","user_header":"https://static001.geekbang.org/account/avatar/00/12/c4/89/9b5b2be0.jpg","comment_is_top":false,"comment_ctime":1564366360,"is_pvip":false,"replies":[{"id":"63620","content":"哈哈 客气啦 加油XIAOXIN同学","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577525118,"ip_address":"","comment_id":118448,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5859333656","product_id":100029501,"comment_content":"太好了！我还以为这门课不会讲到“三范式”呢，希望老师在课程中多讲些与“数据库设计”，“表设计”…相关的内容。感谢！<br>……………………<br>关于课后练习题，是否可以把“学生选课表”拆分成3个表。<br>1.学生表：学号（主键），姓名，系别（外键）。<br>2.成绩表：课程名称，学号，分数（课程名称和学号，一起构成联合主键）。<br>3.院系表：系别（主键），系主任。<br>这样似乎就符合3NF的要求了。","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460413,"discussion_content":"哈哈 客气啦 加油XIAOXIN同学","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577525118,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118441,"user_name":"JustDoDT","can_delete":false,"product_type":"c1","uid":1127175,"ip_address":"","ucode":"6AF0B80F00EAEF","user_header":"https://static001.geekbang.org/account/avatar/00/11/33/07/8f351609.jpg","comment_is_top":false,"comment_ctime":1564365601,"is_pvip":false,"replies":[{"id":"47677","content":"慢慢来","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1566902242,"ip_address":"","comment_id":118441,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5859332897","product_id":100029501,"comment_content":"搞不懂：主属性，非主属性。<br>第一次接触，慢慢消化吧。","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460411,"discussion_content":"慢慢来","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566902242,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327760,"user_name":"黄伟洪","can_delete":false,"product_type":"c1","uid":1369165,"ip_address":"","ucode":"97331040A49EAD","user_header":"https://static001.geekbang.org/account/avatar/00/14/e4/4d/c7b5f20a.jpg","comment_is_top":false,"comment_ctime":1640271870,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640271870","product_id":100029501,"comment_content":"这是理想化。球员编号和球员本身不是永恒不变，球队球员教练也不是永远不变。。。当发生变化后，如何适用。。。很多时候需要衡量如何反范式。","like_count":0},{"had_liked":false,"id":323170,"user_name":"Geek_bad8d7","can_delete":false,"product_type":"c1","uid":2816162,"ip_address":"","ucode":"C3414C8A9D5580","user_header":"","comment_is_top":false,"comment_ctime":1637748393,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637748393","product_id":100029501,"comment_content":"系部表：系别（主键），系主任<br>课程表：课程名称（主键），分数<br>学生选课表：学号（主键），姓名，系别（外键），课程名称（外键）<br>我觉得应该是这样子","like_count":0},{"had_liked":false,"id":319390,"user_name":"越锋利","can_delete":false,"product_type":"c1","uid":2815900,"ip_address":"","ucode":"63E9E3F3C7D53D","user_header":"https://static001.geekbang.org/account/avatar/00/2a/f7/9c/69c5c5dc.jpg","comment_is_top":false,"comment_ctime":1635771200,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635771200","product_id":100029501,"comment_content":"看了开头的包含关系，我还在想为啥符合 3NF 的一定会符合 2NF，我心说 2NF 只有在联合候选键的情况下才能违反呀……后来去看了下 3NF 的定义第一句话就是：在符合 2NF 的前提下……","like_count":0},{"had_liked":false,"id":317907,"user_name":"wsxzei","can_delete":false,"product_type":"c1","uid":2766280,"ip_address":"","ucode":"8527ED444BFC73","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/JHzZynEKL2CibTaxCZV3XOs1bJJFqbmwhmibd4U5njlaNVWPrbre1Qha2XUx1dcQ99iaYFl13PyjlYQ0rcl9N5vEg/132","comment_is_top":false,"comment_ctime":1635046462,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635046462","product_id":100029501,"comment_content":"系主任通过系别传递依赖于学号&#47;姓名，分数通过课程名称传递依赖于学号&#47;姓名，违反了3NF原则<br><br>学生信息表包含：学号，姓名，系名称<br><br>学校院系表包含：系名称、系主任<br><br>课程成绩表包含：学号、课程名称、分数（主键为学号+课程名称，分数完全依赖于联合主键）","like_count":0},{"had_liked":false,"id":313224,"user_name":"JiaLong","can_delete":false,"product_type":"c1","uid":2084728,"ip_address":"","ucode":"608B611F02A846","user_header":"https://static001.geekbang.org/account/avatar/00/1f/cf/78/72c1545a.jpg","comment_is_top":false,"comment_ctime":1632317108,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632317108","product_id":100029501,"comment_content":"本来挺明白，却被候选键搞懵了。","like_count":0},{"had_liked":false,"id":303268,"user_name":"宋海天","can_delete":false,"product_type":"c1","uid":1186836,"ip_address":"","ucode":"4DA51C0B30A77F","user_header":"https://static001.geekbang.org/account/avatar/00/12/1c/14/bc00c755.jpg","comment_is_top":false,"comment_ctime":1626693041,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1626693041","product_id":100029501,"comment_content":"违反了3NF会有什么后果？","like_count":0},{"had_liked":false,"id":299521,"user_name":"醉风","can_delete":false,"product_type":"c1","uid":1541095,"ip_address":"","ucode":"3A70CBF9B768DD","user_header":"https://static001.geekbang.org/account/avatar/00/17/83/e7/81478c84.jpg","comment_is_top":false,"comment_ctime":1624693428,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624693428","product_id":100029501,"comment_content":"r1{(学号，系号，姓名)，学员，系号-&gt;姓名}<br>r2{(学号，系号，课程，成绩)，学号，系号，课程-&gt;成绩}<br>r3{(系号，系主任),系号-&gt;系主任}","like_count":0},{"had_liked":false,"id":299520,"user_name":"醉风","can_delete":false,"product_type":"c1","uid":1541095,"ip_address":"","ucode":"3A70CBF9B768DD","user_header":"https://static001.geekbang.org/account/avatar/00/17/83/e7/81478c84.jpg","comment_is_top":false,"comment_ctime":1624693055,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624693055","product_id":100029501,"comment_content":"r1{(学号,姓名)，学号-&gt;姓名}","like_count":0},{"had_liked":false,"id":262992,"user_name":"胡皓","can_delete":false,"product_type":"c1","uid":1965051,"ip_address":"","ucode":"ECF5C14420899E","user_header":"https://static001.geekbang.org/account/avatar/00/1d/fb/fb/6db8d51e.jpg","comment_is_top":false,"comment_ctime":1605936056,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605936056","product_id":100029501,"comment_content":"课后作业:<br>        从所有的属性来看，主要可以分为学生信息，课程信息和院系信息。所以，我会分成3个表:<br>        学生信息表:学号(主键)  姓名   系别(外键)<br>        课程信息表:学号(主键)  课程名称  分数<br>        院系信息表:系别(主键)  系主任","like_count":0},{"had_liked":false,"id":262990,"user_name":"胡皓","can_delete":false,"product_type":"c1","uid":1965051,"ip_address":"","ucode":"ECF5C14420899E","user_header":"https://static001.geekbang.org/account/avatar/00/1d/fb/fb/6db8d51e.jpg","comment_is_top":false,"comment_ctime":1605935286,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605935286","product_id":100029501,"comment_content":"当候选键只包含一个属性时，一般会满足2NF，因为不存在部分依赖关系，而3NF问题是需要考虑的。那么，为了满足2nf，是不是在设计数据表时，尽量使候选键包含一个属性?","like_count":0},{"had_liked":false,"id":262989,"user_name":"胡皓","can_delete":false,"product_type":"c1","uid":1965051,"ip_address":"","ucode":"ECF5C14420899E","user_header":"https://static001.geekbang.org/account/avatar/00/1d/fb/fb/6db8d51e.jpg","comment_is_top":false,"comment_ctime":1605934957,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605934957","product_id":100029501,"comment_content":"对3NF的理解:<br>     1NF:数据表的属性不能再拆分。<br>     2NF:非主属性和数据表里的候选键有完全依赖关系<br>     3NF:非主属性和候选键之间不存在传递依赖关系<br>1NF大部分数据表都会满足，我从另一个视角来看下2NF和3NF。在2NF和3NF中都涉及到了候选键，候选键包含能唯一标识元组的属性，标识能让我们找到对象的所有属性。2NF要求，只能根据候选键作为整体标识来确定对象的其他属性，而3NF要求所有其他属性只能根据候选键来直接查找，不能存在传递查找。","like_count":0},{"had_liked":false,"id":251513,"user_name":"草鱼禾","can_delete":false,"product_type":"c1","uid":2184778,"ip_address":"","ucode":"06865069745DBF","user_header":"https://static001.geekbang.org/account/avatar/00/21/56/4a/6e3e0bbd.jpg","comment_is_top":false,"comment_ctime":1601634900,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1601634900","product_id":100029501,"comment_content":"第一范式（1NF）：把在一张表中存储所有字段，原子性不可分离。<br>第二范式（2NF）：一张表非主属性只能完全历来表中的主键或候选键。<br>第三范式（3NF）：一张表中非主属性只能完全依赖于候选键或主键，不能间接依赖。比如C属性依赖于B属性，而B属性也可以依赖于A属性。这边应该分为两张表，B、C所在的表，A、B所在的表。","like_count":0},{"had_liked":false,"id":242390,"user_name":"大会","can_delete":false,"product_type":"c1","uid":2089504,"ip_address":"","ucode":"4C052BE39736C5","user_header":"https://static001.geekbang.org/account/avatar/00/1f/e2/20/c01bc5d3.jpg","comment_is_top":false,"comment_ctime":1597710996,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597710996","product_id":100029501,"comment_content":"有个疑问，请老师有时间回复下哈。<br>学号，课程名称，分数这3个字段可以组成一个表吗？感觉这样也符合3NF约束，学号和课程名称作为候选键，分数是非主属性，没有非主属性对于候选键的部分依赖，也不存在非主属性对候选键的传递依赖。<br>看留言里老师回复的，把课程号和课程名称组成课程表，学号，课程号，分数组成另外一个表，这样是对的？那直接学号，课程名称，分数组成一个表不对吗？","like_count":0},{"had_liked":false,"id":240188,"user_name":"LIKE","can_delete":false,"product_type":"c1","uid":1254252,"ip_address":"","ucode":"9DAB7F9051648A","user_header":"https://static001.geekbang.org/account/avatar/00/13/23/6c/82ba5e1f.jpg","comment_is_top":false,"comment_ctime":1596782386,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596782386","product_id":100029501,"comment_content":"学生表：学号、姓名<br>成绩表：学号、课程名称、分数<br>课程表：课程名称、系别、系主任","like_count":0},{"had_liked":false,"id":230262,"user_name":"宁悦","can_delete":false,"product_type":"c1","uid":1901403,"ip_address":"","ucode":"68844C314FEEF8","user_header":"https://static001.geekbang.org/account/avatar/00/1d/03/5b/3cdbc9fa.jpg","comment_is_top":false,"comment_ctime":1593330020,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593330020","product_id":100029501,"comment_content":"应该分为三张表：<br>学生表：学号，姓名，系别<br>选课表：学号，课程名，分数<br>主任表：系别，系主任","like_count":0},{"had_liked":false,"id":209985,"user_name":"Black","can_delete":false,"product_type":"c1","uid":1620774,"ip_address":"","ucode":"170977A014997C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/iarwibic7h11K05YSJ9G6JERWqudL1ATGm0bib5pSCsP97rpSwuxLoDvp40RMsywibVH2g5DLphQGM51denSxx6hLZg/132","comment_is_top":false,"comment_ctime":1587646353,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587646353","product_id":100029501,"comment_content":"学生选课表，包含的属性有学号、姓名、课程名称、分数、系别和系主任，如果要改成符合 3NF 要求的设计，需要怎么修改呢？<br>3NF的前提是符合2NF，候选键和主键应该是（学号，课程名称）但是存在其他对应关系：<br><br>（学号）-（姓名）<br><br>（课程名称）-（系别，系主任）<br><br>设计为三个表以符合第二范式：<br><br>学生表：学号，姓名<br><br>分数表：学号，课程名称，分数<br><br>系别表：课程名称，系别，系主任<br><br>系别表不符合3NF，存在传递依赖，划分两个表以符合第三范式：<br><br>课系表：课程名称，系别<br><br>主任表：系别，系主任<br><br>范式越多表也越多，如果我自己实际情况设计表的话，可能不会选择符合第三范式，容纳传递依赖查询效率明显会更好。<br>","like_count":0},{"had_liked":false,"id":207926,"user_name":"傻傻的帅","can_delete":false,"product_type":"c1","uid":1668617,"ip_address":"","ucode":"14A795523A682E","user_header":"https://static001.geekbang.org/account/avatar/00/19/76/09/62a10668.jpg","comment_is_top":false,"comment_ctime":1587217730,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587217730","product_id":100029501,"comment_content":"学生表(学号，姓名，院系ID) 主键：学号，外键：院系ID<br>院系表(院系ID,系别，系主任)  主键:院系ID<br>课程表(课程ID，课程名称)  主键：课程ID<br>成绩表(学号，课程ID，分数)  主键：学号，课程ID","like_count":0},{"had_liked":false,"id":196624,"user_name":"track6688","can_delete":false,"product_type":"c1","uid":1088040,"ip_address":"","ucode":"0A9E893F8FD379","user_header":"https://static001.geekbang.org/account/avatar/00/10/9a/28/03613c22.jpg","comment_is_top":false,"comment_ctime":1585297950,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585297950","product_id":100029501,"comment_content":"学生表---》学号、姓名、系别<br>系别表---》系别、系主任<br>课程分数表---》学号、课程名称、分数","like_count":0},{"had_liked":false,"id":195946,"user_name":"Cookie123456","can_delete":false,"product_type":"c1","uid":1913261,"ip_address":"","ucode":"F9EF63C38F8976","user_header":"","comment_is_top":false,"comment_ctime":1585225369,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585225369","product_id":100029501,"comment_content":"https:&#47;&#47;blog.csdn.net&#47;fjxcsdn&#47;article&#47;details&#47;76549751<br><br>这是我当初写的博客，现在看来，还是老师讲的好<br>","like_count":0},{"had_liked":false,"id":164271,"user_name":"王加武","can_delete":false,"product_type":"c1","uid":1665471,"ip_address":"","ucode":"DDCFE578C6C428","user_header":"https://static001.geekbang.org/account/avatar/00/19/69/bf/50a824a4.jpg","comment_is_top":false,"comment_ctime":1576920398,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576920398","product_id":100029501,"comment_content":"经过一番分析，得出以下的判断<br><br>1、学生的学号决定了系别（普遍情况），系别的又决定了系主任，所以不满足第三范式<br>解决方式：将系单独设为一个表，包括（系别，系主任）<br> <br>2、学生还因为选课所以才和课程有了关系，所以选课其实是学生和课程共同产生的一个关系，也就是说，本来选课是不存在的！<br> 解决方式：所以选课又是一张表（学号，课程号，分数）主键是学号和课程号（复合主键）<br><br>最终的结果：<br>学生表(学号，姓名)     主键：学号<br><br>课程表(课程号,课程名)  主键：课程号<br><br>选课表（学号，课程号，分数）  主键：学号，课程号<br><br>系表（系编号，系别，系主任） 主键：系编号<br><br>表述可能略有不足，能力有限，还请多多包涵，多多指正！<br><br>","like_count":0},{"had_liked":false,"id":160643,"user_name":"爬行的蜗牛","can_delete":false,"product_type":"c1","uid":1033956,"ip_address":"","ucode":"6623B62DE63CE9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/QD6bf8hkS5dHrabdW7M7Oo9An1Oo3QSxqoySJMDh7GTraxFRX77VZ2HZ13x3R4EVYddIGXicRRDAc7V9z5cLDlA/132","comment_is_top":false,"comment_ctime":1575992637,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575992637","product_id":100029501,"comment_content":"表1: 学号， 姓名，课程名称， 分数  ： 满足2NF ， 学号或则姓名作为候选键与非主属性（课程和分数）拥有安全依赖关系； 满足3NF ， 非主属性（课程名称和分数不传递依赖姓名）<br>表2: 课程名称，系别，系主任","like_count":0},{"had_liked":false,"id":145112,"user_name":"小唐","can_delete":false,"product_type":"c1","uid":1018986,"ip_address":"","ucode":"B2A471AAF109E6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/6a/ec181c50.jpg","comment_is_top":false,"comment_ctime":1572215577,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1572215577","product_id":100029501,"comment_content":"有的NoSQL最多只允许有两个key做primary key，但是业务要求三个才能保证unique，这时候把两个key用“-”连起来当成一个key是不是就违反了1NF？比如学号StudentId，课程courseId和小测testId，三个才能决定分数，那我把（学号， courseId + “-” + testId)当候选键，是不是就违反了1NF？","like_count":0},{"had_liked":false,"id":142790,"user_name":"爱思考的仙人球","can_delete":false,"product_type":"c1","uid":1576177,"ip_address":"","ucode":"77E31190A5B5AF","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/ic8KF0sfxicsx4F25HZrtZwP2fQEibicfibFeYIQBibxnVlHIiaqkfictJuvLCKia0p7liaQvbTzCYWLibjJK6B8kc8e194ng/132","comment_is_top":false,"comment_ctime":1571533274,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571533274","product_id":100029501,"comment_content":"第三范式可以这样理解吗？假设表1有学号，姓名，分数等字段；然后修改表设计，增加了id和科目字段，结果id成了主键，但是姓名和分数还依赖于学号?","like_count":0},{"had_liked":false,"id":133898,"user_name":"莎吧啦","can_delete":false,"product_type":"c1","uid":1309902,"ip_address":"","ucode":"EB92B0027FDEC7","user_header":"https://static001.geekbang.org/account/avatar/00/13/fc/ce/e2e228bd.jpg","comment_is_top":false,"comment_ctime":1568692137,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568692137","product_id":100029501,"comment_content":"学生表：学号（主键），姓名，课程ID，系ID。<br>课程表：课程ID，课程名称。<br>学院表：系ID，系别，系主任。","like_count":0},{"had_liked":false,"id":132086,"user_name":"森鱼","can_delete":false,"product_type":"c1","uid":1638587,"ip_address":"","ucode":"6AF86EB05088F4","user_header":"https://static001.geekbang.org/account/avatar/00/19/00/bb/25a29311.jpg","comment_is_top":false,"comment_ctime":1568021367,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568021367","product_id":100029501,"comment_content":"依赖关系，我感觉很难看出来，有什么诀窍吗？","like_count":0},{"had_liked":false,"id":118748,"user_name":"林彦","can_delete":false,"product_type":"c1","uid":1032615,"ip_address":"","ucode":"5094CC6ED7B40C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c1/a7/5e66d331.jpg","comment_is_top":false,"comment_ctime":1564444999,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564444999","product_id":100029501,"comment_content":"学生表 - 属性：学号，姓名，系别(学生的系别不是这个问题必须的，可以省略)。主键：学号；<br>系别表 - 属性：系别，系主任。主键：系别；<br>课程表 - 属性：课程名称，系别。主键：课程名称或系别+课程名称（主键根据课程名称的唯一性决定，我们学校在同一学年印象里没有相同的课程名称。问题中没有出现课程号属性）；<br>选课或分数表 - 属性：学号，课程名称，分数。主键：学号+课程名称。","like_count":0},{"had_liked":false,"id":118464,"user_name":"许童童","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1564370277,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564370277","product_id":100029501,"comment_content":"学生选课表只需要三个字段： 学号 课程名称 分数<br>其余的都可以通过关联查询来获取，满足3NF","like_count":0},{"had_liked":false,"id":118454,"user_name":"ack","can_delete":false,"product_type":"c1","uid":1440912,"ip_address":"","ucode":"69CA1233EEA8E2","user_header":"https://static001.geekbang.org/account/avatar/00/15/fc/90/c9df0459.jpg","comment_is_top":false,"comment_ctime":1564367528,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564367528","product_id":100029501,"comment_content":"更正：<br>Student(学号,姓名,系别)<br>Course(课程号，课程名称)<br>SC(学号,课程号,分数)<br>Sdept(系别,系主任)","like_count":0},{"had_liked":false,"id":118453,"user_name":"ack","can_delete":false,"product_type":"c1","uid":1440912,"ip_address":"","ucode":"69CA1233EEA8E2","user_header":"https://static001.geekbang.org/account/avatar/00/15/fc/90/c9df0459.jpg","comment_is_top":false,"comment_ctime":1564367088,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564367088","product_id":100029501,"comment_content":"Student(学号,姓名,系别)<br>Course(课程名称,分数)<br>Sdept(系别,系主任)","like_count":0},{"had_liked":false,"id":118451,"user_name":"hlz-123","can_delete":false,"product_type":"c1","uid":1433586,"ip_address":"","ucode":"B7E5EF0C260BD2","user_header":"","comment_is_top":false,"comment_ctime":1564366692,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1564366692","product_id":100029501,"comment_content":"1、2NF 和 3NF的区别<br>    简单来说，2NF中，非主属性，必须完全依赖于主键（候选键）<br>                     3NF中，更进一步，非主属性必须直接完全依赖于主键（候选键），不能间接依赖<br>                     拿现实生活中举例来说，你的亲属关系（包含直系、非直系）就是2NF，<br>                     你的直系亲属关系就是3NF。<br>2、学生选课表，在不增加属性（字段）情况下，设计表格如下：<br>      学生表，字段：学号，姓名，系别；主键是学号<br>      系别表，字段：系别，系主任；主键是系别<br>      课程表，字段，系别，课程名称；主键是系别+课程名称 （实际中，设计课程编号字段）<br>      分数表，字段，学号，系别，课程名称，分数；主键是学号+系别+课程名称","like_count":0,"discussions":[{"author":{"id":1101226,"avatar":"https://static001.geekbang.org/account/avatar/00/10/cd/aa/33d48789.jpg","nickname":"卫江","note":"","ucode":"DE2F7A6916F1A9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3537,"discussion_content":"分数表中，如果主键是学号+系别+课程名称，那么就违反了2NF,因为分数只需要学号+课程名字就可以确定，属于部分依赖","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564558743,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118434,"user_name":"JustDoDT","can_delete":false,"product_type":"c1","uid":1127175,"ip_address":"","ucode":"6AF0B80F00EAEF","user_header":"https://static001.geekbang.org/account/avatar/00/11/33/07/8f351609.jpg","comment_is_top":false,"comment_ctime":1564364855,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564364855","product_id":100029501,"comment_content":"学生表：学号（主键），姓名，系别（外键）<br>学院表：系别，系主任<br>课程得分分表：课程名称，（学生）学号，得分","like_count":0}]}