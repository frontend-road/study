{"id":100930,"title":"18 | 架构：需求分析 (下) · 实战案例","content":"<p>你好，我是七牛云许式伟。</p><p>今天，我们继续上一讲关于架构第一步 “需求分析” 的讨论。为了能够获得更加具体的观感，我们选了两个实战的案例，如下：</p><ul>\n<li>打造 “互联网”；</li>\n<li>存储新兵 “对象存储”。</li>\n</ul><h2>案例: 打造 “互联网”</h2><p>从对信息科技的影响面来说，最为标志性的两个事件，一个是计算机的诞生，另一个是互联网的诞生。</p><p>我们前面在 “<a href=\"https://time.geekbang.org/column/article/93130\">05 | 思考题解读: 如何实现可自我迭代的计算机？</a>”这一讲中，已经剖析过一个 MVP 版本的计算机是什么样的。</p><p>今天，我们就以 “互联网” 这个产品为题，看看应该怎么去做需求分析。</p><p>我们想象一下，把我们自己置身于互联网诞生之前。互联网并不是第一张网。在此之前的信息世界中，更多的是某个企业专用的局域网。不同的企业会选择不同公司所提供的网络方案。这些网络方案缺乏统一的规划，彼此并不兼容。</p><p>那么，怎么才能打造一个连接人与人、企业与企业，甚至是物与物，能够 “连接一切” 的 “互联网”？</p><p>首先，从根源需求来说，我们期望这不是某个巨头公司的网，也不是政府的网。这是需求的原点，这一点上的不同，产生的结果可能就很不一样。</p><p>如果我们忽略这一点，就有可能会把它做成微信网（WechatNet），或者中国网（ChinaNet）。它们可能会是一张巨大的网，但都不是 “互联网”。</p><!-- [[[read_end]]] --><p><strong>所谓 “互联网” 首先应该是一张开放的网。它应该可以让很多国家很多公司参与其中，形成合力。它不应该存在 “造物主”，一个可以在这张网络中主宰一切的人。</strong></p><p>开放，最基础的层次来说，意味着需要定义网络协议标准，尤其是跨网的数据交换标准。这里的跨网，指的是跨不同的网络设备，不同的网络运营商。</p><p>开放，从另一个角度来说，是对应用程序软件的开放。想要 “互联网” 真正能够连接一切，只是把物理的网络连接在一起是不够的，还要有能够丰富的 “连接一切” 的应用。</p><p>为了能够让更多应用可以更便捷地连接网络，我们需要提供方便应用接入的高层协议。这个协议需要屏蔽掉网络连接的复杂性（丢包重传等）。</p><p>但这还不够。“互联网” 这样的基础设施，启动阶段没有应用去吸引用户是不行的。所以我们需要 “吃自己的狗粮”，开发若干互联网应用的典型代表。</p><p>有一些需求可能非常非常重要，但是我们需要阶段性放弃，例如安全。加密传输并没有作为互联网的内建特性，这极大降低了互联网的实施难度。</p><p>从另一个角度考虑，为什么不把安全放在最底层，也要考虑方案的可持续性。一个安全方案是否能够长期有效，这非常存疑。</p><p>但是物理网络一旦存在，就很难做出改变（想想我们从 IPv4 过渡到 IPv6 需要多少年吧）。所以从这个角度来说，我们也不希望安全是一个网络的底层设施。</p><p>这并不意味着安全问题可以不解决，只是把这事儿留给了软件层，留给操作系统和应用程序。这是一个极其明智的选择。相比物理网络而言，软件层更加能够经受得起变更。</p><p><strong>总结来说，要想把 “互联网” 这个项目做成，需要考虑这样一些事情。</strong></p><ul>\n<li>一个能够连接所有既有网络的协议标准，我们不妨叫它互联网协议（Internet Protocol），简称 IP 协议。</li>\n<li>一张连接城市的骨干网络，至少有两个城市互联的试点。</li>\n<li>打通骨干网络和主流企业专用网络的路由器。</li>\n<li>一套方便应用开发的高阶网络协议，工作在 IP 协议之上。</li>\n<li>一份支撑互联网应用程序的基础网络协议栈源代码或包（package），方便主流操作系统厂商、网络设备厂商集成。</li>\n<li>若干典型互联网应用，如电子邮件（Email）、万维网（WWW）等。</li>\n<li>一份安全传输的网络协议方案（远期），及其源代码或包（package）。</li>\n</ul><p>让我们先来看下物理网络的构建。</p><p>首先，构建骨干网络。不同城市可以由若干个骨干网路由器相连。骨干路由器可以看做是由一个负责路由算法的计算机，和若干网络端口构成，如下图所示。</p><p><img src=\"https://static001.geekbang.org/resource/image/41/bb/41355201ff809e671b599ddd7a43aabb.png?wh=1920*1711\" alt=\"\"></p><p>每个端口可能和其他城市相连，也可能和该城市内的某些大型局域网相连。一个局域网和城际网络从抽象视角看，没有非常本质的不同，只不过是采用的网络技术有异，使用的网络协议有异。</p><p>一个局域网可以简化理解为由若干台交换机连接所有的计算机设备。而交换机同样也可以看做是由一个负责路由算法的计算机，和若干网络端口构成，如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/1f/d0/1f778f97797e6b94f806fb6a3daaedd0.png?wh=1920*1711\" alt=\"\"></p><p>剩下的问题是怎么对接骨干网络和局域网。这需要有人负责进行网络协议转换，它就是路由器。一台路由器上有两类端口，一类端口为本地端口，连接局域网内的设备，比如交换机，或者直接连普通的计算机。另一类端口为远程端口，负责接入互联网。</p><p><img src=\"https://static001.geekbang.org/resource/image/53/b2/53211a8ff21d73d403a3b4dbd97cd5b2.png?wh=1920*1453\" alt=\"\"></p><p>理清楚了物理网络后，我们再来看应用构建。我们打算打造两个杀手级应用（Killer Application）：电子邮件（Email）和万维网（WWW）。</p><p>在考虑应用的用户交互体验时，我们发现，物理网络能够处理的 IP 地址，和人类方便记忆的地址非常不同，故而我们决定引入域名（domain）作为人与人交流用途的地址。为此，我们引入了 DNS 地址簿协议，用于将域名解析为物理网络可理解的 IP 地址。</p><p>综上分析，最终我们得到 MVP 版本的 Internet 项目的各子系统如下：</p><p><img src=\"https://static001.geekbang.org/resource/image/6c/4c/6c7bac541039e535deb6679c8c2b684c.png?wh=1742*1417\" alt=\"\"></p><h2>案例: 存储新兵 “对象存储”</h2><p>对象存储是非常新兴的一种存储系统。是什么样的需求满足方式的变化，导致人们要创造一种新的存储呢？</p><p>对象存储是伴随互联网的兴起，尤其是移动互联网的兴起而产生的。</p><p><strong>首先，互联网应用兴起，软件不再是单机软件，用户在使用应用软件的过程中产生的数据，并不是跟随设备，而是跟随账号。</strong>这样，用户可以随心所欲地切换设备，不必考虑数据要在设备间倒来倒去的问题。</p><p>数据跟随账号，这是互联网应用的第一大特征，区别于单机软件的关键所在。</p><p><strong>其次，用户交互方式的变化。</strong>用户不再打字用纯文本沟通，而是用照片、视频、语音等多媒体内容来表达自己的想法。</p><p>移动化加剧了这一趋势，在手机上打字是非常痛苦的事情。拍拍照、拍拍视频、说说话（语音输入）更加符合人的天性，尤其是手机用户覆盖面越来越宽，大部分用户属于没有经过专业培训的普通用户，这些手段是最低准入门槛的交互方式。</p><p><strong>最后，用户体验诉求的提升。</strong>计算机显示器早年是黑白的，后来有了256色，有了真彩色（TrueColor）；显示器的屏幕分辨率，也从320x240，到640x480，到今天我们再也不关心具体分辨率是多大。随之发生变化的，是一张照片从100K，到几兆，到几十兆。</p><p>这些趋势，对存储系统带来的挑战是什么？</p><p><strong>其一，规模。</strong>那么多用户的数据，一台机器显然放不下了，要很多很多台机器一起来保存。</p><p><strong>其二，可靠。</strong>用户单机对存储的要求并不高，机器硬盘出问题了，不会想着找操作系统厂商或者软件应用厂商去投诉。但是，用户数据在服务端，数据丢了那就是软件厂商的责任，要投诉。</p><p><strong>其三，成本。</strong>从软件厂商来说，那么多的用户数据，怎么做才能让成本更低一些。</p><p><strong>其四，并发吞吐能力。</strong>大量的用户同时操作，有读有写，怎么保证系统是高效的。</p><p>另外，从存储系统的操作接口来说，我们分为关系型存储（数据库，结构化数据）和文件型存储（非结构化数据）。我们今天的关注点在文件型存储上。</p><p>对于文件型存储来说，相关的备选解决方案有很多，我们简单罗列如下。</p><p><img src=\"https://static001.geekbang.org/resource/image/08/11/085ecbe7df53531f8af9cf7fec20de11.png?wh=1440*1080\" alt=\"\"><br>\n<strong>第一类是大家最熟悉的、最古老的存储系统：本地文件系统。</strong>虽然有很多种具体的实现方案，但是它们的使用接口大同小异，实现方案也只是在有限的几种选择中平衡。我们在 “<a href=\"https://time.geekbang.org/column/article/94991\">09 | 外存管理与文件系统</a>” 这一讲中已经有过详细的介绍，这里不提。</p><p><strong>第二类是网络文件系统</strong>，可以统称为 NAS，如上面的 NFS、FTP、Samba（CIFS）、WebDAV，都只是 NAS 存储不同的访问接口。</p><p><strong>第三类是数据库</strong>，它通常用于存储结构化数据，比较少作为文件型存储。但也有人在这么做，如果单个文件太大，会切成多个块放到多行。</p><p><strong>第四类是 SAN</strong>，它是块存储。块存储和关系型存储、文件型存储都不同，它模拟的是硬盘，是非常底层的存储接口。很少会有应用直接基于块存储，更多的是 mount 到虚拟机或物理机上，然后供应用软件需要的存储系统使用。</p><p><strong>第五类是分布式文件系统 GFS/HDFS</strong>。GFS 最早是为搜索引擎网页库的存储而设计，通常单个文件比较大，非常适合用于日志类数据的存储。这也是为什么 Hadoop最后从大数据领域跑出来，原因就是因为大数据处理的就是日志。</p><p>你可以看到，除了数据库和 SAN，我们不用细分析就知道它们不是文件型存储的最佳选择，其他几类包括本地文件系统、NAS、GFS/HDFS 有一个共同特征，就是它们的使用接口都是文件系统（FileSystem）。</p><p>那么，我们就来看下文件系统（FileSystem）对于大规模的文件型存储来说有什么问题。</p><p>最大的问题是，文件系统是一棵树（Tree）。除了对单个文件的操作只需要锁住该文件外，所有对树节点的修改操作，比如把 A 节点移到 B 处，都是一次事务操作，需要锁住整棵树。</p><p>这对规模和并发吞吐能力都是伤害。从规模来说，分布式事务是很难的（这也是为什么分布式数据库很难做的原因），做出来性能也往往好不到哪里去。从并发吞吐能力来说，如果系统存在大锁，即在锁里面执行费时的操作，就会大幅降低系统的并发吞吐能力。</p><p>传统的 NAS 出现比较早，所以它没有考虑“大规模条件下存储会有什么样的挑战”是非常正常的。</p><p>GFS/HDFS 为什么没有考虑大规模问题？这是 Google 设计 GFS 的背景导致的，网页库存储，或者日志型存储的共同特征是单个文件很大，可以到几个 G 级别，这样的话文件系统的元数据就会减少到单台机器就可以存储的级别。</p><p>所以对象存储出现了。它打破了文件型存储访问接口一定是文件系统（FileSystem）的惯例。它用的是键值存储（Key-Value Storage）。</p><p>从使用接口来说，首先选择文件所在的桶（Bucket），它类似于数据库的表（Table），只是一个逻辑划分的手段；然后选择文件的键（Key），就可以存取文件了。</p><p>这意味着文件之间并不存在关联（树型结构是文件之间的一种关联），可以通过某种算法将文件元信息分散到不同的机器上。</p><p>那么为什么文件型存储，不必考虑文件之间的关联？因为关系都在数据库里面，文件型存储只需要负责文件内容的存储，有个键（Key）能够找到文件内容即可。</p><p>从本质上来说，这是因为服务端和桌面软件面临的用户场景是完全不同的。文件系统是在桌面软件下的产物，桌面系统是单用户使用的，没有那么高的并发访问需求。</p><p>服务端一上来就面临着并发访问的问题，所以很早就出现了数据库这样的存储中间件。数据库的出现，其实已经证明文件系统并不适合服务端。只不过因为文件型存储在早期的服务端开发的比重并不大，所以没有被重视。</p><p>但是，互联网的发展极大地加速了文件型存储的发展。互联网增加的 90% 以上的数据，都是非结构化数据，包括图片、音频、视频、日志。</p><p>对象存储能够支撑的文件数量规模上非常非常大。比如七牛云存储，我们已经支持万亿级别的文件。</p><p>这在传统 NAS 这种基于文件系统访问接口的存储是难以想象的，我们看到的 NAS 存储 POC 测试要求，基本上都是要能够支持 1-2 亿级别的文件存储规模。</p><p>另外，对象存储的高速发展，很大程度上会逐步侵蚀 Hadoop 生态的市场。因为 HDFS 这种日志型存储，其实只是对象存储里面的一个特例。在人们习惯了对象存储后，他们并不希望需要学习太多的存储系统；所以大数据的整个生态会逐步过渡到以对象存储为基石。</p><p>这已经发生了。这两年你可能也能够听到，Hadoop 生态的公司活得挺不好的，几家公司合并了也没有解决掉没落的问题。这和大数据生态向对象存储迁徙是分不开的，只不过这方面我们国内还处在相对比较落后的阶段。</p><h2>案例分析</h2><p>通过对打造“互联网”和存储新兵“对象存储”这两个案例的分析，我们可以看出不同市场差异还是很大的。“互联网” 这个产品它并不是替换某种既有的方案，而是把既有的方案连接在一起。所以 “互联网” 的历史包袱很少，基本上不太需要考虑历史问题。</p><p>“对象存储” 产品则不同。在对象存储之前，存储已经经历了很长时间的发展。只不过因为文件型的数据爆发式的增长，带来了存储系统的新挑战，从而给对象存储这样的新技术一个市场机会。</p><p>当然，另外一个原因是云服务的诞生，让存储有了新的交付形态。我们不再需要拿着硬件往用户家里搬，这就出现了一个新的空白市场。</p><p>但是解决了空白市场的需求后，对象存储还是要面临 “既有市场中用户采用的老存储方案怎么搬迁” 的问题。所以存储网关这样的产品就出现了。存储网关做什么？简单说，就是把对象存储包装成 NAS，提供 NFS、FTP、Samba（CIFS）、WebDAV 这些访问接口给用户使用。</p><h2>结语</h2><p>需求分析相关的讨论就到此结束了。不同市场差异非常大，并不存在大一统的产品定义和市场策略，需要具体问题具体分析。</p><p>如果你对今天的内容有什么思考与解读，欢迎给我留言，我们一起讨论。下一讲将是我们第一章的回顾与总结。</p><p>如果你觉得有所收获，也欢迎把文章分享给你的朋友。感谢你的收听，我们下期再见。</p>","neighbors":{"left":{"article_title":"17 | 架构：需求分析 (上)","id":100140},"right":{"article_title":"19 | 基础平台篇：回顾与总结","id":101498}},"comments":[{"had_liked":false,"id":103604,"user_name":"黄强","can_delete":false,"product_type":"c1","uid":1086093,"ip_address":"","ucode":"20231AC29CFD53","user_header":"https://static001.geekbang.org/account/avatar/00/10/92/8d/ab469ad5.jpg","comment_is_top":false,"comment_ctime":1560476537,"is_pvip":false,"replies":[{"id":"37509","content":"👍","user_name":"作者回复","user_name_real":"许式伟-七牛云(已满)","uid":"1228022","ctime":1560486494,"ip_address":"","comment_id":103604,"utype":1}],"discussion_count":2,"race_medal":0,"score":"177654135673","product_id":100025201,"comment_content":"互联网产品的核心需求或稳定点是“连接”，安全等其他需求属于变化点，所以在互联网产品设计中，连接交给了稳定的协议、物理设施等，安全交给软件层来实现以利于扩展","like_count":41,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"许式伟-七牛云(已满)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453937,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560486494,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1510530,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDOKcx20XxmrRrLkelN8yAsBk0ZcuremVN7lZp4U2kdABFULtEVmCgaFlJLh1TYia0kicPbvxeZQNg/132","nickname":"Geek007","note":"","ucode":"53BF2BC4187DE4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":110977,"discussion_content":"Thanks. 通透了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577769368,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103780,"user_name":"Longerian","can_delete":false,"product_type":"c1","uid":1032464,"ip_address":"","ucode":"0B74EE70D09A2A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c1/10/28d5a686.jpg","comment_is_top":false,"comment_ctime":1560508690,"is_pvip":false,"replies":[{"id":"37540","content":"存储空间=单文件平均大小*文件数。在相同集群规模下，单文件平均大小越大，文件数越少。比如平均大小1M，和平均大小1G，文件数差1024倍。而元数据集群规模与文件数从正比，所以平均尺寸1G的集群，元数据规模非常小。","user_name":"作者回复","user_name_real":"许式伟-七牛云(已满)","uid":"1228022","ctime":1560509694,"ip_address":"","comment_id":103780,"utype":1}],"discussion_count":1,"race_medal":0,"score":"108934691090","product_id":100025201,"comment_content":"这是 Google 设计 GFS 的背景导致的，网页库存储，或者日志型存储的共同特征是单个文件很大，可以到几个 G 级别，这样的话文件系统的元数据就会减少到单台机器就可以存储的级别。<br><br>这句话咋理解？","like_count":25,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"许式伟-七牛云(已满)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454001,"discussion_content":"存储空间=单文件平均大小*文件数。在相同集群规模下，单文件平均大小越大，文件数越少。比如平均大小1M，和平均大小1G，文件数差1024倍。而元数据集群规模与文件数从正比，所以平均尺寸1G的集群，元数据规模非常小。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560509694,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103663,"user_name":"Geek_88604f","can_delete":false,"product_type":"c1","uid":1501234,"ip_address":"","ucode":"33DD1318E53814","user_header":"","comment_is_top":false,"comment_ctime":1560484911,"is_pvip":false,"replies":[{"id":"37505","content":"假的，基于 ListPrefix api 模拟出来的","user_name":"作者回复","user_name_real":"许式伟-七牛云(已满)","uid":"1228022","ctime":1560486173,"ip_address":"","comment_id":103663,"utype":1}],"discussion_count":3,"race_medal":0,"score":"61690027055","product_id":100025201,"comment_content":"桶下可以建很多层级的目录，这个是不是树形结构？","like_count":14,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"许式伟-七牛云(已满)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453955,"discussion_content":"假的，基于 ListPrefix api 模拟出来的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560486173,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1140080,"avatar":"https://static001.geekbang.org/account/avatar/00/11/65/70/7e137498.jpg","nickname":"FOCUS","note":"","ucode":"DFE3078B632026","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546602,"discussion_content":"这里的 ListPrefix，即是  A bucket 下 B directory，实际是 A_B ?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642347304,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1135528,"avatar":"https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg","nickname":"return","note":"","ucode":"42B8A3380DF04B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":398415,"discussion_content":"Mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632791412,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103608,"user_name":"觉","can_delete":false,"product_type":"c1","uid":1503600,"ip_address":"","ucode":"95E85D30E92170","user_header":"https://static001.geekbang.org/account/avatar/00/16/f1/70/bca09d2d.jpg","comment_is_top":false,"comment_ctime":1560476979,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"53100084531","product_id":100025201,"comment_content":"一门深入 长时薰修","like_count":12,"discussions":[{"author":{"id":1102245,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d1/a5/2bbedc3b.jpg","nickname":"over","note":"","ucode":"FE272AC19842D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":363586,"discussion_content":"随喜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617240625,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104261,"user_name":"科春","can_delete":false,"product_type":"c1","uid":1500869,"ip_address":"","ucode":"5766A7E9B9F497","user_header":"https://static001.geekbang.org/account/avatar/00/16/e6/c5/d7aa290b.jpg","comment_is_top":false,"comment_ctime":1560700952,"is_pvip":false,"replies":[{"id":"37775","content":"七牛云上有很多这类视频监控类业务应用，比如海康萤石、中移动的和目摄像头等。他们的共同特征是：上行量大、存储有周期性（对象存储可以设置文件的lifetime，主要就是针对这类场景）。一般传统监控厂商都会基于七牛云这类云存储对外提供服务。","user_name":"作者回复","user_name_real":"许式伟-七牛云(已满)","uid":"1228022","ctime":1560735394,"ip_address":"","comment_id":104261,"utype":1}],"discussion_count":1,"race_medal":0,"score":"44510373912","product_id":100025201,"comment_content":"我看贵司的官方网站中提供视频监控边缘节点的云存储，然而平安城市类的项目，视频监控既有视频数据也有图片数据，分别都是周期性保存。那么监控视频前端采集的数据是视频流，存储是如何看待这类数据以及这类业务应用对存储的要求是什么呢？七牛云和传统监控厂商所提供的云存储有什么区别？","like_count":10,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"许式伟-七牛云(已满)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454192,"discussion_content":"七牛云上有很多这类视频监控类业务应用，比如海康萤石、中移动的和目摄像头等。他们的共同特征是：上行量大、存储有周期性（对象存储可以设置文件的lifetime，主要就是针对这类场景）。一般传统监控厂商都会基于七牛云这类云存储对外提供服务。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560735394,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103892,"user_name":"水木年华","can_delete":false,"product_type":"c1","uid":1446205,"ip_address":"","ucode":"84B925B21F0381","user_header":"https://static001.geekbang.org/account/avatar/00/16/11/3d/58ac17a0.jpg","comment_is_top":false,"comment_ctime":1560560521,"is_pvip":false,"replies":[{"id":"37613","content":"我没有研究过voice，但是我判断可能还是有很大不同。互联网的两个应用email和www，都是去中心的，并不存在某个企业可以操控它（这和微信很不一样）。如果voice也是一样完全公开协议，分散部署（每个企业数据在自己这里），那么我觉得这个事情是成立的，如果voice是一个某个公司的app，那么和公链的关联就很勉强。","user_name":"作者回复","user_name_real":"许式伟-七牛云(已满)","uid":"1228022","ctime":1560589423,"ip_address":"","comment_id":103892,"utype":1}],"discussion_count":4,"race_medal":0,"score":"23035397001","product_id":100025201,"comment_content":"老师讲的第一个案例，打造“互联网”。里面讲到了构建互联网基础设施，还要在启动阶段开发杀手级应用来吸引客户。<br><br>我一下子就想到了区块链上的公链EOS，一直在努力做公链基础建设的事情。这还不够，官方也发布了一个社交应用Voice，希望把这个应用打造成为一个杀手级应用。<br><br>不同的场景，相同的打法。这种架构需求分析的思路原来是相通的。","like_count":5,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"许式伟-七牛云(已满)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454043,"discussion_content":"我没有研究过voice，但是我判断可能还是有很大不同。互联网的两个应用email和www，都是去中心的，并不存在某个企业可以操控它（这和微信很不一样）。如果voice也是一样完全公开协议，分散部署（每个企业数据在自己这里），那么我觉得这个事情是成立的，如果voice是一个某个公司的app，那么和公链的关联就很勉强。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560589423,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1248128,"avatar":"https://static001.geekbang.org/account/avatar/00/13/0b/80/a0533acb.jpg","nickname":"勇.Max","note":"","ucode":"AE5DBC10805A9B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312746,"discussion_content":"我觉得许老师说的email不是指邮件应用，而是pop3 imap？ 否则gmail或者hotmail也是公司控制的啊…\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602809711,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1485562,"avatar":"https://static001.geekbang.org/account/avatar/00/16/aa/fa/3ad0a689.jpg","nickname":"廖师虎","note":"","ucode":"1297068AE141DA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":72955,"discussion_content":"感觉Substrate和波卡在做类似的事情","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575545247,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1248128,"avatar":"https://static001.geekbang.org/account/avatar/00/13/0b/80/a0533acb.jpg","nickname":"勇.Max","note":"","ucode":"AE5DBC10805A9B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1485562,"avatar":"https://static001.geekbang.org/account/avatar/00/16/aa/fa/3ad0a689.jpg","nickname":"廖师虎","note":"","ucode":"1297068AE141DA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312745,"discussion_content":"这个专栏这么多链圈儿币圈的朋友吗~","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1602809588,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":72955,"ip_address":""},"score":312745,"extra":""}]}]},{"had_liked":false,"id":103546,"user_name":"MJ","can_delete":false,"product_type":"c1","uid":1237145,"ip_address":"","ucode":"FCEC0C21444D2A","user_header":"https://static001.geekbang.org/account/avatar/00/12/e0/99/5d603697.jpg","comment_is_top":false,"comment_ctime":1560472485,"is_pvip":false,"replies":[{"id":"37508","content":"安全涉及面太广，不知道你关注点是什么？","user_name":"作者回复","user_name_real":"许式伟-七牛云(已满)","uid":"1228022","ctime":1560486480,"ip_address":"","comment_id":103546,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23035308965","product_id":100025201,"comment_content":"【题外话】老师，是否了解中型企业关于安全的架构，一般怎么做，有没有好的推荐参考？最近做这事比较急。","like_count":5,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"许式伟-七牛云(已满)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453913,"discussion_content":"安全涉及面太广，不知道你关注点是什么？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560486480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119726,"user_name":"hantics","can_delete":false,"product_type":"c1","uid":1393027,"ip_address":"","ucode":"F0E5E0D60827F8","user_header":"https://static001.geekbang.org/account/avatar/00/15/41/83/a6550862.jpg","comment_is_top":false,"comment_ctime":1564666042,"is_pvip":false,"replies":[{"id":"43947","content":"hdfs和obs最大差别还是meta server，一个是fs，一个是kv。这意味着obs集群容量限制几乎没有，这个优势是非常重要的。","user_name":"作者回复","user_name_real":"许式伟-七牛云(已满)","uid":"1228022","ctime":1564699690,"ip_address":"","comment_id":119726,"utype":1}],"discussion_count":4,"race_medal":0,"score":"18744535226","product_id":100025201,"comment_content":"老师，hdfs分布式文件系统也是分散到各台机器上，通过namenode来组织，处理的也不仅是日志，我理解数据库类型数据都可以处理啊。 OBS类型我只觉得优势在可以存储图像、视频等异构类数据，具体还有其他什么优势嘛？","like_count":4,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"许式伟-七牛云(已满)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461040,"discussion_content":"hdfs和obs最大差别还是meta server，一个是fs，一个是kv。这意味着obs集群容量限制几乎没有，这个优势是非常重要的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564699690,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1135528,"avatar":"https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg","nickname":"return","note":"","ucode":"42B8A3380DF04B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":398416,"discussion_content":"Mark， 还是没懂","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1632791494,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1025267,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKjym0mscH8gyTVJwnXPAJxomtS5eGwgicHrfeRQssA0IZP5gGsBe7y9BNuNLSESXOxVnfIvD7qmXw/132","nickname":"zkbeta2","note":"","ucode":"066906D6F32FA4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376046,"discussion_content":"为什么fs的集群容量是会有限制呢？这个不太理解","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621939978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1637475,"avatar":"https://static001.geekbang.org/account/avatar/00/18/fc/63/bcda2f87.jpg","nickname":"熊","note":"","ucode":"B6423D29701EC5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1025267,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKjym0mscH8gyTVJwnXPAJxomtS5eGwgicHrfeRQssA0IZP5gGsBe7y9BNuNLSESXOxVnfIvD7qmXw/132","nickname":"zkbeta2","note":"","ucode":"066906D6F32FA4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561981,"discussion_content":"因为元数据服务是有限的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649757301,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":376046,"ip_address":""},"score":561981,"extra":""}]}]},{"had_liked":false,"id":103541,"user_name":"梦醒十分","can_delete":false,"product_type":"c1","uid":1043585,"ip_address":"","ucode":"33830A5A73DDF8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/81/2127e215.jpg","comment_is_top":false,"comment_ctime":1560472184,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18740341368","product_id":100025201,"comment_content":"许老师分析了pc时代和移动互联网两个方面的存储需求，从而从需求分析出适合的技术发展趋势。很有洞察力!","like_count":4},{"had_liked":false,"id":138146,"user_name":"Geek_88604f","can_delete":false,"product_type":"c1","uid":1501234,"ip_address":"","ucode":"33DD1318E53814","user_header":"","comment_is_top":false,"comment_ctime":1570065722,"is_pvip":false,"replies":[{"id":"53198","content":"存储类型是结果（解决方案）不是原因（需求）。我们分析需求的时候不应该把解决方案放到需求中去分析。","user_name":"作者回复","user_name_real":"许式伟-七牛云(已满)","uid":"1228022","ctime":1570158352,"ip_address":"","comment_id":138146,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14454967610","product_id":100025201,"comment_content":"重温了《需求分析下》，文中关于存储的需求分析中什么是核心稳定点？什么是变化点？个人认为存储的稳定点是用户对存储对象的增删改查，变化点是存储系统的类型（包括文件系统、数据库、KV等）。如何隔离变化点则通过存储网关来实现，使得用户不用感知底层的变化和扩展。不知道理解是否正确，请老师指正。","like_count":3,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"许式伟-七牛云(已满)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469407,"discussion_content":"存储类型是结果（解决方案）不是原因（需求）。我们分析需求的时候不应该把解决方案放到需求中去分析。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570158352,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1114356,"avatar":"https://static001.geekbang.org/account/avatar/00/11/00/f4/cc5f0896.jpg","nickname":"Jowin","note":"","ucode":"19017F7D06C22A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":276307,"discussion_content":"需求的稳定点应该是：大规模非结构性数据存储的需求。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590850502,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103838,"user_name":"晓凉","can_delete":false,"product_type":"c1","uid":1220647,"ip_address":"","ucode":"2D1130C3DACE1A","user_header":"https://static001.geekbang.org/account/avatar/00/12/a0/27/bdc6307d.jpg","comment_is_top":false,"comment_ctime":1560526765,"is_pvip":false,"replies":[{"id":"37566","content":"修改操作要么都成功要么都不成功，所以这是一个分布式事务。另外，传统树状结构在找文件的过程是要一层层目录解析下去的，在分布式元数据的情况下查询效率较低。","user_name":"作者回复","user_name_real":"许式伟-七牛云(已满)","uid":"1228022","ctime":1560555975,"ip_address":"","comment_id":103838,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14445428653","product_id":100025201,"comment_content":"感谢许老师的分享，我问两个问题。老师说大数据存储方式在从hadoop转向对象存储，目前有什么好的开源对象存储方案推荐。另外关于树形结构的操作，我的理解是正在被修改的两个节点，只要其中一个不是另一个的祖节点，就应该可以同时修改，所以叶节点都可以同时修改。老师说树结构的并发性能问题主要来自哪些方面。","like_count":3,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"许式伟-七牛云(已满)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454018,"discussion_content":"修改操作要么都成功要么都不成功，所以这是一个分布式事务。另外，传统树状结构在找文件的过程是要一层层目录解析下去的，在分布式元数据的情况下查询效率较低。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560555975,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105089,"user_name":"程序员小跃","can_delete":false,"product_type":"c1","uid":1015483,"ip_address":"","ucode":"25BB96E0791A60","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7e/bb/947c329a.jpg","comment_is_top":false,"comment_ctime":1560914484,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"10150849076","product_id":100025201,"comment_content":"以前一直不理解桶（Bucket）这个东西，只知道在云存储上建一个桶，才能开始云存储。这下明白了，也是之前太懒了，都没深入研究。","like_count":2},{"had_liked":false,"id":104654,"user_name":"Chen","can_delete":false,"product_type":"c1","uid":1503113,"ip_address":"","ucode":"C1128558AB5BC4","user_header":"https://static001.geekbang.org/account/avatar/00/16/ef/89/8c73a24d.jpg","comment_is_top":false,"comment_ctime":1560815303,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10150749895","product_id":100025201,"comment_content":"学会了如何说服团队使用对象存储,😄","like_count":2},{"had_liked":false,"id":103680,"user_name":"honnkyou","can_delete":false,"product_type":"c1","uid":1026608,"ip_address":"","ucode":"FD5EC4120EE803","user_header":"https://static001.geekbang.org/account/avatar/00/0f/aa/30/acc91f01.jpg","comment_is_top":false,"comment_ctime":1560488593,"is_pvip":false,"replies":[{"id":"37512","content":"嗯，应该说不在讨论范围，反正他上面还有一个其他的存储","user_name":"作者回复","user_name_real":"许式伟-七牛云(已满)","uid":"1228022","ctime":1560491553,"ip_address":"","comment_id":103680,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10150423185","product_id":100025201,"comment_content":"“SAN，我们不用细分析就知道它们不是文件型存储的最佳选择”<br>老师这句话不是很理解，另外，对象存储底层也是块存储设备吧。我理解的对象存储是在文件系统之上又封装了一层，不知道对不对。","like_count":2,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"许式伟-七牛云(已满)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453960,"discussion_content":"嗯，应该说不在讨论范围，反正他上面还有一个其他的存储","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560491553,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103515,"user_name":"随心而至","can_delete":false,"product_type":"c1","uid":1097836,"ip_address":"","ucode":"31866865255101","user_header":"https://static001.geekbang.org/account/avatar/00/10/c0/6c/29be1864.jpg","comment_is_top":false,"comment_ctime":1560470950,"is_pvip":false,"replies":[{"id":"37452","content":"分开是自然的，否则物理上也放不下","user_name":"作者回复","user_name_real":"许式伟-七牛云(已满)","uid":"1228022","ctime":1560471995,"ip_address":"","comment_id":103515,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10150405542","product_id":100025201,"comment_content":"当一张表或者一个文件太大了时候，人们就会想办法把它分开。Kafka里面有partition，MongoDb有sharding，elastic search也有sharding，redis有slot，RDB有分库分表，等等。刚刚入行，说的不一定对，如有错误，请老师指正。","like_count":2,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"许式伟-七牛云(已满)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453904,"discussion_content":"分开是自然的，否则物理上也放不下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560471995,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":145034,"user_name":"prader26","can_delete":false,"product_type":"c1","uid":1433707,"ip_address":"","ucode":"5EFFFC374ADECE","user_header":"https://static001.geekbang.org/account/avatar/00/15/e0/6b/f61d7466.jpg","comment_is_top":false,"comment_ctime":1572166493,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5867133789","product_id":100025201,"comment_content":"对象存储，自己简单的理解是，通过数据库上的表，建立文件和路径的映射。","like_count":1},{"had_liked":false,"id":105481,"user_name":"木 易","can_delete":false,"product_type":"c1","uid":1033212,"ip_address":"","ucode":"5C3BBB5958A4B5","user_header":"","comment_is_top":false,"comment_ctime":1561012855,"is_pvip":false,"replies":[{"id":"38179","content":"不一定，后面我们会分析到","user_name":"作者回复","user_name_real":"许式伟-七牛云(已满)","uid":"1228022","ctime":1561015709,"ip_address":"","comment_id":105481,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5855980151","product_id":100025201,"comment_content":"老师，现在越来越多的应用是各种web端，我们直接申请账号，在浏览器中编辑文档，可以实时保存，只要有网络，随时随地都可以协作办公，这种业务必须保证存储的高可用和可靠性，这种类型的业务用到的存储技术，底层用到的是对象存储技术吗。","like_count":1,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"许式伟-七牛云(已满)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454699,"discussion_content":"不一定，后面我们会分析到","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561015709,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104259,"user_name":"Aaron Cheung","can_delete":false,"product_type":"c1","uid":1079816,"ip_address":"","ucode":"03972759C53667","user_header":"https://static001.geekbang.org/account/avatar/00/10/7a/08/4d3e47dd.jpg","comment_is_top":false,"comment_ctime":1560699902,"is_pvip":false,"replies":[{"id":"37777","content":"辛苦了","user_name":"作者回复","user_name_real":"许式伟-七牛云(已满)","uid":"1228022","ctime":1560735531,"ip_address":"","comment_id":104259,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5855667198","product_id":100025201,"comment_content":"打卡18 翻回国内不易…","like_count":1,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"许式伟-七牛云(已满)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454191,"discussion_content":"辛苦了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560735531,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104207,"user_name":"小熊bill","can_delete":false,"product_type":"c1","uid":1493790,"ip_address":"","ucode":"A112BE15DDC33B","user_header":"https://static001.geekbang.org/account/avatar/00/16/cb/1e/811e7898.jpg","comment_is_top":false,"comment_ctime":1560681076,"is_pvip":false,"replies":[{"id":"37747","content":"不可能","user_name":"作者回复","user_name_real":"许式伟-七牛云(已满)","uid":"1228022","ctime":1560700941,"ip_address":"","comment_id":104207,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5855648372","product_id":100025201,"comment_content":"IPFS作为一种新的分布式文件存储协议，基于Merkle DAG实现内容寻址，防篡改，去重，与现有的云存储如何对比？是否会成为互联网存储的趋势？","like_count":1,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"许式伟-七牛云(已满)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454171,"discussion_content":"不可能","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560700941,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103889,"user_name":"Eason","can_delete":false,"product_type":"c1","uid":1018519,"ip_address":"","ucode":"69C0ADAC7C5475","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8a/97/6c1e90f1.jpg","comment_is_top":false,"comment_ctime":1560560394,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5855527690","product_id":100025201,"comment_content":"自己虽毕业多年，许老师，第二个案例分析，感觉有点论文的影子。论述背景，提出挑战，综诉现有方案为什么不满足，然后提新的方案。","like_count":1},{"had_liked":false,"id":360151,"user_name":"lSaint","can_delete":false,"product_type":"c1","uid":1045691,"ip_address":"上海","ucode":"FA1C91ACE0F352","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f4/bb/795e15a8.jpg","comment_is_top":false,"comment_ctime":1666234569,"is_pvip":false,"replies":[{"id":"131021","content":"1、从word文件编辑来说，局部改写的需求并不高，一般来说，新版本的word文件是重新生成的。2、很大word文件并发编辑和修改要分情况看：1）虽然很多并发改动但是单文件只有一个人改动，这个现在对象存储已经完全支持；2）很多人同时修改同一个word文件，这个需要在Office软件的设计上去考虑，像今天wps office办公软件已经支持协作编辑的能力。3、对象存储支持局部改写并非不能实现，这更多是一个策略选择，你可以理解为这是一个功能。","user_name":"作者回复","user_name_real":"作者","uid":"1228022","ctime":1666325870,"ip_address":"上海","comment_id":360151,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1666234569","product_id":100025201,"comment_content":"对象存储虽然好，但面向的还是一次写入多次取出的场景。如果是多次随机写入多次取出的场景就不太适合了。比如有上百万个Word文件，每个文件都会被随机编辑或读取。如果用对象存储，就会有一致性问题或响应速度问题。<br><br>我的问题是：如果是以上场景，有什么成熟的解决方案吗？","like_count":0,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"许式伟-七牛云(已满)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591151,"discussion_content":"1、从word文件编辑来说，局部改写的需求并不高，一般来说，新版本的word文件是重新生成的。2、很大word文件并发编辑和修改要分情况看：1）虽然很多并发改动但是单文件只有一个人改动，这个现在对象存储已经完全支持；2）很多人同时修改同一个word文件，这个需要在Office软件的设计上去考虑，像今天wps office办公软件已经支持协作编辑的能力。3、对象存储支持局部改写并非不能实现，这更多是一个策略选择，你可以理解为这是一个功能。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666325870,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287431,"user_name":"庆建","can_delete":false,"product_type":"c1","uid":2536777,"ip_address":"","ucode":"F97459299C6958","user_header":"https://static001.geekbang.org/account/avatar/00/26/b5/49/eeeccb5e.jpg","comment_is_top":false,"comment_ctime":1617947026,"is_pvip":false,"replies":[{"id":"104406","content":"NoSQL 其实更准确的说法是 No Relation，是分布式数据库在规模和功能强大之间的妥协。对象存储是 NoSQL 的，但是重心不在有没有 SQL 上，而是值是大对象（或者称之为文件）。数据库存储文件关系，对象存储存文件内容，是非常常见且自然的一种选择。","user_name":"作者回复","user_name_real":"许式伟-七牛云(已满)","uid":"1228022","ctime":1617988093,"ip_address":"","comment_id":287431,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1617947026","product_id":100025201,"comment_content":"对象存储和NoSQL的区别是什么呢？NoSQL是遵循了对象存储的理念？在文件型存储中，利用数据库存储文件关系，利用对象存储存储文件内容，这可否理解为是SQL+NoSQL的结合呢？","like_count":0,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"许式伟-七牛云(已满)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518309,"discussion_content":"NoSQL 其实更准确的说法是 No Relation，是分布式数据库在规模和功能强大之间的妥协。对象存储是 NoSQL 的，但是重心不在有没有 SQL 上，而是值是大对象（或者称之为文件）。数据库存储文件关系，对象存储存文件内容，是非常常见且自然的一种选择。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617988093,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286758,"user_name":"不温暖啊不纯良","can_delete":false,"product_type":"c1","uid":2079117,"ip_address":"","ucode":"204474A214E00C","user_header":"https://static001.geekbang.org/account/avatar/00/1f/b9/8d/00bded19.jpg","comment_is_top":false,"comment_ctime":1617554358,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617554358","product_id":100025201,"comment_content":"我们想要打造的互联网是一款点对点网，不管这个点是在世界上的哪一个角落，可一旦如此开放，我们安全必定成为一个绕不开的话题，你看我们为了开放而推倒墙，可是为了安全又不得不建起墙，区块链在数据防篡改方面，采用的方案是由全链所有节点来充当安全员，一个修改请求要想完成，必须要得到百分之五十一的节点认同，但缺点是人越少的链越容易被控制。<br><br>关于对象存储的思考，对象存储是把所以要存储的内容都看做是对象，然后把对象的元数据和内容分别存储为K和V，然后把K放在一个地方，把V放在另一个地方，当用户真正要调用这个数据的时候，我们再用K去获取V。","like_count":0},{"had_liked":false,"id":267222,"user_name":"escray","can_delete":false,"product_type":"c1","uid":1020525,"ip_address":"","ucode":"1F4204930E47C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","comment_is_top":false,"comment_ctime":1607653359,"is_pvip":true,"discussion_count":0,"race_medal":2,"score":"1607653359","product_id":100025201,"comment_content":"互联网的需求首先应该就是连接，能够跨地域传递信息（传送数据），而且地域的范围越来越大，需要连接的子网种类也越来越多，所以逐渐形成了从物理层、数据链路层（Ethernet）、网络层（IP、ICMP、ARP） 、传输层（TCP、UDP ）、应用层（DNS、HTTP、SMTP）等各种协议。<br><br>题外话，类似于微信这样的应用确实不够互联网，当然，现在的互联网也不是古典意义上的互联网了。<br><br>通过这篇专栏管窥了一下对象存储，感觉以后很长一段时间应该都会是各种存储模式混合的情况。看到留言里面有提到 ceph 和 swift，印象里面 ceph 似乎更适合大量小文件的情况。<br><br>Ceph’s file system runs on top of the same object storage system that provides object storage and block device interfaces.<br><br>Swift is a highly available, distributed, eventually consistent object&#47;blob store. Organizations can use Swift to store lots of data efficiently, safely, and cheaply.","like_count":0},{"had_liked":false,"id":254131,"user_name":"鲁大喵","can_delete":false,"product_type":"c1","uid":1093794,"ip_address":"","ucode":"BC880649611A08","user_header":"https://static001.geekbang.org/account/avatar/00/10/b0/a2/3757fc18.jpg","comment_is_top":false,"comment_ctime":1603070272,"is_pvip":false,"replies":[{"id":"92859","content":"大量小文件也用对象存储","user_name":"作者回复","user_name_real":"许式伟-七牛云(已满)","uid":"1228022","ctime":1603149507,"ip_address":"","comment_id":254131,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1603070272","product_id":100025201,"comment_content":"大文件分布式对象存储，如果是大量小文件用什么类型合适？这样元数据也面临巨大的问题","like_count":0,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"许式伟-七牛云(已满)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":507288,"discussion_content":"大量小文件也用对象存储","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603149507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184066,"user_name":"幻灰龙","can_delete":false,"product_type":"c1","uid":1046202,"ip_address":"","ucode":"AFEDCC997C2FF6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f6/ba/09ab72d2.jpg","comment_is_top":false,"comment_ctime":1583217419,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583217419","product_id":100025201,"comment_content":"数据结构与算法，不同的数据结构，会带来不同的API，不同的API能提供的原子操作语义不同，提供哪一层的抽象，能解锁不同的生产力。","like_count":0},{"had_liked":false,"id":163039,"user_name":"云师兄","can_delete":false,"product_type":"c1","uid":1205777,"ip_address":"","ucode":"EB19F80070FE23","user_header":"https://static001.geekbang.org/account/avatar/00/12/66/11/f7408e3e.jpg","comment_is_top":false,"comment_ctime":1576644770,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576644770","product_id":100025201,"comment_content":"互联网和对象存储的案例，让我们看到了技术的演进是背后需求的强推进。从孤立的状态到连接的状态，互联网不但是改变了整体信息世界。<br>往大处说还促进了文明的发展。不过底层这种硬件的稳定和软件变化的分离，也进一步继承了冯诺依曼的思想体系。","like_count":0},{"had_liked":false,"id":138373,"user_name":"Geek_88604f","can_delete":false,"product_type":"c1","uid":1501234,"ip_address":"","ucode":"33DD1318E53814","user_header":"","comment_is_top":false,"comment_ctime":1570182334,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570182334","product_id":100025201,"comment_content":"感谢老师的答复！重新理解一下:稳定点是用户对存储对象的增删改查，变化点是不同的存储结构（数据结构）。需要根据数据结构的特点选择不同的存储类型。","like_count":0},{"had_liked":false,"id":137784,"user_name":"D","can_delete":false,"product_type":"c1","uid":1493885,"ip_address":"","ucode":"02D70D1317B1B6","user_header":"https://static001.geekbang.org/account/avatar/00/16/cb/7d/2a65ded5.jpg","comment_is_top":false,"comment_ctime":1569848014,"is_pvip":false,"replies":[{"id":"52951","content":"后面还有专门介绍对象存储的一篇","user_name":"作者回复","user_name_real":"许式伟-七牛云(已满)","uid":"1228022","ctime":1569851594,"ip_address":"","comment_id":137784,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569848014","product_id":100025201,"comment_content":"对象存储没看懂，老师，怎样才能了解深入一点？","like_count":0,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"许式伟-七牛云(已满)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469260,"discussion_content":"后面还有专门介绍对象存储的一篇","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569851594,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115220,"user_name":"xiaobang","can_delete":false,"product_type":"c1","uid":1157508,"ip_address":"","ucode":"1735BDCFD61655","user_header":"https://static001.geekbang.org/account/avatar/00/11/a9/84/c87b51ce.jpg","comment_is_top":false,"comment_ctime":1563511797,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563511797","product_id":100025201,"comment_content":"facebook 的haystack 算对象存储吗","like_count":0},{"had_liked":false,"id":110557,"user_name":"gopherliu","can_delete":false,"product_type":"c1","uid":1202971,"ip_address":"","ucode":"0254E9A95B71C3","user_header":"https://static001.geekbang.org/account/avatar/00/12/5b/1b/78a937d8.jpg","comment_is_top":false,"comment_ctime":1562294293,"is_pvip":true,"replies":[{"id":"40194","content":"没细研究","user_name":"作者回复","user_name_real":"许式伟-七牛云(已满)","uid":"1228022","ctime":1562302913,"ip_address":"","comment_id":110557,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562294293","product_id":100025201,"comment_content":"咨询个额外话题：现如今区块链世界中一条条公链像不像一个个局域网？跨链是不是一个必要的需求呢？","like_count":0,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"许式伟-七牛云(已满)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456941,"discussion_content":"没细研究","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562302913,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105435,"user_name":"木 易","can_delete":false,"product_type":"c1","uid":1033212,"ip_address":"","ucode":"5C3BBB5958A4B5","user_header":"","comment_is_top":false,"comment_ctime":1560999390,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560999390","product_id":100025201,"comment_content":"老师你好，目前对象存储技术的代表是ceph吗，如果想从事存储方面的工作，存储技术这块种类比较多，不同厂商的，如果从某个技术产品来说，比如ceph、swift老师推荐吗？<br>","like_count":0},{"had_liked":false,"id":104175,"user_name":"潘华引Simon Pan","can_delete":false,"product_type":"c1","uid":1199749,"ip_address":"","ucode":"DA8DD9747E2EA2","user_header":"https://static001.geekbang.org/account/avatar/00/12/4e/85/d425c99f.jpg","comment_is_top":false,"comment_ctime":1560675111,"is_pvip":false,"replies":[{"id":"37705","content":"了解一下七牛Pandora产品","user_name":"作者回复","user_name_real":"许式伟-七牛云(已满)","uid":"1228022","ctime":1560679848,"ip_address":"","comment_id":104175,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1560675111","product_id":100025201,"comment_content":"对象存储以后的数据如何进行后续的ETL，有没有比较好的方案，目前公司对于部分对象存储的数据是先下载然后解析到关系数据库，再用SQL进行ETL，效率很低","like_count":0,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"许式伟-七牛云(已满)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454158,"discussion_content":"了解一下七牛Pandora产品","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560679848,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103679,"user_name":"Cordova","can_delete":false,"product_type":"c1","uid":1507212,"ip_address":"","ucode":"CADCB5D4F48F33","user_header":"https://static001.geekbang.org/account/avatar/00/16/ff/8c/a6a2b26b.jpg","comment_is_top":false,"comment_ctime":1560487764,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560487764","product_id":100025201,"comment_content":"读完这篇印象比较深刻的是基于用户操作的各种数据，是不是都要存储（有备无患？）其次是，暂时还没有感受到对象存储是以后的主要技术方案，不过将所有存储内容归纳为对象存储，的确拓宽了对存储的理解，不过回过头来想想，非关系性的存储靠关系性存储方案也基本上都能办得到，至于大数据时代下的数据存储已经上到更高层的维度了，关键词是海量数据，需求是海量数据的处理能力，关注点是不再局限于服务和培养好某一个或一坨用户，而是所有，大数据知识有限，需要多多学习。","like_count":0}]}