{"id":144348,"title":"32 | åŠ¨æ‰‹å®ç°ä¸€ä¸ªç®€å•çš„RPCæ¡†æ¶ï¼ˆäºŒï¼‰ï¼šé€šä¿¡ä¸åºåˆ—åŒ–","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æç¥ã€‚</p><p>ç»§ç»­ä¸ŠèŠ‚è¯¾çš„å†…å®¹ï¼Œè¿™èŠ‚è¯¾æˆ‘ä»¬ä¸€èµ·æ¥å®ç°è¿™ä¸ªRPCæ¡†æ¶çš„é€šä¿¡å’Œåºåˆ—åŒ–éƒ¨åˆ†ã€‚å¦‚ä½•å®ç°é«˜æ€§èƒ½çš„å¼‚æ­¥é€šä¿¡ã€å¦‚ä½•æ¥å°†ç»“æ„åŒ–çš„æ•°æ®åºåˆ—åŒ–æˆå­—èŠ‚æµï¼Œç”¨äºç½‘ç»œä¼ è¾“æˆ–è€…å­˜å‚¨åˆ°æ–‡ä»¶ä¸­ï¼Œè¿™ä¸¤éƒ¨åˆ†å†…å®¹ï¼Œæˆ‘åœ¨è¿›é˜¶ç¯‡ä¸­éƒ½æœ‰åœ¨ä¸“é—¨çš„è¯¾ç¨‹åˆ†åˆ«è®²è§£è¿‡ã€‚</p><p>ç½‘ç»œä¼ è¾“å’Œåºåˆ—åŒ–è¿™ä¸¤éƒ¨åˆ†çš„åŠŸèƒ½ç›¸å¯¹æ¥è¯´æ˜¯éå¸¸é€šç”¨å¹¶ä¸”ç‹¬ç«‹çš„ï¼Œåœ¨è®¾è®¡çš„æ—¶å€™ï¼Œåªè¦èƒ½åšåˆ°æ¯”è¾ƒå¥½çš„æŠ½è±¡ï¼Œè¿™ä¸¤éƒ¨çš„å®ç°ï¼Œå®ƒçš„é€šç”¨æ€§æ˜¯éå¸¸å¼ºçš„ã€‚ä¸ä»…å¯ä»¥ç”¨äºæˆ‘ä»¬è¿™ä¸ªä¾‹å­ä¸­çš„RPCæ¡†æ¶ä¸­ï¼ŒåŒæ ·å¯ä»¥ç›´æ¥æ‹¿å»ç”¨äºå®ç°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæˆ–è€…å…¶ä»–éœ€è¦äº’ç›¸é€šä¿¡çš„åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ã€‚</p><p>æˆ‘ä»¬åœ¨å®ç°è¿™ä¸¤éƒ¨åˆ†çš„æ—¶å€™ï¼Œä¼šå°½é‡ä»¥å¼€å‘ä¸€ä¸ªé«˜æ€§èƒ½çš„ç”Ÿäº§çº§ç³»ç»Ÿè¿™æ ·çš„è´¨é‡è¦æ±‚æ¥è®¾è®¡å’Œå®ç°ï¼Œä½†æ˜¯ä¸ºäº†é¿å…ä»£ç è¿‡äºç¹æ‚å½±å“ä½ ç†è§£ä¸»å¹²æµç¨‹ï¼Œæˆ‘ä¹Ÿä¼šåšé€‚å½“çš„ç®€åŒ–ï¼Œç®€åŒ–çš„éƒ¨åˆ†æˆ‘ä¼šå°½é‡ç»™å‡ºæç¤ºã€‚</p><h2>å¦‚ä½•è®¾è®¡ä¸€ä¸ªé€šç”¨çš„é«˜æ€§èƒ½åºåˆ—åŒ–å®ç°ï¼Ÿ</h2><p>æˆ‘ä»¬å…ˆæ¥å®ç°åºåˆ—åŒ–å’Œååºåˆ—åŒ–éƒ¨åˆ†ï¼Œå› ä¸ºåé¢è®²åˆ°çš„éƒ¨åˆ†ä¼šç”¨åˆ°åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦è®¾è®¡ä¸€ä¸ªå¯æ‰©å±•çš„ï¼Œé€šç”¨çš„åºåˆ—åŒ–æ¥å£ï¼Œä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨é™æ€ç±»çš„æ–¹å¼æ¥å®šä¹‰è¿™ä¸ªæ¥å£ï¼ˆä¸¥æ ¼æ¥è¯´è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªæ¥å£ï¼‰ã€‚</p><pre><code>public class SerializeSupport {\n    public static  &lt;E&gt; E parse(byte [] buffer) {\n        // ...\n    }\n    public static &lt;E&gt; byte [] serialize(E  entry) {\n        // ...\n    }\n}\n</code></pre><p>ä¸Šé¢çš„parseæ–¹æ³•ç”¨äºååºåˆ—åŒ–ï¼Œserializeæ–¹æ³•ç”¨äºåºåˆ—åŒ–ã€‚å¦‚æœä½ å¯¹Javaè¯­è¨€ä¸æ˜¯ç‰¹åˆ«çš„ç†Ÿæ‚‰ï¼Œå¯èƒ½ä¼šçœ‹ä¸æ‡‚<code>&lt;E&gt;</code>æ˜¯ä»€ä¹ˆæ„æ€ï¼Œè¿™æ˜¯Javaè¯­è¨€æ³›å‹æœºåˆ¶ï¼Œä½ å¯ä»¥å…ˆå¿½ç•¥å®ƒã€‚çœ‹ä¸€ä¸‹å¦‚ä½•æ¥ä½¿ç”¨è¿™ä¸ªç±»å°±æ˜ç™½äº†ï¼š</p><!-- [[[read_end]]] --><pre><code>// åºåˆ—åŒ–\nMyClass myClassObject = new MyClass();\nbyte [] bytes = SerializeSupport.serialize(myClassObject);\n// ååºåˆ—åŒ–\nMyClass myClassObject1 = SerializeSupport.parse(bytes);\n</code></pre><p>æˆ‘åœ¨è®²è§£åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„æ—¶å€™è¯´è¿‡ï¼Œå¯ä»¥ä½¿ç”¨é€šç”¨çš„åºåˆ—åŒ–å®ç°ï¼Œä¹Ÿå¯ä»¥è‡ªå·±æ¥å®šä¹‰ä¸“ç”¨çš„åºåˆ—åŒ–å®ç°ã€‚ä¸“ç”¨çš„åºåˆ—åŒ–æ€§èƒ½æœ€å¥½ï¼Œä½†ç¼ºç‚¹æ˜¯å®ç°èµ·æ¥æ¯”è¾ƒå¤æ‚ï¼Œä½ è¦ä¸ºæ¯ä¸€ç§ç±»å‹çš„æ•°æ®ä¸“é—¨ç¼–å†™åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ–¹æ³•ã€‚ä¸€èˆ¬çš„RPCæ¡†æ¶é‡‡ç”¨çš„éƒ½æ˜¯é€šç”¨çš„åºåˆ—åŒ–å®ç°ï¼Œæ¯”å¦‚gRPCé‡‡ç”¨çš„æ˜¯Protobufåºåˆ—åŒ–å®ç°ï¼ŒDubboæ”¯æŒhession2ç­‰å¥½å‡ ç§åºåˆ—åŒ–å®ç°ã€‚</p><p>é‚£ä¸ºä»€ä¹ˆè¿™äº›RPCæ¡†æ¶ä¸åƒæ¶ˆæ¯é˜Ÿåˆ—ä¸€æ ·ï¼Œé‡‡ç”¨æ€§èƒ½æ›´å¥½çš„ä¸“ç”¨çš„åºåˆ—åŒ–å®ç°å‘¢ï¼Ÿè¿™ä¸ªåŸå› å¾ˆç®€å•ï¼Œæ¶ˆæ¯é˜Ÿåˆ—å®ƒéœ€è¦åºåˆ—åŒ–æ•°æ®çš„ç±»å‹æ˜¯å›ºå®šçš„ï¼Œåªæ˜¯å®ƒè‡ªå·±çš„å†…éƒ¨é€šä¿¡çš„ä¸€äº›å‘½ä»¤ã€‚ä½†RPCæ¡†æ¶ï¼Œå®ƒéœ€è¦åºåˆ—åŒ–çš„æ•°æ®æ˜¯ï¼Œç”¨æˆ·è°ƒç”¨è¿œç¨‹æ–¹æ³•çš„å‚æ•°ï¼Œè¿™äº›å‚æ•°å¯èƒ½æ˜¯å„ç§æ•°æ®ç±»å‹ï¼Œæ‰€ä»¥å¿…é¡»ä½¿ç”¨é€šç”¨çš„åºåˆ—åŒ–å®ç°ï¼Œç¡®ä¿å„ç§ç±»å‹çš„æ•°æ®éƒ½èƒ½è¢«æ­£ç¡®çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚æˆ‘ä»¬è¿™é‡Œè¿˜æ˜¯é‡‡ç”¨ä¸“ç”¨çš„åºåˆ—åŒ–å®ç°ï¼Œä¸»è¦çš„ç›®çš„æ˜¯å¸¦ä½ ä¸€èµ·æ¥å®è·µä¸€ä¸‹ï¼Œå¦‚ä½•æ¥å®ç°åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</p><p>æˆ‘ä»¬ç»™æ‰€æœ‰åºåˆ—åŒ–çš„å®ç°ç±»å®šä¹‰ä¸€ä¸ªSerializeræ¥å£ï¼Œæ‰€æœ‰çš„åºåˆ—åŒ–å®ç°ç±»éƒ½å®ç°è¿™ä¸ªæ¥å£å°±å¯ä»¥äº†ï¼š</p><pre><code>public interface Serializer&lt;T&gt; {\n    /**\n     * è®¡ç®—å¯¹è±¡åºåˆ—åŒ–åçš„é•¿åº¦ï¼Œä¸»è¦ç”¨äºç”³è¯·å­˜æ”¾åºåˆ—åŒ–æ•°æ®çš„å­—èŠ‚æ•°ç»„\n     * @param entry å¾…åºåˆ—åŒ–çš„å¯¹è±¡\n     * @return å¯¹è±¡åºåˆ—åŒ–åçš„é•¿åº¦\n     */\n    int size(T entry);\n\n    /**\n     * åºåˆ—åŒ–å¯¹è±¡ã€‚å°†ç»™å®šçš„å¯¹è±¡åºåˆ—åŒ–æˆå­—èŠ‚æ•°ç»„\n     * @param entry å¾…åºåˆ—åŒ–çš„å¯¹è±¡\n     * @param bytes å­˜æ”¾åºåˆ—åŒ–æ•°æ®çš„å­—èŠ‚æ•°ç»„\n     * @param offset æ•°ç»„çš„åç§»é‡ï¼Œä»è¿™ä¸ªä½ç½®å¼€å§‹å†™å…¥åºåˆ—åŒ–æ•°æ®\n     * @param length å¯¹è±¡åºåˆ—åŒ–åçš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯{@link Serializer#size(java.lang.Object)}æ–¹æ³•çš„è¿”å›å€¼ã€‚\n     */\n    void serialize(T entry, byte[] bytes, int offset, int length);\n\n    /**\n     * ååºåˆ—åŒ–å¯¹è±¡\n     * @param bytes å­˜æ”¾åºåˆ—åŒ–æ•°æ®çš„å­—èŠ‚æ•°ç»„\n     * @param offset æ•°ç»„çš„åç§»é‡ï¼Œä»è¿™ä¸ªä½ç½®å¼€å§‹å†™å…¥åºåˆ—åŒ–æ•°æ®\n     * @param length å¯¹è±¡åºåˆ—åŒ–åçš„é•¿åº¦\n     * @return ååºåˆ—åŒ–ä¹‹åç”Ÿæˆçš„å¯¹è±¡\n     */\n    T parse(byte[] bytes, int offset, int length);\n\n    /**\n     * ç”¨ä¸€ä¸ªå­—èŠ‚æ ‡è¯†å¯¹è±¡ç±»å‹ï¼Œæ¯ç§ç±»å‹çš„æ•°æ®åº”è¯¥å…·æœ‰ä¸åŒçš„ç±»å‹å€¼\n     */\n    byte type();\n\n    /**\n     * è¿”å›åºåˆ—åŒ–å¯¹è±¡ç±»å‹çš„Classå¯¹è±¡ã€‚\n     */\n    Class&lt;T&gt; getSerializeClass();\n}\n</code></pre><p>è¿™ä¸ªæ¥å£ä¸­ï¼Œé™¤äº†serializeå’Œparseè¿™ä¸¤ä¸ªåºåˆ—åŒ–å’Œååºåˆ—åŒ–ä¸¤ä¸ªæ–¹æ³•ä»¥å¤–ï¼Œè¿˜å®šä¹‰äº†ä¸‹é¢è¿™å‡ ä¸ªæ–¹æ³•ï¼šsizeæ–¹æ³•è®¡ç®—åºåˆ—åŒ–ä¹‹åçš„æ•°æ®é•¿åº¦ï¼Œç”¨äºäº‹å…ˆæ¥ç”³è¯·å­˜æ”¾åºåˆ—åŒ–æ•°æ®çš„å­—èŠ‚æ•°ç»„ï¼›typeæ–¹æ³•å®šä¹‰æ¯ç§åºåˆ—åŒ–å®ç°çš„ç±»å‹ï¼Œè¿™ä¸ªç±»å‹å€¼ä¹Ÿä¼šå†™å…¥åˆ°åºåˆ—åŒ–ä¹‹åçš„æ•°æ®ä¸­ï¼Œä¸»è¦çš„ä½œç”¨æ˜¯åœ¨ååºåˆ—åŒ–çš„æ—¶å€™ï¼Œèƒ½å¤Ÿè¯†åˆ«æ˜¯ä»€ä¹ˆæ•°æ®ç±»å‹çš„ï¼Œä»¥ä¾¿æ‰¾åˆ°å¯¹åº”çš„ååºåˆ—åŒ–å®ç°ç±»ï¼›getSerializeClassè¿™ä¸ªæ–¹æ³•è¿”å›è¿™ä¸ªåºåˆ—åŒ–å®ç°ç±»å¯¹åº”çš„å¯¹è±¡ç±»å‹ï¼Œç›®çš„æ˜¯ï¼Œåœ¨æ‰§è¡Œåºåˆ—åŒ–çš„æ—¶å€™ï¼Œé€šè¿‡è¢«åºåˆ—åŒ–çš„å¯¹è±¡ç±»å‹æ‰¾åˆ°å¯¹åº”åºåˆ—åŒ–å®ç°ç±»ã€‚</p><p>åˆ©ç”¨è¿™ä¸ªSerializeræ¥å£ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¥å®ç°SerializeSupportè¿™ä¸ªæ”¯æŒä»»ä½•å¯¹è±¡ç±»å‹åºåˆ—åŒ–çš„é€šç”¨é™æ€ç±»äº†ã€‚é¦–å…ˆæˆ‘ä»¬å®šä¹‰ä¸¤ä¸ªMapï¼Œè¿™ä¸¤ä¸ªMapä¸­å­˜æ”¾ç€æ‰€æœ‰å®ç°Serializeræ¥å£çš„åºåˆ—åŒ–å®ç°ç±»ã€‚</p><pre><code>    private static Map&lt;Class&lt;?&gt;/*åºåˆ—åŒ–å¯¹è±¡ç±»å‹*/, Serializer&lt;?&gt;/*åºåˆ—åŒ–å®ç°*/&gt; serializerMap = new HashMap&lt;&gt;();\n    private static Map&lt;Byte/*åºåˆ—åŒ–å®ç°ç±»å‹*/, Class&lt;?&gt;/*åºåˆ—åŒ–å¯¹è±¡ç±»å‹*/&gt; typeMap = new HashMap&lt;&gt;();\n</code></pre><p>serializerMapä¸­çš„keyæ˜¯åºåˆ—åŒ–å®ç°ç±»å¯¹åº”çš„åºåˆ—åŒ–å¯¹è±¡çš„ç±»å‹ï¼Œå®ƒçš„ç”¨é€”æ˜¯åœ¨åºåˆ—åŒ–çš„æ—¶å€™ï¼Œé€šè¿‡è¢«åºåˆ—åŒ–çš„å¯¹è±¡ç±»å‹ï¼Œæ‰¾åˆ°å¯¹åº”çš„åºåˆ—åŒ–å®ç°ç±»ã€‚typeMapçš„ä½œç”¨å’ŒserializerMapæ˜¯ç±»ä¼¼çš„ï¼Œå®ƒçš„keyæ˜¯åºåˆ—åŒ–å®ç°ç±»çš„ç±»å‹ï¼Œç”¨äºåœ¨ååºåˆ—åŒ–çš„æ—¶å€™ï¼Œä»åºåˆ—åŒ–çš„æ•°æ®ä¸­è¯»å‡ºå¯¹è±¡ç±»å‹ï¼Œç„¶åæ‰¾åˆ°å¯¹åº”çš„åºåˆ—åŒ–å®ç°ç±»ã€‚</p><p>ç†è§£äº†è¿™ä¸¤ä¸ªMapçš„ä½œç”¨ï¼Œå®ç°åºåˆ—åŒ–å’Œååºåˆ—åŒ–è¿™ä¸¤ä¸ªæ–¹æ³•å°±å¾ˆå®¹æ˜“äº†ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•çš„å®ç°æ€è·¯æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯é€šè¿‡ä¸€ä¸ªç±»å‹åœ¨è¿™ä¸¤ä¸ªMapä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼ŒæŸ¥æ‰¾çš„ç»“æœå°±æ˜¯å¯¹åº”çš„åºåˆ—åŒ–å®ç°ç±»çš„å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯Serializeræ¥å£çš„å®ç°ï¼Œç„¶åè°ƒç”¨å¯¹åº”çš„åºåˆ—åŒ–æˆ–è€…ååºåˆ—åŒ–æ–¹æ³•å°±å¯ä»¥äº†ã€‚å…·ä½“çš„å®ç°åœ¨SerializeSupportä¸­ï¼Œä½ å¯ä»¥è‡ªè¡ŒæŸ¥çœ‹ã€‚æˆ‘åˆšåˆšè®²çš„è¿™å‡ ä¸ªç±»å‹ï¼Œå¬èµ·æ¥å¯èƒ½ä¼šæ„Ÿè§‰æœ‰äº›æ™•ï¼Œä½†å…¶å®å¹¶ä¸éš¾ï¼Œä½ å¯¹ç€ä»£ç æ¥è‡ªå·±çœ‹ä¸€éï¼Œå°±å¾ˆå®¹æ˜“ç†è§£äº†ã€‚</p><p>æ‰€æœ‰çš„Serializerçš„å®ç°ç±»æ˜¯æ€ä¹ˆåŠ è½½åˆ°SerializeSupportçš„é‚£ä¸¤ä¸ªMapä¸­çš„å‘¢ï¼Ÿè¿™é‡Œé¢åˆ©ç”¨äº†Javaçš„ä¸€ä¸ªSPIç±»åŠ è½½æœºåˆ¶ï¼Œæˆ‘ä¼šåœ¨åé¢çš„è¯¾ç¨‹ä¸­ä¸“é—¨æ¥è®²ã€‚</p><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å°è£…å¥½äº†ä¸€ä¸ªé€šç”¨çš„åºåˆ—åŒ–çš„æ¥å£ï¼Œå¯¹äºä½¿ç”¨åºåˆ—åŒ–çš„æ¨¡å—æ¥è¯´ï¼Œå®ƒåªè¦ä¾èµ–SerializeSupportè¿™ä¸ªé™æ€ç±»ï¼Œè°ƒç”¨å®ƒçš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ–¹æ³•å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦ä¾èµ–ä»»ä½•åºåˆ—åŒ–å®ç°ç±»ã€‚å¯¹äºåºåˆ—åŒ–å®ç°çš„æä¾›è€…æ¥è¯´ï¼Œä¹Ÿåªéœ€è¦ä¾èµ–å¹¶å®ç°Serializerè¿™ä¸ªæ¥å£å°±å¯ä»¥äº†ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬çš„HelloServiceä¾‹å­ä¸­çš„å‚æ•°æ˜¯ä¸€ä¸ªStringç±»å‹çš„æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªæ”¯æŒStringç±»å‹çš„åºåˆ—åŒ–å®ç°ï¼š</p><pre><code>public class StringSerializer implements Serializer&lt;String&gt; {\n    @Override\n    public int size(String entry) {\n        return entry.getBytes(StandardCharsets.UTF_8).length;\n    }\n\n    @Override\n    public void serialize(String entry, byte[] bytes, int offset, int length) {\n        byte [] strBytes = entry.getBytes(StandardCharsets.UTF_8);\n        System.arraycopy(strBytes, 0, bytes, offset, strBytes.length);\n    }\n\n    @Override\n    public String parse(byte[] bytes, int offset, int length) {\n        return new String(bytes, offset, length, StandardCharsets.UTF_8);\n    }\n\n    @Override\n    public byte type() {\n        return Types.TYPE_STRING;\n    }\n\n    @Override\n    public Class&lt;String&gt; getSerializeClass() {\n        return String.class;\n    }\n}\n</code></pre><p>è¿™é‡Œé¢æœ‰ä¸ªåˆå­¦è€…å®¹æ˜“çŠ¯çš„é”™è¯¯ï¼Œåœ¨æŠŠStringå’Œbyteæ•°ç»„åšè½¬æ¢çš„æ—¶å€™ï¼Œä¸€å®šè¦æŒ‡å®šç¼–ç æ–¹å¼ï¼Œç¡®ä¿åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„æ—¶å€™éƒ½ä½¿ç”¨ä¸€è‡´çš„ç¼–ç ï¼Œæˆ‘ä»¬è¿™é‡Œé¢ç»Ÿä¸€ä½¿ç”¨UTF8ç¼–ç ã€‚å¦åˆ™ï¼Œå¦‚æœé‡åˆ°æ‰§è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„ä¸¤å°æœåŠ¡å™¨é»˜è®¤ç¼–ç ä¸ä¸€æ ·ï¼Œå°±ä¼šå‡ºç°ä¹±ç ã€‚æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ç”¨é‡åˆ°çš„å¾ˆå¤šä¸­æ–‡ä¹±ç é—®é¢˜ï¼Œç»å¤§éƒ¨åˆ†éƒ½æ˜¯è¿™ä¸ªåŸå› ã€‚</p><p>åœ¨æˆ‘ä»¬è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¿˜æœ‰ä¸€ä¸ªæ›´å¤æ‚çš„åºåˆ—åŒ–å®ç°MetadataSerializerï¼Œç”¨äºå°†æ³¨å†Œä¸­å¿ƒçš„æ•°æ®æŒä¹…åŒ–åˆ°æ–‡ä»¶ä¸­ï¼Œä½ ä¹Ÿå¯ä»¥å‚è€ƒä¸€ä¸‹ã€‚</p><p>åˆ°è¿™é‡Œåºåˆ—åŒ–çš„éƒ¨åˆ†å°±å®ç°å®Œæˆäº†ã€‚æˆ‘ä»¬è¿™ä¸ªåºåˆ—åŒ–çš„å®ç°ï¼Œå¯¹å¤–æä¾›æœåŠ¡çš„å°±åªæœ‰ä¸€ä¸ªSerializeSupporté™æ€ç±»ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡æ‰©å±•æ”¯æŒåºåˆ—åŒ–ä»»ä½•ç±»å‹çš„æ•°æ®ï¼Œè¿™æ ·ä¸€ä¸ªé€šç”¨çš„å®ç°ï¼Œä¸ä»…å¯ä»¥ç”¨åœ¨æˆ‘ä»¬è¿™ä¸ªRPCæ¡†æ¶çš„ä¾‹å­ä¸­ï¼Œä½ å®Œå…¨å¯ä»¥æŠŠè¿™éƒ¨åˆ†ç›´æ¥æ‹¿è¿‡å»ç”¨åœ¨ä½ çš„ä¸šåŠ¡ä»£ç ä¸­ã€‚</p><h2>ä½¿ç”¨Nettyæ¥å®ç°å¼‚æ­¥ç½‘ç»œé€šä¿¡</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥è¯´ç½‘ç»œé€šä¿¡éƒ¨åˆ†çš„å®ç°ã€‚</p><p>åŒæ ·çš„æ€è·¯ï¼Œæˆ‘ä»¬æŠŠé€šä¿¡çš„éƒ¨åˆ†ä¹Ÿå°è£…æˆæ¥å£ã€‚åœ¨æˆ‘ä»¬è¿™ä¸ªRPCæ¡†æ¶ä¸­ï¼Œå¯¹äºé€šä¿¡æ¨¡å—çš„éœ€æ±‚æ˜¯è¿™æ ·çš„ï¼šåªéœ€è¦å®¢æˆ·ç«¯ç»™æœåŠ¡ç«¯å‘é€è¯·æ±‚ï¼Œç„¶åæœåŠ¡è¿”å›å“åº”å°±å¯ä»¥äº†ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬çš„é€šä¿¡æ¥å£åªéœ€è¦æä¾›ä¸€ä¸ªå‘é€è¯·æ±‚æ–¹æ³•å°±å¯ä»¥äº†ï¼š</p><pre><code>public interface Transport {\n    /**\n     * å‘é€è¯·æ±‚å‘½ä»¤\n     * @param request è¯·æ±‚å‘½ä»¤\n     * @return è¿”å›å€¼æ˜¯ä¸€ä¸ªFutureï¼ŒFuture\n     */\n    CompletableFuture&lt;Command&gt; send(Command request);\n}\n</code></pre><p>è¿™ä¸ªsendæ–¹æ³•å‚æ•°requestå°±æ˜¯éœ€è¦å‘é€çš„è¯·æ±‚æ•°æ®ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªCompletableFutureå¯¹è±¡ï¼Œé€šè¿‡è¿™ä¸ªCompletableFutureå¯¹è±¡å¯ä»¥è·å¾—å“åº”ç»“æœã€‚è¿™é‡Œé¢ä½¿ç”¨ä¸€ä¸ªCompletableFutureä½œä¸ºè¿”å›å€¼ï¼Œä½¿ç”¨èµ·æ¥å°±éå¸¸çµæ´»ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨å®ƒçš„getæ–¹æ³•æ¥è·å–å“åº”æ•°æ®ï¼Œè¿™å°±ç›¸å½“äºåŒæ­¥è°ƒç”¨ï¼›ä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥thenå¼€å¤´çš„ä¸€ç³»åˆ—å¼‚æ­¥æ–¹æ³•ï¼ŒæŒ‡å®šå½“å“åº”è¿”å›çš„æ—¶å€™ï¼Œéœ€è¦æ‰§è¡Œçš„æ“ä½œï¼Œå°±ç­‰åŒäºå¼‚æ­¥è°ƒç”¨ã€‚ç­‰äºï¼Œè¿™æ ·ä¸€ä¸ªæ–¹æ³•æ—¢å¯ä»¥åŒæ­¥è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥å¼‚æ­¥è°ƒç”¨ã€‚</p><p>åœ¨è¿™ä¸ªæ¥å£ä¸­ï¼Œè¯·æ±‚å’Œå“åº”æ•°æ®éƒ½æŠ½è±¡æˆäº†ä¸€ä¸ªCommandç±»ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªç±»æ˜¯å¦‚ä½•å®šä¹‰çš„ï¼š</p><pre><code>public class Command {\n    protected Header header;\n    private byte [] payload;\n    //...\n}\n\npublic class Header {\n    private int requestId;\n    private int version;\n    private int type;\n    // ...\n}\npublic class ResponseHeader extends Header {\n    private int code;\n    private String error;\n    // ...\n}\n</code></pre><p>Commandç±»åŒ…å«ä¸€ä¸ªå‘½ä»¤å¤´Headerå’Œä¸€ä¸ªpayloadå­—èŠ‚æ•°ç»„ã€‚payloadå°±æ˜¯å‘½ä»¤ä¸­è¦ä¼ è¾“çš„æ•°æ®ï¼Œè¿™é‡Œæˆ‘ä»¬è¦æ±‚è¿™ä¸ªæ•°æ®å·²ç»æ˜¯è¢«åºåˆ—åŒ–ä¹‹åç”Ÿæˆçš„å­—èŠ‚æ•°ç»„ã€‚Headerä¸­åŒ…å«ä¸‰ä¸ªå±æ€§ï¼šrequestIdç”¨äºå”¯ä¸€æ ‡è¯†ä¸€ä¸ªè¯·æ±‚å‘½ä»¤ï¼Œåœ¨æˆ‘ä»¬ä½¿ç”¨åŒå·¥æ–¹å¼å¼‚æ­¥æ”¶å‘æ•°æ®çš„æ—¶å€™ï¼Œè¿™ä¸ªrequestIdå¯ä»¥ç”¨äºè¯·æ±‚å’Œå“åº”çš„é…å¯¹å„¿ã€‚æˆ‘ä»¬åœ¨åŠ é¤é‚£èŠ‚è¯¾å®ç°ä¸¤ä¸ªå¤§çˆ·å¯¹è¯çš„ä¾‹å­ä¸­ï¼Œä½¿ç”¨çš„æ˜¯åŒæ ·çš„è®¾è®¡ã€‚</p><p>versionè¿™ä¸ªå±æ€§ç”¨äºæ ‡è¯†è¿™æ¡å‘½ä»¤çš„ç‰ˆæœ¬å·ã€‚typeç”¨äºæ ‡è¯†è¿™æ¡å‘½ä»¤çš„ç±»å‹ï¼Œè¿™ä¸ªç±»å‹ä¸»è¦çš„ç›®çš„æ˜¯ä¸ºäº†èƒ½è®©æ¥æ”¶å‘½ä»¤ä¸€æ–¹æ¥è¯†åˆ«æ”¶åˆ°çš„æ˜¯ä»€ä¹ˆå‘½ä»¤ï¼Œä»¥ä¾¿è·¯ç”±åˆ°å¯¹åº”çš„å¤„ç†ç±»ä¸­å»ã€‚</p><p>å¦å¤–ï¼Œåœ¨è¿”å›çš„å“åº”Headerä¸­ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åŒ…å«ä¸€ä¸ªcodeå­—æ®µå’Œä¸€ä¸ªerrorå­—æ®µï¼Œcodeå­—æ®µä½¿ç”¨ä¸€ä¸ªæ•°å­—è¡¨ç¤ºå“åº”çŠ¶æ€ï¼Œ0ä»£è¡¨æˆåŠŸï¼Œå…¶ä»–å€¼åˆ†åˆ«ä»£è¡¨å„ç§é”™è¯¯ï¼Œè¿™ä¸ªè®¾è®¡å’ŒHTTPåè®®ä¸­çš„StatueCodeæ˜¯ä¸€æ ·çš„ã€‚</p><p>åœ¨è®¾è®¡é€šä¿¡åè®®æ—¶ï¼Œè®©åè®®å…·å¤‡æŒç»­çš„å‡çº§èƒ½åŠ›ï¼Œå¹¶ä¸”ä¿æŒå‘ä¸‹å…¼å®¹æ˜¯éå¸¸é‡è¦çš„ã€‚å› ä¸ºæ‰€æœ‰çš„è½¯ä»¶ï¼Œå”¯ä¸€ä¸å˜çš„å°±æ˜¯å˜åŒ–ï¼Œç”±äºéœ€æ±‚ä¸€ç›´å˜åŒ–ï¼Œä½ ä¸å¯èƒ½ä¿è¯ä¼ è¾“åè®®æ°¸è¿œä¸å˜ï¼Œä¸€æ—¦ä¼ è¾“åè®®å‘ç”Ÿå˜åŒ–ï¼Œä¸ºäº†ç¡®ä¿ä½¿ç”¨è¿™ä¸ªä¼ è¾“åè®®çš„è¿™äº›ç¨‹åºè¿˜èƒ½æ­£å¸¸å·¥ä½œï¼Œæˆ–è€…æ˜¯å‘ä¸‹å…¼å®¹ï¼Œåè®®ä¸­å¿…é¡»æä¾›ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œæ ‡è¯†æ”¶åˆ°çš„è¿™æ¡æ•°æ®ä½¿ç”¨çš„æ˜¯å“ªä¸ªç‰ˆæœ¬çš„åè®®ã€‚</p><p>å‘é€æ–¹åœ¨å‘é€å‘½ä»¤çš„æ—¶å€™éœ€è¦å¸¦ä¸Šè¿™ä¸ªå‘½ä»¤çš„ç‰ˆæœ¬å·ï¼Œæ¥æ”¶æ–¹åœ¨æ”¶åˆ°å‘½ä»¤ä¹‹åå¿…é¡»å…ˆæ£€æŸ¥å‘½ä»¤çš„ç‰ˆæœ¬å·ï¼Œå¦‚æœæ¥æ”¶æ–¹å¯ä»¥æ”¯æŒè¿™ä¸ªç‰ˆæœ¬çš„å‘½ä»¤å°±æ­£å¸¸å¤„ç†ï¼Œå¦åˆ™å°±æ‹’ç»æ¥æ”¶è¿™ä¸ªå‘½ä»¤ï¼Œè¿”å›å“åº”å‘ŠçŸ¥å¯¹æ–¹ï¼šæˆ‘ä¸è®¤è¯†è¿™ä¸ªå‘½ä»¤ã€‚è¿™æ ·æ‰æ˜¯ä¸€ä¸ªå®Œå¤‡çš„ï¼Œå¯æŒç»­çš„å‡çº§çš„é€šä¿¡åè®®ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªç‰ˆæœ¬å·æ˜¯å‘½ä»¤çš„ç‰ˆæœ¬å·ï¼Œæˆ–è€…è¯´æ˜¯ä¼ è¾“åè®®çš„ç‰ˆæœ¬å·ï¼Œå®ƒä¸ç­‰åŒäºç¨‹åºçš„ç‰ˆæœ¬å·ã€‚æˆ‘ä»¬è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¹¶æ²¡æœ‰æ£€æŸ¥å‘½ä»¤ç‰ˆæœ¬å·ï¼Œä½ åœ¨ç”Ÿäº§ç³»ç»Ÿä¸­éœ€è¦è‡ªå·±è¡¥å……è¿™éƒ¨åˆ†é€»è¾‘ã€‚</p><p>ç„¶åæˆ‘ä»¬ç»§ç»­æ¥çœ‹Transportè¿™ä¸ªæ¥å£çš„å®ç°NettyTransportç±»ã€‚è¿™ä¸ªsendæ–¹æ³•çš„å®ç°ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•ï¼Œåœ¨æŠŠè¯·æ±‚æ•°æ®å‘å‡ºå»ä¹‹åå°±è¿”å›äº†ï¼Œå¹¶ä¸ä¼šé˜»å¡å½“å‰è¿™ä¸ªçº¿ç¨‹å»ç­‰å¾…å“åº”è¿”å›æ¥ã€‚æ¥çœ‹ä¸€ä¸‹å®ƒçš„å®ç°ï¼š</p><pre><code>@Override\npublic  CompletableFuture&lt;Command&gt; send(Command request) {\n    // æ„å»ºè¿”å›å€¼\n    CompletableFuture&lt;Command&gt; completableFuture = new CompletableFuture&lt;&gt;();\n    try {\n        // å°†åœ¨é€”è¯·æ±‚æ”¾åˆ°inFlightRequestsä¸­\n        inFlightRequests.put(new ResponseFuture(request.getHeader().getRequestId(), completableFuture));\n        // å‘é€å‘½ä»¤\n        channel.writeAndFlush(request).addListener((ChannelFutureListener) channelFuture -&gt; {\n            // å¤„ç†å‘é€å¤±è´¥çš„æƒ…å†µ\n            if (!channelFuture.isSuccess()) {\n                completableFuture.completeExceptionally(channelFuture.cause());\n                channel.close();\n            }\n        });\n    } catch (Throwable t) {\n        // å¤„ç†å‘é€å¼‚å¸¸\n        inFlightRequests.remove(request.getHeader().getRequestId());\n        completableFuture.completeExceptionally(t);\n    }\n    return completableFuture;\n}\n</code></pre><p>è¿™æ®µä»£ç å®é™…ä¸Šå°±å¹²äº†ä¸¤ä»¶äº‹å„¿ï¼Œç¬¬ä¸€ä»¶äº‹å„¿æ˜¯æŠŠè¯·æ±‚ä¸­çš„requestIdå’Œè¿”å›çš„completableFutureä¸€èµ·ï¼Œæ„å»ºäº†ä¸€ä¸ªResponseFutureå¯¹è±¡ï¼Œç„¶åæŠŠè¿™ä¸ªå¯¹è±¡æ”¾åˆ°äº†inFlightRequestsè¿™ä¸ªå˜é‡ä¸­ã€‚inFlightRequestsä¸­å­˜æ”¾äº†æ‰€æœ‰åœ¨é€”çš„è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯å·²ç»å‘å‡ºäº†è¯·æ±‚ä½†è¿˜æ²¡æœ‰æ”¶åˆ°å“åº”çš„è¿™äº›responseFutureå¯¹è±¡ã€‚</p><p>ç¬¬äºŒä»¶äº‹å„¿å°±æ˜¯è°ƒç”¨nettyå‘é€æ•°æ®çš„æ–¹æ³•ï¼ŒæŠŠè¿™ä¸ªrequestå‘½ä»¤å‘ç»™å¯¹æ–¹ã€‚è¿™é‡Œé¢éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå·²ç»å‘å‡ºå»çš„è¯·æ±‚ï¼Œæœ‰å¯èƒ½ä¼šå› ä¸ºç½‘ç»œè¿æ¥æ–­å¼€æˆ–è€…å¯¹æ–¹è¿›ç¨‹å´©æºƒç­‰å„ç§å¼‚å¸¸æƒ…å†µï¼Œæ°¸è¿œéƒ½æ”¶ä¸åˆ°å“åº”ã€‚é‚£ä¸ºäº†ç¡®ä¿è¿™äº›å­¤å„¿ResponseFutureä¸ä¼šåœ¨å†…å­˜ä¸­è¶Šç§¯è¶Šå¤šï¼Œæˆ‘ä»¬å¿…é¡»è¦æ•è·æ‰€æœ‰çš„å¼‚å¸¸æƒ…å†µï¼Œç»“æŸå¯¹åº”çš„ResponseFutureã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œä¸¤ä¸ªåœ°æ–¹éƒ½åšäº†å¼‚å¸¸å¤„ç†ï¼Œåˆ†åˆ«åº”å¯¹å‘é€å¤±è´¥å’Œå‘é€å¼‚å¸¸ä¸¤ç§æƒ…å†µã€‚</p><p>å³ä½¿æ˜¯æˆ‘ä»¬å¯¹æ‰€æœ‰èƒ½æ•è·çš„å¼‚å¸¸éƒ½åšäº†å¤„ç†ï¼Œä¹Ÿä¸èƒ½ä¿è¯æ‰€æœ‰ResponseFutureéƒ½èƒ½æ­£å¸¸æˆ–è€…å¼‚å¸¸ç»“æŸï¼Œæ¯”å¦‚è¯´ï¼Œç¼–å†™å¯¹ç«¯ç¨‹åºçš„ç¨‹åºå‘˜å†™çš„ä»£ç æœ‰é—®é¢˜ï¼Œæ”¶åˆ°äº†è¯·æ±‚å°±æ˜¯æ²¡ç»™æˆ‘ä»¬è¿”å›å“åº”ï¼Œä¸ºäº†åº”å¯¹è¿™ç§æƒ…å†µï¼Œè¿˜å¿…é¡»æœ‰ä¸€ä¸ªå…œåº•è¶…æ—¶çš„æœºåˆ¶æ¥ä¿è¯æ‰€æœ‰æƒ…å†µä¸‹ResponseFutureéƒ½èƒ½ç»“æŸï¼Œæ— è®ºä»€ä¹ˆæƒ…å†µï¼Œåªè¦è¶…è¿‡äº†è¶…æ—¶æ—¶é—´è¿˜æ²¡æœ‰æ”¶åˆ°å“åº”ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºè¿™ä¸ªResponseFutureå¤±è´¥äº†ï¼Œç»“æŸå¹¶åˆ é™¤å®ƒã€‚è¿™éƒ¨åˆ†ä»£ç åœ¨InFlightRequestsè¿™ä¸ªç±»ä¸­ã€‚</p><p>è¿™é‡Œé¢è¿˜æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„æœ€ä½³å®è·µåˆ†äº«ç»™ä½ ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå¦‚æœæ˜¯åŒæ­¥å‘é€è¯·æ±‚ï¼Œå®¢æˆ·ç«¯éœ€è¦ç­‰å¾…æœåŠ¡ç«¯è¿”å›å“åº”ï¼ŒæœåŠ¡ç«¯å¤„ç†è¿™ä¸ªè¯·æ±‚éœ€è¦èŠ±å¤šé•¿æ—¶é—´ï¼Œå®¢æˆ·ç«¯å°±è¦ç­‰å¤šé•¿æ—¶é—´ã€‚è¿™å®é™…ä¸Šæ˜¯ä¸€ä¸ªå¤©ç„¶çš„èƒŒå‹æœºåˆ¶ï¼ˆBack pressureï¼‰ï¼ŒæœåŠ¡ç«¯å¤„ç†é€Ÿåº¦ä¼šå¤©ç„¶åœ°é™åˆ¶å®¢æˆ·ç«¯è¯·æ±‚çš„é€Ÿåº¦ã€‚</p><p>ä½†æ˜¯åœ¨å¼‚æ­¥è¯·æ±‚ä¸­ï¼Œå®¢æˆ·ç«¯å¼‚æ­¥å‘é€è¯·æ±‚å¹¶ä¸ä¼šç­‰å¾…æœåŠ¡ç«¯ï¼Œç¼ºå°‘äº†è¿™ä¸ªå¤©ç„¶çš„èƒŒå‹æœºåˆ¶ï¼Œå¦‚æœæœåŠ¡ç«¯çš„å¤„ç†é€Ÿåº¦è·Ÿä¸ä¸Šå®¢æˆ·ç«¯çš„è¯·æ±‚é€Ÿåº¦ï¼Œå®¢æˆ·ç«¯çš„å‘é€é€Ÿåº¦ä¹Ÿä¸ä¼šå› æ­¤æ…¢ä¸‹æ¥ï¼Œå°±ä¼šå‡ºç°åœ¨é€”çš„è¯·æ±‚è¶Šæ¥è¶Šå¤šï¼Œè¿™äº›è¯·æ±‚å †ç§¯åœ¨æœåŠ¡ç«¯çš„å†…å­˜ä¸­ï¼Œå†…å­˜æ”¾ä¸ä¸‹å°±ä¼šä¸€ç›´è¯·æ±‚å¤±è´¥ã€‚æœåŠ¡ç«¯å¤„ç†ä¸è¿‡æ¥çš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯è¿˜ä¸€ç›´ä¸åœåœ°å‘è¯·æ±‚æ˜¾ç„¶æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦å¢åŠ ä¸€ä¸ªèƒŒå‹æœºåˆ¶ï¼Œåœ¨æœåŠ¡ç«¯å¤„ç†ä¸è¿‡æ¥çš„æ—¶å€™é™åˆ¶ä¸€ä¸‹å®¢æˆ·ç«¯çš„è¯·æ±‚é€Ÿåº¦ã€‚</p><p>è¿™ä¸ªèƒŒå‹æœºåˆ¶çš„å®ç°ä¹Ÿåœ¨InFlightRequestsç±»ä¸­ï¼Œåœ¨è¿™é‡Œé¢æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªä¿¡å·é‡ï¼š</p><pre><code>private final Semaphore semaphore = new Semaphore(10);\n</code></pre><p>è¿™ä¸ªä¿¡å·é‡æœ‰10ä¸ªè®¸å¯ï¼Œæˆ‘ä»¬æ¯æ¬¡å¾€inFlightRequestä¸­åŠ å…¥ä¸€ä¸ªResponseFutureçš„æ—¶å€™ï¼Œéœ€è¦å…ˆä»ä¿¡å·é‡ä¸­è·å¾—ä¸€ä¸ªè®¸å¯ï¼Œå¦‚æœè¿™æ—¶å€™æ²¡æœ‰è®¸å¯äº†ï¼Œå°±ä¼šé˜»å¡å½“å‰è¿™ä¸ªçº¿ç¨‹ï¼Œä¹Ÿå°±æ˜¯å‘é€è¯·æ±‚çš„è¿™ä¸ªçº¿ç¨‹ï¼Œç›´åˆ°æœ‰äººå½’è¿˜äº†è®¸å¯ï¼Œæ‰èƒ½ç»§ç»­å‘é€è¯·æ±‚ã€‚æˆ‘ä»¬æ¯ç»“æŸä¸€ä¸ªåœ¨é€”è¯·æ±‚ï¼Œå°±å½’è¿˜ä¸€ä¸ªè®¸å¯ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯åœ¨é€”è¯·æ±‚çš„æ•°é‡æœ€å¤šä¸è¶…è¿‡10ä¸ªè¯·æ±‚ï¼Œç§¯å‹åœ¨æœåŠ¡ç«¯æ­£åœ¨å¤„ç†æˆ–è€…å¾…å¤„ç†çš„è¯·æ±‚ä¹Ÿä¸ä¼šè¶…è¿‡10ä¸ªã€‚è¿™æ ·å°±å®ç°äº†ä¸€ä¸ªç®€å•æœ‰æ•ˆçš„èƒŒå‹æœºåˆ¶ã€‚</p><p>æˆ‘ä»¬åœ¨ResponseInvocationè¿™ä¸ªç±»ä¸­å¼‚æ­¥æ¥æ”¶æ‰€æœ‰æœåŠ¡ç«¯è¿”å›çš„å“åº”ï¼Œå¤„ç†é€»è¾‘æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯æ ¹æ®å“åº”å¤´ä¸­çš„requestIdï¼Œå»åœ¨é€”è¯·æ±‚inFlightRequestä¸­æŸ¥æ‰¾å¯¹åº”çš„ResponseFutureï¼Œè®¾ç½®è¿”å›å€¼å¹¶ç»“æŸè¿™ä¸ªResponseFutureå°±å¯ä»¥äº†ã€‚</p><p>ä½¿ç”¨Nettyæ¥æ”¶å‘æ•°æ®è¿™éƒ¨åˆ†ä»£ç ï¼Œæˆ‘éƒ½æ”¾åœ¨äº†com.github.liyue2008.rpc.transport.nettyè¿™ä¸ªåŒ…ä¸­ï¼Œä½ å¯ä»¥è‡ªè¡ŒæŸ¥çœ‹ã€‚</p><h2>å°ç»“</h2><p>è¿™èŠ‚è¯¾æˆ‘ä»¬ä¸€èµ·å®ç°äº†åºåˆ—åŒ–å’Œå¼‚æ­¥ç½‘ç»œé€šä¿¡è¿™ä¸¤éƒ¨åˆ†çš„ä»£ç ï¼Œç”¨åˆ°çš„éƒ½æ˜¯åœ¨è¿›é˜¶ç¯‡ä¸­è®²è¿‡çš„çŸ¥è¯†ã€‚æˆ‘ä»¬åœ¨è®¾è®¡åºåˆ—åŒ–å’Œç½‘ç»œä¼ è¾“è¿™ä¸¤éƒ¨åˆ†å®ç°çš„æ—¶å€™ï¼Œéƒ½é¢„å…ˆå®šä¹‰äº†å¯¹å¤–æä¾›æœåŠ¡çš„æ¥å£ã€‚ä½¿ç”¨æœåŠ¡çš„ä½¿ç”¨æ–¹åªä¾èµ–è¿™ä¸ªæ¥å£ï¼Œè€Œä¸ä¾èµ–è¿™ä¸ªæ¥å£çš„ä»»ä½•å®ç°ã€‚</p><p>è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œè®©æ¥å£çš„ä½¿ç”¨è€…å’Œæ¥å£çš„è°ƒç”¨è€…å……åˆ†è§£è€¦ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥å®‰å…¨åœ°æ›¿æ¢æ¥å£çš„å®ç°ã€‚æŠŠæ¥å£å®šä¹‰çš„å°½é‡é€šç”¨ï¼Œè®©æ¥å£å®šä¹‰ä¸æ¥å£çš„ä½¿ç”¨æ–¹æ— å…³ï¼Œè¿™ä¸ªæ¥å£çš„å®ç°å°±å¾ˆå®¹æ˜“è¢«å¤ç”¨ï¼Œæ¯”å¦‚æˆ‘ä»¬è¿™ä¸ªä¾‹å­ä¸­ç½‘ç»œä¼ è¾“å’Œåºåˆ—åŒ–è¿™ä¸¤éƒ¨åˆ†ä»£ç ï¼Œä¸ä»…å¯ä»¥ç”¨åœ¨è¿™ä¸ªRPCæ¡†æ¶ä¸­ï¼ŒåŒæ ·å¯ä»¥ä¸åšä»»ä½•ä¿®æ”¹å°±ç”¨åœ¨å…¶ä»–çš„ç³»ç»Ÿä¸­ã€‚</p><p>åœ¨è®¾è®¡åè®®çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç»™æ¯ä¸ªå‘½ä»¤éƒ½è®¾è®¡äº†ä¸€ä¸ªå›ºå®šçš„å¤´ï¼Œè¿™æ ·è®¾è®¡çš„å¥½å¤„æ˜¯ï¼Œæˆ‘ä»¬åœ¨è§£æå‘½ä»¤çš„æ—¶å€™å¯ä»¥å…ˆæŠŠå¤´è§£æå‡ºæ¥ï¼Œå°±å¯ä»¥å¯¹å‘½ä»¤è¿›è¡Œç‰ˆæœ¬æ£€æŸ¥ã€è·¯ç”±åˆ†å‘ç­‰é€šç”¨çš„é¢„å¤„ç†å·¥ä½œï¼Œè€Œä¸å¿…æŠŠæ•´ä¸ªå‘½ä»¤éƒ½è§£æå‡ºæ¥ã€‚é‚£ä¸ºäº†åº”å¯¹å˜åŒ–ï¼Œä½¿åè®®å…·æœ‰æŒç»­å‡çº§çš„èƒ½åŠ›ï¼Œå‘½ä»¤ä¸­éœ€è¦æºå¸¦ä¸€ä¸ªåè®®ç‰ˆæœ¬å·ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ”¶åˆ°å‘½ä»¤åæ£€æŸ¥è¿™ä¸ªç‰ˆæœ¬å·ï¼Œç¡®ä¿æ¥æ”¶æ–¹å¯ä»¥æ”¯æŒè¿™ä¸ªç‰ˆæœ¬çš„åè®®ã€‚</p><p>åœ¨å®ç°å¼‚æ­¥ç½‘ç»œä¼ è¾“çš„æ—¶å€™ï¼Œä¸€å®šè¦é…å¥—å®ç°ä¸€ä¸ªèƒŒå‹çš„æœºåˆ¶ï¼Œé¿å…å®¢æˆ·ç«¯è¯·æ±‚é€Ÿåº¦è¿‡å¿«ï¼Œå¯¼è‡´å¤§é‡çš„è¯·æ±‚å¤±è´¥ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>è¯¾åç»™ä½ ç•™ä¸€ä¸ªæ€è€ƒé¢˜ï¼šæ¥åšä¸€ä¸ªåºåˆ—åŒ–çš„æ›¿æ¢å®ç°ã€‚æˆ‘ä»¬è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½¿ç”¨äº†è‡ªå·±å®ç°çš„ä¸“æœ‰çš„åºåˆ—åŒ–å®ç°ï¼Œè¿™äº›å®ç°ç±»éƒ½æ”¾åœ¨äº†com.github.liyue2008.rpc.serialize.implè¿™ä¸ªåŒ…ä¸­ï¼Œä½ éœ€è¦æ¢ä¸€ç§åºåˆ—åŒ–çš„å®ç°æ–¹å¼ï¼Œæ¥æ›¿æ¢æ‰æˆ‘ä»¬è¿™ä¸ªåºåˆ—åŒ–å®ç°ã€‚å…·ä½“å®ç°å¯ä»¥ä½¿ç”¨JSONã€Protobufæˆ–è€…ä»»ä½•ä¸€ç§åºåˆ—åŒ–æ–¹å¼ã€‚</p><p>ä½ å¯ä»¥åˆ é™¤æˆ–è€…æ”¹åŠ¨com.github.liyue2008.rpc.serialize.implè¿™ä¸ªåŒ…ä¸­çš„æ‰€æœ‰ä»£ç ï¼Œä½†æ˜¯ä¸è¦ä¿®æ”¹å…¶ä»–ä»£ç ã€‚è¦æ±‚æ›¿æ¢åï¼Œæˆ‘ä»¬çš„è¿™ä¸ªRPCæ¡†æ¶ä»ç„¶å¯ä»¥æ­£å¸¸è¿è¡Œã€‚æ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„ä»£ç ã€‚</p><p>æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰ä¸€äº›å¯å‘ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p><p></p>","neighbors":{"left":{"article_title":"31 | åŠ¨æ‰‹å®ç°ä¸€ä¸ªç®€å•çš„RPCæ¡†æ¶ï¼ˆä¸€ï¼‰ï¼šåŸç†å’Œç¨‹åºçš„ç»“æ„","id":144320},"right":{"article_title":"33 | åŠ¨æ‰‹å®ç°ä¸€ä¸ªç®€å•çš„RPCæ¡†æ¶ï¼ˆä¸‰ï¼‰ï¼šå®¢æˆ·ç«¯","id":147127}},"comments":[{"had_liked":false,"id":146750,"user_name":"Switch","can_delete":false,"product_type":"c1","uid":1049360,"ip_address":"","ucode":"D8A7F7F6A0BEA9","user_header":"https://static001.geekbang.org/account/avatar/00/10/03/10/26f9f762.jpg","comment_is_top":false,"comment_ctime":1572627919,"is_pvip":false,"replies":[{"id":56824,"content":"èµäº¤ä½œä¸šçš„åŒå­¦ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1572831518,"ip_address":"","comment_id":146750,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"ä½¿ç”¨fastjsonå®ç°ï¼Œæ”¹åŠ¨ä»£ç è§ï¼šhttps:&#47;&#47;gist.github.com&#47;Switch-vov&#47;8cb76aabd1e1addcdbec205cc06d9023","like_count":5},{"had_liked":false,"id":139063,"user_name":"A9","can_delete":false,"product_type":"c1","uid":1053211,"ip_address":"","ucode":"76D07F8EBE8DD0","user_header":"https://static001.geekbang.org/account/avatar/00/10/12/1b/f62722ca.jpg","comment_is_top":false,"comment_ctime":1570538207,"is_pvip":false,"replies":[{"id":53646,"content":"æ„Ÿè°¢ï¼Œå¸Œæœ›ä½ èƒ½é€šè¿‡å­¦ä¹ æœ‰æ”¶è·ï¼Œæœ‰æé«˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1570583544,"ip_address":"","comment_id":139063,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è€å¸ˆçš„è¯¾ç¨‹å¾ˆå¤šåœ°æ–¹è®©äººèŒ…å¡é¡¿å¼€ï¼Œæ„Ÿè§‰ä»é«˜ä¸­æ¯•ä¸šä¹‹åå°±å†ä¹Ÿæ²¡æœ‰è¿‡è¿™ç§æŠ½ä¸å‰¥èŒ§å­¦ä¹ çŸ¥è¯†çš„æ„Ÿè§‰äº†ã€‚æ„Ÿè°¢å¸¦æ¥è¿™ä¹ˆå¥½çš„è¯¾ç¨‹","like_count":5,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469774,"discussion_content":"æ„Ÿè°¢ï¼Œå¸Œæœ›ä½ èƒ½é€šè¿‡å­¦ä¹ æœ‰æ”¶è·ï¼Œæœ‰æé«˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570583544,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139307,"user_name":"A9","can_delete":false,"product_type":"c1","uid":1053211,"ip_address":"","ucode":"76D07F8EBE8DD0","user_header":"https://static001.geekbang.org/account/avatar/00/10/12/1b/f62722ca.jpg","comment_is_top":false,"comment_ctime":1570608547,"is_pvip":false,"replies":[{"id":53805,"content":"ğŸ‘ğŸ‘ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1570671885,"ip_address":"","comment_id":139307,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"ä½¿ç”¨JSONå­—ç¬¦ä¸²è¿›è¡Œåºåˆ—åŒ–ï¼ŒStringçš„åºåˆ—åŒ–ä¿æŒåŸæ ·ã€‚MetaDataå’ŒRpcRequestä¿®æ”¹äº†size parse serializeå‡½æ•°  https:&#47;&#47;gist.github.com&#47;WangYangA9&#47;210ca898525832cba8ddd57ae1ae3d13","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473005,"discussion_content":"èµäº¤ä½œä¸šçš„åŒå­¦ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572831518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1336783,"avatar":"https://static001.geekbang.org/account/avatar/00/14/65/cf/f4305170.jpg","nickname":"ALEX","note":"","ucode":"02031DD9EADFE9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286492,"discussion_content":"json åºåˆ—åŒ–çš„é•¿åº¦åº”è¯¥ä¸éœ€è¦æ”¾åˆ°byteæµä¸­æŠŠ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593185805,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":146015,"user_name":"Tim Zhang","can_delete":false,"product_type":"c1","uid":1214499,"ip_address":"","ucode":"4956AC5FE45EE1","user_header":"https://static001.geekbang.org/account/avatar/00/12/88/23/a0966b4d.jpg","comment_is_top":false,"comment_ctime":1572419675,"is_pvip":false,"replies":[{"id":56666,"content":"è¿™æ ·ä¿å­˜ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå› ä¸ºæˆ‘ä»¬ç”¨äºŒä¸ªmapï¼Œä¹Ÿå°±æ˜¯äºŒå¯¹å„¿kvæ¥ä¿å­˜ä¸‰ç§æ•°æ®ï¼ˆtypeï¼Œ classå’Œserializerï¼‰ï¼Œå¿…ç„¶ç”±ä¸€ç§æ•°æ®è¦é‡å¤ä¿å­˜ä¸€ä¸‹ã€‚\n\nè·å–åºåˆ—åŒ–å®ç°ç±»çš„æ—¶å€™ï¼Œéœ€è¦æ‹¿åˆ°classå¯¹è±¡çš„ç›®çš„æ˜¯æ£€æŸ¥ä¸€ä¸‹serializerå’Œclasså¯¹åº”çš„æ•°æ®ç±»å‹æ˜¯å¦ä¸€è‡´ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1572575944,"ip_address":"","comment_id":146015,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"æœ‰ä¸€ç‚¹ä¸æ˜¯å¾ˆç†è§£ï¼Œä¸ºå•¥typeMapä¸å¯ä»¥æ˜¯(type, serializer)ï¼Œé€šè¿‡typeè·å–åºåˆ—åŒ–å®ç°ç±»ä¸€æ­¥æ“ä½œï¼Œç°åœ¨çœ‹æºç æ˜¯é€šè¿‡typeæ‹¿åˆ°classï¼Œå†classæ‹¿åˆ°serializer","like_count":1,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469891,"discussion_content":"ğŸ‘ğŸ‘ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570671885,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223450,"user_name":"L.","can_delete":false,"product_type":"c1","uid":1181647,"ip_address":"","ucode":"46A2F679C094E8","user_header":"https://static001.geekbang.org/account/avatar/00/12/07/cf/b0d6fe74.jpg","comment_is_top":false,"comment_ctime":1591092044,"is_pvip":false,"replies":[{"id":82374,"content":"è¿™éƒ¨åˆ†ä»£ç åœ¨ï¼šNettyTransport#send æ–¹æ³•ä¸­ï¼Œä½ å¯ä»¥çœ‹ä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1591152836,"ip_address":"","comment_id":223450,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"å°ç™½é—®ä¸€ä¸‹ï¼Œsendæ–¹æ³•çš„è¿”å›å€¼æ˜¯æ€ä¹ˆåˆ°completableFutureå¯¹è±¡é‡Œçš„ï¼Œæˆ‘æ²¡çœ‹åˆ°èµ‹å€¼æ“ä½œå•Šï¼Œæ±‚è§£ã€‚ã€‚ã€‚","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472671,"discussion_content":"è¿™æ ·ä¿å­˜ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå› ä¸ºæˆ‘ä»¬ç”¨äºŒä¸ªmapï¼Œä¹Ÿå°±æ˜¯äºŒå¯¹å„¿kvæ¥ä¿å­˜ä¸‰ç§æ•°æ®ï¼ˆtypeï¼Œ classå’Œserializerï¼‰ï¼Œå¿…ç„¶ç”±ä¸€ç§æ•°æ®è¦é‡å¤ä¿å­˜ä¸€ä¸‹ã€‚\n\nè·å–åºåˆ—åŒ–å®ç°ç±»çš„æ—¶å€™ï¼Œéœ€è¦æ‹¿åˆ°classå¯¹è±¡çš„ç›®çš„æ˜¯æ£€æŸ¥ä¸€ä¸‹serializerå’Œclasså¯¹åº”çš„æ•°æ®ç±»å‹æ˜¯å¦ä¸€è‡´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572575944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142517,"user_name":"æ‹’ç»","can_delete":false,"product_type":"c1","uid":1335155,"ip_address":"","ucode":"CB0264C4D3FE17","user_header":"https://static001.geekbang.org/account/avatar/00/14/5f/73/bb3dc468.jpg","comment_is_top":false,"comment_ctime":1571385404,"is_pvip":false,"replies":[{"id":55228,"content":"æ˜¯è¿™æ ·çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1571619188,"ip_address":"","comment_id":142517,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"æœ‰ç‚¹ä¸ç†è§£ï¼ŒServerå¯åŠ¨æ—¶ï¼Œå‘NameServiceæ³¨å†Œæ¥å£æ—¶ï¼Œåºåˆ—åŒ–å¯¹è±¡æ˜¯MetadataSerializerï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497132,"discussion_content":"è¿™éƒ¨åˆ†ä»£ç åœ¨ï¼šNettyTransport#send æ–¹æ³•ä¸­ï¼Œä½ å¯ä»¥çœ‹ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591152836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1645430,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKiauonyMORA2s43W7mogGDH4WYjW0gBJtYmUa9icTB6aMPGqibicEKlLoQmLKLWEctwHzthbTZkKR20w/132","nickname":"Spring4J","note":"","ucode":"06F056085A2564","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282486,"discussion_content":"è¿™é‡Œè¿˜åªæ˜¯å‘é€è¯·æ±‚ï¼Œsendæ–¹æ³•çš„è¿”å›å€¼completableFutureå°è£…çš„æ˜¯å“åº”å€¼ã€‚æ‰€ä»¥ï¼Œåªæœ‰åœ¨æ”¶åˆ°å“åº”çš„æ—¶å€™ï¼Œæ‰ä¼šå¯¹completableFutureè¿›è¡Œèµ‹å€¼ï¼Œä¹Ÿå°±æ˜¯åœ¨ResponseInvocation#channelRead0æ–¹æ³•ä¸­","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1591978997,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139446,"user_name":"å—å±±","can_delete":false,"product_type":"c1","uid":1119593,"ip_address":"","ucode":"94656FE4A6C378","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/69/187b9968.jpg","comment_is_top":false,"comment_ctime":1570636923,"is_pvip":false,"replies":[{"id":53807,"content":"æ˜¯è¿™æ ·çš„ï¼Œä¸€å®šè¦åŠ¨æ‰‹å†™ä»£ç ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1570672124,"ip_address":"","comment_id":139446,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"åŠ¨æ‰‹åŠ¨æ‰‹ï¼Œä¸€å®šè¦åŠ¨æ‰‹ï¼Œnettyä¸ç†Ÿï¼Œçœ‹èµ·æ¥åƒåŠ›ï¼Œä½†ä¹Ÿæ”¶è·æ»¡æ»¡ï¼Œæ¯æ˜ç™½ä¸€ç‚¹éƒ½æ˜¯è¿›æ­¥ï½ï½ï½","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471158,"discussion_content":"æ˜¯è¿™æ ·çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571619188,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139128,"user_name":"Better me","can_delete":false,"product_type":"c1","uid":1261959,"ip_address":"","ucode":"CADF08D357489A","user_header":"https://static001.geekbang.org/account/avatar/00/13/41/87/46d7e1c2.jpg","comment_is_top":false,"comment_ctime":1570551308,"is_pvip":true,"replies":[{"id":53643,"content":"è¿™é‡Œé¢çš„è¿”å›å€¼ä¸æ˜¯çŠ¶æ€ç ï¼Œè€Œæ˜¯RPCè°ƒç”¨çš„è¿”å›å€¼ï¼Œæ¯”å¦‚æˆ‘ä»¬è¿™ä¸ªHelloServiceä¸­ï¼Œè¿™ä¸ªè¿”å›å€¼å°±æ˜¯è°ƒç”¨HelloServiceImpl.hello()æ–¹æ³•çš„è¿”å›å€¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1570583407,"ip_address":"","comment_id":139128,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"ResponseInvocation è¿™ä¸ªç±»æ˜¯ç›¸å½“äºä¸€ä¸ªå›è°ƒç±»çš„å½¢å¼å§ã€‚â€œå°±æ˜¯æ ¹æ®å“åº”å¤´ä¸­çš„ requestIdï¼Œå»åœ¨é€”è¯·æ±‚ inFlightRequest ä¸­æŸ¥æ‰¾å¯¹åº”çš„ ResponseFutureï¼Œè®¾ç½®è¿”å›å€¼å¹¶ç»“æŸè¿™ä¸ª ResponseFuture å°±å¯ä»¥äº†ã€‚â€è¿™é‡Œçš„è®¾ç½®è¿”å›å€¼æ˜¯æŒ‡codeç å½¢å¼å—ï¼Ÿè¿™é‡Œçš„ä½œç”¨æ˜¯è¿˜éœ€è¦åœ¨è¿”å›ç»™æœåŠ¡ç«¯ç¡®è®¤æ”¶åˆ°å—ï¼Ÿè€å¸ˆæœ‰ç©ºçœ‹çœ‹","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469948,"discussion_content":"æ˜¯è¿™æ ·çš„ï¼Œä¸€å®šè¦åŠ¨æ‰‹å†™ä»£ç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570672124,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139586,"user_name":"æ¯å¤©æ™’ç™½ç‰™","can_delete":false,"product_type":"c1","uid":1004698,"ip_address":"","ucode":"A1B102CD933DEA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/54/9a/76c0af70.jpg","comment_is_top":false,"comment_ctime":1570685477,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"ä»Šæ—¥å¾—åˆ°\nå…³é”®å­—:èƒŒå‹æœºåˆ¶(back pressure)\nå½“å®¢æˆ·ç«¯åŒæ­¥è¯·æ±‚æœåŠ¡ç«¯æ—¶ï¼Œå®¢æˆ·ç«¯éœ€è¦ç­‰å¾…æœåŠ¡ç«¯å¤„ç†å®Œè¯·æ±‚å¹¶è¿”å›å“åº”ï¼Œåœ¨æ­¤æœŸé—´ï¼Œå®¢æˆ·ç«¯éœ€è¦ç­‰å¾…ï¼Œè¿™æ˜¯ä¸€ç§å¤©ç„¶èƒŒå‹æœºåˆ¶\n\né‚£æ¢æˆå¼‚æ­¥è¯·æ±‚å‘¢ï¼Ÿ\nå®¢æˆ·ç«¯å¼‚æ­¥è¯·æ±‚æœåŠ¡ç«¯æ—¶ï¼Œä¸ä¼šç­‰å¾…æœåŠ¡ç«¯å¤„ç†è¯·æ±‚ï¼Œè¿™æ ·å°±ä¸§å¤±äº†åŒæ­¥è¯·æ±‚çš„é‚£ç§å¤©ç„¶èƒŒå‹ã€‚\nå¦‚æœæœåŠ¡å™¨å¤„ç†è¯·æ±‚çš„é€Ÿåº¦æ…¢äºå®¢æˆ·ç«¯å‘é€è¯·æ±‚çš„é€Ÿåº¦ï¼Œå°±ä¼šå¯¼è‡´InFlightRequest(åœ¨é€”è¯·æ±‚ï¼Œå³è¿˜æœªè¢«æœåŠ¡ç«¯å¤„ç†æˆ–å“åº”çš„è¯·æ±‚)è¶Šæ¥è¶Šå¤šï¼Œå¦‚æœè¿™äº›åœ¨é€”è¯·æ±‚ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå°±å¯èƒ½å¯¼è‡´å†…å­˜é£™å‡ï¼Œè¿›è€Œå¼•å‘é¢‘ç¹FGCï¼Œä¹‹å‰çº¿ä¸Šé‡åˆ°è¿‡å‡ æ¬¡FGCçš„æ¡ˆä¾‹ã€åœ¨å…¬ä¼—å·:æ¯å¤©æ™’ç™½ç‰™ ä¸­åˆ†äº«è¿‡ä¸€ä¸ªvertx-redis-clientå®¢æˆ·ç«¯çš„æ¡ˆä¾‹ https:&#47;&#47;mp.weixin.qq.com&#47;s&#47;fWsy26VeUvb8yPKON3OTmAï¼Œåé¢ä¹Ÿé‡åˆ°rpcæ¡†æ¶ä¸­ä¹Ÿå‡ºç°ç±»ä¼¼çš„é—®é¢˜ã€‘éƒ½æ˜¯å› ä¸ºè¿™äº›åœ¨é€”è¯·æ±‚ä¿å­˜åœ¨ä¸€ä¸ªæ— ç•Œé˜Ÿåˆ—ä¸­ï¼Œè¯·æ±‚å¾—ä¸åˆ°å¤„ç†ï¼Œå¯¼è‡´å†…å­˜å ç”¨è¿‡é«˜ã€‚\n\næƒ³è¦é¿å…ä¸Šé¢çš„æƒ…å†µï¼Œéœ€è¦æˆ‘ä»¬ä¸»åŠ¨å¼•å…¥èƒŒå‹æœºåˆ¶ï¼Œå³åœ¨æœåŠ¡ç«¯å¤„ç†ä¸è¿‡æ¥çš„æƒ…å†µè¦é™åˆ¶å®¢æˆ·ç«¯çš„è¯·æ±‚é€Ÿç‡ï¼Œå…·ä½“çš„åšæ³•åº”è¯¥æœ‰å¾ˆå¤šï¼Œæˆ‘åˆ—ä¸¾å‡ ä¸ª\n1.æŠŠæ— ç•Œé˜Ÿåˆ—æ¢æˆæœ‰ç•Œé˜Ÿåˆ—ï¼Œé˜Ÿåˆ—æ»¡äº†å°±ä¸è®©æ·»åŠ äº†\n2.åœ¨å¾€é˜Ÿåˆ—ä¸­æ·»åŠ è¯·æ±‚çš„æ—¶å€™è·å–è®¸å¯ï¼ŒæœåŠ¡ç«¯å¤„ç†å®Œè¯·æ±‚é‡Šæ”¾è®¸å¯ï¼Œå¦‚æœè®¸å¯æ²¡äº†å°±é˜»å¡å®¢æˆ·ç«¯çš„è¯·æ±‚æˆ–è¿”å›å¼‚å¸¸\nâ€”â€”æ¯å¤©æ™’ç™½ç‰™\n","like_count":27,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469803,"discussion_content":"è¿™é‡Œé¢çš„è¿”å›å€¼ä¸æ˜¯çŠ¶æ€ç ï¼Œè€Œæ˜¯RPCè°ƒç”¨çš„è¿”å›å€¼ï¼Œæ¯”å¦‚æˆ‘ä»¬è¿™ä¸ªHelloServiceä¸­ï¼Œè¿™ä¸ªè¿”å›å€¼å°±æ˜¯è°ƒç”¨HelloServiceImpl.hello()æ–¹æ³•çš„è¿”å›å€¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570583407,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1261959,"avatar":"https://static001.geekbang.org/account/avatar/00/13/41/87/46d7e1c2.jpg","nickname":"Better me","note":"","ucode":"CADF08D357489A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":31699,"discussion_content":"è€å¸ˆè¿™é‡Œè¿˜æœ‰ä¸€ç‚¹ç–‘é—®ï¼Œæˆ‘æ¥è§¦åˆ°çš„è¿œç¨‹è°ƒç”¨æ˜¯æ¶ˆè´¹è€…è¿™è¾¹è°ƒç”¨æä¾›è€…çš„æ¥å£ï¼Œçœ‹å®Œæ–‡ç« è¿™é‡Œæˆ‘ç†è§£çš„æ˜¯æ¶ˆè´¹è€…è¿™è¾¹æ˜¯å®¢æˆ·ç«¯ï¼Œè€Œæä¾›è€…æ˜¯æœåŠ¡ç«¯ä¹Ÿå°±æ˜¯æœ€åå…·ä½“è°ƒç”¨HelloServiceImpl.hello()æ–¹æ³•å¹¶è¿”å›æœ€åçš„å“åº”æ•°æ®åˆ°æ¶ˆè´¹è€…ã€‚çœ‹è€å¸ˆçš„å›å¤åº”è¯¥æ˜¯è®²åˆ°æ¶ˆè´¹è€…ä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯è¿™è¾¹æ¥å—åˆ°æä¾›è€…çš„å“åº”æ•°æ®åœ¨å°†å“åº”æ•°æ®è®¾ç½®åˆ°è¿”å›å€¼ä¸­è¿”å›åˆ°è¿œç¨‹è°ƒç”¨æ–¹æ³•ï¼Œç„¶åå†åˆ é™¤å“åº”çš„è¯·æ±‚idï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯è¿™æ ·ç†è§£ï¼Œæœ›è€å¸ˆè§£æƒ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570948059,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":208952,"user_name":"Geek_fd81b3","can_delete":false,"product_type":"c1","uid":1899429,"ip_address":"","ucode":"5BF9C3C68B8178","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIE3Vw0icEQic96rOykFD2bUo6KotVx53gvtG0CDe8tUKC3pNXxIQYMuyPyrgL06Zn32UWtEXTIVWMw/132","comment_is_top":false,"comment_ctime":1587473073,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œï¼ŒçœŸæ˜¯è‰¯å¿ƒè¯¾ç¨‹ï¼Œèµã€‚","like_count":2,"discussions":[{"author":{"id":1230698,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIxrv7XYG5K02Bs7icZzRMnYm0MEq2TkgS2HicWU2od56mbjAc2c3TuXkTwssdEoANNCI8mVW0uHn7g/132","nickname":"Yanyuyu","note":"","ucode":"33854D923ED2C0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":173279,"discussion_content":"æ•¢é—®æœ‰æ²¡æœ‰äº†è§£è¿‡grpcçš„èƒŒå‹æœºåˆ¶ï¼Œè®¨è®ºä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581843893,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1004698,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/54/9a/76c0af70.jpg","nickname":"æ¯å¤©æ™’ç™½ç‰™","note":"","ucode":"A1B102CD933DEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1230698,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIxrv7XYG5K02Bs7icZzRMnYm0MEq2TkgS2HicWU2od56mbjAc2c3TuXkTwssdEoANNCI8mVW0uHn7g/132","nickname":"Yanyuyu","note":"","ucode":"33854D923ED2C0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":173327,"discussion_content":"grpcè¿˜æ²¡æ¥è§¦è¿‡ï¼Œä¹Ÿæ²¡å»ç ”ç©¶ï¼Œç­‰äº†è§£ä¸€äº›ç€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581847831,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":173279,"ip_address":"","group_id":0},"score":173327,"extra":""}]}]},{"had_liked":false,"id":146750,"user_name":"Switch","can_delete":false,"product_type":"c1","uid":1049360,"ip_address":"","ucode":"D8A7F7F6A0BEA9","user_header":"https://static001.geekbang.org/account/avatar/00/10/03/10/26f9f762.jpg","comment_is_top":false,"comment_ctime":1572627919,"is_pvip":false,"replies":[{"id":56824,"content":"èµäº¤ä½œä¸šçš„åŒå­¦ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1572831518,"ip_address":"","comment_id":146750,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"ä½¿ç”¨fastjsonå®ç°ï¼Œæ”¹åŠ¨ä»£ç è§ï¼šhttps:&#47;&#47;gist.github.com&#47;Switch-vov&#47;8cb76aabd1e1addcdbec205cc06d9023","like_count":5,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473005,"discussion_content":"èµäº¤ä½œä¸šçš„åŒå­¦ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572831518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1336783,"avatar":"https://static001.geekbang.org/account/avatar/00/14/65/cf/f4305170.jpg","nickname":"ALEX","note":"","ucode":"02031DD9EADFE9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286492,"discussion_content":"json åºåˆ—åŒ–çš„é•¿åº¦åº”è¯¥ä¸éœ€è¦æ”¾åˆ°byteæµä¸­æŠŠ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593185805,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139063,"user_name":"A9","can_delete":false,"product_type":"c1","uid":1053211,"ip_address":"","ucode":"76D07F8EBE8DD0","user_header":"https://static001.geekbang.org/account/avatar/00/10/12/1b/f62722ca.jpg","comment_is_top":false,"comment_ctime":1570538207,"is_pvip":false,"replies":[{"id":53646,"content":"æ„Ÿè°¢ï¼Œå¸Œæœ›ä½ èƒ½é€šè¿‡å­¦ä¹ æœ‰æ”¶è·ï¼Œæœ‰æé«˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1570583544,"ip_address":"","comment_id":139063,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è€å¸ˆçš„è¯¾ç¨‹å¾ˆå¤šåœ°æ–¹è®©äººèŒ…å¡é¡¿å¼€ï¼Œæ„Ÿè§‰ä»é«˜ä¸­æ¯•ä¸šä¹‹åå°±å†ä¹Ÿæ²¡æœ‰è¿‡è¿™ç§æŠ½ä¸å‰¥èŒ§å­¦ä¹ çŸ¥è¯†çš„æ„Ÿè§‰äº†ã€‚æ„Ÿè°¢å¸¦æ¥è¿™ä¹ˆå¥½çš„è¯¾ç¨‹","like_count":5,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469774,"discussion_content":"æ„Ÿè°¢ï¼Œå¸Œæœ›ä½ èƒ½é€šè¿‡å­¦ä¹ æœ‰æ”¶è·ï¼Œæœ‰æé«˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570583544,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139307,"user_name":"A9","can_delete":false,"product_type":"c1","uid":1053211,"ip_address":"","ucode":"76D07F8EBE8DD0","user_header":"https://static001.geekbang.org/account/avatar/00/10/12/1b/f62722ca.jpg","comment_is_top":false,"comment_ctime":1570608547,"is_pvip":false,"replies":[{"id":53805,"content":"ğŸ‘ğŸ‘ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1570671885,"ip_address":"","comment_id":139307,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"ä½¿ç”¨JSONå­—ç¬¦ä¸²è¿›è¡Œåºåˆ—åŒ–ï¼ŒStringçš„åºåˆ—åŒ–ä¿æŒåŸæ ·ã€‚MetaDataå’ŒRpcRequestä¿®æ”¹äº†size parse serializeå‡½æ•°  https:&#47;&#47;gist.github.com&#47;WangYangA9&#47;210ca898525832cba8ddd57ae1ae3d13","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469891,"discussion_content":"ğŸ‘ğŸ‘ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570671885,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":146015,"user_name":"Tim Zhang","can_delete":false,"product_type":"c1","uid":1214499,"ip_address":"","ucode":"4956AC5FE45EE1","user_header":"https://static001.geekbang.org/account/avatar/00/12/88/23/a0966b4d.jpg","comment_is_top":false,"comment_ctime":1572419675,"is_pvip":false,"replies":[{"id":56666,"content":"è¿™æ ·ä¿å­˜ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå› ä¸ºæˆ‘ä»¬ç”¨äºŒä¸ªmapï¼Œä¹Ÿå°±æ˜¯äºŒå¯¹å„¿kvæ¥ä¿å­˜ä¸‰ç§æ•°æ®ï¼ˆtypeï¼Œ classå’Œserializerï¼‰ï¼Œå¿…ç„¶ç”±ä¸€ç§æ•°æ®è¦é‡å¤ä¿å­˜ä¸€ä¸‹ã€‚\n\nè·å–åºåˆ—åŒ–å®ç°ç±»çš„æ—¶å€™ï¼Œéœ€è¦æ‹¿åˆ°classå¯¹è±¡çš„ç›®çš„æ˜¯æ£€æŸ¥ä¸€ä¸‹serializerå’Œclasså¯¹åº”çš„æ•°æ®ç±»å‹æ˜¯å¦ä¸€è‡´ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1572575944,"ip_address":"","comment_id":146015,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"æœ‰ä¸€ç‚¹ä¸æ˜¯å¾ˆç†è§£ï¼Œä¸ºå•¥typeMapä¸å¯ä»¥æ˜¯(type, serializer)ï¼Œé€šè¿‡typeè·å–åºåˆ—åŒ–å®ç°ç±»ä¸€æ­¥æ“ä½œï¼Œç°åœ¨çœ‹æºç æ˜¯é€šè¿‡typeæ‹¿åˆ°classï¼Œå†classæ‹¿åˆ°serializer","like_count":1,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472671,"discussion_content":"è¿™æ ·ä¿å­˜ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå› ä¸ºæˆ‘ä»¬ç”¨äºŒä¸ªmapï¼Œä¹Ÿå°±æ˜¯äºŒå¯¹å„¿kvæ¥ä¿å­˜ä¸‰ç§æ•°æ®ï¼ˆtypeï¼Œ classå’Œserializerï¼‰ï¼Œå¿…ç„¶ç”±ä¸€ç§æ•°æ®è¦é‡å¤ä¿å­˜ä¸€ä¸‹ã€‚\n\nè·å–åºåˆ—åŒ–å®ç°ç±»çš„æ—¶å€™ï¼Œéœ€è¦æ‹¿åˆ°classå¯¹è±¡çš„ç›®çš„æ˜¯æ£€æŸ¥ä¸€ä¸‹serializerå’Œclasså¯¹åº”çš„æ•°æ®ç±»å‹æ˜¯å¦ä¸€è‡´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572575944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223450,"user_name":"L.","can_delete":false,"product_type":"c1","uid":1181647,"ip_address":"","ucode":"46A2F679C094E8","user_header":"https://static001.geekbang.org/account/avatar/00/12/07/cf/b0d6fe74.jpg","comment_is_top":false,"comment_ctime":1591092044,"is_pvip":false,"replies":[{"id":82374,"content":"è¿™éƒ¨åˆ†ä»£ç åœ¨ï¼šNettyTransport#send æ–¹æ³•ä¸­ï¼Œä½ å¯ä»¥çœ‹ä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1591152836,"ip_address":"","comment_id":223450,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"å°ç™½é—®ä¸€ä¸‹ï¼Œsendæ–¹æ³•çš„è¿”å›å€¼æ˜¯æ€ä¹ˆåˆ°completableFutureå¯¹è±¡é‡Œçš„ï¼Œæˆ‘æ²¡çœ‹åˆ°èµ‹å€¼æ“ä½œå•Šï¼Œæ±‚è§£ã€‚ã€‚ã€‚","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497132,"discussion_content":"è¿™éƒ¨åˆ†ä»£ç åœ¨ï¼šNettyTransport#send æ–¹æ³•ä¸­ï¼Œä½ å¯ä»¥çœ‹ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591152836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1645430,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKiauonyMORA2s43W7mogGDH4WYjW0gBJtYmUa9icTB6aMPGqibicEKlLoQmLKLWEctwHzthbTZkKR20w/132","nickname":"Spring4J","note":"","ucode":"06F056085A2564","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282486,"discussion_content":"è¿™é‡Œè¿˜åªæ˜¯å‘é€è¯·æ±‚ï¼Œsendæ–¹æ³•çš„è¿”å›å€¼completableFutureå°è£…çš„æ˜¯å“åº”å€¼ã€‚æ‰€ä»¥ï¼Œåªæœ‰åœ¨æ”¶åˆ°å“åº”çš„æ—¶å€™ï¼Œæ‰ä¼šå¯¹completableFutureè¿›è¡Œèµ‹å€¼ï¼Œä¹Ÿå°±æ˜¯åœ¨ResponseInvocation#channelRead0æ–¹æ³•ä¸­","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1591978997,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142517,"user_name":"æ‹’ç»","can_delete":false,"product_type":"c1","uid":1335155,"ip_address":"","ucode":"CB0264C4D3FE17","user_header":"https://static001.geekbang.org/account/avatar/00/14/5f/73/bb3dc468.jpg","comment_is_top":false,"comment_ctime":1571385404,"is_pvip":false,"replies":[{"id":55228,"content":"æ˜¯è¿™æ ·çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1571619188,"ip_address":"","comment_id":142517,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"æœ‰ç‚¹ä¸ç†è§£ï¼ŒServerå¯åŠ¨æ—¶ï¼Œå‘NameServiceæ³¨å†Œæ¥å£æ—¶ï¼Œåºåˆ—åŒ–å¯¹è±¡æ˜¯MetadataSerializerï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471158,"discussion_content":"æ˜¯è¿™æ ·çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571619188,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139446,"user_name":"å—å±±","can_delete":false,"product_type":"c1","uid":1119593,"ip_address":"","ucode":"94656FE4A6C378","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/69/187b9968.jpg","comment_is_top":false,"comment_ctime":1570636923,"is_pvip":false,"replies":[{"id":53807,"content":"æ˜¯è¿™æ ·çš„ï¼Œä¸€å®šè¦åŠ¨æ‰‹å†™ä»£ç ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1570672124,"ip_address":"","comment_id":139446,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"åŠ¨æ‰‹åŠ¨æ‰‹ï¼Œä¸€å®šè¦åŠ¨æ‰‹ï¼Œnettyä¸ç†Ÿï¼Œçœ‹èµ·æ¥åƒåŠ›ï¼Œä½†ä¹Ÿæ”¶è·æ»¡æ»¡ï¼Œæ¯æ˜ç™½ä¸€ç‚¹éƒ½æ˜¯è¿›æ­¥ï½ï½ï½","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469948,"discussion_content":"æ˜¯è¿™æ ·çš„ï¼Œä¸€å®šè¦åŠ¨æ‰‹å†™ä»£ç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570672124,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139128,"user_name":"Better me","can_delete":false,"product_type":"c1","uid":1261959,"ip_address":"","ucode":"CADF08D357489A","user_header":"https://static001.geekbang.org/account/avatar/00/13/41/87/46d7e1c2.jpg","comment_is_top":false,"comment_ctime":1570551308,"is_pvip":true,"replies":[{"id":53643,"content":"è¿™é‡Œé¢çš„è¿”å›å€¼ä¸æ˜¯çŠ¶æ€ç ï¼Œè€Œæ˜¯RPCè°ƒç”¨çš„è¿”å›å€¼ï¼Œæ¯”å¦‚æˆ‘ä»¬è¿™ä¸ªHelloServiceä¸­ï¼Œè¿™ä¸ªè¿”å›å€¼å°±æ˜¯è°ƒç”¨HelloServiceImpl.hello()æ–¹æ³•çš„è¿”å›å€¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1570583407,"ip_address":"","comment_id":139128,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"ResponseInvocation è¿™ä¸ªç±»æ˜¯ç›¸å½“äºä¸€ä¸ªå›è°ƒç±»çš„å½¢å¼å§ã€‚â€œå°±æ˜¯æ ¹æ®å“åº”å¤´ä¸­çš„ requestIdï¼Œå»åœ¨é€”è¯·æ±‚ inFlightRequest ä¸­æŸ¥æ‰¾å¯¹åº”çš„ ResponseFutureï¼Œè®¾ç½®è¿”å›å€¼å¹¶ç»“æŸè¿™ä¸ª ResponseFuture å°±å¯ä»¥äº†ã€‚â€è¿™é‡Œçš„è®¾ç½®è¿”å›å€¼æ˜¯æŒ‡codeç å½¢å¼å—ï¼Ÿè¿™é‡Œçš„ä½œç”¨æ˜¯è¿˜éœ€è¦åœ¨è¿”å›ç»™æœåŠ¡ç«¯ç¡®è®¤æ”¶åˆ°å—ï¼Ÿè€å¸ˆæœ‰ç©ºçœ‹çœ‹","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469803,"discussion_content":"è¿™é‡Œé¢çš„è¿”å›å€¼ä¸æ˜¯çŠ¶æ€ç ï¼Œè€Œæ˜¯RPCè°ƒç”¨çš„è¿”å›å€¼ï¼Œæ¯”å¦‚æˆ‘ä»¬è¿™ä¸ªHelloServiceä¸­ï¼Œè¿™ä¸ªè¿”å›å€¼å°±æ˜¯è°ƒç”¨HelloServiceImpl.hello()æ–¹æ³•çš„è¿”å›å€¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570583407,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1261959,"avatar":"https://static001.geekbang.org/account/avatar/00/13/41/87/46d7e1c2.jpg","nickname":"Better me","note":"","ucode":"CADF08D357489A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":31699,"discussion_content":"è€å¸ˆè¿™é‡Œè¿˜æœ‰ä¸€ç‚¹ç–‘é—®ï¼Œæˆ‘æ¥è§¦åˆ°çš„è¿œç¨‹è°ƒç”¨æ˜¯æ¶ˆè´¹è€…è¿™è¾¹è°ƒç”¨æä¾›è€…çš„æ¥å£ï¼Œçœ‹å®Œæ–‡ç« è¿™é‡Œæˆ‘ç†è§£çš„æ˜¯æ¶ˆè´¹è€…è¿™è¾¹æ˜¯å®¢æˆ·ç«¯ï¼Œè€Œæä¾›è€…æ˜¯æœåŠ¡ç«¯ä¹Ÿå°±æ˜¯æœ€åå…·ä½“è°ƒç”¨HelloServiceImpl.hello()æ–¹æ³•å¹¶è¿”å›æœ€åçš„å“åº”æ•°æ®åˆ°æ¶ˆè´¹è€…ã€‚çœ‹è€å¸ˆçš„å›å¤åº”è¯¥æ˜¯è®²åˆ°æ¶ˆè´¹è€…ä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯è¿™è¾¹æ¥å—åˆ°æä¾›è€…çš„å“åº”æ•°æ®åœ¨å°†å“åº”æ•°æ®è®¾ç½®åˆ°è¿”å›å€¼ä¸­è¿”å›åˆ°è¿œç¨‹è°ƒç”¨æ–¹æ³•ï¼Œç„¶åå†åˆ é™¤å“åº”çš„è¯·æ±‚idï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯è¿™æ ·ç†è§£ï¼Œæœ›è€å¸ˆè§£æƒ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570948059,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139586,"user_name":"æ¯å¤©æ™’ç™½ç‰™","can_delete":false,"product_type":"c1","uid":1004698,"ip_address":"","ucode":"A1B102CD933DEA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/54/9a/76c0af70.jpg","comment_is_top":false,"comment_ctime":1570685477,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"ä»Šæ—¥å¾—åˆ°\nå…³é”®å­—:èƒŒå‹æœºåˆ¶(back pressure)\nå½“å®¢æˆ·ç«¯åŒæ­¥è¯·æ±‚æœåŠ¡ç«¯æ—¶ï¼Œå®¢æˆ·ç«¯éœ€è¦ç­‰å¾…æœåŠ¡ç«¯å¤„ç†å®Œè¯·æ±‚å¹¶è¿”å›å“åº”ï¼Œåœ¨æ­¤æœŸé—´ï¼Œå®¢æˆ·ç«¯éœ€è¦ç­‰å¾…ï¼Œè¿™æ˜¯ä¸€ç§å¤©ç„¶èƒŒå‹æœºåˆ¶\n\né‚£æ¢æˆå¼‚æ­¥è¯·æ±‚å‘¢ï¼Ÿ\nå®¢æˆ·ç«¯å¼‚æ­¥è¯·æ±‚æœåŠ¡ç«¯æ—¶ï¼Œä¸ä¼šç­‰å¾…æœåŠ¡ç«¯å¤„ç†è¯·æ±‚ï¼Œè¿™æ ·å°±ä¸§å¤±äº†åŒæ­¥è¯·æ±‚çš„é‚£ç§å¤©ç„¶èƒŒå‹ã€‚\nå¦‚æœæœåŠ¡å™¨å¤„ç†è¯·æ±‚çš„é€Ÿåº¦æ…¢äºå®¢æˆ·ç«¯å‘é€è¯·æ±‚çš„é€Ÿåº¦ï¼Œå°±ä¼šå¯¼è‡´InFlightRequest(åœ¨é€”è¯·æ±‚ï¼Œå³è¿˜æœªè¢«æœåŠ¡ç«¯å¤„ç†æˆ–å“åº”çš„è¯·æ±‚)è¶Šæ¥è¶Šå¤šï¼Œå¦‚æœè¿™äº›åœ¨é€”è¯·æ±‚ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå°±å¯èƒ½å¯¼è‡´å†…å­˜é£™å‡ï¼Œè¿›è€Œå¼•å‘é¢‘ç¹FGCï¼Œä¹‹å‰çº¿ä¸Šé‡åˆ°è¿‡å‡ æ¬¡FGCçš„æ¡ˆä¾‹ã€åœ¨å…¬ä¼—å·:æ¯å¤©æ™’ç™½ç‰™ ä¸­åˆ†äº«è¿‡ä¸€ä¸ªvertx-redis-clientå®¢æˆ·ç«¯çš„æ¡ˆä¾‹ https:&#47;&#47;mp.weixin.qq.com&#47;s&#47;fWsy26VeUvb8yPKON3OTmAï¼Œåé¢ä¹Ÿé‡åˆ°rpcæ¡†æ¶ä¸­ä¹Ÿå‡ºç°ç±»ä¼¼çš„é—®é¢˜ã€‘éƒ½æ˜¯å› ä¸ºè¿™äº›åœ¨é€”è¯·æ±‚ä¿å­˜åœ¨ä¸€ä¸ªæ— ç•Œé˜Ÿåˆ—ä¸­ï¼Œè¯·æ±‚å¾—ä¸åˆ°å¤„ç†ï¼Œå¯¼è‡´å†…å­˜å ç”¨è¿‡é«˜ã€‚\n\næƒ³è¦é¿å…ä¸Šé¢çš„æƒ…å†µï¼Œéœ€è¦æˆ‘ä»¬ä¸»åŠ¨å¼•å…¥èƒŒå‹æœºåˆ¶ï¼Œå³åœ¨æœåŠ¡ç«¯å¤„ç†ä¸è¿‡æ¥çš„æƒ…å†µè¦é™åˆ¶å®¢æˆ·ç«¯çš„è¯·æ±‚é€Ÿç‡ï¼Œå…·ä½“çš„åšæ³•åº”è¯¥æœ‰å¾ˆå¤šï¼Œæˆ‘åˆ—ä¸¾å‡ ä¸ª\n1.æŠŠæ— ç•Œé˜Ÿåˆ—æ¢æˆæœ‰ç•Œé˜Ÿåˆ—ï¼Œé˜Ÿåˆ—æ»¡äº†å°±ä¸è®©æ·»åŠ äº†\n2.åœ¨å¾€é˜Ÿåˆ—ä¸­æ·»åŠ è¯·æ±‚çš„æ—¶å€™è·å–è®¸å¯ï¼ŒæœåŠ¡ç«¯å¤„ç†å®Œè¯·æ±‚é‡Šæ”¾è®¸å¯ï¼Œå¦‚æœè®¸å¯æ²¡äº†å°±é˜»å¡å®¢æˆ·ç«¯çš„è¯·æ±‚æˆ–è¿”å›å¼‚å¸¸\nâ€”â€”æ¯å¤©æ™’ç™½ç‰™\n","like_count":27,"discussions":[{"author":{"id":1230698,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIxrv7XYG5K02Bs7icZzRMnYm0MEq2TkgS2HicWU2od56mbjAc2c3TuXkTwssdEoANNCI8mVW0uHn7g/132","nickname":"Yanyuyu","note":"","ucode":"33854D923ED2C0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":173279,"discussion_content":"æ•¢é—®æœ‰æ²¡æœ‰äº†è§£è¿‡grpcçš„èƒŒå‹æœºåˆ¶ï¼Œè®¨è®ºä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581843893,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1004698,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/54/9a/76c0af70.jpg","nickname":"æ¯å¤©æ™’ç™½ç‰™","note":"","ucode":"A1B102CD933DEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1230698,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIxrv7XYG5K02Bs7icZzRMnYm0MEq2TkgS2HicWU2od56mbjAc2c3TuXkTwssdEoANNCI8mVW0uHn7g/132","nickname":"Yanyuyu","note":"","ucode":"33854D923ED2C0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":173327,"discussion_content":"grpcè¿˜æ²¡æ¥è§¦è¿‡ï¼Œä¹Ÿæ²¡å»ç ”ç©¶ï¼Œç­‰äº†è§£ä¸€äº›ç€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581847831,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":173279,"ip_address":"","group_id":0},"score":173327,"extra":""}]}]},{"had_liked":false,"id":208952,"user_name":"Geek_fd81b3","can_delete":false,"product_type":"c1","uid":1899429,"ip_address":"","ucode":"5BF9C3C68B8178","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIE3Vw0icEQic96rOykFD2bUo6KotVx53gvtG0CDe8tUKC3pNXxIQYMuyPyrgL06Zn32UWtEXTIVWMw/132","comment_is_top":false,"comment_ctime":1587473073,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œï¼ŒçœŸæ˜¯è‰¯å¿ƒè¯¾ç¨‹ï¼Œèµã€‚","like_count":2},{"had_liked":false,"id":148588,"user_name":"äºšæ´²èˆç‹.å°¼å¤æ‹‰æ–¯èµµå››","can_delete":false,"product_type":"c1","uid":1443078,"ip_address":"","ucode":"7159F5D7232696","user_header":"https://static001.geekbang.org/account/avatar/00/16/05/06/f5979d65.jpg","comment_is_top":false,"comment_ctime":1573034442,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"æƒ³ç”¨jsonçš„æ–¹å¼ï¼Œæä¸€ä¸ªæ³›å‹çš„CommonSerializer&lt;T&gt;å‡ºæ¥ï¼Œåºåˆ—åŒ–å¥½è¯´ï¼Œä½†æ˜¯åœ¨è¿›è¡Œè§£ææˆå¯¹è±¡çš„æ—¶å€™ï¼Œå‘ç°æˆ‘é€šè¿‡æ³›å‹æ— æ³•æ‹¿åˆ°åŸæœ¬çš„Classï¼ŒğŸ˜‚ï¼Œæƒ³äº†åŠå¤©æ–¹æ³•ç”¨åå°„å»æï¼Œä½†æ˜¯è§‰å¾—è¿™æ ·ä¸å¥½ï¼ŒæŸ¥äº†ä¸€ä¸‹å‘ç°ä¸€èˆ¬è¿™ç§æƒ…å†µæ˜¯é€šè¿‡ä¼ å…¥ä¸€ä¸ªä½ æƒ³è¦è§£æçš„æœ€ç»ˆç±»å‹çš„Classå¯¹è±¡ï¼Œä½†æ˜¯åˆè¦æ±‚ä¸è¯¥æ¥å£ï¼Œè¿™æ ·æˆ‘å°±ä¸èƒ½ä¼ è¿›å»ä¸€ä¸ªClassï¼Œæ— å¥ˆï¼Œåªèƒ½é’ˆå¯¹æ¯ä¸ªç±»å‹å®ç°ä¸€ä¸‹Serializeræ¥å£","like_count":2},{"had_liked":false,"id":274350,"user_name":"çŸ¥ä¹Ÿæ— æ¶¯","can_delete":false,"product_type":"c1","uid":1182438,"ip_address":"","ucode":"5471FB37D0036E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/7H0jIVKP3icqA4LmA1jXicHRz3zticVGE7gTRA5WDwmcLmLiay6S7PnKwhiaN5LNia3f5SIeglU6O7ByibOibnAiaMjjQgA/132","comment_is_top":false,"comment_ctime":1610974945,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"removeTimeoutFutures, è¿™ä¸ªæ–¹æ³•åèµ·å¾—ä¸å¤ªå¥½~  æ ¹æœ¬æ²¡æœ‰ç§»é™¤ future, åªæ˜¯æŠŠ semaphore é‡Šæ”¾äº†","like_count":1},{"had_liked":false,"id":151258,"user_name":"ä¹¦ä¸­è¿·æ¢¦","can_delete":false,"product_type":"c1","uid":1103010,"ip_address":"","ucode":"1C6B697F41698F","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/a2/fa41c8a8.jpg","comment_is_top":false,"comment_ctime":1573692232,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"requestIdè¦ä¿æŒå”¯ä¸€æ€§ï¼Œä¸ç„¶æ¶ˆæ¯å°±ä¹±äº†ï¼ï¼è€Œä¸”ä¸ç”¨ä¿æŒå…¨å±€å”¯ä¸€æ€§ï¼Œåªè¦ä¿è¯åœ¨å•ä¸ªæœåŠ¡ä¸­å”¯ä¸€å°±å¥½","like_count":1},{"had_liked":false,"id":389355,"user_name":"æŸ¯å¯Ÿé‡‘","can_delete":false,"product_type":"c1","uid":1115149,"ip_address":"ç¾å›½","ucode":"F722BF8FCD2C47","user_header":"https://static001.geekbang.org/account/avatar/00/11/04/0d/3dc5683a.jpg","comment_is_top":false,"comment_ctime":1712217556,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"è¿™ä¸ªè¯¾ä¸é”™ã€‚å¾ˆå¤šå…¶ä»–è®² rpc çš„è¯¾ï¼Œç†è®ºä¸€å¤§å †ï¼Œä¸å¦‚è€å¸ˆè¿™å‡ è®²çš„å†…å®¹","like_count":0},{"had_liked":false,"id":361031,"user_name":"VIC","can_delete":false,"product_type":"c1","uid":1114064,"ip_address":"ä¸Šæµ·","ucode":"3B3E6D344488B2","user_header":"https://static001.geekbang.org/account/avatar/00/10/ff/d0/402be1e9.jpg","comment_is_top":false,"comment_ctime":1667126436,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"è€å¸ˆä»£ç ï¼Œgithubåœ°å€å‘ä¸‹","like_count":0},{"had_liked":false,"id":336087,"user_name":"Spring4J","can_delete":false,"product_type":"c1","uid":1645430,"ip_address":"","ucode":"06F056085A2564","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKiauonyMORA2s43W7mogGDH4WYjW0gBJtYmUa9icTB6aMPGqibicEKlLoQmLKLWEctwHzthbTZkKR20w/132","comment_is_top":false,"comment_ctime":1645890427,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"è¯·æ•™ä¸ªé—®é¢˜ï¼š\nCommandEncoderä¸­ï¼ŒbyteBuf.writeInt(Integer.BYTES + command.getHeader().length() + command.getPayload().length);\nCommandDecoderä¸­ï¼Œint length = byteBuf.readInt() - LENGTH_FIELD_LENGTH(4å­—èŠ‚);\næˆ‘æ²¡ææ‡‚ç¼–ç æ—¶ç¬¬ä¸€ä¸ªå››å­—èŠ‚æœ‰å•¥ç”¨ï¼›\næˆ‘åœ¨ç¼–ç ä¸­æŠŠè¿™å››å­—èŠ‚å–æ¶ˆæ‰ï¼Œç„¶åè§£ç æ—¶ä¹Ÿå–æ¶ˆæ‰(int length = byteBuf.readInt())æ˜¯æ²¡æœ‰é—®é¢˜çš„\n","like_count":0},{"had_liked":false,"id":311390,"user_name":"åƒé”¤ç™¾ç‚¼é¢†æ‚Ÿä¹‹æé™","can_delete":false,"product_type":"c1","uid":1744257,"ip_address":"","ucode":"224B5CF2101716","user_header":"https://static001.geekbang.org/account/avatar/00/1a/9d/81/d748b7eb.jpg","comment_is_top":false,"comment_ctime":1631197793,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"private final Semaphore semaphore = new Semaphore(10);\nç›¸å½“äºè®¾ç½®ä¸€ä¸ªä»¤ç‰Œæ¡¶ï¼Œæœ€å¤šæœ‰10ä¸ªä»¤ç‰Œï¼Œå¦‚æœä½¿ç”¨å®Œåˆ™éœ€è¦å½’è¿˜æ‰èƒ½ç»§ç»­å‘é€æ•°æ®ï¼Œæ˜¯ä¸€ä¸ªé™æµçš„ä½œç”¨ã€‚","like_count":0},{"had_liked":false,"id":299544,"user_name":"ç¦»å¢ƒâ€","can_delete":false,"product_type":"c1","uid":1895314,"ip_address":"","ucode":"7186EF2BEF8956","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/STqKg1kLgvRuduQfo0R2E2osYBian7XrQAjSWmOwL9nyZVhq7vyLPnlGcgvguFV4aV7ToWLFiauEMKy96KWHKBVg/132","comment_is_top":false,"comment_ctime":1624699079,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"æƒ³é—®ä¸‹å¯ä»¥ä½¿ç”¨nettyçš„SO_BACKLOGæ¥å®ç°èƒŒå‹æœºåˆ¶å—","like_count":0},{"had_liked":false,"id":296135,"user_name":"Wheat Liu","can_delete":false,"product_type":"c1","uid":1260141,"ip_address":"","ucode":"7D99EA149B6DE8","user_header":"https://static001.geekbang.org/account/avatar/00/13/3a/6d/8b417c84.jpg","comment_is_top":false,"comment_ctime":1622774140,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"æ„Ÿè§‰è·Ÿrocket mqçš„ä»£ç ç»“æ„å·®ä¸å¤šï¼Œä¹Ÿæ˜¯ç”¨çš„netty","like_count":0},{"had_liked":false,"id":292188,"user_name":"è¥¿é—¨å¹ç‰›","can_delete":false,"product_type":"c1","uid":1508990,"ip_address":"","ucode":"E5D3624DDE1E83","user_header":"https://static001.geekbang.org/account/avatar/00/17/06/7e/735968e2.jpg","comment_is_top":false,"comment_ctime":1620716990,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"æœ€åçš„RPCå®æˆ˜è¿™å‡ èŠ‚è¯¾ï¼ŒçœŸçš„æ˜¯ç»ï¼Œçœ‹äº†ä½•æ™“å³°è€å¸ˆçš„RPCå®æˆ˜ï¼Œç„¶ååœ¨ç»“åˆæè€å¸ˆçš„è¿™ä¸ªç®€æ˜“çš„RPCæ¶æ„å®ç°ï¼Œç®€ç›´å®Œç¾ï¼Œè¿™ä¸ªèƒŒå‹æœºåˆ¶ï¼Œå…¶å®å°±æ˜¯é™æµï¼Œåˆ©ç”¨ä¿¡å·é‡è¿›è¡Œé™æµï¼Œä¹‹å‰çœ‹è¿‡ä¿¡å·é‡Semaphoreçš„æºç ï¼Œä¸€ç›´æ²¡åœ¨ä»£ç ä¸­ç”¨è¿‡ï¼Œè¿™ç®—æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åº”ç”¨äº†ï¼Œå½“ç„¶é™æµè¿˜å¯ä»¥ç”¨ä»¤ç‰Œæ¡¶å’Œæ¼æ¡¶ç®—æ³•ç­‰å®ç°ï¼Œè¿™é‡Œæƒ³ä¿¡å·é‡å…¶å®å°±æ˜¯ä¸ªè®¡æ•°å™¨","like_count":0,"discussions":[{"author":{"id":2278966,"avatar":"https://static001.geekbang.org/account/avatar/00/22/c6/36/70f2083c.jpg","nickname":"openï¼ï¼Ÿ","note":"","ucode":"53E6D336DB7F22","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583240,"discussion_content":"ç§»é™¤äº†ã€‚futureMap.entrySet().removeIfï¼ˆã€‚ã€‚ã€‚ã€‚ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659969511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":148588,"user_name":"äºšæ´²èˆç‹.å°¼å¤æ‹‰æ–¯èµµå››","can_delete":false,"product_type":"c1","uid":1443078,"ip_address":"","ucode":"7159F5D7232696","user_header":"https://static001.geekbang.org/account/avatar/00/16/05/06/f5979d65.jpg","comment_is_top":false,"comment_ctime":1573034442,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"æƒ³ç”¨jsonçš„æ–¹å¼ï¼Œæä¸€ä¸ªæ³›å‹çš„CommonSerializer&lt;T&gt;å‡ºæ¥ï¼Œåºåˆ—åŒ–å¥½è¯´ï¼Œä½†æ˜¯åœ¨è¿›è¡Œè§£ææˆå¯¹è±¡çš„æ—¶å€™ï¼Œå‘ç°æˆ‘é€šè¿‡æ³›å‹æ— æ³•æ‹¿åˆ°åŸæœ¬çš„Classï¼ŒğŸ˜‚ï¼Œæƒ³äº†åŠå¤©æ–¹æ³•ç”¨åå°„å»æï¼Œä½†æ˜¯è§‰å¾—è¿™æ ·ä¸å¥½ï¼ŒæŸ¥äº†ä¸€ä¸‹å‘ç°ä¸€èˆ¬è¿™ç§æƒ…å†µæ˜¯é€šè¿‡ä¼ å…¥ä¸€ä¸ªä½ æƒ³è¦è§£æçš„æœ€ç»ˆç±»å‹çš„Classå¯¹è±¡ï¼Œä½†æ˜¯åˆè¦æ±‚ä¸è¯¥æ¥å£ï¼Œè¿™æ ·æˆ‘å°±ä¸èƒ½ä¼ è¿›å»ä¸€ä¸ªClassï¼Œæ— å¥ˆï¼Œåªèƒ½é’ˆå¯¹æ¯ä¸ªç±»å‹å®ç°ä¸€ä¸‹Serializeræ¥å£","like_count":2},{"had_liked":false,"id":274350,"user_name":"çŸ¥ä¹Ÿæ— æ¶¯","can_delete":false,"product_type":"c1","uid":1182438,"ip_address":"","ucode":"5471FB37D0036E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/7H0jIVKP3icqA4LmA1jXicHRz3zticVGE7gTRA5WDwmcLmLiay6S7PnKwhiaN5LNia3f5SIeglU6O7ByibOibnAiaMjjQgA/132","comment_is_top":false,"comment_ctime":1610974945,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"removeTimeoutFutures, è¿™ä¸ªæ–¹æ³•åèµ·å¾—ä¸å¤ªå¥½~  æ ¹æœ¬æ²¡æœ‰ç§»é™¤ future, åªæ˜¯æŠŠ semaphore é‡Šæ”¾äº†","like_count":1,"discussions":[{"author":{"id":2278966,"avatar":"https://static001.geekbang.org/account/avatar/00/22/c6/36/70f2083c.jpg","nickname":"openï¼ï¼Ÿ","note":"","ucode":"53E6D336DB7F22","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583240,"discussion_content":"ç§»é™¤äº†ã€‚futureMap.entrySet().removeIfï¼ˆã€‚ã€‚ã€‚ã€‚ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659969511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":151258,"user_name":"ä¹¦ä¸­è¿·æ¢¦","can_delete":false,"product_type":"c1","uid":1103010,"ip_address":"","ucode":"1C6B697F41698F","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/a2/fa41c8a8.jpg","comment_is_top":false,"comment_ctime":1573692232,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"requestIdè¦ä¿æŒå”¯ä¸€æ€§ï¼Œä¸ç„¶æ¶ˆæ¯å°±ä¹±äº†ï¼ï¼è€Œä¸”ä¸ç”¨ä¿æŒå…¨å±€å”¯ä¸€æ€§ï¼Œåªè¦ä¿è¯åœ¨å•ä¸ªæœåŠ¡ä¸­å”¯ä¸€å°±å¥½","like_count":1},{"had_liked":false,"id":389355,"user_name":"æŸ¯å¯Ÿé‡‘","can_delete":false,"product_type":"c1","uid":1115149,"ip_address":"ç¾å›½","ucode":"F722BF8FCD2C47","user_header":"https://static001.geekbang.org/account/avatar/00/11/04/0d/3dc5683a.jpg","comment_is_top":false,"comment_ctime":1712217556,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"è¿™ä¸ªè¯¾ä¸é”™ã€‚å¾ˆå¤šå…¶ä»–è®² rpc çš„è¯¾ï¼Œç†è®ºä¸€å¤§å †ï¼Œä¸å¦‚è€å¸ˆè¿™å‡ è®²çš„å†…å®¹","like_count":0},{"had_liked":false,"id":361031,"user_name":"VIC","can_delete":false,"product_type":"c1","uid":1114064,"ip_address":"ä¸Šæµ·","ucode":"3B3E6D344488B2","user_header":"https://static001.geekbang.org/account/avatar/00/10/ff/d0/402be1e9.jpg","comment_is_top":false,"comment_ctime":1667126436,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"è€å¸ˆä»£ç ï¼Œgithubåœ°å€å‘ä¸‹","like_count":0},{"had_liked":false,"id":336087,"user_name":"Spring4J","can_delete":false,"product_type":"c1","uid":1645430,"ip_address":"","ucode":"06F056085A2564","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKiauonyMORA2s43W7mogGDH4WYjW0gBJtYmUa9icTB6aMPGqibicEKlLoQmLKLWEctwHzthbTZkKR20w/132","comment_is_top":false,"comment_ctime":1645890427,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"è¯·æ•™ä¸ªé—®é¢˜ï¼š\nCommandEncoderä¸­ï¼ŒbyteBuf.writeInt(Integer.BYTES + command.getHeader().length() + command.getPayload().length);\nCommandDecoderä¸­ï¼Œint length = byteBuf.readInt() - LENGTH_FIELD_LENGTH(4å­—èŠ‚);\næˆ‘æ²¡ææ‡‚ç¼–ç æ—¶ç¬¬ä¸€ä¸ªå››å­—èŠ‚æœ‰å•¥ç”¨ï¼›\næˆ‘åœ¨ç¼–ç ä¸­æŠŠè¿™å››å­—èŠ‚å–æ¶ˆæ‰ï¼Œç„¶åè§£ç æ—¶ä¹Ÿå–æ¶ˆæ‰(int length = byteBuf.readInt())æ˜¯æ²¡æœ‰é—®é¢˜çš„\n","like_count":0},{"had_liked":false,"id":311390,"user_name":"åƒé”¤ç™¾ç‚¼é¢†æ‚Ÿä¹‹æé™","can_delete":false,"product_type":"c1","uid":1744257,"ip_address":"","ucode":"224B5CF2101716","user_header":"https://static001.geekbang.org/account/avatar/00/1a/9d/81/d748b7eb.jpg","comment_is_top":false,"comment_ctime":1631197793,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"private final Semaphore semaphore = new Semaphore(10);\nç›¸å½“äºè®¾ç½®ä¸€ä¸ªä»¤ç‰Œæ¡¶ï¼Œæœ€å¤šæœ‰10ä¸ªä»¤ç‰Œï¼Œå¦‚æœä½¿ç”¨å®Œåˆ™éœ€è¦å½’è¿˜æ‰èƒ½ç»§ç»­å‘é€æ•°æ®ï¼Œæ˜¯ä¸€ä¸ªé™æµçš„ä½œç”¨ã€‚","like_count":0},{"had_liked":false,"id":299544,"user_name":"ç¦»å¢ƒâ€","can_delete":false,"product_type":"c1","uid":1895314,"ip_address":"","ucode":"7186EF2BEF8956","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/STqKg1kLgvRuduQfo0R2E2osYBian7XrQAjSWmOwL9nyZVhq7vyLPnlGcgvguFV4aV7ToWLFiauEMKy96KWHKBVg/132","comment_is_top":false,"comment_ctime":1624699079,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"æƒ³é—®ä¸‹å¯ä»¥ä½¿ç”¨nettyçš„SO_BACKLOGæ¥å®ç°èƒŒå‹æœºåˆ¶å—","like_count":0},{"had_liked":false,"id":296135,"user_name":"Wheat Liu","can_delete":false,"product_type":"c1","uid":1260141,"ip_address":"","ucode":"7D99EA149B6DE8","user_header":"https://static001.geekbang.org/account/avatar/00/13/3a/6d/8b417c84.jpg","comment_is_top":false,"comment_ctime":1622774140,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"æ„Ÿè§‰è·Ÿrocket mqçš„ä»£ç ç»“æ„å·®ä¸å¤šï¼Œä¹Ÿæ˜¯ç”¨çš„netty","like_count":0},{"had_liked":false,"id":292188,"user_name":"è¥¿é—¨å¹ç‰›","can_delete":false,"product_type":"c1","uid":1508990,"ip_address":"","ucode":"E5D3624DDE1E83","user_header":"https://static001.geekbang.org/account/avatar/00/17/06/7e/735968e2.jpg","comment_is_top":false,"comment_ctime":1620716990,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"æœ€åçš„RPCå®æˆ˜è¿™å‡ èŠ‚è¯¾ï¼ŒçœŸçš„æ˜¯ç»ï¼Œçœ‹äº†ä½•æ™“å³°è€å¸ˆçš„RPCå®æˆ˜ï¼Œç„¶ååœ¨ç»“åˆæè€å¸ˆçš„è¿™ä¸ªç®€æ˜“çš„RPCæ¶æ„å®ç°ï¼Œç®€ç›´å®Œç¾ï¼Œè¿™ä¸ªèƒŒå‹æœºåˆ¶ï¼Œå…¶å®å°±æ˜¯é™æµï¼Œåˆ©ç”¨ä¿¡å·é‡è¿›è¡Œé™æµï¼Œä¹‹å‰çœ‹è¿‡ä¿¡å·é‡Semaphoreçš„æºç ï¼Œä¸€ç›´æ²¡åœ¨ä»£ç ä¸­ç”¨è¿‡ï¼Œè¿™ç®—æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åº”ç”¨äº†ï¼Œå½“ç„¶é™æµè¿˜å¯ä»¥ç”¨ä»¤ç‰Œæ¡¶å’Œæ¼æ¡¶ç®—æ³•ç­‰å®ç°ï¼Œè¿™é‡Œæƒ³ä¿¡å·é‡å…¶å®å°±æ˜¯ä¸ªè®¡æ•°å™¨","like_count":0},{"had_liked":false,"id":274353,"user_name":"çŸ¥ä¹Ÿæ— æ¶¯","can_delete":false,"product_type":"c1","uid":1182438,"ip_address":"","ucode":"5471FB37D0036E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/7H0jIVKP3icqA4LmA1jXicHRz3zticVGE7gTRA5WDwmcLmLiay6S7PnKwhiaN5LNia3f5SIeglU6O7ByibOibnAiaMjjQgA/132","comment_is_top":false,"comment_ctime":1610975527,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"com.github.liyue2008.rpc.transport.InFlightRequests#remove çš„å®ç°åªæ˜¯æŠŠ Map ä¸­çš„å…ƒç´ ç§»é™¤äº†, å¹¶æ²¡æœ‰åƒæ–‡ç¨¿ä¸­ä¸€æ · &quot;è®¾ç½®è¿”å›å€¼å¹¶ç»“æŸè¿™ä¸ª ResponseFuture&quot;","like_count":0},{"had_liked":false,"id":249454,"user_name":"äºšæ—","can_delete":false,"product_type":"c1","uid":1018972,"ip_address":"","ucode":"4A5A6D24314B79","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/5c/3f164f66.jpg","comment_is_top":false,"comment_ctime":1600662450,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"å¼‚å¸¸å…³æµï¼›\nè¶…æ—¶å…³æµï¼›\nèƒŒå‹é™æµã€‚","like_count":0},{"had_liked":false,"id":138836,"user_name":"lecy_L","can_delete":false,"product_type":"c1","uid":1127659,"ip_address":"","ucode":"7C96DDBB3D1F7E","user_header":"https://static001.geekbang.org/account/avatar/00/11/34/eb/d00aedb0.jpg","comment_is_top":false,"comment_ctime":1570465182,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"å‡†ç‚¹ç ”è¯»äº†ä¸€éï¼Œå—ç›ŠåŒªæµ…ã€‚æ˜å¤©åˆ©ç”¨ç©ºé—²æ—¶é—´å°è¯•å®Œæˆæ€è€ƒé¢˜ã€‚","like_count":0},{"had_liked":false,"id":274353,"user_name":"çŸ¥ä¹Ÿæ— æ¶¯","can_delete":false,"product_type":"c1","uid":1182438,"ip_address":"","ucode":"5471FB37D0036E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/7H0jIVKP3icqA4LmA1jXicHRz3zticVGE7gTRA5WDwmcLmLiay6S7PnKwhiaN5LNia3f5SIeglU6O7ByibOibnAiaMjjQgA/132","comment_is_top":false,"comment_ctime":1610975527,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"com.github.liyue2008.rpc.transport.InFlightRequests#remove çš„å®ç°åªæ˜¯æŠŠ Map ä¸­çš„å…ƒç´ ç§»é™¤äº†, å¹¶æ²¡æœ‰åƒæ–‡ç¨¿ä¸­ä¸€æ · &quot;è®¾ç½®è¿”å›å€¼å¹¶ç»“æŸè¿™ä¸ª ResponseFuture&quot;","like_count":0},{"had_liked":false,"id":249454,"user_name":"äºšæ—","can_delete":false,"product_type":"c1","uid":1018972,"ip_address":"","ucode":"4A5A6D24314B79","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/5c/3f164f66.jpg","comment_is_top":false,"comment_ctime":1600662450,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"å¼‚å¸¸å…³æµï¼›\nè¶…æ—¶å…³æµï¼›\nèƒŒå‹é™æµã€‚","like_count":0},{"had_liked":false,"id":138836,"user_name":"lecy_L","can_delete":false,"product_type":"c1","uid":1127659,"ip_address":"","ucode":"7C96DDBB3D1F7E","user_header":"https://static001.geekbang.org/account/avatar/00/11/34/eb/d00aedb0.jpg","comment_is_top":false,"comment_ctime":1570465182,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"å‡†ç‚¹ç ”è¯»äº†ä¸€éï¼Œå—ç›ŠåŒªæµ…ã€‚æ˜å¤©åˆ©ç”¨ç©ºé—²æ—¶é—´å°è¯•å®Œæˆæ€è€ƒé¢˜ã€‚","like_count":0}]}