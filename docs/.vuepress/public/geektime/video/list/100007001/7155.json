{"id":7155,"title":"13 |【实验】Web 应用接入授权服务器","content":"无","comments":[{"had_liked":false,"id":18389,"user_name":"suke","can_delete":false,"product_type":"c3","uid":1007753,"ip_address":"","ucode":"C0287C31A4F45B","user_header":"","comment_is_top":false,"comment_ctime":1533286672,"is_pvip":false,"replies":[{"id":6623,"content":"这只是一个案例，如果app和oauth服务器都是自家的，登录一次即可，如果app是一家，oauth服务器和资源是另外一家，就可能出现两次登录问题。比如点评app，要通过微信登录获取你再微信上的数据，那么你既要登录点评应用，也要登录微信应用，因为是两家的。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1533695870,"ip_address":"","comment_id":18389,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"有个问题没明白，一般用户登录输入了web的账号和密码 然后还要再输入认证服务器的账号和密码么?","like_count":5,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421503,"discussion_content":"这只是一个案例，如果app和oauth服务器都是自家的，登录一次即可，如果app是一家，oauth服务器和资源是另外一家，就可能出现两次登录问题。比如点评app，要通过微信登录获取你再微信上的数据，那么你既要登录点评应用，也要登录微信应用，因为是两家的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1533695870,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63971,"user_name":"yien","can_delete":false,"product_type":"c3","uid":1345013,"ip_address":"","ucode":"37CC1AFAC8B0BC","user_header":"https://static001.geekbang.org/account/avatar/00/14/85/f5/10275c0a.jpg","comment_is_top":false,"comment_ctime":1548634782,"is_pvip":false,"replies":[{"id":22672,"content":"我想那是因为你的微信已经在登录状态了（有登录会话信息），所以不需要再登录，直接授权即可。现实场景中的oauth2，需要用户登录，相应生成的令牌才能跟这个用户绑定。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1548683093,"ip_address":"","comment_id":63971,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"老师，授权服务器需要第二次登录有点不太理解。就像一些网站支持微信快捷支付，直接在手机端微信确认授权就可以了，只需要一次认证而已","like_count":3,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437788,"discussion_content":"我想那是因为你的微信已经在登录状态了（有登录会话信息），所以不需要再登录，直接授权即可。现实场景中的oauth2，需要用户登录，相应生成的令牌才能跟这个用户绑定。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548683093,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10403,"user_name":"SnoWalker","can_delete":false,"product_type":"c3","uid":1094726,"ip_address":"","ucode":"826A3DE7E3AEC9","user_header":"https://static001.geekbang.org/account/avatar/00/10/b4/46/686f5abe.jpg","comment_is_top":false,"comment_ctime":1527529686,"is_pvip":false,"replies":[{"id":3367,"content":"谢支持🌹加油","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1527610726,"ip_address":"","comment_id":10403,"utype":1}],"discussion_count":1,"race_medal":1,"score":2,"product_id":100007001,"comment_content":"帮助很大，最近在做淘宝商城后台sessionkey自动刷新，看了这节课思路更加清晰了","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418465,"discussion_content":"谢支持🌹加油","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527610726,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287455,"user_name":"杨毅","can_delete":false,"product_type":"c3","uid":2377406,"ip_address":"","ucode":"189923D892549F","user_header":"","comment_is_top":false,"comment_ctime":1617957120,"is_pvip":false,"replies":[{"id":104798,"content":"web应用是client，用户一般是resource owner，请参考RFC 6749官方文档中的roles：\nhttps:&#47;&#47;tools.ietf.org&#47;html&#47;rfc6749","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1618668961,"ip_address":"","comment_id":287455,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"oauth2只做sso单点登录， 那web应用既是资源拥有者， 又是客户端嘛？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518315,"discussion_content":"web应用是client，用户一般是resource owner，请参考RFC 6749官方文档中的roles：\nhttps://tools.ietf.org/html/rfc6749","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618668961,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287452,"user_name":"杨毅","can_delete":false,"product_type":"c3","uid":2377406,"ip_address":"","ucode":"189923D892549F","user_header":"","comment_is_top":false,"comment_ctime":1617956800,"is_pvip":false,"replies":[{"id":104797,"content":"web应用是client，用户一般是resource owner，请参考RFC 6749官方文档中的roles：\nhttps:&#47;&#47;tools.ietf.org&#47;html&#47;rfc6749","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1618668906,"ip_address":"","comment_id":287452,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"老师，有个问题一直搞不懂。\n如果说我只用oauth2做sso单点登录，有授权服务器， web应用1，web应用2。那么这个时候web应用是不是既是客户端又是资源拥有者呢？ 按我的理解，\n1. 用户点击浏览器上的页面 页面又是依附于web应用.\n2. web应用又要去认证服务器获取access_token , 那么此时他是客户端.\n3. 用户要访问web应用上的资源信息，那么此时web应用就是资源拥有者.\n可能是我理解的有误， 如果只是做sso单点登录的话，各个角色所属实在是蒙圈， 望老师解答！！！","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518313,"discussion_content":"web应用是client，用户一般是resource owner，请参考RFC 6749官方文档中的roles：\nhttps://tools.ietf.org/html/rfc6749","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618668906,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":62643,"user_name":"鹏","can_delete":false,"product_type":"c3","uid":1230242,"ip_address":"","ucode":"AAA01498C85FCE","user_header":"https://static001.geekbang.org/account/avatar/00/12/c5/a2/4bef8cb6.jpg","comment_is_top":false,"comment_ctime":1548123965,"is_pvip":true,"replies":[{"id":22286,"content":"谢谢鼓励！","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1548246384,"ip_address":"","comment_id":62643,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"老师很帅 ","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437286,"discussion_content":"谢谢鼓励！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548246384,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49662,"user_name":"MQ","can_delete":false,"product_type":"c3","uid":1346255,"ip_address":"","ucode":"5D463D7F4334C9","user_header":"","comment_is_top":false,"comment_ctime":1544750681,"is_pvip":false,"replies":[{"id":18700,"content":"谢谢支持🌹","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1545223829,"ip_address":"","comment_id":49662,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"老师讲的很清楚。谢谢。","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432708,"discussion_content":"谢谢支持🌹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545223829,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43873,"user_name":"黄东升-鲁班小匠-Daniel","can_delete":false,"product_type":"c3","uid":1232429,"ip_address":"","ucode":"1D00E0B0EC2B41","user_header":"https://static001.geekbang.org/account/avatar/00/12/ce/2d/75050241.jpg","comment_is_top":false,"comment_ctime":1543315648,"is_pvip":false,"replies":[{"id":15792,"content":"这应该是用了某种sso机制","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1543405961,"ip_address":"","comment_id":43873,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"如果是门户系统，只需输入一次密码，点击登录。然后再打开第三方应用时，不需要再二次登录了。","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430531,"discussion_content":"这应该是用了某种sso机制","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543405961,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1885619,"avatar":"","nickname":"周达","note":"","ucode":"44E2B397631DB4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":213714,"discussion_content":"请问老师能细说一下这种SSO机制吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585115621,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118625,"user_name":"Geek_ac9b8c","can_delete":false,"product_type":"c3","uid":1615127,"ip_address":"","ucode":"EA84A80EC52268","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLMAYAonhXibBYBCSaQLrl8hkmPJp65DFIYPTnvicLdRQSptSSIUlXalwLeOQFy7ZM6pqcR3yPD3SZg/132","comment_is_top":false,"comment_ctime":1564399884,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"帅","like_count":0}]}