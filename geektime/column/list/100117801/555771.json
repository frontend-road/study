{"id":555771,"title":"13ï½œå°è¯•ç‰›åˆ€ï¼šè·‘é€šRISC-Vå¹³å°çš„Hello Worldç¨‹åº","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯LMOSã€‚</p><p>åœ¨ä¸Šä¸€è¯¾ä¸­ï¼Œæˆ‘ä»¬ä¸€èµ·çº¦å®šäº†ä¸»ç¯å¢ƒï¼Œå®‰è£…äº†ç¼–è¯‘å·¥å…·å’Œä¾èµ–åº“ï¼Œæ„å»ºäº†äº¤å‰ç¼–è¯‘RISC-Vå·¥å…·é“¾ã€‚</p><p>ä»Šå¤©æˆ‘ä»¬ç»§ç»­æ„å»ºRISC-Vç‰ˆçš„æ¨¡æ‹Ÿå™¨QEMUï¼ˆä»£ç ä½ å¯ä»¥ä»<a href=\"https://gitee.com/lmos/Geek-time-computer-foundation/tree/master/lesson12~13\">è¿™é‡Œ</a>ä¸‹è½½ï¼‰ï¼Œè®©å®ƒæˆä¸ºâ€œå®šåˆ¶æ¬¾â€ï¼Œæ›´åŒ¹é…æˆ‘ä»¬çš„å­¦ä¹ éœ€è¦ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®å¥½ä¸»ç¯å¢ƒçš„ç¯å¢ƒå˜é‡ï¼Œå®‰è£…å¥½VSCodeåŠå…¶æ’ä»¶ï¼Œè¿™æ ·æ‰èƒ½å®ç°ç¼–è¾‘ã€ç¼–è¯‘ã€è¿è¡Œã€è°ƒè¯•RISC-Vç¨‹åºçš„ä¸€ä½“åŒ–ã€è‡ªåŠ¨åŒ–ã€‚</p><p>è¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬å¼€å§‹å§ã€‚</p><h2>RISC-Vè¿è¡Œå¹³å°</h2><p>æœ‰äº†ä¸ŠèŠ‚è¯¾æˆåŠŸæ„å»ºå¥½çš„äº¤å‰ç¼–è¯‘å™¨ï¼Œæœ‰å¾ˆå¤šåŒå­¦å¯èƒ½æŒ‰æºä¸ä½ï¼Œæ€¥ç€æƒ³å†™ä¸€ä¸ªç®€å•çš„Hello Worldç¨‹åºï¼Œæ¥æµ‹è¯•ä¸€ä¸‹åˆšåˆšæ„å»ºçš„äº¤å‰ç¼–è¯‘å™¨ã€‚</p><p>æ•æˆ‘ç›´è¨€ï¼Œè¿™æ—¶ä½ å†™å‡ºæ¥çš„Hello Worldç¨‹åºï¼Œè™½ç„¶ä¼šæ— è­¦å‘Šã€æ— é”™è¯¯çš„ç¼–è¯‘æˆåŠŸï¼Œä½†æ˜¯åªè¦ä½ ä¸€è¿è¡Œï¼Œé“å®šä¼šå‡ºé”™ã€‚</p><p>è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºä½ å¿˜è®°äº†äº¤å‰ç¼–è¯‘å™¨ï¼Œç”Ÿæˆçš„æ˜¯RISC-Vå¹³å°çš„å¯æ‰§è¡Œç¨‹åºï¼Œè¿™æ ·çš„ç¨‹åºè‡ªç„¶æ— æ³•åœ¨ä½ çš„å®¿ä¸»æœºx86å¹³å°ä¸Šè¿è¡Œï¼Œå®ƒåªèƒ½åœ¨RISC-Vå¹³å°ä¸Šè¿è¡Œã€‚</p><p>æ‘¸ç€è‡ªå·±çš„è·åŒ…ï¼Œä½ å¯èƒ½é™·å…¥äº†æ²‰æ€ï¼šéš¾é“æˆ‘è¿˜è¦ä¹°ä¸€å°RISC-Vå¹³å°çš„è®¡ç®—æœºï¼Ÿè¿™æ ·æˆæœ¬å¯å¤ªé«˜äº†ï¼Œä¸åˆ’ç®—ã€‚</p><p>è´«ç©·è®©äººå­¦ä¼šå˜é€šï¼Œä¸ºäº†èŠ‚çº¦æˆæœ¬ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½ç”¨è½¯ä»¶æ¨¡æ‹ŸRISC-Vå¹³å°ã€‚å˜¿ï¼è¿™å½“ç„¶å¯ä»¥ï¼Œè€Œä¸”å‰è¾ˆä»¬ï¼Œæ—©å·²ç»™æˆ‘ä»¬å†™å¥½äº†è¿™æ ·çš„è½¯ä»¶ï¼Œå®ƒå°±æ˜¯QEMUã€‚</p><!-- [[[read_end]]] --><h2>æ­ç§˜QEMU</h2><p>ä»€ä¹ˆæ˜¯QEMUï¼ŸQEMUæ˜¯ä¸€ä¸ªä»¿çœŸå™¨æˆ–è€…è¯´æ˜¯æ¨¡æ‹Ÿå™¨è½¯ä»¶ï¼Œä¸å¸‚é¢ä¸ŠBOCHSç±»ä¼¼ï¼Œç”±è½¯ä»¶æ¥å®ç°æ¨¡æ‹Ÿã€‚</p><p>QEMUå°±åƒè®¡ç®—æœºç•Œçš„â€œå­™æ‚Ÿç©ºâ€ï¼Œå˜åŒ–å¤šç«¯ï¼Œèƒ½æ¨¡æ‹Ÿå‡ºå¤šç§ç±»å‹çš„CPUï¼Œæ¯”å¦‚IA32ã€AMD64ã€ARMã€MIPSã€PPCã€SPARCã€RISC-Vç­‰ã€‚QUEMé€šè¿‡åŠ¨æ€äºŒè¿›åˆ¶è½¬æ¢æ¥æ¨¡æ‹ŸCPUã€‚é™¤äº†CPUï¼Œå®ƒè¿˜æ”¯æŒæ¨¡æ‹Ÿå„ç§IOè®¾å¤‡ï¼Œå¹¶æä¾›ä¸€ç³»åˆ—çš„ç¡¬ä»¶æ¨¡å‹ã€‚è¿™ä½¿å¾—QEMUèƒ½æ¨¡æ‹Ÿå‡ºå®Œæ•´çš„ç¡¬ä»¶å¹³å°ï¼Œä½¿å¾—QEMUèƒ½è¿è¡Œå„ç§æ“ä½œç³»ç»Ÿï¼Œå¦‚Windowså’ŒLinuxã€‚</p><p>ä½ å¯ä»¥æŠŠQEMUå½“åšä¸€ä¸ªâ€œåŒé¢é—´è°â€ï¼Œå› ä¸ºåœ¨å®ƒä¸Šé¢è¿è¡Œçš„æ“ä½œç³»ç»Ÿï¼Œä¹Ÿè®¸è¿˜è®¤ä¸ºè‡ªå·±åœ¨å’Œç¡¬ä»¶ç›´æ¥æ‰“äº¤é“ï¼Œå…¶å®æ˜¯åŒQEMUæ¨¡æ‹Ÿå‡ºæ¥çš„ç¡¬ä»¶æ‰“äº¤é“ï¼ŒQEMUå†å°†è¿™äº›æŒ‡ä»¤ç¿»è¯‘ç»™çœŸæ­£ç¡¬ä»¶è¿›è¡Œæ“ä½œã€‚é€šè¿‡è¿™ç§æ¨¡å¼ï¼ŒQEMUè¿è¡Œçš„æ“ä½œç³»ç»Ÿå°±èƒ½å’Œå®¿ä¸»æœºä¸Šçš„ç¡¬ç›˜ã€ç½‘å¡ã€CPUã€CD-ROMã€éŸ³é¢‘è®¾å¤‡ã€USBè®¾å¤‡ç­‰è¿›è¡Œäº¤äº’äº†ã€‚</p><p>ç”±äºQEMUçš„ä»¥ä¸Šè¿™äº›ç‰¹ç‚¹ï¼Œå¯¼è‡´QEMUåœ¨å®¿ä¸»å¹³å°ä¸Šå¯ä»¥æ¨¡æ‹Ÿå‡ºå…¶å®ƒä¸åŒäºå®¿ä¸»å¹³å°çš„ç¡¬ä»¶ä½“ç³»ï¼Œè¿™æ˜¯QEMUçš„ä¼˜ç‚¹ã€‚</p><p>ä¸è¿‡ï¼Œç”±äºæ˜¯ç”¨äº†è½¯ä»¶æ¥å®ç°çš„æ¨¡æ‹Ÿï¼Œæ‰€ä»¥æ€§èƒ½å¾ˆå·®ï¼Œè¿™ä¹Ÿæ˜¯QEMUçš„ç¼ºç‚¹ã€‚æ­£å› ä¸ºè¿™ä¸ªç¼ºç‚¹ï¼Œåæ¥å°±å‡ºç°äº†<strong> QEMUå’ŒKVMç»“åˆä½¿ç”¨çš„è§£å†³æ–¹æ¡ˆ</strong>ã€‚</p><p>KVMåŸºäºç¡¬ä»¶è¾…åŠ©çš„è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œä¸»è¦è´Ÿè´£æ¯”è¾ƒç¹ççš„CPUå’Œå†…å­˜è™šæ‹ŸåŒ–ï¼Œè€ŒQEMUåˆ™è´Ÿè´£ I/Oè®¾å¤‡çš„æ¨¡æ‹Ÿï¼Œä¸¤è€…åˆä½œå„è‡ªå‘æŒ¥è‡ªèº«çš„ä¼˜åŠ¿ï¼Œæˆå°±äº†å¼ºå¼ºè”åˆçš„å…¸èŒƒã€‚</p><p>å›å½’ä¸»é¢˜ï¼Œå…³äºQEMUï¼Œç°é˜¶æ®µä½ æœ€éœ€è¦è®°ä½çš„å°±æ˜¯ï¼Œå®ƒæœ‰<strong>ä¸¤ç§ä¸»è¦å·¥ä½œæ¨¡å¼ï¼šç³»ç»Ÿæ¨¡å¼å’Œç”¨æˆ·æ¨¡å¼ã€‚</strong></p><p>åœ¨ç³»ç»Ÿå·¥ä½œæ¨¡å¼ä¸‹ï¼ŒQEMUèƒ½æ¨¡æ‹Ÿæ•´ä¸ªè®¡ç®—æœºç³»ç»Ÿï¼ŒåŒ…æ‹¬CPUåŠå…¶ä»–IOè®¾å¤‡ã€‚å®ƒèƒ½è¿è¡Œå’Œè°ƒè¯•ä¸åŒå¹³å°å¼€å‘çš„æ“ä½œç³»ç»Ÿï¼Œä¹Ÿèƒ½åœ¨å®¿ä¸»æœºä¸Šè™šæ‹Ÿä¸åŒæ•°é‡ã€ä¸åŒå¹³å°çš„è™šæ‹Ÿç”µè„‘ã€‚è€Œåœ¨ç”¨æˆ·å·¥ä½œæ¨¡å¼ï¼ŒQEMUèƒ½å»ºç«‹ä¸€ä¸ªæ™®é€šè¿›ç¨‹ï¼Œè¿è¡Œé‚£äº›ç”±ä¸åŒä½“ç³»å¤„ç†å™¨ç¼–è¯‘çš„åº”ç”¨ç¨‹åºï¼Œæ¯”å¦‚åé¢æˆ‘ä»¬è¦åŠ¨æ‰‹ç¼–å†™çš„RISC-Vç‰ˆçš„Hello Worldç¨‹åºã€‚</p><h2>æ„å»ºæˆ‘ä»¬çš„â€œå®šåˆ¶æ¬¾â€QEMU</h2><p>è¯´äº†è¿™ä¹ˆå¤šï¼Œå…¶å®æ˜¯æƒ³è®©ä½ æ›´åŠ äº†è§£QEMUã€‚</p><p>ä¸‹é¢æˆ‘ä»¬æ¥åŠæ­£äº‹å„¿â€”â€”æ„å»ºé€‚åˆæˆ‘ä»¬çš„QEMUï¼Œå¦‚æœæˆ‘ä»¬ä¸æ˜¯æœ‰ç‰¹æ®Šè¦æ±‚â€”â€”æ¨¡æ‹ŸRISC-Vå¹³å°ä¸”å¸¦è°ƒè¯•åŠŸèƒ½çš„QEMUï¼Œç”¨ä¸ç€äº²è‡ªåŠ¨æ‰‹å»æ„å»ºï¼Œåªéœ€è¦ä¸€æ¡å®‰è£…æŒ‡ä»¤å°±å®Œäº‹äº†ã€‚</p><p>æ„å»ºQEMUç”¨å››æ­¥å°±èƒ½æå®šï¼šé¦–å…ˆä¸‹è½½QEMUæºä»£ç ï¼Œæ¥ç€é…ç½®QEMUåŠŸèƒ½é€‰é¡¹ï¼Œç„¶åç¼–è¯‘QEMUï¼Œæœ€åå®‰è£…QEMUã€‚</p><p>æˆ‘ä»¬éœ€è¦ä»QEMU<a href=\"https://www.qemu.org/\">å®˜ç½‘</a>ä¸Š<a href=\"https://download.qemu.org/qemu-6.2.0.tar.xz\">ä¸‹è½½ç¨³å®šç‰ˆæœ¬</a>çš„QEMUæºä»£ç ã€‚å¦‚æœä½ å’Œæˆ‘ä¸€æ ·ï¼Œè§‰å¾—åœ¨æµè§ˆå™¨ä¸Šç‚¹æ¥ç‚¹å»éå¸¸éº»çƒ¦ï¼Œä¹Ÿå¯ä»¥åœ¨åˆ‡æ¢åˆ°RISCV_TOOLSç›®å½•çš„ç»ˆç«¯ä¸‹ï¼Œè¾“å…¥å¦‚ä¸‹æŒ‡ä»¤ï¼š</p><pre><code class=\"language-plain\">wget https://download.qemu.org/qemu-6.2.0.tar.xz #ä¸‹è½½æºç åŒ…\ntar xvJf qemu-6.2.0.tar.xz #è§£å‹æºç åŒ…\n</code></pre><p>è¿™é‡Œè·‘å®Œç¬¬ä¸€æ¡æŒ‡ä»¤ä»¥åï¼Œä¸‹è½½ä¸‹æ¥çš„æ˜¯å‹ç¼©çš„QEMUæºç åŒ…ã€‚æ‰€ä»¥ï¼Œåœ¨ä¸‹è½½å®Œæˆåï¼Œä½ è¦ç”¨ç¬¬äºŒæ¡æŒ‡ä»¤æ¥è§£å‹ã€‚</p><p>ç”±äº<a href=\"https://time.geekbang.org/column/article/554509\">ä¸ŠèŠ‚è¯¾</a>æˆ‘ä»¬æ„å»ºRISC-Vå·¥å…·é“¾æ—¶ï¼Œå·²ç»ç»Ÿä¸€å®‰è£…äº†æ„å»ºQEMUæ‰€éœ€è¦çš„ç›¸å…³ä¾èµ–åº“ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸ç”¨å®‰è£…ç›¸å…³ä¾èµ–åº“äº†ã€‚</p><p>è§£å‹æˆåŠŸåï¼Œæˆ‘ä»¬å°±è¦å¼€å§‹é…ç½®QEMUçš„åŠŸèƒ½äº†ã€‚åŒæ ·ï¼Œä¸ºäº†ä¸æ±¡æŸ“æºä»£ç ç›®å½•ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆåœ¨qemu-6.2.0ç›®å½•ä¸‹ï¼Œå»ºç«‹ä¸€ä¸ªbuildç›®å½•ï¼Œç„¶ååˆ‡æ¢åˆ°buildç›®å½•ä¸‹è¿›è¡Œé…ç½®ï¼Œè¾“å…¥å¦‚ä¸‹æŒ‡ä»¤ï¼š</p><pre><code class=\"language-plain\">mkdir build #å»ºç«‹buildç›®å½•\ncd build #åˆ‡æ¢åˆ°buildç›®å½•ä¸‹\n../configure --prefix=/opt/riscv/qemu --enable-sdl --enable-tools --enable-debug --target-list=riscv32-softmmu,riscv64-softmmu,riscv32-linux-user,riscv64-linux-user #é…ç½®QEMU\n</code></pre><p>ä¸Šè¿°é…ç½®é€‰é¡¹ä¸­ï¼Œâ€“prefixè¡¨ç¤ºQEMUçš„å®‰è£…ç›®å½•ï¼Œæˆ‘ä»¬ä¸€èµ·çº¦å®šä¸ºâ€œ/opt/riscv/qemuâ€ç›®å½•ï¼Œâ€“enable-sdlè¡¨ç¤ºQEMUä½¿ç”¨sdlå›¾å½¢åº“ï¼Œ --enable-toolsè¡¨ç¤ºç”ŸæˆQEMUå·¥å…·é›†ï¼Œâ€“enable-debugè¡¨ç¤ºæ‰“å¼€QEMUè°ƒè¯•åŠŸèƒ½ã€‚</p><p>æœ€é‡è¦çš„æ˜¯<strong> --target-list </strong>è¿™ä¸ªé€‰é¡¹ï¼Œå®ƒè¡¨ç¤ºç”ŸæˆQEMUæ”¯æŒçš„æ¨¡æ‹Ÿç›®æ ‡æœºå™¨ã€‚ä¸åŒé€‰é¡¹æ‰€æ”¯æŒçš„å¹³å°ä¸åŒï¼Œæˆ‘ä»¬çš„é€‰æ‹©å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/18/7d/1893274bf776382cd139692e9aaf397d.jpg?wh=1920x804\" alt=\"å›¾ç‰‡\"></p><p>å¦‚æœä½ ä»€ä¹ˆéƒ½ä¸é€‰çš„è¯ï¼Œå®ƒä¼šé»˜è®¤ç”ŸæˆQEMUæ”¯æŒçš„æ‰€æœ‰å¹³å°ã€‚æŒ‰å‰é¢æˆ‘ä»¬è®²çš„æ“ä½œé…ç½®ï¼Œé…ç½®æˆåŠŸåï¼Œbuildç›®å½•ä¸‹ä¼šç”Ÿæˆåé¢æˆªå›¾é‡Œå±•ç¤ºçš„æ–‡ä»¶å’Œç›®å½•ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/61/22/612cb5524109cc97a8ce1e4b2810d922.jpg?wh=1920x1527\" alt=\"å›¾ç‰‡\"></p><p>é…ç½®å¥½åŠŸèƒ½é€‰é¡¹ä¹‹åï¼Œä¸‹ä¸€æ­¥å°±æ˜¯ç¼–è¯‘QEMUäº†ã€‚åªè¦é…ç½®æˆåŠŸäº†ï¼Œç¼–è¯‘è¿™äº‹å„¿å°±éå¸¸ç®€å•äº†ï¼Œæˆ‘ä»¬åªè¦è¾“å…¥å¦‚ä¸‹æŒ‡ä»¤ï¼Œç„¶åäº¤ç»™è®¡ç®—æœºç¼–è¯‘å°±å¥½äº†ã€‚åˆ«å¿˜äº†ç­‰å¾…æœŸé—´æ³¡æ¯èŒ¶ï¼Œä¸çŸ¥é“ä½ ä¼šä¸ä¼šåƒæˆ‘ä¸€æ ·å“¼èµ·é‚£é¦–æ­Œï¼šâ€œä¸–ä¸Šæœ‰æ²¡æœ‰äººï¼Œå®‰é™çš„ç­‰å¾…ä½ ï¼Œä¸€ç›´ä¸æ„¿å›ç¥â€¦â€¦â€</p><pre><code class=\"language-plain\">sudo make -j8\n</code></pre><p>æœ€åå°±æ˜¯å®‰è£…QEMUï¼Œç»è¿‡æ¼«é•¿ç­‰å¾…ä»¥åï¼Œæˆ‘ä»¬ç»ˆäºè¿æ¥ç¼–è¯‘çš„æˆåŠŸã€‚è¿™æ—¶ï¼Œä½ è¿˜éœ€è¦è¾“å…¥å¦‚ä¸‹æŒ‡ä»¤è¿›è¡Œå®‰è£…ã€‚</p><pre><code class=\"language-plain\">sudo make install\n</code></pre><p>è¿™é‡Œè¯´æ˜ä¸€ä¸‹ï¼ŒQEMUä¸åƒRISC-Vå·¥å…·é“¾é‚£æ ·ï¼Œä¼šåœ¨ç¼–è¯‘ç»“æŸåè‡ªåŠ¨å®‰è£…ï¼Œå®ƒéœ€è¦æ‰‹åŠ¨å®‰è£…ã€‚</p><p>æˆ‘ä»¬åœ¨ç»ˆç«¯ä¸­åˆ‡æ¢åˆ°â€œ/opt/riscv/qemu/binâ€ç›®å½•ä¸‹ï¼Œæ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ï¼š</p><pre><code class=\"language-plain\">qemu-riscv32 -version &amp;&amp; qemu-riscv64 -version &amp;&amp; qemu-system-riscv32 -version &amp;&amp; qemu-system-riscv64 -version\n</code></pre><p>ä¸Šè¿°æŒ‡ä»¤ä¼šè¾“å‡ºqemu-riscv32ã€qemu-riscv64ã€qemu-system-riscv32ã€qemu-system-riscv64çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œä»¥è¯æ˜èƒ½è¿è¡ŒRISC-Vå¹³å°å¯æ‰§è¡Œç¨‹åºçš„QEMUæ„å»ºæˆåŠŸã€‚ä½ å¯ä»¥å¯¹ç…§ä¸€ä¸‹åé¢çš„æˆªå›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/5f/a0/5f293367bb0821cyy49ee1d3a2c4bfa0.jpg?wh=1920x1162\" alt=\"å›¾ç‰‡\"></p><p>åˆ°è¿™é‡Œï¼ŒRISC-Vå¹³å°çš„ç¼–è¯‘ç¯å¢ƒå’Œæ‰§è¡Œç¯å¢ƒå·²ç»æ„å»ºå®Œæˆï¼Œå¹¶ä¸”èƒ½ç”Ÿæˆå’Œæ‰§è¡Œ32ä½æˆ–è€…64ä½çš„RISC-Vå¹³å°çš„å¯æ‰§è¡Œç¨‹åºï¼Œæ— è®ºæ˜¯RISC-Vå¹³å°çš„åº”ç”¨ç¨‹åºï¼Œè¿˜æ˜¯RISC-Vå¹³å°çš„æ“ä½œç³»ç»Ÿã€‚</p><h3>å¤„ç†ç¯å¢ƒå˜é‡</h3><p>ä¸çŸ¥é“ä½ å‘ç°äº†æ²¡æœ‰ï¼Ÿæˆ‘ä»¬è¿è¡ŒQEMUå’ŒRISC-Vå·¥å…·é“¾ç›¸å…³çš„ç¨‹åºï¼Œéƒ½è¦åˆ‡æ¢åˆ°/opt/riscv/xxxx/binç›®å½•ä¸­æ‰å¯ä»¥è¿è¡Œï¼Œè€Œä¸æ˜¯åƒLinuxä¸­çš„å…¶å®ƒç¨‹åºï¼Œå¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯ä¸­ç›´æ¥è¿è¡Œã€‚</p><p>é©å‘½è¿˜æœªæˆåŠŸï¼Œæˆ‘ä»¬è¿˜å¾—åŠªåŠ›ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰å°†QEMUå’ŒRISC-Vå·¥å…·é“¾çš„å®‰è£…ç›®å½•ï¼ŒåŠ å…¥åˆ°Linuxçš„ç¯å¢ƒå˜é‡ä¸­ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¼€å§‹å¤„ç†ç¯å¢ƒå˜é‡ï¼Œä¿®æ”¹ç¯å¢ƒçš„æ–¹æ³•æœ‰å¥½å‡ ç§ã€‚è¿™é‡Œæˆ‘ä¸ºä½ æ¼”ç¤ºæ¯”è¾ƒå¸¸ç”¨çš„ä¸€ç§ï¼Œé‚£å°±æ˜¯åœ¨å½“å‰ç”¨æˆ·ç›®å½•ä¸‹çš„â€œ.bashrcâ€æ–‡ä»¶ä¸­ï¼ŒåŠ å…¥ç›¸å…³çš„æŒ‡ä»¤ã€‚</p><p>è¿™é‡Œè¯´çš„â€œå½“å‰ç”¨æˆ·çš„ç›®å½•â€å°±æ˜¯åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œ\"cd ~\" æŒ‡ä»¤ã€‚æ€ä¹ˆæ“ä½œå‘¢ï¼Ÿæˆ‘ä»¬åˆ‡æ¢åˆ°å½“å‰ç”¨æˆ·ç›®å½•ä¸‹ï¼Œæ¥æ‰§è¡Œè¿™ä¸ªæŒ‡ä»¤ã€‚ç„¶åï¼Œåœ¨æ–‡ä»¶å°¾éƒ¨åŠ ä¸Šä¸¤è¡Œä¿¡æ¯å°±è¡Œäº†ã€‚å…·ä½“æŒ‡ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code class=\"language-plain\">cd ~ #åˆ‡æ¢åˆ°å½“å‰ç”¨æˆ·ç›®å½•ä¸‹\nvim ./.bashrc #æ‰“å¼€.bashrcæ–‡ä»¶è¿›è¡Œç¼–è¾‘\n\n#åœ¨.bashrcæ–‡ä»¶æœ«å°¾åŠ å…¥å¦‚ä¸‹ä¿¡æ¯\nexport PATH=/opt/riscv/gcc/bin:$PATH\nexport PATH=/opt/riscv/qemu/bin:$PATH\n</code></pre><p>ä¸Šè¿°æ“ä½œå®Œæˆä»¥åï¼Œä½ ä¼šçœ‹åˆ°ä¸‹å›¾æ‰€ç¤ºçš„ç»“æœï¼š<br>\n<img src=\"https://static001.geekbang.org/resource/image/ef/3c/eff44c66b93b1aa531b46b47f2095d3c.jpg?wh=1920x1162\" alt=\"å›¾ç‰‡\"></p><p>éšåï¼Œæˆ‘ä»¬æŒ‰ä¸‹é”®ç›˜ä¸ŠESCé”®ï¼Œæ¥ç€è¾“å…¥\":wq\"ä»¥ä¾¿ä¿å­˜å¹¶é€€å‡ºVimã€‚è¿™æ ·æ“ä½œåï¼Œä½ ä¼šå‘ç°ç¯å¢ƒå˜é‡å¹¶æ²¡æœ‰ç”Ÿæ•ˆã€‚</p><p>è¿™é‡Œè¿˜å·®æœ€åä¸€æ­¥ï¼Œæˆ‘ä»¬åœ¨ç»ˆç«¯ä¸­è¾“å…¥å¦‚ä¸‹æŒ‡ä»¤ï¼Œè®©ç¯å¢ƒå˜é‡ç”Ÿæ•ˆï¼š</p><pre><code class=\"language-plain\">source ./.bashrc\n</code></pre><p>ç°åœ¨ï¼Œä½ åœ¨ä»»ä½•ç›®å½•ä¹‹ä¸‹è¾“å…¥QEMUå’ŒRISC-Vå·¥å…·é“¾ç›¸å…³çš„ç¨‹åºå‘½ä»¤ï¼Œå®ƒä»¬å°±éƒ½å¯ä»¥æ­£å¸¸è¿è¡Œäº†ã€‚</p><h3>å®‰è£…VSCode</h3><p>æœ‰äº†QEMUå’ŒRISC-Vå·¥å…·é“¾ç›¸å…³çš„ç¨‹åºå‘½ä»¤ï¼Œæˆ‘ä»¬è™½ç„¶å¯ä»¥ç¼–è¯‘è°ƒè¯•å’Œæ‰§è¡ŒRISC-Vå¹³å°çš„ç¨‹åºäº†ï¼Œä½†æ˜¯å¿…é¡»åœ¨ç»ˆç«¯ä¸­è¾“å…¥å¤šæ¡æŒ‡ä»¤ï¼Œæ‰èƒ½å®Œæˆç›¸å…³çš„å·¥ä½œã€‚</p><p>è¿™å¯¹äºå¾ˆå¤šåŒå­¦æ¥è¯´ï¼Œè‚¯å®šè§‰å¾—å¾ˆé™Œç”Ÿï¼Œç‰¹åˆ«æ˜¯åœ¨å›¾å½¢åŒ–ç››è¡Œçš„ä»Šå¤©ï¼Œæˆ‘ä»¬æ›´æœŸå¾…èƒ½æœ‰ä¸ªè½»é‡çº§çš„IDEã€‚</p><p>è¿™é‡Œæˆ‘ä»¬çº¦å®šä½¿ç”¨VSCodeï¼Œå®ƒå®‰è£…èµ·æ¥ä¹Ÿå¾ˆç®€å•ã€‚åœ¨ <a href=\"https://code.visualstudio.com/Download\">VSCodeå®˜ç½‘</a>ä¸Šä¸‹è½½debåŒ…ï¼Œä¸‹è½½ååŒå‡»debå®‰è£…ï¼Œæˆ–è€…åˆ‡æ¢åˆ°åˆšæ‰ä¸‹è½½VSCodeç›®å½•çš„ç»ˆç«¯ä¸­ï¼Œè¾“å…¥å¦‚ä¸‹æŒ‡ä»¤å°±è¡Œäº†ã€‚</p><pre><code class=\"language-plain\">sudo apt-get install -f *.deb\n</code></pre><p>å®‰è£…å¥½åï¼Œåœ¨ä½ çš„æ¡Œé¢ä¼šå‡ºç°VSCodeå›¾æ ‡ï¼ŒåŒå‡»æ‰“å¼€åçš„é¡µé¢å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/e8/01/e80a0f46c534d870483fb74df77ecb01.jpg?wh=1920x1019\" alt=\"å›¾ç‰‡\"></p><p>ä¸è¿‡ï¼Œæœ‰äº†VSCodeæˆ‘ä»¬ç›®å‰åªèƒ½å†™ä»£ç ï¼Œè¿˜ä¸èƒ½ç¼–è¯‘å’Œè°ƒè¯•ä»£ç ï¼Œæ‰€ä»¥éœ€è¦ç»™VSCodeå®‰è£…C/C++æ‰©å±•ã€‚æˆ‘ä»¬åªéœ€æ‰“å¼€VSCodeï¼ŒæŒ‰ä¸‹ctrl+shift+xï¼Œå°±èƒ½æ‰“å¼€VSCodeçš„æ‰©å±•é¡µé¢ï¼Œåœ¨æœç´¢æ¡†ä¸­è¾“å…¥C/C++å°±å¯ä»¥å®‰è£…äº†ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/65/fc/65c609a360d33dfa7b1399c115yy49fc.jpg?wh=1920x1019\" alt=\"å›¾ç‰‡\"></p><p>è‡³æ­¤ï¼Œæˆ‘ä»¬çš„VSCodeåŠå…¶éœ€è¦çš„æ‰©å±•ç»„ä»¶å°±å®‰è£…å®Œæˆäº†ã€‚</p><p>ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨ä½ çš„ä»£ç ç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ª.vscodeæ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨æ–‡ä»¶é‡Œå†™ä¸Š<a href=\"https://gitee.com/lmos/Geek-time-computer-foundation/tree/master/lesson12~13/.vscode\">ä¸¤ä¸ªé…ç½®æ–‡ä»¶</a>ã€‚è¿™ä¸¤ä¸ªé…ç½®æ–‡ä»¶æˆ‘å·²ç»å¸®ä½ å†™å¥½äº†ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/7f/f1/7fd7yycd59e982ec7b104b47cf5009f1.jpg?wh=1920x1019\" alt=\"å›¾ç‰‡\"></p><p>åœ¨.vscodeæ–‡ä»¶å¤¹ä¸­æœ‰ä¸ªtasks.jsonæ–‡ä»¶ï¼Œå®ƒä¸»è¦è´Ÿè´£å®Œæˆç”¨RISC-Vç¼–è¯‘å™¨ç¼–è¯‘ä»£ç çš„åŠŸèƒ½ï¼Œè¿˜æœ‰ç”¨QEMUè¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶çš„åŠŸèƒ½ã€‚</p><p>æˆ‘ä»¬å…ˆè¯´è¯´è¿™é‡Œçš„ç¼–è¯‘å·¥ä½œæ˜¯æ€ä¹ˆå®Œæˆçš„ã€‚å…·ä½“å°±æ˜¯é€šè¿‡è°ƒç”¨makeï¼Œè¯»å–ä»£ç ç›®å½•ä¸­çš„Makefileè„šæœ¬ï¼Œåœ¨è¿™ä¸ªè„šæœ¬ä¸­ä¼šè°ƒç”¨riscv64-unknown-elf-gccå®Œæˆç¼–è¯‘ã€‚ç­‰ç¼–è¯‘æˆåŠŸåï¼Œæ‰ä¼šè°ƒç”¨QEMUæ¥æ¥æ‰‹ï¼Œç”±å®ƒè¿è¡Œç¼–è¯‘å¥½çš„å¯æ‰§è¡Œç¨‹åºã€‚ä»£ç æ³¨é‡Šå·²ç»å†™å¾—å¾ˆæ¸…æ¥šäº†ï¼Œä½ å¯ä»¥åœä¸‹æ¥ä»”ç»†çœ‹çœ‹ã€‚</p><p>ä¸è¿‡ï¼Œtasks.jsonæ–‡ä»¶è™½ç„¶è§£å†³äº†ç¼–è¯‘ä¸è¿è¡Œçš„é—®é¢˜ï¼Œä½†æ˜¯å®ƒä¹Ÿæ˜¯è¢«å…¶å®ƒæ–‡ä»¶è°ƒç”¨çš„ã€‚è¢«è°è°ƒç”¨å‘¢ï¼Ÿé‚£å°±æ˜¯æˆ‘ä»¬çš„è°ƒè¯•é…ç½®æ–‡ä»¶launch.jsonæ–‡ä»¶ï¼Œå®ƒç”¨äºå¯åŠ¨è°ƒè¯•å™¨GDBï¼Œåªä¸è¿‡è¿™é‡Œå¯åŠ¨çš„ä¸æ˜¯å®¿ä¸»å¹³å°ä¸Šçš„GDBï¼Œè€ŒRISC-Vå·¥å…·é“¾ä¸­çš„GDBã€‚å…¶å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/80/5b/80870a7d1a7f35b11228f6e7810c145b.jpg?wh=1920x1019\" alt=\"å›¾ç‰‡\"></p><p>å½“æˆ‘ä»¬å†™å¥½ä»£ç åï¼ŒæŒ‰ä¸‹F5é”®åï¼ŒVSCodeå°±ä¼šæ‰§è¡Œlaunch.jsonæ–‡ä»¶çš„è°ƒè¯•æ“ä½œäº†ã€‚è¿™é‡Œè°ƒè¯•å™¨å’Œè¦è°ƒè¯•çš„å¯æ‰§è¡Œç¨‹åºå·²ç»åˆ¶å®šå¥½äº†ã€‚ä¸è¿‡ç”±äºpreLaunchTaskçš„æŒ‡å®šï¼Œå¼€å§‹æ‰§è¡Œè°ƒè¯•å‘½ä»¤ä¹‹å‰ï¼ŒVSCodeä¼šé¦–å…ˆæ‰§è¡Œtasks.jsonæ–‡ä»¶ä¸­çš„æ“ä½œï¼Œå³ç¼–è¯‘å’Œè¿è¡Œã€‚</p><h3>è¿è¡ŒHello World</h3><p>ä¸‹é¢æˆ‘ä»¬ä¸€èµ·æ¥å†™ä¸‹é‚£ä¸ªè‘—åçš„ç¨‹åºâ€”â€”Hello Worldï¼å†™å¥½åï¼Œåœ¨mainå‡½æ•°æ‰€åœ¨çš„è¡Œå‰æ‰“ä¸Šä¸€ä¸ªæ–­ç‚¹ï¼ŒæŒ‰ä¸‹F5é”®ï¼Œå°±ä¼šçœ‹åˆ°å¦‚ä¸‹ç•Œé¢ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/9c/7b/9c14c4def94c7d719f732822b7fc807b.jpg?wh=1920x1019\" alt=\"å›¾ç‰‡\"></p><p>å¦‚æœä¸å‡ºæ„å¤–ï¼Œå“ˆå“ˆï¼Œæ”¾å¿ƒï¼ŒæŒ‰æˆ‘æä¾›ç»™ä½ çš„æ­¥éª¤ï¼Œä¹Ÿå‡ºä¸äº†æ„å¤–ï¼Œä½ ä¸€å®šä¼šçœ‹åˆ°ä»¥ä¸Šç•Œé¢ã€‚</p><p>æˆ‘ä»¬é‡ç‚¹æ¥è§‚å¯Ÿçº¢è‰²æ–¹æ¡†ä¸­çš„ä¿¡æ¯ï¼Œå¯ä»¥æŸ¥çœ‹ä»£ç å˜é‡å€¼ã€CPUçš„å¯„å­˜å™¨å€¼ã€å‡½æ•°çš„è°ƒç”¨æ ˆã€æ–­ç‚¹ä¿¡æ¯ã€æºä»£ç ä»¥åŠç¨‹åºæ‰§è¡Œååœ¨VSCodeå†…åµŒç»ˆç«¯ä¸­è¾“å‡ºçš„ä¿¡æ¯ã€‚æœ‰äº†è¿™äº›ä¿¡æ¯ï¼Œæˆ‘ä»¬å°±èƒ½æ¸…æ¥šåœ°çœ‹åˆ°ä¸€ä¸ªç¨‹åºè¿è¡Œè¿‡ç¨‹çš„çŠ¶æ€å’Œç»“æœã€‚</p><p>èµ°åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„å®šåˆ¶æ¬¾QEMUä»¥åŠVSCodeå°±æ­å¥½äº†ï¼Œå¯ä»¥å»å›¾å½¢åŒ–ç¼–è¾‘ã€ç¼–è¯‘ã€è¿è¡Œå’Œè°ƒè¯•RISC-Vå¹³å°çš„å¯æ‰§è¡Œç¨‹åºäº†ã€‚</p><h2>é‡ç‚¹å›é¡¾</h2><p>å¥½äº†ï¼Œæˆ‘ä»¬çš„RISC-Vå¹³å°çš„Hello Worldï¼Œä¹Ÿæ˜¯æˆ‘ä»¬åœ¨å®¿ä¸»æœºä¸Šå¼€å‘çš„ç¬¬ä¸€ä¸ªéå®¿ä¸»æœºçš„ç¨‹åºï¼Œç°åœ¨å·²ç»æˆåŠŸè¿è¡Œï¼Œè¿™è¯´æ˜æˆ‘ä»¬ä¹‹å‰çš„å·¥ä½œå®Œæˆå¾—å¾ˆå®Œç¾ï¼Œä»Šå¤©çš„è¯¾ç¨‹ä¸çŸ¥ä¸è§‰ä¹Ÿæ¥è¿‘äº†å°¾å£°ã€‚</p><p>ä¸‹é¢æ¥å›é¡¾ä¸€ä¸‹ï¼Œè¿™èŠ‚è¯¾æˆ‘ä»¬éƒ½åšäº†äº›ä»€ä¹ˆã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ„å»ºäº†èƒ½è¿è¡ŒRISC-Vå¯æ‰§è¡Œç¨‹åºçš„QEMUæ¨¡æ‹Ÿå™¨ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬ä¸å¿…è´­ä¹°RISC-Vå¹³å°çš„æœºå™¨ï¼Œå°±èƒ½åœ¨å®¿ä¸»æœºä¸Šè¿è¡ŒRISC-Vå¯æ‰§è¡Œç¨‹åºã€‚è¿™ä¸ä½†å¤§å¤§æ–¹ä¾¿äº†æˆ‘ä»¬çš„å¼€å‘å·¥ä½œï¼Œè€Œä¸”èŠ‚çº¦äº†æˆæœ¬ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬å¤„ç†äº†ç¯å¢ƒå˜é‡ï¼Œæ–¹ä¾¿æˆ‘ä»¬åœ¨ä»»ä½•ç›®å½•ä¸‹ï¼Œéƒ½å¯ä»¥éšæ„ä½¿ç”¨RISC-Vå·¥å…·é“¾ä¸­çš„å‘½ä»¤å’ŒQEMUç›¸å…³çš„å‘½ä»¤ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬å®‰è£…äº†VSCodeï¼Œè¿˜åœ¨å…¶ä¸­å®‰è£…C/C++æ‰©å±•å¹¶å¯¹å…¶è¿›è¡Œäº†ç›¸åº”çš„é…ç½®ã€‚ä»¥åæˆ‘ä»¬åœ¨VSCodeå›¾å½¢ç¯å¢ƒä¸‹ç¼–å†™ä»£ç ã€ç¼–è¯‘ä»£ç å’Œè°ƒè¯•ä»£ç ï¼Œå°±èƒ½ä¸€æ°”å‘µæˆäº†ã€‚</p><p>è¿™èŠ‚è¯¾çš„è¦ç‚¹æˆ‘æ•´ç†äº†å¯¼å›¾ï¼Œä¾›ä½ å‚è€ƒã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ba/be/ba36676884beyy0be6ec1f267b6215be.jpg?wh=1920x1430\" alt=\"å›¾ç‰‡\"></p><p>æ­å–œä½ åšæŒåˆ°è¿™é‡Œï¼Œé€šè¿‡ä¸¤èŠ‚è¯¾çš„å†…å®¹ï¼Œæˆ‘ä»¬æ‹¿ä¸‹äº†å¼€å‘ç¯å¢ƒè¿™ä¸€å…³ï¼Œè¿™å¯¹æˆ‘ä»¬åç»­è¯¾ç¨‹ä¸­çš„å®éªŒç›¸å½“é‡è¦ã€‚ä¸‹ä¸€æ¨¡å—è®²è§£å’Œè°ƒè¯•RISC-Væ±‡ç¼–æŒ‡ä»¤çš„æ—¶å€™ï¼Œä½ ä¼šè¿›ä¸€æ­¥ä½“ä¼šåˆ°ç¯å¢ƒæ­å»ºå¥½çš„ä¾¿åˆ©ï¼Œå…ˆå¥½å¥½ä¼‘æ¯ä¸€ä¸‹ï¼Œå’±ä»¬ä¸‹èŠ‚è¯¾è§ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>å¤„ç†ç¯å¢ƒå˜é‡åä¸ºä»€ä¹ˆè¦æ‰§è¡Œsource ./.bashrcï¼Œæ‰ä¼šç”Ÿæ•ˆï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºæé—®æˆ–è€…æ™’æ™’ä½ çš„å®éªŒè®°å½•ã€‚å¦‚æœè§‰å¾—æœ‰æ”¶è·ï¼Œä¹Ÿæ¨èä½ æŠŠè¿™èŠ‚è¯¾åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p>","comments":[{"had_liked":false,"id":355404,"user_name":"å»–é›ªå³°","can_delete":false,"product_type":"c1","uid":1014395,"ip_address":"æ¹–åŒ—","ucode":"153FAE673CD805","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7a/7b/ee2e9302.jpg","comment_is_top":false,"comment_ctime":1661336983,"is_pvip":false,"replies":[{"id":129441,"content":"å¯èƒ½ æ˜¯ ç½‘ç»œåŸå›  ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1345199,"ctime":1661677640,"ip_address":"æ¹–åŒ—","comment_id":355404,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"å¦‚æœæœ‰ä¸æƒ³ç¼–è¯‘çš„åŒå­¦ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿è¡Œï¼š\n\n1. å®‰è£…Ubuntu 22.04\n\n2. å®‰è£…ç¼–è¯‘ç¯å¢ƒï¼š\n$ sudo apt-get install autoconf automake autotools-dev curl python3 libmpc-dev libmpfr-dev libgmp-dev gawk build-essential bison flex texinfo gperf libtool patchutils bc zlib1g-dev libexpat-dev\n\n3. ç›´æ¥å®‰è£…riscv-gccå‘è¡ŒåŒ…ï¼š\n$ sudo apt install gcc-riscv64-linux-gnu gcc-riscv64-unknown-elf picolibc-riscv64-unknown-elf\n\n4. ç›´æ¥å®‰è£…qemuå‘è¡ŒåŒ…ï¼š\n$ sudo apt install qemu-user qemu-system-misc\n\n5. ç¼–å†™hello.c\n#include&lt;stdio.h&gt;\nint main()\n{\n\tprintf(&quot;Hello, riscv!\\n&quot;);\n\treturn 0;\n}\n\n6. ç¼–è¯‘ï¼š\n$ riscv64-linux-gnu-gcc hello.c -o hello\n\n7. è¿è¡Œï¼š\n$ qemu-riscv64 hello\nqemu-riscv64: Could not open &#39;&#47;lib&#47;ld-linux-riscv64-lp64d.so.1&#39;: No such file or directory\n\nå¦‚æœæŠ¥é”™æ‰¾ä¸åˆ°&#47;lib&#47;ld-linux-riscv64-lp64d.so.1ï¼Œæ˜¯å› ä¸ºè¿™ä¸ªæ–‡ä»¶å®é™…ä¸Šåœ¨&#47;usr&#47;riscv64-linux-gnu&#47;libä¸‹ï¼ŒåŠ ä¸ªå‚æ•°è¿è¡Œï¼š\n\n$ qemu-riscv64 -L &#47;usr&#47;riscv64-linux-gnu hello\nHello, riscv!\n\næœ€åï¼Œriscv64-unknown-elf-gccç¼–è¯‘è¿˜æ²¡æå®šï¼Œæ­£åœ¨æ‰¾åŸå› ","like_count":10,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585561,"discussion_content":"å¯èƒ½ æ˜¯ ç½‘ç»œåŸå›  ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661677641,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–åŒ—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2732243,"avatar":"https://static001.geekbang.org/account/avatar/00/29/b0/d3/200e82ff.jpg","nickname":"åŠŸå¤«ç†ŠçŒ«","note":"","ucode":"D124F4FA4E816F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589428,"discussion_content":"è¯·é—®ä¸€ä¸‹æˆ‘ä½¿ç”¨apt ä¸‹è½½picolibc-riscv64-unknown-elfï¼Œå®ƒç»™æˆ‘æŠ¥æ— æ³•å®šä½è½¯ä»¶åŒ…ï¼Œè¯·é—®æœ‰ä»€ä¹ˆåŠæ³•å—ï¼Ÿéœ€è¦æ·»åŠ aptçš„æºå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664888827,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2536777,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b5/49/eeeccb5e.jpg","nickname":"åº†å»º","note":"","ucode":"F97459299C6958","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586546,"discussion_content":"æˆ‘ä¹Ÿé‡åˆ°åŒæ ·çš„é—®é¢˜ã€‚ã€‚ \nubuntu:~$ riscv64-unknown-elf-gcc hello.c -o hello\nhello.c:1:9: fatal error: stdio.h: No such file or directory\n    1 | #include&lt;stdio.h&gt;\n      |         ^~~~~~~~~\ncompilation terminated.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662335316,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¾å›½","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1014395,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7a/7b/ee2e9302.jpg","nickname":"å»–é›ªå³°","note":"","ucode":"153FAE673CD805","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586032,"discussion_content":"aptå®‰è£…çš„riscv64-unknown-elf-gccå¼•ç”¨ä¸äº†stdio.hï¼Œæ‰¾äº†åŠå¤©æ²¡æ‰¾åˆ°libåœ¨å“ª\n\nhttps://github.com/riscv-software-src/riscv-tools/issues/247","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661941303,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356312,"user_name":"å…‰åè·¯å°éœ¸ç‹","can_delete":false,"product_type":"c1","uid":1582623,"ip_address":"æ¹–åŒ—","ucode":"80EB89CAAAB193","user_header":"https://static001.geekbang.org/account/avatar/00/18/26/1f/1af5d4ed.jpg","comment_is_top":false,"comment_ctime":1662130577,"is_pvip":false,"replies":[{"id":129726,"content":"66666","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1345199,"ctime":1662255625,"ip_address":"æ¹–åŒ—","comment_id":356312,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"ä½¿ç”¨äº† VS Code çš„ Remote Development è¿œç¨‹è°ƒè¯•ï¼Œå‘ç° F5 debug å›æ‰¾ä¸åˆ°ç¼–è¯‘å™¨å’Œ qemuï¼Œshell\nç™»å½•å¯ä»¥ï¼Œä¸€é€šè°·æ­Œæ˜¯  .bashrc ä¸ .bash_profile çš„é—®é¢˜ï¼ŒæŠŠç¯å¢ƒå˜é‡åŠ åˆ° bash_profile å°±å¯ä»¥äº†ï¼Œvscode æ˜¯è¿è¡Œåœ¨ login shell çš„ï¼ŒåŠ è½½çš„æ˜¯ bash_profile ï¼Œä¸ä¼šåŠ è½½  .bashrc \nrefs: https:&#47;&#47;github.com&#47;microsoft&#47;vscode-remote-release&#47;issues&#47;854\n","like_count":1,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586471,"discussion_content":"66666","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662255625,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–åŒ—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355416,"user_name":"Liu Zheng","can_delete":false,"product_type":"c1","uid":3081103,"ip_address":"æ¹–åŒ—","ucode":"14E78E879FEA05","user_header":"https://static001.geekbang.org/account/avatar/00/2f/03/8f/38038fb5.jpg","comment_is_top":false,"comment_ctime":1661348796,"is_pvip":false,"replies":[{"id":129438,"content":"å—¯ å—¯ ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1345199,"ctime":1661677494,"ip_address":"æ¹–åŒ—","comment_id":355416,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"çº æ­£ä¸€ä¸‹ã€‚åœ¨ç¯å¢ƒå˜é‡è®¾ç½®å¥½ä¹‹å‰ï¼Œå³ä½¿åœ¨`&#47;opt&#47;riscv&#47;qemu&#47;bin`ç›®å½•ä¸‹ï¼Œä¹Ÿä¸èƒ½ç›´æ¥è·‘`\nqemu-riscv32 -version &amp;&amp; qemu-riscv64 -version &amp;&amp; qemu-system-riscv32 -version &amp;&amp; qemu-system-riscv64 -version`. è€Œæ˜¯éœ€è¦`.&#47;qemu-riscv32 ...`.","like_count":1,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585557,"discussion_content":"å—¯ å—¯ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661677494,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–åŒ—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355345,"user_name":"TableBear","can_delete":false,"product_type":"c1","uid":1673990,"ip_address":"æ¹–åŒ—","ucode":"A2C0562EEA2725","user_header":"https://static001.geekbang.org/account/avatar/00/19/8b/06/fb3be14a.jpg","comment_is_top":false,"comment_ctime":1661310811,"is_pvip":false,"replies":[{"id":129442,"content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1345199,"ctime":1661677658,"ip_address":"æ¹–åŒ—","comment_id":355345,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"source çš„ä¸»è¦ç”¨é€”æ˜¯æ‰§è¡Œæ–‡ä»¶å¹¶ä»æ–‡ä»¶åŠ è½½å˜é‡åŠå‡½æ•°åˆ°æ‰§è¡Œç¯å¢ƒã€‚\n~&#47;.bashrcæ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡å·²ç»åœ¨ç”¨æˆ·ç™»å½•shellçš„æ—¶å€™åŠ è½½è¿›æ‰§è¡Œç¯å¢ƒäº†ï¼Œæ­¤æ—¶ç¼–è¾‘ä¸ä¼šè§¦å‘åŠ è½½ã€‚å¿…é¡»ä½¿ç”¨sourceæˆ–è€…é‡æ–°ç™»å½•æ‰èƒ½è§¦å‘é‡æ–°åŠ è½½","like_count":1,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585562,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661677658,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–åŒ—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361253,"user_name":"ç­±ç²","can_delete":false,"product_type":"c1","uid":1736095,"ip_address":"æ¹–åŒ—","ucode":"0896BD7CD8026C","user_header":"https://static001.geekbang.org/account/avatar/00/1a/7d/9f/53dd1d94.jpg","comment_is_top":false,"comment_ctime":1667366224,"is_pvip":false,"replies":[{"id":131761,"content":"å—¯å—¯ åŠ æ²¹","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1345199,"ctime":1668311768,"ip_address":"æ¹–åŒ—","comment_id":361253,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"åœ¨build ç›®å½•ä¸‹æ‰§è¡Œé…ç½®å‘½ä»¤æ—¶ï¼Œé‡åˆ°å‡ ä¸ªåŒ…ç¼ºå¤±ï¼Œä¾æ¬¡å®‰è£…å°±å¥½ï¼š\nsudo apt install libglib2.0-dev libpixman-1-dev libsdl2-dev","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593536,"discussion_content":"å—¯å—¯ åŠ æ²¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668311768,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–åŒ—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357974,"user_name":"overheat","can_delete":false,"product_type":"c1","uid":2675695,"ip_address":"æ¹–åŒ—","ucode":"DD82D9194C26D0","user_header":"https://static001.geekbang.org/account/avatar/00/28/d3/ef/b3b88181.jpg","comment_is_top":false,"comment_ctime":1663808709,"is_pvip":false,"replies":[{"id":130340,"content":"å¯ä»¥ ä¸ç”¨","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1345199,"ctime":1664011315,"ip_address":"æ¹–åŒ—","comment_id":357974,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"sudo make -j8, è¿™é‡Œåº”è¯¥ä¸ç”¨sudoã€‚","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588706,"discussion_content":"å¯ä»¥ ä¸ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664011315,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–åŒ—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357095,"user_name":"Geek_d47998","can_delete":false,"product_type":"c1","uid":2653196,"ip_address":"æ¹–åŒ—","ucode":"F1B1E43C39BBEE","user_header":"","comment_is_top":false,"comment_ctime":1662953343,"is_pvip":false,"replies":[{"id":130136,"content":"æœ‰å•Š ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1345199,"ctime":1663395996,"ip_address":"æ¹–åŒ—","comment_id":357095,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"tasks.jsonå’Œlaunch.jsonåœ¨è€å¸ˆç»™çš„ä»£ç ï¼Œgiteeä»“åº“ä¸‹æœ‰ï¼Œmain.cæ–‡ä»¶é‡Œè¿˜éœ€è¦æ”¾Makefileåæ‰èƒ½æŒ‰F5ç¼–è¯‘","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587936,"discussion_content":"æœ‰å•Š ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663395996,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–åŒ—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356649,"user_name":"jeigiye","can_delete":false,"product_type":"c1","uid":1123522,"ip_address":"æ¹–åŒ—","ucode":"08DE1CBBE1354C","user_header":"https://static001.geekbang.org/account/avatar/00/11/24/c2/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1662469648,"is_pvip":false,"replies":[{"id":129930,"content":"666666","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1345199,"ctime":1662885184,"ip_address":"æ¹–åŒ—","comment_id":356649,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"root@zgye-ubuntu:~&#47;test# cat hello.s \n\t.file\t&quot;hello.c&quot;\n\t.option nopic\n\t.attribute arch, &quot;rv64i2p0_m2p0_a2p0_f2p0_d2p0_c2p0&quot;\n\t.attribute unaligned_access, 0\n\t.attribute stack_align, 16\n\t.text\n\t.section\t.rodata\n\t.align\t3\n.LC0:\n\t.string\t&quot;Risc-V&quot;\n\t.align\t3\n.LC1:\n\t.string\t&quot;Hello %s\\n&quot;\n\t.text\n\t.align\t1\n\t.globl\tmain\n\t.type\tmain, @function\nmain:\n\taddi\tsp,sp,-16\n\tsd\tra,8(sp)\n\tsd\ts0,0(sp)\n\taddi\ts0,sp,16\n\tlui\ta5,%hi(.LC0)\n\taddi\ta1,a5,%lo(.LC0)\n\tlui\ta5,%hi(.LC1)\n\taddi\ta0,a5,%lo(.LC1)\n\tcall\tprintf\n\tli\ta5,0\n\tmv\ta0,a5\n\tld\tra,8(sp)\n\tld\ts0,0(sp)\n\taddi\tsp,sp,16\n\tjr\tra\n\t.size\tmain, .-main\n\t.ident\t&quot;GCC: () 12.1.0&quot;\nroot@zgye-ubuntu:~&#47;test# &#47;opt&#47;riscv&#47;qemu&#47;bin&#47;qemu-riscv64 hello\nHello Risc-V\nroot@zgye-ubuntu:~&#47;test#\n\nubuntu22.04ä¸Šè·‘é€šã€‚","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587213,"discussion_content":"666666","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662885184,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–åŒ—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355515,"user_name":"Liu Zheng","can_delete":false,"product_type":"c1","uid":3081103,"ip_address":"æ¹–åŒ—","ucode":"14E78E879FEA05","user_header":"https://static001.geekbang.org/account/avatar/00/2f/03/8f/38038fb5.jpg","comment_is_top":false,"comment_ctime":1661441025,"is_pvip":false,"replies":[{"id":129458,"content":"æ•…æ„ çš„   è¯·è¯¦ç»†è¯»æ–‡ç¨¿ ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1345199,"ctime":1661678989,"ip_address":"æ¹–åŒ—","comment_id":355515,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"æƒ³é—®ä¸€ä¸‹ï¼Œhttps:&#47;&#47;gitee.com&#47;lmos&#47;Geek-time-computer-foundation&#47;blob&#47;master&#47;lesson12~13&#47;main.c#L7-8 è¿™é‡Œé¢funcå’Œsumdataåˆ†åˆ«éƒ½æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ²¡æœ‰çœ‹åˆ°å“ªä¸ªåœ°æ–¹æœ‰å®šä¹‰è¿™ä¸¤ä¸ªä¸œè¥¿ï¼Œè·‘makeæˆ–è€…vscodeé‡Œé¢æŒ‰F5ä¹Ÿæ˜¯ä¼šæŠ¥é”™ã€‚","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585578,"discussion_content":"æ•…æ„ çš„   è¯·è¯¦ç»†è¯»æ–‡ç¨¿ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661678989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–åŒ—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":396127,"user_name":"LooMou","can_delete":false,"product_type":"c1","uid":2810138,"ip_address":"å¹¿ä¸œ","ucode":"1D09D60A7C69E6","user_header":"https://static001.geekbang.org/account/avatar/00/2a/e1/1a/3c287e37.jpg","comment_is_top":false,"comment_ctime":1733204018,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"window çš„ wsl\nDistributor ID: Ubuntu\nDescription:    Ubuntu 20.04.6 LTS\nRelease:        20.04\nCodename:       focal\n\nriscv-gnu-toolchain æˆ‘ç¼–è¯‘çš„æ˜¯ 2024.04.12-nightlyï¼Œå¯¹åº”çš„ qemu çš„ç‰ˆæœ¬æ˜¯ 8.2.1\nwget https:&#47;&#47;download.qemu.org&#47;qemu-&lt;version&gt;.tar.xz\nç›´æ¥æŒ‰æ­¥éª¤ç»§ç»­ï¼Œç¼–è¯‘æˆåŠŸï¼Œåœ¨ ~&#47;.bashrc ä¸­åŠ ç¯å¢ƒå˜é‡ä¹Ÿè¦åœ¨ ~&#47;.profile é‡ŒåŠ ã€‚\n\nä»£ç è¿è¡ŒæˆåŠŸï¼Œè°ƒè¯•æ§åˆ¶å°ï¼š\n=thread-group-added,id=&quot;i1&quot;\nWarning: Debuggee TargetArchitecture not detected, assuming x86_64.\n=cmd-param-changed,param=&quot;pagination&quot;,value=&quot;off&quot;\n0x000100c2 in _start ()\n\nBreakpoint 1, main () at main.c:6\n6\t    int i = 250;\n\nBreakpoint 2, main () at main.c:8\n8\t    return 0; \nç»ˆç«¯è¾“å‡ºï¼š\n *  æ­£åœ¨æ‰§è¡Œä»»åŠ¡: make \n\nCC -[M] æ­£åœ¨æ„å»º... add.S\nCC -[M] æ­£åœ¨æ„å»º... main.c\nCC -[M] æ­£åœ¨æ„å»º... main.elf\n *  ç»ˆç«¯å°†è¢«ä»»åŠ¡é‡ç”¨ï¼ŒæŒ‰ä»»æ„é”®å…³é—­ã€‚ \n\n *  æ­£åœ¨æ‰§è¡Œä»»åŠ¡: echo Starting RISCV-QEMU&amp;qemu-riscv32 -g 1234 .&#47;*.elf \n\nStarting RISCV-QEMU\nhello world i is 250 3 250!","like_count":0},{"had_liked":false,"id":395672,"user_name":"Pony","can_delete":false,"product_type":"c1","uid":2738352,"ip_address":"å¹¿ä¸œ","ucode":"59F5B99C5A3A9B","user_header":"https://static001.geekbang.org/account/avatar/00/29/c8/b0/853cbd58.jpg","comment_is_top":false,"comment_ctime":1731647902,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100117801,"comment_content":"&#47;opt&#47;riscv&#47;gcc&#47;lib&#47;gcc&#47;riscv64-unknown-elf&#47;10.2.0&#47;..&#47;..&#47;..&#47;..&#47;riscv64-unknown-elf&#47;bin&#47;ld: error: &#47;opt&#47;riscv&#47;gcc&#47;lib&#47;gcc&#47;riscv64-unknown-elf&#47;10.2.0&#47;rv32i&#47;ilp32&#47;crtbegin.o: Mis-matched ISA version for &#39;i&#39; extension. 2.0 vs 2.1\n&#47;opt&#47;riscv&#47;gcc&#47;lib&#47;gcc&#47;riscv64-unknown-elf&#47;10.2.0&#47;..&#47;..&#47;..&#47;..&#47;riscv64-unknown-elf&#47;bin&#47;ld: failed to merge target specific data of file &#47;opt&#47;riscv&#47;gcc&#47;lib&#47;gcc&#47;riscv64-unknown-elf&#47;10.2.0&#47;rv32i&#47;ilp32&#47;crtbegin.o\nåœ¨make allçš„æ—¶å€™æŠ¥è¿™ä¸ªé”™è¯¯æ˜¯ä¸ºä»€ä¹ˆ","like_count":0},{"had_liked":false,"id":374771,"user_name":"ğŸ”¥Burn","can_delete":false,"product_type":"c1","uid":1192589,"ip_address":"æµ™æ±Ÿ","ucode":"AD103223183C59","user_header":"https://static001.geekbang.org/account/avatar/00/12/32/8d/abcc5fce.jpg","comment_is_top":false,"comment_ctime":1684402914,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100117801,"comment_content":"archlinux,åœ¨ç¼–è¯‘qemuæ—¶æŠ¥äº†ç¼–è¯‘é”™è¯¯,éº»çƒ¦è€å¸ˆçœ‹çœ‹ä»€ä¹ˆé—®é¢˜:\nlssh -lstdc++ -Wl,--end-group\n&#47;usr&#47;bin&#47;ld: libcommon.fa.p&#47;ebpf_ebpf_rss.c.o: in function `ebpf_rss_load&#39;:\n&#47;home&#47;burn&#47;riscv-gnu-toolchain&#47;qemu-6.2.0&#47;build&#47;..&#47;ebpf&#47;ebpf_rss.c:52: undefined reference to `bpf_program__set_socket_filter&#39;\ncollect2: é”™è¯¯ï¼šld è¿”å› 1\n[1926&#47;2548] Compiling C object libqemu-riscv64-linux-user.fa.p&#47;target_riscv_vector_helper.c.o\n[1927&#47;2548] Compiling C object libqemu-riscv64-linux-user.fa.p&#47;target_riscv_translate.c.o\n[1928&#47;2548] Compiling C object libqemu-riscv32-linux-user.fa.p&#47;target_riscv_translate.c.o\nninja: build stopped: subcommand failed.\nmake: *** [Makefile:162ï¼šrun-ninja] é”™è¯¯ 1\n\n","like_count":0},{"had_liked":false,"id":370424,"user_name":"Geek_72a577","can_delete":false,"product_type":"c1","uid":2079111,"ip_address":"å››å·","ucode":"B3E8C57D24DE52","user_header":"","comment_is_top":false,"comment_ctime":1678801909,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100117801,"comment_content":"qemu-6.2.0.tar.xzæ— æ³•ä¸‹è½½ï¼Œæœ‰giteeæ›¿ä»£åœ°å€çš„å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2079111,"avatar":"","nickname":"Geek_72a577","note":"","ucode":"B3E8C57D24DE52","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":609518,"discussion_content":"#ä½¿ç”¨æ¸…åçš„æºï¼Œä¸‹è½½å…¨éƒ¨ä»£ç ï¼Œä¸ä»…ä»…qemu\ncurl https://mirrors.tuna.tsinghua.edu.cn/git/qemu/qemu.sh | bash\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679010903,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å››å·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366846,"user_name":"DeanğŸŒä¸­å‰","can_delete":false,"product_type":"c1","uid":1110692,"ip_address":"å®‰å¾½","ucode":"2B49533839E633","user_header":"https://static001.geekbang.org/account/avatar/00/10/f2/a4/f4e7e00d.jpg","comment_is_top":false,"comment_ctime":1674447268,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":3,"product_id":100117801,"comment_content":"gccç¼–è¯‘æˆåŠŸï¼š\nriscv64-unknown-elf-gcc -v\nUsing built-in specs.\nCOLLECT_GCC=riscv64-unknown-elf-gcc\nCOLLECT_LTO_WRAPPER=&#47;opt&#47;riscv&#47;gcc&#47;libexec&#47;gcc&#47;riscv64-unknown-elf&#47;10.2.0&#47;lto-wrapper\nTarget: riscv64-unknown-elf\nConfigured with: &#47;home&#47;adrain&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;riscv-gcc&#47;configure --target=riscv64-unknown-elf --prefix=&#47;opt&#47;riscv&#47;gcc --disable-shared --disable-threads --disable-tls --enable-languages=c,c++ --with-system-zlib --with-newlib --with-sysroot=&#47;opt&#47;riscv&#47;gcc&#47;riscv64-unknown-elf --disable-libmudflap --disable-libssp --disable-libquadmath --disable-libgomp --disable-nls --disable-tm-clone-registry --src=&#47;home&#47;adrain&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;riscv-gcc --enable-multilib --with-abi=lp64d --with-arch=rv64imafdc --with-tune=rocket --with-isa-spec=2.2 &#39;CFLAGS_FOR_TARGET=-Os   -mcmodel=medlow&#39; &#39;CXXFLAGS_FOR_TARGET=-Os   -mcmodel=medlow&#39;\nThread model: single\nSupported LTO compression algorithms: zlib\ngcc version 10.2.0 (GCC)\ndebugçš„æ—¶å€™ï¼š\n$ make\nCC -[M] æ­£åœ¨æ„å»º... add.S\nCC -[M] æ­£åœ¨æ„å»º... main.c\n&#47;opt&#47;riscv&#47;gcc&#47;lib&#47;gcc&#47;riscv64-unknown-elf&#47;10.2.0&#47;..&#47;..&#47;..&#47;..&#47;riscv64-unknown-elf&#47;bin&#47;ld: cannot find crtbegin.o: No such file or directory\n&#47;opt&#47;riscv&#47;gcc&#47;lib&#47;gcc&#47;riscv64-unknown-elf&#47;10.2.0&#47;..&#47;..&#47;..&#47;..&#47;riscv64-unknown-elf&#47;bin&#47;ld: cannot find -lgcc\ncollect2: error: ld returned 1 exit status\nmake: *** [Makefile:37: main.elf] Error 1\næ˜¯ä¸ºå•¥å‘¢","like_count":0,"discussions":[{"author":{"id":1110692,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f2/a4/f4e7e00d.jpg","nickname":"DeanğŸŒä¸­å‰","note":"","ucode":"2B49533839E633","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":645531,"discussion_content":"æ²¡å¾—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1716302280,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2431113,"avatar":"https://static001.geekbang.org/account/avatar/00/25/18/89/da85a540.jpg","nickname":"ä¼˜ç¾çš„èµ«è’‚","note":"","ucode":"CD9158107019EF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":619304,"discussion_content":"æˆ‘ä¹Ÿé‡åˆ°åŒæ ·çš„é—®é¢˜ï¼Œè§£å†³äº†å—\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684945693,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é™•è¥¿","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364874,"user_name":"é‡Šè¿¦","can_delete":false,"product_type":"c1","uid":1007643,"ip_address":"æ²³å—","ucode":"FEC5C7052C3847","user_header":"https://static001.geekbang.org/account/avatar/00/0f/60/1b/2b668b12.jpg","comment_is_top":false,"comment_ctime":1671631087,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100117801,"comment_content":"ä¸ºä»€ä¹ˆæˆ‘æŒ‰f5åå¼¹å‡ºçš„å¯¹ç”»æ¡†ä¸­cpuçš„å¯„å­˜å™¨æ˜¯x86-64çš„å¯„å­˜å™¨ï¼Œæ²¡æœ‰æ˜¾ç¤ºrisc-vå¯„å­˜å™¨ï¼Ÿæ­¥éª¤ä¹Ÿæ˜¯æŒ‰ç…§è€å¸ˆæ–‡ä¸­çš„æ­¥éª¤æ“ä½œçš„ã€‚","like_count":0}]}