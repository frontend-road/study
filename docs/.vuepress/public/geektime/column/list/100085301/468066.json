{"id":468066,"title":"46ï½œè½¯ä»¶æ¶æ„ï¼šå¦‚ä½•ç”¨Rustæ¶æ„å¤æ‚ç³»ç»Ÿï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é™ˆå¤©ã€‚</p><p>å¯¹ä¸€ä¸ªè½¯ä»¶ç³»ç»Ÿæ¥è¯´ï¼Œä¸åŒéƒ¨é—¨å…³å¿ƒçš„ä¾§é‡ç‚¹ä¸åŒã€‚äº§å“ã€è¿è¥å’Œé”€å”®éƒ¨é—¨å…³å¿ƒäº§å“çš„åŠŸèƒ½ï¼Œæµ‹è¯•éƒ¨é—¨å…³å¿ƒäº§å“çš„ç¼ºé™·ï¼Œå·¥ç¨‹éƒ¨é—¨é™¤äº†å¼€å‘åŠŸèƒ½ã€è§£å†³ç¼ºé™·å¤–ï¼Œè¿˜è¦ä¸æ–­åœ°ç»´æŠ¤å’Œä¼˜åŒ–ç³»ç»Ÿçš„æ¶æ„ï¼Œå‡å°‘ä¹‹å‰é—ç•™çš„æŠ€æœ¯å€ºã€‚</p><p>ä»é•¿è¿œçœ‹ï¼Œç¼ºé™·å’ŒæŠ€æœ¯å€ºå¯¹è½¯ä»¶ç³»ç»Ÿæ˜¯è´Ÿé¢çš„ä½œç”¨ï¼Œè€ŒåŠŸèƒ½å’Œæ¶æ„å¯¹è½¯ä»¶ç³»ç»Ÿæ˜¯æ­£é¢çš„ä½œç”¨ã€‚</p><p>ä»æ˜¯å¦å¯¹ç”¨æˆ·å¯è§æ¥è¯´ï¼Œç›¸æ¯”å¯è§çš„åŠŸèƒ½å’Œç¼ºé™·ï¼Œæ¶æ„å’ŒæŠ€æœ¯å€ºæ˜¯ä¸å¯è§çš„ï¼Œå®ƒä»¬å¾€å¾€ä¼šè¢«å…¬å¸çš„å†³ç­–å±‚ä»¥å„ç§ç†ç”±å¿½è§†ï¼Œå°¤å…¶ï¼Œå½“ä»–ä»¬çš„ KPI / OKR ä¸Šéƒ½å¸ƒæ»¡äº†æ€¥åŠŸè¿‘åˆ©çš„æ•°å­—ï¼Œæ¯ä¸ªå­£åº¦æˆ–è€…æ¯åŠä¸ªè´¢å¹´éƒ½æ˜¯ç”Ÿæ­»æˆ˜ï¼ˆwin or go homeï¼‰çš„æ—¶å€™ï¼Œåªè¦èƒ½å®ç°åŠŸèƒ½æ€§çš„ä¸­çŸ­æœŸç›®æ ‡ï¼Œä»–ä»¬ä»€ä¹ˆéƒ½å¯ä»¥ç‰ºç‰²ã€‚<strong>ä¸å¯è§å¹¶ä¸”å¾ˆéš¾å¸¦æ¥ç›´æ¥æ”¶ç›Šçš„æ¶æ„è®¾è®¡ï¼Œå¾€å¾€æ˜¯æœ€å…ˆè¢«ç‰ºç‰²æ‰çš„</strong>ã€‚</p><p>ä½†æ¶æ„ä»¥åŠæ¶æ„ç›¸å…³çš„å·¥ä½œä¼šå¸¦æ¥é•¿æœŸçš„å›æŠ¥ã€‚</p><p>å› ä¸ºå¹³æ—¶æˆ‘ä»¬å¾€ç³»ç»Ÿé‡Œæ·»åŠ æ–°çš„åŠŸèƒ½ï¼Œä¼šä¸å¯é¿å…åœ°å¢åŠ ç³»ç»Ÿçš„ç¼ºé™·ï¼Œæ½œåœ¨å¼•å…¥æ–°çš„æŠ€æœ¯å€ºï¼Œä»¥åŠæ‰°ä¹±åŸæœ¬ç¨³å®šçš„æ¶æ„ã€‚è¿™æ˜¯ä¸€ä¸ªç†µå¢çš„è¿‡ç¨‹ã€‚ç¼ºé™·ä¼šæ‹–ç´¯åŠŸèƒ½çš„è¡¨ç°ï¼Œè¿›ä¸€æ­¥æ¶åŒ–ç³»ç»Ÿä¸­çš„æŠ€æœ¯å€ºï¼›è€ŒæŠ€æœ¯å€ºä¼šå»¶ç¼“æ–°åŠŸèƒ½çš„å¼•å…¥ï¼Œæ”¾å¤§å·²æœ‰çš„å’Œæœªæ¥çš„ç¼ºé™·ï¼Œå¹¶ç ´åç°æœ‰çš„æ¶æ„ã€‚è¿™æ ·ä¸€ç›´æŒç»­ä¸‹å»ï¼Œæ•´ä¸ªç³»ç»Ÿä¼šè¿›å…¥åˆ°ä¸€ä¸ªä¸‹é™é€šé“ï¼Œç›´åˆ°æ— ä»¥ä¸ºç»§ã€‚</p><p>ä¸ºäº†é¿å…è¿™æ ·çš„äº‹æƒ…å‘ç”Ÿï¼Œ<strong>æˆ‘ä»¬éœ€è¦é€šè¿‡å¯¹æ¶æ„è¿›è¡Œç»´æŠ¤æ€§çš„å·¥ä½œï¼Œæ¥å‡å°‘ç¼ºé™·ï¼Œä¿®å¤æŠ€æœ¯å€ºï¼Œæ”¹å–„åŠŸèƒ½ï¼Œæœ€ç»ˆå°†æ•´ä¸ªç³»ç»Ÿæ‹‰å›åˆ°ä¸Šå‡é€šé“</strong>ã€‚</p><!-- [[[read_end]]] --><p><img src=\"https://static001.geekbang.org/resource/image/4b/61/4b6463f536428989d418aefa38ef3561.jpg?wh=1920x1223\" alt=\"å›¾ç‰‡\"></p><p>åœ¨æˆ‘çœ‹æ¥ï¼Œè½¯ä»¶ç³»ç»Ÿæ˜¯æ¶æ„ã€åŠŸèƒ½ã€ç¼ºé™·ï¼Œä»¥åŠæŠ€æœ¯å€ºä¹‹é—´å…±åŒä½œç”¨ï¼Œäº’ç›¸æ‹‰æ‰¯çš„ä¸€ä¸ªç»“æœã€‚</p><p>åœ¨ä¸€ä¸ªé¡¹ç›®çš„åˆæœŸï¼Œä¸ºäº†å¿«é€Ÿè¾¾åˆ°äº§å“å’Œå¸‚åœºçš„å¥‘åˆï¼ˆproduct market fitï¼‰ï¼Œå¼•å…¥æŠ€æœ¯å€ºæ¥æœ€å¤§ç¨‹åº¦æé«˜æ„å»ºçš„é€Ÿåº¦ï¼Œæ˜¯æœ€ä½³é€‰æ‹©ã€‚ä½†è¿™å¹¶ä¸æ„å‘³ç€æˆ‘ä»¬å¯ä»¥æ”¾å¼ƒæ¶æ„çš„è®¾è®¡ï¼ŒåŸ‹å¤´ç å­—ã€‚</p><p>è¿‡å»äºŒåå¹´æ—¶é—´ï¼Œæ•æ·å®£è¨€ï¼ˆAgile Manifestoï¼‰å’Œç²¾ç›Šåˆ›ä¸šï¼ˆLean startupï¼‰å¯¹è½¯ä»¶ç¤¾åŒºæœ€å¤§çš„è´Ÿé¢å½±å“å°±æ˜¯ï¼Œä¸€å¤§å †å¤–è¡Œæˆ–è€…å¹¶æ²¡æœ‰æ·±åˆ»ç†è§£è½¯ä»¶å·¥ç¨‹çš„ä»ä¸šè€…ï¼Œè¿‡åˆ†è¿½æ±‚é€Ÿåº¦ï¼Œè¿‡åº¦æ›²è§£ MVPï¼ˆMinimum Viable Productï¼‰ï¼Œè€Œå¿½è§†äº†ä»èµ·ç‚¹å‡ºå‘å‰ï¼Œå¿…ä¸å¯å°‘çš„æ¶æ„å’Œè®¾è®¡åŠŸå¤«ï¼Œå¯¼è‡´å¤§éƒ¨åˆ†æŠ€æœ¯å€ºå®é™…ä¸Šæ˜¯æ¶æ„å’Œè®¾è®¡é˜¶æ®µçš„å€ºåŠ¡ã€‚</p><p>ä½†äº§å“åˆæœŸï¼Œåœ¨æ–¹å‘å¹¶ä¸æ˜æœ—çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¦‚ä½•æ¶æ„ç³»ç»Ÿå‘¢ï¼Ÿ</p><p>ç±»ä¼¼ç€‘å¸ƒæ¨¡å‹é‚£æ ·çš„è¿­ä»£æ–¹å¼ï¼Œåœ¨äº§å“çš„åˆæœŸèŠ±è´¹å¤§é‡çš„ç²¾åŠ›åšæ¶æ„å’Œè®¾è®¡ï¼Œå¾€å¾€ä¼šå¯¼è‡´è¿‡åº¦è®¾è®¡ï¼Œå¼•å…¥ä¸å¿…è¦çš„éº»çƒ¦å’Œå¯èƒ½æ°¸è¿œç”¨ä¸ä¸Šçš„â€œç²¾å¦™â€ç»“æ„ï¼›ä½†è¿‡åˆ†è¿½æ±‚æ•æ·ï¼Œå¹²äº†å†è¯´ï¼Œåˆä¼šè®©æŠ€æœ¯å€ºå¾ˆå¿«å°±ç§¯ç´¯åˆ°ä¸€ä¸ªéš¾ä»¥ä¸ºç»§çš„åœ°æ­¥ã€‚</p><p>æ‰€ä»¥ï¼Œå¯¹äºè¿™æ ·çš„åœºæ™¯ï¼Œæˆ‘ä»¬åº”è¯¥é‡‡ç”¨<strong>æ¸è¿›å¼çš„æ¶æ„è®¾è®¡ï¼Œä» MVP çš„éœ€æ±‚ä¸­å¯»æ‰¾æ¶æ„çš„æ ¸å¿ƒè¦ç´ ï¼Œæ„å»ºä¸€ä¸ªåŸå§‹ä½†å®Œæ•´çš„ç»“æ„ï¼ˆprimitive wholeï¼‰ï¼Œç„¶åå›´ç»•ç€æ ¸å¿ƒè¦ç´ æ¼”è¿›ã€‚</strong>æ¯”å¦‚ï¼ˆå›¾ç‰‡æ¥æºï¼š<a href=\"https://commons.wikimedia.org/wiki/File:From_minimum_viable_product_to_more_complex_product.png\">ç»´åŸºç™¾ç§‘</a>ï¼‰ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/0e/91/0eb74319e30e7ae164f94ba43a5bbd91.png?wh=1060x216\" alt=\"å›¾ç‰‡\"></p><p>ä»Šå¤©æˆ‘ä»¬å°±æ¥è®²ä¸€è®²æ€ä¹ˆè€ƒè™‘æ¶æ„è®¾è®¡ï¼Œä»¥åŠå¦‚ä½•ç”¨Rustæ„å»ºå‡ºä¸€äº›å…¸å‹çš„æ¶æ„é£æ ¼ï¼Œå¸Œæœ›ä½ åœ¨å­¦å®Œè¿™ä¸€è®²æœ€å¤§çš„ä½“ä¼šæ˜¯ï¼šåšä»»ä½•å¼€å‘ä¹‹å‰ï¼Œå…»æˆä¹ æƒ¯ï¼Œé¦–å…ˆè¦åšå¿…è¦çš„æ¶æ„å’Œè®¾è®¡ã€‚</p><h2>å¦‚ä½•è€ƒè™‘æ¶æ„è®¾è®¡ï¼Ÿ</h2><p>æ¶æ„è®¾è®¡æ˜¯ä¸€ä¸ªéå¸¸å¹¿æ³›çš„æ¦‚å¿µï¼Œå¾ˆéš¾ä¸€è¨€ä»¥è”½ä¹‹ã€‚åœ¨ã€ŠFundamentals of Software Architectureã€‹ä¸€ä¹¦ä¸­ï¼Œä½œè€…ä»å››ä¸ªç»´åº¦æ¥æ¢è®¨æ¶æ„ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul>\n<li>Structureï¼šæ¶æ„çš„é£æ ¼å’Œç»“æ„ï¼Œæ¯”å¦‚ MVVMã€å¾®æœåŠ¡</li>\n<li>Characteristicsï¼šæ¶æ„çš„ä¸»è¦æŒ‡æ ‡ï¼Œæ¯”å¦‚å¯ä¼¸ç¼©æ€§ã€å®¹é”™æ€§å’Œæ€§èƒ½</li>\n<li>Decisionsï¼šæ¶æ„çš„ç¡¬æ€§è§„åˆ™ï¼Œæ¯”å¦‚æœåŠ¡è°ƒç”¨<strong>åªèƒ½</strong>é€šè¿‡æ¥å£å®Œæˆ</li>\n<li>Design Principlesï¼šæ¶æ„çš„è®¾è®¡åŸåˆ™ï¼Œæ¯”å¦‚<strong>ä¼˜å…ˆ</strong>ä½¿ç”¨æ¶ˆæ¯é€šè®¯</li>\n</ul><p>å¯ä»¥å¯¹ç…§ä¸‹é¢è¿™å¼ å›¾ç†è§£ï¼Œæˆ‘ä»¬ä¸€ä¸ªä¸ªè¯´ï¼ˆæ¥æºï¼š<a href=\"https://book.douban.com/subject/34464806/\">Fundamentals of Software Architecture</a>ï¼‰ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/dd/ca/dd64c19e17dfbe45d922c3d1cb6495ca.png?wh=1420x1104\" alt=\"å›¾ç‰‡\"></p><h3>Structureæ¶æ„çš„é£æ ¼</h3><p>é¦–å…ˆæ˜¯æ¶æ„çš„é£æ ¼ã€‚å®æˆ˜è¯¾ä¸­æˆ‘ä»¬ä¸€ç›´åœ¨è¿­ä»£çš„ KV serverï¼Œå°±é‡‡å–äº†åˆ†å±‚çš„ç»“æ„ï¼ŒæŠŠç½‘ç»œå±‚ã€ä¸šåŠ¡å±‚å’Œå­˜å‚¨å±‚åˆ†éš”å¼€ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/82/2c/82da823b4eb16935fdeyy727e3b3262c.jpg?wh=1920x1145\" alt=\"å›¾ç‰‡\"></p><p>è™½ç„¶æœ€å¼€å§‹ç½‘ç»œå±‚é•¿ä»€ä¹ˆæ ·å­æˆ‘ä»¬å¹¶ä¸æ¸…æ¥šï¼Œä½†è¿™ç§åˆ†å±‚ä½¿å¾—åæ¥ä¸æ–­è¿­ä»£ç½‘ç»œå±‚çš„æ—¶å€™ï¼Œä¸ç®¡æ˜¯åŠ å…¥ TLS çš„æ”¯æŒï¼Œè¿˜æ˜¯ä½¿ç”¨ yamux åšå¤šè·¯å¤ç”¨ï¼Œéƒ½ä¸ä¼šå½±å“åˆ°ä¸šåŠ¡å±‚ã€‚</p><p>ä¸€ä¸ªå¤æ‚çš„å¤§å‹ç³»ç»Ÿå¾€å¾€å¯ä»¥ä½¿ç”¨åˆ†æ²»çš„åŸåˆ™å¤„ç†ã€‚ä¹‹å‰å±•ç¤ºè¿‡è¿™æ ·çš„å›¾ï¼Œä¸€ä¸ªäº’è”ç½‘åº”ç”¨çš„æœ€åŸºæœ¬ã€æœ€æ™®éçš„ç»“æ„ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/a7/db/a774a2ccd5a960d35f4b44248d2180db.png?wh=1482x807\" alt=\"å›¾ç‰‡\"></p><p>ä»ä¸šåŠ¡çš„å¤§æ–¹å‘ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œåˆ†å±‚å¤„ç†ï¼Œæ¯å±‚åˆå¯ä»¥é€‰æ‹©ä¸åŒçš„ç»“æ„ï¼Œæ¯”å¦‚å¾®æœåŠ¡ç»“æ„ã€äº‹ä»¶é©±åŠ¨ç»“æ„ã€ç®¡é“ç»“æ„ç­‰ç­‰ï¼Œç„¶åæ‹†åˆ†å‡ºæ¥çš„æ¯ä¸ªç»„ä»¶å†…éƒ¨åˆå¯ä»¥ç”¨åˆ†å±‚ï¼Œæ¯”å¦‚æŠŠæ•°æ®å±‚ã€ä¸šåŠ¡é€»è¾‘å±‚å’Œæ¥å£å±‚åˆ†ç¦»ï¼Œè¿™æ ·ä¸€å±‚å±‚å»¶å±•ä¸‹å»ï¼Œç›´åˆ°æ‹†åˆ†å‡ºæ¥çš„ç»“æœå¯ä»¥ä»¥â€œå¤©â€ä¸ºå•ä½æ‰§è¡Œã€‚</p><p>åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€‰å–è·Ÿ MVP æœ‰å…³çš„è·¯å¾„è¿›è¡Œå¼€å‘ï¼Œå¹¶åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¸æ–­å®¡è§†æ¶æ„çš„è®¾è®¡ï¼Œåšç›¸åº”çš„ä¿®æ”¹ã€‚ä½ å¦‚æœå›é¡¾ä¸€ä¸‹ KV server çš„æ¼”è¿›è¿‡ç¨‹ï¼Œä»æœ€åˆæ„é€ åˆ°ç›®å‰è¿™ä¸ªå‡ ä¹æˆå‹çš„ç‰ˆæœ¬ï¼Œå°±å¯ä»¥æ„Ÿå—åˆ°ä¸€å¼€å§‹æœ‰ä¸€ä¸ªå®Œæ•´ä½†åŸå§‹çš„ç»“æ„ï¼Œç„¶åå›´ç»•ç€æ ¸å¿ƒæ¼”è¿›çš„é‡è¦æ€§ã€‚</p><h3>Characteristicsæ¶æ„çš„ä¸»è¦æŒ‡æ ‡</h3><p>å†æ¥çœ‹æ¶æ„çš„ä¸»è¦æŒ‡æ ‡ã€‚å°±åƒå›¾ä¸­å±•ç¤ºçš„é‚£æ ·ï¼Œä¸€ä¸ªç³»ç»Ÿæœ‰éå¸¸å¤šçš„æŒ‡æ ‡æ¥è¡¡é‡å…¶æˆåŠŸï¼ŒåŒ…æ‹¬å¹¶ä¸é™äºï¼šé«˜æ€§èƒ½ã€å¯ç”¨æ€§ã€å¯é æ€§ã€å¯æµ‹æ€§ã€å¯ä¼¸ç¼©æ€§ã€å®‰å…¨æ€§ã€çµæ´»æ€§ã€å®¹é”™æ€§ã€è‡ªæˆ‘ä¿®å¤æ€§ã€å¯è¯»æ€§ç­‰ç­‰ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/c6/80/c66069481e9319d9f0dc74f5107c3180.png?wh=710x552\" alt=\"å›¾ç‰‡\"></p><p>ä¸è¿‡ï¼Œè¿™äº›æŒ‡æ ‡å¹¶ä¸æ˜¯å¹³ç­‰çš„å…³ç³»ï¼Œä¸åŒçš„ç³»ç»Ÿä¼šæœ‰ä¸åŒçš„ä¼˜å…ˆçº§ã€‚</p><p>å¯¹äº KV server æ¥è¯´ï¼Œæˆ‘ä»¬å…³å¿ƒç³»ç»Ÿçš„æ€§èƒ½ / å®‰å…¨æ€§ / å¯æµ‹æ€§ï¼Œæ‰€ä»¥ä½¿ç”¨äº†æœ€åŸºæœ¬çš„ in-memory hashmap æ¥ä¿è¯æŸ¥è¯¢æ€§èƒ½ã€ä½¿ç”¨ TCP + yamux æ¥ä¿è¯ç½‘ç»œæ€§èƒ½ã€ä½¿ç”¨ channel  å’Œ dashmap æ¥ä¿è¯å¹¶å‘æ€§èƒ½ï¼Œä»¥åŠä½¿ç”¨ TLS æ¥ä¿è¯å®‰å…¨æ€§ã€‚åŒæ—¶ï¼Œä¸€ç›´æ³¨é‡æ¥å£çš„æ¸…æ™°å’Œå¯æµ‹è¯•æ€§ã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼Œä¸€æ—¦æˆ‘ä»¬åšå‡ºäº†æ¶æ„æŒ‡æ ‡ä¸Šçš„å†³å®šï¼Œé‚£ä¹ˆè¿›ä¸€æ­¥çš„è®¾è®¡ä¼šä¼˜å…ˆè€ƒè™‘è¿™äº›æŒ‡æ ‡çš„éœ€æ±‚ã€‚</p><h3>Decisionsæ¶æ„çš„ç¡¬æ€§è§„åˆ™</h3><p>åœ¨æ¶æ„è®¾è®¡çš„è¿‡ç¨‹ä¸­ï¼Œå¼•å…¥ç¡¬æ€§çº¦æŸæˆ–è€…åŸåˆ™éå¸¸é‡è¦ã€‚å®ƒå°±åƒæ¶æ„çš„â€œåŸºæœ¬æ³•â€ï¼Œä¸å¯è§¦ç¢°ã€‚<strong>å¾ˆå¤šæ—¶å€™ï¼Œå½“ä½ å¼•å…¥äº†æŸä¸ªç»“æ„ï¼Œä½ ä¹Ÿå°±å¼•å…¥äº†è¿™ä¸ªç»“æ„æ‰€å¸¦æ¥çš„çš„çº¦æŸ</strong>ï¼Œæ¯”å¦‚å¾®æœåŠ¡ç»“æ„ï¼Œå®ƒçš„çº¦æŸå°±æ˜¯ï¼šæœåŠ¡é—´çš„ä¸€åˆ‡è®¿é—®åªèƒ½é€šè¿‡å…¬å¼€çš„æ¥å£æ¥å®Œæˆï¼Œä»»ä½•æœåŠ¡é—´ä¸èƒ½æœ‰ç§ä¸‹çš„çº¦å®šã€‚</p><p>è¿™ä¸ªç°åœ¨çœ‹èµ·æ¥å¾ˆå®¹æ˜“ç†è§£çš„å†³å®šï¼Œåœ¨å·®ä¸å¤šäºŒåå¹´å‰ï¼Œæ˜¯æŒ¯è‹å‘è©çš„å‘å–Šã€‚2002 å¹´ï¼Œäºšé©¬é€Šè¿˜æ˜¯ä¸€å®¶å°å…¬å¸ï¼Œè´ä½æ–¯è¿˜ç¦»é¦–å¯Œå·®äº†å‡ ä¸ªæ¯”å°”ç›–èŒ¨ã€‚ä½œä¸ºä¸€ä¸ªä¸æ˜¯ç‰¹åˆ«æ‡‚æŠ€æœ¯çš„ MBAï¼Œä»–æ’°å†™äº†ä¸€ä¸ªåˆ’æ—¶ä»£çš„å¤‡å¿˜å½•ï¼Œå¹¶åœ¨äºšé©¬é€Šå¼ºåˆ¶æ‰§è¡Œï¼Œè¿™ä¸ªå¤‡å¿˜å½•å¾ˆç®€å•ï¼Œçœ‹å®ƒçš„åŸæ–‡ï¼š</p><blockquote>\n<ol>\n<li>All teams will henceforth expose their data and functionality through service interfaces.</li>\n<li>Teams must communicate with each other through these interfaces.</li>\n<li>There will be no other form of interprocess communication allowed: no direct linking, no direct reads of another teamâ€™s data store, no shared-memory model, no back-doors whatsoever. The only communication allowed is via service interface calls over the network.</li>\n<li>It doesnâ€™t matter what technology they use. HTTP, Corba, Pubsub, custom protocols â€” doesnâ€™t matter.</li>\n<li>All service interfaces, without exception, must be designed from the ground up to be externalizable. That is to say, the team must plan and design to be able to expose the interface to developers in the outside world. No exceptions.</li>\n<li>Anyone who doesnâ€™t do this will be fired.</li>\n<li>Thank you; have a nice day!</li>\n</ol>\n</blockquote><p>è¿™ä¸ªå¤‡å¿˜å½•ä¿ƒæˆäº† AWS è¿™ä¸ªåºå¤§çš„äº‘æœåŠ¡å¸å›½çš„è¯ç”Ÿã€‚è´ä½æ–¯å¯¹æ¶æ„çš„è§†é‡ï¼Œè‡³ä»Šè¿˜è®©æˆ‘å•§å•§ç§°å¥‡ã€‚ä»–ç²¾å‡†åœ°â€œçœ‹â€åˆ°äº†äº‘æœåŠ¡çš„æœªæ¥ï¼Œå¹¶ä»¥æ¶æ„çš„ç¡¬æ€§çº¦æŸæ¥ä¿ƒæˆä¸‰ä¸ªè¦ç‚¹ï¼šç‹¬ç«‹çš„æœåŠ¡ã€æœåŠ¡é—´åªèƒ½é€šè¿‡æ¥å£è°ƒç”¨ã€æœåŠ¡çš„æ¥å£è¦èƒ½å¤Ÿè¢«å¤–éƒ¨å¼€å‘è€…è°ƒç”¨ã€‚</p><h3>Design Principlesæ¶æ„çš„è®¾è®¡åŸåˆ™</h3><p>æœ€åï¼Œæˆ‘ä»¬ç®€å•è¯´è¯´æ¶æ„çš„è®¾è®¡åŸåˆ™ã€‚å’Œæ¶æ„çš„ç¡¬æ€§çº¦æŸä¸åŒçš„æ˜¯ï¼Œè®¾è®¡åŸåˆ™æ›´å¤šæ˜¯æ¨èåšæ³•ï¼Œè€Œéä¸å¯è§¦ç¢°çš„é›·åŒºã€‚æˆ‘ä»¬åœ¨æ„å»ºç³»ç»Ÿçš„æ—¶å€™ï¼Œè¦ç•™æœ‰ä½™åœ°ï¼Œè¿™æ ·åœ¨å¼€å‘å’Œè¿­ä»£çš„è¿‡ç¨‹ä¸­ï¼Œæ‰èƒ½æ ¹æ®æƒ…å†µé€‰æ‹©åˆé€‚çš„è®¾è®¡ã€‚</p><p>æ¯”å¦‚å¯¹äº KV server æ¥è¯´ï¼Œæ¨èä½¿ç”¨ TCP / yamux æ¥å¤„ç†ç½‘ç»œï¼Œä½†å¹¶ä¸æ˜¯è¯´ gRPC ç”šè‡³ QUIC å°±ä¸èƒ½ä½¿ç”¨ï¼›æ¨èç”¨äºŒè¿›åˆ¶çš„ protobuf æ¥åœ¨å®¢æˆ·ç«¯/æœåŠ¡å™¨ä¼ è¾“æ•°æ®ï¼Œä½†åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œå¦‚æœåŸºäºæ–‡æœ¬çš„ä¼ è¾“æ–¹å¼ï¼Œæˆ–è€…é protobuf çš„äºŒè¿›åˆ¶ä¼ è¾“æ–¹å¼ï¼ˆæ¯”å¦‚ flatbufferï¼‰æ›´åˆé€‚ï¼Œé‚£ä¹ˆæœªæ¥å®Œå…¨å¯ä»¥æ›¿æ¢è¿™éƒ¨åˆ†çš„è®¾è®¡ã€‚</p><h2>å¦‚ä½•ç”¨ Rust æ„å»ºå…¸å‹çš„æ¶æ„é£æ ¼ï¼Ÿ</h2><p>å†å¤ä¹ ä¸€ä¸‹åˆšæ‰èŠçš„æ¶æ„è®¾è®¡çš„å››ä¸ªæ–¹é¢ï¼š</p><ul>\n<li>Structureæ¶æ„çš„é£æ ¼å’Œç»“æ„</li>\n<li>Characteristicsæ¶æ„çš„ä¸»è¦æŒ‡æ ‡</li>\n<li>Decisionsæ¶æ„çš„ç¡¬æ€§è§„åˆ™</li>\n<li>Design Principlesæ¶æ„çš„è®¾è®¡åŸåˆ™</li>\n</ul><p>å…¶ä¸­åä¸‰ç‚¹æ¶æ„çš„æŒ‡æ ‡ã€ç¡¬æ€§è§„å®šä»¥åŠè®¾è®¡åŸåˆ™ï¼Œå’Œå…·ä½“é¡¹ç›®çš„å…³è”åº¦å¾ˆå¤§ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰æ¨¡å¼åŒ–çš„å·¥å…·æ¥å¥—ç”¨å®ƒã€‚ä½†æ¶æ„é£æ ¼æ˜¯æœ‰å¾ˆå¤šå›ºå®šçš„å¥—è·¯çš„ã€‚è¿™äº›å¥—è·¯ï¼Œå¾€å¾€æ˜¯åœ¨æ—¥ç§¯æœˆç´¯çš„è½¯ä»¶å¼€å‘å®è·µä¸­ï¼Œé€æ¸å½¢æˆçš„ã€‚</p><p>ç›®å‰æ¯”è¾ƒæ™®éä½¿ç”¨çš„æ¶æ„é£æ ¼æœ‰ï¼šåˆ†å±‚ç»“æ„ã€æµæ°´çº¿ç»“æ„ã€æ’ä»¶ç»“æ„ã€å¾®æœåŠ¡ç»“æ„ã€äº‹ä»¶é©±åŠ¨ç»“æ„ç­‰ã€‚</p><p>å¾®æœåŠ¡ç»“æ„ç›¸ä¿¡å¤§å®¶æ¯”è¾ƒç†Ÿæ‚‰ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°ï¼›äº‹ä»¶é©±åŠ¨ç»“æ„å¯ä»¥é€šè¿‡ channel æ¥å®ç°ï¼Œæˆ‘ä»¬åœ¨KV server ä¸­æ„å»ºçš„ pub/sub å°±æœ‰äº‹ä»¶é©±åŠ¨çš„å½±å­ï¼Œä½†ä¸€ä¸ªé«˜æ€§èƒ½çš„äº‹ä»¶é©±åŠ¨ç»“æ„éœ€è¦ç¬¬ä¸‰æ–¹çš„æ¶ˆæ¯é˜Ÿåˆ—æ¥æä¾›æ”¯æŒï¼Œæ¯”å¦‚ <a href=\"https://kafka.apache.org/\">kafka</a>ã€<a href=\"https://nats.io/\">nats</a> ç­‰ï¼Œä½ å¯ä»¥è‡ªå·±å»çœ‹å®ƒä»¬å„è‡ªæ¨èçš„äº‹ä»¶é©±åŠ¨æ¨¡å‹ã€‚</p><p>ä¸è¿‡ä¸ç®¡ä½ ç”¨ä½•ç§åˆ†å¸ƒå¼çš„æ¶æ„ï¼Œæœ€ç»ˆï¼Œæ¯ä¸ªæœåŠ¡å†…éƒ¨çš„æ¶æ„è¿˜æ˜¯ä¼šä½¿ç”¨<strong>åˆ†å±‚ç»“æ„ã€æµæ°´çº¿ç»“æ„å’Œæ’ä»¶ç»“æ„</strong>ï¼Œæˆ‘ä»¬è¿™é‡Œå°±ç®€å•è®²è®²è¿™ä¸‰è€…ã€‚</p><h3>åˆ†å±‚ç»“æ„</h3><p>å¼€å¤´å·²ç»è°ˆåˆ°äº†åˆ†å±‚ï¼Œè¿™æ˜¯æœ€æœ´ç´ ï¼Œä¹Ÿæ˜¯æœ€å®ç”¨çš„æ¶æ„é£æ ¼ã€‚è½¯ä»¶è¡Œä¸šçš„ä¸€å¥<a href=\"https://en.wikipedia.org/wiki/Indirection\">è‡³ç†åè¨€</a>æ˜¯ï¼š</p><blockquote>\n<p>All problems in computer science can be solved by another level of indirection.</p>\n</blockquote><p>è¿™ç§ä½¿ç”¨åˆ†å±‚æ¥æ¼‚äº®åœ°è§£å†³é—®é¢˜çš„æ€è·¯ï¼Œè´¯ç©¿æ•´ä¸ªè½¯ä»¶è¡Œä¸šã€‚</p><p>æ“ä½œç³»ç»Ÿæ˜¯åº”ç”¨ç¨‹åºå’Œç¡¬ä»¶çš„ä¸­é—´å±‚ï¼›è™šæ‹Ÿå†…å­˜æ˜¯çº¿æ€§å†…å­˜å’Œç‰©ç†å†…å­˜çš„ä¸­é—´å±‚ï¼›è™šæ‹Ÿæœºæ˜¯æ“ä½œç³»ç»Ÿå’Œè£¸æœºçš„ä¸­é—´å±‚ï¼›å®¹å™¨æ˜¯åº”ç”¨ç¨‹åºå’Œæ“ä½œç³»ç»Ÿçš„ä¸­é—´å±‚ï¼›ISO çš„ OSI æ¨¡å‹ï¼ŒæŠŠç½‘ç»œåˆ’åˆ†ä¸º 7 å±‚ï¼Œè¿™è®©æˆ‘ä»¬è‡³ä»Šè¿˜å—ç›Šäºå‡ åå¹´å‰å°±è®¾è®¡å‡ºæ¥çš„ç½‘ç»œç»“æ„ã€‚</p><p>åˆ†å±‚ï¼Œæ„å‘³ç€æ˜ç¡®æ¯ä¸€å±‚çš„èŒè´£èŒƒå›´ä»¥åŠå±‚ä¸å±‚ä¹‹é—´æ¥å£ã€‚ä¸€æ—¦æˆ‘ä»¬æœ‰æ˜æ™°çš„å±‚çº§åˆ’åˆ†ï¼Œä»¥åŠç¡¬æ€§è§„å®šå±‚ä¸å±‚ä¹‹é—´åªèƒ½é€šè¿‡å…¬å¼€æ¥å£è°ƒç”¨ï¼Œä¸”ä¸èƒ½è·¨å±‚è°ƒç”¨ï¼Œé‚£ä¹ˆï¼Œç³»ç»Ÿå°±å…·å¤‡äº†å¾ˆå¼ºçš„çµæ´»æ€§ï¼ŒæŸå±‚çš„å†…éƒ¨å®ç°å¯ä»¥å®Œå…¨è¢«ä¸åŒçš„å®ç°æ¥æ›¿æ¢ï¼Œè€Œä¸å¿…æ‹…å¿ƒä¸Šä¸‹æ¸¸å—åˆ°å½±å“ã€‚</p><p><strong>åœ¨ Rust ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ trait æ¥è¿›è¡Œæ¥å£çš„å®šä¹‰ï¼Œé€šè¿‡æ¥å£æ¥åˆ†å±‚</strong>ã€‚å°±åƒ KV server å±•ç°çš„é‚£æ ·ï¼ŒæŠŠç½‘ç»œå±‚å’Œä¸šåŠ¡å±‚åˆ†å¼€ï¼Œç½‘ç»œå±‚æˆ–è€…ä¸šåŠ¡å±‚å„è‡ªçš„è¿­ä»£ä¸ä¼šå½±å“å¯¹æ–¹çš„è¡Œä¸ºã€‚</p><h3>æµæ°´çº¿ç»“æ„</h3><p>å¤§éƒ¨åˆ†ç³»ç»Ÿçš„å¤„ç†æµç¨‹éƒ½å¯ä»¥ç”¨æµæ°´çº¿ç»“æ„æ¥è¡¨è¿°ã€‚æˆ‘ä»¬å¯ä»¥æŠŠå¤„ç†æµç¨‹ä¸­çš„è¦ç´ æ„å»ºæˆä¸€ä¸ªä¸ªæ¥å£ä¸€è‡´ã€åŠŸèƒ½å•ä¸€çš„ç»„ä»¶ï¼Œç„¶åæ ¹æ®ä¸åŒçš„è¾“å…¥ï¼Œæ¥é€‰æ‹©åˆé€‚çš„ç»„ä»¶ï¼Œå°†å®ƒä»¬ç»„ç»‡ä¸ºä¸€ä¸ªå®Œæ•´çš„æµæ°´çº¿ï¼Œç„¶åå†ä¾æ¬¡æ‰§è¡Œã€‚</p><p>è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸éœ€è¦å¯¹è¾“å…¥è¿›è¡Œåˆ¤æ–­æ¥å†³å®šæ‰§è¡Œä»€ä¹ˆä»£ç ï¼Œè¦æ‰§è¡Œçš„ä»£ç å·²ç»åŒ…å«åœ¨æµæ°´çº¿ä¹‹ä¸­ã€‚è€Œæµæ°´çº¿çš„æ„å»ºï¼Œåœ¨ç¼–è¯‘æœŸã€åŠ è½½æœŸå°±å¯ä»¥é¢„å¤„ç†å¥½æœ€å¸¸è§çš„æµç¨‹ï¼ˆfast pathï¼‰ï¼Œåªæœ‰ä¸é‚£ä¹ˆå¸¸è§çš„è¾“å…¥ï¼Œæ‰éœ€è¦åœ¨è¿è¡Œæ—¶æ„å»ºåˆé€‚çš„æµæ°´çº¿ï¼ˆslow pathï¼‰ã€‚ä¸€æ—¦ä¸€ä¸ªæ–°çš„æµæ°´çº¿è¢«æ„å»ºå‡ºæ¥ï¼Œè¿˜å¯ä»¥ç¼“å­˜å®ƒï¼Œä¸‹ä¸€æ¬¡å°±å¯ä»¥ç›´æ¥æ‰§è¡Œï¼ˆfast pathï¼‰ã€‚</p><p>æˆ‘ä»¬çœ‹ä¸€ä¸ªæµæ°´çº¿å¤„ç†çš„å…¸å‹ç»“æ„ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/3c/44/3ce79a54e9e70ac9bb39b85c43aa9b44.jpg?wh=1920x1028\" alt=\"å›¾ç‰‡\"></p><p>è¿™ç§ç»“æ„åœ¨å®æˆ˜ä¸­éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚ Elixir ä¸‹å¤„ç†ç½‘ç»œæµç¨‹çš„ <a href=\"https://hexdocs.pm/plug/readme.html\">Plug</a>ã€‚ä¸‹å›¾æ˜¯æˆ‘ä¹‹å‰åœ¨å¤„ç†åŒºå—é“¾çš„ TX æ—¶è®¾è®¡çš„æµæ°´çº¿ç»“æ„ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/6f/23/6f83ae231406885cd184235658bd7623.png?wh=1474x938\" alt=\"å›¾ç‰‡\"></p><p><strong>æµæ°´çº¿å¯ä»¥æ˜¯æ¶æ„çº§çš„å®è§‚æµæ°´çº¿ï¼Œä¹Ÿå¯ä»¥æ˜¯å‡½æ•°çº§çš„å¾®è§‚æµæ°´çº¿ã€‚å®ƒæœ€å¤§çš„å¥½å¤„æ˜¯é€šè¿‡ç»„åˆä¸åŒçš„åŸºæœ¬åŠŸèƒ½ï¼Œå®Œæˆå„ç§å„æ ·å¤æ‚å¤šå˜çš„éœ€æ±‚</strong>ã€‚å°±åƒä¹é«˜ç§¯æœ¨ï¼Œæœ€åŸºæœ¬çš„ç§¯æœ¨ç»„ä»¶æ˜¯æœ‰é™çš„ï¼Œä½†æˆ‘ä»¬å¯ä»¥åˆ›å»ºå‡ºæ— ç©·å¤šçš„ç»„åˆã€‚</p><p>ä½¿ç”¨ Rust åˆ›å»ºæµæ°´çº¿ç»“æ„å¹¶ä¸å¤æ‚ï¼Œä½ å¯ä»¥åˆ©ç”¨ enum / trait æ„é€ ã€‚æ¯”å¦‚ä¸‹é¢çš„å®ä¾‹ï¼ˆ<a href=\"https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=7a08a1385214271d393399e638caa36e\">ä»£ç </a>ï¼‰ï¼š</p><pre><code class=\"language-rust\">use std::fmt;\n\npub use async_trait::async_trait;\npub type BoxedError = Box&lt;dyn std::error::Error&gt;;\n\n/// rerun è¶…è¿‡ 5 æ¬¡ï¼Œå°±è§†ä¸ºå¤±è´¥\nconst MAX_RERUN: usize = 5;\n\n/// plug æ‰§è¡Œçš„ç»“æœ\n#[must_use]\npub enum PlugResult&lt;Ctx&gt; {\n    Continue,\n    Rerun,\n    Terminate,\n    NewPipe(Vec&lt;Box&lt;dyn Plug&lt;Ctx&gt;&gt;&gt;),\n    Err(BoxedError),\n}\n\n/// plug traitï¼Œä»»ä½• pipeline ä¸­çš„ç»„ä»¶éœ€è¦å®ç°è¿™ä¸ª trait\n#[async_trait]\npub trait Plug&lt;Ctx&gt;: fmt::Display {\n    async fn call(&amp;self, ctx: &amp;mut Ctx) -&gt; PlugResult&lt;Ctx&gt;;\n}\n\n/// pipeline ç»“æ„\n#[derive(Default)]\npub struct Pipeline&lt;Ctx&gt; {\n    plugs: Vec&lt;Box&lt;dyn Plug&lt;Ctx&gt;&gt;&gt;,\n    pos: usize,\n    rerun: usize,\n    executed: Vec&lt;String&gt;,\n}\n\nimpl&lt;Ctx&gt; Pipeline&lt;Ctx&gt; {\n    /// åˆ›å»ºä¸€ä¸ªæ–°çš„ pipeline\n    pub fn new(plugs: Vec&lt;Box&lt;dyn Plug&lt;Ctx&gt;&gt;&gt;) -&gt; Self {\n        Self {\n            plugs,\n            pos: 0,\n            rerun: 0,\n            executed: Vec::with_capacity(16),\n        }\n    }\n\n    /// æ‰§è¡Œæ•´ä¸ª pipelineï¼Œè¦ä¹ˆæ‰§è¡Œå®Œæ¯•ï¼Œè¦ä¹ˆå‡ºé”™\n    pub async fn execute(&amp;mut self, ctx: &amp;mut Ctx) -&gt; Result&lt;(), BoxedError&gt; {\n        while self.pos &lt; self.plugs.len() {\n            self.add_execution_log();\n            let plug = &amp;self.plugs[self.pos];\n\n            match plug.call(ctx).await {\n                PlugResult::Continue =&gt; {\n                    self.pos += 1;\n                    self.rerun = 0;\n                }\n                PlugResult::Rerun =&gt; {\n                    // pos ä¸å¾€å‰èµ°ï¼Œé‡æ–°æ‰§è¡Œç°æœ‰ç»„ä»¶ï¼Œrerun å¼€å§‹ç´¯åŠ \n                    self.rerun += 1;\n                }\n                PlugResult::Terminate =&gt; {\n                    break;\n                }\n                PlugResult::NewPipe(v) =&gt; {\n                    self.pos = 0;\n                    self.rerun = 0;\n                    self.plugs = v;\n                }\n                PlugResult::Err(e) =&gt; return Err(e),\n            }\n\n            // å¦‚æœ rerun 5 æ¬¡ï¼Œè¿”å›é”™è¯¯\n            if self.rerun &gt;= MAX_RERUN {\n                return Err(anyhow::anyhow!(\"max rerun\").into());\n            }\n        }\n\n        Ok(())\n    }\n\n    pub fn get_execution_log(&amp;self) -&gt; &amp;[String] {\n        &amp;self.executed\n    }\n\n    fn add_execution_log(&amp;mut self) {\n        self.executed.push(self.plugs[self.pos].to_string());\n    }\n}\n</code></pre><p>ä½ å¯ä»¥åœ¨ playground é‡Œè¿è¡ŒåŒ…æ‹¬å®Œæ•´ç¤ºä¾‹ä»£ç çš„<a href=\"https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=4c0a642205a816f3fbf95e86f2856134\">ä¾‹å­</a>ã€‚</p><p>å¼€å§‹çš„æ—¶å€™ï¼Œåˆå§‹åŒ–ä¸€ä¸ªåŒ…å« [SecurityChecker, Normalizer] ä¸¤ä¸ªç»„ä»¶çš„æµæ°´çº¿ã€‚åœ¨æ‰§è¡Œ SecurityChecker è¿‡ç¨‹ä¸­ï¼Œæµæ°´çº¿è¢«æ›´æ–°ä¸º [CacheLoader, DataLoader, CacheWriter] çš„ç»“æ„ï¼Œç„¶ååœ¨æ‰§è¡Œåˆ° DataLoader æ—¶ï¼Œå‡ºé”™é€€å‡ºã€‚æ‰€ä»¥æ•´ä¸ªæ‰§è¡Œæµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br>\n<img src=\"https://static001.geekbang.org/resource/image/cb/1c/cb33da7d36eecf7405ffd56cec4e1c1c.jpg?wh=1920x1028\" alt=\"å›¾ç‰‡\"></p><h3>æ’ä»¶ï¼ˆå¾®å†…æ ¸ï¼‰ç»“æ„</h3><p>æ’ä»¶ç»“æ„ï¼ˆPlugin Architectureï¼‰ä¹Ÿè¢«ç§°ä¸ºå¾®å†…æ ¸ç»“æ„ï¼ˆMicrokernel Architectureï¼‰ï¼Œå®ƒå¯ä»¥è®©ä½ çš„ç³»ç»Ÿæ‹¥æœ‰ä¸€ä¸ªè¶³å¤Ÿå°çš„æ ¸å¿ƒï¼Œç„¶åå›´ç»•ç€è¿™ä¸ªæ ¸å¿ƒä»¥æ’ä»¶çš„æ–¹å¼æ³¨å…¥æ–°çš„åŠŸèƒ½ã€‚</p><p>æˆ‘ä»¬å¹³æ—¶ä½¿ç”¨çš„ VS Code å°±æ˜¯å…¸å‹çš„æ’ä»¶ç»“æ„ã€‚å®ƒçš„æ ¸å¿ƒåŠŸèƒ½å°±æ˜¯æ–‡æœ¬çš„ç¼–è¾‘ï¼Œä½†é€šè¿‡å„ç§æ’ä»¶ï¼Œå®ƒå¯ä»¥æ”¯æŒä»£ç çš„è¯­æ³•é«˜äº®ã€é”™è¯¯æ£€æŸ¥ã€æ ¼å¼åŒ–ç­‰ç­‰åŠŸèƒ½ã€‚</p><p>åœ¨æ„å»ºæ’ä»¶ç»“æ„æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è®¾è®¡ä¸€å¥—è¶³å¤Ÿç¨³å®šçš„æ¥å£ï¼Œä¿è¯æ’ä»¶å’Œæ ¸å¿ƒä¹‹é—´çš„äº¤äº’ï¼›è¿˜éœ€è¦è®¾è®¡ä¸€å¥—æ³¨å†Œæœºåˆ¶ï¼Œè®©æ’ä»¶å¯ä»¥è¢«æ³¨å†Œè¿›ç³»ç»Ÿï¼Œæˆ–è€…ä»ç³»ç»Ÿä¸­åˆ é™¤ã€‚</p><p>åœ¨ Rust ä¸‹ï¼Œé™¤äº†æ­£å¸¸ä½¿ç”¨ trait å’Œ trait object æ¥æ„å»ºæ’ä»¶æœºåˆ¶ï¼Œåœ¨ç³»ç»Ÿå†…éƒ¨ä½¿ç”¨æ’ä»¶ç»“æ„å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡ WebAssemblyï¼ˆé€šè¿‡ wasmer æˆ– wasmtimeï¼‰ æˆ–è€… rhai è¿™æ ·çš„åµŒå…¥å¼è„šæœ¬æ¥å…è®¸ç¬¬ä¸‰æ–¹é€šè¿‡æ’ä»¶æ¥æ‰©å±•ç³»ç»Ÿçš„èƒ½åŠ›ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/bb/f5/bb0cf05d0e1a4d85f60794569c9819f5.jpg?wh=1920x1028\" alt=\"å›¾ç‰‡\"></p><h2>å°ç»“</h2><p>æ¶æ„æ˜¯ä¸€ä¸ªå¤æ‚çš„ä¸œè¥¿ï¼Œå®ƒå……æ»¡äº†æƒè¡¡ï¼ˆtrade-offï¼‰ã€‚æˆ‘éå¸¸æ¨å´‡ Clojure åˆ›é€ è€… Rich Hickey çš„ä¸€å¥è¯ï¼Œå¤§æ„æ˜¯è¯´â€œä½ åªæœ‰æœ‰äº†è¶³å¤Ÿçš„æ›¿ä»£æ–¹æ¡ˆï¼Œæ‰è°ˆå¾—ä¸Šæƒè¡¡â€ã€‚</p><p>æˆ‘ä»¬åœ¨åšè½¯ä»¶å¼€å‘æ—¶ï¼Œä¸è¦ç€æ€¥ä¸Šæ¥å°±ç”©å¼€è†€å­å†™ä»£ç ï¼Œè¦å…ˆè®©éœ€æ±‚åœ¨å¤§è„‘ä¸­æ²‰æ·€ï¼Œæ€è€ƒè¿™ä¸ªéœ€æ±‚å’Œå·²æœ‰çš„å“ªäº›éœ€æ±‚ç›¸å…³ã€å’Œæˆ‘è§è¿‡çš„å“ªäº›ç³»ç»Ÿç±»ä¼¼ï¼Œç„¶åå†å»æ€è€ƒéƒ½æœ‰ä»€ä¹ˆæ ·çš„æ–¹æ¡ˆã€å®ƒä»¬çš„åˆ©å¼Šæ˜¯ä»€ä¹ˆã€‚</p><p>å¥½çš„æ¶æ„å¸ˆäº†è§£è¶³å¤Ÿå¤šçš„æ¶æ„é£æ ¼ï¼Œæ‰€ä»¥ä¸æ‹˜æ³¥äºæŸä¸€ç§ï¼Œä¹Ÿä¸ä¼šæ‰‹é‡Œæ‹¿ç€é”¤å­ï¼Œçœ‹ä»€ä¹ˆéƒ½æ˜¯é’‰å­ã€‚å¥½çš„æ¶æ„å¸ˆå¹³æ—¶è¿˜æœ‰è¶³å¤Ÿå¤šçš„é˜…è¯»ã€è¶³å¤Ÿå¤šçš„ç§¯ç´¯ï¼Œè¿™æ ·åœ¨é‡åˆ°æ¶æ„é—®é¢˜æ—¶ï¼Œå¯ä»¥è¿…é€Ÿå’Œæ›¾ç»é‡è§çš„ç³»ç»Ÿè”ç³»å’Œç±»æ¯”ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘éå¸¸å»ºè®®ä½ ä»¬å¤šé˜…è¯»å¸‚é¢ä¸Šä¼˜ç§€çš„ä»£ç ï¼Œå› ä¸ºå¹¿æ³›ä¸”æœ‰æ·±åº¦çš„é˜…è¯»æ‰èƒ½æ‹“å®½ä½ çš„çœ¼ç•Œï¼Œæ‰èƒ½å¸®ä½ ç´¯ç§¯è¶³å¤Ÿå¤šçš„ç´ æã€‚</p><p>å½“ç„¶ï¼Œé˜…è¯»ä»…ä»…æ˜¯ç¬¬ä¸€æ­¥ã€‚<strong>æœ‰äº†é˜…è¯»çš„åŸºç¡€ï¼Œä½ å¯ä»¥å¤šè¿›è¡Œâ€œçº¸ä¸Šè°ˆå…µâ€çš„è„‘åŠ›è®­ç»ƒ</strong>ï¼Œçœ‹åˆ°ä¸€ä¸ªç³»ç»Ÿï¼Œå°±å°è¯•åˆ†æå®ƒçš„æ¶æ„ï¼Œçœ‹çœ‹è‡ªå·±èƒ½ä¸èƒ½è‡ªåœ†å…¶è¯´ï¼Œæ¶æ„å‡ºç±»ä¼¼çš„äº§å“ã€‚è¿™æ ·çš„è„‘åŠ›è®­ç»ƒé™¤äº†å¯ä»¥æ›´å¥½åœ°å¸®åŠ©ä½ æå‡æ¶æ„åˆ†æèƒ½åŠ›å¤–ï¼Œè¿˜å¯ä»¥å¸®ä½ å­¦åˆ°â€œä½ ä¸çŸ¥é“ä½ ä¸çŸ¥é“çš„äº‹æƒ…â€ã€‚</p><p>æ¯”å¦‚æˆ‘æ›¾ç»èŠ±äº†äº›åŠŸå¤«å»ç ”ç©¶ Notionï¼Œé¡ºç€è¿™æ¡çº¿æ›´æ·±å…¥åœ°æ¢ç´¢ OT å’Œ CRDT ç®—æ³•ï¼Œåœ¨æ·±å…¥æ¢ç´¢ä¸­ï¼Œæˆ‘é‡è§äº† <a href=\"https://github.com/yjs/y-crdt\">yjs</a>ã€<a href=\"https://github.com/automerge/automerge-rs\">automerge</a>ã€<a href=\"https://github.com/josephg/diamond-types\">diamond-types</a> ç­‰ä¼˜ç§€çš„å·¥å…·ï¼Œè¿™äº›éƒ½æ˜¯æˆ‘ä¹‹å‰ä»æœªä½¿ç”¨è¿‡çš„ä¸œè¥¿ã€‚</p><p>æœ€åï¼Œä½ è¿˜éœ€è¦å»çœŸæ­£æŠŠè‡ªå·±è®¾è®¡çš„æ¶æ„è½åœ°ï¼Œåº”ç”¨åœ¨æŸäº›é¡¹ç›®ä¸­ã€‚ä¸€ä¸ªäººä¸€ç”Ÿä¸­å¯ä»¥ä¸»å¯¼æŸäº›å¤§é¡¹ç›®æ¶æ„çš„æœºä¼šå¹¶ä¸å¤šï¼Œæ‰€ä»¥ï¼Œ<strong>åœ¨æœºä¼šæ¥ä¸´æ—¶ï¼ŒæŠ“ä½å®ƒï¼ŒæŠŠä½ å¹³ç”Ÿæ‰€å­¦åº”ç”¨ä¸Šå»ï¼Œæ­¤æ—¶ä½ ä¼šæ¸æ¸æ„Ÿå—åˆ°å¤´è„‘ä¸­çš„æ¶æ„å’ŒçœŸæ­£è½åœ°çš„æ¶æ„ä¹‹é—´çš„å·®å¼‚</strong>ã€‚</p><p>æœ‰åŒå­¦å¯èƒ½ä¼šé—®ï¼Œå¦‚æœæœºä¼šæ²¡æœ‰æ¥ä¸´æ€ä¹ˆåŠï¼Ÿé‚£ä¹ˆå°±åœ¨ä¸šä½™æ—¶é—´å»å†™å„ç§ä½ æ„Ÿå…´è¶£çš„ä¸œè¥¿ï¼Œä»¥æ­¤æ¥ç£¨ç»ƒè‡ªå·±çš„èƒ½åŠ›ï¼Œé»˜é»˜ç­‰å¾…å±äºè‡ªå·±çš„æœºä¼šã€‚å½“å¹´æ˜æœˆå†™ã€Šæ˜æœé‚£äº›äº‹å„¿ã€‹ï¼Œåˆ˜æ…ˆæ¬£å†™ã€Šä¸‰ä½“ã€‹ï¼Œä¹Ÿå¹¶ä¸æ˜¯ä»–ä»¬åœ¨å·¥ä½œä¸­å¾—åˆ°çš„æœºä¼šã€‚å…´è¶£æœ€å¥½çš„è€å¸ˆï¼Œçƒ­çˆ±æ˜¯å‰è¿›çš„åŠ¨åŠ›ã€‚</p><h3>æ€è€ƒé¢˜</h3><p>è¯·èŠ±äº›æ—¶é—´é˜…è¯»ã€ŠFundamentals of Software Architectureã€‹è¿™æœ¬ä¹¦ã€‚</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«ä½ ä»Šå¤©çš„å­¦ä¹ æ”¶è·æˆ–æ„Ÿæ‚Ÿã€‚å¦‚æœä½ è§‰å¾—æœ‰æ”¶è·ï¼Œä¹Ÿæ¬¢è¿åˆ†äº«ç»™èº«è¾¹çš„æœ‹å‹ï¼Œé‚€ä»–ä¸€èµ·è®¨è®ºã€‚æˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ã€‚</p>","neighbors":{"left":{"article_title":"45ï½œé˜¶æ®µå®æ“ï¼ˆ8ï¼‰ï¼šæ„å»ºä¸€ä¸ªç®€å•çš„KV server-é…ç½®/æµ‹è¯•/ç›‘æ§/CI/CD","id":466825},"right":{"article_title":"å¤§å’–åŠ©åœºï½œå¼€æ‚Ÿä¹‹å¡ï¼ˆä¸Šï¼‰ï¼šRustçš„ç°çŠ¶ã€æœºé‡ä¸æŒ‘æˆ˜","id":468940}},"comments":[{"had_liked":false,"id":326482,"user_name":"èƒ¡å°æ¶µ","can_delete":false,"product_type":"c1","uid":2004538,"ip_address":"","ucode":"2E750C65EC282C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/96/3a/e06f8367.jpg","comment_is_top":false,"comment_ctime":1639538896,"is_pvip":false,"replies":[{"id":"118792","content":"æˆ‘è€ƒè™‘ä¸€ä¸‹ï¼Œå›å¤´çœ‹çœ‹è¿™ä¸ªéœ€æ±‚æœ‰å¤šå°‘ã€‚æœ€åˆçš„è®¡åˆ’æœ‰å®ï¼Œä½†å› ä¸ºè¿™æ˜¯å…¥é—¨çš„è¯¾ç¨‹ï¼Œæ‰€ä»¥ç æ‰äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1079375","ctime":1639803751,"ip_address":"","comment_id":326482,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27409342672","product_id":100085301,"comment_content":"è€å¸ˆï¼Œæœ‰ç©ºçš„æ—¶å€™èƒ½ä¸èƒ½å‡ºä¸€äº›å®çš„æ•™ç¨‹ï¼Œå£°æ˜å®è¿˜å¥½ï¼Œåœ¨ç½‘ä¸Šä¸€ç›´æ²¡æœ‰æ‰¾åˆ°æ¯”è¾ƒå¥½çš„è¿‡ç¨‹å®çš„æ•™ç¨‹ã€‚å› ä¸ºä¹‹å‰æ¥è§¦è¿‡QTï¼Œäº†è§£åˆ°ä¸€äº›c++æ¡†æ¶åœ¨ç”¨è‡ªå·±çš„æ–¹å¼ï¼ˆå®åŠ ä¸Šå…³é”®å­—æ‰©å±•ï¼‰å¯¹è¯­è¨€æˆ–ç¨‹åºçš„è¡Œä¸ºè¿›è¡Œå¾ˆæœ‰æ„ä¹‰çš„æ‰©å±•ï¼Œæ‰€ä»¥æ„Ÿè§‰å®è¿™ä¸€å—è¿˜æ˜¯å¤§æœ‰å¯ä¸ºçš„ï¼Œä¸çŸ¥é“è€å¸ˆæœ‰ç©ºæ—¶èƒ½ä¸èƒ½ç•¥æˆä¸€äºŒã€‚","like_count":6,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539665,"discussion_content":"æˆ‘è€ƒè™‘ä¸€ä¸‹ï¼Œå›å¤´çœ‹çœ‹è¿™ä¸ªéœ€æ±‚æœ‰å¤šå°‘ã€‚æœ€åˆçš„è®¡åˆ’æœ‰å®ï¼Œä½†å› ä¸ºè¿™æ˜¯å…¥é—¨çš„è¯¾ç¨‹ï¼Œæ‰€ä»¥ç æ‰äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639803751,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":347740,"user_name":"é˜³é˜³","can_delete":false,"product_type":"c1","uid":2716386,"ip_address":"","ucode":"5E61EF18F08DF2","user_header":"https://static001.geekbang.org/account/avatar/00/29/72/e2/9a19b202.jpg","comment_is_top":false,"comment_ctime":1654385359,"is_pvip":false,"discussion_count":0,"race_medal":2,"score":"18834254543","product_id":100085301,"comment_content":"å¼ºçƒˆè¦æ±‚è€å¸ˆå‡ºæ–°è¯¾ç¨‹ï¼Œæ¶æ„è¯¾ç¨‹å’ŒRusté«˜çº§ã€‚","like_count":4},{"had_liked":false,"id":326549,"user_name":"ç»™æˆ‘ç‚¹é˜³å…‰å°±ç¿çƒ‚","can_delete":false,"product_type":"c1","uid":1462209,"ip_address":"","ucode":"F3B0439BE0D062","user_header":"https://static001.geekbang.org/account/avatar/00/16/4f/c1/7f596aba.jpg","comment_is_top":false,"comment_ctime":1639558702,"is_pvip":true,"replies":[{"id":"118790","content":"å¦‚æœæ˜¯å†…éƒ¨çš„ plugin ç»“æ„ï¼Œå…¶å®å¾ˆç®€å•ï¼Œç”¨ trait å’Œ trait object å¤„ç†å³å¯ï¼›å¦‚æœæ˜¯å¤–éƒ¨çš„ pluginï¼Œç¨å¾®éº»çƒ¦ï¼Œè¿™é‡Œæœ‰ä¸ªä¾‹å­ï¼šhttps:&#47;&#47;github.com&#47;luojia65&#47;plugin-system-example","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1079375","ctime":1639803618,"ip_address":"","comment_id":326549,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14524460590","product_id":100085301,"comment_content":"è€å¸ˆï¼Œå¯ä¸å¯ä»¥å…·ä½“ç»™ä¸€ä¸ªé¡¹ç›®ä»£ç ï¼Œå…³äºæ’ä»¶æ¶æ„çš„ï¼Œç‰¹åˆ«å¥½å¥‡è¿™ç§æ¶æ„æ˜¯æ€æ ·å®ç°çš„<br>","like_count":3,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539663,"discussion_content":"å¦‚æœæ˜¯å†…éƒ¨çš„ plugin ç»“æ„ï¼Œå…¶å®å¾ˆç®€å•ï¼Œç”¨ trait å’Œ trait object å¤„ç†å³å¯ï¼›å¦‚æœæ˜¯å¤–éƒ¨çš„ pluginï¼Œç¨å¾®éº»çƒ¦ï¼Œè¿™é‡Œæœ‰ä¸ªä¾‹å­ï¼šhttps://github.com/luojia65/plugin-system-example","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639803619,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358748,"user_name":"inmo","can_delete":false,"product_type":"c1","uid":1159530,"ip_address":"åŒ—äº¬","ucode":"A9590E563C93CC","user_header":"https://static001.geekbang.org/account/avatar/00/11/b1/6a/b1e05143.jpg","comment_is_top":false,"comment_ctime":1664682034,"is_pvip":false,"replies":[{"id":"130514","content":"åŠ æ²¹ï¼Œè¿›ä¸€æ­¥æœ‰è¿›ä¸€æ­¥çš„ä¹è¶£ï¼Œå›½åº†å¿«ä¹","user_name":"ç¼–è¾‘å›å¤","user_name_real":"ç¼–è¾‘","uid":"2547771","ctime":1664710650,"ip_address":"åŒ—äº¬","comment_id":358748,"utype":2}],"discussion_count":1,"race_medal":0,"score":"1664682034","product_id":100085301,"comment_content":"åŠªåŠ›æ¶ˆåŒ–","like_count":0,"discussions":[{"author":{"id":2547771,"avatar":"https://static001.geekbang.org/account/avatar/00/26/e0/3b/8ec916b2.jpg","nickname":"å¤šå°‘","note":"","ucode":"0A6EF7AA6E4BB7","race_medal":0,"user_type":4,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589343,"discussion_content":"åŠ æ²¹ï¼Œè¿›ä¸€æ­¥æœ‰è¿›ä¸€æ­¥çš„ä¹è¶£ï¼Œå›½åº†å¿«ä¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664710650,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":329842,"user_name":"Geek_4ca442","can_delete":false,"product_type":"c1","uid":2860513,"ip_address":"","ucode":"637CE0FC836D89","user_header":"","comment_is_top":false,"comment_ctime":1641566949,"is_pvip":false,"replies":[{"id":"120738","content":"å¦‚æœåŒä¸€ä¸ªæ•°æ®è¦è¢«ç”¨å¤šæ¬¡ï¼Œå¯ä»¥ä½¿ç”¨å¼•ç”¨ã€‚å¦‚æœå¤šæ¬¡ä½¿ç”¨éƒ½éœ€è¦æ‰€æœ‰æƒï¼Œé‚£ä¹ˆåªèƒ½ cloneã€‚å¦‚æœè¦å‡å°‘æ•°æ®æœ¬èº«çš„ cloneï¼Œå¯ä»¥ç”¨ Rc&#47;Arc","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1079375","ctime":1642307593,"ip_address":"","comment_id":329842,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1641566949","product_id":100085301,"comment_content":"è€å¸ˆè¯·æ•™ä¸ªé—®é¢˜ï¼šå¦‚æœåœ¨ kvServer ä¸­ä¿å­˜çš„æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œvalueå­—æ®µæ˜¯è¦å­˜å‚¨çš„å€¼ã€‚<br>ç±»ä¼¼ä¸‹é¢çš„åŠŸèƒ½è¯¥å¦‚ä½•å®ç°ï¼Ÿä¼ è¿›æ¥çš„å‚æ•°valéœ€è¦ç”¨åˆ°ä¸¤æ¬¡ï¼Œå°½ç®¡é€»è¾‘ä¸Šåªå¯èƒ½ç”¨åˆ°ä¸€æ¬¡ã€‚<br>æˆ–è€…åœ¨ if ... else è¯­å¥ä¸­æœ‰ç±»ä¼¼çš„æƒ…å†µï¼Œå¦‚ä½•å®ç°æ¯”è¾ƒå¥½ï¼Ÿæ˜¯ä¸æ˜¯åªèƒ½cloneï¼Ÿ<br><br>pub fn set&lt;T: Any + Send + Sync, K: Into&lt;String&gt;&gt;(&amp;self, key: K, val: T) {<br>        self.map.entry(key.into())<br>        .and_modify(|o| {<br>            *o.value = val;<br>            &#47;&#47; ...ä¸€äº›å…¶å®ƒç›¸å…³çš„å¤„ç†<br>        })<br>        .or_insert(Value {<br>            count: 0,<br>            value: val,<br>        });<br>}","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546375,"discussion_content":"å¦‚æœåŒä¸€ä¸ªæ•°æ®è¦è¢«ç”¨å¤šæ¬¡ï¼Œå¯ä»¥ä½¿ç”¨å¼•ç”¨ã€‚å¦‚æœå¤šæ¬¡ä½¿ç”¨éƒ½éœ€è¦æ‰€æœ‰æƒï¼Œé‚£ä¹ˆåªèƒ½ cloneã€‚å¦‚æœè¦å‡å°‘æ•°æ®æœ¬èº«çš„ cloneï¼Œå¯ä»¥ç”¨ Rc/Arc","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642307593,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":329092,"user_name":"gnu","can_delete":false,"product_type":"c1","uid":1631832,"ip_address":"","ucode":"B598402D9377D9","user_header":"https://static001.geekbang.org/account/avatar/00/18/e6/58/a0f74927.jpg","comment_is_top":false,"comment_ctime":1641114316,"is_pvip":false,"replies":[{"id":"120745","content":":)","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1079375","ctime":1642307712,"ip_address":"","comment_id":329092,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1641114316","product_id":100085301,"comment_content":"æ²¡æƒ³åˆ° rust è¯¾ç¨‹è¿˜è—æœ‰æ¶æ„è®¾è®¡æ€æƒ³çš„ bonusï¼æƒŠå–œäº†","like_count":1,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546383,"discussion_content":":)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642307712,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327020,"user_name":"0@1","can_delete":false,"product_type":"c1","uid":1549191,"ip_address":"","ucode":"932A4139DB8169","user_header":"https://static001.geekbang.org/account/avatar/00/17/a3/87/eb923eb3.jpg","comment_is_top":false,"comment_ctime":1639841484,"is_pvip":false,"replies":[{"id":"120825","content":"æš‚æ—¶è¿˜æ²¡æœ‰ï¼Œä¹Ÿè®¸ä»¥åæœ‰","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1079375","ctime":1642311545,"ip_address":"","comment_id":327020,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1639841484","product_id":100085301,"comment_content":"è€å¸ˆï¼Œæœ‰æ²¡æœ‰å‡ºRusté«˜çº§è¯¾ç¨‹çš„è®¡åˆ’","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546470,"discussion_content":"æš‚æ—¶è¿˜æ²¡æœ‰ï¼Œä¹Ÿè®¸ä»¥åæœ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642311545,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1214893,"avatar":"https://static001.geekbang.org/account/avatar/00/12/89/ad/4efd929a.jpg","nickname":"è€è€","note":"","ucode":"C32E743518DECD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":563557,"discussion_content":"åŒæ±‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650023921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":546470,"ip_address":""},"score":563557,"extra":""}]},{"author":{"id":2716386,"avatar":"https://static001.geekbang.org/account/avatar/00/29/72/e2/9a19b202.jpg","nickname":"é˜³é˜³","note":"","ucode":"5E61EF18F08DF2","race_medal":2,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580490,"discussion_content":"åŒæ±‚å†å‡ºä¸€å¥—Rustæ•™ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658213976,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":326668,"user_name":"å¹»å¢ƒä¹‹æ¡¥","can_delete":false,"product_type":"c1","uid":1061517,"ip_address":"","ucode":"F9F4DD94CB554E","user_header":"https://static001.geekbang.org/account/avatar/00/10/32/8d/91cd624b.jpg","comment_is_top":false,"comment_ctime":1639624837,"is_pvip":false,"replies":[{"id":"118779","content":"å—¯","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1079375","ctime":1639792464,"ip_address":"","comment_id":326668,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1639624837","product_id":100085301,"comment_content":"æ’ä»¶åŒ–è®¾è®¡ä¸»è¦æ˜¯æŠŠç³»ç»Ÿçš„æ ¸å¿ƒèƒ½åŠ›æç‚¼å‡ºæ¥ï¼Œä¾›æ’ä»¶å¼€å‘è€…ä½¿ç”¨ï¼Œè®©ä»–ä»¬çš„å¥‡æ€å¦™æƒ³å£®å¤§ç³»ç»Ÿç”Ÿæ€","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539630,"discussion_content":"å—¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639792464,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":326667,"user_name":"å¹»å¢ƒä¹‹æ¡¥","can_delete":false,"product_type":"c1","uid":1061517,"ip_address":"","ucode":"F9F4DD94CB554E","user_header":"https://static001.geekbang.org/account/avatar/00/10/32/8d/91cd624b.jpg","comment_is_top":false,"comment_ctime":1639624429,"is_pvip":false,"replies":[{"id":"118781","content":"çœ‹å…·ä½“çš„åº”ç”¨åœºæ™¯ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæµæ°´çº¿ä¸­çš„ building blocks  å¤„ç†çš„æ˜¯ç›¸åŒçš„æ•°æ®ï¼Œå¦‚æœç»“æ„å·®å¼‚éå¸¸å¤§çš„æ•°æ®è¢«åŒä¸€ä¸ªæµæ°´çº¿å¤„ç†ï¼Œé‚£ä¹ˆè¦ä¹ˆè¿™ä¸ªæµæ°´çº¿çš„ç²’åº¦å¤ªå¤§ï¼ˆå¯èƒ½éœ€è¦åˆ†æˆä¸åŒçš„æµæ°´çº¿ï¼‰ï¼Œè¦ä¹ˆè¿™ä¸ªæ¶æ„æœ¬èº«ä¸é€‚åˆæµæ°´çº¿","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1079375","ctime":1639792880,"ip_address":"","comment_id":326667,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1639624429","product_id":100085301,"comment_content":"æµæ°´çº¿é‚£ä¸ªä¾‹å­ Context ä¼šä¸ä¼šå¾ˆå¤æ‚ï¼Œæ‰€æœ‰ Plug ä¹‹é—´æ„Ÿè§‰åªèƒ½é€šè¿‡è¿™ä¸ª Context äº¤äº’","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539632,"discussion_content":"çœ‹å…·ä½“çš„åº”ç”¨åœºæ™¯ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæµæ°´çº¿ä¸­çš„ building blocks  å¤„ç†çš„æ˜¯ç›¸åŒçš„æ•°æ®ï¼Œå¦‚æœç»“æ„å·®å¼‚éå¸¸å¤§çš„æ•°æ®è¢«åŒä¸€ä¸ªæµæ°´çº¿å¤„ç†ï¼Œé‚£ä¹ˆè¦ä¹ˆè¿™ä¸ªæµæ°´çº¿çš„ç²’åº¦å¤ªå¤§ï¼ˆå¯èƒ½éœ€è¦åˆ†æˆä¸åŒçš„æµæ°´çº¿ï¼‰ï¼Œè¦ä¹ˆè¿™ä¸ªæ¶æ„æœ¬èº«ä¸é€‚åˆæµæ°´çº¿","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1639792880,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1061517,"avatar":"https://static001.geekbang.org/account/avatar/00/10/32/8d/91cd624b.jpg","nickname":"å¹»å¢ƒä¹‹æ¡¥","note":"","ucode":"F9F4DD94CB554E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":540033,"discussion_content":"æ„Ÿè°¢è€å¸ˆæŒ‡å¯¼ï¼æ¸…æ™°å¤šäº†ğŸ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639924021,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":539632,"ip_address":""},"score":540033,"extra":""}]}]},{"had_liked":false,"id":326479,"user_name":"å…‰åè·¯å°éœ¸ç‹","can_delete":false,"product_type":"c1","uid":1582623,"ip_address":"","ucode":"80EB89CAAAB193","user_header":"https://static001.geekbang.org/account/avatar/00/18/26/1f/1af5d4ed.jpg","comment_is_top":false,"comment_ctime":1639538361,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1639538361","product_id":100085301,"comment_content":"æ•æ·å¾ˆå¤§ç¨‹åº¦ä¸Šé™ä½äº†è´¨é‡ï¼Œå¯¹ client ç«¯å¼€å‘ç¡®å®å¾ˆç—›è‹¦","like_count":0},{"had_liked":false,"id":326472,"user_name":"ä¹Œé¾™çŒ¹","can_delete":false,"product_type":"c1","uid":2739949,"ip_address":"","ucode":"43F94A0DEC54BE","user_header":"https://static001.geekbang.org/account/avatar/00/29/ce/ed/3dbe915b.jpg","comment_is_top":false,"comment_ctime":1639536972,"is_pvip":false,"replies":[{"id":"118794","content":"è°¢è°¢æ”¯æŒï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1079375","ctime":1639803787,"ip_address":"","comment_id":326472,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1639536972","product_id":100085301,"comment_content":"ä»Šå¤©è¿™ç¯‡æ›´æ–°ä¸ä»…å±äºå¹²è´§ è¿˜éå¸¸ç¡¬  å®åœ¨æ˜¯ä¸æƒ³ç»“æŸè¿™æ®µå­¦ä¹ ä¹‹æ—…  è™½ç„¶rust åªæ˜¯åˆšå…¥é—¨  ä½†è€å¸ˆæ·±å…¥æµ…å‡ºåœ°è§„åˆ’äº† rust çš„roadmap  æ—¥åå®šå½“åå¤ç ”è¯» ä»¥æ±‚èä¼šè´¯é€šã€‚æœ€å éå¸¸æœŸå¾…è€å¸ˆæœªæ¥èƒ½æ¨å‡ºelixir ç¼–ç¨‹ç¬¬ä¸€è¯¾  åˆ°æ—¶å€™ä¸€å®šæ”¯æŒ  ä¹Ÿè¯¥æœ‰äººæ¥å‘å›½å†…å¼€å‘è€…æ¨èæ¨è elixir è¿™é—¨è¯­è¨€äº†  ","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539667,"discussion_content":"è°¢è°¢æ”¯æŒï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639803787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":326470,"user_name":"overheat","can_delete":false,"product_type":"c1","uid":2675695,"ip_address":"","ucode":"DD82D9194C26D0","user_header":"https://static001.geekbang.org/account/avatar/00/28/d3/ef/b3b88181.jpg","comment_is_top":false,"comment_ctime":1639536571,"is_pvip":true,"replies":[{"id":"118799","content":"Rust ä¸‹æ¶Œç°å‡ºå¾ˆå¤šä¸é”™çš„åµŒå…¥å¼è¯­è¨€ï¼ˆéƒ½ç»§æ‰¿äº† Rust çš„å®‰å…¨æ€§ï¼‰ï¼Œrhai æˆ‘æ¯”è¾ƒå–œæ¬¢ã€‚casbin-rs çš„ expression evaluator ä½¿ç”¨äº† rhaiã€‚handlebars-rust çš„ scripting æ”¯æŒï¼Œä¹Ÿä½¿ç”¨äº† rhai","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1079375","ctime":1639804277,"ip_address":"","comment_id":326470,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1639536571","product_id":100085301,"comment_content":"Rhaiçœ‹æè¿°ä¸é”™å“¦ï¼Œç±»javascriptï¼Œæœ‰äººæ·±åº¦ä½¿ç”¨è¿‡å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539672,"discussion_content":"Rust ä¸‹æ¶Œç°å‡ºå¾ˆå¤šä¸é”™çš„åµŒå…¥å¼è¯­è¨€ï¼ˆéƒ½ç»§æ‰¿äº† Rust çš„å®‰å…¨æ€§ï¼‰ï¼Œrhai æˆ‘æ¯”è¾ƒå–œæ¬¢ã€‚casbin-rs çš„ expression evaluator ä½¿ç”¨äº† rhaiã€‚handlebars-rust çš„ scripting æ”¯æŒï¼Œä¹Ÿä½¿ç”¨äº† rhai","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639804277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":326451,"user_name":"ç½—æ°","can_delete":false,"product_type":"c1","uid":1320487,"ip_address":"","ucode":"96BAFAA147341F","user_header":"https://static001.geekbang.org/account/avatar/00/14/26/27/eba94899.jpg","comment_is_top":false,"comment_ctime":1639532369,"is_pvip":false,"discussion_count":0,"race_medal":2,"score":"1639532369","product_id":100085301,"comment_content":"ä½ åªæœ‰æœ‰äº†è¶³å¤Ÿçš„æ›¿ä»£æ–¹æ¡ˆï¼Œæ‰è°ˆå¾—ä¸Šæƒè¡¡ã€‚","like_count":0},{"had_liked":false,"id":326450,"user_name":"pedro","can_delete":false,"product_type":"c1","uid":1200704,"ip_address":"","ucode":"F40C839DDFD599","user_header":"https://static001.geekbang.org/account/avatar/00/12/52/40/e57a736e.jpg","comment_is_top":false,"comment_ctime":1639532367,"is_pvip":false,"replies":[{"id":"118800","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1079375","ctime":1639804297,"ip_address":"","comment_id":326450,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1639532367","product_id":100085301,"comment_content":"è¿‡å»äºŒåå¹´æ—¶é—´ï¼Œæ•æ·å®£è¨€ï¼ˆAgile Manifestoï¼‰å’Œç²¾ç›Šåˆ›ä¸šï¼ˆLean startupï¼‰å¯¹è½¯ä»¶ç¤¾åŒºæœ€å¤§çš„è´Ÿé¢å½±å“å°±æ˜¯ï¼Œä¸€å¤§å †å¤–è¡Œæˆ–è€…å¹¶æ²¡æœ‰æ·±åˆ»ç†è§£è½¯ä»¶å·¥ç¨‹çš„ä»ä¸šè€…ï¼Œè¿‡åˆ†è¿½æ±‚é€Ÿåº¦ï¼Œè¿‡åº¦æ›²è§£ MVPï¼ˆMinimum Viable Productï¼‰ï¼Œè€Œå¿½è§†äº†ä»èµ·ç‚¹å‡ºå‘å‰ï¼Œå¿…ä¸å¯å°‘çš„æ¶æ„å’Œè®¾è®¡åŠŸå¤«ï¼Œå¯¼è‡´å¤§éƒ¨åˆ†æŠ€æœ¯å€ºå®é™…ä¸Šæ˜¯æ¶æ„å’Œè®¾è®¡é˜¶æ®µçš„å€ºåŠ¡ã€‚<br><br>ä¸èƒ½å†è®¤åŒäº†ï½","like_count":1,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539673,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639804297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":326416,"user_name":"å½­äºšä¼¦","can_delete":false,"product_type":"c1","uid":2425378,"ip_address":"","ucode":"77A32C73A23F72","user_header":"https://static001.geekbang.org/account/avatar/00/25/02/22/19585900.jpg","comment_is_top":false,"comment_ctime":1639524249,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1639524249","product_id":100085301,"comment_content":"èŒ…å¡é¡¿å¼€äº†å±äºæ˜¯~","like_count":0}]}