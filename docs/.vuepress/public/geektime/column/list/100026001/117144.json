{"id":117144,"title":"46 | SSD硬盘（上）：如何完成性能优化的KPI？","content":"<p>随着3D垂直封装技术和QLC技术的出现，今年的“618”，SSD硬盘的价格进一步大跳水，趁着这个机会，我把自己电脑上的仓库盘，从HDD换成了SSD硬盘。我的个人电脑彻底摆脱了机械硬盘。</p><p>随着智能手机的出现，互联网用户在2008年之后开始爆发性增长，大家在网上花的时间也越来越多。这也就意味着，隐藏在精美App和网页之后的服务端数据请求量，呈数量级的上升。</p><p>无论是用10000转的企业级机械硬盘，还是用Short Stroking这样的方式进一步提升IOPS，HDD硬盘已经满足不了我们的需求了。上面这些优化措施，无非就是，把IOPS从100提升到300、500也就到头了。</p><p>于是，SSD硬盘在2010年前后，进入了主流的商业应用。我们在<a href=\"https://time.geekbang.org/column/article/113809\">第44讲</a>看过，一块普通的SSD硬盘，可以轻松支撑10000乃至20000的IOPS。那个时候，不少互联网公司想要完成性能优化的KPI，最后的解决方案都变成了换SSD的硬盘。如果这还不够，那就换上使用PCI Express接口的SSD。</p><p>不过，只是简单地换一下SSD硬盘，真的最大限度地用好了SSD硬盘吗？另外，即便现在SSD硬盘很便宜了，大部分公司的批量数据处理系统，仍然在用传统的机械硬盘，这又是为什么呢？</p><!-- [[[read_end]]] --><p>那么接下来这两讲，就请你和我一起来看一看，SSD硬盘的工作原理，以及怎么最大化利用SSD的工作原理，使得访问的速度最快，硬盘的使用寿命最长。</p><h2>SSD的读写原理</h2><p>SSD没有像机械硬盘那样的寻道过程，所以它的随机读写都更快。我在下面列了一个表格，对比了一下SSD和机械硬盘的优缺点。</p><p><img src=\"https://static001.geekbang.org/resource/image/a5/7c/a53e407311293609cb0753c7889a367c.jpeg?wh=1646*806\" alt=\"\"></p><p>你会发现，不管是机械硬盘不擅长的随机读写，还是它本身已经表现不错的顺序写入，SSD在这些方面都要比HDD强。不过，有一点，机械硬盘要远强于SSD，那就是耐用性。如果我们需要频繁地重复写入删除数据，那么机械硬盘要比SSD性价比高很多。</p><p>要想知道为什么SSD的耐用性不太好，我们先要理解SSD硬盘的存储和读写原理。我们之前说过，CPU Cache用的SRAM是用一个电容来存放一个比特的数据。对于SSD硬盘，我们也可以先简单地认为，它是由一个电容加上一个电压计组合在一起，记录了一个或者多个比特。</p><h3>SLC、MLC、TLC和QLC</h3><p>能够记录一个比特很容易理解。给电容里面充上电有电压的时候就是1，给电容放电里面没有电就是0。采用这样方式存储数据的SSD硬盘，我们一般称之为<strong>使用了SLC的颗粒</strong>，全称是Single-Level Cell，也就是一个存储单元中只有一位数据。</p><p><img src=\"https://static001.geekbang.org/resource/image/06/a7/0698c240459faa11254932905675dba7.jpeg?wh=1496*1076\" alt=\"\"></p><p>但是，这样的方式会遇到和CPU Cache类似的问题，那就是，同样的面积下，能够存放下的元器件是有限的。如果只用SLC，我们就会遇到，存储容量上不去，并且价格下不来的问题。于是呢，硬件工程师们就陆续发明了<strong>MLC</strong>（Multi-Level Cell）、<strong>TLC</strong>（Triple-Level Cell）以及<strong>QLC</strong>（Quad-Level Cell），也就是能在一个电容里面存下2个、3个乃至4个比特。</p><p><img src=\"https://static001.geekbang.org/resource/image/94/79/949106cb0ca5985a47388caef6925a79.jpeg?wh=2446*1057\" alt=\"\"></p><p>只有一个电容，我们怎么能够表示更多的比特呢？别忘了，这里我们还有一个电压计。4个比特一共可以从0000-1111表示16个不同的数。那么，如果我们能往电容里面充电的时候，充上15个不同的电压，并且我们电压计能够区分出这15个不同的电压。加上电容被放空代表的0，就能够代表从0000-1111这样4个比特了。</p><p>不过，要想表示15个不同的电压，充电和读取的时候，对于精度的要求就会更高。这会导致充电和读取的时候都更慢，所以QLC的SSD的读写速度，要比SLC的慢上好几倍。如果你想要知道是什么样的物理原理导致这个QLC更慢，可以去读一读这篇<a href=\"https://www.anandtech.com/show/5067/understanding-tlc-nand/2\">文章</a>。</p><h3>P/E擦写问题</h3><p>如果我们去看一看SSD硬盘的硬件构造，可以看到，它大概是自顶向下是这么构成的。</p><p><img src=\"https://static001.geekbang.org/resource/image/6a/5e/6ac3cfd51d39d3e3022effc7e4255e5e.jpeg?wh=1226*716\" alt=\"\"></p><p>首先，自然和其他的I/O设备一样，它有对应的<strong>接口和控制电路</strong>。现在的SSD硬盘用的是SATA或者PCI Express接口。在控制电路里，有一个很重要的模块，叫作<strong>FTL</strong>（Flash-Translation Layer），也就是<strong>闪存转换层</strong>。这个可以说是SSD硬盘的一个核心模块，SSD硬盘性能的好坏，很大程度上也取决于FTL的算法好不好。现在容我卖个关子，我们晚一会儿仔细讲FTL的功能。</p><p>接下来是<strong>实际I/O设备</strong>，它其实和机械硬盘很像。现在新的大容量SSD硬盘都是3D封装的了，也就是说，是由很多个裸片（Die）叠在一起的，就好像我们的机械硬盘把很多个盘面（Platter）叠放再一起一样，这样可以在同样的空间下放下更多的容量。</p><p><img src=\"https://static001.geekbang.org/resource/image/0e/d3/0eee44535a925825b657bcac6afb72d3.jpeg?wh=1996*1666\" alt=\"\"></p><p>接下来，一张裸片上可以放多个<strong>平面</strong>（Plane），一般一个平面上的存储容量大概在GB级别。一个平面上面，会划分成很多个块（Block），一般一个块（Block）的存储大小， 通常几百KB到几MB大小。一个块里面，还会区分很多个页（Page），就和我们内存里面的页一样，一个页的大小通常是4KB。</p><p>在这一层一层的结构里面，处在最下面的两层块和页非常重要。</p><p>对于SSD硬盘来说，数据的<strong>写入</strong>叫作Program。写入不能像机械硬盘一样，通过<strong>覆写</strong>（Overwrite）来进行的，而是要先去<strong>擦除</strong>（Erase），然后再写入。</p><p>SSD的读取和写入的基本单位，不是一个比特（bit）或者一个字节（byte），而是一个<strong>页</strong>（Page）。SSD的擦除单位就更夸张了，我们不仅不能按照比特或者字节来擦除，连按照<strong>页</strong>来擦除都不行，我们必须按照<strong>块</strong>来擦除。</p><p>而且，你必须记住的一点是，SSD的使用寿命，其实是每一个块（Block）的擦除的次数。你可以把SSD硬盘的一个平面看成是一张白纸。我们在上面写入数据，就好像用铅笔在白纸上写字。如果想要把已经写过字的地方写入新的数据，我们先要用橡皮把已经写好的字擦掉。但是，如果频繁擦同一个地方，那这个地方就会破掉，之后就没有办法再写字了。</p><p>我们上面说的SLC的芯片，可以擦除的次数大概在10万次，MLC就在1万次左右，而TLC和QLC就只在几千次了。这也是为什么，你去购买SSD硬盘，会看到同样的容量的价格差别很大，因为它们的芯片颗粒和寿命完全不一样。</p><h3>SSD读写的生命周期</h3><p>下面我们来实际看一看，一块SSD硬盘在日常是怎么被用起来的。</p><p>我用三种颜色分别来表示SSD硬盘里面的页的不同状态，白色代表这个页从来没有写入过数据，绿色代表里面写入的是有效的数据，红色代表里面的数据，在我们的操作系统看来已经是删除的了。</p><p><img src=\"https://static001.geekbang.org/resource/image/96/81/966e51db8354922b533e1db236337e81.jpeg?wh=2431*4654\" alt=\"\"></p><p>一开始，所有块的每一个页都是白色的。随着我们开始往里面写数据，里面的有些页就变成了绿色。</p><p>然后，因为我们删除了硬盘上的一些文件，所以有些页变成了红色。但是这些红色的页，并不能再次写入数据。因为SSD硬盘不能单独擦除一个页，必须一次性擦除整个块，所以新的数据，我们只能往后面的白色的页里面写。这些散落在各个绿色空间里面的红色空洞，就好像硬盘碎片。</p><p>如果有哪一个块的数据一次性全部被标红了，那我们就可以把整个块进行擦除。它就又会变成白色，可以重新一页一页往里面写数据。这种情况其实也会经常发生。毕竟一个块不大，也就在几百KB到几MB。你删除一个几MB的文件，数据又是连续存储的，自然会导致整个块可以被擦除。</p><p>随着硬盘里面的数据越来越多，红色空洞占的地方也会越来越多。于是，你会发现，我们就要没有白色的空页去写入数据了。这个时候，我们要做一次类似于Windows里面“磁盘碎片整理”或者Java里面的“内存垃圾回收”工作。找一个红色空洞最多的块，把里面的绿色数据，挪到另一个块里面去，然后把整个块擦除，变成白色，可以重新写入数据。</p><p>不过，这个“磁盘碎片整理”或者“内存垃圾回收”的工作，我们不能太主动、太频繁地去做。因为SSD的擦除次数是有限的。如果动不动就搞个磁盘碎片整理，那么我们的SSD硬盘很快就会报废了。</p><p>说到这里，你可能要问了，这是不是说，我们的SSD硬盘的容量是用不满的？因为我们总会遇到一些红色空洞？</p><p><img src=\"https://static001.geekbang.org/resource/image/e7/74/e7fcd994384145eefde614aaf3b45874.jpeg?wh=2491*3502\" alt=\"\"></p><p>没错，一块SSD的硬盘容量，是没办法完全用满的。不过，为了不得罪消费者，生产SSD硬盘的厂商，其实是预留了一部分空间，专门用来做这个“磁盘碎片整理”工作的。一块标成240G的SSD硬盘，往往实际有256G的硬盘空间。SSD硬盘通过我们的控制芯片电路，把多出来的硬盘空间，用来进行各种数据的闪转腾挪，让你能够写满那240G的空间。这个多出来的16G空间，叫作<strong>预留空间</strong>（Over Provisioning），一般SSD的硬盘的预留空间都在7%-15%左右。</p><h2>总结延伸</h2><p>到这里，相信你对SSD硬盘的写入和擦除的原理已经清楚了，也明白了SSD硬盘的使用寿命受限于可以擦除的次数。</p><p>仔细想一想，你会发现SSD硬盘，特别适合读多写少的应用。在日常应用里面，我们的系统盘适合用SSD。但是，如果我们用SSD做专门的下载盘，一直下载各种影音数据，然后刻盘备份就不太好了，特别是现在QLC颗粒的SSD，它只有几千次可擦写的寿命啊。</p><p>在数据中心里面，SSD的应用场景也是适合读多写少的场景。我们拿SSD硬盘用来做数据库，存放电商网站的商品信息很合适。但是，用来作为Hadoop这样的Map-Reduce应用的数据盘就不行了。因为Map-Reduce任务会大量在任务中间向硬盘写入中间数据再删除掉，这样用不了多久，SSD硬盘的寿命就会到了。</p><p>好了，最后让我们总结一下。</p><p>这一讲，我们从SSD的物理原理，也就是“电容+电压计”的组合，向你介绍了SSD硬盘存储数据的原理，以及从SLC、MLC、TLC，直到今天的QLC颗粒是怎么回事儿。</p><p>然后，我们一起看了SSD硬盘的物理构造，也就是裸片、平面、块、页的层次结构。我们对于数据的写入，只能是一页一页的，不能对页进行覆写。对于数据的擦除，只能整块进行。所以，我们需要用一个，类似“磁盘碎片整理”或者“内存垃圾回收”这样的机制，来清理块当中的数据空洞。而SSD硬盘也会保留一定的预留空间，避免出现硬盘无法写满的情况。</p><p>到了这里，我们SSD硬盘在硬件层面的写入机制就介绍完了。不过，更有挑战的一个问题是，在这样的机制下，我们怎么尽可能延长SSD的使用寿命呢？如果要开发一个跑在SSD硬盘上的数据库，我们可以利用SSD的哪些特性呢？想要知道这些，请你一定要记得回来听下一讲。</p><h2>推荐阅读</h2><p>想要对于SSD的硬件实现原理有所了解，我推荐你去读一读这一篇<a href=\"https://www.anandtech.com/show/5067/understanding-tlc-nand\">Understand TLC NAND</a>。</p><h2>课后思考</h2><p>现在大家使用的数据系统里，往往会有日志系统。你觉得日志系统适合存放在SSD硬盘上吗？</p><p>欢迎在留言区写下你的思考。如果有收获，你也可以把这篇文章分享给你的朋友。</p><p></p>","comments":[{"had_liked":false,"id":137904,"user_name":"前端西瓜哥","can_delete":false,"product_type":"c1","uid":1248576,"ip_address":"","ucode":"150130C34CD1C1","user_header":"https://static001.geekbang.org/account/avatar/00/13/0d/40/f70e5653.jpg","comment_is_top":false,"comment_ctime":1569912691,"is_pvip":false,"replies":[{"id":"53159","content":"👍谢谢你给大家推荐的资料","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1570084770,"ip_address":"","comment_id":137904,"utype":1}],"discussion_count":4,"race_medal":0,"score":"220613244787","product_id":100026001,"comment_content":"这里推荐个 SSD 的科普视频，讲得很详细：<br>https:&#47;&#47;www.bilibili.com&#47;video&#47;av61437877","like_count":52,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469304,"discussion_content":"👍谢谢你给大家推荐的资料","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570084770,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1004119,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/57/af4e58e8.jpg","nickname":"行者无疆","note":"","ucode":"80F19373FCF82B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383393,"discussion_content":"现在来看，回形针已经凉了，唉","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1626078506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2522643,"avatar":"https://static001.geekbang.org/account/avatar/00/26/7e/13/b856be5b.jpg","nickname":"悲白发","note":"","ucode":"9C9E3B923C8806","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":405554,"discussion_content":"看不到了啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634601233,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1320090,"avatar":"https://static001.geekbang.org/account/avatar/00/14/24/9a/c933f702.jpg","nickname":"行者","note":"","ucode":"646558AF9803EE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":181090,"discussion_content":"赞，这个视频很不错","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582337276,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132899,"user_name":"Cue","can_delete":false,"product_type":"c1","uid":1516991,"ip_address":"","ucode":"A5CB460B54FDB0","user_header":"https://static001.geekbang.org/account/avatar/00/17/25/bf/1e9c853f.jpg","comment_is_top":false,"comment_ctime":1568266304,"is_pvip":false,"replies":[{"id":"50991","content":"现在大家用的SSD的存储硬件都是NAND Flash。实现原理和通过改变电压，让电子进入绝缘层的浮栅(Floating Gate)内。断电之后，电子仍然在FG里面。<br><br>但是如果长时间不通电，比如几年，仍然可能会丢数据。<br><br>所以换句话说，SSD的确也不适合作为冷数据备份。<br><br>关于NAND的基本原理，可以看一下Wikipedia https:&#47;&#47;zh.wikipedia.org&#47;wiki&#47;%E9%97%AA%E5%AD%98#NAND_Flash","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1568427437,"ip_address":"","comment_id":132899,"utype":1}],"discussion_count":2,"race_medal":0,"score":"212021663808","product_id":100026001,"comment_content":"想问一下，为什么ssd断电后不会丢数据","like_count":50,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467166,"discussion_content":"现在大家用的SSD的存储硬件都是NAND Flash。实现原理和通过改变电压，让电子进入绝缘层的浮栅(Floating Gate)内。断电之后，电子仍然在FG里面。\n\n但是如果长时间不通电，比如几年，仍然可能会丢数据。\n\n所以换句话说，SSD的确也不适合作为冷数据备份。\n\n关于NAND的基本原理，可以看一下Wikipedia https://zh.wikipedia.org/wiki/%E9%97%AA%E5%AD%98#NAND_Flash","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568427437,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1516991,"avatar":"https://static001.geekbang.org/account/avatar/00/17/25/bf/1e9c853f.jpg","nickname":"Cue","note":"","ucode":"A5CB460B54FDB0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":11817,"discussion_content":"专栏结束后老师一直细心答疑，太赞！！！","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1568435151,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123029,"user_name":"许童童","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1565595096,"is_pvip":false,"replies":[{"id":"52678","content":"👍答案正确。","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1569662794,"ip_address":"","comment_id":123029,"utype":1}],"discussion_count":2,"race_medal":0,"score":"169069319640","product_id":100026001,"comment_content":"现在大家使用的数据系统里，往往会有日志系统。你觉得日志系统适合存放在 SSD 硬盘上吗？<br>不适合，日志系统写入量大，而且有些还会清除老旧的日志，反而读日志却不多，日志系统完全不适合存放在SSD硬盘上，应该用HDD硬盘。","like_count":40,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462507,"discussion_content":"👍答案正确。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569662794,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1199213,"avatar":"https://static001.geekbang.org/account/avatar/00/12/4c/6d/c20f2d5a.jpg","nickname":"LJK","note":"","ucode":"12B2441099FF1D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306766,"discussion_content":"有个比较low的疑问，系统日志一般都是顺序写入吧？如果说顺序写入并且日志保存时间不是很短，譬如保留一年的系统日志，这样的话也会有问题吗？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1600385234,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123373,"user_name":"时间道","can_delete":false,"product_type":"c1","uid":1067933,"ip_address":"","ucode":"6A8279F2087135","user_header":"https://static001.geekbang.org/account/avatar/00/10/4b/9d/e2059bce.jpg","comment_is_top":false,"comment_ctime":1565663434,"is_pvip":false,"replies":[{"id":"52667","content":"日志系统用SSD有点奢侈","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1569662322,"ip_address":"","comment_id":123373,"utype":1}],"discussion_count":1,"race_medal":0,"score":"91759976650","product_id":100026001,"comment_content":"公司的日志系统已经报废了很多SSD盘了","like_count":22,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462641,"discussion_content":"日志系统用SSD有点奢侈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569662322,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131154,"user_name":"Tristen陈涛","can_delete":false,"product_type":"c1","uid":1016931,"ip_address":"","ucode":"000A5E8C933E1F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/84/63/062d0f28.jpg","comment_is_top":false,"comment_ctime":1567654555,"is_pvip":false,"replies":[{"id":"51124","content":"完全不一样啊，SSD就是一块电路板。没有机械硬盘转动的寻址过程，这些过程都变成了电信号的传输来做到的，而不是通过物理结构的转动来做到的。","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1568537195,"ip_address":"","comment_id":131154,"utype":1}],"discussion_count":2,"race_medal":0,"score":"87467000475","product_id":100026001,"comment_content":"从这篇文章中我没看懂，为何 SSD 的随机读写速度会比机械硬盘快，它的实际 I&#47;O 设备不是和机械硬盘很像吗？ 那 SSD 寻找数据的时候，是通过什么样的物理结构来找到它想要的数据的呢？","like_count":21,"discussions":[{"author":{"id":1089754,"avatar":"https://static001.geekbang.org/account/avatar/00/10/a0/da/4f50f1b2.jpg","nickname":"Knight²º¹⁸","note":"","ucode":"BDCB830B6A730F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":97003,"discussion_content":"我也觉得老师应该重点讲一下SSD为什么比HDD快的原因。","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1577103031,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466314,"discussion_content":"完全不一样啊，SSD就是一块电路板。没有机械硬盘转动的寻址过程，这些过程都变成了电信号的传输来做到的，而不是通过物理结构的转动来做到的。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1568537195,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123109,"user_name":"斐波那契","can_delete":false,"product_type":"c1","uid":1464006,"ip_address":"","ucode":"85E2EBC01392B1","user_header":"https://static001.geekbang.org/account/avatar/00/16/56/c6/0b449bc6.jpg","comment_is_top":false,"comment_ctime":1565607104,"is_pvip":false,"replies":[{"id":"52676","content":"👍实际的应用场景很重要，大部分的技术决策其实都是应场景而定的，很多时候并没有标准答案。","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1569662746,"ip_address":"","comment_id":123109,"utype":1}],"discussion_count":2,"race_medal":0,"score":"57400181952","product_id":100026001,"comment_content":"这个思考题我觉得不能一概而论 以oracle为例 一个事务结束 commit提交后 实际上就是提交日志 IO的速度决定了你事务执行的速度 所以在某些高并发场景下 ssd还是值得的 但是成本会相应的增加","like_count":14,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462543,"discussion_content":"👍实际的应用场景很重要，大部分的技术决策其实都是应场景而定的，很多时候并没有标准答案。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569662746,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1900944,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKDdkdC6WfWDzEVBDuFGic2fohmqyY5Iowias8Hrg90mLDksQxuVYoOP2ribrdu4TQhfb2WPxBymjJHw/132","nickname":"201201091","note":"","ucode":"611DE64AE00F8F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348790,"discussion_content":"数据库事务日志是顺序写入的，如果HDD顺序写入性能满足需求，还是优先用HDD。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1612711812,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":160874,"user_name":"QQ怪","can_delete":false,"product_type":"c1","uid":1211223,"ip_address":"","ucode":"1A39B8433D9208","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","comment_is_top":false,"comment_ctime":1576052065,"is_pvip":false,"replies":[{"id":"69414","content":"👍，理解具体的技术问题，可以多和现实生活结合。","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1581838775,"ip_address":"","comment_id":160874,"utype":1}],"discussion_count":2,"race_medal":0,"score":"40230757729","product_id":100026001,"comment_content":"老师讲那个SSD硬盘有擦除次数的限制，很生动形象，我补充下具体是为啥：<br>所谓的单元存储颗粒，你用多了，可能就消磁了，或者介质疲劳损坏了（可以理解为，就像是轮胎那样磨损了)。","like_count":8,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477515,"discussion_content":"👍，理解具体的技术问题，可以多和现实生活结合。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581838775,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1016777,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/83/c9/5d03981a.jpg","nickname":"thomas","note":"","ucode":"9AB945308F1B50","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":558567,"discussion_content":"他说的不对吧，SSD用久了怎么还和磁性有关，它的实现不是通过栅栏晶体管实现的吗，hdd才和磁性有关","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648383641,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":477515,"ip_address":""},"score":558567,"extra":""}]}]},{"had_liked":false,"id":123130,"user_name":"易儿易","can_delete":false,"product_type":"c1","uid":1242864,"ip_address":"","ucode":"B15D1031CA841E","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqLcWH3mSPmhjrs1aGL4b3TqI7xDqWWibM4nYFrRlp0z7FNSWaJz0mqovrgIA7ibmrPt8zRScSfRaqQ/132","comment_is_top":false,"comment_ctime":1565612143,"is_pvip":false,"replies":[{"id":"52682","content":"易儿易同学，<br><br>你好，不过这个还要看一下写入是否是随机写，以及IOPS的要求。因为有可能很无奈就是要多花钱用SSD的应用场景也是存在的。","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1569662984,"ip_address":"","comment_id":123130,"utype":1}],"discussion_count":2,"race_medal":0,"score":"40220317807","product_id":100026001,"comment_content":"国内某知名大数据平台服务商居然力推用SSD加速其自研大数据交易型（为了写入需求特意研发）数据库，看了本篇讲解，觉得这公司是在拿政府单位当肉鸡……","like_count":9,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462550,"discussion_content":"易儿易同学，\n\n你好，不过这个还要看一下写入是否是随机写，以及IOPS的要求。因为有可能很无奈就是要多花钱用SSD的应用场景也是存在的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569662984,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1512642,"avatar":"https://static001.geekbang.org/account/avatar/00/17/14/c2/46ebe3a0.jpg","nickname":"侧耳倾听","note":"","ucode":"5BF2A2440B54F0","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":264172,"discussion_content":"产出高于成本的时候，你觉得是浪费，在别人眼里都是小钱","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589292393,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177574,"user_name":"fcb的鱼","can_delete":false,"product_type":"c1","uid":1243901,"ip_address":"","ucode":"88667EBF09CEC0","user_header":"https://static001.geekbang.org/account/avatar/00/12/fa/fd/ec24cba7.jpg","comment_is_top":false,"comment_ctime":1581427092,"is_pvip":false,"replies":[{"id":"69407","content":"fcb的鱼同学，<br><br>你好，回答正确！不过随着现在SSD硬盘的成本不断下降，也的确开始有公司使用SSD来作为数据盘了。","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1581837955,"ip_address":"","comment_id":177574,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27351230868","product_id":100026001,"comment_content":"用ssd做日志盘不是很合适。因为公司的日志集群基本都是大量的写(这种写都是顺序写)，读的场景比较少(读少写多)，而且日志会定期清除。HDD磁盘完全能满足顺序写的需求，而且性价比高。但是由于HDD盘的IO不高，所以数据大量写的时候需要注意。","like_count":6,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483472,"discussion_content":"fcb的鱼同学，\n\n你好，回答正确！不过随着现在SSD硬盘的成本不断下降，也的确开始有公司使用SSD来作为数据盘了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581837955,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":269470,"user_name":"牛牛","can_delete":false,"product_type":"c1","uid":1194626,"ip_address":"","ucode":"CFCE68B4F92209","user_header":"https://static001.geekbang.org/account/avatar/00/12/3a/82/1ff83a38.jpg","comment_is_top":false,"comment_ctime":1608680772,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23083517252","product_id":100026001,"comment_content":"内容总结:<br>1. SSD的IOPS可以达到1~2w<br>2. SSD最上边是接口和控制电路层, 接下来是实际的IO设备<br>3. SSD是由裸片、Plain片、Block块、Page页叠在一起组成的<br>4. SSD的价格会根据 SLC、MLC、TLC、QLC等不同组成有所差异, SLC最贵, 但可擦写次数也最高, 可以达10w次; MLC只有1w次; TLC和QLC就只有几千次, SSD的寿命其实也就是擦除次数<br>5. SSD厂商一般会预留7%-15%的空间, 进行碎片整理<br>6. SSD写入和读取的基本单位是页(一般是4KB), 擦除的基本单位是块(Block, 一般是几KB到几MB) <br>7. SSD适合读多写少的场景","like_count":6},{"had_liked":false,"id":124529,"user_name":"mfist","can_delete":false,"product_type":"c1","uid":1373624,"ip_address":"","ucode":"4F99F422C23FB4","user_header":"https://static001.geekbang.org/account/avatar/00/14/f5/b8/9f165f4b.jpg","comment_is_top":false,"comment_ctime":1565916954,"is_pvip":false,"replies":[{"id":"52671","content":"mfist同学，<br><br>你好，其实SSD有适合日志的地方，就是它适合追加写。但是因为寿命和成本，又很不合适，而HDD本身特别适合顺序写，所以现在一般日志系统还是用HDD。","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1569662554,"ip_address":"","comment_id":124529,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23040753434","product_id":100026001,"comment_content":"本节讲了ssd和hdd的区别，以及sdd快的原因。了解了同样容量ssd不同价格的原因，slc tlc mlc。这样就从原理上明白了多读少写的适用场景。<br><br>回到问题，日志的场景不适合用ssd，日志存储量大，过段时间就要清除，不符合ssd的最优场景。<br>","like_count":5,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463215,"discussion_content":"mfist同学，\n\n你好，其实SSD有适合日志的地方，就是它适合追加写。但是因为寿命和成本，又很不合适，而HDD本身特别适合顺序写，所以现在一般日志系统还是用HDD。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569662554,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144691,"user_name":"青黄","can_delete":false,"product_type":"c1","uid":1527951,"ip_address":"","ucode":"8FD420CECF0C47","user_header":"https://static001.geekbang.org/account/avatar/00/17/50/8f/ec845dc8.jpg","comment_is_top":false,"comment_ctime":1571997560,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18751866744","product_id":100026001,"comment_content":"您好，在ssd原理的那部分最后一段是不是有个虫<br><br>我记得是SRAM以晶体管形式存数据，DRAM以电容形式存数据（所以需要刷新）<br>","like_count":4,"discussions":[{"author":{"id":1400806,"avatar":"https://static001.geekbang.org/account/avatar/00/15/5f/e6/19778e70.jpg","nickname":"Mr.埃克斯","note":"","ucode":"855BE5DFD2BB0B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":360876,"discussion_content":"看到老师说的我也很疑惑，DRAM是电容。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616552163,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126697,"user_name":"活的潇洒","can_delete":false,"product_type":"c1","uid":1238830,"ip_address":"","ucode":"666C30CA894754","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/2e/1522a7d6.jpg","comment_is_top":false,"comment_ctime":1566450906,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14451352794","product_id":100026001,"comment_content":"你可以把SSD硬盘的一个平面看成是一张白纸。我们在上面写入数据，就好像用铅笔在白纸上写字。如果想要把已经写过字<br>的地方写入新的数据，我们先要用橡皮把已经写好的字擦掉。但是，如果频繁擦同一个地方，那这个地方就会破掉，之后就没有办法再写字了。<br><br>上面这一段比喻的很形象<br><br>day46 笔记：深入浅出计算机组成原理学习笔记：SSD硬盘(上)-如何完成性能优化的KPI？（第46讲）","like_count":3},{"had_liked":false,"id":122994,"user_name":"magicnum","can_delete":false,"product_type":"c1","uid":1004869,"ip_address":"","ucode":"96B3696961F654","user_header":"https://static001.geekbang.org/account/avatar/00/0f/55/45/e4314bc6.jpg","comment_is_top":false,"comment_ctime":1565584440,"is_pvip":false,"replies":[{"id":"52695","content":"👍","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1569665838,"ip_address":"","comment_id":122994,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10155519032","product_id":100026001,"comment_content":"说到硬盘容量让我想起了以前总觉得硬盘厂商坑骗了消费者，学了计算机才知道256GB和240GiB容量是一样的，只是对消费者用十进制而对计算机用二进制。<br>现在一看还有个预留空间，说明做任何结论之前都要了解事件运行对基本原理，市场化的产品是非常严谨的，至少都是可以自圆其说的。。。","like_count":3,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462491,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569665838,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122929,"user_name":"xindoo","can_delete":false,"product_type":"c1","uid":1101718,"ip_address":"","ucode":"AEAF3208E644BC","user_header":"https://static001.geekbang.org/account/avatar/00/10/cf/96/251c0cee.jpg","comment_is_top":false,"comment_ctime":1565574690,"is_pvip":true,"replies":[{"id":"52680","content":"的确日志系统用SSD的意义不大。","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1569662908,"ip_address":"","comment_id":122929,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5860541986","product_id":100026001,"comment_content":"我觉得日志系统完全不适合放ssd上，日志比较大而且有时候大部分日志是不会被读的，另外，写日志没有随机写的需求，也不需要很高的IOPS，所以完全没有必要用更为昂贵且存储性价比低的ssd。 ","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462457,"discussion_content":"的确日志系统用SSD的意义不大。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569662908,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122885,"user_name":"Linuxer","can_delete":false,"product_type":"c1","uid":1153978,"ip_address":"","ucode":"272D9D8089C3D6","user_header":"https://static001.geekbang.org/account/avatar/00/11/9b/ba/333b59e5.jpg","comment_is_top":false,"comment_ctime":1565569237,"is_pvip":false,"replies":[{"id":"52694","content":"是的，而且可能要搬运很多在同一个块上并不需要更新的数据","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1569665822,"ip_address":"","comment_id":122885,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5860536533","product_id":100026001,"comment_content":"日志系统明显不适合，另外先擦除后写入是不是导致写入放大的原因？","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462440,"discussion_content":"是的，而且可能要搬运很多在同一个块上并不需要更新的数据","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569665822,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":347502,"user_name":"小杰","can_delete":false,"product_type":"c1","uid":2853200,"ip_address":"","ucode":"BBDF8E9F348F65","user_header":"https://static001.geekbang.org/account/avatar/00/2b/89/50/aee9fdab.jpg","comment_is_top":false,"comment_ctime":1654081790,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1654081790","product_id":100026001,"comment_content":"没有看底下评论之前，以为日志会一直保存在硬盘上，那么在读的时候很适合SSD。但现在互联网公司日志写入量太大了，而且会清理老的日志。那么这样就涉及到清理的问题，频繁的擦除会导致页失效。","like_count":0},{"had_liked":false,"id":333058,"user_name":"Kitty🐱婷🎉","can_delete":false,"product_type":"c1","uid":2336798,"ip_address":"","ucode":"DD9DF7F0F9E3AB","user_header":"https://static001.geekbang.org/account/avatar/00/23/a8/1e/a04cbc6c.jpg","comment_is_top":false,"comment_ctime":1644033424,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1644033424","product_id":100026001,"comment_content":"请问日常开发涉及到大量的代码工程是适合用SSD还是HDD呢？","like_count":0},{"had_liked":false,"id":309885,"user_name":"完美坚持","can_delete":false,"product_type":"c1","uid":1919541,"ip_address":"","ucode":"AE0261D8DDEF64","user_header":"https://static001.geekbang.org/account/avatar/00/1d/4a/35/66caeed9.jpg","comment_is_top":false,"comment_ctime":1630381189,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630381189","product_id":100026001,"comment_content":"如果超过了使用次数，使用次数过多了之后，SSD硬盘会发生什么样的变化，导致报废呢？","like_count":0},{"had_liked":false,"id":256617,"user_name":"晒太阳","can_delete":false,"product_type":"c1","uid":1080706,"ip_address":"","ucode":"99CFF3D5A4FE72","user_header":"https://static001.geekbang.org/account/avatar/00/10/7d/82/5ed8a955.jpg","comment_is_top":false,"comment_ctime":1603691774,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603691774","product_id":100026001,"comment_content":"日志系统能不能用SSD，我觉得要分情况，比如一直做日志存储滚动，只保存热点数据，用SSD就不合适，会有大量的擦写操作。如果只是做日志的长时间归档（成本可以接受情况下），一直顺序写，擦写频率很低，用SSD也是不错的。","like_count":0},{"had_liked":false,"id":256320,"user_name":"风","can_delete":false,"product_type":"c1","uid":1077538,"ip_address":"","ucode":"104638BF19B048","user_header":"https://static001.geekbang.org/account/avatar/00/10/71/22/b8c596b6.jpg","comment_is_top":false,"comment_ctime":1603598823,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603598823","product_id":100026001,"comment_content":"日志数据不适合写在SSD硬盘上，一方面日志属于写多读少的操作，一段时间日志需要归档，就会涉及到数据块的擦除，SSD硬盘的可擦除次数太少，会经常需要更换，性价比不高；另一方面日志数据的处理分析也不会对硬盘的读取速度有太高的要求，而且完全可以顺序读取，因为只需要速度能够匹配日志分析的速度就可以了。","like_count":0},{"had_liked":false,"id":236020,"user_name":"A君","can_delete":false,"product_type":"c1","uid":1940105,"ip_address":"","ucode":"FE96F089C2312C","user_header":"https://static001.geekbang.org/account/avatar/00/1d/9a/89/babe8b52.jpg","comment_is_top":false,"comment_ctime":1595293207,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1595293207","product_id":100026001,"comment_content":"Mlc等原来是用个计电器来计量电量区分分类。","like_count":0},{"had_liked":false,"id":153178,"user_name":"追风筝的人","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1574175013,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574175013","product_id":100026001,"comment_content":"日志系统写多。不适合用ssd硬盘","like_count":0},{"had_liked":false,"id":147823,"user_name":"吴宇晨","can_delete":false,"product_type":"c1","uid":1199968,"ip_address":"","ucode":"F8F45B7067DF6D","user_header":"https://static001.geekbang.org/account/avatar/00/12/4f/60/049a20e9.jpg","comment_is_top":false,"comment_ctime":1572911595,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1572911595","product_id":100026001,"comment_content":"ssd突然断电可能丢数据，遇到两次了😂😂","like_count":0},{"had_liked":false,"id":142823,"user_name":"不一样的烟火","can_delete":false,"product_type":"c1","uid":1473251,"ip_address":"","ucode":"6E305F0EE90E8B","user_header":"https://static001.geekbang.org/account/avatar/00/16/7a/e3/145adba9.jpg","comment_is_top":false,"comment_ctime":1571543414,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1571543414","product_id":100026001,"comment_content":"对于某些厂商力推的全ssd的个人笔记本 老师怎么看 值得买吗","like_count":0,"discussions":[{"author":{"id":1243901,"avatar":"https://static001.geekbang.org/account/avatar/00/12/fa/fd/ec24cba7.jpg","nickname":"fcb的鱼","note":"","ucode":"88667EBF09CEC0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":166751,"discussion_content":"之所以用ssd,就是为了追求速度。我的电脑用了ssd后系统启动确实很快，基本10s左右。ssd的优势在其他方面体会不出来。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581426596,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126810,"user_name":"拉欧","can_delete":false,"product_type":"c1","uid":1206605,"ip_address":"","ucode":"40996A8093A95F","user_header":"https://static001.geekbang.org/account/avatar/00/12/69/4d/81c44f45.jpg","comment_is_top":false,"comment_ctime":1566482692,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566482692","product_id":100026001,"comment_content":"一直想搞明白SSD的原理，受教了","like_count":0},{"had_liked":false,"id":125411,"user_name":"sugar","can_delete":false,"product_type":"c1","uid":1167046,"ip_address":"","ucode":"454538FF253B5F","user_header":"https://static001.geekbang.org/account/avatar/00/11/ce/c6/958212b5.jpg","comment_is_top":false,"comment_ctime":1566180862,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1566180862","product_id":100026001,"comment_content":"想问一下 在硬件层面的实现上，ssd和内存dram 缓存sram等好像都是基于电容实现的，为什么ssd在断电后数据不会丢呢？","like_count":0,"discussions":[{"author":{"id":1111222,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f4/b6/ae7dc1e2.jpg","nickname":"余垚澈","note":"","ucode":"A451487F69451F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5617,"discussion_content":"有隔离层，加电压，电子会发生量子隧穿进入隔离层，电子会被锁在里面","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1566382926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1400806,"avatar":"https://static001.geekbang.org/account/avatar/00/15/5f/e6/19778e70.jpg","nickname":"Mr.埃克斯","note":"","ucode":"855BE5DFD2BB0B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306962,"discussion_content":"SRAM不是电容实现的，是CMOS实现的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600433406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122948,"user_name":"阿卡牛","can_delete":false,"product_type":"c1","uid":1022247,"ip_address":"","ucode":"0BC43A904C3199","user_header":"https://static001.geekbang.org/account/avatar/00/0f/99/27/47aa9dea.jpg","comment_is_top":false,"comment_ctime":1565577567,"is_pvip":false,"replies":[{"id":"52683","content":"阿西吧同学，你好<br><br><br>可以看一下我在上一讲对这个问题的回复。","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1569663022,"ip_address":"","comment_id":122948,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1565577567","product_id":100026001,"comment_content":"可以解释下windows下针对HDD有个磁盘清理的功能，原理是什么吗？有什么用","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462471,"discussion_content":"阿西吧同学，你好\n\n\n可以看一下我在上一讲对这个问题的回复。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569663022,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1919541,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/4a/35/66caeed9.jpg","nickname":"完美坚持","note":"","ucode":"AE0261D8DDEF64","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391269,"discussion_content":"阿卡牛\nHDD 硬盘通常有个磁盘清理的操作，有什么用？\n作者回复: HDD硬盘常见又两种功能\n\n1. 磁盘清理，这个主要是清除很多应用程序的临时文件和缓存。\n2. 磁盘碎片整理，这个主要是尽量让数据在磁盘的物理位置上连续存放。这样新的输入写入以及旧的数据读取都会是以顺序读和顺序写的概率变大，能提升实际的性能表现。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630381921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1052938,"avatar":"https://static001.geekbang.org/account/avatar/00/10/11/0a/59639f1f.jpg","nickname":"penbox","note":"","ucode":"59C4F47ACCB7F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4621,"discussion_content":"你想问的应该是磁盘碎片整理吧？磁盘碎片是指文件被分散保存到整个磁盘的不同地方，而机械硬盘随机读取速度要比连续读取慢上很多。磁盘碎片整理顾名思义就是把不连续存储的文件，整理成连续存储的文件，提升读取性能。","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1565605038,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}