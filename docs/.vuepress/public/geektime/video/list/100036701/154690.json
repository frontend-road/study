{"id":154690,"title":"19 | Nettyå¦‚ä½•ç©è½¬å†…å­˜ä½¿ç”¨","content":"<p><strong>è¯¾ä»¶å’ŒDemoåœ°å€</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geek_netty\">https://gitee.com/geektime-geekbang/geek_netty</a></p>","comments":[{"had_liked":false,"id":156707,"user_name":"å†¬æ¸æš–","can_delete":false,"product_type":"c3","uid":1586800,"ip_address":"","ucode":"907E41AAE9A36C","user_header":"https://static001.geekbang.org/account/avatar/00/18/36/70/00122b24.jpg","comment_is_top":false,"comment_ctime":1574939180,"is_pvip":false,"replies":[{"id":61521,"content":"â€œnettyåœ¨æŸäº›æ–¹é¢å¹¶ä¸æ˜¯æœ€ä¼˜çš„â€ï¼Œè‚¯å®šçš„ï¼Œä¸ç„¶è¿™15å¹´æ¥å°±ä¸ä¼šä¸€ç›´åœ¨æŒç»­ä¼˜åŒ–æ”¹è¿›äº†ï¼Œæ‰€ä»¥å¯æ€•çš„ä¸æ˜¯å·²ç»åšåˆ°æœ€å¥½ï¼Œè€Œæ˜¯ä¸€ç›´è¿˜åœ¨æ”¹è¿›ï¼Œå“ˆå“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"stroller","uid":1638649,"ctime":1576207023,"ip_address":"","comment_id":156707,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"èŠ‚çœå†…å­˜çš„ä¸€äº›æŠ€å·§\n1.èƒ½ç”¨åŸºæœ¬ç±»å‹å°½é‡ç”¨åŸºæœ¬ç±»å‹ï¼Œå°±ä¸è¦å»ç”¨åŒ…è£…ç±»å‹äº†ï¼ŒåŒ…è£…ç±»æ˜æ˜¾å ç”¨çš„ç©ºé—´æ›´å¤§ï¼Œä¹‹å‰æœ‰è¯´åˆ°ï¼ŒåŒ…è£…ç±»é™¤äº†å€¼ï¼Œè¿˜å¸¦äº†ä¸€äº›ä¿¡æ¯ï¼Œæ¯”å¦‚hashä¹‹äº›çš„å¯¹è±¡å¤´ï¼Œè¿˜æœ‰å¼•ç”¨åœ°å€\n2.ä¸€äº›ç±»å®šä¹‰çš„å±æ€§å˜é‡ï¼Œå°±ç›´æ¥åœ¨è¿™ä¸ªç±»é‡Œé¢å®šä¹‰ï¼Œä¸è¦è·‘åˆ°å¼•ç”¨çš„åœ°æ–¹å»ä¸€ä¸ªä¸€ä¸ªçš„é‡æ–°å®šä¹‰ã€‚\n3.åˆ›å»ºä¸€äº›éœ€è¦æå‰è®¾ç½®å¥½å¤§å°çš„ä¸œè¥¿çš„æ—¶å€™ï¼Œå…ˆå»çœ‹ä¸‹è£…è¿›æ¥çš„ä¸œè¥¿æœ‰å¤šå°‘ï¼ˆå¦‚æœä¸çŸ¥é“å°±å»çŒœï¼‰ï¼Œç„¶åæŠŠè¿™ä¸ªå€¼setè¿›å»ã€‚æ¯”å¦‚hashmapçš„ä¸¢å¼ƒåŸæ•°ç»„æš´åŠ›æ‰©å®¹ä¸å¦‚å…ˆè®¾ç½®å¥½é€‚åˆçš„å¤§å°ã€‚ ä¸è¿‡å¦‚æœæ”¹äº†jvmçš„è¿™ä¸ªè´Ÿè½½å› å­0.75ï¼Œè¿™äº›åœ°æ–¹è¿˜æ ¹æ®0.75åˆ¤æ–­ï¼Œå°±å‡‰å‡‰å’¯\n4.zero-copy å°†æ•°æ®ç»„åˆåˆ°ä¸€èµ·ï¼Œè€Œä¸æ˜¯å†…å­˜çš„å¤åˆ¶\n5.å†…å­˜æ± ï¼š1.å¾ªç¯åˆ©ç”¨\n   2.çœçš„ç”¨ä¸€æ¬¡åˆ›å»ºä¸€æ¬¡ï¼Œå¼€å§‹çš„æ—¶å€™ç›´æ¥ç»™ä½ å…¨éƒ¨éƒ½åˆ›å¥½(æ„Ÿè§‰è¿™æ ·çš„è¯ä¼šæ‹–æ…¢å¯åŠ¨é€Ÿåº¦ï¼Œè€Œä¸”ä¹Ÿè¦ç»´æŠ¤è¿™äº›ä¸œè¥¿ã€‚ã€‚ã€‚ã€‚)\n   3.æ”¯æŒå¹¶å‘:ä¸€ä¸‹å­å¯ä»¥æ‹¿å¥½å¤šä¸ª\n\nå †å¤–å†…å­˜:ç›´æ¥å—æ“ä½œç³»ç»Ÿç®¡ç†ï¼ˆè€Œä¸æ˜¯è™šæ‹Ÿæœºï¼‰ï¼Œjvmåªæ˜¯æ‹¿ä¸€ä¸ªå¼•ç”¨\nå¥½å¤„æ˜¯1.å¢å¤§äº†ç©ºé—´(åŸæ¥ä½ åªæœ‰ä¸ªjvmçš„ï¼Œç°åœ¨ä½ åˆå¤šäº†ä¸ª)\n    2.å‡å°‘è¾£é¸¡å›æ”¶ã€‚è¾£é¸¡å›æ”¶ä¼šè®©å…¶å®ƒçš„å·¥ä½œæš‚åœ\n    3.å †å†…åœ¨flushåˆ°è¿œç¨‹æ—¶ï¼Œä¼šå…ˆå¤åˆ¶åˆ°ç›´æ¥å†…å­˜ï¼ˆéå †å†…å­˜ï¼‰ï¼Œç„¶ååœ¨å‘é€ï¼›è€Œå †å¤–å†…å­˜ç›¸å½“äºçœç•¥æ‰äº†è¿™ä¸ªå·¥ä½œã€‚\nç¼ºç‚¹æ˜¯1.éš¾ç®¡:å› ä¸ºæ“ä½œç³»ç»Ÿç®¡çš„ï¼Œæ‰€ä»¥ä¸å®¹æ˜“æ§åˆ¶ï¼Œ\n    2.åˆ›å»ºæ…¢\n    3.ä¸å®¹æ˜“æ’æŸ¥(å†…å­˜æº¢å‡ºçš„æ—¶å€™)\n\n\nå †å¤–å†…å­˜å’Œéå †å†…å­˜æ˜¯ä¸ä¸€æ ·çš„ï¼Œéå †æ˜¯æ¯”å¦‚æ ˆä¸€ç±»çš„ï¼Œè¿˜æ˜¯åœ¨jvmå†…éƒ¨ã€‚å †å¤–åœ¨å¤–é¢\n\n\n\nè¿™ç« å¯ä»¥çœ‹å‡ºï¼Œnettyåœ¨æŸäº›æ–¹é¢å¹¶ä¸æ˜¯æœ€ä¼˜çš„ï¼Œä¸åŒçš„åœºæ™¯æˆ–è®¸æœ‰æ›´å¥½çš„é€‰æ‹©ï¼Œæˆ–è®¸æ²¡æœ‰","like_count":9,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"å‚…å¥","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476208,"discussion_content":"â€œnettyåœ¨æŸäº›æ–¹é¢å¹¶ä¸æ˜¯æœ€ä¼˜çš„â€ï¼Œè‚¯å®šçš„ï¼Œä¸ç„¶è¿™15å¹´æ¥å°±ä¸ä¼šä¸€ç›´åœ¨æŒç»­ä¼˜åŒ–æ”¹è¿›äº†ï¼Œæ‰€ä»¥å¯æ€•çš„ä¸æ˜¯å·²ç»åšåˆ°æœ€å¥½ï¼Œè€Œæ˜¯ä¸€ç›´è¿˜åœ¨æ”¹è¿›ï¼Œå“ˆå“ˆ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576207023,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":146877,"user_name":"é«˜æº","can_delete":false,"product_type":"c3","uid":1048887,"ip_address":"","ucode":"751B41FD38EF7D","user_header":"https://static001.geekbang.org/account/avatar/00/10/01/37/12e4c9c9.jpg","comment_is_top":false,"comment_ctime":1572685082,"is_pvip":false,"replies":[{"id":57315,"content":"å› ä¸ºä¸çŸ¥é“ä½ çš„ç¨‹åºåˆ°åº•æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œåªèƒ½ä»æè¿°ä¸Šæ¨æµ‹å¯èƒ½çš„æƒ…å†µï¼Œæ˜¯ä¸æ˜¯ä½ çš„ä¸šåŠ¡çº¿ç¨‹æ˜¯å¤ç”¨NioEventLoopçš„ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰å•ç‹¬æä¸€ä¸ªçº¿ç¨‹æ± å»å¤„ç†ï¼Œè¿™æ ·çš„è¯ï¼Œå¦‚æœä½ çš„ä»»åŠ¡æ¯”è¾ƒé‡ï¼ˆå•ä¸ªä»»åŠ¡å¤„ç†å¾ˆè€—æ—¶ï¼‰ï¼Œé‚£å°±ä¼šå½±å“åˆ°ä½ çš„IOå¤„ç†ï¼ˆæ”¶å‘ï¼‰ï¼Œè‡ªç„¶ä¹Ÿå°±æ…¢äº†ï¼Œä½ çœ‹ä¸‹æ˜¯ä¸æ˜¯è¿™ä¸ªæƒ…å†µã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1573133429,"ip_address":"","comment_id":146877,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"è€å¸ˆè¯·æ•™é—®é¢˜ï¼Œæˆ‘å¼€å‘æœåŠ¡ç«¯ç¨‹åºï¼Œä¸‹é¢æœ‰å¤šä¸ªå®¢æˆ·ç«¯è¿æ¥å‘é€æ¶ˆæ¯ï¼Œsocket tcpé€šä¿¡æ–¹å¼ï¼Œç°åœ¨å‘ç°å¦‚æœå¤šä¸ªå®¢æˆ·ç«¯å‘é€ï¼Œå¹¶å‘æ¶ˆæ¯å¤šäº†ï¼Œæ ¹æ®æ—¥å¿—åˆ†æå‘ç°æœåŠ¡ç«¯æ¥æ”¶çš„å°±æ™šäº†ï¼Œå¯¼è‡´å®¢æˆ·ç«¯è®°å½•è¶…æ—¶ï¼Œè¿™ç§æƒ…å†µæ€ä¹ˆè§£å†³å•Šï¼Œæ˜¯æœåŠ¡ç«¯å¤„ç†èƒ½åŠ›ä¸è¡Œå—ï¼Œå¦å¤–è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯å®¢æˆ·ç«¯å‘æ¶ˆæ¯äº†ï¼Œä½†æœåŠ¡ç«¯æ²¡æœ‰æ”¶åˆ°å¯¼è‡´è¶…æ—¶ã€‚è¿™ä¸¤ç§æƒ…å†µæˆ‘è¯¥æ€ä¹ˆå¤„ç†å‘¢ğŸ˜Šå¸Œæœ›è€å¸ˆæŒ‡ç‚¹æ±Ÿå±±å•ŠğŸ˜Š","like_count":2,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"å‚…å¥","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473042,"discussion_content":"å› ä¸ºä¸çŸ¥é“ä½ çš„ç¨‹åºåˆ°åº•æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œåªèƒ½ä»æè¿°ä¸Šæ¨æµ‹å¯èƒ½çš„æƒ…å†µï¼Œæ˜¯ä¸æ˜¯ä½ çš„ä¸šåŠ¡çº¿ç¨‹æ˜¯å¤ç”¨NioEventLoopçš„ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰å•ç‹¬æä¸€ä¸ªçº¿ç¨‹æ± å»å¤„ç†ï¼Œè¿™æ ·çš„è¯ï¼Œå¦‚æœä½ çš„ä»»åŠ¡æ¯”è¾ƒé‡ï¼ˆå•ä¸ªä»»åŠ¡å¤„ç†å¾ˆè€—æ—¶ï¼‰ï¼Œé‚£å°±ä¼šå½±å“åˆ°ä½ çš„IOå¤„ç†ï¼ˆæ”¶å‘ï¼‰ï¼Œè‡ªç„¶ä¹Ÿå°±æ…¢äº†ï¼Œä½ çœ‹ä¸‹æ˜¯ä¸æ˜¯è¿™ä¸ªæƒ…å†µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573133429,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":281989,"user_name":"ä¸‰é¢—è±†å­","can_delete":false,"product_type":"c3","uid":2008638,"ip_address":"","ucode":"632CE3E7563666","user_header":"https://static001.geekbang.org/account/avatar/00/1e/a6/3e/3d18f35a.jpg","comment_is_top":false,"comment_ctime":1615003701,"is_pvip":false,"replies":[{"id":105069,"content":"å“ˆå“ˆï¼Œè°¢è°¢æé†’","user_name":"ä½œè€…å›å¤","user_name_real":"å‚…å¥","uid":1638649,"ctime":1619133714,"ip_address":"","comment_id":281989,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"è¯¾ç¨‹å¾ˆæ£’ï¼Œä½†å¸Œæœ›å¤§ä½¬å¯ä»¥ç»ƒä¹ ä¸€ä¸‹è‹±è¯­ï¼Œbyteä¸æ˜¯bitï¼Œqueueä¸æ˜¯&quot;äº&quot;ä¹‹ç±»çš„ã€‚å¤šå¬å‡ éä¼šè®©äººè®°ä½è¿™äº›å‘éŸ³çš„â€¦â€¦çœ‹è§†é¢‘åˆæƒ³è®°ä½çŸ¥è¯†ï¼Œåˆæƒ³å¿˜è®°å‘éŸ³ï¼Œå°±å¾ˆéš¾å—ã€‚","like_count":1,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"å‚…å¥","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516573,"discussion_content":"å“ˆå“ˆï¼Œè°¢è°¢æé†’","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619133714,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144662,"user_name":"13761642169","can_delete":false,"product_type":"c3","uid":1232334,"ip_address":"","ucode":"68137695FC2120","user_header":"","comment_is_top":false,"comment_ctime":1571991888,"is_pvip":false,"replies":[{"id":57879,"content":"ä¸æ˜¯ï¼Œjvmé‡Œé¢çš„å †ç›¸å½“äºæ•°æ®ï¼Œæ ˆç®—åŠ¨ä½œï¼Œæ‰€ä»¥åŠ ä¸€èµ·ï¼Œå †æ ˆï¼Œè€Œå †å¤–å†…å­˜è‡ªç„¶å±äºå †â€œå¤–â€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1573550023,"ip_address":"","comment_id":144662,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"DirectByteBuffer æ˜¯å †å¤–å†…å­˜ã€‚æŠŠ JVM è¿›ç¨‹å½“ä½œä¸€ä¸ªæ™®é€šè¿›ç¨‹ï¼Œå †å¤–å†…å­˜æ˜¯åŸæ¥â€œå †â€çš„ä¸€éƒ¨åˆ†å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"å‚…å¥","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472060,"discussion_content":"ä¸æ˜¯ï¼Œjvmé‡Œé¢çš„å †ç›¸å½“äºæ•°æ®ï¼Œæ ˆç®—åŠ¨ä½œï¼Œæ‰€ä»¥åŠ ä¸€èµ·ï¼Œå †æ ˆï¼Œè€Œå †å¤–å†…å­˜è‡ªç„¶å±äºå †â€œå¤–â€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573550023,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1184514,"avatar":"https://static001.geekbang.org/account/avatar/00/12/13/02/37aa3882.jpg","nickname":"Ræ›¾","note":"","ucode":"8AED49A52AFF12","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":40864,"discussion_content":"å †å¤–å°±æ˜¯å †å¤–ï¼Œä¸åœ¨jvm gcèŒƒå›´çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572278049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1232334,"avatar":"","nickname":"13761642169","note":"","ucode":"68137695FC2120","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1184514,"avatar":"https://static001.geekbang.org/account/avatar/00/12/13/02/37aa3882.jpg","nickname":"Ræ›¾","note":"","ucode":"8AED49A52AFF12","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":41185,"discussion_content":"è¿™é‡Œçš„å †æŒ‡è¿›ç¨‹çš„â€œå †â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572362032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":40864,"ip_address":"","group_id":0},"score":41185,"extra":""}]}]},{"had_liked":false,"id":224508,"user_name":"jhren","can_delete":false,"product_type":"c3","uid":1596987,"ip_address":"","ucode":"60F7CCEA1E2C88","user_header":"https://static001.geekbang.org/account/avatar/00/18/5e/3b/845fb641.jpg","comment_is_top":false,"comment_ctime":1591424955,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"è€å¸ˆçœŸæ˜¯å¦™è¯­è¿ç \nâ€œæ™ºå•†ä¸å¤Ÿé åŠ æœºå™¨è§£å†³â€","like_count":6},{"had_liked":false,"id":258796,"user_name":"Geek_92e5c7","can_delete":false,"product_type":"c3","uid":2204181,"ip_address":"","ucode":"8C365ED3EB4680","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiaZ7nNKht10ByTCOSaLX6ZdSWqS2tlyUVqQ5eUeOSe2Ufrtb3UsRVkNU2fiaJjbWXBianuEHuV4BzTiaKm90HdtiaA/132","comment_is_top":false,"comment_ctime":1604558428,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"è¿™æ˜¯ä¸€é—¨è®©æˆ‘çœ‹çš„æ´¥æ´¥æœ‰å‘³çš„è¯¾ç¨‹ï¼Œä¼˜ç§€","like_count":3},{"had_liked":false,"id":358828,"user_name":"æå¹²å˜›","can_delete":false,"product_type":"c3","uid":3109470,"ip_address":"æ¹–å—","ucode":"C93D33187ABE1A","user_header":"https://static001.geekbang.org/account/avatar/00/2f/72/5e/1533fac0.jpg","comment_is_top":false,"comment_ctime":1664865368,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"ä¸å¤Ÿå¥½ï¼Œç¼ºä¹ç»†èŠ‚ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œé‚£ä¸ªmsgæœ‰æ—¶channelæœ‰æ—¶bytebufæ²¡è¯¦ç»†è¯´æ˜ã€‚å¾ˆå¤šåœ°æ–¹ä¸€ç¬”å¸¦è¿‡ã€‚","like_count":2},{"had_liked":false,"id":173825,"user_name":"13761642169","can_delete":false,"product_type":"c3","uid":1232334,"ip_address":"","ucode":"68137695FC2120","user_header":"","comment_is_top":false,"comment_ctime":1579709810,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"æˆ‘çœ‹ç€æ‚¨çš„è¯¾ç¨‹ï¼Œç„¶åä»”ç»†å»æ’¸äº† netty çš„æºç ï¼Œæ„Ÿè§‰æ°´æŒºæ·±ã€‚å…‰å†…å­˜åˆ†é…è¿™å—ï¼Œé¦–å…ˆæ˜¯å¯¹è±¡æ± ï¼Œç„¶åæ˜¯å†…å­˜çš„ç®¡ç†ï¼Œå¤§é‡ä½¿ç”¨ thread localï¼Œè¿˜æœ‰è™šå¼•ç”¨ã€‚å†æ„Ÿè§‰å°±æ˜¯ pipelineï¼Œè¿™å—å§‹ç»ˆä¸²ä¸èµ·æ¥ï¼Œé€šå¸¸è§åˆ°çš„ pipelineï¼Œéƒ½æ˜¯åœ¨ä¸€æ¡æµæ°´çº¿ä¸Šæ‰§è¡ŒåŒä¸€ä¸ªæ–¹æ³•ï¼Œåƒ filter é‚£æ ·ï¼Œä½† netty çš„ pipelineï¼Œwrite ä¸€ä¸ªå¯¹è±¡å‡ºå»ï¼Œè°ƒåˆ°äº† MessageToByte çš„ encode æ–¹æ³•","like_count":2},{"had_liked":false,"id":288428,"user_name":"ç¬‘å¿˜ä¹¦","can_delete":false,"product_type":"c3","uid":1180447,"ip_address":"","ucode":"FA21EFA971E03D","user_header":"https://static001.geekbang.org/account/avatar/00/12/03/1f/1280ed77.jpg","comment_is_top":false,"comment_ctime":1618466146,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"å‡å°‘å†…å­˜æŠ€å·§ï¼š\n1.åŸºæœ¬ç±»å‹å˜é‡ä¼˜å…ˆäºåŒ…è£…ç±»å˜é‡\n2.ç±»å˜é‡ä¼˜å…ˆäºå®ä¾‹å˜é‡\n3.é¢„ä¼°å†…å­˜è¦ä½¿ç”¨çš„å¤§å°æ¥è®¾ç½®å†…å­˜ç©ºé—´ç”³è¯·\n4.zero-copy (1.é€»è¾‘ç»„åˆä»£æ›¿å†…å­˜å¤åˆ¶ 2.åŒ…è£…ä»£æ›¿å†…å­˜å¤åˆ¶ 3.nettyè°ƒç”¨äº†jdkæ”¯æŒçš„zero-copy)\n5.å †å¤–å†…å­˜(off heap):  JVM(heap + non heeap éå †(æ ˆã€æ–¹æ³•åŒºç­‰)) \n   ä¼˜ç‚¹ï¼šå‡è½»GCå‹åŠ›   å‡å°‘å†—ä½™ç»†èŠ‚ å‡å°‘å¤åˆ¶\n   ç¼ºç‚¹ï¼šåˆ›å»ºé€Ÿåº¦æ…¢   å—æ“ä½œç³»ç»Ÿç®¡ç†ï¼Œé£é™©ä¸å¯æ§\n6.å†…å­˜æ± ï¼š\n    whyï¼š1.åˆ›å»ºå¯¹è±¡å¼€é”€æ¯”è¾ƒå¤§   2.å¯¹è±¡é«˜é¢‘ç‡åˆ›å»ºä¸”å¯å¤ç”¨  3.æ”¯æŒé«˜å¹¶å‘ä¸”èƒ½ä¿æŠ¤ç³»ç»Ÿ  4.ç»´æŠ¤ã€å…±äº«æœ‰é™çš„èµ„æº\n    howï¼šApache Commons Pool å…¨å±€å…±äº«å†…å­˜æ±   èµ„æºäº‰ç”¨æ¯”è¾ƒå‰å®³\n              Netty è½»é‡çº§å¯¹è±¡æ±    io.netty.util.Recycler   ","like_count":1},{"had_liked":false,"id":173827,"user_name":"13761642169","can_delete":false,"product_type":"c3","uid":1232334,"ip_address":"","ucode":"68137695FC2120","user_header":"","comment_is_top":false,"comment_ctime":1579710125,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"æˆ‘æ˜¯ä» rocketMQ åˆ°çš„ nettyï¼Œrmq é‡Œé¢ç”¨åˆ°äº†FileRegionï¼Œå…·ä½“è¿™é‡Œé¢çš„ä¼˜åŠ¿åœ¨å“ª","like_count":1},{"had_liked":false,"id":173826,"user_name":"13761642169","can_delete":false,"product_type":"c3","uid":1232334,"ip_address":"","ucode":"68137695FC2120","user_header":"","comment_is_top":false,"comment_ctime":1579710003,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"è¿˜æœ‰å°±æ˜¯ï¼Œæˆ‘çœ‹åˆ°ç½‘ä¸Šçš„è¯´æ³•ï¼Œå †å¤–å†…å­˜IOæ¯”å †å†…å†…å­˜IOæ•ˆç‡é«˜ï¼Œå‡å°‘äº†ä¸€æ¬¡æ‹·è´ã€‚è¯´æ˜¯ï¼Œjava IOæ—¶ï¼Œä¼šå…ˆä»å †å†…æ‹·å †å¤–ï¼Œç„¶åæ‰æ˜¯å†™åˆ° socket bufferï¼ŒåŸå› æ˜¯ Java gc ä¼šæ”¹å˜å¯¹è±¡çš„å†…å­˜åœ°å€","like_count":1},{"had_liked":false,"id":386434,"user_name":"wallacefw","can_delete":false,"product_type":"c3","uid":1168686,"ip_address":"å¹¿ä¸œ","ucode":"9EC56A542D9927","user_header":"https://static001.geekbang.org/account/avatar/00/11/d5/2e/7ace1d94.jpg","comment_is_top":false,"comment_ctime":1704803988,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"çœ‹åˆ°è¿™é‡Œ","like_count":0},{"had_liked":false,"id":377094,"user_name":"Geek_fa0f35","can_delete":false,"product_type":"c3","uid":2258701,"ip_address":"åŒ—äº¬","ucode":"1CEAAFF6A94491","user_header":"","comment_is_top":false,"comment_ctime":1687924817,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"è€å¸ˆï¼Œæ ¹æ®è§†é¢‘åŸºäºnettyåˆ›å»ºäº†é€šä¿¡å±‚ï¼Œç°åœ¨é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œæ¶ˆæ¯å¤§æ¦‚æœ‰30Mï¼Œç»å¸¸æç¤ºIndexOutOfBoundsExceptionï¼ŒreaderIndex(24) + length(29072808) exceeds writerIndex(1024)ã€‚è¿™ä¸ªæ€ä¹ˆè§£å†³ï¼Ÿ","like_count":0},{"had_liked":false,"id":286738,"user_name":"é•¿è„–å­æ ‘","can_delete":false,"product_type":"c3","uid":1182802,"ip_address":"","ucode":"D9090EF67EEB1B","user_header":"https://static001.geekbang.org/account/avatar/00/12/0c/52/f25c3636.jpg","comment_is_top":false,"comment_ctime":1617541567,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"çœ‹äº†ä¸‹æºç  4.1.60 ç‰ˆæœ¬ , AdaptiveRecvByteBufAllocator.HandleImpl ä¸­çš„ record()æ–¹æ³•ä¸­çš„ -1 å·²ç»å»æ‰äº†","like_count":0},{"had_liked":false,"id":220939,"user_name":"å¤©çŠ","can_delete":false,"product_type":"c3","uid":1285621,"ip_address":"","ucode":"E3EAA4E6C4237B","user_header":"https://static001.geekbang.org/account/avatar/00/13/9d/f5/c74224dc.jpg","comment_is_top":false,"comment_ctime":1590361590,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"è¿›ç¨‹ä¸€èˆ¬åˆ†ä¸ºæ•°æ®æ®µï¼Œä»£ç æ®µï¼Œå †å’Œæ ˆï¼Œä»è¿›ç¨‹çš„è§’åº¦çœ‹jvm. java stack, java heapéƒ½æ˜¯åœ¨jvmè¿›ç¨‹çš„å †é‡Œ. é‚£ä¹ˆè¿™èŠ‚å†…å®¹çš„directByteBufä¹Ÿæ˜¯åœ¨jvmé‡Œé¢çš„å †ï¼ˆä¸æ˜¯æŒ‡java heapï¼‰é‡Œåˆ†é…ä¹ˆ","like_count":0},{"had_liked":false,"id":179823,"user_name":"è¾‰ç…Œç å†œ","can_delete":false,"product_type":"c3","uid":1332799,"ip_address":"","ucode":"09779C2E06EA52","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIy5ULaodUwsLoPuk1wd22hqXsaBbibNEqXM0kgrCTYDGKYQkZICYEyH9wMj4hyUicuQwHdDuOKRj0g/132","comment_is_top":false,"comment_ctime":1582105083,"is_pvip":false,"replies":null,"discussion_count":3,"race_medal":0,"score":3,"product_id":100036701,"comment_content":" static int capacity(int expectedSize) {\n    if (expectedSize &lt; 3) {\n      checkNonnegative(expectedSize, &quot;expectedSize&quot;);\n      return expectedSize + 1;\n    }\n    if (expectedSize &lt; Ints.MAX_POWER_OF_TWO) {\n      &#47;&#47; This is the calculation used in JDK8 to resize when a putAll\n      &#47;&#47; happens; it seems to be the most conservative calculation we\n      &#47;&#47; can make.  0.75 is the default load factor.\n      return (int) ((float) expectedSize &#47; 0.75F + 1.0F);\n    }\n    return Integer.MAX_VALUE; &#47;&#47; any large value\n  }\n\nè€å¸ˆï¼Œè¿™ä¸€è¡Œæœ€åä¸ºä»€ä¹ˆè¿˜éœ€è¦åŠ 1å‘¢ã€‚å‡è®¾HashMap åªéœ€è¦å­˜6ä¸ªå…ƒç´ ï¼Œä¸åŠ  6 &#47; 0.75 åˆšå¥½ç­‰äº8ï¼ŒåŠ 1ä¹‹åå˜æˆ9ï¼Œæ•°ç»„é•¿åº¦è¦å˜æˆ16ï¼Œä¸æ˜¯ç©ºé—´æœ‰æµªè´¹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1614090,"avatar":"https://static001.geekbang.org/account/avatar/00/18/a1/0a/b1f68315.jpg","nickname":"é›¶é›¶åç³–è±†è±†","note":"","ucode":"B83235955294C7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":636869,"discussion_content":"å› ä¸ºåˆ° 6 å°±ä¼šæ‰©å®¹ è¿™ä¸ªä¾‹å­æ‰¾çš„ä¸æ°å½“ åº”è¯¥æ‰¾ 16 ä»¥ä¸Šçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1707138113,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1886331,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/c8/7b/153181d7.jpg","nickname":"å¤œè¾‰","note":"","ucode":"9421385F51FF9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338987,"discussion_content":"è´Ÿè½½å› å­é»˜è®¤ä¸º0.75ï¼Œå‡è®¾HashMapå®¹é‡ä¸º8ï¼Œé‚£ä¹ˆæ‰©å®¹é˜ˆå€¼ä¸º8 * 0.75 = 6ï¼Œä¹Ÿå°±æ˜¯è¯´å­˜å‚¨å…ƒç´ è¾¾åˆ°6ä¸ªæ—¶ï¼Œå°±è¦æ‰©å®¹ï¼Œå˜æˆ16ï¼Œå› æ­¤è¿”å›çš„å®¹é‡ä¼šæ˜¯16","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609470336,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1136188,"avatar":"https://static001.geekbang.org/account/avatar/00/11/56/3c/e345522b.jpg","nickname":"xxwy","note":"","ucode":"BA2476EAF31F0D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":220611,"discussion_content":"å‘ä¸Šå–æ•´ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585906579,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}