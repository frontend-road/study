{"id":70708,"title":"16 | ZooKeeperæ˜¯å¦‚ä½•ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„ï¼Ÿ","content":"<p>ä½ å¯èƒ½è¿˜è®°å¾—ï¼Œæˆ‘ä»¬åœ¨è®²HDFSå’ŒHBaseæ¶æ„åˆ†ææ—¶éƒ½æåˆ°äº†ZooKeeperã€‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿé‡Œçš„å¤šå°æœåŠ¡å™¨è¦å¯¹æ•°æ®çŠ¶æ€è¾¾æˆä¸€è‡´ï¼Œå…¶å®æ˜¯ä¸€ä»¶å¾ˆæœ‰éš¾åº¦å’ŒæŒ‘æˆ˜çš„äº‹æƒ…ï¼Œå› ä¸ºæœåŠ¡å™¨é›†ç¾¤ç¯å¢ƒçš„è½¯ç¡¬ä»¶æ•…éšœéšæ—¶ä¼šå‘ç”Ÿï¼Œå¤šå°æœåŠ¡å™¨å¯¹ä¸€ä¸ªæ•°æ®çš„è®°å½•ä¿æŒä¸€è‡´ï¼Œéœ€è¦ä¸€äº›æŠ€å·§å’Œè®¾è®¡ã€‚</p><p>è¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬ä»Šå¤©è¦è®¨è®ºçš„åˆ†å¸ƒå¼ç³»ç»Ÿä¸€è‡´æ€§ä¸ZooKeeperçš„æ¶æ„ã€‚</p><p>åœ¨è®²åˆ†å¸ƒå¼ç³»ç»Ÿä¸€è‡´æ€§å‰ï¼Œæˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹HDFSã€‚HDFSä¸ºäº†ä¿è¯æ•´ä¸ªé›†ç¾¤çš„é«˜å¯ç”¨ï¼Œéœ€è¦éƒ¨ç½²ä¸¤å°NameNodeæœåŠ¡å™¨ï¼Œä¸€å°ä½œä¸ºä¸»æœåŠ¡å™¨ï¼Œä¸€å°ä½œä¸ºä»æœåŠ¡å™¨ã€‚å½“ä¸»æœåŠ¡å™¨ä¸å¯ç”¨çš„æ—¶å€™ï¼Œå°±åˆ‡æ¢åˆ°ä»æœåŠ¡å™¨ä¸Šè®¿é—®ã€‚ä½†æ˜¯å¦‚æœä¸åŒçš„åº”ç”¨ç¨‹åºï¼ˆClientï¼‰æˆ–è€…DataNodeåšå‡ºçš„å…³äºä¸»æœåŠ¡å™¨æ˜¯å¦å¯ç”¨çš„åˆ¤æ–­ä¸åŒï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´HDFSé›†ç¾¤æ··ä¹±ã€‚</p><p>æ¯”å¦‚ä¸¤ä¸ªåº”ç”¨ç¨‹åºéƒ½éœ€è¦å¯¹ä¸€ä¸ªæ–‡ä»¶è·¯å¾„è¿›è¡Œå†™æ“ä½œï¼Œä½†æ˜¯å¦‚æœä¸¤ä¸ªåº”ç”¨ç¨‹åºå¯¹äºå“ªå°æœåŠ¡å™¨æ˜¯ä¸»æœåŠ¡å™¨çš„åˆ¤æ–­ä¸åŒï¼Œå°±ä¼šåˆ†åˆ«è¿æ¥åˆ°ä¸¤ä¸ªä¸åŒçš„NameNodeä¸Šï¼Œå¹¶éƒ½å¾—åˆ°äº†å¯¹åŒä¸€ä¸ªæ–‡ä»¶è·¯å¾„çš„å†™æ“ä½œæƒé™ï¼Œè¿™æ ·å°±ä¼šå¼•èµ·æ–‡ä»¶æ•°æ®å†²çªï¼ŒåŒä¸€ä¸ªæ–‡ä»¶æŒ‡å‘äº†ä¸¤ä»½ä¸åŒçš„æ•°æ®ã€‚</p><p>è¿™ç§ä¸åŒä¸»æœåŠ¡å™¨åšå‡ºä¸åŒçš„å“åº”ï¼Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­è¢«ç§°ä½œâ€œè„‘è£‚â€ã€‚å…‰çœ‹è¿™ä¸ªè¯ä½ ä¹Ÿå¯ä»¥çœ‹å‡ºé—®é¢˜çš„ä¸¥é‡æ€§ï¼Œè¿™æ—¶å€™é›†ç¾¤å¤„äºæ··ä¹±çŠ¶æ€ï¼Œæ ¹æœ¬æ— æ³•ä½¿ç”¨ã€‚é‚£æˆ‘ä»¬å¼•å…¥ä¸€ä¸ªä¸“é—¨è¿›è¡Œåˆ¤æ–­çš„æœåŠ¡å™¨å½“â€œè£åˆ¤â€ï¼Œè®©â€œè£åˆ¤â€å†³å®šå“ªä¸ªæœåŠ¡å™¨æ˜¯ä¸»æœåŠ¡å™¨ä¸å°±å®Œäº‹äº†å—ï¼Ÿ</p><!-- [[[read_end]]] --><p>ä½†æ˜¯è¿™ä¸ªåšå‡ºåˆ¤æ–­å†³ç­–çš„æœåŠ¡å™¨ä¹Ÿæœ‰å¯èƒ½ä¼šå‡ºç°æ•…éšœä¸å¯è®¿é—®ï¼ŒåŒæ ·æ•´ä¸ªæœåŠ¡å™¨é›†ç¾¤ä¹Ÿä¸èƒ½æ­£å¸¸è¿è¡Œã€‚æ‰€ä»¥è¿™ä¸ªåšå‡ºåˆ¤æ–­å†³ç­–çš„æœåŠ¡å™¨å¿…é¡»ç”±å¤šå°æœåŠ¡å™¨ç»„æˆï¼Œæ¥ä¿è¯é«˜å¯ç”¨ï¼Œä»»æ„ä¸€å°æœåŠ¡å™¨å®•æœºéƒ½ä¸ä¼šå½±å“ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚</p><p>é‚£ä¹ˆé—®é¢˜åˆæ¥äº†ï¼Œè¿™å‡ å°åšå‡ºåˆ¤æ–­å†³ç­–çš„æœåŠ¡å™¨åˆå¦‚ä½•é˜²æ­¢â€œè„‘è£‚â€ï¼Œè‡ªå·±ä¸ä¼šå‡ºç°æ··ä¹±çŠ¶æ€å‘¢ï¼Ÿæœ‰æ—¶å€™çœŸçš„å¾ˆæ— å¥ˆï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡å°±åƒæ˜¯ä¸€ä¸ªè¿½ç€è‡ªå·±å°¾å·´å’¬çš„å–µå–µï¼Œå…œå…œè½¬è½¬å›åˆ°å¼€å¤´ã€‚</p><p>ä½†æ˜¯é—®é¢˜å¿…é¡»è¿˜è¦è§£å†³ï¼Œæˆ‘ä»¬æ¯”è¾ƒå¸¸ç”¨çš„å¤šå°æœåŠ¡å™¨çŠ¶æ€ä¸€è‡´æ€§çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯ZooKeeperã€‚</p><h2>åˆ†å¸ƒå¼ä¸€è‡´æ€§åŸç†</h2><p>è®²åˆ†å¸ƒå¼ä¸€è‡´æ€§æ—¶ï¼Œç›¸ä¿¡ä½ è‚¯å®šå¤šå°‘å¬è¿‡è‘—åçš„CAPåŸç†ã€‚CAPåŸç†è®¤ä¸ºï¼Œä¸€ä¸ªæä¾›æ•°æ®æœåŠ¡çš„åˆ†å¸ƒå¼ç³»ç»Ÿæ— æ³•åŒæ—¶æ»¡è¶³æ•°æ®<strong>ä¸€è‡´æ€§</strong>ï¼ˆConsistencyï¼‰ã€<strong>å¯ç”¨æ€§</strong>ï¼ˆAvailibilityï¼‰ã€<strong>åˆ†åŒºè€å—æ€§</strong>ï¼ˆPatition Toleranceï¼‰è¿™ä¸‰ä¸ªæ¡ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/bf/b2/bfdc62821672a82c24e6e6f5b62ae6b2.png?wh=1268x730\" alt=\"\"></p><p>ä¸€è‡´æ€§æ˜¯è¯´ï¼Œæ¯æ¬¡è¯»å–çš„æ•°æ®éƒ½åº”è¯¥æ˜¯æœ€è¿‘å†™å…¥çš„æ•°æ®æˆ–è€…è¿”å›ä¸€ä¸ªé”™è¯¯ï¼ˆEvery read receives the most recent write or an errorï¼‰ï¼Œè€Œä¸æ˜¯è¿‡æœŸæ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ•°æ®æ˜¯ä¸€è‡´çš„ã€‚</p><p>å¯ç”¨æ€§æ˜¯è¯´ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½åº”è¯¥å¾—åˆ°ä¸€ä¸ªå“åº”ï¼Œè€Œä¸æ˜¯è¿”å›ä¸€ä¸ªé”™è¯¯æˆ–è€…å¤±å»å“åº”ï¼Œä¸è¿‡è¿™ä¸ªå“åº”ä¸éœ€è¦ä¿è¯æ•°æ®æ˜¯æœ€è¿‘å†™å…¥çš„ï¼ˆEvery request receives a (non-error) response, without the guarantee that it contains the most recent writeï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ç³»ç»Ÿéœ€è¦ä¸€ç›´éƒ½æ˜¯å¯ä»¥æ­£å¸¸ä½¿ç”¨çš„ï¼Œä¸ä¼šå¼•èµ·è°ƒç”¨è€…çš„å¼‚å¸¸ï¼Œä½†æ˜¯å¹¶ä¸ä¿è¯å“åº”çš„æ•°æ®æ˜¯æœ€æ–°çš„ã€‚</p><p>åˆ†åŒºè€å—æ€§æ˜¯è¯´ï¼Œå³ä½¿å› ä¸ºç½‘ç»œåŸå› ï¼Œéƒ¨åˆ†æœåŠ¡å™¨èŠ‚ç‚¹ä¹‹é—´æ¶ˆæ¯ä¸¢å¤±æˆ–è€…å»¶è¿Ÿäº†ï¼Œç³»ç»Ÿä¾ç„¶åº”è¯¥æ˜¯å¯ä»¥æ“ä½œçš„ï¼ˆThe system continues to operate despite an arbitrary number of messages being dropped (or delayed) by the network between nodesï¼‰ã€‚</p><p>å½“ç½‘ç»œåˆ†åŒºå¤±æ•ˆå‘ç”Ÿçš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦ä¹ˆå–æ¶ˆæ“ä½œï¼Œè¿™æ ·æ•°æ®å°±æ˜¯ä¸€è‡´çš„ï¼Œä½†æ˜¯ç³»ç»Ÿå´ä¸å¯ç”¨ï¼›è¦ä¹ˆæˆ‘ä»¬ç»§ç»­å†™å…¥æ•°æ®ï¼Œä½†æ˜¯æ•°æ®çš„ä¸€è‡´æ€§å°±å¾—ä¸åˆ°ä¿è¯ã€‚</p><p>å¯¹äºä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿè€Œè¨€ï¼Œç½‘ç»œå¤±æ•ˆä¸€å®šä¼šå‘ç”Ÿï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåˆ†åŒºè€å—æ€§æ˜¯å¿…é¡»è¦ä¿è¯çš„ï¼Œé‚£ä¹ˆåœ¨å¯ç”¨æ€§å’Œä¸€è‡´æ€§ä¸Šå°±å¿…é¡»äºŒé€‰ä¸€ã€‚å½“ç½‘ç»œåˆ†åŒºå¤±æ•ˆï¼Œä¹Ÿå°±æ˜¯ç½‘ç»œä¸å¯ç”¨çš„æ—¶å€™ï¼Œå¦‚æœé€‰æ‹©äº†ä¸€è‡´æ€§ï¼Œç³»ç»Ÿå°±å¯èƒ½è¿”å›ä¸€ä¸ªé”™è¯¯ç æˆ–è€…å¹²è„†è¶…æ—¶ï¼Œå³ç³»ç»Ÿä¸å¯ç”¨ã€‚å¦‚æœé€‰æ‹©äº†å¯ç”¨æ€§ï¼Œé‚£ä¹ˆç³»ç»Ÿæ€»æ˜¯å¯ä»¥è¿”å›ä¸€ä¸ªæ•°æ®ï¼Œä½†æ˜¯å¹¶ä¸èƒ½ä¿è¯è¿™ä¸ªæ•°æ®æ˜¯æœ€æ–°çš„ã€‚</p><p>æ‰€ä»¥ï¼Œå…³äºCAPåŸç†ï¼Œæ›´å‡†ç¡®çš„è¯´æ³•æ˜¯ï¼Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿå¿…é¡»è¦æ»¡è¶³åˆ†åŒºè€å—æ€§çš„å‰æä¸‹ï¼Œå¯ç”¨æ€§å’Œä¸€è‡´æ€§æ— æ³•åŒæ—¶æ»¡è¶³ã€‚</p><h2>ZABç®—æ³•ä¸ZooKeeperæ¶æ„</h2><p>ZooKeeperä¸»è¦æä¾›æ•°æ®çš„ä¸€è‡´æ€§æœåŠ¡ï¼Œå…¶å®ç°åˆ†å¸ƒå¼ç³»ç»Ÿçš„çŠ¶æ€ä¸€è‡´æ€§ä¾èµ–ä¸€ä¸ªå«Paxosçš„ç®—æ³•ã€‚Paxosç®—æ³•åœ¨å¤šå°æœåŠ¡å™¨é€šè¿‡å†…éƒ¨çš„æŠ•ç¥¨è¡¨å†³æœºåˆ¶å†³å®šä¸€ä¸ªæ•°æ®çš„æ›´æ–°ä¸å†™å…¥ã€‚Paxosçš„åŸºæœ¬æ€è·¯è¯·çœ‹ä¸‹é¢çš„å›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/5b/28/5b47c6fd9f61be41daa1f88662c6fb28.png?wh=1318x844\" alt=\"\"></p><p>åº”ç”¨ç¨‹åºè¿æ¥åˆ°ä»»æ„ä¸€å°æœåŠ¡å™¨åæèµ·çŠ¶æ€ä¿®æ”¹è¯·æ±‚ï¼ˆä¹Ÿå¯ä»¥æ˜¯è·å¾—æŸä¸ªçŠ¶æ€é”çš„è¯·æ±‚ï¼‰ï¼Œä»å›¾ä¸Šçœ‹ä¹Ÿå°±æ˜¯æœåŠ¡å™¨1ï¼Œä¼šå°†è¿™ä¸ªè¯·æ±‚å‘é€ç»™é›†ç¾¤ä¸­å…¶ä»–æœåŠ¡å™¨è¿›è¡Œè¡¨å†³ã€‚å¦‚æœæŸä¸ªæœåŠ¡å™¨åŒæ—¶æ”¶åˆ°äº†å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºåŒæ ·çš„ä¿®æ”¹è¯·æ±‚ï¼Œå®ƒå¯èƒ½ä¼šæ‹’ç»æœåŠ¡å™¨1çš„è¡¨å†³ï¼Œå¹¶ä¸”è‡ªå·±ä¹Ÿå‘èµ·ä¸€ä¸ªåŒæ ·çš„è¡¨å†³è¯·æ±‚ï¼Œé‚£ä¹ˆå…¶ä»–æœåŠ¡å™¨å°±ä¼šæ ¹æ®æ—¶é—´æˆ³å’ŒæœåŠ¡å™¨æ’åºè§„åˆ™è¿›è¡Œè¡¨å†³ã€‚</p><p>è¡¨å†³ç»“æœä¼šå‘é€ç»™å…¶ä»–æ‰€æœ‰æœåŠ¡å™¨ï¼Œæœ€ç»ˆå‘èµ·è¡¨å†³çš„æœåŠ¡å™¨ä¹Ÿå°±æ˜¯æœåŠ¡å™¨1ï¼Œä¼šæ ¹æ®æ”¶åˆ°çš„è¡¨å†³ç»“æœå†³å®šè¯¥ä¿®æ”¹è¯·æ±‚æ˜¯å¦å¯ä»¥æ‰§è¡Œï¼Œäº‹å®ä¸Šï¼Œåªæœ‰åœ¨æ”¶åˆ°å¤šæ•°è¡¨å†³åŒæ„çš„æƒ…å†µä¸‹æ‰ä¼šå†³å®šæ‰§è¡Œã€‚å½“æœ‰å¤šä¸ªè¯·æ±‚åŒæ—¶ä¿®æ”¹æŸä¸ªæ•°æ®çš„æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨çš„è¡¨å†³æœºåˆ¶ä¿è¯åªæœ‰ä¸€ä¸ªè¯·æ±‚ä¼šé€šè¿‡æ‰§è¡Œï¼Œä»è€Œä¿è¯äº†æ•°æ®çš„ä¸€è‡´æ€§ã€‚</p><p>Paxosç®—æ³•æœ‰ç‚¹è¿‡äºå¤æ‚ã€å®ç°éš¾åº¦ä¹Ÿæ¯”è¾ƒé«˜ï¼Œæ‰€ä»¥ZooKeeperåœ¨ç¼–ç¨‹å®ç°çš„æ—¶å€™å°†å…¶ç®€åŒ–æˆäº†ä¸€ç§å«åšZABçš„ç®—æ³•ï¼ˆZookeeper Atomic Broadcastï¼Œ ZookeeperåŸå­å¹¿æ’­ï¼‰ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e3/42/e3a0b1855e8455cf59584bce0ab5c042.png?wh=2482x1266\" alt=\"\"></p><p>ZABç®—æ³•çš„ç›®çš„ï¼ŒåŒæ ·æ˜¯åœ¨å¤šå°æœåŠ¡å™¨ä¹‹é—´è¾¾æˆä¸€è‡´ï¼Œä¿è¯è¿™äº›æœåŠ¡å™¨ä¸Šå­˜å‚¨çš„æ•°æ®æ˜¯ä¸€è‡´çš„ã€‚ZABç®—æ³•çš„ä¸»è¦ç‰¹ç‚¹åœ¨äºï¼šéœ€è¦åœ¨è¿™äº›æœåŠ¡å™¨ä¸­é€‰ä¸¾ä¸€ä¸ªLeaderï¼Œæ‰€æœ‰çš„å†™è¯·æ±‚éƒ½å¿…é¡»æäº¤ç»™Leaderã€‚ç”±LeaderæœåŠ¡å™¨å‘å…¶ä»–æœåŠ¡å™¨ï¼ˆFollowerï¼‰å‘èµ·Proposeï¼Œé€šçŸ¥æ‰€æœ‰æœåŠ¡å™¨ï¼šæˆ‘ä»¬è¦å®Œæˆä¸€ä¸ªå†™æ“ä½œè¯·æ±‚ï¼Œå¤§å®¶æ£€æŸ¥è‡ªå·±çš„æ•°æ®çŠ¶æ€ï¼Œæ˜¯å¦æœ‰é—®é¢˜ã€‚</p><p>å¦‚æœæ‰€æœ‰FolloweræœåŠ¡å™¨éƒ½å›å¤LeaderæœåŠ¡å™¨ACKï¼Œå³æ²¡æœ‰é—®é¢˜ï¼Œé‚£ä¹ˆLeaderæœåŠ¡å™¨ä¼šå‘æ‰€æœ‰Followerå‘é€Commitå‘½ä»¤ï¼Œè¦æ±‚æ‰€æœ‰æœåŠ¡å™¨å®Œæˆå†™æ“ä½œã€‚è¿™æ ·åŒ…æ‹¬LeaderæœåŠ¡å™¨åœ¨å†…çš„æ‰€æœ‰ZooKeeperé›†ç¾¤æœåŠ¡å™¨çš„æ•°æ®ï¼Œå°±éƒ½æ›´æ–°å¹¶ä¿æŒä¸€è‡´äº†ã€‚å¦‚æœæœ‰ä¸¤ä¸ªå®¢æˆ·ç«¯ç¨‹åºåŒæ—¶è¯·æ±‚ä¿®æ”¹åŒä¸€ä¸ªæ•°æ®ï¼Œå› ä¸ºå¿…é¡»è¦ç»è¿‡Leaderçš„å®¡æ ¸ï¼Œè€ŒLeaderåªæ¥å—å…¶ä¸­ä¸€ä¸ªè¯·æ±‚ï¼Œæ•°æ®ä¹Ÿä¼šä¿æŒä¸€è‡´ã€‚</p><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå®¢æˆ·ç«¯ç¨‹åºå¯ä»¥è¿æ¥ä»»æ„ä¸€ä¸ªFollowerï¼Œè¿›è¡Œæ•°æ®è¯»å†™æ“ä½œã€‚å¦‚æœæ˜¯å†™æ“ä½œï¼Œé‚£ä¹ˆè¿™ä¸ªè¯·æ±‚ä¼šè¢«è¿™ä¸ªFollowerå‘é€ç»™Leaderï¼Œè¿›è¡Œå¦‚ä¸Šæ‰€è¿°çš„å¤„ç†ï¼›å¦‚æœæ˜¯è¯»æ“ä½œï¼Œå› ä¸ºæ‰€æœ‰æœåŠ¡å™¨çš„æ•°æ®éƒ½æ˜¯ä¸€è‡´çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªFollowerç›´æ¥è¿”å›è‡ªå·±æœ¬åœ°çš„æ•°æ®ç»™å®¢æˆ·ç«¯å°±å¯ä»¥äº†ã€‚</p><p>ZooKeeperé€šè¿‡ä¸€ç§æ ‘çŠ¶ç»“æ„è®°å½•æ•°æ®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/0e/27/0e54cac5e7a7ed422d0750a0e2d3e127.png?wh=610x630\" alt=\"\"></p><p>åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡è·¯å¾„çš„æ–¹å¼è®¿é—®ZooKeeperä¸­çš„æ•°æ®ï¼Œæ¯”å¦‚/services/YaView/services/stupidnameè¿™æ ·çš„è·¯å¾„æ–¹å¼ä¿®æ”¹ã€è¯»å–æ•°æ®ã€‚ZooKeeperè¿˜æ”¯æŒç›‘å¬æ¨¡å¼ï¼Œå½“æ•°æ®å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œé€šçŸ¥åº”ç”¨ç¨‹åºã€‚</p><p>å› ä¸ºå¤§æ•°æ®ç³»ç»Ÿé€šå¸¸éƒ½æ˜¯ä¸»ä»æ¶æ„ï¼Œä¸»æœåŠ¡å™¨ç®¡ç†é›†ç¾¤çš„çŠ¶æ€å’Œå…ƒä¿¡æ¯ï¼ˆmeta-infoï¼‰ï¼Œä¸ºäº†ä¿è¯é›†ç¾¤çŠ¶æ€ä¸€è‡´é˜²æ­¢â€œè„‘è£‚â€ï¼Œæ‰€ä»¥è¿è¡ŒæœŸåªèƒ½æœ‰ä¸€ä¸ªä¸»æœåŠ¡å™¨å·¥ä½œï¼ˆactive masterï¼‰ï¼Œä½†æ˜¯ä¸ºäº†ä¿è¯é«˜å¯ç”¨ï¼Œå¿…é¡»æœ‰å¦ä¸€ä¸ªä¸»æœåŠ¡å™¨ä¿æŒçƒ­å¤‡ï¼ˆstandby masterï¼‰ã€‚é‚£ä¹ˆåº”ç”¨ç¨‹åºå’Œé›†ç¾¤å…¶ä»–æœåŠ¡å™¨å¦‚ä½•æ‰èƒ½çŸ¥é“å½“å‰å“ªä¸ªæœåŠ¡å™¨æ˜¯å®é™…å·¥ä½œçš„ä¸»æœåŠ¡å™¨å‘¢ï¼Ÿ</p><p>æ‰€ä»¥å¾ˆå¤šå¤§æ•°æ®ç³»ç»Ÿéƒ½ä¾èµ–ZooKeeperæä¾›çš„ä¸€è‡´æ€§æ•°æ®æœåŠ¡ï¼Œç”¨äºé€‰ä¸¾é›†ç¾¤å½“å‰å·¥ä½œçš„ä¸»æœåŠ¡å™¨ã€‚ä¸€å°ä¸»æœåŠ¡å™¨å¯åŠ¨åå‘ZooKeeperæ³¨å†Œè‡ªå·±ä¸ºå½“å‰å·¥ä½œçš„ä¸»æœåŠ¡å™¨ï¼Œè€Œå¦ä¸€å°æœåŠ¡å™¨å°±åªèƒ½æˆä¸ºçƒ­å¤‡ä¸»æœåŠ¡å™¨ï¼Œåº”ç”¨ç¨‹åºè¿è¡ŒæœŸéƒ½å’Œå½“å‰å·¥ä½œçš„ä¸»æœåŠ¡å™¨é€šä¿¡ã€‚</p><p>å¦‚æœå½“å‰å·¥ä½œçš„ä¸»æœåŠ¡å™¨å®•æœºï¼ˆåœ¨ZooKeeperä¸Šè®°å½•çš„å¿ƒè·³æ•°æ®ä¸å†æ›´æ–°ï¼‰ï¼Œçƒ­å¤‡ä¸»æœåŠ¡å™¨é€šè¿‡ZooKeeperçš„ç›‘æ§æœºåˆ¶å‘ç°å½“å‰å·¥ä½œçš„ä¸»æœåŠ¡å™¨å®•æœºï¼Œå°±å‘ZooKeeperæ³¨å†Œè‡ªå·±æˆä¸ºå½“å‰å·¥ä½œçš„ä¸»æœåŠ¡å™¨ã€‚åº”ç”¨ç¨‹åºå’Œé›†ç¾¤å…¶ä»–æœåŠ¡å™¨è·Ÿæ–°çš„ä¸»æœåŠ¡å™¨é€šä¿¡ï¼Œä¿è¯ç³»ç»Ÿæ­£å¸¸è¿è¡Œã€‚</p><p>åˆ©ç”¨ZooKeeperé€‰ä¸»æœåŠ¡å™¨çš„ä¼ªä»£ç å¦‚ä¸‹ï¼š</p><pre><code>//è¯»å–pathè·¯å¾„/servers/leaderçš„å€¼\n//ç¬¬äºŒä¸ªå‚æ•°trueï¼Œè¡¨ç¤ºç›‘å¬è¿™ä¸ªpathçš„å˜åŒ–ã€‚\n1 value = getdata(â€œ/servers/leaderâ€, true) \n\n//å¦‚æœæœ‰è¿”å›å€¼ï¼Œè¡¨ç¤ºä¸»æœåŠ¡å™¨å·²ç»äº§ç”Ÿ(å³pathä¸­è®°å½•çš„valueï¼Œä¸ºå½“å‰ä¸»æœåŠ¡å™¨çš„æœºå™¨å)\n//å½“å‰å‡½æ•°é€€å‡º\n2 if(value != null){exit}\n\n//æ‰§è¡Œåˆ°è¿™é‡Œï¼Œè¡¨ç¤ºè¿˜æ²¡æœ‰ä¸»æœåŠ¡å™¨ï¼Œå°†è‡ªå·±çš„ä¸»æœºåå†™å…¥/servers/leader\n//EPHEMERALè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªä¸´æ—¶è·¯å¾„ï¼Œå¦‚æœå½“å‰ç¨‹åºå´©æºƒï¼Œå³ä¸»æœåŠ¡å™¨å´©æºƒï¼ŒZooKeeperä¼šåˆ é™¤è¿™ä¸ªpath\n3 result = create(â€œ/servers/leaderâ€, hostname, EPHEMERAL) \n\n//å¦‚æœä¸Šä¸€æ­¥åˆ›å»ºpathæˆåŠŸï¼Œå½“å‰å‡½æ•°é€€å‡º\n4 if result = successful{exit}\n\n//æ‰§è¡Œåˆ°è¿™é‡Œï¼Œè¡¨ç¤ºæ—¢æ²¡æœ‰ä¸»æœåŠ¡å™¨ï¼Œè‡ªå·±ä¹Ÿæ²¡æœ‰æˆåŠŸæˆä¸ºä¸»æœåŠ¡å™¨ï¼Œä»å¤´å†æ¥\n5.goto step 1\n</code></pre><p>ä½¿ç”¨ZooKeeperæä¾›çš„APIæ¥å£ï¼Œä»£ç éå¸¸ç®€å•ã€‚æ‰€æœ‰è¦é€‰ä¸¾æˆä¸ºä¸»æœåŠ¡å™¨çš„æœåŠ¡å™¨åœ¨å¯åŠ¨çš„æ—¶å€™éƒ½åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šæ‰§è¡Œä¸Šé¢è¿™æ®µä¼ªä»£ç çš„é€»è¾‘ï¼Œå…¶ä¸­çš„getdataã€createä¼šè¿æ¥åˆ°ZooKeeperé›†ç¾¤å»å¤„ç†ã€‚ä½†æ˜¯æ ¹æ®ZABç®—æ³•ï¼Œåªæœ‰ä¸€ä¸ªæœåŠ¡å™¨èƒ½å°†è‡ªå·±çš„hostnameå†™å…¥åˆ°ZooKeeperçš„ä¸»æœåŠ¡å™¨è·¯å¾„/servers/leaderä¸­ï¼Œä¿è¯é›†ç¾¤åªæœ‰ä¸€ä¸ªä¸»æœåŠ¡å™¨ã€‚</p><p>è€ŒæˆåŠŸæˆä¸ºä¸»æœåŠ¡å™¨çš„æœåŠ¡å™¨åœ¨åˆ›å»º/servers/leaderè·¯å¾„çš„æ—¶å€™ï¼Œå·²æŒ‡å®šå½“å‰è·¯å¾„ä¸ºEPHEMERALï¼Œå³ä¸´æ—¶è·¯å¾„ã€‚å¦‚æœå½“å‰çš„ä¸»æœåŠ¡å™¨å®•æœºï¼Œé‚£ä¹ˆè¯¥æœåŠ¡å™¨å’ŒZooKeeperçš„é•¿è¿æ¥ä¹Ÿå°±ä¸­æ–­äº†ï¼ŒZooKeeperæ®æ­¤åˆ¤æ–­è¯¥æœåŠ¡å™¨å®•æœºï¼Œåˆ é™¤è¿™ä¸ªè·¯å¾„ã€‚å…¶ä»–ç›‘å¬è¿™ä¸ªè·¯å¾„çš„æœåŠ¡å™¨ï¼ˆå³åœ¨ä¼ªä»£ç 1ä¸­ï¼Œç¬¬äºŒä¸ªå‚æ•°è®¾ç½®ä¸ºtrueï¼‰å°±ä¼šæ”¶åˆ°é€šçŸ¥ï¼Œæ‰€æœ‰æœåŠ¡å™¨é‡æ–°æ‰§è¡Œä»¥ä¸Šçš„ä¼ªä»£ç ï¼Œé‡æ–°é€‰ä¸¾å‡ºæ–°çš„ã€å”¯ä¸€çš„ä¸»æœåŠ¡å™¨ã€‚</p><p>æ­¤å¤–ï¼Œè¯´åˆ°ZooKeeperçš„æ€§èƒ½ï¼Œå› ä¸ºZooKeeperç³»ç»Ÿçš„å¤šå°æœåŠ¡å™¨å­˜å‚¨ç›¸åŒæ•°æ®ï¼Œå¹¶ä¸”æ¯æ¬¡æ•°æ®æ›´æ–°éƒ½è¦æ‰€æœ‰æœåŠ¡å™¨æŠ•ç¥¨è¡¨å†³ï¼Œæ‰€ä»¥å’Œä¸€èˆ¬çš„åˆ†å¸ƒå¼ç³»ç»Ÿç›¸åï¼ŒZooKeeperé›†ç¾¤çš„å†™æ“ä½œæ€§èƒ½ä¼šéšç€æœåŠ¡å™¨æ•°é‡çš„å¢åŠ è€Œä¸‹é™ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f1/d1/f1767fc5ac7ee1af6d391690db5e58d1.png?wh=964x676\" alt=\"\"></p><p>ZooKeeperé€šè¿‡ZABç®—æ³•å®ç°æ•°æ®ä¸€è‡´æ€§ï¼Œå¹¶ä¸ºå„ç§å¤§æ•°æ®ç³»ç»Ÿæä¾›ä¸»æœåŠ¡å™¨é€‰ä¸¾æœåŠ¡ã€‚è™½ç„¶ZooKeeperå¹¶æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«å¼ºå¤§çš„åŠŸèƒ½ï¼Œä½†æ˜¯åœ¨å„ç±»åˆ†å¸ƒå¼ç³»ç»Ÿå’Œå¤§æ•°æ®ç³»ç»Ÿä¸­ï¼ŒZooKeeperçš„å‡ºé•œç‡éå¸¸é«˜ï¼Œå› æ­¤ä¹Ÿæ˜¯å¾ˆå¤šç³»ç»Ÿçš„åŸºç¡€è®¾æ–½ã€‚</p><h2>å°ç»“</h2><p>å¦‚æœæˆ‘ä»¬å•ç‹¬çœ‹å¤§æ•°æ®å’Œåˆ†å¸ƒå¼ç³»ç»Ÿçš„å¾ˆå¤šè§£å†³æ–¹æ¡ˆï¼Œå¦‚æœä¸æŠŠå®ƒä»¬æ”¾åœ¨å¤§è§„æ¨¡æ•°æ®å’Œå¤§è§„æ¨¡æœåŠ¡å™¨é›†ç¾¤çš„åœºæ™¯ä¸‹æ€è€ƒï¼Œå¯èƒ½ä¼šè§‰å¾—å¾ˆå¤šé—®é¢˜å’Œæ–¹æ¡ˆéƒ½å¾ˆè«åå…¶å¦™ã€‚æ¯”å¦‚è¦ä¿è¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æ•°æ®çš„ä¸€è‡´æ€§ï¼Œæ‰è¯ç”Ÿäº†Paxosã€ZABè¿™æ ·ä¸“é—¨çš„ç®—æ³•å’ŒZooKeeperè¿™æ ·çš„äº§å“ã€‚</p><p>Paxosç®—æ³•åªè€ƒè™‘æ‰€æœ‰æœåŠ¡å™¨éƒ½æ˜¯å¯ä¿¡ä»»çš„æƒ…å†µã€‚ä½†åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­è¿˜æœ‰ä¸€ç±»åœºæ™¯ï¼Œéœ€è¦è€ƒè™‘å½“é›†ç¾¤ä¸­çš„æœåŠ¡å™¨å­˜åœ¨æ¶æ„æœåŠ¡å™¨çš„æƒ…å†µã€‚å½“è¿™äº›æ¶æ„æœåŠ¡å™¨ä¼å›¾ç¯¡æ”¹ä¼ªé€ æ•°æ®ï¼Œæˆ–è€…ä¼ é€’è™šå‡ä¿¡æ¯çš„æ—¶å€™ï¼Œå¦‚ä½•ä¿è¯ç³»ç»Ÿç»§ç»­æœ‰æ•ˆè¿è¡Œå‘¢ï¼Ÿæ¯”å¦‚ç›®å‰éå¸¸ç«çš„åŒºå—é“¾ï¼Œå°±éœ€è¦è€ƒè™‘è¿™ç§åœºæ™¯ã€‚</p><p>åŒºå—é“¾é‡‡å–çš„è§£å†³æ–¹æ¡ˆæ˜¯å·¥ä½œé‡è¯æ˜ã€‚ä¸€å°æœåŠ¡å™¨è¦æƒ³åœ¨åˆ†å¸ƒå¼é›†ç¾¤ä¸­è®°å½•æ•°æ®ï¼ˆå³æ‰€è°“åˆ†å¸ƒå¼è®°è´¦ï¼‰ï¼Œå¿…é¡»è¿›è¡Œä¸€ä¸ªè§„æ¨¡åºå¤§çš„è®¡ç®—ï¼Œæ¯”å¦‚è®¡ç®—ä¸€ä¸ª256Bitçš„hashå€¼ï¼Œè¿™ä¸ªå€¼çš„å‰è‹¥å¹²ä½å¿…é¡»ä¸º0ã€‚æ¯”ç‰¹å¸åŒºå—é“¾å°±æ˜¯é‡‡ç”¨ç±»ä¼¼è¿™æ ·çš„å·¥ä½œé‡è¯æ˜ç®—æ³•ï¼Œä¸ºäº†è¿›è¡Œè¿™æ ·çš„hashè®¡ç®—ï¼Œç›®å‰æ¯”ç‰¹å¸åŒºå—é“¾æ¶ˆè€—çš„ç”µé‡ç›¸å½“äºä¸€ä¸ªä¸­ç­‰è§„æ¨¡å›½å®¶çš„ç”¨ç”µé‡ã€‚</p><p>é€šè¿‡è¿™ç§å·¥ä½œé‡è¯æ˜æ–¹å¼ï¼Œä¿è¯äº†æ¶æ„æœåŠ¡å™¨è¦æƒ³ä¼ªé€ ç¯¡æ”¹æ•°æ®ï¼Œå¿…é¡»æ‹¥æœ‰å¼ºå¤§çš„è®¡ç®—èƒ½åŠ›ï¼ˆå æ•´ä¸ªé›†ç¾¤æœåŠ¡å™¨è®¡ç®—èƒ½åŠ›çš„51%ä»¥ä¸Šï¼‰ï¼Œè€Œåªè¦æˆ‘ä»¬è®¤ä¸ºå¤§å¤šæ•°æœåŠ¡å™¨æ˜¯å–„æ„çš„ï¼Œé‚£ä¹ˆè¿™æ ·çš„åŒºå—é“¾åˆ†å¸ƒå¼é›†ç¾¤å°±æ˜¯å¯é çš„ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>é™¤äº†å·¥ä½œé‡è¯æ˜ï¼Œè¿˜æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥ä¿è¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¸å¯ä¿¡ä»»çš„æœºå™¨æ— æ³•ç¯¡æ”¹æˆ–ä¼ªé€ æ•°æ®ï¼Ÿ</p><p>æ¬¢è¿ä½ å†™ä¸‹è‡ªå·±çš„æ€è€ƒæˆ–ç–‘é—®ï¼Œä¸æˆ‘å’Œå…¶ä»–åŒå­¦ä¸€èµ·è®¨è®ºã€‚</p>","neighbors":{"left":{"article_title":"15 | æµå¼è®¡ç®—çš„ä»£è¡¨ï¼šStormã€Flinkã€Spark Streaming","id":70619},"right":{"article_title":"17 | æ¨¡å—ç­”ç–‘ï¼šè¿™ä¹ˆå¤šæŠ€æœ¯ï¼Œåˆ°åº•éƒ½èƒ½ç”¨åœ¨ä»€ä¹ˆåœºæ™¯é‡Œï¼Ÿ","id":71366}},"comments":[{"had_liked":false,"id":46231,"user_name":"é¢è¯•å®˜é—®","can_delete":false,"product_type":"c1","uid":1009375,"ip_address":"","ucode":"F9CE89589772F4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/66/df/501ba989.jpg","comment_is_top":true,"comment_ctime":1543887145,"is_pvip":true,"replies":[{"id":"16884","content":"CAPçš„På¦‚æœæŒ‰å­—é¢æ„æ€ç†è§£ï¼Œç½‘ç»œåˆ†åŒºå®¹é”™ï¼Œåº”è¯¥æ˜¯Açš„ä¸€ç§æƒ…å†µï¼Œè¿™æ ·å¯¹è®¾è®¡æ²¡æœ‰æŒ‡å¯¼æ„ä¹‰ï¼Œæ‰€ä»¥åœ¨9å¹´å‰ç¬¬ä¸€æ¬¡çœ‹åˆ°CAPåŸç†ï¼Œæˆ‘å°±æŒ‰åˆ†ç‰‡ç†è§£ï¼Œè¿™æ ·æ‰€æœ‰çš„åˆ†å¸ƒå¼ç³»ç»Ÿå°±å¯ä»¥è§£é‡Šäº†ï¼Œä¸å­˜åœ¨ä¸èƒ½æ¢è®¨çš„åˆ†å¸ƒå¼å¯¹è±¡ã€‚è¿™æ¬¡ä¸“æ å‘å¸ƒåï¼Œå¾ˆå¤šåŒå­¦å¯¹Pçš„ç†è§£æå‡ºè´¨ç–‘ï¼Œæˆ‘åˆæŸ¥äº†ä¸‹èµ„æ–™ï¼Œç¡®å®è¿™ç§ç†è§£æ¯”è¾ƒæ¿€è¿›ï¼Œå¯èƒ½ä¼šé€ æˆè¯¯å¯¼ï¼Œè¿™éƒ¨åˆ†å†…å®¹å·²ç»åˆ é™¤ï¼Œå¾ˆæŠ±æ­‰ã€‚<br><br>memcachedå’Œzkæ˜¯æœ€å…¸å‹çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œä¸€ä¸ªåˆ†å¸ƒå¼çš„å…³é”®åŸç†ä¸é€‚ç”¨äºæœ€å…¸å‹çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œè€å®è¯´ï¼Œå¾ˆéƒé—·ã€‚","user_name":"ä½œè€…å›å¤","comment_id":46231,"uid":"1007349","ip_address":"","utype":1,"ctime":1544108028,"user_name_real":"ææ™ºæ…§"}],"discussion_count":2,"race_medal":0,"score":"9.2233721715425997e+18","product_id":100020201,"comment_content":"CAP å®šç†å…³æ³¨çš„æ˜¯å¯¹æ•°æ®çš„è¯»å†™æ“ä½œï¼Œè€Œä¸æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ‰€æœ‰åŠŸèƒ½ï¼Œå®ƒè¦æ±‚åˆ†å¸ƒå¼ç³»ç»ŸèŠ‚ç‚¹é—´æ˜¯äº’ç›¸è¿æ¥ä¸”æœ‰æ•°æ®å…±äº«çš„ï¼Œä¾‹å¦‚ Memcache çš„é›†ç¾¤ä¸­èŠ‚ç‚¹ç›¸äº’é—´æ²¡æœ‰è¿æ¥å’Œæ•°æ®å…±äº«ï¼Œå› æ­¤ä¸æ˜¯ CAP å®šç†è®¨è®ºçš„å¯¹è±¡ï¼ŒåŒç† ZooKeeper çš„é€‰ä¸¾æœºåˆ¶ä¹Ÿä¸æ˜¯ CAP æ¢è®¨çš„å¯¹è±¡ã€‚<br><br>æ‘˜è‡ªä»é›¶å¼€å§‹å­¦æ¶æ„ï¼Œå¤§å®¶å¯ä»¥æ¢è®¨ä¸‹ã€‚","like_count":31,"discussions":[{"author":{"id":1052446,"avatar":"https://static001.geekbang.org/account/avatar/00/10/0f/1e/7877ce4d.jpg","nickname":"RussellSN","note":"","ucode":"E570B075D4AD21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":78740,"discussion_content":"è°ˆåŠåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œä»ç»“æ„ä¸Šè®¨è®ºï¼Œä»…æ¶‰åŠä¸¤ä¸ªæ ¸å¿ƒè¦ç´ ã€‚ä¸€ä¸ªæ˜¯æ—¶é’ŸåŒæ­¥ï¼Œä¸€ä¸ªæ˜¯å‰¯æœ¬ç®¡ç†ã€‚zké€‰ä¸¾çš„termæ¶‰åŠæ—¶é’Ÿå¯¹é½ï¼Œå¤šæ•°æ®å‰¯æœ¬æ¶‰åŠå‰¯æœ¬ç®¡ç†ï¼Œå±äºå…¸å‹åˆ†å¸ƒå¼åœºæ™¯ã€‚è‡³äºè¿æ¥ã€å…±äº«ä¸æ˜¯æ ¹æœ¬è¦ç´ ã€‚åˆ†å¸ƒå¼çš„æ ¹æœ¬è¦ç´ æ˜¯æ— é™å¤§å®¹é‡çš„ç³»ç»Ÿè¡¨ç°å¾—åƒä¸€å°ä¸»æœºï¼Œæ€ä¹ˆå®ç°å®ƒï¼Œä»ç†è®ºä¸Šæ¨å¯¼å°±æ˜¯ä¸Šé¢é‚£ä¸¤ä¸ªè¦ç´ ã€‚","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1575997593,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431389,"discussion_content":"CAPçš„På¦‚æœæŒ‰å­—é¢æ„æ€ç†è§£ï¼Œç½‘ç»œåˆ†åŒºå®¹é”™ï¼Œåº”è¯¥æ˜¯Açš„ä¸€ç§æƒ…å†µï¼Œè¿™æ ·å¯¹è®¾è®¡æ²¡æœ‰æŒ‡å¯¼æ„ä¹‰ï¼Œæ‰€ä»¥åœ¨9å¹´å‰ç¬¬ä¸€æ¬¡çœ‹åˆ°CAPåŸç†ï¼Œæˆ‘å°±æŒ‰åˆ†ç‰‡ç†è§£ï¼Œè¿™æ ·æ‰€æœ‰çš„åˆ†å¸ƒå¼ç³»ç»Ÿå°±å¯ä»¥è§£é‡Šäº†ï¼Œä¸å­˜åœ¨ä¸èƒ½æ¢è®¨çš„åˆ†å¸ƒå¼å¯¹è±¡ã€‚è¿™æ¬¡ä¸“æ å‘å¸ƒåï¼Œå¾ˆå¤šåŒå­¦å¯¹Pçš„ç†è§£æå‡ºè´¨ç–‘ï¼Œæˆ‘åˆæŸ¥äº†ä¸‹èµ„æ–™ï¼Œç¡®å®è¿™ç§ç†è§£æ¯”è¾ƒæ¿€è¿›ï¼Œå¯èƒ½ä¼šé€ æˆè¯¯å¯¼ï¼Œè¿™éƒ¨åˆ†å†…å®¹å·²ç»åˆ é™¤ï¼Œå¾ˆæŠ±æ­‰ã€‚\n\nmemcachedå’Œzkæ˜¯æœ€å…¸å‹çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œä¸€ä¸ªåˆ†å¸ƒå¼çš„å…³é”®åŸç†ä¸é€‚ç”¨äºæœ€å…¸å‹çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œè€å®è¯´ï¼Œå¾ˆéƒé—·ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1544108028,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46322,"user_name":"M","can_delete":false,"product_type":"c1","uid":1117633,"ip_address":"","ucode":"88F6F1433A01A3","user_header":"https://static001.geekbang.org/account/avatar/00/11/0d/c1/d36816df.jpg","comment_is_top":false,"comment_ctime":1543900048,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"74558344080","product_id":100020201,"comment_content":"På’Œæ•°æ®åˆ†ä¸åˆ†ç‰‡å¹¶æ²¡æœ‰ä»»ä½•å…³ç³»å§ã€‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­På°±æ˜¯æ»¡è¶³çš„ï¼Œå¦åˆ™å°±æ˜¯å•æœºäº†ã€‚æ‰€ä»¥ä¸€èˆ¬è€ƒè™‘çš„æ˜¯CPå’ŒAPï¼ŒCPæ˜¯æŒ‡åœ¨ç½‘ç»œåˆ†åŒºå½¢æˆ(åˆ†å¸ƒå¼èŠ‚ç‚¹ä¹‹é—´ä¸èƒ½äº’ç›¸é€šä¿¡)çš„æƒ…å†µä¸‹ï¼Œç‰ºç‰²å¯ç”¨æ€§ï¼Œæ»¡è¶³ä¸€è‡´æ€§ï¼Œåªæœ‰ç­‰åˆ°æ•°æ®åŒæ­¥å®Œæˆåæ‰èƒ½æ¢å¤å¯ç”¨ã€‚è€ŒAPæ˜¯æŒ‡åœ¨ç½‘ç»œåˆ†åŒºå½¢æˆçš„æƒ…å†µä¸‹ï¼Œå‘å¤–éƒ¨ç»§ç»­æä¾›ä½¿ç”¨ï¼Œä½†æ˜¯æ•°æ®å¯èƒ½ä¸ä¸€è‡´(å› ä¸ºèŠ‚ç‚¹ä¹‹é—´ä¸èƒ½é€šä¿¡ï¼Œæ‰€æœ‰èŠ‚ç‚¹çš„æ•°æ®å¯èƒ½ä¸ä¸€è‡´)","like_count":17},{"had_liked":false,"id":46162,"user_name":"shangyu","can_delete":false,"product_type":"c1","uid":1011389,"ip_address":"","ucode":"13A26E53508D75","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6e/bd/b83ad32d.jpg","comment_is_top":false,"comment_ctime":1543859275,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"57378434123","product_id":100020201,"comment_content":"è¯·é—®è€å¸ˆ å¯¹äºæ–‡ä¸­è¿™å¥è¯ä¸å¤ªç†è§£ï¼šâ€œä½†æ˜¯ ZooKeeper ç³»ç»Ÿä¸­æ‰€æœ‰æœåŠ¡å™¨éƒ½å­˜å‚¨ç›¸åŒçš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯æ•°æ®æ²¡æœ‰åˆ†ç‰‡å­˜å‚¨ï¼Œå› æ­¤ä¸æ»¡è¶³åˆ†åŒºè€å—æ€§â€ã€‚zkæ²¡æœ‰åˆ†ç‰‡ä½†æ˜¯éƒ½å­˜å‚¨äº†ç›¸åŒæ•°æ®ï¼Œä¹Ÿå°±æ˜¯æœ‰å†—ä½™å¤‡ä»½ï¼Œä¸€å®šæ˜¯è¦æ•°æ®æœ‰åˆ†ç‰‡æ‰æ»¡è¶³På—","like_count":13},{"had_liked":false,"id":52276,"user_name":"å¿ åš","can_delete":false,"product_type":"c1","uid":1105648,"ip_address":"","ucode":"86ED2B630187C9","user_header":"https://static001.geekbang.org/account/avatar/00/10/de/f0/ccf46294.jpg","comment_is_top":false,"comment_ctime":1545357080,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"40200062744","product_id":100020201,"comment_content":"ZooKeeper é›†ç¾¤çš„æ€§èƒ½ä¼šéšç€æœåŠ¡å™¨æ•°é‡çš„å¢åŠ è€Œä¸‹é™<br>è¿™ä¸ªæè¿°ä¸å‡†ç¡®ï¼ŒZKä¸­æœ‰ä¸‰ç§è§’è‰² leader  Follower observer ï¼Œè€Œobserverä¸å‚ä¸æŠ•ç¥¨ï¼Œå¢åŠ observeræ€§èƒ½ä¸Šä¸ä¼šæœ‰å¤ªå¤§æŸå¤±ï¼ˆåœ¨æŠ•ç¥¨é€šè¿‡åleaderç»“ç‚¹ä¼šé€šçŸ¥å…¶ä»–æ‰€æœ‰ç»“ç‚¹è¿›è¡Œæ•°æ®æ›´æ–°ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯é€šè¿‡å¹¿æ’­çš„å½¢å¼å®Œæˆï¼Œè€Œä¸”leaderå¹¶ä¸ç­‰å¾…æ›´æ–°çš„ç»“æœï¼‰","like_count":9},{"had_liked":false,"id":46210,"user_name":"cc_hust","can_delete":false,"product_type":"c1","uid":1035537,"ip_address":"","ucode":"13783705132B9B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cd/11/3de96927.jpg","comment_is_top":false,"comment_ctime":1543885117,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"27313688893","product_id":100020201,"comment_content":"ä¸ªäººç†è§£ï¼ŒCAP ä¸­çš„Pè·Ÿæ˜¯å¦åˆ†ç‰‡å­˜å‚¨æ²¡æœ‰å…³ç³»ã€‚åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼ŒPæ˜¯å¿…é€‰é¡¹ï¼Œéœ€è¦æƒè¡¡å¤šå‰¯æœ¬çš„ä¸€è‡´æ€§å’Œå¯ç”¨æ€§ï¼Œ å•æœºç³»ç»Ÿæ‰æ˜¯æ”¾å¼ƒäº†Pã€‚","like_count":6,"discussions":[{"author":{"id":1232768,"avatar":"https://static001.geekbang.org/account/avatar/00/12/cf/80/012a0b90.jpg","nickname":"ä»¥å»å°ç¬º","note":"","ucode":"A526E8F27DF5A1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572091,"discussion_content":"å•æœºä¸æ˜¯æ”¾å¼ƒäº†ï¼Œè€Œæ˜¯æ²¡æœ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652598634,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":102139,"user_name":"è€èŒƒ","can_delete":false,"product_type":"c1","uid":1055827,"ip_address":"","ucode":"F7D86D34A013D0","user_header":"","comment_is_top":false,"comment_ctime":1560150115,"is_pvip":false,"replies":[{"id":"36921","content":"è°¢è°¢è€èŒƒ","user_name":"ä½œè€…å›å¤","comment_id":102139,"uid":"1007349","ip_address":"","utype":1,"ctime":1560215681,"user_name_real":"ææ™ºæ…§"}],"discussion_count":1,"race_medal":0,"score":"23034986595","product_id":100020201,"comment_content":"ä½†æ˜¯ ZooKeeper ç³»ç»Ÿä¸­æ‰€æœ‰æœåŠ¡å™¨éƒ½å­˜å‚¨ç›¸åŒçš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯æ•°æ®æ²¡æœ‰åˆ†ç‰‡å­˜å‚¨ï¼Œå› æ­¤ä¸æ»¡è¶³åˆ†åŒºè€å—æ€§<br><br>å»ºè®®è€å¸ˆä¿®æ”¹ä¸‹ä¸Šå¤„ï¼šæˆ‘ä»¬ç”¨ sharding è¡¨ç¤ºåˆ†ç‰‡ï¼Œç”¨ partition è¡¨ç¤ºç½‘ç»œåˆ†åŒºï¼Œpartion tolerance å’Œ sharding äºŒè€…æ˜¯ä¸åŒæ¦‚å¿µï¼Œå¹¶æ²¡æœ‰å¦‚è€å¸ˆæ‚¨æ‰€è¿°çš„å…³ç³»ã€‚ åœ¨ CAP ç†è®ºä¸­ï¼Œå½“ç½‘ç»œåˆ†åŒºå‘ç”Ÿæ—¶ï¼ŒZK é€‰æ‹©äº† Consistenceï¼Œèˆå¼ƒäº† Availabilityã€‚","like_count":5,"discussions":[{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453279,"discussion_content":"è°¢è°¢è€èŒƒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560215681,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46296,"user_name":"çº¯æ´çš„æ†æ¶","can_delete":false,"product_type":"c1","uid":1130512,"ip_address":"","ucode":"5E9757DE6F45DF","user_header":"https://static001.geekbang.org/account/avatar/00/11/40/10/b6bf3c3c.jpg","comment_is_top":false,"comment_ctime":1543894809,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"23018731289","product_id":100020201,"comment_content":"â€œCAP å®šç†å…³æ³¨çš„æ˜¯å¯¹æ•°æ®çš„è¯»å†™æ“ä½œï¼Œè€Œä¸æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ‰€æœ‰åŠŸèƒ½ï¼Œå®ƒè¦æ±‚åˆ†å¸ƒå¼ç³»ç»ŸèŠ‚ç‚¹é—´æ˜¯äº’ç›¸è¿æ¥ä¸”æœ‰æ•°æ®å…±äº«çš„ï¼Œä¾‹å¦‚ Memcache çš„é›†ç¾¤ä¸­èŠ‚ç‚¹ç›¸äº’é—´æ²¡æœ‰è¿æ¥å’Œæ•°æ®å…±äº«ï¼Œå› æ­¤ä¸æ˜¯ CAP å®šç†è®¨è®ºçš„å¯¹è±¡ï¼ŒåŒç† ZooKeeper çš„é€‰ä¸¾æœºåˆ¶ä¹Ÿä¸æ˜¯ CAP æ¢è®¨çš„å¯¹è±¡ã€‚<br><br>æ‘˜è‡ªä»é›¶å¼€å§‹å­¦æ¶æ„ï¼Œå¤§å®¶å¯ä»¥æ¢è®¨ä¸‹ã€‚â€<br><br>æœ‰é“ç†ï¼æˆ‘ä¸ªäººçš„ç†è§£æ˜¯ZooKeeperæœ¬èº«ç¡®å®ä¸ç†ŸCAPæ¢è®¨çš„å¯¹è±¡ã€‚ä½†æ˜¯ZooKeeperçš„å¾ˆå¤šåº”ç”¨åœºæ™¯ï¼Œå¦‚åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ•°æ®ä¸€è‡´æ€§ï¼Œæ‰æ˜¯CAPæ¢è®¨å¯¹è±¡ã€‚è§£å†³é—®é¢˜çš„é’¥åŒ™ä¸æ˜¯é—®é¢˜æœ¬èº«ï¼Œæˆ‘ç†è§£çš„å¯¹ä¹ˆï¼Ÿ","like_count":5},{"had_liked":false,"id":46262,"user_name":"Jowin","can_delete":false,"product_type":"c1","uid":1114356,"ip_address":"","ucode":"19017F7D06C22A","user_header":"https://static001.geekbang.org/account/avatar/00/11/00/f4/cc5f0896.jpg","comment_is_top":false,"comment_ctime":1543890795,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"23018727275","product_id":100020201,"comment_content":"zookeeperæä¾›çš„æ•°æ®è¯»å†™æœåŠ¡æ˜¯cpæ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯å¼ºä¸€è‡´æ€§ã€‚è€å¸ˆè¿™é‡Œè¯´çš„æ˜¯zookeeperèŠ‚ç‚¹é—´çš„æ•°æ®åŒæ­¥æ¨¡å‹ï¼Œå¦‚æœéè¦å¥—ç”¨capçš„è¯ï¼Œåº”è¯¥ä¹Ÿæ˜¯cpæ¨¡å‹ï¼Œå®¹å¿å°‘äºåŠæ•°çš„èŠ‚ç‚¹æ•…éšœï¼Œä¸€æ—¦å¤šä½™åŠæ•°çš„èŠ‚ç‚¹æ•…éšœï¼Œå°±æ— æ³•è¾¾æˆä¸€è‡´ï¼Œç³»ç»Ÿå°±ä¸å¯ç”¨æ€§äº†ã€‚","like_count":5,"discussions":[{"author":{"id":1207529,"avatar":"https://static001.geekbang.org/account/avatar/00/12/6c/e9/377a3b09.jpg","nickname":"H.L.","note":"","ucode":"125D13548A0CA5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":10172,"discussion_content":"ä¸æ˜¯å¼ºä¸€è‡´æ€§ï¼Œæ— è®ºzkï¼Œconsulï¼Œetcdï¼Œéƒ½æ˜¯æœ€ç»ˆä¸€è‡´æ€§ã€‚æˆ‘æ²¡è§è¿‡å“ªä¸ªå¼€æºèƒ½åšåˆ°å¼ºä¸€è‡´æ€§","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1568269847,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46224,"user_name":"Kaer","can_delete":false,"product_type":"c1","uid":1113558,"ip_address":"","ucode":"1BD233D3FAC2B1","user_header":"https://static001.geekbang.org/account/avatar/00/10/fd/d6/71e1cc29.jpg","comment_is_top":false,"comment_ctime":1543886380,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"23018722860","product_id":100020201,"comment_content":"Pè·Ÿæ˜¯æŒ‡ç½‘ç»œå‡ºç°åˆ†åŒºï¼Œä¸æ˜¯æ•°æ®åˆ†åŒºã€‚æ•°æ®çš„åˆ†åŒºæ˜¯ï¼šshareding","like_count":5,"discussions":[{"author":{"id":1031868,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/be/bc/62d402da.jpg","nickname":"Goku","note":"","ucode":"8008F3BB10E609","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":13811,"discussion_content":"CAPé‡Œçš„Pç¡®å®æ˜¯ç½‘ç»œåˆ†åŒºï¼Œä¸è¿‡æ•°æ®åˆ†ç‰‡ä¹Ÿå¯ä»¥ç§°ä½œpartitionã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1568704478,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1003824,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/51/30/da6ae0d8.jpg","nickname":"cellardoor","note":"","ucode":"ECB20F7DFC5A65","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385329,"discussion_content":"Replica æ›´åˆé€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627005049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46236,"user_name":"é˜¿å·-è±†å¤«","can_delete":false,"product_type":"c1","uid":1005123,"ip_address":"","ucode":"732188848B0A85","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/43/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1543887628,"is_pvip":false,"replies":[{"id":"16569","content":"å¼ºä¸€è‡´ï¼Œå›å¤clientçš„æ—¶å€™ï¼ŒzkæœåŠ¡å™¨å°±å·²ç»ä¸€è‡´äº†","user_name":"ä½œè€…å›å¤","comment_id":46236,"uid":"1007349","ip_address":"","utype":1,"ctime":1543899378,"user_name_real":"ææ™ºæ…§"}],"discussion_count":2,"race_medal":0,"score":"18723756812","product_id":100020201,"comment_content":"zkæ˜¯æœ€ç»ˆä¸€è‡´æ€§å§ï¼Œè¿™ä¸ªæ²¡è¯´æ¸…æ¥šå•Šã€‚","like_count":5,"discussions":[{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431392,"discussion_content":"å¼ºä¸€è‡´ï¼Œå›å¤clientçš„æ—¶å€™ï¼ŒzkæœåŠ¡å™¨å°±å·²ç»ä¸€è‡´äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543899378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1253652,"avatar":"https://static001.geekbang.org/account/avatar/00/13/21/14/423a821f.jpg","nickname":"Steven","note":"","ucode":"3FE64459842015","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567160,"discussion_content":"ZK å†™æ˜¯å¼ºä¸€è‡´ï¼Œè¯»æ˜¯æœ€ç»ˆä¸€è‡´æ€§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650849227,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46261,"user_name":"dancer","can_delete":false,"product_type":"c1","uid":1019036,"ip_address":"","ucode":"B8D5641A3AC490","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/9c/d48473ab.jpg","comment_is_top":false,"comment_ctime":1543890687,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14428792575","product_id":100020201,"comment_content":"è€å¸ˆï¼ŒPçš„é‡Šä¹‰æ„Ÿè§‰ä¸æ˜¯å¾ˆå‡†ç¡®ï¼ŒæŸ¥äº†ä¸€ä¸‹ç»´åŸºç™¾ç§‘çš„å®šä¹‰ï¼Œ<br>Partition tolerance: The system continues to operate despite an arbitrary number of messages being dropped (or delayed) by the network between nodes","like_count":3},{"had_liked":false,"id":46191,"user_name":"galen","can_delete":false,"product_type":"c1","uid":1119804,"ip_address":"","ucode":"93056616C4450C","user_header":"https://static001.geekbang.org/account/avatar/00/11/16/3c/eee3e6f5.jpg","comment_is_top":false,"comment_ctime":1543882795,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14428784683","product_id":100020201,"comment_content":"å¦‚ä½•ä¿è¯ä»ZookeepèŠ‚ç‚¹ä¸­è¯»å–çš„æ•°æ®ï¼Œæ˜¯æœ€æ–°çš„æ•°æ®ï¼Ÿ<br>ZookeepèŠ‚ç‚¹å¯èƒ½è¿˜åœ¨åŒæ­¥æ•°æ®ï¼Œå½“å‰èŠ‚ç‚¹çš„æ•°æ®ä¸æ˜¯æœ€æ–°çš„æ•°æ®","like_count":3},{"had_liked":false,"id":278947,"user_name":"å·¥ç§‘ç”Ÿå°çŒ´å­","can_delete":false,"product_type":"c1","uid":1592148,"ip_address":"","ucode":"CE52F63EE72301","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLhpCNoXf1fPfkU8icso2kvjAVtmDibric0VBt9FdtfopM90Y8DlBYnM4UUmh9x7M79LpcIkWXnEeib7A/132","comment_is_top":false,"comment_ctime":1613478646,"is_pvip":false,"replies":[{"id":"101431","content":"é€‰ä¸»è¦æ±‚ä¸€è‡´æ€§ï¼Œä¸ç„¶é€‰å‡ºä¸¤ä¸ªä¸»å°±ä¹±å¥—äº†ï¼Œä¸å†²çªå•Šã€‚<br><br>ZKæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„é›†ç¾¤ï¼Œä¹Ÿè¢«å¤§æ•°æ®é›†ç¾¤ç”¨æ¥åšé€‰ä¸»ï¼Œæ˜¯å¤§æ•°æ®é›†ç¾¤çš„ç»„æˆéƒ¨åˆ†ï¼Œä¸å†²çªå•Šã€‚","user_name":"ä½œè€…å›å¤","comment_id":278947,"uid":"1007349","ip_address":"","utype":1,"ctime":1613634785,"user_name_real":"ææ™ºæ…§"}],"discussion_count":2,"race_medal":0,"score":"10203413238","product_id":100020201,"comment_content":"çœ‹å®Œè¿™ç¯‡æ–‡ç« ï¼Œæˆ‘å¯¹zookeeperæ›´åŠ ç–‘æƒ‘äº†ã€‚åˆè¯´zookeeperç”¨æ¥ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Œä¸€ä¼šåˆæ˜¯é€‰ä¸¾ä¸»æœåŠ¡å™¨ï¼Œè¶Šçœ‹è¶Šè¿·æƒ‘ã€‚è¿˜æœ‰ï¼Œzookeeperé›†ç¾¤ï¼Œåˆ°åº•æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„é›†ç¾¤ï¼Œè¿˜æ˜¯å¤§æ•°æ®ä¸šåŠ¡é›†ç¾¤çš„ä¸€ä¸ªæœ‰æœºç»„æˆéƒ¨åˆ†ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515572,"discussion_content":"é€‰ä¸»è¦æ±‚ä¸€è‡´æ€§ï¼Œä¸ç„¶é€‰å‡ºä¸¤ä¸ªä¸»å°±ä¹±å¥—äº†ï¼Œä¸å†²çªå•Šã€‚\n\nZKæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„é›†ç¾¤ï¼Œä¹Ÿè¢«å¤§æ•°æ®é›†ç¾¤ç”¨æ¥åšé€‰ä¸»ï¼Œæ˜¯å¤§æ•°æ®é›†ç¾¤çš„ç»„æˆéƒ¨åˆ†ï¼Œä¸å†²çªå•Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613634785,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1253652,"avatar":"https://static001.geekbang.org/account/avatar/00/13/21/14/423a821f.jpg","nickname":"Steven","note":"","ucode":"3FE64459842015","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567159,"discussion_content":"ZAB æœ‰ä¸¤ç§æ¨¡å¼ï¼Œä¸€ç§æ˜¯ç”¨äºé€‰ä¸»ï¼Œä¸€ç§ç”¨äºæ•°æ®åŒæ­¥ã€‚\n\né‡‡zookeeperé›†ç¾¤ï¼Œæ˜¯å› ä¸ºè¦ä¿è¯é«˜å¯ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650849202,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":152772,"user_name":"Zend","can_delete":false,"product_type":"c1","uid":1053921,"ip_address":"","ucode":"80EBB0B6772E27","user_header":"https://static001.geekbang.org/account/avatar/00/10/14/e1/ee5705a2.jpg","comment_is_top":false,"comment_ctime":1574077877,"is_pvip":false,"replies":[{"id":"58692","content":"å¦‚æœè¿zookeeperé›†ç¾¤æœ¬èº«çš„æœºå™¨å°±ä¸å¯ä¿¡ä»»ï¼Œé»‘åå•ä¹Ÿæ˜¯ä¸å¯ä¿¡ä»»çš„ã€‚<br><br>å¯ä»¥å‚è€ƒåŒºå—é“¾çš„å®ç°æœºåˆ¶ã€‚æˆ‘åœ¨ã€Šåç«¯æŠ€æœ¯ã€‹ä¸“æ ä¼šè®²åŒºå—é“¾æŠ€æœ¯æ¶æ„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":152772,"uid":"1007349","ip_address":"","utype":1,"ctime":1574085989,"user_name_real":"ææ™ºæ…§"}],"discussion_count":2,"race_medal":0,"score":"10164012469","product_id":100020201,"comment_content":"æ˜¯å¦å¯ä»¥åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¸ä¿¡ä»»çš„æœºå™¨åŠ å…¥é»‘åå•ï¼Œæ”¾åœ¨ZooKeeperä¸Šã€‚","like_count":2,"discussions":[{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474935,"discussion_content":"å¦‚æœè¿zookeeperé›†ç¾¤æœ¬èº«çš„æœºå™¨å°±ä¸å¯ä¿¡ä»»ï¼Œé»‘åå•ä¹Ÿæ˜¯ä¸å¯ä¿¡ä»»çš„ã€‚\n\nå¯ä»¥å‚è€ƒåŒºå—é“¾çš„å®ç°æœºåˆ¶ã€‚æˆ‘åœ¨ã€Šåç«¯æŠ€æœ¯ã€‹ä¸“æ ä¼šè®²åŒºå—é“¾æŠ€æœ¯æ¶æ„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574085989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1053921,"avatar":"https://static001.geekbang.org/account/avatar/00/10/14/e1/ee5705a2.jpg","nickname":"Zend","note":"","ucode":"80EBB0B6772E27","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":52829,"discussion_content":"å¥½çš„ è°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574087126,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":137219,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1569658418,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"10159593010","product_id":100020201,"comment_content":"ä¼°è®¡æ˜¯åˆ é™¤äº†éƒ¨åˆ†å†…å®¹ï¼Œçœ‹è¯„è®ºå¥½å¤šéƒ½åœ¨èŠCAPï¼Œçœ‹æ­£æ–‡æ²¡è§CAPä»€ä¹ˆäº‹ï¼Œä¸è¿‡ä¹‹å‰å­¦ä¹ è¿‡ZKæ˜¯å±äºCPçš„ã€‚<br>å¦å¤–ï¼Œæ„Ÿè§‰è€å¸ˆè¿™ä¸ªè®²çš„æµ…ï¼Œéšä¾¿ä¸€ä¸ªzkçš„è®²è§£éƒ½æ¯”è¿™å¤šï¼Œæˆ‘è‡ªå·±ç™¾åº¦è¿‡åˆ†å¸ƒå¼ä¸€è‡´æ€§åè®®ï¼Œæ„Ÿè§‰2PC&#47;3PCè¿˜èƒ½ç†è§£ï¼Œå¯¹äºZABçš„ç®€å•è¯´æ˜ä¹Ÿèƒ½ç†è§£ï¼Œä¸è¿‡paxosç¡®å®ç†è§£ä¸äº†ï¼Œå¾ˆæœŸå¾…æœ‰äººèƒ½é€šä¿—æ˜“æ‡‚çš„å°†æ‰€æœ‰åˆ†å¸ƒå¼ä¸€è‡´æ€§åè®®éƒ½å¯¹æ¯”è®²è§£æ¸…æ¥šä¸€ä¸‹ï¼","like_count":2,"discussions":[{"author":{"id":1046584,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f8/38/8af56e18.jpg","nickname":"çŸ¥è¯†æ²¡å­¦åˆ°","note":"","ucode":"5D819DFFC7AB08","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":362941,"discussion_content":"ä¸Šé¢æ¨èçš„é‚£ä¸ªä¸“æ å¾ˆå¥½ï¼Œè¿˜å¦å¤–æ¨èä¸€ä¸ªâ€œå‘¨å¿—æ˜çš„è½¯ä»¶æ¶æ„è¯¾â€é‡Œé¢ç¬¬31/32è®²é‡Œä¹Ÿæœ‰ç›¸å…³å†…å®¹ï¼Œè®²çš„ä¹Ÿç‰¹åˆ«å¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617077129,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1014665,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7b/89/34f2cbcc.jpg","nickname":"æ¨å®‡","note":"","ucode":"EB74DF6E269F03","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":174512,"discussion_content":"æœ€è¿‘å‡ºçš„è¯¾ç¨‹ã€Šåˆ†å¸ƒå¼åè®®ä¸ç®—æ³•å®æˆ˜ã€‹åº”è¯¥å¯ä»¥æ»¡è¶³è¦æ±‚ã€‚åŒå­¦è¿™ä¹ˆæ´»è·ƒï¼Œæƒ³å¿…ä¹Ÿä¹°äº†å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581924068,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52479,"user_name":"aof","can_delete":false,"product_type":"c1","uid":1062864,"ip_address":"","ucode":"5815D63C4926BC","user_header":"https://static001.geekbang.org/account/avatar/00/10/37/d0/26975fba.jpg","comment_is_top":false,"comment_ctime":1545390572,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10135325164","product_id":100020201,"comment_content":"è€å¸ˆèƒ½ä¸“é—¨è®²ä¸€ä¸‹zookeeperçš„leaderé€‰ä¸¾æœºåˆ¶å—","like_count":2},{"had_liked":false,"id":200198,"user_name":"Leo","can_delete":false,"product_type":"c1","uid":1066546,"ip_address":"","ucode":"1075986F8D116D","user_header":"https://static001.geekbang.org/account/avatar/00/10/46/32/2bb481d2.jpg","comment_is_top":false,"comment_ctime":1585556449,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5880523745","product_id":100020201,"comment_content":"å°±ä¸ºäº†çœ‹zookeeperæ€æ ·ä¿è¯åˆ†å¸ƒå¼å­˜å‚¨çš„ä¸€è‡´æ€§æ¥çš„ğŸ˜„","like_count":1},{"had_liked":false,"id":129956,"user_name":"å¤§é­”ç‹æ±ªæ±ª","can_delete":false,"product_type":"c1","uid":1010680,"ip_address":"","ucode":"4B205CB52FC95F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6b/f8/b4da7936.jpg","comment_is_top":false,"comment_ctime":1567340007,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5862307303","product_id":100020201,"comment_content":"zké›†ç¾¤å¯ç”¨æ€§æ€ä¹ˆä¿è¯å‘¢ï¼Ÿè¿™ä¸åˆå›åˆ°åŸå§‹çš„é—®é¢˜äº†ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1014665,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7b/89/34f2cbcc.jpg","nickname":"æ¨å®‡","note":"","ucode":"EB74DF6E269F03","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":174520,"discussion_content":"ZKé›†ç¾¤åŒ…æ‹¬è‡³å°‘3å°çš„æœåŠ¡å™¨ï¼Œå†…éƒ¨é€‰ä¸¾åæœ‰ä¸€ä¸ªLeaderã€å¤šä¸ªFollowerï¼Œå¦‚æœLeaderæŒ‚äº†ä¼šè§¦å‘æ•…éšœæ¢å¤æµç¨‹ï¼Œé‡æ–°é€‰ä¸¾ï¼Œæ”¹æœæ¢ä»£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581924507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47284,"user_name":"é˜¿é‡Œå·´å·´éªŠéª…","can_delete":false,"product_type":"c1","uid":1042492,"ip_address":"","ucode":"FDA3C20D9E622A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e8/3c/e8c80390.jpg","comment_is_top":false,"comment_ctime":1544100109,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5839067405","product_id":100020201,"comment_content":"è¯·é—®è€å¸ˆ å¯¹äºæ–‡ä¸­è¿™å¥è¯ä¸å¤ªç†è§£ï¼šâ€œä½†æ˜¯ ZooKeeper ç³»ç»Ÿä¸­æ‰€æœ‰æœåŠ¡å™¨éƒ½å­˜å‚¨ç›¸åŒçš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯æ•°æ®æ²¡æœ‰åˆ†ç‰‡å­˜å‚¨ï¼Œå› æ­¤ä¸æ»¡è¶³åˆ†åŒºè€å—æ€§â€ã€‚zkæ²¡æœ‰åˆ†ç‰‡ä½†æ˜¯éƒ½å­˜å‚¨äº†ç›¸åŒæ•°æ®ï¼Œä¹Ÿå°±æ˜¯æœ‰å†—ä½™å¤‡ä»½ï¼Œä¸€å®šæ˜¯è¦æ•°æ®æœ‰åˆ†ç‰‡æ‰æ»¡è¶³På—","like_count":1},{"had_liked":false,"id":47016,"user_name":"æ¬§å˜‰æƒFelix","can_delete":false,"product_type":"c1","uid":1109587,"ip_address":"","ucode":"5257A38D4D3884","user_header":"https://static001.geekbang.org/account/avatar/00/10/ee/53/b8fe4560.jpg","comment_is_top":false,"comment_ctime":1544019148,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5838986444","product_id":100020201,"comment_content":"ä¸æ˜¯å¾ˆç†è§£è€å¸ˆè¯´çš„ä¸ç¬¦åˆpçš„åŸå›  zkæ˜¯cpç³»ç»Ÿå§","like_count":1},{"had_liked":false,"id":46426,"user_name":"Any Hello mino","can_delete":false,"product_type":"c1","uid":1004683,"ip_address":"","ucode":"01EF8ECC801F6D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/54/8b/27ae435c.jpg","comment_is_top":false,"comment_ctime":1543923021,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5838890317","product_id":100020201,"comment_content":"Zookeeperæ˜¯cpå§ï¼Ÿé€‰ä¸¾çš„æ—¶å€™ä¸æ˜¯éƒ½æ˜¯ä¸å¯ç”¨çš„","like_count":1},{"had_liked":false,"id":46243,"user_name":"é˜¿å·-è±†å¤«","can_delete":false,"product_type":"c1","uid":1005123,"ip_address":"","ucode":"732188848B0A85","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/43/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1543888368,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5838855664","product_id":100020201,"comment_content":"paxos æ€ä¹ˆå®ç°å¼ºä¸€è‡´æ€§ï¼Œæœ‰ç‚¹æ™•äº†ï¼Ÿ","like_count":1},{"had_liked":false,"id":46215,"user_name":"hunterlodge","can_delete":false,"product_type":"c1","uid":1069755,"ip_address":"","ucode":"5B83A79E784161","user_header":"https://static001.geekbang.org/account/avatar/00/10/52/bb/225e70a6.jpg","comment_is_top":false,"comment_ctime":1543885366,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5838852662","product_id":100020201,"comment_content":"pæ˜¯æŒ‡åˆ†åŒºè€å—æ€§ï¼Œè€Œä¸æ˜¯åˆ†åŒºæœ¬èº«ï¼Œzkæ²¡æœ‰åˆ†ç‰‡å­˜å‚¨ï¼Œä¹Ÿå°±ä¸å­˜åœ¨è€å—æ€§çš„é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘çš„ç†è§£æ˜¯ï¼Œæœ¬è´¨ä¸Šzkä¸æ˜¯ä¸¥æ ¼çš„åˆ†å¸ƒå¼ç³»ç»Ÿ","like_count":1},{"had_liked":false,"id":46200,"user_name":"sgl","can_delete":false,"product_type":"c1","uid":1252243,"ip_address":"","ucode":"D73875BA22954F","user_header":"https://static001.geekbang.org/account/avatar/00/13/1b/93/e3b44969.jpg","comment_is_top":false,"comment_ctime":1543883769,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5838851065","product_id":100020201,"comment_content":"åŒºå—é“¾ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æŠ€æœ¯ï¼Œè¢«æ¯”ç‰¹å¸è€½è¯¯äº†","like_count":1,"discussions":[{"author":{"id":1127799,"avatar":"https://static001.geekbang.org/account/avatar/00/11/35/77/95e95b32.jpg","nickname":"æœ¨æ‰","note":"","ucode":"85651CBDDF7EDC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":321922,"discussion_content":"æ¯”ç‰¹å¸ä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„ä¾‹å­ï¼Œè¢«å›½å†…çš„å¸ç§è€½è¯¯äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604651042,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46194,"user_name":"jon","can_delete":false,"product_type":"c1","uid":1253287,"ip_address":"","ucode":"5768A34E292CAA","user_header":"https://static001.geekbang.org/account/avatar/00/13/1f/a7/d379ca4f.jpg","comment_is_top":false,"comment_ctime":1543883004,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5838850300","product_id":100020201,"comment_content":"zookeeperè§£å†³äº†åˆ†å¸ƒå¼å¼ç¯å¢ƒä¸­çš„æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œæ”¾å¼ƒæ•°æ®åˆ†ç‰‡å­˜å‚¨ï¼Œé‡‡ç”¨çš„æ˜¯ï¼ŒæŠ•ç¥¨é€‰ä¸¾çš„ç®—æ³•è·å¾—è¿‡åŠç¥¨æ•°çš„èŠ‚ç‚¹è·å¾—è¯»å†™æƒ","like_count":1},{"had_liked":false,"id":46186,"user_name":"mgxian","can_delete":false,"product_type":"c1","uid":1014806,"ip_address":"","ucode":"7B7E77E6A83B87","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/16/4d1e5cc1.jpg","comment_is_top":false,"comment_ctime":1543882267,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5838849563","product_id":100020201,"comment_content":"æˆ‘ä¹Ÿæ„Ÿè§‰è€å¸ˆè¯´çš„capæœ‰ç‚¹é—®é¢˜ æŒ‰ç†æ¥è¯´ zk æ˜¯cp ç³»ç»Ÿ åªè¦æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿ p å°±æ˜¯å¤©ç„¶å­˜åœ¨çš„ å¹¶ä¸æ˜¯è¯´ æ²¡æœ‰æ•°æ®åˆ†ç‰‡ å°±æ²¡æœ‰ p","like_count":1},{"had_liked":false,"id":353476,"user_name":"Asran","can_delete":false,"product_type":"c1","uid":1342581,"ip_address":"å¹¿ä¸œ","ucode":"DFABF37F8A71EA","user_header":"","comment_is_top":false,"comment_ctime":1659491668,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1659491668","product_id":100020201,"comment_content":"åˆ†åŒºå®¹é”™æ€§è¡¨ç¤ºï¼Œä¸€ä¸ªç³»ç»Ÿè™½ç„¶æ˜¯åˆ†å¸ƒå¼çš„ï¼Œä½†æ˜¯å¯¹å¤–çœ‹ä¸Šå»åº”è¯¥æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œä¸èƒ½ç”±äºåˆ†å¸ƒå¼ç³»ç»Ÿå†…éƒ¨çš„æŸä¸ªèŠ‚ç‚¹æŒ‚æ‰ï¼Œæˆ–ç½‘ç»œå‡ºç°æ•…éšœï¼Œè€Œå¯¼è‡´ç³»ç»Ÿå¯¹å¤–è¡¨ç°å¼‚å¸¸ã€‚æ‰€ä»¥ï¼Œå¯¹äºåˆ†å¸ƒå¼ç³»ç»Ÿè€Œè¨€æ˜¯ä¸€å®šè¦ä¿è¯åˆ†åŒºï¼ˆåˆ†å¸ƒï¼‰å®¹é”™æ€§çš„ã€‚","like_count":0},{"had_liked":false,"id":341112,"user_name":"Jay","can_delete":false,"product_type":"c1","uid":1592078,"ip_address":"","ucode":"42669FDE25765B","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIM0sj0oP7bZwm2dWHq1n1XIsJLwGr122Qb1S2EytzAp62YZKJsiaNHTQayolevlBJGiaq7eBRHCGrg/132","comment_is_top":false,"comment_ctime":1649376279,"is_pvip":false,"replies":[{"id":"124790","content":"åŸæ–‡ï¼š1 ZooKeeper ä¸»è¦æä¾›æ•°æ®çš„ä¸€è‡´æ€§ æœåŠ¡ï¼Œå…¶å®ç°åˆ†å¸ƒå¼ç³»ç»Ÿçš„çŠ¶æ€ä¸€è‡´æ€§ä¾èµ–ä¸€ä¸ªå« Paxos çš„ç®—æ³•ã€‚2 Paxos ç®—æ³•æœ‰ç‚¹è¿‡äºå¤æ‚ã€å®ç°éš¾åº¦ä¹Ÿæ¯”è¾ƒé«˜ï¼Œæ‰€ä»¥ ZooKeeper åœ¨ç¼–ç¨‹å®ç°çš„æ—¶å€™å°†å…¶ç®€åŒ–æˆäº†ä¸€ç§å«åš ZAB çš„ç®—æ³•","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1007349","ctime":1649643872,"ip_address":"","comment_id":341112,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1649376279","product_id":100020201,"comment_content":"ä½†æ˜¯è¿™ä¸ªåšå‡ºåˆ¤æ–­å†³ç­–çš„æœåŠ¡å™¨ä¹Ÿæœ‰å¯èƒ½ä¼šå‡ºç°æ•…éšœä¸å¯è®¿é—®ï¼ŒåŒæ ·æ•´ä¸ªæœåŠ¡å™¨é›†ç¾¤ä¹Ÿä¸èƒ½æ­£å¸¸è¿è¡Œã€‚æ‰€ä»¥è¿™ä¸ªåšå‡ºåˆ¤æ–­å†³ç­–çš„æœåŠ¡å™¨å¿…é¡»ç”±å¤šå°æœåŠ¡å™¨ç»„æˆï¼Œæ¥ä¿è¯é«˜å¯ç”¨ï¼Œä»»æ„ä¸€å°æœåŠ¡å™¨å®•æœºéƒ½ä¸ä¼šå½±å“ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚é‚£ä¹ˆé—®é¢˜åˆæ¥äº†ï¼Œè¿™å‡ å°åšå‡ºåˆ¤æ–­å†³ç­–çš„æœåŠ¡å™¨åˆå¦‚ä½•é˜²æ­¢â€œè„‘è£‚â€ï¼Œè‡ªå·±ä¸ä¼šå‡ºç°æ··ä¹±çŠ¶æ€å‘¢ï¼Ÿæœ‰æ—¶å€™çœŸçš„å¾ˆæ— å¥ˆï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡å°±åƒæ˜¯ä¸€ä¸ªè¿½ç€è‡ªå·±å°¾å·´å’¬çš„å–µå–µï¼Œå…œå…œè½¬è½¬å›åˆ°å¼€å¤´ã€‚<br><br>-------------------------è€å¸ˆåœ¨æ–‡ç« ä¸­å·²ç»æåˆ°è¿™ä¸ªé—®é¢˜ï¼Œå¯çœ‹å®Œæ–‡ç« ï¼Œæˆ‘è¿˜æ˜¯æ²¡æœ‰ç†è§£zookeeperé›†ç¾¤æœ¬èº«çš„ä¸€è‡´æ€§æ˜¯å¦‚ä½•ä¿è¯ã€‚   ç°åœ¨åªçœ‹åˆ°zookeeperèƒ½å¤Ÿä¿è¯æ³¨å†Œåˆ°å®ƒä¸Šé¢æœåŠ¡çš„ä¸€è‡´æ€§","like_count":0,"discussions":[{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561469,"discussion_content":"åŸæ–‡ï¼š1 ZooKeeper ä¸»è¦æä¾›æ•°æ®çš„ä¸€è‡´æ€§ æœåŠ¡ï¼Œå…¶å®ç°åˆ†å¸ƒå¼ç³»ç»Ÿçš„çŠ¶æ€ä¸€è‡´æ€§ä¾èµ–ä¸€ä¸ªå« Paxos çš„ç®—æ³•ã€‚2 Paxos ç®—æ³•æœ‰ç‚¹è¿‡äºå¤æ‚ã€å®ç°éš¾åº¦ä¹Ÿæ¯”è¾ƒé«˜ï¼Œæ‰€ä»¥ ZooKeeper åœ¨ç¼–ç¨‹å®ç°çš„æ—¶å€™å°†å…¶ç®€åŒ–æˆäº†ä¸€ç§å«åš ZAB çš„ç®—æ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649643872,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":330515,"user_name":"piboye","can_delete":false,"product_type":"c1","uid":1066752,"ip_address":"","ucode":"7CFD8712857A85","user_header":"https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg","comment_is_top":false,"comment_ctime":1642006187,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1642006187","product_id":100020201,"comment_content":"paxos ä¸¥æ ¼ä¸€è‡´ï¼Œä½†æ˜¯å¤æ‚ã€‚zabï¼Œraftéƒ½æ˜¯é€‰ä¸»ä¹‹åå¤åˆ¶ï¼Œæœ‰ä¸»å°±æœ‰ä»»æœŸçš„æ¦‚å¿µï¼Œä»»æœŸæ¶‰åŠæ—¶é—´ï¼Œæ—¶é—´ä¸èƒ½æ•°å­¦ä¸Šä¿éšœï¼Œæ—¶é—´çš„è¯¯å·®åœ¨å·¥ç¨‹ä¸Šè®¤ä¸ºå¯æ¥å—ã€‚xabå’Œrafté€‰ä¸¾çš„æ—¶å€™æ˜¯ç‰ºç‰²äº†å¯ç”¨æ€§çš„ï¼Œæ—¶é—´åœ¨ç§’çº§åˆ«ã€‚paxosæ— ä¸»ï¼Œæ•…éšœå¯ä»¥æå¿«çš„é€Ÿåº¦æ¢å¤ã€‚raftè¿™ç±»åœ¨æ— æ•…éšœçš„æ—¶å€™å¯ä»¥æ¯”paxoså¿«","like_count":0},{"had_liked":false,"id":325783,"user_name":"èæ€æ¯”äºš","can_delete":false,"product_type":"c1","uid":2066849,"ip_address":"","ucode":"71A9C184E9832C","user_header":"https://static001.geekbang.org/account/avatar/00/1f/89/a1/2e2d6d0b.jpg","comment_is_top":false,"comment_ctime":1639129230,"is_pvip":false,"replies":[{"id":"118298","content":"è¿™å—ç¡®å®ï¼Œéœ€è¦è®¢æ­£ä¸€ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1007349","ctime":1639391675,"ip_address":"","comment_id":325783,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1639129230","product_id":100020201,"comment_content":"è¿™é—¨è¯¾æœ‰ç‚¹æ£ç³¨ç³Šçš„æ„æ€ï¼Œè¯¯å¯¼â€¦â€¦ Zeekeeperæ˜¯Zookeeper Atomic Broadcaståè®®","like_count":0,"discussions":[{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538273,"discussion_content":"è¿™å—ç¡®å®ï¼Œéœ€è¦è®¢æ­£ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639391676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":281844,"user_name":"ä½ ä¸ºå•¥é‚£ä¹ˆç‰›","can_delete":false,"product_type":"c1","uid":1503506,"ip_address":"","ucode":"1ABC604A54A8F6","user_header":"https://static001.geekbang.org/account/avatar/00/16/f1/12/7dac30d6.jpg","comment_is_top":false,"comment_ctime":1614922402,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1614922402","product_id":100020201,"comment_content":"ä¹‹å‰é˜…è¯»è¿‡æ— æ•°å…³äºcapçš„æ–‡ç« ï¼Œæ™¦æ¶©éš¾æ‡‚ï¼Œä¸€çŸ¥åŠè§£ã€‚çœ‹è¯„è®ºï¼Œå¤§å®¶å¯¹pçš„å„æœ‰ç†è§£ã€‚ä¸€ä¸ªæ˜¯å…³æ³¨æ•°æ®è¯»å†™ï¼Œä¸€ä¸ªæ˜¯ç½‘ç»œåˆ†åŒºã€‚ä¸è¿‡ï¼Œä»è¿™ç¯‡æ–‡ç« å¼€å§‹ï¼Œæˆ‘æ‰ç®—å¯¹capçš„æ¦‚å¿µæœ‰äº†ä¸€ä¸ªæ¸…æ™°ã€‚<br><br>ä»capå®šç†çœ‹ï¼Œå…³æ³¨æ•°æ®ï¼Œè€Œä¸æ˜¯å…¨éƒ¨åŠŸèƒ½ã€‚é‚£å°±æ˜¯è¯´ï¼Œåœ¨ä¸šåŠ¡é‡éå¸¸å¤§çš„æƒ…å†µä¸‹ï¼Œè¦ä¿è¯æ•°æ®æ›´æ–°çš„ä¸šåŠ¡ï¼Œæ•°æ®è¯»ä¸šåŠ¡å¯ä»¥æŒ‰éœ€å¤„ç†ï¼Œæ¯”å¦‚é™æµã€é™çº§ã€ç†”æ–­ã€ç¼“å­˜ï¼Œè¿™äº›æ“ä½œä¼šå¯¼è‡´å¯ç”¨æ€§æˆ–è€…ä¸€è‡´æ€§é—®é¢˜ï¼Œä½†æœ€ç»ˆæ˜¯è¦ä¿è¯æ•°æ®çš„æ­£å¸¸å¤„ç†ï¼Œä¹Ÿæ˜¯pæ‰€å…³æ³¨çš„ã€‚å½“ç„¶æ‰€é€ æˆä¸šåŠ¡åŠŸèƒ½ä½“éªŒï¼Œåªèƒ½æ’æ¬¡ä½æ¥ã€‚<br><br>è€Œå¯¹äºæŸäº›ç³»ç»Ÿæ¥è¯´ï¼Œåªä¼šæ»¡è¶³cpæˆ–è€…apã€‚cpåœ¨æ‰€æœ‰æ•°æ®çŠ¶æ€è¾¾æˆä¸€è‡´åï¼Œæ‰ä¼šåé¦ˆå“åº”ç»™clientã€‚apåªéœ€è¦åœ¨ä¸€ä¸ªæˆ–å‡ ä¸ªæ•°æ®çŠ¶æ€æ›´æ–°åï¼Œå³å¯ç”¨ï¼Œä¸å¿…ç­‰åˆ°æ‰€æœ‰æ•°æ®ä¸€è‡´ã€‚<br><br>ç…§æ­¤æ¨ç†ï¼Œå…¶å®éƒ½å±äºcapèŒƒç•´ï¼Œåªä¸è¿‡æ˜¯èˆå¼ƒaè¿˜æ˜¯èˆå¼ƒcçš„é—®é¢˜ã€‚<br><br>ä¸çŸ¥é“æˆ‘æ€ä¹ˆç†è§£æœ‰æ²¡æœ‰é—®é¢˜ï¼Ÿ","like_count":0},{"had_liked":false,"id":279956,"user_name":"Goku","can_delete":false,"product_type":"c1","uid":1031868,"ip_address":"","ucode":"8008F3BB10E609","user_header":"https://static001.geekbang.org/account/avatar/00/0f/be/bc/62d402da.jpg","comment_is_top":false,"comment_ctime":1614026020,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1614026020","product_id":100020201,"comment_content":"distributed consensus, å«åˆ†å¸ƒå¼å…±è¯†æ›´æ°å½“ã€‚","like_count":0},{"had_liked":false,"id":251745,"user_name":"kimoti","can_delete":false,"product_type":"c1","uid":1897671,"ip_address":"","ucode":"0A78077408C2B1","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f4/c7/037235c9.jpg","comment_is_top":false,"comment_ctime":1601820963,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1601820963","product_id":100020201,"comment_content":"è¿™ä¸ªé—®é¢˜å¯ä»¥ç”¨å¦ä¸€ç§é—®æ³•æ›¿ä»£,æ€ä¹ˆåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­åˆ¤å®šè¿™å°æœåŠ¡å™¨æ˜¯æ¶æ„çš„å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":247977,"user_name":"æ³Šæµ®ç›®","can_delete":false,"product_type":"c1","uid":1067981,"ip_address":"","ucode":"182A7CC2F6BDAB","user_header":"https://static001.geekbang.org/account/avatar/00/10/4b/cd/185e5378.jpg","comment_is_top":false,"comment_ctime":1599963731,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599963731","product_id":100020201,"comment_content":"ZKå®ç°çš„æ˜¯æœ€ç»ˆä¸€è‡´æ€§ã€‚å› ä¸ºZABåè®®ï¼Œåœ¨äº‹åŠ¡è¯·æ±‚å‘èµ·æ—¶ï¼Œåªè¦é›†ç¾¤ä¸­ä¸€åŠçš„æœåŠ¡å™¨åŒæ­¥å®Œæˆå³å¯ã€‚å¦‚æœclientçš„è¯»è¯·æ±‚å‘åˆ°é›†ç¾¤ä¸­æœªåŒæ­¥çš„æœºå™¨ä¸Šï¼Œé‚£ä¹ˆå°±ä¼šè¯»åˆ°æ—§æ•°æ®ã€‚","like_count":0},{"had_liked":false,"id":233212,"user_name":"ä¸å©·","can_delete":false,"product_type":"c1","uid":1913692,"ip_address":"","ucode":"CCD22F62097405","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/0hSQWvd1HbzrsA5xh9tm9oUthTG9BiagIghmMnuF8YFfarKovb4E9jOCw69icLNaeJNClH1ia6f3conGibIicPRkxBg/132","comment_is_top":false,"comment_ctime":1594261485,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594261485","product_id":100020201,"comment_content":"å¯ä»¥ä¸å¯ä»¥ç”¨å¯†é’¥å¯¹çš„æ–¹å¼æ¥é˜²æ­¢æ¶æ„ä¿®æ”¹æ•°æ®å‘¢ï¼Ÿåœ¨zkå’Œå„æœåŠ¡å™¨èŠ‚ç‚¹ä¹‹é—´ä¿å­˜ä¸€å¯¹å¯†é’¥ï¼Œç”±zkå¯¹å‘è¿‡æ¥çš„å¯†é’¥è¿›è¡ŒåŒ¹é…ç®—æ³•ï¼Œå°±åƒä»¤ç‰Œä¸€æ ·ï¼Œåªæœ‰é€šè¿‡ç®—æ³•åå°±è®¤ä¸ºæ˜¯å¯é€šè¡Œçš„ã€‚","like_count":0},{"had_liked":false,"id":195104,"user_name":"Geek_beace6","can_delete":false,"product_type":"c1","uid":1822658,"ip_address":"","ucode":"80457C4651ABFB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK3VJ6MdTNNHpExyaK0dB06erBW14eez8soPEgict1WQdBS8gAFxB2OhaYUOcLtZUHoZ59vyHCrOFg/132","comment_is_top":false,"comment_ctime":1585136938,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585136938","product_id":100020201,"comment_content":"æˆ‘çš„æ•°æ®æ€ä¹ˆå‚¨å­˜åˆ°å¤§æ•°æ®å¹³å°é‡Œé¢,å…·ä½“è½åœ°æ€ä¹ˆå®ç°å‘¢?æœ‰æ²¡æœ‰èµ„æ–™æˆ–è€…æ–‡æ¡£å¯ä»¥æ¨è","like_count":0},{"had_liked":false,"id":159988,"user_name":"é˜¿å¡ç‰›","can_delete":false,"product_type":"c1","uid":1022247,"ip_address":"","ucode":"0BC43A904C3199","user_header":"https://static001.geekbang.org/account/avatar/00/0f/99/27/47aa9dea.jpg","comment_is_top":false,"comment_ctime":1575854708,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575854708","product_id":100020201,"comment_content":"ä¸ºäº†é«˜å¯ç”¨ã€é«˜å¹¶å‘ã€é«˜å¯é ï¼Œå¼•å…¥äº†é›†ç¾¤ï¼›ä½†é›†ç¾¤ä¸­è°æ˜¯å¤´çš„åˆ¤æ–­å¾ˆé‡è¦ï¼Œ<br>ä¸‡ä¸€å¤§å®¶çš„åˆ¤æ–­ä¸åŒï¼Œå°±ä¼šå‡ºç°è„‘è£‚ã€‚æ‰€ä»¥å¼•å…¥äº†è£åˆ¤ï¼Œä¸€ä¸ªä¼šæœ‰å•ç‚¹æ•…éšœï¼Œæ‰€ä»¥æœ€å¥½å¼•å…¥å¤šä¸ªï¼Œä½†åˆä¼šè°æ˜¯ä¸»è£çš„é—®é¢˜ã€‚è¿™æ˜¯ä¸€ä¸ªé€’å½’é—®é¢˜.....","like_count":0},{"had_liked":false,"id":79772,"user_name":"è½è½å½©è™¹","can_delete":false,"product_type":"c1","uid":1264832,"ip_address":"","ucode":"F4CE1908DF149A","user_header":"https://static001.geekbang.org/account/avatar/00/13/4c/c0/73d52c05.jpg","comment_is_top":false,"comment_ctime":1553555997,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553555997","product_id":100020201,"comment_content":"å¯¹äºæ€è€ƒé¢˜å…¶å®æˆ‘ä¸çŸ¥é“ç­”æ¡ˆ......","like_count":0},{"had_liked":false,"id":69020,"user_name":"å°è°¢åŒå­¦","can_delete":false,"product_type":"c1","uid":1032544,"ip_address":"","ucode":"E809E6BC470631","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c1/60/fc3689d0.jpg","comment_is_top":false,"comment_ctime":1550647363,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1550647363","product_id":100020201,"comment_content":"æˆ‘è§‰å¾—CAPç†è®ºçš„å…³é”®åœ¨äºè¦ææ¸…æ¥šå¯¹äºAæ‰€è¦†ç›–èŒƒå›´çš„ç†è§£ï¼Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­Açš„å®šä¹‰æ˜¯å…¨å±€æ€§çš„ï¼Œæ‰€ä»¥Pçš„æƒ…å†µåªéœ€è¦ç†è§£æˆç³»ç»Ÿä¸­ä¸€éƒ¨åˆ†å¤±æ•ˆäº†ï¼ˆè‡³äºæ˜¯ç½‘ç»œè¿˜æ˜¯ä»€ä¹ˆåŸå› ä¸éœ€è¦è€ƒè™‘ï¼‰ï¼Œåœ¨è¿™æ ·å‡ºç°Pçš„å‰æä¸‹ï¼Œå¦‚æœæƒ³ä¿æŒCé‚£ä¹ˆè¿™ä¸ªç³»ç»Ÿå°±ä¸æ˜¯å…¨å±€å¯ç”¨çš„æˆ–è€…è¯´å¹²è„†å°±åˆ«ç”¨äº†","like_count":0},{"had_liked":false,"id":61478,"user_name":"å°è€é¼ ","can_delete":false,"product_type":"c1","uid":1257460,"ip_address":"","ucode":"C663A0C863A515","user_header":"https://static001.geekbang.org/account/avatar/00/13/2f/f4/2dede51a.jpg","comment_is_top":false,"comment_ctime":1547705956,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1547705956","product_id":100020201,"comment_content":"ä»€ä¹ˆå«ä½œå·¥ä½œé‡è¯æ˜","like_count":0},{"had_liked":false,"id":61477,"user_name":"å°è€é¼ ","can_delete":false,"product_type":"c1","uid":1257460,"ip_address":"","ucode":"C663A0C863A515","user_header":"https://static001.geekbang.org/account/avatar/00/13/2f/f4/2dede51a.jpg","comment_is_top":false,"comment_ctime":1547705818,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1547705818","product_id":100020201,"comment_content":"ZooKeeperæœåŠ¡å™¨åœ¨ä¸€ä¸ªä¸€èˆ¬ç³»ç»Ÿä¸­æœ‰å‡ ä¸ªï¼Œå¦‚ä½•ä¿è¯ZooKeeperè‡ªå·±çš„æ•°æ®ä¸€è‡´æ€§ï¼Ÿ","like_count":0},{"had_liked":false,"id":60542,"user_name":"è€Œç«‹æ–‹","can_delete":false,"product_type":"c1","uid":1087258,"ip_address":"","ucode":"5FED6E9E148195","user_header":"https://static001.geekbang.org/account/avatar/00/10/97/1a/389eab84.jpg","comment_is_top":false,"comment_ctime":1547510085,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1547510085","product_id":100020201,"comment_content":"æˆ‘å€’æ˜¯è§‰å¾—DPosï¼Œæ¯”è¾ƒå®ç”¨ï¼Œç¬¦åˆä¸­å›½å›½æƒ…ã€‚POW POSï¼Œå¤ªè¿‡äºç†æƒ³åŒ–","like_count":0},{"had_liked":false,"id":56579,"user_name":"èƒ¡å¢è§","can_delete":false,"product_type":"c1","uid":1178004,"ip_address":"","ucode":"BC3C846E47A1BC","user_header":"https://static001.geekbang.org/account/avatar/00/11/f9/94/8d16be76.jpg","comment_is_top":false,"comment_ctime":1546498102,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546498102","product_id":100020201,"comment_content":"æè€å¸ˆä½ å¥½ï¼Œè¯·æ•™ä¸ªé—®é¢˜ï¼Œzookeeperä¸Šé¢å­˜å‚¨äº†hadoopå¾ˆå¤šç»„ä»¶çš„ä¿¡æ¯ï¼Œç›¸å½“äºä¸€ä¸ªå…¬å…±çš„é…ç½®äº†ï¼Œåˆ«äººåªè¦èƒ½è®¿é—®zookeeperå°±å¯ä»¥è·å–åˆ°æ‰€æœ‰ä¿¡æ¯äº†ï¼Œé‚£ä¹ˆzookeeper æ˜¯æ€ä¹ˆä¿è¯å®‰å…¨çš„å‘¢","like_count":0},{"had_liked":false,"id":52355,"user_name":"stone","can_delete":false,"product_type":"c1","uid":1174491,"ip_address":"","ucode":"336DDEC95DF202","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/YlhEhLOxBkVdWfggdGeZmibw3PRXQicuicVsN2nwdrfZhsTLye2MR0nYvmYGO9TjTjEiceIEjIkxZ9bTXdtzNDLa3Q/132","comment_is_top":false,"comment_ctime":1545366574,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545366574","product_id":100020201,"comment_content":"æ„Ÿè§‰è¿™ç¯‡æ–‡ç« æœ‰ç‚¹èµ°è¿‡åœºï¼Œä¼°è®¡å®šä½æ˜¯ä» 0 å¼€å§‹çš„åŸå› å§...","like_count":0},{"had_liked":false,"id":47788,"user_name":"æš´é£é›ª","can_delete":false,"product_type":"c1","uid":1283139,"ip_address":"","ucode":"BF1523D69866FF","user_header":"https://static001.geekbang.org/account/avatar/00/13/94/43/46a7d0a8.jpg","comment_is_top":false,"comment_ctime":1544197181,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544197181","product_id":100020201,"comment_content":"æ„Ÿè§‰è€å¸ˆå¯¹ZABç®—æ³•ä¸€ç¬”å¸¦è¿‡å°±ç®—äº†ï¼Œè¿‡ç¨‹ä¹Ÿæ²¡æ€ä¹ˆè¯´è¿‡ï¼Œæˆ‘ä»¬å¾ˆéš¾è·Ÿå¾—ä¸Šè€å¸ˆçš„æ€ç»´å•Š","like_count":0},{"had_liked":false,"id":46957,"user_name":"å®¶äººå¹³å®‰","can_delete":false,"product_type":"c1","uid":1056803,"ip_address":"","ucode":"42A62B6119EAB4","user_header":"https://static001.geekbang.org/account/avatar/00/10/20/23/37a17d78.jpg","comment_is_top":false,"comment_ctime":1544009120,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544009120","product_id":100020201,"comment_content":"æœ‰ä¸ªé—®é¢˜æ¯”è¾ƒå›°æƒ‘ï¼Œæ­å»ºä¸€ä¸ªhdfs+spark+zookeeperé›†ç¾¤ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½è¦å®‰è£…zookepeerå—ï¼Œæœ‰äº†ä»€ä¹ˆæ¶æ„å¯ä»¥å‚è€ƒå—","like_count":0},{"had_liked":false,"id":46438,"user_name":"æ°ä¹‹7","can_delete":false,"product_type":"c1","uid":1297232,"ip_address":"","ucode":"F7DA2E21085332","user_header":"https://static001.geekbang.org/account/avatar/00/13/cb/50/66d0bd7f.jpg","comment_is_top":false,"comment_ctime":1543926168,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543926168","product_id":100020201,"comment_content":"ä»Šå¤©è¿™è®²å­¦ä¹ äº†åœ¨å¤§æ•°æ®ç³»ç»Ÿä¸­æ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜ã€‚åœ¨è¿‡å»çš„å­¦ä¹ é‡Œå·²ç»ç†Ÿæ‚‰ï¼Œåœ¨åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»ŸHDFSå’Œéå…³ç³»æ•°æ®åº“Hbaseéœ€è¦è®©æ•°æ®ä¿æŒä¸€è‡´ã€‚ä½†å¯èƒ½å­˜åœ¨çš„é—®é¢˜æ˜¯ä¸»æœåŠ¡å™¨å’Œé‡æœåŠ¡å™¨éƒ½æ¥å—ä¿¡æ¯å»æå–ä¸åŒçš„æ•°æ®ï¼Œè¿™æ ·åº”ç”¨ç¨‹åºå¾—åˆ°çš„æ•°æ®å°±æ˜¯ä¸ä¸€è‡´çš„ã€‚ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œæœ‰äº†åˆ†å¸ƒå¼ä¸­çš„CAPåŸåˆ™ï¼Œåœ¨Zookeeperä¹‹å‰çš„è§£å†³æ–¹å¼æ˜¯æ»¡è¶³APï¼Œè€Œæ”¾å¼ƒä¸€è‡´æ€§ï¼Œç”±ç¨‹åºæ£€æŸ¥ä¸€è‡´æ€§çš„é—®é¢˜ï¼Œä¹Ÿç§°ä¸ºæœ€ç»ˆä¸€è‡´æ€§ã€‚ä½†Zookeeperå‡ºç°ä¹‹åï¼Œä¸å®¹è®¸è¿™ç§æƒ…å†µå‘ç”Ÿï¼Œé€šè¿‡Paxosç®—æ³•ï¼Œä¿è¯äº†CAï¼Œåœ¨Zookeeperçš„æ¶æ„ä¸­é€šè´§ä¸€ç§æ ‘çŠ¶ç»“æ„è®°å½•æ•°æ®ï¼Œè¿™æ ·è§£å†³çš„æ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜ã€‚å›åˆ°è€å¸ˆçš„é—®é¢˜ï¼Œå¦‚ä½•ä¿è¯ä¸å¯ä¿¡ä»»çš„æœºå™¨æ— æ³•ç¯¡æ”¹æ•°æ®ï¼Œåœ¨åŒºå—é“¾æŠ€æœ¯ä¸­ï¼Œé€šè¿‡å·¥ä½œé‡çš„æ—¶é—´é•¿çŸ­å†³å®šï¼Œæˆ‘çš„æ€è€ƒæ˜¯å¦‚æœè¿™å°æœºå™¨å’Œå…¶ä»–æœºå™¨è¯»å–æ•°æ®é•¿æ—¶é—´æ˜¯ä¸åŒçš„ï¼Œæ˜¯ä¸æ˜¯å°±æ˜¯ä¸å¯ä¿¡ä»»çš„æœºå™¨ï¼Œè¿™æ ·ï¼Œä¸»æœåŠ¡å™¨æ¥å—ä¿¡æ¯ä¹‹åï¼Œå¯ä»¥ä¸ç»™è¿™äº›æœºå™¨åˆ†é…è·å–æ•°æ®çš„æƒé™ã€‚","like_count":0},{"had_liked":false,"id":46249,"user_name":"æäºŒæœ¨","can_delete":false,"product_type":"c1","uid":1103091,"ip_address":"","ucode":"30E03BB84ADB27","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/f3/129d6dfe.jpg","comment_is_top":false,"comment_ctime":1543888781,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1543888781","product_id":100020201,"comment_content":"è€å¸ˆå¯å¦å¢åŠ ä¸€äº›å®æ“æ¡ˆåˆ—è®²è§£å‘¢ï¼Ÿå¯¹äºå‰é¢çš„å‡ ä¸ªå¤§æ•°æ®å¤„ç†æ¡†æ¶éƒ½æ˜¯æ¦‚å¿µåŸç†ä»‹ç»ã€‚","like_count":0}]}