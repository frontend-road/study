{"id":10584,"title":"56 | 路由过滤器实验(Lab02)","content":"无","comments":[{"had_liked":false,"id":129774,"user_name":"Bootis","can_delete":false,"product_type":"c3","uid":1388421,"ip_address":"","ucode":"834251DC0FE2E7","user_header":"https://static001.geekbang.org/account/avatar/00/15/2f/85/9d1230c9.jpg","comment_is_top":false,"comment_ctime":1567246675,"is_pvip":false,"replies":[{"id":48634,"content":"你仔细看下static初始化块的代码，zuul用的是archaius做动态配置的，它支持配置更新回调方法，在回调方法里头，有重新初始化httpClient。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1567427452,"ip_address":"","comment_id":129774,"utype":1}],"discussion_count":1,"race_medal":1,"score":2,"product_id":100007001,"comment_content":"这节ExecuteRoute.groovy代码讲解中，老师说将一些参数动态配置化，但是我只看到 static{} 中初始化了这些httpClient，那么如果在配置中心中修改这些配置后，是不是只需要重新加载一下这个过滤器就可以了呢？我是这么理解的，先deactivate，然后切为canary，然后activate","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465640,"discussion_content":"你仔细看下static初始化块的代码，zuul用的是archaius做动态配置的，它支持配置更新回调方法，在回调方法里头，有重新初始化httpClient。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567427452,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78633,"user_name":"绫夜","can_delete":false,"product_type":"c3","uid":1228814,"ip_address":"","ucode":"F694100A9FA73E","user_header":"https://static001.geekbang.org/account/avatar/00/12/c0/0e/8dbaf501.jpg","comment_is_top":false,"comment_ctime":1553186633,"is_pvip":false,"replies":[{"id":29009,"content":"尽量控制接口调用时长，慢接口是性能杀手，严重可造成雪崩效应，建议要求慢接口限期整改。如果业务上有特殊需求，建议为特殊慢接口部署单独网关集群，以免一个臭鸡蛋坏一篮筐的问题。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1553518654,"ip_address":"","comment_id":78633,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"波波老师, 我后台部分接口响应速度要很长时间. 这时候我hystrix超时设置设长了感觉不合适, 一般是怎么处理呢,?","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444172,"discussion_content":"尽量控制接口调用时长，慢接口是性能杀手，严重可造成雪崩效应，建议要求慢接口限期整改。如果业务上有特殊需求，建议为特殊慢接口部署单独网关集群，以免一个臭鸡蛋坏一篮筐的问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553518654,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45659,"user_name":"冷脚","can_delete":false,"product_type":"c3","uid":1101601,"ip_address":"","ucode":"C693E75F417D3C","user_header":"https://static001.geekbang.org/account/avatar/00/10/cf/21/87888b61.jpg","comment_is_top":false,"comment_ctime":1543739550,"is_pvip":false,"replies":[{"id":16604,"content":"课程代码仅供学习参考，如要生产使用你要严格测试和定制","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1543928918,"ip_address":"","comment_id":45659,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"老师,请问一下ExecuteRoute.groovy这几个filter能不能用于生产环境中呢？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431141,"discussion_content":"课程代码仅供学习参考，如要生产使用你要严格测试和定制","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543928918,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":33769,"user_name":"y534560449","can_delete":false,"product_type":"c3","uid":1141496,"ip_address":"","ucode":"538F5845CCD89B","user_header":"https://static001.geekbang.org/account/avatar/00/11/6a/f8/c8dc558b.jpg","comment_is_top":false,"comment_ctime":1539877446,"is_pvip":false,"replies":[{"id":12665,"content":"header不是流，可以重复取，body是流，一般不阻断取流，真要取也可以，可阻断拷贝到内存(其它filter可访问)，但有一定性能开销，要根据流量权衡。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1540733343,"ip_address":"","comment_id":33769,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"波波老师，我想问一下DebugRequest.groovy filter中有获取请求参数的部分，这里面我有一个疑问，inputstream中的流不是只可以被读取一次吗，那么在DebugRequest.groovy filter中获取了流数据，那么其他的filter或者其他的地方是怎么再次获取流内容的?是在哪个地方重新放置了？？？请老师解答一下，谢谢","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":427045,"discussion_content":"header不是流，可以重复取，body是流，一般不阻断取流，真要取也可以，可阻断拷贝到内存(其它filter可访问)，但有一定性能开销，要根据流量权衡。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1540733343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341502,"user_name":"茅坑里的贼洞","can_delete":false,"product_type":"c3","uid":1189996,"ip_address":"","ucode":"C40F78ABC2104E","user_header":"https://static001.geekbang.org/account/avatar/00/12/28/6c/4a562dbe.jpg","comment_is_top":false,"comment_ctime":1649665117,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"波波老师，麻烦问一下，groovy脚本用什么ide写，JAVA源代码能直接转成groovy脚本吗？","like_count":0}]}