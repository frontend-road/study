{"id":690327,"title":"04ï½œä»JITåˆ°AOTï¼šJVMç¼–è¯‘å™¨çš„äº‘åŸç”Ÿæ¼”è¿›ä¹‹è·¯","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯åº·æ¨ã€‚ä»Šå¤©æˆ‘ä»¬æ¥èŠä¸€èŠJVMçš„ç¼–è¯‘å™¨ã€‚</p><p>JVMçš„ä¸€ä¸ªé‡è¦èŒè´£å°±æ˜¯æŠŠå­—èŠ‚ç æ‹¿åˆ°å®é™…è¿è¡Œçš„ç‰©ç†æœºä¸Šå»æ‰§è¡Œï¼Œå…¶ä¸­é‡è¦çš„ä¸€ç¯ï¼Œå°±æ˜¯æ ¹æ®ä¸åŒçš„åº•å±‚æ“ä½œç³»ç»Ÿå’ŒCPUæ¶æ„ï¼ŒæŠŠå­—èŠ‚ç è½¬åŒ–ä¸ºå®é™…ç‰©ç†æœºèƒ½å¤Ÿè¯†åˆ«çš„æœºå™¨ç ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/yy/b2/yy3970yy80b5749a167747b6905216b2.png?wh=1920x607\" alt=\"å›¾ç‰‡\"></p><h2>å­—èŠ‚ç è½¬åŒ–ä¸ºæœºå™¨ç çš„å‘å±•å†ç¨‹</h2><p>åœ¨JVMçš„æ¼”è¿›å†ç¨‹ä¸­ï¼Œå­—èŠ‚ç åˆ°æœºå™¨ç çš„è½¬åŒ–ç¯èŠ‚å…±ç»å†äº†ä¸‰ä¸ªå‘å±•é˜¶æ®µï¼Œåˆ†åˆ«æ˜¯è§£é‡Šæ‰§è¡Œé˜¶æ®µã€è§£é‡Šæ‰§è¡Œ+ç¼–è¯‘æ‰§è¡Œé˜¶æ®µã€æå‰ç¼–è¯‘é˜¶æ®µã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/de/7d/de5aca6c5d034abaf30cb77412f5587d.png?wh=1920x1248\" alt=\"å›¾ç‰‡\"></p><h3>è§£é‡Šæ‰§è¡Œï¼ˆInterpreter Execution)</h3><p>è§£é‡Šæ‰§è¡Œå°±æ˜¯å°†ç¼–è¯‘å¥½çš„å­—èŠ‚ç ä¸€è¡Œä¸€è¡Œåœ°ç¿»è¯‘æˆæœºå™¨ç æ‰§è¡Œã€‚è¿™ç§æ¨¡å¼åœ¨JVMçš„æ—©æœŸç‰ˆæœ¬ä¸­å°±å·²ç»å­˜åœ¨äº†ï¼Œå®ƒèˆå¼ƒäº†ç¼–è¯‘æ—¶é—´ï¼Œåªåœ¨ç¨‹åºè¿è¡Œæ—¶æŠŠå­—èŠ‚ç å®æ—¶ç¿»è¯‘ä¸ºæœºå™¨ä»£ç ã€‚</p><p>åœ¨è§£é‡Šæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äºæ¯æ¬¡éƒ½éœ€è¦é‡æ–°è§£é‡Šå­—èŠ‚ç ï¼Œç›¸åŒçš„å­—èŠ‚ç ä¼šå­˜åœ¨è¢«åå¤å¤šæ¬¡ç¿»è¯‘æ‰§è¡Œçš„æƒ…å†µï¼Œæ‰€ä»¥é‡‡ç”¨è¿™ç§æ¨¡å¼çš„ç¨‹åºè¿è¡Œæ€§èƒ½ä¸€èˆ¬æ¯”è¾ƒä½ã€‚ä¸ºæ­¤ï¼ŒJVMåœ¨è§£é‡Šæ‰§è¡Œçš„åŸºç¡€ä¸Šå¼•å…¥äº†å³æ—¶ç¼–è¯‘æ‰§è¡ŒæŠ€æœ¯ã€‚</p><h3>å³æ—¶ç¼–è¯‘ï¼ˆJust in Time Compilationï¼‰</h3><p>å³æ—¶ç¼–è¯‘ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„JITï¼Œä»¥æ–¹æ³•ä¸ºå•ä½ï¼Œå³æ—¶ç¼–è¯‘å°†å­—èŠ‚ç ä¸€æ¬¡æ€§ç¿»è¯‘ä¸ºæœºå™¨ç åå†æ‰§è¡Œã€‚JITç¼–è¯‘å™¨ä»JDK 1.1 ç‰ˆæœ¬å¼€å§‹å¼•å…¥ã€‚é€šè¿‡è¿™ç§æŠ€æœ¯ï¼ŒJVM å°±å¯ä»¥å‘ç°æŸæ®µå­—èŠ‚ç è¢«åå¤æ‰§è¡Œï¼Œä»è€Œå¯åŠ¨JITç¼–è¯‘å™¨ï¼ŒæŠŠè¿™æ®µå­—èŠ‚ç ç¼–è¯‘æˆæœºå™¨ä»£ç ï¼Œæé«˜è¿è¡Œé€Ÿåº¦ã€‚</p><!-- [[[read_end]]] --><p>è¿™ç§æ–¹å¼è™½ç„¶ä¼šæ ¹æ®è¿è¡Œæ—¶æœºå™¨çš„å®æ—¶çŠ¶æ€ï¼Œæ¯”å¦‚å†…å­˜çŠ¶æ€ç­‰ï¼Œç”Ÿæˆæœ€ä¼˜çš„æœºå™¨ä»£ç ï¼Œä½†æ˜¯å®ƒä¹Ÿéœ€è¦å ç”¨é¢å¤–çš„å†…å­˜ç©ºé—´ï¼Œå¹¶ä¸è¿è¡Œæ—¶çš„ç¨‹åºç«äº‰CPUèµ„æºã€‚å¹¶ä¸”éœ€è¦åœ¨ç³»ç»Ÿè¿è¡Œä¸€æ®µæ—¶é—´åæ‰èƒ½è¾¾åˆ°è¿è¡Œæ—¶çš„æ€§èƒ½å·…å³°ã€‚è¿™å°±åƒä½ åˆšåˆšå…¥èŒä¸€å®¶å…¬å¸ï¼Œéœ€è¦æœ‰ä¸€ä¸ªäº†è§£çš„è¿‡ç¨‹ï¼Œç†Ÿæ‚‰ä¹‹åï¼Œæ‰èƒ½è¾¾åˆ°æœ€ä½³çš„å·¥ä½œçŠ¶æ€ã€‚</p><p>ä½†æ˜¯è¿™ä¸äº‘åŸç”Ÿæ—¶ä»£ç³»ç»Ÿå¯åŠ¨å³æ€§èƒ½å·…å³°çš„è¦æ±‚æ˜¯æœ‰å‡ºå…¥çš„ã€‚æ‰€ä»¥è™½ç„¶ä¸»æµçš„JVMä¾ç„¶æ˜¯é‡‡ç”¨è§£é‡Šæ‰§è¡Œ + ç¼–è¯‘æ‰§è¡Œçš„æ··åˆæ¨¡å¼ï¼Œä½†æ˜¯æ›´ç¬¦åˆäº‘åŸç”Ÿè¦æ±‚çš„æå‰ç¼–è¯‘æ¨¡å¼å·²ç»å¼€å§‹å´­éœ²å¤´è§’ã€‚</p><h3>æå‰ç¼–è¯‘ï¼ˆAhead of Time Compilationï¼‰</h3><p>æå‰ç¼–è¯‘ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„AOTã€‚AOTç¼–è¯‘å™¨æ˜¯ä»JDK 1.9å¼€å§‹å¼•å…¥çš„ JEP 295è§„èŒƒã€‚ä¸JITç¼–è¯‘å™¨ä¸åŒï¼ŒAOTæ˜¯åœ¨ç¨‹åºè¿è¡Œå‰å°±æŠŠå­—èŠ‚ç ç¼–è¯‘æˆäº†æœºå™¨ç ã€‚</p><p>ä½¿ç”¨AOTç¼–è¯‘å™¨çš„ä¼˜åŠ¿åœ¨äºä½ å¯ä»¥åœ¨éƒ¨ç½²åº”ç”¨ç¨‹åºå‰ç¼–è¯‘ä»£ç ï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶æ‰ç¼–è¯‘ï¼Œè¿™å¯ä»¥å‡å°‘åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶å’Œè¿è¡Œæ—¶éœ€è¦çš„ CPUèµ„æºï¼Œä¼˜åŒ–èµ„æºçš„ä½¿ç”¨æ–¹å¼ï¼Œå‡å°‘å¯åŠ¨å»¶è¿Ÿæ—¶é—´ï¼Œæé«˜æ€§èƒ½ã€‚è¿™å°±åƒä½ åœ¨å…¥èŒä¸€å®¶å…¬å¸ä¹‹å‰ï¼Œå°±æå‰äº†è§£å¹¶è¾¾åˆ°äº†å¯¹åº”å²—ä½çš„æŠ€èƒ½è¦æ±‚ï¼Œè¿™æ ·ä½ åœ¨å…¥èŒçš„ç¬¬ä¸€å¤©å°±èƒ½è¾¾åˆ°æœ€ä½³çš„å·¥ä½œçŠ¶æ€ã€‚</p><p>ä»æœ€åˆçš„è§£é‡Šæ‰§è¡Œï¼Œåˆ°å³æ—¶ç¼–è¯‘æŠ€æœ¯ï¼Œå†åˆ°æœ€æ–°æ¨å‡ºçš„æå‰ç¼–è¯‘æŠ€æœ¯ï¼ŒJVMåœ¨è¿½æ±‚å­—èŠ‚ç æ‰§è¡Œæ€§èƒ½æå‡çš„é“è·¯ä¸Šï¼Œä»ä¾èµ–è‡ªèº«å¹³å°æ— å…³æ€§çš„è§£å†³æ–¹æ¡ˆä¸€æ­¥æ­¥è½¬å˜åˆ°ä¾èµ–äº‘åŸç”Ÿæ—¶ä»£ç”±å®¹å™¨æä¾›å¹³å°æ— å…³æ€§çš„è§£å†³æ–¹æ¡ˆä¸Šã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥è¯¦ç»†èŠä¸€èŠJVMä¸­çš„JITå’ŒAOTæŠ€æœ¯ã€‚</p><h2>è¯¦è§£ JIT</h2><p><img src=\"https://static001.geekbang.org/resource/image/51/00/51d96aaf8d19a9bd1353f43740576100.png?wh=1920x522\" alt=\"å›¾ç‰‡\"></p><p>åœ¨å®é™…çš„ç”Ÿäº§å®è·µä¸­ï¼Œä¸€èˆ¬æ˜¯å°†è§£é‡Šæ‰§è¡Œä¸ç¼–è¯‘æ‰§è¡Œç»“åˆèµ·æ¥ä½¿ç”¨ï¼Œä»¥è¾¾åˆ°æœ€ä½³çš„æ€§èƒ½ã€‚è¿™èƒŒåçš„é€»è¾‘å’ŒJVMå°†å †åˆ†æˆæ–°ç”Ÿä»£å’Œè€å¹´ä»£ä¸€æ ·ï¼Œé™¤äº†JVMä¸­å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå­˜åœ¨äºŒå…«å®šå¾‹ï¼Œæˆ‘ä»¬æ‰€è¿è¡Œçš„ä»£ç ä¹ŸåŒæ ·å­˜åœ¨äºŒå…«å®šå¾‹ï¼Œä¹Ÿå°±æ˜¯è¯´ 80%çš„CPUæ—¶é—´æ˜¯åœ¨å¤„ç†20%çš„ä»£ç ï¼Œè¿™å°±æ˜¯JITå¯ä»¥é€šè¿‡æ·±åº¦ä¼˜åŒ–çƒ­ç‚¹ä»£ç æ¥æå‡æ€§èƒ½çš„åŸå› ã€‚</p><h3>æ··åˆæ¨¡å¼ä¸‹Javaä»£ç æ‰§è¡Œæµç¨‹</h3><p><img src=\"https://static001.geekbang.org/resource/image/24/40/243fe603388dffe7414ee700c7610440.png?wh=1920x1121\" alt=\"å›¾ç‰‡\"></p><p>ä½ å¯ä»¥çœ‹ä¸€ä¸‹æ··åˆæ¨¡å¼ï¼ˆè§£é‡Šæ‰§è¡Œ+ç¼–è¯‘æ‰§è¡Œï¼‰ä¸‹ Java ä»£ç çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œä¸»è¦åˆ†ä¸º 4 ä¸ªé˜¶æ®µã€‚</p><ol>\n<li>å‰ç«¯ç¼–è¯‘ï¼šå°†Javaæºä»£ç é€šè¿‡Javacç¼–è¯‘å™¨ç¼–è¯‘æˆå­—èŠ‚ç ï¼Œå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ç¼–è¯‘è¿‡ç¨‹ã€‚</li>\n<li>åŠ è½½ï¼šJVMä¸­çš„ç±»åŠ è½½å™¨ï¼ˆClassloaderï¼‰è¯»å–å­—èŠ‚ç æ–‡ä»¶ï¼Œå¹¶åœ¨JVMè¿è¡Œæ—¶ç©ºé—´ä¸­ç”Ÿæˆå¯¹åº”çš„å†…å®¹ã€‚</li>\n<li>è§£é‡Šæ‰§è¡Œï¼šJVMè§£é‡Šå™¨å¼€å§‹å·¥ä½œï¼Œé€è¡Œè¯»å–å­—èŠ‚ç ï¼Œå¹¶æŠŠå­—èŠ‚ç ç¿»è¯‘ä¸ºåº•å±‚ç³»ç»Ÿå¯ä»¥æ‰§è¡Œçš„æœºå™¨ç ã€‚</li>\n<li>å³æ—¶ç¼–è¯‘ï¼šJVMåœ¨è¿è¡Œæ—¶å°†çƒ­ç‚¹ä»£ç ç¼–è¯‘æˆæœºå™¨ç ï¼Œå¹¶ç¼“å­˜èµ·æ¥ï¼Œä¸‹æ¬¡éœ€è¦æ‰§è¡ŒåŒæ ·çš„å­—èŠ‚ç æ—¶ï¼Œç›´æ¥è¿è¡Œå¯¹åº”çš„æœºå™¨ç ã€‚</li>\n</ol><h3>JIT è§¦å‘æ—¶æœº</h3><p>JVMé€šè¿‡åˆ†æä»£ç çš„è¿è¡Œæƒ…å†µï¼Œå¦‚æ–¹æ³•è°ƒç”¨é¢‘ç‡ã€å¾ªç¯ä»£ç ç­‰ï¼Œå†³å®šæ˜¯å¦å°†æŸæ®µå­—èŠ‚ç ç¼–è¯‘æˆæœ¬æœºä»£ç ï¼Œä»¥æé«˜è¿è¡Œé€Ÿç‡ã€‚</p><p>å³æ—¶ç¼–è¯‘çš„è§¦å‘æœºåˆ¶å…·æœ‰ä¸€å®šçš„åŠ¨æ€æ€§ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„Javaä»£ç éƒ½ä¼šè¢«ç¼–è¯‘ä¸ºæœºå™¨ä»£ç ï¼Œåªæœ‰åœ¨ç›‘è§†å’Œåˆ†æåç¡®è®¤ä¸ºçƒ­ç‚¹ä»£ç çš„æ‰ä¼šè¢«è½¬åŒ–ä¸ºæœºå™¨ä»£ç ã€‚å…·ä½“çš„ç­–ç•¥ç»†èŠ‚å¯èƒ½ä¼šå› ä¸ºJVMçš„ç‰ˆæœ¬ã€é…ç½®é€‰é¡¹ã€è¿è¡Œç¯å¢ƒç­‰å› ç´ è€Œæœ‰æ‰€æ”¹å˜ã€‚</p><pre><code class=\"language-java\">public class TestJIT {\n&nbsp;&nbsp;&nbsp; private static final int NUM = 15000;\n&nbsp;&nbsp;&nbsp;\n&nbsp;&nbsp;&nbsp; public static void main(String[] args) {\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; testMethod();\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (int i = 0; i &lt; NUM; i++) {\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; testMethod();\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }\n&nbsp;&nbsp;&nbsp; }\n&nbsp;&nbsp;&nbsp; public static void testMethod() {\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (int i = 0; i &lt; NUM; i++) {\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // do something...\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }\n&nbsp;&nbsp;&nbsp; }\n}\n</code></pre><p>å¯¹åº”çš„éƒ¨åˆ†å­—èŠ‚ç ï¼š</p><pre><code class=\"language-java\">public class TestJIT\n&nbsp; public static final int NUM;\n&nbsp; public static void main(java.lang.String[]);\n&nbsp;&nbsp;&nbsp; Code:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0: iconst_0\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1: istore_1\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2: goto&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5: invokestatic&nbsp; #6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Method testMethod&amp; #40;&amp; #41;V\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8: iinc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1, 1\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 11: iload_1\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 12: getstatic &nbsp;&nbsp;&nbsp; #2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Field NUM:I\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 15: if_icmplt &nbsp;&nbsp;&nbsp; 5\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 18: return\n&nbsp; public static void testMethod();\n&nbsp;&nbsp;&nbsp; Code:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0: iconst_0\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1: istore_0\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2: iload_0\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3: getstatic &nbsp;&nbsp;&nbsp; #2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Field NUM:I\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 6: if_icmpge &nbsp;&nbsp;&nbsp; 14\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 9: iinc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0, 1\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 12: goto&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 15: return\n}\n</code></pre><p>åœ¨mainæ–¹æ³•å†…ï¼Œè°ƒç”¨äº†testMethodæ–¹æ³•ï¼ˆå­—èŠ‚ç ç¬¬5è¡Œï¼‰ï¼Œå¹¶åœ¨ä¸€ä¸ªå¾ªç¯ä¸­å¤šæ¬¡è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚å­—èŠ‚ç ç¬¬2è¡Œçš„ <code>go to</code> å’Œ15è¡Œçš„ <code>if_icmpit</code> æŒ‡ä»¤è¡¨ç¤ºè¿™ä¸ªå¾ªç¯ã€‚</p><p>æ¯æ¬¡è°ƒç”¨è¿™ä¸ªæ–¹æ³•éƒ½ä¼šæ‰§è¡ŒtestMethodå†…éƒ¨åˆä¸€ä¸ªå¾ªç¯ã€‚å½“ç¨‹åºæ‰§è¡Œæ—¶ï¼Œè¿™äº›é¢‘ç¹æ‰§è¡Œçš„çƒ­ç‚¹ä»£ç å°±å¯èƒ½ä¼šè¢«JVMçš„è¿è¡Œæ—¶ç¼–è¯‘å™¨ï¼ˆJITï¼‰æ³¨æ„åˆ°ï¼Œå¹¶æŠŠè¿™äº›ä»£ç ç¼–è¯‘ä¼˜åŒ–ä¸ºæœºå™¨ç ã€‚JVM ä¸­é»˜è®¤ç¼–è¯‘é˜ˆå€¼æ˜¯ 10000ï¼Œè¿™ä¸ªå€¼å¯èƒ½ä¼šå› ä¸ºJVMåŠç‰ˆæœ¬çš„ä¸åŒæœ‰æ‰€å·®å¼‚ï¼Œå½“æ–¹æ³•è°ƒç”¨æ¬¡æ•°æˆ–æ–¹æ³•ä¸­çš„å¾ªç¯æ¬¡æ•°è¶…è¿‡è¿™ä¸ªé˜ˆå€¼çš„æ—¶å€™ï¼ŒJIT ç¼–è¯‘å™¨å°±ä¼šå°è¯•æŠŠè¿™ä¸ªæ–¹æ³•çš„å­—èŠ‚ç ç¼–è¯‘æˆæœºå™¨ç ï¼Œæ¥è¾¾åˆ°ä¼˜åŒ–çš„ç›®çš„ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™åªæ˜¯ä¸€ä¸ªè§¦å‘JITå¯èƒ½æ€§å¾ˆé«˜çš„ç¤ºä¾‹ï¼Œå¹¶ä¸ä¿è¯ JVM ä¸€å®šä¼šç¼–è¯‘testMethod()æ–¹æ³•ã€‚æ˜¯å¦çœŸæ­£ç¼–è¯‘ï¼Œå–å†³äº JVM çš„å®é™…è¿è¡Œæƒ…å†µå’Œå…·ä½“å®ç°ç­–ç•¥ï¼Œæ¯”å¦‚ JVM çš„å†…å­˜ä½¿ç”¨æƒ…å†µã€CPU è´Ÿè½½æƒ…å†µï¼Œä»¥åŠ JIT ç¼–è¯‘å™¨çš„å…·ä½“å®ç°ç­‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¹¶ä¸èƒ½é€šè¿‡ä¸€æ®µå›ºå®šçš„ Java ä»£ç æˆ–å­—èŠ‚ç ï¼Œç¡®åˆ‡åœ°çŸ¥é“åœ¨å“ªéƒ¨åˆ†ä¼šè§¦å‘ JIT ç¼–è¯‘ã€‚</p><h3>JIT ç¼–è¯‘ä¼˜åŒ–</h3><p>ç¼–è¯‘ä¼˜åŒ–æ˜¯JITç¼–è¯‘å™¨çš„ä¸€ä¸ªå…³é”®åŠŸèƒ½ã€‚å®ƒåœ¨è¿è¡Œæ—¶æ”¶é›†ä»£ç çš„ä¿¡æ¯å¹¶è¿›è¡Œä¼˜åŒ–ã€‚é€šè¿‡åŠ¨æ€åˆ†ææ–¹æ³•è°ƒç”¨ã€å¾ªç¯ç»“æ„ç­‰ï¼ŒJITç¼–è¯‘ä¼˜åŒ–å¯ä»¥æé«˜ä»£ç çš„æ‰§è¡Œæ•ˆç‡ã€‚å…·ä½“æ¥è¯´ï¼ŒJITç¼–è¯‘ä¼˜åŒ–ä¼šåœ¨è¿è¡Œæ—¶å¯¹Javaå­—èŠ‚ç è¿›è¡Œä¼˜åŒ–ï¼Œä½¿ç”¨æ–¹æ³•å†…è”ã€å¾ªç¯å±•å¼€åŠé€ƒé€¸åˆ†æç­‰æŠ€æœ¯æ¥æé«˜ä»£ç çš„æ€§èƒ½ã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥è¯¦ç»†èŠä¸‹JITçš„é€ƒé€¸åˆ†ææŠ€æœ¯ã€‚</p><h4>é€ƒé€¸åˆ†æ</h4><p>é€ƒé€¸åˆ†ææ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„JITä¼˜åŒ–æŠ€æœ¯ã€‚å®ƒçš„ä½œç”¨æ˜¯åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¼šåœ¨æ–¹æ³•å¤–éƒ¨è¢«è®¿é—®åˆ°ï¼Œä¹Ÿå°±æ˜¯é€ƒå‡ºæ–¹æ³•çš„ä½œç”¨åŸŸã€‚é€ƒé€¸åˆ†ææ˜¯JITç¼–è¯‘å™¨çš„ä¸€ä¸ªæ­¥éª¤ï¼Œé€šè¿‡JITæˆ‘ä»¬èƒ½å¤Ÿç¡®å®šå“ªäº›å¯¹è±¡å¯ä»¥è¢«é™åˆ¶åœ¨æ–¹æ³•å†…éƒ¨ä½¿ç”¨ï¼Œä¸ä¼šé€ƒé€¸åˆ°å¤–éƒ¨ï¼Œç„¶åå¯ä»¥å¯¹å®ƒä»¬è¿›è¡Œä¼˜åŒ–ï¼Œæ¯”å¦‚æŠŠå®ƒä»¬åˆ†é…åœ¨æ ˆä¸Šè€Œä¸æ˜¯å †ä¸Šï¼Œæˆ–è€…è¿›è¡Œæ ‡é‡æ›¿æ¢ï¼ŒæŠŠä¸€ä¸ªå¯¹è±¡æ‹†æ•£æˆå¤šä¸ªåŸºæœ¬ç±»å‹æ¥å­˜å‚¨ã€‚</p><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥æ›´åŠ é«˜æ•ˆåœ°åˆ†é…å†…å­˜å¹¶å‡å°‘åƒåœ¾å›æ”¶çš„å‹åŠ›ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„Javaç¤ºä¾‹ï¼Œæ¼”ç¤ºé€ƒé€¸åˆ†æçš„è¿‡ç¨‹ã€‚</p><pre><code class=\"language-java\">public class EscapeAnalysis {\n&nbsp;&nbsp;&nbsp; public static void main(String[] args) {\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Food food = createFood();\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int x = food.getX();\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(\"x: \" + x);\n&nbsp;&nbsp;&nbsp; }\n&nbsp;&nbsp;&nbsp; private static Food createFood() {\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return new Food(10);\n&nbsp;&nbsp;&nbsp; }\n&nbsp;&nbsp;&nbsp; private static class Food {\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private int x;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public Food(int x) {\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.x = x;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public int getX() {\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return x;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }\n&nbsp;&nbsp;&nbsp; }\n}\n</code></pre><p>createFood()æ–¹æ³•ä¸­åˆ›å»ºçš„Foodå¯¹è±¡ç»è¿‡é€ƒé€¸åˆ†æåï¼Œå¯ä»¥åœ¨main()æ–¹æ³•ä¸­ç›´æ¥è¿›è¡Œå˜é‡èµ‹å€¼ï¼Œé¿å…äº†å¯¹è±¡çš„åŠ¨æ€åˆ†é…ã€‚</p><p>ä½ å¯ä»¥çœ‹ä¸€ä¸‹ä½¿ç”¨é€ƒé€¸åˆ†ææŠ€æœ¯ä¼˜åŒ–è¿‡åçš„ä»£ç ç¤ºä¾‹ã€‚</p><pre><code class=\"language-java\">public class EscapeAnalysis {\n&nbsp;&nbsp;&nbsp; public static void main(String[] args) {\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int x = 10;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(\"x: \" + x);\n&nbsp;&nbsp;&nbsp; }\n}\n</code></pre><p>å¯¹è±¡çš„åˆ›å»ºè¢«ä¼˜åŒ–ä¸ºç›´æ¥åœ¨main()æ–¹æ³•ä¸­åˆ†é…å¹¶èµ‹å€¼ç»™ <code>x</code> å˜é‡ï¼Œé¿å…äº†å¯¹è±¡çš„åŠ¨æ€åˆ†é…ã€‚</p><h4>é€‚ç”¨åœºæ™¯</h4><p>é€ƒé€¸åˆ†æçš„ä¼˜åŒ–ä¸»è¦é’ˆå¯¹å±€éƒ¨å˜é‡ï¼Œåˆ¤æ–­å †ä¸Šåˆ†é…çš„å¯¹è±¡æ˜¯å¦é€ƒé€¸å‡ºæ–¹æ³•çš„ä½œç”¨åŸŸã€‚åˆç†åœ°è®¾è®¡ä»£ç ç»“æ„å’Œæ•°æ®çš„ä½¿ç”¨æ–¹å¼èƒ½å¤Ÿæ›´å¥½åœ°åˆ©ç”¨é€ƒé€¸åˆ†ææ¥ä¼˜åŒ–ç¨‹åºçš„æ€§èƒ½ã€‚æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡é€ƒé€¸åˆ†æå‡å°‘å †ä¸Šåˆ†é…å¯¹è±¡çš„å¼€é”€ï¼Œæé«˜å†…å­˜åˆ©ç”¨ç‡ã€‚</p><p>æˆ‘æ•´ç†äº†ä¸€äº›ä½¿ç”¨é€ƒé€¸åˆ†æçš„æœ€ä½³å®è·µï¼Œä½ å¯ä»¥å‚è€ƒã€‚</p><ol>\n<li>å¯¹äºä¸´æ—¶å¯¹è±¡æˆ–çŸ­æœŸä½¿ç”¨çš„å¯¹è±¡ï¼Œå°½é‡ä½¿ç”¨å±€éƒ¨å˜é‡æ¥å­˜å‚¨ï¼Œä»¥å‡å°‘å¯¹è±¡é€ƒé€¸çš„å¯èƒ½æ€§ã€‚</li>\n<li>é¿å…åœ¨æ–¹æ³•ä¸­è¿”å›å¯¹è±¡å¼•ç”¨ï¼Œç‰¹åˆ«æ˜¯å¦‚æœå¯¹è±¡åªåœ¨æ–¹æ³•å†…éƒ¨ä½¿ç”¨ã€‚</li>\n<li>ä½¿ç”¨finalå…³é”®å­—æ¥é™åˆ¶å¯¹è±¡çš„å¯å˜æ€§ï¼Œè¿™æ ·JITç¼–è¯‘å™¨æ›´å®¹æ˜“è¿›è¡Œé€ƒé€¸åˆ†æå’Œä¼˜åŒ–ã€‚</li>\n<li>å¯¹äºå¤æ‚çš„æ•°æ®ç»“æ„ï¼Œå°½é‡ä½¿ç”¨åŸºæœ¬ç±»å‹ã€æ•°ç»„æˆ–é›†åˆç±»ï¼Œä»¥å‡å°‘å¯¹è±¡çš„åˆ†é…å’Œé€ƒé€¸ã€‚</li>\n</ol><p>JITç¼–è¯‘ä¼˜åŒ–å¯¹äºæé«˜Javaåº”ç”¨ç¨‹åºçš„æ€§èƒ½è‡³å…³é‡è¦ã€‚é€šè¿‡æ·±å…¥ç†è§£JITç¼–è¯‘ä¼˜åŒ–çš„åŸç†ä¸æœ€ä½³å®è·µï¼Œæˆ‘ä»¬å¯ä»¥æœ€å¤§ç¨‹åº¦åœ°åˆ©ç”¨JITç¼–è¯‘ä¼˜åŒ–æ¥æå‡ä»£ç çš„æ‰§è¡Œæ•ˆç‡ã€‚</p><h2><strong>JITç¼–è¯‘å™¨çš„æ¼”è¿›ï¼š</strong>ä»C1ã€C2åˆ°Graal</h2><p>æœ€æ—©JITä¸»è¦æœ‰ä¸¤ç§ç¼–è¯‘å™¨ï¼ŒC1å’ŒC2ã€‚C1çš„ä¸»è¦ä¼˜ç‚¹æ˜¯ç¼–è¯‘é€Ÿåº¦å¿«ï¼Œä½†ä¼˜åŒ–ä»£ç çš„èƒ½åŠ›è¾ƒå¼±ï¼›è€ŒC2ç¼–è¯‘å™¨è™½ç„¶ç¼–è¯‘è¿‡ç¨‹è¾ƒæ…¢ï¼Œä½†èƒ½æ›´æœ‰æ•ˆåœ°ä¼˜åŒ–ä»£ç ã€‚åœ¨å„ç§æœåŠ¡ç«¯ç¨‹åºå’Œåˆ†å±‚ç¼–è¯‘ç®—æ³•ä¸­ï¼ŒC1å’ŒC2éƒ½æ‰®æ¼”ç€é‡è¦çš„è§’è‰²ã€‚ä½†æ˜¯C2ç¼–è¯‘å™¨å·²æœ‰è¿‘20å¹´çš„å†å²ï¼Œä»£ç å¤æ‚å¹¶ä¸”è®¾è®¡ä¸­å­˜åœ¨ä¸€äº›ç¼ºé™·ï¼Œä½¿å…¶ç»´æŠ¤å·¥ä½œå˜å¾—å›°éš¾ã€‚ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼ŒJDK 10æ¨å‡ºäº†ä¸€æ¬¾å…¨æ–°çš„JITç¼–è¯‘å™¨ï¼šGraalï¼ˆJEP 317ï¼‰ã€‚</p><p>Graalæ˜¯C2çš„æ¥ç­è€…ï¼Œæ ¸å¿ƒä»£ç å…¨æ˜¯ç”¨Javaç¼–å†™çš„ã€‚Graalæ‰¬é•¿é¿çŸ­ï¼Œå¸çº³äº†C2çš„ä¼˜åŠ¿ï¼Œå¹¶åŠ å…¥äº†æ–°çš„æ¶æ„è®¾è®¡ã€‚é€šè¿‡è¿™äº›æ”¹è¿›ï¼ŒGraalå¾ˆå¿«åœ¨æ€§èƒ½æ–¹é¢è¶…è¿‡äº†C2ï¼Œå¹¶åœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸‹æ˜¾ç¤ºå‡ºäº†æä½³çš„æ€§èƒ½ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/96/58/96d3360696ab370129a860406eedaf58.png?wh=1920x1107\" alt=\"å›¾ç‰‡\"></p><h2>ä» JIT åˆ° AOT</h2><p>ä¸ºäº†æ”¯æŒäº‘åŸç”Ÿå’Œå®¹å™¨åŒ–ç¯å¢ƒï¼ŒJVMåœ¨æ‰§è¡ŒJavaç¨‹åºæ—¶ä¹Ÿåœ¨é€æ­¥ä»JITç¼–è¯‘è½¬å‘AOTç¼–è¯‘ã€‚è¿™ç§è½¬å˜å¯ä»¥é€šè¿‡GraalVMç­‰å·¥å…·æ¥å®ç°ã€‚</p><p>åœ¨ä¼ ç»Ÿçš„JITç¼–è¯‘ä¸­ï¼ŒJavaç¨‹åºåœ¨è¿è¡Œæ—¶ä¼šå°†å­—èŠ‚ç é€è¡Œç¼–è¯‘æˆæœºå™¨ä»£ç ã€‚è¿™ç§åŠ¨æ€ç¼–è¯‘èƒ½å¤Ÿé’ˆå¯¹è¿è¡Œæ—¶çš„çŠ¶æ€å’Œè°ƒç”¨é¢‘ç‡è¿›è¡Œä¼˜åŒ–ï¼Œä½†ä¹Ÿå¯¼è‡´äº†æ€§èƒ½å»¶è¿Ÿå’Œå¯åŠ¨é€Ÿåº¦è¾ƒæ…¢çš„é—®é¢˜ã€‚</p><p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜å¹¶é€‚åº”äº‘åŸç”Ÿç¯å¢ƒï¼ŒJVMå¼•å…¥äº†AOTç¼–è¯‘ã€‚AOTç¼–è¯‘æ˜¯åœ¨ç¨‹åºè¿è¡Œä¹‹å‰å°†å­—èŠ‚ç ç›´æ¥ç¼–è¯‘æˆæœ¬åœ°æœºå™¨ä»£ç ã€‚è¿™ç§æ–¹å¼å¯ä»¥æé«˜ç¨‹åºçš„è¿è¡Œé€Ÿåº¦å’Œå¯åŠ¨é€Ÿåº¦ï¼Œå¹¶å‡å°‘è¿è¡Œæ—¶åŠ¨æ€ç¼–è¯‘çš„å¼€é”€ã€‚</p><p>ä¸ºäº†ä»JITè¿‡æ¸¡åˆ°AOTï¼ŒJVMå°†å­—èŠ‚ç ä¸AOTç¼–è¯‘ç›¸ç»“åˆã€‚åœ¨JITç¼–è¯‘è¿è¡Œæ—¶ï¼ŒJVMä¼šç›‘è§†ä»£ç çš„æ‰§è¡Œæƒ…å†µå¹¶æ”¶é›†ç›¸å…³çš„è¿è¡Œæ—¶ä¿¡æ¯ï¼Œç„¶åå°†è¿™äº›ä¿¡æ¯ä¼ é€’ç»™AOTç¼–è¯‘å™¨ã€‚AOTç¼–è¯‘å™¨ä¼šåˆ©ç”¨è¿™äº›ä¿¡æ¯å¯¹å­—èŠ‚ç è¿›è¡Œä¼˜åŒ–ï¼Œå¹¶ç”Ÿæˆå¯æ‰§è¡Œçš„æœ¬åœ°æœºå™¨ä»£ç ã€‚è¿™æ ·ï¼Œå½“ç›¸åŒçš„ä»£ç å†æ¬¡æ‰§è¡Œæ—¶ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨AOTç¼–è¯‘å¾—åˆ°çš„æœºå™¨ä»£ç ï¼Œè€Œæ— éœ€å†æ¬¡å¯åŠ¨JITç¼–è¯‘ã€‚</p><p>è¿™ç§JITå’ŒAOTç»“åˆçš„æ–¹å¼å¯ä»¥åœ¨ä¿æŒæ€§èƒ½ä¼˜åŒ–å’ŒåŠ¨æ€é€‚åº”æ€§çš„åŒæ—¶ï¼Œæ‹¥æœ‰æ›´å¿«çš„å¯åŠ¨æ—¶é—´å’Œæ›´é«˜çš„æ‰§è¡Œé€Ÿåº¦ã€‚è¿™æ ·Javaç¨‹åºå°±èƒ½æ›´å¥½åœ°é€‚åº”äº‘åŸç”Ÿå’Œå®¹å™¨åŒ–çš„ç¯å¢ƒäº†ï¼Œæ€§èƒ½å’Œå¯æ‰©å±•æ€§ä¹Ÿæ›´å¥½ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f5/b1/f5507352fd62eabfe5cb7f9fb562b1b1.png?wh=1920x795\" alt=\"å›¾ç‰‡\"></p><p>æˆ‘æ•´ç†äº†JITå’ŒAOTåœ¨å¯åŠ¨é€Ÿåº¦ã€å†…å­˜å ç”¨ç­‰æ–¹é¢çš„åŒºåˆ«ã€‚é€šè¿‡å¯¹æ¯”ï¼Œä½ ä¼šå‘ç°JITå’ŒAOTæœ‰å„è‡ªæ“…é•¿çš„é¢†åŸŸå’Œåº”ç”¨åœºæ™¯ã€‚æ‰€ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å®é™…é€‰æ‹©æ—¶ï¼Œæœ€å¥½æ˜¯ç»“åˆåº”ç”¨çš„ç‰¹ç‚¹ï¼Œå……åˆ†æƒè¡¡ï¼Œé€‰æ‹©æœ€é€‚åˆçš„è§£å†³æ–¹æ¡ˆã€‚</p><h2>é‡ç‚¹å›é¡¾</h2><p>æˆ‘ä»¬éƒ½çŸ¥é“JVMçš„å­—èŠ‚ç éœ€è¦è½¬åŒ–ä¸ºåº•å±‚ç‰©ç†ç¡¬ä»¶è¯†åˆ«çš„æœºå™¨ç æ‰èƒ½çœŸæ­£è¿è¡Œèµ·æ¥ã€‚è€Œåœ¨è¿™ä¸ªè½¬åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°ç¼–è¯‘å™¨ï¼Œæœ€å¼€å§‹æˆ‘ä»¬çœ‹åˆ°çš„æ˜¯é€è¡Œç¼–è¾‘å­—èŠ‚ç çš„è§£é‡Šæ‰§è¡Œï¼Œéšç€æ—¶ä»£çš„å‘å±•åˆè¡ç”Ÿå‡ºäº†åˆ°åŸºäºçƒ­ç‚¹ä»£ç è¯†åˆ«ï¼Œä»¥æ–¹æ³•ä¸ºç²’åº¦å°†çƒ­ç‚¹ä»£ç è½¬åŒ–ä¸ºæœºå™¨ç çš„å³æ—¶ç¼–è¯‘æŠ€æœ¯ã€‚ç°åœ¨ä¸ºäº†æ›´å¥½åœ°é€‚åº”å¯¹å¯åŠ¨é€Ÿåº¦å’Œæ€§èƒ½çš„è¦æ±‚ï¼ŒJVMåˆé€šè¿‡AOTæŠ€æœ¯å®ç°äº†æå‰ç¼–è¯‘ï¼Œå¹¶ç»“åˆå®¹å™¨çš„å¹³å°æ— å…³æ€§ï¼Œæ¥æ‰“é€ JVMçš„äº‘åŸç”Ÿè¿è¡ŒåŸºç¡€ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>è¿™èŠ‚è¯¾æˆ‘ä»¬å­¦ä¹ äº†JVMçš„ç¼–è¯‘å™¨ï¼Œé‚£ä½ èƒ½è¯´ä¸€è¯´åœ¨ç¼–è¯‘å™¨éƒ¨åˆ†æˆ‘ä»¬å¯ä»¥é€šè¿‡å“ªäº›æ–¹å¼æå‡ç¨‹åºçš„æ€§èƒ½å—ï¼Œæ­¤å¤–è¿™èŠ‚è¯¾æˆ‘ä»¬é‡ç‚¹è®¨è®ºäº†JITçš„åŸç†ï¼Œä½ çŸ¥é“è§¦å‘JITçš„æ—¶æœºæ˜¯ä»€ä¹ˆå—ï¼Ÿ</p><p>æ¬¢è¿ä½ æŠŠä½ çš„ç­”æ¡ˆåˆ†äº«åˆ°è¯„è®ºåŒºï¼Œå’Œæˆ‘ä¸€èµ·è®¨è®ºï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™èŠ‚è¯¾åˆ†äº«ç»™éœ€è¦çš„æœ‹å‹ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼</p><h2>ğŸ’¡ç‚¹äº®ä½ çš„çŸ¥è¯†æ¡†æ¶å›¾</h2><p><img src=\"https://static001.geekbang.org/resource/image/9f/41/9f17660c02bf462c629beyya8792a441.jpg?wh=8572x6326\" alt=\"å›¾ç‰‡\"></p>","comments":[{"had_liked":false,"id":380312,"user_name":"æµ©ä»”æ˜¯ç¨‹åºå‘˜","can_delete":false,"product_type":"c1","uid":1104601,"ip_address":"å¹¿ä¸œ","ucode":"A7E5CF9E1571A2","user_header":"https://static001.geekbang.org/account/avatar/00/10/da/d9/f051962f.jpg","comment_is_top":false,"comment_ctime":1693359124,"is_pvip":false,"replies":[{"id":138648,"content":"è¿™ä¸ªé—®é¢˜éå¸¸å¥½ï¼Œä½¿ç”¨AOTåæ— æ³•ç›´æ¥ä½¿ç”¨åå°„ç­‰åŠ¨æ€çš„ç‰¹æ€§ï¼Œç›®å‰ä¸šå†…æœ‰ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆåˆ†åˆ«æ˜¯Spring Boot 3å’ŒQuarkusï¼Œä»–ä»¬æä¾›äº†åœ¨ä½¿ç”¨AOTç¼–è¯‘æ—¶å¤„ç†åå°„å’ŒåŠ¨æ€ä»£ç†é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚å®ƒä»¬é€šè¿‡ç¼–è¯‘æ—¶ç”Ÿæˆé…ç½®ã€ä»£ç åˆ†æå’Œä¼˜åŒ–ç­‰æ‰‹æ®µï¼Œå®ç°äº†AOTç¼–è¯‘å’ŒJavaçš„åŠ¨æ€ç‰¹æ€§çš„ç»“åˆï¼Œæˆ‘ä¼šåœ¨å®æˆ˜ç¯‡ä¸­è¯¦ç»†ä»‹ç»è¿™éƒ¨åˆ†ï¼Œå¯ä»¥åˆ°æ—¶å€™å…³æ³¨ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1366588,"ctime":1694230662,"ip_address":"åŒ—äº¬","comment_id":380312,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"AOTè¿˜å¯ä»¥ä½¿ç”¨åå°„å’ŒåŠ¨æ€ä»£ç†å—ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1366588,"avatar":"https://static001.geekbang.org/account/avatar/00/14/da/3c/6ca50139.jpg","nickname":"Arthur king å¾®ä¿¡è¶…ç´šæœƒå“¡","note":"","ucode":"79637F55F0ED85","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627519,"discussion_content":"è¿™ä¸ªé—®é¢˜éå¸¸å¥½ï¼Œä½¿ç”¨AOTåæ— æ³•ç›´æ¥ä½¿ç”¨åå°„ç­‰åŠ¨æ€çš„ç‰¹æ€§ï¼Œç›®å‰ä¸šå†…æœ‰ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆåˆ†åˆ«æ˜¯Spring Boot 3å’ŒQuarkusï¼Œä»–ä»¬æä¾›äº†åœ¨ä½¿ç”¨AOTç¼–è¯‘æ—¶å¤„ç†åå°„å’ŒåŠ¨æ€ä»£ç†é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚å®ƒä»¬é€šè¿‡ç¼–è¯‘æ—¶ç”Ÿæˆé…ç½®ã€ä»£ç åˆ†æå’Œä¼˜åŒ–ç­‰æ‰‹æ®µï¼Œå®ç°äº†AOTç¼–è¯‘å’ŒJavaçš„åŠ¨æ€ç‰¹æ€§çš„ç»“åˆï¼Œæˆ‘ä¼šåœ¨å®æˆ˜ç¯‡ä¸­è¯¦ç»†ä»‹ç»è¿™éƒ¨åˆ†ï¼Œå¯ä»¥åˆ°æ—¶å€™å…³æ³¨ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694230662,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1310674,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ff/d2/9d36c2fe.jpg","nickname":"Né˜¶çŸ©é˜µ","note":"","ucode":"0B09091FC7FFD6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1366588,"avatar":"https://static001.geekbang.org/account/avatar/00/14/da/3c/6ca50139.jpg","nickname":"Arthur king å¾®ä¿¡è¶…ç´šæœƒå“¡","note":"","ucode":"79637F55F0ED85","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":628718,"discussion_content":"æ˜¯ä¸æ˜¯åŠ¨æ€é“¾æ¥ä¹Ÿä¸èƒ½ç”¨äº†ï¼Ÿä½†æ˜¯åŠ¨æ€é“¾æ¥åœ¨javaä¸­åŸºæœ¬ä¸Šæ˜¯æ— å¤„ä¸åœ¨çš„å§ã€‚æ±‚è€å¸ˆè§£ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1695730402,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":627519,"ip_address":"åŒ—äº¬","group_id":0},"score":628718,"extra":""}]}]},{"had_liked":false,"id":380291,"user_name":"ä¸´é£","can_delete":false,"product_type":"c1","uid":1145430,"ip_address":"å¹¿ä¸œ","ucode":"59A7F3DDD94D76","user_header":"https://static001.geekbang.org/account/avatar/00/11/7a/56/29877cb9.jpg","comment_is_top":false,"comment_ctime":1693318505,"is_pvip":true,"replies":[{"id":138649,"content":"æ€»ç»“çš„éå¸¸å¥½ğŸ‘ğŸ»","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1366588,"ctime":1694231703,"ip_address":"åŒ—äº¬","comment_id":380291,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"    javaé¦–å…ˆæ˜¯é€šè¿‡javacç¼–è¯‘æˆå­—èŠ‚ç ï¼Œç„¶åjvmæ‰èƒ½é€šè¿‡æ‰§è¡Œå­—èŠ‚ç æ‰§è¡Œç¨‹åºã€‚jvmæœ‰ä¸¤ç§æ‰§è¡Œæ–¹å¼ï¼Œè§£é‡Šæ‰§è¡Œå’Œç¼–è¯‘æ‰§è¡Œï¼Œè§£é‡Šæ‰§è¡Œå°±æ˜¯jvmç›´æ¥ç¿»è¯‘å­—èŠ‚ç ä¸ºæœºå™¨ç è¿è¡Œï¼Œç¼–è¯‘æ‰§è¡Œæ˜¯jvmå…ˆå°†å­—èŠ‚ç ç¼–è¯‘æˆæœºå™¨ç å¹¶ä¸”ç¼“å­˜èµ·æ¥å†æ‰§è¡Œã€‚\n    å¾ˆæ˜æ˜¾è§£é‡Šæ‰§è¡Œåœ¨ç¬¬ä¸€æ¬¡ç»å¯¹æ˜¯æ¯”ç¼–è¯‘æ‰§è¡Œå¿«çš„ï¼Œä½†å¦‚æœä¸€æ®µä»£ç æ‰§è¡Œçš„æ¬¡æ•°å¤šäº†ï¼Œé‚£ä¹ˆç¼–è¯‘æ‰§è¡Œçš„æ•ˆç‡åè€Œæ˜¯æ¯”è§£é‡Šæ‰§è¡Œé«˜äº†ã€‚æ‰€ä»¥jvmä¼šå°†çƒ­ç‚¹ä»£ç è¿›è¡Œç¼–è¯‘æ‰§è¡Œï¼Œè€Œå¤§éƒ¨åˆ†ä»£ç ä»ç„¶ä¿æŒè§£é‡Šæ‰§è¡Œã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆJavaéœ€è¦è¿è¡Œä¸€æ®µæ—¶é—´æ‰èƒ½è¾¾åˆ°æ€§èƒ½å·…å³°çš„åŸå› ã€‚\n    javaä½¿ç”¨c1ï¼ˆé€Ÿåº¦å¿«ã€ä¼˜åŒ–å·®ã€é’ˆå¯¹ç®€å•çš„é€»è¾‘ï¼‰ã€c2ï¼ˆé€Ÿåº¦æ…¢ã€ä¼˜åŒ–å¥½ã€é’ˆå¯¹å¤æ‚çš„é€»è¾‘ï¼‰æ¥è¿›è¡Œç¼–è¯‘ï¼Œä½¿ç”¨C++ç¼–å†™çš„ï¼Œç°åœ¨å·²ç»éš¾ä»¥ç»´æŠ¤äº†ã€‚æ‰€ä»¥ä½¿ç”¨javaæ¨å‡ºäº†æ–°çš„graalç¼–è¯‘å™¨ä»£æ›¿c2ç¼–è¯‘å™¨ã€‚è¿™äº›ç¼–è¯‘å™¨éƒ½å±äºJITçš„èŒƒç•´ï¼Œéƒ½æ˜¯åœ¨è¿è¡Œæ—¶å»ç¼–è¯‘ä»£ç ã€‚\n    ä¸ºäº†é€‚åº”äº‘åŸç”Ÿçš„èƒŒæ™¯ï¼Œjavaæ¨å‡ºäº†aotï¼Œæ”¯æŒç›´æ¥å°†javaæ–‡ä»¶ç¼–è¯‘ä¸ºäºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ï¼Œä½¿ç”¨graal VMä»£æ›¿jvmæ‰§è¡Œï¼Œå®ç°äº†æ¯«ç§’çº§çš„å¯åŠ¨æ—¶é—´ã€‚ç”±äºæ²¡æœ‰äº†è¿è¡Œæ—¶ï¼Œå¯¹æ•´ä¸ªjavaç”Ÿæ€ä¹Ÿæå‡ºäº†æŒ‘æˆ˜ï¼Œä¸è¿‡spring boot3å·²ç»ç‡å…ˆæ”¯æŒäº†è¿™ä¸€ç‰¹æ€§ã€‚\n    ä»¥ä¸Šå°±æ˜¯å¯¹æœ¬æ–‡çš„å°ç»“å’Œè‡ªå·±ä¸€äº›ç®€å•çš„è®¤è¯†ï¼Œå¦‚æœæœ‰é—®é¢˜ï¼Œè¿˜æœ›è€å¸ˆæŒ‡æ­£ã€‚","like_count":6,"discussions":[{"author":{"id":1366588,"avatar":"https://static001.geekbang.org/account/avatar/00/14/da/3c/6ca50139.jpg","nickname":"Arthur king å¾®ä¿¡è¶…ç´šæœƒå“¡","note":"","ucode":"79637F55F0ED85","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627522,"discussion_content":"æ€»ç»“çš„éå¸¸å¥½ğŸ‘ğŸ»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694231703,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":380385,"user_name":"è¿½é€æˆ‘çš„æ˜å¤©ã€‚","can_delete":false,"product_type":"c1","uid":3257899,"ip_address":"åŒ—äº¬","ucode":"12C8B126E239BB","user_header":"https://static001.geekbang.org/account/avatar/00/31/b6/2b/af79073f.jpg","comment_is_top":false,"comment_ctime":1693470244,"is_pvip":false,"replies":[{"id":138654,"content":"é€šè¿‡é€ƒé€¸åˆ†æï¼ŒJVMå¯ä»¥çŸ¥é“ä¸€ä¸ªå¯¹è±¡çš„ä½¿ç”¨èŒƒå›´ï¼Œä»è€Œç¡®å®šè¯¥å¯¹è±¡æ˜¯å¦å¯ä»¥&quot;é€ƒé€¸&quot;å‡ºæ–¹æ³•æˆ–çº¿ç¨‹ç­‰ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡åªèƒ½ä»åˆ›å»ºå®ƒçš„çº¿ç¨‹è®¿é—®ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨æ ˆä¸Šåˆ†é…å®ƒçš„å†…å­˜ï¼Œè€Œä¸æ˜¯åœ¨å †ä¸Šã€‚è¿™æ ·å¯ä»¥é¿å…åç»­çš„åƒåœ¾å›æ”¶ã€‚å¯¹äºä¸Šé¢çš„ä»£ç ï¼Œç»è¿‡é€ƒé€¸åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° `food` å¯¹è±¡åªåœ¨ `main` å‡½æ•°ä¸­ä½¿ç”¨ï¼Œå®ƒæ²¡æœ‰è¢«è¿”å›æˆ–è€…æ²¡æœ‰è¢«å…¶ä»–çº¿ç¨‹å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒçš„&quot;ä½¿ç”¨èŒƒå›´&quot;ä»…é™äºå½“å‰çº¿ç¨‹ã€‚å› æ­¤ï¼ŒJVMå°±å¯ä»¥ç›´æ¥åœ¨æ ˆä¸Šåˆ†é… `food` å¯¹è±¡çš„å†…å­˜ï¼Œä»è€Œæé«˜ç¨‹åºæ€§èƒ½ã€‚è¿™æ˜¯é€ƒé€¸åˆ†æçš„åŸºæœ¬æ€æƒ³ï¼Œä¸è¿‡åœ¨å®é™…çš„JVMå®ç°ä¸­ï¼Œè¿™ç§ä¼˜åŒ–å¯èƒ½å¹¶ä¸ä¼šå‘ç”Ÿï¼Œå› ä¸ºåªæœ‰å½“å¯¹è±¡çš„å¤§å°å’Œå­˜æ´»æ—¶é—´ç¬¦åˆä¸€å®šçš„æ¡ä»¶æ—¶ï¼Œæ‰ä¼šå°†å¯¹è±¡çš„å†…å­˜åˆ†é…ä»å †è½¬ç§»åˆ°æ ˆã€‚ä¸Šè¿°ä»£ç åªæ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå®é™…ä¸ŠJVMçš„å‘ç°è¿‡ç¨‹å¯èƒ½æ¯”è¿™ä¸ªè¦å¤æ‚å¾—å¤šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1366588,"ctime":1694240626,"ip_address":"åŒ—äº¬","comment_id":380385,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"å…³äºé€ƒé€¸åˆ†æ æˆ‘æƒ³é—®ä¸ªé—®é¢˜\nä½œè€…åŸè¯ï¼šé€šè¿‡ JIT æˆ‘ä»¬èƒ½å¤Ÿç¡®å®šå“ªäº›å¯¹è±¡å¯ä»¥è¢«é™åˆ¶åœ¨æ–¹æ³•å†…éƒ¨ä½¿ç”¨ï¼Œä¸ä¼šé€ƒé€¸åˆ°å¤–éƒ¨ï¼Œç„¶åå¯ä»¥å¯¹å®ƒä»¬è¿›è¡Œä¼˜åŒ–\nä½†æ˜¯ä¸‹é¢çš„ä»£ç ç¤ºä¾‹ï¼Œå¼•ç”¨è‚¯å®šè¢«ä¼ é€’åˆ°å¤–é¢äº†ï¼Œä½†æ˜¯è¿™æ®µä»£ç ä¸è¿˜æ˜¯è¢«ä¼˜åŒ–äº†å˜›ï¼Ÿæˆ‘ç°åœ¨ä¸å¤ªæ˜ç™½æ˜¯ä¼ é€’åˆ°å¤–é¢çš„ ä¼šè¢«ä¼˜åŒ– è¿˜æ˜¯ä¸ä¼šè¢«ä¼˜åŒ–å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1366588,"avatar":"https://static001.geekbang.org/account/avatar/00/14/da/3c/6ca50139.jpg","nickname":"Arthur king å¾®ä¿¡è¶…ç´šæœƒå“¡","note":"","ucode":"79637F55F0ED85","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627528,"discussion_content":"é€šè¿‡é€ƒé€¸åˆ†æï¼ŒJVMå¯ä»¥çŸ¥é“ä¸€ä¸ªå¯¹è±¡çš„ä½¿ç”¨èŒƒå›´ï¼Œä»è€Œç¡®å®šè¯¥å¯¹è±¡æ˜¯å¦å¯ä»¥&#34;é€ƒé€¸&#34;å‡ºæ–¹æ³•æˆ–çº¿ç¨‹ç­‰ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡åªèƒ½ä»åˆ›å»ºå®ƒçš„çº¿ç¨‹è®¿é—®ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨æ ˆä¸Šåˆ†é…å®ƒçš„å†…å­˜ï¼Œè€Œä¸æ˜¯åœ¨å †ä¸Šã€‚è¿™æ ·å¯ä»¥é¿å…åç»­çš„åƒåœ¾å›æ”¶ã€‚å¯¹äºä¸Šé¢çš„ä»£ç ï¼Œç»è¿‡é€ƒé€¸åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° `food` å¯¹è±¡åªåœ¨ `main` å‡½æ•°ä¸­ä½¿ç”¨ï¼Œå®ƒæ²¡æœ‰è¢«è¿”å›æˆ–è€…æ²¡æœ‰è¢«å…¶ä»–çº¿ç¨‹å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒçš„&#34;ä½¿ç”¨èŒƒå›´&#34;ä»…é™äºå½“å‰çº¿ç¨‹ã€‚å› æ­¤ï¼ŒJVMå°±å¯ä»¥ç›´æ¥åœ¨æ ˆä¸Šåˆ†é… `food` å¯¹è±¡çš„å†…å­˜ï¼Œä»è€Œæé«˜ç¨‹åºæ€§èƒ½ã€‚è¿™æ˜¯é€ƒé€¸åˆ†æçš„åŸºæœ¬æ€æƒ³ï¼Œä¸è¿‡åœ¨å®é™…çš„JVMå®ç°ä¸­ï¼Œè¿™ç§ä¼˜åŒ–å¯èƒ½å¹¶ä¸ä¼šå‘ç”Ÿï¼Œå› ä¸ºåªæœ‰å½“å¯¹è±¡çš„å¤§å°å’Œå­˜æ´»æ—¶é—´ç¬¦åˆä¸€å®šçš„æ¡ä»¶æ—¶ï¼Œæ‰ä¼šå°†å¯¹è±¡çš„å†…å­˜åˆ†é…ä»å †è½¬ç§»åˆ°æ ˆã€‚ä¸Šè¿°ä»£ç åªæ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå®é™…ä¸ŠJVMçš„å‘ç°è¿‡ç¨‹å¯èƒ½æ¯”è¿™ä¸ªè¦å¤æ‚å¾—å¤šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694240627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":380187,"user_name":"å­¦æ— æ¶¯","can_delete":false,"product_type":"c1","uid":1254493,"ip_address":"åŒ—äº¬","ucode":"252754F9FCFF0C","user_header":"https://static001.geekbang.org/account/avatar/00/13/24/5d/65e61dcb.jpg","comment_is_top":false,"comment_ctime":1693185467,"is_pvip":false,"replies":[{"id":138457,"content":"1. å³°å€¼ååï¼šAOTåœ¨è¿è¡Œæ—¶èƒ½å¤Ÿå¿«é€Ÿè·å–å’Œæ‰§è¡Œä»£ç ï¼Œå®ƒçš„æ‰§è¡Œé€Ÿåº¦æ¯”JITå¿«ã€‚ã€ä¸€æ®µæ—¶é—´å†…ååé‡çš„æœ€å¤§å€¼ï¼Œååé‡è¶Šé«˜ï¼Œæ€§èƒ½è¶Šå¥½ï¼Œæ‰€ä»¥å›¾ç‰‡æ˜¾ç¤ºAOTçš„æ¡æ¯”JITé•¿ã€‘\n2. ç¼–è¯‘æ—¶é—´ï¼šå› ä¸ºæ˜¯å³æ—¶ç¼–è¯‘ï¼Œæ‰€ä»¥JITæ¯”AOTæ›´å¿«ã€‚\n3. åŒ…å¤§å°ï¼šå› ä¸ºAOTç¼–è¯‘å™¨éœ€è¦å°†æ•´ä¸ªåº”ç”¨ç¨‹åºç¼–è¯‘æˆå¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ‰€ä»¥AOTçš„åŒ…å¤§å°è¦æ¯”JITå¤§ã€‚\n\nå¯èƒ½è¿™å¼ å›¾ç‰‡ä¼šè®©äººäº§ç”Ÿä¸€äº›è¯¯è§£ï¼Œè°¢è°¢ä½ çš„åé¦ˆï¼Œæˆ‘ä»¬è°ƒæ•´ä¸€ä¸‹ğŸŒ¹","user_name":"ç¼–è¾‘å›å¤","user_name_real":"ç¼–è¾‘","uid":2843479,"ctime":1693194287,"ip_address":"åŒ—äº¬","comment_id":380187,"utype":2}],"discussion_count":0,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"çœ‹è€å¸ˆå‘çš„jitå¯¹æ¯”aotçš„å›¾ï¼Œå¥½åƒaoté™¤äº†å¯åŠ¨æ—¶é—´ï¼Œå…¶ä»–æ–¹é¢éƒ½ä¸å¦‚jitï¼Œæ˜¯æˆ‘ç†è§£é”™äº†å—ï¼Ÿ","like_count":2},{"had_liked":false,"id":381222,"user_name":"å¼ ç”³å‚²","can_delete":false,"product_type":"c1","uid":1182372,"ip_address":"åŒ—äº¬","ucode":"22D46BC529BA8A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0a/a4/828a431f.jpg","comment_is_top":false,"comment_ctime":1694833863,"is_pvip":false,"replies":[{"id":139140,"content":"ä¸»æµçš„ JVM å®ç°ï¼Œå¦‚ HotSpotï¼Œè¿˜æ˜¯é¦–å…ˆä¼˜å…ˆæ”¯æŒ JIT ç¼–è¯‘ï¼Œåªæœ‰åœ¨ç‰¹å®šçš„åœºæ™¯ä¸‹æ‰ä¼šè€ƒè™‘ä½¿ç”¨ AOT ç¼–è¯‘ï¼Œå› æ­¤ï¼ŒSkyWalking åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹åº”è¯¥æ˜¯å¯ä»¥æ­£å¸¸ä½¿ç”¨çš„ã€‚ä½†å¦‚æœåœ¨ä½ çš„åº”ç”¨ä¸­å¯ç”¨äº† AOT ç¼–è¯‘ï¼Œå¹¶ä¸”å‘ç° SkyWalking æ— æ³•æ­£ç¡®å·¥ä½œï¼Œé‚£ä¹ˆä½ å¯èƒ½éœ€è¦è€ƒè™‘å…³é—­ AOT ç¼–è¯‘ï¼Œæˆ–è€…å¯»æ‰¾å…¶ä»–çš„è§£å†³æ–¹æ¡ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1366588,"ctime":1696516094,"ip_address":"åŒ—äº¬","comment_id":381222,"utype":1}],"discussion_count":1,"race_medal":2,"score":2,"product_id":100613601,"comment_content":"è¯·æ•™è€å¸ˆï¼Œä½¿ç”¨ AOT ä¹‹åï¼Œä¸€äº›åŸºäºå­—èŠ‚ç å¢å¼ºæŠ€æœ¯çš„æ¡†æ¶æ˜¯ä¸æ˜¯ä¹Ÿæ— æ³•æ”¯æŒäº†ï¼Œæ¯”å¦‚ SkyWalkingï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1366588,"avatar":"https://static001.geekbang.org/account/avatar/00/14/da/3c/6ca50139.jpg","nickname":"Arthur king å¾®ä¿¡è¶…ç´šæœƒå“¡","note":"","ucode":"79637F55F0ED85","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629024,"discussion_content":"ä¸»æµçš„ JVM å®ç°ï¼Œå¦‚ HotSpotï¼Œè¿˜æ˜¯é¦–å…ˆä¼˜å…ˆæ”¯æŒ JIT ç¼–è¯‘ï¼Œåªæœ‰åœ¨ç‰¹å®šçš„åœºæ™¯ä¸‹æ‰ä¼šè€ƒè™‘ä½¿ç”¨ AOT ç¼–è¯‘ï¼Œå› æ­¤ï¼ŒSkyWalking åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹åº”è¯¥æ˜¯å¯ä»¥æ­£å¸¸ä½¿ç”¨çš„ã€‚ä½†å¦‚æœåœ¨ä½ çš„åº”ç”¨ä¸­å¯ç”¨äº† AOT ç¼–è¯‘ï¼Œå¹¶ä¸”å‘ç° SkyWalking æ— æ³•æ­£ç¡®å·¥ä½œï¼Œé‚£ä¹ˆä½ å¯èƒ½éœ€è¦è€ƒè™‘å…³é—­ AOT ç¼–è¯‘ï¼Œæˆ–è€…å¯»æ‰¾å…¶ä»–çš„è§£å†³æ–¹æ¡ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1696516094,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":380773,"user_name":"å°é£åŒå­¦","can_delete":false,"product_type":"c1","uid":1232599,"ip_address":"æµ™æ±Ÿ","ucode":"1F89B1BA1EEF52","user_header":"https://static001.geekbang.org/account/avatar/00/12/ce/d7/074920d5.jpg","comment_is_top":false,"comment_ctime":1694133983,"is_pvip":false,"replies":[{"id":138650,"content":"Ahead-of-Timeï¼ˆAOTï¼‰ç¼–è¯‘å¹¶æ²¡æœ‰å®Œå…¨æ›¿ä»£Just-in-Timeï¼ˆJITï¼‰ç¼–è¯‘ï¼Œè€Œæ˜¯å’ŒJITç¼–è¯‘ç»“åˆåœ¨ä¸€èµ·æ¥ä½¿ç”¨ã€‚AOTç¼–è¯‘å’ŒJITç¼–è¯‘å„æœ‰ä¼˜ç¼ºç‚¹ã€‚ä¾‹å¦‚ï¼ŒAOTç¼–è¯‘çš„ä¼˜ç‚¹åœ¨äºå®ƒå¯ä»¥åœ¨åº”ç”¨ç¨‹åºè¿è¡Œå‰è¿›è¡Œï¼Œä»è€Œå‡å°‘äº†åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶çš„å»¶è¿Ÿã€‚å¦ä¸€æ–¹é¢ï¼Œå®ƒçš„ç¼ºç‚¹æ˜¯ï¼Œç”±äºå®ƒä¸èƒ½åˆ©ç”¨åˆ°è¿è¡Œæ—¶çš„ä¿¡æ¯ï¼Œä¾‹å¦‚è¿è¡Œæ—¶çš„ç±»å‹ä¿¡æ¯å’Œçƒ­ç‚¹ä»£ç ä¿¡æ¯ç­‰ï¼Œå› æ­¤å®ƒå¾€å¾€æ— æ³•è¾¾åˆ°JITç¼–è¯‘é‚£æ ·çš„ä¼˜åŒ–ç¨‹åº¦ã€‚å› æ­¤ï¼Œç›®å‰çš„JVMå®ç°å¾€å¾€ç»“åˆä½¿ç”¨AOTç¼–è¯‘å’ŒJITç¼–è¯‘ï¼Œä»¥ä¾¿åŒæ—¶åˆ©ç”¨äºŒè€…çš„ä¼˜ç‚¹ã€‚ä¸€èˆ¬çš„åšæ³•æ˜¯ï¼Œåœ¨åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œå…ˆä½¿ç”¨AOTç¼–è¯‘ç”Ÿæˆçš„ä»£ç ï¼Œç„¶ååœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œé€šè¿‡JITç¼–è¯‘å¯¹çƒ­ç‚¹ä»£ç è¿›è¡Œæ›´æ·±åº¦çš„ä¼˜åŒ–ã€‚è¿™ç§åšæ³•æ—¢å¯ä»¥å‡å°‘åº”ç”¨ç¨‹åºçš„å¯åŠ¨å»¶è¿Ÿï¼Œåˆå¯ä»¥ä¿è¯åº”ç”¨ç¨‹åºè¿è¡Œæ—¶çš„é«˜æ•ˆæ€§èƒ½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1366588,"ctime":1694232178,"ip_address":"åŒ—äº¬","comment_id":380773,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"é‚£ä¸ºå•¥ä¸ç›´æ¥ç”¨aotç›´æ¥å°†å­—èŠ‚ç è½¬æ¢ä¸ºæœºå™¨ç ï¼Ÿjitç¼–è¯‘å™¨æ„Ÿè§‰å¯ä»¥åºŸå¼ƒäº†","like_count":1,"discussions":[{"author":{"id":1366588,"avatar":"https://static001.geekbang.org/account/avatar/00/14/da/3c/6ca50139.jpg","nickname":"Arthur king å¾®ä¿¡è¶…ç´šæœƒå“¡","note":"","ucode":"79637F55F0ED85","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627523,"discussion_content":"Ahead-of-Timeï¼ˆAOTï¼‰ç¼–è¯‘å¹¶æ²¡æœ‰å®Œå…¨æ›¿ä»£Just-in-Timeï¼ˆJITï¼‰ç¼–è¯‘ï¼Œè€Œæ˜¯å’ŒJITç¼–è¯‘ç»“åˆåœ¨ä¸€èµ·æ¥ä½¿ç”¨ã€‚AOTç¼–è¯‘å’ŒJITç¼–è¯‘å„æœ‰ä¼˜ç¼ºç‚¹ã€‚ä¾‹å¦‚ï¼ŒAOTç¼–è¯‘çš„ä¼˜ç‚¹åœ¨äºå®ƒå¯ä»¥åœ¨åº”ç”¨ç¨‹åºè¿è¡Œå‰è¿›è¡Œï¼Œä»è€Œå‡å°‘äº†åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶çš„å»¶è¿Ÿã€‚å¦ä¸€æ–¹é¢ï¼Œå®ƒçš„ç¼ºç‚¹æ˜¯ï¼Œç”±äºå®ƒä¸èƒ½åˆ©ç”¨åˆ°è¿è¡Œæ—¶çš„ä¿¡æ¯ï¼Œä¾‹å¦‚è¿è¡Œæ—¶çš„ç±»å‹ä¿¡æ¯å’Œçƒ­ç‚¹ä»£ç ä¿¡æ¯ç­‰ï¼Œå› æ­¤å®ƒå¾€å¾€æ— æ³•è¾¾åˆ°JITç¼–è¯‘é‚£æ ·çš„ä¼˜åŒ–ç¨‹åº¦ã€‚å› æ­¤ï¼Œç›®å‰çš„JVMå®ç°å¾€å¾€ç»“åˆä½¿ç”¨AOTç¼–è¯‘å’ŒJITç¼–è¯‘ï¼Œä»¥ä¾¿åŒæ—¶åˆ©ç”¨äºŒè€…çš„ä¼˜ç‚¹ã€‚ä¸€èˆ¬çš„åšæ³•æ˜¯ï¼Œåœ¨åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œå…ˆä½¿ç”¨AOTç¼–è¯‘ç”Ÿæˆçš„ä»£ç ï¼Œç„¶ååœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œé€šè¿‡JITç¼–è¯‘å¯¹çƒ­ç‚¹ä»£ç è¿›è¡Œæ›´æ·±åº¦çš„ä¼˜åŒ–ã€‚è¿™ç§åšæ³•æ—¢å¯ä»¥å‡å°‘åº”ç”¨ç¨‹åºçš„å¯åŠ¨å»¶è¿Ÿï¼Œåˆå¯ä»¥ä¿è¯åº”ç”¨ç¨‹åºè¿è¡Œæ—¶çš„é«˜æ•ˆæ€§èƒ½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694232178,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":381195,"user_name":"å°éº¦","can_delete":false,"product_type":"c1","uid":1216881,"ip_address":"å¹¿ä¸œ","ucode":"55C7199A0D5659","user_header":"https://static001.geekbang.org/account/avatar/00/12/91/71/0b16655d.jpg","comment_is_top":false,"comment_ctime":1694771092,"is_pvip":false,"replies":[{"id":139135,"content":"è¿™ä¸¤ç§æŠ€æœ¯å„æœ‰ä¼˜åŠ¿ï¼Œä¹Ÿå„æœ‰åŠ£åŠ¿ã€‚å¯¹äºJITï¼Œæ¯æ¬¡ç¨‹åºå¯åŠ¨æ—¶éƒ½éœ€è¦èŠ±è´¹æ—¶é—´è¿›è¡Œç¼–è¯‘ï¼Œç”šè‡³åœ¨è¿è¡Œæ—¶ä¹Ÿéœ€è¦ä¸æ–­ç¼–è¯‘æ–°å‘ç°çš„çƒ­ç‚¹ä»£ç ã€‚è€ŒAOTè™½ç„¶å¯ä»¥é¿å…è¿è¡Œæ—¶ç¼–è¯‘å¸¦æ¥çš„å»¶è¿Ÿï¼Œä½†æ˜¯å› ä¸ºæ— æ³•åˆ©ç”¨è¿è¡Œæ—¶ä¿¡æ¯è¿›è¡Œä¼˜åŒ–ï¼Œæ‰€ä»¥å…¶ç”Ÿæˆçš„ä»£ç çš„æ•ˆç‡å¾€å¾€ä¸å¦‚JITã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬èƒ½å¤Ÿæ‰¾åˆ°ä¸€ç§æ–¹æ³•ï¼Œåˆ©ç”¨è¿è¡Œæ—¶çš„ä¿¡æ¯è¿›è¡ŒAOTç¼–è¯‘ï¼Œé‚£ä¹ˆå°±å¯ä»¥æŠŠä¸¤è€…çš„ä¼˜åŠ¿ç»“åˆèµ·æ¥ã€‚è¿™å°±æ˜¯JVMå°†å­—èŠ‚ç ä¸AOTç¼–è¯‘ç›¸ç»“åˆçš„åŸå› ï¼šå®ƒå…ˆä½¿ç”¨JITç¼–è¯‘å™¨è¿›è¡Œç¼–è¯‘ï¼Œæ‰¾å‡ºçƒ­ç‚¹ä»£ç å¹¶è¿›è¡Œä¼˜åŒ–ï¼Œç„¶åæŠŠè¿™äº›ä¿¡æ¯ä¼ é€’ç»™AOTç¼–è¯‘å™¨ï¼Œè®©å®ƒå¯¹å­—èŠ‚ç è¿›è¡Œè¿›ä¸€æ­¥çš„ä¼˜åŒ–ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬æ—¢å¯ä»¥åˆ©ç”¨è¿è¡Œæ—¶çš„ä¿¡æ¯è¿›è¡Œä¼˜åŒ–ï¼Œè·å¾—é«˜æ•ˆçš„æœºå™¨ç ï¼Œåˆå¯ä»¥é¿å…è¿è¡Œæ—¶ç¼–è¯‘å¸¦æ¥çš„å»¶è¿Ÿï¼Œä»è€Œå®ç°æ›´å¿«çš„ç¨‹åºå¯åŠ¨å’Œæ‰§è¡Œé€Ÿåº¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1366588,"ctime":1696515519,"ip_address":"åŒ—äº¬","comment_id":381195,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"ä¸ºäº†ä» JIT è¿‡æ¸¡åˆ° AOTï¼ŒJVM å°†å­—èŠ‚ç ä¸ AOT ç¼–è¯‘ç›¸ç»“åˆã€‚åœ¨ JIT ç¼–è¯‘è¿è¡Œæ—¶ï¼ŒJVM ä¼šç›‘è§†ä»£ç çš„æ‰§è¡Œæƒ…å†µå¹¶æ”¶é›†ç›¸å…³çš„è¿è¡Œæ—¶ä¿¡æ¯ï¼Œç„¶åå°†è¿™äº›ä¿¡æ¯ä¼ é€’ç»™ AOT ç¼–è¯‘å™¨ã€‚AOT ç¼–è¯‘å™¨ä¼šåˆ©ç”¨è¿™äº›ä¿¡æ¯å¯¹å­—èŠ‚ç è¿›è¡Œä¼˜åŒ–ï¼Œå¹¶ç”Ÿæˆå¯æ‰§è¡Œçš„æœ¬åœ°æœºå™¨ä»£ç ã€‚è¿™æ ·ï¼Œå½“ç›¸åŒçš„ä»£ç å†æ¬¡æ‰§è¡Œæ—¶ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ AOT ç¼–è¯‘å¾—åˆ°çš„æœºå™¨ä»£ç ï¼Œè€Œæ— éœ€å†æ¬¡å¯åŠ¨ JIT ç¼–è¯‘ã€‚\n\nä»æ­¤æè¿°ä¸­ï¼Œæ²¡çœ‹å‡ºåœ¨ JIT ç¼–è¯‘å™¨è¯†åˆ«å‡ºçƒ­ç‚¹ä»£ç åï¼Œäº¤ç»™ AOT ç¼–è¯‘å™¨çš„å¥½å¤„æ˜¯ä»€ä¹ˆ","like_count":0,"discussions":[{"author":{"id":1366588,"avatar":"https://static001.geekbang.org/account/avatar/00/14/da/3c/6ca50139.jpg","nickname":"Arthur king å¾®ä¿¡è¶…ç´šæœƒå“¡","note":"","ucode":"79637F55F0ED85","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629019,"discussion_content":"è¿™ä¸¤ç§æŠ€æœ¯å„æœ‰ä¼˜åŠ¿ï¼Œä¹Ÿå„æœ‰åŠ£åŠ¿ã€‚å¯¹äºJITï¼Œæ¯æ¬¡ç¨‹åºå¯åŠ¨æ—¶éƒ½éœ€è¦èŠ±è´¹æ—¶é—´è¿›è¡Œç¼–è¯‘ï¼Œç”šè‡³åœ¨è¿è¡Œæ—¶ä¹Ÿéœ€è¦ä¸æ–­ç¼–è¯‘æ–°å‘ç°çš„çƒ­ç‚¹ä»£ç ã€‚è€ŒAOTè™½ç„¶å¯ä»¥é¿å…è¿è¡Œæ—¶ç¼–è¯‘å¸¦æ¥çš„å»¶è¿Ÿï¼Œä½†æ˜¯å› ä¸ºæ— æ³•åˆ©ç”¨è¿è¡Œæ—¶ä¿¡æ¯è¿›è¡Œä¼˜åŒ–ï¼Œæ‰€ä»¥å…¶ç”Ÿæˆçš„ä»£ç çš„æ•ˆç‡å¾€å¾€ä¸å¦‚JITã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬èƒ½å¤Ÿæ‰¾åˆ°ä¸€ç§æ–¹æ³•ï¼Œåˆ©ç”¨è¿è¡Œæ—¶çš„ä¿¡æ¯è¿›è¡ŒAOTç¼–è¯‘ï¼Œé‚£ä¹ˆå°±å¯ä»¥æŠŠä¸¤è€…çš„ä¼˜åŠ¿ç»“åˆèµ·æ¥ã€‚è¿™å°±æ˜¯JVMå°†å­—èŠ‚ç ä¸AOTç¼–è¯‘ç›¸ç»“åˆçš„åŸå› ï¼šå®ƒå…ˆä½¿ç”¨JITç¼–è¯‘å™¨è¿›è¡Œç¼–è¯‘ï¼Œæ‰¾å‡ºçƒ­ç‚¹ä»£ç å¹¶è¿›è¡Œä¼˜åŒ–ï¼Œç„¶åæŠŠè¿™äº›ä¿¡æ¯ä¼ é€’ç»™AOTç¼–è¯‘å™¨ï¼Œè®©å®ƒå¯¹å­—èŠ‚ç è¿›è¡Œè¿›ä¸€æ­¥çš„ä¼˜åŒ–ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬æ—¢å¯ä»¥åˆ©ç”¨è¿è¡Œæ—¶çš„ä¿¡æ¯è¿›è¡Œä¼˜åŒ–ï¼Œè·å¾—é«˜æ•ˆçš„æœºå™¨ç ï¼Œåˆå¯ä»¥é¿å…è¿è¡Œæ—¶ç¼–è¯‘å¸¦æ¥çš„å»¶è¿Ÿï¼Œä»è€Œå®ç°æ›´å¿«çš„ç¨‹åºå¯åŠ¨å’Œæ‰§è¡Œé€Ÿåº¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1696515519,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1182516,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0b/34/f41d73a4.jpg","nickname":"ç‹ç››æ­¦","note":"","ucode":"DE7EF246D3DCE8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630166,"discussion_content":"@è€å¸ˆ è¿™ä¸ªæœŸæœ› æ˜¯å¦‚æœï¼Ÿè¿˜æ˜¯å·²ç»å®ç°äº†å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698143541,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1136480,"avatar":"https://static001.geekbang.org/account/avatar/00/11/57/60/65b006a6.jpg","nickname":"Chief","note":"","ucode":"CAFB24CBA215A8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629781,"discussion_content":"ç£¨åˆ€ä¸è¯¯ç æŸ´å·¥ï¼ŒAOTå°±æ˜¯æå‰ç£¨åˆ€ï¼ŒJITæ˜¯è¿è¡Œæ—¶æ‹¿åˆ€ç£¨ï¼ˆç¼“å­˜åå°±æ˜¯ç£¨å¥½çš„åˆ€ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1697622447,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":380655,"user_name":"geektime_zpf","can_delete":false,"product_type":"c1","uid":1041743,"ip_address":"å¹¿ä¸œ","ucode":"FD61BCAD02CA54","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e5/4f/731ef2c1.jpg","comment_is_top":false,"comment_ctime":1693959536,"is_pvip":true,"replies":[{"id":138655,"content":"JIT ç¼–è¯‘å™¨åœ¨è¿è¡Œæ—¶æ”¶é›†çš„ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ä¸€äº›å†…éƒ¨æœºåˆ¶ä¼ é€’ç»™ AOT ç¼–è¯‘å™¨ï¼Œç”¨äºå¯¹å­—èŠ‚ç è¿›è¡Œä¼˜åŒ–ã€‚å…·ä½“æ¥è¯´ï¼Œè¿™ä¸ªä¼ é€’çš„è¿‡ç¨‹å¯èƒ½æ˜¯é€šè¿‡ JIT ç¼–è¯‘å™¨å°†ä¿¡æ¯å­˜å‚¨åœ¨ä¸€äº›ç‰¹å®šçš„æ•°æ®ç»“æ„ä¸­ï¼Œè¿™äº›æ•°æ®ç»“æ„å¯ä»¥è¢« AOT ç¼–è¯‘å™¨è¯»å–ã€‚ä¹Ÿå¯èƒ½æ˜¯é€šè¿‡ JVM æä¾›çš„ä¸€äº› APIï¼Œå…è®¸ AOT ç¼–è¯‘å™¨æŸ¥è¯¢ JIT ç¼–è¯‘å™¨çš„ä¿¡æ¯ã€‚ç„¶åï¼ŒAOT ç¼–è¯‘å™¨å°±å¯ä»¥åˆ©ç”¨è¿™äº›ä¿¡æ¯è¿›è¡Œä¼˜åŒ–äº†ã€‚\nä¾‹å¦‚ï¼Œå¦‚æœ JIT ç¼–è¯‘å™¨æ”¶é›†åˆ°çš„ä¿¡æ¯æ˜¾ç¤ºæŸä¸ªæ–¹æ³•è¢«é¢‘ç¹è°ƒç”¨ï¼Œé‚£ä¹ˆ AOT ç¼–è¯‘å™¨å°±å¯èƒ½ä¼šé’ˆå¯¹è¿™ä¸ªæ–¹æ³•è¿›è¡Œç‰¹åˆ«çš„ä¼˜åŒ–ï¼Œä½¿å…¶è¿è¡Œæ›´å¿«åœ°ä¼˜åŒ–æ–¹æ³•çš„æ‰§è¡Œï¼ˆæ¯”å¦‚ï¼Œä½¿ç”¨å†…è”ã€å¾ªç¯å±•å¼€ã€å»é™¤æ­»ä»£ç ç­‰æ‰‹æ®µï¼‰ï¼Œå¹¶æŠŠä¼˜åŒ–åçš„ä»£ç ç¼“å­˜èµ·æ¥ï¼Œä¸‹æ¬¡ç›´æ¥ä½¿ç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1366588,"ctime":1694240998,"ip_address":"åŒ—äº¬","comment_id":380655,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"â€œä¸ºäº†ä» JIT è¿‡æ¸¡åˆ° AOTï¼ŒJVM å°†å­—èŠ‚ç ä¸ AOT ç¼–è¯‘ç›¸ç»“åˆã€‚åœ¨ JIT ç¼–è¯‘è¿è¡Œæ—¶ï¼ŒJVM ä¼šç›‘è§†ä»£ç çš„æ‰§è¡Œæƒ…å†µå¹¶æ”¶é›†ç›¸å…³çš„è¿è¡Œæ—¶ä¿¡æ¯ï¼Œç„¶åå°†è¿™äº›ä¿¡æ¯ä¼ é€’ç»™ AOT ç¼–è¯‘å™¨ã€‚AOT ç¼–è¯‘å™¨ä¼šåˆ©ç”¨è¿™äº›ä¿¡æ¯å¯¹å­—èŠ‚ç è¿›è¡Œä¼˜åŒ–ï¼Œå¹¶ç”Ÿæˆå¯æ‰§è¡Œçš„æœ¬åœ°æœºå™¨ä»£ç ã€‚â€ï¼Œè€å¸ˆå¥½ï¼Œæ–‡ä¸­è¿™å‡ å¥ä¸ç†è§£ï¼Œjitæ”¶é›†çš„è¿è¡Œæ—¶ä¿¡æ¯ï¼Œæ€æ ·ä¼ é€’ç»™aotï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1366588,"avatar":"https://static001.geekbang.org/account/avatar/00/14/da/3c/6ca50139.jpg","nickname":"Arthur king å¾®ä¿¡è¶…ç´šæœƒå“¡","note":"","ucode":"79637F55F0ED85","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627529,"discussion_content":"JIT ç¼–è¯‘å™¨åœ¨è¿è¡Œæ—¶æ”¶é›†çš„ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ä¸€äº›å†…éƒ¨æœºåˆ¶ä¼ é€’ç»™ AOT ç¼–è¯‘å™¨ï¼Œç”¨äºå¯¹å­—èŠ‚ç è¿›è¡Œä¼˜åŒ–ã€‚å…·ä½“æ¥è¯´ï¼Œè¿™ä¸ªä¼ é€’çš„è¿‡ç¨‹å¯èƒ½æ˜¯é€šè¿‡ JIT ç¼–è¯‘å™¨å°†ä¿¡æ¯å­˜å‚¨åœ¨ä¸€äº›ç‰¹å®šçš„æ•°æ®ç»“æ„ä¸­ï¼Œè¿™äº›æ•°æ®ç»“æ„å¯ä»¥è¢« AOT ç¼–è¯‘å™¨è¯»å–ã€‚ä¹Ÿå¯èƒ½æ˜¯é€šè¿‡ JVM æä¾›çš„ä¸€äº› APIï¼Œå…è®¸ AOT ç¼–è¯‘å™¨æŸ¥è¯¢ JIT ç¼–è¯‘å™¨çš„ä¿¡æ¯ã€‚ç„¶åï¼ŒAOT ç¼–è¯‘å™¨å°±å¯ä»¥åˆ©ç”¨è¿™äº›ä¿¡æ¯è¿›è¡Œä¼˜åŒ–äº†ã€‚\nä¾‹å¦‚ï¼Œå¦‚æœ JIT ç¼–è¯‘å™¨æ”¶é›†åˆ°çš„ä¿¡æ¯æ˜¾ç¤ºæŸä¸ªæ–¹æ³•è¢«é¢‘ç¹è°ƒç”¨ï¼Œé‚£ä¹ˆ AOT ç¼–è¯‘å™¨å°±å¯èƒ½ä¼šé’ˆå¯¹è¿™ä¸ªæ–¹æ³•è¿›è¡Œç‰¹åˆ«çš„ä¼˜åŒ–ï¼Œä½¿å…¶è¿è¡Œæ›´å¿«åœ°ä¼˜åŒ–æ–¹æ³•çš„æ‰§è¡Œï¼ˆæ¯”å¦‚ï¼Œä½¿ç”¨å†…è”ã€å¾ªç¯å±•å¼€ã€å»é™¤æ­»ä»£ç ç­‰æ‰‹æ®µï¼‰ï¼Œå¹¶æŠŠä¼˜åŒ–åçš„ä»£ç ç¼“å­˜èµ·æ¥ï¼Œä¸‹æ¬¡ç›´æ¥ä½¿ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694240998,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":380298,"user_name":"Levi","can_delete":false,"product_type":"c1","uid":2221236,"ip_address":"åŒ—äº¬","ucode":"F804879872BB76","user_header":"https://static001.geekbang.org/account/avatar/00/21/e4/b4/889954ca.jpg","comment_is_top":false,"comment_ctime":1693323821,"is_pvip":false,"replies":[{"id":138656,"content":"å¦‚æœåœ¨å®šä¹‰ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œç”¨finalå…³é”®å­—æ¥ä¿®é¥°å®ƒï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡ä¸€æ—¦è¢«åˆå§‹åŒ–åå°±ä¸èƒ½å†è¢«ä¿®æ”¹ï¼Œå®ƒçš„å†…éƒ¨çŠ¶æ€æ˜¯ä¸å¯å˜çš„ã€‚è¿™æ ·ï¼ŒJITç¼–è¯‘å™¨åœ¨è¿›è¡Œé€ƒé€¸åˆ†ææ—¶ï¼Œå°±å¯ä»¥æ›´å‡†ç¡®åœ°åˆ¤æ–­å‡ºå“ªäº›å¯¹è±¡æ²¡æœ‰å‘ç”Ÿé€ƒé€¸ï¼Œç„¶åå¯¹å®ƒä»¬è¿›è¡Œä¼˜åŒ–ï¼Œæå‡ç¨‹åºçš„è¿è¡Œæ•ˆç‡ã€‚ ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1366588,"ctime":1694241251,"ip_address":"åŒ—äº¬","comment_id":380298,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"ä½¿ç”¨ final å…³é”®å­—æ¥é™åˆ¶å¯¹è±¡çš„å¯å˜æ€§ï¼Œè¿™æ · JIT ç¼–è¯‘å™¨æ›´å®¹æ˜“è¿›è¡Œé€ƒé€¸åˆ†æå’Œä¼˜åŒ–ã€‚\nè€å¸ˆè¿™å¥è¯ä¸å¤ªç†è§£ï¼Œèƒ½è§£é‡Šä¸€ä¸‹å—è¯·é—®","like_count":0,"discussions":[{"author":{"id":1366588,"avatar":"https://static001.geekbang.org/account/avatar/00/14/da/3c/6ca50139.jpg","nickname":"Arthur king å¾®ä¿¡è¶…ç´šæœƒå“¡","note":"","ucode":"79637F55F0ED85","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627530,"discussion_content":"å¦‚æœåœ¨å®šä¹‰ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œç”¨finalå…³é”®å­—æ¥ä¿®é¥°å®ƒï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡ä¸€æ—¦è¢«åˆå§‹åŒ–åå°±ä¸èƒ½å†è¢«ä¿®æ”¹ï¼Œå®ƒçš„å†…éƒ¨çŠ¶æ€æ˜¯ä¸å¯å˜çš„ã€‚è¿™æ ·ï¼ŒJITç¼–è¯‘å™¨åœ¨è¿›è¡Œé€ƒé€¸åˆ†ææ—¶ï¼Œå°±å¯ä»¥æ›´å‡†ç¡®åœ°åˆ¤æ–­å‡ºå“ªäº›å¯¹è±¡æ²¡æœ‰å‘ç”Ÿé€ƒé€¸ï¼Œç„¶åå¯¹å®ƒä»¬è¿›è¡Œä¼˜åŒ–ï¼Œæå‡ç¨‹åºçš„è¿è¡Œæ•ˆç‡ã€‚ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694241251,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":380227,"user_name":"peter","can_delete":false,"product_type":"c1","uid":1058183,"ip_address":"æ²³å—","ucode":"261C3FC001DE2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg","comment_is_top":false,"comment_ctime":1693232064,"is_pvip":false,"replies":[{"id":138657,"content":" A1ï¼šAOTï¼ˆAhead-of-Time Compilationï¼‰æ˜¯æŒ‡åœ¨è¿è¡Œç¨‹åºä¹‹å‰ï¼Œå°±å·²ç»å°†ä»£ç å®Œå…¨ç¼–è¯‘æˆæœ¬åœ°æœºå™¨ç ï¼Œæ‰€ä»¥çš„ç¡®ä¸»è¦å…³æ³¨çš„æ˜¯ç¼–è¯‘æ—¶ã€‚ç„¶è€Œï¼Œè¿è¡Œæ—¶çš„ä¸€äº›ç›¸å…³ç‰¹æ€§ï¼ˆæ¯”å¦‚åå°„ï¼ŒåŠ¨æ€åŠ è½½ç­‰ï¼‰å¯èƒ½è¢«é™åˆ¶æˆ–è€…éœ€è¦ä¸€äº›ç‰¹æ®Šçš„å¤„ç†ã€‚\nA2ï¼šæ˜¯çš„ï¼ŒAOTç¼–è¯‘éœ€è¦é€‰æ‹©ç›®æ ‡å¹³å°æˆ–è€…ç‰¹å®šçš„è¿è¡Œç¯å¢ƒã€‚å› ä¸ºå®ƒç›´æ¥å°†ä»£ç ç¼–è¯‘æˆç‰¹å®šå¹³å°çš„æœºå™¨ç ï¼Œæ‰€ä»¥éœ€è¦çŸ¥é“ç›®æ ‡å¹³å°çš„ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿä¿¡æ¯ã€‚\nA3ï¼šAOTå¹¶ä¸å¿…é¡»å’ŒJITç»“åˆã€‚å®ƒä»¬æ˜¯ä¸¤ç§æˆªç„¶ä¸åŒçš„æŠ€æœ¯ï¼Œå„æœ‰å„çš„ä¼˜ç¼ºç‚¹ã€‚ä½†åœ¨ä¸€äº›å®ç°æ–¹æ¡ˆä¸­ï¼Œå®ƒä»¬å¯èƒ½ä¼šç»“åˆä½¿ç”¨ï¼Œæ¯”å¦‚åœ¨Javaçš„HotSpotè™šæ‹Ÿæœºä¸­ï¼Œå®ƒæ”¯æŒä¸€ç§æ··åˆæ¨¡å¼ï¼Œåœ¨ç¨‹åºå¯åŠ¨åˆæœŸä½¿ç”¨è§£é‡Šæ‰§è¡Œï¼Œç„¶åæ ¹æ®è¿è¡Œæ—¶çš„ä¿¡æ¯é€‰æ‹©çƒ­ç‚¹ä»£ç è¿›è¡ŒJITæˆ–AOTç¼–è¯‘ï¼Œä»¥æé«˜æ•ˆç‡ã€‚\nA4ï¼šåœ¨AOTå’ŒJITçš„å¯¹æ¯”ä¸­ï¼ŒAOTçš„ååé‡å¯èƒ½ä¼šå°äºJITã€‚å› ä¸ºAOTåœ¨ç¨‹åºè¿è¡Œå‰å°±å·²ç»è¿›è¡Œäº†å…¨éƒ¨ç¼–è¯‘ï¼Œåˆå§‹å¯åŠ¨æ—¶æ€§èƒ½è¾ƒå¥½ï¼Œä½†ç”±äºç¼ºä¹è¿è¡Œæ—¶ä¿¡æ¯ï¼Œå¯èƒ½æ— æ³•å¯¹ç‰¹å®šçš„è¿è¡Œæ—¶è¡Œä¸ºè¿›è¡Œä¼˜åŒ–ã€‚ç›¸åï¼ŒJITå¯ä»¥åœ¨è¿è¡Œæ—¶é’ˆå¯¹å®é™…ä»£ç çš„è¡Œä¸ºè¿›è¡Œä¼˜åŒ–ï¼Œå› æ­¤åœ¨è¿è¡Œä¸€æ®µæ—¶é—´åï¼Œå…¶æ€§èƒ½å¯èƒ½ä¼šä¼˜äºAOTï¼Œååé‡ä¹Ÿå°±ç›¸åº”æ›´é«˜ã€‚åŒæ—¶ï¼Œè¿™ä¸€ç‚¹ä¹Ÿä¼šå—åˆ°å®ç°æ–¹å¼ç­‰å¤šç§å› ç´ çš„å½±å“ï¼Œå¹¶ä¸æ˜¯ç»å¯¹çš„ã€‚ ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1366588,"ctime":1694241404,"ip_address":"åŒ—äº¬","comment_id":380227,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"è¯·æ•™è€å¸ˆå‡ ä¸ªé—®é¢˜å•Šï¼š\nQ1ï¼šAOTéš¾é“æ²¡æœ‰è¿è¡Œæ—¶å—ï¼Ÿ\næœ¬è¯¾çš„ç¬¬äºŒå¼ å›¾ï¼Œå°±æ˜¯ç¼–è¯‘çš„é‚£ä¸ªå›¾ï¼ŒAOTåªæœ‰ç¼–è¯‘æ—¶ï¼Œéš¾é“æ²¡æœ‰è¿è¡Œæ—¶å—ï¼Ÿ\nQ2ï¼šAOTæå‰ç¼–è¯‘ï¼Œç¼–è¯‘çš„æ—¶å€™éœ€è¦é€‰æ‹©ç›®æ ‡å¹³å°å—ï¼Ÿæ¯”å¦‚ï¼Œç›®æ ‡æ˜¯Linuxæˆ–Windowsã€‚\nQ3ï¼šAOTå¿…é¡»ä¸JITç»“åˆå—ï¼Ÿä»æ–‡ä¸­çœ‹ï¼Œå¥½åƒAOTæ˜¯åŸºäºJITæ‰èƒ½å·¥ä½œã€‚\nQ4ï¼šAOTä¸JITçš„å¯¹æ¯”å›¾ä¸­ï¼Œååé‡è¿™ä¸€é¡¹ï¼ŒAOTçš„æ¡æ¯”JITçš„çŸ­ï¼Œ\nè¿™ä¸ªæ­£ç¡®å—?","like_count":0,"discussions":[{"author":{"id":1366588,"avatar":"https://static001.geekbang.org/account/avatar/00/14/da/3c/6ca50139.jpg","nickname":"Arthur king å¾®ä¿¡è¶…ç´šæœƒå“¡","note":"","ucode":"79637F55F0ED85","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627531,"discussion_content":" A1ï¼šAOTï¼ˆAhead-of-Time Compilationï¼‰æ˜¯æŒ‡åœ¨è¿è¡Œç¨‹åºä¹‹å‰ï¼Œå°±å·²ç»å°†ä»£ç å®Œå…¨ç¼–è¯‘æˆæœ¬åœ°æœºå™¨ç ï¼Œæ‰€ä»¥çš„ç¡®ä¸»è¦å…³æ³¨çš„æ˜¯ç¼–è¯‘æ—¶ã€‚ç„¶è€Œï¼Œè¿è¡Œæ—¶çš„ä¸€äº›ç›¸å…³ç‰¹æ€§ï¼ˆæ¯”å¦‚åå°„ï¼ŒåŠ¨æ€åŠ è½½ç­‰ï¼‰å¯èƒ½è¢«é™åˆ¶æˆ–è€…éœ€è¦ä¸€äº›ç‰¹æ®Šçš„å¤„ç†ã€‚\nA2ï¼šæ˜¯çš„ï¼ŒAOTç¼–è¯‘éœ€è¦é€‰æ‹©ç›®æ ‡å¹³å°æˆ–è€…ç‰¹å®šçš„è¿è¡Œç¯å¢ƒã€‚å› ä¸ºå®ƒç›´æ¥å°†ä»£ç ç¼–è¯‘æˆç‰¹å®šå¹³å°çš„æœºå™¨ç ï¼Œæ‰€ä»¥éœ€è¦çŸ¥é“ç›®æ ‡å¹³å°çš„ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿä¿¡æ¯ã€‚\nA3ï¼šAOTå¹¶ä¸å¿…é¡»å’ŒJITç»“åˆã€‚å®ƒä»¬æ˜¯ä¸¤ç§æˆªç„¶ä¸åŒçš„æŠ€æœ¯ï¼Œå„æœ‰å„çš„ä¼˜ç¼ºç‚¹ã€‚ä½†åœ¨ä¸€äº›å®ç°æ–¹æ¡ˆä¸­ï¼Œå®ƒä»¬å¯èƒ½ä¼šç»“åˆä½¿ç”¨ï¼Œæ¯”å¦‚åœ¨Javaçš„HotSpotè™šæ‹Ÿæœºä¸­ï¼Œå®ƒæ”¯æŒä¸€ç§æ··åˆæ¨¡å¼ï¼Œåœ¨ç¨‹åºå¯åŠ¨åˆæœŸä½¿ç”¨è§£é‡Šæ‰§è¡Œï¼Œç„¶åæ ¹æ®è¿è¡Œæ—¶çš„ä¿¡æ¯é€‰æ‹©çƒ­ç‚¹ä»£ç è¿›è¡ŒJITæˆ–AOTç¼–è¯‘ï¼Œä»¥æé«˜æ•ˆç‡ã€‚\nA4ï¼šåœ¨AOTå’ŒJITçš„å¯¹æ¯”ä¸­ï¼ŒAOTçš„ååé‡å¯èƒ½ä¼šå°äºJITã€‚å› ä¸ºAOTåœ¨ç¨‹åºè¿è¡Œå‰å°±å·²ç»è¿›è¡Œäº†å…¨éƒ¨ç¼–è¯‘ï¼Œåˆå§‹å¯åŠ¨æ—¶æ€§èƒ½è¾ƒå¥½ï¼Œä½†ç”±äºç¼ºä¹è¿è¡Œæ—¶ä¿¡æ¯ï¼Œå¯èƒ½æ— æ³•å¯¹ç‰¹å®šçš„è¿è¡Œæ—¶è¡Œä¸ºè¿›è¡Œä¼˜åŒ–ã€‚ç›¸åï¼ŒJITå¯ä»¥åœ¨è¿è¡Œæ—¶é’ˆå¯¹å®é™…ä»£ç çš„è¡Œä¸ºè¿›è¡Œä¼˜åŒ–ï¼Œå› æ­¤åœ¨è¿è¡Œä¸€æ®µæ—¶é—´åï¼Œå…¶æ€§èƒ½å¯èƒ½ä¼šä¼˜äºAOTï¼Œååé‡ä¹Ÿå°±ç›¸åº”æ›´é«˜ã€‚åŒæ—¶ï¼Œè¿™ä¸€ç‚¹ä¹Ÿä¼šå—åˆ°å®ç°æ–¹å¼ç­‰å¤šç§å› ç´ çš„å½±å“ï¼Œå¹¶ä¸æ˜¯ç»å¯¹çš„ã€‚ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694241404,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":396094,"user_name":"AmosLiu","can_delete":false,"product_type":"c1","uid":2032832,"ip_address":"å¹¿ä¸œ","ucode":"ADCB4EF6A47CC8","user_header":"https://static001.geekbang.org/account/avatar/00/1f/04/c0/42c70741.jpg","comment_is_top":false,"comment_ctime":1733097068,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100613601,"comment_content":"æ€è€ƒé¢˜ä¸ªäººæ€»ç»“\n1ã€æå‡ç¨‹åºæ€§èƒ½çš„ç¼–è¯‘å™¨ä¼˜åŒ–æ–¹å¼\n1ï¼‰å‰ç«¯ä¼˜åŒ–ï¼ˆç¼–è¯‘é˜¶æ®µï¼‰ï¼š\nï¼ˆ1ï¼‰æ–¹æ³•å†…è”ï¼šå‡å°‘æ–¹æ³•è°ƒç”¨å¼€é”€ï¼›\nï¼ˆ2ï¼‰å¸¸é‡æŠ˜å ï¼šç¼–è¯‘æ—¶æ›¿æ¢å¸¸é‡è¡¨è¾¾å¼ï¼›\nï¼ˆ3ï¼‰å¾ªç¯å±•å¼€ï¼šå‡å°‘å¾ªç¯æ§åˆ¶çš„å¼€é”€ã€‚\n\n2ï¼‰åç«¯ä¼˜åŒ–ï¼ˆè¿è¡Œæ—¶ç”±JITå®Œæˆï¼‰ï¼š\nï¼ˆ1ï¼‰é€ƒé€¸åˆ†æï¼šæ ˆä¸Šåˆ†é…ã€åŒæ­¥çœç•¥ï¼›\nï¼ˆ2ï¼‰åŠ¨æ€å†…è”ï¼šå°†çƒ­ç‚¹æ–¹æ³•ç›´æ¥æ›¿æ¢ä¸ºè°ƒç”¨ç‚¹çš„å…·ä½“ä»£ç ï¼›\nï¼ˆ3ï¼‰åˆ†æ”¯é¢„æµ‹ï¼šä¼˜åŒ–æ¡ä»¶åˆ¤æ–­ï¼Œæé«˜åˆ†æ”¯å‘½ä¸­ç‡ã€‚\n3ï¼‰JVMå‚æ•°ä¼˜åŒ–ï¼š\nï¼ˆ1ï¼‰-XX:+TieredCompilationï¼šåˆ†å±‚ç¼–è¯‘ï¼›\nï¼ˆ2ï¼‰-Xmx&#47;-Xmsï¼šè°ƒæ•´å †å¤§å°ï¼›\nï¼ˆ3ï¼‰-XX:CompileThreshold=10000ï¼šè®¾ç½®çƒ­ç‚¹æ–¹æ³•è§¦å‘é˜ˆå€¼ã€‚\n\n2ã€JIT çš„åŸç†\n1ï¼‰çƒ­ç‚¹æ£€æµ‹ï¼šé€šè¿‡è®¡æ•°å™¨ç›‘æ§æ–¹æ³•è°ƒç”¨æ¬¡æ•°å’Œå¾ªç¯æ‰§è¡Œé¢‘ç‡ï¼›\n2ï¼‰åŠ¨æ€ä¼˜åŒ–ï¼šæ ¹æ®è¿è¡Œæ—¶æ•°æ®ä¼˜åŒ–ä»£ç ï¼›\n3ï¼‰åˆ†å±‚ç¼–è¯‘ï¼šé€æ­¥å°†ä»£ç ä»è§£é‡Šæ‰§è¡Œä¼˜åŒ–åˆ°æœ¬åœ°æœºå™¨ç ã€‚\n\n3ã€JIT çš„è§¦å‘æ—¶æœº\n1ï¼‰è®¡æ•°å™¨è§¦å‘ï¼šæ–¹æ³•è°ƒç”¨æˆ–å¾ªç¯æ‰§è¡Œæ¬¡æ•°è¾¾åˆ°é»˜è®¤é˜ˆå€¼ï¼ˆå¦‚ 10,000 æ¬¡ï¼‰ï¼Œé˜ˆå€¼å¯é€šè¿‡ -XX:CompileThreshold è°ƒæ•´ï¼›\n2ï¼‰ä»£ç çƒ­ç‚¹è¯†åˆ«ï¼šé¢‘ç¹è°ƒç”¨çš„ä»£ç å—ä¼šè¢«æ ‡è®°ä¸ºçƒ­ç‚¹ï¼›\n3ï¼‰æ€§èƒ½åé¦ˆä¼˜åŒ–ï¼šè¿è¡Œè¿‡ç¨‹ä¸­æ ¹æ®å®é™…æ‰§è¡Œæƒ…å†µåŠ¨æ€è°ƒæ•´ã€‚","like_count":0},{"had_liked":false,"id":382881,"user_name":"ç‹ç››æ­¦","can_delete":false,"product_type":"c1","uid":1182516,"ip_address":"åŒ—äº¬","ucode":"DE7EF246D3DCE8","user_header":"https://static001.geekbang.org/account/avatar/00/12/0b/34/f41d73a4.jpg","comment_is_top":false,"comment_ctime":1698145104,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100613601,"comment_content":"åŸºäºæ ˆå’ŒåŸºäºå¯„å­˜å™¨çš„æ¶æ„ï¼Œæ€§èƒ½ä¸Šæœ‰å¤šå°‘å·®å¼‚ï¼Ÿ Androidä¸Šçš„Javaæ˜¯åŸºäºå¯„å­˜å™¨","like_count":0},{"had_liked":false,"id":382879,"user_name":"ç‹ç››æ­¦","can_delete":false,"product_type":"c1","uid":1182516,"ip_address":"åŒ—äº¬","ucode":"DE7EF246D3DCE8","user_header":"https://static001.geekbang.org/account/avatar/00/12/0b/34/f41d73a4.jpg","comment_is_top":false,"comment_ctime":1698144662,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100613601,"comment_content":"ä¸‹é¢è¿™æ®µè¯¾æ–‡ï¼Œæ˜¯æœŸæœ› è¿˜æ˜¯å·²ç»å®ç°äº†ï¼Ÿ\n\nè¿™ç§ JIT å’Œ AOT ç»“åˆçš„æ–¹å¼å¯ä»¥åœ¨ä¿æŒæ€§èƒ½ä¼˜åŒ–å’ŒåŠ¨æ€é€‚åº”æ€§çš„åŒæ—¶ï¼Œæ‹¥æœ‰æ›´å¿«çš„å¯åŠ¨æ—¶é—´å’Œæ›´é«˜çš„æ‰§è¡Œé€Ÿåº¦ã€‚è¿™æ · Java ç¨‹åºå°±èƒ½æ›´å¥½åœ°é€‚åº”äº‘åŸç”Ÿå’Œå®¹å™¨åŒ–çš„ç¯å¢ƒäº†ï¼Œæ€§èƒ½å’Œå¯æ‰©å±•æ€§ä¹Ÿæ›´å¥½ã€‚","like_count":0},{"had_liked":false,"id":382592,"user_name":"Chief","can_delete":false,"product_type":"c1","uid":1136480,"ip_address":"ä¸Šæµ·","ucode":"CAFB24CBA215A8","user_header":"https://static001.geekbang.org/account/avatar/00/11/57/60/65b006a6.jpg","comment_is_top":false,"comment_ctime":1697620876,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100613601,"comment_content":"æ··åˆæ¨¡å¼ä¸‹ Java ä»£ç æ‰§è¡Œæµç¨‹çš„é‚£å¼ å›¾ï¼Œå³ä¸Šè§’çš„ã€ç¼–è¯‘æ‰§è¡Œã€‘æ˜¯ä¸æ˜¯æœ‰ç‚¹æ­§ä¹‰ï¼Œç¼“å­˜çš„æœºå™¨ç è¿™ä¸ªæ—¶å€™æ˜¯å¯ä»¥ç›´æ¥æ‰§è¡Œçš„å§ï¼Ÿ \nå·¦è¾¹ï¼šç¼–è¯‘æ‰§è¡Œ ---&gt; æ˜¯ ---&gt; ç¼–è¯‘å™¨ç¼–è¯‘ ---&gt; æ‰§è¡Œ\nä¸‹è¾¹ï¼šç¼“å­˜ ---&gt; æ‰§è¡Œ","like_count":0}]}