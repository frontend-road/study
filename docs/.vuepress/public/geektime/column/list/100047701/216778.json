{"id":216778,"title":"10 | é›†åˆç±»ï¼šå‘æ»¡åœ°çš„Liståˆ—è¡¨æ“ä½œ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æœ±æ™”ã€‚ä»Šå¤©ï¼Œæˆ‘æ¥å’Œä½ è¯´è¯´Liståˆ—è¡¨æ“ä½œæœ‰å“ªäº›å‘ã€‚</p><p>Pascalä¹‹çˆ¶å°¼å…‹åŠ³æ–¯ Â· ç»´å°”ç‰¹ï¼ˆNiklaus Wirthï¼‰ï¼Œæ›¾æå‡ºä¸€ä¸ªè‘—åå…¬å¼â€œç¨‹åº=æ•°æ®ç»“æ„+ç®—æ³•â€ã€‚ç”±æ­¤å¯è§ï¼Œæ•°æ®ç»“æ„çš„é‡è¦æ€§ã€‚å¸¸è§çš„æ•°æ®ç»“æ„åŒ…æ‹¬Listã€Setã€Mapã€Queueã€Treeã€Graphã€Stackç­‰ï¼Œå…¶ä¸­Listã€Setã€Mapã€Queueå¯ä»¥ä»å¹¿ä¹‰ä¸Šç»Ÿç§°ä¸ºé›†åˆç±»æ•°æ®ç»“æ„ã€‚</p><p>ç°ä»£ç¼–ç¨‹è¯­è¨€ä¸€èˆ¬éƒ½ä¼šæä¾›å„ç§æ•°æ®ç»“æ„çš„å®ç°ï¼Œä¾›æˆ‘ä»¬å¼€ç®±å³ç”¨ã€‚Javaä¹Ÿæ˜¯ä¸€æ ·ï¼Œæ¯”å¦‚æä¾›äº†é›†åˆç±»çš„å„ç§å®ç°ã€‚Javaçš„é›†åˆç±»åŒ…æ‹¬Mapå’ŒCollectionä¸¤å¤§ç±»ã€‚CollectionåŒ…æ‹¬Listã€Setå’ŒQueueä¸‰ä¸ªå°ç±»ï¼Œå…¶ä¸­Liståˆ—è¡¨é›†åˆæ˜¯æœ€é‡è¦ä¹Ÿæ˜¯æ‰€æœ‰ä¸šåŠ¡ä»£ç éƒ½ä¼šç”¨åˆ°çš„ã€‚æ‰€ä»¥ï¼Œä»Šå¤©æˆ‘ä¼šé‡ç‚¹ä»‹ç»Listçš„å†…å®¹ï¼Œè€Œä¸ä¼šé›†ä¸­ä»‹ç»Mapä»¥åŠCollectionä¸­å…¶ä»–å°ç±»çš„å‘ã€‚</p><p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±ä»æŠŠæ•°ç»„è½¬æ¢ä¸ºListé›†åˆã€å¯¹Listè¿›è¡Œåˆ‡ç‰‡æ“ä½œã€Listæœç´¢çš„æ€§èƒ½é—®é¢˜ç­‰å‡ ä¸ªæ–¹é¢ç€æ‰‹ï¼Œæ¥èŠèŠå…¶ä¸­æœ€å¯èƒ½é‡åˆ°çš„ä¸€äº›å‘ã€‚</p><h2>ä½¿ç”¨Arrays.asListæŠŠæ•°æ®è½¬æ¢ä¸ºListçš„ä¸‰ä¸ªå‘</h2><p>Java 8ä¸­Streamæµå¼å¤„ç†çš„å„ç§åŠŸèƒ½ï¼Œå¤§å¤§å‡å°‘äº†é›†åˆç±»å„ç§æ“ä½œï¼ˆæŠ•å½±ã€è¿‡æ»¤ã€è½¬æ¢ï¼‰çš„ä»£ç é‡ã€‚æ‰€ä»¥ï¼Œåœ¨ä¸šåŠ¡å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šæŠŠåŸå§‹çš„æ•°ç»„è½¬æ¢ä¸ºListç±»æ•°æ®ç»“æ„ï¼Œæ¥ç»§ç»­å±•å¼€å„ç§Streamæ“ä½œã€‚</p><!-- [[[read_end]]] --><p>ä½ å¯èƒ½ä¹Ÿæƒ³åˆ°äº†ï¼Œä½¿ç”¨Arrays.asListæ–¹æ³•å¯ä»¥æŠŠæ•°ç»„ä¸€é”®è½¬æ¢ä¸ºListï¼Œä½†å…¶å®æ²¡è¿™ä¹ˆç®€å•ã€‚æ¥ä¸‹æ¥ï¼Œå°±è®©æˆ‘ä»¬çœ‹çœ‹å…¶ä¸­çš„ç¼˜ç”±ï¼Œä»¥åŠä½¿ç”¨Arrays.asListæŠŠæ•°ç»„è½¬æ¢ä¸ºListçš„å‡ ä¸ªå‘ã€‚</p><p>åœ¨å¦‚ä¸‹ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆå§‹åŒ–ä¸‰ä¸ªæ•°å­—çš„int[]æ•°ç»„ï¼Œç„¶åä½¿ç”¨Arrays.asListæŠŠæ•°ç»„è½¬æ¢ä¸ºListï¼š</p><pre><code>int[] arr = {1, 2, 3};\nList list = Arrays.asList(arr);\nlog.info(&quot;list:{} size:{} class:{}&quot;, list, list.size(), list.get(0).getClass());\n</code></pre><p>ä½†ï¼Œè¿™æ ·åˆå§‹åŒ–çš„Listå¹¶ä¸æ˜¯æˆ‘ä»¬æœŸæœ›çš„åŒ…å«3ä¸ªæ•°å­—çš„Listã€‚é€šè¿‡æ—¥å¿—å¯ä»¥å‘ç°ï¼Œè¿™ä¸ªListåŒ…å«çš„å…¶å®æ˜¯ä¸€ä¸ªintæ•°ç»„ï¼Œæ•´ä¸ªListçš„å…ƒç´ ä¸ªæ•°æ˜¯1ï¼Œå…ƒç´ ç±»å‹æ˜¯æ•´æ•°æ•°ç»„ã€‚</p><pre><code>12:50:39.445 [main] INFO org.geekbang.time.commonmistakes.collection.aslist.AsListApplication - list:[[I@1c53fd30] size:1 class:class [I\n</code></pre><p>å…¶åŸå› æ˜¯ï¼Œåªèƒ½æ˜¯æŠŠintè£…ç®±ä¸ºIntegerï¼Œä¸å¯èƒ½æŠŠintæ•°ç»„è£…ç®±ä¸ºIntegeræ•°ç»„ã€‚æˆ‘ä»¬çŸ¥é“ï¼ŒArrays.asListæ–¹æ³•ä¼ å…¥çš„æ˜¯ä¸€ä¸ªæ³›å‹Tç±»å‹å¯å˜å‚æ•°ï¼Œæœ€ç»ˆintæ•°ç»„æ•´ä½“ä½œä¸ºäº†ä¸€ä¸ªå¯¹è±¡æˆä¸ºäº†æ³›å‹ç±»å‹Tï¼š</p><pre><code>public static &lt;T&gt; List&lt;T&gt; asList(T... a) {\n    return new ArrayList&lt;&gt;(a);\n}\n</code></pre><p>ç›´æ¥éå†è¿™æ ·çš„Listå¿…ç„¶ä¼šå‡ºç°Bugï¼Œä¿®å¤æ–¹å¼æœ‰ä¸¤ç§ï¼Œå¦‚æœä½¿ç”¨Java8ä»¥ä¸Šç‰ˆæœ¬å¯ä»¥ä½¿ç”¨Arrays.streamæ–¹æ³•æ¥è½¬æ¢ï¼Œå¦åˆ™å¯ä»¥æŠŠintæ•°ç»„å£°æ˜ä¸ºåŒ…è£…ç±»å‹Integeræ•°ç»„ï¼š</p><pre><code>int[] arr1 = {1, 2, 3};\nList list1 = Arrays.stream(arr1).boxed().collect(Collectors.toList());\nlog.info(&quot;list:{} size:{} class:{}&quot;, list1, list1.size(), list1.get(0).getClass());\n\n\nInteger[] arr2 = {1, 2, 3};\nList list2 = Arrays.asList(arr2);\nlog.info(&quot;list:{} size:{} class:{}&quot;, list2, list2.size(), list2.get(0).getClass());\n</code></pre><p>ä¿®å¤åçš„ä»£ç å¾—åˆ°å¦‚ä¸‹æ—¥å¿—ï¼Œå¯ä»¥çœ‹åˆ°Listå…·æœ‰ä¸‰ä¸ªå…ƒç´ ï¼Œå…ƒç´ ç±»å‹æ˜¯Integerï¼š</p><pre><code>13:10:57.373 [main] INFO org.geekbang.time.commonmistakes.collection.aslist.AsListApplication - list:[1, 2, 3] size:3 class:class java.lang.Integer\n</code></pre><p>å¯ä»¥çœ‹åˆ°ç¬¬ä¸€ä¸ªå‘æ˜¯ï¼Œ<strong>ä¸èƒ½ç›´æ¥ä½¿ç”¨Arrays.asListæ¥è½¬æ¢åŸºæœ¬ç±»å‹æ•°ç»„</strong>ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬è·å¾—äº†æ­£ç¡®çš„Listï¼Œæ˜¯ä¸æ˜¯å°±å¯ä»¥åƒæ™®é€šçš„Listé‚£æ ·ä½¿ç”¨äº†å‘¢ï¼Ÿæˆ‘ä»¬ç»§ç»­å¾€ä¸‹çœ‹ã€‚</p><p>æŠŠä¸‰ä¸ªå­—ç¬¦ä¸²1ã€2ã€3æ„æˆçš„å­—ç¬¦ä¸²æ•°ç»„ï¼Œä½¿ç”¨Arrays.asListè½¬æ¢ä¸ºListåï¼Œå°†åŸå§‹å­—ç¬¦ä¸²æ•°ç»„çš„ç¬¬äºŒä¸ªå­—ç¬¦ä¿®æ”¹ä¸º4ï¼Œç„¶åä¸ºListå¢åŠ ä¸€ä¸ªå­—ç¬¦ä¸²5ï¼Œæœ€åæ•°ç»„å’ŒListä¼šæ˜¯æ€æ ·å‘¢ï¼Ÿ</p><pre><code>String[] arr = {&quot;1&quot;, &quot;2&quot;, &quot;3&quot;};\nList list = Arrays.asList(arr);\narr[1] = &quot;4&quot;;\ntry {\n    list.add(&quot;5&quot;);\n} catch (Exception ex) {\n    ex.printStackTrace();\n}\nlog.info(&quot;arr:{} list:{}&quot;, Arrays.toString(arr), list);\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œæ—¥å¿—é‡Œæœ‰ä¸€ä¸ªUnsupportedOperationExceptionï¼Œä¸ºListæ–°å¢å­—ç¬¦ä¸²5çš„æ“ä½œå¤±è´¥äº†ï¼Œè€Œä¸”æŠŠåŸå§‹æ•°ç»„çš„ç¬¬äºŒä¸ªå…ƒç´ ä»2ä¿®æ”¹ä¸º4åï¼ŒasListè·å¾—çš„Listä¸­çš„ç¬¬äºŒä¸ªå…ƒç´ ä¹Ÿè¢«ä¿®æ”¹ä¸º4äº†ï¼š</p><pre><code>java.lang.UnsupportedOperationException\n\tat java.util.AbstractList.add(AbstractList.java:148)\n\tat java.util.AbstractList.add(AbstractList.java:108)\n\tat org.geekbang.time.commonmistakes.collection.aslist.AsListApplication.wrong2(AsListApplication.java:41)\n\tat org.geekbang.time.commonmistakes.collection.aslist.AsListApplication.main(AsListApplication.java:15)\n13:15:34.699 [main] INFO org.geekbang.time.commonmistakes.collection.aslist.AsListApplication - arr:[1, 4, 3] list:[1, 4, 3]\n</code></pre><p>è¿™é‡Œï¼Œåˆå¼•å‡ºäº†ä¸¤ä¸ªå‘ã€‚</p><p>ç¬¬äºŒä¸ªå‘ï¼Œ<strong>Arrays.asListè¿”å›çš„Listä¸æ”¯æŒå¢åˆ æ“ä½œã€‚</strong>Arrays.asListè¿”å›çš„Listå¹¶ä¸æ˜¯æˆ‘ä»¬æœŸæœ›çš„java.util.ArrayListï¼Œè€Œæ˜¯Arraysçš„å†…éƒ¨ç±»ArrayListã€‚ArrayListå†…éƒ¨ç±»ç»§æ‰¿è‡ªAbstractListç±»ï¼Œå¹¶æ²¡æœ‰è¦†å†™çˆ¶ç±»çš„addæ–¹æ³•ï¼Œè€Œçˆ¶ç±»ä¸­addæ–¹æ³•çš„å®ç°ï¼Œå°±æ˜¯æŠ›å‡ºUnsupportedOperationExceptionã€‚ç›¸å…³æºç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public static &lt;T&gt; List&lt;T&gt; asList(T... a) {\n    return new ArrayList&lt;&gt;(a);\n}\n\nprivate static class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt;\n    implements RandomAccess, java.io.Serializable\n{\n    private final E[] a;\n\n\n    ArrayList(E[] array) {\n        a = Objects.requireNonNull(array);\n    }\n...\n\n    @Override\n    public E set(int index, E element) {\n        E oldValue = a[index];\n        a[index] = element;\n        return oldValue;\n    }\n    ...\n}\n\npublic abstract class AbstractList&lt;E&gt; extends AbstractCollection&lt;E&gt; implements List&lt;E&gt; {\n...\npublic void add(int index, E element) {\n        throw new UnsupportedOperationException();\n    }\n}\n</code></pre><p>ç¬¬ä¸‰ä¸ªå‘ï¼Œ<strong>å¯¹åŸå§‹æ•°ç»„çš„ä¿®æ”¹ä¼šå½±å“åˆ°æˆ‘ä»¬è·å¾—çš„é‚£ä¸ªList</strong>ã€‚çœ‹ä¸€ä¸‹ArrayListçš„å®ç°ï¼Œå¯ä»¥å‘ç°ArrayListå…¶å®æ˜¯ç›´æ¥ä½¿ç”¨äº†åŸå§‹çš„æ•°ç»„ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦ç‰¹åˆ«å°å¿ƒï¼ŒæŠŠé€šè¿‡Arrays.asListè·å¾—çš„Listäº¤ç»™å…¶ä»–æ–¹æ³•å¤„ç†ï¼Œå¾ˆå®¹æ˜“å› ä¸ºå…±äº«äº†æ•°ç»„ï¼Œç›¸äº’ä¿®æ”¹äº§ç”ŸBugã€‚</p><p>ä¿®å¤æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œé‡æ–°newä¸€ä¸ªArrayListåˆå§‹åŒ–Arrays.asListè¿”å›çš„Listå³å¯ï¼š</p><pre><code>String[] arr = {&quot;1&quot;, &quot;2&quot;, &quot;3&quot;};\nList list = new ArrayList(Arrays.asList(arr));\narr[1] = &quot;4&quot;;\ntry {\n    list.add(&quot;5&quot;);\n} catch (Exception ex) {\n    ex.printStackTrace();\n}\nlog.info(&quot;arr:{} list:{}&quot;, Arrays.toString(arr), list);\n</code></pre><p>ä¿®æ”¹åçš„ä»£ç å®ç°äº†åŸå§‹æ•°ç»„å’ŒListçš„â€œè§£è€¦â€ï¼Œä¸å†ç›¸äº’å½±å“ã€‚åŒæ—¶ï¼Œå› ä¸ºæ“ä½œçš„æ˜¯çœŸæ­£çš„ArrayListï¼Œaddä¹Ÿä¸å†å‡ºé”™ï¼š</p><pre><code>13:34:50.829 [main] INFO org.geekbang.time.commonmistakes.collection.aslist.AsListApplication - arr:[1, 4, 3] list:[1, 2, 3, 5]\n</code></pre><h2>ä½¿ç”¨List.subListè¿›è¡Œåˆ‡ç‰‡æ“ä½œå±…ç„¶ä¼šå¯¼è‡´OOMï¼Ÿ</h2><p>ä¸šåŠ¡å¼€å‘æ—¶å¸¸å¸¸è¦å¯¹Liståšåˆ‡ç‰‡å¤„ç†ï¼Œå³å–å‡ºå…¶ä¸­éƒ¨åˆ†å…ƒç´ æ„æˆä¸€ä¸ªæ–°çš„Listï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæƒ³åˆ°ä½¿ç”¨List.subListæ–¹æ³•ã€‚ä½†ï¼Œå’ŒArrays.asListçš„é—®é¢˜ç±»ä¼¼ï¼ŒList.subListè¿”å›çš„å­Listä¸æ˜¯ä¸€ä¸ªæ™®é€šçš„ArrayListã€‚è¿™ä¸ªå­Listå¯ä»¥è®¤ä¸ºæ˜¯åŸå§‹Listçš„è§†å›¾ï¼Œä¼šå’ŒåŸå§‹Listç›¸äº’å½±å“ã€‚å¦‚æœä¸æ³¨æ„ï¼Œå¾ˆå¯èƒ½ä¼šå› æ­¤äº§ç”ŸOOMé—®é¢˜ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä¸€èµ·åˆ†æä¸‹å…¶ä¸­çš„å‘ã€‚</p><p>å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œå®šä¹‰ä¸€ä¸ªåä¸ºdataçš„é™æ€Listæ¥å­˜æ”¾Integerçš„Listï¼Œä¹Ÿå°±æ˜¯è¯´dataçš„æˆå‘˜æœ¬èº«æ˜¯åŒ…å«äº†å¤šä¸ªæ•°å­—çš„Listã€‚å¾ªç¯1000æ¬¡ï¼Œæ¯æ¬¡éƒ½ä»ä¸€ä¸ªå…·æœ‰10ä¸‡ä¸ªIntegerçš„Listä¸­ï¼Œä½¿ç”¨subListæ–¹æ³•è·å¾—ä¸€ä¸ªåªåŒ…å«ä¸€ä¸ªæ•°å­—çš„å­Listï¼Œå¹¶æŠŠè¿™ä¸ªå­ListåŠ å…¥dataå˜é‡ï¼š</p><pre><code>private static List&lt;List&lt;Integer&gt;&gt; data = new ArrayList&lt;&gt;();\n\nprivate static void oom() {\n    for (int i = 0; i &lt; 1000; i++) {\n        List&lt;Integer&gt; rawList = IntStream.rangeClosed(1, 100000).boxed().collect(Collectors.toList());\n        data.add(rawList.subList(0, 1));\n    }\n}\n</code></pre><p>ä½ å¯èƒ½ä¼šè§‰å¾—ï¼Œè¿™ä¸ªdataå˜é‡é‡Œé¢æœ€ç»ˆä¿å­˜çš„åªæ˜¯1000ä¸ªå…·æœ‰1ä¸ªå…ƒç´ çš„Listï¼Œä¸ä¼šå ç”¨å¾ˆå¤§ç©ºé—´ï¼Œä½†ç¨‹åºè¿è¡Œä¸ä¹…å°±å‡ºç°äº†OOMï¼š</p><pre><code>Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space\n\tat java.util.Arrays.copyOf(Arrays.java:3181)\n\tat java.util.ArrayList.grow(ArrayList.java:265)\n</code></pre><p><strong>å‡ºç°OOMçš„åŸå› æ˜¯ï¼Œå¾ªç¯ä¸­çš„1000ä¸ªå…·æœ‰10ä¸‡ä¸ªå…ƒç´ çš„Listå§‹ç»ˆå¾—ä¸åˆ°å›æ”¶ï¼Œå› ä¸ºå®ƒå§‹ç»ˆè¢«subListæ–¹æ³•è¿”å›çš„Listå¼ºå¼•ç”¨ã€‚</strong>é‚£ä¹ˆï¼Œè¿”å›çš„å­Listä¸ºä»€ä¹ˆä¼šå¼ºå¼•ç”¨åŸå§‹çš„Listï¼Œå®ƒä»¬åˆæœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿæˆ‘ä»¬å†ç»§ç»­åšå®éªŒè§‚å¯Ÿä¸€ä¸‹è¿™ä¸ªå­Listçš„ç‰¹æ€§ã€‚</p><p>é¦–å…ˆåˆå§‹åŒ–ä¸€ä¸ªåŒ…å«æ•°å­—1åˆ°10çš„ArrayListï¼Œç„¶åé€šè¿‡è°ƒç”¨subListæ–¹æ³•å–å‡º2ã€3ã€4ï¼›éšååˆ é™¤è¿™ä¸ªSubListä¸­çš„å…ƒç´ æ•°å­—3ï¼Œå¹¶æ‰“å°åŸå§‹çš„ArrayListï¼›æœ€åä¸ºåŸå§‹çš„ArrayListå¢åŠ ä¸€ä¸ªå…ƒç´ æ•°å­—0ï¼Œéå†SubListè¾“å‡ºæ‰€æœ‰å…ƒç´ ï¼š</p><pre><code>List&lt;Integer&gt; list = IntStream.rangeClosed(1, 10).boxed().collect(Collectors.toList());\nList&lt;Integer&gt; subList = list.subList(1, 4);\nSystem.out.println(subList);\nsubList.remove(1);\nSystem.out.println(list);\nlist.add(0);\ntry {\n    subList.forEach(System.out::println);\n} catch (Exception ex) {\n    ex.printStackTrace();\n}\n</code></pre><p>ä»£ç è¿è¡Œåå¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š</p><pre><code>[2, 3, 4]\n[1, 2, 4, 5, 6, 7, 8, 9, 10]\njava.util.ConcurrentModificationException\n\tat java.util.ArrayList$SubList.checkForComodification(ArrayList.java:1239)\n\tat java.util.ArrayList$SubList.listIterator(ArrayList.java:1099)\n\tat java.util.AbstractList.listIterator(AbstractList.java:299)\n\tat java.util.ArrayList$SubList.iterator(ArrayList.java:1095)\n\tat java.lang.Iterable.forEach(Iterable.java:74)\n</code></pre><p>å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªç°è±¡ï¼š</p><ul>\n<li>åŸå§‹Listä¸­æ•°å­—3è¢«åˆ é™¤äº†ï¼Œè¯´æ˜åˆ é™¤å­Listä¸­çš„å…ƒç´ å½±å“åˆ°äº†åŸå§‹Listï¼›</li>\n<li>å°è¯•ä¸ºåŸå§‹Listå¢åŠ æ•°å­—0ä¹‹åå†éå†å­Listï¼Œä¼šå‡ºç°ConcurrentModificationExceptionã€‚</li>\n</ul><p>æˆ‘ä»¬åˆ†æä¸‹ArrayListçš„æºç ï¼Œçœ‹çœ‹ä¸ºä»€ä¹ˆä¼šæ˜¯è¿™æ ·ã€‚</p><pre><code>public class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt;\n        implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable\n{\n    protected transient int modCount = 0;\n\tprivate void ensureExplicitCapacity(int minCapacity) {\n        modCount++;\n        // overflow-conscious code\n        if (minCapacity - elementData.length &gt; 0)\n            grow(minCapacity);\n    }\n\tpublic void add(int index, E element) {\n\t\trangeCheckForAdd(index);\n\n\t\tensureCapacityInternal(size + 1);  // Increments modCount!!\n\t\tSystem.arraycopy(elementData, index, elementData, index + 1,\n\t\t                 size - index);\n\t\telementData[index] = element;\n\t\tsize++;\n\t}\n\n\tpublic List&lt;E&gt; subList(int fromIndex, int toIndex) {\n\t\tsubListRangeCheck(fromIndex, toIndex, size);\n\t\treturn new SubList(this, offset, fromIndex, toIndex);\n\t}\n\n\tprivate class SubList extends AbstractList&lt;E&gt; implements RandomAccess {\n\t\tprivate final AbstractList&lt;E&gt; parent;\n\t\tprivate final int parentOffset;\n\t\tprivate final int offset;\n\t\tint size;\n\n\t\tSubList(AbstractList&lt;E&gt; parent,\n\t        int offset, int fromIndex, int toIndex) {\n\t\t    this.parent = parent;\n\t\t    this.parentOffset = fromIndex;\n\t\t    this.offset = offset + fromIndex;\n\t\t    this.size = toIndex - fromIndex;\n\t\t    this.modCount = ArrayList.this.modCount;\n\t\t}\n\n        public E set(int index, E element) {\n            rangeCheck(index);\n            checkForComodification();\n            return l.set(index+offset, element);\n        }\n\n\t\tpublic ListIterator&lt;E&gt; listIterator(final int index) {\n\t\t            checkForComodification();\n\t\t            ...\n\t\t}\n\n\t\tprivate void checkForComodification() {\n\t\t    if (ArrayList.this.modCount != this.modCount)\n\t\t        throw new ConcurrentModificationException();\n\t\t}\n\t\t...\n\t}\n}\n</code></pre><p>ç¬¬ä¸€ï¼ŒArrayListç»´æŠ¤äº†ä¸€ä¸ªå«ä½œmodCountçš„å­—æ®µï¼Œè¡¨ç¤ºé›†åˆç»“æ„æ€§ä¿®æ”¹çš„æ¬¡æ•°ã€‚æ‰€è°“ç»“æ„æ€§ä¿®æ”¹ï¼ŒæŒ‡çš„æ˜¯å½±å“Listå¤§å°çš„ä¿®æ”¹ï¼Œæ‰€ä»¥addæ“ä½œå¿…ç„¶ä¼šæ”¹å˜modCountçš„å€¼ã€‚</p><p>ç¬¬äºŒï¼Œåˆ†æç¬¬21åˆ°24è¡Œçš„subListæ–¹æ³•å¯ä»¥çœ‹åˆ°ï¼Œè·å¾—çš„Listå…¶å®æ˜¯<strong>å†…éƒ¨ç±»SubList</strong>ï¼Œå¹¶ä¸æ˜¯æ™®é€šçš„ArrayListï¼Œåœ¨åˆå§‹åŒ–çš„æ—¶å€™ä¼ å…¥äº†thisã€‚</p><p>ç¬¬ä¸‰ï¼Œåˆ†æç¬¬26åˆ°39è¡Œä»£ç å¯ä»¥å‘ç°ï¼Œè¿™ä¸ªSubListä¸­çš„parentå­—æ®µå°±æ˜¯åŸå§‹çš„Listã€‚SubListåˆå§‹åŒ–çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰æŠŠåŸå§‹Listä¸­çš„å…ƒç´ å¤åˆ¶åˆ°ç‹¬ç«‹çš„å˜é‡ä¸­ä¿å­˜ã€‚æˆ‘ä»¬å¯ä»¥è®¤ä¸ºSubListæ˜¯åŸå§‹Listçš„è§†å›¾ï¼Œå¹¶ä¸æ˜¯ç‹¬ç«‹çš„Listã€‚åŒæ–¹å¯¹å…ƒç´ çš„ä¿®æ”¹ä¼šç›¸äº’å½±å“ï¼Œè€Œä¸”SubListå¼ºå¼•ç”¨äº†åŸå§‹çš„Listï¼Œæ‰€ä»¥å¤§é‡ä¿å­˜è¿™æ ·çš„SubListä¼šå¯¼è‡´OOMã€‚</p><p>ç¬¬å››ï¼Œåˆ†æç¬¬47åˆ°55è¡Œä»£ç å¯ä»¥å‘ç°ï¼Œéå†SubListçš„æ—¶å€™ä¼šå…ˆè·å¾—è¿­ä»£å™¨ï¼Œæ¯”è¾ƒåŸå§‹ArrayList modCountçš„å€¼å’ŒSubListå½“å‰modCountçš„å€¼ã€‚è·å¾—äº†SubListåï¼Œæˆ‘ä»¬ä¸ºåŸå§‹Listæ–°å¢äº†ä¸€ä¸ªå…ƒç´ ä¿®æ”¹äº†å…¶modCountï¼Œæ‰€ä»¥åˆ¤ç­‰å¤±è´¥æŠ›å‡ºConcurrentModificationExceptionå¼‚å¸¸ã€‚</p><p>æ—¢ç„¶SubListç›¸å½“äºåŸå§‹Listçš„è§†å›¾ï¼Œé‚£ä¹ˆé¿å…ç›¸äº’å½±å“çš„ä¿®å¤æ–¹å¼æœ‰ä¸¤ç§ï¼š</p><ul>\n<li>ä¸€ç§æ˜¯ï¼Œä¸ç›´æ¥ä½¿ç”¨subListæ–¹æ³•è¿”å›çš„SubListï¼Œè€Œæ˜¯é‡æ–°ä½¿ç”¨new ArrayListï¼Œåœ¨æ„é€ æ–¹æ³•ä¼ å…¥SubListï¼Œæ¥æ„å»ºä¸€ä¸ªç‹¬ç«‹çš„ArrayListï¼›</li>\n<li>å¦ä¸€ç§æ˜¯ï¼Œå¯¹äºJava 8ä½¿ç”¨Streamçš„skipå’Œlimit APIæ¥è·³è¿‡æµä¸­çš„å…ƒç´ ï¼Œä»¥åŠé™åˆ¶æµä¸­å…ƒç´ çš„ä¸ªæ•°ï¼ŒåŒæ ·å¯ä»¥è¾¾åˆ°SubListåˆ‡ç‰‡çš„ç›®çš„ã€‚</li>\n</ul><pre><code>//æ–¹å¼ä¸€ï¼š\nList&lt;Integer&gt; subList = new ArrayList&lt;&gt;(list.subList(1, 4));\n\n//æ–¹å¼äºŒï¼š\nList&lt;Integer&gt; subList = list.stream().skip(1).limit(3).collect(Collectors.toList());\n</code></pre><p>ä¿®å¤åä»£ç è¾“å‡ºå¦‚ä¸‹ï¼š</p><pre><code>[2, 3, 4]\n[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n2\n4\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œåˆ é™¤SubListçš„å…ƒç´ ä¸å†å½±å“åŸå§‹Listï¼Œè€Œå¯¹åŸå§‹Listçš„ä¿®æ”¹ä¹Ÿä¸ä¼šå†å‡ºç°Listè¿­ä»£å¼‚å¸¸ã€‚</p><h2>ä¸€å®šè¦è®©åˆé€‚çš„æ•°æ®ç»“æ„åšåˆé€‚çš„äº‹æƒ…</h2><p>åœ¨ä»‹ç»<a href=\"https://time.geekbang.org/column/article/209494\">å¹¶å‘å·¥å…·</a>æ—¶ï¼Œæˆ‘æåˆ°è¦æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©åˆé€‚çš„å¹¶å‘å·¥å…·æˆ–å®¹å™¨ã€‚åœ¨ä½¿ç”¨Listé›†åˆç±»çš„æ—¶å€™ï¼Œä¸æ³¨æ„ä½¿ç”¨åœºæ™¯ä¹Ÿä¼šé‡è§ä¸¤ä¸ªå¸¸è§è¯¯åŒºã€‚</p><p><strong>ç¬¬ä¸€ä¸ªè¯¯åŒºæ˜¯ï¼Œä½¿ç”¨æ•°æ®ç»“æ„ä¸è€ƒè™‘å¹³è¡¡æ—¶é—´å’Œç©ºé—´</strong>ã€‚</p><p>é¦–å…ˆï¼Œå®šä¹‰ä¸€ä¸ªåªæœ‰ä¸€ä¸ªintç±»å‹è®¢å•å·å­—æ®µçš„Orderç±»ï¼š</p><pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\nstatic class Order {\n    private int orderId;\n}\n</code></pre><p>ç„¶åï¼Œå®šä¹‰ä¸€ä¸ªåŒ…å«elementCountå’ŒloopCountä¸¤ä¸ªå‚æ•°çš„listSearchæ–¹æ³•ï¼Œåˆå§‹åŒ–ä¸€ä¸ªå…·æœ‰elementCountä¸ªè®¢å•å¯¹è±¡çš„ArrayListï¼Œå¾ªç¯loopCountæ¬¡æœç´¢è¿™ä¸ªArrayListï¼Œæ¯æ¬¡éšæœºæœç´¢ä¸€ä¸ªè®¢å•å·ï¼š</p><pre><code>private static Object listSearch(int elementCount, int loopCount) {\n    List&lt;Order&gt; list = IntStream.rangeClosed(1, elementCount).mapToObj(i -&gt; new Order(i)).collect(Collectors.toList());\n    IntStream.rangeClosed(1, loopCount).forEach(i -&gt; {\n        int search = ThreadLocalRandom.current().nextInt(elementCount);\n        Order result = list.stream().filter(order -&gt; order.getOrderId() == search).findFirst().orElse(null);\n        Assert.assertTrue(result != null &amp;&amp; result.getOrderId() == search);\n    });\n    return list;\n}\n</code></pre><p>éšåï¼Œå®šä¹‰å¦ä¸€ä¸ªmapSearchæ–¹æ³•ï¼Œä»ä¸€ä¸ªå…·æœ‰elementCountä¸ªå…ƒç´ çš„Mapä¸­å¾ªç¯loopCountæ¬¡æŸ¥æ‰¾éšæœºè®¢å•å·ã€‚Mapçš„Keyæ˜¯è®¢å•å·ï¼ŒValueæ˜¯è®¢å•å¯¹è±¡ï¼š</p><pre><code>private static Object mapSearch(int elementCount, int loopCount) {\n    Map&lt;Integer, Order&gt; map = IntStream.rangeClosed(1, elementCount).boxed().collect(Collectors.toMap(Function.identity(), i -&gt; new Order(i)));\n    IntStream.rangeClosed(1, loopCount).forEach(i -&gt; {\n        int search = ThreadLocalRandom.current().nextInt(elementCount);\n        Order result = map.get(search);\n        Assert.assertTrue(result != null &amp;&amp; result.getOrderId() == search);\n    });\n    return map;\n}\n</code></pre><p>æˆ‘ä»¬çŸ¥é“ï¼Œæœç´¢ArrayListçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ï¼Œè€ŒHashMapçš„getæ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1)ã€‚<strong>æ‰€ä»¥ï¼Œè¦å¯¹å¤§Listè¿›è¡Œå•å€¼æœç´¢çš„è¯ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨HashMapï¼Œå…¶ä¸­Keyæ˜¯è¦æœç´¢çš„å€¼ï¼ŒValueæ˜¯åŸå§‹å¯¹è±¡ï¼Œä¼šæ¯”ä½¿ç”¨ArrayListæœ‰éå¸¸æ˜æ˜¾çš„æ€§èƒ½ä¼˜åŠ¿ã€‚</strong></p><p>å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œå¯¹100ä¸‡ä¸ªå…ƒç´ çš„ArrayListå’ŒHashMapï¼Œåˆ†åˆ«è°ƒç”¨listSearchå’ŒmapSearchæ–¹æ³•è¿›è¡Œ1000æ¬¡æœç´¢ï¼š</p><pre><code>int elementCount = 1000000;\nint loopCount = 1000;\nStopWatch stopWatch = new StopWatch();\nstopWatch.start(&quot;listSearch&quot;);\nObject list = listSearch(elementCount, loopCount);\nSystem.out.println(ObjectSizeCalculator.getObjectSize(list));\nstopWatch.stop();\nstopWatch.start(&quot;mapSearch&quot;);\nObject map = mapSearch(elementCount, loopCount);\nstopWatch.stop();\nSystem.out.println(ObjectSizeCalculator.getObjectSize(map));\nSystem.out.println(stopWatch.prettyPrint());\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œä»…ä»…æ˜¯1000æ¬¡æœç´¢ï¼ŒlistSearchæ–¹æ³•è€—æ—¶3.3ç§’ï¼Œè€ŒmapSearchè€—æ—¶ä»…ä»…108æ¯«ç§’ã€‚</p><pre><code>20861992\n72388672\nStopWatch '': running time = 3506699764 ns\n---------------------------------------------\nns         %     Task name\n---------------------------------------------\n3398413176  097%  listSearch\n108286588  003%  mapSearch\n</code></pre><p>å³ä½¿æˆ‘ä»¬è¦æœç´¢çš„ä¸æ˜¯å•å€¼è€Œæ˜¯æ¡ä»¶åŒºé—´ï¼Œä¹Ÿå¯ä»¥å°è¯•ä½¿ç”¨HashMapæ¥è¿›è¡Œâ€œæœç´¢æ€§èƒ½ä¼˜åŒ–â€ã€‚å¦‚æœä½ çš„æ¡ä»¶åŒºé—´æ˜¯å›ºå®šçš„è¯ï¼Œå¯ä»¥æå‰æŠŠHashMapæŒ‰ç…§æ¡ä»¶åŒºé—´è¿›è¡Œåˆ†ç»„ï¼ŒKeyå°±æ˜¯ä¸åŒçš„åŒºé—´ã€‚</p><p>çš„ç¡®ï¼Œå¦‚æœä¸šåŠ¡ä»£ç ä¸­æœ‰é¢‘ç¹çš„å¤§ArrayListæœç´¢ï¼Œä½¿ç”¨HashMapæ€§èƒ½ä¼šå¥½å¾ˆå¤šã€‚ç±»ä¼¼ï¼Œå¦‚æœè¦å¯¹å¤§ArrayListè¿›è¡Œå»é‡æ“ä½œï¼Œä¹Ÿä¸å»ºè®®ä½¿ç”¨containsæ–¹æ³•ï¼Œè€Œæ˜¯å¯ä»¥è€ƒè™‘ä½¿ç”¨HashSetè¿›è¡Œå»é‡ã€‚è¯´åˆ°è¿™é‡Œï¼Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œä½¿ç”¨HashMapæ˜¯å¦ä¼šç‰ºç‰²ç©ºé—´å‘¢ï¼Ÿ</p><p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨ObjectSizeCalculatorå·¥å…·æ‰“å°ArrayListå’ŒHashMapçš„å†…å­˜å ç”¨ï¼Œå¯ä»¥çœ‹åˆ°ArrayListå ç”¨å†…å­˜21Mï¼Œè€ŒHashMapå ç”¨çš„å†…å­˜è¾¾åˆ°äº†72Mï¼Œæ˜¯Listçš„ä¸‰å€å¤šã€‚è¿›ä¸€æ­¥ä½¿ç”¨MATå·¥å…·åˆ†æå †å¯ä»¥å†æ¬¡è¯æ˜ï¼ŒArrayListåœ¨å†…å­˜å ç”¨ä¸Šæ€§ä»·æ¯”å¾ˆé«˜ï¼Œ77%æ˜¯å®é™…çš„æ•°æ®ï¼ˆå¦‚ç¬¬1ä¸ªå›¾æ‰€ç¤ºï¼Œ16000000/20861992ï¼‰ï¼Œ<strong>è€ŒHashMapçš„â€œå«é‡‘é‡â€åªæœ‰22%</strong>ï¼ˆå¦‚ç¬¬2ä¸ªå›¾æ‰€ç¤ºï¼Œ16000000/72386640ï¼‰ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/1e/24/1e8492040dd4b1af6114a6eeba06e524.png?wh=1428*226\" alt=\"\"></p><p><img src=\"https://static001.geekbang.org/resource/image/53/c7/53d53e3ce2efcb081f8d9fa496cb8ec7.png?wh=1762*290\" alt=\"\"></p><p>æ‰€ä»¥ï¼Œåœ¨åº”ç”¨å†…å­˜åƒç´§çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘æ˜¯å¦å€¼å¾—ä½¿ç”¨æ›´å¤šçš„å†…å­˜æ¶ˆè€—æ¥æ¢å–æ›´é«˜çš„æ€§èƒ½ã€‚è¿™é‡Œæˆ‘ä»¬çœ‹åˆ°çš„æ˜¯å¹³è¡¡çš„è‰ºæœ¯ï¼Œç©ºé—´æ¢æ—¶é—´ï¼Œè¿˜æ˜¯æ—¶é—´æ¢ç©ºé—´ï¼Œåªè€ƒè™‘ä»»ä½•ä¸€ä¸ªæ–¹é¢éƒ½æ˜¯ä¸å¯¹çš„ã€‚</p><p><strong>ç¬¬äºŒä¸ªè¯¯åŒºæ˜¯ï¼Œè¿‡äºè¿·ä¿¡æ•™ç§‘ä¹¦çš„å¤§Oæ—¶é—´å¤æ‚åº¦</strong>ã€‚</p><p>æ•°æ®ç»“æ„ä¸­è¦å®ç°ä¸€ä¸ªåˆ—è¡¨ï¼Œæœ‰åŸºäºè¿ç»­å­˜å‚¨çš„æ•°ç»„å’ŒåŸºäºæŒ‡é’ˆä¸²è”çš„é“¾è¡¨ä¸¤ç§æ–¹å¼ã€‚åœ¨Javaä¸­ï¼Œæœ‰ä»£è¡¨æ€§çš„å®ç°æ˜¯ArrayListå’ŒLinkedListï¼Œå‰è€…èƒŒåçš„æ•°æ®ç»“æ„æ˜¯æ•°ç»„ï¼Œåè€…åˆ™æ˜¯ï¼ˆåŒå‘ï¼‰é“¾è¡¨ã€‚</p><p>åœ¨é€‰æ‹©æ•°æ®ç»“æ„çš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šè€ƒè™‘æ¯ç§æ•°æ®ç»“æ„ä¸åŒæ“ä½œçš„æ—¶é—´å¤æ‚åº¦ï¼Œä»¥åŠä½¿ç”¨åœºæ™¯ä¸¤ä¸ªå› ç´ ã€‚æŸ¥çœ‹<a href=\"https://www.bigocheatsheet.com/\">è¿™é‡Œ</a>ï¼Œä½ å¯ä»¥çœ‹åˆ°æ•°ç»„å’Œé“¾è¡¨å¤§Oæ—¶é—´å¤æ‚åº¦çš„æ˜¾è‘—å·®å¼‚ï¼š</p><ul>\n<li>å¯¹äºæ•°ç»„ï¼Œéšæœºå…ƒç´ è®¿é—®çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1)ï¼Œå…ƒç´ æ’å…¥æ“ä½œæ˜¯O(n)ï¼›</li>\n<li>å¯¹äºé“¾è¡¨ï¼Œéšæœºå…ƒç´ è®¿é—®çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ï¼Œå…ƒç´ æ’å…¥æ“ä½œæ˜¯O(1)ã€‚</li>\n</ul><p>é‚£ä¹ˆï¼Œåœ¨å¤§é‡çš„å…ƒç´ æ’å…¥ã€å¾ˆå°‘çš„éšæœºè®¿é—®çš„ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œæ˜¯ä¸æ˜¯å°±åº”è¯¥ä½¿ç”¨LinkedListå‘¢ï¼Ÿæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†™ä¸€æ®µä»£ç æµ‹è¯•ä¸‹ä¸¤è€…éšæœºè®¿é—®å’Œæ’å…¥çš„æ€§èƒ½å§ã€‚</p><p>å®šä¹‰å››ä¸ªå‚æ•°ä¸€è‡´çš„æ–¹æ³•ï¼Œåˆ†åˆ«å¯¹å…ƒç´ ä¸ªæ•°ä¸ºelementCountçš„LinkedListå’ŒArrayListï¼Œå¾ªç¯loopCountæ¬¡ï¼Œè¿›è¡Œéšæœºè®¿é—®å’Œå¢åŠ å…ƒç´ åˆ°éšæœºä½ç½®çš„æ“ä½œï¼š</p><pre><code>//LinkedListè®¿é—®\nprivate static void linkedListGet(int elementCount, int loopCount) {\n    List&lt;Integer&gt; list = IntStream.rangeClosed(1, elementCount).boxed().collect(Collectors.toCollection(LinkedList::new));\n    IntStream.rangeClosed(1, loopCount).forEach(i -&gt; list.get(ThreadLocalRandom.current().nextInt(elementCount)));\n}\n\n//ArrayListè®¿é—®\nprivate static void arrayListGet(int elementCount, int loopCount) {\n    List&lt;Integer&gt; list = IntStream.rangeClosed(1, elementCount).boxed().collect(Collectors.toCollection(ArrayList::new));\n    IntStream.rangeClosed(1, loopCount).forEach(i -&gt; list.get(ThreadLocalRandom.current().nextInt(elementCount)));\n}\n\n//LinkedListæ’å…¥\nprivate static void linkedListAdd(int elementCount, int loopCount) {\n    List&lt;Integer&gt; list = IntStream.rangeClosed(1, elementCount).boxed().collect(Collectors.toCollection(LinkedList::new));\n    IntStream.rangeClosed(1, loopCount).forEach(i -&gt; list.add(ThreadLocalRandom.current().nextInt(elementCount),1));\n}\n\n//ArrayListæ’å…¥\nprivate static void arrayListAdd(int elementCount, int loopCount) {\n    List&lt;Integer&gt; list = IntStream.rangeClosed(1, elementCount).boxed().collect(Collectors.toCollection(ArrayList::new));\n    IntStream.rangeClosed(1, loopCount).forEach(i -&gt; list.add(ThreadLocalRandom.current().nextInt(elementCount),1));\n}\n</code></pre><p>æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼Œ10ä¸‡ä¸ªå…ƒç´ ï¼Œå¾ªç¯10ä¸‡æ¬¡ï¼š</p><pre><code>int elementCount = 100000;\nint loopCount = 100000;\nStopWatch stopWatch = new StopWatch();\nstopWatch.start(&quot;linkedListGet&quot;);\nlinkedListGet(elementCount, loopCount);\nstopWatch.stop();\nstopWatch.start(&quot;arrayListGet&quot;);\narrayListGet(elementCount, loopCount);\nstopWatch.stop();\nSystem.out.println(stopWatch.prettyPrint());\n\n\nStopWatch stopWatch2 = new StopWatch();\nstopWatch2.start(&quot;linkedListAdd&quot;);\nlinkedListAdd(elementCount, loopCount);\nstopWatch2.stop();\nstopWatch2.start(&quot;arrayListAdd&quot;);\narrayListAdd(elementCount, loopCount);\nstopWatch2.stop();\nSystem.out.println(stopWatch2.prettyPrint());\n</code></pre><p>è¿è¡Œç»“æœå¯èƒ½ä¼šè®©ä½ å¤§è·Œçœ¼é•œã€‚åœ¨éšæœºè®¿é—®æ–¹é¢ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ArrayListçš„ç»å¯¹ä¼˜åŠ¿ï¼Œè€—æ—¶åªæœ‰11æ¯«ç§’ï¼Œè€ŒLinkedListè€—æ—¶6.6ç§’ï¼Œè¿™ç¬¦åˆä¸Šé¢æˆ‘ä»¬æ‰€è¯´çš„æ—¶é—´å¤æ‚åº¦ï¼›<strong>ä½†ï¼Œéšæœºæ’å…¥æ“ä½œå±…ç„¶ä¹Ÿæ˜¯LinkedListè½è´¥ï¼Œè€—æ—¶9.3ç§’ï¼ŒArrayListåªè¦1.5ç§’</strong>ï¼š</p><pre><code>---------------------------------------------\nns         %     Task name\n---------------------------------------------\n6604199591  100%  linkedListGet\n011494583  000%  arrayListGet\n\n\nStopWatch '': running time = 10729378832 ns\n---------------------------------------------\nns         %     Task name\n---------------------------------------------\n9253355484  086%  linkedListAdd\n1476023348  014%  arrayListAdd\n</code></pre><p>ç¿»çœ‹LinkedListæºç å‘ç°ï¼Œæ’å…¥æ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1)çš„å‰ææ˜¯ï¼Œä½ å·²ç»æœ‰äº†é‚£ä¸ªè¦æ’å…¥èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚ä½†ï¼Œåœ¨å®ç°çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å…ˆé€šè¿‡å¾ªç¯è·å–åˆ°é‚£ä¸ªèŠ‚ç‚¹çš„Nodeï¼Œç„¶åå†æ‰§è¡Œæ’å…¥æ“ä½œã€‚å‰è€…ä¹Ÿæ˜¯æœ‰å¼€é”€çš„ï¼Œä¸å¯èƒ½åªè€ƒè™‘æ’å…¥æ“ä½œæœ¬èº«çš„ä»£ä»·ï¼š</p><pre><code>public void add(int index, E element) {\n    checkPositionIndex(index);\n\n    if (index == size)\n        linkLast(element);\n    else\n        linkBefore(element, node(index));\n}\n\nNode&lt;E&gt; node(int index) {\n    // assert isElementIndex(index);\n\n    if (index &lt; (size &gt;&gt; 1)) {\n        Node&lt;E&gt; x = first;\n        for (int i = 0; i &lt; index; i++)\n            x = x.next;\n        return x;\n    } else {\n        Node&lt;E&gt; x = last;\n        for (int i = size - 1; i &gt; index; i--)\n            x = x.prev;\n        return x;\n    }\n}\n</code></pre><p>æ‰€ä»¥ï¼Œå¯¹äºæ’å…¥æ“ä½œï¼ŒLinkedListçš„æ—¶é—´å¤æ‚åº¦å…¶å®ä¹Ÿæ˜¯O(n)ã€‚ç»§ç»­åšæ›´å¤šå®éªŒçš„è¯ä½ ä¼šå‘ç°ï¼Œåœ¨å„ç§å¸¸ç”¨åœºæ™¯ä¸‹ï¼ŒLinkedListå‡ ä¹éƒ½ä¸èƒ½åœ¨æ€§èƒ½ä¸Šèƒœå‡ºArrayListã€‚</p><p>è®½åˆºçš„æ˜¯ï¼ŒLinkedListçš„ä½œè€…çº¦ä¹¦äºš Â· å¸ƒæ´›å…‹ï¼ˆJosh Blochï¼‰ï¼Œåœ¨å…¶æ¨ç‰¹ä¸Šå›å¤åˆ«äººæ—¶è¯´ï¼Œè™½ç„¶LinkedListæ˜¯æˆ‘å†™çš„ä½†æˆ‘ä»æ¥ä¸ç”¨ï¼Œæœ‰è°ä¼šçœŸçš„ç”¨å—ï¼Ÿ</p><p><img src=\"https://static001.geekbang.org/resource/image/12/cc/122a469eb03f16ab61d893ec57b34acc.png?wh=2658*1210\" alt=\"\"></p><p>è¿™å‘Šè¯‰æˆ‘ä»¬ï¼Œä»»ä½•ä¸œè¥¿ç†è®ºä¸Šå’Œå®é™…ä¸Šæ˜¯æœ‰å·®è·çš„ï¼Œè¯·å‹¿è¿·ä¿¡æ•™ç§‘ä¹¦çš„ç†è®ºï¼Œæœ€å¥½åœ¨ä¸‹å®šè®ºä¹‹å‰å®é™…æµ‹è¯•ä¸€ä¸‹ã€‚æŠ›å¼€ç®—æ³•å±‚é¢ä¸è°ˆï¼Œç”±äºCPUç¼“å­˜ã€å†…å­˜è¿ç»­æ€§ç­‰é—®é¢˜ï¼Œé“¾è¡¨è¿™ç§æ•°æ®ç»“æ„çš„å®ç°æ–¹å¼å¯¹æ€§èƒ½å¹¶ä¸å‹å¥½ï¼Œå³ä½¿åœ¨å®ƒæœ€æ“…é•¿çš„åœºæ™¯éƒ½ä¸ä¸€å®šå¯ä»¥å‘æŒ¥å¨åŠ›ã€‚</p><h2>é‡ç‚¹å›é¡¾</h2><p>ä»Šå¤©ï¼Œæˆ‘åˆ†äº«äº†è‹¥å¹²å’ŒListåˆ—è¡¨ç›¸å…³çš„é”™è¯¯æ¡ˆä¾‹ï¼ŒåŸºæœ¬éƒ½æ˜¯ç”±â€œæƒ³å½“ç„¶â€å¯¼è‡´çš„ã€‚</p><p>ç¬¬ä¸€ï¼Œæƒ³å½“ç„¶è®¤ä¸ºï¼ŒArrays.asListå’ŒList.subListå¾—åˆ°çš„Listæ˜¯æ™®é€šçš„ã€ç‹¬ç«‹çš„ArrayListï¼Œåœ¨ä½¿ç”¨æ—¶å‡ºç°å„ç§å¥‡æ€ªçš„é—®é¢˜ã€‚</p><ul>\n<li>Arrays.asListå¾—åˆ°çš„æ˜¯Arraysçš„å†…éƒ¨ç±»ArrayListï¼ŒList.subListå¾—åˆ°çš„æ˜¯ArrayListçš„å†…éƒ¨ç±»SubListï¼Œä¸èƒ½æŠŠè¿™ä¸¤ä¸ªå†…éƒ¨ç±»è½¬æ¢ä¸ºArrayListä½¿ç”¨ã€‚</li>\n<li>Arrays.asListç›´æ¥ä½¿ç”¨äº†åŸå§‹æ•°ç»„ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯å…±äº«â€œå­˜å‚¨â€ï¼Œè€Œä¸”ä¸æ”¯æŒå¢åˆ å…ƒç´ ï¼›List.subListç›´æ¥å¼•ç”¨äº†åŸå§‹çš„Listï¼Œä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯å…±äº«â€œå­˜å‚¨â€ï¼Œè€Œä¸”å¯¹åŸå§‹Listç›´æ¥è¿›è¡Œç»“æ„æ€§ä¿®æ”¹ä¼šå¯¼è‡´SubListå‡ºç°å¼‚å¸¸ã€‚</li>\n<li>å¯¹Arrays.asListå’ŒList.subListå®¹æ˜“å¿½ç•¥çš„æ˜¯ï¼Œæ–°çš„ListæŒæœ‰äº†åŸå§‹æ•°æ®çš„å¼•ç”¨ï¼Œå¯èƒ½ä¼šå¯¼è‡´åŸå§‹æ•°æ®ä¹Ÿæ— æ³•GCçš„é—®é¢˜ï¼Œæœ€ç»ˆå¯¼è‡´OOMã€‚</li>\n</ul><p>ç¬¬äºŒï¼Œæƒ³å½“ç„¶è®¤ä¸ºï¼ŒArrays.asListä¸€å®šå¯ä»¥æŠŠæ‰€æœ‰æ•°ç»„è½¬æ¢ä¸ºæ­£ç¡®çš„Listã€‚å½“ä¼ å…¥åŸºæœ¬ç±»å‹æ•°ç»„çš„æ—¶å€™ï¼ŒListçš„å…ƒç´ æ˜¯æ•°ç»„æœ¬èº«ï¼Œè€Œä¸æ˜¯æ•°ç»„ä¸­çš„å…ƒç´ ã€‚</p><p>ç¬¬ä¸‰ï¼Œæƒ³å½“ç„¶è®¤ä¸ºï¼Œå†…å­˜ä¸­ä»»ä½•é›†åˆçš„æœç´¢éƒ½æ˜¯å¾ˆå¿«çš„ï¼Œç»“æœåœ¨æœç´¢è¶…å¤§ArrayListçš„æ—¶å€™é‡åˆ°æ€§èƒ½é—®é¢˜ã€‚æˆ‘ä»¬è€ƒè™‘åˆ©ç”¨HashMapå“ˆå¸Œè¡¨éšæœºæŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(1)è¿™ä¸ªç‰¹æ€§æ¥ä¼˜åŒ–æ€§èƒ½ï¼Œä¸è¿‡ä¹Ÿè¦è€ƒè™‘HashMapå­˜å‚¨ç©ºé—´ä¸Šçš„ä»£ä»·ï¼Œè¦å¹³è¡¡æ—¶é—´å’Œç©ºé—´ã€‚</p><p>ç¬¬å››ï¼Œæƒ³å½“ç„¶è®¤ä¸ºï¼Œé“¾è¡¨é€‚åˆå…ƒç´ å¢åˆ çš„åœºæ™¯ï¼Œé€‰ç”¨LinkedListä½œä¸ºæ•°æ®ç»“æ„ã€‚åœ¨çœŸå®åœºæ™¯ä¸­è¯»å†™å¢åˆ ä¸€èˆ¬æ˜¯å¹³è¡¡çš„ï¼Œè€Œä¸”å¢åˆ ä¸å¯èƒ½åªæ˜¯å¯¹å¤´å°¾å¯¹è±¡è¿›è¡Œæ“ä½œï¼Œå¯èƒ½åœ¨90%çš„æƒ…å†µä¸‹éƒ½å¾—ä¸åˆ°æ€§èƒ½å¢ç›Šï¼Œå»ºè®®ä½¿ç”¨ä¹‹å‰é€šè¿‡æ€§èƒ½æµ‹è¯•è¯„ä¼°ä¸€ä¸‹ã€‚</p><p>ä»Šå¤©ç”¨åˆ°çš„ä»£ç ï¼Œæˆ‘éƒ½æ”¾åœ¨äº†GitHubä¸Šï¼Œä½ å¯ä»¥ç‚¹å‡»<a href=\"https://github.com/JosephZhu1983/java-common-mistakes\">è¿™ä¸ªé“¾æ¥</a>æŸ¥çœ‹ã€‚</p><h2>æ€è€ƒä¸è®¨è®º</h2><p>æœ€åï¼Œæˆ‘ç»™ä½ ç•™ä¸‹ä¸ArrayListåœ¨åˆ é™¤å…ƒç´ æ–¹é¢çš„å‘æœ‰å…³çš„ä¸¤ä¸ªæ€è€ƒé¢˜å§ã€‚</p><ol>\n<li>è°ƒç”¨ç±»å‹æ˜¯Integerçš„ArrayListçš„removeæ–¹æ³•åˆ é™¤å…ƒç´ ï¼Œä¼ å…¥ä¸€ä¸ªIntegeråŒ…è£…ç±»çš„æ•°å­—å’Œä¼ å…¥ä¸€ä¸ªintåŸºæœ¬ç±»å‹çš„æ•°å­—ï¼Œç»“æœä¸€æ ·å—ï¼Ÿ</li>\n<li>å¾ªç¯éå†Listï¼Œè°ƒç”¨removeæ–¹æ³•åˆ é™¤å…ƒç´ ï¼Œå¾€å¾€ä¼šé‡åˆ°ConcurrentModificationExceptionå¼‚å¸¸ï¼ŒåŸå› æ˜¯ä»€ä¹ˆï¼Œä¿®å¤æ–¹å¼åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</li>\n</ol><p>ä½ è¿˜é‡åˆ°è¿‡ä¸é›†åˆç±»ç›¸å…³çš„å…¶ä»–å‘å—ï¼Ÿæˆ‘æ˜¯æœ±æ™”ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºä¸æˆ‘ç•™è¨€åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–åŒäº‹ï¼Œä¸€èµ·äº¤æµã€‚</p>","comments":[{"had_liked":false,"id":200592,"user_name":"Darren","can_delete":false,"product_type":"c1","uid":1254968,"ip_address":"","ucode":"CCD2B2C492BE9A","user_header":"https://static001.geekbang.org/account/avatar/00/13/26/38/ef063dc2.jpg","comment_is_top":true,"comment_ctime":1585622027,"is_pvip":true,"replies":[{"id":"75021","content":"ç‚¹èµ","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1585624062,"ip_address":"","comment_id":200592,"utype":1}],"discussion_count":4,"race_medal":0,"score":"9.2233724378724004e+18","product_id":100047701,"comment_content":"å“ˆå“ˆï¼Œå¥½å·§ï¼Œå‰ä¸¤å¹´æœ‰æ®µæ—¶é—´æ¯”è¾ƒé—²ï¼Œç ”ç©¶ArrayListå’ŒLinkedListï¼Œä¹Ÿå¯¹äºæ‰€è°“çš„ArrayListæŸ¥è¯¢å¿«ï¼Œå¢åˆ æ…¢ä»¥åŠLinkedListæŸ¥è¯¢æ…¢ï¼Œå¢åˆ å¿«æå‡ºè¿‡ç–‘é—®ï¼Œä¹Ÿåšè¿‡ç±»ä¼¼çš„å®éªŒï¼Œç„¶åå»å¹´ç»™19å¹´æ ¡æ‹›ç”Ÿå…¥èŒåŸ¹è®­çš„æ—¶å€™è¿˜ä¸“é—¨åˆ†äº«è¿‡ã€‚è¦æ‰“ç ´å¸¸è§„æ€ç»´ï¼Œå¤šé—®ä¸ºä»€ä¹ˆï¼Œè¦å¤šå¬å¤šçœ‹ï¼Œå¤šå®éªŒã€‚<br>å›ç­”ä¸‹é—®é¢˜ï¼š<br>1ã€intç±»å‹æ˜¯indexï¼Œä¹Ÿå°±æ˜¯ç´¢å¼•ï¼Œæ˜¯æŒ‰ç…§å…ƒç´ ä½ç½®åˆ é™¤çš„ï¼›Integeræ˜¯åˆ é™¤æŸä¸ªå…ƒç´ ï¼Œå†…éƒ¨æ˜¯é€šè¿‡éå†æ•°ç»„ç„¶åå¯¹æ¯”ï¼Œæ‰¾åˆ°æŒ‡å®šçš„å…ƒç´ ï¼Œç„¶ååˆ é™¤ï¼›ä¸¤ä¸ªéƒ½éœ€è¦è¿›è¡Œæ•°ç»„æ‹·è´ï¼Œæ˜¯é€šè¿‡System.arraycopyè¿›è¡Œçš„<br>2ã€ä»¥foreachä¸ºä¾‹è¯´ï¼Œéå†åˆ é™¤å®è´¨æ˜¯å˜åŒ–ä¸ºè¿­ä»£å™¨å®ç°ï¼Œä¸ç®¡æ˜¯è¿­ä»£å™¨é‡Œé¢çš„remove()è¿˜æ˜¯next()æ–¹æ³•,éƒ½ä¼šcheckForComodification();è€Œè¿™ä¸ªæ–¹æ³•æ˜¯åˆ¤æ–­modCountå’ŒexpectedModCountæ˜¯å¦ç›¸ç­‰ï¼Œè¿™ä¸ªmodCountæ˜¯è¿™ä¸ªlisté›†åˆä¿®æ”¹çš„æ¬¡æ•°ï¼Œæ¯ä¸€æ¬¡addæˆ–è€…removeéƒ½ä¼šå¢åŠ è¿™ä¸ªå˜é‡ï¼Œç„¶åè¿­ä»£å™¨æ¯æ¬¡å»nextæˆ–è€…å»removeçš„æ—¶å€™æ£€æŸ¥checkForComodification();å‘ç°expectedModCount(è¿™ä¸ªè¿­ä»£å™¨ä¿®æ”¹çš„æ¬¡æ•°)å’ŒmodCount(è¿™ä¸ªé›†åˆå®é™…ä¿®æ”¹çš„æ¬¡æ•°)ä¸ç›¸ç­‰ï¼Œå°±ä¼šæŠ›å‡ºConcurrentModificationExceptionï¼Œè¿­ä»£å™¨é‡Œé¢æ²¡æœ‰addæ–¹æ³•ï¼Œç”¨è¿­ä»£å™¨æ—¶ï¼Œå¯ä»¥åˆ é™¤åŸæ¥é›†åˆçš„å…ƒç´ ï¼Œä½†æ˜¯ï¼ä¸€å®šè¦ç”¨è¿­ä»£å™¨çš„removeæ–¹æ³•è€Œä¸æ˜¯é›†åˆè‡ªèº«çš„removeæ–¹æ³•ï¼Œå¦åˆ™æŠ›å¼‚å¸¸ã€‚","like_count":94,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490078,"discussion_content":"ç‚¹èµ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1585624062,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1100750,"avatar":"https://static001.geekbang.org/account/avatar/00/10/cb/ce/d9e00eb5.jpg","nickname":"undefined","note":"","ucode":"768098DBDBE333","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":363414,"discussion_content":"èµäº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1617191268,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1666025,"avatar":"https://static001.geekbang.org/account/avatar/00/19/6b/e9/7620ae7e.jpg","nickname":"é›¨è½ï½ç´«ç«¹","note":"","ucode":"33CED2F34E708F","race_medal":4,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304980,"discussion_content":"æ—©ç‚¹çœ‹åˆ°è¿™ä¸“æ   ä¹Ÿä¸ä¼šåœ¨äºŒé¢åƒé‚£ä¹ˆå¤šäº  å”‰","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1599730350,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1075267,"avatar":"https://static001.geekbang.org/account/avatar/00/10/68/43/1fe64086.jpg","nickname":"zero_","note":"","ucode":"14D3AD3D997112","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552971,"discussion_content":"éå†åˆ é™¤å®è´¨æ˜¯å˜åŒ–ä¸ºè¿­ä»£å™¨å®ç°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645672464,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200637,"user_name":"eazonshaw","can_delete":false,"product_type":"c1","uid":1493784,"ip_address":"","ucode":"423952F7CEF475","user_header":"https://static001.geekbang.org/account/avatar/00/16/cb/18/4877c08b.jpg","comment_is_top":false,"comment_ctime":1585626842,"is_pvip":false,"replies":[{"id":"75036","content":"è¿™ä¸ªå›å¤æŒºæœ‰æˆ‘çš„å†™ä½œé£æ ¼ ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1585627394,"ip_address":"","comment_id":200637,"utype":1}],"discussion_count":1,"race_medal":0,"score":"143319547610","product_id":100047701,"comment_content":"æ€è€ƒé¢˜ï¼š<br>1. ä¸ä¸€æ ·ã€‚ä½¿ç”¨ ArrayList çš„ removeæ–¹æ³•ï¼Œå¦‚æœä¼ å‚æ˜¯ Integerç±»å‹çš„è¯ï¼Œè¡¨ç¤ºçš„æ˜¯åˆ é™¤å…ƒç´ ï¼Œå¦‚æœä¼ å‚æ˜¯intç±»å‹çš„è¯ï¼Œè¡¨ç¤ºçš„æ˜¯åˆ é™¤ç›¸å¯¹åº”ç´¢å¼•ä½ç½®çš„å…ƒç´ ã€‚<br>åŒæ—¶ï¼Œåšäº†ä¸ªå°å®éªŒï¼Œå¦‚æœæ˜¯Stringç±»å‹çš„ArrayListï¼Œä¼ å‚æ˜¯Integerç±»å‹æ—¶ï¼Œremoveæ–¹æ³•åªæ˜¯è¿”å›falseï¼Œè§†ä¸ºå…ƒç´ ä¸å­˜åœ¨ã€‚<br>2. åŸå› ï¼šæŸ¥çœ‹æºç å¯ä»¥å‘ç°ï¼Œremoveæ–¹æ³•ä¼šå‘ç”Ÿç»“æ„åŒ–ä¿®æ”¹ï¼Œä¹Ÿå°±æ˜¯ modCount ä¼šå¢åŠ ã€‚å½“å¾ªç¯è¿‡ç¨‹ä¸­ï¼Œæ¯”è¾ƒå½“å‰ List çš„ modCount ä¸åˆå§‹çš„ modCount ä¸ç›¸ç­‰ï¼Œå°±ä¼šæŠ¥ ConcurrentModificationExceptionã€‚è§£å†³æ–¹æ³•ï¼š1.ä½¿ç”¨ ArrayList çš„è¿­ä»£å™¨ iteratorï¼Œå¹¶è°ƒç”¨ä¹‹ä¸­çš„removeæ–¹æ³•ã€‚æŸ¥çœ‹æºç å¯ä»¥å‘ç°ï¼Œå†…éƒ¨ç±»çš„removeæ–¹æ³•ï¼Œä¼šç»´æŠ¤ä¸€ä¸ªexpectedModCountï¼Œä½¿å…¶ä¸ ArrayList çš„modCountä¿æŒä¸€è‡´ã€‚2.å¦‚æœæ˜¯java 8ï¼Œå¯ä»¥ä½¿ç”¨removeIfæ–¹æ³•è¿›è¡Œåˆ é™¤æ“ä½œã€‚<br><br>```<br>int expectedModCount = modCount;<br>public void remove() {<br>    ...<br>    checkForComodification();<br><br>    try {<br>        ...<br>        expectedModCount = modCount;<br>    } catch (IndexOutOfBoundsException ex) {<br>        throw new ConcurrentModificationException();<br>    }<br>}<br>final void checkForComodification() {<br>    if (modCount != expectedModCount)<br>        throw new ConcurrentModificationException();<br>}<br>```","like_count":33,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490084,"discussion_content":"è¿™ä¸ªå›å¤æŒºæœ‰æˆ‘çš„å†™ä½œé£æ ¼ ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585627394,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200552,"user_name":"ç§‹æ°´","can_delete":false,"product_type":"c1","uid":1803454,"ip_address":"","ucode":"84F6843986CDE2","user_header":"https://static001.geekbang.org/account/avatar/00/1b/84/be/0370eae1.jpg","comment_is_top":false,"comment_ctime":1585618023,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"134729604199","product_id":100047701,"comment_content":"çœŸçš„æ˜¯è¿·ä¿¡äº†LinkedList","like_count":32},{"had_liked":false,"id":200578,"user_name":"ğŸ‘½","can_delete":false,"product_type":"c1","uid":1274117,"ip_address":"","ucode":"D313AF941B412D","user_header":"https://static001.geekbang.org/account/avatar/00/13/71/05/db554eba.jpg","comment_is_top":false,"comment_ctime":1585620063,"is_pvip":false,"replies":[{"id":"75015","content":"ğŸ‘ğŸ»ï¼Œæºç ListRemoveApplicationä¸­ä¹Ÿæœ‰æˆ‘çš„å®ç°","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1585621156,"ip_address":"","comment_id":200578,"utype":1}],"discussion_count":1,"race_medal":0,"score":"44535293023","product_id":100047701,"comment_content":"æ€è€ƒé¢˜2ï¼š<br>ä¾¿åˆ©é€šå¸¸çš„å®ç°æ–¹å¼forå†’å·çš„å®ç°ï¼Œå…¶å®åº•å±‚è¿˜æ˜¯ç”¨Iterator åˆ é™¤å…ƒç´ ï¼ŒæŸ¥çœ‹classæ–‡ä»¶å¤§æ¦‚æ˜¯è¿™æ ·ï¼š<br><br>Iterator var2 = list.iterator();<br>    while(var2.hasNext()) {<br>      Integer integer = (Integer)var2.next();<br>      list.remove(integer);<br>    }<br><br>åˆ é™¤å…ƒç´ åä¼šè°ƒç”¨nextæ–¹æ³•ï¼Œnextè°ƒç”¨checkForComodificationæ–¹æ³•ï¼š<br>final void checkForComodification() {<br>            if (modCount != expectedModCount)<br>                throw new ConcurrentModificationException();<br>        }<br>expectedModCountæ˜¯åˆå§‹åŒ–æ—¶ï¼Œæ•°ç»„çš„modCount ï¼Œä¹Ÿå°±æ˜¯è¯´â€”â€”åˆå§‹åŒ–çš„æ•°ç»„é•¿åº¦å’Œè°ƒç”¨nextæ–¹æ³•æ—¶æ•°ç»„é•¿åº¦ä¸ä¸€æ ·æ—¶ï¼Œå°±ä¼šConcurrentModificationExceptionï¼Œç†è®ºä¸Šè®²ï¼Œä¸ä»…ä»…removeï¼Œç”šè‡³æ˜¯addä¹Ÿä¸€æ ·ä¼šæŠ¥é”™ã€‚<br><br>å°è¯•æµ‹è¯•ï¼Œå°†removeæ”¹ä¸ºaddï¼š<br>while(var2.hasNext()) {<br>      Integer integer = (Integer)var2.next();<br>      list.add(integer);<br>    }<br>ç¡®å®ä¼šæŠ¥é”™ã€‚<br><br>çŸ¥é“äº†æŠ¥é”™çš„åŸå› ï¼Œè¦ä¿®å¤å€’ä¹Ÿä¸éš¾ã€‚<br>é¦–å…ˆï¼Œæ‘’å¼ƒforå†’å·ï¼Œä½¿ç”¨è¿­ä»£å™¨ï¼ˆå…¶å®è¿­ä»£å™¨ä¹Ÿæ˜¯forå†’å·ï¼‰<br>æ—¢ç„¶ï¼Œè¿­ä»£å™¨åœ¨Listé•¿åº¦ä¸è¿­ä»£å™¨åˆå§‹åŒ–æ—¶è¯†åˆ«åˆ°çš„Listé•¿åº¦ä¸ä¸€è‡´å°±ä¼šæŠ¥é”™ã€‚é‚£å°±é¡ºç€å®ƒçš„æ„æ€æ¥å¤„ç†ï¼Œæ¯æ¬¡Listé•¿åº¦ä¿®æ”¹æ—¶ï¼Œé‡æ–°åˆå§‹åŒ–è¿­ä»£å™¨ã€‚ç›¸å½“äºé•¿åº¦é‡æ–°åˆå§‹åŒ–ã€‚<br><br>å‡è®¾æ•°ç»„åˆå§‹é•¿åº¦æ—¶10ï¼Œå½¢æˆçš„ç»“æœå°±æ˜¯ï¼š<br>Iterator åˆå§‹åŒ– expectedModCount = 10ï¼›<br>ç„¶ååˆ é™¤æŸå…ƒç´ ï¼Œæ•°ç»„é•¿åº¦9ï¼ŒIterator é•¿åº¦10ï¼Œè¿™æ—¶å€™å¦‚æœè°ƒç”¨nextå°±ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥ï¼Œåœ¨è¿™æ—¶å€™ï¼Œé‡æ–°åˆå§‹åŒ–Iterator <br>Iterator  é•¿åº¦åˆå§‹åŒ–ä¸º9ï¼Œä¸æ•°ç»„é•¿åº¦ä¸€è‡´ï¼Œå°±é¿å…äº†æŠ¥é”™ã€‚<br>ä»£ç å®ç°å¦‚ä¸‹ï¼š<br>Iterator var2 = list.iterator();<br>    while(var2.hasNext()) {<br>      Integer integer = (Integer)var2.next();<br>      if (integer.equals(2)){<br>        list.remove(integer);<br>        var2 = list.iterator();<br>      }<br>    }<br><br>ä»£ç å†™çš„æ¯”è¾ƒéšæ„ï¼Œå¯èƒ½å­˜åœ¨çº°æ¼ã€‚æ¬¢è¿æŒ‡ç‚¹<br><br>","like_count":11,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490074,"discussion_content":"ğŸ‘ğŸ»ï¼Œæºç ListRemoveApplicationä¸­ä¹Ÿæœ‰æˆ‘çš„å®ç°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585621156,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200559,"user_name":"ğŸ‘½","can_delete":false,"product_type":"c1","uid":1274117,"ip_address":"","ucode":"D313AF941B412D","user_header":"https://static001.geekbang.org/account/avatar/00/13/71/05/db554eba.jpg","comment_is_top":false,"comment_ctime":1585618429,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"44535291389","product_id":100047701,"comment_content":"æ€è€ƒé¢˜1ï¼š<br>ä¸ä¸€æ ·ï¼Œ<br>remove çš„ä¸¤å®ç°ï¼Œ<br>åŒ…è£…ç±»å‹è°ƒç”¨çš„æ˜¯ boolean remove(Object o);æ–¹æ³•ï¼Œæœ¬è´¨ä¸Šæ˜¯å¯»æ‰¾é›†åˆä¸­æ˜¯å¦æœ‰è¯¥å…ƒç´ ï¼Œæœ‰åˆ™åˆ é™¤ã€‚<br>åŸºæœ¬ç±»å‹int è°ƒç”¨çš„æ˜¯public E remove(int index)æ–¹æ³•ï¼Œå®ç°æ˜¯ç›´æ¥åˆ é™¤ä¸‹æ ‡ã€‚<br>å¦å¤–è¿”å›å€¼ä¹Ÿæœ‰åŒºåˆ«ï¼Œ<br>åŒ…è£…ç±»å‹removeè¿”å›å¸ƒå°”ï¼Œæœ‰è¯¥å¯¹è±¡åˆ™è¿”å›trueå¹¶åˆ é™¤ï¼Œæ²¡æœ‰åˆ™è¿”å›false<br>åŸºæœ¬ç±»å‹çš„removeè¿”å›æ³›å‹å¯¹è±¡ï¼Œæœ‰åˆ™è¿”å›è¯¥å¯¹è±¡ï¼Œå› ä¸ºæ˜¯è·Ÿæ®ä¸‹æ ‡åˆ é™¤ï¼Œæ‰€ä»¥ä¸å­˜åœ¨æ²¡æœ‰çš„æƒ…å†µï¼Œé™¤éä¸‹æ ‡è¶Šç•Œ<br>","like_count":10},{"had_liked":false,"id":200548,"user_name":"ğŸ‘½","can_delete":false,"product_type":"c1","uid":1274117,"ip_address":"","ucode":"D313AF941B412D","user_header":"https://static001.geekbang.org/account/avatar/00/13/71/05/db554eba.jpg","comment_is_top":false,"comment_ctime":1585617968,"is_pvip":false,"replies":[{"id":"75005","content":"å¾ˆä¸é”™çš„æ€»ç»“","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1585618794,"ip_address":"","comment_id":200548,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23060454448","product_id":100047701,"comment_content":"æ„Ÿè§¦é¢‡æ·±ï¼š<br>Arraysçš„asListå’ŒsubListï¼Œä½¿ç”¨è¿‡ç¨‹ä¸­éœ€è¦è°¨æ…ï¼Œç”šè‡³å¯ä»¥è€ƒè™‘ç›´æ¥ä¸ç”¨ã€‚<br>è¦ç†Ÿæ‚‰æ•°æ®ç»“æ„ã€‚ArrayList å’Œ HashMapå°±æ˜¯å…¸å‹å¯¹æ¯”ï¼ŒArrayListæ›´é€‚åˆéšæœºè®¿é—®ï¼ŒèŠ‚çº¦å†…å­˜ç©ºé—´ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æ€§èƒ½ä¸é”™ã€‚ä½†ï¼Œå› ä¸ºå…¶æœ¬è´¨ä¸Šæ˜¯æ•°ç»„ï¼Œæ‰€ä»¥ï¼Œæ— æ³•å®ç°å¿«é€Ÿæ‰¾åˆ°æƒ³è¦çš„å€¼ã€‚<br>LinkedList  æ²¡æœ‰æƒ³è±¡ä¸­å¥½ç”¨ï¼Œä½¿ç”¨å‰è¯·è€ƒè™‘æ¸…æ¥šã€‚<br>","like_count":5,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490062,"discussion_content":"å¾ˆä¸é”™çš„æ€»ç»“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585618794,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200523,"user_name":"hellojd","can_delete":false,"product_type":"c1","uid":1341697,"ip_address":"","ucode":"4E51807AE7E472","user_header":"https://static001.geekbang.org/account/avatar/00/14/79/01/e71510dc.jpg","comment_is_top":false,"comment_ctime":1585615660,"is_pvip":false,"replies":[{"id":"75004","content":"ï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1585618766,"ip_address":"","comment_id":200523,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23060452140","product_id":100047701,"comment_content":"å­¦ä¹ åˆ°äº†è€å¸ˆçš„æ¢ç´¢ç²¾ç¥ï¼Œlinedlistéšæœºæ’å…¥æ€§èƒ½å±…ç„¶ä¸é«˜ï¼Œåˆ·æ–°äº†è®¤çŸ¥ã€‚","like_count":5,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490055,"discussion_content":"ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585618766,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200473,"user_name":"å¤±ç«çš„å¤å¤©","can_delete":false,"product_type":"c1","uid":1241770,"ip_address":"","ucode":"10C6E66EB2A65F","user_header":"https://static001.geekbang.org/account/avatar/00/12/f2/aa/32fc0d54.jpg","comment_is_top":false,"comment_ctime":1585602527,"is_pvip":false,"replies":[{"id":"74993","content":"1. ä»å®Œå¤‡æ€§è§’åº¦è¯´sdkéœ€è¦è¿™æ ·çš„æ•°æ®ç»“æ„<br>2. å°±è¿™ä¸ªæ•°æ®ç»“æ„æœ¬èº«å®ç°ä¸Šå¹¶æ— é—®é¢˜<br>3. ä¹Ÿå®Œå…¨ä¸æ˜¯ä¸€æ— æ˜¯å¤„ä»»ä½•åœºæ™¯éƒ½æ²¡æœ‰ä¼˜åŠ¿<br>è¿˜æ˜¯ç•™ç€å§","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1585616417,"ip_address":"","comment_id":200473,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23060439007","product_id":100047701,"comment_content":"1.removeåŒ…è£…ç±»æ•°å­—æ˜¯åˆ é™¤å¯¹è±¡ï¼ŒåŸºæœ¬ç±»å‹çš„intæ•°å­—æ˜¯åˆ é™¤ä¸‹æ ‡ã€‚<br>2.å¥½åƒæ˜¯modcountå’Œä»€ä¹ˆä¸œè¥¿å¯¹ä¸ä¸Šæ¥ç€ï¼Œå…·ä½“å¿˜è®°äº†ï¼Œçœ‹çœ‹å…¶ä»–å¤§ä½¬æ€ä¹ˆè¯´ã€‚è§£å†³è¿™ç©æ„å°±æ˜¯æ”¹ç”¨è¿­ä»£å™¨éå†ï¼Œè°ƒç”¨è¿­ä»£å™¨çš„removeæ–¹æ³•ã€‚<br><br>è¯è¯´åˆ°è¿™ä¸ªlinkedlistï¼ŒçœŸæ˜¯æ„Ÿè§‰å…¨é¢è¢«arraylistå‹åˆ¶ã€‚é‚£è¿™æ•°æ®ç»“æ„è¿˜ç•™ç€å¹²å˜›å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸åˆ æ‰ç®—äº†ã€‚ã€‚ã€‚æˆ‘ä¸ªäººæ„Ÿè§‰linekdliståªæœ‰åœ¨å¤´å°¾åŠ å…¥åˆ é™¤å…ƒç´ çš„æ—¶å€™æœ‰ä¸€ç‚¹ç‚¹ä¼˜åŠ¿äº†å§ã€‚ç”¨é˜Ÿåˆ—æˆ–è€…åŒç«¯é˜Ÿåˆ—çš„æ—¶å€™ä¼šå¶ç„¶ç”¨åˆ°ã€‚ä½†æ˜¯æ„Ÿè§‰ç”¨å¯¹åº”çš„æ•°ç»„æ¨¡å¼å®ç°ï¼Œæ•ˆç‡ä¼šæ›´é«˜äº›ï¼Œå°±æ˜¯è¦è€ƒè™‘æ‰©å®¹çš„é—®é¢˜ã€‚<br><br>è€å¸ˆèƒ½å¸®å¿™è§£ç­”ä¸€ä¸‹linkedlistç•™ä¸‹æ²¡åˆ æ˜¯å› ä¸ºä»€ä¹ˆå—ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490039,"discussion_content":"1. ä»å®Œå¤‡æ€§è§’åº¦è¯´sdkéœ€è¦è¿™æ ·çš„æ•°æ®ç»“æ„\n2. å°±è¿™ä¸ªæ•°æ®ç»“æ„æœ¬èº«å®ç°ä¸Šå¹¶æ— é—®é¢˜\n3. ä¹Ÿå®Œå…¨ä¸æ˜¯ä¸€æ— æ˜¯å¤„ä»»ä½•åœºæ™¯éƒ½æ²¡æœ‰ä¼˜åŠ¿\nè¿˜æ˜¯ç•™ç€å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585616417,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1225974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b4/f6/e39d5af1.jpg","nickname":"é’±ç±³","note":"","ucode":"07AA44C6A40D34","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389487,"discussion_content":"æˆ‘å¯ä»¥ä¸ç”¨ï¼Œä½ ä¸èƒ½æ²¡æœ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629292016,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":202030,"user_name":"æ±æ—å¤–å²","can_delete":false,"product_type":"c1","uid":1188906,"ip_address":"","ucode":"3C66C0F0537A99","user_header":"https://static001.geekbang.org/account/avatar/00/12/24/2a/33441e2b.jpg","comment_is_top":false,"comment_ctime":1585890273,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14470792161","product_id":100047701,"comment_content":"1. intä¼šè°ƒç”¨ public E remove(int index)æ–¹æ³•   Integerä¼šè°ƒç”¨public boolean remove(Object o)æ–¹æ³•<br><br>2.modcountæ”¹å˜å¯¼è‡´çš„å¼‚å¸¸  æ”¹ç”¨foreachçš„æ–¹å¼ã€‚","like_count":3},{"had_liked":false,"id":201727,"user_name":"çœ‹ä¸åˆ°deé¢œè‰²","can_delete":false,"product_type":"c1","uid":1162714,"ip_address":"","ucode":"88348CCAE81931","user_header":"https://static001.geekbang.org/account/avatar/00/11/bd/da/3d76ea74.jpg","comment_is_top":false,"comment_ctime":1585826634,"is_pvip":false,"replies":[{"id":"75523","content":"æœ‰å…±é¸£å°±å¥½","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1585898741,"ip_address":"","comment_id":201727,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14470728522","product_id":100047701,"comment_content":"è€å¸ˆè¿™æœŸçš„è¯¾ç¨‹å¤ªè®©äººäº§ç”Ÿå…±é¸£äº†ã€‚ä¹‹å‰ç”Ÿäº§å°±å‡ºè¿‡é—®é¢˜ã€‚è°ƒç”¨æ–¹æ³•ï¼Œè¾¾åˆ°äº†ç”¨Arrays.asListè¿”å›çš„é›†åˆï¼Œç„¶åå¯¹é›†åˆæ“ä½œæ—¶å°±å‡ºäº†ä¸€åœºã€‚å½“æ—¶çœ‹äº†asListçš„æºç æ—¶æ‰å‘ç°JDKå±…ç„¶è¿˜æœ‰è¿™ç§å‘ã€‚subListä¹Ÿç¡®å®æ˜¯ä¸€ä¸ªå¾ˆå®¹æ˜“é‡‡å‘çš„åœ°æ–¹ï¼ŒsubListæœ¬è´¨ä¸Šå°±æ˜¯æŠŠåŸListæŠ¥äº†å±‚çš®è¿”å›äº†ã€‚å…³äºListListï¼Œå¤´æ’çš„è¯æ€§èƒ½åº”è¯¥æ˜¯ä¼šç¢¾å‹ArrayListï¼Œä½†æ˜¯å°±çœ‹æœ‰æ²¡æœ‰è¿™ç§åœºæ™¯äº†ã€‚<br>è¯¾åç»ƒä¹ ï¼š<br>1.æ ¹æ®APIå¯ä»¥çœ‹å‡ºï¼Œremove(int index) &#47; remove(Object element)<br>2.Iteratorè¿‡ç¨‹ä¸­é›†åˆç»“æ„ä¸èƒ½å‘ç”Ÿå˜åŒ–ï¼Œé€šå¸¸æ˜¯éå†è¿‡ç¨‹ä¸­å…¶ä»–çº¿ç¨‹å¯¹é›†åˆè¿›è¡Œäº†add&#47;removeã€‚å¯ä»¥ç”¨CopyOnWriteé›†åˆæ¥é¿å…ã€‚<br>","like_count":3,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490404,"discussion_content":"æœ‰å…±é¸£å°±å¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585898741,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205175,"user_name":"å¤§å¤§å¤§ç†Šmyeh","can_delete":false,"product_type":"c1","uid":1139413,"ip_address":"","ucode":"4832C2E7CEB151","user_header":"https://static001.geekbang.org/account/avatar/00/11/62/d5/1f5c5ab6.jpg","comment_is_top":false,"comment_ctime":1586565506,"is_pvip":false,"replies":[{"id":"76680","content":"ğŸ‘ğŸ»","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1586571602,"ip_address":"","comment_id":205175,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10176500098","product_id":100047701,"comment_content":"å·§äº†ï¼Œæ€è€ƒé¢˜1ä¸æˆ‘ä¹‹å‰é‡åˆ°çš„é—®é¢˜ä¸€æ ·ï¼ŒList#removeæ–¹æ³•ç«Ÿç„¶æ²¡åˆ æ‰é‡Œé¢çš„å…ƒç´ ï¼Œæœ€åæ‰å‘ç°åŸæ¥æ˜¯é‡è½½æ–¹æ³•çš„é”…ï¼Œintæ˜¯åˆ Listä¸­è¯¥ç´¢å¼•çš„å…ƒç´ ï¼ŒIntegeræ˜¯åˆ é™¤Listä¸­å€¼ä¸ºè¯¥Integerçš„å…ƒç´ ã€‚<br><br>å½“æ—¶è¿˜å†™äº†ç¯‡åšå®¢è®°å½•ï¼Œæ¬ä¸çŸ¥è€»çš„æ”¾ä¸Šæ¥ï¼šhttps:&#47;&#47;planeswalker23.github.io&#47;2018&#47;09&#47;10&#47;List-remove&#47;<br><br>æœ¬ç¯‡æ”¶è·é¢‡å¤šï¼Œç‰¹åˆ«æ˜¯å…³äºLinkedListçš„å¢åˆ å¤æ‚åº¦ï¼Œä¹‹å‰ä¹Ÿæ²¡çœ‹è¿‡LinkedListæºç ï¼Œäºæ˜¯ä¸€ç›´ä»¥ä¸ºå¢åˆ å¾ˆå¿«ã€‚<br><br>å¾—åˆ°ä¸€ä¸ªç»“è®ºï¼šä»»ä½•æ€»ç»“ï¼Œè¿˜æ˜¯å¾—ä»¥æºç ä¸ºåŸºç¡€ã€‚æ‰€æœ‰ä¸çœ‹æºç çš„æ€»ç»“éƒ½æ˜¯è€æµæ°“ã€‚","like_count":2,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491414,"discussion_content":"ğŸ‘ğŸ»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586571602,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205034,"user_name":"ç¨‹åºå‘˜å°è·ƒ","can_delete":false,"product_type":"c1","uid":1015483,"ip_address":"","ucode":"25BB96E0791A60","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7e/bb/947c329a.jpg","comment_is_top":false,"comment_ctime":1586512251,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"10176446843","product_id":100047701,"comment_content":"çœŸçš„æ˜¯å·§ï¼Œåœ¨éš”å£ã€Šè®¾è®¡æ¨¡å¼ã€‹çš„è¿­ä»£å™¨æ¨¡å¼é‡Œï¼Œä¹Ÿå­¦äº†å…³äºListçš„ä¸€äº›çŸ¥è¯†ï¼Œä»Šå¤©çš„è¯¾åä¹ é¢˜2ï¼Œæˆ‘åˆé‡æ–°å¤ä¹ äº†ä¸¤ä¸ªè¯¾","like_count":2},{"had_liked":false,"id":201519,"user_name":"èš‚èšå†…æ¨+v","can_delete":false,"product_type":"c1","uid":1050508,"ip_address":"","ucode":"24B10AEE54B3FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/07/8c/0d886dcc.jpg","comment_is_top":false,"comment_ctime":1585798377,"is_pvip":false,"replies":[{"id":"75379","content":"jdkå‡ ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1585800383,"ip_address":"","comment_id":201519,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10175732969","product_id":100047701,"comment_content":"int[] arr = {1, 2, 3};<br>List list = Arrays.asList(arr);<br>System.out.println(list + &quot; &quot; + list.size() + &quot; &quot; + list.get(0).getClass());<br><br><br>[1, 2, 3] 3 class java.lang.Integer ä¸ºä½•æˆ‘æœ¬åœ°å’Œè€å¸ˆæ¼”ç¤ºçš„ä¸ä¸€æ ·ï¼Ÿï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490358,"discussion_content":"jdkå‡ ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585800383,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1050508,"avatar":"https://static001.geekbang.org/account/avatar/00/10/07/8c/0d886dcc.jpg","nickname":"èš‚èšå†…æ¨+v","note":"","ucode":"24B10AEE54B3FD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":219802,"discussion_content":"æŠ±æ­‰ï¼Œæˆ‘ç”¨é”™åº“äº†ï¼Œæˆ‘ç”¨çš„æ˜¯è¿™ä¸ªorg.assertj.core.util.Arrays","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1585810844,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":232090,"discussion_content":"å¥½å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586852197,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":201314,"user_name":"Monday","can_delete":false,"product_type":"c1","uid":1250907,"ip_address":"","ucode":"77B9BACC783598","user_header":"https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg","comment_is_top":false,"comment_ctime":1585749543,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10175684135","product_id":100047701,"comment_content":"Arrays.asList è¿”å›çš„ List ä¸æ”¯æŒå¢åˆ æ“ä½œã€‚ è¿™ä¸ªå‘ä¸€ç›´éƒ½çŸ¥é“ï¼Œåªæ˜¯æ²¡å»çœ‹æºç ï¼Œä»Šå¤©å­¦åˆ°äº†ï¼ŒåŸæ¥æ˜¯Arraysçš„å†…éƒ¨ç±»ArrayListæ²¡æœ‰é‡å†™addæ–¹æ³•ï¼Œè€Œæ˜¯extends AbstractListçš„add()ï¼Œåè€…ä¼šæŠ›å‡ºUnsupportedOperationException","like_count":2},{"had_liked":false,"id":200558,"user_name":"pedro","can_delete":false,"product_type":"c1","uid":1200704,"ip_address":"","ucode":"F40C839DDFD599","user_header":"https://static001.geekbang.org/account/avatar/00/12/52/40/e57a736e.jpg","comment_is_top":false,"comment_ctime":1585618319,"is_pvip":false,"replies":[{"id":"75006","content":"ğŸ‘ğŸ»","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1585618804,"ip_address":"","comment_id":200558,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10175552911","product_id":100047701,"comment_content":"ç¬¬äºŒä¸ªé—®é¢˜ï¼Œä½¿ç”¨ for-each æˆ–è€… iterator è¿›è¡Œè¿­ä»£åˆ é™¤ remove æ—¶ï¼Œå®¹æ˜“å¯¼è‡´ next() æ£€æµ‹çš„ modCount ä¸ç­‰äº expectedModCount ä»è€Œå¼•å‘ ConcurrentModificationExceptionã€‚<br>åœ¨å•çº¿ç¨‹ä¸‹ï¼Œæ¨èä½¿ç”¨ next() å¾—åˆ°å…ƒç´ ï¼Œç„¶åç›´æ¥è°ƒç”¨ remove(),æ³¨æ„æ˜¯æ— å‚çš„ remove; å¤šçº¿ç¨‹æƒ…å†µä¸‹è¿˜æ˜¯ä½¿ç”¨å¹¶å‘å®¹å™¨å§ğŸ˜ƒ","like_count":2,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490067,"discussion_content":"ğŸ‘ğŸ»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585618804,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":247138,"user_name":"jacy","can_delete":false,"product_type":"c1","uid":1103456,"ip_address":"","ucode":"0022A8759DDCE6","user_header":"https://static001.geekbang.org/account/avatar/00/10/d6/60/f21b2164.jpg","comment_is_top":false,"comment_ctime":1599617032,"is_pvip":false,"replies":[{"id":"90812","content":"æ˜¯","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1599654274,"ip_address":"","comment_id":247138,"utype":1}],"discussion_count":1,"race_medal":1,"score":"5894584328","product_id":100047701,"comment_content":"é—®é¢˜äºŒå¯ä»¥ç”¨è¿­ä»£å™¨è¿›è¡Œåˆ é™¤ã€‚<br>çœ‹æºç éå†çš„removeæ˜¯ä»£å‚æ•°çš„removeæ–¹æ³•,ä¼šå¯¼è‡´ModCount++ï¼Œä½†expectedModCountä¸ä¼šæ”¹å˜ï¼Œnextä¼šæ£€æŸ¥ä¸¤å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå› æ­¤ä¼šæŠ›å¼‚å¸¸ã€‚ä»ä»£ç ä¸Šä¹Ÿå¯ä»¥è¯»å‡ºä½œè€…çš„æƒ³æ³•ï¼Œå°±æ˜¯é€šè¿‡æ­¤ç§æ–¹å¼æ¥ç¦æ­¢éå†æ—¶ç›´æ¥removeã€‚<br><br>è¿­ä»£å™¨åˆ é™¤æ˜¯ç”¨çš„æ— å‚æ•°removeï¼Œåˆ é™¤åä¼šæ‰§è¡ŒexpectedModCount = modCountï¼Œå°†ä¸¤å€¼ç½®ä¸ºç›¸ç­‰ã€‚","like_count":1,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505323,"discussion_content":"æ˜¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599654274,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":247133,"user_name":"jacy","can_delete":false,"product_type":"c1","uid":1103456,"ip_address":"","ucode":"0022A8759DDCE6","user_header":"https://static001.geekbang.org/account/avatar/00/10/d6/60/f21b2164.jpg","comment_is_top":false,"comment_ctime":1599615952,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"5894583248","product_id":100047701,"comment_content":"é—®é¢˜ä¸€ä¼ intæ˜¯ç›´æ¥åˆ é™¤æ•°ç»„å¯¹åº”ä¸‹æ ‡çš„å…ƒç´ ï¼Œè¿”å›è¢«åˆ é™¤çš„å…ƒç´ ï¼Œä¼ Objectæ—¶éœ€è¦éå†æŸ¥è¯¢ä¸Object equalçš„å…ƒç´ ï¼Œå†è¿›è¡Œåˆ é™¤ï¼Œè¿”å›true or falseã€‚<br>é—®é¢˜äºŒä¸çŸ¥é“åŸå› ï¼Œå¯ä»¥ç”¨è¿­ä»£å™¨è¿›è¡Œåˆ é™¤ã€‚<br><br>æ•´ç†ï¼š<br>1ã€ArrayLists.asListæ— æ³•å°†åŸºç¡€ç±»å‹çš„æ•°ç»„æ‰“æ•£é‡ç»„ï¼Œå³å‚å…¥åŸºç¡€ç±»å‹æ•°ç»„æ—¶ï¼Œä¼šè¢«æ„å»ºæˆäºŒç»´æ•°ç»„ï¼ˆä»…ä¸€ä¸ªå…ƒç´ ï¼Œå…ƒç´ ä¸ºè¾“å…¥æ•°ç»„ï¼‰ç»“æ„ï¼Œè€Œä¸æ˜¯ä¸€ç»´æ•°ç»„ç»“æ„ã€‚<br>2ã€ArrayLists.asList æˆ–subListå®åˆ™æ˜¯å¯¹åŸæ•°æ®çš„å¼ºå¼•ç”¨ï¼Œä¼šå¯¼è‡´åŸæ•°æ®æ— æ³•å›æ”¶ï¼Œä¿®æ”¹ç»“æœä¹Ÿä¼šåº”ç”¨åˆ°åŸæ•°ç»„ã€‚å¯ä»¥ç”¨æˆªå–ç»“æœæ„å»ºæ–°çš„Listï¼Œé˜²æ­¢å‡ºç°ä¿®æ”¹å¼‚å¸¸ã€‚<br>3ã€è€ƒè™‘æ—¶é—´ä¸ç©ºé—´çš„å…³ç³»ï¼Œé€‰æ‹©åˆç†çš„æ•°æ®ç»“æ„ã€‚<br>4ã€ç®—æ³•å¤§Oæ—¶é—´åªæ˜¯ç†è®ºä¸Šçš„æ—¶é—´ï¼ŒçœŸå®åœºæ™¯ä¸‹å¯èƒ½è¿˜éœ€è¦åšé¢å¤–çš„æ“ä½œæ‰èƒ½è¾¾åˆ°ç®—æ³•çš„å¯åŠ¨æ¡ä»¶ï¼Œæ¯”å¦‚é“¾è¡¨çš„ç†è®ºæ’å…¥æ—¶é—´ä¸ºO(1)ï¼Œä½†æŸ¥æ‰¾åˆ°å‰å‘èŠ‚ç‚¹è¿˜éœ€è¦èŠ±è´¹O(n)çš„æ—¶é—´ã€‚","like_count":1},{"had_liked":false,"id":227710,"user_name":"Avalon","can_delete":false,"product_type":"c1","uid":1664805,"ip_address":"","ucode":"8FB5370C1FBB68","user_header":"https://static001.geekbang.org/account/avatar/00/19/67/25/d413adc8.jpg","comment_is_top":false,"comment_ctime":1592461427,"is_pvip":false,"replies":[{"id":"84090","content":"LinkedListçš„addFirstæ€§èƒ½è‚¯å®šä¼˜äºArrayListçš„add(0,x)","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1592550849,"ip_address":"","comment_id":227710,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5887428723","product_id":100047701,"comment_content":"æˆ‘æœ‰ä¸€ä¸ªç–‘é—®ï¼Œåœ¨LinkedListä¸­addFirstæ–¹æ³•è°ƒç”¨çš„ç§æœ‰æ–¹æ³•linkFirstæ–¹æ³•å¦‚ä¸‹ï¼š<br>```<br>    private void linkFirst(E e) {<br>        LinkedList.Node&lt;E&gt; f = this.first;<br>        LinkedList.Node&lt;E&gt; newNode = new LinkedList.Node((LinkedList.Node)null, e, f);<br>        this.first = newNode;<br>        if (f == null) {<br>            this.last = newNode;<br>        } else {<br>            f.prev = newNode;<br>        }<br><br>        ++this.size;<br>        ++this.modCount;<br>    }<br>```<br>è¿™æ®µä»£ç é‡Œé¢ä»…é’ˆå¯¹ä¸€ä¸ªä½ç½®è¿›è¡Œäº†å¢åŠ èŠ‚ç‚¹çš„æ“ä½œï¼Œä¸ºä»€ä¹ˆaddFirstçš„æ€§èƒ½è¿˜æ˜¯ä¸åŠArrayListçš„addæ–¹æ³•å‘¢ï¼Ÿ<br>","like_count":1,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498757,"discussion_content":"LinkedListçš„addFirstæ€§èƒ½è‚¯å®šä¼˜äºArrayListçš„add(0,x)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592550849,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":218840,"user_name":"LovePeace","can_delete":false,"product_type":"c1","uid":1010319,"ip_address":"","ucode":"5BA5B11FAF953E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6a/8f/5b224f54.jpg","comment_is_top":false,"comment_ctime":1589885009,"is_pvip":false,"replies":[{"id":"80874","content":"å¯ä»¥ç”¨JMHå†è¯•è¯•ï¼Œæ¯•ç«Ÿæ—¶é—´å¤ªçŸ­äº†ï¼Œè¿™æ ·çœ‹ä¸ä¸€å®šå‡†ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1589889654,"ip_address":"","comment_id":218840,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5884852305","product_id":100047701,"comment_content":"å¤§é‡çš„ä¸šåŠ¡å¼€å‘å…¶å®æ²¡é‚£ä¹ˆå¤§çš„æ•°æ®,linkendListåœ¨æ’å…¥å°é‡æ•°æ®çš„æ—¶å€™è¿˜æ˜¯æ¯”arraylistæœ‰ä¼˜åŠ¿çš„<br>        int loopCount = 100;<br>        StopWatch stopWatch = new StopWatch();<br>        stopWatch.start(&quot;linkedListadd&quot;);<br>        linkedListadd(loopCount);<br>        stopWatch.stop();<br>        stopWatch.start(&quot;arrayListadd&quot;);<br>        arrayListadd(loopCount);<br>        stopWatch.stop();<br>        System.out.println(stopWatch.prettyPrint());<br>    }<br><br>    private static void linkedListadd(int loopCount) {<br>        List&lt;Integer&gt; list = new LinkedList&lt;&gt;();<br>        for (int i = 0; i &lt; loopCount; i++) {<br>            list.add(i);<br>        }<br>    }<br><br>    private static void arrayListadd(int loopCount) {<br>        List&lt;Integer&gt; list = new ArrayList&lt;&gt;();<br>        for (int i = 0; i &lt; loopCount; i++) {<br>            list.add(i);<br>        }<br>    }<br>######################################<br>StopWatch &#39;&#39;: running time = 93300 ns<br>---------------------------------------------<br>ns         %     Task name<br>---------------------------------------------<br>000025500  027%  linkedListadd<br>000067800  073%  arrayListadd","like_count":1,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495595,"discussion_content":"å¯ä»¥ç”¨JMHå†è¯•è¯•ï¼Œæ¯•ç«Ÿæ—¶é—´å¤ªçŸ­äº†ï¼Œè¿™æ ·çœ‹ä¸ä¸€å®šå‡†ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589889654,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215511,"user_name":"è‹æš®æ²‰è§","can_delete":false,"product_type":"c1","uid":1577580,"ip_address":"","ucode":"532B816D4EF47B","user_header":"https://static001.geekbang.org/account/avatar/00/18/12/6c/61a598e9.jpg","comment_is_top":false,"comment_ctime":1589006398,"is_pvip":false,"replies":[{"id":"79793","content":"ä½ å¯ä»¥è‡ªå·±åšä¸€ä¸‹å®éªŒ","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1589016811,"ip_address":"","comment_id":215511,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5883973694","product_id":100047701,"comment_content":"è€å¸ˆï¼Œå¯¹äºArrayListå’ŒLinkedListæ’å…¥æ€§èƒ½æµ‹è¯•æœ‰ç‚¹ç–‘é—®ï¼šæˆ‘ä»¬è¿™æ˜¯æµ‹é‡10Wçš„æ•°æ®é‡ä¸‹çš„ç»“æœï¼Œå¦‚æœæ•°æ®é‡è¾¾åˆ°100Wï¼Œæ¨è®ºè¿˜æ˜¯æˆç«‹å—ï¼Ÿï¼ˆæƒ³æµ‹è¯•100Wæ•°æ®é‡ï¼Œä½†æ˜¯æ•°æ®é‡é€æ­¥æé«˜åˆ°30Wä»¥åï¼Œç¨‹åºå°±è¿è¡Œå¾ˆä¹…å¾ˆä¹…ï¼‰ã€‚åˆ¤æ–­ä¸¤ç§æ•°æ®ç±»å‹çš„é€Ÿåº¦ï¼Œèƒ½ä¸èƒ½ç®€å•å½’çº³ä¸ºåˆ¤æ–­LinkedListæŸ¥æ‰¾ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æ—¶é—´å’Œï¼ˆArrayListæ•°ç»„åç§»ä¸€ä¸ªæ•°æ®æ—¶é—´+æ‰©å®¹å¹³å‡æ—¶é—´ï¼‰å“ªä¸ªæ¯”è¾ƒçŸ­ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494462,"discussion_content":"ä½ å¯ä»¥è‡ªå·±åšä¸€ä¸‹å®éªŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589016811,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":202343,"user_name":"hanazawakana","can_delete":false,"product_type":"c1","uid":1251721,"ip_address":"","ucode":"E0F6FACBFE7D15","user_header":"https://static001.geekbang.org/account/avatar/00/13/19/89/20488013.jpg","comment_is_top":false,"comment_ctime":1585971843,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5880939139","product_id":100047701,"comment_content":"ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œremove intæ˜¯åˆ é™¤ä¸‹æ ‡å…ƒç´ ï¼Œåˆ é™¤Integeræ˜¯åˆ é™¤æŸä¸ªå…ƒç´ <br>ç¬¬äºŒä¸ªé—®é¢˜ï¼Œå› ä¸ºè¿­ä»£å™¨ä¸ºäº†é˜²æ­¢åœ¨éå†æ—¶åˆ é™¤æ’å…¥çš„æ“ä½œå¯¼è‡´æ¼éå†åˆ°æŸä¸ªå…ƒç´ ï¼Œæ‰€ä»¥ç¦æ­¢åœ¨éå†æ—¶æ’å…¥å’Œåˆ é™¤å…ƒç´ ï¼Œè§£å†³æ–¹æ³•æƒ³åˆ°çš„æ˜¯copy on writeã€‚","like_count":1},{"had_liked":false,"id":201015,"user_name":"ç»ˆç»“è€…999å·","can_delete":false,"product_type":"c1","uid":1055854,"ip_address":"","ucode":"33ADE61580B6DD","user_header":"https://static001.geekbang.org/account/avatar/00/10/1c/6e/6c5f5734.jpg","comment_is_top":false,"comment_ctime":1585705679,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5880672975","product_id":100047701,"comment_content":"åœ¨è½¬æˆstreamçš„æ—¶å€™ï¼Œlinkedlistæ˜¯ä¸æ˜¯è¦å¥½äºArrayListå‘¢ï¼Ÿ","like_count":1},{"had_liked":false,"id":200753,"user_name":"csyangchsh","can_delete":false,"product_type":"c1","uid":1002939,"ip_address":"","ucode":"8604F5C839710B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/bb/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1585646397,"is_pvip":false,"replies":[{"id":"75101","content":"æ˜¯çš„ï¼ŒJMHåšå¾®åŸºå‡†æµ‹è¯•æ›´ä¸¥è°¨ä¸€äº›","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1585648849,"ip_address":"","comment_id":200753,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5880613693","product_id":100047701,"comment_content":"ArrayListåˆ†é…çš„å†…å­˜ç©ºé—´æ˜¯è¿ç»­çš„ï¼Œå¯¹ä¼šCPU Cacheå¾ˆå‹å¥½ã€‚LinkedListè¿˜è¦åŒ…è£…æˆNodeï¼Œåˆå¢åŠ äº†å¼€é”€ã€‚è¿™ä¸ªæµ‹è¯•ä½¿ç”¨JMHï¼Œæ ¹æ®CPU Cacheå¤§å°ï¼Œå®šä¹‰ä¸åŒçš„å…ƒç´ ä¸ªæ•°ï¼Œå¯èƒ½æ›´ä¸¥è°¨ä¸€ç‚¹ã€‚","like_count":1,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490125,"discussion_content":"æ˜¯çš„ï¼ŒJMHåšå¾®åŸºå‡†æµ‹è¯•æ›´ä¸¥è°¨ä¸€äº›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585648849,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200631,"user_name":"mgs2002","can_delete":false,"product_type":"c1","uid":1812970,"ip_address":"","ucode":"F5931108BD509B","user_header":"https://static001.geekbang.org/account/avatar/00/1b/a9/ea/5bfce6c5.jpg","comment_is_top":false,"comment_ctime":1585626527,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5880593823","product_id":100047701,"comment_content":"ç¬¬äºŒé¢˜å¯ä»¥ä½¿ç”¨å¹¶å‘å®¹å™¨CopyOnWriteArrayListè§£å†³ï¼Œåˆ é™¤å’Œæ·»åŠ éƒ½æ˜¯åœ¨å¿«ç…§ä¸Šé¢çš„ï¼Œä¸ä¼šå½±å“åŸæœ‰çš„List","like_count":1},{"had_liked":false,"id":200590,"user_name":"Wiggle Wiggle","can_delete":false,"product_type":"c1","uid":1036052,"ip_address":"","ucode":"EFE746551BA998","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cf/14/384258ba.jpg","comment_is_top":false,"comment_ctime":1585621666,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5880588962","product_id":100047701,"comment_content":"è¿™ä¹ˆçœ‹æ¥ LinkedList æ²¡æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Œéšæœºæ’å…¥è´¥äº†ï¼Œéšæœºåˆ é™¤ä¹Ÿå·®ä¸å¤šï¼Œåªå‰©å°¾æ’äº†ã€‚å°¾æ’å…¶å®ä¹Ÿæ²¡æœ‰å¤šå°‘ä¼˜åŠ¿ï¼Œæœ€å¤šå°±æ˜¯arrayListåº•å±‚æ»¡äº†ä»¥åéœ€è¦æ‰©å®¹ï¼ŒlinkedList ä¸éœ€è¦ã€‚ä¼°ç®—ä¸‹æ¥ï¼Œå¤§æ¦‚åªæœ‰åœ¨æ’å…¥åªæ˜¯æµ·é‡å°¾æ’ã€æŸ¥è¯¢åªæ˜¯éå†çš„æƒ…å†µä¸‹æ‰æœ‰ç‚¹ä¼˜åŠ¿","like_count":1},{"had_liked":false,"id":200497,"user_name":"æ¢¦å€šæ æ†","can_delete":false,"product_type":"c1","uid":1095857,"ip_address":"","ucode":"BDEB97F2822445","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/bvj76PmeUvW8kokyu91IZWuRATKmabibDWbzAj2TajeEic7WvKCJOLaOh6jibEmdQ36EO3sBUZ0HibAiapsrZo64U8w/132","comment_is_top":false,"comment_ctime":1585613295,"is_pvip":false,"replies":[{"id":"75007","content":"java 1.2çš„æ—¶å€™Listæ¥å£å·²ç»æ˜¯è¿™æ ·äº†ï¼Œæ³›å‹åé¢å‡ºæ¥çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1585619538,"ip_address":"","comment_id":200497,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5880580591","product_id":100047701,"comment_content":"1. åˆšå¥½æ˜¯çœ‹åˆ°æ¡ˆä¾‹æ—¶æˆ‘æƒ³é—®çš„é—®é¢˜ï¼Œç­”æ¡ˆçŸ¥é“ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæ˜¯è§„å®šä¸ºäº†åŒºåˆ†ï¼Ÿé‚£ä¸ºä»€ä¹ˆåˆ›å»ºæ•°ç»„æ—¶å¯ä»¥è‡ªåŠ¨è£…ç®±å‘¢ï¼Ÿ<br>2.ç”¨è¿­ä»£å™¨å¯ä»¥ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆå…¶å®ä¹Ÿä¸èƒ½è¯´å‡ºä¸ªæ‰€ä»¥ç„¶<br><br><br>æˆ‘æ²¡æƒ³åˆ°çš„æ˜¯linklistçš„æ€§èƒ½é—®é¢˜ï¼Œsublistä¹Ÿæ²¡æƒ³åˆ°ï¼Œæ˜¯ä¸æ˜¯è¿™ç§å¾ˆå¤šè¿”å›çš„éƒ½æ˜¯è§†å›¾å‘€","like_count":1,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490047,"discussion_content":"java 1.2çš„æ—¶å€™Listæ¥å£å·²ç»æ˜¯è¿™æ ·äº†ï¼Œæ³›å‹åé¢å‡ºæ¥çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585619538,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351570,"user_name":"| ~æµ‘è›‹~","can_delete":false,"product_type":"c1","uid":3024820,"ip_address":"","ucode":"B6904B44DFA805","user_header":"https://static001.geekbang.org/account/avatar/00/2e/27/b4/df65c0f7.jpg","comment_is_top":false,"comment_ctime":1657940210,"is_pvip":true,"discussion_count":0,"race_medal":4,"score":"1657940210","product_id":100047701,"comment_content":"ArrayListå’Œlinkedlistçš„æ€§èƒ½å·®å¼‚è·Ÿè®¡ç®—æœºå†…å­˜è®¿é—®çš„å±€éƒ¨æ€§åŸç†æœ‰å…³","like_count":0},{"had_liked":false,"id":346051,"user_name":"Geek_7cf7af","can_delete":false,"product_type":"c1","uid":2685579,"ip_address":"","ucode":"A8611750FDE7E0","user_header":"","comment_is_top":false,"comment_ctime":1652790859,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652790859","product_id":100047701,"comment_content":"æœ€åä¸€ä¸ªæ’å…¥æ•°æ®æ•°ç»„æ¯”é“¾è¡¨å¿«ï¼Œæ˜¯ä¸æ˜¯è¿˜å¯ä»¥ä»cpuçš„cacheç¼“å­˜æ¥è€ƒè™‘ï¼Œæ•°ç»„æ˜¯è¿ç»­å­˜å‚¨çš„ï¼Œæ‰€ä»¥åœ¨è¯»å–æ•°æ®è¿›å…¥cpuçš„æ—¶å€™ï¼Œä¼šæŠŠä¸€æ‰¹æ•°æ®éƒ½è¯»å…¥ï¼Œæé«˜äº†cacheçš„å‘½ä¸­ç‡","like_count":0},{"had_liked":false,"id":340132,"user_name":"æ–‡æ¶›","can_delete":false,"product_type":"c1","uid":2005349,"ip_address":"","ucode":"1265BA251859E4","user_header":"https://static001.geekbang.org/account/avatar/00/1e/99/65/f1f1643a.jpg","comment_is_top":false,"comment_ctime":1648619414,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1648619414","product_id":100047701,"comment_content":"Integer[] arr1 = {1, 2, 3};<br>List&lt;Integer&gt; collect = Arrays.stream(arr1).collect(Collectors.toList());<br> collect.add(4);<br> System.out.println(collect);<br>è¿™ç§è½¬æ¢çš„æ˜¯å¯ä»¥å¯¹å¾—åˆ°çš„é›†åˆè¿›è¡Œæ“ä½œçš„","like_count":0},{"had_liked":false,"id":340131,"user_name":"æ–‡æ¶›","can_delete":false,"product_type":"c1","uid":2005349,"ip_address":"","ucode":"1265BA251859E4","user_header":"https://static001.geekbang.org/account/avatar/00/1e/99/65/f1f1643a.jpg","comment_is_top":false,"comment_ctime":1648619365,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1648619365","product_id":100047701,"comment_content":"Integer[] arr1 = {1, 2, 3};","like_count":0},{"had_liked":false,"id":339477,"user_name":"åˆ°é“å¯é“","can_delete":false,"product_type":"c1","uid":1031181,"ip_address":"","ucode":"12B94B6C26BE0D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bc/0d/00424e81.jpg","comment_is_top":false,"comment_ctime":1648121689,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1648121689","product_id":100047701,"comment_content":"1.è°ƒç”¨ç±»å‹æ˜¯ Integer çš„ ArrayList çš„ remove æ–¹æ³•åˆ é™¤å…ƒç´ ï¼Œä¼ å…¥ä¸€ä¸ª Integer åŒ…è£…ç±»çš„æ•°å­—å’Œä¼ å…¥ä¸€ä¸ª int åŸºæœ¬ç±»å‹çš„æ•°å­—ï¼Œç»“æœä¸€æ ·å—ï¼Ÿ<br>ç­”ï¼šç»“æœä¸ä¸€æ ·ï¼Œä¼ å…¥çš„æ˜¯intåŸºæœ¬ç±»å‹ï¼Œå³åˆ é™¤çš„æ˜¯ç´¢å¼•ï¼Œæ‰§è¡Œçš„æ–¹æ³•æ˜¯remove(int)ï¼Œç›´æ¥æŒ‰ç…§ç´¢å¼•ä½ç½®æ¥åˆ é™¤å…ƒç´ ï¼Œå¦‚æœä¸æ˜¯æœ€åä¸€ä¸ªï¼Œåˆ™è¿˜éœ€è¦System.arraycopyæ¥æ•°ç»„æ‹·è´ï¼›å¦‚æœä¼ å…¥çš„æ˜¯Integerï¼Œæ‰§è¡Œçš„æ–¹æ³•æ˜¯remove(Object)ï¼Œéœ€è¦éå†æ•°ç»„ï¼Œæ‰¾åˆ°æŒ‡å®šå…ƒç´ å†åˆ é™¤ï¼Œå¦‚æœä¸æ˜¯æœ€åä¸€ä¸ªï¼Œåˆ™è¿˜éœ€è¦System.arraycopyæ¥æ•°ç»„æ‹·è´ã€‚<br><br>2.å¾ªç¯éå† Listï¼Œè°ƒç”¨ remove æ–¹æ³•åˆ é™¤å…ƒç´ ï¼Œå¾€å¾€ä¼šé‡åˆ° ConcurrentModificationException å¼‚å¸¸ï¼ŒåŸå› æ˜¯ä»€ä¹ˆï¼Œä¿®å¤æ–¹å¼åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ<br>ç­”ï¼šä»¥foreachä¸ºä¾‹è¯´ï¼Œéå†åˆ é™¤å®è´¨æ˜¯å˜åŒ–ä¸ºè¿­ä»£å™¨å®ç°ï¼Œä¸ç®¡æ˜¯è¿­ä»£å™¨é‡Œé¢çš„remove()è¿˜æ˜¯next()æ–¹æ³•,éƒ½ä¼šcheckForComodification();è€Œè¿™ä¸ªæ–¹æ³•æ˜¯åˆ¤æ–­modCountå’ŒexpectedModCountæ˜¯å¦ç›¸ç­‰ï¼Œè¿™ä¸ªmodCountæ˜¯è¿™ä¸ªlisté›†åˆä¿®æ”¹çš„æ¬¡æ•°ï¼Œæ¯ä¸€æ¬¡addæˆ–è€…removeéƒ½ä¼šå¢åŠ è¿™ä¸ªå˜é‡ï¼Œç„¶åè¿­ä»£å™¨æ¯æ¬¡å»nextæˆ–è€…å»removeçš„æ—¶å€™æ£€æŸ¥checkForComodification();å‘ç°expectedModCount(è¿™ä¸ªè¿­ä»£å™¨ä¿®æ”¹çš„æ¬¡æ•°)å’ŒmodCount(è¿™ä¸ªé›†åˆå®é™…ä¿®æ”¹çš„æ¬¡æ•°)ä¸ç›¸ç­‰ï¼Œå°±ä¼šæŠ›å‡ºConcurrentModificationExceptionï¼Œè¿­ä»£å™¨é‡Œé¢æ²¡æœ‰addæ–¹æ³•ï¼Œç”¨è¿­ä»£å™¨æ—¶ï¼Œå¯ä»¥åˆ é™¤åŸæ¥é›†åˆçš„å…ƒç´ ï¼Œä½†æ˜¯ï¼ä¸€å®šè¦ç”¨è¿­ä»£å™¨çš„removeæ–¹æ³•è€Œä¸æ˜¯é›†åˆè‡ªèº«çš„removeæ–¹æ³•ï¼Œå¦åˆ™æŠ›å¼‚å¸¸ã€‚","like_count":0},{"had_liked":false,"id":309138,"user_name":"SharpBB","can_delete":false,"product_type":"c1","uid":2014573,"ip_address":"","ucode":"D30C5B798B8E8C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/bd/6d/7010f98e.jpg","comment_is_top":false,"comment_ctime":1629959187,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1629959187","product_id":100047701,"comment_content":"å¤ªèµäº† æˆ‘ä¹‹å‰å°±æµ‹è¯•è¿‡é“¾è¡¨ä¸åŠ¨æ€æ•°ç»„  å‘ç°æ€ä¹ˆå’Œæˆ‘å­¦çš„ä¸ä¸€æ ·å‘¢ã€‚ã€‚ã€‚","like_count":0},{"had_liked":false,"id":275980,"user_name":"nanamin","can_delete":false,"product_type":"c1","uid":2403829,"ip_address":"","ucode":"9C794FD4EEA167","user_header":"https://static001.geekbang.org/account/avatar/00/24/ad/f5/68a2b581.jpg","comment_is_top":false,"comment_ctime":1611736037,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611736037","product_id":100047701,"comment_content":"LinkedListè¿™ä¸ªè¿˜æ˜¯ç¬¬ä¸€æ¬¡çŸ¥é“","like_count":0},{"had_liked":false,"id":271946,"user_name":"Geek_f87599","can_delete":false,"product_type":"c1","uid":2206025,"ip_address":"","ucode":"E5EDD1B1D8EBE8","user_header":"","comment_is_top":false,"comment_ctime":1609892605,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1609892605","product_id":100047701,"comment_content":"æµ‹è¯•æ€§èƒ½ä¸åº”è¯¥ä½¿ç”¨åŸºå‡†æµ‹è¯•å—ï¼Ÿä½¿ç”¨è¿™ç§æ–¹å¼ä¼šæœ‰å¾ˆå¤§çš„å¹²æ‰°å§","like_count":0},{"had_liked":false,"id":262007,"user_name":"wenpin","can_delete":false,"product_type":"c1","uid":1134027,"ip_address":"","ucode":"A66E3A4A59093A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/WSClHmjiaTh5D3lKAia9CBiaUqFf46ZludOVk9S5GnElUSDsH9ZzBtVktF5xEEQq4VCFXM0lgKdbzFTHateKylmibw/132","comment_is_top":false,"comment_ctime":1605604373,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605604373","product_id":100047701,"comment_content":"è§‰å¾— LinkedList è¿™é‡Œå¹¶ä¸æ˜¯è¯´è¿·ä¿¡æ•™ç§‘ä¹¦çš„åŸå› ï¼Œåè€Œæ˜¯æ²¡ç†è§£æ•™ç§‘ä¹¦çš„åŸå› å§ï¼Œé“¾è¡¨æœ¬æ¥éšæœºæ’å…¥çš„æ€§èƒ½å°±å¾ˆä½ä¸‹ï¼Œå®ƒçš„é€‚ç”¨åœºæ™¯æ˜¯ä½œä¸ºæ ˆæˆ–è€…é˜Ÿåˆ—ä¸€ç±»çš„åªéœ€è¦ä½œå¤´å°¾æ“ä½œçš„åº•å±‚æ•°æ®ç»“æ„ã€‚","like_count":0},{"had_liked":false,"id":260830,"user_name":"Geek_c5c988","can_delete":false,"product_type":"c1","uid":2284289,"ip_address":"","ucode":"353DCC036E2918","user_header":"","comment_is_top":false,"comment_ctime":1605140682,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605140682","product_id":100047701,"comment_content":"å®³ï¼ŒJavaæ–°äººä¸€æšï¼Œè€å¸ˆå†™çš„è¿™äº›éƒ½æ˜¯ä¹‹å‰è¸©è¿‡çš„å‘ï¼Œä»Šå¤©æ€»ç®—æ˜¯æ˜ç™½äº†","like_count":0},{"had_liked":false,"id":254162,"user_name":"å‘å¹¸ç¦å‡ºå‘","can_delete":false,"product_type":"c1","uid":1471769,"ip_address":"","ucode":"EC08B7FB081674","user_header":"https://static001.geekbang.org/account/avatar/00/16/75/19/9b6e00f2.jpg","comment_is_top":false,"comment_ctime":1603073655,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603073655","product_id":100047701,"comment_content":"è€å¸ˆè®²çš„å¾ˆåˆ°ä½","like_count":0},{"had_liked":false,"id":242517,"user_name":"é€†å…‰","can_delete":false,"product_type":"c1","uid":1008873,"ip_address":"","ucode":"474C1CFF5EC70C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/64/e9/dbb30482.jpg","comment_is_top":false,"comment_ctime":1597746913,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597746913","product_id":100047701,"comment_content":"List.subList å¾—åˆ°çš„ Listä¸å¯åºåˆ—åŒ–","like_count":0},{"had_liked":false,"id":240367,"user_name":"cky.å®‡","can_delete":false,"product_type":"c1","uid":1369447,"ip_address":"","ucode":"93A3EAD9D50A5F","user_header":"https://static001.geekbang.org/account/avatar/00/14/e5/67/16322a5d.jpg","comment_is_top":false,"comment_ctime":1596877975,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596877975","product_id":100047701,"comment_content":"æ€»ç»“ä¸€ä¸‹ï¼šå½“è¦ä¸€ä¸ªListæ˜¯åšä¸ºâ€œæ•°ç»„â€ç”¨æ—¶ï¼ˆæ¶‰åŠéšæœºè¯»å†™ï¼‰ä½¿ç”¨ArrayListæ›´å¥½ã€‚å½“Listæ˜¯ç”¨æ¥åšä¸ºQueueï¼ˆé˜Ÿåˆ—ï¼‰æˆ–è€…Stackï¼ˆæ ˆï¼‰æ¥ç”¨æ—¶ï¼Œä½¿ç”¨LinkedListæ›´ä¼˜ï¼Œå› ä¸ºè¿™ç§æ•°æ®ç»“æ„éƒ½æ˜¯å¯¹è¡¨å¤´æˆ–è¡¨å°¾è¯»å†™ï¼Œå¤§æ•°æ®é‡æ—¶æ€§èƒ½ä¼šæ¯”ArrayListæ›´å¥½ã€‚","like_count":0},{"had_liked":false,"id":239716,"user_name":"å­¦ä¹ ä½¿äººå¿«ä¹","can_delete":false,"product_type":"c1","uid":1478759,"ip_address":"","ucode":"1EC27CE663EE65","user_header":"https://static001.geekbang.org/account/avatar/00/16/90/67/106306e7.jpg","comment_is_top":false,"comment_ctime":1596622400,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596622400","product_id":100047701,"comment_content":"è€å¸ˆçš„è¯¾ç¨‹å¾ˆç»“åˆå®é™…çš„åœºæ™¯ï¼Œå¦å¤–è¯„è®ºåŒºä¹Ÿæ˜¯ç²¾å","like_count":0},{"had_liked":false,"id":235637,"user_name":"James","can_delete":false,"product_type":"c1","uid":1134861,"ip_address":"","ucode":"48B0F2A334D1C1","user_header":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","comment_is_top":false,"comment_ctime":1595132770,"is_pvip":false,"replies":[{"id":"87084","content":"1ã€æ³›å‹ä¸æ”¯æŒåŸºæœ¬ç±»å‹<br>2ã€è‡ªåŠ¨è£…ç®±åªé’ˆå¯¹å•ä¸ªå…ƒç´ ï¼Œæ— æ³•ç»™åŸºæœ¬ç±»å‹æ•°ç»„åšè‡ªåŠ¨è£…ç®±","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1595214633,"ip_address":"","comment_id":235637,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1595132770","product_id":100047701,"comment_content":"æºç ä¸­çš„æ³¨é‡Š<br>@param &lt;T&gt; the class of the objects in the array<br>List&lt;T&gt; asList(T... a)<br>æ˜¯ä¸æ˜¯å› ä¸ºåŸºæœ¬ç±»å‹æ˜¯ä¸èƒ½ä½œä¸ºå¯¹è±¡çš„,æ‰€ä»¥ç¨‹åºåªèƒ½å°†int[]æ•°ç»„ç±»å‹å¯ä»¥ä½œä¸ºå¯¹è±¡","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501794,"discussion_content":"1ã€æ³›å‹ä¸æ”¯æŒåŸºæœ¬ç±»å‹\n2ã€è‡ªåŠ¨è£…ç®±åªé’ˆå¯¹å•ä¸ªå…ƒç´ ï¼Œæ— æ³•ç»™åŸºæœ¬ç±»å‹æ•°ç»„åšè‡ªåŠ¨è£…ç®±","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595214633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":235635,"user_name":"James","can_delete":false,"product_type":"c1","uid":1134861,"ip_address":"","ucode":"48B0F2A334D1C1","user_header":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","comment_is_top":false,"comment_ctime":1595132590,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595132590","product_id":100047701,"comment_content":"è¿˜æ˜¯ä¸çŸ¥é“ä¸ºå•¥<br>int[] arr = {1, 2, 3};List list = Arrays.asList(arr);<br>æŠŠæ•°ç»„ç±»å‹å˜ä¸ºåŒ…è£…ç±»å°±æ˜¯æ­£å¸¸çš„.<br>æ˜¯å› ä¸ºåŒ…è£…ç±»ä¼šéå†å‡ºæ¥,è€ŒåŸºæœ¬ç±»å‹å°±åªä¼šå½“ä½œä¸€ä¸ªæ•´ä½“å—.<br><br>çœ‹æºç æ²¡çœ‹åˆ°åœ¨å“ªé‡Œè½¬æ¢çš„,è¯·é—®è€å¸ˆ,","like_count":0},{"had_liked":false,"id":233106,"user_name":"å¤œæ¶›","can_delete":false,"product_type":"c1","uid":1507783,"ip_address":"","ucode":"672CC53663710B","user_header":"https://static001.geekbang.org/account/avatar/00/17/01/c7/549b5616.jpg","comment_is_top":false,"comment_ctime":1594218297,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1594218297","product_id":100047701,"comment_content":"ç¬¬ä¸€é¢˜ï¼Œä¼ å…¥integeræ˜¯åˆ é™¤å…ƒç´ ï¼Œé€šè¿‡å¯¹è±¡æ¯”è¾ƒequalsæ–¹æ³•å®ç°åˆ é™¤å…ƒç´ æœç´¢ï¼Œåˆ é™¤ï¼›ä¼ å…¥intï¼Œæ˜¯ä¼ å…¥ç´¢å¼•ï¼Œåˆ é™¤listç¬¬nä¸ªå…ƒç´ ï¼Œç»“æœæ˜¯ä¸ä¸€æ ·çš„ï¼›ç‰¹æ®Šæƒ…å†µï¼šlist.getï¼ˆnï¼‰.equalsï¼ˆInteger.valueOf(n)ï¼‰ä¸ºtrueï¼Œé‚£ä¹ˆç»“æœæ˜¯ç›¸åŒçš„ã€‚","like_count":0},{"had_liked":false,"id":232041,"user_name":"pepsi","can_delete":false,"product_type":"c1","uid":1940540,"ip_address":"","ucode":"D588411A200C76","user_header":"https://static001.geekbang.org/account/avatar/00/1d/9c/3c/0583e01e.jpg","comment_is_top":false,"comment_ctime":1593840486,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593840486","product_id":100047701,"comment_content":"LinkedList é•¿çŸ¥è¯†äº†o(ï¿£â–½ï¿£)ï½„","like_count":0},{"had_liked":false,"id":223034,"user_name":"å­¦è¦æœ‰æ‰€ç”¨","can_delete":false,"product_type":"c1","uid":1446644,"ip_address":"","ucode":"7CB34E7DE21558","user_header":"https://static001.geekbang.org/account/avatar/00/16/12/f4/1bf8568e.jpg","comment_is_top":false,"comment_ctime":1590984646,"is_pvip":false,"replies":[{"id":"82210","content":"ä¸å¤ªå¯¹ï¼Œå¦‚æœåè¿‡æ¥è¿˜ç¨å¾®æœ‰ç‚¹è¯´å¾—è¿‡å»","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1590993772,"ip_address":"","comment_id":223034,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1590984646","product_id":100047701,"comment_content":"é€šå¸¸çœ‹åˆ°æŠ€æœ¯æ–‡ç« é‡Œä¼šæåˆ°é“¾è¡¨æŸ¥æ‰¾å®¹æ˜“ï¼Œå¢åˆ å›°éš¾ï¼Œè¿™æ˜¯å¦ä¸æ­£ç¡®ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496993,"discussion_content":"ä¸å¤ªå¯¹ï¼Œå¦‚æœåè¿‡æ¥è¿˜ç¨å¾®æœ‰ç‚¹è¯´å¾—è¿‡å»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590993772,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1664805,"avatar":"https://static001.geekbang.org/account/avatar/00/19/67/25/d413adc8.jpg","nickname":"Avalon","note":"","ucode":"8FB5370C1FBB68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284844,"discussion_content":"ç†è®ºä¸Šï¼Œå•é“¾è¡¨çš„è¯ï¼ŒæŸ¥æ‰¾çš„æ—¶å€™éœ€è¦ä»å¤´å¼€å§‹æ‰«ææ•´ä¸ªé“¾è¡¨ï¼ˆä¸€ä¸ªä¸€ä¸ªæ‰¾ï¼‰ï¼Œè¿™ç§æ•ˆç‡åº”è¯¥æ˜¯ä¸åŠé¡ºåºæ•°ç»„çš„ï¼Œè€Œé“¾è¡¨å¢åˆ çš„è¯ï¼Œé™¤éæ˜¯éœ€è¦å…ˆè¿›è¡ŒæŸ¥æ‰¾å†è¿›è¡Œåˆ é™¤çš„æƒ…å†µï¼Œé“¾è¡¨çš„åˆ é™¤ã€å¢åŠ çš„åŸºæœ¬æ“ä½œæ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(1)çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592659506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":210256,"user_name":"è‡ªæš´è‡ªå¼ƒ","can_delete":false,"product_type":"c1","uid":1301921,"ip_address":"","ucode":"F9DEA202A695D4","user_header":"https://static001.geekbang.org/account/avatar/00/13/dd/a1/222b0e4e.jpg","comment_is_top":false,"comment_ctime":1587707681,"is_pvip":false,"replies":[{"id":"78374","content":"ï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1587714673,"ip_address":"","comment_id":210256,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1587707681","product_id":100047701,"comment_content":"javaå¾ˆå¤šäººç”¨äº†è¿™ä¹ˆä¹…çš„Listéƒ½ç”¨é”™äº†ï¼çœ‹å®Œè¿™ç¯‡æ–‡ç« å°ä¼™æƒŠå‘¼è¿™ä¹ˆå¤šå¹´ç™½å­¦äº†ï¼","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492983,"discussion_content":"ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587714673,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205743,"user_name":"Geek_3b1096","can_delete":false,"product_type":"c1","uid":1549364,"ip_address":"","ucode":"A6BD92B79B3632","user_header":"","comment_is_top":false,"comment_ctime":1586731712,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586731712","product_id":100047701,"comment_content":"ä¹‹å‰ä¸€ç›´ä»¥ä¸ºArrays.asListè¿”å›çš„æ˜¯java.util.ArrayList","like_count":0}]}