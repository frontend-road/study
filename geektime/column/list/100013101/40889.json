{"id":40889,"title":"22 | panicå‡½æ•°ã€recoverå‡½æ•°ä»¥åŠdeferè¯­å¥ï¼ˆä¸‹ï¼‰","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯éƒæ—ï¼Œä»Šå¤©æˆ‘ä»¬ç»§ç»­æ¥èŠèŠpanicå‡½æ•°ã€recoverå‡½æ•°ä»¥åŠdeferè¯­å¥çš„å†…å®¹ã€‚</p><p>æˆ‘åœ¨å‰ä¸€ç¯‡æ–‡ç« æåˆ°è¿‡è¿™æ ·ä¸€ä¸ªè¯´æ³•ï¼Œpanicä¹‹ä¸­å¯ä»¥åŒ…å«ä¸€ä¸ªå€¼ï¼Œç”¨äºç®€è¦è§£é‡Šå¼•å‘æ­¤panicçš„åŸå› ã€‚</p><p>å¦‚æœä¸€ä¸ªpanicæ˜¯æˆ‘ä»¬åœ¨æ— æ„é—´å¼•å‘çš„ï¼Œé‚£ä¹ˆå…¶ä¸­çš„å€¼åªèƒ½ç”±Goè¯­è¨€è¿è¡Œæ—¶ç³»ç»Ÿç»™å®šã€‚ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨<code>panic</code>å‡½æ•°æœ‰æ„åœ°å¼•å‘ä¸€ä¸ªpanicçš„æ—¶å€™ï¼Œå´å¯ä»¥è‡ªè¡ŒæŒ‡å®šå…¶åŒ…å«çš„å€¼ã€‚æˆ‘ä»¬ä»Šå¤©çš„ç¬¬ä¸€ä¸ªé—®é¢˜å°±æ˜¯é’ˆå¯¹åä¸€ç§æƒ…å†µæå‡ºçš„ã€‚</p><h2>çŸ¥è¯†æ‰©å±•</h2><h3>é—®é¢˜ 1ï¼šæ€æ ·è®©panicåŒ…å«ä¸€ä¸ªå€¼ï¼Œä»¥åŠåº”è¯¥è®©å®ƒåŒ…å«ä»€ä¹ˆæ ·çš„å€¼ï¼Ÿ</h3><p>è¿™å…¶å®å¾ˆç®€å•ï¼Œåœ¨è°ƒç”¨<code>panic</code>å‡½æ•°æ—¶ï¼ŒæŠŠæŸä¸ªå€¼ä½œä¸ºå‚æ•°ä¼ ç»™è¯¥å‡½æ•°å°±å¯ä»¥äº†ã€‚ç”±äº<code>panic</code>å‡½æ•°çš„å”¯ä¸€ä¸€ä¸ªå‚æ•°æ˜¯ç©ºæ¥å£ï¼ˆä¹Ÿå°±æ˜¯<code>interface{}</code>ï¼‰ç±»å‹çš„ï¼Œæ‰€ä»¥ä»è¯­æ³•ä¸Šè®²ï¼Œå®ƒå¯ä»¥æ¥å—ä»»ä½•ç±»å‹çš„å€¼ã€‚</p><p>ä½†æ˜¯ï¼Œæˆ‘ä»¬æœ€å¥½ä¼ å…¥<code>error</code>ç±»å‹çš„é”™è¯¯å€¼ï¼Œæˆ–è€…å…¶ä»–çš„å¯ä»¥è¢«æœ‰æ•ˆåºåˆ—åŒ–çš„å€¼ã€‚è¿™é‡Œçš„â€œæœ‰æ•ˆåºåˆ—åŒ–â€æŒ‡çš„æ˜¯ï¼Œå¯ä»¥æ›´æ˜“è¯»åœ°å»è¡¨ç¤ºå½¢å¼è½¬æ¢ã€‚</p><p>è¿˜è®°å¾—å—ï¼Ÿå¯¹äº<code>fmt</code>åŒ…ä¸‹çš„å„ç§æ‰“å°å‡½æ•°æ¥è¯´ï¼Œ<code>error</code>ç±»å‹å€¼çš„<code>Error</code>æ–¹æ³•ä¸å…¶ä»–ç±»å‹å€¼çš„<code>String</code>æ–¹æ³•æ˜¯ç­‰ä»·çš„ï¼Œå®ƒä»¬çš„å”¯ä¸€ç»“æœéƒ½æ˜¯<code>string</code>ç±»å‹çš„ã€‚</p><p>æˆ‘ä»¬åœ¨é€šè¿‡å ä½ç¬¦<code>%s</code>æ‰“å°è¿™äº›å€¼çš„æ—¶å€™ï¼Œå®ƒä»¬çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼åˆ†åˆ«éƒ½æ˜¯è¿™ä¸¤ç§æ–¹æ³•äº§å‡ºçš„ã€‚</p><!-- [[[read_end]]] --><p>ä¸€æ—¦ç¨‹åºå¼‚å¸¸äº†ï¼Œæˆ‘ä»¬å°±ä¸€å®šè¦æŠŠå¼‚å¸¸çš„ç›¸å…³ä¿¡æ¯è®°å½•ä¸‹æ¥ï¼Œè¿™é€šå¸¸éƒ½æ˜¯è®°åˆ°ç¨‹åºæ—¥å¿—é‡Œã€‚</p><p>æˆ‘ä»¬åœ¨ä¸ºç¨‹åºæ’æŸ¥é”™è¯¯çš„æ—¶å€™ï¼Œé¦–å…ˆè¦åšçš„å°±æ˜¯æŸ¥çœ‹å’Œè§£è¯»ç¨‹åºæ—¥å¿—ï¼›è€Œæœ€å¸¸ç”¨ä¹Ÿæ˜¯æœ€æ–¹ä¾¿çš„æ—¥å¿—è®°å½•æ–¹å¼ï¼Œå°±æ˜¯è®°ä¸‹ç›¸å…³å€¼çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚</p><p>æ‰€ä»¥ï¼Œå¦‚æœä½ è§‰å¾—æŸä¸ªå€¼æœ‰å¯èƒ½ä¼šè¢«è®°åˆ°æ—¥å¿—é‡Œï¼Œé‚£ä¹ˆå°±åº”è¯¥ä¸ºå®ƒå…³è”<code>String</code>æ–¹æ³•ã€‚å¦‚æœè¿™ä¸ªå€¼æ˜¯<code>error</code>ç±»å‹çš„ï¼Œé‚£ä¹ˆè®©å®ƒçš„<code>Error</code>æ–¹æ³•è¿”å›ä½ ä¸ºå®ƒå®šåˆ¶çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼å°±å¯ä»¥äº†ã€‚</p><p>å¯¹äºæ­¤ï¼Œä½ å¯èƒ½ä¼šæƒ³åˆ°<code>fmt.Sprintf</code>ï¼Œä»¥åŠ<code>fmt.Fprintf</code>è¿™ç±»å¯ä»¥æ ¼å¼åŒ–å¹¶è¾“å‡ºå‚æ•°çš„å‡½æ•°ã€‚</p><p>æ˜¯çš„ï¼Œå®ƒä»¬æœ¬èº«å°±å¯ä»¥è¢«ç”¨æ¥è¾“å‡ºå€¼çš„æŸç§è¡¨ç¤ºå½¢å¼ã€‚ä¸è¿‡ï¼Œå®ƒä»¬åœ¨åŠŸèƒ½ä¸Šï¼Œè‚¯å®šè¿œä¸å¦‚æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„<code>Error</code>æ–¹æ³•æˆ–è€…<code>String</code>æ–¹æ³•ã€‚å› æ­¤ï¼Œä¸ºä¸åŒçš„æ•°æ®ç±»å‹åˆ†åˆ«ç¼–å†™è¿™ä¸¤ç§æ–¹æ³•æ€»æ˜¯é¦–é€‰ã€‚</p><p>å¯æ˜¯ï¼Œè¿™ä¸ä¼ ç»™<code>panic</code>å‡½æ•°çš„å‚æ•°å€¼åˆæœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿå…¶å®é“ç†æ˜¯ç›¸åŒçš„ã€‚è‡³å°‘åœ¨ç¨‹åºå´©æºƒçš„æ—¶å€™ï¼ŒpanicåŒ…å«çš„é‚£ä¸ªå€¼å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ä¼šè¢«æ‰“å°å‡ºæ¥ã€‚</p><p>å¦å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ–½åŠ æŸç§ä¿æŠ¤æªæ–½ï¼Œé¿å…ç¨‹åºçš„å´©æºƒã€‚è¿™ä¸ªæ—¶å€™ï¼ŒpanicåŒ…å«çš„å€¼ä¼šè¢«å–å‡ºï¼Œè€Œåœ¨å–å‡ºä¹‹åï¼Œå®ƒä¸€èˆ¬éƒ½ä¼šè¢«æ‰“å°å‡ºæ¥æˆ–è€…è®°å½•åˆ°æ—¥å¿—é‡Œã€‚</p><p>æ—¢ç„¶è¯´åˆ°äº†åº”å¯¹panicçš„ä¿æŠ¤æªæ–½ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸‹é¢ä¸€ä¸ªé—®é¢˜ã€‚</p><h3>é—®é¢˜ 2ï¼šæ€æ ·æ–½åŠ åº”å¯¹panicçš„ä¿æŠ¤æªæ–½ï¼Œä»è€Œé¿å…ç¨‹åºå´©æºƒï¼Ÿ</h3><p>Goè¯­è¨€çš„å†…å»ºå‡½æ•°<code>recover</code>ä¸“ç”¨äºæ¢å¤panicï¼Œæˆ–è€…è¯´å¹³æ¯è¿è¡Œæ—¶ææ…Œã€‚<code>recover</code>å‡½æ•°æ— éœ€ä»»ä½•å‚æ•°ï¼Œå¹¶ä¸”ä¼šè¿”å›ä¸€ä¸ªç©ºæ¥å£ç±»å‹çš„å€¼ã€‚</p><p>å¦‚æœç”¨æ³•æ­£ç¡®ï¼Œè¿™ä¸ªå€¼å®é™…ä¸Šå°±æ˜¯å³å°†æ¢å¤çš„panicåŒ…å«çš„å€¼ã€‚å¹¶ä¸”ï¼Œå¦‚æœè¿™ä¸ªpanicæ˜¯å› æˆ‘ä»¬è°ƒç”¨<code>panic</code>å‡½æ•°è€Œå¼•å‘çš„ï¼Œé‚£ä¹ˆè¯¥å€¼åŒæ—¶ä¹Ÿä¼šæ˜¯æˆ‘ä»¬æ­¤æ¬¡è°ƒç”¨<code>panic</code>å‡½æ•°æ—¶ï¼Œä¼ å…¥çš„å‚æ•°å€¼å‰¯æœ¬ã€‚è¯·æ³¨æ„ï¼Œè¿™é‡Œå¼ºè°ƒç”¨æ³•çš„æ­£ç¡®ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä»€ä¹ˆæ˜¯ä¸æ­£ç¡®çš„ç”¨æ³•ã€‚</p><pre><code>package main\n\nimport (\n &quot;fmt&quot;\n &quot;errors&quot;\n)\n\nfunc main() {\n fmt.Println(&quot;Enter function main.&quot;)\n // å¼•å‘panicã€‚\n panic(errors.New(&quot;something wrong&quot;))\n p := recover()\n fmt.Printf(&quot;panic: %s\\n&quot;, p)\n fmt.Println(&quot;Exit function main.&quot;)\n}\n</code></pre><p>åœ¨ä¸Šé¢è¿™ä¸ª<code>main</code>å‡½æ•°ä¸­ï¼Œæˆ‘å…ˆé€šè¿‡è°ƒç”¨<code>panic</code>å‡½æ•°å¼•å‘äº†ä¸€ä¸ªpanicï¼Œç´§æ¥ç€æƒ³é€šè¿‡è°ƒç”¨<code>recover</code>å‡½æ•°æ¢å¤è¿™ä¸ªpanicã€‚å¯ç»“æœå‘¢ï¼Ÿä½ ä¸€è¯•ä¾¿çŸ¥ï¼Œç¨‹åºä¾ç„¶ä¼šå´©æºƒï¼Œè¿™ä¸ª<code>recover</code>å‡½æ•°è°ƒç”¨å¹¶ä¸ä¼šèµ·åˆ°ä»»ä½•ä½œç”¨ï¼Œç”šè‡³éƒ½æ²¡æœ‰æœºä¼šæ‰§è¡Œã€‚</p><p>è¿˜è®°å¾—å—ï¼Ÿæˆ‘æåˆ°è¿‡panicä¸€æ—¦å‘ç”Ÿï¼Œæ§åˆ¶æƒå°±ä¼šè®¯é€Ÿåœ°æ²¿ç€è°ƒç”¨æ ˆçš„åæ–¹å‘ä¼ æ’­ã€‚æ‰€ä»¥ï¼Œåœ¨<code>panic</code>å‡½æ•°è°ƒç”¨ä¹‹åçš„ä»£ç ï¼Œæ ¹æœ¬å°±æ²¡æœ‰æ‰§è¡Œçš„æœºä¼šã€‚</p><p>é‚£å¦‚æœæˆ‘æŠŠè°ƒç”¨<code>recover</code>å‡½æ•°çš„ä»£ç æå‰å‘¢ï¼Ÿä¹Ÿå°±æ˜¯è¯´ï¼Œå…ˆè°ƒç”¨<code>recover</code>å‡½æ•°ï¼Œå†è°ƒç”¨<code>panic</code>å‡½æ•°ä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ</p><p>è¿™æ˜¾ç„¶ä¹Ÿæ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºï¼Œå¦‚æœåœ¨æˆ‘ä»¬è°ƒç”¨<code>recover</code>å‡½æ•°æ—¶æœªå‘ç”Ÿpanicï¼Œé‚£ä¹ˆè¯¥å‡½æ•°å°±ä¸ä¼šåšä»»ä½•äº‹æƒ…ï¼Œå¹¶ä¸”åªä¼šè¿”å›ä¸€ä¸ª<code>nil</code>ã€‚</p><p>æ¢å¥è¯è¯´ï¼Œè¿™æ ·åšæ¯«æ— æ„ä¹‰ã€‚é‚£ä¹ˆï¼Œåˆ°åº•ä»€ä¹ˆæ‰æ˜¯æ­£ç¡®çš„<code>recover</code>å‡½æ•°ç”¨æ³•å‘¢ï¼Ÿè¿™å°±ä¸å¾—ä¸æåˆ°<code>defer</code>è¯­å¥äº†ã€‚</p><p>é¡¾åæ€ä¹‰ï¼Œ<code>defer</code>è¯­å¥å°±æ˜¯è¢«ç”¨æ¥å»¶è¿Ÿæ‰§è¡Œä»£ç çš„ã€‚å»¶è¿Ÿåˆ°ä»€ä¹ˆæ—¶å€™å‘¢ï¼Ÿè¿™è¦å»¶è¿Ÿåˆ°è¯¥è¯­å¥æ‰€åœ¨çš„å‡½æ•°å³å°†æ‰§è¡Œç»“æŸçš„é‚£ä¸€åˆ»ï¼Œæ— è®ºç»“æŸæ‰§è¡Œçš„åŸå› æ˜¯ä»€ä¹ˆã€‚</p><p>è¿™ä¸<code>go</code>è¯­å¥æœ‰äº›ç±»ä¼¼ï¼Œä¸€ä¸ª<code>defer</code>è¯­å¥æ€»æ˜¯ç”±ä¸€ä¸ª<code>defer</code>å…³é”®å­—å’Œä¸€ä¸ªè°ƒç”¨è¡¨è¾¾å¼ç»„æˆã€‚</p><p>è¿™é‡Œå­˜åœ¨ä¸€äº›é™åˆ¶ï¼Œæœ‰ä¸€äº›è°ƒç”¨è¡¨è¾¾å¼æ˜¯ä¸èƒ½å‡ºç°åœ¨è¿™é‡Œçš„ï¼ŒåŒ…æ‹¬ï¼šé’ˆå¯¹Goè¯­è¨€å†…å»ºå‡½æ•°çš„è°ƒç”¨è¡¨è¾¾å¼ï¼Œä»¥åŠé’ˆå¯¹<code>unsafe</code>åŒ…ä¸­çš„å‡½æ•°çš„è°ƒç”¨è¡¨è¾¾å¼ã€‚</p><p>é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œå¯¹äº<code>go</code>è¯­å¥ä¸­çš„è°ƒç”¨è¡¨è¾¾å¼ï¼Œé™åˆ¶ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚å¦å¤–ï¼Œåœ¨è¿™é‡Œè¢«è°ƒç”¨çš„å‡½æ•°å¯ä»¥æ˜¯æœ‰åç§°çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯åŒ¿åçš„ã€‚æˆ‘ä»¬å¯ä»¥æŠŠè¿™é‡Œçš„å‡½æ•°å«åš<code>defer</code>å‡½æ•°æˆ–è€…å»¶è¿Ÿå‡½æ•°ã€‚æ³¨æ„ï¼Œè¢«å»¶è¿Ÿæ‰§è¡Œçš„æ˜¯<code>defer</code>å‡½æ•°ï¼Œè€Œä¸æ˜¯<code>defer</code>è¯­å¥ã€‚</p><p>æˆ‘åˆšæ‰è¯´äº†ï¼Œæ— è®ºå‡½æ•°ç»“æŸæ‰§è¡Œçš„åŸå› æ˜¯ä»€ä¹ˆï¼Œå…¶ä¸­çš„<code>defer</code>å‡½æ•°è°ƒç”¨éƒ½ä¼šåœ¨å®ƒå³å°†ç»“æŸæ‰§è¡Œçš„é‚£ä¸€åˆ»æ‰§è¡Œã€‚å³ä½¿å¯¼è‡´å®ƒæ‰§è¡Œç»“æŸçš„åŸå› æ˜¯ä¸€ä¸ªpanicä¹Ÿä¼šæ˜¯è¿™æ ·ã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼Œæˆ‘ä»¬éœ€è¦è”ç”¨<code>defer</code>è¯­å¥å’Œ<code>recover</code>å‡½æ•°è°ƒç”¨ï¼Œæ‰èƒ½å¤Ÿæ¢å¤ä¸€ä¸ªå·²ç»å‘ç”Ÿçš„panicã€‚</p><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ç»è¿‡ä¿®æ­£çš„ä»£ç ã€‚</p><pre><code>package main\n\nimport (\n &quot;fmt&quot;\n &quot;errors&quot;\n)\n\nfunc main() {\n fmt.Println(&quot;Enter function main.&quot;)\n defer func(){\n  fmt.Println(&quot;Enter defer function.&quot;)\n  if p := recover(); p != nil {\n   fmt.Printf(&quot;panic: %s\\n&quot;, p)\n  }\n  fmt.Println(&quot;Exit defer function.&quot;)\n }()\n // å¼•å‘panicã€‚\n panic(errors.New(&quot;something wrong&quot;))\n fmt.Println(&quot;Exit function main.&quot;)\n}\n</code></pre><p>åœ¨è¿™ä¸ª<code>main</code>å‡½æ•°ä¸­ï¼Œæˆ‘å…ˆç¼–å†™äº†ä¸€æ¡<code>defer</code>è¯­å¥ï¼Œå¹¶åœ¨<code>defer</code>å‡½æ•°ä¸­è°ƒç”¨äº†<code>recover</code>å‡½æ•°ã€‚ä»…å½“è°ƒç”¨çš„ç»“æœå€¼ä¸ä¸º<code>nil</code>æ—¶ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰panicç¡®å®å·²å‘ç”Ÿæ—¶ï¼Œæˆ‘æ‰ä¼šæ‰“å°ä¸€è¡Œä»¥â€œpanic:â€ä¸ºå‰ç¼€çš„å†…å®¹ã€‚</p><p>ç´§æ¥ç€ï¼Œæˆ‘è°ƒç”¨äº†<code>panic</code>å‡½æ•°ï¼Œå¹¶ä¼ å…¥äº†ä¸€ä¸ª<code>error</code>ç±»å‹å€¼ã€‚è¿™é‡Œä¸€å®šè¦æ³¨æ„ï¼Œæˆ‘ä»¬è¦å°½é‡æŠŠ<code>defer</code>è¯­å¥å†™åœ¨å‡½æ•°ä½“çš„å¼€å§‹å¤„ï¼Œå› ä¸ºåœ¨å¼•å‘panicçš„è¯­å¥ä¹‹åçš„æ‰€æœ‰è¯­å¥ï¼Œéƒ½ä¸ä¼šæœ‰ä»»ä½•æ‰§è¡Œæœºä¼šã€‚</p><p>ä¹Ÿåªæœ‰è¿™æ ·ï¼Œ<code>defer</code>å‡½æ•°ä¸­çš„<code>recover</code>å‡½æ•°è°ƒç”¨æ‰ä¼šæ‹¦æˆªï¼Œå¹¶æ¢å¤<code>defer</code>è¯­å¥æ‰€å±çš„å‡½æ•°ï¼ŒåŠå…¶è°ƒç”¨çš„ä»£ç ä¸­å‘ç”Ÿçš„æ‰€æœ‰panicã€‚</p><p>è‡³æ­¤ï¼Œæˆ‘å‘ä½ å±•ç¤ºäº†ä¸¤ä¸ªå¾ˆå…¸å‹çš„<code>recover</code>å‡½æ•°çš„é”™è¯¯ç”¨æ³•ï¼Œä»¥åŠä¸€ä¸ªåŸºæœ¬çš„æ­£ç¡®ç”¨æ³•ã€‚</p><p>æˆ‘å¸Œæœ›ä½ èƒ½å¤Ÿè®°ä½é”™è¯¯ç”¨æ³•èƒŒåçš„ç¼˜ç”±ï¼ŒåŒæ—¶ä¹Ÿå¸Œæœ›ä½ èƒ½çœŸæ­£åœ°ç†è§£è”ç”¨<code>defer</code>è¯­å¥å’Œ<code>recover</code>å‡½æ•°è°ƒç”¨çš„çœŸè°›ã€‚</p><p>åœ¨å‘½ä»¤æºç æ–‡ä»¶demo50.goä¸­ï¼Œæˆ‘æŠŠä¸Šè¿°ä¸‰ç§ç”¨æ³•åˆå¹¶åœ¨äº†ä¸€æ®µä»£ç ä¸­ã€‚ä½ å¯ä»¥è¿è¡Œè¯¥æ–‡ä»¶ï¼Œå¹¶ä½“ä¼šå„ç§ç”¨æ³•æ‰€äº§ç”Ÿçš„ä¸åŒæ•ˆæœã€‚</p><p>ä¸‹é¢æˆ‘å†æ¥å¤šè¯´ä¸€ç‚¹å…³äº<code>defer</code>è¯­å¥çš„äº‹æƒ…ã€‚</p><h3>é—®é¢˜ 3ï¼šå¦‚æœä¸€ä¸ªå‡½æ•°ä¸­æœ‰å¤šæ¡<code>defer</code>è¯­å¥ï¼Œé‚£ä¹ˆé‚£å‡ ä¸ª<code>defer</code>å‡½æ•°è°ƒç”¨çš„æ‰§è¡Œé¡ºåºæ˜¯æ€æ ·çš„ï¼Ÿ</h3><p>å¦‚æœåªç”¨ä¸€å¥è¯å›ç­”çš„è¯ï¼Œé‚£å°±æ˜¯ï¼šåœ¨åŒä¸€ä¸ªå‡½æ•°ä¸­ï¼Œ<code>defer</code>å‡½æ•°è°ƒç”¨çš„æ‰§è¡Œé¡ºåºä¸å®ƒä»¬åˆ†åˆ«æ‰€å±çš„<code>defer</code>è¯­å¥çš„å‡ºç°é¡ºåºï¼ˆæ›´ä¸¥è°¨åœ°è¯´ï¼Œæ˜¯æ‰§è¡Œé¡ºåºï¼‰å®Œå…¨ç›¸åã€‚</p><p>å½“ä¸€ä¸ªå‡½æ•°å³å°†ç»“æŸæ‰§è¡Œæ—¶ï¼Œå…¶ä¸­çš„å†™åœ¨æœ€ä¸‹è¾¹çš„<code>defer</code>å‡½æ•°è°ƒç”¨ä¼šæœ€å…ˆæ‰§è¡Œï¼Œå…¶æ¬¡æ˜¯å†™åœ¨å®ƒä¸Šè¾¹ã€ä¸å®ƒçš„è·ç¦»æœ€è¿‘çš„é‚£ä¸ª<code>defer</code>å‡½æ•°è°ƒç”¨ï¼Œä»¥æ­¤ç±»æ¨ï¼Œæœ€ä¸Šè¾¹çš„<code>defer</code>å‡½æ•°è°ƒç”¨ä¼šæœ€åä¸€ä¸ªæ‰§è¡Œã€‚</p><p>å¦‚æœå‡½æ•°ä¸­æœ‰ä¸€æ¡<code>for</code>è¯­å¥ï¼Œå¹¶ä¸”è¿™æ¡<code>for</code>è¯­å¥ä¸­åŒ…å«äº†ä¸€æ¡<code>defer</code>è¯­å¥ï¼Œé‚£ä¹ˆï¼Œæ˜¾ç„¶è¿™æ¡<code>defer</code>è¯­å¥çš„æ‰§è¡Œæ¬¡æ•°ï¼Œå°±å–å†³äº<code>for</code>è¯­å¥çš„è¿­ä»£æ¬¡æ•°ã€‚</p><p>å¹¶ä¸”ï¼ŒåŒä¸€æ¡<code>defer</code>è¯­å¥æ¯è¢«æ‰§è¡Œä¸€æ¬¡ï¼Œå…¶ä¸­çš„<code>defer</code>å‡½æ•°è°ƒç”¨å°±ä¼šäº§ç”Ÿä¸€æ¬¡ï¼Œè€Œä¸”ï¼Œè¿™äº›å‡½æ•°è°ƒç”¨åŒæ ·ä¸ä¼šè¢«ç«‹å³æ‰§è¡Œã€‚</p><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œè¿™æ¡<code>for</code>è¯­å¥ä¸­äº§ç”Ÿçš„å¤šä¸ª<code>defer</code>å‡½æ•°è°ƒç”¨ï¼Œä¼šä»¥æ€æ ·çš„é¡ºåºæ‰§è¡Œå‘¢ï¼Ÿ</p><p>ä¸ºäº†å½»åº•ææ¸…æ¥šï¼Œæˆ‘ä»¬éœ€è¦å¼„æ˜ç™½<code>defer</code>è¯­å¥æ‰§è¡Œæ—¶å‘ç”Ÿçš„äº‹æƒ…ã€‚</p><p>å…¶å®ä¹Ÿå¹¶ä¸å¤æ‚ï¼Œåœ¨<code>defer</code>è¯­å¥æ¯æ¬¡æ‰§è¡Œçš„æ—¶å€™ï¼ŒGoè¯­è¨€ä¼šæŠŠå®ƒæºå¸¦çš„<code>defer</code>å‡½æ•°åŠå…¶å‚æ•°å€¼å¦è¡Œå­˜å‚¨åˆ°ä¸€ä¸ªé“¾è¡¨ä¸­ã€‚</p><p>è¿™ä¸ªé“¾è¡¨ä¸è¯¥<code>defer</code>è¯­å¥æ‰€å±çš„å‡½æ•°æ˜¯å¯¹åº”çš„ï¼Œå¹¶ä¸”ï¼Œå®ƒæ˜¯å…ˆè¿›åå‡ºï¼ˆFILOï¼‰çš„ï¼Œç›¸å½“äºä¸€ä¸ªæ ˆã€‚</p><p>åœ¨éœ€è¦æ‰§è¡ŒæŸä¸ªå‡½æ•°ä¸­çš„<code>defer</code>å‡½æ•°è°ƒç”¨çš„æ—¶å€™ï¼ŒGoè¯­è¨€ä¼šå…ˆæ‹¿åˆ°å¯¹åº”çš„é“¾è¡¨ï¼Œç„¶åä»è¯¥é“¾è¡¨ä¸­ä¸€ä¸ªä¸€ä¸ªåœ°å–å‡º<code>defer</code>å‡½æ•°åŠå…¶å‚æ•°å€¼ï¼Œå¹¶é€ä¸ªæ‰§è¡Œè°ƒç”¨ã€‚</p><p>è¿™æ­£æ˜¯æˆ‘è¯´â€œ<code>defer</code>å‡½æ•°è°ƒç”¨ä¸å…¶æ‰€å±çš„<code>defer</code>è¯­å¥çš„æ‰§è¡Œé¡ºåºå®Œå…¨ç›¸åâ€çš„åŸå› äº†ã€‚</p><p>ä¸‹é¢è¯¥ä½ å‡ºåœºäº†ï¼Œæˆ‘åœ¨demo51.goæ–‡ä»¶ä¸­ç¼–å†™äº†ä¸€ä¸ªä¸æœ¬é—®é¢˜æœ‰å…³çš„ç¤ºä¾‹ï¼Œå…¶ä¸­çš„æ ¸å¿ƒä»£ç å¾ˆç®€å•ï¼Œåªæœ‰å‡ è¡Œè€Œå·²ã€‚</p><p>æˆ‘å¸Œæœ›ä½ å…ˆæŸ¥çœ‹ä»£ç ï¼Œç„¶åæ€è€ƒå¹¶å†™ä¸‹è¯¥ç¤ºä¾‹è¢«è¿è¡Œæ—¶ï¼Œä¼šæ‰“å°å‡ºå“ªäº›å†…å®¹ã€‚</p><p>å¦‚æœä½ å®åœ¨æƒ³ä¸å‡ºæ¥ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥å…ˆè¿è¡Œç¤ºä¾‹ï¼Œå†è¯•ç€è§£é‡Šæ‰“å°å‡ºçš„å†…å®¹ã€‚æ€»ä¹‹ï¼Œä½ éœ€è¦å®Œå…¨ææ˜ç™½é‚£å‡ è¡Œå†…å®¹ä¸ºä»€ä¹ˆä¼šä»¥é‚£æ ·çš„é¡ºåºå‡ºç°çš„ç¡®åˆ‡åŸå› ã€‚</p><h2>æ€»ç»“</h2><p>æˆ‘ä»¬è¿™ä¸¤æœŸçš„å†…å®¹ä¸»è¦è®²äº†ä¸¤ä¸ªå‡½æ•°å’Œä¸€æ¡è¯­å¥ã€‚<code>recover</code>å‡½æ•°ä¸“ç”¨äºæ¢å¤panicï¼Œå¹¶ä¸”è°ƒç”¨å³æ¢å¤ã€‚</p><p>å®ƒåœ¨è¢«è°ƒç”¨æ—¶ä¼šè¿”å›ä¸€ä¸ªç©ºæ¥å£ç±»å‹çš„ç»“æœå€¼ã€‚å¦‚æœåœ¨è°ƒç”¨å®ƒæ—¶å¹¶æ²¡æœ‰panicå‘ç”Ÿï¼Œé‚£ä¹ˆè¿™ä¸ªç»“æœå€¼å°±ä¼šæ˜¯<code>nil</code>ã€‚</p><p>è€Œå¦‚æœè¢«æ¢å¤çš„panicæ˜¯æˆ‘ä»¬é€šè¿‡è°ƒç”¨<code>panic</code>å‡½æ•°å¼•å‘çš„ï¼Œé‚£ä¹ˆå®ƒè¿”å›çš„ç»“æœå€¼å°±ä¼šæ˜¯æˆ‘ä»¬ä¼ ç»™<code>panic</code>å‡½æ•°å‚æ•°å€¼çš„å‰¯æœ¬ã€‚</p><p>å¯¹<code>recover</code>å‡½æ•°çš„è°ƒç”¨åªæœ‰åœ¨<code>defer</code>è¯­å¥ä¸­æ‰èƒ½çœŸæ­£èµ·ä½œç”¨ã€‚<code>defer</code>è¯­å¥æ˜¯è¢«ç”¨æ¥å»¶è¿Ÿæ‰§è¡Œä»£ç çš„ã€‚</p><p>æ›´ç¡®åˆ‡åœ°è¯´ï¼Œå®ƒä¼šè®©å…¶æºå¸¦çš„<code>defer</code>å‡½æ•°çš„è°ƒç”¨å»¶è¿Ÿæ‰§è¡Œï¼Œå¹¶ä¸”ä¼šå»¶è¿Ÿåˆ°è¯¥<code>defer</code>è¯­å¥æ‰€å±çš„å‡½æ•°å³å°†ç»“æŸæ‰§è¡Œçš„é‚£ä¸€åˆ»ã€‚</p><p>åœ¨åŒä¸€ä¸ªå‡½æ•°ä¸­ï¼Œå»¶è¿Ÿæ‰§è¡Œçš„<code>defer</code>å‡½æ•°è°ƒç”¨ï¼Œä¼šä¸å®ƒä»¬åˆ†åˆ«æ‰€å±çš„<code>defer</code>è¯­å¥çš„æ‰§è¡Œé¡ºåºå®Œå…¨ç›¸åã€‚è¿˜è¦æ³¨æ„ï¼ŒåŒä¸€æ¡<code>defer</code>è¯­å¥æ¯è¢«æ‰§è¡Œä¸€æ¬¡ï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªå»¶è¿Ÿæ‰§è¡Œçš„<code>defer</code>å‡½æ•°è°ƒç”¨ã€‚</p><p>è¿™ç§æƒ…å†µåœ¨<code>defer</code>è¯­å¥ä¸<code>for</code>è¯­å¥è”ç”¨æ—¶ç»å¸¸å‡ºç°ã€‚è¿™æ—¶æ›´è¦å…³æ³¨<code>for</code>è¯­å¥ä¸­ï¼ŒåŒä¸€æ¡<code>defer</code>è¯­å¥äº§ç”Ÿçš„å¤šä¸ª<code>defer</code>å‡½æ•°è°ƒç”¨çš„å®é™…æ‰§è¡Œé¡ºåºã€‚</p><p>ä»¥ä¸Šè¿™äº›ï¼Œå°±æ˜¯å…³äºGoè¯­è¨€ä¸­ç‰¹æ®Šçš„ç¨‹åºå¼‚å¸¸ï¼ŒåŠå…¶å¤„ç†æ–¹å¼çš„æ ¸å¿ƒçŸ¥è¯†ã€‚è¿™é‡Œè¾¹å¯ä»¥è¡ç”Ÿå‡ºå¾ˆå¤šé¢è¯•é¢˜ç›®ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æˆ‘ä»¬å¯ä»¥åœ¨<code>defer</code>å‡½æ•°ä¸­æ¢å¤panicï¼Œé‚£ä¹ˆå¯ä»¥åœ¨å…¶ä¸­å¼•å‘panicå—ï¼Ÿ</p><p><a href=\"https://github.com/hyper0x/Golang_Puzzlers\">æˆ³æ­¤æŸ¥çœ‹Goè¯­è¨€ä¸“æ æ–‡ç« é…å¥—è¯¦ç»†ä»£ç ã€‚</a></p>","comments":[{"had_liked":false,"id":84012,"user_name":"wesleydeng","can_delete":false,"product_type":"c1","uid":1061385,"ip_address":"","ucode":"EC9204CEDDAF8D","user_header":"https://static001.geekbang.org/account/avatar/00/10/32/09/669e21db.jpg","comment_is_top":false,"comment_ctime":1554769429,"is_pvip":false,"replies":[{"id":"30330","content":"è¿™æ˜¯ä¸¤ç§å®Œå…¨ä¸åŒçš„å¼‚å¸¸å¤„ç†æœºåˆ¶ã€‚Goè¯­è¨€çš„å¼‚å¸¸å¤„ç†æœºåˆ¶æ˜¯ä¸¤å±‚çš„ï¼Œdeferå’Œrecoverå¯ä»¥å¤„ç†æ„å¤–çš„çš„å¼‚å¸¸ï¼Œè€Œerroræ¥å£åŠç›¸å…³ä½“ç³»å¤„ç†å¯é¢„æœŸçš„å¼‚å¸¸ã€‚Goè¯­è¨€æŠŠä¸åŒç§ç±»çš„å¼‚å¸¸å®Œå…¨åŒºåˆ«å¯¹å¾…ï¼Œæˆ‘è§‰å¾—è¿™æ˜¯ä¸€ä¸ªè¿›æ­¥ã€‚<br><br>å¦å¤–ï¼Œdeferæœºåˆ¶èƒ½å¤Ÿå¤„ç†çš„è¿œä¸æ­¢å¼‚å¸¸ï¼Œè¿˜æœ‰å¾ˆå¤šèµ„æºå›æ”¶çš„ä»»åŠ¡å¯ä»¥ç”¨åˆ°å®ƒã€‚deferæœºåˆ¶å’Œgoroutineæœºåˆ¶ä¸€æ ·ï¼Œæ˜¯ä¸€ç§å¾ˆæœ‰æ•ˆæœçš„åˆ›æ–°ã€‚<br><br>æˆ‘è®¤ä¸ºdeferæœºåˆ¶æ­£æ˜¯å»ºç«‹åœ¨goroutineæœºåˆ¶ä¹‹ä¸Šçš„ã€‚å› ä¸ºæ¯ä¸ªå‡½æ•°éƒ½æœ‰å¯èƒ½æˆä¸ºgoå‡½æ•°ï¼Œæ‰€ä»¥å¿…é¡»è¦æŠŠå¼‚å¸¸å¤„ç†åšåˆ°å‡½æ•°çº§åˆ«ã€‚å¯ä»¥çœ‹åˆ°ï¼Œdeferæœºåˆ¶å’Œerroræœºåˆ¶éƒ½æ˜¯ä»¥å‡½æ•°ä¸ºè¾¹ç•Œçš„ã€‚å‰è€…åœ¨å‡½æ•°çº§åˆ«ä¸Šé˜»æ­¢ä¼šå¯¼è‡´éæ­£å¸¸æ§åˆ¶æµçš„æ„å¤–å¼‚å¸¸å¤–æº¢ï¼Œè€Œåè€…åœ¨å‡½æ•°çº§åˆ«ä¸Šç”¨æ­£å¸¸çš„æ§åˆ¶æµå‘å¤–ä¼ é€’å¯é¢„æœŸå¼‚å¸¸ã€‚<br><br>ä¸è¦è¯´ä»€ä¹ˆå…ˆé©±ï¼Œä»€ä¹ˆæ—§ä¾‹ï¼Œä¸–ç•Œåœ¨è¿›æ­¥ï¼ŒæŠ€æœ¯æ›´æ˜¯åœ¨çŒ›è¿›ã€‚ä¸è¦æŠŠæ€ç»´å›ºåŒ–åœ¨æŸé—¨æˆ–æŸäº›ç¼–ç¨‹è¯­è¨€ä¸Šã€‚æ¯ç§èƒ½å¤Ÿæµè¡Œèµ·æ¥çš„è¯­è¨€éƒ½ä¼šæœ‰è‡ªå·±ç‹¬æœ‰çš„ã€å·²ç»éªŒè¯çš„è¯­æ³•ã€é£æ ¼å’Œå“²å­¦ã€‚<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1554781413,"ip_address":"","comment_id":84012,"utype":1}],"discussion_count":9,"race_medal":0,"score":"366626989589","product_id":100013101,"comment_content":"ä»è¯­è¨€è®¾è®¡ä¸Šï¼Œä¸ä½¿ç”¨try-catchè€Œæ˜¯ç”¨defer-recoveræœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿc++å’Œjavaä½œä¸ºå…ˆé©±éƒ½ä½¿ç”¨try-catchï¼Œä¹Ÿæ¯”è¾ƒæ¸…æ™°ï¼Œä¸ºä»€ä¹ˆgoä½œä¸ºæ–°è¯­è¨€å´è¦å‘æ˜ä¸€ä¸ªè¿™æ ·çš„æ–°è¯­æ³•ï¼Ÿæœ‰ä½•è®¾è®¡ä¸Šçš„è€ƒé‡ï¼Ÿ","like_count":85,"discussions":[{"author":{"id":1026448,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a9/90/0c5ed3d9.jpg","nickname":"é¢‡å¿’å¦¥","note":"","ucode":"AA86AD1049BC2E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":161276,"discussion_content":"å¦‚æœå°±try-catch å’Œå…³é—­èµ„æºçš„è§’åº¦æ¥è¯´ï¼Œç›®å‰defer çš„è®¾è®¡å®åœ¨ç®—ä¸ä¸Šä¼˜é›…ï¼Œå¦‚æœæŠŠdeferåšæˆå‡½æ•°çº§ä»£ç å—ä¼šæ›´å¥½ä¸€äº›ï¼Œæ¯”å¦‚è¿™æ ·ï¼š\nfunc() {\n} defer {\n} defer {\n}\nä¸è¿‡defer çš„ä¼˜åŠ¿åœ¨äºå¯ä»¥è¿è¡Œæ—¶æ’å…¥ï¼Œè€Œä¸æ˜¯ç¼–è¯‘æ—¶ã€‚æ¯”å¦‚ä½ å¯ä»¥ç”¨if æ¥å†³å®šæ˜¯å¦è¦æ’å…¥ä¸€ä¸ªdefer ã€‚\næ‰€ä»¥æˆ‘è§‰å¾—defer ç”¨æ¥å¤„ç†panic åº”è¯¥ç®—æ˜¯ä¸€ä¸ªå…¼èŒï¼Œæ˜¯go çš„è®¾è®¡è€…å·æ‡’çš„ç»“æœã€‚","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1580883183,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446217,"discussion_content":"è¿™æ˜¯ä¸¤ç§å®Œå…¨ä¸åŒçš„å¼‚å¸¸å¤„ç†æœºåˆ¶ã€‚Goè¯­è¨€çš„å¼‚å¸¸å¤„ç†æœºåˆ¶æ˜¯ä¸¤å±‚çš„ï¼Œdeferå’Œrecoverå¯ä»¥å¤„ç†æ„å¤–çš„çš„å¼‚å¸¸ï¼Œè€Œerroræ¥å£åŠç›¸å…³ä½“ç³»å¤„ç†å¯é¢„æœŸçš„å¼‚å¸¸ã€‚Goè¯­è¨€æŠŠä¸åŒç§ç±»çš„å¼‚å¸¸å®Œå…¨åŒºåˆ«å¯¹å¾…ï¼Œæˆ‘è§‰å¾—è¿™æ˜¯ä¸€ä¸ªè¿›æ­¥ã€‚\n\nå¦å¤–ï¼Œdeferæœºåˆ¶èƒ½å¤Ÿå¤„ç†çš„è¿œä¸æ­¢å¼‚å¸¸ï¼Œè¿˜æœ‰å¾ˆå¤šèµ„æºå›æ”¶çš„ä»»åŠ¡å¯ä»¥ç”¨åˆ°å®ƒã€‚deferæœºåˆ¶å’Œgoroutineæœºåˆ¶ä¸€æ ·ï¼Œæ˜¯ä¸€ç§å¾ˆæœ‰æ•ˆæœçš„åˆ›æ–°ã€‚\n\næˆ‘è®¤ä¸ºdeferæœºåˆ¶æ­£æ˜¯å»ºç«‹åœ¨goroutineæœºåˆ¶ä¹‹ä¸Šçš„ã€‚å› ä¸ºæ¯ä¸ªå‡½æ•°éƒ½æœ‰å¯èƒ½æˆä¸ºgoå‡½æ•°ï¼Œæ‰€ä»¥å¿…é¡»è¦æŠŠå¼‚å¸¸å¤„ç†åšåˆ°å‡½æ•°çº§åˆ«ã€‚å¯ä»¥çœ‹åˆ°ï¼Œdeferæœºåˆ¶å’Œerroræœºåˆ¶éƒ½æ˜¯ä»¥å‡½æ•°ä¸ºè¾¹ç•Œçš„ã€‚å‰è€…åœ¨å‡½æ•°çº§åˆ«ä¸Šé˜»æ­¢ä¼šå¯¼è‡´éæ­£å¸¸æ§åˆ¶æµçš„æ„å¤–å¼‚å¸¸å¤–æº¢ï¼Œè€Œåè€…åœ¨å‡½æ•°çº§åˆ«ä¸Šç”¨æ­£å¸¸çš„æ§åˆ¶æµå‘å¤–ä¼ é€’å¯é¢„æœŸå¼‚å¸¸ã€‚\n\nä¸è¦è¯´ä»€ä¹ˆå…ˆé©±ï¼Œä»€ä¹ˆæ—§ä¾‹ï¼Œä¸–ç•Œåœ¨è¿›æ­¥ï¼ŒæŠ€æœ¯æ›´æ˜¯åœ¨çŒ›è¿›ã€‚ä¸è¦æŠŠæ€ç»´å›ºåŒ–åœ¨æŸé—¨æˆ–æŸäº›ç¼–ç¨‹è¯­è¨€ä¸Šã€‚æ¯ç§èƒ½å¤Ÿæµè¡Œèµ·æ¥çš„è¯­è¨€éƒ½ä¼šæœ‰è‡ªå·±ç‹¬æœ‰çš„ã€å·²ç»éªŒè¯çš„è¯­æ³•ã€é£æ ¼å’Œå“²å­¦ã€‚\n\n","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1554781413,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1114356,"avatar":"https://static001.geekbang.org/account/avatar/00/11/00/f4/cc5f0896.jpg","nickname":"Jowin","note":"","ucode":"19017F7D06C22A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":273328,"discussion_content":"å¯é¢„æœŸçš„é”™è¯¯å’Œå¼‚å¸¸åˆ†å¼€ï¼Œçš„ç¡®è¦å¥½ä¸€äº›ï¼Œå¯ä»¥é¿å…å¼‚å¸¸è¢«æ»¥ç”¨ã€‚åœ¨å¾ˆå¤šæ—¶å€™ä¸ºäº†çœäº‹å„¿ï¼Œæœ‰äººä¼šç”¨try/cacheä»£æ›¿é˜²å«ä»£ç ï¼Œä¸åšé”™è¯¯æ£€æŸ¥ã€‚æˆ‘èµåŒä¸‹é¢è¿™ä¸ªå“¥ä»¬çš„è¯´æ³•ï¼Œdeferæ˜¯ç”¨æ¥åšå‡½æ•°çº§åˆ«çš„èµ„æºæ¸…ç†å·¥ä½œçš„ï¼Œå¤„ç†panicæ˜¯å…¼èŒã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1590447530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1122574,"avatar":"https://static001.geekbang.org/account/avatar/00/11/21/0e/b2c7469c.jpg","nickname":"ç¿¼æ±Ÿäº­èµ‹","note":"","ucode":"B41C208B19C76C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":41696,"discussion_content":"æˆ‘è®¤ä¸ºtryæ›´ç®€å•æ˜äº†ï¼ŒåŠŸèƒ½ä¸Šæ˜¯ä¸€æ ·çš„ã€‚\n\nä¸€æ¡æ¡äº‰è®ºï¼š\n\n1. å¯é¢„æœŸçš„å¼‚å¸¸åœ¨javaé‡Œå¯¹åº”çš„æ˜¯checked exceptionï¼Œæ„å¤–çš„å¼‚å¸¸å¯¹åº”çš„æ˜¯runtime exceptionã€‚ä¹Ÿæ˜¯å’Œgoä¸€æ ·çš„ä¸åŒæƒ…å†µåŒºåˆ«å¯¹å¾…ã€‚å½“ç„¶ï¼Œå®é™…æƒ…å†µä¸‹ï¼Œæ—©æœŸjavaä¸–ç•Œé‡Œï¼ŒåŒ…æ‹¬jdkè‡ªå·±ï¼Œå¯¹ä¸¤ä¸ªçš„åŒºåˆ«é˜è¿°æŒ‡å¯¼å¾—ä¸æ¸…æ™°ï¼Œå¯¼è‡´checked exceptionè¢«æ»¥ç”¨ã€‚ä¸è¿‡c++æ²¡è¿™ä¸ªåŒºåˆ«ã€‚\n\n2. try finallyåŒæ ·å¯ä»¥ç”¨æ¥é‡Šæ”¾èµ„æºã€‚å¦å¤–ï¼Œjavaè¿˜æœ‰closeableå•æ–¹æ³•æ¥å£ï¼ŒåŒæ ·ä½œç”¨ã€‚\n\n3. tryæ˜¯blockå±‚çº§çš„æœºåˆ¶ï¼Œæ¯”å‡½æ•°èŒƒå›´æ›´å°æ›´çµæ´»","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1572488232,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1351215,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/AyccJq7eg6w3aCn7AxpicdplGhhY2xYOJLd9q2Xcjqxdbb6HO7rU4p37oxCjUnrcydpQVjNgcIhxOLKsI4w2KWQ/132","nickname":"Iflei","note":"","ucode":"812264ADE9CB33","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1122574,"avatar":"https://static001.geekbang.org/account/avatar/00/11/21/0e/b2c7469c.jpg","nickname":"ç¿¼æ±Ÿäº­èµ‹","note":"","ucode":"B41C208B19C76C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":117978,"discussion_content":"tryé‡Œå†™ä¸€å¨ä»£ç æ˜¯éå¸¸æ¶å¿ƒçš„","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1578146173,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":41696,"ip_address":""},"score":117978,"extra":""},{"author":{"id":1296063,"avatar":"https://static001.geekbang.org/account/avatar/00/13/c6/bf/52b3f71d.jpg","nickname":"dawn","note":"","ucode":"1757B28F1EF5C4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1351215,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/AyccJq7eg6w3aCn7AxpicdplGhhY2xYOJLd9q2Xcjqxdbb6HO7rU4p37oxCjUnrcydpQVjNgcIhxOLKsI4w2KWQ/132","nickname":"Iflei","note":"","ucode":"812264ADE9CB33","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287854,"discussion_content":"å°é—­åŸåˆ™ï¼Œä¸€ä¸ªå‡½æ•°ä¸åº”å½“æŠ›é”™è¯¯çš„ï¼Œå³ä¾¿è‡ªå·±å†…éƒ¨å‡ºç°å¼‚å¸¸ï¼Œä¹Ÿåº”å½“å¯¹è°ƒç”¨æ–¹å±è”½ï¼Œæ¯”å¦‚ä¸€ä¸ªinsertå‡½æ•°ï¼Œä½ èƒ½å‘Šè¯‰è°ƒç”¨æ–¹çš„åªæ˜¯æ˜¯å¦æ’å…¥æˆåŠŸä»¥åŠæ’å…¥æˆåŠŸåçš„idï¼Œè€Œå†…éƒ¨å¦‚æ•°æ®åº“æŒ‚äº†ï¼Œç½‘ç»œè¿æ¥è¶…æ—¶ç­‰ï¼Œè¿™äº›å¼‚å¸¸æƒ…å†µéƒ½åº”å½“è§†ä¸ºæ’å…¥å¤±è´¥ï¼Œjavaåœ¨è¿™ä¸€å±‚æŠ›å¼‚å¸¸ï¼Œæ˜¯å› ä¸ºç³»ç»Ÿæœ‰ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†ï¼Œé‚£ä¹ˆgoå‘¢ï¼Œerroræ»¡å¤©é£ï¼Œéš¾é“æ²¡è°ƒç”¨ä¸€ä¸ªå‡½æ•°éƒ½åº”è¯¥å»åˆ¤æ–­æ˜¯å¦æœ‰errorå˜›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593569686,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":117978,"ip_address":""},"score":287854,"extra":""},{"author":{"id":1351215,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/AyccJq7eg6w3aCn7AxpicdplGhhY2xYOJLd9q2Xcjqxdbb6HO7rU4p37oxCjUnrcydpQVjNgcIhxOLKsI4w2KWQ/132","nickname":"Iflei","note":"","ucode":"812264ADE9CB33","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1296063,"avatar":"https://static001.geekbang.org/account/avatar/00/13/c6/bf/52b3f71d.jpg","nickname":"dawn","note":"","ucode":"1757B28F1EF5C4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290611,"discussion_content":"ä½ å¯ä»¥è¿”å›å€¼ä¸åŠ errorå•Šï¼Œé€šè¿‡è¿”å›æ˜¯å¦ä¸ºç©ºå°±çŸ¥é“æ˜¯å¦å¤„ç†æˆåŠŸï¼Œå¦å¤–åœ¨ä¸€ä¸ªæ–°åç¨‹å¼€å§‹é€šè¿‡defer  å¤„ç†recoverï¼Œpanicè‡ªåº•å‘ä¸Šä¼ é€’æ€»ä¼šè¢«æ•è·ï¼Œæ¯”åˆ°å¤„try catchç¾è§‚å¤šäº†å§","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1594549128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":287854,"ip_address":""},"score":290611,"extra":""}]},{"author":{"id":1188863,"avatar":"https://static001.geekbang.org/account/avatar/00/12/23/ff/701c6f4d.jpg","nickname":"å°éŸ©","note":"","ucode":"6CDE03F432607E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6511,"discussion_content":"æ‹¥æŠ±å˜åŒ–ï¼Œæ‹¥æŠ±æœªæ¥Ù©(à¹‘^o^à¹‘)Û¶","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566953160,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":31240,"user_name":"äº‘å­¦","can_delete":false,"product_type":"c1","uid":1027233,"ip_address":"","ucode":"366AE90BA06356","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ac/a1/43d83698.jpg","comment_is_top":false,"comment_ctime":1539135121,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"177632794257","product_id":100013101,"comment_content":"deferå…¶å®æ˜¯é¢„è°ƒç”¨ï¼Œäº§ç”Ÿä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œå‹æ ˆä¿å­˜ï¼Œå‡½æ•°é€€å‡ºæ—¶ä¾æ¬¡å–å‡ºæ‰§è¡Œ","like_count":41},{"had_liked":false,"id":88575,"user_name":"å‡Œæƒœæ²«","can_delete":false,"product_type":"c1","uid":1008524,"ip_address":"","ucode":"9069731E14F8DB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/8c/8e803651.jpg","comment_is_top":false,"comment_ctime":1555944835,"is_pvip":false,"replies":[{"id":"31780","content":"å—¯ï¼Œæ˜¯çš„ï¼Œç”±äºä¹‹å‰å‘ç”Ÿçš„ panic å·²ç»è¢« recover äº†ï¼Œæ‰€ä»¥æœ€ç»ˆè¢«æŠ›å‡ºå»çš„å°±åº”è¯¥æ˜¯å¤–å±‚ defer è¯­å¥ä¸­çš„é‚£ä¸ª panicã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1555984317,"ip_address":"","comment_id":88575,"utype":1}],"discussion_count":2,"race_medal":0,"score":"78865356163","product_id":100013101,"comment_content":"å¦‚æœdeferä¸­å¼•å‘panicï¼Œé‚£ä¹ˆåœ¨è¯¥æ®µdeferå‡½æ•°ä¹‹å‰ï¼Œéœ€è¦å¦å¤–ä¸€ä¸ªdeferæ¥æ•è·è¯¥panicï¼Œå¹¶ä¸”ä»£ç ä¸­æœ€åä¸€ä¸ªpanicä¼šè¢«æŠ›å¼ƒï¼Œç”±deferä¸­çš„panicæ¥æˆä¸ºæœ€åçš„å¼‚å¸¸è¿”å›ã€‚","like_count":18,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447833,"discussion_content":"å—¯ï¼Œæ˜¯çš„ï¼Œç”±äºä¹‹å‰å‘ç”Ÿçš„ panic å·²ç»è¢« recover äº†ï¼Œæ‰€ä»¥æœ€ç»ˆè¢«æŠ›å‡ºå»çš„å°±åº”è¯¥æ˜¯å¤–å±‚ defer è¯­å¥ä¸­çš„é‚£ä¸ª panicã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555984317,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134774,"avatar":"https://static001.geekbang.org/account/avatar/00/11/50/b6/a60efa42.jpg","nickname":"å­Ÿå‡¡æµ©","note":"","ucode":"77522A196C31D5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":320020,"discussion_content":"1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604225799,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":88673,"user_name":"å°é¾™è™¾","can_delete":false,"product_type":"c1","uid":1141385,"ip_address":"","ucode":"A6DFC7DD17E297","user_header":"https://static001.geekbang.org/account/avatar/00/11/6a/89/3cac9f83.jpg","comment_is_top":false,"comment_ctime":1555981407,"is_pvip":false,"replies":[{"id":"31778","content":"æ˜¯çš„ï¼Œè¿™æ˜¯æœ€ä¸»è¦å¥½å¤„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1555983878,"ip_address":"","comment_id":88673,"utype":1}],"discussion_count":2,"race_medal":0,"score":"70275458143","product_id":100013101,"comment_content":"æˆ‘æ„Ÿè§‰è¿˜æ˜¯goçš„è¿™ç§è®¾è®¡å¥½ç”¨ï¼Œå®ƒä¼šå¼ºè¿«å¼€å‘è€…åŒºåˆ«å¯¹å¾…é”™è¯¯å’Œå¼‚å¸¸ï¼Œå¹¶åšå‡ºä¸åŒçš„å¤„ç†ã€‚ç›¸æ¯”try{}catchï¼Œæˆ‘åœ¨å¼€å‘ä¸­ç»å¸¸çœ‹åˆ°å¼€å‘è€…æŠŠå¤§æ®µå¤§æ®µçš„ä»£ç æˆ–è€…æ•´ä¸ªå¤„ç†å†™åˆ°try{}ä¸­ï¼Œè¿™æœ¬èº«å°±æ˜¯å¯¹try{}catchçš„ä¹±ç”¨","like_count":16,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447861,"discussion_content":"æ˜¯çš„ï¼Œè¿™æ˜¯æœ€ä¸»è¦å¥½å¤„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555983878,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1989926,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/5d/26/972b2b8f.jpg","nickname":"è¶Šæ³½","note":"","ucode":"973DAB48E413BF","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390552,"discussion_content":"æ–°æ‰‹æ€æ ·åŒºåˆ«é”™è¯¯å’Œå¼‚å¸¸å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629887736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":54484,"user_name":"sket","can_delete":false,"product_type":"c1","uid":1197729,"ip_address":"","ucode":"C7E24300D794F7","user_header":"http://thirdwx.qlogo.cn/mmopen/KFgDEHIEpnSjjGClCeqmKYJsSOQo40BMHRTtNYrWyQP9WypAjTToplVND944one2pkEyH5Oib4m4wUOJ9xBEIZQ/132","comment_is_top":false,"comment_ctime":1545880079,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"35905618447","product_id":100013101,"comment_content":"æ„Ÿè§‰è¿˜æ˜¯try{}catchè¿™ç§å¼‚å¸¸å¤„ç†å¥½ç”¨","like_count":8,"discussions":[{"author":{"id":2806043,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLBFkSq1oiaEMRjtyyv4ZpCI0OuaSsqs04ODm0OkZF6QhsAh3SvqhxibS2n7PLAVZE3QRSn5Hic0DyXg/132","nickname":"ddh","note":"","ucode":"8E852375365F16","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541053,"discussion_content":"æ„Ÿè§‰å„æœ‰å„çš„ä¼˜åŠ¿å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640243189,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":175901,"user_name":"é¢‡å¿’å¦¥","can_delete":false,"product_type":"c1","uid":1026448,"ip_address":"","ucode":"AA86AD1049BC2E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a9/90/0c5ed3d9.jpg","comment_is_top":false,"comment_ctime":1580882683,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"31645653755","product_id":100013101,"comment_content":"ä½œè€…æƒ³æŠŠæ¦‚å¿µç»™æˆ‘ä»¬è®²æ¸…æ¥šï¼Œä½†æ˜¯æˆ‘æ€»è§‰ç€çœ‹ç€è´¹åŠ²ã€‚ä¸ºå•¥ï¼Ÿå› ä¸ºä½œè€…å¤ªå•°å—¦äº†ã€‚æ¯”å¦‚ï¼š<br>deferå‡½æ•°è°ƒç”¨çš„æ‰§è¡Œé¡ºåºä¸å®ƒä»¬åˆ†åˆ«æ‰€å±çš„deferè¯­å¥çš„å‡ºç°é¡ºåºï¼ˆæ›´ä¸¥è°¨åœ°è¯´ï¼Œæ˜¯æ‰§è¡Œé¡ºåºï¼‰å®Œå…¨ç›¸åã€‚<br>æ”¹æˆè¿™æ ·å°±ç®€å•å¤šäº†ï¼šdeferå‡½æ•°çš„è°ƒç”¨é¡ºåºä¸å…¶deferè¯­å¥æ‰§è¡Œé¡ºåºç›¸åã€‚<br>è¿˜æœ‰ï¼šå½“ä¸€ä¸ªå‡½æ•°å³å°†ç»“æŸæ‰§è¡Œæ—¶ï¼Œå…¶ä¸­çš„å†™åœ¨æœ€ä¸‹è¾¹çš„deferå‡½æ•°è°ƒç”¨ä¼šæœ€å…ˆæ‰§è¡Œï¼Œå…¶æ¬¡æ˜¯å†™åœ¨å®ƒä¸Šè¾¹ã€ä¸å®ƒçš„è·ç¦»æœ€è¿‘çš„é‚£ä¸ªdeferå‡½æ•°è°ƒç”¨ï¼Œä»¥æ­¤ç±»æ¨ï¼Œæœ€ä¸Šè¾¹çš„deferå‡½æ•°è°ƒç”¨ä¼šæœ€åä¸€ä¸ªæ‰§è¡Œã€‚<br>æ”¹æˆï¼šå½“ä¸€ä¸ªå‡½æ•°å³å°†æ‰§è¡Œç»“æŸæ—¶ï¼Œæœ€ä¸‹é¢çš„deferå‡½æ•°å…ˆæ‰§è¡Œï¼Œç„¶åæ˜¯å€’æ•°ç¬¬äºŒä¸ªï¼Œä»¥æ­¤ç±»æ¨ã€‚","like_count":7,"discussions":[{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387860,"discussion_content":"æˆ‘è®¤ä¸ºä½œè€…çš„è¡¨è¿°æ›´åŠ ä¸¥è°¨ï¼Œä¸ä¿¡ä½ æ—¥åå†æ¥å“è¯»ã€‚","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1628475948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2725689,"avatar":"https://static001.geekbang.org/account/avatar/00/29/97/39/1f5c6350.jpg","nickname":"æœ±å…ƒå½¬ğŸ—¿","note":"","ucode":"9CBD43225EE65B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537231,"discussion_content":"ä½œè€…çš„è¡¨è¿°æ˜¯å¤šç‚¹ï¼Œä½†æ˜¯å¥½ç†è§£å•Šâ€¦â€¦","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1639008349,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2933322,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/c2/4a/22930340.jpg","nickname":"Biff","note":"","ucode":"0F89DF226EEB9F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574080,"discussion_content":"æˆ–è€…è®²:å½“ä»£ç é‡åˆ°deferä¼šå°†deferä¾æ¬¡å…¥æ ˆï¼Œå‡½æ•°æ‰§è¡Œå®Œå†ä¾æ¬¡å‡ºæ ˆï¼Œè™½ç„¶åç€è¯´deferçš„åº•å±‚æ˜¯ é“¾è¡¨ï¼Œä½†æ˜¯å½“æ ˆç†è§£æ²¡æ¯›ç—…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653823942,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":70405,"user_name":"liangjf","can_delete":false,"product_type":"c1","uid":1058812,"ip_address":"","ucode":"681A6CCF098F55","user_header":"https://static001.geekbang.org/account/avatar/00/10/27/fc/b8d83d56.jpg","comment_is_top":false,"comment_ctime":1551092478,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27320896254","product_id":100013101,"comment_content":"Go è¯­è¨€ä¼šæŠŠå®ƒæºå¸¦çš„deferå‡½æ•°åŠå…¶å‚æ•°å€¼å¦è¡Œå­˜å‚¨åˆ°ä¸€ä¸ªé˜Ÿåˆ—ä¸­ã€‚<br><br>è¿™ä¸ªé˜Ÿåˆ—ä¸è¯¥deferè¯­å¥æ‰€å±çš„å‡½æ•°æ˜¯å¯¹åº”çš„ï¼Œå¹¶ä¸”ï¼Œå®ƒæ˜¯å…ˆè¿›åå‡ºï¼ˆFILOï¼‰çš„ï¼Œç›¸å½“äºä¸€ä¸ªæ ˆ<br><br><br>ç›´æ¥è¡¨è¾¾ä¸º  åˆ›å»ºdeferæ—¶â€œå‡½æ•°å¯¹è±¡â€œå‹æ ˆï¼Œpanicè§¦å‘æ—¶å‡ºæ ˆè°ƒç”¨   æ›´å®¹æ˜“ç†è§£å§","like_count":6},{"had_liked":false,"id":232961,"user_name":"å:æµ·ä¸œ","can_delete":false,"product_type":"c1","uid":1269996,"ip_address":"","ucode":"0BBF4402F75D07","user_header":"https://static001.geekbang.org/account/avatar/00/13/60/ec/11cf22de.jpg","comment_is_top":false,"comment_ctime":1594178042,"is_pvip":false,"replies":[{"id":"85984","content":"å¾ˆç®€å•ï¼Œåœ¨åœºæ™¯ä¸€ä¸­ï¼Œtest01 å‡½æ•°ä¸æ˜¯ä¸€ä¸ª defer å‡½æ•°ï¼ˆå®ƒåªæ˜¯è¢« defer å‡½æ•°è°ƒç”¨äº†è€Œå·²ï¼‰ï¼›è€Œåœ¨åœºæ™¯äºŒä¸­ï¼Œtest01 å‡½æ•°å´æ˜¯ä¸€ä¸ªä¸æŠ˜ä¸æ‰£çš„ defer å‡½æ•°ã€‚åªæœ‰ç›´æ¥åœ¨ defer å‡½æ•°ä¸­è°ƒç”¨ recover() å‡½æ•°æ‰èƒ½èµ·åˆ°æ¢å¤ panic çš„ä½œç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1594196262,"ip_address":"","comment_id":232961,"utype":1}],"discussion_count":3,"race_medal":0,"score":"18774047226","product_id":100013101,"comment_content":"&#47;&#47;æµ‹è¯•åœºæ™¯1<br>func Test()  {<br>\tdefer func() {<br>\t\tif errRecover := recover(); errRecover != nil {<br>\t\t\tfmt.Println(&quot;recover2...&quot;)<br>\t\t}<br>\t\tfmt.Println(&quot;no recover2...&quot;)<br>\t}()<br>\tdefer func() {<br>\t\ttest01()  &#47;&#47; test01()æ–¹æ³•åœ¨defer func(){}ä¸­æ‰§è¡Œ<br>\t}()<br>\tb := 0<br>\ta := 1 &#47; b<br>\tfmt.Println(a)<br>\treturn<br>}<br><br>func test01() {<br>\tif e := recover(); e != nil {<br>\t\tfmt.Println(&quot;recover...&quot;)<br>\t} else {<br>\t\tfmt.Println(&quot;no recover...&quot;)<br>\t}<br>\tfmt.Println(&quot;defer exe...&quot;)<br>}<br><br>func main() {<br>\tTest()<br>}<br>&#47;&#47;è¾“å‡ºï¼š<br>no recover...<br>defer exe...<br>recover2...<br>no recover2...<br><br>&#47;&#47;æµ‹è¯•åœºæ™¯2<br>func Test()  {<br>\tdefer func() {<br>\t\tif errRecover := recover(); errRecover != nil {<br>\t\t\tfmt.Println(&quot;recover2...&quot;)<br>\t\t}<br>\t\tfmt.Println(&quot;no recover2...&quot;)<br>\t}()<br>\tdefer test01()  &#47;&#47;test01()ç›´æ¥æ”¾åˆ°deferåé¢ <br>\tb := 0<br>\ta := 1 &#47; b<br>\tfmt.Println(a)<br>\treturn<br>}<br><br>func test01() {<br>\tif e := recover(); e != nil {<br>\t\tfmt.Println(&quot;recover...&quot;)<br>\t} else {<br>\t\tfmt.Println(&quot;no recover...&quot;)<br>\t}<br>\tfmt.Println(&quot;defer exe...&quot;)<br>}<br><br>func main() {<br>\tTest()<br>}<br>&#47;&#47;è¾“å‡ºï¼š<br>recover...<br>defer exe...<br>no recover2...<br><br>æˆ‘çš„é—®é¢˜æ˜¯ï¼šä¸ºä»€ä¹ˆåœºæ™¯1ä¸­å‡ºç°panicæ²¡æœ‰åœ¨defer func() {<br>\t\ttest01()<br>\t}()ä¸­è¢«recoverï¼Œè€Œåœ¨defer func() {<br>\t\tif errRecover := recover(); errRecover != nil {<br>\t\t\tfmt.Println(&quot;recover2...&quot;)<br>\t\t}<br>\t\tfmt.Println(&quot;no recover2...&quot;)<br>\t}()ä¸­è¢«recoverã€‚<br>åœºæ™¯2ä½¿ç”¨defer test01 çš„å†™æ³•åå°±å¯ä»¥è¢«recoverã€‚","like_count":4,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500828,"discussion_content":"å¾ˆç®€å•ï¼Œåœ¨åœºæ™¯ä¸€ä¸­ï¼Œtest01 å‡½æ•°ä¸æ˜¯ä¸€ä¸ª defer å‡½æ•°ï¼ˆå®ƒåªæ˜¯è¢« defer å‡½æ•°è°ƒç”¨äº†è€Œå·²ï¼‰ï¼›è€Œåœ¨åœºæ™¯äºŒä¸­ï¼Œtest01 å‡½æ•°å´æ˜¯ä¸€ä¸ªä¸æŠ˜ä¸æ‰£çš„ defer å‡½æ•°ã€‚åªæœ‰ç›´æ¥åœ¨ defer å‡½æ•°ä¸­è°ƒç”¨ recover() å‡½æ•°æ‰èƒ½èµ·åˆ°æ¢å¤ panic çš„ä½œç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594196262,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1269996,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/ec/11cf22de.jpg","nickname":"å:æµ·ä¸œ","note":"","ucode":"0BBF4402F75D07","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290127,"discussion_content":"è°¢è°¢è€å¸ˆï¼Œçœ‹äº†ä¸‹å®˜ç½‘æ–‡æ¡£ï¼Œéƒ½æ˜¯ä½¿ç”¨åœºæ™¯äºŒå®ç°çš„recover,ä¸çŸ¥é“æ˜¯ä¸æ˜¯goå®˜æ–¹deferä¸­å°±æ˜¯è¿™ä¹ˆè§„å®šçš„:åªæœ‰ç›´æ¥åœ¨ defer å‡½æ•°ä¸­è°ƒç”¨ recover() å‡½æ•°æ‰èƒ½æ¢å¤ panic ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1594351094,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1151796,"avatar":"https://static001.geekbang.org/account/avatar/00/11/93/34/5e5b958e.jpg","nickname":"How2Go","note":"","ucode":"A2242F1C832D36","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380242,"discussion_content":"éƒè€å¸ˆï¼Œä¸ºä»€ä¹ˆtest01åœ¨è¢«defer å‡½æ•°è°ƒç”¨çš„æƒ…å†µä¸‹ï¼Œä¸èƒ½recoverå‘¢ï¼Ÿ recoverçš„æ˜¯åªèƒ½æ¢å¤å½“å‰å‡½æ•°è°ƒç”¨å—ï¼Ÿä¸€æ—¦ç¦»å¼€å½“å‰æ ˆå¸§å°±ä¼šå¤±æ•ˆå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624411622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159541,"user_name":"ç–¯ç´","can_delete":false,"product_type":"c1","uid":1099379,"ip_address":"","ucode":"82ACAA4A27753D","user_header":"https://static001.geekbang.org/account/avatar/00/10/c6/73/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1575677827,"is_pvip":false,"replies":[{"id":"60978","content":"å½“ç„¶ã€‚å› ä¸ºå®ƒä»¬ä¹‹é—´ä¸æ˜¯ä¸²è¡Œçš„å…³ç³»ï¼Œæ‰€ä»¥ panic ä¼ æ’­ä¸åˆ°å…¶ä»–çš„ goroutine é‚£é‡Œã€‚æ‰€ä»¥ï¼Œæ¯ä¸ª goroutine éƒ½åº”è¯¥æœ‰è‡ªå·±çš„å¼‚å¸¸å¤„ç†ä»£ç ã€‚æˆ‘ä»¬å¯ä»¥è®¾è®¡ä¸€ä¸ªæ•´ä½“çš„å¼‚å¸¸å¤„ç†è§„åˆ™æˆ–ä½“ç³»ï¼Œå¹¶åœ¨æ¯ä¸ª goroutine é‡Œéƒ½éµå¾ªå®ƒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1575699583,"ip_address":"","comment_id":159541,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18755547011","product_id":100013101,"comment_content":"è¯•éªŒäº†ä¸€ä¸‹åœ¨ goroutine é‡Œé¢ panicï¼Œå…¶ä»–çš„ goroutineï¼ˆæ¯”å¦‚mainï¼‰æ˜¯ recover()ä¸åˆ°çš„ï¼š<br><br>func main() {<br>\tfmt.Println(&quot;start&quot;)<br>\tdefer func() {<br>\t\tif p := recover(); p != nil {<br>\t\t\tfmt.Println(p)<br>\t\t}<br>\t}()<br>\tvar wg sync.WaitGroup<br>\twg.Add(1)<br>\tgo func() {<br>\t\tdefer func() {<br>\t\t    wg.Done()<br>\t\t}()<br>\t\tpanic(errors.New(&quot;panic in goroutine&quot;))<br><br>\t}()<br>\twg.Wait()<br>}","like_count":4,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477091,"discussion_content":"å½“ç„¶ã€‚å› ä¸ºå®ƒä»¬ä¹‹é—´ä¸æ˜¯ä¸²è¡Œçš„å…³ç³»ï¼Œæ‰€ä»¥ panic ä¼ æ’­ä¸åˆ°å…¶ä»–çš„ goroutine é‚£é‡Œã€‚æ‰€ä»¥ï¼Œæ¯ä¸ª goroutine éƒ½åº”è¯¥æœ‰è‡ªå·±çš„å¼‚å¸¸å¤„ç†ä»£ç ã€‚æˆ‘ä»¬å¯ä»¥è®¾è®¡ä¸€ä¸ªæ•´ä½“çš„å¼‚å¸¸å¤„ç†è§„åˆ™æˆ–ä½“ç³»ï¼Œå¹¶åœ¨æ¯ä¸ª goroutine é‡Œéƒ½éµå¾ªå®ƒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575699583,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":146280,"user_name":"ç¿¼æ±Ÿäº­èµ‹","can_delete":false,"product_type":"c1","uid":1122574,"ip_address":"","ucode":"B41C208B19C76C","user_header":"https://static001.geekbang.org/account/avatar/00/11/21/0e/b2c7469c.jpg","comment_is_top":false,"comment_ctime":1572489017,"is_pvip":false,"replies":[{"id":"56475","content":"Go çš„ error å…¶å®å°±æ˜¯åœ¨ç”¨æ™®é€šçš„æ§åˆ¶æµæ¥å¤„ç†å¼‚å¸¸ã€‚ä½†æ˜¯æ€§èƒ½å´å¯ä»¥æœ‰éå¸¸æ˜æ˜¾çš„æé«˜ã€‚å…¶å®ä¸ç®¡æ€ä¹ˆå¼„éƒ½åšä¸åˆ°â€œç¾Šæ¯›å‡ºåœ¨çŒªèº«ä¸Šâ€ã€‚ä¸ç®¡æ˜¯è®©å¼€å‘è€…è‡ªè¡Œå¤„ç†ï¼Œè¿˜æ˜¯è¿è¡Œæ—¶ç³»ç»Ÿè‡ªå·±æ§åˆ¶ï¼Œéƒ½ä¼šå¯¹ç¨‹åºçš„æµç•…åº¦äº§ç”Ÿå½±å“ã€‚è¿™å°±æ˜¯ç¨‹åºç¨³å®šæ€§å’Œç¨‹åºæµç•…åº¦ï¼ˆåŒ…æ‹¬å¯è¯»æ€§ã€æ§åˆ¶æµå’Œæ€§èƒ½ç­‰ï¼‰ä¹‹é—´çš„trade offã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1572494191,"ip_address":"","comment_id":146280,"utype":1}],"discussion_count":3,"race_medal":0,"score":"14457390905","product_id":100013101,"comment_content":"iavaä¸–ç•Œé‡Œæ›¾ç»try catchæ»¡å¤©é£ï¼Œç°åœ¨è¿˜èƒ½çœ‹åˆ°ä¸å°‘è¿™ç§ä»£ç ï¼Œä½†é€æ¸å¤§å®¶è®¤åŒäº†åœ¨å»æ‰è¿™ç§ä»£ç ã€‚<br><br>å› ä¸ºå¤§éƒ¨åˆ†catchä½å¼‚å¸¸ä»¥ååªæ˜¯æ‰“ä¸ªlogå†é‡æ–°throwï¼Œè¿™ä¸ªäº¤ç»™æ¡†æ¶ä»£ç åœ¨æœ€å¤–å±‚catchä½ä»¥åç»Ÿä¸€å¤„ç†å³å¯ã€‚éæ¡†æ¶ä»£ç æå°‘éœ€è¦å¤„ç†å¼‚å¸¸ã€‚<br><br>goä¸–ç•Œé‡Œï¼Œerr guardæ»¡å¤©é£ï¼Œä½†å¤§éƒ¨åˆ†çš„å¤„ç†ä¹Ÿæ˜¯å±‚å±‚ä¸Šä¼ ã€‚ä½†åšä¸åˆ°ä¸ç”¨ï¼Œå› ä¸ºä¸åƒtryé‚£æ ·å»æ‰catchåä¼šè‡ªåŠ¨å¾€ä¸Šä¼ é€’ï¼Œä¸æ£€æŸ¥errçš„è¯å°±ä¸¢å¤±äº†ï¼Œæ‰€ä»¥è¿™ç§ä»£ç å»ä¸æ‰ã€‚åªèƒ½ç»§ç»­æ»¡å¤©é£ã€‚<br><br>åº•å±‚å®ç°å…¶å®éƒ½æ˜¯setjmpï¼Œä¸»è¦çš„åŒºåˆ«ä¹‹ä¸€æˆ‘è®¤ä¸ºæ˜¯goè®¾è®¡è€…è®¤ä¸ºjavaå¼‚å¸¸çš„æ€§èƒ½ä»£ä»·å¤§ã€‚","like_count":3,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472779,"discussion_content":"Go çš„ error å…¶å®å°±æ˜¯åœ¨ç”¨æ™®é€šçš„æ§åˆ¶æµæ¥å¤„ç†å¼‚å¸¸ã€‚ä½†æ˜¯æ€§èƒ½å´å¯ä»¥æœ‰éå¸¸æ˜æ˜¾çš„æé«˜ã€‚å…¶å®ä¸ç®¡æ€ä¹ˆå¼„éƒ½åšä¸åˆ°â€œç¾Šæ¯›å‡ºåœ¨çŒªèº«ä¸Šâ€ã€‚ä¸ç®¡æ˜¯è®©å¼€å‘è€…è‡ªè¡Œå¤„ç†ï¼Œè¿˜æ˜¯è¿è¡Œæ—¶ç³»ç»Ÿè‡ªå·±æ§åˆ¶ï¼Œéƒ½ä¼šå¯¹ç¨‹åºçš„æµç•…åº¦äº§ç”Ÿå½±å“ã€‚è¿™å°±æ˜¯ç¨‹åºç¨³å®šæ€§å’Œç¨‹åºæµç•…åº¦ï¼ˆåŒ…æ‹¬å¯è¯»æ€§ã€æ§åˆ¶æµå’Œæ€§èƒ½ç­‰ï¼‰ä¹‹é—´çš„trade offã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572494191,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1122574,"avatar":"https://static001.geekbang.org/account/avatar/00/11/21/0e/b2c7469c.jpg","nickname":"ç¿¼æ±Ÿäº­èµ‹","note":"","ucode":"B41C208B19C76C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":42197,"discussion_content":"ä»é”™è¯¯å¤„ç†çš„æ€§èƒ½ä¸Šæ¥è¯´ï¼Œæˆ‘è‡ªå·±ä¸è®¤åŒgoçš„è¿™ä¸ªåšæ³•ï¼Œå¼‚å¸¸è·¯å¾„çš„æ€§èƒ½å æ€»ä½“æ˜¯20ï¼š80ä¹‹ç±»çš„å å¾ˆå°ä¸€éƒ¨åˆ†çš„æ¯”ä¾‹ï¼Œä»£ä»·æ˜¯ä¸‰å››åˆ†ä¹‹ä¸€çš„ä»£ç åœ¨æ£€æŸ¥å’Œä¼ é€’errorã€‚ä»£ç è¶Šå¤šé€šå¸¸bugè¶Šå¤šã€‚æˆ‘çœ‹è§äº›æœ‰çš„ä»£ç é‡Œä¸å°å¿ƒæŠŠif err ï¼=nilå†™åã€‚ç›¸åº”çš„ï¼Œæµ‹è¯•ä»£ç é‡ä¹Ÿå¢åŠ äº†ä¸å°‘ã€‚å¼Šç«¯ä¸å°‘...\n\nå¦‚æœç»Ÿä¸€ç”¨ç±»ä¼¼javaå¼‚å¸¸çš„æ–¹å¼å»å¤„ç†errï¼Œå³æ‹¿åˆ°erråè½¬æ¢æˆpanicï¼Œç„¶ååœ¨ç»Ÿä¸€çš„åœ°æ–¹æ‹¦æˆªä½ï¼Œè¿™æ ·æ˜¯å¦åˆé€‚ï¼Ÿ\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572609407,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1272825,"avatar":"https://static001.geekbang.org/account/avatar/00/13/6b/f9/da3ee7a8.jpg","nickname":"Onyanga","note":"","ucode":"DF4D22F0D51881","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1122574,"avatar":"https://static001.geekbang.org/account/avatar/00/11/21/0e/b2c7469c.jpg","nickname":"ç¿¼æ±Ÿäº­èµ‹","note":"","ucode":"B41C208B19C76C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300067,"discussion_content":"ä½ è¯´çš„æ–¹å¼é’ˆå¯¹çš„æ˜¯panicè¿™ä¸€å¥—ï¼Œè€Œä¸æ˜¯errè¿™ä¸€å¥—ï¼Œè¿™å°±æ˜¯goçš„ä¸¤å¥—é”™è¯¯æœºåˆ¶ã€‚\nå¦‚æœå†…å±‚å…¨éƒ¨ç”¨panicï¼Œåœ¨æœ€ä¸Šå±‚åŠ ä¸€ä¸ªdefer-recoveræ•è·ï¼Œå’Œjavaçš„æ¡†æ¶ç»Ÿä¸€å¤„ç†æ˜¯ç±»ä¼¼çš„ã€‚\nä¸”ï¼Œå¦‚æœä¸­é€”æœ‰æŸä¸€å±‚è°ƒç”¨å…³å¿ƒä¸‹é¢çš„panicä¸ŠæŠ›ï¼Œä¹Ÿå¯ä»¥å†è¡¥å……ä¸€ä¸ªdeferï¼Œç„¶ådeferå†…åœ¨ç»§ç»­panicï¼Œæ•ˆæœå’Œtry-catchä¸€æ ·ã€‚\n\nä¸åŒåœ¨äºï¼Œgoæä¾›äº†è¿™ä¸¤å¥—æ³¾æ¸­åˆ†æ˜çš„æœºåˆ¶ï¼Œä¹Ÿé€¼è¿«å¼€å‘è€…å’Œæ¡†æ¶è®¾è®¡è€…å»æ€è€ƒåˆ°åº•é”™è¯¯æ˜¯ä»€ä¹ˆã€‚\n\nåªæ˜¯å¦‚æœä¸ç”¨panicï¼Œçº¯ç”¨errï¼Œè¿™å°±å°†å†³å®šæƒå¤§å¹…åº¦ç»™äº†å¼€å‘è€…ï¼Œä¹Ÿé€¼è¿«å¼€å‘è€…å»æ€è€ƒè¦ä¸è¦å¤„ç†errï¼Œä¹Ÿå°±é€¼è¿«å»æ€è€ƒå¦‚æœerräº†ï¼Œè¦æ€ä¹ˆåšã€‚è™½ç„¶ä¸‘äº†ç‚¹ï¼Œä½†æ˜¯çº¦æŸæ€§æ›´å¥½ï¼Œè¿™æ˜¯ä¸€ç§å–èˆã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1597927042,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":42197,"ip_address":""},"score":300067,"extra":""}]}]},{"had_liked":false,"id":50477,"user_name":"é¢¨è¯","can_delete":false,"product_type":"c1","uid":1164612,"ip_address":"","ucode":"B35962E0CD6D4F","user_header":"https://static001.geekbang.org/account/avatar/00/11/c5/44/8ff59fc4.jpg","comment_is_top":false,"comment_ctime":1544977436,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"14429879324","product_id":100013101,"comment_content":"å¦‚æœdeferä¸­å¼•å‘panicï¼Œé‚£ä¹ˆåœ¨è¯¥æ®µdeferå‡½æ•°ä¹‹å‰ï¼Œéœ€è¦å¦å¤–ä¸€ä¸ªdeferæ¥æ•è·è¯¥panicï¼Œå¹¶ä¸”ä»£ç ä¸­æœ€åä¸€ä¸ªpanicä¼šè¢«æŠ›å¼ƒï¼Œç”±deferä¸­çš„panicæ¥æˆä¸ºæœ€åçš„å¼‚å¸¸è¿”å›ã€‚","like_count":3},{"had_liked":false,"id":29449,"user_name":"æ¥ç¢—ç»¿è±†æ±¤","can_delete":false,"product_type":"c1","uid":1070051,"ip_address":"","ucode":"B0AB63B8D9729F","user_header":"https://static001.geekbang.org/account/avatar/00/10/53/e3/39dcfb11.jpg","comment_is_top":false,"comment_ctime":1538377238,"is_pvip":false,"replies":[{"id":"10643","content":"å¯¹çš„ã€‚ä¸è¿‡è¿˜æ˜¯æœ‰ä¸å°‘ä¸ä¸€æ ·çš„åœ°æ–¹çš„ï¼Œå¯ä»¥ä½“ä¼šä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1538451577,"ip_address":"","comment_id":29449,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14423279126","product_id":100013101,"comment_content":"å¯ä»¥ defer æœ‰ç‚¹ç±»ä¼¼javaä¸­çš„finalè¯­å¥ï¼Œé‡Œé¢è¿˜å¯ä»¥æŠ›å‡ºå¼‚å¸¸ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œæˆ‘ä»¬æ•è·panicä¹‹åï¼Œå¯ä»¥å¯¹èµ·å†…å®¹è¿›è¡ŒæŸ¥çœ‹ï¼Œå¦‚æœä¸æ˜¯æˆ‘ä»¬å…³æ³¨çš„panicé‚£ä¹ˆå¯ä»¥ç»§ç»­æŠ›å‡ºå»","like_count":3,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425612,"discussion_content":"å¯¹çš„ã€‚ä¸è¿‡è¿˜æ˜¯æœ‰ä¸å°‘ä¸ä¸€æ ·çš„åœ°æ–¹çš„ï¼Œå¯ä»¥ä½“ä¼šä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538451577,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":271334,"user_name":"Zz~","can_delete":false,"product_type":"c1","uid":1219199,"ip_address":"","ucode":"7E530804E6C144","user_header":"https://static001.geekbang.org/account/avatar/00/12/9a/7f/781f89ab.jpg","comment_is_top":false,"comment_ctime":1609565936,"is_pvip":true,"replies":[{"id":"98367","content":"æŸä¸ªgoroutineä¸­çš„panicæ˜¯ä¸å¯èƒ½ç”±åˆ«çš„goroutineä¸­çš„recoveræ¢å¤çš„ã€‚æˆ–è€…è¯´ï¼Œä¸€ä¸ªgoroutineä¸­çš„panicåªèƒ½ç”±è‡ªå·±ä¾‹ç¨‹ä¸­çš„recoveræ¢å¤ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1609581763,"ip_address":"","comment_id":271334,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10199500528","product_id":100013101,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œæˆ‘æƒ³é—®ä¸€ä¸‹ï¼Œå¦‚æœåœ¨mainå‡½æ•°é‡Œè°ƒç”¨ä¸€ä¸ªæˆ‘è‡ªå®šä¹‰çš„panicæ–¹æ³•ï¼Œrecoverå¯ä»¥æ¢å¤ï¼›ä½†æ˜¯å¦‚æœæˆ‘å°†è‡ªå®šä¹‰çš„panicæ–¹æ³•æ”¹ä¸ºgo mypanicè¿™æ ·ï¼Œrecoverå°±ä¸èƒ½æ¢å¤ã€‚è¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿä¸‹é¢æ˜¯æˆ‘å®éªŒçš„ä»£ç <br><br><br>==============å¯ä»¥æ¢å¤çš„==============<br>package main<br><br>import (<br>\t&quot;errors&quot;<br>\t&quot;fmt&quot;<br>)<br><br>func myRecover() {<br>\tif err := recover(); err != nil {<br>\t\tfmt.Printf(&quot;panic is %s&quot;, err)<br>\t}<br>}<br><br>func myPanic() {<br>\tpanic(errors.New(&quot;è‡ªå®šä¹‰å¼‚å¸¸&quot;))<br>}<br><br>func main() {<br>\tdefer myRecover()<br>\tmyPanic()<br>}<br><br><br>=================ä¸å¯ä»¥æ¢å¤çš„==============<br>package main<br><br>import (<br>\t&quot;errors&quot;<br>\t&quot;fmt&quot;<br>\t&quot;time&quot;<br>)<br><br>func myRecover() {<br>\tif err := recover(); err != nil {<br>\t\tfmt.Printf(&quot;panic is %s&quot;, err)<br>\t}<br>}<br><br>func myPanic() {<br>\tpanic(errors.New(&quot;è‡ªå®šä¹‰å¼‚å¸¸&quot;))<br>}<br><br>func main() {<br>\tdefer myRecover()<br>\tgo myPanic()<br>\ttime.Sleep(time.Second * 5)<br>}<br>","like_count":2,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512904,"discussion_content":"æŸä¸ªgoroutineä¸­çš„panicæ˜¯ä¸å¯èƒ½ç”±åˆ«çš„goroutineä¸­çš„recoveræ¢å¤çš„ã€‚æˆ–è€…è¯´ï¼Œä¸€ä¸ªgoroutineä¸­çš„panicåªèƒ½ç”±è‡ªå·±ä¾‹ç¨‹ä¸­çš„recoveræ¢å¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609581763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1219199,"avatar":"https://static001.geekbang.org/account/avatar/00/12/9a/7f/781f89ab.jpg","nickname":"Zz~","note":"","ucode":"7E530804E6C144","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339302,"discussion_content":"å¥½çš„ï¼Œè°¢è°¢è€å¸ˆå›å¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609596567,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":94314,"user_name":"honnkyou","can_delete":false,"product_type":"c1","uid":1026608,"ip_address":"","ucode":"FD5EC4120EE803","user_header":"https://static001.geekbang.org/account/avatar/00/0f/aa/30/acc91f01.jpg","comment_is_top":false,"comment_ctime":1557765259,"is_pvip":false,"replies":[{"id":"33728","content":"defer å‡½æ•°çš„æ‰§è¡Œæ—¶åˆ»æ˜¯åœ¨ç›´æ¥åŒ…å«å®ƒçš„é‚£ä¸ªå‡½æ•°å³å°†æ‰§è¡Œå®Œæ¯•çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºä¸‹ä¸€åˆ»å°±è¦è¿”å›ç»“æœå€¼ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰çš„æ—¶å€™ã€‚å¯¹äº main å‡½æ•°ç›´æ¥åŒ…å«çš„ defer å‡½æ•°æ¥è¯´ï¼Œä¹Ÿæ˜¯å¦‚æ­¤ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1557802426,"ip_address":"","comment_id":94314,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10147699851","product_id":100013101,"comment_content":"ã€Œå»¶è¿Ÿåˆ°ä»€ä¹ˆæ—¶å€™å‘¢ï¼Ÿè¿™è¦å»¶è¿Ÿåˆ°è¯¥è¯­å¥æ‰€åœ¨çš„å‡½æ•°å³å°†æ‰§è¡Œç»“æŸçš„é‚£ä¸€åˆ»ï¼Œæ— è®ºç»“æŸæ‰§è¡Œçš„åŸå› æ˜¯ä»€ä¹ˆã€‚ã€<br>ä»¥è¯¥èŠ‚è¯¾ä¸­ä»£ç ä¸ºä¾‹çš„è¯æ˜¯è¦åƒåˆ°mainå‡½æ•°å¿«ç»“æŸæ—¶æ‰§è¡Œæ˜¯å—ï¼Ÿæ‰§è¡Œdeferå‡½æ•°ã€‚","like_count":2,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450014,"discussion_content":"defer å‡½æ•°çš„æ‰§è¡Œæ—¶åˆ»æ˜¯åœ¨ç›´æ¥åŒ…å«å®ƒçš„é‚£ä¸ªå‡½æ•°å³å°†æ‰§è¡Œå®Œæ¯•çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºä¸‹ä¸€åˆ»å°±è¦è¿”å›ç»“æœå€¼ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰çš„æ—¶å€™ã€‚å¯¹äº main å‡½æ•°ç›´æ¥åŒ…å«çš„ defer å‡½æ•°æ¥è¯´ï¼Œä¹Ÿæ˜¯å¦‚æ­¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557802426,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1489177,"avatar":"https://static001.geekbang.org/account/avatar/00/16/b9/19/f4ef2c9a.jpg","nickname":"ç§¦ç©†ä¹‹","note":"","ucode":"709C49BFCBB776","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327263,"discussion_content":"å…·ä½“å¯ä»¥åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ å†™ä¸€ä¸ªåŒ¿åå‡½æ•°å®ç°ä¸‹ï¼Œå¾ˆå®¹æ˜“å°±ç†è§£äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605778067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":42025,"user_name":"Bang","can_delete":false,"product_type":"c1","uid":1160079,"ip_address":"","ucode":"0CB8A52B177868","user_header":"https://static001.geekbang.org/account/avatar/00/11/b3/8f/4caf7f03.jpg","comment_is_top":false,"comment_ctime":1542893904,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10132828496","product_id":100013101,"comment_content":"è¯·é—®ä¸‹ï¼ŒæŒ‰æ‚¨ä¸Šé¢è¯´çš„ï¼Œä¸€ä¸ªrecoveråªèƒ½æ¢å¤æ‰€åœ¨çš„é‚£ä¸ªå‡½æ•°ã€‚é‚£å¦‚æœä¸€ä¸ª å‡½æ•°ä¸­æœ‰ä¸€ä¸ªgoroutineå‡½æ•°  è€Œè¿™ä¸ªgoroutineå‡½æ•°è§¦å‘äº†panicï¼Œé‚£æ˜¯åªæœ‰ä»–è‡ªå·±å¯ä»¥recoveræ˜¯å—ï¼Œä»–çš„ä¸Šçº§æ˜¯æ— æ³•recoverå†…éƒ¨çš„goroutineçš„paincæ˜¯è¿™æ ·å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1489177,"avatar":"https://static001.geekbang.org/account/avatar/00/16/b9/19/f4ef2c9a.jpg","nickname":"ç§¦ç©†ä¹‹","note":"","ucode":"709C49BFCBB776","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327266,"discussion_content":"æ˜¯çš„ï¼Œå¦‚æœä»–çš„ä¸Šçº§æ— è®ºæœ‰æ²¡æœ‰recover éƒ½ä¼španicçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605778475,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":29395,"user_name":"æœ‰åŒªå›å­","can_delete":false,"product_type":"c1","uid":1204061,"ip_address":"","ucode":"72B91AFC96E285","user_header":"https://static001.geekbang.org/account/avatar/00/12/5f/5d/63010e32.jpg","comment_is_top":false,"comment_ctime":1538362576,"is_pvip":false,"replies":[{"id":"10650","content":"åªè¦æ˜¯å‡½æ•°å°±éƒ½å¯ä»¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1538452869,"ip_address":"","comment_id":29395,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10128297168","product_id":100013101,"comment_content":"è¿™ä¸ªé—®é¢˜å°±å¼•å‘äº†å¦ä¸€ä¸ªé—®é¢˜ã€‚deferå¯ä»¥åœ¨åŒä¸€ä¸ªå‡½æ•°ä¸­åµŒå¥—ä½¿ç”¨å—ï¼Ÿæ„Ÿè§‰è¿™ä¸¤ä¸ªé—®é¢˜ç­”æ¡ˆåº”è¯¥ä¸€è‡´","like_count":2,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425579,"discussion_content":"åªè¦æ˜¯å‡½æ•°å°±éƒ½å¯ä»¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538452869,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":195627,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1585206871,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5880174167","product_id":100013101,"comment_content":"ä»Šæ—¥æ€»ç»“ <br>æœ¬ç« ä¸»è¦æ˜¯è®²äº†panicå’Œrecoverä»¥åŠdefer<br>panicä¸»è¦æ˜¯ç”¨æ¥æŠ›å‡ºææ…Œ<br>è€Œrecoverä¸»è¦ç”¨æ¥æ¢å¤ææ…Œï¼Œä½†æ˜¯recoverä½¿ç”¨å³æ¢å¤ å¦‚æœåœ¨æ­¤æ—¶æ²¡æœ‰ææ…Œäº§ç”Ÿå°±ä¼šè¿”å›ä¸€ä¸ªnil<br>ä¹Ÿæ­£æ˜¯å› ä¸ºrecoverä½¿ç”¨å³æ¢å¤çš„ç‰¹æ€§ æ‰€ä»¥è¦æŠŠrecoveræ‰§è¡Œåœ¨äº§ç”Ÿææ…Œä¹‹åï¼Œä½†æ˜¯panicä¹‹åçš„ä»£ç ä¸ä¼šå†æ‰§è¡Œæ‰€ä»¥å¼•å…¥deferè¡¨è¾¾å¼<br>deferè¡¨è¾¾å¼ ä¸»è¦æ˜¯ç”¨æ¥ä»£ç å»¶è¿Ÿæ‰§è¡Œ å»¶è¿Ÿåˆ°å‡½æ•°ç»“æŸï¼Œæ‰€ä»¥ä¸€èˆ¬æŠŠrecoverè·Ÿdeferæ­é… <br>deferçš„æ‰§è¡Œ æ²¡æ‰§è¡Œä¸€æ¬¡deferè¯­å¥äº§ç”Ÿä¸€ä¸ªdeferå‡½æ•° å¹¶ä¸”å°†å…¶æ”¾å…¥ä¸€ä¸ªé¢å¤–çš„æ ˆä¸­ æ‰€ä»¥æ˜¯ä¸ªå…ˆå…¥åå‡ºçš„é¡ºåº!æ‰€ä»¥defer å‡½æ•°çš„æ‰§è¡Œé¡ºåºä¸å…¶å£°æ˜é¡ºåºå®Œå…¨ç›¸å<br>å…³äºæ€è€ƒé¢˜:<br>æˆ‘è§‰å¾—ä»ç†è®ºä¸Šæ¥è¯´ æˆ‘ä»¬æ²¡å¿…è¦å®Œå…¨äººä¸ºçš„å¼•èµ·panic ä½†æ˜¯å¦‚æœæ˜¯ä¸å°å¿ƒå¼•èµ·çš„panicé‚£ä¹Ÿæ— æ³•é¿å…,åŒæ—¶é€šè¿‡æµ‹è¯•ä¹Ÿæ˜¯å¯ä»¥å¼•å‘panicçš„","like_count":1},{"had_liked":false,"id":187029,"user_name":"å¼ sir","can_delete":false,"product_type":"c1","uid":1209431,"ip_address":"","ucode":"52958DF6705208","user_header":"https://static001.geekbang.org/account/avatar/00/12/74/57/7b828263.jpg","comment_is_top":false,"comment_ctime":1583995393,"is_pvip":false,"replies":[{"id":"72157","content":"å‚æ•°å€¼flagæ˜¯2ï¼Œå› ä¸ºGoä¼šåœ¨å‹æ ˆå‰å…ˆæ±‚å‡ºç»™äºˆdeferå‡½æ•°çš„é‚£äº›å‚æ•°å€¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1584006811,"ip_address":"","comment_id":187029,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5878962689","product_id":100013101,"comment_content":"æ‚¨å¥½ï¼Œè¯·é—®deferå‡½æ•°å‹ğ£¾çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆæŠŠå½“æ—¶çš„å…¥å‚ä¹Ÿæ”¾å…¥ğ£¾ä¸­å‘¢<br>```<br>func test() {<br>\tvar a, b = 1, 1<br>\tdefer func(flag int) {<br>\t\tfmt.Println(flag)<br>\t}(a + b)<br><br>\ta = 2<br>\tb = 2<br><br>}<br><br>```<br><br>è¿™ä¸ªè¾“å‡ºçš„ï¼’ä¸æ˜¯ï¼”çš„ç†è®ºè®ºæ®æ˜¯ä»€ä¹ˆå‘¢","like_count":1,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486966,"discussion_content":"å‚æ•°å€¼flagæ˜¯2ï¼Œå› ä¸ºGoä¼šåœ¨å‹æ ˆå‰å…ˆæ±‚å‡ºç»™äºˆdeferå‡½æ•°çš„é‚£äº›å‚æ•°å€¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584006811,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184637,"user_name":"Pana","can_delete":false,"product_type":"c1","uid":1016571,"ip_address":"","ucode":"6E016D4966B187","user_header":"https://static001.geekbang.org/account/avatar/00/0f/82/fb/9d232a7a.jpg","comment_is_top":false,"comment_ctime":1583375749,"is_pvip":false,"replies":[{"id":"71495","content":"å¯ä»¥ï¼Œå‡½æ•°éœ€è¦æœ‰ä¸€ä¸ªæœ‰åç§°çš„errorç±»å‹çš„ç»“æœï¼Œç„¶ååœ¨è¯¥å‡½æ•°å†…recoverä¹‹åä¸ºè¿™ä¸ªç»“æœèµ‹å€¼ã€‚è¿™æ ·å°±å¯ä»¥äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1583471590,"ip_address":"","comment_id":184637,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5878343045","product_id":100013101,"comment_content":"åœ¨defer ä¸­ recover äº†panic ï¼Œæ˜¯å¦è¿˜èƒ½è®©å‡½æ•°è¿”å›é”™è¯¯å‘¢","like_count":1,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486074,"discussion_content":"å¯ä»¥ï¼Œå‡½æ•°éœ€è¦æœ‰ä¸€ä¸ªæœ‰åç§°çš„errorç±»å‹çš„ç»“æœï¼Œç„¶ååœ¨è¯¥å‡½æ•°å†…recoverä¹‹åä¸ºè¿™ä¸ªç»“æœèµ‹å€¼ã€‚è¿™æ ·å°±å¯ä»¥äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583471590,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":42024,"user_name":"Bang","can_delete":false,"product_type":"c1","uid":1160079,"ip_address":"","ucode":"0CB8A52B177868","user_header":"https://static001.geekbang.org/account/avatar/00/11/b3/8f/4caf7f03.jpg","comment_is_top":false,"comment_ctime":1542893903,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5837861199","product_id":100013101,"comment_content":"è¯·é—®ä¸‹ï¼ŒæŒ‰æ‚¨ä¸Šé¢è¯´çš„ï¼Œä¸€ä¸ªrecoveråªèƒ½æ¢å¤æ‰€åœ¨çš„é‚£ä¸ªå‡½æ•°ã€‚é‚£å¦‚æœä¸€ä¸ª å‡½æ•°ä¸­æœ‰ä¸€ä¸ªgoroutineå‡½æ•°  è€Œè¿™ä¸ªgoroutineå‡½æ•°è§¦å‘äº†panicï¼Œé‚£æ˜¯åªæœ‰ä»–è‡ªå·±å¯ä»¥recoveræ˜¯å—ï¼Œä»–çš„ä¸Šçº§æ˜¯æ— æ³•recoverå†…éƒ¨çš„goroutineçš„paincæ˜¯è¿™æ ·å—ï¼Ÿ","like_count":1},{"had_liked":false,"id":34856,"user_name":"ç‹¬è‡ªé€›è¡","can_delete":false,"product_type":"c1","uid":1184211,"ip_address":"","ucode":"7A3E2840191C3C","user_header":"https://static001.geekbang.org/account/avatar/00/12/11/d3/dd499428.jpg","comment_is_top":false,"comment_ctime":1540341514,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5835308810","product_id":100013101,"comment_content":"defer func(){.....1}()<br>defer func(){.....2}()<br>defer func(){.....3}()<br>panic(&quot;4&quot;)<br>æˆ‘åœ¨golandé‡Œé¢åˆ†åˆ«é€‰æ‹© gc å’Œ gccgoç¼–è¯‘<br>å‘ç°æ‰§è¡Œçš„é¡ºåºä¸åŒ  ä¸€ä¸ªæ˜¯3421ä¸€ä¸ªæ˜¯ 3214","like_count":1},{"had_liked":false,"id":29556,"user_name":"å†°æ¿€å‡Œçš„çœ¼æ³ª","can_delete":false,"product_type":"c1","uid":1087945,"ip_address":"","ucode":"5DCB974667E93A","user_header":"https://static001.geekbang.org/account/avatar/00/10/99/c9/a7c77746.jpg","comment_is_top":false,"comment_ctime":1538438948,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5833406244","product_id":100013101,"comment_content":"å¯ä»¥ä½¿ç”¨panicå‡½æ•°ä¸»åŠ¨è§¦å‘panicï¼Œå‚æ•°å»ºè®®ä¼ é€’errorï¼ˆå®é™…ä¸Šå¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼‰<br>å¯ä»¥ä½¿ç”¨recoveræ•è·panicï¼Œå¦‚æœå½“å‰æ²¡æœ‰å‘ç”Ÿpanicï¼Œåˆ™è¿”å›nilï¼Œå¦‚æœæœ‰åˆ™è¿”å›panicå‰¯æœ¬<br>deferè¯­å¥æœ‰å»¶åæ‰§è¡Œè°ƒç”¨è¡¨è¾¾å¼ï¼ˆæ¨èæ˜¯ä¸ªå‡½æ•°ï¼‰çš„ä½œç”¨ï¼Œè¿™é‡Œçš„å»¶åæŒ‡çš„æ˜¯deferè¯­å¥çš„è°ƒç”¨å‡½æ•°å³å°†é€€å‡ºçš„é‚£ä¸€åˆ»<br>deferè¯­å¥çš„å»¶åè°ƒç”¨æ˜¯å…ˆè¿›åå‡ºï¼ˆFILOï¼‰çš„ï¼ŒC++çš„ææ„ä¹Ÿæ˜¯è¿™æ ·çš„","like_count":1},{"had_liked":false,"id":359657,"user_name":"å¤§é›„","can_delete":false,"product_type":"c1","uid":2978983,"ip_address":"åŒ—äº¬","ucode":"1639C6DAFB5E25","user_header":"https://static001.geekbang.org/account/avatar/00/2d/74/a7/e609ca59.jpg","comment_is_top":false,"comment_ctime":1665732461,"is_pvip":true,"replies":[{"id":"130837","content":"åŸºæœ¬æ­£ç¡®ï¼Œpanicä»£è¡¨ä»¥å¤–é”™è¯¯ã€‚å…¶å®ä¹Ÿå¯ä»¥ç”¨äºç»ˆæ­¢ç¨‹åºï¼Œæ¯”å¦‚ï¼šå½“å‡ºç°æŸç§éå¸¸ä¸¥é‡çš„ã€å¾ˆéš¾æ¢å¤çš„é”™è¯¯ï¼ˆç¨‹åºçš„ç»ˆæ­¢åœ¨ç¨‹åºå¼€å‘æˆ–ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ä¹Ÿç®—æ˜¯ä¸€ç§è­¦ç¤ºâš ï¸ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026643","ctime":1665747202,"ip_address":"åŒ—äº¬","comment_id":359657,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1665732461","product_id":100013101,"comment_content":"æ˜¯å¦å¯ä»¥ç†è§£ï¼Œæˆ‘ä»¬ä¸€èˆ¬è‡ªå·±è¿”å›çš„erroréƒ½æ˜¯å¯ä»¥é¢„è§çš„ä¸šåŠ¡å¼‚å¸¸ï¼ˆä¾‹å¦‚ï¼šæ‰‹æœºå·ç æ ¼å¼ä¸æ­£ç¡®ç­‰ï¼‰ï¼Œå¯ä»¥çµæ´»åˆ¤æ–­ã€‚<br>panicåˆ™æ˜¯æ„æ–™å¤–çš„ï¼Œä½†ä¸éœ€è¦ç»ˆæ­¢è¿›ç¨‹ï¼Œæ‰€ä»¥éœ€è¦è¦recoveræ¢å¤","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590449,"discussion_content":"åŸºæœ¬æ­£ç¡®ï¼Œpanicä»£è¡¨ä»¥å¤–é”™è¯¯ã€‚å…¶å®ä¹Ÿå¯ä»¥ç”¨äºç»ˆæ­¢ç¨‹åºï¼Œæ¯”å¦‚ï¼šå½“å‡ºç°æŸç§éå¸¸ä¸¥é‡çš„ã€å¾ˆéš¾æ¢å¤çš„é”™è¯¯ï¼ˆç¨‹åºçš„ç»ˆæ­¢åœ¨ç¨‹åºå¼€å‘æˆ–ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ä¹Ÿç®—æ˜¯ä¸€ç§è­¦ç¤ºâš ï¸ï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665747202,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351453,"user_name":"fire","can_delete":false,"product_type":"c1","uid":2028585,"ip_address":"","ucode":"2B5F571516CD11","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f4/29/20880430.jpg","comment_is_top":false,"comment_ctime":1657802467,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1657802467","product_id":100013101,"comment_content":"deferå‡½æ•°ä¸­å¯ä»¥è°ƒåŠ¨panicå‡½æ•°ï¼Œä½†æ˜¯éœ€è¦åœ¨æ­¤deferå‡½æ•°ä¹‹å‰å†å†™ä¸€ä¸ªdefer recoverå‡½æ•°æ¢å¤","like_count":0},{"had_liked":false,"id":326469,"user_name":"jxs1211","can_delete":false,"product_type":"c1","uid":1101006,"ip_address":"","ucode":"B7F1F2D84389E7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKELX1Rd1vmLRWibHib8P95NA87F4zcj8GrHKYQL2RcLDVnxNy1ia2geTWgW6L2pWn2kazrPNZMRVrIg/132","comment_is_top":false,"comment_ctime":1639536406,"is_pvip":false,"replies":[{"id":"118614","content":"try-catchè¯­å¥è¦æ˜¯æŠ›å‡ºå¼‚å¸¸äº†ï¼Œtryå­å¥é‡Œçš„å‰©ä½™ä»£ç ä¹Ÿæ— æ³•å†æ¥ç€è¿è¡Œäº†å•Šï¼Œåªèƒ½é€šè¿‡æŸç§æ–¹å¼å†æ•´ä½“é‡è¯•ã€‚Goçš„panicæœºåˆ¶ä¹Ÿæ˜¯è¿™æ ·çš„ã€‚ä»è¿™ä¸ªå±‚é¢è®²ï¼Œä¸¤è€…æ²¡æœ‰æœ¬è´¨åŒºåˆ«ã€‚åªä¸è¿‡ï¼Œtry-catchè¯­å¥çš„é‡è¯•æ˜¯ä»¥try-catchè¯­å¥ä¸ºå•ä½çš„ï¼Œpanic-recoveræœºåˆ¶æ˜¯ä»¥å‡½æ•°ä¸ºå•ä½çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":"1026643","ctime":1639567956,"ip_address":"","comment_id":326469,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1639536406","product_id":100013101,"comment_content":"å¦‚æœ\ts5 := s1[5]å¼•å‘panicï¼Œå¯ä»¥åœ¨å‡½æ•°é€€å‡ºå‰é€šè¿‡deferè¯­å¥ä¸­recoveræ•è·å¹¶å¤„ç†ï¼Œå“ªæ˜¯å¦æœ‰åŠæ³•è®©å‡½æ•°ç»§ç»­æ‰§è¡Œå®Œå¼•å‘panicæ—¶åé¢å“ªäº›ä»£ç ï¼Œåƒå…¶ä»–è¯­è¨€ç”¨try catchä¸€æ ·ï¼Œèƒ½ç»§ç»­å‘ä¸‹æ‰§è¡Œå®Œæ•´ä¸ªå‡½æ•°çš„ä»£ç ï¼Œè¿˜æ˜¯è¯´goçš„è®¾è®¡å¹¶ä¸æ˜¯å¦‚æ­¤ï¼Œä¸€å®šè¦åœ¨å¼•å‘å¼‚å¸¸å¤„ç«‹å³è¿”å›<br>func caller2() (err error) {<br>\tdefer func() {<br>\t\tp := recover()<br>\t\tif p != nil {<br>\t\t\terr = fmt.Errorf(&quot;error: %s\\n&quot;, p)<br>\t\t}<br>\t}()<br>\tfmt.Println(&quot;Enter function caller2.&quot;)<br>\ts1 := []int{1, 2, 3, 4, 5}<br>\ts5 := s1[5]<br>\t_ = s5<br>\tfmt.Println(&quot;Exit function caller2.&quot;)<br>\treturn err<br>}","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538974,"discussion_content":"try-catchè¯­å¥è¦æ˜¯æŠ›å‡ºå¼‚å¸¸äº†ï¼Œtryå­å¥é‡Œçš„å‰©ä½™ä»£ç ä¹Ÿæ— æ³•å†æ¥ç€è¿è¡Œäº†å•Šï¼Œåªèƒ½é€šè¿‡æŸç§æ–¹å¼å†æ•´ä½“é‡è¯•ã€‚Goçš„panicæœºåˆ¶ä¹Ÿæ˜¯è¿™æ ·çš„ã€‚ä»è¿™ä¸ªå±‚é¢è®²ï¼Œä¸¤è€…æ²¡æœ‰æœ¬è´¨åŒºåˆ«ã€‚åªä¸è¿‡ï¼Œtry-catchè¯­å¥çš„é‡è¯•æ˜¯ä»¥try-catchè¯­å¥ä¸ºå•ä½çš„ï¼Œpanic-recoveræœºåˆ¶æ˜¯ä»¥å‡½æ•°ä¸ºå•ä½çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639567956,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1101006,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKELX1Rd1vmLRWibHib8P95NA87F4zcj8GrHKYQL2RcLDVnxNy1ia2geTWgW6L2pWn2kazrPNZMRVrIg/132","nickname":"jxs1211","note":"","ucode":"B7F1F2D84389E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":539279,"discussion_content":"ä¹Ÿå°±æ˜¯è¯´ä¸€æ—¦panicåé¢çš„ä»£ç å°±è‚¯å®šä¸ä¼šæ‰§è¡Œï¼Œä¼šç«‹å³é€€å‡ºè¯¥å‡½æ•°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639656458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":538974,"ip_address":""},"score":539279,"extra":""}]}]},{"had_liked":false,"id":320237,"user_name":"çˆ±å­¦ä¹ çš„å¥½å­©å­","can_delete":false,"product_type":"c1","uid":1331195,"ip_address":"","ucode":"C51EA3E529BE0B","user_header":"https://static001.geekbang.org/account/avatar/00/14/4f/fb/3eb917f1.jpg","comment_is_top":false,"comment_ctime":1636167587,"is_pvip":false,"replies":[{"id":"116139","content":"deferè¯­å¥æ˜¯ç´§æ¥åœ¨deferå…³é”®å­—åé¢ï¼ˆæˆ–è€…è¯´åœ¨å®ƒå³è¾¹ï¼‰çš„é‚£ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªè·Ÿgoå‡½æ•°çš„å‘½åæ–¹å¼æ˜¯ä¸€æ ·çš„ã€‚<br><br>deferè¯­å¥å°±æ˜¯â€œdeferå…³é”®å­—+deferå‡½æ•°â€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1636274084,"ip_address":"","comment_id":320237,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1636167587","product_id":100013101,"comment_content":"çœ‹ä¸æ‡‚ï¼Œdeferå‡½æ•°å’Œdeferè¯­å¥æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529924,"discussion_content":"deferè¯­å¥æ˜¯ç´§æ¥åœ¨deferå…³é”®å­—åé¢ï¼ˆæˆ–è€…è¯´åœ¨å®ƒå³è¾¹ï¼‰çš„é‚£ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªè·Ÿgoå‡½æ•°çš„å‘½åæ–¹å¼æ˜¯ä¸€æ ·çš„ã€‚\n\ndeferè¯­å¥å°±æ˜¯â€œdeferå…³é”®å­—+deferå‡½æ•°â€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636274084,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":306839,"user_name":"Harlan","can_delete":false,"product_type":"c1","uid":2134882,"ip_address":"","ucode":"F43595A0A00B19","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erpYZalYvFGcBs7zZvYwaQAZwTLiaw0mycJ4PdYpP3VxAYkAtyIRHhjSOrOK0yESaPpgEbVQUwf6LA/132","comment_is_top":false,"comment_ctime":1628740621,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628740621","product_id":100013101,"comment_content":"goé‡Œ å¼€å‘è€…å¿…ç²—å…³æ³¨å¼‚å¸¸  ç¨æœ‰ä¸æ… å°±panic  è¿™ç§æœºåˆ¶æ„Ÿè§‰å¸¦æ¥äº†å¤§é‡é‡å¤å·¥ä½œ  å¼‚å¸¸å¤„ç†å’Œç¨‹åºæ— æ³•åˆ†å¼€","like_count":0},{"had_liked":false,"id":296424,"user_name":"ç½—å³°","can_delete":false,"product_type":"c1","uid":1218501,"ip_address":"","ucode":"5F3D6AF8F28322","user_header":"https://static001.geekbang.org/account/avatar/00/12/97/c5/84491beb.jpg","comment_is_top":false,"comment_ctime":1622968740,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622968740","product_id":100013101,"comment_content":"è®°å½•ä¸‹ï¼Œdeferå‡½æ•°åƒä¸€ä¸ªé—­åŒ…ï¼Œå¯ä»¥æ•è·è‡ªç”±äº§é‡ã€‚recoveråªèƒ½æ•è·æ‰€å¤„çš„goroutineæ‰€åœ¨å‡½æ•°æˆ–è€…å‡½æ•°é‡Œè°ƒç”¨çš„å‡½æ•°ä¼ ä¸Šçš„å¼‚å¸¸ä¿¡æ¯ã€‚","like_count":0},{"had_liked":false,"id":284257,"user_name":"tuxknight","can_delete":false,"product_type":"c1","uid":1000882,"ip_address":"","ucode":"B78FE23CB2641B","user_header":"","comment_is_top":false,"comment_ctime":1616142711,"is_pvip":false,"replies":[{"id":"103179","content":"è¿™ä¸ªåšä¸åˆ°ï¼Œå¦‚æœå‡ºç°è¿™ç§æƒ…å†µå°±éœ€è¦è€ƒé‡è®¾è®¡æ–¹é¢çš„é—®é¢˜äº†ï¼Œå¯ä»¥æŠŠå‡½æ•°åˆ‡åˆ†çš„æ›´ç»†ä¸€äº›ï¼Œä»è€Œé¿å…å¯èƒ½å‡ºç° panic çš„æƒ…å†µè¿‡å¤šã€‚<br><br>å¦å¤–ï¼Œä½ å¯ä»¥å…ˆ recoverï¼Œç„¶ååœ¨æ ¹æ®å…·ä½“çš„ panic åˆ†åˆ«å¯¹å¾…ï¼Œæ¯”å¦‚é‡æ–°æŠ›å‡º panic æˆ–è€…è½¬åŒ–ä¸º errorã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1616301732,"ip_address":"","comment_id":284257,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1616142711","product_id":100013101,"comment_content":"å‡å¦‚ä¸€ä¸ªå‡½æ•°é‡Œé¢ä¼šæœ‰å¤šä¸ª panicï¼Œæ€ä¹ˆèƒ½å¤Ÿåªå¯¹æŸäº› panic è¿›è¡Œ recover å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517287,"discussion_content":"è¿™ä¸ªåšä¸åˆ°ï¼Œå¦‚æœå‡ºç°è¿™ç§æƒ…å†µå°±éœ€è¦è€ƒé‡è®¾è®¡æ–¹é¢çš„é—®é¢˜äº†ï¼Œå¯ä»¥æŠŠå‡½æ•°åˆ‡åˆ†çš„æ›´ç»†ä¸€äº›ï¼Œä»è€Œé¿å…å¯èƒ½å‡ºç° panic çš„æƒ…å†µè¿‡å¤šã€‚\n\nå¦å¤–ï¼Œä½ å¯ä»¥å…ˆ recoverï¼Œç„¶ååœ¨æ ¹æ®å…·ä½“çš„ panic åˆ†åˆ«å¯¹å¾…ï¼Œæ¯”å¦‚é‡æ–°æŠ›å‡º panic æˆ–è€…è½¬åŒ–ä¸º errorã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616301732,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224643,"user_name":"Tianz","can_delete":false,"product_type":"c1","uid":1248212,"ip_address":"","ucode":"4B6542604B8B6F","user_header":"https://static001.geekbang.org/account/avatar/00/13/0b/d4/39763233.jpg","comment_is_top":false,"comment_ctime":1591495729,"is_pvip":false,"replies":[{"id":"82772","content":"åªè¦æ²¡ç¢°ä¸Šdefer &amp; recoverï¼Œpanic å°±ä¼šä¸€ç›´ä¼ æ’­å‡ºå»å¹¶å¯¼è‡´ç¨‹åºç»ˆæ­¢ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1591589513,"ip_address":"","comment_id":224643,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591495729","product_id":100013101,"comment_content":"çš®å‹ä»¬ï¼Œæ‰€æœ‰åœ¨ runtime æ—¶å¯¼è‡´ç¨‹åºç»ˆæ­¢ï¼ˆé™¤äº†å“åº”å¤–éƒ¨ç»ˆæ­¢ä¿¡å·ï¼‰ï¼Œéƒ½æ˜¯ panic å—ï¼Ÿè¿˜çœŸæ˜¯æœ‰å·²ç»æ­£ç¡®æ·»åŠ äº† defer &amp; recover æœºåˆ¶ä½†ç¨‹åºè¿˜æ˜¯è¢«ç»ˆæ­¢äº†ï¼Œæ‰€æœ‰åƒéƒå¤§ä¸Šä¸€ç¯‡å›ç­”è¯´çš„æœ‰äº› panic æ˜¯ä¸å¯æ¢å¤çš„ï¼Œè›‹æ˜¯éƒ½æœ‰å“ªäº›å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497552,"discussion_content":"åªè¦æ²¡ç¢°ä¸Šdefer &amp;amp; recoverï¼Œpanic å°±ä¼šä¸€ç›´ä¼ æ’­å‡ºå»å¹¶å¯¼è‡´ç¨‹åºç»ˆæ­¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591589513,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221659,"user_name":"LUO JINGYUAN","can_delete":false,"product_type":"c1","uid":1984817,"ip_address":"","ucode":"6403B6D6B6ECB5","user_header":"https://static001.geekbang.org/account/avatar/00/1e/49/31/6d5728ac.jpg","comment_is_top":false,"comment_ctime":1590560597,"is_pvip":false,"replies":[{"id":"81806","content":"è¿™é‡Œç¡®å®æ˜¯ç”¨è¯ä¸å½“ï¼Œåº”è¯¥å«â€œé“¾è¡¨â€ã€‚æˆ‘å·²ç»è®©ç¼–è¾‘ä¿®æ­£äº†ã€‚ä½ å¾ˆä»”ç»†å•Šï¼è°¢è°¢ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1590639318,"ip_address":"","comment_id":221659,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1590560597","product_id":100013101,"comment_content":"æƒ³é—®ä¸€ä¸‹è€å¸ˆï¼Œé˜Ÿåˆ—å’Œæ ˆæ˜¯ä¸æ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µã€‚å› ä¸ºä¹‹å‰çœ‹åˆ«çš„ææ–™è¯´é˜Ÿåˆ—ï¼ˆqueueï¼‰å’Œæ ˆï¼ˆstackï¼‰æ˜¯ä¸åŒçš„ç±»å‹çš„æ•°æ®ç»“æ„ã€‚ä¸»è¦åŒºåˆ†ç‚¹æ˜¯é˜Ÿåˆ—æ˜¯FIFOï¼Œè€Œæ ˆæ˜¯FILOã€‚æ‰€ä»¥åœ¨çœ‹deferå‡½æ•°é‚£æ®µï¼Œæ„Ÿè§‰æœ‰ç‚¹è¿·æƒ‘ã€‚æ‰€ä»¥å¸Œæœ›è€å¸ˆè®²è§£ä¸€ä¸‹ã€‚","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496528,"discussion_content":"è¿™é‡Œç¡®å®æ˜¯ç”¨è¯ä¸å½“ï¼Œåº”è¯¥å«â€œé“¾è¡¨â€ã€‚æˆ‘å·²ç»è®©ç¼–è¾‘ä¿®æ­£äº†ã€‚ä½ å¾ˆä»”ç»†å•Šï¼è°¢è°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590639318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1984817,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/49/31/6d5728ac.jpg","nickname":"LUO JINGYUAN","note":"","ucode":"6403B6D6B6ECB5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":276720,"discussion_content":"è°¢è°¢è€å¸ˆï¼Œå˜¿å˜¿ï¼Œä¸€èµ·è¿›æ­¥ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åœ¨ç”¨golangå·¥ä½œï¼Œéå¸¸å–œæ¬¢æ‚¨çš„è¿™ä¸ªä¸“æ ğŸ¥³æ„Ÿè§‰çœ‹å®Œåˆå¯¹golangæœ‰äº†æ–°çš„è®¤è¯†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590932820,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214081,"user_name":"chain","can_delete":false,"product_type":"c1","uid":1209419,"ip_address":"","ucode":"479D8351CE9F63","user_header":"https://static001.geekbang.org/account/avatar/00/12/74/4b/c56452c3.jpg","comment_is_top":false,"comment_ctime":1588651196,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588651196","product_id":100013101,"comment_content":"é˜Ÿåˆ—ä¸€èˆ¬æ¥è®²å°±æ˜¯æŒ‡çš„å…ˆè¿›å…ˆå‡ºçš„å­˜å‚¨ç»“æ„ï¼Œè¿™é‡Œæœ¯è¯­æ„Ÿè§‰æ˜¯å¯ä»¥ç”¨å¾—æ›´è€ƒç©¶ä¸€ç‚¹","like_count":0},{"had_liked":false,"id":191995,"user_name":"Cyril","can_delete":false,"product_type":"c1","uid":1024693,"ip_address":"","ucode":"29FFFAC32F911B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a2/b5/4dc0c109.jpg","comment_is_top":false,"comment_ctime":1584808872,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584808872","product_id":100013101,"comment_content":"defer çš„æ‰§è¡Œæ—¶æœºæ˜¯å‡½æ•°è¿”å›å‰","like_count":0},{"had_liked":false,"id":148379,"user_name":"åšåš","can_delete":false,"product_type":"c1","uid":1490403,"ip_address":"","ucode":"79FF6249DFC047","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/GBU53SA3W8GNRAwZIicc3gTEc0nSvfPJw7iboAMicjicmP6egDcibib28DkUfTYOjMd31DIznmofdRZrpIXvmXvjV1PQ/132","comment_is_top":false,"comment_ctime":1573000492,"is_pvip":false,"replies":[{"id":"57152","content":"åˆ‡ç‰‡çš„è¯ï¼Œè¦çœ‹ä½ æ˜¯æ€ä¹ˆå˜çš„ã€‚æ¯”å¦‚ï¼Œç”±äºè¿½åŠ å…ƒç´ ç­‰æ“ä½œå¯¼è‡´åˆ‡ç‰‡ä»¥åŠåº•å±‚æ•°ç»„å½»åº•æ¢æ–°ï¼ŒåŸåˆ‡ç‰‡å°±ä¸å˜ã€‚è¿™éœ€è¦å…·ä½“æƒ…å†µå…·ä½“åˆ†æï¼Œä½ æœ€å¥½æŠŠä»£ç è´´ä¸Šæ¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1573016668,"ip_address":"","comment_id":148379,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1573000492","product_id":100013101,"comment_content":"è€å¸ˆï¼Œæœ€è¿‘é‡åˆ°ä¸€ä¸ªdeferçš„é—®é¢˜ï¼Œæƒ³è¯·æ•™ä¸€ä¸‹ï¼<br>deferåœ¨å£°æ˜çš„æ—¶å€™ä¼šæŠŠå‡½æ•°å’Œå®ƒçš„å‚æ•°æ±‚å€¼åæ‹·è´ä¸€ä»½å…ˆå…¥æ ˆï¼Œå¦‚æœè¿™ä¸ªå‚æ•°æ˜¯å€¼ï¼Œé‚£ä¹ˆåœ¨çœŸæ­£æ‰§è¡Œçš„æ—¶å€™ä¸ä¼šæ”¹å˜ï¼Œå¦‚æœè¿™ä¸ªå‚æ•°æ˜¯å¼•ç”¨ï¼Œé‚£åœ¨çœŸæ­£æ‰§è¡Œå‰å¦‚æœæ”¹å˜äº†å®ƒçš„è¯ï¼Œæœ€ç»ˆdeferæ‰§è¡Œæ—¶çš„å‚æ•°åº”è¯¥æ˜¯æ”¹å˜åçš„ï¼ä½†æ˜¯åˆ‡ç‰‡è¿™ç§å¼•ç”¨ç±»å‹çš„å‚æ•°ï¼Œä¸ºä»€ä¹ˆæ²¡åŠæ³•æ”¹å˜å‘¢ï¼Œè€Œå¦‚æœæ˜¯ä¸€ä¸ªæŒ‡é’ˆçš„è¯å°±ä¼šè¢«æ”¹å˜ï¼Ÿ<br>å¸Œæœ›èƒ½å¾—åˆ°æ‚¨çš„è§£ç­”ï¼Œè°¢è°¢äº†ï¼ï¼ï¼","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473476,"discussion_content":"åˆ‡ç‰‡çš„è¯ï¼Œè¦çœ‹ä½ æ˜¯æ€ä¹ˆå˜çš„ã€‚æ¯”å¦‚ï¼Œç”±äºè¿½åŠ å…ƒç´ ç­‰æ“ä½œå¯¼è‡´åˆ‡ç‰‡ä»¥åŠåº•å±‚æ•°ç»„å½»åº•æ¢æ–°ï¼ŒåŸåˆ‡ç‰‡å°±ä¸å˜ã€‚è¿™éœ€è¦å…·ä½“æƒ…å†µå…·ä½“åˆ†æï¼Œä½ æœ€å¥½æŠŠä»£ç è´´ä¸Šæ¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573016668,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117995,"user_name":"å…š","can_delete":false,"product_type":"c1","uid":1071974,"ip_address":"","ucode":"EE531DB3EA124D","user_header":"https://static001.geekbang.org/account/avatar/00/10/5b/66/ad35bc68.jpg","comment_is_top":false,"comment_ctime":1564208698,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564208698","product_id":100013101,"comment_content":"è€å¸ˆçš„demoéå¸¸ç»å…¸ æ¯ä¸€ä¸ªçœ‹ç€éƒ½å¾ˆå¸¦åŠ²","like_count":0},{"had_liked":false,"id":111960,"user_name":"Sky","can_delete":false,"product_type":"c1","uid":1392585,"ip_address":"","ucode":"4C5A5AB73E8B90","user_header":"https://static001.geekbang.org/account/avatar/00/15/3f/c9/1ccefb9a.jpg","comment_is_top":false,"comment_ctime":1562643553,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562643553","product_id":100013101,"comment_content":"æ˜¯å¦å¯ä»¥è¿™æ ·ç†è§£ï¼Œdeferè¯­å¥å°±æ˜¯åœ¨ææ„çš„æ—¶å€™æ‰§è¡Œçš„ã€‚","like_count":0},{"had_liked":false,"id":101143,"user_name":"benying","can_delete":false,"product_type":"c1","uid":1247522,"ip_address":"","ucode":"DEBAB485F381CC","user_header":"https://static001.geekbang.org/account/avatar/00/13/09/22/22c0c4fa.jpg","comment_is_top":false,"comment_ctime":1559726444,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1559726444","product_id":100013101,"comment_content":"æ‰“å¡ï¼Œè¿™ç¯‡æ–‡ç« çš„è¯„è®ºéƒ½å¾ˆèµå•Š","like_count":0},{"had_liked":false,"id":96240,"user_name":"æ¸…é™æ·¡æ³Š","can_delete":false,"product_type":"c1","uid":1215670,"ip_address":"","ucode":"8A0DD8BF7405F1","user_header":"https://static001.geekbang.org/account/avatar/00/12/8c/b6/9ff2dfea.jpg","comment_is_top":false,"comment_ctime":1558362479,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1558362479","product_id":100013101,"comment_content":"å…³äºæ€è€ƒé¢˜ï¼Œå¯ä»¥çš„ã€‚<br><br>å¤§çš„æ§åˆ¶æµæ˜¯è¿™æ ·çš„ï¼š<br>panicå‡½æ•°é‚£ä¸€è¡Œæ‰§è¡Œå®Œåé©¬ä¸Šç»“æŸå½“å‰å‡½æ•°ï¼›è€Œdeferå‡½æ•°è¢«è°ƒç”¨å°±æ˜¯å‘ç”Ÿåœ¨å½“å‰å‡½æ•°ç»“æŸåçš„ç«‹å³ã€‚è¿™äº›è§„åˆ™&#47;é¡ºåºæ˜¯ä¸å˜çš„ã€‚<br><br>æ‰€ä»¥è¯´ï¼Œå¦‚æœpanicå‡½æ•°æ”¾åœ¨deferå‡½æ•°è°ƒç”¨é“¾ä¸Šï¼ˆæŸä¸€ä¸ªdeferå‡½æ•°ä½“ä¸­ï¼‰ï¼Œåªè¦åç»­deferå‡½æ•°æœ‰recoverå‡½æ•°å¹¶å¤„ç†äº†è¿™ä¸ªpanicï¼Œé‚£ä¹ˆææ…Œå°±è¢«å¤„ç†äº†ï¼›åŒç†ï¼Œå¦‚æœåç»­deferå‡½æ•°æ²¡æœ‰recoverå‡½æ•°è¢«æ”¾ç½®ï¼Œé‚£ä¹ˆåœ¨ä¾æ¬¡è¿è¡Œå®Œdeferå‡½æ•°é“¾ä¸Šçš„å‡½æ•°åï¼Œpanicä¼šç»§ç»­å‘å‡½æ•°æ ˆä¸Šä¸€çº§æŠ›ï¼ˆå¦‚æœæ˜¯mainå°±ç›´æ¥ç»ˆæ­¢è¿›ç¨‹äº†ï¼‰ã€‚","like_count":0},{"had_liked":false,"id":62555,"user_name":"è™¢åœ‹æŠ€é†¬","can_delete":false,"product_type":"c1","uid":1056807,"ip_address":"","ucode":"5A192262AA037E","user_header":"https://static001.geekbang.org/account/avatar/00/10/20/27/a6932fbe.jpg","comment_is_top":false,"comment_ctime":1548091322,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1548091322","product_id":100013101,"comment_content":"æ‰“å¡","like_count":0},{"had_liked":false,"id":42026,"user_name":"Bang","can_delete":false,"product_type":"c1","uid":1160079,"ip_address":"","ucode":"0CB8A52B177868","user_header":"https://static001.geekbang.org/account/avatar/00/11/b3/8f/4caf7f03.jpg","comment_is_top":false,"comment_ctime":1542894003,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1542894003","product_id":100013101,"comment_content":"æ¥ç€åˆšåˆšçš„æé—®ä¸å¥½æ„æ€äº†ï¼Œé‚£æˆ‘ä»¬èƒ½ä¸èƒ½ç»Ÿä¸€åœ¨ä¸€ä¸ªçš„åœ°æ–¹å¤„ç†panicå‘¢","like_count":0},{"had_liked":false,"id":31350,"user_name":"ugenehan","can_delete":false,"product_type":"c1","uid":1203116,"ip_address":"","ucode":"64CD44A422B63A","user_header":"https://static001.geekbang.org/account/avatar/00/12/5b/ac/99f1fa52.jpg","comment_is_top":false,"comment_ctime":1539155999,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1539155999","product_id":100013101,"comment_content":"deferä¸­å¼•å‘panicï¼Œè¿™æ ·å—ï¼Ÿ<br>func main() {<br>\tfmt.Println(&quot;Enter func main&quot;)<br>\tdefer func() {<br>\t\tfmt.Println(&quot;Enter defer func&quot;)<br>\t\tpanic(errors.New(&quot;again some errors&quot;))<br>\t\tif p := recover(); p != nil {<br>\t\t\tfmt.Printf(&quot;panic:%s\\n&quot;, p)<br>\t\t}<br>\t\tfmt.Println(&quot;Exit defer&quot;)<br><br>\t}()<br>\tfmt.Println(&quot;Begin panic&quot;)<br>\tpanic(errors.New(&quot;some errors&quot;))<br>\tfmt.Println(&quot;Exit main&quot;)<br>}","like_count":0},{"had_liked":false,"id":29676,"user_name":"Michael","can_delete":false,"product_type":"c1","uid":1118976,"ip_address":"","ucode":"35F4FFAC4A4B15","user_header":"https://static001.geekbang.org/account/avatar/00/11/13/00/a4a2065f.jpg","comment_is_top":false,"comment_ctime":1538481050,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1538481050","product_id":100013101,"comment_content":"å¯ä»¥åœ¨deferä¸­å¼•å‘panic","like_count":0},{"had_liked":false,"id":29558,"user_name":"å†°æ¿€å‡Œçš„çœ¼æ³ª","can_delete":false,"product_type":"c1","uid":1087945,"ip_address":"","ucode":"5DCB974667E93A","user_header":"https://static001.geekbang.org/account/avatar/00/10/99/c9/a7c77746.jpg","comment_is_top":false,"comment_ctime":1538439401,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1538439401","product_id":100013101,"comment_content":"deferè¯­å¥å¯ä»¥ç”¨æ¥è¿›è¡Œèµ„æºæ¸…ç†<br>ä½†æ˜¯ç”±äºæ•è·panicçš„deferè°ƒç”¨ï¼Œå¯ä»¥å†æ¬¡æŠ›å‡ºpanic<br>å› æ­¤ï¼Œå½“panicæ•è·å’Œèµ„æºæ¸…ç†åŒæ—¶å­˜åœ¨æ—¶ï¼Œdeferçš„è¯­å¥é¡ºåºå°±éœ€è¦ä»”ç»†è€ƒè™‘äº†","like_count":0}]}