{"id":171760,"title":"13 | 实战二（上）：如何对接口鉴权这样一个功能开发做面向对象分析？","content":"<p>面向对象分析（OOA）、面向对象设计（OOD）、面向对象编程（OOP），是面向对象开发的三个主要环节。在前面的章节中，我对三者的讲解比较偏理论、偏概括性，目的是让你先有一个宏观的了解，知道什么是OOA、OOD、OOP。不过，光知道“是什么”是不够的，我们更重要的还是要知道“如何做”，也就是，如何进行面向对象分析、设计与编程。</p><p>在过往的工作中，我发现，很多工程师，特别是初级工程师，本身没有太多的项目经验，或者参与的项目都是基于开发框架填写CRUD模板似的代码，导致分析、设计能力比较欠缺。当他们拿到一个比较笼统的开发需求的时候，往往不知道从何入手。</p><p>对于“如何做需求分析，如何做职责划分？需要定义哪些类？每个类应该具有哪些属性、方法？类与类之间该如何交互？如何组装类成一个可执行的程序？”等等诸多问题，都没有清晰的思路，更别提利用成熟的设计原则、思想或者设计模式，开发出具有高内聚低耦合、易扩展、易读等优秀特性的代码了。</p><p>所以，我打算用两节课的时间，结合一个真实的开发案例，从基础的需求分析、职责划分、类的定义、交互、组装运行讲起，将最基础的面向对象分析、设计、编程的套路给你讲清楚，为后面学习设计原则、设计模式打好基础。</p><!-- [[[read_end]]] --><p>话不多说，让我们正式开始今天的学习吧！</p><h2>案例介绍和难点剖析</h2><p>假设，你正在参与开发一个微服务。微服务通过HTTP协议暴露接口给其他系统调用，说直白点就是，其他系统通过URL来调用微服务的接口。有一天，你的leader找到你说，“为了保证接口调用的安全性，我们希望设计实现一个接口调用鉴权功能，只有经过认证之后的系统才能调用我们的接口，没有认证过的系统调用我们的接口会被拒绝。我希望由你来负责这个任务的开发，争取尽快上线。”</p><p>leader丢下这些话就走了。这个时候，你该如何来做呢？有没有脑子里一团浆糊，一时间无从下手的感觉呢？为什么会有这种感觉呢？我个人觉得主要有下面两点原因。</p><h3>1.需求不明确</h3><p>leader给到的需求过于模糊、笼统，不够具体、细化，离落地到设计、编码还有一定的距离。而人的大脑不擅长思考这种过于抽象的问题。这也是真实的软件开发区别于应试教育的地方。应试教育中的考试题目，一般都是一个非常具体的问题，我们去解答就好了。而真实的软件开发中，需求几乎都不是很明确。</p><p>我们前面讲过，面向对象分析主要的分析对象是“需求”，因此，面向对象分析可以粗略地看成“需求分析”。实际上，不管是需求分析还是面向对象分析，我们首先要做的都是将笼统的需求细化到足够清晰、可执行。我们需要通过沟通、挖掘、分析、假设、梳理，搞清楚具体的需求有哪些，哪些是现在要做的，哪些是未来可能要做的，哪些是不用考虑做的。</p><h3>2.缺少锻炼</h3><p>相比单纯的业务CRUD开发，鉴权这个开发任务，要更有难度。鉴权作为一个跟具体业务无关的功能，我们完全可以把它开发成一个独立的框架，集成到很多业务系统中。而作为被很多系统复用的通用框架，比起普通的业务代码，我们对框架的代码质量要求要更高。</p><p>开发这样通用的框架，对工程师的需求分析能力、设计能力、编码能力，甚至逻辑思维能力的要求，都是比较高的。如果你平时做的都是简单的CRUD业务开发，那这方面的锻炼肯定不会很多，所以，一旦遇到这种开发需求，很容易因为缺少锻炼，脑子放空，不知道从何入手，完全没有思路。</p><h2>对案例进行需求分析</h2><p>实际上，需求分析的工作很琐碎，也没有太多固定的章法可寻，所以，我不打算很牵强地罗列那些听着有用、实际没用的方法论，而是希望通过鉴权这个例子，来给你展示一下，面对需求分析的时候，我的完整的思考路径是什么样的。希望你能自己去体会，举一反三地类比应用到其他项目的需求分析中。</p><p>尽管针对框架、组件、类库等非业务系统的开发，我们一定要有组件化意识、框架意识、抽象意识，开发出来的东西要足够通用，不能局限于单一的某个业务需求，但这并不代表我们就可以脱离具体的应用场景，闷头拍脑袋做需求分析。多跟业务团队聊聊天，甚至自己去参与几个业务系统的开发，只有这样，我们才能真正知道业务系统的痛点，才能分析出最有价值的需求。不过，针对鉴权这一功能的开发，最大的需求方还是我们自己，所以，我们也可以先从满足我们自己系统的需求开始，然后再迭代优化。</p><p>现在，我们来看一下，针对鉴权这个功能的开发，我们该如何做需求分析？</p><p>实际上，这跟做算法题类似，先从最简单的方案想起，然后再优化。所以，我把整个的分析过程分为了循序渐进的四轮。每一轮都是对上一轮的迭代优化，最后形成一个可执行、可落地的需求列表。</p><h3>1.第一轮基础分析</h3><p>对于如何做鉴权这样一个问题，最简单的解决方案就是，通过用户名加密码来做认证。我们给每个允许访问我们服务的调用方，派发一个应用名（或者叫应用ID、AppID）和一个对应的密码（或者叫秘钥）。调用方每次进行接口请求的时候，都携带自己的AppID和密码。微服务在接收到接口调用请求之后，会解析出AppID和密码，跟存储在微服务端的AppID和密码进行比对。如果一致，说明认证成功，则允许接口调用请求；否则，就拒绝接口调用请求。</p><h3>2.第二轮分析优化</h3><p>不过，这样的验证方式，每次都要明文传输密码。密码很容易被截获，是不安全的。那如果我们借助加密算法（比如SHA），对密码进行加密之后，再传递到微服务端验证，是不是就可以了呢？实际上，这样也是不安全的，因为加密之后的密码及AppID，照样可以被未认证系统（或者说黑客）截获，未认证系统可以携带这个加密之后的密码以及对应的AppID，伪装成已认证系统来访问我们的接口。这就是典型的“<a href=\"https://zh.wikipedia.org/wiki/%E9%87%8D%E6%94%BE%E6%94%BB%E5%87%BB\">重放攻击</a>”。</p><p>提出问题，然后再解决问题，是一个非常好的迭代优化方法。对于刚刚这个问题，我们可以借助OAuth的验证思路来解决。调用方将请求接口的URL跟AppID、密码拼接在一起，然后进行加密，生成一个token。调用方在进行接口请求的的时候，将这个token及AppID，随URL一块传递给微服务端。微服务端接收到这些数据之后，根据AppID从数据库中取出对应的密码，并通过同样的token生成算法，生成另外一个token。用这个新生成的token跟调用方传递过来的token对比。如果一致，则允许接口调用请求；否则，就拒绝接口调用请求。</p><p>这个方案稍微有点复杂，我画了一张示例图，来帮你理解整个流程。</p><p><img src=\"https://static001.geekbang.org/resource/image/07/d7/0704c4806f9d6c01bb20884d05ee54d7.jpg?wh=1748*1583\" alt=\"\"></p><h3>3.第三轮分析优化</h3><p>不过，这样的设计仍然存在重放攻击的风险，还是不够安全。每个URL拼接上AppID、密码生成的token都是固定的。未认证系统截获URL、token和AppID之后，还是可以通过重放攻击的方式，伪装成认证系统，调用这个URL对应的接口。</p><p>为了解决这个问题，我们可以进一步优化token生成算法，引入一个随机变量，让每次接口请求生成的token都不一样。我们可以选择时间戳作为随机变量。原来的token是对URL、AppID、密码三者进行加密生成的，现在我们将URL、AppID、密码、时间戳四者进行加密来生成token。调用方在进行接口请求的时候，将token、AppID、时间戳，随URL一并传递给微服务端。</p><p>微服务端在收到这些数据之后，会验证当前时间戳跟传递过来的时间戳，是否在一定的时间窗口内（比如一分钟）。如果超过一分钟，则判定token过期，拒绝接口请求。如果没有超过一分钟，则说明token没有过期，就再通过同样的token生成算法，在服务端生成新的token，与调用方传递过来的token比对，看是否一致。如果一致，则允许接口调用请求；否则，就拒绝接口调用请求。</p><p>优化之后的认证流程如下图所示。</p><p><img src=\"https://static001.geekbang.org/resource/image/bd/60/bde932c73c6636ad85380e4801dbfb60.jpg?wh=2093*1733\" alt=\"\"></p><h3>4.第四轮分析优化</h3><p>不过，你可能会说，这样还是不够安全啊。未认证系统还是可以在这一分钟的token失效窗口内，通过截获请求、重放请求，来调用我们的接口啊！</p><p>你说得没错。不过，攻与防之间，本来就没有绝对的安全。我们能做的就是，尽量提高攻击的成本。这个方案虽然还有漏洞，但是实现起来足够简单，而且不会过度影响接口本身的性能（比如响应时间）。所以，权衡安全性、开发成本、对系统性能的影响，这个方案算是比较折中、比较合理的了。</p><p>实际上，还有一个细节我们没有考虑到，那就是，如何在微服务端存储每个授权调用方的AppID和密码。当然，这个问题并不难。最容易想到的方案就是存储到数据库里，比如MySQL。不过，开发像鉴权这样的非业务功能，最好不要与具体的第三方系统有过度的耦合。</p><p>针对AppID和密码的存储，我们最好能灵活地支持各种不同的存储方式，比如ZooKeeper、本地配置文件、自研配置中心、MySQL、Redis等。我们不一定针对每种存储方式都去做代码实现，但起码要留有扩展点，保证系统有足够的灵活性和扩展性，能够在我们切换存储方式的时候，尽可能地减少代码的改动。</p><h3>5.最终确定需求</h3><p>到此，需求已经足够细化和具体了。现在，我们按照鉴权的流程，对需求再重新描述一下。如果你熟悉UML，也可以用时序图、流程图来描述。不过，用什么描述不是重点，描述清楚才是最重要的。考虑到在接下来的面向对象设计环节中，我会基于文字版本的需求描述，来进行类、属性、方法、交互等的设计，所以，这里我给出的最终需求描述是文字版本的。</p><ul>\n<li>调用方进行接口请求的时候，将URL、AppID、密码、时间戳拼接在一起，通过加密算法生成token，并且将token、AppID、时间戳拼接在URL中，一并发送到微服务端。</li>\n<li>微服务端在接收到调用方的接口请求之后，从请求中拆解出token、AppID、时间戳。</li>\n<li>微服务端首先检查传递过来的时间戳跟当前时间，是否在token失效时间窗口内。如果已经超过失效时间，那就算接口调用鉴权失败，拒绝接口调用请求。</li>\n<li>如果token验证没有过期失效，微服务端再从自己的存储中，取出AppID对应的密码，通过同样的token生成算法，生成另外一个token，与调用方传递过来的token进行匹配；如果一致，则鉴权成功，允许接口调用，否则就拒绝接口调用。</li>\n</ul><p>这就是我们需求分析的整个思考过程，从最粗糙、最模糊的需求开始，通过“提出问题-解决问题”的方式，循序渐进地进行优化，最后得到一个足够清晰、可落地的需求描述。</p><h2>重点回顾</h2><p>今天的内容到此就讲完了。我们一块来总结回顾一下，你需要掌握的一些重点内容。</p><p>针对框架、类库、组件等非业务系统的开发，其中一个比较大的难点就是，需求一般都比较抽象、模糊，需要你自己去挖掘，做合理取舍、权衡、假设，把抽象的问题具象化，最终产生清晰的、可落地的需求定义。需求定义是否清晰、合理，直接影响了后续的设计、编码实现是否顺畅。所以，作为程序员，你一定不要只关心设计与实现，前期的需求分析同等重要。</p><p>需求分析的过程实际上是一个不断迭代优化的过程。我们不要试图一下就能给出一个完美的解决方案，而是先给出一个粗糙的、基础的方案，有一个迭代的基础，然后再慢慢优化，这样一个思考过程能让我们摆脱无从下手的窘境。</p><h2>课堂讨论</h2><p>除了工作中我们会遇到需求不明确的开发任务，实际上，在面试中，我们也经常遇到一些开放性的设计问题，对于这类问题，你是如何解答的？有哪些好的经验可以分享给大家呢？</p><p>欢迎在留言区写下你的答案，和同学一起交流和分享。如果有收获，也欢迎你把这篇文章分享给你的朋友。</p>","neighbors":{"left":{"article_title":"12 | 实战一（下）：如何利用基于充血模型的DDD开发一个虚拟钱包系统？","id":169631},"right":{"article_title":"14 | 实战二（下）：如何利用面向对象设计和编程开发接口鉴权功能？","id":171767}},"comments":[{"had_liked":false,"id":157641,"user_name":"编程界的小学生","can_delete":false,"product_type":"c1","uid":1593289,"ip_address":"","ucode":"4A5BE9A5E877FA","user_header":"https://static001.geekbang.org/account/avatar/00/18/4f/c9/9f51fd27.jpg","comment_is_top":false,"comment_ctime":1575217579,"is_pvip":false,"discussion_count":22,"race_medal":0,"score":"1925720566187","product_id":100039001,"comment_content":"工作中遇到非crud的需求我就会想尽一切办法让他通用，基本需求分析和需求设计的时间占用百分之五十，开发和重构到自认为最优占用百分之五十。比如最简单的验证码功能，几乎每个项目都有，我就封装一套验证码服务，主要功能有你在配置文件里配置好需要被验证码拦截的路径，这里还要考虑到通配符，空格等等细节和可扩展的点，内置图片验证码，极验证，手机验证以及自定义验证码等等，总之我认为如果有机会遇到非crud的需求，一定要好好珍惜，好好把握，把他打造成属于自己的产品，这样会让自己下意识的去想尽一切办法把他做到最优，亲儿子一样的待遇，再也不会无脑cv，连变量名可能都要认真的重构一两遍😹😹😹","like_count":449,"discussions":[{"author":{"id":1259293,"avatar":"https://static001.geekbang.org/account/avatar/00/13/37/1d/b8014237.jpg","nickname":"千里之行 始于足下","note":"","ucode":"8F1CD8CECA588F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":98327,"discussion_content":"遇到非CRUD的业务确实是会更用心一些，但是我们项目组给的时间太紧了，所以就算有这样的机会，做出来的东西事后看起来自己都看不下去，但是已经上了生成的又不敢乱改了","likes_number":12,"is_delete":false,"is_hidden":false,"ctime":1577154955,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2516041,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/1UV7tTtMTM8hyvGl2YaSVczZve3e2aOcrRafvg64WQo7hYRRzGnondFElhGv0RnQZQgn6PycYzal2b5oAwYXtg/132","nickname":"太行山人","note":"","ucode":"66EB8BFD311A45","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1259293,"avatar":"https://static001.geekbang.org/account/avatar/00/13/37/1d/b8014237.jpg","nickname":"千里之行 始于足下","note":"","ucode":"8F1CD8CECA588F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538566,"discussion_content":"理想与现实的差距，慢慢的，我们的理想就没了","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1639447382,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":98327,"ip_address":""},"score":538566,"extra":""},{"author":{"id":2853072,"avatar":"","nickname":"小杰同学","note":"","ucode":"C6FC59D58F772C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1259293,"avatar":"https://static001.geekbang.org/account/avatar/00/13/37/1d/b8014237.jpg","nickname":"千里之行 始于足下","note":"","ucode":"8F1CD8CECA588F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559927,"discussion_content":"加班！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649061899,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":98327,"ip_address":""},"score":559927,"extra":""}]},{"author":{"id":1999235,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/81/83/f93b1e62.jpg","nickname":"peaceForce","note":"","ucode":"98A318930DDC9A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374837,"discussion_content":"结果一个验证码pm问你需要多少天, 你说三天, 对方立马就压了一半。除了有优化的意识, 如何说服工期安排也是个问题。","likes_number":11,"is_delete":false,"is_hidden":false,"ctime":1621386343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1369757,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/7WkTI1IicbKvsPJng5vQh5qlrf1smbfl2zb7icHZfzcAk1k4lr8w8IDEAdrqq1NHW5XZMPXiaa1h7Jn1LGOWOCkIA/132","nickname":"早起不吃虫","note":"","ucode":"13CD3B5E1F9435","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1999235,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/81/83/f93b1e62.jpg","nickname":"peaceForce","note":"","ucode":"98A318930DDC9A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538640,"discussion_content":"怕是最多分配半天","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1639465069,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":374837,"ip_address":""},"score":538640,"extra":""},{"author":{"id":1386966,"avatar":"https://static001.geekbang.org/account/avatar/00/15/29/d6/6dafc576.jpg","nickname":"糖小宝","note":"","ucode":"15A8B649F668B1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1999235,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/81/83/f93b1e62.jpg","nickname":"peaceForce","note":"","ucode":"98A318930DDC9A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544277,"discussion_content":"你可以试试不要立即回复他，列一个列表，开发这个需求每个功能点所需要的时间，以小时为单位，加上优化调试时间，这样你要求的工时可以不必被他压缩，虽然他不会认真看，但有个列表，他会觉得你要求的工时是有凭据的","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1641456214,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":374837,"ip_address":""},"score":544277,"extra":""}]},{"author":{"id":1158946,"avatar":"https://static001.geekbang.org/account/avatar/00/11/af/22/559c2fdb.jpg","nickname":"Mr.S","note":"","ucode":"96DC8BE01D54C2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":266382,"discussion_content":"赞同  珍惜非CURD需求","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1589507347,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1489957,"avatar":"https://static001.geekbang.org/account/avatar/00/16/bc/25/1c92a90c.jpg","nickname":"tt","note":"","ucode":"7753B79AD5A9AC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69170,"discussion_content":"这样的工作才会给我们意义感","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1575267387,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1593289,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4f/c9/9f51fd27.jpg","nickname":"编程界的小学生","note":"","ucode":"4A5BE9A5E877FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1489957,"avatar":"https://static001.geekbang.org/account/avatar/00/16/bc/25/1c92a90c.jpg","nickname":"tt","note":"","ucode":"7753B79AD5A9AC","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69193,"discussion_content":"同感。","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1575269662,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":69170,"ip_address":""},"score":69193,"extra":""}]},{"author":{"id":1144171,"avatar":"https://static001.geekbang.org/account/avatar/00/11/75/6b/fd685164.jpg","nickname":"lcf枫","note":"","ucode":"D51E8F68BD41CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":196704,"discussion_content":"同意 最好是自己做一个模块，负责他。这样就会不停的优化，亲儿子一样对待。","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1583369698,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015483,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7e/bb/947c329a.jpg","nickname":"程序员小跃","note":"","ucode":"25BB96E0791A60","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70189,"discussion_content":"天天CRUD，自己也觉得烦，没啥提升","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1575335676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1311947,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/xysT7OH4SrD4sv944ndDv5tnJOk5na37Gxd5owGWsE7ON7AVW0ibnYGNRoZd0ibLWhFVXLLjOB5QFxwjo0EGIkoQ/132","nickname":"雨下不停","note":"","ucode":"0893B9C249E48A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":234604,"discussion_content":"说得好","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1586968105,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1073087,"avatar":"https://static001.geekbang.org/account/avatar/00/10/5f/bf/4bd3eb4b.jpg","nickname":"米 虫","note":"","ucode":"6F35AA8BB8195B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":68987,"discussion_content":"惭愧，上次提供支付回调接口给第三方的时候。写的流水帐，没有封装一点通用性能。虽然思路跟今天的课程一样。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1575249644,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1593289,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4f/c9/9f51fd27.jpg","nickname":"编程界的小学生","note":"","ucode":"4A5BE9A5E877FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1073087,"avatar":"https://static001.geekbang.org/account/avatar/00/10/5f/bf/4bd3eb4b.jpg","nickname":"米 虫","note":"","ucode":"6F35AA8BB8195B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69068,"discussion_content":"可以考虑重构下来提升自己","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575256680,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":68987,"ip_address":""},"score":69068,"extra":""}]},{"author":{"id":2068684,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eotIianb3beTzsGIte6BZxlIhEwc2ryrNBGxZy8ibKbfibVJyUS8d3ZxybAdfJwHPm13ydPC4VJP7Lbw/132","nickname":"taku","note":"","ucode":"B22DA9A4A9DC91","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379231,"discussion_content":"确实是个好方法，遇到非curd就好好把握，赞","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1623763511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1321016,"avatar":"https://static001.geekbang.org/account/avatar/00/14/28/38/d93928e0.jpg","nickname":"yh","note":"","ucode":"64FFFB8A5DB979","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215840,"discussion_content":"赞同，就是产品需求变化太快，跟不上他们的节奏。😂😂😂","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1585389652,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1178156,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fa/2c/9a0c45e6.jpg","nickname":"微凉","note":"","ucode":"F6BD0AE11AE224","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69104,"discussion_content":"哈哈，完全同意。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575261398,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2096683,"avatar":"","nickname":"Geek_151295","note":"","ucode":"970A611ECFB457","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575809,"discussion_content":"这个验证码服务。有开源的地址吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655117790,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2550743,"avatar":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","nickname":"if...else...","note":"","ucode":"D0565908C99695","race_medal":4,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377409,"discussion_content":"😳","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622632082,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1512537,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/aFAYPyw7ywC1xE9h1qibnTBwtWn2ClJqlicy5cMomhZVaruMyqSq76wMkS279mUaGhrLGwWo9ZnW0WCWfmMovlXw/132","nickname":"木瓜777","note":"","ucode":"FC52A499AF6374","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":73696,"discussion_content":"遇到问题，我首先会实现一版，然后去优化重构！有时对需求不太理解，但产品又急需看到效果，所以并没有过多思考设计","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575589997,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1540988,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKZ16iaIia0029oI1Qh5NicibpbTiaBAaCOPYXoLplKHr6uQ2rSVxPZanBvpMcL2NuhwKQYCFnaHP5tedQ/132","nickname":"FIGNT","note":"","ucode":"D9DB185AE9E67C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":68957,"discussion_content":"crud能不能也做成比较通用的呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575248012,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1593289,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4f/c9/9f51fd27.jpg","nickname":"编程界的小学生","note":"","ucode":"4A5BE9A5E877FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1540988,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKZ16iaIia0029oI1Qh5NicibpbTiaBAaCOPYXoLplKHr6uQ2rSVxPZanBvpMcL2NuhwKQYCFnaHP5tedQ/132","nickname":"FIGNT","note":"","ucode":"D9DB185AE9E67C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69069,"discussion_content":"也需要区分场景，部分也可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575256709,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":68957,"ip_address":""},"score":69069,"extra":""}]}]},{"had_liked":false,"id":157684,"user_name":"辣么大","can_delete":false,"product_type":"c1","uid":1396951,"ip_address":"","ucode":"AB308B6DCA0108","user_header":"https://static001.geekbang.org/account/avatar/00/15/50/d7/f82ed283.jpg","comment_is_top":false,"comment_ctime":1575246785,"is_pvip":true,"discussion_count":30,"race_medal":0,"score":"1436094323649","product_id":100039001,"comment_content":"一句话：使用进化算法的思想，提出一个MVP（最小可行性产品），逐步迭代改进。<br><br>拿到这个需求，假设我们不了解接口鉴权，需求又不明确，我会我自己如下问题：<br>1.什么叫接口鉴权？搞清基本概念<br>2.接口鉴权最佳实践是什么？技术调研<br>3.appid和secret key从哪里来？用户自己申请还是我们授权？用户申请是以什么方式申请（网页还是邮件？申请的网页有人做了么？）追问下去。<br>4.appid secretkey存储在什么地方呢？数据存储<br>5.用户如何使用？需要为用户提供接口鉴权使用手册和文档，及示例代码。写用户手册，文档。<br>6.这个功能如何测试？提前想好如何测试<br>7.接口鉴权功能何时上线？估计工期<br>8.鉴权成功或失败返回码和信息定义？约定返回结果<br><br>关于防止重放攻击：请求参数中还可以加入nonce（随机正整数），两次请求的nonce不能重复，timestamp和nonce结合进一步防止重放攻击。","like_count":335,"discussions":[{"author":{"id":1231549,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ca/bd/a51ae4b2.jpg","nickname":"吃饭饭","note":"","ucode":"95CFA07CDA2957","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70270,"discussion_content":"程序员十倍法则应用的很熟练","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1575340279,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1396951,"avatar":"https://static001.geekbang.org/account/avatar/00/15/50/d7/f82ed283.jpg","nickname":"辣么大","note":"","ucode":"AB308B6DCA0108","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1231549,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ca/bd/a51ae4b2.jpg","nickname":"吃饭饭","note":"","ucode":"95CFA07CDA2957","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70285,"discussion_content":"遇见同学啦！握手握手！","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1575342211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":70270,"ip_address":""},"score":70285,"extra":""},{"author":{"id":2096683,"avatar":"","nickname":"Geek_151295","note":"","ucode":"970A611ECFB457","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1231549,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ca/bd/a51ae4b2.jpg","nickname":"吃饭饭","note":"","ucode":"95CFA07CDA2957","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575812,"discussion_content":"这是哪本书上的方法吗？可以推荐一下书名吗？网上搜到的好像不准确。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655118401,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":70270,"ip_address":""},"score":575812,"extra":""}]},{"author":{"id":1179533,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ff/8d/8601f035.jpg","nickname":"淞淞同学","note":"","ucode":"529A326B898008","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":80420,"discussion_content":"不管怎么问最终还是要把自己的理解跟leader对齐目标，效率更高。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576161609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1177849,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f8/f9/5d983b88.jpg","nickname":"Cest La Vie🤩","note":"","ucode":"EDABE70BB796AC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":71664,"discussion_content":"加上nonce效果跟只加时间戳的效果是一样的吧\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575445765,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":12,"child_discussions":[{"author":{"id":1396951,"avatar":"https://static001.geekbang.org/account/avatar/00/15/50/d7/f82ed283.jpg","nickname":"辣么大","note":"","ucode":"AB308B6DCA0108","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1177849,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f8/f9/5d983b88.jpg","nickname":"Cest La Vie🤩","note":"","ucode":"EDABE70BB796AC","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":71672,"discussion_content":"谢谢讨论！我这是么想的，不对的话请指出。例如客户端发出一个鉴权请求成功了（带有nonce），这个请求也被不怀好意的人知道了，他可以发同样的请求（带有相同的nonce），这时服务端收到一个和上次相同的请求（两次的nonce一致），可以拒绝这个坏人的访问。","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1575446528,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":71664,"ip_address":""},"score":71672,"extra":""},{"author":{"id":1194535,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3a/27/6bb0bb01.jpg","nickname":"随机的","note":"","ucode":"D8319136F27CBA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1396951,"avatar":"https://static001.geekbang.org/account/avatar/00/15/50/d7/f82ed283.jpg","nickname":"辣么大","note":"","ucode":"AB308B6DCA0108","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":72514,"discussion_content":"是否可以根据token来判断是否是相同的请求，这样可以不用额外增加一个nonce参数。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575498032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":71672,"ip_address":""},"score":72514,"extra":""},{"author":{"id":1396951,"avatar":"https://static001.geekbang.org/account/avatar/00/15/50/d7/f82ed283.jpg","nickname":"辣么大","note":"","ucode":"AB308B6DCA0108","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1194535,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3a/27/6bb0bb01.jpg","nickname":"随机的","note":"","ucode":"D8319136F27CBA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":72566,"discussion_content":"可以的！\n重放攻击防止方式有三种：\n1、加时间戳\n客户端与服务端有时间差，例如60s内的都算有效。那么黑客可以60s以内进行重放攻击，就有效。\n2、时间戳+nonce（随机数）\n每次请求成功后，保存nonce，例如放在redis和数据库中，再次请求如果nonce相同，则为重放攻击。\n3、基于record的方案，就是和你说的保存token的意思差不多\n把每次请求保存在数据库中，接收到新请求后，校验是否存在，如果存在，则请求非法。也可以与1结合时间戳只保存60s以内的数据。\n我参考了：\nhttps://cloud.tencent.com/document/product/214/1526\nhttps://juejin.im/post/5ad43b86f265da239236cedc","likes_number":26,"is_delete":false,"is_hidden":false,"ctime":1575505444,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":72514,"ip_address":""},"score":72566,"extra":""}]},{"author":{"id":2550743,"avatar":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","nickname":"if...else...","note":"","ucode":"D0565908C99695","race_medal":4,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377411,"discussion_content":"挺好","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622632180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2347137,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d0/81/d5c8e46e.jpg","nickname":"snake","note":"","ucode":"47BFFE4D048156","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336166,"discussion_content":"2,3的问题就是如果接口请求量大的话，数据存储的问题，不同接口的nonce或者token，量太大","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608519659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1522079,"avatar":"https://static001.geekbang.org/account/avatar/00/17/39/9f/00374048.jpg","nickname":"Hash","note":"","ucode":"5110B126271D6F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334845,"discussion_content":"优秀","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608008724,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1242573,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f5/cd/3890be04.jpg","nickname":"小川","note":"","ucode":"D462222DDBB978","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":324045,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605036908,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1115041,"avatar":"https://static001.geekbang.org/account/avatar/00/11/03/a1/e6a0f60b.jpg","nickname":"Sid","note":"","ucode":"0461B574B2736B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":314859,"discussion_content":"也就是先理清楚需求，得到可行解，再在可行解的缺陷上，逐步引出更优解。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603204107,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2158680,"avatar":"https://static001.geekbang.org/account/avatar/00/20/f0/58/7b2b8cd8.jpg","nickname":"ԅ","note":"","ucode":"24836C8311F216","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304740,"discussion_content":"马克","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599652182,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1250922,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIzGGthScz54sECZJKX3lgyjCATkgrvSt5N3eOsYB34jibCr3SkAX88QaZ5IVmME9Ec7VdkQGwRSPw/132","nickname":"哈哈哈","note":"","ucode":"8AC20A1C9C7DF8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":247386,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587812677,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1664641,"avatar":"https://static001.geekbang.org/account/avatar/00/19/66/81/a5da0b99.jpg","nickname":"null","note":"","ucode":"7FF909352F786E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":72576,"discussion_content":"厉害👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575506351,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015483,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7e/bb/947c329a.jpg","nickname":"程序员小跃","note":"","ucode":"25BB96E0791A60","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70192,"discussion_content":"还有一个加密方式的选择，选择一个适合自己的，然后就如你说的，需要防止撞库","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575335792,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1738326,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/86/56/509535da.jpg","nickname":"守拙","note":"","ucode":"F594B2DA3F6D4F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69249,"discussion_content":"你很6呀!","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575275690,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1396951,"avatar":"https://static001.geekbang.org/account/avatar/00/15/50/d7/f82ed283.jpg","nickname":"辣么大","note":"","ucode":"AB308B6DCA0108","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1738326,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/86/56/509535da.jpg","nickname":"守拙","note":"","ucode":"F594B2DA3F6D4F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69283,"discussion_content":"过奖过奖。有些问题之前没有做过，有时真是不知道如何解决。例如老板给个任务，让你写个区块链数字货币转换技术的报告吧（我只听过区块链的概念而已）。这时只有多问问题，拆解任务了。😭","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575278723,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":69249,"ip_address":""},"score":69283,"extra":""}]},{"author":{"id":1161352,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b8/88/5c5d854c.jpg","nickname":"kelly0524","note":"","ucode":"2D24B8974B8E58","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69065,"discussion_content":"总结得很棒","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575256335,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1396951,"avatar":"https://static001.geekbang.org/account/avatar/00/15/50/d7/f82ed283.jpg","nickname":"辣么大","note":"","ucode":"AB308B6DCA0108","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1161352,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b8/88/5c5d854c.jpg","nickname":"kelly0524","note":"","ucode":"2D24B8974B8E58","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69286,"discussion_content":"一起进步！ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575278777,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":69065,"ip_address":""},"score":69286,"extra":""}]}]},{"had_liked":false,"id":158148,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1575338773,"is_pvip":false,"discussion_count":7,"race_medal":0,"score":"727424811797","product_id":100039001,"comment_content":"OAuth 2.0 + 网关（如Zuul）+ 认证中心 + AOP可以实现。<br>极客时间《微服务架构实战160讲》里介绍了OAuth 2.0企业级的解决方案，小争哥的方案适合快速落地。<br>实际业务中如果安全等级没这么高，直接生成Token鉴权就可以。通过业务模型规避风险：<br>1. 充值类业务，就算对方篡改接口，最终结果可以通调用证金融机构的接口验证是否有效，不会给公司带来损失。<br>2. 如果安全等级非常高，比如提现、转账可以通过发送手机短信，确保是本人操作。<br>3. 如果是商品信息查询类接口，防止第三方爬取数据，可以在调用一定次数后加入”人机验证“（输入图片识别码、拼图）。<br>4. 根据IP限制访问次数。<br>5. 服务器间调用可以绑定mac地址、IP。<br>6. 服务器、客户端通过架设私有VPN进行通信，将安全问题转移到VPN上，降低业务复杂度的同时还可以避免加解密带来的性能损耗，提升性能。<br>7. 调用接口时通过付费方式（如实名认证、银行四要素验证这些调用一次都是要收费的），防止恶意调用。<br>8. 通过独立加密硬件（如U盾）+ 独立密码验证器（Google验证器）+ 语音识别 + 面部识别（刷脸支付） + 指纹 + 多人同时输入动态秘钥（核打击时发射程序）。<br>9. 安全性会降低系统性能适可而止。<br>极客时间《左耳听风》专栏中介绍了亚马逊在设计开发微服务时，就已经做好了随时对外网开放的准备，由于没有阅读完整个专栏，不知道后面有没有详细介绍。","like_count":169,"discussions":[{"author":{"id":1092169,"avatar":"https://static001.geekbang.org/account/avatar/00/10/aa/49/51790edb.jpg","nickname":"落尘kira","note":"","ucode":"D203B519E43F85","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":243472,"discussion_content":"常见的平台设计中，通常都会使用签名鉴权的方式，比如用appid + salt（随机数）+ secret key + 各种你随意的参数 进行加密（比如MD5）后生成所谓的sign签名，本质上跟token一样，就是换种说法","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1587543453,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1351487,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9f/3f/a51e6376.jpg","nickname":"IT之眼","note":"","ucode":"AB0F40D96C38D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1092169,"avatar":"https://static001.geekbang.org/account/avatar/00/10/aa/49/51790edb.jpg","nickname":"落尘kira","note":"","ucode":"D203B519E43F85","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364433,"discussion_content":"我正这么使用的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617468513,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":243472,"ip_address":""},"score":364433,"extra":""}]},{"author":{"id":1591223,"avatar":"https://static001.geekbang.org/account/avatar/00/18/47/b7/b30472fd.jpg","nickname":"JerryZhu","note":"","ucode":"76850CD45786C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303345,"discussion_content":"所以说，安全这东西本身就不存在的，只是增加非法用户的成本而已， 不同级别应用的鉴权等级自然不同，大部分接口其实token够用","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1599213400,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1591223,"avatar":"https://static001.geekbang.org/account/avatar/00/18/47/b7/b30472fd.jpg","nickname":"JerryZhu","note":"","ucode":"76850CD45786C1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303361,"discussion_content":"精辟","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599217030,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":303345,"ip_address":""},"score":303361,"extra":""}]},{"author":{"id":1082785,"avatar":"https://static001.geekbang.org/account/avatar/00/10/85/a1/2442332c.jpg","nickname":"郭俊杰","note":"","ucode":"D328E5738A4413","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278965,"discussion_content":"核打击时发射程序都知道，厉害了我的哥。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591264613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1082785,"avatar":"https://static001.geekbang.org/account/avatar/00/10/85/a1/2442332c.jpg","nickname":"郭俊杰","note":"","ucode":"D328E5738A4413","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":279021,"discussion_content":"红警2里美军因为发射程序太简单，在自己基地炸了","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1591274309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":278965,"ip_address":""},"score":279021,"extra":""}]},{"author":{"id":1165364,"avatar":"https://static001.geekbang.org/account/avatar/00/11/c8/34/fb871b2c.jpg","nickname":"海罗沃德","note":"","ucode":"8704F1D6980FA0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":85746,"discussion_content":"整想買160講呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576571554,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159856,"user_name":"qinsi","can_delete":false,"product_type":"c1","uid":1667175,"ip_address":"","ucode":"090D9C4068FF12","user_header":"https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg","comment_is_top":false,"comment_ctime":1575812069,"is_pvip":true,"replies":[{"id":"61129","content":"嗯嗯，说的有道理~","user_name":"作者回复","comment_id":159856,"uid":"1190123","ip_address":"","utype":1,"ctime":1575896428,"user_name_real":"王争"}],"discussion_count":10,"race_medal":0,"score":"392417836005","product_id":100039001,"comment_content":"光拼url是不够的，只能覆盖如HTTP GET一类参数在url中的请求，对于如POST和PUT一类的请求，因为参数通常在body中，就没有参与token的生成。又因为这样的方案存在允许重放请求的时间间隔，就可能导致的情况是中间人截获了请求，在允许重放的时间间隔内任意修改body中的参数后发送，让接口鉴权形同虚设","like_count":91,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"王争","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477191,"discussion_content":"嗯嗯，说的有道理~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575896428,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1048095,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fe/1f/6a3f2abb.jpg","nickname":"Che Kwas","note":"","ucode":"4CDF9CA041859C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300266,"discussion_content":"安全是个很大的话题，比如token用来防伪造，HMAC用来防篡改，一次性动态口令用来防重放，等等。在一篇介绍如何需求分析的文章里，引入过多的安全概念容易把初学者吓跑了。用一个简简单单的token来带我们需求分析，我很喜欢小峥哥这种风格。","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1598003634,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1909094,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/21/66/85f247e2.jpg","nickname":"谢作作的男人","note":"","ucode":"4F220EA8AEBFB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285425,"discussion_content":"一般将token放在请求头中","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1592832775,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2625916,"avatar":"https://static001.geekbang.org/account/avatar/00/28/11/7c/1a54ff64.jpg","nickname":"Saving","note":"","ucode":"D3FF0773129364","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411441,"discussion_content":"也可以拦截body进行鉴权加密校验","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635929767,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2690172,"avatar":"","nickname":"Geek_设计模式之美","note":"","ucode":"59263416E65594","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383863,"discussion_content":"那么一般鉴权系统 鉴权成功了 是直接返回 true 还是开始调用下一个业务微服务啊?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626257135,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2347137,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d0/81/d5c8e46e.jpg","nickname":"snake","note":"","ucode":"47BFFE4D048156","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336168,"discussion_content":"token一般是放header，也可以和nonce配合使用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608520105,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1596532,"avatar":"https://static001.geekbang.org/account/avatar/00/18/5c/74/3f9e7c14.jpg","nickname":"foreveryi","note":"","ucode":"C322C02C8D1CEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":318669,"discussion_content":"鉴权接口只鉴定权限，不包含其他逻辑处理。所以绝大部分场景下GET请求足够了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603803023,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1042444,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/e8/0c/870d2de4.jpg","nickname":"敲代码的老王","note":"","ucode":"B641FB945F0C04","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1596532,"avatar":"https://static001.geekbang.org/account/avatar/00/18/5c/74/3f9e7c14.jpg","nickname":"foreveryi","note":"","ucode":"C322C02C8D1CEC","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":345496,"discussion_content":"意思是说你要求业务的大部分场景是get请求？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611728687,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":318669,"ip_address":""},"score":345496,"extra":""}]},{"author":{"id":1079780,"avatar":"https://static001.geekbang.org/account/avatar/00/10/79/e4/4b3b9587.jpg","nickname":"JJ","note":"","ucode":"85A77BB2262D58","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":315209,"discussion_content":"那是还需要对body的数据也一起加密生成token吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603251554,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2446024,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/GA9AqKGEdib009iaPw3FSluiaeibCXmen7yFIKicZB8qqEtczZJF2WmwBJ738eExnxDmPREIGjqc4BFVXiamyhuCZASw/132","nickname":"一缕阳光","note":"","ucode":"CA89C1B7CB16C0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1079780,"avatar":"https://static001.geekbang.org/account/avatar/00/10/79/e4/4b3b9587.jpg","nickname":"JJ","note":"","ucode":"85A77BB2262D58","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585381,"discussion_content":"当然","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661503577,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":315209,"ip_address":"广东"},"score":585381,"extra":""}]}]},{"had_liked":false,"id":157661,"user_name":"阿卡牛","can_delete":false,"product_type":"c1","uid":1022247,"ip_address":"","ucode":"0BC43A904C3199","user_header":"https://static001.geekbang.org/account/avatar/00/0f/99/27/47aa9dea.jpg","comment_is_top":false,"comment_ctime":1575244382,"is_pvip":false,"discussion_count":20,"race_medal":0,"score":"113244394078","product_id":100039001,"comment_content":"还有个风险，如果调用方是app，那有可能app被反编译，然后加密算法就被第三方知道了","like_count":26,"discussions":[{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70214,"discussion_content":"如果一定要安全，可以在每次调用的时候先给接口方充值1万元，然后用转账流水做参数加密，避免恶意调用。正常调用的可以在退还部分金额。","likes_number":13,"is_delete":false,"is_hidden":false,"ctime":1575336710,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":2028811,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f5/0b/73628618.jpg","nickname":"兔嘟嘟","note":"","ucode":"5A9042B4C7670C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285303,"discussion_content":"秀...","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1592800526,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":70214,"ip_address":""},"score":285303,"extra":""},{"author":{"id":1535005,"avatar":"https://static001.geekbang.org/account/avatar/00/17/6c/1d/203e2917.jpg","nickname":"zhao健枫的微信ID确实有点长啊","note":"","ucode":"46C5D8EBE40109","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299084,"discussion_content":"你这个逻辑清奇","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597558801,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":70214,"ip_address":""},"score":299084,"extra":""},{"author":{"id":2446024,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/GA9AqKGEdib009iaPw3FSluiaeibCXmen7yFIKicZB8qqEtczZJF2WmwBJ738eExnxDmPREIGjqc4BFVXiamyhuCZASw/132","nickname":"一缕阳光","note":"","ucode":"CA89C1B7CB16C0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585384,"discussion_content":"编码奇才啊！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661503686,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":70214,"ip_address":"广东"},"score":585384,"extra":""}]},{"author":{"id":1149425,"avatar":"https://static001.geekbang.org/account/avatar/00/11/89/f1/0550d38c.jpg","nickname":"XiaoBingBy","note":"","ucode":"21FF86A60FCE68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":100038,"discussion_content":"app 应该走网关  不会走对应服务","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1577235075,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1337598,"avatar":"https://static001.geekbang.org/account/avatar/00/14/68/fe/1353168d.jpg","nickname":"岁月","note":"","ucode":"29A2A2BC3C4FE4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":91108,"discussion_content":"这层楼不行啊, 都没搞清楚, 密码是你输入进去的, 不会放在代码里的. 加密算法被知道了也没什么关系, 而且高性能的加密算法都是不可逆算法, 比如哈希这种, 被知道了也无所谓.","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1576810582,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1134619,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLh8ubWQtDRa6exJtloSwibLliaejpF7434ficyggzukmXE63UlSPvbykoiaVDZo4CbDIIOQsCkicibyn9A/132","nickname":"涉蓝","note":"","ucode":"C1321E29E01625","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1337598,"avatar":"https://static001.geekbang.org/account/avatar/00/14/68/fe/1353168d.jpg","nickname":"岁月","note":"","ucode":"29A2A2BC3C4FE4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":164927,"discussion_content":"这个不是用户的密码，是对外开放的接口接入的应用的密码","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1581239384,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":91108,"ip_address":""},"score":164927,"extra":""},{"author":{"id":2276155,"avatar":"https://static001.geekbang.org/account/avatar/00/22/bb/3b/6e020a32.jpg","nickname":"多学多看多记","note":"","ucode":"0670C833007510","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1337598,"avatar":"https://static001.geekbang.org/account/avatar/00/14/68/fe/1353168d.jpg","nickname":"岁月","note":"","ucode":"29A2A2BC3C4FE4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":400931,"discussion_content":"层主意思应该当是截取到请求时，通过破解加密算法，可以随意修改url、请求体达到非法操作。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633490948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":91108,"ip_address":""},"score":400931,"extra":""}]},{"author":{"id":1240946,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ef/72/4e5fa762.jpg","nickname":"lifeCycle","note":"","ucode":"B227D4FD713EB3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300943,"discussion_content":"加密部分放到so中，并校验包名和签名证书能屏蔽一部分人破解","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598331939,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1366402,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIFicK7Bn88Lqte7rURlw3Lf53oAu1jhiciaVlKLib48dlIAOAF03L7tjQcx1ia5AJI26S7HIxwx780Qzw/132","nickname":"操盘手爱德华","note":"","ucode":"CAAF3E6DC9D5FD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":72656,"discussion_content":"混淆有啥作用，只是改下名字。该看还是看。主要还是把加密过程放so里面吧","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575512036,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1602866,"avatar":"https://static001.geekbang.org/account/avatar/00/18/75/32/781fc162.jpg","nickname":"有bear来","note":"","ucode":"D6764934D46EDC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306828,"discussion_content":"同样的问题 客户端限制方法相对还比较多  如果是网页访问接口 加密算法直接扔到js更容易被搞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600399287,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1082785,"avatar":"https://static001.geekbang.org/account/avatar/00/10/85/a1/2442332c.jpg","nickname":"郭俊杰","note":"","ucode":"D328E5738A4413","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278970,"discussion_content":"是个好问题，需要平衡考虑一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591265637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1239881,"avatar":"https://static001.geekbang.org/account/avatar/00/12/eb/49/bd914b5f.jpg","nickname":"公号-彤哥读源码","note":"","ucode":"C0D16E1BA12DA0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":111341,"discussion_content":"用char数组存放密钥，不要用String。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577792072,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1187122,"avatar":"https://static001.geekbang.org/account/avatar/00/12/1d/32/005c7ba4.jpg","nickname":"大熊","note":"","ucode":"8163EC5BC6A519","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":84157,"discussion_content":"加密放so，算法的因子可以定期变动","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576492304,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1236983,"avatar":"","nickname":"辉哥","note":"","ucode":"21A65F4EE6CD04","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":78814,"discussion_content":"APP可以使用应用厂商的加固技术，防止被反编译","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576024522,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1087243,"avatar":"https://static001.geekbang.org/account/avatar/00/10/97/0b/a943bcb3.jpg","nickname":"zhou","note":"","ucode":"E1CE8575B3F106","race_medal":3,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":71788,"discussion_content":"Android打包可以混淆，这样反编译也看不到","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575458100,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1242876,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f6/fc/171c4976.jpg","nickname":"光光","note":"","ucode":"A0F1D0134C935F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69445,"discussion_content":"给APP加个壳，不要让它那么容易反编译就可以了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575288222,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1639787,"avatar":"https://static001.geekbang.org/account/avatar/00/19/05/6b/d9d6d68b.jpg","nickname":"Vettel","note":"","ucode":"FB3E71DD1E8E7C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69354,"discussion_content":"同样的疑问，客户端知道加密算法不是很危险吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575282811,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1721718,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/45/76/2b1354f6.jpg","nickname":"张亚运","note":"","ucode":"2D0C667E0D7B07","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1639787,"avatar":"https://static001.geekbang.org/account/avatar/00/19/05/6b/d9d6d68b.jpg","nickname":"Vettel","note":"","ucode":"FB3E71DD1E8E7C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70672,"discussion_content":"客户端做混淆","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575375836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":69354,"ip_address":""},"score":70672,"extra":""}]},{"author":{"id":1308056,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f5/98/45374bb9.jpg","nickname":"小小小丶盘子","note":"","ucode":"FCD4520F1EF872","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69208,"discussion_content":"appSecret也可以看到吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575271466,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159425,"user_name":"Murrre","can_delete":false,"product_type":"c1","uid":1685995,"ip_address":"","ucode":"49644059B512BE","user_header":"https://static001.geekbang.org/account/avatar/00/19/b9/eb/6bdab896.jpg","comment_is_top":false,"comment_ctime":1575621145,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"108949803545","product_id":100039001,"comment_content":"https:&#47;&#47;github.com&#47;murreIsCoding&#47;auth<br>根据实战教程编写的，放到了github上","like_count":25},{"had_liked":false,"id":157677,"user_name":"安静的boy","can_delete":false,"product_type":"c1","uid":1196475,"ip_address":"","ucode":"F5F44B75228A85","user_header":"https://static001.geekbang.org/account/avatar/00/12/41/bb/21ce60d2.jpg","comment_is_top":false,"comment_ctime":1575246214,"is_pvip":false,"discussion_count":16,"race_medal":0,"score":"108949428614","product_id":100039001,"comment_content":"这个需求去年我就做过，给自己系统的对外接口开发一个鉴权的功能。因为之前了解过oauth2，当时就直接想到了oauth2鉴权来实现，就去学习了下，然后选择了“客户端模式”来实现，给各个应用分配appid和appsecrete，客户端拿appid和appsecrete请求有一定时效的token，应用拿到token后再跟appid和appsecrete一起来请求接口，服务端鉴权通过后即可调用。老师的例子是客户端定开始时间，我做的是服务端定开始时间。<br>不过当时分析的时候没有意识去一步步分析，就是一下子想起来就去做了，也没有去想着做什么优化，以后在遇到这种问题，应该多去分析，思考，才能让设计更优。","like_count":25,"discussions":[{"author":{"id":1396951,"avatar":"https://static001.geekbang.org/account/avatar/00/15/50/d7/f82ed283.jpg","nickname":"辣么大","note":"","ucode":"AB308B6DCA0108","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69288,"discussion_content":"中了，我也是撸起袖子上来就干\b😂","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1575278878,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1809802,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/8a/a2d34896.jpg","nickname":"一元(wx:abley1874)","note":"","ucode":"5E7A33642FC767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286119,"discussion_content":"token应该在客户端通过不可逆的加密算法生成，同时向APP端也可以通过混淆或加固等手段对token解密照成一定困难。\n然后就是token的数据应该 包含 时间戳+nonce（随机数）。每次请求成功后，保存nonce，例如放在redis和数据库中，再次请求如果nonce相同，则为重放攻击。\nredis中的nonce数据需要设置一个失效时间，以免数据越来越多。\n注意：这个nonce的失效时间应该设置大于或等于token的失效窗口期，这样才能防止nonce失效而导致二次重放攻击成功。因为nonce失效的前提是token已经失效。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1593064035,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1809802,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/8a/a2d34896.jpg","nickname":"一元(wx:abley1874)","note":"","ucode":"5E7A33642FC767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286118,"discussion_content":"感觉你这样行不通，我在你向服务端请求token时就给你重放了，那么我就可以随意请求有效token了哦？这个问题也就又回到了原点，那么请问在你请求有效token时如何鉴权呢？再有，你这个token的有效期设置长了，岂不是重放风险更大？设置短了，岂不是大量请求都需要向服务器先获取一次token再请求？ 最后，即使你token有效窗口期再短，也并不能有效防止重放呢。下面是我的一些想法，","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593063828,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1909094,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/21/66/85f247e2.jpg","nickname":"谢作作的男人","note":"","ucode":"4F220EA8AEBFB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285426,"discussion_content":"微信公众平台也是这么干的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592832844,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1250922,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIzGGthScz54sECZJKX3lgyjCATkgrvSt5N3eOsYB34jibCr3SkAX88QaZ5IVmME9Ec7VdkQGwRSPw/132","nickname":"哈哈哈","note":"","ucode":"8AC20A1C9C7DF8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":247396,"discussion_content":"可以可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587812944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1142211,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6d/c3/7ee7ad78.jpg","nickname":"右耳朵听不见","note":"","ucode":"856D2CCB342EF3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":179547,"discussion_content":"服务端一般不存token，也是一种平衡，安全和性能、成本","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582218701,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015483,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7e/bb/947c329a.jpg","nickname":"程序员小跃","note":"","ucode":"25BB96E0791A60","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70197,"discussion_content":"OMG，我自己的例子和你的差不多，哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575336063,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1018370,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8a/02/828938c9.jpg","nickname":"Frank","note":"","ucode":"7A488CC6FE15E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69434,"discussion_content":"请教一下，服务端定开始时间是怎么理解？服务端怎么知道客户端何时调用接口呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575287262,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":8,"child_discussions":[{"author":{"id":1196475,"avatar":"https://static001.geekbang.org/account/avatar/00/12/41/bb/21ce60d2.jpg","nickname":"安静的boy","note":"","ucode":"F5F44B75228A85","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1018370,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8a/02/828938c9.jpg","nickname":"Frank","note":"","ucode":"7A488CC6FE15E7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69729,"discussion_content":"服务端定开始时间就是客户端拿appid和appsecrete去服务端请求token的时候，服务端生成token和开始时间给客户端，客户端每次请求也要带这个时间，服务端会检验token和 时间是否过期。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1575297771,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":69434,"ip_address":""},"score":69729,"extra":""},{"author":{"id":1532404,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIvUlicgrWtibbDzwhLw5cQrDSy2JuE1mVvmXq11KQIwpLicgDuWfpp9asE0VCN6HhibPDWn7wBc2lfmA/132","nickname":"a、","note":"","ucode":"590FE8DB111492","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1196475,"avatar":"https://static001.geekbang.org/account/avatar/00/12/41/bb/21ce60d2.jpg","nickname":"安静的boy","note":"","ucode":"F5F44B75228A85","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70709,"discussion_content":"你好，为什么要带开始时间？比如服务端可以规定，这个token两个小时过期，当客户端请求token的时候，你生成token并放到缓存里，过期时间设置两个小时，当客户端带appid和token请求时，你就去缓存里拿，有就鉴权通过","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1575377527,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":69729,"ip_address":""},"score":70709,"extra":""},{"author":{"id":1196475,"avatar":"https://static001.geekbang.org/account/avatar/00/12/41/bb/21ce60d2.jpg","nickname":"安静的boy","note":"","ucode":"F5F44B75228A85","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1532404,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIvUlicgrWtibbDzwhLw5cQrDSy2JuE1mVvmXq11KQIwpLicgDuWfpp9asE0VCN6HhibPDWn7wBc2lfmA/132","nickname":"a、","note":"","ucode":"590FE8DB111492","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":71365,"discussion_content":"不过当时也考虑过放缓存里，但是又怕缓存会满。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575416740,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":70709,"ip_address":""},"score":71365,"extra":""}]}]},{"had_liked":false,"id":159180,"user_name":"小白","can_delete":false,"product_type":"c1","uid":1004755,"ip_address":"","ucode":"9BB9A170023CD8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/54/d3/46fd4aa3.jpg","comment_is_top":false,"comment_ctime":1575553701,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"87474899621","product_id":100039001,"comment_content":"防止重放攻击的方案在老师的基础做进一步的迭代设计:<br>1.要求客户端生成一个唯一的请求id，如以uuid方式<br>2.客户端在以sha等加密哈希方式生成token时，也将请求id加入其中<br>3.客户端也要将请求id作为参数传递到服务端，如果是rest api就是也要将请求id拼接到url参数中<br>4.服务端检查服务端的缓存中(可以是redis)是否有客户端传递的请求id，如果有，则判定为重放攻击，拒绝请求。如果没有，则将请求id放到缓存中同时设置在token失效的时间窗内缓存的请求id自动失效(如redis key的TTL)<br>这个实现思路是: 在时间窗内的重放攻击，以服务端在时间缓存了在时间窗内的所有请求id的形式来防护，而在时间窗外的重放攻击就是老师的方案中检查客户端传过来的时间(时间戳)和服务端当前时间(时间戳)相减的绝对值不能超过时间窗的长度来实现。另外，时间戳、请求id等都hash在了token<br>中，所有客户端是无法篡改的。<br>这个实现思路的缺点是: 改实现方案要求客户端的时间和服务端的时间之间的差距不能超过时间窗，如果时间窗设置为1分钟这种比较小的，则要求客户端时间和服务端时间不能超过1分钟，这个有点苛刻，比如客户端如app所在的手机的时间不准确了，但就差1分钟，将无法访问接口。如果时间窗设置过长，如30分钟，则要求服务端缓存中缓存最近30分钟的请求id，如果接口的访问并发挺大的话，缓存占用空间也将很大，需要评估。","like_count":20,"discussions":[{"author":{"id":2880438,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/f3/b6/59fe8406.jpg","nickname":"YANg","note":"","ucode":"59AB3520046E53","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571163,"discussion_content":"id如果只是用来在redis判断重放攻击的，那直接缓存token不就完了嘛，也不会增加client的调用复杂度","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652093003,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1148174,"avatar":"https://static001.geekbang.org/account/avatar/00/11/85/0e/e6640576.jpg","nickname":"阿声","note":"","ucode":"EEA5F2E9D4FC9C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555085,"discussion_content":"缓存空间可以使用布隆过滤器优化，但是就没法使用类似redis的自动过期了。我有个设想是安排两个根据时间窗口滑动的布隆过滤器，（以前以后，比如A过滤器是前30分钟窗口的，B过滤器是当前30分钟窗口的）每次数据过来，同时去这两个过滤器验证是否为重放攻击，验证通过则只更新当前窗口的过滤器。当然布隆过滤器存在误判。这个猜想也只是针对缓存空间优化这一点来的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646740886,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1779782,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL7LuzpjBx3skGGZUbbPaia3GibvicPSiciaozXGa8MM7Gj2TZ1wXg0y3cSsJpsAy0rHSWHIVd8boQ7BCw/132","nickname":"刘雨声","note":"","ucode":"9A4A01B2E3F1C7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371441,"discussion_content":"那直接缓存 token 不就好了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619769907,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Java垒墙工程师","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287807,"discussion_content":"客户端以服务器时间为准，请求服务端获取，自己不生产","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593562683,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158972,"user_name":"追风少年","can_delete":false,"product_type":"c1","uid":1305639,"ip_address":"","ucode":"0467648A908B18","user_header":"https://static001.geekbang.org/account/avatar/00/13/ec/27/827015c0.jpg","comment_is_top":false,"comment_ctime":1575508671,"is_pvip":false,"discussion_count":6,"race_medal":0,"score":"66000018111","product_id":100039001,"comment_content":"老师好，感觉在鉴权这个例子中，无论客户端如何加密，攻击方的逻辑都是不变的。只需要截获请求，并不需要解析token. <br>如果能在token中加入客户端的特征变量，比如ip或者mac，服务端获取特征变量，然后和appid等一起生成token再比较。这样会更好。要不然总感觉在自欺欺人","like_count":15,"discussions":[{"author":{"id":2736925,"avatar":"","nickname":"Geek_fa0102","note":"","ucode":"55A578CB6F0E85","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388814,"discussion_content":"分发密钥时就可以记录ip,协议,服务地址,端口等信息;需要激活对应的ip才可以使用鉴权服务(先认证再鉴权),这些属于细节优化;是一个逐步迭代的过程","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628995785,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2347137,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d0/81/d5c8e46e.jpg","nickname":"snake","note":"","ucode":"47BFFE4D048156","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336169,"discussion_content":"可以加入随机正整数配合时间戳做判断","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608520359,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1055334,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1a/66/2d9db9ed.jpg","nickname":"苦行僧","note":"","ucode":"726024A9A9CF44","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":102097,"discussion_content":"说的有道理 只要在很短的时间内截获 就可以立即发起重放攻击 根本不需要解析token","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577324775,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1255918,"avatar":"https://static001.geekbang.org/account/avatar/00/13/29/ee/fba11edf.jpg","nickname":"        ","note":"","ucode":"21028A49D81B06","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":78208,"discussion_content":"可以使用非对称加密 如RSA等等来解决这个问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575983766,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1997465,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/7a/99/4ac1d891.jpg","nickname":"猴子胖胖","note":"","ucode":"EFFE195C126E00","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1255918,"avatar":"https://static001.geekbang.org/account/avatar/00/13/29/ee/fba11edf.jpg","nickname":"        ","note":"","ucode":"21028A49D81B06","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":320763,"discussion_content":"非对称加密是用来认证的，不是用来鉴权的，很多人都用错了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604472275,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":78208,"ip_address":""},"score":320763,"extra":""},{"author":{"id":2446981,"avatar":"https://static001.geekbang.org/account/avatar/00/25/56/85/6da913fa.jpg","nickname":"LIFE l=new LIFE()","note":"","ucode":"729BACA3B7FD42","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1997465,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/7a/99/4ac1d891.jpg","nickname":"猴子胖胖","note":"","ucode":"EFFE195C126E00","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379082,"discussion_content":"我上个项目用的国密做登录的，也是认证吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623668410,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":320763,"ip_address":""},"score":379082,"extra":""}]}]},{"had_liked":false,"id":157725,"user_name":"Young！","can_delete":false,"product_type":"c1","uid":1025221,"ip_address":"","ucode":"2A658CEFD26011","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a4/c5/a53f8bbc.jpg","comment_is_top":false,"comment_ctime":1575250516,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"65999759956","product_id":100039001,"comment_content":"像今天的例子中，如果老板给我这样的需求，我第一反应就是去想怎么实现，用什么技术实现，有什么现成的框架，而不是去先思考「用户名密码登录验证」这最基础的第一步。刚开始脑子就一团浆糊，知道完成也是在便实现便理思路，这样浪费时间而且最后也没有自己完整的思路过程。<br><br>以后还是要先理清思路，理清需求再去考虑每一小需求实现的技术。","like_count":15,"discussions":[{"author":{"id":2347137,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d0/81/d5c8e46e.jpg","nickname":"snake","note":"","ucode":"47BFFE4D048156","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336170,"discussion_content":"确实，我也有这毛病","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608520381,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157636,"user_name":"黄林晴","can_delete":false,"product_type":"c1","uid":1362631,"ip_address":"","ucode":"B15C38AECDA88F","user_header":"https://static001.geekbang.org/account/avatar/00/14/ca/c7/00e544c2.jpg","comment_is_top":false,"comment_ctime":1575216971,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"65999726411","product_id":100039001,"comment_content":"打卡<br>充血模型那两节还没完全理解，加油","like_count":15,"discussions":[{"author":{"id":1237135,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e0/8f/fd6d3c93.jpg","nickname":"Java程序员","note":"","ucode":"7768C615962F14","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":68965,"discussion_content":"充血就是把service层做薄，不要写业务逻辑，逻辑写在bo层，service负责调用数据库里的值传给bo做逻辑判断。我是这么理解的","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575248437,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1338088,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6a/e8/4bb87c34.jpg","nickname":"月马穿关","note":"","ucode":"2CE20CA1EB827D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":169603,"discussion_content":"与数据相关的业务逻辑编写在Domain里，与其他的业务交互的动作在service里面串联起来","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581633668,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1052859,"avatar":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","nickname":"Demon.Lee","note":"","ucode":"7F0E5493A8E345","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70180,"discussion_content":"service层是把业务流程串起来跑，可以理解为面向过程编程，domain里面把相关操作封装是面向对象，我们的目地就是尽量按照面向对象的方式干。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575335098,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1161271,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b8/37/98991aeb.jpg","nickname":"不似旧日","note":"","ucode":"DF4C5E3AB9570C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69164,"discussion_content":"对， 把逻辑拆到bo中，service与dao交互。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575266799,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157658,"user_name":"Richard Zhong","can_delete":false,"product_type":"c1","uid":1213417,"ip_address":"","ucode":"F91A8EE5992FAB","user_header":"https://static001.geekbang.org/account/avatar/00/12/83/e9/3016ed84.jpg","comment_is_top":false,"comment_ctime":1575244079,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"57409818927","product_id":100039001,"comment_content":"我看到过的最好的设计模式课","like_count":13,"discussions":[{"author":{"id":1054152,"avatar":"https://static001.geekbang.org/account/avatar/00/10/15/c8/65ed960c.jpg","nickname":"Mark","note":"","ucode":"0DF6D68131F79B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":199232,"discussion_content":"最好的 有点夸张吧 讲的浅显倒是真的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583573477,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157651,"user_name":"刘大明","can_delete":false,"product_type":"c1","uid":1035081,"ip_address":"","ucode":"83C063FBD9BF2B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cb/49/0b9ffc8e.jpg","comment_is_top":false,"comment_ctime":1575239263,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"44524912223","product_id":100039001,"comment_content":"一般遇到这种需求不是特别明确的，先自己理解第一遍需求，有一个大概的思路，然后在和产品经理确认是不是这样。需求确认之前在按照争哥说的需求分析，对需求做任务分解，将需求分解成一个个小的任务点，每个小任务都是很容易执行的。就算开发过程中被打断了，也不要紧。任务分解的尽量小，这样重新回到开发状态也就越容易。","like_count":10},{"had_liked":false,"id":158785,"user_name":"板栗饼","can_delete":false,"product_type":"c1","uid":1405020,"ip_address":"","ucode":"2DA25B053D7721","user_header":"https://static001.geekbang.org/account/avatar/00/15/70/5c/ebb274eb.jpg","comment_is_top":false,"comment_ctime":1575450906,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"35935189274","product_id":100039001,"comment_content":"课依然很好，就是有些想念算法之美里每节画插图的小姐姐","like_count":8},{"had_liked":false,"id":158899,"user_name":"你好旅行者","can_delete":false,"product_type":"c1","uid":1154101,"ip_address":"","ucode":"5C72A428DC28F3","user_header":"https://static001.geekbang.org/account/avatar/00/11/9c/35/9dc79371.jpg","comment_is_top":false,"comment_ctime":1575472704,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"23050309184","product_id":100039001,"comment_content":"我觉的老师的方案也没有增加攻击方的试错成本吧，我每次截获调用接口的请求，获取你调用的URL，在这个过期时间内仍然可以非法调用微服务方的接口啊。做了这么多的加密，可是对于攻击方，我的攻击成本增加在哪里了呢？<br><br>请老师解答一下哈","like_count":5,"discussions":[{"author":{"id":1730626,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJvm1JYIDcS74s4cEYxA1PXMqjortVXEjUKyGQcPvibNJ4EAuksIa6uoHgr6G1yRqAM2KtP3yicKgTA/132","nickname":"小妖","note":"","ucode":"49C01DBFADF101","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":87497,"discussion_content":"感觉作者讲的有点小问题，正常加密的数据一般不用url而是关键数据，也就是body，这样能防止数据篡改，因为即使请求被拦截，也无法进行数据篡改，另外一般而言一般对接第三方会规定ip白名单，非白名单中的数据是不允许请求的","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1576670890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157915,"user_name":"QQ怪","can_delete":false,"product_type":"c1","uid":1211223,"ip_address":"","ucode":"1A39B8433D9208","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","comment_is_top":false,"comment_ctime":1575282361,"is_pvip":false,"replies":[{"id":"60714","content":"后端可以对没有传递token的不做校验","user_name":"作者回复","comment_id":157915,"uid":"1190123","ip_address":"","utype":1,"ctime":1575429650,"user_name_real":"王争"}],"discussion_count":8,"race_medal":0,"score":"23050118841","product_id":100039001,"comment_content":"老师，我们公司有个重构项目，也是要最客户端鉴权，但是旧客户端没有做token之类的鉴权传token，但现在要做，如何做到兼容旧客户端做鉴权呢？","like_count":5,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"王争","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476575,"discussion_content":"后端可以对没有传递token的不做校验","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575429650,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2736925,"avatar":"","nickname":"Geek_fa0102","note":"","ucode":"55A578CB6F0E85","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388815,"discussion_content":"增加接口版本,新版本走token;旧版本走之前的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628996063,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2347137,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d0/81/d5c8e46e.jpg","nickname":"snake","note":"","ucode":"47BFFE4D048156","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336172,"discussion_content":"判断一下就好了，新的鉴权，旧的直接放过","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608520547,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2352268,"avatar":"","nickname":"1023","note":"","ucode":"E637ED780CDD2C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332024,"discussion_content":"新老客户端在URL上区分下，新URL统一走鉴权，成功后调原有接口。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607047453,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1211223,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","nickname":"QQ怪","note":"","ucode":"1A39B8433D9208","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":71525,"discussion_content":"那岂不是黑客可以利用这点，无限制访问接口?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575429862,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1402322,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epEbrWwrlSUzSF5Cru29ZT8LyDCNTglzblVPAb4AuH9gOkc0mibAM9z5MvRxDXvFI3g5FW6OnLSkqA/132","nickname":"风AA","note":"","ucode":"A738617C2FA3E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70404,"discussion_content":"服务端设置 cookie?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575353195,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1211223,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","nickname":"QQ怪","note":"","ucode":"1A39B8433D9208","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1402322,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epEbrWwrlSUzSF5Cru29ZT8LyDCNTglzblVPAb4AuH9gOkc0mibAM9z5MvRxDXvFI3g5FW6OnLSkqA/132","nickname":"风AA","note":"","ucode":"A738617C2FA3E8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70496,"discussion_content":"服务端怎么设置cookie，不是客户端设置吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575362459,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":70404,"ip_address":""},"score":70496,"extra":""},{"author":{"id":1402322,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epEbrWwrlSUzSF5Cru29ZT8LyDCNTglzblVPAb4AuH9gOkc0mibAM9z5MvRxDXvFI3g5FW6OnLSkqA/132","nickname":"风AA","note":"","ucode":"A738617C2FA3E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1211223,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","nickname":"QQ怪","note":"","ucode":"1A39B8433D9208","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":244848,"discussion_content":"客户端怎么设置，原生的浏览器不允许修改 cookie 的？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587636392,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":70496,"ip_address":""},"score":244848,"extra":""}]}]},{"had_liked":false,"id":159510,"user_name":"丁丁历险记","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1575642670,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18755511854","product_id":100039001,"comment_content":"1 推荐写markdown 进行描述<br>2 分析将做什么转为怎么做，并将怎么做拆解的足够小，单步可验。<br>3 过程是渐进的，逐步分解","like_count":4},{"had_liked":false,"id":157789,"user_name":"不似旧日","can_delete":false,"product_type":"c1","uid":1161271,"ip_address":"","ucode":"DF4C5E3AB9570C","user_header":"https://static001.geekbang.org/account/avatar/00/11/b8/37/98991aeb.jpg","comment_is_top":false,"comment_ctime":1575259183,"is_pvip":false,"replies":[{"id":"60719","content":"token是单向加密算法生成的 无法解密的","user_name":"作者回复","comment_id":157789,"uid":"1190123","ip_address":"","utype":1,"ctime":1575432268,"user_name_real":"王争"}],"discussion_count":4,"race_medal":0,"score":"18755128367","product_id":100039001,"comment_content":"有个问题:  通过同样的 token 生成算法，在服务端生成新的 token，与调用方传递过来的 token 比对。这个做法是不是有点多余？ 能把token解密难道不能说明token没有问题么？ ","like_count":4,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"王争","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476530,"discussion_content":"token是单向加密算法生成的 无法解密的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575432268,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1402322,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epEbrWwrlSUzSF5Cru29ZT8LyDCNTglzblVPAb4AuH9gOkc0mibAM9z5MvRxDXvFI3g5FW6OnLSkqA/132","nickname":"风AA","note":"","ucode":"A738617C2FA3E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70425,"discussion_content":"做 token 失效的时候可以用，比如用户修改了密码就要重新登录之类的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575355464,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1308056,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f5/98/45374bb9.jpg","nickname":"小小小丶盘子","note":"","ucode":"FCD4520F1EF872","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69213,"discussion_content":"并不是解密token，会把其他参数都带上。然后后台用appSecret加密，在判断两个token是否一致","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575271606,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2552930,"avatar":"https://static001.geekbang.org/account/avatar/00/26/f4/62/9807eb30.jpg","nickname":"安安","note":"","ucode":"5D01225E6750BA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1308056,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f5/98/45374bb9.jpg","nickname":"小小小丶盘子","note":"","ucode":"FCD4520F1EF872","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":369382,"discussion_content":"两边判断加密后的token是否一致","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1619014649,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":69213,"ip_address":""},"score":369382,"extra":""}]}]},{"had_liked":false,"id":158754,"user_name":"马超","can_delete":false,"product_type":"c1","uid":1254552,"ip_address":"","ucode":"38E328A993F9CF","user_header":"https://static001.geekbang.org/account/avatar/00/13/24/98/24cb8ca0.jpg","comment_is_top":false,"comment_ctime":1575446670,"is_pvip":false,"replies":[{"id":"61147","content":"我理解的面向对象分析，就是需求分析。","user_name":"作者回复","comment_id":158754,"uid":"1190123","ip_address":"","utype":1,"ctime":1575897945,"user_name_real":"王争"}],"discussion_count":1,"race_medal":0,"score":"14460348558","product_id":100039001,"comment_content":"这个鉴权功能需求分析的很好，但是和面向对象分析没有多大关系吧。","like_count":3,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"王争","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476835,"discussion_content":"我理解的面向对象分析，就是需求分析。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575897945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157822,"user_name":"陈迎春","can_delete":false,"product_type":"c1","uid":1443663,"ip_address":"","ucode":"2870BA6D6E5B1E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIang00R9vkklnkFCLhzRysNfocr0sLnCdoZwOT3UkulAPefk5BDvd0PfIeQSODSQg1DjKWUmJOaA/132","comment_is_top":false,"comment_ctime":1575265943,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"14460167831","product_id":100039001,"comment_content":"我主要是嵌入式软件开发的，这个鉴权功能基本理解了，但是前面的mvc，包括贫血和充血，还是挺不明白的，平时没有用过，理解有些困难，暂时先放放吧，等后面再回过来学习","like_count":3,"discussions":[{"author":{"id":1545971,"avatar":"https://static001.geekbang.org/account/avatar/00/17/96/f3/b06a899c.jpg","nickname":"天竺葵柠檬橙花柚","note":"","ucode":"0F3620FABAEECB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":219989,"discussion_content":"同做嵌入式开发的，一起加油💪","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585830303,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157666,"user_name":"梦倚栏杆","can_delete":false,"product_type":"c1","uid":1095857,"ip_address":"","ucode":"BDEB97F2822445","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/bvj76PmeUvW8kokyu91IZWuRATKmabibDWbzAj2TajeEic7WvKCJOLaOh6jibEmdQ36EO3sBUZ0HibAiapsrZo64U8w/132","comment_is_top":false,"comment_ctime":1575244705,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14460146593","product_id":100039001,"comment_content":"我是做业务需求的：我们期望于产品画清楚流程图，表达好规则描述，<br>a.有些产品做的足够细致时，rd照着流程实现就好了。<br>b.有些产品表达的很粗糙，rd会按照自己的梳理，然后向产品要相关时刻的规则，最后rd再照着实现。<br><br>感觉针对一个具体业务需求时，貌似技术实现到底多么优雅取决于与之合作的产品，总觉得不对，但貌似又无能为力","like_count":3},{"had_liked":false,"id":310673,"user_name":"王轲","can_delete":false,"product_type":"c1","uid":1444126,"ip_address":"","ucode":"65065BFFC409F5","user_header":"https://static001.geekbang.org/account/avatar/00/16/09/1e/db996fd7.jpg","comment_is_top":false,"comment_ctime":1630834004,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"10220768596","product_id":100039001,"comment_content":"为什么那么纠结重放攻击…我觉得重放攻击的防御应该是更下面一层软件应该关心的，而不是鉴权这个模块应该关心的，比如TLS本身就可以避免重放攻击","like_count":2},{"had_liked":false,"id":231415,"user_name":"微末凡尘","can_delete":false,"product_type":"c1","uid":1099525,"ip_address":"","ucode":"25EDFD0914D0F4","user_header":"https://static001.geekbang.org/account/avatar/00/10/c7/05/19c5c255.jpg","comment_is_top":false,"comment_ctime":1593671514,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10183606106","product_id":100039001,"comment_content":"让我想到了微信登陆接口中的code，一次有效。5分钟之内有效，最近在研究公司的sdk，服务端先生成token，下发给客户端，游戏服务端拿到token，发送到服务端，验证token，走完整个环路，才算登录成功","like_count":2},{"had_liked":false,"id":158910,"user_name":"修缘","can_delete":false,"product_type":"c1","uid":1035476,"ip_address":"","ucode":"72AB60C1DC88C0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cc/d4/f1f84a96.jpg","comment_is_top":false,"comment_ctime":1575476692,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10165411284","product_id":100039001,"comment_content":"遵循合适原则、简单原则、演化原则三个原则，有助于做出最好的选择。在实际的项目中，我们要结合业务 、技术、成本三个方面综合考虑具体的方案。","like_count":2},{"had_liked":false,"id":158584,"user_name":"xuanyuan","can_delete":false,"product_type":"c1","uid":1113737,"ip_address":"","ucode":"1EC79B9372868F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI2icbib62icXtibTkThtyRksbuJLoTLMts7zook2S30MiaBtbz0f5JskwYicwqXkhpYfvCpuYkcvPTibEaQ/132","comment_is_top":false,"comment_ctime":1575420890,"is_pvip":false,"replies":[{"id":"60676","content":"那估计还有会议讨论 立项之类的流程吧","user_name":"作者回复","user_name_real":"王争","uid":"1190123","ctime":1575423667,"ip_address":"","comment_id":158584,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10165355482","product_id":100039001,"comment_content":"不是应该先有调研过程吗？直接就开始设计的？","like_count":2,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"王争","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476774,"discussion_content":"那估计还有会议讨论 立项之类的流程吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575423667,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2223041,"avatar":"","nickname":"Geek_7e0db8","note":"","ucode":"4549EE23AECAFC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":324091,"discussion_content":"领导急着要，说明这些都可以省了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605056323,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157853,"user_name":"teddytyy","can_delete":false,"product_type":"c1","uid":1268738,"ip_address":"","ucode":"E1569D81A4154E","user_header":"https://static001.geekbang.org/account/avatar/00/13/5c/02/e7af1750.jpg","comment_is_top":false,"comment_ctime":1575270652,"is_pvip":false,"replies":[{"id":"60695","content":"放到里面的目的是让每次生成的token都不一样","user_name":"作者回复","user_name_real":"王争","uid":"1190123","ctime":1575425039,"ip_address":"","comment_id":157853,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10165205244","product_id":100039001,"comment_content":"老师，时间戳要不要拼接在url里产生token应该都可以吧？服务端反正是按照url里解析的时间戳去过滤的","like_count":2,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"王争","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476552,"discussion_content":"放到里面的目的是让每次生成的token都不一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575425039,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1087243,"avatar":"https://static001.geekbang.org/account/avatar/00/10/97/0b/a943bcb3.jpg","nickname":"zhou","note":"","ucode":"E1CE8575B3F106","race_medal":3,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":71798,"discussion_content":"防止截取后，重复攻击","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575458683,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157722,"user_name":"Lyre","can_delete":false,"product_type":"c1","uid":1275759,"ip_address":"","ucode":"61AB16508AFFDA","user_header":"https://static001.geekbang.org/account/avatar/00/13/77/6f/454951d2.jpg","comment_is_top":false,"comment_ctime":1575250227,"is_pvip":false,"replies":[{"id":"60723","content":"是要发送请求到服务器的时候才生成token ","user_name":"作者回复","user_name_real":"王争","uid":"1190123","ctime":1575432619,"ip_address":"","comment_id":157722,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10165184819","product_id":100039001,"comment_content":"client端生成的token在时间窗口内，假如用户在操作中停留了1分钟（时间窗口），那token就过期了吗？ ","like_count":2,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"王争","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476507,"discussion_content":"是要发送请求到服务器的时候才生成token ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575432619,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1275759,"avatar":"https://static001.geekbang.org/account/avatar/00/13/77/6f/454951d2.jpg","nickname":"Lyre","note":"","ucode":"61AB16508AFFDA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":71573,"discussion_content":"哦 理解错了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575434560,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1216284,"avatar":"https://static001.geekbang.org/account/avatar/00/12/8f/1c/1c728388.jpg","nickname":"皮卡皮卡","note":"","ucode":"D440EEC7301C76","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69138,"discussion_content":"每次发送都会携带发送时的时间戳，和用户停留多久没关系","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575264658,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157690,"user_name":"2018","can_delete":false,"product_type":"c1","uid":1107371,"ip_address":"","ucode":"4C2CD47AD70177","user_header":"https://static001.geekbang.org/account/avatar/00/10/e5/ab/6fab2492.jpg","comment_is_top":false,"comment_ctime":1575247353,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"10165181945","product_id":100039001,"comment_content":"打卡，依旧在理解贫血和充血模型","like_count":2,"discussions":[{"author":{"id":1142211,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6d/c3/7ee7ad78.jpg","nickname":"右耳朵听不见","note":"","ucode":"856D2CCB342EF3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":179549,"discussion_content":"贫血和充血都是相对于BO对象，也就是domain对象而言，贫血就是一堆getset方法，充血包括业务逻辑在里边","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582218929,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1107371,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e5/ab/6fab2492.jpg","nickname":"2018","note":"","ucode":"4C2CD47AD70177","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1142211,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6d/c3/7ee7ad78.jpg","nickname":"右耳朵听不见","note":"","ucode":"856D2CCB342EF3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":179965,"discussion_content":"感谢解惑","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582266164,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":179549,"ip_address":""},"score":179965,"extra":""}]}]},{"had_liked":false,"id":200044,"user_name":"QFY","can_delete":false,"product_type":"c1","uid":1144134,"ip_address":"","ucode":"5EAA14772BA908","user_header":"https://static001.geekbang.org/account/avatar/00/11/75/46/815e56c8.jpg","comment_is_top":false,"comment_ctime":1585536676,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5880503972","product_id":100039001,"comment_content":"如果遇到这种需求，我一般是直接去找比较成熟的解决方案，参照着写，自己思考的地方就少了很多，不是一个很好的习惯","like_count":1},{"had_liked":false,"id":170471,"user_name":"eason2017","can_delete":false,"product_type":"c1","uid":1009422,"ip_address":"","ucode":"E070BA624FA490","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/0e/c77ad9b1.jpg","comment_is_top":false,"comment_ctime":1578618805,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5873586101","product_id":100039001,"comment_content":"这个需求上还有一个小问题，就是这个时间戳有效期是一分钟，感觉，不同手机的时间和系统的时间是存在差异的，可能还没到过期时服务端校验时间有效性时，已经认为过期了。","like_count":1,"discussions":[{"author":{"id":1897148,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f2/bc/ffc7ad67.jpg","nickname":"Chris Zou","note":"","ucode":"B6DFC71C1DD8B7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286396,"discussion_content":"上次我们有一个类似的需求，也是有这个问题，不知道后面怎么解决的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593160972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158874,"user_name":"阿冰777","can_delete":false,"product_type":"c1","uid":1373893,"ip_address":"","ucode":"F365EB44F971F3","user_header":"https://static001.geekbang.org/account/avatar/00/14/f6/c5/6329ddcc.jpg","comment_is_top":false,"comment_ctime":1575468163,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5870435459","product_id":100039001,"comment_content":"Day10: 先设计，在完成核心功能试验，设计时要考虑以后可能的改动，要考虑最常用场景的性能优化，如果这个功能和已有功能有重叠，考虑进行重构，如果没有重叠但是有使用相同的数据，要考虑到是否有数据不一致的bug,设计时还要考虑到极端情况，最好先写出测试case。","like_count":1},{"had_liked":false,"id":157896,"user_name":"PHP是世界上最好的需要","can_delete":false,"product_type":"c1","uid":1655326,"ip_address":"","ucode":"EE23A54B831D17","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIma3PJUyqDEQKt40nEh3Jt840af6hKnuK8k8dIscm43EUzJwLvynbxRnvO9Ivibv7KssUSqoBdY1w/132","comment_is_top":false,"comment_ctime":1575278705,"is_pvip":false,"replies":[{"id":"60686","content":"为什么不懂呢？理论上讲这个需求比较简单的 不懂可以去找需求提出方了解","user_name":"作者回复","user_name_real":"王争","uid":"1190123","ctime":1575424629,"ip_address":"","comment_id":157896,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5870246001","product_id":100039001,"comment_content":"在不懂接口鉴权的需求下，很难总结出”粗糙“的功能框架，这个时候如何解决呢？","like_count":1,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"王争","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476566,"discussion_content":"为什么不懂呢？理论上讲这个需求比较简单的 不懂可以去找需求提出方了解","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575424629,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1655326,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIma3PJUyqDEQKt40nEh3Jt840af6hKnuK8k8dIscm43EUzJwLvynbxRnvO9Ivibv7KssUSqoBdY1w/132","nickname":"PHP是世界上最好的需要","note":"","ucode":"EE23A54B831D17","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":74735,"discussion_content":"老师你理解错了，我得意思是假设","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575682506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157887,"user_name":"杰洛特","can_delete":false,"product_type":"c1","uid":1098146,"ip_address":"","ucode":"46D0574654F8AC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqEacia8yO1dR5Tal9B7w8PzTRrViajlAvDph96OqcuBGe29icbXOibhibGmaBcO7BfpVia0Y8ksZwsuAYQ/132","comment_is_top":false,"comment_ctime":1575277439,"is_pvip":false,"replies":[{"id":"60687","content":"是的 要统一加密算法","user_name":"作者回复","user_name_real":"王争","uid":"1190123","ctime":1575424647,"ip_address":"","comment_id":157887,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5870244735","product_id":100039001,"comment_content":"请问老师，token 在 client 端生成的话，是否意味着要告知 client 端加密算法？然后才能在 server 端解密到信息","like_count":1,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"王争","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476562,"discussion_content":"是的 要统一加密算法","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575424647,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015754,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7f/ca/ea85bfdd.jpg","nickname":"helloworld","note":"","ucode":"00DF2FEC58D2E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":83618,"discussion_content":"每次看到这种设计方案，我都下意识地想到是不是算法也可能被第三方窃取了😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576454107,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157875,"user_name":"我又不乱来","can_delete":false,"product_type":"c1","uid":1221356,"ip_address":"","ucode":"737405E2339A8D","user_header":"https://static001.geekbang.org/account/avatar/00/12/a2/ec/205fd50c.jpg","comment_is_top":false,"comment_ctime":1575275347,"is_pvip":false,"replies":[{"id":"60694","content":"下一节课有答案 你可以看下","user_name":"作者回复","user_name_real":"王争","uid":"1190123","ctime":1575424999,"ip_address":"","comment_id":157875,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5870242643","product_id":100039001,"comment_content":"老师现在我有一个疑问，基于充血模式，我有一个domain要查询数据库，如何做比较合适呢？","like_count":1,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"王争","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476557,"discussion_content":"下一节课有答案 你可以看下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575424999,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157744,"user_name":"pines","can_delete":false,"product_type":"c1","uid":1200708,"ip_address":"","ucode":"7B925605B36B4E","user_header":"https://static001.geekbang.org/account/avatar/00/12/52/44/de7f2b98.jpg","comment_is_top":false,"comment_ctime":1575254155,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5870221451","product_id":100039001,"comment_content":"前一段写了一套 open api，使用鉴权方式就是老师描述的这种基于AK&#47;SK的签名验证。这种方式感觉有一个问题就是如果是一个具有很大请求内容的post方法，签名的成本感觉还是挺高的。还有一种方式是服务端给客户端下发一个有一定时长的token，然后客户端的每次请求都带着这个token。","like_count":1,"discussions":[{"author":{"id":1402322,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epEbrWwrlSUzSF5Cru29ZT8LyDCNTglzblVPAb4AuH9gOkc0mibAM9z5MvRxDXvFI3g5FW6OnLSkqA/132","nickname":"风AA","note":"","ucode":"A738617C2FA3E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70406,"discussion_content":"不对称加密算法来加密 对称算法的私钥，平时用私钥进行 body 体加密","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575353290,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157694,"user_name":"L🚲🐱","can_delete":false,"product_type":"c1","uid":1577856,"ip_address":"","ucode":"08A012739614DE","user_header":"https://static001.geekbang.org/account/avatar/00/18/13/80/2c9da1b1.jpg","comment_is_top":false,"comment_ctime":1575247737,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5870215033","product_id":100039001,"comment_content":"前面讲的充血模型还有点不理解, 准备这几天写个 demo 实践一下, 加深理解","like_count":1,"discussions":[{"author":{"id":1119911,"avatar":"https://static001.geekbang.org/account/avatar/00/11/16/a7/b3491533.jpg","nickname":"酸菜泡面","note":"","ucode":"74592566C52E74","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":155723,"discussion_content":"对照着mvc的例子写一个贫血的demo，反过来就容易理解充血模型了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580278677,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1131957,"avatar":"https://static001.geekbang.org/account/avatar/00/11/45/b5/c3cfb198.jpg","nickname":"王振华 程序员","note":"","ucode":"31BB337642B882","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70186,"discussion_content":"我也准备找本java的书，跟着敲出个小项目，估计就理解了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575335628,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357637,"user_name":"37.2","can_delete":false,"product_type":"c1","uid":2219666,"ip_address":"广东","ucode":"3B20A30414BD6E","user_header":"https://static001.geekbang.org/account/avatar/00/21/de/92/659322ad.jpg","comment_is_top":false,"comment_ctime":1663508845,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1663508845","product_id":100039001,"comment_content":"1. 需求调研，不管是谁给的需求，一定要弄清楚他的诉求是什么，要做成什么样子;产品类需求就找熟悉该类产品的人调研，技术类需求就找对应的类似技术产品，最终产出产品方案<br>2. 进行技术评估，根据当前基础设施和已有能力进行评估，最终确定项目的大致节奏和工期<br>3. 进行技术方案分析和设计，多设计几套方案；最好的方案不一定最适合当下，所以就可能进行迭代升级<br>4. 评估当前方案对现有功能的影响，如果是新的需求，那可以不评估<br>5. 然后及时编码实现，代码CR，代码优化，自测，他侧<br>6. 回归，发布","like_count":0},{"had_liked":false,"id":356668,"user_name":"Sherk","can_delete":false,"product_type":"c1","uid":2156245,"ip_address":"中国香港","ucode":"AFE3E7F158258D","user_header":"https://static001.geekbang.org/account/avatar/00/20/e6/d5/4f1fc074.jpg","comment_is_top":false,"comment_ctime":1662481022,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1662481022","product_id":100039001,"comment_content":"思考题： 开放性问题，完全凭自己的经验回答。首先有问题得到本质是解决什么，再联想有没有类似的工具可以解决。<br><br>本节主要讲了如何进行面向对象分析。<br>     1.拿到需求后，要具体抽出要干什么。先得到一个简单方案，然后再看方案存在的 问题，一步一步优化。<br>    2.","like_count":0},{"had_liked":false,"id":348114,"user_name":"roie","can_delete":false,"product_type":"c1","uid":1371983,"ip_address":"","ucode":"0CC9598364820A","user_header":"https://static001.geekbang.org/account/avatar/00/14/ef/4f/8b7e1f1e.jpg","comment_is_top":false,"comment_ctime":1654751548,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654751548","product_id":100039001,"comment_content":"sha算法，不属于加密算法，它是hash算法，hash操作是不可逆的，不知是否正确✅","like_count":0},{"had_liked":false,"id":345622,"user_name":"泥鳅儿","can_delete":false,"product_type":"c1","uid":1323000,"ip_address":"","ucode":"26B47C8FC67615","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ojfRyNRvy1x3Mia0nssz6CNPHrHXwPPmibvds1URgoHQuKXrGiaxrEbsT6sAvuK4N4AOicySh8S9iaWcOLjteOl6Kgg/132","comment_is_top":false,"comment_ctime":1652436472,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652436472","product_id":100039001,"comment_content":"争哥，如果调用方的系统时间与接口服务端的系统时间不一致，那校验token是否在时间窗口期是不是就有问题，可能本来有权限访问的客户端，由于系统时间不一致，可能导致也没权限调用接口了，是吗","like_count":0},{"had_liked":false,"id":343340,"user_name":"恬毅","can_delete":false,"product_type":"c1","uid":1015240,"ip_address":"","ucode":"914ED16F3BE714","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7d/c8/e4727683.jpg","comment_is_top":false,"comment_ctime":1650789817,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650789817","product_id":100039001,"comment_content":"之前某节面试就被问到如何设计一个12306网站","like_count":0},{"had_liked":false,"id":339855,"user_name":"Geek_783504","can_delete":false,"product_type":"c1","uid":2743789,"ip_address":"","ucode":"549D3F0549743C","user_header":"https://static001.geekbang.org/account/avatar/00/29/dd/ed/f6c5432b.jpg","comment_is_top":false,"comment_ctime":1648437785,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1648437785","product_id":100039001,"comment_content":"现提出一套解决方案，分析不足缺陷，在后继续迭代几个版本，最终得到具体的方案","like_count":0},{"had_liked":false,"id":339774,"user_name":"白云苍饭勇往直前！","can_delete":false,"product_type":"c1","uid":2757030,"ip_address":"","ucode":"11EA43531E2845","user_header":"https://static001.geekbang.org/account/avatar/00/2a/11/a6/50c3e4a2.jpg","comment_is_top":false,"comment_ctime":1648374790,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1648374790","product_id":100039001,"comment_content":"leader丢需求的场景简直不要太真实","like_count":0},{"had_liked":false,"id":338781,"user_name":"良胜","can_delete":false,"product_type":"c1","uid":1764364,"ip_address":"","ucode":"9EBE2491291BE4","user_header":"https://static001.geekbang.org/account/avatar/00/1a/ec/0c/f20586b1.jpg","comment_is_top":false,"comment_ctime":1647737056,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1647737056","product_id":100039001,"comment_content":"如果每次都要做加解密，性能上损耗太大，这样考虑的话，传统的session认证也有重放安全问题，用https不就可以解决被劫持的问题吗","like_count":0},{"had_liked":false,"id":336905,"user_name":"顺势而为","can_delete":false,"product_type":"c1","uid":2757858,"ip_address":"","ucode":"FE7D688D24823E","user_header":"https://static001.geekbang.org/account/avatar/00/2a/14/e2/f6f1627c.jpg","comment_is_top":false,"comment_ctime":1646459851,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1646459851","product_id":100039001,"comment_content":"我觉得作者写的《设计模式之美》，很真实，贴切开发者的情况，能真正地讲述不同的感受，让我们有很多的借鉴作用。往往我们都会困惑，当你经验未足够丰富的时候，你发现自己的困惑越多，当你经验越多的时候，你就发现作者讲得越真实有用。","like_count":0},{"had_liked":false,"id":332840,"user_name":"铲铲队","can_delete":false,"product_type":"c1","uid":1132569,"ip_address":"","ucode":"D16372C34B7AE3","user_header":"https://static001.geekbang.org/account/avatar/00/11/48/19/14dd81d9.jpg","comment_is_top":false,"comment_ctime":1643720676,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1643720676","product_id":100039001,"comment_content":"小争哥的这个实现流程和Http 摘要认证比较相似","like_count":0},{"had_liked":false,"id":329913,"user_name":"技术骨干","can_delete":false,"product_type":"c1","uid":1098720,"ip_address":"","ucode":"8FCF8DE6D29201","user_header":"https://static001.geekbang.org/account/avatar/00/10/c3/e0/3db22579.jpg","comment_is_top":false,"comment_ctime":1641639266,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1641639266","product_id":100039001,"comment_content":"先做需求分析，是一个逐步优化的过程。理解了做什么，怎么做就有的放矢，再世面上现成的框架就方便多了。","like_count":0},{"had_liked":false,"id":329854,"user_name":"罗杰","can_delete":false,"product_type":"c1","uid":1320487,"ip_address":"","ucode":"96BAFAA147341F","user_header":"https://static001.geekbang.org/account/avatar/00/14/26/27/eba94899.jpg","comment_is_top":false,"comment_ctime":1641600506,"is_pvip":false,"discussion_count":0,"race_medal":2,"score":"1641600506","product_id":100039001,"comment_content":"之前设计注册防刷用的策略是：客户端获取服务器的时间戳（如果单纯会有客户端的时间戳会有问题），注册的时候带上这个时间戳，如果是超出 5s（考虑到最大延迟） 则返回未知错误。","like_count":0},{"had_liked":false,"id":320499,"user_name":"大卡","can_delete":false,"product_type":"c1","uid":1818970,"ip_address":"","ucode":"FBB5B756A78D67","user_header":"https://static001.geekbang.org/account/avatar/00/1b/c1/5a/68c4c556.jpg","comment_is_top":false,"comment_ctime":1636353891,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636353891","product_id":100039001,"comment_content":"老师这个案例中我没有体会到“面向对象”啊，是不是面向对象和面向过程的需求分析过程是差不多的呢。","like_count":0},{"had_liked":false,"id":318017,"user_name":"Geek_f04ee1","can_delete":false,"product_type":"c1","uid":2822456,"ip_address":"","ucode":"D2139CD009BA6F","user_header":"","comment_is_top":false,"comment_ctime":1635125034,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635125034","product_id":100039001,"comment_content":"为什么客户端需要把密码传过去？本地用密码生成token后就间接带有token了，服务器查到对应appid的密码后，配上其他参数生成token进行比对不是更好吗？","like_count":0},{"had_liked":false,"id":316385,"user_name":"keep_it_real","can_delete":false,"product_type":"c1","uid":2055554,"ip_address":"","ucode":"F5057CAF752FF3","user_header":"https://static001.geekbang.org/account/avatar/00/1f/5d/82/81b2ba91.jpg","comment_is_top":false,"comment_ctime":1634293223,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634293223","product_id":100039001,"comment_content":"其实吧 遇到的大多数需求都已经有成熟的解决方案了。","like_count":0},{"had_liked":false,"id":314835,"user_name":"多学多看多记","can_delete":false,"product_type":"c1","uid":2276155,"ip_address":"","ucode":"0670C833007510","user_header":"https://static001.geekbang.org/account/avatar/00/22/bb/3b/6e020a32.jpg","comment_is_top":false,"comment_ctime":1633491061,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633491061","product_id":100039001,"comment_content":"感觉叫加密算法不是很准确，应该是摘要算法，本质也是不可逆的哈希算法","like_count":0},{"had_liked":false,"id":313375,"user_name":"阿昕","can_delete":false,"product_type":"c1","uid":1012906,"ip_address":"","ucode":"F3AD093B68E074","user_header":"https://static001.geekbang.org/account/avatar/00/0f/74/aa/178a6797.jpg","comment_is_top":false,"comment_ctime":1632401823,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1632401823","product_id":100039001,"comment_content":"开放性问题首先需要确定资源情况，比如说依赖的服务存在哪些限制，然后去考虑业务真实诉求是什么，在实现方案中取一个平衡值","like_count":0},{"had_liked":false,"id":311577,"user_name":"charmsongo","can_delete":false,"product_type":"c1","uid":1609051,"ip_address":"","ucode":"4FBEE716E93A1A","user_header":"https://static001.geekbang.org/account/avatar/00/18/8d/5b/383a49e4.jpg","comment_is_top":false,"comment_ctime":1631319219,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1631319219","product_id":100039001,"comment_content":"面向需求(对象)分析、面向对象设计、面向对象编程<br><br>程序员必须有面对模糊需求，去思考，去沟通，去细化的能力，那些现在要做，未来要做，和不用去做的功能。<br><br>先实现功能，再去做迭代优化，防止止步不前的窘境","like_count":0},{"had_liked":false,"id":310842,"user_name":"慌张而黑糖","can_delete":false,"product_type":"c1","uid":1638878,"ip_address":"","ucode":"B4416885A301C8","user_header":"https://static001.geekbang.org/account/avatar/00/19/01/de/bf524817.jpg","comment_is_top":false,"comment_ctime":1630933275,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630933275","product_id":100039001,"comment_content":"这里“将 URL、AppID、密码、时间戳拼接在一起，通过加密算法生成 token”，如何保证后端与前端的时间戳一致呢？如果时间戳不一致，是不是会导致生成的token不一致，还是说通过前端传过来的时间戳进行生成后端token。这里我在想时间戳是不是可以只到分，然后”微服务端在收到这些数据之后，会验证当前时间戳跟传递过来的时间戳，是否在一定的时间窗口内（比如一分钟）。如果超过一分钟，则判定 token 过期，拒绝接口请求“这部分校验是不是都不用做了（这样做好像不灵活了，不能方便的更改时间窗口了🤔）。","like_count":0},{"had_liked":false,"id":308247,"user_name":"小周","can_delete":false,"product_type":"c1","uid":2453498,"ip_address":"","ucode":"7ED7BC27A46C4C","user_header":"https://static001.geekbang.org/account/avatar/00/25/6f/fa/615a0df3.jpg","comment_is_top":false,"comment_ctime":1629470627,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629470627","product_id":100039001,"comment_content":"如果一个需求比较模糊、比较抽象，那么就需要将其具体化，通过沟通、挖掘、分析、假设和梳理等方式，得出一个简易的方案。再从最简易的方案开始，逐步完善，得到最终方案","like_count":0},{"had_liked":false,"id":306628,"user_name":"Geek_b7eb88","can_delete":false,"product_type":"c1","uid":1573715,"ip_address":"","ucode":"0EB46381D9B1CB","user_header":"","comment_is_top":false,"comment_ctime":1628650653,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628650653","product_id":100039001,"comment_content":"我们之前有个投票的业务需求，在防刷票方面用https的双向认证做安全防护。一直解决不了的问题就是机群的刷票。","like_count":0},{"had_liked":false,"id":300687,"user_name":"江小田","can_delete":false,"product_type":"c1","uid":1003149,"ip_address":"","ucode":"C5197BF856E8D3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4e/8d/34e0f6f3.jpg","comment_is_top":false,"comment_ctime":1625305643,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625305643","product_id":100039001,"comment_content":"吹毛求疵一下。这个业务貌似是接口认证，而不是鉴权。鉴权应该是认证后，再判断有没有对应接口权限的事😂","like_count":0},{"had_liked":false,"id":300534,"user_name":"小帅","can_delete":false,"product_type":"c1","uid":1239663,"ip_address":"","ucode":"4129A7E9427FFC","user_header":"https://static001.geekbang.org/account/avatar/00/12/ea/6f/09de5f65.jpg","comment_is_top":false,"comment_ctime":1625208675,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625208675","product_id":100039001,"comment_content":"鉴权比较通用的做法还是使用rsa进行加解签操作，不做这不是重点，我想看到的是怎么进行面向对象的分析，好像没看出来","like_count":0},{"had_liked":false,"id":299600,"user_name":"建强","can_delete":false,"product_type":"c1","uid":1397126,"ip_address":"","ucode":"62B03D0E0C64EC","user_header":"https://static001.geekbang.org/account/avatar/00/15/51/86/b5fd8dd8.jpg","comment_is_top":false,"comment_ctime":1624758039,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624758039","product_id":100039001,"comment_content":"开放性问题的设计：<br>采用自顶向下，逐步求精的方法，先搞清基本的概念，需求的方向，然后大体分解成几个独立的部分，再对每一部分，逐步求精，对于复杂的部分可以再次进行分解求精，直到最后细化到能真正设计实现每一小部分的需求。","like_count":0},{"had_liked":false,"id":297184,"user_name":"Geek_5b7d28","can_delete":false,"product_type":"c1","uid":2057476,"ip_address":"","ucode":"BAA1CDD539C369","user_header":"","comment_is_top":false,"comment_ctime":1623370263,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1623370263","product_id":100039001,"comment_content":"面向对象分析中的面向对象没有体现出来呀","like_count":0},{"had_liked":false,"id":288706,"user_name":"炫炫","can_delete":false,"product_type":"c1","uid":1358609,"ip_address":"","ucode":"FDC7A0C6E08B02","user_header":"https://static001.geekbang.org/account/avatar/00/14/bb/11/7069b8eb.jpg","comment_is_top":false,"comment_ctime":1618633429,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618633429","product_id":100039001,"comment_content":"这个真的棒","like_count":0},{"had_liked":false,"id":287822,"user_name":"EQLT","can_delete":false,"product_type":"c1","uid":1122933,"ip_address":"","ucode":"609C93F0DEF0BC","user_header":"https://static001.geekbang.org/account/avatar/00/11/22/75/79693c63.jpg","comment_is_top":false,"comment_ctime":1618186943,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1618186943","product_id":100039001,"comment_content":"这篇收获很大，最主要学会了一种如何分析的思路“自问自答”，开端就是分析“如何实现鉴权”出发，得出“具体过程”，从中提取“要素”，整个过程可以很好践行DDD的战略设计。","like_count":0},{"had_liked":false,"id":284914,"user_name":"Geek_86eac6","can_delete":false,"product_type":"c1","uid":1787022,"ip_address":"","ucode":"8C02E398CC6A35","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI4CBQHuLDWOdicOl1elTdSicqMyY1s5JDWXiaHsSk0VSWaVe0U6CTo701ZGz9h6MvibsAGKnvVq7xxFw/132","comment_is_top":false,"comment_ctime":1616543899,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616543899","product_id":100039001,"comment_content":"对于一个抽象的需求，首先要明确需求，然后拿出一个最简单的解决方案，然后不断迭代优化。","like_count":0},{"had_liked":false,"id":283537,"user_name":"Graham","can_delete":false,"product_type":"c1","uid":1994570,"ip_address":"","ucode":"C2545DE16EC3DD","user_header":"","comment_is_top":false,"comment_ctime":1615811156,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615811156","product_id":100039001,"comment_content":"另外，如果是公司内部调用，一般鉴权通过约定好的header 来控制就好来，通过检测平时的tps，来看是否有异常调用。如果是开放给外部的，恐怕还得做好请求量的控制吧，如果不做，因为外部的调用（都有效），把自己的系统弄崩溃，这恐怕也是一种风险吧。<br>","like_count":0},{"had_liked":false,"id":283536,"user_name":"Graham","can_delete":false,"product_type":"c1","uid":1994570,"ip_address":"","ucode":"C2545DE16EC3DD","user_header":"","comment_is_top":false,"comment_ctime":1615810962,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615810962","product_id":100039001,"comment_content":"我刚开始的思路想到是：鉴权这种有多种实现，把鉴权的通用方法抽象出来，然后让具体的接口继承，然后做一个切面做拦截，然后再是具体的鉴权实现，结果一上来就是说鉴权的实现。<br>鉴权是不是 可以不止是自己实现，也可以调用第三方","like_count":0},{"had_liked":false,"id":282171,"user_name":"尔冬橙","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1615119418,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615119418","product_id":100039001,"comment_content":"这是对称加密还是非对称加密","like_count":0},{"had_liked":false,"id":273309,"user_name":"gsy_yang","can_delete":false,"product_type":"c1","uid":2412406,"ip_address":"","ucode":"48471A72E4A2A3","user_header":"","comment_is_top":false,"comment_ctime":1610530581,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1610530581","product_id":100039001,"comment_content":"这种场景是针对外部接口访问(存在客户端-服务端)，若是针对服务端暴露接口，如何去做接口的鉴权呢？<br>","like_count":0},{"had_liked":false,"id":264827,"user_name":"lh","can_delete":false,"product_type":"c1","uid":2242740,"ip_address":"","ucode":"F048C6C0C7E8EA","user_header":"https://static001.geekbang.org/account/avatar/00/22/38/b4/1843033d.jpg","comment_is_top":false,"comment_ctime":1606663220,"is_pvip":false,"replies":[{"id":"96056","content":"������","user_name":"作者回复","user_name_real":"王争","uid":"1190123","ctime":1606700494,"ip_address":"","comment_id":264827,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1606663220","product_id":100039001,"comment_content":"配置过程：<br>服务器：留存RSA私钥，分配渠道标识（明文），渠道密码（密文）<br>客户端：持有RSA公钥，被分配渠道标识（明文），渠道密码（密文）<br><br>交互过程：<br>客户端：RSA公钥加密（业务参数+渠道密码+渠道标识+时间戳），时间戳<br>服务器：<br>1.判断时间戳是否在有效期内；<br>2.RSA公钥加密得到：业务参数+渠道密码+渠道标识+时间戳；<br>3.判断时间戳是否被修改；<br>4.判断渠道标识所对应的渠道密码是否正确；<br><br>不过，由于公钥加密，对于数据量较大时，性能较差，所以一般的做法是，客户端与服务器利用RSA协商一个对称密钥后，之后的请求都使用对称密钥进行加密通信。","like_count":0,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"王争","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510698,"discussion_content":"������","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606700494,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":258107,"user_name":"Kingram","can_delete":false,"product_type":"c1","uid":2247700,"ip_address":"","ucode":"212E403E81F2FC","user_header":"https://static001.geekbang.org/account/avatar/00/22/4c/14/8fa39544.jpg","comment_is_top":false,"comment_ctime":1604301300,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1604301300","product_id":100039001,"comment_content":"可以将secretkey拼接在需要发送的数据（包括时间戳）后，再进行加密算法生成token，server接收到后验证时效性，验证token正确性","like_count":0},{"had_liked":false,"id":257523,"user_name":"Geek_00e01b","can_delete":false,"product_type":"c1","uid":1597071,"ip_address":"","ucode":"BC76A83B53D0EF","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLe9iavda8ia7vNkbMVEHsCKs43l6U6HGWibiaxxKd9PuiaYu5wRedicC96PLicZ9VIh0ic5Jg8YHPrta3IAQ/132","comment_is_top":false,"comment_ctime":1604020476,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1604020476","product_id":100039001,"comment_content":"这就是需求分析啊，感觉就是可行性方案的设计，或者就是总体上可行的解决方案设计。<br>在我们实际开发中，这个过程叫做技术调研，或者技术评审","like_count":0},{"had_liked":false,"id":253781,"user_name":"俄国的一盘桃子","can_delete":false,"product_type":"c1","uid":2220264,"ip_address":"","ucode":"DB9BFB35A54377","user_header":"https://static001.geekbang.org/account/avatar/00/21/e0/e8/a2d033fa.jpg","comment_is_top":false,"comment_ctime":1602872861,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602872861","product_id":100039001,"comment_content":"安全上可以用非对称密钥的加验签来解决，重放攻击可以用时间窗口+requestmsgid来一起解决，不过具体场景还需要具体分析。比如tps类的交易肯定会有单号的，qps类的就不一样了","like_count":0},{"had_liked":false,"id":252292,"user_name":"微末凡尘","can_delete":false,"product_type":"c1","uid":1099525,"ip_address":"","ucode":"25EDFD0914D0F4","user_header":"https://static001.geekbang.org/account/avatar/00/10/c7/05/19c5c255.jpg","comment_is_top":false,"comment_ctime":1602225122,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602225122","product_id":100039001,"comment_content":"第二次看这篇文章，依然干货满满，拿到一个需求的时候，有时候我们可能无从下手，需要从简单的做起，一步一步优化，可以把自己的思路记录下来，确认好流程，再进行开发，前期的设计往往更加的重要","like_count":0},{"had_liked":false,"id":247965,"user_name":"Geek_0f31ae","can_delete":false,"product_type":"c1","uid":1870888,"ip_address":"","ucode":"A0F198BEF2AB2F","user_header":"","comment_is_top":false,"comment_ctime":1599959733,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599959733","product_id":100039001,"comment_content":"想问下，考虑到这个token如果放到URL，put, post 等请求就无法鉴权，那是不是说token应该放到 header 中呢？","like_count":0},{"had_liked":false,"id":247892,"user_name":"Mateo","can_delete":false,"product_type":"c1","uid":1479043,"ip_address":"","ucode":"9E15121C6521F7","user_header":"https://static001.geekbang.org/account/avatar/00/16/91/83/0fac9e2b.jpg","comment_is_top":false,"comment_ctime":1599903451,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1599903451","product_id":100039001,"comment_content":"在每次遇到复杂的开发需求时，可以先将自己的开发步骤以注释的形式在ide中写出。先完善开发的代码的流程，然后在每一步的注释后面编写相应的功能代码。","like_count":0},{"had_liked":false,"id":246921,"user_name":"Younger Ku","can_delete":false,"product_type":"c1","uid":1323102,"ip_address":"","ucode":"D157DC38BDB515","user_header":"https://static001.geekbang.org/account/avatar/00/14/30/5e/c42bc33f.jpg","comment_is_top":false,"comment_ctime":1599531629,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599531629","product_id":100039001,"comment_content":"除了基于时间窗口来防重放，还可以将token以生成时的时间戳（也可以是随机值）为key放入缓存，第一次请求后台时根据key取出token和传过来的token做比对，一样的话就有权限，验证通过后将key从缓存删除，这样黑客重放请求的时候后台根据传递的时间戳就拿不到token了，表明没有权限。","like_count":0},{"had_liked":false,"id":245904,"user_name":"宇天飞","can_delete":false,"product_type":"c1","uid":1126444,"ip_address":"","ucode":"3FB37D1E2DAA61","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/2c/06375913.jpg","comment_is_top":false,"comment_ctime":1599104752,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1599104752","product_id":100039001,"comment_content":"1、抽象问题具体化，想去想清楚我需要做一个什么样的东西，怎么使用他，后面再去考虑其他问题，比如优化","like_count":0},{"had_liked":false,"id":243898,"user_name":"郑大钱","can_delete":false,"product_type":"c1","uid":1503067,"ip_address":"","ucode":"114CF48056880E","user_header":"https://static001.geekbang.org/account/avatar/00/16/ef/5b/ff28088f.jpg","comment_is_top":false,"comment_ctime":1598322109,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598322109","product_id":100039001,"comment_content":"无奈的被卡在了第一步，我得先弄清楚什么是“接口鉴权”，看看有没有简易的demo，争取把demo跑起来，建立更直观的印象。然后找一找相关的第三方库，看看第三方库都解决了哪些问题。最后和leader确定我们需要做到什么程度，确定技术方向和边界。然后才开始下述的OOA(面相对象分析)","like_count":0},{"had_liked":false,"id":243873,"user_name":"Gopher","can_delete":false,"product_type":"c1","uid":1206229,"ip_address":"","ucode":"3C1F9012BB486D","user_header":"https://static001.geekbang.org/account/avatar/00/12/67/d5/1b26b725.jpg","comment_is_top":false,"comment_ctime":1598317795,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598317795","product_id":100039001,"comment_content":"在经验上 如果是初级工程师遇到这样的问题，肯定是先实现一个最简单的版本，在慢慢迭代。在迭代的过程中，给出设计方案 和公司更资深的公司讨论下，能收获到更多","like_count":0},{"had_liked":false,"id":243095,"user_name":"Ilearning99","can_delete":false,"product_type":"c1","uid":1989119,"ip_address":"","ucode":"7901836A2C47EF","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/qOdqzmC507sibL6sichNSDaVmyoMKibEIqHWpic4CftgOQnoA3QKeRPwic9j1Ha8MLtzzqzfSRavR9GWMju09SMADUg/132","comment_is_top":false,"comment_ctime":1597964990,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597964990","product_id":100039001,"comment_content":"先简化需求，再不断迭代这个思路非常好。不知道为什么，我在实际开发中，总是一开始想做的非常复杂，最后在deadline前总是快无法完成了，就会做各种删减，做可以完成的版本。","like_count":0},{"had_liked":false,"id":239515,"user_name":"龙猫","can_delete":false,"product_type":"c1","uid":1112490,"ip_address":"","ucode":"FD726CC969EF9C","user_header":"https://static001.geekbang.org/account/avatar/00/10/f9/aa/3e80212e.jpg","comment_is_top":false,"comment_ctime":1596553109,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596553109","product_id":100039001,"comment_content":"鉴权加密可以参考jwt的实现","like_count":0},{"had_liked":false,"id":238998,"user_name":"杨逸林","can_delete":false,"product_type":"c1","uid":1167233,"ip_address":"","ucode":"4BF3CF3E2F1AC7","user_header":"https://static001.geekbang.org/account/avatar/00/11/cf/81/96f656ef.jpg","comment_is_top":false,"comment_ctime":1596412391,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596412391","product_id":100039001,"comment_content":"实际工作中，我在上一家公司和其他公司的系统做对接的时候，他们的系统就是要我这样做的。最后还要做一次md5大写加密😂，超级麻烦，生成token","like_count":0},{"had_liked":false,"id":238178,"user_name":"何超","can_delete":false,"product_type":"c1","uid":1522691,"ip_address":"","ucode":"02C19C1A070315","user_header":"https://static001.geekbang.org/account/avatar/00/17/3c/03/ce032c4d.jpg","comment_is_top":false,"comment_ctime":1596089698,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596089698","product_id":100039001,"comment_content":"如果在客户端根据时间戳生成token,有效时间1分钟的话，客户端和服务端就得做时间同步了。","like_count":0},{"had_liked":false,"id":238066,"user_name":"Washington","can_delete":false,"product_type":"c1","uid":1168960,"ip_address":"","ucode":"00F5F36416147D","user_header":"https://static001.geekbang.org/account/avatar/00/11/d6/40/e1a51ac1.jpg","comment_is_top":false,"comment_ctime":1596055917,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596055917","product_id":100039001,"comment_content":"谢谢老师精彩的讲解。这个需求可是说是通过用例的形式捕获的，文中提到的接口调用方就是用例中的Primary actor, 而文中的微服务就是用例中的The system。其中有Main success scenario 还有一些Extensions。如果能用一个用例的模板会更清晰一些。用例就是OOA所推崇的一种表达需求的方式。我们之后在OOD中需要所得就是考虑如何用一组对象来实现这个用例。","like_count":0},{"had_liked":false,"id":237989,"user_name":"laofengfenglao","can_delete":false,"product_type":"c1","uid":1041736,"ip_address":"","ucode":"883D1B1BD985F5","user_header":"","comment_is_top":false,"comment_ctime":1596022996,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596022996","product_id":100039001,"comment_content":"循序渐进，条理清晰，赞","like_count":0},{"had_liked":false,"id":237820,"user_name":"Geek_b70da7","can_delete":false,"product_type":"c1","uid":2062505,"ip_address":"","ucode":"BA81153E36FEA1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/06icm3r7fRGSjdEYGIWIx4VV5ibkKibzvlaJ08ibBXyzRoricX93YmvJvvsurahgCNics6Rt5cGqxMSh24KxMJ3RjNmA/132","comment_is_top":false,"comment_ctime":1595983032,"is_pvip":false,"replies":[{"id":"88029","content":"没懂你说的 亲 ������","user_name":"作者回复","user_name_real":"王争","uid":"1190123","ctime":1596112757,"ip_address":"","comment_id":237820,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1595983032","product_id":100039001,"comment_content":"我想知道如何保证加了时间戳还能在一段时间没token不变化尼","like_count":0,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"王争","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502554,"discussion_content":"没懂你说的 亲 ������","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596112757,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":234428,"user_name":"润！","can_delete":false,"product_type":"c1","uid":1237696,"ip_address":"","ucode":"13B7C23B5F6B24","user_header":"https://static001.geekbang.org/account/avatar/00/12/e2/c0/09cef977.jpg","comment_is_top":false,"comment_ctime":1594690826,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594690826","product_id":100039001,"comment_content":"作者这样的授课方式解答了我脑海里很多的疑问，赞一个","like_count":0},{"had_liked":false,"id":232165,"user_name":"御风","can_delete":false,"product_type":"c1","uid":1812807,"ip_address":"","ucode":"51C8212BE06364","user_header":"https://static001.geekbang.org/account/avatar/00/1b/a9/47/ded5da90.jpg","comment_is_top":false,"comment_ctime":1593877393,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593877393","product_id":100039001,"comment_content":"token加密算法是单向的，那么被截获后，黑客只能用同一请求不断重复攻击吧，重复请求过多导致服务端垮掉吧。","like_count":0},{"had_liked":false,"id":224065,"user_name":"郭俊杰","can_delete":false,"product_type":"c1","uid":1082785,"ip_address":"","ucode":"D328E5738A4413","user_header":"https://static001.geekbang.org/account/avatar/00/10/85/a1/2442332c.jpg","comment_is_top":false,"comment_ctime":1591264353,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591264353","product_id":100039001,"comment_content":"我在接入第三方服务时，观察过。果然调用的方式跟老师讲的一模一样到第三步，终于明白人家为啥要这么设计了。","like_count":0},{"had_liked":false,"id":220743,"user_name":"朝小树","can_delete":false,"product_type":"c1","uid":1323875,"ip_address":"","ucode":"18DC282DEF16C8","user_header":"https://static001.geekbang.org/account/avatar/00/14/33/63/2d48822a.jpg","comment_is_top":false,"comment_ctime":1590317179,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590317179","product_id":100039001,"comment_content":"如果用户本地时间不对的话，应该每次请求都会失效；","like_count":0},{"had_liked":false,"id":220221,"user_name":"李达龙","can_delete":false,"product_type":"c1","uid":1450486,"ip_address":"","ucode":"F5702E69D90B7F","user_header":"https://static001.geekbang.org/account/avatar/00/16/21/f6/16bc9c24.jpg","comment_is_top":false,"comment_ctime":1590208502,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590208502","product_id":100039001,"comment_content":"拿到需求一般回问清楚，越具体越好，但是完成功能开发，在测试阶段","like_count":0},{"had_liked":false,"id":219753,"user_name":"李德政","can_delete":false,"product_type":"c1","uid":1023885,"ip_address":"","ucode":"3AC49F5671485C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9f/8d/d725d32c.jpg","comment_is_top":false,"comment_ctime":1590073992,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1590073992","product_id":100039001,"comment_content":"还可以在优化一下方案：参数里面增加随机数，服务端记录随机数，这样可以保证一个请求最多只被执行一次。","like_count":0,"discussions":[{"author":{"id":1142739,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6f/d3/4384a4e5.jpg","nickname":"莫念","note":"","ucode":"4C079403645BBF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389109,"discussion_content":"那对于并发请发的就会误杀了吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629122068,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":217179,"user_name":"师哥","can_delete":false,"product_type":"c1","uid":1333376,"ip_address":"","ucode":"A86CD1661D370F","user_header":"https://static001.geekbang.org/account/avatar/00/14/58/80/c9e232b6.jpg","comment_is_top":false,"comment_ctime":1589433350,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589433350","product_id":100039001,"comment_content":"面向对象分析是一个循序渐进的过程。","like_count":0},{"had_liked":false,"id":214692,"user_name":"track6688","can_delete":false,"product_type":"c1","uid":1088040,"ip_address":"","ucode":"0A9E893F8FD379","user_header":"https://static001.geekbang.org/account/avatar/00/10/9a/28/03613c22.jpg","comment_is_top":false,"comment_ctime":1588782680,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588782680","product_id":100039001,"comment_content":"完全被说中了，确实很多时候，拿到一个需求，我都会一片空。我也拿我手上的一个小需求跟着老师的思路，分析了一遍，感觉是比较清楚了。喜欢这些经验文章。","like_count":0},{"had_liked":false,"id":214366,"user_name":"JKwar","can_delete":false,"product_type":"c1","uid":1047466,"ip_address":"","ucode":"B733CA24D5701F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fb/aa/01fedf6c.jpg","comment_is_top":false,"comment_ctime":1588731581,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1588731581","product_id":100039001,"comment_content":"碰到过图片加载功能的需求，尽可能抽象，预留扩展点。","like_count":0},{"had_liked":false,"id":211683,"user_name":"简单猫","can_delete":false,"product_type":"c1","uid":1866485,"ip_address":"","ucode":"EA027D4C344E25","user_header":"https://static001.geekbang.org/account/avatar/00/1c/7a/f5/54a5084b.jpg","comment_is_top":false,"comment_ctime":1587995513,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587995513","product_id":100039001,"comment_content":"一直在用啊 公总号token","like_count":0},{"had_liked":false,"id":211182,"user_name":"Geek_519725","can_delete":false,"product_type":"c1","uid":1901818,"ip_address":"","ucode":"AA55172CE0D50F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eowbI239DoIfte0aXibrEGgU6n1Jl1ib1FJaK4mVUSOkQYsfqrdISf2JtiabqJ7iaPib36xJ35XAKd4syA/132","comment_is_top":false,"comment_ctime":1587910812,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587910812","product_id":100039001,"comment_content":"建议对加密这块有疑惑的的同学可以了解下：对称加密、非对称加密、摘要算法。本文中用到的是SHA算法，实际上就是hash，其实这不叫加密算法，因为无法解密，这个应该叫做摘要算法，它是不可逆的，即使知道算法，也无法知道原始数据是啥。所以只要确保密码不被泄露，那么这个链接被截获也无所谓。","like_count":0},{"had_liked":false,"id":205768,"user_name":"酸辣土豆丝","can_delete":false,"product_type":"c1","uid":1751234,"ip_address":"","ucode":"0E3E4AFB31E1E6","user_header":"https://static001.geekbang.org/account/avatar/00/1a/b8/c2/d1904d74.jpg","comment_is_top":false,"comment_ctime":1586737320,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586737320","product_id":100039001,"comment_content":"首先会跟问清楚需求具体的内容，有哪些注意点，然后调研下，是否有现有的框架，案例，分析清楚，根据自己的场景进行改动","like_count":0},{"had_liked":false,"id":202519,"user_name":"KK","can_delete":false,"product_type":"c1","uid":1324863,"ip_address":"","ucode":"FFC31A3FE3A285","user_header":"https://static001.geekbang.org/account/avatar/00/14/37/3f/a9127a73.jpg","comment_is_top":false,"comment_ctime":1586000994,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1586000994","product_id":100039001,"comment_content":"没有第四轮分析优化了吗？第四轮只是说了一下其加入时间戳之后的合理性。哈哈哈<br>","like_count":0},{"had_liked":false,"id":202368,"user_name":"张三","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1585977853,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585977853","product_id":100039001,"comment_content":"这个感觉就是一个用户名密码登录的安全性方面考虑的例子。","like_count":0},{"had_liked":false,"id":200781,"user_name":"这得从我捡到一个鼠标垫开始说起","can_delete":false,"product_type":"c1","uid":1272321,"ip_address":"","ucode":"2FF4347B4E7A9B","user_header":"https://static001.geekbang.org/account/avatar/00/13/6a/01/d9cb531d.jpg","comment_is_top":false,"comment_ctime":1585650216,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1585650216","product_id":100039001,"comment_content":"使用https不就是密文传输了，既然是密文传输，那就不会泄露appid和secret。这鉴权不就是验证调用方的身份吗，跟登录微信qq是一个东西，输入账号密码，验证成功就算登录了。","like_count":0,"discussions":[{"author":{"id":1115041,"avatar":"https://static001.geekbang.org/account/avatar/00/11/03/a1/e6a0f60b.jpg","nickname":"Sid","note":"","ucode":"0461B574B2736B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":314870,"discussion_content":"哈哈 我也被问过一个问题 为什么有了https还要验签","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603204865,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":192018,"user_name":"秋风画扇","can_delete":false,"product_type":"c1","uid":1132356,"ip_address":"","ucode":"5BCBC1422C51EC","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/44/964aa665.jpg","comment_is_top":false,"comment_ctime":1584812312,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584812312","product_id":100039001,"comment_content":"1.罗列功能需求 2.提取相关属性行为 3.聚合分装成对象 4.编码实现  5.重构调整     就是不断抽取优化，像我一样进行分析编码的有没有？","like_count":0},{"had_liked":false,"id":187837,"user_name":"肖臧","can_delete":false,"product_type":"c1","uid":1047733,"ip_address":"","ucode":"4FAC9FF54DD6A0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fc/b5/ac717737.jpg","comment_is_top":false,"comment_ctime":1584257526,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584257526","product_id":100039001,"comment_content":"其实这种鉴权系统在SaaS系统里很多，Facebook Messenger Platform，各大短信网关。这次OOA只分析了鉴权过程，那么password或者secret的生成、修改和展示并没有写出，我觉得不够完整。","like_count":0},{"had_liked":false,"id":186251,"user_name":"大王叫我来巡山","can_delete":false,"product_type":"c1","uid":1099513,"ip_address":"","ucode":"1B8D0C701BC95E","user_header":"https://static001.geekbang.org/account/avatar/00/10/c6/f9/caf27bd3.jpg","comment_is_top":false,"comment_ctime":1583808245,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583808245","product_id":100039001,"comment_content":"正常情况下都是先找现成的，然后比对业务需求分析契合度，稍加改动直接上线","like_count":0},{"had_liked":false,"id":183670,"user_name":"千锤百炼领悟之极限","can_delete":false,"product_type":"c1","uid":1744257,"ip_address":"","ucode":"224B5CF2101716","user_header":"https://static001.geekbang.org/account/avatar/00/1a/9d/81/d748b7eb.jpg","comment_is_top":false,"comment_ctime":1583113418,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583113418","product_id":100039001,"comment_content":"client的系统时间与服务器时间不一致就会导致验证失败，应该在服务器加一个接口获取服务器当前时间，client用获取的这个时间作为ts传输。","like_count":0},{"had_liked":false,"id":182325,"user_name":"雷刚","can_delete":false,"product_type":"c1","uid":1655725,"ip_address":"","ucode":"115FE2BE1AAB61","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/pTD8nS0SsORKiaRD3wB0NK9Bpd0wFnPWtYLPfBRBhvZ68iaJErMlM2NNSeEibwQfY7GReILSIYZXfT9o8iaicibcyw3g/132","comment_is_top":false,"comment_ctime":1582768995,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582768995","product_id":100039001,"comment_content":"今天看到百度翻译api的设计，和老师讲得差不多&lt;https:&#47;&#47;api.fanyi.baidu.com&#47;doc&#47;21&gt;","like_count":0},{"had_liked":false,"id":182273,"user_name":"未来小娃","can_delete":false,"product_type":"c1","uid":1047329,"ip_address":"","ucode":"477D166EBB6B70","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fb/21/d017438c.jpg","comment_is_top":false,"comment_ctime":1582754690,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1582754690","product_id":100039001,"comment_content":"【设计模式笔记14】20200227<br>本次以接口鉴权展示乐面向对象编程的一般流程：也就是进行面向对象得需求分析，将模糊的需求细化为可落地的具体的需求，可以按照最小可行性产品思维思考，到底是什么才是该需求要解决问题，需要哪些功能，分别用来做什么的，如果有专业术语也要搞清楚与需求本身的联系，逐步讲抽象的描述具体化流程化。要提醒自己，你理解的需求和PD写的需求可能不是同一个东西，一定要多沟通确认清楚，随着业务复杂度的增加，我们需要深入理解业务，业务都理解不清楚妄谈领域驱动设计是毫无意义的，画图是一个很好理解业务的方法，大部分时候我们可能只负责某一个模块，但是如果跳出来主动去看整个业务链路你理解的深度也会加深","like_count":0},{"had_liked":false,"id":181042,"user_name":"somenzz","can_delete":false,"product_type":"c1","uid":1187197,"ip_address":"","ucode":"EA59A170DF8910","user_header":"https://static001.geekbang.org/account/avatar/00/12/1d/7d/368df396.jpg","comment_is_top":false,"comment_ctime":1582465442,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582465442","product_id":100039001,"comment_content":"这就是我最新使用的 JWT ","like_count":0},{"had_liked":false,"id":180194,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1582208012,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582208012","product_id":100039001,"comment_content":"我记得我之前面试一家公司的时候，面试官曾经出过一个问题，如何保证在一台电脑上不同的浏览器，只要有一个浏览器登陆的账号，其他浏览器在登录的时候也可以做到直接登陆呢<br>针对这种比较笼统的需求的时候，我一开始给出的想法是请求服务端的时候利用请求者的IP地址,如果他的IP地址在我们的数据库中存储了，那么就直接进行登录，如果发现了异地存储，再利用手机号验证这种方式，将数据库里面的登录IP改为新的IP，但是这样的话，无法防止攻击者伪装他人的IP地址进行登录，于是乎我联想一下我能不能在本机上，保存一个文件，然后每次无论什么浏览器去访问的时候都去读取这个文件，并且带的文件上面的信息去直接请求，直白说就是账号密码，后来我想到了host文件，因为一般来说host的文件都是将网站名和网站的真实IP进行相映射的，那么我们可以在用户登录的时候去读取host文件,当然再过于具体的实现我没有给出，这只是我的一个思路，后来面试官说这也算是一种实现思路,不过就是比较流氓.也不知道大家有什么更好的实现思路","like_count":0},{"had_liked":false,"id":177228,"user_name":"张理查","can_delete":false,"product_type":"c1","uid":1003152,"ip_address":"","ucode":"1F93E631CD4B35","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4e/90/a8d19e7b.jpg","comment_is_top":false,"comment_ctime":1581327056,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581327056","product_id":100039001,"comment_content":"能否记录最后一次访问的ts，即同ts只能访问一次，这样做除了会损失一定的性能，还有什么缺点呢？","like_count":0},{"had_liked":false,"id":176973,"user_name":"涉蓝","can_delete":false,"product_type":"c1","uid":1134619,"ip_address":"","ucode":"C1321E29E01625","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLh8ubWQtDRa6exJtloSwibLliaejpF7434ficyggzukmXE63UlSPvbykoiaVDZo4CbDIIOQsCkicibyn9A/132","comment_is_top":false,"comment_ctime":1581239092,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581239092","product_id":100039001,"comment_content":"有个问题是 如果都是内网调用的话 还需要这样的鉴权吗？ 我们公司的好多服务只有内网的 然后有的服务搞了类似加密验签的东西 有的完全没有  <br>如果内网的话 似乎意义不大 要是黑客都摸到内网了 也就防不住啥的感觉","like_count":0},{"had_liked":false,"id":174690,"user_name":"静静聆听","can_delete":false,"product_type":"c1","uid":1263932,"ip_address":"","ucode":"0A8600CB928EFE","user_header":"https://static001.geekbang.org/account/avatar/00/13/49/3c/5d54c510.jpg","comment_is_top":false,"comment_ctime":1580353502,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1580353502","product_id":100039001,"comment_content":"老师是在介绍面向对象设计的思路，评论都是抓着token问题不放，这是重点么？老师我就想问下，您的这四步其实应该都属于面向对象设计把","like_count":0},{"had_liked":false,"id":171315,"user_name":"不似旧日","can_delete":false,"product_type":"c1","uid":1161271,"ip_address":"","ucode":"DF4C5E3AB9570C","user_header":"https://static001.geekbang.org/account/avatar/00/11/b8/37/98991aeb.jpg","comment_is_top":false,"comment_ctime":1578900952,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578900952","product_id":100039001,"comment_content":"第二轮优化图文不符, 文中说的是通过appId查出接口信息依同样的加密算法得到token_s, 拿token_s与请求的token对比<br>图片上的是解析token对比参数是否一致","like_count":0},{"had_liked":false,"id":168127,"user_name":"Ben","can_delete":false,"product_type":"c1","uid":1252353,"ip_address":"","ucode":"70351D4FAE47F7","user_header":"https://static001.geekbang.org/account/avatar/00/13/1c/01/5aaaf5b6.jpg","comment_is_top":false,"comment_ctime":1578016469,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578016469","product_id":100039001,"comment_content":"迭代第二轮生成token时, 请求接口的URL是固定的, 加或不加好像没什么区别","like_count":0},{"had_liked":false,"id":167208,"user_name":"fly","can_delete":false,"product_type":"c1","uid":1025992,"ip_address":"","ucode":"D1F6938C9CE15D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a7/c8/5608cbdb.jpg","comment_is_top":false,"comment_ctime":1577716604,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577716604","product_id":100039001,"comment_content":"服务之间的调用，通过验权，最早是用两边约定的密码+appId。后来参考微信和支付宝改成文中最后的样子：appId、url参数、时间+密码的组合。我想说的是，没思路的时候看看开放平台的接口，也能提供很多帮助","like_count":0},{"had_liked":false,"id":166264,"user_name":"至今未来","can_delete":false,"product_type":"c1","uid":1632716,"ip_address":"","ucode":"ED6F557FDB0B5B","user_header":"https://static001.geekbang.org/account/avatar/00/18/e9/cc/1eb3120e.jpg","comment_is_top":false,"comment_ctime":1577428101,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1577428101","product_id":100039001,"comment_content":"看评论看的我怀疑人生？ https post 请求数据放在body里 不是很稳的么。  ","like_count":0,"discussions":[{"author":{"id":1187197,"avatar":"https://static001.geekbang.org/account/avatar/00/12/1d/7d/368df396.jpg","nickname":"somenzz","note":"","ucode":"EA59A170DF8910","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":183028,"discussion_content":"http,https抓包工具都可以抓到的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582465572,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1272321,"avatar":"https://static001.geekbang.org/account/avatar/00/13/6a/01/d9cb531d.jpg","nickname":"这得从我捡到一个鼠标垫开始说起","note":"","ucode":"2FF4347B4E7A9B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1187197,"avatar":"https://static001.geekbang.org/account/avatar/00/12/1d/7d/368df396.jpg","nickname":"somenzz","note":"","ucode":"EA59A170DF8910","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":218343,"discussion_content":"https密文不可破解，你用工具抓包，都安装了工具的证书当然可以看到密文。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585650400,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":183028,"ip_address":""},"score":218343,"extra":""}]},{"author":{"id":1397895,"avatar":"https://static001.geekbang.org/account/avatar/00/15/54/87/ff33b386.jpg","nickname":"小假期","note":"","ucode":"4ED4162667D5D0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":131144,"discussion_content":"同，有了https貌似就不需要后面的2，3，4优化了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578829471,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165675,"user_name":"alls well","can_delete":false,"product_type":"c1","uid":1072439,"ip_address":"","ucode":"8E3EB5A3DF6E0D","user_header":"https://static001.geekbang.org/account/avatar/00/10/5d/37/8261fc68.jpg","comment_is_top":false,"comment_ctime":1577281603,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577281603","product_id":100039001,"comment_content":"针对嵌入式设备来讲，需求就是应付，产品经理给出OR用于描述使用场景，软件分解出DR-DS，解释what和how的问题。具体规格参数，软件要做和确认的太多。每次做这种感觉or就是形同虚设。如何做好嵌入式的需求呢？","like_count":0},{"had_liked":false,"id":163170,"user_name":"小妖","can_delete":false,"product_type":"c1","uid":1730626,"ip_address":"","ucode":"49C01DBFADF101","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJvm1JYIDcS74s4cEYxA1PXMqjortVXEjUKyGQcPvibNJ4EAuksIa6uoHgr6G1yRqAM2KtP3yicKgTA/132","comment_is_top":false,"comment_ctime":1576665619,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576665619","product_id":100039001,"comment_content":"一般来讲，微服务间的接口调用默认应该是安全的，通过配置注册中心控制安全，不需要进行健全，非法用户根本不可能允许注册。文章中讲的这些更适合的场景是和第三方服务进行接口对接，是完全的http restf请求","like_count":0},{"had_liked":false,"id":162671,"user_name":"。。。。","can_delete":false,"product_type":"c1","uid":1107784,"ip_address":"","ucode":"0163FD085D4293","user_header":"https://static001.geekbang.org/account/avatar/00/10/e7/48/df149c8d.jpg","comment_is_top":false,"comment_ctime":1576576147,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576576147","product_id":100039001,"comment_content":"没太理解client端是哪个端？是app还是服务端的一个client提供方？我理解的是这样的一个请求先去请求先到服务端提供的clent服务获取到一个新的路径，然后再去另一个服务端请求数据，是这样吗","like_count":0},{"had_liked":false,"id":160995,"user_name":"空知","can_delete":false,"product_type":"c1","uid":1013283,"ip_address":"","ucode":"C448E98238DD36","user_header":"https://static001.geekbang.org/account/avatar/00/0f/76/23/31e5e984.jpg","comment_is_top":false,"comment_ctime":1576074579,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1576074579","product_id":100039001,"comment_content":"重放功能加时间戳 + nonce可以解决啊","like_count":0,"discussions":[{"author":{"id":1198046,"avatar":"https://static001.geekbang.org/account/avatar/00/12/47/de/7b923db2.jpg","nickname":"曦","note":"","ucode":"AFB48B6C606EB2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":406221,"discussion_content":"接口性能会不会降一点点","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634723412,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":160917,"user_name":"麟","can_delete":false,"product_type":"c1","uid":1735579,"ip_address":"","ucode":"7A7BF72E0AA17B","user_header":"https://static001.geekbang.org/account/avatar/00/1a/7b/9b/694c24aa.jpg","comment_is_top":false,"comment_ctime":1576060279,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576060279","product_id":100039001,"comment_content":"例子一直在考虑微服务端，但是对于调用者怎么保证安全性？ 我能想到的就是每一次调用微服务接口，都需要去后台请求一下token，但是总觉的这样很啰嗦，不知道有没有其他的办法？？","like_count":0},{"had_liked":false,"id":160601,"user_name":"        ","can_delete":false,"product_type":"c1","uid":1255918,"ip_address":"","ucode":"21028A49D81B06","user_header":"https://static001.geekbang.org/account/avatar/00/13/29/ee/fba11edf.jpg","comment_is_top":false,"comment_ctime":1575983734,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575983734","product_id":100039001,"comment_content":"可以通过非对称加密来解决","like_count":0},{"had_liked":false,"id":160516,"user_name":"cv0cv0","can_delete":false,"product_type":"c1","uid":1360093,"ip_address":"","ucode":"93FF9277F03FD0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLEIsgI4ub1VOKWtVOfouAzSqx8Yt8ibQEsAnwNJsJHmuJzzpQqG79HullvYwpic8hgiclgON2GwXSjw/132","comment_is_top":false,"comment_ctime":1575967748,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575967748","product_id":100039001,"comment_content":"如果是用户自己，他就可以通过反编译 App 给自己账户加余额了。","like_count":0},{"had_liked":false,"id":160033,"user_name":"William Ning","can_delete":false,"product_type":"c1","uid":1592279,"ip_address":"","ucode":"4DB8D05E69E5F3","user_header":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","comment_is_top":false,"comment_ctime":1575859339,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1575859339","product_id":100039001,"comment_content":"边学边思考...","like_count":0},{"had_liked":false,"id":159424,"user_name":"Murrre","can_delete":false,"product_type":"c1","uid":1685995,"ip_address":"","ucode":"49644059B512BE","user_header":"https://static001.geekbang.org/account/avatar/00/19/b9/eb/6bdab896.jpg","comment_is_top":false,"comment_ctime":1575621090,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575621090","product_id":100039001,"comment_content":"https:&#47;&#47;github.com&#47;murreIsCoding&#47;auth<br>根据老师教程编写的实战","like_count":0},{"had_liked":false,"id":159385,"user_name":"progyoung","can_delete":false,"product_type":"c1","uid":1014692,"ip_address":"","ucode":"0B4898AE78F9F5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7b/a4/24955994.jpg","comment_is_top":false,"comment_ctime":1575612510,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1575612510","product_id":100039001,"comment_content":"这就是需求分析的迭代嘛，看来是跟面向对象关系不大","like_count":0,"discussions":[{"author":{"id":1661704,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","nickname":"丁丁历险记","note":"","ucode":"A43829E454C067","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":74333,"discussion_content":"挺大的，渐进式正交分解，模型抽象，ocp 边界确立。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575642823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159383,"user_name":"王一之","can_delete":false,"product_type":"c1","uid":1620113,"ip_address":"","ucode":"7E13332BAEC2F8","user_header":"https://static001.geekbang.org/account/avatar/00/18/b8/91/8a5c3ec6.jpg","comment_is_top":false,"comment_ctime":1575612277,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575612277","product_id":100039001,"comment_content":"我看有些案例还会带上一个随机字符串的参数","like_count":0},{"had_liked":false,"id":159342,"user_name":"carol","can_delete":false,"product_type":"c1","uid":1239823,"ip_address":"","ucode":"B0DD5C80414694","user_header":"https://static001.geekbang.org/account/avatar/00/12/eb/0f/67a7142a.jpg","comment_is_top":false,"comment_ctime":1575602600,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575602600","product_id":100039001,"comment_content":"从模糊的需求中得到功能点，根据功能点提供解决方案，不断提问发现解决方案中问题进行迭代，最终确定一个合理的解决方案，对最终的解决方法在进行描述，得到一个合理的、可落地的需求描述。","like_count":0},{"had_liked":false,"id":158740,"user_name":"shniu","can_delete":false,"product_type":"c1","uid":1019555,"ip_address":"","ucode":"E64CD8BED96D8D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8e/a3/d7e5fe8a.jpg","comment_is_top":false,"comment_ctime":1575444915,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575444915","product_id":100039001,"comment_content":"针对需求不明确，表述含糊，理解上存在二义性的情况，只能把这些都搞清楚，这就体现出了一个良好的工作习惯和解决问题的方法的重要性。我的一般做法是：首先，试图理解需求，把有疑问的地方列出来，将这些问题分为功能性需求的问题和非功能性需求的问题，针对这两类问题分别解决，功能性需求问题，属于业务范畴，可能是自己的业务领域知识不足，也可能是功能需求描述不够细或者考虑不周全，去找相关人沟通，并不断积累业务知识和业务经验；对与非功能性需求，这个一般属于系统固有复杂度，需要自己多思考，查阅资料，借鉴他人的经验，找leader和同事沟通方案，不断优化调整，总之主动成长是必要的。<br><br>1. 需求理解，对领域知识进行强化，方式是沟通、搜索资料等<br>2. 根据实际业务估算业务对系统的非功能性的要求<br>3. 弄清楚需要用到的技术<br>4. 做技术 Spike<br>5. 设计技术实现方案<br>6. 设计测试方案，可能会调整对应的设计<br>7. 遇到问题解决问题","like_count":0},{"had_liked":false,"id":158518,"user_name":"sulatwx","can_delete":false,"product_type":"c1","uid":1348141,"ip_address":"","ucode":"366237F13DE8A7","user_header":"","comment_is_top":false,"comment_ctime":1575392787,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575392787","product_id":100039001,"comment_content":"课后思考：出现需求不明确的开发任务，大多是客户自己也不清楚要实现什么，或者说不清楚系统能实现到什么程度。这种情况下，不妨假设自己就是客户，充分了解客户的业务，或者参考以前类似的项目经验提出解决方案。","like_count":0},{"had_liked":false,"id":158493,"user_name":"Y024","can_delete":false,"product_type":"c1","uid":1018056,"ip_address":"","ucode":"397126D2E17997","user_header":"https://static001.geekbang.org/account/avatar/00/0f/88/c8/ae476935.jpg","comment_is_top":false,"comment_ctime":1575383334,"is_pvip":true,"discussion_count":0,"race_medal":2,"score":"1575383334","product_id":100039001,"comment_content":"Day029 13<br>针对不明确需求，通过“提出问题，解决问题”的方法，不断迭代逼近现实。其实 Kent Beck 推荐的 TDD 编码方式和这个方法也是类似：编写测试代码就好像是向系统提问题，编写系统代码是为了回答问题，这样的对话不断反复，最后生成的就是我们所需要的系统。","like_count":0},{"had_liked":false,"id":158492,"user_name":"圆圆","can_delete":false,"product_type":"c1","uid":1474095,"ip_address":"","ucode":"D89A0EAE7D16F0","user_header":"https://static001.geekbang.org/account/avatar/00/16/7e/2f/913e6cd5.jpg","comment_is_top":false,"comment_ctime":1575383213,"is_pvip":false,"replies":[{"id":"60683","content":"sha是单向加密算法 不知道是不是你误解了 ","user_name":"作者回复","user_name_real":"王争","uid":"1190123","ctime":1575423954,"ip_address":"","comment_id":158492,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1575383213","product_id":100039001,"comment_content":"我有一些疑问，即然是防止黑客攻击，那么着重点不应该放在加密算法上吗？<br>我们即使用了sha算法，但是明文还是明明白白的放着。黑客把几个变量试几次之后就知道我们是什么大概情况进行的加密。他自己就可以造参数进行模拟。<br>我觉得对黑客来说，即使最后一种也和第一种一样简单。<br>希望大佬帮忙解答下疑问，感谢～","like_count":0,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"王争","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476745,"discussion_content":"sha是单向加密算法 不知道是不是你误解了 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575423954,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158458,"user_name":"相逢是缘","can_delete":false,"product_type":"c1","uid":1060730,"ip_address":"","ucode":"CB299F53A95654","user_header":"https://static001.geekbang.org/account/avatar/00/10/2f/7a/ab6c811c.jpg","comment_is_top":false,"comment_ctime":1575376720,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575376720","product_id":100039001,"comment_content":"打卡<br>1、需求分析是一个不断优化的过程，可以先给一个简单的方案，然后不断的优化，最后形成一个可执行、可落地的需求列表；<br>2、对于不熟悉的领域（方向），这里面要先搞清楚需求中的一些概念，进行技术调研，先做一个最基础的需求分析，可以很简单，再进行一步一步细节优化（优化的过程也是理解需求，确认需求的过程）；<br>3、形成文档（流程图、说明等）并存档进行文档的版本管理，这样后续在进行工作交接的时候，新来人员可以顺着文档修改记录，理清思路，快速熟悉业务。","like_count":0},{"had_liked":false,"id":158146,"user_name":"Paul Shan","can_delete":false,"product_type":"c1","uid":1593140,"ip_address":"","ucode":"32D99989028284","user_header":"","comment_is_top":false,"comment_ctime":1575338639,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575338639","product_id":100039001,"comment_content":"需求是不断被追问下的产物，一开始的方案是迭代的起点，不要求尽善尽美，如果能充分理解业务问题，目的就已经达到。把这个方案放到各种场景下，不断扩充和调整，然后从安全性，效率，易用性，交付时间等维度再去权衡取舍，得出一个解决方案，整个过程确实费心费力，最后往往不是一个完美方案，而是权衡取舍各种条件下的折中，这可能就是工程的本质。","like_count":0},{"had_liked":false,"id":158121,"user_name":"程序员小跃","can_delete":false,"product_type":"c1","uid":1015483,"ip_address":"","ucode":"25BB96E0791A60","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7e/bb/947c329a.jpg","comment_is_top":false,"comment_ctime":1575335633,"is_pvip":true,"discussion_count":3,"race_medal":0,"score":"1575335633","product_id":100039001,"comment_content":"拿到这个需求，第一反应，自己有一个小的应用就是需要这种鉴权，想过好几种方案，最终自己选择的是jwt的方式，不过基本功能都在后端，前端并没有像老师这样考虑周全，也不知道当初自己是怎么想的。不过这下好了，需求对口，跟着课程学习，就可以找到属于适合我自己的方式来解决困惑。<br>","like_count":0,"discussions":[{"author":{"id":1032484,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c1/24/0ea08c9e.jpg","nickname":"柴柴777","note":"","ucode":"5208B935ECB6F7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":76479,"discussion_content":"不写后端的我感觉就是看看,学学思想","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575818320,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1015483,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7e/bb/947c329a.jpg","nickname":"程序员小跃","note":"","ucode":"25BB96E0791A60","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1032484,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c1/24/0ea08c9e.jpg","nickname":"柴柴777","note":"","ucode":"5208B935ECB6F7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":76767,"discussion_content":"学习下思想，毕竟是通用的。万一以后就用上了呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575853217,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":76479,"ip_address":""},"score":76767,"extra":""},{"author":{"id":1392730,"avatar":"https://static001.geekbang.org/account/avatar/00/15/40/5a/e65e8c40.jpg","nickname":"wl","note":"","ucode":"45062AA2460F1F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1032484,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c1/24/0ea08c9e.jpg","nickname":"柴柴777","note":"","ucode":"5208B935ECB6F7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":88591,"discussion_content":"同感","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576719706,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":76479,"ip_address":""},"score":88591,"extra":""}]}]},{"had_liked":false,"id":158102,"user_name":"jon","can_delete":false,"product_type":"c1","uid":1253287,"ip_address":"","ucode":"5768A34E292CAA","user_header":"https://static001.geekbang.org/account/avatar/00/13/1f/a7/d379ca4f.jpg","comment_is_top":false,"comment_ctime":1575333310,"is_pvip":false,"replies":[{"id":"60685","content":"下一节课有的","user_name":"作者回复","user_name_real":"王争","uid":"1190123","ctime":1575424121,"ip_address":"","comment_id":158102,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1575333310","product_id":100039001,"comment_content":"老师能不能给个实例代码","like_count":0,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"王争","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476631,"discussion_content":"下一节课有的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575424121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158080,"user_name":"任鹏斌","can_delete":false,"product_type":"c1","uid":1104086,"ip_address":"","ucode":"34319B05EA6E74","user_header":"https://static001.geekbang.org/account/avatar/00/10/d8/d6/47da34bf.jpg","comment_is_top":false,"comment_ctime":1575327606,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575327606","product_id":100039001,"comment_content":"这个方案简单实用，对安全性要求不是特别高的系统很实用。","like_count":0},{"had_liked":false,"id":158050,"user_name":"Jian","can_delete":false,"product_type":"c1","uid":1107305,"ip_address":"","ucode":"17ED4919F22DEC","user_header":"https://static001.geekbang.org/account/avatar/00/10/e5/69/719ec5d0.jpg","comment_is_top":false,"comment_ctime":1575303216,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575303216","product_id":100039001,"comment_content":"今天这篇文章讲的就是工作所做的，marketing api，授权方案完全一样。","like_count":0},{"had_liked":false,"id":158041,"user_name":"Woosang","can_delete":false,"product_type":"c1","uid":1220919,"ip_address":"","ucode":"BB63C9F1BBDF61","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/CJYUnMtcdu7GdMGxzVicTYpfsbhTKzrCIpoLIJxn8ByWsq1ol35RZLe1u4eWJpFhGK7ISpee2slWYokn0vBicw7A/132","comment_is_top":false,"comment_ctime":1575301465,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575301465","product_id":100039001,"comment_content":"UML之类只是一种表达方式，关键还是得理清思路，逐步迭代，也符合PMP的渐进明细的方式","like_count":0},{"had_liked":false,"id":158038,"user_name":"Woosang","can_delete":false,"product_type":"c1","uid":1220919,"ip_address":"","ucode":"BB63C9F1BBDF61","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/CJYUnMtcdu7GdMGxzVicTYpfsbhTKzrCIpoLIJxn8ByWsq1ol35RZLe1u4eWJpFhGK7ISpee2slWYokn0vBicw7A/132","comment_is_top":false,"comment_ctime":1575301333,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575301333","product_id":100039001,"comment_content":"UML之类只是一种表达方式，关键还是得理清思路，逐步迭代，也符合PMP中渐进明细的思路","like_count":0},{"had_liked":false,"id":158030,"user_name":"南山","can_delete":false,"product_type":"c1","uid":1119593,"ip_address":"","ucode":"94656FE4A6C378","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/69/187b9968.jpg","comment_is_top":false,"comment_ctime":1575299851,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1575299851","product_id":100039001,"comment_content":"工作中的CRUD也是可以做的很精彩，业务有一定复杂度情况下，做共性抽象，识别稳定、易变的功能，对易变的功能通过一定程度的抽象，支持可扩展以及代码复用。对稳定的功能或者流程进行抽象，提高可读性、可维护性等等，这些都是可以做的比较出彩的地方，最好是基于充血模型，上来就MVC怼，早晚会玩不下去，对自己也不会有什么成长。<br>稍微复杂的业务场景，可以尝试充血模型来搞，至少是来思考～～～","like_count":0},{"had_liked":false,"id":158024,"user_name":"平风造雨","can_delete":false,"product_type":"c1","uid":1014349,"ip_address":"","ucode":"F9EE4704F31E22","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7a/4d/b0228a1a.jpg","comment_is_top":false,"comment_ctime":1575299295,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1575299295","product_id":100039001,"comment_content":"之前做相关非明确业务性需求，比较喜欢参考调研一些开源的代码，比如之前工作里做鉴权，参考了spring security相关jwt的实现","like_count":0},{"had_liked":false,"id":157993,"user_name":"小喵喵","can_delete":false,"product_type":"c1","uid":1062444,"ip_address":"","ucode":"FDBBB2A59DB8B6","user_header":"https://static001.geekbang.org/account/avatar/00/10/36/2c/8bd4be3a.jpg","comment_is_top":false,"comment_ctime":1575295554,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575295554","product_id":100039001,"comment_content":"期待老师把代码放出来了。","like_count":0},{"had_liked":false,"id":157961,"user_name":"随心而至","can_delete":false,"product_type":"c1","uid":1097836,"ip_address":"","ucode":"31866865255101","user_header":"https://static001.geekbang.org/account/avatar/00/10/c0/6c/29be1864.jpg","comment_is_top":false,"comment_ctime":1575290463,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575290463","product_id":100039001,"comment_content":"一.明确需求<br>之前开发一些比较大的需求时，产品经理总会洋洋洒洒写很多需求。<br>1.首先分清需求的优先级，哪些必须要做，哪些后面要做的<br>2.分析可行性。目前各种资源，个人能力是否跟得上。<br>2.确定需求里面的细节。产品经理不可能做到给你很明确的if else，所以很多细节就需要反复沟通<br>二.设计<br>2.1 梳理逻辑<br>2.2 模块设计，代码设计<br>2.3 编码<br><br>面试：<br>1.需求大意明确。用自己的话复述面试官的问题，看看自己的理解和他提问的是不是一个东西<br>2.争取一定的思考时间，然后按照一定的逻辑说明自己初步的理解，过程中反复确认<br>3.结合面试官的反馈，给个最终版的回答。（我没有面过多少次，说的不一定对）","like_count":0},{"had_liked":false,"id":157931,"user_name":"Cy23","can_delete":false,"product_type":"c1","uid":1591293,"ip_address":"","ucode":"8DC561C5151758","user_header":"https://static001.geekbang.org/account/avatar/00/18/47/fd/895f0c27.jpg","comment_is_top":false,"comment_ctime":1575284895,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575284895","product_id":100039001,"comment_content":"最近做二开的时候，很多新需求都不好确认，本来觉得很简单，当看完没有文档的代码，发现开发成本很大，超出预期，很多如果不大改都无法完成，囧","like_count":0},{"had_liked":false,"id":157882,"user_name":"守拙","can_delete":false,"product_type":"c1","uid":1738326,"ip_address":"","ucode":"F594B2DA3F6D4F","user_header":"https://static001.geekbang.org/account/avatar/00/1a/86/56/509535da.jpg","comment_is_top":false,"comment_ctime":1575276076,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575276076","product_id":100039001,"comment_content":"课堂讨论answer:<br><br>对于开放性的设计问题,简单说下个人的处理方式:<br><br>首先,理解问题的主要矛盾,即问题的核心是什么,What&#39;s the point;<br>在充分理解问题的基础上,在脑海中思考下和该问题相关的几种方案轮廓;<br>然后权衡利弊,选择一种最适合当下情形的方案;<br>最后以方案为主心骨,丰富方案的具体细节.<br><br>答的比较主观,希望能起到一个抛砖引玉的作用.<br>","like_count":0},{"had_liked":false,"id":157854,"user_name":"teddytyy","can_delete":false,"product_type":"c1","uid":1268738,"ip_address":"","ucode":"E1569D81A4154E","user_header":"https://static001.geekbang.org/account/avatar/00/13/5c/02/e7af1750.jpg","comment_is_top":false,"comment_ctime":1575270912,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575270912","product_id":100039001,"comment_content":"对于开放性的设计问题，要就需求方的实际业务场景提问，搞清楚，具体的需求点(最好能发现业务痛点)再进行详细设计","like_count":0},{"had_liked":false,"id":157851,"user_name":"风行者","can_delete":false,"product_type":"c1","uid":1541934,"ip_address":"","ucode":"F058640CF77A35","user_header":"https://static001.geekbang.org/account/avatar/00/17/87/2e/ea54c240.jpg","comment_is_top":false,"comment_ctime":1575270299,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575270299","product_id":100039001,"comment_content":"整个分析过程从最低要求实现角度、安全性考虑、数据接入能力到最终需求确定，逐步推进，既最大限度实现了要求，又不过度设计。期望看到这个场景下一篇。","like_count":0},{"had_liked":false,"id":157828,"user_name":"will","can_delete":false,"product_type":"c1","uid":1156207,"ip_address":"","ucode":"7A7DBE3E0EEAEB","user_header":"https://static001.geekbang.org/account/avatar/00/11/a4/6f/672a27d4.jpg","comment_is_top":false,"comment_ctime":1575266905,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575266905","product_id":100039001,"comment_content":"学习了","like_count":0},{"had_liked":false,"id":157823,"user_name":"一名小学生","can_delete":false,"product_type":"c1","uid":1137292,"ip_address":"","ucode":"5C73082E6B6370","user_header":"https://static001.geekbang.org/account/avatar/00/11/5a/8c/1fec5fa2.jpg","comment_is_top":false,"comment_ctime":1575266190,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575266190","product_id":100039001,"comment_content":"打卡，跟上进度了～<br>需求分析的过程实际上是一个不断迭代优化的过程。我们不要试图一下就能给出一个完美的解决方案，而是先给出一个粗糙的、基础的方案，有一个迭代的基础，然后再慢慢优化，这样一个思考过程能让我们摆脱无从下手的窘境。","like_count":0},{"had_liked":false,"id":157810,"user_name":"grey927","can_delete":false,"product_type":"c1","uid":1202782,"ip_address":"","ucode":"833E02ED835B4A","user_header":"https://static001.geekbang.org/account/avatar/00/12/5a/5e/a897cb0d.jpg","comment_is_top":false,"comment_ctime":1575263042,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1575263042","product_id":100039001,"comment_content":"很多微服务里面需要用到“当前用户”这个概念，是不是应该把“当前用户”也包含到token信息中","like_count":0,"discussions":[{"author":{"id":1087243,"avatar":"https://static001.geekbang.org/account/avatar/00/10/97/0b/a943bcb3.jpg","nickname":"zhou","note":"","ucode":"E1CE8575B3F106","race_medal":3,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":71799,"discussion_content":"Jwt了解下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575458737,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1402322,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epEbrWwrlSUzSF5Cru29ZT8LyDCNTglzblVPAb4AuH9gOkc0mibAM9z5MvRxDXvFI3g5FW6OnLSkqA/132","nickname":"风AA","note":"","ucode":"A738617C2FA3E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70407,"discussion_content":"我是把 userId 存进去了...很方便","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575353406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157809,"user_name":"DullBird","can_delete":false,"product_type":"c1","uid":1110494,"ip_address":"","ucode":"80E2FD5F9687CB","user_header":"https://static001.geekbang.org/account/avatar/00/10/f1/de/3ebcbb3f.jpg","comment_is_top":false,"comment_ctime":1575262989,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575262989","product_id":100039001,"comment_content":"这个🌰之前在研究网关的时候，看到的hamc加签，后来运用到系统登录后端验证接口的加密验证上面。<br>对于课后讨论，我觉得要有各自的一套分析的思路。我觉得UDD的思路就还不错。<br>1.  先理解有哪些用例(即系统外用户的期望，做这个东西的核心目的，解决了什么问题)<br>2. 根据每一个用例，询问用例场景，这个环节尽可能的多的场景能让设计漏洞更少。<br>3. 分析和重新组织用例(比如公共模块，需要抽象的核心用例业务)<br>如果遇到开放性设计问题，需求的调研可以根据1，2来询问和讨论，但是比如鉴权这个功能，我设计的时候选择了用户密码加密，但是没想起来用户密码会被盗的安全性问题，这块的能力我觉得需要个人自己去多看多了解。不知道还有什么好的办法可以提升发现这类问题的能力。","like_count":0},{"had_liked":false,"id":157720,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","comment_is_top":false,"comment_ctime":1575250136,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575250136","product_id":100039001,"comment_content":"虽然对于程序员来说需求分析很重要，但最终需求的明确是产品经理的职责，即便是程序员自己分析需求最终也要与产品经理沟通确认。技术实现另当别论！","like_count":0},{"had_liked":false,"id":157707,"user_name":"Heiky","can_delete":false,"product_type":"c1","uid":1623626,"ip_address":"","ucode":"03AA79E1BC4AE4","user_header":"https://static001.geekbang.org/account/avatar/00/18/c6/4a/3bd896fc.jpg","comment_is_top":false,"comment_ctime":1575249170,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575249170","product_id":100039001,"comment_content":"打卡，最近正好做一个接口鉴权，准备用这个了。","like_count":0},{"had_liked":false,"id":157703,"user_name":"Tom.G","can_delete":false,"product_type":"c1","uid":1206034,"ip_address":"","ucode":"7929B45C1A51F8","user_header":"https://static001.geekbang.org/account/avatar/00/12/67/12/5c6eb568.jpg","comment_is_top":false,"comment_ctime":1575248764,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575248764","product_id":100039001,"comment_content":"面试中遇到开放性的问题，先把能想到的思路说下，一般会和面试官有交流，交流的过程中（面试官可能会提醒）再进行补充","like_count":0},{"had_liked":false,"id":157696,"user_name":"小晏子","can_delete":false,"product_type":"c1","uid":1132337,"ip_address":"","ucode":"3AAA6FB5ACB6AE","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/31/f35367c8.jpg","comment_is_top":false,"comment_ctime":1575248044,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1575248044","product_id":100039001,"comment_content":"整个方案的分析过程是比较关键的，比如文中的几轮方案分析对于初级工程师来讲可能根本想不到，尤其是“重放攻击”，那么应该怎么办呢？这就需要首先先参考其他人的解决方案，然后综合给出自己的方案，在找组内同事们一起讨论，分析利弊，最终给出大家都认同的方案，面试中遇到开放性问题也一样，先给出自己的解决方案，然后和面试官一起探讨方案的利弊，再进行改动，不要紧张，很少有人一上来就能给出完美方案。","like_count":0},{"had_liked":false,"id":157689,"user_name":"再见孙悟空","can_delete":false,"product_type":"c1","uid":1025518,"ip_address":"","ucode":"57E12A2F9CD915","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a5/ee/6bbac848.jpg","comment_is_top":false,"comment_ctime":1575247343,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575247343","product_id":100039001,"comment_content":"有收获不错！","like_count":0},{"had_liked":false,"id":157685,"user_name":"Xs.Ten","can_delete":false,"product_type":"c1","uid":1128376,"ip_address":"","ucode":"2368B9BDDDEE2B","user_header":"https://static001.geekbang.org/account/avatar/00/11/37/b8/c887a5ea.jpg","comment_is_top":false,"comment_ctime":1575246985,"is_pvip":true,"discussion_count":3,"race_medal":0,"score":"1575246985","product_id":100039001,"comment_content":"争哥，有个问题请教下：对于服务器在国内，海外用户鉴权，时间戳怎么跟服务器验证？","like_count":0,"discussions":[{"author":{"id":1102465,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d2/81/db154f5f.jpg","nickname":"飞鱼","note":"","ucode":"F26A7B10FB32CB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70243,"discussion_content":"统一换成UTC时间处理就可以了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575337976,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1443663,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIang00R9vkklnkFCLhzRysNfocr0sLnCdoZwOT3UkulAPefk5BDvd0PfIeQSODSQg1DjKWUmJOaA/132","nickname":"陈迎春","note":"","ucode":"2870BA6D6E5B1E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69157,"discussion_content":"我也有想过过这个问题，客户端和服务器时间不是同步的，虽然时间戳不分时区，但是如果连时间都不同步，如何使用时间戳鉴权？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575266044,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1019835,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8f/bb/7068f251.jpg","nickname":"老姜","note":"","ucode":"FB7962F08A9F3B","race_medal":3,"user_type":1,"is_pvip":false},"reply_author":{"id":1443663,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIang00R9vkklnkFCLhzRysNfocr0sLnCdoZwOT3UkulAPefk5BDvd0PfIeQSODSQg1DjKWUmJOaA/132","nickname":"陈迎春","note":"","ucode":"2870BA6D6E5B1E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69752,"discussion_content":"在一定范围内就可以了，没必要太严格","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575298218,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":69157,"ip_address":""},"score":69752,"extra":""}]}]},{"had_liked":false,"id":157683,"user_name":"deepz","can_delete":false,"product_type":"c1","uid":1570088,"ip_address":"","ucode":"4BD23A44CDB384","user_header":"https://static001.geekbang.org/account/avatar/00/17/f5/28/898a6947.jpg","comment_is_top":false,"comment_ctime":1575246757,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1575246757","product_id":100039001,"comment_content":"上班地铁中。。打卡～","like_count":0},{"had_liked":false,"id":157680,"user_name":"miracle","can_delete":false,"product_type":"c1","uid":1276137,"ip_address":"","ucode":"FD7074F1062AE9","user_header":"https://static001.geekbang.org/account/avatar/00/13/78/e9/9d807269.jpg","comment_is_top":false,"comment_ctime":1575246639,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575246639","product_id":100039001,"comment_content":"1. pwd 尽量不要明文存，万一被脱裤会很严重<br>2. 为了强度足够高通常pwd需要足够长，可以考虑加密完以后压缩存储，减轻存储压力","like_count":0},{"had_liked":false,"id":157656,"user_name":"Chen","can_delete":false,"product_type":"c1","uid":1503113,"ip_address":"","ucode":"C1128558AB5BC4","user_header":"https://static001.geekbang.org/account/avatar/00/16/ef/89/8c73a24d.jpg","comment_is_top":false,"comment_ctime":1575243841,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575243841","product_id":100039001,"comment_content":"需求都是产品带着一张嘴过来的😊","like_count":0},{"had_liked":false,"id":157652,"user_name":"老姜","can_delete":false,"product_type":"c1","uid":1019835,"ip_address":"","ucode":"FB7962F08A9F3B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8f/bb/7068f251.jpg","comment_is_top":false,"comment_ctime":1575239964,"is_pvip":false,"discussion_count":4,"race_medal":3,"score":"1575239964","product_id":100039001,"comment_content":"第三轮的生成url里面为什么还需要传ts，token里面已经有ts了吧？","like_count":0,"discussions":[{"author":{"id":1117935,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0e/ef/030e6d27.jpg","nickname":"xl000","note":"","ucode":"6FEABE7F7D0DC0","race_medal":5,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":68911,"discussion_content":"文中token生成算法是不可逆的，所以仍要传那些参数","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575245302,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134761,"avatar":"https://static001.geekbang.org/account/avatar/00/11/50/a9/3f8c7418.jpg","nickname":"冰糕不冰","note":"","ucode":"B754FE464BA426","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":68890,"discussion_content":"ts是为了告诉服务端这个token生成时间！服务端用当前时间跟这个ts比较，超过一分钟则判定请求过期","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575243518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1022127,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/98/af/3945cea4.jpg","nickname":"一剑","note":"","ucode":"93ADD5B5215D4C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70909,"discussion_content":"你要这么想：服务器验证token（签名）的时候，除了秘钥外其他几个参数全都来自客户端请求，不传ts的话服务端怎么生成token_s（签名）呢：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575382993,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1248576,"avatar":"https://static001.geekbang.org/account/avatar/00/13/0d/40/f70e5653.jpg","nickname":"前端西瓜哥","note":"","ucode":"150130C34CD1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":68956,"discussion_content":"1. 作为判断是否过期的依据\n2. 是进行哈希生成token的必要参数","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575247912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157645,"user_name":"Geek","can_delete":false,"product_type":"c1","uid":1514882,"ip_address":"","ucode":"2F1FA3519FAB50","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKyiafvkibXnTOpIJxlhndHpSDMsqja9AajKYtYgGEGtFWtBb2Mg8DRVjqlWyIxl1piaT4qpMkwerQUg/132","comment_is_top":false,"comment_ctime":1575218657,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575218657","product_id":100039001,"comment_content":"打卡，期待下一讲","like_count":0},{"had_liked":false,"id":157642,"user_name":"William","can_delete":false,"product_type":"c1","uid":1346215,"ip_address":"","ucode":"55F5D9DEE485B1","user_header":"https://static001.geekbang.org/account/avatar/00/14/8a/a7/674c1864.jpg","comment_is_top":false,"comment_ctime":1575217711,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1575217711","product_id":100039001,"comment_content":"需求分析，一步步地找到合理的技术方案。 <br><br>1、给调用方分配一个：渠道码对应一个专属的x位的密钥（一般32位）<br>2、然后约定加密的字段。<br>3、调用方加密， 服务端解密，比较结果-放行or拒绝。","like_count":0},{"had_liked":false,"id":157641,"user_name":"编程界的小学生","can_delete":false,"product_type":"c1","uid":1593289,"ip_address":"","ucode":"4A5BE9A5E877FA","user_header":"https://static001.geekbang.org/account/avatar/00/18/4f/c9/9f51fd27.jpg","comment_is_top":false,"comment_ctime":1575217579,"is_pvip":false,"discussion_count":22,"race_medal":0,"score":"1925720566187","product_id":100039001,"comment_content":"工作中遇到非crud的需求我就会想尽一切办法让他通用，基本需求分析和需求设计的时间占用百分之五十，开发和重构到自认为最优占用百分之五十。比如最简单的验证码功能，几乎每个项目都有，我就封装一套验证码服务，主要功能有你在配置文件里配置好需要被验证码拦截的路径，这里还要考虑到通配符，空格等等细节和可扩展的点，内置图片验证码，极验证，手机验证以及自定义验证码等等，总之我认为如果有机会遇到非crud的需求，一定要好好珍惜，好好把握，把他打造成属于自己的产品，这样会让自己下意识的去想尽一切办法把他做到最优，亲儿子一样的待遇，再也不会无脑cv，连变量名可能都要认真的重构一两遍😹😹😹","like_count":449},{"had_liked":false,"id":157684,"user_name":"辣么大","can_delete":false,"product_type":"c1","uid":1396951,"ip_address":"","ucode":"AB308B6DCA0108","user_header":"https://static001.geekbang.org/account/avatar/00/15/50/d7/f82ed283.jpg","comment_is_top":false,"comment_ctime":1575246785,"is_pvip":true,"discussion_count":30,"race_medal":0,"score":"1436094323649","product_id":100039001,"comment_content":"一句话：使用进化算法的思想，提出一个MVP（最小可行性产品），逐步迭代改进。<br><br>拿到这个需求，假设我们不了解接口鉴权，需求又不明确，我会我自己如下问题：<br>1.什么叫接口鉴权？搞清基本概念<br>2.接口鉴权最佳实践是什么？技术调研<br>3.appid和secret key从哪里来？用户自己申请还是我们授权？用户申请是以什么方式申请（网页还是邮件？申请的网页有人做了么？）追问下去。<br>4.appid secretkey存储在什么地方呢？数据存储<br>5.用户如何使用？需要为用户提供接口鉴权使用手册和文档，及示例代码。写用户手册，文档。<br>6.这个功能如何测试？提前想好如何测试<br>7.接口鉴权功能何时上线？估计工期<br>8.鉴权成功或失败返回码和信息定义？约定返回结果<br><br>关于防止重放攻击：请求参数中还可以加入nonce（随机正整数），两次请求的nonce不能重复，timestamp和nonce结合进一步防止重放攻击。","like_count":335},{"had_liked":false,"id":158148,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1575338773,"is_pvip":false,"discussion_count":7,"race_medal":0,"score":"727424811797","product_id":100039001,"comment_content":"OAuth 2.0 + 网关（如Zuul）+ 认证中心 + AOP可以实现。<br>极客时间《微服务架构实战160讲》里介绍了OAuth 2.0企业级的解决方案，小争哥的方案适合快速落地。<br>实际业务中如果安全等级没这么高，直接生成Token鉴权就可以。通过业务模型规避风险：<br>1. 充值类业务，就算对方篡改接口，最终结果可以通调用证金融机构的接口验证是否有效，不会给公司带来损失。<br>2. 如果安全等级非常高，比如提现、转账可以通过发送手机短信，确保是本人操作。<br>3. 如果是商品信息查询类接口，防止第三方爬取数据，可以在调用一定次数后加入”人机验证“（输入图片识别码、拼图）。<br>4. 根据IP限制访问次数。<br>5. 服务器间调用可以绑定mac地址、IP。<br>6. 服务器、客户端通过架设私有VPN进行通信，将安全问题转移到VPN上，降低业务复杂度的同时还可以避免加解密带来的性能损耗，提升性能。<br>7. 调用接口时通过付费方式（如实名认证、银行四要素验证这些调用一次都是要收费的），防止恶意调用。<br>8. 通过独立加密硬件（如U盾）+ 独立密码验证器（Google验证器）+ 语音识别 + 面部识别（刷脸支付） + 指纹 + 多人同时输入动态秘钥（核打击时发射程序）。<br>9. 安全性会降低系统性能适可而止。<br>极客时间《左耳听风》专栏中介绍了亚马逊在设计开发微服务时，就已经做好了随时对外网开放的准备，由于没有阅读完整个专栏，不知道后面有没有详细介绍。","like_count":169,"discussions":[{"author":{"id":1092169,"avatar":"https://static001.geekbang.org/account/avatar/00/10/aa/49/51790edb.jpg","nickname":"落尘kira","note":"","ucode":"D203B519E43F85","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":243472,"discussion_content":"常见的平台设计中，通常都会使用签名鉴权的方式，比如用appid + salt（随机数）+ secret key + 各种你随意的参数 进行加密（比如MD5）后生成所谓的sign签名，本质上跟token一样，就是换种说法","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1587543453,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1351487,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9f/3f/a51e6376.jpg","nickname":"IT之眼","note":"","ucode":"AB0F40D96C38D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1092169,"avatar":"https://static001.geekbang.org/account/avatar/00/10/aa/49/51790edb.jpg","nickname":"落尘kira","note":"","ucode":"D203B519E43F85","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364433,"discussion_content":"我正这么使用的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617468513,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":243472,"ip_address":""},"score":364433,"extra":""}]},{"author":{"id":1591223,"avatar":"https://static001.geekbang.org/account/avatar/00/18/47/b7/b30472fd.jpg","nickname":"JerryZhu","note":"","ucode":"76850CD45786C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303345,"discussion_content":"所以说，安全这东西本身就不存在的，只是增加非法用户的成本而已， 不同级别应用的鉴权等级自然不同，大部分接口其实token够用","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1599213400,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1591223,"avatar":"https://static001.geekbang.org/account/avatar/00/18/47/b7/b30472fd.jpg","nickname":"JerryZhu","note":"","ucode":"76850CD45786C1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303361,"discussion_content":"精辟","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599217030,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":303345,"ip_address":""},"score":303361,"extra":""}]},{"author":{"id":1082785,"avatar":"https://static001.geekbang.org/account/avatar/00/10/85/a1/2442332c.jpg","nickname":"郭俊杰","note":"","ucode":"D328E5738A4413","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278965,"discussion_content":"核打击时发射程序都知道，厉害了我的哥。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591264613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1082785,"avatar":"https://static001.geekbang.org/account/avatar/00/10/85/a1/2442332c.jpg","nickname":"郭俊杰","note":"","ucode":"D328E5738A4413","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":279021,"discussion_content":"红警2里美军因为发射程序太简单，在自己基地炸了","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1591274309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":278965,"ip_address":""},"score":279021,"extra":""}]},{"author":{"id":1165364,"avatar":"https://static001.geekbang.org/account/avatar/00/11/c8/34/fb871b2c.jpg","nickname":"海罗沃德","note":"","ucode":"8704F1D6980FA0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":85746,"discussion_content":"整想買160講呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576571554,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159856,"user_name":"qinsi","can_delete":false,"product_type":"c1","uid":1667175,"ip_address":"","ucode":"090D9C4068FF12","user_header":"https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg","comment_is_top":false,"comment_ctime":1575812069,"is_pvip":true,"replies":[{"id":"61129","content":"嗯嗯，说的有道理~","user_name":"作者回复","comment_id":159856,"uid":"1190123","ip_address":"","utype":1,"ctime":1575896428,"user_name_real":"王争"}],"discussion_count":10,"race_medal":0,"score":"392417836005","product_id":100039001,"comment_content":"光拼url是不够的，只能覆盖如HTTP GET一类参数在url中的请求，对于如POST和PUT一类的请求，因为参数通常在body中，就没有参与token的生成。又因为这样的方案存在允许重放请求的时间间隔，就可能导致的情况是中间人截获了请求，在允许重放的时间间隔内任意修改body中的参数后发送，让接口鉴权形同虚设","like_count":91,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"王争","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477191,"discussion_content":"嗯嗯，说的有道理~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575896428,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1048095,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fe/1f/6a3f2abb.jpg","nickname":"Che Kwas","note":"","ucode":"4CDF9CA041859C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300266,"discussion_content":"安全是个很大的话题，比如token用来防伪造，HMAC用来防篡改，一次性动态口令用来防重放，等等。在一篇介绍如何需求分析的文章里，引入过多的安全概念容易把初学者吓跑了。用一个简简单单的token来带我们需求分析，我很喜欢小峥哥这种风格。","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1598003634,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1909094,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/21/66/85f247e2.jpg","nickname":"谢作作的男人","note":"","ucode":"4F220EA8AEBFB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285425,"discussion_content":"一般将token放在请求头中","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1592832775,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2625916,"avatar":"https://static001.geekbang.org/account/avatar/00/28/11/7c/1a54ff64.jpg","nickname":"Saving","note":"","ucode":"D3FF0773129364","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411441,"discussion_content":"也可以拦截body进行鉴权加密校验","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635929767,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2690172,"avatar":"","nickname":"Geek_设计模式之美","note":"","ucode":"59263416E65594","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383863,"discussion_content":"那么一般鉴权系统 鉴权成功了 是直接返回 true 还是开始调用下一个业务微服务啊?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626257135,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2347137,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d0/81/d5c8e46e.jpg","nickname":"snake","note":"","ucode":"47BFFE4D048156","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336168,"discussion_content":"token一般是放header，也可以和nonce配合使用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608520105,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1596532,"avatar":"https://static001.geekbang.org/account/avatar/00/18/5c/74/3f9e7c14.jpg","nickname":"foreveryi","note":"","ucode":"C322C02C8D1CEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":318669,"discussion_content":"鉴权接口只鉴定权限，不包含其他逻辑处理。所以绝大部分场景下GET请求足够了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603803023,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1042444,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/e8/0c/870d2de4.jpg","nickname":"敲代码的老王","note":"","ucode":"B641FB945F0C04","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1596532,"avatar":"https://static001.geekbang.org/account/avatar/00/18/5c/74/3f9e7c14.jpg","nickname":"foreveryi","note":"","ucode":"C322C02C8D1CEC","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":345496,"discussion_content":"意思是说你要求业务的大部分场景是get请求？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611728687,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":318669,"ip_address":""},"score":345496,"extra":""}]},{"author":{"id":1079780,"avatar":"https://static001.geekbang.org/account/avatar/00/10/79/e4/4b3b9587.jpg","nickname":"JJ","note":"","ucode":"85A77BB2262D58","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":315209,"discussion_content":"那是还需要对body的数据也一起加密生成token吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603251554,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2446024,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/GA9AqKGEdib009iaPw3FSluiaeibCXmen7yFIKicZB8qqEtczZJF2WmwBJ738eExnxDmPREIGjqc4BFVXiamyhuCZASw/132","nickname":"一缕阳光","note":"","ucode":"CA89C1B7CB16C0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1079780,"avatar":"https://static001.geekbang.org/account/avatar/00/10/79/e4/4b3b9587.jpg","nickname":"JJ","note":"","ucode":"85A77BB2262D58","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585381,"discussion_content":"当然","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661503577,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":315209,"ip_address":"广东"},"score":585381,"extra":""}]}]},{"had_liked":false,"id":157661,"user_name":"阿卡牛","can_delete":false,"product_type":"c1","uid":1022247,"ip_address":"","ucode":"0BC43A904C3199","user_header":"https://static001.geekbang.org/account/avatar/00/0f/99/27/47aa9dea.jpg","comment_is_top":false,"comment_ctime":1575244382,"is_pvip":false,"discussion_count":20,"race_medal":0,"score":"113244394078","product_id":100039001,"comment_content":"还有个风险，如果调用方是app，那有可能app被反编译，然后加密算法就被第三方知道了","like_count":26,"discussions":[{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70214,"discussion_content":"如果一定要安全，可以在每次调用的时候先给接口方充值1万元，然后用转账流水做参数加密，避免恶意调用。正常调用的可以在退还部分金额。","likes_number":13,"is_delete":false,"is_hidden":false,"ctime":1575336710,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":2028811,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f5/0b/73628618.jpg","nickname":"兔嘟嘟","note":"","ucode":"5A9042B4C7670C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285303,"discussion_content":"秀...","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1592800526,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":70214,"ip_address":""},"score":285303,"extra":""},{"author":{"id":1535005,"avatar":"https://static001.geekbang.org/account/avatar/00/17/6c/1d/203e2917.jpg","nickname":"zhao健枫的微信ID确实有点长啊","note":"","ucode":"46C5D8EBE40109","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299084,"discussion_content":"你这个逻辑清奇","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597558801,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":70214,"ip_address":""},"score":299084,"extra":""},{"author":{"id":2446024,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/GA9AqKGEdib009iaPw3FSluiaeibCXmen7yFIKicZB8qqEtczZJF2WmwBJ738eExnxDmPREIGjqc4BFVXiamyhuCZASw/132","nickname":"一缕阳光","note":"","ucode":"CA89C1B7CB16C0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585384,"discussion_content":"编码奇才啊！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661503686,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":70214,"ip_address":"广东"},"score":585384,"extra":""}]},{"author":{"id":1149425,"avatar":"https://static001.geekbang.org/account/avatar/00/11/89/f1/0550d38c.jpg","nickname":"XiaoBingBy","note":"","ucode":"21FF86A60FCE68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":100038,"discussion_content":"app 应该走网关  不会走对应服务","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1577235075,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1337598,"avatar":"https://static001.geekbang.org/account/avatar/00/14/68/fe/1353168d.jpg","nickname":"岁月","note":"","ucode":"29A2A2BC3C4FE4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":91108,"discussion_content":"这层楼不行啊, 都没搞清楚, 密码是你输入进去的, 不会放在代码里的. 加密算法被知道了也没什么关系, 而且高性能的加密算法都是不可逆算法, 比如哈希这种, 被知道了也无所谓.","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1576810582,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1134619,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLh8ubWQtDRa6exJtloSwibLliaejpF7434ficyggzukmXE63UlSPvbykoiaVDZo4CbDIIOQsCkicibyn9A/132","nickname":"涉蓝","note":"","ucode":"C1321E29E01625","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1337598,"avatar":"https://static001.geekbang.org/account/avatar/00/14/68/fe/1353168d.jpg","nickname":"岁月","note":"","ucode":"29A2A2BC3C4FE4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":164927,"discussion_content":"这个不是用户的密码，是对外开放的接口接入的应用的密码","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1581239384,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":91108,"ip_address":""},"score":164927,"extra":""},{"author":{"id":2276155,"avatar":"https://static001.geekbang.org/account/avatar/00/22/bb/3b/6e020a32.jpg","nickname":"多学多看多记","note":"","ucode":"0670C833007510","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1337598,"avatar":"https://static001.geekbang.org/account/avatar/00/14/68/fe/1353168d.jpg","nickname":"岁月","note":"","ucode":"29A2A2BC3C4FE4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":400931,"discussion_content":"层主意思应该当是截取到请求时，通过破解加密算法，可以随意修改url、请求体达到非法操作。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633490948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":91108,"ip_address":""},"score":400931,"extra":""}]},{"author":{"id":1240946,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ef/72/4e5fa762.jpg","nickname":"lifeCycle","note":"","ucode":"B227D4FD713EB3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300943,"discussion_content":"加密部分放到so中，并校验包名和签名证书能屏蔽一部分人破解","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598331939,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1366402,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIFicK7Bn88Lqte7rURlw3Lf53oAu1jhiciaVlKLib48dlIAOAF03L7tjQcx1ia5AJI26S7HIxwx780Qzw/132","nickname":"操盘手爱德华","note":"","ucode":"CAAF3E6DC9D5FD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":72656,"discussion_content":"混淆有啥作用，只是改下名字。该看还是看。主要还是把加密过程放so里面吧","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575512036,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1602866,"avatar":"https://static001.geekbang.org/account/avatar/00/18/75/32/781fc162.jpg","nickname":"有bear来","note":"","ucode":"D6764934D46EDC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306828,"discussion_content":"同样的问题 客户端限制方法相对还比较多  如果是网页访问接口 加密算法直接扔到js更容易被搞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600399287,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1082785,"avatar":"https://static001.geekbang.org/account/avatar/00/10/85/a1/2442332c.jpg","nickname":"郭俊杰","note":"","ucode":"D328E5738A4413","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278970,"discussion_content":"是个好问题，需要平衡考虑一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591265637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1239881,"avatar":"https://static001.geekbang.org/account/avatar/00/12/eb/49/bd914b5f.jpg","nickname":"公号-彤哥读源码","note":"","ucode":"C0D16E1BA12DA0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":111341,"discussion_content":"用char数组存放密钥，不要用String。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577792072,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1187122,"avatar":"https://static001.geekbang.org/account/avatar/00/12/1d/32/005c7ba4.jpg","nickname":"大熊","note":"","ucode":"8163EC5BC6A519","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":84157,"discussion_content":"加密放so，算法的因子可以定期变动","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576492304,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1236983,"avatar":"","nickname":"辉哥","note":"","ucode":"21A65F4EE6CD04","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":78814,"discussion_content":"APP可以使用应用厂商的加固技术，防止被反编译","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576024522,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1087243,"avatar":"https://static001.geekbang.org/account/avatar/00/10/97/0b/a943bcb3.jpg","nickname":"zhou","note":"","ucode":"E1CE8575B3F106","race_medal":3,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":71788,"discussion_content":"Android打包可以混淆，这样反编译也看不到","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575458100,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1242876,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f6/fc/171c4976.jpg","nickname":"光光","note":"","ucode":"A0F1D0134C935F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69445,"discussion_content":"给APP加个壳，不要让它那么容易反编译就可以了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575288222,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1639787,"avatar":"https://static001.geekbang.org/account/avatar/00/19/05/6b/d9d6d68b.jpg","nickname":"Vettel","note":"","ucode":"FB3E71DD1E8E7C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69354,"discussion_content":"同样的疑问，客户端知道加密算法不是很危险吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575282811,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1721718,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/45/76/2b1354f6.jpg","nickname":"张亚运","note":"","ucode":"2D0C667E0D7B07","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1639787,"avatar":"https://static001.geekbang.org/account/avatar/00/19/05/6b/d9d6d68b.jpg","nickname":"Vettel","note":"","ucode":"FB3E71DD1E8E7C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70672,"discussion_content":"客户端做混淆","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575375836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":69354,"ip_address":""},"score":70672,"extra":""}]},{"author":{"id":1308056,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f5/98/45374bb9.jpg","nickname":"小小小丶盘子","note":"","ucode":"FCD4520F1EF872","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69208,"discussion_content":"appSecret也可以看到吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575271466,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159425,"user_name":"Murrre","can_delete":false,"product_type":"c1","uid":1685995,"ip_address":"","ucode":"49644059B512BE","user_header":"https://static001.geekbang.org/account/avatar/00/19/b9/eb/6bdab896.jpg","comment_is_top":false,"comment_ctime":1575621145,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"108949803545","product_id":100039001,"comment_content":"https:&#47;&#47;github.com&#47;murreIsCoding&#47;auth<br>根据实战教程编写的，放到了github上","like_count":25},{"had_liked":false,"id":157677,"user_name":"安静的boy","can_delete":false,"product_type":"c1","uid":1196475,"ip_address":"","ucode":"F5F44B75228A85","user_header":"https://static001.geekbang.org/account/avatar/00/12/41/bb/21ce60d2.jpg","comment_is_top":false,"comment_ctime":1575246214,"is_pvip":false,"discussion_count":16,"race_medal":0,"score":"108949428614","product_id":100039001,"comment_content":"这个需求去年我就做过，给自己系统的对外接口开发一个鉴权的功能。因为之前了解过oauth2，当时就直接想到了oauth2鉴权来实现，就去学习了下，然后选择了“客户端模式”来实现，给各个应用分配appid和appsecrete，客户端拿appid和appsecrete请求有一定时效的token，应用拿到token后再跟appid和appsecrete一起来请求接口，服务端鉴权通过后即可调用。老师的例子是客户端定开始时间，我做的是服务端定开始时间。<br>不过当时分析的时候没有意识去一步步分析，就是一下子想起来就去做了，也没有去想着做什么优化，以后在遇到这种问题，应该多去分析，思考，才能让设计更优。","like_count":25,"discussions":[{"author":{"id":1396951,"avatar":"https://static001.geekbang.org/account/avatar/00/15/50/d7/f82ed283.jpg","nickname":"辣么大","note":"","ucode":"AB308B6DCA0108","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69288,"discussion_content":"中了，我也是撸起袖子上来就干\b😂","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1575278878,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1809802,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/8a/a2d34896.jpg","nickname":"一元(wx:abley1874)","note":"","ucode":"5E7A33642FC767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286119,"discussion_content":"token应该在客户端通过不可逆的加密算法生成，同时向APP端也可以通过混淆或加固等手段对token解密照成一定困难。\n然后就是token的数据应该 包含 时间戳+nonce（随机数）。每次请求成功后，保存nonce，例如放在redis和数据库中，再次请求如果nonce相同，则为重放攻击。\nredis中的nonce数据需要设置一个失效时间，以免数据越来越多。\n注意：这个nonce的失效时间应该设置大于或等于token的失效窗口期，这样才能防止nonce失效而导致二次重放攻击成功。因为nonce失效的前提是token已经失效。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1593064035,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1809802,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/8a/a2d34896.jpg","nickname":"一元(wx:abley1874)","note":"","ucode":"5E7A33642FC767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286118,"discussion_content":"感觉你这样行不通，我在你向服务端请求token时就给你重放了，那么我就可以随意请求有效token了哦？这个问题也就又回到了原点，那么请问在你请求有效token时如何鉴权呢？再有，你这个token的有效期设置长了，岂不是重放风险更大？设置短了，岂不是大量请求都需要向服务器先获取一次token再请求？ 最后，即使你token有效窗口期再短，也并不能有效防止重放呢。下面是我的一些想法，","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593063828,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1909094,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/21/66/85f247e2.jpg","nickname":"谢作作的男人","note":"","ucode":"4F220EA8AEBFB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285426,"discussion_content":"微信公众平台也是这么干的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592832844,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1250922,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIzGGthScz54sECZJKX3lgyjCATkgrvSt5N3eOsYB34jibCr3SkAX88QaZ5IVmME9Ec7VdkQGwRSPw/132","nickname":"哈哈哈","note":"","ucode":"8AC20A1C9C7DF8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":247396,"discussion_content":"可以可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587812944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1142211,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6d/c3/7ee7ad78.jpg","nickname":"右耳朵听不见","note":"","ucode":"856D2CCB342EF3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":179547,"discussion_content":"服务端一般不存token，也是一种平衡，安全和性能、成本","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582218701,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015483,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7e/bb/947c329a.jpg","nickname":"程序员小跃","note":"","ucode":"25BB96E0791A60","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70197,"discussion_content":"OMG，我自己的例子和你的差不多，哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575336063,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1018370,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8a/02/828938c9.jpg","nickname":"Frank","note":"","ucode":"7A488CC6FE15E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69434,"discussion_content":"请教一下，服务端定开始时间是怎么理解？服务端怎么知道客户端何时调用接口呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575287262,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":8,"child_discussions":[{"author":{"id":1196475,"avatar":"https://static001.geekbang.org/account/avatar/00/12/41/bb/21ce60d2.jpg","nickname":"安静的boy","note":"","ucode":"F5F44B75228A85","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1018370,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8a/02/828938c9.jpg","nickname":"Frank","note":"","ucode":"7A488CC6FE15E7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69729,"discussion_content":"服务端定开始时间就是客户端拿appid和appsecrete去服务端请求token的时候，服务端生成token和开始时间给客户端，客户端每次请求也要带这个时间，服务端会检验token和 时间是否过期。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1575297771,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":69434,"ip_address":""},"score":69729,"extra":""},{"author":{"id":1532404,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIvUlicgrWtibbDzwhLw5cQrDSy2JuE1mVvmXq11KQIwpLicgDuWfpp9asE0VCN6HhibPDWn7wBc2lfmA/132","nickname":"a、","note":"","ucode":"590FE8DB111492","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1196475,"avatar":"https://static001.geekbang.org/account/avatar/00/12/41/bb/21ce60d2.jpg","nickname":"安静的boy","note":"","ucode":"F5F44B75228A85","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70709,"discussion_content":"你好，为什么要带开始时间？比如服务端可以规定，这个token两个小时过期，当客户端请求token的时候，你生成token并放到缓存里，过期时间设置两个小时，当客户端带appid和token请求时，你就去缓存里拿，有就鉴权通过","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1575377527,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":69729,"ip_address":""},"score":70709,"extra":""},{"author":{"id":1196475,"avatar":"https://static001.geekbang.org/account/avatar/00/12/41/bb/21ce60d2.jpg","nickname":"安静的boy","note":"","ucode":"F5F44B75228A85","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1532404,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIvUlicgrWtibbDzwhLw5cQrDSy2JuE1mVvmXq11KQIwpLicgDuWfpp9asE0VCN6HhibPDWn7wBc2lfmA/132","nickname":"a、","note":"","ucode":"590FE8DB111492","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":71365,"discussion_content":"不过当时也考虑过放缓存里，但是又怕缓存会满。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575416740,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":70709,"ip_address":""},"score":71365,"extra":""}]}]},{"had_liked":false,"id":159180,"user_name":"小白","can_delete":false,"product_type":"c1","uid":1004755,"ip_address":"","ucode":"9BB9A170023CD8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/54/d3/46fd4aa3.jpg","comment_is_top":false,"comment_ctime":1575553701,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"87474899621","product_id":100039001,"comment_content":"防止重放攻击的方案在老师的基础做进一步的迭代设计:<br>1.要求客户端生成一个唯一的请求id，如以uuid方式<br>2.客户端在以sha等加密哈希方式生成token时，也将请求id加入其中<br>3.客户端也要将请求id作为参数传递到服务端，如果是rest api就是也要将请求id拼接到url参数中<br>4.服务端检查服务端的缓存中(可以是redis)是否有客户端传递的请求id，如果有，则判定为重放攻击，拒绝请求。如果没有，则将请求id放到缓存中同时设置在token失效的时间窗内缓存的请求id自动失效(如redis key的TTL)<br>这个实现思路是: 在时间窗内的重放攻击，以服务端在时间缓存了在时间窗内的所有请求id的形式来防护，而在时间窗外的重放攻击就是老师的方案中检查客户端传过来的时间(时间戳)和服务端当前时间(时间戳)相减的绝对值不能超过时间窗的长度来实现。另外，时间戳、请求id等都hash在了token<br>中，所有客户端是无法篡改的。<br>这个实现思路的缺点是: 改实现方案要求客户端的时间和服务端的时间之间的差距不能超过时间窗，如果时间窗设置为1分钟这种比较小的，则要求客户端时间和服务端时间不能超过1分钟，这个有点苛刻，比如客户端如app所在的手机的时间不准确了，但就差1分钟，将无法访问接口。如果时间窗设置过长，如30分钟，则要求服务端缓存中缓存最近30分钟的请求id，如果接口的访问并发挺大的话，缓存占用空间也将很大，需要评估。","like_count":20,"discussions":[{"author":{"id":2880438,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/f3/b6/59fe8406.jpg","nickname":"YANg","note":"","ucode":"59AB3520046E53","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571163,"discussion_content":"id如果只是用来在redis判断重放攻击的，那直接缓存token不就完了嘛，也不会增加client的调用复杂度","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652093003,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1148174,"avatar":"https://static001.geekbang.org/account/avatar/00/11/85/0e/e6640576.jpg","nickname":"阿声","note":"","ucode":"EEA5F2E9D4FC9C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555085,"discussion_content":"缓存空间可以使用布隆过滤器优化，但是就没法使用类似redis的自动过期了。我有个设想是安排两个根据时间窗口滑动的布隆过滤器，（以前以后，比如A过滤器是前30分钟窗口的，B过滤器是当前30分钟窗口的）每次数据过来，同时去这两个过滤器验证是否为重放攻击，验证通过则只更新当前窗口的过滤器。当然布隆过滤器存在误判。这个猜想也只是针对缓存空间优化这一点来的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646740886,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1779782,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL7LuzpjBx3skGGZUbbPaia3GibvicPSiciaozXGa8MM7Gj2TZ1wXg0y3cSsJpsAy0rHSWHIVd8boQ7BCw/132","nickname":"刘雨声","note":"","ucode":"9A4A01B2E3F1C7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371441,"discussion_content":"那直接缓存 token 不就好了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619769907,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Java垒墙工程师","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287807,"discussion_content":"客户端以服务器时间为准，请求服务端获取，自己不生产","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593562683,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158972,"user_name":"追风少年","can_delete":false,"product_type":"c1","uid":1305639,"ip_address":"","ucode":"0467648A908B18","user_header":"https://static001.geekbang.org/account/avatar/00/13/ec/27/827015c0.jpg","comment_is_top":false,"comment_ctime":1575508671,"is_pvip":false,"discussion_count":6,"race_medal":0,"score":"66000018111","product_id":100039001,"comment_content":"老师好，感觉在鉴权这个例子中，无论客户端如何加密，攻击方的逻辑都是不变的。只需要截获请求，并不需要解析token. <br>如果能在token中加入客户端的特征变量，比如ip或者mac，服务端获取特征变量，然后和appid等一起生成token再比较。这样会更好。要不然总感觉在自欺欺人","like_count":15,"discussions":[{"author":{"id":2736925,"avatar":"","nickname":"Geek_fa0102","note":"","ucode":"55A578CB6F0E85","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388814,"discussion_content":"分发密钥时就可以记录ip,协议,服务地址,端口等信息;需要激活对应的ip才可以使用鉴权服务(先认证再鉴权),这些属于细节优化;是一个逐步迭代的过程","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628995785,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2347137,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d0/81/d5c8e46e.jpg","nickname":"snake","note":"","ucode":"47BFFE4D048156","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336169,"discussion_content":"可以加入随机正整数配合时间戳做判断","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608520359,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1055334,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1a/66/2d9db9ed.jpg","nickname":"苦行僧","note":"","ucode":"726024A9A9CF44","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":102097,"discussion_content":"说的有道理 只要在很短的时间内截获 就可以立即发起重放攻击 根本不需要解析token","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577324775,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1255918,"avatar":"https://static001.geekbang.org/account/avatar/00/13/29/ee/fba11edf.jpg","nickname":"        ","note":"","ucode":"21028A49D81B06","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":78208,"discussion_content":"可以使用非对称加密 如RSA等等来解决这个问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575983766,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1997465,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/7a/99/4ac1d891.jpg","nickname":"猴子胖胖","note":"","ucode":"EFFE195C126E00","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1255918,"avatar":"https://static001.geekbang.org/account/avatar/00/13/29/ee/fba11edf.jpg","nickname":"        ","note":"","ucode":"21028A49D81B06","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":320763,"discussion_content":"非对称加密是用来认证的，不是用来鉴权的，很多人都用错了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604472275,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":78208,"ip_address":""},"score":320763,"extra":""},{"author":{"id":2446981,"avatar":"https://static001.geekbang.org/account/avatar/00/25/56/85/6da913fa.jpg","nickname":"LIFE l=new LIFE()","note":"","ucode":"729BACA3B7FD42","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1997465,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/7a/99/4ac1d891.jpg","nickname":"猴子胖胖","note":"","ucode":"EFFE195C126E00","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379082,"discussion_content":"我上个项目用的国密做登录的，也是认证吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623668410,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":320763,"ip_address":""},"score":379082,"extra":""}]}]},{"had_liked":false,"id":157725,"user_name":"Young！","can_delete":false,"product_type":"c1","uid":1025221,"ip_address":"","ucode":"2A658CEFD26011","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a4/c5/a53f8bbc.jpg","comment_is_top":false,"comment_ctime":1575250516,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"65999759956","product_id":100039001,"comment_content":"像今天的例子中，如果老板给我这样的需求，我第一反应就是去想怎么实现，用什么技术实现，有什么现成的框架，而不是去先思考「用户名密码登录验证」这最基础的第一步。刚开始脑子就一团浆糊，知道完成也是在便实现便理思路，这样浪费时间而且最后也没有自己完整的思路过程。<br><br>以后还是要先理清思路，理清需求再去考虑每一小需求实现的技术。","like_count":15,"discussions":[{"author":{"id":2347137,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d0/81/d5c8e46e.jpg","nickname":"snake","note":"","ucode":"47BFFE4D048156","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336170,"discussion_content":"确实，我也有这毛病","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608520381,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157636,"user_name":"黄林晴","can_delete":false,"product_type":"c1","uid":1362631,"ip_address":"","ucode":"B15C38AECDA88F","user_header":"https://static001.geekbang.org/account/avatar/00/14/ca/c7/00e544c2.jpg","comment_is_top":false,"comment_ctime":1575216971,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"65999726411","product_id":100039001,"comment_content":"打卡<br>充血模型那两节还没完全理解，加油","like_count":15,"discussions":[{"author":{"id":1237135,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e0/8f/fd6d3c93.jpg","nickname":"Java程序员","note":"","ucode":"7768C615962F14","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":68965,"discussion_content":"充血就是把service层做薄，不要写业务逻辑，逻辑写在bo层，service负责调用数据库里的值传给bo做逻辑判断。我是这么理解的","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575248437,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1338088,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6a/e8/4bb87c34.jpg","nickname":"月马穿关","note":"","ucode":"2CE20CA1EB827D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":169603,"discussion_content":"与数据相关的业务逻辑编写在Domain里，与其他的业务交互的动作在service里面串联起来","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581633668,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1052859,"avatar":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","nickname":"Demon.Lee","note":"","ucode":"7F0E5493A8E345","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70180,"discussion_content":"service层是把业务流程串起来跑，可以理解为面向过程编程，domain里面把相关操作封装是面向对象，我们的目地就是尽量按照面向对象的方式干。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575335098,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1161271,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b8/37/98991aeb.jpg","nickname":"不似旧日","note":"","ucode":"DF4C5E3AB9570C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69164,"discussion_content":"对， 把逻辑拆到bo中，service与dao交互。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575266799,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157658,"user_name":"Richard Zhong","can_delete":false,"product_type":"c1","uid":1213417,"ip_address":"","ucode":"F91A8EE5992FAB","user_header":"https://static001.geekbang.org/account/avatar/00/12/83/e9/3016ed84.jpg","comment_is_top":false,"comment_ctime":1575244079,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"57409818927","product_id":100039001,"comment_content":"我看到过的最好的设计模式课","like_count":13,"discussions":[{"author":{"id":1054152,"avatar":"https://static001.geekbang.org/account/avatar/00/10/15/c8/65ed960c.jpg","nickname":"Mark","note":"","ucode":"0DF6D68131F79B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":199232,"discussion_content":"最好的 有点夸张吧 讲的浅显倒是真的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583573477,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157651,"user_name":"刘大明","can_delete":false,"product_type":"c1","uid":1035081,"ip_address":"","ucode":"83C063FBD9BF2B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cb/49/0b9ffc8e.jpg","comment_is_top":false,"comment_ctime":1575239263,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"44524912223","product_id":100039001,"comment_content":"一般遇到这种需求不是特别明确的，先自己理解第一遍需求，有一个大概的思路，然后在和产品经理确认是不是这样。需求确认之前在按照争哥说的需求分析，对需求做任务分解，将需求分解成一个个小的任务点，每个小任务都是很容易执行的。就算开发过程中被打断了，也不要紧。任务分解的尽量小，这样重新回到开发状态也就越容易。","like_count":10},{"had_liked":false,"id":158785,"user_name":"板栗饼","can_delete":false,"product_type":"c1","uid":1405020,"ip_address":"","ucode":"2DA25B053D7721","user_header":"https://static001.geekbang.org/account/avatar/00/15/70/5c/ebb274eb.jpg","comment_is_top":false,"comment_ctime":1575450906,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"35935189274","product_id":100039001,"comment_content":"课依然很好，就是有些想念算法之美里每节画插图的小姐姐","like_count":8},{"had_liked":false,"id":158899,"user_name":"你好旅行者","can_delete":false,"product_type":"c1","uid":1154101,"ip_address":"","ucode":"5C72A428DC28F3","user_header":"https://static001.geekbang.org/account/avatar/00/11/9c/35/9dc79371.jpg","comment_is_top":false,"comment_ctime":1575472704,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"23050309184","product_id":100039001,"comment_content":"我觉的老师的方案也没有增加攻击方的试错成本吧，我每次截获调用接口的请求，获取你调用的URL，在这个过期时间内仍然可以非法调用微服务方的接口啊。做了这么多的加密，可是对于攻击方，我的攻击成本增加在哪里了呢？<br><br>请老师解答一下哈","like_count":5,"discussions":[{"author":{"id":1730626,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJvm1JYIDcS74s4cEYxA1PXMqjortVXEjUKyGQcPvibNJ4EAuksIa6uoHgr6G1yRqAM2KtP3yicKgTA/132","nickname":"小妖","note":"","ucode":"49C01DBFADF101","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":87497,"discussion_content":"感觉作者讲的有点小问题，正常加密的数据一般不用url而是关键数据，也就是body，这样能防止数据篡改，因为即使请求被拦截，也无法进行数据篡改，另外一般而言一般对接第三方会规定ip白名单，非白名单中的数据是不允许请求的","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1576670890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157915,"user_name":"QQ怪","can_delete":false,"product_type":"c1","uid":1211223,"ip_address":"","ucode":"1A39B8433D9208","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","comment_is_top":false,"comment_ctime":1575282361,"is_pvip":false,"replies":[{"id":"60714","content":"后端可以对没有传递token的不做校验","user_name":"作者回复","comment_id":157915,"uid":"1190123","ip_address":"","utype":1,"ctime":1575429650,"user_name_real":"王争"}],"discussion_count":8,"race_medal":0,"score":"23050118841","product_id":100039001,"comment_content":"老师，我们公司有个重构项目，也是要最客户端鉴权，但是旧客户端没有做token之类的鉴权传token，但现在要做，如何做到兼容旧客户端做鉴权呢？","like_count":5,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"王争","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476575,"discussion_content":"后端可以对没有传递token的不做校验","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575429650,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2736925,"avatar":"","nickname":"Geek_fa0102","note":"","ucode":"55A578CB6F0E85","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388815,"discussion_content":"增加接口版本,新版本走token;旧版本走之前的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628996063,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2347137,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d0/81/d5c8e46e.jpg","nickname":"snake","note":"","ucode":"47BFFE4D048156","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336172,"discussion_content":"判断一下就好了，新的鉴权，旧的直接放过","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608520547,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2352268,"avatar":"","nickname":"1023","note":"","ucode":"E637ED780CDD2C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332024,"discussion_content":"新老客户端在URL上区分下，新URL统一走鉴权，成功后调原有接口。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607047453,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1211223,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","nickname":"QQ怪","note":"","ucode":"1A39B8433D9208","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":71525,"discussion_content":"那岂不是黑客可以利用这点，无限制访问接口?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575429862,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1402322,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epEbrWwrlSUzSF5Cru29ZT8LyDCNTglzblVPAb4AuH9gOkc0mibAM9z5MvRxDXvFI3g5FW6OnLSkqA/132","nickname":"风AA","note":"","ucode":"A738617C2FA3E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70404,"discussion_content":"服务端设置 cookie?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575353195,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1211223,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","nickname":"QQ怪","note":"","ucode":"1A39B8433D9208","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1402322,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epEbrWwrlSUzSF5Cru29ZT8LyDCNTglzblVPAb4AuH9gOkc0mibAM9z5MvRxDXvFI3g5FW6OnLSkqA/132","nickname":"风AA","note":"","ucode":"A738617C2FA3E8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70496,"discussion_content":"服务端怎么设置cookie，不是客户端设置吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575362459,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":70404,"ip_address":""},"score":70496,"extra":""},{"author":{"id":1402322,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epEbrWwrlSUzSF5Cru29ZT8LyDCNTglzblVPAb4AuH9gOkc0mibAM9z5MvRxDXvFI3g5FW6OnLSkqA/132","nickname":"风AA","note":"","ucode":"A738617C2FA3E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1211223,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","nickname":"QQ怪","note":"","ucode":"1A39B8433D9208","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":244848,"discussion_content":"客户端怎么设置，原生的浏览器不允许修改 cookie 的？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587636392,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":70496,"ip_address":""},"score":244848,"extra":""}]}]},{"had_liked":false,"id":159510,"user_name":"丁丁历险记","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1575642670,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18755511854","product_id":100039001,"comment_content":"1 推荐写markdown 进行描述<br>2 分析将做什么转为怎么做，并将怎么做拆解的足够小，单步可验。<br>3 过程是渐进的，逐步分解","like_count":4},{"had_liked":false,"id":157789,"user_name":"不似旧日","can_delete":false,"product_type":"c1","uid":1161271,"ip_address":"","ucode":"DF4C5E3AB9570C","user_header":"https://static001.geekbang.org/account/avatar/00/11/b8/37/98991aeb.jpg","comment_is_top":false,"comment_ctime":1575259183,"is_pvip":false,"replies":[{"id":"60719","content":"token是单向加密算法生成的 无法解密的","user_name":"作者回复","comment_id":157789,"uid":"1190123","ip_address":"","utype":1,"ctime":1575432268,"user_name_real":"王争"}],"discussion_count":4,"race_medal":0,"score":"18755128367","product_id":100039001,"comment_content":"有个问题:  通过同样的 token 生成算法，在服务端生成新的 token，与调用方传递过来的 token 比对。这个做法是不是有点多余？ 能把token解密难道不能说明token没有问题么？ ","like_count":4,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"王争","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476530,"discussion_content":"token是单向加密算法生成的 无法解密的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575432268,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1402322,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epEbrWwrlSUzSF5Cru29ZT8LyDCNTglzblVPAb4AuH9gOkc0mibAM9z5MvRxDXvFI3g5FW6OnLSkqA/132","nickname":"风AA","note":"","ucode":"A738617C2FA3E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70425,"discussion_content":"做 token 失效的时候可以用，比如用户修改了密码就要重新登录之类的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575355464,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1308056,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f5/98/45374bb9.jpg","nickname":"小小小丶盘子","note":"","ucode":"FCD4520F1EF872","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69213,"discussion_content":"并不是解密token，会把其他参数都带上。然后后台用appSecret加密，在判断两个token是否一致","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575271606,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2552930,"avatar":"https://static001.geekbang.org/account/avatar/00/26/f4/62/9807eb30.jpg","nickname":"安安","note":"","ucode":"5D01225E6750BA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1308056,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f5/98/45374bb9.jpg","nickname":"小小小丶盘子","note":"","ucode":"FCD4520F1EF872","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":369382,"discussion_content":"两边判断加密后的token是否一致","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1619014649,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":69213,"ip_address":""},"score":369382,"extra":""}]}]},{"had_liked":false,"id":158754,"user_name":"马超","can_delete":false,"product_type":"c1","uid":1254552,"ip_address":"","ucode":"38E328A993F9CF","user_header":"https://static001.geekbang.org/account/avatar/00/13/24/98/24cb8ca0.jpg","comment_is_top":false,"comment_ctime":1575446670,"is_pvip":false,"replies":[{"id":"61147","content":"我理解的面向对象分析，就是需求分析。","user_name":"作者回复","comment_id":158754,"uid":"1190123","ip_address":"","utype":1,"ctime":1575897945,"user_name_real":"王争"}],"discussion_count":1,"race_medal":0,"score":"14460348558","product_id":100039001,"comment_content":"这个鉴权功能需求分析的很好，但是和面向对象分析没有多大关系吧。","like_count":3},{"had_liked":false,"id":157822,"user_name":"陈迎春","can_delete":false,"product_type":"c1","uid":1443663,"ip_address":"","ucode":"2870BA6D6E5B1E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIang00R9vkklnkFCLhzRysNfocr0sLnCdoZwOT3UkulAPefk5BDvd0PfIeQSODSQg1DjKWUmJOaA/132","comment_is_top":false,"comment_ctime":1575265943,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"14460167831","product_id":100039001,"comment_content":"我主要是嵌入式软件开发的，这个鉴权功能基本理解了，但是前面的mvc，包括贫血和充血，还是挺不明白的，平时没有用过，理解有些困难，暂时先放放吧，等后面再回过来学习","like_count":3,"discussions":[{"author":{"id":1014245,"avatar":"","nickname":"五杀","note":"","ucode":"BE8E1CEB20A848","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369144,"discussion_content":"装饰器模式就行","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1618938804,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1030639,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqWKj6kxC4ib8ia9tTz0CKvQYcjK6Maf5s1TVpMwtLs7ELkM3spzkbsnaMhoLqO1zkZqiaHFCX5ibibSYQ/132","nickname":"geekcat","note":"","ucode":"8CC3800E76176B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553192,"discussion_content":"java8 已经提供了方法的默认实现，可以不用非得推迟到子类强制实现","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1645759481,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1481811,"avatar":"https://static001.geekbang.org/account/avatar/00/16/9c/53/ade0afb0.jpg","nickname":"ub8","note":"","ucode":"0D937C3EAEB781","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":222693,"discussion_content":"抽出一个适配器接口，适配器里面实现 模板中的 method1...methodn,模板子类继承模板类接口，实现适配器类复写自己需要用到的适配器方法？多继承可以但是多继承的写法很少","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1586168156,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2347770,"avatar":"","nickname":"Geek_249e7f","note":"","ucode":"4C1CDE08B8EB05","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588912,"discussion_content":"把接口改成protecred修饰，然后写个默认的方法可以吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664204905,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2142423,"avatar":"","nickname":"Geek_7e0e83","note":"","ucode":"554DEE2AAAE33C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574643,"discussion_content":"根据楼主的观点 我这样说一下 看看对不对。如果用适配器的话，那么我可以抽象出一个适配器的接口，这个接口 供调用方进行调用。我们假设调用方想要调用模板方法A，那么这个接口就设计成模板方法A的接口，然后新建一个抽象的适配器类，这个继承文中的抽象类。将不需要的方法都提供默认实现，并抛出方法不支持的异常。同时实现刚刚的新接口。新接口的实现 可以直接调用我们继承的模板方法A。透传而已，然后开发者可以根据自己的实现方法来继承我们事先定义好的抽象适配器类。将还没实现的Method进行实现，然后调用方就可以只依赖这个模板方法A的接口即可。它的好处是，比单纯的适配器类又屏蔽了更多的细节。对外调用方只需要调用新的接口即可，可以不依赖文章中其他的方法","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654220831,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181650,"avatar":"https://static001.geekbang.org/account/avatar/00/12/07/d2/0d7ee298.jpg","nickname":"惘 闻","note":"","ucode":"C5909F034BF072","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536745,"discussion_content":"适配器不是用来搞定接口间不兼容的吗？这里只是提供默认方法实现为什么使用适配器呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638860985,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2276155,"avatar":"https://static001.geekbang.org/account/avatar/00/22/bb/3b/6e020a32.jpg","nickname":"多学多看多记","note":"","ucode":"0670C833007510","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181650,"avatar":"https://static001.geekbang.org/account/avatar/00/12/07/d2/0d7ee298.jpg","nickname":"惘 闻","note":"","ucode":"C5909F034BF072","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545961,"discussion_content":"两个模板方法的类 —&gt;适配器—&gt;一个模版方法的类，也算是一种适配器吧\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1642092963,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":536745,"ip_address":""},"score":545961,"extra":""}]},{"author":{"id":2317835,"avatar":"","nickname":"Geek_cead38","note":"","ucode":"7F8350E9DB040E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327888,"discussion_content":"可这样的话，不是要定义很多种适配器，一种需求要开一个适配器，将不需要的方法实现，需要的方法继续抽象","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606008652,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1053934,"avatar":"https://static001.geekbang.org/account/avatar/00/10/14/ee/d72a8222.jpg","nickname":"攻城拔寨","note":"","ucode":"CBC37183DAB6B2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2317835,"avatar":"","nickname":"Geek_cead38","note":"","ucode":"7F8350E9DB040E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328432,"discussion_content":"一个适配器实现所有抽象方法，子类都继承这个适配器就行了。\n当然你那种实现部分方法的也可以，但是如果发生像你说的那种很多适配类，那就要考虑这个接口定义得是否太复杂了。一个接口的定义需要职责单一一点。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606137942,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":327888,"ip_address":""},"score":328432,"extra":""},{"author":{"id":2317835,"avatar":"","nickname":"Geek_cead38","note":"","ucode":"7F8350E9DB040E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1053934,"avatar":"https://static001.geekbang.org/account/avatar/00/10/14/ee/d72a8222.jpg","nickname":"攻城拔寨","note":"","ucode":"CBC37183DAB6B2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328485,"discussion_content":"只是如果适配器重写所有方法但是都为空方法的话，继承于适配器的子类当执行templateMethod1() 方法时，仍然不会被提示需要重写 method1() 与 method2()，所以应该适配器重写所有方法并且直接抛“不支持操作异常”吧。\n还有，我觉得应该不叫适配器，适配器是将另个类系的类适配到当前类系上，而这个只是重写了抽象方法，应该属于装饰器，也感谢楼主的回答。","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1606146524,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":328432,"ip_address":""},"score":328485,"extra":""},{"author":{"id":2038940,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/1c/9c/9cbb8c5a.jpg","nickname":"tongzi","note":"","ucode":"1D2F08C6764454","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2317835,"avatar":"","nickname":"Geek_cead38","note":"","ucode":"7F8350E9DB040E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336807,"discussion_content":"有个问题，如果适配器重写方法method1() 与 method2()，直接抛“不支持操作异常”的话；\n又回到了开始的问题，子类还是需要自己重写所有的抽象方法。不如在父类直接抛“不支持操作异常”吧或者父类提供默认实现吧，适配器更加灵活一点","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608707035,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":328485,"ip_address":""},"score":336807,"extra":""}]},{"author":{"id":2052476,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Qq6oLfOTgKzjiculoUDicdv7WoY1iabPfOTumibWeInVP2Mnod9XVPrNSClvIiaLbvtDlIjRnWUNaXcYwREGzlcaDog/132","nickname":"Geek_在下蟑螂王","note":"","ucode":"E1F5BBB5BC5962","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293036,"discussion_content":"有点东西啊小伙子","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595419354,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1053934,"avatar":"https://static001.geekbang.org/account/avatar/00/10/14/ee/d72a8222.jpg","nickname":"攻城拔寨","note":"","ucode":"CBC37183DAB6B2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2052476,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Qq6oLfOTgKzjiculoUDicdv7WoY1iabPfOTumibWeInVP2Mnod9XVPrNSClvIiaLbvtDlIjRnWUNaXcYwREGzlcaDog/132","nickname":"Geek_在下蟑螂王","note":"","ucode":"E1F5BBB5BC5962","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":310101,"discussion_content":"😳😳😳","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601617548,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":293036,"ip_address":""},"score":310101,"extra":""}]},{"author":{"id":1977714,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/2d/72/fc0f3ca5.jpg","nickname":"javaNB","note":"","ucode":"4B4CACF83411D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":280249,"discussion_content":"想法一致，采用适配器","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591518686,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1670763,"avatar":"https://static001.geekbang.org/account/avatar/00/19/7e/6b/36fc4516.jpg","nickname":"FIRE","note":"","ucode":"85861D990FB3AB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":221919,"discussion_content":"正解","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586080334,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157666,"user_name":"梦倚栏杆","can_delete":false,"product_type":"c1","uid":1095857,"ip_address":"","ucode":"BDEB97F2822445","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/bvj76PmeUvW8kokyu91IZWuRATKmabibDWbzAj2TajeEic7WvKCJOLaOh6jibEmdQ36EO3sBUZ0HibAiapsrZo64U8w/132","comment_is_top":false,"comment_ctime":1575244705,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14460146593","product_id":100039001,"comment_content":"我是做业务需求的：我们期望于产品画清楚流程图，表达好规则描述，<br>a.有些产品做的足够细致时，rd照着流程实现就好了。<br>b.有些产品表达的很粗糙，rd会按照自己的梳理，然后向产品要相关时刻的规则，最后rd再照着实现。<br><br>感觉针对一个具体业务需求时，貌似技术实现到底多么优雅取决于与之合作的产品，总觉得不对，但貌似又无能为力","like_count":3},{"had_liked":false,"id":310673,"user_name":"王轲","can_delete":false,"product_type":"c1","uid":1444126,"ip_address":"","ucode":"65065BFFC409F5","user_header":"https://static001.geekbang.org/account/avatar/00/16/09/1e/db996fd7.jpg","comment_is_top":false,"comment_ctime":1630834004,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"10220768596","product_id":100039001,"comment_content":"为什么那么纠结重放攻击…我觉得重放攻击的防御应该是更下面一层软件应该关心的，而不是鉴权这个模块应该关心的，比如TLS本身就可以避免重放攻击","like_count":2},{"had_liked":false,"id":231415,"user_name":"微末凡尘","can_delete":false,"product_type":"c1","uid":1099525,"ip_address":"","ucode":"25EDFD0914D0F4","user_header":"https://static001.geekbang.org/account/avatar/00/10/c7/05/19c5c255.jpg","comment_is_top":false,"comment_ctime":1593671514,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10183606106","product_id":100039001,"comment_content":"让我想到了微信登陆接口中的code，一次有效。5分钟之内有效，最近在研究公司的sdk，服务端先生成token，下发给客户端，游戏服务端拿到token，发送到服务端，验证token，走完整个环路，才算登录成功","like_count":2},{"had_liked":false,"id":158910,"user_name":"修缘","can_delete":false,"product_type":"c1","uid":1035476,"ip_address":"","ucode":"72AB60C1DC88C0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cc/d4/f1f84a96.jpg","comment_is_top":false,"comment_ctime":1575476692,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10165411284","product_id":100039001,"comment_content":"遵循合适原则、简单原则、演化原则三个原则，有助于做出最好的选择。在实际的项目中，我们要结合业务 、技术、成本三个方面综合考虑具体的方案。","like_count":2},{"had_liked":false,"id":158584,"user_name":"xuanyuan","can_delete":false,"product_type":"c1","uid":1113737,"ip_address":"","ucode":"1EC79B9372868F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI2icbib62icXtibTkThtyRksbuJLoTLMts7zook2S30MiaBtbz0f5JskwYicwqXkhpYfvCpuYkcvPTibEaQ/132","comment_is_top":false,"comment_ctime":1575420890,"is_pvip":false,"replies":[{"id":"60676","content":"那估计还有会议讨论 立项之类的流程吧","user_name":"作者回复","comment_id":158584,"uid":"1190123","ip_address":"","utype":1,"ctime":1575423667,"user_name_real":"王争"}],"discussion_count":2,"race_medal":0,"score":"10165355482","product_id":100039001,"comment_content":"不是应该先有调研过程吗？直接就开始设计的？","like_count":2,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"王争","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476774,"discussion_content":"那估计还有会议讨论 立项之类的流程吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575423667,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2223041,"avatar":"","nickname":"Geek_7e0db8","note":"","ucode":"4549EE23AECAFC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":324091,"discussion_content":"领导急着要，说明这些都可以省了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605056323,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157853,"user_name":"teddytyy","can_delete":false,"product_type":"c1","uid":1268738,"ip_address":"","ucode":"E1569D81A4154E","user_header":"https://static001.geekbang.org/account/avatar/00/13/5c/02/e7af1750.jpg","comment_is_top":false,"comment_ctime":1575270652,"is_pvip":false,"replies":[{"id":"60695","content":"放到里面的目的是让每次生成的token都不一样","user_name":"作者回复","comment_id":157853,"uid":"1190123","ip_address":"","utype":1,"ctime":1575425039,"user_name_real":"王争"}],"discussion_count":2,"race_medal":0,"score":"10165205244","product_id":100039001,"comment_content":"老师，时间戳要不要拼接在url里产生token应该都可以吧？服务端反正是按照url里解析的时间戳去过滤的","like_count":2,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"王争","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476552,"discussion_content":"放到里面的目的是让每次生成的token都不一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575425039,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1087243,"avatar":"https://static001.geekbang.org/account/avatar/00/10/97/0b/a943bcb3.jpg","nickname":"zhou","note":"","ucode":"E1CE8575B3F106","race_medal":3,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":71798,"discussion_content":"防止截取后，重复攻击","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575458683,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157722,"user_name":"Lyre","can_delete":false,"product_type":"c1","uid":1275759,"ip_address":"","ucode":"61AB16508AFFDA","user_header":"https://static001.geekbang.org/account/avatar/00/13/77/6f/454951d2.jpg","comment_is_top":false,"comment_ctime":1575250227,"is_pvip":false,"replies":[{"id":"60723","content":"是要发送请求到服务器的时候才生成token ","user_name":"作者回复","comment_id":157722,"uid":"1190123","ip_address":"","utype":1,"ctime":1575432619,"user_name_real":"王争"}],"discussion_count":3,"race_medal":0,"score":"10165184819","product_id":100039001,"comment_content":"client端生成的token在时间窗口内，假如用户在操作中停留了1分钟（时间窗口），那token就过期了吗？ ","like_count":2,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"王争","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476507,"discussion_content":"是要发送请求到服务器的时候才生成token ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575432619,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1275759,"avatar":"https://static001.geekbang.org/account/avatar/00/13/77/6f/454951d2.jpg","nickname":"Lyre","note":"","ucode":"61AB16508AFFDA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":71573,"discussion_content":"哦 理解错了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575434560,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1216284,"avatar":"https://static001.geekbang.org/account/avatar/00/12/8f/1c/1c728388.jpg","nickname":"皮卡皮卡","note":"","ucode":"D440EEC7301C76","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69138,"discussion_content":"每次发送都会携带发送时的时间戳，和用户停留多久没关系","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575264658,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157690,"user_name":"2018","can_delete":false,"product_type":"c1","uid":1107371,"ip_address":"","ucode":"4C2CD47AD70177","user_header":"https://static001.geekbang.org/account/avatar/00/10/e5/ab/6fab2492.jpg","comment_is_top":false,"comment_ctime":1575247353,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"10165181945","product_id":100039001,"comment_content":"打卡，依旧在理解贫血和充血模型","like_count":2,"discussions":[{"author":{"id":1142211,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6d/c3/7ee7ad78.jpg","nickname":"右耳朵听不见","note":"","ucode":"856D2CCB342EF3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":179549,"discussion_content":"贫血和充血都是相对于BO对象，也就是domain对象而言，贫血就是一堆getset方法，充血包括业务逻辑在里边","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582218929,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1107371,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e5/ab/6fab2492.jpg","nickname":"2018","note":"","ucode":"4C2CD47AD70177","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1142211,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6d/c3/7ee7ad78.jpg","nickname":"右耳朵听不见","note":"","ucode":"856D2CCB342EF3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":179965,"discussion_content":"感谢解惑","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582266164,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":179549,"ip_address":""},"score":179965,"extra":""}]}]},{"had_liked":false,"id":200044,"user_name":"QFY","can_delete":false,"product_type":"c1","uid":1144134,"ip_address":"","ucode":"5EAA14772BA908","user_header":"https://static001.geekbang.org/account/avatar/00/11/75/46/815e56c8.jpg","comment_is_top":false,"comment_ctime":1585536676,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5880503972","product_id":100039001,"comment_content":"如果遇到这种需求，我一般是直接去找比较成熟的解决方案，参照着写，自己思考的地方就少了很多，不是一个很好的习惯","like_count":1},{"had_liked":false,"id":170471,"user_name":"eason2017","can_delete":false,"product_type":"c1","uid":1009422,"ip_address":"","ucode":"E070BA624FA490","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/0e/c77ad9b1.jpg","comment_is_top":false,"comment_ctime":1578618805,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5873586101","product_id":100039001,"comment_content":"这个需求上还有一个小问题，就是这个时间戳有效期是一分钟，感觉，不同手机的时间和系统的时间是存在差异的，可能还没到过期时服务端校验时间有效性时，已经认为过期了。","like_count":1,"discussions":[{"author":{"id":1897148,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f2/bc/ffc7ad67.jpg","nickname":"Chris Zou","note":"","ucode":"B6DFC71C1DD8B7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286396,"discussion_content":"上次我们有一个类似的需求，也是有这个问题，不知道后面怎么解决的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593160972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158874,"user_name":"阿冰777","can_delete":false,"product_type":"c1","uid":1373893,"ip_address":"","ucode":"F365EB44F971F3","user_header":"https://static001.geekbang.org/account/avatar/00/14/f6/c5/6329ddcc.jpg","comment_is_top":false,"comment_ctime":1575468163,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5870435459","product_id":100039001,"comment_content":"Day10: 先设计，在完成核心功能试验，设计时要考虑以后可能的改动，要考虑最常用场景的性能优化，如果这个功能和已有功能有重叠，考虑进行重构，如果没有重叠但是有使用相同的数据，要考虑到是否有数据不一致的bug,设计时还要考虑到极端情况，最好先写出测试case。","like_count":1},{"had_liked":false,"id":157896,"user_name":"PHP是世界上最好的需要","can_delete":false,"product_type":"c1","uid":1655326,"ip_address":"","ucode":"EE23A54B831D17","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIma3PJUyqDEQKt40nEh3Jt840af6hKnuK8k8dIscm43EUzJwLvynbxRnvO9Ivibv7KssUSqoBdY1w/132","comment_is_top":false,"comment_ctime":1575278705,"is_pvip":false,"replies":[{"id":"60686","content":"为什么不懂呢？理论上讲这个需求比较简单的 不懂可以去找需求提出方了解","user_name":"作者回复","comment_id":157896,"uid":"1190123","ip_address":"","utype":1,"ctime":1575424629,"user_name_real":"王争"}],"discussion_count":2,"race_medal":0,"score":"5870246001","product_id":100039001,"comment_content":"在不懂接口鉴权的需求下，很难总结出”粗糙“的功能框架，这个时候如何解决呢？","like_count":1,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"王争","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476566,"discussion_content":"为什么不懂呢？理论上讲这个需求比较简单的 不懂可以去找需求提出方了解","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575424629,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1655326,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIma3PJUyqDEQKt40nEh3Jt840af6hKnuK8k8dIscm43EUzJwLvynbxRnvO9Ivibv7KssUSqoBdY1w/132","nickname":"PHP是世界上最好的需要","note":"","ucode":"EE23A54B831D17","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":74735,"discussion_content":"老师你理解错了，我得意思是假设","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575682506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157887,"user_name":"杰洛特","can_delete":false,"product_type":"c1","uid":1098146,"ip_address":"","ucode":"46D0574654F8AC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqEacia8yO1dR5Tal9B7w8PzTRrViajlAvDph96OqcuBGe29icbXOibhibGmaBcO7BfpVia0Y8ksZwsuAYQ/132","comment_is_top":false,"comment_ctime":1575277439,"is_pvip":false,"replies":[{"id":"60687","content":"是的 要统一加密算法","user_name":"作者回复","comment_id":157887,"uid":"1190123","ip_address":"","utype":1,"ctime":1575424647,"user_name_real":"王争"}],"discussion_count":2,"race_medal":0,"score":"5870244735","product_id":100039001,"comment_content":"请问老师，token 在 client 端生成的话，是否意味着要告知 client 端加密算法？然后才能在 server 端解密到信息","like_count":1,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"王争","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476562,"discussion_content":"是的 要统一加密算法","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575424647,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015754,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7f/ca/ea85bfdd.jpg","nickname":"helloworld","note":"","ucode":"00DF2FEC58D2E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":83618,"discussion_content":"每次看到这种设计方案，我都下意识地想到是不是算法也可能被第三方窃取了😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576454107,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157875,"user_name":"我又不乱来","can_delete":false,"product_type":"c1","uid":1221356,"ip_address":"","ucode":"737405E2339A8D","user_header":"https://static001.geekbang.org/account/avatar/00/12/a2/ec/205fd50c.jpg","comment_is_top":false,"comment_ctime":1575275347,"is_pvip":false,"replies":[{"id":"60694","content":"下一节课有答案 你可以看下","user_name":"作者回复","comment_id":157875,"uid":"1190123","ip_address":"","utype":1,"ctime":1575424999,"user_name_real":"王争"}],"discussion_count":1,"race_medal":0,"score":"5870242643","product_id":100039001,"comment_content":"老师现在我有一个疑问，基于充血模式，我有一个domain要查询数据库，如何做比较合适呢？","like_count":1,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"王争","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476557,"discussion_content":"下一节课有答案 你可以看下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575424999,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157744,"user_name":"pines","can_delete":false,"product_type":"c1","uid":1200708,"ip_address":"","ucode":"7B925605B36B4E","user_header":"https://static001.geekbang.org/account/avatar/00/12/52/44/de7f2b98.jpg","comment_is_top":false,"comment_ctime":1575254155,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5870221451","product_id":100039001,"comment_content":"前一段写了一套 open api，使用鉴权方式就是老师描述的这种基于AK&#47;SK的签名验证。这种方式感觉有一个问题就是如果是一个具有很大请求内容的post方法，签名的成本感觉还是挺高的。还有一种方式是服务端给客户端下发一个有一定时长的token，然后客户端的每次请求都带着这个token。","like_count":1,"discussions":[{"author":{"id":1402322,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epEbrWwrlSUzSF5Cru29ZT8LyDCNTglzblVPAb4AuH9gOkc0mibAM9z5MvRxDXvFI3g5FW6OnLSkqA/132","nickname":"风AA","note":"","ucode":"A738617C2FA3E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70406,"discussion_content":"不对称加密算法来加密 对称算法的私钥，平时用私钥进行 body 体加密","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575353290,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157694,"user_name":"L🚲🐱","can_delete":false,"product_type":"c1","uid":1577856,"ip_address":"","ucode":"08A012739614DE","user_header":"https://static001.geekbang.org/account/avatar/00/18/13/80/2c9da1b1.jpg","comment_is_top":false,"comment_ctime":1575247737,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5870215033","product_id":100039001,"comment_content":"前面讲的充血模型还有点不理解, 准备这几天写个 demo 实践一下, 加深理解","like_count":1,"discussions":[{"author":{"id":1054178,"avatar":"https://static001.geekbang.org/account/avatar/00/10/15/e2/c21553c4.jpg","nickname":"HYM","note":"","ucode":"4E82D9A285DAFF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216839,"discussion_content":"把自己当品牌打造，不要总是学习，可以尝试输出：博客、技术分享或者开源项目，想进大公司得有东西给人看，学习是内功，人家招聘看的是牌面，这是两种概念。","likes_number":41,"is_delete":false,"is_hidden":false,"ctime":1585488801,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1213699,"avatar":"https://static001.geekbang.org/account/avatar/00/12/85/03/1a7d3dd6.jpg","nickname":"chanllenge","note":"","ucode":"148FC08C90BC58","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":208127,"discussion_content":"简历给我，给你内推阿里","likes_number":21,"is_delete":false,"is_hidden":false,"ctime":1584536382,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1508990,"avatar":"https://static001.geekbang.org/account/avatar/00/17/06/7e/735968e2.jpg","nickname":"西门吹牛","note":"","ucode":"E5D3624DDE1E83","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288509,"discussion_content":"只要自己技术过硬， 别的都不是问题，关键问下自己真的技术好吗，面不止要广，还要深，深最重要，极客时间这么多课程，看完一遍，看完看懂，和自己完全理解是不一样的，你这情况，就是抓紧沉淀自己，然后一线去不了，去二线，找内推，只要给面试的机会，就看你，面试怎么表现了","likes_number":20,"is_delete":false,"is_hidden":false,"ctime":1593764778,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":2397784,"avatar":"https://static001.geekbang.org/account/avatar/00/24/96/58/07babd63.jpg","nickname":"何威","note":"","ucode":"8B245E39F42869","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1508990,"avatar":"https://static001.geekbang.org/account/avatar/00/17/06/7e/735968e2.jpg","nickname":"西门吹牛","note":"","ucode":"E5D3624DDE1E83","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367157,"discussion_content":"一语惊醒我这个梦中人","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618280090,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":288509,"ip_address":""},"score":367157,"extra":""},{"author":{"id":1476490,"avatar":"https://static001.geekbang.org/account/avatar/00/16/87/8a/07ab933c.jpg","nickname":"璀璨星空","note":"","ucode":"CE6324C4261A52","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1508990,"avatar":"https://static001.geekbang.org/account/avatar/00/17/06/7e/735968e2.jpg","nickname":"西门吹牛","note":"","ucode":"E5D3624DDE1E83","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381409,"discussion_content":"他这属于没任何渠道，没任何目标和方向的去学习，埋头苦干的人","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1625043273,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":288509,"ip_address":""},"score":381409,"extra":""},{"author":{"id":1251835,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/oiboHpgukqib2ASXeU0H7W1ibgRMqyrNE5KaWicicPEDy0ia8YdoneZAtvW0EFIiaqZJp2OS4dnweOgXaJ5EjJicicEqic5A/132","nickname":"覃钰栋","note":"","ucode":"19080C463658EF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1476490,"avatar":"https://static001.geekbang.org/account/avatar/00/16/87/8a/07ab933c.jpg","nickname":"璀璨星空","note":"","ucode":"CE6324C4261A52","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":403807,"discussion_content":"怀疑你在说我","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634145988,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":381409,"ip_address":""},"score":403807,"extra":""}]},{"author":{"id":1625589,"avatar":"https://static001.geekbang.org/account/avatar/00/18/cd/f5/49e65d7a.jpg","nickname":"小鲨鱼。","note":"","ucode":"E0607C8C0F13B4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":221987,"discussion_content":"我是一年半的工作经验，二线公司，现在打算考明年研究生，但时时也会思考，这么累学习，自己到底开不开心，为的是什么？几年后自己又会是什么样？之后我的某位老师她告诉我，不要高估自己一年内的成果，也不要低估自己十年后的收获，自己喜欢做什么，喜欢什么样的状态，自己难道不知道吗，年轻人怎么会怕累呢。","likes_number":13,"is_delete":false,"is_hidden":false,"ctime":1586091774,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1396951,"avatar":"https://static001.geekbang.org/account/avatar/00/15/50/d7/f82ed283.jpg","nickname":"辣么大","note":"","ucode":"AB308B6DCA0108","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":212658,"discussion_content":"因上努力，果上随缘～","likes_number":11,"is_delete":false,"is_hidden":false,"ctime":1584999630,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1669182,"avatar":"https://static001.geekbang.org/account/avatar/00/19/78/3e/84b18502.jpg","nickname":"最好的狗焕啊","note":"","ucode":"6F77A37326618F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1396951,"avatar":"https://static001.geekbang.org/account/avatar/00/15/50/d7/f82ed283.jpg","nickname":"辣么大","note":"","ucode":"AB308B6DCA0108","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":230704,"discussion_content":"太喜欢你这句话了","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1586764662,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":212658,"ip_address":""},"score":230704,"extra":""}]},{"author":{"id":1481101,"avatar":"https://static001.geekbang.org/account/avatar/00/16/99/8d/da23b460.jpg","nickname":"Geek","note":"","ucode":"98A43DBE4FAE61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216593,"discussion_content":"其实每天学俩个小时并不长，可以在多学俩小时。","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1585468693,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1133194,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4a/8a/c1069412.jpg","nickname":"makermade","note":"","ucode":"03386B90CB8F20","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1481101,"avatar":"https://static001.geekbang.org/account/avatar/00/16/99/8d/da23b460.jpg","nickname":"Geek","note":"","ucode":"98A43DBE4FAE61","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":222338,"discussion_content":"这是要累死楼主","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1586136942,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":216593,"ip_address":""},"score":222338,"extra":""},{"author":{"id":1669182,"avatar":"https://static001.geekbang.org/account/avatar/00/19/78/3e/84b18502.jpg","nickname":"最好的狗焕啊","note":"","ucode":"6F77A37326618F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1481101,"avatar":"https://static001.geekbang.org/account/avatar/00/16/99/8d/da23b460.jpg","nickname":"Geek","note":"","ucode":"98A43DBE4FAE61","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":230703,"discussion_content":"我也觉得，一天两个小时是真的不够用，有时候理解一章的内容两个小时就过去了，平常工作不是很忙，没任务的时候也在看书，PDF的，继续坚持吧","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1586764629,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":216593,"ip_address":""},"score":230703,"extra":""},{"author":{"id":1734795,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/78/8b/421cb2c4.jpg","nickname":"成活","note":"","ucode":"F8840EE4DC3969","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1481101,"avatar":"https://static001.geekbang.org/account/avatar/00/16/99/8d/da23b460.jpg","nickname":"Geek","note":"","ucode":"98A43DBE4FAE61","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":251964,"discussion_content":"很佩服能坚持每天学习的人，我每天下班就只想躺尸","likes_number":13,"is_delete":false,"is_hidden":false,"ctime":1588130186,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":216593,"ip_address":""},"score":251964,"extra":""}]},{"author":{"id":1742968,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/98/78/6459e29e.jpg","nickname":"麦芽科技学堂","note":"","ucode":"A90DDE4B6696BE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":207402,"discussion_content":"简历投递是公司是最后没办法的招聘方式，可以开发几个独立的作品，直接提交作品试试呢 ","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1584495283,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015483,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7e/bb/947c329a.jpg","nickname":"程序员小跃","note":"","ucode":"25BB96E0791A60","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":208867,"discussion_content":"不要轻易放弃，现在内推很流行，你可以试试，寻找下机会","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1584585544,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1800886,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/7a/b6/f54bbfaa.jpg","nickname":"花郎世纪","note":"","ucode":"301DF9B6375E08","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":208612,"discussion_content":"加油，还年轻拼一拼","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1584554893,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015267,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/e3/ad6a4758.jpg","nickname":"Todd  BD","note":"","ucode":"21F27169916949","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284995,"discussion_content":"在西安的话可以私信我， 公司外企，技术氛围好， 技术栈也新， 可以内推。","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1592708395,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1390286,"avatar":"https://static001.geekbang.org/account/avatar/00/15/36/ce/5c958ff9.jpg","nickname":"Just do it","note":"","ucode":"70C3F8F9707325","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1015267,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/e3/ad6a4758.jpg","nickname":"Todd  BD","note":"","ucode":"21F27169916949","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287378,"discussion_content":"你好，这里貌似不能私信","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593429835,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":284995,"ip_address":""},"score":287378,"extra":""},{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1390286,"avatar":"https://static001.geekbang.org/account/avatar/00/15/36/ce/5c958ff9.jpg","nickname":"Just do it","note":"","ucode":"70C3F8F9707325","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292594,"discussion_content":"你还真在西安？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595260598,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":287378,"ip_address":""},"score":292594,"extra":""},{"author":{"id":1015267,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/e3/ad6a4758.jpg","nickname":"Todd  BD","note":"","ucode":"21F27169916949","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1390286,"avatar":"https://static001.geekbang.org/account/avatar/00/15/36/ce/5c958ff9.jpg","nickname":"Just do it","note":"","ucode":"70C3F8F9707325","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292869,"discussion_content":"\n请在拉钩或者boss搜索 西安卓派信息科技有限公司 沟通的时候可以说明是通过极客时间来的","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1595371841,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":287378,"ip_address":""},"score":292869,"extra":""}]},{"author":{"id":1101959,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d0/87/6880e490.jpg","nickname":"Prozombie","note":"","ucode":"ADB4753F00595E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":214825,"discussion_content":"这种情况找内推是最好的选择","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1585235560,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1549364,"avatar":"","nickname":"Geek_3b1096","note":"","ucode":"A6BD92B79B3632","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":211234,"discussion_content":"每天学习两小时 点赞","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1584815368,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1344431,"avatar":"https://static001.geekbang.org/account/avatar/00/14/83/af/1cb42cd3.jpg","nickname":"马以","note":"","ucode":"3FEA06CA14DE28","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":214108,"discussion_content":"极客上每天都是小黑点的话，一年后再试试看","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1585146493,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1325816,"avatar":"https://static001.geekbang.org/account/avatar/00/14/3a/f8/c1a939e7.jpg","nickname":"君哥聊技术","note":"","ucode":"2C9A22BCE4C79E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":208044,"discussion_content":"最近招聘确实不多，不过机会还是有的，可以在一些招聘网站多看看","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1584533489,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1310798,"avatar":"https://static001.geekbang.org/account/avatar/00/14/00/4e/be2b206b.jpg","nickname":"吴小智","note":"","ucode":"C7C9F58B5C9F7B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":207212,"discussion_content":"可以试试内推？","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1584464109,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1062864,"avatar":"https://static001.geekbang.org/account/avatar/00/10/37/d0/26975fba.jpg","nickname":"aof","note":"","ucode":"5815D63C4926BC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":319969,"discussion_content":"我的情况可能跟你差不多，但是我已经工作6年了哈哈，之前面过阿里几次，没通过，想进大厂真的挺难的，但是自己还在等机会！不过有一条还是有很大机会的，我身边就有这样的例子，而且工作时间比较短，你可以不要想着一步进一线大厂，可以先进一个有些名气的二三线互联网公司，提升两三年，再跳到一线，还是有很大机会的","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1604216763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1154101,"avatar":"https://static001.geekbang.org/account/avatar/00/11/9c/35/9dc79371.jpg","nickname":"你好旅行者","note":"","ucode":"5C72A428DC28F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1062864,"avatar":"https://static001.geekbang.org/account/avatar/00/10/37/d0/26975fba.jpg","nickname":"aof","note":"","ucode":"5815D63C4926BC","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370584,"discussion_content":"为什么都想去大厂，像阿里这样的pua厂，有什么可去的","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1619459223,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":319969,"ip_address":""},"score":370584,"extra":""}]},{"author":{"id":2019109,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/cf/25/8c91fd43.jpg","nickname":"Chord","note":"","ucode":"6E248DA470FACC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298685,"discussion_content":"找内推吧，比直接投好一点，我在北京可以给你内推。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1597377991,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1481811,"avatar":"https://static001.geekbang.org/account/avatar/00/16/9c/53/ade0afb0.jpg","nickname":"ub8","note":"","ucode":"0D937C3EAEB781","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":222695,"discussion_content":"给你点赞","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1586168245,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1164481,"avatar":"https://static001.geekbang.org/account/avatar/00/11/c4/c1/1118e24e.jpg","nickname":"赵赟","note":"","ucode":"B027E6F3449F9C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":217256,"discussion_content":"看书吧，更加系统","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1585533373,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2739750,"avatar":"https://static001.geekbang.org/account/avatar/00/29/ce/26/f493253d.jpg","nickname":"源不息","note":"","ucode":"2B9FF0B611BC9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":551425,"discussion_content":"简历写的一定有问题，而且还要多偷，多试，只要想你描述的一样，一样有机会的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645013269,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1959822,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/e7/8e/318cfde0.jpg","nickname":"Spoon","note":"","ucode":"2FF9193AD482C2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371880,"discussion_content":"简历发我试试啊？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620033631,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1256984,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/RRQerM7wWWB23jYmINBltjAC92XeTSoeuBF8icIvMt5e5yic2eVuPAPK5UuqAOwdiaq6QyzeFPUKnr93ovs9I0IoQ/132","nickname":"木木","note":"","ucode":"E37D015EFDF3B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":360143,"discussion_content":"想来上海的可以找我","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616378334,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1577210,"avatar":"https://static001.geekbang.org/account/avatar/00/18/10/fa/d977627e.jpg","nickname":"刘大人","note":"","ucode":"F66AE613E80398","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348087,"discussion_content":"面试 都会，简历过不去，我不信，，要不学学作PPT","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612424046,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1248322,"avatar":"https://static001.geekbang.org/account/avatar/00/13/0c/42/8c038ed3.jpg","nickname":"欣然","note":"","ucode":"5B008560B28CAC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332917,"discussion_content":"tx内推一波","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607393484,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1110269,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f0/fd/f01ea39d.jpg","nickname":"隔壁的小王","note":"","ucode":"DFEA703CF1268D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302552,"discussion_content":"要不要来辅导试试？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598952836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1501819,"avatar":"https://static001.geekbang.org/account/avatar/00/16/ea/7b/8f597e3d.jpg","nickname":"早就在城下","note":"","ucode":"3B0D4D7CF7339A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298896,"discussion_content":"私信我，我可以内推你，北京软件园二期某公司","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597468672,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1607208,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKiay65IMyD82E59Xnbp370ChMG3N9XQuXoKwfhZJ19zotzKMlJhwzBDxE61bp26jdkf54NY9L41yg/132","nickname":"Geek_5227ac","note":"","ucode":"8C468F5C45696E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282163,"discussion_content":"同求，今年的疫情更加造成简历无人问津！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591894642,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1003738,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/da/ed4803cb.jpg","nickname":"CCC","note":"","ucode":"2E254444098267","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":261260,"discussion_content":"简历可以私聊我，ok的话我给您内推","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588948967,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1359893,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c0/15/be72b945.jpg","nickname":"端点星好运","note":"","ucode":"AA48B23A1C4317","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":227283,"discussion_content":"请问大佬近况如何？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586482139,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357637,"user_name":"37.2","can_delete":false,"product_type":"c1","uid":2219666,"ip_address":"广东","ucode":"3B20A30414BD6E","user_header":"https://static001.geekbang.org/account/avatar/00/21/de/92/659322ad.jpg","comment_is_top":false,"comment_ctime":1663508845,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1663508845","product_id":100039001,"comment_content":"1. 需求调研，不管是谁给的需求，一定要弄清楚他的诉求是什么，要做成什么样子;产品类需求就找熟悉该类产品的人调研，技术类需求就找对应的类似技术产品，最终产出产品方案<br>2. 进行技术评估，根据当前基础设施和已有能力进行评估，最终确定项目的大致节奏和工期<br>3. 进行技术方案分析和设计，多设计几套方案；最好的方案不一定最适合当下，所以就可能进行迭代升级<br>4. 评估当前方案对现有功能的影响，如果是新的需求，那可以不评估<br>5. 然后及时编码实现，代码CR，代码优化，自测，他侧<br>6. 回归，发布","like_count":0},{"had_liked":false,"id":356668,"user_name":"Sherk","can_delete":false,"product_type":"c1","uid":2156245,"ip_address":"中国香港","ucode":"AFE3E7F158258D","user_header":"https://static001.geekbang.org/account/avatar/00/20/e6/d5/4f1fc074.jpg","comment_is_top":false,"comment_ctime":1662481022,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1662481022","product_id":100039001,"comment_content":"思考题： 开放性问题，完全凭自己的经验回答。首先有问题得到本质是解决什么，再联想有没有类似的工具可以解决。<br><br>本节主要讲了如何进行面向对象分析。<br>     1.拿到需求后，要具体抽出要干什么。先得到一个简单方案，然后再看方案存在的 问题，一步一步优化。<br>    2.","like_count":0},{"had_liked":false,"id":348114,"user_name":"roie","can_delete":false,"product_type":"c1","uid":1371983,"ip_address":"","ucode":"0CC9598364820A","user_header":"https://static001.geekbang.org/account/avatar/00/14/ef/4f/8b7e1f1e.jpg","comment_is_top":false,"comment_ctime":1654751548,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654751548","product_id":100039001,"comment_content":"sha算法，不属于加密算法，它是hash算法，hash操作是不可逆的，不知是否正确✅","like_count":0},{"had_liked":false,"id":345622,"user_name":"泥鳅儿","can_delete":false,"product_type":"c1","uid":1323000,"ip_address":"","ucode":"26B47C8FC67615","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ojfRyNRvy1x3Mia0nssz6CNPHrHXwPPmibvds1URgoHQuKXrGiaxrEbsT6sAvuK4N4AOicySh8S9iaWcOLjteOl6Kgg/132","comment_is_top":false,"comment_ctime":1652436472,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652436472","product_id":100039001,"comment_content":"争哥，如果调用方的系统时间与接口服务端的系统时间不一致，那校验token是否在时间窗口期是不是就有问题，可能本来有权限访问的客户端，由于系统时间不一致，可能导致也没权限调用接口了，是吗","like_count":0,"discussions":[{"author":{"id":1239557,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ea/05/c0d8014d.jpg","nickname":"一道阳光","note":"","ucode":"F35207CCCEC6E2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":208793,"discussion_content":"父类提供一个默认的抛出异常的实现方法，这样子类必须去实现。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584581035,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1200660,"avatar":"https://static001.geekbang.org/account/avatar/00/12/52/14/cb118a61.jpg","nickname":"键舞飞扬","note":"","ucode":"4EC7A8D2E7AC78","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":346536,"discussion_content":"应该定义为空的虚方法。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611986053,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1620507,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epTx3WM1A1hxjOmtfQNa0QQ01QUlhaaSHrZ3OcnzYibY1gFeNFAcZ7yQpxZsbyk7D9m6JA9X5j44tA/132","nickname":"糖醋排骨","note":"","ucode":"00ED918A220077","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":205810,"discussion_content":"空的方法也不行，如果没有重写，调用父类方法会报异常","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584345345,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343340,"user_name":"恬毅","can_delete":false,"product_type":"c1","uid":1015240,"ip_address":"","ucode":"914ED16F3BE714","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7d/c8/e4727683.jpg","comment_is_top":false,"comment_ctime":1650789817,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650789817","product_id":100039001,"comment_content":"之前某节面试就被问到如何设计一个12306网站","like_count":0},{"had_liked":false,"id":339855,"user_name":"Geek_783504","can_delete":false,"product_type":"c1","uid":2743789,"ip_address":"","ucode":"549D3F0549743C","user_header":"https://static001.geekbang.org/account/avatar/00/29/dd/ed/f6c5432b.jpg","comment_is_top":false,"comment_ctime":1648437785,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1648437785","product_id":100039001,"comment_content":"现提出一套解决方案，分析不足缺陷，在后继续迭代几个版本，最终得到具体的方案","like_count":0},{"had_liked":false,"id":339774,"user_name":"白云苍饭勇往直前！","can_delete":false,"product_type":"c1","uid":2757030,"ip_address":"","ucode":"11EA43531E2845","user_header":"https://static001.geekbang.org/account/avatar/00/2a/11/a6/50c3e4a2.jpg","comment_is_top":false,"comment_ctime":1648374790,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1648374790","product_id":100039001,"comment_content":"leader丢需求的场景简直不要太真实","like_count":0},{"had_liked":false,"id":338781,"user_name":"良胜","can_delete":false,"product_type":"c1","uid":1764364,"ip_address":"","ucode":"9EBE2491291BE4","user_header":"https://static001.geekbang.org/account/avatar/00/1a/ec/0c/f20586b1.jpg","comment_is_top":false,"comment_ctime":1647737056,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1647737056","product_id":100039001,"comment_content":"如果每次都要做加解密，性能上损耗太大，这样考虑的话，传统的session认证也有重放安全问题，用https不就可以解决被劫持的问题吗","like_count":0},{"had_liked":false,"id":336905,"user_name":"顺势而为","can_delete":false,"product_type":"c1","uid":2757858,"ip_address":"","ucode":"FE7D688D24823E","user_header":"https://static001.geekbang.org/account/avatar/00/2a/14/e2/f6f1627c.jpg","comment_is_top":false,"comment_ctime":1646459851,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1646459851","product_id":100039001,"comment_content":"我觉得作者写的《设计模式之美》，很真实，贴切开发者的情况，能真正地讲述不同的感受，让我们有很多的借鉴作用。往往我们都会困惑，当你经验未足够丰富的时候，你发现自己的困惑越多，当你经验越多的时候，你就发现作者讲得越真实有用。","like_count":0},{"had_liked":false,"id":332840,"user_name":"铲铲队","can_delete":false,"product_type":"c1","uid":1132569,"ip_address":"","ucode":"D16372C34B7AE3","user_header":"https://static001.geekbang.org/account/avatar/00/11/48/19/14dd81d9.jpg","comment_is_top":false,"comment_ctime":1643720676,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1643720676","product_id":100039001,"comment_content":"小争哥的这个实现流程和Http 摘要认证比较相似","like_count":0},{"had_liked":false,"id":329913,"user_name":"技术骨干","can_delete":false,"product_type":"c1","uid":1098720,"ip_address":"","ucode":"8FCF8DE6D29201","user_header":"https://static001.geekbang.org/account/avatar/00/10/c3/e0/3db22579.jpg","comment_is_top":false,"comment_ctime":1641639266,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1641639266","product_id":100039001,"comment_content":"先做需求分析，是一个逐步优化的过程。理解了做什么，怎么做就有的放矢，再世面上现成的框架就方便多了。","like_count":0},{"had_liked":false,"id":329854,"user_name":"罗杰","can_delete":false,"product_type":"c1","uid":1320487,"ip_address":"","ucode":"96BAFAA147341F","user_header":"https://static001.geekbang.org/account/avatar/00/14/26/27/eba94899.jpg","comment_is_top":false,"comment_ctime":1641600506,"is_pvip":false,"discussion_count":0,"race_medal":2,"score":"1641600506","product_id":100039001,"comment_content":"之前设计注册防刷用的策略是：客户端获取服务器的时间戳（如果单纯会有客户端的时间戳会有问题），注册的时候带上这个时间戳，如果是超出 5s（考虑到最大延迟） 则返回未知错误。","like_count":0},{"had_liked":false,"id":320499,"user_name":"大卡","can_delete":false,"product_type":"c1","uid":1818970,"ip_address":"","ucode":"FBB5B756A78D67","user_header":"https://static001.geekbang.org/account/avatar/00/1b/c1/5a/68c4c556.jpg","comment_is_top":false,"comment_ctime":1636353891,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636353891","product_id":100039001,"comment_content":"老师这个案例中我没有体会到“面向对象”啊，是不是面向对象和面向过程的需求分析过程是差不多的呢。","like_count":0},{"had_liked":false,"id":318017,"user_name":"Geek_f04ee1","can_delete":false,"product_type":"c1","uid":2822456,"ip_address":"","ucode":"D2139CD009BA6F","user_header":"","comment_is_top":false,"comment_ctime":1635125034,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635125034","product_id":100039001,"comment_content":"为什么客户端需要把密码传过去？本地用密码生成token后就间接带有token了，服务器查到对应appid的密码后，配上其他参数生成token进行比对不是更好吗？","like_count":0},{"had_liked":false,"id":316385,"user_name":"keep_it_real","can_delete":false,"product_type":"c1","uid":2055554,"ip_address":"","ucode":"F5057CAF752FF3","user_header":"https://static001.geekbang.org/account/avatar/00/1f/5d/82/81b2ba91.jpg","comment_is_top":false,"comment_ctime":1634293223,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634293223","product_id":100039001,"comment_content":"其实吧 遇到的大多数需求都已经有成熟的解决方案了。","like_count":0},{"had_liked":false,"id":314835,"user_name":"多学多看多记","can_delete":false,"product_type":"c1","uid":2276155,"ip_address":"","ucode":"0670C833007510","user_header":"https://static001.geekbang.org/account/avatar/00/22/bb/3b/6e020a32.jpg","comment_is_top":false,"comment_ctime":1633491061,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633491061","product_id":100039001,"comment_content":"感觉叫加密算法不是很准确，应该是摘要算法，本质也是不可逆的哈希算法","like_count":0},{"had_liked":false,"id":313375,"user_name":"阿昕","can_delete":false,"product_type":"c1","uid":1012906,"ip_address":"","ucode":"F3AD093B68E074","user_header":"https://static001.geekbang.org/account/avatar/00/0f/74/aa/178a6797.jpg","comment_is_top":false,"comment_ctime":1632401823,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1632401823","product_id":100039001,"comment_content":"开放性问题首先需要确定资源情况，比如说依赖的服务存在哪些限制，然后去考虑业务真实诉求是什么，在实现方案中取一个平衡值","like_count":0},{"had_liked":false,"id":311577,"user_name":"charmsongo","can_delete":false,"product_type":"c1","uid":1609051,"ip_address":"","ucode":"4FBEE716E93A1A","user_header":"https://static001.geekbang.org/account/avatar/00/18/8d/5b/383a49e4.jpg","comment_is_top":false,"comment_ctime":1631319219,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1631319219","product_id":100039001,"comment_content":"面向需求(对象)分析、面向对象设计、面向对象编程<br><br>程序员必须有面对模糊需求，去思考，去沟通，去细化的能力，那些现在要做，未来要做，和不用去做的功能。<br><br>先实现功能，再去做迭代优化，防止止步不前的窘境","like_count":0},{"had_liked":false,"id":310842,"user_name":"慌张而黑糖","can_delete":false,"product_type":"c1","uid":1638878,"ip_address":"","ucode":"B4416885A301C8","user_header":"https://static001.geekbang.org/account/avatar/00/19/01/de/bf524817.jpg","comment_is_top":false,"comment_ctime":1630933275,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630933275","product_id":100039001,"comment_content":"这里“将 URL、AppID、密码、时间戳拼接在一起，通过加密算法生成 token”，如何保证后端与前端的时间戳一致呢？如果时间戳不一致，是不是会导致生成的token不一致，还是说通过前端传过来的时间戳进行生成后端token。这里我在想时间戳是不是可以只到分，然后”微服务端在收到这些数据之后，会验证当前时间戳跟传递过来的时间戳，是否在一定的时间窗口内（比如一分钟）。如果超过一分钟，则判定 token 过期，拒绝接口请求“这部分校验是不是都不用做了（这样做好像不灵活了，不能方便的更改时间窗口了🤔）。","like_count":0},{"had_liked":false,"id":308247,"user_name":"小周","can_delete":false,"product_type":"c1","uid":2453498,"ip_address":"","ucode":"7ED7BC27A46C4C","user_header":"https://static001.geekbang.org/account/avatar/00/25/6f/fa/615a0df3.jpg","comment_is_top":false,"comment_ctime":1629470627,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629470627","product_id":100039001,"comment_content":"如果一个需求比较模糊、比较抽象，那么就需要将其具体化，通过沟通、挖掘、分析、假设和梳理等方式，得出一个简易的方案。再从最简易的方案开始，逐步完善，得到最终方案","like_count":0},{"had_liked":false,"id":306628,"user_name":"Geek_b7eb88","can_delete":false,"product_type":"c1","uid":1573715,"ip_address":"","ucode":"0EB46381D9B1CB","user_header":"","comment_is_top":false,"comment_ctime":1628650653,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628650653","product_id":100039001,"comment_content":"我们之前有个投票的业务需求，在防刷票方面用https的双向认证做安全防护。一直解决不了的问题就是机群的刷票。","like_count":0},{"had_liked":false,"id":300687,"user_name":"江小田","can_delete":false,"product_type":"c1","uid":1003149,"ip_address":"","ucode":"C5197BF856E8D3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4e/8d/34e0f6f3.jpg","comment_is_top":false,"comment_ctime":1625305643,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625305643","product_id":100039001,"comment_content":"吹毛求疵一下。这个业务貌似是接口认证，而不是鉴权。鉴权应该是认证后，再判断有没有对应接口权限的事😂","like_count":0},{"had_liked":false,"id":300534,"user_name":"小帅","can_delete":false,"product_type":"c1","uid":1239663,"ip_address":"","ucode":"4129A7E9427FFC","user_header":"https://static001.geekbang.org/account/avatar/00/12/ea/6f/09de5f65.jpg","comment_is_top":false,"comment_ctime":1625208675,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625208675","product_id":100039001,"comment_content":"鉴权比较通用的做法还是使用rsa进行加解签操作，不做这不是重点，我想看到的是怎么进行面向对象的分析，好像没看出来","like_count":0},{"had_liked":false,"id":299600,"user_name":"建强","can_delete":false,"product_type":"c1","uid":1397126,"ip_address":"","ucode":"62B03D0E0C64EC","user_header":"https://static001.geekbang.org/account/avatar/00/15/51/86/b5fd8dd8.jpg","comment_is_top":false,"comment_ctime":1624758039,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624758039","product_id":100039001,"comment_content":"开放性问题的设计：<br>采用自顶向下，逐步求精的方法，先搞清基本的概念，需求的方向，然后大体分解成几个独立的部分，再对每一部分，逐步求精，对于复杂的部分可以再次进行分解求精，直到最后细化到能真正设计实现每一小部分的需求。","like_count":0,"discussions":[{"author":{"id":1200660,"avatar":"https://static001.geekbang.org/account/avatar/00/12/52/14/cb118a61.jpg","nickname":"键舞飞扬","note":"","ucode":"4EC7A8D2E7AC78","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":346538,"discussion_content":"复用是直接用，不用做什么事，扩展是使用新的逻辑，要自己实现。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1611986141,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":297184,"user_name":"Geek_5b7d28","can_delete":false,"product_type":"c1","uid":2057476,"ip_address":"","ucode":"BAA1CDD539C369","user_header":"","comment_is_top":false,"comment_ctime":1623370263,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1623370263","product_id":100039001,"comment_content":"面向对象分析中的面向对象没有体现出来呀","like_count":0},{"had_liked":false,"id":288706,"user_name":"炫炫","can_delete":false,"product_type":"c1","uid":1358609,"ip_address":"","ucode":"FDC7A0C6E08B02","user_header":"https://static001.geekbang.org/account/avatar/00/14/bb/11/7069b8eb.jpg","comment_is_top":false,"comment_ctime":1618633429,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618633429","product_id":100039001,"comment_content":"这个真的棒","like_count":0},{"had_liked":false,"id":287822,"user_name":"EQLT","can_delete":false,"product_type":"c1","uid":1122933,"ip_address":"","ucode":"609C93F0DEF0BC","user_header":"https://static001.geekbang.org/account/avatar/00/11/22/75/79693c63.jpg","comment_is_top":false,"comment_ctime":1618186943,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1618186943","product_id":100039001,"comment_content":"这篇收获很大，最主要学会了一种如何分析的思路“自问自答”，开端就是分析“如何实现鉴权”出发，得出“具体过程”，从中提取“要素”，整个过程可以很好践行DDD的战略设计。","like_count":0},{"had_liked":false,"id":284914,"user_name":"Geek_86eac6","can_delete":false,"product_type":"c1","uid":1787022,"ip_address":"","ucode":"8C02E398CC6A35","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI4CBQHuLDWOdicOl1elTdSicqMyY1s5JDWXiaHsSk0VSWaVe0U6CTo701ZGz9h6MvibsAGKnvVq7xxFw/132","comment_is_top":false,"comment_ctime":1616543899,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616543899","product_id":100039001,"comment_content":"对于一个抽象的需求，首先要明确需求，然后拿出一个最简单的解决方案，然后不断迭代优化。","like_count":0},{"had_liked":false,"id":283537,"user_name":"Graham","can_delete":false,"product_type":"c1","uid":1994570,"ip_address":"","ucode":"C2545DE16EC3DD","user_header":"","comment_is_top":false,"comment_ctime":1615811156,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615811156","product_id":100039001,"comment_content":"另外，如果是公司内部调用，一般鉴权通过约定好的header 来控制就好来，通过检测平时的tps，来看是否有异常调用。如果是开放给外部的，恐怕还得做好请求量的控制吧，如果不做，因为外部的调用（都有效），把自己的系统弄崩溃，这恐怕也是一种风险吧。<br>","like_count":0},{"had_liked":false,"id":283536,"user_name":"Graham","can_delete":false,"product_type":"c1","uid":1994570,"ip_address":"","ucode":"C2545DE16EC3DD","user_header":"","comment_is_top":false,"comment_ctime":1615810962,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615810962","product_id":100039001,"comment_content":"我刚开始的思路想到是：鉴权这种有多种实现，把鉴权的通用方法抽象出来，然后让具体的接口继承，然后做一个切面做拦截，然后再是具体的鉴权实现，结果一上来就是说鉴权的实现。<br>鉴权是不是 可以不止是自己实现，也可以调用第三方","like_count":0},{"had_liked":false,"id":282171,"user_name":"尔冬橙","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1615119418,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615119418","product_id":100039001,"comment_content":"这是对称加密还是非对称加密","like_count":0},{"had_liked":false,"id":273309,"user_name":"gsy_yang","can_delete":false,"product_type":"c1","uid":2412406,"ip_address":"","ucode":"48471A72E4A2A3","user_header":"","comment_is_top":false,"comment_ctime":1610530581,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1610530581","product_id":100039001,"comment_content":"这种场景是针对外部接口访问(存在客户端-服务端)，若是针对服务端暴露接口，如何去做接口的鉴权呢？<br>","like_count":0},{"had_liked":false,"id":264827,"user_name":"lh","can_delete":false,"product_type":"c1","uid":2242740,"ip_address":"","ucode":"F048C6C0C7E8EA","user_header":"https://static001.geekbang.org/account/avatar/00/22/38/b4/1843033d.jpg","comment_is_top":false,"comment_ctime":1606663220,"is_pvip":false,"replies":[{"id":"96056","content":"������","user_name":"作者回复","comment_id":264827,"uid":"1190123","ip_address":"","utype":1,"ctime":1606700494,"user_name_real":"王争"}],"discussion_count":1,"race_medal":0,"score":"1606663220","product_id":100039001,"comment_content":"配置过程：<br>服务器：留存RSA私钥，分配渠道标识（明文），渠道密码（密文）<br>客户端：持有RSA公钥，被分配渠道标识（明文），渠道密码（密文）<br><br>交互过程：<br>客户端：RSA公钥加密（业务参数+渠道密码+渠道标识+时间戳），时间戳<br>服务器：<br>1.判断时间戳是否在有效期内；<br>2.RSA公钥加密得到：业务参数+渠道密码+渠道标识+时间戳；<br>3.判断时间戳是否被修改；<br>4.判断渠道标识所对应的渠道密码是否正确；<br><br>不过，由于公钥加密，对于数据量较大时，性能较差，所以一般的做法是，客户端与服务器利用RSA协商一个对称密钥后，之后的请求都使用对称密钥进行加密通信。","like_count":0,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"王争","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510698,"discussion_content":"������","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606700494,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":258107,"user_name":"Kingram","can_delete":false,"product_type":"c1","uid":2247700,"ip_address":"","ucode":"212E403E81F2FC","user_header":"https://static001.geekbang.org/account/avatar/00/22/4c/14/8fa39544.jpg","comment_is_top":false,"comment_ctime":1604301300,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1604301300","product_id":100039001,"comment_content":"可以将secretkey拼接在需要发送的数据（包括时间戳）后，再进行加密算法生成token，server接收到后验证时效性，验证token正确性","like_count":0},{"had_liked":false,"id":257523,"user_name":"Geek_00e01b","can_delete":false,"product_type":"c1","uid":1597071,"ip_address":"","ucode":"BC76A83B53D0EF","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLe9iavda8ia7vNkbMVEHsCKs43l6U6HGWibiaxxKd9PuiaYu5wRedicC96PLicZ9VIh0ic5Jg8YHPrta3IAQ/132","comment_is_top":false,"comment_ctime":1604020476,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1604020476","product_id":100039001,"comment_content":"这就是需求分析啊，感觉就是可行性方案的设计，或者就是总体上可行的解决方案设计。<br>在我们实际开发中，这个过程叫做技术调研，或者技术评审","like_count":0},{"had_liked":false,"id":253781,"user_name":"俄国的一盘桃子","can_delete":false,"product_type":"c1","uid":2220264,"ip_address":"","ucode":"DB9BFB35A54377","user_header":"https://static001.geekbang.org/account/avatar/00/21/e0/e8/a2d033fa.jpg","comment_is_top":false,"comment_ctime":1602872861,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602872861","product_id":100039001,"comment_content":"安全上可以用非对称密钥的加验签来解决，重放攻击可以用时间窗口+requestmsgid来一起解决，不过具体场景还需要具体分析。比如tps类的交易肯定会有单号的，qps类的就不一样了","like_count":0},{"had_liked":false,"id":252292,"user_name":"微末凡尘","can_delete":false,"product_type":"c1","uid":1099525,"ip_address":"","ucode":"25EDFD0914D0F4","user_header":"https://static001.geekbang.org/account/avatar/00/10/c7/05/19c5c255.jpg","comment_is_top":false,"comment_ctime":1602225122,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602225122","product_id":100039001,"comment_content":"第二次看这篇文章，依然干货满满，拿到一个需求的时候，有时候我们可能无从下手，需要从简单的做起，一步一步优化，可以把自己的思路记录下来，确认好流程，再进行开发，前期的设计往往更加的重要","like_count":0},{"had_liked":false,"id":247965,"user_name":"Geek_0f31ae","can_delete":false,"product_type":"c1","uid":1870888,"ip_address":"","ucode":"A0F198BEF2AB2F","user_header":"","comment_is_top":false,"comment_ctime":1599959733,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599959733","product_id":100039001,"comment_content":"想问下，考虑到这个token如果放到URL，put, post 等请求就无法鉴权，那是不是说token应该放到 header 中呢？","like_count":0},{"had_liked":false,"id":247892,"user_name":"Mateo","can_delete":false,"product_type":"c1","uid":1479043,"ip_address":"","ucode":"9E15121C6521F7","user_header":"https://static001.geekbang.org/account/avatar/00/16/91/83/0fac9e2b.jpg","comment_is_top":false,"comment_ctime":1599903451,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1599903451","product_id":100039001,"comment_content":"在每次遇到复杂的开发需求时，可以先将自己的开发步骤以注释的形式在ide中写出。先完善开发的代码的流程，然后在每一步的注释后面编写相应的功能代码。","like_count":0},{"had_liked":false,"id":246921,"user_name":"Younger Ku","can_delete":false,"product_type":"c1","uid":1323102,"ip_address":"","ucode":"D157DC38BDB515","user_header":"https://static001.geekbang.org/account/avatar/00/14/30/5e/c42bc33f.jpg","comment_is_top":false,"comment_ctime":1599531629,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599531629","product_id":100039001,"comment_content":"除了基于时间窗口来防重放，还可以将token以生成时的时间戳（也可以是随机值）为key放入缓存，第一次请求后台时根据key取出token和传过来的token做比对，一样的话就有权限，验证通过后将key从缓存删除，这样黑客重放请求的时候后台根据传递的时间戳就拿不到token了，表明没有权限。","like_count":0},{"had_liked":false,"id":245904,"user_name":"宇天飞","can_delete":false,"product_type":"c1","uid":1126444,"ip_address":"","ucode":"3FB37D1E2DAA61","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/2c/06375913.jpg","comment_is_top":false,"comment_ctime":1599104752,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1599104752","product_id":100039001,"comment_content":"1、抽象问题具体化，想去想清楚我需要做一个什么样的东西，怎么使用他，后面再去考虑其他问题，比如优化","like_count":0},{"had_liked":false,"id":243898,"user_name":"郑大钱","can_delete":false,"product_type":"c1","uid":1503067,"ip_address":"","ucode":"114CF48056880E","user_header":"https://static001.geekbang.org/account/avatar/00/16/ef/5b/ff28088f.jpg","comment_is_top":false,"comment_ctime":1598322109,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598322109","product_id":100039001,"comment_content":"无奈的被卡在了第一步，我得先弄清楚什么是“接口鉴权”，看看有没有简易的demo，争取把demo跑起来，建立更直观的印象。然后找一找相关的第三方库，看看第三方库都解决了哪些问题。最后和leader确定我们需要做到什么程度，确定技术方向和边界。然后才开始下述的OOA(面相对象分析)","like_count":0},{"had_liked":false,"id":243873,"user_name":"Gopher","can_delete":false,"product_type":"c1","uid":1206229,"ip_address":"","ucode":"3C1F9012BB486D","user_header":"https://static001.geekbang.org/account/avatar/00/12/67/d5/1b26b725.jpg","comment_is_top":false,"comment_ctime":1598317795,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598317795","product_id":100039001,"comment_content":"在经验上 如果是初级工程师遇到这样的问题，肯定是先实现一个最简单的版本，在慢慢迭代。在迭代的过程中，给出设计方案 和公司更资深的公司讨论下，能收获到更多","like_count":0},{"had_liked":false,"id":243095,"user_name":"Ilearning99","can_delete":false,"product_type":"c1","uid":1989119,"ip_address":"","ucode":"7901836A2C47EF","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/qOdqzmC507sibL6sichNSDaVmyoMKibEIqHWpic4CftgOQnoA3QKeRPwic9j1Ha8MLtzzqzfSRavR9GWMju09SMADUg/132","comment_is_top":false,"comment_ctime":1597964990,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597964990","product_id":100039001,"comment_content":"先简化需求，再不断迭代这个思路非常好。不知道为什么，我在实际开发中，总是一开始想做的非常复杂，最后在deadline前总是快无法完成了，就会做各种删减，做可以完成的版本。","like_count":0},{"had_liked":false,"id":239515,"user_name":"龙猫","can_delete":false,"product_type":"c1","uid":1112490,"ip_address":"","ucode":"FD726CC969EF9C","user_header":"https://static001.geekbang.org/account/avatar/00/10/f9/aa/3e80212e.jpg","comment_is_top":false,"comment_ctime":1596553109,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596553109","product_id":100039001,"comment_content":"鉴权加密可以参考jwt的实现","like_count":0},{"had_liked":false,"id":238998,"user_name":"杨逸林","can_delete":false,"product_type":"c1","uid":1167233,"ip_address":"","ucode":"4BF3CF3E2F1AC7","user_header":"https://static001.geekbang.org/account/avatar/00/11/cf/81/96f656ef.jpg","comment_is_top":false,"comment_ctime":1596412391,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596412391","product_id":100039001,"comment_content":"实际工作中，我在上一家公司和其他公司的系统做对接的时候，他们的系统就是要我这样做的。最后还要做一次md5大写加密😂，超级麻烦，生成token","like_count":0},{"had_liked":false,"id":238178,"user_name":"何超","can_delete":false,"product_type":"c1","uid":1522691,"ip_address":"","ucode":"02C19C1A070315","user_header":"https://static001.geekbang.org/account/avatar/00/17/3c/03/ce032c4d.jpg","comment_is_top":false,"comment_ctime":1596089698,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596089698","product_id":100039001,"comment_content":"如果在客户端根据时间戳生成token,有效时间1分钟的话，客户端和服务端就得做时间同步了。","like_count":0},{"had_liked":false,"id":238066,"user_name":"Washington","can_delete":false,"product_type":"c1","uid":1168960,"ip_address":"","ucode":"00F5F36416147D","user_header":"https://static001.geekbang.org/account/avatar/00/11/d6/40/e1a51ac1.jpg","comment_is_top":false,"comment_ctime":1596055917,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596055917","product_id":100039001,"comment_content":"谢谢老师精彩的讲解。这个需求可是说是通过用例的形式捕获的，文中提到的接口调用方就是用例中的Primary actor, 而文中的微服务就是用例中的The system。其中有Main success scenario 还有一些Extensions。如果能用一个用例的模板会更清晰一些。用例就是OOA所推崇的一种表达需求的方式。我们之后在OOD中需要所得就是考虑如何用一组对象来实现这个用例。","like_count":0},{"had_liked":false,"id":237989,"user_name":"laofengfenglao","can_delete":false,"product_type":"c1","uid":1041736,"ip_address":"","ucode":"883D1B1BD985F5","user_header":"","comment_is_top":false,"comment_ctime":1596022996,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596022996","product_id":100039001,"comment_content":"循序渐进，条理清晰，赞","like_count":0},{"had_liked":false,"id":237820,"user_name":"Geek_b70da7","can_delete":false,"product_type":"c1","uid":2062505,"ip_address":"","ucode":"BA81153E36FEA1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/06icm3r7fRGSjdEYGIWIx4VV5ibkKibzvlaJ08ibBXyzRoricX93YmvJvvsurahgCNics6Rt5cGqxMSh24KxMJ3RjNmA/132","comment_is_top":false,"comment_ctime":1595983032,"is_pvip":false,"replies":[{"id":"88029","content":"没懂你说的 亲 ������","user_name":"作者回复","comment_id":237820,"uid":"1190123","ip_address":"","utype":1,"ctime":1596112757,"user_name_real":"王争"}],"discussion_count":1,"race_medal":0,"score":"1595983032","product_id":100039001,"comment_content":"我想知道如何保证加了时间戳还能在一段时间没token不变化尼","like_count":0,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"王争","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502554,"discussion_content":"没懂你说的 亲 ������","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596112757,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":234428,"user_name":"润！","can_delete":false,"product_type":"c1","uid":1237696,"ip_address":"","ucode":"13B7C23B5F6B24","user_header":"https://static001.geekbang.org/account/avatar/00/12/e2/c0/09cef977.jpg","comment_is_top":false,"comment_ctime":1594690826,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594690826","product_id":100039001,"comment_content":"作者这样的授课方式解答了我脑海里很多的疑问，赞一个","like_count":0},{"had_liked":false,"id":232165,"user_name":"御风","can_delete":false,"product_type":"c1","uid":1812807,"ip_address":"","ucode":"51C8212BE06364","user_header":"https://static001.geekbang.org/account/avatar/00/1b/a9/47/ded5da90.jpg","comment_is_top":false,"comment_ctime":1593877393,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593877393","product_id":100039001,"comment_content":"token加密算法是单向的，那么被截获后，黑客只能用同一请求不断重复攻击吧，重复请求过多导致服务端垮掉吧。","like_count":0},{"had_liked":false,"id":224065,"user_name":"郭俊杰","can_delete":false,"product_type":"c1","uid":1082785,"ip_address":"","ucode":"D328E5738A4413","user_header":"https://static001.geekbang.org/account/avatar/00/10/85/a1/2442332c.jpg","comment_is_top":false,"comment_ctime":1591264353,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591264353","product_id":100039001,"comment_content":"我在接入第三方服务时，观察过。果然调用的方式跟老师讲的一模一样到第三步，终于明白人家为啥要这么设计了。","like_count":0},{"had_liked":false,"id":220743,"user_name":"朝小树","can_delete":false,"product_type":"c1","uid":1323875,"ip_address":"","ucode":"18DC282DEF16C8","user_header":"https://static001.geekbang.org/account/avatar/00/14/33/63/2d48822a.jpg","comment_is_top":false,"comment_ctime":1590317179,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590317179","product_id":100039001,"comment_content":"如果用户本地时间不对的话，应该每次请求都会失效；","like_count":0},{"had_liked":false,"id":220221,"user_name":"李达龙","can_delete":false,"product_type":"c1","uid":1450486,"ip_address":"","ucode":"F5702E69D90B7F","user_header":"https://static001.geekbang.org/account/avatar/00/16/21/f6/16bc9c24.jpg","comment_is_top":false,"comment_ctime":1590208502,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590208502","product_id":100039001,"comment_content":"拿到需求一般回问清楚，越具体越好，但是完成功能开发，在测试阶段","like_count":0},{"had_liked":false,"id":219753,"user_name":"李德政","can_delete":false,"product_type":"c1","uid":1023885,"ip_address":"","ucode":"3AC49F5671485C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9f/8d/d725d32c.jpg","comment_is_top":false,"comment_ctime":1590073992,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1590073992","product_id":100039001,"comment_content":"还可以在优化一下方案：参数里面增加随机数，服务端记录随机数，这样可以保证一个请求最多只被执行一次。","like_count":0,"discussions":[{"author":{"id":1142739,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6f/d3/4384a4e5.jpg","nickname":"莫念","note":"","ucode":"4C079403645BBF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389109,"discussion_content":"那对于并发请发的就会误杀了吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629122068,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":217179,"user_name":"师哥","can_delete":false,"product_type":"c1","uid":1333376,"ip_address":"","ucode":"A86CD1661D370F","user_header":"https://static001.geekbang.org/account/avatar/00/14/58/80/c9e232b6.jpg","comment_is_top":false,"comment_ctime":1589433350,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589433350","product_id":100039001,"comment_content":"面向对象分析是一个循序渐进的过程。","like_count":0},{"had_liked":false,"id":214692,"user_name":"track6688","can_delete":false,"product_type":"c1","uid":1088040,"ip_address":"","ucode":"0A9E893F8FD379","user_header":"https://static001.geekbang.org/account/avatar/00/10/9a/28/03613c22.jpg","comment_is_top":false,"comment_ctime":1588782680,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588782680","product_id":100039001,"comment_content":"完全被说中了，确实很多时候，拿到一个需求，我都会一片空。我也拿我手上的一个小需求跟着老师的思路，分析了一遍，感觉是比较清楚了。喜欢这些经验文章。","like_count":0},{"had_liked":false,"id":214366,"user_name":"JKwar","can_delete":false,"product_type":"c1","uid":1047466,"ip_address":"","ucode":"B733CA24D5701F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fb/aa/01fedf6c.jpg","comment_is_top":false,"comment_ctime":1588731581,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1588731581","product_id":100039001,"comment_content":"碰到过图片加载功能的需求，尽可能抽象，预留扩展点。","like_count":0},{"had_liked":false,"id":211683,"user_name":"简单猫","can_delete":false,"product_type":"c1","uid":1866485,"ip_address":"","ucode":"EA027D4C344E25","user_header":"https://static001.geekbang.org/account/avatar/00/1c/7a/f5/54a5084b.jpg","comment_is_top":false,"comment_ctime":1587995513,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587995513","product_id":100039001,"comment_content":"一直在用啊 公总号token","like_count":0},{"had_liked":false,"id":211182,"user_name":"Geek_519725","can_delete":false,"product_type":"c1","uid":1901818,"ip_address":"","ucode":"AA55172CE0D50F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eowbI239DoIfte0aXibrEGgU6n1Jl1ib1FJaK4mVUSOkQYsfqrdISf2JtiabqJ7iaPib36xJ35XAKd4syA/132","comment_is_top":false,"comment_ctime":1587910812,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587910812","product_id":100039001,"comment_content":"建议对加密这块有疑惑的的同学可以了解下：对称加密、非对称加密、摘要算法。本文中用到的是SHA算法，实际上就是hash，其实这不叫加密算法，因为无法解密，这个应该叫做摘要算法，它是不可逆的，即使知道算法，也无法知道原始数据是啥。所以只要确保密码不被泄露，那么这个链接被截获也无所谓。","like_count":0},{"had_liked":false,"id":205768,"user_name":"酸辣土豆丝","can_delete":false,"product_type":"c1","uid":1751234,"ip_address":"","ucode":"0E3E4AFB31E1E6","user_header":"https://static001.geekbang.org/account/avatar/00/1a/b8/c2/d1904d74.jpg","comment_is_top":false,"comment_ctime":1586737320,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586737320","product_id":100039001,"comment_content":"首先会跟问清楚需求具体的内容，有哪些注意点，然后调研下，是否有现有的框架，案例，分析清楚，根据自己的场景进行改动","like_count":0},{"had_liked":false,"id":202519,"user_name":"KK","can_delete":false,"product_type":"c1","uid":1324863,"ip_address":"","ucode":"FFC31A3FE3A285","user_header":"https://static001.geekbang.org/account/avatar/00/14/37/3f/a9127a73.jpg","comment_is_top":false,"comment_ctime":1586000994,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1586000994","product_id":100039001,"comment_content":"没有第四轮分析优化了吗？第四轮只是说了一下其加入时间戳之后的合理性。哈哈哈<br>","like_count":0},{"had_liked":false,"id":202368,"user_name":"张三","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1585977853,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585977853","product_id":100039001,"comment_content":"这个感觉就是一个用户名密码登录的安全性方面考虑的例子。","like_count":0},{"had_liked":false,"id":200781,"user_name":"这得从我捡到一个鼠标垫开始说起","can_delete":false,"product_type":"c1","uid":1272321,"ip_address":"","ucode":"2FF4347B4E7A9B","user_header":"https://static001.geekbang.org/account/avatar/00/13/6a/01/d9cb531d.jpg","comment_is_top":false,"comment_ctime":1585650216,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1585650216","product_id":100039001,"comment_content":"使用https不就是密文传输了，既然是密文传输，那就不会泄露appid和secret。这鉴权不就是验证调用方的身份吗，跟登录微信qq是一个东西，输入账号密码，验证成功就算登录了。","like_count":0,"discussions":[{"author":{"id":1115041,"avatar":"https://static001.geekbang.org/account/avatar/00/11/03/a1/e6a0f60b.jpg","nickname":"Sid","note":"","ucode":"0461B574B2736B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":314870,"discussion_content":"哈哈 我也被问过一个问题 为什么有了https还要验签","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603204865,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":192018,"user_name":"秋风画扇","can_delete":false,"product_type":"c1","uid":1132356,"ip_address":"","ucode":"5BCBC1422C51EC","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/44/964aa665.jpg","comment_is_top":false,"comment_ctime":1584812312,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584812312","product_id":100039001,"comment_content":"1.罗列功能需求 2.提取相关属性行为 3.聚合分装成对象 4.编码实现  5.重构调整     就是不断抽取优化，像我一样进行分析编码的有没有？","like_count":0},{"had_liked":false,"id":187837,"user_name":"肖臧","can_delete":false,"product_type":"c1","uid":1047733,"ip_address":"","ucode":"4FAC9FF54DD6A0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fc/b5/ac717737.jpg","comment_is_top":false,"comment_ctime":1584257526,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584257526","product_id":100039001,"comment_content":"其实这种鉴权系统在SaaS系统里很多，Facebook Messenger Platform，各大短信网关。这次OOA只分析了鉴权过程，那么password或者secret的生成、修改和展示并没有写出，我觉得不够完整。","like_count":0},{"had_liked":false,"id":186251,"user_name":"大王叫我来巡山","can_delete":false,"product_type":"c1","uid":1099513,"ip_address":"","ucode":"1B8D0C701BC95E","user_header":"https://static001.geekbang.org/account/avatar/00/10/c6/f9/caf27bd3.jpg","comment_is_top":false,"comment_ctime":1583808245,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583808245","product_id":100039001,"comment_content":"正常情况下都是先找现成的，然后比对业务需求分析契合度，稍加改动直接上线","like_count":0},{"had_liked":false,"id":183670,"user_name":"千锤百炼领悟之极限","can_delete":false,"product_type":"c1","uid":1744257,"ip_address":"","ucode":"224B5CF2101716","user_header":"https://static001.geekbang.org/account/avatar/00/1a/9d/81/d748b7eb.jpg","comment_is_top":false,"comment_ctime":1583113418,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583113418","product_id":100039001,"comment_content":"client的系统时间与服务器时间不一致就会导致验证失败，应该在服务器加一个接口获取服务器当前时间，client用获取的这个时间作为ts传输。","like_count":0},{"had_liked":false,"id":182325,"user_name":"雷刚","can_delete":false,"product_type":"c1","uid":1655725,"ip_address":"","ucode":"115FE2BE1AAB61","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/pTD8nS0SsORKiaRD3wB0NK9Bpd0wFnPWtYLPfBRBhvZ68iaJErMlM2NNSeEibwQfY7GReILSIYZXfT9o8iaicibcyw3g/132","comment_is_top":false,"comment_ctime":1582768995,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582768995","product_id":100039001,"comment_content":"今天看到百度翻译api的设计，和老师讲得差不多&lt;https:&#47;&#47;api.fanyi.baidu.com&#47;doc&#47;21&gt;","like_count":0},{"had_liked":false,"id":182273,"user_name":"未来小娃","can_delete":false,"product_type":"c1","uid":1047329,"ip_address":"","ucode":"477D166EBB6B70","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fb/21/d017438c.jpg","comment_is_top":false,"comment_ctime":1582754690,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1582754690","product_id":100039001,"comment_content":"【设计模式笔记14】20200227<br>本次以接口鉴权展示乐面向对象编程的一般流程：也就是进行面向对象得需求分析，将模糊的需求细化为可落地的具体的需求，可以按照最小可行性产品思维思考，到底是什么才是该需求要解决问题，需要哪些功能，分别用来做什么的，如果有专业术语也要搞清楚与需求本身的联系，逐步讲抽象的描述具体化流程化。要提醒自己，你理解的需求和PD写的需求可能不是同一个东西，一定要多沟通确认清楚，随着业务复杂度的增加，我们需要深入理解业务，业务都理解不清楚妄谈领域驱动设计是毫无意义的，画图是一个很好理解业务的方法，大部分时候我们可能只负责某一个模块，但是如果跳出来主动去看整个业务链路你理解的深度也会加深","like_count":0},{"had_liked":false,"id":181042,"user_name":"somenzz","can_delete":false,"product_type":"c1","uid":1187197,"ip_address":"","ucode":"EA59A170DF8910","user_header":"https://static001.geekbang.org/account/avatar/00/12/1d/7d/368df396.jpg","comment_is_top":false,"comment_ctime":1582465442,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582465442","product_id":100039001,"comment_content":"这就是我最新使用的 JWT ","like_count":0},{"had_liked":false,"id":180194,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1582208012,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582208012","product_id":100039001,"comment_content":"我记得我之前面试一家公司的时候，面试官曾经出过一个问题，如何保证在一台电脑上不同的浏览器，只要有一个浏览器登陆的账号，其他浏览器在登录的时候也可以做到直接登陆呢<br>针对这种比较笼统的需求的时候，我一开始给出的想法是请求服务端的时候利用请求者的IP地址,如果他的IP地址在我们的数据库中存储了，那么就直接进行登录，如果发现了异地存储，再利用手机号验证这种方式，将数据库里面的登录IP改为新的IP，但是这样的话，无法防止攻击者伪装他人的IP地址进行登录，于是乎我联想一下我能不能在本机上，保存一个文件，然后每次无论什么浏览器去访问的时候都去读取这个文件，并且带的文件上面的信息去直接请求，直白说就是账号密码，后来我想到了host文件，因为一般来说host的文件都是将网站名和网站的真实IP进行相映射的，那么我们可以在用户登录的时候去读取host文件,当然再过于具体的实现我没有给出，这只是我的一个思路，后来面试官说这也算是一种实现思路,不过就是比较流氓.也不知道大家有什么更好的实现思路","like_count":0},{"had_liked":false,"id":177228,"user_name":"张理查","can_delete":false,"product_type":"c1","uid":1003152,"ip_address":"","ucode":"1F93E631CD4B35","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4e/90/a8d19e7b.jpg","comment_is_top":false,"comment_ctime":1581327056,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581327056","product_id":100039001,"comment_content":"能否记录最后一次访问的ts，即同ts只能访问一次，这样做除了会损失一定的性能，还有什么缺点呢？","like_count":0},{"had_liked":false,"id":176973,"user_name":"涉蓝","can_delete":false,"product_type":"c1","uid":1134619,"ip_address":"","ucode":"C1321E29E01625","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLh8ubWQtDRa6exJtloSwibLliaejpF7434ficyggzukmXE63UlSPvbykoiaVDZo4CbDIIOQsCkicibyn9A/132","comment_is_top":false,"comment_ctime":1581239092,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581239092","product_id":100039001,"comment_content":"有个问题是 如果都是内网调用的话 还需要这样的鉴权吗？ 我们公司的好多服务只有内网的 然后有的服务搞了类似加密验签的东西 有的完全没有  <br>如果内网的话 似乎意义不大 要是黑客都摸到内网了 也就防不住啥的感觉","like_count":0},{"had_liked":false,"id":174690,"user_name":"静静聆听","can_delete":false,"product_type":"c1","uid":1263932,"ip_address":"","ucode":"0A8600CB928EFE","user_header":"https://static001.geekbang.org/account/avatar/00/13/49/3c/5d54c510.jpg","comment_is_top":false,"comment_ctime":1580353502,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1580353502","product_id":100039001,"comment_content":"老师是在介绍面向对象设计的思路，评论都是抓着token问题不放，这是重点么？老师我就想问下，您的这四步其实应该都属于面向对象设计把","like_count":0},{"had_liked":false,"id":171315,"user_name":"不似旧日","can_delete":false,"product_type":"c1","uid":1161271,"ip_address":"","ucode":"DF4C5E3AB9570C","user_header":"https://static001.geekbang.org/account/avatar/00/11/b8/37/98991aeb.jpg","comment_is_top":false,"comment_ctime":1578900952,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578900952","product_id":100039001,"comment_content":"第二轮优化图文不符, 文中说的是通过appId查出接口信息依同样的加密算法得到token_s, 拿token_s与请求的token对比<br>图片上的是解析token对比参数是否一致","like_count":0},{"had_liked":false,"id":168127,"user_name":"Ben","can_delete":false,"product_type":"c1","uid":1252353,"ip_address":"","ucode":"70351D4FAE47F7","user_header":"https://static001.geekbang.org/account/avatar/00/13/1c/01/5aaaf5b6.jpg","comment_is_top":false,"comment_ctime":1578016469,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578016469","product_id":100039001,"comment_content":"迭代第二轮生成token时, 请求接口的URL是固定的, 加或不加好像没什么区别","like_count":0},{"had_liked":false,"id":167208,"user_name":"fly","can_delete":false,"product_type":"c1","uid":1025992,"ip_address":"","ucode":"D1F6938C9CE15D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a7/c8/5608cbdb.jpg","comment_is_top":false,"comment_ctime":1577716604,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577716604","product_id":100039001,"comment_content":"服务之间的调用，通过验权，最早是用两边约定的密码+appId。后来参考微信和支付宝改成文中最后的样子：appId、url参数、时间+密码的组合。我想说的是，没思路的时候看看开放平台的接口，也能提供很多帮助","like_count":0},{"had_liked":false,"id":166264,"user_name":"至今未来","can_delete":false,"product_type":"c1","uid":1632716,"ip_address":"","ucode":"ED6F557FDB0B5B","user_header":"https://static001.geekbang.org/account/avatar/00/18/e9/cc/1eb3120e.jpg","comment_is_top":false,"comment_ctime":1577428101,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1577428101","product_id":100039001,"comment_content":"看评论看的我怀疑人生？ https post 请求数据放在body里 不是很稳的么。  ","like_count":0,"discussions":[{"author":{"id":1187197,"avatar":"https://static001.geekbang.org/account/avatar/00/12/1d/7d/368df396.jpg","nickname":"somenzz","note":"","ucode":"EA59A170DF8910","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":183028,"discussion_content":"http,https抓包工具都可以抓到的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582465572,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1272321,"avatar":"https://static001.geekbang.org/account/avatar/00/13/6a/01/d9cb531d.jpg","nickname":"这得从我捡到一个鼠标垫开始说起","note":"","ucode":"2FF4347B4E7A9B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1187197,"avatar":"https://static001.geekbang.org/account/avatar/00/12/1d/7d/368df396.jpg","nickname":"somenzz","note":"","ucode":"EA59A170DF8910","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":218343,"discussion_content":"https密文不可破解，你用工具抓包，都安装了工具的证书当然可以看到密文。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585650400,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":183028,"ip_address":""},"score":218343,"extra":""}]},{"author":{"id":1397895,"avatar":"https://static001.geekbang.org/account/avatar/00/15/54/87/ff33b386.jpg","nickname":"小假期","note":"","ucode":"4ED4162667D5D0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":131144,"discussion_content":"同，有了https貌似就不需要后面的2，3，4优化了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578829471,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165675,"user_name":"alls well","can_delete":false,"product_type":"c1","uid":1072439,"ip_address":"","ucode":"8E3EB5A3DF6E0D","user_header":"https://static001.geekbang.org/account/avatar/00/10/5d/37/8261fc68.jpg","comment_is_top":false,"comment_ctime":1577281603,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577281603","product_id":100039001,"comment_content":"针对嵌入式设备来讲，需求就是应付，产品经理给出OR用于描述使用场景，软件分解出DR-DS，解释what和how的问题。具体规格参数，软件要做和确认的太多。每次做这种感觉or就是形同虚设。如何做好嵌入式的需求呢？","like_count":0},{"had_liked":false,"id":163170,"user_name":"小妖","can_delete":false,"product_type":"c1","uid":1730626,"ip_address":"","ucode":"49C01DBFADF101","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJvm1JYIDcS74s4cEYxA1PXMqjortVXEjUKyGQcPvibNJ4EAuksIa6uoHgr6G1yRqAM2KtP3yicKgTA/132","comment_is_top":false,"comment_ctime":1576665619,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576665619","product_id":100039001,"comment_content":"一般来讲，微服务间的接口调用默认应该是安全的，通过配置注册中心控制安全，不需要进行健全，非法用户根本不可能允许注册。文章中讲的这些更适合的场景是和第三方服务进行接口对接，是完全的http restf请求","like_count":0},{"had_liked":false,"id":162671,"user_name":"。。。。","can_delete":false,"product_type":"c1","uid":1107784,"ip_address":"","ucode":"0163FD085D4293","user_header":"https://static001.geekbang.org/account/avatar/00/10/e7/48/df149c8d.jpg","comment_is_top":false,"comment_ctime":1576576147,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576576147","product_id":100039001,"comment_content":"没太理解client端是哪个端？是app还是服务端的一个client提供方？我理解的是这样的一个请求先去请求先到服务端提供的clent服务获取到一个新的路径，然后再去另一个服务端请求数据，是这样吗","like_count":0},{"had_liked":false,"id":160995,"user_name":"空知","can_delete":false,"product_type":"c1","uid":1013283,"ip_address":"","ucode":"C448E98238DD36","user_header":"https://static001.geekbang.org/account/avatar/00/0f/76/23/31e5e984.jpg","comment_is_top":false,"comment_ctime":1576074579,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1576074579","product_id":100039001,"comment_content":"重放功能加时间戳 + nonce可以解决啊","like_count":0,"discussions":[{"author":{"id":1198046,"avatar":"https://static001.geekbang.org/account/avatar/00/12/47/de/7b923db2.jpg","nickname":"曦","note":"","ucode":"AFB48B6C606EB2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":406221,"discussion_content":"接口性能会不会降一点点","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634723412,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":160917,"user_name":"麟","can_delete":false,"product_type":"c1","uid":1735579,"ip_address":"","ucode":"7A7BF72E0AA17B","user_header":"https://static001.geekbang.org/account/avatar/00/1a/7b/9b/694c24aa.jpg","comment_is_top":false,"comment_ctime":1576060279,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576060279","product_id":100039001,"comment_content":"例子一直在考虑微服务端，但是对于调用者怎么保证安全性？ 我能想到的就是每一次调用微服务接口，都需要去后台请求一下token，但是总觉的这样很啰嗦，不知道有没有其他的办法？？","like_count":0},{"had_liked":false,"id":160601,"user_name":"        ","can_delete":false,"product_type":"c1","uid":1255918,"ip_address":"","ucode":"21028A49D81B06","user_header":"https://static001.geekbang.org/account/avatar/00/13/29/ee/fba11edf.jpg","comment_is_top":false,"comment_ctime":1575983734,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575983734","product_id":100039001,"comment_content":"可以通过非对称加密来解决","like_count":0},{"had_liked":false,"id":160516,"user_name":"cv0cv0","can_delete":false,"product_type":"c1","uid":1360093,"ip_address":"","ucode":"93FF9277F03FD0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLEIsgI4ub1VOKWtVOfouAzSqx8Yt8ibQEsAnwNJsJHmuJzzpQqG79HullvYwpic8hgiclgON2GwXSjw/132","comment_is_top":false,"comment_ctime":1575967748,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575967748","product_id":100039001,"comment_content":"如果是用户自己，他就可以通过反编译 App 给自己账户加余额了。","like_count":0},{"had_liked":false,"id":160033,"user_name":"William Ning","can_delete":false,"product_type":"c1","uid":1592279,"ip_address":"","ucode":"4DB8D05E69E5F3","user_header":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","comment_is_top":false,"comment_ctime":1575859339,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1575859339","product_id":100039001,"comment_content":"边学边思考...","like_count":0},{"had_liked":false,"id":159424,"user_name":"Murrre","can_delete":false,"product_type":"c1","uid":1685995,"ip_address":"","ucode":"49644059B512BE","user_header":"https://static001.geekbang.org/account/avatar/00/19/b9/eb/6bdab896.jpg","comment_is_top":false,"comment_ctime":1575621090,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575621090","product_id":100039001,"comment_content":"https:&#47;&#47;github.com&#47;murreIsCoding&#47;auth<br>根据老师教程编写的实战","like_count":0},{"had_liked":false,"id":159385,"user_name":"progyoung","can_delete":false,"product_type":"c1","uid":1014692,"ip_address":"","ucode":"0B4898AE78F9F5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7b/a4/24955994.jpg","comment_is_top":false,"comment_ctime":1575612510,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1575612510","product_id":100039001,"comment_content":"这就是需求分析的迭代嘛，看来是跟面向对象关系不大","like_count":0,"discussions":[{"author":{"id":1661704,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","nickname":"丁丁历险记","note":"","ucode":"A43829E454C067","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":74333,"discussion_content":"挺大的，渐进式正交分解，模型抽象，ocp 边界确立。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575642823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159383,"user_name":"王一之","can_delete":false,"product_type":"c1","uid":1620113,"ip_address":"","ucode":"7E13332BAEC2F8","user_header":"https://static001.geekbang.org/account/avatar/00/18/b8/91/8a5c3ec6.jpg","comment_is_top":false,"comment_ctime":1575612277,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575612277","product_id":100039001,"comment_content":"我看有些案例还会带上一个随机字符串的参数","like_count":0},{"had_liked":false,"id":159342,"user_name":"carol","can_delete":false,"product_type":"c1","uid":1239823,"ip_address":"","ucode":"B0DD5C80414694","user_header":"https://static001.geekbang.org/account/avatar/00/12/eb/0f/67a7142a.jpg","comment_is_top":false,"comment_ctime":1575602600,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575602600","product_id":100039001,"comment_content":"从模糊的需求中得到功能点，根据功能点提供解决方案，不断提问发现解决方案中问题进行迭代，最终确定一个合理的解决方案，对最终的解决方法在进行描述，得到一个合理的、可落地的需求描述。","like_count":0},{"had_liked":false,"id":158740,"user_name":"shniu","can_delete":false,"product_type":"c1","uid":1019555,"ip_address":"","ucode":"E64CD8BED96D8D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8e/a3/d7e5fe8a.jpg","comment_is_top":false,"comment_ctime":1575444915,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575444915","product_id":100039001,"comment_content":"针对需求不明确，表述含糊，理解上存在二义性的情况，只能把这些都搞清楚，这就体现出了一个良好的工作习惯和解决问题的方法的重要性。我的一般做法是：首先，试图理解需求，把有疑问的地方列出来，将这些问题分为功能性需求的问题和非功能性需求的问题，针对这两类问题分别解决，功能性需求问题，属于业务范畴，可能是自己的业务领域知识不足，也可能是功能需求描述不够细或者考虑不周全，去找相关人沟通，并不断积累业务知识和业务经验；对与非功能性需求，这个一般属于系统固有复杂度，需要自己多思考，查阅资料，借鉴他人的经验，找leader和同事沟通方案，不断优化调整，总之主动成长是必要的。<br><br>1. 需求理解，对领域知识进行强化，方式是沟通、搜索资料等<br>2. 根据实际业务估算业务对系统的非功能性的要求<br>3. 弄清楚需要用到的技术<br>4. 做技术 Spike<br>5. 设计技术实现方案<br>6. 设计测试方案，可能会调整对应的设计<br>7. 遇到问题解决问题","like_count":0},{"had_liked":false,"id":158518,"user_name":"sulatwx","can_delete":false,"product_type":"c1","uid":1348141,"ip_address":"","ucode":"366237F13DE8A7","user_header":"","comment_is_top":false,"comment_ctime":1575392787,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575392787","product_id":100039001,"comment_content":"课后思考：出现需求不明确的开发任务，大多是客户自己也不清楚要实现什么，或者说不清楚系统能实现到什么程度。这种情况下，不妨假设自己就是客户，充分了解客户的业务，或者参考以前类似的项目经验提出解决方案。","like_count":0},{"had_liked":false,"id":158493,"user_name":"Y024","can_delete":false,"product_type":"c1","uid":1018056,"ip_address":"","ucode":"397126D2E17997","user_header":"https://static001.geekbang.org/account/avatar/00/0f/88/c8/ae476935.jpg","comment_is_top":false,"comment_ctime":1575383334,"is_pvip":true,"discussion_count":0,"race_medal":2,"score":"1575383334","product_id":100039001,"comment_content":"Day029 13<br>针对不明确需求，通过“提出问题，解决问题”的方法，不断迭代逼近现实。其实 Kent Beck 推荐的 TDD 编码方式和这个方法也是类似：编写测试代码就好像是向系统提问题，编写系统代码是为了回答问题，这样的对话不断反复，最后生成的就是我们所需要的系统。","like_count":0},{"had_liked":false,"id":158492,"user_name":"圆圆","can_delete":false,"product_type":"c1","uid":1474095,"ip_address":"","ucode":"D89A0EAE7D16F0","user_header":"https://static001.geekbang.org/account/avatar/00/16/7e/2f/913e6cd5.jpg","comment_is_top":false,"comment_ctime":1575383213,"is_pvip":false,"replies":[{"id":"60683","content":"sha是单向加密算法 不知道是不是你误解了 ","user_name":"作者回复","comment_id":158492,"uid":"1190123","ip_address":"","utype":1,"ctime":1575423954,"user_name_real":"王争"}],"discussion_count":1,"race_medal":0,"score":"1575383213","product_id":100039001,"comment_content":"我有一些疑问，即然是防止黑客攻击，那么着重点不应该放在加密算法上吗？<br>我们即使用了sha算法，但是明文还是明明白白的放着。黑客把几个变量试几次之后就知道我们是什么大概情况进行的加密。他自己就可以造参数进行模拟。<br>我觉得对黑客来说，即使最后一种也和第一种一样简单。<br>希望大佬帮忙解答下疑问，感谢～","like_count":0,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"王争","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476745,"discussion_content":"sha是单向加密算法 不知道是不是你误解了 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575423954,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158458,"user_name":"相逢是缘","can_delete":false,"product_type":"c1","uid":1060730,"ip_address":"","ucode":"CB299F53A95654","user_header":"https://static001.geekbang.org/account/avatar/00/10/2f/7a/ab6c811c.jpg","comment_is_top":false,"comment_ctime":1575376720,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575376720","product_id":100039001,"comment_content":"打卡<br>1、需求分析是一个不断优化的过程，可以先给一个简单的方案，然后不断的优化，最后形成一个可执行、可落地的需求列表；<br>2、对于不熟悉的领域（方向），这里面要先搞清楚需求中的一些概念，进行技术调研，先做一个最基础的需求分析，可以很简单，再进行一步一步细节优化（优化的过程也是理解需求，确认需求的过程）；<br>3、形成文档（流程图、说明等）并存档进行文档的版本管理，这样后续在进行工作交接的时候，新来人员可以顺着文档修改记录，理清思路，快速熟悉业务。","like_count":0},{"had_liked":false,"id":158146,"user_name":"Paul Shan","can_delete":false,"product_type":"c1","uid":1593140,"ip_address":"","ucode":"32D99989028284","user_header":"","comment_is_top":false,"comment_ctime":1575338639,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575338639","product_id":100039001,"comment_content":"需求是不断被追问下的产物，一开始的方案是迭代的起点，不要求尽善尽美，如果能充分理解业务问题，目的就已经达到。把这个方案放到各种场景下，不断扩充和调整，然后从安全性，效率，易用性，交付时间等维度再去权衡取舍，得出一个解决方案，整个过程确实费心费力，最后往往不是一个完美方案，而是权衡取舍各种条件下的折中，这可能就是工程的本质。","like_count":0},{"had_liked":false,"id":158121,"user_name":"程序员小跃","can_delete":false,"product_type":"c1","uid":1015483,"ip_address":"","ucode":"25BB96E0791A60","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7e/bb/947c329a.jpg","comment_is_top":false,"comment_ctime":1575335633,"is_pvip":true,"discussion_count":3,"race_medal":0,"score":"1575335633","product_id":100039001,"comment_content":"拿到这个需求，第一反应，自己有一个小的应用就是需要这种鉴权，想过好几种方案，最终自己选择的是jwt的方式，不过基本功能都在后端，前端并没有像老师这样考虑周全，也不知道当初自己是怎么想的。不过这下好了，需求对口，跟着课程学习，就可以找到属于适合我自己的方式来解决困惑。<br>","like_count":0,"discussions":[{"author":{"id":1032484,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c1/24/0ea08c9e.jpg","nickname":"柴柴777","note":"","ucode":"5208B935ECB6F7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":76479,"discussion_content":"不写后端的我感觉就是看看,学学思想","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575818320,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1015483,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7e/bb/947c329a.jpg","nickname":"程序员小跃","note":"","ucode":"25BB96E0791A60","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1032484,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c1/24/0ea08c9e.jpg","nickname":"柴柴777","note":"","ucode":"5208B935ECB6F7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":76767,"discussion_content":"学习下思想，毕竟是通用的。万一以后就用上了呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575853217,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":76479,"ip_address":""},"score":76767,"extra":""},{"author":{"id":1392730,"avatar":"https://static001.geekbang.org/account/avatar/00/15/40/5a/e65e8c40.jpg","nickname":"wl","note":"","ucode":"45062AA2460F1F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1032484,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c1/24/0ea08c9e.jpg","nickname":"柴柴777","note":"","ucode":"5208B935ECB6F7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":88591,"discussion_content":"同感","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576719706,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":76479,"ip_address":""},"score":88591,"extra":""}]}]},{"had_liked":false,"id":158102,"user_name":"jon","can_delete":false,"product_type":"c1","uid":1253287,"ip_address":"","ucode":"5768A34E292CAA","user_header":"https://static001.geekbang.org/account/avatar/00/13/1f/a7/d379ca4f.jpg","comment_is_top":false,"comment_ctime":1575333310,"is_pvip":false,"replies":[{"id":"60685","content":"下一节课有的","user_name":"作者回复","comment_id":158102,"uid":"1190123","ip_address":"","utype":1,"ctime":1575424121,"user_name_real":"王争"}],"discussion_count":1,"race_medal":0,"score":"1575333310","product_id":100039001,"comment_content":"老师能不能给个实例代码","like_count":0},{"had_liked":false,"id":158080,"user_name":"任鹏斌","can_delete":false,"product_type":"c1","uid":1104086,"ip_address":"","ucode":"34319B05EA6E74","user_header":"https://static001.geekbang.org/account/avatar/00/10/d8/d6/47da34bf.jpg","comment_is_top":false,"comment_ctime":1575327606,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575327606","product_id":100039001,"comment_content":"这个方案简单实用，对安全性要求不是特别高的系统很实用。","like_count":0},{"had_liked":false,"id":158050,"user_name":"Jian","can_delete":false,"product_type":"c1","uid":1107305,"ip_address":"","ucode":"17ED4919F22DEC","user_header":"https://static001.geekbang.org/account/avatar/00/10/e5/69/719ec5d0.jpg","comment_is_top":false,"comment_ctime":1575303216,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575303216","product_id":100039001,"comment_content":"今天这篇文章讲的就是工作所做的，marketing api，授权方案完全一样。","like_count":0},{"had_liked":false,"id":158041,"user_name":"Woosang","can_delete":false,"product_type":"c1","uid":1220919,"ip_address":"","ucode":"BB63C9F1BBDF61","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/CJYUnMtcdu7GdMGxzVicTYpfsbhTKzrCIpoLIJxn8ByWsq1ol35RZLe1u4eWJpFhGK7ISpee2slWYokn0vBicw7A/132","comment_is_top":false,"comment_ctime":1575301465,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575301465","product_id":100039001,"comment_content":"UML之类只是一种表达方式，关键还是得理清思路，逐步迭代，也符合PMP的渐进明细的方式","like_count":0},{"had_liked":false,"id":158038,"user_name":"Woosang","can_delete":false,"product_type":"c1","uid":1220919,"ip_address":"","ucode":"BB63C9F1BBDF61","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/CJYUnMtcdu7GdMGxzVicTYpfsbhTKzrCIpoLIJxn8ByWsq1ol35RZLe1u4eWJpFhGK7ISpee2slWYokn0vBicw7A/132","comment_is_top":false,"comment_ctime":1575301333,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575301333","product_id":100039001,"comment_content":"UML之类只是一种表达方式，关键还是得理清思路，逐步迭代，也符合PMP中渐进明细的思路","like_count":0},{"had_liked":false,"id":158030,"user_name":"南山","can_delete":false,"product_type":"c1","uid":1119593,"ip_address":"","ucode":"94656FE4A6C378","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/69/187b9968.jpg","comment_is_top":false,"comment_ctime":1575299851,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1575299851","product_id":100039001,"comment_content":"工作中的CRUD也是可以做的很精彩，业务有一定复杂度情况下，做共性抽象，识别稳定、易变的功能，对易变的功能通过一定程度的抽象，支持可扩展以及代码复用。对稳定的功能或者流程进行抽象，提高可读性、可维护性等等，这些都是可以做的比较出彩的地方，最好是基于充血模型，上来就MVC怼，早晚会玩不下去，对自己也不会有什么成长。<br>稍微复杂的业务场景，可以尝试充血模型来搞，至少是来思考～～～","like_count":0},{"had_liked":false,"id":158024,"user_name":"平风造雨","can_delete":false,"product_type":"c1","uid":1014349,"ip_address":"","ucode":"F9EE4704F31E22","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7a/4d/b0228a1a.jpg","comment_is_top":false,"comment_ctime":1575299295,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1575299295","product_id":100039001,"comment_content":"之前做相关非明确业务性需求，比较喜欢参考调研一些开源的代码，比如之前工作里做鉴权，参考了spring security相关jwt的实现","like_count":0},{"had_liked":false,"id":157993,"user_name":"小喵喵","can_delete":false,"product_type":"c1","uid":1062444,"ip_address":"","ucode":"FDBBB2A59DB8B6","user_header":"https://static001.geekbang.org/account/avatar/00/10/36/2c/8bd4be3a.jpg","comment_is_top":false,"comment_ctime":1575295554,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575295554","product_id":100039001,"comment_content":"期待老师把代码放出来了。","like_count":0},{"had_liked":false,"id":157961,"user_name":"随心而至","can_delete":false,"product_type":"c1","uid":1097836,"ip_address":"","ucode":"31866865255101","user_header":"https://static001.geekbang.org/account/avatar/00/10/c0/6c/29be1864.jpg","comment_is_top":false,"comment_ctime":1575290463,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575290463","product_id":100039001,"comment_content":"一.明确需求<br>之前开发一些比较大的需求时，产品经理总会洋洋洒洒写很多需求。<br>1.首先分清需求的优先级，哪些必须要做，哪些后面要做的<br>2.分析可行性。目前各种资源，个人能力是否跟得上。<br>2.确定需求里面的细节。产品经理不可能做到给你很明确的if else，所以很多细节就需要反复沟通<br>二.设计<br>2.1 梳理逻辑<br>2.2 模块设计，代码设计<br>2.3 编码<br><br>面试：<br>1.需求大意明确。用自己的话复述面试官的问题，看看自己的理解和他提问的是不是一个东西<br>2.争取一定的思考时间，然后按照一定的逻辑说明自己初步的理解，过程中反复确认<br>3.结合面试官的反馈，给个最终版的回答。（我没有面过多少次，说的不一定对）","like_count":0},{"had_liked":false,"id":157931,"user_name":"Cy23","can_delete":false,"product_type":"c1","uid":1591293,"ip_address":"","ucode":"8DC561C5151758","user_header":"https://static001.geekbang.org/account/avatar/00/18/47/fd/895f0c27.jpg","comment_is_top":false,"comment_ctime":1575284895,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575284895","product_id":100039001,"comment_content":"最近做二开的时候，很多新需求都不好确认，本来觉得很简单，当看完没有文档的代码，发现开发成本很大，超出预期，很多如果不大改都无法完成，囧","like_count":0},{"had_liked":false,"id":157882,"user_name":"守拙","can_delete":false,"product_type":"c1","uid":1738326,"ip_address":"","ucode":"F594B2DA3F6D4F","user_header":"https://static001.geekbang.org/account/avatar/00/1a/86/56/509535da.jpg","comment_is_top":false,"comment_ctime":1575276076,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575276076","product_id":100039001,"comment_content":"课堂讨论answer:<br><br>对于开放性的设计问题,简单说下个人的处理方式:<br><br>首先,理解问题的主要矛盾,即问题的核心是什么,What&#39;s the point;<br>在充分理解问题的基础上,在脑海中思考下和该问题相关的几种方案轮廓;<br>然后权衡利弊,选择一种最适合当下情形的方案;<br>最后以方案为主心骨,丰富方案的具体细节.<br><br>答的比较主观,希望能起到一个抛砖引玉的作用.<br>","like_count":0},{"had_liked":false,"id":157854,"user_name":"teddytyy","can_delete":false,"product_type":"c1","uid":1268738,"ip_address":"","ucode":"E1569D81A4154E","user_header":"https://static001.geekbang.org/account/avatar/00/13/5c/02/e7af1750.jpg","comment_is_top":false,"comment_ctime":1575270912,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575270912","product_id":100039001,"comment_content":"对于开放性的设计问题，要就需求方的实际业务场景提问，搞清楚，具体的需求点(最好能发现业务痛点)再进行详细设计","like_count":0},{"had_liked":false,"id":157851,"user_name":"风行者","can_delete":false,"product_type":"c1","uid":1541934,"ip_address":"","ucode":"F058640CF77A35","user_header":"https://static001.geekbang.org/account/avatar/00/17/87/2e/ea54c240.jpg","comment_is_top":false,"comment_ctime":1575270299,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575270299","product_id":100039001,"comment_content":"整个分析过程从最低要求实现角度、安全性考虑、数据接入能力到最终需求确定，逐步推进，既最大限度实现了要求，又不过度设计。期望看到这个场景下一篇。","like_count":0},{"had_liked":false,"id":157828,"user_name":"will","can_delete":false,"product_type":"c1","uid":1156207,"ip_address":"","ucode":"7A7DBE3E0EEAEB","user_header":"https://static001.geekbang.org/account/avatar/00/11/a4/6f/672a27d4.jpg","comment_is_top":false,"comment_ctime":1575266905,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575266905","product_id":100039001,"comment_content":"学习了","like_count":0},{"had_liked":false,"id":157823,"user_name":"一名小学生","can_delete":false,"product_type":"c1","uid":1137292,"ip_address":"","ucode":"5C73082E6B6370","user_header":"https://static001.geekbang.org/account/avatar/00/11/5a/8c/1fec5fa2.jpg","comment_is_top":false,"comment_ctime":1575266190,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575266190","product_id":100039001,"comment_content":"打卡，跟上进度了～<br>需求分析的过程实际上是一个不断迭代优化的过程。我们不要试图一下就能给出一个完美的解决方案，而是先给出一个粗糙的、基础的方案，有一个迭代的基础，然后再慢慢优化，这样一个思考过程能让我们摆脱无从下手的窘境。","like_count":0},{"had_liked":false,"id":157810,"user_name":"grey927","can_delete":false,"product_type":"c1","uid":1202782,"ip_address":"","ucode":"833E02ED835B4A","user_header":"https://static001.geekbang.org/account/avatar/00/12/5a/5e/a897cb0d.jpg","comment_is_top":false,"comment_ctime":1575263042,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1575263042","product_id":100039001,"comment_content":"很多微服务里面需要用到“当前用户”这个概念，是不是应该把“当前用户”也包含到token信息中","like_count":0,"discussions":[{"author":{"id":1030449,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b9/31/636e9007.jpg","nickname":"melo","note":"","ucode":"BF381B18E75867","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291892,"discussion_content":"abstract的反义词，具体的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594988077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1018370,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8a/02/828938c9.jpg","nickname":"Frank","note":"","ucode":"7A488CC6FE15E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":205645,"discussion_content":"大致意思是一个具体的类。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584328459,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1252977,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1e/71/9dcbe6c4.jpg","nickname":"成楠Peter","note":"","ucode":"4D13E7368D8CF2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1018370,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8a/02/828938c9.jpg","nickname":"Frank","note":"","ucode":"7A488CC6FE15E7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":205875,"discussion_content":"是不是应该是concrete","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584352775,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":205645,"ip_address":""},"score":205875,"extra":""},{"author":{"id":1018370,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8a/02/828938c9.jpg","nickname":"Frank","note":"","ucode":"7A488CC6FE15E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1252977,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1e/71/9dcbe6c4.jpg","nickname":"成楠Peter","note":"","ucode":"4D13E7368D8CF2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":205914,"discussion_content":"抱歉。应该是 我也看错了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584357834,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":205875,"ip_address":""},"score":205914,"extra":""}]}]},{"had_liked":false,"id":157809,"user_name":"DullBird","can_delete":false,"product_type":"c1","uid":1110494,"ip_address":"","ucode":"80E2FD5F9687CB","user_header":"https://static001.geekbang.org/account/avatar/00/10/f1/de/3ebcbb3f.jpg","comment_is_top":false,"comment_ctime":1575262989,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575262989","product_id":100039001,"comment_content":"这个🌰之前在研究网关的时候，看到的hamc加签，后来运用到系统登录后端验证接口的加密验证上面。<br>对于课后讨论，我觉得要有各自的一套分析的思路。我觉得UDD的思路就还不错。<br>1.  先理解有哪些用例(即系统外用户的期望，做这个东西的核心目的，解决了什么问题)<br>2. 根据每一个用例，询问用例场景，这个环节尽可能的多的场景能让设计漏洞更少。<br>3. 分析和重新组织用例(比如公共模块，需要抽象的核心用例业务)<br>如果遇到开放性设计问题，需求的调研可以根据1，2来询问和讨论，但是比如鉴权这个功能，我设计的时候选择了用户密码加密，但是没想起来用户密码会被盗的安全性问题，这块的能力我觉得需要个人自己去多看多了解。不知道还有什么好的办法可以提升发现这类问题的能力。","like_count":0},{"had_liked":false,"id":157720,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","comment_is_top":false,"comment_ctime":1575250136,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575250136","product_id":100039001,"comment_content":"虽然对于程序员来说需求分析很重要，但最终需求的明确是产品经理的职责，即便是程序员自己分析需求最终也要与产品经理沟通确认。技术实现另当别论！","like_count":0},{"had_liked":false,"id":157707,"user_name":"Heiky","can_delete":false,"product_type":"c1","uid":1623626,"ip_address":"","ucode":"03AA79E1BC4AE4","user_header":"https://static001.geekbang.org/account/avatar/00/18/c6/4a/3bd896fc.jpg","comment_is_top":false,"comment_ctime":1575249170,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575249170","product_id":100039001,"comment_content":"打卡，最近正好做一个接口鉴权，准备用这个了。","like_count":0},{"had_liked":false,"id":157703,"user_name":"Tom.G","can_delete":false,"product_type":"c1","uid":1206034,"ip_address":"","ucode":"7929B45C1A51F8","user_header":"https://static001.geekbang.org/account/avatar/00/12/67/12/5c6eb568.jpg","comment_is_top":false,"comment_ctime":1575248764,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575248764","product_id":100039001,"comment_content":"面试中遇到开放性的问题，先把能想到的思路说下，一般会和面试官有交流，交流的过程中（面试官可能会提醒）再进行补充","like_count":0},{"had_liked":false,"id":157696,"user_name":"小晏子","can_delete":false,"product_type":"c1","uid":1132337,"ip_address":"","ucode":"3AAA6FB5ACB6AE","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/31/f35367c8.jpg","comment_is_top":false,"comment_ctime":1575248044,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1575248044","product_id":100039001,"comment_content":"整个方案的分析过程是比较关键的，比如文中的几轮方案分析对于初级工程师来讲可能根本想不到，尤其是“重放攻击”，那么应该怎么办呢？这就需要首先先参考其他人的解决方案，然后综合给出自己的方案，在找组内同事们一起讨论，分析利弊，最终给出大家都认同的方案，面试中遇到开放性问题也一样，先给出自己的解决方案，然后和面试官一起探讨方案的利弊，再进行改动，不要紧张，很少有人一上来就能给出完美方案。","like_count":0},{"had_liked":false,"id":157689,"user_name":"再见孙悟空","can_delete":false,"product_type":"c1","uid":1025518,"ip_address":"","ucode":"57E12A2F9CD915","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a5/ee/6bbac848.jpg","comment_is_top":false,"comment_ctime":1575247343,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575247343","product_id":100039001,"comment_content":"有收获不错！","like_count":0},{"had_liked":false,"id":157685,"user_name":"Xs.Ten","can_delete":false,"product_type":"c1","uid":1128376,"ip_address":"","ucode":"2368B9BDDDEE2B","user_header":"https://static001.geekbang.org/account/avatar/00/11/37/b8/c887a5ea.jpg","comment_is_top":false,"comment_ctime":1575246985,"is_pvip":true,"discussion_count":3,"race_medal":0,"score":"1575246985","product_id":100039001,"comment_content":"争哥，有个问题请教下：对于服务器在国内，海外用户鉴权，时间戳怎么跟服务器验证？","like_count":0,"discussions":[{"author":{"id":1102465,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d2/81/db154f5f.jpg","nickname":"飞鱼","note":"","ucode":"F26A7B10FB32CB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70243,"discussion_content":"统一换成UTC时间处理就可以了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575337976,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1443663,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIang00R9vkklnkFCLhzRysNfocr0sLnCdoZwOT3UkulAPefk5BDvd0PfIeQSODSQg1DjKWUmJOaA/132","nickname":"陈迎春","note":"","ucode":"2870BA6D6E5B1E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69157,"discussion_content":"我也有想过过这个问题，客户端和服务器时间不是同步的，虽然时间戳不分时区，但是如果连时间都不同步，如何使用时间戳鉴权？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575266044,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1019835,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8f/bb/7068f251.jpg","nickname":"老姜","note":"","ucode":"FB7962F08A9F3B","race_medal":3,"user_type":1,"is_pvip":false},"reply_author":{"id":1443663,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIang00R9vkklnkFCLhzRysNfocr0sLnCdoZwOT3UkulAPefk5BDvd0PfIeQSODSQg1DjKWUmJOaA/132","nickname":"陈迎春","note":"","ucode":"2870BA6D6E5B1E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69752,"discussion_content":"在一定范围内就可以了，没必要太严格","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575298218,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":69157,"ip_address":""},"score":69752,"extra":""}]}]},{"had_liked":false,"id":157683,"user_name":"deepz","can_delete":false,"product_type":"c1","uid":1570088,"ip_address":"","ucode":"4BD23A44CDB384","user_header":"https://static001.geekbang.org/account/avatar/00/17/f5/28/898a6947.jpg","comment_is_top":false,"comment_ctime":1575246757,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1575246757","product_id":100039001,"comment_content":"上班地铁中。。打卡～","like_count":0},{"had_liked":false,"id":157680,"user_name":"miracle","can_delete":false,"product_type":"c1","uid":1276137,"ip_address":"","ucode":"FD7074F1062AE9","user_header":"https://static001.geekbang.org/account/avatar/00/13/78/e9/9d807269.jpg","comment_is_top":false,"comment_ctime":1575246639,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575246639","product_id":100039001,"comment_content":"1. pwd 尽量不要明文存，万一被脱裤会很严重<br>2. 为了强度足够高通常pwd需要足够长，可以考虑加密完以后压缩存储，减轻存储压力","like_count":0},{"had_liked":false,"id":157656,"user_name":"Chen","can_delete":false,"product_type":"c1","uid":1503113,"ip_address":"","ucode":"C1128558AB5BC4","user_header":"https://static001.geekbang.org/account/avatar/00/16/ef/89/8c73a24d.jpg","comment_is_top":false,"comment_ctime":1575243841,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575243841","product_id":100039001,"comment_content":"需求都是产品带着一张嘴过来的😊","like_count":0},{"had_liked":false,"id":157652,"user_name":"老姜","can_delete":false,"product_type":"c1","uid":1019835,"ip_address":"","ucode":"FB7962F08A9F3B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8f/bb/7068f251.jpg","comment_is_top":false,"comment_ctime":1575239964,"is_pvip":false,"discussion_count":4,"race_medal":3,"score":"1575239964","product_id":100039001,"comment_content":"第三轮的生成url里面为什么还需要传ts，token里面已经有ts了吧？","like_count":0,"discussions":[{"author":{"id":1117935,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0e/ef/030e6d27.jpg","nickname":"xl000","note":"","ucode":"6FEABE7F7D0DC0","race_medal":5,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":68911,"discussion_content":"文中token生成算法是不可逆的，所以仍要传那些参数","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575245302,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134761,"avatar":"https://static001.geekbang.org/account/avatar/00/11/50/a9/3f8c7418.jpg","nickname":"冰糕不冰","note":"","ucode":"B754FE464BA426","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":68890,"discussion_content":"ts是为了告诉服务端这个token生成时间！服务端用当前时间跟这个ts比较，超过一分钟则判定请求过期","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575243518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1022127,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/98/af/3945cea4.jpg","nickname":"一剑","note":"","ucode":"93ADD5B5215D4C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70909,"discussion_content":"你要这么想：服务器验证token（签名）的时候，除了秘钥外其他几个参数全都来自客户端请求，不传ts的话服务端怎么生成token_s（签名）呢：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575382993,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1248576,"avatar":"https://static001.geekbang.org/account/avatar/00/13/0d/40/f70e5653.jpg","nickname":"前端西瓜哥","note":"","ucode":"150130C34CD1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":68956,"discussion_content":"1. 作为判断是否过期的依据\n2. 是进行哈希生成token的必要参数","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575247912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157645,"user_name":"Geek","can_delete":false,"product_type":"c1","uid":1514882,"ip_address":"","ucode":"2F1FA3519FAB50","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKyiafvkibXnTOpIJxlhndHpSDMsqja9AajKYtYgGEGtFWtBb2Mg8DRVjqlWyIxl1piaT4qpMkwerQUg/132","comment_is_top":false,"comment_ctime":1575218657,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575218657","product_id":100039001,"comment_content":"打卡，期待下一讲","like_count":0},{"had_liked":false,"id":157642,"user_name":"William","can_delete":false,"product_type":"c1","uid":1346215,"ip_address":"","ucode":"55F5D9DEE485B1","user_header":"https://static001.geekbang.org/account/avatar/00/14/8a/a7/674c1864.jpg","comment_is_top":false,"comment_ctime":1575217711,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1575217711","product_id":100039001,"comment_content":"需求分析，一步步地找到合理的技术方案。 <br><br>1、给调用方分配一个：渠道码对应一个专属的x位的密钥（一般32位）<br>2、然后约定加密的字段。<br>3、调用方加密， 服务端解密，比较结果-放行or拒绝。","like_count":0}]}