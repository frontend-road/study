{"id":634330,"title":"11ï½œæ¡ˆä¾‹æ¼”ç¤ºï¼šå¦‚ä½•å°†è®¾è®¡æœ€ç»ˆè½åœ°åˆ°ä»£ç ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é»„ä¿Šå½¬ã€‚</p><p>ä¸ŠèŠ‚è¯¾æˆ‘ä»¬å­¦ä¹ äº†ç»„ä»¶åŒ–æ¶æ„é‡æ„çš„5ä¸ªæ­¥éª¤ï¼Œè¿™èŠ‚è¯¾æˆ‘ä»¬å°†æŒ‰ç…§è¿™ä¸ªæ–¹æ³•æ”¹é€ Sharingé¡¹ç›®ã€‚åœ¨ç¬¬7èŠ‚è¯¾ä¸­æˆ‘ä»¬å·²ç»æŒ‰ç…§æœªæ¥çš„æ¶æ„è®¾è®¡ï¼Œé‡æ–°è®¾è®¡äº†ä»£ç çš„åŒ…ç»“æ„<strong>ï¼Œè¿™èŠ‚è¯¾æˆ‘ä»¬è¦å°†å„ä¸ªç»„ä»¶æ‹†åˆ†åˆ°ç‹¬ç«‹çš„æ¨¡å—å·¥ç¨‹ä¸­ï¼Œæœ€ç»ˆå°†æ¶æ„è®¾è®¡è½åœ°åˆ°ä»£ç ä¸­ã€‚</strong></p><p>ç»„ä»¶åŒ–æ¶æ„é‡æ„5ä¸ªå…³é”®çš„æ­¥éª¤åˆ†åˆ«æ˜¯è®¾è®¡ã€å®ˆæŠ¤ã€è§£è€¦ã€ç§»åŠ¨ã€éªŒæ”¶ã€‚å…¶ä¸­è®¾è®¡åŠå®ˆæŠ¤é€šå¸¸é’ˆå¯¹çš„æ˜¯æ•´ä¸ªç³»ç»Ÿï¼Œè§£è€¦ã€ç§»åŠ¨åŠéªŒæ”¶åˆ™æ˜¯é’ˆå¯¹ç»„ä»¶æ¥è¿›è¡Œã€‚</p><p>å‰é¢è®¾è®¡é˜¶æ®µçš„å·¥ä½œå·²ç»å®Œæˆï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥å®Œæˆå®ˆæŠ¤çš„æ­¥éª¤ï¼Œä¸ºSharingé¡¹ç›®è¡¥å……åŸºæœ¬çš„åŠŸèƒ½è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä½œä¸ºé‡æ„çš„å®‰å…¨ç½‘ã€‚</p><h2>è¡¥å……è‡ªåŠ¨åŒ–æµ‹è¯•</h2><p>è¡¥å……è‡ªåŠ¨åŒ–æµ‹è¯•è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§ç”¨æˆ·çš„æ ¸å¿ƒä½¿ç”¨åœºæ™¯æ¥è¦†ç›–ã€‚ä»¥Sharingé¡¹ç›®ä¸ºä¾‹ï¼Œç”¨æˆ·çš„ä¸»è¦æ“ä½œä¸ºç™»å½•ç³»ç»Ÿï¼Œç„¶åæŸ¥çœ‹æ¶ˆæ¯ã€æ–‡ä»¶ä»¥åŠä¸ªäººè´¦æˆ·çš„ä¿¡æ¯ã€‚</p><p>æˆ‘ä»¬å°†è¿™äº›ä¸»è¦çš„åœºæ™¯æ¢³ç†æˆ4ä¸ªUIçš„å¤§å‹æµ‹è¯•ï¼Œä½œä¸ºåŸºæœ¬çš„å†’çƒŸæµ‹è¯•ã€‚åé¢æ˜¯4ä¸ªç”¨ä¾‹ã€‚</p><p>1.ç”¨æˆ·æ‰“å¼€åº”ç”¨ï¼Œè¾“å…¥æ­£ç¡®çš„è´¦æˆ·å¯†ç ç™»å½•æˆåŠŸã€‚<br>\n2.ç”¨æˆ·è¿›å…¥ä¸»é¡µé¢ï¼Œåˆ‡æ¢è‡³åˆ°æ¶ˆæ¯é¡µé¢ï¼Œèƒ½å¤Ÿæ­£å¸¸æ˜¾ç¤ºæ¶ˆæ¯åˆ—è¡¨ä¿¡æ¯ã€‚<br>\n3.ç”¨æˆ·è¿›å…¥ä¸»é¡µé¢ï¼Œåˆ‡æ¢åˆ°æ–‡ä»¶é¡µé¢ï¼Œèƒ½å¤Ÿæ­£å¸¸æ˜¾ç¤ºæ–‡ä»¶åˆ—è¡¨ä¿¡æ¯ã€‚<br>\n4.ç”¨æˆ·è¿›å…¥ä¸»é¡µé¢ï¼Œåˆ‡æ¢åˆ°è´¦æˆ·é¡µé¢ï¼Œèƒ½å¤Ÿæ­£å¸¸æ˜¾ç¤ºç™»å½•çš„ä¸ªäººä¿¡æ¯ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è¿™4ä¸ªæ ¸å¿ƒçš„ç”¨ä¾‹å˜æˆè‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ã€‚</p><!-- [[[read_end]]] --><pre><code class=\"language-plain\">@Test\npublic void show_login_success_when_input_correct_username_and_password() {\n    ActivityScenario.launch(LoginActivity.class);\n    onView(withId(R.id.username)).perform(typeText(\"123@163.com\"));\n    onView(withId(R.id.password)).perform(typeText(\"123456\"));\n    Intents.init();\n    onView(withId(R.id.login)).perform(click());\n    intended(allOf(\n            toPackage(\"com.jkb.junbin.sharing\"),\n            hasComponent(hasClassName(MainActivity.class.getName()))));\n}\n@Test\npublic void show_message_ui_when_click_tab_messsage() {\n    //given\n    ActivityScenario&lt;MainActivity&gt; scenario = ActivityScenario.launch(MainActivity.class);\n    scenario.onActivity(activity -&gt; {\n        //when\n        onView(withText(\"æ¶ˆæ¯\")).perform(click());\n        //then\n        onView(withText(\"å¼ ä¸‰å…±äº«æ–‡ä»¶åˆ°æ¶ˆæ¯ä¸­...\")).check(isVisible());\n        onView(withText(\"1.pdf\")).check(isVisible());\n        onView(withText(\"2021-03-17 14:47:55\")).check(isVisible());\n        onView(withText(\"æå››å…±äº«è§†é¢‘åˆ°æ¶ˆæ¯ä¸­...\")).check(isVisible());\n        onView(withText(\"2.pdf\")).check(isVisible());\n        onView(withText(\"2021-03-17 14:48:08\")).check(isVisible());\n    });\n}\n@Test\npublic void show_show_file_ui_when_click_tab_file() {\n    //given\n    ActivityScenario&lt;MainActivity&gt; scenario = ActivityScenario.launch(MainActivity.class);\n    scenario.onActivity(activity -&gt; {\n        //when\n        onView(withText(\"æ–‡ä»¶\")).perform(click());\n        //then\n        onView(withText(\"Androidé—ç•™ç³»ç»Ÿé‡æ„.pdf\")).check(isVisible());\n        onView(withText(\"100.00K\")).check(isVisible());\n        onView(withText(\"ç ”å‘é‚£äº›äº‹ç¬¬ä¸€å­£.mp4\")).check(isVisible());\n        onView(withText(\"9.67K\")).check(isVisible());\n    });\n}\n@Test\npublic void show_account_ui_when_click_tab_account() {\n    //given\n    ActivityScenario&lt;MainActivity&gt; scenario = ActivityScenario.launch(MainActivity.class);\n    scenario.onActivity(activity -&gt; {\n        //when\n        onView(withText(\"ä¸ªäºº\")).perform(click());\n        //then\n        onView(withText(\"test\")).check(isVisible());\n    });\n}\n</code></pre><p>è¯¦ç»†çš„ç”¨ä¾‹è®¾è®¡åŠå†™æ³•ï¼Œä½ å¯ä»¥å‚è€ƒ<a href=\"https://time.geekbang.org/column/article/628728\">ç¬¬2èŠ‚è¯¾</a>å’Œ<a href=\"https://time.geekbang.org/column/article/629322\">ç¬¬3èŠ‚è¯¾</a>é‡Œç¼–å†™è‡ªåŠ¨åŒ–æµ‹è¯•çš„æ–¹æ³•ã€‚</p><p>ç”¨ä¾‹çš„æ‰§è¡Œç»“æœæ˜¯åé¢è¿™æ ·ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/78/22/78ac0ced65a3316b2ca302fa2560ff22.jpg?wh=2779x1579\" alt=\"\"></p><p>ä»æŠ¥å‘Šçš„æ‰§è¡Œå¯ä»¥çœ‹å‡ºï¼Œä¸€è½®åŸºæœ¬çš„å†’çƒŸæµ‹è¯•æ‰§è¡Œæ—¶é—´åœ¨10så·¦å³ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é‡æ„çš„è¿‡ç¨‹ä¸­ï¼Œé¢‘ç¹åœ°è¿è¡Œè¿™äº›æµ‹è¯•å¾—åˆ°åé¦ˆã€‚ä¸€æ—¦å‘ç°ä»£ç ä¿®æ”¹ç ´æ¢äº†åŸæœ‰çš„é€»è¾‘ï¼Œå°±å¯ä»¥é©¬ä¸Šä¿®å¤ã€‚</p><p>åœ¨è¦†ç›–å®ˆæŠ¤æµ‹è¯•è¿™ä¸€æ­¥ï¼Œç†è®ºä¸Šæ¥è¯´è¦†ç›–è¶Šå¤šåœºæ™¯ï¼Œé‚£ä¹ˆå®ˆæŠ¤çš„è´¨é‡å°±è¶Šé«˜ã€‚ä½†æ˜¯è¿™æ ·åšå¸¦æ¥çš„æˆæœ¬ä¹Ÿä¼šæé«˜ï¼Œæ‰€ä»¥å»ºè®®åœ¨è¿™ä¸€æ­¥<strong>è‡³å°‘è¦†ç›–ç”¨æˆ·æ ¸å¿ƒçš„ä½¿ç”¨åœºæ™¯åŠæ“ä½œè·¯å¾„</strong>ã€‚</p><p>æœ‰äº†åŸºæœ¬çš„å†’çƒŸå®ˆæŠ¤æµ‹è¯•ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥å¼€å§‹åŠ¨æ‰‹è§£è€¦äº†ã€‚æˆ‘ä»¬å†æ¥å›å¿†ä¸€ä¸‹ï¼Œç¬¬7èŠ‚è¯¾æœ€åæ€»ç»“çš„Sharingå¼‚å¸¸ä¾èµ–é—®é¢˜æ¸…å•åˆ—è¡¨ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ba/af/ba1a41fd3432a0f5beef0e00cd10eaaf.jpg?wh=3500x1888\" alt=\"\"></p><p>è¿™ä¹ˆå¤šç»„ä»¶ï¼Œæˆ‘ä»¬åº”è¯¥å…ˆä»å“ªäº›ç»„ä»¶å…¥æ‰‹å‘¢ï¼Ÿ</p><p><strong>æˆ‘çš„å»ºè®®æ˜¯æŒ‰ä»ä¸‹å¾€ä¸Šçš„ä¼˜å…ˆçº§å¼€å§‹è§£è€¦ï¼Œå› ä¸ºä¸Šå±‚çš„ç»„ä»¶ä¾èµ–ä¸‹å±‚çš„ç»„ä»¶ï¼Œæ‰€ä»¥å¿…é¡»å…ˆå°†ä¸‹å±‚ç»„ä»¶ç‹¬ç«‹å‡ºæ¥ã€‚</strong></p><h2>æ—¥å¿—ç»„ä»¶è§£è€¦</h2><p>éµå¾ªä»ä¸‹å¾€ä¸Šè§£è€¦çš„åŸåˆ™ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æ—¥å¿—ç»„ä»¶çš„è§£è€¦ã€‚</p><p>åé¢çš„æˆªå›¾æ˜¯æ ¹æ®ä¾èµ–åˆ†ææ‰«æåçš„ç»“æœã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ec/ea/eca1b674b579a4a3866e8ebd3903e0ea.jpg?wh=3056x1500\" alt=\"\"></p><p>ä»å›¾é‡Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œç›®å‰<strong>æ—¥å¿—ç»„ä»¶çš„ä¸»è¦é—®é¢˜æ˜¯ä¾èµ–äº†è´¦æˆ·ç»„ä»¶è´¦æˆ·ä¿¡æ¯</strong>ã€‚LogUtilsç±»ä¾èµ–äº†AccountControllerç±»ä¸­çš„usernameå±æ€§ã€‚</p><p>é’ˆå¯¹è¿™ä¸ªå¼‚å¸¸çš„ä¾èµ–ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨æå–å‚æ•°çš„æ–¹å¼æ¥è§£è€¦ï¼Œè®©æ—¥å¿—ç»„ä»¶åªä¾èµ–å­—ç¬¦ä¸²ç±»å‹çš„usernameï¼Œå…·ä½“çš„å®‰å…¨é‡æ„æ˜¯åé¢è¿™æ ·ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f6/96/f634d1ca8012dde5e4cacfffeee3df96.gif?wh=1352x688\" alt=\"å›¾ç‰‡\"></p><p>è§£è€¦å®Œæˆä»¥åï¼Œ<strong>æˆ‘ä»¬éœ€è¦é‡æ–°è¿è¡Œä¸€ä¸‹ä¾èµ–åˆ†æå·¥å…·ç¡®è®¤ç¬¦åˆæ¶æ„çº¦æŸè§„åˆ™ï¼Œç„¶åå°±å¯ä»¥ç§»åŠ¨æ–‡ä»¶äº†</strong>ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰æ–°å»ºå¯¹åº”çš„æ¨¡å—ï¼Œåˆ™éœ€è¦å…ˆå»ºç«‹ä¸€ä¸ªæ–°çš„æ¨¡å—ã€‚</p><p>å»ºç«‹å®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦åœ¨gradleçš„é…ç½®æ–‡ä»¶ä¸­åŠ å…¥æ¨¡å—çš„ä¾èµ–ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/65/b7/653676657a2a57a6ef2f915ba218b2b7.jpg?wh=3056x1871\" alt=\"\"></p><p>æ¥ä¸‹æ¥ï¼Œå°±å¯ä»¥ä½¿ç”¨ModularizeåŠŸèƒ½ç§»åŠ¨æ–‡ä»¶äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/58/b7/581b62439dc3edc3fca25309273582b7.gif?wh=1364x726\" alt=\"å›¾ç‰‡\"></p><p>ç§»åŠ¨å®Œæˆåï¼Œæœ€åä¸€æ­¥å°±æ˜¯éªŒæ”¶é˜¶æ®µï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯ç¼–è¯‘é€šè¿‡ã€è‡ªåŠ¨åŒ–å®ˆæŠ¤æµ‹è¯•è¿è¡Œé€šè¿‡ã€‚</p><p>åé¢æˆªå›¾è¡¨ç¤ºæŠ€æœ¯ç»„ä»¶æ¶æ„å®ˆæŠ¤ç”¨ä¾‹æ‰§è¡Œé€šè¿‡ï¼ŒåŸºæœ¬çš„å†’çƒŸæµ‹è¯•åŠŸèƒ½éªŒæ”¶é€šè¿‡ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/1e/60/1e173b03b3fe3c8e8f732f80edfca860.jpg?wh=2900x1792\" alt=\"\"><br>\n<img src=\"https://static001.geekbang.org/resource/image/7e/1e/7ed35eef07ed8ed945e9b5b0c9faba1e.jpg?wh=2900x1742\" alt=\"\"></p><p>å› ä¸ºå„ä¸ªç»„ä»¶çš„ç§»åŠ¨å’ŒéªŒæ”¶æ­¥éª¤å’Œè¿™é‡Œè®²çš„æ—¥å¿—ç»„ä»¶ç±»ä¼¼ï¼Œå·®å¼‚ä¸»è¦åœ¨åˆ†æè§£è€¦å’Œè§£é™¤ä¾èµ–ä¸Šï¼Œæ‰€ä»¥ä¹‹åå­¦ä¹ å¦‚ä½•è§£è€¦å…¶ä»–ç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬ä¸»è¦æ¼”ç¤ºè§£è€¦è¿‡ç¨‹ï¼Œå¯¹ç§»åŠ¨å’ŒéªŒæ”¶æ­¥éª¤å°±ä¸å†é‡å¤è®²è§£äº†ã€‚</p><h2>åŸºåº§ç»„ä»¶è§£è€¦</h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹åŸºåº§ç»„ä»¶çš„è§£è€¦ï¼Œæˆ‘ä»¬åŒæ ·ç»“åˆä¾èµ–åˆ†ææ‰«æç»“æœæˆªå›¾æ¥åˆ†æã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/91/43/91acc705c5c1ff015e868858a7054943.jpg?wh=3236x1658\" alt=\"\"></p><p>æ ¹æ®ä¾èµ–åˆ†ææ‰«æç»“æœå¯ä»¥çœ‹å‡ºï¼Œç›®å‰<strong>åŸºåº§ç»„ä»¶ä¸»è¦ä¾èµ–äº†å„ä¸ªä¸šåŠ¡ç»„ä»¶çš„é¡µé¢ä»¥åŠç›¸å…³çš„ä¸€äº›å‘å¸ƒåŠŸèƒ½</strong>ã€‚MainActivityä¾èµ–äº†Message Fragmentã€FileFragmentä»¥åŠAccountFragmentã€‚å¦å¤–ä¹Ÿä¾èµ–äº†MessageFragmentä¸­çš„uploadDynamicæ–¹æ³•ä»¥åŠFileFragmnetä¸­çš„uploadFileæ–¹æ³•ã€‚</p><p>é’ˆå¯¹é¡µé¢çš„ä¾èµ–ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è·¯ç”±çš„æ–¹å¼æ¥è§£å¼€è€¦åˆã€‚è¿™é‡Œæˆ‘å…ˆç”¨åå°„çš„å½¢å¼æ¥å¤„ç†ï¼Œå…·ä½“ä½¿ç”¨è·¯ç”±æ¡†æ¶çš„æ–¹å¼ï¼Œä¸‹èŠ‚è¯¾æˆ‘ä¼šä¸“é—¨è®²è§£ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/23/13/239bcbe3b239f2bffb455c0bf9351113.jpg?wh=3020x692\" alt=\"\"></p><p>å¯¹äºåŸºåº§ç»„ä»¶ä¾èµ–äº†ç‰¹æ€§ç»„ä»¶çš„å…·ä½“è¡Œä¸ºï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨å€’ç½®çš„æ–¹å¼ï¼Œè®©ç‰¹æ€§ç»„ä»¶å°†è¡Œä¸ºæ³¨å…¥åˆ°åŸºåº§ç»„ä»¶ï¼Œè¿™æ ·æ‰ç¬¦åˆæ¶æ„çš„çº¦æŸè§„åˆ™ã€‚</p><p>æˆ‘ä»¬ä»¥MainActivityè°ƒç”¨MessageFragmentçš„uploadDynamicæ–¹æ³•ä¸ºä¾‹ï¼Œå¸¦ä½ åŠ æ·±ç†è§£ã€‚</p><p>é¦–å…ˆå®šä¹‰è§¦å‘æ¶ˆæ¯æ¨¡å—ç‚¹å‡»ä¸Šä¼ çš„æ¥å£ã€‚</p><pre><code class=\"language-plain\">public interface IMessageAddClickListener {\n    public void onClick();\n}\n</code></pre><p>æ¥ç€æˆ‘ä»¬å°†åŸæœ¬ä¾èµ–uploadDynamicçš„åœ°æ–¹ï¼Œè°ƒæ•´ä¸ºè°ƒç”¨IMessageAddClickListeneræ¥å£ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/7b/36/7b31f92b7123d9bc85da10078a846b36.jpg?wh=2816x692\" alt=\"\"></p><p>æœ€ååœ¨æ¶ˆæ¯æ¨¡å—ä¸­å°†å…·ä½“çš„å®ç°æ³¨å…¥åˆ°åŸºåº§ç»„ä»¶ä¸­ã€‚</p><pre><code class=\"language-plain\">//æ¶ˆæ¯é¡µé¢\n((MainActivity) getActivity()).setMessageAddClickListener(() -&gt; uploadDynamic());\n</code></pre><p>è§£è€¦å®Œæˆåï¼Œæˆ‘ä»¬é‡æ–°ä½¿ç”¨å·¥å…·åšæ£€æŸ¥ï¼Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒåŸºåº§ç»„ä»¶ä¾èµ–ç‰¹æ€§ç»„ä»¶çš„ç”¨ä¾‹å·²ç»è¿è¡Œé€šè¿‡ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/79/a0/79b3e0114e2cfb77ced355b98d9db6a0.jpg?wh=2900x1840\" alt=\"\"></p><h2>æ–‡ä»¶ç»„ä»¶è§£è€¦</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹æ–‡ä»¶ç»„ä»¶çš„è€¦åˆæƒ…å†µã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/bf/ff/bf0e041ebfcafd16bc4556ae775238ff.jpg?wh=3056x1689\" alt=\"\"></p><p>åŒæ ·ï¼Œæ ¹æ®ä¾èµ–åˆ†ææ‰«æç»“æœå¯ä»¥çœ‹å‡ºï¼Œç›®å‰<strong>æ–‡ä»¶ç»„ä»¶çš„ä¸Šä¼ åŠä¸‹è½½åŠŸèƒ½ä¸»è¦ä¾èµ–äº†è´¦æˆ·ç»„ä»¶çš„ä¸ªäººä¿¡æ¯</strong>ã€‚FileControllerç±»ä¾èµ–äº†AccountControllerç±»ä¸­çš„usernameã€isLoginå±æ€§ï¼ŒFileFragmentç±»åŒæ ·ä¹Ÿä¾èµ–äº†AccountControllerç±»ä¸­çš„usernameå±æ€§ã€‚</p><p>å‰é¢è®²æ¶æ„è®¾è®¡çš„æ—¶å€™ï¼ˆå¯ä»¥å›é¡¾<a href=\"https://time.geekbang.org/column/article/630925\">ç¬¬5èŠ‚è¯¾</a>çš„ç»„ä»¶åˆ’åˆ†ï¼‰ï¼Œæˆ‘ä»¬æåˆ°æ–‡ä»¶çš„ä¼ è¾“åŠŸèƒ½ä¼šè¢«å¤šä¸ªç‰¹æ€§ç»„ä»¶ä½¿ç”¨ï¼Œæ‰€ä»¥è¿™é‡Œé™¤äº†è¦è§£é™¤æ–‡ä»¶ç»„ä»¶å’Œè´¦æˆ·æ¨¡å—çš„ä¾èµ–ï¼Œè¿˜è¦æŠŠæ–‡ä»¶æ¨¡å—çš„ä¸Šä¼ ä¸‹è½½åŠŸèƒ½ç‹¬ç«‹æˆä¸€ä¸ªå•ç‹¬çš„åŠŸèƒ½ç»„ä»¶ã€‚</p><p>è¿™é‡Œé‡æ„çš„æ€è·¯æ˜¯å°†ä¸Šä¼ ä¸‹è½½ç›¸å…³çš„ä»£ç æå–åˆ°ç‹¬ç«‹çš„FileTransferç±»ä¸­ï¼Œç„¶åé€šè¿‡æå–å‚æ•°çš„æ–¹å¼ä¸è´¦æˆ·æ¨¡å—è§£è€¦ï¼Œæœ€åç§»åŠ¨åˆ°ç‹¬ç«‹çš„åŠŸèƒ½ç»„ä»¶ä¸­ã€‚</p><p>å…·ä½“çš„é‡æ„è¿‡ç¨‹æ˜¯åé¢è¿™æ ·ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/28/84/2800cb70774f0bd2b866c1d951fe3784.gif?wh=1364x726\" alt=\"å›¾ç‰‡\"></p><p>æå–æ–‡ä»¶ä¼ è¾“ç»„ä»¶åï¼Œæˆ‘ä»¬é‡æ–°æ¥çœ‹æ–‡ä»¶æ¨¡å—çš„ä¾èµ–æƒ…å†µã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç›®å‰ä¸»è¦æ˜¯FileControllerä¾èµ–äº†è´¦æˆ·æ¨¡å—çš„isLoginç™»å½•çŠ¶æ€ï¼ŒFileFragmnetä¾èµ–äº†è´¦æˆ·æ¨¡å—çš„usenameä¿¡æ¯ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/2c/5e/2c4b6a0b5046734097e541cd6f6e495e.jpg?wh=2930x747\" alt=\"\"></p><p>å¯¹äºç‰¹æ€§ç»„ä»¶ä¹‹é—´çš„è€¦åˆï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨æå–æ¥å£çš„æ–¹å¼æ¥è§£è€¦ï¼Œå…·ä½“çš„æ“ä½œæ˜¯åé¢è¿™æ ·ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/b0/31/b0712dfd22dc93f48f72ba03bdb64631.gif?wh=1364x726\" alt=\"å›¾ç‰‡\"></p><p>æ³¨æ„é‡æ„å®Œæˆåï¼Œæ¥å£çš„æ³¨å…¥åº”è¯¥æ˜¯ä½¿ç”¨æ³¨å…¥æ¡†æ¶æ¥å®ç°ï¼Œè¿™é‡Œæˆ‘ä»¬åŒæ ·å…ˆé‡‡ç”¨åå°„çš„æœºåˆ¶æ¥å®Œæˆå®ç°çš„æ³¨å…¥ï¼Œä¸‹èŠ‚è¯¾å†å…·ä½“ä»‹ç»æ€ä¹ˆä½¿ç”¨æ³¨å…¥æ¡†æ¶ã€‚</p><p>è§£è€¦å®Œæˆåï¼Œæˆ‘ä»¬ç»§ç»­ä½¿ç”¨å·¥å…·åšæ£€æŸ¥ï¼Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ–‡ä»¶ç‰¹æ€§ç»„ä»¶ä¸èƒ½ä¾èµ–è´¦æˆ·ç‰¹æ€§ç»„ä»¶çš„ç”¨ä¾‹å·²ç»è¿è¡Œé€šè¿‡ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/cc/08/cc3e023be944cd2ee328c9a06f22a408.jpg?wh=2900x1840\" alt=\"\"></p><h2>æ¶ˆæ¯ç»„ä»¶è§£è€¦</h2><p>æœ€åï¼Œæˆ‘ä»¬æ¥çœ‹æ¶ˆæ¯ç»„ä»¶çš„è€¦åˆåˆ†æã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e2/3d/e24186f580efdd2a0a6776e8bb5bae3d.jpg?wh=2818x1037\" alt=\"\"></p><p>é€šè¿‡ä¸Šå›¾çš„ä¾èµ–åˆ†æç»“æœå¯ä»¥çœ‹å‡ºï¼Œæ¶ˆæ¯æ¨¡å—ä¸»è¦ä¾èµ–æ–‡ä»¶æ¨¡å—çš„ä¸Šä¼ ä¸‹è½½åŠŸèƒ½ï¼Œå¦å¤–ä¸æ–‡ä»¶æ¨¡å—ç±»ä¼¼ï¼ŒåŒæ ·ä¾èµ–äº†è´¦æˆ·æ¨¡å—çš„è´¦æˆ·ä¿¡æ¯ã€‚</p><p>é’ˆå¯¹äºä¸æ–‡ä»¶æ¨¡å—çš„è€¦åˆï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨æ–‡ä»¶ä¼ è¾“æ¨¡å—åŠŸèƒ½ç»„ä»¶è§£è€¦ã€‚å¯¹äºè´¦æˆ·æ¨¡å—çš„è€¦åˆå¯ä»¥å‚è€ƒæ–‡ä»¶ç»„ä»¶è§£è€¦çš„æ–¹å¼ï¼Œä½¿ç”¨IAccountStateæ¥å£æ¥è§£è€¦ï¼Œæ“ä½œå’Œå‰é¢å‡ ä¸ªç»„ä»¶ç±»ä¼¼ï¼Œè¿™é‡Œå°±ä¸å†é‡å¤æ¼”ç¤ºäº†ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œéšç€è§£è€¦å·¥ä½œçš„å®Œæˆï¼Œæœ€ç»ˆæ‰€æœ‰çš„å®ˆæŠ¤ç”¨ä¾‹å…¨éƒ¨æ‰§è¡Œé€šè¿‡ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/2a/a5/2aec83efeb5c726726805c36b34cdfa5.jpg?wh=2900x1840\" alt=\"\"></p><h2>æ€»ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬ä»¥Sharingé¡¹ç›®ä¸ºä¾‹ï¼Œç»“åˆä¸ŠèŠ‚è¯¾ç»„ä»¶åŒ–æ¶æ„é‡æ„çš„5ä¸ªæ­¥éª¤ï¼Œæœ€ç»ˆå°†SharingæŒ‰æ–°çš„æ¶æ„è®¾è®¡è½åœ°åˆ°ä»£ç ä¸­ã€‚</p><p>å› ä¸ºä¸Šå±‚ç»„ä»¶ä¾èµ–ä¸‹å±‚ç»„ä»¶ï¼Œæ‰€ä»¥åœ¨é‡æ„çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æŒ‰æ¶æ„ä»ä¸‹å±‚åˆ°ä¸Šå±‚çš„é¡ºåºï¼Œä¾æ¬¡ç»“è€¦ç»„ä»¶è§£è€¦ã€‚æœ€ç»ˆï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æ¶æ„è®¾è®¡å›¾åœ¨ä»£ç ä¸­çš„è½åœ°æƒ…å†µã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/41/4e/413149178eb8704f528a2abb5fb03d4e.jpg?wh=4135x2220\" alt=\"\"></p><p>è‡³æ­¤ï¼Œæˆ‘ä»¬ä¹Ÿæ¥æ€»ç»“ä¸€ä¸‹ç»„ä»¶åŒ–æ¶æ„é‡æ„å‰åçš„å¯¹æ¯”ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/89/c9/89f5ebyy0a456d8e51ab4afdfe289cc9.jpg?wh=3600x1629\" alt=\"\"></p><p>é€šè¿‡å¯¹æ¯”ï¼Œæˆ‘ä»¬å‘ç°é‡æ„åçš„Sharingé¡¹ç›®ï¼Œæ¶æ„è®¾è®¡æ›´åŠ æ¸…æ™°ï¼Œå¹¶ä¸”å› ä¸ºåŠ äº†è‡ªåŠ¨åŒ–çš„æ‰‹æ®µå®ˆæŠ¤æ¶æ„ï¼Œå¯ä»¥æœ‰æ•ˆåœ°é¿å…æ¶æ„è…åŒ–ã€‚åŒæ—¶ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•çš„åŠ å…¥ä¹Ÿèƒ½å¸®åŠ©æˆ‘ä»¬æ›´æ—©å‘ç°é—®é¢˜ï¼Œå®ç°æµ‹è¯•çš„å·¦ç§»ã€‚</p><p>åœ¨è¿™èŠ‚è¯¾ä¸­ï¼ŒåŸºåº§ç»„ä»¶è§£è€¦æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†åå°„æ¥å®ç°é¡µé¢ä¹‹é—´çš„ä¾èµ–è§£è€¦ã€‚åœ¨æ–‡ä»¶ç»„ä»¶è§£è€¦åˆæ—¶ï¼ŒåŒæ ·ä½¿ç”¨äº†åå°„æ¥è§£å†³æ¥å£å®ç°æ³¨å…¥çš„é—®é¢˜ã€‚ç»†å¿ƒçš„ä½ åº”è¯¥ä¹Ÿå‘ç°äº†ï¼Œä½¿ç”¨åå°„è™½ç„¶èƒ½è¾¾åˆ°è§£è€¦çš„ç›®çš„ï¼Œä½†æ˜¯ä»£ç ä¸­ä¹Ÿå­˜åœ¨äº†å¤§é‡çš„é‡å¤ä»£ç ã€‚</p><p>ä¸‹èŠ‚è¯¾ï¼Œæˆ‘ä¼šå¸¦ä½ å­¦ä¹ è·¯ç”±åŠæ³¨å…¥æ¡†æ¶ï¼Œå¹¶å°†å…¶è¿ç”¨åˆ°Sharingçš„é¡¹ç›®ä¸­ï¼Œæ•¬è¯·æœŸå¾…ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æ„Ÿè°¢ä½ å­¦å®Œäº†ä»Šå¤©çš„å†…å®¹ï¼Œä»Šå¤©çš„æ€è€ƒé¢˜æ˜¯è¿™æ ·çš„ï¼šä½ è§‰å¾—ä»£ç ç»“æ„ç›´æ¥åæ˜ æ¶æ„è®¾è®¡ï¼Œå¸¦æ¥çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºä¸æˆ‘äº¤æµè®¨è®ºï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠå®ƒåˆ†äº«ç»™ä½ çš„åŒäº‹æˆ–æœ‹å‹ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥é«˜æ•ˆã€é«˜è´¨é‡äº¤ä»˜è½¯ä»¶ï¼</p>","comments":[{"had_liked":false,"id":369913,"user_name":"Geek_a8c1a2","can_delete":false,"product_type":"c1","uid":3202596,"ip_address":"æ–°åŠ å¡","ucode":"783E563546D7EE","user_header":"","comment_is_top":false,"comment_ctime":1678119011,"is_pvip":false,"replies":[{"id":134903,"content":"Hi,æ„Ÿè°¢æå‡ºå»ºè®®ğŸ¤","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1179206,"ctime":1678325845,"ip_address":"å¹¿ä¸œ","comment_id":369913,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100525001,"comment_content":"é™¤äº†ä¾èµ–æ³¨å…¥ï¼Œèƒ½å¦ä¹Ÿè®²è®²SPIç”¨äºè§£è€¦çš„ä½œç”¨","like_count":1,"discussions":[{"author":{"id":1179206,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/46/033fccb2.jpg","nickname":"é»„ä¿Šå½¬","note":"","ucode":"0DBE0CE4E7CFC9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":608195,"discussion_content":"Hi,æ„Ÿè°¢æå‡ºå»ºè®®ğŸ¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678325846,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":369905,"user_name":"peter","can_delete":false,"product_type":"c1","uid":1058183,"ip_address":"åŒ—äº¬","ucode":"261C3FC001DE2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg","comment_is_top":false,"comment_ctime":1678113320,"is_pvip":false,"replies":[{"id":134865,"content":"Hiï¼Œpeterã€‚\nå†’çƒŸæµ‹è¯•æ˜¯ä¸€ç§åŠŸèƒ½æµ‹è¯•ï¼Œç›®çš„æ˜¯å¯¹ä¸€ä¸ªæ–°ç¼–è¯‘éœ€è¦æ­£å¼æµ‹è¯•çš„è½¯ä»¶ç‰ˆæœ¬,ç¡®è®¤è½¯ä»¶çš„åŸºæœ¬åŠŸèƒ½æ˜¯æ­£å¸¸çš„ï¼Œå¯ä»¥è¿›è¡Œåç»­çš„æµ‹è¯•å·¥ä½œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1179206,"ctime":1678188213,"ip_address":"å¹¿ä¸œ","comment_id":369905,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100525001,"comment_content":"è¯·é—®ï¼šUIæµ‹è¯•ä¸ºä»€ä¹ˆæ˜¯å†’çƒŸæµ‹è¯•ï¼Ÿ\nå†’çƒŸæµ‹è¯•æ„Ÿè§‰æ˜¯å‹åŠ›æ¯”è¾ƒå¤§çš„æµ‹è¯•ã€‚UIæµ‹è¯•åªæ˜¯åŸºæœ¬çš„åŠŸèƒ½æµ‹è¯•ï¼Œä¼¼ä¹ä¸åƒæ˜¯å†’çƒŸæµ‹è¯•å•Šã€‚","like_count":0,"discussions":[{"author":{"id":1179206,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/46/033fccb2.jpg","nickname":"é»„ä¿Šå½¬","note":"","ucode":"0DBE0CE4E7CFC9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":607917,"discussion_content":"Hiï¼Œpeterã€‚\nå†’çƒŸæµ‹è¯•æ˜¯ä¸€ç§åŠŸèƒ½æµ‹è¯•ï¼Œç›®çš„æ˜¯å¯¹ä¸€ä¸ªæ–°ç¼–è¯‘éœ€è¦æ­£å¼æµ‹è¯•çš„è½¯ä»¶ç‰ˆæœ¬,ç¡®è®¤è½¯ä»¶çš„åŸºæœ¬åŠŸèƒ½æ˜¯æ­£å¸¸çš„ï¼Œå¯ä»¥è¿›è¡Œåç»­çš„æµ‹è¯•å·¥ä½œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678188213,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1739140,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/89/84/52bf6799.jpg","nickname":"å«æˆ‘æ€ªå…½å¥½äº†","note":"","ucode":"18B7B95271D53A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":607843,"discussion_content":"æˆ‘è§‰å¾—ï¼Œå†’çƒŸæµ‹è¯•æ˜¯æœ€åŸºæœ¬çš„æ ¸å¿ƒåŠŸèƒ½çš„æµ‹è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678154092,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":389459,"user_name":"ç©¿é´å­çš„å–µå…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1175208,"ip_address":"æ±Ÿè‹","ucode":"D4E0F03F8CDE29","user_header":"https://static001.geekbang.org/account/avatar/00/11/ee/a8/9be86cdc.jpg","comment_is_top":false,"comment_ctime":1712637082,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100525001,"comment_content":"uiæµ‹è¯•ï¼Œæœ‰é€‚ç”¨äºcomposeuiçš„uiæµ‹è¯•æ¡†æ¶å—ï¼Ÿ","like_count":0}]}