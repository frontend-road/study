{"id":272570,"title":"39 | 使用unittest重构测试用例：掌握使用unittest模块的方法和技巧","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/Selenium\">https://gitee.com/geektime-geekbang/Selenium</a></p>","comments":[{"had_liked":false,"id":340751,"user_name":"小阳","can_delete":false,"product_type":"c3","uid":1164246,"ip_address":"","ucode":"9533225C7D7603","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKiawnDHZkUJhnItm30JSBXfkeiaGvibJopuBLXfo8BI8sWGClLh8sOtuB4CkicfyWGMEnG9NpCXW9F3g/132","comment_is_top":false,"comment_ctime":1649118458,"is_pvip":false,"replies":[{"id":134419,"content":"在使用 unittest.TestCase 编写测试用例时，可以通过将测试函数名作为参数传递给 `unittest.defaultTestLoader.loadTestsFromName()` 方法来获取指定的测试函数。而 `unittest.TestSuite()` 则可以将多个测试函数打包成一个测试套件。\n\n因此，如果需要在一个脚本中执行多个测试函数，可以按照如下步骤进行：\n\n1. 定义多个测试函数，并将每个测试函数都打包成一个测试套件；\n2. 将所有测试套件添加到主测试套件中；\n3. 使用 `unittest.TextTestRunner()` 执行主测试套件。\n\n在你提供的代码中，`TestAddArticle` 类和 `TestAdminLogin` 类都继承自 `unittest.TestCase`，因此可以将它们分别打包成测试套件，并添加到主测试套件中。示例如下：\n\n```\nimport unittest\n\nclass TestAddArticle(unittest.TestCase):\n    def test_add_article_ok(self):\n        print(&quot;Test add article OK&quot;)\n\nclass TestAdminLogin(unittest.TestCase):\n    def test_login_ok(self):\n        print(&quot;Test login OK&quot;)\n\nif __name__ == &#39;__main__&#39;:\n    # 将测试函数打包成测试套件\n    suite_article = unittest.TestLoader().loadTestsFromTestCase(TestAddArticle)\n    suite_login = unittest.TestLoader().loadTestsFromTestCase(TestAdminLogin)\n\n    # 创建主测试套件并添加测试套件\n    all_tests = unittest.TestSuite([suite_article, suite_login])\n\n    # 执行主测试套件\n    runner = unittest.TextTestRunner()\n    runner.run(all_tests)\n```\n\n在以上代码中，首先将 `TestAddArticle` 和 `TestAdminLogin` 类中的测试函数打包成测试套件，并将它们添加到主测试套件 `all_tests` 中。然后使用 `unittest.TextTestRunner()` 执行主测试套件即可。\n\n至于 `__init__()` 方法中的 `method` 参数，通常情况下可以使用默认值 `None`，因为 `unittest.TestCase` 中已经定义了测试函数的执行方法。如果需要自定义测试函数的执行方法，可以通过重写 `runTest()` 方法来实现。例如：\n\n```\nclass TestAddArticle(unittest.TestCase):\n    def __init__(self, login):\n        super().__init__()\n        self.login = login\n\n    def runTest(self):\n        self.login()\n        print(&quot;Test add article OK&quot;)\n\nclass TestAdminLogin(unittest.TestCase):\n    def __init__(self):\n        super().__init__()\n\n    def runTest(self):\n        print(&quot;Test login OK&quot;)\n\nif __name__ == &#39;__main__&#39;:\n    login = TestAdminLogin()\n    test_article = TestAddArticle(login)\n    test_article.run()\n```\n\n在以上代码中，`TestAddArticle` 类的 `__init__()` 方法接收一个 `login` 参数，并将其保存在实例属性中。然后重写了 `runTest()` 方法，先执行登录操作，然后再执行添加文章的操作。`TestAdminLogin` 类同理，只是不需要接收参数。最后在 `__main__` 函数中分别创建两个测试类的实例，然后调用 `run()` 方法执行测试函数。","user_name":"作者回复","user_name_real":"编辑","uid":1654315,"ctime":1677056471,"ip_address":"河北","comment_id":340751,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"def __init__(self,method,login):\n        unittest.TestCase.__init__(self,method)\n        self.login = login\nif __name__ == &#39;__main__&#39;:\n    login = TestAdminLogin()\n    login.test_login_ok()\n\n    test_article = TestAddArticle()  提示参数method和login未填，这里的method传什么内容？\n    test_article.test_add_article_ok()","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606281,"discussion_content":"在使用 unittest.TestCase 编写测试用例时，可以通过将测试函数名作为参数传递给 `unittest.defaultTestLoader.loadTestsFromName()` 方法来获取指定的测试函数。而 `unittest.TestSuite()` 则可以将多个测试函数打包成一个测试套件。\n\n因此，如果需要在一个脚本中执行多个测试函数，可以按照如下步骤进行：\n\n1. 定义多个测试函数，并将每个测试函数都打包成一个测试套件；\n2. 将所有测试套件添加到主测试套件中；\n3. 使用 `unittest.TextTestRunner()` 执行主测试套件。\n\n在你提供的代码中，`TestAddArticle` 类和 `TestAdminLogin` 类都继承自 `unittest.TestCase`，因此可以将它们分别打包成测试套件，并添加到主测试套件中。示例如下：\n\n```\nimport unittest\n\nclass TestAddArticle(unittest.TestCase):\n    def test_add_article_ok(self):\n        print(&#34;Test add article OK&#34;)\n\nclass TestAdminLogin(unittest.TestCase):\n    def test_login_ok(self):\n        print(&#34;Test login OK&#34;)\n\nif __name__ == &#39;__main__&#39;:\n    # 将测试函数打包成测试套件\n    suite_article = unittest.TestLoader().loadTestsFromTestCase(TestAddArticle)\n    suite_login = unittest.TestLoader().loadTestsFromTestCase(TestAdminLogin)\n\n    # 创建主测试套件并添加测试套件\n    all_tests = unittest.TestSuite([suite_article, suite_login])\n\n    # 执行主测试套件\n    runner = unittest.TextTestRunner()\n    runner.run(all_tests)\n```\n\n在以上代码中，首先将 `TestAddArticle` 和 `TestAdminLogin` 类中的测试函数打包成测试套件，并将它们添加到主测试套件 `all_tests` 中。然后使用 `unittest.TextTestRunner()` 执行主测试套件即可。\n\n至于 `__init__()` 方法中的 `method` 参数，通常情况下可以使用默认值 `None`，因为 `unittest.TestCase` 中已经定义了测试函数的执行方法。如果需要自定义测试函数的执行方法，可以通过重写 `runTest()` 方法来实现。例如：\n\n```\nclass TestAddArticle(unittest.TestCase):\n    def __init__(self, login):\n        super().__init__()\n        self.login = login\n\n    def runTest(self):\n        self.login()\n        print(&#34;Test add article OK&#34;)\n\nclass TestAdminLogin(unittest.TestCase):\n    def __init__(self):\n        super().__init__()\n\n    def runTest(self):\n        print(&#34;Test login OK&#34;)\n\nif __name__ == &#39;__main__&#39;:\n    login = TestAdminLogin()\n    test_article = TestAddArticle(login)\n    test_article.run()\n```\n\n在以上代码中，`TestAddArticle` 类的 `__init__()` 方法接收一个 `login` 参数，并将其保存在实例属性中。然后重写了 `runTest()` 方法，先执行登录操作，然后再执行添加文章的操作。`TestAdminLogin` 类同理，只是不需要接收参数。最后在 `__main__` 函数中分别创建两个测试类的实例，然后调用 `run()` 方法执行测试函数。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677056471,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"河北","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":335156,"user_name":"yjluo","can_delete":false,"product_type":"c3","uid":2071682,"ip_address":"","ucode":"8C3AD3D2244D24","user_header":"https://static001.geekbang.org/account/avatar/00/1f/9c/82/7e9d406d.jpg","comment_is_top":false,"comment_ctime":1645364705,"is_pvip":false,"replies":[{"id":125487,"content":"对照一下我的视频和源码","user_name":"作者回复","user_name_real":"编辑","uid":1654315,"ctime":1651036731,"ip_address":"","comment_id":335156,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"class LoginTest(unittest.TestCase):\n    @classmethod\n    def setUpClass(cls) -&gt; None:\n        cls.driver=webdriver.Chrome()\n        cls.driver.get(&#39;*****&#39;)\n        cls.driver.maximize_window()\n     def test1(self):\n        pass\n\n    @classmethod\n    def tearDownClass(cls) -&gt; None:\n        cls.driver.qiut()\n\n想问下最后调用tearDownClass()方法，cls.识别不了driver变量，没法关闭浏览器，怎么解决？","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567992,"discussion_content":"对照一下我的视频和源码","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651036731,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311622,"user_name":"ZBQ","can_delete":false,"product_type":"c3","uid":2758074,"ip_address":"","ucode":"9E2D687E4D20FA","user_header":"https://static001.geekbang.org/account/avatar/00/2a/15/ba/433ddf57.jpg","comment_is_top":false,"comment_ctime":1631347003,"is_pvip":false,"replies":[{"id":113810,"content":"都在源码里面","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1632913298,"ip_address":"","comment_id":311622,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"有没有完整的重构代码","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526682,"discussion_content":"都在源码里面","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632913298,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":265353,"user_name":"Geek_88b1a8","can_delete":false,"product_type":"c3","uid":2307175,"ip_address":"","ucode":"60F2827FC1FFAA","user_header":"https://static001.geekbang.org/account/avatar/00/23/34/67/6c0374dc.jpg","comment_is_top":false,"comment_ctime":1606876861,"is_pvip":false,"replies":[{"id":97192,"content":"在初始化方法加参数","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1607852972,"ip_address":"","comment_id":265353,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师，我在用unittest重构这个添加文章但是时候报这错，尝试 了好久都没解决，您可以帮我看一下是什么问题吗？\n报错的信息：    TypeError: __init__() missing 1 required positional argument: &#39;login&#39; \n\n我的调用：\nif __name__ == &#39;__main__&#39;:\n    login = TestAdminLogin()\n    login.test_admin_login_ok()\n\n    testArticle = TestArticle(login)\n    testArticle.test_add_article_ok()","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510898,"discussion_content":"在初始化方法加参数","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607852972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2071682,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/9c/82/7e9d406d.jpg","nickname":"yjluo","note":"","ucode":"8C3AD3D2244D24","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552431,"discussion_content":"同样的问题，解决了吗\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645456849,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2149593,"avatar":"https://static001.geekbang.org/account/avatar/00/20/cc/d9/0d0fe009.jpg","nickname":"大红薯头🍠","note":"","ucode":"5BCD7AC2C7FF6B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536213,"discussion_content":"这个方法你解决了吗\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638716699,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":251735,"user_name":"瓜皮喵宝宝","can_delete":false,"product_type":"c3","uid":1785777,"ip_address":"","ucode":"E6CD4BBFB9BD69","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK3a1ToFjF6geqLW8IIOMyHgvLvicQciaJwx7dryiavl3OVRIH5Dc3uvhYAYhvRzQ8hxPicjC80SEP77Q/132","comment_is_top":false,"comment_ctime":1601815464,"is_pvip":false,"replies":[{"id":92132,"content":"看看测试类 是否继承了unittest的父类 ","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1602157493,"ip_address":"","comment_id":251735,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师，在做unittest重构时，比如test_article.py类中，改写为unittest断言方式，会报错，如：\nself.assertEqual(msg_text, expected)\n执行后AttributeError: &#39;TestArticle&#39; object has no attribute &#39;_type_equality_funcs&#39;\n报错位置就在改写的断言上；\n调整为之前，assert msg.text == expected则执行成功；\n断点调试的时候比较看了下msg_text 和 expected也是一致的。","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506597,"discussion_content":"看看测试类 是否继承了unittest的父类 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602157493,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":246424,"user_name":"西西","can_delete":false,"product_type":"c3","uid":2076788,"ip_address":"","ucode":"2BB5426B086336","user_header":"https://static001.geekbang.org/account/avatar/00/1f/b0/74/03b6b01a.jpg","comment_is_top":false,"comment_ctime":1599319375,"is_pvip":false,"replies":[{"id":90714,"content":"这个就是Python语法跟se没啥关系 如果不是默认参数 是必须要传参的","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1599537647,"ip_address":"","comment_id":246424,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"class TestArticle(unittest.TestCase):\n    def __init__(self, method, login):\n        unittest.TestCase.__init__(self, method)\n        self.login = login\n老师  new TestArtic类的对象时候为什么不需要传method参数，只需要传login参数呢\n","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505138,"discussion_content":"这个就是Python语法跟se没啥关系 如果不是默认参数 是必须要传参的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599537647,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1575475,"avatar":"https://static001.geekbang.org/account/avatar/00/18/0a/33/292a3f4b.jpg","nickname":"从前从前","note":"","ucode":"73ED0B74D9DCB0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":564168,"discussion_content":"def __init__(self, login):\n\t\tsuper().__init__()\n\t\tself.login = login\n\n我这样也是可以的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650174978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241708,"user_name":"Geek_jf52tq","can_delete":false,"product_type":"c3","uid":1350004,"ip_address":"","ucode":"69702DFB599C49","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/V5Q9iapkWRXblWVn7fpnA5l9nAKF023UPDnS7bib8Ylrt91epNicdeJFic0fDH8W4ickO4cdylNN50kYn9pWSDCgHEg/132","comment_is_top":false,"comment_ctime":1597396077,"is_pvip":false,"replies":[{"id":89249,"content":"设置断点 看看driver初始化了吗","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1597417833,"ip_address":"","comment_id":241708,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"if __name__ == &#39;__main__&#39;:\n    login = TestUserLogin()\n    login.test2_user_login_ok()\n\nclass TestUserLogin(unittest.TestCase):\n\n------------------------------------\n    @classmethod\n    def setUpClass(cls) -&gt; None:\n        cls.driver = webdriver.Chrome()\n        cls.driver.get(url)\n        cls.driver.maximize_window()\n\n运行main的时候会报\nAttributeError: &#39;TestUserLogin&#39; object has no attribute &#39;driver&#39;","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503821,"discussion_content":"设置断点 看看driver初始化了吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597417833,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1350004,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/V5Q9iapkWRXblWVn7fpnA5l9nAKF023UPDnS7bib8Ylrt91epNicdeJFic0fDH8W4ickO4cdylNN50kYn9pWSDCgHEg/132","nickname":"Geek_jf52tq","note":"","ucode":"69702DFB599C49","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298821,"discussion_content":"if __name__ == &#39;__main__&#39;:\n    login = TestUserLogin()\n    login.setUpClass()\n    login.test2_user_login_ok()\n\n把初始化实例了一下后可以了，但是看视频不用初始化实例","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1597411395,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1350004,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/V5Q9iapkWRXblWVn7fpnA5l9nAKF023UPDnS7bib8Ylrt91epNicdeJFic0fDH8W4ickO4cdylNN50kYn9pWSDCgHEg/132","nickname":"Geek_jf52tq","note":"","ucode":"69702DFB599C49","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298837,"discussion_content":"短点设置在login = TestUserLogin()，也是报object has no attribute &#39;driver&#39;，没有初始化","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597418162,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342291,"user_name":"从前从前","can_delete":false,"product_type":"c3","uid":1575475,"ip_address":"","ucode":"73ED0B74D9DCB0","user_header":"https://static001.geekbang.org/account/avatar/00/18/0a/33/292a3f4b.jpg","comment_is_top":false,"comment_ctime":1650173216,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"没有人发现，老师后面跑的不是重构的代码吗，应该是unittest包下的，引入包没改","like_count":0}]}