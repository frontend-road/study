{"id":190684,"title":"16丨案例：性能监控工具之Grafana+Prometheus+Exporters","content":"<p>在本模块中，我将把几个常用的监控部分给梳理一下。前面我们提到过，在性能监控图谱中，有操作系统、应用服务器、中间件、队列、缓存、数据库、网络、前端、负载均衡、Web服务器、存储、代码等很多需要监控的点。</p><p>显然这些监控点不能在一个专栏中全部覆盖并一一细化，我只能找最常用的几个，做些逻辑思路的说明，同时也把具体的实现描述出来。如果你遇到了其他的组件，也需要一一实现这些监控。</p><p>在本篇中，主要想说明白下图的这个监控逻辑。</p><p><img src=\"https://static001.geekbang.org/resource/image/e0/39/e0aa269a7f528f393b859cc8ed69ac39.jpg?wh=1894*1022\" alt=\"\"></p><p>这应该是现在最流行的一套监控逻辑了吧。</p><p>我今天把常见的使用Grafana、Prometheus、InfluxDB、Exporters的数据展示方式说一下，如果你刚进入性能测试领域，也能有一个感性的认识。</p><p>有测试工具，有监控工具，才能做后续的性能分析和瓶颈定位，所以有必要把这些工具的逻辑跟你摆一摆。</p><p>所有做性能的人都应该知道一点，不管数据以什么样的形式展示，最要紧的还是看数据的来源和含义，以便做出正确的判断。</p><p>我先说明一下JMeter和node_exporter到Grafana的数据展示逻辑。至于其他的Exporter，我就不再解释这个逻辑了，只说监控分析的部分。</p><h2>JMeter+InfluxDB+Grafana的数据展示逻辑</h2><!-- [[[read_end]]] --><p>一般情况下，我们用JMeter做压力测试时，都是使用JMeter的控制台来查看结果。如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/60/75/60469fd6df4eff032fe0ce161963f675.png?wh=1189*397\" alt=\"\"></p><p>或者装个插件来看结果：</p><p><img src=\"https://static001.geekbang.org/resource/image/bd/32/bdcaa07b1ce26ffe504a7fde931b1d32.png?wh=1202*512\" alt=\"\"></p><p>或者用JMeter来生成HTML：</p><p><img src=\"https://static001.geekbang.org/resource/image/98/f2/98d050b5df8554a7109e3e532e0781f2.png?wh=1001*555\" alt=\"\"></p><p>这样看都没有问题，我们在前面也强调过，对于压力工具来说，我们最多只关心三条曲线的数据：TPS（T由测试目标定义）、响应时间、错误率。这里的错误率还只是辅助排查问题的曲线，没有问题时，只看TPS和响应时间即可。</p><p>不过采取以上三种方式有几个方面的问题。</p><ol>\n<li>整理结果时比较浪费时间。</li>\n<li>在GUI用插件看曲线，做高并发时并不现实。</li>\n<li>在场景运行时间比较长的时候，采用生成HTML的方式，会出现消耗内存过大的情况，而实际上，在生成的结果图中，有很多生成的图我们并不是那么关注。</li>\n<li>生成的结果保存之后再查看比较麻烦，还要一个个去找。</li>\n</ol><p>那么如何解决这几个问题呢？</p><p>用JMeter的Backend Listener帮我们实时发送数据到InfluxDB或Graphite可以解决这样的问题。Graphite Backend Listener的支持是在JMeter 2.13版本，InfluxdDB Backend Listener的支持是在JMeter 3.3的版本，它们都是用异步的方式把数据发送出来，以便查看。</p><p>其实有这个JMeter发送给InfluxDB的数据之后，我们不需要看上面的那些HTML数据，也可以直观地看到系统性能的性能趋势。并且这样保存下来的数据，在测试结束后想再次查看也比较方便比对。</p><p>JMeter+InfluxDB+Grafana的结构如下：</p><p><img src=\"https://static001.geekbang.org/resource/image/60/d6/60e7006b3baf95393080b302ccab9fd6.jpg?wh=1814*842\" alt=\"\"></p><p>在这个结构中，JMeter发送压力到服务器的同时，统计下TPS、响应时间、线程数、错误率等信息。默认每30秒在控制台输出一次结果（在jmeter.properties中有一个参数#summariser.interval=30可以控制）。配置了Backend Listener之后，将统计出的结果异步发送到InfluxDB中。最后在Grafana中配置InfluxDB数据源和JMeter显示模板。</p><p>然后就可以实时查看JMeter的测试结果了，这里看到的数据和控制台的数据是一样。</p><p>但如果这么简单就说完了，这篇文章也就没价值了。下面我们来说一下，数据的传输和展示逻辑。</p><h3>JMeter中Backend Listener的配置</h3><p>下面我们就InfluxDB的Backend Listener做个说明。它的配置比较简单，在脚本中加上即可。</p><p><img src=\"https://static001.geekbang.org/resource/image/b1/38/b1da92bbdf07f81f80c17a863a1ae238.png?wh=1358*345\" alt=\"\"></p><p>我们先配置好influxdb Url、application等信息，application这个配置可以看成是场景名。</p><p>那么JMeter如何将数据发给InfluxDB呢？请看源码中的关键代码，如下所示：</p><pre><code>    private void addMetrics(String transaction, SamplerMetric metric) {\n        // FOR ALL STATUS\n        addMetric(transaction, metric.getTotal(), metric.getSentBytes(), metric.getReceivedBytes(), TAG_ALL, metric.getAllMean(), metric.getAllMinTime(),\n                metric.getAllMaxTime(), allPercentiles.values(), metric::getAllPercentile);\n        // FOR OK STATUS\n        addMetric(transaction, metric.getSuccesses(), null, null, TAG_OK, metric.getOkMean(), metric.getOkMinTime(),\n                metric.getOkMaxTime(), okPercentiles.values(), metric::getOkPercentile);\n        // FOR KO STATUS\n        addMetric(transaction, metric.getFailures(), null, null, TAG_KO, metric.getKoMean(), metric.getKoMinTime(),\n                metric.getKoMaxTime(), koPercentiles.values(), metric::getKoPercentile);\n​\n​\n        metric.getErrors().forEach((error, count) -&gt; addErrorMetric(transaction, error.getResponseCode(),\n                    error.getResponseMessage(), count));\n    }\n\n</code></pre><p>从这段代码可以看出，站在全局统计的视角来看，这里把JMeter运行的统计结果，比如事务的Total请求、发送接收字节、平均值、最大值、最小值等，都加到metric中，同时也会把成功和失败的事务信息添加到metric中去。</p><p>在源码中，还有更多的添加metric的步骤，你有兴趣的话，也可以看一下JMeter源码中的<code>InfluxdbBackendListenerClient.java</code>。</p><p>保存了metric之后，再使用InfluxdbMetricsSender发送到Influxdb中去。发送关键代码如下：</p><pre><code>   @Override\n    public void writeAndSendMetrics() {\n ........\n        if (!copyMetrics.isEmpty()) {\n            try {\n                if(httpRequest == null) {\n                    httpRequest = createRequest(url);\n                }\n                StringBuilder sb = new StringBuilder(copyMetrics.size()*35);\n                for (MetricTuple metric : copyMetrics) {\n                    // Add TimeStamp in nanosecond from epoch ( default in InfluxDB )\n                    sb.append(metric.measurement)\n                        .append(metric.tag)\n                        .append(&quot; &quot;) //$NON-NLS-1$\n                        .append(metric.field)\n                        .append(&quot; &quot;)\n                        .append(metric.timestamp+&quot;000000&quot;) \n                        .append(&quot;\\n&quot;); //$NON-NLS-1$\n                }\n\n\n                StringEntity entity = new StringEntity(sb.toString(), StandardCharsets.UTF_8);\n                \n                httpRequest.setEntity(entity);\n                lastRequest = httpClient.execute(httpRequest, new FutureCallback&lt;HttpResponse&gt;() {\n                    @Override\n                    public void completed(final HttpResponse response) {\n                        int code = response.getStatusLine().getStatusCode();\n                        /*\n                         * HTTP response summary 2xx: If your write request received\n                         * HTTP 204 No Content, it was a success! 4xx: InfluxDB\n                         * could not understand the request. 5xx: The system is\n                         * overloaded or significantly impaired.\n                         */\n                        if (MetricUtils.isSuccessCode(code)) {\n                            if(log.isDebugEnabled()) {\n                                log.debug(&quot;Success, number of metrics written: {}&quot;, copyMetrics.size());\n                            } \n                        } else {\n                            log.error(&quot;Error writing metrics to influxDB Url: {}, responseCode: {}, responseBody: {}&quot;, url, code, getBody(response));\n                        }\n                    }\n                    @Override\n                    public void failed(final Exception ex) {\n                        log.error(&quot;failed to send data to influxDB server : {}&quot;, ex.getMessage());\n                    }\n                    @Override\n                    public void cancelled() {\n                        log.warn(&quot;Request to influxDB server was cancelled&quot;);\n                    }\n                });               \n ........\n            }\n        }\n    }\n</code></pre><p>通过writeAndSendMetrics，就将所有保存的metrics都发给了InfluxDB。</p><h3>InfluxDB中的存储结构</h3><p>然后我们再来看下InfluxDB中如何存储：</p><pre><code>&gt; show databases\nname: databases\nname\n----\n_internal\njmeter\n&gt; use jmeter\nUsing database jmeter\n&gt;\n&gt; show MEASUREMENTS\nname: measurements\nname\n----\nevents\njmeter\n&gt; select * from events where application='7ddemo'\nname: events\ntime                application text                title\n----                ----------- ----                -----\n1575255462806000000 7ddemo      Test Cycle1 started ApacheJMeter\n1575256463820000000 7ddemo      Test Cycle1 ended   ApacheJMeter\n..............\nn&gt; select * from jmeter where application='7ddemo' limit 10\nname: jmeter\ntime                application avg                count countError endedT hit max maxAT meanAT min minAT pct90.0            pct95.0           pct99.0 rb responseCode responseMessage sb startedT statut transaction\n----                ----------- ---                ----- ---------- ------ --- --- ----- ------ --- ----- -------            -------           ------- -- ------------ --------------- -- -------- ------ -----------\n1575255462821000000 7ddemo                                          0              0     0          0                                                                                     0               internal\n1575255467818000000 7ddemo      232.82352941176472 17    0                 17  849              122       384.9999999999996  849               849     0                               0           all    all\n1575255467824000000 7ddemo      232.82352941176472 17                          849              122       384.9999999999996  849               849     0                               0           all    0_openIndexPage\n1575255467826000000 7ddemo      232.82352941176472 17                          849              122       384.9999999999996  849               849                                                 ok     0_openIndexPage\n1575255467829000000 7ddemo                                          0              1     1          1                                                                                     1               internal\n1575255472811000000 7ddemo      205.4418604651163  26    0                 26  849              122       252.6              271.4             849     0                               0           all    all\n1575255472812000000 7ddemo                                          0              1     1          1                                                                                     1               internal\n1575255472812000000 7ddemo      205.4418604651163  26                          849              122       252.6              271.4             849                                                 ok     0_openIndexPage\n1575255472812000000 7ddemo      205.4418604651163  26                          849              122       252.6              271.4             849     0                               0           all    0_openIndexPage\n1575255477811000000 7ddemo      198.2142857142857  27    0                 27  849              117       263.79999999999995 292.3500000000001 849     0                               0           all    all\n\n</code></pre><p>这段代码也就是说，在InfluxDB中，创建了两个MEASUREMENTS，分别是events和jmeter。这两个各自存了数据，我们在界面中配置的testtile和eventTags放在了events这个MEASUREMENTS中。在模板中这两个值暂时都是不用的。</p><p>在jmeter这个MEASUREMENTS中，我们可以看到application和事务的统计信息，这些值和控制台一致。</p><p>在Grafana中显示的时候，就是从这个表中取出的数据，根据时序做的曲线。</p><h3>Grafana中的配置</h3><p>有了JMeter发送到InfluxDB中的数据，下面就来配置一下Grafana中的展示。首先，要配置一个InfluxDB数据源。如下所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/88/c8/880584ed313336eac49fe7fe6f82a3c8.png?wh=875*926\" alt=\"\"></p><p>在这里配置好URL、Database、User、Password之后，直接点击保存即可。</p><p>然后添加一个JMeter dashboard，我们常用的dashboard是Grafana官方ID为5496的模板。导入进来后，选择好对应的数据源。</p><p><img src=\"https://static001.geekbang.org/resource/image/f7/82/f7291868468ec639efda5b24b2555182.png?wh=880*438\" alt=\"\"></p><p>然后就看到界面了。</p><p><img src=\"https://static001.geekbang.org/resource/image/97/f3/97095aac53edf2d164e25de3db3221f3.png?wh=1845*777\" alt=\"\"></p><p>这时还没有数据，我们稍后做个示例，看下JMeter中的数据怎么和这个界面的数据对应起来。</p><p>我们先看下图中两个重要的数据查询语句吧。</p><p>TPS曲线：</p><pre><code>SELECT last(&quot;count&quot;) / $send_interval FROM &quot;$measurement_name&quot; WHERE (&quot;transaction&quot; =~ /^$transaction$/ AND &quot;statut&quot; = 'ok') AND $timeFilter GROUP BY time($__interval)\n</code></pre><p>上面这个就是Total TPS了，在这里称为throughput。关于这个概念，我在第一篇中就已经有了说明，这里再次提醒，概念的使用在团队中要有统一的认识，不要受行业内一些传统信息的误导。</p><p>这里取的数据来自MEASUREMENTS中成功状态的所有事务。</p><p>响应时间曲线：</p><pre><code>SELECT mean(&quot;pct95.0&quot;) FROM &quot;$measurement_name&quot; WHERE (&quot;application&quot; =~ /^$application$/) AND $timeFilter GROUP BY &quot;transaction&quot;, time($__interval) fill(null)\n</code></pre><p>这里是用95 pct内的响应时间画出来的曲线。</p><p>整体展示出来的效果如下：</p><p><img src=\"https://static001.geekbang.org/resource/image/ff/3d/ffac987c827b103fef240916f7cb233d.png?wh=1843*777\" alt=\"\"></p><h3>数据比对</h3><p>首先，我们在JMeter中配置一个简单的场景。10个线程，每个线程迭代10次，以及两个HTTP请求。</p><p><img src=\"https://static001.geekbang.org/resource/image/55/dc/5546c4449baf0e59d477095a93d717dc.png?wh=719*282\" alt=\"\"></p><p>也就是说，这时会产生10x10x2=200次请求。我们用JMeter跑起来看一下。</p><p><img src=\"https://static001.geekbang.org/resource/image/92/b9/92d1144a5e8d9ebb7fec246777431bb9.png?wh=1004*71\" alt=\"\"></p><p>看到了吧，这个请求数和我们预想的一样。下面我们看一下Grafana中展示出来的结果。</p><p><img src=\"https://static001.geekbang.org/resource/image/ff/55/ffb38e433239eeb4712887f7d9723155.png?wh=1848*833\" alt=\"\"></p><p>还有针对每个事务的统计情况。</p><p><img src=\"https://static001.geekbang.org/resource/image/3b/47/3b921720759c06ea39673ec5c84a8047.png?wh=1851*780\" alt=\"\"></p><p>至此，JMeter到Grafana的展示过程就完成了。以后我们就不用再保存JMeter的执行结果了，也不用等着JMeter输出HTML了。</p><h2>node_exporter+Prometheus+Grafana的数据展示逻辑</h2><p>对性能测试来说，在常用的Grafana+Prometheus+Exporter的逻辑中，第一步要看的就是操作系统资源了。所以在这一篇中，我们将以node_exporter为例来说明一下操作系统抽取数据的逻辑，以便知道监控数据的来源，至于数据的含义，我们将在后续的文章中继续描述。</p><p>首先，我们还是要画一个图。</p><p><img src=\"https://static001.geekbang.org/resource/image/39/6b/39a970eea119124245e2318779ec7c6b.jpg?wh=744*1246\" alt=\"\"></p><p>现在node_exporter可以支持很多个操作系统了。官方列表如下：</p><p><img src=\"https://static001.geekbang.org/resource/image/76/e9/76c6d768b427dd0e3003f9c78a57b3e9.png?wh=1154*751\" alt=\"\"></p><p>当然不是说只支持这些，你也可以扩展自己的Exporter。</p><h3>配置node_exporter</h3><p>node_exporter目录如下：</p><pre><code>[root@7dgroup2 node_exporter-0.18.1.linux-amd64]# ll\ntotal 16524\n-rw-r--r-- 1 3434 3434    11357 Jun  5 00:50 LICENSE\n-rwxr-xr-x 1 3434 3434 16878582 Jun  5 00:41 node_exporter\n-rw-r--r-- 1 3434 3434      463 Jun  5 00:50 NOTICE\n</code></pre><p>启动：</p><pre><code>[root@7dgroup2 node_exporter-0.18.1.linux-amd64]#./node_exporter --web.listen-address=:9200 &amp;\n</code></pre><p>是不是很简洁？如果想看更多的功能 ，可以查看下它的帮助。</p><h3>配置Prometheus</h3><p>先下载Prometheus：</p><pre><code>[root@7dgroup2 data]# wget -c https://github.com/prometheus/prometheus/releases/download/v2.14.0/prometheus-2.14.0.linux-amd64.tar.gz\n..........\n100%[=============================================================================================&gt;] 58,625,125   465KB/s   in 6m 4s\n\n\n2019-11-29 15:40:16 (157 KB/s) - ‘prometheus-2.14.0.linux-amd64.tar.gz’ saved [58625125/58625125]\n\n\n[root@7dgroup2 data]\n\n</code></pre><p>解压之后，我们可以看到目录结构如下：</p><pre><code>[root@7dgroup2 prometheus-2.11.1.linux-amd64]# ll\ntotal 120288\ndrwxr-xr-x. 2 3434 3434     4096 Jul 10 23:26 console_libraries\ndrwxr-xr-x. 2 3434 3434     4096 Jul 10 23:26 consoles\ndrwxr-xr-x. 3 root root     4096 Nov 30 12:55 data\n-rw-r--r--. 1 3434 3434    11357 Jul 10 23:26 LICENSE\n-rw-r--r--. 1 root root       35 Aug  7 23:19 node.yml\n-rw-r--r--. 1 3434 3434     2770 Jul 10 23:26 NOTICE\n-rwxr-xr-x. 1 3434 3434 76328852 Jul 10 21:53 prometheus\n-rw-r--r--  1 3434 3434     1864 Sep 21 09:36 prometheus.yml\n-rwxr-xr-x. 1 3434 3434 46672881 Jul 10 21:54 promtool\n[root@7dgroup2 prometheus-2.11.1.linux-amd64]#\n</code></pre><p>在<code>prometheus.yml</code>中添加如下配置，以取数据：</p><pre><code>  - job_name: 's1'\n    static_configs:\n    - targets: ['172.17.211.143:9200']\n</code></pre><p>启动：</p><pre><code>[root@7dgroup2 data]# ./prometheus --config.file=prometheus.yml &amp;\n\n</code></pre><p>这样就行了吗？当然不是。根据上面的流程图，我们还需要配置Grafana。</p><h3>配置Grafana</h3><p>首先配置一个数据源，非常简单。如下所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/7f/04/7fdde673c4aabe7d2b0293384237dc04.png?wh=492*680\" alt=\"\"></p><p>再配置一个node_exporter的模板，比如我这里选择了官方模板（ID：11074），展示如下：</p><p><img src=\"https://static001.geekbang.org/resource/image/33/00/33c880ff5ba645285f6e6dfbd32aed00.png?wh=1861*992\" alt=\"\"></p><h3>数据逻辑说明</h3><p>说明完上面的过程之后，对我们做性能测试和分析的人来说，最重要的，就是要知道数据的来源和含义了。</p><p>拿上面图中的CPU使用率来说吧（因为CPU使用率是非常重要的一个计数器，所以我们今天先拿它来开刀）。</p><p>我们先点一下title上的edit，看一下它的query语句。</p><pre><code>avg(irate(node_cpu_seconds_total{instance=~&quot;$node&quot;,mode=&quot;system&quot;}[30m])) by (instance)\navg(irate(node_cpu_seconds_total{instance=~&quot;$node&quot;,mode=&quot;user&quot;}[30m])) by (instance)\navg(irate(node_cpu_seconds_total{instance=~&quot;$node&quot;,mode=&quot;iowait&quot;}[30m])) by (instance)\n1 - avg(irate(node_cpu_seconds_total{instance=~&quot;$node&quot;,mode=&quot;idle&quot;}[30m])) by (instance)\n</code></pre><p>这些都是从Prometheus中取出来的数据，查询语句读了Prometheus中<code>node_cpu_seconds_total</code>的不同的模块数据。</p><p>下面我们来看一下，<code>node_exporter</code>暴露出来的计数器。</p><p><img src=\"https://static001.geekbang.org/resource/image/a6/b0/a6a96e9ead348d8d206c8f10e1890db0.png?wh=682*412\" alt=\"\"></p><p>这些值和top一样，都来自于<code>/proc/</code>目录。下面这张图是top数据，我们可以比对一下。</p><p><img src=\"https://static001.geekbang.org/resource/image/2d/50/2d62f76de8535a92caa3c0e140cba250.png?wh=673*393\" alt=\"\"></p><p>到此，我们就了解到了操作系统中监控数据的取值逻辑了，也就是从操作系统本身的计数器中取出值来，然后传给Prometheus，再由Grafana中的query语句查出相应的数据，最后由Grafana展示在界面上。</p><h2>总结</h2><p>为什么要解释数据的逻辑呢？</p><p>因为最近在工作中遇到一些情况，有人觉得有了Prometheus+Grafana+Exportor这样的组合工具之后，基本上都不再用手工执行什么命令了。但我们要了解的是，对于监控平台来说，它取的所有的数据必然是被监控者可以提供的数据，像node_exporter这样小巧的监控收集器，它可以获取的监控数据，并不是整个系统全部的性能数据，只是取到了常见的计数器而已。</p><p>这些计数器不管是用命令查看，还是用这样炫酷的工具查看，它的值本身都不会变。所以不管是在监控平台上看到的数据，还是在命令行中看到的数据，我们最重要的是要知道含义以及这些值的变化对性能测试和分析的下一步骤的影响。</p><p>后面我们将着重来解释这些细节。</p><h2>问题</h2><p>最后我个问题吧，你可以自己去验证下。JMeter是如何把数据推送到Grafana中呢？另外，同样是监控操作系统的计数器，监控平台中的数据和监控命令中的数据有什么区别？</p><p>欢迎你在评论区写下你的思考，也欢迎把这篇文章分享给你的朋友或者同事，一起交流一下。</p>","neighbors":{"left":{"article_title":"春节策划丨快来挑战一下自己的分析逻辑吧！","id":190738},"right":{"article_title":"17丨CentOS：操作系统级监控及常用计数器解析（上）","id":191503}},"comments":[{"had_liked":false,"id":200394,"user_name":"小呀么小二郎","can_delete":false,"product_type":"c1","uid":1326905,"ip_address":"","ucode":"149540DCFDF43E","user_header":"https://static001.geekbang.org/account/avatar/00/14/3f/39/b1558fc9.jpg","comment_is_top":false,"comment_ctime":1585580182,"is_pvip":false,"replies":[{"id":"74986","content":"收到","user_name":"编辑回复","user_name_real":"郭蕾","uid":"1000473","ctime":1585608743,"ip_address":"","comment_id":200394,"utype":2}],"discussion_count":2,"race_medal":0,"score":"27355383958","product_id":100042501,"comment_content":"今日思考题：<br>问题1：JMeter 是如何把数据推送到 Grafana 中的？<br>共分为两个大步骤：<br>1、JMeter 将数据发给 InfluxDB：<br>（1）在JMeter 中配置 Backend Listener ；<br>（2）使用InfluxdbBackendListenerClient将JMeter运行的统计结果添加到metric中，并保存metric；<br>（3）使用InfluxdbMetricsSender将metric发送到Influxdb；<br>2、Grafana从 InfluxDB获取数据：<br>（1）在Grafana 中配置InfluxDB 数据源<br>（2）添加 JMeter dashboard，导入模板，选择对应的数据源即可看到界面<br><br><br>问题2：同样是监控操作系统的计数器，监控平台中的数据和监控命令中的数据有什么区别？<br>就数据的值来说，没有区别；<br>就数据量来说，监控平台的数据通常比监控命令中查到的数据会少一些。<br><br><br>今日感悟：<br>高老师的专栏，音频总会比文章多讲一些，知道这一点之后，我就调整了学习方式，我先听音频，再细读文章（以前我的习惯是先看文章，再听音频）。这节内容，不适用了，不知道是因为我太弱，还是老师语速变快了，边听边看文章，听的真是一脸懵。<br>大概听了3遍之后，这节课在我眼里变成了高不可攀的形象。甚至让我有一种，这个专栏我可能就卡在这里学不动了的感觉。然后抵触心理就出来了，有点不想学。<br>但是吧，不能轻言放弃，于是我不听音频了，开始细细读文章。边读边整理笔记，梳理思路。<br>神奇般的，我觉得我又能懂了，虽然不是说完全能把这个监控平台搭起来，但是我觉得我体会到了老师这节课想强调的东西。<br>最后，作为一个小白，这节课我对自己的要求就是：达到一个感性的认识。<br><br>其实归根结底还是自己手头没有实际的性能项目来练习，边学边练其实才是最好的。<br><br>最最后：文中“通过 writeAndSendMetrics，就将所有保存的 metrix 都发给了 InfluxDB。” 老师单词是不是拼错啦，应该是metric吧（或者是metrics?）","like_count":6,"discussions":[{"author":{"id":1000473,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/44/19/17fadc62.jpg","nickname":"郭蕾","note":"","ucode":"34F4C07D1C5FE8","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490015,"discussion_content":"收到","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585608743,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1238005,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e3/f5/fc9de9bf.jpg","nickname":"candy","note":"","ucode":"60CB14339D3C2C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412897,"discussion_content":"感悟，真是说出了我的心声，最后我要先看文章再听音频才能懂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636305695,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":183187,"user_name":"bettynie","can_delete":false,"product_type":"c1","uid":1580609,"ip_address":"","ucode":"84372D4B8761D6","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83epFQPMPrP3V6HhlGLPp0JKMiaHQDibFKnE7z8To27tYEH42XvvmmQGyYvL4CK1lLJBIUAw7jtBnezibA/132","comment_is_top":false,"comment_ctime":1582968648,"is_pvip":false,"replies":[{"id":"70889","content":"你可以用grafana+prometheus+一堆exporters来实现对windows&#47;linux&#47;mysql&#47;jvm&#47;redis&#47;kafka等的监控，同时也用同一个grafana+prometheus来监控k8s+docker。有很多的exporter可以用。<br><br>对jmeter，如果你想放进去，可以用同一个granfa，再搭配一个influxdb收集jmeter的数据就行了。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1582982291,"ip_address":"","comment_id":183187,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23057805128","product_id":100042501,"comment_content":"老师，按照你讲的原理，其实我们需要搭建 jmeter+influxdb+grafana 和 prometheus+exports+grafana 2套系统来分别监控我们需要的性能指标，是么？<br> jmeter+influxdb+grafana用来监控jmeter中的线程数，响应时间和吞吐量，prometheus+exports+grafana 用来监控系统资源或者数据库以及其他资源, 对么？<br>并且prometheus+exports+grafana 只能监控linux和uinx系统，无法监控windows,并且只能监控mysql数据库，感觉好像就是为监控docker之内的容器而生的~","like_count":5,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485588,"discussion_content":"你可以用grafana+prometheus+一堆exporters来实现对windows/linux/mysql/jvm/redis/kafka等的监控，同时也用同一个grafana+prometheus来监控k8s+docker。有很多的exporter可以用。\n\n对jmeter，如果你想放进去，可以用同一个granfa，再搭配一个influxdb收集jmeter的数据就行了。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1582982291,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177483,"user_name":"障碍物","can_delete":false,"product_type":"c1","uid":1701562,"ip_address":"","ucode":"46872942956A1C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLibCKJYwlyLEIWicNxJSuIwIbCZqfGIbzfF5mKicjWIrGkibBgM4E0dSNekhzdaoyzabmZPTxicTCv7TQ/132","comment_is_top":false,"comment_ctime":1581402654,"is_pvip":false,"replies":[{"id":"68935","content":"都有的。你可以看一下prometheus官网中的第三方exporter，非常全面。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1581429759,"ip_address":"","comment_id":177483,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23056239134","product_id":100042501,"comment_content":"Prometheus有插件能监控sqlserver或者oracle等其他数据库么","like_count":5,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483444,"discussion_content":"都有的。你可以看一下prometheus官网中的第三方exporter，非常全面。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581429759,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":261064,"user_name":"SeaYang","can_delete":false,"product_type":"c1","uid":1393840,"ip_address":"","ucode":"F44622A44CE8B9","user_header":"https://static001.geekbang.org/account/avatar/00/15/44/b0/c196c056.jpg","comment_is_top":false,"comment_ctime":1605187220,"is_pvip":false,"replies":[{"id":"94779","content":"对influxdb这个时序数据库来说，在大压力下是会出现这样的问题的。数据时间戳一样会导致覆盖，你可以尝试修改源码里时间戳到更细的粒度。或添加个tag。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1605226329,"ip_address":"","comment_id":261064,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18785056404","product_id":100042501,"comment_content":"老师您好，backend listener本身没有问题，可能我描述的不够清楚，我再描述一次我的问题：<br>1、背景<br>我们基于jmeter做了个压测平台，在平台的前端页面上编写接口、场景等，点击压测，后端会调度多台压力机，每台压力机会将接口、场景数据使用jmeter的api生成jmx文件，然后调用jmeter的命令行启动压测。生成jmx文件的过程中会创建一个backend listener元件，每台压力机backend listener元件的application字段设置为了同一个值，这样子我们可以通过这个application值调用InfluxDB的http接口，获得所有压力机的tps总和<br><br>2、遇到的问题<br>1）实验过程<br>使用控制目标TPS的方式，TPS目标是2000，启动20台压力机，每台压力机的目标TPS为2000 &#47; 20 = 100，注意，单台压力机就能达到2000TPS。<br>2）现象<br>通过观察前端页面的tps曲线，会发现TPS经常达不到2000，经常是1800， 1900左右，看上去像是有一两台压力机没有将数据抛到InfluxDB中，查看InfluxDB，会发现每秒确实只有18条、19条的数据。<br>3）分析<br>查看每台压力机的jmeter输出日志，有summary输出，说明每台压力机都正常调起了jmeter并正常压测了，查看InfluxDB的连接也没有问题。<br>后来同时启动30台压力机，也是看上去像是有一两台压力机没有抛数据一样，但jmeter日志都没问题，这就很奇怪了，如果是InfluxDB不支持20台压力机同时抛数据，那么30台压力机同时抛数据就应该最多每秒只有十几条数据啊。难道是因为每台压力机的application值都一样，有一定概率发生数据覆盖？<br><br>3、解决办法<br>将每台压力机的backend listener的application字段设置为不同的值，但是有一个相同的前缀，通过这个前缀值去查询总的TPS数据，经过几十次的测试，都是正常的，没有再出现问题了。但是之前是不是发生了数据覆盖也不确定，但暂时也不管了。","like_count":4,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509363,"discussion_content":"对influxdb这个时序数据库来说，在大压力下是会出现这样的问题的。数据时间戳一样会导致覆盖，你可以尝试修改源码里时间戳到更细的粒度。或添加个tag。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605226329,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177039,"user_name":"杜艳","can_delete":false,"product_type":"c1","uid":1168516,"ip_address":"","ucode":"8D46A8CF33E9C7","user_header":"https://static001.geekbang.org/account/avatar/00/11/d4/84/7f584cb2.jpg","comment_is_top":false,"comment_ctime":1581254690,"is_pvip":false,"replies":[{"id":"68749","content":"这些不是偏理论，是偏原理逻辑。<br>本来想着网上有很多教人搭建的资料，自己稍微动手做一下就知道了。<br>所以只在专栏中体现原创的部分。<br>如果我把完整的搭建过程列出来就成了一步步操作的文章，担心会有人觉得不值得买这专栏了。<br>如果你想要详细的安装手册，可以联系我。😃<br>","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1581303535,"ip_address":"","comment_id":177039,"utype":1}],"discussion_count":15,"race_medal":0,"score":"14466156578","product_id":100042501,"comment_content":"感觉老师讲的都是偏理论，知道数据的来龙去脉了，但是使用过程怎么搭建这个整体的监控平台步骤能不能详细介绍，让我们可以用在项目中呢？","like_count":3,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483282,"discussion_content":"这些不是偏理论，是偏原理逻辑。\n本来想着网上有很多教人搭建的资料，自己稍微动手做一下就知道了。\n所以只在专栏中体现原创的部分。\n如果我把完整的搭建过程列出来就成了一步步操作的文章，担心会有人觉得不值得买这专栏了。\n如果你想要详细的安装手册，可以联系我。😃\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1581303535,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":2,"child_discussions":[{"author":{"id":2828810,"avatar":"","nickname":"梁之秋","note":"","ucode":"E70732FE72976D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":555773,"discussion_content":"请问老师，为什么不推荐jmeter跑压力测试，换什么工具好呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647072399,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":483282,"ip_address":""},"score":555773,"extra":""},{"author":{"id":1038245,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/d7/a5/6e047fbc.jpg","nickname":"Olivia","note":"","ucode":"BE840A032F1DF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2828810,"avatar":"","nickname":"梁之秋","note":"","ucode":"E70732FE72976D","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":589304,"discussion_content":"说的不是不推荐jmeter,是不推荐jmeter GUI方式跑","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664680740,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":555773,"ip_address":"上海"},"score":589304,"extra":""}]},{"author":{"id":1356835,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b4/23/8eb50b60.jpg","nickname":"小圆子","note":"","ucode":"6D728466906AA6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":368261,"discussion_content":"老师，我也想要安装手册","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1618634662,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3192899,"avatar":"https://static001.geekbang.org/account/avatar/00/30/b8/43/ec318e8d.jpg","nickname":"荏苒","note":"","ucode":"A0B7C570867133","race_medal":3,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590977,"discussion_content":"老师，同求安装手册，请问可以怎么联系您","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666192710,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"江苏"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1546009,"avatar":"https://static001.geekbang.org/account/avatar/00/17/97/19/31f3587c.jpg","nickname":"阿源","note":"","ucode":"57061CAA804C39","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575236,"discussion_content":"安装手册可以发给我吗，不知道如何联系你","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654679154,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2857564,"avatar":"","nickname":"Geek_0653bc","note":"","ucode":"82E9DCE4A92AFD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571153,"discussion_content":"我也想要安装手册","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652089221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2981079,"avatar":"https://static001.geekbang.org/account/avatar/00/2d/7c/d7/812442cf.jpg","nickname":"奔跑的萝卜","note":"","ucode":"CD3E1AEE7192AC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566105,"discussion_content":"老师我也想要安装手册","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650603146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1593624,"avatar":"https://static001.geekbang.org/account/avatar/00/18/51/18/e304ef35.jpg","nickname":"唐糖糖","note":"","ucode":"22DAB3050EBDD5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560370,"discussion_content":"老师我也需要安装手册，怎么联系您呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649303202,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1819841,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/c4/c1/9c0b5808.jpg","nickname":"Niu","note":"","ucode":"B74E7A826398F7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550836,"discussion_content":"我也想要安装手册","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644754950,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1898734,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoTYWiaDap7MJOZ94RrSTV5fwKV6TgeJ5Wqjj7DTBA9SeufjQjKk6I18cCBfh4sokSxrNibXNhsqXoA/132","nickname":"Geek_c4b352","note":"","ucode":"52E382D1E63219","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":314672,"discussion_content":"我也想要安装手册","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603185390,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1788310,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/49/96/2d817c61.jpg","nickname":"Hello~","note":"","ucode":"944C680B0DE26B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1898734,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoTYWiaDap7MJOZ94RrSTV5fwKV6TgeJ5Wqjj7DTBA9SeufjQjKk6I18cCBfh4sokSxrNibXNhsqXoA/132","nickname":"Geek_c4b352","note":"","ucode":"52E382D1E63219","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340529,"discussion_content":"+1 老师的课 一节我真的要听 看好几遍。 回头看学过的课，还会重新有收获。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610029535,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":314672,"ip_address":""},"score":340529,"extra":""}]},{"author":{"id":1903144,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEJSGXCibWIdt96sFNGiaLCFdFnTIBaOCKnM3FJDA3HOFIctbh9KEzKSRDibf7t0EQyBeTQBcW4zLZfUw/132","nickname":"Geek_534bb3","note":"","ucode":"A38BB8A53E17D8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":203819,"discussion_content":"老师，jmeter监听我都配了，但是grafana那边数据出不来，不知道缺什么","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584086914,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1788089,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/48/b9/74a3cd86.jpg","nickname":"敏敏","note":"","ucode":"0DD90D33683355","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":193060,"discussion_content":"我也想要安装手册","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583120396,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1785783,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3f/b7/142c2fef.jpg","nickname":"陈文琪","note":"","ucode":"B25099D146A078","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":178702,"discussion_content":"同问，有安装手册吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582190448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273232,"user_name":"蔚来懿","can_delete":false,"product_type":"c1","uid":2363304,"ip_address":"","ucode":"815144E42094C3","user_header":"https://static001.geekbang.org/account/avatar/00/24/0f/a8/956452cd.jpg","comment_is_top":false,"comment_ctime":1610504596,"is_pvip":false,"replies":[{"id":"99028","content":"用容器，把监控放到基础镜像中呀。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1610533419,"ip_address":"","comment_id":273232,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10200439188","product_id":100042501,"comment_content":"老师，有一个疑问，我的情况是这样的，我们公司环境有很多（测试环境，开发环境，预发布环境，开发环境），很多个项目，每个项目结构复杂，机器有很多，如果按照这样的部署的话，需要安装很多软件，还有防火墙的问题，请问是否有轻量级的监控方式，比如说，直接在服务器上装工具（类似nmon，但是直观），","like_count":2,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513531,"discussion_content":"用容器，把监控放到基础镜像中呀。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610533419,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":272402,"user_name":"涓涓","can_delete":false,"product_type":"c1","uid":1173140,"ip_address":"","ucode":"16C6C308BA2816","user_header":"https://static001.geekbang.org/account/avatar/00/11/e6/94/ba217a11.jpg","comment_is_top":false,"comment_ctime":1610078556,"is_pvip":false,"replies":[{"id":"98770","content":"就是这样的逻辑呀。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1610100871,"ip_address":"","comment_id":272402,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10200013148","product_id":100042501,"comment_content":"高老师，好。<br>你看这样配置行不行:<br>1. 要监控的每台服务器都配置一个node_exporter<br>2.  然后再找台服务器安装prometheus，在prometheus.yml中添加每个node_exporter的配置<br>3. 最后在grafana中配置prometheus，查看采集的各台服务器数据。","like_count":2,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513269,"discussion_content":"就是这样的逻辑呀。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610100871,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":258847,"user_name":"不将就","can_delete":false,"product_type":"c1","uid":1168579,"ip_address":"","ucode":"9BEC01AEE1D885","user_header":"https://static001.geekbang.org/account/avatar/00/11/d4/c3/d41e8c79.jpg","comment_is_top":false,"comment_ctime":1604566879,"is_pvip":false,"replies":[{"id":"94338","content":"正解。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1604791469,"ip_address":"","comment_id":258847,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10194501471","product_id":100042501,"comment_content":"问题1:：Jmeter直接面向的是influxdb,Granfana通过官方插件取指定的influxdb中抓取数据做展示<br>问题2：监控平台的数据本质上还是通过操作系统命令获取的，而且有抓取周期，通过网络传过来，实时性不如直接在操作系统获取，但是好处也是明显的，就是图形化展示和历史监控数据的便捷查询","like_count":2,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508767,"discussion_content":"正解。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604791469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":257173,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1603872347,"is_pvip":false,"replies":[{"id":"93926","content":"2.0是后面出来的，逻辑上变了很多。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1604280943,"ip_address":"","comment_id":257173,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10193806939","product_id":100042501,"comment_content":"上来安装了 InfluxDB 2.0 ，结果悲剧了，找了一天没找到怎么创建 database，后来看官方文档，感觉是理念变了，全部通过 API 完成。请选择 InfluxDB v1.8 ，避免 2.0 的尴尬。","like_count":2,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508243,"discussion_content":"2.0是后面出来的，逻辑上变了很多。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604280943,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2253888,"avatar":"https://static001.geekbang.org/account/avatar/00/22/64/40/705de56c.jpg","nickname":"alina_lin","note":"","ucode":"8551E656AA3163","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335711,"discussion_content":"jmeter发送数据的时候，如果发现没有库，不是会自动创建的么。。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608280389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2253888,"avatar":"https://static001.geekbang.org/account/avatar/00/22/64/40/705de56c.jpg","nickname":"alina_lin","note":"","ucode":"8551E656AA3163","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335770,"discussion_content":"接口不对，无法创建","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608299901,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":335711,"ip_address":""},"score":335770,"extra":""}]}]},{"had_liked":false,"id":322515,"user_name":"七月的雨","can_delete":false,"product_type":"c1","uid":2839126,"ip_address":"","ucode":"7B3829576985D4","user_header":"https://static001.geekbang.org/account/avatar/00/2b/52/56/6ac8be3c.jpg","comment_is_top":false,"comment_ctime":1637455900,"is_pvip":false,"replies":[{"id":"117109","content":"容器里面不用node exporter来监控。用cadviser就可以，k8s已经集成 了。","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1637503118,"ip_address":"","comment_id":322515,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5932423196","product_id":100042501,"comment_content":"老师，如果用nodeexporter监控容器要怎么监控，因为容器IP是变化的，是通过端口来监控吗","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532029,"discussion_content":"容器里面不用node exporter来监控。用cadviser就可以，k8s已经集成 了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637503118,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":301633,"user_name":"郑频雅","can_delete":false,"product_type":"c1","uid":2106996,"ip_address":"","ucode":"892E39B4E1840E","user_header":"https://static001.geekbang.org/account/avatar/00/20/26/74/92646820.jpg","comment_is_top":false,"comment_ctime":1625794017,"is_pvip":false,"replies":[{"id":"109175","content":"nmon操作起来比较复杂，也不适合当前流行的技术栈。<br>在实际工作中，哪个工具适合就选择哪个，没有特定的限制。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1625797680,"ip_address":"","comment_id":301633,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5920761313","product_id":100042501,"comment_content":"请问老师，除了这套工具，nmon为什么没有介绍，这个工具不是必不可少的？","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523048,"discussion_content":"nmon操作起来比较复杂，也不适合当前流行的技术栈。\n在实际工作中，哪个工具适合就选择哪个，没有特定的限制。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625797680,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":291156,"user_name":"dao","can_delete":false,"product_type":"c1","uid":1087879,"ip_address":"","ucode":"4181FB270462CF","user_header":"https://static001.geekbang.org/account/avatar/00/10/99/87/98ebb20e.jpg","comment_is_top":false,"comment_ctime":1620058265,"is_pvip":true,"replies":[{"id":"105645","content":"不错，这是一个知识点。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1620452484,"ip_address":"","comment_id":291156,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5915025561","product_id":100042501,"comment_content":"如果有人和我一样安装的是 influxdb 2.0，那么需要在 JMeter Backend Listener 设置 influxdbUrl 和 influxdbToken。比如我的设置<br>influxdbUrl：http:&#47;&#47;192.168.1.196:9999&#47;api&#47;v2&#47;write?bucket=test&amp;org=dao<br>influxdbToken：好长的一串 base64 编码的 token","like_count":2,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519390,"discussion_content":"不错，这是一个知识点。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620452484,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":265638,"user_name":"David.cui","can_delete":false,"product_type":"c1","uid":1302228,"ip_address":"","ucode":"AB46F310403612","user_header":"https://static001.geekbang.org/account/avatar/00/13/de/d4/b83c4185.jpg","comment_is_top":false,"comment_ctime":1606967217,"is_pvip":false,"replies":[{"id":"96670","content":"可以的，只要符合接口规则即可。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1607214497,"ip_address":"","comment_id":265638,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5901934513","product_id":100042501,"comment_content":"Prometheus+Grafana或InfluxDB+Grafana 是不是可以用python或其他工具分析自己想要的指标，然后插入InfluxDB或Prometheus，通过Grafana展示出来即可呢？","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511003,"discussion_content":"可以的，只要符合接口规则即可。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607214497,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":260737,"user_name":"SeaYang","can_delete":false,"product_type":"c1","uid":1393840,"ip_address":"","ucode":"F44622A44CE8B9","user_header":"https://static001.geekbang.org/account/avatar/00/15/44/b0/c196c056.jpg","comment_is_top":false,"comment_ctime":1605091834,"is_pvip":false,"replies":[{"id":"94722","content":"果然理解了。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1605144635,"ip_address":"","comment_id":260737,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5900059130","product_id":100042501,"comment_content":"1、JMeter 是如何把数据推送到 Grafana 中呢？<br>JMeter实际上是将数据推送到Influxdb中，Influxdb本身对外提供了HTTP接口，Grafana通过HTTP接口轮询性能指标，若自己去画前端页面图表的话，也可以不用Grafana，直接调用Influxdb的HTTP接口<br><br>2、另外，同样是监控操作系统的计数器，监控平台中的数据和监控命令中的数据有什么区别？<br>没有区别，只是命令可能能看到更多的值<br><br>有时候压测过程中，压力机本身的资源情况也是需要关注的，通过Prometheus + node_exporter + Grafana可以很方便的查看压力机集群的资源情况，比传统一台台登录方便很多，顺便熟悉监控的部署","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509275,"discussion_content":"果然理解了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605144635,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":253661,"user_name":"chailyn","can_delete":false,"product_type":"c1","uid":2066287,"ip_address":"","ucode":"E4C7769B3AD311","user_header":"https://static001.geekbang.org/account/avatar/00/1f/87/6f/a1c56129.jpg","comment_is_top":false,"comment_ctime":1602820509,"is_pvip":false,"replies":[{"id":"93942","content":"网络可达，有权限即可。不用非要放到一起。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1604281512,"ip_address":"","comment_id":253661,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5897787805","product_id":100042501,"comment_content":"高老师，压力机和安装influxdb是两台机子，数据传送失败，难道压力机和influxdb要安装到一台机子？","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":507140,"discussion_content":"网络可达，有权限即可。不用非要放到一起。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604281512,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":253240,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1602660449,"is_pvip":false,"replies":[{"id":"93948","content":"这是开源的功劳。哈哈。 ","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1604281855,"ip_address":"","comment_id":253240,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5897627745","product_id":100042501,"comment_content":"获得了监控的神器，很炫酷、很强大！感谢老师！","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":507016,"discussion_content":"这是开源的功劳。哈哈。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604281855,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":229202,"user_name":"Geek_a55bf0","can_delete":false,"product_type":"c1","uid":1463944,"ip_address":"","ucode":"96FCD7B9120CA6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Nv7iaxevWVukvxaZf6TjbcNicgatCUpUcp7hTah0JQxvr7ZjMlLbopEaveichKRLQJjKXR6geB5LBntf7XCP8F4kQ/132","comment_is_top":false,"comment_ctime":1592922464,"is_pvip":false,"replies":[{"id":"87990","content":"这里是指的抓取监控数据的。<br>1. $send_interval是抓取的频率。<br>2. &#47;^$transaction$是事务名。<br>3. $timeFilter是过滤时间。<br>4. $__interval 是展示的间隔。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1596077367,"ip_address":"","comment_id":229202,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5887889760","product_id":100042501,"comment_content":"<br>SELECT last(&quot;count&quot;) &#47; $send_interval FROM &quot;$measurement_name&quot; WHERE (&quot;transaction&quot; =~ &#47;^$transaction$&#47; AND &quot;statut&quot; = &#39;ok&#39;) AND $timeFilter GROUP BY time($__interval)     高老师，我基础比较差，请问下1.$send_interval是脚本跑一个循环的时间吗？   2.~ &#47;^$transaction$这一段怎么理解   3.$timeFilter和$__interval是什么意思","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499376,"discussion_content":"这里是指的抓取监控数据的。\n1. $send_interval是抓取的频率。\n2. /^$transaction$是事务名。\n3. $timeFilter是过滤时间。\n4. $__interval 是展示的间隔。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596077367,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2044910,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/33/ee/d4d66dfb.jpg","nickname":"NH","note":"","ucode":"F41CEBEAA2662D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291631,"discussion_content":"同问，send_interval怎么理解，前面说的是平均响应时间，这里说的 send_interval是不是平均响应时间","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594892232,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":227069,"user_name":"Geek_a55bf0","can_delete":false,"product_type":"c1","uid":1463944,"ip_address":"","ucode":"96FCD7B9120CA6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Nv7iaxevWVukvxaZf6TjbcNicgatCUpUcp7hTah0JQxvr7ZjMlLbopEaveichKRLQJjKXR6geB5LBntf7XCP8F4kQ/132","comment_is_top":false,"comment_ctime":1592274481,"is_pvip":false,"replies":[{"id":"84032","content":"summaryonly设置为false。 ","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1592532749,"ip_address":"","comment_id":227069,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5887241777","product_id":100042501,"comment_content":"高老师，我的jmeter传到influxdb的数据没有事务名，请问您知道原因吗？如果没有碰到过麻烦提供下您的软件版本，我按您的版本安装试试","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498483,"discussion_content":"summaryonly设置为false。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592532749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207245,"user_name":"Joie","can_delete":false,"product_type":"c1","uid":1163808,"ip_address":"","ucode":"73A66DF56972F4","user_header":"https://static001.geekbang.org/account/avatar/00/11/c2/20/fb3861e8.jpg","comment_is_top":false,"comment_ctime":1587033809,"is_pvip":true,"replies":[{"id":"82016","content":"断开曲线？那就是数据没传过来了。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1590754657,"ip_address":"","comment_id":207245,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5882001105","product_id":100042501,"comment_content":"我在项目中用到了jmeter+influxDB+grafana，拉长时间段来看TPS和响应时间 还有分事务来看不同趋势 效果很明显。不过有时候不知道为什么在趋势显示时中间会有断开曲线的情况，在jmeter自身的log中是没有出现的","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492057,"discussion_content":"断开曲线？那就是数据没传过来了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590754657,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":202073,"user_name":"赵娜","can_delete":false,"product_type":"c1","uid":1856138,"ip_address":"","ucode":"70F6A182827555","user_header":"","comment_is_top":false,"comment_ctime":1585898723,"is_pvip":false,"replies":[{"id":"75575","content":"生产运维也有监控的。一样的采样频率。所以这点影响是合理的。<br>使用grafana+influxdb采jmeter数据是为了易于保存。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1585962439,"ip_address":"","comment_id":202073,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5880866019","product_id":100042501,"comment_content":"老师，JMeter+InfluxDB+Grafana组合采集到的数据和jmeter本身收集到的数据一致，为什么还要采用这种方式呢？使用node_exporter+Prometheus+Grafana的组合采集数据，当数量大时会影响被监控的系统吗，同时在收集数据时也会对被监控的服务器有影响吧？","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490498,"discussion_content":"生产运维也有监控的。一样的采样频率。所以这点影响是合理的。\n使用grafana+influxdb采jmeter数据是为了易于保存。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585962439,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":186016,"user_name":"Geek_f9e0e5","can_delete":false,"product_type":"c1","uid":1664331,"ip_address":"","ucode":"A0AFC5742C0FFB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIUw2n2cOLticrdgJWu5ibM1Hib58XNRt5jQwRibT27ZLvqKvsPoZDicrFmUic2GF9vtI2EjgMWVpiatwgFw/132","comment_is_top":false,"comment_ctime":1583742625,"is_pvip":false,"replies":[{"id":"71894","content":"这里发不了，微信中说吧。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1583761848,"ip_address":"","comment_id":186016,"utype":1}],"discussion_count":5,"race_medal":0,"score":"5878709921","product_id":100042501,"comment_content":"Prometheus+Grafana+Exportor，这个接口级的集成方式，能给个文档参考下吗","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486585,"discussion_content":"这里发不了，微信中说吧。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583761848,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1319355,"avatar":"https://static001.geekbang.org/account/avatar/00/14/21/bb/07070666.jpg","nickname":"二愣子不2","note":"","ucode":"82A26D1500E861","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":566129,"discussion_content":"老师，怎么加您微信","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650608862,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":486585,"ip_address":""},"score":566129,"extra":""}]},{"author":{"id":1898734,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoTYWiaDap7MJOZ94RrSTV5fwKV6TgeJ5Wqjj7DTBA9SeufjQjKk6I18cCBfh4sokSxrNibXNhsqXoA/132","nickname":"Geek_c4b352","note":"","ucode":"52E382D1E63219","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":314671,"discussion_content":"老师，这个文档能否发一份给我？怎么加微信？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603185375,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1785962,"avatar":"","nickname":"测试中的战斗机","note":"","ucode":"B0AFF7368C5072","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":213102,"discussion_content":"老师，这个文档能否发一份给我？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585051527,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1152017,"avatar":"https://static001.geekbang.org/account/avatar/00/11/94/11/d53d9c6f.jpg","nickname":"Allen","note":"","ucode":"232B5F33D68C8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1785962,"avatar":"","nickname":"测试中的战斗机","note":"","ucode":"B0AFF7368C5072","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":231517,"discussion_content":"能给发一份么","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586822328,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":213102,"ip_address":""},"score":231517,"extra":""}]}]},{"had_liked":false,"id":356692,"user_name":"樱峻小猴子","can_delete":false,"product_type":"c1","uid":2740008,"ip_address":"北京","ucode":"A464115D52BD3F","user_header":"https://static001.geekbang.org/account/avatar/00/29/cf/28/eb90fa13.jpg","comment_is_top":false,"comment_ctime":1662516117,"is_pvip":false,"replies":[{"id":"130285","content":"微信：Zee_7D","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1663808311,"ip_address":"北京","comment_id":356692,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1662516117","product_id":100042501,"comment_content":"怎么联系您 我想要实践详细一点的课程资料 您讲的偏理论","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588511,"discussion_content":"微信：Zee_7D","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663808311,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343396,"user_name":"奔跑的萝卜","can_delete":false,"product_type":"c1","uid":2981079,"ip_address":"","ucode":"CD3E1AEE7192AC","user_header":"https://static001.geekbang.org/account/avatar/00/2d/7c/d7/812442cf.jpg","comment_is_top":false,"comment_ctime":1650814867,"is_pvip":false,"replies":[{"id":"125948","content":"容量场景是有持续时间的呀。慢慢压不就有了。","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1652058975,"ip_address":"","comment_id":343396,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1650814867","product_id":100042501,"comment_content":"老师您好，请问tps的曲线图如何配置的那，我看数据库里就是一条聚会报告的数据，怎么展示tps曲线图到grafana","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571040,"discussion_content":"容量场景是有持续时间的呀。慢慢压不就有了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652058975,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343337,"user_name":"黄炳焱","can_delete":false,"product_type":"c1","uid":2981069,"ip_address":"","ucode":"E6C509718DD2D5","user_header":"https://static001.geekbang.org/account/avatar/00/2d/7c/cd/223083a6.jpg","comment_is_top":false,"comment_ctime":1650788084,"is_pvip":false,"replies":[{"id":"125949","content":"使劲刷。","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1652058995,"ip_address":"","comment_id":343337,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1650788084","product_id":100042501,"comment_content":"为啥没有画面<br>","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571041,"discussion_content":"使劲刷。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652058995,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":337809,"user_name":"梁之秋","can_delete":false,"product_type":"c1","uid":2828810,"ip_address":"","ucode":"E70732FE72976D","user_header":"","comment_is_top":false,"comment_ctime":1647074208,"is_pvip":true,"replies":[{"id":"123592","content":"用jmeter GUI跑压力会数据不准。","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1647242480,"ip_address":"","comment_id":337809,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1647074208","product_id":100042501,"comment_content":"jmeter跑压力为什么是大忌呢？有谁知道？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556185,"discussion_content":"用jmeter GUI跑压力会数据不准。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1647242480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2828810,"avatar":"","nickname":"梁之秋","note":"","ucode":"E70732FE72976D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":556249,"discussion_content":"感谢您的解答！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647263338,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":556185,"ip_address":""},"score":556249,"extra":""}]},{"author":{"id":2828810,"avatar":"","nickname":"梁之秋","note":"","ucode":"E70732FE72976D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556251,"discussion_content":"感谢百忙之中抽空解答~顺便问下，linux下的jmeter脚本是录制还是自己在windows编写的呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647263503,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312750,"user_name":"thinkers","can_delete":false,"product_type":"c1","uid":1031712,"ip_address":"","ucode":"81159393491E8D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/be/20/8f4e0810.jpg","comment_is_top":false,"comment_ctime":1631966104,"is_pvip":false,"replies":[{"id":"114822","content":"jmeter自己的dashboard呀。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1634690698,"ip_address":"","comment_id":312750,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631966104","product_id":100042501,"comment_content":"老师，你文章里面显示tps曲线用的什么插件？我找了几个都没有","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527100,"discussion_content":"jmeter自己的dashboard呀。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634690698,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":307384,"user_name":"无心","can_delete":false,"product_type":"c1","uid":1036884,"ip_address":"","ucode":"D1C3EBA4DF798E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d2/54/3fa394b4.jpg","comment_is_top":false,"comment_ctime":1629076665,"is_pvip":false,"replies":[{"id":"111328","content":"默认http错误在通常用的模板中都有的，我记得。 ","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1629117376,"ip_address":"","comment_id":307384,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1629076665","product_id":100042501,"comment_content":"如何把Jmeter其中报错(压测时 500错误，以及相应的返回内容)信息输出到Grafana监控面板呢？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525133,"discussion_content":"默认http错误在通常用的模板中都有的，我记得。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629117376,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":303557,"user_name":"^_^","can_delete":false,"product_type":"c1","uid":2679106,"ip_address":"","ucode":"FE831044DF2278","user_header":"https://static001.geekbang.org/account/avatar/00/28/e1/42/1d37aa15.jpg","comment_is_top":false,"comment_ctime":1626854538,"is_pvip":false,"replies":[{"id":"109922","content":"用1.8版本试试。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1626936184,"ip_address":"","comment_id":303557,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1626854538","product_id":100042501,"comment_content":"jemeter连接不上InfluxDB2.0.4。报错400，不知道怎么解决。百度也没有参考。","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523735,"discussion_content":"用1.8版本试试。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626936184,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":302374,"user_name":"占正龙","can_delete":false,"product_type":"c1","uid":2129608,"ip_address":"","ucode":"39B759A0182CA0","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKiaDqnfeFHqREQ0ZEkPcX0X5w5ljCGNib2icCs6S56M6q7CqBukNWKI8ADSngW4otJAsyXUG4gJhXWQ/132","comment_is_top":false,"comment_ctime":1626182412,"is_pvip":false,"replies":[{"id":"109428","content":"分析要靠的是自己的知识了。<br>请看后面的具体案例部分和第二个专栏中的大部分实战案例。 ","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1626229035,"ip_address":"","comment_id":302374,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1626182412","product_id":100042501,"comment_content":"我们在通过Prometheus在Grafana界面展示数据后，需要怎么分析呢，如果只是为了得到，cpu，内存，io等数据，通过top也可以得到，为什么需要用到Grafana？（除了可以看到过去历史的数据还有什么其他的优点）","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523281,"discussion_content":"分析要靠的是自己的知识了。\n请看后面的具体案例部分和第二个专栏中的大部分实战案例。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626229035,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":300334,"user_name":"苏爱晴👧","can_delete":false,"product_type":"c1","uid":1719068,"ip_address":"","ucode":"DB6067C3A16363","user_header":"https://static001.geekbang.org/account/avatar/00/1a/3b/1c/43af6318.jpg","comment_is_top":false,"comment_ctime":1625121482,"is_pvip":false,"replies":[{"id":"108872","content":"哪里来是啥意思？安装上不就有了吗？","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1625131568,"ip_address":"","comment_id":300334,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1625121482","product_id":100042501,"comment_content":" InfluxDB和Zabbix配置的url是哪里来的呢 ？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522712,"discussion_content":"哪里来是啥意思？安装上不就有了吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625131568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":300100,"user_name":"Daisy","can_delete":false,"product_type":"c1","uid":2597248,"ip_address":"","ucode":"D2A3270B58FE59","user_header":"https://static001.geekbang.org/account/avatar/00/27/a1/80/9801443f.jpg","comment_is_top":false,"comment_ctime":1625006314,"is_pvip":false,"replies":[{"id":"108837","content":"通常这种情况我就上监控工具了。不用命令了，有问题了再上命令。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1625050018,"ip_address":"","comment_id":300100,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1625006314","product_id":100042501,"comment_content":"老师好，想问一下，top这个监控命令应该是监控整个服务器吧，像我们公司用的docker，每个docker又部署了一个服务，我想对具体这个服务监控，top还能用吗，或者用什么命令。谢谢","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522643,"discussion_content":"通常这种情况我就上监控工具了。不用命令了，有问题了再上命令。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625050018,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":298668,"user_name":"0909","can_delete":false,"product_type":"c1","uid":1969097,"ip_address":"","ucode":"79C60A8D2B809A","user_header":"https://static001.geekbang.org/account/avatar/00/1e/0b/c9/b53037df.jpg","comment_is_top":false,"comment_ctime":1624255236,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624255236","product_id":100042501,"comment_content":"Backend Listener","like_count":0},{"had_liked":false,"id":298480,"user_name":"徐传龙","can_delete":false,"product_type":"c1","uid":1605267,"ip_address":"","ucode":"E3D027D2F66B22","user_header":"https://static001.geekbang.org/account/avatar/00/18/7e/93/c561aae7.jpg","comment_is_top":false,"comment_ctime":1624150348,"is_pvip":false,"replies":[{"id":"108286","content":"标准的错误信息是自动收集的呀。 ","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1624159278,"ip_address":"","comment_id":298480,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1624150348","product_id":100042501,"comment_content":"老师，请问下怎么用Prometheus收集Jmeter的错误信息，在公众号的一篇TCP分析里有看到可以收集，但是自己去百度没找到解决方法。","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522154,"discussion_content":"标准的错误信息是自动收集的呀。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624159278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":297947,"user_name":"piboye","can_delete":false,"product_type":"c1","uid":1066752,"ip_address":"","ucode":"7CFD8712857A85","user_header":"https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg","comment_is_top":false,"comment_ctime":1623851677,"is_pvip":true,"replies":[{"id":"108180","content":"这个工具我没用过哦。回头我学习学习。<br>多谢给我提供的工具盲点信息。<br>","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1623904788,"ip_address":"","comment_id":297947,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1623851677","product_id":100042501,"comment_content":"netflix 的 PCP 工具怎么样？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521974,"discussion_content":"这个工具我没用过哦。回头我学习学习。\n多谢给我提供的工具盲点信息。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623904788,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":294252,"user_name":"Geek_stonechen","can_delete":false,"product_type":"c1","uid":1605610,"ip_address":"","ucode":"FCAA051BBFB829","user_header":"https://static001.geekbang.org/account/avatar/00/18/7f/ea/9eea49a4.jpg","comment_is_top":false,"comment_ctime":1621850815,"is_pvip":false,"replies":[{"id":"106868","content":"粒度不一样吧？","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1622004328,"ip_address":"","comment_id":294252,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1621850815","product_id":100042501,"comment_content":"老师，我这边有出现jmeter聚合报告里面的tps ，rt等数据跟granafa上面展示的数据不一致的问题，请问这种是什么原因导致的。比如聚合报告里面的tps是25，但是granafa上面展示的是18","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520572,"discussion_content":"粒度不一样吧？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622004328,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1605610,"avatar":"https://static001.geekbang.org/account/avatar/00/18/7f/ea/9eea49a4.jpg","nickname":"Geek_stonechen","note":"","ucode":"FCAA051BBFB829","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376365,"discussion_content":"粒度不一样是什么意思？按道理如果数据没有丢失的话jmeter 统计的结果跟granafa展示的结果应该是要一致的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622097565,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282706,"user_name":"李大.shu","can_delete":false,"product_type":"c1","uid":1183657,"ip_address":"","ucode":"54EA36C78BB33A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0f/a9/d55838b9.jpg","comment_is_top":false,"comment_ctime":1615369225,"is_pvip":false,"replies":[{"id":"103239","content":"配置上要简单一些。效果也差不多。<br>只是生态圈没那么大。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1616422451,"ip_address":"","comment_id":282706,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1615369225","product_id":100042501,"comment_content":"老师我用的是Grafana+telegraf+influxdb，感觉要简单许多。","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516816,"discussion_content":"配置上要简单一些。效果也差不多。\n只是生态圈没那么大。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616422451,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":260738,"user_name":"SeaYang","can_delete":false,"product_type":"c1","uid":1393840,"ip_address":"","ucode":"F44622A44CE8B9","user_header":"https://static001.geekbang.org/account/avatar/00/15/44/b0/c196c056.jpg","comment_is_top":false,"comment_ctime":1605091885,"is_pvip":false,"replies":[{"id":"94721","content":"这是说backend listener有问题？什么版本？回头我观察下。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1605144576,"ip_address":"","comment_id":260738,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1605091885","product_id":100042501,"comment_content":"记录一个遇到的问题，假如Jmeter往Influxdb抛数据的间隔为1秒，若启动较多台压力机（例如20台），每台压力机的的application字段设置为一样，理论上每秒钟将会抛20次数据（每台抛一次），但实际上多数时候会发现总会少几次，看上去像是有几台压力机没有抛数据一样，排查很久没有进展，后面将每台压力机的application设为不同的值，只是会有相同的一个前缀，然后通过这个前缀去查询总的TPS","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509276,"discussion_content":"这是说backend listener有问题？什么版本？回头我观察下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605144576,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243528,"user_name":"童话","can_delete":false,"product_type":"c1","uid":1790517,"ip_address":"","ucode":"663286537E4EBA","user_header":"https://static001.geekbang.org/account/avatar/00/1b/52/35/b8f75b6a.jpg","comment_is_top":false,"comment_ctime":1598170794,"is_pvip":false,"replies":[{"id":"93974","content":"这.....，我就得看具体问题了。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1604283683,"ip_address":"","comment_id":243528,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1598170794","product_id":100042501,"comment_content":"jmeter+influxDB+grafana目前用最新的版本，对应的表有生成，但是图表没有数据，会什么原因没有配置对？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504317,"discussion_content":"这.....，我就得看具体问题了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604283683,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240167,"user_name":"suke","can_delete":false,"product_type":"c1","uid":1007753,"ip_address":"","ucode":"C0287C31A4F45B","user_header":"","comment_is_top":false,"comment_ctime":1596775654,"is_pvip":false,"replies":[{"id":"93984","content":"对的。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1604283966,"ip_address":"","comment_id":240167,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1596775654","product_id":100042501,"comment_content":"这种方式就可以解决jmeter对长时间测试生成报告失败的问题了","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503360,"discussion_content":"对的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604283966,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214186,"user_name":"🏹","can_delete":false,"product_type":"c1","uid":1167368,"ip_address":"","ucode":"7A0F883B0BC6F0","user_header":"https://static001.geekbang.org/account/avatar/00/11/d0/08/5a1576ed.jpg","comment_is_top":false,"comment_ctime":1588672628,"is_pvip":false,"replies":[{"id":"81980","content":"看起来是版本不对。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1590748091,"ip_address":"","comment_id":214186,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1588672628","product_id":100042501,"comment_content":"使用prometheus+exports+grafana搭建监控时，在添加数据源后，在grafana显示如下错误信息：<br>“Templating init failed Cannot read property &#39;result&#39; of undefined”<br>找了好多资料有点搞不定，希望能有机会或者有群之类的和其他同学探讨一下","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493979,"discussion_content":"看起来是版本不对。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590748091,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1082503,"avatar":"https://static001.geekbang.org/account/avatar/00/10/84/87/e07dd10f.jpg","nickname":"GO ON","note":"","ucode":"60C1C60FD54E58","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":266993,"discussion_content":"grafana版本和你下载的模板不一样，升级grafana应该就可以了，昨天刚弄过这个问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589588118,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":211534,"user_name":"罗佳","can_delete":false,"product_type":"c1","uid":1978095,"ip_address":"","ucode":"8BDC12EA966B7D","user_header":"","comment_is_top":false,"comment_ctime":1587979334,"is_pvip":false,"replies":[{"id":"81994","content":"数据库中有数据吗？","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1590751235,"ip_address":"","comment_id":211534,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1587979334","product_id":100042501,"comment_content":"老师请问一下：<br>grafana 的dashboard中request配置了query字段： jmeter.all.a.count<br>throughput只有默认的SELECT last(&quot;count&quot;) &#47; $send_interval FROM &quot;$measurement_name&quot; WHERE (&quot;transaction&quot; =~ &#47;^$transaction$&#47; AND &quot;statut&quot; = &#39;ok&#39;) AND $timeFilter GROUP BY time($__interval)结果就没有数据，怎样才会出现TPS曲线呢","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493287,"discussion_content":"数据库中有数据吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590751235,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":201183,"user_name":"24K纯屌丝","can_delete":false,"product_type":"c1","uid":1173739,"ip_address":"","ucode":"5B623463D1686B","user_header":"https://static001.geekbang.org/account/avatar/00/11/e8/eb/64db26ee.jpg","comment_is_top":false,"comment_ctime":1585729115,"is_pvip":false,"replies":[{"id":"75344","content":"这两个是不同维度。为什么要以哪个为准呢？<br>他们只是在描述某个点。<br>要是说准的话，我都是看趋势为准。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1585782010,"ip_address":"","comment_id":201183,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1585729115","product_id":100042501,"comment_content":"jmeter+influxdb+grafana<br>TPS统计<br>事务分组统计<br>SELECT mean(&quot;count&quot;) &#47; $send_interval FROM &quot;$measurement_name&quot; WHERE (&quot;application&quot; =~ &#47;^$application$&#47;) AND $timeFilter GROUP BY &quot;transaction&quot;, time($__interval) fill(null)<br><br>单个事务统计<br>SELECT last(&quot;count&quot;) &#47; $send_interval FROM &quot;$measurement_name&quot; WHERE (&quot;transaction&quot; =~ &#47;^$transaction$&#47; AND &quot;statut&quot; = &#39;ok&#39;) AND $timeFilter GROUP BY time($__interval)<br><br>我有给疑问是 用last 为准 还是 mean。<br>","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490259,"discussion_content":"这两个是不同维度。为什么要以哪个为准呢？\n他们只是在描述某个点。\n要是说准的话，我都是看趋势为准。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585782010,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":189336,"user_name":"董飞","can_delete":false,"product_type":"c1","uid":1693828,"ip_address":"","ucode":"4A4A13C4A971E3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/6Be8vjNk03LEXMl52vONOQvdKTL1MWPR6OsAGEDsHIZXw9FibW8c4YtNL6HAmB8wRkDNIEx15xawJ9PWLW4y1UA/132","comment_is_top":false,"comment_ctime":1584501485,"is_pvip":false,"replies":[{"id":"73011","content":"写什么呢？","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1584512979,"ip_address":"","comment_id":189336,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1584501485","product_id":100042501,"comment_content":"老师，您可以再多开几个专栏吗？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487673,"discussion_content":"写什么呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584512979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180809,"user_name":"麦兜布熊","can_delete":false,"product_type":"c1","uid":1118352,"ip_address":"","ucode":"F46E3571FAE9FE","user_header":"https://static001.geekbang.org/account/avatar/00/11/10/90/5cb92311.jpg","comment_is_top":false,"comment_ctime":1582419564,"is_pvip":false,"replies":[{"id":"70183","content":"要实现什么监控目的呢？","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1582434033,"ip_address":"","comment_id":180809,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1582419564","product_id":100042501,"comment_content":"使用过一段时间influxdb，感觉这个DB稳定性不太好，有时死机，有时数据展示乱的，不知道是不是我配置或者误操作的问题？经常要靠重启才能解决，请问有没有替换方案？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484802,"discussion_content":"要实现什么监控目的呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582434033,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1118352,"avatar":"https://static001.geekbang.org/account/avatar/00/11/10/90/5cb92311.jpg","nickname":"麦兜布熊","note":"","ucode":"F46E3571FAE9FE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":183732,"discussion_content":"不会用极客的评论功能，不知道这样回复高老师能不能收到。目的是给整个性能测试团队（12人）搭建一个公共的grafana+influx influxdb的展示页面。每个人执行自己负责的项目时都能实时看结果。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582511520,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":179487,"user_name":"蓝山","can_delete":false,"product_type":"c1","uid":1170649,"ip_address":"","ucode":"53B9026C0D963A","user_header":"https://static001.geekbang.org/account/avatar/00/11/dc/d9/7ccb233c.jpg","comment_is_top":false,"comment_ctime":1582014073,"is_pvip":false,"replies":[{"id":"69703","content":"grafana不存数据，看的时候从influxdb里拉过来。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1582019950,"ip_address":"","comment_id":179487,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1582014073","product_id":100042501,"comment_content":"JMeter 是如何把数据推送到 Grafana 中呢？<br>JMeter先把运行的统计结果都加到 metric 中，再使用 InfluxdbMetricsSender 发送到 Influxdb 中去；<br>Grafana 配置一个 InfluxDB 数据源，然后添加一个 JMeter dashboard，Grafana 就可以显示 JMeter 的统计数据了。<br><br>同样是监控操作系统的计数器，监控平台中的数据和监控命令中的数据有什么区别？<br>数据本身没有区别，相同的数据值都一样，只是查看方式不同而已。<br><br>疑问：Grafana 添加一个 JMeter dashboard，没太明白其中原理。","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484279,"discussion_content":"grafana不存数据，看的时候从influxdb里拉过来。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582019950,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177173,"user_name":"杜艳","can_delete":false,"product_type":"c1","uid":1168516,"ip_address":"","ucode":"8D46A8CF33E9C7","user_header":"https://static001.geekbang.org/account/avatar/00/11/d4/84/7f584cb2.jpg","comment_is_top":false,"comment_ctime":1581314875,"is_pvip":false,"replies":[{"id":"68804","content":"我前面好像在评论中写过微信号。再提供一次：Zee_7D","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1581322833,"ip_address":"","comment_id":177173,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1581314875","product_id":100042501,"comment_content":"怎么联系您提供详细的安装手册呢","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483330,"discussion_content":"我前面好像在评论中写过微信号。再提供一次：Zee_7D","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581322833,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1988128,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/56/20/95858446.jpg","nickname":"爱久见人心","note":"","ucode":"15494C5236C6D1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382808,"discussion_content":"启动jemter，日志报错写入失Error writing to Graphite: http://localhost:8086/write?db=jmeter，这是什么原因\n1，配置文件已经修改，更新确认过\n2，用配置文件启动的\n3，influx中jmeter数据库也已经创建过\n4，grafana已经配置过数据源\n5，jmeter的backend listener配置没问题\n（grafana-8.0.4，influxdb-1.7.7-1）\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625729266,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}