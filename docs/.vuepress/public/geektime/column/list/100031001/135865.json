{"id":135865,"title":"34 | å¦‚ä½•ç†è§£Flutterçš„ç¼–è¯‘æ¨¡å¼ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é™ˆèˆªã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬æ¥èŠèŠFlutterçš„ç¼–è¯‘æ¨¡å¼å§ã€‚</p><p>åœ¨å¼€å‘ç§»åŠ¨åº”ç”¨ç¨‹åºæ—¶ï¼Œä¸€ä¸ªAppçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬å¼€å‘ã€æµ‹è¯•å’Œä¸Šçº¿3ä¸ªé˜¶æ®µã€‚åœ¨æ¯ä¸ªé˜¶æ®µï¼Œå¼€å‘è€…çš„å…³æ³¨ç‚¹éƒ½ä¸ä¸€æ ·ã€‚</p><p>æ¯”å¦‚ï¼Œåœ¨å¼€å‘é˜¶æ®µï¼Œæˆ‘ä»¬å¸Œæœ›è°ƒè¯•å°½å¯èƒ½æ–¹ä¾¿ã€å¿«é€Ÿï¼Œå°½å¯èƒ½å¤šåœ°æä¾›é”™è¯¯ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼›åœ¨æµ‹è¯•é˜¶æ®µï¼Œæˆ‘ä»¬å¸Œæœ›è¦†ç›–èŒƒå›´å°½å¯èƒ½å…¨é¢ï¼Œèƒ½å¤Ÿå…·å¤‡ä¸åŒé…ç½®åˆ‡æ¢èƒ½åŠ›ï¼Œå¯ä»¥æµ‹è¯•å’ŒéªŒè¯è¿˜æ²¡æœ‰å¯¹å¤–å‘å¸ƒçš„æ–°åŠŸèƒ½ï¼›è€Œåœ¨å‘å¸ƒé˜¶æ®µï¼Œæˆ‘ä»¬åˆ™å¸Œæœ›èƒ½å¤Ÿå»é™¤ä¸€åˆ‡æµ‹è¯•ä»£ç ï¼Œç²¾ç®€è°ƒè¯•ä¿¡æ¯ï¼Œä½¿è¿è¡Œé€Ÿåº¦å°½å¯èƒ½å¿«ï¼Œä»£ç è¶³å¤Ÿå®‰å…¨ã€‚</p><p>è¿™å°±è¦æ±‚å¼€å‘è€…åœ¨æ„å»ºç§»åŠ¨åº”ç”¨æ—¶ï¼Œä¸ä»…è¦åœ¨å·¥ç¨‹å†…æå‰å‡†å¤‡å¤šä»½é…ç½®ç¯å¢ƒï¼Œè¿˜è¦åˆ©ç”¨ç¼–è¯‘å™¨æä¾›çš„ç¼–è¯‘é€‰é¡¹ï¼Œæ‰“åŒ…å‡ºç¬¦åˆä¸åŒé˜¶æ®µä¼˜åŒ–éœ€æ±‚çš„Appã€‚</p><p>å¯¹äºFlutteræ¥è¯´ï¼Œå®ƒæ—¢æ”¯æŒå¸¸è§çš„Debugã€Releaseç­‰å·¥ç¨‹ç‰©ç†å±‚é¢çš„ç¼–è¯‘æ¨¡å¼ï¼Œä¹Ÿæ”¯æŒåœ¨å·¥ç¨‹å†…æä¾›å¤šç§é…ç½®ç¯å¢ƒå…¥å£ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥å­¦ä¹ ä¸€ä¸‹Flutteræä¾›çš„ç¼–è¯‘æ¨¡å¼ï¼Œä»¥åŠå¦‚ä½•åœ¨Appä¸­å¼•ç”¨å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒï¼Œä½¿å¾—æˆ‘ä»¬åœ¨ä¸ç ´åä»»ä½•ç”Ÿäº§ç¯å¢ƒä»£ç çš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿæµ‹è¯•å¤„äºå¼€å‘æœŸçš„æ–°åŠŸèƒ½ã€‚</p><h2>Flutterçš„ç¼–è¯‘æ¨¡å¼</h2><p>Flutteræ”¯æŒ3ç§è¿è¡Œæ¨¡å¼ï¼ŒåŒ…æ‹¬Debugã€Releaseå’ŒProfileã€‚åœ¨ç¼–è¯‘æ—¶ï¼Œè¿™ä¸‰ç§æ¨¡å¼æ˜¯å®Œå…¨ç‹¬ç«‹çš„ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹è¿™3ç§æ¨¡å¼çš„å…·ä½“å«ä¹‰å§ã€‚</p><!-- [[[read_end]]] --><ul>\n<li>Debugæ¨¡å¼å¯¹åº”Dartçš„JITæ¨¡å¼ï¼Œå¯ä»¥åœ¨çœŸæœºå’Œæ¨¡æ‹Ÿå™¨ä¸ŠåŒæ—¶è¿è¡Œã€‚è¯¥æ¨¡å¼ä¼šæ‰“å¼€æ‰€æœ‰çš„æ–­è¨€ï¼ˆassertï¼‰ï¼Œä»¥åŠæ‰€æœ‰çš„è°ƒè¯•ä¿¡æ¯ã€æœåŠ¡æ‰©å±•å’Œè°ƒè¯•è¾…åŠ©ï¼ˆæ¯”å¦‚Observatoryï¼‰ã€‚æ­¤å¤–ï¼Œè¯¥æ¨¡å¼ä¸ºå¿«é€Ÿå¼€å‘å’Œè¿è¡Œåšäº†ä¼˜åŒ–ï¼Œæ”¯æŒäºšç§’çº§æœ‰çŠ¶æ€çš„Hot reloadï¼ˆçƒ­é‡è½½ï¼‰ï¼Œä½†å¹¶æ²¡æœ‰ä¼˜åŒ–ä»£ç æ‰§è¡Œé€Ÿåº¦ã€äºŒè¿›åˆ¶åŒ…å¤§å°å’Œéƒ¨ç½²ã€‚flutter run --debugå‘½ä»¤ï¼Œå°±æ˜¯ä»¥è¿™ç§æ¨¡å¼è¿è¡Œçš„ã€‚</li>\n<li>Releaseæ¨¡å¼å¯¹åº”Dartçš„AOTæ¨¡å¼ï¼Œåªèƒ½åœ¨çœŸæœºä¸Šè¿è¡Œï¼Œä¸èƒ½åœ¨æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œï¼Œå…¶ç¼–è¯‘ç›®æ ‡ä¸ºæœ€ç»ˆçš„çº¿ä¸Šå‘å¸ƒï¼Œç»™æœ€ç»ˆçš„ç”¨æˆ·ä½¿ç”¨ã€‚è¯¥æ¨¡å¼ä¼šå…³é—­æ‰€æœ‰çš„æ–­è¨€ï¼Œä»¥åŠå°½å¯èƒ½å¤šçš„è°ƒè¯•ä¿¡æ¯ã€æœåŠ¡æ‰©å±•å’Œè°ƒè¯•è¾…åŠ©ã€‚æ­¤å¤–ï¼Œè¯¥æ¨¡å¼ä¼˜åŒ–äº†åº”ç”¨å¿«é€Ÿå¯åŠ¨ã€ä»£ç å¿«é€Ÿæ‰§è¡Œï¼Œä»¥åŠäºŒçº§åˆ¶åŒ…å¤§å°ï¼Œå› æ­¤ç¼–è¯‘æ—¶é—´è¾ƒé•¿ã€‚flutter run --releaseå‘½ä»¤ï¼Œå°±æ˜¯ä»¥è¿™ç§æ¨¡å¼è¿è¡Œçš„ã€‚</li>\n<li>Profileæ¨¡å¼ï¼ŒåŸºæœ¬ä¸Releaseæ¨¡å¼ä¸€è‡´ï¼Œåªæ˜¯å¤šäº†å¯¹Profileæ¨¡å¼çš„æœåŠ¡æ‰©å±•çš„æ”¯æŒï¼ŒåŒ…æ‹¬æ”¯æŒè·Ÿè¸ªï¼Œä»¥åŠä¸€äº›ä¸ºäº†æœ€ä½é™åº¦æ”¯æŒæ‰€éœ€è¦çš„ä¾èµ–ï¼ˆæ¯”å¦‚ï¼Œå¯ä»¥è¿æ¥Observatoryåˆ°è¿›ç¨‹ï¼‰ã€‚è¯¥æ¨¡å¼ç”¨äºåˆ†æçœŸå®è®¾å¤‡å®é™…è¿è¡Œæ€§èƒ½ã€‚flutter run --profileå‘½ä»¤ï¼Œå°±æ˜¯ä»¥è¿™ç§æ¨¡å¼è¿è¡Œçš„ã€‚</li>\n</ul><p>ç”±äºProfileä¸Releaseåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸Šå‡ ä¹æ— å·®å¼‚ï¼Œå› æ­¤æˆ‘ä»¬ä»Šå¤©åªè®¨è®ºDebugå’ŒReleaseæ¨¡å¼ã€‚</p><p>åœ¨å¼€å‘åº”ç”¨æ—¶ï¼Œä¸ºäº†ä¾¿äºå¿«é€Ÿå‘ç°é—®é¢˜ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šåœ¨è¿è¡Œæ—¶è¯†åˆ«å½“å‰çš„ç¼–è¯‘æ¨¡å¼ï¼Œå»æ”¹å˜ä»£ç çš„éƒ¨åˆ†æ‰§è¡Œè¡Œä¸ºï¼šåœ¨Debugæ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬ä¼šæ‰“å°è¯¦ç»†çš„æ—¥å¿—ï¼Œè°ƒç”¨å¼€å‘ç¯å¢ƒæ¥å£ï¼›è€Œåœ¨Releaseæ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬ä¼šåªè®°å½•æå°‘çš„æ—¥å¿—ï¼Œè°ƒç”¨ç”Ÿäº§ç¯å¢ƒæ¥å£ã€‚</p><p>åœ¨è¿è¡Œæ—¶è¯†åˆ«åº”ç”¨çš„ç¼–è¯‘æ¨¡å¼ï¼Œæœ‰ä¸¤ç§è§£å†³åŠæ³•ï¼š</p><ul>\n<li>é€šè¿‡æ–­è¨€è¯†åˆ«ï¼›</li>\n<li>é€šè¿‡Dart VMæ‰€æä¾›çš„ç¼–è¯‘å¸¸æ•°è¯†åˆ«ã€‚</li>\n</ul><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹<strong>å¦‚ä½•é€šè¿‡æ–­è¨€è¯†åˆ«åº”ç”¨çš„ç¼–è¯‘æ¨¡å¼</strong>ã€‚</p><p>é€šè¿‡Debugä¸Releaseæ¨¡å¼çš„ä»‹ç»ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºï¼ŒReleaseä¸Debugæ¨¡å¼çš„ä¸€ä¸ªé‡è¦åŒºåˆ«å°±æ˜¯ï¼ŒReleaseæ¨¡å¼å…³é—­äº†æ‰€æœ‰çš„æ–­è¨€ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©äºæ–­è¨€ï¼Œå†™å‡ºåªåœ¨Debugæ¨¡å¼ä¸‹ç”Ÿæ•ˆçš„ä»£ç ã€‚</p><p>å¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨æ–­è¨€é‡Œä¼ å…¥äº†ä¸€ä¸ªå§‹ç»ˆè¿”å›trueçš„åŒ¿åå‡½æ•°æ‰§è¡Œç»“æœï¼Œè¿™ä¸ªåŒ¿åå‡½æ•°çš„å‡½æ•°ä½“åªä¼šåœ¨Debugæ¨¡å¼ä¸‹ç”Ÿæ•ˆï¼š</p><pre><code>assert(() {\n  //Do sth for debug\n  return true;\n}());\n</code></pre><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒåŒ¿åå‡½æ•°å£°æ˜è°ƒç”¨ç»“æŸæ—¶è¿½åŠ äº†å°æ‹¬å·ï¼ˆï¼‰ã€‚ è¿™æ˜¯å› ä¸ºæ–­è¨€åªèƒ½æ£€æŸ¥å¸ƒå°”å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»ä½¿ç”¨æ‹¬å·å¼ºåˆ¶æ‰§è¡Œè¿™ä¸ªå§‹ç»ˆè¿”å›trueçš„åŒ¿åå‡½æ•°ï¼Œä»¥ç¡®ä¿åŒ¿åå‡½æ•°ä½“çš„ä»£ç å¯ä»¥æ‰§è¡Œã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†çœ‹çœ‹<strong>å¦‚ä½•é€šè¿‡ç¼–è¯‘å¸¸æ•°è¯†åˆ«åº”ç”¨çš„ç¼–è¯‘æ¨¡å¼</strong>ã€‚</p><p>å¦‚æœè¯´é€šè¿‡æ–­è¨€åªèƒ½å†™å‡ºåœ¨Debugæ¨¡å¼ä¸‹è¿è¡Œçš„ä»£ç ï¼Œè€Œé€šè¿‡Dartæä¾›çš„ç¼–è¯‘å¸¸æ•°ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å†™å‡ºåªåœ¨Releaseæ¨¡å¼ä¸‹ç”Ÿæ•ˆçš„ä»£ç ã€‚Dartæä¾›äº†ä¸€ä¸ªå¸ƒå°”å‹çš„å¸¸é‡kReleaseModeï¼Œç”¨äºåå‘æŒ‡ç¤ºå½“å‰Appçš„ç¼–è¯‘æ¨¡å¼ã€‚</p><p>å¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ‘ä»¬é€šè¿‡åˆ¤æ–­è¿™ä¸ªå¸¸é‡ï¼Œå¯ä»¥å‡†ç¡®åœ°è¯†åˆ«å‡ºå½“å‰çš„ç¼–è¯‘æ¨¡å¼ï¼š</p><pre><code>if(kReleaseMode){\n  //Do sth for release \n} else {\n  //Do sth for debug\n}\n</code></pre><h2>åˆ†ç¦»é…ç½®ç¯å¢ƒ</h2><p>é€šè¿‡æ–­è¨€å’ŒkReleaseModeå¸¸é‡ï¼Œæˆ‘ä»¬èƒ½å¤Ÿè¯†åˆ«å‡ºå½“å‰Appçš„ç¼–è¯‘ç¯å¢ƒï¼Œä»è€Œå¯ä»¥åœ¨è¿è¡Œæ—¶å¯¹æŸä¸ªä»£ç åŠŸèƒ½è¿›è¡Œå±€éƒ¨å¾®è°ƒã€‚è€Œå¦‚æœæˆ‘ä»¬æƒ³åœ¨æ•´ä¸ªåº”ç”¨å±‚é¢ï¼Œä¸ºä¸åŒçš„è¿è¡Œç¯å¢ƒæä¾›æ›´ä¸ºç»Ÿä¸€çš„é…ç½®ï¼ˆæ¯”å¦‚ï¼Œå¯¹äºåŒä¸€ä¸ªæ¥å£è°ƒç”¨è¡Œä¸ºï¼Œå¼€å‘ç¯å¢ƒä¼šä½¿ç”¨dev.example.comåŸŸåï¼Œè€Œç”Ÿäº§ç¯å¢ƒä¼šä½¿ç”¨api.example.comåŸŸåï¼‰ï¼Œåˆ™éœ€è¦åœ¨åº”ç”¨å¯åŠ¨å…¥å£æä¾›å¯é…ç½®çš„åˆå§‹åŒ–æ–¹å¼ï¼Œæ ¹æ®ç‰¹å®šéœ€æ±‚ä¸ºåº”ç”¨æ³¨å…¥é…ç½®ç¯å¢ƒã€‚</p><p>åœ¨Flutteræ„å»ºAppæ—¶ï¼Œä¸ºåº”ç”¨ç¨‹åºæä¾›ä¸åŒçš„é…ç½®ç¯å¢ƒï¼Œæ€»ä½“å¯ä»¥åˆ†ä¸ºæŠ½è±¡é…ç½®ã€é…ç½®å¤šå…¥å£ã€è¯»é…ç½®å’Œç¼–è¯‘æ‰“åŒ…4ä¸ªæ­¥éª¤ï¼š</p><ol>\n<li>æŠ½è±¡å‡ºåº”ç”¨ç¨‹åºçš„å¯é…ç½®éƒ¨åˆ†ï¼Œå¹¶ä½¿ç”¨InheritedWidgetå¯¹å…¶è¿›è¡Œå°è£…ï¼›</li>\n<li>å°†ä¸åŒçš„é…ç½®ç¯å¢ƒæ‹†è§£ä¸ºå¤šä¸ªåº”ç”¨ç¨‹åºå…¥å£ï¼ˆæ¯”å¦‚ï¼Œå¼€å‘ç¯å¢ƒä¸ºmain-dev.dartã€ç”Ÿäº§ç¯å¢ƒä¸ºmain.dartï¼‰ï¼ŒæŠŠåº”ç”¨ç¨‹åºçš„å¯é…ç½®éƒ¨åˆ†å›ºåŒ–åœ¨å„ä¸ªå…¥å£å¤„ï¼›</li>\n<li>åœ¨è¿è¡ŒæœŸï¼Œé€šè¿‡InheritedWidgetæä¾›çš„æ•°æ®å…±äº«æœºåˆ¶ï¼Œå°†é…ç½®éƒ¨åˆ†åº”ç”¨åˆ°å…¶å­Widgetå¯¹åº”çš„åŠŸèƒ½ä¸­ï¼›</li>\n<li>ä½¿ç”¨Flutteræä¾›çš„ç¼–è¯‘æ‰“åŒ…é€‰é¡¹ï¼Œæ„å»ºå‡ºä¸åŒé…ç½®ç¯å¢ƒçš„å®‰è£…åŒ…ã€‚</li>\n</ol><p><strong>æ¥ä¸‹æ¥ï¼Œæˆ‘å°†ä¾æ¬¡ä¸ºä½ ä»‹ç»å…·ä½“çš„å®ç°æ­¥éª¤ã€‚</strong></p><p>åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä¼šæŠŠåº”ç”¨ç¨‹åºè°ƒç”¨çš„æ¥å£å’Œæ ‡é¢˜è¿›è¡ŒåŒºåˆ†å®ç°ï¼Œå³å¼€å‘ç¯å¢ƒä½¿ç”¨dev.example.comåŸŸåï¼Œåº”ç”¨ä¸»é¡µæ ‡é¢˜ä¸ºdevï¼›è€Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨api.example.comåŸŸåï¼Œä¸»é¡µæ ‡é¢˜ä¸ºexampleã€‚</p><p>é¦–å…ˆæ˜¯<strong>é…ç½®æŠ½è±¡</strong>ã€‚æ ¹æ®éœ€æ±‚å¯ä»¥çœ‹å‡ºï¼Œåº”ç”¨ç¨‹åºä¸­æœ‰ä¸¤ä¸ªéœ€è¦é…ç½®çš„éƒ¨åˆ†ï¼Œå³æ¥å£apiBaseUrlå’Œæ ‡é¢˜appNameï¼Œå› æ­¤æˆ‘å®šä¹‰äº†ä¸€ä¸ªç»§æ‰¿è‡ªInheritedWidgetçš„ç±»AppConfigï¼Œå¯¹è¿™ä¸¤ä¸ªé…ç½®è¿›è¡Œå°è£…ï¼š</p><pre><code>class AppConfig extends InheritedWidget {\n  AppConfig({\n    @required this.appName,\n    @required this.apiBaseUrl,\n    @required Widget child,\n  }) : super(child: child);\n\n  final String appName;//ä¸»é¡µæ ‡é¢˜\n  final String apiBaseUrl;//æ¥å£åŸŸå\n\n  //æ–¹ä¾¿å…¶å­Widgetåœ¨Widgetæ ‘ä¸­æ‰¾åˆ°å®ƒ\n  static AppConfig of(BuildContext context) {\n    return context.inheritFromWidgetOfExactType(AppConfig);\n  }\n  \n  //åˆ¤æ–­æ˜¯å¦éœ€è¦å­Widgetæ›´æ–°ã€‚ç”±äºæ˜¯åº”ç”¨å…¥å£ï¼Œæ— éœ€æ›´æ–°\n  @override\n  bool updateShouldNotify(InheritedWidget oldWidget) =&gt; false;\n}\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦<strong>ä¸ºä¸åŒçš„ç¯å¢ƒåˆ›å»ºä¸åŒçš„åº”ç”¨å…¥å£</strong>ã€‚</p><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç”±äºåªæœ‰ä¸¤ä¸ªç¯å¢ƒï¼Œå³å¼€å‘ç¯å¢ƒä¸ç”Ÿäº§ç¯å¢ƒï¼Œå› æ­¤æˆ‘ä»¬å°†æ–‡ä»¶åˆ†åˆ«å‘½åä¸ºmain_dev.dartå’Œmain.dartã€‚åœ¨è¿™ä¸¤ä¸ªæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ä¸åŒçš„é…ç½®æ•°æ®æ¥å¯¹AppConfigè¿›è¡Œåˆå§‹åŒ–ï¼ŒåŒæ—¶æŠŠåº”ç”¨ç¨‹åºå®ä¾‹MyAppä½œä¸ºå…¶å­Widgetï¼Œè¿™æ ·æ•´ä¸ªåº”ç”¨å†…éƒ½å¯ä»¥è·å–åˆ°é…ç½®æ•°æ®ï¼š</p><pre><code>//main_dev.dart\nvoid main() {\n  var configuredApp = AppConfig(\n    appName: 'dev',//ä¸»é¡µæ ‡é¢˜\n    apiBaseUrl: 'http://dev.example.com/',//æ¥å£åŸŸå\n    child: MyApp(),\n  );\n  runApp(configuredApp);//å¯åŠ¨åº”ç”¨å…¥å£\n}\n\n//main.dart\nvoid main() {\n  var configuredApp = AppConfig(\n    appName: 'example',//ä¸»é¡µæ ‡é¢˜\n    apiBaseUrl: 'http://api.example.com/',//æ¥å£åŸŸå\n    child: MyApp(),\n  );\n  runApp(configuredApp);//å¯åŠ¨åº”ç”¨å…¥å£\n}\n</code></pre><p>å®Œæˆé…ç½®ç¯å¢ƒçš„æ³¨å…¥ä¹‹åï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥<strong>åœ¨åº”ç”¨å†…è·å–é…ç½®æ•°æ®</strong>ï¼Œæ¥å®ç°å®šåˆ¶åŒ–çš„åŠŸèƒ½äº†ã€‚ç”±äºAppConfigæ˜¯æ•´ä¸ªåº”ç”¨ç¨‹åºçš„æ ¹èŠ‚ç‚¹ï¼Œå› æ­¤æˆ‘å¯ä»¥é€šè¿‡è°ƒç”¨AppConfig.ofæ–¹æ³•ï¼Œæ¥è·å–åˆ°ç›¸å…³çš„æ•°æ®é…ç½®ã€‚</p><p>åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘åˆ†åˆ«è·å–åˆ°äº†åº”ç”¨ä¸»é¡µçš„æ ‡é¢˜ï¼Œä»¥åŠæ¥å£åŸŸåï¼Œå¹¶æ˜¾ç¤ºäº†å‡ºæ¥ï¼š</p><pre><code>class MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    var config = AppConfig.of(context);//è·å–åº”ç”¨é…ç½®\n    return MaterialApp(\n      title: config.appName,//åº”ç”¨ä¸»é¡µæ ‡é¢˜\n      home: MyHomePage(),\n    );\n  }\n}\n\nclass MyHomePage extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    var config = AppConfig.of(context);//è·å–åº”ç”¨é…ç½®\n    return Scaffold(\n      appBar: AppBar(\n        title: Text(config.appName),//åº”ç”¨ä¸»é¡µæ ‡é¢˜\n      ),\n      body:  Center(\n        child: Text('API host: ${config.apiBaseUrl}'),//æ¥å£åŸŸå\n      ),\n    );\n  }\n}\n</code></pre><p>ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†åˆ†ç¦»é…ç½®ç¯å¢ƒçš„ä»£ç éƒ¨åˆ†ã€‚æœ€åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Flutteræä¾›çš„ç¼–è¯‘é€‰é¡¹ï¼Œæ¥<strong>æ„å»ºå‡ºä¸åŒé…ç½®çš„å®‰è£…åŒ…</strong>äº†ã€‚</p><p>å¦‚æœæƒ³è¦åœ¨æ¨¡æ‹Ÿå™¨æˆ–çœŸæœºä¸Šè¿è¡Œè¿™æ®µä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨flutter runå‘½ä»¤åé¢ï¼Œè¿½åŠ â€“targetæˆ–-tå‚æ•°ï¼Œæ¥æŒ‡å®šåº”ç”¨ç¨‹åºåˆå§‹åŒ–å…¥å£ï¼š</p><pre><code>//è¿è¡Œå¼€å‘ç¯å¢ƒåº”ç”¨ç¨‹åº\nflutter run -t lib/main_dev.dart \n\n//è¿è¡Œç”Ÿäº§ç¯å¢ƒåº”ç”¨ç¨‹åº\nflutter run -t lib/main.dart\n</code></pre><p>å¦‚æœæˆ‘ä»¬æƒ³åœ¨Android Studioä¸Šä¸ºåº”ç”¨ç¨‹åºåˆ›å»ºä¸åŒçš„å¯åŠ¨é…ç½®ï¼Œåˆ™å¯ä»¥<strong>é€šè¿‡Flutteræ’ä»¶ä¸ºmain_dev.dartå¢åŠ å¯åŠ¨å…¥å£</strong>ã€‚</p><p>é¦–å…ˆï¼Œç‚¹å‡»å·¥å…·æ ä¸Šçš„Config Selectorï¼Œé€‰æ‹©Edit Configurationsè¿›å…¥ç¼–è¾‘åº”ç”¨ç¨‹åºå¯åŠ¨é€‰é¡¹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/ab/4e/ab9617b62b6fd66ac2a0cc949aeb874e.png?wh=360*164\" alt=\"\"></p><center><span class=\"reference\">å›¾1 Config Selectoræ–°å¢å…¥å£</span></center><p>ç„¶åï¼Œç‚¹å‡»ä½äºå·¥å…·æ é¢æ¿å·¦ä¾§é¡¶éƒ¨çš„â€œ+â€æŒ‰é’®ï¼Œåœ¨å¼¹å‡ºçš„èœå•ä¸­é€‰æ‹©Flutteré€‰é¡¹ï¼Œä¸ºåº”ç”¨ç¨‹åºæ–°å¢ä¸€é¡¹å¯åŠ¨å…¥å£ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/bf/64/bf7cd1ffc0fc58557672b4420d1f7364.png?wh=646*1260\" alt=\"\"></p><center><span class=\"reference\">å›¾2 é€‰æ‹©æ–°å¢ç±»å‹</span></center><p>æœ€åï¼Œåœ¨å…¥å£çš„ç¼–è¾‘é¢æ¿ä¸­ï¼Œä¸ºmain_devé€‰æ‹©ç¨‹åºçš„Dartå…¥å£ï¼Œç‚¹å‡»OKåï¼Œå°±å®Œæˆäº†å…¥å£çš„æ–°å¢å·¥ä½œï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/7a/78/7adea7407c99fbb1dfbbdfbb7b247278.png?wh=2154*1356\" alt=\"\"></p><center><span class=\"reference\">å›¾3 ç¼–è¾‘å¯åŠ¨å…¥å£</span></center><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥<strong>åœ¨Config Selectorä¸­åˆ‡æ¢ä¸åŒçš„å¯åŠ¨å…¥å£ï¼Œä»è€Œç›´æ¥åœ¨Android Studioä¸­æ³¨å…¥ä¸åŒçš„é…ç½®ç¯å¢ƒäº†</strong>ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/8f/3e/8f38c9d92eda9ab8d6038a7e7611323e.png?wh=372*206\" alt=\"\"></p><center><span class=\"reference\">å›¾4 Config Selectoråˆ‡æ¢å¯åŠ¨å…¥å£</span></center><p>æˆ‘ä»¬è¯•ç€åœ¨ä¸åŒçš„å…¥å£ä¸­è¿›è¡Œåˆ‡æ¢å’Œè¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒAppå·²ç»å¯ä»¥è¯†åˆ«å‡ºä¸åŒçš„é…ç½®ç¯å¢ƒäº†ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/6a/26/6a43d7189d9d8a8cb0184cb424c3ef26.png?wh=750*1334\" alt=\"\"></p><center><span class=\"reference\">å›¾5 å¼€å‘ç¯å¢ƒè¿è¡Œç¤ºä¾‹</span></center><p><img src=\"https://static001.geekbang.org/resource/image/6a/45/6afbe85bea6acfe86173085d34192145.png?wh=750*1334\" alt=\"\"></p><center><span class=\"reference\">å›¾6 ç”Ÿäº§ç¯å¢ƒè¿è¡Œç¤ºä¾‹</span></center><p>è€Œå¦‚æœæˆ‘ä»¬æƒ³è¦æ‰“åŒ…æ„å»ºå‡ºé€‚ç”¨äºAndroidçš„APKï¼Œæˆ–æ˜¯iOSçš„IPAå®‰è£…åŒ…ï¼Œåˆ™å¯ä»¥åœ¨flutter build å‘½ä»¤åé¢ï¼ŒåŒæ ·è¿½åŠ â€“targetæˆ–-tå‚æ•°ï¼ŒæŒ‡å®šåº”ç”¨ç¨‹åºåˆå§‹åŒ–å…¥å£ï¼š</p><pre><code>//æ‰“åŒ…å¼€å‘ç¯å¢ƒåº”ç”¨ç¨‹åº\nflutter build apk -t lib/main_dev.dart \nflutter build ios -t lib/main_dev.dart\n\n//æ‰“åŒ…ç”Ÿäº§ç¯å¢ƒåº”ç”¨ç¨‹åº\nflutter build apk -t lib/main.dart\nflutter build ios -t lib/main.dart\n</code></pre><h2>æ€»ç»“</h2><p>å¥½äº†ï¼Œä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œã€‚æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ä»Šå¤©çš„ä¸»è¦å†…å®¹å§ã€‚</p><p>Flutteræ”¯æŒDebugä¸Releaseçš„ç¼–è¯‘æ¨¡å¼ï¼Œå¹¶ä¸”è¿™ä¸¤ç§æ¨¡å¼åœ¨æ„å»ºæ—¶æ˜¯å®Œå…¨ç‹¬ç«‹çš„ã€‚Debugæ¨¡å¼ä¸‹ä¼šæ‰“å¼€æ‰€æœ‰çš„æ–­è¨€å’Œè°ƒè¯•ä¿¡æ¯ï¼Œè€ŒReleaseæ¨¡å¼ä¸‹åˆ™ä¼šå…³é—­è¿™äº›ä¿¡æ¯ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡æ–­è¨€ï¼Œå†™å‡ºåªåœ¨Debugæ¨¡å¼ä¸‹ç”Ÿæ•ˆçš„ä»£ç ã€‚è€Œå¦‚æœæˆ‘ä»¬æƒ³æ›´ç²¾å‡†åœ°è¯†åˆ«å‡ºå½“å‰çš„ç¼–è¯‘æ¨¡å¼ï¼Œåˆ™å¯ä»¥åˆ©ç”¨Dartæ‰€æä¾›çš„ç¼–è¯‘å¸¸æ•°kReleaseModeï¼Œå†™å‡ºåªåœ¨Releaseæ¨¡å¼ä¸‹ç”Ÿæ•ˆçš„ä»£ç ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼ŒFlutterå¯¹äºå¸¸è§çš„åˆ†ç¯å¢ƒé…ç½®èƒ½åŠ›ä¹Ÿæä¾›äº†æ”¯æŒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨InheritedWidgetä¸ºåº”ç”¨ä¸­å¯é…ç½®éƒ¨åˆ†è¿›è¡Œå°è£…æŠ½è±¡ï¼Œé€šè¿‡é…ç½®å¤šå…¥å£çš„æ–¹å¼ä¸ºåº”ç”¨çš„å¯åŠ¨æ³¨å…¥é…ç½®ç¯å¢ƒã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶æ–­è¨€å’ŒkReleaseModeéƒ½èƒ½å¤Ÿè¯†åˆ«å‡ºDebugç¼–è¯‘æ¨¡å¼ï¼Œä½†å®ƒä»¬å¯¹äºŒè¿›åˆ¶åŒ…çš„æ‰“åŒ…æ„å»ºå½±å“æ˜¯ä¸åŒçš„ã€‚</p><p>é‡‡ç”¨æ–­è¨€çš„æ–¹å¼ï¼Œå…¶ç›¸å…³ä»£ç ä¼šåœ¨Releaseæ„å»ºä¸­è¢«å®Œå…¨å‰”é™¤ï¼›è€Œå¦‚æœä½¿ç”¨kReleaseModeå¸¸é‡æ¥è¯†åˆ«Debugç¯å¢ƒï¼Œè™½ç„¶è¿™æ®µä»£ç æ°¸è¿œä¸ä¼šåœ¨Releaseç¯å¢ƒä¸­æ‰§è¡Œï¼Œä½†å´ä¼šè¢«æ‰“å…¥åˆ°äºŒè¿›åˆ¶åŒ…ä¸­ï¼Œå¢å¤§åŒ…ä½“ç§¯ã€‚å› æ­¤ï¼Œå¦‚æœæ²¡æœ‰ç‰¹æ®Šéœ€æ±‚çš„è¯ï¼Œä¸€å®šè¦ä½¿ç”¨æ–­è¨€æ¥å®ç°Debugç‰¹æœ‰çš„é€»è¾‘ï¼Œæˆ–æ˜¯åœ¨å‘å¸ƒæœŸå‰å°†ä½¿ç”¨kReleaseModeåˆ¤æ–­çš„Debugé€»è¾‘å®Œå…¨åˆ é™¤ã€‚</p><p>æˆ‘æŠŠä»Šå¤©åˆ†äº«æ‰€æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹æ‰“åŒ…åˆ°äº†<a href=\"https://github.com/cyndibaby905/34_multi_env\">GitHub</a>ä¸­ï¼Œä½ å¯ä»¥ä¸‹è½½ä¸‹æ¥ï¼Œåå¤è¿è¡Œå‡ æ¬¡ï¼ŒåŠ æ·±ç†è§£ä¸è®°å¿†ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æœ€åï¼Œæˆ‘ç»™ä½ ç•™ä¸€é“æ€è€ƒé¢˜å§ã€‚</p><p>åœ¨ä¿æŒç”Ÿäº§ç¯å¢ƒä»£ç ä¸å˜çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæƒ³åœ¨å¼€å‘ç¯å¢ƒä¸­æ”¯æŒä¸åŒé…ç½®çš„åˆ‡æ¢ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•å®ç°ï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨è¯„è®ºåŒºç»™æˆ‘ç•™è¨€åˆ†äº«ä½ çš„è§‚ç‚¹ï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ç­‰å¾…ä½ ï¼æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><p></p>","comments":[{"had_liked":false,"id":142427,"user_name":"æ¸é†’AINY","can_delete":false,"product_type":"c1","uid":1486783,"ip_address":"","ucode":"4F3AD4B3CD0170","user_header":"https://static001.geekbang.org/account/avatar/00/16/af/bf/06fa89fb.jpg","comment_is_top":false,"comment_ctime":1571367014,"is_pvip":false,"replies":[{"id":"56206","content":"å‰å®³ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1572322729,"ip_address":"","comment_id":142427,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27341170790","product_id":100031001,"comment_content":"è€å¸ˆè®²çš„å¾ˆæ£’ï¼Œå¸®åŠ©äº†æˆ‘å¾ˆå¤šï¼Œæˆ‘çš„ä¸€ä¸ªFlutteré¡¹ç›®ä¹Ÿåˆ¶ä½œå®Œæˆï¼Œå¹¶ä¸Šæ¶å‘å¸ƒäº†","like_count":7,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471122,"discussion_content":"å‰å®³ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572322729,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133308,"user_name":"Geek_082580","can_delete":false,"product_type":"c1","uid":1134729,"ip_address":"","ucode":"C32FD726F82080","user_header":"","comment_is_top":false,"comment_ctime":1568510899,"is_pvip":false,"replies":[{"id":"52431","content":"ç”¨InheritedWidgeté…ç½®å¤šå…¥å£å°±å¯ä»¥äº†å§","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1569499685,"ip_address":"","comment_id":133308,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10158445491","product_id":100031001,"comment_content":"å¯¹äºä¸€ä¸ª flutter module å·¥ç¨‹ï¼Œ å³éœ€è¦åµŒå…¥åˆ°å·²æœ‰ Android é¡¹ç›®ï¼Œåˆéœ€è¦å•ç‹¬è¿è¡Œè°ƒè¯•ï¼Œåœ¨è¿™ä¸¤ç§çŠ¶æ€ä¸‹éœ€è¦ä¸åŒçš„é…ç½®ï¼Œæ¯”å¦‚ä¸åŒçš„ pluginï¼Œè¯·é—®è€å¸ˆæœ‰ä»€ä¹ˆå¥½çš„åŠæ³•å—ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467342,"discussion_content":"ç”¨InheritedWidgeté…ç½®å¤šå…¥å£å°±å¯ä»¥äº†å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569499685,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1603017,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLBsNaictOELd8V5cwPd0IKXiaJe7nzgmq9Ighibkku58rdwT5V1qUSuaULh8SAUou3aXEE3o8MNpeEhQ/132","nickname":"åŠªåŠ›ä¸ºæ˜å¤©","note":"","ucode":"39785D1D09AE37","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":15898,"discussion_content":"ç›®å‰æ²¡å‘ç°ï¼Œæœ€èˆ’æœçš„æ–¹å¼å°±æ˜¯å¼€ä¸€ä¸ªstudioï¼Œå¼€ä¸€ä¸ªvsCode","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568858330,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165795,"user_name":"ç«è…¿","can_delete":false,"product_type":"c1","uid":1308116,"ip_address":"","ucode":"40F17DBC18F5D5","user_header":"https://static001.geekbang.org/account/avatar/00/13/f5/d4/5a0a2f8d.jpg","comment_is_top":false,"comment_ctime":1577323679,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5872290975","product_id":100031001,"comment_content":"é…ç½®ä¿¡æ¯å¯ä»¥å†™åˆ°jsonæˆ–å…¶å®ƒæ ¼å¼çš„æœ¬åœ°æ–‡ä»¶é‡Œï¼Œ å¯åŠ¨æ—¶è¯»å–é…ç½®ä¿¡æ¯ã€‚ æˆ–è€…æŠŠé…ç½®æ–‡ä»¶æ”¾åˆ°è¿œç¨‹ï¼Œå¯ä»¥å®ç°åŠ¨æ€åŠ è½½æ ·å¼æˆ–æ¨¡å—ï¼Œæœ¬åœ°æœ‰é»˜è®¤çš„é…ç½®ï¼Œ ä»¥é˜²ç½‘ç»œä¸å¯ç”¨ã€‚ ","like_count":2},{"had_liked":false,"id":138721,"user_name":"liyuan","can_delete":false,"product_type":"c1","uid":1596209,"ip_address":"","ucode":"82829DBE2244AA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqUP1oawANUYOmFic40JrcRC4AVp0qVvuoibUFYkKDJtJNP6qXKnibB0nQ9kQibqCiakHkGoYXZbLTcibUw/132","comment_is_top":false,"comment_ctime":1570432999,"is_pvip":false,"replies":[{"id":"53531","content":"ä¹‹å‰æœ‰è®²è¿‡ï¼ŒFlutteråªèƒ½æ¥ç®¡å¼•æ“åˆå§‹åŒ–ä»¥åçš„è¡Œä¸ºï¼ˆè¿è¡Œæ—¶ï¼‰ï¼Œåƒappåç§°ã€å›¾æ ‡ã€å¯åŠ¨å›¾è¿™äº›è¿˜æ˜¯éœ€è¦åŸç”Ÿå·¥ç¨‹å»æçš„ã€‚æŒ‰ç…§è¿™ä¸ªæ ‡å‡†è§£ç­”ä½ çš„é—®é¢˜ï¼š<br>1ã€devï¼Œqaï¼Œuatï¼Œprodç­‰å¤šä¸ªç¯å¢ƒå¯ä»¥åœ¨flutterå·¥ç¨‹é‡Œé€šè¿‡æŒ‡å®šå·¥ç¨‹å…¥å£æå®š<br>2ã€åŸç”Ÿå·¥ç¨‹ç›¸å…³çš„é…ç½®å·®å¼‚ï¼ŒiOSå¯ä»¥é‡‡ç”¨å¤šä¸ªbuild targetæ–¹å¼å®ç°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1570519807,"ip_address":"","comment_id":138721,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5865400295","product_id":100031001,"comment_content":"ä»…ä»…é€šè¿‡-tèƒ½é…ç½®çš„å‚æ•°è¿˜æ˜¯å¤ªå¼±äº†ï¼Œå¦‚æœæœ‰devï¼Œqaï¼Œuatï¼Œprodç­‰å¤šä¸ªç¯å¢ƒï¼Œæ¯ä¸ªç¯å¢ƒçš„appåº”ç”¨åç§°&#47;å›¾æ ‡å¯èƒ½æœ‰å·®åˆ«ï¼ŒåŒæ—¶å¸Œæœ›æ‰‹æœºä¸Šå¤šä¸ªç¯å¢ƒçš„appå…±å­˜<br><br>androidå¯ä»¥ç”¨build flavorå®ç°ï¼Œiosåº”è¯¥æ€ä¹ˆåšæ¯”è¾ƒå¥½ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469628,"discussion_content":"ä¹‹å‰æœ‰è®²è¿‡ï¼ŒFlutteråªèƒ½æ¥ç®¡å¼•æ“åˆå§‹åŒ–ä»¥åçš„è¡Œä¸ºï¼ˆè¿è¡Œæ—¶ï¼‰ï¼Œåƒappåç§°ã€å›¾æ ‡ã€å¯åŠ¨å›¾è¿™äº›è¿˜æ˜¯éœ€è¦åŸç”Ÿå·¥ç¨‹å»æçš„ã€‚æŒ‰ç…§è¿™ä¸ªæ ‡å‡†è§£ç­”ä½ çš„é—®é¢˜ï¼š\n1ã€devï¼Œqaï¼Œuatï¼Œprodç­‰å¤šä¸ªç¯å¢ƒå¯ä»¥åœ¨flutterå·¥ç¨‹é‡Œé€šè¿‡æŒ‡å®šå·¥ç¨‹å…¥å£æå®š\n2ã€åŸç”Ÿå·¥ç¨‹ç›¸å…³çš„é…ç½®å·®å¼‚ï¼ŒiOSå¯ä»¥é‡‡ç”¨å¤šä¸ªbuild targetæ–¹å¼å®ç°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570519807,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135650,"user_name":"çŸ®ä¸ªå­å…ˆç”ŸğŸ˜","can_delete":false,"product_type":"c1","uid":1147205,"ip_address":"","ucode":"2242A457B0E10D","user_header":"https://static001.geekbang.org/account/avatar/00/11/81/45/9aa91b75.jpg","comment_is_top":false,"comment_ctime":1569235217,"is_pvip":false,"replies":[{"id":"52457","content":"ä½ å¯ä»¥ç‚¹å‡»kReleaseModeæŸ¥çœ‹å…¶å£°æ˜ï¼Œè¿™ä¸¤ç§æ–¹å¼æ˜¯ä¸€æ ·çš„","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1569501752,"ip_address":"","comment_id":135650,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5864202513","product_id":100031001,"comment_content":"çœ‹åˆ°è¿‡å¦å¤–ä¸€ç§åˆ¤æ–­æ–¹æ³•:bool.fromEnvironment(&#39;dart.vm.product&#39;)","like_count":1,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468289,"discussion_content":"ä½ å¯ä»¥ç‚¹å‡»kReleaseModeæŸ¥çœ‹å…¶å£°æ˜ï¼Œè¿™ä¸¤ç§æ–¹å¼æ˜¯ä¸€æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569501752,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1147205,"avatar":"https://static001.geekbang.org/account/avatar/00/11/81/45/9aa91b75.jpg","nickname":"çŸ®ä¸ªå­å…ˆç”ŸğŸ˜","note":"","ucode":"2242A457B0E10D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21851,"discussion_content":"ğŸ˜‚å—æ•™äº†è€å¸ˆï¼Œåªä¼šç”¨ï¼Œè¿˜æ²¡æ¥å¾—åŠç»†çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569547568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133613,"user_name":"hz","can_delete":false,"product_type":"c1","uid":1002250,"ip_address":"","ucode":"8BF6ACDCC7D61C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4b/0a/4bb137d9.jpg","comment_is_top":false,"comment_ctime":1568621308,"is_pvip":false,"replies":[{"id":"52432","content":"å¦ç™½è®²ä»¥InheritedWidgetçš„æ–¹å¼ä¼ é€’æ•°æ®ï¼Œå…¶åŸç†å°±æ˜¯åŸºäºWidgetæ ‘çš„ï¼Œæ‰€ä»¥å¦‚æœè·å–ä¸åˆ°Widgetæ ‘ä¸Šä¸‹æ–‡ï¼Œå°±æ‹¿ä¸åˆ°æ•°æ®","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1569499780,"ip_address":"","comment_id":133613,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5863588604","product_id":100031001,"comment_content":"var config = AppConfig.of(context); è·å–é…ç½®çš„æ—¶å€™éœ€è¦contextä½œä¸ºå‚æ•°ï¼Œåœ¨buildæ–¹æ³•é‡Œé¢å°±å¯ä»¥æ–¹ä¾¿è·å¾—é…ç½®ã€‚åœ¨å…¶ä»–åœ°æ–¹æ²¡æœ‰contextä½œä¸ºå‚æ•°çš„æ—¶å€™ï¼Œéœ€è¦è·å–é…ç½®åº”è¯¥æ€ä¹ˆè·å–","like_count":1,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467449,"discussion_content":"å¦ç™½è®²ä»¥InheritedWidgetçš„æ–¹å¼ä¼ é€’æ•°æ®ï¼Œå…¶åŸç†å°±æ˜¯åŸºäºWidgetæ ‘çš„ï¼Œæ‰€ä»¥å¦‚æœè·å–ä¸åˆ°Widgetæ ‘ä¸Šä¸‹æ–‡ï¼Œå°±æ‹¿ä¸åˆ°æ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569499780,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1071517,"avatar":"https://static001.geekbang.org/account/avatar/00/10/59/9d/2cbbe624.jpg","nickname":"æ¬¢æ¬¢","note":"","ucode":"EE93B03BC46E4A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":193962,"discussion_content":"è¿™é‡Œåªæ˜¯ä¸€ä¸ªæ —å­ï¼Œä½†æ˜¯ï¼Œè¿™ä¸ªæœ‰ç‚¹æ —å­ä¸æ°å½“ï¼Œå®¹æ˜“è®©äººäº§ç”Ÿè¯¯è§£ã€‚å¦‚æœè„±ç¦»ä¸Šä¸‹æ–‡çš„é…ç½®å°±ä¸åº”è¯¥å†™åœ¨inheritedwidgetä¸­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583164273,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":217725,"user_name":"ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚","can_delete":false,"product_type":"c1","uid":1386333,"ip_address":"","ucode":"5E3CDC50A6F780","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/MxIKVrOfvGrWibezibHJ376rHJOAtiaVyKtX9j5hZNdY9z1GH6tPJdgu66oE1fuBvc3Jnz9dhwd046xBXQYjia0H2g/132","comment_is_top":false,"comment_ctime":1589597248,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589597248","product_id":100031001,"comment_content":"InheritedWidget éº»çƒ¦é—®ä¸€ä¸‹å¦‚ä½•èƒ½è„±ç¦»äº†context æ¥ä½¿ç”¨å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":143937,"user_name":"å’Œå°èƒ–","can_delete":false,"product_type":"c1","uid":1180727,"ip_address":"","ucode":"406BD7AB987EBF","user_header":"https://static001.geekbang.org/account/avatar/00/12/04/37/aa04f997.jpg","comment_is_top":false,"comment_ctime":1571809953,"is_pvip":false,"replies":[{"id":"58632","content":"æ©ï¼ŒåŠ ä¸€ä¸ªå¼€å…³å°±å¥½ï¼Œæœ¬è´¨ä¸Šè·Ÿåˆ‡æ¢ä¸»é¢˜ç±»ä¼¼","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1574051684,"ip_address":"","comment_id":143937,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571809953","product_id":100031001,"comment_content":"æ€è€ƒé¢˜ï¼šè€å¸ˆæˆ‘çš„ç†è§£æ˜¯ç›´æ¥å† new ä¸€ä¸ª AppConfig å‡ºæ¥ä¼ å…¥ä¸åŒçš„å‚æ•°ä¸å°±å¥½äº†å—ï¼Ÿåªæ˜¯ç›¸å½“äºæˆ‘ä»¬æœ‰å¤šç§å¼€å‘çš„ configï¼Œæœ‰å‡ ç§å°±é…ç½®å‡ ä¸ª AppConfig å¯ä»¥å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471749,"discussion_content":"æ©ï¼ŒåŠ ä¸€ä¸ªå¼€å…³å°±å¥½ï¼Œæœ¬è´¨ä¸Šè·Ÿåˆ‡æ¢ä¸»é¢˜ç±»ä¼¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574051684,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}