{"id":181429,"title":"17 | Object.setPrototypeOf(x, null)ï¼šè¿Brendan Eichéƒ½è®¤é”™ï¼Œä½†nullå€¼è¿˜æ´»ç€","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å‘¨çˆ±æ°‘ã€‚æ¬¢è¿å›æ¥ç»§ç»­å­¦ä¹ JavaScriptã€‚</p><p>ä»Šå¤©æ˜¯å…³äºé¢å‘å¯¹è±¡çš„æœ€åä¸€è®²ï¼Œä¸Šæ¬¡å·²ç»è¯´è¿‡ï¼Œä»Šå¤©è¿™ä¸€è®²è¦è®¨è®ºçš„æ˜¯åŸå­å¯¹è±¡ã€‚å…³äºåŸå­å¯¹è±¡çš„è®¨è®ºï¼Œæˆ‘ä»¬åº”è¯¥ä»<code>null</code>å€¼è®²èµ·ã€‚</p><p><code>null</code>å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚</p><h2>nullå€¼</h2><p>å¾ˆå¤šäººè¯´JavaScriptä¸­çš„<code>null</code>å€¼æ˜¯ä¸€ä¸ªBUGè®¾è®¡ï¼Œè¿JavaScriptä¹‹çˆ¶Eichéƒ½è·³å‡ºæ¥å¯¹Undefined+Nullçš„åŒè®¾è®¡ç—›å¿ƒç–¾é¦–ï¼Œè¯´<code>null</code>å€¼çš„ç‰¹æ®Šè®¾è®¡æ˜¯ä¸€ä¸ªâ€œæŠ½è±¡æ¼æ´ï¼ˆabstraction leakï¼‰â€ã€‚è¿™ä¸ªä¸œè¥¿ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå¾ˆéš¾æè¿°ï¼ŒåŸºæœ¬ä¸Šä½ å¯ä»¥ç†è§£ä¸ºåœ¨æ¦‚å¿µè®¾è®¡å±‚é¢ï¼ˆä¹Ÿå°±æ˜¯æŠ½è±¡å±‚ï¼‰è„‘è¢‹çªç„¶æŠ½æŠ½äº†ï¼Œä¸€ä¸å°å¿ƒå°±å†™å‡ºè¿™ä¹ˆä¸ªæ€ªèƒã€‚</p><blockquote>\n<p>NOTEï¼š<a href=\"https://2ality.com/2013/10/typeof-null.html\">â€œtypeof nullâ€çš„å†å²</a> , <a href=\"https://juejin.im/entry/5b5ad2fb6fb9a04fb900de7c\">JavaScript çš„è®¾è®¡å¤±è¯¯</a> ã€‚</p>\n</blockquote><p>ç„¶è€Œæˆ‘å´æ€»æ˜¯è§‰å¾—ä¸å°½å¦‚æ­¤ï¼Œå› ä¸ºå¦‚æœä½ ä»”ç»†æ€è€ƒè¿‡JavaScriptçš„ç±»å‹ç³»ç»Ÿï¼Œä½ å°±ä¼šå‘ç°<code>null</code>å€¼çš„å‡ºç°æ˜¯æœ‰ä¸€å®šçš„é“ç†çš„ï¼ˆå½“ç„¶Eichå½“å¹´è„‘å­æ˜¯ä¸æ˜¯è¿™æ ·çŠ¯çš„æŠ½æŠ½ä¹Ÿæœªä¸ºå¯çŸ¥ï¼‰ã€‚æ€ä¹ˆè®²å‘¢ï¼Ÿ</p><p>æ—©æœŸçš„JavaScriptä¸€å…±æœ‰6ç§ç±»å‹ï¼Œå…¶ä¸­numberã€stringã€booleanã€objectå’Œfunctionéƒ½æ˜¯æœ‰ä¸€ä¸ªç¡®åˆ‡çš„â€œå€¼â€çš„ï¼Œè€Œç¬¬6ç§ç±»å‹<code>Undefined</code>å®šä¹‰äº†å®ƒä»¬çš„åé¢ï¼Œä¹Ÿå°±æ˜¯â€œéå€¼â€ã€‚ä¸€èˆ¬è®²JavaScriptçš„ä¹¦å¤§æŠµä¸Šéƒ½ä¼šè¿™ä¹ˆè¯´ï¼š</p><!-- [[[read_end]]] --><blockquote>\n<p><code>undefined</code>ç”¨äºè¡¨è¾¾ä¸€ä¸ªå€¼/æ•°æ®ä¸å­˜åœ¨ï¼Œä¹Ÿå°±æ˜¯â€œéå€¼ï¼ˆnon-valueï¼‰â€ï¼Œä¾‹å¦‚returnæ²¡æœ‰è¿”å›å€¼ï¼Œæˆ–å˜é‡å£°æ˜äº†ä½†æ²¡æœ‰ç»‘å®šæ•°æ®ã€‚</p>\n</blockquote><p>è¿™æ ·ä¸€æ¥ï¼Œâ€å€¼+éå€¼â€œå°±æ„æˆäº†ä¸€ä¸ªå®Œæ•´çš„ç±»å‹ç³»ç»Ÿã€‚</p><p>ä½†æ˜¯å‘¢ï¼ŒJavaScriptåˆæ˜¯ä¸€ç§â€œé¢å‘å¯¹è±¡â€çš„è¯­è¨€ã€‚é‚£ä¹ˆâ€œå¯¹è±¡â€ä½œä¸ºä¸€ä¸ªç±»å‹ç³»ç»Ÿï¼Œåœ¨æŠ½è±¡ä¸Šæ˜¯ä¸æ˜¯ä¹Ÿæœ‰â€œéå¯¹è±¡â€è¿™æ ·çš„æ¦‚å¿µå‘¢ï¼Ÿæœ‰å•Šï¼Œç­”æ¡ˆå°±æ˜¯â€œnullâ€ï¼Œå®ƒçš„è¯­ä¹‰æ˜¯ï¼š</p><blockquote>\n<p><code>null</code>ç”¨äºè¡¨è¾¾ä¸€ä¸ªå¯¹è±¡ä¸å­˜åœ¨ï¼Œä¹Ÿå°±æ˜¯â€œéå¯¹è±¡â€ï¼Œä¾‹å¦‚åœ¨åŸå‹ç»§æ‰¿ä¸­ä¸Šæº¯åŸå‹é“¾ç›´åˆ°æ ¹ç±»â€”â€”æ ¹ç±»æ²¡æœ‰çˆ¶ç±»ï¼Œå› æ­¤å®ƒçš„åŸå‹å°±æŒ‡å‘<code>null</code>ã€‚</p>\n</blockquote><p>æ­£å¦‚â€œundefinedâ€æ˜¯ä¸€ä¸ªå€¼ç±»å‹ä¸€æ ·ï¼Œâ€œnullâ€å€¼ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ç±»å‹ã€‚è¿™å¾ˆå¯¹ç§°ã€å¾ˆå®Œç¾ï¼Œåªè¦ä½ æ„¿æ„æ‰¿è®¤â€œJavaScriptä¸­å­˜åœ¨ä¸¤å¥—ç±»å‹ç³»ç»Ÿâ€ï¼Œé‚£ä¹ˆä¸Šé¢çš„ä¸€åˆ‡è§£é‡Šå°±éƒ½è¡Œå¾—é€šã€‚</p><p>äº‹å®ä¸Šï¼Œä¸ç®¡ä½ æ‰¿ä¸æ‰¿è®¤ï¼Œè¿™æ ·çš„ä¸¤å¥—ç±»å‹ç³»ç»Ÿéƒ½æ˜¯å­˜åœ¨çš„ã€‚ä¹Ÿå› æ­¤ï¼Œæ‰æœ‰äº†æ‰€è°“çš„<strong>å€¼ç±»å‹çš„åŒ…è£…ç±»</strong>ï¼Œä»¥åŠå¯¹è±¡çš„<code>valueOf()</code>è¿™ä¸ªåŸå‹æ–¹æ³•ã€‚</p><p>ç°åœ¨ï¼Œçš„ç¡®æ˜¯æ—¶å€™æ‰¿è®¤<code>typeof(null) === 'object'</code>è¿™ä¸ªè®¾è®¡çš„åˆç†æ€§äº†ã€‚</p><h2>Nullç±»å‹</h2><p>æ­£å¦‚Undefinedæ˜¯ä¸€ä¸ªç±»å‹ï¼Œè€Œ<code>undefined</code>æ˜¯å®ƒå”¯ä¸€çš„å€¼ä¸€æ ·ï¼ŒNullä¹Ÿæ˜¯ä¸€ä¸ªç±»å‹ï¼Œä¸”<code>null</code>æ˜¯å®ƒå”¯ä¸€çš„å€¼ã€‚</p><p>ä½ æˆ–è®¸å·²ç»å‘ç°ï¼Œæˆ‘åœ¨è¿™é‡Œå…¶å®ç›´æ¥å¼•ç”¨äº†ECMAScriptå¯¹Nullç±»å‹çš„æè¿°ï¼Ÿçš„ç¡®ï¼ŒECMAScriptå°±æ˜¯è¿™æ ·çº¦å®šäº†<code>null</code>å€¼çš„å‡ºå¤„ï¼Œå¹¶ä¸”å¾ˆä¸å¹¸çš„æ˜¯ï¼Œå®ƒè¿˜çº¦å®šäº†<code>null</code>å€¼æ˜¯ä¸€ä¸ªåŸå§‹å€¼ï¼ˆPrimitive valuesï¼‰ï¼Œè¿™æ˜¯ECMAScriptçš„æ¦‚å¿µä¸æˆ‘åœ¨å‰é¢çš„å™è¿°ä¸­å”¯ä¸€å†²çªçš„åœ°æ–¹ã€‚</p><p>å¦‚æœä½ â€œèƒ½/æ„¿æ„â€è¿é€†ECMAScriptå¯¹â€œè¯­è¨€ç±»å‹ï¼ˆ<em>Language types</em>ï¼‰â€çš„è¯´æ˜ï¼Œç¨ç¨â€œè‹ŸåŒâ€ä¸€ä¸‹æˆ‘ä¸Šè¿°çš„çœ‹æ³•ï¼Œé‚£ä¹ˆä¸‹é¢çš„ä»£ç ä¸€å®šä¼šè®©ä½ è§‰å¾—â€œè±ç„¶å¼€æœ—â€ã€‚è¿™ä¸‰è¡Œä»£ç åˆ†åˆ«è¯´æ˜ï¼š</p><ol>\n<li>nullæ˜¯å¯¹è±¡ï¼›</li>\n<li>ç±»å¯ä»¥æ´¾ç”Ÿè‡ªnullï¼›</li>\n<li>å¯¹è±¡ä¹Ÿå¯ä»¥åˆ›å»ºè‡ªnullã€‚</li>\n</ol><pre><code>// nullæ˜¯å¯¹è±¡\n&gt; typeof(null)\n'object'\n\n// ç±»å¯ä»¥æ´¾ç”Ÿè‡ªnull\n&gt; MyClass = class extends null {}\n[Function: MyClass]\n\n// å¯¹è±¡å¯ä»¥åˆ›å»ºè‡ªnull\n&gt; x = Object.create(null);\n{}\n</code></pre><p>æ‰€ä»¥ï¼ŒNullç±»å‹æ˜¯ä¸€ä¸ªâ€œå¯¹è±¡ç±»å‹ï¼ˆä¹Ÿå°±æ˜¯ç±»ï¼‰â€ï¼Œæ˜¯æ‰€æœ‰å¯¹è±¡ç±»å‹çš„â€œå…ƒç±»å‹â€ã€‚</p><p>è€Œ<code>null</code>å€¼ï¼Œæ˜¯ä¸€ä¸ªè¿å±æ€§è¡¨æ²¡æœ‰çš„å¯¹è±¡ï¼Œå®ƒæ˜¯â€œå…ƒç±»å‹â€ç³»ç»Ÿçš„ç¬¬ä¸€ä¸ªå®ä¾‹ï¼Œä½ å¯ä»¥ç§°ä¹‹ä¸ºä¸€ä¸ªåŸå­ã€‚</p><h2>å±æ€§è¡¨</h2><p>æ²¡æœ‰å±æ€§è¡¨çš„å¯¹è±¡ç§°ä¸ºnullã€‚è€Œä¸€ä¸ªåŸå­çº§åˆ«çš„å¯¹è±¡ï¼Œæ„å‘³ç€å®ƒåªæœ‰ä¸€ä¸ªå±æ€§è¡¨ï¼Œå®ƒä¸ç»§æ‰¿è‡ªä»»ä½•å…¶ä»–æ—¢æœ‰çš„å¯¹è±¡ï¼Œå› æ­¤è¿™ä¸ªå±æ€§è¡¨çš„åŸå‹ä¹Ÿå°±æŒ‡å‘nullã€‚</p><p>åŸå­å¯¹è±¡æ˜¯â€œå¯¹è±¡â€çš„æœ€åŸå§‹çš„å½¢æ€ã€‚å®ƒçš„å”¯ä¸€ç‰¹ç‚¹å°±æ˜¯â€œåŸå‹ä¸ºnullâ€ï¼Œå…¶ä¸­æœ‰ä¸€äº›å…¸å‹ç¤ºä¾‹ï¼Œè­¬å¦‚ï¼š</p><ol>\n<li>ä½ å¯ä»¥ä½¿ç”¨Object.getPrototypeOf()æ¥å‘ç°ï¼ŒObject()è¿™ä¸ªæ„é€ å™¨çš„åŸå‹å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªåŸå­å¯¹è±¡ã€‚â€”â€”ä¹Ÿå°±æ˜¯æ‰€æœ‰ä¸€èˆ¬å¯¹è±¡çš„ç¥–å…ˆç±»æœ€ç»ˆæŒ‡å‘çš„ï¼Œä»ç„¶æ˜¯ä¸€ä¸ªnullå€¼ã€‚</li>\n<li>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨Object.setPrototypeOf()æ¥å°†ä»»ä½•å¯¹è±¡çš„åŸå‹æŒ‡å‘nullå€¼ï¼Œä»è€Œè®©è¿™ä¸ªå¯¹è±¡â€œå˜æˆâ€ä¸€ä¸ªåŸå­å¯¹è±¡ã€‚</li>\n</ol><pre><code># JavaScriptä¸­â€œObjectï¼ˆå¯¹è±¡ç±»å‹ï¼‰â€çš„åŸå‹æ˜¯ä¸€ä¸ªåŸå­å¯¹è±¡\n&gt; Object.getPrototypeOf(Object.prototype)\nnull\n\n# ä»»ä½•å¯¹è±¡éƒ½å¯ä»¥é€šè¿‡å°†åŸå‹ç½®ä¸ºnullæ¥â€œå˜æˆâ€åŸå­å¯¹è±¡\n&gt; Object.setPrototypeOf(new Object, null)\n{}\n</code></pre><p>ä½†ä¸ºä»€ä¹ˆè¦â€œå˜æˆâ€åŸå­å¯¹è±¡å‘¢ï¼Ÿæˆ–è€…è¯´ï¼Œä½ ä¸ºä»€ä¹ˆéœ€è¦ä¸€ä¸ªâ€œåŸå­å¯¹è±¡â€å‘¢ï¼Ÿ</p><p>å› ä¸ºå®ƒå°±æ˜¯â€œå¯¹è±¡â€æœ€çœŸå®çš„ã€æœ€åŸå§‹çš„ã€æœ€åŸºç¡€æŠ½è±¡çš„é‚£ä¸ªæ•°æ®ç»“æ„ï¼š<strong>å…³è”æ•°ç»„</strong>ã€‚</p><p>æ‰€è°“å±æ€§è¡¨ï¼Œå°±æ˜¯å…³è”æ•°ç»„ã€‚ä¸€ä¸ªç©ºç´¢å¼•æ•°ç»„ä¸ç©ºçš„å…³è”æ•°ç»„åœ¨JavaScriptä¸­æ˜¯ç±»ä¼¼çš„ï¼ˆéƒ½æ˜¯å¯¹è±¡ï¼‰ï¼š</p><pre><code># ç©ºç´¢å¼•æ•°ç»„\n&gt; a = Object.setPrototypeOf(new Array, null)\n{}\n\n# ç©ºå…³è”æ•°ç»„\n&gt; x = Object.setPrototypeOf(new Object, null)\n{}\n</code></pre><p>è€Œä¸”æœ¬è´¨ä¸Šæ¥è¯´ï¼Œç©ºçš„ç´¢å¼•æ•°ç»„åªæ˜¯åœ¨å®ƒçš„å±æ€§è¡¨ä¸­é»˜è®¤æœ‰ä¸€ä¸ªä¸å¯åˆ—ä¸¾çš„å±æ€§ï¼Œä¹Ÿå°±æ˜¯<code>length</code>ã€‚ä¾‹å¦‚ï¼š</p><pre><code># ï¼ˆç»­ä¸Šä¾‹ï¼‰\n\n# æ•°ç»„çš„é•¿åº¦\n&gt; a.length\n0\n\n# ç´¢å¼•æ•°ç»„çš„å±æ€§\n&gt; Object.getOwnPropertyDescriptors(a)\n{ length: \n   { value: 0,\n     writable: true,\n     enumerable: false,\n     configurable: false } }\n</code></pre><p>æ­£å› ä¸ºæ•°ç»„æœ‰ä¸€ä¸ªé»˜è®¤çš„ã€éšå«çš„â€œlengthâ€å±æ€§ï¼Œæ‰€ä»¥å®ƒæ‰èƒ½è¢«è¿­ä»£å™¨åˆ—ä¸¾ï¼ˆä»¥åŠé€‚ç”¨äºæ•°ç»„å±•å¼€è¯­æ³•ï¼‰ï¼Œå› ä¸ºè¿­ä»£å™¨éœ€è¦â€œé¢å¤–åœ°ç»´æŠ¤ä¸€ä¸ªå€¼çš„ç´¢å¼•â€ï¼Œè¿™ç§æƒ…å†µä¸‹â€œlengthâ€å±æ€§æˆäº†æœ‰æ•ˆçš„å‚è€ƒï¼Œä»¥ä¾¿äºåœ¨è¿­ä»£å™¨ä¸­å°†â€œ0â€¦length-1â€ä½œä¸ºè¿­ä»£çš„ä¸­æ­¢æ¡ä»¶ã€‚</p><p>è€Œä¸€ä¸ªåŸå­çš„ã€æ”¯æŒè¿­ä»£çš„ç´¢å¼•æ•°ç»„ä¹Ÿå¯é€šè¿‡æ·»åŠ â€œSymbol.iteratorâ€å±æ€§æ¥å¾—åˆ°ã€‚ä¾‹å¦‚ï¼š</p><pre><code># ï¼ˆç»­ä¸Šä¾‹ï¼‰\n\n# ä½¿ç´¢å¼•æ•°ç»„æ”¯æŒè¿­ä»£\n&gt; a[Symbol.iterator] = Array.prototype[Symbol.iterator]\n[Function: values]\n\n# å±•å¼€è¯­æ³•ï¼ˆä»¥åŠå…¶ä»–è¿ç®—ï¼‰\n&gt; [...a]\n[]\n</code></pre><p>ç°åœ¨ï¼Œæ•´ä¸ªJavaScriptçš„å¯¹è±¡ç³»ç»Ÿè¢«è¿˜åŸåˆ°äº†ä¸¤å¼ ç®€å•çš„å±æ€§è¡¨ï¼Œå®ƒä»¬æ˜¯ä¸¤ä¸ªåŸå­å¯¹è±¡ï¼Œä¸€ä¸ªç”¨äºè¡¨è¾¾ç´¢å¼•æ•°ç»„ï¼Œå¦ä¸€ä¸ªç”¨äºè¡¨è¾¾å…³è”æ•°ç»„ã€‚</p><p>å½“ç„¶ï¼Œè¿˜æœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿæ˜¯æ‰€æœ‰åŸå­å¯¹è±¡çš„çˆ¶ç±»å®ä¾‹ï¼š<code>null</code>ã€‚</p><h2>æ´¾ç”Ÿè‡ªåŸå­çš„ç±»</h2><p>JavaScriptä¸­çš„ç±»ï¼Œæœ¬è´¨ä¸Šæ˜¯åŸå‹ç»§æ‰¿çš„ä¸€ä¸ªå°è£…ã€‚è€ŒåŸå‹ç»§æ‰¿ï¼Œåˆ™å¯ä»¥ç†è§£ä¸ºå¤šå±‚æ¬¡çš„å…³è”æ•°ç»„çš„é“¾ï¼ˆåŸå‹é“¾å°±æ˜¯å±æ€§è¡¨çš„é“¾ï¼‰ã€‚ä¹‹æ‰€ä»¥åœ¨è¿™é‡Œè¯´å®ƒæ˜¯â€œå¤šå±‚æ¬¡çš„â€ï¼Œæ˜¯å› ä¸ºåœ¨é¢å‘å¯¹è±¡æŠ€æœ¯å‡ºç°çš„æ—©æœŸï¼Œåœ¨ã€Šç»“æ„ç¨‹åºè®¾è®¡ã€‹è¿™æœ¬ç”±ä¸‰ä½å›¾çµå¥–å¾—ä¸»åˆå†™çš„ç»å…¸è‘—ä½œä¸­ï¼Œâ€œé¢å‘å¯¹è±¡ç¼–ç¨‹â€å°±è¢«ç§°ä¸ºâ€œå±‚æ¬¡ç»“æ„ç¨‹åºè®¾è®¡â€ã€‚æ‰€ä»¥ï¼Œâ€œå±‚æ¬¡è®¾è®¡â€å…¶å®æ˜¯ä»æ•°æ®ç»“æ„çš„è§†è§’å¯¹é¢å‘å¯¹è±¡ä¸­ç»§æ‰¿ç‰¹æ€§çš„ä¸€ä¸ªç²¾å‡†æ¦‚æ‹¬ã€‚</p><p>ç±»å£°æ˜å°†â€œextendsâ€æŒ‡å‘nullå€¼ï¼Œå¹¶è¡¨æ˜è¯¥ç±»æ´¾ç”Ÿè‡ªnullã€‚ä¸ºäº†ä½¿è¿™æ ·çš„ç±»ï¼ˆä¾‹å¦‚MyClassï¼‰èƒ½åˆ›å»ºå‡ºå…·æœ‰åŸå­ç‰¹æ€§çš„å®ä¾‹ï¼ŒJavaScriptç»™å®ƒèµ‹äºˆäº†ä¸€ä¸ªç‰¹æ€§ï¼šMyClass.prototypeçš„åŸå‹æŒ‡å‘nullã€‚è¿™ä¸ªæ€§è´¨ä¹Ÿä¸JavaScriptä¸­çš„Object()æ„é€ å™¨ç±»ä¼¼ã€‚ä¾‹å¦‚ï¼š</p><pre><code>&gt; class MyClass extends null {}\n&gt; Object.getPrototypeOf(MyClass.prototype)\nnull\n\n&gt; Object.getPrototypeOf(Object.prototype)\nnull\n</code></pre><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™é‡Œçš„MyClass()ç±»å¯ä»¥ä½œä¸ºä¸Object()ç±»å¤„äºç±»ä¼¼å±‚æ¬¡çš„â€œæ ¹ç±»â€ã€‚é€šå¸¸è€Œè¨€ï¼Œç§°ä¸ºâ€œï¼ˆæ‰€æœ‰å¯¹è±¡çš„ï¼‰ç¥–å…ˆç±»â€ã€‚è¿™ç§ç±»ï¼Œæ˜¯åœ¨JavaScriptä¸­æ„å»ºå…ƒç±»ç»§æ‰¿ä½“ç³»çš„åŸºç¡€ã€‚ä¸è¿‡å…ƒç±»ä»¥åŠç›¸å…³çš„è¯é¢˜ï¼Œè¿™é‡Œå°±ä¸å†å±•å¼€è®²è¿°äº†ã€‚</p><p>è¿™é‡Œå¸Œæœ›ä½ èƒ½å…³æ³¨çš„ç‚¹ï¼Œä»…ä»…æ˜¯åœ¨â€œå±‚æ¬¡ç»“æ„â€ä¸­ï¼Œè¿™æ ·å£°æ˜å‡ºæ¥çš„ç±»ï¼Œä¸Object()å¤„åœ¨ç›¸åŒçš„å±‚çº§ã€‚</p><p>é€šè¿‡â€œextends nullâ€æ¥å£°æ˜çš„ç±»ï¼Œæ˜¯ä¸èƒ½ç›´æ¥åˆ›å»ºå®ä¾‹çš„ï¼Œå› ä¸ºå®ƒçš„çˆ¶ç±»æ˜¯nullï¼Œæ‰€ä»¥åœ¨é»˜è®¤æ„é€ å™¨ä¸­çš„â€œSuperCallï¼ˆä¹Ÿå°±æ˜¯super()ï¼‰â€å°†æ— æ³•æ‰¾åˆ°å¯ç”¨çš„çˆ¶ç±»æ¥åˆ›å»ºå®ä¾‹ã€‚å› æ­¤ï¼Œé€šå¸¸æƒ…å†µä¸‹ä½¿ç”¨â€œextends nullâ€æ¥å£°æ˜çš„ç±»ï¼Œéƒ½ç”±ç”¨æˆ·æ¥å£°æ˜ä¸€ä¸ªè‡ªå·±çš„æ„é€ æ–¹æ³•ã€‚</p><p>ä½†æ˜¯ä¹Ÿæœ‰ä¾‹å¤–ï¼Œä½ æ€è€ƒä¸€ä¸‹è¿™ä¸ªé—®é¢˜ï¼šå¦‚æœMyClass.prototypeæŒ‡å‘nullï¼Œè€ŒsuperæŒ‡å‘ä¸€ä¸ªæœ‰æ•ˆçš„çˆ¶ç±»ï¼Œå…¶ç»“æœå¦‚ä½•å‘¢ï¼Ÿ</p><p>æ˜¯çš„ï¼Œè¿™æ ·å°±å¾—åˆ°äº†ä¸€ä¸ªèƒ½åˆ›å»ºâ€œå…·æœ‰çˆ¶ç±»ç‰¹æ€§ï¼ˆä¾‹å¦‚çˆ¶ç±»çš„ç§æœ‰æ§½ï¼‰â€çš„åŸå­å¯¹è±¡ã€‚ä¾‹å¦‚ï¼š</p><pre><code>&gt; class MyClass extends null {}\n \n# è¿™æ˜¯ä¸€ä¸ªåŸå­çš„å‡½æ•°ç±»\n&gt; Object.setPrototypeOf(MyClass, Function);\n\n# f()æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”æ˜¯åŸå­çš„\n&gt; f = new MyClass;\n&gt; f(); // å¯ä»¥è°ƒç”¨\n&gt; typeof f; // æ˜¯&quot;function&quot;ç±»å‹\n\n# è¿™æ˜¯ä¸€ä¸ªåŸå­çš„æ—¥æœŸç±»\n&gt; Object.setPrototypeOf(MyClass, Date);\n\n# dæ˜¯ä¸€ä¸ªæ—¥æœŸå¯¹è±¡ï¼Œå¹¶ä¸”ä¹Ÿæ˜¯åŸå­çš„\n&gt; d = new MyClass;\n&gt; Date.prototype.toString.call(d); // å®ƒæœ‰å†…éƒ¨æ§½ç”¨äºå­˜æ”¾æ—¥æœŸå€¼\n'Mon Nov 04 2019 18:27:27 GMT+0800 (CST)'\n\n# aæ˜¯ä¸€ä¸ªåŸå­çš„æ•°ç»„ç±»\n&gt; Object.setPrototypeOf(MyClass, Array);\n&gt; a = new MyClass;\n...\n</code></pre><h2>ä¸€èˆ¬å‡½æ•°/æ„é€ å™¨</h2><p>ç”±äºä¸€èˆ¬å‡½æ•°å¯ä»¥ç›´æ¥ä½œä¸ºæ„é€ å™¨ï¼Œä½ å¯èƒ½ä¹Ÿå·²ç»ä¹ æƒ¯äº†è¿™ç§ä»ECMAScript 6ä¹‹å‰çš„JavaScriptæ²¿è¢­ä¸‹æ¥çš„é£æ ¼ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿™æ ·çš„æ„é€ å™¨ä¹Ÿå¯ä»¥è¢«ç§°ä¸ºâ€œï¼ˆä¼ ç»Ÿçš„ï¼‰ç±»â€ï¼Œå¹¶ä¸”åœ¨ECMAScript 6ä¸­ï¼Œæ‰€è°“â€œéæ´¾ç”Ÿç±»ï¼ˆæ²¡æœ‰extendså£°æ˜çš„ç±»ï¼‰â€å®é™…ä¸Šä¹Ÿæ˜¯ç”¨è¿™æ ·çš„å‡½æ•°/æ„é€ å™¨æ¥å®ç°çš„ã€‚</p><p>è¿™æ ·çš„å‡½æ•°/æ„é€ å™¨/éæ´¾ç”Ÿç±»å…¶å®æ˜¯ç›¸åŒæ€§è´¨çš„ä¸œè¥¿ï¼Œå¹¶ä¸”éƒ½æ˜¯åŸºäºECMAScript 6ä¹‹å‰çš„æ„é€ å™¨æ¦‚å¿µæ¥å®ç°ç±»çš„å®ä¾‹åŒ–â€”â€”ä¹Ÿå°±æ˜¯æ„é€ è¿‡ç¨‹çš„ã€‚å‡ºäºè¿™æ ·çš„åŸå› ï¼Œå®ƒä»¬éƒ½ä¸èƒ½è°ƒç”¨SuperCallï¼ˆä¹Ÿå°±æ˜¯<code>super()</code>ï¼‰æ¥åˆ›å»º<code>this</code>å®ä¾‹ã€‚ä¸è¿‡ï¼Œæ—§å¼é£æ ¼çš„æ„é€ è¿‡ç¨‹å°†æ€»æ˜¯ä½¿ç”¨æ„é€ å™¨çš„<code>.prototype</code>å±æ€§æ¥åˆ›å»ºå®ä¾‹ã€‚å› è€Œï¼Œè®©å®ƒä»¬åˆ›å»ºåŸå­å¯¹è±¡çš„æ–¹æ³•ä¹Ÿå°±å˜å¾—éå¸¸ç®€å•ï¼šæŠŠå®ƒä»¬çš„åŸå‹å˜æˆåŸå­ï¼Œå°±å¯ä»¥äº†ã€‚ä¾‹å¦‚ï¼š</p><pre><code># éæ´¾ç”Ÿç±»ï¼ˆæ²¡æœ‰extendså£°æ˜çš„ç±»ï¼‰\n&gt; class MyClass {}\n&gt; Object.setPrototypeOf(MyClass.prototype, null)\n&gt; new MyClass\n{} \n\n# ä¸€èˆ¬å‡½æ•°/æ„é€ å™¨\n&gt; function AClass() {}\n&gt; Object.setPrototypeOf(AClass.prototype, null)\n&gt; new MyClass\n{}\n</code></pre><h2>åŸå­è¡Œä¸º</h2><p>ç›´æ¥æ–½åŠ äºåŸå­å¯¹è±¡ä¸Šçš„æœ€ç»ˆè¡Œä¸ºï¼Œå¯ä»¥ç§°ä¸ºåŸå­è¡Œä¸ºã€‚å¦‚åŒLISPä¸­çš„è¡¨åªæœ‰7ä¸ªåŸºæœ¬æ“ä½œç¬¦ä¸€æ ·ï¼ŒåŸå­è¡Œä¸ºçš„æ•°é‡ä¹Ÿæ˜¯å¾ˆå°‘çš„ã€‚å‡†ç¡®åœ°è¯´ï¼Œå¯¹äºJavaScriptæ¥è¯´ï¼Œå®ƒåªæœ‰13ä¸ªï¼Œå¯ä»¥åˆ†æˆä¸‰ç±»ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š</p><ul>\n<li>æ“ä½œåŸå‹çš„ï¼Œ3ä¸ªï¼Œåˆ†åˆ«ç”¨äºè¯»å†™å†…éƒ¨åŸå‹æ§½ï¼Œä»¥åŠåŸºäºåŸå‹é“¾æ£€ç´¢ï¼›</li>\n<li>æ“ä½œå±æ€§è¡¨çš„ï¼Œ8ä¸ªï¼ŒåŒ…æ‹¬å†»ç»“ã€æ£€ç´¢ã€ç½®å€¼å’ŒæŸ¥æ‰¾ç­‰ï¼ˆç±»ä¼¼äºæ•°æ®åº“çš„å¢åˆ æŸ¥æ”¹ï¼‰ï¼›</li>\n<li>æ“ä½œå‡½æ•°è¡Œä¸ºçš„ï¼Œ2ä¸ªï¼Œåˆ†åˆ«ç”¨äºå‡½æ•°è°ƒç”¨å’Œå¯¹è±¡æ„é€ ã€‚</li>\n</ul><p>è®²åˆ°è¿™é‡Œï¼Œä½ å¯èƒ½å·²ç»æ„è¯†åˆ°äº†ï¼Œæ‰€è°“â€œä»£ç†å¯¹è±¡ï¼ˆProxyï¼‰â€çš„é™·é˜±æ–¹æ³•ï¼Œä¹Ÿæ­£å¥½å°±æ˜¯è¿™13ä¸ªã€‚è¿™åŒæ ·ä¹Ÿå¯ä»¥ç†è§£ä¸ºï¼šä»£ç†å¯¹è±¡å°±æ˜¯æ¥ç®¡ä¸€ä¸ªå¯¹è±¡çš„åŸå­è¡Œä¸ºï¼Œå°†å®ƒè½¬å‘ç»™è¢«ä»£ç†è¡Œä¸ºå¤„ç†ã€‚</p><p>æ­£å› ä¸ºJavaScriptçš„å¯¹è±¡æœ‰ä¸”ä»…æœ‰è¿™13ä¸ªåŸå­è¡Œä¸ºï¼Œæ‰€ä»¥ä»£ç†æ‰èƒ½â€œæ— ç¼ä¸”å…¨é¢åœ°â€ä»£ç†ä»»ä½•å¯¹è±¡ã€‚</p><p>è¿™ä¹Ÿæ˜¯åœ¨ECMAScriptä¸­çš„ä»£ç†å˜ä½“å¯¹è±¡ï¼ˆproxy object is an exotic object ï¼‰åªæœ‰15ä¸ªå†…éƒ¨æ§½çš„åŸå› ï¼šåŒ…æ‹¬ä¸Šè¿°13ä¸ªåŸå­è¡Œä¸ºçš„å†…éƒ¨æ§½ï¼Œå…¶ä»–ä¸¤ä¸ªå†…éƒ¨æ§½åˆ†åˆ«æŒ‡å‘è¢«ä»£ç†å¯¹è±¡ï¼ˆProxyTargetï¼‰å’Œç”¨æˆ·ä»£ç è®¾ç½®çš„é™·é˜±åˆ—è¡¨ï¼ˆProxyHandlerï¼‰ã€‚æ€»å…±15ä¸ªï¼Œä¸å¤šä¸å°‘ã€‚</p><blockquote>\n<p>NOTE: å¦‚æœæ›´è¯¦ç»†åœ°è€ƒå¯Ÿ13ä¸ªä»£ç†æ–¹æ³•ï¼Œå…¶å®ä¸¥æ ¼åœ°è¯´æ¥åªæœ‰8ä¸ªåŸå­è¡Œä¸ºï¼Œå…¶å®å…¶ä»–5ä¸ªè¡Œä¸ºæ˜¯æœ‰ç›¸äº’ä¾èµ–çš„ï¼Œè€ŒéåŸå­çº§åˆ«çš„æ“ä½œã€‚è¿™5ä¸ªâ€œéåŸå­è¡Œä¸ºâ€çš„ä»£ç†æ–¹æ³•æ˜¯DefineOwnPropertyã€ HasPropertyã€Getã€Setå’ŒDeleteï¼Œå®ƒä»¬ä¼šè°ƒç”¨å…¶ä»–åŸå­è¡Œä¸ºæ¥æ£€æŸ¥åŸå‹æˆ–å±æ€§æè¿°ç¬¦ã€‚</p>\n</blockquote><h2>çŸ¥è¯†å›é¡¾</h2><p>ä»»ä½•ä¸€ä¸ªå¯¹è±¡éƒ½å¯ä»¥é€šè¿‡æ ‡é¢˜ä¸­çš„è¯­æ³•å˜æˆåŸå­å¯¹è±¡ï¼Œå®ƒå¯ä»¥è¢«ç†è§£ä¸º<strong>å…³è”æ•°ç»„</strong>ï¼›å¹¶ä¸”ï¼Œå¦‚æœå®ƒæœ‰ä¸€ä¸ªç§°ä¸ºâ€œlengthâ€çš„å±æ€§ï¼Œé‚£ä¹ˆå®ƒå°±å¯ä»¥è¢«ç†è§£ä¸º<strong>ç´¢å¼•æ•°ç»„</strong>ã€‚æˆ‘ä»¬åœ¨ä¸Šä¸€è®²ä¸­è¯´è¿‡ï¼Œæ‰€æœ‰çš„æ•°æ®ï¼Œåœ¨æœ¬è´¨ä¸Šæ¥è¯´éƒ½å¯ä»¥çœ‹æˆâ€œè¿ç»­çš„ä¸€å †â€ï¼Œæˆ–â€œä¸è¿ç»­çš„ä¸€å †â€ï¼Œæ‰€ä»¥â€œç´¢å¼•æ•°ç»„+å…³è”æ•°ç»„â€åœ¨æ•°æ®ç»“æ„ä¸Šå°±å¯ä»¥è¡¨è¾¾â€œæ‰€æœ‰çš„æ•°æ®â€ã€‚</p><p>å¦‚æœä½ å¯¹æœ‰å…³JavaScriptçš„ç±»å‹ç³»ç»Ÿï¼Œå°¤å…¶æ˜¯éšäºå…¶ä¸­çš„<strong>åŸå­ç±»å‹</strong>å’Œ<strong>å…ƒç±»å‹</strong>ç­‰ç›¸å…³çŸ¥è¯†æ„Ÿå…´è¶£ï¼Œå¯ä»¥é˜…è¯»æˆ‘çš„å¦å¤–ä¸€ç¯‡åšå®¢æ–‡ç« <a href=\"https://blog.csdn.net/aimingoo/article/details/82144108\">ã€Šå…ƒç±»å‹ç³»ç»Ÿæ˜¯å¯¹JavaScriptå†…å»ºæ¦‚å¿µçš„è¡¥å……ã€‹</a>ã€‚</p><p>å¥½äº†ï¼Œä»Šå¤©çš„è¯¾ç¨‹å°±åˆ°è¿™é‡Œã€‚å¾ˆé«˜å…´ä½ èƒ½ä¸€è·¯åšæŒç€å°†ä¹‹å‰çš„åä¸ƒè®²å¬å®Œï¼Œä¸è¿‡å¯¹äºJavaScriptè¯­è¨€æœ€ç‹¬ç‰¹çš„é‚£äº›è®¾è®¡ï¼Œæˆ‘ä»¬å…¶å®æ‰åˆçª¥é—¨å¾„ã€‚ç°åœ¨ï¼Œå°½ç®¡ä½ å·²ç»åœ¨åŸå­å±‚é¢æŒæ¡äº†â€œæ•°æ®â€ï¼Œä½†ä»è®¡ç®—æœºè¯­è¨€çš„è§’åº¦ä¸Šæ¥çœ‹ï¼Œä½ åªæ˜¯æ‹¥æœ‰äº†ä¸€ä¸ªé™æ€çš„ç³»ç»Ÿï¼Œæœ€é‡è¦çš„ã€ä¹Ÿæ˜¯ç°åœ¨æœ€ç¼ºä¹çš„ï¼Œæ˜¯è®©å®ƒä»¬â€œåŠ¨èµ·æ¥â€ã€‚</p><p>ä»ä¸‹ä¸€è®²å¼€å§‹ï¼Œæˆ‘ä¼šä¸ä½ èŠèŠâ€œåŠ¨æ€è¯­è¨€â€ï¼Œå¸Œæœ›ä½ å–œæ¬¢æˆ‘çš„åˆ†äº«ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠæ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p>","neighbors":{"left":{"article_title":"16 | [a, b] = {a, b}ï¼šè®©ä½ ä»ä¸€è¡Œä»£ç çœ‹åˆ°å¯¹è±¡çš„æœ¬è´¨","id":179774},"right":{"article_title":"18 | a + bï¼šåŠ¨æ€ç±»å‹æ˜¯ç¾éš¾ä¹‹æºè¿˜æ˜¯æœ€å¥½çš„ç‰¹æ€§ï¼Ÿï¼ˆä¸Šï¼‰","id":181952}},"comments":[{"had_liked":false,"id":164614,"user_name":"è¡Œé—®","can_delete":false,"product_type":"c1","uid":1039504,"ip_address":"","ucode":"F3AED699218475","user_header":"https://static001.geekbang.org/account/avatar/00/0f/dc/90/c980113a.jpg","comment_is_top":false,"comment_ctime":1577060441,"is_pvip":false,"replies":[{"id":"62759","content":"^^<br><br>å¤šè°¢å¤šè°¢ã€‚èƒ½è®²å¾—å¯¹å¤§å®¶æœ‰ç”¨å°±å¥½ã€‚:)","user_name":"ä½œè€…å›å¤","user_name_real":"Aiming","uid":"1521669","ctime":1577090132,"ip_address":"","comment_id":164614,"utype":1}],"discussion_count":1,"race_medal":0,"score":"40231766105","product_id":100039701,"comment_content":"å¤šçœ‹çœ‹æŠ€æœ¯åœ¨å†å²ä¸Šæ˜¯æ€ä¹ˆå‡ºç°çš„ï¼Œæ€ä¹ˆè§£å†³é—®é¢˜çš„ï¼Œæº¯æºè¿™ç§â€œåŸå‹é“¾â€è®©æˆ‘å¤§å‘¼è¿‡ç˜¾ã€‚ä¸€è·¯å­¦ä¹ ä¸‹æ¥ï¼Œæœ‰å®Œå…¨ä¸æ‡‚ï¼Œæœ‰é—»æ‰€æœªé—»ï¼Œæœ‰æ‡µé€¼ï¼Œæœ‰èŒ…å¡é¡¿å¼€ç­‰ã€‚ä»Šå¤©çš„è¿™ä¸€è®²ï¼Œè®©æˆ‘ç†è§£äº† &quot;null&quot; åœ¨å®é™…å¼€å‘ä¸­çš„åˆç†è¿ç”¨ã€‚","like_count":9,"discussions":[{"author":{"id":1521669,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/05/7beecd5d.jpg","nickname":"Aiming","note":"","ucode":"66292B32F9960A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478839,"discussion_content":"^^\n\nå¤šè°¢å¤šè°¢ã€‚èƒ½è®²å¾—å¯¹å¤§å®¶æœ‰ç”¨å°±å¥½ã€‚:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577090132,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165758,"user_name":"Objectivezt","can_delete":false,"product_type":"c1","uid":1396184,"ip_address":"","ucode":"D088F33E22B108","user_header":"https://static001.geekbang.org/account/avatar/00/15/4d/d8/30355c61.jpg","comment_is_top":false,"comment_ctime":1577318992,"is_pvip":false,"replies":[{"id":"63218","content":"ä¸€å®šæ˜¯è¿›æ­¥äº†+1 ğŸ˜ƒ","user_name":"ä½œè€…å›å¤","user_name_real":"Aiming","uid":"1521669","ctime":1577328186,"ip_address":"","comment_id":165758,"utype":1}],"discussion_count":1,"race_medal":2,"score":"14462220880","product_id":100039701,"comment_content":"è¿™æ˜¯é™¤äº†åŠ é¤è¯¾å¤–ï¼Œæˆ‘èƒ½æœ€å¿«ç†è§£çš„ä¸€èŠ‚è¯¾ï¼Œå—¯ä¸€å®šæ˜¯æˆ‘è¿›æ­¥äº†ğŸ˜","like_count":3,"discussions":[{"author":{"id":1521669,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/05/7beecd5d.jpg","nickname":"Aiming","note":"","ucode":"66292B32F9960A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479275,"discussion_content":"ä¸€å®šæ˜¯è¿›æ­¥äº†+1 ğŸ˜ƒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577328186,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":260431,"user_name":"å°ç‚­","can_delete":false,"product_type":"c1","uid":1109544,"ip_address":"","ucode":"E20E3958CAF06C","user_header":"https://static001.geekbang.org/account/avatar/00/10/ee/28/c04a0c83.jpg","comment_is_top":false,"comment_ctime":1605003340,"is_pvip":true,"replies":[{"id":"94580","content":"ä»ecmascriptæ¥è¯´ï¼Œä¹Ÿæ²¡æœ‰åŸå­å¯¹è±¡è¿™ä¸ªæ¦‚å¿µã€‚æˆ‘ä¹‹æ‰€ä»¥æåˆ°è¿™ä¸ªï¼Œæ˜¯å› ä¸ºâ€œåŸå­æ€§â€è¿™ä¸ªæ¦‚å¿µå¯ä»¥ç”¨åœ¨è¿™é‡Œï¼Œè¡¨æ˜è¿™ç§å¯¹è±¡æ˜¯â€œåŸå­æ€§çš„â€ã€‚å¦‚æœä½ æœ‰å…´è¶£è¯»ä¸€ä¸‹ã€ŠJavaScriptè¯­è¨€ç²¾é«“ä¸ç¼–ç¨‹å®è·µï¼ˆç¬¬ä¸‰ç‰ˆï¼‰ã€‹ï¼Œä¼šå¯¹è¿™ä¸ªæ¦‚å¿µï¼Œä»¥åŠç”±æ­¤å¸¦æ¥çš„ä¸€ä¸ªç±»å‹ä½“ç³»æœ‰æ›´æ·±çš„äº†è§£ã€‚<br><br>æˆ‘æœ€æ—©çœ‹åˆ°è¿™ä¸ªæ¦‚å¿µæ˜¯åœ¨ææˆ˜çš„ã€Šæ‚Ÿé€Delphiã€‹è¿™æœ¬ä¹¦ä¸­ï¼Œæˆ‘è®°å¾—åæ¥è¿™æœ¬ä¹¦å¹¶æ²¡æœ‰å‡ºç‰ˆã€‚å¤§æ¦‚æ˜¯åœ¨é‚£ä¸ªæ—¶é—´ç‚¹å‰åï¼Œç¨‹åºå‘˜åœˆå­é‡Œå…´èµ·è¿‡ä¸€é˜µå…³äºâ€œè¯­è¨€åŸå­æ€§â€çš„è®¨è®ºã€‚<br><br>åˆï¼Œè¿™å·²ç»æ˜¯å¿«20å¹´å‰çš„äº‹æƒ…äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Aiming","uid":"1521669","ctime":1605033311,"ip_address":"","comment_id":260431,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10194937932","product_id":100039701,"comment_content":"â€œåŸå­å¯¹è±¡â€ è¿™ä¸€æ¦‚å¿µåªæœ‰Javascriptæ‰ä¼šæœ‰å—ï¼Œåœ¨Cå’ŒC ++çš„æ ‡å‡†æœ¯è¯­ä¹Ÿæœ‰è¿™ä¸ªâ€œåŸå­å¯¹è±¡â€ çš„å®šä¹‰ã€‚ä¸çŸ¥é“ä»–ä»¬ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œæˆ–è€…è¿™ä¸ªå®šä¹‰çš„æºå¤´æ¥è‡ªå“ªé‡Œï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1521669,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/05/7beecd5d.jpg","nickname":"Aiming","note":"","ucode":"66292B32F9960A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509190,"discussion_content":"ä»ecmascriptæ¥è¯´ï¼Œä¹Ÿæ²¡æœ‰åŸå­å¯¹è±¡è¿™ä¸ªæ¦‚å¿µã€‚æˆ‘ä¹‹æ‰€ä»¥æåˆ°è¿™ä¸ªï¼Œæ˜¯å› ä¸ºâ€œåŸå­æ€§â€è¿™ä¸ªæ¦‚å¿µå¯ä»¥ç”¨åœ¨è¿™é‡Œï¼Œè¡¨æ˜è¿™ç§å¯¹è±¡æ˜¯â€œåŸå­æ€§çš„â€ã€‚å¦‚æœä½ æœ‰å…´è¶£è¯»ä¸€ä¸‹ã€ŠJavaScriptè¯­è¨€ç²¾é«“ä¸ç¼–ç¨‹å®è·µï¼ˆç¬¬ä¸‰ç‰ˆï¼‰ã€‹ï¼Œä¼šå¯¹è¿™ä¸ªæ¦‚å¿µï¼Œä»¥åŠç”±æ­¤å¸¦æ¥çš„ä¸€ä¸ªç±»å‹ä½“ç³»æœ‰æ›´æ·±çš„äº†è§£ã€‚\n\næˆ‘æœ€æ—©çœ‹åˆ°è¿™ä¸ªæ¦‚å¿µæ˜¯åœ¨ææˆ˜çš„ã€Šæ‚Ÿé€Delphiã€‹è¿™æœ¬ä¹¦ä¸­ï¼Œæˆ‘è®°å¾—åæ¥è¿™æœ¬ä¹¦å¹¶æ²¡æœ‰å‡ºç‰ˆã€‚å¤§æ¦‚æ˜¯åœ¨é‚£ä¸ªæ—¶é—´ç‚¹å‰åï¼Œç¨‹åºå‘˜åœˆå­é‡Œå…´èµ·è¿‡ä¸€é˜µå…³äºâ€œè¯­è¨€åŸå­æ€§â€çš„è®¨è®ºã€‚\n\nåˆï¼Œè¿™å·²ç»æ˜¯å¿«20å¹´å‰çš„äº‹æƒ…äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605033311,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187958,"user_name":"è›‹é»„é…±","can_delete":false,"product_type":"c1","uid":1050196,"ip_address":"","ucode":"2351562F282B68","user_header":"https://static001.geekbang.org/account/avatar/00/10/06/54/16bb64d0.jpg","comment_is_top":false,"comment_ctime":1584283289,"is_pvip":false,"replies":[{"id":"72665","content":"ä¸€å…±å½±å“ä¸‰ä¸ªä¸œè¥¿ï¼Œä¸€ä¸ªæ˜¯MyClasså’ŒMyClass.prototypeä¸­æ‰€æœ‰æ–¹æ³•çš„superæŒ‡å‘ï¼ŒäºŒä¸ªæ˜¯ä½¿MyClassçš„åˆ›å»ºè¿‡ç¨‹ä¸superï¼ˆä¾‹å¦‚è¿™é‡Œçš„Dateï¼‰åŠ¨æ€ç»‘å®šèµ·æ¥ï¼Œä¸‰ä¸ªæ˜¯MyClassè‡ªå·±çš„ç±»æ–¹æ³•ï¼ˆé™æ€æ–¹æ³•ï¼‰ã€‚åªä¸è¿‡ç¬¬ä¸‰ä¸ªæ²¡æœ‰è¡¨ç°åœ¨ç¤ºä¾‹ä¸­ã€‚<br><br>è¿™é‡Œç”¨setPrototypeOf()æ”¹çš„æ˜¯MyClassçš„åŸå‹ï¼Œè€Œä¸æ˜¯MyClass.prototypeçš„åŸå‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Aiming","uid":"1521669","ctime":1584328452,"ip_address":"","comment_id":187958,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5879250585","product_id":100039701,"comment_content":"&gt; å¦‚æœ MyClass.prototype æŒ‡å‘ nullï¼Œè€Œ super æŒ‡å‘ä¸€ä¸ªæœ‰æ•ˆçš„çˆ¶ç±»ï¼Œå…¶ç»“æœå¦‚ä½•å‘¢<br><br>è¿™é…ä¸Šç¤ºä¾‹ä»£ç ï¼Œæ„æ€æ˜¯è¯´setPrototypeOfè™½ç„¶å­—é¢ä¸Šçš„æ„æ€æ˜¯æ”¹å˜prototypeä½†æœ¬è´¨ä¸Šåªæ”¹å˜äº†superæ‰§è¡Œçš„å¯¹è±¡? æˆ‘è§‰å¾—ä¸å¯¹å§ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1521669,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/05/7beecd5d.jpg","nickname":"Aiming","note":"","ucode":"66292B32F9960A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487303,"discussion_content":"ä¸€å…±å½±å“ä¸‰ä¸ªä¸œè¥¿ï¼Œä¸€ä¸ªæ˜¯MyClasså’ŒMyClass.prototypeä¸­æ‰€æœ‰æ–¹æ³•çš„superæŒ‡å‘ï¼ŒäºŒä¸ªæ˜¯ä½¿MyClassçš„åˆ›å»ºè¿‡ç¨‹ä¸superï¼ˆä¾‹å¦‚è¿™é‡Œçš„Dateï¼‰åŠ¨æ€ç»‘å®šèµ·æ¥ï¼Œä¸‰ä¸ªæ˜¯MyClassè‡ªå·±çš„ç±»æ–¹æ³•ï¼ˆé™æ€æ–¹æ³•ï¼‰ã€‚åªä¸è¿‡ç¬¬ä¸‰ä¸ªæ²¡æœ‰è¡¨ç°åœ¨ç¤ºä¾‹ä¸­ã€‚\n\nè¿™é‡Œç”¨setPrototypeOf()æ”¹çš„æ˜¯MyClassçš„åŸå‹ï¼Œè€Œä¸æ˜¯MyClass.prototypeçš„åŸå‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584328452,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1050196,"avatar":"https://static001.geekbang.org/account/avatar/00/10/06/54/16bb64d0.jpg","nickname":"è›‹é»„é…±","note":"","ucode":"2351562F282B68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":206248,"discussion_content":"è°¢è°¢è€å¸ˆï¼æˆ‘æƒ³ä¹‹å‰æ··èµ·æ¥äº†ï¼Œä»¥ä¸ºprototypeä¸ºnullçš„æ‰æ˜¯åŸå­ç±»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584372705,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273076,"user_name":"å¡å°”","can_delete":false,"product_type":"c1","uid":1445936,"ip_address":"","ucode":"BD6F76BC18FF8F","user_header":"https://static001.geekbang.org/account/avatar/00/16/10/30/c07d419c.jpg","comment_is_top":false,"comment_ctime":1610432201,"is_pvip":false,"replies":[{"id":"99026","content":"é‚£æœ¬ä¹¦ä¸€å®šå†™é”™äº†ã€‚<br><br>è¿™ä¸¤è€…æ²¡æœ‰ç›´æ¥çš„å…³ç³»ã€‚åœ¨ECMAçš„æ¦‚å¿µä¸Šï¼ŒäºŒè€…éƒ½æ˜¯åŸå§‹å€¼ï¼ˆprimitive valuesï¼‰ï¼›åœ¨JavaScriptçš„æ¦‚å¿µä¸Šï¼Œnullæ˜¯å¯¹è±¡ï¼Œè€Œundefinedæ˜¯å€¼ï¼ˆç±»å‹ï¼‰çš„æ•°æ®ã€‚æ— è®ºæ˜¯å“ªä¸€ç§ç†è§£ï¼ŒäºŒè€…éƒ½æ²¡æœ‰æ´¾ç”Ÿæˆ–ç±»å±çš„å…³ç³»ã€‚<br><br>å…³äºäºŒè€…çš„æ›´å¤šåŒºåˆ«ï¼Œè¿˜æ˜¯å»ºè®®çœ‹ä¸€ä¸‹ç»¿çš®ä¹¦ï¼Œä¸“é—¨æœ‰ä¸€èŠ‚æ¥è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Aiming","uid":"1521669","ctime":1610528679,"ip_address":"","comment_id":273076,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1610432201","product_id":100039701,"comment_content":"è€å¸ˆï¼Œæˆ‘è®°å¾—æœ‰ä¸€æœ¬ä¹¦é‡Œè¯´ï¼Œundefinedæ´¾ç”Ÿäºnullã€‚è€å¸ˆè¿™å¥è¯æ€ä¹ˆå»ç†è§£ï¼Œä»–ä¿©åˆ°åº•æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1521669,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/05/7beecd5d.jpg","nickname":"Aiming","note":"","ucode":"66292B32F9960A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513485,"discussion_content":"é‚£æœ¬ä¹¦ä¸€å®šå†™é”™äº†ã€‚\n\nè¿™ä¸¤è€…æ²¡æœ‰ç›´æ¥çš„å…³ç³»ã€‚åœ¨ECMAçš„æ¦‚å¿µä¸Šï¼ŒäºŒè€…éƒ½æ˜¯åŸå§‹å€¼ï¼ˆprimitive valuesï¼‰ï¼›åœ¨JavaScriptçš„æ¦‚å¿µä¸Šï¼Œnullæ˜¯å¯¹è±¡ï¼Œè€Œundefinedæ˜¯å€¼ï¼ˆç±»å‹ï¼‰çš„æ•°æ®ã€‚æ— è®ºæ˜¯å“ªä¸€ç§ç†è§£ï¼ŒäºŒè€…éƒ½æ²¡æœ‰æ´¾ç”Ÿæˆ–ç±»å±çš„å…³ç³»ã€‚\n\nå…³äºäºŒè€…çš„æ›´å¤šåŒºåˆ«ï¼Œè¿˜æ˜¯å»ºè®®çœ‹ä¸€ä¸‹ç»¿çš®ä¹¦ï¼Œä¸“é—¨æœ‰ä¸€èŠ‚æ¥è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610528679,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228552,"user_name":"æ–°å“¥","can_delete":false,"product_type":"c1","uid":1005317,"ip_address":"","ucode":"69CAF2FD490660","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/05/6e0193b5.jpg","comment_is_top":false,"comment_ctime":1592733074,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592733074","product_id":100039701,"comment_content":"æ˜¯æ—¶å€™è®²ä¸€ä¸‹ prototypeå’Œ__proto__äº†ğŸ˜„","like_count":0},{"had_liked":false,"id":221041,"user_name":"HoSalt","can_delete":false,"product_type":"c1","uid":1156074,"ip_address":"","ucode":"610B03E2A002D1","user_header":"https://static001.geekbang.org/account/avatar/00/11/a3/ea/53333dd5.jpg","comment_is_top":false,"comment_ctime":1590390528,"is_pvip":false,"replies":[{"id":"81609","content":"è¿™æ˜¯å› ä¸ºMyClassæœ¬æ¥å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„åŸå‹ï¼ˆç¼ºçœï¼‰æŒ‡å‘Function.prototypeæ˜¯æ­£å¸¸çš„ã€‚<br><br>X.prototypeä¸åº”å½“æ˜¯ä¸€ä¸ªnullå€¼â€”â€”å¯¹äºJSæ¥è¯´ï¼Œç½®nullå€¼æ˜¯â€œæ— æ•ˆå€¼â€ã€‚å½“è¿™ä¸ªå€¼æ— æ•ˆæ—¶ï¼ˆä¾‹å¦‚null&#47;undefinedï¼‰ï¼Œç­‰ä¹‰äºå®ƒä½¿ç”¨Object.prototypeã€‚ä½ è¯•ç€æ‰¾ä¸€ä¸ªå…¶å®ƒå¯¹è±¡æ¥è¯•ä¸€ä¸‹å°±çŸ¥é“äº†ã€‚<br><br>X.prototypeå­˜åœ¨æ— æ•ˆå€¼çš„åŸå› æ˜¯ï¼šç¼ºçœæƒ…å†µä¸‹ï¼Œè¿™ä¸ªå±æ€§æ˜¯å¯å†™çš„ã€‚å› ä¸ºâ€œå¯¹è±¡å±æ€§â€åœ¨å†å²ä¸­å¯ä»¥å†™æˆä»»ä½•å€¼ï¼Œæ‰€ä»¥å†å²ä¸Šå®ƒå°±æ²¡æœ‰â€œå±æ€§ç±»å‹â€è¿™æ ·çš„é™åˆ¶ã€‚è¿™æ˜¯ä¸€ä¸ªç»§æ‰¿å†å²è€Œæ¥çš„è®¾è®¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Aiming","uid":"1521669","ctime":1590461429,"ip_address":"","comment_id":221041,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1590390528","product_id":100039701,"comment_content":"class A {}<br>class B extends A {}<br>B.__proto__ === A &#47;&#47; true<br><br>B.__proto__.__proto__ === Function.prototype &#47;&#47; true<br><br>class MyClass extends null {}<br><br>MyClass.__proto__ === Function.prototype &#47;&#47; true<br>è€å¸ˆç»§æ‰¿è‡ªnullçš„ç±»çš„åŸå‹é“¾ç›´æ¥æŒ‡å‘äº†Function.prototypeï¼Œè€Œå…¶å®ƒçš„æ˜¯åœ¨ä¸­é—´åŠ äº†ä¸€å±‚ï¼Œè¿™æ˜¯ä¸€ç§ç‰¹æ®Šå¤„ç†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1521669,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/05/7beecd5d.jpg","nickname":"Aiming","note":"","ucode":"66292B32F9960A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496307,"discussion_content":"è¿™æ˜¯å› ä¸ºMyClassæœ¬æ¥å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„åŸå‹ï¼ˆç¼ºçœï¼‰æŒ‡å‘Function.prototypeæ˜¯æ­£å¸¸çš„ã€‚\n\nX.prototypeä¸åº”å½“æ˜¯ä¸€ä¸ªnullå€¼â€”â€”å¯¹äºJSæ¥è¯´ï¼Œç½®nullå€¼æ˜¯â€œæ— æ•ˆå€¼â€ã€‚å½“è¿™ä¸ªå€¼æ— æ•ˆæ—¶ï¼ˆä¾‹å¦‚null/undefinedï¼‰ï¼Œç­‰ä¹‰äºå®ƒä½¿ç”¨Object.prototypeã€‚ä½ è¯•ç€æ‰¾ä¸€ä¸ªå…¶å®ƒå¯¹è±¡æ¥è¯•ä¸€ä¸‹å°±çŸ¥é“äº†ã€‚\n\nX.prototypeå­˜åœ¨æ— æ•ˆå€¼çš„åŸå› æ˜¯ï¼šç¼ºçœæƒ…å†µä¸‹ï¼Œè¿™ä¸ªå±æ€§æ˜¯å¯å†™çš„ã€‚å› ä¸ºâ€œå¯¹è±¡å±æ€§â€åœ¨å†å²ä¸­å¯ä»¥å†™æˆä»»ä½•å€¼ï¼Œæ‰€ä»¥å†å²ä¸Šå®ƒå°±æ²¡æœ‰â€œå±æ€§ç±»å‹â€è¿™æ ·çš„é™åˆ¶ã€‚è¿™æ˜¯ä¸€ä¸ªç»§æ‰¿å†å²è€Œæ¥çš„è®¾è®¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590461429,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172363,"user_name":"t86","can_delete":false,"product_type":"c1","uid":1261927,"ip_address":"","ucode":"B336666DC5FFFA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIo6P1BKTjzM5QagaoM99aFmiaTIzpJ7hMG81Hhx9PwCsNjkrpmDPxVHAbQ2MWIKJEYSf5cES9dA7Q/132","comment_is_top":false,"comment_ctime":1579161369,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1579161369","product_id":100039701,"comment_content":"è€å¸ˆçš„åŠŸåŠ›çœŸçš„æ˜¯æ·±ï¼Œä½©æœ","like_count":0},{"had_liked":false,"id":168835,"user_name":"æ°´æœ¨å¹´å","can_delete":false,"product_type":"c1","uid":1446205,"ip_address":"","ucode":"84B925B21F0381","user_header":"https://static001.geekbang.org/account/avatar/00/16/11/3d/58ac17a0.jpg","comment_is_top":false,"comment_ctime":1578195953,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578195953","product_id":100039701,"comment_content":"è€å¸ˆè®²çš„çœŸå¥½ï¼Œæœ‰ä½“ä¼šæœ‰æ”¶è·ğŸ˜„","like_count":0},{"had_liked":false,"id":165127,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1577167323,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577167323","product_id":100039701,"comment_content":"è€å¸ˆè®²å¾—å¤ªå¥½äº†ã€‚","like_count":0}]}