{"id":84344,"title":"03 | äº’æ–¥é”ï¼ˆä¸Šï¼‰ï¼šè§£å†³åŸå­æ€§é—®é¢˜","content":"<p>åœ¨<a href=\"https://time.geekbang.org/column/article/83682\">ç¬¬ä¸€ç¯‡æ–‡ç« </a>ä¸­æˆ‘ä»¬æåˆ°ï¼Œä¸€ä¸ªæˆ–è€…å¤šä¸ªæ“ä½œåœ¨CPUæ‰§è¡Œçš„è¿‡ç¨‹ä¸­ä¸è¢«ä¸­æ–­çš„ç‰¹æ€§ï¼Œç§°ä¸ºâ€œåŸå­æ€§â€ã€‚ç†è§£è¿™ä¸ªç‰¹æ€§æœ‰åŠ©äºä½ åˆ†æå¹¶å‘ç¼–ç¨‹Bugå‡ºç°çš„åŸå› ï¼Œä¾‹å¦‚åˆ©ç”¨å®ƒå¯ä»¥åˆ†æå‡ºlongå‹å˜é‡åœ¨32ä½æœºå™¨ä¸Šè¯»å†™å¯èƒ½å‡ºç°çš„è¯¡å¼‚Bugï¼Œæ˜æ˜å·²ç»æŠŠå˜é‡æˆåŠŸå†™å…¥å†…å­˜ï¼Œé‡æ–°è¯»å‡ºæ¥å´ä¸æ˜¯è‡ªå·±å†™å…¥çš„ã€‚</p><p><strong>é‚£åŸå­æ€§é—®é¢˜åˆ°åº•è¯¥å¦‚ä½•è§£å†³å‘¢ï¼Ÿ</strong></p><p>ä½ å·²ç»çŸ¥é“ï¼ŒåŸå­æ€§é—®é¢˜çš„æºå¤´æ˜¯<strong>çº¿ç¨‹åˆ‡æ¢</strong>ï¼Œå¦‚æœèƒ½å¤Ÿç¦ç”¨çº¿ç¨‹åˆ‡æ¢é‚£ä¸å°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜äº†å—ï¼Ÿè€Œæ“ä½œç³»ç»Ÿåšçº¿ç¨‹åˆ‡æ¢æ˜¯ä¾èµ–CPUä¸­æ–­çš„ï¼Œæ‰€ä»¥ç¦æ­¢CPUå‘ç”Ÿä¸­æ–­å°±èƒ½å¤Ÿç¦æ­¢çº¿ç¨‹åˆ‡æ¢ã€‚</p><p>åœ¨æ—©æœŸå•æ ¸CPUæ—¶ä»£ï¼Œè¿™ä¸ªæ–¹æ¡ˆçš„ç¡®æ˜¯å¯è¡Œçš„ï¼Œè€Œä¸”ä¹Ÿæœ‰å¾ˆå¤šåº”ç”¨æ¡ˆä¾‹ï¼Œä½†æ˜¯å¹¶ä¸é€‚åˆå¤šæ ¸åœºæ™¯ã€‚è¿™é‡Œæˆ‘ä»¬ä»¥32ä½CPUä¸Šæ‰§è¡Œlongå‹å˜é‡çš„å†™æ“ä½œä¸ºä¾‹æ¥è¯´æ˜è¿™ä¸ªé—®é¢˜ï¼Œlongå‹å˜é‡æ˜¯64ä½ï¼Œåœ¨32ä½CPUä¸Šæ‰§è¡Œå†™æ“ä½œä¼šè¢«æ‹†åˆ†æˆä¸¤æ¬¡å†™æ“ä½œï¼ˆå†™é«˜32ä½å’Œå†™ä½32ä½ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/38/28/381b657801c48b3399f19d946bad9e28.png?wh=868*315\" alt=\"\"></p><p>åœ¨å•æ ¸CPUåœºæ™¯ä¸‹ï¼ŒåŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œç¦æ­¢CPUä¸­æ–­ï¼Œæ„å‘³ç€æ“ä½œç³»ç»Ÿä¸ä¼šé‡æ–°è°ƒåº¦çº¿ç¨‹ï¼Œä¹Ÿå°±æ˜¯ç¦æ­¢äº†çº¿ç¨‹åˆ‡æ¢ï¼Œè·å¾—CPUä½¿ç”¨æƒçš„çº¿ç¨‹å°±å¯ä»¥ä¸é—´æ–­åœ°æ‰§è¡Œï¼Œæ‰€ä»¥ä¸¤æ¬¡å†™æ“ä½œä¸€å®šæ˜¯ï¼šè¦ä¹ˆéƒ½è¢«æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½æ²¡æœ‰è¢«æ‰§è¡Œï¼Œå…·æœ‰åŸå­æ€§ã€‚</p><p>ä½†æ˜¯åœ¨å¤šæ ¸åœºæ™¯ä¸‹ï¼ŒåŒä¸€æ—¶åˆ»ï¼Œæœ‰å¯èƒ½æœ‰ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶åœ¨æ‰§è¡Œï¼Œä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œåœ¨CPU-1ä¸Šï¼Œä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œåœ¨CPU-2ä¸Šï¼Œæ­¤æ—¶ç¦æ­¢CPUä¸­æ–­ï¼Œåªèƒ½ä¿è¯CPUä¸Šçš„çº¿ç¨‹è¿ç»­æ‰§è¡Œï¼Œå¹¶ä¸èƒ½ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œå¦‚æœè¿™ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å†™longå‹å˜é‡é«˜32ä½çš„è¯ï¼Œé‚£å°±æœ‰å¯èƒ½å‡ºç°æˆ‘ä»¬å¼€å¤´æåŠçš„è¯¡å¼‚Bugäº†ã€‚</p><!-- [[[read_end]]] --><p>â€œ<strong>åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œ</strong>â€è¿™ä¸ªæ¡ä»¶éå¸¸é‡è¦ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º<strong>äº’æ–¥</strong>ã€‚å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿä¿è¯å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹æ˜¯äº’æ–¥çš„ï¼Œé‚£ä¹ˆï¼Œæ— è®ºæ˜¯å•æ ¸CPUè¿˜æ˜¯å¤šæ ¸CPUï¼Œå°±éƒ½èƒ½ä¿è¯åŸå­æ€§äº†ã€‚</p><h2>ç®€æ˜“é”æ¨¡å‹</h2><p>å½“è°ˆåˆ°äº’æ–¥ï¼Œç›¸ä¿¡èªæ˜çš„ä½ ä¸€å®šæƒ³åˆ°äº†é‚£ä¸ªæ€æ‰‹çº§è§£å†³æ–¹æ¡ˆï¼šé”ã€‚åŒæ—¶å¤§è„‘ä¸­è¿˜ä¼šå‡ºç°ä»¥ä¸‹æ¨¡å‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/3d/a2/3df991e7de14a788b220468836cd48a2.png?wh=1142*640\" alt=\"\"></p><center><span class=\"reference\">ç®€æ˜“é”æ¨¡å‹</span></center><p>æˆ‘ä»¬æŠŠä¸€æ®µéœ€è¦äº’æ–¥æ‰§è¡Œçš„ä»£ç ç§°ä¸º<strong>ä¸´ç•ŒåŒº</strong>ã€‚çº¿ç¨‹åœ¨è¿›å…¥ä¸´ç•ŒåŒºä¹‹å‰ï¼Œé¦–å…ˆå°è¯•åŠ é”lock()ï¼Œå¦‚æœæˆåŠŸï¼Œåˆ™è¿›å…¥ä¸´ç•ŒåŒºï¼Œæ­¤æ—¶æˆ‘ä»¬ç§°è¿™ä¸ªçº¿ç¨‹æŒæœ‰é”ï¼›å¦åˆ™å‘¢å°±ç­‰å¾…ï¼Œç›´åˆ°æŒæœ‰é”çš„çº¿ç¨‹è§£é”ï¼›æŒæœ‰é”çš„çº¿ç¨‹æ‰§è¡Œå®Œä¸´ç•ŒåŒºçš„ä»£ç åï¼Œæ‰§è¡Œè§£é”unlock()ã€‚</p><p>è¿™ä¸ªè¿‡ç¨‹éå¸¸åƒåŠå…¬å®¤é‡Œé«˜å³°æœŸæŠ¢å å‘ä½ï¼Œæ¯ä¸ªäººéƒ½æ˜¯è¿›å‘é”é—¨ï¼ˆåŠ é”ï¼‰ï¼Œå‡ºå‘å¼€é—¨ï¼ˆè§£é”ï¼‰ï¼Œå¦‚å•è¿™ä¸ªäº‹å°±æ˜¯ä¸´ç•ŒåŒºã€‚å¾ˆé•¿æ—¶é—´é‡Œï¼Œæˆ‘ä¹Ÿæ˜¯è¿™ä¹ˆç†è§£çš„ã€‚è¿™æ ·ç†è§£æœ¬èº«æ²¡æœ‰é—®é¢˜ï¼Œä½†å´å¾ˆå®¹æ˜“è®©æˆ‘ä»¬å¿½è§†ä¸¤ä¸ªéå¸¸éå¸¸é‡è¦çš„ç‚¹ï¼šæˆ‘ä»¬é”çš„æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬ä¿æŠ¤çš„åˆæ˜¯ä»€ä¹ˆï¼Ÿ</p><h2>æ”¹è¿›åçš„é”æ¨¡å‹</h2><p>æˆ‘ä»¬çŸ¥é“åœ¨ç°å®ä¸–ç•Œé‡Œï¼Œé”å’Œé”è¦ä¿æŠ¤çš„èµ„æºæ˜¯æœ‰å¯¹åº”å…³ç³»çš„ï¼Œæ¯”å¦‚ä½ ç”¨ä½ å®¶çš„é”ä¿æŠ¤ä½ å®¶çš„ä¸œè¥¿ï¼Œæˆ‘ç”¨æˆ‘å®¶çš„é”ä¿æŠ¤æˆ‘å®¶çš„ä¸œè¥¿ã€‚åœ¨å¹¶å‘ç¼–ç¨‹ä¸–ç•Œé‡Œï¼Œé”å’Œèµ„æºä¹Ÿåº”è¯¥æœ‰è¿™ä¸ªå…³ç³»ï¼Œä½†è¿™ä¸ªå…³ç³»åœ¨æˆ‘ä»¬ä¸Šé¢çš„æ¨¡å‹ä¸­æ˜¯æ²¡æœ‰ä½“ç°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å®Œå–„ä¸€ä¸‹æˆ‘ä»¬çš„æ¨¡å‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/28/2f/287008c8137a43fa032e68a0c23c172f.png?wh=1142*640\" alt=\"\"></p><center><span class=\"reference\">æ”¹è¿›åçš„é”æ¨¡å‹</span></center><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦æŠŠä¸´ç•ŒåŒºè¦ä¿æŠ¤çš„èµ„æºæ ‡æ³¨å‡ºæ¥ï¼Œå¦‚å›¾ä¸­ä¸´ç•ŒåŒºé‡Œå¢åŠ äº†ä¸€ä¸ªå…ƒç´ ï¼šå—ä¿æŠ¤çš„èµ„æºRï¼›å…¶æ¬¡ï¼Œæˆ‘ä»¬è¦ä¿æŠ¤èµ„æºRå°±å¾—ä¸ºå®ƒåˆ›å»ºä¸€æŠŠé”LRï¼›æœ€åï¼Œé’ˆå¯¹è¿™æŠŠé”LRï¼Œæˆ‘ä»¬è¿˜éœ€åœ¨è¿›å‡ºä¸´ç•ŒåŒºæ—¶æ·»ä¸ŠåŠ é”æ“ä½œå’Œè§£é”æ“ä½œã€‚å¦å¤–ï¼Œåœ¨é”LRå’Œå—ä¿æŠ¤èµ„æºä¹‹é—´ï¼Œæˆ‘ç‰¹åœ°ç”¨ä¸€æ¡çº¿åšäº†å…³è”ï¼Œè¿™ä¸ªå…³è”å…³ç³»éå¸¸é‡è¦ã€‚å¾ˆå¤šå¹¶å‘Bugçš„å‡ºç°éƒ½æ˜¯å› ä¸ºæŠŠå®ƒå¿½ç•¥äº†ï¼Œç„¶åå°±å‡ºç°äº†ç±»ä¼¼é”è‡ªå®¶é—¨æ¥ä¿æŠ¤ä»–å®¶èµ„äº§çš„äº‹æƒ…ï¼Œè¿™æ ·çš„Bugéå¸¸ä¸å¥½è¯Šæ–­ï¼Œå› ä¸ºæ½œæ„è¯†é‡Œæˆ‘ä»¬è®¤ä¸ºå·²ç»æ­£ç¡®åŠ é”äº†ã€‚</p><h2>Javaè¯­è¨€æä¾›çš„é”æŠ€æœ¯ï¼šsynchronized</h2><p>é”æ˜¯ä¸€ç§é€šç”¨çš„æŠ€æœ¯æ–¹æ¡ˆï¼ŒJavaè¯­è¨€æä¾›çš„synchronizedå…³é”®å­—ï¼Œå°±æ˜¯é”çš„ä¸€ç§å®ç°ã€‚synchronizedå…³é”®å­—å¯ä»¥ç”¨æ¥ä¿®é¥°æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥ä¿®é¥°ä»£ç å—ï¼Œå®ƒçš„ä½¿ç”¨ç¤ºä¾‹åŸºæœ¬ä¸Šéƒ½æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p><pre><code>class X {\n  // ä¿®é¥°éé™æ€æ–¹æ³•\n  synchronized void foo() {\n    // ä¸´ç•ŒåŒº\n  }\n  // ä¿®é¥°é™æ€æ–¹æ³•\n  synchronized static void bar() {\n    // ä¸´ç•ŒåŒº\n  }\n  // ä¿®é¥°ä»£ç å—\n  Object obj = new Object()ï¼›\n  void baz() {\n    synchronized(obj) {\n      // ä¸´ç•ŒåŒº\n    }\n  }\n}  \n</code></pre><p>çœ‹å®Œä¹‹åä½ å¯èƒ½ä¼šè§‰å¾—æœ‰ç‚¹å¥‡æ€ªï¼Œè¿™ä¸ªå’Œæˆ‘ä»¬ä¸Šé¢æåˆ°çš„æ¨¡å‹æœ‰ç‚¹å¯¹ä¸ä¸Šå·å•Šï¼ŒåŠ é”lock()å’Œè§£é”unlock()åœ¨å“ªé‡Œå‘¢ï¼Ÿå…¶å®è¿™ä¸¤ä¸ªæ“ä½œéƒ½æ˜¯æœ‰çš„ï¼Œåªæ˜¯è¿™ä¸¤ä¸ªæ“ä½œæ˜¯è¢«Javaé»˜é»˜åŠ ä¸Šçš„ï¼ŒJavaç¼–è¯‘å™¨ä¼šåœ¨synchronizedä¿®é¥°çš„æ–¹æ³•æˆ–ä»£ç å—å‰åè‡ªåŠ¨åŠ ä¸ŠåŠ é”lock()å’Œè§£é”unlock()ï¼Œè¿™æ ·åšçš„å¥½å¤„å°±æ˜¯åŠ é”lock()å’Œè§£é”unlock()ä¸€å®šæ˜¯æˆå¯¹å‡ºç°çš„ï¼Œæ¯•ç«Ÿå¿˜è®°è§£é”unlock()å¯æ˜¯ä¸ªè‡´å‘½çš„Bugï¼ˆæ„å‘³ç€å…¶ä»–çº¿ç¨‹åªèƒ½æ­»ç­‰ä¸‹å»äº†ï¼‰ã€‚</p><p>é‚£synchronizedé‡Œçš„åŠ é”lock()å’Œè§£é”unlock()é”å®šçš„å¯¹è±¡åœ¨å“ªé‡Œå‘¢ï¼Ÿä¸Šé¢çš„ä»£ç æˆ‘ä»¬çœ‹åˆ°åªæœ‰ä¿®é¥°ä»£ç å—çš„æ—¶å€™ï¼Œé”å®šäº†ä¸€ä¸ªobjå¯¹è±¡ï¼Œé‚£ä¿®é¥°æ–¹æ³•çš„æ—¶å€™é”å®šçš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿè¿™ä¸ªä¹Ÿæ˜¯Javaçš„ä¸€æ¡éšå¼è§„åˆ™ï¼š</p><blockquote>\n<p>å½“ä¿®é¥°é™æ€æ–¹æ³•çš„æ—¶å€™ï¼Œé”å®šçš„æ˜¯å½“å‰ç±»çš„Classå¯¹è±¡ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­å°±æ˜¯Class Xï¼›<br>\nå½“ä¿®é¥°éé™æ€æ–¹æ³•çš„æ—¶å€™ï¼Œé”å®šçš„æ˜¯å½“å‰å®ä¾‹å¯¹è±¡thisã€‚</p>\n</blockquote><p>å¯¹äºä¸Šé¢çš„ä¾‹å­ï¼Œsynchronizedä¿®é¥°é™æ€æ–¹æ³•ç›¸å½“äº:</p><pre><code>class X {\n  // ä¿®é¥°é™æ€æ–¹æ³•\n  synchronized(X.class) static void bar() {\n    // ä¸´ç•ŒåŒº\n  }\n}\n</code></pre><p>ä¿®é¥°éé™æ€æ–¹æ³•ï¼Œç›¸å½“äºï¼š</p><pre><code>class X {\n  // ä¿®é¥°éé™æ€æ–¹æ³•\n  synchronized(this) void foo() {\n    // ä¸´ç•ŒåŒº\n  }\n}\n</code></pre><h2>ç”¨synchronizedè§£å†³count+=1é—®é¢˜</h2><p>ç›¸ä¿¡ä½ ä¸€å®šè®°å¾—æˆ‘ä»¬å‰é¢æ–‡ç« ä¸­æåˆ°è¿‡çš„count+=1å­˜åœ¨çš„å¹¶å‘é—®é¢˜ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥å°è¯•ç”¨synchronizedæ¥å°è¯•ç‰›åˆ€ä¸€æŠŠï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚SafeCalcè¿™ä¸ªç±»æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼šä¸€ä¸ªæ˜¯get()æ–¹æ³•ï¼Œç”¨æ¥è·å¾—valueçš„å€¼ï¼›å¦ä¸€ä¸ªæ˜¯addOne()æ–¹æ³•ï¼Œç”¨æ¥ç»™valueåŠ 1ï¼Œå¹¶ä¸”addOne()æ–¹æ³•æˆ‘ä»¬ç”¨synchronizedä¿®é¥°ã€‚é‚£ä¹ˆæˆ‘ä»¬ä½¿ç”¨çš„è¿™ä¸¤ä¸ªæ–¹æ³•æœ‰æ²¡æœ‰å¹¶å‘é—®é¢˜å‘¢ï¼Ÿ</p><pre><code>class SafeCalc {\n  long value = 0L;\n  long get() {\n    return value;\n  }\n  synchronized void addOne() {\n    value += 1;\n  }\n}\n</code></pre><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹addOne()æ–¹æ³•ï¼Œé¦–å…ˆå¯ä»¥è‚¯å®šï¼Œè¢«synchronizedä¿®é¥°åï¼Œæ— è®ºæ˜¯å•æ ¸CPUè¿˜æ˜¯å¤šæ ¸CPUï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿæ‰§è¡ŒaddOne()æ–¹æ³•ï¼Œæ‰€ä»¥ä¸€å®šèƒ½ä¿è¯åŸå­æ“ä½œï¼Œé‚£æ˜¯å¦æœ‰å¯è§æ€§é—®é¢˜å‘¢ï¼Ÿè¦å›ç­”è¿™é—®é¢˜ï¼Œå°±è¦é‡æ¸©ä¸€ä¸‹<a href=\"https://time.geekbang.org/column/article/84017\">ä¸Šä¸€ç¯‡æ–‡ç« </a>ä¸­æåˆ°çš„<strong>ç®¡ç¨‹ä¸­é”çš„è§„åˆ™</strong>ã€‚</p><blockquote>\n<p>ç®¡ç¨‹ä¸­é”çš„è§„åˆ™ï¼šå¯¹ä¸€ä¸ªé”çš„è§£é” Happens-Before äºåç»­å¯¹è¿™ä¸ªé”çš„åŠ é”ã€‚</p>\n</blockquote><p>ç®¡ç¨‹ï¼Œå°±æ˜¯æˆ‘ä»¬è¿™é‡Œçš„synchronizedï¼ˆè‡³äºä¸ºä»€ä¹ˆå«ç®¡ç¨‹ï¼Œæˆ‘ä»¬åé¢ä»‹ç»ï¼‰ï¼Œæˆ‘ä»¬çŸ¥é“synchronizedä¿®é¥°çš„ä¸´ç•ŒåŒºæ˜¯äº’æ–¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä¸´ç•ŒåŒºçš„ä»£ç ï¼›è€Œæ‰€è°“â€œå¯¹ä¸€ä¸ªé”è§£é”  Happens-Before åç»­å¯¹è¿™ä¸ªé”çš„åŠ é”â€ï¼ŒæŒ‡çš„æ˜¯å‰ä¸€ä¸ªçº¿ç¨‹çš„è§£é”æ“ä½œå¯¹åä¸€ä¸ªçº¿ç¨‹çš„åŠ é”æ“ä½œå¯è§ï¼Œç»¼åˆHappens-Beforeçš„ä¼ é€’æ€§åŸåˆ™ï¼Œæˆ‘ä»¬å°±èƒ½å¾—å‡ºå‰ä¸€ä¸ªçº¿ç¨‹åœ¨ä¸´ç•ŒåŒºä¿®æ”¹çš„å…±äº«å˜é‡ï¼ˆè¯¥æ“ä½œåœ¨è§£é”ä¹‹å‰ï¼‰ï¼Œå¯¹åç»­è¿›å…¥ä¸´ç•ŒåŒºï¼ˆè¯¥æ“ä½œåœ¨åŠ é”ä¹‹åï¼‰çš„çº¿ç¨‹æ˜¯å¯è§çš„ã€‚</p><p>æŒ‰ç…§è¿™ä¸ªè§„åˆ™ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡ŒaddOne()æ–¹æ³•ï¼Œå¯è§æ€§æ˜¯å¯ä»¥ä¿è¯çš„ï¼Œä¹Ÿå°±è¯´å¦‚æœæœ‰1000ä¸ªçº¿ç¨‹æ‰§è¡ŒaddOne()æ–¹æ³•ï¼Œæœ€ç»ˆç»“æœä¸€å®šæ˜¯valueçš„å€¼å¢åŠ äº†1000ã€‚çœ‹åˆ°è¿™ä¸ªç»“æœï¼Œæˆ‘ä»¬é•¿å‡ºä¸€å£æ°”ï¼Œé—®é¢˜ç»ˆäºè§£å†³äº†ã€‚</p><p>ä½†ä¹Ÿè®¸ï¼Œä½ ä¸€ä¸å°å¿ƒå°±å¿½è§†äº†get()æ–¹æ³•ã€‚æ‰§è¡ŒaddOne()æ–¹æ³•åï¼Œvalueçš„å€¼å¯¹get()æ–¹æ³•æ˜¯å¯è§çš„å—ï¼Ÿè¿™ä¸ªå¯è§æ€§æ˜¯æ²¡æ³•ä¿è¯çš„ã€‚ç®¡ç¨‹ä¸­é”çš„è§„åˆ™ï¼Œæ˜¯åªä¿è¯åç»­å¯¹è¿™ä¸ªé”çš„åŠ é”çš„å¯è§æ€§ï¼Œè€Œget()æ–¹æ³•å¹¶æ²¡æœ‰åŠ é”æ“ä½œï¼Œæ‰€ä»¥å¯è§æ€§æ²¡æ³•ä¿è¯ã€‚é‚£å¦‚ä½•è§£å†³å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯get()æ–¹æ³•ä¹Ÿsynchronizedä¸€ä¸‹ï¼Œå®Œæ•´çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre><code>class SafeCalc {\n  long value = 0L;\n  synchronized long get() {\n    return value;\n  }\n  synchronized void addOne() {\n    value += 1;\n  }\n}\n</code></pre><p>ä¸Šé¢çš„ä»£ç è½¬æ¢ä¸ºæˆ‘ä»¬æåˆ°çš„é”æ¨¡å‹ï¼Œå°±æ˜¯ä¸‹é¢å›¾ç¤ºè¿™ä¸ªæ ·å­ã€‚get()æ–¹æ³•å’ŒaddOne()æ–¹æ³•éƒ½éœ€è¦è®¿é—®valueè¿™ä¸ªå—ä¿æŠ¤çš„èµ„æºï¼Œè¿™ä¸ªèµ„æºç”¨thisè¿™æŠŠé”æ¥ä¿æŠ¤ã€‚çº¿ç¨‹è¦è¿›å…¥ä¸´ç•ŒåŒºget()å’ŒaddOne()ï¼Œå¿…é¡»å…ˆè·å¾—thisè¿™æŠŠé”ï¼Œè¿™æ ·get()å’ŒaddOne()ä¹Ÿæ˜¯äº’æ–¥çš„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/26/f6/26a84ffe2b4a6ae67c8093d29473e1f6.png?wh=1142*640\" alt=\"\"></p><center><span class=\"reference\">ä¿æŠ¤ä¸´ç•ŒåŒºget()å’ŒaddOne()çš„ç¤ºæ„å›¾</span></center><p>è¿™ä¸ªæ¨¡å‹æ›´åƒç°å®ä¸–ç•Œé‡Œé¢çƒèµ›é—¨ç¥¨çš„ç®¡ç†ï¼Œä¸€ä¸ªåº§ä½åªå…è®¸ä¸€ä¸ªäººä½¿ç”¨ï¼Œè¿™ä¸ªåº§ä½å°±æ˜¯â€œå—ä¿æŠ¤èµ„æºâ€ï¼Œçƒåœºçš„å…¥å£å°±æ˜¯Javaç±»é‡Œçš„æ–¹æ³•ï¼Œè€Œé—¨ç¥¨å°±æ˜¯ç”¨æ¥ä¿æŠ¤èµ„æºçš„â€œé”â€ï¼ŒJavaé‡Œçš„æ£€ç¥¨å·¥ä½œæ˜¯ç”±synchronizedè§£å†³çš„ã€‚</p><h2>é”å’Œå—ä¿æŠ¤èµ„æºçš„å…³ç³»</h2><p>æˆ‘ä»¬å‰é¢æåˆ°ï¼Œå—ä¿æŠ¤èµ„æºå’Œé”ä¹‹é—´çš„å…³è”å…³ç³»éå¸¸é‡è¦ï¼Œä»–ä»¬çš„å…³ç³»æ˜¯æ€æ ·çš„å‘¢ï¼Ÿä¸€ä¸ªåˆç†çš„å…³ç³»æ˜¯ï¼š<strong>å—ä¿æŠ¤èµ„æºå’Œé”ä¹‹é—´çš„å…³è”å…³ç³»æ˜¯N:1çš„å…³ç³»</strong>ã€‚è¿˜æ‹¿å‰é¢çƒèµ›é—¨ç¥¨çš„ç®¡ç†æ¥ç±»æ¯”ï¼Œå°±æ˜¯ä¸€ä¸ªåº§ä½ï¼Œæˆ‘ä»¬åªèƒ½ç”¨ä¸€å¼ ç¥¨æ¥ä¿æŠ¤ï¼Œå¦‚æœå¤šå‘äº†é‡å¤çš„ç¥¨ï¼Œé‚£å°±è¦æ‰“æ¶äº†ã€‚ç°å®ä¸–ç•Œé‡Œï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¤šæŠŠé”æ¥ä¿æŠ¤åŒä¸€ä¸ªèµ„æºï¼Œä½†åœ¨å¹¶å‘é¢†åŸŸæ˜¯ä¸è¡Œçš„ï¼Œå¹¶å‘é¢†åŸŸçš„é”å’Œç°å®ä¸–ç•Œçš„é”ä¸æ˜¯å®Œå…¨åŒ¹é…çš„ã€‚ä¸è¿‡å€’æ˜¯å¯ä»¥ç”¨åŒä¸€æŠŠé”æ¥ä¿æŠ¤å¤šä¸ªèµ„æºï¼Œè¿™ä¸ªå¯¹åº”åˆ°ç°å®ä¸–ç•Œå°±æ˜¯æˆ‘ä»¬æ‰€è°“çš„â€œåŒ…åœºâ€äº†ã€‚</p><p>ä¸Šé¢é‚£ä¸ªä¾‹å­æˆ‘ç¨ä½œæ”¹åŠ¨ï¼ŒæŠŠvalueæ”¹æˆé™æ€å˜é‡ï¼ŒæŠŠaddOne()æ–¹æ³•æ”¹æˆé™æ€æ–¹æ³•ï¼Œæ­¤æ—¶get()æ–¹æ³•å’ŒaddOne()æ–¹æ³•æ˜¯å¦å­˜åœ¨å¹¶å‘é—®é¢˜å‘¢ï¼Ÿ</p><pre><code>class SafeCalc {\n  static long value = 0L;\n  synchronized long get() {\n    return value;\n  }\n  synchronized static void addOne() {\n    value += 1;\n  }\n}\n</code></pre><p>å¦‚æœä½ ä»”ç»†è§‚å¯Ÿï¼Œå°±ä¼šå‘ç°æ”¹åŠ¨åçš„ä»£ç æ˜¯ç”¨ä¸¤ä¸ªé”ä¿æŠ¤ä¸€ä¸ªèµ„æºã€‚è¿™ä¸ªå—ä¿æŠ¤çš„èµ„æºå°±æ˜¯é™æ€å˜é‡valueï¼Œä¸¤ä¸ªé”åˆ†åˆ«æ˜¯thiså’ŒSafeCalc.classã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢è¿™å¹…å›¾æ¥å½¢è±¡æè¿°è¿™ä¸ªå…³ç³»ã€‚ç”±äºä¸´ç•ŒåŒºget()å’ŒaddOne()æ˜¯ç”¨ä¸¤ä¸ªé”ä¿æŠ¤çš„ï¼Œå› æ­¤è¿™ä¸¤ä¸ªä¸´ç•ŒåŒºæ²¡æœ‰äº’æ–¥å…³ç³»ï¼Œä¸´ç•ŒåŒºaddOne()å¯¹valueçš„ä¿®æ”¹å¯¹ä¸´ç•ŒåŒºget()ä¹Ÿæ²¡æœ‰å¯è§æ€§ä¿è¯ï¼Œè¿™å°±å¯¼è‡´å¹¶å‘é—®é¢˜äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/60/be/60551e006fca96f581f3dc25424226be.png?wh=1142*640\" alt=\"\"></p><center><span class=\"reference\">ä¸¤æŠŠé”ä¿æŠ¤ä¸€ä¸ªèµ„æºçš„ç¤ºæ„å›¾</span></center><h2>æ€»ç»“</h2><p>äº’æ–¥é”ï¼Œåœ¨å¹¶å‘é¢†åŸŸçš„çŸ¥ååº¦æé«˜ï¼Œåªè¦æœ‰äº†å¹¶å‘é—®é¢˜ï¼Œå¤§å®¶é¦–å…ˆå®¹æ˜“æƒ³åˆ°çš„å°±æ˜¯åŠ é”ï¼Œå› ä¸ºå¤§å®¶éƒ½çŸ¥é“ï¼ŒåŠ é”èƒ½å¤Ÿä¿è¯æ‰§è¡Œä¸´ç•ŒåŒºä»£ç çš„äº’æ–¥æ€§ã€‚è¿™æ ·ç†è§£è™½ç„¶æ­£ç¡®ï¼Œä½†æ˜¯å´ä¸èƒ½å¤ŸæŒ‡å¯¼ä½ çœŸæ­£ç”¨å¥½äº’æ–¥é”ã€‚ä¸´ç•ŒåŒºçš„ä»£ç æ˜¯æ“ä½œå—ä¿æŠ¤èµ„æºçš„è·¯å¾„ï¼Œç±»ä¼¼äºçƒåœºçš„å…¥å£ï¼Œå…¥å£ä¸€å®šè¦æ£€ç¥¨ï¼Œä¹Ÿå°±æ˜¯è¦åŠ é”ï¼Œä½†ä¸æ˜¯éšä¾¿ä¸€æŠŠé”éƒ½èƒ½æœ‰æ•ˆã€‚æ‰€ä»¥å¿…é¡»æ·±å…¥åˆ†æé”å®šçš„å¯¹è±¡å’Œå—ä¿æŠ¤èµ„æºçš„å…³ç³»ï¼Œç»¼åˆè€ƒè™‘å—ä¿æŠ¤èµ„æºçš„è®¿é—®è·¯å¾„ï¼Œå¤šæ–¹é¢è€ƒé‡æ‰èƒ½ç”¨å¥½äº’æ–¥é”ã€‚</p><p>synchronizedæ˜¯Javaåœ¨è¯­è¨€å±‚é¢æä¾›çš„äº’æ–¥åŸè¯­ï¼Œå…¶å®Javaé‡Œé¢è¿˜æœ‰å¾ˆå¤šå…¶ä»–ç±»å‹çš„é”ï¼Œä½†ä½œä¸ºäº’æ–¥é”ï¼ŒåŸç†éƒ½æ˜¯ç›¸é€šçš„ï¼šé”ï¼Œä¸€å®šæœ‰ä¸€ä¸ªè¦é”å®šçš„å¯¹è±¡ï¼Œè‡³äºè¿™ä¸ªé”å®šçš„å¯¹è±¡è¦ä¿æŠ¤çš„èµ„æºä»¥åŠåœ¨å“ªé‡ŒåŠ é”/è§£é”ï¼Œå°±å±äºè®¾è®¡å±‚é¢çš„äº‹æƒ…äº†ã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>ä¸‹é¢çš„ä»£ç ç”¨synchronizedä¿®é¥°ä»£ç å—æ¥å°è¯•è§£å†³å¹¶å‘é—®é¢˜ï¼Œä½ è§‰å¾—è¿™ä¸ªä½¿ç”¨æ–¹å¼æ­£ç¡®å—ï¼Ÿæœ‰å“ªäº›é—®é¢˜å‘¢ï¼Ÿèƒ½è§£å†³å¯è§æ€§å’ŒåŸå­æ€§é—®é¢˜å—ï¼Ÿ</p><pre><code>class SafeCalc {\n  long value = 0L;\n  long get() {\n    synchronized (new Object()) {\n      return value;\n    }\n  }\n  void addOne() {\n    synchronized (new Object()) {\n      value += 1;\n    }\n  }\n}\n</code></pre><p>æ¬¢è¿åœ¨ç•™è¨€åŒºä¸æˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºè®°å½•ä½ çš„æ€è€ƒè¿‡ç¨‹ã€‚æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p><p></p>","comments":[{"had_liked":false,"id":72841,"user_name":"å¥½ç‰™","can_delete":false,"product_type":"c1","uid":1117320,"ip_address":"","ucode":"F36A824C1AB19A","user_header":"","comment_is_top":false,"comment_ctime":1551747038,"is_pvip":false,"replies":[{"id":"26476","content":"synchronizedçš„å®ç°éƒ½çŸ¥é“äº†ï¼Œå‰å®³ï¼","user_name":"ä½œè€…å›å¤","comment_id":72841,"uid":"1269969","ip_address":"","utype":1,"ctime":1551793643,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":20,"race_medal":0,"score":"2140445460446","product_id":100023901,"comment_content":"åŠ é”æœ¬è´¨å°±æ˜¯åœ¨é”å¯¹è±¡çš„å¯¹è±¡å¤´ä¸­å†™å…¥å½“å‰çº¿ç¨‹idï¼Œä½†æ˜¯new objectæ¯æ¬¡åœ¨å†…å­˜ä¸­éƒ½æ˜¯æ–°å¯¹è±¡ï¼Œæ‰€ä»¥åŠ é”æ— æ•ˆã€‚","like_count":498,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441780,"discussion_content":"synchronizedçš„å®ç°éƒ½çŸ¥é“äº†ï¼Œå‰å®³ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551793643,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1507024,"avatar":"https://static001.geekbang.org/account/avatar/00/16/fe/d0/e80e4a7e.jpg","nickname":"zhangyi","note":"","ucode":"0C4CAE9DA878F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289853,"discussion_content":"éº»çƒ¦å„ä½æŒ‡å‡ºä¸€ä¸‹æˆ‘å“ªé‡Œé”™è¯¯äº†ã€‚æˆ‘ä¸å®Œå…¨èµåŒæ¥¼ä¸»ã€‚\nåå‘é”æ—¶ï¼Œé”çš„mardwordå­˜çš„æ‰æ˜¯çº¿ç¨‹çš„idã€‚é‡é‡çº§é”ï¼Œå­˜çš„æ˜¯monitorçš„æŒ‡é’ˆã€‚","likes_number":19,"is_delete":false,"is_hidden":false,"ctime":1594235338,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1508990,"avatar":"https://static001.geekbang.org/account/avatar/00/17/06/7e/735968e2.jpg","nickname":"è¥¿é—¨å¹ç‰›","note":"","ucode":"E5D3624DDE1E83","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1507024,"avatar":"https://static001.geekbang.org/account/avatar/00/16/fe/d0/e80e4a7e.jpg","nickname":"zhangyi","note":"","ucode":"0C4CAE9DA878F3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302254,"discussion_content":"ä¸é”™ï¼Œè¿™é‡Œè¦æ³¨æ„é”çš„å‡çº§ï¼Œæ¥¼ä¸»æè¿°çš„æ˜¯åå‘é”","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598860183,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":289853,"ip_address":""},"score":302254,"extra":""},{"author":{"id":2268436,"avatar":"","nickname":"binf","note":"","ucode":"AE6D7CD6CAFE4D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1507024,"avatar":"https://static001.geekbang.org/account/avatar/00/16/fe/d0/e80e4a7e.jpg","nickname":"zhangyi","note":"","ucode":"0C4CAE9DA878F3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":324626,"discussion_content":"ä¸æ˜¯ï¼Œè€å¸ˆèƒ½ä¸èƒ½ä»”ç»†çœ‹ä¸‹è¯„è®ºï¼Œå¥½å‡ æ¬¡äº†ï¼Œè¿™ç§ç‰‡é¢ç”šè‡³é”™è¯¯çš„è¯„è®ºçœŸçš„è¯¯å¯¼äººï¼Œè™½ç„¶æˆ‘è§‰å¾—æ–‡ç« å†™å¾—ä¸é”™ï¼Œä½†æ˜¯å›å¤è¿˜æ˜¯ä¸è¦åªæ³¨é‡æ•°é‡","likes_number":16,"is_delete":false,"is_hidden":false,"ctime":1605145402,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":289853,"ip_address":""},"score":324626,"extra":""},{"author":{"id":2330905,"avatar":"https://static001.geekbang.org/account/avatar/00/23/91/19/6a3e7efc.jpg","nickname":"ç¨‹åºå‘˜9527","note":"","ucode":"1A1609F6BEAD84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1507024,"avatar":"https://static001.geekbang.org/account/avatar/00/16/fe/d0/e80e4a7e.jpg","nickname":"zhangyi","note":"","ucode":"0C4CAE9DA878F3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378962,"discussion_content":"è½»é‡çº§é”ä¸­ï¼ŒMark Wordçš„å€¼éƒ½è¢«å­˜åœ¨äº†æ ˆå¸§é‡Œçš„Lock Recordé‡Œï¼ŒLock Recordé‡Œå­˜å‚¨é”å¯¹è±¡ç›®å‰çš„Mark Wordçš„æ‹·è´","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1623564235,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":289853,"ip_address":""},"score":378962,"extra":""}]},{"author":{"id":1437158,"avatar":"https://static001.geekbang.org/account/avatar/00/15/ed/e6/75a32708.jpg","nickname":"æ—¥æ‹±ä¸€å…µ","note":"","ucode":"D6386E5CD7C061","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5364,"discussion_content":"jdkä¸æ–­åœ¨ä¼˜åŒ–synchronizedï¼Œæœ‰äº†åœ¨å¤´åŠ çº¿ç¨‹idï¼Œå°±å½¢æˆäº†åå‘é”ï¼Œç»Ÿä¸€çº¿ç¨‹å†æ¬¡è®¿é—®å°±å‡å°‘äº†é”è®¿é—®çš„å¼€é”€","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1566204347,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2124869,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/WZyEAvo4qPrQ1vhNTeMjjbO9G8A9s20Ka5icbcxxjIibWwPsjrl8OvXDFxpRxYRhibXe6gfNngHAa0BrGJW7kfovA/132","nickname":"é•¿è·¯æ¼«æ¼«","note":"","ucode":"5B3D83B81C9CFF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1437158,"avatar":"https://static001.geekbang.org/account/avatar/00/15/ed/e6/75a32708.jpg","nickname":"æ—¥æ‹±ä¸€å…µ","note":"","ucode":"D6386E5CD7C061","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545673,"discussion_content":"è¿™ä¹Ÿå¤ªå·§åˆäº†ï¼Œä»Šå¤©æ­£å¥½çœ‹åˆ°ä½ çš„ä¸€ç¯‡å¾®ä¿¡å…¬ä¼—å·æ–‡ç« ï¼Œç»“æœç«‹é©¬åœ¨è¿™çœ‹è§ä½ äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1642038439,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":5364,"ip_address":""},"score":545673,"extra":""}]},{"author":{"id":1631281,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er8ok3W1JuxlK1eHjfylzhBwkFm8lkIr4KibzLic5YjonIXj4t9RNkKV0PBUZv1wPM0fwdIwib6pickGA/132","nickname":"Geek_e08661","note":"","ucode":"DFD60339814CA6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5575,"discussion_content":"å•cpuå•æ ¸å¿ƒï¼Œä¸ºä»€ä¹ˆä¼šå‡ºç°å¯è§è¡Œé—®é¢˜ï¼Ÿå¦‚ä¸‹ç¨‹åºï¼š\npublic class A implements Runnable {\n    public Integer id = 1;\n\n    A() {\n    }\n\n    public void run() {\n        System.out.println(&#34;A is begin!&#34;);\n        B b = new B();\n\n        do {\n//è¿™é‡Œæ‰“å°ä¸€æ¬¡\n            b.error(this.id);       \n        } while(this.id != 2);\n//è¿™é‡Œæ‰“å°ä¸€æ¬¡\n        b.error(this.id);\n\n        System.out.println(&#34;A is finish!&#34;);\n    }\n\n    public static void main(String[] args) {\n        A a = new A();\n        (new Thread(a)).start();\n        try {\n            Thread.sleep(5L);\n        } catch (InterruptedException var3) {\n            var3.printStackTrace();\n        }\n\n        a.id = 2;\n    }\n}\n\nclass B {\n    private int a;\n    private int b = 0;\n\n    B() {\n    }\n\n    public int error(int id) {\n        System.out.println(&#34;b=&#34;+b+&#34;#####&#34;+&#34;id=&#34;+id);\n        ++this.b;\n        return id;\n    }\n\n    public void setId(int a) {\n        this.a = a;\n    }\n\n    public int getId() {\n        return this.a;\n    }\n\n    public int getB() {\n        return this.b;\n    }\n}\né˜¿é‡Œå­¦ç”Ÿæœºå•cpuå•æ ¸å•çº¿ç¨‹ï¼ŒæŸ¥çœ‹å‘½ä»¤å¦‚ä¸‹ï¼š\n # æ€»æ ¸æ•° = ç‰©ç†CPUä¸ªæ•° X æ¯é¢—ç‰©ç†CPUçš„æ ¸æ•° \n       # æ€»é€»è¾‘CPUæ•° = ç‰©ç†CPUä¸ªæ•° X æ¯é¢—ç‰©ç†CPUçš„æ ¸æ•° X è¶…çº¿ç¨‹æ•°\n       # æŸ¥çœ‹ç‰©ç†CPUä¸ªæ•°\n       cat /proc/cpuinfo| grep &#34;physical id&#34;| sort| uniq| wc -l\n       # æŸ¥çœ‹æ¯ä¸ªç‰©ç†CPUä¸­coreçš„ä¸ªæ•°(å³æ ¸æ•°)\n       cat /proc/cpuinfo| grep &#34;cpu cores&#34;| uniq\n       # æŸ¥çœ‹é€»è¾‘CPUçš„ä¸ªæ•°\n       cat /proc/cpuinfo| grep &#34;processor&#34;| wc -l\n      #æŸ¥çœ‹çº¿ç¨‹æ•°\n       grep &#39;processor&#39;        /proc/cpuinfo | sort -u | wc -l      \n\nè¿è¡Œç»“æœåªæ‰“å°å‡ºä¸€ä¸ª2ï¼Œå¦‚æœä¸¤ä¸ªçº¿ç¨‹å…±ç”¨ä¸€ä¸ªcpuç¼“å­˜ï¼Œé‚£ä¹ˆåœ¨mainçº¿ç¨‹æ›´æ”¹b=2æ—¶ï¼Œå¯¹äºçº¿ç¨‹Aä¹Ÿåº”è¯¥æ˜¯å¯è§çš„ï¼Œåº”è¯¥ä¼šæ‰“å°ä¸¤ä¸ª2ï¼Œä½†æ˜¯å®é™…æƒ…å†µä¼šå­˜åœ¨å¯è§æ€§ï¼Œä¸æ˜¯å¾ˆæ˜ç™½ï¼Œå¸Œæœ›æœ‰äººçœ‹è§èƒ½æŒ‡å¯¼ä¸€ä¸‹ï¼Œè°¢è°¢ğŸ™","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1566358872,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1018240,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/89/80/3666ced3.jpg","nickname":"é»„æµ©ç‰¹","note":"","ucode":"C3A4BBF4FB8519","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1631281,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er8ok3W1JuxlK1eHjfylzhBwkFm8lkIr4KibzLic5YjonIXj4t9RNkKV0PBUZv1wPM0fwdIwib6pickGA/132","nickname":"Geek_e08661","note":"","ucode":"DFD60339814CA6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":32670,"discussion_content":"æ‰“å°ä¸¤ä¸ª2çš„æƒ…å†µæ˜¯ ä¸»çº¿ç¨‹ä¿®æ”¹ a = 2 å‘ç”Ÿåœ¨ while æ¡ä»¶åˆ¤æ–­ä¹‹å æ‰“å° id æ–¹æ³•ä¹‹å‰, å¦‚æœæ˜¯åœ¨æ‰“å°æ–¹æ³•ä¹‹å , ä¸‹æ¬¡while æ¡ä»¶åˆ¤æ–­ä¹‹å‰, å°±åªæœ‰1ä¸ª2","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1571056569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":5575,"ip_address":""},"score":32670,"extra":""},{"author":{"id":1361746,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c7/52/c5adf218.jpg","nickname":"å–œæ¬¢åœ°çƒçš„é˜¿åŸ¹åŒå­¦","note":"","ucode":"5F97037585F857","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1631281,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er8ok3W1JuxlK1eHjfylzhBwkFm8lkIr4KibzLic5YjonIXj4t9RNkKV0PBUZv1wPM0fwdIwib6pickGA/132","nickname":"Geek_e08661","note":"","ucode":"DFD60339814CA6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":89965,"discussion_content":"       do {\n            b.error(this.id);\n        } while(this.id != 2);\nä½ ä¼ é€’çš„æ˜¯ä¸€ä¸ªIntegerå€¼ï¼Œè¯¥å€¼æ˜¯finalå‹ï¼Œå› æ­¤Aå¯¹è±¡ä¸­çš„idåŠthis.idåœ¨è°ƒç”¨æ–¹æ³•error(int id) è¿‡åï¼Œå€¼ä¸ä¼šå˜çš„ã€‚æ‰€ä»¥æ ¹æœ¬å°±ä¸ä¼šè¿›å…¥whileå¾ªç¯ï¼Œè¿™ä¸ªä¸æ˜¯å¯è§æ€§é—®é¢˜ï¼Œè€Œæ˜¯Javaå‡½æ•°ä¼ å€¼é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576765084,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":5575,"ip_address":""},"score":89965,"extra":""},{"author":{"id":1019506,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8e/72/63c94eee.jpg","nickname":"é»„é©¬","note":"","ucode":"93E391B4678EC2","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":1361746,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c7/52/c5adf218.jpg","nickname":"å–œæ¬¢åœ°çƒçš„é˜¿åŸ¹åŒå­¦","note":"","ucode":"5F97037585F857","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":205563,"discussion_content":"è¦äº’æ–¥éœ€è¦äº‰å¤ºåŒä¸€æŠŠé”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584322381,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":89965,"ip_address":""},"score":205563,"extra":""}]},{"author":{"id":1983640,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/44/98/bb591ddf.jpg","nickname":"ååƒçš„æ²³è±š","note":"","ucode":"BE8BDBBF1D0FED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286490,"discussion_content":"è¿™ã€‚ã€‚ã€‚ jvmåˆ›å»ºå¯¹è±¡  è¿èµ·æ¥äº† çœŸå¼º","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1593185202,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1581294,"avatar":"","nickname":"Geek_be4cec","note":"","ucode":"C87642D655EAC3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3425,"discussion_content":"çœ‹æ¥è¯»è¿‡synchronizedçš„æºç ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1564476033,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1341612,"avatar":"https://static001.geekbang.org/account/avatar/00/14/78/ac/e5e6e7f3.jpg","nickname":"å¤å¤œ","note":"","ucode":"0A82D3CFCEDF07","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1581294,"avatar":"","nickname":"Geek_be4cec","note":"","ucode":"C87642D655EAC3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3906,"discussion_content":"synæºç æ€ä¹ˆè¯»ï¼Ÿçœ‹è™šæ‹Ÿæœºçš„æºç ï¼Ÿ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1564969245,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":3425,"ip_address":""},"score":3906,"extra":""},{"author":{"id":1404537,"avatar":"https://static001.geekbang.org/account/avatar/00/15/6e/79/772d64f8.jpg","nickname":"å¯Œå¤§æµ·","note":"","ucode":"365FACE3567CEF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1341612,"avatar":"https://static001.geekbang.org/account/avatar/00/14/78/ac/e5e6e7f3.jpg","nickname":"å¤å¤œ","note":"","ucode":"0A82D3CFCEDF07","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":93584,"discussion_content":"å¯ä»¥ç”¨JOLå·¥å…·æŸ¥çœ‹å¯¹è±¡å¤´ä¸­çš„ä¿¡æ¯ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1576932552,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":3906,"ip_address":""},"score":93584,"extra":""},{"author":{"id":1341612,"avatar":"https://static001.geekbang.org/account/avatar/00/14/78/ac/e5e6e7f3.jpg","nickname":"å¤å¤œ","note":"","ucode":"0A82D3CFCEDF07","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1404537,"avatar":"https://static001.geekbang.org/account/avatar/00/15/6e/79/772d64f8.jpg","nickname":"å¯Œå¤§æµ·","note":"","ucode":"365FACE3567CEF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286619,"discussion_content":"å¤šè°¢","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1593248171,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":93584,"ip_address":""},"score":286619,"extra":""}]},{"author":{"id":1125985,"avatar":"https://static001.geekbang.org/account/avatar/00/11/2e/61/72a083ea.jpg","nickname":"å°å…¬å¸éƒ½ä¸ç»™æˆ‘è¿›å°±èµ–é—¨å£å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ","note":"","ucode":"10C8AF52F68A29","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2051,"discussion_content":"å‰å®³","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1563204581,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111870,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK2Az5uTh9ZGVA7yQCj1BXtXuicPRkvJicA97AoN9xX3bnPcUYglTMXJeZeoVbPQeJA7ICvQhR3KQ0w/132","nickname":"æ—¥ä¸è½å¸å›½","note":"","ucode":"6A11ABBD8AC438","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5499,"discussion_content":"å­¦ä¹ å­¦ä¹ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566307603,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1400962,"avatar":"https://static001.geekbang.org/account/avatar/00/15/60/82/9a43504b.jpg","nickname":"[è€¶]å‹è¶…î–","note":"","ucode":"890572F77C3670","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2995,"discussion_content":"ç‰›","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1564104153,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73098,"user_name":"w1sl1y","can_delete":false,"product_type":"c1","uid":1270958,"ip_address":"","ucode":"915073A14B17AB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erBkHFLUBpftqQlK5brd3EDaQFaEfYLfc9iaQrDNJv4eHeSRnSgE5vKnSibJvjUb5hJx5r5nOwa2bRw/132","comment_is_top":false,"comment_ctime":1551797702,"is_pvip":false,"replies":[{"id":"26578","content":"ğŸ‘å‰å®³<br>","user_name":"ä½œè€…å›å¤","comment_id":73098,"uid":"1269969","ip_address":"","utype":1,"ctime":1551830875,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":11,"race_medal":0,"score":"1092473490886","product_id":100023901,"comment_content":"ç»è¿‡JVMé€ƒé€¸åˆ†æçš„ä¼˜åŒ–åï¼Œè¿™ä¸ªsyncä»£ç ç›´æ¥ä¼šè¢«ä¼˜åŒ–æ‰ï¼Œæ‰€ä»¥åœ¨è¿è¡Œæ—¶è¯¥ä»£ç å—æ˜¯æ— é”çš„","like_count":254,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441910,"discussion_content":"ğŸ‘å‰å®³\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551830875,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2330905,"avatar":"https://static001.geekbang.org/account/avatar/00/23/91/19/6a3e7efc.jpg","nickname":"ç¨‹åºå‘˜9527","note":"","ucode":"1A1609F6BEAD84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378963,"discussion_content":"é”æ¶ˆé™¤ï¼šå¦‚æœåˆ¤æ–­åˆ°ä¸€æ®µä»£ç ä¸­ï¼Œåœ¨å †ä¸Šçš„æ‰€æœ‰æ•°æ®éƒ½ä¸ä¼šé€ƒé€¸å‡ºå»è¢«å…¶ä»–çº¿ç¨‹è®¿é—®åˆ°ï¼Œé‚£å°±å¯ä»¥æŠŠå®ƒä»¬å½“ä½œæ ˆä¸Šæ•°æ®å¯¹å¾…ï¼Œè®¤ä¸ºå®ƒä»¬æ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼ŒåŒæ­¥åŠ é”è‡ªç„¶å°±æ— é¡»è¿›è¡Œã€‚","likes_number":11,"is_delete":false,"is_hidden":false,"ctime":1623564394,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1583588,"avatar":"https://static001.geekbang.org/account/avatar/00/18/29/e4/ade74d94.jpg","nickname":"hejun","note":"","ucode":"DCF01B4159178F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":29851,"discussion_content":"å‰å®³ğŸ‘","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1570787252,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1307080,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f1/c8/8e6dc340.jpg","nickname":"potato00fa","note":"","ucode":"D179E68D87CC50","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":13069,"discussion_content":"ç‰›æ‰¹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1568638228,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1274495,"avatar":"https://static001.geekbang.org/account/avatar/00/13/72/7f/5da093c5.jpg","nickname":"æ°´ç›®æ²¾","note":"","ucode":"FDD1D15C277D58","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550629,"discussion_content":"ä¸€è¯­åŒå…³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644647001,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1507024,"avatar":"https://static001.geekbang.org/account/avatar/00/16/fe/d0/e80e4a7e.jpg","nickname":"zhangyi","note":"","ucode":"0C4CAE9DA878F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289854,"discussion_content":"ç‰›é€¼ï¼Œç¡®å®ç›´æ¥ä¼˜åŒ–äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594235444,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1182802,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0c/52/f25c3636.jpg","nickname":"é•¿è„–å­æ ‘","note":"","ucode":"D9090EF67EEB1B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":229585,"discussion_content":"666","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586667801,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005381,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/45/c418ea5c.jpg","nickname":"æŒ‡å°–æµé€","note":"","ucode":"417009F674FAF1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":220443,"discussion_content":"è¯·é—®ä¸‹ï¼ŒJVMé€ƒé€¸åˆ†æçš„å‡ºå¤„æ˜¯å“ªé‡Œï¼ŸJavaè™šæ‹Ÿæœºè§„èŒƒå—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585877642,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1239277,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e8/ed/f9347e5e.jpg","nickname":"æˆ‘çš„è…¿è…¿","note":"","ucode":"2AAA36A7C3AD75","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1005381,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/45/c418ea5c.jpg","nickname":"æŒ‡å°–æµé€","note":"","ucode":"417009F674FAF1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":269641,"discussion_content":"è¯·å‡ºé—¨å³è½¬çœ‹javaè™šæ‹Ÿæœºé‚£é—¨è¯¾","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1589935521,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":220443,"ip_address":""},"score":269641,"extra":""}]},{"author":{"id":1111870,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK2Az5uTh9ZGVA7yQCj1BXtXuicPRkvJicA97AoN9xX3bnPcUYglTMXJeZeoVbPQeJA7ICvQhR3KQ0w/132","nickname":"æ—¥ä¸è½å¸å›½","note":"","ucode":"6A11ABBD8AC438","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5500,"discussion_content":"å­¦ä¹ å­¦ä¹ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566307632,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1400962,"avatar":"https://static001.geekbang.org/account/avatar/00/15/60/82/9a43504b.jpg","nickname":"[è€¶]å‹è¶…î–","note":"","ucode":"890572F77C3670","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2999,"discussion_content":"å‰å®³ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564104243,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79180,"user_name":"sbweiğŸš´","can_delete":false,"product_type":"c1","uid":1203659,"ip_address":"","ucode":"A90E57298670A6","user_header":"https://static001.geekbang.org/account/avatar/00/12/5d/cb/3507f11c.jpg","comment_is_top":false,"comment_ctime":1553396261,"is_pvip":false,"discussion_count":14,"race_medal":0,"score":"650093457957","product_id":100023901,"comment_content":"æœ€åçš„æ€è€ƒé¢˜: å¤šæŠŠé”ä¿æŠ¤åŒä¸€ä¸ªèµ„æºï¼Œå°±åƒä¸€ä¸ªå•æ‰€å‘ä½ï¼Œæœ‰Nå¤šé—¨å¯ä»¥è¿›å»ï¼Œæ²¡æœ‰ä¸æ¯«ä¿æŠ¤æ•ˆæœï¼Œç®¡ç†å‘˜ä¸€çœ‹ï¼Œè¿˜ä¸å¦‚æŠŠé—¨éƒ½æ’¤äº†ï¼Œå¼„æˆå¼€æ”¾å¼(ç¼–è¯‘å™¨ä»£ç ä¼˜åŒ–)ğŸ˜‚ã€‚","like_count":151,"discussions":[{"author":{"id":1507024,"avatar":"https://static001.geekbang.org/account/avatar/00/16/fe/d0/e80e4a7e.jpg","nickname":"zhangyi","note":"","ucode":"0C4CAE9DA878F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289855,"discussion_content":"ç›´æ¥é”æ¶ˆé™¤äº†ï¼Œæ ¹æœ¬æ— é”ï¼Œå°±æ²¡æœ‰æ˜¯å¦æ˜¯åŒä¸€æŠŠé”è¿™ä¸ªè¯´æ³•äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1594235574,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1058131,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/gDdDyl6Txc6ictXNfx39XdB1zBzQWx4suEMDTXiaaJ0DK7AhVibbr3YBFNM0gTjeuicVp7unhEm6SRjlasicMKG01ww/132","nickname":"ã€‚","note":"","ucode":"8715892499F2B2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":30941,"discussion_content":"è¿™ä¸ªè§£é‡Šå‰å®³","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1570871268,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1747184,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/a8/f0/529f15e9.jpg","nickname":"ç¬¬å››å•å…ƒ","note":"","ucode":"3ED9D553E1DE17","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583880,"discussion_content":"è¿™ä¸ªå½¢å®¹666ï¼Œé€šä¿—æ˜“æ‡‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660462526,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2076251,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/ae/5b/4bd42286.jpg","nickname":"å®‹è®¡æ´‹","note":"","ucode":"9A34E8F71C6CBD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567563,"discussion_content":"é˜²ç›—é—¨ï¼šæˆ‘å°±æ˜¯ä¸¤ä¸ªé—¨ä¿æŠ¤åŒä¸€ä¸ªèµ„æº ^=^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650943218,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1810995,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a2/33/493d4b5b.jpg","nickname":"@","note":"","ucode":"D278E14517F8A5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":361162,"discussion_content":"æˆ‘ä¸€ä¸‹å°±çœ‹æ‡‚äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616599820,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1047134,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fa/5e/d7331a3e.jpg","nickname":"å°é±¼å¹²","note":"","ucode":"74C59DA5181880","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349353,"discussion_content":"è§£é‡Šå‰å®³äº†ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613121137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2268436,"avatar":"","nickname":"binf","note":"","ucode":"AE6D7CD6CAFE4D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":324629,"discussion_content":"å¦‚æœå…¶ä¸­æœ‰ä¸€æŠŠé”æœ‰ç«äº‰ï¼Œæ˜¯ä¸ä¼šè¢«ä¼˜åŒ–æ‰çš„å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605145707,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1489957,"avatar":"https://static001.geekbang.org/account/avatar/00/16/bc/25/1c92a90c.jpg","nickname":"tt","note":"","ucode":"7753B79AD5A9AC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298945,"discussion_content":"ä¸€ä¸‹å°±æ‡‚äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597485914,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1610259,"avatar":"https://static001.geekbang.org/account/avatar/00/18/92/13/655afbf5.jpg","nickname":"yoyoga","note":"","ucode":"9485213CE234B9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298467,"discussion_content":"äººæ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597305422,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1591405,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqqtFTbZcJcKq4icuCF8I3VoLMK3W8sx9askp6vrnY3DLtghI7svXpMIchn44ySY24ic4l8ADWFibLJA/132","nickname":"jack","note":"","ucode":"5EE763FEA7D755","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":230330,"discussion_content":"ä¸ºä»€ä¹ˆä¸æ˜¯ä¸€ä¸ªé—¨ä¸Šæœ‰å¤šæŠŠé”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586740062,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1107484,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e6/1c/9d3744ee.jpg","nickname":"å°æè®²æºç ","note":"","ucode":"2573037D7C82C8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1591405,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqqtFTbZcJcKq4icuCF8I3VoLMK3W8sx9askp6vrnY3DLtghI7svXpMIchn44ySY24ic4l8ADWFibLJA/132","nickname":"jack","note":"","ucode":"5EE763FEA7D755","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287967,"discussion_content":"newçš„å¯¹è±¡ä¸ä¸€æ ·ï¼Œè‚¯å®šä¸æ˜¯ä¸€ä¸ªé—¨å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593602089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":230330,"ip_address":""},"score":287967,"extra":""}]},{"author":{"id":1033425,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c4/d1/209abdd6.jpg","nickname":"å°ç‹¼","note":"","ucode":"FEAC7864FC1D20","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":208831,"discussion_content":"ç²¾è¾Ÿçš„è§£é‡Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584582820,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1718222,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/37/ce/b15e3314.jpg","nickname":"ç‰§æ¯…","note":"","ucode":"F75615CB14B8FF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":62392,"discussion_content":"æ¸…æ–°è„±ä¿—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574839826,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1261326,"avatar":"https://static001.geekbang.org/account/avatar/00/13/3f/0e/3a2fb9ff.jpg","nickname":"çˆ½äº†ä¸ªçˆ½","note":"","ucode":"D5B10F75A02AB1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":60996,"discussion_content":"é€šä¿—æ˜“æ‡‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574768734,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72865,"user_name":"è€æ¨åŒå¿—","can_delete":false,"product_type":"c1","uid":1246199,"ip_address":"","ucode":"3F334F0CFD3DE6","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/f7/3a493bec.jpg","comment_is_top":false,"comment_ctime":1551748614,"is_pvip":false,"replies":[{"id":"26481","content":"å®åœ¨æ˜¯å¤ªå‰å®³äº†ï¼ï¼ï¼","user_name":"ä½œè€…å›å¤","comment_id":72865,"uid":"1269969","ip_address":"","utype":1,"ctime":1551794265,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":8,"race_medal":0,"score":"448228347398","product_id":100023901,"comment_content":"ä¸¤æŠŠä¸åŒçš„é”ï¼Œä¸èƒ½ä¿æŠ¤ä¸´ç•Œèµ„æºã€‚è€Œä¸”è¿™ç§newå‡ºæ¥åªåœ¨ä¸€ä¸ªåœ°æ–¹ä½¿ç”¨çš„å¯¹è±¡ï¼Œå…¶å®ƒçº¿ç¨‹ä¸èƒ½å¯¹å®ƒè§£é”ï¼Œè¿™ä¸ªé”ä¼šè¢«ç¼–è¯‘å™¨ä¼˜åŒ–æ‰ã€‚å’Œæ²¡æœ‰syncronizedä»£ç å—æ•ˆæœæ˜¯ç›¸åŒçš„","like_count":104,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441797,"discussion_content":"å®åœ¨æ˜¯å¤ªå‰å®³äº†ï¼ï¼ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551794265,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1874999,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/9c/37/253ea895.jpg","nickname":"æˆ‘ä¸æ˜¯ç å†œ","note":"","ucode":"EB4BB711CC54B6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":565746,"discussion_content":"MySQLçš„è¯¾å¤§ä½¬çš„ç•™è¨€å°±å¾ˆå¤š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650533674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1341612,"avatar":"https://static001.geekbang.org/account/avatar/00/14/78/ac/e5e6e7f3.jpg","nickname":"å¤å¤œ","note":"","ucode":"0A82D3CFCEDF07","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":271213,"discussion_content":"ç¤ºä¾‹ä»£ç ä¸æ˜¯ä¸¤å¤„ç”¨åˆ°äº†å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590107486,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1341612,"avatar":"https://static001.geekbang.org/account/avatar/00/14/78/ac/e5e6e7f3.jpg","nickname":"å¤å¤œ","note":"","ucode":"0A82D3CFCEDF07","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":271212,"discussion_content":"è€Œä¸”è¿™ç§newå‡ºæ¥åªåœ¨ä¸€ä¸ªåœ°æ–¹ä½¿ç”¨çš„å¯¹è±¡ï¼Œå…¶å®ƒçº¿ç¨‹ä¸èƒ½å¯¹å®ƒè§£é”ï¼Œ\n----â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\nè¯·é—®è¿™å¥è¯æ˜¯ä»€ä¹ˆæ„æ€å•Šï¼Œæ²¡çœ‹æ˜ç™½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590107437,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2343943,"avatar":"https://static001.geekbang.org/account/avatar/00/23/c4/07/6960f55a.jpg","nickname":"Register","note":"","ucode":"D8C42B059FF9BD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1341612,"avatar":"https://static001.geekbang.org/account/avatar/00/14/78/ac/e5e6e7f3.jpg","nickname":"å¤å¤œ","note":"","ucode":"0A82D3CFCEDF07","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350522,"discussion_content":"newå‡ºæ¥çš„å¯¹è±¡æ˜¯å±€éƒ¨å˜é‡ï¼Œä¸åŒçº¿ç¨‹newå‡ºæ¥çš„å¯¹è±¡ä¸æ˜¯åŒä¸€ä¸ªã€‚åŠ é”å°±æ²¡æœ‰äº†æ„ä¹‰ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1613902597,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":271212,"ip_address":""},"score":350522,"extra":""}]},{"author":{"id":1442497,"avatar":"https://static001.geekbang.org/account/avatar/00/16/02/c1/80e68043.jpg","nickname":"åœä¸‰ç§’","note":"","ucode":"C9D8F39F24672E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":103829,"discussion_content":"å¾€ä¸‹æ‹‰è¿™ä¹ˆå¤š å”¯ä¸€çœ‹æ‡‚çš„è¯„è®º ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577399865,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111870,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK2Az5uTh9ZGVA7yQCj1BXtXuicPRkvJicA97AoN9xX3bnPcUYglTMXJeZeoVbPQeJA7ICvQhR3KQ0w/132","nickname":"æ—¥ä¸è½å¸å›½","note":"","ucode":"6A11ABBD8AC438","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5502,"discussion_content":"èµèµèµï¼Œå­¦ä¹ äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566307698,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1125985,"avatar":"https://static001.geekbang.org/account/avatar/00/11/2e/61/72a083ea.jpg","nickname":"å°å…¬å¸éƒ½ä¸ç»™æˆ‘è¿›å°±èµ–é—¨å£å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ","note":"","ucode":"10C8AF52F68A29","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2053,"discussion_content":"ç¼–è¯‘ä¼˜åŒ–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563204680,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72943,"user_name":"zyl","can_delete":false,"product_type":"c1","uid":1100717,"ip_address":"","ucode":"2F872341AC8D7E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eq65BWyJb39rq0Qgx1fnELVSZGGuLY6oBmYcmFj2Oqy9iauAWfbqO5U63I22Uo1POrrTp7tFWXibxvg/132","comment_is_top":false,"comment_ctime":1551757955,"is_pvip":false,"replies":[{"id":"26492","content":"syncçš„ä¼˜åŒ–éƒ½çŸ¥é“äº†ï¼Œå‰å®³å•Š","user_name":"ä½œè€…å›å¤","comment_id":72943,"uid":"1269969","ip_address":"","utype":1,"ctime":1551795080,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":9,"race_medal":0,"score":"435343454851","product_id":100023901,"comment_content":"syncé”çš„å¯¹è±¡monitoræŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªObjectMonitorå¯¹è±¡ï¼Œæ‰€æœ‰çº¿ç¨‹åŠ å…¥ä»–çš„entrylisté‡Œé¢ï¼Œå»casæŠ¢é”ï¼Œæ›´æ”¹stateåŠ 1æ‹¿é”ï¼Œæ‰§è¡Œå®Œä»£ç ï¼Œé‡Šæ”¾é”stateå‡1ï¼Œå’Œaqsæœºåˆ¶å·®ä¸å¤šï¼Œåªæ˜¯æ‰€æœ‰çº¿ç¨‹ä¸é˜»å¡ï¼ŒcasæŠ¢é”ï¼Œæ²¡æœ‰é˜Ÿåˆ—ï¼Œå±äºéå…¬å¹³é”ã€‚<br>waitçš„æ—¶å€™ï¼Œçº¿ç¨‹è¿›waitsetä¼‘çœ ï¼Œç­‰å¾…notifyå”¤é†’<br><br>","like_count":101,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441837,"discussion_content":"syncçš„ä¼˜åŒ–éƒ½çŸ¥é“äº†ï¼Œå‰å®³å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551795080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1581294,"avatar":"","nickname":"Geek_be4cec","note":"","ucode":"C87642D655EAC3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3426,"discussion_content":"è¯´çš„ä¸åŒä¿—æ˜“æ‡‚ï¼Œå’Œæ²¡è¯´ä¸€æ ·","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1564476094,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1107484,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e6/1c/9d3744ee.jpg","nickname":"å°æè®²æºç ","note":"","ucode":"2573037D7C82C8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1581294,"avatar":"","nickname":"Geek_be4cec","note":"","ucode":"C87642D655EAC3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287966,"discussion_content":"è¯´çš„æ˜¯synchronizedçš„åº•å±‚åŸç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593602026,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":3426,"ip_address":""},"score":287966,"extra":""}]},{"author":{"id":1125985,"avatar":"https://static001.geekbang.org/account/avatar/00/11/2e/61/72a083ea.jpg","nickname":"å°å…¬å¸éƒ½ä¸ç»™æˆ‘è¿›å°±èµ–é—¨å£å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ","note":"","ucode":"10C8AF52F68A29","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2052,"discussion_content":"ä¸€ä¸ªæ¯”ä¸€ä¸ªå¼º","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1563204639,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1508990,"avatar":"https://static001.geekbang.org/account/avatar/00/17/06/7e/735968e2.jpg","nickname":"è¥¿é—¨å¹ç‰›","note":"","ucode":"E5D3624DDE1E83","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304737,"discussion_content":"CAS æŠ¢é”ï¼Œåªæ˜¯é€šè¿‡CAS æ“ä½œæŠŠ ObjectMonitor å¯¹è±¡ä¸­çš„ Owen ä¿®æ”¹ä¸ºå½“å‰çº¿ç¨‹åœ°å€ï¼Œå¹¶ä¸æ˜¯ä½ è¯´çš„status å§ï¼Œå¦å¤–ObjectMonitor å¯¹è±¡ä¸­æœ‰ä¸ªè®¡æ•°å™¨ï¼Œè®°å½•é‡å…¥æ¬¡æ•°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599650795,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1482026,"avatar":"https://static001.geekbang.org/account/avatar/00/16/9d/2a/3e57b54a.jpg","nickname":"åœ°å¹³çº¿","note":"","ucode":"F50717D6244867","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292738,"discussion_content":"æ‰€ä»¥syncæ˜¯é‡å…¥é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595320599,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1094597,"avatar":"https://static001.geekbang.org/account/avatar/00/10/b3/c5/7fc124e2.jpg","nickname":"Liam","note":"","ucode":"1D15D3B64F2606","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282581,"discussion_content":"æ²¡æœ‰é˜Ÿåˆ—æ˜¯ä»€ä¹ˆæ„æ€ï¼ŸentryListä¸æ˜¯é˜Ÿåˆ—å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592019947,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1107484,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e6/1c/9d3744ee.jpg","nickname":"å°æè®²æºç ","note":"","ucode":"2573037D7C82C8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1094597,"avatar":"https://static001.geekbang.org/account/avatar/00/10/b3/c5/7fc124e2.jpg","nickname":"Liam","note":"","ucode":"1D15D3B64F2606","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287965,"discussion_content":"entrylistæ˜¯å­˜æ”¾ç«äº‰é”çš„çº¿ç¨‹ã€‚è€Œç«äº‰è¿‡ç¨‹æ˜¯é€šè¿‡casè¿›è¡ŒæŠ¢é”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593601978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":282581,"ip_address":""},"score":287965,"extra":""}]},{"author":{"id":1702511,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKUVVjoibAO1cWoM0VcOcbibT0O9bbOvgjJmn6fWyKRNWgrZsOuj7mSMSubFXknOxRP3ozoicdwp1zibw/132","nickname":"è¡¡å±±å¼Ÿå­","note":"","ucode":"5C635588688A88","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216691,"discussion_content":"å‰å®³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585477700,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":94779,"user_name":"å®çˆ¸å­¦å­¦å­¦","can_delete":false,"product_type":"c1","uid":1003364,"ip_address":"","ucode":"AF3F7E076FCFA3","user_header":"","comment_is_top":false,"comment_ctime":1557895225,"is_pvip":false,"discussion_count":6,"race_medal":0,"score":"392399919161","product_id":100023901,"comment_content":"æˆ‘è§‰å¾—è¯„è®ºåŒºå­¦åˆ°çš„æ›´å¤šå•Šï¼Œä½ ä»¬çœŸçš„æ˜¯æ¥å­¦ä¹ çš„å— :D","like_count":91,"discussions":[{"author":{"id":1812970,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a9/ea/5bfce6c5.jpg","nickname":"mgs2002","note":"","ucode":"F5931108BD509B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":149424,"discussion_content":"è¢«è¯„è®ºåŒºçš„å¤§ç¥åŠæ‰“","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1579751010,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1543474,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8d/32/1ba05b8c.jpg","nickname":"é˜¿ä¼¦æ¡‘","note":"","ucode":"DE9C7A62AAEB34","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":55378,"discussion_content":"æœ‰è¯„è®ºåŒºæ‰è®©è¯¾ç¨‹å˜å¾—æ›´å®Œå–„å‘€å“ˆå“ˆ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1574352326,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1607988,"avatar":"https://static001.geekbang.org/account/avatar/00/18/89/34/758bd3ab.jpg","nickname":"æ›‰æ¥“","note":"","ucode":"E2B4C10FC4DAB2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":95026,"discussion_content":"æœ¬æ¥æ˜¯çœ‹çš„ç¬¬ä¸‰æ–¹çš„èµ„æ–™ï¼Œå‘ç°è¯„è®ºå¤šå¤§ç¥åï¼Œæœæ–­ä¹°è¯¾ç¨‹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577007769,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2836731,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/48/fb/ddaf3133.jpg","nickname":"ä¹°ğŸ‰ ä¸ä¹°ğŸ…","note":"","ucode":"EACC9C20807B94","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1607988,"avatar":"https://static001.geekbang.org/account/avatar/00/18/89/34/758bd3ab.jpg","nickname":"æ›‰æ¥“","note":"","ucode":"E2B4C10FC4DAB2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556279,"discussion_content":"æ­£è§£äº†å±äºæ˜¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647274912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":95026,"ip_address":""},"score":556279,"extra":""}]},{"author":{"id":1053955,"avatar":"https://static001.geekbang.org/account/avatar/00/10/15/03/c0fe1dbf.jpg","nickname":"è€ƒä¼‘","note":"","ucode":"968DFC00D6D0CF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21275,"discussion_content":"æ¥æŒ‡å¯¼çš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1569461791,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2057627,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/c38aFXkgKzcaEnz56Zyib5yE88NvzKrnYpJFTe9aodn0cXR2CwA1vs1sP7luwFHeSXuoJlreBtkq3YAFPlmibdibw/132","nickname":"Geek_9ad555","note":"","ucode":"50852723A22788","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290651,"discussion_content":"è¯„è®ºåŒºå‡ºäººæ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594557464,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72874,"user_name":"ç‹å¤§ç‹","can_delete":false,"product_type":"c1","uid":1442110,"ip_address":"","ucode":"BA520B50E97D34","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqjceGMS81zZibA9LECsgAUU1aHPKhfM4WyNgqPtmnxvtzhC3a44ows3g7FuD7ibESAAY0UWsicW0EjA/132","comment_is_top":false,"comment_ctime":1551749644,"is_pvip":false,"replies":[{"id":"26483","content":"æ˜¯çš„ï¼Œå¹¶å‘åŒ…é‡Œçš„åŸå­ç±»éƒ½æ˜¯é å®ƒå®ç°çš„","user_name":"ä½œè€…å›å¤","comment_id":72874,"uid":"1269969","ip_address":"","utype":1,"ctime":1551794435,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":9,"race_medal":0,"score":"310789394956","product_id":100023901,"comment_content":"Getæ–¹æ³•åŠ é”ä¸æ˜¯ä¸ºäº†è§£å†³åŸå­æ€§é—®é¢˜ï¼Œè¿™ä¸ªè¯»æ“ä½œæœ¬èº«å°±æ˜¯åŸå­æ€§çš„ï¼Œæ˜¯ä¸ºäº†å®ç°ä¸èƒ½çº¿ç¨‹é—´addoneæ–¹æ³•çš„æ“ä½œç»“æœå¯¹getæ–¹æ³•å¯è§ï¼Œé‚£ä¹ˆvalueå˜é‡åŠ volitileä¹Ÿå¯ä»¥å®ç°åŒæ ·æ•ˆæœå—ï¼Ÿ","like_count":72,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441803,"discussion_content":"æ˜¯çš„ï¼Œå¹¶å‘åŒ…é‡Œçš„åŸå­ç±»éƒ½æ˜¯é å®ƒå®ç°çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551794435,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1260141,"avatar":"https://static001.geekbang.org/account/avatar/00/13/3a/6d/910b2445.jpg","nickname":"Wheat","note":"","ucode":"7D99EA149B6DE8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6682,"discussion_content":"çœ‹è¯„è®ºæ€»èƒ½è§£å†³ä¸“æ é‡Œä¸æ˜¯ç‰¹åˆ«æ˜ç™½çš„åœ°æ–¹ï¼","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1567049316,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1640517,"avatar":"https://static001.geekbang.org/account/avatar/00/19/08/45/62ff43de.jpg","nickname":"HooYa","note":"","ucode":"43F3577E7D939A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574789,"discussion_content":"è¿˜æ˜¯è§‰å¾—ä¸è¦æŠŠåŸå­æ€§çš„åœºæ™¯ç†è§£é”™äº†ï¼Œåªç†è§£æˆ æ“ä½œä¸å¯åˆ†éš”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654340296,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1640517,"avatar":"https://static001.geekbang.org/account/avatar/00/19/08/45/62ff43de.jpg","nickname":"HooYa","note":"","ucode":"43F3577E7D939A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574788,"discussion_content":"ç»¼åˆå‰å‡ ç« æ¥è®²ï¼ŒåŸå­æ€§æ˜¯å•æ ¸æ—¶ä»£æå‡ºæ¥çš„ï¼Œåœ¨é‚£ä¸ªæ—¶æœŸ CPUåªèƒ½åŒä¸€æ—¶é—´è¿è¡Œä¸€ä¸ªçº¿ç¨‹ã€‚ç”±äºCPUä¼šåˆ‡æ¢çº¿ç¨‹ï¼Œ å½“æ—¶åªè¦ç¦æ­¢ä¸­æ–­å³å¯ã€‚åæ¥CPUå¤šæ ¸,åŸå­æ€§é—®é¢˜åˆå¤šå‡ºæ¥ä¸ªå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸´ç•ŒåŒºçš„é—®é¢˜ï¼Œget.åŠ é”è§£å†³çš„æ˜¯ åŸå­æ€§çš„é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654340177,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1648334,"avatar":"https://static001.geekbang.org/account/avatar/00/19/26/ce/acb6c140.jpg","nickname":"ç¥‰å¹»","note":"","ucode":"ABE19FE8A6A15E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571116,"discussion_content":"ç¡®å®åŠ volatileå¯ä»¥ï¼Œå‚è€ƒä¸Šä¸€ç« èŠ‚çš„å‡ æ¡happens-beforeè§„åˆ™ï¼Œå…¶ä¸­å¯¹volatileçš„å†™æ“ä½œä¸€å®šhappens-beforeäºä»–çš„è¯»æ“ä½œï¼Œè¿˜æœ‰ä¼ é€’æ€§ï¼Œè¿™æ ·å°±æœ‰ä¸€ä¸ªæ›´å…·ä½“åˆç†çš„è§£é‡Šï¼Œè€Œä¸ä¼šåœç•™åœ¨æˆ‘åœ¨è¿™é‡ŒåŠ volatileä¿è¯ä»–çš„å¯è§æ€§è¿™ä¸€å±‚é¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652077385,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1171359,"avatar":"https://static001.geekbang.org/account/avatar/00/11/df/9f/6e3e1b77.jpg","nickname":"é˜¿U","note":"","ucode":"161A8E74E0D612","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":103760,"discussion_content":"è€å¸ˆçš„å›å¤ä»€ä¹ˆæ„æ€ getæ–¹æ³•åŠ é”åˆ°åº•æ˜¯ä¸æ˜¯ä¸ºäº†è§£å†³åŸå­æ€§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577376673,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1696883,"avatar":"https://static001.geekbang.org/account/avatar/00/19/e4/73/74dce191.jpg","nickname":"é¼ é‡Œé¼ æ°”","note":"","ucode":"4793476BBDB202","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1171359,"avatar":"https://static001.geekbang.org/account/avatar/00/11/df/9f/6e3e1b77.jpg","nickname":"é˜¿U","note":"","ucode":"161A8E74E0D612","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":141607,"discussion_content":"æˆ‘è§‰å¾—getåŠ é”æ˜¯ä¸ºäº†ä¿è¯å¯è§æ€§çš„","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1579434093,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":103760,"ip_address":""},"score":141607,"extra":""}]},{"author":{"id":1339022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6e/8e/5d309a85.jpg","nickname":"æ‹¯æ•‘åœ°çƒå¥½ç´¯","note":"","ucode":"7643439601EF4C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2426,"discussion_content":"â€œè¯»æ“ä½œæ˜¯åŸå­æ€§çš„â€ä¼¼ä¹ä¸å¤ªæ­£ç¡®ï¼Œ32ä½ç³»ç»Ÿå¯¹longç±»å‹çš„è¯»å–ä¹Ÿæ˜¯éåŸå­çš„å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563595547,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1164531,"avatar":"https://static001.geekbang.org/account/avatar/00/11/c4/f3/92f654f1.jpg","nickname":"Bug? Feature!","note":"","ucode":"F8FA8A0094FBA0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1339022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6e/8e/5d309a85.jpg","nickname":"æ‹¯æ•‘åœ°çƒå¥½ç´¯","note":"","ucode":"7643439601EF4C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4918,"discussion_content":"å¤§å®¶å¿«æ¥çœ‹ï¼Œè¿™æœ‰ä¸ªè€å®äººã€‚","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1565832028,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":2426,"ip_address":""},"score":4918,"extra":""}]}]},{"had_liked":false,"id":72807,"user_name":"æ¢ç´¢æ— æ­¢å¢ƒ","can_delete":false,"product_type":"c1","uid":1044178,"ip_address":"","ucode":"91D2A9907DFA79","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ee/d2/7024431c.jpg","comment_is_top":false,"comment_ctime":1551741677,"is_pvip":false,"replies":[{"id":"26463","content":"ç†è§£æ­£ç¡®ï¼","user_name":"ä½œè€…å›å¤","comment_id":72807,"uid":"1269969","ip_address":"","utype":1,"ctime":1551788517,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":4,"race_medal":0,"score":"250659844845","product_id":100023901,"comment_content":"ä¸èƒ½ï¼Œå› ä¸ºnewäº†ï¼Œæ‰€ä»¥ä¸æ˜¯åŒä¸€æŠŠé”ã€‚è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘å¯¹é‚£ synchronizedçš„ç†è§£æ˜¯è¿™æ ·ï¼Œå®ƒå¹¶ä¸èƒ½æ”¹å˜CPUæ—¶é—´ç‰‡åˆ‡æ¢çš„ç‰¹ç‚¹ï¼Œåªæ˜¯å½“å…¶ä»–çº¿ç¨‹è¦è®¿é—®è¿™ä¸ªèµ„æºæ—¶ï¼Œå‘ç°é”è¿˜æœªé‡Šæ”¾ï¼Œæ‰€ä»¥åªèƒ½åœ¨å¤–é¢ç­‰å¾…ï¼Œä¸çŸ¥é“ç†è§£æ˜¯å¦æ­£ç¡®","like_count":58,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441761,"discussion_content":"ç†è§£æ­£ç¡®ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551788517,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1542037,"avatar":"https://static001.geekbang.org/account/avatar/00/17/87/95/cba0a896.jpg","nickname":"å¢","note":"","ucode":"B6A9F41AEE348C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292175,"discussion_content":"è€å“¥å‰å®³äº†ã€‚æˆ‘ä¹Ÿæƒ³æ˜ç™½äº†ï¼Œæ—¶é—´ç‰‡æ˜¯æ”¹å˜ä¸äº†çš„ï¼Œä½†æ˜¯å‘ç”Ÿçº¿ç¨‹åˆ‡æ¢åï¼Œåæ¥çš„çº¿ç¨‹æ²¡æœ‰è·å–é”ï¼Œè¿˜æ˜¯ä¼šå¡ä½\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595129887,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1107484,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e6/1c/9d3744ee.jpg","nickname":"å°æè®²æºç ","note":"","ucode":"2573037D7C82C8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287968,"discussion_content":"ä¼˜ç§€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593602124,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1018620,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8a/fc/d1dd57dd.jpg","nickname":"ipofss","note":"","ucode":"DE3061C9259F9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":19583,"discussion_content":"â€œsynchronizedå®ƒå¹¶ä¸èƒ½æ”¹å˜CPUæ—¶é—´ç‰‡åˆ‡æ¢çš„ç‰¹ç‚¹ï¼Œåªæ˜¯å½“å…¶ä»–çº¿ç¨‹è¦è®¿é—®è¿™ä¸ªèµ„æºæ—¶ï¼Œå‘ç°é”è¿˜æœªé‡Šæ”¾ï¼Œæ‰€ä»¥åªèƒ½åœ¨å¤–é¢ç­‰å¾…â€ï¼Œå‰å®³äº†è€å“¥ï¼Œå¸®åŠ©æˆ‘ç†è§£äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569208532,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74005,"user_name":"çŸ³å¤´å‰ªåˆ€å¸ƒ","can_delete":false,"product_type":"c1","uid":1441361,"ip_address":"","ucode":"D0BBDBB6A26475","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/YibZAWyltDS6UaOwSGck6EicaEVxM4DxdGVs80GHH9kiclfFmOUMLyNuzIkQbRb1CmjX82PmEgWOtgWH2Cj2J27zA/132","comment_is_top":false,"comment_ctime":1552057582,"is_pvip":false,"replies":[{"id":"27035","content":"ä½ è¿™ä¹ˆä¼˜ç§€ï¼Œæˆ‘è¯¥æ€ä¹ˆæŒ‡å¯¼å‘¢ï¼Ÿä½ è¿™ä¸æ˜¯ç”¨lock1 ä¿æŠ¤ lock2ï¼Œlock2ä¿æŠ¤valueå—ï¼Ÿå¾ˆç¬¦åˆæˆ‘ä»¬çš„åŸåˆ™ã€‚æˆ‘æ€ä¹ˆæ²¡æƒ³åˆ°å‘¢ï¼Ÿ<br>","user_name":"ä½œè€…å›å¤","comment_id":74005,"uid":"1269969","ip_address":"","utype":1,"ctime":1552091185,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":19,"race_medal":0,"score":"164760814830","product_id":100023901,"comment_content":"è€å¸ˆè¯´ï¼šç°å®ä¸–ç•Œé‡Œï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¤šæŠŠé”æ¥ä¿æŠ¤åŒä¸€ä¸ªèµ„æºï¼Œä½†åœ¨å¹¶å‘é¢†åŸŸæ˜¯ä¸è¡Œçš„ã€‚<br>ä¸èƒ½ç”¨ä¸¤æŠŠé”é”å®šåŒä¸€ä¸ªèµ„æºå—ï¼Ÿ<br>å¦‚ä¸‹ä»£ç ï¼š<br>public class X {<br>    private Object lock1 = new Object();<br>    private Object lock2 = new Object();<br>    private int value = 0;<br><br>    private void addOne() {<br>        synchronized (lock1) {<br>            synchronized (lock2) {<br>                value += 1;<br>            }<br>        }<br>    }<br><br>    private int get() {<br>        synchronized (lock1) {<br>            synchronized (lock2) {<br>                return value;<br>            }<br>        }<br>    }<br>}<br><br>è™½ç„¶è¯´è¿™æ ·åšæ²¡æœ‰å®é™…æ„ä¹‰ï¼Œä½†æ˜¯ä¹Ÿä¸ä¼šå¯¼è‡´æ­»é”æˆ–è€…å…¶ä»–ä¸å¥½çš„ç»“æœå§ï¼Ÿè¯·è€å¸ˆæŒ‡å¯¼ï¼Œè°¢è°¢ã€‚<br>","like_count":38,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442380,"discussion_content":"ä½ è¿™ä¹ˆä¼˜ç§€ï¼Œæˆ‘è¯¥æ€ä¹ˆæŒ‡å¯¼å‘¢ï¼Ÿä½ è¿™ä¸æ˜¯ç”¨lock1 ä¿æŠ¤ lock2ï¼Œlock2ä¿æŠ¤valueå—ï¼Ÿå¾ˆç¬¦åˆæˆ‘ä»¬çš„åŸåˆ™ã€‚æˆ‘æ€ä¹ˆæ²¡æƒ³åˆ°å‘¢ï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552091185,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1484192,"avatar":"https://static001.geekbang.org/account/avatar/00/16/a5/a0/e0cccf7e.jpg","nickname":"åœ†åœ†æ»¡æ»¡","note":"","ucode":"396E7A822014D1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289352,"discussion_content":"ç†è®ºä¸Šå¯ä»¥ï¼Œä½†æ˜¯ç¬¬äºŒæŠŠé”æ²¡å•¥ç”¨ã€‚å› ä¸ºç¬¬ä¸€æŠŠé”å·²ç»ä¿è¯äº†åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹è¿›æ¥ã€‚æˆ‘éƒ½å·²ç»è¿›å•æ‰€äº†ï¼Œå†ç»™é©¬æ¡¶åŠ æŠŠé”æ˜¯ä¸æ˜¯æœ‰ç‚¹é—¹å¿ƒã€‚","likes_number":27,"is_delete":false,"is_hidden":false,"ctime":1594080272,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":6,"child_discussions":[{"author":{"id":2057627,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/c38aFXkgKzcaEnz56Zyib5yE88NvzKrnYpJFTe9aodn0cXR2CwA1vs1sP7luwFHeSXuoJlreBtkq3YAFPlmibdibw/132","nickname":"Geek_9ad555","note":"","ucode":"50852723A22788","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1484192,"avatar":"https://static001.geekbang.org/account/avatar/00/16/a5/a0/e0cccf7e.jpg","nickname":"åœ†åœ†æ»¡æ»¡","note":"","ucode":"396E7A822014D1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290652,"discussion_content":"æˆ‘åˆç¬é—´æ˜ç™½äº†ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1594557526,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":289352,"ip_address":""},"score":290652,"extra":""},{"author":{"id":2013254,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/gqtlqgrVO9wcCDz4bFuoaYSQAXu7OyhKiczKn8LiaDtgsxlmCXAWMs99FQ1ggGqWFVRdVmzrrhUK4bkicDkkcZWVA/132","nickname":"é™ˆæ–Œ","note":"","ucode":"E534DF6195A947","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1484192,"avatar":"https://static001.geekbang.org/account/avatar/00/16/a5/a0/e0cccf7e.jpg","nickname":"åœ†åœ†æ»¡æ»¡","note":"","ucode":"396E7A822014D1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303919,"discussion_content":"ç‰›é€¼çš„è§è§£","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1599408153,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":289352,"ip_address":""},"score":303919,"extra":""},{"author":{"id":1367048,"avatar":"https://static001.geekbang.org/account/avatar/00/14/dc/08/64f5ab52.jpg","nickname":"é™ˆæ–Œ","note":"","ucode":"B639AB5F6AA03D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2013254,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/gqtlqgrVO9wcCDz4bFuoaYSQAXu7OyhKiczKn8LiaDtgsxlmCXAWMs99FQ1ggGqWFVRdVmzrrhUK4bkicDkkcZWVA/132","nickname":"é™ˆæ–Œ","note":"","ucode":"E534DF6195A947","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342240,"discussion_content":"æˆ‘ä»¬ä¿©åŒå","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1610623065,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":303919,"ip_address":""},"score":342240,"extra":""}]},{"author":{"id":2076251,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/ae/5b/4bd42286.jpg","nickname":"å®‹è®¡æ´‹","note":"","ucode":"9A34E8F71C6CBD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567567,"discussion_content":"æˆ‘è§‰å¾—å¤§å®¶åˆ«ç¬‘ï¼Œè¿™ä¸ªæŒºæœ‰æ„æ€ï¼Œç°å®ä¸–ç•Œå¤šæŠŠé”ä¿æŠ¤ä¸€ä¸ªèµ„æºå¾ˆå¤šä¾‹å­ï¼Œæ¯”å¦‚ä¿é™©æŸœï¼Œé˜²ç›—é—¨ï¼Œä¸ºä»€ä¹ˆç¨‹åºä¸ç”¨è¿™æ ·å‘¢ï¼Œå› ä¸ºç¨‹åºé‡Œé¢æ²¡æœ‰å°å·ï¼Œä¸ä¼šæŠŠä½ çš„é”ç ´åäº†ã€‚ä¹Ÿè®¸ä»¥åç¨‹åºä¼šå‡ºç°è¿™ç§é”ï¼Œæ™®é€šçº¿ç¨‹éœ€è¦ç­‰å¾…ä½¿ç”¨ï¼Œå°å·çº¿ç¨‹å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œè¿™æ—¶å€™ä½ å°±éœ€è¦ä¸¤æŠŠé”äº†ï¼ˆè„‘æ´å¤§å¼€ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650944417,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2630669,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqbzslP4D2y7zmIKGhbRxm9eIialForSiacZTHPxcc26icMrRvHTGFPCTj5fRCZicHwQiay3iaibHELdv59w/132","nickname":"å½å½å–³å–³","note":"","ucode":"55FE0DAAE6C361","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":565555,"discussion_content":"è„±è£¤å­æ”¾å±æ²¡æ¯›ç—…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650498470,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2616795,"avatar":"https://static001.geekbang.org/account/avatar/00/27/ed/db/7199150b.jpg","nickname":"æ¯”æ–¹","note":"","ucode":"8A0C41C9D2473E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540106,"discussion_content":"ç§€å„¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639963519,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1078849,"avatar":"https://static001.geekbang.org/account/avatar/00/10/76/41/7ff49c40.jpg","nickname":"E^cho","note":"","ucode":"23DE4B7AD6C23C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372321,"discussion_content":"é”åµŒå¥—ï¼Œå°±éœ€è¦ä¸€ä¸ªä¸ªè§£é”ï¼Œæ²¡å•¥å®é™…çš„ä½œç”¨ï¼Œå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620286453,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1341612,"avatar":"https://static001.geekbang.org/account/avatar/00/14/78/ac/e5e6e7f3.jpg","nickname":"å¤å¤œ","note":"","ucode":"0A82D3CFCEDF07","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":271222,"discussion_content":"è¯·é—®è¿™ç§é”æˆå‘˜å˜é‡çš„æ–¹å¼å’Œè€å¸ˆè¯´çš„ä¸‰ç§è¯·é—®è¿™ç§é”æˆå‘˜å˜é‡çš„æ–¹å¼æ˜¯ä¸æ˜¯å’Œé”thisçš„æ–¹å¼æ˜¯ä¸€ä¸ªæ„æ€ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590108240,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1512642,"avatar":"https://static001.geekbang.org/account/avatar/00/17/14/c2/46ebe3a0.jpg","nickname":"ä¾§è€³å€¾å¬","note":"","ucode":"5BF2A2440B54F0","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":238575,"discussion_content":"åœ¨åŠ é”ä¹‹å‰ä¼šåˆ¤æ–­å½“å‰é”çš„å¯¹è±¡æ˜¯ä¸æ˜¯åŒä¸€ä¸ªï¼Œå¦‚æœæ˜¯åŒä¸€ä¸ªï¼Œä½ ç¬¬äºŒä¸ªåŠ é”å®é™…æ²¡æœ‰æ„ä¹‰ï¼Œè¿˜æ˜¯ä¸€æŠŠé”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587223531,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1702511,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKUVVjoibAO1cWoM0VcOcbibT0O9bbOvgjJmn6fWyKRNWgrZsOuj7mSMSubFXknOxRP3ozoicdwp1zibw/132","nickname":"è¡¡å±±å¼Ÿå­","note":"","ucode":"5C635588688A88","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216692,"discussion_content":"666","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585477718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1400703,"avatar":"https://static001.geekbang.org/account/avatar/00/15/5f/7f/3d005d61.jpg","nickname":"Tyrone","note":"","ucode":"DA6F289438A750","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":198015,"discussion_content":"è¿™ä¸ªè„‘å›è·¯å¾ˆå…­å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583462600,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1812970,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a9/ea/5bfce6c5.jpg","nickname":"mgs2002","note":"","ucode":"F5931108BD509B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":149427,"discussion_content":"å“ˆå“ˆï¼Œè¿™ä¸ªæœ‰ç‚¹æ„æ€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579751117,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1171359,"avatar":"https://static001.geekbang.org/account/avatar/00/11/df/9f/6e3e1b77.jpg","nickname":"é˜¿U","note":"","ucode":"161A8E74E0D612","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":103763,"discussion_content":"ç‰›æ‰¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577376767,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1309592,"avatar":"https://static001.geekbang.org/account/avatar/00/13/fb/98/6f238b8e.jpg","nickname":"åŠä¸ªæŸšå­","note":"","ucode":"CF5D1190D970A9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":62393,"discussion_content":"å“ˆå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574839926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77001,"user_name":"åˆ«çš±çœ‰","can_delete":false,"product_type":"c1","uid":1177354,"ip_address":"","ucode":"D24F65EFF65586","user_header":"https://static001.geekbang.org/account/avatar/00/11/f7/0a/067537fc.jpg","comment_is_top":false,"comment_ctime":1552800237,"is_pvip":false,"replies":[{"id":"28089","content":"1. printlnçš„ä»£ç é‡Œé”çš„thisæŒ‡çš„æ˜¯ä½ çš„æ§åˆ¶å°ï¼Œè¿™ä¸ªé”è·Ÿä½ çš„ä»£ç æ²¡å…³ç³»ï¼Œè€Œä¸”printlné‡Œä¹Ÿæ²¡æœ‰å†™æ“ä½œï¼Œæ‰€ä»¥printlnä¸ä¼šå¯¼è‡´å¼ºåˆ·ç¼“å­˜ã€‚<br><br>æˆ‘è§‰å¾—æ˜¯å› ä¸ºprintlnäº§ç”Ÿäº†IOï¼ŒIOç›¸å¯¹CPUæ¥è¯´ï¼Œå¤ªæ…¢ï¼Œæ‰€ä»¥è¿™ä¸ªæœŸé—´å¤§æ¦‚ç‡çš„ä¼šæŠŠç¼“å­˜çš„å€¼å†™å…¥å†…å­˜ã€‚ä¹Ÿæœ‰å¯èƒ½è¿™ä¸ªçº¿ç¨‹è¢«è°ƒåº¦åˆ°äº†å…¶ä»–çš„CPUä¸Šï¼Œå‹æ ¹æ²¡æœ‰ç¼“å­˜ï¼Œæ‰€ä»¥åªèƒ½ä»å†…å­˜å–æ•°ã€‚ä½ è°ƒç”¨sleepï¼Œæ•ˆæœåº”è¯¥ä¹Ÿå·®ä¸å¤šã€‚<br><br>2. çº¿ç¨‹åˆ‡æ¢æ˜¾ç„¶ä¸è¶³ä»¥ä¿è¯å¯è§æ€§ï¼Œä¿è¯çš„å¯è§æ€§åªèƒ½é hbè§„åˆ™ã€‚<br><br>3. çº¿ç¨‹ç»“æŸåï¼Œä¸ä¸€å®šä¼šå¼ºåˆ·ç¼“å­˜ã€‚å¦åˆ™Joinçš„è§„åˆ™å°±æ²¡å¿…è¦äº†<br><br>å¹¶å‘é—®é¢˜æœ¬æ¥å°±æ˜¯å°æ¦‚ç‡çš„äº‹ä»¶ï¼Œå°¤å…¶æœ‰äº†IOæ“ä½œä¹‹åï¼Œæ¦‚ç‡å°±æ›´ä½äº†ã€‚","user_name":"ä½œè€…å›å¤","comment_id":77001,"uid":"1269969","ip_address":"","utype":1,"ctime":1552808626,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":7,"race_medal":0,"score":"126106851821","product_id":100023901,"comment_content":"ç›¸ä¿¡å¾ˆå¤šäººè·Ÿæˆ‘ä¸€æ ·ä¼šç¢°åˆ°è¿™ä¸ªé—®é¢˜,è¯„è®ºé‡Œä¹Ÿçœ‹åˆ°æœ‰äººåœ¨é—®ï¼Œå†…å®¹æœ‰ç‚¹é•¿ï¼Œè¾›è‹¦è€å¸ˆå¸®å¿™å¤§å®¶åˆ†æä¸‹äº† å“ˆå“ˆ<br>Â Â ---------------------------------------------------------<br>public class A implements Runnable {<br>Â Â Â  public Integer b = 1;<br>Â <br>Â Â Â  @Override<br>Â Â Â  public void run() {<br>Â Â Â Â Â Â  System.out.println(&quot;A is begin!&quot;);<br>Â Â Â Â Â Â  while (true) {<br>               System.out.println(&quot;a&quot;);<br>Â Â Â Â Â Â Â Â Â Â  &#47;&#47; System.out.println(b);<br>Â Â Â Â Â Â Â Â Â Â  if (b.equals(2))<br>Â Â Â Â Â Â Â Â Â Â Â Â Â  break;<br>Â Â Â Â Â Â  }<br>Â <br>Â Â Â Â Â Â  System.out.println(&quot;A is finish!&quot;);<br>Â Â Â  }<br>Â <br>Â Â Â  public static void main(String[] args) {<br>Â Â Â Â Â Â  A a = new A();<br>Â Â Â Â Â Â  &#47;&#47;çº¿ç¨‹A<br>Â Â Â Â Â Â  new Thread(a).start();<br>Â Â Â Â Â Â  try {<br>Â Â Â Â Â Â Â Â Â Â  Thread.sleep(1000);<br>Â Â Â Â Â Â  } catch (InterruptedException e) {<br>Â Â Â Â Â Â Â Â Â Â  e.printStackTrace();<br>Â Â Â Â Â Â  }<br>Â Â Â Â Â Â  a.b = 2;<br>Â Â Â  }<br>}<br>Â <br>æˆ‘ä»¬çŸ¥é“è¿™ä¸ªç¨‹åºä¼šå‡ºç°å¯è§æ€§é—®é¢˜ã€‚<br>ä½†æ˜¯åœ¨whileå†…åŠ ä¸ŠSystem.out.println(b)å å½“ä¸»çº¿ç¨‹ä¿®æ”¹bçš„å€¼å çº¿ç¨‹Aå±…ç„¶èƒ½å¤Ÿå–å¾—æœ€æ–°å€¼ å¯è§æ€§é—®é¢˜å¾—åˆ°è§£å†³<br>System.out.println(b)çš„å®ç°å¦‚ä¸‹<br>Â Â Â  public void println(String x) {<br>Â Â Â Â Â Â Â  synchronized (this) {<br>Â Â Â Â Â Â Â Â Â Â Â  print(x);<br>Â Â Â Â Â Â Â Â Â Â Â  newLine();<br>Â Â Â Â Â Â Â  }<br>Â Â Â  }<br>Â <br>Doug Leaå¤§ç¥çš„Concurrent Programming in Javaä¸€ä¹¦ä¸­æœ‰è¿™æ ·ä¸€ä¸ªç‰‡æ®µæ¥æè¿°synchronizedè¿™ä¸ªå…³é”®å­—ï¼š<br>Â <br>è¿™é‡Œè‹±æ–‡å°±ä¸æ”¾å‡ºæ¥äº† å­—æ•°è¶…è¿‡ä¸¤åƒâ€¦â€¦<br>è¿™ç¯‡æ–‡ç« ä¹Ÿæœ‰æåŠhttps:&#47;&#47;www.jianshu.com&#47;p&#47;3c06ffbf0d52<br>Â <br>ç®€å•ç¿»è¯‘ä¸€ä¸‹ï¼šä»æœ¬è´¨ä¸Šæ¥è¯´ï¼Œå½“çº¿ç¨‹é‡Šæ”¾ä¸€ä¸ªé”æ—¶ä¼šå¼ºåˆ¶æ€§çš„å°†å·¥ä½œå†…å­˜ä¸­ä¹‹å‰æ‰€æœ‰çš„å†™æ“ä½œéƒ½åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­å»ï¼Œè€Œè·å–ä¸€ä¸ªé”åˆ™ä¼šå¼ºåˆ¶æ€§çš„åŠ è½½å¯è®¿é—®åˆ°çš„å€¼åˆ°çº¿ç¨‹å·¥ä½œå†…å­˜ä¸­æ¥ã€‚è™½ç„¶é”æ“ä½œåªå¯¹åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥ä»£ç å—è¿™ä¸€å—èµ·åˆ°ä½œç”¨ï¼Œä½†æ˜¯å½±å“çš„å´æ˜¯çº¿ç¨‹æ‰§è¡Œæ“ä½œæ‰€ä½¿ç”¨çš„æ‰€æœ‰å­—æ®µã€‚<br><br><br>ä¹Ÿå°±æ˜¯è¯´å½“è°ƒç”¨System.out.println(&quot;a&quot;)æ—¶å½“å‰çº¿ç¨‹çš„ç¼“å­˜ä¼šè¢«é‡æ–°åˆ·æ–°è¿‡ï¼Œæ‰€ä»¥æ‰èƒ½å¤Ÿè¯»åˆ°è¿™ä¸ªå€¼æœ€æ–°å€¼<br>Â ---------------------------------------------------------<br>ç„¶åé—®é¢˜æ¥äº†<br>é—®é¢˜1:<br>é¦–å…ˆä¸Šé¢çš„è¯´æ³•ä¸çŸ¥é“æ˜¯ä¸æ˜¯çœŸçš„æ˜¯è¿™æ ·ã€‚<br>ç„¶åæˆ‘åœ¨ä¸‹é¢åŠ äº†System.out.println(b) ç»“æœæ‰“å°å‡ºæ¥çš„æ˜¯æ—§å€¼ï¼Œä½†æ˜¯ä¸‹é¢çš„b.equals(2)å´èƒ½é€šè¿‡ è¿™é‡Œæ²¡å¼„æ˜ç™½ æˆ‘è§‰å¾—åº”è¯¥æ˜¯ç¼–è¯‘å™¨è¿›è¡Œäº†ä¼˜åŒ–?å› ä¸ºç°åœ¨å¤§ä¸‰èƒ½åŠ›ä¸å¤Ÿï¼Œè¿˜æ²¡å­¦ä¼šçœ‹classæ–‡ä»¶ æ²¡æ³•éªŒè¯<br>Â <br>é—®é¢˜2:<br>ç½‘ä¸Šæ‰¾äº†ä¸€äº›æ–‡ç« <br>æœ‰äº›äººçš„è¯´æ³•æ˜¯ï¼šæ‰“å°æ˜¯IOæ“ä½œï¼Œè€ŒIOæ“ä½œä¼šå¼•èµ·çº¿ç¨‹çš„åˆ‡æ¢ï¼Œçº¿ç¨‹åˆ‡æ¢ä¼šå¯¼è‡´çº¿ç¨‹åŸæœ¬çš„ç¼“å­˜å¤±æ•ˆï¼Œä»è€Œä¹Ÿä¼šè¯»å–åˆ°ä¿®æ”¹åçš„å€¼ã€‚<br>Â <br>æˆ‘å°è¯•ç€å°†æ‰“å°æ¢æˆFile file = new File(&quot;D:&#47;&#47;1.txt&quot;);è¿™å¥ä»£ç ï¼Œç¨‹åºä¹Ÿèƒ½å¤Ÿæ­£å¸¸çš„ç»“æŸã€‚å½“ç„¶ï¼Œåœ¨è¿™é‡Œä¹Ÿå¯ä»¥å°è¯•å°†å°†æ‰“å°æ›¿æ¢æˆsynchronized(A.class){ }è¿™å¥ç©ºåŒæ­¥ä»£ç å—ï¼Œå‘ç°ç¨‹åºä¹Ÿèƒ½å¤Ÿæ­£å¸¸ç»“æŸã€‚<br>Â <br>è¿™é‡Œæœ‰ä¸ªé—®é¢˜å°±æ˜¯ çº¿ç¨‹åˆ‡æ¢æ—¶ä¼šæŠŠä¹‹å‰æ“ä½œçš„ç›¸å…³æ•°æ®ä¿å­˜åˆ°å†…å­˜é‡Œï¼Œåˆ‡æ¢å›æ¥åä¼šæŠŠå†…å­˜é‡Œçš„æ•°æ®é‡æ–°åŠ è½½åˆ°å¯„å­˜å™¨é‡Œå—ï¼Œè¿™æ ·è¯´çš„è¯ å°±ç®—åˆ‡æ¢ä¹Ÿæ˜¯è·å–ä¸åˆ°ä¿®æ”¹åçš„å€¼çš„,ä¸çŸ¥é“æ˜¯ä»€ä¹ˆåšåˆ°èƒ½å¤Ÿè¯»åˆ°è¿™ä¸ªä¿®æ”¹åçš„å€¼çš„ï¼Ÿ<br>Â <br>é—®é¢˜3:<br>æ˜¯ä¸æ˜¯<br>çº¿ç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ“ä½œç³»ç»Ÿä¼šéšæœºæ€§çš„æŠŠç¼“å­˜åˆ·åˆ°å†…å­˜<br>çº¿ç¨‹ç»“æŸåä¸€å®šä¼šæŠŠç¼“å­˜é‡Œçš„æ•°æ®åˆ·åˆ°å†…å­˜<br><br>Â ---------------------------------------------------------<br>åœ¨è¯„è®ºé‡Œå¥½å¤šå¤§ç¥ èƒ½å­¦åˆ°å¥½å¤šä¸œè¥¿ğŸ˜„ğŸ˜„","like_count":29,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443536,"discussion_content":"1. printlnçš„ä»£ç é‡Œé”çš„thisæŒ‡çš„æ˜¯ä½ çš„æ§åˆ¶å°ï¼Œè¿™ä¸ªé”è·Ÿä½ çš„ä»£ç æ²¡å…³ç³»ï¼Œè€Œä¸”printlné‡Œä¹Ÿæ²¡æœ‰å†™æ“ä½œï¼Œæ‰€ä»¥printlnä¸ä¼šå¯¼è‡´å¼ºåˆ·ç¼“å­˜ã€‚\n\næˆ‘è§‰å¾—æ˜¯å› ä¸ºprintlnäº§ç”Ÿäº†IOï¼ŒIOç›¸å¯¹CPUæ¥è¯´ï¼Œå¤ªæ…¢ï¼Œæ‰€ä»¥è¿™ä¸ªæœŸé—´å¤§æ¦‚ç‡çš„ä¼šæŠŠç¼“å­˜çš„å€¼å†™å…¥å†…å­˜ã€‚ä¹Ÿæœ‰å¯èƒ½è¿™ä¸ªçº¿ç¨‹è¢«è°ƒåº¦åˆ°äº†å…¶ä»–çš„CPUä¸Šï¼Œå‹æ ¹æ²¡æœ‰ç¼“å­˜ï¼Œæ‰€ä»¥åªèƒ½ä»å†…å­˜å–æ•°ã€‚ä½ è°ƒç”¨sleepï¼Œæ•ˆæœåº”è¯¥ä¹Ÿå·®ä¸å¤šã€‚\n\n2. çº¿ç¨‹åˆ‡æ¢æ˜¾ç„¶ä¸è¶³ä»¥ä¿è¯å¯è§æ€§ï¼Œä¿è¯çš„å¯è§æ€§åªèƒ½é hbè§„åˆ™ã€‚\n\n3. çº¿ç¨‹ç»“æŸåï¼Œä¸ä¸€å®šä¼šå¼ºåˆ·ç¼“å­˜ã€‚å¦åˆ™Joinçš„è§„åˆ™å°±æ²¡å¿…è¦äº†\n\nå¹¶å‘é—®é¢˜æœ¬æ¥å°±æ˜¯å°æ¦‚ç‡çš„äº‹ä»¶ï¼Œå°¤å…¶æœ‰äº†IOæ“ä½œä¹‹åï¼Œæ¦‚ç‡å°±æ›´ä½äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1552808626,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1359968,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c0/60/fb98f941.jpg","nickname":"è°­å°ä»™","note":"","ucode":"29DCABA1578A09","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381631,"discussion_content":"å»çœ‹çœ‹.classæ–‡ä»¶ä½ å°±æ‡‚äº†ï¼Œç¼–è¯‘å™¨å¸®ä½ åšäº†ä»€ä¹ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625148196,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1148174,"avatar":"https://static001.geekbang.org/account/avatar/00/11/85/0e/e6640576.jpg","nickname":"é˜¿å£°","note":"","ucode":"EEA5F2E9D4FC9C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326817,"discussion_content":"è¿™æ˜¯ System.out.println(b) çš„æ–¹æ³•å®ç°ï¼š\npublic void println(Object x) {\n    String s = String.valueOf(x);\n    synchronized (this) {\n        print(s);\n        newLine();\n    }\n}\n\n\nåœ¨è¿™ä¸€è¡Œ String s = String.valueOf(x)ï¼Œæ¥äº†ä¸ªç‹¸çŒ«æ¢å¤ªå­ï¼ŒString s æ˜¯ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼ˆStringæ˜¯ä¸å¯å˜ç±»ï¼‰ï¼Œså¯¹è±¡é‡Œé¢çš„value[]å¤åˆ¶çš„æ˜¯Object xé‡Œé¢çš„valueã€‚\nå¯ä»¥å‚è€ƒIntegerçš„toString()å®ç°ï¼š\npublic static String toString(int i) {\n    if (i == Integer.MIN_VALUE)\n        return &#34;-2147483648&#34;;\n    int size = (i < 0) ? stringSize(-i) + 1 : stringSize(i);\n    char[] buf = new char[size];\n    getChars(i, size, buf);\n    return new String(buf, true);\n}\n\næ‰€ä»¥æœ€ç»ˆprint(s) æ‰“å°çš„æ˜¯ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ï¼ŒObject xå¯¹è±¡è¿›å…¥synchronized ä¸´ç•ŒåŒºååˆ·æ–°äº†ä¸»å†…å­˜ä¸­çš„æœ€ç»ˆæ•°æ®ï¼Œå¯¹print(s)æ¥è¯´å·²ç»æ²¡å…³ç³»äº†\n\næ€è€ƒï¼Œè‡³äºä¸ºä»€ä¹ˆSystem.out.println(Object x)å¦‚æ­¤å®ç°ï¼Œè¿›è¡Œå¤§èƒ†çš„çŒœæµ‹ï¼š\n1ã€ä»é€»è¾‘ä¸Šç»™å‡ºçš„è¡¨ç°æ˜¯æ‰€è§å³æ‰€å¾—ï¼Œæˆ‘å½“å‰æ˜¯ä»€ä¹ˆå€¼ï¼Œé‚£æˆ‘å¾€æ§åˆ¶å°æ‰“å°çš„å°±åº”è¯¥æ˜¯ä»€ä¹ˆå€¼ï¼Œè€Œä¸åº”è¯¥è¢«å…¶ä»–çº¿ç¨‹å½±å“åˆ°ï¼ˆæœ¬åœ°ç¼“å­˜åˆ·æ–°äº†æœ€æ–°å€¼ï¼‰\n2ã€è¿™ä¸ªåœ°æ–¹ä½¿ç”¨ synchronizedä¿®é¥°ï¼Œé‚£ä¸€å®šæ˜¯é‡Œé¢çš„æ“ä½œå±äºä¸´ç•Œèµ„æºï¼Œéœ€è¦ä¿æŠ¤ï¼Œè¿™æ˜¯ç›®çš„ã€‚Object è¢«åŠ¨çš„åšäº†ä¸€æ¬¡æœ¬åœ°å†…å­˜å‰¯æœ¬çš„åˆ·æ–°ï¼Œæˆ‘è§‰å¾—æ˜¯é¡ºå¸¦çš„ã€‚\n\næ€»ç»“ï¼š\n1ã€System.out.println(b) è™½ç„¶å¯¹å½“å‰çº¿ç¨‹çš„ç¼“å­˜åšäº†ä¸€æ¬¡æœ¬åœ°å†…å­˜çš„åˆ·æ–°ï¼Œä½†æ˜¯å¯ä»¥å½“æˆä¸€ä¸ªè°ƒå‰‚ã€‚\n2ã€çœŸçš„æƒ³è¦å®ç°å¯è§æ€§åŸåˆ™ï¼Œè¿˜æ˜¯è¦åœ¨ä¸šåŠ¡ä»£ç å±‚é¢ æ˜¾ç¤ºçš„ ç”¨volatileä¹‹ç±»çš„æœºåˆ¶æ¥ä¿è¯ã€‚\n\nä¸çŸ¥é“æˆ‘ç†è§£æ˜¯å¦æ­£ç¡®ï¼Œæ¬¢è¿å¤§å®¶æŒ‡æ­£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605682573,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1345041,"avatar":"","nickname":"Geek_c3ecc7","note":"","ucode":"F21F3E270FB264","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":272528,"discussion_content":"MESIåè®®äº†è§£ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590320840,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1210890,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7a/0a/0ce5c232.jpg","nickname":"å•","note":"","ucode":"8F08E2CB81C4C3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":201686,"discussion_content":"æˆ‘ä¹Ÿæ²¡ææ˜ç™½è¿™ä¸ªç»“æœï¼Œæˆ‘è¯•äº†ä¸‹ï¼Œæ„Ÿè§‰è¯´ä¸é€šï¼ŒæŒ‰ç†åº”è¯¥ä¼šå­˜åœ¨å¯è§æ€§çš„é—®é¢˜å•Šï¼Œä½†è¿è¡Œæ­£å¸¸","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583825015,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1631281,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er8ok3W1JuxlK1eHjfylzhBwkFm8lkIr4KibzLic5YjonIXj4t9RNkKV0PBUZv1wPM0fwdIwib6pickGA/132","nickname":"Geek_e08661","note":"","ucode":"DFD60339814CA6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5510,"discussion_content":"è€å¸ˆå¥½ï¼Œé’ˆå¯¹å›å¤1ï¼Œæˆ‘è¿˜å­˜åœ¨ç–‘é—®ï¼Œå¦‚æœæ˜¯è¯´åˆ‡æ¢çš„cpuæ— ç¼“å­˜è¿˜å¯ä»¥ç†è§£ï¼Œä½†æ˜¯è¯´ä¸»çº¿ç¨‹åœ¨çº¿ç¨‹2è¿›è¡Œioæ“ä½œæ—¶ï¼Œå°†b=2åˆ·æ–°åˆ°ä¸»å†…å­˜ï¼Œçº¿ç¨‹2çš„cpuç¼“å­˜è¿˜æ˜¯b=1,é‚£ä¹ˆä»–æ€ä¹ˆçŸ¥é“ä¸»å†…å­˜è¢«æ›´æ–°äº†ã€‚å†åšä¸€ä¸ªå‡è®¾ï¼Œå‡å¦‚çº¿ç¨‹2å¯ä»¥çŸ¥é“ä¸»å†…å­˜æ›´æ–°ï¼Œé‚£ä¹ˆæ€ä¹ˆç¡®ä¿çº¿ç¨‹2åœ¨çº¿ç¨‹1æ›´æ–°å®Œbåˆ°ä¸»å†…å­˜ä¹‹åå†å»ä¸»å†…å­˜æ›´æ–°å€¼ï¼Œå¦‚æœåœ¨çº¿ç¨‹1æ›´æ–°ä¹‹å‰å»ä¸»å†…å­˜æ›´æ–°bï¼Œæ­¤æ—¶çš„bè¿˜æ˜¯ç­‰äº1ï¼Œæœ›è§£ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566312450,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1107484,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e6/1c/9d3744ee.jpg","nickname":"å°æè®²æºç ","note":"","ucode":"2573037D7C82C8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1631281,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er8ok3W1JuxlK1eHjfylzhBwkFm8lkIr4KibzLic5YjonIXj4t9RNkKV0PBUZv1wPM0fwdIwib6pickGA/132","nickname":"Geek_e08661","note":"","ucode":"DFD60339814CA6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287972,"discussion_content":"ç¬¬ä¸€ï¼Œæ ¹æ®mesiç¼“å­˜ä¸€è‡´æ€§åè®®å’Œå¤„ç†å™¨å¯¹æ€»çº¿çš„å—…æ¢æœºåˆ¶ï¼Œèƒ½çŸ¥é“ä¸»å†…å­˜çš„æ›´æ–°ã€‚\nç¬¬äºŒï¼Œé€šè¿‡volatileå…³é”®å­—ï¼Œæˆ–è€…å¯¹è¯¥æ“ä½œåŠ é”ï¼Œæ¥ä¿è¯å¯è§æ€§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593602413,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":5510,"ip_address":""},"score":287972,"extra":""}]}]},{"had_liked":false,"id":105633,"user_name":"è€ç„¦","can_delete":false,"product_type":"c1","uid":1464949,"ip_address":"","ucode":"74DDCA99E5B626","user_header":"https://static001.geekbang.org/account/avatar/00/16/5a/75/a7e79c49.jpg","comment_is_top":false,"comment_ctime":1561045688,"is_pvip":false,"replies":[{"id":"38252","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","comment_id":105633,"uid":"1269969","ip_address":"","utype":1,"ctime":1561076633,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":5,"race_medal":0,"score":"108935228088","product_id":100023901,"comment_content":"æœ‰åŒå­¦è¯´getæ–¹æ³•ä¸ç”¨syncä¹Ÿèƒ½ä¿è¯å¯è§æ€§ï¼Œè¿™æ˜¯å¯¹çš„ã€‚ä½†å¦‚æœçœŸçš„è¿™ä¹ˆåšäº†ï¼ŒåŸå­æ€§å°±å¯èƒ½ä¼šè¢«æ‰“ç ´ã€‚syncå¹¶ä¸ä¿è¯çº¿ç¨‹ä¸è¢«ä¸­æ–­ã€‚å¦‚æœåœ¨å†™é«˜ä½ä¸¤ä¸ªåŒå­—çš„ä¸­é—´å†™çº¿ç¨‹è¢«ä¸­æ–­ï¼Œè€Œè¯»çº¿ç¨‹è¢«è°ƒåº¦æ‰§è¡Œï¼Œå› ä¸ºè¯»æ²¡æœ‰å°è¯•åŠ é”ï¼Œæ‰€ä»¥å¯ä»¥è¯»åˆ°å†™äº†ä¸€åŠçš„ç»“æœã€‚è¿™ç§æƒ…å†µéƒ½ä¸ç”¨è€ƒè™‘å¤šæ ¸ï¼Œå•æ ¸éƒ½ä¼šå‡ºç°åŸå­æ€§é—®é¢˜ã€‚æ‰€ä»¥è°¨æ…èµ·è§è¿˜æ˜¯ç»™getåŠ ä¸Šsyncä¿é™©ç‚¹ã€‚","like_count":25,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454746,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561076633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2014196,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTICpYDicqYOnUicMGJVcVyg32UwXiaSlBtVU2V2UC4dts1ddsCC2HPMYYmcbhe8QS2QR02DcXezLZ24Q/132","nickname":"Qoney","note":"","ucode":"A3EB4F1EA02531","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":272625,"discussion_content":"åˆ«çè¯´ï¼Œè¯¯å¯¼äººï¼Œä¸æ˜¯volitelä¿®é¥°çš„å®é™…å¯¹è±¡çš„å˜é‡åœ¨çº¿ç¨‹ä¸­ä¸å¯è§ï¼Œæ‰€ä»¥ä¸ºäº†å¯è§æ€§åŠ äº†é”","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1590329100,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1729855,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKeA6Awf2hRPJlRa4ZWo6fq3EQRlNowxjkJ48aicsHiapyCtgBy5e6t3DEiadMY92c46wwlrOibOcoNCw/132","nickname":"æ¥ç„•æ˜","note":"","ucode":"C9A71D22FAB7A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288671,"discussion_content":"æ›´ç›´è§‚çš„ç†è§£ï¼Œå¦‚æœaddOne() æ˜¯å¯¹å¯¹è±¡çš„æ“ä½œï¼šsetName(&#34;å¼ ä¸‰&#34;);setAge(20);  é‚£get()å°±æœ‰å¯èƒ½è¯»åˆ°nameæ˜¯å¼ ä¸‰ï¼Œä½†æ˜¯ageä¸æ˜¯20ï¼Œåˆšå¥½åœ¨setAgeä¹‹å‰ï¼ŒCPUåˆ‡æ¢æ—¶é—´ç‰‡ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹è¯»å–äº†ä¸å®Œæ•´çš„å¯¹è±¡ï¼›","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1593837133,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2797783,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/b0/d7/cb391b61.jpg","nickname":"ChesterChai","note":"","ucode":"E8C896CEF2B1A3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":403936,"discussion_content":"getæ–¹æ³•ä¸ç”¨syncæ€ä¹ˆä¿è¯å¯è§æ€§çš„ï¼Ÿç”¨volitelå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634193236,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2330905,"avatar":"https://static001.geekbang.org/account/avatar/00/23/91/19/6a3e7efc.jpg","nickname":"ç¨‹åºå‘˜9527","note":"","ucode":"1A1609F6BEAD84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378965,"discussion_content":"å¤šçº¿ç¨‹ä¸‹ï¼Œget()åœ¨è¯»ï¼ŒaddOneåœ¨å†™ï¼Œå†™çš„å€¼è¿˜æ²¡åˆ·åˆ°å†…å­˜ï¼Œæ­¤æ—¶æ˜¯get()æ–¹æ³•æ˜¯è¯»ä¸åˆ°addOneä¿®æ”¹çš„å€¼ï¼Œæ‰€ä»¥è¯»å†™éœ€è¦äº’æ–¥ï¼Œget()æ–¹æ³•éœ€è¦åŠ ä¸Šé”æ‰è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623566106,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75735,"user_name":"åˆ«çš±çœ‰","can_delete":false,"product_type":"c1","uid":1177354,"ip_address":"","ucode":"D24F65EFF65586","user_header":"https://static001.geekbang.org/account/avatar/00/11/f7/0a/067537fc.jpg","comment_is_top":false,"comment_ctime":1552461119,"is_pvip":false,"replies":[{"id":"27641","content":"æˆ‘è§‰å¾—ä½ è¿™ä¸ªæ‰æ˜¯æ­£é“ï¼Œå¹¶å‘é—®é¢˜å°å¿ƒè¿˜èº²ä¸è¿‡å‘¢ï¼Œå“ªé‡Œæ•¢å†’é™©å•Šï¼æ²¡æƒ³åˆ°è¿˜æœ‰å­¦ç”Ÿçœ‹è¿™ä¸ªä¸“æ ï¼Œæœ‰å‰é€”ğŸ‘<br><br>","user_name":"ä½œè€…å›å¤","comment_id":75735,"uid":"1269969","ip_address":"","utype":1,"ctime":1552479779,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":2,"race_medal":0,"score":"108926643519","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæˆ‘è§‰å¾—getæ–¹æ³•æœ‰å¿…è¦ç”¨åŠ é”æ¥ä¿è¯å¯è§æ€§çš„å¦ä¸€ä¸ªç†ç”±å¦‚ä¸‹:<br>class SafeCalc {<br>\tlong value = 0L;<br><br>\tsynchronized long get() {<br>\t\treturn value;<br>\t}<br><br>\tsynchronized void add(int i) {<br>\t\t&#47;&#47; ä¸šåŠ¡ä»£ç ....å‡å¦‚è¿™é‡Œæ¯”è¾ƒè€—æ—¶<br>\t\tvalue += i;<br>\t}<br>}<br><br>å‡å¦‚çº¿ç¨‹Aæ‰§è¡Œaddæ–¹æ³• å½“æ–¹æ³•è¿˜æ²¡æ‰§è¡Œå®Œ<br>çº¿ç¨‹Bæ‰§è¡Œgetæ–¹æ³• <br>å¦‚æœgetæ–¹æ³•æ²¡æœ‰åŠ é” å› ä¸ºæ­¤æ—¶Aæ­£åœ¨ä¿®æ”¹è¿™ä¸ªæ•°æ®  Bè·å–çš„æ•°æ®ä¸æ˜¯æœ€æ–°çš„ <br><br>æ‚¨çœ‹æˆ‘è¯´çš„å¯¹å—ï¼Ÿè¿˜æ˜¯è¯´å…·ä½“åœºæ™¯æœ‰ä¸åŒçš„éœ€æ±‚ï¼Œæœ‰äº›è¿˜æ˜¯å…è®¸è¿™ç‚¹å»¶è¿Ÿçš„ï¼Ÿ<br>æœ¬äººå¤§ä¸‰ï¼Œè¯·å‰è¾ˆå¤šæŒ‡æ•™ğŸ˜ğŸ˜è°¢è°¢<br>","like_count":25,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443007,"discussion_content":"æˆ‘è§‰å¾—ä½ è¿™ä¸ªæ‰æ˜¯æ­£é“ï¼Œå¹¶å‘é—®é¢˜å°å¿ƒè¿˜èº²ä¸è¿‡å‘¢ï¼Œå“ªé‡Œæ•¢å†’é™©å•Šï¼æ²¡æƒ³åˆ°è¿˜æœ‰å­¦ç”Ÿçœ‹è¿™ä¸ªä¸“æ ï¼Œæœ‰å‰é€”ğŸ‘\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552479779,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1645430,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKiauonyMORA2s43W7mogGDH4WYjW0gBJtYmUa9icTB6aMPGqibicEKlLoQmLKLWEctwHzthbTZkKR20w/132","nickname":"Spring4J","note":"","ucode":"06F056085A2564","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544599,"discussion_content":"æˆ‘å€’æ˜¯è§‰å¾—æœ‰æ²¡æœ‰å¿…è¦å¾—çœ‹å…·ä½“éœ€æ±‚ï¼Œåœ¨è¯»çš„æ—¶å€™å·²ç»æœ‰çº¿ç¨‹åœ¨å†™ï¼Œå¦‚æœéœ€æ±‚æ˜¯æƒ³è¦getæ­£åœ¨å†™çš„æ–°å€¼ï¼Œé‚£ä¹ˆå°±åŠ syncï¼Œå¦‚æœéœ€æ±‚æ˜¯å…è®¸getä¸Šæ¬¡å†™çš„æ—§å€¼ï¼Œé‚£ä¹ˆå°±ä¸åŠ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641585290,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72781,"user_name":"å¤§å—ç“œ","can_delete":false,"product_type":"c1","uid":1302444,"ip_address":"","ucode":"8801F97AE9DB1B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/4QtlO84mT9kcRmeglzXJxM31KiboYG3lIiaYXqKODYH0iaHdQibrwiaAhyUxIedjOliaXOP8pq7k6XZWFeiamGa6u6IOw/132","comment_is_top":false,"comment_ctime":1551716023,"is_pvip":false,"replies":[{"id":"26454","content":"ä¸ºå¿«ç‚¹èµ","user_name":"ä½œè€…å›å¤","comment_id":72781,"uid":"1269969","ip_address":"","utype":1,"ctime":1551787897,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"78861127351","product_id":100023901,"comment_content":"æ²™å‘ï¼Œå¹¶ä¸èƒ½ï¼Œä¸æ˜¯åŒä¸€æŠŠé”","like_count":18,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441742,"discussion_content":"ä¸ºå¿«ç‚¹èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551787897,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75775,"user_name":"åˆ«çš±çœ‰","can_delete":false,"product_type":"c1","uid":1177354,"ip_address":"","ucode":"D24F65EFF65586","user_header":"https://static001.geekbang.org/account/avatar/00/11/f7/0a/067537fc.jpg","comment_is_top":false,"comment_ctime":1552467115,"is_pvip":false,"replies":[{"id":"27624","content":"æŒ‰ç…§è§„èŒƒæ˜¯ä¸èƒ½ä¿è¯çš„ï¼Œå…·ä½“å®ç°ç°åœ¨å¯ä»¥ï¼Œè¿™ä¸¤ä¸ªä¸çŸ›ç›¾ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸èƒ½ä¾èµ–æ²¡æœ‰æ‰¿è¯ºçš„å®ç°ï¼Œå®ƒå¯ä»¥éšæ—¶æ”¹ï¼Œè§„èŒƒå°±ä¸å¯ä»¥éšæ—¶æ”¹ã€‚<br>æˆ‘ä»¬è¿™é‡Œå°±é‡‡å–éµå¾ªè§„èŒƒã€‚","user_name":"ä½œè€…å›å¤","comment_id":75775,"uid":"1269969","ip_address":"","utype":1,"ctime":1552476208,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"57387041963","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæˆ‘å¯¹æ‚¨å¯¹æˆåçš„å›ç­”æœ‰ç‚¹ç–‘é—®<br><br>------------------------------------------------------------<br>é™ˆå:<br>æˆ‘ç†è§£getæ–¹æ³•ä¸éœ€è¦åŠ synchroizedå…³é”®å­—ï¼Œä¹Ÿå¯ä»¥ä¿è¯å¯è§æ€§ã€‚<br>å› ä¸º å¯¹ valueçš„å†™æœ‰è¢« synchroized ä¿®é¥°ï¼ŒaddOneï¼ˆï¼‰æ–¹æ³•ç»“æŸåï¼Œä¼šå¼ºåˆ¶å…¶ä»–CPUç¼“å­˜å¤±æ•ˆï¼Œä»æ–°ä»å†…å­˜è¯»å–æœ€æ–°å€¼ï¼<br>Â <br>class SafeCalc {<br>long value = 0L;<br>long get() {<br>return value;<br>}<br>synchronized void addOne() {<br>value += 1;<br>}<br>}<br>2019-03-07ä½œè€…å›å¤ è¯´çš„å¯¹ï¼Œä»å®ç°ä¸Šçœ‹æ˜¯è¿™æ ·ã€‚ä½†æ˜¯hbæ²¡æœ‰è¿™æ ·çš„è¦æ±‚<br><br>------------------------------------------------------------<br>ä¼šå¼ºåˆ¶å…¶ä»–CPUç¼“å­˜å¤±æ•ˆï¼Œä»æ–°ä»å†…å­˜è¯»å–æœ€æ–°å€¼ï¼Ÿå¦‚æœé™ˆåè¯´çš„æ˜¯æ­£ç¡®çš„ï¼Œé‚£getæ–¹æ³•å°±ä¸ç”¨åŠ synchronizedå°±å¯ä»¥ä¿è¯å¯è§æ€§äº†ï¼Ÿ<br><br>ä½†æ‚¨æ–‡ç« é‡Œè¯´çš„æ˜¯getæ–¹æ³•ä¸åŠ é”å¯è§æ€§æ˜¯æ— æ³•ä¿è¯çš„<br><br><br>","like_count":13,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443028,"discussion_content":"æŒ‰ç…§è§„èŒƒæ˜¯ä¸èƒ½ä¿è¯çš„ï¼Œå…·ä½“å®ç°ç°åœ¨å¯ä»¥ï¼Œè¿™ä¸¤ä¸ªä¸çŸ›ç›¾ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸èƒ½ä¾èµ–æ²¡æœ‰æ‰¿è¯ºçš„å®ç°ï¼Œå®ƒå¯ä»¥éšæ—¶æ”¹ï¼Œè§„èŒƒå°±ä¸å¯ä»¥éšæ—¶æ”¹ã€‚\næˆ‘ä»¬è¿™é‡Œå°±é‡‡å–éµå¾ªè§„èŒƒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552476208,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73085,"user_name":"å°å’Œå°šç¬¨å—åŒ—","can_delete":false,"product_type":"c1","uid":1204628,"ip_address":"","ucode":"17C9BBB6DD25D2","user_header":"https://static001.geekbang.org/account/avatar/00/12/61/94/713b38ef.jpg","comment_is_top":false,"comment_ctime":1551794652,"is_pvip":false,"replies":[{"id":"26582","content":"æ¯”å–»å¾ˆç”ŸåŠ¨","user_name":"ä½œè€…å›å¤","comment_id":73085,"uid":"1269969","ip_address":"","utype":1,"ctime":1551832227,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"53091402204","product_id":100023901,"comment_content":"ä¸æ­£ç¡®<br>ä½¿ç”¨é”ä¿æŠ¤èµ„æºæ—¶ï¼Œå¯¹èµ„æºçš„æ‰€æœ‰æ“ä½œåº”è¯¥ä½¿ç”¨åŒä¸€ä¸ªé”ï¼Œè¿™æ ·æ‰èƒ½èµ·åˆ°ä¿æŠ¤çš„ä½œç”¨ã€‚<br>è¯¾åé¢˜ä¸­æ¯ä¸ªçº¿ç¨‹å¯¹èµ„æºçš„æ“ä½œéƒ½æ˜¯ç”¨çš„æ˜¯å„è‡ªçš„é”ï¼Œä¸å­˜åœ¨äº’æ–¥å’Œç«äº‰çš„æƒ…å†µã€‚<br>è¿™å°±ç›¸å½“äºæœ‰ä¸€ä¸ªæˆ¿é—´ï¼Œæ¯ä¸ªäººè¿‡æ¥éƒ½å®‰è£…ä¸€ä¸ªé—¨ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±é—¨çš„é’¥åŒ™ï¼Œå¤§å®¶éƒ½å¯ä»¥éšæ„å‡ºå…¥è¿™ä¸ªæˆ¿é—´ã€‚<br>ç”±äºæ¯ä¸ªçº¿ç¨‹éƒ½å¯ä»¥éšæ—¶è¿›å…¥æ–¹æ³•ï¼Œæ‰€ä»¥å­˜åœ¨åŸå­æ€§é—®é¢˜ï¼›<br>ä½†æ˜¯å› ä¸ºæ¯æ¬¡éƒ½æœ‰åŠ é”å’Œè§£é”çš„æ“ä½œï¼Œunlockæ“ä½œä¼šä½¿å…¶ä»–ç¼“å­˜çš„å˜é‡å¤±æ•ˆï¼Œéœ€è¦é‡æ–°ä»ä¸»å†…å­˜ä¸­åŠ è½½å˜é‡çš„å€¼ï¼Œæ‰€ä»¥å¯ä»¥è§£å†³å¯è§æ€§é—®é¢˜ã€‚<br>å¦‚æœ‰é”™è¯¯ï¼Œè¯·è€å¸ˆæŒ‡æ­£ã€‚","like_count":12,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441906,"discussion_content":"æ¯”å–»å¾ˆç”ŸåŠ¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551832227,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73664,"user_name":"é™ˆå","can_delete":false,"product_type":"c1","uid":1082730,"ip_address":"","ucode":"3AF9E8EB39E507","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtS26SJpSF7JLu9pusGsy1Qln0NdQg1eV2YKOJxpX2QXaBuuyXMqZY3fm0rhzKwsqN5aa6CVNOQQ/132","comment_is_top":false,"comment_ctime":1551952766,"is_pvip":false,"replies":[{"id":"26907","content":"ä½ è¯´çš„å¯¹ï¼Œä»å®ç°ä¸Šçœ‹æ˜¯è¿™æ ·ã€‚ä½†æ˜¯hbæ²¡æœ‰è¿™æ ·çš„è¦æ±‚<br>","user_name":"ä½œè€…å›å¤","comment_id":73664,"uid":"1269969","ip_address":"","utype":1,"ctime":1551962416,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":11,"race_medal":0,"score":"48796593022","product_id":100023901,"comment_content":"æˆ‘ç†è§£getæ–¹æ³•ä¸éœ€è¦åŠ synchroizedå…³é”®å­—ï¼Œä¹Ÿå¯ä»¥ä¿è¯å¯è§æ€§ã€‚<br>å› ä¸º å¯¹ valueçš„å†™æœ‰è¢« synchroized ä¿®é¥°ï¼ŒaddOneï¼ˆï¼‰æ–¹æ³•ç»“æŸåï¼Œä¼šå¼ºåˆ¶å…¶ä»–CPUç¼“å­˜å¤±æ•ˆï¼Œä»æ–°ä»å†…å­˜è¯»å–æœ€æ–°å€¼ï¼<br><br>class SafeCalc {<br>  long value = 0L;<br>  long get() {<br>    return value;<br>  }<br>  synchronized void addOne() {<br>    value += 1;<br>  }<br>}<br>","like_count":11,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442212,"discussion_content":"ä½ è¯´çš„å¯¹ï¼Œä»å®ç°ä¸Šçœ‹æ˜¯è¿™æ ·ã€‚ä½†æ˜¯hbæ²¡æœ‰è¿™æ ·çš„è¦æ±‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551962416,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1747184,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/a8/f0/529f15e9.jpg","nickname":"ç¬¬å››å•å…ƒ","note":"","ucode":"3ED9D553E1DE17","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371973,"discussion_content":"æ‰€ä»¥ä¸€æ¬¡addOneè¿è¡Œç»“æŸåï¼Œè°ƒç”¨getæ–¹æ³•å¯¹valueæ˜¯å¯è§çš„ã€‚ä½†æ˜¯åœ¨addOneæ–¹æ³•ä¿®æ”¹äº†valueï¼Œä½†æ–¹æ³•è¿˜æ²¡æœ‰è¿è¡Œå®Œçš„é—´éš™ï¼Œå¦‚æœè°ƒç”¨getæ–¹æ³•ï¼Œå°±æœ‰å¯è§æ€§é—®é¢˜äº†å§ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1620110128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1230417,"avatar":"https://static001.geekbang.org/account/avatar/00/12/c6/51/e39b5828.jpg","nickname":"åˆ˜é¹","note":"","ucode":"44F3D4DB3F5678","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":128122,"discussion_content":"æˆ‘è§‰å¾—è§£é”ååº”è¯¥å¼ºåˆ·ä¸»å­˜äº†ï¼Œå¦åˆ™ç®¡ç¨‹çš„happens-beforeæ€ä¹ˆå®ç°çš„ã€‚å³ä½¿æ˜¯å¯¹è±¡é”ï¼Œé”çš„çš„å¯¹è±¡ï¼Œä½†ä¸‹ä¸ªè¿›é”çš„çº¿ç¨‹è¿˜å¯ä»¥çœ‹åˆ°ä¸Šä¸€ä¸ªçš„æ“ä½œ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1578617367,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1264392,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4b/08/52954cd7.jpg","nickname":"ä¸ä¹æ´ª","note":"","ucode":"549CE57AB20B49","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352200,"discussion_content":"hbæ˜¯å•¥ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614647614,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1747184,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/a8/f0/529f15e9.jpg","nickname":"ç¬¬å››å•å…ƒ","note":"","ucode":"3ED9D553E1DE17","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1264392,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4b/08/52954cd7.jpg","nickname":"ä¸ä¹æ´ª","note":"","ucode":"549CE57AB20B49","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371971,"discussion_content":"happen beforeï¼Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620109744,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":352200,"ip_address":""},"score":371971,"extra":""}]},{"author":{"id":1621470,"avatar":"https://static001.geekbang.org/account/avatar/00/18/bd/de/e0c994b3.jpg","nickname":"ååœ°é“çš„ç¨‹åºå‘˜","note":"","ucode":"A04A239D173E2A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4276,"discussion_content":"â€œå› ä¸º å¯¹ valueçš„å†™æœ‰è¢« synchroized ä¿®é¥°ï¼ŒaddOneï¼ˆï¼‰æ–¹æ³•ç»“æŸåï¼Œä¼šå¼ºåˆ¶å…¶ä»–CPUç¼“å­˜å¤±æ•ˆâ€ä¸å¯¹å§ï¼æ‰§è¡Œä¸‹é¢è¿™æ®µä»£ç è¯•ä¸€ä¸‹\npublic class ThreadDemo implements Runnable{\n\n    public Integer b = 1;\n\n    @Override\n    public void run() {\n        System.out.println(&#34;A is begin&#34;);\n        while (true){\n            System.out.println(get());\n            if(get() == 1L){\n                break;\n            }\n        }\n        System.out.println(&#34;A is end&#34;);\n    }\n\n    long value = 0L;\n    long get() {\n        return value;\n    }\n    void addOne() {\n        synchronized (new Object()) {\n            value += 1;\n        }\n    }\n\n\n    public static void main(String[] args) {\n\n        ThreadDemo threadDemo = new ThreadDemo();\n        new Thread(threadDemo).start();\n\n        try {\n            TimeUnit.MILLISECONDS.sleep(2000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        System.out.println(&#34;main sleep end&#34;);\n        threadDemo.addOne();\n        try {\n            TimeUnit.MILLISECONDS.sleep(2000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        System.out.println(&#34;main end&#34;);\n\n    }\n}","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565266013,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1284938,"avatar":"https://static001.geekbang.org/account/avatar/00/13/9b/4a/6faf0428.jpg","nickname":"sdyin","note":"","ucode":"7DA6F50117410E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1621470,"avatar":"https://static001.geekbang.org/account/avatar/00/18/bd/de/e0c994b3.jpg","nickname":"ååœ°é“çš„ç¨‹åºå‘˜","note":"","ucode":"A04A239D173E2A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":39144,"discussion_content":"System.out.println(get());  å°†è¿™è¡Œæ”¹æˆ synchronized (this) {} åŒæ ·æœ‰æ•ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571896363,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4276,"ip_address":""},"score":39144,"extra":""},{"author":{"id":1521691,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/1b/5c1fefd9.jpg","nickname":"ç››ä¸–åŠæœˆ","note":"","ucode":"D4B9ED91189BB4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1621470,"avatar":"https://static001.geekbang.org/account/avatar/00/18/bd/de/e0c994b3.jpg","nickname":"ååœ°é“çš„ç¨‹åºå‘˜","note":"","ucode":"A04A239D173E2A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378844,"discussion_content":"å¯èƒ½æ˜¯æŒ‡ä»¤é‡æ’åºäº†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623462484,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4276,"ip_address":""},"score":378844,"extra":""}]},{"author":{"id":1430163,"avatar":"https://static001.geekbang.org/account/avatar/00/15/d2/93/9c58ce42.jpg","nickname":"HUANGKAIHANG","note":"","ucode":"F3871C5142AE52","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2830,"discussion_content":"å½“addOneæ–¹æ³•åŠ ä¸Šsynchronizedå…³é”®å­—åï¼ŒåŠ é”æ—¶é”çš„æ˜¯thiså¯¹è±¡ï¼Œè¿™æ—¶å€™å…¶å®ƒçº¿ç¨‹ä¸èƒ½è°ƒç”¨this.getæ–¹æ³•å§ï¼Œè¿™ç®—ä¸ç®—é—´æ¥è¾¾æˆäº†äº’æ–¥ï¼Ÿï¼Ÿå¦‚æœæ˜¯çš„è¯ï¼Œé‚£ä¹ˆè¿™é‡Œçš„getæ–¹æ³•ä¸åŠ é”ä¹Ÿä¸ä¼šæœ‰å¯è§æ€§é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563959895,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1179224,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/58/2cddaca4.jpg","nickname":"FH","note":"","ucode":"E47F6765CF1EEE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1430163,"avatar":"https://static001.geekbang.org/account/avatar/00/15/d2/93/9c58ce42.jpg","nickname":"HUANGKAIHANG","note":"","ucode":"F3871C5142AE52","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":22046,"discussion_content":"åŠ çš„æ˜¯thisé”, ä¸æ˜¯classé”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569569069,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":2830,"ip_address":""},"score":22046,"extra":""},{"author":{"id":1077931,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Wy62w9wUM6hLpx7wSw0M1SPoT6pKr07yPHOib56CvtzIQ96t7eZkG4UHQ2kgp9jzBJzfxB1mlP8ibosdqxVwicQUw/132","nickname":"ä¸‰è‰¯","note":"","ucode":"1AAAAED847D85E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1430163,"avatar":"https://static001.geekbang.org/account/avatar/00/15/d2/93/9c58ce42.jpg","nickname":"HUANGKAIHANG","note":"","ucode":"F3871C5142AE52","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":173000,"discussion_content":"â€œå½“addOneæ–¹æ³•åŠ ä¸Šsynchronizedå…³é”®å­—åï¼ŒåŠ é”æ—¶é”çš„æ˜¯thiså¯¹è±¡â€ æŒ‡çš„æ˜¯å½“ä¸€ä¸ªçº¿ç¨‹è·å–thiså¯¹è±¡é”åï¼Œå…¶ä»–çº¿ç¨‹å¦‚æœæƒ³è·å–thiså¯¹è±¡é”åˆ™è¢«é˜»å¡ï¼Œå¿…é¡»ç­‰å¾…è·å–thiså¯¹è±¡é”çš„å¯¹è±¡é‡Šæ”¾thiså¯¹è±¡é”åï¼Œå†è¿›è¡Œç«äº‰ã€‚\nè€Œå¦‚æœgetæ–¹æ³•ä¸é€šè¿‡synchronizedåŠ é”ï¼Œé‚£ä¹ˆè°ƒç”¨getæ–¹æ³•çš„çº¿ç¨‹å¹¶éœ€è¦ç«äº‰thiså¯¹è±¡é”ï¼Œä¹Ÿå°±ä¸ä¼šè¢«è·å–thiså¯¹è±¡é”çš„çº¿ç¨‹é˜»å¡ï¼Œä¹Ÿå°±è·Ÿé€šè¿‡synchronizedä¿®é¥°çš„æ–¹æ³•ä¸è¾¾æˆäº’æ–¥å…³ç³»ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1581822313,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":2830,"ip_address":""},"score":173000,"extra":""}]}]},{"had_liked":false,"id":108040,"user_name":"ç©ºç™½","can_delete":false,"product_type":"c1","uid":1084378,"ip_address":"","ucode":"1E1E05CF8A7B1B","user_header":"https://static001.geekbang.org/account/avatar/00/10/8b/da/c3c2a324.jpg","comment_is_top":false,"comment_ctime":1561651607,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"35921389975","product_id":100023901,"comment_content":"åœ¨åŠ¨æ€ç¼–è¯‘åŒæ­¥å—çš„æ—¶å€™ï¼ŒJITç¼–è¯‘å™¨å¯ä»¥å€ŸåŠ©é€ƒé€¸åˆ†ææ¥åˆ¤æ–­åŒæ­¥å—æ‰€ä½¿ç”¨çš„é”å¯¹è±¡æ˜¯å¦åªèƒ½å¤Ÿè¢«ä¸€ä¸ªçº¿ç¨‹è®¿é—®è€Œæ²¡æœ‰è¢«å‘å¸ƒåˆ°å…¶ä»–çº¿ç¨‹ã€‚<br><br>å¦‚æœåŒæ­¥å—æ‰€ä½¿ç”¨çš„é”å¯¹è±¡é€šè¿‡è¿™ç§åˆ†æè¢«è¯å®åªèƒ½å¤Ÿè¢«ä¸€ä¸ªçº¿ç¨‹è®¿é—®ï¼Œé‚£ä¹ˆJITç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿™ä¸ªåŒæ­¥å—çš„æ—¶å€™å°±ä¼šå–æ¶ˆå¯¹è¿™éƒ¨åˆ†ä»£ç çš„åŒæ­¥ã€‚è¿™ä¸ªå–æ¶ˆåŒæ­¥çš„è¿‡ç¨‹å°±å«åŒæ­¥çœç•¥ï¼Œä¹Ÿå«é”æ¶ˆé™¤ã€‚","like_count":8},{"had_liked":false,"id":81758,"user_name":"å½»å¤´æ’¤å°¾","can_delete":false,"product_type":"c1","uid":1421174,"ip_address":"","ucode":"7B120836359858","user_header":"https://static001.geekbang.org/account/avatar/00/15/af/76/feaffdea.jpg","comment_is_top":false,"comment_ctime":1554027034,"is_pvip":false,"replies":[{"id":"29625","content":"æ„Ÿè°¢çƒ­å¿ƒåŒå­¦çš„å›å¤ï¼ï¼","user_name":"ä½œè€…å›å¤","comment_id":81758,"uid":"1269969","ip_address":"","utype":1,"ctime":1554030936,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":3,"race_medal":0,"score":"27323830810","product_id":100023901,"comment_content":"åˆ«çš±çœ‰åŒå­¦,æˆ‘ç‰¹æ„æŠŠä½ çš„ä»£ç è€ƒä¸‹æ¥äº†,runæ–¹æ³•é‡Œä»€ä¹ˆéƒ½ä¸åŠ  å°±æ˜¯æ­»å¾ªç¯,åŠ ä¸€ä¸ªå˜é‡b==2ä½œä¸ºå¾ªç¯å‡ºå£,çº¿ç¨‹bä¹Ÿå¯ä»¥æ­£å¸¸é€€å‡ºçš„å•Š!!!!çº¿ç¨‹å¯è§æ€§é—®é¢˜åº”è¯¥æè¿°çš„æ˜¯å˜é‡è¢«ä¿®æ”¹çš„è¿™ä¸€ç¬é—´å…¶ä»–çº¿ç¨‹å¯è§æ€§é—®é¢˜å§?ä½ åŠ ä¸åŠ æ‰“å°è¯­å¥,åŠ ä¸åŠ åŒæ­¥ä»£ç å—éƒ½ä¸ä¼šå½±å“çº¿ç¨‹bçš„æ­£å¸¸ç»“æŸå§?åªè¦å˜é‡æœ€æ–°å€¼åˆ·åˆ°ä¸»å†…å­˜ä¸­,çº¿ç¨‹b å°±å¯è§ç„¶åå°±ç»ˆæ­¢äº†.","like_count":6,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445333,"discussion_content":"æ„Ÿè°¢çƒ­å¿ƒåŒå­¦çš„å›å¤ï¼ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554030936,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1442462,"avatar":"https://static001.geekbang.org/account/avatar/00/16/02/9e/ddd2d161.jpg","nickname":"å¤©å ‚","note":"","ucode":"69144CAE0545E2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":19110,"discussion_content":"æˆ‘åœ¨æˆ‘ç”µè„‘ä¸Šè¿è¡Œäº†ä¸€ä¸‹ï¼Œå‘ç°å¦‚æœæ²¡æœ‰æ‰“å°è¯­å¥ï¼Œåªæ·»åŠ b==2ä½œä¸ºå¾ªç¯é€€å‡ºæ¡ä»¶çš„è¯ï¼Œçº¿ç¨‹bæ˜¯æ²¡æ³•ç»“æŸçš„ã€‚è™½ç„¶ä¸»çº¿ç¨‹ä¿®æ”¹äº†bçš„å€¼ï¼Œä¸»çº¿ç¨‹ç»“æŸæ—¶ï¼Œä¼šæŠŠå€¼å†™å›å†…å­˜ã€‚å†…å­˜ä¸­çš„å€¼è™½ç„¶åˆ·æ–°äº†ï¼Œä½†æ˜¯æ­¤æ—¶bçº¿ç¨‹å¹¶æ²¡æœ‰å†å»å†…å­˜ä¸­å–bæœ€æ–°çš„å€¼ï¼Œæ‰€ä»¥è¿˜æ˜¯ä¸€ä¸ªæ­»å¾ªç¯ã€‚\npublic class Demo3 implements Runnable{\n\n    private int b;\n\n    @Override\n    public void run() {\n        System.out.println(&#34;begin&#34;);\n       while(true){\n           if(b == 2){\n               break;\n           }\n       }\n        System.out.println(&#34;finish&#34;);\n    }\n\n    public static void main(String[] args) {\n        Demo3 demo3 = new Demo3();\n        new Thread(demo3).start();\n        try {\n            Thread.currentThread().sleep(1000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        demo3.b = 2;\n    }\n\n\n}","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1569138686,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1153455,"avatar":"https://static001.geekbang.org/account/avatar/00/11/99/af/d29273e2.jpg","nickname":"é¥­ç²’","note":"","ucode":"4C3220B0D43997","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390793,"discussion_content":"å¾ªç¯ä½“å†…åŠ ä¸Šé‚£å¥soutæ‰“å°èƒ½è·³å‡ºå¾ªç¯ï¼Œæ²¡æœ‰é‚£å¥æ‰“å°å°±æ­»å¾ªç¯äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630048316,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":81581,"user_name":"ä¾¯å¤§è™","can_delete":false,"product_type":"c1","uid":1345219,"ip_address":"","ucode":"6450C75089FDB2","user_header":"","comment_is_top":false,"comment_ctime":1553952817,"is_pvip":false,"replies":[{"id":"29555","content":"æ²¡æœ‰åŒ…å«å…³ç³»ï¼Œå°±åƒå…¬äº¤å¡å’Œå•æ¬¡ç¥¨ä¸€æ ·ï¼Œéƒ½èƒ½åè½¦<br>","user_name":"ä½œè€…å›å¤","comment_id":81581,"uid":"1269969","ip_address":"","utype":1,"ctime":1553988700,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":4,"race_medal":0,"score":"27323756593","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªå°é—®é¢˜  classé”é”çš„æ˜¯è¯¥ç±»çš„æ‰€æœ‰å®ä¾‹ï¼Œå’Œthisä¸åº”è¯¥æ˜¯åŒä¸€æŠŠé”å—(thisä¸å°±æ˜¯è¿™ä¸ªç±»çš„å®ä¾‹å—)ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445259,"discussion_content":"æ²¡æœ‰åŒ…å«å…³ç³»ï¼Œå°±åƒå…¬äº¤å¡å’Œå•æ¬¡ç¥¨ä¸€æ ·ï¼Œéƒ½èƒ½åè½¦\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553988700,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1183424,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0e/c0/95fa2666.jpg","nickname":"å±±æ¥‚æ ‘","note":"","ucode":"1D59FC0C560BCD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5879,"discussion_content":"classé”æ˜¯é”çš„è¿™ä¸ªç±»çš„å­—èŠ‚ç ï¼Œä¸æ˜¯æ‰€æœ‰å®ä¾‹å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566523343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1102959,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d4/6f/8563b3ba.jpg","nickname":"Sunny","note":"","ucode":"6A57AA315EE4E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4434,"discussion_content":"åŒæ ·ç–‘æƒ‘ï¼Œä½†æ˜¯è€å¸ˆå›ç­”è¿˜æ˜¯æ²¡æ˜ç™½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565417657,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1535160,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/f0ibYgWiaKvSl0c7e0qhVgQE1z58EOauwFneXs6rh34a224w6LIbFYD8z8PF1K4ftSdeicJVcfPcPic1iaKBnPLMlGA/132","nickname":"Geek_kakaka","note":"","ucode":"FE20881B43C0C3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1102959,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d4/6f/8563b3ba.jpg","nickname":"Sunny","note":"","ucode":"6A57AA315EE4E0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215853,"discussion_content":"classæ˜¯ç”¨æ¥å”¯ä¸€çš„æè¿°è¿™ä¸ªç±»çš„ï¼Œè€Œthisè¡¨ç¤ºçš„æ˜¯å½“å‰ç±»çš„å®ä¾‹å¯¹è±¡ã€‚ä¸¾ä¸ªä¾‹å­å°±æ˜¯ï¼Œä¸€ä¸ªæ˜¯æ¨¡æ¿ï¼ˆç±»çš„Classå¯¹è±¡ï¼‰ï¼Œä¸€ä¸ªæ˜¯é€šè¿‡æ¨¡æ¿ç”Ÿæˆçš„å¯¹è±¡ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡æ˜¯ä¸ä¸€æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585390542,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4434,"ip_address":""},"score":215853,"extra":""}]}]},{"had_liked":false,"id":76992,"user_name":"åˆ«çš±çœ‰","can_delete":false,"product_type":"c1","uid":1177354,"ip_address":"","ucode":"D24F65EFF65586","user_header":"https://static001.geekbang.org/account/avatar/00/11/f7/0a/067537fc.jpg","comment_is_top":false,"comment_ctime":1552797449,"is_pvip":false,"replies":[{"id":"28087","content":"1. synchronized èƒ½ä¿è¯äº’æ–¥ï¼Œæ‰€ä»¥æ“ä½œ1å®Œæˆååˆ·å…¥å†…å­˜ä¹Ÿæ²¡é—®é¢˜ã€‚å¦‚æœä½ åŒæ­¥ä»£ç å—é‡Œè¦æ“ä½œ10äº¿ä¸ªå…±äº«å˜é‡ï¼Œå®ƒä¸æ”¾å†…å­˜æ”¾å“ªé‡Œå‘¢ï¼Ÿç¼“å­˜æ—©å°±çˆ†è¡¨äº†ã€‚<br>2. åŒæ„<br>3. åŒæ„ï¼Œå¦å¤–volatileè¿˜ä¼šéµå¾ªhbè§„åˆ™ã€‚Synchronizedè§£é”åä¼šå¼ºåˆ·ç¼“å­˜ã€‚","user_name":"ä½œè€…å›å¤","comment_id":76992,"uid":"1269969","ip_address":"","utype":1,"ctime":1552806635,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"23027633929","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰å‡ ä¸ªé—®é¢˜æ¯”è¾ƒç–‘æƒ‘ğŸ˜„<br>---------------------------------------------<br>é—®é¢˜1: <br>synchronized void test() {<br>        &#47;&#47;æ“ä½œ1<br>        value = value + 1;<br>         &#47;&#47;ä¸šåŠ¡æ–¹æ³•....<br>        &#47;&#47;æ“ä½œ2<br>         value = value + 2;<br>  }<br>ä¸ºä¿è¯åŸå­æ€§ï¼Œä¹Ÿå°±æ˜¯valueä¸­é—´çŠ¶æ€å¯¹å¤–ä¸å¯è§ï¼Œæˆ‘è§‰å¾—æ“ä½œ1å®Œæˆåä¸ä¼šå°†æœ€æ–°å€¼åˆ·å›å†…å­˜,è€Œæ˜¯åˆ°è§£é”åæ‰ä¼šå°†åœ¨synchronizedå—ä¸­æ“ä½œçš„æ•°æ®åˆ·å›å†…å­˜ï¼<br> --------------------------------------------------<br>é—®é¢˜2ï¼š<br>æœ‰äº›åŒå­¦è¯´å°†valueå˜é‡åŠ volitileä¹Ÿå¯ä»¥å®ç°åŒæ ·æ•ˆæœ.<br>æˆ‘è§‰å¾—ä¸è¡Œï¼Œå¯è§æ€§ä¿è¯äº†ï¼ŒåŸå­æ€§å´ä¼šè¢«ç ´åã€‚ç†ç”±å¦‚ä¸‹:<br>åŸºäºé—®é¢˜1ï¼Œå‡è®¾æ“ä½œ1å®Œæˆåä¸ä¼šå°†æœ€æ–°å€¼åˆ·å›å†…å­˜ï¼Œé‚£å¦‚æœæ­¤æ—¶valueå˜é‡åŠ volitileä¸Šåï¼Œæ“ä½œ1å®Œæˆåé‚£å²‚ä¸æ˜¯ä¼šå°†è¿™ä¸ªä¸­é—´å€¼valueå­˜å…¥å†…å­˜?å¦‚æœçœŸæ˜¯è¿™æ ·ï¼ŒåŸå­æ€§æ˜¯ä¿è¯ä¸äº†çš„ã€‚<br> ----------------------------------------------------<br>é—®é¢˜3:<br>volatile int x = 0ï¼šå‘Šè¯‰ç¼–è¯‘å™¨ï¼Œå¯¹è¿™ä¸ªå˜é‡çš„è¯»å†™ï¼Œä¸èƒ½ä½¿ç”¨ CPU ç¼“å­˜ï¼Œå¿…é¡»ä»å†…å­˜ä¸­è¯»å–æˆ–è€…å†™å…¥ã€‚<br> <br>Synchronizedå³ä¿è¯å¯è§æ€§ï¼Œåˆä¿è¯åŸå­æ€§ã€‚<br>é‚£è¦ä¿è¯å¯è§æ€§ï¼Œåœ¨Synchronizedå—ä¸­æ˜¯ä¸æ˜¯ç¬¬ä¸€æ¬¡è¯»å–åˆ°å˜é‡valueæ—¶å°†ç›´æ¥ä»å†…å­˜è¯»ï¼Œè§£é”æ—¶ï¼Œå°†æœ€æ–°å€¼åˆ·å›å†…å­˜ã€‚<br><br><br>å¸Œæœ›è€å¸ˆå¸®å¿™åˆ†æä¸‹ è°¢è°¢ğŸ™ğŸ™ğŸ™","like_count":5,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443533,"discussion_content":"1. synchronized èƒ½ä¿è¯äº’æ–¥ï¼Œæ‰€ä»¥æ“ä½œ1å®Œæˆååˆ·å…¥å†…å­˜ä¹Ÿæ²¡é—®é¢˜ã€‚å¦‚æœä½ åŒæ­¥ä»£ç å—é‡Œè¦æ“ä½œ10äº¿ä¸ªå…±äº«å˜é‡ï¼Œå®ƒä¸æ”¾å†…å­˜æ”¾å“ªé‡Œå‘¢ï¼Ÿç¼“å­˜æ—©å°±çˆ†è¡¨äº†ã€‚\n2. åŒæ„\n3. åŒæ„ï¼Œå¦å¤–volatileè¿˜ä¼šéµå¾ªhbè§„åˆ™ã€‚Synchronizedè§£é”åä¼šå¼ºåˆ·ç¼“å­˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552806635,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75790,"user_name":"è™è™â¤ï¸","can_delete":false,"product_type":"c1","uid":1086535,"ip_address":"","ucode":"157F261E80291A","user_header":"https://static001.geekbang.org/account/avatar/00/10/94/47/75875257.jpg","comment_is_top":false,"comment_ctime":1552469351,"is_pvip":false,"replies":[{"id":"27636","content":"æ€»ç»“çš„å¾ˆå¯¹ï¼ŒğŸ‘ğŸ‘ğŸ‘<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552479163,"ip_address":"","comment_id":75790,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23027305831","product_id":100023901,"comment_content":"è¯·è€å¸ˆå¯¹æˆ‘çš„ç†è§£è¿›è¡ŒæŒ‡æ­£ï¼š<br><br>é”å’Œè¢«ä¿æŠ¤èµ„æºçš„å…³ç³»ï¼Ÿ<br><br>äº’æ–¥é”é”ä½äº†ä¸€ä¸ªä»£ç æ®µ é™¤éè·å¾—äº’æ–¥é”ï¼Œå¦åˆ™å…¶ä»–çš„çº¿ç¨‹ä¸èƒ½è®¿é—®è¿™æ®µä»£ç ã€‚ ä»£ç æ®µä¸­åŒ…å«äº†å¯¹è¢«ä¿æŠ¤èµ„æºçš„æ“ä½œã€‚<br>ä½†æ˜¯ è¿™æŠŠé”ä¼¼ä¹å¯ä»¥æ˜¯ä»»ä½•çš„å¯¹è±¡ã€‚ è¿™ä¸ªé”å¯¹è±¡å¯ä»¥å’Œè¢«ä¿æŠ¤èµ„æºæœ‰æˆ–è€…æ²¡æœ‰ä»»ä½•åŒ…å«å…³ç³»ã€‚æœ‰åŒ…å«å…³ç³»çš„å°±æ˜¯ç”¨thisï¼Œ<br>æ²¡æœ‰åŒ…å«å…³ç³»çš„æƒ…å†µæ¯”å¦‚ï¼š<br>public class DemoClass<br>{<br>    private final Object lock = new Object();<br>    public void demoMethod(){<br>        synchronized (lock)<br>        {<br>            &#47;&#47;other thread safe code<br>        }<br>    }<br>}<br><br>å¯¹äºclass levelçš„synchronizedï¼Œæˆ‘çš„ç†è§£æ˜¯staticå˜é‡å±äºç±»è€Œè¢«æ‰€æœ‰å®ä¾‹å…±ç”¨ã€‚æ‰€ä»¥ç”¨object.classè¿™ä¸ªå¯¹è±¡ä½œä¸ºé”éå¸¸åˆé€‚ã€‚è¿™ä¹Ÿç­‰ä»·äº<br>public class DemoClass<br>{<br>    private final static Object lock = new Object();<br> <br>    public void demoMethod()<br>    {<br>        &#47;&#47;Lock object is static<br>        synchronized (lock)<br>        {<br>            &#47;&#47;other thread safe code<br>        }<br>    }<br>}<br><br>ç„¶è€Œç”¨object.classä½œä¸ºé”æ¥ä¿æŠ¤ä¸€ä¸ªéé™æ€èµ„æºå°±ä¸å¤ªåˆé€‚äº†ã€‚ä¾‹å¦‚<br>class X {<br>  &#47;&#47; ä¿®é¥°é™æ€æ–¹æ³•<br>  synchronized(X.class) void bar() {<br>    &#47;&#47; ä¸´ç•ŒåŒº<br>  }<br>}<br>ç±»çš„ä¸åŒå®ä¾‹éƒ½å¯èƒ½æ¥ç«äº‰è¿™åŒä¸€ä¸ªé”ï¼Œä¼šå¯¼è‡´å¹¶å‘ç¨‹åºéå¸¸ä½æ•ˆã€‚<br><br>å¦å¤–ï¼Œä¸è¦ç”¨Stringçš„å­—é¢é‡æ¥ä½œä¸ºé”ï¼Œå¯èƒ½ä¼šè¢«å…¶ä»–çš„å¯¹è±¡å¼•ç”¨ï¼Œå¯¼è‡´æ­»é”ã€‚<br><br>ä¸è¦ç”¨non-finalçš„fieldæ¥ä½œä¸ºé”ï¼Œnon finalçš„å¯¹è±¡å¯èƒ½ä¼šéšæ—¶è¢«æ”¹å˜ï¼Œè€Œå¯¼è‡´ä¸¤ä¸ªçº¿ç¨‹synchronize on different objectã€‚","like_count":5,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443034,"discussion_content":"æ€»ç»“çš„å¾ˆå¯¹ï¼ŒğŸ‘ğŸ‘ğŸ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552479163,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73416,"user_name":"churchchen","can_delete":false,"product_type":"c1","uid":1341972,"ip_address":"","ucode":"59DF322598870C","user_header":"https://static001.geekbang.org/account/avatar/00/14/7a/14/1aeddf3a.jpg","comment_is_top":false,"comment_ctime":1551881108,"is_pvip":false,"replies":[{"id":"26862","content":"getå’Œaddoneé”çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç»“åˆä¸Šä¸€æœŸçš„hbè§„åˆ™å†æƒ³æƒ³<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551957820,"ip_address":"","comment_id":73416,"utype":1}],"discussion_count":4,"race_medal":0,"score":"23026717588","product_id":100023901,"comment_content":"class SafeCalc {<br>  static long value = 0L;<br>  synchronized long get() {<br>    return value;<br>  }<br>  synchronized static void addOne() {<br>    value += 1;<br>  }<br>}<br><br><br>get()æ–¹æ³•çš„å¯è§æ€§ä¸å¤ªç†è§£ä¸ºä»€ä¹ˆä¸èƒ½ä¿è¯","like_count":5,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442075,"discussion_content":"getå’Œaddoneé”çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç»“åˆä¸Šä¸€æœŸçš„hbè§„åˆ™å†æƒ³æƒ³\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551957820,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2014196,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTICpYDicqYOnUicMGJVcVyg32UwXiaSlBtVU2V2UC4dts1ddsCC2HPMYYmcbhe8QS2QR02DcXezLZ24Q/132","nickname":"Qoney","note":"","ucode":"A3EB4F1EA02531","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":272633,"discussion_content":"ä»–å‘çš„ä»£ç æœ‰é—®é¢˜ï¼Œä¸æ˜¯è€å¸ˆçš„ä»£ç ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590329857,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1641319,"avatar":"https://static001.geekbang.org/account/avatar/00/19/0b/67/dc49a1a8.jpg","nickname":"åœ¨è·¯ä¸Š","note":"","ucode":"E1184E76B14431","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":131287,"discussion_content":"é¦–å…ˆgetæ–¹æ³•é”çš„å¯¹è±¡æ˜¯this,è€ŒaddOneæ–¹æ³•é”çš„å¯¹è±¡æ˜¯è¯¥ç±»çš„Classå¯¹è±¡ã€‚å› ä¸ºè¿™ä¸¤ä¸ªæ–¹æ³•é”çš„ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œé‚£å°±å­˜åœ¨åŒä¸€æ—¶é—´ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œgetæ–¹æ³•ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒaddOneæ–¹æ³•çš„å¯èƒ½ã€‚å¦‚æœåœ¨Açº¿ç¨‹æ‰§è¡ŒaddOneæ–¹æ³•æ˜¯æ‰§è¡Œå®Œäº†åŠ ä»¥çš„æ“ä½œï¼Œä½†æ˜¯è¿˜æ²¡æ‰§è¡Œåˆ°é”çš„é‡Šæ”¾ï¼Œç„¶åæ­¤æ—¶åˆ‡æ¢åˆ°Bçº¿ç¨‹æ‰§è¡Œgetæ–¹æ³•ã€‚å› æ­¤Bçº¿ç¨‹è¯»å–çš„è¿˜æ˜¯æ—§å€¼ï¼Œå› ä¸ºAçš„æ‰€è¿˜æ²¡é‡Šæ”¾å®ƒçš„ç¼“å­˜å°±å¯èƒ½è¿˜æ²¡åŒæ­¥åˆ°ä¸»å†…å­˜ä¸­ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578836086,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2014196,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTICpYDicqYOnUicMGJVcVyg32UwXiaSlBtVU2V2UC4dts1ddsCC2HPMYYmcbhe8QS2QR02DcXezLZ24Q/132","nickname":"Qoney","note":"","ucode":"A3EB4F1EA02531","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1641319,"avatar":"https://static001.geekbang.org/account/avatar/00/19/0b/67/dc49a1a8.jpg","nickname":"åœ¨è·¯ä¸Š","note":"","ucode":"E1184E76B14431","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":272632,"discussion_content":"æ˜æ˜å°±æ˜¯é”çš„åŒä¸€ä¸ªå¯¹è±¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590329791,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":131287,"ip_address":""},"score":272632,"extra":""}]}]},{"had_liked":false,"id":72878,"user_name":"ç¨‹åºå‘˜æ˜Ÿæ˜ŸtoC","can_delete":false,"product_type":"c1","uid":1218860,"ip_address":"","ucode":"2581BCBB3DC089","user_header":"https://static001.geekbang.org/account/avatar/00/12/99/2c/faadcfbc.jpg","comment_is_top":false,"comment_ctime":1551749821,"is_pvip":false,"replies":[{"id":"26484","content":"æœ‰å…´è¶£çš„è‡ªå·±æ‰¾èµ„æ–™çœ‹å§","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551794477,"ip_address":"","comment_id":72878,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23026586301","product_id":100023901,"comment_content":"synchronizedçš„åŠ é”è§£é”ï¼Œå…·ä½“æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œæ²¡æœ‰è®²","like_count":5,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441804,"discussion_content":"æœ‰å…´è¶£çš„è‡ªå·±æ‰¾èµ„æ–™çœ‹å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551794477,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2385122,"avatar":"","nickname":"Geek_a56085","note":"","ucode":"6E1E5A529E8F6E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337334,"discussion_content":"MySqlå®æˆ˜45 å’Œè¿™ä¸ªå®Œå…¨ä¸èƒ½ç›¸æ¯”ï¼ŒåŸç†éƒ½ä¸è®²ï¼Œé†‰äº†ï¼Ÿè‡³å°‘ä¸€æ¬¡è®²çš„æ˜ç™½?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608877768,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":148596,"user_name":"è´¾é™","can_delete":false,"product_type":"c1","uid":1059377,"ip_address":"","ucode":"081E70CC01F6B8","user_header":"https://static001.geekbang.org/account/avatar/00/10/2a/31/9edbf8a6.jpg","comment_is_top":false,"comment_ctime":1573035855,"is_pvip":true,"replies":[{"id":"57243","content":"æ˜¯çš„ï¼Œéœ€è¦xxx.classæ¥é”","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1573047841,"ip_address":"","comment_id":148596,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18752905039","product_id":100023901,"comment_content":"<br>class SafeCalc {<br>  static long value = 0L;<br>  synchronized long get() {<br>    return value;<br>  }<br>  synchronized void addOne() {<br>    value += 1;<br>  }<br>}<br>è¯·é—®è€å¸ˆå’Œç•™è¨€åŒºçš„åŒå­¦ï¼Œå¦‚æœvalueæ˜¯staticï¼Œæ˜¯ä¸æ˜¯ç”¨synchronized(this)å°±é”ä¸ä½äº†ï¼Ÿæ˜¯ä¸æ˜¯è¦å°†get&#47;addOneæ–¹æ³•ä¹Ÿè¦åŠ ä¸Šstaticï¼Œè¿™æ ·æ˜¯ä½¿ç”¨synchronized(xxx.class)æ¥é”ä½valueè¿™ä¸ªç±»ä¸­çš„ä¸´ç•Œèµ„æº","like_count":4,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473546,"discussion_content":"æ˜¯çš„ï¼Œéœ€è¦xxx.classæ¥é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573047841,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1367048,"avatar":"https://static001.geekbang.org/account/avatar/00/14/dc/08/64f5ab52.jpg","nickname":"é™ˆæ–Œ","note":"","ucode":"B639AB5F6AA03D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342250,"discussion_content":"æ˜¯å¦å¯ä»¥ç†è§£ä¸ºï¼šä½ ç”¨äº†é”ï¼Œä½†æ˜¯é”é”™èµ„æºäº†ã€‚ä½ é”äº†thiså¯¹è±¡ï¼Œå®é™…ä¸Šéœ€è¦é”Class SafeCalc ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610624556,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85883,"user_name":"Geek_9621ee","can_delete":false,"product_type":"c1","uid":1079138,"ip_address":"","ucode":"F136E7AC611A8B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLjrPm3HE2KwDa5zGK5N77KZwJEnPU5lgVhKuZicvQ1nL2iad92uetnCmdgIIxeCdu8lhoQ0w5uWEHA/132","comment_is_top":false,"comment_ctime":1555287974,"is_pvip":false,"replies":[{"id":"30892","content":"osçš„ç‰¹æƒæŒ‡ä»¤ï¼Œå¯ä»¥å…³ä¸­æ–­ã€‚ä½†æ˜¯æ™®é€šçš„è¿›ç¨‹æ˜¯åšä¸åˆ°çš„ã€‚å¦‚æœæoså¯ä»¥ï¼Œå› ä¸ºosæ˜¯ä¸Šå¸ã€‚å¦‚æœæ˜¯æ™®é€šäººï¼Œæƒ³è®©è‡ªå·±é•¿ç”Ÿä¸è€ï¼Œä¸Šå¸ä¸ä¼šç­”åº”çš„ã€‚æ‰€ä»¥çœ‹ä½ ç«™åœ¨å“ªä¸ªè§’åº¦çœ‹å¾…è¿™ä¸ªé—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1555295375,"ip_address":"","comment_id":85883,"utype":1}],"discussion_count":3,"race_medal":0,"score":"18735157158","product_id":100023901,"comment_content":"æ‚¨å¥½ï¼Œæˆ‘ä¸Šæ¬¡è¯·æ•™:synchronized å—ä¸­çš„ä»£ç ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿçº¿ç¨‹åˆ‡æ¢ï¼Œå¦‚æœå‘ç”Ÿçº¿ç¨‹åˆ‡æ¢è¿˜å¦‚ä½•ä¿è¯åŸå­æ€§ï¼Œæ‚¨è¯´ â€œåŸå­æ€§å’Œçº¿ç¨‹åˆ‡æ¢æ²¡æœ‰ä»€ä¹ˆå…³ç³»ï¼Œosæƒ³å¤šä¼šå„¿åˆ‡æ¢å°±å¤šä¼šåˆ‡æ¢â€ï¼Œä½†æ˜¯æˆ‘åœ¨ä»Šå¤©çš„è¯¾ä¸­çœ‹åˆ°ï¼šâ€œä½ å·²ç»çŸ¥é“ï¼ŒåŸå­æ€§é—®é¢˜çš„æºå¤´æ˜¯çº¿ç¨‹åˆ‡æ¢ï¼Œå¦‚æœèƒ½å¤Ÿç¦ç”¨çº¿ç¨‹åˆ‡æ¢é‚£ä¸å°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜äº†å—ï¼Ÿè€Œæ“ä½œç³»ç»Ÿåšçº¿ç¨‹åˆ‡æ¢æ˜¯ä¾èµ– CPU ä¸­æ–­çš„ï¼Œæ‰€ä»¥ç¦æ­¢ CPU å‘ç”Ÿä¸­æ–­å°±èƒ½å¤Ÿç¦æ­¢çº¿ç¨‹åˆ‡æ¢ã€‚â€è¿™æ˜¯ä¸æ˜¯æœ‰ç‚¹çŸ›ç›¾å‘¢ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446850,"discussion_content":"osçš„ç‰¹æƒæŒ‡ä»¤ï¼Œå¯ä»¥å…³ä¸­æ–­ã€‚ä½†æ˜¯æ™®é€šçš„è¿›ç¨‹æ˜¯åšä¸åˆ°çš„ã€‚å¦‚æœæoså¯ä»¥ï¼Œå› ä¸ºosæ˜¯ä¸Šå¸ã€‚å¦‚æœæ˜¯æ™®é€šäººï¼Œæƒ³è®©è‡ªå·±é•¿ç”Ÿä¸è€ï¼Œä¸Šå¸ä¸ä¼šç­”åº”çš„ã€‚æ‰€ä»¥çœ‹ä½ ç«™åœ¨å“ªä¸ªè§’åº¦çœ‹å¾…è¿™ä¸ªé—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555295375,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1828913,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/e8/31/65efd664.jpg","nickname":"Tuzki","note":"","ucode":"C681B9EE5F7B2D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":194517,"discussion_content":"æˆ‘æ˜¯è¿™æ ·ç†è§£çš„ï¼Œä¸çŸ¥é“å¯¹ä¸å¯¹ï¼š\nOSè§„å®šæ¯ä¸ªçº¿ç¨‹åªèƒ½åœ¨æ—¶é—´ç‰‡å†…æ‰§è¡Œï¼Œæ—¶é—´ç‰‡è¿‡åï¼ŒOSä¼šå°†èµ„æºåˆ†é…ç»™å…¶ä»–çº¿ç¨‹ï¼Œåªä¸è¿‡ä»£ç å—ä¸ŠåŠ äº†é”ï¼ŒOSæ²¡æœ‰å°†èµ„æºåˆ†é…ç»™åˆ«çš„çº¿ç¨‹ï¼Œè€Œæ˜¯ç»§ç»­å°†æ—¶é—´ç‰‡åˆ†é…ç»™åŸæ¥çš„çº¿ç¨‹ï¼ŒçŸ¥é“ä»–æ‰§è¡Œå®Œï¼Œé‡Šæ”¾é”ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1583227924,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2573722,"avatar":"","nickname":"Geek_36e4bb","note":"","ucode":"90E84F8CC8A410","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370285,"discussion_content":"æˆ‘ç†è§£,åœ¨å•æ ¸cpuä¸­åŸå­æ€§æ˜¯å› ä¸ºçº¿ç¨‹åˆ‡æ¢é€ æˆçš„,ä½†æ˜¯åœ¨å¤šæ ¸cpuä¸­å¯èƒ½æ˜¯çº¿ç¨‹åˆ‡æ¢ä¹Ÿå¯èƒ½æ˜¯å¤šçº¿ç¨‹åŒæ—¶æ‰§è¡Œ,æ‰€ä»¥æœ‰æ•ˆçš„åŠæ³•æ˜¯ä¿è¯ä¸´ç•ŒåŒºä»£ç çš„äº’æ–¥æ‰§è¡Œ,è¿™æ ·æ—¢å¯ä»¥è§£å†³çº¿ç¨‹åˆ‡æ¢åˆå¯ä»¥è§£å†³å¤šçº¿ç¨‹åŒæ—¶æ‰§è¡Œçš„é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619356499,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74287,"user_name":"è½è½å½©è™¹","can_delete":false,"product_type":"c1","uid":1264832,"ip_address":"","ucode":"F4CE1908DF149A","user_header":"https://static001.geekbang.org/account/avatar/00/13/4c/c0/73d52c05.jpg","comment_is_top":false,"comment_ctime":1552181492,"is_pvip":false,"replies":[{"id":"27168","content":"æ„Ÿè°¢ä¸ç¦»ä¸å¼ƒå•Š<br>æµ‹è¯•çš„æ—¶å€™ç»å¸¸ç”¨sleepï¼Œå®é™…é¡¹ç›®è¿˜æ˜¯ç”¨joinå§ã€‚è¿™ä¸ªæˆ‘æ„Ÿè§‰ä¸èƒ½è®¤ä¸ºæ˜¯joinåŸåˆ™ã€‚è§„èŒƒé‡Œç¡®å®æ²¡æœ‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552190651,"ip_address":"","comment_id":74287,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18732050676","product_id":100023901,"comment_content":"è€å¸ˆçš„æ–‡ç« æˆ‘éƒ½è¦çœ‹å‡ é.è¯„è®ºåŒºä¹Ÿä¸æ•¢æ”¾è¿‡.<br><br>è¯„è®ºåŒºæœ‰äº›demoï¼Œæ³¨æ„å…³äºjoinçš„hbåŸåˆ™ï¼›æ³¨æ„system.out.printlnå¯¹å¯è§æ€§çš„å½±å“ï¼Œè¯¥æ–¹æ³•å†…éƒ¨åŠ é”äº†.<br>è¿˜æœ‰ä¸ªé—®é¢˜ï¼Œå¦‚æœæˆ‘ä¸ç”¨joinï¼Œè€Œæ˜¯sleepè¶³å¤Ÿé•¿æ—¶é—´ä»¥ç¡®ä¿çº¿ç¨‹è·‘å®Œäº†ï¼Œä¹Ÿèƒ½ä¿è¯å¯è§æ€§.å› ä¸ºçº¿ç¨‹ç»“æŸäº†ä»–çš„æœ¬åœ°å·¥ä½œç©ºé—´è¯¥é‡Šæ”¾äº†ï¼Œæ•°æ®è¦å¼ºåˆ¶åˆ·å›å†…å­˜äº†â€¦â€¦è¿™ä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯joinçš„hbåŸåˆ™å—ï¼Ÿæˆ‘çœ‹ç½‘ä¸Šè¯´åˆ°hbéƒ½ä¼šæŠŠjoinçš„é‚£ä¸ªåŸåˆ™è¯´æˆæ˜¯çº¿ç¨‹ç»ˆæ­¢è§„åˆ™.<br>","like_count":4,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442511,"discussion_content":"æ„Ÿè°¢ä¸ç¦»ä¸å¼ƒå•Š\næµ‹è¯•çš„æ—¶å€™ç»å¸¸ç”¨sleepï¼Œå®é™…é¡¹ç›®è¿˜æ˜¯ç”¨joinå§ã€‚è¿™ä¸ªæˆ‘æ„Ÿè§‰ä¸èƒ½è®¤ä¸ºæ˜¯joinåŸåˆ™ã€‚è§„èŒƒé‡Œç¡®å®æ²¡æœ‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552190651,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159330,"user_name":"yalio","can_delete":false,"product_type":"c1","uid":1131862,"ip_address":"","ucode":"FAB63813E4533A","user_header":"https://static001.geekbang.org/account/avatar/00/11/45/56/60ee7623.jpg","comment_is_top":false,"comment_ctime":1575600287,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14460502175","product_id":100023901,"comment_content":"è¿™ä¸ªgetæ–¹æ³•åŠ åŒæ­¥çš„ï¼Œæ˜¯éœ€è¦çš„ï¼Œå› ä¸ºå¦ä¸€ä¸ªçº¿ç¨‹è¯»å–çš„æ—¶å€™ï¼Œä¸ä¸€å®šæ˜¯ä»ä¸»å†…å­˜è¯»ï¼ŒsyncåŒæ­¥æ–¹æ³•é‡Šæ”¾é”åä¹Ÿä¸ä¼šä½¿å¾—å…¶ä»–çº¿ç¨‹çš„ç¼“å­˜å¤±æ•ˆã€‚","like_count":3},{"had_liked":false,"id":148256,"user_name":"è‹æš®æ²‰è§","can_delete":false,"product_type":"c1","uid":1577580,"ip_address":"","ucode":"532B816D4EF47B","user_header":"https://static001.geekbang.org/account/avatar/00/18/12/6c/61a598e9.jpg","comment_is_top":false,"comment_ctime":1572964859,"is_pvip":false,"replies":[{"id":"57454","content":"1.ç†è§£æ˜¯å¯¹çš„ï¼Œæ²¡æœ‰å…±äº«å°±æ²¡æœ‰å¹¶å‘é—®é¢˜<br>2.å•çº¿ç¨‹æ²¡æœ‰å¹¶å‘é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1573253143,"ip_address":"","comment_id":148256,"utype":1}],"discussion_count":3,"race_medal":0,"score":"14457866747","product_id":100023901,"comment_content":"è€å¸ˆï¼Œçœ‹å®Œå‰æ–‡ç« å’Œè¯„è®ºäº§ç”Ÿäº†å‡ ä¸ªé—®é¢˜ï¼Œå¸Œæœ›èƒ½è§£ç­”ä¸€ä¸‹ï¼š<br>1ã€æ–‡ä¸­è¯´çš„å¤šä¸ªçº¿ç¨‹è°ƒç”¨synchronizedçš„addOne()æˆ–è€…get()æ–¹æ³•æ˜¯é’ˆå¯¹åŒä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ã€‚<br>ä¾‹å¦‚ :å¯¹äºç±»ï¼š<br>class SafeCalc { <br>static long value = 0L; <br>synchronized long get() { return value; } <br>synchronized void addOne() { value += 1; }<br>}<br>å¦‚æœæˆ‘ä»¬æ˜¯ï¼šSafeCalc a = new SafeCalc();ï¼Œä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨aé‡Œçš„æ–¹æ³•addOne()æˆ–get()ï¼Œäº’æ–¥é”æ‰ä¼šç”Ÿæ•ˆã€‚å¦‚æœåˆSafeCalc b = new SafeCalc()ï¼Œä¸¤ä¸ªçº¿ç¨‹åˆ†åˆ«è°ƒç”¨a,bé‡Œçš„æ–¹æ³•addOne()æˆ–get(),äº’æ–¥é”ä¸ä¼šç”Ÿæ•ˆã€‚è¿™æ ·ç†è§£å¯¹å—ï¼Ÿ<br>2ã€å¹¶å‘ç¼–ç¨‹çš„æ˜¯å› ä¸ºæˆ‘ä»¬newå¤šä¸ªçº¿ç¨‹æ‰§è¡ŒåŒä¸€å—ä»£ç ï¼Œç„¶åCPUå¯èƒ½ä¼šåŒæ—¶è¿è¡Œåˆ°åŒä¸€æ®µä»£ç ï¼Œå› æ­¤å‡ºç°äº†å¯è§æ€§ï¼ŒåŸå­æ€§ç­‰å¹¶å‘é—®é¢˜ã€‚å¦‚æœæˆ‘ä»¬åœ¨ç¨‹åºä¸­ä¸åˆ›å»ºå¤šä¸ªçº¿ç¨‹ï¼Œé‚£ä¹ˆå°±ç®—åœ¨å¤šæ ¸CPUä¸Šè¿è¡Œï¼Œä¹Ÿä¸ä¼šå‡ºç°å¹¶å‘é—®é¢˜ï¼Ÿ<br>","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473441,"discussion_content":"1.ç†è§£æ˜¯å¯¹çš„ï¼Œæ²¡æœ‰å…±äº«å°±æ²¡æœ‰å¹¶å‘é—®é¢˜\n2.å•çº¿ç¨‹æ²¡æœ‰å¹¶å‘é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573253143,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1577580,"avatar":"https://static001.geekbang.org/account/avatar/00/18/12/6c/61a598e9.jpg","nickname":"è‹æš®æ²‰è§","note":"","ucode":"532B816D4EF47B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":44773,"discussion_content":"æˆ–è€…ç¬¬ä¸€ä¸ªé—®é¢˜ç†è§£ä¸ºå¦‚æœnewä¸¤ä¸ªå¯¹è±¡ï¼Œå› ä¸ºä¸åŒçº¿ç¨‹ç«äº‰çš„ä¸æ˜¯åŒä¸€æŠŠé”ï¼Œæ‰€ä»¥ä¸ä¼šæœ‰äº’æ–¥ç°è±¡ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1572965141,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2330905,"avatar":"https://static001.geekbang.org/account/avatar/00/23/91/19/6a3e7efc.jpg","nickname":"ç¨‹åºå‘˜9527","note":"","ucode":"1A1609F6BEAD84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378967,"discussion_content":"å•çº¿ç¨‹æ²¡æœ‰å¹¶å‘é—®é¢˜ï¼Ÿå•çº¿ç¨‹ä¸‹çº¿ç¨‹åˆ‡æ¢ä¸æ˜¯æœ‰åŸå­æ€§é—®é¢˜å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623567093,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":81046,"user_name":"Monster!","can_delete":false,"product_type":"c1","uid":1179101,"ip_address":"","ucode":"74F1D3BB5E3915","user_header":"https://static001.geekbang.org/account/avatar/00/11/fd/dd/baeda83e.jpg","comment_is_top":false,"comment_ctime":1553784941,"is_pvip":false,"replies":[{"id":"29427","content":"é‚£ä¸¤ä¸ªçº¿ç¨‹è¿˜æ²¡æ¥å¾—åŠè·‘ï¼Œä¸»çº¿ç¨‹æ‰§è¡Œåˆ°return threadCountTest.count;äº†","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1553786052,"ip_address":"","comment_id":81046,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14438686829","product_id":100023901,"comment_content":" private volatile Long count = 0L;<br>    private  void add(){<br>        int add = 0;<br>        while (add++&lt;10000){<br>            count ++;<br>        }<br>    }<br>    public static Long calc() throws InterruptedException {<br>        ThreadCountTest threadCountTest = new ThreadCountTest();<br>        Thread thread1 = new Thread(()-&gt;{<br>            threadCountTest.add();<br>        });<br>        Thread thread2 = new Thread(() -&gt; {<br>            threadCountTest.add();<br>        });<br>        &#47;&#47;å¼€å¯ä¸¤ä¸ªçº¿ç¨‹<br>        thread1.start();<br>        thread2.start();<br>        &#47;&#47;ç­‰å¾…ä¸¤ä¸ªçº¿ç¨‹ç»“æŸ<br>        &#47;*thread1.join();<br>        thread2.join();*&#47;<br><br>        return threadCountTest.count;<br>    }<br>ç‹è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸‹ï¼Œæ ¹æ®ä¸Šä¸€èŠ‚çš„æ€è€ƒé¢˜ï¼Œå¦‚æœè¦æƒ³è®©çº¿ç¨‹Aå¯¹å…±äº«èµ„æºçš„ä¿®æ”¹å¯¹çº¿ç¨‹Bå¯è§å…¶ä¸­ä¸€ç§æ–¹æ³•å°±æ˜¯åœ¨å…±äº«å˜é‡ä¸ŠåŠ volatileå…³é”®å­—ï¼Œå¦‚ä¸Šè¿°ä»£ç åœ¨æ³¨é‡Šæ‰ä¸¤ä¸ªæ–¹æ³•çš„join()æ—¶å¾—å‡ºçš„ç»“æœä¸º0ï¼Œæ”¾å¼€ä¸¤ä¸ªjoin()æ–¹æ³•åå¾—å‡ºçš„ç»“æœåˆæ˜¯éšæœºçš„ï¼Œè¿™ä¸ªé—®é¢˜å‡ºåœ¨å“ªé‡Œå‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445059,"discussion_content":"é‚£ä¸¤ä¸ªçº¿ç¨‹è¿˜æ²¡æ¥å¾—åŠè·‘ï¼Œä¸»çº¿ç¨‹æ‰§è¡Œåˆ°return threadCountTest.count;äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553786052,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79503,"user_name":"Vincent","can_delete":false,"product_type":"c1","uid":1135159,"ip_address":"","ucode":"CD8B84A57A6A0C","user_header":"https://static001.geekbang.org/account/avatar/00/11/52/37/13b4c8aa.jpg","comment_is_top":false,"comment_ctime":1553499936,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14438401824","product_id":100023901,"comment_content":"synchronized æ¡ˆä¾‹ä¸­é”æ˜¯synchronizedï¼Œé”å®šå¯¹è±¡æ˜¯thisæˆ–è€… XXX.class è¿™é‡Œæ¥çœ‹ï¼Œæˆ‘ä»¬çš„é”ç»“æ„æ˜¯synchronizedï¼Œé”å®šçš„èµ„æºæ˜¯å¯¹åº”çš„thiså’Œ XXX.classï¼Œåœ¨æ–‡ä¸­ä½œè€…ç‰¹æ„åŒºåˆ†é”ç»“æ„å’Œè¢«ä¿æŠ¤çš„èµ„æºæ˜¯å¾ˆå¥½çš„ä¸€ç‚¹ï¼Œä½†æ˜¯è¡Œæ–‡ä¸­å¹¶æ²¡æœ‰ç‰¹æ„å»è¯´æ˜è°æ˜¯é”ç»“æ„ï¼Œè°æ˜¯è¢«ä¿æŠ¤èµ„æº","like_count":3},{"had_liked":false,"id":73463,"user_name":"swx","can_delete":false,"product_type":"c1","uid":1236764,"ip_address":"","ucode":"EB677E52806C37","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1c/70d51b43.jpg","comment_is_top":false,"comment_ctime":1551890139,"is_pvip":false,"replies":[{"id":"26858","content":"ä½ ä¹Ÿä¼šæˆä¸ºä¸€å°Šå¤§ç¥çš„<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551957176,"ip_address":"","comment_id":73463,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14436792027","product_id":100023901,"comment_content":"çº¿ç¨‹æ¯æ¬¡è°ƒç”¨æ–¹æ³•é”çš„éƒ½æ˜¯æ–°newçš„ä¸€ä¸ªå¯¹è±¡ã€‚ä»¤å“¥è®²è§£å¾—é€å½»ï¼Œè®©æˆ‘è¿™ä¸ªèœé¸Ÿä¸€çœ‹codeå°±çŸ¥é“ç­”æ¡ˆã€‚æ­¤å¤–ï¼Œç•™è¨€æ¿æ½œä¼ä¸€æ¨½æ¨½å¤§ç¥ï¼Œæœ‰ç§è±ç„¶å¼€æœ—çš„æ„Ÿè§‰ã€‚","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442100,"discussion_content":"ä½ ä¹Ÿä¼šæˆä¸ºä¸€å°Šå¤§ç¥çš„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551957176,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73041,"user_name":"jeeker","can_delete":false,"product_type":"c1","uid":1444583,"ip_address":"","ucode":"1E78795E7DF8E7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erS45sT36oSCibh8YMF9aD0IKltrdCoEicqUeEzbC2Hlr4UiahibfLvpib3LauzQxv6X3vyfCvrgz0m3dg/132","comment_is_top":false,"comment_ctime":1551782974,"is_pvip":false,"replies":[{"id":"26510","content":"æ˜¯çš„ï¼Œåªè¦ä¸€æŠŠé”å°±è¡Œã€‚ä½†æ˜¯å·¥ç¨‹ä¸Šï¼Œè¿™æ ·å®¹æ˜“å‡ºé—®é¢˜ã€‚å› ä¸ºè¿™ä¸ªé”æ˜¯JVMå…¨å±€å”¯ä¸€çš„ã€‚æœ‰å¯èƒ½åˆ«äººä¹Ÿç”¨è¿™ä¸ª","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551797279,"ip_address":"","comment_id":73041,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14436684862","product_id":100023901,"comment_content":"ç‹è€å¸ˆ,é—®ä¸ªé—®é¢˜:<br>ä¿æŠ¤èµ„æºçš„æ—¶å€™æ˜¯ä¸æ˜¯åªè¦åŒä¸€æŠŠé”å°±å¥½äº†,è€Œä¸æ˜¯è¯´å¿…é¡»å¾—æŸä¸€æŠŠé”æ˜¯å—?<br>ä¸¾ä¸ªä¾‹å­, ä¸¤ä¸ªå¯¹è±¡ A.class ,B.class æ˜¯ä¸æ˜¯å¯ä»¥è¿™æ ·æ“ä½œ<br>class A {<br> static int a ;<br> synchronized(B.class) static void add (){<br>     a+=1;<br>    }<br>} <br>è¿™ç§æƒ…å†µä¸‹å¤šçº¿ç¨‹æ˜¯ä¸æ˜¯ä¹Ÿæ˜¯äº’æ–¥çš„?","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441887,"discussion_content":"æ˜¯çš„ï¼Œåªè¦ä¸€æŠŠé”å°±è¡Œã€‚ä½†æ˜¯å·¥ç¨‹ä¸Šï¼Œè¿™æ ·å®¹æ˜“å‡ºé—®é¢˜ã€‚å› ä¸ºè¿™ä¸ªé”æ˜¯JVMå…¨å±€å”¯ä¸€çš„ã€‚æœ‰å¯èƒ½åˆ«äººä¹Ÿç”¨è¿™ä¸ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551797279,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72839,"user_name":"Geek_c42505","can_delete":false,"product_type":"c1","uid":1232899,"ip_address":"","ucode":"6421EB85640C44","user_header":"https://static001.geekbang.org/account/avatar/00/12/d0/03/2e632d36.jpg","comment_is_top":false,"comment_ctime":1551746925,"is_pvip":false,"replies":[{"id":"26474","content":"å®é™…ä¸Šæ¯æ¬¡è°ƒç”¨éƒ½åˆ›å»ºæ–°çš„é”ï¼Œç›¸å½“äºæ²¡æœ‰é”ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551793555,"ip_address":"","comment_id":72839,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14436648813","product_id":100023901,"comment_content":"synchronized ä½œç”¨äºéé™æ€æ–¹æ³•ä¸Šï¼ŒåŠ é”å¯¹è±¡æ˜¯å½“å‰å¯¹è±¡ï¼Œä»£ç ä¸­new Object ä½œä¸ºé”ï¼Œä¸¤ä¸ªæ–¹æ³•ä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„é”ä¿æŠ¤åŒä¸€ä¸ªèµ„æºï¼Œæ˜¯ä¸èƒ½è§£å†³å¹¶å‘é—®é¢˜çš„","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441778,"discussion_content":"å®é™…ä¸Šæ¯æ¬¡è°ƒç”¨éƒ½åˆ›å»ºæ–°çš„é”ï¼Œç›¸å½“äºæ²¡æœ‰é”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551793555,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72816,"user_name":"Kaer","can_delete":false,"product_type":"c1","uid":1113558,"ip_address":"","ucode":"1BD233D3FAC2B1","user_header":"https://static001.geekbang.org/account/avatar/00/10/fd/d6/71e1cc29.jpg","comment_is_top":false,"comment_ctime":1551743277,"is_pvip":false,"replies":[{"id":"26472","content":"ä¸æ˜¯è¿™æ ·çš„ã€‚Safecalc.classæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œthisä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚ä»–ä»¬æ˜¯å¹³çº§çš„ã€‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551793449,"ip_address":"","comment_id":72816,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14436645165","product_id":100023901,"comment_content":"è€å¸ˆï¼Œå¯¹äºæœ€åçš„é”å®šSafecalc.classå’Œthisä¸æ˜¯ä¸€æŠŠé”æœ‰ç‚¹ç–‘é—®ã€‚éƒ½é”å®šäº†classäº†ï¼Œåœ¨æˆ‘ç†è§£è¿™ä¸ªæ—¶å€™thisä¹Ÿåº”è¯¥æ˜¯é”å®šçš„ã€‚è¿™ä¹ˆè¯´çš„è¯åº”è¯¥å°±æ˜¯äº’æ–¥çš„äº†ã€‚æ¢ä¸€ä¸ªè§’åº¦ç†è§£ï¼šå°±æ˜¯æˆ‘æŠŠå¤§é—¨é”å®šäº†ï¼Œæˆ¿é—´è‚¯å®šè¿›ä¸å»ï¼Œè™½ç„¶ä¸æ˜¯ä¸€æŠŠé”ï¼Œä½†æ˜¯æˆ‘è§‰å¾—åº”è¯¥èƒ½ä¿è¯äº’æ–¥ã€‚","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441768,"discussion_content":"ä¸æ˜¯è¿™æ ·çš„ã€‚Safecalc.classæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œthisä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚ä»–ä»¬æ˜¯å¹³çº§çš„ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551793449,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1061976,"avatar":"https://static001.geekbang.org/account/avatar/00/10/34/58/957ca791.jpg","nickname":"Alvin","note":"","ucode":"ECA64F2913024A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":353144,"discussion_content":"åº”è¯¥æ˜¯getçš„synchronizedå»æ‰ï¼ŒåŠ ä¸Šstaticä¿®é¥°å°±å¯ä»¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615031443,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72805,"user_name":"ä»»é¹æ–Œ","can_delete":false,"product_type":"c1","uid":1104086,"ip_address":"","ucode":"34319B05EA6E74","user_header":"https://static001.geekbang.org/account/avatar/00/10/d8/d6/47da34bf.jpg","comment_is_top":false,"comment_ctime":1551741458,"is_pvip":false,"replies":[{"id":"26468","content":"æ¯æ¬¡è°ƒç”¨éƒ½åˆ›å»ºä¸€æŠŠé”ï¼Œå…¶å®ç›¸å½“äºæ²¡æœ‰åŠ é”ã€‚ç¼–è¯‘å™¨ä¼˜åŒ–åï¼Œå°±å˜æˆæ— é”äº†","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551793278,"ip_address":"","comment_id":72805,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14436643346","product_id":100023901,"comment_content":"é”å®šçš„æ˜¯ä¸åŒå¯¹è±¡ï¼Œç›¸å½“äºä¸ºä¸åŒçš„èµ„æºåŠ é”ï¼Œä¸èƒ½è§£å†³å¹¶å‘é—®é¢˜","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441759,"discussion_content":"æ¯æ¬¡è°ƒç”¨éƒ½åˆ›å»ºä¸€æŠŠé”ï¼Œå…¶å®ç›¸å½“äºæ²¡æœ‰åŠ é”ã€‚ç¼–è¯‘å™¨ä¼˜åŒ–åï¼Œå°±å˜æˆæ— é”äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551793278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134495,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4f/9f/08b9eadf.jpg","nickname":"è§è´¤æ€é½","note":"","ucode":"A5F586D8205745","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":128954,"discussion_content":"è¿™ä¸ªä¸æ˜¯ç›¸å½“äºé”ä¸åŒçš„èµ„æºï¼Œä¸Šé¢æœ‰ä¸ªåŒå­¦çš„è¯„è®ºå¾ˆå½¢è±¡ï¼Œæ˜¯ç›¸å½“äºç»™ä¸€ä¸ªæˆ¿é—´å¼€äº†å¤šä¸ªé—¨ï¼Œæˆ¿é—´é‡Œçš„ä¸œè¥¿å°±æ˜¯èµ„æºï¼Œå…¶ä¸­ä¸€ä¸ªé—¨é”äº†ï¼Œå¹¶ä¸èƒ½é˜»æ­¢ä»ä¸€ä¸ªé—¨å»æˆ¿é—´é‡Œçš„èµ„æºï¼Œä¸åŒçš„é—¨ä¹‹é—´æ²¡æœ‰äº’æ–¥å…³ç³»ï¼Œæ‰€ä»¥è¿™æ ·çš„é”ï¼ˆé—¨ï¼‰æ˜¯æ— æ•ˆçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578668191,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":245957,"user_name":"Can2","can_delete":false,"product_type":"c1","uid":1488987,"ip_address":"","ucode":"3177519C403EAB","user_header":"https://static001.geekbang.org/account/avatar/00/16/b8/5b/053d770f.jpg","comment_is_top":false,"comment_ctime":1599120902,"is_pvip":false,"replies":[{"id":"90433","content":"ğŸ‘ğŸ»","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1599175893,"ip_address":"","comment_id":245957,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10189055494","product_id":100023901,"comment_content":"åŠ é”æœ¬è´¨å°±æ˜¯åœ¨é”å¯¹è±¡çš„å¯¹è±¡å¤´ä¸­å†™å…¥å½“å‰çº¿ç¨‹idï¼Œä½†æ˜¯new objectæ¯æ¬¡åœ¨å†…å­˜ä¸­éƒ½æ˜¯æ–°å¯¹è±¡ï¼Œæ‰€ä»¥åªæœ‰åˆ›å»ºå¯¹è±¡çš„çº¿ç¨‹å¯è§ï¼Œå³ä¸ä¼šå‘ç”Ÿé€ƒé€¸ã€‚é‚£ä¹ˆé€ƒé€¸åˆ†æçš„ä¼˜åŒ–ç»“æœå°±æ˜¯åŒæ­¥æ¶ˆé™¤ï¼Œå³å‘ç°æŸä¸ªå¯¹è±¡åªèƒ½ä»ä¸€ä¸ªçº¿ç¨‹å¯è®¿é—®ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªå¯¹è±¡ä¸Šçš„æ“ä½œå¯ä»¥ä¸éœ€è¦åŒæ­¥ã€‚æ€»çš„æ¥è¯´ï¼Œç™½åŠ çš„é”ã€‚","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505019,"discussion_content":"ğŸ‘ğŸ»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599175893,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180357,"user_name":"è¤š","can_delete":false,"product_type":"c1","uid":1387363,"ip_address":"","ucode":"C2AA96A2E0F55F","user_header":"https://static001.geekbang.org/account/avatar/00/15/2b/63/ea02349c.jpg","comment_is_top":false,"comment_ctime":1582267012,"is_pvip":false,"replies":[{"id":"71267","content":"é”èµ„æºæ˜¯å½¢è±¡è¯´æ³•ï¼Œå®é™…ä¸Šå°±æ˜¯é”å®šä¸€ä¸ªæ‰§è¡Œæƒé™","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1583236778,"ip_address":"","comment_id":180357,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10172201604","product_id":100023901,"comment_content":"æˆ‘æ„Ÿè§‰ï¼Œé”å¹¶ä¸æ˜¯é”ä½èµ„æºï¼Œè€Œæ˜¯é”ä½ä»£ç å—çš„æ‰§è¡Œæƒã€‚å¯¹äºé”èµ„æºè¿™ä¸€å—è¿˜æ˜¯ä¸èƒ½å¾ˆå¥½åœ°ç†è§£ï¼Œå“ªä½å¤§ç¥èƒ½å¸®æˆ‘è§£é™¤ä¸€ä¸‹ç–‘æƒ‘","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484624,"discussion_content":"é”èµ„æºæ˜¯å½¢è±¡è¯´æ³•ï¼Œå®é™…ä¸Šå°±æ˜¯é”å®šä¸€ä¸ªæ‰§è¡Œæƒé™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583236778,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":111637,"user_name":"è’™é¢è¶…äºº","can_delete":false,"product_type":"c1","uid":1107584,"ip_address":"","ucode":"9FE34EC44ABA78","user_header":"https://static001.geekbang.org/account/avatar/00/10/e6/80/c13098cc.jpg","comment_is_top":false,"comment_ctime":1562576740,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10152511332","product_id":100023901,"comment_content":"è¯„è®ºåŒºçš„æ°´å¹³å¯ä»¥åæ˜ å‡ºä½œè€…çš„æ°´å¹³ï¼Œå¾ˆå¤šå¤§ç‰›ã€‚å“ˆå“ˆå“ˆï¼Œå½“ç„¶æˆ‘è¿™æ¡ä¸ç®—","like_count":2,"discussions":[{"author":{"id":1103863,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d7/f7/e41209e0.jpg","nickname":"å¸¦åˆºçš„å°é»„ç“œ","note":"","ucode":"98C75CDC482C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6374,"discussion_content":"æçš„æˆ‘éƒ½ä¸æƒ³å­¦äº†ï¼Œè¿™å°±è·Ÿæˆ‘åœ¨è¯»å¹¼å„¿å›­ï¼Œèº«è¾¹éƒ½æ˜¯ä¸Šäº†å¤§å­¦äº†åŒå­¦ï¼","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566873160,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":86241,"user_name":"Richard","can_delete":false,"product_type":"c1","uid":1302876,"ip_address":"","ucode":"C16AE7CE877DCA","user_header":"https://static001.geekbang.org/account/avatar/00/13/e1/5c/b32f00b1.jpg","comment_is_top":false,"comment_ctime":1555330291,"is_pvip":false,"replies":[{"id":"31150","content":"å¦‚æœåªéœ€è¦å¯è§æ€§volatileå°±å¤Ÿäº†<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1555412672,"ip_address":"","comment_id":86241,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10145264883","product_id":100023901,"comment_content":"å¦‚æœåªæ˜¯ä¸ºäº†å¯è§æ€§çš„é—®é¢˜ï¼Œæ˜¯å¦å¯ä»¥åœ¨addæ–¹æ³•ä¸ŠåŠ é”ï¼ŒæŠŠvalueå£°æ˜ä¸ºvolatileï¼Œè€Œgetæ–¹æ³•ä¸åŠ é”ã€‚è¿™æ ·æ•ˆç‡æ˜¯ä¸æ˜¯ä¼šé«˜ä¸€äº›å•Šã€‚","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446934,"discussion_content":"å¦‚æœåªéœ€è¦å¯è§æ€§volatileå°±å¤Ÿäº†\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555412672,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":81762,"user_name":"å½»å¤´æ’¤å°¾","can_delete":false,"product_type":"c1","uid":1421174,"ip_address":"","ucode":"7B120836359858","user_header":"https://static001.geekbang.org/account/avatar/00/15/af/76/feaffdea.jpg","comment_is_top":false,"comment_ctime":1554027820,"is_pvip":false,"replies":[{"id":"29626","content":"1. åªèƒ½ä¿è¯é”ä½åŒä¸€ä¸ªå®ä¾‹çš„èµ„æºï¼Œä¸åŒçš„å®ä¾‹çš„é”ä¸åŒ,ä¸å­˜åœ¨äº’æ–¥<br>2. é”éšè—åœ¨å¯¹è±¡å†…éƒ¨ï¼Œæ›´å®‰å…¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554031089,"ip_address":"","comment_id":81762,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10143962412","product_id":100023901,"comment_content":"class X {<br>  &#47;&#47; ä¿®é¥°ä»£ç å—<br>  Object obj = new Object()ï¼›<br>  void baz() {<br>    synchronized(obj) {<br>      &#47;&#47; ä¸´ç•ŒåŒº<br>    }<br>  }<br>}  <br>è¯·é—®ç‹è€å¸ˆ,è¿™ç§æˆå‘˜å˜é‡ä½œä¸ºé”å¯¹è±¡ æ˜¯ä¸æ˜¯åªèƒ½ä¿è¯é”ä½åŒä¸€ä¸ªå®ä¾‹çš„èµ„æº,ä¸åŒçš„å®ä¾‹çš„é”ä¸åŒ,ä¸å­˜åœ¨äº’æ–¥å…³ç³»?ç„¶å,è¿™ç§æˆå‘˜å˜é‡ä½œä¸ºé”å¯¹è±¡å’Œthiså…³é”®å­—ä½œä¸ºé”å¯¹è±¡æœ‰ä»€ä¹ˆåŒºåˆ«ä¹ˆ?","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445336,"discussion_content":"1. åªèƒ½ä¿è¯é”ä½åŒä¸€ä¸ªå®ä¾‹çš„èµ„æºï¼Œä¸åŒçš„å®ä¾‹çš„é”ä¸åŒ,ä¸å­˜åœ¨äº’æ–¥\n2. é”éšè—åœ¨å¯¹è±¡å†…éƒ¨ï¼Œæ›´å®‰å…¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554031089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":81675,"user_name":"Mr.Panda","can_delete":false,"product_type":"c1","uid":1238864,"ip_address":"","ucode":"655A3013B5E849","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/50/d476ed6c.jpg","comment_is_top":false,"comment_ctime":1554003377,"is_pvip":false,"replies":[{"id":"29619","content":"ä½ è¯´çš„æ˜¯å¯¹çš„ï¼Œè€Œä¸”æ›´ä¸¥è°¨ã€‚ä½†æ˜¯ç«™åœ¨åº”ç”¨çš„è§’åº¦ï¼Œä¸€èˆ¬éƒ½å¿½ç•¥æ‰è¿™äº›ç»†èŠ‚ï¼Œè¿™æ ·åœ¨å¤§è„‘é‡Œæ¨æ¼”ç¨‹åºçš„æ‰§è¡Œä¼šæ›´å®¹æ˜“ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554029522,"ip_address":"","comment_id":81675,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10143937969","product_id":100023901,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæœ›ç­”ç–‘<br>æ¦‚å¿µï¼šâ€œåŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œâ€è¿™ä¸ªæ¡ä»¶éå¸¸é‡è¦ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºäº’æ–¥<br>ç–‘æƒ‘:  ä¸€æ®µå…³æ³¨ä»£ç (å¤šä¸ªæ“ä½œæŒ‡ä»¤)åªèƒ½ç”±ä¸ªä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œå°±ç®—ä¸­é—´å‘ç”Ÿçº¿ç¨‹åˆ‡æ¢ï¼Œå…¶ä»–çº¿ç¨‹ä¹Ÿä¸èƒ½æ‰§è¡Œè¿™æ®µä»£ç ï¼Œæ‰å«äº’æ–¥å§ <br>","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445294,"discussion_content":"ä½ è¯´çš„æ˜¯å¯¹çš„ï¼Œè€Œä¸”æ›´ä¸¥è°¨ã€‚ä½†æ˜¯ç«™åœ¨åº”ç”¨çš„è§’åº¦ï¼Œä¸€èˆ¬éƒ½å¿½ç•¥æ‰è¿™äº›ç»†èŠ‚ï¼Œè¿™æ ·åœ¨å¤§è„‘é‡Œæ¨æ¼”ç¨‹åºçš„æ‰§è¡Œä¼šæ›´å®¹æ˜“ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554029522,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73390,"user_name":"hxy","can_delete":false,"product_type":"c1","uid":1248553,"ip_address":"","ucode":"431327E8CA4364","user_header":"https://static001.geekbang.org/account/avatar/00/13/0d/29/18272af9.jpg","comment_is_top":false,"comment_ctime":1551876344,"is_pvip":true,"replies":[{"id":"26729","content":"è¿™ç§ç®€å•æƒ…å†µï¼Œå®é™…ä¸Šå‡ºbugçš„æ¦‚ç‡è¿˜çœŸæ˜¯å¾ˆä½ã€‚ä½†æ˜¯ä½ä¸æ„å‘³ç€æ­£ç¡®ã€‚<br>ä¹Ÿä¸ç”¨å¥‡æ€ªï¼Œæˆ‘ä»¬æ‰€è¯´çš„éƒ½æ˜¯å¯èƒ½ã€‚é”ä¸¤ä¸ªå¯¹è±¡ï¼Œç¼–è¯‘å™¨å®˜æ–¹ä¸ä¿è¯å¯è§æ€§ï¼Œç§ä¸‹é‡Œä¹Ÿè®¸èƒ½ä¿è¯ã€‚æˆ‘ä»¬ä¸èƒ½ä¾èµ–äºç§ä¸‹çš„æ–¹æ¡ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551882492,"ip_address":"","comment_id":73390,"utype":1}],"discussion_count":1,"race_medal":4,"score":"10141810936","product_id":100023901,"comment_content":"è€å¸ˆè¯·é—®synchronizedä¿®é¥°çš„ä¸´ç•ŒåŒºä¸­ï¼Œå¦‚æœä¸æ˜¯åŒä¸€æŠŠé”ï¼Œèƒ½ä¿è¯å…±äº«å˜é‡çš„å¯è§æ€§å—ï¼Ÿ<br>    private final static int cnt = 10000;<br>    private static int tmp = 0;<br><br>    public static void main(String[] args) {<br><br>        Object lock1 = new Object();<br>        Object lock2 = new Object();<br><br>        Thread thread1 = new Thread(() -&gt; {<br>            synchronized (lock1) {<br>                for (int i = 0; i &lt; cnt; i++) {<br>                    tmp++;<br>                }<br>            }<br>        });<br>        Thread thread2 = new Thread(() -&gt; {<br>            Watch.slp(10L);<br>            synchronized (lock2) {<br>                System.out.println(&quot;tmp is: &quot; + tmp);<br>            }<br>        });<br><br>        thread2.start();<br>        thread1.start();<br>    }<br>æˆ‘è¿™æ ·è¯•äº†ä¸€ä¸‹ï¼Œthread2æœ€åè¯»çš„å€¼æ˜¯æ­£ç¡®çš„ï¼Œæ„Ÿè§‰æœ‰ä¸€ç‚¹å¥‡æ€ª","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442059,"discussion_content":"è¿™ç§ç®€å•æƒ…å†µï¼Œå®é™…ä¸Šå‡ºbugçš„æ¦‚ç‡è¿˜çœŸæ˜¯å¾ˆä½ã€‚ä½†æ˜¯ä½ä¸æ„å‘³ç€æ­£ç¡®ã€‚\nä¹Ÿä¸ç”¨å¥‡æ€ªï¼Œæˆ‘ä»¬æ‰€è¯´çš„éƒ½æ˜¯å¯èƒ½ã€‚é”ä¸¤ä¸ªå¯¹è±¡ï¼Œç¼–è¯‘å™¨å®˜æ–¹ä¸ä¿è¯å¯è§æ€§ï¼Œç§ä¸‹é‡Œä¹Ÿè®¸èƒ½ä¿è¯ã€‚æˆ‘ä»¬ä¸èƒ½ä¾èµ–äºç§ä¸‹çš„æ–¹æ¡ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551882492,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73358,"user_name":"æ©˜å­","can_delete":false,"product_type":"c1","uid":1368522,"ip_address":"","ucode":"EDF6145878F897","user_header":"https://static001.geekbang.org/account/avatar/00/14/e1/ca/d8b0835f.jpg","comment_is_top":false,"comment_ctime":1551867475,"is_pvip":false,"replies":[{"id":"26725","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551882203,"ip_address":"","comment_id":73358,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10141802067","product_id":100023901,"comment_content":"setå’Œgetéƒ½å¯¹åŒä¸€ä¸ªå¯¹è±¡åŠ é”ï¼Œæ—¶å€™æ„å‘³ç€ï¼Œåœ¨å¹¶å‘æƒ…å†µä¸‹ï¼Œgetå’Œsetä¸èƒ½åŒæ—¶è¢«è°ƒç”¨ï¼Œåœ¨åŒä¸€æ—¶é—´åªèƒ½è°ƒç”¨ä¸€ä¸ªï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442039,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551882203,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2330905,"avatar":"https://static001.geekbang.org/account/avatar/00/23/91/19/6a3e7efc.jpg","nickname":"ç¨‹åºå‘˜9527","note":"","ucode":"1A1609F6BEAD84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378976,"discussion_content":"éœ€è¦äº’æ–¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623571400,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72921,"user_name":"Geek_961eed","can_delete":false,"product_type":"c1","uid":1444566,"ip_address":"","ucode":"A62198D96379F5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erWxMXolPylQk8Z6V6yt2LtibksrksC4bHtmxkuCC4Wzw7trl6CfwmsSFMyHFItFnvl21RvQ8fyOBQ/132","comment_is_top":false,"comment_ctime":1551755367,"is_pvip":false,"replies":[{"id":"26489","content":"å¹³è¡Œå…³ç³»ï¼Œä¸­å›½å’Œç¾å›½ä¹‹é—´çš„å…³ç³»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551794866,"ip_address":"","comment_id":72921,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10141689959","product_id":100023901,"comment_content":"æƒ³é—®ä¸‹ä½œè€…ï¼Œç±»é”å’Œå¯¹è±¡å®ä¾‹é”ä¹‹é—´æœ‰ä»€ä¹ˆè”ç³»ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1004192,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/a0/d308434e.jpg","nickname":"StarKing","note":"","ucode":"EB825CFA70AC1F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":14985,"discussion_content":"è¿˜æœ‰åŒºåˆ«çš„. ç±»é”åœ¨æœ¬åœ°æ–¹æ³•åŒºåŸŸå¤´å¤´ä½ç½®. å¯¹è±¡å®ä¾‹é”çš„å †ä¸­å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568793117,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72870,"user_name":"æ³¢æ³¢","can_delete":false,"product_type":"c1","uid":1155827,"ip_address":"","ucode":"4344D9F4486D42","user_header":"https://static001.geekbang.org/account/avatar/00/11/a2/f3/aa504fa6.jpg","comment_is_top":false,"comment_ctime":1551748974,"is_pvip":false,"replies":[{"id":"26482","content":"æˆ‘è¿˜æ˜¯è§‰å¾—å†…å­˜æ¨¡å‹è®²çš„æœ€å¥½;)ï¼Œä»¥åçš„ä¸œè¥¿éƒ½å¾ˆç®€å•äº†","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551794331,"ip_address":"","comment_id":72870,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10141683566","product_id":100023901,"comment_content":"è¿™ä¸€èŠ‚é”è®²çš„æœ‰æ–°æ„ï¼Œå¾ˆå°‘æœ‰ä¹¦ç±ç‰¹åœ°è®²é”å’Œé”å®šèµ„æºçš„å…³ç³»ï¼Œèµä¸€ä¸ª","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441801,"discussion_content":"æˆ‘è¿˜æ˜¯è§‰å¾—å†…å­˜æ¨¡å‹è®²çš„æœ€å¥½;)ï¼Œä»¥åçš„ä¸œè¥¿éƒ½å¾ˆç®€å•äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551794331,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72848,"user_name":"å°é»„","can_delete":false,"product_type":"c1","uid":1049839,"ip_address":"","ucode":"519BF8191D3A6B","user_header":"https://static001.geekbang.org/account/avatar/00/10/04/ef/fea0fdbd.jpg","comment_is_top":false,"comment_ctime":1551747479,"is_pvip":false,"replies":[{"id":"26458","content":"ğŸ‘<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551788251,"ip_address":"","comment_id":72848,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10141682071","product_id":100023901,"comment_content":"æ˜æ˜¾getOne å’Œ addOne æ¯æ¬¡åŠ é”åœ¨ä¸åŒèµ„æºä¸Šï¼Œå¹¶æ²¡æœ‰å½¢æˆäº’æ–¥","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441784,"discussion_content":"ğŸ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551788251,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143881,"user_name":"é»‘è‰²æ¯›è¡£","can_delete":false,"product_type":"c1","uid":1135912,"ip_address":"","ucode":"FF7E235F91BA5C","user_header":"https://static001.geekbang.org/account/avatar/00/11/55/28/31b0cf2f.jpg","comment_is_top":false,"comment_ctime":1571802745,"is_pvip":false,"replies":[{"id":"55683","content":"åªæ˜¯ä¸å…è®¸ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è¿›å…¥ä¸´ç•ŒåŒºï¼Œæ²¡æœ‰å…¶ä»–çº¦æŸ","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1571925830,"ip_address":"","comment_id":143881,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5866770041","product_id":100023901,"comment_content":"â€å½“ä¿®é¥°éé™æ€æ–¹æ³•çš„æ—¶å€™ï¼Œé”å®šçš„æ˜¯å½“å‰å®ä¾‹å¯¹è±¡ thisâ€œ<br>class X {<br>   public long var = 1;<br><br>  &#47;&#47; ä¿®é¥°éé™æ€æ–¹æ³•<br>  synchronized void foo() {<br>    &#47;&#47; ä¸´ç•ŒåŒº<br>  }<br>}<br>è¿™ç§æ–¹å¼ï¼Œå¦‚æœè¯´é”å®šçš„æ˜¯å½“å‰å¯¹è±¡çš„è¯ï¼Œé‚£æ˜¯ä¸æ˜¯ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨ foo æ–¹æ³•ï¼Œç„¶åæŒæœ‰é”ã€‚<br><br>é‚£å¦ä¸€çº¿ç¨‹æ˜¯ä¸æ˜¯ä¸å¯ä»¥è®¿é—® var è¿™ä¸ª public å˜é‡äº†ï¼Ÿå› ä¸ºé”å®šäº† X æ•´ä¸ªå¯¹è±¡ï¼Ÿ<br><br>","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471738,"discussion_content":"åªæ˜¯ä¸å…è®¸ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è¿›å…¥ä¸´ç•ŒåŒºï¼Œæ²¡æœ‰å…¶ä»–çº¦æŸ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571925830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2330905,"avatar":"https://static001.geekbang.org/account/avatar/00/23/91/19/6a3e7efc.jpg","nickname":"ç¨‹åºå‘˜9527","note":"","ucode":"1A1609F6BEAD84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378968,"discussion_content":"åªä¼šé”ä¸´ç•Œèµ„æºï¼Œéä¸´ç•Œèµ„æºä¸åŠ é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623568363,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1135912,"avatar":"https://static001.geekbang.org/account/avatar/00/11/55/28/31b0cf2f.jpg","nickname":"é»‘è‰²æ¯›è¡£","note":"","ucode":"FF7E235F91BA5C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":40472,"discussion_content":"æ˜ç™½äº†ï¼Œæˆ‘ä¹‹å‰ç†è§£é”™è¯¯äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572220195,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":137281,"user_name":"å°æ°˜","can_delete":false,"product_type":"c1","uid":1622109,"ip_address":"","ucode":"DA55B9A02D9EE0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erPMtAfnQdpx1yOZQ2ic7icqUs3tvibEjUXQMUXKiaakyuIho6k6vmdl46nrdWjXIjPIRg9Pmco00tR5w/132","comment_is_top":false,"comment_ctime":1569676527,"is_pvip":false,"replies":[{"id":"52755","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1569684507,"ip_address":"","comment_id":137281,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5864643823","product_id":100023901,"comment_content":"è¯¾åæ€è€ƒï¼šä¸æ­£ç¡®ï¼Œä¸¤æŠŠä¸åŒçš„é”ä¿æŠ¤ä¸€ä¸ªèµ„æºä¼šå‡ºç°çº¿ç¨‹aæ‰§è¡ŒaddOneæ–¹æ³•æ‹¿é”laï¼Œçº¿ç¨‹bæ‰§è¡Œgetæ–¹æ³•æ‹¿é”lbï¼Œæ ¹æœ¬æ²¡æœ‰äº’æ–¥ï¼Œæ²¡æœ‰ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ“ä½œã€‚","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469017,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569684507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129391,"user_name":"ly","can_delete":false,"product_type":"c1","uid":1221628,"ip_address":"","ucode":"5E2B85252DABF3","user_header":"https://static001.geekbang.org/account/avatar/00/12/a3/fc/379387a4.jpg","comment_is_top":false,"comment_ctime":1567125121,"is_pvip":false,"replies":[{"id":"48637","content":"èƒ½çœ‹åˆ°","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1567427875,"ip_address":"","comment_id":129391,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5862092417","product_id":100023901,"comment_content":"è€å¸ˆï¼Œå¯¹äºå‰é¢é‚£ä¸ªaddoneæ–¹æ³•åŠ synchronizeï¼Œä½†æ˜¯getä¸åŠ synchronizeçš„ä¾‹å­ï¼Œå› ä¸ºç®¡ç¨‹çš„è§„åˆ™ï¼Œaddoneä¿®æ”¹è¿‡çš„valueåªå¯¹åŠ é”å¯è§ï¼ˆä¹Ÿå°±æ˜¯å¦ä¸€ä¸ªsynchronizeæ–¹æ³•ï¼‰ï¼Œé‚£å¦‚æœæˆ‘å°†valueè®¾ç½®ä¸ºvolatileï¼Œé‚£ä¹ˆè¿™ä¸ªæ²¡æœ‰synchronizeçš„getæ–¹æ³•åº”è¯¥èƒ½çœ‹åˆ°ä¿®æ”¹è¿‡çš„valueå€¼äº†å§ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465436,"discussion_content":"èƒ½çœ‹åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567427875,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126712,"user_name":"ç‹äºŒå®","can_delete":false,"product_type":"c1","uid":1042241,"ip_address":"","ucode":"E147D6E597EF5B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e7/41/2ea1f5dc.jpg","comment_is_top":false,"comment_ctime":1566455913,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5861423209","product_id":100023901,"comment_content":"æ€è€ƒé¢˜ï¼šè‡ªå®¶çš„é”ï¼Œé”ä½äº†åˆ«å®¶çš„è´¢äº§ï¼Œæ‰€ä»¥ä¸èƒ½è§£å†³å¹¶å‘é—®é¢˜ã€‚","like_count":1,"discussions":[{"author":{"id":1004192,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/a0/d308434e.jpg","nickname":"StarKing","note":"","ucode":"EB825CFA70AC1F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":14972,"discussion_content":"ç¾å…¶åçº¦:æ©è€³ç›—é“ƒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568792159,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117037,"user_name":"HUANGKAIHANG","can_delete":false,"product_type":"c1","uid":1430163,"ip_address":"","ucode":"F3871C5142AE52","user_header":"https://static001.geekbang.org/account/avatar/00/15/d2/93/9c58ce42.jpg","comment_is_top":false,"comment_ctime":1563958028,"is_pvip":false,"replies":[{"id":"43337","content":"è¦çœ‹this.getæ˜¯ä¸æ˜¯ä¹Ÿç”¨çš„synchronized","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1564358466,"ip_address":"","comment_id":117037,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5858925324","product_id":100023901,"comment_content":"è€å¸ˆè¯·é—®ï¼Œç»™éé™æ€æ–¹æ³•addOneç”¨synchronizedä¿®é¥°åï¼Œå¯¹åº”çš„é”æ˜¯thisè¿™æŠŠé”ï¼Œé‚£ä¹ˆå½“ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒaddOneæ–¹æ³•æ—¶ï¼Œå®ƒæ˜¯é”ä½äº†æ•´ä¸ªthisï¼Œæ˜¯ä¸æ˜¯æ„å‘³ç€å…¶å®ƒçº¿ç¨‹æ— æ³•ç›´æ¥æ‰§è¡Œthis.getæ–¹æ³•ï¼Ÿå› ä¸ºéœ€è¦ç­‰åˆ°æ•´ä¸ªthisè§£é”ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘æ˜¯ä¸æ˜¯å¯ä»¥ç†è§£ä¸ºæ²¡æœ‰çº¿ç¨‹èƒ½å»æ‰§è¡Œgetæ–¹æ³•å–å€¼ï¼Œä¹Ÿå°±ä¿è¯äº†ä¸ä¼šæœ‰å¹¶å‘é—®é¢˜ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459788,"discussion_content":"è¦çœ‹this.getæ˜¯ä¸æ˜¯ä¹Ÿç”¨çš„synchronized","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564358466,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":111385,"user_name":"ä»¥æ¢¦ä¸ºé©¬","can_delete":false,"product_type":"c1","uid":1225455,"ip_address":"","ucode":"9995FC3FD620C6","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/ef/d969bf72.jpg","comment_is_top":false,"comment_ctime":1562549963,"is_pvip":false,"replies":[{"id":"40674","content":"åŸå­æ“ä½œä¸€å®šèƒ½ä¿è¯åŸå­æ€§ï¼ŒåŸå­æ“ä½œè¦åˆ†ä»å“ªä¸ªå±‚é¢çœ‹ï¼Œä»CPUè§’åº¦çœ‹å’Œä»ç¨‹åºè§’åº¦çœ‹æ˜¯ä¸åŒçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1562626366,"ip_address":"","comment_id":111385,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5857517259","product_id":100023901,"comment_content":"è€å¸ˆè¯·é—®ï¼ŒåŸå­æ€§å’ŒåŸå­æ“ä½œæ˜¯ä¸€å›äº‹æƒ…å—ï¼ŸåŠ äº†synchronizeåçº¿ç¨‹å¯¹addOneæ–¹æ³•æ˜¯åŸå­æ“ä½œï¼Œä½†æ˜¯å¦‚æœæ–¹æ³•ä¸­æœ‰éåŸå­æ€§ï¼Ÿæœ‰äº›ç–‘æƒ‘","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457329,"discussion_content":"åŸå­æ“ä½œä¸€å®šèƒ½ä¿è¯åŸå­æ€§ï¼ŒåŸå­æ“ä½œè¦åˆ†ä»å“ªä¸ªå±‚é¢çœ‹ï¼Œä»CPUè§’åº¦çœ‹å’Œä»ç¨‹åºè§’åº¦çœ‹æ˜¯ä¸åŒçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562626366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107310,"user_name":"000","can_delete":false,"product_type":"c1","uid":1052192,"ip_address":"","ucode":"98A810FA164106","user_header":"https://static001.geekbang.org/account/avatar/00/10/0e/20/4a8eb862.jpg","comment_is_top":false,"comment_ctime":1561513591,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5856480887","product_id":100023901,"comment_content":"ä¸èƒ½è§£å†³é—®é¢˜ï¼Œnewæ˜¯åœ¨å †åˆ›å»ºå¯¹è±¡å®ä¾‹ï¼Œä¸¤ä¸ªnewæ˜¯åˆ›å»ºä¸¤ä¸ªç‹¬ç«‹çš„å®ä¾‹ï¼Œä¸¤ä¸ªä¸åŒçš„å†…å­˜å—ï¼Œé”ä¸¤ä¸ªç‹¬ç«‹çš„å†…å­˜å—è¾¾ä¸åˆ°äº’æ–¥çš„æ•ˆæœ","like_count":1},{"had_liked":false,"id":107246,"user_name":"æ¨é¹ç¨‹baci","can_delete":false,"product_type":"c1","uid":1205949,"ip_address":"","ucode":"3D22F6B74340A8","user_header":"https://static001.geekbang.org/account/avatar/00/12/66/bd/bd5d503e.jpg","comment_is_top":false,"comment_ctime":1561508130,"is_pvip":false,"replies":[{"id":"38945","content":"æ˜¯çš„ï¼Œä½†ä¸ä»…ä»…å› ä¸ºå¯è§æ€§","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1561597237,"ip_address":"","comment_id":107246,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5856475426","product_id":100023901,"comment_content":"è€å¸ˆå¥½ï¼Œä½ è¯´é”è‡ªå®¶é—¨ä¿æŠ¤ä»–å®¶èµ„æºçš„æ„æ€æ˜¯ä¸æ˜¯è¯´è¦ä¿æŒé”çš„å¯¹è±¡æ˜¯ä¸€è‡´çš„ï¼Œå¦åˆ™æ— æ³•éµå¾ªhappens-beforeé€‰æ‹©","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455436,"discussion_content":"æ˜¯çš„ï¼Œä½†ä¸ä»…ä»…å› ä¸ºå¯è§æ€§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561597237,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":102497,"user_name":"é©¬å“²å¯Œ","can_delete":false,"product_type":"c1","uid":1107917,"ip_address":"","ucode":"D6BDDFE3CC07ED","user_header":"https://static001.geekbang.org/account/avatar/00/10/e7/cd/08088f14.jpg","comment_is_top":false,"comment_ctime":1560237804,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5855205100","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæ€ä¹ˆåŒºåˆ†æ˜¯åŒä¸€æŠŠé”è¿˜æ˜¯ä¸åŒçš„æ‰€å•Šï¼Ÿ","like_count":1,"discussions":[{"author":{"id":2330905,"avatar":"https://static001.geekbang.org/account/avatar/00/23/91/19/6a3e7efc.jpg","nickname":"ç¨‹åºå‘˜9527","note":"","ucode":"1A1609F6BEAD84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378969,"discussion_content":"ç±»é”å…±äº«ï¼Œå¯¹è±¡é”ç§æœ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623568523,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1577580,"avatar":"https://static001.geekbang.org/account/avatar/00/18/12/6c/61a598e9.jpg","nickname":"è‹æš®æ²‰è§","note":"","ucode":"532B816D4EF47B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":44676,"discussion_content":"æˆ‘è§‰å¾—å¯¹äºé™æ€æ–¹æ³•æ¥è¯´ï¼Œçœ‹æ˜¯ä¸æ˜¯åŒä¸€ä¸ªClassï¼Œéé™æ€æ–¹æ³•æ¥è¯´ï¼Œçœ‹æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼ˆnew å‡ºæ¥çš„åŒä¸€ä¸ªå¯¹è±¡ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572961049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98188,"user_name":"ä»Šå¤œç§‹é£å’Œ","can_delete":false,"product_type":"c1","uid":1434066,"ip_address":"","ucode":"453C8197FFC81D","user_header":"https://static001.geekbang.org/account/avatar/00/15/e1/d2/42ad2c87.jpg","comment_is_top":false,"comment_ctime":1558927518,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5853894814","product_id":100023901,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæ–‡ä¸­è¯´çš„ä¸´ç•ŒåŒºèµ„æºæ–¹æ³•ä¹‹é—´çš„äº’æ–¥ï¼Œæ˜¯ä¸æ˜¯ä¸€ä¸ªçº¿ç¨‹åœ¨è·å¾—é”æ—¶å€™ï¼Œåªèƒ½æ‰§è¡Œå…¶ä¸­ä¸€ä¸ªæ–¹æ³•ï¼Œåªèƒ½åœ¨è¯¥æ–¹æ³•æ‰§è¡Œå®Œæ¯•ï¼Œé‡Šæ”¾é”ï¼Œå¦ä¸€ä¸ªæ–¹æ³•å†æ¬¡ç«äº‰è·å–é”æ‰§è¡Œæ–¹æ³•ï¼Œè¦æ˜¯å¦ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œè¿˜æ˜¯ä¹‹å‰çš„çº¿ç¨‹ï¼Œåº”è¯¥æ˜¯é”çš„å¯é‡å…¥ï¼Œé”çš„é‡Šæ”¾æ˜¯å˜é‡å€¼å‡ä¸º0é‡Šæ”¾ï¼Ÿ","like_count":1},{"had_liked":false,"id":98050,"user_name":"L.","can_delete":false,"product_type":"c1","uid":1181647,"ip_address":"","ucode":"46A2F679C094E8","user_header":"https://static001.geekbang.org/account/avatar/00/12/07/cf/b0d6fe74.jpg","comment_is_top":false,"comment_ctime":1558883508,"is_pvip":false,"replies":[{"id":"35084","content":"ä½ è¯´çš„å¯¹ï¼Œä¸åŒå¯¹è±¡çš„æ–¹æ³•å¯ä»¥å¹¶è¡Œ","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1558918444,"ip_address":"","comment_id":98050,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5853850804","product_id":100023901,"comment_content":"è€å¸ˆ æ‚¨å¥½ æœ‰ä¸ªé—®é¢˜å¾ˆå›°æƒ‘ ï¼š<br>æ‚¨åœ¨æœ¬æ–‡ä¸­è¯´åˆ°addOne() æ–¹æ³•ï¼Œè¢« synchronized ä¿®é¥°åï¼Œæ— è®ºæ˜¯å•æ ¸ CPU è¿˜æ˜¯å¤šæ ¸ CPUï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿæ‰§è¡Œ addOne() æ–¹æ³•ã€‚<br>å¯æ˜¯synchronizedä¿®é¥°éé™æ€æ–¹æ³•æ—¶ï¼Œæ˜¯å¯¹å½“å‰thiså¯¹è±¡åŠ é”ã€‚ä½†æ˜¯åœ¨å¤šæ ¸CPUå¤šçº¿ç¨‹ä¸‹ï¼Œåº”è¯¥æ˜¯ä¸åŒçš„å®ä¾‹å¯¹è±¡å•Šï¼Œä¸ºä»€ä¹ˆè¿˜åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰èƒ½æ‰§è¡ŒaddOne()æ–¹æ³•å‘¢ï¼Ÿå¸Œæœ›èƒ½å¾—åˆ°è€å¸ˆçš„è§£ç­”ã€‚éå¸¸æ„Ÿè°¢ã€‚","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451535,"discussion_content":"ä½ è¯´çš„å¯¹ï¼Œä¸åŒå¯¹è±¡çš„æ–¹æ³•å¯ä»¥å¹¶è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558918444,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2330905,"avatar":"https://static001.geekbang.org/account/avatar/00/23/91/19/6a3e7efc.jpg","nickname":"ç¨‹åºå‘˜9527","note":"","ucode":"1A1609F6BEAD84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378970,"discussion_content":"å¤šä¸ªå®ä¾‹è°ƒç”¨åŒä¸€ä¸ªæ–¹æ³•ï¼Œæ²¡æœ‰å½±å“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623568594,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":87405,"user_name":"xuery","can_delete":false,"product_type":"c1","uid":1027584,"ip_address":"","ucode":"F461B61BE06131","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ae/00/025f37e7.jpg","comment_is_top":false,"comment_ctime":1555585541,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5850552837","product_id":100023901,"comment_content":"è¿™ä¸€èŠ‚å…¶å®å°±æ˜¯hbçš„è§„åˆ™4ï¼Œé€šè¿‡è¿™ä¹ˆä¸€è®²è§£ï¼Œç†è§£çš„æ›´æ·±åˆ»äº†","like_count":1},{"had_liked":false,"id":82224,"user_name":"Vincent","can_delete":false,"product_type":"c1","uid":1135159,"ip_address":"","ucode":"CD8B84A57A6A0C","user_header":"https://static001.geekbang.org/account/avatar/00/11/52/37/13b4c8aa.jpg","comment_is_top":false,"comment_ctime":1554166206,"is_pvip":false,"replies":[{"id":"29860","content":"å¯ä»¥<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554217381,"ip_address":"","comment_id":82224,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5849133502","product_id":100023901,"comment_content":"get()æ–¹æ³•ä¸ºäº†å¯è§æ€§æœ‰å¿…è¦ç»™ä»–åŠ ä¸€æŠŠé”ï¼Ÿç”¨volatileå…³é”®å­—ä¿®é¥°å˜é‡ä¹Ÿå¯ä»¥å•Š","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445515,"discussion_content":"å¯ä»¥\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554217381,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":81673,"user_name":"Mr.Panda","can_delete":false,"product_type":"c1","uid":1238864,"ip_address":"","ucode":"655A3013B5E849","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/50/d476ed6c.jpg","comment_is_top":false,"comment_ctime":1554002717,"is_pvip":false,"replies":[{"id":"29621","content":"1. äº’æ–¥é”åï¼Œä¾ç„¶ä¸èƒ½é˜»æ­¢CPUè¿›è¡Œçº¿ç¨‹<br>2. åŸå­æ€§æœ‰å¾ˆå¤šå±‚é¢çš„ç†è§£ï¼ŒæŒ‡ä»¤å±‚é¢æœ‰ï¼Œé«˜çº§è¯­è¨€å±‚é¢æœ‰ï¼Œæ•°æ®åº“å±‚é¢è¿˜æœ‰ã€‚åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­èƒ½é¢†ä¼šåˆ°å°±å¯ä»¥ï¼Œæ¦‚å¿µæ˜¯ä¸ºäº†è§£å†³é—®é¢˜çš„ï¼Œæ‰€ä»¥ä¹Ÿè¦çœ‹åœºæ™¯ã€‚æ›´å“²å­¦çš„è¯´æ³•ï¼Œä¸‹ä¸€ç« ä¼šä»‹ç»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554030621,"ip_address":"","comment_id":81673,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5848970013","product_id":100023901,"comment_content":"è€å¸ˆå¥½ï¼Œå¯¹è¿™ä¸ªæ¦‚å¿µæœ‰ç‚¹ç–‘æƒ‘ï¼Œè¯·æŒ‡å¯¼ã€‚<br>æ¦‚å¿µï¼šâ€œä¸€ä¸ªæˆ–è€…å¤šä¸ªæ“ä½œåœ¨ CPU æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ä¸è¢«ä¸­æ–­çš„ç‰¹æ€§ï¼Œç§°ä¸ºåŸå­æ€§â€<br>ç–‘æƒ‘ï¼š<br>1.äº’æ–¥é”åï¼Œä¸´ç•ŒåŒºçš„ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸æ˜¯ä¾ç„¶ä¼šå‘ç”Ÿcpuä¸­æ–­å¯¼è‡´çº¿ç¨‹åˆ‡æ¢å—ï¼Ÿ<br>2.ä¸ªäººç†è§£ï¼ŒåŸå­æ€§åº”è¯¥æ˜¯ä¿è¯ç›¸å…³ä»£ç çš„æ‰§è¡Œè€…ç”±åŸæ¥å¯ä»¥å¤šä¸ªçº¿ç¨‹æ‰§è¡Œæ”¹ä¸ºåªèƒ½ç”±ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä¸”æ‰§è¡Œå®Œï¼Œå…¶ä»–çº¿ç¨‹æ‰æœ‰æœºä¼šå»æ‰§è¡Œã€‚","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445293,"discussion_content":"1. äº’æ–¥é”åï¼Œä¾ç„¶ä¸èƒ½é˜»æ­¢CPUè¿›è¡Œçº¿ç¨‹\n2. åŸå­æ€§æœ‰å¾ˆå¤šå±‚é¢çš„ç†è§£ï¼ŒæŒ‡ä»¤å±‚é¢æœ‰ï¼Œé«˜çº§è¯­è¨€å±‚é¢æœ‰ï¼Œæ•°æ®åº“å±‚é¢è¿˜æœ‰ã€‚åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­èƒ½é¢†ä¼šåˆ°å°±å¯ä»¥ï¼Œæ¦‚å¿µæ˜¯ä¸ºäº†è§£å†³é—®é¢˜çš„ï¼Œæ‰€ä»¥ä¹Ÿè¦çœ‹åœºæ™¯ã€‚æ›´å“²å­¦çš„è¯´æ³•ï¼Œä¸‹ä¸€ç« ä¼šä»‹ç»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554030621,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76480,"user_name":"PKæ™‚é ­é«®ä¸äº‚","can_delete":false,"product_type":"c1","uid":1207867,"ip_address":"","ucode":"08AAAC8F4DE71D","user_header":"https://static001.geekbang.org/account/avatar/00/12/6e/3b/88f14e2a.jpg","comment_is_top":false,"comment_ctime":1552617061,"is_pvip":false,"replies":[{"id":"27878","content":"æ²¡åŒºåˆ«<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552621843,"ip_address":"","comment_id":76480,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847584357","product_id":100023901,"comment_content":"1. synchronized method(){....}<br>2. method(){<br>     synchronized(this){....}<br>  }<br>ç‹è€å¸ˆ, æ²¡æƒ³æ˜ç™½, è¿™ä¸¤ä¸ªæœ‰ä»€ä¹ˆåŒºåˆ«å‘€ï¼Ÿé€šå¸¸åˆ«äººéƒ½æ˜¯è¯´ç²’åº¦ä¸ä¸€æ ·, å¯çœ‹äº†è¿™ç¯‡å, ç¬¬1ä¸ªæ‰€ä¿æŠ¤çš„èµ„æºæ˜¯this å®ä¾‹, ä½†2ä¸­ä¹Ÿæ˜¯ä¿æŠ¤ this å®ä¾‹å‘€ï¼Œè¯·æ±‚è§£ã€‚ã€‚ã€‚è°¢è°¢","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443322,"discussion_content":"æ²¡åŒºåˆ«\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552621843,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75858,"user_name":"åˆ«çš±çœ‰","can_delete":false,"product_type":"c1","uid":1177354,"ip_address":"","ucode":"D24F65EFF65586","user_header":"https://static001.geekbang.org/account/avatar/00/11/f7/0a/067537fc.jpg","comment_is_top":false,"comment_ctime":1552482712,"is_pvip":false,"replies":[{"id":"27664","content":"sleepä¸¤ç§’ï¼Œç›¸å½“äºcpuä¼‘æ¯äº†åä¸‡å…«åƒå¹´ã€‚æˆ‘çŒœæµ‹cpuçš„ç¼“å­˜ä¸ä¼šå­˜è¿™ä¹ˆä¹…å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552487215,"ip_address":"","comment_id":75858,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847450008","product_id":100023901,"comment_content":"è€å¸ˆ è¿˜æœ‰ä¸ªé—®é¢˜ å“ˆå“ˆ<br><br>------------------------------------------------------<br>class A{<br>\t&#47;*volatile*&#47; boolean running = true;<br>\tpublic synchronized void m() {<br>\t\tSystem.out.println(&quot;m start&quot;);<br>\t\twhile(running) {<br>\t\t\t&#47;&#47;ä¸ºä»€ä¹ˆæ¯æ¬¡sleepçš„æ—¶å€™runningä¸ç”¨   volatileå…³é”®å­—æ—¶è¢«ä¿®æ”¹æ—¶å…¶å®ƒçº¿ç¨‹å°±å¯ä»¥çœ‹è§<br><br>\t\t\ttry {<br>\t\t\t\tThread.sleep(1000);<br>\t\t\t} catch (InterruptedException e) {<br>\t\t\t\te.printStackTrace();<br>\t\t\t}<br>\t\t}\t<br>\t\tSystem.out.println(&quot;m end&quot;);<br>\t}<br>}<br><br><br>public class Test12 {<br><br>\tpublic static void main(String[] args) {<br>\t\tA a = new A();<br>\t\t<br>   &#47;&#47;Açº¿ç¨‹<br>\t\tnew Thread(()-&gt;a.m()).start();<br>\t\t<br>\t\ttry {<br>\t\t\tThread.sleep(2000);<br>\t\t} catch (InterruptedException e) {<br>\t\t\te.printStackTrace();<br>\t\t}<br>\t\ta.running = false;<br>\t}<br>}<br>------------------------------------------------------<br>è¿™é‡Œçš„runningæ²¡æœ‰ç”¨volatileä¿®é¥°<br>åœ¨çº¿ç¨‹Aè°ƒç”¨mæ–¹æ³•æ—¶ åœ¨whileå¾ªç¯å†…æ¯æ¬¡éƒ½sleepä¸¤ç§’ <br>ä¸»çº¿ç¨‹sleepä¸€ç§’åä¿®æ”¹runningä¸ºfalse<br>çº¿ç¨‹Aå¯¹è¿™æ¬¡ä¿®æ”¹ä¸ºå¯è§<br><br>å½“æŠŠwhileå¾ªç¯çš„sleepå»æ‰æ—¶<br>çº¿ç¨‹Aå¯¹è¿™æ¬¡ä¿®æ”¹ä¸å¯è§<br><br>è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿsleepæ—¶é—´åˆ°ä¼šè®©å½“å‰çº¿ç¨‹é‡æ–°åˆ°å†…å­˜å–å€¼ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443060,"discussion_content":"sleepä¸¤ç§’ï¼Œç›¸å½“äºcpuä¼‘æ¯äº†åä¸‡å…«åƒå¹´ã€‚æˆ‘çŒœæµ‹cpuçš„ç¼“å­˜ä¸ä¼šå­˜è¿™ä¹ˆä¹…å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552487215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74185,"user_name":"QQæ€ª","can_delete":false,"product_type":"c1","uid":1211223,"ip_address":"","ucode":"1A39B8433D9208","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","comment_is_top":false,"comment_ctime":1552137485,"is_pvip":false,"replies":[{"id":"27135","content":"é™¤äº†å†…å­˜æ¨¡å‹å¤–ï¼Œå…¶ä»–çš„éƒ½ç®€å•æ˜“æ‡‚ã€‚æ‰€ä»¥å†…å­˜æ¨¡å‹ä¸€å®šè¦æ”¾å‰é¢è®²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552143107,"ip_address":"","comment_id":74185,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847104781","product_id":100023901,"comment_content":"æ¯æ¬¡newéƒ½æ˜¯ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä¸æ˜¯åŒä¸€æŠŠé”ï¼è¿™èŠ‚è¯¾ç®€å•æ˜“æ‡‚ï¼Œå“ˆ","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442488,"discussion_content":"é™¤äº†å†…å­˜æ¨¡å‹å¤–ï¼Œå…¶ä»–çš„éƒ½ç®€å•æ˜“æ‡‚ã€‚æ‰€ä»¥å†…å­˜æ¨¡å‹ä¸€å®šè¦æ”¾å‰é¢è®²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552143107,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74078,"user_name":"Joanfen","can_delete":false,"product_type":"c1","uid":1004260,"ip_address":"","ucode":"4CF1B92337B625","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/e4/50600574.jpg","comment_is_top":false,"comment_ctime":1552099612,"is_pvip":false,"replies":[{"id":"27087","content":"è¿™ä¹ˆæ™¦æ¶©çš„ä¸œè¥¿å¤§å®¶éƒ½è€ç€æ€§å­çœ‹å®Œäº†ï¼Œå¾ˆä¸å®¹æ˜“ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552111328,"ip_address":"","comment_id":74078,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847066908","product_id":100023901,"comment_content":"è€å¸ˆå¥½å¯çˆ±å•Šï¼Œè®¤çœŸå›å¤å¤§å®¶çš„ç•™è¨€ï¼Œä¸åå¤¸å¥–ğŸ‘åœ¨è¯„è®ºåŒºä¹Ÿå­¦åˆ°å¾ˆå¤šï¼Œè·Ÿå¤§ç¥ä»¬å­¦ä¹ ","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442428,"discussion_content":"è¿™ä¹ˆæ™¦æ¶©çš„ä¸œè¥¿å¤§å®¶éƒ½è€ç€æ€§å­çœ‹å®Œäº†ï¼Œå¾ˆä¸å®¹æ˜“ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552111328,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73769,"user_name":"Hour","can_delete":false,"product_type":"c1","uid":1448748,"ip_address":"","ucode":"AA1045ACABC0BB","user_header":"https://static001.geekbang.org/account/avatar/00/16/1b/2c/6b3c0911.jpg","comment_is_top":false,"comment_ctime":1551974475,"is_pvip":false,"replies":[{"id":"26958","content":"å…¶å®éƒ½æ˜¯å¯¹å¯¹è±¡åŠ é”ï¼Œåªæ˜¯é™æ€æ–¹æ³•è¦ç”¨é™æ€å¯¹è±¡ã€‚è¯­æ³•ä¸Šç”¨ç±»åŠ é”åªæ˜¯ä½¿ç”¨ç®€å•è€Œå·²","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552019145,"ip_address":"","comment_id":73769,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5846941771","product_id":100023901,"comment_content":"æ–‡æœ«çš„caseæ˜¯å­˜åœ¨å¹¶å‘é—®é¢˜çš„ï¼Œè¯„è®ºåŒºé‡Œå›å¤çš„å¾ˆç»†äº†ï¼Œå°±ä¸å†èµ˜è¿°ã€‚<br><br>ä¸è¿‡æˆ‘æœ‰ä¸ªç–‘é—®ï¼Œæœ›è€å¸ˆèƒ½æŒ‡å¯¼ä¸‹:<br><br>syncå¯ä»¥å¯¹&quot;å˜é‡&quot;åŠ é”ï¼Œä¹Ÿå¯ä»¥å¯¹&quot;å¯¹è±¡&quot;åŠ é”ï¼Œè¿˜å¯ä»¥å¯¹&quot;ç±»&quot;åŠ é”ï¼Œä½†ä¸€ç›´æ²¡ç†è§£å¯¹&quot;ç±»&quot;åŠ é”çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Œå‡¡æ˜¯å¯ä»¥ç”¨&quot;ç±»&quot;åŠ é”çš„åœ°æ–¹ï¼Œéƒ½å¯ä»¥ç”¨&quot;å˜é‡é”&quot;ã€&quot;å¯¹è±¡é”&quot;æ›¿æ¢ï¼Œ&quot;å¯¹è±¡é”&quot;åœ¨å¯¹è±¡ç»´åº¦åŠ é”ï¼Œè€Œ&quot;å˜é‡é”&quot;æ˜¯åœ¨æ›´ç»†ç²’åº¦åŠ é”ï¼Œä½†&quot;ç±»é”&quot;å´ä¸æ˜¯åœ¨æ›´å¤§ç»´åº¦åŠ é”ï¼Œé‚£&quot;ç±»é”&quot;çš„æ„ä¹‰åœ¨å“ªé‡Œï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442269,"discussion_content":"å…¶å®éƒ½æ˜¯å¯¹å¯¹è±¡åŠ é”ï¼Œåªæ˜¯é™æ€æ–¹æ³•è¦ç”¨é™æ€å¯¹è±¡ã€‚è¯­æ³•ä¸Šç”¨ç±»åŠ é”åªæ˜¯ä½¿ç”¨ç®€å•è€Œå·²","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552019145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73377,"user_name":"é›¶","can_delete":false,"product_type":"c1","uid":1047949,"ip_address":"","ucode":"4FDC3FF9576032","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fd/8d/f66a0206.jpg","comment_is_top":false,"comment_ctime":1551873334,"is_pvip":false,"replies":[{"id":"26713","content":"åšæŒå°±æœ‰æ”¶è´§<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551880952,"ip_address":"","comment_id":73377,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5846840630","product_id":100023901,"comment_content":"æ‰“å¡ç¬¬ä¸€å¤©ï¼Œä»¥å‰ç³»ç»Ÿå­¦ä¹ äº†ä¸€æ¬¡ï¼Œæ²¡æœ‰å¾ˆå¥½çš„å®æˆ˜ï¼Œå¾ˆå¿«å°±å¿˜äº†ï¼Œå¸Œæœ›è¿™æ¬¡é‡æ–°å­¦ä¹ å¹¶åº”ç”¨äºå®é™…çš„é¡¹ç›®ã€‚","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442051,"discussion_content":"åšæŒå°±æœ‰æ”¶è´§\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551880952,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73169,"user_name":"æ¸”å¤«","can_delete":false,"product_type":"c1","uid":1019289,"ip_address":"","ucode":"6BF08FD8923E45","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/99/f886543d.jpg","comment_is_top":false,"comment_ctime":1551834962,"is_pvip":false,"replies":[{"id":"26627","content":"happens_beforeè§„åˆ™ä¿è¯çš„ï¼Œè¿™ä¸ªè§„åˆ™æ˜¯jsrè§„èŒƒï¼Œè™šæ‹Ÿæœºå¿…é¡»å®ç°è§„èŒƒ","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551846628,"ip_address":"","comment_id":73169,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5846802258","product_id":100023901,"comment_content":"ä¸ç†è§£çš„æ˜¯ï¼ŒåŠ ğŸ”’å°±èƒ½ä¿è¯è¯»çš„æ—¶å€™ä¼šä»å†…å­˜è¯»ï¼Œè€Œä¸ä»ç¼“å­˜è¯»ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441946,"discussion_content":"happens_beforeè§„åˆ™ä¿è¯çš„ï¼Œè¿™ä¸ªè§„åˆ™æ˜¯jsrè§„èŒƒï¼Œè™šæ‹Ÿæœºå¿…é¡»å®ç°è§„èŒƒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551846628,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73156,"user_name":"ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€","can_delete":false,"product_type":"c1","uid":1441382,"ip_address":"","ucode":"F6119959854C21","user_header":"https://static001.geekbang.org/account/avatar/00/15/fe/66/1b8b8c09.jpg","comment_is_top":false,"comment_ctime":1551832944,"is_pvip":false,"replies":[{"id":"26590","content":"æ­£ç¡®<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551834145,"ip_address":"","comment_id":73156,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5846800240","product_id":100023901,"comment_content":"è¯¾åæ€è€ƒé¢˜ï¼šåŠ é”æ–¹å¼ä¸æ­£ç¡®ã€‚é¦–å…ˆæ˜¯ä¿æŠ¤çš„èµ„æºæ˜¯ä¸å¯¹çš„ï¼Œæ¯æ¬¡éƒ½æ˜¯æ–°å¯¹è±¡ï¼›å…¶æ¬¡ä¸¤ä¸ªsync é”ä½çš„èµ„æºä¹Ÿæ˜¯ä¸åŒçš„ã€‚åŸå­æ€§é—®é¢˜å’Œå¯è§æ€§é—®é¢˜éƒ½æ²¡æœ‰åŠæ³•è§£å†³ã€‚","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441937,"discussion_content":"æ­£ç¡®\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551834145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73090,"user_name":"å‘æ¡æ©™å­ ã€‚","can_delete":false,"product_type":"c1","uid":1259218,"ip_address":"","ucode":"ED076F4534FFED","user_header":"https://static001.geekbang.org/account/avatar/00/13/36/d2/c7357723.jpg","comment_is_top":false,"comment_ctime":1551795340,"is_pvip":false,"replies":[{"id":"26577","content":"å•æ ¸ä¹Ÿä¸èƒ½ä¿è¯åŸå­æ€§<br>å•æ ¸æ²¡æœ‰ç¼“å­˜é—®é¢˜ï¼Œæœ‰åŸå­æ€§é—®é¢˜ã€‚ä¸¤ä¸ªçº¿ç¨‹å¯ä»¥å…ˆåè¯»åˆ°å¯„å­˜å™¨ï¼Œè¿™ä¸ªæ—¶å€™è¿˜æ²¡æœ‰å†™ï¼ŒåŸºäºè¿™ä¸ªåšï¼‹æ³•ï¼Œå°±ä¼šå‡ºç°å‰ä¸€ä¸ªçš„å†™è¢«åä¸€ä¸ªçº¿ç¨‹è¦†ç›–çš„é—®é¢˜<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551830858,"ip_address":"","comment_id":73090,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5846762636","product_id":100023901,"comment_content":"é¦–å…ˆè¯´ç­”æ¡ˆï¼š <br><br>å› ä¸ºè¯¥åŒæ­¥å— é” æ˜¯æ¯æ¬¡newæ–°å¯¹è±¡ ï¼Œæ‰€ä»¥æ¯ä¸ªçº¿ç¨‹éƒ½æ‹¥æœ‰ä¸€ä¸ªé” ï¼Œæ‰€ä»¥ä¸èƒ½è¾¾åˆ°äº’æ–¥ç›®çš„ ã€‚ <br><br>è§£å†³ï¼š <br><br>åœ¨è¯¥ç±»ä¸‹åˆ›å»ºä¸€ä¸ªæˆå‘˜å˜é‡ object ï¼Œ ä½¿ç”¨è¯¥å¯¹è±¡ä½œä¸ºé”å¯è¾¾åˆ°äº’æ–¥æ•ˆæœ<br><br>é—®é¢˜ ï¼š <br><br>è€å¸ˆï¼Œ count++ æ˜¯å› ä¸ºå¤šæ ¸æƒ…å†µä¸‹ ï¼Œæœ‰å¯èƒ½å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å…±äº«èµ„æºå¯¼è‡´åŸå­æ€§é—®é¢˜ ã€‚ <br><br>é‚£ä¹ˆåœ¨å•æ ¸æƒ…å†µä¸‹ ï¼Œ å°±ä¸å­˜åœ¨å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å…±äº«èµ„æº ï¼Œå°±ä¸ä¼šæœ‰åŸå­æ€§é—®é¢˜äº†å‘¢ ã€‚è¿™æ—¶å€™å‘ç”Ÿçº¿ç¨‹åˆ‡æ¢ ï¼Œ æ¯”å¦‚ ä»æ‰§è¡Œæ·»åŠ çº¿ç¨‹ åˆ‡æ¢åˆ° æ‰§è¡Œgetçº¿ç¨‹ ï¼Œåªæ˜¯å­˜åœ¨å¯è§æ€§é—®é¢˜ ï¼Œ è¿™ä¸ªæ—¶å€™ç»™èµ„æºåŠ ä¸Š voltaile å…³é”®å­—æ˜¯ä¸æ˜¯å°±å¯ä»¥è§£å†³å¹¶å‘é—®é¢˜äº† ï¼Ÿ<br><br>è¿™æ˜¯æˆ‘çš„ç†è§£ï¼Œå¸Œæœ›è€å¸ˆè§£ç­” ğŸ˜","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441907,"discussion_content":"å•æ ¸ä¹Ÿä¸èƒ½ä¿è¯åŸå­æ€§\nå•æ ¸æ²¡æœ‰ç¼“å­˜é—®é¢˜ï¼Œæœ‰åŸå­æ€§é—®é¢˜ã€‚ä¸¤ä¸ªçº¿ç¨‹å¯ä»¥å…ˆåè¯»åˆ°å¯„å­˜å™¨ï¼Œè¿™ä¸ªæ—¶å€™è¿˜æ²¡æœ‰å†™ï¼ŒåŸºäºè¿™ä¸ªåšï¼‹æ³•ï¼Œå°±ä¼šå‡ºç°å‰ä¸€ä¸ªçš„å†™è¢«åä¸€ä¸ªçº¿ç¨‹è¦†ç›–çš„é—®é¢˜\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551830858,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72982,"user_name":"ã€Œã€Resolution","can_delete":false,"product_type":"c1","uid":1439997,"ip_address":"","ucode":"662FB75718EA2D","user_header":"https://static001.geekbang.org/account/avatar/00/15/f8/fd/45b31832.jpg","comment_is_top":false,"comment_ctime":1551769732,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5846737028","product_id":100023901,"comment_content":"é”å®šä¸åŒçš„èµ„æºï¼Œ å¯¼è‡´æ— æ³•è§£å†³å¯è§æ€§çš„é—®é¢˜ï¼Œ å¹¶ä¸”æ— æ³•å½¢æˆäº’æ–¥å…³ç³»ï¼Œæ— æ³•ä¿è¯åŸå­æ€§é—®é¢˜","like_count":1},{"had_liked":false,"id":72961,"user_name":"åˆ˜å¿—å…µ","can_delete":false,"product_type":"c1","uid":1441734,"ip_address":"","ucode":"A90C2FA49EDC23","user_header":"https://static001.geekbang.org/account/avatar/00/15/ff/c6/8b5cbe97.jpg","comment_is_top":false,"comment_ctime":1551763301,"is_pvip":false,"replies":[{"id":"26497","content":"ä¸è¡Œï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551795582,"ip_address":"","comment_id":72961,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5846730597","product_id":100023901,"comment_content":"è€å®ï¼Œé™æ€æ–¹æ³•é”ä½çš„å¯¹è±¡æ˜¯é™æ€ç±»å¯¹è±¡ï¼Œé‚£å¦‚æœé™æ€æ–¹æ³•ä¸­æœ‰å¤šä¸ªé™æ€æ–¹æ³•ï¼Œç»™å…¶ä¸­ä¸€ä¸ªåŠ ä¸Šsynchronizeè€Œä¸”è¢«ä¸€ä¸ªçº¿ç¨‹é”ä½çš„è¯ï¼Œæ˜¯ä¸æ˜¯å…¶ä»–çº¿ç¨‹æ‰§è¡Œå…¶ä»–æ–¹æ³•ä¹Ÿä¸è¡Œ","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441849,"discussion_content":"ä¸è¡Œï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551795582,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2330905,"avatar":"https://static001.geekbang.org/account/avatar/00/23/91/19/6a3e7efc.jpg","nickname":"ç¨‹åºå‘˜9527","note":"","ucode":"1A1609F6BEAD84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378977,"discussion_content":"ç›¸å½“äºé”ç²—åŒ–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623571511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72906,"user_name":"Smile","can_delete":false,"product_type":"c1","uid":1125189,"ip_address":"","ucode":"0617032294DC43","user_header":"https://static001.geekbang.org/account/avatar/00/11/2b/45/e8f64725.jpg","comment_is_top":false,"comment_ctime":1551753265,"is_pvip":false,"replies":[{"id":"26486","content":"åˆ†æçš„å¾ˆåˆ°ä½äº†ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551794637,"ip_address":"","comment_id":72906,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5846720561","product_id":100023901,"comment_content":"äº’æ–¥æ€§å…³æ³¨ä¸¤ä¸ªç‚¹ï¼š<br>  1. é”æ˜¯ä»€ä¹ˆå¯¹è±¡<br>  2. é”ä½çš„å†…å­˜æ˜¯ä»€ä¹ˆï¼Œä¸´ç•ŒåŒºçš„å†…å®¹<br>åŒä¸€ä¸ªé”åªèƒ½ä¸€ä¸ªçº¿ç¨‹å æœ‰ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹æŠ¢å åˆ°é”æ—¶ï¼Œå…¶ä»–çº¿ç¨‹åªèƒ½ç­‰åˆ°é‡Šæ”¾åæ‰å¯ä»¥æŠ¢åˆ°ã€‚<br>å¯¹äºæ€è€ƒé¢˜ï¼Œç”±äºä¸æ˜¯åŒä¸€ä¸ªé”ï¼Œè€Œä¸”æ˜¯æ¯ä¸ªçº¿ç¨‹åˆ›å»ºä¸€æ¬¡ï¼Œä¸å­˜åœ¨é”çš„ç«äº‰ï¼Œæ‰€ä»¥åŸå­æ€§ä¸èƒ½ä¿è¯ã€‚å…±äº«å˜é‡åœ¨å¤šçº¿ç¨‹å­˜åœ¨å¯è§æ€§é—®é¢˜ï¼Œå¯¹ä¸€ä¸ªé”è§£é” Happens-Before åç»­å¯¹è¿™ä¸ªé”çš„åŠ é”ï¼Œä¸æ˜¯åŒä¸€ä¸ªé”ï¼Œæ— æ³•è§£å†³å…±äº«å˜é‡valueçš„å¯è§æ€§é—®é¢˜ï¼Œè¯·è€å¸ˆï¼Œè¯„åˆ¤æŒ‡æ­£â˜º","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441819,"discussion_content":"åˆ†æçš„å¾ˆåˆ°ä½äº†ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551794637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72880,"user_name":"ç‹å¤§ç‹","can_delete":false,"product_type":"c1","uid":1442110,"ip_address":"","ucode":"BA520B50E97D34","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqjceGMS81zZibA9LECsgAUU1aHPKhfM4WyNgqPtmnxvtzhC3a44ows3g7FuD7ibESAAY0UWsicW0EjA/132","comment_is_top":false,"comment_ctime":1551749947,"is_pvip":false,"replies":[{"id":"26485","content":"æ‰€ä»¥åæ¥c#,c++éƒ½å¼€å§‹æå†…å­˜æ¨¡å‹äº†","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551794572,"ip_address":"","comment_id":72880,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5846717243","product_id":100023901,"comment_content":"ç®¡ç¨‹é”è§„åˆ™å’Œè¿ç»­æ€§è§„åˆ™ä¸€ç»“åˆï¼Œå¯ä»¥å®ç°å¯¹åŒä¸€ä¸ªé”ä¿æŠ¤çš„èµ„æºé—´å®ç°å¯è§æ€§ï¼ŒçœŸæ˜¯å¤ªå¥¥å¦™äº†","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441806,"discussion_content":"æ‰€ä»¥åæ¥c#,c++éƒ½å¼€å§‹æå†…å­˜æ¨¡å‹äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551794572,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72846,"user_name":"é»„æœ‹é£","can_delete":false,"product_type":"c1","uid":1107062,"ip_address":"","ucode":"A1E7E0460A1BCC","user_header":"https://static001.geekbang.org/account/avatar/00/10/e4/76/a97242c0.jpg","comment_is_top":false,"comment_ctime":1551747332,"is_pvip":false,"replies":[{"id":"26459","content":"ä½ å¯ä»¥æƒ³è±¡æˆæ˜¯ç¼“å­˜çš„åŸå› <br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551788355,"ip_address":"","comment_id":72846,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5846714628","product_id":100023901,"comment_content":"è€å¸ˆä½ å¥½ï¼Œèƒ½è§£é‡Šä¸‹getæ–¹æ³•ä¸åŠ é”ä¸ºä»€ä¹ˆå¯è§æ€§æ²¡æ³•ä¿è¯å—ï¼Ÿæ²¡çœ‹æ‡‚","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441782,"discussion_content":"ä½ å¯ä»¥æƒ³è±¡æˆæ˜¯ç¼“å­˜çš„åŸå› \n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551788355,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72842,"user_name":"DebugDog","can_delete":false,"product_type":"c1","uid":1027798,"ip_address":"","ucode":"1664D37CE03B9D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ae/d6/fbb8236d.jpg","comment_is_top":false,"comment_ctime":1551747038,"is_pvip":true,"replies":[{"id":"26477","content":"ä¸ä»…ä»…è¿™æ ·ï¼Œä½ ä¹Ÿå†æƒ³æƒ³","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551793663,"ip_address":"","comment_id":72842,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5846714334","product_id":100023901,"comment_content":"é”å®šçš„ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441781,"discussion_content":"ä¸ä»…ä»…è¿™æ ·ï¼Œä½ ä¹Ÿå†æƒ³æƒ³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551793663,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72840,"user_name":"å¾€äº‹éšé£ï¼Œé¡ºå…¶è‡ªç„¶","can_delete":false,"product_type":"c1","uid":1235692,"ip_address":"","ucode":"F266EC6B143E38","user_header":"https://static001.geekbang.org/account/avatar/00/12/da/ec/779c1a78.jpg","comment_is_top":false,"comment_ctime":1551746961,"is_pvip":false,"replies":[{"id":"26475","content":"ä¸ä»…ä»…æ˜¯è¿™æ ·ã€‚ä½ ä¹Ÿå†æƒ³æƒ³","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551793606,"ip_address":"","comment_id":72840,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5846714257","product_id":100023901,"comment_content":"ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯new å‡ºæ¥çš„ï¼Œæ˜¯ä¸åŒå¯¹è±¡ï¼Œè¯»å†™ä¸åœ¨åŒä¸€æŠŠé”å½“ä¸­ï¼Œå¹¶ä¸èƒ½ä¿è¯æ»¡è¶³happen-before åŸåˆ™ï¼Œå†™å‘ç”Ÿåœ¨è¯»æ“ä½œä¹‹å‰ï¼Œå¯ä»¥æ”¹ä¸ºåŒä¸€ä¸ªå¯¹åƒçš„é”æˆ–è€…æ˜¯åŒä¸€ä¸ªç±»é”","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441779,"discussion_content":"ä¸ä»…ä»…æ˜¯è¿™æ ·ã€‚ä½ ä¹Ÿå†æƒ³æƒ³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551793606,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72802,"user_name":"å³°","can_delete":false,"product_type":"c1","uid":1056019,"ip_address":"","ucode":"C53CB64E8E7D19","user_header":"https://static001.geekbang.org/account/avatar/00/10/1d/13/31ea1b0b.jpg","comment_is_top":false,"comment_ctime":1551735818,"is_pvip":true,"replies":[{"id":"26452","content":"åº”è¯¥ä¸ä¼šæ…¢ï¼Œç¼–è¯‘å™¨ä¼šä¼˜åŒ–æˆæ— é”ä»£ç ","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551787585,"ip_address":"","comment_id":72802,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5846703114","product_id":100023901,"comment_content":"æ¯æ¬¡è¿›å…¥ä¸´ç•ŒåŒºï¼Œæ‹¿çš„é”éƒ½ä¸ä¸€æ ·ï¼Œè¿™å’Œä¸åŠ é”çš„ä»£ç æ˜¯ä¸€æ ·çš„ï¼Œå°±æ˜¯æ…¢å¥½å¤šğŸ˜„","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441756,"discussion_content":"åº”è¯¥ä¸ä¼šæ…¢ï¼Œç¼–è¯‘å™¨ä¼šä¼˜åŒ–æˆæ— é”ä»£ç ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551787585,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72792,"user_name":"å¤šè¥„ä¸¸","can_delete":false,"product_type":"c1","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1551717484,"is_pvip":false,"replies":[{"id":"26453","content":"å®Œå…¨æ­£ç¡®<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551787835,"ip_address":"","comment_id":72792,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5846684780","product_id":100023901,"comment_content":"â‘  class SafeCalc {<br>  long value = 0L;<br>  long get() {<br>    return value;<br>  }<br>  synchronized void addOne() {<br>    value += 1;<br>  }<br>}<br><br>å¤šçº¿ç¨‹ä¸‹ addOne() åŸå­å¯è§å‡æ²¡é—®é¢˜ <br>å¤šçº¿ç¨‹ä¸‹ get() å¯è§æ€§æœ‰é—®é¢˜ ä¸éµå¾ªhappensâ€“beforeåŸåˆ™<br><br>â‘¡ class SafeCalc {<br>  long value = 0L;<br>  long synchronized get() {<br>    return value;<br>  }<br>  synchronized void addOne() {<br>    value += 1;<br>  }<br>}<br><br>å¤šçº¿ç¨‹ä¸‹ get addOne çš„ åŸå­æ€§ å¯è§æ€§éƒ½æ²¡é—®é¢˜ éµå¾ªhappensâ€“beforeåŸåˆ™<br><br>â‘¢ class SafeCalc {<br>  long value = 0L;<br> synchronized  long get() {<br>    return value;<br>  }<br>  synchronized void static addOne() {<br>    value += 1;<br>  }<br>}<br><br>å¤šçº¿ç¨‹ä¸‹ get addOne éƒ½æœ‰é—®é¢˜ æ‰€å¯¹è±¡ä¸åŒ<br><br><br>â‘£ class SafeCalc {<br>  long value = 0L;<br>  long get() {<br>    synchronized (new Object()) {<br>      return value;<br>    }<br>  }<br>  void addOne() {<br>    synchronized (new Object()) {<br>      value += 1;<br>    }<br>  }<br>}<br><br> è¿™ä¸¤ä¸ª new Object()ï¼Œä¸æ˜¯åŒä¸€ä¸ªé”å¯¹è±¡ï¼Œä¹Ÿå°±ä¸æ»¡è¶³happensâ€“beforeåŸåˆ™å¯¹åŒä¸€é”å¯¹è±¡çš„è¦æ±‚ï¼Œå› æ­¤å¯è§æ€§å’ŒåŸå­æ€§éƒ½ä¸èƒ½ä¿è¯å•¦ï¼<br><br>æ¯æ¬¡é”çš„å¯¹è±¡ä¸ä¸€æ ·ï¼Œä»»æ„ä¸€ä¸ªçº¿ç¨‹éƒ½å¯ä»¥è¿›æ¥ï¼Œéƒ½å¯èƒ½è¯»åˆ°ç›¸åŒçš„å€¼ï¼Œå°±åƒè¯»åˆ°éƒ½æ˜¯0ï¼Œç„¶ååˆåŒæ—¶å†™äº†ä¸¤æ¬¡1ä¸€æ ·ï¼Œæ‰€ä»¥ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„å•¦!<br><br>æœ‰è¯´ä¸å¯¹çš„åœ°æ–¹è€å¸ˆå‘ŠçŸ¥ä¸€ä¸‹å•Šï¼","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441748,"discussion_content":"å®Œå…¨æ­£ç¡®\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551787835,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358901,"user_name":"è‡ªåœ¨é£","can_delete":false,"product_type":"c1","uid":1167825,"ip_address":"åŒ—äº¬","ucode":"A2712148DA06E0","user_header":"https://static001.geekbang.org/account/avatar/00/11/d1/d1/62f74aa7.jpg","comment_is_top":false,"comment_ctime":1664985363,"is_pvip":false,"replies":[{"id":"130862","content":"ä¼šï¼ŒCPUåªè®¤è¯†æœºå™¨ç ï¼Œå‹æ ¹ä¸care javaé‡Œçš„ synchronizedã€‚çº¿ç¨‹Aè™½ç„¶ä¼šè¢«åˆ‡æ¢ï¼ˆè¢«CPUå‰¥å¤ºæ‰§è¡ŒæƒåŠ›ï¼‰ï¼Œä½†æ˜¯ä¸å…è®¸å…¶ä»–çº¿ç¨‹Xè¿›å…¥synchronizedå—ä¸­ï¼Œåªèƒ½ç­‰å¾…çº¿ç¨‹Aåˆ‡æ¢å›æ¥ï¼ˆé‡æ–°è·å¾—CPUæ‰§è¡ŒæƒåŠ›ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1269969","ctime":1665837624,"ip_address":"åŒ—äº¬","comment_id":358901,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1664985363","product_id":100023901,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæƒ³è¯·æ•™ä¸ªé—®é¢˜ï¼š<br><br>å¦‚æœåœ¨ä¸€ä¸ªæ—¶é—´ç‰‡å†…synchronizedå—ä¸­çš„ä»£ç æ²¡æ‰§è¡Œå®Œçš„è¯ï¼ŒCPUæ˜¯å¦ä¼šè¿›è¡Œçº¿ç¨‹åˆ‡æ¢ï¼Ÿå¦‚æœå‘ç”Ÿçº¿ç¨‹åˆ‡æ¢çš„è¯å¯¹å…±äº«èµ„æºè¿›è¡Œçš„ä¿®æ”¹æ“ä½œå¦‚ä½•ä¿è¯å…¶åŸå­æ€§å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590526,"discussion_content":"ä¼šï¼ŒCPUåªè®¤è¯†æœºå™¨ç ï¼Œå‹æ ¹ä¸care javaé‡Œçš„ synchronizedã€‚çº¿ç¨‹Aè™½ç„¶ä¼šè¢«åˆ‡æ¢ï¼ˆè¢«CPUå‰¥å¤ºæ‰§è¡ŒæƒåŠ›ï¼‰ï¼Œä½†æ˜¯ä¸å…è®¸å…¶ä»–çº¿ç¨‹Xè¿›å…¥synchronizedå—ä¸­ï¼Œåªèƒ½ç­‰å¾…çº¿ç¨‹Aåˆ‡æ¢å›æ¥ï¼ˆé‡æ–°è·å¾—CPUæ‰§è¡ŒæƒåŠ›ï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665837624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358900,"user_name":"è‡ªåœ¨é£","can_delete":false,"product_type":"c1","uid":1167825,"ip_address":"åŒ—äº¬","ucode":"A2712148DA06E0","user_header":"https://static001.geekbang.org/account/avatar/00/11/d1/d1/62f74aa7.jpg","comment_is_top":false,"comment_ctime":1664983953,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1664983953","product_id":100023901,"comment_content":"èƒ½è§£å†³å¯¹å…±äº«èµ„æºè¿›è¡Œçš„å¤åˆæ“ä½œçš„åŸå­æ€§ã€‚<br>ä½†æ˜¯ä¸èƒ½è§£å†³addOneå†™æ“ä½œå¯¹å…±äº«å˜é‡çš„ä¿®æ”¹å¯¹getè¯»æ“ä½œçš„å¯è§æ€§ï¼Œè¿™æ˜¯ç”±äºã€ä½¿ç”¨ä¸åŒé”æ¥è®¿é—®åŒä¸€ä¸ªå…±äº«å˜é‡ï¼Œæ²¡æœ‰è¾¾åˆ°å¤šçº¿ç¨‹ä¹‹é—´äº’æ–¥è®¿é—®å…±äº«å˜é‡çš„ç›®çš„ã€‘","like_count":0},{"had_liked":false,"id":356792,"user_name":"åœ¨è·¯ä¸Š","can_delete":false,"product_type":"c1","uid":1476245,"ip_address":"æ—¥æœ¬","ucode":"2668A965FA79F2","user_header":"https://static001.geekbang.org/account/avatar/00/16/86/95/b9d960d9.jpg","comment_is_top":false,"comment_ctime":1662599188,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1662599188","product_id":100023901,"comment_content":"ç›¸åº”çš„getå’Œseté‡Œé¢çš„èµ„æºä½äºä¸¤ä¸ªä¸åŒçš„æˆ¿é—´ï¼Œä¸€ä¸ªäººå¼€é—¨åŠ é”åˆ°setæˆ¿é—´é‡Œé¢åšçš„æ“ä½œå¯¹äºå¦ä¸€ä¸ªæˆ¿é—´çš„getæ“ä½œè€Œè¨€æ˜¯ä¸å¯è§çš„ï¼Œä¸¤ä¸ªæˆ¿é—´çš„æ“ä½œæ˜¯ç‹¬ç«‹çš„ã€‚åŸå­æ€§å’Œå¯è§æ€§éƒ½å¾—ä¸åˆ°ä¿éšœ","like_count":0},{"had_liked":false,"id":350613,"user_name":"Geek_d78c9f","can_delete":false,"product_type":"c1","uid":3044700,"ip_address":"","ucode":"50925C4A35DE2C","user_header":"","comment_is_top":false,"comment_ctime":1657038665,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1657038665","product_id":100023901,"comment_content":"ä½ å¥½ï¼Œæˆ‘æƒ³é—®cpuçš„ä¸‰çº§ç¼“å­˜ä»€ä¹ˆæ—¶å€™åŒæ­¥åˆ°å†…å­˜ï¼Ÿæ¯”å¦‚æˆ‘ä¸¤ä¸ªçº¿ç¨‹åˆ†åˆ«å¯¹countåš+1ï¼Œä»–ä»¬åˆ†åˆ«å°±æ˜¯ä»å†…å­˜ä¸­è¯»å–count=0ï¼Œåˆ°cpuç¼“å­˜ï¼Œç„¶å+1ï¼Œç„¶åä»€ä¹ˆæ—¶å€™å†™å›å†…å­˜å‘¢ï¼Ÿè¿˜æœ‰å°±æ˜¯æˆ‘ç¬¬ä¸€æ¬¡åŠ å®Œä»¥åï¼Œç¬¬äºŒæ¬¡+1çš„æ—¶å€™ï¼Œæ˜¯ä»CPUçš„ç¼“å­˜é‡Œé¢å–ï¼Œè¿˜æ˜¯ä»å†…å­˜ä¸­å–å‘¢ï¼Ÿå¦‚æœä»å†…å­˜ä¸­å–ï¼Œé‚£åŠ ç¼“å­˜çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿå¦‚æœä»ç¼“å­˜ä¸­å–ï¼Œé‚£ä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œä¹‹åï¼Œå°±åº”è¯¥æ˜¯ç­‰äº10000ï¼Œè€Œä¸æ˜¯10000ï½20000ä¹‹é—´äº†","like_count":0},{"had_liked":false,"id":345736,"user_name":"å­¦ä¹ å­¦ä¸ªå±","can_delete":false,"product_type":"c1","uid":1049017,"ip_address":"","ucode":"DF2D61E6FB2FCE","user_header":"https://static001.geekbang.org/account/avatar/00/10/01/b9/73435279.jpg","comment_is_top":false,"comment_ctime":1652535590,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652535590","product_id":100023901,"comment_content":"new Object()  è‚¯å®šä¸è¡Œå•Šã€‚åŠ é”çš„lockè¦ä¸€ä¸ªï¼Œé”åªæœ‰ä¸€æŠŠï¼Œè°ç”¨å®Œäº†ï¼Œä¸‹ä¸€ä¸ªäººæ‰èƒ½ç”¨ï¼Œnew Object() å¤šæŠŠé”ï¼Œæ— ç”¨åŠŸã€‚<br><br>å¦å¤–synch å½“å‰çº¿ç¨‹id ä¹Ÿä¸ä¸€æ ·ï¼Œç›¸å½“äºæ²¡åŠ é”ã€‚","like_count":0},{"had_liked":false,"id":339942,"user_name":"rikey","can_delete":false,"product_type":"c1","uid":2874133,"ip_address":"","ucode":"87391F61E1F659","user_header":"https://static001.geekbang.org/account/avatar/00/2b/db/15/47cc6edf.jpg","comment_is_top":false,"comment_ctime":1648476752,"is_pvip":true,"replies":[{"id":"125429","content":"å¯è§æ€§åœ¨CPUå±‚é¢ï¼Œéƒ½æ˜¯é å†…å­˜å±éšœæŒ‡ä»¤è§£å†³çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1269969","ctime":1650971033,"ip_address":"","comment_id":339942,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1648476752","product_id":100023901,"comment_content":"Monitorå¯¹è±¡éœ€è¦ä¿è¯å¯è§æ€§å—ï¼Ÿå¦‚ä½•ä¿è¯çš„å‘¢","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567665,"discussion_content":"å¯è§æ€§åœ¨CPUå±‚é¢ï¼Œéƒ½æ˜¯é å†…å­˜å±éšœæŒ‡ä»¤è§£å†³çš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1650971033,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":335190,"user_name":"sotondolphin","can_delete":false,"product_type":"c1","uid":2306394,"ip_address":"","ucode":"136444B47ACDC5","user_header":"","comment_is_top":false,"comment_ctime":1645380058,"is_pvip":true,"replies":[{"id":"123924","content":"ä¸¤ä¸ªé”ï¼Œåªè¦ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡å°±æ²¡å…³ç³»","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1269969","ctime":1647913200,"ip_address":"","comment_id":335190,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1645380058","product_id":100023901,"comment_content":"æˆ‘æƒ³å†ç¡®è®¤ä¸€ä¸‹ï¼Œ æœ€åä¸€ä¸ªä¾‹å­ç”¨ç±»é”å’Œå®ä¾‹é”å»ä¿æŠ¤valueèµ„æºï¼Œå…¶å®æ˜¯ä¸€ä¸ªé”™è¯¯çš„æ–¹æ³•ã€‚ å› ä¸ºè¿™ä¸¤ä¸ªé”æ²¡æœ‰äº’æ–¥æ€§ï¼Œä¸èƒ½ä¿è¯ä¸€è‡´æ€§å’Œå¯è§æ€§ã€‚å¼•ç”³ä¸€ä¸ªé—®é¢˜å°±æ˜¯ç±»é”å’Œå®ä¾‹é”æœ‰ä¹ˆæœ‰ä½œç”¨èŒƒå›´çš„å…³ç³»? æ¯”å¦‚è¯´ä¸€ä¸ªçº¿ç¨‹æ‹¿åˆ°äº†è¿™ä¸ªç±»çš„é”ï¼Œå®ƒçš„æ‰€æœ‰çš„å®ä¾‹é”éƒ½ä¼šè¢«è‡ªåŠ¨è·å¾—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557632,"discussion_content":"ä¸¤ä¸ªé”ï¼Œåªè¦ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡å°±æ²¡å…³ç³»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647913200,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333972,"user_name":"æ°´ç›®æ²¾","can_delete":false,"product_type":"c1","uid":1274495,"ip_address":"","ucode":"FDD1D15C277D58","user_header":"https://static001.geekbang.org/account/avatar/00/13/72/7f/5da093c5.jpg","comment_is_top":false,"comment_ctime":1644646678,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1644646678","product_id":100023901,"comment_content":"é”ï¼Œäº’æ–¥ï¼ŒåŸå­æ€§ä¸‰è€…ä¹‹é—´çš„å…³ç³»","like_count":0},{"had_liked":false,"id":330001,"user_name":"Geek_161af7","can_delete":false,"product_type":"c1","uid":2834804,"ip_address":"","ucode":"EF9B2C0B359855","user_header":"","comment_is_top":false,"comment_ctime":1641722532,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1641722532","product_id":100023901,"comment_content":"get() å’Œ addOne()æ–¹æ³•éƒ½ç”¨synchronizeä¿®é¥°ï¼Œå¹¶å‘æ€§ä¼šæ¯”è¾ƒä½","like_count":0},{"had_liked":false,"id":327681,"user_name":"Geek_f0c13c","can_delete":false,"product_type":"c1","uid":2768260,"ip_address":"","ucode":"662EDB3B61AF26","user_header":"","comment_is_top":false,"comment_ctime":1640232921,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640232921","product_id":100023901,"comment_content":"æœ€åä¸€ä¸ªé—®é¢˜ï¼ŒåŸå­æ€§å’Œå¯è§æ€§éƒ½ä¸èƒ½å¤Ÿä¿è¯ã€‚","like_count":0},{"had_liked":false,"id":319041,"user_name":"à¸…Slekà¸…","can_delete":false,"product_type":"c1","uid":2436755,"ip_address":"","ucode":"B732C672B3D301","user_header":"https://static001.geekbang.org/account/avatar/00/25/2e/93/81e3e4ca.jpg","comment_is_top":false,"comment_ctime":1635520293,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635520293","product_id":100023901,"comment_content":"çœ‹è¯„è®ºåŒºæ¯”çœ‹æ•™ç¨‹é«˜æ•ˆå¤šäº†ï¼Œå„ä¸ªéƒ½æ˜¯äººæ‰ï¼Œè¯´è¯ä¹Ÿå¥½å¬ï¼Œæˆ‘è¶…å–œæ¬¢è¿™é‡Œçš„","like_count":0},{"had_liked":false,"id":314989,"user_name":"å®˜å®å„¿","can_delete":false,"product_type":"c1","uid":2110827,"ip_address":"","ucode":"03B4312475A984","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI5eicXFWltiaF9ibsEh2nNC80OYoHibhhE0X1hPHZ5KuAtY4Yxp5dQ4LsciaDxUHFBPlJM7kgQwkspzsQ/132","comment_is_top":false,"comment_ctime":1633637977,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633637977","product_id":100023901,"comment_content":"new obj æ˜¯æ–°å¯¹è±¡é”ï¼Œaddå’Œgetä¸æ„æˆäº’æ–¥","like_count":0},{"had_liked":false,"id":314022,"user_name":"peaceForce","can_delete":false,"product_type":"c1","uid":1999235,"ip_address":"","ucode":"98A318930DDC9A","user_header":"https://static001.geekbang.org/account/avatar/00/1e/81/83/f93b1e62.jpg","comment_is_top":false,"comment_ctime":1632809238,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1632809238","product_id":100023901,"comment_content":"å¯¹get()è¦åŠ é”è¿™ç‚¹æ„Ÿè§‰å¾ˆè´¹è§£ã€‚è¿™é‡Œåªæ˜¯è¯»å–ï¼Œç”±äºaddOneçš„é‡Šæ”¾é”å¿…é¡»åœ¨åŠ é”ä¹‹å‰ï¼Œæ‰€ä»¥åŒä¸€æ—¶é—´çš„å¤šä¸ªçº¿ç¨‹è¦ä¹ˆåŒæ—¶è¯»åˆ°åŠ é”å‰çš„å€¼ï¼Œè¦ä¹ˆåŒæ—¶è¯»åˆ°é‡Šæ”¾é”ä¹‹åçš„å€¼ã€‚æ€ä¹ˆä¼šè¦åŠ é”å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1987202,"avatar":"","nickname":"Geek_783cc7","note":"","ucode":"C43F76B1978FA9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":401174,"discussion_content":"å¯¹ï¼Œæˆ‘ä¹Ÿæœ‰è¿™ä¸ªç–‘æƒ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633588917,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":303719,"user_name":"Leon","can_delete":false,"product_type":"c1","uid":1051118,"ip_address":"","ucode":"782F7ECE08C0E5","user_header":"https://static001.geekbang.org/account/avatar/00/10/09/ee/288d878c.jpg","comment_is_top":false,"comment_ctime":1626944335,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626944335","product_id":100023901,"comment_content":"å…³äºé”ï¼Œè¿™ç¯‡æ–‡ç« å†™å¾—ä¸é”™ https:&#47;&#47;tech.meituan.com&#47;2018&#47;11&#47;15&#47;java-lock.html","like_count":0},{"had_liked":false,"id":298236,"user_name":"201201718","can_delete":false,"product_type":"c1","uid":2372133,"ip_address":"","ucode":"CDCAE51039E3E1","user_header":"","comment_is_top":false,"comment_ctime":1623977410,"is_pvip":false,"replies":[{"id":"108799","content":"è€æ¿è®©ç»Ÿè®¡è®¿é—®é‡ï¼Œæœ‰äººåˆ›å»ºäº†å¤šä¸ªè®¡æ•°å™¨ï¼Œè¿™ä¸ªå±äºbugï¼Œå’Œå¹¶å‘æ²¡å…³ç³»","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1624967216,"ip_address":"","comment_id":298236,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1623977410","product_id":100023901,"comment_content":"è¯·é—®ä¸€ä¸‹ï¼Œç”¨ synchronized è§£å†³ count+=1 é—®é¢˜ï¼Œsyncé”çš„æ˜¯å½“å‰å®ä¾‹å¯¹è±¡thisï¼Œé‚£å¦‚æœåˆ›å»ºäº†å¤šä¸ªå®ä¾‹å¯¹è±¡æƒ…å†µä¸‹ï¼Œå²‚ä¸æ˜¯é”çš„å¯¹è±¡ä¸æ˜¯åŒä¸€ä¸ªå—ï¼Ÿå°±ä¼šå‡ºç°å’Œè¯¾åæ€è€ƒé¢˜ä¸€æ ·çš„é—®é¢˜","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522067,"discussion_content":"è€æ¿è®©ç»Ÿè®¡è®¿é—®é‡ï¼Œæœ‰äººåˆ›å»ºäº†å¤šä¸ªè®¡æ•°å™¨ï¼Œè¿™ä¸ªå±äºbugï¼Œå’Œå¹¶å‘æ²¡å…³ç³»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624967216,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287242,"user_name":"RoccoLee","can_delete":false,"product_type":"c1","uid":2508667,"ip_address":"","ucode":"C55AD67FF8C2D7","user_header":"https://static001.geekbang.org/account/avatar/00/26/47/7b/c5ec018c.jpg","comment_is_top":false,"comment_ctime":1617851853,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1617851853","product_id":100023901,"comment_content":"è¯¾åæ€è€ƒï¼šä½¿ç”¨æ–¹å¼ä¸æ­£ç¡®ã€‚åŸå› ï¼šnew Object()ä¼šåˆ›å»ºæ–°å¯¹è±¡ï¼Œgetæ–¹æ³•ä¸addOneæ–¹æ³•åˆ†åˆ«ä½¿ç”¨çš„ä¸åŒçš„é”ï¼ŒaddOneä¸´ç•ŒåŒºvalueçš„ä¿®æ”¹åœ¨è§£é”åå¯¹getä¸å¯è§ã€‚","like_count":0},{"had_liked":false,"id":287214,"user_name":"ZEO","can_delete":false,"product_type":"c1","uid":1100027,"ip_address":"","ucode":"EFCB975C36307D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLl3Ye2UaHZaicq2a1YibSriaUTaxzZOMwajOR39dWKOHLGibkL2zcp6ee2I3Fibjobqjxq2G3piaYYLLZg/132","comment_is_top":false,"comment_ctime":1617843590,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617843590","product_id":100023901,"comment_content":"ä¸¤ä¸ªæ–¹æ³•çš„é”ä¸æ˜¯åŒä¸€ä¸ªï¼Œä¸èƒ½ä¿è¯å¯è§æ€§","like_count":0},{"had_liked":false,"id":286333,"user_name":"è½å¶é£é€çš„æ‹","can_delete":false,"product_type":"c1","uid":1046429,"ip_address":"","ucode":"F9A95DB28BCF1E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f7/9d/be04b331.jpg","comment_is_top":false,"comment_ctime":1617259310,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617259310","product_id":100023901,"comment_content":"æ€è€ƒé¢˜ï¼šè¿™æ ·çš„åŠ é”æ–¹å¼æ²¡ç”¨ã€‚å› ä¸ºæ²¡ç”¨åŒä¸€æŠŠé”æ¥æ§åˆ¶èµ„æºçš„ä¿æŠ¤æ¥å¢åŠ å¤šçº¿ç¨‹çš„ä¹‹é—´çš„äº’æ–¥ã€‚new Object()ï¼Œç›¸å½“äºæ¯æ¬¡å»åŠ é”éƒ½é‡æ–°ç”Ÿæˆä¸€ä¸ªé”å¯¹è±¡ã€‚","like_count":0},{"had_liked":false,"id":284234,"user_name":"BELIEVE","can_delete":false,"product_type":"c1","uid":1127580,"ip_address":"","ucode":"0EE8E9A1A25E89","user_header":"https://static001.geekbang.org/account/avatar/00/11/34/9c/c2bae2ae.jpg","comment_is_top":false,"comment_ctime":1616131119,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616131119","product_id":100023901,"comment_content":"æˆ‘æ€ä¹ˆè§‰å¾—è¯„è®ºåŒºçš„è¿™äº›ç‰›äººéƒ½æ˜¯è€å¸ˆçš„é©¬ç”²å‘¢ï¼Œå“ˆå“ˆå“ˆ","like_count":0},{"had_liked":false,"id":282071,"user_name":"zhunode","can_delete":false,"product_type":"c1","uid":1214421,"ip_address":"","ucode":"D60B6B28C5336C","user_header":"https://static001.geekbang.org/account/avatar/00/12/87/d5/4a6c6890.jpg","comment_is_top":false,"comment_ctime":1615043785,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615043785","product_id":100023901,"comment_content":"ç‹è€å¸ˆå¥½ï¼Œsynchronizedå…³é”®å­—åº”è¯¥æ²¡æœ‰ä¿è¯åŸå­æ€§ï¼ˆåŸå­æ€§æŒ‡çš„æ˜¯ä¸€æ¡æˆ–å¤šæ¡æŒ‡ä»¤åœ¨æ‰§è¡Œçš„æ—¶å€™ä¸è¢«æ‰“æ–­ï¼‰å§ã€‚å› ä¸ºsynchronizedå…³é”®å­—æ˜¯åŠ é”æ“ä½œï¼Œè‹¥çº¿ç¨‹Aæ‹¥æœ‰é”äº†ï¼Œä½†åœ¨æ“ä½œèµ„æºçš„æ—¶å€™å› ä¸ºæ—¶é—´ç‰‡ç”¨å®Œäº†è€Œå‘ç”Ÿäº†çº¿ç¨‹åˆ‡æ¢ï¼Œæ­¤æ—¶çº¿ç¨‹Bä¸ŠCPUï¼Œçº¿ç¨‹Bå› ä¸ºæ‹¿ä¸åˆ°AæŒæœ‰çš„é”ï¼Œåªèƒ½é˜»å¡ï¼Œå¾…æ—¶é—´ç‰‡ç”¨å®Œåï¼ŒAçº¿ç¨‹åˆä¸ŠCPUç»§ç»­æ“ä½œé”ä½çš„èµ„æºï¼Œåœ¨æ‰§è¡Œåå°±é‡Šæ”¾é”äº†ã€‚è€Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒAçº¿ç¨‹æ˜¯è¢«æ‰“æ–­äº†ï¼Œæ‰€ä»¥æ˜¯æ²¡æœ‰ä¿è¯åŸå­æ€§çš„å§ã€‚","like_count":0},{"had_liked":false,"id":282065,"user_name":"zhunode","can_delete":false,"product_type":"c1","uid":1214421,"ip_address":"","ucode":"D60B6B28C5336C","user_header":"https://static001.geekbang.org/account/avatar/00/12/87/d5/4a6c6890.jpg","comment_is_top":false,"comment_ctime":1615041705,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615041705","product_id":100023901,"comment_content":"ä¸æ­£ç¡®ã€‚æŒ‰ç…§è¯„è®ºåŒºå¤§ä½¬è¯´æ³•ï¼Œå› new object()ä½œé”ï¼Œåœ¨ç¼–è¯‘å™¨æ—¶ä¼šå°†synchronizedä¼˜åŒ–å»é™¤ï¼Œä»è€Œå°±å­˜åœ¨å¯è§æ€§é—®é¢˜ï¼Œä¸”å› ä¸ºæ²¡æœ‰é”äº†ï¼Œä¹Ÿå°±æ²¡æœ‰äº†åŸå­æ€§ã€‚","like_count":0},{"had_liked":false,"id":280523,"user_name":"äºŒæ ä¸€","can_delete":false,"product_type":"c1","uid":1141324,"ip_address":"","ucode":"040C9A30E7ADF4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/dDk3WicuUbhvcb4R8PD0YiaFteqQvC4UpXHw4chKLDKB0qaOGeCxBJ3nfiaNZAyVQmAgesyE2MvABydxg6gic29j5w/132","comment_is_top":false,"comment_ctime":1614240938,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1614240938","product_id":100023901,"comment_content":"è€å¸ˆï¼ŒåŒå­¦ä»¬å¥½ï¼Œå¯¹äºç¬¬01é‡Œé¢çš„å•åˆ©ï¼Œæ˜¯ä¸æ˜¯å¯¹instance = new Singleton;è¿™å¥ä»£ç åŠ é”ä¹Ÿè®©ä»–å…·æœ‰åŸå­æ€§ï¼Œå°±æ²¡æœ‰æœ‰åºæ€§é—®é¢˜å‘€ï¼Ÿ","like_count":0},{"had_liked":false,"id":275194,"user_name":"å¼ æ»”","can_delete":false,"product_type":"c1","uid":1322636,"ip_address":"","ucode":"87ABAFF0E861E0","user_header":"https://static001.geekbang.org/account/avatar/00/14/2e/8c/b261e15a.jpg","comment_is_top":false,"comment_ctime":1611383510,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611383510","product_id":100023901,"comment_content":"æ˜¯ä¸æ˜¯é‡Šæ”¾é”çš„æ—¶å€™å¼ºåˆ¶åˆ·æ–°ç¼“å­˜ä¸­çš„æ•°æ®åˆ°å†…å­˜ä¸­ï¼Œè€Œè·å–é”çš„æ—¶å€™ä¼šå¼ºåˆ¶ä»å†…å­˜ä¸­åŠ è½½æ•°æ®åˆ°ç¼“å­˜ï¼Ÿ","like_count":0},{"had_liked":false,"id":272124,"user_name":"å­æ°","can_delete":false,"product_type":"c1","uid":1025250,"ip_address":"","ucode":"717D10394391BE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a4/e2/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1609940335,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1609940335","product_id":100023901,"comment_content":"è¿™é‡Œéœ€è¦åŠ ä¸€ä¸ªå‰ç½®çŸ¥è¯† AbstractQuenedSynchronizer ï¼Œè¿™æ ·æ•´ä¸ªæ¨¡å‹å°±æ›´å®Œæ•´äº†","like_count":0},{"had_liked":false,"id":263503,"user_name":"flying myself","can_delete":false,"product_type":"c1","uid":1992480,"ip_address":"","ucode":"69F26BE9B94B58","user_header":"https://static001.geekbang.org/account/avatar/00/1e/67/20/93b2e38e.jpg","comment_is_top":false,"comment_ctime":1606143888,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606143888","product_id":100023901,"comment_content":"é”æ˜¯new Object()å‡ºæ¥çš„ä¸åŒå¯¹è±¡ï¼Œæ˜¯ä¸åŒçš„é”ï¼Œä¸èƒ½ä¿è¯äº’æ–¥ï¼Œæ— æ³•ä¿è¯å¯¹åŒä¸€ä¸ªé”çš„è§£é”å¯¹å…¶åŠ é”å¯è§ï¼Œå³æ— æ³•ä¿è¯å¯è§æ€§ï¼›å½“å†™çº¿ç¨‹è¢«åˆ‡æ¢ï¼Œå†™æ“ä½œç»ˆæ­¢ï¼Œè°ƒåº¦è¯»çº¿ç¨‹ï¼Œä¼šæ— æ³•ä¿è¯åŸå­æ€§ï¼Œæ‰€ä»¥è¿˜æ˜¯getæ–¹æ³•åŠ é”ï¼Œä¿è¯è¯»æ“ä½œæ˜¯å¯è§çš„ï¼›","like_count":0},{"had_liked":false,"id":262773,"user_name":"é˜¿å£°","can_delete":false,"product_type":"c1","uid":1148174,"ip_address":"","ucode":"EEA5F2E9D4FC9C","user_header":"https://static001.geekbang.org/account/avatar/00/11/85/0e/e6640576.jpg","comment_is_top":false,"comment_ctime":1605840598,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605840598","product_id":100023901,"comment_content":"å›ç­”åˆ«çš±çœ‰çš„æ‰“å°é—®é¢˜ã€‚<br>è¿™æ˜¯ System.out.println(b) çš„æ–¹æ³•å®ç°ï¼š<br>public void println(Object x) {<br>    String s = String.valueOf(x);<br>    synchronized (this) {<br>        print(s);<br>        newLine();<br>    }<br>}<br><br><br>åœ¨è¿™ä¸€è¡Œ String s = String.valueOf(x)ï¼Œæ¥äº†ä¸ªç‹¸çŒ«æ¢å¤ªå­ï¼ŒString s æ˜¯ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼ˆStringæ˜¯ä¸å¯å˜ç±»ï¼‰ï¼Œså¯¹è±¡é‡Œé¢çš„value[]å¤åˆ¶çš„æ˜¯Object xé‡Œé¢çš„valueã€‚<br>å¯ä»¥å‚è€ƒIntegerçš„toString()å®ç°ï¼š<br>public static String toString(int i) {<br>    if (i == Integer.MIN_VALUE)<br>        return &quot;-2147483648&quot;;<br>    int size = (i &lt; 0) ? stringSize(-i) + 1 : stringSize(i);<br>    char[] buf = new char[size];<br>    getChars(i, size, buf);<br>    return new String(buf, true);<br>}<br><br>æ‰€ä»¥æœ€ç»ˆprint(s) æ‰“å°çš„æ˜¯ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ï¼ŒObject xå¯¹è±¡è¿›å…¥synchronized ä¸´ç•ŒåŒºååˆ·æ–°äº†ä¸»å†…å­˜ä¸­çš„æœ€ç»ˆæ•°æ®ï¼Œå¯¹print(s)æ¥è¯´å·²ç»æ²¡å…³ç³»äº†<br><br>æ€è€ƒï¼Œè‡³äºä¸ºä»€ä¹ˆSystem.out.println(Object x)å¦‚æ­¤å®ç°ï¼Œè¿›è¡Œå¤§èƒ†çš„çŒœæµ‹ï¼š<br>1ã€ä»é€»è¾‘ä¸Šç»™å‡ºçš„è¡¨ç°æ˜¯æ‰€è§å³æ‰€å¾—ï¼Œæˆ‘å½“å‰æ˜¯ä»€ä¹ˆå€¼ï¼Œé‚£æˆ‘å¾€æ§åˆ¶å°æ‰“å°çš„å°±åº”è¯¥æ˜¯ä»€ä¹ˆå€¼ï¼Œè€Œä¸åº”è¯¥è¢«å…¶ä»–çº¿ç¨‹å½±å“åˆ°ï¼ˆæœ¬åœ°ç¼“å­˜åˆ·æ–°äº†æœ€æ–°å€¼ï¼‰<br>2ã€è¿™ä¸ªåœ°æ–¹ä½¿ç”¨ synchronizedä¿®é¥°ï¼Œé‚£ä¸€å®šæ˜¯é‡Œé¢çš„æ“ä½œå±äºä¸´ç•Œèµ„æºï¼Œéœ€è¦ä¿æŠ¤ï¼Œè¿™æ˜¯ç›®çš„ã€‚Object è¢«åŠ¨çš„åšäº†ä¸€æ¬¡æœ¬åœ°å†…å­˜å‰¯æœ¬çš„åˆ·æ–°ï¼Œæˆ‘è§‰å¾—æ˜¯é¡ºå¸¦çš„ã€‚<br><br>æ€»ç»“ï¼š<br>1ã€System.out.println(b) è™½ç„¶å¯¹å½“å‰çº¿ç¨‹çš„ç¼“å­˜åšäº†ä¸€æ¬¡æœ¬åœ°å†…å­˜çš„åˆ·æ–°ï¼Œä½†æ˜¯å¯ä»¥å½“æˆä¸€ä¸ªè°ƒå‰‚ã€‚<br>2ã€çœŸçš„æƒ³è¦å®ç°å¯è§æ€§åŸåˆ™ï¼Œè¿˜æ˜¯è¦åœ¨ä¸šåŠ¡ä»£ç å±‚é¢ æ˜¾ç¤ºçš„ ç”¨volatileä¹‹ç±»çš„æœºåˆ¶æ¥ä¿è¯ã€‚<br><br>ä¸çŸ¥é“æˆ‘ç†è§£æ˜¯å¦æ­£ç¡®ï¼Œæ¬¢è¿å¤§å®¶æŒ‡æ­£ã€‚","like_count":0},{"had_liked":false,"id":261917,"user_name":"Geek_89e362","can_delete":false,"product_type":"c1","uid":2308075,"ip_address":"","ucode":"E596C2CFE1CFAF","user_header":"","comment_is_top":false,"comment_ctime":1605578333,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605578333","product_id":100023901,"comment_content":"æ€è€ƒé¢˜ï¼š<br>  ç»“è®ºï¼šaddOneä¸èƒ½ä¿è¯åŸå­æ€§ï¼ŒaddOneå’Œgetä¹‹é—´ä¸èƒ½ä¿è¯å¯è§æ€§ã€‚<br>  åŸå› ï¼š<br>   1ã€addOneä¸èƒ½ä¿è¯åŸå­æ€§<br>          ç”±äºsynchronized ä½¿ç”¨çš„æ˜¯ new Object() ä½œä¸ºé”ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œæ‰€æœ‰çº¿ç¨‹ä¹‹é—´ä½¿ç”¨çš„ä¸æ˜¯åŒä¸€æŠŠé”ï¼Œæ— æ³•ä¿è¯çº¿ç¨‹ä¹‹é—´çš„äº’æ–¥æ“ä½œï¼Œä¹Ÿå°±æ˜¯è¯´å¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è¿›å…¥ä¸´ç•ŒåŒºï¼Œæ•…ä¸èƒ½ä¿è¯åŸå­æ€§ã€‚<br>      2ã€addOneå’Œgetä¹‹é—´ä¸èƒ½ä¿è¯å¯è§æ€§<br>          ç”±äºä¸¤ä¸ªæ–¹æ³•ä¸­çš„synchronizedä»£ç å—åŠ é”éƒ½æ˜¯ä½¿ç”¨çš„ new Object()ï¼Œä¹Ÿä¸æ˜¯ä¸€æŠŠé”ï¼Œä¸¤ä¸ªæ–¹æ³•ä¹‹é—´ä¹Ÿä¸æ˜¯äº’æ–¥æ“ä½œï¼Œæ•…ä¸èƒ½ä¿è¯å…¶å¯è§æ€§ã€‚","like_count":0},{"had_liked":false,"id":260963,"user_name":"Geek_c75d82","can_delete":false,"product_type":"c1","uid":2286012,"ip_address":"","ucode":"81202A016FC5D2","user_header":"","comment_is_top":false,"comment_ctime":1605162500,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605162500","product_id":100023901,"comment_content":"é”å¯¹è±¡éƒ½æ˜¯newå‡ºæ¥çš„æ–°å¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æ˜¯æ–°ï¼Œä»£ç è¿›å…¥çš„æ—¶å€™ï¼Œæ–°å¯¹è±¡ä¸Šé¢è¿˜æ²¡æœ‰é”ï¼Œæ‰€ä»¥é”ä¸ä½","like_count":0},{"had_liked":false,"id":249934,"user_name":"monus","can_delete":false,"product_type":"c1","uid":2159455,"ip_address":"","ucode":"AC687844D03296","user_header":"","comment_is_top":false,"comment_ctime":1600858262,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1600858262","product_id":100023901,"comment_content":"å¯¹èµ„æºçš„åŠ é”å’Œè§£é”æ“ä½œï¼Œå¿…é¡»æ˜¯åŒä¸€æŠŠé”å§ã€‚å°±å¥½æ¯”æˆ‘é”äº†æˆ¿é—´ï¼Œä½ ç”¨ä½ çš„é”è¿˜èƒ½æ‰“å¼€ï¼Œè¿™æƒ³æƒ³éƒ½éƒ½å®³æ€•ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ã€‚æ‰€ä»¥ä¸Šè¿°ä»£ç ï¼Œé‡‡ç”¨new objectï¼Œæ¯æ¬¡åŠ é”å’Œè§£é”éƒ½ä¸æ˜¯åŒä¸€æŠŠé”ï¼Œæ˜¯ä¸èƒ½ä¿è¯çš„ã€‚","like_count":0},{"had_liked":false,"id":249763,"user_name":"å¤œæ¶›","can_delete":false,"product_type":"c1","uid":1507783,"ip_address":"","ucode":"672CC53663710B","user_header":"https://static001.geekbang.org/account/avatar/00/17/01/c7/549b5616.jpg","comment_is_top":false,"comment_ctime":1600782590,"is_pvip":true,"replies":[{"id":"91644","content":"ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1600956104,"ip_address":"","comment_id":249763,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1600782590","product_id":100023901,"comment_content":"newè¿™æ ·æ˜¯ä¸è¡Œçš„ï¼Œæ¯æ¬¡newéƒ½ç›¸å½“äºé”äº†ä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œè¿™ä¸ªå®ä¾‹è¿˜æ²¡æœ‰åœ°æ–¹ä½¿ç”¨ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506007,"discussion_content":"ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600956104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":247291,"user_name":"è¥¿é—¨å¹ç‰›","can_delete":false,"product_type":"c1","uid":1508990,"ip_address":"","ucode":"E5D3624DDE1E83","user_header":"https://static001.geekbang.org/account/avatar/00/17/06/7e/735968e2.jpg","comment_is_top":false,"comment_ctime":1599650931,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599650931","product_id":100023901,"comment_content":"JVMå¯¹Synchronizedçš„ä¼˜åŒ–ï¼Œç®€å•æ¥è¯´è§£å†³ä¸‰ç§åœºæ™¯ï¼š<br>åªæœ‰ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒº-----&gt;åå‘é”ï¼Œ<br>å¤šä¸ªçº¿ç¨‹äº¤æ›¿è¿›å…¥ä¸´ç•ŒåŒº-----&gt;è½»é‡çº§é”ï¼Œ<br>å¤šçº¿ç¨‹åŒæ—¶è¿›å…¥ä¸´ç•ŒåŒº-----&gt;é‡é‡çº§é”","like_count":0},{"had_liked":false,"id":246236,"user_name":"è¥¿é—¨å¹ç‰›","can_delete":false,"product_type":"c1","uid":1508990,"ip_address":"","ucode":"E5D3624DDE1E83","user_header":"https://static001.geekbang.org/account/avatar/00/17/06/7e/735968e2.jpg","comment_is_top":false,"comment_ctime":1599216288,"is_pvip":false,"replies":[{"id":"91347","content":"ä¼˜ç§€ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1600347488,"ip_address":"","comment_id":246236,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1599216288","product_id":100023901,"comment_content":"è¯´ä¸‹åŠ é”è§£é”å¤§è‡´æµç¨‹å§ï¼š<br>æ ¹æ®å¯¹è±¡å¤´ä¸­çš„æ•°æ®ï¼Œå¯ä»¥çœ‹å‡ºï¼Œjavaå¯¹åå‘é”ï¼Œè½»é‡çº§é”ï¼Œé‡é‡çº§é”çš„åŠ é”å’Œè§£é”æ“ä½œæ˜¯ä¸ä¸€æ ·çš„ã€‚<br>é‡é‡çº§é”ï¼šä»å¯¹è±¡å¤´ä¸­çš„æ•°æ®ï¼Œå¯ä»¥çœ‹å‡ºï¼Œå½“é”æ ‡å¿—ä½ä¸ºé‡é‡çº§é”æ—¶ï¼Œé‚£ä¹ˆå¯¹è±¡å¤´ä¸­å°±Mark word çš„å‰å‡ ä½å°±æ˜¯æŒ‡å‘ Monitor çš„æŒ‡é’ˆï¼ŒMonitorå°±æ˜¯ç®¡ç¨‹ï¼Œé‡Œé¢æœ‰ç­‰åˆ°é˜Ÿåˆ—ï¼Œé‡å…¥æ¬¡æ•°ï¼ŒæŒ‡å‘è·å–é”çº¿ç¨‹çš„æŒ‡é’ˆç­‰ä¿¡æ¯ï¼ŒMonitoråœ¨HotSpot ä¸­æ˜¯åŸºäºC++å®ç°çš„ObjectMonitorï¼Œæ¯ä¸ªå¯¹è±¡éƒ½å¯¹åº”ä¸€ä¸ªMonitor ç›‘è§†å™¨ï¼›<br>çº¿ç¨‹è¿‡æ¥ï¼Œå…ˆæ ¹æ®é”å¯¹è±¡å¤´ä¸­çš„æŒ‡å‘ObjectMonitor çš„æŒ‡é’ˆï¼Œæ‰¾åˆ°ObjectMonitorï¼Œç„¶åæŠŠObjectMonitorä¸­çš„ä¸€ä¸ªæ•°æ®çº¿ç¨‹id é€šè¿‡casä¿®æ”¹ä¸ºè‡ªå·±çš„çº¿ç¨‹idï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæœ‰å¯èƒ½æœ‰å¤šä¸ªçº¿ç¨‹æ‹¿åˆ°ObjectMonitorï¼Œå½“å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®åŒæ­¥ä»£ç æ—¶ï¼Œé¦–å…ˆè¿›å…¥çš„å°±æ˜¯ObjectMonitorä¸­çš„EntryListé˜Ÿåˆ— ã€‚å½“æŸä¸ªçº¿ç¨‹é€šè¿‡casç«äº‰åˆ°é”æ—¶ï¼Œè¿™é‡Œæ²¡äººå…¥é˜Ÿåˆ—ï¼Œæ‰€ä»¥æ˜¯éå…¬å¹³é”ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡ cas ç«äº‰æˆåŠŸæŠŠObjectMonitorä¸­çš„owner è®¾ç½®ä¸ºä»–çš„çº¿ç¨‹åœ°å€ï¼Œé‚£ä¹ˆåŠ é”æˆåŠŸï¼Œè®¡æ•°å™¨åŠ 1ï¼Œé‡Šæ”¾é”æ—¶å‡1ï¼›<br>è¿™é‡Œä¸»è¦æœ‰ä¸ªMonitorï¼Œç®¡ç¨‹ï¼Œç®¡ç¨‹ä¸»è¦ä¿©ç‚¹ï¼Œäº’æ–¥å’ŒååŒï¼Œäº’æ–¥æ˜¯é€šè¿‡è·å–å¯¹è±¡é”æ¥ä¿è¯åŒæ­¥ä»£ç çš„äº’æ–¥æ‰§è¡Œï¼ŒååŒé çš„æ˜¯notify å’Œ waitæœºåˆ¶è¿›è¡Œç°åœºé—´çš„ååŒï¼Œè¿™éƒ½æ˜¯ç®¡ç¨‹æ¨¡å‹çš„ç²¾é«“ï¼Œç­‰å¾…å”¤é†’æœºåˆ¶ã€‚<br>è½»é‡çº§é”å’Œåå‘é”çš„åŠ é”è§£é”æ¯”è¾ƒç®€å•ï¼Œç½‘ä¸Šæ–‡ç« ä¹Ÿå¤šã€‚<br>å¯ä»¥çœ‹å‡ºï¼Œé‡é‡çº§é”ï¼Œéƒ½æ¶‰åŠMonitoræ“ä½œï¼Œè€ŒMonitor æ“ä½œéƒ½å’Œåº•å±‚å†…æ ¸ç›¸å…³ï¼Œæ‰€ä»¥æ¯æ¬¡åŠ é”è§£é”å¼€é”€å¾ˆå¤§ã€‚å½“ç„¶å…·ä½“ç»†èŠ‚è¿˜å¾ˆå¤šï¼Œæœ‰å…´è¶£çš„æ¥ä¸€èµ·äº¤æµã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505094,"discussion_content":"ä¼˜ç§€ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600347488,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":245742,"user_name":"è¥¿é—¨å¹ç‰›","can_delete":false,"product_type":"c1","uid":1508990,"ip_address":"","ucode":"E5D3624DDE1E83","user_header":"https://static001.geekbang.org/account/avatar/00/17/06/7e/735968e2.jpg","comment_is_top":false,"comment_ctime":1599038531,"is_pvip":false,"replies":[{"id":"90434","content":"ğŸ‘ğŸ»","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1599175931,"ip_address":"","comment_id":245742,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1599038531","product_id":100023901,"comment_content":"è¯¾åæ€è€ƒï¼š<br>ç»è¿‡é€ƒé€¸åˆ†æä¼˜åŒ–ä¼šå¯¼è‡´é”æ¶ˆé™¤<br>å³æ—¶ç¼–è¯‘å™¨åªéœ€è¯æ˜é”å¯¹è±¡ä¼šä¸ä¼šå‘ç”Ÿé€ƒé€¸ï¼Œä¹Ÿå°±æ˜¯é”å¯¹è±¡ä¼šä¸ä¼šè¢«å…¶ä»–çº¿ç¨‹å…±äº«ä½¿ç”¨ï¼Œå¦‚æœå½“å‰é”å¯¹è±¡åªåœ¨å½“å‰çº¿ç¨‹ä½¿ç”¨ï¼Œé‚£ä¹ˆè¯´æ˜è¯¥é”å¯¹è±¡ä¸ä¼šå‘ç”Ÿé€ƒé€¸ï¼Œåªåœ¨æœ¬çº¿ç¨‹ä½¿ç”¨ï¼Œå› æ­¤ä¹Ÿæ— æ³•åŸºäºè¯¥é”å¯¹è±¡æ„é€ ä¸¤ä¸ªçº¿ç¨‹ä¹‹é—´çš„ happens-before è§„åˆ™ï¼Œé‚£ä¹ˆåŠ é”è§£é”å°±æ²¡å¿…è¦ï¼Œä¼šç›´æ¥ä¼˜åŒ–æ‰åŠ é”è§£é”æ“ä½œã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504975,"discussion_content":"ğŸ‘ğŸ»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599175931,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":242310,"user_name":"fightingD","can_delete":false,"product_type":"c1","uid":1443637,"ip_address":"","ucode":"AD2876CED5D5AC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKwViav94kcF50CxA0Jw7icicxociaVzut97iacy3b2ciacFqXuFWdiakVq304YcI8pt4HT5A1Yvp8EkYCpw/132","comment_is_top":false,"comment_ctime":1597666956,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597666956","product_id":100023901,"comment_content":"ä¸èƒ½è§£å†³åŸå­æ€§é—®é¢˜ï¼Œå› ä¸ºget(),å’Œaddone() ä¸¤ä¸ªæ–¹æ³•çš„é”ä¸ç›¸åŒï¼Œæ‰€ä»¥æ— æ³•äº’æ–¥ã€‚<br>å¯è§æ€§ä¹Ÿä¿éšœä¸äº†ï¼Œå› ä¸ºaddone(),get()æ–¹æ³•çš„é”æ˜¯å˜åŒ–çš„ï¼Œç›¸å½“äºæ²¡æœ‰åŠ é”ã€‚","like_count":0},{"had_liked":false,"id":241511,"user_name":"William","can_delete":false,"product_type":"c1","uid":1346215,"ip_address":"","ucode":"55F5D9DEE485B1","user_header":"https://static001.geekbang.org/account/avatar/00/14/8a/a7/674c1864.jpg","comment_is_top":false,"comment_ctime":1597315563,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1597315563","product_id":100023901,"comment_content":"è¯¾åé¢˜ç›®ï¼š æ²¡æœ‰ä½œç”¨ï¼Œå› ä¸º synchronized é”çš„æ˜¯ä¸åŒçš„å¯¹è±¡ã€‚","like_count":0},{"had_liked":false,"id":234551,"user_name":"Geek_41d472","can_delete":false,"product_type":"c1","uid":1247965,"ip_address":"","ucode":"DEC2B6329460CF","user_header":"https://static001.geekbang.org/account/avatar/00/13/0a/dd/88fa7b52.jpg","comment_is_top":false,"comment_ctime":1594718312,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594718312","product_id":100023901,"comment_content":"â€œåŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œâ€è¿™ä¸ªæ¡ä»¶éå¸¸é‡è¦ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºäº’æ–¥ã€‚å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿä¿è¯å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹æ˜¯äº’æ–¥çš„ï¼Œé‚£ä¹ˆï¼Œæ— è®ºæ˜¯å•æ ¸ CPU è¿˜æ˜¯å¤šæ ¸ CPUï¼Œå°±éƒ½èƒ½ä¿è¯åŸå­æ€§äº†ã€‚<br>-----------------------------------<br>è€å¸ˆ,ä¸ºå•¥äº’æ–¥å°±èƒ½ä¿è¯åŸå­æ€§å‘¢,,å®åœ¨ç†è§£ä¸äº†,äº’æ–¥,æ¯”å¦‚ä½¿ç”¨äº†sychonzedçš„æ–¹æ³•,åªæ˜¯ä¿è¯äº†åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè¿™æ–¹æ³•,å¦‚æœåœ¨æ‰§è¡Œè¿™ä¸ªæ–¹æ³•è¿‡ç¨‹ä¸­çº¿ç¨‹åˆ‡æ¢äº†,è¿™ä¸å°±ä¸­æ–­äº†å—?æ—¢ç„¶ä¸­æ–­äº†ä¸ºä»€ä¹ˆ,ä¸å°±æ— æ³•ä¿è¯åŸå­æ€§äº†å—","like_count":0},{"had_liked":false,"id":232309,"user_name":"sibyl","can_delete":false,"product_type":"c1","uid":1323652,"ip_address":"","ucode":"0D142011860D69","user_header":"","comment_is_top":false,"comment_ctime":1593953009,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593953009","product_id":100023901,"comment_content":"synchronized ç›¸æ¯” volatile å¤šäº†äº’æ–¥çš„ä½œç”¨ï¼Œé¿å…åŸå­æ€§é—®é¢˜ã€‚<br>æ¯”å¦‚æ–‡ä¸­value++ä»£ç å¦‚æœèƒ½ä¸€å®šåœ¨64ä½æœºå™¨ä¸Šè¿è¡Œï¼Œé‚£ä¹ˆç›´æ¥ä½¿ç”¨volatileä¹Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› ä¸ºä¹ˆæœ‰åŸå­æ€§é—®é¢˜å•¦ï¼Œæ²¡æœ‰çº¿ç¨‹äº’æ–¥ï¼Œå› æ­¤æ•ˆç‡æ›´é«˜ã€‚","like_count":0},{"had_liked":false,"id":231176,"user_name":"å°æè®²æºç ","can_delete":false,"product_type":"c1","uid":1107484,"ip_address":"","ucode":"2573037D7C82C8","user_header":"https://static001.geekbang.org/account/avatar/00/10/e6/1c/9d3744ee.jpg","comment_is_top":false,"comment_ctime":1593601819,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1593601819","product_id":100023901,"comment_content":"æ€»ç»“ï¼šé€šè¿‡äº’æ–¥é”å¯ä»¥ä¿è¯åŸå­æ€§ã€‚ä½†å‰ææ˜¯å¯¹åŒä¸€èµ„æºè¿›è¡Œç«äº‰ã€‚åœ¨ä»£ç ä¸­newäº†ä¸åŒçš„å¯¹è±¡ï¼Œsychronizedå¯¹ä¸åŒçš„å¯¹è±¡è¿›è¡ŒåŠ é”ï¼Œä¸èƒ½ä¿è¯åŸå­æ€§ã€‚<br><br>è€Œä¸”è¿™ç§å¯¹è±¡åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œä¸å­˜åœ¨é”çš„ç«äº‰ï¼Œç»è¿‡ä¼˜åŒ–å°±é”æ¶ˆé™¤äº†ã€‚","like_count":0},{"had_liked":false,"id":229150,"user_name":"æœæ€»","can_delete":false,"product_type":"c1","uid":2046055,"ip_address":"","ucode":"C6600875A265E7","user_header":"","comment_is_top":false,"comment_ctime":1592908804,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1592908804","product_id":100023901,"comment_content":"ğŸ¤£è€å¸ˆå•Šï¼Œåªå°†äº†ç”¨æ³•ï¼ŒæœŸå¾…çš„synchronizedçš„å®ç°ï¼Œsynchronizedä¼˜åŒ–éƒ½æ²¡æœ‰è®²åˆ°å•Š","like_count":0,"discussions":[{"author":{"id":1508990,"avatar":"https://static001.geekbang.org/account/avatar/00/17/06/7e/735968e2.jpg","nickname":"è¥¿é—¨å¹ç‰›","note":"","ucode":"E5D3624DDE1E83","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303358,"discussion_content":"synchronized çš„å®ç°ï¼Œæ˜¯åŸºäºåº•å±‚ç”¨C++å®ç°çš„ObjectMonitorå®ç°çš„ï¼Œä¹Ÿå°±æ˜¯åé¢å°†çš„ç®¡ç¨‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599216536,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223492,"user_name":"olivia-byte","can_delete":false,"product_type":"c1","uid":1273891,"ip_address":"","ucode":"D54B3833995923","user_header":"https://static001.geekbang.org/account/avatar/00/13/70/23/92d188aa.jpg","comment_is_top":false,"comment_ctime":1591102055,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591102055","product_id":100023901,"comment_content":"get() æ–¹æ³•å’Œ addOne() æ–¹æ³•éƒ½éœ€è¦è®¿é—® value è¿™ä¸ªå—ä¿æŠ¤çš„èµ„æºï¼Œè¿™ä¸ªèµ„æºç”¨ this è¿™æŠŠé”æ¥ä¿æŠ¤ã€‚çº¿ç¨‹è¦è¿›å…¥ä¸´ç•ŒåŒº get() å’Œ addOne()ï¼Œå¿…é¡»å…ˆè·å¾— this è¿™æŠŠé”ï¼Œè¿™æ · get() å’Œ addOne() ä¹Ÿæ˜¯äº’æ–¥çš„ã€‚è¿™æ˜¯ä¸æ˜¯ä¹Ÿå°±è¯´æ˜è¿™ä¸¤ä¸ªæ“ä½œä»»ä½•ä¸€ä¸ªæ‹¿åˆ°é”ä¹‹åæ²¡æœ‰é‡Šæ”¾å¦ä¸€ä¸ªæ“ä½œä¼šè¢«é˜»å¡ä½","like_count":0},{"had_liked":false,"id":215910,"user_name":"coldwalker","can_delete":false,"product_type":"c1","uid":1751378,"ip_address":"","ucode":"B86846C0B36DD7","user_header":"https://static001.geekbang.org/account/avatar/00/1a/b9/52/3f0251b9.jpg","comment_is_top":false,"comment_ctime":1589133910,"is_pvip":false,"replies":[{"id":"80121","content":"volatileæ¯”synchronizedæ›´å¿«ä¸€äº›","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1589286490,"ip_address":"","comment_id":215910,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1589133910","product_id":100023901,"comment_content":"è€å¸ˆè¯·é—®ï¼Œä¾‹å¦‚int a = 10; ä¸ºäº†ä¿è¯getå’ŒaddOneæ–¹æ³•çš„çº¿ç¨‹å®‰å…¨ï¼Œéƒ½å¯¹è¿™ä¸¤ä¸ªæ–¹æ³•åŠ synchronizedæ›´å¿«ï¼Œè¿˜æ˜¯æ”¹ä¸ºvolatile int a = 10;ç„¶ågetä¸åŠ é”ï¼ŒaddOneåŠ é”æ›´å¿«ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494609,"discussion_content":"volatileæ¯”synchronizedæ›´å¿«ä¸€äº›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589286490,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205852,"user_name":"Eric W.Liu","can_delete":false,"product_type":"c1","uid":1960096,"ip_address":"","ucode":"8B394A3C1448BA","user_header":"https://static001.geekbang.org/account/avatar/00/1d/e8/a0/14de6984.jpg","comment_is_top":false,"comment_ctime":1586747127,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586747127","product_id":100023901,"comment_content":"è¯¾åæ€è€ƒä¸èƒ½ä¿è¯å¯è§æ€§å’ŒåŸå­æ€§ï¼Œå› ä¸ºgetå’ŒaddOneæ–¹æ³•åœ¨åŠ é”èµ„æºæ—¶ä½¿ç”¨äº†synchronized(new Object)ï¼Œnew Object()æ¯æ¬¡éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œæ‰€ä»¥æ¯æ¬¡åŠ é”éƒ½æ˜¯åœ¨ä¸åŒçš„å¯¹è±¡ä¸ŠåŠ é”ï¼Œå¹¶æ²¡æœ‰ä¿æŠ¤åˆ°ä¸´ç•Œèµ„æº","like_count":0},{"had_liked":false,"id":205041,"user_name":"M","can_delete":false,"product_type":"c1","uid":1810576,"ip_address":"","ucode":"06F26E1D62E9C9","user_header":"https://wx.qlogo.cn/mmopen/vi_32/eLNeJNaEkwGSK7xvtamMibVLMy2MpbIqX3iaEhT7JtSnTRMRTwZ2j4HX7WAapiashbiaBDVriaXKSP0Oeic6ZAEVEXag/132","comment_is_top":false,"comment_ctime":1586513793,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586513793","product_id":100023901,"comment_content":"æ€»ç»“ï¼š<br>å¹¶å‘é—®é¢˜ä¸‰ä¸ªå…³æ³¨ç‚¹ï¼š<br>1.é”çš„æ˜¯ä»€ä¹ˆï¼Ÿ<br>2.ä¿æŠ¤çš„æ˜¯ä»€ä¹ˆï¼Ÿ<br>3.é”å’Œèµ„æºçš„å…³ç³»æ˜¯ä¸€å¯¹å¤š<br>","like_count":0},{"had_liked":false,"id":205039,"user_name":"M","can_delete":false,"product_type":"c1","uid":1810576,"ip_address":"","ucode":"06F26E1D62E9C9","user_header":"https://wx.qlogo.cn/mmopen/vi_32/eLNeJNaEkwGSK7xvtamMibVLMy2MpbIqX3iaEhT7JtSnTRMRTwZ2j4HX7WAapiashbiaBDVriaXKSP0Oeic6ZAEVEXag/132","comment_is_top":false,"comment_ctime":1586513377,"is_pvip":false,"replies":[{"id":"76652","content":"æ¯ä¸ªçº¿ç¨‹æ“ä½œè‡ªå·±çš„å¯¹è±¡ä¸å±äºå¹¶å‘é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1586527643,"ip_address":"","comment_id":205039,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1586513377","product_id":100023901,"comment_content":"è€å¸ˆï¼Œè®²çš„çœŸå¥½ï¼Œæ˜¯æˆ‘è§è¿‡è®²å¹¶å‘è¯¾ä¸­æœ€å¥½çš„äº†ã€‚<br><br>çœ‹äº†è¿™ç¯‡ï¼Œæœ‰ä¸ªç–‘é—®ï¼Œæˆ‘å…ˆæŠŠä¸Šé¢ä»£ç å¤åˆ¶ä¸‹<br><br>class SafeCalc {<br>  long value = 0L;<br>  long get() {<br>    return value;<br>  }<br>  synchronized void addOne() {<br>    value += 1;<br>  }<br>}<br>æˆ‘çš„ç†è§£æ˜¯ï¼š<br>addOne()æ–¹æ³•æ˜¯æ™®é€šæ–¹æ³•ï¼Œé”å¯¹è±¡æ˜¯thisï¼Œ<br>å¦‚æœè¿™ä¸ªSafeCalcç±»æ˜¯å•ä¾‹ï¼Œä¸ä¼šæœ‰å¹¶å‘é—®é¢˜ï¼›<br>å¦‚æœè¿™ä¸ªSafeCalcç±»æ˜¯å¤šä¾‹ï¼Œå‡è®¾æœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸¤ä¸ªçº¿ç¨‹éƒ½åˆ›å»ºäº†SafeCalcå¯¹è±¡ï¼Œé‚£å°±ä¸æ˜¯åŒä¸€æŠŠé”äº†ï¼Œé”çš„æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡äº†ï¼Œè¿™ç§åº”è¯¥ä¼šæœ‰å¹¶å‘é—®é¢˜çš„å§ï¼Ÿ<br><br>","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491362,"discussion_content":"æ¯ä¸ªçº¿ç¨‹æ“ä½œè‡ªå·±çš„å¯¹è±¡ä¸å±äºå¹¶å‘é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586527643,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":204577,"user_name":"M","can_delete":false,"product_type":"c1","uid":1810576,"ip_address":"","ucode":"06F26E1D62E9C9","user_header":"https://wx.qlogo.cn/mmopen/vi_32/eLNeJNaEkwGSK7xvtamMibVLMy2MpbIqX3iaEhT7JtSnTRMRTwZ2j4HX7WAapiashbiaBDVriaXKSP0Oeic6ZAEVEXag/132","comment_is_top":false,"comment_ctime":1586423767,"is_pvip":false,"replies":[{"id":"76485","content":"å¯¹çš„ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1586430132,"ip_address":"","comment_id":204577,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1586423767","product_id":100023901,"comment_content":"æ€è€ƒé¢˜ï¼šå› ä¸ºget()å’ŒaddOne()æ–¹æ³•é”çš„æ˜¯ä¸åŒçš„å¯¹è±¡ï¼Œæ¯æ¬¡ä¸åŒçº¿ç¨‹è¿›æ¥éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡åŠ é”ï¼Œåœ¨ä¸åŒçº¿ç¨‹ä¸åŒé”å¯¹è±¡ä¸‹é”æ˜¯æ— æ•ˆçš„ï¼Œä¼šäº§ç”Ÿå¹¶å‘é—®é¢˜ï¼Œä¹Ÿä¼šäº§ç”Ÿå¯è§æ€§é—®é¢˜ã€‚é‚£ä¸åŒçº¿ç¨‹åŒä¸€é”å¯¹è±¡åº”è¯¥æ˜¯æ²¡æœ‰å¹¶å‘é—®é¢˜çš„å§ï¼Ÿ<br><br>è€å¸ˆï¼Œè¿™æ ·ç†è§£æ˜¯å¯¹çš„ä¹ˆï¼Ÿæ±‚ç­”å¤","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491219,"discussion_content":"å¯¹çš„ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586430132,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":192562,"user_name":"Zain Zhu","can_delete":false,"product_type":"c1","uid":1125986,"ip_address":"","ucode":"5402E6FF76333A","user_header":"https://static001.geekbang.org/account/avatar/00/11/2e/62/ea49480e.jpg","comment_is_top":false,"comment_ctime":1584860595,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584860595","product_id":100023901,"comment_content":"ä¸èƒ½ã€‚æ¯æ¬¡éƒ½æ˜¯æ–°å¯¹è±¡äº†ã€‚","like_count":0},{"had_liked":false,"id":185655,"user_name":"Daiver","can_delete":false,"product_type":"c1","uid":1466447,"ip_address":"","ucode":"9B1A03AFBC79BC","user_header":"https://static001.geekbang.org/account/avatar/00/16/60/4f/db0e62b3.jpg","comment_is_top":false,"comment_ctime":1583656817,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583656817","product_id":100023901,"comment_content":"éƒ½ä¿è¯ä¸äº†ï¼Œä¸¤ä¸ªæ–¹æ³•æ¯æ¬¡éƒ½æ˜¯ä¸€æŠŠæ–°é”ï¼Œä¸å­˜åœ¨äº’æ–¥ï¼Œæ”¹æˆthiså°±å¥½äº†ï¼Œæˆ–è€…object ç”¨å•ä¾‹å®ç°ã€‚","like_count":0},{"had_liked":false,"id":183701,"user_name":"HungerW","can_delete":false,"product_type":"c1","uid":1022091,"ip_address":"","ucode":"75689EDF0F8E7F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/98/8b/7a691d53.jpg","comment_is_top":false,"comment_ctime":1583118008,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583118008","product_id":100023901,"comment_content":"new Object()æ¯æ¬¡éƒ½åˆ›å»ºä¸€ä¸ªæ–°é”ï¼Œèµ·ä¸åˆ°ä¿æŠ¤ä¸´ç•Œèµ„æºä½œç”¨ã€‚å¯è§æ€§å’ŒåŸå­æ€§é—®é¢˜ä¸€ä¸ªéƒ½ä¸èƒ½è§£å†³ã€‚","like_count":0},{"had_liked":false,"id":180362,"user_name":"è¤š","can_delete":false,"product_type":"c1","uid":1387363,"ip_address":"","ucode":"C2AA96A2E0F55F","user_header":"https://static001.geekbang.org/account/avatar/00/15/2b/63/ea02349c.jpg","comment_is_top":false,"comment_ctime":1582267685,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582267685","product_id":100023901,"comment_content":"æˆ‘å¯¹synchronizedç†è§£æ˜¯ï¼šä¸€ä¸ªå¯¹è±¡åªæœ‰ä¸€æŠŠé’¥åŒ™ï¼ŒåŒä¸€æ—¶é—´ï¼Œåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è·å¾—è¿™ä¸ªé’¥åŒ™ï¼Œå»æ‰§è¡Œè¢«è¿™ä¸ªå¯¹è±¡é”ä½çš„ä»£ç å—ï¼ˆæ‰§è¡Œè¿‡ç¨‹ä¸­ç”¨åˆ°çš„èµ„æºä¼šç›´æ¥ä»å†…å­˜ä¸­è·å–ï¼Œä¸ä¼šä»cpuå†…å­˜ä¸­è·å–ï¼‰ï¼›æ‰§è¡Œå®Œä»£ç å—åä¼šé‡Šæ”¾é’¥åŒ™ï¼ˆæŠŠæ‰§è¡Œç»“æœå¼ºåˆ¶åˆ·åˆ°å†…å­˜ï¼‰ï¼Œè¿›è¡Œä¸‹ä¸€è½®çº¿ç¨‹å¯¹é’¥åŒ™çš„æŠ¢å ï¼›ä¸çŸ¥å¯¹å¦ï¼Ÿæ„Ÿè§‰é”é”ä½çš„æ˜¯ä»£ç å—å¹¶æ²¡æœ‰é”ä½èµ„æºï¼Ÿ","like_count":0},{"had_liked":false,"id":170061,"user_name":"èŠ±å­ç¿","can_delete":false,"product_type":"c1","uid":1073674,"ip_address":"","ucode":"A687441DC6894F","user_header":"https://static001.geekbang.org/account/avatar/00/10/62/0a/26d00cb9.jpg","comment_is_top":false,"comment_ctime":1578500214,"is_pvip":false,"replies":[{"id":"67116","content":"å¦‚æœç¨‹åºä¸å¯¹å¼‚å¸¸è¿›è¡Œå¤„ç†ï¼Œé‚£å°±æ²¡æ‹›äº†ï¼Œäº’æ–¥é”åªæ˜¯æä¾›ä¿è¯åŸå­æ€§çš„èƒ½åŠ›ï¼Œç”¨ä¸å¥½è¿˜æ˜¯ä¼šæœ‰é—®é¢˜çš„ã€‚è‡³äºå´©æºƒï¼Œå°±è°ˆä¸ä¸ŠåŸå­æ€§äº†","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1579438257,"ip_address":"","comment_id":170061,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578500214","product_id":100023901,"comment_content":"è€å¸ˆæœ‰ä¸ªç–‘é—®ï¼Œéº»çƒ¦å¸®å¿™è§£ç­”ä¸€ä¸‹ï¼š<br>äº’æ–¥é”èƒ½å¤Ÿä¿è¯â€œåŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œâ€ï¼Œå³åœ¨ä¸´ç•ŒåŒºå†…å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹æ˜¯äº’æ–¥çš„ï¼Œè€Œäº’æ–¥æ€§å¦‚ä½•èƒ½æ¨å¯¼å‡ºåŸå­æ€§å‘¢ï¼Ÿ<br>1 å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹æ¶‰åŠå¤šæ¡æŒ‡ä»¤(01æ–‡ç« å·²ç»è¯´æ˜)ï¼Œå¦‚æœåœ¨æ‰§è¡ŒæŸæ¡æŒ‡ä»¤çš„è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸ï¼Œ<br>é‚£å¦‚ä½•èƒ½å¤Ÿä¿è¯å¯¹å…±äº«å˜é‡ä¿®æ”¹çš„åŸå­æ€§(ä¸€ä¸ªæˆ–å¤šä¸ªæ“ä½œåœ¨CPUæ‰§è¡Œè¿‡ç¨‹ä¸­ä¸è¢«ä¸­æ–­çš„ç‰¹æ€§)<br><br>2 å¦‚æœåœ¨ä¸´ç•ŒåŒºå†…å¯¹å¤šä¸ªå…±äº«å˜é‡çš„ä¿®æ”¹ï¼Œåœ¨ä¿®æ”¹å®Œä¸€ä¸ªä¸´æ—¶å˜é‡å‘ç”Ÿå¼‚å¸¸æˆ–å´©æºƒï¼Œ<br>å¦‚ä½•èƒ½å¤Ÿä¿è¯å¯¹å¤šä¸ªå…±äº«å˜é‡ä¿®æ”¹çš„åŸå­æ€§","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480826,"discussion_content":"å¦‚æœç¨‹åºä¸å¯¹å¼‚å¸¸è¿›è¡Œå¤„ç†ï¼Œé‚£å°±æ²¡æ‹›äº†ï¼Œäº’æ–¥é”åªæ˜¯æä¾›ä¿è¯åŸå­æ€§çš„èƒ½åŠ›ï¼Œç”¨ä¸å¥½è¿˜æ˜¯ä¼šæœ‰é—®é¢˜çš„ã€‚è‡³äºå´©æºƒï¼Œå°±è°ˆä¸ä¸ŠåŸå­æ€§äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579438257,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168838,"user_name":"Qualifor","can_delete":false,"product_type":"c1","uid":1658706,"ip_address":"","ucode":"8F42453286719C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJeQVzYNLVuOv8IuxydsXuVXEUoqLmN0vpkiceZuU26KPOt05xuxCSnsbkgBu4q9qmibRfTOvCiaPGJg/132","comment_is_top":false,"comment_ctime":1578196376,"is_pvip":false,"replies":[{"id":"65464","content":"åŸå­æ€§åªä¿è¯addoneæ–¹æ³•è‡ªå·±æ˜¯åŸå­çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œè¿™ä¸ªæ–¹æ³•ï¼Œèƒ½ä¿è¯åŸå­æ€§ï¼Œå…¶ä»–çš„ä¿è¯ä¸äº†ã€‚å»ºè®®ç›´æ¥ç”¨hbè§„åˆ™æ¥æ¨å¯¼å¯è§æ€§ï¼Œä¸è¦è€ƒè™‘åˆ·ç¼“å­˜çš„æ€è·¯ï¼Œé‚£ä¸ªæ˜¯jvmçš„å®ç°ï¼Œå¯èƒ½è¿™ä¸ªç‰ˆæœ¬å¯¹ï¼Œä¸‹ä¸ªç‰ˆæœ¬å°±æ”¹äº†ã€‚ä½†æ˜¯hbè§„åˆ™ä¸ä¼šå˜ï¼Œæ‰€æœ‰ç‰ˆæœ¬éƒ½éµå®ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1578208183,"ip_address":"","comment_id":168838,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578196376","product_id":100023901,"comment_content":"è€å¸ˆï¼Œé’ˆå¯¹é™ˆååŒå­¦çš„è¯„è®ºæˆ‘æƒ³è¯·æ•™ä¸¤ä¸ªé—®é¢˜ï¼š<br>1ï¼šâ€œå¯¹ä¸€ä¸ªé”è§£é”  Happens-Before åç»­å¯¹è¿™ä¸ªé”çš„åŠ é”â€è¿™å¥è¯å°±æ˜¯é™ˆååŒå­¦æåˆ°çš„â€œsynchronizedè§£é”ä¹‹åä¼šå¼ºåˆ¶å…¶å®ƒCPUå¼ºåˆ¶åˆ·æ–°ç¼“å­˜,ç„¶åä»å†…å­˜é‡Œè¯»å–æœ€æ–°çš„å€¼â€çš„ä¾æ®å—ï¼Ÿå¦‚æœä¸æ˜¯çš„è¯ï¼Œé‚£è€å¸ˆæ‚¨æ”¯æŒä»–è¿™ç§è¯´æ³•æ˜¯åŸºäºä»€ä¹ˆå‘¢ï¼Ÿå¦‚æœæ˜¯æˆ‘åˆšåˆšè¯´çš„é‚£ä¸ªä¾æ®ï¼Œé‚£å¦‚æœåˆ«çš„çº¿ç¨‹ä¸è°ƒç”¨ synchronized æ–¹æ³•ï¼Œä¹Ÿå°±ä¸è¿›è¡ŒåŠ é”ï¼Œå°±æ„ä¸æˆâ€œå¯¹ä¸€ä¸ªé”è§£é”  Happens-Before åç»­å¯¹è¿™ä¸ªé”çš„åŠ é”â€çš„æ¡ä»¶ï¼Œé‚£è¿˜ä¼šåˆ·æ–° CPU ç¼“å­˜å—ï¼Ÿ<br>2ï¼šè¿˜æœ‰å°±æ˜¯addOne()æ–¹æ³•ä¸æ˜¯åŸå­æ“ä½œï¼Œvalue += 1ï¼Œç»“åˆæ‚¨ä¹‹å‰è¯¾çš„å†…å®¹å®ƒæ˜¯æœ‰ä¸‰æ­¥æ“ä½œ<br>    2.1ï¼šæŒ‡ä»¤ 1ï¼šé¦–å…ˆï¼Œéœ€è¦æŠŠå˜é‡ value ä»å†…å­˜åŠ è½½åˆ° CPU çš„å¯„å­˜å™¨<br>    2.2ï¼šæŒ‡ä»¤ 2ï¼šä¹‹åï¼Œåœ¨å¯„å­˜å™¨ä¸­æ‰§è¡Œ +1 æ“ä½œï¼›<br>    2.3ï¼šæŒ‡ä»¤ 3ï¼šæœ€åï¼Œå°†ç»“æœå†™å…¥å†…å­˜ï¼ˆç¼“å­˜æœºåˆ¶å¯¼è‡´å¯èƒ½å†™å…¥çš„æ˜¯ CPU ç¼“å­˜è€Œä¸æ˜¯å†…å­˜ï¼‰<br>å¦‚æœåªè¿›è¡Œåˆ°ç¬¬äºŒæ­¥æˆ–è€…å“ªæ€•è¿›è¡Œåˆ°äº†ç¬¬ä¸‰æ­¥ï¼Œå®ƒä¹Ÿåªä¼šå†™å…¥å½“å‰ CPU ç¼“å­˜ï¼Œè€Œå¦‚æœæ­¤æ—¶å½“å‰ CPU æ—¶é—´ç‰‡å°±ä½¿ç”¨å®Œäº†ï¼Œå°±éœ€è¦çº¿ç¨‹åˆ‡æ¢ï¼Œé‚£ä¹ˆæ­¤æ—¶è§£é”æ“ä½œè¿˜æ²¡æœ‰å®Œæˆï¼Œé‚£ä¹ˆå…¶å®ƒ CPU å°±ä¸ä¼šå¼ºåˆ¶åˆ·æ–°ç¼“å­˜ï¼Œå¦‚æœæ­¤æ—¶å…¶å®ƒ CPU è°ƒç”¨ä¸åŠ é”çš„  get æ–¹æ³•ï¼Œ é‚£è¿™ä¸æ˜¯è¿˜æ˜¯å­˜åœ¨å¯è§æ€§çš„é—®é¢˜å—ï¼Ÿ<br>å¹¶å‘æ–¹é¢æ–°æ‰‹ï¼Œå¦‚æœæé—®çš„æœ‰é—®é¢˜è¿˜è¯·è§è°…ï¼Œå¸Œæœ›è€å¸ˆæŠ½æ—¶é—´èƒ½è§£ç­”ä¸€ä¸‹ï¼Œéå¸¸æ„Ÿè°¢","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480350,"discussion_content":"åŸå­æ€§åªä¿è¯addoneæ–¹æ³•è‡ªå·±æ˜¯åŸå­çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œè¿™ä¸ªæ–¹æ³•ï¼Œèƒ½ä¿è¯åŸå­æ€§ï¼Œå…¶ä»–çš„ä¿è¯ä¸äº†ã€‚å»ºè®®ç›´æ¥ç”¨hbè§„åˆ™æ¥æ¨å¯¼å¯è§æ€§ï¼Œä¸è¦è€ƒè™‘åˆ·ç¼“å­˜çš„æ€è·¯ï¼Œé‚£ä¸ªæ˜¯jvmçš„å®ç°ï¼Œå¯èƒ½è¿™ä¸ªç‰ˆæœ¬å¯¹ï¼Œä¸‹ä¸ªç‰ˆæœ¬å°±æ”¹äº†ã€‚ä½†æ˜¯hbè§„åˆ™ä¸ä¼šå˜ï¼Œæ‰€æœ‰ç‰ˆæœ¬éƒ½éµå®ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578208183,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166030,"user_name":"é˜¿U","can_delete":false,"product_type":"c1","uid":1171359,"ip_address":"","ucode":"161A8E74E0D612","user_header":"https://static001.geekbang.org/account/avatar/00/11/df/9f/6e3e1b77.jpg","comment_is_top":false,"comment_ctime":1577366825,"is_pvip":false,"replies":[{"id":"63413","content":"å¤šæŠŠé”ä¸èƒ½ä¿æŠ¤ä¸€ä¸ªèµ„æºï¼Œä¸æ˜¯æ‰€æœ‰æƒ…å†µéƒ½é€‚ç”¨ã€‚ä¸è¿‡å·¥ä½œä¸­æŠŠå®ƒä½œä¸ºæœ€ä½³å®è·µä¸šä¸é”™","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1577445229,"ip_address":"","comment_id":166030,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577366825","product_id":100023901,"comment_content":"è€å¸ˆ è¿™ä¸€ç« å¯ä»¥ç®€å•æ€»ç»“æˆ ä¸€æŠŠé”å¯ä»¥ä¿æŠ¤ä¸€ä¸ªæˆ–å¤šä¸ªèµ„æºï¼Œä½†å¤šæŠŠé”ä¸èƒ½ä¿æŠ¤ä¸€ä¸ªèµ„æºï¼Œè¿™æ ·ç†è§£å¯¹ä¸å¯¹ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479361,"discussion_content":"å¤šæŠŠé”ä¸èƒ½ä¿æŠ¤ä¸€ä¸ªèµ„æºï¼Œä¸æ˜¯æ‰€æœ‰æƒ…å†µéƒ½é€‚ç”¨ã€‚ä¸è¿‡å·¥ä½œä¸­æŠŠå®ƒä½œä¸ºæœ€ä½³å®è·µä¸šä¸é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577445229,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165968,"user_name":"é¥é¥æ— å¦»","can_delete":false,"product_type":"c1","uid":1251243,"ip_address":"","ucode":"30A765B411D059","user_header":"https://static001.geekbang.org/account/avatar/00/13/17/ab/c0235b70.jpg","comment_is_top":false,"comment_ctime":1577352605,"is_pvip":false,"replies":[{"id":"63434","content":"æ˜¯çš„ï¼Œå¯é‡å…¥","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1577454852,"ip_address":"","comment_id":165968,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577352605","product_id":100023901,"comment_content":"è€å¸ˆé—®ä¸‹ï¼Œåœ¨è¿™æ®µä»£ç ä¸­è¯´æ˜¯ä¸ºäº†ä¿è¯å¯è§æ€§ï¼Œç»™getæ–¹æ³•ä¹ŸåŠ äº†synã€‚æåˆ°get() å’Œ addOne() ä¹Ÿæ˜¯äº’æ–¥çš„ã€‚è¿™ä¸ªäº’æ–¥æŒ‡çš„æ˜¯ä¸åŒçº¿ç¨‹ä¸­çš„å§ï¼ŒåŒä¸€ä¸ªçº¿ç¨‹Aæ‹¿åˆ°é”è°ƒaddæ–¹æ³•ï¼Œè¿˜èƒ½è°ƒgetæ–¹æ³•å§åº”è¯¥ï¼Œsynæ˜¯å±äºå¯é‡å…¥çš„é”å§ã€‚<br>class SafeCalc {<br>  long value = 0L;<br>  synchronized long get() {<br>    return value;<br>  }<br>  synchronized void addOne() {<br>    value += 1;<br>  }<br>}","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479333,"discussion_content":"æ˜¯çš„ï¼Œå¯é‡å…¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577454852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165216,"user_name":"ä¹¾å¤ç¬é—´","can_delete":false,"product_type":"c1","uid":1683130,"ip_address":"","ucode":"15BDCF29CBF8EB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLWIUF31dicT1YBTxWNX0uvbMxl15UwdlwFicGhNo0DsQ7CbM6k16EQxK7bwSMcicLGMdYto4jGPTvrg/132","comment_is_top":false,"comment_ctime":1577180869,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577180869","product_id":100023901,"comment_content":"æ˜¯æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºæ‰€çš„ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡","like_count":0},{"had_liked":false,"id":164489,"user_name":"æ›‰æ¥“","can_delete":false,"product_type":"c1","uid":1607988,"ip_address":"","ucode":"E2B4C10FC4DAB2","user_header":"https://static001.geekbang.org/account/avatar/00/18/89/34/758bd3ab.jpg","comment_is_top":false,"comment_ctime":1577007780,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577007780","product_id":100023901,"comment_content":"æœ¬æ¥æ˜¯çœ‹çš„ç¬¬ä¸‰æ–¹çš„èµ„æ–™ï¼Œå‘ç°è¯„è®ºå¤šå¤§ç¥åï¼Œæœæ–­ä¹°è¯¾ç¨‹","like_count":0},{"had_liked":false,"id":163883,"user_name":"CalanceHao","can_delete":false,"product_type":"c1","uid":1401137,"ip_address":"","ucode":"068B4AC4D1D402","user_header":"https://static001.geekbang.org/account/avatar/00/15/61/31/211ac1a9.jpg","comment_is_top":false,"comment_ctime":1576818257,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576818257","product_id":100023901,"comment_content":"Hmm... è™½ç„¶è¿˜æ²¡å®æ“ææ‡‚ç©¶ç«Ÿæ€ä¹ˆå›äº‹ ä½†åº”è¯¥æ˜¯ä¸è¡Œçš„ å› ä¸ºè®¡æ•°å™¨çš„æœ€ä½³å®è·µä¸æ˜¯AtomicIntegerå˜›ğŸ˜œæŠ•æœºå–å·§çš„æŠ¢ç­”<br>ç­‰å›å¤´è¦è®¤çœŸæ“ä½œä¸€ä¸‹ï¼Œåˆ·ä¸€åˆ·ç•™è¨€åŒºï¼Œéšä¾¿ä¸€æ‰«çœ‹èµ·æ¥éƒ½å¾ˆé«˜çº§å•ŠğŸ‘ğŸ»","like_count":0},{"had_liked":false,"id":157003,"user_name":"Fortune","can_delete":false,"product_type":"c1","uid":1508654,"ip_address":"","ucode":"6B9465AC996523","user_header":"https://static001.geekbang.org/account/avatar/00/17/05/2e/5a6b6b6e.jpg","comment_is_top":false,"comment_ctime":1575011446,"is_pvip":false,"replies":[{"id":"65940","content":"å°±åº”è¯¥æ˜¯1ï¼Œä¸¤ä¸ªçº¿ç¨‹æ“ä½œä¸¤ä¸ªå¯¹è±¡ï¼Œä¸¤ä¸ªå¯¹è±¡é‡Œå„æœ‰è‡ªå·±çš„value","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1578488879,"ip_address":"","comment_id":157003,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1575011446","product_id":100023901,"comment_content":"public class A implements Runnable {<br>    static A instance1 = new A;<br>    static A instance2 = new A;<br>    long value = 0L;<br><br>    @Override<br>    public void run() {<br>        addOne();<br>        getValue();<br>    }<br>    public  synchronized long addOne() {<br>        return value+=1;<br>    }<br>    public long getValue() {<br>        System.out.println(Thread.currentThread().getName()+&quot;:value=&quot;+value);<br>        return value;<br>    }<br><br>    public static void main(String[] args) {<br>        Thread t1 = new Thread(instance1);<br>        Thread t2 = new Thread(instance2);<br>        t1.start();<br>        t2.start();<br>è¿™æ ·å†™æœ‰é—®é¢˜å—ï¼Ÿè¾“å‡ºçš„valueéƒ½æ˜¯1ï¼Œæ˜¯ä¸æ˜¯å“ªé‡Œé”™äº†","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476300,"discussion_content":"å°±åº”è¯¥æ˜¯1ï¼Œä¸¤ä¸ªçº¿ç¨‹æ“ä½œä¸¤ä¸ªå¯¹è±¡ï¼Œä¸¤ä¸ªå¯¹è±¡é‡Œå„æœ‰è‡ªå·±çš„value","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578488879,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":152973,"user_name":"Eleven","can_delete":false,"product_type":"c1","uid":1168452,"ip_address":"","ucode":"FB4A0C8CA732BE","user_header":"https://static001.geekbang.org/account/avatar/00/11/d4/44/0ec958f4.jpg","comment_is_top":false,"comment_ctime":1574132195,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574132195","product_id":100023901,"comment_content":"æˆ‘è§‰å¾—ä¸èƒ½ï¼Œå› ä¸ºä¸¤ä¸ªä»£ç å—ä¸­çš„synchronizedä½¿ç”¨äº†ä¸å¯¹çš„é”å¯¹è±¡ï¼Œå¯¹äºvalueçš„è®¿é—®å¹¶ä¸èƒ½å½¢æˆäº’æ–¥å…³ç³»ã€‚","like_count":0},{"had_liked":false,"id":148872,"user_name":"æœ•çˆ±å¾å¦ƒ","can_delete":false,"product_type":"c1","uid":1733692,"ip_address":"","ucode":"B10EB69934F9E2","user_header":"https://static001.geekbang.org/account/avatar/00/1a/74/3c/da79d2a1.jpg","comment_is_top":false,"comment_ctime":1573097973,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573097973","product_id":100023901,"comment_content":"å¯¹äºæ€è€ƒé¢˜ï¼š<br>synchronized (new Object())ï¼Œä¸¤ä¸ªéƒ½æ˜¯è¿™æ ·çš„æ“ä½œï¼Œè¯´æ˜åŠ é”çš„å¯¹è±¡ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥ï¼Œä¼šå‡ºç°å¹¶å‘çš„é—®é¢˜","like_count":0},{"had_liked":false,"id":148871,"user_name":"Fortune","can_delete":false,"product_type":"c1","uid":1508654,"ip_address":"","ucode":"6B9465AC996523","user_header":"https://static001.geekbang.org/account/avatar/00/17/05/2e/5a6b6b6e.jpg","comment_is_top":false,"comment_ctime":1573097602,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573097602","product_id":100023901,"comment_content":"æ¯æ¬¡æ‰§è¡Œæ–¹æ³•ï¼Œéƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼ŒåŠ ä¸€æŠŠé”ï¼Œæ‰€ä»¥åŠ é”æ²¡ä»€ä¹ˆä½œç”¨äº†ï¼Œè€å¸ˆè®²çš„ä¾‹å­ç†è§£synchronizedæ˜¯å¾ˆå¥½çš„ï¼Œä½†æ˜¯æ„Ÿè§‰å¯¹çŸ¥è¯†ç‚¹æ€»ç»“è¿™å—ä¸æ˜¯å¾ˆæ¸…æ™°å“ˆï¼Œæœ‰çš„éœ€è¦åœ¨è¯¾åé¢˜ä¸­æ‰èƒ½æ€»ç»“åˆ°å“ˆï¼Œæœ¬äººæ„šç¬¨ï¼Œæƒ³å¯¹çŸ¥è¯†ç‚¹è¿›è¡Œæ€»ç»“ï¼Œä½†æ€è·¯ä¸å¤Ÿæ¸…æ™°ã€‚","like_count":0},{"had_liked":false,"id":146317,"user_name":"å­éé±¼","can_delete":false,"product_type":"c1","uid":1621660,"ip_address":"","ucode":"020DA0784E728C","user_header":"https://static001.geekbang.org/account/avatar/00/18/be/9c/d21b7e17.jpg","comment_is_top":false,"comment_ctime":1572495992,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1572495992","product_id":100023901,"comment_content":"ä½¿ç”¨syncåŠ é”éé™æ€æ–¹æ³•ï¼Œé”å¯¹è±¡ä½¿ç”¨çš„æ˜¯å½“å‰å¯¹è±¡å®ä¾‹ï¼Œé‚£åœ¨å¤šçº¿ç¨‹çš„æ—¶å€™æ¯ä¸ªçº¿ç¨‹éƒ½ä¼šäº§ç”Ÿä¸åŒçš„thisï¼Œè¿™æ ·å°±ä¸ä¼šå­˜ç§Ÿé”ç«äº‰å…³ç³»ï¼Œé‚£æ˜¯æ€ä¹ˆä¿è¯å°†å¹¶è¡Œçº¿ç¨‹æ”¹æˆä¸²è¡Œçš„ï¼Œæ±‚è§£ã€‚æ˜¯ä¸æ˜¯å°±å¾—çœ‹synxæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1621660,"avatar":"https://static001.geekbang.org/account/avatar/00/18/be/9c/d21b7e17.jpg","nickname":"å­éé±¼","note":"","ucode":"020DA0784E728C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":43083,"discussion_content":"æˆ‘æ™“å¾—æˆ‘çš„ç–‘é—®äº†ï¼Œthisä»£è¡¨å½“å‰å®ä¾‹å¯¹è±¡ï¼Œåªè¦ä¿è¯ä¸åŒçš„çº¿ç¨‹æ“ä½œçš„æ˜¯åŒä¸€ä¸ªthiså°±è¡Œï¼Œä¸æ˜¯æ¯ä¸ªçº¿ç¨‹åˆ›å»ºä¸€ä¸ªthisğŸ˜ğŸ˜ã€‚ç„¶åè¿™æ ·å¤šçº¿ç¨‹å°±ä¼šäº§ç”Ÿç«äº‰å…³ç³»ï¼Œå°±æ˜¯è€å¸ˆæœ€åç•™çš„ç–‘é—®ï¼Œsyncé‡Œé¢new å¯¹è±¡ æ˜¯ä¸è¡Œçš„ï¼Œè¿™æ ·å¤šçº¿ç¨‹ä¸‹ï¼Œæ¯ä¸ªçº¿ç¨‹æŒæœ‰è‡ªå·±çš„é”ï¼Œä¸ä¼šå­˜åœ¨ç«äº‰æ’æ–¥å…³ç³»ã€‚ ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1572852319,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1621660,"avatar":"https://static001.geekbang.org/account/avatar/00/18/be/9c/d21b7e17.jpg","nickname":"å­éé±¼","note":"","ucode":"020DA0784E728C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":43084,"discussion_content":"è‡ªé—®è‡ªç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572852330,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141942,"user_name":"æ— è¨€çš„çº¦å®š","can_delete":false,"product_type":"c1","uid":1128953,"ip_address":"","ucode":"5E8046EB6B7956","user_header":"https://static001.geekbang.org/account/avatar/00/11/39/f9/acfb9a48.jpg","comment_is_top":false,"comment_ctime":1571272866,"is_pvip":false,"replies":[{"id":"54823","content":"æœ‰åŒºåˆ«ï¼Œå¯ä»¥çœ‹çœ‹javaè¯­è¨€åŸºç¡€","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1571284732,"ip_address":"","comment_id":141942,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571272866","product_id":100023901,"comment_content":"å¯¹äºä¸Šé¢çš„ä¾‹å­ï¼Œsynchronized ä¿®é¥°é™æ€æ–¹æ³•ç›¸å½“äº:<br><br>\t<br>class X {<br><br><br>\t<br>  &#47;&#47; ä¿®é¥°é™æ€æ–¹æ³•<br><br><br>\t<br>  synchronized(X.class) static void bar() {<br><br><br>\t<br>    &#47;&#47; ä¸´ç•ŒåŒº<br><br><br>\t<br>  }<br><br><br>\t<br>}<br>î˜“å¤åˆ¶ä»£ç <br><br>ä¿®é¥°éé™æ€æ–¹æ³•ï¼Œç›¸å½“äºï¼š<br><br>\t<br>class X {<br><br><br>\t<br>  &#47;&#47; ä¿®é¥°éé™æ€æ–¹æ³•<br><br><br>\t<br>  synchronized(this) void foo() {<br><br><br>\t<br>    &#47;&#47; ä¸´ç•ŒåŒº<br><br><br>\t<br>  }<br><br><br>\t<br>}<br><br><br>ç‹è€å¸ˆï¼Œè¿™ä¸ªä¾‹å­ä¸­çš„X.classå’Œthisæœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿthisä¸å°±æ˜¯Xçš„å¯¹è±¡å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470936,"discussion_content":"æœ‰åŒºåˆ«ï¼Œå¯ä»¥çœ‹çœ‹javaè¯­è¨€åŸºç¡€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571284732,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":138697,"user_name":"orange0729","can_delete":false,"product_type":"c1","uid":1519642,"ip_address":"","ucode":"5CCB7AE53A7DDD","user_header":"https://static001.geekbang.org/account/avatar/00/17/30/1a/606e09a4.jpg","comment_is_top":false,"comment_ctime":1570424439,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570424439","product_id":100023901,"comment_content":"è€å¸ˆï¼Œgetæ–¹æ³•å’Œaddoneæ–¹æ³•åˆ†åˆ«åŠ é”æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿgetæ–¹æ³•æ²¡æœ‰å¿…è¦åŠ é”å•Š","like_count":0},{"had_liked":false,"id":138093,"user_name":"yc","can_delete":false,"product_type":"c1","uid":1670122,"ip_address":"","ucode":"2E01505284DC4E","user_header":"https://static001.geekbang.org/account/avatar/00/19/7b/ea/a64f7822.jpg","comment_is_top":false,"comment_ctime":1570019592,"is_pvip":false,"replies":[{"id":"53092","content":"æˆ‘è§‰å¾—å¯¹äºåˆå­¦è€…ï¼Œæ²¡å¿…è¦çº ç»“è¯„è®ºçš„å†…å®¹ï¼Œå†…éƒ¨æ€ä¹ˆå®ç°æ²¡å¿…è¦æ·±ç©¶ï¼Œä¼šç”¨å³å¯ã€‚ç­‰å»ºç«‹èµ·çŸ¥è¯†ä½“ç³»åï¼Œçœ‹å…´è¶£å’Œå·¥ä½œéœ€æ±‚çœ‹æ˜¯å¦æœ‰å¿…è¦ç ”ç©¶å®ç°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1570023831,"ip_address":"","comment_id":138093,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1570019592","product_id":100023901,"comment_content":"çœ‹äº†è¯„è®ºåŒºï¼Œå‘ç°å¯¹äºsysné”çš„å¯¹è±¡è¿™äº›ä¸æ‡‚ï¼Œè¿™ä¸ªè¯¾ç¨‹æ˜¯è¿˜éœ€è¦ä»€ä¹ˆå…ˆå¤‡è¯¾ç¨‹å—ï¼Œç¼–è¯‘åŸç†ï¼ŸjvmåŸç†ï¼Ÿè¯·è€å¸ˆå›ç­”ä¸€ä¸‹ï¼Œè°¢è°¢ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469381,"discussion_content":"æˆ‘è§‰å¾—å¯¹äºåˆå­¦è€…ï¼Œæ²¡å¿…è¦çº ç»“è¯„è®ºçš„å†…å®¹ï¼Œå†…éƒ¨æ€ä¹ˆå®ç°æ²¡å¿…è¦æ·±ç©¶ï¼Œä¼šç”¨å³å¯ã€‚ç­‰å»ºç«‹èµ·çŸ¥è¯†ä½“ç³»åï¼Œçœ‹å…´è¶£å’Œå·¥ä½œéœ€æ±‚çœ‹æ˜¯å¦æœ‰å¿…è¦ç ”ç©¶å®ç°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570023831,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135641,"user_name":"B 612 æ˜Ÿçƒæ¥å®¢","can_delete":false,"product_type":"c1","uid":1113469,"ip_address":"","ucode":"CBFB05B1F1B178","user_header":"https://static001.geekbang.org/account/avatar/00/10/fd/7d/a4bda9ce.jpg","comment_is_top":false,"comment_ctime":1569232875,"is_pvip":false,"replies":[{"id":"52035","content":"javaæä¾›äº†ä¸“é—¨çš„åŸå­æ“ä½œå·¥å…·ç±»ï¼Œå¯ä»¥ä¸“é—¨è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯æ— é”æ–¹æ¡ˆéš¾åº¦å¤ªå¤§","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1569245520,"ip_address":"","comment_id":135641,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569232875","product_id":100023901,"comment_content":"æœ‰ä¸ªé—®é¢˜ï¼Œè€å¸ˆï¼Œè§£å†³åŸå­æ€§é—®é¢˜ä¸æ˜¯è¿˜æœ‰CASæ— é”æ“ä½œä¹ˆ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468284,"discussion_content":"javaæä¾›äº†ä¸“é—¨çš„åŸå­æ“ä½œå·¥å…·ç±»ï¼Œå¯ä»¥ä¸“é—¨è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯æ— é”æ–¹æ¡ˆéš¾åº¦å¤ªå¤§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569245520,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130064,"user_name":"éšå¿ƒè€Œè‡³","can_delete":false,"product_type":"c1","uid":1097836,"ip_address":"","ucode":"31866865255101","user_header":"https://static001.geekbang.org/account/avatar/00/10/c0/6c/29be1864.jpg","comment_is_top":false,"comment_ctime":1567382078,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567382078","product_id":100023901,"comment_content":"æ¯æ¬¡éƒ½æ˜¯ä¸€æŠŠæ–°é”ï¼Œä¸è¡Œçš„","like_count":0},{"had_liked":false,"id":128703,"user_name":"ç™½å°ç™½","can_delete":false,"product_type":"c1","uid":1400416,"ip_address":"","ucode":"143F1C8294818A","user_header":"https://static001.geekbang.org/account/avatar/00/15/5e/60/1c13626b.jpg","comment_is_top":false,"comment_ctime":1566952787,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566952787","product_id":100023901,"comment_content":"æ€è€ƒé¢˜æ˜¯ä¸æ˜¯æŠŠnew objectæ”¹æˆthiså°±å¯ä»¥äº†ï¼Ÿæ±‚å¤§ç¥ä»¬æŒ‡æ•™â€¦â€¦","like_count":0},{"had_liked":false,"id":128613,"user_name":"å°”å†¬æ©™","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1566914105,"is_pvip":false,"replies":[{"id":"47882","content":"CPUæœ‰å…³ä¸­æ–­çš„æŒ‡ä»¤","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1566996270,"ip_address":"","comment_id":128613,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566914105","product_id":100023901,"comment_content":"å¦‚ä½•ç¦æ­¢cpuä¸­æ–­","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465022,"discussion_content":"CPUæœ‰å…³ä¸­æ–­çš„æŒ‡ä»¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566996270,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127246,"user_name":"îˆ± è‡£é¦Ÿé£æ‰¬îˆ°","can_delete":false,"product_type":"c1","uid":1116188,"ip_address":"","ucode":"F2F882B7678055","user_header":"https://static001.geekbang.org/account/avatar/00/11/08/1c/ef15e661.jpg","comment_is_top":false,"comment_ctime":1566619029,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566619029","product_id":100023901,"comment_content":"ä½¿ç”¨synchronizedåŠ é”éœ€è¦æ³¨æ„çš„ç‚¹ï¼š<br>1ã€å•æ ¸CPUç¦æ­¢ä¸­æ–­ä¸ä¼šå¯¼è‡´åŸå­æ€§é—®é¢˜ï¼Œå¤šæ ¸CPUç¦æ­¢ä¸­æ–­ä¾ç„¶ä¼šæœ‰åŸå­æ€§é—®é¢˜ï¼›<br>2ã€è¦é”çš„å¯¹è±¡æ˜¯ä»€ä¹ˆï¼Ÿè¦ä¿æŠ¤çš„æ˜¯ä»€ä¹ˆï¼ˆå…±äº«å˜é‡ï¼‰ï¼Ÿ<br>3ã€é”å’Œè¦ä¿æŠ¤çš„å…±äº«å˜é‡æ˜¯1ï¼šNçš„å…³ç³»ï¼Œä¹Ÿå³ä¸€æŠŠé”å¯ä»¥ä¿æŠ¤å¤šä¸ªå…±äº«å˜é‡ï¼Œå¤šä¸ªé”ä¸èƒ½ä¿æŠ¤åŒä¸€ä¸ªå…±äº«å˜é‡ã€‚","like_count":0},{"had_liked":false,"id":127160,"user_name":"Thong2018","can_delete":false,"product_type":"c1","uid":1625515,"ip_address":"","ucode":"DA05A3B08D1DEA","user_header":"","comment_is_top":false,"comment_ctime":1566571008,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566571008","product_id":100023901,"comment_content":"é”å’Œé”å¯¹è±¡æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ","like_count":0},{"had_liked":false,"id":127159,"user_name":"Thong2018","can_delete":false,"product_type":"c1","uid":1625515,"ip_address":"","ucode":"DA05A3B08D1DEA","user_header":"","comment_is_top":false,"comment_ctime":1566570922,"is_pvip":false,"replies":[{"id":"47060","content":"å¯ä»¥æ‰¾çœ‹çœ‹jdké‡Œlockçš„ç”¨æ³•<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1566605177,"ip_address":"","comment_id":127159,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566570922","product_id":100023901,"comment_content":"å¯¹äºè¯¾åæ€è€ƒé¢˜ï¼Œæœ‰çš„äººè¯´æ˜¯&quot;è¦é”åŒä¸€ä¸ªå¯¹è±¡&quot;ï¼Œæœ‰çš„äººè¯´æ˜¯&quot;æ²¡æœ‰ç”¨åŒä¸€æŠŠé”&quot;ï¼Œæœ‰ç‚¹æ‡µï¼Œæˆ‘å°±æƒ³çŸ¥é“åˆ°åº•æ˜¯è°åœ¨é”è°å‘€ï¼Ÿè°æ˜¯åŠ¨ä½œçš„å‘å‡ºè€…ï¼Ÿè°åˆæ˜¯åŠ¨ä½œçš„æ‰¿å—è€…ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464348,"discussion_content":"å¯ä»¥æ‰¾çœ‹çœ‹jdké‡Œlockçš„ç”¨æ³•\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566605177,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126096,"user_name":"Geek_e08661","can_delete":false,"product_type":"c1","uid":1631281,"ip_address":"","ucode":"DFD60339814CA6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er8ok3W1JuxlK1eHjfylzhBwkFm8lkIr4KibzLic5YjonIXj4t9RNkKV0PBUZv1wPM0fwdIwib6pickGA/132","comment_is_top":false,"comment_ctime":1566312696,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566312696","product_id":100023901,"comment_content":"ä½œè€…å›å¤: 1. printlnçš„ä»£ç é‡Œé”çš„thisæŒ‡çš„æ˜¯ä½ çš„æ§åˆ¶å°ï¼Œè¿™ä¸ªé”è·Ÿä½ çš„ä»£ç æ²¡å…³ç³»ï¼Œè€Œä¸”printlné‡Œä¹Ÿæ²¡æœ‰å†™æ“ä½œï¼Œæ‰€ä»¥printlnä¸ä¼šå¯¼è‡´å¼ºåˆ·ç¼“å­˜ã€‚<br><br>æˆ‘è§‰å¾—æ˜¯å› ä¸ºprintlnäº§ç”Ÿäº†IOï¼ŒIOç›¸å¯¹CPUæ¥è¯´ï¼Œå¤ªæ…¢ï¼Œæ‰€ä»¥è¿™ä¸ªæœŸé—´å¤§æ¦‚ç‡çš„ä¼šæŠŠç¼“å­˜çš„å€¼å†™å…¥å†…å­˜ã€‚ä¹Ÿæœ‰å¯èƒ½è¿™ä¸ªçº¿ç¨‹è¢«è°ƒåº¦åˆ°äº†å…¶ä»–çš„CPUä¸Šï¼Œå‹æ ¹æ²¡æœ‰ç¼“å­˜ï¼Œæ‰€ä»¥åªèƒ½ä»å†…å­˜å–æ•°ã€‚ä½ è°ƒç”¨sleepï¼Œæ•ˆæœåº”è¯¥ä¹Ÿå·®ä¸å¤šã€‚<br><br>2. çº¿ç¨‹åˆ‡æ¢æ˜¾ç„¶ä¸è¶³ä»¥ä¿è¯å¯è§æ€§ï¼Œä¿è¯çš„å¯è§æ€§åªèƒ½é hbè§„åˆ™ã€‚<br><br>3. çº¿ç¨‹ç»“æŸåï¼Œä¸ä¸€å®šä¼šå¼ºåˆ·ç¼“å­˜ã€‚å¦åˆ™Joinçš„è§„åˆ™å°±æ²¡å¿…è¦äº†<br><br>å¹¶å‘é—®é¢˜æœ¬æ¥å°±æ˜¯å°æ¦‚ç‡çš„äº‹ä»¶ï¼Œå°¤å…¶æœ‰äº†IOæ“ä½œä¹‹åï¼Œæ¦‚ç‡å°±æ›´ä½äº†ã€‚<br>======================================================<br>è€å¸ˆå¥½ï¼Œé’ˆå¯¹å›å¤1ï¼Œæˆ‘è¿˜å­˜åœ¨ç–‘é—®ï¼Œå¦‚æœæ˜¯è¯´åˆ‡æ¢çš„cpuæ— ç¼“å­˜è¿˜å¯ä»¥ç†è§£ï¼Œ<br>1&gt;å‡å¦‚ä¸»çº¿ç¨‹åœ¨çº¿ç¨‹2è¿›è¡Œioæ“ä½œæ—¶ï¼Œå°†b=2åˆ·æ–°åˆ°ä¸»å†…å­˜ï¼Œçº¿ç¨‹2çš„cpuç¼“å­˜è¿˜æ˜¯b=1,é‚£ä¹ˆä»–æ€ä¹ˆçŸ¥é“ä¸»å†…å­˜è¢«æ›´æ–°äº†ã€‚<br>2&gt;å†åšä¸€ä¸ªå‡è®¾ï¼Œå‡å¦‚çº¿ç¨‹2å¯ä»¥çŸ¥é“ä¸»å†…å­˜æ›´æ–°ï¼Œé‚£ä¹ˆæ€ä¹ˆç¡®ä¿çº¿ç¨‹2åœ¨çº¿ç¨‹1æ›´æ–°å®Œbåˆ°ä¸»å†…å­˜ä¹‹åå†å»ä¸»å†…å­˜æ›´æ–°å€¼ï¼Œå¦‚æœåœ¨çº¿ç¨‹1æ›´æ–°ä¹‹å‰å»ä¸»å†…å­˜æ›´æ–°bï¼Œæ­¤æ—¶çš„bè¿˜æ˜¯ç­‰äº1ï¼Œé‚£ä¸å°±åœ¨çº¿ç¨‹2ä¸­æ²¡æœ‰b=2çš„æƒ…å†µï¼Œæœ›è§£ç­”","like_count":0},{"had_liked":false,"id":124311,"user_name":"ç»™å¿ƒæ¥å—å†°å—","can_delete":false,"product_type":"c1","uid":1063689,"ip_address":"","ucode":"7AFB56581782A2","user_header":"https://static001.geekbang.org/account/avatar/00/10/3b/09/2cf074a7.jpg","comment_is_top":false,"comment_ctime":1565857809,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1565857809","product_id":100023901,"comment_content":"çœ‹çš„å¥½ç—›è‹¦ï¼Œä¸å¤ªå¥½ç†è§£","like_count":0},{"had_liked":false,"id":117054,"user_name":"HUANGKAIHANG","can_delete":false,"product_type":"c1","uid":1430163,"ip_address":"","ucode":"F3871C5142AE52","user_header":"https://static001.geekbang.org/account/avatar/00/15/d2/93/9c58ce42.jpg","comment_is_top":false,"comment_ctime":1563960096,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563960096","product_id":100023901,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘çš„ç†è§£æœ‰æ²¡æœ‰é—®é¢˜ã€‚å½“addOneæ–¹æ³•åŠ ä¸Šsynchronizedå…³é”®å­—åï¼ŒåŠ é”æ—¶é”çš„æ˜¯thiså¯¹è±¡ï¼Œè¿™æ—¶å€™å…¶å®ƒçº¿ç¨‹ä¸èƒ½è°ƒç”¨this.getæ–¹æ³•å§ï¼Œè¿™ç®—ä¸ç®—é—´æ¥è¾¾æˆäº†äº’æ–¥ï¼Ÿï¼Ÿå¦‚æœæ˜¯çš„è¯ï¼Œé‚£ä¹ˆè¿™é‡Œçš„getæ–¹æ³•ä¸åŠ é”ä¹Ÿä¸ä¼šæœ‰å¹¶å‘é—®é¢˜ã€‚","like_count":0},{"had_liked":false,"id":116446,"user_name":"å¤©ä¸Šæ˜Ÿå¤šæœˆä¸äº®","can_delete":false,"product_type":"c1","uid":1283877,"ip_address":"","ucode":"A8CD6A7C094F0C","user_header":"https://static001.geekbang.org/account/avatar/00/13/97/25/8c35cc85.jpg","comment_is_top":false,"comment_ctime":1563851547,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563851547","product_id":100023901,"comment_content":"synchonizeä¸æ˜¯ä¼šåœ¨æ“ä½œå®Œæ¯•åå†™å›å†…å­˜å—ï¼Ÿåœ¨è¯»å–valueçš„æ—¶å€™åˆä¼šå»å†…å­˜ä¸­è¯»ï¼Œè·Ÿvolatileæœ‰ç±»ä¼¼è¯­ä¹‰ï¼Œä¸ºä»€ä¹ˆä¼šå‡ºç°ä¸å¯è§å‘¢","like_count":0},{"had_liked":false,"id":115489,"user_name":"æ‹¯æ•‘åœ°çƒå¥½ç´¯","can_delete":false,"product_type":"c1","uid":1339022,"ip_address":"","ucode":"7643439601EF4C","user_header":"https://static001.geekbang.org/account/avatar/00/14/6e/8e/5d309a85.jpg","comment_is_top":false,"comment_ctime":1563602259,"is_pvip":false,"replies":[{"id":"53888","content":"CPUä¼šåœ¨æŒ‡ä»¤æ‰§è¡Œå®Œä¼šè‡ªåŠ¨æ£€æµ‹ä¸­æ–­ï¼Œæ—¶é’Ÿä¸­æ–­ä¹Ÿæ˜¯ä¸­æ–­ã€‚é”çš„åµŒå¥—ä¸€å®šè¦æ…é‡","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1570707918,"ip_address":"","comment_id":115489,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563602259","product_id":100023901,"comment_content":"---æ€»ç»“---<br>1. é”æ˜¯å®ç°äº’æ–¥çš„æ‰‹æ®µä¹‹ä¸€ã€‚<br>2. åŠ é”å’Œè§£é”çš„è¿‡ç¨‹å°±æ˜¯å»ºç«‹æŸä¸ªé”å’Œå—ä¿æŠ¤èµ„æºçš„å…³è”å’Œç¡®å®šä¸´ç•ŒåŒºçš„è¿‡ç¨‹ï¼Œè¯¥å—ä¿æŠ¤èµ„æºæ‰€åœ¨çš„ä¸€æ®µæˆ–å¤šæ®µå¯èƒ½ä¼šè¢«å¤šçº¿ç¨‹è®¿é—®çš„ä»£ç æ®µå³æ˜¯éœ€è¦åŠ é”å’Œè§£é”çš„ä¸€ä¸ªæˆ–å¤šä¸ªä¸´ç•ŒåŒºã€‚<br>3. å—ä¿æŠ¤èµ„æºå’Œé”ä¹‹é—´çš„å…³è”å…³ç³»æ˜¯N:1çš„å…³ç³»ï¼Œå³ä¸€æŠŠé”å¯ä»¥ä¿æŠ¤å¤šä¸ªèµ„æºï¼Œä½†ä¸€ä¸ªèµ„æºä¸èƒ½ç”¨å¤šæŠŠé”æ¥ä¿æŠ¤ã€‚<br>4. é”è¦ç²¾å¿ƒé€‰æ‹©ï¼Œæ¯”å¦‚Stringå­—é¢é‡ä¸èƒ½ä½œä¸ºé”ï¼Œå¦åˆ™ä¼šå‡ºç°å¤§é‡æ­»é”ï¼Œéfinalçš„åŸŸä¸èƒ½ä½œä¸ºé”ï¼Œå¦åˆ™èµ·ä¸åˆ°æ•ˆæœç­‰ã€‚<br><br>---å¯å‘---<br>1. åœ¨æ€è€ƒå¹¶å‘é—®é¢˜æ—¶å¯ä»¥é€šè¿‡å•æ ¸çº¿ç¨‹åˆ‡æ¢å’Œå¤šæ ¸çº¿ç¨‹å¹¶è¡Œå¹¶ç»“åˆå¯è§æ€§ã€åŸå­æ€§ã€æœ‰åºæ€§è§’åº¦æ€è€ƒå¯èƒ½å­˜åœ¨çš„é—®é¢˜ã€‚<br><br>---é—®é¢˜---<br>1. è€å¸ˆæåˆ°çº¿ç¨‹åˆ‡æ¢æ—¶ä¾èµ–CPUä¸­æ–­çš„ï¼Œæˆ‘çŸ¥é“ä¸­æ–­ä¼šå¼•èµ·çº¿ç¨‹åˆ‡æ¢ï¼Œä½†æ˜¯åœ¨CPUè°ƒåº¦æ—¶ï¼Œå¦‚é‡‡ç”¨æ—¶é—´ç‰‡è½®è½¬ç®—æ³•æ—¶ï¼Œä¹Ÿæ˜¯ä¾èµ–äºä¸­æ–­æ¥è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢çš„å—ï¼Ÿæˆ–è€…è¯´ï¼Œåœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢çš„åŠ¨ä½œæ˜¯åœ¨åˆ¤æ–­æ—¶é—´ç‰‡è¾¾åˆ°åï¼Œé€šè¿‡ä¸­æ–­æŒ‡ä»¤ï¼Œè®©å½“å‰æŒ‡ä»¤è¿è¡Œåˆ°æŒ‡ä»¤å‘¨æœŸçš„ä¸­æ–­å‘¨æœŸæ—¶è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢çš„å—ï¼Ÿ<br>2. è€å¸ˆæåˆ°ä¸€ä¸ªèµ„æºä¸èƒ½ç”¨å¤šæŠŠé”æ¥ä¿æŠ¤ï¼Œä½†æˆ‘ä»¬åœ¨æ­»é”çš„ä¾‹ç¨‹ä¸­ç»å¸¸ä¼šè§åˆ°å¦‚åµŒå¥—sychronizedçš„åœºæ™¯ï¼Œè¿™ç§åœºæ™¯ä¸‹å¤§çš„sychronizedçš„é”ä¼¼ä¹ä¹Ÿé”ä½äº†å°çš„sychronizedä¸­çš„å…±äº«èµ„æºï¼Œè¿™ç§åœºæ™¯æ˜¯å¦å°±æ˜¯ä¸€ç§ä¸ä¼šåœ¨å®é™…ä¸­ä½¿ç”¨çš„Bad Practiceå‘¢ï¼Ÿ<br><br>è€å¸ˆå¯æŠ½ç©ºå›ç­”ï¼Œè‹¥æœ‰è¡¨è¾¾ä¸æ­£ç¡®ä¹‹å¤„ï¼Œä¹Ÿçƒ¦è¯·æŒ‡å‡ºï¼Œè°¢è°¢ï¼","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459131,"discussion_content":"CPUä¼šåœ¨æŒ‡ä»¤æ‰§è¡Œå®Œä¼šè‡ªåŠ¨æ£€æµ‹ä¸­æ–­ï¼Œæ—¶é’Ÿä¸­æ–­ä¹Ÿæ˜¯ä¸­æ–­ã€‚é”çš„åµŒå¥—ä¸€å®šè¦æ…é‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570707918,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113155,"user_name":"JM","can_delete":false,"product_type":"c1","uid":1444751,"ip_address":"","ucode":"940900318F4167","user_header":"https://static001.geekbang.org/account/avatar/00/16/0b/8f/9c27f3c6.jpg","comment_is_top":false,"comment_ctime":1562904058,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562904058","product_id":100023901,"comment_content":"è¿™æ‰æ˜ç™½ï¼Œsynchronizedé”è·Ÿèµ„æºçš„å…³ç³»","like_count":0},{"had_liked":false,"id":111621,"user_name":"é‚¢å®‡è¶…","can_delete":false,"product_type":"c1","uid":1105246,"ip_address":"","ucode":"3113F55E60ADE9","user_header":"https://static001.geekbang.org/account/avatar/00/10/dd/5e/ddbdde5a.jpg","comment_is_top":false,"comment_ctime":1562573893,"is_pvip":false,"replies":[{"id":"40629","content":"æ‚¨å®¢æ°”äº†ğŸ˜‚åŒæ ¸çš„CPUï¼Œä¸¤ä¸ªæ ¸å¯ä»¥åŒæ—¶æ‰§è¡Œä¸€æ¡æŒ‡ä»¤","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1562590304,"ip_address":"","comment_id":111621,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562573893","product_id":100023901,"comment_content":"åŒä¸€æ—¶åˆ»ï¼Œæœ‰å¯èƒ½æœ‰ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶åœ¨æ‰§è¡Œï¼Œä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œåœ¨ CPU-1ä¸Šï¼Œä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œåœ¨ CPU-2 ä¸Šï¼Œæ­¤æ—¶ç¦æ­¢ CPU ä¸­æ–­ï¼Œåªèƒ½ä¿è¯ CPU ä¸Šçš„çº¿ç¨‹è¿ç»­æ‰§è¡Œï¼Œå¹¶ä¸èƒ½ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œå¦‚æœè¿™ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å†™ long å‹å˜é‡é«˜ 32ä½çš„è¯ï¼Œé‚£å°±æœ‰å¯èƒ½å‡ºç°æˆ‘ä»¬å¼€å¤´æåŠçš„è¯¡å¼‚ Bug äº†ã€‚<br>æ•¬çˆ±çš„è€å¸ˆ   ä¸ºä»€ä¹ˆå†™longå‹å˜é‡é«˜32ä½ä¼š2ä¸ªçº¿ç¨‹ åŒæ—¶å†™å‘¢<br><br><br><br>","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457391,"discussion_content":"æ‚¨å®¢æ°”äº†ğŸ˜‚åŒæ ¸çš„CPUï¼Œä¸¤ä¸ªæ ¸å¯ä»¥åŒæ—¶æ‰§è¡Œä¸€æ¡æŒ‡ä»¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562590304,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107903,"user_name":"Mr.é’§ğŸ‘»","can_delete":false,"product_type":"c1","uid":1249939,"ip_address":"","ucode":"D781E030E79245","user_header":"https://static001.geekbang.org/account/avatar/00/13/12/93/3470fc43.jpg","comment_is_top":false,"comment_ctime":1561631584,"is_pvip":false,"replies":[{"id":"39044","content":"ç¬¬äºŒéƒ¨åˆ†ä¼šä»‹ç»","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1561633750,"ip_address":"","comment_id":107903,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561631584","product_id":100023901,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæƒ³è¯·æ•™ä¸€ä¸ªé—®é¢˜ã€‚åœ¨forå¾ªç¯ä¸­ï¼Œä½¿ç”¨çº¿ç¨‹æ± çš„executeæ–¹å¼å¼€å¯10ä¸ªçº¿ç¨‹ã€‚ç„¶åä¸»çº¿ç¨‹è°ƒç”¨joinæ–¹æ³•ã€‚ä½†æ˜¯åœ¨å­çº¿ç¨‹éƒ½å®Œæˆåï¼Œä¸»çº¿ç¨‹å¹¶æ²¡æœ‰è¢«å”¤é†’ã€‚è¯·é—®è¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿè¦æ€ä¹ˆè§£å†³å‘¢ï¼Ÿä¸»çº¿ç¨‹èƒ½å¦ç›‘å¬å­çº¿ç¨‹å®Œæˆåï¼Œè‡ªåŠ¨å”¤é†’å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455737,"discussion_content":"ç¬¬äºŒéƒ¨åˆ†ä¼šä»‹ç»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561633750,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107475,"user_name":"a(à¹‘â‰–à¸´Ù¼â‰–à¸´)âœŒ","can_delete":false,"product_type":"c1","uid":1392431,"ip_address":"","ucode":"AEF9B5CA1605DF","user_header":"https://static001.geekbang.org/account/avatar/00/15/3f/2f/8513c4d3.jpg","comment_is_top":false,"comment_ctime":1561542091,"is_pvip":false,"replies":[{"id":"38896","content":"è¿™æ ·ç†è§£ä¹Ÿå¯¹","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1561550097,"ip_address":"","comment_id":107475,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1561542091","product_id":100023901,"comment_content":"ä¸€å¼€å§‹æˆ‘æƒ³ä¸é€šä¸ºä»€ä¹ˆè¦åœ¨getæ–¹æ³•åŠ é”ï¼Œåé¢çœ‹åˆ°ä¸€ä¸ªé™æ€æ–¹æ³•åŠ é”ï¼Œä¸€ä¸ªå®ä¾‹æ–¹æ³•åŠ é”ï¼Œå°±æœ‰ç‚¹æ˜ç™½æ˜¯å› ä¸ºæœ‰å¯èƒ½åŒä¸€çº¿ç¨‹æ—¢æœ‰getåˆæœ‰setæ“ä½œï¼Œéœ€è¦ä¿è¯è¿™ä¸ªå˜é‡å‰åä¸€è‡´ï¼Œæ‰€ä»¥getæ–¹æ³•ä¹Ÿéœ€è¦åŠ é”ï¼Œå¦åˆ™çº¿ç¨‹Aå‰é¢setäº†1ï¼Œåé¢çº¿ç¨‹Bæ”¹æˆ2ï¼ŒAå†è°ƒç”¨getè·å–çš„å°±æ˜¯2äº†ï¼Œæ˜¯è¿™æ ·ç†è§£å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455524,"discussion_content":"è¿™æ ·ç†è§£ä¹Ÿå¯¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561550097,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":100188,"user_name":"å°”å†¬æ©™","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1559473646,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559473646","product_id":100023901,"comment_content":"è€å¸ˆæˆ‘æƒ³é—®ä¸‹å¯¹ä¸€ä¸ªå¯¹è±¡ä¸Šé”çš„æ„ä¹‰åœ¨å“ªé‡Œï¼Ÿæ˜¯è®©ä¸€ä¸ªæ—¶å€™åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å»ä¿®æ”¹å¯¹è±¡çš„å†…å®¹ä¹ˆï¼Œå¯¹äºä½ æ–‡æœ«çš„é—®é¢˜ï¼Œåœ¨æ–¹æ³•é‡Œç»™å¯¹è±¡åŠ é”ï¼Œé‚£èµ„æºåŒºæ˜¯å“ªé‡Œï¼Œå¯¹è±¡æœ¬èº«è¿˜æ˜¯æ–¹æ³•é‡Œé¢å‘¢","like_count":0},{"had_liked":false,"id":99467,"user_name":"è½©è¾•è±†è±†","can_delete":false,"product_type":"c1","uid":1501713,"ip_address":"","ucode":"1FCFC608BD2B4A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eribUNj9ylC04DQdaM42AD0pLsVficcyTS3GdVBdibpnDrPSAo4ohNmBzRmiavOLuibCEj8wru0ibIJOZ1A/132","comment_is_top":false,"comment_ctime":1559223349,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559223349","product_id":100023901,"comment_content":"è¯¾åæ€è€ƒä¸­syncä¿®é¥°çš„ä»£ç å—ä¸å¯ä»¥ç”¨new Objectï¼Œå› ä¸ºæ¯æ¬¡åˆ›å»ºå¯¹è±¡æŒ‡é’ˆä¸åŒï¼Œå¤šçº¿ç¨‹è°ƒç”¨æ—¶è¿™ä¸ªé”å°±ä¸æ˜¯äº’æ–¥çš„äº†","like_count":0},{"had_liked":false,"id":98615,"user_name":"cricket1981","can_delete":false,"product_type":"c1","uid":1001715,"ip_address":"","ucode":"758262F5958DA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/f3/f1034ffd.jpg","comment_is_top":false,"comment_ctime":1559042411,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559042411","product_id":100023901,"comment_content":"è¯·é—®å¦‚ä½•å¯¹åŸºæœ¬ç±»å‹å¯¹è±¡åŠ synchronizedé”ï¼Ÿä¾‹å¦‚Long userId, String userNameç­‰ã€‚","like_count":0},{"had_liked":false,"id":98497,"user_name":"ä»Šå¤œç§‹é£å’Œ","can_delete":false,"product_type":"c1","uid":1434066,"ip_address":"","ucode":"453C8197FFC81D","user_header":"https://static001.geekbang.org/account/avatar/00/15/e1/d2/42ad2c87.jpg","comment_is_top":false,"comment_ctime":1559012056,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559012056","product_id":100023901,"comment_content":"è€å¸ˆå¥½ï¼Œ<br>å‰é¢è¯´çš„ç”¨voliate å˜é‡å¯ä»¥è¾¾åˆ°å†…å­˜çš„å¯è§æ€§,ç”¨ä¸ªæµ‹è¯•ç”¨ä¾‹æµ‹è¯•äº†ä¸€ä¸‹ï¼Œè·å–åˆ°çš„å€¼æ˜¯ç¼“å­˜çš„å€¼ï¼Œåˆ—å­æœ‰ç‚¹é•¿ï¼Œéº»çƒ¦è€å¸ˆå¸®åˆ†æåˆ†æï¼›<br>public class CountSumEntity {<br>    private   volatile int i;<br><br>    public synchronized  void  add (){<br>        i++;<br>        System.out.println(&quot;add-i=&quot;+i+&quot;-----threadid=&quot;+Thread.currentThread().getId());<br>    }<br><br>    public  int get(){<br>        System.out.println(&quot;i=&quot;+i+&quot;----threadid=&quot;+Thread.currentThread().getId());<br>        return i;<br>    }<br><br>    public static void main(String[] args) {<br>        CountSumEntity countSumEntity=new CountSumEntity();<br>        ExecutorService service =Executors.newFixedThreadPool(100);<br>        for (int i = 0; i &lt;1000 ; i++) {<br>            service.execute(new Runnable() {<br>                @Override<br>                public void run() {<br>                    countSumEntity.add();<br>                    countSumEntity.get();<br>                }<br>            });<br>        }<br>        service.shutdown();<br><br>    }<br><br>}<br>add-i=1-----threadid=11<br>add-i=2-----threadid=110<br>add-i=3-----threadid=109<br>i=1----threadid=11  &#47;&#47;è¿™ä¸ªç†è§£åº”è¯¥è¯»åˆ°çš„æ˜¯3 ï¼Œæ‰“å°å‡ºæ¥è¯»åˆ°çš„æ˜¯1<br>add-i=4-----threadid=108<br>i=3----threadid=109<br>add-i=5-----threadid=107","like_count":0},{"had_liked":false,"id":94458,"user_name":"Michael","can_delete":false,"product_type":"c1","uid":1435138,"ip_address":"","ucode":"2817C6A41C2E53","user_header":"https://static001.geekbang.org/account/avatar/00/15/e6/02/65a764fe.jpg","comment_is_top":false,"comment_ctime":1557816904,"is_pvip":false,"replies":[{"id":"33802","content":"ç¬¬ä¸€ç« è¯´çš„åŒé‡æ£€æŸ¥çš„ä¾‹å­ï¼Œä¹Ÿå¾ˆéš¾é‡ç°ï¼Œä½†ç†è®ºä¸Šè¿˜æ˜¯ä¼šå‡ºé—®é¢˜ã€‚æ¯”è¾ƒé è°±çš„æ–¹æ³•æ˜¯å†…å­˜æ¨¡å‹æ¨æ–­ä¸å‡ºæ¥çš„ï¼Œå°±è®¤ä¸ºæœ‰é—®é¢˜ã€‚å½“ç„¶è¿™ä¸ªæ¡ä»¶æ›´ä¸¥æ ¼ï¼Œæœ‰äº›ä¸ç¬¦åˆçš„ï¼Œä¹Ÿæ²¡é—®é¢˜ã€‚ä½ è¿™ä¸ªä¾‹å­ç”¨äº†joinï¼Œå±äºå¯ä»¥æ¨å¯¼å‡ºæ¥æ²¡é—®é¢˜çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1557843638,"ip_address":"","comment_id":94458,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557816904","product_id":100023901,"comment_content":"è€å¸ˆï¼Œä¾‹å­ä¸­è¯´synchronizedç”¨äºä¿è¯æ“ä½œçš„åŸå­æ€§ï¼Œå¦‚æœgetæ–¹æ³•æ²¡æœ‰synchronizedçš„è¯ä¸èƒ½ä¿è¯å¯è§æ€§ï¼Œä¸‹é¢çš„ä»£ç æ¨¡æ‹Ÿäº†å¤šçº¿ç¨‹æ“ä½œaddOneæ–¹æ³•ï¼Œä½†æ˜¯getæ–¹æ³•ä¸Šæœ‰æ²¡æœ‰synchronizedç»“æœéƒ½æ˜¯æ­£ç¡®çš„ã€‚ä¸ºä»€ä¹ˆæ²¡æœ‰å‡ºç°å¯è§æ€§é—®é¢˜å‘¢ï¼Ÿ<br>public class Test {<br><br>  private long c = 0;<br><br>  &#47;&#47;getCæ–¹æ³•æœ‰æ²¡æœ‰synchronizedè¿è¡Œç»“æœéƒ½ä¸€æ ·<br>  public long getC() {<br>    return c;<br>  }<br><br>  public synchronized void addOne() {<br>    c += 1;<br>    &#47;&#47;ä¸ºäº†æ¨¡æ‹Ÿé•¿æ—¶é—´å¤„ç†<br>    long i = 0;<br>    while (i &lt; 100000000L) {<br>      i++;<br>    }<br>  }<br><br>  public static void main(String[] args) throws InterruptedException {<br>    Test test = new Test();<br><br>    &#47;&#47;æ¯ä¸ªçº¿ç¨‹éƒ½åŠ 10<br>    Thread t1 = new Thread(()-&gt;{<br>      for (int i = 0; i &lt; 10; i++) {<br>        test.addOne();<br>      }<br>    });<br>    Thread t2 = new Thread(()-&gt;{<br>      for (int i = 0; i &lt; 10; i++) {<br>        test.addOne();<br>      }<br>    });<br>    Thread t3 = new Thread(()-&gt;{<br>      for (int i = 0; i &lt; 10; i++) {<br>        test.addOne();<br>      }<br>    });<br>    t1.start();<br>    t2.start();<br>    t3.start();<br><br>    t1.join();<br>    t2.join();<br>    t3.join();<br><br>    System.out.println(test.getC());<br>  }<br>}<br>","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450072,"discussion_content":"ç¬¬ä¸€ç« è¯´çš„åŒé‡æ£€æŸ¥çš„ä¾‹å­ï¼Œä¹Ÿå¾ˆéš¾é‡ç°ï¼Œä½†ç†è®ºä¸Šè¿˜æ˜¯ä¼šå‡ºé—®é¢˜ã€‚æ¯”è¾ƒé è°±çš„æ–¹æ³•æ˜¯å†…å­˜æ¨¡å‹æ¨æ–­ä¸å‡ºæ¥çš„ï¼Œå°±è®¤ä¸ºæœ‰é—®é¢˜ã€‚å½“ç„¶è¿™ä¸ªæ¡ä»¶æ›´ä¸¥æ ¼ï¼Œæœ‰äº›ä¸ç¬¦åˆçš„ï¼Œä¹Ÿæ²¡é—®é¢˜ã€‚ä½ è¿™ä¸ªä¾‹å­ç”¨äº†joinï¼Œå±äºå¯ä»¥æ¨å¯¼å‡ºæ¥æ²¡é—®é¢˜çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557843638,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91845,"user_name":"Niuniu","can_delete":false,"product_type":"c1","uid":1103084,"ip_address":"","ucode":"0F4C2CE8C076A2","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/ec/804c3900.jpg","comment_is_top":false,"comment_ctime":1557119575,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557119575","product_id":100023901,"comment_content":"åˆ«çš±çœ‰åŒå­¦çš„é—®é¢˜ï¼Œå…³äºæ˜¯ä¸æ˜¯è§¦å‘IOå¯¼è‡´å†…å­˜åˆ·æ–°ï¼Œå¯ä»¥å¾ˆå®¹æ˜“éªŒè¯ã€‚æŠŠclass Aé‡Œé¢æ‰€æœ‰ä¸Šçš„System.out.printlnå‘½ä»¤å…¨éƒ¨comment outï¼Œå†runä¸€éï¼Œä¼šå‘ç°ç¨‹åºè¿›å…¥æ­»å¾ªç¯ã€‚æ²¡æœ‰system.outã€‚printlnï¼Œæ²¡è§¦å‘ioï¼Œæ‰€ä»¥å†…å­˜æ²¡æœ‰åˆ·æ–°ã€‚","like_count":0},{"had_liked":false,"id":89711,"user_name":"bro.","can_delete":false,"product_type":"c1","uid":1124948,"ip_address":"","ucode":"D65283CD869804","user_header":"https://static001.geekbang.org/account/avatar/00/11/2a/54/c9990105.jpg","comment_is_top":false,"comment_ctime":1556247925,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556247925","product_id":100023901,"comment_content":"ä¸å¯ä»¥,ç›¸å½“äºä»€ä¹ˆéƒ½æ²¡åš,æ¯æ¬¡è¿›æ¥new objectå°±ç›¸å½“äºåˆ›å»ºä¸€æŠŠæ–°é”,è·Ÿå…¶ä»–çº¿ç¨‹å®Œå…¨æ— å…³,æ‰€æœ‰é”éƒ½æ˜¯ä¸€æ¬¡æ€§çš„,å¯ä»¥new object()ä½œä¸ºå…¨å±€å˜é‡å¼•ç”¨å³å¯","like_count":0},{"had_liked":false,"id":89030,"user_name":"æ—­ä¸œ(Frank)","can_delete":false,"product_type":"c1","uid":1024486,"ip_address":"","ucode":"176FA629800062","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a1/e6/50da1b2d.jpg","comment_is_top":false,"comment_ctime":1556067270,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556067270","product_id":100023901,"comment_content":"äº’æ–¥é”ï¼Œä¸€å®šè¦é”åŒä¸€å¯¹è±¡ã€‚å¦åˆ™å½¢åŒè™šè®¾","like_count":0},{"had_liked":false,"id":88422,"user_name":"åŠ‰å°å¼º","can_delete":false,"product_type":"c1","uid":1178474,"ip_address":"","ucode":"07FC2F0CDED869","user_header":"https://static001.geekbang.org/account/avatar/00/11/fb/6a/be4956a3.jpg","comment_is_top":false,"comment_ctime":1555917649,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555917649","product_id":100023901,"comment_content":"ä¸ºä»€ä¹ˆgetæ–¹æ³•è¦åŠ synchronizedä¿®é¥°  ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œaddæ–¹æ³•è¿˜æ²¡æ‰§è¡Œå®Œçš„æ—¶å€™ï¼Œè°ƒç”¨getæ–¹æ³•æ˜¾ç¤ºæ²¡æœ‰+1åçš„å€¼ä¸æ˜¯åº”è¯¥æ˜¯æ­£ç¡®çš„ä¹ˆï¼ŒåŠ ä¸Šè¿™ä¸ªsynchronizedçš„å¿…è¦æ€§æ˜¯ä»€ä¹ˆï¼Ÿæ²¡æœ‰ç†è§£","like_count":0},{"had_liked":false,"id":87401,"user_name":"xuery","can_delete":false,"product_type":"c1","uid":1027584,"ip_address":"","ucode":"F461B61BE06131","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ae/00/025f37e7.jpg","comment_is_top":false,"comment_ctime":1555584320,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1555584320","product_id":100023901,"comment_content":"ä¸æ­£ç¡®ã€‚æ¯æ¬¡åŠ çš„éƒ½æ˜¯ä¸åŒçš„é”ï¼Œèµ·ä¸åˆ°äº’æ–¥çš„ä½œç”¨","like_count":0},{"had_liked":false,"id":87137,"user_name":"qzm","can_delete":false,"product_type":"c1","uid":1117169,"ip_address":"","ucode":"0BFAB84A257081","user_header":"https://static001.geekbang.org/account/avatar/00/11/0b/f1/042df911.jpg","comment_is_top":false,"comment_ctime":1555516112,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555516112","product_id":100023901,"comment_content":"å›ç­”ä¸‹é—®é¢˜ï¼šæ— æ³•è§£å†³å¯è§æ€§è·ŸåŸå­æ€§ã€‚åŸå› æ˜¯synchronizedçš„åŠ é”çš„èµ„æº(å³ç›‘è§†å™¨)ä¸æ˜¯åŒä¸€ä¸ªï¼æ•…å°±æ— æ³•äº’æ–¥ã€‚","like_count":0},{"had_liked":false,"id":85784,"user_name":"åˆ˜æ¢¦èŒ¹","can_delete":false,"product_type":"c1","uid":1048298,"ip_address":"","ucode":"A7E893EFC876CD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fe/ea/d8b1909e.jpg","comment_is_top":false,"comment_ctime":1555232392,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555232392","product_id":100023901,"comment_content":"ä¸¤æŠŠé”ä¿æŠ¤åŒä¸€ä¸ªèµ„æºvalueï¼Œè¿™ä¸¤æŠŠé”ï¼Œé”å®šçš„å¯¹è±¡æ˜¯ä¸¤ä¸ªä¸åŒçš„Objectå®ä¾‹ï¼Œä¸´ç•ŒåŒºget()å’ŒaddOne()ä¸å…·æœ‰äº’æ–¥æ€§ï¼Œå› æ­¤ä¸ä¿è¯å¯è§æ€§ã€‚","like_count":0},{"had_liked":false,"id":85467,"user_name":"90é£","can_delete":false,"product_type":"c1","uid":1241944,"ip_address":"","ucode":"9F360D766FB606","user_header":"https://static001.geekbang.org/account/avatar/00/12/f3/58/1ef2fa55.jpg","comment_is_top":false,"comment_ctime":1555067359,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555067359","product_id":100023901,"comment_content":"ä¸ºå•¥ä¼šè¢«ç¼–è¯‘å™¨ä¼˜åŒ–æ‰ï¼Ÿ","like_count":0},{"had_liked":false,"id":85299,"user_name":"angelğŸ˜‡txyğŸ¤“","can_delete":false,"product_type":"c1","uid":1133702,"ip_address":"","ucode":"C0AEE0D8BAF7ED","user_header":"https://static001.geekbang.org/account/avatar/00/11/4c/86/3be94807.jpg","comment_is_top":false,"comment_ctime":1555031588,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1555031588","product_id":100023901,"comment_content":"é«˜æ‰‹å¤ªå¤š","like_count":0},{"had_liked":false,"id":84893,"user_name":"Vincent","can_delete":false,"product_type":"c1","uid":1135159,"ip_address":"","ucode":"CD8B84A57A6A0C","user_header":"https://static001.geekbang.org/account/avatar/00/11/52/37/13b4c8aa.jpg","comment_is_top":false,"comment_ctime":1554943506,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554943506","product_id":100023901,"comment_content":"åŒä¸€ä¸ªæ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä¸´ç•ŒåŒºä»£ç ï¼Œæ˜¯äº’æ–¥çš„å”¯ä¸€æ¡ä»¶","like_count":0},{"had_liked":false,"id":82869,"user_name":"WP","can_delete":false,"product_type":"c1","uid":1105956,"ip_address":"","ucode":"4A24C6CAA70220","user_header":"https://static001.geekbang.org/account/avatar/00/10/e0/24/4529f2a4.jpg","comment_is_top":false,"comment_ctime":1554341533,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554341533","product_id":100023901,"comment_content":"æ¯ç¯‡æ–‡ç« çœ‹å®Œä¹‹åï¼Œå†å›æ¥çœ‹èä¼šè´¯é€šï¼Œå¾ˆå¤šéƒ½ä¸²èµ·æ¥äº†ï¼Œå“ˆå“ˆï¼Œè€å¸ˆä¼˜ç§€","like_count":0},{"had_liked":false,"id":82521,"user_name":"Vincent","can_delete":false,"product_type":"c1","uid":1135159,"ip_address":"","ucode":"CD8B84A57A6A0C","user_header":"https://static001.geekbang.org/account/avatar/00/11/52/37/13b4c8aa.jpg","comment_is_top":false,"comment_ctime":1554248328,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554248328","product_id":100023901,"comment_content":"è¯¾åä¹ é¢˜å› ä¸ºæ¯ä¸ªæ–¹æ³•ä½¿ç”¨ä¸åŒçš„é”ï¼Œä¸èƒ½è¾¾åˆ°äº’æ–¥çš„æ•ˆæœï¼Œä¸èƒ½è§£å†³åŸå­æ€§é—®é¢˜ï¼ŒsyncåŒæ­¥å…³é”®å­—ï¼Œçº¿ç¨‹å¯¹syncé”çš„è§£é”happen-beforeäºåç»­çº¿ç¨‹å¯¹syncçš„åŠ é”ï¼Œå¯è§æ€§é—®é¢˜å¯ä»¥è§£å†³ã€‚<br><br>ä½†æ˜¯æœ‰ä¸€ä¸ªå°é—®é¢˜å°±æ˜¯syncä½¿ç”¨çš„æ˜¯ä¸¤ä¸ªä¸åŒçš„é”ï¼Œhappen-beforeè§„åˆ™å¯¹äºè¿™ç§æƒ…å†µè¿˜æœ‰æ•ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":82021,"user_name":"è™çˆ·","can_delete":false,"product_type":"c1","uid":1024907,"ip_address":"","ucode":"42E8339F183055","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a3/8b/e7389cf5.jpg","comment_is_top":false,"comment_ctime":1554104796,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1554104796","product_id":100023901,"comment_content":"å…ˆç»™ç»“æœï¼šget() å’ŒandOne()è¿™2ä¸ªæ–¹æ³•ï¼Œéƒ½ä¸èƒ½è§£å†³å¯è§æ€§å’ŒåŸå­æ€§é—®é¢˜ã€‚<br>å†æ¥å…·ä½“åˆ†æï¼šsynchronizedä»£ç å—ä¸­ï¼ŒåŠ çš„é”æ˜¯newçš„ä¸€ä¸ªObjectï¼Œè¿™ä¸ªé”æœ¬èº«å’Œèµ„æºæ²¡å•¥å…³ç³»ï¼Œæ‰€ä»¥æ— æ³•èµ·åˆ°åŠ é”çš„æ•ˆæœã€‚è€Œä¸”æ¯æ¬¡éƒ½æ˜¯new Object(),è¿™æ ·æ¯æ¬¡è¿›å…¥æ–¹æ³•æ—¶ï¼Œè¿™ä¸ªé”éƒ½ä¸ä¸€æ ·ï¼Œæ›´åŠ ä¸èƒ½èµ·åˆ°ä»»ä½•ä½œç”¨ã€‚","like_count":0},{"had_liked":false,"id":81548,"user_name":"^_^","can_delete":false,"product_type":"c1","uid":1088001,"ip_address":"","ucode":"EE5DAC03CFC2EE","user_header":"https://static001.geekbang.org/account/avatar/00/10/9a/01/1489f98d.jpg","comment_is_top":false,"comment_ctime":1553940097,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553940097","product_id":100023901,"comment_content":"new Object()æ¯æ¬¡è°ƒç”¨è¿”å›çš„æ˜¯å¯¹è±¡çš„å¼•ç”¨ï¼Œåœ°å€ä¸ä¸€æ ·ï¼Œç”¨åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå°±ä¼šå‡ºç°ä¸¤æŠŠé”é”åŒä¸€ä¸ªèµ„æºçš„é—®é¢˜ï¼Œå¥½æ¯”çƒåœºä¸­åŒä¸€ä¸ªåº§ä½ç¥¨é‡äº†","like_count":0},{"had_liked":false,"id":81054,"user_name":"Monster!","can_delete":false,"product_type":"c1","uid":1179101,"ip_address":"","ucode":"74F1D3BB5E3915","user_header":"https://static001.geekbang.org/account/avatar/00/11/fd/dd/baeda83e.jpg","comment_is_top":false,"comment_ctime":1553786455,"is_pvip":false,"replies":[{"id":"29456","content":"çœ‹ä¸åˆ°ä½ çš„æºç äº†ï¼Œåº”è¯¥æ˜¯æœ‰å¹¶å‘é—®é¢˜äº†ï¼Œä½ çš„æœŸæœ›éœ€è¦æ­£ç¡®çš„åŒæ­¥<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1553833681,"ip_address":"","comment_id":81054,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553786455","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæ‚¨åˆšæ‰ç»™æˆ‘å›å¤è¯´ï¼Œä¸¤ä¸ªçº¿ç¨‹è¿˜æ²¡æ¥å¾—åŠè·‘å·²ç»æ‰§è¡Œreturnè¯­å¥äº†ï¼Œä½†æ˜¯æˆ‘åˆšæ‰è¯•äº†ä¸‹ï¼Œåœ¨returnå‰Thread.sleep(10000)ç„¶åç»“æœä¸æ˜¯0äº†ï¼Œç»“æœä¸ºä¸€ä¸‡å¤šçš„éšæœºæ•°ï¼Œè¿˜æœ‰å°±æ˜¯æˆ‘å°±ç®—ä¸ç”¨hread.sleep(10000)æ–¹æ³•ï¼Œè€Œæ˜¯ç”¨thread1.join();thread2.join()ï¼Œè®²é“ç†åº”è¯¥æ˜¯ç­‰ä¸¤ä¸ªçº¿ç¨‹éƒ½ç»“æŸäº†å†è¿”å›å€¼ï¼ŒæœŸæœ›å€¼æ˜¯20000ï¼Œä½†ç»“æœè¿˜æ˜¯ä¸€ä¸‡å¤šçš„éšæœºæ•°ï¼Œæƒ³ä¸æ˜ç™½å•Šï¼Œè€å¸ˆæ±‚æ•‘","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445062,"discussion_content":"çœ‹ä¸åˆ°ä½ çš„æºç äº†ï¼Œåº”è¯¥æ˜¯æœ‰å¹¶å‘é—®é¢˜äº†ï¼Œä½ çš„æœŸæœ›éœ€è¦æ­£ç¡®çš„åŒæ­¥\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553833681,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79832,"user_name":"Vincent","can_delete":false,"product_type":"c1","uid":1135159,"ip_address":"","ucode":"CD8B84A57A6A0C","user_header":"https://static001.geekbang.org/account/avatar/00/11/52/37/13b4c8aa.jpg","comment_is_top":false,"comment_ctime":1553562209,"is_pvip":false,"replies":[{"id":"29100","content":"ä¸å¯ä»¥ï¼Œæœ¬è´¨æ˜¯ç«æ€æ¡ä»¶é—®é¢˜<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1553563056,"ip_address":"","comment_id":79832,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553562209","product_id":100023901,"comment_content":"SafeCalcä¸­getæ–¹æ³•æœ¬è´¨å°±æ˜¯æœŸæœ›å¯è§æ€§ï¼Œä¸ç”¨syncå…³é”®å­—ç”¨volatileå…³é”®å­—ä¿®é¥°å˜é‡å¯ä»¥å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444646,"discussion_content":"ä¸å¯ä»¥ï¼Œæœ¬è´¨æ˜¯ç«æ€æ¡ä»¶é—®é¢˜\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553563056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79684,"user_name":"Sunqc","can_delete":false,"product_type":"c1","uid":1473717,"ip_address":"","ucode":"2C54659635403F","user_header":"https://static001.geekbang.org/account/avatar/00/16/7c/b5/4a7a2bd4.jpg","comment_is_top":false,"comment_ctime":1553520546,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553520546","product_id":100023901,"comment_content":"è€å¸ˆæ€»ç»“çš„å¥½å•Šï¼Œä¸€é’ˆè§è¡€ï¼Œå¾ˆå¥½ç†è§£","like_count":0},{"had_liked":false,"id":79184,"user_name":"ä¹å‡¡","can_delete":false,"product_type":"c1","uid":1239260,"ip_address":"","ucode":"918C9997EB6537","user_header":"https://static001.geekbang.org/account/avatar/00/12/e8/dc/32e78f02.jpg","comment_is_top":false,"comment_ctime":1553396971,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553396971","product_id":100023901,"comment_content":"ä¸èƒ½ï¼Œä¸¤ä¸ªæ–¹æ³•çš„é”ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯ä¸æ˜¯åŒä¸€æŠŠé”","like_count":0},{"had_liked":false,"id":78719,"user_name":"è°¢æ™“é£","can_delete":false,"product_type":"c1","uid":1114965,"ip_address":"","ucode":"AFC1656EC9B39D","user_header":"https://static001.geekbang.org/account/avatar/00/11/03/55/b29961a8.jpg","comment_is_top":false,"comment_ctime":1553223787,"is_pvip":false,"replies":[{"id":"28628","content":"æœ‰äº›å¯ä»¥çœ‹æ±‡ç¼–ï¼Œæœ‰äº›çœ‹ä¸åˆ°ï¼Œè™šæ‹Ÿæœºå’Œcpuéƒ½ä¼šåœ¨è¿è¡Œæ—¶éƒ½ä¼šä¼˜åŒ–<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1553229005,"ip_address":"","comment_id":78719,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553223787","product_id":100023901,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘æƒ³é—®ä¸‹æ€ä¹ˆçœ‹javaä¼˜åŒ–åçš„ä»£ç ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444205,"discussion_content":"æœ‰äº›å¯ä»¥çœ‹æ±‡ç¼–ï¼Œæœ‰äº›çœ‹ä¸åˆ°ï¼Œè™šæ‹Ÿæœºå’Œcpuéƒ½ä¼šåœ¨è¿è¡Œæ—¶éƒ½ä¼šä¼˜åŒ–\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553229005,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77524,"user_name":"æ¾èŠ±çš®è›‹me","can_delete":false,"product_type":"c1","uid":1000054,"ip_address":"","ucode":"B0846CEEF6B0D1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/42/76/256bbd43.jpg","comment_is_top":false,"comment_ctime":1552959343,"is_pvip":false,"replies":[{"id":"28333","content":"æ­£è§£<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552969312,"ip_address":"","comment_id":77524,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552959343","product_id":100023901,"comment_content":"é€ƒé€¸åˆ†æåå› ä¸ºnew object()å…¶ä»–çº¿ç¨‹æ°¸è¿œè®¿é—®ä¸åˆ°ï¼Œç¼–è¯‘åŒ–ä¼˜åŒ–æˆéé”äº†","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443760,"discussion_content":"æ­£è§£\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552969312,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77425,"user_name":"å—å±±","can_delete":false,"product_type":"c1","uid":1119593,"ip_address":"","ucode":"94656FE4A6C378","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/69/187b9968.jpg","comment_is_top":false,"comment_ctime":1552922552,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1552922552","product_id":100023901,"comment_content":"ä¸æ­£ç¡®<br>1ã€æ¯æ¬¡åˆ›å»ºçš„ä¿æŠ¤èµ„æºçš„é”éƒ½æ˜¯ä¸€æŠŠæ–°çš„é”ï¼Œæ²¡æœ‰èµ·åˆ°ä½œç”¨åè€Œé¢å¤–å¢åŠ äº†åŠ é”ã€è§£é”çš„å¼€é”€<br>2ã€å¯è§æ€§æ²¡æœ‰ä¿è¯ï¼Œæ ¹æ®Happens-Beforeè§„åˆ™ï¼Œgetå’Œsetä¹‹é—´æ²¡æœ‰ä»»ä½•å…³ç³»å¹¶ä¸”æ²¡æœ‰é€šè¿‡åŒä¸€æŠŠé”ä¸²è¡ŒåŒ–<br>3ã€åŸå­æ€§æ²¡æœ‰ä¿è¯ï¼Œå¯¹äºvalue+=1æ“ä½œæ˜¯éåŸå­æ€§çš„ï¼Œå¹¶ä¸”é”å¯¹è±¡å¯¹äºæ¯ä¸ªçº¿ç¨‹éƒ½æ˜¯æ–°çš„ï¼Œä¹Ÿå°±æ˜¯ä»ç„¶ä¼šæœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œvalue+=1æ“ä½œ<br>åˆ†æé—®é¢˜è¿˜æ˜¯è¦å°è¯•é€šè¿‡JMMå’ŒåŠ é”è§„åˆ™æ¥åˆ†æï¼Œç”¨ä»€ä¹ˆé”æ¥ä¿æŠ¤ä»€ä¹ˆ","like_count":0},{"had_liked":false,"id":76577,"user_name":"o my love","can_delete":false,"product_type":"c1","uid":1243331,"ip_address":"","ucode":"307601ACAC5DCC","user_header":"https://static001.geekbang.org/account/avatar/00/12/f8/c3/1d557354.jpg","comment_is_top":false,"comment_ctime":1552634627,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552634627","product_id":100023901,"comment_content":"æ„Ÿè§‰å¥½å¤šå¤§ä½¬","like_count":0},{"had_liked":false,"id":76501,"user_name":"ä½ åªæ˜¯çœ‹èµ·æ¥å¾ˆåŠªåŠ›","can_delete":false,"product_type":"c1","uid":1449173,"ip_address":"","ucode":"F9340A560D347C","user_header":"https://static001.geekbang.org/account/avatar/00/16/1c/d5/248a9c38.jpg","comment_is_top":false,"comment_ctime":1552620268,"is_pvip":false,"replies":[{"id":"27954","content":"å¯ä»¥ç”¨æ¡ä»¶å˜é‡æ¥æå®šï¼Œåé¢æœ‰ä»‹ç»","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552659161,"ip_address":"","comment_id":76501,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552620268","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæˆ‘å®ç°ä¸‰ä¸ªçº¿ç¨‹æ“ä½œä¸€ä¸ªå…±äº«å˜é‡iï¼Œç„¶åè¿™ä¸ªè¿™ä¸ªiåšä¸ºå¾ªç¯æ¡ä»¶å»æ§åˆ¶æˆ‘åœ¨run()æ–¹æ³•å†™çš„è¾“å‡ºè¯­å¥ï¼ˆå¹¶æ‰“å°å…±äº«å˜é‡içš„å€¼ï¼‰ï¼Œå¯æ˜¯æˆ‘è¿™ä¸ªåœ°æ–¹iç«Ÿç„¶å¯ä»¥æ‰“å°åˆ°11ï¼Œåæ¥æˆ‘å‘ç°æ˜¯åŠ äº†volatileçš„é—®é¢˜ï¼Œè¯·é—®é™¤äº†åœ¨å¾ªç¯é‡Œé¢å†åŠ ä¸ªåˆ¤æ–­è¿˜æœ‰åˆ«çš„æ–¹æ³•æ¥å®ç°ä¸‰ä¸ªçº¿ç¨‹å¾ªç¯æ‰“å°è¿™æ¡è¾“å‡ºè¯­å¥å—ï¼Ÿ<br>package com.cn.join;<br>&#47;**<br> * ç»§æ‰¿Threadç±»å®ç°å¤šçº¿ç¨‹<br> * @author HP<br> *<br> *&#47;<br>public class MyThread extends Thread {<br>\tprivate volatile static int i = 0;<br>\tpublic MyThread() {<br>\t\tsuper();<br>\t}<br>\t@Override<br>\tpublic void run() {<br>\t\t&#47;&#47; TODO Auto-generated method stub<br>\t\tsuper.run();<br>\t\t&#47;*synchronized(MyThread.class){for(;i&lt;10;i++){<br>\t\t\tSystem.out.println(Thread.currentThread()+&quot;:&quot;+i);<br>\t\t}}*&#47;<br>\t\twhile(i&lt;10){<br>\t\t\tsynchronized(MyThread.class){<br>\t\t\t\tSystem.out.println(Thread.currentThread()+&quot;:&quot;+i);<br>\t\t\t\ti++;<br>\t\t\t}<br>\t\t}<br>\t}<br>\tpublic static void main(String[] args) {<br>\t\tMyThread myThread1= new MyThread();<br>\t\tMyThread myThread2= new MyThread();<br>\t\tMyThread myThread3= new MyThread();<br>\t\tmyThread1.start();<br>\t\tmyThread2.start();<br>\t\tmyThread3.start();<br>\t}<br>}<br>","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443331,"discussion_content":"å¯ä»¥ç”¨æ¡ä»¶å˜é‡æ¥æå®šï¼Œåé¢æœ‰ä»‹ç»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552659161,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75630,"user_name":"ä½•å¦¨","can_delete":false,"product_type":"c1","uid":1385377,"ip_address":"","ucode":"EC3983BFF7992A","user_header":"https://static001.geekbang.org/account/avatar/00/15/23/a1/b08f3ee7.jpg","comment_is_top":false,"comment_ctime":1552441672,"is_pvip":false,"replies":[{"id":"27634","content":"æ­£ç¡®<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552478888,"ip_address":"","comment_id":75630,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552441672","product_id":100023901,"comment_content":"class SafeCalc {<br>  static long value = 0L;<br>  synchronized static long get() {<br>    return value;<br>  }<br>  synchronized static void addOne() {<br>    value += 1;<br>  }<br>}<br>æ‰€ä»¥æˆ‘åœ¨getæ–¹æ³•ä¸ŠåŠ staticä¿®é¥°è¿™æ ·æ˜¯ä¸æ˜¯å°±æ˜¯åŒä¸€æŠŠé”äº†å‘¢?(é”SafeCalc.Class),ä¸çŸ¥é“è¿™æ ·ç†è§£æ˜¯å¦æ­£ç¡®","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442965,"discussion_content":"æ­£ç¡®\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552478888,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75478,"user_name":"æé±¼çš„æ¬ç –å¥‡","can_delete":false,"product_type":"c1","uid":1021539,"ip_address":"","ucode":"2FD194C4DA26E5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/96/63/7eb32c9b.jpg","comment_is_top":false,"comment_ctime":1552402862,"is_pvip":false,"replies":[{"id":"27630","content":"æ²¡ç†è§£ä½ çš„é—®é¢˜ã€‚äº’æ–¥ï¼Œä¸ç®¡å‡ ä¸ªcpuéƒ½åªèƒ½ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œ<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552478345,"ip_address":"","comment_id":75478,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552402862","product_id":100023901,"comment_content":"æ–‡ä¸­è¯´get() addOne() ä¿©ä¸ªæ–¹æ³•äº’æ–¥ï¼Œå¦‚æœå¤šæ ¸å¿ƒCPUï¼Œä¸€ä¸ªè¿è¡Œget() ä¸€ä¸ªè¿è¡ŒaddOne()å‘¢ï¼Ÿ æ‚¨æ˜¯æŒ‡åœ¨åŒä¸ªæ ¸å¿ƒä¸Šå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442909,"discussion_content":"æ²¡ç†è§£ä½ çš„é—®é¢˜ã€‚äº’æ–¥ï¼Œä¸ç®¡å‡ ä¸ªcpuéƒ½åªèƒ½ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552478345,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75305,"user_name":"é¾™å“¥","can_delete":false,"product_type":"c1","uid":1451669,"ip_address":"","ucode":"E7ED2E7DF759A1","user_header":"https://static001.geekbang.org/account/avatar/00/16/26/95/a4e0f7ab.jpg","comment_is_top":false,"comment_ctime":1552376396,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552376396","product_id":100023901,"comment_content":"å…±äº«èµ„æºæ˜¯åœ¨SaftCalcå†…ï¼Œéœ€è¦å¯¹å…¶åŠ é”æ‰èƒ½ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚æ‰€ä»¥è¿™ä¸æ˜¯æ­£ç¡®åŠ é”","like_count":0},{"had_liked":false,"id":75281,"user_name":"Tristan","can_delete":false,"product_type":"c1","uid":1446426,"ip_address":"","ucode":"6CBB92D50C2929","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/15WXictKcv02AGs8PPBGvykHg3tYc7Xb33xs0iayGLMIYdFhlPoHe0ABw5F93yyInM9D5nDSAU7TWwROz4rTk0YA/132","comment_is_top":false,"comment_ctime":1552373012,"is_pvip":false,"replies":[{"id":"27493","content":"å¦‚æœä¸¤ä¸ªæ–¹æ³•éƒ½æ‰§è¡Œåœ¨ä¸€ä¸ªçº¿ç¨‹é‡Œï¼Œå½“ç„¶æ²¡é—®é¢˜ã€‚<br>å¦‚æœéƒ½åœ¨ä¸»çº¿ç¨‹ï¼Œé‚£å°±æ˜¯ä¸€ä¸ªçº¿ç¨‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552401179,"ip_address":"","comment_id":75281,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552373012","product_id":100023901,"comment_content":"get() æ–¹æ³•ã€‚æ‰§è¡Œ addOne() æ–¹æ³•åï¼Œvalue çš„å€¼å¯¹ get() æ–¹æ³•æ˜¯å¯è§çš„å—ï¼Ÿ<br>ç–‘é—®ï¼šå¯ä¸å¯ä»¥æ ¹æ®Happens-Beforeçš„ç¬¬ä¸€ä¸ªè§„åˆ™ï¼Œå°†getï¼ˆï¼‰æ–¹æ³•è°ƒæ•´åˆ°addOneï¼ˆï¼‰æ–¹æ³•åé¢ï¼Œvalueçš„å€¼å¯¹getï¼ˆï¼‰æ–¹æ³•å°±å¯è§äº†ï¼Œè¿™æ ·ç†è§£æ˜¯å¦æ­£ç¡®ï¼Ÿ ä»–ä»¬éƒ½åœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œå±ä¸å±äºåœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442846,"discussion_content":"å¦‚æœä¸¤ä¸ªæ–¹æ³•éƒ½æ‰§è¡Œåœ¨ä¸€ä¸ªçº¿ç¨‹é‡Œï¼Œå½“ç„¶æ²¡é—®é¢˜ã€‚\nå¦‚æœéƒ½åœ¨ä¸»çº¿ç¨‹ï¼Œé‚£å°±æ˜¯ä¸€ä¸ªçº¿ç¨‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552401179,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74741,"user_name":"zsh0103","can_delete":false,"product_type":"c1","uid":1326016,"ip_address":"","ucode":"3992AB4BD1A18A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epLhKkTgowm9PqUwP9k90DecpOU7HQ0IRuAp515kIonbfyqYm6ME7s2bmaPX0sSA14micZ2DAfLLibw/132","comment_is_top":false,"comment_ctime":1552290754,"is_pvip":false,"replies":[{"id":"27290","content":"æ˜¯çš„ï¼Œè¿™ç§æƒ…å†µå’Œæ²¡æœ‰é”æ˜¯ä¸€æ ·çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552310506,"ip_address":"","comment_id":74741,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552290754","product_id":100023901,"comment_content":"æ€è€ƒé¢˜ä¸­é”™è¯¯çš„ä½¿ç”¨äº†synchronzedï¼Œè¿™é‡Œä½¿ç”¨äº†ä¸¤æŠŠé”ï¼Œæ— æ³•å¾—åˆ°äº’æ‹†çš„ç›®çš„ï¼Œå› ä¸ºnew object() ä¸ºä¸¤ä¸ªå¯¹ï¼Œaddæ–¹æ³•çš„è°ƒç”¨æ— æ³•äº’æ‹†getæ–¹æ³•çš„è°ƒç”¨ï¼Œå› æ­¤ä¼šå‡ºç°è¯»å–æ—§å€¼çš„æƒ…å†µã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442664,"discussion_content":"æ˜¯çš„ï¼Œè¿™ç§æƒ…å†µå’Œæ²¡æœ‰é”æ˜¯ä¸€æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552310506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74305,"user_name":"the only Miaâ€™s","can_delete":false,"product_type":"c1","uid":1271075,"ip_address":"","ucode":"8E2E1E71BF5B4F","user_header":"https://static001.geekbang.org/account/avatar/00/13/65/23/b42f102c.jpg","comment_is_top":false,"comment_ctime":1552185312,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552185312","product_id":100023901,"comment_content":"é€šè¿‡å­¦ä¹ ï¼Œæ˜ç™½äº†å…³äºé”æœºåˆ¶ä¸­å¾ˆé‡è¦çš„ä¸€ç‚¹æ˜¯å¼„æ˜ç™½åŠ é”çš„å¯¹è±¡åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œé”ä½çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡æ‰ä¼šå‡ºç°äº’æ–¥çš„è¯´æ³•ï¼›","like_count":0},{"had_liked":false,"id":73939,"user_name":"suynan","can_delete":false,"product_type":"c1","uid":1023214,"ip_address":"","ucode":"0AAD1BA9D22D2C","user_header":"","comment_is_top":false,"comment_ctime":1552039069,"is_pvip":false,"replies":[{"id":"26973","content":"è¿™ä¸ªä¸€è¨€éš¾å°½ï¼Œæ¨èä½ çœ‹ javaå¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯å§ï¼Œé‡Œé¢æœ‰è¯¦ç»†ä»‹ç»<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552047003,"ip_address":"","comment_id":73939,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552039069","product_id":100023901,"comment_content":"ä¸€ç›´æœ‰ä¸ªç–‘é—®ï¼Œsynchronizedä¿è¯äº†åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½è¿›å…¥ä¸´ç•ŒåŒºï¼Œè¿™æ˜¯ç»“è®ºã€‚<br>ä½†æ˜¯åœ¨è¿›å…¥ä¸´ç•ŒåŒºå‰çš„ç«äº‰æ˜¯æ€ä¹ˆå¤„ç†çš„ï¼Ÿæç«¯ä¸€ç‚¹ï¼Œå‡å¦‚2ä¸ªçº¿ç¨‹ABåœ¨å®Œå…¨ç›¸åŒçš„æ—¶åˆ»å»ç«äº‰ï¼Œé‚£ä¹ˆä¼šä¸ä¼šåŒæ—¶è·¨è¿‡é‚£é“é—¨æ§›è¿›å…¥ä¸´ç•ŒåŒºï¼Ÿæˆ‘ä»¬çŸ¥é“çš„ç»“æœæ˜¯ä¸èƒ½ï¼Œåªèƒ½æœ‰ä¸€ä¸ªèƒ½è¿›å…¥ï¼Œä½†æ˜¯ä¿è¯çš„æ‰‹æ®µæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿunsafe?AQS?å¸Œæœ›è€å¸ˆæŒ‡ç‚¹ä¸€ä¸‹","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442349,"discussion_content":"è¿™ä¸ªä¸€è¨€éš¾å°½ï¼Œæ¨èä½ çœ‹ javaå¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯å§ï¼Œé‡Œé¢æœ‰è¯¦ç»†ä»‹ç»\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552047003,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73921,"user_name":"ç§‹å¤©","can_delete":false,"product_type":"c1","uid":1057056,"ip_address":"","ucode":"A7E1D953EF7E17","user_header":"https://static001.geekbang.org/account/avatar/00/10/21/20/1299e137.jpg","comment_is_top":false,"comment_ctime":1552034072,"is_pvip":true,"replies":[{"id":"27011","content":"æ­£ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552059085,"ip_address":"","comment_id":73921,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552034072","product_id":100023901,"comment_content":"æ¯æ¬¡æ·é”è¿›æ¥éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼ŒåŠ é”å’Œè§£é”é¢å¯¹çš„ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥å¯¹äºå¯è§æ€§å’ŒåŸå­æ€§é—®é¢˜æ²¡æœ‰ä¿éšœä½œç”¨","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442338,"discussion_content":"æ­£ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552059085,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73903,"user_name":"å°å…¬å¸éƒ½ä¸ç»™æˆ‘è¿›å°±èµ–é—¨å£å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ","can_delete":false,"product_type":"c1","uid":1125985,"ip_address":"","ucode":"10C8AF52F68A29","user_header":"https://static001.geekbang.org/account/avatar/00/11/2e/61/72a083ea.jpg","comment_is_top":false,"comment_ctime":1552028832,"is_pvip":false,"replies":[{"id":"27000","content":"æˆ‘ä¹Ÿè¿™æ ·è§‰å¾—","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552058128,"ip_address":"","comment_id":73903,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552028832","product_id":100023901,"comment_content":"æ„Ÿè§‰è¯„è®ºåŒºçš„å¤§ç¥å¾ˆå¤šé¸­","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442329,"discussion_content":"æˆ‘ä¹Ÿè¿™æ ·è§‰å¾—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552058128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73888,"user_name":"Nevermore","can_delete":false,"product_type":"c1","uid":1228011,"ip_address":"","ucode":"06EBD2E6A9B436","user_header":"https://static001.geekbang.org/account/avatar/00/12/bc/eb/c22ef3a5.jpg","comment_is_top":false,"comment_ctime":1552025783,"is_pvip":false,"replies":[{"id":"26999","content":"ç†è®ºé«˜æ‰‹","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552058109,"ip_address":"","comment_id":73888,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552025783","product_id":100023901,"comment_content":"é’ˆå¯¹åŒä¸€ä¸ªèµ„æºï¼Œå¿…é¡»ä½¿ç”¨åŒä¸€æŠŠé”ï¼Œæ‰èƒ½å®ç°åŸå­æ€§å’Œå¯è§æ€§ï¼Œå³ä¿è¯å¹¶å‘æ­£ç¡®æ€§ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442325,"discussion_content":"ç†è®ºé«˜æ‰‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552058109,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73756,"user_name":"ç©ºçŸ¥","can_delete":false,"product_type":"c1","uid":1013283,"ip_address":"","ucode":"C448E98238DD36","user_header":"https://static001.geekbang.org/account/avatar/00/0f/76/23/31e5e984.jpg","comment_is_top":false,"comment_ctime":1551970479,"is_pvip":false,"replies":[{"id":"26957","content":"ä½ è¿™ä¹ˆç†è§£ä¹Ÿå¯ä»¥ï¼Œå·¥ç¨‹ä¸Šå¾ˆå¤šæ¦‚å¿µéƒ½ä¸æ˜¯é‚£ä¹ˆæ¸…æ™°ï¼Œè§£å†³åŸå­æ€§éœ€è¦ç”¨åˆ°hbåŸåˆ™<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552018864,"ip_address":"","comment_id":73756,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551970479","product_id":100023901,"comment_content":"è€å¸ˆ Javaå†…å­˜æ¨¡å‹åŒ…æ‹¬synchronizedå…³é”®å­— ä¸æ˜¯è¯´æ˜Javaneseå†…å­˜æ¨¡å‹å¯ä»¥è§£å†³åŸå­æ€§é—®é¢˜å˜›ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442263,"discussion_content":"ä½ è¿™ä¹ˆç†è§£ä¹Ÿå¯ä»¥ï¼Œå·¥ç¨‹ä¸Šå¾ˆå¤šæ¦‚å¿µéƒ½ä¸æ˜¯é‚£ä¹ˆæ¸…æ™°ï¼Œè§£å†³åŸå­æ€§éœ€è¦ç”¨åˆ°hbåŸåˆ™\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552018864,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73452,"user_name":"é²ç­å¤§å¸ˆ","can_delete":false,"product_type":"c1","uid":1179156,"ip_address":"","ucode":"4F9615DF87B031","user_header":"https://static001.geekbang.org/account/avatar/00/11/fe/14/f1532dec.jpg","comment_is_top":false,"comment_ctime":1551886660,"is_pvip":false,"replies":[{"id":"26864","content":"é‚£å°±æ˜¯æ‰§è¡Œå®Œäº†ï¼Œæ­£å¸¸é€€å‡ºäº†<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551957890,"ip_address":"","comment_id":73452,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551886660","product_id":100023901,"comment_content":"æˆ‘ç”¨visualvmç›‘æ§consumerçº¿ç¨‹æ ˆï¼Œè¿‡ä¸€ä¼šä¸¤ä¸ªconsumerçº¿ç¨‹æ ˆå°±æ¶ˆå¤±äº†","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442094,"discussion_content":"é‚£å°±æ˜¯æ‰§è¡Œå®Œäº†ï¼Œæ­£å¸¸é€€å‡ºäº†\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551957890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73446,"user_name":"HYHÂ®ä¾¯åšå…ƒ","can_delete":false,"product_type":"c1","uid":1441938,"ip_address":"","ucode":"536D5CC3F9D20A","user_header":"https://static001.geekbang.org/account/avatar/00/16/00/92/0d378734.jpg","comment_is_top":false,"comment_ctime":1551885330,"is_pvip":false,"replies":[{"id":"26912","content":"é‡æ–°çœ‹çœ‹ç¬¬ä¸€æœŸå§","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551964608,"ip_address":"","comment_id":73446,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551885330","product_id":100023901,"comment_content":"ä¸ºä»€ä¹ˆåŒé‡åˆ¤æ–­çš„å•ä¾‹æ¨¡å¼åŠ äº†sncyè¿˜ä¼šæœ‰çº¿ç¨‹é—®é¢˜ï¼Œè€Œè¿™æœŸçš„æ¡ˆä¾‹åŠ äº†sncyå°±ä¸ä¼šæœ‰çº¿ç¨‹é—®é¢˜","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442091,"discussion_content":"é‡æ–°çœ‹çœ‹ç¬¬ä¸€æœŸå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551964608,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73388,"user_name":"aguan(^ï½¥ï½ªï½¥^)","can_delete":false,"product_type":"c1","uid":1107177,"ip_address":"","ucode":"04833EF2D18E1A","user_header":"https://static001.geekbang.org/account/avatar/00/10/e4/e9/0dd3829f.jpg","comment_is_top":false,"comment_ctime":1551875636,"is_pvip":false,"replies":[{"id":"26727","content":"ä¸­è§„ä¸­çŸ©","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551882312,"ip_address":"","comment_id":73388,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551875636","product_id":100023901,"comment_content":"æ€è€ƒé¢˜<br>ä¸èƒ½è§£å†³å¯è§æ€§å’ŒåŸå­æ€§çš„é—®é¢˜ï¼Œå› ä¸ºæ¯æ¬¡åŠ é”æ—¶éƒ½new objectï¼Œéƒ½æ˜¯ä¸åŒçš„å¯¹è±¡ï¼Œä¹Ÿå°±ç›¸å½“äºæ¯æ¬¡è¯·æ±‚éƒ½æ˜¯ä¸åŒçš„é”ğŸ”’ï¼Œè¿èƒŒäº†æ–‡ä¸­è¯´çš„é”è·Ÿèµ„æºçš„1å¯¹Nå…³ç³»ã€‚é”å’Œèµ„æºçš„å…³ç³»å˜æˆäº†Nå¯¹1çš„å…³ç³»","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442058,"discussion_content":"ä¸­è§„ä¸­çŸ©","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551882312,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73369,"user_name":"wilburJiang","can_delete":false,"product_type":"c1","uid":1107836,"ip_address":"","ucode":"F83D474D692C06","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI5uDOruARAmFZr49ic2nib3ibj1TSBUKydMH2H3XHUniaR0FHeNVkOI9dfndxtJIOOrY2w5nhrHjX3UQ/132","comment_is_top":false,"comment_ctime":1551872292,"is_pvip":true,"replies":[{"id":"26712","content":"æˆ‘æ˜¯ä»æ“ä½œç³»ç»Ÿé‡ŒçŸ¥é“çš„ï¼Œä¸€å®šæ¯”javaæ—©<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551880916,"ip_address":"","comment_id":73369,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1551872292","product_id":100023901,"comment_content":"è¯·é—®è€å¸ˆï¼Œä¸´ç•ŒåŒºè¿™ä¸ªæ¦‚å¿µæ˜¯æ¥è‡ªæ“ä½œç³»ç»Ÿå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442047,"discussion_content":"æˆ‘æ˜¯ä»æ“ä½œç³»ç»Ÿé‡ŒçŸ¥é“çš„ï¼Œä¸€å®šæ¯”javaæ—©\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551880916,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73341,"user_name":"Michelle","can_delete":false,"product_type":"c1","uid":1224367,"ip_address":"","ucode":"82B82C067F98F3","user_header":"https://static001.geekbang.org/account/avatar/00/12/ae/af/985298a8.jpg","comment_is_top":false,"comment_ctime":1551863399,"is_pvip":false,"replies":[{"id":"26724","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551882186,"ip_address":"","comment_id":73341,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551863399","product_id":100023901,"comment_content":"æ‡‰è©²åœ¨ä¸€é–‹å§‹å…ˆnew object<br>Sychronizedæ‰ä¸æœƒä¸€ç›´newæ–°çš„å‡ºä¾†","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442031,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551882186,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73282,"user_name":"Demter","can_delete":false,"product_type":"c1","uid":1158439,"ip_address":"","ucode":"BE3B6F726916CE","user_header":"https://static001.geekbang.org/account/avatar/00/11/ad/27/5556ae50.jpg","comment_is_top":false,"comment_ctime":1551850585,"is_pvip":false,"replies":[{"id":"26705","content":"æœ‰åºæ€§å’Œå¯è§æ€§æ˜¯ä¸€èµ·è§£å†³çš„<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551880557,"ip_address":"","comment_id":73282,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551850585","product_id":100023901,"comment_content":"å¯è§æ€§å’ŒåŸå­æ€§éƒ½ä¿è¯äº†ï¼Œå¯æ˜¯æœ‰åºæ€§ä¸ºå•¥æ²¡æœ‰åˆ†æå‘¢","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442002,"discussion_content":"æœ‰åºæ€§å’Œå¯è§æ€§æ˜¯ä¸€èµ·è§£å†³çš„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551880557,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73279,"user_name":"è½»æ­Œèµ‹","can_delete":false,"product_type":"c1","uid":1251574,"ip_address":"","ucode":"22F62446208805","user_header":"https://static001.geekbang.org/account/avatar/00/13/18/f6/2ff7bc7a.jpg","comment_is_top":false,"comment_ctime":1551848778,"is_pvip":false,"replies":[{"id":"26722","content":"æ¯æ¬¡è°ƒç”¨çš„é”éƒ½ä¸æ˜¯ä¸€ä¸ª","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551882045,"ip_address":"","comment_id":73279,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551848778","product_id":100023901,"comment_content":"é”ä¸ä½çš„ï¼Œé”å¯¹è±¡ä¸æ˜¯åŒä¸€ä¸ª","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442000,"discussion_content":"æ¯æ¬¡è°ƒç”¨çš„é”éƒ½ä¸æ˜¯ä¸€ä¸ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551882045,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73246,"user_name":"é²ç­å¤§å¸ˆ","can_delete":false,"product_type":"c1","uid":1179156,"ip_address":"","ucode":"4F9615DF87B031","user_header":"https://static001.geekbang.org/account/avatar/00/11/fe/14/f1532dec.jpg","comment_is_top":false,"comment_ctime":1551843992,"is_pvip":false,"replies":[{"id":"26731","content":"æŒ‚æ‰æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿé”ç«äº‰ä¸€å®šä¸ä¼šå¯¼è‡´çº¿ç¨‹è¢«kill","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551882661,"ip_address":"","comment_id":73246,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551843992","product_id":100023901,"comment_content":"é”ç«äº‰ä¼šå¯¼è‡´çº¿ç¨‹è¢«killå—ï¼Ÿä¸‰ä¸ªconsumerçº¿ç¨‹ï¼Œä¸€ä¸ªproducerçº¿ç¨‹ï¼Œè¿è¡Œä¸€æ®µæ—¶é—´åï¼Œæœ‰ä¸¤ä¸ªconsumerçº¿ç¨‹æŒ‚æ‰äº†<br><br>public class Producer extends Thread {<br><br>    List&lt;Message&gt; msgList = new ArrayList&lt;&gt;();<br><br>    public Producer(){<br>        super(&quot;Producer1&quot;);<br>    }<br><br>    @Override public void run() {<br>        try {<br>            while (true) {<br>                Thread.sleep(3);<br>                Message msg = new Message();<br>                synchronized(msgList) {<br>                    msgList.add(msg);<br>                    msgList.notify(); &#47;&#47;è¿™é‡Œåªèƒ½æ˜¯notifyè€Œä¸èƒ½æ˜¯notifyAllï¼Œå¦åˆ™remove(0)ä¼šæŠ¥java.lang.IndexOutOfBoundsException: Index: 0, Size: 0<br>                }<br>            }<br>        } catch (Exception e) {<br>            e.printStackTrace();<br>        }<br>    }<br><br>    public Message waitMsg() {<br>        synchronized(msgList) {<br>            if(msgList.size() == 0) {<br>                try {<br>                    msgList.wait();<br>                } catch(InterruptedException e) {<br>                    e.printStackTrace();<br>                }<br>            }<br>            return msgList.remove(0);<br>        }<br>    }<br>}","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441987,"discussion_content":"æŒ‚æ‰æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿé”ç«äº‰ä¸€å®šä¸ä¼šå¯¼è‡´çº¿ç¨‹è¢«kill","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551882661,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73136,"user_name":"è°¢ç‰¹","can_delete":false,"product_type":"c1","uid":1248684,"ip_address":"","ucode":"9C30DBFECFE649","user_header":"https://static001.geekbang.org/account/avatar/00/13/0d/ac/09678490.jpg","comment_is_top":false,"comment_ctime":1551830555,"is_pvip":false,"replies":[{"id":"26589","content":"cpuä¸å“åº”ä¸­æ–­ä¿¡å·<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551834118,"ip_address":"","comment_id":73136,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551830555","product_id":100023901,"comment_content":"ç¦æ­¢cpuä¸­æ–­ä»€ä¹ˆæ„æ€","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441931,"discussion_content":"cpuä¸å“åº”ä¸­æ–­ä¿¡å·\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551834118,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73082,"user_name":"jmdxy","can_delete":false,"product_type":"c1","uid":1189626,"ip_address":"","ucode":"445505E9C52BBB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epHS3pkexn0ibNg8kWxywRVavX7UIBBZ4kwhcmNYccvrLaP4fe0wcuHx550fTmzQwEAnoq3Rgw61RQ/132","comment_is_top":false,"comment_ctime":1551793681,"is_pvip":false,"replies":[{"id":"26508","content":"å¯¹ï¼Œå°±æ˜¯ä¸ºäº†äº’æ–¥","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551797117,"ip_address":"","comment_id":73082,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551793681","product_id":100023901,"comment_content":"getæ–¹æ³•åŠ é”æ˜¯ä¸ºäº†ç¡®ä¿è¯»å–longç±»å‹æ•°æ®çš„æ—¶å€™ ï¼Œæ²¡æœ‰å…¶ä»–çº¿ç¨‹ä¿®æ”¹longç±»å‹æ•°æ®çš„æ“ä½œã€‚ è€å¸ˆè¿™æ ·ç†è§£å¯¹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441903,"discussion_content":"å¯¹ï¼Œå°±æ˜¯ä¸ºäº†äº’æ–¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551797117,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73081,"user_name":"å°å’Œå°šç¬¨å—åŒ—","can_delete":false,"product_type":"c1","uid":1204628,"ip_address":"","ucode":"17C9BBB6DD25D2","user_header":"https://static001.geekbang.org/account/avatar/00/12/61/94/713b38ef.jpg","comment_is_top":false,"comment_ctime":1551793670,"is_pvip":false,"replies":[{"id":"26507","content":"ç”ŸåŠ¨","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551797085,"ip_address":"","comment_id":73081,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551793670","product_id":100023901,"comment_content":"è¿™ä¸ªç›¸å½“äºç»™é—¨ä¸ŠåŠ äº†ä¸€æŠŠé”ï¼Œä½†æ˜¯æ‰€æœ‰çš„é’¥åŒ™éƒ½å¯ä»¥æ‰“å¼€ï¼Œä¹Ÿå°±ç­‰äºæ²¡åŠ é”ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441902,"discussion_content":"ç”ŸåŠ¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551797085,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73072,"user_name":"melonæ®‹å‰‘","can_delete":false,"product_type":"c1","uid":1446459,"ip_address":"","ucode":"2A2831865ADF54","user_header":"https://static001.geekbang.org/account/avatar/00/16/12/3b/ea4f1c5d.jpg","comment_is_top":false,"comment_ctime":1551791170,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1551791170","product_id":100023901,"comment_content":"getOneå’ŒaddOneæ¯æ¬¡åŠ é”åœ¨ä¸åŒèµ„æºä¸Šï¼Œå› ä¸ºnew,æ‰€ä»¥åŠ é”ä¸åœ¨åŒä¸€ä¸ªå¯¹è±¡ä¸Šï¼Œå¹¶æ²¡æœ‰å½¢æˆäº’æ–¥ã€‚","like_count":0},{"had_liked":false,"id":73070,"user_name":"å¸¸é“¶ç²","can_delete":false,"product_type":"c1","uid":1252109,"ip_address":"","ucode":"894A34D9AD8942","user_header":"https://static001.geekbang.org/account/avatar/00/13/1b/0d/9c3e2241.jpg","comment_is_top":false,"comment_ctime":1551790078,"is_pvip":false,"replies":[{"id":"26505","content":"æ²¡æ€è€ƒè¿‡ï¼Œæˆ‘è§‰å¾—é”ï¼Œæœ¬æ¥å°±è¯¥æ˜¯ä¸ªå¯¹è±¡","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551797034,"ip_address":"","comment_id":73070,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551790078","product_id":100023901,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæœ€åæ€»ç»“ä¸­è¯´ï¼Œé”ä¸€å®šè¦æœ‰ä¸€ä¸ªé”å®šçš„å¯¹è±¡ï¼Œå½“new objectçš„æ—¶å€™ï¼Œå°±æ¢äº†ä¸€ä¸ªä¸Šé”çš„å¯¹è±¡ï¼Œé”ä½çš„ä¸æ˜¯åŒä¸€ä¸ªèµ„æºï¼Œæ‰€ä»¥æ²¡æœ‰åŠæ³•ä¿è¯èµ„æºçš„åŒæ­¥ã€‚å…¶å®åº”è¯¥å»æ€è€ƒï¼šä¸ºä»€ä¹ˆsynchronizedé”çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç±»ï¼Œæ˜¯ä¸æ˜¯å’ŒJavaæœ¬èº«çš„è®¾è®¡æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441897,"discussion_content":"æ²¡æ€è€ƒè¿‡ï¼Œæˆ‘è§‰å¾—é”ï¼Œæœ¬æ¥å°±è¯¥æ˜¯ä¸ªå¯¹è±¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551797034,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73067,"user_name":"zhaozp","can_delete":false,"product_type":"c1","uid":1099706,"ip_address":"","ucode":"BF390F5ED762CD","user_header":"https://static001.geekbang.org/account/avatar/00/10/c7/ba/4c449be2.jpg","comment_is_top":false,"comment_ctime":1551789343,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1551789343","product_id":100023901,"comment_content":"new åˆ›å»ºäº†ä¸åŒçš„å¯¹è±¡","like_count":0},{"had_liked":false,"id":73044,"user_name":"å¿ è‰¾ä¸€ç”Ÿ","can_delete":false,"product_type":"c1","uid":1445386,"ip_address":"","ucode":"DE8DF66F379054","user_header":"https://static001.geekbang.org/account/avatar/00/16/0e/0a/1564a5e1.jpg","comment_is_top":false,"comment_ctime":1551783609,"is_pvip":false,"replies":[{"id":"26509","content":"æ˜¯å¾ˆå¤šé”","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551797143,"ip_address":"","comment_id":73044,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551783609","product_id":100023901,"comment_content":"è¿™æ ·å¹¶ä¸èƒ½è§£å†³å¹¶å‘é—®é¢˜ï¼Œç›¸å½“äºä¸¤æŠŠä¸åŒçš„é”æ¥ä¿æŠ¤åŒä¸€ä¸ªèµ„æºäº†ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441889,"discussion_content":"æ˜¯å¾ˆå¤šé”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551797143,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73006,"user_name":"Geek_ed5c7b","can_delete":false,"product_type":"c1","uid":1094805,"ip_address":"","ucode":"F60D2D502E5C1E","user_header":"https://static001.geekbang.org/account/avatar/00/10/b4/95/433d47eb.jpg","comment_is_top":false,"comment_ctime":1551775317,"is_pvip":false,"replies":[{"id":"26513","content":"volatileè§„åˆ™æ˜¯è¯´ å†™ã€‹è¯»ã€‚å…¶ä»–çš„ä¸ä¿è¯ã€‚å†™å®Œåè¯»ä¸€å®šèƒ½è¯»åˆ°ã€‚ä½†æ˜¯ä½ åŒæ—¶è¯»ï¼Œè°ä¹Ÿæä¸å®šã€‚è¿™ä¸ªè¦é äº’æ–¥æå®šã€‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551797679,"ip_address":"","comment_id":73006,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551775317","product_id":100023901,"comment_content":"å…³äºå¯è§æ€§æœ‰ç‚¹ç–‘é—®ï¼Œå¸Œæœ›è€å¸ˆå¯ä»¥è§£ç­”ä¸‹ã€‚<br>åœ¨å¤šæ ¸CPUä¸­ï¼Œä¾‹å¦‚ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å°†ä¸€ä¸ªå˜é‡è¯»å…¥ä¸»å­˜ï¼ˆvolatile a=3ï¼‰ã€‚å½“ä¸€ä¸ªçº¿ç¨‹å°†aä¿®æ”¹æˆ4äº†ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰æ¥å¾—æ€¥å°†å…¶åˆ·æ–°è‡³å†…å­˜ã€‚è¿™æ ·å¯¹äºå¦å¤–ä¸€ä¸ªçº¿ç¨‹æ¥è¯´è¿™ä¸ªaæ˜¯ä¸å¯è§çš„å§ï¼Ÿæ˜¯ä¸æ˜¯å“ªæ€•ç”¨volatileä¿®é¥°äº†å˜é‡ä¹Ÿæ— æ³•ä¿è¯100%å¯è§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441873,"discussion_content":"volatileè§„åˆ™æ˜¯è¯´ å†™ã€‹è¯»ã€‚å…¶ä»–çš„ä¸ä¿è¯ã€‚å†™å®Œåè¯»ä¸€å®šèƒ½è¯»åˆ°ã€‚ä½†æ˜¯ä½ åŒæ—¶è¯»ï¼Œè°ä¹Ÿæä¸å®šã€‚è¿™ä¸ªè¦é äº’æ–¥æå®šã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551797679,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73002,"user_name":"æå¯å¨","can_delete":false,"product_type":"c1","uid":1440757,"ip_address":"","ucode":"7BB0B44076A4F4","user_header":"https://static001.geekbang.org/account/avatar/00/15/fb/f5/6521cb02.jpg","comment_is_top":false,"comment_ctime":1551774802,"is_pvip":false,"replies":[{"id":"26502","content":"åˆ«æ€¥","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551796762,"ip_address":"","comment_id":73002,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1551774802","product_id":100023901,"comment_content":"å¤§ä½¬ä»¬Locké”å’Œsynchronizedæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå¦å¤–å¯é‡å…¥é”ã€å¯ä¸­æ–­é”ã€å…¬å¹³é”éƒ½æ˜¯ä»€ä¹ˆæ„æ€","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441871,"discussion_content":"åˆ«æ€¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551796762,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1235692,"avatar":"https://static001.geekbang.org/account/avatar/00/12/da/ec/779c1a78.jpg","nickname":"å¾€äº‹éšé£ï¼Œé¡ºå…¶è‡ªç„¶","note":"","ucode":"F266EC6B143E38","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3030,"discussion_content":"ä¸€ä¸ªæ˜¯ç±»é”ï¼Œapiçš„ï¼Œä¸€ä¸ªæ˜¯jdkå†…ç½®çš„é”ï¼Œä¸€ä¸ªå¯ä»¥è‡ªå·±æ§åˆ¶è¶…æ—¶æ—¶é—´ï¼Œä¸€ä¸ªä¸èƒ½è‡ªå·±æ§åˆ¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564122098,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72995,"user_name":"é¾™çŒ«","can_delete":false,"product_type":"c1","uid":1112490,"ip_address":"","ucode":"FD726CC969EF9C","user_header":"https://static001.geekbang.org/account/avatar/00/10/f9/aa/3e80212e.jpg","comment_is_top":false,"comment_ctime":1551773203,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1551773203","product_id":100023901,"comment_content":"ä¸å¯ä»¥ï¼Œä¸æ˜¯äº’æ–¥é”","like_count":0},{"had_liked":false,"id":72989,"user_name":"Junzi","can_delete":false,"product_type":"c1","uid":1004612,"ip_address":"","ucode":"4AC663769C1873","user_header":"https://static001.geekbang.org/account/avatar/00/0f/54/44/4e541a86.jpg","comment_is_top":false,"comment_ctime":1551771636,"is_pvip":false,"replies":[{"id":"26501","content":"YES","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551796731,"ip_address":"","comment_id":72989,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551771636","product_id":100023901,"comment_content":"new Object()ä½¿æ¯æ¬¡çº¿ç¨‹è®¿é—®è¯¥å¯¹è±¡æ–¹æ³•éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„é”ï¼Œå³æ¯æ¬¡çš„é”éƒ½ä¸ä¸€æ ·ï¼Œä¸èƒ½ä¿è¯åŸå­æ€§å’Œå¯è§æ€§","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441864,"discussion_content":"YES","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551796731,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72983,"user_name":"å¼ ä¸‰","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1551770200,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1551770200","product_id":100023901,"comment_content":"å¾ˆæœ‰æ”¶è·ï¼Œç›¸åŒçš„é”æ‰äº’æ–¥ï¼Œå¹¶ä¸æ˜¯éšæ„åŠ ä¸€ä¸ªé”å°±è¡Œäº†ã€‚","like_count":0},{"had_liked":false,"id":72957,"user_name":"å†°æ¿€å‡Œçš„çœ¼æ³ª","can_delete":false,"product_type":"c1","uid":1087945,"ip_address":"","ucode":"5DCB974667E93A","user_header":"https://static001.geekbang.org/account/avatar/00/10/99/c9/a7c77746.jpg","comment_is_top":false,"comment_ctime":1551762241,"is_pvip":false,"replies":[{"id":"26496","content":"åé¢çš„ç« èŠ‚è¿˜çœŸé—®åˆ°è¿™ä¸ªé—®é¢˜äº†","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551795539,"ip_address":"","comment_id":72957,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551762241","product_id":100023901,"comment_content":"é”valueæ˜¯å¦æœ‰æ•ˆæœï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441846,"discussion_content":"åé¢çš„ç« èŠ‚è¿˜çœŸé—®åˆ°è¿™ä¸ªé—®é¢˜äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551795539,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72951,"user_name":"ç©ºç©ºç©ºç©º","can_delete":false,"product_type":"c1","uid":1082938,"ip_address":"","ucode":"A1A50E16E02803","user_header":"https://static001.geekbang.org/account/avatar/00/10/86/3a/76dbbd0e.jpg","comment_is_top":false,"comment_ctime":1551758563,"is_pvip":false,"replies":[{"id":"26495","content":"æ­£ç¡®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551795448,"ip_address":"","comment_id":72951,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551758563","product_id":100023901,"comment_content":"å›ç­”é—®é¢˜ï¼š æˆ‘è§‰å¾—è¿™æ ·è§£å†³ä¸äº†å¹¶å‘é—®é¢˜ã€‚è¯¥é¢˜ç›®ä¸­æ¯æ¬¡é”çš„å¯¹è±¡éƒ½æ˜¯newå‡ºæ¥çš„ä¸åŒçš„å¯¹è±¡ï¼Œç›¸å½“äºæ¯ä¸ªçº¿ç¨‹è·å¾—çš„é”éƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œå¹¶ä¸ä¼šäº’æ–¥ã€‚è€å¸ˆè¿™æ ·ç†è§£æ­£ç¡®å—","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441843,"discussion_content":"æ­£ç¡®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551795448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72946,"user_name":"CatTalk","can_delete":false,"product_type":"c1","uid":1057350,"ip_address":"","ucode":"353780AF4848D9","user_header":"https://static001.geekbang.org/account/avatar/00/10/22/46/df595e4a.jpg","comment_is_top":false,"comment_ctime":1551758013,"is_pvip":true,"replies":[{"id":"26493","content":"æ­£ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551795103,"ip_address":"","comment_id":72946,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551758013","product_id":100023901,"comment_content":"æ¯ä¸ªçº¿ç¨‹æ¯æ¬¡æ‰§è¡Œè¿™ä¸¤ä¸ªæ–¹æ³•æ—¶ï¼Œæ¯æ¬¡éƒ½æ˜¯å¯¹ä¸åŒçš„å¯¹è±¡ï¼ˆæ¯æ¬¡é‡æ–°newï¼‰åŠ é”ï¼ˆå¯¹è±¡å¤´ä¸­å†™å…¥é”çŠ¶æ€ï¼‰ï¼Œå¹¶æ²¡æœ‰å½¢æˆäº’æ–¥é”ã€‚è¿™æ ·å…¶å®æ¯æ¬¡è°ƒç”¨ä¸åŒçº¿ç¨‹å‡å¯è¿›å…¥ï¼Œæ— æ³•ä¿è¯å¯è§æ€§å’ŒåŸå­æ€§ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441840,"discussion_content":"æ­£ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551795103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72924,"user_name":"å½±å­ä¼ è¯´","can_delete":false,"product_type":"c1","uid":1031636,"ip_address":"","ucode":"371B72BB5CCB5E","user_header":"","comment_is_top":false,"comment_ctime":1551755500,"is_pvip":false,"replies":[{"id":"26491","content":"ä¸å¯ä»¥ã€‚<br>ä¸¤ä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è¯»åˆ°åŒä¸€ä¸ªå€¼ï¼ˆè¿™ä¸ªè¿èƒŒä»»ä½•HBï¼‰ï¼Œç„¶ååŒæ—¶+=1ï¼Œå†™å…¥å†…å­˜ï¼ˆè¿™ä¸ªè¿èƒŒä»»ä½•HBï¼‰ã€‚ç»“æœæ˜¯å°‘åŠ äº†ä¸€ä¸ª1","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551794991,"ip_address":"","comment_id":72924,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551755500","product_id":100023901,"comment_content":"è€å¸ˆä¸Šé¢ç”¨javaå†…ç½®é”ä¿è¯count++æ“ä½œèƒ½ç”¨volatileä»£æ›¿å—ï¼Ÿvolatileå¯ä»¥ä¿è¯å¤šçº¿ç¨‹å¯è§ï¼Œåœ¨ç»“åˆhappen beforeè§„åˆ™ä¼¼ä¹ä¹Ÿå¯ä»¥çš„ã€‚è¯·è€å¸ˆæŒ‡å¯¼ä¸‹","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441830,"discussion_content":"ä¸å¯ä»¥ã€‚\nä¸¤ä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è¯»åˆ°åŒä¸€ä¸ªå€¼ï¼ˆè¿™ä¸ªè¿èƒŒä»»ä½•HBï¼‰ï¼Œç„¶ååŒæ—¶+=1ï¼Œå†™å…¥å†…å­˜ï¼ˆè¿™ä¸ªè¿èƒŒä»»ä½•HBï¼‰ã€‚ç»“æœæ˜¯å°‘åŠ äº†ä¸€ä¸ª1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551794991,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72859,"user_name":"TaroYoVen","can_delete":false,"product_type":"c1","uid":1298166,"ip_address":"","ucode":"8419D0943A5098","user_header":"https://static001.geekbang.org/account/avatar/00/13/ce/f6/49bff405.jpg","comment_is_top":false,"comment_ctime":1551748146,"is_pvip":true,"replies":[{"id":"26480","content":"è€Œä¸”æ¯æ¬¡è°ƒç”¨éƒ½ä¸åŒ","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551794242,"ip_address":"","comment_id":72859,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551748146","product_id":100023901,"comment_content":"ä¸åŒé”ï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰äº’æ–¥","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441793,"discussion_content":"è€Œä¸”æ¯æ¬¡è°ƒç”¨éƒ½ä¸åŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551794242,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72858,"user_name":"ç‹æ™º","can_delete":false,"product_type":"c1","uid":1079657,"ip_address":"","ucode":"0335277F255F7A","user_header":"https://static001.geekbang.org/account/avatar/00/10/79/69/5960a2af.jpg","comment_is_top":false,"comment_ctime":1551748106,"is_pvip":false,"replies":[{"id":"26457","content":"æ­£ç¡®<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551788223,"ip_address":"","comment_id":72858,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551748106","product_id":100023901,"comment_content":"ä¸èƒ½ï¼Œå¯ä»¥newä¸€ä¸ªobjectå½“åšæˆå‘˜å˜é‡ï¼Œåº”è¯¥å°±å¯ä»¥äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441792,"discussion_content":"æ­£ç¡®\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551788223,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72850,"user_name":"Â JJ","can_delete":false,"product_type":"c1","uid":1250967,"ip_address":"","ucode":"45EC52EFFC49FB","user_header":"https://static001.geekbang.org/account/avatar/00/13/16/97/9e342700.jpg","comment_is_top":false,"comment_ctime":1551747607,"is_pvip":false,"replies":[{"id":"26479","content":"ä½ æ¯”æˆ‘è¯´çš„è¿˜æŠ½è±¡","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551794221,"ip_address":"","comment_id":72850,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551747607","product_id":100023901,"comment_content":"è€å¸ˆï¼Œå—ä¿æŠ¤èµ„æºå’Œé”çš„å…³ç³»æ˜¯1:Nå§","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441786,"discussion_content":"ä½ æ¯”æˆ‘è¯´çš„è¿˜æŠ½è±¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551794221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72849,"user_name":"æ–°ä¸–ç•Œ","can_delete":false,"product_type":"c1","uid":1079495,"ip_address":"","ucode":"4473DC1505F158","user_header":"https://static001.geekbang.org/account/avatar/00/10/78/c7/083a3a0b.jpg","comment_is_top":false,"comment_ctime":1551747568,"is_pvip":false,"replies":[{"id":"26478","content":"ä½ å¯ä»¥è¿™æ ·ç†è§£ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551794131,"ip_address":"","comment_id":72849,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551747568","product_id":100023901,"comment_content":"å¯¹äºgetæ–¹æ³•ä¸åŠ synchronizedå…³é”®å­—ä¼šå‡ºç°å¹¶å‘é—®é¢˜çš„åœºæ™¯ï¼Œå¯ä»¥è¿™æ ·ç†è§£å—ï¼ŸCPU aåŠ é”è®¾ç½®countå€¼ä¸º1ï¼ŒåŒæ—¶ä»å¯„å­˜å™¨åŒæ­¥å€¼1åˆ°ä¸»å­˜ï¼ŒCPU bè¿™æ—¶å€™æ‰§è¡Œgetæ–¹æ³•æ²¡æœ‰åŠ åŒä¸€æŠŠé”ï¼Œä¸ä¼šä»ä¸»å­˜æ‹¿æœ€æ–°å€¼æ›´æ–°åˆ°CPU bçš„å¯„å­˜å™¨ï¼Œå½“CPU bæ‰§è¡Œgetæ–¹æ³•æ—¶ï¼Œä¾ç„¶è·å–çš„æ—¶ä¹‹å‰cpu bå¯„å­˜å™¨çš„å€¼ï¼Œä¸æ˜¯ä¸»å­˜ä¸­æ›´æ–°çš„æœ€æ–°å€¼ï¼Œå¯ä»¥è¿™æ ·ç†è§£å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441785,"discussion_content":"ä½ å¯ä»¥è¿™æ ·ç†è§£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551794131,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72829,"user_name":"Solitary_J","can_delete":false,"product_type":"c1","uid":1442034,"ip_address":"","ucode":"E1E0AE4A6231BF","user_header":"https://static001.geekbang.org/account/avatar/00/16/00/f2/66a1461d.jpg","comment_is_top":false,"comment_ctime":1551745980,"is_pvip":false,"replies":[{"id":"26473","content":"ä¸ä»…ä»…æ˜¯ä¸å¯è§","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551793495,"ip_address":"","comment_id":72829,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551745980","product_id":100023901,"comment_content":"ä¸¤æŠŠé”ä¸å¯è§æ€§","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441772,"discussion_content":"ä¸ä»…ä»…æ˜¯ä¸å¯è§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551793495,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72813,"user_name":"æ— åº¸","can_delete":false,"product_type":"c1","uid":1120675,"ip_address":"","ucode":"9F61D1BF0FB4BF","user_header":"https://static001.geekbang.org/account/avatar/00/11/19/a3/600bc13d.jpg","comment_is_top":false,"comment_ctime":1551743139,"is_pvip":true,"replies":[{"id":"26471","content":"å¯è§ã€‚ä¸ä¿è¯åŸå­æ€§","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551793371,"ip_address":"","comment_id":72813,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551743139","product_id":100023901,"comment_content":"è¿™ä¸ªä¾‹å­value åŠ  volatile ä¿®é¥°ä¹‹åã€‚æ ¹æ®happen before åŸåˆ™å†™ä¹‹åï¼Œè¯»ä¹Ÿæ˜¯å¯è§çš„å§","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441766,"discussion_content":"å¯è§ã€‚ä¸ä¿è¯åŸå­æ€§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551793371,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72809,"user_name":"... ...","can_delete":false,"product_type":"c1","uid":1312354,"ip_address":"","ucode":"E214CAA6349A60","user_header":"https://static001.geekbang.org/account/avatar/00/14/06/62/898449d3.jpg","comment_is_top":false,"comment_ctime":1551742340,"is_pvip":false,"replies":[{"id":"26464","content":"åŸå­æ€§ä¹Ÿæœ‰é—®é¢˜ï¼Œå› ä¸ºç›¸å½“äºæ— é”","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551788599,"ip_address":"","comment_id":72809,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551742340","product_id":100023901,"comment_content":"åŠ åŠ æ“ä½œåŸå­æ€§æ²¡é—®é¢˜ï¼å¯è§æ€§æ²¡æœ‰&#39;","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441762,"discussion_content":"åŸå­æ€§ä¹Ÿæœ‰é—®é¢˜ï¼Œå› ä¸ºç›¸å½“äºæ— é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551788599,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72806,"user_name":"Thomas","can_delete":false,"product_type":"c1","uid":1114851,"ip_address":"","ucode":"39FB49141AD03C","user_header":"https://static001.geekbang.org/account/avatar/00/11/02/e3/2a624978.jpg","comment_is_top":false,"comment_ctime":1551741645,"is_pvip":false,"replies":[{"id":"26470","content":"ä¸ä»…ä»…ä¸åŒ","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551793295,"ip_address":"","comment_id":72806,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551741645","product_id":100023901,"comment_content":"åŠ é”çš„å¯¹è±¡ä¸åŒ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441760,"discussion_content":"ä¸ä»…ä»…ä¸åŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551793295,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72799,"user_name":"Alan","can_delete":false,"product_type":"c1","uid":1198125,"ip_address":"","ucode":"9C66CBCFB3A109","user_header":"https://static001.geekbang.org/account/avatar/00/12/48/2d/7a3d42fb.jpg","comment_is_top":false,"comment_ctime":1551731442,"is_pvip":false,"replies":[{"id":"26451","content":"ğŸ‘å‰å®³<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551787522,"ip_address":"","comment_id":72799,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551731442","product_id":100023901,"comment_content":"é¦–å…ˆå›ç­”ä¸‹è¯¾åé—®é¢˜å“ˆï¼Œä½¿ç”¨æ–¹å¼æ˜¯ä¸æ­£ç¡®çš„ï¼Œæ¯æ¬¡éƒ½é”èµ„æºéƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œå¯¼è‡´ç­‰äºæ²¡åŠ é”ï¼Œä¸èƒ½ä¿è¯å¯è§æ€§ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441753,"discussion_content":"ğŸ‘å‰å®³\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551787522,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72797,"user_name":"Nevermore","can_delete":false,"product_type":"c1","uid":1228011,"ip_address":"","ucode":"06EBD2E6A9B436","user_header":"https://static001.geekbang.org/account/avatar/00/12/bc/eb/c22ef3a5.jpg","comment_is_top":false,"comment_ctime":1551725625,"is_pvip":false,"replies":[{"id":"26462","content":"æ¯æ¬¡è°ƒç”¨éƒ½åˆ›å»ºäº†æ–°çš„ï¼Œç›¸å½“äºæ— é”ï¼Œç¼–è¯‘å™¨ä¼šä¼˜åŒ–æ‰åŒæ­¥å…³é”®å­—<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551788469,"ip_address":"","comment_id":72797,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551725625","product_id":100023901,"comment_content":"ä¸€ä¸ªèµ„æºï¼Œä½¿ç”¨äº†ä¸¤æŠŠé”ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441752,"discussion_content":"æ¯æ¬¡è°ƒç”¨éƒ½åˆ›å»ºäº†æ–°çš„ï¼Œç›¸å½“äºæ— é”ï¼Œç¼–è¯‘å™¨ä¼šä¼˜åŒ–æ‰åŒæ­¥å…³é”®å­—\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551788469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72796,"user_name":"ç‹‚æˆ˜ä¿„æ´›ä¼Š","can_delete":false,"product_type":"c1","uid":1213269,"ip_address":"","ucode":"F6EACA321E6180","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJUzv6S9wroydkGP6m3OsQ8QuI4jAibv21tNkm7KVGPffJibj8Y29yIdKl4qkDGd3iaGJCSGVarfxoibQ/132","comment_is_top":false,"comment_ctime":1551721412,"is_pvip":false,"replies":[{"id":"26461","content":"ğŸ‘<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551788397,"ip_address":"","comment_id":72796,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551721412","product_id":100023901,"comment_content":"å—¯ï¼Œæœ‰é—®é¢˜ï¼Œä¸¤æŠŠé”é”çš„èµ„æºä¸ä¸€æ ·ï¼Œè¿™ä¸¤æŠŠé”å¹¶ä¸æ˜¯äº’æ–¥çš„ï¼Œæ‰€ä»¥å­˜åœ¨å¹¶å‘é—®é¢˜ğŸ˜","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441751,"discussion_content":"ğŸ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551788397,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72795,"user_name":"å°å°å°ä¸¶ç›˜å­","can_delete":false,"product_type":"c1","uid":1308056,"ip_address":"","ucode":"FCD4520F1EF872","user_header":"https://static001.geekbang.org/account/avatar/00/13/f5/98/45374bb9.jpg","comment_is_top":false,"comment_ctime":1551719537,"is_pvip":true,"replies":[{"id":"26455","content":"æ˜¯è¿™æ ·ï¼Œæ²¡æœ‰ä»»ä½•äº’æ–¥ä½œç”¨<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551787976,"ip_address":"","comment_id":72795,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551719537","product_id":100023901,"comment_content":"æ€è€ƒé¢˜ä¸­ï¼Œæ¯æ¬¡è®¿é—®éƒ½ä¼šåŠ é”ï¼Œä½†æ˜¯æ¯æ¬¡é”ä¸åŒ(new objectï¼‰ï¼Œè€å¸ˆåœ¨æ–‡ä¸­æåˆ°ï¼Œä¸€æŠŠé”å¯ä»¥å¯¹åº”Nä¸ªèµ„æºï¼Œç°åœ¨æ˜¯å¤šæŠŠé”å¯¹åº”ä¸€ä¸ªèµ„æºï¼Œå¹¶ä¸èƒ½èµ·åˆ°äº’æ–¥ä½œç”¨ï¼ŒåŠ 1æ“ä½œå¹¶ä¸æ˜¯åŸå­æ€§ã€‚åŒæ—¶ç”±äºä¸æ˜¯ä¸€æŠŠé”ï¼Œå¯è§æ€§ä¹Ÿæ— æ³•å®ç°ã€‚ä¸ç¬¦åˆHappen before åŸåˆ™ã€‚æˆ‘çš„ä¸ªäººç†è§£ï¼Œè¯·è€å¸ˆæ‰¹è¯„æŒ‡æ­£ã€‚ğŸ˜„","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441750,"discussion_content":"æ˜¯è¿™æ ·ï¼Œæ²¡æœ‰ä»»ä½•äº’æ–¥ä½œç”¨\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551787976,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72794,"user_name":"ç¬¨æ‹™çš„è‡ªç”±","can_delete":false,"product_type":"c1","uid":1309452,"ip_address":"","ucode":"BEDD613DEDD8ED","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLRwauvbuyKfib8Qm3NBNU908zhKS0WPnvTEN4EJYSJyKwMuSHTWgXqP5WrSexgQAhLSiblydA24EMg/132","comment_is_top":false,"comment_ctime":1551719298,"is_pvip":false,"replies":[{"id":"26460","content":"ğŸ‘<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551788382,"ip_address":"","comment_id":72794,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551719298","product_id":100023901,"comment_content":"ä¸æ­£ç¡®ï¼Œä¸¤ä¸ªæ–¹æ³•ä¸æ˜¯ç«äº‰åŒä¸€æŠŠé”ï¼Œå¯¹èµ„æºèµ·ä¸äº†ä¿æŠ¤ä½œç”¨","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441749,"discussion_content":"ğŸ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551788382,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72787,"user_name":"shen","can_delete":false,"product_type":"c1","uid":1215066,"ip_address":"","ucode":"AE5737B0C7DC4F","user_header":"https://static001.geekbang.org/account/avatar/00/12/8a/5a/b67a82e3.jpg","comment_is_top":false,"comment_ctime":1551716907,"is_pvip":false,"replies":[{"id":"26450","content":"ğŸ‘å‰å®³<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1551787452,"ip_address":"","comment_id":72787,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551716907","product_id":100023901,"comment_content":"é¢˜ç›®ä¸­new Object() jvmä¼šè‡ªåŠ¨ä¼˜åŒ–ç‚¹çš„ï¼Œæ‰€ä»¥ä»–æ˜¯æ— æ•ˆçš„ï¼Œå¯ä»¥å£°æ˜ä¸€ä¸ªæˆå‘˜å˜é‡Object lock=new Object()ï¼Œä½¿ç”¨lockè¿™ä¸ªé”","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441744,"discussion_content":"ğŸ‘å‰å®³\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551787452,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}