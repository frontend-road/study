{"id":158156,"title":"23 | 源码剖析：构建连接","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geek_netty\">https://gitee.com/geektime-geekbang/geek_netty</a></p>","comments":[{"had_liked":false,"id":146582,"user_name":"jzdayz","can_delete":false,"product_type":"c3","uid":1259280,"ip_address":"","ucode":"E84C0DFC53BE8A","user_header":"https://static001.geekbang.org/account/avatar/00/13/37/10/a8aa9acb.jpg","comment_is_top":false,"comment_ctime":1572576336,"is_pvip":false,"replies":[{"id":57316,"content":"市场上的几本书我都买了看了，本来做这个课程还在想，既然网上都有那么多资料和书籍了，为什么还要重新造轮子，然后想了下，很多问题在于介绍了太多，但是没有告诉你为什么和怎么用，更像做科学研究，所以打算做这个课程的时候，放弃太多烧脑的东西，争取通过简单易理解的方式，讲一些本质的问题，不然记住太多概念也记不住，记住了用途也不大，个人理解，反正看到您的留言，深受鼓舞，看来我努力的方向没有错。只是达到多少效果的问题了。","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1573133700,"ip_address":"","comment_id":146582,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"老师讲的挺好的，看过一本netty的书，看下来并没有什么作用，都是一些介绍，介绍api，介绍概念，编程的学习中，真的创建了太多的概念，都是听起来高大上，但是其实翻阅代码，才会发现其本质。👍","like_count":10,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472924,"discussion_content":"市场上的几本书我都买了看了，本来做这个课程还在想，既然网上都有那么多资料和书籍了，为什么还要重新造轮子，然后想了下，很多问题在于介绍了太多，但是没有告诉你为什么和怎么用，更像做科学研究，所以打算做这个课程的时候，放弃太多烧脑的东西，争取通过简单易理解的方式，讲一些本质的问题，不然记住太多概念也记不住，记住了用途也不大，个人理解，反正看到您的留言，深受鼓舞，看来我努力的方向没有错。只是达到多少效果的问题了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573133700,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171473,"user_name":"torres","can_delete":false,"product_type":"c3","uid":1108761,"ip_address":"","ucode":"34DABCFC7B74EA","user_header":"https://static001.geekbang.org/account/avatar/00/10/eb/19/76b0b98c.jpg","comment_is_top":false,"comment_ctime":1578928019,"is_pvip":false,"replies":[{"id":66473,"content":"你这样理解没有问题，其实从代码角度更好理解：\nsocket channel = server socket channel . accept()\n只有服务器端才有server socket channel，因为用它来监听端口，所以客户端没有，只有socket channel ，服务器端两个都有。","user_name":"作者回复","user_name_real":"stroller","uid":1638649,"ctime":1578963809,"ip_address":"","comment_id":171473,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"老师，能讲一下server socket channel 和socket channel的区别吗？这个地方感觉自己似懂非懂。。\n我现在的理解是在启动服务端时，前者会注册到boss线程中，用于处理客户端的首次连接，即OP_ACCEPT。在接收到客户端连接时，会创建后者并将后者会注册到worker线程中，负责监听客户端的后续事件和业务数据。前者就像酒店的迎宾，后者就像酒店的服务员。前者与客户端只会有一次交互。\n不知道理解是否正确，烦请老师更正补充，谢谢","like_count":5,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481368,"discussion_content":"你这样理解没有问题，其实从代码角度更好理解：\nsocket channel = server socket channel . accept()\n只有服务器端才有server socket channel，因为用它来监听端口，所以客户端没有，只有socket channel ，服务器端两个都有。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578963809,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":147725,"user_name":"小不点","can_delete":false,"product_type":"c3","uid":1351860,"ip_address":"","ucode":"C307D44A185C34","user_header":"https://static001.geekbang.org/account/avatar/00/14/a0/b4/5173f1af.jpg","comment_is_top":false,"comment_ctime":1572881487,"is_pvip":false,"replies":[{"id":57236,"content":"多试图用生活场景对照下可能好理解点，看你后面说理解多了，有点欣慰。就是不知道哪个留言在先，哈","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1573047231,"ip_address":"","comment_id":147725,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"老师讲的好，但是我是一脸懵逼","like_count":4,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473293,"discussion_content":"多试图用生活场景对照下可能好理解点，看你后面说理解多了，有点欣慰。就是不知道哪个留言在先，哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573047231,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":204646,"user_name":"delete is create","can_delete":false,"product_type":"c3","uid":1147979,"ip_address":"","ucode":"A8C751219A7746","user_header":"https://static001.geekbang.org/account/avatar/00/11/84/4b/e4738ba8.jpg","comment_is_top":false,"comment_ctime":1586434841,"is_pvip":false,"replies":[{"id":78819,"content":"你要这么理解也可以，一个连接就是一个socket channel。java里面都是对象，所以连接肯定是对象。","user_name":"作者回复","user_name_real":"stroller","uid":1638649,"ctime":1588055676,"ip_address":"","comment_id":204646,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"netty  是如何管理长连接的， 一个连接就是一个对象么","like_count":3,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491240,"discussion_content":"你要这么理解也可以，一个连接就是一个socket channel。java里面都是对象，所以连接肯定是对象。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588055676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1147979,"avatar":"https://static001.geekbang.org/account/avatar/00/11/84/4b/e4738ba8.jpg","nickname":"delete is create","note":"","ucode":"A8C751219A7746","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":227259,"discussion_content":"老师求解答","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586481095,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166136,"user_name":"我已经设置了昵称","can_delete":false,"product_type":"c3","uid":1364034,"ip_address":"","ucode":"ED672C5EBDBDC4","user_header":"https://static001.geekbang.org/account/avatar/00/14/d0/42/6fd01fb9.jpg","comment_is_top":false,"comment_ctime":1577408490,"is_pvip":false,"replies":[{"id":63331,"content":"因为很多概念我觉得可能大家都知道就没讲了，如果每个都说，可能被抱怨课程注水的，如果没讲到的，您可以百度下，然后不清楚的可以提个问题，大家一起交流下，谢谢","user_name":"作者回复","user_name_real":"stroller","uid":1638649,"ctime":1577414163,"ip_address":"","comment_id":166136,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"还是觉得老师应该先把一些概念讲明白，对于初学netty的人来说，这几个名词到底是什么都不知道。你教我这几个东西怎么实现和运行的的，我没法明白啊。","like_count":3,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479412,"discussion_content":"因为很多概念我觉得可能大家都知道就没讲了，如果每个都说，可能被抱怨课程注水的，如果没讲到的，您可以百度下，然后不清楚的可以提个问题，大家一起交流下，谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577414163,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1512916,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJGqic2rcLAEyvicpXAqnS0fzxOsfbML29UCgERdvxictO2wYHHVSniaPGO0McuWjICqeUic2slkSbry7Q/132","nickname":"lanlei","note":"","ucode":"C2535C827786A6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":272525,"discussion_content":"这个课的受众肯定大多数都是对这块不是特别懂的，希望借这个视频来学习。老师如果很多概念不讲明白，那学习体验会艰难很多，整体课程体验会下降。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590320798,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1236239,"avatar":"https://static001.geekbang.org/account/avatar/00/12/dd/0f/4e640140.jpg","nickname":"胡鹏","note":"","ucode":"AA5808DA0DBC32","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1512916,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJGqic2rcLAEyvicpXAqnS0fzxOsfbML29UCgERdvxictO2wYHHVSniaPGO0McuWjICqeUic2slkSbry7Q/132","nickname":"lanlei","note":"","ucode":"C2535C827786A6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631997,"discussion_content":"你对netty的基础认知都没有，看啥源码呢。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700287919,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":272525,"ip_address":"上海","group_id":0},"score":631997,"extra":""}]}]},{"had_liked":false,"id":149676,"user_name":"aoe","can_delete":false,"product_type":"c3","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1573313386,"is_pvip":false,"replies":[{"id":57937,"content":"嗯，这个问题我记录下来，回头我来总结下netty用到的典型设计模式，然后汇总到问题集里面，最后发给您。这个问题其实是个很好的问题，就是很多时候看代码也是如此，如果看出是那种设计模式的话，其实不用多讲，就自然明白了。","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1573570939,"ip_address":"","comment_id":149676,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"视频课程一般是连着播放的，不像专栏，阅读完后方便留言，所以相对专栏留言少了很多。老师讲的很好，通俗易懂，虽然源码Debug的部分看的不是很懂，但这部分需要自己认真调试才能真正掌握。希望老师在今后的课程在介绍某个功能实现的时候，可以讲解一下用到了哪些设计模式，有助于我们理解源码（因为设计模式只是了解，自己设计的时候可以使用一些，但面对Netty这么庞大的代码很难一眼就分析出相关的设计模式）。收看课程就像看连续剧一样，一看就停不下来，希望快点看完。","like_count":2,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473935,"discussion_content":"嗯，这个问题我记录下来，回头我来总结下netty用到的典型设计模式，然后汇总到问题集里面，最后发给您。这个问题其实是个很好的问题，就是很多时候看代码也是如此，如果看出是那种设计模式的话，其实不用多讲，就自然明白了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573570939,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":49414,"discussion_content":"感谢老师！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573576686,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176723,"user_name":"密码123456","can_delete":false,"product_type":"c3","uid":1126593,"ip_address":"","ucode":"9889463CC0EA71","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/c1/2dde6700.jpg","comment_is_top":false,"comment_ctime":1581150360,"is_pvip":false,"replies":[{"id":68847,"content":"那好在结果是好的👌","user_name":"作者回复","user_name_real":"stroller","uid":1638649,"ctime":1581360718,"ip_address":"","comment_id":176723,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"每节都要看个 3遍左右才懂。基础好差啊","like_count":1,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483191,"discussion_content":"那好在结果是好的👌","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581360718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168073,"user_name":"lm a cat","can_delete":false,"product_type":"c3","uid":1467281,"ip_address":"","ucode":"8269EB2082BD43","user_header":"https://static001.geekbang.org/account/avatar/00/16/63/91/05f491f1.jpg","comment_is_top":false,"comment_ctime":1578011124,"is_pvip":false,"replies":[{"id":65316,"content":"建立连接是boss做，但是断开连接（包含注销监听事件）boss不做，是worker做（就像媒人或者中介给一对新人牵线搭桥，后来这对新人离婚了，肯定不会找最开始的媒人吧）\n\n其实你可以把断开连接理解成特殊的读事件，所以是worker自己做。你连接断了，worker肯定要取消掉注册到上面的关于这个连接的监听事件的，因为已经不要这个连接了。\n\n不知道有没有解答你的问题了？如果哪里不清楚再提问，谢谢。","user_name":"作者回复","user_name_real":"stroller","uid":1638649,"ctime":1578038279,"ip_address":"","comment_id":168073,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"\n老师您好，没明白。我再描述下。boos把通道A注册到轮询器交班给worker后。boos会注销A通道的链接监听吗？worker为啥会取消呢老师？","like_count":1,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480127,"discussion_content":"建立连接是boss做，但是断开连接（包含注销监听事件）boss不做，是worker做（就像媒人或者中介给一对新人牵线搭桥，后来这对新人离婚了，肯定不会找最开始的媒人吧）\n\n其实你可以把断开连接理解成特殊的读事件，所以是worker自己做。你连接断了，worker肯定要取消掉注册到上面的关于这个连接的监听事件的，因为已经不要这个连接了。\n\n不知道有没有解答你的问题了？如果哪里不清楚再提问，谢谢。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578038279,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":170779,"user_name":"硅谷居士","can_delete":false,"product_type":"c3","uid":1018463,"ip_address":"","ucode":"BD3D3BA142F280","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8a/5f/c60d0ffe.jpg","comment_is_top":false,"comment_ctime":1578713776,"is_pvip":false,"replies":[{"id":66200,"content":"加油！","user_name":"作者回复","user_name_real":"stroller","uid":1638649,"ctime":1578737218,"ip_address":"","comment_id":170779,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"讲的很好。之前就参照李林峰的书，写过 nio 版本的 EchoServer 和 netty 版本的 EchoServer。现在结合源码和课程，自己多看几遍打打日志，就能明白了。","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481109,"discussion_content":"加油！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578737218,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165451,"user_name":"lm a cat","can_delete":false,"product_type":"c3","uid":1467281,"ip_address":"","ucode":"8269EB2082BD43","user_header":"https://static001.geekbang.org/account/avatar/00/16/63/91/05f491f1.jpg","comment_is_top":false,"comment_ctime":1577239526,"is_pvip":false,"replies":[{"id":63161,"content":"boss服务于所有要接入的连接，接入后，转给worker就交班了，然后继续等待服务下一个要接入的连接。\n所以boss不会取消注册好的通道，worker才会。因为交班过了。","user_name":"作者回复","user_name_real":"stroller","uid":1638649,"ctime":1577281189,"ip_address":"","comment_id":165451,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"创建完成链接后，boos会不会取消注册的通道，boos的任务完成了就不要了吧","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479164,"discussion_content":"boss服务于所有要接入的连接，接入后，转给worker就交班了，然后继续等待服务下一个要接入的连接。\n所以boss不会取消注册好的通道，worker才会。因为交班过了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577281189,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1467281,"avatar":"https://static001.geekbang.org/account/avatar/00/16/63/91/05f491f1.jpg","nickname":"lm a cat","note":"","ucode":"8269EB2082BD43","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":115317,"discussion_content":"老师您好，没明白。我再描述下。boos把通道A注册到轮询器交班给worker后。boos会注销A通道的链接监听吗？worker为啥会取消呢老师？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578010825,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":151338,"user_name":"谨守","can_delete":false,"product_type":"c3","uid":1402386,"ip_address":"","ucode":"01751DDA988C0A","user_header":"https://static001.geekbang.org/account/avatar/00/15/66/12/a485354c.jpg","comment_is_top":false,"comment_ctime":1573702236,"is_pvip":false,"replies":[{"id":58352,"content":"第四章有实战案例，到时候您再看看。","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1573786423,"ip_address":"","comment_id":151338,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"老师后面有没有更多应用实例的章节呀，光看原理性的东西，理解起来还是有些模糊，而且记的有点混乱 。还是希望能从怎么用的入手来理解原理。","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474444,"discussion_content":"第四章有实战案例，到时候您再看看。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573786423,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":274872,"user_name":"凹凸","can_delete":false,"product_type":"c3","uid":1198112,"ip_address":"","ucode":"D6F0EBDC8F2588","user_header":"https://static001.geekbang.org/account/avatar/00/12/48/20/f1898740.jpg","comment_is_top":false,"comment_ctime":1611201211,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"debug很清晰，把客户端连接事件的每个核心步骤都串起来了，代码的复用率很高，所以这个debug的步骤还是要自己去跟的，结合着ppt上面的主线步骤，想想为什么，这样就加深了理解！","like_count":1},{"had_liked":false,"id":274348,"user_name":"Geek_c3ef56","can_delete":false,"product_type":"c3","uid":2413639,"ip_address":"","ucode":"5B44F21A5501FB","user_header":"","comment_is_top":false,"comment_ctime":1610974388,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"接近代码，才能接近本质。一直看书和概念有点很飘的感觉。实践起来才能理解更深入呀。毕竟高手都是抓细节的","like_count":1},{"had_liked":false,"id":361753,"user_name":"nimil","can_delete":false,"product_type":"c3","uid":1197925,"ip_address":"北京","ucode":"19933068972746","user_header":"https://static001.geekbang.org/account/avatar/00/12/47/65/cce8eb34.jpg","comment_is_top":false,"comment_ctime":1667826793,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"我直接晕了","like_count":0},{"had_liked":false,"id":358484,"user_name":"The Way","can_delete":false,"product_type":"c3","uid":1310127,"ip_address":"浙江","ucode":"C2D841BDE657A3","user_header":"https://static001.geekbang.org/account/avatar/00/13/fd/af/2c8833aa.jpg","comment_is_top":false,"comment_ctime":1664357144,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"老师，请问一下客户端启动是不是只会创建一个channel？event loop又有多个，那他们的关系是怎样的？","like_count":0},{"had_liked":false,"id":329761,"user_name":"Mong狗","can_delete":false,"product_type":"c3","uid":1048525,"ip_address":"","ucode":"9DF0D65D75984E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ff/cd/9c44f2d5.jpg","comment_is_top":false,"comment_ctime":1641527878,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":2,"score":3,"product_id":100036701,"comment_content":"老师 假设资源受限，这是linux系统进程最大连接数为1000，如果连接数超过后会怎样？boss线程会阻塞么？","like_count":0},{"had_liked":false,"id":314468,"user_name":"Geek_5d1643","can_delete":false,"product_type":"c3","uid":2762666,"ip_address":"","ucode":"37833CEB539C5D","user_header":"","comment_is_top":false,"comment_ctime":1633093893,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"感觉这里应该强调下，workgroup 创建了几个 nioeventloop，跟 cpu 核数的关系，谢谢","like_count":0},{"had_liked":false,"id":301692,"user_name":"没褶的叉烧包","can_delete":false,"product_type":"c3","uid":2621028,"ip_address":"","ucode":"68018F6DAA55D7","user_header":"https://static001.geekbang.org/account/avatar/00/27/fe/64/8bbde8b8.jpg","comment_is_top":false,"comment_ctime":1625814308,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"请问下，initAndRegister方法进入后在AbstractUnsafe的register方法中eventLoop.execute()方法会执行SingleThreadEventExecutor.this.run();，想问下为什么要在还没注册完成，执行这行代码","like_count":0},{"had_liked":false,"id":274349,"user_name":"Geek_c3ef56","can_delete":false,"product_type":"c3","uid":2413639,"ip_address":"","ucode":"5B44F21A5501FB","user_header":"","comment_is_top":false,"comment_ctime":1610974395,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"给老师点赞！","like_count":0},{"had_liked":false,"id":227986,"user_name":"简约风丶","can_delete":false,"product_type":"c3","uid":1024128,"ip_address":"","ucode":"4F1541223C7ED5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a0/80/2349287c.jpg","comment_is_top":false,"comment_ctime":1592532361,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"老师，你好，请问boss线程建立连接后，后续的处理交给worker线程了，有读事件过来，是怎么关联到woker线程那个对应的socket channel的，是操作系统底层的实现，还是netty会经过boss线程转发过去的","like_count":0,"discussions":[{"author":{"id":1202447,"avatar":"https://static001.geekbang.org/account/avatar/00/12/59/0f/dfb310b5.jpg","nickname":"西","note":"","ucode":"439CF4B1FEF9EE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339580,"discussion_content":"每个worker线程都在死循环的进行select()轮询操作，自己持有的selector组件会发现自己要处理的事件。（个人理解，仅供参考）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609740306,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226092,"user_name":"haisheng","can_delete":false,"product_type":"c3","uid":2020634,"ip_address":"","ucode":"236C399EBA8280","user_header":"","comment_is_top":false,"comment_ctime":1591949192,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100036701,"comment_content":"感觉一脸懵，老师您能讲下从开始使用到一步步提交netty代码的经历吗？感觉自己还没领悟到编程的真谛，只会处理一些业务代码。","like_count":0},{"had_liked":false,"id":180316,"user_name":"辉煌码农","can_delete":false,"product_type":"c3","uid":1332799,"ip_address":"","ucode":"09779C2E06EA52","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIy5ULaodUwsLoPuk1wd22hqXsaBbibNEqXM0kgrCTYDGKYQkZICYEyH9wMj4hyUicuQwHdDuOKRj0g/132","comment_is_top":false,"comment_ctime":1582255558,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100036701,"comment_content":"建立连接2个端口的客户端端口，他的作用是server给client发消息的时候用的吗？","like_count":0},{"had_liked":false,"id":157941,"user_name":"冬渐暖","can_delete":false,"product_type":"c3","uid":1586800,"ip_address":"","ucode":"907E41AAE9A36C","user_header":"https://static001.geekbang.org/account/avatar/00/18/36/70/00122b24.jpg","comment_is_top":false,"comment_ctime":1575287353,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100036701,"comment_content":"处理创建连接\n死循环select事件，自己实现了个selectkey方法\n\nboss线程: 1.selector轮训查看新的连接的事件--》hasTasks()       第一次创建启动的时候用的jdk自带的，之后采用netty自己的----》openSelector的时候赋值给selectedKeys，selectedKeys不为null采用netty自己的\n          2.创建并初始化socket channel来jian听\n   3.通过jian听器 把workGroup和bossGroup拿出来\n\nwork 线程:1.吧自己的jian听器注册到这个boss上\n   2.告诉boss的选择器自己想嘿嘿嘿，注册读事件(OP_ READ) 到selector上\n\n\nOP_READ注册\n　首先，SocketChannel创建时就指定感兴趣事件OP_READ；然后，在注册阶段，直接向Selector注册OP_READ；\n\n\n一次性的注册操作通过fireChannelActive来执行的，用完了就销毁","like_count":0}]}