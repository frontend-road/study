{"id":713462,"title":"16ï½œè¿æ¥æ•°æ®åº“ï¼šé€šè¿‡é“¾å’Œä»£ç†æŸ¥è¯¢é²œèŠ±ä¿¡æ¯","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é»„ä½³ï¼Œæ¬¢è¿æ¥åˆ° LangChain å®æˆ˜è¯¾ï¼</p><p>ä¸€ç›´ä»¥æ¥ï¼Œåœ¨è®¡ç®—æœºç¼–ç¨‹å’Œæ•°æ®åº“ç®¡ç†é¢†åŸŸï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½éœ€è¦é€šè¿‡ä¸¥æ ¼ã€ä¸“ä¸šä¸”ç»“æ„åŒ–çš„è¯­æ³•æ¥å®Œæˆã€‚è¿™å°±æ˜¯ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼ˆSQLï¼‰ã€‚å½“ä½ æƒ³ä»ä¸€ä¸ªæ•°æ®åº“ä¸­æå–ä¿¡æ¯æˆ–è¿›è¡ŒæŸç§æ“ä½œæ—¶ï¼Œä½ éœ€è¦ä½¿ç”¨è¿™ç§ç‰¹å®šçš„è¯­è¨€æ˜ç¡®åœ°å‘Šè¯‰è®¡ç®—æœºä½ çš„è¦æ±‚ã€‚è¿™ä¸ä»…éœ€è¦æˆ‘ä»¬æ·±å…¥äº†è§£æ­£åœ¨ä½¿ç”¨çš„æŠ€æœ¯ï¼Œè¿˜éœ€è¦å¯¹æ‰€æ“ä½œçš„æ•°æ®æœ‰å……åˆ†çš„äº†è§£ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/82/0d/829798a55a330518c7c95dcac948890d.png?wh=497x454\" alt=\"\" title=\"å›¾ç‰‡æ¥æºç½‘ç»œ\"></p><p>ä½ éœ€è¦æ‹¥æœ‰ä¸€ä¸ªç¨‹åºå‘˜åŸºæœ¬çš„æŠ€èƒ½å’ŒçŸ¥è¯†æ‰èƒ½æœ‰æ•ˆåœ°ä¸è®¡ç®—æœºäº¤äº’ã€‚ä¸è¿‡ï¼Œéšç€äººå·¥æ™ºèƒ½çš„å…´èµ·å’Œå¤§è¯­è¨€æ¨¡å‹çš„å‘å±•ï¼Œæƒ…å†µå¼€å§‹å‘ç”Ÿå˜åŒ–ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬æ­£è¿›å…¥ä¸€ä¸ª<strong>å…¨æ–°çš„ç¼–ç¨‹èŒƒå¼</strong>ï¼Œå…¶ä¸­æœºå™¨å­¦ä¹ å’Œè‡ªç„¶è¯­è¨€å¤„ç†æŠ€æœ¯ä½¿å¾—ä¸è®¡ç®—æœºçš„äº¤äº’å˜å¾—æ›´åŠ è‡ªç„¶ã€‚è¿™æ„å‘³ç€ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ›´åŠ æ¥è¿‘æˆ‘ä»¬æ—¥å¸¸è¯è¯­çš„è‡ªç„¶è¯­è¨€æ¥ä¸è®¡ç®—æœºäº¤æµã€‚ä¾‹å¦‚ï¼Œä¸ç”¨å¤æ‚çš„SQLè¯­å¥æŸ¥è¯¢æ•°æ®åº“ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°é—®ï¼šâ€œè¯·å‘Šè¯‰æˆ‘å»å¹´çš„é”€å”®é¢æ˜¯å¤šå°‘ï¼Ÿâ€ è®¡ç®—æœºèƒ½å¤Ÿç†è§£è¿™ä¸ªé—®é¢˜ï¼Œå¹¶ç»™å‡ºç›¸åº”çš„ç­”æ¡ˆã€‚</p><p>è¿™ç§è½¬å˜ä¸ä»…ä½¿å¾—éæŠ€æœ¯äººå‘˜æ›´å®¹æ˜“ä¸è®¡ç®—æœºäº¤äº’ï¼Œè¿˜ä¸ºå¼€å‘è€…æä¾›äº†æ›´å¤§çš„ä¾¿åˆ©æ€§ã€‚ç®€è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬ä»â€œ<strong>å‘Šè¯‰è®¡ç®—æœºæ¯ä¸€æ­¥æ€ä¹ˆåš</strong>â€ï¼Œè½¬å˜ä¸ºâ€œ<strong>å‘Šè¯‰è®¡ç®—æœºæˆ‘ä»¬æƒ³è¦ä»€ä¹ˆ</strong>â€ï¼Œæ•´ä¸ªè¿‡ç¨‹å˜å¾—æ›´åŠ äººæ€§åŒ–å’Œé«˜æ•ˆã€‚</p><h2>æ–°çš„æ•°æ®åº“æŸ¥è¯¢èŒƒå¼</h2><p>ä¸‹é¢è¿™ä¸ªå›¾ï¼Œéå¸¸æ¸…æ™°åœ°è§£é‡Šäº†è¿™ä¸ªä»¥LLMä¸ºé©±åŠ¨å¼•æ“ï¼Œä»è‡ªç„¶è¯­è¨€çš„ï¼ˆæ¨¡ç³Šï¼‰è¯¢é—®ï¼Œåˆ°è‡ªç„¶è¯­è¨€çš„æŸ¥è¯¢ç»“æœè¾“å‡ºçš„æµç¨‹ã€‚</p><!-- [[[read_end]]] --><p><img src=\"https://static001.geekbang.org/resource/image/60/26/60ffbcbe5a891ae74a12d3d5d24cf426.jpg?wh=1571x470\" alt=\"\"></p><p>è¿™ç§èŒƒå¼ç»“åˆäº†è‡ªç„¶è¯­è¨€å¤„ç†å’Œä¼ ç»Ÿæ•°æ®åº“æŸ¥è¯¢çš„åŠŸèƒ½ï¼Œä¸ºç”¨æˆ·æä¾›äº†ä¸€ä¸ªæ›´ä¸ºç›´è§‚å’Œé«˜æ•ˆçš„äº¤äº’æ–¹å¼ã€‚ä¸‹é¢æˆ‘æ¥è§£é‡Šä¸‹è¿™ä¸ªè¿‡ç¨‹ã€‚</p><ol>\n<li>æå‡ºé—®é¢˜ï¼šç”¨æˆ·ç”¨è‡ªç„¶è¯­è¨€æå‡ºä¸€ä¸ªé—®é¢˜ï¼Œä¾‹å¦‚â€œå»å¹´çš„æ€»é”€å”®é¢æ˜¯å¤šå°‘ï¼Ÿâ€ã€‚</li>\n<li>LLMç†è§£å¹¶è½¬è¯‘ï¼šLLMé¦–å…ˆä¼šè§£æè¿™ä¸ªé—®é¢˜ï¼Œç†è§£å…¶èƒŒåçš„æ„å›¾å’Œæ‰€éœ€çš„ä¿¡æ¯ã€‚æ¥ç€ï¼Œæ¨¡å‹ä¼šæ ¹æ®è§£æçš„å†…å®¹ï¼Œç”Ÿæˆç›¸åº”çš„SQLæŸ¥è¯¢è¯­å¥ï¼Œä¾‹å¦‚ â€œSELECT SUM(sales) FROM sales_data WHERE year = â€˜last_yearâ€™;â€ã€‚</li>\n<li>æ‰§è¡ŒSQLæŸ¥è¯¢ï¼šç”Ÿæˆçš„SQLæŸ¥è¯¢è¯­å¥ä¼šè¢«å‘é€åˆ°ç›¸åº”çš„æ•°æ®åº“è¿›è¡Œæ‰§è¡Œã€‚æ•°æ®åº“å¤„ç†è¿™ä¸ªæŸ¥è¯¢ï¼Œå¹¶è¿”å›æ‰€éœ€çš„æ•°æ®ç»“æœã€‚</li>\n<li>LLMæ¥æ”¶å¹¶è§£é‡Šç»“æœï¼šå½“æ•°æ®åº“è¿”å›æŸ¥è¯¢ç»“æœåï¼ŒLLMä¼šæ¥æ”¶åˆ°è¿™äº›æ•°æ®ã€‚ç„¶åï¼ŒLLMä¼šå¼€å§‹è§£æè¿™äº›æ•°æ®ï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºæ›´å®¹æ˜“è¢«äººç±»ç†è§£çš„ç­”æ¡ˆæ ¼å¼ã€‚</li>\n<li>æä¾›ç­”æ¡ˆï¼šæœ€åï¼ŒLLMå°†ç»“æœè½¬åŒ–ä¸ºè‡ªç„¶è¯­è¨€ç­”æ¡ˆï¼Œå¹¶è¿”å›ç»™ç”¨æˆ·ã€‚ä¾‹å¦‚â€œå»å¹´çš„æ€»é”€å”®é¢ä¸º1,000,000å…ƒâ€ã€‚</li>\n</ol><p>ä½ çœ‹ï¼Œç”¨æˆ·ä¸éœ€è¦çŸ¥é“æ•°æ®åº“çš„ç»“æ„ï¼Œä¹Ÿä¸éœ€è¦å…·å¤‡ç¼–å†™SQLçš„æŠ€èƒ½ã€‚ä»–ä»¬åªéœ€è¦ç”¨è‡ªç„¶è¯­è¨€æé—®ï¼Œç„¶åå°±å¯ä»¥å¾—åˆ°ä»–ä»¬æ‰€éœ€çš„ç­”æ¡ˆã€‚è¿™å¤§å¤§ç®€åŒ–äº†ä¸æ•°æ®åº“çš„äº¤äº’è¿‡ç¨‹ï¼Œå¹¶ä¸ºå„ç§åº”ç”¨åœºæ™¯æä¾›äº†å·¨å¤§çš„æ½œåŠ›ã€‚</p><h2>å®æˆ˜æ¡ˆä¾‹èƒŒæ™¯ä¿¡æ¯</h2><p>ä¸‹é¢æˆ‘ä»¬å°†é€šè¿‡LangChainå®ç°è¿™ä¸ªæ–°çš„æ•°æ®åº“åº”ç”¨å¼€å‘èŒƒå¼ã€‚</p><p>åœ¨è¿™ä¸ªå®æˆ˜æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬çš„æ‰€æœ‰ä¸šåŠ¡æ•°æ®éƒ½å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œè€Œç›®æ ‡åˆ™æ˜¯é€šè¿‡è‡ªç„¶è¯­è¨€æ¥ä¸ºé”€å”®çš„æ¯ä¸€ç§é²œèŠ±æ•°æ®åˆ›å»ºå„ç§æŸ¥è¯¢ã€‚è¿™æ ·ï¼Œæ— è®ºæ˜¯å‘˜å·¥è¿˜æ˜¯é¡¾å®¢ï¼Œå½“ä»–ä»¬æƒ³äº†è§£æŸç§é²œèŠ±çš„ä»·æ ¼æ—¶ï¼Œéƒ½å¯ä»¥å¿«é€Ÿåœ°ç”Ÿæˆé€‚å½“çš„æŸ¥è¯¢è¯­å¥ã€‚</p><p><strong>è¿™å°±å¤§å¤§ç®€åŒ–äº†æŸ¥è¯¢è¿‡ç¨‹å’Œéš¾åº¦ã€‚</strong></p><p>é¦–å…ˆï¼Œè¿™ä¸ªåº”ç”¨å¯ä»¥è¢«ç®€å•åœ°ç”¨ä½œä¸€ä¸ªæŸ¥è¯¢å·¥å…·ï¼Œå…è®¸å‘˜å·¥åœ¨å­˜è´§æˆ–é”€å”®ç³»ç»Ÿä¸­å¿«é€ŸæŸ¥æ‰¾ä»·æ ¼ã€‚å‘˜å·¥ä¸å†éœ€è¦è®°ä½å¤æ‚çš„æŸ¥è¯¢è¯­å¥æˆ–è¿›è¡Œæ‰‹åŠ¨æœç´¢ï¼Œåªéœ€é€‰æ‹©é²œèŠ±ç§ç±»ï¼Œå‘Šè¯‰ç³»ç»Ÿä»–æ‰€æƒ³è¦çš„ä¸œè¥¿ï¼Œç³»ç»Ÿå°±ä¼šä¸ºä»–ä»¬ç”Ÿæˆæ­£ç¡®çš„æŸ¥è¯¢ã€‚</p><p>å…¶æ¬¡ï¼Œè¿™ä¸ªæ¨¡æ¿ä¹Ÿå¯ä»¥è¢«æ•´åˆåˆ°ä¸€ä¸ªèŠå¤©æœºå™¨äººæˆ–å®¢æœæœºå™¨äººä¸­ã€‚é¡¾å®¢å¯ä»¥ç›´æ¥å‘æœºå™¨äººè¯¢é—®ï¼šâ€œçº¢ç«ç‘°çš„ä»·æ ¼æ˜¯å¤šå°‘ï¼Ÿâ€ æœºå™¨äººä¼šæ ¹æ®è¾“å…¥å†…å®¹æ¥è°ƒç”¨LangChainå’ŒLLMï¼Œç”Ÿæˆé€‚å½“çš„æŸ¥è¯¢ï¼Œç„¶åè¿”å›ç¡®åˆ‡çš„ä»·æ ¼ç»™é¡¾å®¢ã€‚è¿™æ ·ï¼Œä¸ä»…æé«˜äº†æœåŠ¡æ•ˆç‡ï¼Œè¿˜å¢å¼ºäº†ç”¨æˆ·ä½“éªŒã€‚</p><p>äº†è§£å®Œé¡¹ç›®çš„èƒŒæ™¯ä¿¡æ¯ï¼Œä¸‹é¢æˆ‘ä»¬å°±å¼€å§‹è¡ŒåŠ¨å§ï¼</p><h2>åˆ›å»ºæ•°æ®åº“è¡¨</h2><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ç³»åˆ—çš„æ•°æ®åº“è¡¨ï¼Œå­˜å‚¨æ˜“é€Ÿé²œèŠ±çš„ä¸šåŠ¡æ•°æ®ã€‚</p><p>è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨SQLiteä½œä¸ºæˆ‘ä»¬çš„ç¤ºä¾‹æ•°æ®åº“ã€‚å®ƒæä¾›äº†è½»é‡çº§çš„ç£ç›˜æ–‡ä»¶æ•°æ®åº“ï¼Œå¹¶ä¸éœ€è¦å•ç‹¬çš„æœåŠ¡å™¨è¿›ç¨‹æˆ–ç³»ç»Ÿï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ç›´æ¥ä¸æ•°æ®åº“æ–‡ä»¶äº¤äº’ã€‚åŒæ—¶ï¼Œå®ƒä¹Ÿä¸éœ€è¦é…ç½®ã€å®‰è£…æˆ–ç®¡ç†ï¼Œéå¸¸é€‚åˆæ¡Œé¢åº”ç”¨ã€åµŒå…¥å¼åº”ç”¨æˆ–åˆåˆ›ä¼ä¸šçš„ç®€å•éœ€æ±‚ã€‚</p><p>SQLiteæ”¯æŒACIDï¼ˆåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§ï¼‰ï¼Œè¿™æ„å‘³ç€ä½ çš„æ•°æ®åº“æ“ä½œå³ä½¿åœ¨ç³»ç»Ÿå´©æºƒæˆ–ç”µæºå¤±è´¥çš„æƒ…å†µä¸‹ä¹Ÿæ˜¯å®‰å…¨çš„ã€‚è™½ç„¶SQLiteè¢«è®¤ä¸ºæ˜¯è½»é‡çº§çš„ï¼Œä½†å®ƒæ”¯æŒå¤§å¤šæ•°SQLçš„æ ‡å‡†ç‰¹æ€§ï¼ŒåŒ…æ‹¬äº‹åŠ¡ã€è§¦å‘å™¨å’Œè§†å›¾ã€‚</p><p>å› æ­¤ï¼Œå®ƒä¹Ÿç‰¹åˆ«é€‚ç”¨äºé‚£äº›ä¸éœ€è¦å¤§å‹æ•°æ®åº“ç³»ç»Ÿå¸¦æ¥çš„å…¨éƒ¨åŠŸèƒ½ï¼Œä½†ä»ç„¶éœ€è¦æ•°æ®æŒä¹…æ€§çš„åº”ç”¨ç¨‹åºï¼Œå¦‚ç§»åŠ¨åº”ç”¨æˆ–å°å‹Webåº”ç”¨ã€‚å½“ç„¶ï¼Œä¹Ÿéå¸¸é€‚åˆæˆ‘ä»¬åšDemoã€‚</p><p>sqlite3åº“ï¼Œåˆ™æ˜¯Pythonå†…ç½®çš„è½»é‡çº§SQLiteæ•°æ®åº“ã€‚é€šè¿‡sqlite3åº“ï¼ŒPythonä¸ºå¼€å‘è€…æä¾›äº†ä¸€ä¸ªç®€å•ã€ç›´æ¥çš„æ–¹å¼æ¥åˆ›å»ºã€æŸ¥è¯¢å’Œç®¡ç†SQLiteæ•°æ®åº“ã€‚å½“ä½ å®‰è£…Pythonæ—¶ï¼Œsqlite3æ¨¡å—å·²ç»åŒ…å«åœ¨å†…ï¼Œæ— éœ€å†è¿›è¡Œé¢å¤–çš„å®‰è£…ã€‚</p><p>åŸºäºè¿™ä¸ªsqlite3åº“ï¼Œåˆ›å»ºä¸šåŠ¡æ•°æ®çš„ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\"># å¯¼å…¥sqlite3åº“\nimport sqlite3\n\n# è¿æ¥åˆ°æ•°æ®åº“\nconn = sqlite3.connect('FlowerShop.db')\ncursor = conn.cursor()\n\n# æ‰§è¡ŒSQLå‘½ä»¤æ¥åˆ›å»ºFlowersè¡¨\ncursor.execute('''\n&nbsp; &nbsp; &nbsp; &nbsp; CREATE TABLE Flowers (\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ID INTEGER PRIMARY KEY, \n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Name TEXT NOT NULL, \n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Type TEXT NOT NULL, \n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Source TEXT NOT NULL, \n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PurchasePrice REAL, \n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SalePrice REAL,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; StockQuantity INTEGER, \n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SoldQuantity INTEGER, \n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ExpiryDate DATE, &nbsp;\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Description TEXT, \n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; EntryDate DATE DEFAULT CURRENT_DATE \n&nbsp; &nbsp; &nbsp; &nbsp; );\n&nbsp; &nbsp; ''')\n\n# æ’å…¥5ç§é²œèŠ±çš„æ•°æ®\nflowers = [\n&nbsp; &nbsp; ('Rose', 'Flower', 'France', 1.2, 2.5, 100, 10, '2023-12-31', 'A beautiful red rose'),\n&nbsp; &nbsp; ('Tulip', 'Flower', 'Netherlands', 0.8, 2.0, 150, 25, '2023-12-31', 'A colorful tulip'),\n&nbsp; &nbsp; ('Lily', 'Flower', 'China', 1.5, 3.0, 80, 5, '2023-12-31', 'An elegant white lily'),\n&nbsp; &nbsp; ('Daisy', 'Flower', 'USA', 0.7, 1.8, 120, 15, '2023-12-31', 'A cheerful daisy flower'),\n&nbsp; &nbsp; ('Orchid', 'Flower', 'Brazil', 2.0, 4.0, 50, 2, '2023-12-31', 'A delicate purple orchid')\n]\n\nfor flower in flowers:\n&nbsp; &nbsp; cursor.execute('''\n&nbsp; &nbsp; &nbsp; &nbsp; INSERT INTO Flowers (Name, Type, Source, PurchasePrice, SalePrice, StockQuantity, SoldQuantity, ExpiryDate, Description) \n&nbsp; &nbsp; &nbsp; &nbsp; VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?);\n&nbsp; &nbsp; ''', flower)\n\n# æäº¤æ›´æ”¹\nconn.commit()\n\n# å…³é—­æ•°æ®åº“è¿æ¥\nconn.close()\n</code></pre><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¿æ¥åˆ°FlowerShop.dbæ•°æ®åº“ã€‚ç„¶åï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåä¸ºFlowersçš„æ–°è¡¨ï¼Œæ­¤è¡¨å°†å­˜å‚¨ä¸æ¯ç§é²œèŠ±ç›¸å…³çš„å„ç§æ•°æ®ã€‚</p><p>è¯¥è¡¨æœ‰ä»¥ä¸‹å­—æ®µï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/d5/31/d569yy552347e51ba9514a183yyef731.jpg?wh=925x882\" alt=\"\"></p><p>æ¥ç€ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸ºflowersçš„åˆ—è¡¨ï¼Œå…¶ä¸­åŒ…å«5ç§é²œèŠ±çš„æ‰€æœ‰ç›¸å…³æ•°æ®ã€‚ä½¿ç”¨forå¾ªç¯ï¼Œæˆ‘ä»¬éå†flowersåˆ—è¡¨ï¼Œå¹¶å°†æ¯ç§é²œèŠ±çš„æ•°æ®æ’å…¥åˆ°Flowersè¡¨ä¸­ã€‚ç„¶åæäº¤è¿™äº›æ›´æ”¹ï¼ŒæŠŠå®ƒä»¬ä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚æœ€åï¼Œæˆ‘ä»¬å…³é—­ä¸æ•°æ®åº“çš„è¿æ¥ã€‚</p><h2>ç”¨ Chain æŸ¥è¯¢æ•°æ®åº“</h2><p>å› ä¸ºLangChainçš„æ•°æ®åº“æŸ¥è¯¢åŠŸèƒ½è¾ƒæ–°ï¼Œç›®å‰è¿˜å¤„äºå®éªŒé˜¶æ®µï¼Œå› æ­¤ï¼Œéœ€è¦å…ˆå®‰è£…langchain-experimentalåŒ…ï¼Œè¿™ä¸ªåŒ…å«æœ‰å®éªŒæ€§çš„LangChainæ–°åŠŸèƒ½ã€‚</p><pre><code class=\"language-plain\">pip install langchain-experimental\n</code></pre><p>ä¸‹é¢ï¼Œæˆ‘ä»¬å°±å¼€å§‹é€šè¿‡SQLDatabaseChainæ¥æŸ¥è¯¢æ•°æ®åº“ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\"># å¯¼å…¥langchainçš„å®ç”¨å·¥å…·å’Œç›¸å…³çš„æ¨¡å—\nfrom langchain.utilities import SQLDatabase\nfrom langchain.llms import OpenAI\nfrom langchain_experimental.sql import SQLDatabaseChain\n\n# è¿æ¥åˆ°FlowerShopæ•°æ®åº“ï¼ˆä¹‹å‰æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯Chinook.dbï¼‰\ndb = SQLDatabase.from_uri(\"sqlite:///FlowerShop.db\")\n\n# åˆ›å»ºOpenAIçš„ä½çº§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å®ä¾‹ï¼Œè¿™é‡Œæˆ‘ä»¬è®¾ç½®æ¸©åº¦ä¸º0ï¼Œæ„å‘³ç€æ¨¡å‹è¾“å‡ºä¼šæ›´åŠ ç¡®å®šæ€§\nllm = OpenAI(temperature=0, verbose=True)\n\n# åˆ›å»ºSQLæ•°æ®åº“é“¾å®ä¾‹ï¼Œå®ƒå…è®¸æˆ‘ä»¬ä½¿ç”¨LLMæ¥æŸ¥è¯¢SQLæ•°æ®åº“\ndb_chain = SQLDatabaseChain.from_llm(llm, db, verbose=True)\n\n# è¿è¡Œä¸é²œèŠ±è¿è¥ç›¸å…³çš„é—®é¢˜\nresponse = db_chain.run(\"æœ‰å¤šå°‘ç§ä¸åŒçš„é²œèŠ±ï¼Ÿ\")\nprint(response)\n\nresponse = db_chain.run(\"å“ªç§é²œèŠ±çš„å­˜è´§æ•°é‡æœ€å°‘ï¼Ÿ\")\nprint(response)\n\nresponse = db_chain.run(\"å¹³å‡é”€å”®ä»·æ ¼æ˜¯å¤šå°‘ï¼Ÿ\")\nprint(response)\n\nresponse = db_chain.run(\"ä»æ³•å›½è¿›å£çš„é²œèŠ±æœ‰å¤šå°‘ç§ï¼Ÿ\")\nprint(response)\n\nresponse = db_chain.run(\"å“ªç§é²œèŠ±çš„é”€å”®é‡æœ€é«˜ï¼Ÿ\")\nprint(response)\n</code></pre><p>è¿™é‡Œï¼Œæˆ‘ä»¬å¯¼å…¥å¿…è¦çš„LangChainæ¨¡å—ï¼Œç„¶åè¿æ¥åˆ°FlowerShopæ•°æ®åº“ï¼Œåˆå§‹åŒ–OpenAIçš„LLMå®ä¾‹ã€‚ä¹‹åç”¨SQLDatabaseChainæ¥åˆ›å»ºä¸€ä¸ªä»LLMåˆ°æ•°æ®åº“çš„é“¾æ¥ã€‚</p><p>æœ€åï¼Œç”¨db_chain.run()æ–¹æ³•æ¥æŸ¥è¯¢å¤šä¸ªä¸é²œèŠ±è¿è¥ç›¸å…³çš„é—®é¢˜ï¼ŒChainçš„å†…éƒ¨ä¼šæŠŠè¿™äº›è‡ªç„¶è¯­è¨€è½¬æ¢ä¸ºSQLè¯­å¥ï¼Œå¹¶æŸ¥è¯¢æ•°æ®åº“è¡¨ï¼Œå¾—åˆ°æŸ¥è¯¢ç»“æœä¹‹åï¼Œåˆé€šè¿‡LLMæŠŠè¿™ä¸ªç»“æœè½¬æ¢æˆè‡ªç„¶è¯­è¨€ã€‚</p><p>å› æ­¤ï¼ŒChainçš„è¾“å‡ºç»“æœæ˜¯æˆ‘ä»¬å¯ä»¥ç†è§£çš„ï¼Œä¹Ÿæ˜¯å¯ä»¥ç›´æ¥ä¼ é€’ç»™Chatbotçš„äººè¯ã€‚</p><p>è¾“å‡ºå¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/04/aa/04b4de7c9fd93a98cc58e6de2f8aaaaa.jpg?wh=1535x1488\" alt=\"\"></p><p>SQLDatabaseChainè°ƒç”¨å¤§è¯­è¨€æ¨¡å‹ï¼Œå®Œç¾åœ°å®Œæˆäº†ä»è‡ªç„¶è¯­è¨€ï¼ˆè¾“å…¥ï¼‰åˆ°è‡ªç„¶è¯­è¨€ï¼ˆè¾“å‡ºï¼‰çš„æ–°å‹SQLæŸ¥è¯¢ã€‚</p><h2>ç”¨ Agent æŸ¥è¯¢æ•°æ®åº“</h2><p>é™¤äº†é€šè¿‡Chainå®Œæˆæ•°æ®åº“æŸ¥è¯¢ä¹‹å¤–ï¼ŒLangChain è¿˜å¯ä»¥é€šè¿‡SQL Agentæ¥å®ŒæˆæŸ¥è¯¢ä»»åŠ¡ã€‚ç›¸æ¯”SQLDatabaseChainï¼Œä½¿ç”¨ SQL ä»£ç†æœ‰ä¸€äº›ä¼˜ç‚¹ã€‚</p><ul>\n<li>å®ƒå¯ä»¥æ ¹æ®æ•°æ®åº“çš„æ¶æ„ä»¥åŠæ•°æ®åº“çš„å†…å®¹å›ç­”é—®é¢˜ï¼ˆä¾‹å¦‚å®ƒä¼šæ£€ç´¢ç‰¹å®šè¡¨çš„æè¿°ï¼‰ã€‚</li>\n<li>å®ƒå…·æœ‰çº é”™èƒ½åŠ›ï¼Œå½“æ‰§è¡Œç”Ÿæˆçš„æŸ¥è¯¢é‡åˆ°é”™è¯¯æ—¶ï¼Œå®ƒèƒ½å¤Ÿæ•è·è¯¥é”™è¯¯ï¼Œç„¶åæ­£ç¡®åœ°é‡æ–°ç”Ÿæˆå¹¶æ‰§è¡Œæ–°çš„æŸ¥è¯¢ã€‚</li>\n</ul><p>LangChainä½¿ç”¨create_sql_agentå‡½æ•°æ¥åˆå§‹åŒ–ä»£ç†ï¼Œé€šè¿‡è¿™ä¸ªå‡½æ•°åˆ›å»ºçš„SQLä»£ç†åŒ…å«SQLDatabaseToolkitï¼Œè¿™ä¸ªå·¥å…·ç®±ä¸­åŒ…å«ä»¥ä¸‹å·¥å…·ï¼š</p><ul>\n<li>åˆ›å»ºå¹¶æ‰§è¡ŒæŸ¥è¯¢</li>\n<li>æ£€æŸ¥æŸ¥è¯¢è¯­æ³•</li>\n<li>æ£€ç´¢æ•°æ®è¡¨çš„æè¿°</li>\n</ul><p>åœ¨è¿™äº›å·¥å…·çš„è¾…åŠ©ä¹‹ä¸‹ï¼Œä»£ç†å¯ä»¥è¶‹åŠ¨LLMå®ŒæˆSQLæŸ¥è¯¢ä»»åŠ¡ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\">from langchain.utilities import SQLDatabase\nfrom langchain.llms import OpenAI\nfrom langchain.agents import create_sql_agent\nfrom langchain.agents.agent_toolkits import SQLDatabaseToolkit\nfrom langchain.agents.agent_types import AgentType\n\n# è¿æ¥åˆ°FlowerShopæ•°æ®åº“\ndb = SQLDatabase.from_uri(\"sqlite:///FlowerShop.db\")\nllm = OpenAI(temperature=0, verbose=True)\n\n# åˆ›å»ºSQL Agent\nagent_executor = create_sql_agent(\n&nbsp; &nbsp; llm=llm,\n&nbsp; &nbsp; toolkit=SQLDatabaseToolkit(db=db, llm=llm),\n&nbsp; &nbsp; verbose=True,\n&nbsp; &nbsp; agent_type=AgentType.ZERO_SHOT_REACT_DESCRIPTION,\n)\n\n# ä½¿ç”¨Agentæ‰§è¡ŒSQLæŸ¥è¯¢\n\nquestions = [\n&nbsp; &nbsp; \"å“ªç§é²œèŠ±çš„å­˜è´§æ•°é‡æœ€å°‘ï¼Ÿ\",\n&nbsp; &nbsp; \"å¹³å‡é”€å”®ä»·æ ¼æ˜¯å¤šå°‘ï¼Ÿ\",\n]\n\nfor question in questions:\n&nbsp; &nbsp; response = agent_executor.run(question)\n&nbsp; &nbsp; print(response)\n</code></pre><p>é—®é¢˜1çš„è¾“å‡ºå¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/97/18/97bd63f7bf63eb90a33eb88829a3d118.jpg?wh=2212x1375\" alt=\"\"></p><p>é—®é¢˜2çš„è¾“å‡ºå¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/74/3b/749ddf06803b961a16856494c33a163b.jpg?wh=2219x1343\" alt=\"\"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå’ŒChainç›´æ¥ç”ŸæˆSQLè¯­å¥ä¸åŒï¼Œä»£ç†ä¼šä½¿ç”¨ ReAct é£æ ¼çš„æç¤ºã€‚é¦–å…ˆï¼Œå®ƒæ€è€ƒä¹‹åï¼Œå°†å…ˆç¡®å®šç¬¬ä¸€ä¸ªactionæ˜¯ä½¿ç”¨å·¥å…· sql_db_list_tablesï¼Œç„¶åè§‚å¯Ÿè¯¥å·¥å…·æ‰€è¿”å›çš„è¡¨æ ¼ï¼Œæ€è€ƒåå†ç¡®å®šä¸‹ä¸€ä¸ª actionæ˜¯sql_db_schemaï¼Œä¹Ÿå°±æ˜¯åˆ›å»ºSQLè¯­å¥ï¼Œé€å±‚å‰è¿›ï¼Œç›´åˆ°å¾—åˆ°ç­”æ¡ˆã€‚</p><h2>æ€»ç»“æ—¶åˆ»</h2><p>ä»Šå¤©çš„å†…å®¹å¾ˆå®¹æ˜“ç†è§£ï¼Œåˆå¾ˆå¼€è„‘æ´ã€‚æˆ‘æœ€æƒ³å¼ºè°ƒçš„ï¼Œä»ç„¶æ˜¯ä»â€œå‘Šè¯‰è®¡ç®—æœºè¦åšä»€ä¹ˆâ€çš„ç¼–ç¨‹èŒƒå¼å‘â€œå‘Šè¯‰è®¡ç®—æœºæˆ‘ä»¬æƒ³è¦ä»€ä¹ˆâ€çš„èŒƒå¼çš„è½¬å˜ã€‚</p><p>è¿™ç§è½¬å˜å…·æœ‰æ·±è¿œçš„æ„ä¹‰ã€‚</p><ol>\n<li>æ›´å¤§çš„å¯è¾¾æ€§ï¼šä¸å†éœ€è¦æ·±å…¥çš„æŠ€æœ¯çŸ¥è¯†æˆ–ç‰¹å®šçš„ç¼–ç¨‹èƒŒæ™¯ã€‚è¿™æ„å‘³ç€éæŠ€æœ¯äººå‘˜ï¼Œæ¯”å¦‚ä¸šåŠ¡åˆ†æå¸ˆã€é¡¹ç›®ç»ç†ç”šè‡³æ˜¯ç»ˆç«¯ç”¨æˆ·ï¼Œéƒ½å¯ä»¥ç›´æ¥ä¸æ•°æ®äº¤äº’ã€‚</li>\n<li>é«˜æ•ˆç‡ä¸ç”Ÿäº§åŠ›ï¼šä¼ ç»Ÿçš„ç¼–ç¨‹æ–¹æ³•éœ€è¦å¤§é‡çš„æ—¶é—´å’ŒåŠªåŠ›ï¼Œå°¤å…¶æ˜¯åœ¨å¤æ‚çš„æ•°æ®æ“ä½œä¸­ã€‚è‡ªç„¶è¯­è¨€å¤„ç†å’Œç†è§£èƒ½å¤Ÿæ˜¾è‘—å‡å°‘è¿™ç§è´Ÿæ‹…ï¼Œä½¿å¾—å¤æ‚çš„æ•°æ®æ“ä½œå˜å¾—æ›´åŠ ç›´è§‚ã€‚</li>\n<li>é”™è¯¯çš„å‡å°‘ï¼šè®¸å¤šç¼–ç¨‹é”™è¯¯æºäºå¯¹ç‰¹å®šè¯­æ³•æˆ–ç»“æ„çš„è¯¯è§£ï¼Œé€šè¿‡ä½¿ç”¨è‡ªç„¶è¯­è¨€ï¼Œè¿™äº›æºäºè¯¯è§£çš„é”™è¯¯å°†å¤§å¤§å‡å°‘ã€‚</li>\n<li>äººä¸æœºå™¨çš„ç´§å¯†ç»“åˆï¼šåœ¨è¿™ç§æ–°èŒƒå¼ä¸‹ï¼Œæœºå™¨æ›´åƒæ˜¯äººç±»çš„åˆä½œä¼™ä¼´ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªå·¥å…·ã€‚å®ƒä»¬å¯ä»¥ç†è§£æˆ‘ä»¬çš„éœ€æ±‚ï¼Œå¹¶ä¸ºæˆ‘ä»¬æä¾›è§£å†³æ–¹æ¡ˆï¼Œè€Œæ— éœ€æˆ‘ä»¬æ˜ç¡®æŒ‡å¯¼æ¯ä¸€æ­¥ã€‚</li>\n</ol><p>ä½†è¿™ç§è½¬å˜ä¹Ÿå¸¦æ¥äº†æŒ‘æˆ˜ã€‚</p><ol>\n<li>æ¨¡ç³Šæ€§çš„é—®é¢˜ï¼šè‡ªç„¶è¯­è¨€æœ¬èº«æ˜¯æ¨¡ç³Šçš„ï¼Œæœºå™¨å¿…é¡»èƒ½å¤Ÿå‡†ç¡®åœ°è§£é‡Šè¿™ç§æ¨¡ç³Šæ€§ï¼Œå¹¶åœ¨å¿…è¦æ—¶å¯»æ±‚æ¾„æ¸…ã€‚</li>\n<li>å¯¹ç°æœ‰ç³»ç»Ÿçš„ä¾èµ–ï¼šè™½ç„¶è‡ªç„¶è¯­è¨€æŸ¥è¯¢çœ‹èµ·æ¥å¾ˆæœ‰å¸å¼•åŠ›ï¼Œä½†è®¸å¤šç°æœ‰ç³»ç»Ÿå¯èƒ½ä¸æ”¯æŒæˆ–ä¸å…¼å®¹è¿™ç§æ–°èŒƒå¼ã€‚</li>\n<li>è¿‡åº¦ä¾èµ–ï¼šå¦‚æœè¿‡äºä¾èµ–æœºå™¨ä¸ºæˆ‘ä»¬åšå†³ç­–ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯èƒ½ä¼šå¤±å»å¯¹æ•°æ®çš„æ·±å…¥äº†è§£å’Œå¯¹ç»“æœçš„è´¨ç–‘ã€‚</li>\n</ol><p>æˆ‘ä»¬æ­£å¤„äºä¸€ä¸ªæŠ€æœ¯å˜é©çš„æ—¶åˆ»ï¼Œè‡ªç„¶è¯­è¨€ä¸ç¼–ç¨‹ä¹‹é—´çš„ç•Œé™æ­£åœ¨æ¶ˆå¤±ã€‚å¯¹äºé‚£äº›æ„¿æ„æ¥å—å’Œé‡‡çº³è¿™ç§æ–°èŒƒå¼çš„äººæ¥è¯´ï¼Œæœªæ¥å……æ»¡äº†æ— é™çš„å¯èƒ½æ€§ã€‚</p><h2>æ€è€ƒé¢˜</h2><ol>\n<li>LangChainä¸­ç”¨Chainå’ŒAgentæ¥æŸ¥è¯¢æ•°æ®åº“ï¼Œè¿™ä¸¤ç§æ–¹å¼æœ‰ä»€ä¹ˆå¼‚åŒï¼Ÿ</li>\n<li>ä½ èƒ½å¦æ·±å…¥ä¸Šé¢è¿™ä¸¤ç§æ–¹æ³•çš„ä»£ç ï¼Œçœ‹ä¸€çœ‹å®ƒä»¬çš„åº•å±‚å®ç°ã€‚å°¤å…¶æ˜¯è¦çœ‹LangChainæ˜¯å¦‚ä½•åšæç¤ºå·¥ç¨‹ï¼ŒæŒ‡å¯¼æ¨¡å‹ç”Ÿæˆ SQL ä»£ç çš„ã€‚</li>\n</ol><p>æœŸå¾…åœ¨ç•™è¨€åŒºçœ‹åˆ°ä½ çš„åˆ†äº«ï¼Œå¦‚æœä½ è§‰å¾—å†…å®¹å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¹Ÿæ¬¢è¿åˆ†äº«ç»™æœ‰éœ€è¦çš„æœ‹å‹ï¼æœ€åå¦‚æœä½ å­¦æœ‰ä½™åŠ›ï¼Œå¯ä»¥è¿›ä¸€æ­¥å­¦ä¹ ä¸‹é¢çš„å»¶ä¼¸é˜…è¯»ã€‚</p><h2>å»¶ä¼¸é˜…è¯»</h2><ol>\n<li>æ–‡æ¡£ï¼šLangChainä¸­å…³äºæ•°æ®åº“æ¥å£çš„<a href=\"https://python.langchain.com/docs/modules/chains/popular/sqlite\">å®˜æ–¹æ–‡æ¡£</a></li>\n<li>å·¥å…·ï¼šä¸Šé¢çš„æ–‡æ¡£ä¸­æåˆ°äº† <a href=\"https://docs.smith.langchain.com/\">LangSmith</a> å·¥å…·ï¼Œç”¨äºè°ƒè¯•ã€æµ‹è¯•å’Œè¯„ä¼°LangChainå¼€å‘çš„LLMåº”ç”¨ç¨‹åº</li>\n</ol>","neighbors":{"left":{"article_title":"15ï½œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼šé€šè¿‡RAGåŠ©åŠ›é²œèŠ±è¿è¥","id":712147},"right":{"article_title":"17ï½œå›è°ƒå‡½æ•°ï¼šåœ¨AIåº”ç”¨ä¸­å¼•å…¥å¼‚æ­¥é€šä¿¡æœºåˆ¶","id":713685}},"comments":[{"had_liked":false,"id":383165,"user_name":"è¿œæ¸¸","can_delete":false,"product_type":"c1","uid":2103322,"ip_address":"åŒ—äº¬","ucode":"73792ED128D57C","user_header":"https://static001.geekbang.org/account/avatar/00/20/18/1a/5f36bb6e.jpg","comment_is_top":false,"comment_ctime":1698584084,"is_pvip":false,"replies":[{"id":139607,"content":"å¯¹ï¼Œå¯ä»¥è·‘ä¸€ä¸‹å¤æ‚åœºæ™¯è¯•è¯•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1698771291,"ip_address":"ç‘å£«","comment_id":383165,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"Chain å’Œ Agent æ¥æŸ¥è¯¢æ•°æ®åº“ï¼Œè¿™ä¸¤ç§æ–¹å¼æœ‰ä»€ä¹ˆå¼‚åŒï¼Ÿ\né«˜é“ä¸Šï¼Œæ²¡æœ‰ç¯å¢ƒè¿è¡ŒæŸ¥çœ‹Promptï¼Œä»¥ä¸‹é çŒœå“ˆ\n1ã€Chainé‡‡ç”¨ä¸€è½®å¯¹è¯å¾—åˆ°ç»“æœï¼Œæ„å‘³ç€å¦‚æœè¡¨å¤šæ—¶ï¼Œä¼šå‘é€å¾ˆå¤šè¡¨çš„schemaåˆ°llmï¼Œä¸€ä¸ªæ˜¯æµªè´¹tokenï¼Œä¸€ä¸ªæ˜¯å¯èƒ½è¶…é•¿ã€‚\n2ã€Agenté‡‡ç”¨ReActæ–¹å¼é€æ­¥æ¨ç†æ‰§è¡Œï¼Œå¤šè½®å¯¹è¯å¾—åˆ°ç»“æœï¼Œä¸€ä¸ªæ˜¯å‡†ç¡®æ€§é«˜ï¼Œä¸€ä¸ªæ˜¯åªéœ€å°†ä¸Šè½®å¯¹è¯æ¨ç†å‡ºæ¥çš„éœ€è¦çš„è¡¨çš„schemaå‘é€åˆ°æœåŠ¡ç«¯ï¼ŒèŠ‚çœtokençš„åŒæ—¶é¿å…tokenè¶…å‡ºã€‚\nè¿™å¼•èµ·äº†å¦å¤–ä¸€ä¸ªæç«¯åœºæ™¯çš„æ€è€ƒï¼Œå¦‚æœéœ€è¦3è¡¨ç”šè‡³æ›´å¤šè¡¨è”æŸ¥ï¼Œä¸”è¿™3è¡¨éƒ½æœ‰ä¸Šç™¾ä¸ªå­—æ®µï¼ˆåœ¨å¤§å‹ä¸šåŠ¡ç³»ç»Ÿå¦‚ERPè¿™å¹¶ä¸å¤¸å¼ ï¼‰ï¼Œå¯èƒ½è¿˜æ˜¯ä¼šå¯¼è‡´tokenè¶…é•¿ã€‚\n\nç­‰æœ‰ç¯å¢ƒè·‘ä¸€ä¸‹çœ‹çœ‹Promptå’Œå¯¹è¯è½®æ¬¡éªŒè¯ä¸€ä¸‹çŒœæƒ³~","like_count":5,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630679,"discussion_content":"å¯¹ï¼Œå¯ä»¥è·‘ä¸€ä¸‹å¤æ‚åœºæ™¯è¯•è¯•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698771292,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382613,"user_name":"even","can_delete":false,"product_type":"c1","uid":1526343,"ip_address":"å¹¿ä¸œ","ucode":"2EDE76B1F80F33","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIfCY2mvbZ2Po4efYBhMJPacb9mlOicNI6Us4ph3ianrkGlUcop8ZlzN6QiaDrnvFcNeaAfwP7XAv5fw/132","comment_is_top":false,"comment_ctime":1697677463,"is_pvip":false,"replies":[{"id":139454,"content":"è¿™ä¸ªé—®é¢˜åŒå­¦é—®äº†ä¸¤æ¬¡ã€‚å¯æƒœæˆ‘ä¹Ÿä¸æ˜¯æ•°æ®åº“æ–¹é¢çš„ä¸“å®¶ã€‚æˆ‘è¯•ç€é—®LLMï¼Œç»™å‡ºçš„å›ç­”å¦‚ä¸‹ï¼š\n1. ä½¿ç”¨å¤šæ•°æ®åº“æŸ¥è¯¢å·¥å…·ã€‚ä¸€äº›ORMæ¡†æ¶å¦‚SQLAlchemyæ”¯æŒè·¨æ•°æ®åº“æŸ¥è¯¢ã€‚æˆ–è€…å¯ä»¥ä½¿ç”¨åƒDittoè¿™æ ·çš„å¤šæ•°æ®åº“æŸ¥è¯¢å·¥å…·ã€‚\n2. å°†ä¸åŒæ•°æ®åº“çš„æ•°æ®åŒæ­¥åˆ°ä¸€ä¸ªæ•°æ®åº“,ç„¶ååœ¨ä¸€ä¸ªæ•°æ®åº“ä¸­è¿›è¡ŒæŸ¥è¯¢ã€‚å¯ä»¥ä½¿ç”¨å·¥å…·å®ç°æ•°æ®åº“ä¹‹é—´çš„æ•°æ®åŒæ­¥ã€‚\n3. ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œå¼‚æ­¥æŸ¥è¯¢ã€‚å°†æŸ¥è¯¢ä»»åŠ¡å‘å¸ƒåˆ°æ¶ˆæ¯é˜Ÿåˆ—,ä¸åŒæ•°æ®åº“å„è‡ªç›‘å¬å¹¶æŸ¥è¯¢,æœ€åèšåˆç»“æœã€‚\n4. æŸ¥è¯¢æœåŠ¡åŒ–ã€‚å°†æ¯ä¸ªæ•°æ®åº“å°è£…ä¸ºæŸ¥è¯¢æœåŠ¡,åœ¨åº”ç”¨ä¸­è°ƒç”¨è¿™äº›æœåŠ¡ç„¶åèšåˆç»“æœã€‚\nå› ä¸ºæ²¡æœ‰ç›¸å…³ç»éªŒï¼Œæˆ‘å¹¶ä¸çŸ¥é“ä¸Šé¢çš„ç­”æ¡ˆæœ‰å¤šå¤§å¸®åŠ©ã€‚å¸Œæœ›æœ‰ç»éªŒçš„åŒå­¦å¸®åŠ©å›ç­”ä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1698142218,"ip_address":"ç‘å£«","comment_id":382613,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"è€å¸ˆï¼Œä½ å¥½ã€‚è¯·é—®å¦‚ä½•å¯¹å¤šæ•°æ®åº“çš„å¤šè¡¨è¿›è¡ŒæŸ¥è¯¢ï¼Œè¿™å—çš„å·¥ä½œæ–¹ä¾¿è¯¦ç»†ä»‹ç»ä¸‹å—ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630160,"discussion_content":"è¿™ä¸ªé—®é¢˜åŒå­¦é—®äº†ä¸¤æ¬¡ã€‚å¯æƒœæˆ‘ä¹Ÿä¸æ˜¯æ•°æ®åº“æ–¹é¢çš„ä¸“å®¶ã€‚æˆ‘è¯•ç€é—®LLMï¼Œç»™å‡ºçš„å›ç­”å¦‚ä¸‹ï¼š\n1. ä½¿ç”¨å¤šæ•°æ®åº“æŸ¥è¯¢å·¥å…·ã€‚ä¸€äº›ORMæ¡†æ¶å¦‚SQLAlchemyæ”¯æŒè·¨æ•°æ®åº“æŸ¥è¯¢ã€‚æˆ–è€…å¯ä»¥ä½¿ç”¨åƒDittoè¿™æ ·çš„å¤šæ•°æ®åº“æŸ¥è¯¢å·¥å…·ã€‚\n2. å°†ä¸åŒæ•°æ®åº“çš„æ•°æ®åŒæ­¥åˆ°ä¸€ä¸ªæ•°æ®åº“,ç„¶ååœ¨ä¸€ä¸ªæ•°æ®åº“ä¸­è¿›è¡ŒæŸ¥è¯¢ã€‚å¯ä»¥ä½¿ç”¨å·¥å…·å®ç°æ•°æ®åº“ä¹‹é—´çš„æ•°æ®åŒæ­¥ã€‚\n3. ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œå¼‚æ­¥æŸ¥è¯¢ã€‚å°†æŸ¥è¯¢ä»»åŠ¡å‘å¸ƒåˆ°æ¶ˆæ¯é˜Ÿåˆ—,ä¸åŒæ•°æ®åº“å„è‡ªç›‘å¬å¹¶æŸ¥è¯¢,æœ€åèšåˆç»“æœã€‚\n4. æŸ¥è¯¢æœåŠ¡åŒ–ã€‚å°†æ¯ä¸ªæ•°æ®åº“å°è£…ä¸ºæŸ¥è¯¢æœåŠ¡,åœ¨åº”ç”¨ä¸­è°ƒç”¨è¿™äº›æœåŠ¡ç„¶åèšåˆç»“æœã€‚\nå› ä¸ºæ²¡æœ‰ç›¸å…³ç»éªŒï¼Œæˆ‘å¹¶ä¸çŸ¥é“ä¸Šé¢çš„ç­”æ¡ˆæœ‰å¤šå¤§å¸®åŠ©ã€‚å¸Œæœ›æœ‰ç»éªŒçš„åŒå­¦å¸®åŠ©å›ç­”ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698142218,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1383930,"avatar":"https://static001.geekbang.org/account/avatar/00/15/1d/fa/89d625ed.jpg","nickname":"æ»´æ»´ç­”æ»´æ»´ç­”","note":"","ucode":"561C8765FC6C69","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":636737,"discussion_content":"è¿™ä¸ªä»–åº”è¯¥æ˜¯è¦é—®éœ€è¦å¤šè¡¨æŸ¥è¯¢çš„æ—¶å€™Agentè¯¥å¦‚ä½•å¤„ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1706854936,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382465,"user_name":"hello","can_delete":false,"product_type":"c1","uid":1464199,"ip_address":"æ¹–å—","ucode":"854500026E2187","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKhuGLVRYZibOTfMumk53Wn8Q0Rkg0o6DzTicbibCq42lWQoZ8lFeQvicaXuZa7dYsr9URMrtpXMVDDww/132","comment_is_top":false,"comment_ctime":1697424150,"is_pvip":false,"replies":[{"id":139295,"content":"åŒå­¦è¯´çš„å¯¹å“ˆï¼Œè¿™ä¸ªåŠŸèƒ½åªæ˜¯LangChainçš„å®éªŒæ€§åŠŸèƒ½çš„ä¸€éƒ¨åˆ†ã€‚è¯´ç™½äº†ï¼Œæ˜¯æ¢ç´¢æ€§çš„ï¼Œä¸æ˜¯éƒ¨ç½²åˆ°ç”Ÿäº§ç³»ç»Ÿçš„åŠŸèƒ½ã€‚\nLangChainåœ¨GitHubä¸Šå·²ç»åšäº†è¯´æ˜äº†ï¼ˆå¦‚ä¸‹ï¼‰ã€‚å½“ç„¶äº†ï¼ŒLangChainä½œä¸ºä¸€ä¸ªLLMæ¡†æ¶ï¼Œä»€ä¹ˆåŠŸèƒ½éƒ½æƒ³æ”¯æŒï¼Œä¹Ÿä»é£é™©æŠ•èµ„å…¬å¸çº¢æ‰èµ„æœ¬é‚£é‡Œç­¹é›†äº†è¶…è¿‡ 2000 ä¸‡ç¾å…ƒçš„èµ„é‡‘ï¼Œä¼°å€¼è‡³å°‘ä¸º 2 äº¿ç¾å…ƒã€‚LangChainçš„é‡å¿ƒè¿˜æ˜¯å¾ˆå¤§çš„ï¼Œä¸å¤ŸåŠŸèƒ½åšçš„å¥½ä¸å¥½ï¼Œä¹Ÿè¦å…ˆæœ‰è¿™ä¸ªåŠŸèƒ½ã€‚åŒ…æ‹¬RAGï¼Œä¹Ÿæœ‰ç«äº‰è€…çš„ã€‚æˆ‘ä»¬ä½œä¸ºå¼€å‘äººå‘˜ï¼Œç‰¹å®šçš„åŠŸèƒ½å¯ä»¥éšæ„é€‰æ‹©æ›´å¥½çš„æ¡†æ¶ã€‚\nğŸš¨ 2023 å¹´ 7 æœˆ 28 æ—¥å¯¹é€‰æ‹©é“¾ (SQLDatabase) è¿›è¡Œçš„é‡å¤§æ›´æ”¹ä¸ºäº†å˜å¾—langchainæ›´ç²¾ç®€ã€æ›´å®‰å…¨ï¼Œæˆ‘ä»¬æ­£åœ¨å°†ä¸€äº›é“¾è½¬ç§»åˆ°langchain_experimental. æ­¤è¿ç§»å·²ç»å¼€å§‹ï¼Œä½†æˆ‘ä»¬å°†ä¿æŒå‘åå…¼å®¹ç›´åˆ° 7 æœˆ 28 æ—¥ã€‚åœ¨é‚£ä¸€å¤©ï¼Œæˆ‘ä»¬å°†ä» ä¸­åˆ é™¤åŠŸèƒ½langchainã€‚è¯·åœ¨æ­¤å¤„é˜…è¯»æœ‰å…³åŠ¨æœºå’Œè¿›å±•çš„æ›´å¤šä¿¡æ¯ã€‚åœ¨æ­¤å¤„é˜…è¯»å¦‚ä½•è¿ç§»æ‚¨çš„ä»£ç ã€‚\nğŸš¨Breaking Changes for select chains (SQLDatabase) on 7&#47;28&#47;23\nIn an effort to make langchain leaner and safer, we are moving select chains to langchain_experimental. This migration has already started, but we are remaining backwards compatible until 7&#47;28. On that date, we will remove functionality from langchain. Read more about the motivation and the progress here. Read how to migrate your code here.","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":1809833,"ctime":1697451789,"ip_address":"ç‘å£«","comment_id":382465,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œä¸€èˆ¬çš„åŸºç¡€æ¨¡å‹éƒ½å…·å¤‡ä¸€å®šçš„SQLèƒ½åŠ›ï¼Œæ„Ÿè§‰ç”¨SQLDatabaseChain&#47;SQL Agentå¹¶æ²¡æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Œè€å¸ˆèƒ½å¦å¸®å¿™è§£ç­”ä¸‹ï¼Œä¸ºå•¥è¿˜ä¼šå‡ºç°ç±»SQLDatabaseChain&#47;SQL Agentç­‰å·¥å…·æ¥è§£å†³æ–‡æœ¬è½¬SQLçš„èƒ½åŠ›ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629632,"discussion_content":"åŒå­¦è¯´çš„å¯¹å“ˆï¼Œè¿™ä¸ªåŠŸèƒ½åªæ˜¯LangChainçš„å®éªŒæ€§åŠŸèƒ½çš„ä¸€éƒ¨åˆ†ã€‚è¯´ç™½äº†ï¼Œæ˜¯æ¢ç´¢æ€§çš„ï¼Œä¸æ˜¯éƒ¨ç½²åˆ°ç”Ÿäº§ç³»ç»Ÿçš„åŠŸèƒ½ã€‚\nLangChainåœ¨GitHubä¸Šå·²ç»åšäº†è¯´æ˜äº†ï¼ˆå¦‚ä¸‹ï¼‰ã€‚å½“ç„¶äº†ï¼ŒLangChainä½œä¸ºä¸€ä¸ªLLMæ¡†æ¶ï¼Œä»€ä¹ˆåŠŸèƒ½éƒ½æƒ³æ”¯æŒï¼Œä¹Ÿä»é£é™©æŠ•èµ„å…¬å¸çº¢æ‰èµ„æœ¬é‚£é‡Œç­¹é›†äº†è¶…è¿‡ 2000 ä¸‡ç¾å…ƒçš„èµ„é‡‘ï¼Œä¼°å€¼è‡³å°‘ä¸º 2 äº¿ç¾å…ƒã€‚LangChainçš„é‡å¿ƒè¿˜æ˜¯å¾ˆå¤§çš„ï¼Œä¸å¤ŸåŠŸèƒ½åšçš„å¥½ä¸å¥½ï¼Œä¹Ÿè¦å…ˆæœ‰è¿™ä¸ªåŠŸèƒ½ã€‚åŒ…æ‹¬RAGï¼Œä¹Ÿæœ‰ç«äº‰è€…çš„ã€‚æˆ‘ä»¬ä½œä¸ºå¼€å‘äººå‘˜ï¼Œç‰¹å®šçš„åŠŸèƒ½å¯ä»¥éšæ„é€‰æ‹©æ›´å¥½çš„æ¡†æ¶ã€‚\nğŸš¨ 2023 å¹´ 7 æœˆ 28 æ—¥å¯¹é€‰æ‹©é“¾ (SQLDatabase) è¿›è¡Œçš„é‡å¤§æ›´æ”¹ä¸ºäº†å˜å¾—langchainæ›´ç²¾ç®€ã€æ›´å®‰å…¨ï¼Œæˆ‘ä»¬æ­£åœ¨å°†ä¸€äº›é“¾è½¬ç§»åˆ°langchain_experimental. æ­¤è¿ç§»å·²ç»å¼€å§‹ï¼Œä½†æˆ‘ä»¬å°†ä¿æŒå‘åå…¼å®¹ç›´åˆ° 7 æœˆ 28 æ—¥ã€‚åœ¨é‚£ä¸€å¤©ï¼Œæˆ‘ä»¬å°†ä» ä¸­åˆ é™¤åŠŸèƒ½langchainã€‚è¯·åœ¨æ­¤å¤„é˜…è¯»æœ‰å…³åŠ¨æœºå’Œè¿›å±•çš„æ›´å¤šä¿¡æ¯ã€‚åœ¨æ­¤å¤„é˜…è¯»å¦‚ä½•è¿ç§»æ‚¨çš„ä»£ç ã€‚\nğŸš¨Breaking Changes for select chains (SQLDatabase) on 7/28/23\nIn an effort to make langchain leaner and safer, we are moving select chains to langchain_experimental. This migration has already started, but we are remaining backwards compatible until 7/28. On that date, we will remove functionality from langchain. Read more about the motivation and the progress here. Read how to migrate your code here.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1697451789,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383831,"user_name":"æ‚Ÿå°˜","can_delete":false,"product_type":"c1","uid":2189310,"ip_address":"åŒ—äº¬","ucode":"4E7E854340D3A4","user_header":"https://static001.geekbang.org/account/avatar/00/21/67/fe/5d17661a.jpg","comment_is_top":false,"comment_ctime":1699773236,"is_pvip":false,"replies":[{"id":140054,"content":"å—¯å—¯ï¼Œå¾ˆå¥½çš„é—®é¢˜ã€‚è¿™äº›å†…å®¹å¯ä»¥é€šè¿‡Promptæ¥è¾“å…¥ç»™LLMã€‚å¦ä¸€ä¸ªæ€è·¯æ˜¯æŠŠå¤§é‡çš„ä¿¡æ¯ç”¨å‘é‡çš„å½¢å¼å­˜å‚¨åœ¨Vector Storeé‡Œé¢ï¼Œéœ€è¦çš„æ—¶å€™æ‘˜å‡ºæ¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1699928645,"ip_address":"ç‘å£«","comment_id":383831,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"è€å¸ˆï¼Œå¦‚ä½•ä½¿LLMç†è§£æˆ‘å½“å‰çš„è¡¨çš„å­—æ®µä»¥åŠè¡¨å…³ç³»å‘¢ï¼Ÿç”¨ä»€ä¹ˆæ–¹å¼å‘Šè¯‰LLMï¼Œä»è€Œä½¿å®ƒèƒ½å¤Ÿç†è§£æˆ‘çš„ä¸šåŠ¡èƒŒæ™¯ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631727,"discussion_content":"å—¯å—¯ï¼Œå¾ˆå¥½çš„é—®é¢˜ã€‚è¿™äº›å†…å®¹å¯ä»¥é€šè¿‡Promptæ¥è¾“å…¥ç»™LLMã€‚å¦ä¸€ä¸ªæ€è·¯æ˜¯æŠŠå¤§é‡çš„ä¿¡æ¯ç”¨å‘é‡çš„å½¢å¼å­˜å‚¨åœ¨Vector Storeé‡Œé¢ï¼Œéœ€è¦çš„æ—¶å€™æ‘˜å‡ºæ¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699928645,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382641,"user_name":"even","can_delete":false,"product_type":"c1","uid":1526343,"ip_address":"å¹¿ä¸œ","ucode":"2EDE76B1F80F33","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIfCY2mvbZ2Po4efYBhMJPacb9mlOicNI6Us4ph3ianrkGlUcop8ZlzN6QiaDrnvFcNeaAfwP7XAv5fw/132","comment_is_top":false,"comment_ctime":1697709991,"is_pvip":false,"replies":[{"id":139452,"content":"åŸç†å’Œæ­¥éª¤æ˜¯å®Œå…¨ä¸€æ ·çš„å‘€ã€‚å¦‚ä½•å¤„ç†å•è¡¨ï¼Œå°±ä¸€æ ·çš„å»é—®LLMåœ¨å¤šè¡¨ä¸­æŸ¥è¯¢å°±å¥½äº†ã€‚æ³¨æ„ï¼Œè¿™ä¸ªåŠŸèƒ½ç›®å‰åªæ˜¯å®éªŒæ€§è´¨çš„ï¼Œä¸èƒ½çœŸæ­£çš„å–ä»£SQLè¯­å¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1698141999,"ip_address":"ç‘å£«","comment_id":382641,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"è€å¸ˆï¼Œè¯·é—®å¤šæ•°æ®åº“ï¼Œå¤šè¡¨å¦‚ä½•å»åšï¼Œæœ‰æ²¡æœ‰ç›¸å…³çš„æœ€ä½³å®è·µå’Œå‚è€ƒèµ„æ–™","like_count":1,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630158,"discussion_content":"åŸç†å’Œæ­¥éª¤æ˜¯å®Œå…¨ä¸€æ ·çš„å‘€ã€‚å¦‚ä½•å¤„ç†å•è¡¨ï¼Œå°±ä¸€æ ·çš„å»é—®LLMåœ¨å¤šè¡¨ä¸­æŸ¥è¯¢å°±å¥½äº†ã€‚æ³¨æ„ï¼Œè¿™ä¸ªåŠŸèƒ½ç›®å‰åªæ˜¯å®éªŒæ€§è´¨çš„ï¼Œä¸èƒ½çœŸæ­£çš„å–ä»£SQLè¯­å¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698142000,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382455,"user_name":"é™ˆä¸œ","can_delete":false,"product_type":"c1","uid":2213995,"ip_address":"å¹¿è¥¿","ucode":"FCDE6D237CC621","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Ge7uhlEVxicQT73YuomDPrVKI8UmhqxKWrhtO5GMNlFjrHWfd3HAjgaSribR4Pzorw8yalYGYqJI4VPvUyPzicSKg/132","comment_is_top":false,"comment_ctime":1697381707,"is_pvip":true,"replies":[{"id":139285,"content":"åŒå­¦å¥½ã€‚å¤šè½®å¯¹è¯çš„å®ç°ä¸»è¦æ˜¯ä¾é æ€»ç»“å’Œè®°å¿†æœºåˆ¶ï¼Œ\næˆ‘ä»¬çš„æœ€åä¸€ä¸ªå®æˆ˜ä¼šç»™å‡ºå¤šè½®å¯¹è¯çš„ç¤ºä¾‹å’Œéƒ¨ç½²ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç”¨æœ¬åœ°ç¼“å­˜å…ˆå‰å¯¹è¯çš„æ–¹å¼è®¾è®¡å‡ºæ›´å¤æ‚çš„Chatbotç³»ç»Ÿã€‚æˆ‘ä»¬è¿™é‡Œæ²¡æœ‰è¿‡å¤šæ·±å…¥ç ”ç©¶è¿™ä¸ªéƒ¨åˆ†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1697425564,"ip_address":"ç‘å£«","comment_id":382455,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"è€å¸ˆå¥½ã€‚å¦‚ä½•æœ¬åœ°åŒ–éƒ¨ç½²langchainå’Œagentï¼Œå¯ä»¥éšæ—¶äº¤äº’å‘¢ï¼Ÿè¯¾ç¨‹ä¸­éƒ½æ˜¯åœ¨ä¸€ä¸ªå›åˆçš„å¯¹è¯ï¼Œå¦‚ä½•å±•å¼€æŒç»­çš„å¤šä¸ªå¯¹è¯ï¼Ÿè°¢è°¢è€å¸ˆçš„æŒ‡å¼•å’Œè§£ç­”ã€‚","like_count":1,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629598,"discussion_content":"åŒå­¦å¥½ã€‚å¤šè½®å¯¹è¯çš„å®ç°ä¸»è¦æ˜¯ä¾é æ€»ç»“å’Œè®°å¿†æœºåˆ¶ï¼Œ\næˆ‘ä»¬çš„æœ€åä¸€ä¸ªå®æˆ˜ä¼šç»™å‡ºå¤šè½®å¯¹è¯çš„ç¤ºä¾‹å’Œéƒ¨ç½²ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç”¨æœ¬åœ°ç¼“å­˜å…ˆå‰å¯¹è¯çš„æ–¹å¼è®¾è®¡å‡ºæ›´å¤æ‚çš„Chatbotç³»ç»Ÿã€‚æˆ‘ä»¬è¿™é‡Œæ²¡æœ‰è¿‡å¤šæ·±å…¥ç ”ç©¶è¿™ä¸ªéƒ¨åˆ†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1697425564,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383832,"user_name":"æ‚Ÿå°˜","can_delete":false,"product_type":"c1","uid":2189310,"ip_address":"åŒ—äº¬","ucode":"4E7E854340D3A4","user_header":"https://static001.geekbang.org/account/avatar/00/21/67/fe/5d17661a.jpg","comment_is_top":false,"comment_ctime":1699773406,"is_pvip":false,"replies":[{"id":140055,"content":"æˆ‘éä¸“å®¶ï¼Œéšä¾¿å†™å†™ï¼ŒæŠ›ç –å¼•ç‰ï¼š\nï¼ˆä¸‹é¢å†…å®¹å«æœ‰GPTè¾…åŠ©ç”Ÿæˆï¼‰\n1. æ•°æ®å‡†å¤‡ä¸ç´¢å¼•å»ºç«‹ï¼š\né¦–å…ˆï¼Œç¡®ä¿ä½ æœ‰ä¸€ä¸ªç»“æ„åŒ–çš„æ•°æ®é›†ï¼Œå®ƒå¯ä»¥æ˜¯æ–‡æœ¬ã€å›¾åƒæˆ–å…¶ä»–å½¢å¼çš„æ•°æ®ã€‚ä½¿ç”¨Elasticsearchå»ºç«‹æ•°æ®ç´¢å¼•ã€‚è¿™æ¶‰åŠåˆ°å®šä¹‰æ•°æ®çš„æ˜ å°„ï¼ˆmappingï¼‰å’Œç´¢å¼•ï¼ˆindexingï¼‰è¿‡ç¨‹ã€‚\n2. é›†æˆLangChainä¸ESï¼š\nLangChainå¯ä»¥å°†è¯­è¨€æ¨¡å‹çš„è¾“å‡ºä½œä¸ºESæŸ¥è¯¢çš„è¾“å…¥ã€‚åœ¨LangChainä¸­ï¼Œé…ç½®ESçš„è¿æ¥å’Œç›¸å…³çš„æŸ¥è¯¢è®¾ç½®ã€‚ ----- è¿™é‡Œå¯èƒ½éœ€è¦è¿›ä¸€æ­¥çœ‹LangChainçš„æ–‡æ¡£\n3. å®šä¹‰æœç´¢ã€æ¨èå’Œæ’åºé€»è¾‘ï¼š\næœç´¢ï¼šå®šä¹‰å¦‚ä½•å°†ç”¨æˆ·çš„æŸ¥è¯¢è½¬æ¢ä¸ºESå¯ç†è§£çš„æ ¼å¼ã€‚è¿™å¯èƒ½æ¶‰åŠåˆ°ä½¿ç”¨è¯­è¨€æ¨¡å‹æ¥è§£ææŸ¥è¯¢çš„æ„å›¾å’Œä¸Šä¸‹æ–‡ã€‚\næ¨èï¼šåŸºäºæŒ‡å®šçš„å…³é”®è¯ï¼Œä½¿ç”¨è¯­è¨€æ¨¡å‹æ¥ç”Ÿæˆä¸è¿™äº›å…³é”®è¯ç›¸å…³çš„æŸ¥è¯¢ï¼Œç„¶åå°†è¿™äº›æŸ¥è¯¢å‘é€åˆ°ESã€‚\næ’åºï¼šå®šä¹‰ä¸€ä¸ªæ’åºé€»è¾‘ï¼Œå¯èƒ½åŸºäºæœç´¢ç»“æœçš„ç›¸å…³æ€§ã€æ—¥æœŸã€ç”¨æˆ·åå¥½ç­‰å› ç´ ã€‚\n4. é›†æˆè¯­è¨€æ¨¡å‹è¿›è¡Œå¢å¼ºå¤„ç†ï¼š\nä½¿ç”¨LangChainè°ƒç”¨å¤§å‹è¯­è¨€æ¨¡å‹æ¥å¢å¼ºæœç´¢å’Œæ¨èçš„æ•ˆæœã€‚è¿™å¯èƒ½åŒ…æ‹¬ç†è§£å¤æ‚çš„æŸ¥è¯¢ã€ç”Ÿæˆæ›´ç²¾ç¡®çš„å…³é”®è¯ç­‰ã€‚\n\nä¸Šè¿°æ­¥éª¤å…·ä½“æ˜¯å¦åˆé€‚ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥è®¨è®ºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1699929094,"ip_address":"ç‘å£«","comment_id":383832,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³ä½¿ç”¨ä¸Šè¿°èŒƒå¼ï¼Œä½¿ç”¨LangChainæ¡†æ¶è®©ESå’ŒLLMç»“åˆï¼Œç„¶åå®ç°æœç´¢ï¼ˆæ ¹æ®æŒ‡å®šæ¡ä»¶ï¼‰ã€æ¨èï¼ˆæ ¹æ®æŒ‡å®šå…³é”®è¯ï¼‰ã€æ’åºçš„åŠŸèƒ½ï¼Œè¯¥åˆ†å“ªå‡ ä¸ªæ­¥éª¤å®ç°ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631730,"discussion_content":"æˆ‘éä¸“å®¶ï¼Œéšä¾¿å†™å†™ï¼ŒæŠ›ç –å¼•ç‰ï¼š\nï¼ˆä¸‹é¢å†…å®¹å«æœ‰GPTè¾…åŠ©ç”Ÿæˆï¼‰\n1. æ•°æ®å‡†å¤‡ä¸ç´¢å¼•å»ºç«‹ï¼š\né¦–å…ˆï¼Œç¡®ä¿ä½ æœ‰ä¸€ä¸ªç»“æ„åŒ–çš„æ•°æ®é›†ï¼Œå®ƒå¯ä»¥æ˜¯æ–‡æœ¬ã€å›¾åƒæˆ–å…¶ä»–å½¢å¼çš„æ•°æ®ã€‚ä½¿ç”¨Elasticsearchå»ºç«‹æ•°æ®ç´¢å¼•ã€‚è¿™æ¶‰åŠåˆ°å®šä¹‰æ•°æ®çš„æ˜ å°„ï¼ˆmappingï¼‰å’Œç´¢å¼•ï¼ˆindexingï¼‰è¿‡ç¨‹ã€‚\n2. é›†æˆLangChainä¸ESï¼š\nLangChainå¯ä»¥å°†è¯­è¨€æ¨¡å‹çš„è¾“å‡ºä½œä¸ºESæŸ¥è¯¢çš„è¾“å…¥ã€‚åœ¨LangChainä¸­ï¼Œé…ç½®ESçš„è¿æ¥å’Œç›¸å…³çš„æŸ¥è¯¢è®¾ç½®ã€‚ ----- è¿™é‡Œå¯èƒ½éœ€è¦è¿›ä¸€æ­¥çœ‹LangChainçš„æ–‡æ¡£\n3. å®šä¹‰æœç´¢ã€æ¨èå’Œæ’åºé€»è¾‘ï¼š\næœç´¢ï¼šå®šä¹‰å¦‚ä½•å°†ç”¨æˆ·çš„æŸ¥è¯¢è½¬æ¢ä¸ºESå¯ç†è§£çš„æ ¼å¼ã€‚è¿™å¯èƒ½æ¶‰åŠåˆ°ä½¿ç”¨è¯­è¨€æ¨¡å‹æ¥è§£ææŸ¥è¯¢çš„æ„å›¾å’Œä¸Šä¸‹æ–‡ã€‚\næ¨èï¼šåŸºäºæŒ‡å®šçš„å…³é”®è¯ï¼Œä½¿ç”¨è¯­è¨€æ¨¡å‹æ¥ç”Ÿæˆä¸è¿™äº›å…³é”®è¯ç›¸å…³çš„æŸ¥è¯¢ï¼Œç„¶åå°†è¿™äº›æŸ¥è¯¢å‘é€åˆ°ESã€‚\næ’åºï¼šå®šä¹‰ä¸€ä¸ªæ’åºé€»è¾‘ï¼Œå¯èƒ½åŸºäºæœç´¢ç»“æœçš„ç›¸å…³æ€§ã€æ—¥æœŸã€ç”¨æˆ·åå¥½ç­‰å› ç´ ã€‚\n4. é›†æˆè¯­è¨€æ¨¡å‹è¿›è¡Œå¢å¼ºå¤„ç†ï¼š\nä½¿ç”¨LangChainè°ƒç”¨å¤§å‹è¯­è¨€æ¨¡å‹æ¥å¢å¼ºæœç´¢å’Œæ¨èçš„æ•ˆæœã€‚è¿™å¯èƒ½åŒ…æ‹¬ç†è§£å¤æ‚çš„æŸ¥è¯¢ã€ç”Ÿæˆæ›´ç²¾ç¡®çš„å…³é”®è¯ç­‰ã€‚\n\nä¸Šè¿°æ­¥éª¤å…·ä½“æ˜¯å¦åˆé€‚ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥è®¨è®ºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699929094,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383720,"user_name":"Geek_7ee455","can_delete":false,"product_type":"c1","uid":1527581,"ip_address":"æµ™æ±Ÿ","ucode":"76C69F26B0F653","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/270T9KAFd4oCxXXB1giaMDaJuTQVib8gPt77VkM5dbS3hW60kwTNnxMYpVibwWVdnASCrymBbwT7HI77URia0KUylw/132","comment_is_top":false,"comment_ctime":1699516906,"is_pvip":false,"replies":[{"id":140193,"content":"è¿™å°±æ ¹æ®ä¸šåŠ¡åœºæ™¯éœ€è¦æ¥è®¾è®¡ä½ çš„Pipelineï¼ŒåŒå­¦ç»™ä¸ªéœ€æ±‚çœ‹çœ‹ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1700583105,"ip_address":"ç‘å£«","comment_id":383720,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"è€å¸ˆè¿™ç§sqlæŸ¥è¯¢çš„é—®ç­”å’Œæ–‡æ¡£é—®ç­”æ€ä¹ˆç»“åˆèµ·æ¥ç”¨å‘¢","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":632242,"discussion_content":"è¿™å°±æ ¹æ®ä¸šåŠ¡åœºæ™¯éœ€è¦æ¥è®¾è®¡ä½ çš„Pipelineï¼ŒåŒå­¦ç»™ä¸ªéœ€æ±‚çœ‹çœ‹ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700583105,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382954,"user_name":"Monin","can_delete":false,"product_type":"c1","uid":3144503,"ip_address":"ä¸Šæµ·","ucode":"AA6C4C4F19FA14","user_header":"https://static001.geekbang.org/account/avatar/00/2f/fb/37/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1698227050,"is_pvip":false,"replies":[{"id":139529,"content":"LangChainç»™å‡ºçš„æ—¥å¿—é‡Œé¢åº”è¯¥æ˜¯æŠŠæ¯ä¸€ä¸ªLLMç”Ÿæˆçš„SQLè¯­å¥éƒ½è¾“å‡ºäº†çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1698381556,"ip_address":"ç‘å£«","comment_id":382954,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"è€å¸ˆ  å’¨è¯¢ä¸‹ å¯¹äºä¸€äº›ä¸šåŠ¡è¡¨å¦‚mysqlç­‰å«æœ‰ç›¸ä¼¼ä¸šåŠ¡è¯­ä¹‰çš„è¡¨å¾ˆå¤š  åœ¨LLMæ‰§è¡Œä¸šåŠ¡SQLæ—¶æœ‰æ—¶ä¼šå®šä½åˆ°é”™è¯¯çš„è¡¨  æœ‰ä»€ä¹ˆå¥½çš„è§£æ³•è®©agentæ—¢è¿”å›æœ€ç»ˆçš„ç»“æœ åŒæ—¶ä¹ŸæŠŠæ‰§è¡Œçš„SQLè¯­å¥ä¹Ÿè¿”å›ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630391,"discussion_content":"LangChainç»™å‡ºçš„æ—¥å¿—é‡Œé¢åº”è¯¥æ˜¯æŠŠæ¯ä¸€ä¸ªLLMç”Ÿæˆçš„SQLè¯­å¥éƒ½è¾“å‡ºäº†çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698381556,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":2,"child_discussions":[{"author":{"id":3144503,"avatar":"https://static001.geekbang.org/account/avatar/00/2f/fb/37/791d0f5e.jpg","nickname":"Monin","note":"","ucode":"AA6C4C4F19FA14","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":630392,"discussion_content":"æ˜¯çš„  æ—¥å¿—ä¼šæ˜¾ç¤ºå‡ºæ¥  ä½†æˆ‘ç”¨Gradioåšçš„å®¢æˆ·ç«¯åªè¿”å›æ¥äº†ç»“æœ   ä¹Ÿæƒ³æŠŠæ‰§è¡Œæ—¥å¿—é‡Œé¢çš„SQLè¯­å¥ä½œä¸ºç­”æ¡ˆçš„ä¸€éƒ¨åˆ†è¿›è¡Œè¿”å›  å¦‚ä½•å®ç°ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698382036,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":630391,"ip_address":"ä¸Šæµ·","group_id":0},"score":630392,"extra":""},{"author":{"id":1824198,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/4OnibLGuicHU7yMNJzWKt5ibg970tMLkBTSGa8eXau5spH3b8iaT0bA9VAnmB1lu4X6O3ic8G8ZlANmN3dg1JJMzX5g/132","nickname":"æ®µæ˜Ÿæ˜Ÿ","note":"","ucode":"8A6314B58EE047","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":3144503,"avatar":"https://static001.geekbang.org/account/avatar/00/2f/fb/37/791d0f5e.jpg","nickname":"Monin","note":"","ucode":"AA6C4C4F19FA14","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":637447,"discussion_content":"ä½ è§£å†³äº†è¿™ä¸ªé—®é¢˜å—ï¼Ÿæˆ‘ä¹Ÿé‡åˆ°ç›¸åŒçš„é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1708503924,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":630392,"ip_address":"å¹¿ä¸œ","group_id":0},"score":637447,"extra":""}]},{"author":{"id":2189310,"avatar":"https://static001.geekbang.org/account/avatar/00/21/67/fe/5d17661a.jpg","nickname":"æ‚Ÿå°˜","note":"","ucode":"4E7E854340D3A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631580,"discussion_content":"å¦‚æœåœ¨LLMæ‰§è¡Œä¸šåŠ¡SQLæ—¶æœ‰æ—¶ä¼šå®šä½åˆ°é”™è¯¯çš„è¡¨ï¼Œå»ºè®®é€šè¿‡ä¼˜åŒ–promtå»æå‡LLMå®šä½çš„å‡†ç¡®åº¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699775275,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":393714,"user_name":"yanyu-xin","can_delete":false,"product_type":"c1","uid":1899757,"ip_address":"å¹¿ä¸œ","ucode":"3AA389F9E4C236","user_header":"","comment_is_top":false,"comment_ctime":1724683472,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"æˆ‘ç”¨é€šä¹‰åƒé—®æ¨¡å‹ qwen-turbo ä»£æ›¿ OpenAI ã€‚ä»£ç è¿è¡ŒåŸºæœ¬å¯ä»¥ã€‚åªæ˜¯åœ¨è¿è¡Œ response = db_chain.run(&quot;æœ‰å¤šå°‘ç§çš„é²œèŠ±ï¼Ÿ&quot;) æ—¶:\n\n #1.  OpenAI èƒ½å°†â€œå¤šå°‘ç§â€è§£ç­”ä¸ºä¸åŒ Name çš„èŠ±ï¼Œæ˜¯&quot; SQLQuery:SELECT COUNT(DISTINCT Name) FROM Flowers &quot;ï¼ŒæŸ¥è¯¢æ˜¯æœ‰5ç§ä¸åŒçš„é²œèŠ±ã€‚\n\n#2.  è€Œåƒé—®æ¨¡å‹å°† â€œå¤šå°‘ç§â€è§£ç­”ä¸ºä¸åŒ Type  çš„èŠ±ã€‚å¯¼è‡´çš„æŸ¥è¯¢ç»“æœæ˜¯ ï¼š\n\n&gt; Entering new SQLDatabaseChain chain...\næœ‰å¤šå°‘ç§ä¸åŒçš„é²œèŠ±ï¼Ÿ\nSQLQuery:SELECT COUNT(DISTINCT Type) FROM Flowers;\nSQLResult: [(1,)]\nAnswer:æœ‰1ç§ä¸åŒçš„é²œèŠ±ã€‚\n&gt; Finished chain.\næœ‰1ç§ä¸åŒçš„é²œèŠ±ã€‚\n\n#3.  è¿™å°±æ˜¯è¯¾ç¨‹é‡Œè€å¸ˆè¯´çš„â€œæ¨¡ç³Šæ€§çš„é—®é¢˜ï¼šè‡ªç„¶è¯­è¨€æœ¬èº«æ˜¯æ¨¡ç³Šçš„ï¼Œæœºå™¨å¿…é¡»èƒ½å¤Ÿå‡†ç¡®åœ°è§£é‡Šè¿™ç§æ¨¡ç³Šæ€§ï¼Œå¹¶åœ¨å¿…è¦æ—¶å¯»æ±‚æ¾„æ¸…â€ã€‚ç”¨äºæœºå™¨åªæ˜¯ç›´æ¥ä½¿ç”¨â€œç§â€å¯¹åº”çš„è‹±è¯­â€œTypeâ€ï¼Œè€Œæ²¡æœ‰ç†è§£è¯­è¨€ä¸­â€œç§â€çš„å®é™…å«ä¹‰è¿˜åŒ…æ‹¬äº†ä¸åŒ Name çš„ã€‚\n#4.  è¿™å°±æ˜¯è€å¸ˆè¯´çš„â€œè¿‡åº¦ä¾èµ–ï¼šå¦‚æœè¿‡äºä¾èµ–æœºå™¨ä¸ºæˆ‘ä»¬åšå†³ç­–ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯èƒ½ä¼šå¤±å»å¯¹æ•°æ®çš„æ·±å…¥äº†è§£å’Œå¯¹ç»“æœçš„è´¨ç–‘â€ã€‚å¦‚æœæˆ‘æ²¡æœ‰æ ¡å¯¹æ•°æ®ï¼Œç®€å•å¥—ç”¨äº†æœºå™¨ç»“æœï¼Œæ²¡æœ‰æ·±å…¥æ€è€ƒå°±ä¼šå‡ºç°é”™è¯¯ã€‚","like_count":1},{"had_liked":false,"id":389587,"user_name":"å†¬ç“œ","can_delete":false,"product_type":"c1","uid":1058708,"ip_address":"ç¦å»º","ucode":"8685F458A33340","user_header":"https://static001.geekbang.org/account/avatar/00/10/27/94/f620a3a9.jpg","comment_is_top":false,"comment_ctime":1712938035,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100617601,"comment_content":"å¤§æ¨¡å‹æ€ä¹ˆç”Ÿæˆè¿™ä¸ªsqlè¯­å¥çš„å‘¢ã€‚å…·ä½“çš„è¯´ï¼Œå¤§æ¨¡å‹æ€ä¹ˆçŸ¥é“è¦è®¿é—®æ•°æ®åº“ä¸­çš„å“ªå¼ è¡¨ï¼Œä½¿ç”¨å“ªä¸ªå­—æ®µå‘¢ã€‚","like_count":1},{"had_liked":false,"id":382390,"user_name":"é»„ä½³","can_delete":false,"product_type":"c1","uid":1809833,"ip_address":"ç‘å£«","ucode":"8EC41D2EAB0E3C","user_header":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","comment_is_top":false,"comment_ctime":1697169800,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100617601,"comment_content":"ä»£ç å·²ç»æ›´æ–°ï¼Œhttps:&#47;&#47;github.com&#47;huangjia2019&#47;langchain\nç¥åŒå­¦ä»¬å­¦ä¹ æ„‰å¿«ï¼Œå¤šå¤šåˆ†äº«LangChainå­¦ä¹ å¿ƒå¾—æ„Ÿæ‚Ÿã€‚ä¼—äººæ‹¾æç«ç„°é«˜ï¼\n","like_count":1},{"had_liked":false,"id":395306,"user_name":"é‡‘è‰²æ—­å…‰","can_delete":false,"product_type":"c1","uid":1228177,"ip_address":"æ±Ÿè‹","ucode":"4A952B2725CBB3","user_header":"https://static001.geekbang.org/account/avatar/00/12/bd/91/80398dcc.jpg","comment_is_top":false,"comment_ctime":1730171157,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100617601,"comment_content":"Agent æç¤ºè¯ ï¼ˆéƒ¨åˆ†æˆªæ–­ï¼Œè¶…é•¿é™åˆ¶ï¼‰ï¼š\nYou are an agent designed to interact with a SQL database.\nGiven an input question, create a syntactically correct sqlite query to run, then look at the results of the query and return the answer.\nUnless the user specifies a specific number of examples they wish to obtain, always limit your query to at most 10 results.You can order the results by a relevant column to return the most interesting examples in the database.\nNever query for all the columns from a specific table, only ask for the relevant columns given the question.\nYou have access to tools for interacting with the database.\n\n\nsql_db_query - Input to this tool is a detailed and correct SQL query, output is a result from the database. \nsql_db_schema - Input to this tool is a comma-separated list of tables, output is the schema and sample rows for those tables. \nsql_db_list_tables - Input is an empty string, output is a comma-separated list of tables in the database.\nsql_db_query_checker - Use this tool to double check if your query is correct before executing it. \n\nUse the following format:\n\nQuestion: the input question you must answer\nThought: you should always think about what to do\nAction: the action to take, should be one of [sql_db_query, sql_db_schema, sql_db_list_tables, sql_db_query_checker]\nAction Input: the input to the action\nObservation: the result of the action\n... (this Thought&#47;Action&#47;Action Input&#47;Observation can repeat N times)\nThought: I now know the final answer\nFinal Answer: the final answer to the original input question\n\nBegin!\n\nQuestion: å“ªç§é²œèŠ±çš„å­˜è´§æ•°é‡æœ€å°‘ï¼Ÿ\nThought: I should look at t the database to see what I can query.  Then I should query the schema of the most relevant tables.&quot;","like_count":0},{"had_liked":false,"id":395305,"user_name":"é‡‘è‰²æ—­å…‰","can_delete":false,"product_type":"c1","uid":1228177,"ip_address":"æ±Ÿè‹","ucode":"4A952B2725CBB3","user_header":"https://static001.geekbang.org/account/avatar/00/12/bd/91/80398dcc.jpg","comment_is_top":false,"comment_ctime":1730171057,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100617601,"comment_content":"Chain æç¤ºè¯ï¼š\n&quot;You are a SQLite expert. Given an input question, first create a syntactically correct SQLite query to run, then look at the results of the query and return the answer to the input question.\nUnless the user specifies in the question a specific number of examples to obtain, query for at most 5 results using the LIMIT clause as per SQLite. You can order the results to return the most informative data in the database.\nNever query for all columns from a table. You must query only the columns that are needed to answer the question. Wrap each column name in double quotes (\\&quot;) to denote them as delimited identifiers.\nPay attention to use only the column names you can see in the tables below. Be careful to not query for columns that do not exist. Also, pay attention to which column is in which table.\nPay attention to use date(&#39;now&#39;) function to get the current date, if the question involves \\&quot;today\\&quot;.\n\nUse the following format:\n\nQuestion: Question here\nSQLQuery: SQL Query to run\nSQLResult: Result of the SQLQuery\nAnswer: Final answer here\nOnly use the following tables:\n\nCREATE TABLE \\&quot;Flowers\\&quot; (\n\\t\\&quot;ID\\&quot; INTEGER, \\t\\&quot;Name\\&quot; TEXT NOT NULL, \n\\t\\&quot;Type\\&quot; TEXT NOT NULL, \n\\t\\&quot;Source\\&quot; TEXT NOT NULL, \n\\t\\&quot;PurchasePrice\\&quot; REAL, \n\\t\\&quot;SalePrice\\&quot; REAL, \n\\t\\&quot;StockQuantity\\&quot; INTEGER, \n\\t\\&quot;SoldQuantity\\&quot; INTEGER, \n\\t\\&quot;ExpiryDate\\&quot; DATE,\n\\t\\&quot;Description\\&quot; TEXT, \n\\t\\&quot;EntryDate\\&quot; DATE DEFAULT CURRENT_DATE, \n\\tPRIMARY KEY (\\&quot;ID\\&quot;)\n)\n\n&#47;*\n3 rows from Flowers table:\nID\\tName\\tType\\tSource\\tPurchasePrice\\tSalePrice\\tStockQuantity\\tSoldQuantity\\tExpiryDate\\tDescription\\tEntryDate\n1\\tRose\\tFlower\\tFrance\\t1.2\\t2.5\\t100\\t10\\t2023-12-31\\tA beautiful red rose\\t2024-10-28\n2\\tTulip\\tFlower\\tNetherlands\\t0.8\\t2.0\\t150\\t25\\t2023-12-31\\tA colorful tulip\\t2024-10-28\n3\\tLily\\tFlower\\tChina\\t1.5\\t3.0\\t80\\t5\\t2023-12-31\\tAn elegant white lily\\t2024-10-28\n*&#47;\n\nQuestion: æœ‰å¤šå°‘ç§ä¸åŒçš„é²œèŠ±\n\nSQLQuery:&quot;\n","like_count":0},{"had_liked":false,"id":395304,"user_name":"é‡‘è‰²æ—­å…‰","can_delete":false,"product_type":"c1","uid":1228177,"ip_address":"æ±Ÿè‹","ucode":"4A952B2725CBB3","user_header":"https://static001.geekbang.org/account/avatar/00/12/bd/91/80398dcc.jpg","comment_is_top":false,"comment_ctime":1730171037,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100617601,"comment_content":"Chain å’Œ Agent æç¤ºè¯çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼š\n1. Chain é»˜è®¤çš„è¡Œä¸ºå°±æ˜¯å°†è¡¨ç»“æ„æ’å…¥æç¤ºè¯\n2. Agent é€šè¿‡ReActçš„æ€è€ƒè¿‡ç¨‹è·å–è¡¨ç»“æ„æ’å…¥æç¤ºè¯\n","like_count":0},{"had_liked":false,"id":393371,"user_name":"å‹¤å°ç ","can_delete":false,"product_type":"c1","uid":1071860,"ip_address":"åŒ—äº¬","ucode":"E9813F165F5EA5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKr3ZPRg8ECLpOkfpN1ny8HGV8DIkQ0fo4blKFSQgK0x76C5WiaxFXQpoIqTHWEV3bia603bBmtwZcg/132","comment_is_top":false,"comment_ctime":1723613856,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100617601,"comment_content":"ä½³å“¥å¥½ã€‚ä½¿ç”¨ chain å’Œ agent æŸ¥è¯¢ DB æ—¶å‘ç°LLMè¾“å‡ºçš„å†…å®¹ä¸ç¨³å®šæˆ–æœ‰SQLé”™è¯¯ï¼Œä¼šé€ æˆæ•´ä¸ªæµç¨‹çš„å¼‚å¸¸ã€‚è¿™ç§æƒ…å†µä¸‹é€šå¸¸åº”è¯¥å¦‚ä½•å¤„ç†ï¼Ÿå¦‚æœæ˜¯ç”Ÿäº§ç¯å¢ƒä¸­å­˜åœ¨è¿™æ ·çš„é—®é¢˜ï¼Œå°±ä¸èƒ½ç¨³å®šå¯¹å¤–æä¾›æœåŠ¡ï¼Œé‚£ä¹ˆæ­¤åŠŸèƒ½å°±å¤±å»æ„ä¹‰äº†ã€‚\n\næœ¬åœ°ç¯å¢ƒï¼š\nlangchain == 0.2.12\nOllama éƒ¨ç½² llama3.1:8b å’Œ qwen2:7b\n\näº§ç”Ÿçš„é”™è¯¯å¦‚ï¼š\n# è¯·æ±‚å¹³å‡ä»·æ ¼æ—¶\n&gt; Entering new SQLDatabaseChain chain...\nå¹³å‡é”€å”®ä»·æ ¼æ˜¯å¤šå°‘ï¼Ÿ\nSQLQuery:SELECT AVG(&quot;SalePrice&quot;) FROM &quot;Flowers\n\n# æ±‚æ³•å›½è¿›å£é²œèŠ±ç§ç±»æ•°æ—¶\n&gt; Entering new SQLDatabaseChain chain...\nä»æ³•å›½è¿›å£çš„é²œèŠ±æœ‰å¤šå°‘ç§ï¼Ÿ\nSQLQuery:SELECT COUNT(&quot;ID&quot;) FROM Flowers WHERE &quot;Source&quot; = &#39;France\n\n# å¹³å‡é”€å”®ä»·æ ¼æ˜¯å¤šå°‘ï¼Ÿ\nValueError: An output parsing error occurred. In order to pass this error back to the agent and have it try again, pass `handle_parsing_errors=True` to the AgentExecutor. This is the error: Parsing LLM output produced both a final answer and a parse-able action:: I know the final answer by looking at the schema of Flowers table and relevant columns.\n\nFinal Answer: The average sale price is calculated as follows:\n\nAverage Sale Price = Sum(SalePrice) &#47; Count(ID)\n\nTo get this value, I can query the &#39;SalePrice&#39; column in the &#39;Flowers&#39; table:\n\nAction: sql_db_query_checker\nAction Input: \n```\nSELECT AVG(SalePrice)\nFROM Flowers;\n``\n","like_count":0},{"had_liked":false,"id":392606,"user_name":"å¼ ç”³å‚²","can_delete":false,"product_type":"c1","uid":1182372,"ip_address":"åŒ—äº¬","ucode":"22D46BC529BA8A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0a/a4/828a431f.jpg","comment_is_top":false,"comment_ctime":1721288741,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":2,"score":3,"product_id":100617601,"comment_content":"ç¬¬16è®²æ‰“å¡~\nç‰¹åˆ«è®¤åŒè€å¸ˆçš„è§‚ç‚¹ï¼šè‡ªç„¶è¯­è¨€å’Œç¼–ç¨‹è¯­è¨€ä¹‹é—´çš„ç•Œé™æ­£åœ¨æ¶ˆå¤±ï¼Œæœªæ¥ä¹Ÿè®¸ä¸å†éœ€è¦ç¨‹åºå‘˜è¿™ä¸ªèŒä¸šï¼Œæˆ–è€…è¯´æ¯ä¸ªäººéƒ½å¯ä»¥æ˜¯ç¨‹åºå‘˜~","like_count":0},{"had_liked":false,"id":392389,"user_name":"å­™å¿—æƒ ","can_delete":false,"product_type":"c1","uid":1103449,"ip_address":"æµ™æ±Ÿ","ucode":"04F0AAF12EA847","user_header":"https://static001.geekbang.org/account/avatar/00/10/d6/59/6b7ce4f0.jpg","comment_is_top":false,"comment_ctime":1720767757,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100617601,"comment_content":"è€å¸ˆï¼Œæˆ‘çœ‹sqlDatabaseç›®å‰ä¸æ”¯æŒDorisï¼Œå¦‚æœè¦ä½¿ç”¨æŸ¥è¯¢Dorisçš„è¯ï¼Œéœ€è¦è‡ªå·±å¦‚ä½•æ“ä½œå‘¢","like_count":0},{"had_liked":false,"id":389590,"user_name":"Geek_db658d","can_delete":false,"product_type":"c1","uid":3875317,"ip_address":"å¤©æ´¥","ucode":"9456D047795B6F","user_header":"","comment_is_top":false,"comment_ctime":1712977808,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100617601,"comment_content":"è€å¸ˆ æˆ‘ä»¬æ˜¯å¦å¯ä»¥åˆ†åˆ«ç”¨ä¸¤ä¸ªå¤§æ¨¡å‹ï¼Œä¸€ä¸ªå¾®è°ƒåä¸“é—¨ç”Ÿæˆsqlï¼Œä¸€ä¸ªè‡ªç„¶å¯¹è¯æ¨¡å‹å°†sqlæŸ¥è¯¢ç»“æœè¿”å›ã€‚ç”¨transformé“¾åŒ…è£¹SQLDatabaseChain.from_llmæˆ–è€…agentï¼Œå†ç”¨sequencialé“¾é¡ºåºè°ƒç”¨åç»­çš„è¿”å›è‡ªç„¶è¯­è¨€","like_count":0}]}