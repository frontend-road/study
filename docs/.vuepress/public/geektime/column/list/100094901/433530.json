{"id":433530,"title":"04 | æ·±å…¥ç†è§£æ ˆï¼šä»CPUå’Œå‡½æ•°çš„è§†è§’çœ‹æ ˆçš„ç®¡ç†","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æµ·çº³ã€‚</p><p>ä¸ŠèŠ‚è¯¾ï¼Œæˆ‘ä»¬è®²åˆ°ï¼Œæ ˆè¢«æ“ä½œç³»ç»Ÿå®‰æ’åœ¨è¿›ç¨‹çš„é«˜åœ°å€å¤„ï¼Œå®ƒæ˜¯å‘ä¸‹å¢é•¿çš„ã€‚ä½†è¿™åªæ˜¯å¯¹æ ˆç›¸å…³çŸ¥è¯†çš„â€œæµ…å°è¾„æ­¢â€ã€‚é‚£æˆ‘ä»¬ä»Šå¤©è¿™èŠ‚è¯¾ï¼Œå°±ä¼šè·Ÿç€å‰é¢çš„è„‰ç»œï¼Œè®©ä½ å¯ä»¥æ›´æ·±åˆ»åœ°ç†è§£æ ˆçš„è¿è¡ŒåŸç†ã€‚</p><p>æ ˆæ˜¯æ¯ä¸€ä¸ªç¨‹åºå‘˜éƒ½å¾ˆç†Ÿæ‚‰çš„è¯é¢˜ï¼Œä½†ä½ æ•¢è¯´ä½ çœŸçš„å®Œå…¨äº†è§£å®ƒå—ï¼Ÿæˆ‘ç›¸ä¿¡ï¼Œä½ åœ¨å·¥ä½œä¸­è‚¯å®šé‡åˆ°è¿‡æ ˆæº¢å‡ºï¼ˆStackOverflowï¼‰çš„é”™è¯¯ï¼Œæ¯”å¦‚åœ¨å†™é€’å½’å‡½æ•°çš„æ—¶å€™ï¼Œå½“æ¼æ‰é€€å‡ºæ¡ä»¶ï¼Œæˆ–è€…é€€å‡ºæ¡ä»¶ä¸å°å¿ƒå†™é”™äº†ï¼Œå°±ä¼šå‡ºç°æ ˆæº¢å‡ºé”™è¯¯ã€‚æˆ‘ä»¬ä¹Ÿç»å¸¸å¬è¯´ç¼“å†²åŒºæº¢å‡ºå¸¦æ¥çš„ä¸¥é‡çš„å®‰å…¨é—®é¢˜ï¼Œè¿™åœ¨æ—¥å¸¸çš„å·¥ä½œä¸­éƒ½æ˜¯è¦é¿å…çš„ã€‚</p><p>æ‰€ä»¥ï¼Œä»Šå¤©è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬ç»§ç»­æ·±å…¥æ¢è®¨ä¸€ä¸‹æ ˆè¿™ä¸ªè¯é¢˜ï¼Œæˆ‘ä¼šå¸¦ä½ åŸºäºâ€œç¬¦åˆäººçš„ç›´è§‚æ€ç»´â€ï¼Œä¹Ÿå°±æ˜¯å‡½æ•°çš„å±‚é¢å’ŒCPUçš„æœºå™¨æŒ‡ä»¤å±‚é¢ï¼Œå¤šè§’åº¦æ¥ç†è§£æ ˆç›¸å…³çš„æ¦‚å¿µã€‚è¿™æ ·ï¼Œä½ ä»¥åé‡åˆ°ä¸æ ˆç›¸å…³çš„é—®é¢˜çš„æ—¶å€™ï¼Œæ‰çŸ¥é“å¦‚ä½•ç€æ‰‹è¿›è¡Œæ’æŸ¥ã€‚æœ€åï¼Œæˆ‘ä»¬è¿˜ä¼šé€šè¿‡ä¸€ä¸ªç¼“å†²åŒºæº¢å‡ºæ”»å‡»æ ˆçš„æ¡ˆä¾‹ï¼Œçœ‹çœ‹æˆ‘ä»¬åœ¨æ—¥å¸¸å·¥ä½œä¸­å¦‚ä½•æå‡ä»£ç çš„å¥å£®åº¦å’Œå®‰å…¨æ€§ã€‚</p><h2>å‡½æ•°ä¸æ ˆå¸§</h2><p>å½“æˆ‘ä»¬åœ¨è°ƒç”¨ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼ŒCPUä¼šåœ¨æ ˆç©ºé—´ï¼ˆè¿™å½“ç„¶æ˜¯çº¿æ€§ç©ºé—´çš„ä¸€éƒ¨åˆ†ï¼‰é‡Œå¼€è¾Ÿä¸€å°å—åŒºåŸŸï¼Œè¿™ä¸ªå‡½æ•°çš„å±€éƒ¨å˜é‡éƒ½åœ¨è¿™ä¸€å°å—åŒºåŸŸé‡Œå­˜æ´»ã€‚å½“å‡½æ•°è°ƒç”¨ç»“æŸçš„æ—¶å€™ï¼Œè¿™ä¸€å°å—åŒºåŸŸé‡Œçš„å±€éƒ¨å˜é‡å°±ä¼šè¢«å›æ”¶ã€‚</p><p>è¿™ä¸€å°å—åŒºåŸŸå¾ˆåƒä¸€ä¸ªæ¡†å­ï¼Œæ‰€ä»¥å¤§å®¶å°±å‘½åå®ƒä¸ºstack frameã€‚frameæœ¬æ„æ˜¯æ¡†å­çš„æ„æ€ï¼Œåœ¨ç¿»è¯‘çš„æ—¶å€™è¢«è¯‘ä¸ºå¸§ï¼Œç°åœ¨å®ƒçš„ä¸­æ–‡åå­—å°±æ˜¯æ ˆå¸§äº†ã€‚</p><!-- [[[read_end]]] --><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥è¯´ï¼Œ<strong>æ ˆå¸§æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°çš„æ´»åŠ¨è®°å½•ã€‚</strong>å½“æŸä¸ªå‡½æ•°æ­£åœ¨æ‰§è¡Œæ—¶ï¼Œå®ƒçš„æ´»åŠ¨è®°å½•å°±ä¼šå­˜åœ¨ï¼Œå½“å‡½æ•°æ‰§è¡Œç»“æŸæ—¶ï¼Œæ´»åŠ¨è®°å½•ä¹Ÿè¢«é”€æ¯ã€‚</p><p>ä¸è¿‡ï¼Œä½ è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä¸€ä¸ªå‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œå®ƒå¯ä»¥è°ƒç”¨å…¶ä»–å‡½æ•°ï¼Œè¿™ä¸ªæ—¶å€™å®ƒçš„æ ˆå¸§è¿˜æ˜¯å­˜åœ¨çš„ã€‚ä¾‹å¦‚ï¼ŒAå‡½æ•°è°ƒç”¨Bå‡½æ•°ï¼Œæ­¤æ—¶Açš„æ ˆå¸§ä¸ä¼šè¢«é”€æ¯ï¼Œè€Œæ˜¯ä¼šåœ¨Aæ ˆå¸§çš„ä¸‹æ–¹ï¼Œå†å»åˆ›å»ºBå‡½æ•°çš„æ ˆå¸§ã€‚åªæœ‰å½“Bå‡½æ•°æ‰§è¡Œå®Œäº†ï¼ŒBçš„æ ˆå¸§ä¹Ÿè¢«é”€æ¯äº†ï¼ŒCPUæ‰ä¼šå›åˆ°Açš„æ ˆå¸§é‡Œç»§ç»­æ‰§è¡Œã€‚</p><p>æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­è¯´æ˜ä¸€ä¸‹ï¼Œå°±å¾ˆå¥½ç†è§£äº†ã€‚ä½ å¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸ªä»£ç ï¼š</p><pre><code>#include &lt;stdio.h&gt;\n\nvoid swap(int a, int b) {\n    int t = a;\n    a = b;\n    b = t;\n}\n\nvoid main() {\n    int a = 2;\n    int b = 3;\n    swap(a, b);\n    printf(&quot;a is %d, b is %d\\n&quot;, a, b);\n}\n</code></pre><p>ä½ å¯ä»¥çœ‹åˆ°ï¼Œåœ¨swapå‡½æ•°ä¸­ï¼Œaå’Œbçš„å€¼åšäº†ä¸€æ¬¡äº¤æ¢ï¼Œä½†æ˜¯åœ¨mainå‡½æ•°é‡Œï¼Œæ‰“å°aå’Œbçš„å€¼ï¼Œaè¿˜æ˜¯2ï¼Œbè¿˜æ˜¯3ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿä»æ ˆå¸§çš„è§’åº¦ï¼Œè¿™ä¸ªé—®é¢˜å°±éå¸¸å®¹æ˜“ç†è§£ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/3a/68/3a1d6eed77df6233ef0b527c37d34f68.jpg?wh=2284x946\" alt=\"\"></p><p>åœ¨mainå‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œmainçš„æ ˆå¸§é‡Œå­˜åœ¨å˜é‡aå’Œbã€‚å½“mainåœ¨è°ƒç”¨swapæ–¹æ³•çš„æ—¶å€™ï¼Œä¼šåœ¨mainçš„å¸§ä¸‹é¢æ–°å»ºswapçš„æ ˆå¸§ã€‚swapçš„å¸§é‡Œä¹Ÿæœ‰å±€éƒ¨å˜é‡aå’Œbï¼Œä½†æ˜¯æ˜æ˜¾è¿™ä¸ªaã€bä¸mainå‡½æ•°é‡Œçš„aã€bæ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œä¸ç®¡å¯¹swapçš„å¸§é‡Œçš„a/bå˜é‡åšä»»ä½•æ“ä½œéƒ½ä¸ä¼šå½±å“mainå‡½æ•°çš„æ ˆå¸§ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†é€šè¿‡ä¸€ä¸ªé€’å½’çš„ä¾‹å­æ¥åŠ æ·±å¯¹æ ˆçš„ç†è§£ã€‚ç”±äºé€’å½’æ‰§è¡Œçš„è¿‡ç¨‹ä¼šå‡ºç°å‡½æ•°è‡ªå·±è°ƒç”¨è‡ªå·±çš„æƒ…å†µï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªå‡½æ•°ä¼šå¯¹åº”å¤šä¸ªåŒæ—¶æ´»è·ƒçš„è®°å½•ï¼ˆå³æ ˆå¸§ï¼‰ã€‚æ‰€ä»¥ï¼Œç†è§£äº†é€’å½’å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œæˆ‘ä»¬å°±èƒ½æ›´åŠ æ·±åˆ»åœ°ç†è§£æ ˆå¸§ä¸å‡½æ•°çš„å…³ç³»ã€‚</p><h2>å½“æˆ‘ä»¬åœ¨è°ˆé€’å½’æ—¶ï¼Œæˆ‘ä»¬åœ¨è°ˆä»€ä¹ˆ</h2><p>æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹æœ€ç»å…¸çš„é€’å½’é—®é¢˜ï¼š<strong>æ±‰è¯ºå¡”</strong>ã€‚æ±‰è¯ºå¡”é—®é¢˜æ˜¯è¿™æ ·æè¿°çš„ï¼šæœ‰ä¸‰æ ¹æŸ±å­ï¼Œè®°ä¸ºAã€Bã€Cï¼Œå…¶ä¸­AæŸ±å­ä¸Šæœ‰nä¸ªç›˜å­ï¼Œä»ä¸Šåˆ°ä¸‹çš„ç¼–å·ä¾æ¬¡ä¸º1åˆ°nï¼Œä¸”ä¸Šé¢çš„ç›˜å­ä¸€å®šæ¯”ä¸‹é¢çš„ç›˜å­å°ã€‚è¦æ±‚ä¸€æ¬¡åªèƒ½ç§»åŠ¨ä¸€åªç›˜å­ï¼Œä¸”å¤§çš„ç›˜å­ä¸èƒ½å‹åœ¨å°çš„ç›˜å­ä¸Šï¼Œé‚£ä¹ˆå°†æ‰€æœ‰ç›˜å­ä»Aç§»åˆ°Cæ€»å…±éœ€è¦å¤šå°‘æ­¥ï¼Ÿ</p><p>è¿™é“é¢˜çš„è¯¦ç»†åˆ†æè¿‡ç¨‹æ˜¯ä¸€ç§é€’å½’æ¨å¯¼çš„è¿‡ç¨‹ï¼Œä¸æ˜¯æˆ‘ä»¬è¿™èŠ‚è¯¾çš„é‡ç‚¹ï¼Œå¦‚æœä½ å¯¹è§£æ³•æ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥è‡ªå·±æŸ¥æ‰¾ç›¸å…³èµ„æ–™ã€‚æˆ‘ä»¬è¿™é‡Œï¼Œé‡ç‚¹æ¥è®²è§£é€’å½’ç¨‹åºæ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œæ ˆæ˜¯æ€ä¹ˆæ ·å˜åŒ–çš„ï¼Œè¿™æ ·å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç†è§£æ ˆçš„åŸºæœ¬å·¥ä½œåŸç†ã€‚</p><p>ä½ å…ˆçœ‹ä¸€ä¸‹æ±‰è¯ºå¡”é—®é¢˜çš„æ±‚è§£ç¨‹åºï¼š</p><pre><code>#include &lt;stdio.h&gt;\n\nvoid move(char src, char dst, int n) {\n    printf(&quot;move plate %d form %c to %c\\n&quot;, n, src, dst);\n}\n\nvoid hanoi(char src, char dst, char aux, int n) {\n    if (n == 1) {\n        move(src, dst, 1);\n        return;\n    }\n\n    hanoi(src, aux, dst, n-1);\n    move(src, dst, n);\n    hanoi(aux, dst, src, n-1);\n}\n\nint main() {\n    hanoi('A', 'C', 'B', 5);\n}\n</code></pre><p>è¿™æ®µä»£ç å¯ä»¥æ‰“å°å‡ºå€Ÿç”±BæŸ±å­å°†5ä¸ªç›˜å­ä»Aæ¬ç§»åˆ°Cçš„æ‰€æœ‰æ­¥éª¤ã€‚è¿™ä¸ªçš„æ ¸å¿ƒæ˜¯hanoiå‡½æ•°ï¼Œåœ¨æ·±å…¥åˆ†æä»£ç çš„æ‰§è¡Œè¿‡ç¨‹ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆä»ç¬¦åˆç›´è§‚æ€ç»´çš„è§’åº¦å°è¯•ç†è§£hanoiå‡½æ•°ã€‚</p><p>hanoiå‡½æ•°æœ‰å››ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªsrcä»£è¡¨è¦æ¬çš„èµ·å§‹æŸ±å­ï¼ˆå¼€å§‹æ—¶æ˜¯Aï¼‰ï¼Œç¬¬äºŒä¸ªä»£è¡¨ç›®æ ‡æŸ±å­ï¼ˆå¼€å§‹æ—¶æ˜¯Cï¼‰ï¼Œç¬¬ä¸‰ä¸ªä»£è¡¨å¯ä»¥å€Ÿç”¨çš„ä¸­é—´çš„é‚£ä¸ªæŸ±å­ï¼ˆå¼€å§‹æ—¶æ˜¯Bï¼‰ï¼Œç¬¬å››ä¸ªå‚æ•°ä»£è¡¨ä¸€å…±è¦æ¬çš„ç›˜å­æ€»æ•°ï¼ˆå¼€å§‹æ—¶æ˜¯5ï¼‰ã€‚</p><p>ä»£ç çš„ç¬¬13è¡Œçš„æ„ä¹‰æ˜¯ï¼Œå¦‚æœè¦ä»Aæ¬5ä¸ªç›˜å­åˆ°Cï¼Œå¯ä»¥å…ˆå°†4ä¸ªç›˜å­æ¬åˆ°Bä¸Šï¼Œç„¶åç¬¬14è¡Œä»£è¡¨å°†ç¬¬5ä¸ªç›˜å­ä»Aæ¬åˆ°Cï¼Œç¬¬15è¡Œä»£è¡¨æŠŠBä¸Šé¢çš„4ä¸ªç›˜å­æ¬åˆ°Cä¸Šå»ã€‚ç¬¬8è¡Œçš„åˆ¤æ–­æ˜¯è¯´å½“åªæ¬ä¸€ä¸ªç›˜å­çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç›´æ¥è°ƒç”¨moveæ–¹æ³•ã€‚</p><p>ä»¥ä¸Šå°±æ˜¯é€’å½’ç¨‹åºçš„è®¾è®¡æ€è·¯ã€‚ä¸‹é¢æˆ‘ä»¬å†å…·ä½“åˆ†æè¿™ä¸ªä»£ç çš„æ‰§è¡Œè¿‡ç¨‹ã€‚ä¸ºäº†ç®€ä¾¿èµ·è§ï¼Œæˆ‘ä»¬é€‰æ‹©n=3è¿›è¡Œåˆ†æã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/c2/4b/c252544e2dcf7fb2049b7dc32009a34b.jpg?wh=2284x1471\" alt=\"\"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå½“ç¨‹åºåœ¨æ‰§è¡Œhanoi(A, C, B, 3)æ—¶ï¼ŒCPUä¼šä¸ºå…¶åˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼Œè¿™ä¸€å¸§é‡Œè®°å½•ç€å˜é‡srcã€dstã€auxå’Œnã€‚</p><p>æ­¤æ—¶nä¸º3ï¼Œæ‰€ä»¥ï¼Œä»£ç å¯ä»¥æ‰§è¡Œåˆ°ç¬¬13è¡Œï¼Œç„¶åå°±ä¼šè°ƒç”¨æ‰§è¡Œhanoi(A, B, C, 2)ã€‚è¿™ä»£è¡¨ç€å°†2ä¸ªç›˜å­ä»Aæ¬åˆ°Bï¼ŒåŒæ ·CPUä¹Ÿä¼šä¸ºè¿™æ¬¡è°ƒç”¨åˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼›å½“è¿™ä¸€æ¬¡è°ƒç”¨æ‰§è¡Œåˆ°ç¬¬13è¡Œæ—¶ï¼Œä¼šå†è°ƒç”¨æ‰§è¡Œhanoi(A, C, B, 1)ï¼Œä»£è¡¨æŠŠä¸€ä¸ªç›˜å­ä»Aæ¬åˆ°Cã€‚ä¸è¿‡ï¼Œç”±äºè¿™ä¸€æ¬¡è°ƒç”¨nä¸º1ï¼Œæ‰€ä»¥ä¼šç›´æ¥è°ƒç”¨moveå‡½æ•°ï¼Œæ‰“å°ç¬¬ä¸€ä¸ªæ­¥éª¤â€œæŠŠç›˜å­1ä»Aæ¬åˆ°Câ€ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œç¨‹åºå°±ä¼šå›åˆ°hanoi(A, B, C, 2)çš„æ ˆå¸§ï¼Œç»§ç»­æ‰§è¡Œç¬¬14è¡Œï¼Œæ‰“å°ç¬¬äºŒä¸ªæ­¥éª¤â€æŠŠç›˜å­2ä»Aæ¬åˆ°Bâ€ã€‚ç„¶åå†æ‰§è¡Œç¬¬15è¡Œï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œhanoi(C, B, A, 1)ã€‚è¿™ä¸€æ­¥çš„æ ˆå¸§å˜åŒ–ï¼Œä½ å¯ä»¥çœ‹ä¸‹é¢è¿™å¼ å›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/51/72/515de73500c959923c737274a1d67572.jpg?wh=2284x1378\" alt=\"\"></p><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œåœ¨è°ƒç”¨hanoi(C, B, A, 1)çš„æ—¶å€™ï¼Œç”±äºnç­‰äº1ï¼Œæ‰€ä»¥å°±ä¼šæ‰“å°ç¬¬ä¸‰ä¸ªæ­¥éª¤â€œæŠŠç›˜å­1ä»Cæ¬åˆ°Bâ€ï¼Œæ­¤æ—¶hanoi(C, B, A, 1)å°±æ‰§è¡Œå®Œäº†ã€‚</p><p>é‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œç¨‹åºå°±é€€å›åˆ°hanoi(A, B, C, 2)çš„ç¬¬15è¡Œçš„ä¸‹ä¸€è¡Œç»§ç»­æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯å‡½æ•°çš„ç»“æŸï¼Œè¿™å°±æ„å‘³ç€hanoi(A, B, C, 2)ä¹Ÿæ‰§è¡Œå®Œäº†ã€‚è¿™ä¸ªæ—¶å€™ï¼Œç¨‹åºå°±ä¼šå›é€€åˆ°æœ€é«˜çš„ä¸€å±‚hanoi(A, C, B, 3)çš„ç¬¬14è¡Œç»§ç»­æ‰§è¡Œã€‚è¿™ä¸€æ¬¡å°±æ‰“å°äº†ç¬¬å››ä¸ªæ­¥éª¤â€œæŠŠç›˜å­3ä»Aæ¬åˆ°Câ€ï¼Œæ­¤æ—¶çš„æ ˆå¸§å¦‚ä¸Šå›¾(b)æ‰€ç¤ºã€‚</p><p>ç„¶åï¼Œç¨‹åºä¼šæ‰§è¡Œç¬¬15è¡Œï¼Œå†æ¬¡è¿›å…¥é€’å½’è°ƒç”¨ï¼Œåˆ›å»ºhanoi(B, C, A, 2)çš„æ ˆå¸§ã€‚å½“å®ƒæ‰§è¡Œåˆ°ç¬¬13è¡Œæ—¶ï¼Œå°±ä¼šå†åˆ›å»ºhanoi(B, A, C, 1)çš„æ ˆå¸§ï¼Œæ­¤æ—¶æ ˆçš„ç»“æ„å¦‚ä¸Šå›¾ï¼ˆcï¼‰æ‰€ç¤ºã€‚ç”±äºnç­‰äº1ï¼Œè¿™ä¸€æ¬¡è°ƒç”¨å°±ä¼šæ‰“å°ç¬¬äº”ä¸ªæ­¥éª¤â€œæŠŠç›˜å­1ä»Bæ¬åˆ°Aâ€ã€‚</p><p>å†æ¥ç€å°±å¼€å§‹é€€æ ˆäº†ï¼Œå›åˆ°hanoi(B, C, A, 2)çš„æ ˆå¸§ï¼Œç»§ç»­æ‰§è¡Œç¬¬14è¡Œï¼Œæ‰“å°ç¬¬å…­ä¸ªæ­¥éª¤â€œæŠŠç›˜å­2ä»Bæ¬åˆ°Câ€ã€‚ç„¶åæ‰§è¡Œç¬¬15è¡Œï¼Œä¹Ÿå°±æ˜¯hanoi(A, C, B, 1)ï¼Œæ­¤æ—¶nç­‰äº1ï¼Œç›´æ¥æ‰“å°ç¬¬ä¸ƒä¸ªæ­¥éª¤â€œæŠŠç›˜å­1ä»Aæ¬åˆ°Câ€ã€‚æ¥ä¸‹æ¥å°±æ‰§è¡Œé€€æ ˆï¼Œè¿™ä¸€æ¬¡æ¯ä¸€ä¸ªæ ˆå¸§éƒ½æ‰§è¡Œåˆ°äº†æœ€åä¸€è¡Œï¼Œæ‰€ä»¥ä¼šä¸€ç›´é€€åˆ°mainå‡½æ•°çš„æ ˆå¸§ä¸­å»ã€‚é€€æ ˆçš„è¿‡ç¨‹æ¯”è¾ƒç®€å•ï¼Œä½ è‡ªå·±æ€è€ƒä¸€ä¸‹å°±å¥½äº†ã€‚</p><p>è¿™æ ·æˆ‘ä»¬å°±å®Œæˆäº†ä¸€æ¬¡æ±‰è¯ºå¡”çš„æ±‚è§£è¿‡ç¨‹ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å‘¢ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°ï¼Œ<strong>å…ˆåˆ›å»ºçš„å¸§æœ€åæ‰é”€æ¯ï¼Œååˆ›å»ºçš„å¸§æœ€å…ˆè¢«é”€æ¯</strong>ï¼Œè¿™å°±æ˜¯<strong>å…ˆå…¥åå‡º</strong>çš„è§„å¾‹ï¼Œä¹Ÿæ˜¯ç¨‹åºæ‰§è¡Œæ—¶çš„æ´»è·ƒè®°å½•è¦è¢«å«åšæ ˆçš„åŸå› ã€‚</p><p>é‚£ä¹ˆåœ¨è¿™é‡Œå‘¢ï¼Œæˆ‘è¿˜æƒ³è®©ä½ åšä¸€ä¸ªå°ç»ƒä¹ ã€‚æˆ‘æƒ³è®©ä½ è¯•ç€ç”¨æˆ‘ä»¬ä¸Šé¢åˆ†ææ ˆå˜åŒ–çš„æ–¹æ³•ï¼Œæ¥åˆ†æä½¿ç”¨æ·±åº¦ä¼˜å…ˆç®—æ³•æ‰“å°å…¨æ’åˆ—çš„ç¨‹åºï¼Œè¿™ä¼šè®©ä½ æ›´åŠ æ·±å…¥åœ°ç†è§£æ ˆçš„è¿è¡Œè§„å¾‹ï¼ŒåŒæ—¶æŒæ¡æ·±åº¦ä¼˜å…ˆç®—æ³•çš„é€’å½’å†™æ³•ã€‚</p><pre><code>res = []\n\ndef make(n, level):\n    if n == level:\n        print(res)\n        return\n        \n    for i in range(1, n+1):\n        if i not in res:\n            res.append(i)\n            make(n, level+1)\n            res.pop()\n            \nmake(3, 0)\n</code></pre><h2>ä»æŒ‡ä»¤çš„è§’åº¦ç†è§£æ ˆ</h2><p>å¥½äº†ï¼Œå‰é¢é€’å½’çš„ä¾‹å­ï¼Œæ˜¯ä»äººçš„ç›´è§‚æ€ç»´çš„è§’åº¦å»ç†è§£æ ˆï¼Œä½†æ˜¯åœ¨CPUå±‚é¢ï¼Œæœºå™¨æŒ‡ä»¤åˆæ˜¯æ€æ ·å»ç†è§£æ ˆçš„å‘¢ï¼Ÿæˆ‘ä»¬è¿˜æ˜¯é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è€ƒå¯Ÿä¸€ä¸‹ï¼š</p><pre><code>int fac(int n) {\n    return n == 1 ? 1 : n * fac(n-1);\n}\n</code></pre><p>è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨é€’å½’çš„å†™æ³•æ±‚é˜¶ä¹˜çš„ä¾‹å­ï¼Œæºç æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨gccå¯¹å…¶è¿›è¡Œç¼–è¯‘ï¼Œç„¶åä½¿ç”¨objdumpå¯¹å…¶åç¼–è¯‘ï¼Œè§‚å¯Ÿå®ƒç¼–è¯‘åçš„æœºå™¨ç ã€‚</p><pre><code># gcc -o fac fac.c\n# objdump -d fac\n</code></pre><p>ç„¶åä½ å¯ä»¥å¾—åˆ°ä»¥ä¸‹è¾“å‡ºï¼š</p><pre><code>  40052d:       55                      push   %rbp\n  40052e:       48 89 e5                mov    %rsp,%rbp\n  400531:       48 83 ec 10             sub    $0x10,%rsp\n  400535:       89 7d fc                mov    %edi,-0x4(%rbp)\n  400538:       83 7d fc 01             cmpl   $0x1,-0x4(%rbp)\n  40053c:       74 13                   je     400551 &lt;fac+0x24&gt;\n  40053e:       8b 45 fc                mov    -0x4(%rbp),%eax\n  400541:       83 e8 01                sub    $0x1,%eax\n  400544:       89 c7                   mov    %eax,%edi\n  400546:       e8 e2 ff ff ff          callq  40052d &lt;fac&gt;\n  40054b:       0f af 45 fc             imul   -0x4(%rbp),%eax\n  40054f:       eb 05                   jmp    400556 &lt;fac+0x29&gt;\n  400551:       b8 01 00 00 00          mov    $0x1,%eax\n  400556:       c9                      leaveq\n  400557:       c3                      retq\n</code></pre><p>æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹è¿™æ®µæ±‡ç¼–ä»£ç ã€‚</p><p>ç¬¬1è¡Œæ˜¯å°†å½“å‰æ ˆåŸºå€æŒ‡é’ˆå­˜åˆ°æ ˆé¡¶ï¼Œç¬¬2è¡Œæ˜¯æŠŠæ ˆæŒ‡é’ˆä¿å­˜åˆ°æ ˆåŸºå€å¯„å­˜å™¨ï¼Œè¿™ä¸¤è¡Œçš„ä½œç”¨æ˜¯æŠŠå½“å‰å‡½æ•°çš„æ ˆå¸§åˆ›å»ºåœ¨è°ƒç”¨è€…çš„æ ˆå¸§ä¹‹ä¸‹ã€‚ä¿å­˜è°ƒç”¨è€…çš„æ ˆåŸºå€æ˜¯ä¸ºäº†åœ¨returnæ—¶å¯ä»¥æ¢å¤è¿™ä¸ªå¯„å­˜å™¨ã€‚</p><p>ç¬¬3è¡Œçš„ä½œç”¨å‘¢ï¼Œæ˜¯æŠŠæ ˆå‘ä¸‹å¢é•¿0x10ï¼Œè¿™æ˜¯ä¸ºäº†ç»™å±€éƒ¨å˜é‡é¢„ç•™ç©ºé—´ã€‚ä»è¿™é‡Œï¼Œä½ å¯ä»¥çœ‹å‡ºæ¥è¿è¡Œfacå‡½æ•°è¦æ˜¯æ¶ˆè€—æ ˆç©ºé—´çš„ã€‚</p><p>è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬ä¸åŠ n==1çš„åˆ¤æ–­ï¼Œé‚£ä¹ˆfacå‡½æ•°å°†æ— æ³•æ­£å¸¸è¿”å›ï¼Œä¼šå‡ºç°ä¸€ç›´é€’å½’è°ƒç”¨å›ä¸æ¥çš„æƒ…å†µï¼Œè¿™æ ·æ ˆä¸Šå°±ä¼šå‡ºç°å¾ˆå¤šfacçš„å¸§æ ˆï¼Œä¼šé€ æˆæ ˆç©ºé—´è€—å°½ï¼Œå‡ºç°StackOverflowã€‚è¿™é‡Œçš„åŸç†æ˜¯ï¼Œæ“ä½œç³»ç»Ÿä¼šåœ¨æ ˆç©ºé—´çš„å°¾éƒ¨è®¾ç½®ä¸€ä¸ªç¦æ­¢è¯»å†™çš„é¡µï¼Œä¸€æ—¦æ ˆå¢é•¿åˆ°å°¾éƒ¨ï¼Œæ“ä½œç³»ç»Ÿå°±å¯ä»¥é€šè¿‡ä¸­æ–­æ¢çŸ¥ç¨‹åºåœ¨è®¿é—®æ ˆæœ«ç«¯ã€‚</p><p>ç¬¬4è¡Œæ˜¯æŠŠå˜é‡nå­˜åˆ°æ ˆä¸Šã€‚å…¶ä¸­å˜é‡nä¸€å¼€å§‹æ˜¯å­˜å‚¨åœ¨å¯„å­˜å™¨ediä¸­çš„ï¼Œå­˜å‚¨çš„ç›®æ ‡åœ°å€æ˜¯æ ˆåŸºå€åŠ ä¸Š0x4çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªå‡½æ•°æ ˆå¸§çš„ç¬¬ä¸€ä¸ªå±€éƒ¨å˜é‡çš„ä½ç½®ã€‚å˜é‡nåœ¨å¯„å­˜å™¨ediä¸­æ˜¯X86çš„ABIå†³å®šçš„ï¼Œç¬¬ä¸€ä¸ªæ•´å‹å‚æ•°ä¸€å®šè¦ä½¿ç”¨ediæ¥ä¼ é€’ã€‚</p><p>ç¬¬5è¡Œå°†å˜é‡nä¸å¸¸é‡0x1è¿›è¡Œæ¯”è¾ƒã€‚åœ¨ç¬¬6è¡Œï¼Œå¦‚æœæ¯”è¾ƒçš„ç»“æœæ˜¯ç›¸ç­‰çš„ï¼Œé‚£ä¹ˆç¨‹åºå°±ä¼šè·³è½¬åˆ°0x400551ä½ç½®ç»§ç»­æ‰§è¡Œã€‚æˆ‘ä»¬çœ‹åˆ°ï¼Œåœ¨è¿™å—ä»£ç é‡Œï¼Œ0x400551æ˜¯ç¬¬13è¡Œï¼Œå®ƒæŠŠ0x1é€åˆ°å¯„å­˜å™¨eaxä¸­ï¼Œç„¶åè¿”å›ï¼Œå°±æ˜¯è¯´å½“n==1æ—¶ï¼Œè¿”å›å€¼ä¸º1ã€‚</p><p>å¦‚æœç¬¬5è¡Œçš„æ¯”è¾ƒç»“æœæ˜¯ä¸ç›¸ç­‰çš„ï¼Œåˆä¼šæ€ä¹ˆåŠå‘¢ï¼Ÿé‚£ç¬¬6è¡Œå°±ä¸ä¼šè·³è½¬ï¼Œè€Œæ˜¯ç»§ç»­æ‰§è¡Œç¬¬7è¡Œã€‚7ã€8ã€9è¿™ä¸‰è¡Œçš„ä½œç”¨ï¼Œå°±æ˜¯æŠŠn-1é€åˆ°ediå¯„å­˜å™¨ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´ä»¥n-1ä¸ºå‚æ•°è°ƒç”¨facå‡½æ•°ã€‚è¿™ä¸ªæ—¶å€™ï¼Œè°ƒç”¨çš„è¿”å›å€¼åœ¨eaxä¸­ï¼Œç¬¬11è¡Œä¼šæŠŠè¿”å›å€¼ä¸å˜é‡nç›¸ä¹˜ï¼Œç»“æœä»ç„¶å­˜å‚¨åœ¨eaxä¸­ã€‚ç„¶åç¨‹åºå°±å¯ä»¥è·³è½¬åˆ°0x400556å¤„ç»“æŸè¿™æ¬¡è°ƒç”¨ã€‚</p><p>ç†è§£äº†facå‡½æ•°çš„æ±‡ç¼–æŒ‡ä»¤ä»¥åï¼Œæˆ‘ä»¬å†é‡ç‚¹è®¨è®ºcallqæŒ‡ä»¤ã€‚</p><p>æ‰§è¡ŒcallqæŒ‡ä»¤æ—¶ï¼ŒCPUä¼šæŠŠripå¯„å­˜å™¨ä¸­çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯callçš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€æ”¾åˆ°æ ˆä¸Šï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­å°±æ˜¯0x40054bï¼‰ï¼Œç„¶åè·³è½¬åˆ°ç›®æ ‡å‡½æ•°å¤„æ‰§è¡Œã€‚å½“ç›®æ ‡å‡½æ•°æ‰§è¡Œå®Œæˆåï¼Œä¼šæ‰§è¡ŒretæŒ‡ä»¤ï¼Œè¿™ä¸ªæŒ‡ä»¤ä¼šä»æ ˆä¸Šæ‰¾åˆ°åˆšæ‰å­˜çš„é‚£æ¡æŒ‡ä»¤ï¼Œç„¶åç»§ç»­æ¢å¤æ‰§è¡Œã€‚</p><p>æ ˆç©ºé—´ä¸­çš„rbpã€rspï¼Œä»¥åŠè¿”å›æ—¶æ‰€ç”¨çš„æŒ‡ä»¤éƒ½æ˜¯éå¸¸æ•æ„Ÿçš„æ•°æ®ï¼Œä¸€æ—¦è¢«ç ´åå°±ä¼šé€ æˆä¸å¯ä¼°é‡çš„æŸå¤±ã€‚</p><p>ä¸è¿‡ï¼Œä½ åœ¨é‡ç°è¿™ä¸ªä¾‹å­ä¸€å®šè¦æ³¨æ„ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸åŒçš„ä¼˜åŒ–ç­‰çº§ï¼Œäº§ç”Ÿçš„æ±‡ç¼–ä»£ç ä¹Ÿæ˜¯ä¸åŒçš„ã€‚æ¯”å¦‚å¦‚æœä½ ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œç¼–è¯‘ï¼Œå¾—åˆ°çš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸­å°†ä¸å†ä½¿ç”¨rbpå¯„å­˜å™¨ã€‚</p><pre><code># gcc -O1 -o fac fac.c\n</code></pre><p>è‡³äºè¿™ä¸ªç»“æœï¼Œæˆ‘è¿™é‡Œå°±ä¸å†å±•ç¤ºäº†ï¼Œæˆ‘æƒ³è®©ä½ è‡ªå·±åŠ¨æ‰‹è¯•ä¸€ä¸‹ï¼Œç„¶ååœ¨ç•™è¨€åŒºå’Œæˆ‘ä»¬åˆ†äº«ã€‚</p><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»ä»äººçš„å¤§è„‘çš„ç†è§£è§’åº¦å’Œæœºå™¨æŒ‡ä»¤çš„è§’åº¦ï¼Œè®©ä½ åŠ æ·±äº†å¯¹æ ˆå’Œæ ˆå¸§çš„ç†è§£ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°±ä»ç†è®ºè½¬å‘å®æ“ï¼Œä¸¾ä¸€ä¸ªé€šè¿‡ç¼“å†²åŒºæº¢å‡ºæ¥ç ´åæ ˆçš„ä¾‹å­ã€‚é€šè¿‡è¿™ä¸ªä¾‹å­ï¼Œä½ å°±çŸ¥é“åœ¨å¹³æ—¶çš„å·¥ä½œä¸­ï¼Œåº”è¯¥å¦‚ä½•é¿å…å†™å‡ºè¢«é»‘å®¢æ”»å‡»çš„ä¸å®‰å…¨ä»£ç ã€‚</p><h2>æ ˆæº¢å‡º</h2><p>ä¸‹é¢è¿™ä¸ªæµ‹è¯•æ˜¯æˆ‘ç²¾å¿ƒæ„é€ çš„ä¾‹å­ã€‚å› ä¸ºæ˜¯æ¼”ç¤ºç”¨çš„ï¼Œæ‰€ä»¥æˆ‘å°±æŠŠå„ç§æ— å…³çš„ä»£ç å»æ‰äº†ï¼Œåªä¿ç•™äº†å…³é”®è·¯å¾„ä¸Šçš„ä»£ç ã€‚ä½ å…ˆçœ‹ä¸€ä¸‹ä»£ç ï¼š</p><pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define BUFFER_LEN 24\n\nvoid bad() {\n    printf(&quot;Haha, I am hacked.\\n&quot;);\n    exit(1);\n}\n\nvoid copy(char* dst, char* src, int n) {\n    int i;\n    for (i = 0; i &lt; n; i++) {\n        dst[i] = src[i];\n    }\n}\n\nvoid test(char* t, int n) {\n    char s[16];\n    copy(s, t, n);\n}\n\nint main() {\n    char t[BUFFER_LEN] = {\n        'w', 'o', 'l', 'd',\n        'a', 'b', 'a', 'b', 'a', 'b',\n        'a', 'b', 'a', 'b', 'a', 'b',\n    };\n    int n = BUFFER_LEN - 8;\n    int i = 0;\n    for (; i &lt; 8; i++) {\n        t[n+i] = (char)((((long)(&amp;bad)) &gt;&gt; (i*8)) &amp; 0xff);\n    }\n\n    test(t, BUFFER_LEN);\n    printf(&quot;hello\\n&quot;);\n}\n</code></pre><p>ä½ å¯ä»¥ç”¨gccç¼–è¯‘å™¨æ¥ç¼–è¯‘ä¸Šé¢è¿™ä¸ªç¨‹åºï¼š</p><pre><code>gcc -O1 -o bad bad.c -g -fno-stack-protector\n</code></pre><p>æ‰§è¡Œå®ƒï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶åœ¨mainå‡½æ•°é‡Œæˆ‘ä»¬å¹¶æ²¡æœ‰è°ƒç”¨badå‡½æ•°ï¼Œä½†å®ƒå´æ‰§è¡Œäº†ã€‚æœ€åè¿è¡Œç»“æœæ˜¯â€œHaha, I am hackedâ€ã€‚</p><p><strong>æˆ‘ä»¬é¦–å…ˆæ¥åˆ†æä¸€ä¸‹ï¼Œè¿™ä¸ªç¨‹åºä¸ºä»€ä¹ˆä¼šæœ‰è¿™æ ·çš„è¿è¡Œç»“æœã€‚</strong></p><p>å½“æˆ‘ä»¬åœ¨è°ƒç”¨testå‡½æ•°çš„æ—¶å€™ï¼Œä¼šæŠŠè¿”å›åœ°å€ï¼Œä¹Ÿå°±æ˜¯ripå¯„å­˜å™¨ä¸­çš„å€¼ï¼Œæ”¾åˆ°æ ˆä¸Šï¼Œç„¶åå°±è¿›å…¥äº†testçš„æ ˆå¸§ï¼ŒCPUæ¥ç€å°±å¼€å§‹æ‰§è¡Œtestå‡½æ•°äº†ã€‚</p><p>testå‡½æ•°åœ¨æ‰§è¡Œæ—¶ï¼Œä¼šå…ˆåœ¨è‡ªå·±çš„æ ˆå¸§é‡Œåˆ›å»ºæ•°ç»„sï¼Œæ•°ç»„sçš„é•¿åº¦æ˜¯16ã€‚æ­¤æ—¶ï¼Œæ ˆä¸Šçš„å¸ƒå±€æ˜¯è¿™æ ·çš„ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/e3/97/e394bda6b98b8306c15e5a39c6d72897.jpg?wh=2284x985\" alt=\"\"></p><p>é€šè¿‡è®¡ç®—ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“è¿”å›åœ°å€æ˜¯å˜é‡sçš„åœ°å€ + 16çš„åœ°æ–¹ï¼Œ<strong>è¿™å°±æ˜¯æˆ‘ä»¬è¦æ”»å‡»çš„ç›®æ ‡</strong>ã€‚æˆ‘ä»¬åªè¦åœ¨è¿™ä¸ªåœ°æ–¹æŠŠåŸæ¥çš„åœ°å€æ›¿æ¢ä¸ºå‡½æ•°badçš„å…¥å£åœ°å€ï¼ˆç¬¬26è‡³34è¡Œæ‰€åšçš„äº‹æƒ…ï¼‰ï¼Œå°±å¯ä»¥æ”¹å˜ç¨‹åºçš„æ‰§è¡Œé¡ºåºï¼Œå®ç°äº†ä¸€æ¬¡<strong>ç¼“å†²åŒºæº¢å‡º</strong>ã€‚</p><p>ç®€å•åœ°è¯´ï¼Œæ•°ç»„sçš„é•¿åº¦æ˜¯16ï¼Œç†è®ºä¸Šæˆ‘ä»¬åªèƒ½ä¿®æ”¹ä»¥sçš„åœ°å€å¼€å§‹ã€é•¿åº¦ä¸º16çš„æ•°æ®ã€‚ä½†æ˜¯æˆ‘ä»¬ç°åœ¨é€šè¿‡copyå‡½æ•°æ“ä½œäº†å¤§äº16çš„æ•°æ®ï¼Œä»è€Œç ´åäº†æ ˆä¸Šçš„å…³é”®æ•°æ®ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬é’ˆå¯¹å‡½æ•°è°ƒç”¨çš„è¿”å›åœ°å€å‘èµ·äº†ä¸€æ¬¡æ”»å‡»ã€‚æ‰€ä»¥ï¼Œtestå‡½æ•°çš„å®ç°æ˜¯ä¸å®‰å…¨çš„ã€‚</p><p>å…¶å®è¿™ç§ç¼“å†²åŒºæº¢å‡ºï¼Œå°±æ˜¯æŒ‡é€šè¿‡ä¸€å®šçš„æ‰‹æ®µï¼Œæ¥è¾¾æˆä¿®æ”¹ä¸å±äºæœ¬å‡½æ•°æ ˆå¸§çš„å˜é‡çš„ç›®çš„ï¼Œè€Œè¿™ç§æ‰‹æ®µå¤šæ˜¯é€šè¿‡å¾€å­—ç¬¦ä¸²å˜é‡æˆ–è€…æ•°ç»„ä¸­å†™å…¥é”™è¯¯çš„å€¼è€Œé€ æˆçš„ã€‚</p><p><strong>æœ‰ä¸¤ç§å¸¸è§çš„æ‰‹æ®µå¯ä»¥å¯¹è¿™ä¸€ç±»æ”»å‡»è¿›è¡Œé˜²å¾¡ã€‚</strong></p><p>ç¬¬ä¸€ï¼Œå¯¹å…¥å‚è¿›è¡Œæ£€æŸ¥ï¼Œå°½é‡ä½¿ç”¨strncpyæ¥ä»£æ›¿strcpyã€‚å› ä¸ºstrcpyä¸å¯¹å‚æ•°é•¿åº¦åšé™åˆ¶ï¼Œè€Œstrncpyåˆ™ä¼šåšæ£€æŸ¥ã€‚æ¯”å¦‚ä¸Šè¿°ä¾‹å­ä¸­ï¼Œå¦‚æœæˆ‘ä»¬å¯¹å‚æ•°nåšæ£€æŸ¥ï¼Œè¦æ±‚å®ƒçš„å€¼å¿…é¡»å¤§äº0ä¸”å°äºç¼“å†²åŒºé•¿åº¦ï¼Œå°±å¯ä»¥é˜»å‡»ç¼“å†²åŒºæº¢å‡ºæ”»å‡»äº†ã€‚</p><p>ç¬¬äºŒï¼Œå¯ä»¥ä½¿ç”¨gccè‡ªå¸¦çš„æ ˆä¿æŠ¤æœºåˆ¶ï¼Œè¿™å°±æ˜¯-fstack-protectoré€‰é¡¹ã€‚ä½ æŸ¥gccæ‰‹å†Œï¼ˆåœ¨Linuxç³»ç»Ÿä½¿ç”¨â€œman gccâ€å°±èƒ½æŸ¥åˆ°ï¼‰å¯ä»¥çœ‹åˆ°å®ƒçš„ä¸€äº›ç›¸å…³ä¿¡æ¯ã€‚</p><p>å½“-fstack-protectorå¯ç”¨æ—¶ï¼Œå½“å…¶æ£€æµ‹åˆ°ç¼“å†²åŒºæº¢å‡ºæ—¶(ä¾‹å¦‚ï¼Œç¼“å†²åŒºæº¢å‡ºæ”»å‡»ï¼‰æ—¶ä¼šç«‹å³ç»ˆæ­¢æ­£åœ¨æ‰§è¡Œçš„ç¨‹åºï¼Œå¹¶æç¤ºå…¶æ£€æµ‹åˆ°ç¼“å†²åŒºå­˜åœ¨çš„æº¢å‡ºçš„é—®é¢˜ã€‚è¿™ç§æœºåˆ¶æ˜¯é€šè¿‡åœ¨å‡½æ•°ä¸­çš„æ˜“è¢«å—åˆ°æ”»å‡»çš„ç›®æ ‡ä¸Šä¸‹æ–‡æ·»åŠ ä¿æŠ¤å˜é‡æ¥å®Œæˆçš„ã€‚è¿™äº›å‡½æ•°åŒ…æ‹¬ä½¿ç”¨äº†allocaå‡½æ•°ä»¥åŠç¼“å†²åŒºå¤§å°è¶…è¿‡8bytesçš„å‡½æ•°ã€‚è¿™äº›ä¿æŠ¤å˜é‡åœ¨è¿›å…¥å‡½æ•°çš„æ—¶å€™è¿›è¡Œåˆå§‹åŒ–ï¼Œå½“å‡½æ•°é€€å‡ºæ—¶è¿›è¡Œæ£€æµ‹ï¼Œå¦‚æœæŸäº›å˜é‡æ£€æµ‹å¤±è´¥ï¼Œé‚£ä¹ˆä¼šæ‰“å°å‡ºé”™è¯¯æç¤ºä¿¡æ¯å¹¶ä¸”ç»ˆæ­¢å½“å‰çš„è¿›ç¨‹ã€‚</p><p>ä»4.8ç‰ˆæœ¬å¼€å§‹ï¼Œgccä¸­çš„è¿™ä¸ªé€‰é¡¹æ˜¯é»˜è®¤æ‰“å¼€çš„ã€‚å¦‚æœæˆ‘ä»¬åœ¨ç¼–è¯‘æ—¶ï¼Œä¸åŠ -fno-stack-protectorï¼Œgccå°±ä¼šç»™å¯æ‰§è¡Œç¨‹åºå¢åŠ æ ˆä¿æŠ¤çš„åŠŸèƒ½ã€‚è¿™æ ·çš„è¯ï¼Œè¿è¡Œç»“æœå°±ä¼šå‡ºç°Segment Faultï¼Œå¯¼è‡´è¿›ç¨‹å´©æºƒã€‚ä¸è¿‡ï¼Œä½ è¦çŸ¥é“ï¼Œåœ¨é‡åˆ°æ”»å‡»æ—¶è‡ªå·±å´©æºƒï¼Œç›¸æ¯”èµ·å»æ‰§è¡Œæ”»å‡»è€…çš„æ¶æ„ä»£ç ï¼Œå½±å“å¯å°±å°å¤šäº†ã€‚</p><p>è¿™é‡Œï¼Œæˆ‘ä»¬ä¸ºäº†æ¼”ç¤ºçš„æ–¹ä¾¿ï¼Œä½¿ç”¨-fno-stack-protectorå…³é—­äº†è¿™ä¸ªé€‰é¡¹ã€‚ä¸è¿‡ï¼Œåœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œè¿™ä¸ªé€‰é¡¹è™½ç„¶ä½¿å¾—æ ˆçš„å®‰å…¨å¤§å¤§åŠ å¼ºäº†ï¼Œä½†å®ƒä¹Ÿæœ‰å·¨å¤§çš„æ€§èƒ½æŸè€—ã€‚åœ¨ä¸€ä¸ªå®é™…çš„çº¿ä¸Šä¾‹å­ä¸­ï¼Œå…³é—­è¿™ä¸ªé€‰é¡¹å¯ä»¥æå‡8%è‡³10%çš„æ€§èƒ½ã€‚</p><p>å½“ç„¶è¿™ä¸ªé€‰é¡¹ä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„ï¼Œæ”»å‡»è€…ä¾ç„¶èƒ½é€šè¿‡ç²¾å¿ƒæ„é€ æ•°æ®æ¥è¾¾æˆå®ƒçš„ç›®æ ‡ã€‚æ‰€ä»¥åœ¨å†™ä»£ç çš„æ—¶å€™ï¼Œä½ è¿˜æ˜¯åº”è¯¥å¯¹ç¼“å†²åŒºå®‰å…¨å¤šåŠ æ³¨æ„ã€‚</p><h2>æ€»ç»“</h2><p>è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬ä¸€èµ·å­¦ä¹ äº†æ ˆå¸§çš„ä½œç”¨ï¼Œå¹¶é€šè¿‡æ±‰è¯ºå¡”ç¨‹åºçš„æ±‚è§£è¿‡ç¨‹ï¼Œæ¥åˆ†æäº†æ ˆå¸§çš„åˆ›å»ºå’Œé”€æ¯çš„è¿‡ç¨‹ï¼Œä»¥æ­¤æ­ç¤ºäº†å‡½æ•°å’Œæ ˆå¸§çš„å…³ç³»ã€‚æ ˆå¸§å°±æ˜¯å‡½æ•°çš„æ´»åŠ¨è®°å½•ï¼Œå½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œæ ˆå¸§åˆ›å»ºï¼Œå½“å‡½æ•°è°ƒç”¨ç»“æŸåï¼Œæ ˆå¸§æ¶ˆå¤±ã€‚</p><p>åœ¨ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå°¤å…¶æ˜¯é€’å½’ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä½ å¯ä»¥æ¸…æ¥šåœ°è§‚å¯Ÿåˆ°æ ˆå¸§çš„åˆ›å»ºé”€æ¯ï¼Œæ»¡è¶³åå…¥å…ˆå‡ºçš„è§„å¾‹ã€‚è¿™ä¹Ÿæ˜¯äººä»¬æŠŠç®¡ç†å‡½æ•°çš„æ´»è·ƒè®°å½•çš„åŒºåŸŸç§°ä¸ºæ ˆçš„åŸå› ã€‚</p><p>é™¤äº†ç”¨äººçš„ç›´è§‚æ€ç»´æ¥ç†è§£æ ˆå¸§ä¹‹å¤–ï¼Œæˆ‘è¿˜å¸¦ä½ çœ‹äº†åœ¨æ±‡ç¼–ä»£ç çº§åˆ«ï¼Œæ ˆå¸§æ˜¯æ€ä¹ˆçœŸå®åœ°è¢«åˆ›å»ºå’Œé”€æ¯çš„ï¼Œæˆ–è€…è¯´æ ˆæ˜¯æ€ä¹ˆå¢é•¿å’Œæ”¶ç¼©çš„ã€‚è¿™ä¼šè¿›ä¸€æ­¥åŠ æ·±ä½ å¯¹æ ˆçš„ç†è§£ã€‚</p><p>è¿™èŠ‚è¯¾çš„æœ€åï¼Œæˆ‘ä¹Ÿé€šè¿‡ä¸€ä¸ªç¼“å†²åŒºæº¢å‡ºçš„ä¾‹å­è¯´æ˜äº†ï¼Œåœ¨æ ˆç©ºé—´å†…ä½¿ç”¨ç¼“å†²åŒºçš„æ—¶å€™ï¼Œä½ å¿…é¡»è¦ååˆ†å°å¿ƒï¼Œè¦é¿å…æ¶æ„çš„è¾“å…¥å¯¹ç¼“å†²åŒºè¿›è¡Œè¶Šç•Œè¯»å†™ï¼Œç ´åæ ˆçš„ç»“æ„ï¼Œä»è€Œå¯¼è‡´å…³é”®æ•°æ®è¢«ä¿®æ”¹ã€‚æˆ‘ä»¬æ¼”ç¤ºäº†ä¸€ä¸ªç ´åäº†è°ƒç”¨è€…è¿”å›åœ°å€çš„ä¾‹å­ï¼Œä»¥æ­¤æ¥è¯´æ˜å½“è¿”å›åœ°å€è¢«ç ´åä»¥åï¼Œæ”»å‡»è€…å¯ä»¥è®©ç¨‹åºçš„æ§åˆ¶æµè½¬å‘æˆ‘ä»¬ä¸å¸Œæœ›çš„åœ°æ–¹ã€‚</p><p>å¾ˆå¤šäººä»¥ä¸ºå®‰å…¨å’Œæ”»å‡»æ˜¯åšå®‰å…¨çš„åŒäº‹æ‰åº”è¯¥å…³å¿ƒçš„é—®é¢˜ï¼Œè¿™ä¸ªæƒ³æ³•æ˜¯ä¸å¯¹çš„ã€‚è¦æƒ³æé«˜è½¯ä»¶çš„æ•´ä½“æ°´å¹³ï¼Œæ¯ä¸€ä¸ªç¨‹åºå‘˜éƒ½åº”è¯¥å†™å‡ºå¥å£®è€Œå®‰å…¨çš„ä»£ç ã€‚åªæœ‰æ¯ä¸€å—ç –éƒ½è¶³å¤Ÿåšå›ºï¼Œæˆ‘ä»¬æ‰æœ‰å¯èƒ½å»ºæˆä¸€ä¸ªå®‰å…¨å¯é çš„å»ºç­‘ç‰©ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æˆ‘ä»¬è¿™èŠ‚è¯¾å‰é¢è®²çš„swapå‡½æ•°çš„ä¾‹å­ï¼Œæ˜¯å¾ˆå¤šæ–°æ‰‹ä¼šçŠ¯çš„é”™è¯¯ã€‚åœ¨Cè¯­è¨€ä¸­ï¼Œä¸ºäº†ä½¿swapå¯ä»¥äº¤æ¢mainå‡½æ•°é‡Œçš„a/bä¸¤ä¸ªå˜é‡çš„å€¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æŒ‡é’ˆï¼š</p><pre><code>#include &lt;stdio.h&gt;\n\nvoid swap(int* a, int* b) {\n    int t = *a;\n    *a = *b;\n    *b = t;\n}\n\nvoid main() {\n    int a = 2;\n    int b = 3;\n    swap(&amp;a, &amp;b);\n    printf(&quot;a is %d, b is %d\\n&quot;, a, b);\n}\n</code></pre><p>æˆ–è€…åœ¨C++ä¸­ï¼Œç›´æ¥ä½¿ç”¨å¼•ç”¨ï¼Œ<strong>å¼•ç”¨å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªèƒ½è‡ªåŠ¨è§£å¼•ç”¨çš„æŒ‡é’ˆ</strong>ï¼š</p><pre><code>#include &lt;stdio.h&gt;\n\nvoid swap(int&amp; a, int&amp; b) {\n    int t = a;\n    a = b;\n    b = t;\n}\n\nvoid main() {\n    int a = 2;\n    int b = 3;\n    swap(a, b);\n    printf(&quot;a is %d, b is %d\\n&quot;, a, b);\n}\n</code></pre><p>é‚£ä¹ˆï¼Œæˆ‘æƒ³è¯·ä½ ä»æ±‡ç¼–ä»£ç å±‚é¢æ€è€ƒï¼Œè¿™æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Ÿï¼ˆæç¤ºï¼šè¦ä»â€œä¼ å…¥æ ˆå¸§çš„å‚æ•°åˆ°åº•æ˜¯ä»€ä¹ˆâ€è¿™ä¸ªè§’åº¦å»æ€è€ƒï¼‰å¦å¤–ï¼Œå¦‚æœä½ å¯¹Javaç¨‹åºæ¯”è¾ƒç†Ÿæ‚‰ï¼Œä½ ä¹Ÿå¯ä»¥æ€è€ƒä¸€ä¸‹Javaèƒ½ä¸èƒ½å®ç°ç±»ä¼¼çš„åŠŸèƒ½ï¼Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºå’Œæˆ‘äº¤æµä½ çš„æƒ³æ³•ï¼Œæˆ‘åœ¨ç•™è¨€åŒºç­‰ä½ ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/15/c4/153e87bf17b61efb61609a264192c1c4.jpg?wh=2284x3407\" alt=\"\"></p><p>å¥½ï¼Œè¿™èŠ‚è¯¾åˆ°è¿™å°±ç»“æŸå•¦ã€‚æ¬¢è¿ä½ æŠŠè¿™èŠ‚è¯¾åˆ†äº«ç»™æ›´å¤šå¯¹è®¡ç®—æœºå†…å­˜æ„Ÿå…´è¶£çš„æœ‹å‹ã€‚æˆ‘æ˜¯æµ·çº³ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼</p>","neighbors":{"left":{"article_title":"03 | å†…å­˜å¸ƒå±€ï¼šåº”ç”¨ç¨‹åºæ˜¯å¦‚ä½•å®‰æ’æ•°æ®çš„ï¼Ÿ","id":431904},"right":{"article_title":"05 | æ ˆçš„é­”æ³•ï¼šä»æ ˆåˆ‡æ¢çš„è§’åº¦ç†è§£è¿›ç¨‹å’Œåç¨‹","id":435493}},"comments":[{"had_liked":false,"id":319263,"user_name":"ğŸ®","can_delete":false,"product_type":"c1","uid":2112298,"ip_address":"","ucode":"3FAD9EA59E1713","user_header":"https://static001.geekbang.org/account/avatar/00/20/3b/2a/f05e546a.jpg","comment_is_top":false,"comment_ctime":1635727356,"is_pvip":true,"replies":[{"id":"115749","content":"æ˜¯çš„ã€‚å¯ä»¥è¿™ä¹ˆè¯´ã€‚ä¸è¿‡æˆ‘ä»¬åœ¨è¯´expandè¿™ä¸ªè¯çš„æ—¶å€™ï¼Œå¾€å¾€ç”¨äºæ ˆç©ºé—´ä¸è¶³äº†ï¼Œéœ€è¦å¯¹æ ˆè¿›è¡ŒåŠ¨æ€æ‰©å±•è¿™ç§åœºæ™¯ã€‚ä½ è¯´çš„å¾ˆå¯¹ï¼ŒrspæŒ‡é’ˆçš„ä¸Šç§»å¹¶æ²¡æœ‰çœŸçš„æŠŠæ ˆä¸Šçš„æ•°æ®æ¸…ç©ºæ‰ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ä½¿ç”¨å±€éƒ¨å˜é‡çš„æ—¶å€™ä¸€å®šè¦åˆå§‹åŒ–ï¼Œå¦åˆ™å°±æœ‰å¯èƒ½è®¿é—®åˆ°ä¸Šæ¬¡é‡Šæ”¾çš„æ ˆå†…å­˜ã€‚ä½ æŒæ¡çš„å¾ˆå¥½ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"æµ·çº³","uid":"1360512","ctime":1635732084,"ip_address":"","comment_id":319263,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31700498428","product_id":100094901,"comment_content":"è€å¸ˆï¼Œå‡ºå †åæ ˆç©ºé—´é‡Œçš„æ•°æ®è¿˜æ˜¯ä¿ç•™çš„å•Šï¼Œæ˜¯ä¸æ˜¯å«æ ˆç©ºé—´æ‰©å±•å’Œæ”¶ç¼©å½¢è±¡ç‚¹","like_count":7,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529561,"discussion_content":"æ˜¯çš„ã€‚å¯ä»¥è¿™ä¹ˆè¯´ã€‚ä¸è¿‡æˆ‘ä»¬åœ¨è¯´expandè¿™ä¸ªè¯çš„æ—¶å€™ï¼Œå¾€å¾€ç”¨äºæ ˆç©ºé—´ä¸è¶³äº†ï¼Œéœ€è¦å¯¹æ ˆè¿›è¡ŒåŠ¨æ€æ‰©å±•è¿™ç§åœºæ™¯ã€‚ä½ è¯´çš„å¾ˆå¯¹ï¼ŒrspæŒ‡é’ˆçš„ä¸Šç§»å¹¶æ²¡æœ‰çœŸçš„æŠŠæ ˆä¸Šçš„æ•°æ®æ¸…ç©ºæ‰ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ä½¿ç”¨å±€éƒ¨å˜é‡çš„æ—¶å€™ä¸€å®šè¦åˆå§‹åŒ–ï¼Œå¦åˆ™å°±æœ‰å¯èƒ½è®¿é—®åˆ°ä¸Šæ¬¡é‡Šæ”¾çš„æ ˆå†…å­˜ã€‚ä½ æŒæ¡çš„å¾ˆå¥½ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635732084,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320025,"user_name":"keepgoing","can_delete":false,"product_type":"c1","uid":1471387,"ip_address":"","ucode":"A2FE0687FB17E0","user_header":"https://static001.geekbang.org/account/avatar/00/16/73/9b/67a38926.jpg","comment_is_top":false,"comment_ctime":1636041209,"is_pvip":false,"replies":[{"id":"116146","content":"æ˜¯çš„ã€‚æ˜¯è¿™æ ·çš„ã€‚å°±æ˜¯é€šè¿‡æŠŠbadå‡½æ•°çš„åœ°å€å†™åˆ°æ ˆä¸Šï¼Œç„¶åå°±ä½¿å¾—retæŒ‡ä»¤è·‘è¿›badå‡½æ•°é‡Œé¢è¿è¡Œäº†ã€‚ä¸¤ä¸ªè¦ç´ ï¼šä¸€æ˜¯è¶Šç•Œè¯»å†™ï¼Œä¸€æ˜¯è¦†ç›–æ ˆä¸Šçš„è¿”å›åœ°å€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æµ·çº³","uid":"1360512","ctime":1636279122,"ip_address":"","comment_id":320025,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10225975801","product_id":100094901,"comment_content":"åˆçœ‹äº†ä¸€éè€å¸ˆè¿™ä¸€è¯¾ï¼Œæ²¡å¤ªçœ‹æ‡‚æ ˆæº¢å‡ºæ”»å‡»è¿™ä¸€å—çš„ç»†èŠ‚ï¼Œæƒ³å¤šè¯·æ•™ä¸€ä¸‹ï¼š<br><br>æ‰§è¡Œtestå‡½æ•°åï¼Œå­—ç¬¦ä¸²æ•°ç»„sä¸­ä»0å…ƒç´ åˆ°15å…ƒç´ åœ¨æ ˆä¸­å­˜å‚¨åœ°å€æ˜¯ä»é«˜å‘ä½çš„å—ï¼Ÿéšåcall copyæ–¹æ³•åï¼Œä¼šå‹æ ˆä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€åˆ°æ ˆä¸Šï¼Œè¿™æ¡æŒ‡ä»¤å­˜å‚¨åœ°å€æ›´ä½ã€‚æ‰€ä»¥æœ€åè®©æ ˆæº¢å‡ºæ—¶å¤šæ‹·è´åœ°å€æ˜¯æŠŠåœ°å€æ•°å€¼çš„ä½ä½æ”¾åœ¨å†…å­˜åœ°å€é«˜ä½ã€æ•°å€¼çš„é«˜ä½æ”¾åœ¨å†…å­˜åœ°å€ä½ä½æ»¡è¶³å°ç«¯åºé¡ºåˆ©è§£æåˆ°è¿™æ¡åœ°å€çš„æ•°å€¼ã€‚<br><br>ä¸çŸ¥é“è¿™æ ·ç†è§£å¯¹å—ï¼Œå› ä¸ºå¯¹è€å¸ˆä¸¾çš„è¿™ä¸ªä¾‹å­æ¯”è¾ƒæ„Ÿå…´è¶£ï¼Œæ‰€ä»¥æƒ³æŠŠç»†èŠ‚ææ¸…æ¥šï¼Œå¦‚æœæ²¡ç†è§£å¯¹ä¸çŸ¥é“èƒ½ä¸èƒ½è¾›è‹¦è€å¸ˆå¤šè®²ä¸€ä¸‹ï¼Œæ„Ÿè°¢ï¼","like_count":2,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529846,"discussion_content":"æ˜¯çš„ã€‚æ˜¯è¿™æ ·çš„ã€‚å°±æ˜¯é€šè¿‡æŠŠbadå‡½æ•°çš„åœ°å€å†™åˆ°æ ˆä¸Šï¼Œç„¶åå°±ä½¿å¾—retæŒ‡ä»¤è·‘è¿›badå‡½æ•°é‡Œé¢è¿è¡Œäº†ã€‚ä¸¤ä¸ªè¦ç´ ï¼šä¸€æ˜¯è¶Šç•Œè¯»å†™ï¼Œä¸€æ˜¯è¦†ç›–æ ˆä¸Šçš„è¿”å›åœ°å€ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1636279122,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2019536,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/d0/d0/a6c6069d.jpg","nickname":"åš","note":"","ucode":"C02AB1CDE39D1A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556242,"discussion_content":"è€å¸ˆï¼Œæœ‰ä¸ªé—®é¢˜ï¼ŒretæŒ‡ä»¤è·‘è¿›badå‡½æ•°ï¼Œè·‘å®Œbadå‡½æ•°ä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647261785,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319676,"user_name":"éµ¼","can_delete":false,"product_type":"c1","uid":1101766,"ip_address":"","ucode":"F6561743835F7E","user_header":"https://static001.geekbang.org/account/avatar/00/10/cf/c6/6a2d0a5e.jpg","comment_is_top":false,"comment_ctime":1635907722,"is_pvip":false,"replies":[{"id":"115862","content":"å¯¹çš„ã€‚è¿™è¯´æ˜ä½ çœŸçš„åŠ¨æ‰‹å®è·µè¿‡äº†ã€‚è¿™å°±æŒæ¡å¾—å¾ˆå¥½äº†ã€‚ä½ çš„çœ‹æ³•éƒ½æ˜¯å¯¹çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æµ·çº³","uid":"1360512","ctime":1635923749,"ip_address":"","comment_id":319676,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10225842314","product_id":100094901,"comment_content":"è€å¸ˆå¥½ï¼Œæ ˆæº¢å‡ºçš„ä¾‹å­ï¼Œåœ¨æ ˆæ¡¢ä¸Šä¸æ˜¯å…ˆä¿å­˜åŸºåœ°å€rbpï¼Œç„¶ååˆ†é…rspä¿å­˜å‚æ•°å’Œå±€éƒ¨å˜é‡å—ï¼Ÿæ‰€ä»¥åœ¨å‚æ•°çš„æ ˆé«˜ä½åº”è¯¥è¿˜æœ‰rbpï¼Œç„¶åæ‰æ˜¯ripã€‚ä½†æ˜¯ä»£ç æœ¬åœ°è¿è¡Œä¸€ä¸‹æ˜¯å¯ä»¥çš„ï¼Œé€šè¿‡objdumpçœ‹ï¼Œå‘ç°æ²¡æœ‰push %rbpï¼Œmov %rspï¼Œ%rbpäº†ã€‚è¿™æ˜¯å› ä¸ºgccåŠ äº†-o1çš„ä¼˜åŒ–å‚æ•°ã€‚è¿™ä¸ªæ˜¯ä¸æ˜¯æœ‰ç‚¹ç±»ä¼¼æ–¹æ³•å†…æ•›å‘¢ï¼Ÿä¸åŠ -o1,å°±è¿˜ä¼šå…ˆä¿å­˜rbpäº†ï¼Œåœ¨æ‰§è¡Œå³ä½¿æ®µé”™è¯¯ã€‚<br>ç„¶åï¼Œæ€è€ƒé¢˜ç­”æ¡ˆï¼Œé€šè¿‡objdumpçœ‹ï¼Œå‘ç°å‚æ•°å¯„å­˜å™¨rdiå’Œrsiä¿å­˜çš„ä¸å†æ˜¯å€¼äº†ï¼Œè€Œæ˜¯é€šè¿‡leaæŠŠå‚æ•°çš„æ ˆåœ°å€ä¼ é€’è¿‡å»äº†ã€‚å› æ­¤ä¿®æ”¹å°±ç­‰äºæ˜¯ä¿®æ”¹äº†mainçš„æ ˆæ¡¢ä¸Šçš„å€¼ã€‚","like_count":2,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529719,"discussion_content":"å¯¹çš„ã€‚è¿™è¯´æ˜ä½ çœŸçš„åŠ¨æ‰‹å®è·µè¿‡äº†ã€‚è¿™å°±æŒæ¡å¾—å¾ˆå¥½äº†ã€‚ä½ çš„çœ‹æ³•éƒ½æ˜¯å¯¹çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635923749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319453,"user_name":"è´¹åŸçš„äºŒé¹","can_delete":false,"product_type":"c1","uid":1101293,"ip_address":"","ucode":"DE768A0CC3053D","user_header":"https://static001.geekbang.org/account/avatar/00/10/cd/ed/825d84ee.jpg","comment_is_top":false,"comment_ctime":1635819504,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10225754096","product_id":100094901,"comment_content":"åŠæ‰“é¢è¯•å®˜çš„é…å›¾å¾ˆæ¸…æ™°ï¼Œç‚¹èµï¼","like_count":2,"discussions":[{"author":{"id":2767338,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/39/ea/6466ec81.jpg","nickname":"å°å¯çˆ±æ˜¯æˆ‘","note":"","ucode":"7465CBCBC67EEF","race_medal":0,"user_type":4,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411184,"discussion_content":"è°¢è°¢äºŒé¹çš„å¤¸å¥–ï½å¸Œæœ›ä½ æŒç»­æ”¯æŒå†…å­˜è¯¾ï¼Œæ—©æ—¥æˆä¸ºç¼–ç¨‹é«˜æ‰‹ï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635861998,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":330900,"user_name":"é»‘è‰²æ¯›è¡£","can_delete":false,"product_type":"c1","uid":1135912,"ip_address":"","ucode":"FF7E235F91BA5C","user_header":"https://static001.geekbang.org/account/avatar/00/11/55/28/31b0cf2f.jpg","comment_is_top":false,"comment_ctime":1642260787,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5937228083","product_id":100094901,"comment_content":"copy è¶Šç•Œå¤„ç†äº†æ•°ç»„ï¼Œå¯¼è‡´ copy å‡½æ•°æ ˆå¸§çš„è¿”å›åœ°å€å˜æˆäº† bad å‡½æ•°çš„åœ°å€ï¼Œæ‰€ä»¥ bad å‡½æ•°æ‰§è¡Œäº†ï½ï½","like_count":1},{"had_liked":false,"id":319484,"user_name":"GL","can_delete":false,"product_type":"c1","uid":1125950,"ip_address":"","ucode":"EB14AF83184E85","user_header":"https://static001.geekbang.org/account/avatar/00/11/2e/3e/5ae876fd.jpg","comment_is_top":false,"comment_ctime":1635832249,"is_pvip":false,"replies":[{"id":"115814","content":"Right! Javaæ²¡æœ‰æŒ‡å‘æ ˆä¸Šçš„æŒ‡é’ˆï¼Œè¿™ä¸ªè®¾è®¡å¾ˆé‡è¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æµ·çº³","uid":"1360512","ctime":1635844532,"ip_address":"","comment_id":319484,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5930799545","product_id":100094901,"comment_content":"swapå‡½æ•°åœ¨Cä¼ å…¥æŒ‡é’ˆæˆ–C++çš„å¼•ç”¨ æ˜¯æ‹¿åˆ°äº†æ“ä½œæ•°çš„å­˜æ”¾åœ°å€ æ‰€ä»¥å¯ä»¥æ”¹å˜å¯¹åº”çš„å€¼ï¼ŒJavaè¯­è¨€çš„å…¥å‚å¦‚æœåŸºæœ¬æ•°æ®ç±»å‹æ˜¯æ²¡æ³•æ”¹å˜å¤–éƒ¨å˜é‡çš„å€¼ï¼Œå¦‚æœæ˜¯å¼•ç”¨ç±»å‹æ˜¯å¯ä»¥æ”¹å˜å¼•ç”¨å¯¹è±¡å†…çš„å±æ€§å€¼ã€‚","like_count":1,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529650,"discussion_content":"Right! Javaæ²¡æœ‰æŒ‡å‘æ ˆä¸Šçš„æŒ‡é’ˆï¼Œè¿™ä¸ªè®¾è®¡å¾ˆé‡è¦ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1635844532,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2821060,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/0b/c4/599ac348.jpg","nickname":"tt","note":"","ucode":"55D316DAB074B4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413036,"discussion_content":"ä»è¿™ä¸ªå›å¤å¼•å‡ºä¸ªé—®é¢˜... æˆ‘ä»¬è¿™ä¸ªä¸“æ è®²çš„æ˜¯cçš„å†…å­˜å¸ƒå±€ å…¶ä»–è¯­è¨€å½“ç„¶æ˜¯å¤§åŒå°å¼‚ ä½†æ˜¯Javaã€Pythonè¿™äº›å¸¸è§è¯­è¨€å’ŒCçš„å·®åˆ«æ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥è®²è®²å‘¢ã€‚æ¯”å¦‚Javaæ²¡æœ‰æŒ‡å‘æ ˆä¸Šçš„æŒ‡é’ˆè¿™ä¸ªç‚¹å…¶å®å°±æƒ³è¦æ›´æ·±å…¥çš„è®²è§£ã€‚æ²¡æœ‰æŒ‡å‘æ ˆä¸Šçš„æŒ‡é’ˆï¼Œå°±æ“ä½œä¸äº†ä¿å­˜åœ¨æ ˆé‡Œçš„æ•°æ®ï¼Œæ‰€ä»¥ä¿å­˜åœ¨æ ˆé‡Œçš„åŸºæœ¬æ•°æ®ç±»å‹çš„å±€éƒ¨å˜é‡å°±ä¸ä¼šå½±å“å¤–éƒ¨çš„å˜é‡å—ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1636368267,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319307,"user_name":"å¨","can_delete":false,"product_type":"c1","uid":1068542,"ip_address":"","ucode":"C921CDCB22B9A3","user_header":"https://static001.geekbang.org/account/avatar/00/10/4d/fe/882eaf0f.jpg","comment_is_top":false,"comment_ctime":1635738437,"is_pvip":false,"replies":[{"id":"115773","content":"å¾€å¾€æ— æ„è¯†çš„ç¼“å†²åŒºæº¢å‡ºï¼Œå› ä¸ºä¼šæ‹¿éšæœºå€¼è¦†ç›–æœ‰æ•ˆå€¼ï¼Œæ‰€ä»¥ä¼šå¸¦æ¥segment faultï¼Œè¦†ç›–äº†æœ¬æ ˆå¸§çš„å…³é”®æ•°æ®ï¼Œæˆ–è€…è¦†ç›–äº†å…¶ä»–æ ˆå¸§çš„æ•°æ®éƒ½æœ‰å¯èƒ½é€ æˆsegment faultã€‚ä½†æ˜¯ç²¾å¿ƒæ„é€ çš„ç¼“å†²åŒºæº¢å‡ºï¼Œå°±åƒè¯¾ç¨‹é‡Œå¯¹testå‡½æ•°çš„æ”»å‡»ï¼Œæ˜¯å¯ä»¥æŠŠæ§åˆ¶æµå¯¼å‘æ¶æ„ä»£ç çš„ã€‚ä¿æŠ¤æœºåˆ¶å…¶å®æ˜¯åœ¨å…³é”®ä½ç½®ï¼Œæ¯”å¦‚æ ˆå¸§å¼€å§‹å¤„ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨æ’å…¥å˜é‡ï¼Œå‡½æ•°ç»“æŸæ—¶å†æ£€æŸ¥ä¸€ä¸‹ï¼Œå¦‚æœå˜åŒ–äº†å°±ä¸»åŠ¨è§¦å‘faultï¼Œä»¥å¢å¼ºå®‰å…¨æ€§ï¼Œæ‰€ä»¥ä¸ä¸€å®šæ˜¯æº¢å‡ºåˆ°åˆ«çš„æ ˆå¸§ï¼Œä¸¤è€…ä¹‹é—´æ²¡æœ‰å¿…ç„¶è”ç³»","user_name":"ä½œè€…å›å¤","user_name_real":"æµ·çº³","uid":"1360512","ctime":1635754281,"ip_address":"","comment_id":319307,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5930705733","product_id":100094901,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œç¼“å†²åŒºæº¢å‡ºçš„Segment Faultï¼Œæ˜¯æŒ‡ä¸€ä¸ªæ ˆæ¡¢é‡Œæº¢å‡ºï¼Œè¿˜æ˜¯æ ˆæ¡¢ä¹‹é—´çš„æº¢å‡ºã€‚æˆ‘ç†è§£æ˜¯æŒ‰ç…§æ–‡ç« è¯´çš„ä¿æŠ¤æœºåˆ¶ï¼Œåº”è¯¥æ˜¯æº¢å‡ºåˆ°äº†åˆ«çš„æ ˆæ¡¢ï¼Œæ‰ä¼šå‡ºç°Segment Faultã€‚ä¸çŸ¥é“è¿™æ ·çš„ç†è§£æ­£ä¸æ­£ç¡®å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529585,"discussion_content":"å¾€å¾€æ— æ„è¯†çš„ç¼“å†²åŒºæº¢å‡ºï¼Œå› ä¸ºä¼šæ‹¿éšæœºå€¼è¦†ç›–æœ‰æ•ˆå€¼ï¼Œæ‰€ä»¥ä¼šå¸¦æ¥segment faultï¼Œè¦†ç›–äº†æœ¬æ ˆå¸§çš„å…³é”®æ•°æ®ï¼Œæˆ–è€…è¦†ç›–äº†å…¶ä»–æ ˆå¸§çš„æ•°æ®éƒ½æœ‰å¯èƒ½é€ æˆsegment faultã€‚ä½†æ˜¯ç²¾å¿ƒæ„é€ çš„ç¼“å†²åŒºæº¢å‡ºï¼Œå°±åƒè¯¾ç¨‹é‡Œå¯¹testå‡½æ•°çš„æ”»å‡»ï¼Œæ˜¯å¯ä»¥æŠŠæ§åˆ¶æµå¯¼å‘æ¶æ„ä»£ç çš„ã€‚ä¿æŠ¤æœºåˆ¶å…¶å®æ˜¯åœ¨å…³é”®ä½ç½®ï¼Œæ¯”å¦‚æ ˆå¸§å¼€å§‹å¤„ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨æ’å…¥å˜é‡ï¼Œå‡½æ•°ç»“æŸæ—¶å†æ£€æŸ¥ä¸€ä¸‹ï¼Œå¦‚æœå˜åŒ–äº†å°±ä¸»åŠ¨è§¦å‘faultï¼Œä»¥å¢å¼ºå®‰å…¨æ€§ï¼Œæ‰€ä»¥ä¸ä¸€å®šæ˜¯æº¢å‡ºåˆ°åˆ«çš„æ ˆå¸§ï¼Œä¸¤è€…ä¹‹é—´æ²¡æœ‰å¿…ç„¶è”ç³»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635754281,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359019,"user_name":"Spoon","can_delete":false,"product_type":"c1","uid":1959822,"ip_address":"æµ™æ±Ÿ","ucode":"2FF9193AD482C2","user_header":"https://static001.geekbang.org/account/avatar/00/1d/e7/8e/318cfde0.jpg","comment_is_top":false,"comment_ctime":1665157529,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1665157529","product_id":100094901,"comment_content":"å¯ä»¥åœ¨testå‰åŠ ä¸€ä¸‹è¿™ä¸ªä»£ç <br>    printf(&quot;The bad  address:%p\\n&quot;, &amp;bad);<br>    printf(&quot;The t[~] address:0x&quot;);<br>    for (int j = BUFFER_LEN - 1; j &gt;= BUFFER_LEN - 8; j--)<br>    {<br>        printf(&quot;%x&quot;, (t[j] &amp; 0xff));<br>    }<br>    printf(&quot;\\n&quot;);<br>ä½¿ç”¨-O1ä¸ä¼šæœ‰push rbp;mov rsp rbp;è¿™æ ·çš„æ“ä½œ<br>copyæº¢å‡ºçš„åŸç†æ˜¯åº”ä¸ºeipå‹æ ˆæ—¶å ç”¨8å­—èŠ‚ï¼Œcopyè°ƒç”¨å®Œä»¥åï¼Œç°åœ¨sä¹‹ä¸Šï¼Œå…ƒold eipå‹æ ˆåœ°å€å˜ä¸ºbadå‡½æ•°åœ°å€<br>","like_count":0},{"had_liked":false,"id":357256,"user_name":"ç¨‹åºçŒ¿","can_delete":false,"product_type":"c1","uid":1169296,"ip_address":"åŒ—äº¬","ucode":"3DF3CD71E7A306","user_header":"https://static001.geekbang.org/account/avatar/00/11/d7/90/f63eb1da.jpg","comment_is_top":false,"comment_ctime":1663121781,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1663121781","product_id":100094901,"comment_content":"BUFFER_LEN ä¸æ˜¯24å—ï¼Ÿä¸ºä»€ä¹ˆæ ˆé‡Œé¢å€¼é¢„ç•™äº†åˆå§‹åŒ–çš„16ä¸ªå­—èŠ‚ï¼Ÿ","like_count":0},{"had_liked":false,"id":352245,"user_name":"è¾¹åŸè·¯è¿œ","can_delete":false,"product_type":"c1","uid":1286741,"ip_address":"","ucode":"214ECD8981E87F","user_header":"https://static001.geekbang.org/account/avatar/00/13/a2/55/1092ebb8.jpg","comment_is_top":false,"comment_ctime":1658478491,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1658478491","product_id":100094901,"comment_content":"æˆ‘ç”¨çš„é«˜ç‰ˆæœ¬çš„gcc-11.3.0ï¼Œæ²¡æœ‰å‡ºç°æ ˆæº¢å‡ºï¼ŒåŸå› æ˜¯ç¼–è¯‘å™¨è‡ªåŠ¨åšäº†å¤„ç†ï¼Œåæ±‡ç¼–åtestå‡½æ•°ç¬¬ä¸€æ¡æŒ‡ä»¤æ˜¯â€œsub    $0x18,%rspâ€ï¼Œ è€Œåœ¨å¦å¤–ä¸€å°ä½ç‰ˆæœ¬æœºå™¨ä¸Šï¼Œåæ±‡ç¼–åtestå‡½æ•°ç¬¬ä¸€æ¡æŒ‡ä»¤æ˜¯â€œsub    $0x10,%rspâ€","like_count":0},{"had_liked":false,"id":338730,"user_name":"è¿›åŒ–è®º","can_delete":false,"product_type":"c1","uid":1124107,"ip_address":"","ucode":"2865A23392B9F9","user_header":"https://static001.geekbang.org/account/avatar/00/11/27/0b/12dee5ed.jpg","comment_is_top":false,"comment_ctime":1647687998,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1647687998","product_id":100094901,"comment_content":"400531: 48 83 ec 10 sub $0x10,%rsp %rspå­˜å‚¨çš„åœ°å€-16  è¿™16å•ä½æ˜¯ï¼Ÿ å‚æ•°nä¸æ˜¯4å­—èŠ‚å—ä¸ºå•¥æ˜¯16ï¼Ÿ è¿˜æœ‰è¿”å›åœ°å€ï¼Œè¿”å›å€¼ï¼Œé‚£è¿™16ä¹Ÿæ²¡æƒ³æ˜ç™½éƒ½åŒ…æ‹¬çš„ä»€ä¹ˆæ•°æ®<br><br>400535: 89 7d fc mov %edi,-0x4(%rbp).  è¿™é‡Œä»£è¡¨%rbpå­˜å‚¨çš„åœ°å€å‡äº†4å­—èŠ‚å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":336944,"user_name":"ä¼šçˆ†ç‚¸çš„å°ç±³Note","can_delete":false,"product_type":"c1","uid":2150023,"ip_address":"","ucode":"1DA0B740A7C7B7","user_header":"https://static001.geekbang.org/account/avatar/00/20/ce/87/41c44923.jpg","comment_is_top":false,"comment_ctime":1646484262,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1646484262","product_id":100094901,"comment_content":"ç”±äºmainå‡½æ•°å‘swapå‡½æ•°ä¼ é€’çš„å‚æ•°å°äº6ä¸ª åªä¼šä½¿ç”¨ç”¨å¯„å­˜å™¨ä¼ å‚ ä¸ä¼šåœ¨mainå‡½æ•°çš„å‚æ•°æ„å»ºåŒºå­˜æ”¾a,b,&amp;a,&amp;bçš„å€¼<br>mainå‡½æ•°è°ƒç”¨swap(a,b)æ—¶ä¼šç”¨movæŠŠåœ¨mainå‡½æ•°å±€éƒ¨å˜é‡åŒºå­˜æ”¾çš„aï¼Œbçš„å€¼å¤åˆ¶åˆ°rdiï¼Œrsi<br>mainå‡½æ•°è°ƒç”¨swap(&amp;a,&amp;b)æ—¶ä¼šç”¨leaqæŠŠåœ¨mainå‡½æ•°å±€éƒ¨å˜é‡åŒºå­˜æ”¾çš„aï¼Œbçš„åœ°å€å€¼å¤åˆ¶åˆ°rdiï¼Œrsi<br>è¿™æ ·åœ¨swapçš„æ—¶å€™ç›¸å½“äºå¯¹mainå‡½æ•°å±€éƒ¨å˜é‡åŒºçš„aï¼Œbç›´æ¥æ“ä½œ<br>leaveqç›¸å½“äº mov rbp,rsp <br>                   pop rbp<br>retqç›¸å½“äº    pop rip<br>éƒ½æ˜¯AT&amp;Tæ ¼å¼çš„<br><br><br>","like_count":0},{"had_liked":false,"id":333419,"user_name":"jferic","can_delete":false,"product_type":"c1","uid":2069779,"ip_address":"","ucode":"55877400ED5F94","user_header":"https://static001.geekbang.org/account/avatar/00/1f/95/13/ea2584d3.jpg","comment_is_top":false,"comment_ctime":1644335144,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1644335144","product_id":100094901,"comment_content":"# gcc -O1 -o fac fac.c<br><br>000000000040052d &lt;fac&gt;:<br>  40052d:       53                      push   %rbx<br>  40052e:       89 fb                   mov    %edi,%ebx<br>  400530:       b8 01 00 00 00          mov    $0x1,%eax<br>  400535:       83 ff 01                cmp    $0x1,%edi<br>  400538:       74 0b                   je     400545 &lt;fac+0x18&gt;<br>  40053a:       8d 7f ff                lea    -0x1(%rdi),%edi<br>  40053d:       e8 eb ff ff ff          callq  40052d &lt;fac&gt;<br>  400542:       0f af c3                imul   %ebx,%eax<br>  400545:       5b                      pop    %rbx<br>  400546:       c3                      retq<br><br>-O1 ä¼˜åŒ–åï¼š<br>ä½¿ç”¨ push %rbx é€šè¿‡ %rbx å¯„å­˜å™¨åœ¨è®¡ç®— fac(n-1) çš„æ—¶å…ˆæŠŠ n åœ¨ push åˆ° æ ˆ ä¸Šï¼Œ<br>æ¥ç€é€šè¿‡ callq ç®—å‡º fac(n-1) ç»“æœå­˜å…¥ %eaxï¼Œ<br>ç„¶åä½¿ç”¨ pop %rbx æŠŠ n å­˜å…¥ %rbx å¯„å­˜å™¨ï¼Œ<br>å…¶åæ‰§è¡Œ imul   %ebx,%eax  è®¡ç®— n * fac(n-1)","like_count":0},{"had_liked":false,"id":333400,"user_name":"jferic","can_delete":false,"product_type":"c1","uid":2069779,"ip_address":"","ucode":"55877400ED5F94","user_header":"https://static001.geekbang.org/account/avatar/00/1f/95/13/ea2584d3.jpg","comment_is_top":false,"comment_ctime":1644326657,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1644326657","product_id":100094901,"comment_content":"æ–‡ä¸­ï¼šâ€œç¬¬ 1 è¡Œæ˜¯å°†å½“å‰æ ˆåŸºå€æŒ‡é’ˆå­˜åˆ°æ ˆé¡¶ï¼Œç¬¬ 2 è¡Œæ˜¯æŠŠæ ˆæŒ‡é’ˆä¿å­˜åˆ°æ ˆåŸºå€å¯„å­˜å™¨ï¼Œè¿™ä¸¤è¡Œçš„ä½œç”¨æ˜¯æŠŠå½“å‰å‡½æ•°çš„æ ˆå¸§åˆ›å»ºåœ¨è°ƒç”¨è€…çš„æ ˆå¸§ä¹‹ä¸‹ã€‚ä¿å­˜è°ƒç”¨è€…çš„æ ˆåŸºå€æ˜¯ä¸ºäº†åœ¨ return æ—¶å¯ä»¥æ¢å¤è¿™ä¸ªå¯„å­˜å™¨ã€‚â€<br><br>è¯·é—®è€å¸ˆï¼Œæ˜¯ 14 è¡Œçš„ leaveq æŒ‡ä»¤æ¢å¤è°ƒç”¨è€…çš„å¯„å­˜å™¨å—ï¼Ÿå¯ä»¥å±•å¼€è®²ä¸€ä¸‹è¿™ä¸ª leaveq æŒ‡ä»¤å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":327977,"user_name":"thomas","can_delete":false,"product_type":"c1","uid":1016777,"ip_address":"","ucode":"9AB945308F1B50","user_header":"https://static001.geekbang.org/account/avatar/00/0f/83/c9/5d03981a.jpg","comment_is_top":false,"comment_ctime":1640431038,"is_pvip":true,"replies":[{"id":"119524","content":"ç¼–è¯‘å™¨åœ¨åšç¼–è¯‘ä¼˜åŒ–çš„è¿‡ç¨‹ä¸­ä¼šè®¡ç®—çš„ã€‚å…·ä½“åœ°è¯´å°±æ˜¯å¯„å­˜å™¨åˆ†é…è¿™ä¸€æ­¥å°±èƒ½ç»Ÿè®¡å‡ºæ¥éœ€è¦å¤šå¤§çš„æ ˆç©ºé—´ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1360512","ctime":1640618406,"ip_address":"","comment_id":327977,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1640431038","product_id":100094901,"comment_content":"ç¬¬ 3 è¡Œçš„ä½œç”¨å‘¢ï¼Œæ˜¯æŠŠæ ˆå‘ä¸‹å¢é•¿ 0x10ï¼Œè¿™æ˜¯ä¸ºäº†ç»™å±€éƒ¨å˜é‡é¢„ç•™ç©ºé—´ã€‚ä»è¿™é‡Œï¼Œä½ å¯ä»¥çœ‹å‡ºæ¥è¿è¡Œ fac å‡½æ•°è¦æ˜¯æ¶ˆè€—æ ˆç©ºé—´çš„ã€‚<br>==========================&gt;<br>è¯·é—®æ ˆå¢é•¿å¤šå°‘æ˜¯å¦‚ä½•é¢„ä¼°å‡ºæ¥çš„ï¼Ÿ ","like_count":0,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542005,"discussion_content":"ç¼–è¯‘å™¨åœ¨åšç¼–è¯‘ä¼˜åŒ–çš„è¿‡ç¨‹ä¸­ä¼šè®¡ç®—çš„ã€‚å…·ä½“åœ°è¯´å°±æ˜¯å¯„å­˜å™¨åˆ†é…è¿™ä¸€æ­¥å°±èƒ½ç»Ÿè®¡å‡ºæ¥éœ€è¦å¤šå¤§çš„æ ˆç©ºé—´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640618406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325868,"user_name":"ZR2021","can_delete":false,"product_type":"c1","uid":1707352,"ip_address":"","ucode":"4F685C7516F057","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKwGurTWOiaZ2O2oCdxK9kbF4PcwGg0ALqsWhNq87hWvwPy8ZU9cxRzmcGOgdIeJkTOoKfbxgEKqrg/132","comment_is_top":false,"comment_ctime":1639205543,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1639205543","product_id":100094901,"comment_content":"è€å¸ˆï¼Œä¸ºä»€ä¹ˆæ ˆæº¢å‡ºå°±ä¼šå´©æºƒå‘¢ï¼Œæ ˆå¸§é‡Œé¢å­˜æ”¾çš„éƒ½æ˜¯æ•°æ®ï¼Œæƒé™åŸºæœ¬éƒ½ä¸€æ ·çš„å§ï¼Œåº”è¯¥ä¸æ˜¯å‡ºç°è¦†ç›–äº†æƒé™ä¸åŒçš„æ•°æ®å¯¼è‡´å´©æºƒå§ï¼Œ è¿˜æ˜¯è¯´æ ˆæº¢å‡ºäº†å°±æ˜¯ä¼šå´©æºƒï¼Œé‚£æ˜¯è°æ£€æµ‹æ ˆæº¢å‡ºçš„ï¼Œåˆæ˜¯æ€ä¹ˆé€šçŸ¥åˆ°å†…æ ¸ï¼Œç„¶åå†…æ ¸å‘ä¿¡å·è®©è¿™ä¸ªè¿›ç¨‹ä¸»åŠ¨å´©æºƒçš„","like_count":0,"discussions":[{"author":{"id":1432830,"avatar":"https://static001.geekbang.org/account/avatar/00/15/dc/fe/f11f25dd.jpg","nickname":"å·¦æ˜Ÿè¾°","note":"","ucode":"A67D772F6AA584","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545832,"discussion_content":"æ ˆæº¢å‡ºä¸ä¸€å®šä¼šå´©æºƒçš„ï¼Œæ¯”å¦‚æ–‡ä¸­çš„ä¾‹å­ï¼Œå°±æ˜¯æ‰§è¡Œåˆ°ç²¾å¿ƒæ„é€ çš„ä»£ç äº†ã€‚å¦‚æœæ˜¯æ„å¤–å¯¼è‡´çš„æ ˆæº¢å‡ºï¼Œæƒ…å†µä¼šæœ‰å¾ˆå¤šï¼Œä¹Ÿå¯èƒ½åƒè¯¥ä¾‹å­ä¸€æ ·è¿›ç¨‹è¿˜åœ¨ç»§ç»­è¿è¡Œï¼Œåªæ˜¯ç»“æœå·²ç»ä¸ç¬¦åˆé¢„æœŸäº†ï¼›ä¹Ÿæœ‰å¯èƒ½æ ˆä¸Šçš„å…³é”®æ•°æ®è¢«è¦†ç›–å¯¼è‡´ç¨‹åºæ— æ³•ç»§ç»­æ‰§è¡Œï¼Œå°±ä¼šæŠ¥Segment Fault","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642062509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325183,"user_name":"å–µå‰è±†è±†","can_delete":false,"product_type":"c1","uid":1144651,"ip_address":"","ucode":"1F3322FF5EDF58","user_header":"https://static001.geekbang.org/account/avatar/00/11/77/4b/ede8aa13.jpg","comment_is_top":false,"comment_ctime":1638853422,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638853422","product_id":100094901,"comment_content":"40052d:       55                      push   %rbp  <br>40052e:       48 89 e5                mov    %rsp,%rbp  <br>400531:       48 83 ec 10             sub    $0x10,%rsp<br><br>ç¬¬2ä¸ªä¾‹å­é‡Œä¸€å¼€å§‹æ ˆä¸ºä»€ä¹ˆè¦æ‰©0x10å‘¢ï¼Ÿåªç®—åˆ°ä¸€ä¸ªå±€éƒ¨å˜é‡éœ€è¦çš„0x04ï¼Œè¿˜æœ‰ä¸€æ¡imulè¯­å¥ï¼ŒåŠ èµ·æ¥ä¹Ÿä¸åˆ°0x10ï¼Œä¸çŸ¥é“æ˜¯å“ªé‡Œç†è§£çš„ä¸å¯¹","like_count":0},{"had_liked":false,"id":323632,"user_name":"Geek_a5edac","can_delete":false,"product_type":"c1","uid":1954784,"ip_address":"","ucode":"A47341B4DB9C8E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/d4MHbXBwovYHW7xA18j88ibw1wS2R1JCoH5oLJIMUTdXe07dyVeTNWNzqWUKT7nPg21oClPhy1rSZPFiaibHeUFBA/132","comment_is_top":false,"comment_ctime":1638036488,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638036488","product_id":100094901,"comment_content":"çœ‹äº†å››ç« ï¼ŒåŸºæœ¬ä¸Šæ²¡æœ‰ä»€ä¹ˆç†è§£çš„å‹åŠ›ï¼Œéƒ½å¾ˆå¿«æŒæ¡è€å¸ˆè®²çš„è¦ç‚¹ï¼Œä¸»è¦æ˜¯å› ä¸ºæœ¬äººä¹‹å‰å·²ç»çœ‹äº†ã€Šæ·±å…¥ç†è§£è®¡ç®—æœºæ“ä½œç³»ç»Ÿã€‹ã€Šlinux 0.11 æºç ã€‹ç›¸å…³æ•°æ®ï¼Œå¤§ä½“ä¸Šæœ‰äº†ä¸€ä¸ªåŸºæœ¬çš„è®¤è¯†ã€‚ä½†è¿˜æ˜¯æ„Ÿè°¢è€å¸ˆè¿™ä¹ˆè¯¾ç¨‹ï¼Œæˆ‘è®¤ä¸ºè¿™ä¹ˆè¯¾ç¨‹å¾ˆå¥½æŠŠæ¡ä¹‹å‰çš„çŸ¥è¯†ç‚¹æ¯”è¾ƒç³»ç»Ÿåœ°åšäº†æ¢³ç†ï¼Œå¹¶åœ¨ä¸€äº›ç»†èŠ‚ä¸Šçªå‡ºäº†ä¸‹ã€‚","like_count":0},{"had_liked":false,"id":321687,"user_name":"æ‹­å¿ƒ","can_delete":false,"product_type":"c1","uid":1024819,"ip_address":"","ucode":"66BDB8959A4C59","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a3/33/b404a199.jpg","comment_is_top":false,"comment_ctime":1636992984,"is_pvip":true,"replies":[{"id":"117070","content":"å…¶å®è¿™æ˜¯æœ¬ç§‘é˜¶æ®µçš„ä¸‰èŠ‚è¯¾ï¼šæ±‡ç¼–åŸç†ï¼Œè®¡ç®—æœºç»„æˆå’Œè®¡ç®—æœºä½“ç³»ç»“æ„çš„å†…å®¹ã€‚æˆ‘ä»¬å­¦äº†ä¸‰ä¸ªå­¦æœŸçš„å‘€ã€‚ä¸€ä¸‹å­è®°ä¸ä½å¾ˆæ­£å¸¸ã€‚æ…¢æ…¢æ¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1360512","ctime":1637375167,"ip_address":"","comment_id":321687,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1636992984","product_id":100094901,"comment_content":"çœ‹çš„æœ‰ç‚¹æ™•ï¼Œå°¤å…¶æ˜¯å„ä¸ªæ±‡ç¼–æŒ‡ä»¤å’Œä»–ä»¬æ“ä½œçš„å¯„å­˜å™¨çš„ä½œç”¨ï¼Œä¸çŸ¥é“æ‚¨æ˜¯æ€ä¹ˆè®°å¿†è¿™äº›æ™¦æ¶©çš„å†…å®¹å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531650,"discussion_content":"å…¶å®è¿™æ˜¯æœ¬ç§‘é˜¶æ®µçš„ä¸‰èŠ‚è¯¾ï¼šæ±‡ç¼–åŸç†ï¼Œè®¡ç®—æœºç»„æˆå’Œè®¡ç®—æœºä½“ç³»ç»“æ„çš„å†…å®¹ã€‚æˆ‘ä»¬å­¦äº†ä¸‰ä¸ªå­¦æœŸçš„å‘€ã€‚ä¸€ä¸‹å­è®°ä¸ä½å¾ˆæ­£å¸¸ã€‚æ…¢æ…¢æ¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637375167,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1024819,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a3/33/b404a199.jpg","nickname":"æ‹­å¿ƒ","note":"","ucode":"66BDB8959A4C59","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":531688,"discussion_content":"æœ¬ç§‘ä¹Ÿæ˜¯è®¡ç®—æœºï¼Œæ±‡ç¼–è¿™éƒ¨åˆ†è®°å¿†ä¸ºé›¶ï¼Œçœ‹æ¥æˆ‘æ˜¯å­¦æ¸£ğŸ˜¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637386609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":531650,"ip_address":""},"score":531688,"extra":"{\"user_type\":1}"}]}]},{"had_liked":false,"id":321666,"user_name":"ğŸ™ƒ","can_delete":false,"product_type":"c1","uid":2170263,"ip_address":"","ucode":"6E41B3D10A33CA","user_header":"https://static001.geekbang.org/account/avatar/00/21/1d/97/9a8b2d0c.jpg","comment_is_top":false,"comment_ctime":1636985379,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636985379","product_id":100094901,"comment_content":"æä¸€ä¸ªå°å»ºè®®ï¼šå¯ä»¥åœ¨æ¯ç¯‡æ–‡ç« åé¢é™„ä¸Šä½œè€…å†³å®šä¸é”™çš„æ–‡ç« æˆ–è€…paperï¼Œè¿™æ ·æ—¢å¯ä»¥åœ¨ä½œè€…çš„ä¸“æ é‡Œå¯¹æ•´ä½“æœ‰ä¸€ä¸ªå®Œæ•´çš„å°è±¡ï¼Œä¹Ÿå¯ä»¥æ ¹æ®ä½œè€…æ¨èçš„æ–‡ç« æ¥æ·±å…¥ç†è§£ï¼","like_count":0},{"had_liked":false,"id":319884,"user_name":"keepgoing","can_delete":false,"product_type":"c1","uid":1471387,"ip_address":"","ucode":"A2FE0687FB17E0","user_header":"https://static001.geekbang.org/account/avatar/00/16/73/9b/67a38926.jpg","comment_is_top":false,"comment_ctime":1635997823,"is_pvip":false,"replies":[{"id":"116005","content":"æ±‡ç¼–ä»£ç å¾€å³æ‹–ğŸ˜‚ï¼Œæˆ‘ä¹Ÿçœ‹ä¸æ‡‚æœºå™¨ç ï¼Œå“ˆå“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æµ·çº³","uid":"1360512","ctime":1636017933,"ip_address":"","comment_id":319884,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1635997823","product_id":100094901,"comment_content":"è€å¸ˆæƒ³æä¸ªå°å»ºè®®ï¼Œèƒ½ä¸èƒ½æŠŠæ±‡ç¼–ä»£ç ä¹Ÿè´´ä¸Šæ¥æ¯”è¾ƒæ–¹ä¾¿ç†è§£ï¼Œn*(n-1)é‚£ä¸ªä¾‹å­å› ä¸ºç¤ºä¾‹ä»£ç åªæœ‰æœºå™¨ç ï¼Œåªèƒ½çœ‹ç€æ‚¨çš„æ–‡å­—ç†è§£ï¼Œæˆ‘ä»¬è¿™ç§åˆšå¼€å§‹å…¥é—¨çš„åŒå­¦çœ‹ç€å¯èƒ½æ¯”è¾ƒæŠ½è±¡ï¼Œä¸è¿‡è¿™ä¸€è¯¾åˆæŠŠæ ˆæ›´æ·±å…¥åœ°ç†è§£äº†ä¸€éï¼Œè°¢è°¢è€å¸ˆ","like_count":0,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529800,"discussion_content":"æ±‡ç¼–ä»£ç å¾€å³æ‹–ğŸ˜‚ï¼Œæˆ‘ä¹Ÿçœ‹ä¸æ‡‚æœºå™¨ç ï¼Œå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636017933,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1471387,"avatar":"https://static001.geekbang.org/account/avatar/00/16/73/9b/67a38926.jpg","nickname":"keepgoing","note":"","ucode":"A2FE0687FB17E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411940,"discussion_content":"å¥½çš„ã€‚ã€‚ã€‚æˆ‘çš„é”™ã€‚ã€‚ã€‚æ‰‹æœºå±å¹•å¤ªçª„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636035768,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319695,"user_name":"æŸ’","can_delete":false,"product_type":"c1","uid":2419502,"ip_address":"","ucode":"D41241629321A1","user_header":"https://static001.geekbang.org/account/avatar/00/24/eb/2e/90fea784.jpg","comment_is_top":false,"comment_ctime":1635914050,"is_pvip":false,"replies":[{"id":"115852","content":"å…¶å®åŸºæœ¬ä¸Šéƒ½æ˜¯Cè¯­è¨€ã€‚pythonå‘¢å°±å½“ä¼ªä»£ç çœ‹å§ï¼Œä½ çœ‹æœ€åç»“å°¾çš„åŠæ‰“é¢è¯•å®˜é‡Œï¼Œå…¶å®ä¹Ÿæ˜¯ä¼ªä»£ç ã€‚è‡ªå·±è½¬æ¢æˆå¯æ‰§è¡Œçš„Cæˆ–è€…Javaä»£ç æ˜¯ä¸ªå¾ˆå¥½çš„ç»ƒä¹ å“¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æµ·çº³","uid":"1360512","ctime":1635920660,"ip_address":"","comment_id":319695,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635914050","product_id":100094901,"comment_content":"è€å¸ˆï¼Œæˆ‘è§‰å¾—ä½ ä¸€ä¸‹ç”¨pythonï¼Œä¸€ä¸‹ç”¨cè¯­è¨€ï¼Œä¸å¤ªå¥½ã€‚","like_count":0,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529727,"discussion_content":"å…¶å®åŸºæœ¬ä¸Šéƒ½æ˜¯Cè¯­è¨€ã€‚pythonå‘¢å°±å½“ä¼ªä»£ç çœ‹å§ï¼Œä½ çœ‹æœ€åç»“å°¾çš„åŠæ‰“é¢è¯•å®˜é‡Œï¼Œå…¶å®ä¹Ÿæ˜¯ä¼ªä»£ç ã€‚è‡ªå·±è½¬æ¢æˆå¯æ‰§è¡Œçš„Cæˆ–è€…Javaä»£ç æ˜¯ä¸ªå¾ˆå¥½çš„ç»ƒä¹ å“¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635920660,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319525,"user_name":"Rovebiy","can_delete":false,"product_type":"c1","uid":1518152,"ip_address":"","ucode":"E45B02264F180E","user_header":"https://wx.qlogo.cn/mmopen/vi_32/nUUviatibFtUzic3XibFPWFbV0k9rX0ZLb1QibY0pmeUO4yGK3wMKFsZtDwZbs1rRSRXwOFOFMj7SZdgofdggQTGF3Q/132","comment_is_top":false,"comment_ctime":1635842332,"is_pvip":false,"replies":[{"id":"115844","content":"å—¯ï¼Œæ˜¯æˆ‘ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æµ·çº³","uid":"1360512","ctime":1635910313,"ip_address":"","comment_id":319525,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635842332","product_id":100094901,"comment_content":"è€å¸ˆï¼Œæ˜¯ä¸æ˜¯æ›¾ç»åœ¨çŸ¥ä¹å†™è¿‡ä¸“æ è¿›å‡»çš„Javaæ–°äººï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529660,"discussion_content":"å—¯ï¼Œæ˜¯æˆ‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635910313,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319354,"user_name":"linker","can_delete":false,"product_type":"c1","uid":1803259,"ip_address":"","ucode":"6C5799F2FC2C82","user_header":"https://static001.geekbang.org/account/avatar/00/1b/83/fb/621adceb.jpg","comment_is_top":false,"comment_ctime":1635757086,"is_pvip":false,"replies":[{"id":"115778","content":"è¯·æ–‡å­—æè¿°ï¼Œå“ˆå“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æµ·çº³","uid":"1360512","ctime":1635786234,"ip_address":"","comment_id":319354,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1635757086","product_id":100094901,"comment_content":"æ€è€ƒé¢˜ï¼šåæ±‡ç¼–ç»“æœæ˜¾ç¤ºä¼ é€’çš„æ˜¯åœ°å€<br>000000000040052d &lt;swap&gt;:<br>  40052d:\t55                   \tpush   %rbp<br>  40052e:\t48 89 e5             \tmov    %rsp,%rbp<br>  400531:\t48 89 7d e8          \tmov    %rdi,-0x18(%rbp)<br>  400535:\t48 89 75 e0          \tmov    %rsi,-0x20(%rbp)<br>  400539:\t48 8b 45 e8          \tmov    -0x18(%rbp),%rax<br>  40053d:\t8b 00                \tmov    (%rax),%eax<br>  40053f:\t89 45 fc             \tmov    %eax,-0x4(%rbp)<br>  400542:\t48 8b 45 e0          \tmov    -0x20(%rbp),%rax<br>  400546:\t8b 10                \tmov    (%rax),%edx<br>  400548:\t48 8b 45 e8          \tmov    -0x18(%rbp),%rax<br>  40054c:\t89 10                \tmov    %edx,(%rax)<br>  40054e:\t48 8b 45 e0          \tmov    -0x20(%rbp),%rax<br>  400552:\t8b 55 fc             \tmov    -0x4(%rbp),%edx<br>  400555:\t89 10                \tmov    %edx,(%rax)<br>  400557:\t5d                   \tpop    %rbp<br>  400558:\tc3                   \tretq   <br><br>0000000000400559 &lt;main&gt;:<br>  400559:\t55                   \tpush   %rbp<br>  40055a:\t48 89 e5             \tmov    %rsp,%rbp<br>  40055d:\t48 83 ec 10          \tsub    $0x10,%rsp<br>  400561:\tc7 45 fc 02 00 00 00 \tmovl   $0x2,-0x4(%rbp)<br>  400568:\tc7 45 f8 03 00 00 00 \tmovl   $0x3,-0x8(%rbp)<br>  40056f:\t48 8d 55 f8          \tlea    -0x8(%rbp),%rdx<br>  400573:\t48 8d 45 fc          \tlea    -0x4(%rbp),%rax<br>  400577:\t48 89 d6             \tmov    %rdx,%rsi<br>  40057a:\t48 89 c7             \tmov    %rax,%rdi<br>  40057d:\te8 ab ff ff ff       \tcallq  40052d &lt;swap&gt;<br>  400582:\t8b 55 f8             \tmov    -0x8(%rbp),%edx<br>  400585:\t8b 45 fc             \tmov    -0x4(%rbp),%eax<br>  400588:\t89 c6                \tmov    %eax,%esi<br>  40058a:\tbf 30 06 40 00       \tmov    $0x400630,%edi<br>  40058f:\tb8 00 00 00 00       \tmov    $0x0,%eax<br>","like_count":0,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529604,"discussion_content":"è¯·æ–‡å­—æè¿°ï¼Œå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635786234,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1803259,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/83/fb/621adceb.jpg","nickname":"linker","note":"","ucode":"6C5799F2FC2C82","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411141,"discussion_content":"40056f è¿™ä¸€è¡Œï¼ŒleaæŒ‡ä»¤å»å–åˆ°æ ˆä¸­å±€éƒ¨å˜é‡çš„åœ°å€ï¼Œæ”¾å…¥rdx,å†é€šè¿‡rsiä¼ å…¥å­å‡½æ•°ï¼Œç„¶åå­å‡½æ•°åªèƒ½ä½¿ç”¨é—´æ¥å¯»å€è®¿é—®é‡Œé¢çš„å€¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635856456,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319315,"user_name":"æ¨å†›","can_delete":false,"product_type":"c1","uid":1988156,"ip_address":"","ucode":"AF881224E54C14","user_header":"https://static001.geekbang.org/account/avatar/00/1e/56/3c/f9ff3ed8.jpg","comment_is_top":false,"comment_ctime":1635740028,"is_pvip":false,"replies":[{"id":"115774","content":"èµï¼Œæˆ‘ä¸çŸ¥é“è¿˜æœ‰è¿™ä¸ªã€‚æˆ‘å»æŸ¥äº†ä¸€ä¸‹ï¼Œåº”è¯¥æ˜¯lab3ï¼Œattackã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æµ·çº³","uid":"1360512","ctime":1635755399,"ip_address":"","comment_id":319315,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635740028","product_id":100094901,"comment_content":"è¿™ä¸ªå°±æ˜¯csapp ä¸­ lab2 çš„å†…å®¹ï¼Œå¥½äº²åˆ‡","like_count":0,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529589,"discussion_content":"èµï¼Œæˆ‘ä¸çŸ¥é“è¿˜æœ‰è¿™ä¸ªã€‚æˆ‘å»æŸ¥äº†ä¸€ä¸‹ï¼Œåº”è¯¥æ˜¯lab3ï¼Œattackã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635755399,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}