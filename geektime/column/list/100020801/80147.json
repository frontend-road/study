{"id":80147,"title":"35 | joinè¯­å¥æ€ä¹ˆä¼˜åŒ–ï¼Ÿ","content":"<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å’Œä½ ä»‹ç»äº†joinè¯­å¥çš„ä¸¤ç§ç®—æ³•ï¼Œåˆ†åˆ«æ˜¯Index Nested-Loop Join(NLJ)å’ŒBlock Nested-Loop Join(BNL)ã€‚</p><p>æˆ‘ä»¬å‘ç°åœ¨ä½¿ç”¨NLJç®—æ³•çš„æ—¶å€™ï¼Œå…¶å®æ•ˆæœè¿˜æ˜¯ä¸é”™çš„ï¼Œæ¯”é€šè¿‡åº”ç”¨å±‚æ‹†åˆ†æˆå¤šä¸ªè¯­å¥ç„¶åå†æ‹¼æ¥æŸ¥è¯¢ç»“æœæ›´æ–¹ä¾¿ï¼Œè€Œä¸”æ€§èƒ½ä¹Ÿä¸ä¼šå·®ã€‚</p><p>ä½†æ˜¯ï¼ŒBNLç®—æ³•åœ¨å¤§è¡¨joinçš„æ—¶å€™æ€§èƒ½å°±å·®å¤šäº†ï¼Œæ¯”è¾ƒæ¬¡æ•°ç­‰äºä¸¤ä¸ªè¡¨å‚ä¸joinçš„è¡Œæ•°çš„ä¹˜ç§¯ï¼Œå¾ˆæ¶ˆè€—CPUèµ„æºã€‚</p><p>å½“ç„¶äº†ï¼Œè¿™ä¸¤ä¸ªç®—æ³•éƒ½è¿˜æœ‰ç»§ç»­ä¼˜åŒ–çš„ç©ºé—´ï¼Œæˆ‘ä»¬ä»Šå¤©å°±æ¥èŠèŠè¿™ä¸ªè¯é¢˜ã€‚</p><p>ä¸ºäº†ä¾¿äºåˆ†æï¼Œæˆ‘è¿˜æ˜¯åˆ›å»ºä¸¤ä¸ªè¡¨t1ã€t2æ¥å’Œä½ å±•å¼€ä»Šå¤©çš„é—®é¢˜ã€‚</p><pre><code>create table t1(id int primary key, a int, b int, index(a));\ncreate table t2 like t1;\ndrop procedure idata;\ndelimiter ;;\ncreate procedure idata()\nbegin\n  declare i int;\n  set i=1;\n  while(i&lt;=1000)do\n    insert into t1 values(i, 1001-i, i);\n    set i=i+1;\n  end while;\n  \n  set i=1;\n  while(i&lt;=1000000)do\n    insert into t2 values(i, i, i);\n    set i=i+1;\n  end while;\n\nend;;\ndelimiter ;\ncall idata();\n</code></pre><p>ä¸ºäº†ä¾¿äºåé¢é‡åŒ–è¯´æ˜ï¼Œæˆ‘åœ¨è¡¨t1é‡Œï¼Œæ’å…¥äº†1000è¡Œæ•°æ®ï¼Œæ¯ä¸€è¡Œçš„a=1001-idçš„å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¡¨t1ä¸­å­—æ®µaæ˜¯é€†åºçš„ã€‚åŒæ—¶ï¼Œæˆ‘åœ¨è¡¨t2ä¸­æ’å…¥äº†100ä¸‡è¡Œæ•°æ®ã€‚</p><h1>Multi-Range Readä¼˜åŒ–</h1><p>åœ¨ä»‹ç»joinè¯­å¥çš„ä¼˜åŒ–æ–¹æ¡ˆä¹‹å‰ï¼Œæˆ‘éœ€è¦å…ˆå’Œä½ ä»‹ç»ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œå³ï¼šMulti-Range Readä¼˜åŒ–(MRR)ã€‚è¿™ä¸ªä¼˜åŒ–çš„ä¸»è¦ç›®çš„æ˜¯å°½é‡ä½¿ç”¨é¡ºåºè¯»ç›˜ã€‚</p><p>åœ¨<a href=\"https://time.geekbang.org/column/article/69236\">ç¬¬4ç¯‡æ–‡ç« </a>ä¸­ï¼Œæˆ‘å’Œä½ ä»‹ç»InnoDBçš„ç´¢å¼•ç»“æ„æ—¶ï¼Œæåˆ°äº†â€œå›è¡¨â€çš„æ¦‚å¿µã€‚æˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸€ä¸‹è¿™ä¸ªæ¦‚å¿µã€‚å›è¡¨æ˜¯æŒ‡ï¼ŒInnoDBåœ¨æ™®é€šç´¢å¼•aä¸ŠæŸ¥åˆ°ä¸»é”®idçš„å€¼åï¼Œå†æ ¹æ®ä¸€ä¸ªä¸ªä¸»é”®idçš„å€¼åˆ°ä¸»é”®ç´¢å¼•ä¸Šå»æŸ¥æ•´è¡Œæ•°æ®çš„è¿‡ç¨‹ã€‚</p><!-- [[[read_end]]] --><p>ç„¶åï¼Œæœ‰åŒå­¦åœ¨ç•™è¨€åŒºé—®åˆ°ï¼Œå›è¡¨è¿‡ç¨‹æ˜¯ä¸€è¡Œè¡Œåœ°æŸ¥æ•°æ®ï¼Œè¿˜æ˜¯æ‰¹é‡åœ°æŸ¥æ•°æ®ï¼Ÿ</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹è¿™ä¸ªé—®é¢˜ã€‚å‡è®¾ï¼Œæˆ‘æ‰§è¡Œè¿™ä¸ªè¯­å¥ï¼š</p><pre><code>select * from t1 where a&gt;=1 and a&lt;=100;\n</code></pre><p>ä¸»é”®ç´¢å¼•æ˜¯ä¸€æ£µB+æ ‘ï¼Œåœ¨è¿™æ£µæ ‘ä¸Šï¼Œæ¯æ¬¡åªèƒ½æ ¹æ®ä¸€ä¸ªä¸»é”®idæŸ¥åˆ°ä¸€è¡Œæ•°æ®ã€‚å› æ­¤ï¼Œå›è¡¨è‚¯å®šæ˜¯ä¸€è¡Œè¡Œæœç´¢ä¸»é”®ç´¢å¼•çš„ï¼ŒåŸºæœ¬æµç¨‹å¦‚å›¾1æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/97/05/97ae269061192f6d7a632df56fa03605.png?wh=1142*880\" alt=\"\"></p><center><span class=\"reference\">å›¾1 åŸºæœ¬å›è¡¨æµç¨‹</span></center><p>å¦‚æœéšç€açš„å€¼é€’å¢é¡ºåºæŸ¥è¯¢çš„è¯ï¼Œidçš„å€¼å°±å˜æˆéšæœºçš„ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°éšæœºè®¿é—®ï¼Œæ€§èƒ½ç›¸å¯¹è¾ƒå·®ã€‚è™½ç„¶â€œæŒ‰è¡ŒæŸ¥â€è¿™ä¸ªæœºåˆ¶ä¸èƒ½æ”¹ï¼Œä½†æ˜¯è°ƒæ•´æŸ¥è¯¢çš„é¡ºåºï¼Œè¿˜æ˜¯èƒ½å¤ŸåŠ é€Ÿçš„ã€‚</p><p><strong>å› ä¸ºå¤§å¤šæ•°çš„æ•°æ®éƒ½æ˜¯æŒ‰ç…§ä¸»é”®é€’å¢é¡ºåºæ’å…¥å¾—åˆ°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®¤ä¸ºï¼Œå¦‚æœæŒ‰ç…§ä¸»é”®çš„é€’å¢é¡ºåºæŸ¥è¯¢çš„è¯ï¼Œå¯¹ç£ç›˜çš„è¯»æ¯”è¾ƒæ¥è¿‘é¡ºåºè¯»ï¼Œèƒ½å¤Ÿæå‡è¯»æ€§èƒ½ã€‚</strong></p><p>è¿™ï¼Œå°±æ˜¯MRRä¼˜åŒ–çš„è®¾è®¡æ€è·¯ã€‚æ­¤æ—¶ï¼Œè¯­å¥çš„æ‰§è¡Œæµç¨‹å˜æˆäº†è¿™æ ·ï¼š</p><ol>\n<li>\n<p>æ ¹æ®ç´¢å¼•aï¼Œå®šä½åˆ°æ»¡è¶³æ¡ä»¶çš„è®°å½•ï¼Œå°†idå€¼æ”¾å…¥read_rnd_bufferä¸­;</p>\n</li>\n<li>\n<p>å°†read_rnd_bufferä¸­çš„idè¿›è¡Œé€’å¢æ’åºï¼›</p>\n</li>\n<li>\n<p>æ’åºåçš„idæ•°ç»„ï¼Œä¾æ¬¡åˆ°ä¸»é”®idç´¢å¼•ä¸­æŸ¥è®°å½•ï¼Œå¹¶ä½œä¸ºç»“æœè¿”å›ã€‚</p>\n</li>\n</ol><p>è¿™é‡Œï¼Œread_rnd_bufferçš„å¤§å°æ˜¯ç”±read_rnd_buffer_sizeå‚æ•°æ§åˆ¶çš„ã€‚å¦‚æœæ­¥éª¤1ä¸­ï¼Œread_rnd_bufferæ”¾æ»¡äº†ï¼Œå°±ä¼šå…ˆæ‰§è¡Œå®Œæ­¥éª¤2å’Œ3ï¼Œç„¶åæ¸…ç©ºread_rnd_bufferã€‚ä¹‹åç»§ç»­æ‰¾ç´¢å¼•açš„ä¸‹ä¸ªè®°å½•ï¼Œå¹¶ç»§ç»­å¾ªç¯ã€‚</p><p>å¦å¤–éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œå¦‚æœä½ æƒ³è¦ç¨³å®šåœ°ä½¿ç”¨MRRä¼˜åŒ–çš„è¯ï¼Œéœ€è¦è®¾ç½®<code>set optimizer_switch=\"mrr_cost_based=off\"</code>ã€‚ï¼ˆå®˜æ–¹æ–‡æ¡£çš„è¯´æ³•ï¼Œæ˜¯ç°åœ¨çš„ä¼˜åŒ–å™¨ç­–ç•¥ï¼Œåˆ¤æ–­æ¶ˆè€—çš„æ—¶å€™ï¼Œä¼šæ›´å€¾å‘äºä¸ä½¿ç”¨MRRï¼ŒæŠŠmrr_cost_basedè®¾ç½®ä¸ºoffï¼Œå°±æ˜¯å›ºå®šä½¿ç”¨MRRäº†ã€‚ï¼‰</p><p>ä¸‹é¢ä¸¤å¹…å›¾å°±æ˜¯ä½¿ç”¨äº†MRRä¼˜åŒ–åçš„æ‰§è¡Œæµç¨‹å’Œexplainç»“æœã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/d5/c7/d502fbaea7cac6f815c626b078da86c7.jpg?wh=1142*880\" alt=\"\"></p><center><span class=\"reference\">å›¾2 MRRæ‰§è¡Œæµç¨‹</span></center><p><img src=\"https://static001.geekbang.org/resource/image/a5/32/a513d07ebaf1ae044d44391c89bc6432.png?wh=1583*149\" alt=\"\"></p><center><span class=\"reference\">å›¾3 MRRæ‰§è¡Œæµç¨‹çš„explainç»“æœ</span></center><p>ä»å›¾3çš„explainç»“æœä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°Extraå­—æ®µå¤šäº†Using MRRï¼Œè¡¨ç¤ºçš„æ˜¯ç”¨ä¸Šäº†MRRä¼˜åŒ–ã€‚è€Œä¸”ï¼Œç”±äºæˆ‘ä»¬åœ¨read_rnd_bufferä¸­æŒ‰ç…§idåšäº†æ’åºï¼Œæ‰€ä»¥æœ€åå¾—åˆ°çš„ç»“æœé›†ä¹Ÿæ˜¯æŒ‰ç…§ä¸»é”®idé€’å¢é¡ºåºçš„ï¼Œä¹Ÿå°±æ˜¯ä¸å›¾1ç»“æœé›†ä¸­è¡Œçš„é¡ºåºç›¸åã€‚</p><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°ç»“ä¸€ä¸‹ã€‚</p><p><strong>MRRèƒ½å¤Ÿæå‡æ€§èƒ½çš„æ ¸å¿ƒ</strong>åœ¨äºï¼Œè¿™æ¡æŸ¥è¯¢è¯­å¥åœ¨ç´¢å¼•aä¸Šåšçš„æ˜¯ä¸€ä¸ªèŒƒå›´æŸ¥è¯¢ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªå¤šå€¼æŸ¥è¯¢ï¼‰ï¼Œå¯ä»¥å¾—åˆ°è¶³å¤Ÿå¤šçš„ä¸»é”®idã€‚è¿™æ ·é€šè¿‡æ’åºä»¥åï¼Œå†å»ä¸»é”®ç´¢å¼•æŸ¥æ•°æ®ï¼Œæ‰èƒ½ä½“ç°å‡ºâ€œé¡ºåºæ€§â€çš„ä¼˜åŠ¿ã€‚</p><h1>Batched Key Access</h1><p>ç†è§£äº†MRRæ€§èƒ½æå‡çš„åŸç†ï¼Œæˆ‘ä»¬å°±èƒ½ç†è§£MySQLåœ¨5.6ç‰ˆæœ¬åå¼€å§‹å¼•å…¥çš„Batched Key Access(BKA)ç®—æ³•äº†ã€‚è¿™ä¸ªBKAç®—æ³•ï¼Œå…¶å®å°±æ˜¯å¯¹NLJç®—æ³•çš„ä¼˜åŒ–ã€‚</p><p>æˆ‘ä»¬å†æ¥çœ‹çœ‹ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ç”¨åˆ°çš„NLJç®—æ³•çš„æµç¨‹å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/10/3d/10e14e8b9691ac6337d457172b641a3d.jpg?wh=1142*880\" alt=\"\"></p><center><span class=\"reference\">å›¾4 Index Nested-Loop Joinæµç¨‹å›¾</span></center><p>NLJç®—æ³•æ‰§è¡Œçš„é€»è¾‘æ˜¯ï¼šä»é©±åŠ¨è¡¨t1ï¼Œä¸€è¡Œè¡Œåœ°å–å‡ºaçš„å€¼ï¼Œå†åˆ°è¢«é©±åŠ¨è¡¨t2å»åšjoinã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºè¡¨t2æ¥è¯´ï¼Œæ¯æ¬¡éƒ½æ˜¯åŒ¹é…ä¸€ä¸ªå€¼ã€‚è¿™æ—¶ï¼ŒMRRçš„ä¼˜åŠ¿å°±ç”¨ä¸ä¸Šäº†ã€‚</p><p>é‚£æ€ä¹ˆæ‰èƒ½ä¸€æ¬¡æ€§åœ°å¤šä¼ äº›å€¼ç»™è¡¨t2å‘¢ï¼Ÿæ–¹æ³•å°±æ˜¯ï¼Œä»è¡¨t1é‡Œä¸€æ¬¡æ€§åœ°å¤šæ‹¿äº›è¡Œå‡ºæ¥ï¼Œä¸€èµ·ä¼ ç»™è¡¨t2ã€‚</p><p>æ—¢ç„¶å¦‚æ­¤ï¼Œæˆ‘ä»¬å°±æŠŠè¡¨t1çš„æ•°æ®å–å‡ºæ¥ä¸€éƒ¨åˆ†ï¼Œå…ˆæ”¾åˆ°ä¸€ä¸ªä¸´æ—¶å†…å­˜ã€‚è¿™ä¸ªä¸´æ—¶å†…å­˜ä¸æ˜¯åˆ«äººï¼Œå°±æ˜¯join_bufferã€‚</p><p>é€šè¿‡ä¸Šä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬çŸ¥é“join_buffer åœ¨BNLç®—æ³•é‡Œçš„ä½œç”¨ï¼Œæ˜¯æš‚å­˜é©±åŠ¨è¡¨çš„æ•°æ®ã€‚ä½†æ˜¯åœ¨NLJç®—æ³•é‡Œå¹¶æ²¡æœ‰ç”¨ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬åˆšå¥½å°±å¯ä»¥å¤ç”¨join_bufferåˆ°BKAç®—æ³•ä¸­ã€‚</p><p>å¦‚å›¾5æ‰€ç¤ºï¼Œæ˜¯ä¸Šé¢çš„NLJç®—æ³•ä¼˜åŒ–åçš„BKAç®—æ³•çš„æµç¨‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/68/88/682370c5640244fa3474d26cc3bc0388.png?wh=1142*880\" alt=\"\"></p><center><span class=\"reference\">å›¾5 Batched Key Accessæµç¨‹</span></center><p>å›¾ä¸­ï¼Œæˆ‘åœ¨join_bufferä¸­æ”¾å…¥çš„æ•°æ®æ˜¯P1~P100ï¼Œè¡¨ç¤ºçš„æ˜¯åªä¼šå–æŸ¥è¯¢éœ€è¦çš„å­—æ®µã€‚å½“ç„¶ï¼Œå¦‚æœjoin bufferæ”¾ä¸ä¸‹P1~P100çš„æ‰€æœ‰æ•°æ®ï¼Œå°±ä¼šæŠŠè¿™100è¡Œæ•°æ®åˆ†æˆå¤šæ®µæ‰§è¡Œä¸Šå›¾çš„æµç¨‹ã€‚</p><p>é‚£ä¹ˆï¼Œè¿™ä¸ªBKAç®—æ³•åˆ°åº•è¦æ€ä¹ˆå¯ç”¨å‘¢ï¼Ÿ</p><p>å¦‚æœè¦ä½¿ç”¨BKAä¼˜åŒ–ç®—æ³•çš„è¯ï¼Œä½ éœ€è¦åœ¨æ‰§è¡ŒSQLè¯­å¥ä¹‹å‰ï¼Œå…ˆè®¾ç½®</p><pre><code>set optimizer_switch='mrr=on,mrr_cost_based=off,batched_key_access=on';\n</code></pre><p>å…¶ä¸­ï¼Œå‰ä¸¤ä¸ªå‚æ•°çš„ä½œç”¨æ˜¯è¦å¯ç”¨MRRã€‚è¿™ä¹ˆåšçš„åŸå› æ˜¯ï¼ŒBKAç®—æ³•çš„ä¼˜åŒ–è¦ä¾èµ–äºMRRã€‚</p><h1>BNLç®—æ³•çš„æ€§èƒ½é—®é¢˜</h1><p>è¯´å®Œäº†NLJç®—æ³•çš„ä¼˜åŒ–ï¼Œæˆ‘ä»¬å†æ¥çœ‹BNLç®—æ³•çš„ä¼˜åŒ–ã€‚</p><p>æˆ‘åœ¨ä¸Šä¸€ç¯‡æ–‡ç« æœ«å°¾ï¼Œç»™ä½ ç•™ä¸‹çš„æ€è€ƒé¢˜æ˜¯ï¼Œä½¿ç”¨Block Nested-Loop Join(BNL)ç®—æ³•æ—¶ï¼Œå¯èƒ½ä¼šå¯¹è¢«é©±åŠ¨è¡¨åšå¤šæ¬¡æ‰«æã€‚å¦‚æœè¿™ä¸ªè¢«é©±åŠ¨è¡¨æ˜¯ä¸€ä¸ªå¤§çš„å†·æ•°æ®è¡¨ï¼Œé™¤äº†ä¼šå¯¼è‡´IOå‹åŠ›å¤§ä»¥å¤–ï¼Œè¿˜ä¼šå¯¹ç³»ç»Ÿæœ‰ä»€ä¹ˆå½±å“å‘¢ï¼Ÿ</p><p>åœ¨<a href=\"https://time.geekbang.org/column/article/79407\">ç¬¬33ç¯‡æ–‡ç« </a>ä¸­ï¼Œæˆ‘ä»¬è¯´åˆ°InnoDBçš„LRUç®—æ³•çš„æ—¶å€™æåˆ°ï¼Œç”±äºInnoDBå¯¹Bufffer Poolçš„LRUç®—æ³•åšäº†ä¼˜åŒ–ï¼Œå³ï¼šç¬¬ä¸€æ¬¡ä»ç£ç›˜è¯»å…¥å†…å­˜çš„æ•°æ®é¡µï¼Œä¼šå…ˆæ”¾åœ¨oldåŒºåŸŸã€‚å¦‚æœ1ç§’ä¹‹åè¿™ä¸ªæ•°æ®é¡µä¸å†è¢«è®¿é—®äº†ï¼Œå°±ä¸ä¼šè¢«ç§»åŠ¨åˆ°LRUé“¾è¡¨å¤´éƒ¨ï¼Œè¿™æ ·å¯¹Buffer Poolçš„å‘½ä¸­ç‡å½±å“å°±ä¸å¤§ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœä¸€ä¸ªä½¿ç”¨BNLç®—æ³•çš„joinè¯­å¥ï¼Œå¤šæ¬¡æ‰«æä¸€ä¸ªå†·è¡¨ï¼Œè€Œä¸”è¿™ä¸ªè¯­å¥æ‰§è¡Œæ—¶é—´è¶…è¿‡1ç§’ï¼Œå°±ä¼šåœ¨å†æ¬¡æ‰«æå†·è¡¨çš„æ—¶å€™ï¼ŒæŠŠå†·è¡¨çš„æ•°æ®é¡µç§»åˆ°LRUé“¾è¡¨å¤´éƒ¨ã€‚</p><p>è¿™ç§æƒ…å†µå¯¹åº”çš„ï¼Œæ˜¯å†·è¡¨çš„æ•°æ®é‡å°äºæ•´ä¸ªBuffer Poolçš„3/8ï¼Œèƒ½å¤Ÿå®Œå…¨æ”¾å…¥oldåŒºåŸŸçš„æƒ…å†µã€‚</p><p>å¦‚æœè¿™ä¸ªå†·è¡¨å¾ˆå¤§ï¼Œå°±ä¼šå‡ºç°å¦å¤–ä¸€ç§æƒ…å†µï¼šä¸šåŠ¡æ­£å¸¸è®¿é—®çš„æ•°æ®é¡µï¼Œæ²¡æœ‰æœºä¼šè¿›å…¥youngåŒºåŸŸã€‚</p><p>ç”±äºä¼˜åŒ–æœºåˆ¶çš„å­˜åœ¨ï¼Œä¸€ä¸ªæ­£å¸¸è®¿é—®çš„æ•°æ®é¡µï¼Œè¦è¿›å…¥youngåŒºåŸŸï¼Œéœ€è¦éš”1ç§’åå†æ¬¡è¢«è®¿é—®åˆ°ã€‚ä½†æ˜¯ï¼Œç”±äºæˆ‘ä»¬çš„joinè¯­å¥åœ¨å¾ªç¯è¯»ç£ç›˜å’Œæ·˜æ±°å†…å­˜é¡µï¼Œè¿›å…¥oldåŒºåŸŸçš„æ•°æ®é¡µï¼Œå¾ˆå¯èƒ½åœ¨1ç§’ä¹‹å†…å°±è¢«æ·˜æ±°äº†ã€‚è¿™æ ·ï¼Œå°±ä¼šå¯¼è‡´è¿™ä¸ªMySQLå®ä¾‹çš„Buffer Poolåœ¨è¿™æ®µæ—¶é—´å†…ï¼ŒyoungåŒºåŸŸçš„æ•°æ®é¡µæ²¡æœ‰è¢«åˆç†åœ°æ·˜æ±°ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸¤ç§æƒ…å†µéƒ½ä¼šå½±å“Buffer Poolçš„æ­£å¸¸è¿ä½œã€‚</p><p><strong>å¤§è¡¨joinæ“ä½œè™½ç„¶å¯¹IOæœ‰å½±å“ï¼Œä½†æ˜¯åœ¨è¯­å¥æ‰§è¡Œç»“æŸåï¼Œå¯¹IOçš„å½±å“ä¹Ÿå°±ç»“æŸäº†ã€‚ä½†æ˜¯ï¼Œå¯¹Buffer Poolçš„å½±å“å°±æ˜¯æŒç»­æ€§çš„ï¼Œéœ€è¦ä¾é åç»­çš„æŸ¥è¯¢è¯·æ±‚æ…¢æ…¢æ¢å¤å†…å­˜å‘½ä¸­ç‡ã€‚</strong></p><p>ä¸ºäº†å‡å°‘è¿™ç§å½±å“ï¼Œä½ å¯ä»¥è€ƒè™‘å¢å¤§join_buffer_sizeçš„å€¼ï¼Œå‡å°‘å¯¹è¢«é©±åŠ¨è¡¨çš„æ‰«ææ¬¡æ•°ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼ŒBNLç®—æ³•å¯¹ç³»ç»Ÿçš„å½±å“ä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªæ–¹é¢ï¼š</p><ol>\n<li>\n<p>å¯èƒ½ä¼šå¤šæ¬¡æ‰«æè¢«é©±åŠ¨è¡¨ï¼Œå ç”¨ç£ç›˜IOèµ„æºï¼›</p>\n</li>\n<li>\n<p>åˆ¤æ–­joinæ¡ä»¶éœ€è¦æ‰§è¡ŒM*Næ¬¡å¯¹æ¯”ï¼ˆMã€Nåˆ†åˆ«æ˜¯ä¸¤å¼ è¡¨çš„è¡Œæ•°ï¼‰ï¼Œå¦‚æœæ˜¯å¤§è¡¨å°±ä¼šå ç”¨éå¸¸å¤šçš„CPUèµ„æºï¼›</p>\n</li>\n<li>\n<p>å¯èƒ½ä¼šå¯¼è‡´Buffer Poolçš„çƒ­æ•°æ®è¢«æ·˜æ±°ï¼Œå½±å“å†…å­˜å‘½ä¸­ç‡ã€‚</p>\n</li>\n</ol><p>æˆ‘ä»¬æ‰§è¡Œè¯­å¥ä¹‹å‰ï¼Œéœ€è¦é€šè¿‡ç†è®ºåˆ†æå’ŒæŸ¥çœ‹explainç»“æœçš„æ–¹å¼ï¼Œç¡®è®¤æ˜¯å¦è¦ä½¿ç”¨BNLç®—æ³•ã€‚å¦‚æœç¡®è®¤ä¼˜åŒ–å™¨ä¼šä½¿ç”¨BNLç®—æ³•ï¼Œå°±éœ€è¦åšä¼˜åŒ–ã€‚ä¼˜åŒ–çš„å¸¸è§åšæ³•æ˜¯ï¼Œç»™è¢«é©±åŠ¨è¡¨çš„joinå­—æ®µåŠ ä¸Šç´¢å¼•ï¼ŒæŠŠBNLç®—æ³•è½¬æˆBKAç®—æ³•ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å…·ä½“çœ‹çœ‹ï¼Œè¿™ä¸ªä¼˜åŒ–æ€ä¹ˆåšï¼Ÿ</p><h1>BNLè½¬BKA</h1><p>ä¸€äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨è¢«é©±åŠ¨è¡¨ä¸Šå»ºç´¢å¼•ï¼Œè¿™æ—¶å°±å¯ä»¥ç›´æ¥è½¬æˆBKAç®—æ³•äº†ã€‚</p><p>ä½†æ˜¯ï¼Œæœ‰æ—¶å€™ä½ ç¡®å®ä¼šç¢°åˆ°ä¸€äº›ä¸é€‚åˆåœ¨è¢«é©±åŠ¨è¡¨ä¸Šå»ºç´¢å¼•çš„æƒ…å†µã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªè¯­å¥ï¼š</p><pre><code>select * from t1 join t2 on (t1.b=t2.b) where t2.b&gt;=1 and t2.b&lt;=2000;\n</code></pre><p>æˆ‘ä»¬åœ¨æ–‡ç« å¼€å§‹çš„æ—¶å€™ï¼Œåœ¨è¡¨t2ä¸­æ’å…¥äº†100ä¸‡è¡Œæ•°æ®ï¼Œä½†æ˜¯ç»è¿‡whereæ¡ä»¶è¿‡æ»¤åï¼Œéœ€è¦å‚ä¸joinçš„åªæœ‰2000è¡Œæ•°æ®ã€‚å¦‚æœè¿™æ¡è¯­å¥åŒæ—¶æ˜¯ä¸€ä¸ªä½é¢‘çš„SQLè¯­å¥ï¼Œé‚£ä¹ˆå†ä¸ºè¿™ä¸ªè¯­å¥åœ¨è¡¨t2çš„å­—æ®µbä¸Šåˆ›å»ºä¸€ä¸ªç´¢å¼•å°±å¾ˆæµªè´¹äº†ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœä½¿ç”¨BNLç®—æ³•æ¥joinçš„è¯ï¼Œè¿™ä¸ªè¯­å¥çš„æ‰§è¡Œæµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><ol>\n<li>\n<p>æŠŠè¡¨t1çš„æ‰€æœ‰å­—æ®µå–å‡ºæ¥ï¼Œå­˜å…¥join_bufferä¸­ã€‚è¿™ä¸ªè¡¨åªæœ‰1000è¡Œï¼Œjoin_buffer_sizeé»˜è®¤å€¼æ˜¯256kï¼Œå¯ä»¥å®Œå…¨å­˜å…¥ã€‚</p>\n</li>\n<li>\n<p>æ‰«æè¡¨t2ï¼Œå–å‡ºæ¯ä¸€è¡Œæ•°æ®è·Ÿjoin_bufferä¸­çš„æ•°æ®è¿›è¡Œå¯¹æ¯”ï¼Œ</p>\n<ul>\n<li>å¦‚æœä¸æ»¡è¶³t1.b=t2.bï¼Œåˆ™è·³è¿‡ï¼›</li>\n<li>å¦‚æœæ»¡è¶³t1.b=t2.b, å†åˆ¤æ–­å…¶ä»–æ¡ä»¶ï¼Œä¹Ÿå°±æ˜¯æ˜¯å¦æ»¡è¶³t2.bå¤„äº[1,2000]çš„æ¡ä»¶ï¼Œå¦‚æœæ˜¯ï¼Œå°±ä½œä¸ºç»“æœé›†çš„ä¸€éƒ¨åˆ†è¿”å›ï¼Œå¦åˆ™è·³è¿‡ã€‚</li>\n</ul>\n</li>\n</ol><p>æˆ‘åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­è¯´è¿‡ï¼Œå¯¹äºè¡¨t2çš„æ¯ä¸€è¡Œï¼Œåˆ¤æ–­joinæ˜¯å¦æ»¡è¶³çš„æ—¶å€™ï¼Œéƒ½éœ€è¦éå†join_bufferä¸­çš„æ‰€æœ‰è¡Œã€‚å› æ­¤åˆ¤æ–­ç­‰å€¼æ¡ä»¶çš„æ¬¡æ•°æ˜¯1000*100ä¸‡=10äº¿æ¬¡ï¼Œè¿™ä¸ªåˆ¤æ–­çš„å·¥ä½œé‡å¾ˆå¤§ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/92/60/92fbdbfc35da3040396401250cb33f60.png?wh=1776*169\" alt=\"\"></p><center><span class=\"reference\">å›¾6 explainç»“æœ</span></center><p><img src=\"https://static001.geekbang.org/resource/image/d8/9c/d862bc3e88305688df2c354a4b26809c.png?wh=550*130\" alt=\"\"></p><center><span class=\"reference\">å›¾7 è¯­å¥æ‰§è¡Œæ—¶é—´</span></center><p>å¯ä»¥çœ‹åˆ°ï¼Œexplainç»“æœé‡ŒExtraå­—æ®µæ˜¾ç¤ºä½¿ç”¨äº†BNLç®—æ³•ã€‚åœ¨æˆ‘çš„æµ‹è¯•ç¯å¢ƒé‡Œï¼Œè¿™æ¡è¯­å¥éœ€è¦æ‰§è¡Œ1åˆ†11ç§’ã€‚</p><p>åœ¨è¡¨t2çš„å­—æ®µbä¸Šåˆ›å»ºç´¢å¼•ä¼šæµªè´¹èµ„æºï¼Œä½†æ˜¯ä¸åˆ›å»ºç´¢å¼•çš„è¯è¿™ä¸ªè¯­å¥çš„ç­‰å€¼æ¡ä»¶è¦åˆ¤æ–­10äº¿æ¬¡ï¼Œæƒ³æƒ³ä¹Ÿæ˜¯æµªè´¹ã€‚é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰ä¸¤å…¨å…¶ç¾çš„åŠæ³•å‘¢ï¼Ÿ</p><p>è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨ä¸´æ—¶è¡¨ã€‚ä½¿ç”¨ä¸´æ—¶è¡¨çš„å¤§è‡´æ€è·¯æ˜¯ï¼š</p><ol>\n<li>\n<p>æŠŠè¡¨t2ä¸­æ»¡è¶³æ¡ä»¶çš„æ•°æ®æ”¾åœ¨ä¸´æ—¶è¡¨tmp_tä¸­ï¼›</p>\n</li>\n<li>\n<p>ä¸ºäº†è®©joinä½¿ç”¨BKAç®—æ³•ï¼Œç»™ä¸´æ—¶è¡¨tmp_tçš„å­—æ®µbåŠ ä¸Šç´¢å¼•ï¼›</p>\n</li>\n<li>\n<p>è®©è¡¨t1å’Œtmp_tåšjoinæ“ä½œã€‚</p>\n</li>\n</ol><p>æ­¤æ—¶ï¼Œå¯¹åº”çš„SQLè¯­å¥çš„å†™æ³•å¦‚ä¸‹ï¼š</p><pre><code>create temporary table temp_t(id int primary key, a int, b int, index(b))engine=innodb;\ninsert into temp_t select * from t2 where b&gt;=1 and b&lt;=2000;\nselect * from t1 join temp_t on (t1.b=temp_t.b);\n</code></pre><p>å›¾8å°±æ˜¯è¿™ä¸ªè¯­å¥åºåˆ—çš„æ‰§è¡Œæ•ˆæœã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a8/c7/a80cdffe8173fa0fd8969ed976ac6ac7.png?wh=1130*547\" alt=\"\"></p><center> å›¾8 ä½¿ç”¨ä¸´æ—¶è¡¨çš„æ‰§è¡Œæ•ˆæœ</center><p>å¯ä»¥çœ‹åˆ°ï¼Œæ•´ä¸ªè¿‡ç¨‹3ä¸ªè¯­å¥æ‰§è¡Œæ—¶é—´çš„æ€»å’Œè¿˜ä¸åˆ°1ç§’ï¼Œç›¸æ¯”äºå‰é¢çš„1åˆ†11ç§’ï¼Œæ€§èƒ½å¾—åˆ°äº†å¤§å¹…æå‡ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸€èµ·çœ‹ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹çš„æ¶ˆè€—ï¼š</p><ol>\n<li>\n<p>æ‰§è¡Œinsertè¯­å¥æ„é€ temp_tè¡¨å¹¶æ’å…¥æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹è¡¨t2åšäº†å…¨è¡¨æ‰«æï¼Œè¿™é‡Œæ‰«æè¡Œæ•°æ˜¯100ä¸‡ã€‚</p>\n</li>\n<li>\n<p>ä¹‹åçš„joinè¯­å¥ï¼Œæ‰«æè¡¨t1ï¼Œè¿™é‡Œçš„æ‰«æè¡Œæ•°æ˜¯1000ï¼›joinæ¯”è¾ƒè¿‡ç¨‹ä¸­ï¼Œåšäº†1000æ¬¡å¸¦ç´¢å¼•çš„æŸ¥è¯¢ã€‚ç›¸æ¯”äºä¼˜åŒ–å‰çš„joinè¯­å¥éœ€è¦åš10äº¿æ¬¡æ¡ä»¶åˆ¤æ–­æ¥è¯´ï¼Œè¿™ä¸ªä¼˜åŒ–æ•ˆæœè¿˜æ˜¯å¾ˆæ˜æ˜¾çš„ã€‚</p>\n</li>\n</ol><p>æ€»ä½“æ¥çœ‹ï¼Œä¸è®ºæ˜¯åœ¨åŸè¡¨ä¸ŠåŠ ç´¢å¼•ï¼Œè¿˜æ˜¯ç”¨æœ‰ç´¢å¼•çš„ä¸´æ—¶è¡¨ï¼Œæˆ‘ä»¬çš„æ€è·¯éƒ½æ˜¯è®©joinè¯­å¥èƒ½å¤Ÿç”¨ä¸Šè¢«é©±åŠ¨è¡¨ä¸Šçš„ç´¢å¼•ï¼Œæ¥è§¦å‘BKAç®—æ³•ï¼Œæå‡æŸ¥è¯¢æ€§èƒ½ã€‚</p><h1>æ‰©å±•-hash join</h1><p>çœ‹åˆ°è¿™é‡Œä½ å¯èƒ½å‘ç°äº†ï¼Œå…¶å®ä¸Šé¢è®¡ç®—10äº¿æ¬¡é‚£ä¸ªæ“ä½œï¼Œçœ‹ä¸Šå»æœ‰ç‚¹å„¿å‚»ã€‚å¦‚æœjoin_bufferé‡Œé¢ç»´æŠ¤çš„ä¸æ˜¯ä¸€ä¸ªæ— åºæ•°ç»„ï¼Œè€Œæ˜¯ä¸€ä¸ªå“ˆå¸Œè¡¨çš„è¯ï¼Œé‚£ä¹ˆå°±ä¸æ˜¯10äº¿æ¬¡åˆ¤æ–­ï¼Œè€Œæ˜¯100ä¸‡æ¬¡hashæŸ¥æ‰¾ã€‚è¿™æ ·çš„è¯ï¼Œæ•´æ¡è¯­å¥çš„æ‰§è¡Œé€Ÿåº¦å°±å¿«å¤šäº†å§ï¼Ÿ</p><p>ç¡®å®å¦‚æ­¤ã€‚</p><p>è¿™ï¼Œä¹Ÿæ­£æ˜¯MySQLçš„ä¼˜åŒ–å™¨å’Œæ‰§è¡Œå™¨ä¸€ç›´è¢«è¯Ÿç—…çš„ä¸€ä¸ªåŸå› ï¼šä¸æ”¯æŒå“ˆå¸Œjoinã€‚å¹¶ä¸”ï¼ŒMySQLå®˜æ–¹çš„roadmapï¼Œä¹Ÿæ˜¯è¿Ÿè¿Ÿæ²¡æœ‰æŠŠè¿™ä¸ªä¼˜åŒ–æ’ä¸Šè®®ç¨‹ã€‚</p><p>å®é™…ä¸Šï¼Œè¿™ä¸ªä¼˜åŒ–æ€è·¯ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±å®ç°åœ¨ä¸šåŠ¡ç«¯ã€‚å®ç°æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š</p><ol>\n<li>\n<p><code>select * from t1;</code>å–å¾—è¡¨t1çš„å…¨éƒ¨1000è¡Œæ•°æ®ï¼Œåœ¨ä¸šåŠ¡ç«¯å­˜å…¥ä¸€ä¸ªhashç»“æ„ï¼Œæ¯”å¦‚C++é‡Œçš„setã€PHPçš„æ•°ç»„è¿™æ ·çš„æ•°æ®ç»“æ„ã€‚</p>\n</li>\n<li>\n<p><code>select * from t2 where b&gt;=1 and b&lt;=2000;</code> è·å–è¡¨t2ä¸­æ»¡è¶³æ¡ä»¶çš„2000è¡Œæ•°æ®ã€‚</p>\n</li>\n<li>\n<p>æŠŠè¿™2000è¡Œæ•°æ®ï¼Œä¸€è¡Œä¸€è¡Œåœ°å–åˆ°ä¸šåŠ¡ç«¯ï¼Œåˆ°hashç»“æ„çš„æ•°æ®è¡¨ä¸­å¯»æ‰¾åŒ¹é…çš„æ•°æ®ã€‚æ»¡è¶³åŒ¹é…çš„æ¡ä»¶çš„è¿™è¡Œæ•°æ®ï¼Œå°±ä½œä¸ºç»“æœé›†çš„ä¸€è¡Œã€‚</p>\n</li>\n</ol><p>ç†è®ºä¸Šï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šæ¯”ä¸´æ—¶è¡¨æ–¹æ¡ˆçš„æ‰§è¡Œé€Ÿåº¦è¿˜è¦å¿«ä¸€äº›ã€‚å¦‚æœä½ æ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥è‡ªå·±éªŒè¯ä¸€ä¸‹ã€‚</p><h1>å°ç»“</h1><p>ä»Šå¤©ï¼Œæˆ‘å’Œä½ åˆ†äº«äº†Index Nested-Loop Joinï¼ˆNLJï¼‰å’ŒBlock Nested-Loop Joinï¼ˆBNLï¼‰çš„ä¼˜åŒ–æ–¹æ³•ã€‚</p><p>åœ¨è¿™äº›ä¼˜åŒ–æ–¹æ³•ä¸­ï¼š</p><ol>\n<li>\n<p>BKAä¼˜åŒ–æ˜¯MySQLå·²ç»å†…ç½®æ”¯æŒçš„ï¼Œå»ºè®®ä½ é»˜è®¤ä½¿ç”¨ï¼›</p>\n</li>\n<li>\n<p>BNLç®—æ³•æ•ˆç‡ä½ï¼Œå»ºè®®ä½ éƒ½å°½é‡è½¬æˆBKAç®—æ³•ã€‚ä¼˜åŒ–çš„æ–¹å‘å°±æ˜¯ç»™è¢«é©±åŠ¨è¡¨çš„å…³è”å­—æ®µåŠ ä¸Šç´¢å¼•ï¼›</p>\n</li>\n<li>\n<p>åŸºäºä¸´æ—¶è¡¨çš„æ”¹è¿›æ–¹æ¡ˆï¼Œå¯¹äºèƒ½å¤Ÿæå‰è¿‡æ»¤å‡ºå°æ•°æ®çš„joinè¯­å¥æ¥è¯´ï¼Œæ•ˆæœè¿˜æ˜¯å¾ˆå¥½çš„ï¼›</p>\n</li>\n<li>\n<p>MySQLç›®å‰çš„ç‰ˆæœ¬è¿˜ä¸æ”¯æŒhash joinï¼Œä½†ä½ å¯ä»¥é…åˆåº”ç”¨ç«¯è‡ªå·±æ¨¡æ‹Ÿå‡ºæ¥ï¼Œç†è®ºä¸Šæ•ˆæœè¦å¥½äºä¸´æ—¶è¡¨çš„æ–¹æ¡ˆã€‚</p>\n</li>\n</ol><p>æœ€åï¼Œæˆ‘ç»™ä½ ç•™ä¸‹ä¸€é“æ€è€ƒé¢˜å§ã€‚</p><p>æˆ‘ä»¬åœ¨è®²joinè¯­å¥çš„è¿™ä¸¤ç¯‡æ–‡ç« ä¸­ï¼Œéƒ½åªæ¶‰åŠåˆ°äº†ä¸¤ä¸ªè¡¨çš„joinã€‚é‚£ä¹ˆï¼Œç°åœ¨æœ‰ä¸€ä¸ªä¸‰ä¸ªè¡¨joinçš„éœ€æ±‚ï¼Œå‡è®¾è¿™ä¸‰ä¸ªè¡¨çš„è¡¨ç»“æ„å¦‚ä¸‹ï¼š</p><pre><code>CREATE TABLE `t1` (\n `id` int(11) NOT NULL,\n `a` int(11) DEFAULT NULL,\n `b` int(11) DEFAULT NULL,\n `c` int(11) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB;\n\ncreate table t2 like t1;\ncreate table t3 like t2;\ninsert into ... //åˆå§‹åŒ–ä¸‰å¼ è¡¨çš„æ•°æ®\n</code></pre><p>è¯­å¥çš„éœ€æ±‚å®ç°å¦‚ä¸‹çš„joiné€»è¾‘ï¼š</p><pre><code>select * from t1 join t2 on(t1.a=t2.a) join t3 on (t2.b=t3.b) where t1.c&gt;=X and t2.c&gt;=Y and t3.c&gt;=Z;\n</code></pre><p>ç°åœ¨ä¸ºäº†å¾—åˆ°æœ€å¿«çš„æ‰§è¡Œé€Ÿåº¦ï¼Œå¦‚æœè®©ä½ æ¥è®¾è®¡è¡¨t1ã€t2ã€t3ä¸Šçš„ç´¢å¼•ï¼Œæ¥æ”¯æŒè¿™ä¸ªjoinè¯­å¥ï¼Œä½ ä¼šåŠ å“ªäº›ç´¢å¼•å‘¢ï¼Ÿ</p><p>åŒæ—¶ï¼Œå¦‚æœæˆ‘å¸Œæœ›ä½ ç”¨straight_joinæ¥é‡å†™è¿™ä¸ªè¯­å¥ï¼Œé…åˆä½ åˆ›å»ºçš„ç´¢å¼•ï¼Œä½ å°±éœ€è¦å®‰æ’è¿æ¥é¡ºåºï¼Œä½ ä¸»è¦è€ƒè™‘çš„å› ç´ æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>ä½ å¯ä»¥æŠŠä½ çš„æ–¹æ¡ˆå’Œåˆ†æå†™åœ¨ç•™è¨€åŒºï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« çš„æœ«å°¾å’Œä½ è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><h1>ä¸ŠæœŸé—®é¢˜æ—¶é—´</h1><p>æˆ‘åœ¨ä¸Šç¯‡æ–‡ç« æœ€åç•™ç»™ä½ çš„é—®é¢˜ï¼Œå·²ç»åœ¨æœ¬ç¯‡æ–‡ç« ä¸­è§£ç­”äº†ã€‚</p><p>è¿™é‡Œæˆ‘å†æ ¹æ®è¯„è®ºåŒºç•™è¨€çš„æƒ…å†µï¼Œç®€å•æ€»ç»“ä¸‹ã€‚æ ¹æ®æ•°æ®é‡çš„å¤§å°ï¼Œæœ‰è¿™ä¹ˆä¸¤ç§æƒ…å†µï¼š</p><ul>\n<li>@é•¿æ° å’Œ @è€æ¨åŒå¿— æåˆ°äº†æ•°æ®é‡å°äºoldåŒºåŸŸå†…å­˜çš„æƒ…å†µï¼›</li>\n<li>@Zzz åŒå­¦ï¼Œå¾ˆè®¤çœŸåœ°çœ‹äº†å…¶ä»–åŒå­¦çš„è¯„è®ºï¼Œå¹¶ä¸”æäº†ä¸€ä¸ªå¾ˆæ·±çš„é—®é¢˜ã€‚å¯¹è¢«é©±åŠ¨è¡¨æ•°æ®é‡å¤§äºBuffer Poolçš„åœºæ™¯ï¼Œåšäº†å¾ˆç»†è‡´çš„æ¨æ¼”å’Œåˆ†æã€‚</li>\n</ul><p>ç»™è¿™äº›åŒå­¦ç‚¹èµï¼Œéå¸¸å¥½çš„æ€è€ƒå’Œè®¨è®ºã€‚</p><p></p>","comments":[{"had_liked":false,"id":68300,"user_name":"IceGeek17","can_delete":false,"product_type":"c1","uid":1103101,"ip_address":"","ucode":"1B42D7260449B4","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/fd/43802282.jpg","comment_is_top":false,"comment_ctime":1550480567,"is_pvip":false,"discussion_count":12,"race_medal":0,"score":"272133420215","product_id":100020801,"comment_content":"èŠ‚åè¡¥è¯¾ï¼Œæœ‰å‡ ä¸ªé—®é¢˜ï¼š<br><br>é—®é¢˜ä¸€ï¼š<br>å¯¹äºBKAç®—æ³•çš„æµç¨‹ç†è§£ï¼Œç”¨æ–‡ä¸­çš„ä¾‹å­ï¼Œå…ˆæŠŠt1è¡¨ï¼ˆå°è¡¨ï¼‰ä¸­æŸ¥è¯¢éœ€è¦çš„å­—æ®µæ”¾å…¥join_buffer, ç„¶åæŠŠjoin_bufferé‡Œçš„å­—æ®µå€¼æ‰¹é‡ä¼ ç»™t2è¡¨ï¼Œå…ˆæ ¹æ®ç´¢å¼•aæŸ¥åˆ°idï¼Œç„¶åå¾—åˆ°ä¸€æ‰¹ä¸»é”®idï¼Œå†æ ¹æ®ä¸»é”®idæ’åºï¼Œç„¶åå†æ ¹æ®æ’å®Œåºçš„idå»ä¸»é”®ç´¢å¼•æŸ¥æ•°æ®ï¼ˆè¿™é‡Œç”¨åˆ°MRRï¼‰<br>ç†è§£æ˜¯å¦æ­£ç¡®ï¼Ÿ<br>è¿™é‡Œå¯¹äºä¸»é”®idæ’åºæ˜¯åœ¨å“ªé‡Œåšçš„ï¼Œæ˜¯åœ¨join_bufferé‡Œï¼Œè¿˜æ˜¯å¦å¤–å†å¼€è¾Ÿä¸€å—ä¸´æ—¶å†…å­˜ï¼Ÿå¦‚æœåœ¨join_bufferé‡Œï¼Œé‚£join_bufferé‡Œçš„æ¯è¡Œå†…å®¹æ˜¯ä¸æ˜¯ï¼št2.id + t1æŸ¥è¯¢å¿…é¡»çš„å­—æ®µï¼Œå¹¶ä¸”join_bufferé‡Œæ˜¯æ ¹æ®idæ’åºçš„ï¼Ÿ<br><br>é—®é¢˜äºŒï¼š<br>è™½ç„¶MySQLå®˜æ–¹æ²¡æœ‰æ”¯æŒhash joinï¼Œä½†æ˜¯ä¹‹å‰çœ‹åˆ°æ–‡ç« è¯´ï¼ŒMariaDBå·²ç»æ”¯æŒhash joinï¼Œèƒ½ä¸èƒ½åç»­åœ¨ç­”ç–‘æ–‡ç« ä¸­ç®€å•æ€»ç»“ä¸‹mariaDBæ”¯æŒçš„joinç®—æ³•<br><br>é—®é¢˜ä¸‰ï¼š<br>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä¸€ä¸ªæ¯”è¾ƒå›°æƒ‘çš„é—®é¢˜ï¼Œçœ‹åˆ°è¿‡è¿™æ ·çš„ç±»ä¼¼å†™æ³•ï¼š<br>select xxx from t1 join t2 on t1.id = t2.id  for update ï¼ˆç›®çš„æ˜¯è·å–å‡ ä¸ªè¡¨ä¸Šæœ€æ–°çš„æ•°æ®ï¼Œå¹¶ä¸”åŠ ä¸Šé”ï¼Œé˜²æ­¢æ•°æ®è¢«æ›´æ–°ï¼‰<br>è¿™é‡Œæœ‰å‡ ä¸ªé—®é¢˜ï¼š<br>1) åƒè¿™æ · join + for updateï¼Œè¡¨ä¸Šçš„åŠ é”è§„åˆ™æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿæ˜¯ä¸æ˜¯åœ¨éœ€è¦joinçš„ä¸¤ä¸ªè¡¨ä¸Šæ ¹æ®å…·ä½“çš„æŸ¥è¯¢æ‰§è¡Œè¿‡ç¨‹éƒ½åŠ ä¸Šé”ï¼Ÿ<br>2ï¼‰åƒè¿™æ · join + for update çš„ç”¨æ³•æ˜¯å¦åˆç†ï¼Ÿç¢°åˆ°è¿™æ ·çš„åœºæ™¯ï¼Œåº”è¯¥æ€ä¹ˆå»åšï¼Ÿ<br><br>é—®é¢˜å››ï¼š<br>çœ‹è¿‡é˜¿é‡Œè¾“å‡ºçš„å¼€å‘æ‰‹å†Œé‡Œï¼Œå¼ºè°ƒ â€œæœ€å¤šä¸è¶…è¿‡ä¸‰è¡¨joinâ€ï¼Œå®é™…é¡¹ç›®ä¸­ï¼Œç»™æˆ‘æ„Ÿè§‰å¾ˆéš¾åšåˆ°æ‰€æœ‰ä¸šåŠ¡éƒ½ä¸è¶…è¿‡ä¸‰è¡¨joinï¼Œé‚£è¿™é‡Œçš„é—®é¢˜å°±æ˜¯ï¼Œæœ‰ä»€ä¹ˆç›¸å…³çš„ç»éªŒæ–¹æ³•ï¼Œå¯ä»¥å°½é‡é™ä½å‚ä¸joinçš„æ•°æ®è¡¨ï¼Ÿ<br>æ¯”å¦‚ï¼Œåœ¨æ•°æ®è¡¨é‡Œæ·»åŠ å†—ä½™å­—æ®µï¼Œå¯ä»¥é™ä½å‚ä¸joinçš„æ•°æ®è¡¨æ•°é‡ï¼Œè¿˜æœ‰ä»€ä¹ˆå…¶ä»–å¥½çš„æ–¹æ³•ï¼Ÿ<br><br><br>","like_count":64,"discussions":[{"author":{"id":1043325,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/c9xpiakQ3OC1AlfCeW03lLnnb7mj5v35Hib8YDs66zpnVib2n2qFichFmFp2Ec4QDPR0dKh38MkBBLyD3bE4NiaanZQ/132","nickname":"é¾™æ™“","note":"","ucode":"FAF34F1C65D103","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":359225,"discussion_content":"é—®é¢˜ä¸€ï¼šè¿™é‡Œå¯¹äºä¸»é”®idæ’åºæ˜¯åœ¨å“ªé‡Œåšçš„ï¼Œæ˜¯åœ¨join_bufferé‡Œï¼Œè¿˜æ˜¯å¦å¤–å†å¼€è¾Ÿä¸€å—ä¸´æ—¶å†…å­˜ï¼Ÿ\n--æ˜¯ç”¨äºMRRæ’åºçš„read_rnd_bufferï¼Œjoin_bufferæ˜¯ç¼“å­˜t1è¡¨è¿‡æ»¤åçš„å¿…é¡»å­—æ®µç»“æœé›†ã€‚\n\nå…³äºç¬¬å››ä¸ªé—®é¢˜ï¼Œè€å¸ˆåœ¨è¯„è®ºåŒºæœ‰è¿™æ ·ä¸€æ®µç•™è¨€ï¼š\nXD\nè€å¸ˆï¼Œä¸‰ä¸ªè¡¨å…³è”çš„æ‰§è¡Œæµç¨‹ä¹Ÿæ˜¯ä¸€æ ·çš„å—ï¼Ÿè®°å¾—é˜¿é‡Œçš„mysqlè§„èŒƒé‡Œæœ‰ä¸€æ¡ä¸å…è®¸3ä¸ªåŠä»¥ä¸Šè¡¨è¿›è¡Œjoinæ“ä½œï¼Œè¿™ä¸ªåŸå› æ˜¯ï¼Ÿ\n\nä½œè€…å›å¤: å…¶å®å°±æ˜¯æ€•å‡ºäº‹å„¿ï¼Œéœ€è¦ç²¾ç¡®çš„æ§åˆ¶ï¼Œå¦‚æœæ˜¯ä¸¤ä¸ªIndex Nested-Loop join å…¶å®è¿˜å¥½å•¦\nåªæ˜¯ä½œæˆè§„èŒƒï¼Œç”¨joinæ¬¡æ•°é™åˆ¶ï¼Œè§„èŒƒæ¯”è¾ƒå¥½æ‰§è¡Œ\n","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1616145332,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1140175,"avatar":"https://static001.geekbang.org/account/avatar/00/11/65/cf/326c0eea.jpg","nickname":"x-rayîŒº","note":"","ucode":"8363F0C4D0AC0B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339601,"discussion_content":"æŒ‰ç…§è€å¸ˆçš„è¿™ä¸ªè¯´æ³•ï¼ŒæŠŠt1è¡¨é‡Œçš„æ•°æ®å–å‡ºæ¥ï¼Œä¸´æ—¶æ”¾åˆ°join bufferé‡Œï¼Œè¿™åº”è¯¥åªæ˜¯æ”¾ä¸€ä¸‹ï¼Œç„¶åä¸€å£æ°”ä¼ ç»™t2ï¼Œæ­¤æ—¶t2è¿›è¡ŒjoinåŒ¹é…ï¼Œå…¶å®å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªèŒƒå›´æŸ¥æ‰¾ï¼Œè¿™æ—¶å€™åº”è¯¥æ˜¯åœ¨t2è¡¨é‡Œåšäº†MRRã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1609745191,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1700634,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJrGia7c6VRslfS3YJfHib84mibKGnGshUn3cWFJxhm9MjEMuwJibsTpvZI2yW2LJO1bLBgcglVdRxMZA/132","nickname":"èµ«æ‹‰","note":"","ucode":"F8368316AA6F01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327179,"discussion_content":"ä¸ªäººçœ‹æ³•:é¦–å…ˆMRRæ˜¯å¯¹NLJç®—æ³•å›è¡¨çš„ä¼˜åŒ–ï¼Œè€å¸ˆè¯´çš„BNLè½¬BKAæœ€ç®€å•çš„æ–¹æ³•æ˜¯è¢«é©±åŠ¨è¡¨æœ‰ç´¢å¼•ï¼Œå…¶å®è¿™å°±è½¬ä¸ºäº†NLJï¼Œåªæ˜¯å¯¹å›è¡¨å†åšä¸€ä¸ªä¼˜åŒ–ï¼Œå°±æˆäº†BKA","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1605760762,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588210,"discussion_content":"è¯»äº†ä¸‰éè¯´ä¸€ä¸‹æˆ‘çš„ç†è§£ï¼›\n1.mrræ˜¯innodbå¯¹ç´¢å¼•å†ä¼˜åŒ–ï¼Œæ¯”å¦‚wher a in(1,3,6,7)ï¼Œå¦‚æœå‘½ä¸­ç´¢å¼•aå°±ä¼šæ‹¿åˆ°è¿™äº›è®°å½•æ ¹æ®ä¸»é”®æ’åºåå†å›è¡¨ï¼Œè¿™é‡Œæ’åºç¼“å­˜ç”¨çš„æ˜¯innodbçš„read bufferï¼›\n2.åœ¨NLJåŸå§‹ç®—æ³•é‡Œé¢åªèƒ½è¿›è¡Œå•å€¼çš„æ ‘æœç´¢ï¼Œä¸ºäº†ä½¿ç”¨åˆ°mrrå°±å¾—ä½¿å…¶æ»¡è¶³èŒƒå›´æŸ¥è¯¢ï¼Œæ‰€ä»¥serverå±‚å°±ç”¨join_bufferæ¥å……å½“å®¹å™¨ï¼Œç„¶åå†æŒ‰æ‰¹é‡æŸ¥è¯¢çš„å½¢å¼å»æŸ¥ï¼›","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1663592568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2355100,"avatar":"https://static001.geekbang.org/account/avatar/00/23/ef/9c/545b9f82.jpg","nickname":"frode","note":"","ucode":"AF53674FD78084","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384534,"discussion_content":"8.0.20å·²ç»å½»åº•æ”¯æŒhash joinäº†ï¼ŒæŠŠbnlåˆ é™¤äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1626654196,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1966533,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/01/c5/b48d25da.jpg","nickname":"cake","note":"","ucode":"55A7FC6CC1204C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548813,"discussion_content":"å¾ˆçƒ¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643383413,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1966533,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/01/c5/b48d25da.jpg","nickname":"cake","note":"","ucode":"55A7FC6CC1204C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548812,"discussion_content":"æ—æ™“å…µä¸å±‘äºå›ç­”åƒåœ¾é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643383406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1020492,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/92/4c/40783447.jpg","nickname":"ä½•éª§","note":"","ucode":"11DCC74CE2F300","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1966533,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/01/c5/b48d25da.jpg","nickname":"cake","note":"","ucode":"55A7FC6CC1204C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585273,"discussion_content":"å“ˆå“ˆå“ˆ è€å¸ˆæ­£å¿™ç€ç‚’è‚¡å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661429245,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":548812,"ip_address":"å¹¿ä¸œ"},"score":585273,"extra":""}]},{"author":{"id":1140175,"avatar":"https://static001.geekbang.org/account/avatar/00/11/65/cf/326c0eea.jpg","nickname":"x-rayîŒº","note":"","ucode":"8363F0C4D0AC0B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339598,"discussion_content":"è¿™é‡Œç¡®å®æœ‰ç‚¹ç–‘é—®ï¼Œä¸ªäººè§‰å¾—ï¼Œå¦‚æœåªæ˜¯åœ¨t2è¡¨é‡ŒåšMRRï¼Œé‚£BKAç®—æ³•ä¸éœ€è¦åœ¨join bufferé‡Œåšä»»ä½•äº‹æƒ…ï¼Œå› ä¸ºè¿™ä¸ªjoinçš„å­—æ®µåˆä¸æ˜¯ä¸»é”®ï¼Œç›´æ¥æ‰”è¿‡å»å°±å®Œäº‹äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609744687,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1809802,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/8a/a2d34896.jpg","nickname":"ä¸€å…ƒ(wx:abley1874)","note":"","ucode":"5E7A33642FC767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307258,"discussion_content":"å¯¹äºç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä¹Ÿæ˜¯ç†è§£å¾—ç¨€é‡Œç³Šæ¶‚çš„ï¼\nBKAä¸ºå•¥è¦ä¾èµ–MRRï¼ŸBKAç®—æ³•ä¸ºå•¥ä¸ç›´æ¥ä½¿ç”¨MRRä¸­çš„read_rnd_bufferæ¥åšæ•°æ®ç¼“å­˜ï¼Œä¸ºä»€ä¹ˆååç”¨join_bufferï¼Œæ„Ÿè§‰å¤šæ­¤ä¸€ä¸¾äº†ã€‚å³ç„¶ç”¨äº†join_bufferä¸ºå•¥è¿˜è¦ä¾èµ–MRRï¼Ÿè€å¸ˆä½ å€’æ˜¯è®²æ¸…æ¥šå•Šï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600573297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2043565,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/2e/ad/01051c36.jpg","nickname":"ä½ åˆ«è¯´è¯","note":"","ucode":"165787E07E823C","race_medal":2,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300730,"discussion_content":"@ç‰ˆä¸»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598250211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1900601,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/00/39/33fe53a9.jpg","nickname":"alin","note":"","ucode":"FC6FB85ADA6AA2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":200785,"discussion_content":"æ€ä¹ˆæ²¡äººå›ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583722034,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65026,"user_name":"è€æ¨åŒå¿—","can_delete":false,"product_type":"c1","uid":1246199,"ip_address":"","ucode":"3F334F0CFD3DE6","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/f7/3a493bec.jpg","comment_is_top":false,"comment_ctime":1549006607,"is_pvip":false,"replies":[{"id":"23071","content":"å¯¹ï¼Œå¥½é—®é¢˜ï¼Œç”¨äº†order byå°±ä¸ç”¨MRRäº†","user_name":"ä½œè€…å›å¤","comment_id":65026,"uid":"1264162","ip_address":"","utype":1,"ctime":1549039038,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":5,"race_medal":0,"score":"242067175183","product_id":100020801,"comment_content":"æˆ‘å‡†å¤‡ç»™<br>t1å¢åŠ ç´¢å¼•c<br>t2å¢åŠ ç»„åˆç´¢å¼•b,c<br>t3å¢åŠ ç»„åˆç´¢å¼•b,c<br>select * from t1 straight_join t2 on(t1.a=t2.a)  straight_join  t3 on (t2.b=t3.b) where t1.c&gt;=X and t2.c&gt;=Y and t3.c&gt;=Z;<br><br>å¦å¤–æˆ‘è¿˜æœ‰ä¸ªé—®é¢˜ï¼Œå¼€ç¯‡æåˆ°çš„è¿™å¥sql select * from t1 where a&gt;=1 and a&lt;=100;<br>aæ˜¯ç´¢å¼•åˆ—ï¼Œå¦‚æœè¿™å¥ç´¢å¼•æœ‰order by aï¼Œä¸ä½¿ç”¨MRR ä¼˜åŒ–ï¼ŒæŸ¥è¯¢å‡ºæ¥å°±æ˜¯æŒ‰aæ’åºçš„ï¼Œä½¿ç”¨äº†mrrä¼˜åŒ–ï¼Œæ˜¯ä¸æ˜¯è¦é¢å¤–æ’åº<br><br>","like_count":57,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438284,"discussion_content":"å¯¹ï¼Œå¥½é—®é¢˜ï¼Œç”¨äº†order byå°±ä¸ç”¨MRRäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549039038,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2009461,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/a9/75/dbccd12d.jpg","nickname":"ç¨»è‰äºº","note":"","ucode":"6694EE2CD36B8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":356921,"discussion_content":"åº”è¯¥æ˜¯order by desc aå§ï¼Ÿè¿™æ ·æŸ¥å‡ºæ¥çš„idæ‰æ˜¯æ­£åºçš„ã€‚è€Œä¸”t2åº”è¯¥æ˜¯å¢åŠ ç»„åˆç´¢å¼•a,cå§ã€‚ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1615707613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2027690,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f0/aa/6ba4a1ab.jpg","nickname":"â„¡ã„¨å’Œå°šãµ","note":"","ucode":"E26B2BC7D8E4FC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2009461,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/a9/75/dbccd12d.jpg","nickname":"ç¨»è‰äºº","note":"","ucode":"6694EE2CD36B8C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382102,"discussion_content":"è¿™ä¸ªè€å“¥çš„æ„æ€åº”è¯¥æ˜¯å¦‚æœè¿™ä¸ªsqlåé¢æœ‰order by aï¼Œé‚£ä¹ˆæˆ‘æœ€åå›è¡¨æŸ¥å‡ºæ¥çš„ç»“æœé›†åº”è¯¥æ˜¯æŒ‰ç…§aå‡åºçš„ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨äº†mrrï¼Œè™½ç„¶å›è¡¨æ˜¯æŒ‰ç…§idå‡åºé¡ºåºioï¼Œä½†æ˜¯æœ€åçš„ç»“æœé›†ä¹Ÿæ˜¯æŒ‰ç…§idå‡åºæ’åˆ—çš„ï¼Œåˆå› ä¸ºæœ‰order by a çš„å­˜åœ¨ï¼Œå°±æœ€åè¿˜è¦å¯¹ç»“æœé›†æŒ‰ç…§aè¿›è¡Œä¸€æ¬¡æ’åºï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µä¸‹å°±æ²¡å¿…è¦ä½¿ç”¨mrräº†","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1625412165,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":356921,"ip_address":""},"score":382102,"extra":""}]},{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588212,"discussion_content":"è¯´æ˜explainé‡Œé¢å³ä½¿èµ°ç´¢å¼•ç»“æœä¹Ÿä¸ä¸€å®šæ˜¯æŒ‰ç´¢å¼•æœ‰åºæ’åˆ—çš„ï¼›","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1663592682,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1518795,"avatar":"","nickname":"Geek_2ac804","note":"","ucode":"EDF69B20030BB8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554825,"discussion_content":"t2åº”è¯¥æ˜¯å¢åŠ a,cå§ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1646634352,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65169,"user_name":"Mr.Strive.Z.H.L","can_delete":false,"product_type":"c1","uid":1030198,"ip_address":"","ucode":"6D97E159E2EECD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b8/36/542c96bf.jpg","comment_is_top":false,"comment_ctime":1549084702,"is_pvip":false,"replies":[{"id":"23091","content":"æ–°å¹´å¿«ä¹ï¼Œåˆ†æå¾—å¾ˆå¥½ã€‚<br><br>å¯ä»¥å†è¡¥å……ä¸€å¥ï¼Œä¼šæ›´å¥½ç†è§£ä½ è¯´çš„è¿™ä¸ªè¿‡ç¨‹ ï¼š<br>  å¦‚æœé‡‡ç”¨BKAè¿›è¡Œä¼˜åŒ–,æ¯å¤šä¸€ä¸ªjoinï¼Œå°±å¤šä¸€ä¸ªjoin_buffer","user_name":"ä½œè€…å›å¤","comment_id":65169,"uid":"1264162","ip_address":"","utype":1,"ctime":1549097989,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"194822613022","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæ–°å¹´å¿«ä¹~~<br><br>å…³äºä¸‰è¡¨joinæœ‰ä¸€ä¸ªç–‘æƒ‘ç‚¹éœ€è¦ç¡®è®¤ï¼š<br><br>è€å¸ˆæ‚¨åœ¨è¯„è®ºä¸­è¯´åˆ°ï¼Œä¸‰è¡¨joinä¸ä¼šæ˜¯å‰ä¸¤ä¸ªè¡¨joinåå¾—åˆ°ç»“æœé›†ï¼Œå†å’Œç¬¬ä¸‰å¼ è¡¨joinã€‚<br>é’ˆå¯¹è¿™å¥è¯ï¼Œæˆ‘çš„ç†è§£æ˜¯ï¼š<br>å‡è®¾æˆ‘ä»¬ä¸è€ƒè™‘BKAï¼Œå°±æŒ‰ç…§ä¸€è¡Œè¡Œæ•°æ®æ¥åˆ¤æ–­çš„è¯ï¼Œæµç¨‹åº”è¯¥å¦‚ä¸‹ï¼ˆæˆ‘ä¼šå°†serverç«¯å’Œinnodbç«¯åˆ†çš„å¾ˆæ¸…æ¥šï¼‰ï¼š<br>è¡¨æ˜¯t1 ,t2 ,t3ã€‚  t1 straight_join t2 straight_join t3ï¼Œè¿™æ ·çš„joiné¡ºåºã€‚<br>1. è°ƒç”¨innodbæ¥å£ï¼Œä»t1ä¸­å–ä¸€è¡Œæ•°æ®ï¼Œæ•°æ®è¿”å›åˆ°serverç«¯ã€‚<br>2. è°ƒç”¨innodbæ¥å£ï¼Œä»t2ä¸­å–æ»¡è¶³æ¡ä»¶çš„æ•°æ®ï¼Œæ•°æ®è¿”å›åˆ°serverç«¯ã€‚<br>3. è°ƒç”¨innodbæ¥å£ï¼Œä»t3ä¸­å–æ»¡è¶³æ¡ä»¶çš„æ•°æ®ï¼Œæ•°æ®è¿”å›åˆ°serverç«¯ã€‚<br>ä¸Šé¢ä¸‰æ­¥ä¹‹åï¼Œé©±åŠ¨è¡¨ t1çš„ä¸€æ¡æ•°æ®å°±å¤„ç†å®Œäº†ï¼Œæ¥ä¸‹æ¥é‡å¤ä¸Šè¿°è¿‡ç¨‹ã€‚<br>ï¼ˆå¦‚æœé‡‡ç”¨BKAè¿›è¡Œä¼˜åŒ–ï¼Œå¯ä»¥ç†è§£ä¸ºä¸æ˜¯ä¸€è¡Œè¡Œæ•°æ®çš„æå–ï¼Œè€Œæ˜¯ä¸€ä¸ªèŒƒå›´å†…æ•°æ®çš„æå–ï¼‰ã€‚<br><br>æŒ‰ç…§æˆ‘ä¸Šé¢çš„æè¿°ï¼Œç¡®å®æ²¡æœ‰å‰ä¸¤è¡¨å…ˆjoinå¾—ç»“æœé›†ï¼Œç„¶åå†joinç¬¬ä¸‰å¼ è¡¨çš„è¿‡ç¨‹ã€‚<br>ä¸çŸ¥é“æˆ‘ä¸Šé¢çš„æè¿°çš„æµç¨‹å¯¹ä¸å¯¹ï¼Ÿï¼ˆæˆ‘ä¸ªäººè§‰å¾—ï¼Œå°†innodbçš„å¤„ç†å’Œserverç«¯çš„å¤„ç†åˆ†éš”æ¸…æ™°ï¼Œå¯¹äºsqlè¯­å¥çš„ç†è§£ï¼Œä¼šé€å½»å¾ˆå¤šï¼‰","like_count":46,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438345,"discussion_content":"æ–°å¹´å¿«ä¹ï¼Œåˆ†æå¾—å¾ˆå¥½ã€‚\n\nå¯ä»¥å†è¡¥å……ä¸€å¥ï¼Œä¼šæ›´å¥½ç†è§£ä½ è¯´çš„è¿™ä¸ªè¿‡ç¨‹ ï¼š\n  å¦‚æœé‡‡ç”¨BKAè¿›è¡Œä¼˜åŒ–,æ¯å¤šä¸€ä¸ªjoinï¼Œå°±å¤šä¸€ä¸ªjoin_buffer","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549097989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":66774,"user_name":"å¤©ç‹","can_delete":false,"product_type":"c1","uid":1239337,"ip_address":"","ucode":"C074B2F9A5F007","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/29/629d9bb0.jpg","comment_is_top":false,"comment_ctime":1550019297,"is_pvip":false,"replies":[{"id":"23987","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","comment_id":66774,"uid":"1264162","ip_address":"","utype":1,"ctime":1550297037,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"126104070881","product_id":100020801,"comment_content":"joinè¯­å¥çš„ä¼˜åŒ–ï¼ŒNLJç®—æ³•çš„ä¼˜åŒ–ï¼ŒMRRä¼˜åŒ–å™¨ä¼šåœ¨join_bufferè¿›è¡Œä¸»é”®çš„æ’åºï¼Œç„¶åå»ä¸»é”®ç´¢å¼•æ ‘ä¸Šä¸€ä¸ªä¸ªçš„æŸ¥æ‰¾ï¼Œå› ä¸ºæŒ‰ç…§ä¸»é”®é¡ºåºå»ä¸»é”®ç´¢å¼•æ ‘ä¸ŠæŸ¥æ‰¾ï¼Œæ€§èƒ½ä¼šæ¯”è¾ƒé«˜ï¼ŒMRRä¼˜åŒ–æ¥è¿‘é¡ºåºè¯»ï¼Œæ€§èƒ½ä¼šæ¯”è¾ƒé«˜ã€‚BKAç®—æ³•æ˜¯å¯¹NLJç®—æ³•çš„ä¼˜åŒ–ï¼Œä¸€æ¬¡å–å‡ºä¸€æ‰¹æ•°æ®çš„å­—æ®µåˆ°join_bufferä¸­ï¼Œç„¶åæ‰¹é‡joinï¼Œæ€§èƒ½ä¼šæ¯”è¾ƒå¥½ã€‚BKAç®—æ³•ä¾èµ–äºMRRï¼Œå› ä¸ºæ‰¹é‡joinæ‰¾åˆ°è¢«é©±åŠ¨è¡¨çš„éèšé›†ç´¢å¼•å­—æ®µé€šè¿‡MRRå»æŸ¥æ‰¾è¡Œæ•°æ®","like_count":29,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438901,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550297037,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1202230,"avatar":"https://static001.geekbang.org/account/avatar/00/12/58/36/7b0ce1db.jpg","nickname":"æ–­é¸¿","note":"","ucode":"B46B608239C33F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":202412,"discussion_content":"æŒ‰ç…§è€å¸ˆçš„è®²è§£çš„è¯MRRçš„æ’åºä¸æ˜¯åœ¨read_rnd_bufferé‡Œé¢çš„å—ï¼Ÿåˆæ­¥ç†è§£çš„è¯æˆ‘è¿™è¾¹è§‰å¾—åº”è¯¥æ˜¯join_bufferé‡Œé¢ä¿å­˜çš„æ˜¯é©±åŠ¨è¡¨éœ€è¦è¿‡æ»¤ä¹‹åçš„æ•°æ®ï¼Œç„¶åå’Œè¢«é©±åŠ¨è¡¨è¿›è¡ŒåŒ¹é…ä¹‹åçš„onå…³è”å­—æ®µéèšé›†ç´¢å¼•å’Œä¸»é”®ä¿¡æ¯å­˜æ”¾åœ¨read_rnd_buffer? æˆ–è€…è¯´join_bufferå­˜æ”¾äº†ä¿©è€…æ‰€æœ‰çš„ä¿¡æ¯å—ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1583914727,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65590,"user_name":"éƒ­å¥","can_delete":false,"product_type":"c1","uid":1102204,"ip_address":"","ucode":"169645EBF3B46C","user_header":"https://static001.geekbang.org/account/avatar/00/10/d1/7c/4639f22c.jpg","comment_is_top":false,"comment_ctime":1549469116,"is_pvip":false,"replies":[{"id":"23226","content":"1. æ­£å¸¸æ˜¯ä¼šè‡ªå·±æ‰¾åˆ°åˆç†çš„ï¼Œä½†æ˜¯ç”¨å‰explainæ˜¯å¥½ä¹ æƒ¯å“ˆ<br>2. è¿™ä¸ªé—®é¢˜çš„å±•å¼€æˆ‘æ”¾åˆ°ç­”ç–‘æ–‡ç« ä¸­å“ˆ<br>3. è¿™ä¹Ÿæ˜¯å¥½é—®é¢˜ï¼Œéœ€è¦åˆ†ææ˜¯ä½¿ç”¨å“ªç§ç®—æ³•ï¼Œä¹Ÿæ”¾åˆ°ç­”ç–‘æ–‡ç« å±•å¼€å“ˆã€‚<br><br>æ–°å¹´å¿«ä¹~<br>","user_name":"ä½œè€…å›å¤","comment_id":65590,"uid":"1264162","ip_address":"","utype":1,"ctime":1549503144,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"117513586108","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæœ‰å‡ ä¸ªé—®é¢˜è¿˜éœ€è¦è¯·æ•™ä¸€ä¸‹:<br>1.ä¸Šä¸€ç« t1è¡¨100æ¡æ•°æ®ï¼Œt21000æ¡æ•°æ®ï¼Œmysqlä¼šæ¯æ¬¡éƒ½ä¼šå‡†ç¡®çš„æ‰¾å‡ºå“ªå¼ è¡¨æ˜¯åˆç†çš„é©±åŠ¨è¡¨å—ï¼Ÿè¿˜æ˜¯éœ€è¦äººä¸ºçš„æ·»åŠ straight_joinã€‚<br>2.åƒleft joinè¿™ç§ï¼Œå·¦è¾¹ä¸€å®šæ˜¯é©±åŠ¨è¡¨å§ï¼Ÿä»¥å·¦è¾¹ä¸ºæ ‡å‡†æŸ¥çœ‹å³è¾¹æœ‰ç¬¦åˆçš„æ¡ä»¶ï¼Œæ‹¼æˆä¸€æ¡æ•°æ®ï¼Œçœ‹åˆ°ä½ ç»™å…¶ä»–åŒå­¦çš„è¯„è®ºè¯´å¯èƒ½ä¸æ˜¯ï¼Œè¿™æœ‰äº›ç–‘æƒ‘ã€‚<br>3.åœ¨åšjoinçš„æ—¶å€™ï¼Œæœ‰äº›æ¡ä»¶æ˜¯å¯ä»¥æ”¾åœ¨onä¸­ä¹Ÿå¯ä»¥æ”¾åœ¨whereä¸­ï¼Œæ¯”å¦‚(t1.yn=1 å’Œt2.yn=1)è¿™ç§ç®€å•åˆ¤æ–­æ˜¯å¦åˆ é™¤çš„ã€‚æœ€ä¸»è¦çš„æ˜¯ï¼Œéœ€è¦æ ¹æ®ä¸¤ä¸ªæ¡ä»¶æ‰èƒ½joinçš„(productCodeå’ŒcustCode),éœ€è¦ä¸¤ä¸ªéƒ½åœ¨oné‡Œï¼Œè¿˜æ˜¯ä¸€ä¸ªåœ¨onä¸­ï¼Œä¸€ä¸ªåœ¨whereä¸­æ›´å¥½å‘¢ï¼Ÿ","like_count":27,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438511,"discussion_content":"1. æ­£å¸¸æ˜¯ä¼šè‡ªå·±æ‰¾åˆ°åˆç†çš„ï¼Œä½†æ˜¯ç”¨å‰explainæ˜¯å¥½ä¹ æƒ¯å“ˆ\n2. è¿™ä¸ªé—®é¢˜çš„å±•å¼€æˆ‘æ”¾åˆ°ç­”ç–‘æ–‡ç« ä¸­å“ˆ\n3. è¿™ä¹Ÿæ˜¯å¥½é—®é¢˜ï¼Œéœ€è¦åˆ†ææ˜¯ä½¿ç”¨å“ªç§ç®—æ³•ï¼Œä¹Ÿæ”¾åˆ°ç­”ç–‘æ–‡ç« å±•å¼€å“ˆã€‚\n\næ–°å¹´å¿«ä¹~\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549503144,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1179312,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/b0/260f41f0.jpg","nickname":"loris","note":"","ucode":"00842745CF4B31","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":83811,"discussion_content":"æ”¾åœ¨whereæ¡ä»¶ä¸­ï¼Œè¦è€ƒè™‘è¯­ä¹‰çš„æ­£ç¡®æ€§","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576466596,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":102321,"user_name":"çº¸ç‰‡äºº","can_delete":false,"product_type":"c1","uid":1358508,"ip_address":"","ucode":"84490E7CEF59A4","user_header":"https://static001.geekbang.org/account/avatar/00/14/ba/ac/b44b256a.jpg","comment_is_top":false,"comment_ctime":1560199267,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"104639414371","product_id":100020801,"comment_content":"çŸ¥è¯†ç‚¹æ€»ç»“<br>1ã€ç¿»è¯‘åµŒå¥—æŸ¥è¯¢è¿‡ç¨‹<br>Join = åµŒå¥—æŸ¥è¯¢<br>ç¤ºä¾‹ï¼št1 join t2 on t1.a=t2.a where t1.id&gt;=X and t2.id&gt;=Y<br>å·²çŸ¥ï¼šé©±åŠ¨è¡¨t1çš„è§„æ¨¡æ˜¯Nï¼Œè¢«é©±åŠ¨è¡¨t2çš„è§„æ¨¡æ˜¯M<br>ä¼ªä»£ç ï¼š<br>SNLJ: æ‰«ææ¬¡æ•°NxM, è®¡ç®—æ¬¡æ•°NxM<br>for r1 in t1 &#47;* read from ~~disk~~ InnoDB(storage engine) *&#47;<br>  for r2 in t2<br>    if r1.a=r2.a<br>      if r1.id&gt;=X and r2.id&gt;=Y<br>        add r1+r2 into result_set<br>  end<br>end<br><br><br>BNLJ: æ‰«ææ¬¡æ•°N+KxMï¼Œè®¡ç®—æ¬¡æ•°NxMï¼ŒK = Nxrow_size&#47;join_buffer_size+1<br>for r1 in t1<br>  add r1 into join_buffer<br>end<br>for r2 in t2<br>  for r1 in join_buffer &#47;* read from ~~memory~~ join_buffer which is controlled by Server *&#47;<br>    if r1.a=r2.a<br>      if r1.id&gt;=X and r2.id&gt;=Y<br>        add r1+r2 into result_set<br>  end<br>end<br><br><br>INLJ: æ‰«ææ¬¡æ•°&lt;N+Nï¼Œè®¡ç®—æ¬¡æ•°N + Nx2xlnM&#47;ln2<br>for r1 in t1<br>  locate r1.a on t2 with index a  &#47;* search B+Tree *&#47;<br>  if r1.id&gt;=X and r2.id&gt;=Y<br>    add r1+r2 into result_set<br>end<br><br><br><br>2ã€Joinä¼˜åŒ–æ€è·¯<br>MRRä¼˜åŒ–æ€æƒ³ï¼šå›è¡¨å‰ï¼ŒæŒ‰ä¸»é”®æ’åºï¼Œæ‰§è¡Œè¯»å–æ“ä½œï¼Œä»¥ä¿è¯é¡ºåºè¯»ã€‚<br>BKAç®—æ³•ï¼šå…ˆæŒ‰BNLJçš„æ€æƒ³æ‰¹é‡æ‰«æé©±åŠ¨è¡¨æ•°æ®ï¼Œå†å°†ä¹‹æŒ‰è¢«é©±åŠ¨è¡¨ä¸Šçš„ç´¢å¼•æ’åºï¼Œå–å€¼ã€‚<br>ç¤ºä¾‹ï¼št1 join t2 on t1.a=t2.b where t1.id&gt;=X and t2.id&gt;=Y<br>ä¼ªä»£ç ï¼š<br>for r1 in t1<br>  add r1 into join_buffer<br>end <br>sort join_buffer by r1.a<br>for r1 in sort_buffer<br>  locate r1.a on t2 with index b  &#47;* search B+Tree *&#47;<br>  if r1.id&gt;=X and r2.id&gt;=Y<br>    add r1+r2 into result_set<br>end<br><br><br>3ã€BNLJè½¬BKA<br>æ–¹æ¡ˆä¸€ï¼šåœ¨è¢«é©±åŠ¨è¡¨çš„joinå­—æ®µä¸Šæ·»åŠ ç´¢å¼•ï¼Œç›¸å½“äºBNLJå…ˆè½¬INLJå†è½¬BKAã€‚<br>æ–¹æ¡ˆäºŒï¼šä¸é€‚å®œæ·»åŠ ç´¢å¼•çš„æƒ…å†µï¼ˆæŸ¥è¯¢è¯­å¥ä½¿ç”¨é¢‘ç‡è¾ƒä½ï¼‰ï¼Œå¼•å…¥ä¸´æ—¶è¡¨ã€‚å…·ä½“æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š<br>   a. å…ˆæ ¹æ®whereè¿‡æ»¤è¢«é©±åŠ¨è¡¨t2ï¼Œå¹¶å°†ç»“æœå­˜å…¥ä¸´æ—¶è¡¨tmp_tï¼›<br>   b. åœ¨ä¸´æ—¶è¡¨ä¸Šä¸ºjoinå­—æ®µbæ·»åŠ ç´¢å¼•ï¼›<br>   c. è®©é©±åŠ¨è¡¨t1è¿æ¥ä¸´æ—¶è¡¨tmp_tã€‚<br>ï¼ˆæ³¨æ„ï¼Œç”±äºæ­¥éª¤bä¸­éœ€è¦ä¸ºä¸´æ—¶è¡¨åˆ›å»ºç´¢å¼•ï¼Œæ‰€ä»¥æ­¤æ–¹æ¡ˆå½“ä¸”ä»…å½“tmp_tè§„æ¨¡è¿œå°äºt2æ—¶æ‰åˆ’ç®—ï¼ï¼‰<br><br><br>4ã€æ‰©å±•hash-join<br>å¯è§†ä¸ºBNLJè¿›é˜¶ï¼Œå°†join_bufferå˜æˆHashè¡¨ï¼Œå¤„ç†æµç¨‹å¦‚ä¸‹ï¼š<br><br>hash-join:<br>for r1 in t1<br>  add &lt;key:r1.a,value:r1&gt; into join_buffer<br>end<br>for r2.a in t2 <br>  locate r2.a in t1 with hash index &#47;* read from join_buffer *&#47;<br>  if r1.id&gt;=X and r2.id&gt;=Y<br>    add r1+r2 into result_set<br>end<br><br><br>åˆ†æï¼š<br>   a. é©±åŠ¨è¡¨åœ¨å†…ç¯ï¼Œä»¥é™ä½å†…å­˜å ç”¨ç‡ã€‚<br>   b. å¦‚æœt1çš„å°ºå¯¸å¤§äºjoin_bufferï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¸å¾—ä¸å¤šæ¬¡å…¨è¡¨æ‰«æt2äº†ã€‚å› ä¸ºè¿‡æ»¤æ¡ä»¶çš„é€»è¾‘è¿ç®—ç¬¦å·æ˜¯andï¼Œæ‰€ä»¥è¿˜æœ‰ä¼˜åŒ–çš„ä½™åœ°ï¼Œå¯å°†é©±åŠ¨è¡¨çš„è¿‡æ»¤æå‰ï¼Œæ¥é™ä½t1çš„å¤§å°ã€‚<br>for r1 in t1<br>  if r1.id&gt;=X<br>    add &lt;key:r1.a,value:r1&gt; into join_buffer<br>end<br>for r2.a in t2 <br>  locate r2.a in t1 with hash index &#47;* read from join_buffer *&#47;<br>  if r2.id&gt;=Y<br>    add r1+r2 into result_set<br>end<br>","like_count":25,"discussions":[{"author":{"id":3041125,"avatar":"https://static001.geekbang.org/account/avatar/00/2e/67/65/b5b06719.jpg","nickname":"jz","note":"","ucode":"D7ECCBC55DC197","race_medal":3,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590549,"discussion_content":"4ã€æ‰©å±•hash-joinä¸­ï¼Œkey ä¸º ç´¢å¼•aï¼Œé‚£åœ¨æ™®é€šç´¢å¼•åœºæ™¯ä¸‹ï¼Œå¤šæ¡æ•°æ®é‡å¤åŠ å…¥hashç»“æ„ä¼šå‘ç”Ÿè¦†ç›–ï¼Œè¿™æ ·ç»“æœä¸å°±ä¸å¯¹äº†å—ï¼ˆç»“æœé›†å˜å°‘äº†ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665853308,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":64978,"user_name":"asdf100","can_delete":false,"product_type":"c1","uid":1043738,"ip_address":"","ucode":"39D8D71453E575","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ed/1a/ce7f7d54.jpg","comment_is_top":false,"comment_ctime":1548990021,"is_pvip":false,"replies":[{"id":"23016","content":"ä¸éœ€è¦æ‰‹åŠ¨æ’åº<br><br>ä¸è¿‡5ä¸‡ä¸ªå€¼å¤ªå‡¶æ®‹äº†ï¼Œè¯­å¥å¤ªé•¿ä¸å¤ªå¥½<br><br>è¿™ç§å°±æ˜¯æ‰‹åŠ¨åˆ›å»ºå†…å­˜ä¸´æ—¶è¡¨ï¼Œå»ºä¸Šhashç´¢å¼•ï¼Œå¡«å…¥æ•°æ®ï¼Œç„¶åjoin","user_name":"ä½œè€…å›å¤","comment_id":64978,"uid":"1264162","ip_address":"","utype":1,"ctime":1548993437,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":8,"race_medal":0,"score":"100333237829","product_id":100020801,"comment_content":"æœ€è¿‘é‡åˆ°è¿™ä¸ªéœ€æ±‚ï¼Œiné‡Œé¢çš„å€¼ä¸ªæ•°æœ‰5ä¸‡å·¦å³ï¼Œå‡ºç°çš„æƒ…å†µå¾ˆå°‘ä½†å­˜åœ¨ï¼Œè¿™ç§æƒ…å†µæ€ä¹ˆå¤„ç†ã€‚ï¼Ÿæ‰‹åŠ¨åˆ›å»ºä¸´æ—¶è¡¨å†joinï¼Ÿ<br><br>å¦å¤–inå†…çš„å€¼ç”¨ä¸ç”¨æ‰‹åŠ¨æ’åºï¼Ÿ","like_count":23,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438259,"discussion_content":"ä¸éœ€è¦æ‰‹åŠ¨æ’åº\n\nä¸è¿‡5ä¸‡ä¸ªå€¼å¤ªå‡¶æ®‹äº†ï¼Œè¯­å¥å¤ªé•¿ä¸å¤ªå¥½\n\nè¿™ç§å°±æ˜¯æ‰‹åŠ¨åˆ›å»ºå†…å­˜ä¸´æ—¶è¡¨ï¼Œå»ºä¸Šhashç´¢å¼•ï¼Œå¡«å…¥æ•°æ®ï¼Œç„¶åjoin","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548993437,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1308729,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f8/39/4089c9b5.jpg","nickname":"èƒ–å­ç½—","note":"","ucode":"AF45AEED6064B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554831,"discussion_content":"è€ƒè™‘æŠŠiné‡Œçš„ä¸œè¥¿åˆ†æ‰¹æ‹†åˆ† ä»£ç ä¸Šåšæ”¹é€ æ¥æ”¯æŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646636221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181206,"avatar":"https://static001.geekbang.org/account/avatar/00/12/06/16/e85c1fa8.jpg","nickname":"æ»´ç­”ä¸¶æ»´","note":"","ucode":"2093C2948B4327","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":196978,"discussion_content":"åˆ†æ‰¹é‡æŸ¥ï¼Ÿå¯è¡Œå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583391128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1043738,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ed/1a/ce7f7d54.jpg","nickname":"asdf100","note":"","ucode":"39D8D71453E575","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181206,"avatar":"https://static001.geekbang.org/account/avatar/00/12/06/16/e85c1fa8.jpg","nickname":"æ»´ç­”ä¸¶æ»´","note":"","ucode":"2093C2948B4327","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":197724,"discussion_content":"è‚¯å®šä¸è¡Œçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583424482,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":196978,"ip_address":""},"score":197724,"extra":""},{"author":{"id":1335293,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKR3ibELhjgVicCNShZCBwvaDxibnzibggG4wUzVkS2mkDxUBZyIs87nDEdJ7PiahJBVoZcuhQ84RxAziag/132","nickname":"å‘¨æ²»æ…§","note":"","ucode":"7D56C4E66BEE17","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181206,"avatar":"https://static001.geekbang.org/account/avatar/00/12/06/16/e85c1fa8.jpg","nickname":"æ»´ç­”ä¸¶æ»´","note":"","ucode":"2093C2948B4327","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":200637,"discussion_content":"åˆ†æ‰¹æŸ¥è¯¢ä¸è¡Œ  åˆ†æ‰¹æŸ¥è¯¢limitæ—¶ä¹Ÿéœ€è¦æ‰«ææ»¡è¶³æ¡ä»¶çš„è¡Œäº†ååœ¨ç­›é€‰äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583705547,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":196978,"ip_address":""},"score":200637,"extra":""},{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181206,"avatar":"https://static001.geekbang.org/account/avatar/00/12/06/16/e85c1fa8.jpg","nickname":"æ»´ç­”ä¸¶æ»´","note":"","ucode":"2093C2948B4327","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588215,"discussion_content":"èµ°inå­—æ®µçš„ç´¢å¼•ï¼Œå¯¹inè¿›è¡Œæ‹†åˆ†ï¼›æ‹†åˆ†çš„æ—¶å€™æ„Ÿè§‰å¯ä»¥å…ˆæ’ä¸ªåºåœ¨splitï¼›","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1663593207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":196978,"ip_address":"å¹¿ä¸œ"},"score":588215,"extra":""}]},{"author":{"id":1043738,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ed/1a/ce7f7d54.jpg","nickname":"asdf100","note":"","ucode":"39D8D71453E575","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":41915,"discussion_content":"è¯­å¥å¤ªé•¿çš„æ„æ€å°±æ˜¯inå€¼å¤ªå¤š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572531360,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1672786,"avatar":"https://static001.geekbang.org/account/avatar/00/19/86/52/91c7d112.jpg","nickname":"Garen","note":"","ucode":"0608C88F83EF0C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":41727,"discussion_content":"æˆ‘ä¹Ÿç»å¸¸é‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µæ˜¯ä¸æ˜¯åªè¦ä¸è¶…è¿‡Mysqlè¯­å¥é•¿åº¦é™åˆ¶ï¼Œå°±æ²¡å¤ªå¤§çš„é—®é¢˜å•Šï¼Ÿä¸ç”¨æ’åºå€’æ˜¯èƒ½ç†è§£ï¼ŒinæŸ¥è¯¢æ—¶ä¸€ä¸ªä¸€ä¸ªå–å‡ºæ¥æŸ¥è¯¢çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572493997,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65156,"user_name":"HuaMax","can_delete":false,"product_type":"c1","uid":1118488,"ip_address":"","ucode":"2E78DE1AF098AF","user_header":"https://static001.geekbang.org/account/avatar/00/11/11/18/8cee35f9.jpg","comment_is_top":false,"comment_ctime":1549078955,"is_pvip":false,"replies":[{"id":"23190","content":"ğŸ‘ å¾ˆæ·±å…¥çš„æ€è€ƒå“ˆ<br>1. select * ï¼Œæ‰€ä»¥æ”¾æ•´è¡Œï¼›ä½ è¯´å¾—å¯¹ï¼Œselect * ä¸æ˜¯å¥½ä¹ æƒ¯ï¼›<br>2. ç¬¬ä¸€æ¬¡joinåå°±ç­›é€‰ï¼›ç¬¬äºŒæ¬¡joinå†ç­›é€‰ï¼›<br>æ–°æ˜¥å¿«ä¹~","user_name":"ä½œè€…å›å¤","comment_id":65156,"uid":"1264162","ip_address":"","utype":1,"ctime":1549271015,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"83153457579","product_id":100020801,"comment_content":"å‰æå‡è®¾ï¼št1.c&gt;=Xå¯ä»¥è®©t1æˆä¸ºå°è¡¨ã€‚åŒæ—¶æ‰“å¼€BKAå’ŒMRRã€‚<br>1ã€t1è¡¨åŠ ï¼ˆc,a)ç´¢å¼•ã€‚ç†ç”±ï¼šAã€t1.c&gt;=Xå¯ä»¥ä½¿ç”¨ç´¢å¼•ï¼›Bã€åŠ ä¸Šaçš„è”åˆç´¢å¼•ï¼Œjoin bufferé‡Œæ”¾å…¥çš„æ˜¯ç´¢å¼•ï¼ˆc,aï¼‰è€Œä¸æ˜¯å»ä¸»é”®è¡¨å–æ•´è¡Œï¼Œç”¨äºä¸è¡¨t2çš„t1.a = t2.açš„joinæŸ¥è¯¢ï¼Œä¸è¿‡è¿”å›SELECT * æœ€ç»ˆè¿˜æ˜¯éœ€è¦å›è¡¨ã€‚<br>2ã€t2è¡¨åŠ (a,b,c)ç´¢å¼•ã€‚ç†ç”±ï¼šAã€åŠ ä¸Šaé¿å…ä¸t1è¡¨joinæŸ¥è¯¢çš„BNLï¼›Bã€ç†ç”±åŒã€1-Bã€‘ï¼›Cã€åŠ ä¸Šcä¸ç”¨å›è¡¨åˆ¤æ–­t2.c&gt;=Yçš„ç­›é€‰æ¡ä»¶<br>3ã€t3è¡¨åŠ ï¼ˆb,cï¼‰ç´¢å¼•ã€‚ç†ç”±ï¼šAã€é¿å…ä¸t2è¡¨joinæŸ¥è¯¢çš„BNL;Cã€ç†ç”±åŒã€2-Cã€‘<br><br>é—®é¢˜ï¼š<br>1ã€ã€1-Bã€‘å’Œã€2-Bã€‘ç”±äºselect *è¦è¿”å›æ‰€æœ‰åˆ—æ•°æ®ï¼Œä¸æ•¢è‚¯å®šjoin bufferé‡Œæ˜¯å›è¡¨çš„æ•´è¡Œæ•°æ®è¿˜æ˜¯ç´¢å¼•ï¼ˆc,a)çš„æ•°æ®ï¼Œéœ€è¦è€å¸ˆè§£ç­”ä¸€ä¸‹ï¼›ä¸è¿‡å€¼å¾—è­¦æƒ•çš„æ˜¯ï¼Œè¿”å›çš„æ•°æ®åˆ—å¯¹sqlçš„æ‰§è¡Œç­–ç•¥æœ‰éå¸¸å¤§çš„å½±å“ã€‚<br>2ã€åœ¨æœ‰joinæŸ¥è¯¢æ—¶ï¼Œè¢«é©±åŠ¨è¡¨æ˜¯å…ˆåšjoinè¿æ¥æŸ¥è¯¢ï¼Œè¿˜æ˜¯å…ˆç­›é€‰æ•°æ®å†ä»ç­›é€‰åçš„ä¸´æ—¶è¡¨åšjoinè¿æ¥ï¼Ÿè¿™å°†å½±å“ä¸Šè¿°çš„ç†ç”±ã€2-Cã€‘å’Œã€3-Cã€‘<br><br>ä½¿ç”¨straight_joinå¼ºåˆ¶æŒ‡å®šé©±åŠ¨è¡¨ï¼Œæˆ‘ä¼šæ”¹å†™æˆè¿™æ ·:select * from t2 STRAIGHT_JOIN t1 on(t1.a=t2.a) STRAIGHT_JOIN t3 on (t2.b=t3.b)  where t1.c&gt;=X and t2.c&gt;=Y and t3.c&gt;=Z;<br>è€ƒè™‘å› ç´ åŒ…æ‹¬ï¼š<br>1ã€é©±åŠ¨è¡¨ä½¿ç”¨è¿‡æ»¤æ¡ä»¶ç­›é€‰åçš„æ•°æ®é‡ï¼Œä½¿å…¶æˆä¸ºå°è¡¨ï¼Œä¸Šé¢çš„æ”¹å†™ä¹Ÿæ˜¯åŸºäºt2æ˜¯å°è¡¨<br>2ã€å› ä¸ºt2æ˜¯è·Ÿt1,t3éƒ½æœ‰å…³è”æŸ¥è¯¢çš„ï¼Œè¿™æ ·çš„è¯æˆ‘çŒœæµ‹å¯¹t1,t3çš„æŸ¥è¯¢æ˜¯ä¸æ˜¯å¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œè€Œå¦‚æœä½¿ç”¨t1,t3ä½œä¸ºä¸»è¡¨çš„è¯ï¼Œæ˜¯å¦ä¼šå…ˆè·Ÿt2ç”Ÿæˆä¸­é—´è¡¨ï¼Œæ˜¯ä¸ªä¸²è¡Œçš„è¿‡ç¨‹ï¼Ÿ<br>3ã€éœ€è¦ç»™t1åŠ ï¼ˆa,c)ç´¢å¼•ï¼Œç»™t2åŠ ï¼ˆc,a,bï¼‰ç´¢å¼•ã€‚","like_count":19,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438339,"discussion_content":"ğŸ‘ å¾ˆæ·±å…¥çš„æ€è€ƒå“ˆ\n1. select * ï¼Œæ‰€ä»¥æ”¾æ•´è¡Œï¼›ä½ è¯´å¾—å¯¹ï¼Œselect * ä¸æ˜¯å¥½ä¹ æƒ¯ï¼›\n2. ç¬¬ä¸€æ¬¡joinåå°±ç­›é€‰ï¼›ç¬¬äºŒæ¬¡joinå†ç­›é€‰ï¼›\næ–°æ˜¥å¿«ä¹~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549271015,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243264,"user_name":"æ—è‚¯","can_delete":false,"product_type":"c1","uid":1008582,"ip_address":"","ucode":"D2C97220230DE5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/c6/d6ea3df3.jpg","comment_is_top":false,"comment_ctime":1598005194,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"66022514634","product_id":100020801,"comment_content":"å¯å–œçš„æ˜¯ï¼šMySQL8.0å·²ç»æ”¯æŒhash joinäº†","like_count":16},{"had_liked":false,"id":66065,"user_name":"WL","can_delete":false,"product_type":"c1","uid":1173771,"ip_address":"","ucode":"6277DCD776B87E","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/0b/1171ac71.jpg","comment_is_top":false,"comment_ctime":1549868406,"is_pvip":false,"replies":[{"id":"23405","content":"1. é€šè¿‡æ™®é€šç´¢å¼•ä¹Ÿä¼šï¼ŒInnoDBçš„è®¿é—®æ¨¡å¼éƒ½æ˜¯å…ˆå†…å­˜ï¼Œä¸åœ¨å†…å­˜ä¸­ï¼Œæ‰åˆ°ç£ç›˜æ‰¾ï¼›<br>2. æ˜¯ä»¥æ•°æ®é¡µçš„æ–¹å¼è¯»åˆ°å†…å­˜çš„ï¼Œç„¶ååœ¨ä»å†…å­˜çš„è¿™ä¸ªæ•°æ®é¡µï¼ˆé»˜è®¤16kï¼‰é‡Œé¢æ‰¾åˆ°æ•°æ®ã€‚","user_name":"ä½œè€…å›å¤","comment_id":66065,"uid":"1264162","ip_address":"","utype":1,"ctime":1549873836,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"65974377846","product_id":100020801,"comment_content":"è¯·æ•™è€å¸ˆä¸¤ä¸ªé—®é¢˜:<br>1. é€šè¿‡ä¸»é”®ç´¢å¼•æ‰¾åˆ°çš„æ•°æ®ä¼šä¼šä¸ä¼šå…ˆåœ¨å†…å­˜ä¸­æŸ¥è¯¢, å¦‚æœæ²¡æœ‰å†å»ç£ç›˜æŸ¥è¯¢?<br>2. ä¸ºä»€ä¹ˆåœ¨é€šè¿‡ä¸»é”®ç´¢å¼•æŸ¥è¯¢æ•°æ®æ—¶, ç¬¦åˆæ¡ä»¶çš„æ•°æ®ä»¥å•æ¡æ•°æ®çš„æ–¹å¼è¯»åˆ°å†…å­˜ä¸­è€Œä¸æ˜¯ä»¥ä¸€æ•´ä¸ªæ•°æ®é¡µçš„æ–¹å¼è¯»åˆ°å†…å­˜ä¸­? ","like_count":16,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438691,"discussion_content":"1. é€šè¿‡æ™®é€šç´¢å¼•ä¹Ÿä¼šï¼ŒInnoDBçš„è®¿é—®æ¨¡å¼éƒ½æ˜¯å…ˆå†…å­˜ï¼Œä¸åœ¨å†…å­˜ä¸­ï¼Œæ‰åˆ°ç£ç›˜æ‰¾ï¼›\n2. æ˜¯ä»¥æ•°æ®é¡µçš„æ–¹å¼è¯»åˆ°å†…å­˜çš„ï¼Œç„¶ååœ¨ä»å†…å­˜çš„è¿™ä¸ªæ•°æ®é¡µï¼ˆé»˜è®¤16kï¼‰é‡Œé¢æ‰¾åˆ°æ•°æ®ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1549873836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1341276,"avatar":"https://static001.geekbang.org/account/avatar/00/14/77/5c/8d53165e.jpg","nickname":"bingo","note":"","ucode":"DD96820EC8871D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":404812,"discussion_content":"ç£ç›˜å’Œå†…å­˜çš„äº¤æ¢å•ä½ä¸€å®šæ˜¯é¡µã€‚ä»¥å‰æ“ä½œç³»ç»Ÿæ˜¯ç”¨4kBä½œä¸ºä¸€é¡µï¼Œmysqlæ˜¯è‡ªå·±ç»´æŠ¤äº†ä¸€å¥—é€»è¾‘ï¼Œç”¨ 16KB ä½œä¸ºä¸€é¡µã€‚å³ä½¿æ¶‰åŠçš„æ•°æ®é‡å°äºä¸€é¡µä¹Ÿä¼šæŠŠä¸€æ•´é¡µå…¨éƒ¨è¯»å‡ºæ¥ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1634419453,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77926,"user_name":"æ¶›å“¥å“¥","can_delete":false,"product_type":"c1","uid":1361159,"ip_address":"","ucode":"329A1384E3AB5E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqJobg767PUeqrqQQ4B6YvMatj2SRyOicKZZ4gWTf30dMketiaj58Gc3RFTmckGxAXlL9ERSxGovq9g/132","comment_is_top":false,"comment_ctime":1553042814,"is_pvip":false,"replies":[{"id":"28906","content":"å›ºæ€ç¡¬ç›˜çš„é¡ºåºå†™è¿˜æ˜¯æ¯”éšæœºå†™å¿«çš„","user_name":"ä½œè€…å›å¤","comment_id":77926,"uid":"1264162","ip_address":"","utype":1,"ctime":1553415800,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"44502715774","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå¯¹äºç°åœ¨çš„å›ºæ€ç¡¬ç›˜ï¼Œè¿™æ ·ç±»ä¼¼é¡ºåºè¯»å†™çš„æ•°æ®åº“ä¼˜åŒ–ï¼Œä¸å°±ä¸èµ·ä½œç”¨äº†å•Šï¼Ÿ","like_count":11,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443899,"discussion_content":"å›ºæ€ç¡¬ç›˜çš„é¡ºåºå†™è¿˜æ˜¯æ¯”éšæœºå†™å¿«çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553415800,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65020,"user_name":"TKbook","can_delete":false,"product_type":"c1","uid":1073829,"ip_address":"","ucode":"F6E0E99CC79059","user_header":"https://static001.geekbang.org/account/avatar/00/10/62/a5/43aa0c27.jpg","comment_is_top":false,"comment_ctime":1549004425,"is_pvip":false,"replies":[{"id":"23041","content":"å¯¹çš„ï¼ŒğŸ‘ç»†è‡´<br><br>å·²ç»å‘èµ·å‹˜è¯¯ï¼Œè°¢è°¢ä½ å“¦ï¼Œæ–°å¹´å¿«ä¹","user_name":"ä½œè€…å›å¤","comment_id":65020,"uid":"1264162","ip_address":"","utype":1,"ctime":1549008528,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"40203710089","product_id":100020801,"comment_content":"BNL ç®—æ³•æ•ˆç‡ä½ï¼Œå»ºè®®ä½ éƒ½å°½é‡è½¬æˆ BKA ç®—æ³•ã€‚ä¼˜åŒ–çš„æ–¹å‘å°±æ˜¯ç»™é©±åŠ¨è¡¨çš„å…³è”å­—æ®µåŠ ä¸Šç´¢å¼•ï¼›<br>è€å¸ˆæœ€åæ€»ç»“çš„æ—¶å€™ï¼Œè¿™å¥è¯åé¢é‚£å¥ï¼Œåº”è¯¥æ˜¯ç»™è¢«é©±åŠ¨è¡¨çš„å…³è”å­—æ®µåŠ ä¸Šç´¢å¼•å§ã€‚","like_count":10,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438278,"discussion_content":"å¯¹çš„ï¼ŒğŸ‘ç»†è‡´\n\nå·²ç»å‘èµ·å‹˜è¯¯ï¼Œè°¢è°¢ä½ å“¦ï¼Œæ–°å¹´å¿«ä¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549008528,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":66851,"user_name":"æ†¶æµ·æ‹¾è²","can_delete":false,"product_type":"c1","uid":1054727,"ip_address":"","ucode":"99E883A8601DED","user_header":"https://static001.geekbang.org/account/avatar/00/10/18/07/9f5f5dd3.jpg","comment_is_top":false,"comment_ctime":1550029407,"is_pvip":false,"replies":[{"id":"23670","content":"å¦‚æœæ˜¯ééšæœºçš„ä¸»é”®ï¼Œç¡®å®æ²¡å¿…è¦äº†ğŸ˜…<br><br>ä¼˜åŒ–ç¬¬ä¸€æ­¥è¿˜æ˜¯åº”è¯¥æŠŠä¸»é”®å¤„ç†ä¸€ä¸‹<br>","user_name":"ä½œè€…å›å¤","comment_id":66851,"uid":"1264162","ip_address":"","utype":1,"ctime":1550047494,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":8,"race_medal":0,"score":"35909767775","product_id":100020801,"comment_content":"èŠ‚åå¼€å·¥å®œè¡¥è¯¾.<br><br>æŒ‰ç…§æ–‡ä¸­è¯´æ˜çš„MRRè®¾è®¡æ€è·¯, æ˜¯å¦å¯ä»¥åæ¨å‡º: è¢«é©±åŠ¨è¡¨ä½¿ç”¨éé€’å¢ä¸»é”®(æ¯”å¦‚UUIDä½œä¸ºä¸»é”®),å°±æ²¡æœ‰å¿…è¦å¼€å¯MRR?","like_count":8,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438945,"discussion_content":"å¦‚æœæ˜¯ééšæœºçš„ä¸»é”®ï¼Œç¡®å®æ²¡å¿…è¦äº†ğŸ˜…\n\nä¼˜åŒ–ç¬¬ä¸€æ­¥è¿˜æ˜¯åº”è¯¥æŠŠä¸»é”®å¤„ç†ä¸€ä¸‹\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550047494,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1928368,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLCKzC0IPq9HSaMiaySKyviaBftvz2EjgqKNCwia9C0xIfYnuE7qntQ6fQ9oL2sEyJGWu0Mmj7EbWicrg/132","nickname":"FL","note":"","ucode":"C82D077D6C2277","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282045,"discussion_content":"è¿™é‡Œæœ‰ç–‘é—®  è™½ç„¶æ˜¯éé€’å¢ä¸»é”® ä½†æ˜¯åœ¨ä¸»é”®ç´¢å¼•æ ‘ä¸Š ä¸æ˜¯è¿˜æ˜¯æŒ‰ç…§é€’å¢çš„å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591869355,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":6,"child_discussions":[{"author":{"id":1054727,"avatar":"https://static001.geekbang.org/account/avatar/00/10/18/07/9f5f5dd3.jpg","nickname":"æ†¶æµ·æ‹¾è²","note":"","ucode":"99E883A8601DED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1928368,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLCKzC0IPq9HSaMiaySKyviaBftvz2EjgqKNCwia9C0xIfYnuE7qntQ6fQ9oL2sEyJGWu0Mmj7EbWicrg/132","nickname":"FL","note":"","ucode":"C82D077D6C2277","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":282330,"discussion_content":"ä»æ•´é¢—ç´¢å¼•æ ‘æ¥çœ‹æ‰€æœ‰ä¸»é”®æ˜¯å¯ä»¥è®¤ä¸ºé€’å¢çš„æ²¡é”™,ä½†æ˜¯æŸæ¬¡æŸ¥è¯¢åˆ°çš„å¤šæ¡è®°å½•çš„ä¸»é”®å¹¶ä¸ä¸€å®šæŒ¨å¾—è¿‘,æœ‰å¯èƒ½åœ¨å¾ˆ&#34;è¿œ&#34;çš„ä½ç½®","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1591942314,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":282045,"ip_address":""},"score":282330,"extra":""},{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1054727,"avatar":"https://static001.geekbang.org/account/avatar/00/10/18/07/9f5f5dd3.jpg","nickname":"æ†¶æµ·æ‹¾è²","note":"","ucode":"99E883A8601DED","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329136,"discussion_content":"ä¸»é”®åªæœ‰ä¿è¯åœ¨æ¯æ¬¡æ’å…¥çš„æ—¶å€™éƒ½æ˜¯é€’å¢çš„æ‰å¯ä»¥ä½¿ç”¨mrrï¼Œæ˜¯ä¹ˆï¼Ÿæ™®é€šç´¢å¼•å› ä¸ºæ˜¯éšæœºæ’å…¥ï¼Œæ‰€ä»¥æ— æ³•ä½¿ç”¨mrrï¼Œæ¯•ç«Ÿæ•°æ®æ²¡æœ‰æŒ¨åœ¨ä¸€èµ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606316445,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":282330,"ip_address":""},"score":329136,"extra":""},{"author":{"id":1341276,"avatar":"https://static001.geekbang.org/account/avatar/00/14/77/5c/8d53165e.jpg","nickname":"bingo","note":"","ucode":"DD96820EC8871D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":404813,"discussion_content":"innodbç´¢å¼•åœ¨é€»è¾‘ä¸Šå’Œç‰©ç†ä¸Šéƒ½æ˜¯æœ‰åºçš„ï¼Œå’Œæ’å…¥æ–¹å¼æ— å…³çš„ã€‚æ— è®ºéšæœºæ’å…¥è¿˜æ˜¯é¡ºåºæ’å…¥ï¼Œåœ¨ç£ç›˜å±‚é¢éƒ½æ˜¯æŒ¨åœ¨ä¸€èµ·çš„ã€‚æ¯”å¦‚æ’å…¥ 1ï¼Œ5, 10 è¿™ä¸‰ä¸ªå€¼ï¼Œå¦‚æœæ’å…¥çš„é¡ºåºæ˜¯ä»€ä¹ˆï¼Œæœ€ç»ˆåœ¨ç£ç›˜é‡Œéƒ½æ˜¯ 1 --> 10 --> 5 æ’åºçš„ã€‚å¦‚æœå…ˆæ’ä¸¤å¤´çš„æ•°æ®ï¼Œå†æ’ä¸­é—´çš„æ•°æ®ï¼Œé‚£ä¹ˆç£ç›˜é¡µä¼šè‡ªåŠ¨åˆ†è£‚ï¼Œå¦‚æœåˆ é™¤äº†ä¸­é—´çš„å¾ˆå¤šæ•°æ®ï¼Œé‚£ä¹ˆç£ç›˜é¡µä¼šè‡ªåŠ¨åˆå¹¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634420117,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":329136,"ip_address":""},"score":404813,"extra":""}]}]},{"had_liked":false,"id":65024,"user_name":"poppy","can_delete":false,"product_type":"c1","uid":1182792,"ip_address":"","ucode":"2ED2BDF703D0D9","user_header":"https://static001.geekbang.org/account/avatar/00/12/0c/48/ba59d28d.jpg","comment_is_top":false,"comment_ctime":1549005870,"is_pvip":false,"replies":[{"id":"23077","content":"å—¯ è¿™ä¸ªé—®é¢˜å°±æ˜¯ç•™ç»™å¤§å®¶è‡ªå·±è®¾å®šæ¡ä»¶ç„¶ååˆ†æçš„ï¼Œåˆ†æå¾—ä¸é”™å“¦","user_name":"ä½œè€…å›å¤","comment_id":65024,"uid":"1264162","ip_address":"","utype":1,"ctime":1549039965,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"35908744238","product_id":100020801,"comment_content":"select * from t1 join t2 on(t1.a=t2.a) join t3 on (t2.b=t3.b) where t1.c&gt;=X and t2.c&gt;=Y and t3.c&gt;=Z;<br>è€å¸ˆï¼Œæˆ‘çš„ç†è§£æ˜¯çœŸæ­£åšjoinçš„ä¸‰å¼ è¡¨çš„å¤§å°å®é™…ä¸Šæ˜¯t1.c&gt;=Xã€t2.c&gt;=Yã€t3.c&gt;=Zå¯¹åº”æ»¡è¶³æ¡ä»¶çš„è¡Œæ•°ï¼Œä¸ºäº†æ–¹ä¾¿å¿«é€Ÿå®šä½åˆ°æ»¡è¶³æ¡ä»¶çš„æ•°æ®ï¼Œt1ã€t2å’Œt3çš„cå­—æ®µæœ€å¥½éƒ½å»ºç´¢å¼•ã€‚å¯¹äºjoinæ“ä½œï¼ŒæŒ‰é“ç†mysqlåº”è¯¥ä¼šä¼˜å…ˆé€‰æ‹©joinä¹‹åæ•°é‡æ¯”è¾ƒå°‘çš„ä¸¤å¼ è¡¨å…ˆæ¥è¿›è¡Œjoinæ“ä½œï¼Œä¾‹å¦‚æ»¡è¶³t1.a=t2.açš„è¡Œæ•°å°äºæ»¡è¶³t2.b=t3.bçš„è¡Œæ•°ï¼Œé‚£ä¹ˆå°±ä¼šä¼˜å…ˆå°†t1å’Œt2è¿›è¡Œjoinï¼Œé€‰æ‹©t1.c&gt;=Xã€t2.c&gt;=Yä¸­è¡Œæ•°å°‘çš„è¡¨ä½œä¸ºé©±åŠ¨è¡¨ï¼Œå¦å¤–ä¸€å¼ ä½œä¸ºè¢«é©±åŠ¨è¡¨ï¼Œåœ¨è¢«é©±åŠ¨è¡¨çš„açš„å­—æ®µä¸Šå»ºç«‹ç´¢å¼•ï¼Œè¿™æ ·å°±å®Œæˆäº†t1å’Œt2çš„joinæ“ä½œå¹¶æŠŠç»“æœæ”¾å…¥join_bufferå‡†å¤‡ä¸t3è¿›è¡Œjoinæ“ä½œï¼Œåˆ™åœ¨ä½œä¸ºè¢«é©±åŠ¨è¡¨çš„t3çš„bå­—æ®µä¸Šå»ºç«‹ç´¢å¼•ã€‚ä¸çŸ¥é“ä¸¾çš„è¿™ä¸ªä¾‹å­åˆ†æå¾—æ˜¯å¦æ­£ç¡®ï¼Œä¸»è¦æ˜¯è¿™é‡Œä¸çŸ¥é“t1ã€t2ã€t3ä¸‰å¼ è¡¨çš„æ•°æ®é‡ï¼Œä»¥åŠæ»¡è¶³t1.c&gt;=X ï¼Œt2.c&gt;=Y ï¼Œt3.c&gt;=Zçš„æ•°æ®é‡ï¼Œè¿˜æœ‰å„ä¸ªå­—æ®µçš„åŒºåˆ†åº¦å¦‚ä½•ï¼Œæ˜¯å¦é€‚åˆå»ºç«‹ç´¢å¼•ç­‰ã€‚","like_count":8,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438282,"discussion_content":"å—¯ è¿™ä¸ªé—®é¢˜å°±æ˜¯ç•™ç»™å¤§å®¶è‡ªå·±è®¾å®šæ¡ä»¶ç„¶ååˆ†æçš„ï¼Œåˆ†æå¾—ä¸é”™å“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549039965,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1227366,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ba/66/7d9f45e7.jpg","nickname":"å¤ªç©ºç‰›ä»”","note":"","ucode":"0205635C3854AF","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543699,"discussion_content":"å¦‚æœä¸¤å¼ è¡¨è¿æ¥å­—æ®µæœ‰ç´¢å¼• é‚£åªèƒ½åˆ©ç”¨åˆ°è¢«é©±åŠ¨è¡¨è¿æ¥å­—æ®µçš„ç´¢å¼• å› ä¸ºæ‹¿åˆ°é©±åŠ¨è¡¨çš„æ•°æ®ä¼šå»è¢«é©±åŠ¨è¡¨æ ¹æ®è¿æ¥å­—æ®µæŸ¥æ•°æ® ç„¶åå›è¡¨ æ ¹æ®ä¸»é”®ç´¢å¼•çš„è¡Œæ•°æ® å†åˆ¤æ–­æ¡ä»¶æ˜¯å¦æ»¡è¶³ è¿™ä¸ªæ—¶å€™å¦‚æœè¿˜è¦æŸ¥è¢«é©±åŠ¨è¡¨whereæ¡ä»¶å­—æ®µçš„ç´¢å¼• é‚£å°±è¿˜è¦å¤šä¸€æ¬¡å›è¡¨äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641274989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":64963,"user_name":"dzkk","can_delete":false,"product_type":"c1","uid":1301932,"ip_address":"","ucode":"A81EFDB1D43C0D","user_header":"https://static001.geekbang.org/account/avatar/00/13/dd/ac/f40bbd15.jpg","comment_is_top":false,"comment_ctime":1548986169,"is_pvip":false,"replies":[{"id":"23015","content":"ä½ äº†è§£å¾—æ¯”è¾ƒå…¨é¢å“ˆ<br><br>ä¸è¿‡æˆ‘æ€•åœ¨æ–‡ç« ä¸­å†™è¿™ä¹ˆå¤šæ¦‚å¿µï¼Œä¼šçœ‹å¾—æ™•ã€‚<br><br>å®é™…ä¸Šç°åœ¨ Simple Nested-Loop Join å·²ç»ä¸ä¼šç”¨äº†ï¼ˆå¤ªæ…¢ï¼‰ï¼Œæœ‰ä½¿ç”¨çš„å°±æ˜¯ Index Nested-Loop Join å’Œ BKAä¼˜åŒ–å“ˆã€‚<br><br>MariaDBåœ¨ä¼˜åŒ–å™¨ä¸Šåšäº†å¾ˆå¤šå·¥ä½œï¼Œä¹‹å‰çš„æ–‡ç« æœ¬æ¥ä¹Ÿæƒ³ä»‹ç»ï¼Œåæ¥å‘ç°å¾—å…ˆæŠŠå®˜æ–¹ç‰ˆæœ¬çš„è¯´æ˜ç™½ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥åœ¨è¯„è®ºåŒºæ‰©å±•è®¨è®ºã€‚<br><br>BNLH åœ¨MariaDB 5.3å°±å¼•å…¥äº†ï¼Œæµç¨‹è·Ÿæˆ‘ä»¬â€œæ‰©å±•-hash joinâ€è¿™æ®µç±»ä¼¼ï¼Œå¯¹äºç­‰å€¼joinçš„æ•ˆæœè¿˜æ˜¯å¾ˆå¥½çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":64963,"uid":"1264162","ip_address":"","utype":1,"ctime":1548990591,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"35908724537","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè®°å¾—æˆ‘ä¹‹å‰çœ‹mysqlçš„joinæ˜¯å’Œç‰ˆæœ¬æœ‰å…³ç³»çš„ï¼Œå¦å¤–NLJæ˜¯ä¸€ä¸ªç»Ÿç§°ï¼Œè¢«åˆ†ä¸ºäº†SNLJ(Simple Nested-Loop Joinï¼Œ5.5ç‰ˆæœ¬ä¹‹å‰é‡‡ç”¨çš„ï¼Œå½“è¢«é©±åŠ¨è¡¨ä¸Šæ²¡æœ‰ç´¢å¼•çš„æ—¶å€™ä½¿ç”¨ï¼Œè¯¥æ–¹æ³•æ¯”è¾ƒç²—æš´ï¼Œæ‰€ä»¥åæ¥é€šè¿‡BNLJè¿›è¡Œäº†ä¼˜åŒ–)ã€INLJ(Index Nested-Loop Joinï¼Œè¢«é©±åŠ¨è¡¨ä¸Šæœ‰ç´¢å¼•)ã€BNLJ(Block Nested-Loop Joinï¼Œè¢«é©±åŠ¨è¡¨ä¸Šæ²¡æœ‰ç´¢å¼•)ï¼Œå¦å¤–äº†è§£åˆ°mariadbæ˜¯æ”¯æŒäº†hash joinçš„Block Nested Loop Hash (BNLH) joinï¼Œæ²¡æœ‰ä½¿ç”¨è¿‡ï¼Œä¸çŸ¥é“æ•ˆæœæ€ä¹ˆæ ·ã€‚ä¸çŸ¥é“æˆ‘äº†è§£çš„ä¿¡æ¯å¯¹ä¸å¯¹ã€‚","like_count":9,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438253,"discussion_content":"ä½ äº†è§£å¾—æ¯”è¾ƒå…¨é¢å“ˆ\n\nä¸è¿‡æˆ‘æ€•åœ¨æ–‡ç« ä¸­å†™è¿™ä¹ˆå¤šæ¦‚å¿µï¼Œä¼šçœ‹å¾—æ™•ã€‚\n\nå®é™…ä¸Šç°åœ¨ Simple Nested-Loop Join å·²ç»ä¸ä¼šç”¨äº†ï¼ˆå¤ªæ…¢ï¼‰ï¼Œæœ‰ä½¿ç”¨çš„å°±æ˜¯ Index Nested-Loop Join å’Œ BKAä¼˜åŒ–å“ˆã€‚\n\nMariaDBåœ¨ä¼˜åŒ–å™¨ä¸Šåšäº†å¾ˆå¤šå·¥ä½œï¼Œä¹‹å‰çš„æ–‡ç« æœ¬æ¥ä¹Ÿæƒ³ä»‹ç»ï¼Œåæ¥å‘ç°å¾—å…ˆæŠŠå®˜æ–¹ç‰ˆæœ¬çš„è¯´æ˜ç™½ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥åœ¨è¯„è®ºåŒºæ‰©å±•è®¨è®ºã€‚\n\nBNLH åœ¨MariaDB 5.3å°±å¼•å…¥äº†ï¼Œæµç¨‹è·Ÿæˆ‘ä»¬â€œæ‰©å±•-hash joinâ€è¿™æ®µç±»ä¼¼ï¼Œå¯¹äºç­‰å€¼joinçš„æ•ˆæœè¿˜æ˜¯å¾ˆå¥½çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548990591,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65191,"user_name":"bluefantasy3","can_delete":false,"product_type":"c1","uid":1299930,"ip_address":"","ucode":"9D6FF2811F7465","user_header":"","comment_is_top":false,"comment_ctime":1549098333,"is_pvip":false,"replies":[{"id":"23125","content":"1. æ˜¯MySQL è‡ªå·±ç®¡ç†çš„<br>2. ä¸€èˆ¬åªæœ‰æ•°æ®æ–‡ä»¶æ˜¯o_directçš„ï¼Œredo log å’Œ binlog éƒ½æ˜¯æœ‰ç”¨åˆ°æ–‡ä»¶ç³»ç»Ÿçš„page cache, å› æ­¤å¤šå°‘æœ‰å½±å“çš„<br><br>å¥½é—®é¢˜ğŸ‘ğŸ¿ ","user_name":"ä½œè€…å›å¤","comment_id":65191,"uid":"1264162","ip_address":"","utype":1,"ctime":1549155915,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"31613869405","product_id":100020801,"comment_content":"è¯·æ•™è€å¸ˆä¸€ä¸ªé—®é¢˜ï¼šinnodbçš„Buffer Poolçš„å†…å­˜æ˜¯innodbè‡ªå·±ç®¡ç†è¿˜æ˜¯ä½¿ç”¨OSçš„page cache? æˆ‘ç†è§£åº”è¯¥æ˜¯innodbè‡ªå·±ç®¡ç†ã€‚æˆ‘åœ¨å¦ä¸€ä¸ªè¯¾ç¨‹é‡Œçœ‹åˆ°å¦‚æœé¢‘ç¹åœ°æŠŠOSçš„&#47;proc&#47;sys&#47;vm&#47;drop_caches æ”¹æˆ 1ä¼šå½±å“MySQLçš„æ€§èƒ½ï¼Œå¦‚æœbuffer poolæ˜¯MySQLè‡ªå·±ç®¡ç†ï¼Œåº”è¯¥ä¸å—è¿™ä¸ªå‚æ•°å½±å“å‘€ï¼Ÿè¯·è§£ç­”ã€‚","like_count":7,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438354,"discussion_content":"1. æ˜¯MySQL è‡ªå·±ç®¡ç†çš„\n2. ä¸€èˆ¬åªæœ‰æ•°æ®æ–‡ä»¶æ˜¯o_directçš„ï¼Œredo log å’Œ binlog éƒ½æ˜¯æœ‰ç”¨åˆ°æ–‡ä»¶ç³»ç»Ÿçš„page cache, å› æ­¤å¤šå°‘æœ‰å½±å“çš„\n\nå¥½é—®é¢˜ğŸ‘ğŸ¿ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549155915,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1302631,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e0/67/6db879e4.jpg","nickname":"phantom","note":"","ucode":"C4FCE4A04D32CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":37819,"discussion_content":"è¯·é—®è€å¸ˆï¼Œè‹¥binlogç”Ÿæˆè¿‡å¤§ï¼Œå¯¼è‡´å ç”¨cacheè¿‡é«˜ï¼Œä»è€Œå¯¼è‡´swapé«˜ï¼Œæœ‰ä»€ä¹ˆå¥½æ–¹æ³•å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571669622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65008,"user_name":"è¯»ä¹¦çœ‹æŠ¥","can_delete":false,"product_type":"c1","uid":1306147,"ip_address":"","ucode":"3B4717314B52A9","user_header":"https://static001.geekbang.org/account/avatar/00/13/ee/23/b92b0811.jpg","comment_is_top":false,"comment_ctime":1548999150,"is_pvip":false,"replies":[{"id":"23043","content":"è¿™æ­£å¸¸çš„ï¼Œä¸€ç§å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š <br>   Using where å°±æ˜¯é¡ºåºæ‰«ï¼Œä½†æ˜¯è¿™ä¸ªä¸Šè¦æ‰«å¾ˆä¹…æ‰èƒ½æ‰«åˆ°æ»¡è¶³æ¡ä»¶çš„20ä¸ªè®°å½•ï¼›<br>   è™½ç„¶æœ‰filesortï¼Œä½†æ˜¯å¦‚æœå‚ä¸æ’åºçš„è¡Œæ•°å°‘ï¼Œå¯èƒ½é€Ÿåº¦å°±æ›´å¿«ï¼Œè€Œä¸”limit æœ‰å †æ’åºä¼˜åŒ–å“¦","user_name":"ä½œè€…å›å¤","comment_id":65008,"uid":"1264162","ip_address":"","utype":1,"ctime":1549008745,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"31613770222","product_id":100020801,"comment_content":"order by cjsj desc limit 0,20 explain  Extraåªæ˜¯æ˜¾ç¤º Using where ï¼Œæ‰§è¡Œæ—¶é—´ 7ç§’é’Ÿ<br>order by cjsj desc limit 5000,20 explain  Extraåªæ˜¯æ˜¾ç¤º Using index condition; Using where; Using filesort,  æ‰§è¡Œæ—¶é—´ 0.1 ç§’<br>æœ‰äº›è®¸çš„å‡Œä¹±äº†@^^@","like_count":7,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438270,"discussion_content":"è¿™æ­£å¸¸çš„ï¼Œä¸€ç§å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š \n   Using where å°±æ˜¯é¡ºåºæ‰«ï¼Œä½†æ˜¯è¿™ä¸ªä¸Šè¦æ‰«å¾ˆä¹…æ‰èƒ½æ‰«åˆ°æ»¡è¶³æ¡ä»¶çš„20ä¸ªè®°å½•ï¼›\n   è™½ç„¶æœ‰filesortï¼Œä½†æ˜¯å¦‚æœå‚ä¸æ’åºçš„è¡Œæ•°å°‘ï¼Œå¯èƒ½é€Ÿåº¦å°±æ›´å¿«ï¼Œè€Œä¸”limit æœ‰å †æ’åºä¼˜åŒ–å“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549008745,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":263920,"user_name":"moonfox","can_delete":false,"product_type":"c1","uid":1526355,"ip_address":"","ucode":"902BFF40EFA9FA","user_header":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","comment_is_top":false,"comment_ctime":1606294383,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23081130863","product_id":100020801,"comment_content":"æ„Ÿè§‰æœ‰ä¸€ç‚¹æ²¡æœ‰è®²æ¸…æ¥šï¼Œå½“ç„¶ä¹Ÿå¯èƒ½æ˜¯æˆ‘ç†è§£çš„é—®é¢˜ã€‚MRRåœ¨ è¡¨ Joinçš„æ—¶å€™ï¼Œä¸»è¦èµ·åˆ°çš„åšç”¨å°±æ˜¯åŠ é€Ÿäº†è¢«é©±åŠ¨è¡¨çš„æ™®é€šç´¢å¼•Açš„å›è¡¨é€Ÿåº¦ï¼Œè€Œä¸æ˜¯åŠ é€Ÿæ™®é€šç´¢å¼•Açš„æŸ¥è¯¢é€Ÿåº¦ï¼Œå› ä¸ºæ™®é€šç´¢å¼•Açš„æ•°æ®æ˜¯éšæœºæ’å…¥çš„ï¼Œæ‰€ä»¥æ— æ³•ä½¿ç”¨MRRçš„ä¼˜åŠ¿ã€‚BKAç®—æ³•çš„ä¸»è¦ä½œç”¨å°±æ˜¯ä¸€æ¬¡æ€§çš„æŠŠé©±åŠ¨è¡¨ä¸­å‚ä¸æŸ¥è¯¢çš„æ•°æ®ä¼ ç»™è¢«é©±åŠ¨è¡¨ï¼Œä»¥ä¾¿è®©è¢«é©±åŠ¨è¡¨åœ¨ç´¢å¼•Aä¸Šå›è¡¨æ—¶ä½¿ç”¨MRRç®—æ³•ï¼Œå…¶å®å°±æ˜¯å¯¹MRRç®—æ³•çš„è¾…åŠ©ã€‚","like_count":6},{"had_liked":false,"id":66840,"user_name":"Mr.Strive.Z.H.L","can_delete":false,"product_type":"c1","uid":1030198,"ip_address":"","ucode":"6D97E159E2EECD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b8/36/542c96bf.jpg","comment_is_top":false,"comment_ctime":1550028109,"is_pvip":false,"replies":[{"id":"23988","content":"ä½ è¿™ä¸¤ä¸ªè¯­å¥æ˜¯ä¸€æ ·çš„ã€‚ã€‚æ˜¯ä¸æ˜¯ç¬¬äºŒä¸ªè¯­å¥å¤šäº†leftï¼Ÿ<br><br>left joinå› ä¸ºè¯­ä¹‰ä¸Šè¦æ±‚æ‰€æœ‰å·¦è¾¹è¡¨çš„æ•°æ®è¡Œéƒ½å¿…é¡»å­˜åœ¨ç»“æœé‡Œé¢ï¼Œæ‰€ä»¥æ‰§è¡Œæµç¨‹ä¸å¤ªä¸€æ ·ï¼Œæˆ‘åœ¨ç­”ç–‘æ–‡ç« ä¸­è¯´å“ˆ","user_name":"ä½œè€…å›å¤","comment_id":66840,"uid":"1264162","ip_address":"","utype":1,"ctime":1550297120,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"23024864589","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œä»Šå¤©åœ¨å›é¡¾è¿™ç¯‡æ–‡ç« åšæ€»ç»“çš„æ—¶å€™ï¼Œçªç„¶æœ‰ä¸€ä¸ªç–‘æƒ‘ï¼š<br><br>æˆ‘ä»¬å‡è®¾t2çš„bä¸Šé¢æœ‰ç´¢å¼•ï¼Œè¯¥è¯­å¥æ˜¯å·¦è¿æ¥<br><br>select * from t1  left join t2 on (t1.b=t2.b) where t2.b&gt;=1 and t2.b&lt;=2000;<br><br>å’Œ<br><br>select * from t1  left join t2 on (t1.b=t2.b) and t2.b&gt;=1 and t2.b&lt;=2000;<br><br>åˆ°åº•åœ¨å†…éƒ¨æ‰§è¡Œæµç¨‹ä¸Šåˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿï¼Ÿ<br>å› ä¸ºå®é™…å·¥ä½œä¸­å·¦è¿æ¥ç”¨å¾—æŒºå¤šçš„ã€‚<br>ï¼ˆè¿™ç¯‡æ–‡ç« éƒ½æ˜¯ç›´è¿ï¼Œæ‰€ä»¥ä½¿ç”¨onå’Œwhereæœ€åçš„ç»“æœéƒ½ä¸€æ ·ï¼Œä½†æ˜¯å·¦è¿æ¥å°±ä¸æ˜¯äº†ï¼‰<br>","like_count":5,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438939,"discussion_content":"ä½ è¿™ä¸¤ä¸ªè¯­å¥æ˜¯ä¸€æ ·çš„ã€‚ã€‚æ˜¯ä¸æ˜¯ç¬¬äºŒä¸ªè¯­å¥å¤šäº†leftï¼Ÿ\n\nleft joinå› ä¸ºè¯­ä¹‰ä¸Šè¦æ±‚æ‰€æœ‰å·¦è¾¹è¡¨çš„æ•°æ®è¡Œéƒ½å¿…é¡»å­˜åœ¨ç»“æœé‡Œé¢ï¼Œæ‰€ä»¥æ‰§è¡Œæµç¨‹ä¸å¤ªä¸€æ ·ï¼Œæˆ‘åœ¨ç­”ç–‘æ–‡ç« ä¸­è¯´å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550297120,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65043,"user_name":"åº“æ·˜æ·˜","can_delete":false,"product_type":"c1","uid":1310240,"ip_address":"","ucode":"90813B0C46E978","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqibSwKPg7hiapc49qoM4dibhM3fYANPjfltF2ibBZ3dHX2hibjg5EIIcziahrmjO5R2XrcRibvU39TQS7jg/132","comment_is_top":false,"comment_ctime":1549010556,"is_pvip":false,"replies":[{"id":"23076","content":"ğŸ‘<br><br>BKAæ˜¯ä»Index Nexted-Loop join ä¼˜åŒ–è€Œæ¥çš„ï¼Œå¹¶ä¸æ˜¯â€œt1å’Œt2joinå¾—ç»“æœé›†å†ä¸t3joinâ€ï¼Œè€Œæ˜¯ç›´æ¥åµŒå¥—å¾ªç¯æ‰§è¡Œä¸‹å»ã€‚<br><br>è¿™ä¸ªæ•ˆæœç›¸å½“ä¸é”™äº†ï¼ŒMRRï¼ŒBKAéƒ½ç”¨ä¸Š","user_name":"ä½œè€…å›å¤","comment_id":65043,"uid":"1264162","ip_address":"","utype":1,"ctime":1549039912,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"23023847036","product_id":100020801,"comment_content":"set optimizer_switch=&#39;mrr=on,mrr_cost_based=off,batched_key_access=on&#39;;<br>create index idx_c on t2(c);<br>create index idx_a_c on t1(a,c);<br>create index idx_b_c on t3(b,c);<br>mysql&gt; explain select * from t2 <br>    -&gt; straight_join t1 on(t1.a=t2.a)<br>    -&gt; straight_join t3 on(t2.b=t3.b)   <br>    -&gt; where t1.c&gt; 800 and t2.c&gt;=600 and t3.c&gt;=500;<br>+----+-------------+-------+------------+---------------------------------------<br>| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra +----------------------------------------<br>| 1 | SIMPLE | t2 | NULL | range | idx_c | idx_c | 5 | NULL | 401 | 100.00 | Using index condition; Using where; Using MRR |<br>| 1 | SIMPLE | t1 | NULL | ref | idx_a_c | idx_a_c | 5 | test.t2.a | 1 | 33.33 | Using index condition; Using join buffer (Batched Key Access) |<br>| 1 | SIMPLE | t3 | NULL | ref | idx_b_c | idx_b_c | 5 | test.t2.b | 1 | 33.33 | Using index condition; Using join buffer (Batched Key Access) |<br>+----+-------------+-------+------------+-----+---------------------------------------<br>3 rows in set, 1 warning (0.00 sec)<br>ä»¥è‡ªå·±ç†è§£å¦‚ä¸‹ï¼Œæœ‰é—®é¢˜è¯·è€å¸ˆèƒ½å¤ŸæŒ‡å‡º<br>1.æ ¹æ®æŸ¥è¯¢å› æ˜¯select * è‚¯å®šå›è¡¨çš„ï¼Œå…¶ä¸­åœ¨è¡¨t2åˆ›å»ºç´¢å¼•idx_c,ä¸ºäº†èƒ½å¤Ÿä½¿ç”¨ICP,MRRï¼Œå¦‚æœcå­—æ®µé‡å¤ç‡é«˜æˆ–å–å€¼è¡Œæ•°å¤šï¼Œå¯ä»¥è€ƒè™‘ä¸å»ºç´¢å¼•<br>2.å·²t2 ä½œä¸ºé©±åŠ¨è¡¨ï¼Œä¸€æ–¹é¢è€ƒè™‘å…¶ä»–ä¸¤è¡¨éƒ½æœ‰å…³è”,t2è¡¨æ”¾å…¥join bufferåå…³è”t1åï¼Œå†å…³è”t2 å¾—å‡ºç»“æœ å†å„å›t2,t3è¡¨å–å‡º å¾—åˆ°ç»“æœé›†ï¼ˆä¹‹å‰ç†è§£éƒ½æ˜¯t1å’Œt2joinå¾—ç»“æœé›†å†ä¸t3joinï¼Œæœ¬æ¬¡ç†è§£å¤ªç¡®å®šï¼‰<br>3.t2ã€t3è¡¨å»ºç«‹è”åˆæŸ¥è¯¢ç›®çš„èƒ½å¤Ÿä½¿ç”¨ICP","like_count":6,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438293,"discussion_content":"ğŸ‘\n\nBKAæ˜¯ä»Index Nexted-Loop join ä¼˜åŒ–è€Œæ¥çš„ï¼Œå¹¶ä¸æ˜¯â€œt1å’Œt2joinå¾—ç»“æœé›†å†ä¸t3joinâ€ï¼Œè€Œæ˜¯ç›´æ¥åµŒå¥—å¾ªç¯æ‰§è¡Œä¸‹å»ã€‚\n\nè¿™ä¸ªæ•ˆæœç›¸å½“ä¸é”™äº†ï¼ŒMRRï¼ŒBKAéƒ½ç”¨ä¸Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549039912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65041,"user_name":"è¯»ä¹¦çœ‹æŠ¥","can_delete":false,"product_type":"c1","uid":1306147,"ip_address":"","ucode":"3B4717314B52A9","user_header":"https://static001.geekbang.org/account/avatar/00/13/ee/23/b92b0811.jpg","comment_is_top":false,"comment_ctime":1549009844,"is_pvip":false,"replies":[{"id":"23075","content":"å—¯ï¼Œè¿™ä¸ªè·Ÿæˆ‘ä»¬ç¬¬åç¯‡é‚£ä¸ªä¾‹å­æŒºåƒçš„<br><br>æˆ‘ä»¬æŠŠlimit 1 æ”¹æˆlimit 100çš„æ—¶å€™ï¼ŒMySQLè®¤ä¸ºï¼Œè¦æ‰«æåˆ°â€œ100è¡Œé‚£ä¹ˆå¤šâ€ï¼Œ<br>ä½ è¿™é‡Œæ˜¯limit 5000ï¼Œ200ï¼Œ è¿™ä¸ª5000ä¼šè®©ä¼˜åŒ–å™¨è®¤ä¸ºï¼Œé€‰txsjä¼šè¦æ‰«â€œå¾ˆå¤šè¡Œï¼Œå¯èƒ½å¾ˆä¹…â€<br><br>è¿™ä¸ªç¡®å®æ˜¯ä¼˜åŒ–å™¨è¿˜ä¸å¤Ÿå®Œå–„çš„åœ°æ–¹ï¼Œæœ‰æ—¶å€™ä¸å¾—ä¸ç”¨force index~","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1549039764,"ip_address":"","comment_id":65041,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23023846324","product_id":100020801,"comment_content":"åˆšåˆšå‡Œä¹±äº†çš„é‚£ä¸ªé—®é¢˜ï¼Œç»explainéªŒè¯ï¼Œexplain SELECT a.* FROM sys_xxtx a JOIN baq_ryxx r ON a.ryid = r.ID WHERE a.dwbh = &#39;7E0A13A14101D0A8E0430A0F23BCD0A8&#39; ORDER BY txsj DESC LIMIT 0,20;<br>ä½¿ç”¨çš„ç´¢å¼•æ˜¯txsj ï¼›<br>explain SELECT a.* FROM sys_xxtx a JOIN baq_ryxx r ON a.ryid = r.ID WHERE a.dwbh = &#39;7E0A13A14101D0A8E0430A0F23BCD0A8&#39; ORDER BY txsj DESC LIMIT 5000,20;ä½¿ç”¨çš„ç´¢å¼•æ˜¯dwbh ï¼›<br>ç„¶åå›å¿†èµ·äº†ç¬¬10å¼ ï¼šMySQLä¸ºä»€ä¹ˆæœ‰æ—¶å€™ä¼šé€‰é”™ç´¢å¼•ï¼Ÿ<br>ä½†æ˜¯ä»æ‰«æè¡Œæ•°ã€æ˜¯å¦ä½¿ç”¨æ’åºç­‰æ¥çœ‹åœ¨ LIMIT 5000,20æ—¶å€™ä¹Ÿåº”è¯¥ä¼˜é€‰txsj ?å¯æ˜¯è¿™ä¸ªæ—¶å€™é€‰æ‹©çš„ç´¢å¼•æ˜¯dwbh, æŸ¥è¯¢æ—¶é—´ä¹Ÿå¤§å¤§ç¼©çŸ­","like_count":5,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438291,"discussion_content":"å—¯ï¼Œè¿™ä¸ªè·Ÿæˆ‘ä»¬ç¬¬åç¯‡é‚£ä¸ªä¾‹å­æŒºåƒçš„\n\næˆ‘ä»¬æŠŠlimit 1 æ”¹æˆlimit 100çš„æ—¶å€™ï¼ŒMySQLè®¤ä¸ºï¼Œè¦æ‰«æåˆ°â€œ100è¡Œé‚£ä¹ˆå¤šâ€ï¼Œ\nä½ è¿™é‡Œæ˜¯limit 5000ï¼Œ200ï¼Œ è¿™ä¸ª5000ä¼šè®©ä¼˜åŒ–å™¨è®¤ä¸ºï¼Œé€‰txsjä¼šè¦æ‰«â€œå¾ˆå¤šè¡Œï¼Œå¯èƒ½å¾ˆä¹…â€\n\nè¿™ä¸ªç¡®å®æ˜¯ä¼˜åŒ–å™¨è¿˜ä¸å¤Ÿå®Œå–„çš„åœ°æ–¹ï¼Œæœ‰æ—¶å€™ä¸å¾—ä¸ç”¨force index~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549039764,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2086624,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/d6/e0/3ccaaa7b.jpg","nickname":"é¢†å­","note":"","ucode":"64AC4E6AB74E68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295392,"discussion_content":"å»ºä¸€ä¸ª(dwbh,txsj)çš„è”åˆç´¢å¼•ä¸æ›´å¥½å—ï¼Œæ—¢èƒ½èµ°ç´¢å¼•è¿‡æ»¤ï¼Œåˆèƒ½é¿å…æ’åº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596181301,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":64988,"user_name":"éƒ­æ±Ÿä¼Ÿ","can_delete":false,"product_type":"c1","uid":1313994,"ip_address":"","ucode":"613D638619B5A2","user_header":"https://static001.geekbang.org/account/avatar/00/14/0c/ca/6173350b.jpg","comment_is_top":false,"comment_ctime":1548992341,"is_pvip":false,"replies":[{"id":"23023","content":"ğŸ‘éªŒè¯çš„ç»“æœæœ€æœ‰è¯´æœåŠ›","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1549003142,"ip_address":"","comment_id":64988,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23023828821","product_id":100020801,"comment_content":"select * from t1 join t2 on(t1.a=t2.a) join t3 on (t2.b=t3.b) where t1.c&gt;=X and t2.c&gt;=Y and t3.c&gt;=Z;<br>è¿™ä¸ªè¯­å¥å»ºç´¢å¼•éœ€è¦è€ƒè™‘ä¸‰ä¸ªè¡¨çš„æ•°æ®é‡å’Œç›¸å…³å­—æ®µçš„æ•°æ®åˆ†å¸ƒã€é€‰æ‹©ç‡ã€æ¯ä¸ªæ¡ä»¶è¿”å›è¡Œæ•°å æ¯”ç­‰<br>æˆ‘çš„æµ‹è¯•åœºæ™¯æ˜¯ï¼š<br>t1 1000è¡Œæ•°æ®  t2 100wè¡Œæ•°æ®  t3 100wè¡Œï¼Œå…³è”å­—æ®µæ²¡æœ‰é‡å¤å€¼ï¼Œæ¡ä»¶æŸ¥è¯¢è¿”å›è¡Œæ•°å æ¯”å¾ˆå°‘ï¼Œæ­¤æ—¶ç´¢å¼•ä¸ºï¼š <br>alter table t1 add key t1_c(c);<br>alter table t2 add key t2_ac(a,c);<br>alter table t3 add key t3_bc(b,c);<br>æµ‹è¯•sqlæ— ç´¢å¼•æ˜¯æ‰§è¡Œéœ€è¦2åˆ†é’Ÿå¤šï¼ŒåŠ äº†ç´¢å¼•åéœ€è¦0.01ç§’ï¼ŒåŠ ç´¢å¼•åæ‰§è¡Œè®¡åˆ’ä¸ºï¼š<br>mysql&gt; explain select * from t1 join t2 on(t1.a=t2.a) join t3 on (t2.b=t3.b) where t1.c&gt;=100 and t2.c&gt;=10 and t3.c&gt;=90;<br>+----+-------------+-------+------------+------+---------------+-------+---------+---------------+------+----------+------------------------------------+<br>| id | select_type | table | partitions | type | possible_keys | key   | key_len | ref           | rows | filtered | Extra                              |<br>+----+-------------+-------+------------+------+---------------+-------+---------+---------------+------+----------+------------------------------------+<br>|  1 | SIMPLE      | t1    | NULL       | ALL  | t1_a          | NULL  | NULL    | NULL          | 1000 |    90.10 | Using where                        |<br>|  1 | SIMPLE      | t2    | NULL       | ref  | t2_ac         | t2_ac | 5       | sysbench.t1.a |    1 |    33.33 | Using index condition; Using where |<br>|  1 | SIMPLE      | t3    | NULL       | ref  | t3_bc         | t3_bc | 5       | sysbench.t2.b |    1 |    33.33 | Using index condition              |<br>+----+-------------+-------+------------+------+---------------+-------+---------+---------------+------+----------+------------------------------------+<br>å¦å¤–ï¼Œselect * å¦‚æœæ”¹æˆå…·ä½“å­—æ®µçš„è¯è€ƒè™‘è¦†ç›–ç´¢å¼• å¯èƒ½éœ€è¦å»ºç«‹ä¸åŒçš„ç´¢å¼•ã€‚<br>","like_count":5,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438262,"discussion_content":"ğŸ‘éªŒè¯çš„ç»“æœæœ€æœ‰è¯´æœåŠ›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549003142,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111974,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f7/a6/c863c65b.jpg","nickname":"è¥¿ç“œåˆ€","note":"","ucode":"3978348547499D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":98285,"discussion_content":"optimizer_switch=&#34;mrr_cost_based=off&#34;   è¿™ä¸ªæˆ‘æŒ‰ç…§ä½ çš„æ–¹å¼æµ‹è¯•äº†ä¸‹ï¼Œåè€Œé€Ÿåº¦è¦æ…¢1å€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577152809,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":185198,"user_name":"Direction","can_delete":false,"product_type":"c1","uid":1731977,"ip_address":"","ucode":"298D5109EA28EE","user_header":"https://static001.geekbang.org/account/avatar/00/1a/6d/89/14031273.jpg","comment_is_top":false,"comment_ctime":1583511454,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"14468413342","product_id":100020801,"comment_content":"è€å¸ˆï¼Œé—®ä¸‹join on å’Œ whereçš„ä¼˜å…ˆçº§å“ªä¸ªé«˜å‘¢ï¼Ÿæ˜¯å…ˆæ‰§è¡ŒONé‡Œé¢çš„æ¯”è¾ƒï¼Œç„¶åå†è¿‡æ»¤whereæ¡ä»¶é‡Œé¢çš„æ•°æ®å—ï¼Ÿä½†æ˜¯æˆ‘åšäº†éªŒè¯æ˜¾ç¤ºçš„æ‰«æè¡Œæ•°ä¸ä¸€æ ·ã€‚<br><br>ä¾‹å¦‚ï¼šexplain select * from t1 straight_join t2 on (t1.b=t2.b) where t2.id&lt;=50;<br><br>1\tSIMPLE\tt1\t\tALL\t\t\t\t\t100\t100.00\t<br>1\tSIMPLE\tt2\t\trange\tPRIMARY\tPRIMARY\t4\t\t50\t10.00\tUsing where; Using join buffer (Block Nested Loop)<br>å®é™…ä¸Št2åªæ‰«æäº†50è¡Œï¼Œè¿™ä¸ªå¾ˆä¸ç†è§£ï¼Œç›¼å›å¤å“¦ã€‚","like_count":4,"discussions":[{"author":{"id":1435733,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e8/55/92f82281.jpg","nickname":"MClink","note":"","ucode":"F479190923355C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300898,"discussion_content":"å…ˆæ‰§è¡Œonè·å–ç»“æœé›†ï¼Œå†è¿›è¡Œæ¡ä»¶è¿‡æ»¤","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598314762,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1484273,"avatar":"https://static001.geekbang.org/account/avatar/00/16/a5/f1/8e3ce0e4.jpg","nickname":"ğŸ‹ğŸ¥¬ğŸŸ","note":"","ucode":"4191D6E6CB6D3B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296368,"discussion_content":"æˆ‘ç†è§£ left join æ˜¯ on å…ˆæ‰§è¡Œï¼Œwhere åæ‰§è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596523029,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1901867,"avatar":"","nickname":"é’çŸ³è·¯","note":"","ucode":"9012B9ED314FED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":200058,"discussion_content":"æˆ‘ä¹Ÿæœ‰åŒæ ·çš„ç–‘é—®ï¼Œå¸Œæœ›è€å¸ˆå›å¤ä¸‹\non å’Œ whereçš„ç”Ÿæ•ˆæ—¶æœºé—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583653334,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1901867,"avatar":"","nickname":"é’çŸ³è·¯","note":"","ucode":"9012B9ED314FED","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588219,"discussion_content":"å¤–éƒ¨æŸ¥è¯¢éœ€è¦å…ˆonå†whereï¼›å†…éƒ¨æŸ¥è¯¢çš„onä¼šæ”¹å†™åˆ°whereé‡Œé¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663593797,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":200058,"ip_address":"å¹¿ä¸œ"},"score":588219,"extra":""}]}]},{"had_liked":false,"id":176800,"user_name":"ä¸‡æ˜ä¸","can_delete":false,"product_type":"c1","uid":1649414,"ip_address":"","ucode":"A7BA8672E68F26","user_header":"","comment_is_top":false,"comment_ctime":1581170054,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14466071942","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå¯¹äºselect * from t1 join t2 on (t1.b=t2.b) where t2.b&gt;=1 and t2.b&lt;=2000;<br>å¦‚æœæ”¹å†™æˆselect * from t2 STRAIGHT_JOIN t1 on (t1.b=t2.b) where t2.b&gt;=1 and t2.b&lt;=2000;<br>åœ¨åšå†…å­˜æ¯”å¯¹æ—¶å°±æ˜¯2000*1000ï¼Œè¿œè¿œå°äº10äº¿ï¼Œæ€§èƒ½èƒ½å¤Ÿæå‡å¾ˆå¤šï¼Œä¹Ÿä¸éœ€è¦å»ºä¸´æ—¶è¡¨ã€‚Mysqlå®ç°ä¸Šä¸ºä»€ä¹ˆä¸å…ˆåšwhereè¿‡æ»¤å†æ¯”å¯¹æ•°æ®ï¼Ÿ","like_count":3},{"had_liked":false,"id":81793,"user_name":"~ç²ç²ç²~å­~å“¥~","can_delete":false,"product_type":"c1","uid":1302741,"ip_address":"","ucode":"89379F3A0427EA","user_header":"https://static001.geekbang.org/account/avatar/00/13/e0/d5/7485e51f.jpg","comment_is_top":false,"comment_ctime":1554037202,"is_pvip":false,"replies":[{"id":"30159","content":"ä¸æ˜¯ï¼Œè¦çœ‹joinç®—æ³•ã€‚<br><br>æ¯”å¦‚å¦‚æœéƒ½æ˜¯BKAç®—æ³•ï¼Œé‚£å°±æ˜¯1å…³è”2å†é©¬ä¸Šå…³è”3ï¼Œå¾—åˆ°ç»“æœï¼Œè¿™æ ·å¾ªç¯","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1554616591,"ip_address":"","comment_id":81793,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14438939090","product_id":100020801,"comment_content":"è€å¸ˆå¥½ã€‚<br>è¿™èŠ‚è¯¾è¯„è®ºæˆ‘çœ‹å¥½å¤šäººéƒ½é—®ä¸‰è¡¨è¿æ¥æ—¶çš„æ­¥éª¤ï¼Œæ‚¨æŒ‡å‡ºå’Œç¬¬ä¸‰ä¸ªè¡¨å…³è”ä¸æ˜¯å‰ä¸¤ä¸ªè¡¨çš„ç»“æœé›†å’Œç¬¬ä¸‰å¼ è¡¨å…³è”ã€‚<br>é‚£æ˜¯ç¬¬ä¸€å¼ è¡¨å’Œç¬¬äºŒå¼ è¡¨å…³è”ï¼Œç„¶åç¬¬ä¸€å¼ è¡¨åœ¨å’Œç¬¬ä¸‰å¼ è¡¨å…³è”ï¼Œæœ€åè¿™ä¸¤ä¸ªç»“æœé›†åœ¨å…³è”ï¼Ÿè¯·çº æ­£ã€‚","like_count":4,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445347,"discussion_content":"ä¸æ˜¯ï¼Œè¦çœ‹joinç®—æ³•ã€‚\n\næ¯”å¦‚å¦‚æœéƒ½æ˜¯BKAç®—æ³•ï¼Œé‚£å°±æ˜¯1å…³è”2å†é©¬ä¸Šå…³è”3ï¼Œå¾—åˆ°ç»“æœï¼Œè¿™æ ·å¾ªç¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554616591,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":66786,"user_name":"å¤©ç‹","can_delete":false,"product_type":"c1","uid":1239337,"ip_address":"","ucode":"C074B2F9A5F007","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/29/629d9bb0.jpg","comment_is_top":false,"comment_ctime":1550020769,"is_pvip":false,"replies":[{"id":"23676","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1550049106,"ip_address":"","comment_id":66786,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14434922657","product_id":100020801,"comment_content":"BNLç®—æ³•ä¼˜åŒ–ï¼ŒBNLç®—æ³•ï¼Œå¦‚æœè¯»å–çš„æ˜¯å†·è¡¨ï¼Œè€Œä¸”é‡æ¯”è¾ƒå¤§ï¼Œå¾ªç¯è¯»å–ï¼Œç¬¬ä¸€æ¬¡æ•°æ®ä¼šè¿›å…¥oldåŒºåŸŸï¼Œå¦‚æœä¸€ç§’ä¹‹åæ²¡æœ‰è®¿é—®ï¼Œä¸ä¼šç§»åˆ°LRUå¤´éƒ¨ï¼Œå¤§è¡¨joinå¯¹ioå½±å“æŸ¥è¯¢å®Œå°±ç»“æŸäº†ï¼Œä½†æ˜¯buffer pooléœ€è¦å¤§é‡çš„æŸ¥è¯¢æŠŠå†·æ•°æ®å†²æ‰ã€‚BNLç®—æ³•æœ‰3ä¸ªé—®é¢˜ï¼Œ1 å¤šæ¬¡æ‰«æè¢«é©±åŠ¨è¡¨ï¼Œå ç”¨ç£ç›˜io 2 åˆ¤æ–­joinä¼šè€—è´¹å¤§é‡çš„cpuèµ„æº 3 ä¼šçƒ­æ•°æ®æ·˜æ±°ï¼Œå½±å“buffer poolçš„å‘½ä¸­ç‡","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438910,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550049106,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65210,"user_name":"Ryoma","can_delete":false,"product_type":"c1","uid":1130590,"ip_address":"","ucode":"7F692369239692","user_header":"https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg","comment_is_top":false,"comment_ctime":1549110083,"is_pvip":true,"replies":[{"id":"23126","content":"ä½ è¯´å¾—å¯¹ï¼Œå¤šè°¢<br><br>å‘èµ·å‹˜è¯¯äº†<br><br>æ–°å¹´å¿«ä¹","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1549156404,"ip_address":"","comment_id":65210,"utype":1}],"discussion_count":1,"race_medal":2,"score":"14434011971","product_id":100020801,"comment_content":"read_rnd_buffer_length å‚æ•°åº”è¯¥æ˜¯ read_rnd_buffer_sizeï¼Œè§æ–‡æ¡£ï¼šhttps:&#47;&#47;dev.mysql.com&#47;doc&#47;refman&#47;8.0&#47;en&#47;server-system-variables.html#sysvar_read_rnd_buffer_size","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438360,"discussion_content":"ä½ è¯´å¾—å¯¹ï¼Œå¤šè°¢\n\nå‘èµ·å‹˜è¯¯äº†\n\næ–°å¹´å¿«ä¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549156404,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65182,"user_name":"ä¿¡ä¿¡","can_delete":false,"product_type":"c1","uid":1303865,"ip_address":"","ucode":"8DF0EC045579FD","user_header":"https://static001.geekbang.org/account/avatar/00/13/e5/39/951f89c8.jpg","comment_is_top":false,"comment_ctime":1549091569,"is_pvip":false,"replies":[{"id":"23090","content":"1. å†™straight_joinèƒ½ç¡®å®šé¡ºåºï¼Œä¹Ÿå¯ä»¥çš„ï¼Œè¿™é‡Œå†™join ä¹Ÿokçš„<br><br>2. æ˜¯è¿›è¡Œäº†1000æ¬¡æ ‘æœç´¢<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1549097857,"ip_address":"","comment_id":65182,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14433993457","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œæœ‰ä¸¤ç‚¹ç–‘é—®è¯·è€å¸ˆè§£æƒ‘ï¼š<br>1ã€å›¾8ä¸Šé¢æåˆ°çš„å…³äºä¸´æ—¶è¡¨çš„ç¬¬ä¸‰å¥æ˜¯ä¸æ˜¯è¿˜æ˜¯ä½¿ç”¨straight_joinå¥½ä¸€äº›ï¼Ÿä¸ç„¶æœ‰å¯èƒ½temp_tè¢«é€‰ä¸ºé©±åŠ¨è¡¨ï¼Ÿ<br>2ã€å›¾8ä¸‹é¢æåˆ°joinè¿‡ç¨‹ä¸­åšäº†1000æ¬¡å¸¦ç´¢å¼•çš„æŸ¥è¯¢ï¼Œè¿™é‡Œçš„1000ä¹Ÿæ˜¯åœ¨æ‰“å¼€mrrçš„æƒ…å†µä¸‹çš„å—ï¼Ÿæ˜¯è¿›è¡Œäº†1000æ¬¡æ ‘æœç´¢ï¼Œè¿˜æ˜¯æ‰¾åˆ°ç¬¬ä¸€ä¸ªåï¼Œä¾æ¬¡æŒ¨ç€è¯»å‘¢ï¼Ÿ<br>","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438351,"discussion_content":"1. å†™straight_joinèƒ½ç¡®å®šé¡ºåºï¼Œä¹Ÿå¯ä»¥çš„ï¼Œè¿™é‡Œå†™join ä¹Ÿokçš„\n\n2. æ˜¯è¿›è¡Œäº†1000æ¬¡æ ‘æœç´¢\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549097857,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":276119,"user_name":"hzy","can_delete":false,"product_type":"c1","uid":2265274,"ip_address":"","ucode":"B5486275D148E1","user_header":"https://static001.geekbang.org/account/avatar/00/22/90/ba/fb490062.jpg","comment_is_top":false,"comment_ctime":1611799518,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10201734110","product_id":100020801,"comment_content":"8å·²ç»æ”¯æŒhash joinäº†","like_count":2},{"had_liked":false,"id":114732,"user_name":"Huan","can_delete":false,"product_type":"c1","uid":1443773,"ip_address":"","ucode":"24F1657DDEC117","user_header":"https://static001.geekbang.org/account/avatar/00/16/07/bd/00a3f6aa.jpg","comment_is_top":false,"comment_ctime":1563372341,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10153306933","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³è¯·æ•™ä¸‹ï¼Œåœ¨inner join  onåé¢åŠ è¿‡æ»¤æ¡ä»¶ï¼Œä¸å‘€whereåé¢åŠ è¿‡æ»¤æ¡ä»¶ï¼Œæ€§èƒ½æ˜¯ä¸€æ ·çš„å—ï¼Ÿ","like_count":2},{"had_liked":false,"id":84274,"user_name":"å”¯å¥¹å‘½","can_delete":false,"product_type":"c1","uid":1240398,"ip_address":"","ucode":"8F687E8D306840","user_header":"https://static001.geekbang.org/account/avatar/00/12/ed/4e/ef406442.jpg","comment_is_top":false,"comment_ctime":1554817590,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"10144752182","product_id":100020801,"comment_content":"å­˜å‚¨è¿‡ç¨‹ æ’å…¥100ä¸‡<br>Query OK, 1 row affected (1 hour 53 min 57.59 sec)<br>è¿™ä¹ˆææ€–ğŸ˜±ï¼","like_count":2,"discussions":[{"author":{"id":1287774,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a6/5e/b05254a6.jpg","nickname":"Mhy","note":"","ucode":"DE19BCAD1F856E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6129,"discussion_content":"set sync_bin=0;set innodb_flush_log_at_trx_commit=0;è€å¸ˆä¹‹å‰æ•™è¿‡","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1566718354,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1093819,"avatar":"https://static001.geekbang.org/account/avatar/00/10/b0/bb/fc698888.jpg","nickname":"leozhang","note":"","ucode":"DAC9015821DAF1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8783,"discussion_content":" è¿™ä¸ªå’Œäº‹åŠ¡æœ‰å…³ï¼Œåœ¨å¼€å§‹å¾ªç¯æ—¶å€™ å¼€å¯äº‹åŠ¡ï¼Œæœ€åç»“æŸå¾ªç¯å æäº¤äº‹åŠ¡ï¼Œéå¸¸å¿«å‡ åˆ†é’Ÿä¸€ç™¾ä¸‡æ•°æ®","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1568047031,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65212,"user_name":"Geek_02538c","can_delete":false,"product_type":"c1","uid":1336903,"ip_address":"","ucode":"26E208B5AB7D7F","user_header":"","comment_is_top":false,"comment_ctime":1549113144,"is_pvip":true,"replies":[{"id":"23127","content":"ä½ è¯´å¾—å¯¹^_^  ç¬¬37ç¯‡å°±æ˜¯ï¼Œæ–°å¹´å¿«ä¹","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1549156451,"ip_address":"","comment_id":65212,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10139047736","product_id":100020801,"comment_content":"è¿‡å¹´äº†ï¼Œè¿˜æœ‰æ–°æ–‡ç« ï¼Œç»™ä¸ªèµã€‚ å¦ï¼Œwhere  å’Œ order  ä¸ç´¢å¼•çš„å…³ç³»ï¼Œéƒ½è®²è¿‡äº†ï¼Œgroup by æ˜¯å¦ä¹Ÿæä¸ªç¯‡ç« è¯´ä¸€ä¸‹ã€‚","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438361,"discussion_content":"ä½ è¯´å¾—å¯¹^_^  ç¬¬37ç¯‡å°±æ˜¯ï¼Œæ–°å¹´å¿«ä¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549156451,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":190027,"user_name":"Mao","can_delete":false,"product_type":"c1","uid":1759620,"ip_address":"","ucode":"1C821B0208B45F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELbYFAXthMl6KBS3dKjYX2lAicRL7ZhahfCkabo12dQjhkvxGCc0BaC0IxibOjZdO5RWibD8CIcELb1Q/132","comment_is_top":false,"comment_ctime":1584595705,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5879563001","product_id":100020801,"comment_content":"MySQL 8.0å¼€å§‹æ”¯æŒhash joinäº†","like_count":1},{"had_liked":false,"id":158224,"user_name":"è„±ç¼°çš„é‡é©¬__","can_delete":false,"product_type":"c1","uid":1447569,"ip_address":"","ucode":"D5F993E7232C61","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/WtHCCMoLJ2DvzqQwPYZyj2RlN7eibTLMHDMTSO4xIKjfKR1Eh9L98AMkkZY7FmegWyGLahRQJ5ibPzeeFtfpeSow/132","comment_is_top":false,"comment_ctime":1575353605,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5870320901","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œâ€œMulti-Range Read ä¼˜åŒ– (MRR)ï¼Œè¿™ä¸ªä¼˜åŒ–çš„ä¸»è¦ç›®çš„æ˜¯å°½é‡ä½¿ç”¨é¡ºåºè¯»ç›˜â€<br>æˆ‘æ›´åº•å±‚çš„ç†è§£æ˜¯ï¼šé¡ºåºè¯»ä¹‹æ‰€ä»¥æ›´ä¼˜ï¼Œæ˜¯ä¸æ˜¯å› ä¸ºinnodbåœ¨æŸ¥æ•°æ®çš„æ—¶å€™ï¼Œå¦‚æœå†…å­˜ç¼“å­˜çš„æ‰€æœ‰æ•°æ®é¡µéƒ½æ²¡æœ‰å½“å‰è¦æŸ¥çš„æ•°æ®ï¼Œå°±ä¼šè¿›è¡Œç£ç›˜IOä»ç£ç›˜å°†è¦æŸ¥è¯¢çš„æ•°æ®åˆ·æ–°åˆ°å†…å­˜ï¼Œè€Œåˆ·æ–°çš„æ—¶å€™åˆæ˜¯æŒ‰é¡µåˆ·æ–°åˆ°å†…å­˜ï¼ˆé‚£å¯¹äºæ•°æ®é¡µè‚¯å®šæ˜¯æŒ‰ä¸»é”®é¡ºåºé€’å¢ä¿å­˜çš„ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´åç»­çš„é¡ºåºè¯»åœ¨å†…å­˜ä¸­çš„å‘½ä¸­ç‡ä¼šé«˜ï¼Œè¿›è¡Œç£ç›˜IOçš„æ¬¡æ•°ä¹Ÿå°±ä¼šé™ä½ï¼Œå¹¶ä¸”å¦‚æœä¸æ˜¯éšæœºæŸ¥ï¼Œå†…å­˜ç¼“å­˜æ•°æ®é¡µçš„åˆ·æ–°ä¹Ÿä¸ä¼šéå¸¸é¢‘ç¹ï¼Œè¿›è€Œèµ·åˆ°äº†æ›´ä¼˜çš„æ•ˆæœã€‚è¯·é—®è€å¸ˆè¿™æ ·ç†è§£æ˜¯å¦æ­£ç¡®å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1246178,"avatar":"https://static001.geekbang.org/account/avatar/00/13/03/e2/5768d26e.jpg","nickname":"inrtyx","note":"","ucode":"81CD18FF34ABAB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":118300,"discussion_content":"è·Ÿç£ç›˜çš„è¯»å–æ•°æ®çš„æœºåˆ¶æœ‰å…³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578151233,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132567,"user_name":"éª‘é¾Ÿçš„å…”å­","can_delete":false,"product_type":"c1","uid":1308854,"ip_address":"","ucode":"3B3AF0A4F324D3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLHKka9hn8hYxxXLOX7spkMRUAUiauzwib2po1aNWDfqHf5jh2EHX9DdI3zvdXL6KVaiajIU01bd8wyA/132","comment_is_top":false,"comment_ctime":1568166921,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5863134217","product_id":100020801,"comment_content":"æˆ‘è§‰çš„è€å¸ˆå…³äºbka è¯´æ³•æœ‰è¯¯ï¼Œmrr è‚¯å®šè§¦å‘åœ¨é©±åŠ¨è¡¨å‡å°‘å›è¡¨æ—¶å€™çš„ramdom acess io é‚£ä¹ˆå¦‚æœè§¦å‘åœ¨åˆ«é©±åŠ¨è¡¨ å°±æ˜¯bka è€Œä¸æ˜¯ è€å¸ˆè¯´ é©±åŠ¨è¡¨ ä¸€æ¬¡ç»™å¤šæ¡æ•°æ®ç»™è¢«é©±åŠ¨è¡¨ ï¼Œmrrå’Œbka éƒ½æ˜¯é’ˆå¯¹å›è¡¨åšçš„ä¼˜åŒ–ï¼Œä¸€ä¸ªæ˜¯é©±åŠ¨è¡¨ä¸€ä¸ªæ˜¯è¢«é©±åŠ¨è¡¨","like_count":1},{"had_liked":false,"id":98895,"user_name":"Lane","can_delete":false,"product_type":"c1","uid":1008257,"ip_address":"","ucode":"F70459D1BBD9F4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/62/81/ad80f427.jpg","comment_is_top":false,"comment_ctime":1559113891,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"5854081187","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ—¢ç„¶MRRå’ŒBKAå¥½ï¼Œä¸ºä»€ä¹ˆå´ä¸é»˜è®¤å¼€å¯ï¼Œå°±ä¸€å®šæ˜¯æœ‰ä¸€äº›å¼Šç«¯å§ï¼Œé‚£ä¹ˆMysqlçš„é¡¾å¿Œåœ¨å“ªé‡Œï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1518795,"avatar":"","nickname":"Geek_2ac804","note":"","ucode":"EDF69B20030BB8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555152,"discussion_content":"æˆ‘è§‰å¾—éœ€è¦å†…å­˜æ”¯æŒå§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646787870,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":70048,"user_name":"live fast","can_delete":false,"product_type":"c1","uid":1198218,"ip_address":"","ucode":"D5ECDDA2DBE5AE","user_header":"https://static001.geekbang.org/account/avatar/00/12/48/8a/a20396e9.jpg","comment_is_top":false,"comment_ctime":1550976077,"is_pvip":false,"replies":[{"id":"24974","content":"æ˜¯å“¦,å¤šè°¢,æˆ‘å‹˜è¯¯ä¸€ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1550980845,"ip_address":"","comment_id":70048,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5845943373","product_id":100020801,"comment_content":"è€å¸ˆï¼ŒPHP çš„ dict è¿™æ ·çš„æ•°æ®ç»“æ„ã€‚åº”è¯¥æ˜¯python,phpåªæœ‰æ•°ç»„","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440416,"discussion_content":"æ˜¯å“¦,å¤šè°¢,æˆ‘å‹˜è¯¯ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550980845,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1185046,"avatar":"https://static001.geekbang.org/account/avatar/00/12/15/16/0aae41a1.jpg","nickname":"no13bus","note":"","ucode":"69FA1A719DA4F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21421,"discussion_content":"å…³è”æ•°ç»„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569481891,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":69204,"user_name":"Lukia","can_delete":false,"product_type":"c1","uid":1028698,"ip_address":"","ucode":"C19472337BCCC6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b2/5a/574f5bb0.jpg","comment_is_top":false,"comment_ctime":1550676982,"is_pvip":false,"replies":[{"id":"24991","content":"æ˜¯ä¸€ä¸ªä¸ªæŸ¥ï¼Œä½†æ˜¯æ˜¯ä¸€æ‰¹å‘ç»™è¢«é©±åŠ¨è¡¨çš„ï¼Œåé¢ç”¨çš„mrr","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1550997823,"ip_address":"","comment_id":69204,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5845644278","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œé’ˆå¯¹BKAçš„æè¿°ï¼š<br>â€œä¹‹åçš„ join è¯­å¥ï¼Œæ‰«æè¡¨ t1ï¼Œè¿™é‡Œçš„æ‰«æè¡Œæ•°æ˜¯ 1000ï¼›join æ¯”è¾ƒè¿‡ç¨‹ä¸­ï¼Œåšäº† 1000 æ¬¡å¸¦ç´¢å¼•çš„æŸ¥è¯¢ã€‚â€<br>æ˜¯ä¸æ˜¯å¯ä»¥ç†è§£ä¸ºè¢«æ‰«æè¡¨çš„ç´¢å¼•å…¶å®è¿˜æ˜¯ä¸€ä¸ªä¸€ä¸ªæŸ¥çš„ï¼Œåªæ˜¯åœ¨é€šè¿‡è¢«æ‰«æè¡¨çš„ç´¢å¼•å»è®¿é—®ä¸»é”®ç´¢å¼•çš„æ—¶å€™ç”¨äº†mrrï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439998,"discussion_content":"æ˜¯ä¸€ä¸ªä¸ªæŸ¥ï¼Œä½†æ˜¯æ˜¯ä¸€æ‰¹å‘ç»™è¢«é©±åŠ¨è¡¨çš„ï¼Œåé¢ç”¨çš„mrr","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550997823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65880,"user_name":"éƒ­å¥","can_delete":false,"product_type":"c1","uid":1102204,"ip_address":"","ucode":"169645EBF3B46C","user_header":"https://static001.geekbang.org/account/avatar/00/10/d1/7c/4639f22c.jpg","comment_is_top":false,"comment_ctime":1549718050,"is_pvip":false,"replies":[{"id":"23406","content":"å—¯ï¼Œé¦–å…ˆDBAå¼€å‘è¿™ä¸ªç•Œé¢å·¥å…·è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œè¿™æ ·å¯ä»¥æ§åˆ¶è¾“å…¥çš„è¯­å¥ï¼Œé¿å…äººå·¥æŸ¥è¯¢å¯¹åº“é€ æˆå¤ªå¤§çš„å½±å“ã€‚<br><br>å¦‚æœè¿™ç±»æŸ¥è¯¢æ¯”è¾ƒå¤šï¼Œå¹¶ä¸”äººå·¥æŸ¥è¯¢çš„æ¡ä»¶å¾ˆå¤æ‚ï¼Œç»å¸¸å®¹æ˜“ç”¨ä¸ä¸Šç´¢å¼•çš„è¯ï¼Œ åœ¨createTimeåˆ›å»ºç´¢å¼•è¿˜æ˜¯æŒºæœ‰å¿…è¦çš„ã€‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1549874078,"ip_address":"","comment_id":65880,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5844685346","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ–°å¹´å¿«ä¹ï¼ï¼çœ‹åˆ°æ‚¨ç»™æˆ‘æé—®çš„å›ç­”ï¼Œç‰¹åˆ«æœŸå¾…æ‚¨ä¹‹åçš„ç­”ç–‘ï¼Œå› ä¸ºdbaæ€•æˆ‘ä»¬æŸ¥è¯¢æ•°æ®åº“æ—¶è¿æ¥æ—¶é—´è¿‡é•¿ï¼Œå½±å“çº¿ä¸Šå®é™…è¿è¡Œã€‚æ‰€ä»¥å°±å¼€å‘å‡ºä¸€ä¸ªç½‘é¡µï¼Œè®©æˆ‘ä»¬è¿›è¡ŒæŸ¥è¯¢ï¼Œä½†æ˜¯è¶…è¿‡å‡ ç§’(å…·ä½“ä¸çŸ¥é“ï¼ŒæŸ¥è¯¢ä¸€ä¸ª200wçš„æ•°æ®ï¼Œæ¡ä»¶æ²¡æœ‰åŠ ç´¢å¼•æœ‰æ—¶å€™éƒ½ä¼š)å°±ä¼šè¿”å›time outï¼Œæ‰€ä»¥å½“æŸ¥è¯¢å¤§è¡¨å¹¶joinçš„æ—¶å€™ï¼Œå°±ä¼šå¾ˆåƒåŠ›ï¼æƒ³æ³•è®¾æ³•çš„ç¼©å°å•ä½ï¼Œä¸€èˆ¬æˆ‘ä»¬éƒ½ä¸ä¼šä¸ºcreateTimeå»ºä¸€ä¸ªç´¢å¼•ï¼Œæ‰€ä»¥åœ¨æ ¹æ®æ—¶é—´ç¼©å°èŒƒå›´çš„æ—¶å€™æœ‰æ—¶å€™ä¹Ÿå¹¶ä¸æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚æˆ‘ä»¬çº¿ä¸Šåšç»Ÿè®¡sqlçš„æ—¶å€™ï¼Œå› ä¸ºæ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œç­›é€‰æ¡ä»¶ä¹Ÿæ¯”è¾ƒå¤šï¼Œä¸€ä¸ªsqlå¯èƒ½åœ¨0.4så¤šï¼Œè¿™å·²ç»æ˜¯å±äºæ…¢sqläº†ã€‚æ„Ÿè°¢è€å¸ˆå¯¹æˆ‘æé—®çš„å›ç­”ï¼ï¼","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438624,"discussion_content":"å—¯ï¼Œé¦–å…ˆDBAå¼€å‘è¿™ä¸ªç•Œé¢å·¥å…·è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œè¿™æ ·å¯ä»¥æ§åˆ¶è¾“å…¥çš„è¯­å¥ï¼Œé¿å…äººå·¥æŸ¥è¯¢å¯¹åº“é€ æˆå¤ªå¤§çš„å½±å“ã€‚\n\nå¦‚æœè¿™ç±»æŸ¥è¯¢æ¯”è¾ƒå¤šï¼Œå¹¶ä¸”äººå·¥æŸ¥è¯¢çš„æ¡ä»¶å¾ˆå¤æ‚ï¼Œç»å¸¸å®¹æ˜“ç”¨ä¸ä¸Šç´¢å¼•çš„è¯ï¼Œ åœ¨createTimeåˆ›å»ºç´¢å¼•è¿˜æ˜¯æŒºæœ‰å¿…è¦çš„ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549874078,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65250,"user_name":"ç£Š","can_delete":false,"product_type":"c1","uid":1070732,"ip_address":"","ucode":"858BF8BFBFB0B8","user_header":"https://static001.geekbang.org/account/avatar/00/10/56/8c/a8317e23.jpg","comment_is_top":false,"comment_ctime":1549161601,"is_pvip":true,"replies":[{"id":"23147","content":"è¿™ä¸€æœŸ45ç¯‡ joinå·®ä¸å¤šå°±è®²è¿™äº›äº†ğŸ˜†<br><br>æœ‰é—®é¢˜åœ¨è¯„è®ºåŒºæå‡ºæ¥å“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1549166802,"ip_address":"","comment_id":65250,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5844128897","product_id":100020801,"comment_content":"ä¸€ç›´å¯¹å¤šè¡¨çš„joinæœ‰äº›è¿·æƒ‘ï¼Œå¸Œæœ›è€å¸ˆåé¢ä¸“é—¨æŠŠè¿™å—ç»™è®²çš„é€å½»äº›","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438373,"discussion_content":"è¿™ä¸€æœŸ45ç¯‡ joinå·®ä¸å¤šå°±è®²è¿™äº›äº†ğŸ˜†\n\næœ‰é—®é¢˜åœ¨è¯„è®ºåŒºæå‡ºæ¥å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549166802,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":64993,"user_name":"John","can_delete":false,"product_type":"c1","uid":1020861,"ip_address":"","ucode":"E4ADF8488953FB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/93/bd/f3977ebb.jpg","comment_is_top":false,"comment_ctime":1548993656,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5843960952","product_id":100020801,"comment_content":"æœŸå¾…é€™ä¸€ç¯‡å¾ˆä¹…å•¦ çµ‚æ–¼å‡ºä¾†å•¦ è‡¨æ™‚è¡¨å’Œç¯„åœæœç´¢å¯¦åœ¨æ˜¯é†é†çŒé ‚ è¬è¬è€å¸«","like_count":1},{"had_liked":false,"id":64992,"user_name":"Dovelol","can_delete":false,"product_type":"c1","uid":1253384,"ip_address":"","ucode":"9B5DDF7720F307","user_header":"https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg","comment_is_top":false,"comment_ctime":1548993606,"is_pvip":false,"replies":[{"id":"23024","content":"è´´ä¸€ä¸‹errorlogé‡Œé¢çœ‹çœ‹æœ‰æ²¡æœ‰å¼‚å¸¸ä¿¡æ¯ å¦‚æœæ¯”è¾ƒå¤§çš„æ–‡ä»¶å¯ä»¥å‘æˆ‘å¾®åšç§ä¿¡é™„ä»¶<br><br>å†™æ–‡ç« çš„è¿‡ç¨‹ä¸­æ ¹æ®å¤§å®¶çš„è¯„è®ºé—®é¢˜ï¼Œå‘ç°æœ‰äº›çŸ¥è¯†ç‚¹åº”è¯¥ä¼˜å…ˆå†™ï¼Œç›®å½•æœ‰åšè°ƒæ•´å“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1549003322,"ip_address":"","comment_id":64992,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5843960902","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè®°å¾—ä¹‹å‰çœ‹ç›®å½•ä¹‹åè¦å°†ä¸€ç¯‡æ ‡é¢˜å¤§æ¦‚ä¸ºâ€œæˆ‘çš„mysqlä¸ºå•¥è«åå…¶å¦™é‡å¯äº†â€ï¼Œæœ€è¿‘çœ‹æ€ä¹ˆæ²¡æœ‰äº†ï¼Ÿæˆ‘ä»¬ç¡®å®é‡åˆ°è¿™ç§é—®é¢˜ï¼Œåœ¨ç³»ç»Ÿæ—¥å¿—é‡Œä¹Ÿæ‰¾ä¸åˆ°OOMä¿¡æ¯ï¼Œç°è±¡æ˜¯åŠä¸ªæœˆå·¦å³å°±ä¼šè‡ªåŠ¨é‡å¯ä¸€ä¸‹ï¼Œæ—¶é—´ä¸å›ºå®šï¼Œæƒ³è¯·æ•™ä¸‹æ˜¯ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438263,"discussion_content":"è´´ä¸€ä¸‹errorlogé‡Œé¢çœ‹çœ‹æœ‰æ²¡æœ‰å¼‚å¸¸ä¿¡æ¯ å¦‚æœæ¯”è¾ƒå¤§çš„æ–‡ä»¶å¯ä»¥å‘æˆ‘å¾®åšç§ä¿¡é™„ä»¶\n\nå†™æ–‡ç« çš„è¿‡ç¨‹ä¸­æ ¹æ®å¤§å®¶çš„è¯„è®ºé—®é¢˜ï¼Œå‘ç°æœ‰äº›çŸ¥è¯†ç‚¹åº”è¯¥ä¼˜å…ˆå†™ï¼Œç›®å½•æœ‰åšè°ƒæ•´å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549003322,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":348235,"user_name":"geek","can_delete":false,"product_type":"c1","uid":1764320,"ip_address":"","ucode":"431C838A6491B0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/SKPfibfoMmlNicmhj6e84Pt7Z5eZ4iaKXqqkKbQpIx2qZ0BYQkXs0H3fOw7e8AGXEg27uic6hxt0MLenutViaaWblNA/132","comment_is_top":false,"comment_ctime":1654855165,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1654855165","product_id":100020801,"comment_content":"select * from t2 straight_join t1 on (t1.b=t2.b) where t2.id&lt;=50;<br>ä¾‹å­ä¸Šçš„è¿™ä¸ªï¼Œä¸ºä»€ä¹ˆt2çš„è¡¨åªç”¨æ”¾50è¡Œåˆ°joinbufferä¸­å°±å¯ä»¥äº†ï¼Ÿ<br>ä»–ä¸æ˜¯ç”Ÿæˆäº†ä¸´æ—¶è¡¨å†åˆ¤æ–­whereä¸­çš„æ¡ä»¶å—","like_count":0},{"had_liked":false,"id":342829,"user_name":"å“²å­å…„","can_delete":false,"product_type":"c1","uid":1348819,"ip_address":"","ucode":"6D6B6FE1ED2583","user_header":"https://static001.geekbang.org/account/avatar/00/14/94/d3/1861fa96.jpg","comment_is_top":false,"comment_ctime":1650500651,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650500651","product_id":100020801,"comment_content":"å‡å¦‚ä»¥t2è¡¨ä¸ºé©±åŠ¨ï¼Œé¦–å…ˆt2.cåŠ ä¸Šç´¢å¼•ï¼Œç„¶åt2è¡¨å…³è”t1ï¼Œç»™t1åŠ ä¸Št1.aç´¢å¼•æ‰«ææœ€å°‘è¡Œï¼Œåœ¨join_bufferä¸­åˆ¤æ–­t1.cï¼xæ‰€ä»¥t1.cä¸ç”¨åŠ ç´¢å¼•ï¼Œt2å’Œt1è”è¡¨çš„ç»“æœä¸t3å…³è”ï¼Œéœ€è¦ç»™t3åŠ ä¸Št3.bç´¢å¼•ã€‚<br>ç»“è®ºï¼št2è¡¨ä½œä¸ºé©±åŠ¨è¡¨ï¼ŒåŠ t2.cï¼Œt1.aï¼Œt3.bç´¢å¼•","like_count":0},{"had_liked":false,"id":339226,"user_name":"yinwenping","can_delete":false,"product_type":"c1","uid":1088594,"ip_address":"","ucode":"90310F95D8B72F","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er6ADlY3IFt3Rs1aVDyrTO2ytQZDiciaXVKgxCnsqZJUQHzH6I0I6PYvdoiaI6rkm7OLOxHia7t1icDyBQ/132","comment_is_top":false,"comment_ctime":1647999998,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1647999998","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œæœ‰ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸‹ï¼Œä¸‹é¢çš„ä¸¤ä¸ªsqlæœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿ<br>select * from t1, t2 where t1.a=t2.a;<br>select * from t1 join t2 on t1.a=t2.a;","like_count":0},{"had_liked":false,"id":331688,"user_name":"idiot","can_delete":false,"product_type":"c1","uid":2526391,"ip_address":"","ucode":"D7A6E980B530B4","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/fcftgBsticCicEEkuzB0GTkHIocX62YVTSvnhR1c94sccj42lVaYXrmcZyhzUI3l9NcvuN1rXLhXt2eBrZZ0Tw7A/132","comment_is_top":false,"comment_ctime":1642726107,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1642726107","product_id":100020801,"comment_content":"éšæœºè¯»å†™è½¬é¡ºåºè¯»å†™çœŸæ˜¯ç»å…¸æ€è·¯ï¼ŒLSMä¹Ÿæ˜¯è¿™æ ·ã€‚<br>ç»™å¤§çš„è¢«é©±åŠ¨è¡¨åŠ ç´¢å¼•ï¼Œè¦é”è¡¨æ¯”è¾ƒä¹…ï¼Œå½±å“çº¿ä¸Šä¸šåŠ¡ã€‚<br>åé¢çš„å¸¦whereçš„ä¾‹å­å…¶å®è¿˜æ˜¯å°è¡¨joinå°è¡¨äº†ï¼Œä¸è¿‡ä¸´æ—¶è¡¨åŠ ç´¢å¼•çš„æ–¹æ¡ˆæœ‰äº›æ„æ€ï¼Œhash joinçš„æ–¹æ¡ˆå¯¹äºå¤§æ•°æ®æ„Ÿè§‰æ€ä¹ˆéƒ½ä¸é€‚ç”¨ã€‚","like_count":0},{"had_liked":false,"id":328356,"user_name":"ç¬¬äºŒæ¬¡","can_delete":false,"product_type":"c1","uid":1605637,"ip_address":"","ucode":"E0E5F3209D4378","user_header":"https://static001.geekbang.org/account/avatar/00/18/80/05/5e80a2b4.jpg","comment_is_top":false,"comment_ctime":1640684650,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640684650","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸ªç–‘é—®<br>Multi-Range Read ä¼˜åŒ– å’Œ Batched Key Accessä¼˜åŒ–ï¼Œmysqlé»˜è®¤ä¸éƒ½æ²¡å¼€å¯å˜›ï¼Œé‚£è¿™å’Œæˆ‘<br>æ€ä¹ˆä¼˜åŒ–joinæœ‰ä»€ä¹ˆå…³ç³»å˜›ï¼Œæ˜¯è¯´è¿™ä¸ªé…ç½®æˆ‘ä»¬è¿˜æ˜¯å¼€å¯æ¯”è¾ƒå¥½å˜›ï¼Œæœ‰äº›ä¸å¤ªç†è§£","like_count":0},{"had_liked":false,"id":325661,"user_name":"å±±é¬¼è°£","can_delete":false,"product_type":"c1","uid":1543162,"ip_address":"","ucode":"E25F498B85A01B","user_header":"https://static001.geekbang.org/account/avatar/00/17/8b/fa/103e6900.jpg","comment_is_top":false,"comment_ctime":1639067005,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1639067005","product_id":100020801,"comment_content":"mrrå°±æ˜¯é’ˆå¯¹å›å¤´çš„é¡ºåºè¯»ä¼˜åŒ–ã€‚ä¸€ä¸ªå‰ææ¡ä»¶å°±æ˜¯ä¸»é”®IDé‡è¦è¶³å¤Ÿå¤šæ‰æœ‰æ„ä¹‰","like_count":0},{"had_liked":false,"id":317310,"user_name":"innovationmech","can_delete":false,"product_type":"c1","uid":1232321,"ip_address":"","ucode":"9377EAD5C6373E","user_header":"https://static001.geekbang.org/account/avatar/00/12/cd/c1/19531313.jpg","comment_is_top":false,"comment_ctime":1634737481,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634737481","product_id":100020801,"comment_content":"mysql 8.0 å¥½åƒæ”¯æŒ hash join äº†ï¼Œæ‰§è¡Œ explain select * from t1 join t2 on (t1.b=t2.b) where t2.b&gt;=1 and t2.b&lt;=2000; ååœ¨ Extra é‡Œçœ‹åˆ°æœ‰ hash join","like_count":0},{"had_liked":false,"id":303377,"user_name":"é©¬æˆ","can_delete":false,"product_type":"c1","uid":1486895,"ip_address":"","ucode":"664F2BAA2E0F0B","user_header":"https://static001.geekbang.org/account/avatar/00/16/b0/2f/e2096905.jpg","comment_is_top":false,"comment_ctime":1626762219,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1626762219","product_id":100020801,"comment_content":"read_rnd_buffer æ˜¯å¼•æ“å±‚çš„ç¼“å­˜ï¼Œè€Œread_rnd_buffer æ˜¯serverå±‚çš„ç¼“å­˜ï¼›é‚£ä¹ˆä½¿ç”¨BKAæ—¶ï¼Œæ˜¯ä¸æ˜¯é™¤äº†ä½¿ç”¨read_rnd_buffer ä¸´æ—¶å­˜æ”¾è¦é©±åŠ¨è¡¨çš„æ•°æ®å¤–ï¼ŒInnoDBå†…éƒ¨ä½¿ç”¨MRRä¼˜åŒ–æ—¶ï¼Œä¾æ—§éœ€è¦ä½¿ç”¨read_rnd_buffeï¼Ÿ","like_count":0},{"had_liked":false,"id":303366,"user_name":"lleft","can_delete":false,"product_type":"c1","uid":1970443,"ip_address":"","ucode":"D573EB509455AE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","comment_is_top":false,"comment_ctime":1626753595,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626753595","product_id":100020801,"comment_content":"BKAç®—æ³•ä½¿ç”¨çš„join bufferæ¥å­˜å‚¨æŸ¥è¯¢éœ€è¦çš„å­—æ®µï¼Œç„¶åè·Ÿè¢«é©±åŠ¨è¡¨å…³è”æŸ¥è¯¢æ˜¯åœ¨join bufferä¸­æ’åºè¿˜æ˜¯åœ¨MRRä¸­æ’åºå‘¢ï¼Ÿåé¢è€å¸ˆè¯´BKAç®—æ³•ä¾èµ–MRRï¼Œé‚£ä¹ˆå°±æ˜¯è¯´ä»join bufferä¸­å–å‡ºå…³è”å­—æ®µåœ¨MRRä¸­æ’åºä¹‹åå†æ‰¹é‡å»è¢«é©±åŠ¨è¡¨ä¸­æŸ¥è¯¢æ•°æ®ï¼Ÿæ¯å¤ªç†è§£è¿™ä¹‹é—´çš„å…³ç³»","like_count":0},{"had_liked":false,"id":301581,"user_name":"å¼ æ»”","can_delete":false,"product_type":"c1","uid":1322636,"ip_address":"","ucode":"87ABAFF0E861E0","user_header":"https://static001.geekbang.org/account/avatar/00/14/2e/8c/b261e15a.jpg","comment_is_top":false,"comment_ctime":1625749753,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625749753","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸ªé—®é¢˜ã€‚<br><br>æœ‰å¦‚ä¸‹ä¸¤ä¸ªsqlï¼š<br>ç¬¬ä¸€ä¸ªsqlï¼šselect * from T1 left join T2 on T1.a=T2.a and T2.b is null where T1.a=&quot;888&quot;;<br>ç¬¬äºŒä¸ªsqlï¼šselect * from T1 left join T2 on T1.a=T2.a where T1.a=&quot;888&quot; and T2.b is null;<br><br>å…¶ä¸­T1.aï¼ŒT2.aå’ŒT2.béƒ½æœ‰ç´¢å¼•ï¼ŒT1çš„æ•°æ®é‡å¤§çº¦3ä¸‡è¡Œï¼ŒT2çš„æ•°æ®é‡å¤§çº¦100ä¸‡è¡Œã€‚<br><br>ä¸ºä»€ä¹ˆç¬¬ä¸€ä¸ªsqlåªæœ‰1æ¯«ç§’ï¼Œè€Œç¬¬äºŒä¸ªsqlè¦3ç§’ï¼Ÿ","like_count":0},{"had_liked":false,"id":301580,"user_name":"å¼ æ»”","can_delete":false,"product_type":"c1","uid":1322636,"ip_address":"","ucode":"87ABAFF0E861E0","user_header":"https://static001.geekbang.org/account/avatar/00/14/2e/8c/b261e15a.jpg","comment_is_top":false,"comment_ctime":1625749744,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625749744","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸ªé—®é¢˜ã€‚<br><br>æœ‰å¦‚ä¸‹ä¸¤ä¸ªsqlï¼š<br>ç¬¬ä¸€ä¸ªsqlï¼šselect * from T1 left join T2 on T1.a=T2.a and T2.b is null where T1.a=&quot;888&quot;;<br>ç¬¬äºŒä¸ªsqlï¼šselect * from T1 left join T2 on T1.a=T2.a where T1.a=&quot;888&quot; and T2.b is null;<br><br>å…¶ä¸­T1.aï¼ŒT2.aå’ŒT2.béƒ½æœ‰ç´¢å¼•ï¼ŒT1çš„æ•°æ®é‡å¤§çº¦3ä¸‡è¡Œï¼ŒT2çš„æ•°æ®é‡å¤§çº¦100ä¸‡è¡Œã€‚<br><br>ä¸ºä»€ä¹ˆç¬¬ä¸€ä¸ªsqlåªæœ‰1æ¯«ç§’ï¼Œè€Œç¬¬äºŒä¸ªsqlè¦3ç§’ï¼Ÿ","like_count":0},{"had_liked":false,"id":294906,"user_name":"å¤§æ¼ ","can_delete":false,"product_type":"c1","uid":1124461,"ip_address":"","ucode":"B7973B9FD7CB61","user_header":"https://static001.geekbang.org/account/avatar/00/11/28/6d/d776d35a.jpg","comment_is_top":false,"comment_ctime":1622127420,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622127420","product_id":100020801,"comment_content":"åˆ›å»ºä¸´æ—¶è¡¨çš„æ–¹å¼èƒ½ä¸èƒ½æ¢æˆå­æŸ¥è¯¢çš„æ–¹å¼æ¥joinå‘¢ï¼Ÿ<br>select * from t1 join (select * from t2 where b&gt;=1 and b&lt;=2000) temp_t on (t1.b=temp_t.b);","like_count":0},{"had_liked":false,"id":292632,"user_name":"ub8","can_delete":false,"product_type":"c1","uid":1481811,"ip_address":"","ucode":"0D937C3EAEB781","user_header":"https://static001.geekbang.org/account/avatar/00/16/9c/53/ade0afb0.jpg","comment_is_top":false,"comment_ctime":1620903863,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1620903863","product_id":100020801,"comment_content":"æˆ‘æ˜¯è·³çš„çœ‹åˆ°è¿™çš„ï¼Œæ„Ÿè§‰æ–‡ç« è¿˜æ˜¯è¦æŒ¨ç€çœ‹ ğŸ˜„","like_count":0},{"had_liked":false,"id":292631,"user_name":"ub8","can_delete":false,"product_type":"c1","uid":1481811,"ip_address":"","ucode":"0D937C3EAEB781","user_header":"https://static001.geekbang.org/account/avatar/00/16/9c/53/ade0afb0.jpg","comment_is_top":false,"comment_ctime":1620903801,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1620903801","product_id":100020801,"comment_content":"æ„Ÿè§‰æŒºæ·±çš„å•Šè¿™ä¸€èŠ‚ï¼Œè™½ç„¶åœ¨å¼€å‘ç¯å¢ƒéƒ½æ²¡æœ‰ç”¨å¤Ÿjoin å‡½æ•° ä½†æ˜¯çœ‹å®Œè¿™ç¯‡æ–‡ç« è¿˜æ˜¯æœ‰æ„Ÿè§¦çš„æ¯”å¦‚ join_buffer æ‰€æœ‰çš„ç³»ç»Ÿä¸ºäº†æé«˜ååé‡éƒ½æ˜¯æ·»åŠ ç¼“å­˜çš„æ–¹å¼ã€‚","like_count":0},{"had_liked":false,"id":287048,"user_name":"æ–°æ‰‹","can_delete":false,"product_type":"c1","uid":1155356,"ip_address":"","ucode":"8CCB8497102BA5","user_header":"https://static001.geekbang.org/account/avatar/00/11/a1/1c/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1617759097,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617759097","product_id":100020801,"comment_content":"mysql8ä¹Ÿæ”¯æŒhash joinäº†ï¼Œhttps:&#47;&#47;mysqlserverteam.com&#47;hash-join-in-mysql-8&#47;","like_count":0},{"had_liked":false,"id":282500,"user_name":"å¸æ±Ÿ","can_delete":false,"product_type":"c1","uid":1590610,"ip_address":"","ucode":"93CBA4E4D05DA5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/B9vSOjMc2a86kYA8R5yDkVdFiaj2JeBZ1PuI9oUKhbnvuZwuibdUam6FTcGzDaiaFdk2GWJveUGhfCVpv4KaOdicoQ/132","comment_is_top":false,"comment_ctime":1615279731,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615279731","product_id":100020801,"comment_content":"ç”¨ç¨‹åºæ‰©å±• -hash join é‚£é‡Œ.phpçš„æ•°ç»„åº”è¯¥æŒ‡çš„æ˜¯&quot;å…³è”æ•°ç»„&quot;,å¹¶ä¸”æ˜¯ä»¥å…³è”å­—æ®µå½“åškeyçš„å…³è”æ•°ç»„.phpä¸€èˆ¬æ„ä¹‰ä¸Šçš„æ•°ç»„æ˜¯&quot;ç´¢å¼•æ•°ç»„&quot;.ç±»ä¼¼å…¶ä»–è¯­è¨€çš„list.","like_count":0},{"had_liked":false,"id":280763,"user_name":"æ³½é˜³","can_delete":false,"product_type":"c1","uid":1622176,"ip_address":"","ucode":"C3275E8DC964DC","user_header":"https://static001.geekbang.org/account/avatar/00/18/c0/a0/ee2921fe.jpg","comment_is_top":false,"comment_ctime":1614350441,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1614350441","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¯·é—®Id in (7,4,9,3,17...)è¿™ç§è¯­å¥åœ¨å¼€å¯MRRæ—¶ä¼šå¯¹inåé¢çš„å€¼æ’åºåå†å»æŸ¥èšç°‡ç´¢å¼•å—ï¼Ÿè¿˜æ˜¯è¯´ä¼˜åŒ–å™¨æœ¬æ¥å°±æ˜¯è¿™æ ·åšçš„ï¼Œä¸éœ€è¦MRRåšï¼Ÿè¿˜æœ‰å°±æ˜¯è¿™ç§æ‰¹é‡æŸ¥è¯¢çš„æ–¹å¼æ˜¯å¤šæ¬¡è¯»ç›˜è¿˜æ˜¯ä¸€æ¬¡è¯»ç›˜å°±å¯ä»¥äº†ï¼Ÿ","like_count":0},{"had_liked":false,"id":277255,"user_name":"æ…•è£","can_delete":false,"product_type":"c1","uid":1445941,"ip_address":"","ucode":"76AD15446B8F31","user_header":"https://static001.geekbang.org/account/avatar/00/16/10/35/d0c21796.jpg","comment_is_top":false,"comment_ctime":1612334791,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612334791","product_id":100020801,"comment_content":"å¦‚æœéšç€ a çš„å€¼é€’å¢é¡ºåºæŸ¥è¯¢çš„è¯ï¼Œid çš„å€¼å°±å˜æˆéšæœºçš„ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°éšæœºè®¿é—®ï¼š<br>ç´¢å¼•aæ˜¯ä¸€é¢—b+treeï¼Œå¶å­èŠ‚ç‚¹æ˜¯æŒ‰é¡ºåºå­˜æ”¾çš„ï¼Œé‚£å–å‡ºçš„ä¸»é”®åº”è¯¥å°±æ˜¯é¡ºåºçš„å‘€ï¼Œä¸Šæ–‡ä¸­æ•°æ®å·²ç»é¡ºåºå…¥åº“äº†ï¼Œè¿™é‡Œæ²¡å¤ªç†è§£","like_count":0},{"had_liked":false,"id":273251,"user_name":"èµ«æ‹‰","can_delete":false,"product_type":"c1","uid":1700634,"ip_address":"","ucode":"F8368316AA6F01","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJrGia7c6VRslfS3YJfHib84mibKGnGshUn3cWFJxhm9MjEMuwJibsTpvZI2yW2LJO1bLBgcglVdRxMZA/132","comment_is_top":false,"comment_ctime":1610512178,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1610512178","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå¦‚æœæ˜¯leftæˆ–è€…right joinï¼Œé‚£æ‰§è¡Œæµç¨‹è·Ÿjoinæœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":272795,"user_name":"åˆ˜ç‰é¾™","can_delete":false,"product_type":"c1","uid":1500821,"ip_address":"","ucode":"02BCA2E78C1AD7","user_header":"https://static001.geekbang.org/account/avatar/00/16/e6/95/99d51e08.jpg","comment_is_top":false,"comment_ctime":1610286092,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1610286092","product_id":100020801,"comment_content":"è€å¸ˆ é‚£å¦‚æœä¸»é”®æ˜¯ uuidï¼Œ é‚£è¿™æ—¶å€™æ’åºè¿˜æœ‰æ•ˆæœå—","like_count":0},{"had_liked":false,"id":268825,"user_name":"å‡¹å‡¸é¸¿","can_delete":false,"product_type":"c1","uid":1915334,"ip_address":"","ucode":"A458BAEBF314B2","user_header":"https://static001.geekbang.org/account/avatar/00/1d/39/c6/1e12f271.jpg","comment_is_top":false,"comment_ctime":1608363380,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1608363380","product_id":100020801,"comment_content":"è€å¸ˆï¼Œä¸Šäº¿çº§åˆ«æ•°æ®çš„é¡¹ç›®æ•°æ®åº“è¦æ€ä¹ˆè®¾è®¡ï¼Ÿæ€ä¹ˆåšåˆ°æŸ¥è¯¢æœ€ä¼˜ï¼Œç°åœ¨ä¸€ä¸ª400ä¸‡æ•°æ®çš„è¡¨æŸ¥è¯¢èŠ±äº†30ç§’","like_count":0},{"had_liked":false,"id":267139,"user_name":"ä¼Ÿç¨‹","can_delete":false,"product_type":"c1","uid":1095173,"ip_address":"","ucode":"E62433F24C14A1","user_header":"https://static001.geekbang.org/account/avatar/00/10/b6/05/bb034c2c.jpg","comment_is_top":false,"comment_ctime":1607606611,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607606611","product_id":100020801,"comment_content":"ç»™è¢«é©±åŠ¨è¡¨çš„joinå­—æ®µåŠ ä¸Šç´¢å¼•ï¼ŒæŠŠBNLç®—æ³•è½¬æˆBKAç®—æ³•ï¼Œæ ¹æ®è¿™ä¸ªè§£å†³ä¸€ä¸ªç°ç½‘æ…¢sqlé—®é¢˜ï¼Œå­¦åˆ°äº†","like_count":0},{"had_liked":false,"id":265373,"user_name":"TinyCalf","can_delete":false,"product_type":"c1","uid":2137418,"ip_address":"","ucode":"0A3EF213359388","user_header":"https://static001.geekbang.org/account/avatar/00/20/9d/4a/09a5041e.jpg","comment_is_top":false,"comment_ctime":1606879826,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606879826","product_id":100020801,"comment_content":"æˆ‘çš„ç‰ˆæœ¬æ˜¯8.0.20ï¼Œçœ‹èµ·æ¥å·²ç»æœ‰hash joinäº†<br>explain select * from t1 straight_join t2 on (t1.a=t2.b);<br>+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+--------------------------------------------+<br>| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra                                      |<br>+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+--------------------------------------------+<br>|  1 | SIMPLE      | t1    | NULL       | ALL  | a             | NULL | NULL    | NULL |  100 |   100.00 | NULL                                       |<br>|  1 | SIMPLE      | t2    | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 1000 |    10.00 | Using where; Using join buffer (hash join) |<br>+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+--------------------------------------------+","like_count":0},{"had_liked":false,"id":265284,"user_name":"Shan","can_delete":false,"product_type":"c1","uid":1666954,"ip_address":"","ucode":"4F158016B0D590","user_header":"https://static001.geekbang.org/account/avatar/00/19/6f/8a/bea966ac.jpg","comment_is_top":false,"comment_ctime":1606838944,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606838944","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œå¯¹äºMRRä¼˜åŒ–æˆ‘æå‡ºä¸€äº›ç–‘é—®ï¼š<br>1ã€å¦‚æœä½¿ç”¨è¾…åŠ©ç´¢å¼•è¿›è¡ŒèŒƒå›´æŸ¥è¯¢ï¼Œå°±åƒä¾‹å­ä¸­çš„açš„èŒƒå›´æ˜¯[1,100]ï¼Œå¾—åˆ°çš„IDå€¼æ˜¯é€†åºï¼Œä½†æ˜¯IDé€†åºå’Œé¡ºåºä¸éƒ½æ˜¯é¡ºåºIOå—ï¼Œå› ä¸ºIDçš„åœ°å€åå‘äºè¿ç»­ã€‚<br>2ã€ä¸€èˆ¬æŸ¥è¯¢éƒ½ä¼šå°†å¯¹åº”çš„æ•°æ®é¡µæ”¾å…¥åˆ°ç¼“å­˜æŠŠï¼Œä¸‹æ¬¡æŸ¥è¯¢å°±ä¸ä¼šè¯»ç£ç›˜ï¼Œé‚£ä¹ˆå¦‚æœæ˜¯é€†åºçš„è¯ï¼Œå¦‚æœIDæ˜¯ç´§å‡‘çš„ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿä¼šä½¿ç”¨åˆ°ç¼“å­˜çš„ä¼˜åŒ–ã€‚","like_count":0},{"had_liked":false,"id":262809,"user_name":"AluAlu","can_delete":false,"product_type":"c1","uid":1309974,"ip_address":"","ucode":"ACDE9CD9D7B459","user_header":"https://static001.geekbang.org/account/avatar/00/13/fd/16/719fa5c3.jpg","comment_is_top":false,"comment_ctime":1605848963,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605848963","product_id":100020801,"comment_content":"è¡¨tå’Œt1å„æœ‰1000è¡Œæ•°æ®ï¼Œä¸ºä»€ä¹ˆæ‰§è¡Œexplain select * from t straight_join t1 on t.a=t1.a<br>Extra åˆ—æ˜¾ç¤ºusing index ,using blocked  nested  loop join<br>è·Ÿæˆ‘é¢„æœŸä¸å¤ªä¸€æ ·ã€‚ã€‚ã€‚","like_count":0},{"had_liked":false,"id":253741,"user_name":"Geek8819","can_delete":false,"product_type":"c1","uid":2028950,"ip_address":"","ucode":"521AEDAB2EED81","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f5/96/e963b41b.jpg","comment_is_top":false,"comment_ctime":1602849336,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1602849336","product_id":100020801,"comment_content":"BNL ç®—æ³•æ•ˆç‡ä½ï¼Œå»ºè®®ä½ éƒ½å°½é‡è½¬æˆ BKA ç®—æ³•ã€‚ä¼˜åŒ–çš„æ–¹å‘å°±æ˜¯ç»™è¢«é©±åŠ¨è¡¨çš„å…³è”å­—æ®µåŠ ä¸Šç´¢å¼•<br>æƒ³é—®ä¸€ä¸‹åŠ ä¸Šç´¢å¼•ä¸å°±å˜æˆNLJäº†ä¹ˆ","like_count":0,"discussions":[{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329142,"discussion_content":"NLJä¼˜åŒ–åä¸å°±æ˜¯bkaä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606317729,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":248610,"user_name":"shenfl","can_delete":false,"product_type":"c1","uid":1184233,"ip_address":"","ucode":"607CD894152241","user_header":"https://static001.geekbang.org/account/avatar/00/12/11/e9/b6aa6364.jpg","comment_is_top":false,"comment_ctime":1600241017,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1600241017","product_id":100020801,"comment_content":"BNLç®—æ³•å¯ä»¥å…ˆåˆ¤æ–­t2.bæ˜¯ä¸æ˜¯åœ¨1-2000ï¼Œå¦‚æœæ˜¯çš„å†éå†join_bufferä¸­t1åšåŒ¹é…ï¼Œè¿™æ ·æ˜¯ä¸æ˜¯å°±ä¸ç”¨ä¸´æ—¶è¡¨äº†ï¼Ÿmysqlåº•å±‚ä¸ºå•¥ä¸æ˜¯è¿™æ ·å¤„ç†å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":238715,"user_name":"ä¸è·¯åŒé£","can_delete":false,"product_type":"c1","uid":1138821,"ip_address":"","ucode":"2985F1440A1962","user_header":"https://static001.geekbang.org/account/avatar/00/11/60/85/f72f1d94.jpg","comment_is_top":false,"comment_ctime":1596270008,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1596270008","product_id":100020801,"comment_content":"æ—¶éš”ä¸€å¹´åŠè¿‡æ¥å›å¤ï¼Œmysql8å·²ç»æ”¯æŒhash joinäº†","like_count":0},{"had_liked":false,"id":237901,"user_name":"î„‹ èç“¦è¿ªå¡","can_delete":false,"product_type":"c1","uid":1243452,"ip_address":"","ucode":"2F27017E82EB2D","user_header":"https://static001.geekbang.org/account/avatar/00/12/f9/3c/42b96095.jpg","comment_is_top":false,"comment_ctime":1596001066,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596001066","product_id":100020801,"comment_content":"å¦‚æœæ»¡è¶³ t1.b=t2.b, å†åˆ¤æ–­å…¶ä»–æ¡ä»¶ï¼Œä¹Ÿå°±æ˜¯æ˜¯å¦æ»¡è¶³ t2.b å¤„äº[1,2000]çš„æ¡ä»¶ï¼Œå¦‚æœæ˜¯ï¼Œå°±ä½œä¸ºç»“æœé›†çš„ä¸€éƒ¨åˆ†è¿”å›ï¼Œå¦åˆ™è·³è¿‡ã€‚<br>------------------------------------<br>è¿™é‡Œä¸ä¼šä¼˜åŒ–ä¸€ä¸‹å—ï¼Ÿéš¾é“2001å¼€å§‹åé¢çš„è®°å½•ï¼Œéƒ½éœ€è¦å»è·Ÿt1è¡¨è®°å½•æ¯”è¾ƒï¼Ÿæ²¡å¿…è¦å‘€","like_count":0},{"had_liked":false,"id":235085,"user_name":"Yayu","can_delete":false,"product_type":"c1","uid":1058015,"ip_address":"","ucode":"5E7842458D8229","user_header":"https://static001.geekbang.org/account/avatar/00/10/24/df/645f8087.jpg","comment_is_top":false,"comment_ctime":1594888124,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594888124","product_id":100020801,"comment_content":"mysql 8.0 å·²ç»æ”¯æŒ hash join äº†ï¼","like_count":0},{"had_liked":false,"id":232845,"user_name":"Damo","can_delete":false,"product_type":"c1","uid":1599197,"ip_address":"","ucode":"F332EA67F5A40C","user_header":"https://static001.geekbang.org/account/avatar/00/18/66/dd/c9f17139.jpg","comment_is_top":false,"comment_ctime":1594128832,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594128832","product_id":100020801,"comment_content":"å‰æ<br>ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹å¾€è¡¨é‡Œé¢å„æ’å…¥ 1000æ¡æ•°ï¼Œç„¶åä½¿ç”¨è€å¸ˆçš„ sql æŸ¥è¯¢å¾ˆå¿«å°±å‡ºæ¥äº†ã€‚æ„Ÿè§‰æ˜¯æ•°æ®å¤ªå°‘äº†ï¼Œç„¶åé‡æ–°å¾€å„ä¸ªè¡¨ä¸­æ’å…¥ 10w æ•°æ®ï¼Œå†æ¬¡ç”¨ sql æŸ¥è¯¢ï¼Œæ…¢çš„ä¸€é€¼ã€‚ä½¿ç”¨ explain åˆ†æï¼Œèµ°çš„æ˜¯BNLï¼Œé‚£ä¹ˆè¿™é‡Œå°±æ˜¯éœ€è¦è®©ä»–èµ° BKAã€‚æŸ¥è¯¢çš„æ¯ä¸€æ¬¡éƒ½è®©è¢«é©±åŠ¨è¡¨èµ°ç´¢å¼•ï¼Œå°±å¯ä»¥æé«˜æ€§èƒ½ã€‚<br><br>é‚£ä¹ˆæ ¹æ® sql æ¥çœ‹ï¼Œå°±éœ€è¦æ·»åŠ ä¸€ä¸‹ index<br>t1 <br>alter table t1 add index a(a);<br>alter table t1 add index c(c);<br><br>t2<br>alter table t2 add index a(a);<br>alter table t2 add index b(b);<br>alter table t2 add index c(c);<br><br>t3 <br>alter table t3 add index b(b);<br>alter table t3 add index c(c);<br><br>æ·»åŠ ç´¢å¼•åï¼ŒåŸæ¥çš„ BNLï¼Œå°±å˜æˆäº† BKAã€‚<br><br>æˆ‘çš„æŸ¥è¯¢è¯­å¥ä¸º<br>â€œselect * from t1 straight_join t2 on(t1.a=t2.a) straight_join t3 on (t2.b=t3.b) where t1.c&gt;=100 and t2.c&gt;=100 and t3.c&gt;=100â€<br><br>å­˜å‚¨è¿‡ç¨‹ä»£ç ä¸º<br>â€œ<br>drop table t1, t2, t3;<br>CREATE TABLE `t1` (<br>`id` int(11) NOT NULL, <br>`a` int(11) DEFAULT NULL, <br>`b` int(11) DEFAULT NULL, <br>`c` int(11) DEFAULT NULL, <br>PRIMARY KEY (`id`)) ENGINE=InnoDB;<br><br>create table t2 like t1;<br>create table t3 like t2;<br><br>drop procedure idata;<br>delimiter ;;<br>create procedure idata()<br>begin<br>  declare i int;<br><br>  set i=1;<br>  while(i&lt;=100000)do<br>    insert into t1 values(i, i, i, i);<br>    set i=i+1;<br>  end while;<br>  <br>  set i=1;<br>  while(i&lt;=100000)do<br>    insert into t2 values(i, i, i, i);<br>    set i=i+1;<br>  end while;<br><br>  set i=1;<br>  while(i&lt;=100000)do<br>    insert into t3 values(i, i, i, i);<br>    set i=i+1;<br>  end while;<br><br>end;;<br>delimiter ;<br>call idata();<br>â€","like_count":0},{"had_liked":false,"id":225833,"user_name":"FL","can_delete":false,"product_type":"c1","uid":1928368,"ip_address":"","ucode":"C82D077D6C2277","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLCKzC0IPq9HSaMiaySKyviaBftvz2EjgqKNCwia9C0xIfYnuE7qntQ6fQ9oL2sEyJGWu0Mmj7EbWicrg/132","comment_is_top":false,"comment_ctime":1591868745,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1591868745","product_id":100020801,"comment_content":"select * from t1 join t2 on(t1.a=t2.a) join t3 on (t2.b=t3.b) where t1.c&gt;=X and t2.c&gt;=Y and t3.c&gt;=Z;<br>å¦‚æœX&gt;Y å»t1.aä¸ŠåŠ ç´¢å¼•è®© t1ä½œä¸ºè¢«é©±åŠ¨è¡¨ å¦åˆ™å»t2.aä¸ŠåŠ ç´¢å¼•  <br>å¦‚æœY&gt;Z  å»t2.bä¸ŠåŠ ç´¢å¼• å¦åˆ™å»t3.båŠ ç´¢å¼•<br><br>é¡ºåºçš„è¯æˆ‘è€ƒè™‘è®©å°è¡¨ä½œä¸ºé©±åŠ¨è¡¨,å¤§è¡¨ä½œä¸ºè¢«é©±åŠ¨è¡¨å§","like_count":0},{"had_liked":false,"id":221878,"user_name":"æ–‡å¤","can_delete":false,"product_type":"c1","uid":1313934,"ip_address":"","ucode":"9A3991AA033EB4","user_header":"https://static001.geekbang.org/account/avatar/00/14/0c/8e/8a39ee55.jpg","comment_is_top":false,"comment_ctime":1590627230,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1590627230","product_id":100020801,"comment_content":"ä½ å¥½è€å¸ˆï¼Œpossible_keysæ˜¾ç¤ºæœ‰ä¸€ä¸ªå¯ç”¨çš„ç´¢å¼•ï¼Œä½†æ˜¯keyå´æ˜¾ç¤ºæ²¡ç”¨åˆ°ã€‚ä¸»è¦æ˜¯ä»€ä¹ˆåŸå› é€ æˆmysqlä¸èµ°ç´¢å¼•çš„å‘¢","like_count":0},{"had_liked":false,"id":221739,"user_name":"æ˜ŸæœŸå…«","can_delete":false,"product_type":"c1","uid":1440429,"ip_address":"","ucode":"D8C66E7F61B0D1","user_header":"https://static001.geekbang.org/account/avatar/00/15/fa/ad/3fa02ac7.jpg","comment_is_top":false,"comment_ctime":1590579745,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590579745","product_id":100020801,"comment_content":"Index Nested-Loop Join NLJ<br>Simple Nested-Loop Join SNLJ<br>Block Nested-Loop Join BNL<br>Muti-Range Read MRR<br>Batch Key Access BKA<br>åŠ ç´¢å¼•<br>jion_buffer +where<br>sort_buffer æ²¡æœ‰where<br>","like_count":0},{"had_liked":false,"id":208035,"user_name":"bin","can_delete":false,"product_type":"c1","uid":1460880,"ip_address":"","ucode":"6628A5A146D7AA","user_header":"https://static001.geekbang.org/account/avatar/00/16/4a/90/1209b51c.jpg","comment_is_top":false,"comment_ctime":1587261845,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587261845","product_id":100020801,"comment_content":"æ—è€å¸ˆæ‚¨å¥½,æœ‰ä¸ªå…³äºjoinçš„åœºæ™¯æƒ³è¯·æ•™ä¸€ä¸‹: <br><br>ç­ä¸»ä»»è¡¨(t_teacher) ,æ•°æ®é‡1000<br>CREATE TABLE `t_teacher` (<br>  `id` int(10)  NOT NULL AUTO_INCREMENT COMMENT &#39;ä¸»é”®&#39;,<br>  `name` varchar(100) NOT NULL ,<br>   age int(10)<br>  PRIMARY KEY (`id`),<br> KEY key_age (`age`)   <br>) ENGINE=InnoDB ;<br><br>å­¦ç”Ÿè¡¨(t_stu),æ•°æ®é‡300ä¸‡<br>CREATE TABLE `t_stu` (<br>  `id` int(10)  NOT NULL AUTO_INCREMENT COMMENT &#39;ä¸»é”®&#39;,<br>  `name` varchar(100) NOT NULL ,<br>   teacher_id int(10),<br>  PRIMARY KEY (`id`) ,<br>  KEY key_tid (`teacher_id`) <br>) ENGINE=InnoDB ;<br><br>éœ€æ±‚: æ ¹æ®ç­ä¸»ä»»åç§°æŸ¥è¯¢å­¦ç”Ÿ<br>sqlä¸€(å…ˆwhereè¿‡æ»¤å†join):    select * from (select id from t_teacher where t_teacher.age &gt;= 50)t_tea  join t_stu on t_stu.teacher_id = t_tea.id <br>sqläºŒ(joinä¹‹åå†whereè¿‡æ»¤):  select from t_teacher t_tea join t_stu on t_stu.teacher_id = t_tea.id where t_tea.age &gt;= 50<br><br>ç»“è®º: sqlä¸€ æ¯”sqläºŒå¿«(é¿å…äº†å¾ˆå¤šä¸å¿…è¦çš„join) ,æ€§èƒ½æ›´ä¼˜(èŠ‚çº¦å†…å­˜) ã€‚<br><br><br><br>æ¨è®º: å› ä¸ºsqlä¸€å…ˆæŸ¥age&gt;50çš„ç­ä¸»ä»»(mysqlä¼šå°†t_teaå­æŸ¥è¯¢çš„ç»“æœæŒ‰idæ’åº) ,å†joinå­¦ç”Ÿè¡¨ã€‚<br>å°±å¥½æ¯”å­¦æ ¡, æœ‰ç­ä¸»ä»»è¡¨ã€å­¦ç”Ÿè¡¨ ï¼Œ ç°æŒ‡å®šæŸå‡ ä¸ªç­ä¸»ä»»çš„ç­çº§åˆ°æ“åœºå¼€ä¼š(ç­ä¸»ä»»è¡¨å…³è”å­¦ç”Ÿè¡¨) ï¼Œ <br>sqlä¸€: æŠŠå…¨æ ¡çš„ç­ä¸»ä»»å«åˆ°æ“åœºç„¶åæŒ‡å®šå‡ ä¸ªç­ä¸»ä»»(whereæ ¹æ®ç­ä¸»ä»»è¿‡æ»¤)ï¼Œå«ä»–ä»¬å–Šè‡ªå·±ç­çš„å­¦ç”Ÿæ¥<br>sqläºŒ: æŠŠå…¨æ ¡çš„ç­ä¸»ä»»ã€å­¦ç”Ÿéƒ½å«åˆ°æ“åœºï¼Œç„¶åæŒ‡å®šå‡ ä¸ªç­ä¸»ä»»çš„å¯¹åº”çš„ç­çº§ç•™ä¸‹(whereæ ¹æ®ç­ä¸»ä»»è¿‡æ»¤) ï¼Œ å…¶ä»–ç­çº§çš„å›å» ã€‚<br><br>è¯·é—®æˆ‘çš„ç†è§£æ­£ç¡®å—?","like_count":0},{"had_liked":false,"id":205433,"user_name":"å¤©","can_delete":false,"product_type":"c1","uid":1310629,"ip_address":"","ucode":"664E42100DE272","user_header":"https://static001.geekbang.org/account/avatar/00/13/ff/a5/02953912.jpg","comment_is_top":false,"comment_ctime":1586616298,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586616298","product_id":100020801,"comment_content":"çœ‹ç€çœ‹ç€ä¸çŸ¥é“æˆ‘çš„ç†è§£æ˜¯å¦æ­£ç¡®<br><br>æ€»ç»“ï¼Œèƒ½ç”¨è¢«é©±åŠ¨è¡¨çš„ç´¢å¼•çš„æ—¶å€™ï¼Œå°±æ˜¯INLï¼ˆå¾ªç¯çš„ç›´æ¥ç”¨åŒ¹é…åˆ°çš„joinçš„ç´¢å¼•å­—æ®µå»è¢«é©±åŠ¨è¡¨æ ‘æœç´¢ï¼‰,å¦‚æœç”¨ä¸äº†ï¼Œç”¨Simple Nested-Loop Joinï¼ˆç›´æ¥ç”¨åŒ¹é…çš„joinå­—æ®µå»å¯¹è¢«é©±åŠ¨è¡¨åšå…¨è¡¨æ‰«æï¼‰æ•°æ®é‡å¤ªå¤§ï¼Œä¸€èˆ¬éƒ½ä¸ç”¨ï¼Œå…¶å®ç”¨çš„æ˜¯BNLï¼ˆäº§ç”Ÿäº†join bufferæ¦‚å¿µï¼ŒæŠŠé©±åŠ¨è¡¨çš„å°½é‡ä¸€æ¬¡è£…é‡Œé¢ï¼Œç„¶åæ‰«æè¢«é©±åŠ¨è¡¨çš„ä¸œè¥¿ï¼Œè¯´ç™½äº†æŠŠéœ€è¦å¤šæ¬¡å…¨è¡¨æ‰«æå˜æˆåœ¨å†…å­˜æ¯”è¾ƒï¼‰<br><br>ç„¶åBKAä¾èµ–MRR ï¼ŒBKAå¯¹NLJçš„ä¼˜åŒ–æ–¹å¼æ˜¯ä¸»è¦ä¼˜åŒ–çš„æ˜¯æŠŠjoinçš„å­—æ®µæ‰¹é‡æ”¾åˆ°join_bufferé‡Œè¾¾åˆ°é¡ºåºæ€§ï¼Œè€Œå¯¹BNLçš„ä¼˜åŒ–æ–¹å¼ä¹Ÿä¸€æ ·ï¼Œä¹Ÿæ˜¯æ”¾åˆ°join_buffer,ä½†æ˜¯å‰ææ˜¯è¦åˆ›å»ºè¢«é©±åŠ¨è¡¨çš„ç´¢å¼•ï¼Œä¹Ÿå°±æ˜¯è¯´å…œäº†ä¸€å¤§åœˆï¼ŒBNLé€‚ç”¨äºæ•°æ®é‡ä¸å¤§çš„ï¼Œæ•°æ®é‡å¤§äº†å°±åŠ ç´¢å¼•ï¼ˆå…¶å®å°±æ˜¯å˜å¾—å¾ˆæƒ³NLJï¼‰ï¼Œå¼€å¯MRRï¼Œè§¦å‘BKAï¼Œå¯¹å·²ç»å¾ˆåƒNLJçš„BNLè¿›è¡Œæœ€åçš„MRRä¼˜åŒ–ï¼Œä¸çŸ¥è¿™ä¸ªç†è§£å¯¹ä¸å¯¹ï¼Ÿ","like_count":0},{"had_liked":false,"id":195045,"user_name":"æ£®æ—æœ¨ï¼Œ","can_delete":false,"product_type":"c1","uid":1756086,"ip_address":"","ucode":"B25D6EC73F56EF","user_header":"https://static001.geekbang.org/account/avatar/00/1a/cb/b6/62f6b5df.jpg","comment_is_top":false,"comment_ctime":1585131007,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585131007","product_id":100020801,"comment_content":"æ—è€å¸ˆå¦‚æœç”¨åˆ°äº†BKAç®—æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªjoin_bufferæ˜¯ç»è¿‡æ’åºåæœ‰åºçš„å§ï¼Ÿç„¶ååœ¨å»è¢«é©±åŠ¨è¡¨ä¸Šçš„indexä¸Šé¡ºåºè¯»å–ã€‚","like_count":0},{"had_liked":false,"id":194963,"user_name":"xuty","can_delete":false,"product_type":"c1","uid":1310250,"ip_address":"","ucode":"986CF5DCF02762","user_header":"https://static001.geekbang.org/account/avatar/00/13/fe/2a/5ee47dda.jpg","comment_is_top":false,"comment_ctime":1585124363,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585124363","product_id":100020801,"comment_content":"MRRå¯¹äºç‰©ç†è¯»æœ‰æå‡ï¼Œå¦‚æœæ•°æ®æœ¬èº«å°±å­˜åœ¨ä¸innodb_buffer_poolä¸­ï¼Œåè€Œä¼šé€ æˆå¤šä½™çš„æ’åºå¼€é”€å˜›ï¼Ÿ","like_count":0},{"had_liked":false,"id":192430,"user_name":"æ˜æ­Œ","can_delete":false,"product_type":"c1","uid":1445986,"ip_address":"","ucode":"2E91A2203052B6","user_header":"https://static001.geekbang.org/account/avatar/00/16/10/62/335856f7.jpg","comment_is_top":false,"comment_ctime":1584850351,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584850351","product_id":100020801,"comment_content":"è€å¸ˆèƒ½å¦ç®€å•ä»‹ç»ä¸€ä¸‹ä½¿ç”¨inå­æŸ¥è¯¢å’Œexistsæ‰§è¡Œçš„åŸç†åŠå¦‚ä½•é€‰æ‹©é©±åŠ¨è¡¨ï¼Ÿ","like_count":0},{"had_liked":false,"id":183993,"user_name":"æ¯›ç«‹å‡¡","can_delete":false,"product_type":"c1","uid":1067251,"ip_address":"","ucode":"7B3BD84187D39D","user_header":"https://static001.geekbang.org/account/avatar/00/10/48/f3/e7f9a26b.jpg","comment_is_top":false,"comment_ctime":1583198818,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583198818","product_id":100020801,"comment_content":"â€œè¿™ä¸ªä¸´æ—¶å†…å­˜ä¸æ˜¯åˆ«äººï¼Œå°±æ˜¯ join_bufferâ€<br><br>å“ˆå“ˆ è«åè¢«æˆ³åˆ°èŒç‚¹ï¼Œè¿˜æ˜¯æˆ‘ä»¬çš„è€æœ‹å‹ï¼šjoin_buffer ï¼","like_count":0},{"had_liked":false,"id":176511,"user_name":"torres","can_delete":false,"product_type":"c1","uid":1108761,"ip_address":"","ucode":"34DABCFC7B74EA","user_header":"https://static001.geekbang.org/account/avatar/00/10/eb/19/76b0b98c.jpg","comment_is_top":false,"comment_ctime":1581077248,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581077248","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ã€‚ çœ‹æ–‡ç« ä¸­è¯´ï¼ŒMRRæ˜¯é»˜è®¤å…³é—­çš„ã€‚æˆ‘æœ‰ä¸ªç–‘é—®ï¼Œä¸ºä»€ä¹ˆé»˜è®¤å…³é—­ï¼Ÿ æ˜¯å› ä¸ºåœ¨æŸäº›æ²¡æœ‰å¿…è¦ä½¿ç”¨çš„åœ°æ–¹ï¼Œä¼šå¯¼è‡´å¤šä½™çš„å†…å­˜å¼€é”€ï¼Ÿ","like_count":0},{"had_liked":false,"id":175392,"user_name":"é™ˆæ‰¬é¸¿","can_delete":false,"product_type":"c1","uid":1284708,"ip_address":"","ucode":"DDDA8493CDC83C","user_header":"https://static001.geekbang.org/account/avatar/00/13/9a/64/eea9aa33.jpg","comment_is_top":false,"comment_ctime":1580704311,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1580704311","product_id":100020801,"comment_content":"è€å¸ˆ æˆ‘çš„mysqlç¢°åˆ°å¦‚ä¸‹æ€§èƒ½é—®é¢˜ å¥—ä¸€ä¸ªå­æŸ¥è¯¢å‘ç°åŸºæœ¬ä¸Šè¦æ‰«è¡¨æ‰€æœ‰çš„æŸ¥ usernameæ˜¯æœ‰ç´¢å¼•çš„ ä½†æ˜¯å¦‚æœæŠŠå­æŸ¥è¯¢çš„ç»“æœç›´æ¥å†™åˆ°æŸ¥è¯¢ä¸­ æŸ¥è¯¢å¾ˆå¿« è¿™æ˜¯mysqlçš„ä¼˜åŒ–å™¨é—®é¢˜å— å¦‚ä¸‹æ˜¯ä¸¤ç§æŸ¥è¯¢çš„ç»“æœ<br>select sum(power) from t2 where username in (SELECT username from t2 a WHERE  `a`.`inviter` = &#39;xxxx&#39;  AND `a`.`type` &gt;= 1);<br>+------------------+<br>| sum(power)       |<br>+------------------+<br>| 788.000000000000 |<br>+------------------+<br>1 row in set (3.073 sec)<br><br>SELECT username from t2 a WHERE  `a`.`inviter` = &#39;xxxx&#39;  AND `a`.`type` &gt;= 1 çš„ç»“æœä¸º&#39;xx1&#39;, &#39;xx2&#39;<br><br>select sum(power) from t2 where username in (&#39;xx1&#39;, &#39;xx2&#39;);<br>+------------------+<br>| sum(power)       |<br>+------------------+<br>| 788.000000000000 |<br>+------------------+<br>1 row in set (0.001 sec)","like_count":0},{"had_liked":false,"id":173896,"user_name":"Geek_eb2e49","can_delete":false,"product_type":"c1","uid":1637789,"ip_address":"","ucode":"21671F0C4E7872","user_header":"https://wx.qlogo.cn/mmopen/vi_32/4PvDe2mRia2vdMGyickA40y2libhpf8ibmIEQquLUZFMXUMqqDjfVb96Y69p7bS6USgxicOKCCHxQHczHBnNb5L9nfA/132","comment_is_top":false,"comment_ctime":1579766516,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1579766516","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œåˆšå¼€å§‹å­¦ä¹ mysql,å¾ˆå¤šè¯æ±‡éƒ½æ¯”è¾ƒé™Œç”Ÿï¼Œæƒ³è¦è¯·æ•™ä¸‹æ–‡ä¸­çš„BKAç®—æ³•ä¸­ã€‚æ‚¨è¯´<br>â€˜NLJ ç®—æ³•æ‰§è¡Œçš„é€»è¾‘æ˜¯ï¼šä»é©±åŠ¨è¡¨ t1ï¼Œä¸€è¡Œè¡Œåœ°å–å‡º a çš„å€¼ï¼Œå†åˆ°è¢«é©±åŠ¨è¡¨ t2 å»åš joinã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºè¡¨ t2 æ¥è¯´ï¼Œæ¯æ¬¡éƒ½æ˜¯åŒ¹é…ä¸€ä¸ªå€¼ã€‚è¿™æ—¶ï¼ŒMRR çš„ä¼˜åŠ¿å°±ç”¨ä¸ä¸Šäº†ã€‚é‚£æ€ä¹ˆæ‰èƒ½ä¸€æ¬¡æ€§åœ°å¤šä¼ äº›å€¼ç»™è¡¨ t2 å‘¢ï¼Ÿæ–¹æ³•å°±æ˜¯ï¼Œä»è¡¨ t1 é‡Œä¸€æ¬¡æ€§åœ°å¤šæ‹¿äº›è¡Œå‡ºæ¥ï¼Œä¸€èµ·ä¼ ç»™è¡¨ t2ã€‚â€™<br>è¿™é‡Œä¸æ˜¯å¾ˆæ˜ç™½ï¼Œå°†æŠŠè¡¨ t1 çš„æ•°æ®å–å‡ºæ¥ä¸€éƒ¨åˆ†ï¼Œå…ˆæ”¾åˆ°ä¸€ä¸ªä¸´æ—¶å†…å­˜ join_bufferä¸­ï¼Œè¯·é—®join_bufferä¸­æ•°æ®æ˜¯å¦‚ä½•ä¸t2è¿›è¡ŒåŒ¹é…çš„ï¼Ÿå…¨éƒ¨ä¸€èµ·ä¼ è¿‡å»ç»™è¡¨t2 ? å…¨éƒ¨ä¼ è¿‡å»ä»¥åæ¥ä¸‹æ¥æ˜¯æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":166252,"user_name":"Anthony","can_delete":false,"product_type":"c1","uid":1309908,"ip_address":"","ucode":"9E0C98A9123365","user_header":"https://static001.geekbang.org/account/avatar/00/13/fc/d4/743d3f02.jpg","comment_is_top":false,"comment_ctime":1577424266,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577424266","product_id":100020801,"comment_content":"è€å¸ˆ ç»“åˆä¸Šä¸€èŠ‚çš„çŸ¥è¯† æƒ³åˆ°å°†<br>select * from t1 join t2 on (t1.b=t2.b) where t2.b&gt;=1 and t2.b&lt;=2000; æ”¹æˆ<br>select * from t2 straight_join t1 on (t1.b=t2.b) where t2.b&gt;=1 and t2.b&lt;=2000;å°±åªéœ€è¦æ¯”è¾ƒ2000*1000æ¬¡äº†","like_count":0},{"had_liked":false,"id":156495,"user_name":"ä½•å¦¨","can_delete":false,"product_type":"c1","uid":1385377,"ip_address":"","ucode":"EC3983BFF7992A","user_header":"https://static001.geekbang.org/account/avatar/00/15/23/a1/b08f3ee7.jpg","comment_is_top":false,"comment_ctime":1574903035,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574903035","product_id":100020801,"comment_content":"çœ‹åˆ°è€å¸ˆè¯´çš„å›è¡¨é—®é¢˜ï¼Œè¯´åˆ°äº†ä¸»é”®è¿ç»­çš„é—®é¢˜ï¼Œæˆ‘æƒ³é—®ä¸€ä¸‹è€å¸ˆæ˜¯å¦‚ä½•çœ‹ æ•°æ®åº“è‡ªå¢ä¸»é”®å’Œæˆ‘ä»¬è‡ªå·±ç”Ÿæˆçš„å”¯ä¸€ä¸»é”®å‘¢ï¼Ÿåœ¨å»ºè¡¨çš„æ—¶å€™è¯¥å¦‚æœæƒè¡¡å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":153945,"user_name":"éšå¿ƒè€Œè‡³","can_delete":false,"product_type":"c1","uid":1097836,"ip_address":"","ucode":"31866865255101","user_header":"https://static001.geekbang.org/account/avatar/00/10/c0/6c/29be1864.jpg","comment_is_top":false,"comment_ctime":1574334819,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574334819","product_id":100020801,"comment_content":"ç¼“å­˜ï¼Œé¡ºåºè¯»å†™æ¯”éšæœºè¯»å†™å¿«å¾—å¤šç­‰ç­‰ï¼Œæˆ‘å‘ç°å¤§ç‰›ä»¬éƒ½åœ¨æƒ³æ–¹è®¾æ³•åˆ©ç”¨è¿™äº›æœ€åŸºæœ¬çš„åŸç†ï¼Œè®¡ç®—æœºç§‘å­¦çœŸæœ‰è¶£ã€‚","like_count":0},{"had_liked":false,"id":153406,"user_name":"Jayden ç‹å‡¯è±ª","can_delete":false,"product_type":"c1","uid":1592236,"ip_address":"","ucode":"6CAADB9B449892","user_header":"https://static001.geekbang.org/account/avatar/00/18/4b/ac/2a48928f.jpg","comment_is_top":false,"comment_ctime":1574231305,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574231305","product_id":100020801,"comment_content":"MySQL 8.0.18 é»˜è®¤å·²ç»å¼€å¯hash join","like_count":0},{"had_liked":false,"id":147993,"user_name":"tiger54910","can_delete":false,"product_type":"c1","uid":1500686,"ip_address":"","ucode":"F4D5BE1864E097","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Qq9IlgLjo8CVKTc93AHsicwDMJq3sbN4UsubLJXUQxWKDkEblaUHYviaq8TuVWygqkubwFEAa4qLiaQF6PyrfEQDg/132","comment_is_top":false,"comment_ctime":1572925375,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1572925375","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸‹æ€ä¹ˆä½¿ç”¨flexviewç‰©åŒ–è§†å›¾ï¼Œå› ä¸ºæˆ‘çš„æ£€ç´¢ç”¨äº†ä¸ƒå…«ä¸ªè¡¨joinï¼ŒæŸ¥è¯¢é€Ÿåº¦å¾ˆæ…¢ï¼Œè°¢è°¢","like_count":0},{"had_liked":false,"id":134187,"user_name":"ä»å¿ƒå¼€å§‹","can_delete":false,"product_type":"c1","uid":1187225,"ip_address":"","ucode":"7BC50E93FE52F6","user_header":"https://static001.geekbang.org/account/avatar/00/12/1d/99/9fae83db.jpg","comment_is_top":false,"comment_ctime":1568772169,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568772169","product_id":100020801,"comment_content":"è€å¸ˆï¼Œç°æœ‰å•†å“å’Œå•†å“åˆ†ç±»ä¸¤ä¸ªè¡¨ï¼Œå»ºè¡¨è¯­å¥å¦‚ä¸‹ï¼ŒæŸ¥è¯¢å•†å“å’Œå•†å“çš„åˆ†ç±»ä¿¡æ¯ï¼Œä¸‹é¢çš„SQLèƒ½å¦‚ä½•ä¼˜åŒ–ä¸€ä¸‹å—ï¼Ÿ<br>  <br>#å•†å“ä¿¡æ¯è¡¨<br>CREATE TABLE `goods` (<br>  `ID` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,<br>  `GOODS_NO` VARCHAR(30) DEFAULT NULL COMMENT &#39;å•†å“ä»£ç &#39;,<br>  `GOODS_NAME` VARCHAR(500) DEFAULT NULL COMMENT &#39;åç§°&#39;,<br>  `GOODS_TYPE_NO` VARCHAR(50) DEFAULT NULL COMMENT &#39;å•†å“åˆ†ç±»&#39;,<br>  PRIMARY KEY (`ID`),<br>  UNIQUE KEY `idx_uni_goodsNo` (`GOODS_NO`),<br>  KEY `idx_base_goodsTypeNo` (`GOODS_TYPE_NO`)<br>) ENGINE=INNODB DEFAULT CHARSET=utf8     <br><br><br>#å•†å“åˆ†ç±» è®°å½•äº†1çº§,2çº§ï¼Œ3çº§åˆ†ç±»ï¼Œè¡Œè®°å½•åŒ…å«çˆ¶ç±»åˆ†ç±»å·<br><br>CREATE TABLE `goods_catalog` (<br>  `ID` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT COMMENT &#39;ç¼–å·&#39;,<br>  `GOODS_TYPE_NO` VARCHAR(10) DEFAULT NULL COMMENT &#39;å•†å“ç±»åˆ«ç¼–ç &#39;,<br>  `CATALOG_NAME` VARCHAR(100) DEFAULT NULL COMMENT &#39;å•†å“ç±»åˆ«åç§°&#39;,<br>  `CATALOG_LEVEL` VARCHAR(10) DEFAULT NULL COMMENT &#39;ç±»åˆ«å±‚çº§&#39;,<br>  `PARENTID` DECIMAL(15,4) DEFAULT NULL COMMENT &#39;çˆ¶ç±»åˆ«&#39;,<br>  PRIMARY KEY (`ID`),<br>  KEY `idx_parentid` (`PARENTID`),<br>  KEY `ix_goods_type_No_uni` (`GOODS_TYPE_NO`) USING BTREE<br>) ENGINE=INNODB DEFAULT CHARSET=utf8 COMMENT=&#39;å•†å“åˆ†ç±»&#39;<br><br><br>#æŸ¥è¯¢æŸä¸ªå•†å“çš„1,2,3çº§åˆ†ç±»ä¿¡æ¯ï¼Œå¦‚ä½•ä¼˜åŒ–<br>DESC SELECT goods_no, goods_name,c3.`CATALOG_NAME` ,c2.`CATALOG_NAME`,c1.`CATALOG_NAME`<br> FROM goods g INNER JOIN <br>goods_catalog c3 ON g.`GOODS_TYPE_NO` = c3.`GOODS_TYPE_NO`<br>INNER JOIN goods_catalog c2 ON c2.`GOODS_TYPE_NO` = c3.`PARENTID`<br>INNER JOIN goods_catalog c1 ON c1.`GOODS_TYPE_NO` = c2.`PARENTID`<br>WHERE goods_no = &#39;sku1&#39;;<br>","like_count":0},{"had_liked":false,"id":127823,"user_name":"à¼ºà½‰à½²à¼æ¸”å¤«à¼à½‰à¾€à¼»","can_delete":false,"product_type":"c1","uid":1498344,"ip_address":"","ucode":"207C67021ADF39","user_header":"https://static001.geekbang.org/account/avatar/00/16/dc/e8/11377f97.jpg","comment_is_top":false,"comment_ctime":1566798398,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566798398","product_id":100020801,"comment_content":"é˜¿é‡Œå·´å·´javaå¼€å‘æ‰‹å†Œä¸Šè¯´å†™è¶…è¿‡ä¸‰å¼ è¡¨ç¦æ­¢joinï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿä¸è®©ç”¨joinç”¨whereï¼Ÿ","like_count":0},{"had_liked":false,"id":120994,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1565046456,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565046456","product_id":100020801,"comment_content":"SQLè¯­å¥ä¼˜åŒ–çš„æ€è·¯ï¼Œä¹Ÿé€‚ç”¨äºå…¶ä»–çš„æ€§èƒ½ä¼˜åŒ–<br>1ï¼šä½¿ç”¨ä¸Šç´¢å¼•<br>2ï¼šç¼©å°æŸ¥æ‰¾èŒƒå›´<br>3ï¼šå°½é‡åœ¨å†…å­˜ä¸­æ“ä½œ<br>æ˜¯å¦ä½¿ç”¨ç´¢å¼•åŠæŸ¥æ‰¾èŒƒå›´å¤§å°ï¼Œå¯ä»¥ä½¿ç”¨explainæ¥çœ‹ï¼Œå¦‚æœç”¨ä¸Šäº†ç´¢å¼•ä¸”èŒƒå›´å·²ç»æœ€å°ï¼Œåº”è¯¥ä¸æ…¢ï¼Œå¦‚æœè¿˜å«Œæ…¢ï¼Œå¯ä»¥è€ƒè™‘ç¼“å­˜ã€‚","like_count":0},{"had_liked":false,"id":120545,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1564926396,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564926396","product_id":100020801,"comment_content":"è¯¾åæ€è€ƒé¢˜ï¼š<br>select * from t1 <br>join t2 on(t1.a=t2.a) <br>join t3 on (t2.b=t3.b) <br>where t1.c&gt;=X and t2.c&gt;=Y and t3.c&gt;=Z;<br><br>ç»“è®ºï¼š<br>t1 åŠ  c ç´¢å¼•<br>t2 åŠ  a ç´¢å¼•<br>t3 åŠ  b ç´¢å¼•<br><br>æ€è€ƒè¿‡ç¨‹ï¼š<br>t1ï¼š<br>åŠ  c ç´¢å¼•æ˜¯ä¸ºäº†ä»é©±åŠ¨è¡¨å–æ•°åˆ° join_buffer æ—¶ï¼ˆå‡è®¾å¼€å¯ mmr ä¼˜åŒ–ï¼‰ï¼Œå¯ä»¥èµ°ç´¢å¼•å¿«é€Ÿæ£€ç´¢ã€‚<br><br>t2ï¼š<br>åŠ  a ç´¢å¼•æ˜¯è¢«é©±åŠ¨è¡¨å¯ä»¥ç”¨ NLJ ç®—æ³•ï¼Œä¹Ÿå¯ä»¥ä¼˜åŒ–æˆ BKA ç®—æ³•ã€‚å› ä¸ºæ˜¯ select *ï¼Œæ‰€ä»¥ä¸åŠ  a,c è”åˆç´¢å¼•ï¼Œåæ­£éƒ½æ˜¯è¦èµ° t2 ä¸»é”®ç´¢å¼•ã€‚<br><br>t3ï¼š<br>åŠ  b ç´¢å¼•çš„ç†ç”±åŒ t2ã€‚ä¸åŠ  b,c è”åˆç´¢å¼•çš„ç†ç”±ä¹ŸåŒ t2ã€‚","like_count":0},{"had_liked":false,"id":115273,"user_name":"ZHANG","can_delete":false,"product_type":"c1","uid":1442437,"ip_address":"","ucode":"BAFD110AE33328","user_header":"https://static001.geekbang.org/account/avatar/00/16/02/85/9a81a973.jpg","comment_is_top":false,"comment_ctime":1563522792,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1563522792","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¿™ä¸ªåœ°æ–¹ä¸å¤ªæ˜ç™½<br>å¦‚æœè¦ä½¿ç”¨ BKA ä¼˜åŒ–ç®—æ³•çš„è¯ï¼Œä½ éœ€è¦åœ¨æ‰§è¡Œ SQL è¯­å¥ä¹‹å‰ï¼Œå…ˆè®¾ç½®<br>set optimizer_switch=â€˜mrr=on,mrr_cost_based=off,batched_key_access=onâ€™;<br>è¿™ä¸ªè®¾ç½®ä»¥åæ˜¯åªå¯¹å½“å‰SQLç”Ÿæ•ˆå—ï¼Œå½“å‰SQLæ‰§è¡Œå®Œä»¥åä¼šå½±å“å…¶ä»–SQLå—<br>","like_count":0,"discussions":[{"author":{"id":1622109,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erPMtAfnQdpx1yOZQ2ic7icqUs3tvibEjUXQMUXKiaakyuIho6k6vmdl46nrdWjXIjPIRg9Pmco00tR5w/132","nickname":"å°æ°˜","note":"","ucode":"DA55B9A02D9EE0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":16532,"discussion_content":"åº”è¯¥æ˜¯åªå¯¹å½“å‰çº¿ç¨‹æœ‰æ•ˆï¼Œæ–­å¼€è¿æ¥åå°±æ— æ•ˆäº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1568898821,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97472,"user_name":"lmdcx","can_delete":false,"product_type":"c1","uid":1334409,"ip_address":"","ucode":"F2CDD0091ADFD7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIjRETqRjvLESLDZkNTjIiaSibtNYBaS1o8WMUicOFn3ycF3Mgh6LRJibqSBjVBjiaO2ibW0gHkafATb21A/132","comment_is_top":false,"comment_ctime":1558679032,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558679032","product_id":100020801,"comment_content":"æˆ‘çœ‹äº†åŠå¤©ä¸çŸ¥é“ç†è§£çš„æ˜¯å¦æœ‰è¯¯ï¼š<br>1. é’ˆå¯¹å•è¡¨çš„å›è¡¨æŸ¥è¯¢çš„ä¼˜åŒ–å« MRR<br>2. é’ˆå¯¹ä¸¤å¼ è¡¨åšå…³è”æŸ¥è¯¢çš„ä¼˜åŒ–å« BKAï¼Œå½“ç„¶è¿™é‡Œé¢ä¹Ÿç”¨äº†BNL<br>å½“ç„¶å‰ææ˜¯ å›è¡¨ ã€ å…³è”æŸ¥è¯¢ç”¨çš„æ˜¯ä¸»å¤–é”®åšå…³è”<br>å¯¹å—ï¼Ÿ<br>ï¼ˆå¦‚æœå¯¹çš„è¯ï¼Œæ„Ÿè§‰è€å¤–å°±æ˜¯å–œæ¬¢å•¥ä¸œè¥¿éƒ½æ„¿æ„å¤šæä¸ªæ¦‚å¿µæŠŠåˆ«äººå¥—è·¯ä½ï¼Œä»¥ä¾¿äºå¾—äººå¿ƒï¼Ÿï¼‰","like_count":0},{"had_liked":false,"id":84549,"user_name":"Lukia","can_delete":false,"product_type":"c1","uid":1028698,"ip_address":"","ucode":"C19472337BCCC6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b2/5a/574f5bb0.jpg","comment_is_top":false,"comment_ctime":1554873882,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554873882","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·æ•™ä¸€ä¸ªå…³äºmrrçš„é—®é¢˜ï¼Œå¦‚æœæ ¹æ®ç´¢å¼•açš„èŒƒå›´æŸ¥è¯¢å¾—åˆ°ä¸»é”®çš„é›†åˆå€¼æ˜¯å¾ˆæ¾æ•£çš„æƒ…å†µï¼ˆä¸å¤Ÿç´§å‡‘è¿ç»­ï¼Œå¯¼è‡´éœ€è¦è¿ç»­æ‰«æå¤§é‡çš„ç£ç›˜å—ï¼‰ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ä½¿ç”¨mrrçš„æå‡å¯èƒ½ä¹Ÿä¼šå¾—ä¸å¿å¤±å§","like_count":0},{"had_liked":false,"id":82832,"user_name":"My dream","can_delete":false,"product_type":"c1","uid":1077733,"ip_address":"","ucode":"2FEFB344230C17","user_header":"https://static001.geekbang.org/account/avatar/00/10/71/e5/bcdc382a.jpg","comment_is_top":false,"comment_ctime":1554337650,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554337650","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæœ‰è¿™æ ·ä¸€ç§å¸¸ç”¨çš„åœºæ™¯ï¼šMySQLå®ç°åœ¨åŒä¸€è¡¨ä¸­çš„èŠ‚ç‚¹çº§è”æŸ¥è¯¢ï¼Œæˆ‘çœ‹ç½‘ä¸Šå¾ˆå¤šæ–¹æ¡ˆæ˜¯é€šè¿‡å‡½æ•°æ¥å®ç°çš„ï¼š<br>æ ¹æ®æ ¹èŠ‚ç‚¹idæŸ¥è¯¢å…¶æ‰€æœ‰å­èŠ‚ç‚¹idï¼ˆåŒ…å«æ ¹èŠ‚ç‚¹ï¼‰<br>CREATE TABLE `sys_dept` (<br>  `dept_id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#39;éƒ¨é—¨ID&#39;,<br>  `parent_id` bigint(20) NOT NULL COMMENT &#39;ä¸Šçº§éƒ¨é—¨ID&#39;,<br>  `name` varchar(60) NOT NULL COMMENT &#39;éƒ¨é—¨&#47;å°ç»„å&#39;,<br>  `dept_type` int(3) NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;éƒ¨é—¨ç±»å‹ï¼ˆ1éƒ¨é—¨ï¼Œ2å°ç»„ï¼‰&#39;,<br>  `order_num` int(11) NOT NULL COMMENT &#39;æ’åº&#39;,<br>  `del_flag` tinyint(4) NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;æ˜¯å¦åˆ é™¤ï¼ˆ-1ï¼šå·²åˆ é™¤ï¼Œ0ï¼šæ­£å¸¸ï¼‰&#39;,<br>  PRIMARY KEY (`dept_id`)<br>) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8 COMMENT=&#39;éƒ¨é—¨è¡¨&#39;;<br>å®ç°çš„æ–¹æ³•æ˜¯ï¼š<br>èŠ‚ç‚¹çº§è”æŸ¥è¯¢å‡½æ•°ï¼š<br>delimiter &#47;&#47; <br>CREATE FUNCTION `getChildList`(rootId bigint)<br>RETURNS varchar(1000) <br><br>BEGIN<br>\tDECLARE temp VARCHAR(1000);<br>    DECLARE tempChild VARCHAR(1000);<br><br>    SET temp = &#39;$&#39;;<br>    SET tempChild =cast(rootId as CHAR);<br><br>    WHILE tempChild is not null DO<br>    \tSET temp = concat(temp,&#39;,&#39;,tempChild);<br>        SELECT group_concat(dept_id) INTO tempChild FROM  sys_dept where FIND_IN_SET(parent_id,tempChild) &gt; 0;<br>   \tEND WHILE;<br>    RETURN temp; <br>END<br>&#47;&#47;<br>åœ¨æŸ¥è¯¢æ˜¯å°±ç›´æ¥ï¼šæŸ¥è¯¢æ ¹èŠ‚ç‚¹idä¸º4çš„å­èŠ‚ç‚¹id<br>select dept_id from sys_dept where FIND_IN_SET(dept_id,getChildList(4));<br>æˆ‘æƒ³è¯·æ•™çš„æ˜¯ï¼Œè¿™æ ·çš„å®ç°æ–¹æ³•æ•ˆç‡é«˜ä¸é«˜ï¼Ÿè¿˜æœ‰æ²¡æœ‰æ›´å¥½æ›´ç®€å•çš„åŠæ³•ï¼Ÿç‰¹åˆ«æ˜¯åœ¨æ— é™çº§è”çš„æƒ…å†µä¸‹","like_count":0},{"had_liked":false,"id":81676,"user_name":"ä¸å¿˜åˆå¿ƒ","can_delete":false,"product_type":"c1","uid":1015494,"ip_address":"","ucode":"5B5F45564DDBE7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7e/c6/83684988.jpg","comment_is_top":false,"comment_ctime":1554003527,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554003527","product_id":100020801,"comment_content":"åŸºäºä¸´æ—¶è¡¨çš„æ”¹è¿›æ–¹æ¡ˆï¼Œå¯¹äºèƒ½å¤Ÿæå‰è¿‡æ»¤å‡ºå°æ•°æ®çš„ join è¯­å¥æ¥è¯´ï¼Œæ•ˆæœè¿˜æ˜¯å¾ˆå¥½çš„ï¼›<br>--&gt;å¯ä»¥å½“æˆå­æŸ¥è¯¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":81636,"user_name":"å•Šå•Šå•Šå“¦å“¦","can_delete":false,"product_type":"c1","uid":1309877,"ip_address":"","ucode":"68C7153ECAAC57","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/RNO4yZyBvic914hewmNNE8iblYDcfv5yGHZ9OnKuCuZXNmGR0F5qV3icKLT2xpMt66GyEpicZVvrmz8A6TIqt92MQg/132","comment_is_top":false,"comment_ctime":1553992998,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1553992998","product_id":100020801,"comment_content":"é—®é¢˜ä¸€ mrrç®—æ³• ä¼šå¯¼è‡´è¿”å›çš„æ•°æ® é¡ºåºä¸Šä¸ä¸€æ ·å—ã€‚  æ¯”å¦‚ã€‚æœ¬æ¥idç­‰äº3çš„æ’åœ¨ç¬¬ä¸€æ¡ã€‚idç­‰äº1çš„æ’åœ¨ç¬¬äºŒæ¡ã€‚ ä¼˜åŒ–åè¿”å›çš„åˆ—è¡¨é¡ºåºæ˜¯å¦ä¼šå¯¹è°ƒ<br>é—®é¢˜äºŒã€‚select * from a left join b on a.c =b.<br>c  limit 10ã€‚cå­—æ®µæ— ç´¢å¼•ã€‚   è¿™ç§joinçš„è¯­å¥å‡è®¾aæ˜¯å°è¡¨ã€‚  æ‰§è¡Œè¯­å¥æ˜¯å¦æ˜¯a è¡¨è¦æ‰§è¡Œå…¨è¡¨æ‰«æ<br>ç„¶åã€‚bè¡¨åªè¦æ‰«æè¿‡ç¨‹ä¸­åªè¦æ‰¾åˆ°10æ¡å°±ç«‹å³ç»ˆäºã€‚ ç±»ä¼¼çš„å¦‚æœè¦è¿ã€‚ æ¯”å¦‚5å¼ è¡¨ã€‚ æ˜¯å¦è¦æ­£å¸¸æ‰§è¡Œå®Œå‰4æ¬¡è¡¨çš„æœç´¢ç„¶åã€‚åœ¨ç¬¬5å¼ çš„æ—¶å€™æ‰¾åˆ°å¯¹åº”limit çš„æ—¶å€™ç«‹åˆ»ç»ˆæ­¢ã€‚  æ–‡ç« ä¸­å¹¶æ²¡æœ‰ limitçš„æƒ…å†µã€‚æ‰€ä»¥æƒ³é—®ä¸‹","like_count":0,"discussions":[{"author":{"id":1185046,"avatar":"https://static001.geekbang.org/account/avatar/00/12/15/16/0aae41a1.jpg","nickname":"no13bus","note":"","ucode":"69FA1A719DA4F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21408,"discussion_content":"explainäº†ä¸‹ï¼Œå‘ç°è¡¨aå’Œè¡¨bæ‰«æçš„è¡Œæ•°å’Œæ²¡limitçš„æƒ…å†µæ˜¯ä¸€æ ·çš„ã€‚åº”è¯¥æ˜¯selectç»“æŸåï¼Œä»ç»“æœé›†é‡Œé¢limit 10æ¡å‡ºæ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569479787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76533,"user_name":"å¤©ä½¿æ¢¦æ³ª","can_delete":false,"product_type":"c1","uid":1235750,"ip_address":"","ucode":"782991747DD424","user_header":"https://static001.geekbang.org/account/avatar/00/12/db/26/3c8d68fb.jpg","comment_is_top":false,"comment_ctime":1552628848,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552628848","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸ªé—®é¢˜ï¼Œå¯ä»¥ç»™è®²ä¸‹left joinå’Œinner joinçš„ä¸»è¦åŒºåˆ«å—ï¼Ÿæ•°æ®é‡å¾ˆå¤§æ—¶åœ¨é©±åŠ¨è¡¨å’Œæ€§èƒ½æ–¹é¢çš„ä¸åŒã€‚","like_count":0},{"had_liked":false,"id":72875,"user_name":"å°å¾","can_delete":false,"product_type":"c1","uid":1303757,"ip_address":"","ucode":"522B5CD3732313","user_header":"https://static001.geekbang.org/account/avatar/00/13/e4/cd/fc140973.jpg","comment_is_top":false,"comment_ctime":1551749660,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1551749660","product_id":100020801,"comment_content":"With MRR, the scan is broken up into multiple ranges, each for a single value of key_part1 (1000,<br>1001, ... , 1999). Each of these scans need look only for tuples with key_part2 = 10000. If the index<br>contains many tuples for which key_part2 is not 10000, MRR results in many fewer index tuples<br>being read.<br>æ„Ÿè§‰è¿™ä¸ªICPåŠŸèƒ½äº†ï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":71630,"user_name":"immortalCockroach","can_delete":false,"product_type":"c1","uid":1157912,"ip_address":"","ucode":"9A4F497BEA7DFB","user_header":"https://static001.geekbang.org/account/avatar/00/11/ab/18/b01e71d1.jpg","comment_is_top":false,"comment_ctime":1551403005,"is_pvip":false,"replies":[{"id":"25738","content":"ç»†è‡´<br>å°±æ˜¯æ•…æ„è®¾è®¡æˆé€’å¢çš„^_^<br>mrrçš„è¿‡ç¨‹ä¸­ä¼šå¯¹idåšæ’åºï¼Œä½“ç°è¿™ä¸ªä¼˜åŒ–çš„ä½œç”¨","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1551404943,"ip_address":"","comment_id":71630,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1551403005","product_id":100020801,"comment_content":"åœ¨MRRä¼˜åŒ–é‚£æ®µï¼Œè¿™ä¸ªä¾‹å­ä¸­aæ˜¯é€’å¢ï¼Œå¯¹åº”idåˆ—æ˜¯é€’å‡ï¼Œåˆšå¥½å’Œidé€’å¢ç›¸åï¼Œé‚£è¿™æ ·éš¾é“ä¸èƒ½â€œé€†åºâ€é¡ºåºç£ç›˜è¯»å—ï¼Ÿè°¢è°¢è€å¸ˆ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441243,"discussion_content":"ç»†è‡´\nå°±æ˜¯æ•…æ„è®¾è®¡æˆé€’å¢çš„^_^\nmrrçš„è¿‡ç¨‹ä¸­ä¼šå¯¹idåšæ’åºï¼Œä½“ç°è¿™ä¸ªä¼˜åŒ–çš„ä½œç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551404943,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1148537,"avatar":"https://static001.geekbang.org/account/avatar/00/11/86/79/28fcafa6.jpg","nickname":"èƒ¡çº¢ä¼Ÿî”«","note":"","ucode":"33F12A97311F63","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":279419,"discussion_content":"mysqlå¹¶ä¸çŸ¥é“æŸ¥å‡ºæ¥çš„idæ˜¯ä»€ä¹ˆé¡ºåº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591342921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":71456,"user_name":"ghostjia","can_delete":false,"product_type":"c1","uid":1109757,"ip_address":"","ucode":"61BF8E6903EE85","user_header":"https://static001.geekbang.org/account/avatar/00/10/ee/fd/a29a201f.jpg","comment_is_top":false,"comment_ctime":1551345593,"is_pvip":false,"replies":[{"id":"25552","content":"çœ‹ä½ è¿™ä¸ªæŸ¥è¯¢ï¼Œ ç¬¬ä¸€ä¸ªè¡¨æ»¡è¶³æ¡ä»¶çš„æœ‰37278æ¡å‘¢ã€‚ã€‚<br>å•è¡¨è‡ªå·±æŸ¥æ˜¯å¿«çš„ï¼Œä½†æ˜¯ç¬¬äºŒä¸ªè¯­å¥æ˜¯è¦åš37278æ¬¡ä¸»é”®æŸ¥è¯¢","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1551350665,"ip_address":"","comment_id":71456,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551345593","product_id":100020801,"comment_content":"é‡åˆ°ä¸€ç§æƒ…å†µ å•è¡¨sum å¾ˆå¿«ï¼Œå½“æ—¶å’Œä¸€å¼ å¤§è¡¨join æ—¶å°±å¾ˆæ…¢ï¼Œæ±‚è§£å†³æ€è·¯ï¼š<br> SELECT rp.products_id AS ProductsId, sum( rp.products_quantity) AS saleCount FROM test_orders_products AS rp  WHERE  rp.products_id = 740818 ;<br>+------------+-----------+<br>| ProductsId | saleCount |<br>+------------+-----------+<br>|     740818 |     20772 |<br>+------------+-----------+<br>1 row in set (0.01 sec)<br><br><br><br>ä½†æ˜¯å’Œä¸€å¼ å¤§è¡¨åšjoin,æ•°æ®å°±å‡ºä¸æ¥ã€‚<br>mysql&gt; desc SELECT rp.products_id AS ProductsId, sum( rp.products_quantity) AS saleCount FROM test_orders_products AS rp  JOIN test_orders as r ON rp.orders_id = r.orders_id WHERE  rp.products_id = 740818 ;<br>+----+-------------+-------+--------+------------------------------------------------------------+----------+---------+--------------------------------+-------+-------------+<br>| id | select_type | table | type   | possible_keys                                              | key      | key_len | ref                            | rows  | Extra       |<br>+----+-------------+-------+--------+------------------------------------------------------------+----------+---------+--------------------------------+-------+-------------+<br>|  1 | SIMPLE      | rp    | ref    | idx_orders_id_prod_id_zen,idx_orders_products_pid,idx_test | idx_test | 4       | const                          | 37278 |             |<br>|  1 | SIMPLE      | r     | eq_ref | PRIMARY                                                    | PRIMARY  | 4       | litb_inbox_master.rp.orders_id |     1 | Using index |<br>+----+-------------+-------+--------+------------------------------------------------------------+----------+---------+--------------------------------+-------+-------------+<br>2 rows in set (0.00 sec)<br>é—®é¢˜æ˜¯ä¹Ÿèµ°äº†è¢«é©±åŠ¨è¡¨çš„primary keyäº†ã€‚ è¿˜æ˜¯ä¼šæ…¢ã€‚<br>æ±‚è§£å†³æ€è·¯ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441162,"discussion_content":"çœ‹ä½ è¿™ä¸ªæŸ¥è¯¢ï¼Œ ç¬¬ä¸€ä¸ªè¡¨æ»¡è¶³æ¡ä»¶çš„æœ‰37278æ¡å‘¢ã€‚ã€‚\nå•è¡¨è‡ªå·±æŸ¥æ˜¯å¿«çš„ï¼Œä½†æ˜¯ç¬¬äºŒä¸ªè¯­å¥æ˜¯è¦åš37278æ¬¡ä¸»é”®æŸ¥è¯¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551350665,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":70450,"user_name":"super blue cat","can_delete":false,"product_type":"c1","uid":1078411,"ip_address":"","ucode":"27DBB28EF19AB3","user_header":"https://static001.geekbang.org/account/avatar/00/10/74/8b/840afbd8.jpg","comment_is_top":false,"comment_ctime":1551100386,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1551100386","product_id":100020801,"comment_content":"ä¸ºä»€ä¹ˆIdå¢åºæ‰æ¯”è¾ƒæ¥è¿‘é¡ºåºè¯»å‘¢ï¼Ÿ åŸå› æ˜¯ç£ç›˜æ‰«æ•°æ®æ˜¯å•å‘çš„å—ï¼ŸğŸ§","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":181231,"discussion_content":"B+TREEè§„åˆ™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582349131,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329151,"discussion_content":"é€†åºæ•°æ®åœ¨æ–‡ä»¶æœ«ç«¯ï¼Œè¯»å–ä»–å‰é¢çš„æ•°æ®å¶ç£ç›˜è¦å†è½¬ä¸€åœˆæ‰å¯ä»¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606319006,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":181231,"ip_address":""},"score":329151,"extra":""}]}]},{"had_liked":false,"id":65031,"user_name":"dzkk","can_delete":false,"product_type":"c1","uid":1301932,"ip_address":"","ucode":"A81EFDB1D43C0D","user_header":"https://static001.geekbang.org/account/avatar/00/13/dd/ac/f40bbd15.jpg","comment_is_top":false,"comment_ctime":1549007480,"is_pvip":false,"replies":[{"id":"23070","content":"æœªçŸ¥æ•ˆæœé€‰æ‹© æ˜¯å•¥æ„æ€^_^","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1549038976,"ip_address":"","comment_id":65031,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1549007480","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå¯¹äºå…³è”æŸ¥è¯¢ï¼ˆinner joinï¼‰ï¼Œä¸ªäººæœ‰å‡ ç‚¹ç†è§£ï¼Œè¯·å¸®åŠ©å®¡æ ¸æ˜¯å¦æ­£ç¡®ï¼Œè°¢äº†ã€‚<br>æ­£ç¡®é€‰æ‹©ï¼š<br>    ç»“æœé›†å°çš„ä¸ºé©±åŠ¨è¡¨ï¼Œä¸”è¢«é©±åŠ¨è¡¨æœ‰ç´¢å¼•<br>æœªçŸ¥æ•ˆæœé€‰æ‹©ï¼š<br>    1ï¼‰ç»“æœé›†å°çš„ä¸ºé©±åŠ¨è¡¨ï¼Œä½†æ˜¯è¢«é©±åŠ¨è¡¨æ²¡æœ‰ç´¢å¼•<br>    2ï¼‰ç»“æœé›†å¤§çš„ä¸ºé©±åŠ¨è¡¨ï¼Œä½†æ˜¯è¢«é©±åŠ¨è¡¨æœ‰ç´¢å¼•<br>æœ€å·®é€‰æ‹©ï¼š<br>    ç»“æœé›†å¤§çš„ä¸ºé©±åŠ¨è¡¨ï¼Œä¸”è¢«é©±åŠ¨è¡¨æ²¡æœ‰ç´¢å¼•<br>","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438286,"discussion_content":"æœªçŸ¥æ•ˆæœé€‰æ‹© æ˜¯å•¥æ„æ€^_^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549038976,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":64998,"user_name":"è¯»ä¹¦çœ‹æŠ¥","can_delete":false,"product_type":"c1","uid":1306147,"ip_address":"","ucode":"3B4717314B52A9","user_header":"https://static001.geekbang.org/account/avatar/00/13/ee/23/b92b0811.jpg","comment_is_top":false,"comment_ctime":1548994787,"is_pvip":false,"replies":[{"id":"23025","content":"è¿™ä¸ªä¿¡æ¯å¤ªä¸è¶³äº†ğŸ˜…<br>æˆ‘ç¬¬ä¸€æ—¶é—´ååº”æ˜¯ä¸æ˜¯æœ‰limitï¼Ÿ<br><br>ä½ ç»™è´´ä¸€ä¸‹è¡¨ç»“æ„ï¼Œ<br>sqlè¯­å¥ï¼Œè¿˜æœ‰explainè¿™ä¸ªè¯­å¥çš„ç»“æœğŸ˜†ï¼Œæˆ‘ä»¬å†æ¥åˆ†æä¸‹å“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1549003437,"ip_address":"","comment_id":64998,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1548994787","product_id":100020801,"comment_content":"YEAR(txsj) = &#39;2018&#39; æœ‰ç»“æœé›†ï¼ŒYEAR(txsj) = &#39;2019&#39; æ— ç»“æœé›†ï¼Œ<br>YEAR(txsj) = &#39;2018&#39; å’Œ YEAR(txsj) = &#39;2019&#39; æŸ¥è¯¢æ‰€éœ€æ—¶é—´ åè€…æ˜¯å‰è€…çš„10å€<br>è¯·è€å¸ˆåˆ†æä¸‹å¤§æ¦‚ä»€ä¹ˆåŸå› ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438266,"discussion_content":"è¿™ä¸ªä¿¡æ¯å¤ªä¸è¶³äº†ğŸ˜…\næˆ‘ç¬¬ä¸€æ—¶é—´ååº”æ˜¯ä¸æ˜¯æœ‰limitï¼Ÿ\n\nä½ ç»™è´´ä¸€ä¸‹è¡¨ç»“æ„ï¼Œ\nsqlè¯­å¥ï¼Œè¿˜æœ‰explainè¿™ä¸ªè¯­å¥çš„ç»“æœğŸ˜†ï¼Œæˆ‘ä»¬å†æ¥åˆ†æä¸‹å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549003437,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":64966,"user_name":"åº“æ·˜æ·˜","can_delete":false,"product_type":"c1","uid":1310240,"ip_address":"","ucode":"90813B0C46E978","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqibSwKPg7hiapc49qoM4dibhM3fYANPjfltF2ibBZ3dHX2hibjg5EIIcziahrmjO5R2XrcRibvU39TQS7jg/132","comment_is_top":false,"comment_ctime":1548987265,"is_pvip":false,"replies":[{"id":"23013","content":"å•¥æ„æ€ï¼Œè¯­å¥å†™2000ï¼Œè¿˜æ˜¯è¦å–2000è¡Œçš„å‘€","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548989560,"ip_address":"","comment_id":64966,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1548987265","product_id":100020801,"comment_content":"select * from t2 where b&gt;=1 and b&lt;=2000; è¿™ä¸ªbå–1000ä¸å°±è¡Œäº†ï¼Œä¸ºä½•2000æ²¡çœ‹æ‡‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438255,"discussion_content":"å•¥æ„æ€ï¼Œè¯­å¥å†™2000ï¼Œè¿˜æ˜¯è¦å–2000è¡Œçš„å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548989560,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":64953,"user_name":"ä¹¦ç­–ç¨ æµŠ","can_delete":false,"product_type":"c1","uid":1307497,"ip_address":"","ucode":"A29875CE15FDA3","user_header":"https://static001.geekbang.org/account/avatar/00/13/f3/69/7039d03f.jpg","comment_is_top":false,"comment_ctime":1548984141,"is_pvip":false,"replies":[{"id":"23011","content":"å®è·µéªŒè¯ä¸€ä¸‹å“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548987139,"ip_address":"","comment_id":64953,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1548984141","product_id":100020801,"comment_content":"æœ‰ç‚¹è®°ä¸æ¸…æ¥šã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438248,"discussion_content":"å®è·µéªŒè¯ä¸€ä¸‹å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548987139,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}