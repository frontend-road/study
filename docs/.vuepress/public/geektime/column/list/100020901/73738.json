{"id":73738,"title":"14 | ç­”ç–‘ï¼ˆäºŒï¼‰ï¼šå¦‚ä½•ç”¨perfå·¥å…·åˆ†æJavaç¨‹åºï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å€ªæœ‹é£ã€‚</p><p>ä»Šå¤©æ˜¯æˆ‘ä»¬ç¬¬äºŒæœŸç­”ç–‘ï¼Œè¿™æœŸç­”ç–‘çš„ä¸»é¢˜æ˜¯æˆ‘ä»¬å¤šæ¬¡ç”¨åˆ°çš„perfå·¥å…·ï¼Œå†…å®¹ä¸»è¦åŒ…æ‹¬å‰é¢æ¡ˆä¾‹ä¸­ï¼Œ perf ä½¿ç”¨æ–¹æ³•çš„å„ç§ç–‘é—®ã€‚</p><p>perf åœ¨æ€§èƒ½åˆ†æä¸­éå¸¸æœ‰æ•ˆï¼Œæ˜¯æˆ‘ä»¬æ¯ä¸ªäººéƒ½éœ€è¦æŒæ¡çš„æ ¸å¿ƒå·¥å…·ã€‚perf çš„ä½¿ç”¨æ–¹æ³•ä¹Ÿå¾ˆä¸°å¯Œï¼Œä¸è¿‡ä¸ç”¨æ‹…å¿ƒï¼Œç›®å‰ä½ åªè¦ä¼šç”¨ perf record å’Œ perf report å°±å¤Ÿäº†ã€‚è€Œå¯¹äº perf æ˜¾ç¤ºçš„è°ƒç”¨æ ˆä¸­çš„æŸäº›å†…æ ¸ç¬¦å·ï¼Œå¦‚æœä½ ä¸ç†è§£ä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œå¯ä»¥æš‚æ—¶è·³è¿‡ï¼Œå¹¶ä¸å½±å“æˆ‘ä»¬çš„åˆ†æã€‚</p><p>åŒæ ·çš„ï¼Œä¸ºäº†ä¾¿äºä½ å­¦ä¹ ç†è§£ï¼Œå®ƒä»¬å¹¶ä¸æ˜¯ä¸¥æ ¼æŒ‰ç…§æ–‡ç« é¡ºåºæ’åˆ—çš„ï¼Œå¦‚æœä½ éœ€è¦å›é¡¾å†…å®¹åŸæ–‡ï¼Œå¯ä»¥æ‰«ææ¯ä¸ªé—®é¢˜å³ä¸‹æ–¹çš„äºŒç»´ç æŸ¥çœ‹ã€‚</p><h2>é—®é¢˜ 1ï¼š ä½¿ç”¨ perf å·¥å…·æ—¶ï¼Œçœ‹åˆ°çš„æ˜¯16è¿›åˆ¶åœ°å€è€Œä¸æ˜¯å‡½æ•°å</h2><p><img src=\"https://static001.geekbang.org/resource/image/94/69/94f67501d5be157a25a26d852b8c2869.png?wh=750*1782\" alt=\"\"></p><p>è¿™ä¹Ÿæ˜¯ç•™è¨€æ¯”è¾ƒå¤šçš„ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨ CentOS ç³»ç»Ÿä¸­ï¼Œä½¿ç”¨ perf å·¥å…·çœ‹ä¸åˆ°å‡½æ•°åï¼Œåªèƒ½çœ‹åˆ°ä¸€äº›16è¿›åˆ¶æ ¼å¼çš„å‡½æ•°åœ°å€ã€‚</p><p>å…¶å®ï¼Œåªè¦ä½ è§‚å¯Ÿä¸€ä¸‹perfç•Œé¢æœ€ä¸‹é¢çš„é‚£ä¸€è¡Œï¼Œå°±ä¼šå‘ç°ä¸€ä¸ªè­¦å‘Šä¿¡æ¯ï¼š</p><pre><code>Failed to open /opt/bitnami/php/lib/php/extensions/opcache.so, continuing without symbols\n</code></pre><p>è¿™è¯´æ˜ï¼Œperf æ‰¾ä¸åˆ°å¾…åˆ†æè¿›ç¨‹ä¾èµ–çš„åº“ã€‚å½“ç„¶ï¼Œå®é™…ä¸Šè¿™ä¸ªæ¡ˆä¾‹ä¸­æœ‰å¾ˆå¤šä¾èµ–åº“éƒ½æ‰¾ä¸åˆ°ï¼Œåªä¸è¿‡ï¼Œperfå·¥å…·æœ¬èº«åªåœ¨æœ€åä¸€è¡Œæ˜¾ç¤ºè­¦å‘Šä¿¡æ¯ï¼Œæ‰€ä»¥ä½ åªèƒ½çœ‹åˆ°è¿™ä¸€æ¡è­¦å‘Šã€‚</p><p>è¿™ä¸ªé—®é¢˜ï¼Œå…¶å®ä¹Ÿæ˜¯åœ¨åˆ†æDockerå®¹å™¨åº”ç”¨æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸ç¢°åˆ°çš„ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºå®¹å™¨åº”ç”¨ä¾èµ–çš„åº“éƒ½åœ¨é•œåƒé‡Œé¢ã€‚</p><!-- [[[read_end]]] --><p>é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘æ€»ç»“äº†ä¸‹é¢<strong>å››ä¸ªè§£å†³æ–¹æ³•</strong>ã€‚</p><p><strong>ç¬¬ä¸€ä¸ªæ–¹æ³•ï¼Œåœ¨å®¹å™¨å¤–é¢æ„å»ºç›¸åŒè·¯å¾„çš„ä¾èµ–åº“</strong>ã€‚è¿™ç§æ–¹æ³•ä»åŸç†ä¸Šå¯è¡Œï¼Œä½†æ˜¯æˆ‘å¹¶ä¸æ¨èï¼Œä¸€æ–¹é¢æ˜¯å› ä¸ºæ‰¾å‡ºè¿™äº›ä¾èµ–åº“æ¯”è¾ƒéº»çƒ¦ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œæ„å»ºè¿™äº›è·¯å¾„ï¼Œä¼šæ±¡æŸ“å®¹å™¨ä¸»æœºçš„ç¯å¢ƒã€‚</p><p><strong>ç¬¬äºŒä¸ªæ–¹æ³•ï¼Œåœ¨å®¹å™¨å†…éƒ¨è¿è¡Œ perf</strong>ã€‚ä¸è¿‡ï¼Œè¿™éœ€è¦å®¹å™¨è¿è¡Œåœ¨ç‰¹æƒæ¨¡å¼ä¸‹ï¼Œä½†å®é™…çš„åº”ç”¨ç¨‹åºå¾€å¾€åªä»¥æ™®é€šå®¹å™¨çš„æ–¹å¼è¿è¡Œã€‚æ‰€ä»¥ï¼Œå®¹å™¨å†…éƒ¨ä¸€èˆ¬æ²¡æœ‰æƒé™æ‰§è¡Œ perf åˆ†æã€‚</p><p>æ¯”æ–¹è¯´ï¼Œå¦‚æœä½ åœ¨æ™®é€šå®¹å™¨å†…éƒ¨è¿è¡Œ perf record ï¼Œä½ å°†ä¼šçœ‹åˆ°ä¸‹é¢è¿™ä¸ªé”™è¯¯æç¤ºï¼š</p><pre><code>$ perf_4.9 record -a -g\nperf_event_open(..., PERF_FLAG_FD_CLOEXEC) failed with unexpected error 1 (Operation not permitted)\nperf_event_open(..., 0) failed unexpectedly with error 1 (Operation not permitted)\n</code></pre><p>å½“ç„¶ï¼Œå…¶å®ä½ è¿˜å¯ä»¥é€šè¿‡é…ç½® /proc/sys/kernel/perf_event_paranoid ï¼ˆæ¯”å¦‚æ”¹æˆ-1ï¼‰ï¼Œæ¥å…è®¸éç‰¹æƒç”¨æˆ·æ‰§è¡Œ perf äº‹ä»¶åˆ†æã€‚</p><p>ä¸è¿‡è¿˜æ˜¯é‚£å¥è¯ï¼Œä¸ºäº†å®‰å…¨èµ·è§ï¼Œè¿™ç§æ–¹æ³•æˆ‘ä¹Ÿä¸æ¨èã€‚</p><p><strong>ç¬¬ä¸‰ä¸ªæ–¹æ³•ï¼ŒæŒ‡å®šç¬¦å·è·¯å¾„ä¸ºå®¹å™¨æ–‡ä»¶ç³»ç»Ÿçš„è·¯å¾„</strong>ã€‚æ¯”å¦‚å¯¹äºç¬¬05è®²çš„åº”ç”¨ï¼Œä½ å¯ä»¥æ‰§è¡Œä¸‹é¢è¿™ä¸ªå‘½ä»¤ï¼š</p><pre><code>$ mkdir /tmp/foo\n$ PID=$(docker inspect --format {{.State.Pid}} phpfpm)\n$ bindfs /proc/$PID/root /tmp/foo\n$ perf report --symfs /tmp/foo\n\n# ä½¿ç”¨å®Œæˆåä¸è¦å¿˜è®°è§£é™¤ç»‘å®š\n$ umount /tmp/foo/\n</code></pre><p>ä¸è¿‡è¿™é‡Œè¦æ³¨æ„ï¼Œbindfs è¿™ä¸ªå·¥å…·éœ€è¦ä½ é¢å¤–å®‰è£…ã€‚bindfs çš„åŸºæœ¬åŠŸèƒ½æ˜¯å®ç°ç›®å½•ç»‘å®šï¼ˆç±»ä¼¼äº mount --bindï¼‰ï¼Œè¿™é‡Œéœ€è¦ä½ å®‰è£…çš„æ˜¯ 1.13.10 ç‰ˆæœ¬ï¼ˆè¿™ä¹Ÿæ˜¯å®ƒçš„æœ€æ–°å‘å¸ƒç‰ˆï¼‰ã€‚</p><p>å¦‚æœä½ å®‰è£…çš„æ˜¯æ—§ç‰ˆæœ¬ï¼Œä½ å¯ä»¥åˆ° <a href=\"https://github.com/mpartel/bindfs\">GitHub</a>ä¸Šé¢ä¸‹è½½æºç ï¼Œç„¶åç¼–è¯‘å®‰è£…ã€‚</p><p><strong>ç¬¬å››ä¸ªæ–¹æ³•ï¼Œåœ¨å®¹å™¨å¤–é¢æŠŠåˆ†æçºªå½•ä¿å­˜ä¸‹æ¥ï¼Œå†å»å®¹å™¨é‡ŒæŸ¥çœ‹ç»“æœ</strong>ã€‚è¿™æ ·ï¼Œåº“å’Œç¬¦å·çš„è·¯å¾„ä¹Ÿå°±éƒ½å¯¹äº†ã€‚</p><p>æ¯”å¦‚ï¼Œä½ å¯ä»¥è¿™ä¹ˆåšã€‚å…ˆè¿è¡Œ perf record -g -p &lt; pid&gt;ï¼Œæ‰§è¡Œä¸€ä¼šå„¿ï¼ˆæ¯”å¦‚15ç§’ï¼‰åï¼ŒæŒ‰Ctrl+Cåœæ­¢ã€‚</p><p>ç„¶åï¼ŒæŠŠç”Ÿæˆçš„ perf.data æ–‡ä»¶ï¼Œæ‹·è´åˆ°å®¹å™¨é‡Œé¢æ¥åˆ†æï¼š</p><pre><code>$ docker cp perf.data phpfpm:/tmp \n$ docker exec -i -t phpfpm bash\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œåœ¨å®¹å™¨çš„ bash ä¸­ç»§ç»­è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå®‰è£… perf å¹¶ä½¿ç”¨ perf report æŸ¥çœ‹æŠ¥å‘Šï¼š</p><pre><code>$ cd /tmp/ \n$ apt-get update &amp;&amp; apt-get install -y linux-tools linux-perf procps\n$ perf_4.9 report\n</code></pre><p>ä¸è¿‡ï¼Œè¿™é‡Œä¹Ÿæœ‰ä¸¤ç‚¹éœ€è¦ä½ æ³¨æ„ã€‚</p><p>é¦–å…ˆæ˜¯perfå·¥å…·çš„ç‰ˆæœ¬é—®é¢˜ã€‚åœ¨æœ€åä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬è¿è¡Œçš„å·¥å…·æ˜¯å®¹å™¨å†…éƒ¨å®‰è£…çš„ç‰ˆæœ¬ perf_4.9ï¼Œè€Œä¸æ˜¯æ™®é€šçš„ perf å‘½ä»¤ã€‚è¿™æ˜¯å› ä¸ºï¼Œ perf å‘½ä»¤å®é™…ä¸Šæ˜¯ä¸€ä¸ªè½¯è¿æ¥ï¼Œä¼šè·Ÿå†…æ ¸çš„ç‰ˆæœ¬è¿›è¡ŒåŒ¹é…ï¼Œä½†é•œåƒé‡Œå®‰è£…çš„perfç‰ˆæœ¬è·Ÿè™šæ‹Ÿæœºçš„å†…æ ¸ç‰ˆæœ¬æœ‰å¯èƒ½å¹¶ä¸ä¸€è‡´ã€‚</p><p>å¦å¤–ï¼Œphp-fpm é•œåƒæ˜¯åŸºäº Debian ç³»ç»Ÿçš„ï¼Œæ‰€ä»¥å®‰è£… perf å·¥å…·çš„å‘½ä»¤ï¼Œè·Ÿ Ubuntu ä¹Ÿå¹¶ä¸å®Œå…¨ä¸€æ ·ã€‚æ¯”å¦‚ï¼Œ Ubuntu ä¸Šçš„å®‰è£…æ–¹æ³•æ˜¯ä¸‹é¢è¿™æ ·ï¼š</p><pre><code>$ apt-get install -y linux-tools-common linux-tools-generic linux-tools-$(uname -r)ï¼‰\n</code></pre><p>è€Œåœ¨ php-fpm å®¹å™¨é‡Œï¼Œä½ åº”è¯¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ¥å®‰è£… perfï¼š</p><pre><code>$ apt-get install -y linux-perf\n</code></pre><p>å½“ä½ æŒ‰ç…§å‰é¢è¿™å‡ ç§æ–¹æ³•æ“ä½œåï¼Œä½ å°±å¯ä»¥åœ¨å®¹å™¨å†…éƒ¨çœ‹åˆ° sqrt çš„å †æ ˆï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/76/af/76f8d0f36210001e750b0a82026dedaf.png?wh=696*459\" alt=\"\"></p><p>äº‹å®ä¸Šï¼ŒæŠ›å¼€æˆ‘ä»¬çš„æ¡ˆä¾‹æ¥è¯´ï¼Œå³ä½¿æ˜¯åœ¨éå®¹å™¨åŒ–çš„åº”ç”¨ä¸­ï¼Œä½ ä¹Ÿå¯èƒ½ä¼šç¢°åˆ°è¿™ä¸ªé—®é¢˜ã€‚å‡å¦‚ä½ çš„åº”ç”¨ç¨‹åºåœ¨ç¼–è¯‘æ—¶ï¼Œä½¿ç”¨ strip åˆ é™¤äº†ELFäºŒè¿›åˆ¶æ–‡ä»¶çš„ç¬¦å·è¡¨ï¼Œé‚£ä¹ˆä½ åŒæ ·ä¹Ÿåªèƒ½çœ‹åˆ°å‡½æ•°çš„åœ°å€ã€‚</p><p>ç°åœ¨çš„ç£ç›˜ç©ºé—´ï¼Œå…¶å®å·²ç»è¶³å¤Ÿå¤§äº†ã€‚ä¿ç•™è¿™äº›ç¬¦å·ï¼Œè™½ç„¶ä¼šå¯¼è‡´ç¼–è¯‘åçš„æ–‡ä»¶å˜å¤§ï¼Œä½†å¯¹æ•´ä¸ªç£ç›˜ç©ºé—´æ¥è¯´å·²ç»ä¸æ˜¯ä»€ä¹ˆå¤§é—®é¢˜ã€‚æ‰€ä»¥ä¸ºäº†è°ƒè¯•çš„æ–¹ä¾¿ï¼Œå»ºè®®ä½ è¿˜æ˜¯æŠŠå®ƒä»¬ä¿ç•™ç€ã€‚</p><p>é¡ºä¾¿æä¸€ä¸‹ï¼Œæ¡ˆä¾‹ä¸­å„ç§å·¥å…·çš„å®‰è£…æ–¹æ³•ï¼Œå¯ä»¥ç®—æ˜¯æˆ‘ä»¬ä¸“æ å­¦ä¹ çš„åŸºæœ¬åŠŸï¼Œè¿™ä¸€ç‚¹å¸Œæœ›ä½ èƒ½å¤Ÿç†Ÿæ‚‰å¹¶æŒæ¡ã€‚è¿˜æ˜¯é‚£å¥è¯ï¼Œä¸ä¼šå®‰è£…å…ˆæŸ¥æ–‡æ¡£ï¼Œè¿˜æ˜¯ä¸è¡Œå°±ä¸Šç½‘æœç´¢æˆ–è€…åœ¨æ–‡ç« é‡Œç•™è¨€æé—®ã€‚</p><p>åœ¨è¿™é‡Œä¹Ÿè¦è¡¨æ‰¬ä¸€ä¸‹ï¼Œå¾ˆå¤šåŒå­¦å·²ç»æŠŠæ‘¸ç´¢åˆ°çš„æ–¹æ³•åˆ†äº«åˆ°äº†ç•™è¨€ä¸­ã€‚è®°å½•å¹¶åˆ†äº«ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¹ æƒ¯ã€‚</p><h2>é—®é¢˜ 2ï¼šå¦‚ä½•ç”¨perfå·¥å…·åˆ†æJavaç¨‹åº</h2><p><img src=\"https://static001.geekbang.org/resource/image/1e/dc/1eb200e2a68da9a00b2ee009f3de94dc.png?wh=750*836\" alt=\"\"><img src=\"https://static001.geekbang.org/resource/image/97/6d/97f609aae409bd9840f606c1d9bc7e6d.jpg?wh=750*1162\" alt=\"\"></p><p>è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œå…¶å®æ˜¯ä¸Šä¸€ä¸ª perf é—®é¢˜çš„å»¶ä¼¸ã€‚ åƒæ˜¯Javaè¿™ç§é€šè¿‡ JVM æ¥è¿è¡Œçš„åº”ç”¨ç¨‹åºï¼Œè¿è¡Œå †æ ˆç”¨çš„éƒ½æ˜¯ JVM å†…ç½®çš„å‡½æ•°å’Œå †æ ˆç®¡ç†ã€‚æ‰€ä»¥ï¼Œä»ç³»ç»Ÿå±‚é¢ä½ åªèƒ½çœ‹åˆ°JVMçš„å‡½æ•°å †æ ˆï¼Œè€Œä¸èƒ½ç›´æ¥å¾—åˆ°Javaåº”ç”¨ç¨‹åºçš„å †æ ˆã€‚</p><p>perf_events å®é™…ä¸Šå·²ç»æ”¯æŒäº† JITï¼Œä½†è¿˜éœ€è¦ä¸€ä¸ª /tmp/perf-PID.mapæ–‡ä»¶ï¼Œæ¥è¿›è¡Œç¬¦å·ç¿»è¯‘ã€‚å½“ç„¶ï¼Œå¼€æºé¡¹ç›® <a href=\"https://github.com/jvm-profiling-tools/perf-map-agent\">perf-map-agent </a>å¯ä»¥å¸®ä½ ç”Ÿæˆè¿™ä¸ªç¬¦å·è¡¨ã€‚</p><p>æ­¤å¤–ï¼Œä¸ºäº†ç”Ÿæˆå…¨éƒ¨è°ƒç”¨æ ˆï¼Œä½ è¿˜éœ€è¦å¼€å¯JDKçš„é€‰é¡¹ -XX:+PreserveFramePointerã€‚å› ä¸ºè¿™é‡Œæ¶‰åŠåˆ°å¤§é‡çš„ Java çŸ¥è¯†ï¼Œæˆ‘å°±ä¸å†è¯¦ç»†å±•å¼€äº†ã€‚å¦‚æœä½ çš„åº”ç”¨åˆšå¥½åŸºäº Java ï¼Œé‚£ä¹ˆä½ å¯ä»¥å‚è€ƒ Netflix çš„æŠ€æœ¯åšå®¢ <a href=\"https://medium.com/netflix-techblog/java-in-flames-e763b3d32166\">Java in Flames</a> ï¼Œæ¥æŸ¥çœ‹è¯¦ç»†çš„ä½¿ç”¨æ­¥éª¤ã€‚</p><p>è¯´åˆ°è¿™é‡Œï¼Œæˆ‘ä¹Ÿæƒ³å¼ºè°ƒä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯å­¦ä¹ æ€§èƒ½ä¼˜åŒ–æ—¶ï¼Œä¸è¦ä¸€å¼€å§‹å°±æŠŠè‡ªå·±é™å®šåœ¨å…·ä½“çš„æŸä¸ªç¼–ç¨‹è¯­è¨€æˆ–è€…æ€§èƒ½å·¥å…·ä¸­ï¼Œçº ç»“äºè¯­è¨€æˆ–å·¥å…·çš„ç»†èŠ‚å‡ºä¸æ¥ã€‚</p><p>æŒæ¡æ•´ä½“çš„åˆ†ææ€è·¯ï¼Œæ‰æ˜¯æˆ‘ä»¬é¦–å…ˆè¦åšçš„ã€‚å› ä¸ºï¼Œæ€§èƒ½ä¼˜åŒ–çš„åŸç†å’Œæ€è·¯ï¼Œåœ¨ä»»ä½•ç¼–ç¨‹è¯­è¨€ä¸­éƒ½æ˜¯ç›¸é€šçš„ã€‚</p><h2>é—®é¢˜ 3ï¼šä¸ºä»€ä¹ˆ perf çš„æŠ¥å‘Šä¸­ï¼Œå¾ˆå¤šç¬¦å·éƒ½ä¸æ˜¾ç¤ºè°ƒç”¨æ ˆ</h2><p><img src=\"https://static001.geekbang.org/resource/image/49/05/4902af1ff4d710aa7cb150f44e3e3c05.png?wh=900*1092\" alt=\"\"></p><p>perf report æ˜¯ä¸€ä¸ªå¯è§†åŒ–å±•ç¤º perf.data çš„å·¥å…·ã€‚åœ¨ç¬¬ 08 è®²çš„æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ç›´æ¥ç»™å‡ºäº†æœ€ç»ˆç»“æœï¼Œå¹¶æ²¡æœ‰è¯¦ç»†ä»‹ç»å®ƒçš„å‚æ•°ã€‚ä¼°è®¡å¾ˆå¤šåŒå­¦çš„æœºå™¨åœ¨è¿è¡Œæ—¶ï¼Œéƒ½ç¢°åˆ°äº†è·Ÿè·¯è¿‡åŒå­¦ä¸€æ ·çš„é—®é¢˜ï¼Œçœ‹åˆ°çš„æ˜¯ä¸‹é¢è¿™ä¸ªç•Œé¢ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/33/e9/335d41ccf24d93aafe0e4d511218b6e9.png?wh=751*426\" alt=\"\"></p><p>è¿™ä¸ªç•Œé¢å¯ä»¥æ¸…æ¥šçœ‹åˆ°ï¼Œperf report çš„è¾“å‡ºä¸­ï¼Œåªæœ‰ swapper æ˜¾ç¤ºäº†è°ƒç”¨æ ˆï¼Œå…¶ä»–æ‰€æœ‰ç¬¦å·éƒ½ä¸èƒ½æŸ¥çœ‹å †æ ˆæƒ…å†µï¼ŒåŒ…æ‹¬æˆ‘ä»¬æ¡ˆä¾‹ä¸­çš„ app åº”ç”¨ã€‚</p><p>è¿™ç§æƒ…å†µæˆ‘ä»¬ä»¥å‰ä¹Ÿé‡åˆ°è¿‡ï¼Œå½“ä½ å‘ç°æ€§èƒ½å·¥å…·çš„è¾“å‡ºæ— æ³•ç†è§£æ—¶ï¼Œåº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿå½“ç„¶è¿˜æ˜¯æŸ¥å·¥å…·çš„æ‰‹å†Œã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥æ‰§è¡Œ man perf-report å‘½ä»¤ï¼Œæ‰¾åˆ° -g å‚æ•°çš„è¯´æ˜ï¼š</p><pre><code>-g, --call-graph=&lt;print_type,threshold[,print_limit],order,sort_key[,branch],value&gt; \n           Display call chains using type, min percent threshold, print limit, call order, sort key, optional branch and value. Note that \n           ordering is not fixed so any parameter can be given in an arbitrary order. One exception is the print_limit which should be \n           preceded by threshold. \n\n               print_type can be either: \n               - flat: single column, linear exposure of call chains. \n               - graph: use a graph tree, displaying absolute overhead rates. (default) \n               - fractal: like graph, but displays relative rates. Each branch of \n                        the tree is considered as a new profiled object. \n               - folded: call chains are displayed in a line, separated by semicolons \n               - none: disable call chain display. \n\n               threshold is a percentage value which specifies a minimum percent to be \n               included in the output call graph.  Default is 0.5 (%). \n\n               print_limit is only applied when stdio interface is used.  It's to limit \n               number of call graph entries in a single hist entry.  Note that it needs \n               to be given after threshold (but not necessarily consecutive). \n               Default is 0 (unlimited). \n\n               order can be either: \n               - callee: callee based call graph. \n               - caller: inverted caller based call graph. \n               Default is 'caller' when --children is used, otherwise 'callee'. \n\n               sort_key can be: \n               - function: compare on functions (default) \n               - address: compare on individual code addresses \n               - srcline: compare on source filename and line number \n\n               branch can be: \n               - branch: include last branch information in callgraph when available. \n                         Usually more convenient to use --branch-history for this. \n\n               value can be: \n               - percent: diplay overhead percent (default) \n               - period: display event period \n               - count: display event count\n</code></pre><p>é€šè¿‡è¿™ä¸ªè¯´æ˜å¯ä»¥çœ‹åˆ°ï¼Œ-g é€‰é¡¹ç­‰åŒäº --call-graphï¼Œå®ƒçš„å‚æ•°æ˜¯åé¢é‚£äº›è¢«é€—å·éš”å¼€çš„é€‰é¡¹ï¼Œæ„æ€åˆ†åˆ«æ˜¯è¾“å‡ºç±»å‹ã€æœ€å°é˜ˆå€¼ã€è¾“å‡ºé™åˆ¶ã€æ’åºæ–¹æ³•ã€æ’åºå…³é”®è¯ã€åˆ†æ”¯ä»¥åŠå€¼çš„ç±»å‹ã€‚</p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œé»˜è®¤çš„å‚æ•°æ˜¯ graph,0.5,caller,function,percentï¼Œå…·ä½“å«ä¹‰æ–‡æ¡£ä¸­éƒ½æœ‰è¯¦ç»†è®²è§£ï¼Œè¿™é‡Œæˆ‘å°±ä¸å†é‡å¤äº†ã€‚</p><p>ç°åœ¨å†å›è¿‡å¤´æ¥çœ‹æˆ‘ä»¬çš„é—®é¢˜ï¼Œå †æ ˆæ˜¾ç¤ºä¸å…¨ï¼Œç›¸å…³çš„å‚æ•°å½“ç„¶å°±æ˜¯æœ€å°é˜ˆå€¼ thresholdã€‚é€šè¿‡æ‰‹å†Œä¸­å¯¹thresholdçš„è¯´æ˜ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œå½“ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿæ¯”ä¾‹é«˜äºè¿™ä¸ªé˜ˆå€¼æ—¶ï¼Œå®ƒçš„è°ƒç”¨æ ˆæ‰ä¼šæ˜¾ç¤ºå‡ºæ¥ã€‚</p><p>threshold çš„é»˜è®¤å€¼ä¸º 0.5%ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œäº‹ä»¶æ¯”ä¾‹è¶…è¿‡ 0.5%æ—¶ï¼Œè°ƒç”¨æ ˆæ‰èƒ½è¢«æ˜¾ç¤ºã€‚å†è§‚å¯Ÿæˆ‘ä»¬æ¡ˆä¾‹åº”ç”¨ app çš„äº‹ä»¶æ¯”ä¾‹ï¼Œåªæœ‰ 0.34%ï¼Œä½äº 0.5%ï¼Œæ‰€ä»¥çœ‹ä¸åˆ° app çš„è°ƒç”¨æ ˆå°±å¾ˆæ­£å¸¸äº†ã€‚</p><p>è¿™ç§æƒ…å†µä¸‹ï¼Œä½ åªéœ€è¦ç»™ perf report è®¾ç½®ä¸€ä¸ªå°äº 0.34% çš„é˜ˆå€¼ï¼Œå°±å¯ä»¥æ˜¾ç¤ºæˆ‘ä»¬æƒ³çœ‹åˆ°çš„è°ƒç”¨å›¾äº†ã€‚æ¯”å¦‚æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><pre><code>$ perf report -g graph,0.3\n</code></pre><p>ä½ å°±å¯ä»¥å¾—åˆ°ä¸‹é¢è¿™ä¸ªæ–°çš„è¾“å‡ºç•Œé¢ï¼Œå±•å¼€ app åï¼Œå°±å¯ä»¥çœ‹åˆ°å®ƒçš„è°ƒç”¨æ ˆäº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/b3/93/b34f95617d13088671f4d9c2b9134693.png?wh=747*536\" alt=\"\"></p><h2>é—®é¢˜ 4ï¼šæ€ä¹ˆç†è§£ perf report æŠ¥å‘Š</h2><p><img src=\"https://static001.geekbang.org/resource/image/42/d8/42bf6b82da73656d6c3dad20074f57d8.png?wh=900*1050\" alt=\"\"><img src=\"https://static001.geekbang.org/resource/image/b9/8b/b90140f7d41790f74982d431f7e0238b.png?wh=750*1151\" alt=\"\"></p><p>çœ‹åˆ°è¿™é‡Œï¼Œæˆ‘ä¼°è®¡ä½ ä¹Ÿæ›¾å˜€å’•è¿‡ï¼Œä¸ºå•¥ä¸ä¸€ä¸Šæ¥å°±ç”¨ perf å·¥å…·è§£å†³ï¼Œè¿˜è¦æ‰§è¡Œé‚£ä¹ˆå¤šå…¶ä»–å·¥å…·å‘¢ï¼Ÿ è¿™ä¸ªé—®é¢˜å…¶å®å°±ç»™å‡ºäº†å¾ˆå¥½çš„è§£é‡Šã€‚</p><p>åœ¨é—®é¢˜4çš„perf report ç•Œé¢ä¸­ï¼Œä½ ä¹Ÿä¸€å®šæ³¨æ„åˆ°äº†ï¼Œ swapper é«˜è¾¾ 99% çš„æ¯”ä¾‹ã€‚ç›´è§‰æ¥è¯´ï¼Œæˆ‘ä»¬åº”è¯¥ç›´æ¥è§‚å¯Ÿå®ƒæ‰å¯¹ï¼Œä¸ºä»€ä¹ˆæ²¡é‚£ä¹ˆåšå‘¢ï¼Ÿ</p><p>å…¶å®ï¼Œå½“ä½ æ¸…æ¥šäº† swapper çš„åŸç†åï¼Œå°±å¾ˆå®¹æ˜“ç†è§£æˆ‘ä»¬ä¸ºä»€ä¹ˆå¯ä»¥å¿½ç•¥å®ƒäº†ã€‚</p><p>çœ‹åˆ°swapperï¼Œä½ å¯èƒ½é¦–å…ˆæƒ³åˆ°çš„æ˜¯SWAPåˆ†åŒºã€‚å®é™…ä¸Šï¼Œ swapper è·Ÿ SWAP æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œå®ƒåªåœ¨ç³»ç»Ÿåˆå§‹åŒ–æ—¶åˆ›å»º init è¿›ç¨‹ï¼Œä¹‹åï¼Œå®ƒå°±æˆäº†ä¸€ä¸ªæœ€ä½ä¼˜å…ˆçº§çš„ç©ºé—²ä»»åŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ CPU ä¸Šæ²¡æœ‰å…¶ä»–ä»»åŠ¡è¿è¡Œæ—¶ï¼Œå°±ä¼šæ‰§è¡Œswapper ã€‚æ‰€ä»¥ï¼Œä½ å¯ä»¥ç§°å®ƒä¸ºâ€œç©ºé—²ä»»åŠ¡â€ã€‚</p><p>å›åˆ°æˆ‘ä»¬çš„é—®é¢˜ï¼Œåœ¨ perf report çš„ç•Œé¢ä¸­ï¼Œå±•å¼€å®ƒçš„è°ƒç”¨æ ˆï¼Œä½ ä¼šçœ‹åˆ°ï¼Œ swapper æ—¶é’Ÿäº‹ä»¶éƒ½è€—è´¹åœ¨äº† do_idle ä¸Šï¼Œä¹Ÿå°±æ˜¯åœ¨æ‰§è¡Œç©ºé—²ä»»åŠ¡ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/12/bd/121dcefacba1b554accd0a90ef349fbd.png?wh=708*479\" alt=\"\"></p><p>æ‰€ä»¥ï¼Œåˆ†ææ¡ˆä¾‹æ—¶ï¼Œæˆ‘ä»¬ç›´æ¥å¿½ç•¥äº†å‰é¢è¿™ä¸ª 99% çš„ç¬¦å·ï¼Œè½¬è€Œåˆ†æåé¢åªæœ‰ 0.3% çš„ appã€‚å…¶å®ä»è¿™é‡Œä½ ä¹Ÿèƒ½ç†è§£ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸€å¼€å§‹ä¸å…ˆç”¨ perf åˆ†æã€‚</p><p>å› ä¸ºåœ¨å¤šä»»åŠ¡ç³»ç»Ÿä¸­ï¼Œæ¬¡æ•°å¤šçš„äº‹ä»¶ï¼Œä¸ä¸€å®šå°±æ˜¯æ€§èƒ½ç“¶é¢ˆã€‚æ‰€ä»¥ï¼Œåªè§‚å¯Ÿåˆ°ä¸€ä¸ªå¤§æ•°å€¼ï¼Œå¹¶ä¸èƒ½è¯´æ˜ä»€ä¹ˆé—®é¢˜ã€‚å…·ä½“æœ‰æ²¡æœ‰ç“¶é¢ˆï¼Œè¿˜éœ€è¦ä½ è§‚æµ‹å¤šä¸ªæ–¹é¢çš„å¤šä¸ªæŒ‡æ ‡ï¼Œæ¥äº¤å‰éªŒè¯ã€‚è¿™ä¹Ÿæ˜¯æˆ‘åœ¨å¥—è·¯ç¯‡ä¸­ä¸æ–­å¼ºè°ƒçš„ä¸€ç‚¹ã€‚</p><p>å¦å¤–ï¼Œå…³äº Children å’Œ Self çš„å«ä¹‰ï¼Œæ‰‹å†Œé‡Œå…¶å®æœ‰è¯¦ç»†è¯´æ˜ï¼Œè¿˜å¾ˆå‹å¥½åœ°ä¸¾äº†ä¸€ä¸ªä¾‹å­ï¼Œæ¥è¯´æ˜å®ƒä»¬çš„ç™¾åˆ†æ¯”çš„è®¡ç®—æ–¹æ³•ã€‚ç®€å•æ¥è¯´ï¼Œ</p><ul>\n<li>\n<p>Self æ˜¯æœ€åä¸€åˆ—çš„ç¬¦å·ï¼ˆå¯ä»¥ç†è§£ä¸ºå‡½æ•°ï¼‰æœ¬èº«æ‰€å æ¯”ä¾‹ï¼›</p>\n</li>\n<li>\n<p>Children æ˜¯è¿™ä¸ªç¬¦å·è°ƒç”¨çš„å…¶ä»–ç¬¦å·ï¼ˆå¯ä»¥ç†è§£ä¸ºå­å‡½æ•°ï¼ŒåŒ…æ‹¬ç›´æ¥å’Œé—´æ¥è°ƒç”¨ï¼‰å ç”¨çš„æ¯”ä¾‹ä¹‹å’Œã€‚</p>\n</li>\n</ul><p>æ­£å¦‚åŒå­¦ç•™è¨€é—®åˆ°çš„ï¼Œå¾ˆå¤šæ€§èƒ½å·¥å…·ç¡®å®ä¼šå¯¹ç³»ç»Ÿæ€§èƒ½æœ‰ä¸€å®šå½±å“ã€‚å°±æ‹¿ perf æ¥è¯´ï¼Œå®ƒéœ€è¦åœ¨å†…æ ¸ä¸­è·Ÿè¸ªå†…æ ¸æ ˆçš„å„ç§äº‹ä»¶ï¼Œé‚£ä¹ˆä¸å¯é¿å…å°±ä¼šå¸¦æ¥ä¸€å®šçš„æ€§èƒ½æŸå¤±ã€‚è¿™ä¸€ç‚¹ï¼Œè™½ç„¶å¯¹å¤§éƒ¨åˆ†åº”ç”¨æ¥è¯´ï¼Œæ²¡æœ‰å¤ªå¤§å½±å“ï¼Œä½†å¯¹ç‰¹å®šçš„æŸäº›åº”ç”¨ï¼ˆæ¯”å¦‚é‚£äº›å¯¹æ—¶é’Ÿå‘¨æœŸç‰¹åˆ«æ•æ„Ÿçš„åº”ç”¨ï¼‰ï¼Œå¯èƒ½å°±æ˜¯ç¾éš¾äº†ã€‚</p><p>æ‰€ä»¥ï¼Œä½¿ç”¨æ€§èƒ½å·¥å…·æ—¶ï¼Œç¡®å®åº”è¯¥è€ƒè™‘å·¥å…·æœ¬èº«å¯¹ç³»ç»Ÿæ€§èƒ½çš„å½±å“ã€‚è€Œè¿™ç§æƒ…å†µï¼Œå°±éœ€è¦ä½ äº†è§£è¿™äº›å·¥å…·çš„åŸç†ã€‚æ¯”å¦‚ï¼Œ</p><ul>\n<li>\n<p>perf è¿™ç§åŠ¨æ€è¿½è¸ªå·¥å…·ï¼Œä¼šç»™ç³»ç»Ÿå¸¦æ¥ä¸€å®šçš„æ€§èƒ½æŸå¤±ã€‚</p>\n</li>\n<li>\n<p>vmstatã€pidstat è¿™äº›ç›´æ¥è¯»å– proc æ–‡ä»¶ç³»ç»Ÿæ¥è·å–æŒ‡æ ‡çš„å·¥å…·ï¼Œä¸ä¼šå¸¦æ¥æ€§èƒ½æŸå¤±ã€‚</p>\n</li>\n</ul><h2>é—®é¢˜ 5ï¼šæ€§èƒ½ä¼˜åŒ–ä¹¦ç±å’Œå‚è€ƒèµ„æ–™æ¨è</h2><p><img src=\"https://static001.geekbang.org/resource/image/a0/ba/a0be73a43e756da48bdbdd01d71598ba.png?wh=750*803\" alt=\"\"></p><p>æˆ‘å¾ˆé«˜å…´çœ‹åˆ°ç•™è¨€æœ‰è¿™ä¹ˆé«˜çš„å­¦ä¹ çƒ­æƒ…ï¼Œå…¶å®å¥½å¤šæ–‡ç« åé¢éƒ½æœ‰å¤§é‡ç•™è¨€ï¼Œå¸Œæœ›æˆ‘èƒ½æ¨èä¹¦ç±å’Œå­¦ä¹ èµ„æ–™ã€‚è¿™ä¸€ç‚¹ä¹Ÿæ˜¯æˆ‘ä¹æ„çœ‹åˆ°çš„ã€‚ä¸“æ å­¦ä¹ ä¸€å®šä¸æ˜¯ä½ æ€§èƒ½ä¼˜åŒ–ä¹‹æ—…çš„å…¨éƒ¨ï¼Œèƒ½å¤Ÿå¸¦ä½ å…¥é—¨ã€å¸®ä½ è§£å†³å®é™…é—®é¢˜ã€ç”šè‡³æ˜¯æ¿€å‘ä½ çš„å­¦ä¹ çƒ­æƒ…ï¼Œå·²ç»è®©æˆ‘éå¸¸å¼€å¿ƒã€‚</p><p>åœ¨ <a href=\"https://time.geekbang.org/column/article/69346\">å¦‚ä½•å­¦ä¹ Linuxæ€§èƒ½ä¼˜åŒ–</a> çš„æ–‡ç« ä¸­ï¼Œæˆ‘æ›¾ç»ä»‹ç»è¿‡ Brendan Greggï¼Œä»–æ˜¯å½“ä¹‹æ— æ„§çš„æ€§èƒ½ä¼˜åŒ–å¤§å¸ˆï¼Œä½ åœ¨å„ç§ Linux æ€§èƒ½ä¼˜åŒ–çš„æ–‡ç« ä¸­ï¼ŒåŸºæœ¬éƒ½èƒ½çœ‹åˆ°ä»–çš„é‚£å¼ æ€§èƒ½å·¥å…·å›¾è°±ã€‚</p><p>æ‰€ä»¥ï¼Œå…³äºæ€§èƒ½ä¼˜åŒ–çš„ä¹¦ç±ï¼Œæˆ‘æœ€å–œæ¬¢çš„å…¶å®æ­£æ˜¯ä»–å†™çš„é‚£æœ¬ ã€ŠSystems Performance: Enterprise and the Cloudã€‹ã€‚è¿™æœ¬ä¹¦ä¹Ÿå‡ºäº†ä¸­æ–‡ç‰ˆï¼Œåå­—æ˜¯ã€Šæ€§èƒ½ä¹‹å·…ï¼šæ´æ‚‰ç³»ç»Ÿã€ä¼ä¸šä¸äº‘è®¡ç®—ã€‹ã€‚</p><p>ä»å‡ºç‰ˆæ—¶é—´æ¥çœ‹ï¼Œè¿™æœ¬ä¹¦ç¡®å®ç®—ä¸€æœ¬è€ä¹¦äº†ï¼Œè‹±æ–‡ç‰ˆçš„æ˜¯ 2013 å¹´å‡ºç‰ˆçš„ã€‚ä½†æ˜¯ç»å…¸ä¹‹æ‰€ä»¥æˆä¸ºç»å…¸ï¼Œæ­£æ˜¯å› ä¸ºä¸ä¼šè¿‡æ—¶ã€‚è¿™æœ¬ä¹¦é‡Œçš„æ€§èƒ½åˆ†ææ€è·¯ä»¥åŠå¾ˆå¤šçš„æ€§èƒ½å·¥å…·ï¼Œåˆ°ä»Šå¤©ä¾ç„¶é€‚ç”¨ã€‚</p><p>å¦å¤–ï¼Œæˆ‘ä¹Ÿæ¨èä½ å»å…³æ³¨ä»–çš„ä¸ªäººç½‘ç«™ <a href=\"http://www.brendangregg.com/\">http://www.brendangregg.com/</a>ï¼Œç‰¹åˆ«æ˜¯ <a href=\"http://www.brendangregg.com/linuxperf.html\">Linux Performance </a>è¿™ä¸ªé¡µé¢ï¼ŒåŒ…å«äº†å¾ˆå¤š Linux æ€§èƒ½ä¼˜åŒ–çš„èµ„æ–™ï¼Œæ¯”å¦‚ï¼š</p><ul>\n<li>\n<p>Linuxæ€§èƒ½å·¥å…·å›¾è°± ï¼›</p>\n</li>\n<li>\n<p>æ€§èƒ½åˆ†æå‚è€ƒèµ„æ–™ï¼›</p>\n</li>\n<li>\n<p>æ€§èƒ½ä¼˜åŒ–çš„æ¼”è®²è§†é¢‘ ã€‚</p>\n</li>\n</ul><p>ä¸è¿‡ï¼Œè¿™é‡Œå¾ˆå¤šå†…å®¹ä¼šæ¶‰åŠåˆ°å¤§é‡çš„å†…æ ¸çŸ¥è¯†ï¼Œå¯¹åˆå­¦è€…æ¥è¯´å¹¶ä¸å‹å¥½ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ æƒ³æˆä¸ºé«˜æ‰‹ï¼Œè¾›è‹¦å’ŒåšæŒéƒ½æ˜¯ä¸å¯é¿å…çš„ã€‚æ‰€ä»¥ï¼Œå¸Œæœ›ä½ åœ¨æŸ¥çœ‹è¿™äº›èµ„æ–™æ—¶ï¼Œä¸è¦ä¸€é‡åˆ°ä¸æ‡‚çš„å°±æ‰“é€€å ‚é¼“ã€‚ä»»ä½•ä¸œè¥¿çš„ç¬¬ä¸€éå­¦ä¹ æœ‰ä¸æ‡‚çš„åœ°æ–¹å¾ˆæ­£å¸¸ï¼Œå¿ä½ææƒ§åˆ«æ”¾å¼ƒï¼Œç»§ç»­å¾€åèµ°ï¼Œå‰é¢å¾ˆå¤šé—®é¢˜å¯èƒ½ä¼šä¸€å¹¶è§£å†³æ‰ï¼Œå†çœ‹ç¬¬äºŒéã€ç¬¬ä¸‰éå°±æ›´è½»æ¾äº†ã€‚</p><p>è¿˜æ˜¯é‚£å¥è¯ï¼ŒæŠ“ä½ä¸»çº¿ä¸åŠ¨æ‘‡ï¼Œå…ˆä»æœ€åŸºæœ¬çš„åŸç†å¼€å§‹ï¼ŒæŒæ¡æ€§èƒ½åˆ†æçš„æ€è·¯ï¼Œç„¶åå†é€æ­¥æ·±å…¥ï¼Œæ¢ç©¶ç»†èŠ‚ï¼Œä¸è¦è¯•å›¾ä¸€å£åƒæˆä¸ªå¤§èƒ–å­ã€‚</p><p>æœ€åï¼Œæ¬¢è¿ç»§ç»­åœ¨ç•™è¨€åŒºå†™ä¸‹ä½ çš„ç–‘é—®ï¼Œæˆ‘ä¼šæŒç»­ä¸æ–­åœ°è§£ç­”ã€‚æˆ‘çš„ç›®çš„ä»ç„¶ä¸å˜ï¼Œå¸Œæœ›å¯ä»¥å’Œä½ ä¸€èµ·ï¼ŒæŠŠæ–‡ç« çš„çŸ¥è¯†å˜æˆä½ çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬ä¸ä»…ä»…åœ¨å®æˆ˜ä¸­æ¼”ç»ƒï¼Œä¹Ÿè¦åœ¨äº¤æµä¸­è¿›æ­¥ã€‚</p>","comments":[{"had_liked":false,"id":52345,"user_name":"æˆ‘æ¥ä¹Ÿ","can_delete":false,"product_type":"c1","uid":1205253,"ip_address":"","ucode":"773D6104F56767","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","comment_is_top":false,"comment_ctime":1545364539,"is_pvip":false,"replies":[{"id":"19077","content":"è‹±è¯­ä¹Ÿæ˜¯åŸºæœ¬è¦æ±‚ï¼Œå¤šè¯»å¤šçœ‹å°±ç†Ÿæ‚‰äº†ğŸ˜Š","user_name":"ä½œè€…å›å¤","comment_id":52345,"uid":"1001282","ip_address":"","utype":1,"ctime":1545386292,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"74559808571","product_id":100020901,"comment_content":"[D14æ‰“å¡]<br>å¾ˆèµåŒè€å¸ˆçš„è§‚ç‚¹:<br>&quot;ä»»ä½•ä¸œè¥¿çš„ç¬¬ä¸€éå­¦ä¹ æœ‰ä¸æ‡‚çš„åœ°æ–¹å¾ˆæ­£å¸¸ï¼Œå¿ä½ææƒ§åˆ«æ”¾å¼ƒï¼Œç»§ç»­å¾€åèµ°ï¼Œå‰é¢å¾ˆå¤šé—®é¢˜å¯èƒ½ä¼šä¸€å¹¶è§£å†³æ‰ ï¼Œå†çœ‹ç¬¬äºŒéã€ç¬¬ä¸‰éå°±æ›´è½»æ¾äº†ã€‚&quot;<br>æˆ‘å¥½åƒå¾ˆæ—©å°±è¿™æ ·å®è·µäº†: ç¬¬ä¸€éä¸ç®¡çœ‹ä¸çœ‹å¾—æ‡‚,å…ˆå°½é‡ç»†çœ‹. å†ç‰¹æ„è¿‡ä¸€æ®µæ—¶é—´å›å¤´é‡æ–°å­¦ä¸€é,é™¤äº†èƒ½æŒæ¡æ›´å¤šçš„ä¸œè¥¿,è¿˜èƒ½ä½“ä¼šåˆ°&quot;æ¸©æ•…è€ŒçŸ¥æ–°&quot;çš„æ„Ÿè§‰.<br>----------------------------<br>ç°åœ¨å°±æ˜¯&quot;å¸ˆå‚…é¢†è¿›é—¨,ä¿®è¡Œçœ‹ä¸ªäºº.&quot;<br>&quot;å…ˆä»æœ€åŸºæœ¬çš„åŸç†å¼€å§‹ï¼ŒæŒæ¡æ€§èƒ½åˆ†æçš„æ€è·¯ï¼Œç„¶åå†é€æ­¥æ·±å…¥ï¼Œæ¢ç©¶ç»†èŠ‚&quot;<br>----------------------------<br>è‡ªä»å­¦äº†ä¸“æ ,è¶Šæ¥è¶Šè§‰å¾—è‡ªå·±çš„&lt;è‹±è¯­&gt;è¯¥å¥½å¥½è¡¥è¡¥äº†,æ·±æ„Ÿèƒ½åŠ›ä¸è¶³å•Š.<br>é‚£ä¹ˆå¤šå¥½çš„èµ„æº,ä¸€æ‰‹èµ„æ–™å‡ ä¹éƒ½æ˜¯è‹±æ–‡çš„,çœ‹ä¸æ‡‚çœŸæ˜¯å¯æƒœäº†!","like_count":18,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433840,"discussion_content":"è‹±è¯­ä¹Ÿæ˜¯åŸºæœ¬è¦æ±‚ï¼Œå¤šè¯»å¤šçœ‹å°±ç†Ÿæ‚‰äº†ğŸ˜Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545386292,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52223,"user_name":"ninuxer","can_delete":false,"product_type":"c1","uid":1243135,"ip_address":"","ucode":"5394ADAF2667D6","user_header":"https://wx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKQMM4m7NHuicr55aRiblTSEWIYe0QqbpyHweaoAbG7j2v7UUElqqeP3Ihrm3UfDPDRb1Hv8LvPwXqA/132","comment_is_top":false,"comment_ctime":1545353090,"is_pvip":false,"replies":[{"id":"19086","content":"ã€Šæ·±å…¥Linuxå†…æ ¸æ¶æ„ã€‹æŒºä¸é”™ï¼Œä¸è¿‡æ˜¯æœ¬å¤§å—å¤´ï¼Œå•ƒä¸‹åº”è¯¥è¦èŠ±ä¸å°‘æ—¶é—´","user_name":"ä½œè€…å›å¤","comment_id":52223,"uid":"1001282","ip_address":"","utype":1,"ctime":1545386550,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":2,"race_medal":0,"score":"53084960642","product_id":100020901,"comment_content":"æ‰“å¡day15<br>perf reportä¸­å…³äºswapperçš„å†…å®¹ï¼Œåé¢æˆ‘ä¹Ÿå»æŸ¥äº†ï¼Œæ‰å‘ç°æ˜¯è‡ªå·±ç†è§£æœ‰è¯¯ï¼Œæ„Ÿè°¢è€å¸ˆæŒ‡å‡ºï¼Œè¿™é‡Œçš„swapperä¸æ˜¯å†…å­˜æ¦‚å¿µçš„swapï¼Œè€Œæ˜¯cpuç©ºé—²æ—¶æ‰§è¡Œçš„ä¸€ä¸ªé»˜è®¤è°ƒç”¨<br>è¦å•ƒå•ƒã€Šæ€§èƒ½ä¹‹å·…ï¼šæ´æ‚‰ç³»ç»Ÿã€ä¼ä¸šä¸äº‘è®¡ç®—ã€‹äº†ï¼Œä½œè€…åšå®¢http:&#47;&#47;www.brendangregg.com&#47;<br>è¯·æ•™è€å¸ˆï¼Œç†è§£å†…æ ¸è¿™å—ï¼Œæœ‰åˆé€‚çš„ä¹¦æ¨èä¹ˆï¼Ÿæˆ‘æŸ¥äº†ä¸‹ï¼Œçœ‹äº†ä¸‹ç›®å½•ï¼Œæ„Ÿè§‰ã€ŠLinuxå†…æ ¸è®¾è®¡ä¸å®ç°ã€‹å¯èƒ½æ¯”è¾ƒé€‚åˆï¼Œå…¶ä»–çš„å¦‚ã€ŠLinuxå†…æ ¸æƒ…æ™¯åˆ†æã€‹ï¼Œã€Šæ·±å…¥ç†è§£Linuxå†…æ ¸ã€‹æ€ä¹ˆæ ·ï¼Ÿ","like_count":13,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433791,"discussion_content":"ã€Šæ·±å…¥Linuxå†…æ ¸æ¶æ„ã€‹æŒºä¸é”™ï¼Œä¸è¿‡æ˜¯æœ¬å¤§å—å¤´ï¼Œå•ƒä¸‹åº”è¯¥è¦èŠ±ä¸å°‘æ—¶é—´","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1545386550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2875639,"avatar":"","nickname":"Geek_6eb5f4","note":"","ucode":"C266E0B6C5F8C9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570639,"discussion_content":"Linuxå†…æ ¸æƒ…æ™¯åˆ†æ æ‰æ˜¯ç»å…¸ä¹‹ä½œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651844079,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":238175,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","comment_is_top":false,"comment_ctime":1596088389,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10186022981","product_id":100020901,"comment_content":"ä»»ä½•ä¸œè¥¿çš„ç¬¬ä¸€éå­¦ä¹ æœ‰ä¸æ‡‚çš„åœ°æ–¹å¾ˆæ­£å¸¸ï¼Œå¿ä½ææƒ§åˆ«æ”¾å¼ƒï¼Œç»§ç»­å¾€åèµ°ï¼Œå‰é¢å¾ˆå¤šé—®é¢˜å¯èƒ½ä¼šä¸€å¹¶è§£å†³æ‰ï¼Œå†çœ‹ç¬¬äºŒéã€ç¬¬ä¸‰éå°±æ›´è½»æ¾äº†ã€‚<br>------------------------------<br>æ·±æ„Ÿå…±é¸£ï¼Œä»¥å‰å­¦ä¹ æ€»æ˜¯è´ªå¤§æ±‚å…¨ï¼Œæ€»ä»¥ä¸ºä¸€éèƒ½çœ‹æ‡‚çš„å†³ä¸èŠ±ä¸¤éï¼Œåæ¥å‘ç°çœŸå®èƒ½ç†è§£èµ·ç éœ€è¦2éä»¥ä¸Šï¼Œçœ‹æ¥åŸºæœ¬ä¸Šå¤§å¤šæ•°äººéƒ½æ˜¯è¿™ä¸ªæ ·å­ã€‚","like_count":2},{"had_liked":false,"id":196336,"user_name":"æ–‘é©¬Z","can_delete":false,"product_type":"c1","uid":1500262,"ip_address":"","ucode":"ABB55B4652452F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK0K9AM6xxDzVV6pF66jyus5NuuxZzT9icad8AQDMKibwUOy3UnoZIZdyKIKd9sA06rgFnIWwiakSeOQ/132","comment_is_top":false,"comment_ctime":1585273667,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10175208259","product_id":100020901,"comment_content":"å…³äºæœ¬ç« ä¸­é‡åˆ°çš„å·¥å…·åœ¨centosç³»ç»Ÿä¸‹çš„å®‰è£…ã€‚<br>yum install sysstat pstree psmisc<br>ä»¥åŠhping3çš„å®‰è£…å‚è€ƒ<br>https:&#47;&#47;www.cnblogs.com&#47;shuter&#47;p&#47;11430876.html<br>å¦‚æœyumçš„æ•°æ®dbæŸåï¼Œå¯èƒ½éœ€è¦clean å’Œ makecacheä¸€ä¸‹å†è¿›è¡Œ<br>dockeré•œåƒä¸­ apt-get update &amp;&amp; apt-get install -y linux-perf linux-tools procps<br><br>","like_count":2},{"had_liked":false,"id":107765,"user_name":"è¾‰æ™–","can_delete":false,"product_type":"c1","uid":1574062,"ip_address":"","ucode":"E5EC033EE4952B","user_header":"https://static001.geekbang.org/account/avatar/00/18/04/ae/0118c132.jpg","comment_is_top":false,"comment_ctime":1561605132,"is_pvip":false,"replies":[{"id":"40452","content":"Failed to open ***, continuing without symbols è¯´æ˜è¿˜æ˜¯æ— æ³•æ‰¾åˆ°ç›¸åº”çš„ç¬¦å·è¡¨ï¼Œæ ¹æ®è­¦å‘Šæç¤ºé€ä¸ªå®‰è£…åº”è¯¥å°±å¯ä»¥äº†","user_name":"ä½œè€…å›å¤","comment_id":107765,"uid":"1001282","ip_address":"","utype":1,"ctime":1562511546,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"10151539724","product_id":100020901,"comment_content":"å¯¹äºé—®é¢˜1ï¼Œä½¿ç”¨æ–¹æ³•4è¿˜æ˜¯çœ‹ä¸åˆ°å‡½æ•°åï¼Œåªèƒ½çœ‹åˆ°ä¸€äº› 16 è¿›åˆ¶æ ¼å¼çš„å‡½æ•°åœ°å€<br><br>åœ¨è½½å…¥perf.dataè¿‡ç¨‹ä¸æ–­å‡ºç°æç¤ºï¼šFailed to open ***, continuing without symbols<br>è½½å…¥å®Œæˆåï¼Œperf ç•Œé¢æœ€ä¸‹é¢çš„é‚£ä¸€è¡Œè­¦å‘Šä¿¡æ¯æ˜¯ï¼šCannot load tips.txt file, please install perf!","like_count":2,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455663,"discussion_content":"Failed to open ***, continuing without symbols è¯´æ˜è¿˜æ˜¯æ— æ³•æ‰¾åˆ°ç›¸åº”çš„ç¬¦å·è¡¨ï¼Œæ ¹æ®è­¦å‘Šæç¤ºé€ä¸ªå®‰è£…åº”è¯¥å°±å¯ä»¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562511546,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287690,"user_name":"Lake","can_delete":false,"product_type":"c1","uid":1096981,"ip_address":"","ucode":"D8BE14643919BC","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLHS9BjwOgkqV1NSmNRFxUC6KU0DibS75f00GhMWx4s5OYLryibaNDoJ1tZAFRaHJ7jSZXA4pNumraQ/132","comment_is_top":false,"comment_ctime":1618110198,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5913077494","product_id":100020901,"comment_content":"ç¬¬äºŒéäº†ï¼ŒæŠŠç¬¬ä¸€éçœ‹æ²¡åšçš„å®éªŒè·Ÿç€åšï¼Œé¡ºä¾¿å¼€å§‹æ•´ç†ç¬”è®°äº†","like_count":1,"discussions":[{"author":{"id":1064375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/3d/b7/d863295a.jpg","nickname":"panbook","note":"","ucode":"1B1CC0F44C41DF","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370445,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619414900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":270333,"user_name":"åº·ç†™","can_delete":false,"product_type":"c1","uid":1006263,"ip_address":"","ucode":"70587D0019D94B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5a/b7/f053eda7.jpg","comment_is_top":false,"comment_ctime":1609073070,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5904040366","product_id":100020901,"comment_content":"ã€ŠSystems Performance: Enterprise and the Cloudã€‹è¿™æœ¬ä¹¦åˆšå‡ºäº†ç¬¬äºŒç‰ˆï¼Œæ–°é²œå‡ºç‚‰çš„ï¼šhttp:&#47;&#47;www.brendangregg.com&#47;systems-performance-2nd-edition-book.html","like_count":1},{"had_liked":false,"id":251949,"user_name":"èµµå¥‡å½¬","can_delete":false,"product_type":"c1","uid":1340589,"ip_address":"","ucode":"74B0FF5C558F89","user_header":"https://static001.geekbang.org/account/avatar/00/14/74/ad/771d2646.jpg","comment_is_top":false,"comment_ctime":1601998496,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5896965792","product_id":100020901,"comment_content":"perfç”Ÿæˆçš„æ•°æ®å¯ä»¥ç”¨ç«ç„°å›¾æ˜¾ç¤ºæ›´åŠ ç›´è§‚","like_count":2,"discussions":[{"author":{"id":1609530,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/l4nngwyggBGqeMXC0micwO8bM1hSttgQXa1Y5frJSqWa8NibDhia5icwPcHM5wOpV3hfsf0UicDY0ypFqnQ3iarG0T1w/132","nickname":"Trident","note":"","ucode":"53E6788CF33398","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557620,"discussion_content":"å¯ä»¥ç”¨flamegraphæŸ¥çœ‹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1647906667,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":191046,"user_name":"linker","can_delete":false,"product_type":"c1","uid":1803259,"ip_address":"","ucode":"6C5799F2FC2C82","user_header":"https://static001.geekbang.org/account/avatar/00/1b/83/fb/621adceb.jpg","comment_is_top":false,"comment_ctime":1584719877,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5879687173","product_id":100020901,"comment_content":"å‡†å¤‡æŠŠä¸“æ åšæˆæ€ç»´å¯¼å›¾ï¼Œæ–¹é¢æŸ¥çœ‹ã€‚","like_count":2,"discussions":[{"author":{"id":2339821,"avatar":"https://static001.geekbang.org/account/avatar/00/23/b3/ed/e66a2886.jpg","nickname":"Yon","note":"","ucode":"0E0AD941FA1FB7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587794,"discussion_content":"å…„å°ï¼Œåšå¥½äº†æ²¡æœ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663296384,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¾å›½"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2673003,"avatar":"https://static001.geekbang.org/account/avatar/00/28/c9/6b/378c91c8.jpg","nickname":"ç‚¹ç‚¹","note":"","ucode":"98CDCCD65895C4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382494,"discussion_content":"å…„å°ï¼Œåšå¥½äº†æ²¡æœ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625616721,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114891,"user_name":"éƒ¡ä¸»ç§‹","can_delete":false,"product_type":"c1","uid":1597992,"ip_address":"","ucode":"A3254103A90E16","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLO7rmfnq3iaicssF1Vl2lJicYl4C1Lb5q5vIJQwXQ2mbiaPpceeRibwoMAcDcLm5zFk1ZryicyRCVpNibfg/132","comment_is_top":false,"comment_ctime":1563424543,"is_pvip":false,"replies":[{"id":"41968","content":"perf ç•Œé¢åº”è¯¥æœ‰ç¼ºå°‘ç¬¦å·çš„æç¤ºå§ï¼ŸæŒ‰ç…§æç¤ºå®‰è£…ç¼ºå°‘çš„è°ƒè¯•ä¿¡æ¯","user_name":"ä½œè€…å›å¤","comment_id":114891,"uid":"1001282","ip_address":"","utype":1,"ctime":1563455196,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":2,"race_medal":0,"score":"5858391839","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæˆ‘çš„åœ¨centos7ä¸Šç”¨perfåˆ†æå®¿ä¸»æœºä¸Šçš„åº”ç”¨ä¹Ÿæ˜¯æ˜¾ç¤º16è¿›åˆ¶åœ°å€ï¼Œæ²¡æœ‰å‡½æ•°å ï¼Œè¿™ç§æ€ä¹ˆå¤„ç†å‘¢<br>","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458868,"discussion_content":"perf ç•Œé¢åº”è¯¥æœ‰ç¼ºå°‘ç¬¦å·çš„æç¤ºå§ï¼ŸæŒ‰ç…§æç¤ºå®‰è£…ç¼ºå°‘çš„è°ƒè¯•ä¿¡æ¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563455196,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1789487,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/4e/2f/86c89ead.jpg","nickname":"é•¿ç™½","note":"","ucode":"9AED10869C5B6C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":87542,"discussion_content":"æ²¡æœ‰ä»»ä½•ç¼ºå°‘ç¬¦å·çš„æç¤º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576672392,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57613,"user_name":"è¾£æ¤’","can_delete":false,"product_type":"c1","uid":1330376,"ip_address":"","ucode":"85C62DE976C6A5","user_header":"https://static001.geekbang.org/account/avatar/00/14/4c/c8/bed1e08a.jpg","comment_is_top":false,"comment_ctime":1546850854,"is_pvip":false,"replies":[{"id":"22289","content":"echo 0&gt; &#47;proc&#47;sys&#47;kernel&#47;kptr_restrict<br>","user_name":"ä½œè€…å›å¤","comment_id":57613,"uid":"1001282","ip_address":"","utype":1,"ctime":1548247253,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"5841818150","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæˆ‘æŠŠperf.dataæ‹·è´è¿›å®¹å™¨ï¼Œç„¶ååœ¨å®¹å™¨ä¸­æŒ‰ç…§æç¤ºå®‰è£…äº†perf, å†æ‰§è¡Œperf_4.9 reportæ—¶æŠ¥ä»¥ä¸‹ä¿¡æ¯ï¼š<br>Kernel address maps (&#47;proc&#47;{kallsyms,modules}) were restricted.   <br>Check &#47;proc&#47;sys&#47;kernel&#47;kptr_restrict before running &#39;perf record&#39;<br>As no suitable kallsyms nor vmlinux was found, kernel samples     <br>can&#39;t be resolved.                                             <br>Samples in kernel modules can&#39;t be resolved as well.              <br>  xPress any key...  <br><br>æˆ‘æœ¬èº«çš„æœºå™¨æ˜¯centos7.2. è¯·è€å¸ˆæç¤ºä¸€ä¸‹è§£å†³çš„æ€è·¯ï¼Œè°¢è°¢ï¼<br><br>                                                ","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435665,"discussion_content":"echo 0&amp;gt; /proc/sys/kernel/kptr_restrict\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548247253,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":53004,"user_name":"Griffin","can_delete":false,"product_type":"c1","uid":1087329,"ip_address":"","ucode":"CF766B92A65261","user_header":"https://static001.geekbang.org/account/avatar/00/10/97/61/34a0da09.jpg","comment_is_top":false,"comment_ctime":1545568028,"is_pvip":false,"replies":[{"id":"19453","content":"ä¸è¦æ€¥ï¼Œæˆ‘ä»¬æœ‰ç½‘ç»œæ¨¡å—çš„","user_name":"ä½œè€…å›å¤","comment_id":53004,"uid":"1001282","ip_address":"","utype":1,"ctime":1545697124,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"5840535324","product_id":100020901,"comment_content":"ç»ˆäºèµ¶ä¸Šäº†ï¼Œå€ªè€å¸ˆèƒ½ä¸èƒ½è®²è®²ç½‘ç»œé—®é¢˜åº”è¯¥æ€ä¹ˆæ’æŸ¥å‘€ï¼Œæœ€è¿‘è€æ˜¯è¢«dockerï¼Œdocker swarmçš„containerå¯»å€å›°æ‰°ã€‚","like_count":2,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434015,"discussion_content":"ä¸è¦æ€¥ï¼Œæˆ‘ä»¬æœ‰ç½‘ç»œæ¨¡å—çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545697124,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52800,"user_name":"æ— åè€å’","can_delete":false,"product_type":"c1","uid":1348261,"ip_address":"","ucode":"48874CE670E122","user_header":"","comment_is_top":false,"comment_ctime":1545531988,"is_pvip":false,"replies":[{"id":"19458","content":"1. ç½‘ç»œåé¢è¿˜ä¼šè®²<br>2. ç¡¬ä¸­æ–­çš„åŸç†å…¶å®å·®ä¸å¤ªå¤šï¼Œæ‰€ä»¥æ²¡æœ‰å•ç‹¬æ‹å‡ºæ¥<br>3. ç°åœ¨å•ä¸ªæ¨¡å—çš„æ¡ˆä¾‹çš„ç¡®ä¸å¤ªå¤æ‚ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºäº†è®©å¤§å®¶éƒ½èƒ½æ›´ç›´è§‚ç†è§£è¿™äº›é—®é¢˜<br><br>å…³äºimageä¸‹è½½ï¼Œå…¶å®å¯ä»¥ä½¿ç”¨å›½å†…çš„é•œåƒåŠ é€Ÿï¼Œç½‘ç»œæœç´¢æ‰¾åˆ°ã€‚å¹¶ä¸”åŸºç¡€é•œåƒä¸€æ ·çš„è¯ï¼Œä¹Ÿåªéœ€è¦ä¸‹è½½æ–°çš„layerå³å¯ã€‚<br><br>æœ€åï¼Œä½ çš„å®¹å™¨æ¨é€€å‡ºäº†ï¼Œè¯·å‚è€ƒgithubè®¾ç½®å¯åŠ¨å‚æ•°è§£å†³ã€‚","user_name":"ä½œè€…å›å¤","comment_id":52800,"uid":"1001282","ip_address":"","utype":1,"ctime":1545697699,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"5840499284","product_id":100020901,"comment_content":"å…¨éƒ¨åˆ·å®Œäº†ï¼ŒæŠŠå„ä¸ªCPUå®¹æ˜“å‡ºç°é—®é¢˜çš„æƒ…å†µåŸºæœ¬ä¸Šéƒ½å†™æ¸…æ¥šäº†ï¼Œè€Œä¸”éƒ½æœ‰è¯¦ç»†çš„æµ‹è¯•ç”¨ä¾‹ï¼Œé™¤äº†è½¯ä¸­æ–­é‚£ä¸ªéœ€è¦SYNæ”»å‡»ä¹‹å¤–ï¼Œå…¶ä»–çš„æµ‹è¯•ç”¨ä¾‹éƒ½ä¸€äº”ä¸€åçš„éƒ½åšè¿‡äº†ï¼Œå—ç›Šè‰¯å¤šã€‚æˆ‘æœ‰ä»¥ä¸‹ç–‘é—®ï¼Œå¸Œæœ›è€å¸ˆå¯ä»¥è§£ç­”ä¸‹ï¼š<br>1ã€è½¯ä¸­æ–­è€å¸ˆæ˜¯ç”¨SYNæ”»å‡»çš„æ–¹å¼æ¥è®²è§£è¿™éƒ¨åˆ†çš„å®ä¾‹çš„ï¼Œé‚£è¿˜æœ‰æ²¡æœ‰å…¶ä»–å…¸å‹çš„è½¯ä¸­æ–­çš„æ¡ˆä¾‹å‘¢ï¼Ÿ<br>2ã€ç¡¬ä¸­æ–­çš„å®ä¾‹è€å¸ˆæ²¡æœ‰è®²ï¼Œå¯ä»¥è¡¥ä¸€ç¯‡å—ï¼Ÿ<br>3ã€è€å¸ˆæ‰€è®²çš„å®ä¾‹ï¼Œéƒ½æ˜¯å•ä¸€æ¨¡å¼çš„ï¼Œåœ¨å®é™…çš„ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œæƒ…å†µè¦å¤æ‚å¾ˆå¤šï¼Œè€å¸ˆèƒ½å†è®²ä¸€ä¸‹å°è±¡æœ€æ·±åˆ»çš„å®é™…æƒ…å†µå—ï¼Ÿ<br><br>å¦å¤–ï¼Œæˆ‘æœ‰ä¸€ä¸ªå°å»ºè®®ï¼Œè€å¸ˆçš„æ¡ˆä¾‹éƒ½æ˜¯ç”¨dockeræ¥æ­å»ºç¯å¢ƒçš„ï¼Œåœ¨ä¸€ä¸ªç”¨ä¾‹è¦å¤šæ¬¡ä¸‹è½½ä¸åŒçš„imageï¼Œä½†å…¶å®è¿™äº›imageåªæ˜¯é‡Œé¢çš„æµ‹è¯•ç”¨ä¾‹å˜äº†ï¼Œæ‰€ä»¥å¯ä»¥å…ˆä¸‹è½½fileæ–‡ä»¶ï¼Œä½¿ç”¨docker -væŒ‚è½½çš„æ–¹å¼è¿›è¡Œæµ‹è¯•ã€‚è¿™æ ·å¯ä»¥å¤§å¤§å‡å°‘ä¸‹è½½é•œåƒçš„æ—¶é—´ã€‚å¦‚ä¸‹ï¼Œå°±æ˜¯ä½¿ç”¨docker run -v &#47;usr&#47;local&#47;src&#47;app-fix2:&#47;app --privileged --name app-fix -d feisky&#47;app:iowait æ¥è¿è¡Œçš„é•œåƒã€‚<br>```<br>[root@linjx src]# docker ps -a<br>CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                        PORTS               NAMES<br>0ecb229f87e4        feisky&#47;app:iowait   &quot;&#47;app&quot;              3 minutes ago       Up 3 minutes                                      app-fix<br>a251996e0d60        feisky&#47;app:iowait   &quot;&#47;app&quot;              5 hours ago         Exited (137) 20 minutes ago                       app<br>```","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433982,"discussion_content":"1. ç½‘ç»œåé¢è¿˜ä¼šè®²\n2. ç¡¬ä¸­æ–­çš„åŸç†å…¶å®å·®ä¸å¤ªå¤šï¼Œæ‰€ä»¥æ²¡æœ‰å•ç‹¬æ‹å‡ºæ¥\n3. ç°åœ¨å•ä¸ªæ¨¡å—çš„æ¡ˆä¾‹çš„ç¡®ä¸å¤ªå¤æ‚ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºäº†è®©å¤§å®¶éƒ½èƒ½æ›´ç›´è§‚ç†è§£è¿™äº›é—®é¢˜\n\nå…³äºimageä¸‹è½½ï¼Œå…¶å®å¯ä»¥ä½¿ç”¨å›½å†…çš„é•œåƒåŠ é€Ÿï¼Œç½‘ç»œæœç´¢æ‰¾åˆ°ã€‚å¹¶ä¸”åŸºç¡€é•œåƒä¸€æ ·çš„è¯ï¼Œä¹Ÿåªéœ€è¦ä¸‹è½½æ–°çš„layerå³å¯ã€‚\n\næœ€åï¼Œä½ çš„å®¹å™¨æ¨é€€å‡ºäº†ï¼Œè¯·å‚è€ƒgithubè®¾ç½®å¯åŠ¨å‚æ•°è§£å†³ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1545697699,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":336118,"user_name":"å¤©ä¸‹ç¬¬ä¸€å¥½ç”·ç”Ÿ","can_delete":false,"product_type":"c1","uid":1321105,"ip_address":"","ucode":"2623ED667B1C9B","user_header":"https://static001.geekbang.org/account/avatar/00/14/28/91/1830fb64.jpg","comment_is_top":false,"comment_ctime":1645935910,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645935910","product_id":100020901,"comment_content":"æ‚¨å¥½ï¼Œè€å¸ˆï¼Œè¯·æ•™ä¸ªé—®é¢˜ã€‚é€šè¿‡proxmoxè£…çš„centosç³»ç»Ÿï¼Œæ‰§è¡Œç±»ä¼¼w ss top uptimeä¹‹ç±»çš„å‘½ä»¤ä¼šå¤¯ä½ï¼Œå…¶ä»–çš„å‘½ä»¤æ²¡æœ‰é—®é¢˜ã€‚é€šè¿‡straceå‘ç°ä¸€ç›´åœ¨æ‰“å¼€&#47;etc&#47;hostsæ–‡ä»¶ï¼Œä¸çŸ¥é“æ˜¯å“ªé‡Œçš„é—®é¢˜ï¼Œè¯¥å¦‚ä½•æ’æŸ¥ã€‚","like_count":0},{"had_liked":false,"id":307446,"user_name":"æ‹‰é²","can_delete":false,"product_type":"c1","uid":1594125,"ip_address":"","ucode":"FBB65945605862","user_header":"https://static001.geekbang.org/account/avatar/00/18/53/0d/c4643e0e.jpg","comment_is_top":false,"comment_ctime":1629105809,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629105809","product_id":100020901,"comment_content":"perf è¿˜æ˜¯äºŒè¿›åˆ¶","like_count":0},{"had_liked":false,"id":305618,"user_name":"å°å°èœé¸Ÿ","can_delete":false,"product_type":"c1","uid":1229617,"ip_address":"","ucode":"1CECC0A664CFD1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK009KMmXKFVSEdjicpDD4ick3NZpM3JdIUibWGB03lG6yicibad0tGmQD7E3DpZ0sVRenxWNfd7iaPdp7g/132","comment_is_top":false,"comment_ctime":1628071100,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628071100","product_id":100020901,"comment_content":"å‘ç°è‹±æ–‡å¥½çœŸå¥½ã€‚ã€‚ã€‚","like_count":0},{"had_liked":false,"id":282542,"user_name":"Anti-Time","can_delete":false,"product_type":"c1","uid":1657031,"ip_address":"","ucode":"CE2D892EC08B28","user_header":"https://static001.geekbang.org/account/avatar/00/19/48/c7/2f051793.jpg","comment_is_top":false,"comment_ctime":1615294356,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615294356","product_id":100020901,"comment_content":"æƒ³è¯·æ•™ä¸€ä¸‹ï¼š<br>å…³äºè¿è¡ŒçŠ¶æ€ä¸ºï¼šS çš„è¿›ç¨‹ï¼Œ ä½¿ç”¨perfçœ‹ä¸åˆ°ä¿¡æ¯æ˜¯ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":256248,"user_name":"evan","can_delete":false,"product_type":"c1","uid":1543040,"ip_address":"","ucode":"491B073D5AFEDE","user_header":"https://static001.geekbang.org/account/avatar/00/17/8b/80/8702bd5f.jpg","comment_is_top":false,"comment_ctime":1603585373,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603585373","product_id":100020901,"comment_content":"æ„Ÿè°¢è€å¸ˆ ç»§ç»­åŠ æ²¹!","like_count":0},{"had_liked":false,"id":234507,"user_name":"ä½ å¥½","can_delete":false,"product_type":"c1","uid":2057727,"ip_address":"","ucode":"28E7C5C9AE98E6","user_header":"","comment_is_top":false,"comment_ctime":1594709299,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1594709299","product_id":100020901,"comment_content":"è€å¸ˆï¼Œç°åœ¨è¿ç»´å¾€å“ªä¸ªæ–¹å‘å‘å±•æ›´å¥½ï¼Ÿæ˜¯ä¸æ˜¯è¦æ‡‚å¼€å‘è¯­è¨€æ‰è¡Œï¼Œè¿ç»´å­¦å“ªä¸ªå¼€å‘è¯­è¨€æ›´å¥½ç‚¹","like_count":0,"discussions":[{"author":{"id":1200299,"avatar":"https://static001.geekbang.org/account/avatar/00/12/50/ab/6584e520.jpg","nickname":"é™ˆé¡ºå‰","note":"","ucode":"315732AEA35CD1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301883,"discussion_content":"å¼€å‘å’Œ k8s éƒ½è¦ä¼š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598693047,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":195203,"user_name":"ä¸ä¹æ´ª","can_delete":false,"product_type":"c1","uid":1264392,"ip_address":"","ucode":"549CE57AB20B49","user_header":"https://static001.geekbang.org/account/avatar/00/13/4b/08/52954cd7.jpg","comment_is_top":false,"comment_ctime":1585146333,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585146333","product_id":100020901,"comment_content":"éƒ½è¦å¥½å¥½å®é™…ä½¿ç”¨ä¸€ä¸‹","like_count":0},{"had_liked":false,"id":191743,"user_name":"201200986","can_delete":false,"product_type":"c1","uid":1900861,"ip_address":"","ucode":"6042C42D1C904E","user_header":"","comment_is_top":false,"comment_ctime":1584793727,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584793727","product_id":100020901,"comment_content":"perfèƒ½åŒæ—¶æ”¯æŒå¤šå°‘ä¸ªeventçš„æŸ¥è¯¢å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":186516,"user_name":"å®‹èƒ–èƒ–","can_delete":false,"product_type":"c1","uid":1857496,"ip_address":"","ucode":"AA828F49CCEABA","user_header":"https://static001.geekbang.org/account/avatar/00/1c/57/d8/e9c8b923.jpg","comment_is_top":false,"comment_ctime":1583855436,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583855436","product_id":100020901,"comment_content":"æ‰“å¡ï¼Œå­¦ä¹ äº†","like_count":0},{"had_liked":false,"id":181388,"user_name":"åˆ˜å‹æ·™","can_delete":false,"product_type":"c1","uid":1620058,"ip_address":"","ucode":"97F3A69A308313","user_header":"","comment_is_top":false,"comment_ctime":1582533133,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582533133","product_id":100020901,"comment_content":"D7 æ‰“å¡","like_count":0},{"had_liked":false,"id":174177,"user_name":"GEEKBANG_9388667","can_delete":false,"product_type":"c1","uid":1267906,"ip_address":"","ucode":"FAF51FEFBB291A","user_header":"https://static001.geekbang.org/account/avatar/00/13/58/c2/51fa1f28.jpg","comment_is_top":false,"comment_ctime":1580046121,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1580046121","product_id":100020901,"comment_content":"æ€¥é—®è€å¸ˆï¼Œæˆ‘çº¿ä¸Šloadå¤ªé«˜äº†ï¼Œä½†æ˜¯æ²¡æœ‰çœ‹åˆ°èµ„æºç“¶é¢ˆï¼Œæ˜¯runningè¿›ç¨‹å¤ªå¤šäº†ï¼Œè¿™ä¸ªæ€ä¹ˆåŠ<br>Tasks: 604 total,  37 running, 567 sleeping,   0 stopped,   0 zombie<br>%Cpu(s): 16.1 us,  2.6 sy,  0.0 ni, 75.6 id,  0.0 wa,  0.0 hi,  5.7 si,  0.0 st<br>KiB Mem : 65806076 total, 49759864 free,  8558936 used,  7487276 buff&#47;cache<br>KiB Swap:        0 total,        0 free,        0 used. 55111636 avail Mem<br><br>å¯äº†å¾ˆå¤šè¿›ç¨‹ï¼Œç‰¹åˆ«æ˜¯nginxpodæœ‰10å¤šä¸ª","like_count":0},{"had_liked":false,"id":173749,"user_name":"ç¬‘","can_delete":false,"product_type":"c1","uid":1741098,"ip_address":"","ucode":"689A435818403A","user_header":"https://static001.geekbang.org/account/avatar/00/1a/91/2a/c0fb21fa.jpg","comment_is_top":false,"comment_ctime":1579678597,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1579678597","product_id":100020901,"comment_content":"è¡¥æ‰“å¡ï¼ŒDay 13","like_count":0},{"had_liked":false,"id":172322,"user_name":"é™ˆå‡¯","can_delete":false,"product_type":"c1","uid":1453035,"ip_address":"","ucode":"69A979A5DC91D6","user_header":"","comment_is_top":false,"comment_ctime":1579154605,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1579154605","product_id":100020901,"comment_content":"è€å¸ˆè¯´å¾—å¾ˆå¥½","like_count":0},{"had_liked":false,"id":163218,"user_name":"é•¿ç™½","can_delete":false,"product_type":"c1","uid":1789487,"ip_address":"","ucode":"9AED10869C5B6C","user_header":"https://static001.geekbang.org/account/avatar/00/1b/4e/2f/86c89ead.jpg","comment_is_top":false,"comment_ctime":1576672210,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576672210","product_id":100020901,"comment_content":"centos7å®¹å™¨é‡Œé¢æ— æ³•å®‰è£…é«˜ç‰ˆæœ¬çš„perfï¼Œperf top ä¸€ç›´æ˜¾ç¤ºé»‘å±ï¼Œperf.dataè§£æå‡ºæ¥ä¹Ÿæ˜¯16è¿›åˆ¶çš„åœ°å€ï¼Œè¯·è€å¸ˆèµæ•™","like_count":0},{"had_liked":false,"id":160678,"user_name":"ä¸œå®‡","can_delete":false,"product_type":"c1","uid":1118347,"ip_address":"","ucode":"2F0A8C67D55B5C","user_header":"https://static001.geekbang.org/account/avatar/00/11/10/8b/7e84507c.jpg","comment_is_top":false,"comment_ctime":1576019888,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576019888","product_id":100020901,"comment_content":"è€å¸ˆé—®ä¸‹ perfç³»ç»Ÿè°ƒç”¨æ˜¾ç¤ºunknownæ¨¡å—æ€ä¹ˆå¤„ç† å¯ä»¥å®Œå…¨æ˜¾ç¤ºå‡½æ•°åå­—","like_count":0},{"had_liked":false,"id":155920,"user_name":"Geek_557823","can_delete":false,"product_type":"c1","uid":1673905,"ip_address":"","ucode":"856ED6F3492796","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKzaiaKwGBbXgyviaS8Ba73omqibcPl2ZqtGDhQTm1y9H5pqicWESPWoWOesTfqn5m8G2Qe0zqibs8F4gg/132","comment_is_top":false,"comment_ctime":1574778641,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1574778641","product_id":100020901,"comment_content":"è€å¸ˆ, perf top -g -p {pid} é‡Œé¢Event Count å’ŒSamples éƒ½ä¸º 0, ä½†æ˜¯ perf top -g æ˜¯æœ‰å¾ˆå¤šæ•°æ®çš„<br>ç¯å¢ƒ: <br>CentOS Linux release 7.7.1908 (Core)<br>Linux localhost 3.10.0-1062.el7.x86_64<br>perf version 3.10.0-1062.4.1.el7.x86_64.debug<br>note: <br>  ubuntu ä¸Šå¯ä»¥æ­£å¸¸ä½¿ç”¨<br>  é‡è£…ç³»ç»Ÿ(CentOS-7-x86_64-Minimal-1908.iso (942.00 MB)), yum -y install perf é—®é¢˜ä¾æ—§<br>  ä½¿ç”¨ Linux Resource æºç å®‰è£… é—®é¢˜ä¾æ—§<br>é•œåƒé—®é¢˜: https:&#47;&#47;segmentfault.com&#47;q&#47;1010000020976198&#47;<br>éº»çƒ¦è€å¸ˆæŠ½ç©ºçœ‹ä¸€ä¸‹å“ˆ","like_count":0,"discussions":[{"author":{"id":1789487,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/4e/2f/86c89ead.jpg","nickname":"é•¿ç™½","note":"","ucode":"9AED10869C5B6C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":87538,"discussion_content":"æˆ‘ä¹Ÿæ˜¯è¿™ä¸ªé—®é¢˜ï¼Œè¯·é—®è§£å†³äº†ä¹ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576672350,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":148433,"user_name":"zKerry","can_delete":false,"product_type":"c1","uid":1497740,"ip_address":"","ucode":"9FB006D1A38D3F","user_header":"","comment_is_top":false,"comment_ctime":1573006541,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1573006541","product_id":100020901,"comment_content":"éš¾åˆ°æ²¡æœ‰ç»¼åˆæ€§è´¨çš„æ€§èƒ½æ£€æµ‹å·¥å…·å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1335362,"avatar":"https://static001.geekbang.org/account/avatar/00/14/60/42/ed42e7cd.jpg","nickname":"simoom","note":"","ucode":"6AE2EED1295F9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285340,"discussion_content":"nmonå’Œsar,perfæœ¬èº«æ˜¯å¤šç”¨é€”çš„ï¼Œä½†æ˜¯å¹¶ä¸å‹å¥½ã€‚nmonæ˜¯è¿™äº›ä¸è¦é’±å·¥å…·é‡Œæœ€å‹å¥½çš„ï¼Œä½†æ˜¯æ²¡æœ‰ç»†èŠ‚ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1592812662,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1244665,"avatar":"https://static001.geekbang.org/account/avatar/00/12/fd/f9/61bdb3f8.jpg","nickname":"æœªæ¥å°é¬¼","note":"","ucode":"A0ED87F78E6319","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583996,"discussion_content":"å¾ˆéš¾ï¼Œå“ˆå“ˆå“ˆï¼Œæ²¡æœ‰åå…¨åç¾çš„å·¥å…·\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660554508,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139621,"user_name":"holly","can_delete":false,"product_type":"c1","uid":1609350,"ip_address":"","ucode":"9D57569ED81CBA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/2rRMjRdMelicUoU5yXibENlYapdvPUCibOk8bGicyFoIW7IMxMqhicgelVphEmWFpMucVXjQjv5pdu6RgDkNiav0qUcw/132","comment_is_top":false,"comment_ctime":1570693173,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570693173","product_id":100020901,"comment_content":"1. åœ¨æ¨¡æ‹Ÿé«˜å¹¶å‘è¿‡ç¨‹ä¸­ï¼Œåœ¨ç¬¬ä¸€å°æœºå™¨ç»ˆç«¯ä½¿ç”¨topå‘½ä»¤æŸ¥çœ‹php-fpmçš„è¿›ç¨‹å·pid  <br>2. ä½¿ç”¨`perf record -g -p pid`ä¸€æ®µæ—¶é—´ï¼Œé€€å‡º  <br>3. ä½¿ç”¨`docker cp perf.data phpfpm:&#47;tmp`å°†2ç”Ÿæˆçš„perf.dataæ–‡ä»¶æ‹·è´åˆ°å®¹å™¨ä¸­åˆ†æ  <br>4. æ‰§è¡Œ`docker exec -i -t phpfpm bash`  <br>5. åœ¨å®¹å™¨çš„bashä¸­è¿è¡Œå¦‚ä¸‹å‘½ä»¤  <br>```<br>$ cd &#47;tmp&#47;<br>$ apt-get update &amp;&amp; apt-get install -y linux-tools linux-perf procps<br>$ apt-get install -y linux-perf<br>$ perf_4.9 report<br>```<br>æ˜¾ç¤ºçš„è¿˜æ˜¯åœ°å€ï¼Œè€Œä¸æ˜¯å‡½æ•°å<br>æ˜¾ç¤ºçš„è¿˜æ˜¯åœ°å€ï¼Œè€Œä¸æ˜¯å‡½æ•°å<br>Samples: 175K of event &#39;cpu-clock&#39;, Event count (approx.): 43885750000                                                                                                                     <br>  Children      Self  Command  Shared Object      Symbol                                                                                                                                  `<br>+   99.99%     0.00%  php-fpm  &#47;                  [.] 0xffff80411a63c2e1                                                                                                                  a<br>-   99.99%     0.00%  php-fpm  [unknown]          [.] 0x981e258d4c544155                                                                                                                  a<br>     0x981e258d4c544155                                                                                                                                                                   a<br>   - 0x202e1                                                                                                                                                                              a<br>      - 99.70% 0xaf48b4  <br>ubuntu 18.04æŒ‰ç…§è€å¸ˆgithubä¸Šå®‰è£…çš„dockeré•œåƒ <br>å¦‚æœæå®¢æ—¶é—´ç•™è¨€æ”¯æŒdaimaæˆ–markdownå°±å¥½äº†","like_count":0},{"had_liked":false,"id":125658,"user_name":"feihui","can_delete":false,"product_type":"c1","uid":1007294,"ip_address":"","ucode":"13F1D4A82BC650","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5e/be/9ea55f46.jpg","comment_is_top":false,"comment_ctime":1566222430,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1566222430","product_id":100020901,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œè¯·æ•™ä¸ªé—®é¢˜ã€‚å…³äº Failed to open *** æ–‡ä»¶é—®é¢˜ï¼Œæˆ‘æŒ‰ç…§æ–¹æ³•ä¸‰ï¼ˆå³ bindfsï¼‰çš„æ–¹æ³•è¿›è¡ŒæŒ‚è½½ï¼Œä½†è¿˜æ˜¯æç¤º Failed to open ***ï¼Œè¯·é—®è¿™ä¸ªé—®é¢˜è¦æ€ä¹ˆè§£å†³å‘¢ï¼Ÿthx","like_count":0},{"had_liked":false,"id":112029,"user_name":"Geek_joanie","can_delete":false,"product_type":"c1","uid":1502199,"ip_address":"","ucode":"8539C6460823A0","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIpDaC5iar7IyKERaCAXlH4h7dusfTicSaUtmJWlh0Oh0VViamiclBogXwmkYI4Se72vlHIl2NPNj7kxQ/132","comment_is_top":false,"comment_ctime":1562656781,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562656781","product_id":100020901,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œåšè¿™ä¸ªç»ƒä¹ çš„è¿‡ç¨‹ä¸­ä¹Ÿé‡åˆ°äº†ç¬¦å·ä¸èƒ½è§£æçš„é—®é¢˜ï¼Œé‡‡ç”¨äº†æ‚¨æ‰€è¯´çš„ç¬¬ä¸‰å’Œç¬¬å››ç§æ–¹æ³•åˆ†åˆ«è¿›è¡Œå°è¯•ï¼Œä½†æ˜¯å‘ç°ä»ç„¶æœ‰éƒ¨åˆ†çš„ç¬¦å·ä¸èƒ½è§£æï¼Ÿ<br><br>Samples: 10K of event &#39;cpu-clock&#39;, Event count (approx.): 10074000000<br><br>Â Â ChildrenÂ Â Â Â Â Â SelfÂ Â CommandÂ Â Shared ObjectÂ Â Â Â Â Â Â Â Symbol<br><br>+Â Â Â 99.99%Â Â Â Â Â 0.00%Â Â php-fpmÂ Â libc-2.24.soÂ Â Â Â Â Â Â Â Â [.] __libc_start_main<br><br>+Â Â Â 99.99%Â Â Â Â Â 0.00%Â Â php-fpmÂ Â [unknown]Â Â Â Â Â Â Â Â Â Â Â Â [.] 0x782e258d4c544155<br><br>+Â Â Â 99.76%Â Â Â Â Â 0.00%Â Â php-fpmÂ Â php-fpmÂ Â Â Â Â Â Â Â Â Â Â Â Â Â [.] php_execute_script<br><br>+Â Â Â 99.76%Â Â Â Â Â 0.00%Â Â php-fpmÂ Â php-fpmÂ Â Â Â Â Â Â Â Â Â Â Â Â Â [.] 0xffffaa91f1219c67<br><br>+Â Â Â 99.75%Â Â Â Â Â 0.00%Â Â php-fpmÂ Â php-fpmÂ Â Â Â Â Â Â Â Â Â Â Â Â Â [.] zend_execute<br><br>+Â Â Â 99.75%Â Â Â Â Â 0.00%Â Â php-fpmÂ Â php-fpmÂ Â Â Â Â Â Â Â Â Â Â Â Â Â [.] zend_execute_scripts<br><br>+Â Â Â 97.43%Â Â Â Â 37.76%Â Â php-fpmÂ Â php-fpmÂ Â Â Â Â Â Â Â Â Â Â Â Â Â [.] execute_ex<br><br>+Â Â Â 15.85%Â Â Â Â Â 0.00%Â Â php-fpmÂ Â php-fpmÂ Â Â Â Â Â Â Â Â Â Â Â Â Â [.] 0xffffaa91f11cbea9<br><br>+Â Â Â 11.05%Â Â Â Â 11.04%Â Â php-fpmÂ Â libm-2.24.soÂ Â Â Â Â Â Â Â Â [.] sqrt<br><br>+Â Â Â Â 8.44%Â Â Â Â Â 8.43%Â Â php-fpmÂ Â php-fpmÂ Â Â Â Â Â Â Â Â Â Â Â Â Â [.] add_function<br><br>+Â Â Â Â 8.36%Â Â Â Â Â 0.00%Â Â php-fpmÂ Â php-fpmÂ Â Â Â Â Â Â Â Â Â Â Â Â Â [.] 0xffffaa91f11cbd9a<br><br>+Â Â Â Â 1.95%Â Â Â Â Â 0.00%Â Â php-fpmÂ Â php-fpmÂ Â Â Â Â Â Â Â Â Â Â Â Â Â [.] 0xffffaa91f11b70b7<br><br>+Â Â Â Â 1.95%Â Â Â Â Â 1.95%Â Â php-fpmÂ Â php-fpmÂ Â Â Â Â Â Â Â Â Â Â Â Â Â [.] 0x0000000000a800b7<br><br>","like_count":0},{"had_liked":false,"id":94103,"user_name":"å¶å…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1230077,"ip_address":"","ucode":"E733A7577D4A66","user_header":"https://static001.geekbang.org/account/avatar/00/12/c4/fd/2549489e.jpg","comment_is_top":false,"comment_ctime":1557720366,"is_pvip":true,"replies":[{"id":"33784","content":".net è°ƒè¯•ç¬¦å·è¡¨æœ‰æ²¡æœ‰é…ç½®ï¼Ÿå¯ä»¥å†è¯•è¯•æ–¹æ³•ä¸‰æˆ–è€…æ–¹æ³•ä¸€","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1557835695,"ip_address":"","comment_id":94103,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557720366","product_id":100020901,"comment_content":"è€å¸ˆä½ å¥½ï¼š<br>æˆ‘åœ¨å­¦ä¹ ä½¿ç”¨perf åˆ†ææ‰“åŒ…docker ä¸‹çš„.net coreåº”ç”¨æ—¶ï¼Œæœ‰ä¸ªé—®é¢˜å›°æ‰°äº†å¾ˆä¹… åœ¨é‡‡ç”¨ä½ çš„ç¬¬å››æ¡å»ºè®® å¤–é¢ä½¿ç”¨ perf record è®°å½•ç„¶åè¿›å…¥å®¹å™¨åˆ†æï¼Œä¸€ç›´çœ‹ä¸åˆ°.net core å‡½æ•°å ç½‘ä¸Šæ‰¾äº†ä¸€äº›èµ„æ–™æ¯”å¦‚åœ¨docké•œåƒæ‰“åŒ…çš„æ—¶å€™ export COMPlus_PerfMapEnabled=1ï¼Œè¿˜æ˜¯æ— æ³•çœ‹åˆ°ï¼Œä¸çŸ¥é“å“ªé‡Œå‡ºäº†é—®é¢˜ ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449915,"discussion_content":".net è°ƒè¯•ç¬¦å·è¡¨æœ‰æ²¡æœ‰é…ç½®ï¼Ÿå¯ä»¥å†è¯•è¯•æ–¹æ³•ä¸‰æˆ–è€…æ–¹æ³•ä¸€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557835695,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79919,"user_name":"ä¸€æœ¨æˆèˆŸğŸŒŠ","can_delete":false,"product_type":"c1","uid":1315344,"ip_address":"","ucode":"610EA312D3AAFE","user_header":"https://static001.geekbang.org/account/avatar/00/14/12/10/8ef02bff.jpg","comment_is_top":false,"comment_ctime":1553574139,"is_pvip":false,"replies":[{"id":"29333","content":"è¿™åº”è¯¥æ˜¯ç‰ˆæœ¬å¤ªè€å¯¼è‡´çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1553697708,"ip_address":"","comment_id":79919,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553574139","product_id":100020901,"comment_content":"æˆ‘æ˜¯åœ¨ä¸€å°æœºå™¨ä¸Šï¼Œreport recordå’Œperf reprotçš„ï¼Œreportå‡½æ•°åæ˜¯16è¿›åˆ¶çš„ï¼Œçœ‹å„ä½åŒå­¦çš„ç•™è¨€æ˜¯åœ¨centosä¸‹æ‰ä¼šå‡ºç°ã€‚<br>ä½†æ˜¯æˆ‘æ˜¯Ubuntu 14.04.2 LTSã€‚ä¹Ÿæ˜¯å‡ºç°è¿™ç§é—®é¢˜äº†ã€‚æŒ‰ç…§è€å¸ˆä¸Šé¢çš„æ­¥éª¤ï¼Œ<br>$ apt-get install -y linux-tools-common linux-tools-generic linux-tools-$(uname -r)ï¼‰<br>å®‰è£…åï¼Œè¿˜æ˜¯ä¸è¡Œï¼Œå®åœ¨è®©äººè´¹è§£ã€‚","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444690,"discussion_content":"è¿™åº”è¯¥æ˜¯ç‰ˆæœ¬å¤ªè€å¯¼è‡´çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553697708,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72753,"user_name":"éŸ¦ä¼¯","can_delete":false,"product_type":"c1","uid":1145172,"ip_address":"","ucode":"B9038579C44F55","user_header":"https://static001.geekbang.org/account/avatar/00/11/79/54/34273afa.jpg","comment_is_top":false,"comment_ctime":1551710567,"is_pvip":false,"replies":[{"id":"26732","content":"è¿™ä¸€èˆ¬æ˜¯æºçš„é—®é¢˜ï¼Œæ›´æ–°æºè¯•è¯•ã€‚ä¹Ÿå¯ä»¥æœç´¢debåŒ…æˆ–è€…æºç å®‰è£…","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1551882701,"ip_address":"","comment_id":72753,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551710567","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæˆ‘ç”¨çš„æ˜¯ubuntu16.04ï¼Œå†…æ ¸ç‰ˆæœ¬4.4.0.117ï¼Œå®‰è£…perfæ—¶æç¤ºéœ€è¦å®‰è£…linux-4.4.0.117-genericï¼Œä½†æ˜¯å®‰è£…ä¸Šè¿°åŒ…æ—¶åˆæ‰¾ä¸åˆ°ã€‚éœ€è¦å‡çº§å†…æ ¸ç‰ˆæœ¬è§£å†³å—ï¼Ÿæœ‰æ²¡æœ‰å…¶ä»–æ–¹å¼å¯ä»¥è§£å†³å‘¢","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441724,"discussion_content":"è¿™ä¸€èˆ¬æ˜¯æºçš„é—®é¢˜ï¼Œæ›´æ–°æºè¯•è¯•ã€‚ä¹Ÿå¯ä»¥æœç´¢debåŒ…æˆ–è€…æºç å®‰è£…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551882701,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":67689,"user_name":"å…¨å¤§ç¥å•Š","can_delete":false,"product_type":"c1","uid":1318564,"ip_address":"","ucode":"934EC7D0B0FF24","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJLm7IbU8V19ENfAnAaeibr4X5zQDw2yI8pHy1xtRgVC7S0YjdqI6jKlcQ0ueicuCaIkebSTNelRibsA/132","comment_is_top":false,"comment_ctime":1550222993,"is_pvip":false,"replies":[{"id":"24043","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1550326086,"ip_address":"","comment_id":67689,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1550222993","product_id":100020901,"comment_content":"èŠ±äº†ä¸¤å¤©æ—¶é—´çœ‹å®Œäº†CPUéƒ¨åˆ†ï¼Œæ”¶è·è‰¯å¤šï¼Œä»¥å‰ä¸æ€ä¹ˆç”¨çš„å‘½ä»¤ï¼Œçœ‹äº†è€å¸ˆçš„æ–‡ç« äº†è§£çŸ¥é“äº†å·¥å…·çš„ä½œç”¨ï¼Œä»¥åŠåŸç†ï¼Œå¤§çˆ±~æ¥ä¸‹æ¥å†…å­˜éƒ¨åˆ†-.-ã€‚","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439329,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550326086,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1156012,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a3/ac/69c66da7.jpg","nickname":"jiankewuming","note":"","ucode":"78D9F8DBC28048","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":41778,"discussion_content":"æˆ‘ä¸¤å‘¨æ‰çœ‹å®Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572502645,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63697,"user_name":"ã€è’å”_æˆ_","can_delete":false,"product_type":"c1","uid":1149297,"ip_address":"","ucode":"BF6E05A94272E4","user_header":"https://static001.geekbang.org/account/avatar/00/11/89/71/03a99e56.jpg","comment_is_top":false,"comment_ctime":1548468110,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1548468110","product_id":100020901,"comment_content":"d3","like_count":0},{"had_liked":false,"id":63053,"user_name":"åˆ˜é£","can_delete":false,"product_type":"c1","uid":1239256,"ip_address":"","ucode":"28AAC3C740C78F","user_header":"https://static001.geekbang.org/account/avatar/00/12/e8/d8/6feb6935.jpg","comment_is_top":false,"comment_ctime":1548237989,"is_pvip":false,"replies":[{"id":"22348","content":"æˆ‘è¿˜çœŸæ²¡ç”¨ mac ä¸­çš„ docker è·‘è¿‡ã€‚è°¢è°¢åˆ†äº«","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1548252887,"ip_address":"","comment_id":63053,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1548237989","product_id":100020901,"comment_content":"ç»™å¤§å®¶åˆ†äº«ä¸‹mac è·‘dockeræ—¶å¦‚æœå®‰è£…perfå·¥å…·ï¼š<br>é¦–å…ˆå¯åŠ¨å®¹å™¨æ—¶ï¼Œè¦å¢åŠ å¯åŠ¨å‚æ•°--privilegedï¼Œå¦åˆ™åç»­æ“ä½œæç¤ºæ²¡æƒé™<br>å®‰è£…å·¥å…·ï¼šapt-get install linux-source<br>å¯ä»¥åœ¨&#47;usr&#47;srcä¸‹æ‰¾åˆ°å‹ç¼©å®ï¼Œè§£å‹ï¼Œè¿›å…¥tools&#47;perfï¼Œç„¶åmake&amp;&amp;make installè¿›è¡Œç¼–è¯‘<br>æŠŠç¼–è¯‘ç”Ÿæˆçš„perfæ‹·è´åˆ°&#47;usr&#47;binä¸‹<br>æ³¨æ„ï¼šå¦‚æœä½¿ç”¨çš„æ—¶å€™ä¸æ˜¾ç¤ºè°ƒç”¨å‡½æ•°åï¼Œéœ€è¦å›åˆ°ç¼–è¯‘è„šæœ¬é‚£ä¸€æ­¥ï¼Œä»”ç»†çœ‹æŠ¥è­¦ä¿¡æ¯ç¼ºå“ªäº›ä¾èµ–çš„åŒ…ï¼Œéƒ½ä¸‹è½½ä¸‹æ¥é‡æ–°ç¼–è¯‘ã€‚","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437451,"discussion_content":"æˆ‘è¿˜çœŸæ²¡ç”¨ mac ä¸­çš„ docker è·‘è¿‡ã€‚è°¢è°¢åˆ†äº«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548252887,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57070,"user_name":"training","can_delete":false,"product_type":"c1","uid":1314657,"ip_address":"","ucode":"88AACE5E41ECC3","user_header":"https://static001.geekbang.org/account/avatar/00/14/0f/61/dc7cc89a.jpg","comment_is_top":false,"comment_ctime":1546613453,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546613453","product_id":100020901,"comment_content":"åœ¨macbookä¸Šç”¨dockerä¸Šè¿è¡Œphpfpmå®ä¾‹ï¼Œæ˜¯ä¸æ˜¯æ²¡æœ‰åŠæ³•è·‘é€šperfé‚£äº›æµ‹è¯•,å­¦ä¹ ç”¨ã€‚","like_count":0},{"had_liked":false,"id":57068,"user_name":"training","can_delete":false,"product_type":"c1","uid":1314657,"ip_address":"","ucode":"88AACE5E41ECC3","user_header":"https://static001.geekbang.org/account/avatar/00/14/0f/61/dc7cc89a.jpg","comment_is_top":false,"comment_ctime":1546613351,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1546613351","product_id":100020901,"comment_content":"åœ¨macbookä¸Šdockerè¿è¡Œphpfpm é‚£ä¸ªå®ä¾‹ï¼Œæœ‰ä»€ä¹ˆåŠæ³•è¿è¡Œperfn","like_count":0,"discussions":[{"author":{"id":1335362,"avatar":"https://static001.geekbang.org/account/avatar/00/14/60/42/ed42e7cd.jpg","nickname":"simoom","note":"","ucode":"6AE2EED1295F9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285343,"discussion_content":"ç”¨vmç‰ˆçš„docker","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592812742,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56259,"user_name":"èš‚èšå†…æ¨+v","can_delete":false,"product_type":"c1","uid":1050508,"ip_address":"","ucode":"24B10AEE54B3FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/07/8c/0d886dcc.jpg","comment_is_top":false,"comment_ctime":1546412770,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546412770","product_id":100020901,"comment_content":"æˆ‘ä»¬çš„å†…æ ¸ç‰ˆæœ¬æ˜¯3.10ï¼Œå®‰è£…goï¼Œç„¶åå†å®‰è£…pcstatä¹Ÿä¸å¤ªæ–¹ä¾¿ã€‚<br>äºæ˜¯æˆ‘ç”¨perfè§‚å¯Ÿcacheï¼Œæ¬¡æ–¹æ¡ˆæ˜¯å¦æœ‰ç¼ºé™·ï¼Ÿ<br>æˆ‘çš„å‘½ä»¤å¦‚ä¸‹ï¼Œè§‚å¯Ÿ60s<br>perf stat -e cache-misses -p [PID] -a sleep 60","like_count":0},{"had_liked":false,"id":55825,"user_name":"èŠ±å¼€è¶è‡ªæ¥","can_delete":false,"product_type":"c1","uid":1358144,"ip_address":"","ucode":"767D55E7A82975","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKibu8C3CeYGF6JCBribiaEPia5gibaQnj9icryPVwoF6ibosmdicXJIhBEUdn0aDwZQ32oTyJL86DgDswhAg/132","comment_is_top":false,"comment_ctime":1546318877,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546318877","product_id":100020901,"comment_content":"d5","like_count":0},{"had_liked":false,"id":55621,"user_name":"chon","can_delete":false,"product_type":"c1","uid":1068925,"ip_address":"","ucode":"1C32170972F726","user_header":"https://static001.geekbang.org/account/avatar/00/10/4f/7d/dd852b04.jpg","comment_is_top":false,"comment_ctime":1546244365,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1546244365","product_id":100020901,"comment_content":"linuxå†…æ ¸ç›¸å…³çŸ¥è¯†ï¼Œæœ‰å•¥ä¹¦æ¨èæ²¡ï¼Ÿè°¢è°¢","like_count":0},{"had_liked":false,"id":55598,"user_name":"å¤§é£","can_delete":false,"product_type":"c1","uid":1320080,"ip_address":"","ucode":"2D98888FC63CA9","user_header":"","comment_is_top":false,"comment_ctime":1546239871,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546239871","product_id":100020901,"comment_content":"æ‰“å¡","like_count":0},{"had_liked":false,"id":55205,"user_name":"å¦‚æœ","can_delete":false,"product_type":"c1","uid":1320638,"ip_address":"","ucode":"138A3EEEE50850","user_header":"","comment_is_top":false,"comment_ctime":1546066120,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546066120","product_id":100020901,"comment_content":"DAY14ï¼Œæ‰“å¡","like_count":0},{"had_liked":false,"id":54650,"user_name":"Only now","can_delete":false,"product_type":"c1","uid":1038574,"ip_address":"","ucode":"C617473A03AE27","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d8/ee/6e7c2264.jpg","comment_is_top":false,"comment_ctime":1545922706,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545922706","product_id":100020901,"comment_content":"mark ","like_count":0},{"had_liked":false,"id":53579,"user_name":"å­è½©Zixuan","can_delete":false,"product_type":"c1","uid":1045688,"ip_address":"","ucode":"293D10B7A89931","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f4/b8/43a4c2c0.jpg","comment_is_top":false,"comment_ctime":1545697794,"is_pvip":false,"replies":[{"id":"19511","content":"å¯¹çš„ï¼Œè‡³å°‘è¦ä»ç³»ç»Ÿå’Œåº”ç”¨ä¸¤ä¸ªå±‚é¢ç›‘æ§ã€‚ç³»ç»Ÿå±‚é¢å°±æ˜¯æˆ‘ä»¬ä¸“æ é‡Œæåˆ°çš„ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µï¼›åº”ç”¨å±‚é¢é™¤äº†è¿›ç¨‹çš„èµ„æºç›‘æ§ä¹‹å¤–ï¼Œè¿˜æœ‰åº”ç”¨å¯¹å¤–çš„æ¥å£ã€ä¸å…¶ä»–æœåŠ¡é—´è°ƒç”¨ã€æ•°æ®åº“ã€åº”ç”¨å†…éƒ¨åŠŸèƒ½æ¨¡å—ç­‰ä¸€ç³»åˆ—çš„metricsï¼ˆå¯ä»¥å‚è€ƒAPMï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1545730632,"ip_address":"","comment_id":53579,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545697794","product_id":100020901,"comment_content":"æ„Ÿè°¢è€å¸ˆè€å¿ƒå›å¤ï¼Œæ¥ç€çº¿ä¸Šå®šä½é—®é¢˜æƒ³é—®ä¸‹ï¼Œå¦‚æœè¦äº‹å…ˆåšå¥½ç›‘æ§ç³»ç»Ÿï¼Œä¸€èˆ¬éœ€è¦åšåˆ°ä»€ä¹ˆç¨‹åº¦ï¼Ÿç›®å‰åªæœ‰é˜¿é‡Œäº‘çš„ç›‘æ§æ„Ÿè§‰ä¸å¤Ÿç”¨","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434190,"discussion_content":"å¯¹çš„ï¼Œè‡³å°‘è¦ä»ç³»ç»Ÿå’Œåº”ç”¨ä¸¤ä¸ªå±‚é¢ç›‘æ§ã€‚ç³»ç»Ÿå±‚é¢å°±æ˜¯æˆ‘ä»¬ä¸“æ é‡Œæåˆ°çš„ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µï¼›åº”ç”¨å±‚é¢é™¤äº†è¿›ç¨‹çš„èµ„æºç›‘æ§ä¹‹å¤–ï¼Œè¿˜æœ‰åº”ç”¨å¯¹å¤–çš„æ¥å£ã€ä¸å…¶ä»–æœåŠ¡é—´è°ƒç”¨ã€æ•°æ®åº“ã€åº”ç”¨å†…éƒ¨åŠŸèƒ½æ¨¡å—ç­‰ä¸€ç³»åˆ—çš„metricsï¼ˆå¯ä»¥å‚è€ƒAPMï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545730632,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":53390,"user_name":"è…¾è¾¾","can_delete":false,"product_type":"c1","uid":1079876,"ip_address":"","ucode":"72F9CFBA44FDEE","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL9hlAIKQ1sGDu16oWLOHyCSicr18XibygQSMLMjuDvKk73deDlH9aMphFsj41WYJh121aniaqBLiaMNg/132","comment_is_top":false,"comment_ctime":1545637216,"is_pvip":false,"replies":[{"id":"19440","content":"çœ‹åº”ç”¨çš„ç±»å‹ï¼Œæœ‰äº›é™æ€ç¼–è¯‘çš„å¯ä»¥ä¸‹è½½ä¸‹æ¥ï¼Œä½†ä¹Ÿæœ‰å¾ˆå¤šåº”ç”¨ä¾èµ–å¤§é‡çš„åŠ¨æ€åº“ï¼Œæ”¾åˆ°å®¹å™¨å¤–é¢å°±æ˜¯è¿™å„¿æåˆ°çš„æ–¹æ³•ä¸€äº†","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1545694940,"ip_address":"","comment_id":53390,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545637216","product_id":100020901,"comment_content":"dockerç¬¦å·æ‰¾ä¸åˆ°çš„é—®é¢˜ï¼Œæ–‡ç« é‡Œå·²ç»ç»™äº†å‡ ä¸ªæ–¹æ³•ï¼Œæˆ‘æƒ³é—®çš„æ˜¯ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥ç›´æ¥æŠŠdockerçš„ç¬¦å·ä¸‹è½½ä¸‹æ¥ï¼Ÿä»å®¿ä¸»ç›´æ¥çœ‹å‡½æ•°è°ƒç”¨æ ˆï¼Ÿ dockerä¸ä¼šåƒjavaä¸€æ ·ï¼Œåœ¨javaä»£ç å±‚é¢åï¼Œä»ç³»ç»Ÿå±‚é¢(cè¯­è¨€å±‚é¢)å¾ˆéš¾æŸ¥é—®é¢˜ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434124,"discussion_content":"çœ‹åº”ç”¨çš„ç±»å‹ï¼Œæœ‰äº›é™æ€ç¼–è¯‘çš„å¯ä»¥ä¸‹è½½ä¸‹æ¥ï¼Œä½†ä¹Ÿæœ‰å¾ˆå¤šåº”ç”¨ä¾èµ–å¤§é‡çš„åŠ¨æ€åº“ï¼Œæ”¾åˆ°å®¹å™¨å¤–é¢å°±æ˜¯è¿™å„¿æåˆ°çš„æ–¹æ³•ä¸€äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1545694940,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":53146,"user_name":"é£é£˜ï¼Œå¾ç‹¬æ€","can_delete":false,"product_type":"c1","uid":1131032,"ip_address":"","ucode":"4DF0E7DC22EE53","user_header":"https://static001.geekbang.org/account/avatar/00/11/42/18/edc1b373.jpg","comment_is_top":false,"comment_ctime":1545612156,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545612156","product_id":100020901,"comment_content":"æ‰“å¡","like_count":0},{"had_liked":false,"id":53055,"user_name":"å­è½©Zixuan","can_delete":false,"product_type":"c1","uid":1045688,"ip_address":"","ucode":"293D10B7A89931","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f4/b8/43a4c2c0.jpg","comment_is_top":false,"comment_ctime":1545576504,"is_pvip":false,"replies":[{"id":"19451","content":"æ˜¯çš„ï¼Œçº¿ä¸Šé—®é¢˜è¦ä¼˜å…ˆæ¢å¤ï¼Œæ’æŸ¥ä¸èƒ½èŠ±è¿‡å¤šæ—¶é—´ï¼Œæ‰€ä»¥å¾ˆå¤šæƒ…å†µä¸‹éƒ½è¦é ç›‘æ§ç³»ç»Ÿäº†è§£å½“æ—¶çš„çŠ¶å†µã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒåŸæ¥æœåŠ¡è¿˜åœ¨çš„è¯ï¼Œå¯ä»¥è¯•è¯•èƒ½å¦é‡ç°é—®é¢˜ï¼Œæ¯”å¦‚æ¨¡æ‹Ÿå½“æ—¶çš„è¯·æ±‚ï¼›æˆ–è€…ä¹Ÿå¯ä»¥ä»æ—¥å¿—ä¸­å¯»æ‰¾çº¿ç´¢ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1545697065,"ip_address":"","comment_id":53055,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545576504","product_id":100020901,"comment_content":"è¶å‘¨æœ«è·Ÿä¸Šäº†è€å¸ˆçš„è„šæ­¥ï¼Œè€å¸ˆè®²è§£çš„å¾ˆå¥½ï¼Œæ„Ÿè°¢ï¼å¦å¤–æˆ‘æ³¨æ„åˆ°è€å¸ˆåœ¨ä¸“æ é‡Œçš„å®ä¾‹éƒ½æ˜¯ç°åœºè°ƒè¯•ï¼Œä½†æ˜¯æˆ‘é‡åˆ°è¿‡å®é™…æƒ…å†µéœ€è¦å°½å¿«æ¢å¤æœåŠ¡ï¼Œå…ˆæŠŠä»£ç è¿˜åŸé‡æ–°å‘å¸ƒä¿è¯æœåŠ¡å¯ç”¨ï¼Œåªç•™ä¸‹ä¸€å°ä¿ç•™é—®é¢˜ç°åœºçš„æœºå™¨ï¼Œä½†æ˜¯å·²ç»ä¸æ¥å—è¯·æ±‚äº†ï¼Œåƒè¿™ç§æƒ…å†µé™¤äº†äº‹å…ˆç›‘æ§ä»¥å¤–ï¼Œè¿˜æœ‰åˆ«çš„æ–¹æ¡ˆèƒ½å®šä½é—®é¢˜å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434024,"discussion_content":"æ˜¯çš„ï¼Œçº¿ä¸Šé—®é¢˜è¦ä¼˜å…ˆæ¢å¤ï¼Œæ’æŸ¥ä¸èƒ½èŠ±è¿‡å¤šæ—¶é—´ï¼Œæ‰€ä»¥å¾ˆå¤šæƒ…å†µä¸‹éƒ½è¦é ç›‘æ§ç³»ç»Ÿäº†è§£å½“æ—¶çš„çŠ¶å†µã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒåŸæ¥æœåŠ¡è¿˜åœ¨çš„è¯ï¼Œå¯ä»¥è¯•è¯•èƒ½å¦é‡ç°é—®é¢˜ï¼Œæ¯”å¦‚æ¨¡æ‹Ÿå½“æ—¶çš„è¯·æ±‚ï¼›æˆ–è€…ä¹Ÿå¯ä»¥ä»æ—¥å¿—ä¸­å¯»æ‰¾çº¿ç´¢ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1545697065,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":53043,"user_name":"è®¸å±±å±±","can_delete":false,"product_type":"c1","uid":1241643,"ip_address":"","ucode":"2A5168DEB58F19","user_header":"https://static001.geekbang.org/account/avatar/00/12/f2/2b/7d9751bb.jpg","comment_is_top":false,"comment_ctime":1545574660,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545574660","product_id":100020901,"comment_content":"è¿™ä¸¤æœŸçš„ç­”ç–‘å¸®åŠ©å¾ˆå¤§ï¼Œè°¢è°¢è€å¸ˆäº†ã€‚","like_count":0},{"had_liked":false,"id":52724,"user_name":"åŒ","can_delete":false,"product_type":"c1","uid":1031605,"ip_address":"","ucode":"D0AC0A69A611C8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bd/b5/b8dfa30a.jpg","comment_is_top":false,"comment_ctime":1545487812,"is_pvip":false,"replies":[{"id":"19196","content":"å¯ä»¥æŠ“åŒ…å¯¹æ¯”ä¸€ä¸‹ï¼Œçœ‹çœ‹Javaåº”ç”¨è·Ÿcurlæœ‰ä»€ä¹ˆä¸åŒã€‚ç½‘ç»œé—®é¢˜åé¢è¿˜ä¼šè®²çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1545536973,"ip_address":"","comment_id":52724,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545487812","product_id":100020901,"comment_content":"è¯·æ•™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬çº¿ä¸Šæœ‰å°æœºå™¨aä¸Šéƒ¨ç½²äº†ä¸€ä¸ªjavaåº”ç”¨ï¼Œé€šè¿‡javaæ¥è°ƒç”¨å¤–ç½‘çš„ä¸€ä¸ªhttpæœåŠ¡ï¼Œä½†æ˜¯é€Ÿåº¦ç‰¹åˆ«æ…¢ï¼Œä½†æ˜¯åœ¨æœºå™¨ä¸Šé€šè¿‡curlè®¿é—®å°±ç‰¹åˆ«å¿«ï¼Œæˆ‘ä»¬æ€€ç–‘æ˜¯åœ¨sockeyå±‚é¢å¯èƒ½å­˜åœ¨ä»€ä¹ˆé—®é¢˜ï¼Œè¯·é—®å¦‚ä½•æ’æŸ¥å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433959,"discussion_content":"å¯ä»¥æŠ“åŒ…å¯¹æ¯”ä¸€ä¸‹ï¼Œçœ‹çœ‹Javaåº”ç”¨è·Ÿcurlæœ‰ä»€ä¹ˆä¸åŒã€‚ç½‘ç»œé—®é¢˜åé¢è¿˜ä¼šè®²çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545536973,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52704,"user_name":"å¾®æ€","can_delete":false,"product_type":"c1","uid":1004349,"ip_address":"","ucode":"853C48AA183A7B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/53/3d/1189e48a.jpg","comment_is_top":false,"comment_ctime":1545481714,"is_pvip":true,"discussion_count":0,"race_medal":4,"score":"1545481714","product_id":100020901,"comment_content":"ç»™è€å¸ˆç‚¹èµğŸ‘","like_count":0},{"had_liked":false,"id":52636,"user_name":"walker","can_delete":false,"product_type":"c1","uid":1324219,"ip_address":"","ucode":"FA5B2400A53730","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/bb/0b971fca.jpg","comment_is_top":false,"comment_ctime":1545459885,"is_pvip":false,"replies":[{"id":"19192","content":"è¯•è¯•æ–‡ä¸­çš„æ–¹æ³•è¿˜æ˜¯çœ‹ä¸åˆ°å—ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1545536341,"ip_address":"","comment_id":52636,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545459885","product_id":100020901,"comment_content":"æˆ‘çš„centos7 å®‰è£…çš„yumå®‰è£…çš„perf 3.10çš„ä¹Ÿæ˜¯åªæœ‰åœ°å€ï¼Œçœ‹ä¸åˆ°å‡½æ•°åã€‚","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433930,"discussion_content":"è¯•è¯•æ–‡ä¸­çš„æ–¹æ³•è¿˜æ˜¯çœ‹ä¸åˆ°å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545536341,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52585,"user_name":"LeonğŸ“·","can_delete":false,"product_type":"c1","uid":1219496,"ip_address":"","ucode":"B9BBD1EFAAE5A2","user_header":"https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg","comment_is_top":false,"comment_ctime":1545445598,"is_pvip":false,"replies":[{"id":"19187","content":"è¿™ç§æƒ…å†µæ²¡æ³•SSHæ“ä½œï¼Œåªèƒ½é ç›‘æ§ç³»ç»Ÿäº†ï¼Œä¸€å®šè¦æŠŠè¿™äº›æ€§èƒ½æŒ‡æ ‡ç›‘æ§èµ·æ¥","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1545535809,"ip_address":"","comment_id":52585,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545445598","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªé—®é¢˜ï¼Œå¦‚æœiowaitè¿‡é«˜ï¼Œå¯¼è‡´ç³»ç»Ÿå¡æ­»ï¼Œsshå‡ ä¹æ“ä½œä¸åŠ¨ï¼Œæ€ä¹ˆå¿«é€Ÿæ‰¾å‡ºè¿›ç¨‹æ€æ‰ï¼Œiotopæ•²äº†20åˆ†é’Ÿæ²¡å“åº”","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433914,"discussion_content":"è¿™ç§æƒ…å†µæ²¡æ³•SSHæ“ä½œï¼Œåªèƒ½é ç›‘æ§ç³»ç»Ÿäº†ï¼Œä¸€å®šè¦æŠŠè¿™äº›æ€§èƒ½æŒ‡æ ‡ç›‘æ§èµ·æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545535809,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52426,"user_name":"å¤œç©ºä¸­æœ€äº®çš„æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1267566,"ip_address":"","ucode":"ADC3E7B6789955","user_header":"https://static001.geekbang.org/account/avatar/00/13/57/6e/b6795c44.jpg","comment_is_top":false,"comment_ctime":1545380197,"is_pvip":false,"replies":[{"id":"19075","content":"ç¡¬ä¼¤å°±è¦å¤šèŠ±æ—¶é—´æ‹¿ä¸‹ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1545386198,"ip_address":"","comment_id":52426,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545380197","product_id":100020901,"comment_content":"è‹±æ–‡æ˜¯ç¡¬ä¼¤","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433871,"discussion_content":"ç¡¬ä¼¤å°±è¦å¤šèŠ±æ—¶é—´æ‹¿ä¸‹ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545386198,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52287,"user_name":"clivexiang","can_delete":false,"product_type":"c1","uid":1281097,"ip_address":"","ucode":"056992CA327C2F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/bBh6rXtmcc3IMoaicHCYmsNtLyBKReQWUMHa9R6CwdWWIv0wMg2ibNNsCDKnCrvBWCJ5yWjFpz3EncDd15QzuomQ/132","comment_is_top":false,"comment_ctime":1545358773,"is_pvip":false,"replies":[{"id":"19080","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1545386349,"ip_address":"","comment_id":52287,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545358773","product_id":100020901,"comment_content":"flag","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433821,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545386349,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52249,"user_name":"é¥¼å­","can_delete":false,"product_type":"c1","uid":1085953,"ip_address":"","ucode":"981A44836A5216","user_header":"https://static001.geekbang.org/account/avatar/00/10/92/01/c723d180.jpg","comment_is_top":false,"comment_ctime":1545354468,"is_pvip":false,"replies":[{"id":"19082","content":"+1","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1545386364,"ip_address":"","comment_id":52249,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545354468","product_id":100020901,"comment_content":"æ‰“å¡å­¦ä¹ ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433803,"discussion_content":"+1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545386364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52227,"user_name":"Geek_101627","can_delete":false,"product_type":"c1","uid":1070389,"ip_address":"","ucode":"F246019019F1CB","user_header":"https://static001.geekbang.org/account/avatar/00/10/55/35/09e7dfde.jpg","comment_is_top":false,"comment_ctime":1545353209,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545353209","product_id":100020901,"comment_content":"æ‰“å¡","like_count":0},{"had_liked":false,"id":52224,"user_name":"å°æ–‡","can_delete":false,"product_type":"c1","uid":1198258,"ip_address":"","ucode":"4D6257B8D63FA4","user_header":"https://static001.geekbang.org/account/avatar/00/12/48/b2/cca85581.jpg","comment_is_top":false,"comment_ctime":1545353105,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545353105","product_id":100020901,"comment_content":"æ‰“å¡","like_count":0},{"had_liked":false,"id":52219,"user_name":"æ¹–æ¹˜å¿—","can_delete":false,"product_type":"c1","uid":1285578,"ip_address":"","ucode":"C8B069B3AD4FEA","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erJR5Kj0Xm6LykFHLaWqHjQiaroVxgdoGI7uHEGz2D3PfibWNkBYP23QLzFmcuicgKLbqUch0ZJ2ZNOA/132","comment_is_top":false,"comment_ctime":1545352761,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545352761","product_id":100020901,"comment_content":"D14","like_count":0},{"had_liked":false,"id":52207,"user_name":"Kyle Liu","can_delete":false,"product_type":"c1","uid":1109324,"ip_address":"","ucode":"21EBDE63DE30A0","user_header":"https://static001.geekbang.org/account/avatar/00/10/ed/4c/4f645bda.jpg","comment_is_top":false,"comment_ctime":1545352294,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545352294","product_id":100020901,"comment_content":"å‰æ’","like_count":0},{"had_liked":false,"id":52205,"user_name":"Cranliu","can_delete":false,"product_type":"c1","uid":1304302,"ip_address":"","ucode":"DC2DE84B142FDA","user_header":"https://static001.geekbang.org/account/avatar/00/13/e6/ee/e3c4c9b3.jpg","comment_is_top":false,"comment_ctime":1545351866,"is_pvip":false,"replies":[{"id":"19087","content":"ğŸ‘ ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1545386589,"ip_address":"","comment_id":52205,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545351866","product_id":100020901,"comment_content":"è¿‘æœŸå‡†å¤‡æŠŠå¸¸ç”¨çš„å·¥å…·manä¸€æŠŠï¼Œå…»æˆä¹ æƒ¯ã€‚","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433781,"discussion_content":"ğŸ‘ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545386589,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52194,"user_name":"å¤§é’è›™","can_delete":false,"product_type":"c1","uid":1315713,"ip_address":"","ucode":"D0066C85F48515","user_header":"https://static001.geekbang.org/account/avatar/00/14/13/81/f16a0401.jpg","comment_is_top":false,"comment_ctime":1545349238,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545349238","product_id":100020901,"comment_content":"æ²™å‘","like_count":0}]}