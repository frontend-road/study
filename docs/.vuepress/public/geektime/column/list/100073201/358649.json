{"id":358649,"title":"13 | ä¸´æ—¶è¡¨ï¼šå¤æ‚æŸ¥è¯¢ï¼Œå¦‚ä½•ä¿å­˜ä¸­é—´ç»“æœï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æœ±æ™“å³°ã€‚ä»Šå¤©ï¼Œæˆ‘æ¥å’Œä½ èŠä¸€èŠä¸´æ—¶è¡¨ã€‚</p><p>å½“æˆ‘ä»¬é‡åˆ°ä¸€äº›å¤æ‚æŸ¥è¯¢çš„æ—¶å€™ï¼Œç»å¸¸æ— æ³•ä¸€æ­¥åˆ°ä½ï¼Œæˆ–è€…æ˜¯ä¸€æ­¥åˆ°ä½ä¼šå¯¼è‡´æŸ¥è¯¢è¯­å¥å¤ªè¿‡å¤æ‚ï¼Œå¼€å‘å’Œç»´æŠ¤çš„æˆæœ¬è¿‡é«˜ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå°±å¯ä»¥ä½¿ç”¨ä¸´æ—¶è¡¨ã€‚</p><p>ä¸‹é¢ï¼Œæˆ‘å°±ç»“åˆå®é™…çš„é¡¹ç›®æ¥è®²è§£ä¸€ä¸‹ï¼Œæ€ä¹ˆæ‹†è§£ä¸€ä¸ªå¤æ‚çš„æŸ¥è¯¢ï¼Œé€šè¿‡ä¸´æ—¶è¡¨æ¥ä¿å­˜ä¸­é—´ç»“æœï¼Œä»è€ŒæŠŠä¸€ä¸ªå¤æ‚æŸ¥è¯¢å˜å¾—ç®€å•è€Œä¸”å®¹æ˜“å®ç°ã€‚</p><h2>ä¸´æ—¶è¡¨æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>ä¸´æ—¶è¡¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„è¡¨ï¼Œç”¨æ¥å­˜å‚¨æŸ¥è¯¢çš„ä¸­é—´ç»“æœï¼Œå¹¶ä¸”ä¼šéšç€å½“å‰è¿æ¥çš„ç»“æŸè€Œè‡ªåŠ¨åˆ é™¤ã€‚<strong>MySQLä¸­æœ‰2ç§ä¸´æ—¶è¡¨ï¼Œåˆ†åˆ«æ˜¯å†…éƒ¨ä¸´æ—¶è¡¨å’Œå¤–éƒ¨ä¸´æ—¶è¡¨</strong>ï¼š</p><ul>\n<li>å†…éƒ¨ä¸´æ—¶è¡¨ä¸»è¦ç”¨äºæ€§èƒ½ä¼˜åŒ–ï¼Œç”±ç³»ç»Ÿè‡ªåŠ¨äº§ç”Ÿï¼Œæˆ‘ä»¬æ— æ³•çœ‹åˆ°ï¼›</li>\n<li>å¤–éƒ¨ä¸´æ—¶è¡¨é€šè¿‡SQLè¯­å¥åˆ›å»ºï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ã€‚</li>\n</ul><p>å› ä¸ºæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨å†…éƒ¨ä¸´æ—¶è¡¨ï¼Œæ‰€ä»¥æˆ‘å°±ä¸å¤šè®²äº†ã€‚ä»Šå¤©ï¼Œæˆ‘æ¥é‡ç‚¹è®²ä¸€è®²æˆ‘ä»¬å¯ä»¥åˆ›å»ºå’Œä½¿ç”¨çš„å¤–éƒ¨ä¸´æ—¶è¡¨ã€‚</p><p>é¦–å…ˆï¼Œä½ è¦çŸ¥é“ä¸´æ—¶è¡¨çš„åˆ›å»ºè¯­æ³•ç»“æ„ï¼š</p><pre><code>CREATE TEMPORARY TABLE è¡¨å\n(\nå­—æ®µå å­—æ®µç±»å‹,\n...\n);\n</code></pre><p>è·Ÿæ™®é€šè¡¨ç›¸æ¯”ï¼Œä¸´æ—¶è¡¨æœ‰3ä¸ªä¸åŒçš„ç‰¹å¾ï¼š</p><ol>\n<li>ä¸´æ—¶è¡¨çš„åˆ›å»ºè¯­æ³•éœ€è¦ç”¨åˆ°å…³é”®å­—TEMPORARYï¼›</li>\n<li>ä¸´æ—¶è¡¨åˆ›å»ºå®Œæˆä¹‹åï¼Œåªæœ‰å½“å‰è¿æ¥å¯è§ï¼Œå…¶ä»–è¿æ¥æ˜¯çœ‹ä¸åˆ°çš„ï¼Œå…·æœ‰è¿æ¥éš”ç¦»æ€§ï¼›</li>\n<li>ä¸´æ—¶è¡¨åœ¨å½“å‰è¿æ¥ç»“æŸä¹‹åï¼Œä¼šè¢«è‡ªåŠ¨åˆ é™¤ã€‚</li>\n</ol><p>å› ä¸ºä¸´æ—¶è¡¨æœ‰è¿æ¥éš”ç¦»æ€§ï¼Œä¸åŒè¿æ¥åˆ›å»ºç›¸åŒåç§°çš„ä¸´æ—¶è¡¨ä¹Ÿä¸ä¼šäº§ç”Ÿå†²çªï¼Œé€‚åˆå¹¶å‘ç¨‹åºçš„è¿è¡Œã€‚è€Œä¸”ï¼Œè¿æ¥ç»“æŸä¹‹åï¼Œä¸´æ—¶è¡¨ä¼šè‡ªåŠ¨åˆ é™¤ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒå¤§é‡æ— ç”¨çš„ä¸­é—´æ•°æ®ä¼šæ®‹ç•™åœ¨æ•°æ®åº“ä¸­ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨è¿™äº›ç‰¹ç‚¹ï¼Œç”¨ä¸´æ—¶è¡¨æ¥å­˜å‚¨SQLæŸ¥è¯¢çš„ä¸­é—´ç»“æœã€‚</p><!-- [[[read_end]]] --><h2>å¦‚ä½•ç”¨ä¸´æ—¶è¡¨ç®€åŒ–å¤æ‚æŸ¥è¯¢ï¼Ÿ</h2><p>åˆšåˆšæåˆ°ï¼Œä¸´æ—¶è¡¨å¯ä»¥ç®€åŒ–å¤æ‚æŸ¥è¯¢ï¼Œå…·ä½“æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿæˆ‘æ¥ä»‹ç»ä¸€ä¸‹ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œè¶…å¸‚ç»è¥è€…æƒ³è¦æŸ¥è¯¢2020å¹´12æœˆçš„ä¸€äº›ç‰¹å®šå•†å“é”€å”®æ•°é‡ã€è¿›è´§æ•°é‡ã€è¿”å‚æ•°é‡ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬å°±è¦å…ˆæŠŠé”€å”®ã€è¿›è´§ã€è¿”å‚è¿™3ä¸ªæ¨¡å—åˆ†å¼€è®¡ç®—ï¼Œç”¨ä¸´æ—¶è¡¨æ¥å­˜å‚¨ä¸­é—´è®¡ç®—çš„ç»“æœï¼Œæœ€ååˆå¹¶åœ¨ä¸€èµ·ï¼Œå½¢æˆè¶…å¸‚ç»è¥è€…æƒ³è¦çš„ç»“æœé›†ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬ç»Ÿè®¡ä¸€ä¸‹åœ¨2020å¹´12æœˆçš„å•†å“é”€å”®æ•°æ®ã€‚</p><p>å‡è®¾æˆ‘ä»¬çš„é”€å”®æµæ°´è¡¨ï¼ˆmysalesï¼‰å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/ay/f5/ayy269bb7dd210a1f1716ebd2947e9f5.jpeg?wh=1494*632\" alt=\"\"></p><p>æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„SQLè¯­å¥ï¼ŒæŸ¥è¯¢å‡ºæ¯ä¸ªå•å“çš„é”€å”®æ•°é‡å’Œé”€å”®é‡‘é¢ï¼Œå¹¶å­˜å…¥ä¸´æ—¶è¡¨ï¼š</p><pre><code>mysql&gt; CREATE TEMPORARY TABLE demo.mysales\n-&gt; SELECT                        -- ç”¨æŸ¥è¯¢çš„ç»“æœç›´æ¥ç”Ÿæˆä¸´æ—¶è¡¨\n-&gt; itemnumber,\n-&gt; SUM(quantity) AS QUANTITY,\n-&gt; SUM(salesvalue) AS salesvalue\n-&gt; FROM\n-&gt; demo.transactiondetails\n-&gt; GROUP BY itemnumber\n-&gt; ORDER BY itemnumber;\nQuery OK, 2 rows affected (0.01 sec)\nRecords: 2 Duplicates: 0 Warnings: 0\n \nmysql&gt; SELECT * FROM demo.mysales;\n+------------+----------+------------+\n| itemnumber | QUANTITY | salesvalue |\n+------------+----------+------------+\n| 1 | 5.000 | 411.18 |\n| 2 | 5.000 | 24.75 |\n+------------+----------+------------+\n2 rows in set (0.01 sec)\n</code></pre><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œæˆ‘æ˜¯ç›´æ¥ç”¨æŸ¥è¯¢ç»“æœæ¥åˆ›å»ºçš„ä¸´æ—¶è¡¨ã€‚å› ä¸ºåˆ›å»ºä¸´æ—¶è¡¨å°±æ˜¯ä¸ºäº†å­˜æ”¾æŸä¸ªæŸ¥è¯¢çš„ä¸­é—´ç»“æœã€‚ç›´æ¥ç”¨æŸ¥è¯¢è¯­å¥åˆ›å»ºä¸´æ—¶è¡¨æ¯”è¾ƒå¿«æ·ï¼Œè€Œä¸”è¿æ¥ç»“æŸåä¸´æ—¶è¡¨å°±ä¼šè¢«è‡ªåŠ¨åˆ é™¤ï¼Œä¸éœ€è¦è¿‡å¤šè€ƒè™‘è¡¨çš„ç»“æ„è®¾è®¡é—®é¢˜ï¼ˆæ¯”å¦‚å†—ä½™ã€æ•ˆç‡ç­‰ï¼‰ã€‚</p><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ªå­˜å‚¨å•å“é”€å”®ç»Ÿè®¡çš„ä¸´æ—¶è¡¨ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è®¡ç®—ä¸€ä¸‹2020å¹´12æœˆçš„è¿›è´§ä¿¡æ¯ã€‚</p><p>æˆ‘ä»¬çš„è¿›è´§æ•°æ®åŒ…æ‹¬è¿›è´§å•å¤´è¡¨ï¼ˆimportheadï¼‰å’Œè¿›è´§å•æ˜ç»†è¡¨ï¼ˆimportdetailsï¼‰ã€‚</p><p>è¿›è´§å•å¤´è¡¨åŒ…æ‹¬è¿›è´§å•ç¼–å·ã€ä¾›è´§å•†ç¼–å·ã€ä»“åº“ç¼–å·ã€æ“ä½œå‘˜ç¼–å·å’ŒéªŒæ”¶æ—¥æœŸï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/0a/80/0acf5b6ee4f154414fefd543b33f7180.jpeg?wh=1492*569\" alt=\"\"></p><p>è¿›è´§å•æ˜ç»†è¡¨åŒ…æ‹¬è¿›è´§å•ç¼–å·ã€å•†å“ç¼–å·ã€è¿›è´§æ•°é‡ã€è¿›è´§ä»·æ ¼å’Œè¿›è´§é‡‘é¢ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/36/36/368d0f558d497be064d264baaf99e636.jpeg?wh=1429*698\" alt=\"\"></p><p>æˆ‘ä»¬ç”¨ä¸‹é¢çš„SQLè¯­å¥è®¡ç®—è¿›è´§æ•°æ®ï¼Œå¹¶ä¸”ä¿å­˜åœ¨ä¸´æ—¶è¡¨é‡Œé¢ï¼š</p><pre><code>mysql&gt; CREATE TEMPORARY TABLE demo.myimport\n-&gt; SELECT b.itemnumber,SUM(b.quantity) AS quantity,SUM(b.importvalue) AS importvalue\n-&gt; FROM demo.importhead a JOIN demo.importdetails b\n-&gt; ON (a.listnumber=b.listnumber)\n-&gt; GROUP BY b.itemnumber;\nQuery OK, 3 rows affected (0.01 sec)\nRecords: 3 Duplicates: 0 Warnings: 0\n \nmysql&gt; SELECT * FROM demo.myimport;\n+------------+----------+-------------+\n| itemnumber | quantity | importvalue |\n+------------+----------+-------------+\n| 1 | 5.000 | 290.00 |\n| 2 | 5.000 | 15.00 |\n| 3 | 8.000 | 40.00 |\n+------------+----------+-------------+\n3 rows in set (0.00 sec)\n</code></pre><p>è¿™æ ·ï¼Œæˆ‘ä»¬åˆå¾—åˆ°äº†ä¸€ä¸ªä¸´æ—¶è¡¨demo.myimportï¼Œé‡Œé¢ä¿å­˜äº†æˆ‘ä»¬éœ€è¦çš„è¿›è´§æ•°æ®ã€‚</p><p>æ¥ç€ï¼Œæˆ‘ä»¬æ¥æŸ¥è¯¢å•å“è¿”å‚æ•°æ®ï¼Œå¹¶ä¸”ä¿å­˜åˆ°ä¸´æ—¶è¡¨ã€‚</p><p>æˆ‘ä»¬çš„è¿”å‚æ•°æ®è¡¨æœ‰2ä¸ªï¼Œåˆ†åˆ«æ˜¯è¿”å‚å•å¤´è¡¨ï¼ˆreturnheadï¼‰å’Œè¿”å‚å•æ˜ç»†è¡¨ï¼ˆreturndetailsï¼‰ã€‚</p><p>è¿”å‚å•å¤´è¡¨åŒ…æ‹¬è¿”å‚å•ç¼–å·ã€ä¾›è´§å•†ç¼–å·ã€ä»“åº“ç¼–å·ã€æ“ä½œå‘˜ç¼–å·å’ŒéªŒæ”¶æ—¥æœŸï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/20/3e/206c5ba8bdcb13c55c78a1ec1f4aab3e.jpeg?wh=1536*542\" alt=\"\"></p><p>è¿”å‚å•æ˜ç»†è¡¨åŒ…æ‹¬è¿”å‚å•ç¼–å·ã€å•†å“ç¼–å·ã€è¿”å‚æ•°é‡ã€è¿”å‚ä»·æ ¼å’Œè¿”å‚é‡‘é¢ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/a9/4b/a9bda457d8f15e8f87fc5d0f4e2ee24b.jpeg?wh=1446*681\" alt=\"\"></p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„SQLè¯­å¥è®¡ç®—è¿”å‚ä¿¡æ¯ï¼Œå¹¶ä¸”ä¿å­˜åˆ°ä¸´æ—¶è¡¨ä¸­ã€‚</p><pre><code>mysql&gt; CREATE TEMPORARY TABLE demo.myreturn\n-&gt; SELECT b.itemnumber,SUM(b.quantity) AS quantity,SUM(b.returnvalue) AS returnvalue\n-&gt; FROM demo.returnhead a JOIN demo.returndetails b\n-&gt; ON (a.listnumber=b.listnumber)\n-&gt; GROUP BY b.itemnumber;\nQuery OK, 3 rows affected (0.01 sec)\nRecords: 3 Duplicates: 0 Warnings: 0\n \nmysql&gt; SELECT * FROM demo.myreturn;\n+------------+----------+-------------+\n| itemnumber | quantity | returnvalue |\n+------------+----------+-------------+\n| 1 | 2.000 | 115.00 |\n| 2 | 1.000 | 3.00 |\n| 3 | 1.000 | 5.00 |\n+------------+----------+-------------+\n3 rows in set (0.00 sec)\n</code></pre><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±è·å¾—äº†å•å“çš„è¿”å‚ä¿¡æ¯ã€‚</p><p>æœ‰äº†å‰é¢è®¡ç®—å‡ºæ¥çš„æ•°æ®ï¼Œç°åœ¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠå•å“çš„é”€å”®ä¿¡æ¯ã€è¿›è´§ä¿¡æ¯å’Œè¿”å‚ä¿¡æ¯æ±‡æ€»åˆ°ä¸€èµ·äº†ã€‚</p><p>å¦‚æœä½ è·Ÿç€å®é™…æ“ä½œçš„è¯ï¼Œä½ å¯èƒ½ä¼šæœ‰è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬ç°åœ¨æœ‰3ä¸ªä¸´æ—¶è¡¨ï¼Œåˆ†åˆ«å­˜å‚¨å•å“çš„é”€å”®ä¿¡æ¯ã€è¿›è´§ä¿¡æ¯å’Œè¿”å‚ä¿¡æ¯ã€‚é‚£ä¹ˆï¼Œèƒ½ä¸èƒ½æŠŠè¿™3ä¸ªè¡¨ç›¸äº’å…³è”èµ·æ¥ï¼ŒæŠŠè¿™äº›ä¿¡æ¯éƒ½æ±‡æ€»åˆ°å¯¹åº”çš„å•å“å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯ä¸è¡Œï¼Œä¸ç®¡æ˜¯ç”¨å†…è¿æ¥ã€è¿˜æ˜¯ç”¨å¤–è¿æ¥ï¼Œéƒ½ä¸å¯ä»¥ã€‚å› ä¸ºæ— è®ºæ˜¯é”€å”®ä¿¡æ¯ã€è¿›è´§ä¿¡æ¯ï¼Œè¿˜æ˜¯è¿”å‚ä¿¡æ¯ï¼Œéƒ½å­˜åœ¨å•†å“ä¿¡æ¯ç¼ºå¤±çš„æƒ…å†µã€‚æ¢å¥è¯è¯´ï¼Œå°±æ˜¯åœ¨æŒ‡å®šæ—¶é—´æ®µå†…ï¼ŒæŸäº›å•†å“å¯èƒ½æ²¡æœ‰é”€å”®ï¼ŒæŸäº›å•†å“å¯èƒ½æ²¡æœ‰è¿›è´§ï¼ŒæŸäº›å•†å“å¯èƒ½æ²¡æœ‰è¿”å‚ã€‚å¦‚æœä»…ä»…é€šè¿‡è¿™3ä¸ªè¡¨ä¹‹é—´çš„è¿æ¥è¿›è¡ŒæŸ¥è¯¢ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šä¸¢å¤±æŸäº›æ•°æ®ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥å•†å“ä¿¡æ¯è¡¨ã€‚å› ä¸ºå•†å“ä¿¡æ¯è¡¨åŒ…å«æ‰€æœ‰çš„å•†å“ï¼Œå› æ­¤ï¼ŒæŠŠå•†å“ä¿¡æ¯è¡¨æ”¾åœ¨å·¦è¾¹ï¼Œä¸å…¶ä»–çš„è¡¨è¿›è¡Œå·¦è¿æ¥ï¼Œå°±å¯ä»¥ç¡®ä¿æ‰€æœ‰çš„å•†å“éƒ½åŒ…å«åœ¨ç»“æœé›†ä¸­ã€‚å‡¡æ˜¯ä¸å­˜åœ¨çš„æ•°å€¼ï¼Œéƒ½è®¾ç½®ä¸º0ï¼Œç„¶åå†ç­›é€‰ä¸€ä¸‹ï¼ŒæŠŠé”€å”®ã€è¿›è´§ã€è¿”å‚éƒ½æ˜¯0çš„å•†å“å»æ‰ï¼Œè¿™æ ·å°±èƒ½å¾—åˆ°æˆ‘ä»¬æœ€ç»ˆå¸Œæœ›çš„æŸ¥è¯¢ç»“æœï¼š2020å¹´12æœˆçš„å•†å“é”€å”®æ•°é‡ã€è¿›è´§æ•°é‡å’Œè¿”å‚æ•°é‡ã€‚</p><p>ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>mysql&gt; SELECT\n-&gt; a.itemnumber,\n-&gt; a.goodsname,\n-&gt; ifnull(b.quantity,0) as salesquantity,    -- å¦‚æœæ²¡æœ‰é”€å”®è®°å½•ï¼Œé”€å”®æ•°é‡è®¾ç½®ä¸º0\n-&gt; ifnull(c.quantity,0) as importquantity,   -- å¦‚æœæ²¡æœ‰è¿›è´§ï¼Œè¿›è´§æ•°é‡è®¾ä¸º0\n-&gt; ifnull(d.quantity,0) as returnquantity    -- å¦‚æœæ²¡æœ‰è¿”å‚ï¼Œè¿”å‚æ•°é‡è®¾ä¸º0\n-&gt; FROM\n-&gt; demo.goodsmaster a               -- å•†å“ä¿¡æ¯è¡¨æ”¾åœ¨å·¦è¾¹è¿›è¡Œå·¦è¿æ¥ï¼Œç¡®ä¿æ‰€æœ‰çš„å•†å“éƒ½åŒ…å«åœ¨ç»“æœé›†ä¸­\n-&gt; LEFT JOIN demo.mysales b\n-&gt; ON (a.itemnumber=b.itemnumber)\n-&gt; LEFT JOIN demo.myimport c\n-&gt; ON (a.itemnumber=c.itemnumber)\n-&gt; LEFT JOIN demo.myreturn d\n-&gt; ON (a.itemnumber=d.itemnumber)\n-&gt; HAVING salesquantity&gt;0 OR importquantity&gt;0 OR returnquantity&gt;0; -- åœ¨ç»“æœé›†ä¸­å‰”é™¤æ²¡æœ‰é”€å”®ï¼Œæ²¡æœ‰è¿›è´§ï¼Œä¹Ÿæ²¡æœ‰è¿”å‚çš„å•†å“\n+------------+-----------+---------------+----------------+----------------+\n| itemnumber | goodsname | salesquantity | importquantity | returnquantity |\n+------------+-----------+---------------+----------------+----------------+\n| 1 | ä¹¦ | 5.000 | 5.000 | 2.000 |\n| 2 | ç¬” | 5.000 | 5.000 | 1.000 |\n| 3 | æ©¡çš® | 0.000 | 8.000 | 1.000 |\n+------------+-----------+---------------+----------------+----------------+\n3 rows in set (0.00 sec)\n</code></pre><p>æ€»ä¹‹ï¼Œé€šè¿‡ä¸´æ—¶è¡¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠä¸€ä¸ªå¤æ‚çš„é—®é¢˜æ‹†åˆ†æˆå¾ˆå¤šä¸ªå‰åå…³è”çš„æ­¥éª¤ï¼ŒæŠŠä¸­é—´çš„è¿è¡Œç»“æœå­˜å‚¨èµ·æ¥ï¼Œç”¨äºä¹‹åçš„æŸ¥è¯¢ã€‚è¿™æ ·ä¸€æ¥ï¼Œå°±æŠŠé¢å‘é›†åˆçš„SQLæŸ¥è¯¢å˜æˆäº†é¢å‘è¿‡ç¨‹çš„ç¼–ç¨‹æ¨¡å¼ï¼Œå¤§å¤§é™ä½äº†éš¾åº¦ã€‚</p><h2>å†…å­˜ä¸´æ—¶è¡¨å’Œç£ç›˜ä¸´æ—¶è¡¨</h2><p>ç”±äºé‡‡ç”¨çš„å­˜å‚¨æ–¹å¼ä¸åŒï¼Œä¸´æ—¶è¡¨ä¹Ÿå¯åˆ†ä¸ºå†…å­˜ä¸´æ—¶è¡¨å’Œç£ç›˜ä¸´æ—¶è¡¨ï¼Œå®ƒä»¬æœ‰ç€å„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼Œä¸‹é¢æˆ‘æ¥è§£é‡Šä¸‹ã€‚</p><p>å…³äºå†…å­˜ä¸´æ—¶è¡¨ï¼Œæœ‰ä¸€ç‚¹ä½ è¦æ³¨æ„çš„æ˜¯ï¼Œä½ å¯ä»¥é€šè¿‡æŒ‡å®šå¼•æ“ç±»å‹ï¼ˆæ¯”å¦‚ENGINE=MEMORYï¼‰ï¼Œæ¥å‘Šè¯‰MySQLä¸´æ—¶è¡¨å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚</p><p>å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬å…ˆæ¥åˆ›å»ºä¸€ä¸ªå†…å­˜ä¸­çš„ä¸´æ—¶è¡¨ï¼š</p><pre><code>mysql&gt; CREATE TEMPORARY TABLE demo.mytrans\n-&gt; (\n-&gt; itemnumber int,\n-&gt; groupnumber int,\n-&gt; branchnumber int\n-&gt; ) ENGINE = MEMORY; ï¼ˆä¸´æ—¶è¡¨æ•°æ®å­˜åœ¨å†…å­˜ä¸­ï¼‰\nQuery OK, 0 rows affected (0.00 sec)\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨ç£ç›˜ä¸Šåˆ›å»ºä¸€ä¸ªåŒæ ·ç»“æ„çš„ä¸´æ—¶è¡¨ã€‚åœ¨ç£ç›˜ä¸Šåˆ›å»ºä¸´æ—¶è¡¨æ—¶ï¼Œåªè¦æˆ‘ä»¬ä¸æŒ‡å®šå­˜å‚¨å¼•æ“ï¼ŒMySQLä¼šé»˜è®¤å­˜å‚¨å¼•æ“æ˜¯InnoDBï¼Œå¹¶ä¸”æŠŠè¡¨å­˜æ”¾åœ¨ç£ç›˜ä¸Šã€‚</p><pre><code>mysql&gt; CREATE TEMPORARY TABLE demo.mytransdisk\n-&gt; (\n-&gt; itemnumber int,\n-&gt; groupnumber int,\n-&gt; branchnumber int\n-&gt; );\nQuery OK, 0 rows affected (0.00 sec)\n</code></pre><p>ç°åœ¨ï¼Œæˆ‘ä»¬å‘åˆšåˆšçš„ä¸¤å¼ è¡¨é‡Œéƒ½æ’å…¥åŒæ ·æ•°é‡çš„è®°å½•ï¼Œç„¶åå†åˆ†åˆ«åšä¸€ä¸ªæŸ¥è¯¢ï¼š</p><pre><code>mysql&gt; SELECT COUNT(*) FROM demo.mytrans;\n+----------+\n| count(*) |\n+----------+\n| 4355 |\n+----------+\n1 row in set (0.00 sec)\n \nmysql&gt; SELECT COUNT(*) FROM demo.mytransdisk;\n+----------+\n| count(*) |\n+----------+\n| 4355 |\n+----------+\n1 row in set (0.21 sec)\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼ŒåŒºåˆ«æ˜¯æ¯”è¾ƒæ˜æ˜¾çš„ã€‚å¯¹äºåŒä¸€æ¡æŸ¥è¯¢ï¼Œå†…å­˜ä¸­çš„ä¸´æ—¶è¡¨æ‰§è¡Œæ—¶é—´ä¸åˆ°10æ¯«ç§’ï¼Œè€Œç£ç›˜ä¸Šçš„è¡¨å´ç”¨æ‰äº†210æ¯«ç§’ã€‚æ˜¾ç„¶ï¼Œå†…å­˜ä¸­çš„ä¸´æ—¶è¡¨æŸ¥è¯¢é€Ÿåº¦æ›´å¿«ã€‚</p><p>ä¸è¿‡ï¼Œå†…å­˜ä¸­çš„ä¸´æ—¶è¡¨ä¹Ÿæœ‰ç¼ºé™·ã€‚å› ä¸ºæ•°æ®å®Œå…¨åœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥ï¼Œä¸€æ—¦æ–­ç”µï¼Œæ•°æ®å°±æ¶ˆå¤±äº†ï¼Œæ— æ³•æ‰¾å›ã€‚ä¸è¿‡ä¸´æ—¶è¡¨åªä¿å­˜ä¸­é—´ç»“æœï¼Œæ‰€ä»¥è¿˜æ˜¯å¯ä»¥ç”¨çš„ã€‚</p><p>æˆ‘ç”»äº†ä¸€å¼ å›¾ï¼Œæ±‡æ€»äº†å†…å­˜ä¸´æ—¶è¡¨å’Œç£ç›˜ä¸´æ—¶è¡¨çš„ä¼˜ç¼ºç‚¹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/c5/bf/c5f3d549f5f0fd72e74ec9c5441467bf.jpeg?wh=1781*462\" alt=\"\"></p><h2>æ€»ç»“</h2><p>è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬å­¦ä¹ äº†ä¸´æ—¶è¡¨çš„æ¦‚å¿µï¼Œä»¥åŠä½¿ç”¨ä¸´æ—¶è¡¨æ¥å­˜å‚¨ä¸­é—´ç»“æœä»¥æ‹†åˆ†å¤æ‚æŸ¥è¯¢çš„æ–¹æ³•ã€‚ä¸´æ—¶è¡¨å¯ä»¥å­˜å‚¨åœ¨ç£ç›˜ä¸­ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æŒ‡å®šå¼•æ“çš„åŠæ³•å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œä»¥åŠ å¿«å­˜å–é€Ÿåº¦ã€‚</p><p>å…¶å®ï¼Œä¸´æ—¶è¡¨æœ‰å¾ˆå¤šå¥½å¤„ï¼Œé™¤äº†å¯ä»¥å¸®åŠ©æˆ‘ä»¬æŠŠå¤æ‚çš„SQLæŸ¥è¯¢æ‹†åˆ†æˆå¤šä¸ªç®€å•çš„SQLæŸ¥è¯¢ï¼Œè€Œä¸”ï¼Œå› ä¸ºä¸´æ—¶è¡¨æ˜¯è¿æ¥éš”ç¦»çš„ï¼Œä¸åŒçš„è¿æ¥å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ä¸´æ—¶è¡¨åç§°ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šå—åˆ°å½±å“ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¸´æ—¶è¡¨ä¼šåœ¨è¿æ¥ç»“æŸçš„æ—¶å€™è‡ªåŠ¨åˆ é™¤ï¼Œä¸ä¼šå ç”¨ç£ç›˜ç©ºé—´ã€‚</p><p>å½“ç„¶ï¼Œä¸´æ—¶è¡¨ä¹Ÿæœ‰ä¸è¶³ï¼Œæ¯”å¦‚ä¼šæŒ¤å ç©ºé—´ã€‚æˆ‘å»ºè®®ä½ ï¼Œ<strong>åœ¨ä½¿ç”¨ä¸´æ—¶è¡¨çš„æ—¶å€™ï¼Œè¦ä»ç®€åŒ–æŸ¥è¯¢å’ŒæŒ¤å èµ„æºä¸¤ä¸ªæ–¹é¢ç»¼åˆè€ƒè™‘ï¼Œæ—¢ä¸èƒ½è¿‡åº¦åŠ é‡ç³»ç»Ÿçš„è´Ÿæ‹…ï¼ŒåŒæ—¶åˆèƒ½å¤Ÿé€šè¿‡å­˜å‚¨ä¸­é—´ç»“æœï¼Œæœ€å¤§é™åº¦åœ°ç®€åŒ–æŸ¥è¯¢</strong>ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æˆ‘ä»¬æœ‰è¿™æ ·çš„ä¸€ä¸ªé”€å”®æµæ°´è¡¨ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/a9/b6/a970618a3807cyyeeaf28ac57fa034b6.jpeg?wh=1458*522\" alt=\"\"></p><p>å‡è®¾æœ‰å¤šä¸ªé—¨åº—ï¼Œæ¯ä¸ªé—¨åº—æœ‰å¤šå°æ”¶æ¬¾æœºï¼Œæ¯å°æ”¶æ¬¾æœºé”€å”®å¤šç§å•†å“ï¼Œè¯·é—®å¦‚ä½•æŸ¥è¯¢æ¯ä¸ªé—¨åº—ã€æ¯å°æ”¶æ¬¾æœºçš„é”€å”®é‡‘é¢å æ‰€å±é—¨åº—çš„é”€å”®é‡‘é¢çš„æ¯”ç‡å‘¢ï¼Ÿ</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå†™ä¸‹ä½ çš„æ€è€ƒå’Œç­”æ¡ˆï¼Œæˆ‘ä»¬ä¸€èµ·äº¤æµè®¨è®ºã€‚å¦‚æœä½ è§‰å¾—ä»Šå¤©çš„å†…å®¹å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œæ¬¢è¿ä½ æŠŠå®ƒåˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–åŒäº‹ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ã€‚</p>","neighbors":{"left":{"article_title":"12 | äº‹åŠ¡ï¼šæ€ä¹ˆç¡®ä¿å…³è”æ“ä½œæ­£ç¡®æ‰§è¡Œï¼Ÿ","id":357322},"right":{"article_title":"14 | è§†å›¾ï¼šå¦‚ä½•ç®€åŒ–æŸ¥è¯¢ï¼Ÿ","id":359702}},"comments":[{"had_liked":false,"id":289363,"user_name":"æœ±æ™“å³°","can_delete":false,"product_type":"c1","uid":2356905,"ip_address":"","ucode":"D2F84F44329C29","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","comment_is_top":true,"comment_ctime":1618989477,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"9.2233720513586995e+18","product_id":100073201,"comment_content":"ä½ å¥½ï¼Œæˆ‘æ˜¯æœ±æ™“å³°ï¼Œä¸‹é¢æˆ‘å°±æ¥å…¬å¸ƒä¸€ä¸‹ä¸ŠèŠ‚è¯¾æ€è€ƒé¢˜çš„ç­”æ¡ˆï¼š<br><br>ä¸ŠèŠ‚è¯¾ï¼Œæˆ‘ä»¬å­¦ä¹ äº†äº‹åŠ¡ã€‚ä¸‹é¢æ˜¯æ€è€ƒé¢˜çš„ç­”æ¡ˆï¼š<br><br>è¿™ç§è¯´æ³•æ˜¯ä¸å¯¹çš„ï¼Œäº‹åŠ¡ä¼šç¡®ä¿äº‹åŠ¡å¤„ç†ä¸­çš„æ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œï¼Œæ‰§è¡Œä¸­é‡åˆ°é”™è¯¯ï¼Œæ˜¯ç»§ç»­è¿˜æ˜¯å›æ»šï¼Œåˆ™éœ€è¦ç¨‹åºå‘˜æ¥å¤„ç†ã€‚","like_count":3},{"had_liked":false,"id":286871,"user_name":"undefined","can_delete":false,"product_type":"c1","uid":1100750,"ip_address":"","ucode":"768098DBDBE333","user_header":"https://static001.geekbang.org/account/avatar/00/10/cb/ce/d9e00eb5.jpg","comment_is_top":false,"comment_ctime":1617644197,"is_pvip":false,"replies":[{"id":"106378","content":"ä¸´æ—¶è¡¨çš„æ‰§è¡Œæ•ˆç‡æ¯”è¾ƒä½ï¼Œæ•°æ®é‡å¤§çš„è¯ï¼Œå¯ä»¥è€ƒè™‘å…¶ä»–çš„æ–¹å¼ï¼Œæ¯”å¦‚æŠŠä¸­é—´ç»“æœä¿å­˜åœ¨æ•°ç»„ä¸­","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1621499270,"ip_address":"","comment_id":286871,"utype":1}],"discussion_count":2,"race_medal":0,"score":"35977382565","product_id":100073201,"comment_content":"æ®äº†è§£ï¼Œä¸´æ—¶è¡¨çš„å¼€é”€å¾ˆå¤§ï¼Œä¸å»ºè®®åœ¨é«˜è®¿é—®é‡çš„çº¿ä¸Šç³»ç»Ÿä¸­ä½¿ç”¨ã€‚ç¦»çº¿å¤‡ä»½åº“æˆ–ä¾›æ•°æ®åˆ†ææ‰€ç”¨çš„æ•°æ®åº“ä¸Šå¯ä»¥è€ƒè™‘æœ‰é™åˆ¶çš„ä½¿ç”¨ã€‚","like_count":9,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518114,"discussion_content":"ä¸´æ—¶è¡¨çš„æ‰§è¡Œæ•ˆç‡æ¯”è¾ƒä½ï¼Œæ•°æ®é‡å¤§çš„è¯ï¼Œå¯ä»¥è€ƒè™‘å…¶ä»–çš„æ–¹å¼ï¼Œæ¯”å¦‚æŠŠä¸­é—´ç»“æœä¿å­˜åœ¨æ•°ç»„ä¸­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621499270,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1201022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/53/7e/b6829040.jpg","nickname":"SevenMonths","note":"","ucode":"62A9740FBD1FAE","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391524,"discussion_content":"ä¹‹å‰å°±ç”¨è¿‡æŠŠä¸­é—´æ•°æ®å­˜å‚¨åˆ°æ•°ç»„ä¸­ã€‚\nä¸šåŠ¡åœºæ™¯æ˜¯ï¼šæ•°æ®éƒ½æ˜¯é€šè¿‡å¾®æœåŠ¡æä¾›æ¥å£è¿›è¡ŒæŸ¥è¯¢çš„ï¼Œç”šè‡³è¦ä»ä¸åŒçš„å¾®æœåŠ¡æ‹¿åˆ°ä¸åŒçš„æ•°æ®å»æ‹¼æ¥ç»„åˆï¼Œåªèƒ½æ˜¯æŠŠå„è‡ªçš„æ•°æ®æ”¾åˆ°æ•°ç»„ç„¶åé€»è¾‘æ‹¼è£…ç»„åˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630496470,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":288848,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1618728996,"is_pvip":true,"replies":[{"id":"106445","content":"åªè¦è¿æ¥å…³é—­ï¼Œä¸´æ—¶è¡¨å°±ä¼šè¢«åˆ é™¤ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1621560624,"ip_address":"","comment_id":288848,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14503630884","product_id":100073201,"comment_content":"å¯¹äºè¿æ¥æ± ï¼Œè¿æ¥ä½¿ç”¨å®Œä¸ä¼šé”€æ¯ï¼Œä½¿ç”¨å®Œåä¼šæ”¾åˆ°è¿æ¥æ± ä¸­ã€‚é‚£ä½¿ç”¨è¯¥è¿æ¥åˆ›å»ºä¸´æ—¶è¡¨æ˜¯æ²¡æœ‰è¢«é”€æ¯ï¼Œä¼šä¸ä¼šå½±å“åé¢å†æ¬¡ä»è¿æ¥æ± å–å‡ºè¯¥è¿æ¥ä½¿ç”¨çš„æƒ…å†µï¼Ÿ","like_count":4,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518748,"discussion_content":"åªè¦è¿æ¥å…³é—­ï¼Œä¸´æ—¶è¡¨å°±ä¼šè¢«åˆ é™¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621560624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286886,"user_name":"giteebravo","can_delete":false,"product_type":"c1","uid":1005290,"ip_address":"","ucode":"C087E8D6B5A98B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/ea/32608c44.jpg","comment_is_top":false,"comment_ctime":1617669822,"is_pvip":false,"replies":[{"id":"106380","content":"å¦‚æœç”¨WHEREï¼Œä¼šæç¤ºç­›é€‰æ¡ä»¶ä¸­çš„å­—æ®µä¸å­˜åœ¨ã€‚è€ŒHAVINGæ˜¯ç”Ÿæˆç»“æœé›†åè¿›è¡Œç­›é€‰ï¼Œæ‰€ä»¥å¯ä»¥ç”¨é‡å‘½åä¹‹åçš„å­—æ®µåè¿›è¡Œç­›é€‰","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1621500771,"ip_address":"","comment_id":286886,"utype":1}],"discussion_count":5,"race_medal":1,"score":"14502571710","product_id":100073201,"comment_content":"<br>æœ€åå·¦è¿æ¥çš„ä»£ç ä¸­ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨ having è€Œä¸ä½¿ç”¨ where å‘¢ï¼Ÿ<br>","like_count":3,"discussions":[{"author":{"id":2340158,"avatar":"https://static001.geekbang.org/account/avatar/00/23/b5/3e/fa542011.jpg","nickname":"æº","note":"","ucode":"A860688E14BAD9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371153,"discussion_content":"è€Œä¸”ç”¨äº†HAVINGä¸ºä»€ä¹ˆå¯ä»¥ä¸ç”¨GROUP BYå‘¢ï¼Ÿ","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1619665927,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1862885,"avatar":"","nickname":"æ¨ä¸½å—","note":"","ucode":"51B9926D6BE429","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2340158,"avatar":"https://static001.geekbang.org/account/avatar/00/23/b5/3e/fa542011.jpg","nickname":"æº","note":"","ucode":"A860688E14BAD9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379730,"discussion_content":"åŒé—®","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1624095445,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":371153,"ip_address":""},"score":379730,"extra":""},{"author":{"id":1201022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/53/7e/b6829040.jpg","nickname":"SevenMonths","note":"","ucode":"62A9740FBD1FAE","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2340158,"avatar":"https://static001.geekbang.org/account/avatar/00/23/b5/3e/fa542011.jpg","nickname":"æº","note":"","ucode":"A860688E14BAD9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391525,"discussion_content":"å¦‚æœä¸ä½¿ç”¨ GROUP BY å­å¥ï¼Œåˆ™ HAVING çš„è¡Œä¸ºä¸ WHERE å­å¥ä¸€æ ·ã€‚\nå…¶å®ç”¨whereä¹Ÿæ˜¯å¯ä»¥å¤„ç†çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630496809,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":371153,"ip_address":""},"score":391525,"extra":""}]},{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518120,"discussion_content":"å¦‚æœç”¨WHEREï¼Œä¼šæç¤ºç­›é€‰æ¡ä»¶ä¸­çš„å­—æ®µä¸å­˜åœ¨ã€‚è€ŒHAVINGæ˜¯ç”Ÿæˆç»“æœé›†åè¿›è¡Œç­›é€‰ï¼Œæ‰€ä»¥å¯ä»¥ç”¨é‡å‘½åä¹‹åçš„å­—æ®µåè¿›è¡Œç­›é€‰","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1621500771,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2653332,"avatar":"https://static001.geekbang.org/account/avatar/00/28/7c/94/2835e065.jpg","nickname":"epikomos","note":"","ucode":"807F29251C1CFE","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389022,"discussion_content":"åŒé—®","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1629095559,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286989,"user_name":"æ˜Ÿç©ºä¸‹","can_delete":false,"product_type":"c1","uid":1183639,"ip_address":"","ucode":"473643B567674A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0f/97/372d8628.jpg","comment_is_top":false,"comment_ctime":1617718326,"is_pvip":false,"replies":[{"id":"106383","content":"å¦‚æœæ˜¯å°é¡¹ç›®ï¼Œæ•°æ®åº“èµ„æºå……è¶³ï¼Œå¯ä»¥ä½¿ç”¨","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1621501272,"ip_address":"","comment_id":286989,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10207652918","product_id":100073201,"comment_content":"æ•°æ®åº“ä¸€èˆ¬æ˜¯æ€§èƒ½ç“¶é¢ˆç‚¹ï¼Œç”¨ä¸´æ—¶è¡¨å¤ªå ç”¨æ•°æ®åº“èµ„æºå§","like_count":2,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518155,"discussion_content":"å¦‚æœæ˜¯å°é¡¹ç›®ï¼Œæ•°æ®åº“èµ„æºå……è¶³ï¼Œå¯ä»¥ä½¿ç”¨","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1621501272,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286890,"user_name":"æ´›å¥‡","can_delete":false,"product_type":"c1","uid":1624355,"ip_address":"","ucode":"662B4005721119","user_header":"https://static001.geekbang.org/account/avatar/00/18/c9/23/76511858.jpg","comment_is_top":false,"comment_ctime":1617670482,"is_pvip":false,"replies":[{"id":"106382","content":"æ˜¯çš„ï¼Œæ–­ç”µçš„è¯è¿æ¥ä¸­æ–­ï¼Œæ— æ³•æ‰¾å›æ•°æ®äº†ã€‚ä¸»è¦é—®é¢˜è¿˜æ˜¯å ç”¨å†…å­˜ç©ºé—´ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1621501184,"ip_address":"","comment_id":286890,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10207605074","product_id":100073201,"comment_content":"ä¸´æ—¶è¡¨çš„æ•°æ®æ˜¯ä¸æ˜¯æ˜“ä¸¢å¤±ï¼Œè¿™ä¸é‡è¦å§ï¼Ÿæ–­ç”µåï¼Œè¿æ¥ä¹Ÿæ–­äº†ï¼Œè¿™æ—¶å€™æœ‰å»æ‰¾å›ä¸´æ—¶è¡¨çš„æ•°æ®çš„å¿…è¦å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518123,"discussion_content":"æ˜¯çš„ï¼Œæ–­ç”µçš„è¯è¿æ¥ä¸­æ–­ï¼Œæ— æ³•æ‰¾å›æ•°æ®äº†ã€‚ä¸»è¦é—®é¢˜è¿˜æ˜¯å ç”¨å†…å­˜ç©ºé—´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621501184,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286887,"user_name":"giteebravo","can_delete":false,"product_type":"c1","uid":1005290,"ip_address":"","ucode":"C087E8D6B5A98B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/ea/32608c44.jpg","comment_is_top":false,"comment_ctime":1617669848,"is_pvip":false,"replies":[{"id":"106381","content":"æ˜¯çš„ï¼Œä¼šå­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1621500838,"ip_address":"","comment_id":286887,"utype":1}],"discussion_count":2,"race_medal":1,"score":"5912637144","product_id":100073201,"comment_content":"<br>å½“å¼•æ“ç±»å‹ä¸º memory æ—¶ï¼Œå¦‚æœå»æ‰ temporary é‚£ä¹ˆè¡¨è¿˜ä¼šå­˜å‚¨åœ¨å†…å­˜ä¸­å—ï¼Ÿ<br>","like_count":1,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518121,"discussion_content":"æ˜¯çš„ï¼Œä¼šå­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621500838,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"ä¸€æ­¥","note":"","ucode":"73CEA468CE70C3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":368813,"discussion_content":"ä¼šçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618838080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343597,"user_name":"è±†è±†é…±","can_delete":false,"product_type":"c1","uid":2539241,"ip_address":"","ucode":"1F321F2DF51DC5","user_header":"https://static001.geekbang.org/account/avatar/00/26/be/e9/9d597e04.jpg","comment_is_top":false,"comment_ctime":1650946385,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1650946385","product_id":100073201,"comment_content":"ä¸´æ—¶è¡¨ä¸æ˜¯æœ‰å†…å­˜å’Œç£ç›˜ä¸¤ç§ä¹ˆï¼Ÿå¯¹äºç£ç›˜ï¼Œåº”è¯¥æ˜¯æ°¸ä¹…å‚¨å­˜å§ï¼Œé‚£ä¹ˆè¿æ¥æ–­å¼€çš„è¯ï¼Œç£ç›˜çš„ä¸´æ—¶è¡¨ä¹Ÿä¼šè¢«åˆ é™¤ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1324550,"avatar":"https://static001.geekbang.org/account/avatar/00/14/36/06/08c46bcd.jpg","nickname":"è‚åˆ©","note":"","ucode":"808E064089724D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588306,"discussion_content":"ä¼šè¯å­˜åœ¨çš„æ—¶é—´ï¼Œæ•°æ®æ˜¯å­˜åœ¨ç£ç›˜ä¸Šï¼Œä¼šè¯æ–­å¼€ï¼Œè¡¨å’Œæ•°æ®ä¹Ÿåˆ äº†\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663659200,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319774,"user_name":"Geek_8e65ed","can_delete":false,"product_type":"c1","uid":1716374,"ip_address":"","ucode":"FB20872B0C1967","user_header":"","comment_is_top":false,"comment_ctime":1635936427,"is_pvip":false,"replies":[{"id":"116472","content":"â˜º","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1636616920,"ip_address":"","comment_id":319774,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635936427","product_id":100073201,"comment_content":"ğŸ‚ğŸº","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529765,"discussion_content":"â˜º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636616920,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313094,"user_name":"å½­å½¬","can_delete":false,"product_type":"c1","uid":2680555,"ip_address":"","ucode":"5AF4F4D7163DFE","user_header":"https://static001.geekbang.org/account/avatar/00/28/e6/eb/7b7c0101.jpg","comment_is_top":false,"comment_ctime":1632277312,"is_pvip":false,"replies":[{"id":"116480","content":"å¯ä»¥çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1636622395,"ip_address":"","comment_id":313094,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1632277312","product_id":100073201,"comment_content":"è¯·é—®è€å¸ˆï¼šæ•°æ®é‡å¤§æ—¶ï¼Œä¸´æ—¶è¡¨èƒ½å¦å»ºç«‹ç´¢å¼•ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527225,"discussion_content":"å¯ä»¥çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636622395,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":309718,"user_name":"é©¬çƒå…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1119609,"ip_address":"","ucode":"858C2CE0E494C5","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/79/efde2a69.jpg","comment_is_top":false,"comment_ctime":1630312549,"is_pvip":false,"replies":[{"id":"113732","content":"å¯ä»¥çš„<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1632797763,"ip_address":"","comment_id":309718,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1630312549","product_id":100073201,"comment_content":"ç­›é€‰æ¡ä»¶å†™æˆè¿™æ ·å¯å¦ï¼Ÿwhere æ›¿ä»£ having<br>SELECT<br>\ta.itemnumber,<br>\ta.goodsname,<br>\tifnull(b.quantity,0) as salesquantity,<br>\tifnull(c.quantity,0) as importquantity,<br>\tifnull(d.quantity,0) as returnquantity<br>FROM<br>\tdemo.goodsmaster a<br>LEFT JOIN demo.mysales b<br>\tON (a.itemnumber=b.itemnumber)<br>LEFT JOIN demo.myimport c<br>\tON (a.itemnumber=c.itemnumber)<br>LEFT JOIN demo.myreturn d<br>\tON (a.itemnumber=d.itemnumber)<br>WHERE b.quantity &gt; 0 OR c.quantity &gt; 0 OR d.quantity &gt; 0;","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525978,"discussion_content":"å¯ä»¥çš„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632797763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":295350,"user_name":"å•è‰²","can_delete":false,"product_type":"c1","uid":1907486,"ip_address":"","ucode":"A1DA6E497FD74C","user_header":"https://static001.geekbang.org/account/avatar/00/1d/1b/1e/f5c16f7e.jpg","comment_is_top":false,"comment_ctime":1622379555,"is_pvip":false,"replies":[{"id":"107691","content":"1. éå¸¸æ„Ÿè°¢ä½ çš„ç»†å¿ƒé˜…è¯»ï¼Œè¿”å‚ä»·æ ¼&#47;é‡‘é¢å­—æ®µåçš„æ‹¼å†™ç¡®å®æ˜¯é”™äº†ï¼Œå·²ç»è¦æ±‚åå°æ›´æ­£ã€‚<br>2. å®¢æˆ·çš„è¦æ±‚æ˜¯æŸ¥è¯¢æŸä¸ªç‰¹å®šæ—¶æ®µçš„æ•°æ®ï¼Œä¸ºäº†ç®€ä¾¿ï¼Œæ–‡ç¨¿ä¸­çš„æ¼”ç¤ºæ•°æ®æ­£å¥½åœ¨è¿™ä¸ªæ—¶æ®µä¸­ï¼Œæ‰€ä»¥ä¸éœ€è¦ç”¨å•å¤´æ•°æ®ä¸­çš„éªŒæ”¶æ—¶é—´å­—æ®µè¿›è¡Œç­›é€‰ï¼Œä½†å®é™…ä¸Šï¼Œæ•°æ®ä¸€èˆ¬ä¸ä¼šæ­£å¥½åœ¨å®¢æˆ·éœ€è¦çš„åŒºé—´ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½ä¼šç”¨åˆ°å•å¤´è¡¨ä¸æ˜ç»†è¡¨çš„å…³è”","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1623056469,"ip_address":"","comment_id":295350,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1622379555","product_id":100073201,"comment_content":"1ã€è¿”å‚å•æ˜ç»†è¡¨å›¾ç‰‡ä¸­ï¼Œè¿”å‚ä»·æ ¼&#47;é‡‘é¢å­—æ®µåæœ‰è¯¯ã€‚<br>2ã€è¿›è´§&#47;è¿”å‚ä¿¡æ¯ä¸´æ—¶è¡¨ä¸­ï¼ŒæŸ¥è¯¢å­—æ®µä»…å­˜åœ¨äºä¸€ä¸ªè¡¨é‡Œã€‚ä¸ºä½•ç”¨äº†JOIN é“¾æ¥ï¼Œå¯ä»¥ä¸ç”¨å—ï¼Œè¿˜æ˜¯è¯´æœ‰å…¶ä»–è€ƒè™‘ï¼Ÿæœ›è€å¸ˆè§£ç­”","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521044,"discussion_content":"1. éå¸¸æ„Ÿè°¢ä½ çš„ç»†å¿ƒé˜…è¯»ï¼Œè¿”å‚ä»·æ ¼/é‡‘é¢å­—æ®µåçš„æ‹¼å†™ç¡®å®æ˜¯é”™äº†ï¼Œå·²ç»è¦æ±‚åå°æ›´æ­£ã€‚\n2. å®¢æˆ·çš„è¦æ±‚æ˜¯æŸ¥è¯¢æŸä¸ªç‰¹å®šæ—¶æ®µçš„æ•°æ®ï¼Œä¸ºäº†ç®€ä¾¿ï¼Œæ–‡ç¨¿ä¸­çš„æ¼”ç¤ºæ•°æ®æ­£å¥½åœ¨è¿™ä¸ªæ—¶æ®µä¸­ï¼Œæ‰€ä»¥ä¸éœ€è¦ç”¨å•å¤´æ•°æ®ä¸­çš„éªŒæ”¶æ—¶é—´å­—æ®µè¿›è¡Œç­›é€‰ï¼Œä½†å®é™…ä¸Šï¼Œæ•°æ®ä¸€èˆ¬ä¸ä¼šæ­£å¥½åœ¨å®¢æˆ·éœ€è¦çš„åŒºé—´ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½ä¼šç”¨åˆ°å•å¤´è¡¨ä¸æ˜ç»†è¡¨çš„å…³è”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623056469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":292209,"user_name":"èœé¸ŸğŸ¤è¦å…ˆé£","can_delete":false,"product_type":"c1","uid":1202379,"ip_address":"","ucode":"56668DB891F7BC","user_header":"https://static001.geekbang.org/account/avatar/00/12/58/cb/daf94c0e.jpg","comment_is_top":false,"comment_ctime":1620721507,"is_pvip":false,"replies":[{"id":"106533","content":"è¯·å‚è€ƒæ€è€ƒé¢˜ç­”æ¡ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1621566988,"ip_address":"","comment_id":292209,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1620721507","product_id":100073201,"comment_content":"## åˆ›å»ºé—¨åº—é”€å”®é¢ä¸´æ—¶è¡¨<br>create temporary table branchsales<br>select branchnumber,sum(salesvalue) as salesvalue  from transdetails group by branchnumber;<br><br>## åˆ›å»ºæ¯ä¸ªé—¨åº—å„è‡ªæ”¶æ¬¾æœºé”€å”®é¢çš„ä¸´æ—¶è¡¨<br>create temporary table cashiernumber<br>select branchnumber,cashiernumber, salesvalue as salesvalue from transdetails group by branchnumber,cashiernumber;<br><br>è®¡ç®—å æ¯”ï¼š<br>select a.branchnumber,b.cashiernumber,  b.salesvalue&#47;a.salesvalue as &#39;å æ¯”&#39; from branchsales as a join cashiernumber as b on(a.branchnumber = b.branchnumber);<br>","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519730,"discussion_content":"è¯·å‚è€ƒæ€è€ƒé¢˜ç­”æ¡ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621566988,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286998,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1617720244,"is_pvip":false,"replies":[{"id":"106384","content":"å¥½çš„<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1621501288,"ip_address":"","comment_id":286998,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1617720244","product_id":100073201,"comment_content":"ä¹‹å‰å¯¹ä¸´æ—¶è¡¨çš„è®¤è¯†åœç•™åœ¨å¯¹ç³»ç»Ÿæ€§èƒ½å¼€é”€å¤§çš„ç†è§£ä¸Šã€‚<br><br>å¼€å‘ä¸­ä¹Ÿæ²¡æœ‰å°è¯•è¿‡ä½¿ç”¨ä¸´æ—¶è¡¨ã€‚çœ‹äº†è¿™èŠ‚å†…å®¹ï¼Œå¯¹ä¸´æ—¶è¡¨å¦‚ä½•å­˜å‚¨ä¸­é—´ç»“æœæ¥ç®€åŒ–æŸ¥è¯¢æœ‰äº†ä¸€å®šçš„è®¤è¯†ã€‚<br><br>ä¹‹åå¼€å‘ä¸­å¦‚æœæœ‰é€‚åˆä¸´æ—¶è¡¨çš„åœºæ™¯ï¼Œä¼šæ¥å†æ¥çœ‹çœ‹è¿™ç¯‡çš„å†…å®¹ã€‚å¹¶åˆ†äº«ä¸€ä¸‹ä½¿ç”¨å¿ƒå¾—ã€‚","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518158,"discussion_content":"å¥½çš„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621501288,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}