{"id":547921,"title":"06ï½œæ‰‹å†™CPUï¼ˆä¸€ï¼‰ï¼šè¿·ä½ CPUæ¶æ„è®¾è®¡ä¸å–æŒ‡ä»¤å®ç°","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯LMOSã€‚</p><p>ç»è¿‡ä¸Šä¸€èŠ‚è¯¾çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†ä¸€ä¸ªåŸºäºRISC-VæŒ‡ä»¤é›†è®¾è®¡çš„CPUï¼Œå¿…é¡»è¦å®ç°å“ªäº›æŒ‡ä»¤ã€‚ä»è¿™èŠ‚è¯¾å¼€å§‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç€æ‰‹è®¾è®¡å’Œå®ç°MiniCPUäº†ã€‚</p><p>æˆ‘ä¼šå…ˆè·Ÿä½ è®²è®²ä»€ä¹ˆæ˜¯æµæ°´çº¿ï¼Œåœ¨CPUä¸­ä½¿ç”¨æµæ°´çº¿çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿç„¶åï¼Œæˆ‘ä»¬å†ä»¥ç»å…¸çš„äº”çº§æµæ°´çº¿ä¸ºä¾‹ï¼Œè®²è§£CPUæµæ°´çº¿çš„äº”ä¸ªé˜¶æ®µã€‚æ¥ç€è®¾è®¡å‡ºæˆ‘ä»¬MiniCPUçš„æ€»ä½“ç»“æ„ï¼Œå¹¶æ ¹æ®è§„åˆ’çš„äº”çº§æµæ°´çº¿ï¼Œå®Œæˆæµæ°´çº¿çš„ç¬¬ä¸€æ­¥â€”â€”å–æŒ‡æ¨¡å—çš„è®¾è®¡ã€‚è¯¾ç¨‹çš„é…å¥—ä»£ç å¯ä»¥ä»<a href=\"https://gitee.com/lmos/Geek-time-computer-foundation.git\">è¿™é‡Œ</a>ä¸‹è½½ã€‚</p><p>è¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬æ­£å¼å¼€å§‹ä»Šå¤©çš„å­¦ä¹ å§ã€‚</p><h2>ä»€ä¹ˆæ˜¯CPUæµæ°´çº¿ï¼Ÿ</h2><p>è¯´åˆ°æµæ°´çº¿ï¼Œä½ æ˜¯å¦ä¼šé©¬ä¸Šæƒ³åˆ°æˆ‘ä»¬æ‰“å·¥äººçš„å·¥å‚æµæ°´çº¿ï¼Ÿæ²¡é”™ï¼Œé«˜å¤§ä¸Šçš„CPUæµæ°´çº¿å…¶å®å’Œæˆ‘ä»¬æ‰“å·¥äººçš„æµæ°´çº¿æ˜¯ä¸€æ ·çš„ã€‚</p><p>å‡å¦‚æˆ‘ä»¬åœ¨å†°å¢©å¢©å·¥å‚ä¸Šç­ï¼Œç”Ÿäº§æµæ°´çº¿åˆ†ä¸ºäº”ä¸ªæ­¥éª¤ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/4e/e0/4e68e7b1f59cedb8723b32141ac12fe0.jpg?wh=1920x852\" alt=\"å›¾ç‰‡\"></p><p>åœ¨å†°å¢©å¢©ç”Ÿäº§çº¿ä¸Šéœ€è¦è‡³å°‘äº”ä¸ªå·¥äººï¼Œå„è‡ªè´Ÿè´£æ¨¡å…·åˆ¶ä½œã€æ¨¡å…·æ¸…æ´—ã€æ¨¡å…·æŠ›å…‰ã€ç¡…èƒ¶å¡‘å½¢å’Œèå…¥å›¾æ¡ˆè¿™äº”ä¸ªç¯èŠ‚ä¸­çš„ä¸€ä¸ªã€‚æœ€ç®€å•çš„æ–¹æ³•è‡ªç„¶æ˜¯ï¼šåŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªå†°å¢©å¢©åœ¨åˆ¶ä½œã€‚ä½†æ˜¯å†¬å¥¥ä¼šçš„çƒ­åº¦è®©å¸‚åœºä¸Šçš„å†°å¢©å¢©ä¾›åº”ä¸è¶³ï¼Œä¸ºäº†æ—©æ—¥å®ç°â€œäººæ‰‹ä¸€å¢©â€çš„ç›®æ ‡ï¼Œæœ‰ä»€ä¹ˆæå‡ç”Ÿäº§æ•ˆç‡çš„åŠæ³•å‘¢ï¼Ÿ</p><p>ç¨å¾®æƒ³æƒ³å°±çŸ¥é“ï¼Œç”Ÿäº§çº¿ä¸Šä¸€ä¸ªäººåœ¨åˆ¶ä½œå†°å¢©å¢©çš„æ—¶å€™ï¼Œå¦å¤–å››ä¸ªå·¥äººéƒ½å¤„äºç©ºé—²çŠ¶æ€ï¼Œæ˜¾ç„¶è¿™æ˜¯å¯¹äººåŠ›èµ„æºçš„æå¤§æµªè´¹ã€‚æƒ³è¦æé«˜æ•ˆç‡ï¼Œæˆ‘ä»¬ä¸å¦¨åœ¨ç¬¬ä¸€ä¸ªå†°å¢©å¢©æ¨¡å…·åˆ¶ä½œå‡ºæ¥è¿›å…¥æ¸…æ´—é˜¶æ®µçš„æ—¶å€™ï¼Œé©¬ä¸Šå¼€å§‹è¿›è¡Œç¬¬äºŒä¸ªå†°å¢©å¢©æ¨¡å…·çš„åˆ¶ä½œï¼Œè€Œä¸æ˜¯ç­‰åˆ°ç¬¬ä¸€ä¸ªå†°å¢©å¢©å…¨éƒ¨æ­¥éª¤åšå®Œåï¼Œæ‰å¼€å§‹åˆ¶ä½œä¸‹ä¸€ä¸ªã€‚</p><!-- [[[read_end]]] --><p>è¿™æ ·ï¼Œåç»­ç”Ÿäº§ä¸­å°±èƒ½å¤Ÿä¿è¯äº”ä¸ªå·¥äººä¸€ç›´å¤„äºå·¥ä½œçŠ¶æ€ï¼Œä¸ä¼šé€ æˆäººå‘˜çš„é—²ç½®è€Œäº§çº¿çš„å†°å¢©å¢©å°±å¥½åƒæµæ°´ä¸€æ ·æºæºä¸æ–­åœ°äº§å‡ºï¼Œå› æ­¤æˆ‘ä»¬ç§°è¿™ç§ç”Ÿäº§æ–¹å¼ä¸ºæµæ°´çº¿ã€‚</p><p>åœ¨CPUä¸­ä¹Ÿæ˜¯ä½¿ç”¨ç±»ä¼¼çš„æµæ°´çº¿ä½œä¸šã€‚ä»¥ç»å…¸çš„äº”çº§æµæ°´çº¿ä¸ºä¾‹ï¼Œæµæ°´çº¿ä¸­ä¸€æ¡æŒ‡ä»¤çš„ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºäº”ä¸ªé˜¶æ®µï¼š</p><p><strong>å–æŒ‡é˜¶æ®µï¼ˆInstruction Fetchï¼‰</strong>ï¼šå–æŒ‡é˜¶æ®µæ˜¯æŒ‡å°†æŒ‡ä»¤ä»å­˜å‚¨å™¨ä¸­è¯»å–å‡ºæ¥çš„è¿‡ç¨‹ã€‚ç¨‹åºæŒ‡é’ˆå¯„å­˜å™¨ç”¨æ¥æŒ‡å®šå½“å‰æŒ‡ä»¤åœ¨å­˜å‚¨å™¨ä¸­çš„ä½ç½®ã€‚è¯»å–ä¸€æ¡æŒ‡ä»¤åï¼Œç¨‹åºæŒ‡é’ˆå¯„å­˜å™¨ä¼šæ ¹æ®æŒ‡ä»¤çš„é•¿åº¦è‡ªåŠ¨é€’å¢ï¼Œæˆ–è€…æ”¹å†™æˆæŒ‡å®šçš„åœ°å€ã€‚</p><p><strong>è¯‘ç é˜¶æ®µï¼ˆInstruction Decodeï¼‰</strong>ï¼šæŒ‡ä»¤è¯‘ç æ˜¯æŒ‡å°†å­˜å‚¨å™¨ä¸­å–å‡ºçš„æŒ‡ä»¤è¿›è¡Œç¿»è¯‘çš„è¿‡ç¨‹ã€‚æŒ‡ä»¤è¯‘ç å™¨å¯¹æŒ‡ä»¤è¿›è¡Œæ‹†åˆ†å’Œè§£é‡Šï¼Œè¯†åˆ«å‡ºæŒ‡ä»¤ç±»åˆ«ä»¥åŠæ‰€éœ€çš„å„ç§æ“ä½œæ•°ã€‚</p><p><strong>æ‰§è¡Œé˜¶æ®µï¼ˆInstruction Executeï¼‰</strong>ï¼šæŒ‡ä»¤æ‰§è¡Œæ˜¯æŒ‡å¯¹æŒ‡ä»¤è¿›è¡ŒçœŸæ­£è¿ç®—çš„è¿‡ç¨‹ã€‚ä¾‹å¦‚æŒ‡ä»¤æ˜¯ä¸€æ¡åŠ æ³•è¿ç®—æŒ‡ä»¤ï¼Œåˆ™å¯¹æ“ä½œæ•°è¿›è¡Œç›¸åŠ æ“ä½œï¼›å¦‚æœæ˜¯ä¸€æ¡ä¹˜æ³•è¿ç®—æŒ‡ä»¤ï¼Œåˆ™è¿›è¡Œä¹˜æ³•è¿ç®—ã€‚åœ¨â€œæ‰§è¡Œâ€é˜¶æ®µæœ€å…³é”®çš„æ¨¡å—ä¸ºç®—æœ¯é€»è¾‘å•å…ƒï¼ˆArithmetic Logical Unitï¼ŒALUï¼‰ï¼Œå®ƒæ˜¯å®æ–½å…·ä½“è¿ç®—çš„ç¡¬ä»¶åŠŸèƒ½å•å…ƒã€‚</p><p><strong>è®¿å­˜é˜¶æ®µï¼ˆMemory Accessï¼‰</strong>ï¼šè®¿å­˜æ˜¯æŒ‡å­˜å‚¨å™¨è®¿é—®æŒ‡ä»¤å°†æ•°æ®ä»å­˜å‚¨å™¨ä¸­è¯»å‡ºï¼Œæˆ–å†™å…¥å­˜å‚¨å™¨çš„è¿‡ç¨‹ã€‚</p><p><strong>å†™å›é˜¶æ®µï¼ˆWrite-Backï¼‰</strong>ï¼šå†™å›æ˜¯æŒ‡å°†æŒ‡ä»¤æ‰§è¡Œçš„ç»“æœå†™å›é€šç”¨å¯„å­˜å™¨çš„è¿‡ç¨‹ã€‚å¦‚æœæ˜¯æ™®é€šè¿ç®—æŒ‡ä»¤ï¼Œè¯¥ç»“æœå€¼æ¥è‡ªäºâ€œæ‰§è¡Œâ€é˜¶æ®µè®¡ç®—çš„ç»“æœï¼›å¦‚æœæ˜¯å­˜å‚¨å™¨è¯»æŒ‡ä»¤ï¼Œè¯¥ç»“æœæ¥è‡ªäºâ€œè®¿å­˜â€é˜¶æ®µä»å­˜å‚¨å™¨ä¸­è¯»å–å‡ºæ¥çš„æ•°æ®ã€‚</p><p>å’Œä¸Šè¿°çš„å†°å¢©å¢©ç”Ÿäº§çº¿çš„æµæ°´ä½œä¸šä¸€æ ·ï¼Œä¸ºäº†æé«˜æ•ˆç‡ï¼ŒCPUä½¿ç”¨æµæ°´çº¿ä¹Ÿæ˜¯ä¸ºäº†æé«˜å¤„ç†å™¨çš„æ€§èƒ½ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/c3/3a/c39053403fc1c3bf6e33392952d2c33a.jpg?wh=1920x906\" alt=\"å›¾ç‰‡\"></p><p>å¯¹ç…§ä¸Šå›¾ï¼ŒCPUåœ¨ç¬¬ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸTå†…å®Œæˆå–æŒ‡æ“ä½œã€‚ç„¶ååœ¨ç¬¬äºŒä¸ªæ—¶é’Ÿå‘¨æœŸ2Tå†…å¯¹ä¸Šä¸€æ¡æŒ‡ä»¤è¿›è¡Œè¯‘ç çš„åŒæ—¶ï¼Œå–ä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚æ¥ç€åœ¨ç¬¬ä¸‰ä¸ªæ—¶é’Ÿå‘¨æœŸ3Tå†…å°±æœ‰å–æŒ‡ã€è¯‘ç å’Œæ‰§è¡Œ3ä¸ªæ“ä½œåŒæ—¶è¿›è¡Œâ€¦â€¦ä»¥æ­¤ç±»æ¨ï¼Œäº”çº§æµæ°´çº¿çš„CPUå†…å°±å¯ä»¥åŒæ—¶è¿›è¡Œ5ä¸ªæ“ä½œã€‚è¿™æ ·å¹³å‡ä¸‹æ¥ï¼Œå°±ç›¸å½“äºæ¯æ¡æŒ‡ä»¤åªéœ€è¦äº”åˆ†ä¹‹ä¸€çš„æ—¶é’Ÿå‘¨æœŸæ—¶é—´æ¥å®Œæˆã€‚</p><p>æ€»ä½“ä¸Šçœ‹ï¼Œæµæ°´çº¿æé«˜äº†æŒ‡ä»¤çš„å¤„ç†é€Ÿåº¦ï¼Œç¼©çŸ­äº†ç¨‹åºæ‰§è¡Œçš„æ—¶é—´ã€‚</p><p>é‚£æˆ‘ä»¬èƒ½ä¸èƒ½æŠŠæµæ°´çº¿çš„æ€æƒ³ï¼Œå¼•å…¥åˆ°æˆ‘ä»¬çš„MiniCPUä¸­å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚å…·ä½“å¦‚ä½•å®ç°å‘¢ï¼Ÿæˆ‘ä»¬æ¥ç€å¾€ä¸‹çœ‹ã€‚</p><h2>MiniCPUçš„æ¶æ„</h2><p>å…ˆæ˜ç¡®ä¸€ä¸‹æˆ‘ä»¬æƒ³å®ç°çš„ç›®æ ‡ï¼šä½¿ç”¨Verilogç¡¬ä»¶æè¿°è¯­è¨€ï¼ŒåŸºäºRV32IæŒ‡ä»¤é›†ï¼Œè®¾è®¡ä¸€ä¸ª32ä½çš„ç»å…¸äº”çº§æµæ°´çº¿çš„å¤„ç†å™¨æ ¸ã€‚å®ƒå°†ä¼šæ”¯æŒè¿è¡Œå¤§å¤šæ•°RV32Içš„åŸºç¡€æŒ‡ä»¤ã€‚</p><p>é‚£ä»€ä¹ˆæ ·çš„æ¶æ„è®¾è®¡æ‰èƒ½å®ç°è¿™ä¸ªç›®æ ‡å‘¢ï¼Ÿå‚ç…§CPUæµæ°´çº¿çš„äº”ä¸ªæ­¥éª¤ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å¤„ç†å™¨æ ¸çš„å„ä¸ªåŠŸèƒ½æ¨¡å—è¿›è¡Œåˆ’åˆ†ï¼Œä¸»è¦æ¨¡å—åŒ…æ‹¬æŒ‡ä»¤æå–å•å…ƒã€æŒ‡ä»¤è¯‘ç å•å…ƒã€æ•´å‹æ‰§è¡Œå•å…ƒã€è®¿é—®å­˜å‚¨å™¨å’Œå†™å›ç»“æœç­‰å•å…ƒæ¨¡å—ã€‚</p><p>æ ¹æ®ä¸Šé¢çš„æ¨¡å—åˆ’åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥è®¾è®¡å‡ºMiniCPUçš„æ•´ä½“æ¡†æ¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/31/dd/31b586c344cd7d0127775e7ff63711dd.jpg?wh=1920x1289\" alt=\"å›¾ç‰‡\"></p><p>è¿™å¼ å›¾ç‰‡ä¸­ä¸€ä¸ªæ–¹æ¡†å°±è¡¨ç¤ºä¸€ä¸ªæ¨¡å—ï¼Œæ–¹æ¡†é‡Œé¢çš„æ–‡å­—å°±æ˜¯æ¨¡å—çš„åå­—ï¼Œç®­å¤´åˆ™è¡¨ç¤ºæ¨¡å—ä¸æ¨¡å—ä¹‹é—´çš„ä¿¡å·ä¼ è¾“å…³ç³»ã€‚</p><p>ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬è¦è®¾è®¡çš„ä¸ä»…ä»…æ˜¯ä¸€ä¸ªCPUå†…æ ¸äº†ï¼Œå®ƒæ›´åƒæ˜¯ä¸€ä¸ªSOCï¼ˆSystem on Chipçš„ç¼©å†™ï¼‰ã€‚</p><p>å› ä¸ºæˆ‘ä»¬è¦å¯¹å®ƒè¿›è¡Œä¸€äº›ä»¿çœŸéªŒè¯ï¼Œå°±å¿…é¡»è¦åŒ…å«å­˜æ”¾æŒ‡ä»¤ã€æ•°æ®çš„ROMå’ŒRAMï¼Œè¿˜æœ‰ä¸€äº›ç®€å•çš„å¤–è®¾ã€‚æ¯”å¦‚ç”¨äºä¸²å£é€šä¿¡çš„UARTä»¥åŠä¸€äº›é€šç”¨è¾“å…¥ã€è¾“å‡ºç«¯å£GPIOéƒ½å±äºå¤–è®¾ã€‚CPUé€šè¿‡ç³»ç»Ÿæ€»çº¿ï¼ˆSystem Busï¼‰å’Œè¿™äº›å¤–è®¾è¿›è¡Œé€šä¿¡ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å…ˆå¿«é€Ÿäº†è§£ä¸€ä¸‹ï¼Œåœ¨æˆ‘ä»¬è¿™ä¸ªCPUæ¶æ„ä¸­ï¼Œä½“ç°äº”çº§æµæ°´çº¿çš„ä¸»è¦æ¨¡å—æœ‰å“ªäº›ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ <strong>pre_ifæ¨¡å—</strong>ï¼Œè¿™é‡Œæˆ‘æŠŠå®ƒå«ä½œåˆ†æ”¯é¢„æµ‹æˆ–è€…é¢„è¯»å–æ¨¡å—ï¼Œå› ä¸ºå®ƒä¸»è¦æ˜¯å…ˆå¯¹ä¸Šä¸€ä¸ªæŒ‡ä»¤è¿›è¡Œé¢„å¤„ç†ï¼Œåˆ¤æ–­æ˜¯ä¸æ˜¯åˆ†æ”¯è·³è½¬æŒ‡ä»¤ã€‚å¦‚æœæ˜¯è·³è½¬æŒ‡ä»¤ï¼Œåˆ™äº§ç”Ÿè·³è½¬åçš„PCå€¼ï¼Œå¹¶å¯¹ä¸‹ä¸€æ¡æŒ‡ä»¤è¿›è¡Œé¢„è¯»å–ã€‚</p><p>ç„¶åæ˜¯å–æŒ‡é€šè·¯æ¨¡å—ï¼Œå³ <strong>if_idæ¨¡å—</strong>ã€‚å®ƒæ˜¯å–æŒ‡åˆ°è¯‘ç ä¹‹é—´çš„æ¨¡å—ï¼Œä¸Šé¢çš„æŒ‡ä»¤é¢„è¯»å–ä¹‹åå°±ä¼šé¦–å…ˆé€å…¥if_idæ¨¡å—ï¼Œå¦‚æœå½“å‰æµæ°´çº¿æ²¡æœ‰å‘å‡ºæŒ‡ä»¤æ¸…é™¤ä¿¡å·ï¼Œif_idæ¨¡å—å°±ä¼šæŠŠæŒ‡ä»¤é€åˆ°è¯‘ç æ¨¡å—ã€‚</p><p>æ¥ä¸‹æ¥æ˜¯ <strong>id_exæ¨¡å—</strong>ï¼Œå®ƒæ˜¯è¯‘ç åˆ°æ‰§è¡Œä¹‹é—´çš„æ¨¡å—ï¼Œç”¨äºå°†å®ŒæˆæŒ‡ä»¤è¯‘ç ä¹‹åçš„å¯„å­˜å™¨ç´¢å¼•å€¼ï¼Œä»¥åŠæŒ‡ä»¤æ‰§è¡Œçš„åŠŸèƒ½ä¿¡æ¯ï¼Œæ ¹æ®æµæ°´çº¿æ§åˆ¶æ¨¡å—çš„æ§åˆ¶ä¿¡å·ï¼Œé€‰æ‹©æ€§åœ°å‘é€ç»™æ‰§è¡Œæ¨¡å—å»æ‰§è¡Œã€‚</p><p>æŒ‡ä»¤è¯‘ç ä¹‹åä¾¿å¯ä»¥è¿›è¡ŒæŒ‡ä»¤æ‰§è¡Œï¼Œ<strong>ex_memæ¨¡å—</strong>è´Ÿè´£æŒ‡ä»¤æ‰§è¡Œä¹‹åå°†æ•°æ®å†™å…¥å­˜å‚¨å™¨ä¸­æˆ–è€…ä»å­˜å‚¨å™¨ä¸­è¯»å‡ºæ•°æ®çš„è¿‡ç¨‹ã€‚</p><p>æœ€åç”± <strong>mem_wbæ¨¡å—</strong>å°†æŒ‡ä»¤æ‰§è¡Œçš„è¿ç®—ç»“æœæˆ–è€…ä»å­˜å‚¨å™¨è¯»å‡ºçš„æ•°æ®ï¼Œå†™å›åˆ°é€šç”¨å¯„å­˜å™¨ã€‚åˆ°è¿™é‡Œï¼Œå¤„ç†å™¨æµæ°´çº¿çš„æ€»ä½“ç»“æ„å°±è®¾è®¡å¥½å•¦ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å…ˆå®Œæˆæµæ°´çº¿ç¬¬ä¸€æ­¥ï¼Œå³å–æŒ‡æ¨¡å—çš„è®¾è®¡ä¸å®ç°ã€‚</p><h2>æµæ°´çº¿çš„ç¬¬ä¸€æ­¥ï¼šæŒ‡ä»¤é¢„è¯»å–</h2><p>æˆ‘ä»¬çš„MiniCPUæµæ°´çº¿çš„ç¬¬ä¸€æ­¥æ˜¯æŒ‡ä»¤é¢„è¯»å–ï¼Œä¹Ÿå°±æ˜¯å…ˆæŠŠæŒ‡ä»¤ä»å­˜å‚¨å™¨ä¸­è¯»å‡ºã€‚</p><p>ç”±äºæˆ‘ä»¬çš„æŒ‡ä»¤é•¿åº¦æ˜¯32ä½çš„ï¼Œä¹Ÿå°±æ˜¯ä¸€æ¡æŒ‡ä»¤åœ¨å­˜å‚¨å™¨ä¸­å æœ‰4ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒCPUä¸­çš„ç¨‹åºè®¡æ•°å™¨ï¼ˆPCï¼‰æ˜¯ä»¥4é€’å¢çš„ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœä½ ç†Ÿæ‚‰è®¡ç®—æœºç¨‹åºå°±åº”è¯¥çŸ¥é“ï¼Œæˆ‘ä»¬çš„ç¨‹åºé€šå¸¸ä¸æ˜¯ä»å¤´åˆ°å°¾æ‰§è¡Œä¸€æ¬¡å°±å®Œäº‹äº†ï¼Œå¾€å¾€è¿˜éœ€è¦è°ƒç”¨å‡½æ•°æˆ–è€…å¾ªç¯æ‰§è¡ŒæŸä¸€æ®µç¨‹åºçš„æ“ä½œã€‚</p><p>è€Œè¿™æ ·çš„æ“ä½œï¼Œåœ¨ç¡¬ä»¶åº•å±‚çš„CPUé‡Œé¢å°±æ¶‰åŠåˆ†æ”¯è·³è½¬æŒ‡ä»¤äº†ã€‚ä¸ºäº†å®ç°ç¨‹åºåˆ†æ”¯è·³è½¬åŠŸèƒ½ï¼Œå°±éœ€è¦æˆ‘ä»¬çš„é¢„è¯»å–æ¨¡å—æ¥å¤„ç†ã€‚</p><p>æˆ‘å…ˆæŠŠè¿™ä¸ªæ¨¡å—çš„Verilogä»£ç ç»™ä½ å±•ç¤ºä¸€ä¸‹ï¼Œå†å…·ä½“ç»™ä½ è®²è§£ï¼š</p><pre><code class=\"language-verilog\">module pre_if (\n&nbsp; &nbsp; input [31:0] instr,\n&nbsp; &nbsp; input [31:0] pc,\n\n&nbsp; &nbsp; output [31:0] pre_pc\n);\n\n&nbsp; &nbsp; wire is_bxx = (instr[6:0] == `OPCODE_BRANCH);&nbsp; &nbsp;//æ¡ä»¶è·³è½¬æŒ‡ä»¤çš„æ“ä½œç \n&nbsp; &nbsp; wire is_jal = (instr[6:0] == `OPCODE_JAL) ;&nbsp; &nbsp; &nbsp;//æ— æ¡ä»¶è·³è½¬æŒ‡ä»¤çš„æ“ä½œç \n&nbsp; &nbsp;&nbsp;\n&nbsp; &nbsp; //Bå‹æŒ‡ä»¤çš„ç«‹å³æ•°æ‹¼æ¥\n&nbsp; &nbsp; wire [31:0] bimm&nbsp; = {{20{instr[31]}}, instr[7], instr[30:25], instr[11:8], 1'b0};\n&nbsp; &nbsp; //Jå‹æŒ‡ä»¤çš„ç«‹å³æ•°æ‹¼æ¥\n&nbsp; &nbsp; wire [31:0] jimm&nbsp; = {{12{instr[31]}}, instr[19:12], instr[20], instr[30:21], 1'b0};\n\n&nbsp; &nbsp; //æŒ‡ä»¤åœ°å€çš„åç§»é‡\n&nbsp;   wire [31:0] adder = is_jal ? jimm : (is_bxx &amp; bimm[31]) ? bimm : 4;\n&nbsp; &nbsp; assign pre_pc = pc + adder;\n\nendmodule\n</code></pre><p>æˆ‘ä»¬æ¥çœ‹çœ‹ç¬¬å…«è¡Œå’Œç¬¬ä¹è¡Œä»£ç ï¼Œåˆ†åˆ«æ˜¯æ ¹æ®æŒ‡ä»¤çš„ä½7ä½æ“ä½œç ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯æ¡ä»¶è·³è½¬æŒ‡ä»¤æˆ–æ˜¯æ— æ¡ä»¶è·³è½¬æŒ‡ä»¤ã€‚</p><p>å…¶å®ä¸Šä¸€èŠ‚è¯¾çš„RISC-VæŒ‡ä»¤æ¶æ„ä¸­ï¼Œæˆ‘ä»¬è®²è¿‡RISC-VæŒ‡ä»¤é›†ä¸­æœ‰ä¸¤ç±»åˆ†æ”¯è·³è½¬æŒ‡ä»¤ï¼Œåˆ†åˆ«æ˜¯<strong>æ¡ä»¶è·³è½¬æŒ‡ä»¤</strong>å’Œ<strong>æ— æ¡ä»¶è·³è½¬æŒ‡ä»¤</strong>ã€‚</p><p>æ¡ä»¶è·³è½¬æŒ‡ä»¤æ ¼å¼å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/70/37/70c2682fbbd1f9f3f4d14d7f5d5cd337.jpg?wh=3960x1710\" alt=\"\"></p><p>ä»è¿™å¼ è¡¨æ ¼æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œæ¡ä»¶è·³è½¬æŒ‡ä»¤çš„æ“ä½œç ï¼Œä¹Ÿå°±æ˜¯æŒ‡ä»¤ä¸­çš„ä½7ä½æ•°éƒ½æ˜¯ 7â€™b1100011ã€‚æ ¹æ®è¿™ä¸€ç‰¹ç‚¹ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æŒ‡ä»¤è§£ç ä¹‹å‰ï¼Œåˆ¤æ–­å‡ºæ¥ä¸‹æ¥å¯èƒ½ä¼šå‘ç”Ÿè·³è½¬ã€‚</p><p>æˆ‘ä»¬ç»“åˆä»£ç æ¥çœ‹çœ‹ã€‚ä¸‹é¢çš„Verilogè¯­å¥å°±æ˜¯è·³è½¬æŒ‡ä»¤çš„åˆ¤æ–­ï¼Œå…¶ä¸­çš„`OPCODE_BRANCH å·²ç»é€šè¿‡å®å®šä¹‰ä¸º 7â€™b1100011ã€‚</p><pre><code class=\"language-verilog\">&nbsp; &nbsp; wire is_bxx = (instr[6:0] == `OPCODE_BRANCH);&nbsp; &nbsp;//æ¡ä»¶è·³è½¬æŒ‡ä»¤çš„æ“ä½œç \n</code></pre><p>æ¡ä»¶è·³è½¬æŒ‡ä»¤æ‰§è¡Œæ—¶æ˜¯å¦å‘ç”Ÿè·³è½¬ï¼Œè¦æ ¹æ®ç›¸å…³çš„æ•°æ®æ¥åˆ¤æ–­ï¼Œè¿™å°±éœ€è¦æŒ‡ä»¤æ‰§è¡Œä¹‹åæ‰èƒ½çŸ¥é“æ˜¯å¦éœ€è¦è·³è½¬ï¼ˆå…·ä½“å¦‚ä½•åˆ¤æ–­ï¼Œæˆ‘ä»¬åé¢ç¬¬åèŠ‚è¯¾å†å±•å¼€ï¼‰ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a0/09/a08a9d2a3e693e95bd035af3673bb009.jpg?wh=1920x812\" alt=\"å›¾ç‰‡\"></p><p>ä½†æ˜¯ï¼Œæˆ‘ä»¬çš„CPUæ˜¯å¤šçº§æµæ°´çº¿æ¶æ„ï¼Œä¸€æ¡æŒ‡ä»¤æ‰§è¡Œéœ€è¦å¤šä¸ªæ—¶é’Ÿå‘¨æœŸã€‚å¦‚æœè¦ç­‰åˆ°è·³è½¬æŒ‡ä»¤æ‰§è¡Œå®Œæˆä¹‹åå†å»å–ä¸‹ä¸€æ¡æŒ‡ä»¤ï¼Œå°±ä¼šé™ä½æˆ‘ä»¬çš„æŒ‡ä»¤æ‰§è¡Œæ•ˆç‡ã€‚</p><p>è€ŒæŒ‡ä»¤é¢„è¯»å–æ¨¡å—åˆšå¥½å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä¸ç®¡æŒ‡ä»¤æ˜¯å¦è·³è½¬ï¼Œéƒ½æå‰æŠŠè·³è½¬ä¹‹åçš„ä¸‹ä¸€æ¡æŒ‡ä»¤ä»å­˜å‚¨å™¨ä¸­è¯»å–å‡ºæ¥ï¼Œä»¥å¤‡æµæ°´çº¿çš„ä¸‹ä¸€é˜¶æ®µä½¿ç”¨ï¼Œè¿™å°±æé«˜äº†CPUçš„æ‰§è¡Œæ•ˆç‡ã€‚</p><p>ä»¥ä¸‹ä»£ç å°±æ˜¯æ ¹æ®æ¡ä»¶è·³è½¬æŒ‡ä»¤çš„æ ¼å¼ï¼Œå¯¹æŒ‡ä»¤ä¸­çš„ç«‹å³æ•°è¿›è¡Œæ‹¼æ¥ï¼Œä¸ºæŒ‡ä»¤è·³è½¬æ—¶çš„PCæä¾›åç§»é‡ã€‚</p><pre><code class=\"language-verilog\">&nbsp;//Bå‹æŒ‡ä»¤çš„ç«‹å³æ•°æ‹¼æ¥\nwire [31:0] bimm&nbsp; = {{20{instr[31]}}, instr[7], instr[30:25], instr[11:8], 1'b0};\n</code></pre><p>åŒæ ·åœ°ï¼Œæ— æ¡ä»¶è·³è½¬æŒ‡ä»¤ä¹Ÿç”¨è¿™ç§æ–¹å¼è¿›è¡Œé¢„å¤„ç†ã€‚å¦‚ä¸‹å›¾çš„jalè·³è½¬æŒ‡ä»¤çš„æ ¼å¼ï¼Œå®ƒçš„æ“ä½œç ä¸º7â€™b1101111ã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/10/c4/1027ff24d1dc411c05670099e27fa8c4.jpg?wh=3905x710\" alt=\"\"></p><p>æ ¹æ®æŒ‡ä»¤çš„æ“ä½œç ï¼Œé¢„è¯‘ç ç”µè·¯å°±å¯ä»¥åˆ¤æ–­å‡ºæ˜¯å¦ä¸ºæ— æ¡ä»¶è·³è½¬æŒ‡ä»¤ã€‚ä¸‹é¢å°±æ˜¯æ— æ¡ä»¶è·³è½¬æŒ‡ä»¤çš„åˆ¤æ–­çš„Verilogè¯­å¥ï¼Œå…¶ä¸­çš„`OPCODE_BRANCHå·²ç»é€šè¿‡å®å®šä¹‰ä¸º 7â€™b1101111ã€‚</p><pre><code class=\"language-verilog\">&nbsp; &nbsp;wire is_jal = (instr[6:0] == `OPCODE_JAL) ;&nbsp; &nbsp; &nbsp;//æ— æ¡ä»¶è·³è½¬æŒ‡ä»¤çš„æ“ä½œç \n</code></pre><p>é¡¾åæ€ä¹‰ï¼Œæ— æ¡ä»¶è·³è½¬æŒ‡ä»¤å°±æ˜¯ä¸éœ€è¦åˆ¤æ–­å…¶ä»–çš„ä»»ä½•æ¡ä»¶ï¼Œç›´æ¥è·³è½¬ã€‚æˆ‘ä»¬ç»§ç»­ç»“åˆä»£ç ç†è§£ï¼Œè¿™è¡Œä»£ç çš„æ„æ€æ˜¯ï¼Œæ ¹æ®jalæŒ‡ä»¤çš„æ ¼å¼å¯¹æŒ‡ä»¤ä¸­çš„ç«‹å³æ•°è¿›è¡Œæ‹¼æ¥ï¼Œä¸ºæŒ‡ä»¤è·³è½¬æ—¶çš„PCæä¾›åç§»é‡ã€‚</p><pre><code class=\"language-verilog\">//Jå‹æŒ‡ä»¤çš„ç«‹å³æ•°æ‹¼æ¥\nwire [31:0] jimm&nbsp; = {{12{instr[31]}}, instr[19:12], instr[20], instr[30:21], 1'b0};\n</code></pre><p>æœ€åï¼Œé¢„è¯»å–ç”µè·¯ä¼šæ ¹æ®å½“å‰çš„PCå€¼å’ŒæŒ‡ä»¤çš„åç§»é‡ç›¸åŠ ï¼Œå¾—åˆ°é¢„æµ‹çš„PCå€¼ï¼Œå¹¶ç”¨é¢„æµ‹çš„PCå€¼æå‰è¯»å‡ºä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚å…¶Verilogä»£ç å¦‚ä¸‹ï¼š</p><pre><code class=\"language-verilog\">&nbsp; //æŒ‡ä»¤åœ°å€çš„åç§»é‡\n&nbsp; wire [31:0] adder = is_jal ? jimm : (is_bxx &amp; bimm[31]) ? bimm : 4;\n&nbsp; assign pre_pc = pc + adder;\n</code></pre><h2>å–æŒ‡æ•°æ®é€šè·¯æ¨¡å—</h2><p>ç”±ä¸Šè¿°çš„æŒ‡ä»¤é¢„è¯»å–æ¨¡å—æŠŠæŒ‡ä»¤ä»å­˜å‚¨å™¨ä¸­è¯»å–ä¹‹åï¼Œéœ€è¦æŠŠå®ƒå‘é€ç»™è¯‘ç æ¨¡å—è¿›è¡Œç¿»è¯‘ã€‚ä½†æ˜¯ï¼Œé¢„è¯»å–æ¨¡å—è¯»å‡ºçš„æŒ‡ä»¤ï¼Œå¹¶ä¸æ˜¯å…¨éƒ¨éƒ½èƒ½å‘é€åç»­æ¨¡å—å»æ‰§è¡Œã€‚</p><p>ä¾‹å¦‚ä¸Šé¢çš„æ¡ä»¶åˆ†æ”¯æŒ‡ä»¤ï¼Œåœ¨æŒ‡ä»¤å®Œæˆä¹‹å‰å°±æŠŠåç»­çš„æŒ‡ä»¤é¢„è¯»å–å‡ºæ¥äº†ã€‚å¦‚æœæŒ‡ä»¤æ‰§è¡Œä¹‹åå‘ç°è·³è½¬çš„æ¡ä»¶ä¸æˆç«‹ï¼Œè¿™æ—¶é¢„è¯»å–çš„æŒ‡ä»¤å°±æ˜¯æ— æ•ˆçš„ï¼Œéœ€è¦å¯¹æµæ°´çº¿è¿›è¡Œå†²åˆ·ï¼ˆflushï¼‰ï¼ŒæŠŠæ— æ•ˆçš„æŒ‡ä»¤éƒ½æ¸…é™¤æ‰ã€‚</p><p>å–æŒ‡é€šè·¯æ¨¡å— <strong>if_id</strong> ä¸»è¦äº§ç”Ÿ3ä¸ªä¿¡å·ã€‚é¦–å…ˆæ˜¯ç»™åé¢è§£ç æ¨¡å—æä¾›çš„æŒ‡ä»¤ä¿¡å· <strong>reg_instrã€‚</strong>å¦‚æœæµæ°´çº¿æ²¡æœ‰å‘ç”Ÿå†²çªï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰å‘å‡ºæ¸…é™¤ä¿¡å·flushï¼Œåˆ™æŠŠé¢„è¯»å–çš„æŒ‡ä»¤ä¿å­˜ï¼Œå¦åˆ™æŠŠæŒ‡ä»¤æ¸…â€œ0â€ã€‚</p><pre><code class=\"language-verilog\">  //æŒ‡ä»¤é€šè·¯\n  always @(posedge clock) begin\n    if (reset) begin \n      reg_instr &lt;= 32'h0; \n    end else if (flush) begin \n      reg_instr &lt;= 32'h0; \n    end else if (valid) begin \n      reg_instr &lt;= in_instr; \n    end\n  end\n</code></pre><p>ç¬¬äºŒä¸ªæ˜¯æ›´æ–°PCå€¼ï¼Œå¦‚æœæŒ‡ä»¤æ¸…é™¤ä¿¡å·flush=â€œ0â€ï¼Œåˆ™æŠŠå½“å‰æŒ‡ä»¤å¯¹åº”çš„PCå€¼ä¿å­˜ä¸º<strong>reg_pc</strong>ï¼Œå¦åˆ™å°±æŠŠreg_pcæ¸…â€œ0â€ã€‚</p><pre><code class=\"language-verilog\">&nbsp; //PCå€¼é€šè·¯\n&nbsp; always @(posedge clock) begin\"\"\n&nbsp; &nbsp; if (reset) begin&nbsp;\n&nbsp; &nbsp; &nbsp; reg_pc &lt;= 32'h0;&nbsp;\n&nbsp; &nbsp; end else if (flush) begin&nbsp;\n&nbsp; &nbsp; &nbsp; reg_pc &lt;= 32'h0;&nbsp;\n&nbsp; &nbsp; end else if (valid) begin&nbsp;\n&nbsp; &nbsp; &nbsp; reg_pc &lt;= in_pc;&nbsp;\n&nbsp; &nbsp; end\n&nbsp; end\n</code></pre><p>æœ€åä¸€ä¸ªæ˜¯æµæ°´çº¿å†²åˆ·çš„æ ‡å¿—ä¿¡å· <strong>reg_noflush</strong>ã€‚å½“éœ€è¦è¿›è¡Œæµæ°´çº¿å†²åˆ·æ—¶ï¼Œreg_noflush=â€œ0â€ï¼Œå¦åˆ™reg_noflush=â€œ1â€ã€‚</p><pre><code class=\"language-verilog\">&nbsp; //æµæ°´çº¿å†²åˆ·æ ‡å¿—ä½\n&nbsp; always @(posedge clock) begin&nbsp;&nbsp;\n&nbsp; &nbsp; if (reset) begin&nbsp;\n&nbsp; &nbsp; &nbsp; reg_noflush &lt;= 1'h0;&nbsp;\n&nbsp; &nbsp; end else if (flush) begin&nbsp;\n&nbsp; &nbsp; &nbsp; reg_noflush &lt;= 1'h0;&nbsp;\n&nbsp; &nbsp; end else if (valid) begin&nbsp;\n&nbsp; &nbsp; &nbsp; reg_noflush &lt;= in_noflush;&nbsp;\n&nbsp; &nbsp; end\n&nbsp; end\n</code></pre><p>ä»¥ä¸‹å°±æ˜¯if_idæ¨¡å—çš„å®Œæ•´ä»£ç ï¼š</p><pre><code class=\"language-verilog\">  //  IF_ID\nmodule if_id(           \n  input         clk,\n  input         reset,\n  input  [31:0] in_instr,\n  input  [31:0] in_pc,\n  input         flush,\n  input         valid,\n  output [31:0] out_instr,\n  output [31:0] out_pc,\n  output        out_noflush\n);\n\n  reg [31:0] reg_instr; \n  reg [31:0] reg_pc; \n  reg [31:0] reg_pc_next; \n  reg        reg_noflush; \n\n  assign out_instr = reg_instr; \n  assign out_pc = reg_pc; \n  assign out_noflush = reg_noflush; \n\n  //æŒ‡ä»¤ä¼ é€’\n  always @(posedge clk or posedge reset) begin\n    if (reset) begin \n      reg_instr &lt;= 32'h0; \n    end else if (flush) begin \n      reg_instr &lt;= 32'h0; \n    end else if (valid) begin \n      reg_instr &lt;= in_instr; \n    end\n  end\n\n  //PCå€¼è½¬é€’\n  always @(posedge clk or posedge reset) begin\n    if (reset) begin \n      reg_pc &lt;= 32'h0; \n    end else if (flush) begin \n      reg_pc &lt;= 32'h0; \n    end else if (valid) begin \n      reg_pc &lt;= in_pc; \n    end\n  end\n\n  //æµæ°´çº¿å†²åˆ·æ ‡å¿—ä½\n  always @(posedge clk or posedge reset) begin  \n    if (reset) begin \n      reg_noflush &lt;= 1'h0; \n    end else if (flush) begin \n      reg_noflush &lt;= 1'h0; \n    end else if (valid) begin \n      reg_noflush &lt;= 1'h1; \n    end\n  end\nendmodule\n</code></pre><p>å¥½äº†ï¼Œåˆ°è¿™é‡ŒCPUæµæ°´çº¿çš„ç¬¬ä¸€æ­¥â€”â€”å–æŒ‡ï¼Œæˆ‘ä»¬å°±è®²å®Œäº†ã€‚åœ¨å–æŒ‡é˜¶æ®µå°±æ˜¯æŠŠå­˜å‚¨å™¨é‡Œçš„æŒ‡ä»¤è¯»å‡ºï¼Œå¹¶ä¼ é€’ç»™åç»­çš„è¯‘ç æ¨¡å—è¿›è¡Œå¤„ç†ã€‚</p><h2>é‡ç‚¹å›é¡¾</h2><p>ä»Šå¤©æˆ‘ä»¬ç»ˆäºå¼€å¯äº†MiniCPUçš„è®¾è®¡ä¸å®ç°ä¹‹æ—…ï¼Œä¸ºæ­¤æˆ‘ä»¬åšäº†å¾ˆå¤šå‡†å¤‡ï¼Œæ­å–œä½ åšæŒåˆ°è¿™é‡Œã€‚</p><p>åœ¨å¼€å§‹è®¾è®¡ä¹‹å‰ï¼Œæˆ‘å…ˆå¸¦ä½ äº†è§£äº†æµæ°´çº¿çš„è®¾è®¡æ€æƒ³ã€‚å·¥å‚é‡Œçš„æµæ°´çº¿è®¾è®¡åœ¨CPUé‡Œä¹Ÿå¯ä»¥å€Ÿé‰´ï¼Œé€šè¿‡è¿™ç§æ–¹æ³•å°±èƒ½æé«˜CPUçš„æ€§èƒ½ã€‚</p><p>çœŸæ­£çš„CPUæµæ°´çº¿è¦æ ¹æ®åº”ç”¨éœ€æ±‚æ¥è®¾è®¡ï¼Œåº”ç”¨åœºæ™¯ä¸ä¸€æ ·ï¼Œè®¾è®¡çš„æµæ°´çº¿ä¹Ÿä¸ä¸€æ ·ã€‚ä¸ºäº†è®©ä½ åœ¨å¼„æ‡‚åŸç†çš„åŸºç¡€ä¸Šèƒ½å¿«é€Ÿä¸Šæ‰‹ï¼Œæˆ‘ä»¬çš„MiniCPUé‡‡ç”¨äº†ç»å…¸çš„äº”çº§æµæ°´çº¿è®¾è®¡ã€‚è¿™ä¸ªæµæ°´çº¿é‡Œä¸€æ¡æŒ‡ä»¤çš„äº”ä¸ªé˜¶æ®µåˆ†åˆ«æ˜¯å–æŒ‡ã€è¯‘ç ã€æ‰§è¡Œã€è®¿å­˜å’Œå†™å›ã€‚</p><p>ä»MiniCPUçš„æ¶æ„è®¾è®¡ä¸Šä¹Ÿèƒ½çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„é‡å¿ƒæ”¾åœ¨äº†æœ€èƒ½ä½“ç°äº”çº§æµæ°´çº¿çš„æ¨¡å—ã€‚ä¸è¿‡éº»é›€è™½å°ï¼Œäº”è„ä¿±å…¨ï¼Œè¿™ä¸ªæ¶æ„é‡Œå·²ç»åŒ…å«äº†CPUå†…æ ¸ï¼Œç”¨äºå­˜æ”¾æŒ‡ä»¤ã€æ•°æ®çš„ROMå’ŒRAMä»¥åŠä¸€äº›ç®€å•çš„å¤–è®¾ã€‚CPUä¼šé€šè¿‡ç³»ç»Ÿæ€»çº¿ï¼ˆSystem Busï¼‰å’Œè¿™äº›å¤–è®¾è¿›è¡Œé€šä¿¡ã€‚</p><p>CPUæ¶æ„é‡Œçš„äº”ä¸ªä¸»è¦æ¨¡å—ï¼Œä½ å¯ä»¥å‚è€ƒåé¢çš„å¯¼å›¾ï¼Œå…¶ä¸­å‰ä¸¤ä¸ªæ¨¡å—æˆ‘ä»¬è¿™èŠ‚è¯¾å·²ç»æ‹¿ä¸‹äº†ï¼Œå…¶å®ƒæ¨¡å—ä¹‹åçš„è¯¾ç¨‹é‡Œæˆ‘ä»¬å†å±•å¼€å­¦ä¹ ã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/82/eb/82b3fyy2fd5b465256fyy76da8a58eeb.jpg?wh=2149x1714\" alt=\"\"></p><p>æ˜ç¡®äº†è®¾è®¡æ€æƒ³å’Œæ¶æ„ä»¥åï¼Œæˆ‘å¸¦ä½ è¿ˆå‡ºäº†æµæ°´çº¿çš„ç¬¬ä¸€æ­¥ï¼Œä¹Ÿå°±æ˜¯å–æŒ‡ä»¤ã€‚</p><p>æˆ‘ä»¬ç°å®é€šè¿‡æŒ‡ä»¤é¢„è¯»å–æ¨¡å—ï¼Œåœ¨ç¨‹åºå‘ç”Ÿåˆ†æ”¯è·³è½¬çš„ä¹‹å‰ï¼Œå¯¹æŒ‡ä»¤è¿›è¡Œåˆ†æï¼Œé¢„æµ‹æŒ‡ä»¤è·³è½¬çš„æ–¹å‘ï¼Œå¹¶æå‰è¯»å–è·³è½¬åçš„æŒ‡ä»¤ã€‚è¿™ä¹ˆåšèƒ½æé«˜æŒ‡ä»¤åœ¨æµæ°´çº¿ä¸­æ‰§è¡Œæ•ˆç‡ã€‚</p><p>æœ€åï¼Œåœ¨if_idæ¨¡å—ä¸­ï¼Œä¼šæ ¹æ®æ˜¯å¦éœ€è¦è¿›è¡Œæµæ°´çº¿å†²åˆ·ï¼Œæ¥åˆ¤æ–­é¢„è¯»å–çš„æŒ‡ä»¤èƒ½å¦ä¼ é€’ç»™åé¢çš„è¯‘ç æ¨¡å—ã€‚å¦‚æœæŒ‡ä»¤åœ¨æµæ°´çº¿ä¸­å‘ç”Ÿå†²çªï¼Œéœ€è¦è¿›è¡Œæµæ°´çº¿å†²åˆ·ï¼Œå°±æŠŠé¢„è¯»å–çš„æŒ‡ä»¤æ¸…é™¤ï¼Œå¦åˆ™å°±æŠŠé¢„è¯»å–çš„æŒ‡ä»¤ä¼ é€’ç»™åç»­çš„è¯‘ç æ¨¡å—ã€‚</p><p>é‚£ä¹‹åæŒ‡ä»¤æ˜¯å¦‚ä½•è¯‘ç çš„å‘¢ï¼Ÿè¯‘ç æ˜¯æµæ°´çº¿å¾ˆå…³é”®çš„ä¸€æ­¥ï¼Œè®©æˆ‘ä»¬ä¸‹èŠ‚è¯¾ä¸€èµ·è§£é”è¿™éƒ¨åˆ†å†…å®¹å§ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>ä¸ºä»€ä¹ˆè¦å¯¹æŒ‡ä»¤è¿›è¡Œé¢„è¯»å–ï¼Ÿç›´æ¥å–æŒ‡ç„¶åè¯‘ç ã€æ‰§è¡Œä¸å¯ä»¥å—ï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºæé—®æˆ–è€…è®°å½•ä»Šå¤©çš„æ”¶è·ï¼Œå¦‚æœæ„Ÿè§‰è¿™èŠ‚è¯¾è¿˜ä¸é”™ï¼Œä¹Ÿæ¨èä½ åˆ†äº«ç»™èº«è¾¹çš„æœ‹å‹ï¼Œå’Œä»–ä¸€èµ·æ‰‹å†™CPUã€‚</p>","neighbors":{"left":{"article_title":"05ï½œæŒ‡ä»¤æ¶æ„ï¼šRISC-Våœ¨CPUè®¾è®¡ä¸Šåˆ°åº•æœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿ","id":546957},"right":{"article_title":"07ï½œæ‰‹å†™CPUï¼ˆäºŒï¼‰ï¼šå¦‚ä½•å®ç°æŒ‡ä»¤è¯‘ç æ¨¡å—ï¼Ÿ","id":548002}},"comments":[{"had_liked":false,"id":353948,"user_name":"è‹æµéƒå®“","can_delete":false,"product_type":"c1","uid":2729645,"ip_address":"æ¹–åŒ—","ucode":"AD07BD9CE03047","user_header":"https://static001.geekbang.org/account/avatar/00/29/a6/ad/e65aec4c.jpg","comment_is_top":false,"comment_ctime":1659947548,"is_pvip":false,"replies":[{"id":128901,"content":"æ­£ç¡® ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1345199,"ctime":1660319023,"ip_address":"æ¹–åŒ—","comment_id":353948,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"é¢„è¯»å–æŒ‡ä»¤çš„å¥½å¤„æ˜¯åŠ å¼ºåˆ†æ”¯é¢„æµ‹èƒ½åŠ›ï¼Œå‡å°‘æ— ç”¨åŠŸï¼Œä½†ä¸ä»…ä»…äºæ­¤ï¼Œæ¯”å¦‚æŸäº›è½¯ä»¶ä»£ç è½¬æ±‡ç¼–ï¼Œä¸ºäº†å¯¹é½ä¼šå¢åŠ ä¸€äº›æ— ç”¨çš„æŒ‡ä»¤ï¼Œæ¯”å¦‚x86çš„nopï¼ˆå®ƒæœ‰æ—¶ä¼šå¤¹åœ¨å‡ ä¸ªå…¶å®ƒæŒ‡ä»¤ä¸­ï¼‰ï¼Œè¿˜æœ‰ å¤æ‚çš„æŒ‡ä»¤å¯ä»¥é€šè¿‡å¾®ç è¿›è¡Œè½¬æ¢ä¸ºå‡ ä¸ªç®€å•çš„æŒ‡ä»¤ï¼Œæ€»ä¹‹ï¼Œcpuä¸æ˜¯ä¹Ÿä¸åº”è¯¥æ‰€æœ‰çš„æŒ‡ä»¤å…¨éƒ¨éƒ½æ‰§è¡Œ\né¢„è¯»å–æŒ‡ä»¤ï¼Œæœ‰åˆ©äºæé«˜cpuæ•ˆç‡ï¼Œåœ¨ä¸€å¼€å§‹ä¸æ‰§è¡Œæµªè´¹çš„æ—¶é—´å¥½è¿‡cpuåšåˆ°ä¸€åŠï¼Œæ‰å‘ç°æ˜¯æ— ç”¨çš„æŒ‡ä»¤å¼ºçš„å•Šï¼Œè¿˜æœ‰éƒ¨åˆ†æ¡ä»¶æŒ‡ä»¤ï¼Œå¯ä»¥è·³è¿‡ä¸æ‰§è¡Œï¼ˆæ¯”å¦‚cè¯­è¨€æé«˜ifçš„æƒé‡ï¼Œé™ä½else ifçš„æƒé‡å°±æ˜¯ä»£ç ä¼˜åŒ–çš„æ–¹æ³•ï¼‰ï¼Œæ‰€ä»¥æé«˜cpuæ•ˆç‡åœ¨è½¯ç¡¬ä»¶ç»“åˆä¸€èµ·åŠªåŠ›çš„å•Š\nå¯ä»¥ç›´æ¥å–æŒ‡ç„¶åè¯‘ç å†æ‰§è¡Œï¼Œä½†é‚£æ ·æ•ˆç‡ä¼šä½å¾ˆå¤šï¼åˆ†æ”¯é¢„æµ‹æ˜¯é…åˆcpuæµæ°´çº¿å·¥ä½œçš„ï¼Œä¸»è¦æ˜¯çœ‹åº”ç”¨åœºæ™¯ï¼Œç”µè„‘æ‰‹æœºç­‰è‚¯å®šç”¨åˆ°åˆ†æ”¯é¢„æµ‹ç­‰ï¼Œä½†é‚£äº›è€æ—§æˆ–ç®€å•çš„è®¡ç®—å™¨å‹æ ¹åˆ†æ”¯é¢„æµ‹ç”¨ä¸åˆ°å‘€\nä¸€å¥è¯ï¼šçœ‹åº”ç”¨åœºæ™¯å†å†³å®šé€ ä»€ä¹ˆæ ·çš„cpuï¼Ÿ","like_count":13,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583738,"discussion_content":"æ­£ç¡® ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660319023,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–åŒ—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353922,"user_name":"=","can_delete":false,"product_type":"c1","uid":2600127,"ip_address":"æ¹–åŒ—","ucode":"104232A8292220","user_header":"https://static001.geekbang.org/account/avatar/00/27/ac/bf/f549183e.jpg","comment_is_top":false,"comment_ctime":1659928273,"is_pvip":false,"replies":[{"id":128904,"content":"å‘å‰ å‘å è·³è½¬","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1345199,"ctime":1660319295,"ip_address":"æ¹–åŒ—","comment_id":353922,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"wire [31:0] adder = is_jal ? jimm : (is_bxx &amp; bimm[31]) ? bimm : 4;  assign pre_pc = pc + adder;\nåœ¨è®¡ç®—æŒ‡ä»¤åœ°å€åç§»é‡çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆå†™is_bxx &amp; bimm[31]ï¼Œè€Œä¸æ˜¯ç›´æ¥å†™is_bxxå‘¢ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":3077660,"avatar":"https://static001.geekbang.org/account/avatar/00/2e/f6/1c/13eb6c3c.jpg","nickname":"ywt","note":"","ucode":"3C692240F904B5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583181,"discussion_content":"bimmå¦‚æœæ˜¯è´Ÿæ•°å°±è½¬è·³ï¼Œå¦‚æœæ˜¯æ­£æ•°å°±ä¸è½¬è·³ã€‚ç›¸å½“äºåªå¾€å›è·³ä¸å¾€åè·³ï¼Œæ˜¯ä¸€ç§åˆ†æ”¯é¢„æµ‹","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1659941835,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ¹–åŒ—","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2600127,"avatar":"https://static001.geekbang.org/account/avatar/00/27/ac/bf/f549183e.jpg","nickname":"=","note":"","ucode":"104232A8292220","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":3077660,"avatar":"https://static001.geekbang.org/account/avatar/00/2e/f6/1c/13eb6c3c.jpg","nickname":"ywt","note":"","ucode":"3C692240F904B5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583205,"discussion_content":"è°¢è°¢ğŸ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659949067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":583181,"ip_address":"æ±Ÿè‹","group_id":0},"score":583205,"extra":""}]},{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583741,"discussion_content":"å‘å‰ å‘å è·³è½¬","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1660319295,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–åŒ—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2041766,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/27/a6/03cc6a69.jpg","nickname":"è¥¿å—é£","note":"","ucode":"3E431881EC63CE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":628290,"discussion_content":"ä½ å¥½ï¼Œæƒ³è¯·æ•™ä¸‹ï¼Œè¿™ä¸ªå‘å‰å’Œå‘åæ˜¯æŒ‡ï¼Ÿ31ä½ä¸æ˜¯ç¬¦å·ä½å˜›ï¼Œå¦‚æœæ˜¯æ­£æ•°ï¼Œ31ä½æ˜¯0ï¼Œé‚£ä¹ˆå°±ä¼šè¿”å›4ï¼Œç»“æœå°±æ˜¯pc+4ã€‚è¿™ä¸ªå’Œå‘å‰å‘åæœ‰ä»€ä¹ˆè”ç³»ï¼Œè¿˜æ˜¯æˆ‘ç†è§£é”™äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1695167822,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":583741,"ip_address":"å¹¿ä¸œ","group_id":0},"score":628290,"extra":""}]}]},{"had_liked":false,"id":354394,"user_name":"ä¼Šå®å³°","can_delete":false,"product_type":"c1","uid":1809580,"ip_address":"æ¹–åŒ—","ucode":"6E0E99A9711605","user_header":"https://static001.geekbang.org/account/avatar/00/1b/9c/ac/4a488a4e.jpg","comment_is_top":false,"comment_ctime":1660357864,"is_pvip":false,"replies":[{"id":128947,"content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1345199,"ctime":1660523312,"ip_address":"æ¹–åŒ—","comment_id":354394,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"å¯¹æŒ‡ä»¤é¢„è¯»å–ï¼Œæ–¹ä¾¿å½¢æˆæµæ°´çº¿ï¼ŒåŠ å¿«æ‰§è¡Œé€Ÿåº¦ï¼Œå› ä¸ºä»å­˜å‚¨å™¨ä¸­ç›´æ¥å–æŒ‡ä»¤ä¼šæ¯”è¾ƒæ…¢ã€‚","like_count":2,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583947,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660523312,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–åŒ—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":363967,"user_name":"ä¸€ç¬‘åƒå¤","can_delete":false,"product_type":"c1","uid":3220050,"ip_address":"æ¹–åŒ—","ucode":"372EFBAB7A3FC1","user_header":"https://static001.geekbang.org/account/avatar/00/31/22/52/49be0b7e.jpg","comment_is_top":false,"comment_ctime":1670398679,"is_pvip":false,"replies":[{"id":132433,"content":"å› ä¸ºæ•°æ®æ˜¯æœ‰ç¬¦å·çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1345199,"ctime":1670896535,"ip_address":"æ¹–åŒ—","comment_id":363967,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸€ä¸‹ä¸ºä»€ä¹ˆè¦å°†ç«‹å³æ•°çš„æœ€é«˜ä½å¤åˆ¶ä»¥æ»¡è¶³32ä½å¯„å­˜å™¨çš„é•¿åº¦è¦æ±‚","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596314,"discussion_content":"å› ä¸ºæ•°æ®æ˜¯æœ‰ç¬¦å·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670896536,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–åŒ—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":363623,"user_name":"ä¸€ä¸ªè¦å¼ºçš„ç”·äºº","can_delete":false,"product_type":"c1","uid":2930994,"ip_address":"æ¹–åŒ—","ucode":"CA2F51B5D37B24","user_header":"https://static001.geekbang.org/account/avatar/00/2c/b9/32/c6177eb3.jpg","comment_is_top":false,"comment_ctime":1669891284,"is_pvip":false,"replies":[{"id":132442,"content":"å•æ ¸ä¹Ÿæ˜¯ä¸€æ ·çš„ ä¸€ä¸ªå‘¨æœŸåˆ†æˆå‡ ä¸ªèŠ‚æ‹ å·¥ä½œçš„ ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1345199,"ctime":1670897826,"ip_address":"æ¹–åŒ—","comment_id":363623,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"è€å¸ˆï¼Œè¯·é—®ï¼šå¯¹äºå•æ ¸cpuçš„æµæ°´çº¿æ¥è¯´ï¼Œå¦‚æœåœ¨è¯‘ç é˜¶æ®µå æ»¡äº†è¿™ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œé‚£ä¹ˆå¦‚ä½•åœ¨å¯¹ä¸‹ä¸€ä¸ªä»»åŠ¡è¿›è¡Œå–æŒ‡å‘¢ï¼Ÿè¿˜æ˜¯è¯´åœ¨è®¾è®¡ä¹‹åˆå·²ç»ç¡®å®šè¿™ä¸ªæ—¶é’Ÿå‘¨æœŸè‚¯å®šèƒ½æ‰§è¡Œå®Œ4ä¸ªæ“ä½œã€‚è¿™æ˜¯æˆ‘çš„ç–‘é—®ï¼Œå¯¹äºå•æ ¸æ¥è¯´ï¼Œå¹¶æ²¡æœ‰åƒå·¥äººçš„æµæ°´çº¿ï¼ˆæœ‰äº”ä¸ªäººåœ¨å·¥ä½œï¼‰ï¼Œè¿™ç§æ€ä¹ˆç†è§£å‘€ï¼Œæœç´¢äº†å¾ˆå¤šèµ„æ–™éƒ½åœ¨æ‹¿å·¥å‚çš„æµæ°´çº¿æ‰“æ¯”å–»ï¼Œæ²¡ææ˜ç™½ã€‚","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596324,"discussion_content":"å•æ ¸ä¹Ÿæ˜¯ä¸€æ ·çš„ ä¸€ä¸ªå‘¨æœŸåˆ†æˆå‡ ä¸ªèŠ‚æ‹ å·¥ä½œçš„ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670897826,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–åŒ—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2992138,"avatar":"https://static001.geekbang.org/account/avatar/00/2d/a8/0a/791d0f5e.jpg","nickname":"Nolan","note":"","ucode":"5AD365C5154F0E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":645034,"discussion_content":"å¼ºçƒˆæ¨èã€Šè®¡ç®—æœºç»„æˆä¸è®¾è®¡ è½¯ç¡¬ä»¶æ¥å£ï¼ˆRISCVç‰ˆï¼‰ã€‹ï¼Œä½ ä¼šæ‰¾åˆ°ä½ æƒ³è¦çš„æ‰€æœ‰ç­”æ¡ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1715729774,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å››å·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1358045,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b8/dd/37726c34.jpg","nickname":"å°é©¬å“¥","note":"","ucode":"B2C0FF38F8C9BC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":636255,"discussion_content":"å³ä½¿å•æ ¸, ä¸€æ¡æŒ‡ä»¤çš„è·å–åˆ°æ‰§è¡Œæ€»æµç¨‹æ˜¯ç”±CPUçš„ä¸åŒæ¨¡å—æ‰§è¡Œçš„, æ‰€ä»¥ä¹Ÿé€šè¿‡æµæ°´çº¿æ¥æé«˜è¿è¡Œæ•ˆç‡.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1705912698,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":363240,"user_name":"é›¨å··","can_delete":false,"product_type":"c1","uid":2631849,"ip_address":"æ¹–åŒ—","ucode":"DE25C003B3D407","user_header":"https://static001.geekbang.org/account/avatar/00/28/28/a9/4cf153a3.jpg","comment_is_top":false,"comment_ctime":1669389343,"is_pvip":false,"replies":[{"id":132463,"content":"å—¯å—¯","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1345199,"ctime":1670922804,"ip_address":"æ¹–åŒ—","comment_id":363240,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"è¯·é—®è€å¸ˆï¼ŒjalræŒ‡ä»¤æ²¡æœ‰è¿›è¡Œåˆ†æ”¯é¢„æµ‹æ˜¯å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596375,"discussion_content":"å—¯å—¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670922804,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–åŒ—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":362442,"user_name":"å°å‚…","can_delete":false,"product_type":"c1","uid":2616255,"ip_address":"æ¹–åŒ—","ucode":"56B75C45A6C761","user_header":"https://static001.geekbang.org/account/avatar/00/27/eb/bf/8acfeaa6.jpg","comment_is_top":false,"comment_ctime":1668518647,"is_pvip":false,"replies":[{"id":131942,"content":"ä½ å­¦è¿‡verilogå—","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1345199,"ctime":1668992554,"ip_address":"æ¹–åŒ—","comment_id":362442,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"wire [31:0] bimm = {{20{instr[31]}}, instr[7], instr[30:25], instr[11:8], 1&#39;b0}; è¿™å¥æ€ä¹ˆç†è§£å‘¢ï¼Œ{20{instr[31]}}è¿™åˆæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":594325,"discussion_content":"ä½ å­¦è¿‡verilogå—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668992554,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–åŒ—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361813,"user_name":"Geek_489363","can_delete":false,"product_type":"c1","uid":3208598,"ip_address":"æ¹–åŒ—","ucode":"939D2729EA4D4F","user_header":"","comment_is_top":false,"comment_ctime":1667887489,"is_pvip":false,"replies":[{"id":131740,"content":"bæŒ‡ä»¤çš„æ•°æ®æ ¼å¼ å°±æ˜¯è¿™æ ·å•Š ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1345199,"ctime":1668310758,"ip_address":"æ¹–åŒ—","comment_id":361813,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"æ ¹æ®bå‹æŒ‡ä»¤çš„æ ¼å¼ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰å¾—åˆ°{{20{instr[31]}}, instr[7], instr[30:25], instr[11:8], 1&#39;b0}ï¼Ÿä¸æ˜¯å¾ˆç†è§£","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593515,"discussion_content":"bæŒ‡ä»¤çš„æ•°æ®æ ¼å¼ å°±æ˜¯è¿™æ ·å•Š ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668310758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–åŒ—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355237,"user_name":"å´å»ºå¹³","can_delete":false,"product_type":"c1","uid":2618440,"ip_address":"","ucode":"C6E578FB8627A3","user_header":"https://static001.geekbang.org/account/avatar/00/27/f4/48/2242bed9.jpg","comment_is_top":false,"comment_ctime":1661219506,"is_pvip":false,"replies":[{"id":129351,"content":"ä½ çš„ç•™è¨€æˆ‘ä»¬å·²ç»æ”¶åˆ°ï¼Œå·²ç»è·ŸLMOSç¡®è®¤å•¦ã€‚if_idæ¨¡å—çš„è®¾è®¡ï¼Œè€å¸ˆè€ƒè™‘åˆ°ä»£ç ç®€æ´ä¸€äº›æœ‰åŠ©äºåˆå­¦ç”¨æˆ·ç†è§£ï¼Œæœ€æ–°ä¸€ç‰ˆGiteeä»£ç é‡Œå·²ç»æŠŠè¿™æ®µåˆ æ‰äº†ï¼Œä¸”å¹¶ä¸å½±å“æ•´ä½“çš„åŠŸèƒ½ã€‚ä½ å¯ä»¥æ‹‰å–ä¸€ä¸‹æœ€æ–°çš„ä»£ç ã€‚","user_name":"ç¼–è¾‘å›å¤","user_name_real":"ç¼–è¾‘","uid":1501385,"ctime":1661402133,"ip_address":"","comment_id":355237,"utype":2}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"ç¡®å®å°‘äº†ä¸€æ®µä»£ç ï¼Œä¸‹é¢è¿™éƒ¨åˆ†ï¼Œgiteeä¹Ÿæ²¡æœ‰ã€‚è€Œä¸”è¾“å…¥in_pc_nextä¹Ÿæ²¡æœ‰åœ¨æ¨¡å—å®šä¹‰é‡Œçœ‹åˆ°ã€‚æˆ‘çš„ç†è§£æ˜¯ï¼Œpre_idæ˜¯if_idçš„ä¼´ç”Ÿç”µè·¯ï¼Œä»–ä»¬ä¿©å…¶å®éƒ½å±äºå–æŒ‡é˜¶æ®µï¼Œé€»è¾‘ä¸Šå±äºåŒä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼ˆæµæ°´çº¿æ­£å¸¸è¿ä½œï¼‰ï¼Œæ¯æ¬¡æ—¶é’Ÿè·³å˜ï¼Œæ ¹æ®nextè¯»å–æ–°çš„æŒ‡ä»¤ï¼Œpre_idå°±ç®—å‡ºä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€ï¼Œæ­¤æ—¶if_idå°±ç”¨æ­¤è¾“å‡ºä½œä¸ºin_pc_nextè¾“å…¥ã€‚æ‰€ä»¥pre_idæ¯”if_idè¦å¿«åŠä¸ªå‘¨æœŸã€‚\n  &#47;&#47;ä¸‹ä¸€æ¡æŒ‡ä»¤çš„PC\n  always @(posedge clock) begin\n    if (reset) begin \n      reg_pc_next &lt;= 32&#39;h0; \n    end else if (flush) begin \n      reg_pc_next &lt;= 32&#39;h0; \n    end else if (valid) begin \n      reg_pc_next &lt;= in_pc_next; \n    end\n  end","like_count":0,"discussions":[{"author":{"id":1501385,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","nickname":"å¬æ°´çš„æ¹–","note":"","ucode":"B1759F90165D81","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585216,"discussion_content":"ä½ çš„ç•™è¨€æˆ‘ä»¬å·²ç»æ”¶åˆ°ï¼Œå·²ç»è·ŸLMOSç¡®è®¤å•¦ã€‚if_idæ¨¡å—çš„è®¾è®¡ï¼Œè€å¸ˆè€ƒè™‘åˆ°ä»£ç ç®€æ´ä¸€äº›æœ‰åŠ©äºåˆå­¦ç”¨æˆ·ç†è§£ï¼Œæœ€æ–°ä¸€ç‰ˆGiteeä»£ç é‡Œå·²ç»æŠŠè¿™æ®µåˆ æ‰äº†ï¼Œä¸”å¹¶ä¸å½±å“æ•´ä½“çš„åŠŸèƒ½ã€‚ä½ å¯ä»¥æ‹‰å–ä¸€ä¸‹æœ€æ–°çš„ä»£ç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661402133,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":8}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355236,"user_name":"å´å»ºå¹³","can_delete":false,"product_type":"c1","uid":2618440,"ip_address":"æ¹–åŒ—","ucode":"C6E578FB8627A3","user_header":"https://static001.geekbang.org/account/avatar/00/27/f4/48/2242bed9.jpg","comment_is_top":false,"comment_ctime":1661219107,"is_pvip":false,"replies":[{"id":129447,"content":"æˆ‘çœ‹çœ‹","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1345199,"ctime":1661677866,"ip_address":"æ¹–åŒ—","comment_id":355236,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"ç¡®å®æ˜¯å°‘äº†ä¸€æ®µä»£ç ï¼Œgiteeä¸‹è½½çš„ä»£ç ä¹Ÿæ²¡æœ‰ã€‚æ˜¯reg_pc_nextè¿™éƒ¨åˆ†ï¼Œå…¶è¾“å…¥ä¸æ˜¯out_pc_next","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585567,"discussion_content":"æˆ‘çœ‹çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661677866,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–åŒ—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354748,"user_name":"å°åš(å¾®ä¿¡/æ‰‹æœºå·1849ç™»å½•)","can_delete":false,"product_type":"c1","uid":3114449,"ip_address":"æ¹–åŒ—","ucode":"58FA146873C268","user_header":"https://static001.geekbang.org/account/avatar/00/2f/85/d1/bfe4d1b2.jpg","comment_is_top":false,"comment_ctime":1660742059,"is_pvip":false,"replies":[{"id":129169,"content":"æ„Ÿè°¢æ”¯æŒ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1345199,"ctime":1661051320,"ip_address":"æ¹–åŒ—","comment_id":354748,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100117801,"comment_content":"è€å¸ˆè®²çš„å¾ˆæ£’å‘€ï¼Œæ–‡æ¡£å­¦ä¹ æ¯”è§†é¢‘çœæ—¶é—´ã€‚","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584685,"discussion_content":"æ„Ÿè°¢æ”¯æŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661051320,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–åŒ—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354676,"user_name":"Abcd","can_delete":false,"product_type":"c1","uid":1796908,"ip_address":"æ¹–åŒ—","ucode":"274C7487FDDC21","user_header":"https://static001.geekbang.org/account/avatar/00/1b/6b/2c/b27eefc5.jpg","comment_is_top":false,"comment_ctime":1660661962,"is_pvip":false,"replies":[{"id":129181,"content":"clone æœ€æ–°ä»£ç  ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1345199,"ctime":1661052622,"ip_address":"æ¹–åŒ—","comment_id":354676,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100117801,"comment_content":"if_idçš„ä»£ç ä¸å…¨å•Šè€å¸ˆï¼Œout_pc_nextçš„é‚£æ®µæ˜¯ä¸æ˜¯æ¼äº†ï¼Ÿå¦å¤–è¯¾ç¨‹ä¸­çš„ä»£ç æœ‰Githubä»“åº“å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584701,"discussion_content":"clone æœ€æ–°ä»£ç  ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661052622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–åŒ—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1501385,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","nickname":"å¬æ°´çš„æ¹–","note":"","ucode":"B1759F90165D81","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584248,"discussion_content":"å®Œæ•´ä»£ç åœ¨Giteeä¸Šhttps://gitee.com/lmos/Geek-time-computer-foundationï¼Œæ²¡æœ‰Github","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1660705362,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2618440,"avatar":"https://static001.geekbang.org/account/avatar/00/27/f4/48/2242bed9.jpg","nickname":"å´å»ºå¹³","note":"","ucode":"C6E578FB8627A3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584861,"discussion_content":"å¥½åƒæ˜¯å°‘äº†ä¸€æ®µä»£ç ï¼Œgiteeä¸‹è½½çš„ä»£ç ä¹Ÿæ²¡æœ‰ã€‚æ˜¯reg_pc_nextè¿™éƒ¨åˆ†ï¼Œä¸æ˜¯out_pc_next","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661164065,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354553,"user_name":"Geek_e0e3b8","can_delete":false,"product_type":"c1","uid":1509335,"ip_address":"æ¹–åŒ—","ucode":"FE90DB5DC31167","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIOMGF5KoLP5t64epdsVAYBBSu5hZFMvl7vqDkDMt7rwIfTur8HYBqLozZxZC78QUI3vVTxENDycA/132","comment_is_top":false,"comment_ctime":1660535670,"is_pvip":false,"replies":[{"id":129457,"content":"å¯ä»¥ æŸ¥çœ‹ä¸€ä¸‹ æŒ‡ä»¤ä½æ®µç›¸å…³çš„è¯´æ˜  ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1345199,"ctime":1661678610,"ip_address":"æ¹–åŒ—","comment_id":354553,"utype":1}],"discussion_count":6,"race_medal":0,"score":3,"product_id":100117801,"comment_content":"&#47;&#47;Bå‹æŒ‡ä»¤çš„ç«‹å³æ•°æ‹¼æ¥    \nwire [31:0] bimm  = {{20{instr[31]}}, instr[7], instr[30:25], instr[11:8], 1&#39;b0};\n&#47;&#47;Jå‹æŒ‡ä»¤çš„ç«‹å³æ•°æ‹¼æ¥ \nwire [31:0] jimm  = {{12{instr[31]}}, instr[19:12], instr[20], instr[30:21], 1&#39;b0};\nè¯·é—®ä¸¤ç§æŒ‡ä»¤çš„ç«‹å³æ•°æ‹¼æ¥ä¸­{20{instr[31]}} å’Œ {12{instr[31]}} è¯¥å¦‚ä½•ç†è§£ï¼Ÿæœ‰æ²¡æœ‰å¯èƒ½æ˜¯å†™é”™äº†ï¼Ÿå¸Œæœ›èƒ½å¤Ÿç»™ä¸ªå…·ä½“æŒ‡ä»¤èŒƒä¾‹è¯¦ç»†è¯´æ˜ä¸‹ï¼Œè°¢è°¢~","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585577,"discussion_content":"å¯ä»¥ æŸ¥çœ‹ä¸€ä¸‹ æŒ‡ä»¤ä½æ®µç›¸å…³çš„è¯´æ˜  ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661678610,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–åŒ—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3068416,"avatar":"https://static001.geekbang.org/account/avatar/00/2e/d2/00/23784f62.jpg","nickname":"Geek_6a1eb9","note":"","ucode":"10AA5B12E0C8C4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585332,"discussion_content":"å¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼Œå¸Œæœ›èƒ½å¸®åˆ°ä½ ï¼šhttps://edwardluo.wordpress.com/2015/04/16/verilog%E4%B8%AD%E6%8B%BC%E6%8E%A5%E8%BF%90%E7%AE%97%E7%AC%A6%E7%9A%84%E7%94%A8%E6%B3%95/","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1661485380,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å±±ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1608643,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8b/c3/bf036d99.jpg","nickname":"ç ¥ç ºå¥‹è¿›","note":"","ucode":"2F12FD10F749AD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":592465,"discussion_content":"æœç„¶ä¸‡èƒ½çš„è¯„è®ºåŒº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667434226,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2685179,"avatar":"https://static001.geekbang.org/account/avatar/00/28/f8/fb/b3ef94fc.jpg","nickname":"é˜¿ç™½","note":"","ucode":"15A30369FCC689","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584921,"discussion_content":"åº”è¯¥æ²¡é”™ï¼Œè¿™æ˜¯åœ¨åšç¬¦å·ä½æ‰©å±•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661225598,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3068064,"avatar":"https://static001.geekbang.org/account/avatar/00/2e/d0/a0/569968d2.jpg","nickname":"Nereus","note":"","ucode":"193623DC164EF3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584534,"discussion_content":"bimn[31:11]=instr[31](ç±»ä¼¼äº20ä¸ª1bitçš„instr[31]ç»„æˆäº†bimnçš„é«˜ä½éƒ¨åˆ†),bimn[10]=instr[7],bimn[9:4]=instr[30:25],bimn[3:1]=instr[11:8],bimn[0]=1&#39;b0","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660897014,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ¹–å—","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1683139,"avatar":"https://static001.geekbang.org/account/avatar/00/19/ae/c3/d930693b.jpg","nickname":"LockedX","note":"","ucode":"19B82B910FC67F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584103,"discussion_content":"æˆ‘ä¹Ÿæœ‰åŒæ ·çš„ç–‘é—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660632608,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354496,"user_name":"ä½ è¦æœ‰ä¸ªä¿¡å¿µ","can_delete":false,"product_type":"c1","uid":3115320,"ip_address":"æ¹–åŒ—","ucode":"CA9D3E9DC138EA","user_header":"https://static001.geekbang.org/account/avatar/00/2f/89/38/441bb99b.jpg","comment_is_top":false,"comment_ctime":1660464760,"is_pvip":false,"replies":[{"id":128949,"content":"å¯„å­˜å™¨ä½ç½®æ˜¯å›ºå®šçš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1345199,"ctime":1660523357,"ip_address":"æ¹–åŒ—","comment_id":354496,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100117801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘ä¸å¤ªç†è§£ç«‹å³æ•°ä¸ºä»€ä¹ˆè¦ä»¥é‚£æ ·çš„æ ¼å¼æ‹¼æ¥ï¼Ÿ ","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583949,"discussion_content":"å¯„å­˜å™¨ä½ç½®æ˜¯å›ºå®šçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660523357,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–åŒ—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3068416,"avatar":"https://static001.geekbang.org/account/avatar/00/2e/d2/00/23784f62.jpg","nickname":"Geek_6a1eb9","note":"","ucode":"10AA5B12E0C8C4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585337,"discussion_content":"æˆ‘æ˜¯RISC-Vå’Œverilogçš„åˆå­¦è€…ï¼Œæˆ‘ä¹Ÿæœ‰è¿™ä¸ªé—®é¢˜ï¼Œç„¶åè¿™ä¸ªè§†é¢‘ç»™äº†æˆ‘ä¸€äº›æ›´è¯¦ç»†çš„è§£ç­”ï¼Œè®©æˆ‘ç†è§£äº†è¿™ä¸ªé—®é¢˜ï¼Œè¿™æ˜¯è§†é¢‘é“¾æ¥ï¼šhttps://www.bilibili.com/video/BV1cS4y1h73D/?spm_id_from=pageDriver&amp;vd_source=848d96f76bd7922d39f70343e2f35a57","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1661490579,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å±±ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353993,"user_name":"skyline","can_delete":false,"product_type":"c1","uid":3077871,"ip_address":"æ¹–åŒ—","ucode":"C4D9A2A2FA99AC","user_header":"https://static001.geekbang.org/account/avatar/00/2e/f6/ef/9d19893f.jpg","comment_is_top":false,"comment_ctime":1659992495,"is_pvip":false,"replies":[{"id":128906,"content":"åç§»åœ°å€æœ‰ç¬¦å·","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1345199,"ctime":1660319344,"ip_address":"æ¹–åŒ—","comment_id":353993,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100117801,"comment_content":"wire [31:0] adder = is_jal ? jimm : (is_bxx &amp; bimm[31]) ? bimm : 4;\næœ‰å°ä¼™ä¼´çŸ¥é“ä¸ºå•¥è¦ä¸ä¸Šbimmçš„ç¬¦å·ä½ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583743,"discussion_content":"åç§»åœ°å€æœ‰ç¬¦å·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660319344,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–åŒ—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2942567,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/e6/67/2a717a78.jpg","nickname":"å’»å’»å’»","note":"","ucode":"D0F8BE3299CC94","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":589024,"discussion_content":"è€å¸ˆï¼Œé’ˆå¯¹äºè¿™ä¸€æ®µï¼Œæˆ‘å¯ä»¥ç†è§£ä¸º bimm[31]=1 çš„æ—¶å€™ adder = bimmï¼Œ  bimm[31]ä¸º0çš„æ—¶å€™ adder = 4 ä¹ˆï¼Ÿ å¦‚æœæ˜¯è¿™æ ·ï¼Œè¿™ä¸ª4 å¦‚ä½•ç†è§£ï¼Ÿ æˆ‘ä¸å¤ªæ˜ç™½ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1664348312,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":583743,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":589024,"extra":""}]},{"author":{"id":3220420,"avatar":"","nickname":"Geek_f26800","note":"","ucode":"FFB386E5B2078C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":594104,"discussion_content":"æ­è½¦åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668787282,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿è¥¿","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353985,"user_name":"é™ˆ-ç‰¹-åˆ«","can_delete":false,"product_type":"c1","uid":1252500,"ip_address":"æ¹–åŒ—","ucode":"224B68C6205152","user_header":"https://static001.geekbang.org/account/avatar/00/13/1c/94/bf891bb0.jpg","comment_is_top":false,"comment_ctime":1659971770,"is_pvip":false,"replies":[{"id":128900,"content":"é  åˆ†æ”¯ é¢„æµ‹ é€»è¾‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1345199,"ctime":1660318910,"ip_address":"æ¹–åŒ—","comment_id":353985,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100117801,"comment_content":"è¯·é—®è€å¸ˆ ä¸Šé¢è¯´çš„å¦‚æœè·³è½¬æŒ‡ä»¤ä¸æˆç«‹çš„è¯ éœ€è¦å†²åˆ·æŒ‡ä»¤ é‚£è¯·é—®cpuæ˜¯å¦‚ä½•å®ç°æ‰§è¡Œæ­£ç¡®çš„æŒ‡ä»¤çš„ï¼ˆè·³è½¬æ¡ä»¶æˆç«‹çš„æŒ‡ä»¤ï¼‰ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583737,"discussion_content":"é  åˆ†æ”¯ é¢„æµ‹ é€»è¾‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660318910,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–åŒ—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":362438,"user_name":"å°å‚…","can_delete":false,"product_type":"c1","uid":2616255,"ip_address":"ç¦å»º","ucode":"56B75C45A6C761","user_header":"https://static001.geekbang.org/account/avatar/00/27/eb/bf/8acfeaa6.jpg","comment_is_top":false,"comment_ctime":1668515077,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100117801,"comment_content":"è¯·é—®MiniCPU çš„æ•´ä½“æ¡†æ¶æ˜¯æ€ä¹ˆè®¾è®¡å‡ºæ¥çš„å‘¢ï¼Ÿ","like_count":1},{"had_liked":false,"id":357889,"user_name":"ç§‹å¤©","can_delete":false,"product_type":"c1","uid":1057056,"ip_address":"æ—¥æœ¬","ucode":"A7E1D953EF7E17","user_header":"https://static001.geekbang.org/account/avatar/00/10/21/20/1299e137.jpg","comment_is_top":false,"comment_ctime":1663732066,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":3,"product_id":100117801,"comment_content":"wire [31:0] bimm  = {{20{instr[31]}}, instr[7], instr[30:25], instr[11:8], 1&#39;b0};  è¿™æ˜¯ verilog é¢„å‘çš„è§„åˆ™å— è¿™ä¹ˆå–å€¼ è¿˜æœ‰è¿™ä¸ªå–å€¼ è·Ÿè€å¸ˆçš„é‚£ä¸ªå›¾æ€ä¹ˆå¯¹åº”çœ‹å•Šï¼Ÿï¼Ÿï¼Ÿ","like_count":1,"discussions":[{"author":{"id":2616255,"avatar":"https://static001.geekbang.org/account/avatar/00/27/eb/bf/8acfeaa6.jpg","nickname":"å°å‚…","note":"","ucode":"56B75C45A6C761","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593779,"discussion_content":"20{instr[31]}è¡¨ç¤º20ä¸ªinstr[31]","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1668520727,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¦å»º","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3208598,"avatar":"","nickname":"Geek_489363","note":"","ucode":"939D2729EA4D4F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593010,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667887187,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":395365,"user_name":"å—¨ï¼æ¢ç´¢è€…","can_delete":false,"product_type":"c1","uid":2709122,"ip_address":"ä¸Šæµ·","ucode":"A796FDEB4CA0AC","user_header":"https://static001.geekbang.org/account/avatar/00/29/56/82/d965a0f5.jpg","comment_is_top":false,"comment_ctime":1730441570,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100117801,"comment_content":"â€œè®¿å­˜é˜¶æ®µï¼ˆMemory Accessï¼‰ï¼šè®¿å­˜æ˜¯æŒ‡å­˜å‚¨å™¨è®¿é—®æŒ‡ä»¤å°†æ•°æ®ä»å­˜å‚¨å™¨ä¸­è¯»å‡ºï¼Œæˆ–å†™å…¥å­˜å‚¨å™¨çš„è¿‡ç¨‹ã€‚â€\næ˜¯æŒ‡ä»¤è®¿é—®å­˜å‚¨å™¨å‘¢è¿˜æ˜¯å­˜å‚¨å™¨è®¿é—®æŒ‡ä»¤ï¼Ÿ","like_count":0},{"had_liked":false,"id":387120,"user_name":"å°é©¬å“¥","can_delete":false,"product_type":"c1","uid":1358045,"ip_address":"åŒ—äº¬","ucode":"B2C0FF38F8C9BC","user_header":"https://static001.geekbang.org/account/avatar/00/14/b8/dd/37726c34.jpg","comment_is_top":false,"comment_ctime":1706522579,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100117801,"comment_content":"æŒ‡ä»¤é¢„è¯»å–å¯ä»¥å‡å°‘æµæ°´çº¿ä¸­çš„æ°”æ³¡ï¼ˆstallsï¼‰ï¼Œä¿æŒæµæ°´çº¿çš„è¿ç»­æµåŠ¨ï¼Œä»è€Œæé«˜å¤„ç†å™¨çš„æ•´ä½“æ€§èƒ½ã€‚","like_count":0},{"had_liked":false,"id":384459,"user_name":"Aå›","can_delete":false,"product_type":"c1","uid":1940105,"ip_address":"ä¸Šæµ·","ucode":"FE96F089C2312C","user_header":"https://static001.geekbang.org/account/avatar/00/1d/9a/89/babe8b52.jpg","comment_is_top":false,"comment_ctime":1700974931,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100117801,"comment_content":"ç»™å–æŒ‡æ¨¡å—å¢åŠ é¢„å–åŠŸèƒ½ï¼Œå–æŒ‡æ‰èƒ½å’Œå…¶ä»–ç»„æˆæµæ°´çº¿ï¼Œå¦åˆ™å°±æ˜¯åŒæ­¥æ“ä½œäº†","like_count":0},{"had_liked":false,"id":366005,"user_name":"Aå›","can_delete":false,"product_type":"c1","uid":1940105,"ip_address":"ä¸Šæµ·","ucode":"FE96F089C2312C","user_header":"https://static001.geekbang.org/account/avatar/00/1d/9a/89/babe8b52.jpg","comment_is_top":false,"comment_ctime":1673317207,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100117801,"comment_content":"é¢„å–çš„æ¦‚å¿µæœ‰ç‚¹ä¸æ¸…ï¼Œå®ƒæ˜¯æŒ‡å–äº†ä¸€æ¡æŒ‡ä»¤å‘ç»™è¯‘ç å™¨åå†æå‰ä¸‹Næ¡æŒ‡ä»¤ï¼Ÿè¿˜æ˜¯è¯´ï¼Œåæ­£å®ƒä¼šæŒç»­å–æŒ‡ï¼Œå¦‚æœé‡åˆ°è·³è½¬å°±æ¨å®šå®ƒä¸€å®šæ²¿ç€æŸä¸ªåˆ†æ”¯æ‰§è¡Œå› æ­¤å°±æ²¿ç€é‚£ä¸ªåˆ†æ”¯å–æŒ‡ï¼Ÿ","like_count":0}]}