{"id":481090,"title":"03 | åˆçª¥é—¨å¾„ï¼šå¼€å‘å¹¶è¿è¡Œä½ çš„ç¬¬ä¸€ä¸ªeBPFç¨‹åº","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å€ªæœ‹é£ã€‚</p><p>é€šè¿‡å‰é¢ä¸¤è®²ï¼Œæˆ‘å·²ç»å¸¦ä½ ä¸ºæ­£å¼è¿›å…¥ eBPF çš„å­¦ä¹ åšå¥½äº†å‡†å¤‡ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¿›å…¥ç¬¬äºŒä¸ªæ¨¡å—â€œåŸºç¡€å…¥é—¨ç¯‡â€çš„å­¦ä¹ ã€‚åœ¨è¿™ä¸ªæ¨¡å—é‡Œï¼Œä½ ä¼šå­¦ä¹ åˆ° eBPF çš„å¼€å‘ç¯å¢ƒæ­å»ºæ–¹æ³•ã€è¿è¡ŒåŸç†ã€ç¼–ç¨‹æ¥å£ï¼Œä»¥åŠå„ç§ç±»å‹ eBPF ç¨‹åºçš„äº‹ä»¶è§¦å‘æœºåˆ¶å’Œåº”ç”¨åœºæ™¯ã€‚</p><p>ä¸Šä¸€è®²ï¼Œæˆ‘å¸¦ä½ ä¸€èµ·æ¢³ç†äº† eBPF çš„å­¦ä¹ è·¯å¾„å’Œå­¦ä¹ æŠ€å·§ï¼Œå¹¶ç‰¹åˆ«å¼ºè°ƒäº†åŠ¨æ‰‹å®è·µåœ¨å­¦ä¹  eBPF è¿‡ç¨‹ä¸­çš„é‡è¦æ€§ã€‚é‚£ä¹ˆï¼ŒeBPF ç¨‹åºåˆ°åº•æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Ÿå¦‚ä½•æ­å»º eBPF çš„å¼€å‘ç¯å¢ƒï¼Œåˆå¦‚ä½•å¼€å‘ä¸€ä¸ª eBPF åº”ç”¨å‘¢ï¼Ÿ</p><p>ä»Šå¤©ï¼Œæˆ‘å°±å¸¦ä½ ä¸€èµ·ä¸Šæ‰‹å¼€å‘ç¬¬ä¸€ä¸ª eBPF ç¨‹åºã€‚</p><h2>å¦‚ä½•é€‰æ‹© eBPF å¼€å‘ç¯å¢ƒï¼Ÿ</h2><p>åœ¨å‰ä¸¤è®²ä¸­ï¼Œæˆ‘æ›¾æåˆ°ï¼Œè™½ç„¶ Linux å†…æ ¸å¾ˆæ—©å°±å·²ç»æ”¯æŒäº† eBPFï¼Œä½†å¾ˆå¤šæ–°ç‰¹æ€§éƒ½æ˜¯<a href=\"https://github.com/iovisor/bcc/blob/master/docs/kernel-versions.md#main-features\">åœ¨ 4.x ç‰ˆæœ¬ä¸­é€æ­¥å¢åŠ çš„</a>ã€‚æ‰€ä»¥ï¼Œæƒ³è¦ç¨³å®šè¿è¡Œ eBPF ç¨‹åºï¼Œå†…æ ¸è‡³å°‘éœ€è¦ <strong>4.9</strong> æˆ–è€…æ›´æ–°çš„ç‰ˆæœ¬ã€‚è€Œåœ¨å¼€å‘å’Œå­¦ä¹  eBPF æ—¶ï¼Œä¸ºäº†ä½“éªŒå’ŒæŒæ¡æœ€æ–°çš„ eBPF ç‰¹æ€§ï¼Œæˆ‘æ¨èä½¿ç”¨æ›´æ–°çš„ <strong>5.x</strong> å†…æ ¸ã€‚</p><p>ä½œä¸º eBPF æœ€é‡å¤§çš„æ”¹è¿›ä¹‹ä¸€ï¼Œä¸€æ¬¡ç¼–è¯‘åˆ°å¤„æ‰§è¡Œï¼ˆç®€ç§° CO-REï¼‰è§£å†³äº†å†…æ ¸æ•°æ®ç»“æ„åœ¨ä¸åŒç‰ˆæœ¬å·®å¼‚å¯¼è‡´çš„å…¼å®¹æ€§é—®é¢˜ã€‚ä¸è¿‡ï¼Œåœ¨ä½¿ç”¨ CO-RE ä¹‹å‰ï¼Œå†…æ ¸éœ€è¦å¼€å¯  <code>CONFIG_DEBUG_INFO_BTF=y</code> å’Œ <code>CONFIG_DEBUG_INFO=y</code> è¿™ä¸¤ä¸ªç¼–è¯‘é€‰é¡¹ã€‚ä¸ºäº†é¿å…ä½ åœ¨é¦–æ¬¡å­¦ä¹  eBPF æ—¶å°±å»é‡æ–°ç¼–è¯‘å†…æ ¸ï¼Œæˆ‘æ¨èä½¿ç”¨å·²ç»é»˜è®¤å¼€å¯è¿™äº›ç¼–è¯‘é€‰é¡¹çš„å‘è¡Œç‰ˆï¼Œä½œä¸ºä½ çš„å¼€å‘ç¯å¢ƒï¼Œæ¯”å¦‚ï¼š</p><!-- [[[read_end]]] --><ul>\n<li>Ubuntu 20.10+</li>\n<li>Fedora 31+</li>\n<li>RHEL 8.2+</li>\n<li>Debian 11+</li>\n</ul><p>ä½ å¯ä»¥åˆ°å…¬æœ‰äº‘å¹³å°ä¸Šåˆ›å»ºè¿™äº›å‘è¡Œç‰ˆçš„è™šæ‹Ÿæœºï¼Œä¹Ÿå¯ä»¥å€ŸåŠ© <a href=\"https://www.vagrantup.com\">Vagrant</a>&nbsp;ã€<a href=\"https://multipass.run\">Multipass</a> ç­‰å·¥å…·ï¼Œåˆ›å»ºæœ¬åœ°çš„è™šæ‹Ÿæœºã€‚æ¯”å¦‚ï¼Œä½¿ç”¨æˆ‘æœ€å–œæ¬¢çš„ <a href=\"https://www.vagrantup.com/downloads\">Vagrant</a>&nbsp;ï¼Œé€šè¿‡ä¸‹é¢å‡ æ­¥å°±å¯ä»¥åˆ›å»ºå‡ºä¸€ä¸ª Ubuntu 21.10 çš„è™šæ‹Ÿæœºï¼š</p><pre><code class=\"language-bash\">#&nbsp;åˆ›å»ºå’Œå¯åŠ¨Ubuntu 21.10è™šæ‹Ÿæœº\nvagrant init&nbsp;ubuntu/impish64\nvagrant up\n\n# ç™»å½•åˆ°è™šæ‹Ÿæœº\nvagrant ssh\n</code></pre><h2>å¦‚ä½•æ­å»º eBPF å¼€å‘ç¯å¢ƒï¼Ÿ</h2><p>è™šæ‹Ÿæœºåˆ›å»ºå¥½ä¹‹åï¼Œæ¥ä¸‹æ¥å°±éœ€è¦å®‰è£… eBPF å¼€å‘å’Œè¿è¡Œæ‰€éœ€è¦çš„å¼€å‘å·¥å…·ï¼Œè¿™åŒ…æ‹¬ï¼š</p><ul>\n<li>å°† eBPF ç¨‹åºç¼–è¯‘æˆå­—èŠ‚ç çš„ LLVMï¼›</li>\n<li>C è¯­è¨€ç¨‹åºç¼–è¯‘å·¥å…· makeï¼›</li>\n<li>æœ€æµè¡Œçš„ eBPF å·¥å…·é›† BCC å’Œå®ƒä¾èµ–çš„å†…æ ¸å¤´æ–‡ä»¶ï¼›</li>\n<li>ä¸å†…æ ¸ä»£ç ä»“åº“å®æ—¶åŒæ­¥çš„ libbpfï¼›</li>\n<li>åŒæ ·æ˜¯å†…æ ¸ä»£ç æä¾›çš„ eBPF ç¨‹åºç®¡ç†å·¥å…· bpftoolã€‚</li>\n</ul><p>ä½ å¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œæ¥å®‰è£…è¿™äº›å¿…è¦çš„å¼€å‘å·¥å…·ï¼š</p><pre><code class=\"language-shell\">#&nbsp;For Ubuntu20.10+\nsudo apt-get install -y  make clang llvm libelf-dev&nbsp;libbpf-dev bpfcc-tools libbpfcc-dev linux-tools-$(uname -r) linux-headers-$(uname -r)\n\n# For RHEL8.2+\nsudo yum install libbpf-devel make clang llvm elfutils-libelf-devel bpftool bcc-tools bcc-devel\n</code></pre><p>å¦‚æœä½ å·²ç»ç†Ÿæ‚‰äº† Linux å†…æ ¸çš„è‡ªå®šä¹‰ç¼–è¯‘å’Œå®‰è£…æ–¹æ³•ï¼Œå¹¶é€‰æ‹©åœ¨æ—§çš„å‘è¡Œç‰ˆä¸­é€šè¿‡è‡ªè¡Œç¼–è¯‘å’Œå‡çº§å†…æ ¸æ­å»ºå¼€å‘ç¯å¢ƒï¼Œä¸Šè¿°çš„å¼€å‘å·¥å…·æµç¨‹ä¹Ÿéœ€è¦åšé€‚å½“çš„è°ƒæ•´ã€‚è¿™é‡Œç‰¹åˆ«æé†’ä¸‹ï¼Œlibbpf-dev è¿™ä¸ªåº“å¾ˆå¯èƒ½éœ€è¦ä»æºç å®‰è£…ï¼Œå…·ä½“çš„æ­¥éª¤ä½ å¯ä»¥å‚è€ƒ libbpf çš„ <a href=\"https://github.com/libbpf/libbpf\">GitHub ä»“åº“</a>ã€‚</p><h2>å¦‚ä½•å¼€å‘ç¬¬ä¸€ä¸ª eBPF ç¨‹åºï¼Ÿ</h2><p>å½“å‰é¢è¿™äº›å¼€å‘å·¥å…·å’Œä¾èµ–åº“å®‰è£…å®Œæˆåï¼Œä¸€ä¸ªå®Œæ•´çš„ eBPF å¼€å‘ç¯å¢ƒå°±å‡†å¤‡å¥½äº†ã€‚æ¥ä¸‹æ¥ï¼Œä½ è‚¯å®šè¿«ä¸åŠå¾…åœ°æƒ³è¦ä½“éªŒä¸€ä¸‹ eBPF çš„å¼ºå¤§åŠŸèƒ½äº†ã€‚</p><p>ä¸è¿‡ï¼Œåœ¨å¼€å‘ eBPF ç¨‹åºä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ eBPF çš„å¼€å‘å’Œæ‰§è¡Œè¿‡ç¨‹ã€‚å¦‚ä¸‹å›¾ï¼ˆå›¾ç‰‡æ¥è‡ª <a href=\"https://www.brendangregg.com/ebpf.html\">brendangregg.com</a>ï¼‰æ‰€ç¤ºï¼Œä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªè¿‡ç¨‹åˆ†ä¸ºä»¥ä¸‹ 5 æ­¥ï¼š</p><ul>\n<li>ç¬¬ä¸€æ­¥ï¼Œä½¿ç”¨ C è¯­è¨€å¼€å‘ä¸€ä¸ª eBPF ç¨‹åºï¼›</li>\n<li>ç¬¬äºŒæ­¥ï¼Œå€ŸåŠ© LLVM æŠŠ eBPF ç¨‹åºç¼–è¯‘æˆ BPF å­—èŠ‚ç ï¼›</li>\n<li>ç¬¬ä¸‰æ­¥ï¼Œé€šè¿‡ bpf ç³»ç»Ÿè°ƒç”¨ï¼ŒæŠŠ BPF å­—èŠ‚ç æäº¤ç»™å†…æ ¸ï¼›</li>\n<li>ç¬¬å››æ­¥ï¼Œå†…æ ¸éªŒè¯å¹¶è¿è¡Œ BPF å­—èŠ‚ç ï¼Œå¹¶æŠŠç›¸åº”çš„çŠ¶æ€ä¿å­˜åˆ° BPF æ˜ å°„ä¸­ï¼›</li>\n<li>ç¬¬äº”æ­¥ï¼Œç”¨æˆ·ç¨‹åºé€šè¿‡ BPF æ˜ å°„æŸ¥è¯¢ BPF å­—èŠ‚ç çš„è¿è¡ŒçŠ¶æ€ã€‚</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/a7/6a/a7165eea1fd9fc24090a3a1e8987986a.png?wh=1500x550\" alt=\"å›¾ç‰‡\" title=\"eBPF ç¨‹åºæ‰§è¡Œè¿‡ç¨‹\"></p><p>è¿™é‡Œçš„æ¯ä¸€æ­¥ï¼Œæˆ‘ä»¬å½“ç„¶å¯ä»¥è‡ªå·±åŠ¨æ‰‹å»å®Œæˆã€‚ä½†å¯¹åˆå­¦è€…æ¥è¯´ï¼Œæˆ‘æ¨èä½ ä» BCCï¼ˆBPF Compiler Collectionï¼‰å¼€å§‹å­¦èµ·ã€‚</p><p>BCC æ˜¯ä¸€ä¸ª BPF ç¼–è¯‘å™¨é›†åˆï¼ŒåŒ…å«äº†ç”¨äºæ„å»º BPF ç¨‹åºçš„ç¼–ç¨‹æ¡†æ¶å’Œåº“ï¼Œå¹¶æä¾›äº†å¤§é‡å¯ä»¥ç›´æ¥ä½¿ç”¨çš„å·¥å…·ã€‚ä½¿ç”¨ BCC çš„å¥½å¤„æ˜¯ï¼Œ<strong>å®ƒæŠŠä¸Šè¿°çš„ eBPF æ‰§è¡Œè¿‡ç¨‹é€šè¿‡å†…ç½®æ¡†æ¶æŠ½è±¡äº†èµ·æ¥ï¼Œå¹¶æä¾›äº† Pythonã€C++ ç­‰ç¼–ç¨‹è¯­è¨€æ¥å£</strong>ã€‚è¿™æ ·ï¼Œä½ å°±å¯ä»¥ç›´æ¥é€šè¿‡ Python è¯­è¨€å»è·Ÿ eBPF çš„å„ç§äº‹ä»¶å’Œæ•°æ®è¿›è¡Œäº¤äº’ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°±ä»¥è·Ÿè¸ª <a href=\"https://man7.org/linux/man-pages/man2/open.2.html\">openat()</a>ï¼ˆå³æ‰“å¼€æ–‡ä»¶ï¼‰è¿™ä¸ªç³»ç»Ÿè°ƒç”¨ä¸ºä¾‹ï¼Œå¸¦ä½ æ¥çœ‹çœ‹å¦‚ä½•å¼€å‘å¹¶è¿è¡Œç¬¬ä¸€ä¸ª eBPF ç¨‹åºã€‚</p><p>ä½¿ç”¨ BCC å¼€å‘ eBPF ç¨‹åºï¼Œå¯ä»¥æŠŠå‰é¢è®²åˆ°çš„äº”æ­¥ç®€åŒ–ä¸ºä¸‹é¢çš„ä¸‰æ­¥ã€‚</p><h3><strong>ç¬¬ä¸€æ­¥ï¼šä½¿ç”¨ C å¼€å‘ä¸€ä¸ª eBPF ç¨‹åº</strong></h3><p>æ–°å»ºä¸€ä¸ª  <code>hello.c</code>&nbsp;æ–‡ä»¶ï¼Œå¹¶è¾“å…¥ä¸‹é¢çš„å†…å®¹ï¼š</p><pre><code class=\"language-c++\">int hello_world(void *ctx)\n{\n&nbsp; &nbsp; bpf_trace_printk(\"Hello, World!\");\n&nbsp; &nbsp; return 0;\n}\n</code></pre><p>å°±åƒæ‰€æœ‰ç¼–ç¨‹è¯­è¨€çš„â€œ&nbsp;Hello World&nbsp;â€ç¤ºä¾‹ä¸€æ ·ï¼Œè¿™æ®µä»£ç çš„å«ä¹‰å°±æ˜¯æ‰“å°ä¸€å¥ â€œHello, World!â€ å­—ç¬¦ä¸²ã€‚å…¶ä¸­ï¼Œ <code>bpf_trace_printk()</code>&nbsp;æ˜¯ä¸€ä¸ªæœ€å¸¸ç”¨çš„ BPF è¾…åŠ©å‡½æ•°ï¼Œå®ƒçš„ä½œç”¨æ˜¯è¾“å‡ºä¸€æ®µå­—ç¬¦ä¸²ã€‚ä¸è¿‡ï¼Œç”±äº eBPF è¿è¡Œåœ¨å†…æ ¸ä¸­ï¼Œå®ƒçš„è¾“å‡ºå¹¶ä¸æ˜¯é€šå¸¸çš„æ ‡å‡†è¾“å‡ºï¼ˆstdoutï¼‰ï¼Œè€Œæ˜¯å†…æ ¸è°ƒè¯•æ–‡ä»¶  <code>/sys/kernel/debug/tracing/trace_pipe</code>&nbsp;ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨  <code>cat</code>  å‘½ä»¤æ¥æŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶çš„å†…å®¹ã€‚</p><h3>ç¬¬äºŒæ­¥ï¼šä½¿ç”¨ Python å’Œ BCC åº“å¼€å‘ä¸€ä¸ªç”¨æˆ·æ€ç¨‹åº</h3><p>æ¥ä¸‹æ¥ï¼Œåˆ›å»ºä¸€ä¸ª  <code>hello.py</code>  æ–‡ä»¶ï¼Œå¹¶è¾“å…¥ä¸‹é¢çš„å†…å®¹ï¼š</p><pre><code class=\"language-python\">#!/usr/bin/env python3\n# 1) import bcc library\nfrom bcc import BPF\n\n# 2) load BPF program\nb = BPF(src_file=\"hello.c\")\n# 3) attach kprobe\nb.attach_kprobe(event=\"do_sys_openat2\", fn_name=\"hello_world\")\n# 4) read and print&nbsp;/sys/kernel/debug/tracing/trace_pipe\nb.trace_print()\n</code></pre><p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹æ¯ä¸€å¤„çš„å…·ä½“å«ä¹‰ï¼š</p><ul>\n<li>ç¬¬ 1) å¤„å¯¼å…¥äº† BCC&nbsp;åº“çš„ BPF æ¨¡å—ï¼Œä»¥ä¾¿æ¥ä¸‹æ¥è°ƒç”¨ï¼›</li>\n<li>ç¬¬ 2) å¤„è°ƒç”¨ BPF() åŠ è½½ç¬¬ä¸€æ­¥å¼€å‘çš„ BPF æºä»£ç ï¼›</li>\n<li>ç¬¬ 3) å¤„å°† BPF ç¨‹åºæŒ‚è½½åˆ°å†…æ ¸æ¢é’ˆï¼ˆç®€ç§° kprobeï¼‰ï¼Œå…¶ä¸­  <code>do_sys_openat2()</code> æ˜¯ç³»ç»Ÿè°ƒç”¨  <code>openat()</code>  åœ¨å†…æ ¸ä¸­çš„å®ç°ï¼›</li>\n<li>ç¬¬ 4) å¤„åˆ™æ˜¯è¯»å–å†…æ ¸è°ƒè¯•æ–‡ä»¶  <code>/sys/kernel/debug/tracing/trace_pipe</code>  çš„å†…å®¹ï¼Œå¹¶æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºä¸­ã€‚</li>\n</ul><p>åœ¨è¿è¡Œçš„æ—¶å€™ï¼ŒBCC ä¼šè°ƒç”¨ LLVMï¼ŒæŠŠ BPF æºä»£ç ç¼–è¯‘ä¸ºå­—èŠ‚ç ï¼Œå†åŠ è½½åˆ°å†…æ ¸ä¸­è¿è¡Œã€‚</p><h3>ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡Œ eBPF ç¨‹åº</h3><p>ç”¨æˆ·æ€ç¨‹åºå¼€å‘å®Œæˆä¹‹åï¼Œæœ€åä¸€æ­¥å°±æ˜¯æ‰§è¡Œå®ƒäº†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ eBPF ç¨‹åºéœ€è¦ä»¥ root ç”¨æˆ·æ¥è¿è¡Œï¼Œé root ç”¨æˆ·éœ€è¦åŠ ä¸Š sudo æ¥æ‰§è¡Œï¼š</p><pre><code class=\"language-python\">sudo python3 hello.py\n</code></pre><p>ç¨ç­‰ä¸€ä¼šï¼Œä½ å°±å¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„è¾“å‡ºï¼š</p><pre><code class=\"language-python\">b' cat-10656 [006] d... 2348.114455: bpf_trace_printk: Hello, World!'\n</code></pre><p>è¾“å‡ºçš„æ ¼å¼å¯ç”±  <code>/sys/kernel/debug/tracing/trace_options</code>&nbsp;æ¥ä¿®æ”¹ã€‚æ¯”å¦‚å‰é¢è¿™ä¸ªé»˜è®¤çš„è¾“å‡ºä¸­ï¼Œæ¯ä¸ªå­—æ®µçš„å«ä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼š</p><ul>\n<li>cat-10656 è¡¨ç¤ºè¿›ç¨‹çš„åå­—å’Œ PIDï¼›</li>\n<li>[006] è¡¨ç¤º CPU ç¼–å·ï¼›</li>\n<li>dâ€¦ è¡¨ç¤ºä¸€ç³»åˆ—çš„é€‰é¡¹ï¼›</li>\n<li>2348.114455 è¡¨ç¤ºæ—¶é—´æˆ³ï¼›</li>\n<li>bpf_trace_printk è¡¨ç¤ºå‡½æ•°åï¼›</li>\n<li>æœ€åçš„ â€œHello, World!â€ å°±æ˜¯è°ƒç”¨  <code>bpf_trace_printk()</code>  ä¼ å…¥çš„å­—ç¬¦ä¸²ã€‚</li>\n</ul><p>åˆ°äº†è¿™é‡Œï¼Œæ­å–œä½ å·²ç»æˆåŠŸå¼€å‘å¹¶è¿è¡Œäº†ç¬¬ä¸€ä¸ª eBPF ç¨‹åºï¼ä¸è¿‡ï¼ŒçŸ­æš‚çš„å…´å¥‹ä¹‹åï¼Œä½ ä¼šå‘ç°è¿™ä¸ªç¨‹åºè¿˜æœ‰ä¸å°‘çš„ç¼ºç‚¹ï¼Œæ¯”å¦‚ï¼š</p><ul>\n<li>æ—¢ç„¶è·Ÿè¸ªçš„æ˜¯æ‰“å¼€æ–‡ä»¶çš„ç³»ç»Ÿè°ƒç”¨ï¼Œé™¤äº†è°ƒç”¨è¿™ä¸ªæ¥å£è¿›ç¨‹çš„åå­—ä¹‹å¤–ï¼Œè¢«æ‰“å¼€çš„æ–‡ä»¶åä¹Ÿåº”è¯¥åœ¨è¾“å‡ºä¸­ï¼›</li>\n<li><code>bpf_trace_printk()</code>&nbsp;çš„è¾“å‡ºæ ¼å¼ä¸å¤Ÿçµæ´»ï¼Œåƒæ˜¯ CPU ç¼–å·ã€bpf_trace_printk å‡½æ•°åç­‰å†…å®¹æ²¡å¿…è¦è¾“å‡ºï¼›</li>\n<li>â€¦â€¦</li>\n</ul><p>å®é™…ä¸Šï¼Œæˆ‘å¹¶ä¸æ¨èé€šè¿‡å†…æ ¸è°ƒè¯•æ–‡ä»¶ç³»ç»Ÿè¾“å‡ºæ—¥å¿—çš„æ–¹å¼ã€‚ä¸€æ–¹é¢ï¼Œå®ƒä¼šå¸¦æ¥å¾ˆå¤§çš„æ€§èƒ½é—®é¢˜ï¼›å¦ä¸€æ–¹é¢ï¼Œæ‰€æœ‰çš„ eBPF ç¨‹åºéƒ½ä¼šæŠŠå†…å®¹è¾“å‡ºåˆ°åŒä¸€ä¸ªä½ç½®ï¼Œå¾ˆéš¾æ ¹æ® eBPF ç¨‹åºå»åŒºåˆ†æ—¥å¿—çš„æ¥æºã€‚</p><p>é‚£ä¹ˆï¼Œæ€ä¹ˆæ¥è§£å†³è¿™äº›é—®é¢˜å‘¢ï¼Ÿæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±è¯•ç€ä¸€èµ·æ”¹è¿›è¿™ä¸ªç¨‹åºã€‚</p><h2>å¦‚ä½•æ”¹è¿›ç¬¬ä¸€ä¸ª eBPF ç¨‹åºï¼Ÿ</h2><p>åœ¨&nbsp;<a href=\"https://time.geekbang.org/column/article/479384\">01 è®²</a>&nbsp;ä¸­æˆ‘æ›¾æåˆ°ï¼ŒBPF ç¨‹åºå¯ä»¥åˆ©ç”¨ BPF æ˜ å°„ï¼ˆmapï¼‰è¿›è¡Œæ•°æ®å­˜å‚¨ï¼Œè€Œç”¨æˆ·ç¨‹åºä¹Ÿéœ€è¦é€šè¿‡ BPF æ˜ å°„ï¼ŒåŒè¿è¡Œåœ¨å†…æ ¸ä¸­çš„ BPF ç¨‹åºè¿›è¡Œäº¤äº’ã€‚æ‰€ä»¥ï¼Œä¸ºäº†è§£å†³ä¸Šé¢æåˆ°çš„ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå³è·å–è¢«æ‰“å¼€æ–‡ä»¶åçš„é—®é¢˜ï¼Œæˆ‘ä»¬å°±è¦å¼•å…¥ BPF æ˜ å°„ã€‚</p><p>ä¸ºäº†ç®€åŒ– BPF æ˜ å°„çš„äº¤äº’ï¼ŒBCC å®šä¹‰äº†ä¸€ç³»åˆ—çš„<a href=\"https://github.com/iovisor/bcc/blob/master/docs/reference_guide.md#output\">åº“å‡½æ•°å’Œè¾…åŠ©å®å®šä¹‰</a>ã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨  <code>BPF_PERF_OUTPUT</code>  æ¥å®šä¹‰ä¸€ä¸ª Perf äº‹ä»¶ç±»å‹çš„ BPF æ˜ å°„ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code class=\"language-c++\">// åŒ…å«å¤´æ–‡ä»¶\n#include &lt;uapi/linux/openat2.h&gt;\n#include &lt;linux/sched.h&gt;\n\n// å®šä¹‰æ•°æ®ç»“æ„\nstruct data_t {\n&nbsp; u32 pid;\n&nbsp; u64 ts;\n&nbsp; char comm[TASK_COMM_LEN];\n&nbsp; char fname[NAME_MAX];\n};\n\n// å®šä¹‰æ€§èƒ½äº‹ä»¶æ˜ å°„\nBPF_PERF_OUTPUT(events);\n</code></pre><p>ç„¶åï¼Œåœ¨ eBPF ç¨‹åºä¸­ï¼Œå¡«å……è¿™ä¸ªæ•°æ®ç»“æ„ï¼Œå¹¶è°ƒç”¨  <code>perf_submit()</code>  æŠŠæ•°æ®æäº¤åˆ°åˆšæ‰å®šä¹‰çš„ BPF æ˜ å°„ä¸­ï¼š</p><pre><code class=\"language-c++\">// å®šä¹‰kprobeå¤„ç†å‡½æ•°\nint hello_world(struct pt_regs *ctx, int dfd, const char __user * filename, struct open_how *how)\n{\n&nbsp; struct data_t data = { };\n\n  // è·å–PIDå’Œæ—¶é—´\n&nbsp; data.pid = bpf_get_current_pid_tgid();\n&nbsp; data.ts = bpf_ktime_get_ns();\n\n  // è·å–è¿›ç¨‹å\n&nbsp; if (bpf_get_current_comm(&amp;data.comm, sizeof(data.comm)) == 0)\n&nbsp; {\n&nbsp; &nbsp; bpf_probe_read(&amp;data.fname, sizeof(data.fname), (void *)filename);\n&nbsp; }\n\n  // æäº¤æ€§èƒ½äº‹ä»¶\n&nbsp; events.perf_submit(ctx, &amp;data, sizeof(data));\n&nbsp; return 0;\n}\n</code></pre><p>å…¶ä¸­ï¼Œä»¥ bpf å¼€å¤´çš„å‡½æ•°éƒ½æ˜¯ eBPF æä¾›çš„è¾…åŠ©å‡½æ•°ï¼Œæ¯”å¦‚ï¼š</p><ul>\n<li><code>bpf_get_current_pid_tgid</code>  ç”¨äºè·å–è¿›ç¨‹çš„ TGID å’Œ PIDã€‚å› ä¸ºè¿™å„¿å®šä¹‰çš„ data.pid æ•°æ®ç±»å‹ä¸º u32ï¼Œæ‰€ä»¥é«˜ 32 ä½èˆå¼ƒæ‰åå°±æ˜¯è¿›ç¨‹çš„ PIDï¼›</li>\n<li><code>bpf_ktime_get_ns</code>  ç”¨äºè·å–ç³»ç»Ÿè‡ªå¯åŠ¨ä»¥æ¥çš„æ—¶é—´ï¼Œå•ä½æ˜¯çº³ç§’ï¼›</li>\n<li><code>bpf_get_current_comm</code>  ç”¨äºè·å–è¿›ç¨‹åï¼Œå¹¶æŠŠè¿›ç¨‹åå¤åˆ¶åˆ°é¢„å®šä¹‰çš„ç¼“å†²åŒºä¸­ï¼›</li>\n<li><code>bpf_probe_read</code>  ç”¨äºä»æŒ‡å®šæŒ‡é’ˆå¤„è¯»å–å›ºå®šå¤§å°çš„æ•°æ®ï¼Œè¿™é‡Œåˆ™ç”¨äºè¯»å–è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶åã€‚</li>\n</ul><p>æœ‰äº† BPF æ˜ å°„ä¹‹åï¼Œå‰é¢æˆ‘ä»¬è°ƒç”¨çš„&nbsp;<code>bpf_trace_printk()</code>&nbsp;å…¶å®å°±ä¸å†éœ€è¦äº†ï¼Œå› ä¸ºç”¨æˆ·æ€è¿›ç¨‹å¯ä»¥ç›´æ¥ä» BPF æ˜ å°„ä¸­è¯»å–å†…æ ¸ eBPF ç¨‹åºçš„è¿è¡ŒçŠ¶æ€ã€‚</p><p>è¿™å…¶å®ä¹Ÿå°±æ˜¯ä¸Šé¢æåˆ°çš„ç¬¬äºŒä¸ªå¾…è§£å†³é—®é¢˜ã€‚é‚£ä¹ˆï¼Œæ€æ ·ä»ç”¨æˆ·æ€è¯»å– BPF æ˜ å°„å†…å®¹å¹¶è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºï¼ˆstdoutï¼‰å‘¢ï¼Ÿ</p><p>åœ¨ BCC ä¸­ï¼Œä¸ eBPF ç¨‹åºä¸­  <code>BPF_PERF_OUTPUT</code>&nbsp;ç›¸å¯¹åº”çš„ç”¨æˆ·æ€è¾…åŠ©å‡½æ•°æ˜¯  <code>open_perf_buffer()</code> ã€‚å®ƒéœ€è¦ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œç”¨äºå¤„ç†ä» Perf äº‹ä»¶ç±»å‹çš„ BPF æ˜ å°„ä¸­è¯»å–åˆ°çš„æ•°æ®ã€‚å…·ä½“çš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code class=\"language-python\">from bcc import BPF\n\n# 1) load BPF program\nb = BPF(src_file=\"trace-open.c\")\nb.attach_kprobe(event=\"do_sys_openat2\", fn_name=\"hello_world\")\n\n# 2) print header\nprint(\"%-18s %-16s %-6s %-16s\" % (\"TIME(s)\", \"COMM\", \"PID\", \"FILE\"))\n\n# 3) define the callback for perf event\nstart = 0\ndef print_event(cpu, data, size):\n&nbsp; &nbsp; global start\n&nbsp; &nbsp; event = b[\"events\"].event(data)\n&nbsp; &nbsp; if start == 0:\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; start = event.ts\n&nbsp; &nbsp; time_s = (float(event.ts - start)) / 1000000000\n&nbsp; &nbsp; print(\"%-18.9f %-16s %-6d %-16s\" % (time_s, event.comm, event.pid, event.fname))\n\n# 4) loop with callback to print_event\nb[\"events\"].open_perf_buffer(print_event)\nwhile 1:\n&nbsp; &nbsp; try:\n&nbsp; &nbsp; &nbsp; &nbsp; b.perf_buffer_poll()\n&nbsp; &nbsp; except KeyboardInterrupt:\n&nbsp; &nbsp; &nbsp; &nbsp; exit()\n</code></pre><p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹æ¯ä¸€å¤„çš„å…·ä½“å«ä¹‰ï¼š</p><ul>\n<li>ç¬¬ 1) å¤„è·Ÿå‰é¢çš„ Hello World ä¸€æ ·ï¼ŒåŠ è½½ eBPF ç¨‹åºå¹¶æŒ‚è½½åˆ°å†…æ ¸æ¢é’ˆä¸Šï¼›</li>\n<li>ç¬¬ 2) å¤„åˆ™æ˜¯è¾“å‡ºä¸€è¡Œ Header å­—ç¬¦ä¸²è¡¨ç¤ºæ•°æ®çš„æ ¼å¼ï¼›</li>\n<li>ç¬¬ 3) å¤„çš„  <code>print_event</code>  å®šä¹‰ä¸€ä¸ªæ•°æ®å¤„ç†çš„å›è°ƒå‡½æ•°ï¼Œæ‰“å°è¿›ç¨‹çš„åå­—ã€PID ä»¥åŠå®ƒè°ƒç”¨ openat æ—¶æ‰“å¼€çš„æ–‡ä»¶ï¼›</li>\n<li>ç¬¬ 4) å¤„çš„  <code>open_perf_buffer</code>  å®šä¹‰äº†åä¸º â€œeventsâ€ çš„ Perf äº‹ä»¶æ˜ å°„ï¼Œè€Œåé€šè¿‡ä¸€ä¸ªå¾ªç¯è°ƒç”¨  <code>perf_buffer_poll</code>  è¯»å–æ˜ å°„çš„å†…å®¹ï¼Œå¹¶æ‰§è¡Œå›è°ƒå‡½æ•°è¾“å‡ºè¿›ç¨‹ä¿¡æ¯ã€‚</li>\n</ul><p>å°†å‰é¢çš„ eBPF ç¨‹åºä¿å­˜åˆ°  <code>trace-open.c</code> ï¼Œç„¶åå†æŠŠä¸Šè¿°çš„ Python ç¨‹åºä¿å­˜åˆ°  <code>trace-open.py</code> ä¹‹åï¼ˆä½ å¯ä»¥åœ¨ GitHub <a href=\"https://github.com/feiskyer/ebpf-apps/blob/main/bcc-apps/python/trace_open.py\">ebpf-apps</a> ä¸Šæ‰¾åˆ°å®Œæ•´çš„ä»£ç ï¼‰ï¼Œå°±èƒ½ä»¥ root ç”¨æˆ·æ¥è¿è¡Œäº†ï¼š</p><pre><code class=\"language-python\">sudo python3 trace-open.py\n</code></pre><p>ç¨ç­‰ä¸€ä¼šï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„è¾“å‡ºï¼š</p><pre><code class=\"language-python\">TIME(s)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; COMM&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;PID&nbsp; &nbsp; FILE\n2.384485400&nbsp; &nbsp; &nbsp; &nbsp; b'irqbalance'&nbsp; &nbsp; 991&nbsp; &nbsp; b'/proc/interrupts'\n2.384750400&nbsp; &nbsp; &nbsp; &nbsp; b'irqbalance'&nbsp; &nbsp; 991&nbsp; &nbsp; b'/proc/stat'\n2.384838400&nbsp; &nbsp; &nbsp; &nbsp; b'irqbalance'&nbsp; &nbsp; 991&nbsp; &nbsp; b'/proc/irq/0/smp_affinity'\n</code></pre><p>æ­å–œï¼Œä½ å·²ç»å¼€å‘äº†ç¬¬ä¸€ä¸ªå®Œæ•´çš„ eBPF ç¨‹åºã€‚ç›¸å¯¹äºå‰é¢çš„ Hello Worldï¼Œå®ƒçš„è¾“å‡ºä¸ä»…æ ¼å¼æ›´ä¸ºæ¸…æ™°ï¼Œè¿˜æŠŠè¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶åè¾“å‡ºå‡ºæ¥äº†ï¼Œè¿™åœ¨æ’æŸ¥é¢‘ç¹æ‰“å¼€æ–‡ä»¶ç›¸å…³çš„æ€§èƒ½é—®é¢˜æ—¶å°¤å…¶æœ‰ç”¨ã€‚</p><h2>å°ç»“</h2><p>ä»Šå¤©ï¼Œæˆ‘å¸¦ä½ ä¸€èµ·æ­å»ºäº† eBPF çš„å¼€å‘ç¯å¢ƒï¼Œå®‰è£…äº† eBPF å¼€å‘æ—¶å¸¸ç”¨çš„å·¥å…·å’Œä¾èµ–åº“ã€‚å¹¶ä¸”ï¼Œæˆ‘ä»æœ€ç®€å•çš„ Hello World å¼€å§‹ï¼Œå¸¦ä½ å€ŸåŠ© BCC ä»é›¶å¼€å‘äº†ä¸€ä¸ªè·Ÿè¸ª <a href=\"https://man7.org/linux/man-pages/man2/open.2.html\">openat()</a>&nbsp;ç³»ç»Ÿè°ƒç”¨çš„ eBPF ç¨‹åºã€‚</p><p>é€šå¸¸ï¼Œå¼€å‘ä¸€ä¸ª eBPF ç¨‹åºéœ€è¦ç»è¿‡å¼€å‘ C è¯­è¨€ eBPF ç¨‹åºã€ç¼–è¯‘ä¸º BPF å­—èŠ‚ç ã€åŠ è½½ BPF å­—èŠ‚ç åˆ°å†…æ ¸ã€å†…æ ¸éªŒè¯å¹¶è¿è¡Œ BPF å­—èŠ‚ç ï¼Œä»¥åŠç”¨æˆ·ç¨‹åºè¯»å– BPF æ˜ å°„äº”ä¸ªæ­¥éª¤ã€‚ä½¿ç”¨ BCC çš„å¥½å¤„æ˜¯ï¼Œå®ƒæŠŠè¿™å‡ ä¸ªæ­¥éª¤é€šè¿‡å†…ç½®æ¡†æ¶æŠ½è±¡äº†èµ·æ¥ï¼Œå¹¶æä¾›äº†ç®€å•æ˜“ç”¨çš„ Python æ¥å£ï¼Œè¿™å¯ä»¥å¸®ä½ å¤§å¤§ç®€åŒ– eBPF ç¨‹åºçš„å¼€å‘ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼ŒBCC æä¾›çš„ä¸€ç³»åˆ—å·¥å…·ä¸ä»…å¯ä»¥ç›´æ¥ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¿˜æ˜¯ä½ å­¦ä¹ å’Œå¼€å‘æ–°çš„ eBPF ç¨‹åºçš„æœ€ä½³å‚è€ƒç¤ºä¾‹ã€‚åœ¨è¯¾ç¨‹åç»­çš„å†…å®¹ä¸­ï¼Œæˆ‘è¿˜ä¼šå¸¦ä½ æ·±å…¥ BCC çš„è¯¦ç»†ä½¿ç”¨æ–¹æ³•ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æœ€åï¼Œæˆ‘æƒ³è¯·ä½ èŠä¸€èŠè¿™å‡ ä¸ªé—®é¢˜ï¼š</p><ol>\n<li>ä½ é€šå¸¸éƒ½æ˜¯å¦‚ä½•æ­å»º Linux å’Œ eBPF ç¯å¢ƒçš„ï¼Ÿ</li>\n<li>åœ¨ä»Šå¤©çš„æ¡ˆä¾‹æ“ä½œä¸­ï¼Œä½ é‡åˆ°äº†ä»€ä¹ˆé—®é¢˜ï¼Œåˆæ˜¯å¦‚ä½•è§£å†³çš„å‘¢ï¼Ÿ</li>\n<li>è™½ç„¶ä»Šå¤©å¼€å‘çš„ç¨‹åºéå¸¸çŸ­å°ï¼Œä½ è§‰å¾—å®ƒèƒ½å¦åœ¨æ—¥å¸¸çš„å·¥ä½œä¸­å¸®åŠ©åˆ°ä½ å‘¢ï¼Ÿ</li>\n</ol><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå’Œæˆ‘è®¨è®ºï¼Œä¹Ÿæ¬¢è¿æŠŠè¿™èŠ‚è¯¾åˆ†äº«ç»™ä½ çš„åŒäº‹ã€æœ‹å‹ã€‚è®©æˆ‘ä»¬ä¸€èµ·åœ¨å®æˆ˜ä¸­æ¼”ç»ƒï¼Œåœ¨äº¤æµä¸­è¿›æ­¥ã€‚</p>","comments":[{"had_liked":false,"id":331701,"user_name":"è«å","can_delete":false,"product_type":"c1","uid":1007254,"ip_address":"","ucode":"E28F2602BA25DD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5e/96/a03175bc.jpg","comment_is_top":true,"comment_ctime":1642731325,"is_pvip":false,"replies":[{"id":121166,"content":"1. è°¢è°¢æŒ‡å‡ºï¼Œå·²ç»ä¿®å¤äº†ã€‚\n2. æ˜¯çš„ï¼Œä½†æˆ‘ä»¬ä¸“æ è¿˜æ˜¯å¸Œæœ›ä½¿ç”¨æ–°ç‰ˆæœ¬çš„å†…æ ¸æ¥å­¦ä¹ ï¼Œè¿™æ ·ä¸€æ–¹é¢èƒ½ä½“éªŒæœ€æ–°çš„ç‰¹æ€§ï¼Œå¦ä¸€æ–¹é¢ä¸éœ€è¦ç­‰åé¢éœ€è¦ç”¨åˆ°æ–°ç‰¹æ€§çš„æ—¶å€™å†é‡æ–°é…ç½®å¼€å‘ç¯å¢ƒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1642749240,"ip_address":"","comment_id":331701,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100104501,"comment_content":"ç»™å€ªè€å¸ˆçš„ Github ä»“åº“é‡Œé¢çš„è¿™ä¸ªå°ç¨‹åºæŒ‘ä¸ªğŸ›ï¼š\n1ã€b = BPF(src_file=&quot;trace-open.c&quot;)ï¼Œtrace-open.c -&gt; trace_open.c\n2ã€ä¾èµ–äº† openat2.h å¤´æ–‡ä»¶ï¼Œopenat2 ç³»ç»Ÿè°ƒç”¨è‡ª 5.6 ç‰ˆæœ¬æ‰å‡ºç°ï¼Œä½äºè¿™ä¸ªç‰ˆæœ¬æ— æ³•è¿è¡Œ trace_open.pyï¼Œå»ºè®®ç”¨ openat ç³»ç»Ÿè°ƒç”¨ï¼Œæœ‰æ¯”è¾ƒå¥½çš„ç‰ˆæœ¬å…¼å®¹æ€§ã€‚","like_count":9,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547559,"discussion_content":"1. è°¢è°¢æŒ‡å‡ºï¼Œå·²ç»ä¿®å¤äº†ã€‚\n2. æ˜¯çš„ï¼Œä½†æˆ‘ä»¬ä¸“æ è¿˜æ˜¯å¸Œæœ›ä½¿ç”¨æ–°ç‰ˆæœ¬çš„å†…æ ¸æ¥å­¦ä¹ ï¼Œè¿™æ ·ä¸€æ–¹é¢èƒ½ä½“éªŒæœ€æ–°çš„ç‰¹æ€§ï¼Œå¦ä¸€æ–¹é¢ä¸éœ€è¦ç­‰åé¢éœ€è¦ç”¨åˆ°æ–°ç‰¹æ€§çš„æ—¶å€™å†é‡æ–°é…ç½®å¼€å‘ç¯å¢ƒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642749241,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1494491,"avatar":"https://static001.geekbang.org/account/avatar/00/16/cd/db/7467ad23.jpg","nickname":"Bachue Zhou","note":"","ucode":"3175754775CA32","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611795,"discussion_content":"æˆ‘è¿™è¾¹ç”¨çš„æ˜¯ Ubuntu 20.04ï¼Œå‡çº§åˆ°äº† HWE å†…æ ¸ï¼ˆ5.15ï¼‰æ‰èƒ½ç”¨ã€‚å¦‚æœç”¨çš„æ˜¯ Ubuntu 18.04 ä¼°è®¡åªèƒ½è‡ªå·±ç¼–è¯‘å†…æ ¸äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680324219,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2291160,"avatar":"https://static001.geekbang.org/account/avatar/00/22/f5/d8/121e4b68.jpg","nickname":"Woa ğŸ¤","note":"","ucode":"6033F496082F3B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553915,"discussion_content":"å°±ä¸ºäº†å­¦ebpf æˆ‘å·²ç»å‡çº§åˆ°æœ€åˆ°ç‰ˆæœ¬äº†hhh","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646132546,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":331695,"user_name":"è«å","can_delete":false,"product_type":"c1","uid":1007254,"ip_address":"","ucode":"E28F2602BA25DD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5e/96/a03175bc.jpg","comment_is_top":true,"comment_ctime":1642729821,"is_pvip":false,"replies":[{"id":121174,"content":"å¤ªèµäº†ğŸ‘ æ„Ÿè°¢åˆ†äº«è¿½è¸ªæ–‡ä»¶æ‰“å¼€çš„è¿™äº›åº”ç”¨åœºæ™¯","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1642749734,"ip_address":"","comment_id":331695,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100104501,"comment_content":"è¿½è¸ªæ–‡ä»¶æ‰“å¼€äº‹ä»¶ï¼Œé‡‡ç”¨åœºæ™¯å¤§è‡´æœ‰ï¼š\n1ã€æŸ¥çœ‹æŸä¸ªç¨‹åºå¯åŠ¨æ—¶åŠ è½½äº†å“ªäº›é…ç½®æ–‡ä»¶ï¼Œä¾¿äºç¡®è®¤æ˜¯å¦åŠ è½½äº†æ­£ç¡®çš„é…ç½®æ–‡ä»¶ã€‚å¯¹äºå…è®¸è‡ªå®šä¹‰é…ç½®æ–‡ä»¶è·¯å¾„çš„ç¨‹åºå°¤å…¶æœ‰ç”¨ï¼Œä¾‹å¦‚ MySQLã€PostgreSQLã€‚\n2ã€æŸ¥çœ‹æ˜¯å¦å­˜åœ¨é¢‘ç¹æˆ–å‘¨æœŸæ€§æ‰“å¼€æŸäº›æ–‡ä»¶çš„æƒ…å†µï¼Œè€ƒè™‘æ˜¯å¦å­˜åœ¨ä¼˜åŒ–å¯èƒ½ã€‚æ¯”å¦‚å‘¨æœŸæ€§æ‰“å¼€æŸä¸ªæå°‘å˜åŒ–çš„æ–‡ä»¶ï¼Œå¯ä»¥ä¸€æ¬¡æ€§è¯»å–ï¼Œä¸”ç›‘å¬æ–‡ä»¶å˜åŠ¨äº‹ä»¶ï¼Œé¿å…å¤šæ¬¡æ‰“å¼€è¯»å–ã€‚\n3ã€åˆ†æä¾èµ– &#47;procã€&#47;sys ç­‰è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿçš„ Linux å·¥å…·å¤§è‡´å·¥ä½œåŸç†ã€‚æ¯”å¦‚æ‰§è¡Œ vmstatï¼Œï¼Œå¯ä»¥é€šè¿‡è¿½è¸ªæ–‡ä»¶æ‰“å¼€äº‹ä»¶çœ‹åˆ°è‡³å°‘æ‰“å¼€äº† &#47;proc&#47;meminfoã€&#47;proc&#47;statã€&#47;proc&#47;vmstat è¿™å‡ ä¸ªæ–‡ä»¶ï¼Œå¸®åŠ©ä½ æ›´å¥½çš„ç†è§£å·¥å…·çš„æ•°æ®æºä¸å®ç°åŸç†ã€‚\n4ã€åˆ†æ K8sã€Docker ç­‰ cgroup ç›¸å…³æ“ä½œã€‚æ¯”å¦‚ docker run xxx æ—¶ï¼Œå¯ä»¥çœ‹åˆ° &#47;sys&#47;fs&#47;cgroup&#47;cpuset&#47;docker&#47;xxx&#47;cpuset.cpusã€&#47;sys&#47;fs&#47;cgroup&#47;cpuset&#47;docker&#47;xxx&#47;cpuset.mems ç­‰ cgroup æ–‡ä»¶è¢«æ‰“å¼€ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹ kube-proxy åœ¨å‘¨æœŸæ€§åˆ·æ–° cgroup ç›¸å…³æ–‡ä»¶ã€‚\n5ã€....","like_count":67,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547567,"discussion_content":"å¤ªèµäº†ğŸ‘ æ„Ÿè°¢åˆ†äº«è¿½è¸ªæ–‡ä»¶æ‰“å¼€çš„è¿™äº›åº”ç”¨åœºæ™¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642749734,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1115379,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqFcfujkkBkic2ARpPOP4XeEhPNJwA51JJibD79pg4UTA9hS2WnmrSZ0qgiaibdM87dugCeYyNicnYiaFgw/132","nickname":"ermazi","note":"","ucode":"D38B0E9BD701A5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":624491,"discussion_content":"è¯¾ä»£è¡¨:&gt;å“ˆå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1690609946,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2657734,"avatar":"https://static001.geekbang.org/account/avatar/00/28/8d/c6/9afdffaa.jpg","nickname":"Andylin","note":"","ucode":"A097E6C450E7E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":622026,"discussion_content":"æ„Ÿè°¢å¤§ä½¬çš„æä¾›çš„æƒ³æ³•ä¸æ–¹æ¡ˆï¼Œä¸è¿‡å…¶ä¸­ä¸€ç‚¹ä¸çŸ¥é“æ˜¯ä¸æ˜¯æœ‰é—®é¢˜ï¼Œæˆ‘é€šè¿‡è¿½è¸ªæ–‡ä»¶æ˜¯å‘ç°å¹¶ä¸æ˜¯kube-proxyåœ¨å‘¨æœŸæ€§çš„åˆ·æ–°cgroupç›¸å…³çš„æ–‡ä»¶,è€Œæ˜¯kubeletå‘¨æœŸæ€§çš„åˆ·æ€§cgroupç›¸å…³çš„æ–‡ä»¶ï¼Œé»˜è®¤æ˜¯æ¯éš”10ç§’ã€ç‰ˆæœ¬k8s 1.22ã€‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1687858088,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":331954,"user_name":"JUNLONG","can_delete":false,"product_type":"c1","uid":1396741,"ip_address":"","ucode":"15C3E0B27E081C","user_header":"https://static001.geekbang.org/account/avatar/00/15/50/05/90f1a14e.jpg","comment_is_top":false,"comment_ctime":1642919801,"is_pvip":false,"replies":[{"id":121330,"content":"ğŸ‘è°¢è°¢åˆ†äº«ï¼æˆ‘é€šå¸¸è¿˜æ˜¯ä½¿ç”¨è™šæ‹Ÿæœºä½œä¸ºå¼€å‘ç¯å¢ƒï¼Œåªåœ¨éƒ¨ç½²çš„æ—¶å€™æ‰ç”¨å®¹å™¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1643031477,"ip_address":"","comment_id":331954,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100104501,"comment_content":"ä¹ æƒ¯ç”¨dockerçš„åŒå­¦å¯ä»¥è¯•ä¸‹ è¿™ä¸ªé•œåƒï¼Œgithubåœ°å€ï¼šgithub.com&#47;Jun10ng&#47;ebpf-for-desktop \nç”¨dockerå¯ä»¥ç”¨vscodeç¼–è¾‘ä¼šé«˜æ•ˆç‚¹ã€‚å¦‚æœå–œæ¬¢çš„è¯å°±æ¥ä¸ªstartå§ è°¢è°¢","like_count":10,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548109,"discussion_content":"ğŸ‘è°¢è°¢åˆ†äº«ï¼æˆ‘é€šå¸¸è¿˜æ˜¯ä½¿ç”¨è™šæ‹Ÿæœºä½œä¸ºå¼€å‘ç¯å¢ƒï¼Œåªåœ¨éƒ¨ç½²çš„æ—¶å€™æ‰ç”¨å®¹å™¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643031477,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1002220,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4a/ec/745cdf1c.jpg","nickname":"æ™“æ™–","note":"","ucode":"2C8E8492745F1D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567616,"discussion_content":"è™šæ‹Ÿæœºä¹Ÿå¯ä»¥è®¾ç½®ç«¯å£æ˜ å°„, vscodeé€šè¿‡Remote Explorerè¿æ¥è¿›å»ç¼–è¾‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650958486,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333407,"user_name":"jssfy","can_delete":false,"product_type":"c1","uid":1137238,"ip_address":"","ucode":"F16353CFE607B7","user_header":"https://static001.geekbang.org/account/avatar/00/11/5a/56/115c6433.jpg","comment_is_top":false,"comment_ctime":1644328881,"is_pvip":false,"replies":[{"id":122029,"content":"å¯¹å¤§éƒ¨åˆ†åº”ç”¨æ¥è¯´ï¼Œæ€§èƒ½æŸå¤±åŸºæœ¬å¯ä»¥å¿½ç•¥ã€‚ä½†å¦‚æœåº”ç”¨å¯¹æ€§èƒ½æœ‰æ¯”è¾ƒæè‡´çš„æ•æ„Ÿï¼Œæ¯”å¦‚åˆ°äº†çº³ç§’æˆ–è€…æŒ‡ä»¤é›†ï¼Œé‚£å°±éœ€è¦è€ƒè™‘eBPFçš„æ€§èƒ½æŸè€—äº†ã€‚\n\nç»™ä½ åˆ†äº«ä¸€ä¸ªeBPFæ€§èƒ½è¯„ä¼°çš„æ¼”è®²ï¼Œå¸Œæœ›æœ‰æ‰€å¸®åŠ©ï¼šhttps:&#47;&#47;ebpf.io&#47;summit-2020-slides&#47;eBPF_Summit_2020-Lightning-Bryce_Kahle-How_and_When_You_Should_Measure_CPU_Overhead_of_eBPF_Programs.pdfã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1644730914,"ip_address":"","comment_id":333407,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100104501,"comment_content":"è¯·é—®è¿™ç§å¯¹openç³»ç»Ÿè°ƒç”¨çš„æˆªè·ä¼šå½±å“ç”¨æˆ·æ–‡ä»¶æ‰“å¼€çš„æ€§èƒ½ä¸? å½±å“åˆ°ä»€ä¹ˆç¨‹åº¦å‘¢?","like_count":7,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550779,"discussion_content":"å¯¹å¤§éƒ¨åˆ†åº”ç”¨æ¥è¯´ï¼Œæ€§èƒ½æŸå¤±åŸºæœ¬å¯ä»¥å¿½ç•¥ã€‚ä½†å¦‚æœåº”ç”¨å¯¹æ€§èƒ½æœ‰æ¯”è¾ƒæè‡´çš„æ•æ„Ÿï¼Œæ¯”å¦‚åˆ°äº†çº³ç§’æˆ–è€…æŒ‡ä»¤é›†ï¼Œé‚£å°±éœ€è¦è€ƒè™‘eBPFçš„æ€§èƒ½æŸè€—äº†ã€‚\n\nç»™ä½ åˆ†äº«ä¸€ä¸ªeBPFæ€§èƒ½è¯„ä¼°çš„æ¼”è®²ï¼Œå¸Œæœ›æœ‰æ‰€å¸®åŠ©ï¼šhttps://ebpf.io/summit-2020-slides/eBPF_Summit_2020-Lightning-Bryce_Kahle-How_and_When_You_Should_Measure_CPU_Overhead_of_eBPF_Programs.pdfã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1644730915,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":331769,"user_name":"ThinkerWalker","can_delete":false,"product_type":"c1","uid":1317111,"ip_address":"","ucode":"8CD44FFC37ACB7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/rQOn22bNV0kHpoPWRLRicjQCOkiaYmcVABiaIJxIDWIibSdqWXYTxjcdjiadibIxFsGVp5UE4DBd6Nx2DxjhAdlMIZeQ/132","comment_is_top":false,"comment_ctime":1642754645,"is_pvip":false,"replies":[{"id":121186,"content":"è¿™äº›å‚æ•°éƒ½æ˜¯ç”±BCCæ¡†æ¶é»˜è®¤æä¾›çš„ï¼Œä¸éœ€è¦ä½¿ç”¨çš„æ—¶å€™å†é¢å¤–ä¼ å…¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1642766771,"ip_address":"","comment_id":331769,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100104501,"comment_content":"æœ‰ä¸ªPythonè¯­æ³•çš„ç–‘é—®ï¼štrace_open.pyä¸­ï¼Œprint_eventè¢«è°ƒç”¨çš„æ—¶å€™ã€28è¡Œï¼Œb[&quot;events&quot;].open_perf_buffer(print_event)ã€‘æ˜¯å¦‚ä½•ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼ˆcpu, data, sizeï¼‰å‘¢ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547608,"discussion_content":"è¿™äº›å‚æ•°éƒ½æ˜¯ç”±BCCæ¡†æ¶é»˜è®¤æä¾›çš„ï¼Œä¸éœ€è¦ä½¿ç”¨çš„æ—¶å€™å†é¢å¤–ä¼ å…¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642766771,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2077066,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLetObiaicw0oSWoyYL2sGib0YMWmekqOa0kyiblmIQ9G62g9CaVVrLGqZSYQbz7JSpibmCr862KuibKndw/132","nickname":"sloanchu","note":"","ucode":"73A98E1CBDC938","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559835,"discussion_content":"https://github.com/iovisor/bcc/blob/master/docs/reference_guide.md#2-open_perf_bufferï¼Œæ–‡æ¡£é‡Œæœ‰è¯´æ˜","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1648995581,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2291160,"avatar":"https://static001.geekbang.org/account/avatar/00/22/f5/d8/121e4b68.jpg","nickname":"Woa ğŸ¤","note":"","ucode":"6033F496082F3B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553916,"discussion_content":"è¿™é‡Œåªæ˜¯å°†è¿™ä¸ªå‡½æ•°ä½œä¸ºå›è°ƒå‡½æ•°ä¼ å…¥ï¼Œåˆ°æ—¶å€™å–‚çš„å‚æ•°æ˜¯ç”±BCCæ¥å†³å®šçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646132728,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332234,"user_name":"ä¸äº†å³°","can_delete":false,"product_type":"c1","uid":1013424,"ip_address":"","ucode":"E23B96D6A3D4EC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/76/b0/14fec62f.jpg","comment_is_top":false,"comment_ctime":1643102601,"is_pvip":false,"replies":[{"id":121415,"content":"çœ‹æ¥ä½ å·²ç»å¯¹BCCæ¯”è¾ƒç†Ÿæ‚‰äº†ğŸ˜Š","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1643202469,"ip_address":"","comment_id":332234,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100104501,"comment_content":"åŸæ¥è¿™ä¸ª trace_open.py  å°±æ˜¯ä¸€ä¸ªã€Œç®€åŒ–ã€ç‰ˆçš„ opensnoop-bpfcc  å·¥å…·å‘€ã€‚\n\næˆ‘ä¸ºäº†æ›´æ¸…æ™°æ›´ç®€å•çš„æ‰“å°å‡º trace_open.py çš„è¾“å‡ºæŠŠä¸€äº›æœåŠ¡éƒ½å…³äº† ï¼šï¼‰\nsystemctl stop multipathd\nsystemctl stop snapd\nsystemctl stop irqbalance ","like_count":5,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548457,"discussion_content":"çœ‹æ¥ä½ å·²ç»å¯¹BCCæ¯”è¾ƒç†Ÿæ‚‰äº†ğŸ˜Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643202470,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":331711,"user_name":"Geek_5aa343","can_delete":false,"product_type":"c1","uid":2635369,"ip_address":"","ucode":"535F96029C1EB7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/pNKoOAa1QXibrykHNXibW4tyaIIhicocPGXtcVnEianCyOQY9bl0P2JQ3wSialUaolcLVEWycCEBz1Oe4Tj4yghH9yw/132","comment_is_top":false,"comment_ctime":1642733326,"is_pvip":false,"replies":[{"id":121175,"content":"1. æ¯ä¸ªç³»ç»Ÿè°ƒç”¨åœ¨å†…æ ¸ä¸­éƒ½æœ‰ç±»ä¼¼ sys_xxx çš„å®ç°å‡½æ•°ï¼Œæˆ‘ä»¬åé¢è¯¾ç¨‹ä¼šè®²åˆ°æ€ä¹ˆæŸ¥è¯¢å†…æ ¸ä¸­çš„è·Ÿè¸ªç‚¹ï¼Œæ ¹æ®åå­—å»è¿‡æ»¤å°±å¯ä»¥æ‰¾åˆ°å®ç°å‡½æ•°çš„åå­—ã€‚å½“ç„¶ï¼Œå¦‚æœä½ è¦çœ‹å…·ä½“çš„å®ç°æ­¥éª¤ï¼Œå°±å¾—éœ€è¦å»çœ‹çœ‹å†…æ ¸çš„æºç äº†ã€‚\n2. æ²¡æœ‰å›ºå®šçš„æ ¼å¼ï¼Œè¿™ä¸ªæ•°æ®ç»“æ„å…¶å®å°±æ˜¯ä½ æƒ³åœ¨ç”¨æˆ·æ€ä¸­è·å–çš„æ•°æ®ï¼Œä¸åŒçš„ç¨‹åºéœ€è¦çš„æ•°æ®æ˜¯ä¸åŒçš„ã€‚\n","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1642750706,"ip_address":"","comment_id":331711,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100104501,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œæœ‰å‡ ä¸ªé—®é¢˜è¯·æ•™ä¸‹ï¼š\n1. &quot;do_sys_openat2() æ˜¯ç³»ç»Ÿè°ƒç”¨ openat() åœ¨å†…æ ¸ä¸­çš„å®ç°&quot; æ€ä¹ˆå»æ‰¾åˆ°ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨åœ¨å†…æ ¸ä¸­çš„å®ç°å‘¢ï¼Ÿ\n2. ä½¿ç”¨BPF mapè·å–openatçš„æ‰“å¼€æ–‡ä»¶åè¿™é‡Œï¼Œ&#47;&#47; å®šä¹‰æ•°æ®ç»“æ„struct data_t { u32 pid; u64 ts; char comm[TASK_COMM_LEN]; char fname[NAME_MAX];}; è¿™ä¸ªçš„æ ¼å¼ä¸ºå•¥æ˜¯è¿™æ ·å‘¢ï¼Œå°±æ˜¯æœ‰å…·ä½“æ¯ä¸ªæ¢é’ˆçš„mapè¯´æ˜æ–‡æ¡£å˜›\nå¤šè°¢è€å¸ˆ","like_count":5,"discussions":[{"author":{"id":2077066,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLetObiaicw0oSWoyYL2sGib0YMWmekqOa0kyiblmIQ9G62g9CaVVrLGqZSYQbz7JSpibmCr862KuibKndw/132","nickname":"sloanchu","note":"","ucode":"73A98E1CBDC938","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559836,"discussion_content":"åœ¨linuxæºç ä¸­fs/open.cä¸­å¯ä»¥çœ‹åˆ°do_sys_openat2å‡½æ•°çš„å®ç°ï¼Œä¹Ÿå°±æ˜¯hello_worldå‡½æ•°çš„å®šä¹‰","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1648995672,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547570,"discussion_content":"1. æ¯ä¸ªç³»ç»Ÿè°ƒç”¨åœ¨å†…æ ¸ä¸­éƒ½æœ‰ç±»ä¼¼ sys_xxx çš„å®ç°å‡½æ•°ï¼Œæˆ‘ä»¬åé¢è¯¾ç¨‹ä¼šè®²åˆ°æ€ä¹ˆæŸ¥è¯¢å†…æ ¸ä¸­çš„è·Ÿè¸ªç‚¹ï¼Œæ ¹æ®åå­—å»è¿‡æ»¤å°±å¯ä»¥æ‰¾åˆ°å®ç°å‡½æ•°çš„åå­—ã€‚å½“ç„¶ï¼Œå¦‚æœä½ è¦çœ‹å…·ä½“çš„å®ç°æ­¥éª¤ï¼Œå°±å¾—éœ€è¦å»çœ‹çœ‹å†…æ ¸çš„æºç äº†ã€‚\n2. æ²¡æœ‰å›ºå®šçš„æ ¼å¼ï¼Œè¿™ä¸ªæ•°æ®ç»“æ„å…¶å®å°±æ˜¯ä½ æƒ³åœ¨ç”¨æˆ·æ€ä¸­è·å–çš„æ•°æ®ï¼Œä¸åŒçš„ç¨‹åºéœ€è¦çš„æ•°æ®æ˜¯ä¸åŒçš„ã€‚\n","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1642750706,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1793361,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/5d/51/87fc7ef9.jpg","nickname":"Issacæ…œ","note":"","ucode":"690B69FC1C0BB2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550285,"discussion_content":"ç¬¬äºŒä¸ªé—®é¢˜çš„è¯ï¼Œæ€ä¹ˆç¡®å®šè¿™ä¸ªç¨‹åºä¼šæä¾›å“ªäº›æ•°æ®å‘¢","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1644469216,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333369,"user_name":"Geek_b85295","can_delete":false,"product_type":"c1","uid":1487998,"ip_address":"","ucode":"51CBB577C255EA","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqtXSgThiaEiaEqqic5YIJ7v469nCM3VXiccOJ4SxbYjW91ciczuYYEzcTVtYWaWXaokZqShuLdKsXjnFA/132","comment_is_top":false,"comment_ctime":1644312859,"is_pvip":false,"replies":[{"id":122027,"content":"å—¯ï¼Œç¢°åˆ°è¿™ç§é—®é¢˜æœ€å¥½çš„æ–¹æ³•æ˜¯å»æŸ¥manæ‰‹å†Œã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥åœ¨ https:&#47;&#47;man7.org&#47;linux&#47;man-pages&#47;man2&#47;openat2.2.html#VERSIONS çœ‹åˆ°ï¼Œopenat2 æ˜¯ 5.6 å†…æ ¸æ‰æ”¯æŒçš„ã€‚æ‰€ä»¥ï¼Œå¯¹æ—§çš„å†…æ ¸æ¥è¯´ï¼Œå°±éœ€è¦æ›¿æ¢æˆ openat ç³»ç»Ÿè°ƒç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1644730368,"ip_address":"","comment_id":333369,"utype":1}],"discussion_count":5,"race_medal":0,"score":2,"product_id":100104501,"comment_content":"è€å¸ˆï¼Œæˆ‘çš„ç¯å¢ƒæ˜¯ubuntu20.04ï¼Œå†…æ ¸5.4.0-92-genericï¼ŒæŠŠç¯å¢ƒä¾èµ–éƒ½æ­£å¸¸å®‰è£…å¥½åï¼Œæ‰§è¡Œpython3 hello.py å‡ºç°é”™è¯¯ Failed to attach BPF program b&#39;hello_world&#39; to kprobe b&#39;do_sys_openat2&#39;ï¼Œç½‘ä¸Šæ²¡æ‰¾åˆ°è§£å†³æ–¹æ³•ï¼Œå¯ä»¥å¸®å¿™çœ‹çœ‹å˜›","like_count":4,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550777,"discussion_content":"å—¯ï¼Œç¢°åˆ°è¿™ç§é—®é¢˜æœ€å¥½çš„æ–¹æ³•æ˜¯å»æŸ¥manæ‰‹å†Œã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥åœ¨ https://man7.org/linux/man-pages/man2/openat2.2.html#VERSIONS çœ‹åˆ°ï¼Œopenat2 æ˜¯ 5.6 å†…æ ¸æ‰æ”¯æŒçš„ã€‚æ‰€ä»¥ï¼Œå¯¹æ—§çš„å†…æ ¸æ¥è¯´ï¼Œå°±éœ€è¦æ›¿æ¢æˆ openat ç³»ç»Ÿè°ƒç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644730368,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2788452,"avatar":"","nickname":"Geek_459383","note":"","ucode":"380AC372AEC06E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631904,"discussion_content":"b.attach_kprobe(event=&#34;do_sys_open&#34;, fn_name=&#34;hello_world&#34;)","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1700119906,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1494491,"avatar":"https://static001.geekbang.org/account/avatar/00/16/cd/db/7467ad23.jpg","nickname":"Bachue Zhou","note":"","ucode":"3175754775CA32","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611796,"discussion_content":"Ubuntu 20.04 å¯ä»¥å‡çº§åˆ° HWE å†…æ ¸ï¼Œè¿™æ ·å°±èƒ½ç”¨ 5.15 ç‰ˆæœ¬çš„å†…æ ¸äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680324341,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2195554,"avatar":"https://static001.geekbang.org/account/avatar/00/21/80/62/fad2678a.jpg","nickname":"Elvis.","note":"","ucode":"99AA356C365144","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550565,"discussion_content":"å†…æ ¸5.4å·²ç»ç§»é™¤äº†è¿™ä¸ªäº‹ä»¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644589739,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1199969,"avatar":"https://static001.geekbang.org/account/avatar/00/12/4f/61/00083e41.jpg","nickname":"å°ç™½","note":"","ucode":"7ACE14C0C4AE61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550361,"discussion_content":"æ¢Debian11å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644497089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332620,"user_name":"å†™ç‚¹å•¥å‘¢","can_delete":false,"product_type":"c1","uid":1065272,"ip_address":"","ucode":"C19032CF1C41BA","user_header":"https://static001.geekbang.org/account/avatar/00/10/41/38/4f89095b.jpg","comment_is_top":false,"comment_ctime":1643383537,"is_pvip":false,"replies":[{"id":121561,"content":"ä¸é”™çš„é—®é¢˜ï¼Œçœ‹æ¥æ˜¯æ·±å…¥å­¦ä¹ äº†ï¼Œèµä¸€ä¸ªğŸ‘\n1. è¿™ä¸ªå‡½æ•°å®é™…ä¸Šå¯¹æ‰€æœ‰çš„perfç¼“å†²åŒºè°ƒç”¨å®ƒä»¬çš„å›è°ƒå‡½æ•°ï¼Œç„¶åå°±ç»“æŸäº†ï¼ˆæ‰€ä»¥å¤–å±‚è¿˜æœ‰ä¸€ä¸ªwhileå¾ªç¯ï¼‰ã€‚\n2. ä¸æ˜¯çš„ï¼Œè¿‡é•¿çš„filenameä¼šæˆªæ–­ã€‚\n3å’Œ4çš„ç†è§£éƒ½æ˜¯å¯¹çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1643460832,"ip_address":"","comment_id":332620,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100104501,"comment_content":"æœ‰å‡ ä¸ªé—®é¢˜æƒ³è¯·æ•™è€å¸ˆï¼š\n1. perf_buffer_pollæ–¹æ³•æ˜¯éé˜»å¡çš„ä¹ˆ\n2. bpf_probe_read(&amp;data.fname, sizeof(data.fname), (void *)filename); è¿™é‡ŒfilenameæŒ‡é’ˆçš„å†…å­˜å¤§å°æ˜¯å¦ä¹Ÿæ˜¯NAME_MAXï¼Œä¸ç„¶è¯»å–åº”è¯¥ä¼šå¯¼è‡´éæ³•è®¿é—®\n3. hello_worldæ–¹æ³•çš„å‡ ä¸ªå½¢å‚æ˜¯ä»€ä¹ˆå«ä¹‰ï¼Œæ„Ÿè§‰ctxæ˜¯bpfå›ºå®šçš„ï¼Œåé¢dfd, filenameå’Œopen_howæ˜¯openat2çš„å‚æ•°ï¼Œè¯·é—®æ˜¯å¦ç¼–å†™bpfå‡½æ•°éƒ½æ˜¯å¯ä»¥åœ¨ctxåé¢åŠ å…¥å¯¹åº”ç³»ç»Ÿè°ƒç”¨æ¥å£çš„å…¥å‚ï¼Œç„¶åbpfä¼šåœ¨æ‰§è¡Œæ—¶å€™è‡ªåŠ¨è¿›è¡Œå‚æ•°ç»‘å®šï¼Ÿ\n4. perf_submitå‡½æ•°ä¼ å…¥çš„c structåœ¨bccè„šæœ¬ä¸­çœ‹ä¸Šå»å¯ä»¥é€šè¿‡eventæ–¹æ³•è‡ªåŠ¨è½¬åŒ–ä¸ºpythonå¯¹è±¡ï¼Ÿ\n\nè°¢è°¢è€å¸ˆ\n","like_count":3,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548958,"discussion_content":"ä¸é”™çš„é—®é¢˜ï¼Œçœ‹æ¥æ˜¯æ·±å…¥å­¦ä¹ äº†ï¼Œèµä¸€ä¸ªğŸ‘\n1. è¿™ä¸ªå‡½æ•°å®é™…ä¸Šå¯¹æ‰€æœ‰çš„perfç¼“å†²åŒºè°ƒç”¨å®ƒä»¬çš„å›è°ƒå‡½æ•°ï¼Œç„¶åå°±ç»“æŸäº†ï¼ˆæ‰€ä»¥å¤–å±‚è¿˜æœ‰ä¸€ä¸ªwhileå¾ªç¯ï¼‰ã€‚\n2. ä¸æ˜¯çš„ï¼Œè¿‡é•¿çš„filenameä¼šæˆªæ–­ã€‚\n3å’Œ4çš„ç†è§£éƒ½æ˜¯å¯¹çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643460832,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1065272,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/38/4f89095b.jpg","nickname":"å†™ç‚¹å•¥å‘¢","note":"","ucode":"C19032CF1C41BA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":548964,"discussion_content":"æ„Ÿè°¢è€å¸ˆï¼Œæˆ‘æƒ³è¡¥å……é—®ä¸‹é—®é¢˜2ï¼Œå¦‚æœfilenameé•¿åº¦å°äºNAME_LENçš„è¯ï¼ŒæŒ‰ç…§ç¨‹åºç”¨bpf_probe_readä»ä¸­è¯»å–æ•°æ®ä¼šè‡ªåŠ¨ä¿è¯å†…å­˜è®¿é—®å®‰å…¨ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643461467,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":548958,"ip_address":"","group_id":0},"score":548964,"extra":""}]}]},{"had_liked":false,"id":334762,"user_name":"waterjiao","can_delete":false,"product_type":"c1","uid":1283989,"ip_address":"","ucode":"74F2F75BF0CA6F","user_header":"https://static001.geekbang.org/account/avatar/00/13/97/95/aad51e9b.jpg","comment_is_top":false,"comment_ctime":1645105345,"is_pvip":false,"replies":[{"id":122630,"content":"è¿™ä¸ªæ—¶å€™å°±éœ€è¦å»çœ‹æ–‡æ¡£äº†ã€‚æ¯”å¦‚å‰ä¸¤ä¸ªé—®é¢˜çš„ç­”æ¡ˆéƒ½åœ¨ https:&#47;&#47;github.com&#47;iovisor&#47;bcc&#47;blob&#47;23a21423a31719bd79e9e975b8f6dca8f7a331e5&#47;docs&#47;reference_guide.md#2-open_perf_bufferï¼š\n\nhttps:&#47;&#47;github.com&#47;iovisor&#47;bcc&#47;blob&#47;23a21423a31719bd79e9e975b8f6dca8f7a331e5&#47;docs&#47;reference_guide.md#2-open_perf_buffer\n\nå¯¹äºCO-REçš„åŸç†ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹ https:&#47;&#47;nakryiko.com&#47;posts&#47;bpf-core-reference-guide&#47;","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1645616473,"ip_address":"","comment_id":334762,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100104501,"comment_content":"è¿˜æœ‰å‡ ä¸ªé—®é¢˜å’¨è¯¢ä¸‹è€å¸ˆ\n1. perfç¼“å­˜åŒºå¤§å°å¦‚ä½•æŸ¥çœ‹\n2.å¦‚æœç¼“å­˜åŒºæ»¡äº†ï¼Œåç»­æ•°æ®ä¼šè¦†ç›–ä¹‹å‰çš„æ•°æ®å—ï¼Ÿopen_perf_bufferæ˜¯é˜»å¡çš„ä¹ˆ\n3. libbpfæ˜¯æ€ä¹ˆåšåˆ°co-reçš„","like_count":2,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552861,"discussion_content":"è¿™ä¸ªæ—¶å€™å°±éœ€è¦å»çœ‹æ–‡æ¡£äº†ã€‚æ¯”å¦‚å‰ä¸¤ä¸ªé—®é¢˜çš„ç­”æ¡ˆéƒ½åœ¨ https://github.com/iovisor/bcc/blob/23a21423a31719bd79e9e975b8f6dca8f7a331e5/docs/reference_guide.md#2-open_perf_bufferï¼š\n\nhttps://github.com/iovisor/bcc/blob/23a21423a31719bd79e9e975b8f6dca8f7a331e5/docs/reference_guide.md#2-open_perf_buffer\n\nå¯¹äºCO-REçš„åŸç†ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹ https://nakryiko.com/posts/bpf-core-reference-guide/","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645616474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333854,"user_name":"HenryHui","can_delete":false,"product_type":"c1","uid":1115055,"ip_address":"","ucode":"F725DE66E564B2","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKdVVxCVYJMmSmia51JzwSju1yNgDNNPD6lO9LOY2tygkxpGrVbIbAQZqHb04SDwuaibIEEGzudUD3g/132","comment_is_top":false,"comment_ctime":1644564081,"is_pvip":false,"replies":[{"id":122035,"content":"å—¯ï¼Œç¢°åˆ°è¿™ç§é—®é¢˜æœ€å¥½çš„æ–¹æ³•æ˜¯å»æŸ¥manæ‰‹å†Œã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥åœ¨ https:&#47;&#47;man7.org&#47;linux&#47;man-pages&#47;man2&#47;openat2.2.html#VERSIONS çœ‹åˆ°ï¼Œopenat2 æ˜¯ 5.6 å†…æ ¸æ‰æ”¯æŒçš„ã€‚æ‰€ä»¥ï¼Œå¯¹æ—§çš„å†…æ ¸æ¥è¯´ï¼Œå°±éœ€è¦æ›¿æ¢æˆ openat ç³»ç»Ÿè°ƒç”¨ï¼ˆæˆ‘ä»¬è¯¾ç¨‹æ¨èä½¿ç”¨æ–°ä¸€äº›çš„å†…æ ¸ï¼Œè¿™æ ·å¯ä»¥ä½“éªŒæœ€æ–°çš„eBPFç‰¹æ€§ï¼Œæ‰€ä»¥è¿˜æ˜¯ç»§ç»­ä½¿ç”¨openat2ä½œä¸ºç¤ºä¾‹ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1644731834,"ip_address":"","comment_id":333854,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100104501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼š\næˆ‘åœ¨è¿è¡Œä¾‹å­çš„æ—¶å€™å‡ºç°äº†é”™è¯¯å¦‚ä¸‹é”™è¯¯ï¼š\n\nroot@ubuntu-linux-20-04-desktop:~&#47;project&#47;ebpf&#47;study# sudo python3 hello.py\ncannot attach kprobe, probe entry may not exist\nTraceback (most recent call last):\n  File &quot;hello.py&quot;, line 8, in &lt;module&gt;\n    b.attach_kprobe(event=&quot;do_sys_openat2&quot;, fn_name=&quot;hello_world&quot;)\n  File &quot;&#47;usr&#47;lib&#47;python3&#47;dist-packages&#47;bcc&#47;__init__.py&quot;, line 658, in attach_kprobe\n    raise Exception(&quot;Failed to attach BPF program %s to kprobe %s&quot; %\nException: Failed to attach BPF program b&#39;hello_world&#39; to kprobe b&#39;do_sys_openat2\n\næˆ‘çš„ç³»ç»Ÿå†…æ ¸æ˜¯ï¼š\nLinux ubuntu-linux-20-04-desktop 5.4.0-80-generic #90-Ubuntu SMP Fri Jul 9 17:43:26 UTC 2021 aarch64 aarch64 aarch64 GNU&#47;Linux\n\né‡ç‚¹æ˜¯è¿™å¥æŠ¥é”™ï¼šcannot attach kprobe, probe entry may not exist  æ˜¯è¯´æˆ‘çš„kprobeä¸å­˜åœ¨ä¹ˆ\n","like_count":2,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550787,"discussion_content":"å—¯ï¼Œç¢°åˆ°è¿™ç§é—®é¢˜æœ€å¥½çš„æ–¹æ³•æ˜¯å»æŸ¥manæ‰‹å†Œã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥åœ¨ https://man7.org/linux/man-pages/man2/openat2.2.html#VERSIONS çœ‹åˆ°ï¼Œopenat2 æ˜¯ 5.6 å†…æ ¸æ‰æ”¯æŒçš„ã€‚æ‰€ä»¥ï¼Œå¯¹æ—§çš„å†…æ ¸æ¥è¯´ï¼Œå°±éœ€è¦æ›¿æ¢æˆ openat ç³»ç»Ÿè°ƒç”¨ï¼ˆæˆ‘ä»¬è¯¾ç¨‹æ¨èä½¿ç”¨æ–°ä¸€äº›çš„å†…æ ¸ï¼Œè¿™æ ·å¯ä»¥ä½“éªŒæœ€æ–°çš„eBPFç‰¹æ€§ï¼Œæ‰€ä»¥è¿˜æ˜¯ç»§ç»­ä½¿ç”¨openat2ä½œä¸ºç¤ºä¾‹ï¼‰ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1644731834,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2113712,"avatar":"https://static001.geekbang.org/account/avatar/00/20/40/b0/a88a87cd.jpg","nickname":"æ¨æˆé¾™","note":"","ucode":"F4B1F0C33ECC03","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":598629,"discussion_content":"æˆ‘çœ‹ç³»ç»Ÿæœ‰openat å‡½æ•°ï¼Œä½†æ”¹æˆä¸Šé¢çš„äº‹ä»¶ä¹Ÿä¸è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1672968918,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2823708,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI3BfajnrhzNseX7NQTB9n4Sz9rd4lkHMMWwHrfdeTAdwClTiaJmsgYr9DEL0ghiahX1GttCqk0OBcg/132","nickname":"Geek_279bd4","note":"","ucode":"6BF96650733142","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572736,"discussion_content":"#!/usr/bin/python3\n# 1) import bcc library\nfrom bcc import BPF\n\n# 2) load BPF program\nb = BPF(src_file=&#34;hello.c&#34;)\n# 3) attach kprobe\nb.attach_kprobe(event=&#34;sys_openat&#34;, fn_name=&#34;hello_world&#34;)\n# 4) read and print /sys/kernel/debug/tracing/trace_pipe\nb.trace_print()","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652941958,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333291,"user_name":"Y","can_delete":false,"product_type":"c1","uid":1475073,"ip_address":"","ucode":"9EC075D58C9FF0","user_header":"https://static001.geekbang.org/account/avatar/00/16/82/01/8ee18ad0.jpg","comment_is_top":false,"comment_ctime":1644250359,"is_pvip":false,"replies":[{"id":122008,"content":"libbpf-devåªåŒ…å«åœ¨æ¯”è¾ƒæ–°çš„å‘è¡Œç‰ˆä¸­ï¼Œå…¶ä»–å‘è¡Œç‰ˆå¯ä»¥ä»æºç å®‰è£…ï¼Œå…·ä½“æ­¥éª¤å¯ä»¥å‚è€ƒ https:&#47;&#47;github.com&#47;libbpf&#47;libbpf#buildã€‚\n\nå¦å¤–ï¼Œæˆ‘ä»¬æ¡ˆä¾‹çš„Githubä¸­ä¹Ÿæœ‰æºç ç¼–è¯‘çš„è¯¦ç»†æ­¥éª¤ï¼šhttps:&#47;&#47;github.com&#47;feiskyer&#47;ebpf-apps&#47;blob&#47;main&#47;bpf-apps&#47;Makefile#L21-L22","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1644728947,"ip_address":"","comment_id":333291,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100104501,"comment_content":"E: æ— æ³•å®šä½è½¯ä»¶åŒ… libbpf-dev\næç¤ºè¿™ä¸ªæŠ¥é”™æ€ä¹ˆåŠï¼Ÿæ›´æ–°äº†æºå¥½åƒä¹Ÿä¸è¡Œ","like_count":2,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550758,"discussion_content":"libbpf-devåªåŒ…å«åœ¨æ¯”è¾ƒæ–°çš„å‘è¡Œç‰ˆä¸­ï¼Œå…¶ä»–å‘è¡Œç‰ˆå¯ä»¥ä»æºç å®‰è£…ï¼Œå…·ä½“æ­¥éª¤å¯ä»¥å‚è€ƒ https://github.com/libbpf/libbpf#buildã€‚\n\nå¦å¤–ï¼Œæˆ‘ä»¬æ¡ˆä¾‹çš„Githubä¸­ä¹Ÿæœ‰æºç ç¼–è¯‘çš„è¯¦ç»†æ­¥éª¤ï¼šhttps://github.com/feiskyer/ebpf-apps/blob/main/bpf-apps/Makefile#L21-L22","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644728947,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2298813,"avatar":"https://static001.geekbang.org/account/avatar/00/23/13/bd/3e86e791.jpg","nickname":"åä¸ƒ","note":"","ucode":"B2341AF0E7AD47","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554557,"discussion_content":"æˆ‘æ›´æ–°æºä¹‹åå¯ä»¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646464768,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1101405,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ce/5d/5297717a.jpg","nickname":"åˆè§","note":"","ucode":"06D7952CED37D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2298813,"avatar":"https://static001.geekbang.org/account/avatar/00/23/13/bd/3e86e791.jpg","nickname":"åä¸ƒ","note":"","ucode":"B2341AF0E7AD47","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575681,"discussion_content":"æ±‚ä¸€ä¸ªæ›´æ–°åæºå‘€~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655023654,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":554557,"ip_address":"","group_id":0},"score":575681,"extra":""}]}]},{"had_liked":false,"id":332078,"user_name":"ä¸€ä½ä¸æ„¿é€éœ²å§“åçš„ç‹å…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1031394,"ip_address":"","ucode":"EB2C9420B3484A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bc/e2/e760c8e2.jpg","comment_is_top":false,"comment_ctime":1643007864,"is_pvip":false,"replies":[{"id":121414,"content":"è¿™ä¸€å¥çš„å«ä¹‰å°±æ˜¯å®šä¹‰ eventsï¼Œå¹¶ä¸”ç±»å‹æ˜¯ perf eventã€‚\n\nè¯¦ç»†çš„æ–‡æ¡£è¯·å‚è€ƒ https:&#47;&#47;github.com&#47;iovisor&#47;bcc&#47;blob&#47;master&#47;docs&#47;reference_guide.md#2-bpf_perf_output","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1643202400,"ip_address":"","comment_id":332078,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100104501,"comment_content":"BPF_PERF_OUTPUT(events);\nè¿™ä¸ª events æ˜¯åœ¨å“ªå®šä¹‰çš„ï¼Ÿ ","like_count":2,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548456,"discussion_content":"è¿™ä¸€å¥çš„å«ä¹‰å°±æ˜¯å®šä¹‰ eventsï¼Œå¹¶ä¸”ç±»å‹æ˜¯ perf eventã€‚\n\nè¯¦ç»†çš„æ–‡æ¡£è¯·å‚è€ƒ https://github.com/iovisor/bcc/blob/master/docs/reference_guide.md#2-bpf_perf_output","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643202400,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":331736,"user_name":"è‰æ ¹","can_delete":false,"product_type":"c1","uid":1129668,"ip_address":"","ucode":"7C97CB09A4D8F1","user_header":"https://static001.geekbang.org/account/avatar/00/11/3c/c4/7c2bf312.jpg","comment_is_top":false,"comment_ctime":1642745069,"is_pvip":false,"replies":[{"id":121187,"content":"è¿™ä¸ªç¤ºä¾‹å®é™…ä¸Šæ˜¯kprobeç±»å‹çš„eBPFç¨‹åºï¼Œå®ƒçš„å‚æ•°æ ¼å¼æ˜¯è¡¨ç¤ºå¯„å­˜å™¨ä¸Šä¸‹æ–‡çš„struct pt_regs *ctxå’Œå†…æ ¸å‡½æ•°çš„å®é™…å‚æ•°ã€‚åé¢çš„è¯¾ç¨‹è¿˜ä¼šè¯¦ç»†ä»‹ç»eBPFæ”¯æŒçš„å„ç§ç¨‹åºç±»å‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1642768491,"ip_address":"","comment_id":331736,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100104501,"comment_content":"è¯·é—®è€å¸ˆï¼Œhello_worldçš„å…¥å‚æ˜¯è¦å’Œç³»ç»Ÿè°ƒç”¨çš„å…¥å‚è®¾ç½®ä¸€è‡´å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547611,"discussion_content":"è¿™ä¸ªç¤ºä¾‹å®é™…ä¸Šæ˜¯kprobeç±»å‹çš„eBPFç¨‹åºï¼Œå®ƒçš„å‚æ•°æ ¼å¼æ˜¯è¡¨ç¤ºå¯„å­˜å™¨ä¸Šä¸‹æ–‡çš„struct pt_regs *ctxå’Œå†…æ ¸å‡½æ•°çš„å®é™…å‚æ•°ã€‚åé¢çš„è¯¾ç¨‹è¿˜ä¼šè¯¦ç»†ä»‹ç»eBPFæ”¯æŒçš„å„ç§ç¨‹åºç±»å‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642768491,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":335824,"user_name":"åŠ æ²¹åŠ æ²¹","can_delete":false,"product_type":"c1","uid":2032995,"ip_address":"","ucode":"4326347ED6E532","user_header":"https://static001.geekbang.org/account/avatar/00/1f/05/63/dd59ad18.jpg","comment_is_top":false,"comment_ctime":1645704608,"is_pvip":false,"replies":[{"id":122795,"content":"å®‰è£…bpftraceä¹‹åï¼Œæ‰§è¡Œ bpftrace -l | grep openat æŸ¥è¯¢å¯ç”¨çš„è·Ÿè¸ªç‚¹è¯•è¯•ï¼Ÿå¿…é¡»æ˜¯å†…æ ¸æ”¯æŒçš„è·Ÿè¸ªç‚¹æ‰å¯ä»¥ç”¨ eBPF æ¥è·Ÿè¸ªã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1645878286,"ip_address":"","comment_id":335824,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100104501,"comment_content":"è€å¸ˆé—®ä¸‹ï¼Œä¸ºä»€ä¹ˆæˆ‘çš„ubuntu:20 é‡Œé¢åªæœ‰è®¾ç½® __x64_sys_openat  æ‰æœ‰ç”¨  æŒ‰ç…§æ–‡ç« é‡Œçš„å°±ä¸è¡Œå‘¢ ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553403,"discussion_content":"å®‰è£…bpftraceä¹‹åï¼Œæ‰§è¡Œ bpftrace -l | grep openat æŸ¥è¯¢å¯ç”¨çš„è·Ÿè¸ªç‚¹è¯•è¯•ï¼Ÿå¿…é¡»æ˜¯å†…æ ¸æ”¯æŒçš„è·Ÿè¸ªç‚¹æ‰å¯ä»¥ç”¨ eBPF æ¥è·Ÿè¸ªã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645878286,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2905523,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIDqHQQByGiaXcAk94MdDn3ftupZLXyR6bAKibxOzMxy5h3uBwZ7QiaCiaIfbCMK0cIQfGNax8iawoiaQAg/132","nickname":"nuan","note":"","ucode":"55FF98EB85404D","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553968,"discussion_content":"æˆ‘ä½¿ç”¨çš„ubuntu20.04ï¼Œç¬¬ä¸€ä¸ªä¾‹å­æ­£å¸¸ï¼Œç¬¬äºŒä¸ªä¾‹å­ Headerè¡Œä¸‹é¢æ²¡ä»»ä½•è¾“å‡ºå‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646146079,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":335266,"user_name":"Geek_7e93d7","can_delete":false,"product_type":"c1","uid":2916793,"ip_address":"","ucode":"542579275A4C8B","user_header":"","comment_is_top":false,"comment_ctime":1645432433,"is_pvip":false,"replies":[{"id":122628,"content":"è¿™ä¸ªé”™è¯¯æ˜¯è¯´ç±»å‹é‡å®šä¹‰äº†ï¼Œæœ‰å¯èƒ½æ˜¯ç¯å¢ƒé…ç½®çš„é—®é¢˜ã€‚ä½ çš„å¼€å‘ç¯å¢ƒæ˜¯å’‹æ ·çš„ï¼ŸBCCæ˜¯æ€ä¹ˆå®‰è£…çš„ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1645615649,"ip_address":"","comment_id":335266,"utype":1}],"discussion_count":4,"race_medal":0,"score":3,"product_id":100104501,"comment_content":"ä¸ºä»€ä¹ˆæˆ‘ä¸€å¯åŠ¨å°±ä¼šæç¤ºè¿™ä¸ªï¼Œè¿™ç®—æ˜¯æŠ¥é”™å—ï¼Ÿ\ninclude&#47;linux&#47;compiler-clang.h:41:9: warning: &#39;__HAVE_BUILTIN_BSWAP32__&#39; macro redefined [-Wmacro-redefined]\n#define __HAVE_BUILTIN_BSWAP32__\n        ^\n&lt;command line&gt;:4:9: note: previous definition is here\n#define __HAVE_BUILTIN_BSWAP32__ 1\n        ^\nIn file included from &lt;built-in&gt;:2:\n","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552859,"discussion_content":"è¿™ä¸ªé”™è¯¯æ˜¯è¯´ç±»å‹é‡å®šä¹‰äº†ï¼Œæœ‰å¯èƒ½æ˜¯ç¯å¢ƒé…ç½®çš„é—®é¢˜ã€‚ä½ çš„å¼€å‘ç¯å¢ƒæ˜¯å’‹æ ·çš„ï¼ŸBCCæ˜¯æ€ä¹ˆå®‰è£…çš„ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645615649,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1109754,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ee/fa/37da6393.jpg","nickname":"muggle","note":"","ucode":"B5A85C4C280FCA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554636,"discussion_content":"é‡åˆ°è¿™ä¸ªé—®é¢˜çš„å¯ä»¥è®¾ç½®ä¸‹cflags\nb = BPF(src_file=&#34;trace_open.c&#34;,cflags=[&#34;-Wno-macro-redefined&#34;])\nå‚è€ƒçš„æ˜¯ https://github.com/iovisor/bcc/issues/3366     ä¸´æ—¶å¯ä»¥è¿™ä¹ˆè§£å†³è·‘èµ·æ¥","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1646500386,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1013424,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/76/b0/14fec62f.jpg","nickname":"ä¸äº†å³°","note":"","ucode":"E23B96D6A3D4EC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591165,"discussion_content":"å¼º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666337830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¦å»º","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2930048,"avatar":"","nickname":"woJA1wCgAAbjKldokPvO1h9ZEJTUP8ug","note":"","ucode":"F329F4882868C4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556451,"discussion_content":"é‡åˆ°åŒæ ·çš„é—®é¢˜ï¼ŒæŸ¥è¯¢åå‘ç°å¯èƒ½æ˜¯å†…æ ¸ç‰ˆæœ¬è‡ªåŠ¨æ›´æ–°å¯¼è‡´çš„ï¼ŒBCCé‡Œcflagså‰åæœ‰ä¿®æ”¹åœ¨æ–‡ä»¶ä¸åŒä½ç½®ã€‚\nå¯ä»¥å…³æ³¨https://github.com/iovisor/bcc/pull/3391","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647362681,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333368,"user_name":"Geek_9e8767","can_delete":false,"product_type":"c1","uid":2143459,"ip_address":"","ucode":"AD3CD6CE2FF2B4","user_header":"","comment_is_top":false,"comment_ctime":1644311942,"is_pvip":false,"replies":[{"id":122026,"content":"å—¯ ç›´æ¥åœ¨Macä¸Šé¢ç¡®å®æ²¡æœ‰è¿™äº›å¤´æ–‡ä»¶ã€‚æˆ‘ä¸€èˆ¬æ¨èä½¿ç”¨vscodeçš„è¿œç¨‹å¼€å‘æ¨¡å¼ï¼Œè¿æ¥åˆ°Linuxä¸­çš„ä»£ç åº“ï¼Œç„¶åå°±å¯ä»¥åœ¨ç³»ç»Ÿä¸­æ‰¾åˆ°ç›¸å…³çš„å¤´æ–‡ä»¶äº†ã€‚ \n\nè¯¦ç»†çš„æ­¥éª¤å¯ä»¥å‚è€ƒ https:&#47;&#47;code.visualstudio.com&#47;docs&#47;remote&#47;ssh","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1644730019,"ip_address":"","comment_id":333368,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100104501,"comment_content":"å¸Œæœ›è€å¸ˆèƒ½åˆ†äº«ä¸‹ bpf çš„å¼€å‘ç¯å¢ƒæ­å»ºã€è·¯å¾„é…ç½®è¿™äº›åŸºç¡€ã€‚ä¸»è¦å›°éš¾æ˜¯å¦‚ä½•åœ¨mac ä¸Šä½¿ç”¨ ide å»å¼€å‘bpfï¼Œide å¦‚ä½•é…ç½®å¯ä»¥è®©å¤´æ–‡ä»¶å¯ä»¥è¢«ç´¢å¼•åˆ°ã€‚ golang å¼€å‘è€…ï¼Œæ¥è§¦è¿™ä¸ªæœ‰ç‚¹é™Œç”Ÿã€‚","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550776,"discussion_content":"å—¯ ç›´æ¥åœ¨Macä¸Šé¢ç¡®å®æ²¡æœ‰è¿™äº›å¤´æ–‡ä»¶ã€‚æˆ‘ä¸€èˆ¬æ¨èä½¿ç”¨vscodeçš„è¿œç¨‹å¼€å‘æ¨¡å¼ï¼Œè¿æ¥åˆ°Linuxä¸­çš„ä»£ç åº“ï¼Œç„¶åå°±å¯ä»¥åœ¨ç³»ç»Ÿä¸­æ‰¾åˆ°ç›¸å…³çš„å¤´æ–‡ä»¶äº†ã€‚ \n\nè¯¦ç»†çš„æ­¥éª¤å¯ä»¥å‚è€ƒ https://code.visualstudio.com/docs/remote/ssh","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644730019,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":331913,"user_name":"Geek_5244fa","can_delete":false,"product_type":"c1","uid":1072743,"ip_address":"","ucode":"B87A550526F74C","user_header":"https://static001.geekbang.org/account/avatar/00/10/5e/67/133d2da6.jpg","comment_is_top":false,"comment_ctime":1642865577,"is_pvip":false,"replies":[{"id":121332,"content":"è™½ç„¶æ˜¯è¿è¡Œåœ¨å†…æ ¸ä¸­ï¼Œè¿™äº›è°ƒç”¨ä¹Ÿå¯èƒ½ä¼šå¤±è´¥ã€‚å¤±è´¥åå°±åº”è¯¥å°½æ—©é€€å‡ºï¼Œä¸éœ€è¦å†å»æ¶ˆè€—é¢å¤–çš„æŒ‡ä»¤äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1643031607,"ip_address":"","comment_id":331913,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100104501,"comment_content":"ä¸ºä»€ä¹ˆè¦å…ˆåˆ¤æ–­ bpf_get_current_comm æˆåŠŸä¹‹åå† bpf_probe_read ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548111,"discussion_content":"è™½ç„¶æ˜¯è¿è¡Œåœ¨å†…æ ¸ä¸­ï¼Œè¿™äº›è°ƒç”¨ä¹Ÿå¯èƒ½ä¼šå¤±è´¥ã€‚å¤±è´¥åå°±åº”è¯¥å°½æ—©é€€å‡ºï¼Œä¸éœ€è¦å†å»æ¶ˆè€—é¢å¤–çš„æŒ‡ä»¤äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643031607,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":331795,"user_name":"æ™´å¤©","can_delete":false,"product_type":"c1","uid":1463221,"ip_address":"","ucode":"D0A0787F68DF85","user_header":"https://static001.geekbang.org/account/avatar/00/16/53/b5/d914f2c2.jpg","comment_is_top":false,"comment_ctime":1642762289,"is_pvip":false,"replies":[{"id":121211,"content":"ä¸ºäº†ç¡®ä¿ç”Ÿäº§ç¯å¢ƒçš„ç¨³å®šæ€§ï¼Œä¸€èˆ¬æ¨èè®©ebpfç¨‹åºé€‚é…å†…æ ¸ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯åè¿‡æ¥ä¸ºäº†ebpfè€Œå»å‡çº§å†…æ ¸ã€‚å½“ç„¶ï¼Œæ–°ç‰ˆæœ¬å†…æ ¸æœ‰äº›ç‰¹æ€§ä¹Ÿæ˜¯æ²¡æ³•åœ¨æ—§ç‰ˆæœ¬ä¸­ä½¿ç”¨çš„ï¼Œè¿˜è¦æ ¹æ®å®é™…éœ€è¦å»çœ‹ã€‚\n\nBCCçš„æ–‡æ¡£é‡Œé¢åˆ—å‡ºäº†æ–°ç‰¹æ€§å¯¹åº”çš„å†…æ ¸ç‰ˆæœ¬ï¼Œå¯ä½œå‚è€ƒ https:&#47;&#47;github.com&#47;iovisor&#47;bcc&#47;blob&#47;master&#47;docs&#47;kernel-versions.md","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1642812292,"ip_address":"","comment_id":331795,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100104501,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸‹ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ebpfçš„è¯ï¼Œå“ªä¸ªç‰ˆæœ¬çš„å†…æ ¸åˆé€‚å•Šï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547670,"discussion_content":"ä¸ºäº†ç¡®ä¿ç”Ÿäº§ç¯å¢ƒçš„ç¨³å®šæ€§ï¼Œä¸€èˆ¬æ¨èè®©ebpfç¨‹åºé€‚é…å†…æ ¸ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯åè¿‡æ¥ä¸ºäº†ebpfè€Œå»å‡çº§å†…æ ¸ã€‚å½“ç„¶ï¼Œæ–°ç‰ˆæœ¬å†…æ ¸æœ‰äº›ç‰¹æ€§ä¹Ÿæ˜¯æ²¡æ³•åœ¨æ—§ç‰ˆæœ¬ä¸­ä½¿ç”¨çš„ï¼Œè¿˜è¦æ ¹æ®å®é™…éœ€è¦å»çœ‹ã€‚\n\nBCCçš„æ–‡æ¡£é‡Œé¢åˆ—å‡ºäº†æ–°ç‰¹æ€§å¯¹åº”çš„å†…æ ¸ç‰ˆæœ¬ï¼Œå¯ä½œå‚è€ƒ https://github.com/iovisor/bcc/blob/master/docs/kernel-versions.md","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1642812292,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1463221,"avatar":"https://static001.geekbang.org/account/avatar/00/16/53/b5/d914f2c2.jpg","nickname":"æ™´å¤©","note":"","ucode":"D0A0787F68DF85","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":548380,"discussion_content":"è°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643168154,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":547670,"ip_address":"","group_id":0},"score":548380,"extra":""}]}]},{"had_liked":false,"id":331685,"user_name":"å°æåŒå­¦","can_delete":false,"product_type":"c1","uid":1187427,"ip_address":"","ucode":"90B50B7D408AC8","user_header":"https://static001.geekbang.org/account/avatar/00/12/1e/63/d5909105.jpg","comment_is_top":false,"comment_ctime":1642724979,"is_pvip":false,"replies":[{"id":121172,"content":"ä¸å¥½æ„æ€ï¼Œæˆ‘ä¸å¤ªç¡®å®šã€‚ä½ çš„å†…æ ¸ç‰ˆæœ¬å’Œå‘è¡Œç‰ˆç”¨çš„æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘çœ‹Andriodæ–‡æ¡£ä¸Šé¢æ˜¯å¯ä»¥ç”¨ eBPF çš„ https:&#47;&#47;source.android.com&#47;devices&#47;architecture&#47;kernel&#47;bpf?hl=zh-cn","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1642749635,"ip_address":"","comment_id":331685,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100104501,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œåœ¨armåµŒå…¥å¼ç¯å¢ƒä¸­ï¼Œæœ‰æ²¡æœ‰åŠæ³•æ·»åŠ è¿™äº›ä¾èµ–çš„åº“ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547565,"discussion_content":"ä¸å¥½æ„æ€ï¼Œæˆ‘ä¸å¤ªç¡®å®šã€‚ä½ çš„å†…æ ¸ç‰ˆæœ¬å’Œå‘è¡Œç‰ˆç”¨çš„æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘çœ‹Andriodæ–‡æ¡£ä¸Šé¢æ˜¯å¯ä»¥ç”¨ eBPF çš„ https://source.android.com/devices/architecture/kernel/bpf?hl=zh-cn","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642749635,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":369064,"user_name":"Geek_07f1e3","can_delete":false,"product_type":"c1","uid":3297575,"ip_address":"é™•è¥¿","ucode":"1A344451F30651","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqKmVMIqxRO00L8J1iatIzeMHwzYb0s762j9B2dicy4P8tciat26cNDgoyMREjtluZEBXGvwz9nUSO2g/132","comment_is_top":false,"comment_ctime":1677054494,"is_pvip":false,"replies":[{"id":134615,"content":"æˆ‘ç”¨çš„æ˜¯VSCode","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1677497301,"ip_address":"ä¸Šæµ·","comment_id":369064,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100104501,"comment_content":"è¯·é—®ä¸‹å¤§å®¶å†™bccç¨‹åºéƒ½ç”¨ä»€ä¹ˆç¼–è¾‘å™¨å‘€ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606923,"discussion_content":"æˆ‘ç”¨çš„æ˜¯VSCode","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677497301,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":368277,"user_name":"Issacæ…œ","can_delete":false,"product_type":"c1","uid":1793361,"ip_address":"å››å·","ucode":"690B69FC1C0BB2","user_header":"https://static001.geekbang.org/account/avatar/00/1b/5d/51/87fc7ef9.jpg","comment_is_top":false,"comment_ctime":1676096932,"is_pvip":false,"replies":[{"id":134618,"content":"eBPFç¨‹åºåŒ…æ‹¬ç”¨æˆ·æ€å’Œå†…æ ¸æ€ï¼Œbccå°è£…äº†å¾ˆå¤šåº“ï¼Œå¯ä»¥ç®€åŒ–ç¨‹åºçš„å¼€å‘è¿‡ç¨‹ã€‚ä»åé¢çš„ä¾‹å­å¯ä»¥çœ‹åˆ°ï¼Œä¸ç”¨bccçš„è¯ï¼Œç”¨æˆ·æ€ç¨‹åºä¸€èˆ¬éƒ½ä¼šé•¿ä¸€äº›ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1677497686,"ip_address":"ä¸Šæµ·","comment_id":368277,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100104501,"comment_content":"æˆ‘æ€ä¹ˆæ„Ÿè§‰ä¸ç”¨bccæ›´å®¹æ˜“ç†è§£å‘¢","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606926,"discussion_content":"eBPFç¨‹åºåŒ…æ‹¬ç”¨æˆ·æ€å’Œå†…æ ¸æ€ï¼Œbccå°è£…äº†å¾ˆå¤šåº“ï¼Œå¯ä»¥ç®€åŒ–ç¨‹åºçš„å¼€å‘è¿‡ç¨‹ã€‚ä»åé¢çš„ä¾‹å­å¯ä»¥çœ‹åˆ°ï¼Œä¸ç”¨bccçš„è¯ï¼Œç”¨æˆ·æ€ç¨‹åºä¸€èˆ¬éƒ½ä¼šé•¿ä¸€äº›ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677497686,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366920,"user_name":"Geek_b78911","can_delete":false,"product_type":"c1","uid":3468540,"ip_address":"å±±è¥¿","ucode":"EF3516CFAB30D2","user_header":"","comment_is_top":false,"comment_ctime":1674618854,"is_pvip":false,"replies":[{"id":134632,"content":"æ˜¯çš„ï¼Œè¿™ä¸ªç®€å•æ¡ˆä¾‹æ²¡æœ‰å¯¹è¿›ç¨‹è¿›è¡Œè¿‡æ»¤ï¼Œå¯èƒ½ä¼šäº§ç”Ÿå¤§é‡çš„è¾“å‡ºã€‚ä½ å¯ä»¥è¯•ç€åŠ ä¸€ä¸‹æŒ‰è¿›ç¨‹PIDè¿‡æ»¤ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1677500044,"ip_address":"ä¸Šæµ·","comment_id":366920,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100104501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘æ²¡æ‰§è¡Œå®Œç¨‹åºä»¥åä¼šæœ‰å¤§é‡è¾“å‡ºï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•èƒ½è¿‡æ»¤æ‰ä¸€éƒ¨åˆ†è¾“å‡ºå‘¢","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606943,"discussion_content":"æ˜¯çš„ï¼Œè¿™ä¸ªç®€å•æ¡ˆä¾‹æ²¡æœ‰å¯¹è¿›ç¨‹è¿›è¡Œè¿‡æ»¤ï¼Œå¯èƒ½ä¼šäº§ç”Ÿå¤§é‡çš„è¾“å‡ºã€‚ä½ å¯ä»¥è¯•ç€åŠ ä¸€ä¸‹æŒ‰è¿›ç¨‹PIDè¿‡æ»¤ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677500044,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":338941,"user_name":"å›¢å›¢-BB","can_delete":false,"product_type":"c1","uid":1029405,"ip_address":"","ucode":"E35A1960DAB7C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b5/1d/f2f66e8d.jpg","comment_is_top":false,"comment_ctime":1647824037,"is_pvip":false,"replies":[{"id":123959,"content":"ä½ç‰ˆæœ¬å†…æ ¸æœ‰å¾ˆå¤šæ–°ç‰¹æ€§æ˜¯ä¸æ”¯æŒçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¯¾ç¨‹æ¨èç”¨æ–°ä¸€ç‚¹çš„å‘è¡Œç‰ˆã€‚ä¸è¿‡å¦‚æœä½ ä»æºç å®‰è£…è¿™äº›å·¥å…·åº“çš„è¯ï¼Œåº”è¯¥ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ï¼Œå¯¹åº”çš„æ­¥éª¤å¯ä»¥å‚è€ƒGithubä¸­çš„æ–‡æ¡£","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1647959083,"ip_address":"","comment_id":338941,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100104501,"comment_content":"äº‘ä¸Šçš„Ubuntuæœ€é«˜ä¸€èˆ¬å°±20.04ï¼Œç¯å¢ƒå®‰è£…æ¯”è¾ƒæŠ˜è…¾ï¼Œå¯ä»¥æœ‰ä¸ªä½ç‚¹ç‰ˆæœ¬çš„ç¯å¢ƒè¯´æ˜ä¹ˆ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557775,"discussion_content":"ä½ç‰ˆæœ¬å†…æ ¸æœ‰å¾ˆå¤šæ–°ç‰¹æ€§æ˜¯ä¸æ”¯æŒçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¯¾ç¨‹æ¨èç”¨æ–°ä¸€ç‚¹çš„å‘è¡Œç‰ˆã€‚ä¸è¿‡å¦‚æœä½ ä»æºç å®‰è£…è¿™äº›å·¥å…·åº“çš„è¯ï¼Œåº”è¯¥ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ï¼Œå¯¹åº”çš„æ­¥éª¤å¯ä»¥å‚è€ƒGithubä¸­çš„æ–‡æ¡£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647959084,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":337447,"user_name":"èŠ³è²è²å…®æ»¡å ‚","can_delete":false,"product_type":"c1","uid":1000860,"ip_address":"","ucode":"C8D89999C201F1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/45/9c/5b06d143.jpg","comment_is_top":false,"comment_ctime":1646829645,"is_pvip":false,"replies":[{"id":123350,"content":"çœ‹èµ·æ¥æ˜¯å‚æ•°é”™è¯¯å¯¼è‡´çš„ï¼Œå¯èƒ½æ˜¯ä»£ç æœ‰é—®é¢˜ï¼Œå¯ä»¥å†æ£€æŸ¥ä¸€ä¸‹å®Œæ•´çš„ä»£ç å—ï¼Ÿæˆ–è€…è¯•è¯• https:&#47;&#47;github.com&#47;feiskyer&#47;ebpf-apps&#47;blob&#47;main&#47;bcc-apps&#47;python&#47;trace_openat.py å‘¢ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1646913551,"ip_address":"","comment_id":337447,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100104501,"comment_content":"Traceback (most recent call last):\n  File &quot;&#47;home&#47;vagrant&#47;hello.py&quot;, line 4, in &lt;module&gt;\n    b.attach_kprobe(event=&quot;do_sys_openat2&quot;, fn_name=&quot;hello_world&quot;)\n  File &quot;&#47;usr&#47;lib&#47;python3&#47;dist-packages&#47;bcc&#47;__init__.py&quot;, line 679, in attach_kprobe\n    fn = self.load_func(fn_name, BPF.KPROBE)\n  File &quot;&#47;usr&#47;lib&#47;python3&#47;dist-packages&#47;bcc&#47;__init__.py&quot;, line 411, in load_func\n    raise Exception(&quot;Failed to load BPF program %s: %s&quot; %\nException: Failed to load BPF program b&#39;hello_world&#39;: Invalid argument\n\nè¿è¡Œhello worldçš„æ—¶å€™æç¤ºè¿™ä¸ª éš¾é“æ˜¯python 3.9 ä¸å…¼å®¹ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555456,"discussion_content":"çœ‹èµ·æ¥æ˜¯å‚æ•°é”™è¯¯å¯¼è‡´çš„ï¼Œå¯èƒ½æ˜¯ä»£ç æœ‰é—®é¢˜ï¼Œå¯ä»¥å†æ£€æŸ¥ä¸€ä¸‹å®Œæ•´çš„ä»£ç å—ï¼Ÿæˆ–è€…è¯•è¯• https://github.com/feiskyer/ebpf-apps/blob/main/bcc-apps/python/trace_openat.py å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646913551,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1463221,"avatar":"https://static001.geekbang.org/account/avatar/00/16/53/b5/d914f2c2.jpg","nickname":"æ™´å¤©","note":"","ucode":"D0A0787F68DF85","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582032,"discussion_content":"do_sys_openat2æ¢æˆdo_sys_openå¯ä»¥è¯•è¯•ï¼Œæˆ‘è¿™å¯ä»¥äº†ï¼Œcentos8.5ç³»ç»Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659151103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é™•è¥¿","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":334845,"user_name":"Li. Mr","can_delete":false,"product_type":"c1","uid":1588871,"ip_address":"","ucode":"5F628D66A913FC","user_header":"https://static001.geekbang.org/account/avatar/00/18/3e/87/ff97c31e.jpg","comment_is_top":false,"comment_ctime":1645154166,"is_pvip":false,"replies":[{"id":122634,"content":"æµç¨‹æ˜¯ç±»ä¼¼çš„ï¼Œåªæ˜¯æŠŠç³»ç»Ÿè°ƒç”¨çš„è·Ÿè¸ªç‚¹æ¢ä¸€ä¸‹ã€‚å®Œæ•´çš„ä¾‹å­å¯ä»¥å‚è€ƒï¼š\n\nhttps:&#47;&#47;github.com&#47;feiskyer&#47;ebpf-apps&#47;blob&#47;main&#47;bcc-apps&#47;python&#47;trace_openat.py","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1645623474,"ip_address":"","comment_id":334845,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100104501,"comment_content":"å› ä¸ºå®é™…ç¯å¢ƒæ²¡åˆ°openat2çš„é€‚ç”¨ç¯å¢ƒï¼Œå€ªè€å¸ˆèƒ½å¦ä¹Ÿç»™å‡ºopenatçš„å¼€å‘æµç¨‹å‘¢ï¼Ÿæ„Ÿè°¢ã€‚","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552881,"discussion_content":"æµç¨‹æ˜¯ç±»ä¼¼çš„ï¼Œåªæ˜¯æŠŠç³»ç»Ÿè°ƒç”¨çš„è·Ÿè¸ªç‚¹æ¢ä¸€ä¸‹ã€‚å®Œæ•´çš„ä¾‹å­å¯ä»¥å‚è€ƒï¼š\n\nhttps://github.com/feiskyer/ebpf-apps/blob/main/bcc-apps/python/trace_openat.py","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645623474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":334386,"user_name":"Geek_b0b350","can_delete":false,"product_type":"c1","uid":2911284,"ip_address":"","ucode":"01EE806A0E7FBE","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erbrXqgp8iaXnmAc5XtdmUG966ezcVml3TUngUslTlfqSuUib0BnBF640rPC6HibOSXzqKlU2QkftCSw/132","comment_is_top":false,"comment_ctime":1644913494,"is_pvip":false,"replies":[{"id":122215,"content":"uname -r è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿå¦‚æœæ˜¯æ ‡å‡†çš„å‘è¡Œç‰ˆï¼Œè¿™äº›åŒ…åº”è¯¥éƒ½å¯ä»¥å®‰è£…çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1645018825,"ip_address":"","comment_id":334386,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100104501,"comment_content":"ä½ ä»¬éƒ½èƒ½æ‰¾åˆ°linux-tool-$(uname -r) linux-head-$(uname -r)è¿™ä¸¤ä¸ªåŒ…ï¼Ÿï¼Œæˆ‘å®‰è£…ä»¥åæ›å‡ºæ‰¾ä¸åˆ°è¿™ä¸¤ä¸ªåŒ…","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":551455,"discussion_content":"uname -r è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿå¦‚æœæ˜¯æ ‡å‡†çš„å‘è¡Œç‰ˆï¼Œè¿™äº›åŒ…åº”è¯¥éƒ½å¯ä»¥å®‰è£…çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645018825,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1120024,"avatar":"https://static001.geekbang.org/account/avatar/00/11/17/18/e4382a8e.jpg","nickname":"æœ‰è¯†ä¹‹å£«","note":"","ucode":"23F5594193D200","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581099,"discussion_content":"è¿™ä¸ªæˆ‘ä¹ŸæŠ¥é”™ï¼Œè§è¯„è®ºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658494394,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333669,"user_name":"Issacæ…œ","can_delete":false,"product_type":"c1","uid":1793361,"ip_address":"","ucode":"690B69FC1C0BB2","user_header":"https://static001.geekbang.org/account/avatar/00/1b/5d/51/87fc7ef9.jpg","comment_is_top":false,"comment_ctime":1644465284,"is_pvip":false,"replies":[{"id":122033,"content":"è°¢è°¢åˆ†äº«å¼€å‘ç¯å¢ƒçš„æ­å»ºç»éªŒã€‚çš„ç¡®ï¼Œæœ‰çš„å‘è¡Œç‰ˆå¯èƒ½é»˜è®¤ä¸æ”¯æŒæˆ–è€…æ²¡æœ‰æä¾›å†…æ ¸å¤´æ–‡ä»¶çš„è½¯ä»¶åŒ…ï¼Œé™¤äº†æ¢å‘è¡Œç‰ˆä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘ä»æºç å®‰è£…ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1644731643,"ip_address":"","comment_id":333669,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100104501,"comment_content":"åœ¨æ­å»ºå¼€å‘ç¯å¢ƒçš„æ—¶å€™ï¼Œå¯èƒ½ç”±äºæŸäº›ç³»ç»Ÿçš„å®‰å…¨æ€§è€ƒè™‘ï¼Œå¯¼è‡´æ— æ³•å®‰è£…æ‰€éœ€çš„å†…æ ¸å¤´æ–‡ä»¶ã€‚åç»­ä½¿ç”¨Dockerçš„æ–¹å¼è€Œä¸è¡Œï¼Œæœ€ååªå¥½é€‰æ‹©äº†é‡æ–°å®‰è£…ä¸€ä¸ªæ–°ç‰ˆæœ¬çš„Linuxå‘è¡Œç‰ˆï¼Œç¨‹åºæœ€åä¹Ÿè¿è¡Œèµ·æ¥äº†","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550785,"discussion_content":"è°¢è°¢åˆ†äº«å¼€å‘ç¯å¢ƒçš„æ­å»ºç»éªŒã€‚çš„ç¡®ï¼Œæœ‰çš„å‘è¡Œç‰ˆå¯èƒ½é»˜è®¤ä¸æ”¯æŒæˆ–è€…æ²¡æœ‰æä¾›å†…æ ¸å¤´æ–‡ä»¶çš„è½¯ä»¶åŒ…ï¼Œé™¤äº†æ¢å‘è¡Œç‰ˆä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘ä»æºç å®‰è£…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644731643,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333377,"user_name":"liyi","can_delete":false,"product_type":"c1","uid":1030199,"ip_address":"","ucode":"AB649CA3F4A0BE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b8/37/e723b8e6.jpg","comment_is_top":false,"comment_ctime":1644314450,"is_pvip":false,"replies":[{"id":122022,"content":"multipass launch 20.10","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1644729697,"ip_address":"","comment_id":333377,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100104501,"comment_content":"multipass æ€ä¹ˆå®‰è£…Ubuntu20.10+ã€‚æˆ‘çœ‹é»˜è®¤çš„ç‰ˆæœ¬æ˜¯Ubuntu 20.04 LTS","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550772,"discussion_content":"multipass launch 20.10","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644729697,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332889,"user_name":"å¤§å°¾å·´è€çŒ«","can_delete":false,"product_type":"c1","uid":1260089,"ip_address":"","ucode":"246AB375244773","user_header":"https://static001.geekbang.org/account/avatar/00/13/3a/39/72d81605.jpg","comment_is_top":false,"comment_ctime":1643787701,"is_pvip":false,"replies":[{"id":121736,"content":"æŠ¥äº†ä»€ä¹ˆé”™è¯¯ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1644117802,"ip_address":"","comment_id":332889,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100104501,"comment_content":"Debian 10ç¯å¢ƒæ­å»ºæ²¡æœ‰æˆåŠŸï¼Œdemoç¨‹åºæ— æ³•è¿è¡Œï¼Œæ¢åˆ°Debian 11ä¸€åˆ‡æ­£å¸¸ã€‚","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549598,"discussion_content":"æŠ¥äº†ä»€ä¹ˆé”™è¯¯ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644117802,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332504,"user_name":"åš","can_delete":false,"product_type":"c1","uid":2019536,"ip_address":"","ucode":"C02AB1CDE39D1A","user_header":"https://static001.geekbang.org/account/avatar/00/1e/d0/d0/a6c6069d.jpg","comment_is_top":false,"comment_ctime":1643279170,"is_pvip":false,"replies":[{"id":121566,"content":"è°¢è°¢æŒ‡å‡ºæ–‡ä¸­çš„ä¸è¶³ä¹‹å¤„ï¼Œç›´æ¥è¿è¡Œçš„è¯ï¼Œéœ€è¦åœ¨è„šæœ¬æ–‡ä»¶å¼€å¤´åŠ ä¸Šä¸‹é¢è¿™ä¸€å¥ä»£ç ï¼š\n\n#!&#47;usr&#47;bin&#47;env python3","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1643461211,"ip_address":"","comment_id":332504,"utype":1}],"discussion_count":2,"race_medal":0,"score":5,"product_id":100104501,"comment_content":"çœ‹åˆ°ç¬¬å››ç« ï¼Œå‘ç°hello.pyæ‰§è¡Œæ˜¯sudo python3 hello.pyï¼Œä¸æ˜¯æ–‡ä¸­çš„sudo .&#47;hello.pyã€‚æ–‡ä¸­hello.pyè¿è¡Œæ–¹æ³•ä¼šæœ‰æŠ¥é”™","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548963,"discussion_content":"è°¢è°¢æŒ‡å‡ºæ–‡ä¸­çš„ä¸è¶³ä¹‹å¤„ï¼Œç›´æ¥è¿è¡Œçš„è¯ï¼Œéœ€è¦åœ¨è„šæœ¬æ–‡ä»¶å¼€å¤´åŠ ä¸Šä¸‹é¢è¿™ä¸€å¥ä»£ç ï¼š\n\n#!/usr/bin/env python3","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643461211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1013424,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/76/b0/14fec62f.jpg","nickname":"ä¸äº†å³°","note":"","ucode":"E23B96D6A3D4EC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548703,"discussion_content":"which python3\n\nenv \n\nè¾“å‡ºçœ‹ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643336122,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332474,"user_name":"liuy","can_delete":false,"product_type":"c1","uid":1643287,"ip_address":"","ucode":"F5863E5613058A","user_header":"https://static001.geekbang.org/account/avatar/00/19/13/17/93f954d3.jpg","comment_is_top":false,"comment_ctime":1643269800,"is_pvip":false,"replies":[{"id":121463,"content":"æ˜¯çš„ï¼Œç”¨äº†è‡ªå®šä¹‰å†…æ ¸ä¹‹åï¼Œä¸€èˆ¬éœ€è¦æºç ç¼–è¯‘å®‰è£…å¤´æ–‡ä»¶ï¼Œæˆ–è€…å®‰è£…å†…æ ¸ç»´æŠ¤è€…æä¾›çš„RPMåŒ…ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1643290233,"ip_address":"","comment_id":332474,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100104501,"comment_content":"é‡åˆ°é—®é¢˜ä¸€åªè§£å†³ä¸äº†ï¼Œ è¯´æˆ‘æ²¡æœ‰è£…kernel-develï¼Œæˆ‘çœ‹yumé‡Œé¢å¸¦çš„å’Œç³»ç»Ÿçš„å†…æ ¸ç‰ˆæœ¬ä¸ç¬¦.. ç”¨çš„æ˜¯centos-8.5.2111, ç›´æ¥å»æ‰¾rpmåŒ…ï¼Œä¹Ÿæ²¡æ‰¾åˆ°ç›¸åº”çš„ç‰ˆæœ¬ã€‚\nmodprobe: FATAL: Module kheaders not found in directory &#47;lib&#47;modules&#47;5.10.47-linuxkit\nUnable to find kernel headers. Try rebuilding kernel with CONFIG_IKHEADERS=m (module) or installing the kernel development package for your running kernel version.\nchdir(&#47;lib&#47;modules&#47;5.10.47-linuxkit&#47;build): No such file or directory","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548638,"discussion_content":"æ˜¯çš„ï¼Œç”¨äº†è‡ªå®šä¹‰å†…æ ¸ä¹‹åï¼Œä¸€èˆ¬éœ€è¦æºç ç¼–è¯‘å®‰è£…å¤´æ–‡ä»¶ï¼Œæˆ–è€…å®‰è£…å†…æ ¸ç»´æŠ¤è€…æä¾›çš„RPMåŒ…ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643290233,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332468,"user_name":"åš","can_delete":false,"product_type":"c1","uid":2019536,"ip_address":"","ucode":"C02AB1CDE39D1A","user_header":"https://static001.geekbang.org/account/avatar/00/1e/d0/d0/a6c6069d.jpg","comment_is_top":false,"comment_ctime":1643267505,"is_pvip":false,"replies":[{"id":121464,"content":"ä½¿ç”¨ python3 hello.py è·‘ä¸€ä¸‹è¯•è¯•å‘¢ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1643290460,"ip_address":"","comment_id":332468,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100104501,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘ä¸‹è½½ubuntuå®˜æ–¹2110ç‰ˆæœ¬é•œåƒä½¿ç”¨vmwareå®‰è£…ï¼Œä½¿ç”¨sudo apt-get installå®‰è£…ç¯å¢ƒï¼Œç„¶åç¼–å†™hello.cå’Œhello.pyï¼Œä½†æ˜¯åœ¨è¿è¡Œhello.pyçš„æ—¶å€™æœ‰ä¸¤ä¸ªæŠ¥é”™ï¼š1ï¼‰.&#47;hello.py: 4: from: not found   2ï¼‰.&#47;hello.py: 7: Syntax error: &quot;(&quot; unexpected ï¼Œæˆ‘ç™¾åº¦äº†ä¸€ä¸‹ï¼Œæ²¡æ‰¾åˆ°é—®é¢˜åŸå› ï¼Œè¯·è€å¸ˆæŒ‡å¯¼ä¸€ä¸‹å¯ä»¥å—ï¼Ÿ\n","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548640,"discussion_content":"ä½¿ç”¨ python3 hello.py è·‘ä¸€ä¸‹è¯•è¯•å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643290460,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332309,"user_name":"lijava","can_delete":false,"product_type":"c1","uid":1133014,"ip_address":"","ucode":"0B1B4396C0DAE8","user_header":"https://static001.geekbang.org/account/avatar/00/11/49/d6/96894426.jpg","comment_is_top":false,"comment_ctime":1643168134,"is_pvip":false,"replies":[{"id":121417,"content":"è¿™ä¸ªå‡½æ•°ä¸€èˆ¬ç”¨äºè®¡ç®—æ—¶é—´çš„å·®å€¼ï¼ˆæ¯”å¦‚å»¶è¿Ÿã€è°ƒç”¨æ—¶é—´ç­‰ï¼‰ã€‚ç²¾ç¡®æ—¶é—´ä¸€èˆ¬æ”¾åˆ°ç”¨æˆ·æ€ç¨‹åºæ¥è·å–ï¼Œæ¯ä¸ªç¼–ç¨‹è¯­è¨€éƒ½æœ‰ç›¸åº”çš„è·å–æ—¶é—´æˆ³åº“å‡½æ•°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1643203172,"ip_address":"","comment_id":332309,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100104501,"comment_content":"è€å¸ˆ,æˆ‘åœ¨æ’æŸ¥ä¸€ä¸ªé—®é¢˜,åœ¨å°è¯•bpf,bpf_ktime_get_nsè¿™ä¸ªæ˜¯ç³»ç»Ÿå¯åŠ¨ä»¥æ¥çš„æ—¶é—´æˆ³,æˆ‘æ€ä¹ˆè½¬æ¢ä¸ºç²¾ç¡®çš„æ—¶é—´æˆ³å‘¢?   ä¸šåŠ¡æ—¥å¿— tcpdump straceéƒ½æ˜¯å±•ç¤ºçš„ç²¾ç¡®çš„æ—¶é—´æˆ³","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548460,"discussion_content":"è¿™ä¸ªå‡½æ•°ä¸€èˆ¬ç”¨äºè®¡ç®—æ—¶é—´çš„å·®å€¼ï¼ˆæ¯”å¦‚å»¶è¿Ÿã€è°ƒç”¨æ—¶é—´ç­‰ï¼‰ã€‚ç²¾ç¡®æ—¶é—´ä¸€èˆ¬æ”¾åˆ°ç”¨æˆ·æ€ç¨‹åºæ¥è·å–ï¼Œæ¯ä¸ªç¼–ç¨‹è¯­è¨€éƒ½æœ‰ç›¸åº”çš„è·å–æ—¶é—´æˆ³åº“å‡½æ•°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643203172,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332221,"user_name":"Geek_007","can_delete":false,"product_type":"c1","uid":1467182,"ip_address":"","ucode":"C80107538EAA7F","user_header":"https://static001.geekbang.org/account/avatar/00/16/63/2e/e49116d1.jpg","comment_is_top":false,"comment_ctime":1643098627,"is_pvip":false,"replies":[{"id":121416,"content":"æœ‰å…¶ä»–è¯­è¨€çš„ï¼ŒBCCè¿˜æ”¯æŒC++å’ŒLuaï¼Œä¹Ÿå¯ä»¥ç”¨Cã€Goã€Rustç­‰ç­‰å„ç§è¯­è¨€å¼€å‘ã€‚æˆ‘ä»¬è¯¾ç¨‹åé¢è¿˜æœ‰è¯¦ç»†çš„ä¾‹å­ï¼Œä»‹ç»å…¶ä»–çš„ç¼–ç¨‹æ–¹æ³•ã€‚\n\næˆ‘ä»¬è¯¾ç¨‹ä» BCC å¼€å§‹ä»‹ç»ï¼Œæ˜¯å› ä¸ºå®ƒæ˜¯æœ€é€‚åˆåˆå­¦è€…çš„ï¼Œå¹¶ä¸”å®ƒçš„ä¾‹å­ä¹Ÿæ˜¯æœ€ä¸°å¯Œçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1643202648,"ip_address":"","comment_id":332221,"utype":1}],"discussion_count":2,"race_medal":0,"score":5,"product_id":100104501,"comment_content":"åªæœ‰Python BCCåº“å¼€å‘ç”¨æˆ·æ€ç¨‹åºä¹ˆï¼Ÿæœ‰æ²¡æœ‰å®˜æ–¹çš„æ–‡æ¡£ä»‹ç»ä¸€äº›å…¶ä»–è¯­è¨€ç‰ˆæœ¬çš„å¼€å‘ç¨‹åºå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548459,"discussion_content":"æœ‰å…¶ä»–è¯­è¨€çš„ï¼ŒBCCè¿˜æ”¯æŒC++å’ŒLuaï¼Œä¹Ÿå¯ä»¥ç”¨Cã€Goã€Rustç­‰ç­‰å„ç§è¯­è¨€å¼€å‘ã€‚æˆ‘ä»¬è¯¾ç¨‹åé¢è¿˜æœ‰è¯¦ç»†çš„ä¾‹å­ï¼Œä»‹ç»å…¶ä»–çš„ç¼–ç¨‹æ–¹æ³•ã€‚\n\næˆ‘ä»¬è¯¾ç¨‹ä» BCC å¼€å§‹ä»‹ç»ï¼Œæ˜¯å› ä¸ºå®ƒæ˜¯æœ€é€‚åˆåˆå­¦è€…çš„ï¼Œå¹¶ä¸”å®ƒçš„ä¾‹å­ä¹Ÿæ˜¯æœ€ä¸°å¯Œçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643202648,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2850792,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKGchGGzaWO9aFeW3tEhJK5h395t66ERevKbwdWUD4WfkOBLgUP72gbKrib7ChPkouIibCLP5BSOxSw/132","nickname":"Geek_538f83","note":"","ucode":"5DBC843E799B11","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548409,"discussion_content":"http://kerneltravel.net/blog/2020/ebpf_ljr_7/","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643186082,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332130,"user_name":"ä¸äº†å³°","can_delete":false,"product_type":"c1","uid":1013424,"ip_address":"","ucode":"E23B96D6A3D4EC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/76/b0/14fec62f.jpg","comment_is_top":false,"comment_ctime":1643032763,"is_pvip":false,"replies":[{"id":121413,"content":"è°¢è°¢åˆ†äº«å®‰è£…ç»éªŒï¼æ¬¢è¿åœ¨åç»­çš„å­¦ä¹ è¿‡ç¨‹ä¸­åˆ†äº«æ›´å¤šçš„å­¦ä¹ å’Œå®è·µç»éªŒï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1001282,"ctime":1643202279,"ip_address":"","comment_id":332130,"utype":1}],"discussion_count":3,"race_medal":0,"score":5,"product_id":100104501,"comment_content":"vagrant@ubuntu-impish:~$ uname -a\nLinux ubuntu-impish 5.13.0-27-generic #29-Ubuntu SMP Wed Jan 12 17:36:47 UTC 2022 x86_64 x86_64 x86_64 GNU&#47;Linux\nvagrant@ubuntu-impish:~$ cat &#47;etc&#47;issue\nUbuntu 21.10 \\n \\l\n-------------------------\nvagrant@ubuntu-impish:~$ sudo apt-get install     clang \n\nå¦‚æœæç¤ºï¼šE: Unable to locate package clang\n\nè§£å†³æ–¹æ³•ï¼šsudo apt-get update","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548455,"discussion_content":"è°¢è°¢åˆ†äº«å®‰è£…ç»éªŒï¼æ¬¢è¿åœ¨åç»­çš„å­¦ä¹ è¿‡ç¨‹ä¸­åˆ†äº«æ›´å¤šçš„å­¦ä¹ å’Œå®è·µç»éªŒï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643202280,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1013424,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/76/b0/14fec62f.jpg","nickname":"ä¸äº†å³°","note":"","ucode":"E23B96D6A3D4EC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548907,"discussion_content":"åº”è¯¥æ˜¯ä½ å¤åˆ¶çš„hello.py ä»£ç æ—¶ï¼Œå“ªé‡Œå‡ºäº†é—®é¢˜ã€‚å†è¯•è¯•çœ‹ã€‚æˆ–æ˜¯æŠŠä½ çš„ hello.py  è¾“å‡ºå‡ºæ¥çœ‹çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643442892,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2019536,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/d0/d0/a6c6069d.jpg","nickname":"åš","note":"","ucode":"C02AB1CDE39D1A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548580,"discussion_content":"æˆ‘ä½¿ç”¨çš„ä¹Ÿæ˜¯è¿™ä¸ªç‰ˆæœ¬ï¼Œä½†æ˜¯æˆ‘åœ¨è¿è¡Œhello.pyæœ‰ä¸¤ä¸ªæŠ¥é”™ï¼Œä¸€ä¸ªæ˜¯./hello.py: 4: from: not foundï¼›å¦ä¸€ä¸ªæ˜¯./hello.py: 7: Syntax error: &#34;(&#34; unexpectedã€‚è¯·é—®æ‚¨çŸ¥é“æ€ä¹ˆå›äº‹å—ï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643269443,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":349447,"user_name":"å°æœ¯","can_delete":false,"product_type":"c1","uid":1183408,"ip_address":"","ucode":"D73BB46F2BA736","user_header":"https://static001.geekbang.org/account/avatar/00/12/0e/b0/ebf0afc3.jpg","comment_is_top":false,"comment_ctime":1655974101,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":5,"product_id":100104501,"comment_content":"eBPF ä¹Ÿå¯ä»¥åœ¨ Android ç³»ç»Ÿä¸Šè¿è¡Œï¼Œä¸è¿‡åœ¨ Android ä¸Šæ­å»ºç¯å¢ƒæœ‰ç‚¹éº»çƒ¦ï¼›è‡ªèä¸€ä¸ªæˆ‘å†™çš„å·¥å…·ï¼šhttps:&#47;&#47;github.com&#47;tiann&#47;eadb","like_count":4,"discussions":[{"author":{"id":1123081,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/09/590f5264.jpg","nickname":"å­”åŠä»™","note":"","ucode":"DF0AA3F2259453","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":605022,"discussion_content":"weishuå¤§ä½¬ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1676553611,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354850,"user_name":"æ›¹å¼€å½¦","can_delete":false,"product_type":"c1","uid":1155973,"ip_address":"å¹¿ä¸œ","ucode":"0AB1B9F275ED9E","user_header":"https://static001.geekbang.org/account/avatar/00/11/a3/85/67ae247f.jpg","comment_is_top":false,"comment_ctime":1660820400,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100104501,"comment_content":"Ubuntu 18.04 æœºå™¨ç¯å¢ƒæ­å»ºæ“ä½œï¼š\n\nsudo apt-get install -y  make clang llvm libelf-dev bpfcc-tools libbpfcc-dev linux-tools-$(uname -r) linux-headers-$(uname -r)\n\nwget http:&#47;&#47;archive.ubuntu.com&#47;ubuntu&#47;pool&#47;main&#47;libb&#47;libbpf&#47;libbpf0_0.5.0-1_amd64.deb\nsudo dpkg -i .&#47;libbpf0_0.5.0-1_amd64.deb\n\nwget http:&#47;&#47;archive.ubuntu.com&#47;ubuntu&#47;pool&#47;main&#47;libb&#47;libbpf&#47;libbpf-dev_0.5.0-1_amd64.deb\nsudo dpkg -i .&#47;libbpf-dev_0.5.0-1_amd64.deb\n\n","like_count":1},{"had_liked":false,"id":346820,"user_name":"æ— åæ°","can_delete":false,"product_type":"c1","uid":1256121,"ip_address":"","ucode":"584E697AE276AB","user_header":"https://static001.geekbang.org/account/avatar/00/13/2a/b9/2bf8cc89.jpg","comment_is_top":false,"comment_ctime":1653458903,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100104501,"comment_content":"è€å¸ˆ è¯·é—®ä¸‹æˆ‘æƒ³æ¯ä¸ªç¨‹åºä¸€ä¸ªæ—¥å¿—è¾“å‡ºæ€ä¹ˆå¤„ç†ï¼Ÿ","like_count":1},{"had_liked":false,"id":340874,"user_name":"Geek_c2089d","can_delete":false,"product_type":"c1","uid":1489545,"ip_address":"","ucode":"C66D345042525F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/4Lprf2mIWpJOPibgibbFCicMtp5bpIibyLFOnyOhnBGbusrLZC0frG0FGWqdcdCkcKunKxqiaOHvXbCFE7zKJ8TmvIA/132","comment_is_top":false,"comment_ctime":1649210181,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100104501,"comment_content":"BPF_PERF_OUTPUT(events);  è¯·é—®ä¸€ä¸‹è¿™ä¸ªeventsæ˜¯ä»€ä¹ˆï¼Œä»å“ªé‡Œä¼ è¿›æ¥çš„ï¼Ÿ","like_count":1},{"had_liked":false,"id":389421,"user_name":"æ˜•å…‰ä¹‹æ„¿","can_delete":false,"product_type":"c1","uid":3203491,"ip_address":"å¹¿ä¸œ","ucode":"0F22CA1184FA6A","user_header":"https://static001.geekbang.org/account/avatar/00/30/e1/a3/e0da8363.jpg","comment_is_top":false,"comment_ctime":1712502275,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100104501,"comment_content":"å€ªè€å¸ˆï¼Œåœ¨ ubuntu 22.04 å®‰è£… linux-tools-$(uname -r) æŠ¥é”™ï¼ŒUnable to locate package linux-tools-5.19.0-38-generic ;\nåœ¨ https:&#47;&#47;pkgs.org&#47;search&#47;?q=linux-tools æœç´¢å‘ç°å¤§æ¦‚æ˜¯å®˜æ–¹æ²¡æœ‰5.19.0-38ç‰ˆæœ¬å¯¹åº”çš„å®‰è£…åŒ…ï¼Œä¸æƒ³è°ƒæ•´å†…æ ¸ç‰ˆæœ¬ï¼Œåé¢ç›´æ¥ä½¿ç”¨ apt install linux-tools-generic  æ¥å®‰è£…ç³»ç»Ÿæ”¯æŒçš„é»˜è®¤ç‰ˆæœ¬linux-toolsè½¯ä»¶åŒ…ï¼Œç»ˆäºè·‘èµ·æ¥äº†eBPF demo","like_count":0},{"had_liked":false,"id":388190,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1397271,"ip_address":"æµ™æ±Ÿ","ucode":"B62BEA525A64A1","user_header":"https://static001.geekbang.org/account/avatar/00/15/52/17/e3015ba5.jpg","comment_is_top":false,"comment_ctime":1709604632,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100104501,"comment_content":"è€å¸ˆï¼Œå­¦ä¹ æ˜¯å¦æ¨èä½¿ç”¨dockerå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":388188,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1397271,"ip_address":"æµ™æ±Ÿ","ucode":"B62BEA525A64A1","user_header":"https://static001.geekbang.org/account/avatar/00/15/52/17/e3015ba5.jpg","comment_is_top":false,"comment_ctime":1709603713,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100104501,"comment_content":"è€å¸ˆæˆ‘é—®ä¸ªæ¯”è¾ƒlowçš„é—®é¢˜ï¼Œ ä¸ºä»€ä¹ˆæ“ä½œç³»ç»Ÿé‡Œæ²¡æœ‰centos? ","like_count":0},{"had_liked":false,"id":388179,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1397271,"ip_address":"æµ™æ±Ÿ","ucode":"B62BEA525A64A1","user_header":"https://static001.geekbang.org/account/avatar/00/15/52/17/e3015ba5.jpg","comment_is_top":false,"comment_ctime":1709562585,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100104501,"comment_content":"æ‚¨å¥½ï¼Œé—®äº†ä¸€ä¸ªæ¯”è¾ƒlowçš„ é—®é¢˜ï¼Œ æ“ä½œç³»ç»Ÿä¸ºå•¥ä¸èƒ½æ˜¯centos ï¼Ÿ","like_count":0},{"had_liked":false,"id":386065,"user_name":"æ— äº‹~ä¸œé£èµ°","can_delete":false,"product_type":"c1","uid":1938220,"ip_address":"å¹¿ä¸œ","ucode":"0EDE5FB1387DAB","user_header":"https://static001.geekbang.org/account/avatar/00/1d/93/2c/0c50b5a7.jpg","comment_is_top":false,"comment_ctime":1703948020,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100104501,"comment_content":"è¯·æ•™ä¸‹å„ä½å¤§ä½¬âˆ¶æˆ‘æƒ³ç”¨bpfä¿®æ”¹ä¸€ä¸ªcè¯­è¨€ç¨‹åºçš„å…¨å±€å˜é‡ï¼Œè¿™ä¸ªéœ€æ±‚å¯ä»¥å®ç°å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":379543,"user_name":"Geek_352659","can_delete":false,"product_type":"c1","uid":3621154,"ip_address":"æ¹–å—","ucode":"DDC66BE8172119","user_header":"","comment_is_top":false,"comment_ctime":1692086666,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100104501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œè¯·é—®print_event(cpu, data, size)æ˜¯bbcä¸­çš„ä¿ç•™å‡½æ•°ï¼Œæˆ‘å»æ‰å‡½æ•°ä¸­ä¸ç”¨ç”¨åˆ°çš„cpuæˆ–sizeï¼Œä¼šæŠ¥é”™ã€‚é”™è¯¯ä¿¡æ¯æ˜¾ç¤ºbbcçš„pythonåº“è°ƒç”¨æ­¤å‡½æ•°æ—¶å¿…é¡»ç”¨åˆ°ä¸‰ä¸ªå‚æ•°ã€‚\n","like_count":0},{"had_liked":false,"id":373535,"user_name":"é’é›˜","can_delete":false,"product_type":"c1","uid":2687278,"ip_address":"å¹¿ä¸œ","ucode":"29D71967CA90F0","user_header":"https://static001.geekbang.org/account/avatar/00/29/01/2e/5d3d4b86.jpg","comment_is_top":false,"comment_ctime":1682613377,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":6,"product_id":100104501,"comment_content":"ç”¨Pythonæ¥è°ƒç”¨cå°±å¾ˆè«åå…¶å¦™ å€’ä¸åƒæå¼€å‘äº† é¡¿æ—¶åƒæè¿ç»´äº†","like_count":0,"discussions":[{"author":{"id":1115379,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqFcfujkkBkic2ARpPOP4XeEhPNJwA51JJibD79pg4UTA9hS2WnmrSZ0qgiaibdM87dugCeYyNicnYiaFgw/132","nickname":"ermazi","note":"","ucode":"D38B0E9BD701A5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":624492,"discussion_content":"å°ä¼™å­, æœ‰åè§:&lt;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1690610056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373417,"user_name":"1244","can_delete":false,"product_type":"c1","uid":3578043,"ip_address":"æ±Ÿè‹","ucode":"0D1F637D894FC7","user_header":"https://static001.geekbang.org/account/avatar/00/36/98/bb/117b03d7.jpg","comment_is_top":false,"comment_ctime":1682497690,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":6,"product_id":100104501,"comment_content":"æˆ‘çš„å·¥ä½œçš„ç”µè„‘æ˜¯Ubuntu 22.04.1 LTSï¼Œè¯·é—®ç›´æ¥åœ¨æœ¬åœ°æœºå™¨å¼€å‘å—ï¼Ÿä½¿ç”¨æœ¬åœ°æœºå™¨ä¼šæœ‰ä»€ä¹ˆé—®é¢˜","like_count":0,"discussions":[{"author":{"id":1115379,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqFcfujkkBkic2ARpPOP4XeEhPNJwA51JJibD79pg4UTA9hS2WnmrSZ0qgiaibdM87dugCeYyNicnYiaFgw/132","nickname":"ermazi","note":"","ucode":"D38B0E9BD701A5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":624493,"discussion_content":"æ²¡å•¥é—®é¢˜å•Š, æˆ‘ä¹Ÿæ˜¯è¿™ä¸ªç‰ˆæœ¬, ç”¨è€å¸ˆçš„è¯, ä½ å€’æ˜¯åŠ¨èµ·æ¥å•Š!!!","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1690610081,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372212,"user_name":"ä¸€ç¬‘å¥ˆä½•","can_delete":false,"product_type":"c1","uid":1712016,"ip_address":"å››å·","ucode":"62E972C84B4690","user_header":"https://static001.geekbang.org/account/avatar/00/1a/1f/90/f7de62b9.jpg","comment_is_top":false,"comment_ctime":1680850766,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":6,"product_id":100104501,"comment_content":"æœ‰goè¯­è¨€çš„å†™æ³•å—ï¼Œæ¯”å¦‚CGO","like_count":0,"discussions":[{"author":{"id":1115379,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqFcfujkkBkic2ARpPOP4XeEhPNJwA51JJibD79pg4UTA9hS2WnmrSZ0qgiaibdM87dugCeYyNicnYiaFgw/132","nickname":"ermazi","note":"","ucode":"D38B0E9BD701A5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":624494,"discussion_content":"bccæœ‰ä¸ªå­é¡¹ç›®, ç…ç…?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1690610108,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371688,"user_name":"æ— æ”¯ç¥","can_delete":false,"product_type":"c1","uid":2735694,"ip_address":"åŒ—äº¬","ucode":"00800F94009C6E","user_header":"https://static001.geekbang.org/account/avatar/00/29/be/4e/dfe8ed9a.jpg","comment_is_top":false,"comment_ctime":1680184156,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":6,"product_id":100104501,"comment_content":"å‡ºç°äº†æŠ¥é”™&#39;uapi&#47;linux&#47;openat2.h&#39; file not foundï¼Œè¯·é—®æ€ä¹ˆè§£å†³","like_count":0,"discussions":[{"author":{"id":1115379,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqFcfujkkBkic2ARpPOP4XeEhPNJwA51JJibD79pg4UTA9hS2WnmrSZ0qgiaibdM87dugCeYyNicnYiaFgw/132","nickname":"ermazi","note":"","ucode":"D38B0E9BD701A5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":624495,"discussion_content":"çœ‹ç½®é¡¶è¯„è®º, ä¹Ÿè®¸æ˜¯å†…æ ¸ç‰ˆæœ¬, ç…ç…?\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1690610146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":370232,"user_name":"çŒªå°æ“","can_delete":false,"product_type":"c1","uid":1370959,"ip_address":"åŒ—äº¬","ucode":"D9552746AE3327","user_header":"https://static001.geekbang.org/account/avatar/00/14/eb/4f/6a97b1cd.jpg","comment_is_top":false,"comment_ctime":1678586931,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":7,"product_id":100104501,"comment_content":"perf, bpftrace, bccï¼Œéš¾åº¦é€’å¢ï¼ŒåŠŸèƒ½å¼ºå¤§é€’å¢ï¼Œä»bccå­¦èµ·ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿä»æœ€éš¾çš„å¼€å§‹å­¦ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1115379,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqFcfujkkBkic2ARpPOP4XeEhPNJwA51JJibD79pg4UTA9hS2WnmrSZ0qgiaibdM87dugCeYyNicnYiaFgw/132","nickname":"ermazi","note":"","ucode":"D38B0E9BD701A5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":624496,"discussion_content":"bccæœ€ç®€å•å•Š, ç›¸å½“äºé’ˆå¯¹å„ç§é€šç”¨åœºæ™¯, å°å¥½çš„åŒ…, ç›´æ¥ç”¨ä¸Šå±‚ py åšä¸€ä¸ªå±Œçˆ†ä¾  å³å¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1690610205,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358970,"user_name":"å‡Œå¯’","can_delete":false,"product_type":"c1","uid":1351781,"ip_address":"æ±Ÿè‹","ucode":"A0138F3D023414","user_header":"https://static001.geekbang.org/account/avatar/00/14/a0/65/5db6e8c2.jpg","comment_is_top":false,"comment_ctime":1665107430,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100104501,"comment_content":"èƒ½å¦è¯¦ç»†è¯´ä¸€ä¸‹äº¤å‰ç¼–è¯‘ç¯å¢ƒçš„BPFç¯å¢ƒæ­å»ºï¼Œæ¯”å¦‚debian11ä¸Šç¼–è¯‘armæ¿å­çš„BPFç¨‹åºã€‚","like_count":0},{"had_liked":false,"id":353223,"user_name":"core","can_delete":false,"product_type":"c1","uid":2533350,"ip_address":"ä¸Šæµ·","ucode":"5E6CAB578C6DE0","user_header":"https://static001.geekbang.org/account/avatar/00/26/a7/e6/6692d7ef.jpg","comment_is_top":false,"comment_ctime":1659279887,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100104501,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘æƒ³é—®ä¸€ä¸‹ï¼Œç”¨bccçš„è¯éƒ¨ç½²çš„æ—¶å€™æ˜¯ä¸æ˜¯ä¹Ÿéœ€è¦åœ¨ç›®æ ‡æœºå™¨ä¸Šå®‰è£…è¿™äº›å·¥å…·é“¾","like_count":0},{"had_liked":false,"id":353058,"user_name":"å·¦æ°§ä½›æ²™æ˜Ÿäºº","can_delete":false,"product_type":"c1","uid":1195278,"ip_address":"é™•è¥¿","ucode":"0D8295E1DABA8C","user_header":"https://static001.geekbang.org/account/avatar/00/12/3d/0e/92176eaa.jpg","comment_is_top":false,"comment_ctime":1659098604,"is_pvip":false,"replies":null,"discussion_count":3,"race_medal":0,"score":7,"product_id":100104501,"comment_content":"b&#39;      irqbalance-3371    [001] d...1   445.157115: bpf_trace_printk: Hello, World!&#39;\n b&#39;      irqbalance-3371    [001] d...1   455.151673: bpf_trace_printk: Hello, World!&#39;\nb&#39;      irqbalance-3371    [001] d...1   455.151766: bpf_trace_printk: Hello, World!&#39;\nb&#39;      irqbalance-3371    [001] d...1   455.151793: bpf_trace_printk: Hello, World!&#39;\nb&#39;      irqbalance-3371    [001] d...1   455.151804: bpf_trace_printk: Hello, World!&#39;\nb&#39;      irqbalance-3371    [001] d...1   455.151812: bpf_trace_printk: Hello, World!&#39;\nb&#39;      irqbalance-3371    [001] d...1   455.151819: bpf_trace_printk: Hello, World!&#39;\nb&#39;      irqbalance-3371    [001] d...1   455.151826: bpf_trace_printk: Hello, World!&#39;\nb&#39;      irqbalance-3371    [001] d...1   455.151832: bpf_trace_printk: Hello, World!&#39;\nb&#39;      irqbalance-3371    [001] d...1   455.151839: bpf_trace_printk: Hello, World!&#39;\nb&#39;      irqbalance-3371    [001] d...1   455.151845: bpf_trace_printk: Hello, World!&#39;\nb&#39;      irqbalance-3371    [001] d...1   455.151852: bpf_trace_printk: Hello, World!&#39;\nb&#39;      irqbalance-3371    [001] d...1   455.151858: bpf_trace_printk: Hello, World!&#39;\nb&#39;      irqbalance-3371    [001] d...1   455.151865: bpf_trace_printk: Hello, World!&#39;\nb&#39;      irqbalance-3371    [001] d...1   465.155081: bpf_trace_printk: Hello, World!&#39;\nb&#39;      irqbalance-3371    [001] d...1   465.155203: bpf_trace_printk: Hello, World!&#39;\nb&#39;      irqbalance-3371    [001] d...1   465.155246: bpf_trace_printk: Hello, World!&#39;\næˆ‘çš„ç¬¬ä¸€ä¸ªç¨‹åºæœ‰é—®é¢˜å—ï¼Ÿæ€ä¹ˆè¾“å‡ºè·Ÿè€å¸ˆçš„ä¸ä¸€æ ·ï¼Œè¿˜æœ‰ä¸­æ–­çš„æ‰“å°ï¼Œè¿™æ˜¯ä¸ºå•¥å‘¢","like_count":0,"discussions":[{"author":{"id":3228321,"avatar":"https://static001.geekbang.org/account/avatar/00/31/42/a1/716f3c50.jpg","nickname":"22","note":"","ucode":"CA72DF07C8C49F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606667,"discussion_content":"b&#39;    systemd-oomd-852     [004] d..31  1668.814969: bpf_trace_printk: Hello, World!&#39;\nb&#39;    systemd-oomd-852     [004] d..31  1669.065392: bpf_trace_printk: Hello, World!&#39;\nb&#39;        vmtoolsd-1345    [005] d..31  1669.153755: bpf_trace_printk: Hello, World!&#39;\nb&#39;        vmtoolsd-1345    [005] d..31  1669.153893: bpf_trace_printk: Hello, World!&#39;\nb&#39;        vmtoolsd-1345    [005] d..31  1669.154010: bpf_trace_printk: Hello, World!&#39;\nb&#39;        vmtoolsd-1345    [005] d..31  1669.154092: bpf_trace_printk: Hello, World!&#39;\nb&#39;        vmtoolsd-1345    [005] d..31  1669.154265: bpf_trace_printk: Hello, World!&#39;\nb&#39;        vmtoolsd-1345    [005] d..31  1669.154338: bpf_trace_printk: Hello, World!&#39;\nb&#39;    systemd-oomd-852     [004] d..31  1669.314858: bpf_trace_printk: Hello, World!&#39;\nb&#39;    systemd-oomd-852     [004] d..31  1669.565390: bpf_trace_printk: Hello, World!&#39;\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677284817,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3228321,"avatar":"https://static001.geekbang.org/account/avatar/00/31/42/a1/716f3c50.jpg","nickname":"22","note":"","ucode":"CA72DF07C8C49F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606666,"discussion_content":"å¤§å¤§ä½ å¥½ï¼Œæˆ‘çš„å‡ºç°è¿™ç§è¾“å‡ºæ˜¯ä»€ä¹ˆåŸå› å•Šï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677284810,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1013424,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/76/b0/14fec62f.jpg","nickname":"ä¸äº†å³°","note":"","ucode":"E23B96D6A3D4EC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591164,"discussion_content":"æ²¡æœ‰é—®é¢˜ã€‚ ä½ å…³é—­ systemctl stop irqbalance åï¼Œå°±æ²¡æœ‰ä½ ä¸Šé¢çš„é‚£äº›è¾“å‡º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666337430,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¦å»º","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352279,"user_name":"æœ‰è¯†ä¹‹å£«","can_delete":false,"product_type":"c1","uid":1120024,"ip_address":"","ucode":"23F5594193D200","user_header":"https://static001.geekbang.org/account/avatar/00/11/17/18/e4382a8e.jpg","comment_is_top":false,"comment_ctime":1658494704,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100104501,"comment_content":"æ‚¨å¥½ï¼Œè¯·æ•™ä¸ªé—®é¢˜ï¼Œebpf ä¸»è¦è·Ÿå†…æ ¸ç›¸å…³ï¼Ÿè·Ÿ OSã€cpu æ¶æ„æœ‰å…³ï¼Ÿæ¯”å¦‚ç»Ÿä¿¡è¿™äº›å›½äº§çš„æ“ä½œç³»ç»Ÿã€‚","like_count":0},{"had_liked":false,"id":352276,"user_name":"æœ‰è¯†ä¹‹å£«","can_delete":false,"product_type":"c1","uid":1120024,"ip_address":"","ucode":"23F5594193D200","user_header":"https://static001.geekbang.org/account/avatar/00/11/17/18/e4382a8e.jpg","comment_is_top":false,"comment_ctime":1658493397,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":7,"product_id":100104501,"comment_content":"æŒ‰ç…§æ–‡æ¡£ä¸­çš„æ˜¾ç¤ºï¼Œå¥½åƒä¸è¡Œã€‚\nroot@3e572e0067ec:&#47;# sudo apt-get install -y make clang llvm libelf-dev libbpf-dev bpfcc-tools libbpfcc-dev linux-tools-$(uname -r) linux-headers-$(uname -r)\nReading package lists... Done\nBuilding dependency tree... Done\nReading state information... Done\nE: Unable to locate package linux-tools-5.10.25-linuxkit\nE: Couldn&#39;t find any package by glob &#39;linux-tools-5.10.25-linuxkit&#39;\nE: Couldn&#39;t find any package by regex &#39;linux-tools-5.10.25-linuxkit&#39;\nE: Unable to locate package linux-headers-5.10.25-linuxkit\nE: Couldn&#39;t find any package by glob &#39;linux-headers-5.10.25-linuxkit&#39;\nE: Couldn&#39;t find any package by regex &#39;linux-headers-5.10.25-linuxkit&#39;","like_count":0,"discussions":[{"author":{"id":1492385,"avatar":"https://static001.geekbang.org/account/avatar/00/16/c5/a1/f6a2d80d.jpg","nickname":"ç©¿é´å­çš„outman","note":"","ucode":"51DAC34D6C2642","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589468,"discussion_content":"linux-toolsåœ¨debiané‡Œé¢éœ€è¦å®‰è£…linux-perf\n```bash\nsudo apt-get install linux-perf\n```","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664984882,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352275,"user_name":"æœ‰è¯†ä¹‹å£«","can_delete":false,"product_type":"c1","uid":1120024,"ip_address":"","ucode":"23F5594193D200","user_header":"https://static001.geekbang.org/account/avatar/00/11/17/18/e4382a8e.jpg","comment_is_top":false,"comment_ctime":1658493251,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100104501,"comment_content":"root@3358d0bf1a7b:~# python3 hello.py\nb&#39;         python3-4167    [004] d..3  1441.079096: bpf_trace_printk: Hello, World!&#39;\nb&#39;         python3-4167    [004] d..3  1441.079758: bpf_trace_printk: Hello, World!&#39;\nb&#39;         python3-4167    [004] d..3  1441.080760: bpf_trace_printk: Hello, World!&#39;\nb&#39;           &lt;...&gt;-4192    [005] d..3  7360.748963: bpf_trace_printk: Hello, World!&#39;\n^CTraceback (most recent call last):\n  File &quot;&#47;root&#47;hello.py&quot;, line 11, in &lt;module&gt;\n    b.trace_print()\n  File &quot;&#47;usr&#47;lib&#47;python3&#47;dist-packages&#47;bcc&#47;__init__.py&quot;, line 1332, in trace_print\n    line = self.trace_readline(nonblocking=False)\n  File &quot;&#47;usr&#47;lib&#47;python3&#47;dist-packages&#47;bcc&#47;__init__.py&quot;, line 1312, in trace_readline\n    line = trace.readline(1024).rstrip()\nKeyboardInterrupt\n\nroot@3358d0bf1a7b:~# python3 trace_open.py\nTIME(s)            COMM             PID    FILE\n\n0.000000000        sntpc            1447   &#47;etc&#47;services\n0.000997083        sntpc            1447   &#47;dev&#47;urandom\n0.001217083        sntpc            1447   &#47;dev&#47;urandom\n\n\nå“ˆå“ˆå“ˆ æˆåŠŸäº†ã€‚","like_count":0},{"had_liked":false,"id":352253,"user_name":"æœ‰è¯†ä¹‹å£«","can_delete":false,"product_type":"c1","uid":1120024,"ip_address":"","ucode":"23F5594193D200","user_header":"https://static001.geekbang.org/account/avatar/00/11/17/18/e4382a8e.jpg","comment_is_top":false,"comment_ctime":1658481601,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100104501,"comment_content":"é—®é¢˜1ï¼š\nè´­ä¹°äº‘ä¸Šè™šæ‹Ÿæœºæˆ–è€…æœ¬åœ°ä½¿ç”¨è™šæ‹Ÿæœºè½¯ä»¶(vagrant&#47;vituralboxç­‰)æ„å»ºæœºå™¨ã€‚\næˆ‘æ‰“ç®—ä½¿ç”¨ docker å¯åŠ¨ä¸€ä¸ªå®¹å™¨ç”¨æ¥æµ‹è¯•çš„ã€‚\n\né—®é¢˜2ï¼š\n```\nlibbpfcc-dev linux-tools-$(uname -r) linux-headers-$(uname -r)\nReading package lists... Done\nBuilding dependency tree... Done\nReading state information... Done\nE: Unable to locate package linux-tools-5.10.25-linuxkit\nE: Couldn&#39;t find any package by glob &#39;linux-tools-5.10.25-linuxkit&#39;\nE: Couldn&#39;t find any package by regex &#39;linux-tools-5.10.25-linuxkit&#39;\nE: Unable to locate package linux-headers-5.10.25-linuxkit\nE: Couldn&#39;t find any package by glob &#39;linux-headers-5.10.25-linuxkit&#39;\nE: Couldn&#39;t find any package by regex &#39;linux-headers-5.10.25-linuxkit&#39;\n```\n\nå¯ä»¥ä½¿ç”¨ä¸€ä¸ªå®¹å™¨å»æµ‹è¯•ï¼Ÿè¿™æ ·æ–¹ä¾¿è¿ç§»æµ‹è¯•ç¯å¢ƒã€‚","like_count":0},{"had_liked":false,"id":350972,"user_name":"Adam","can_delete":false,"product_type":"c1","uid":1305633,"ip_address":"","ucode":"338BA720880E4F","user_header":"https://static001.geekbang.org/account/avatar/00/13/ec/21/b0fe1bfd.jpg","comment_is_top":false,"comment_ctime":1657433225,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100104501,"comment_content":"æˆ‘çš„æ˜¯é˜¿é‡Œäº‘osçš„ç¯å¢ƒï¼Œå†…æ ¸4.19ï¼Œè£…çš„bccæ¨¡å—ï¼Œæ²¡æœ‰BPF","like_count":0},{"had_liked":false,"id":349956,"user_name":"ï¼null","can_delete":false,"product_type":"c1","uid":1242483,"ip_address":"","ucode":"4E5B7922980397","user_header":"https://static001.geekbang.org/account/avatar/00/12/f5/73/f7d3a996.jpg","comment_is_top":false,"comment_ctime":1656470564,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":7,"product_id":100104501,"comment_content":"Failed to attach BPF program b&#39;hello_world&#39; to kprobe b&#39;do_sys_openat2&#39;\n\nåªæœ‰æˆ‘è¿™æ ·å—ï¼Ÿ\nubuntu 20.04\nlibbpf-0.8.0 æºç ç¼–è¯‘å®‰è£…çš„","like_count":0,"discussions":[{"author":{"id":1242483,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f5/73/f7d3a996.jpg","nickname":"ï¼null","note":"","ucode":"4E5B7922980397","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578029,"discussion_content":"æŠŠeventæ¢æˆdo_sys_openå°±å¯ä»¥äº†ï¼Œéš¾é“æˆ‘çš„å†…æ ¸é‡Œæ²¡æœ‰do_sys_openat2?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656474806,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":349610,"user_name":"æŒºç›´è…°æ¿","can_delete":false,"product_type":"c1","uid":1178397,"ip_address":"","ucode":"B7DD679A3A4EEB","user_header":"https://static001.geekbang.org/account/avatar/00/11/fb/1d/12c7c021.jpg","comment_is_top":false,"comment_ctime":1656135709,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":8,"product_id":100104501,"comment_content":"å€ªè€å¸ˆï¼Œæˆ‘çš„ç¯å¢ƒæ˜¯centos8.3 å†…æ ¸5.4\nè¿è¡Œgcc hello.c æŠ¥è¿™ä¸ªé”™ï¼Œè¯·å¸®å¿™è§£ç­”ä¸‹\nhello.c: åœ¨å‡½æ•°â€˜hello_worldâ€™ä¸­:\nhello.c:4:5: è­¦å‘Šï¼šéšå¼å£°æ˜å‡½æ•°â€˜bpf_trace_printkâ€™ [-Wimplicit-function-declaration]\n     bpf_trace_printk(&quot;Hello, World!&quot;);\n     ^~~~~~~~~~~~~~~~\n&#47;usr&#47;lib&#47;gcc&#47;x86_64-redhat-linux&#47;8&#47;..&#47;..&#47;..&#47;..&#47;lib64&#47;crt1.oï¼šåœ¨å‡½æ•°â€˜_startâ€™ä¸­ï¼š\n(.text+0x24)ï¼šå¯¹â€˜mainâ€™æœªå®šä¹‰çš„å¼•ç”¨\n&#47;tmp&#47;ccJ0W5wC.oï¼šåœ¨å‡½æ•°â€˜hello_worldâ€™ä¸­ï¼š\nhello.c:(.text+0x17)ï¼šå¯¹â€˜bpf_trace_printkâ€™æœªå®šä¹‰çš„å¼•ç”¨\ncollect2: é”™è¯¯ï¼šld è¿”å› 1\n","like_count":0,"discussions":[{"author":{"id":1242483,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f5/73/f7d3a996.jpg","nickname":"ï¼null","note":"","ucode":"4E5B7922980397","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578052,"discussion_content":"å› ä¸ºè¿™ä¸ªç¨‹åºä¸èƒ½ç”¨gccç¼–è¯‘...","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656489073,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":348241,"user_name":"XULUN","can_delete":false,"product_type":"c1","uid":2344411,"ip_address":"","ucode":"C5C1D732A264F2","user_header":"https://static001.geekbang.org/account/avatar/00/23/c5/db/29d5b491.jpg","comment_is_top":false,"comment_ctime":1654863629,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100104501,"comment_content":"æ²¡ä¼˜åŒ–ä¹‹å‰ï¼Œæˆ‘ä»¥ä¸ºå†…æ ¸æ€ æ–¹æ³• hello_world å¿…é¡»å®šä¹‰ ctx å‚æ•°\nä¼˜åŒ–åï¼Œè«åå¤šå‡ºæ¥è¿™ä¹ˆå‚æ•°ï¼Œè¿™äº›å‚æ•°éƒ½æ˜¯æ ¹æ®ä»€ä¹ˆæŒ‡å®šçš„ï¼Œæœ‰æŸ¥è¯¢çš„åœ°æ–¹å—\nå†…æ ¸æ€çš„bpfæ–¹æ³•çš„ ä¹Ÿä¼ å…¥äº† ä¸€äº› å¹¶æ²¡è¢«èµ‹å€¼çš„å‚æ•° å¦‚ bpf_probe_read(&amp;data.fname, sizeof(data.fname), (void *)filename); æœ‰ç‚¹æ‡µ data.fname ä»€ä¹ˆæ—¶å€™å®šä¹‰çš„ filenameåˆæ˜¯å•¥æ—¶å€™å®šä¹‰çš„ã€‚\n\nçœ‹æ¥æˆ‘ä¸é€‚åˆå­¦è¿™ä¸ªå•Š","like_count":0},{"had_liked":false,"id":342333,"user_name":"seabiscuitxf","can_delete":false,"product_type":"c1","uid":1053705,"ip_address":"","ucode":"037C59EB707EE5","user_header":"https://static001.geekbang.org/account/avatar/00/10/14/09/794fc32f.jpg","comment_is_top":false,"comment_ctime":1650198082,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":8,"product_id":100104501,"comment_content":"è¯·é—®å¤§å®¶æœ‰ç¢°åˆ°è¿™ä¸ªé—®é¢˜å—ï¼ŒæŒ‰ç…§ä¸Šé¢çš„å‘½ä»¤å®‰è£…äº†è½¯ä»¶ï¼Œç„¶åè¿è¡Œ python3 hello.py æ—¶æŠ¥é”™ï¼š\nTraceback (most recent call last):\n  File &quot;hello.py&quot;, line 2, in &lt;module&gt;\n    from bcc import BPF\nImportError: cannot import name &#39;BPF&#39; from &#39;bcc&#39; (&#47;app&#47;anaconda3&#47;lib&#47;python3.8&#47;site-packages&#47;bcc&#47;__init__.py)\n\nåœ¨bcc githubä¸Šæ‰¾åˆ°æœ‰äººæå‡ºè¿™ä¸ªissueï¼Œä½†æ˜¯è¿˜æ²¡æœ‰è§£å†³åŠæ³•ï¼›\ndockerç³»ç»Ÿç¯å¢ƒï¼šdebian11.2ï¼Œå†…æ ¸5.10","like_count":0,"discussions":[{"author":{"id":2775602,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/NgYcTNtqPPQR9C2aiaRSpEyyKykNEXcthDG4Hh5UqEGdFqWyKxwBuL5XwmWFsyYrVlicpXAKXlKu6Sz5ytXWicrGA/132","nickname":"é“ç—´å‰è¾ˆ","note":"","ucode":"7C1070D867E47F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591203,"discussion_content":"æˆ‘ä¹Ÿä¸€ç›´ä¸è¡Œï¼Œæˆ‘æ˜¯openEuler 22.03 LTS 5.10.0-60.58.0.86.oe2203.x86_64ç¯å¢ƒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666361792,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å®‰å¾½","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1008016,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/61/90/de8c61a0.jpg","nickname":"dongge","note":"","ucode":"CEFE4D0CC42907","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568842,"discussion_content":"pip3 uninstall bcc è¯•è¯•è¿™ä¸ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651241550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341128,"user_name":"éƒ‘æµ·æˆ","can_delete":false,"product_type":"c1","uid":1192616,"ip_address":"","ucode":"B0363EA4B2C646","user_header":"https://static001.geekbang.org/account/avatar/00/12/32/a8/d5bf5445.jpg","comment_is_top":false,"comment_ctime":1649381273,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100104501,"comment_content":"  &#47;&#47; è·å–è¿›ç¨‹å\n  if (bpf_get_current_comm(&amp;data.comm, sizeof(data.comm)) == 0)\n  {\n    bpf_probe_read(&amp;data.fname, sizeof(data.fname), (void *)filename);\n  }\nè€å¸ˆï¼Œè¿™é‡Œè¿™é‡Œåˆ¤æ–­pid==0æ˜¯bpfä¼šåœ¨å†…æ ¸å•ç‹¬åˆ›å»ºä¸€ä¸ªpid namepaceå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":337448,"user_name":"èŠ³è²è²å…®æ»¡å ‚","can_delete":false,"product_type":"c1","uid":1000860,"ip_address":"","ucode":"C8D89999C201F1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/45/9c/5b06d143.jpg","comment_is_top":false,"comment_ctime":1646830121,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100104501,"comment_content":"è¡¥å……ä¸‹ç¯å¢ƒä¿¡æ¯ ubuntu 2010 å†…æ ¸5.13.0-28-generic","like_count":0}]}