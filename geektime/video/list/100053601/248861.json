{"id":248861,"title":"03 | 需求收集和总体架构设计","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geektime-distributed\">https://gitee.com/geektime-geekbang/geektime-distributed</a></p>","comments":[{"had_liked":false,"id":227687,"user_name":"飞翔","can_delete":false,"product_type":"c3","uid":1068571,"ip_address":"","ucode":"65AF6AF292DAD6","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/1b/f4b786b9.jpg","comment_is_top":false,"comment_ctime":1592453626,"is_pvip":false,"replies":[{"id":83981,"content":"当然要问清楚，比方说，内部大数据BI团队，它们可能需要的是一个批量导入，类似dump的API，用于做线下跑批量计算的。如果是第三方广告商，它们需要点击量数据计算广告分成，那么对数据的正确性要求就很高。如果是内部运营团队用，它们可能只关心每月的报表数据，提供给它们的API就不一样，性能和实时性要求都不高。等等。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1592500002,"ip_address":"","comment_id":227687,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100053601,"comment_content":"老师 能不能 举个例子  对于创景用例  谁用这么系统 问清楚了 能有啥帮助， 比如 如果用户使用， 大数据Bi团队， 第三方广告商，内部业务运营团队， 这对设计会有啥影响？","like_count":8,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498747,"discussion_content":"当然要问清楚，比方说，内部大数据BI团队，它们可能需要的是一个批量导入，类似dump的API，用于做线下跑批量计算的。如果是第三方广告商，它们需要点击量数据计算广告分成，那么对数据的正确性要求就很高。如果是内部运营团队用，它们可能只关心每月的报表数据，提供给它们的API就不一样，性能和实时性要求都不高。等等。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592500002,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":238986,"user_name":"叮叮董董","can_delete":false,"product_type":"c3","uid":1956208,"ip_address":"","ucode":"CF253F429760ED","user_header":"https://static001.geekbang.org/account/avatar/00/1d/d9/70/8c2e196d.jpg","comment_is_top":false,"comment_ctime":1596410584,"is_pvip":false,"replies":[{"id":88484,"content":"总结很好⛽️","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1596559410,"ip_address":"","comment_id":238986,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100053601,"comment_content":"解决设计的几个步骤，1.场景用例，确定目标受众;2.量级规模，确定应用支持的数据规模;3.性能，确定系统的处理能力;4.成本，需要结合实际情况做适合公司行情的架构","like_count":4,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502925,"discussion_content":"总结很好⛽️","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596559410,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":239104,"user_name":"gaga","can_delete":false,"product_type":"c3","uid":1459132,"ip_address":"","ucode":"F9E99FBE2E581F","user_header":"https://static001.geekbang.org/account/avatar/00/16/43/bc/59d0720b.jpg","comment_is_top":false,"comment_ctime":1596436470,"is_pvip":false,"replies":[{"id":88627,"content":"一般是隔离的两套用户体系。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1596727787,"ip_address":"","comment_id":239104,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100053601,"comment_content":"老师，问个系统设计问题，面向运维的管理系统和面向用户的业务系统的用户模块，一般是共用同一个用户服务还是隔离的？","like_count":3,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502981,"discussion_content":"一般是隔离的两套用户体系。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596727787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1681539,"avatar":"https://static001.geekbang.org/account/avatar/00/19/a8/83/a5921c29.jpg","nickname":"石岩","note":"","ucode":"DDF5A888B5BCA7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":406120,"discussion_content":"运维系统维护的数据一般都是业务系统的数据，那维护的数据如何传递给业务系统啊？直接操作数据库还是哪种方式啊？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634704806,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":252788,"user_name":"Wang","can_delete":false,"product_type":"c3","uid":1052957,"ip_address":"","ucode":"9BEFA46433F86B","user_header":"https://static001.geekbang.org/account/avatar/00/10/11/1d/6ad7eb3c.jpg","comment_is_top":false,"comment_ctime":1602487260,"is_pvip":false,"replies":[{"id":92695,"content":"一般发布到公司的maven私服仓库，统计进行依赖管理","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1602864034,"ip_address":"","comment_id":252788,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100053601,"comment_content":"波波老师，微服务拆分部署时，应用的依赖jar包，是发布到公司私有的maven库里吗，还是如何的呢？","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506875,"discussion_content":"一般发布到公司的maven私服仓库，统计进行依赖管理","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602864034,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":234110,"user_name":"托尼斯威特","can_delete":false,"product_type":"c3","uid":1729060,"ip_address":"","ucode":"98A1035527292E","user_header":"https://static001.geekbang.org/account/avatar/00/1a/62/24/07e2507c.jpg","comment_is_top":false,"comment_ctime":1594598745,"is_pvip":false,"replies":[{"id":86963,"content":"one size does not fit all，一个api不能满足所有需求，我们经常需要按需定制api接口。 ","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1595004460,"ip_address":"","comment_id":234110,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100053601,"comment_content":"再问个问题, API设计那里, &quot;处理需求:对视频观看数进行计数&quot;有四个API是什么意思? 要写入一次事件, 用countEvent(videoId, eventType) 一个API不就够了","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501281,"discussion_content":"one size does not fit all，一个api不能满足所有需求，我们经常需要按需定制api接口。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595004460,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228180,"user_name":"lidashuang","can_delete":false,"product_type":"c3","uid":1104850,"ip_address":"","ucode":"560ABE8032760E","user_header":"https://static001.geekbang.org/account/avatar/00/10/db/d2/e29f8834.jpg","comment_is_top":false,"comment_ctime":1592581445,"is_pvip":false,"replies":[{"id":84210,"content":"⛽️","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1592667944,"ip_address":"","comment_id":228180,"utype":1}],"discussion_count":1,"race_medal":2,"score":2,"product_id":100053601,"comment_content":"很期待这个课程","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498945,"discussion_content":"⛽️","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592667944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226995,"user_name":"Geek_zbvt62","can_delete":false,"product_type":"c3","uid":1046714,"ip_address":"","ucode":"81EA27ADD9EC1A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/d28174a9.jpg","comment_is_top":false,"comment_ctime":1592264555,"is_pvip":false,"replies":[{"id":83705,"content":"这个属于功能测试部分，课程后面会提到，具体要看场景，有些场景是要求准确性的，不能有误差，比如说，如果视频点击量涉及到广告商和作者的分成，那么对正确性的要求会比较严格。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1592322984,"ip_address":"","comment_id":226995,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100053601,"comment_content":"对错误情况的容忍程度是否也可以算作需求的一部分，计数服务可能会允许不是100%的精确","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498447,"discussion_content":"这个属于功能测试部分，课程后面会提到，具体要看场景，有些场景是要求准确性的，不能有误差，比如说，如果视频点击量涉及到广告商和作者的分成，那么对正确性的要求会比较严格。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592322984,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322901,"user_name":"密码123456","can_delete":false,"product_type":"c3","uid":1126593,"ip_address":"","ucode":"9889463CC0EA71","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/c1/2dde6700.jpg","comment_is_top":false,"comment_ctime":1637651803,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100053601,"comment_content":"我觉得，这节课最重要的是，挖掘问题背后真正的需求，不是盲目实现。也许这就是我和架构师的差距吧。希望能够多听听遇到问题后，老师的想法，如何处理。","like_count":2},{"had_liked":false,"id":334722,"user_name":"阿甘","can_delete":false,"product_type":"c3","uid":1057843,"ip_address":"","ucode":"BC93175B70E05D","user_header":"https://static001.geekbang.org/account/avatar/00/10/24/33/bcf37f50.jpg","comment_is_top":false,"comment_ctime":1645090274,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100053601,"comment_content":"我觉得最主要的需求是：是只需要统计到目前为止的观看量还是可以看过去任何一个时间段的观看情况。","like_count":1},{"had_liked":false,"id":227005,"user_name":"翼神","can_delete":false,"product_type":"c3","uid":1341689,"ip_address":"","ucode":"D53BEC9B26F756","user_header":"https://static001.geekbang.org/account/avatar/00/14/78/f9/8b2031ba.jpg","comment_is_top":false,"comment_ctime":1592266418,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100053601,"comment_content":"这个列表很赞，基本上是一个系统架构设计的实践步骤","like_count":1},{"had_liked":false,"id":387288,"user_name":"Geek_有心","can_delete":false,"product_type":"c3","uid":2379461,"ip_address":"广东","ucode":"A940B79C84329C","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/kFuWg0sRPIT94SGU5Ciaic1LXlHpMkAf4vC0GlCURVFZczUnL0sMhf3TBombsTxReicxl7VhafI5uHyoShUpwoHOg/132","comment_is_top":false,"comment_ctime":1706859999,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100053601,"comment_content":"讲的非常好，great","like_count":0}]}