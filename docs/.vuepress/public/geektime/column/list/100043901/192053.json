{"id":192053,"title":"09 | å‡½æ•°ï¼šè‡ªå·±åŠ¨æ‰‹å®ç°ä½é…ç‰ˆ scanf å‡½æ•°","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯èƒ¡å…‰ï¼Œä»Šå¤©æ˜¯å¤§å¹´åˆä¸€ï¼Œæ˜¯å’±ä»¬ä¸­å›½ä¼ ç»Ÿçš„é‡è¦èŠ‚æ—¥ï¼Œæ˜¥èŠ‚ï¼èƒ½åœ¨è¿™æ ·çš„èŠ‚æ—¥æ°›å›´é‡Œï¼Œè¿˜èƒ½åšæŒè¿‡æ¥å­¦ä¹ çš„ï¼Œæˆ‘å¿…é¡»è¦è¯´ä¸€å£°â€œé¼ â€ä½ æœ€ä¼˜ç§€ï¼åœ¨è¿™é‡Œæˆ‘ä¹Ÿç¥ç¦çƒ­çˆ±å­¦ä¹ çš„ä½ ï¼Œåœ¨æ–°çš„ä¸€å¹´ï¼Œèº«ä½“å¥åº·ï¼Œé˜–å®¶æ¬¢ä¹ï¼</p><p>ä»Šå¤©å‘¢ï¼Œæˆ‘ä»¬çš„å­¦ä¹ è¯¾ç¨‹ä¹Ÿå°†è¿æ¥é‡Œç¨‹ç¢‘å¼çš„ä¸€è¯¾ã€‚æ‰€è°“é‡Œç¨‹ç¢‘ï¼Œæ˜¯å› ä¸ºåœ¨è¿™ä¸€èŠ‚ä¹‹å‰ï¼Œä½ å†™çš„ç¨‹åºï¼Œåªæ˜¯ç‰‡æ®µï¼Œåªæ˜¯æ€æƒ³çš„éšæ„è¡¨è¾¾ï¼Œè€Œé€šè¿‡äº†æœ¬èŠ‚çš„å­¦ä¹ ï¼Œä½ çš„ç¨‹åºç»“æ„å°†å‘ç”Ÿç¿»å¤©è¦†åœ°çš„å˜åŒ–ï¼Œä¼šå˜å¾—è§„æ ¼ä¸¥æ•´ï¼Œå˜å¾—å¯ä»¥å¤ç”¨ï¼Œå˜å¾—æ˜“äºæ‰¾é”™ã€‚</p><p>å‰é¢çš„è¯¾ç¨‹ï¼Œæˆ‘ä»¬ä¸»è¦å°±æ˜¯åœ¨ä¸€äº›åŸºæœ¬çš„ç¨‹åºç»“æ„ä¸­åšå­¦ä¹ ï¼ŒåŒ…æ‹¬é¡ºåºç»“æ„ï¼Œåˆ†æ”¯ç»“æ„ä»¥åŠå¾ªç¯ç»“æ„ã€‚ä»Šå¤©è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è¦è®¤è¯†çš„å‡½æ•°ï¼Œå¯ä»¥å°†åŠŸèƒ½å°è£…æˆå¯ä»¥å¤ç”¨çš„æ¨¡å—ï¼Œå°±åƒåˆ›é€ ä¹é«˜ç§¯æœ¨ä¸€æ ·ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œå¼€å§‹ä»Šå¤©çš„å­¦ä¹ å§ã€‚</p><h2>ä»Šæ—¥ä»»åŠ¡</h2><p>å¯¹ç¨‹åºçš„è¾“å…¥è¾“å‡ºå‡½æ•°ï¼Œä½ åº”è¯¥å·²ç»å¾ˆç†Ÿæ‚‰äº†ã€‚ä»Šå¤©æˆ‘ä»¬ä»¿ç…§ scanf å‡½æ•°ï¼Œå®ç°ä¸€ä¸ªä½é…ç‰ˆçš„ my_scanf å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°çš„åŠŸèƒ½ï¼Œç®€å•æ¥è¯´å°±æ˜¯å°†ä¸€ä¸ªå­—ç¬¦ä¸²ä¿¡æ¯è½¬æ¢æˆæ•´å‹æ•°å­—ï¼Œèƒ½å¤Ÿå®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Œä½ ä¼šæ›´æ·±åˆ»çš„ç†è§£ scanf å‡½æ•°ï¼Œæ›´æ·±åˆ»çš„ç†è§£å‚æ•°è®¾è®¡ã€‚ä¸‹é¢ç»™ä½ å‡ ä¸ªä¾‹å­ã€‚</p><p>é¦–å…ˆå…ˆæ¥çœ‹ç¬¬ä¸€ä¸ªåŸºç¡€åŠŸèƒ½ï¼š</p><pre><code>int n = 98;\nmy_scanf(&quot;12345&quot;, &amp;n);\nprintf(&quot;%d&quot;, n); // è¾“å‡º 12345ï¼Œè€Œä¸æ˜¯ 98\n</code></pre><p>ä¸Šé¢è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨ my_scanf å‡½æ•°ï¼Œå°†å­—ç¬¦ä¸²ä¿¡æ¯è½¬æ¢æˆäº†æ•´å‹æ•°æ®ï¼Œå¹¶ä¸”å°†ç»“æœå­˜å‚¨åˆ°äº† n å˜é‡çš„å†…å­˜ç©ºé—´ä¸­ï¼Œè°ƒç”¨ printf å‡½æ•°æ‰“å° n å˜é‡å€¼çš„æ—¶å€™ï¼Œè¾“å‡ºçš„ä¿¡æ¯ä¸æ˜¯ n å˜é‡åŸæœ‰çš„åˆå€¼ 98ï¼Œè€Œæ˜¯ 12345ã€‚å¯¹äºè¿™ä¸ªåŸºç¡€çš„è½¬æ¢åŠŸèƒ½ï¼Œè¦è€ƒè™‘å…¼å®¹è´Ÿæ•°çš„æƒ…å†µã€‚</p><!-- [[[read_end]]] --><p>åªæœ‰è¿™ä¸€ä¸ªåŸºç¡€åŠŸèƒ½è‚¯å®šæ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œä¸‹é¢å°±è®©æˆ‘ä»¬çœ‹å¦å¤–ä¸€ç§æƒ…å†µï¼š</p><pre><code>int n = 98, m = 0;\nmy_scanf(&quot;123 45&quot;, &amp;n, &amp;m);\nprintf(&quot;n = %d m = %d&quot;, n, m); // è¾“å‡º n = 123 m = 45\n</code></pre><p>ä¸Šé¢è¿™æ®µä»£ç ä¸­ï¼Œé¦–å…ˆæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªæ•´å‹å˜é‡ n å’Œ mï¼Œç„¶åç»™ n åˆå§‹åŒ–ä¸º 98ï¼Œm åˆå§‹åŒ–ä¸º 0ã€‚ä¹‹åç»™ my_scanf å‡½æ•°ä¼ å…¥çš„å­—ç¬¦ä¸²ä¿¡æ¯ä¸­æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œé‚£ä¹ˆ my_scanf å‡½æ•°ä¼šä»¥ç©ºæ ¼ä½œä¸ºåˆ†éš”ç¬¦ï¼Œå°†ç¬¬ä¸€ä¸ªè½¬æ¢å‡ºæ¥çš„æ•°å­— 123 èµ‹å€¼ç»™ nï¼Œç¬¬äºŒä¸ªè½¬æ¢å‡ºæ¥çš„æ•°å­— 45 èµ‹å€¼ç»™ mã€‚</p><p>ä¸Šé¢ä¸¾ä¾‹äº† my_scanf å‡½æ•°è½¬æ¢ 1 ä¸ªæ•´å‹å‚æ•°å’Œ 2 ä¸ªæ•´å‹å‚æ•°æƒ…å†µï¼Œè¿™äº›éƒ½æ˜¯åœ¨å‡½æ•°çš„åŸºæœ¬çŸ¥è¯†èŒƒå›´å†…çš„å†…å®¹ã€‚ç»å¸¸æœ‰åˆå­¦è€…å­¦å®Œå‡½æ•°ç›¸å…³çš„åŸºæœ¬çŸ¥è¯†ä»¥åï¼Œå°±è®¤ä¸ºè‡ªå·±æŒæ¡äº†å‡½æ•°çš„å…¨éƒ¨çŸ¥è¯†ï¼Œä½†äº‹å®ç»éå¦‚æ­¤ï¼Œè€Œä¹‹æ‰€ä»¥åˆå­¦è€…æœ‰è¿™ç§â€œå‡æƒ³â€ï¼Œæ˜¯å› ä¸ºä»–ä¸çŸ¥é“å¦‚ä½•æ‰¾åˆ°å’Œåˆ¤å®šè‡ªå·±çš„çŸ¥è¯†ç›²åŒºã€‚</p><p>æ‰€ä»¥ä»Šå¤©æˆ‘ä»¬è¦è®²çš„å†…å®¹å°±æ˜¯ç ´é™¤â€œå‡æƒ³â€ã€‚è¿™ä¸ªä»»åŠ¡å°±æ˜¯è¦è®¾è®¡ä¸€ä¸ªèƒ½å¤Ÿè½¬æ¢ä»»æ„ä¸ªæ•´å‹å‚æ•°çš„ my_scanf å‡½æ•°ï¼Œæ³¨æ„ï¼Œè¿™é‡Œçš„é‡ç‚¹éš¾ç‚¹ï¼Œå¯æ˜¯åœ¨ä»»æ„ä¸ªå‚æ•°ä¸Šé¢ã€‚æ¸…æ¥šäº†ä»»åŠ¡ä»¥åï¼Œä¸‹é¢å°±è®©æˆ‘ä»¬è¿›å…¥ä»Šå¤©çš„æŸ¥ç¼ºè¡¥æ¼ç¯èŠ‚å§ã€‚</p><h2>å¿…çŸ¥å¿…ä¼šï¼ŒæŸ¥ç¼ºè¡¥æ¼</h2><p>è¦å®Œæˆä»Šå¤©çš„è¿™ä¸ªä»»åŠ¡ï¼Œé¦–å…ˆä½ éœ€è¦çŸ¥é“å¦‚ä½•å®ç°ä¸€ä¸ªåŸºæœ¬çš„å‡½æ•°ï¼Œç”±äºè¦æ”¯æŒè½¬æ¢ä»»æ„å¤šä¸ªæ•´å‹å‚æ•°ï¼Œæ‰€ä»¥ä½ è¿˜éœ€è¦çŸ¥é“å˜å‚å‡½æ•°ç›¸å…³çš„çŸ¥è¯†ã€‚ä¸‹é¢æˆ‘ä»¬å°±é€é¡¹çš„æ¥è¿›è¡Œå­¦ä¹ å§ã€‚</p><h4>1. å‡½æ•°çš„åŸºç¡€çŸ¥è¯†</h4><p>æ•°å­¦ä¸­çš„å‡½æ•°ï¼Œå¤§å®¶éƒ½ä¸é™Œç”Ÿï¼Œä¸€èˆ¬çš„å½¢å¼æ˜¯ f(x) = yï¼Œx æ˜¯è‡ªå˜é‡ï¼Œy æ˜¯å‡½æ•°å€¼ã€‚ç¨‹åºä¸­çš„å‡½æ•°ï¼Œå’Œæ•°å­¦ä¸­çš„å‡½æ•°åŸºæœ¬ä¸€è‡´ï¼Œæœ‰è‡ªå˜é‡ï¼Œæˆ‘ä»¬ç§°ä½œâ€œä¼ å…¥å‚æ•°â€ï¼Œè¿˜æœ‰å‡½æ•°å€¼ï¼Œæˆ‘ä»¬å«åšè¿”å›å€¼ã€‚</p><p>å…ˆè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ç¨‹åºä¸­çš„å‡½æ•°çš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ï¼š<br>\n<img src=\"https://static001.geekbang.org/resource/image/31/76/312f867dfccc3ed8422a5612a11d2e76.jpg?wh=3407*1823\" alt=\"\" title=\"å›¾1ï¼šå‡½æ•°çš„åŸºæœ¬ç»„æˆéƒ¨åˆ†\"></p><p>å¦‚å›¾1æ‰€ç¤ºï¼Œä¸€ä¸ªç¨‹åºå‡½æ•°ä»å·¦åˆ°å³ï¼Œä»ä¸Šåˆ°ä¸‹ï¼Œå¤§ä½“å¯ä»¥åˆ†æˆå››ä¸ªéƒ¨åˆ†ï¼š</p><ul>\n<li>ç¬¬ä¸€ä¸ªéƒ¨åˆ†ï¼Œæ˜¯å‡½æ•°è¿”å›å€¼çš„ç±»å‹ã€‚</li>\n<li>ç¬¬äºŒä¸ªéƒ¨åˆ†ï¼Œæ˜¯å‡½æ•°åå­—ï¼Œè°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œéœ€è¦ç»™å‡ºè¿™ä¸ªå‡½æ•°åï¼Œæ‰€ä»¥åœ¨è®¾è®¡å‡½æ•°åçš„æ—¶å€™ï¼Œè¦å°½é‡è®¾è®¡ä¸€ä¸ªä¸å‡½æ•°åŠŸèƒ½æœ‰å…³çš„åå­—ï¼Œä¾‹å¦‚ä¸Šå›¾ä¸­çš„å‡½æ•°ï¼Œé€šè¿‡åå­—æˆ‘ä»¬å¯çŸ¥ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæ±‚å¹³æ–¹çš„å‡½æ•°ã€‚</li>\n<li>ç¬¬ä¸‰éƒ¨åˆ†ï¼Œæ˜¯ä¼ å…¥å‚æ•°ï¼Œå°±æ˜¯æ•°å­¦å‡½æ•°ä¸­çš„è‡ªå˜é‡ã€‚</li>\n<li>ç¬¬å››éƒ¨åˆ†å°±æ˜¯å‡½æ•°ä½“ï¼Œä¹Ÿå°±æ˜¯è¦å®Œæˆå‡½æ•°åŠŸèƒ½çš„é€»è¾‘ä»£ç ï¼Œç»“æœå€¼æ˜¯é€šè¿‡ return è¯­å¥è¿›è¡Œè¿”å›çš„ï¼Œè€Œæ•´ä¸ªå‡½æ•°ä½“çš„é€»è¾‘è¦åŒ…è£¹åœ¨ä¸€å¯¹å¤§æ‹¬å·å†…éƒ¨ã€‚</li>\n</ul><p>ä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹ä¸€ä¸‹åœ¨ç¨‹åºä¸­å¦‚ä½•ä½¿ç”¨å‡½æ•°åŠŸèƒ½ï¼š</p><pre><code>#include &lt;stdio.h&gt;\nint square(int x) { // å®šä¹‰å‡½æ•° square\n    return x * x;\n}\nint main() {\n    int n;\n    scanf(&quot;%d&quot;, &amp;n);\n    printf(&quot;%d\\n&quot;, square(n));\n    return 0;\n}\n</code></pre><p>ä¸Šè¿°ä»£ç ä¸­ï¼Œåœ¨ä¸»å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬è¯»å…¥ä¸€ä¸ªæ•´å‹æ•°å­— nï¼Œç„¶åè¾“å‡º n çš„å¹³æ–¹å€¼ã€‚è¿™é‡Œåœ¨è®¡ç®— n çš„å¹³æ–¹å€¼çš„æ—¶å€™ï¼Œç¨‹åºä¸­è°ƒç”¨äº†ä¸Šé¢å®šä¹‰çš„ square å‡½æ•°ï¼Œé‚£ä¹ˆ printf å‡½æ•°ç›¸å½“äºè¾“å‡ºçš„æ˜¯ square å‡½æ•°çš„è¿”å›å€¼ï¼Œæ ¹æ® square å‡½æ•°çš„å®ç°ï¼Œå¦‚æœä¼ å…¥çš„å€¼æ˜¯ xï¼Œé‚£ä¹ˆè¿”å›å€¼å°±æ˜¯ x * x ï¼Œå³ x çš„å¹³æ–¹å€¼ã€‚</p><p>è¿™é‡Œéœ€è¦ä½ æ³¨æ„ä¸¤ä¸ªæ¦‚å¿µï¼Œæˆ‘ä»¬å°† n ä¼ é€’ç»™å‡½æ•° square çš„è¿‡ç¨‹ä¸­ï¼Œä¼šæ¶‰åŠåˆ° n ç»™ square å‡½æ•°å‚æ•° x èµ‹å€¼çš„è¿‡ç¨‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸»å‡½æ•°ä¸­çš„ n å˜é‡å’Œ square å‡½æ•°å‚æ•° x å˜é‡æ˜¯ä¸¤ä¸ªç›¸äº’ç‹¬ç«‹çš„å˜é‡ï¼Œå…¶ä¸­ n å«åšâ€œå®å‚â€ï¼Œå®é™…çš„å‚æ•°ï¼Œx å«åšâ€œå½¢å‚â€ï¼Œå½¢å¼ä¸Šçš„å‚æ•°ã€‚</p><p>å…³äºè¿™ä¸ªä¾‹å­ï¼Œæˆ‘è¿˜è¦å¤šè¯´ä¸€å¥ï¼Œè¿˜è®°å¾—ç¨‹åºä¸­çš„é¡ºåºç»“æ„å§ï¼Œè¿™æ˜¯ç¨‹åºæœ€åŸºæœ¬çš„æ‰§è¡Œç»“æ„ï¼Œä¹Ÿå°±æ˜¯ä»å·¦åˆ°å³ï¼Œä»ä¸Šåˆ°ä¸‹çš„æ‰§è¡Œç¨‹åºä¸­çš„æ¯ä¸€æ¡è¯­å¥ã€‚å…¶å®ï¼Œå‡½æ•°å’Œå‡½æ•°ä¹‹é—´çš„å…³ç³»ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºè¿™ç§é¡ºåºæ‰§è¡Œçš„å…³ç³»ã€‚</p><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åœ¨ä¸»å‡½æ•°ä¸­è°ƒç”¨äº† square å‡½æ•°ï¼Œä¹Ÿå°±æ„å‘³ç€åœ¨è¿™å¥è¯ä¹‹å‰ï¼Œç¨‹åºä¸­å¿…é¡»çŸ¥é“ square å‡½æ•°çš„å­˜åœ¨ï¼Œå› æ­¤ square å‡½æ•°å®ç°åœ¨äº†ä¸»å‡½æ•°ä¹‹å‰ã€‚åé¢çš„æ–‡ç« ä¸­ï¼Œä½ å°†ä¼šå­¦åˆ°ï¼Œå…¶å® square å‡½æ•°ä¸ç”¨å®ç°åœ¨ä¸»å‡½æ•°ä¹‹å‰ä¹Ÿå¯ä»¥ï¼Œè¿™å°±è¦æ¶‰åŠåˆ°â€œå£°æ˜â€ä¸â€œå®šä¹‰â€çš„åŒºåˆ«äº†ï¼Œè¿™ä¸ªæˆ‘åé¢å†å’Œä½ è¯¦ç»†è§£é‡Šã€‚</p><h4>2. æ™®é€šå˜é‡çš„å‡½æ•°ä¼ é€’å‚æ•°</h4><p>äº†è§£äº†å‡½æ•°çš„åŸºæœ¬çŸ¥è¯†ä»¥åï¼Œæ¥ä¸‹æ¥è®©æˆ‘ä»¬é‡ç‚¹å­¦ä¹ ä¸€ä¸‹å‡½æ•°çš„å‚æ•°ä¼ é€’è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯ä¸Šæ–‡ä¸­æåˆ°çš„â€œå½¢å‚â€å’Œâ€œå®å‚â€ä¹‹é—´å…³ç³»çš„é—®é¢˜ã€‚æ¥ä¸‹æ¥çš„å­¦ä¹ ï¼Œæˆ‘ä»¬éƒ½æ˜¯å›´ç»•ç€ä¸€å¥è¯å±•å¼€çš„ï¼Œä½ å…ˆè®°ä½ï¼š<strong>å‡½æ•°çš„å‚æ•°ä¼ é€’è¿‡ç¨‹ï¼Œå°±æ˜¯â€œå®å‚â€ç»™â€œå½¢å‚â€èµ‹å€¼çš„è¿‡ç¨‹ï¼Œâ€œå®å‚â€ä¸â€œå½¢å‚â€ä¹‹é—´äº’ç›¸ç‹¬ç«‹ï¼Œäº’ä¸å½±å“ã€‚</strong></p><p>ä¸‹é¢å…ˆæ¥çœ‹ä¸€ä¸‹æ™®é€šå˜é‡çš„ä¼ é€’è¿‡ç¨‹ï¼Œè¯·çœ‹ä¸‹é¢è¿™æ®µç¨‹åºï¼š</p><pre><code>#include &lt;stdio.h&gt;\nvoid add(int n, int m) {\n    n += m;\n    return ;\n}\nint main() {\n    int n, m;\n    scanf(&quot;%d%d&quot;, &amp;n, &amp;m);\n    add(n, m);\n    printf(&quot;%d\\n&quot;, n);\n    return 0;\n}\n</code></pre><p>è¿™æ®µç¨‹åºä¸­ï¼Œé¦–å…ˆè¯»å…¥ä¸¤ä¸ªå˜é‡ n å’Œ m çš„å€¼ï¼Œç„¶åå°† n å’Œ m ä¼ é€’ç»™ä¸€ä¸ªåå« add çš„å‡½æ•°ï¼Œadd å‡½æ•°çš„ç›¸å…³å‚æ•°ä¹Ÿå« n å’Œ mï¼Œç„¶ååœ¨ add å‡½æ•°å†…éƒ¨ï¼Œå°† m ç´¯åŠ åˆ°äº† n ä¸Šé¢ï¼Œä¹‹åå‡½æ•°è¿”å›ç»“æŸï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚add å‡½æ•°æ‰§è¡Œå®Œåï¼Œå›åˆ°ä¸»å‡½æ•°ä¸­ï¼Œè¾“å‡º n çš„å€¼ã€‚æˆ‘çš„é—®é¢˜æ˜¯ï¼Œæ­¤æ—¶ï¼Œn çš„å€¼æœ‰æ²¡æœ‰å˜åŒ–ï¼Ÿ</p><p>å¦‚æœä½ å®é™…è¿è¡Œè¿™ä¸ªç¨‹åºï¼Œä½ ä¼šå‘ç°ï¼Œn çš„å€¼ä¸ä¼šæ”¹å˜ï¼Œè¿™å°±æ˜¯æˆ‘æƒ³è®©ä½ è®°ä½çš„é‚£å¥è¯ï¼Œå‡½æ•°çš„å‚æ•°ä¼ é€’è¿‡ç¨‹ï¼Œå°±æ˜¯â€œå®å‚â€ç»™â€œå½¢å‚â€èµ‹å€¼çš„è¿‡ç¨‹ã€‚</p><p>è¿™ä¸ªç¨‹åºä¸­ï¼Œä¸»å‡½æ•°ä¸­çš„å˜é‡ n å°±æ˜¯â€œå®å‚â€ï¼Œadd å‡½æ•°ä¸­çš„å‚æ•° n å°±æ˜¯â€œå½¢å‚â€ï¼Œè™½ç„¶ä¸¤è€…åå­—ä¸€æ ·ï¼Œå¯å®Œå…¨æ˜¯ä¸¤ä¸ªäº’ç›¸ç‹¬ç«‹çš„å˜é‡ã€‚</p><p>ä¸¤è€…æœ‰å„è‡ªçš„å­˜å‚¨ç©ºé—´ï¼Œâ€œå®å‚â€å°±æ˜¯æŠŠè‡ªå·±å­˜å‚¨ç©ºé—´ä¸­çš„å€¼ï¼Œå¤åˆ¶ä¸€ä»½ç»™äº†â€œå½¢å‚â€ï¼Œæ‰€ä»¥ï¼Œåœ¨å‡½æ•°å†…éƒ¨ï¼Œæˆ‘ä»¬å®é™…ä¿®æ”¹çš„æ˜¯â€œå½¢å‚â€ä¸­æ‰€å­˜å‚¨çš„å€¼ï¼Œå¯¹ä¸»å‡½æ•°ä¸­çš„å˜é‡ n æ¯«æ— å½±å“ã€‚æ•´ä¸ªè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br>\n<img src=\"https://static001.geekbang.org/resource/image/2b/ac/2be15931cddfb830bd07012c8d7aefac.jpg?wh=3267*1958\" alt=\"\" title=\"å›¾2ï¼šå®å‚ã€å½¢å‚èµ‹å€¼ç¤ºæ„å›¾\"></p><p>å¦‚å›¾æ‰€ç¤ºï¼Œadd å‡½æ•°å†…éƒ¨åšçš„æ‰€æœ‰æ“ä½œï¼Œéƒ½æ˜¯åœ¨é»„è‰²çš„å˜é‡å­˜å‚¨åŒºå†…åšçš„ï¼Œå¯¹ä¸»å‡½æ•°ä¸­çš„å˜é‡å­˜å‚¨åŒºæ¯«æ— å½±å“ã€‚</p><p>é‚£ä¹ˆå¦‚æœæˆ‘ä»¬æƒ³è¦æ”¹å˜næœ€åè¾“å‡ºçš„å€¼ï¼Œä½ çŸ¥é“è¿™ä¸ªç¨‹åºæ€ä¹ˆæ”¹åŠ¨å‘¢ï¼Ÿè¿™é‡Œï¼Œä½ éœ€è¦æ³¨æ„å¾€ä¸‹å­¦ä¹ ä»€ä¹ˆæ˜¯ä¼ å…¥å‚æ•°å’Œä¼ å‡ºå‚æ•°ã€‚</p><h4>3. æ•°ç»„çš„å‡½æ•°ä¼ å‚</h4><p>çœ‹äº†æ™®é€šå˜é‡çš„ä¼ å‚ä»¥åï¼Œä¸‹é¢æ¥çœ‹ä¸€ä¸‹æ•°ç»„ä½œä¸ºå‚æ•°æ—¶å€™çš„ä¼ å‚æ–¹å¼å’Œç‰¹æ€§ï¼Œè¯·çœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼š</p><pre><code>#include &lt;stdio.h&gt;\nvoid add(int *p, int n) {\n    for (int i = 1; i &lt; n; i++) {\n        p[0] += p[i];\n    }\n    return ;\n}\nint main() {\n    int arr[10] = {1, 2, 3};\n    add(arr, 3);\n    printf(&quot;%d&quot;, arr[0]);\n    return 0;\n}\n</code></pre><p>è¿™æ®µç¨‹åºä¸­ï¼Œä¸»å‡½æ•°å®šä¹‰äº†ä¸€ä¸ªæ‹¥æœ‰10ä¸ªæ•´å‹å…ƒç´ çš„æ•°ç»„ï¼Œç„¶åæ•°ç»„çš„å‰ä¸‰ä½åˆ†åˆ«åˆå§‹åŒ–ä¸º1ã€2ã€3ï¼Œä¹‹åå°†æ•°ç»„ä½œä¸º add å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°å­— 3ï¼Œadd å‡½æ•°çš„åŠŸèƒ½æ˜¯å°†ä¼ å…¥çš„æ•°ç»„ä¸­çš„å‰ n ä¸ªä½ç½®çš„å€¼ï¼Œç´¯åŠ åˆ°æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸Šã€‚åœ¨ add å‡½æ•°æ‰§è¡Œå®Œåï¼Œåœ¨ä¸»å‡½æ•°ä¸­è¾“å‡ºæ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ã€‚</p><p>å¯¹äºè¿™ä»½ä»£ç çš„è¾“å‡ºï¼Œä½ æœ‰ä»€ä¹ˆé¢„æµ‹ä¹ˆï¼Ÿåœ¨ä½ åšå‡ºé¢„æµ‹ä¹‹å‰ï¼Œæˆ‘æé†’ä½ æ³¨æ„ä¸€ä¸ªåœ°æ–¹ï¼Œå°±æ˜¯ add å‡½æ•°ä¸­è´Ÿè´£æ¥æ”¶æ•°ç»„å‚æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°çš„ç±»å‹ï¼Œæ˜¯ä¸€ä¸ªæŒ‡é’ˆç±»å‹ï¼Œè¿™é‡Œç»“åˆä¹‹å‰çš„çŸ¥è¯†å°±èƒ½ç†è§£äº†ã€‚æ•°ç»„åä¸€èˆ¬æƒ…å†µä¸‹ä»£è¡¨äº†æ•°ç»„çš„é¦–åœ°å€ï¼Œå°†ä¸€ä¸ªåœ°å€ä½œä¸ºå€¼ä¼ å…¥å‡½æ•°ï¼Œå½“ç„¶è¦ç”¨æŒ‡é’ˆå˜é‡æ¥è¿›è¡Œæ¥æ”¶äº†ã€‚</p><p>æœ€åï¼Œä½ è¿è¡Œè¿™æ®µç¨‹åºï¼Œä¼šå‘ç°è¾“å‡ºçš„ç»“æœæ˜¯ 6ï¼Œæ„å‘³ç€æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼å‘ç”Ÿäº†å˜åŒ–ã€‚å†æƒ³æƒ³ä»Šå¤©æˆ‘ä»¬è¦è®°ä½çš„é‚£å¥è¯ï¼š<strong>å‡½æ•°çš„å‚æ•°ä¼ é€’è¿‡ç¨‹ï¼Œå°±æ˜¯â€œå®å‚â€ç»™â€œå½¢å‚â€èµ‹å€¼çš„è¿‡ç¨‹ï¼Œâ€œå®å‚â€ä¸â€œå½¢å‚â€ä¹‹é—´äº’ç›¸ç‹¬ç«‹ï¼Œäº’ä¸å½±å“ã€‚</strong></p><p>ä¸æ˜¯è¯´äº’ç›¸ç‹¬ç«‹ä¹ˆï¼Œæ€ä¹ˆæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼å´æ”¹å˜äº†å‘¢ã€‚æ²¡é”™ï¼Œæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ç¡®å®åœ¨å‡½æ•°å†…éƒ¨è¢«æ”¹å˜äº†ï¼Œå¯è¿™è·Ÿâ€œå®å‚â€å’Œâ€œå½¢å‚â€çš„å…³ç³»å®Œå…¨æ²¡æœ‰å†²çªã€‚</p><p>è¯·ä½ æ³¨æ„ï¼Œè¿™é‡Œé¢æˆ‘ä»¬çš„â€œå®å‚â€ï¼Œå®é™…ä¸Šæ˜¯æ•°ç»„çš„é¦–åœ°å€ï¼Œå½¢å‚æ˜¯å­˜å‚¨è¿™ä¸ªé¦–åœ°å€çš„å‡½æ•°å‚æ•°ä¸­çš„é‚£ä¸ªæŒ‡é’ˆå˜é‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ add å‡½æ•°å†…éƒ¨ï¼Œæ“ä½œçš„åœ°å€ç©ºé—´ï¼Œå’Œä¸»å‡½æ•°ä¸­çš„é‚£ä¸ªæ•°ç»„çš„ç©ºé—´æ˜¯ä¸€ä¸ªç©ºé—´ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¼ é€’æ•°ç»„æ—¶ï¼Œç›¸å…³å…ƒç´ çš„å€¼åœ¨å‡½æ•°å†…éƒ¨å¯ä»¥è¢«æ”¹æ‰çš„ä¸€ä¸ªåŸå› ï¼Œå› ä¸ºä¼ é€’çš„æ˜¯åœ°å€ï¼<br>\n<img src=\"https://static001.geekbang.org/resource/image/01/cb/018c3fdadbe20ef95fa19997650bbecb.jpg?wh=3311*2131\" alt=\"\" title=\"å›¾3ï¼šæ•°ç»„ä¼ å‚è¿‡ç¨‹\"></p><p>å°±å¦‚å›¾3ä¸­æ‰€ç¤ºï¼Œä¸»å‡½æ•°ä¸­çš„æ•°ç»„ arr å°†è‡ªå·±çš„é¦–åœ°å€èµ‹å€¼ç»™äº†æŒ‡é’ˆå˜é‡ pï¼Œä¸¤è€…è™½ç„¶äº’ç›¸ç‹¬ç«‹ï¼Œå¯åªè¦ä¸æ”¹å˜æŒ‡é’ˆå˜é‡ p ä¸­å­˜å‚¨çš„åœ°å€ï¼Œp[0] å’Œ arr[0] å®é™…ä¸Šå¯¹åº”çš„å°±æ˜¯åŒä¸€ç‰‡å­˜å‚¨ç©ºé—´ï¼Œæ‰€ä»¥ä¿®æ”¹ p[0] çš„å€¼ï¼Œä¹Ÿç›¸å½“äºä¿®æ”¹äº† arr[0] çš„å€¼ã€‚</p><h4>4. ä¼ å…¥ä¸ä¼ å‡ºå‚æ•°</h4><p>å­¦ä¹ äº†å‡½æ•°çš„åŸºæœ¬çŸ¥è¯†ä»¥åï¼Œæœ€åè®©æˆ‘ä»¬æ¥çœ‹ä¸¤ä¸ªé€»è¾‘ä¸Šçš„æ¦‚å¿µâ€œä¼ å…¥å‚æ•°â€ä¸â€œä¼ å‡ºå‚æ•°â€ã€‚</p><p>è¯·çœ‹ä¸‹é¢è¿™æ®µç¨‹åºï¼š</p><pre><code>#include &lt;stdio.h&gt;\nvoid calc(int x, int *p) {\n    *p = x * x;\n    return ;\n}\nint main() {\n    int n, m;\n    scanf(&quot;%d&quot;, &amp;n);\n    calc(n, &amp;m);\n    printf(&quot;%d\\n&quot;, m);\n    return 0;\n}\n</code></pre><p>ä¸Šé¢è¿™æ®µç¨‹åºä¸­ï¼Œå¼€å§‹å…ˆå®šä¹‰äº†ä¸€ä¸ª calc å‡½æ•°ï¼Œcalc å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ä¸€ä¸ªæ•´å‹å‚æ•°ï¼Œç¬¬äºŒä¸ªæ˜¯ä¸€ä¸ªæ•´å‹åœ°å€ï¼Œå‡½æ•°å†…éƒ¨ï¼Œå°† x çš„å¹³æ–¹å€¼å­˜å‚¨åˆ°äº† p æ‰€æŒ‡å‘çš„å­˜å‚¨ç©ºé—´ä¸­ã€‚åœ¨ä¸»å‡½æ•°ä¸­è°ƒç”¨äº† calc å‡½æ•°ï¼Œåˆ†åˆ«ä¼ å…¥ n çš„å€¼å’Œ m çš„åœ°å€ï¼Œç„¶åè¾“å‡º m çš„å€¼ï¼Œæœ€åä½ ä¼šå‘ç°è¾“å‡ºçš„ m å€¼ï¼Œå°±æ˜¯ n çš„å¹³æ–¹å€¼ã€‚</p><p>åœ¨è¿™é‡Œæˆ‘ä»¬é‡ç‚¹æ¥è®¨è®ºä¸€ä¸‹å‡½æ•° calc ä¸¤ä¸ªå‚æ•°çš„æœ¬è´¨ä½œç”¨ã€‚é¦–å…ˆç¬¬ä¸€ä¸ªå‚æ•° xï¼Œæ˜¯å¤–éƒ¨ä¼ å…¥çš„ä¸€ä¸ªå€¼ï¼Œè¿™ä¸ªå€¼åœ¨å‡½æ•°å†…éƒ¨ï¼Œè¦å‚ä¸é‡è¦çš„è¿ç®—è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªå€¼çš„æ„Ÿè§‰æ›´åƒæ˜¯ä»å¤–éƒ¨ä¼ å…¥åˆ°å†…éƒ¨ï¼Œç„¶ååœ¨å‡½æ•°å†…éƒ¨å‘æŒ¥ä½œç”¨ï¼Œè¿™ç§ç±»å‹çš„å‚æ•°ï¼Œæˆ‘ä»¬å°±å«â€œä¼ å…¥å‚æ•°â€ã€‚</p><p>è€Œå†çœ‹ calc å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¼ å…¥çš„æ˜¯ä¸€ä¸ªåœ°å€ã€‚åœ¨å‡½æ•°å†…éƒ¨çš„ä½œç”¨ï¼Œåªæ˜¯å°†è®¡ç®—å¾—åˆ°çš„ä¸€äº›ç»“æœå­˜å‚¨åœ¨è¿™ä¸ªåœ°å€æ‰€æŒ‡å‘çš„ç©ºé—´ä¸­ï¼Œè€Œè®°å½•çš„è¿™äº›ç»“æœï¼Œåœ¨å‡½æ•°å†…éƒ¨æ˜¯æ²¡æœ‰ç”¨çš„ï¼Œæ˜¯è¦ç­‰åˆ°å‡½æ•°æ‰§è¡Œå®Œåï¼Œå›åˆ°è°ƒç”¨è€…ä¹‹åï¼Œä¾‹å¦‚ä¸Šé¢çš„ä¸»å‡½æ•°å†…éƒ¨ï¼Œæ‰æœ‰ç”¨ã€‚è¿™ä¸€ä¸ªå‚æ•°çš„ä½œç”¨ï¼Œæ›´åƒæ˜¯æŠŠå€¼ä» calc å†…éƒ¨å¸¦å‡ºåˆ°ä¸»å‡½æ•°å†…éƒ¨è€Œè®¾è®¡çš„ï¼Œè¿™ç±»å‚æ•°ï¼Œæˆ‘ä»¬å«åšâ€œä¼ å‡ºå‚æ•°â€ã€‚</p><p>å°±åƒä¸Šé¢ä»£ç ä¸­çœ‹åˆ°çš„ï¼Œâ€œä¼ å…¥å‚æ•°â€ä¸€èˆ¬å°±æ˜¯æŠŠå€¼ä¼ è¿›å»å°±è¡Œï¼Œè€Œâ€œä¼ å‡ºå‚æ•°â€ç”±äºè¦æŠŠå€¼ä»å‡½æ•°ä¸­å¸¦å‡ºæ¥ï¼Œä¸€èˆ¬è¦ä¼ å˜é‡åœ°å€è¿›å»ï¼Œè¿™æ ·ï¼Œå‡½æ•°å†…éƒ¨æ‰èƒ½å‡†ç¡®çš„æŠŠç»“æœå†™å…¥åˆ°ç›¸å…³åœ°å€æ‰€å¯¹åº”çš„å†…å­˜ä¸­ã€‚</p><h2>ä¸€èµ·åŠ¨æ‰‹ï¼Œæäº‹æƒ…</h2><p>æˆ‘ä»¬åˆåˆ°äº†æ¯å¤©çš„â€œä¸€èµ·åŠ¨æ‰‹ï¼Œæäº‹æƒ…â€çš„ç¯èŠ‚ï¼Œä»Šå¤©å‘¢ï¼Œå°†ç»™ä½ ç•™ä¸¤ä¸ªæ€è€ƒé¢˜ã€‚</p><h4>æ€è€ƒé¢˜ï¼ˆ1ï¼‰ï¼šæ•°ç»„å’Œå‡½æ•°çš„æ€è€ƒ</h4><p>è¯·æ€è€ƒå¦‚ä¸‹ä¸¤ä¸ªæ¦‚å¿µçš„å¼‚åŒï¼š</p><ol>\n<li>\n<p>ä¸€ä¸ªæ•´å‹æ•°ç»„å…ƒç´ ï¼Œä¾‹å¦‚ï¼šarr[100]</p>\n</li>\n<li>\n<p>ä¸€ä¸ªä¼ å…¥æ•´å‹å¹¶ä¸”è¿”å›æ•´å‹çš„å‡½æ•°ï¼Œä¾‹å¦‚ï¼šfunc(100)</p>\n</li>\n</ol><p>è¿™æ˜¯ä¸€ä¸ªå¼€æ”¾æ€è€ƒé¢˜ï¼Œå†™å‡ºä½ çš„ç†è§£åŠæ€è€ƒè¿‡ç¨‹å³å¯ã€‚</p><h4>æ€è€ƒé¢˜ï¼ˆ2ï¼‰ï¼šå¦‚ä½•ç¡®å®šå­˜åœ¨çŸ¥è¯†çš„ç›²åŒº</h4><p>ä»€ä¹ˆå«â€œå­˜åœ¨çŸ¥è¯†çš„ç›²åŒºâ€å‘¢ï¼Ÿå°±æ˜¯å½“ä½ é¢å¯¹ä¸€ç‰‡é»‘æš—çš„æ—¶å€™ï¼Œä½ å¯ä»¥ç¡®å®šè¿™é‡Œä¸€å®šæœ‰çŸ¥è¯†ï¼Œè€Œä¸ä»…ä»…åªæ˜¯ä¸€ç‰‡é»‘æš—ã€‚å°±åƒä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†å‡½æ•°çš„ç›¸å…³çŸ¥è¯†ï¼Œè‡ªç„¶çš„ï¼Œå°±ä¼šåé—®è‡ªå·±ä¸€å¥ï¼Œè¿™äº›å°±æ˜¯å‡½æ•°çŸ¥è¯†çš„å…¨éƒ¨äº†ä¹ˆï¼Ÿæˆ‘ä»¬å¦‚ä½•æ¥ç¡®å®šè¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆå‘¢ï¼Ÿå¾ˆç®€å•ï¼Œæ ¹æ®å·²çŸ¥æ¨æœªçŸ¥ã€‚</p><p>æˆ‘ä»¬å‡è®¾ç°åœ¨å­¦ä¹ çš„å†…å®¹ï¼Œå·²ç»æ˜¯å‡½æ•°çŸ¥è¯†çš„å…¨éƒ¨äº†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦æ˜¯å‡½æ•°ï¼Œæˆ‘ä»¬å°±èƒ½ç”¨æˆ‘ä»¬ç°æœ‰çŸ¥è¯†å¯¹å…¶åŠ ä»¥è§£é‡Šã€‚</p><p>é‚£ä¹ˆï¼Œåœ¨ä¹‹å‰ï¼Œæˆ‘ä»¬å·²çŸ¥çš„å‡½æ•°ä¸­ï¼Œæœ‰ä¸¤ä¸ªå¾ˆåŸºç¡€ï¼Œä¹Ÿå¾ˆé‡è¦çš„å‡½æ•°ï¼Œä¸€ä¸ªæ˜¯ scanf å‡½æ•°ï¼Œä¸€ä¸ªæ˜¯ printf å‡½æ•°ã€‚</p><p>éšä¾¿æ¥çœ‹ä¸€ä¸ªï¼Œä¾‹å¦‚æ¥çœ‹ scanf å‡½æ•°ï¼Œå½“æˆ‘é—®ä½ ï¼Œscanf å‡½æ•°ï¼Œä¼ å…¥å‡ ä¸ªå‚æ•°çš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°æ˜¯è‹¥å¹²ä¸ªã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¾€åçš„å‚æ•°ï¼Œæ˜¯æ ¹æ®å­—ç¬¦ä¸²ä¸­æ ¼å¼å ä½ç¬¦çš„æ•°é‡è€Œå®šçš„ã€‚åœ¨ä¸è¦æ±‚ä½ å®ç° scanf å‡½æ•°åŠŸèƒ½çš„æƒ…å†µä¸‹ï¼Œä½ èƒ½å°† scanf å‡½æ•°åŒ…å«å‚æ•°å®šä¹‰çš„å½¢å¼å†™å‡ºæ¥ä¹ˆï¼Ÿç›´åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å‘ç°äº†ä¸€ä¸ªå­˜åœ¨çŸ¥è¯†çš„ç›²åŒºã€‚</p><p>æ‰€ä»¥ï¼Œæ²¡æœ‰çŸ¥è¯†çš„ç›²åŒºï¼Œåªæ˜¯ç›²åŒºï¼Œå‘ç°æœ‰ä»·å€¼ç›²åŒºçš„èƒ½åŠ›ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬è¦é”»ç‚¼çš„é‡è¦èƒ½åŠ›ã€‚æ—¢ç„¶å‘ç°äº†è¿™ä¸ªçŸ¥è¯†ç›²åŒºï¼Œç»™ä½ ç•™ä¸ªå°ä½œä¸šï¼Œè‡ªå­¦â€œå¯å˜å‚å‡½æ•°â€ç›¸å…³çš„çŸ¥è¯†å§ã€‚</p><h2>å®ç° my_scanf å‡½æ•°</h2><p>å‡†å¤‡å®Œäº†å¯¹äºå‡½æ•°çš„åŸºç¡€çŸ¥è¯†ä»¥åï¼Œå†å›åˆ°ä»Šå¤©ä¸€å¼€å§‹æåˆ°çš„ä»»åŠ¡ã€‚é¦–å…ˆæ¥åˆ†æä¸€ä¸‹åªè½¬æ¢ä¸€ä¸ªæ•´å‹å‚æ•°çš„ my_scanf å‡½æ•°åº”è¯¥å¦‚ä½•è¿›è¡Œå®ç°ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹å‚æ•°è®¾è®¡ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„â€œä¼ å…¥å‚æ•°â€ï¼Œä»£è¡¨è¦è½¬æ¢æˆæ•´å‹ä¿¡æ¯çš„å­—ç¬¦ä¸²ä¿¡æ¯ã€‚ç¬¬äºŒä¸ªå‚æ•°ï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªæŒ‡é’ˆç±»å‹çš„â€œä¼ å‡ºå‚æ•°â€ï¼ŒæŒ‡å‘å­˜å‚¨è½¬æ¢ç»“æœçš„å†…å­˜åŒºåŸŸã€‚</p><p>å…·ä½“åŠŸèƒ½å®ç°ï¼Œè¯·çœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼š</p><pre><code>#include &lt;stdio.h&gt;\nvoid my_scanf(char *str, int *ret) {\n    int num = 0, flag = 0;\n    if (str[0] == '-') str += 1, flag = 1;\n    for (int i = 0; str[i]; i++) {\n        num = num * 10 + (str[i] - '0');\n    }\n    if (flag == 1) num = -num;\n    *ret = num;\n    return ;\n}\nint main() {\n    char str[1000];\n    int n = 65;\n    scanf(&quot;%s&quot;, str);\n    my_scanf(str, &amp;n);\n    printf(&quot;n = %d\\n&quot;, n);\n    return 0;\n}\n</code></pre><p>è¿™æ®µä»£ç ä¸­ï¼Œå®ç°äº† my_scanf å‡½æ•°ã€‚åœ¨çœ‹ my_scanf å‡½æ•°å…·ä½“é€»è¾‘ä¹‹å‰ï¼Œå…ˆæ¥çœ‹ä¸€ä¸‹ä¸»å‡½æ•°é‡Œé¢éƒ½å†™äº†äº›ä»€ä¹ˆã€‚</p><p>ä¸»å‡½æ•°çš„å¤´ä¸¤è¡Œå®šä¹‰äº†ä¸¤ä¸ªå˜é‡ï¼Œä¸€ä¸ªæ˜¯å­—ç¬¦æ•°ç»„ strï¼Œå¦å¤–æ˜¯ä¸€ä¸ªæ•´å‹å˜é‡ nï¼Œç„¶åè¯»å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå°†å…¶ä¿å­˜åœ¨å­—ç¬¦æ•°ç»„ä¸­ã€‚å†ä¹‹åï¼Œä½¿ç”¨ my_scanf å‡½æ•°å°†å­—ç¬¦æ•°ç»„ä¸­çš„å­—ç¬¦ä¸²ä¿¡æ¯ï¼Œè½¬æ¢æˆä¸ºæ•´å‹ä¿¡æ¯å­˜å‚¨åœ¨ n ä¸­ï¼Œæœ€åï¼Œä½¿ç”¨ printf å‡½æ•°è¾“å‡º n çš„å€¼ï¼ŒåŠ ä»¥ç¡®è®¤ã€‚</p><p>çœ‹å®Œäº†ä¸»å‡½æ•°ä»¥åï¼Œå†æ¥çœ‹ä¸€ä¸‹ my_scanf å‡½æ•°çš„å…·ä½“å®ç°ã€‚my_scanf å‡½æ•°ç¬¬ä¸€è¡Œå®šä¹‰äº†ä¸¤ä¸ªå˜é‡ï¼Œä¸€ä¸ªç”¨äºå­˜æ”¾è½¬æ¢ç»“æœçš„ num å˜é‡ï¼Œå¦ä¸€ä¸ª flag å˜é‡ç”¨æ¥æ ‡è®°æ­£è´Ÿæ•°çš„ï¼Œ0ä»£è¡¨æ­£æ•°ï¼Œ1ä»£è¡¨è´Ÿæ•°ã€‚</p><p>ç¬¬2è¡Œåˆ¤æ–­å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä½æ˜¯ä¸æ˜¯å­—ç¬¦ â€˜-â€™ï¼Œå¦‚æœæ˜¯å­—ç¬¦ â€˜-â€™ï¼Œå°±å°† flag æ ‡è®°ä¸º1ï¼Œå¹¶ä¸”æŠŠ str å­—ç¬¦æŒ‡é’ˆæ‰€æŒ‡çš„ä½ç½®ï¼Œå‘åè·³åŠ¨ä¸€ä½ï¼Œå› ä¸º â€˜-â€™ åé¢å°±æ˜¯è¦è½¬æ¢çš„ç¬¬ä¸€ä¸ªæ•°å­—å­—ç¬¦äº†ã€‚ä¹‹åéå†å­—ç¬¦ä¸²å‰©ä½™çš„æ¯ä¸€ä½ï¼Œæ¯æ¬¡å°†å½“å‰å­—ç¬¦æ‰€ä»£è¡¨çš„æ•°å­—ï¼Œæ”¾åˆ° num æ•°å­—çš„æœ«å°¾ã€‚</p><p>å…¶ä¸­ str[i] - â€˜0â€™ï¼Œå°±æ˜¯å°†ç›¸å…³çš„æ•°å­—å­—ç¬¦ï¼Œè½¬æ¢æˆå¯¹åº”çš„æ•°å­—ã€‚ä¹‹å‰æˆ‘ä»¬è¯´äº†ï¼Œä»»ä½•ä¸€ä¸ªä¿¡æ¯åœ¨åº•å±‚å­˜å‚¨çš„æ—¶å€™ï¼Œéƒ½æ˜¯äºŒè¿›åˆ¶ä¿¡æ¯è¡¨ç¤ºï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œéƒ½å¯ä»¥è½¬æ¢ä¸ºä¸€ä¸ªåè¿›åˆ¶æ•°å­—ï¼Œå­—ç¬¦ä¿¡æ¯ä¹Ÿä¸ä¾‹å¤–ã€‚å…¶ä¸­å­—ç¬¦ â€˜0â€™ æ‰€å¯¹åº”çš„åº•å±‚æ•°å­—æ˜¯48ï¼Œå­—ç¬¦ â€˜1â€™ æ˜¯ 49ï¼Œå­—ç¬¦ â€˜2â€™ æ˜¯ 50ï¼Œä¾æ¬¡ç±»æ¨ã€‚æ‰€ä»¥å½“æˆ‘ä»¬ç”¨ â€˜2â€™ - â€˜0â€™ çš„æ—¶å€™ï¼Œç›¸å½“äº50 - 48ï¼Œå¾—åˆ°çš„ç»“æœå°±æ˜¯æ•°å­— 2ã€‚</p><p>æœ€åæŠŠ num ä¸­çš„å€¼æ‹·è´åˆ° ret æ‰€æŒ‡å‘çš„å­˜å‚¨åŒºä¸­ï¼Œä¹Ÿå°±æ˜¯ä¸»å‡½æ•°ä¸­çš„ n å˜é‡çš„å†…å­˜åŒºä¸­ã€‚è‡³æ­¤æˆ‘ä»¬å°±å®Œæˆäº†ä¸€ä¸ªæ•´å‹å‚æ•°çš„ my_scanf å‡½æ•°çš„å®ç°ã€‚æ¥ä¸‹æ¥ï¼Œè¿ç”¨â€œå¯å˜å‚å‡½æ•°â€çš„ç›¸å…³çŸ¥è¯†ï¼Œæ”¹å†™è¿™ä¸ªç¨‹åºï¼Œå»ç‹¬ç«‹å®Œæˆæœ€ç»ˆå½¢æ€çš„ç¨‹åºå§ã€‚</p><h2>è¯¾ç¨‹å°ç»“</h2><p>ä»Šå¤©è®²çš„å†…å®¹å‘¢ï¼Œæ˜¯é‡Œç¨‹ç¢‘å¼çš„ä¸€è¯¾ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ å·²ç»å­¦ä¼šäº†å°†ç¨‹åºæ¨¡å—åŒ–çš„æœ€åŸºæœ¬æŠ€æœ¯ï¼šå‡½æ•°ã€‚ä¹Ÿæ˜¯ä»è¿™ä¸€è¯¾å¼€å§‹ï¼Œåé¢æˆ‘å°†è¶Šæ¥è¶Šå¤šçš„èµ·åˆ°å¼•å¯¼ä½ çš„ä½œç”¨ï¼Œé€æ¸å¸®ä½ æ’¤æ‰å­¦ä¹ ä¸­å¯¹æˆ‘çš„ä¾èµ–ï¼Œå¦‚æœåç»­å­¦ä¹ ä¸­é‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Œå’±ä»¬éšæ—¶åœ¨ç•™è¨€åŒºä¸­è®¨è®ºã€‚</p><p>æœ€åå‘¢ï¼Œæˆ‘æ¥ç»™ä½ æ€»ç»“ä¸€ä¸‹ä»Šå¤©è¯¾ç¨‹çš„é‡ç‚¹ï¼Œåªå¸Œæœ›ä½ è®°ä½ä¸‰ç‚¹ï¼š</p><ol>\n<li>å‡½æ•°çš„ä½œç”¨ï¼Œæ˜¯åšåŠŸèƒ½å°è£…ï¼Œä»¥ä¾¿åœ¨ç¨‹åºå…¶ä»–åœ°æ–¹å¤ç”¨ç›¸å…³åŠŸèƒ½ã€‚</li>\n<li>C è¯­è¨€ä¸­çš„å‡½æ•°çš„ä¼ å‚è¿‡ç¨‹ï¼Œæ˜¯å®å‚ç»™å½¢å‚èµ‹å€¼çš„è¿‡ç¨‹ï¼Œæ”¹å˜å½¢å‚çš„å€¼ï¼Œä¸ä¼šå½±å“å®å‚ã€‚</li>\n<li>åœ¨å‡½æ•°å‚æ•°è®¾è®¡ä¸­ï¼Œä¸€å®šè¦åˆ†æ¸…æ¥šï¼Œä¼ å…¥å‚æ•°å’Œä¼ å‡ºå‚æ•°åœ¨åŠŸèƒ½ä¸Šçš„å·®åˆ«ã€‚</li>\n</ol><p>å¥½äº†ï¼Œä»Šå¤©å°±åˆ°è¿™é‡Œäº†ï¼Œæˆ‘æ˜¯èƒ¡å…‰ï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p>","comments":[{"had_liked":false,"id":177655,"user_name":"ğŸ¤ªHappyJoo","can_delete":false,"product_type":"c1","uid":1234591,"ip_address":"","ucode":"96E1858F06BABA","user_header":"https://static001.geekbang.org/account/avatar/00/12/d6/9f/0213e8a0.jpg","comment_is_top":false,"comment_ctime":1581465367,"is_pvip":false,"replies":[{"id":"69087","content":"é¦–å…ˆä½ å¯¹äºå‡½æ•°å’Œæ•°ç»„çš„æ€è€ƒè¿™é‡Œï¼Œå·²ç»å¾ˆæ¥è¿‘æ ‡å‡†ç­”æ¡ˆäº†ï¼æ€è€ƒçš„å¾ˆåˆ°ä½ã€‚åé¢çš„ç­”ç–‘æ–‡ç« ä¸­ï¼Œä¼šè®²åˆ°ã€æ•°ç»„æ˜¯å±•å¼€çš„å‡½æ•°ï¼Œå‡½æ•°æ˜¯å‹ç¼©çš„æ•°ç»„ã€ã€‚<br><br>å…¶æ¬¡ï¼Œå¯¹äºä½ çš„é—®é¢˜ï¼š<br>ä¼ åœ°å€çš„è¯ï¼Œé‚£ä¹ˆåœ°å€å°±æ˜¯ä½ æ‰€ä¼ è¿›å»çš„é‚£ä¸ªå†…å®¹ã€‚<br>å‡½æ•°çš„å‚æ•°å˜é‡ï¼Œå’Œä½ å¤–éƒ¨è°ƒç”¨å‡½æ•°æ—¶å€™çš„å˜é‡ï¼Œå®é™…ä¸Šæ˜¯ä¸¤ä¸ªå˜é‡ã€‚æ— è®ºä½ ä¼ ä»€ä¹ˆå†…å®¹ï¼Œå‡½æ•°çš„å‚æ•°éƒ½æ˜¯ç‹¬ç«‹çš„ä¸€ä¸ªå˜é‡ï¼Œå°±ç®—ä½ ä¼ é€’çš„æ˜¯åœ°å€ï¼Œä¹Ÿä¸è¿‡æ˜¯æŠŠè¿™ä¸ªåœ°å€å€¼ï¼Œå­˜å‚¨åˆ°äº†å‡½æ•°å‚æ•°å˜é‡ä¸­ã€‚è€Œå‡½æ•°å†…éƒ¨ï¼Œæœ‰äº†è¿™ä¸ªåœ°å€å€¼ï¼Œå°±å¯ä»¥å‡†ç¡®çš„å¯¹åº”åˆ°ç›¸åº”çš„å­˜å‚¨åŒºï¼Œä»è€Œå¯ä»¥æ”¹å˜åœ°å€æ‰€å¯¹åº”å­˜å‚¨åŒºä¸­çš„å€¼ã€‚<br>å°±æ‹¿ä½ è¯´çš„ç±³æ¥ä¸¾ä¾‹å­ï¼Œä½ æœ‰ä¸€ä¸ªã€Aéº»è¢‹ã€‘é‡Œé¢è£…ç€ç±³ï¼Œéº»è¢‹å°±æ˜¯å˜é‡ï¼Œç±³å°±æ˜¯å˜é‡ä¸­çš„å†…å®¹ï¼Œç„¶åå‡½æ•°ä¼ å‚ï¼Œå°±ç›¸å½“äºä½ æŠŠã€A éº»è¢‹ã€‘å¤åˆ¶äº†ä¸€ä»½ï¼Œå¤åˆ¶æˆäº† ã€B éº»è¢‹ã€‘ï¼ŒB éº»è¢‹ï¼Œå°±æ˜¯å‡½æ•°å‚æ•°ï¼Œç„¶ååœ¨å‡½æ•°å†…éƒ¨ï¼Œæ— è®ºä½ æ€ä¹ˆå¯¹ B éº»è¢‹ä¸­çš„å†…å®¹åšä¿®æ”¹ï¼Œéƒ½ä¸ä¼šå½±å“ A éº»è¢‹çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":177655,"uid":"1374625","ip_address":"","utype":1,"ctime":1581595791,"user_name_real":"èƒ¡ç‚œç‡š"}],"discussion_count":1,"race_medal":0,"score":"27351269143","product_id":100043901,"comment_content":"æ€è€ƒé¢˜ä¸€ï¼š<br>åŒï¼š<br>1ï¼Œè¿”å›æ•´å‹<br>2ï¼Œå‡½æ•°éœ€è¦ä¼ å…¥å‚æ•°ï¼Œä½†æ˜¯æ•°ç»„åœ¨è¿™ä¸ªè§’åº¦çœ‹ï¼Œä¹Ÿæ˜¯éœ€è¦åœ¨[]ä¸­â€œä¼ å…¥å‚æ•°â€ï¼Œæµ‹è¯•äº†ä¸€ä¸‹ï¼Œæ•°ç»„çš„[]å¥½åƒæ˜¯ä¸èƒ½ç©ºç€çš„ï¼Œå‡½æ•°ç†è®ºä¸Šä¹Ÿæ˜¯ä¸èƒ½ç©ºç€çš„ã€‚<br>å¼‚ï¼š<br>1ï¼Œæ•°ç»„åªèƒ½ä¸€æ¬¡è¿”å›ä¸€ä¸ªï¼Œå‡½æ•°å¯ä»¥è¿”å›å¤šä¸ª<br>2ï¼Œæ•°ç»„å­˜å‚¨æ•´å‹ï¼Œå‡½æ•°éœ€è¦è¿›è¡Œå‡½æ•°å†…çš„æ­¥éª¤ç„¶åè¿”å›ï¼Œå®ƒæœ¬èº«ä¸å­˜å‚¨ã€‚ä¹Ÿå°±æ˜¯è¯´æ•°ç»„å ç”¨ç©ºé—´ï¼Œå‡½æ•°ä¸å ç”¨ï¼Ÿ<br>3ï¼Œä»æŸä¸ªè§’åº¦æ¥çœ‹ï¼Œæ•°ç»„çš„æ•°å€¼æ˜¯å›ºå®šçš„ï¼Œéƒ½æ˜¯ä½ äº‹å…ˆå­˜å‚¨è¿›å»ï¼Œç„¶åå–å‡ºï¼Œè€Œå‡½æ•°å¯ä»¥ä¿®æ”¹ï¼Œçœ‹ä½ æƒ³è¦ä»€ä¹ˆç»“æœï¼Œéƒ½å¯ä»¥ä¿®æ”¹å¾—åˆ°ï¼Œå¯å˜åŒ–ã€‚<br><br>é—®é¢˜ï¼š<br>â€œè€Œâ€œä¼ å‡ºå‚æ•°â€ç”±äºè¦æŠŠå€¼ä»å‡½æ•°ä¸­å¸¦å‡ºæ¥ï¼Œä¸€èˆ¬è¦ä¼ å˜é‡åœ°å€è¿›å»ï¼Œè¿™æ ·ï¼Œå‡½æ•°å†…éƒ¨æ‰èƒ½å‡†ç¡®çš„æŠŠç»“æœå†™å…¥åˆ°ç›¸å…³åœ°å€æ‰€å¯¹åº”çš„å†…å­˜ä¸­ã€‚â€<br>è€å¸ˆä½ å¥½ï¼Œä½ çš„è¯¾ç¨‹çœŸçš„å¤ªæ£’äº†ï¼Œè®²è§£çš„ä¹Ÿéå¸¸é€‚åˆé›¶åŸºç¡€çš„äººï¼Œæˆ‘ä»¥åå‘äººæ¨èå°±æ¨èè¿™é—¨è¯¾äº†å“ˆå“ˆå“ˆå“ˆ~è¯·é—®ä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆä¸€å®šè¦ä¼ å˜é‡åœ°å€å‘¢ï¼Ÿä¸èƒ½ç›´æ¥æ•´å‹è¿›å»æ•´å‹å‡ºæ¥å˜›ï¼Ÿä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥ä¼ å†…å®¹ï¼Œè€Œè¦ä¼ åœ°å€å‘¢ï¼Ÿä¼ å†…å®¹å°±ä¸å‡†ç¡®äº†ï¼Ÿæˆ–è€…æ•ˆç‡ä¸é«˜ï¼Ÿ<br><br>æŒ‰ç…§æˆ‘çš„ç†è§£ï¼Œå‡½æ•°å°±æ˜¯æ‹¿æ¥ç”¨çš„ï¼Œå‚æ•°è¿›å»ï¼Œç»è¿‡å‡½æ•°â€œæ•´æ”¹â€ï¼Œâ€œè®¡ç®—â€å‡ºæˆ‘æƒ³è¦çš„ä¸œè¥¿ï¼Œå†ä¼ å›æ¥ã€‚è¿™è¿›å»å’Œå‡ºæ¥çš„ä¸œè¥¿ï¼Œå½“ç„¶å’Œè¿™ä¸ªå‡½æ•°æ— å…³ï¼Œå°±å¥½åƒæˆ‘è¦æ¯ç­ä½ ä¸ä½ æ— å…³ï¼Œå“¦ä¸å¯¹ï¼Œå°±å¥½åƒç®—æ³•ä¸€æ ·ï¼Œæˆ‘æŠŠç”Ÿç±³æ”¾è¿›å»ï¼Œå®ƒæŠŠç†Ÿç±³åå‡ºæ¥ï¼Œä¸ç®¡æ˜¯ç”Ÿç±³è¿˜æ˜¯ç†Ÿç±³ï¼Œå’Œè¿™ä¸ªç”µé¥­ç…²æ˜¯æ²¡æœ‰å…³ç³»çš„ã€‚æ‰€ä»¥ä¸ºä»€ä¹ˆè¦æŠŠåœ°å€ä½œä¸ºå‚æ•°ä¼ å‡ºæ¥ï¼Œè€Œä¸æ˜¯ç›´æ¥æŠŠâ€œç±³â€ä¼ å›æ¥å‘¢ï¼Ÿ<br><br>è°¢è°¢è€å¸ˆ~","like_count":6,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"èƒ¡å…‰","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483498,"discussion_content":"é¦–å…ˆä½ å¯¹äºå‡½æ•°å’Œæ•°ç»„çš„æ€è€ƒè¿™é‡Œï¼Œå·²ç»å¾ˆæ¥è¿‘æ ‡å‡†ç­”æ¡ˆäº†ï¼æ€è€ƒçš„å¾ˆåˆ°ä½ã€‚åé¢çš„ç­”ç–‘æ–‡ç« ä¸­ï¼Œä¼šè®²åˆ°ã€æ•°ç»„æ˜¯å±•å¼€çš„å‡½æ•°ï¼Œå‡½æ•°æ˜¯å‹ç¼©çš„æ•°ç»„ã€ã€‚\n\nå…¶æ¬¡ï¼Œå¯¹äºä½ çš„é—®é¢˜ï¼š\nä¼ åœ°å€çš„è¯ï¼Œé‚£ä¹ˆåœ°å€å°±æ˜¯ä½ æ‰€ä¼ è¿›å»çš„é‚£ä¸ªå†…å®¹ã€‚\nå‡½æ•°çš„å‚æ•°å˜é‡ï¼Œå’Œä½ å¤–éƒ¨è°ƒç”¨å‡½æ•°æ—¶å€™çš„å˜é‡ï¼Œå®é™…ä¸Šæ˜¯ä¸¤ä¸ªå˜é‡ã€‚æ— è®ºä½ ä¼ ä»€ä¹ˆå†…å®¹ï¼Œå‡½æ•°çš„å‚æ•°éƒ½æ˜¯ç‹¬ç«‹çš„ä¸€ä¸ªå˜é‡ï¼Œå°±ç®—ä½ ä¼ é€’çš„æ˜¯åœ°å€ï¼Œä¹Ÿä¸è¿‡æ˜¯æŠŠè¿™ä¸ªåœ°å€å€¼ï¼Œå­˜å‚¨åˆ°äº†å‡½æ•°å‚æ•°å˜é‡ä¸­ã€‚è€Œå‡½æ•°å†…éƒ¨ï¼Œæœ‰äº†è¿™ä¸ªåœ°å€å€¼ï¼Œå°±å¯ä»¥å‡†ç¡®çš„å¯¹åº”åˆ°ç›¸åº”çš„å­˜å‚¨åŒºï¼Œä»è€Œå¯ä»¥æ”¹å˜åœ°å€æ‰€å¯¹åº”å­˜å‚¨åŒºä¸­çš„å€¼ã€‚\nå°±æ‹¿ä½ è¯´çš„ç±³æ¥ä¸¾ä¾‹å­ï¼Œä½ æœ‰ä¸€ä¸ªã€Aéº»è¢‹ã€‘é‡Œé¢è£…ç€ç±³ï¼Œéº»è¢‹å°±æ˜¯å˜é‡ï¼Œç±³å°±æ˜¯å˜é‡ä¸­çš„å†…å®¹ï¼Œç„¶åå‡½æ•°ä¼ å‚ï¼Œå°±ç›¸å½“äºä½ æŠŠã€A éº»è¢‹ã€‘å¤åˆ¶äº†ä¸€ä»½ï¼Œå¤åˆ¶æˆäº† ã€B éº»è¢‹ã€‘ï¼ŒB éº»è¢‹ï¼Œå°±æ˜¯å‡½æ•°å‚æ•°ï¼Œç„¶ååœ¨å‡½æ•°å†…éƒ¨ï¼Œæ— è®ºä½ æ€ä¹ˆå¯¹ B éº»è¢‹ä¸­çš„å†…å®¹åšä¿®æ”¹ï¼Œéƒ½ä¸ä¼šå½±å“ A éº»è¢‹çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581595791,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":174053,"user_name":"å¾æ´²æ›´","can_delete":false,"product_type":"c1","uid":1314643,"ip_address":"","ucode":"F8A323CB732D05","user_header":"https://static001.geekbang.org/account/avatar/00/14/0f/53/92a50f01.jpg","comment_is_top":false,"comment_ctime":1579930322,"is_pvip":true,"replies":[{"id":"67882","content":"ä¸é”™ï¼ä½œä¸šé¢˜ç›®åšçš„å¾ˆæ£’ã€‚å®Œå…¨è¾¾åˆ°äº†è‡ªå­¦çš„è¦æ±‚ï¼","user_name":"ä½œè€…å›å¤","comment_id":174053,"uid":"1374625","ip_address":"","utype":1,"ctime":1580314686,"user_name_real":"èƒ¡ç‚œç‡š"}],"discussion_count":1,"race_medal":0,"score":"18759799506","product_id":100043901,"comment_content":"çŸ¥è¯†ç‚¹:<br>1. å‡½æ•°çš„å®å‚å’Œå½¢å‚ï¼Œå½¢å‚ä¿®æ”¹ä¸ä¼šä¿®æ”¹å®å‚<br>2. ä¸ºäº†åœ¨å‡½æ•°ä¸­æ›´æ”¹å‡½æ•°å¤–çš„å‚æ•°ï¼Œå¯ä»¥ä¼ å…¥æŒ‡é’ˆï¼Œç›´æ¥ä¿®æ”¹å†…å­˜é‡Œçš„å†…å®¹<br>3. å¿«é€Ÿå°†&#39;0&#39;-&#39;9&#39;å­—ç¬¦è½¬æˆæ•°å­—0-9çš„æ–¹æ³•, &#39;9&#39; - &#39;0&#39;<br>4. æµå¤„ç†æ–¹å¼è½¬æ¢å­—ç¬¦ä¸²ä¸ºæ•°å­—, num = num * 10 + (str[i] - &#39;0&#39;)<br><br>é¢˜ç›®åšé¢˜è¿‡ç¨‹åœ¨GitHubä¸Šï¼Œ https:&#47;&#47;github.com&#47;xuzhougeng&#47;learn-c-in-JKSJ&#47;blob&#47;master&#47;jksj-09-myscanf","like_count":4,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"èƒ¡å…‰","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482283,"discussion_content":"ä¸é”™ï¼ä½œä¸šé¢˜ç›®åšçš„å¾ˆæ£’ã€‚å®Œå…¨è¾¾åˆ°äº†è‡ªå­¦çš„è¦æ±‚ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580314686,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200881,"user_name":"è½æ›¦","can_delete":false,"product_type":"c1","uid":1475039,"ip_address":"","ucode":"C70F7E2EDC3FD7","user_header":"https://static001.geekbang.org/account/avatar/00/16/81/df/066ffab3.jpg","comment_is_top":false,"comment_ctime":1585666713,"is_pvip":false,"replies":[{"id":"75183","content":"åªè¯´äº†ä»–ä¸¤çš„ä¸åŒç‚¹ï¼Œç›¸åŒç›¸åŒç‚¹å‘¢ï¼Ÿ","user_name":"ä½œè€…å›å¤","comment_id":200881,"uid":"1374625","ip_address":"","utype":1,"ctime":1585701477,"user_name_real":"èƒ¡ç‚œç‡š"}],"discussion_count":1,"race_medal":0,"score":"10175601305","product_id":100043901,"comment_content":"æ€è€ƒé¢˜ä¸€<br>ç¬¬ä¸€ä¸ªæ˜¯ç”³è¯·çš„å ç”¨è¿ç»­å†…å­˜ç©ºé—´çš„æ•°ç»„å…ƒç´ <br>ç¬¬äºŒä¸ªæ˜¯ç”³è¯·100ä¸ªæ•´å‹æ•°æ®ï¼Œå†…å­˜ç©ºé—´ä¸ä¸€å®šè¿ç»­<br>æ•°ç»„åªèƒ½ä¸€æ¬¡è¿”å›ä¸€ä¸ªï¼Œå‡½æ•°å¯ä»¥è¿”å›å¤šä¸ª","like_count":2,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"èƒ¡å…‰","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490164,"discussion_content":"åªè¯´äº†ä»–ä¸¤çš„ä¸åŒç‚¹ï¼Œç›¸åŒç›¸åŒç‚¹å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585701477,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":199862,"user_name":"å•ä½œæ™¶","can_delete":false,"product_type":"c1","uid":1929259,"ip_address":"","ucode":"FFBC25EAAC3BB3","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJibvQ9Dpib9EbP5P4OPIPDMcNW8dZGcAo5hhyKpm5uOibjIQz51M60U6c0V7Giaw4ic166ymjmsC3QTibg/132","comment_is_top":false,"comment_ctime":1585497128,"is_pvip":false,"replies":[{"id":"74851","content":"è¿™å°±æ˜¯æ–‡äººå¢¨å®¢å’¬æ–‡åš¼å­—çš„ä¸œè¥¿ã€‚ä¸è¿‡ä½ å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œæœ¬è´¨çš„æ¦‚å¿µï¼Œéƒ½æ”¾åˆ°åé¢ã€‚ä¾‹å¦‚ï¼Œæ•´å‹æ•°ç»„ï¼Œæœ¬è´¨æ˜¯ä¸ªæ•°ç»„ã€‚å‡½æ•°æŒ‡é’ˆï¼Œæœ¬è´¨æ˜¯ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆï¼ŒæŒ‡é’ˆå‡½æ•°ï¼Œæœ¬è´¨æ˜¯ä¸ªå‡½æ•°ï¼Œè¿”å›æŒ‡é’ˆç±»å‹çš„å‡½æ•°ï¼Œæ²¡å•¥ç‰¹åˆ«çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":199862,"uid":"1374625","ip_address":"","utype":1,"ctime":1585538603,"user_name_real":"èƒ¡ç‚œç‡š"}],"discussion_count":2,"race_medal":0,"score":"5880464424","product_id":100043901,"comment_content":"è€å¸ˆï¼Œæ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥ä»‹ç»ä¸‹å‡½æ•°æŒ‡é’ˆï¼ŸæŒ‡é’ˆå‡½æ•°ï¼Ÿè¿™ä¸ªæ¦‚å¿µä¸€ç›´æ²¡æœ‰ææ˜ç™½è¿‡~","like_count":1,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"èƒ¡å…‰","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489889,"discussion_content":"è¿™å°±æ˜¯æ–‡äººå¢¨å®¢å’¬æ–‡åš¼å­—çš„ä¸œè¥¿ã€‚ä¸è¿‡ä½ å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œæœ¬è´¨çš„æ¦‚å¿µï¼Œéƒ½æ”¾åˆ°åé¢ã€‚ä¾‹å¦‚ï¼Œæ•´å‹æ•°ç»„ï¼Œæœ¬è´¨æ˜¯ä¸ªæ•°ç»„ã€‚å‡½æ•°æŒ‡é’ˆï¼Œæœ¬è´¨æ˜¯ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆï¼ŒæŒ‡é’ˆå‡½æ•°ï¼Œæœ¬è´¨æ˜¯ä¸ªå‡½æ•°ï¼Œè¿”å›æŒ‡é’ˆç±»å‹çš„å‡½æ•°ï¼Œæ²¡å•¥ç‰¹åˆ«çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585538603,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1929259,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJibvQ9Dpib9EbP5P4OPIPDMcNW8dZGcAo5hhyKpm5uOibjIQz51M60U6c0V7Giaw4ic166ymjmsC3QTibg/132","nickname":"å•ä½œæ™¶","note":"","ucode":"FFBC25EAAC3BB3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":217594,"discussion_content":"å¥½çš„ï¼Œå¤šè°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585572451,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177109,"user_name":"rocedu","can_delete":false,"product_type":"c1","uid":1013097,"ip_address":"","ucode":"E46E29CBBB94A9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/69/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1581290115,"is_pvip":true,"replies":[{"id":"69093","content":"d(^_^o)","user_name":"ä½œè€…å›å¤","comment_id":177109,"uid":"1374625","ip_address":"","utype":1,"ctime":1581596126,"user_name_real":"èƒ¡ç‚œç‡š"}],"discussion_count":1,"race_medal":0,"score":"5876257411","product_id":100043901,"comment_content":"çœ‹å‡½æ•°å‚æ•°æ—¶ï¼Œåªè¦æ˜¯æŒ‡é’ˆç±»å‹ï¼Œå°±è¦æ³¨æ„æ˜¯ä¸æ˜¯è¾“å‡ºå‚æ•°äº†ã€‚å¦å¤–ï¼Œä¸ºä»€ä¹ˆè¦è¾“å‡ºå‚æ•°ï¼Œå¾ˆå¤šAPIçš„è¿”å›å€¼éƒ½æ˜¯é”™è¯¯ç ï¼Œ0è¡¨ç¤ºæˆåŠŸï¼Œå…¶ä»–è¡¨ç¤ºé”™è¯¯ç±»å‹ï¼ŒåŠŸèƒ½å€¼éœ€è¦é€šè¿‡è¾“å‡ºå‚æ•°ä¼ å‡ºæ¥ã€‚","like_count":1,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"èƒ¡å…‰","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483309,"discussion_content":"d(^_^o)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581596126,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356961,"user_name":"å°å‘€ä¹ˆå°äºŒéƒ","can_delete":false,"product_type":"c1","uid":1326905,"ip_address":"ä¸Šæµ·","ucode":"149540DCFDF43E","user_header":"https://static001.geekbang.org/account/avatar/00/14/3f/39/b1558fc9.jpg","comment_is_top":false,"comment_ctime":1662730052,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1662730052","product_id":100043901,"comment_content":"å‰åŠéƒ¨åˆ†æ‡‚äº†ï¼ŒååŠéƒ¨åˆ†ä¸å¤ªæ‡‚ï¼Œè¿‡ä¸¤å¤©å†å¤ä¹ ä¸€ä¸‹ï¼","like_count":0},{"had_liked":false,"id":298806,"user_name":"å¼ çº¢å¼º","can_delete":false,"product_type":"c1","uid":2665979,"ip_address":"","ucode":"3FF5A291B33E2D","user_header":"https://static001.geekbang.org/account/avatar/00/28/ad/fb/90e3104b.jpg","comment_is_top":false,"comment_ctime":1624330013,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624330013","product_id":100043901,"comment_content":"my_scanfå‡½æ•°é‡Œé¢çš„forå¾ªç¯ä»€ä¹ˆæ—¶å€™åœæ­¢å‘¢?æˆ‘æ²¡çœ‹æ‡‚","like_count":0},{"had_liked":false,"id":278972,"user_name":"peterkalven","can_delete":false,"product_type":"c1","uid":1274118,"ip_address":"","ucode":"74AF1D2A01E563","user_header":"https://static001.geekbang.org/account/avatar/00/13/71/06/e17159a9.jpg","comment_is_top":false,"comment_ctime":1613493876,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1613493876","product_id":100043901,"comment_content":"å®ç° my_scanf å‡½æ•°<br>#include &lt;stdio.h&gt;<br>#include &lt;stdarg.h&gt;<br>void my_scanf(char *str, ...){<br>        int *p;<br>        int num=0,flag=0;<br>        va_list pArgs;  &#47;&#47; init args<br>        va_start(pArgs,str);&#47;&#47; load various args<br>        p = va_arg(pArgs,int*);&#47;&#47;int pointer of the first various args<br>        int i;<br><br>        for(i=0;str[i];i++){ &#47;&#47; go through the str until \\0<br>                if(str[i] != &#39; &#39;){<br>                        if(str[i] == &#39;-&#39;){<br>                                flag = 1;<br>                                i++;<br>                        }<br>                        num = num * 10 + (str[i] - &#39;0&#39;);<br>                }else{<br>                        if(num != 0){<br>                                if(flag == 1){<br>                                        *p = -num;<br>                                        flag = 0;<br>                                }else{<br>                                        *p = num;<br>                                }<br>                                p = va_arg(pArgs,int*);<br>                        }<br>                        num = 0;<br>                }<br>        }<br><br>        if(flag == 1) {<br>                *p = -num;<br>        }else{<br>                *p = num;<br>        }<br><br>        va_end(pArgs);<br>        return;<br>}<br>int main(){<br>        int a,b,c;<br>        my_scanf(&quot;-123  &quot;,&amp;a);<br>        printf(&quot;%d\\n&quot;,a);<br>        my_scanf(&quot;   -123   456&quot;,&amp;a , &amp;b);<br>        printf(&quot;%d\\t%d\\n&quot;,a,b);<br>        my_scanf(&quot;-123 456       -789&quot;,&amp;a,&amp;b,&amp;c);<br>        printf(&quot;%d\\t%d\\t%d\\n&quot;,a,b,c);<br><br>        return 0;<br>}<br>","like_count":0},{"had_liked":false,"id":277053,"user_name":"ç§‹äº‘è§é›ªå¯’","can_delete":false,"product_type":"c1","uid":1166748,"ip_address":"","ucode":"C48428011AEAC2","user_header":"https://static001.geekbang.org/account/avatar/00/11/cd/9c/286271ed.jpg","comment_is_top":false,"comment_ctime":1612247687,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612247687","product_id":100043901,"comment_content":"æ·±å…¥æµ…å‡ºæ¸…æ™°æ˜äº†ï¼Œå­¦ä¹ äº†","like_count":0},{"had_liked":false,"id":251125,"user_name":"Geek_bcffeb","can_delete":false,"product_type":"c1","uid":2031914,"ip_address":"","ucode":"9AED847F90391C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Es78ParAxh5fkAVd1Cm9cvehF0rxMEKLbcAiaMBJQVxA4t0EJVWMxrjdicBe8ib5hJicerrKpokicmkLyj0qefC6M3w/132","comment_is_top":false,"comment_ctime":1601370788,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1601370788","product_id":100043901,"comment_content":"æƒ³äº†å¾ˆä¹…å®åœ¨æ— æ³•å®ç°ä»»æ„ä¸ªæ•´å‹å‚æ•°çš„è½¬æ¢ï¼Œä¸çŸ¥é“å¦‚ä½•å»å®šä¹‰ä»»æ„ä¸ªå‚æ•°<br>åªå®ç°äº†ä¸€ç§ç®€å•çš„ä»»æ„ï¼Œå³è®¾å®šä¸€ä¸ªæœ€å¤§çš„è½¬æ¢æ•°ç›®ï¼Œåœ¨è¿™ä¸ªè®¾å®šå€¼å†…ï¼Œä»»æ„ä¸ªæ•´å‹éƒ½å¯ä»¥å¾—åˆ°è½¬æ¢<br>#include&lt;stdio.h&gt;<br>#include&lt;stdarg.h&gt;<br>&#47;*<br>ä»¿ç…§scanfå‡½æ•°åŠŸèƒ½ï¼Œå®ç°ä¸€ä¸ªä½é…ç‰ˆçš„my_scanfå‡½æ•°ï¼š<br>å°†ä¸€ä¸ªå­—ç¬¦ä¸²ä¿¡æ¯è½¬æ¢æˆæ•´å‹æ•°å­—<br>*&#47;<br><br>int number =10;&#47;&#47;æœ€å¤šå¯è½¬æ¢10ä¸ªæ•´å‹<br>&#47;&#47;å®šä¹‰my_scanfå‡½æ•°<br>void my_scanf(char* str, ...)&#47;&#47;å¯å˜å‚æ•°éƒ½æ˜¯int * ç±»å‹<br>{<br>\tint* p;&#47;&#47;æ¥æ”¶å¯å˜å‚æ•°åœ°å€<br>\t&#47;&#47;å®šä¹‰va_listç±»å‹çš„æŒ‡é’ˆ<br>\tva_list ap;<br>\t&#47;&#47;åˆå§‹åŒ–apæŒ‡é’ˆï¼Œä½¿å…¶æŒ‡å‘ç¬¬ä¸€ä¸ªå¯å˜å‚æ•°<br>\tva_start(ap, str);<br>\t&#47;&#47;è¯¥å®è¿”å›å˜å‚åˆ—è¡¨ä¸­çš„å½“å‰å˜å‚å€¼å¹¶ä½¿apæŒ‡å‘åˆ—è¡¨ä¸­çš„ä¸‹ä¸ªå˜å‚<br>\tp = va_arg(ap, int*);<br>\twhile(number)<br>\t{<br>\t\tint shift_count = 0;&#47;&#47;ç§»ä½è®¡æ•°<br>\t\tint flag = 0;&#47;&#47;æ­£è´Ÿå·æ ‡å¿—<br>\t\tint num = 0;&#47;&#47;æ•°å­—<br>\t\tif (str[0] == &#39;-&#39;)<br>\t\t{<br>\t\t\tflag = 1;<br>\t\t\tstr = str + 1;<br>\t\t}<br>\t\tfor (int j = 0; (str[j] != &#39; &#39;)&amp;&amp;(str[j] !=&#39;\\0&#39; ); j++)<br>\t\t{<br>\t\t\tnum = num * 10 + (str[j] - &#39;0&#39;);<br>\t\t\tshift_count++;<br>\t\t}<br>\t\tstr = str +shift_count+1;&#47;&#47;é‡è®¾strçš„é¦–åœ°å€<br>\t\t&#47;&#47;print(&quot;%s\\n&quot;, str);<br>\t\tif (flag == 1)<br>\t\t{<br>\t\t\tnum = -num;<br>\t\t}<br>\t\t&#47;&#47;printf(&quot;%d\\n&quot;, num);<br>\t\t*p = num;<br>\t\tp = va_arg(ap, int*);&#47;&#47;è®©pæŒ‡å‘ä¸‹ä¸€ä¸ªå˜å‚æ•°<br>\t\tnumber = number - 1;<br>\t}<br>\tva_end(ap);<br>\treturn;<br>}<br><br>int main()<br>{<br><br>\t&#47;&#47;æ ¹æ®numberå®šä¹‰æ•´å‹å˜é‡<br>\tint a, b, c, d, e, f, g, h, k, m, n, o, p, q, r, s, t, u, v, w, x, y, z;<br>\tprintf(&quot;è¯·è¾“å…¥å¸¦æœ‰å¤§äºç­‰äº%dä¸ªç©ºæ ¼çš„æ•°å­—å­—ç¬¦ä¸²ï¼š&quot;,number-1);<br>\t&#47;&#47;è¾“å…¥è¦è½¬æ¢çš„å­—ç¬¦ä¸²<br>\tchar str[100];<br>\t<br>\t&#47;&#47;æ£€æŸ¥è¾“å…¥æ˜¯å¦ç¬¦åˆè§„åˆ™<br>\twhile (1)<br>\t{<br>\t\tgets(str);&#47;&#47;å¯ä»¥æ¥æ”¶å¸¦ç©ºæ ¼çš„å­—ç¬¦ä¸²ï¼Œç›´åˆ°å›è½¦ç»“æŸè¾“å…¥<br>\t\t&#47;&#47;å­—ç¬¦ä¸²ä¸­ç©ºæ ¼çš„æ•°ç›®<br>\t\tint really_number = 0;<br>\t\tfor (int i = 0; str[i] != &#39;\\0&#39;; i++)<br>\t\t{<br>\t\t\tif (str[i] == &#39; &#39;)<br>\t\t\t{<br>\t\t\t\treally_number++;<br>\t\t\t}<br>\t\t}<br>\t\tif (really_number &lt; (number - 1))<br>\t\t{<br>\t\t\tprintf(&quot;è¾“å…¥ä¸ç¬¦åˆè§„å®šï¼Œè¯·é‡æ–°è¾“å…¥ï¼š&quot;);<br>\t\t}<br>\t\telse<br>\t\t{<br>\t\t\tbreak;<br>\t\t}<br>\t}<br>\tmy_scanf(str, &amp;a, &amp;b, &amp;c,&amp;d,&amp;e,&amp;f, &amp;g, &amp;h, &amp;k, &amp;m);<br>\tprintf(&quot;%d %d %d %d %d %d %d %d %d %d\\n&quot;, a, b, c,d, e, f, g, h, k, m);<br>\tprintf(&quot;============================\\n&quot;);<br>\tmy_scanf(str, &amp;a, &amp;b, &amp;c,&amp; d, &amp;e, &amp;f);<br>\tprintf(&quot;%d %d %d %d %d %d\\n&quot;, a, b, c,d,e,f);<br>\tprintf(&quot;============================\\n&quot;);<br>\treturn 0;<br>}<br>&#47;*<br>è¯·è¾“å…¥å¸¦æœ‰å¤§äºç­‰äº9ä¸ªç©ºæ ¼çš„æ•°å­—å­—ç¬¦ä¸²ï¼š-12 -23 -34 -45 56 -67 78 89<br>è¾“å…¥ä¸ç¬¦åˆè§„å®šï¼Œè¯·é‡æ–°è¾“å…¥ï¼š-12 -23 -34 -45 56 -67 78 89 98<br>è¾“å…¥ä¸ç¬¦åˆè§„å®šï¼Œè¯·é‡æ–°è¾“å…¥ï¼š-12 -23 -34 -45 56 -67 78 89 98 -100<br>-12 -23 -34 -45 56 -67 78 89 98 -100<br>============================<br>-12 -23 -34 -45 56 -67<br>============================<br>*&#47;<br>","like_count":0},{"had_liked":false,"id":220022,"user_name":"ç½—è€€é¾™@åå¿˜","can_delete":false,"product_type":"c1","uid":1917663,"ip_address":"","ucode":"3CEA258DE7F3C7","user_header":"https://static001.geekbang.org/account/avatar/00/1d/42/df/a034455d.jpg","comment_is_top":false,"comment_ctime":1590137088,"is_pvip":true,"replies":[{"id":"83524","content":"å†æƒ³ä¸€æƒ³ï¼Œå‡½æ•°æ‰€è°“çš„åŸºæœ¬åŠŸèƒ½ï¼Œå¯¹äºæˆ‘ä»¬æ¥è¯´çœŸå¾—é‡è¦ä¹ˆï¼Ÿæˆ‘ä»¬å…¶å®åªå…³å¿ƒï¼Œå‡½æ•°ä¼ å…¥ä»€ä¹ˆå‚æ•°ï¼Œè¿”å›å€¼æ˜¯ä»€ä¹ˆå«ä¹‰ã€‚æ•°ç»„å‘¢ï¼Ÿæˆ‘ä»¬åªå…³å¿ƒï¼Œæ•°ç»„ç›¸åº”ä¸‹æ ‡é‡Œé¢è®°å½•çš„å€¼æ˜¯ä»€ä¹ˆå«ä¹‰ã€‚","user_name":"ä½œè€…å›å¤","comment_id":220022,"uid":"1374625","ip_address":"","utype":1,"ctime":1592214048,"user_name_real":"èƒ¡ç‚œç‡š"}],"discussion_count":1,"race_medal":5,"score":"1590137088","product_id":100043901,"comment_content":"èŒ¶è‰ºå¸ˆå­¦ç¼–ç¨‹<br><br>1ã€<br>æ€»äºææ˜ç™½äº†æ–‡ä¸­çš„â€œæ™®é€šå˜é‡ä¼ é€’â€ä¾‹å­å…¶ä¸­çš„ï¼Œæå‡ºäº†ä¸ªå¯ä»¥ä¼ é€’æ•°å€¼çš„ç‰ˆæœ¬â€¦â€¦<br><br>#include &lt;stdio.h&gt;<br><br>int add(int n,int m){ &#47;&#47;è¿™é‡Œè¦æ”¹ä¸ºæœ‰è¿”å›å€¼ç±»å‹<br><br>Â Â Â Â n += m;<br><br>Â Â Â Â return n ; &#47;&#47;è¿”å›n<br><br>}<br><br>int main(){<br><br>Â Â Â Â int n, m;<br><br>Â Â Â Â scanf(&quot;%d%d&quot;, &amp;n, &amp;m);<br><br>Â Â Â Â printf(&quot;%d\\n&quot;, add(n ,m)); &#47;&#47;è°ƒç”¨ä¸Šé¢çš„addå‡½æ•°<br><br>Â Â Â Â return 0;<br><br>}<br><br>2ã€<br><br>æ€è€ƒé¢˜1ï¼š<br><br>å…±åŒç‚¹ï¼Œä¸¤è€…æ ·å­ç›¸ä¼¼<br><br>ä¸åŒç‚¹ï¼Œå‰è€…ä»…ä»…æ˜¯ä¸€ä¸ªâ€œç‰‡æ®µâ€ï¼Œåè€…åˆ™æ˜¯å…·å¤‡æŸåŸºæœ¬åŠŸèƒ½çš„â€œå°ä¸ªä½“â€ã€‚<br><br>æ€è€ƒé¢˜2ï¼š<br><br>scanf<br><br>int scanf(char *format[,argument,...]);<br>scanf(&quot;&lt;æ ¼å¼åŒ–å­—ç¬¦ä¸²&gt;&quot;ï¼Œ&lt;åœ°å€è¡¨&gt;);<br>scanf()å‡½æ•°è¿”å›æˆåŠŸèµ‹å€¼çš„æ•°æ®é¡¹æ•°ï¼Œå‡ºé”™æ—¶åˆ™è¿”å›EOFã€‚<br>","like_count":0,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"èƒ¡å…‰","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496027,"discussion_content":"å†æƒ³ä¸€æƒ³ï¼Œå‡½æ•°æ‰€è°“çš„åŸºæœ¬åŠŸèƒ½ï¼Œå¯¹äºæˆ‘ä»¬æ¥è¯´çœŸå¾—é‡è¦ä¹ˆï¼Ÿæˆ‘ä»¬å…¶å®åªå…³å¿ƒï¼Œå‡½æ•°ä¼ å…¥ä»€ä¹ˆå‚æ•°ï¼Œè¿”å›å€¼æ˜¯ä»€ä¹ˆå«ä¹‰ã€‚æ•°ç»„å‘¢ï¼Ÿæˆ‘ä»¬åªå…³å¿ƒï¼Œæ•°ç»„ç›¸åº”ä¸‹æ ‡é‡Œé¢è®°å½•çš„å€¼æ˜¯ä»€ä¹ˆå«ä¹‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592214048,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":203340,"user_name":"1043","can_delete":false,"product_type":"c1","uid":1485365,"ip_address":"","ucode":"AAA69CC175AEE3","user_header":"https://static001.geekbang.org/account/avatar/00/16/aa/35/1a4884f9.jpg","comment_is_top":false,"comment_ctime":1586177135,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1586177135","product_id":100043901,"comment_content":"å®å‚æ˜¯è®¡ç®—â€œç®—æ•°â€å®šåˆ¶çš„è§„åˆ™ï¼Œå½¢å‚æ˜¯æŒ‰ç…§è§„åˆ™å»è®¡ç®—ï¼Œå½¢å‚åªèƒ½å—é™äºå®å‚çš„æ¡†æ¶æ³•åˆ™ï¼Œè€Œæ²¡æœ‰å»æ”¹å˜å’Œå½±å“å®å‚çš„æ¡ä»¶å’Œç¯å¢ƒã€‚æ¯”å¦‚ï¼Œå®å‚å®šä¹‰æ­¤è®¡ç®—ä¸ºå››åˆ™æ··åˆè¿ç®—ï¼Œå½¢å‚å°±åªèƒ½æ ¹æ®è§„åˆ™å…ˆç®—ä¹˜é™¤åç®—åŠ å‡æœ‰æ‹¬å·å…ˆç®—æ‹¬å·å†…è®¡ç®—ã€‚","like_count":0},{"had_liked":false,"id":202548,"user_name":"åˆ˜ä¼Ÿ","can_delete":false,"product_type":"c1","uid":1912151,"ip_address":"","ucode":"BC187D799559AF","user_header":"","comment_is_top":false,"comment_ctime":1586006058,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586006058","product_id":100043901,"comment_content":"åœ¨å‡½æ•°å‚æ•°è®¾è®¡ä¸­ï¼Œä¸€å®šè¦åˆ†æ¸…æ¥šï¼Œä¼ å…¥å‚æ•°å’Œä¼ å‡ºå‚æ•°åœ¨åŠŸèƒ½ä¸Šçš„å·®åˆ«ã€‚","like_count":0},{"had_liked":false,"id":181757,"user_name":"Aureliano","can_delete":false,"product_type":"c1","uid":1691411,"ip_address":"","ucode":"42F2492C9D7E47","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/4Xxu0PA1ibxeUSMrKBpEIB1HO10zY1AKossJrO9ajJIGAd3uibGvUlVPtrP5KOjaFH15TkWwKjmJKicHADtZcHEWQ/132","comment_is_top":false,"comment_ctime":1582628944,"is_pvip":false,"replies":[{"id":"70426","content":"d(^_^o)å¾ˆä¸é”™ï¼","user_name":"ä½œè€…å›å¤","comment_id":181757,"uid":"1374625","ip_address":"","utype":1,"ctime":1582654309,"user_name_real":"èƒ¡ç‚œç‡š"}],"discussion_count":1,"race_medal":0,"score":"1582628944","product_id":100043901,"comment_content":"è€å¸ˆï¼Œå¯å˜å‚æ•°ä»£ç å¦‚ä¸‹ï¼š<br>#include&lt;stdio.h&gt;<br>#include&lt;stdarg.h&gt;<br><br>void myscan(char* string,...){<br>\tint *p=NULL;<br>\tint flag=0;<br>\tint num=0;<br>\tint i=0;<br> <br>\tva_list pa;<br>\tva_start(pa,string);<br>\tp=va_arg(pa,int*);<br><br>        for(;string[i]!=&#39;\\0&#39;;i++){<br>\t\tif(string[i]==&#39; &#39;){<br>\t\t\tif(flag==1){<br>\t\t\t\t*p=-num;<br>\t\t\t}else{<br>\t\t\t       \t*p=num;<br>\t\t\t}<br>\t\t\tnum=0;<br>\t\t\tflag=0;<br>\t\t\tp=va_arg(pa,int*);<br>\t\t}else{<br>\t\t\tif(string[i]==&#39;-&#39;){<br>\t\t\t\tflag=1;<br>\t\t\t}else{<br>\t\t\t\tnum=num*10+string[i]-&#39;0&#39;;<br>\t\t\t}<br>\t\t}<br>\t}<br>\tif(flag==1) {<br>\t\t*p=-num;<br>\t}<br>\telse{<br>\t       \t*p=num;<br>\t}<br>\tva_end(pa);<br>\treturn;<br>}<br><br>int main(){<br>     int m,n,k;<br>     myscan(&quot;123&quot;,&amp;n);<br>     printf(&quot;%d\\n&quot;,n);<br>     myscan(&quot;123 -456&quot;,&amp;m,&amp;k);<br>     printf(&quot;%d\\t%d\\n&quot;,m,k);<br>     return 0;<br>}","like_count":0,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"èƒ¡å…‰","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485109,"discussion_content":"d(^_^o)å¾ˆä¸é”™ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582654309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177769,"user_name":"ä¿¡å¿µ","can_delete":false,"product_type":"c1","uid":1673076,"ip_address":"","ucode":"3D32CA6E096CF8","user_header":"https://static001.geekbang.org/account/avatar/00/19/87/74/68c35700.jpg","comment_is_top":false,"comment_ctime":1581495776,"is_pvip":false,"replies":[{"id":"69083","content":"å› ä¸ºåœ¨ä¸»å‡½æ•°ä¸­ï¼Œè°ƒç”¨ my_scanf å‡½æ•°çš„æ—¶å€™ï¼Œä¼ å…¥çš„æ˜¯ n å˜é‡çš„åœ°å€å•Šã€‚","user_name":"ä½œè€…å›å¤","comment_id":177769,"uid":"1374625","ip_address":"","utype":1,"ctime":1581594828,"user_name_real":"èƒ¡ç‚œç‡š"}],"discussion_count":1,"race_medal":0,"score":"1581495776","product_id":100043901,"comment_content":"è¯·é—®ä¸€ä¸‹ï¼Œåœ¨è€å¸ˆçš„æœ€åä¸€ä¸ªæ–‡æœ¬ä¸­ï¼Œretæ‰€æŒ‡å‘çš„å­˜å‚¨åŒºä¸ºä»€ä¹ˆæ˜¯ä¸»å‡½æ•°ä¸­nå˜é‡çš„å†…å­˜åŒºå‘¢ï¼Ÿæ€ä¹ˆçœ‹å‡ºæ¥çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"èƒ¡å…‰","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483532,"discussion_content":"å› ä¸ºåœ¨ä¸»å‡½æ•°ä¸­ï¼Œè°ƒç”¨ my_scanf å‡½æ•°çš„æ—¶å€™ï¼Œä¼ å…¥çš„æ˜¯ n å˜é‡çš„åœ°å€å•Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581594828,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176876,"user_name":"ä¿¡å¿µ","can_delete":false,"product_type":"c1","uid":1673076,"ip_address":"","ucode":"3D32CA6E096CF8","user_header":"https://static001.geekbang.org/account/avatar/00/19/87/74/68c35700.jpg","comment_is_top":false,"comment_ctime":1581212393,"is_pvip":false,"replies":[{"id":"68670","content":"ä½ è¯¯ä¼šäº†ï¼Œæˆ‘çš„é‚£æ®µä»£ç æ˜¯è¯´æ˜my_scanfå‡½æ•°çš„åŠŸèƒ½çš„ã€‚è€Œæ²¡æœ‰my_scanfå‡½æ•°çš„å…·ä½“å®ç°ï¼Œåªæœ‰åŠ ä¸Šäº†å…·ä½“å®ç°ä»¥åï¼Œä»£ç æ‰èƒ½é€šè¿‡ç¼–è¯‘ã€‚<br>","user_name":"ä½œè€…å›å¤","comment_id":176876,"uid":"1374625","ip_address":"","utype":1,"ctime":1581240113,"user_name_real":"èƒ¡ç‚œç‡š"}],"discussion_count":2,"race_medal":0,"score":"1581212393","product_id":100043901,"comment_content":"#include&lt;stdio.h&gt;<br>int main(){<br>  int n = 98;<br>  my_scanf(&quot;12345&quot;, &amp;n);<br>  printf(&quot;%d&quot;, n); &#47;&#47; è¾“å‡º 12345ï¼Œè€Œä¸æ˜¯ 98<br>return 0;<br>}<br>è¿™æ˜¯è€å¸ˆæ‚¨çš„ç¨‹åºï¼Œä½†æ˜¯åœ¨æˆ‘ç¼–è¯‘æ—¶å‡ºç°äº†é—®é¢˜ï¼Œé—®é¢˜å¦‚ä¸‹ï¼Œéº»çƒ¦è€å¸ˆçœ‹ä¸€ä¸‹ï¼š<br>test35.cpp: In function â€˜int main()â€™:<br>test35.cpp:4:3: error: â€˜my_scanfâ€™ was not declared in this scope<br>   my_scanf(&quot;12345&quot;, &amp;n);<br>   ^~~~~~~~<br>test35.cpp:4:3: note: suggested alternative: â€˜vsscanfâ€™<br>   my_scanf(&quot;12345&quot;, &amp;n);<br>   ^~~~~~~~<br>   vsscanf<br>å¥½åƒæ˜¯è¯´æ²¡æœ‰å£°æ˜my_scanf<br>","like_count":0,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"èƒ¡å…‰","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483232,"discussion_content":"ä½ è¯¯ä¼šäº†ï¼Œæˆ‘çš„é‚£æ®µä»£ç æ˜¯è¯´æ˜my_scanfå‡½æ•°çš„åŠŸèƒ½çš„ã€‚è€Œæ²¡æœ‰my_scanfå‡½æ•°çš„å…·ä½“å®ç°ï¼Œåªæœ‰åŠ ä¸Šäº†å…·ä½“å®ç°ä»¥åï¼Œä»£ç æ‰èƒ½é€šè¿‡ç¼–è¯‘ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581240113,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1673076,"avatar":"https://static001.geekbang.org/account/avatar/00/19/87/74/68c35700.jpg","nickname":"ä¿¡å¿µ","note":"","ucode":"3D32CA6E096CF8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":164951,"discussion_content":"å“¦ï¼Œæ˜ç™½äº†ï¼Œè°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581242218,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":175139,"user_name":"å°æ—coding","can_delete":false,"product_type":"c1","uid":1303210,"ip_address":"","ucode":"D57D7DBF260216","user_header":"https://static001.geekbang.org/account/avatar/00/13/e2/aa/9ddc6469.jpg","comment_is_top":false,"comment_ctime":1580568287,"is_pvip":true,"replies":[{"id":"68021","content":"å¯ä»¥æ‰“80åˆ†ï¼Œç¨å¾®æœ‰ç‚¹å„¿ç¼ºæ†¾çš„å°±æ˜¯ï¼šæ²¡æœ‰è€ƒè™‘è´Ÿæ•°çš„æƒ…å†µå“¦ã€‚d(^_^o)","user_name":"ä½œè€…å›å¤","comment_id":175139,"uid":"1374625","ip_address":"","utype":1,"ctime":1580612571,"user_name_real":"èƒ¡ç‚œç‡š"}],"discussion_count":2,"race_medal":0,"score":"1580568287","product_id":100043901,"comment_content":"è€å¸ˆï¼Œæˆ‘çš„å¯å˜å‚æ•°çš„myScanfå‡½æ•°<br>ä»£ç ï¼š<br>#include &lt;iostream&gt;<br>#include &lt;stdarg.h&gt;<br><br>void myScanf(const char *format, int *pInt, ...) {<br>    va_list ap;<br>    int *p = NULL;<br>    int num = 0;<br>    int cnt = 0;<br><br>    va_start(ap, pInt);<br><br>    while (*format) {<br>        if (*format == &#39; &#39;) {<br>            if (cnt == 0) {<br>                *pInt = num;<br>            } else {<br>                p = va_arg(ap, int*);<br>                *p = num;<br>            }<br>            num = 0;<br>            cnt++;<br>        } else {<br>            num = num * 10 + *format - &#39;0&#39;;<br>        }<br><br>        format++;<br>    }<br><br>    p = va_arg(ap, int*);<br>    *p = num;<br><br>    va_end(ap);<br>}<br><br>int main() {<br>    int n, m, j;<br>    myScanf(&quot;123 456 789&quot;, &amp;n, &amp;m, &amp;j);<br>    std::cout &lt;&lt; n &lt;&lt; &quot; &quot; &lt;&lt; m &lt;&lt; &quot; &quot; &lt;&lt; j &lt;&lt; std::endl;<br>    return 0;<br>}<br><br>è¾“å‡ºï¼š<br>123 456 789","like_count":0,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"èƒ¡å…‰","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482631,"discussion_content":"å¯ä»¥æ‰“80åˆ†ï¼Œç¨å¾®æœ‰ç‚¹å„¿ç¼ºæ†¾çš„å°±æ˜¯ï¼šæ²¡æœ‰è€ƒè™‘è´Ÿæ•°çš„æƒ…å†µå“¦ã€‚d(^_^o)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580612571,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1303210,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e2/aa/9ddc6469.jpg","nickname":"å°æ—coding","note":"","ucode":"D57D7DBF260216","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158682,"discussion_content":"è°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580614292,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}