{"id":93044,"title":"09 | CAPå®šç†ï¼šä¸‰é€‰äºŒï¼Œæ¶æ„å¸ˆå¿…é¡»å­¦ä¼šçš„å–èˆ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯è”¡å…ƒæ¥ ã€‚</p><p>ä»Šå¤©æˆ‘è¦ä¸ä½ åˆ†äº«çš„ä¸»é¢˜æ˜¯CAPå®šç†ã€‚</p><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸¤è®²ä¸­ï¼Œæˆ‘ä»¬ä¸€èµ·å­¦ä¹ åˆ°äº†ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼šå¯ç”¨æ€§å’Œä¸€è‡´æ€§ã€‚</p><p>è€Œä»Šå¤©ï¼Œæˆ‘æƒ³å’Œä½ è®²è§£ä¸€ä¸ªä¸è¿™ä¸¤ä¸ªæ¦‚å¿µç›¸å…³ï¼Œå¹¶ä¸”åœ¨è®¾è®¡åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„æ—¶éƒ½ä¼šè®¨è®ºåˆ°çš„ä¸€ä¸ªå®šç†â€”â€”<strong>CAPå®šç†</strong>ï¼ˆCAP Theoremï¼‰ã€‚</p><h2>CAPå®šç†</h2><p>CAPè¿™ä¸ªæ¦‚å¿µæœ€åˆæ˜¯ç”±åŸƒé‡Œå…‹Â·å¸ƒé²å°”åšå£«ï¼ˆDr. Eric Brewerï¼‰åœ¨2000å¹´çš„ACMå¹´åº¦å­¦æœ¯ç ”è®¨ä¼šä¸Šæå‡ºçš„ã€‚</p><p>å¦‚æœä½ å¯¹è¿™æ¬¡æ¼”è®²æ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥ç¿»é˜…ä»–é‚£æ¬¡åä¸ºâ€œ<a href=\"https://people.eecs.berkeley.edu/~brewer/cs262b-2004/PODC-keynote.pdf\">Towards Robust Distributed Systems</a>â€çš„æ¼”è®²deckã€‚</p><p>åœ¨ä¸¤å¹´ä¹‹åï¼Œå¡æ€Â·å‰å°”ä¼¯ç‰¹ï¼ˆSeth Gilbertï¼‰å’Œéº»çœç†å·¥å­¦é™¢çš„å—å¸ŒÂ·æ—å¥‡æ•™æˆï¼ˆNancy Ann Lynchï¼‰åœ¨ä»–ä»¬çš„è®ºæ–‡â€œBrewerâ€™s conjecture and the Feasibility of Consistent, Available, Partition-Tolerant Web Servicesâ€ä¸­è¯æ˜äº†è¿™ä¸€æ¦‚å¿µã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/2b/8f/2bfd96a97ce8d38834105964d0cb0e8f.png?wh=1278*1346\" alt=\"\"></p><p>ä»–ä»¬åœ¨è¿™ç¯‡è®ºæ–‡ä¸­è¯æ˜äº†ï¼šåœ¨ä»»æ„çš„åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼Œå¯ç”¨æ€§ï¼ˆAvailabilityï¼‰å’Œåˆ†åŒºå®¹é”™æ€§ï¼ˆPartition-toleranceï¼‰è¿™ä¸‰ç§å±æ€§æœ€å¤šåªèƒ½åŒæ—¶å­˜åœ¨ä¸¤ä¸ªå±æ€§ã€‚</p><!-- [[[read_end]]] --><p>ä¸‹é¢ï¼Œæˆ‘æ¥ä¸ºä½ è§£è¯»ä¸€ä¸‹è¿™ä¸‰ç§å±æ€§åœ¨è¿™ç¯‡è®ºæ–‡é‡Œçš„å…·ä½“æ„æ€ã€‚</p><h2>Cå±æ€§ï¼šä¸€è‡´æ€§</h2><p>ä¸€è‡´æ€§åœ¨è¿™é‡ŒæŒ‡çš„æ˜¯<strong>çº¿æ€§ä¸€è‡´æ€§ï¼ˆLinearizability Consistencyï¼‰</strong>ã€‚åœ¨çº¿æ€§ä¸€è‡´æ€§çš„ä¿è¯ä¸‹ï¼Œæ‰€æœ‰åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„æ“ä½œéƒ½åƒæ˜¯åœ¨å•æœºä¸Šå®Œæˆçš„ä¸€æ ·ï¼Œä¹Ÿå°±æ˜¯è¯´å›¾ä¸­Sever Aã€Bã€Cçš„çŠ¶æ€ä¸€ç›´æ˜¯ä¸€è‡´çš„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/17/41/17a4df9ff551c932bf60ca459fe3b641.jpg?wh=380*391\" alt=\"\"></p><p>æ‰“ä¸ªæ¯”æ–¹ï¼Œç°åœ¨æœ‰ä¸¤ä¸ªæ“ä½œï¼ˆOperationï¼‰ï¼Œæ“ä½œAå’Œæ“ä½œBï¼Œéƒ½éœ€è¦åœ¨åŒä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸Šå®Œæˆã€‚</p><p>æˆ‘ä»¬å‡è®¾æ“ä½œAä½œç”¨åœ¨ç³»ç»Ÿä¸Šçš„æ—¶å€™ï¼Œæ‰€çœ‹è§çš„æ‰€æœ‰ç³»ç»ŸçŠ¶æ€ï¼ˆStateï¼‰å«ä½œçŠ¶æ€Aã€‚è€Œæ“ä½œBä½œç”¨åœ¨ç³»ç»Ÿä¸Šçš„æ—¶å€™ï¼Œæ‰€çœ‹è§çš„æ‰€æœ‰ç³»ç»ŸçŠ¶æ€å«ä½œçŠ¶æ€Bã€‚</p><p>å¦‚æœæ“ä½œAæ˜¯åœ¨æ“ä½œBä¹‹å‰å‘ç”Ÿçš„ï¼Œå¹¶ä¸”æ“ä½œAæˆåŠŸäº†ã€‚é‚£ä¹ˆç³»ç»ŸçŠ¶æ€Bå¿…é¡»è¦æ¯”ç³»ç»ŸçŠ¶æ€Aæ›´åŠ æ–°ã€‚</p><p>å¯èƒ½å…‰çœ‹ç†è®ºçš„è¯ä½ è¿˜æ˜¯ä¼šè§‰å¾—è¿™ä¸ªæ¦‚å¿µæœ‰ç‚¹æ¨¡ç³Šï¼Œé‚£ä¸‹é¢æˆ‘å°±ä»¥ä¸€ä¸ªå…·ä½“ä¾‹å­æ¥è¯´æ˜å§ã€‚</p><p>å‡è®¾æˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ªåˆ†å¸ƒå¼çš„è´­ç‰©ç³»ç»Ÿï¼Œåœ¨è¿™ä¸ªç³»ç»Ÿä¸­ï¼Œå•†å“çš„å­˜è´§çŠ¶æ€åˆ†åˆ«ä¿å­˜åœ¨æœåŠ¡å™¨Aå’ŒæœåŠ¡å™¨Bä¸­ã€‚æˆ‘ä»¬æŠŠå­˜è´§çŠ¶æ€å®šä¹‰ä¸ºâ€œæœ‰è´§çŠ¶æ€â€æˆ–è€…â€œæ— è´§çŠ¶æ€â€ã€‚åœ¨æœ€å¼€å§‹çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨Aå’ŒæœåŠ¡å™¨Béƒ½ä¼šæ˜¾ç¤ºå•†å“ä¸ºæœ‰è´§çŠ¶æ€ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ed/38/ed38011a91fdd19021b6450415f5a738.jpg?wh=494*229\" alt=\"\"></p><p>ç­‰ä¸€æ®µæ—¶é—´è¿‡åï¼Œå•†å“å–å®Œäº†ï¼Œåå°å°±å¿…é¡»å°†è¿™ä¸¤å°æœåŠ¡å™¨ä¸Šçš„å•†å“çŠ¶æ€æ›´æ–°ä¸ºæ— è´§çŠ¶æ€ã€‚</p><p>å› ä¸ºæ˜¯åœ¨åˆ†å¸ƒå¼çš„ç¯å¢ƒä¸‹ï¼Œå•†å“çŠ¶æ€çš„æ›´æ–°åœ¨æœåŠ¡å™¨Aä¸Šå®Œæˆäº†ï¼Œæ˜¾ç¤ºä¸ºæ— è´§çŠ¶æ€ã€‚è€ŒæœåŠ¡å™¨Bçš„çŠ¶æ€å› ä¸ºç½‘ç»œå»¶è¿Ÿçš„åŸå› æ›´æ–°è¿˜æœªå®Œæˆï¼Œè¿˜æ˜¯æ˜¾ç¤ºç€æœ‰è´§çŠ¶æ€ã€‚</p><p>è¿™æ—¶ï¼Œæ°å¥½æœ‰ä¸¤ä¸ªç”¨æˆ·ä½¿ç”¨ç€è¿™ä¸ªè´­ç‰©ç³»ç»Ÿï¼Œå…ˆåå‘é€äº†ä¸€ä¸ªæŸ¥è¯¢æ“ä½œï¼ˆQuery Operationï¼‰åˆ°åå°æœåŠ¡å™¨ä¸­æŸ¥è¯¢å•†å“çŠ¶æ€ã€‚</p><p>æˆ‘ä»¬å‡è®¾æ˜¯ç”¨æˆ·Aå…ˆæŸ¥è¯¢çš„ï¼Œè¿™ä¸ªæŸ¥è¯¢æ“ä½œAè¢«å‘é€åˆ°äº†æœåŠ¡å™¨Aä¸Šé¢ï¼Œå¹¶ä¸”æˆåŠŸè¿”å›äº†å•†å“æ˜¯æ— è´§çŠ¶æ€çš„ã€‚ç”¨æˆ·Båœ¨éšåä¹Ÿå¯¹åŒä¸€å•†å“è¿›è¡ŒæŸ¥è¯¢ï¼Œè€Œè¿™ä¸ªæŸ¥è¯¢æ“ä½œBè¢«å‘é€åˆ°äº†æœåŠ¡å™¨Bä¸Šé¢ï¼Œå¹¶ä¸”æˆåŠŸè¿”å›äº†å•†å“æ˜¯æœ‰è´§çŠ¶æ€çš„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/c3/08/c3421ee2650ba291bbf630448d3f5f08.jpg?wh=469*350\" alt=\"\"></p><p>æˆ‘ä»¬çŸ¥é“ï¼Œå¯¹äºæ•´ä¸ªç³»ç»Ÿæ¥è¯´ï¼Œå•†å“çš„ç³»ç»ŸçŠ¶æ€åº”è¯¥ä¸ºæ— è´§çŠ¶æ€ã€‚è€Œæ“ä½œAåˆæ˜¯åœ¨æ“ä½œBä¹‹å‰å‘é€å¹¶ä¸”æˆåŠŸå®Œæˆçš„ï¼Œæ‰€ä»¥å¦‚æœè¿™ä¸ªç³»ç»Ÿæœ‰çº¿æ€§ä¸€è‡´æ€§è¿™ä¸ªå±æ€§çš„è¯ï¼Œæ“ä½œBæ‰€çœ‹åˆ°çš„ç³»ç»ŸçŠ¶æ€ç†è®ºä¸Šåº”è¯¥æ˜¯æ— è´§çŠ¶æ€ã€‚</p><p>ä½†åœ¨æˆ‘ä»¬è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ“ä½œBå´è¿”å›äº†æœ‰è´§çŠ¶æ€ã€‚æ‰€ä»¥æˆ‘ä»¬è¯´ï¼Œè¿™ä¸ªåˆ†å¸ƒå¼çš„è´­ç‰©ç³»ç»Ÿå¹¶ä¸æ»¡è¶³è®ºæ–‡é‡Œæ‰€è®²åˆ°çš„çº¿æ€§ä¸€è‡´æ€§ã€‚</p><p>èŠå®Œäº†ä¸€è‡´æ€§ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹å¯ç”¨æ€§çš„å«ä¹‰ã€‚</p><h2>Aå±æ€§ï¼šå¯ç”¨æ€§</h2><p>å¯ç”¨æ€§çš„æ¦‚å¿µæ¯”è¾ƒç®€å•ï¼Œåœ¨è¿™é‡ŒæŒ‡çš„æ˜¯<strong>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä»»æ„éæ•…éšœçš„æœåŠ¡å™¨éƒ½å¿…é¡»å¯¹å®¢æˆ·çš„è¯·æ±‚äº§ç”Ÿå“åº”</strong>ã€‚</p><p>å½“ç³»ç»Ÿæ»¡è¶³å¯ç”¨æ€§çš„æ—¶å€™ï¼Œä¸ç®¡å‡ºç°ä»€ä¹ˆçŠ¶å†µï¼ˆé™¤éæ‰€æœ‰çš„æœåŠ¡å™¨å…¨éƒ¨å´©æºƒï¼‰ï¼Œéƒ½èƒ½è¿”å›æ¶ˆæ¯ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a2/80/a22d6b3032f045565b952076f5f1ce80.jpg?wh=457*353\" alt=\"\"></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“å®¢æˆ·ç«¯å‘ç³»ç»Ÿå‘é€è¯·æ±‚ï¼Œåªè¦ç³»ç»ŸèƒŒåçš„æœåŠ¡å™¨æœ‰ä¸€å°è¿˜æœªå´©æºƒï¼Œé‚£ä¹ˆè¿™ä¸ªæœªå´©æºƒçš„æœåŠ¡å™¨å¿…é¡»æœ€ç»ˆå“åº”å®¢æˆ·ç«¯ã€‚</p><h2>På±æ€§ï¼šåˆ†åŒºå®¹é”™æ€§</h2><p>åœ¨äº†è§£äº†å¯ç”¨æ€§ä¹‹åï¼Œä½ è¿˜éœ€è¦äº†è§£åˆ†åŒºå®¹é”™æ€§ã€‚å®ƒåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œâ€œåˆ†åŒºâ€å’Œâ€œå®¹é”™â€ã€‚</p><p>åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿé‡Œï¼Œå¦‚æœå‡ºç°ä¸€äº›æ•…éšœï¼Œå¯èƒ½ä¼šä½¿å¾—éƒ¨åˆ†èŠ‚ç‚¹ä¹‹é—´æ— æ³•è¿é€šã€‚ç”±äºè¿™äº›æ•…éšœèŠ‚ç‚¹æ— æ³•è”é€šï¼Œé€ æˆæ•´ä¸ªç½‘ç»œå°±ä¼šè¢«åˆ†æˆå‡ å—åŒºåŸŸï¼Œä»è€Œä½¿æ•°æ®åˆ†æ•£åœ¨è¿™äº›æ— æ³•è¿é€šçš„åŒºåŸŸä¸­çš„æƒ…å†µï¼Œä½ å¯ä»¥è®¤ä¸ºè¿™å°±æ˜¯å‘ç”Ÿäº†åˆ†åŒºé”™è¯¯ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/59/d4/59b52bb37de477286a70c355fe0fe1d4.jpg?wh=426*383\" alt=\"\"></p><p>å¦‚å›¾æ‰€ç¤ºï¼Œå¦‚æœä½ è¦çš„æ•°æ®åªåœ¨Sever Aä¸­ä¿å­˜ï¼Œå½“ç³»ç»Ÿå‡ºç°åˆ†åŒºé”™è¯¯ï¼Œåœ¨ä¸èƒ½ç›´æ¥è¿æ¥Sever Aæ—¶ï¼Œä½ æ˜¯æ— æ³•è·å–æ•°æ®çš„ã€‚æˆ‘ä»¬è¦â€œåˆ†åŒºå®¹é”™â€ï¼Œæ„æ€æ˜¯å³ä½¿å‡ºç°è¿™æ ·çš„â€œé”™è¯¯â€ï¼Œç³»ç»Ÿä¹Ÿéœ€è¦èƒ½â€œå®¹å¿â€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå°±ç®—é”™è¯¯å‡ºç°ï¼Œç³»ç»Ÿä¹Ÿå¿…é¡»èƒ½å¤Ÿè¿”å›æ¶ˆæ¯ã€‚</p><p>åˆ†åŒºå®¹é”™æ€§ï¼Œåœ¨è¿™é‡ŒæŒ‡çš„æ˜¯æˆ‘ä»¬çš„<strong>ç³»ç»Ÿå…è®¸ç½‘ç»œä¸¢å¤±ä»ä¸€ä¸ªèŠ‚ç‚¹å‘é€åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹çš„ä»»æ„å¤šæ¡æ¶ˆæ¯</strong>ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ç°ä»£ç½‘ç»œé€šä¿¡ä¸­ï¼ŒèŠ‚ç‚¹å‡ºç°æ•…éšœæˆ–è€…ç½‘ç»œå‡ºç°ä¸¢åŒ…è¿™æ ·çš„æƒ…å†µæ˜¯æ—¶å¸¸ä¼šå‘ç”Ÿçš„ã€‚</p><p>å¦‚æœæ²¡æœ‰äº†åˆ†åŒºå®¹é”™æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´ç³»ç»Ÿä¸å…è®¸è¿™äº›èŠ‚ç‚¹é—´çš„é€šè®¯å‡ºç°ä»»ä½•é”™è¯¯çš„è¯ï¼Œé‚£æˆ‘ä»¬æ—¥å¸¸æ‰€ç”¨åˆ°çš„å¾ˆå¤šç³»ç»Ÿå°±ä¸èƒ½å†ç»§ç»­å·¥ä½œäº†ã€‚</p><p>æ‰€ä»¥åœ¨<strong>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œç³»ç»Ÿè®¾è®¡éƒ½ä¼šä¿ç•™På±æ€§ï¼Œè€Œåœ¨Cå’ŒAä¸­äºŒé€‰ä¸€</strong>ã€‚</p><p>è®ºæ–‡ä¸­è®ºè¯äº†åœ¨ä»»æ„ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬æœ€å¤šå¯ä»¥ä¿ç•™CAPå±æ€§ä¸­çš„ä¸¤ç§ï¼Œä¹Ÿå°±æ˜¯CPæˆ–è€…APæˆ–è€…CAã€‚å…³äºå…·ä½“çš„è®ºè¯è¿‡ç¨‹ï¼Œå¦‚æœä½ æ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥è‡ªè¡Œç¿»é˜…è®ºæ–‡æŸ¥çœ‹ã€‚</p><p>ä½ å¯èƒ½ä¼šé—®ï¼Œåœ¨æˆ‘ä»¬å¹³å¸¸æ‰€ç”¨åˆ°çš„å¼€å‘æ¶æ„ä¸­ï¼Œæœ‰å“ªäº›ç³»ç»Ÿæ˜¯å±äºCPç³»ç»Ÿï¼Œæœ‰å“ªäº›æ˜¯APç³»ç»Ÿåˆæœ‰å“ªäº›æ˜¯CAç³»ç»Ÿå‘¢ï¼Ÿæˆ‘æ¥ç»™ä½ ä»‹ç»ä¸€ä¸‹ï¼š</p><ul>\n<li>CPç³»ç»Ÿï¼šGoogle BigTable, Hbase, MongoDB, Redis, MemCacheDBï¼Œè¿™äº›å­˜å‚¨æ¶æ„éƒ½æ˜¯æ”¾å¼ƒäº†é«˜å¯ç”¨æ€§ï¼ˆHigh Availablityï¼‰è€Œé€‰æ‹©CPå±æ€§çš„ã€‚</li>\n<li>APç³»ç»Ÿï¼šAmazon Dynamoç³»ç»Ÿä»¥åŠå®ƒçš„è¡ç”Ÿå­˜å‚¨ç³»ç»ŸApache Cassandraå’ŒVoldemortéƒ½æ˜¯å±äºAPç³»ç»Ÿ</li>\n<li>CAç³»ç»Ÿï¼šApache Kafkaæ˜¯ä¸€ä¸ªæ¯”è¾ƒå…¸å‹çš„CAç³»ç»Ÿã€‚</li>\n</ul><p>æˆ‘åœ¨ä¸Šé¢è¯´è¿‡ï¼ŒPå±æ€§åœ¨ç°ä»£ç½‘ç»œæ—¶ä»£ä¸­åŸºæœ¬ä¸Šæ˜¯å±äºä¸€ä¸ªå¿…é€‰é¡¹ï¼Œé‚£ä¸ºä»€ä¹ˆApache Kafkaä¼šæ”¾å¼ƒPé€‰æ‹©CAå±æ€§å‘¢ï¼Ÿæˆ‘æ¥ç»™ä½ è§£é‡Šä¸€ä¸‹å®ƒçš„æ¶æ„æ€æƒ³ã€‚</p><h2>æ”¾å¼ƒäº†På±æ€§çš„Kafka Replication</h2><p>åœ¨Kafkaå‘å¸ƒäº†0.8ç‰ˆæœ¬ä¹‹åï¼ŒKafkaç³»ç»Ÿå¼•å…¥äº†Replicationçš„æ¦‚å¿µã€‚Kafka Relocationé€šè¿‡å°†æ•°æ®å¤åˆ¶åˆ°ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œä»è€Œå¢å¼ºäº†æ•°æ®åœ¨ç³»ç»Ÿä¸­çš„æŒä¹…æ€§ï¼ˆDurabilityï¼‰å’Œå¯ç”¨æ€§ï¼ˆAvailabilityï¼‰ã€‚åœ¨Kafka Replicationçš„ç³»ç»Ÿè®¾è®¡ä¸­ï¼Œæ‰€æœ‰çš„æ•°æ®æ—¥å¿—å­˜å‚¨æ˜¯è®¾è®¡åœ¨åŒä¸€ä¸ªæ•°æ®ä¸­å¿ƒï¼ˆData Centerï¼‰é‡Œé¢çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨åŒä¸€ä¸ªæ•°æ®ä¸­å¿ƒé‡Œç½‘ç»œåˆ†åŒºå‡ºç°çš„å¯èƒ½æ€§æ˜¯ååˆ†ä¹‹å°çš„ã€‚</p><p>å®ƒçš„å…·ä½“æ¶æ„æ˜¯è¿™æ ·çš„ï¼Œåœ¨Kafkaæ•°æ®å‰¯æœ¬ï¼ˆData Replicationï¼‰çš„è®¾è®¡ä¸­ï¼Œå…ˆé€šè¿‡Zookeeperé€‰ä¸¾å‡ºä¸€ä¸ªé¢†å¯¼è€…èŠ‚ç‚¹ï¼ˆLeaderï¼‰ã€‚è¿™ä¸ªé¢†å¯¼è€…èŠ‚ç‚¹è´Ÿè´£ç»´æŠ¤ä¸€ç»„è¢«ç§°ä½œåŒæ­¥æ•°æ®å‰¯æœ¬ï¼ˆIn-sync-replicaï¼‰çš„èŠ‚ç‚¹ï¼Œæ‰€æœ‰çš„æ•°æ®å†™å…¥éƒ½å¿…é¡»åœ¨è¿™ä¸ªé¢†å¯¼è€…èŠ‚ç‚¹ä¸­è®°å½•ã€‚</p><p>æˆ‘æ¥ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ç°åœ¨æ•°æ®ä¸­å¿ƒæœ‰ä¸‰å°æœåŠ¡å™¨ï¼Œä¸€å°è¢«é€‰ä¸ºä½œä¸ºé¢†å¯¼è€…èŠ‚ç‚¹ï¼Œå¦å¤–ä¸¤å°æœåŠ¡å™¨ç”¨æ¥ä¿å­˜æ•°æ®å‰¯æœ¬ï¼Œåˆ†åˆ«æ˜¯Replication1å’ŒReplication2ï¼Œå®ƒä»¬ä¸¤ä¸ªèŠ‚ç‚¹å°±æ˜¯è¢«é¢†å¯¼è€…èŠ‚ç‚¹ç»´æŠ¤çš„åŒæ­¥æ•°æ®å‰¯æœ¬äº†ã€‚é¢†å¯¼è€…èŠ‚ç‚¹çŸ¥é“å®ƒç»´æŠ¤ç€ä¸¤ä¸ªåŒæ­¥æ•°æ®å‰¯æœ¬ã€‚</p><p>å¦‚æœç”¨æˆ·æƒ³å†™å…¥ä¸€ä¸ªæ•°æ®ï¼Œå‡è®¾æ˜¯â€œGeekbangâ€</p><ol>\n<li>\n<p>ç”¨æˆ·ä¼šå‘è¯·æ±‚åˆ°é¢†å¯¼è€…èŠ‚ç‚¹ä¸­æƒ³å†™å…¥â€œGeekbangâ€ã€‚</p>\n</li>\n<li>\n<p>é¢†å¯¼è€…èŠ‚ç‚¹æ”¶åˆ°è¯·æ±‚åå…ˆåœ¨æœ¬åœ°ä¿å­˜å¥½ï¼Œç„¶åä¹ŸåŒæ—¶å‘æ¶ˆæ¯é€šçŸ¥Replication1å’ŒReplication2ã€‚</p>\n</li>\n<li>\n<p>Replication1å’ŒReplication2æ”¶åˆ°æ¶ˆæ¯åä¹Ÿä¿å­˜å¥½è¿™æ¡æ¶ˆæ¯å¹¶ä¸”å›å¤é¢†å¯¼è€…èŠ‚ç‚¹å†™å…¥æˆåŠŸã€‚</p>\n</li>\n<li>\n<p>é¢†å¯¼è€…èŠ‚ç‚¹è®°å½•å‰¯æœ¬1å’Œå‰¯æœ¬2éƒ½æ˜¯å¥åº·ï¼ˆHealthyï¼‰çš„ï¼Œå¹¶ä¸”å›å¤ç”¨æˆ·å†™å…¥æˆåŠŸã€‚</p>\n</li>\n</ol><p>çº¢è‰²çš„éƒ¨åˆ†æ˜¯é¢†å¯¼è€…èŠ‚ç‚¹æœ¬åœ°æ—¥å¿—ï¼Œè®°å½•ç€æœ‰å“ªäº›åŒæ­¥æ•°æ®å‰¯æœ¬æ˜¯å¥åº·çš„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/d7/ca/d731b39103542c83c98bbe57aca1ecca.jpg?wh=451*443\" alt=\"\"></p><p>å¾€åç”¨æˆ·å¦‚æœæƒ³æŸ¥è¯¢å†™å…¥çš„æ•°æ®ï¼Œæ— è®ºæ˜¯é¢†å¯¼è€…èŠ‚ç‚¹è¿˜æ˜¯ä¸¤ä¸ªå‰¯æœ¬éƒ½å¯ä»¥è¿”å›æ­£ç¡®åŒæ­¥çš„ç»“æœã€‚</p><p>é‚£å‡å¦‚åˆ†åŒºå‡ºç°äº†è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿä¾‹å¦‚é¢†å¯¼è€…èŠ‚ç‚¹å’Œå‰¯æœ¬1æ— æ³•é€šè®¯äº†ï¼Œè¿™ä¸ªæ—¶å€™æµç¨‹å°±å˜æˆè¿™æ ·äº†ã€‚</p><ol>\n<li>\n<p>ç”¨æˆ·ä¼šå‘è¯·æ±‚åˆ°é¢†å¯¼è€…èŠ‚ç‚¹ä¸­æƒ³å†™å…¥â€œGeekbangâ€ã€‚</p>\n</li>\n<li>\n<p>é¢†å¯¼è€…èŠ‚ç‚¹æ”¶åˆ°è¯·æ±‚åå…ˆåœ¨æœ¬åœ°ä¿å­˜å¥½ï¼Œç„¶åä¹ŸåŒæ—¶å‘æ¶ˆæ¯é€šçŸ¥Replication1å’ŒReplication2ã€‚</p>\n</li>\n<li>\n<p>åªæœ‰Replication2æ”¶åˆ°æ¶ˆæ¯åä¹Ÿä¿å­˜å¥½è¿™æ¡æ¶ˆæ¯å¹¶ä¸”å›å¤é¢†å¯¼è€…èŠ‚ç‚¹å†™å…¥æˆåŠŸã€‚</p>\n</li>\n<li>\n<p>é¢†å¯¼è€…èŠ‚ç‚¹è®°å½•å‰¯æœ¬2æ˜¯å¥åº·çš„ï¼Œå¹¶ä¸”å›å¤ç”¨æˆ·å†™å…¥æˆåŠŸã€‚</p>\n</li>\n</ol><p>åŒæ ·ï¼Œçº¢è‰²çš„éƒ¨åˆ†æ˜¯é¢†å¯¼è€…èŠ‚ç‚¹æœ¬åœ°æ—¥å¿—ï¼Œè®°å½•ç€æœ‰å“ªäº›åŒæ­¥æ•°æ®å‰¯æœ¬æ˜¯å¥åº·çš„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/9d/f6/9d97ad203e7869019a84363c847b3cf6.jpg?wh=451*443\" alt=\"\"></p><p>å¦‚æœæ‰€æœ‰å‰¯æœ¬éƒ½æ— æ³•é€šè®¯çš„æ—¶å€™ï¼ŒApache Kafkaå…è®¸ç³»ç»Ÿåªæœ‰ä¸€ä¸ªèŠ‚ç‚¹å·¥ä½œï¼Œä¹Ÿå°±æ˜¯é¢†å¯¼è€…èŠ‚ç‚¹ã€‚è¿™ä¸ªæ—¶å€™æ‰€æœ‰çš„å†™å…¥éƒ½åªä¿å­˜åœ¨é¢†å¯¼è€…èŠ‚ç‚¹äº†ã€‚è¿‡ç¨‹å¦‚ä¸‹ï¼Œ</p><ol>\n<li>\n<p>ç”¨æˆ·ä¼šå‘è¯·æ±‚åˆ°é¢†å¯¼è€…èŠ‚ç‚¹ä¸­æƒ³å†™å…¥â€œGeekbangâ€ã€‚</p>\n</li>\n<li>\n<p>é¢†å¯¼è€…èŠ‚ç‚¹æ”¶åˆ°è¯·æ±‚åå…ˆåœ¨æœ¬åœ°ä¿å­˜å¥½ï¼Œç„¶åä¹ŸåŒæ—¶å‘æ¶ˆæ¯é€šçŸ¥Replication1å’ŒReplication2ã€‚</p>\n</li>\n<li>\n<p>æ²¡æœ‰ä»»ä½•å‰¯æœ¬å›å¤é¢†å¯¼è€…èŠ‚ç‚¹å†™å…¥æˆåŠŸï¼Œé¢†å¯¼è€…èŠ‚ç‚¹è®°å½•æ— å‰¯æœ¬æ˜¯å¥åº·çš„ï¼Œå¹¶ä¸”å›å¤ç”¨æˆ·å†™å…¥æˆåŠŸã€‚</p>\n</li>\n</ol><p><img src=\"https://static001.geekbang.org/resource/image/7a/5c/7a0b62273c39bbf0dbda1ca3513f595c.jpg?wh=451*443\" alt=\"\"></p><p>å½“ç„¶ï¼Œåœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œè¿é¢†å¯¼è€…èŠ‚ç‚¹ä¹ŸæŒ‚äº†ï¼ŒZookeeperä¼šé‡æ–°å»å¯»æ‰¾å¥åº·çš„æœåŠ¡å™¨èŠ‚ç‚¹æ¥å½“é€‰æ–°çš„é¢†å¯¼è€…èŠ‚ç‚¹ã€‚</p><h2>å°ç»“</h2><p>é€šè¿‡ä»Šå¤©çš„å­¦ä¹ ï¼Œæˆ‘ä»¬çŸ¥é“åœ¨CAPå®šç†ä¸­ï¼Œä¸€è‡´æ€§ï¼Œå¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§è¿™ä¸‰ä¸ªå±æ€§æœ€å¤šåªèƒ½é€‰æ‹©ä¸¤ç§å±æ€§ä¿ç•™ã€‚CAPå®šç†åœ¨ç»è¿‡äº†å·®ä¸å¤š20å¹´çš„è®¨è®ºä¸æ¼”åŒ–ä¹‹åï¼Œå¤§å®¶å¯¹è¿™ä¸‰ä¸ªå±æ€§å¯èƒ½ä¼šæœ‰ç€è‡ªå·±çš„ä¸€äº›å®šä¹‰ã€‚</p><p>ä¾‹å¦‚åœ¨è®¨è®ºä¸€è‡´æ€§çš„æ—¶å€™ï¼Œæœ‰çš„ç³»ç»Ÿå®£ç§°è‡ªå·±æ˜¯æ‹¥æœ‰Cå±æ€§ï¼Œä¹Ÿå°±æ‹¥æœ‰ä¸€è‡´æ€§çš„ï¼Œä½†æ˜¯è¿™ä¸ªä¸€è‡´æ€§å¹¶ä¸æ˜¯è®ºæ–‡é‡Œæ‰€è®¨è®ºåˆ°çš„çº¿æ€§ä¸€è‡´æ€§ã€‚</p><p>åœ¨æˆ‘çœ‹æ¥ï¼Œä½œä¸ºå¤§è§„æ¨¡æ•°æ®å¤„ç†çš„æ¶æ„å¸ˆï¼Œæˆ‘ä»¬åº”è¯¥ç†ŸçŸ¥è‡ªå·±çš„ç³»ç»Ÿåˆ°åº•åº”è¯¥ä¿ç•™CAPä¸­çš„å“ªä¸¤é¡¹å±æ€§ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦ç†ŸçŸ¥ï¼Œè‡ªå·±æ‰€åº”ç”¨åˆ°çš„å¹³å°æ¶æ„æ˜¯ä¿ç•™ç€å“ªä¸¤é¡¹å±æ€§ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>å¦‚æœè®©ä½ é‡æ–°è®¾è®¡å¾®åšç³»ç»Ÿä¸­çš„å‘å¾®åšåŠŸèƒ½ï¼Œä½ ä¼šé€‰æ‹©CAPçš„å“ªä¸¤ä¸ªå±æ€§å‘¢ï¼Ÿä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>æ¬¢è¿ä½ æŠŠç­”æ¡ˆå†™åœ¨ç•™è¨€åŒºï¼Œä¸æˆ‘å’Œå…¶ä»–åŒå­¦ä¸€èµ·è®¨è®ºã€‚</p><p>å¦‚æœä½ è§‰å¾—æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿æŠŠæ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p><p></p>","comments":[{"had_liked":false,"id":91875,"user_name":"å¸¸è¶…","can_delete":false,"product_type":"c1","uid":1138665,"ip_address":"","ucode":"4AE7743B4ADF20","user_header":"https://static001.geekbang.org/account/avatar/00/11/5f/e9/95ef44f3.jpg","comment_is_top":true,"comment_ctime":1557124891,"is_pvip":false,"replies":[{"id":"32932","content":"å¸¸è¶…æ‚¨å¥½ï¼Œåˆçœ‹åˆ°äº†æ‚¨çš„ç•™è¨€ï¼å…¶å®å½’æ ¹ç»“åº•På±æ€§è¿˜æ˜¯è¯´å½“Network Partitionå‘ç”Ÿåï¼Œæ— è®ºåé¢ç½‘ç»œåˆ†åŒºæ˜¯å¦ä¼šæ¢å¤ï¼Œåˆ†ç¦»å‡ºæ¥çš„å­ç³»ç»Ÿéƒ½å¯ä»¥æ­£å¸¸è¿è¡Œã€‚æ‚¨æ‰€è¯´è¿™å‡ ä¸ªä¾‹å­ç¡®å®æ˜¯è®²åˆ°äº†åœ¨Kafka Replicationä¸­ï¼Œæœ‰çš„èŠ‚ç‚¹åœ¨åˆ†åŒºåå°±æ— æ³•å†ä½¿ç”¨äº†ï¼Œæ‰€ä»¥è®¾è®¡çš„æ—¶å€™å¹¶æ²¡æœ‰è€ƒè™‘På±æ€§ã€‚å¦å¤–è¿˜å¤šåŠ ä¸€å¥ï¼Œå¹¶ä¸æ˜¯Kafkaæ²¡æœ‰På±æ€§ï¼Œè€Œæ˜¯Intra-cluster Kafka Replicationæ²¡æœ‰På±æ€§ã€‚<br><br>è°¢è°¢ä½ çš„å‚è€ƒèµ„æ–™ï¼Œè¿™å¯¹æˆ‘å’Œå…¶ä»–è¯»è€…ä»¬æ¥è¯´éƒ½éå¸¸æœ‰å¸®åŠ©ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557197311,"ip_address":"","comment_id":91875,"utype":1}],"discussion_count":1,"race_medal":0,"score":"9.2233721500810998e+18","product_id":100025301,"comment_content":"å…³äºå¤§å®¶å‡ºç°å¾ˆå¤šç–‘é—®çš„Kafkaæ˜¯å¦æœ‰På±æ€§çš„é—®é¢˜ï¼Œä¸Šç½‘æœäº†ä¸€ä¸‹ï¼Œæ‰¾åˆ°ä¸€ä¸ªå¯ä»¥è¯´æ˜Kafkaä¸å…·å¤‡På±æ€§çš„ä¾‹å­ï¼Œä¸çŸ¥é“ç†è§£å¯¹ä¸å¯¹ï¼Œè¯·è€å¸ˆå’Œå¤§å®¶æ‰¹è¯„æŒ‡æ­£ã€‚<br><br>æ¯”å¦‚ï¼šåœ¨ä»¥ä¸‹çš„åœºæ™¯åºåˆ—ä¸‹ï¼Œä¼šå‡ºç°æ•°æ®å†™å…¥ä¸¢å¤±çš„æƒ…å†µï¼Œæ‰€ä»¥ä¸èƒ½è¯´kafkaæ˜¯æœ‰På±æ€§<br><br>å‰æï¼šleaderå’Œä¸¤ä¸ªslave 1ã€2<br>åºåˆ—ï¼š<br>1.æœºå™¨leaderè·Ÿä¸¤ä¸ªslaveä¹‹é—´å‘ç”Ÿpartion<br>è¿™æ˜¯leaderæˆä¸ºå”¯ä¸€æœåŠ¡èŠ‚ç‚¹ï¼Œç»§ç»­æ¥å—å†™å…¥è¯·æ±‚w1,ä½†æ˜¯w1åªä¿å­˜åœ¨äº†leaderæœºå™¨ä¸Šï¼Œæ— æ³•å¤åˆ¶åˆ°slave1å’Œ2<br>2.leaderå’Œzookeeperä¹‹é—´å‘ç”Ÿpartitionï¼Œå¯¼è‡´kafkaé€‰å–slave 1ä¸ºæ–°leaderï¼Œæ–°leaderæ¥å—æ–°å†™å…¥w1<br>è¿™æ—¶å€™ï¼Œä¸Šé¢1çš„w1å†™å…¥ä¸¢å¤±äº†ã€‚å³ä½¿ä¹‹åæ—§leaderå¤æ´»ï¼Œw1çš„å†™å…¥æ•°æ®ä¹Ÿä¸ä¼šè¢«æ¢å¤å‡ºæ¥ã€‚<br>å‚è€ƒï¼šhttps:&#47;&#47;bit.ly&#47;2VGKtu1<br>","like_count":27,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449066,"discussion_content":"å¸¸è¶…æ‚¨å¥½ï¼Œåˆçœ‹åˆ°äº†æ‚¨çš„ç•™è¨€ï¼å…¶å®å½’æ ¹ç»“åº•På±æ€§è¿˜æ˜¯è¯´å½“Network Partitionå‘ç”Ÿåï¼Œæ— è®ºåé¢ç½‘ç»œåˆ†åŒºæ˜¯å¦ä¼šæ¢å¤ï¼Œåˆ†ç¦»å‡ºæ¥çš„å­ç³»ç»Ÿéƒ½å¯ä»¥æ­£å¸¸è¿è¡Œã€‚æ‚¨æ‰€è¯´è¿™å‡ ä¸ªä¾‹å­ç¡®å®æ˜¯è®²åˆ°äº†åœ¨Kafka Replicationä¸­ï¼Œæœ‰çš„èŠ‚ç‚¹åœ¨åˆ†åŒºåå°±æ— æ³•å†ä½¿ç”¨äº†ï¼Œæ‰€ä»¥è®¾è®¡çš„æ—¶å€™å¹¶æ²¡æœ‰è€ƒè™‘På±æ€§ã€‚å¦å¤–è¿˜å¤šåŠ ä¸€å¥ï¼Œå¹¶ä¸æ˜¯Kafkaæ²¡æœ‰På±æ€§ï¼Œè€Œæ˜¯Intra-cluster Kafka Replicationæ²¡æœ‰På±æ€§ã€‚\n\nè°¢è°¢ä½ çš„å‚è€ƒèµ„æ–™ï¼Œè¿™å¯¹æˆ‘å’Œå…¶ä»–è¯»è€…ä»¬æ¥è¯´éƒ½éå¸¸æœ‰å¸®åŠ©ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557197311,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93223,"user_name":"ç‹ç‡Š Ø´Ù† ÙˆÙ†","can_delete":false,"product_type":"c1","uid":1136335,"ip_address":"","ucode":"AE8A6CCED48618","user_header":"https://static001.geekbang.org/account/avatar/00/11/56/cf/53f64618.jpg","comment_is_top":true,"comment_ctime":1557443022,"is_pvip":false,"replies":[{"id":"33277","content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼ä½ çš„ç†è§£éå¸¸æ­£ç¡®ï¼ŒAå°±æ˜¯æŒ‡é›†ç¾¤ä¸­å³ä¾¿æŒ‚æ‰å‡ ä¸ªæœºå™¨ä½†æ˜¯é›†ç¾¤å¯¹å¤–è¿˜æ˜¯æ­£å¸¸è¿è¡Œçš„ï¼ŒPå°±æ˜¯æŒ‡å³ä¾¿æœºå™¨é—´æ— æ³•é€šè®¯äº†ä½†æ˜¯é›†ç¾¤å¯¹å¤–è¿˜æ˜¯æ­£å¸¸è¿è¡Œã€‚<br><br>æˆ‘å¯¹äºKafka Replication pick CAè¿™ç§è®¾è®¡çš„ç†è§£æ˜¯ï¼Œè®¾è®¡å¸ˆåªè€ƒè™‘äº†åœ¨Replicationçš„é›†ç¾¤é‡Œå¯¹CAçš„ä¿è¯è€Œæ”¾å¼ƒäº†å¯¹Pçš„ä¿è¯ã€‚æ‰€ä»¥å½“å‘ç”ŸNetwork Partitionçš„æ—¶å€™ï¼Œç³»ç»Ÿæœ‰å¯èƒ½å¯ä»¥å·¥ä½œï¼Œæœ‰å¯èƒ½ä¸èƒ½ç»§ç»­å·¥ä½œã€‚ä¾‹å¦‚è¯´Cçš„ä¿è¯æ˜¯å› ä¸ºKafka Replicationè¦æ±‚äº†é¢†å¯¼è€…èŠ‚ç‚¹çš„æ•°æ®ä¸€å®šè¦åŒæ­¥æ•°æ®å‰¯æœ¬èŠ‚ç‚¹ä¸Šï¼Œå¦åˆ™ä¸ä¼šè¿”å›è¿™ä¸ªæ•°æ®ï¼›Açš„ä¿è¯æ˜¯å› ä¸ºæ— è®ºæœ‰å¤šå°‘æ•°æ®å‰¯æœ¬èŠ‚ç‚¹æŒ‚äº†ï¼Œåªè¦é¢†å¯¼è€…èŠ‚ç‚¹ä¸æŒ‚ï¼Œè¿™ä¸ªReplicationé›†ç¾¤éƒ½å¯ä»¥è¿”å›æ•°æ®ï¼Œä½†æ˜¯å½“é¢†å¯¼è€…æŒ‚äº†ï¼Œè¿™æ•´ä¸ªReplicationé›†ç¾¤å°±ä¸èƒ½å†ç”¨äº†ï¼Œè€Œæ²¡äº†è¿™ä¸ªé›†ç¾¤ä¹Ÿå°±æ²¡æœ‰CAPå±æ€§å¯è¨€äº†ã€‚å¸Œæœ›è¿™èƒ½å¸®åŠ©ä½ ç†è§£ï¼Œå¦‚æœæœ‰ä¸æ˜ç¡®çš„åœ°æ–¹ä¹Ÿæ¬¢è¿ä½ ç»§ç»­ç•™è¨€æé—®ï¼Œä¸€èµ·å­¦ä¹ è¿›æ­¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557454295,"ip_address":"","comment_id":93223,"utype":1}],"discussion_count":2,"race_medal":0,"score":"9.2233720942467994e+18","product_id":100025301,"comment_content":"æˆ‘çš„ç†è§£ï¼šAæ˜¯æœºå™¨æŒ‚æ‰ä»å¯ç”¨ï¼ŒPæ˜¯ç½‘ç»œæŒ‚æ‰ä»å¯ç”¨ã€‚å¦‚æœæˆ‘çš„ç†è§£æ­£ç¡®ï¼Œé‚£è€å¸ˆæ‚¨è¯´Kafkaä¸æ”¯æŒPçš„è§£é‡Šï¼Œå³å½“Kafka leaderæŒ‚æ‰æ•´ä¸ªç³»ç»Ÿä¸å¯ç”¨ï¼Œå…¶å®æ˜¯ä¸æ˜¯è¡¨æ˜Kafkaæ˜¯ä¸æ”¯æŒAï¼Œè€Œä¸æ˜¯ä¸æ”¯æŒPçš„ï¼Ÿ","like_count":14,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449533,"discussion_content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼ä½ çš„ç†è§£éå¸¸æ­£ç¡®ï¼ŒAå°±æ˜¯æŒ‡é›†ç¾¤ä¸­å³ä¾¿æŒ‚æ‰å‡ ä¸ªæœºå™¨ä½†æ˜¯é›†ç¾¤å¯¹å¤–è¿˜æ˜¯æ­£å¸¸è¿è¡Œçš„ï¼ŒPå°±æ˜¯æŒ‡å³ä¾¿æœºå™¨é—´æ— æ³•é€šè®¯äº†ä½†æ˜¯é›†ç¾¤å¯¹å¤–è¿˜æ˜¯æ­£å¸¸è¿è¡Œã€‚\n\næˆ‘å¯¹äºKafka Replication pick CAè¿™ç§è®¾è®¡çš„ç†è§£æ˜¯ï¼Œè®¾è®¡å¸ˆåªè€ƒè™‘äº†åœ¨Replicationçš„é›†ç¾¤é‡Œå¯¹CAçš„ä¿è¯è€Œæ”¾å¼ƒäº†å¯¹Pçš„ä¿è¯ã€‚æ‰€ä»¥å½“å‘ç”ŸNetwork Partitionçš„æ—¶å€™ï¼Œç³»ç»Ÿæœ‰å¯èƒ½å¯ä»¥å·¥ä½œï¼Œæœ‰å¯èƒ½ä¸èƒ½ç»§ç»­å·¥ä½œã€‚ä¾‹å¦‚è¯´Cçš„ä¿è¯æ˜¯å› ä¸ºKafka Replicationè¦æ±‚äº†é¢†å¯¼è€…èŠ‚ç‚¹çš„æ•°æ®ä¸€å®šè¦åŒæ­¥æ•°æ®å‰¯æœ¬èŠ‚ç‚¹ä¸Šï¼Œå¦åˆ™ä¸ä¼šè¿”å›è¿™ä¸ªæ•°æ®ï¼›Açš„ä¿è¯æ˜¯å› ä¸ºæ— è®ºæœ‰å¤šå°‘æ•°æ®å‰¯æœ¬èŠ‚ç‚¹æŒ‚äº†ï¼Œåªè¦é¢†å¯¼è€…èŠ‚ç‚¹ä¸æŒ‚ï¼Œè¿™ä¸ªReplicationé›†ç¾¤éƒ½å¯ä»¥è¿”å›æ•°æ®ï¼Œä½†æ˜¯å½“é¢†å¯¼è€…æŒ‚äº†ï¼Œè¿™æ•´ä¸ªReplicationé›†ç¾¤å°±ä¸èƒ½å†ç”¨äº†ï¼Œè€Œæ²¡äº†è¿™ä¸ªé›†ç¾¤ä¹Ÿå°±æ²¡æœ‰CAPå±æ€§å¯è¨€äº†ã€‚å¸Œæœ›è¿™èƒ½å¸®åŠ©ä½ ç†è§£ï¼Œå¦‚æœæœ‰ä¸æ˜ç¡®çš„åœ°æ–¹ä¹Ÿæ¬¢è¿ä½ ç»§ç»­ç•™è¨€æé—®ï¼Œä¸€èµ·å­¦ä¹ è¿›æ­¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557454295,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005123,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/56/43/abb7bfe3.jpg","nickname":"é˜¿å·-è±†å¤«","note":"","ucode":"732188848B0A85","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5679,"discussion_content":"é‚£æˆ‘çš„ç†è§£å°±æ˜¯hdfsæ»¡è¶³capï¼Œa ä¸€å°namenode ä¸€å°datanodeæŒ‚æ‰ç³»ç»Ÿå¯ç”¨ï¼Œc hdfs ä¸‰å‰¯æœ¬ï¼ŒP namnodeå‘ç”Ÿåˆ†åŒºï¼Œstand by èŠ‚ç‚¹å˜æˆactive ä¸€æ—¦æ‹‰èµ·æŒ‚æ‰namnodeæ•°æ®åå‘åŒæ­¥ã€‚ è¯·é—®è¿™æ˜¯ä¸æ˜¯capéƒ½æ»¡è¶³äº†å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566435688,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91725,"user_name":"å¸¸è¶…","can_delete":false,"product_type":"c1","uid":1138665,"ip_address":"","ucode":"4AE7743B4ADF20","user_header":"https://static001.geekbang.org/account/avatar/00/11/5f/e9/95ef44f3.jpg","comment_is_top":true,"comment_ctime":1557101584,"is_pvip":false,"replies":[{"id":"32931","content":"å¸¸è¶…æ‚¨å¥½ï¼Œæ„Ÿè°¢æ‚¨çš„æé—®ï¼<br><br>å…³äºè¿™ä¸ªé—®é¢˜æˆ‘æ˜¯è¿™ä¹ˆçœ‹çš„ã€‚å½“æˆ‘ä»¬åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­è®¨è®ºCAPå±æ€§çš„æ—¶å€™ï¼ŒPå±æ€§å¯ä»¥è¯´æ˜¯å½“ä»»æ„èŠ‚ç‚¹æ–­å¼€åï¼Œç³»ç»Ÿè¿˜æ˜¯å¯ä»¥æ­£å¸¸çš„è¿è¡Œã€‚å¯¹äºæ•´ä¸ªKafkaç³»ç»Ÿæ¥è¯´ï¼ŒPå½“ç„¶æ˜¯å¿…é¡»è¦ä¿ç•™çš„ã€‚å¯å½“ä½ åªä»Kafka Replicationæ¥çœ‹çš„æ—¶å€™ï¼Œå¦‚æœä¸€ä¸ªclusteré‡Œé¢é¢†å¯¼è€…æŒ‚æ‰äº†ï¼Œå•å•å°±è¿™ä¸ªclusteræ¥è¯´æœ‰å†å¤šçš„å‰¯æœ¬å­˜åœ¨ä¹Ÿæ˜¯æ— æ³•è¿è¡Œäº†ï¼Œæ‰€ä»¥å°±Kafka Replicationæ¥è¯´ï¼Œå®ƒæ²¡æœ‰ä¿ç•™På±æ€§ã€‚<br><br>è€Œåœ¨Kafka Replicationçš„è®¾è®¡ä¸­ä¸ºä»€ä¹ˆè¯´Pè¢«æ”¾å¼ƒäº†å‘¢ï¼Œå¼•ç”¨Kafkaçš„ä½œè€…ä¹‹ä¸€Jun Raoåœ¨è®¾è®¡Kafka Replicationçš„è¯´æ³•ï¼Œæ˜¯å› ä¸ºâ€œAll distributed systems must make trade-offs between guaranteeing consistency, availability, and partition tolerance. Our goal was to support replication in a Kafka cluster within a single datacenter, where network partitioning is rare, so our design focuses on maintaining highly available and strongly consistent replicas.â€ï¼Œè¿™ä¸€ç‚¹æ˜¯åœ¨Linkedinçš„Engineeringå®˜æ–¹æ–‡æ¡£ä¸Špublishçš„ã€‚è€Œåœ¨2013å¹´çš„Apacheconä¸Šï¼ŒKafka Replicationçš„æŠ€æœ¯æ¼”è®²ä¸Šä¹Ÿæ˜ç¡®è¯´æ˜äº†â€œKafka Replication: Pick CAâ€ã€‚<br><br>ä¸çŸ¥é“æˆ‘çš„è§£é‡Šèƒ½å¦è®©æ‚¨æ›´å¥½åœ°ç†è§£ï¼Œä¹Ÿæ¬¢è¿æ‚¨ç»§ç»­ç•™è¨€æé—®ï¼Œæˆ‘ä»¬ä¸€èµ·å­¦ä¹ è¿›æ­¥ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557196894,"ip_address":"","comment_id":91725,"utype":1}],"discussion_count":3,"race_medal":0,"score":"9.2233720942465004e+18","product_id":100025301,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæ–‡ä¸­è¯´kafkaæ”¾å¼ƒäº†På±æ€§ã€‚<br>ä½†æ˜¯ä»åé¢çš„è§£é‡Šæ¥çœ‹ï¼Œå³ä½¿å‡ºç°åˆ†åŒºï¼ˆé¢†å¯¼è€…èŠ‚ç‚¹å’Œå‰¯æœ¬1æ— æ³•é€šè®¯ï¼‰ï¼Œæ•´ä¸ªç³»ç»Ÿä¹Ÿèƒ½æ­£å¸¸å·¥ä½œï¼Œè¿™ç§è¡Œä¸ºéš¾é“ä¸æ˜¯ä¿æŒäº†På±æ€§å—ã€‚æ‚¨èƒ½å¦ä¸¾ä¸€ä¸ªPå±æ€§è¢«æ”¾å¼ƒçš„ä¾‹å­ï¼Ÿ","like_count":14,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449004,"discussion_content":"å¸¸è¶…æ‚¨å¥½ï¼Œæ„Ÿè°¢æ‚¨çš„æé—®ï¼\n\nå…³äºè¿™ä¸ªé—®é¢˜æˆ‘æ˜¯è¿™ä¹ˆçœ‹çš„ã€‚å½“æˆ‘ä»¬åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­è®¨è®ºCAPå±æ€§çš„æ—¶å€™ï¼ŒPå±æ€§å¯ä»¥è¯´æ˜¯å½“ä»»æ„èŠ‚ç‚¹æ–­å¼€åï¼Œç³»ç»Ÿè¿˜æ˜¯å¯ä»¥æ­£å¸¸çš„è¿è¡Œã€‚å¯¹äºæ•´ä¸ªKafkaç³»ç»Ÿæ¥è¯´ï¼ŒPå½“ç„¶æ˜¯å¿…é¡»è¦ä¿ç•™çš„ã€‚å¯å½“ä½ åªä»Kafka Replicationæ¥çœ‹çš„æ—¶å€™ï¼Œå¦‚æœä¸€ä¸ªclusteré‡Œé¢é¢†å¯¼è€…æŒ‚æ‰äº†ï¼Œå•å•å°±è¿™ä¸ªclusteræ¥è¯´æœ‰å†å¤šçš„å‰¯æœ¬å­˜åœ¨ä¹Ÿæ˜¯æ— æ³•è¿è¡Œäº†ï¼Œæ‰€ä»¥å°±Kafka Replicationæ¥è¯´ï¼Œå®ƒæ²¡æœ‰ä¿ç•™På±æ€§ã€‚\n\nè€Œåœ¨Kafka Replicationçš„è®¾è®¡ä¸­ä¸ºä»€ä¹ˆè¯´Pè¢«æ”¾å¼ƒäº†å‘¢ï¼Œå¼•ç”¨Kafkaçš„ä½œè€…ä¹‹ä¸€Jun Raoåœ¨è®¾è®¡Kafka Replicationçš„è¯´æ³•ï¼Œæ˜¯å› ä¸ºâ€œAll distributed systems must make trade-offs between guaranteeing consistency, availability, and partition tolerance. Our goal was to support replication in a Kafka cluster within a single datacenter, where network partitioning is rare, so our design focuses on maintaining highly available and strongly consistent replicas.â€ï¼Œè¿™ä¸€ç‚¹æ˜¯åœ¨Linkedinçš„Engineeringå®˜æ–¹æ–‡æ¡£ä¸Špublishçš„ã€‚è€Œåœ¨2013å¹´çš„Apacheconä¸Šï¼ŒKafka Replicationçš„æŠ€æœ¯æ¼”è®²ä¸Šä¹Ÿæ˜ç¡®è¯´æ˜äº†â€œKafka Replication: Pick CAâ€ã€‚\n\nä¸çŸ¥é“æˆ‘çš„è§£é‡Šèƒ½å¦è®©æ‚¨æ›´å¥½åœ°ç†è§£ï¼Œä¹Ÿæ¬¢è¿æ‚¨ç»§ç»­ç•™è¨€æé—®ï¼Œæˆ‘ä»¬ä¸€èµ·å­¦ä¹ è¿›æ­¥ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557196894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111899,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f7/5b/d2e7c2c4.jpg","nickname":"æ—¶éšæ—¶ç°","note":"","ucode":"DA4D622FF84920","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":28372,"discussion_content":"&#34;å¦‚æœä¸€ä¸ªclusteré‡Œé¢é¢†å¯¼è€…æŒ‚æ‰äº†ï¼Œå•å•å°±è¿™ä¸ªclusteræ¥è¯´æœ‰å†å¤šçš„å‰¯æœ¬å­˜åœ¨ä¹Ÿæ˜¯æ— æ³•è¿è¡Œäº†&#34; leaderæŒ‚æ‰äº†ï¼Œå‰©ä½™çš„replicaå®Œå…¨å¯ä»¥å†é‡æ–°é€‰æ–°ä¸»ï¼Œæ€ä¹ˆä¼šæ•´ä¸ªclusteréƒ½æ— æ³•è¿è¡Œï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1570692866,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1114356,"avatar":"https://static001.geekbang.org/account/avatar/00/11/00/f4/cc5f0896.jpg","nickname":"Jowin","note":"","ucode":"19017F7D06C22A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326096,"discussion_content":"kafkaå¤åˆ¶é›†è¿™ç§è®¾è®¡ï¼Œåœ¨å‘ç”Ÿå‰¯æœ¬æŒ‚æ‰åï¼Œé›†ç¾¤ç»§ç»­å¯ç”¨ï¼›åœ¨leaderæŒ‚æ‰åï¼Œé›†ç¾¤ä¸å¯ç”¨ï¼ŒçŸ¥é“é€‰å‡ºæ–°çš„leaderï¼›å› æ­¤ï¼Œä»å¤åˆ¶é›†çš„è§’åº¦ï¼Œå®ƒé€‰æ‹©äº†CAï¼Œåœ¨èƒ½ä¿è¯ä¸€è‡´æ€§çš„æƒ…å†µä¸‹(å‰¯æœ¬æŒ‚æ‰)ç³»ç»Ÿå¯ç”¨ï¼Œé™¤éæ— æ³•ä¿è¯ä¸€è‡´æ€§(LeaderæŒ‚æ‰)ã€‚\nä»kafkaçš„producerè§’åº¦çœ‹ï¼Œå‘é€æ¶ˆæ¯æ˜¯å¯ä»¥æŒ‡å®šackæ•°é‡ï¼Œåªæœ‰è¾¾åˆ°æŒ‡å®šæ•°é‡çš„å‰¯æœ¬å†™å…¥æˆåŠŸï¼Œæ‰ç®—æ¶ˆæ¯å†™å…¥æˆåŠŸï¼Œè¿™å…¶å®ä¹Ÿæ˜¯CAçš„æ‰‹æ®µ(å¦‚æœåªæœ‰Leaderå†™å…¥æˆåŠŸï¼Œå½“LeaderæŒ‚æ‰åï¼Œæ–°é€‰ä¸¾å‡ºæ¥çš„Leaderä¼šç¼ºå¤±éƒ¨åˆ†æ¶ˆæ¯)ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605520361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91770,"user_name":"é”¦","can_delete":false,"product_type":"c1","uid":1468298,"ip_address":"","ucode":"CB0EB4B68C468B","user_header":"https://static001.geekbang.org/account/avatar/00/16/67/8a/babd74dc.jpg","comment_is_top":true,"comment_ctime":1557105739,"is_pvip":false,"replies":[{"id":"32928","content":"è°¢è°¢ä½ çš„ç­”æ¡ˆã€‚<br><br>å…³äºç–‘é—®ä¸€ï¼šMongoDBçš„è®¾è®¡é»˜è®¤æ˜¯å¸Œæœ›è¯»å†™æœ‰strong consistencyçš„ã€‚å½“ç„¶MongoDBä¹Ÿæœ‰è‡ªèº«çš„Replica Setæ¥ä¿è¯å¯ç”¨æ€§ï¼šhttps:&#47;&#47;docs.mongodb.com&#47;manual&#47;replication&#47;#replication-in-mongodb<br>å…³äºç–‘é—®äºŒï¼šä½ è¯´çš„æ²¡æœ‰é”™ï¼Œä½œä¸ºå¤šä¸ªdata clustersæ¥è¯´ï¼ŒKafkaç³»ç»Ÿæ˜¯ä¸å¯èƒ½æ”¾å¼ƒPçš„ï¼Œä¸ç„¶ä¸€æ—¦leaderæŒ‚æ‰ç³»ç»Ÿå°±æ²¡æœ‰ä»»ä½•ç»“æœå¯ä»¥è¿”å›äº†ã€‚ä½†æ˜¯æˆ‘åœ¨è¿™ä¸€è®²ä¸­æ‰€è®²è¿°çš„Intra-cluster Kafka Replication Designæ˜¯å¯¹äºä¸€ä¸ªclusteræ¥è¯´ã€‚å°±åƒæˆ‘å›ç­”å…¶ä»–æœ‰åŒæ ·ç–‘é—®çš„è¯»è€…ä¸€æ ·ï¼Œä¹‹æ‰€ä»¥æˆ‘åœ¨æ–‡ä¸­è¯´Kafka Replicationé€‰æ‹©äº†CAï¼Œæ˜¯å› ä¸ºKafkaçš„ä½œè€…ä¹‹ä¸€Jun Raoåœ¨è®¾è®¡Kafka Replicationçš„æ—¶å€™ï¼Œæ˜ç¡®è¯´æ˜äº†â€œAll distributed systems must make trade-offs between guaranteeing consistency, availability, and partition tolerance. Our goal was to support replication in a Kafka cluster within a single datacenter, where network partitioning is rare, so our design focuses on maintaining highly available and strongly consistent replicas.â€ï¼Œè¿™ä¸€ç‚¹æ˜¯åœ¨Linkedinçš„å®˜æ–¹æ–‡æ¡£ä¸Špublishçš„ã€‚è€Œåœ¨2013å¹´çš„Apacheconä¸Šï¼ŒKafka Replicationçš„æŠ€æœ¯æ¼”è®²ä¸Šä¹Ÿæ˜ç¡®è¯´æ˜äº†â€œKafka Replication: Pick CAâ€ã€‚<br><br>å­¦ä¹ ä¹‹åæå‡ºç–‘é—®æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¹ æƒ¯ï¼Œä¹Ÿå¸Œæœ›åé¢ç»§ç»­çœ‹åˆ°ä½ çš„ç•™è¨€ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557196003,"ip_address":"","comment_id":91770,"utype":1}],"discussion_count":2,"race_medal":0,"score":"9.2233720470018007e+18","product_id":100025301,"comment_content":"APï¼Œå‘å¾®åšä¿è¯æœ€ç»ˆä¸€è‡´æ€§å°±å¯ä»¥ã€‚<br>ç–‘é—®ä¸€ï¼Œmongodbé‡‡ç”¨CPï¼Œé‚£ä¹ˆå®ƒåœ¨å¯ç”¨æ€§æ–¹é¢æœ‰åšä»€ä¹ˆäº‹æƒ…å—ï¼Ÿ<br>ç–‘é—®äºŒï¼Œkafkaè¿™ç§é€šè¿‡é€‰ä¸¾leaderçš„æ–¹å¼ä¸å°±æ˜¯åˆ†åŒºå®¹é”™æ€§å—ï¼Ÿä¸ºä»€ä¹ˆè¯´æ”¾å¼ƒäº†På‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449023,"discussion_content":"è°¢è°¢ä½ çš„ç­”æ¡ˆã€‚\n\nå…³äºç–‘é—®ä¸€ï¼šMongoDBçš„è®¾è®¡é»˜è®¤æ˜¯å¸Œæœ›è¯»å†™æœ‰strong consistencyçš„ã€‚å½“ç„¶MongoDBä¹Ÿæœ‰è‡ªèº«çš„Replica Setæ¥ä¿è¯å¯ç”¨æ€§ï¼šhttps://docs.mongodb.com/manual/replication/#replication-in-mongodb\nå…³äºç–‘é—®äºŒï¼šä½ è¯´çš„æ²¡æœ‰é”™ï¼Œä½œä¸ºå¤šä¸ªdata clustersæ¥è¯´ï¼ŒKafkaç³»ç»Ÿæ˜¯ä¸å¯èƒ½æ”¾å¼ƒPçš„ï¼Œä¸ç„¶ä¸€æ—¦leaderæŒ‚æ‰ç³»ç»Ÿå°±æ²¡æœ‰ä»»ä½•ç»“æœå¯ä»¥è¿”å›äº†ã€‚ä½†æ˜¯æˆ‘åœ¨è¿™ä¸€è®²ä¸­æ‰€è®²è¿°çš„Intra-cluster Kafka Replication Designæ˜¯å¯¹äºä¸€ä¸ªclusteræ¥è¯´ã€‚å°±åƒæˆ‘å›ç­”å…¶ä»–æœ‰åŒæ ·ç–‘é—®çš„è¯»è€…ä¸€æ ·ï¼Œä¹‹æ‰€ä»¥æˆ‘åœ¨æ–‡ä¸­è¯´Kafka Replicationé€‰æ‹©äº†CAï¼Œæ˜¯å› ä¸ºKafkaçš„ä½œè€…ä¹‹ä¸€Jun Raoåœ¨è®¾è®¡Kafka Replicationçš„æ—¶å€™ï¼Œæ˜ç¡®è¯´æ˜äº†â€œAll distributed systems must make trade-offs between guaranteeing consistency, availability, and partition tolerance. Our goal was to support replication in a Kafka cluster within a single datacenter, where network partitioning is rare, so our design focuses on maintaining highly available and strongly consistent replicas.â€ï¼Œè¿™ä¸€ç‚¹æ˜¯åœ¨Linkedinçš„å®˜æ–¹æ–‡æ¡£ä¸Špublishçš„ã€‚è€Œåœ¨2013å¹´çš„Apacheconä¸Šï¼ŒKafka Replicationçš„æŠ€æœ¯æ¼”è®²ä¸Šä¹Ÿæ˜ç¡®è¯´æ˜äº†â€œKafka Replication: Pick CAâ€ã€‚\n\nå­¦ä¹ ä¹‹åæå‡ºç–‘é—®æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¹ æƒ¯ï¼Œä¹Ÿå¸Œæœ›åé¢ç»§ç»­çœ‹åˆ°ä½ çš„ç•™è¨€ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557196003,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1667727,"avatar":"","nickname":"Geek_guys","note":"","ucode":"4B4EBF0254D4A0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21304,"discussion_content":"å‘µå‘µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569465277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":100264,"user_name":"mccrms","can_delete":false,"product_type":"c1","uid":1232528,"ip_address":"","ucode":"EE65C5B2012A0F","user_header":"https://static001.geekbang.org/account/avatar/00/12/ce/90/fafbbe0b.jpg","comment_is_top":false,"comment_ctime":1559519723,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"177653178859","product_id":100025301,"comment_content":"æ–‡ä¸­æåˆ°çš„CAç¤ºä¾‹å…¶å®æ˜¯æœ‰å¾ˆå¼ºçš„è¯¯å¯¼æ€§çš„ã€‚<br><br>é¦–å…ˆæˆ‘ä»¬è¦æ˜ç¡®å¦‚ä¸‹çš„äº‹å®:<br>1)å¯¹äºä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿè€Œè¨€ï¼ŒèŠ‚ç‚¹æ•…éšœå’Œç½‘ç»œæ•…éšœå±äºå¸¸æ€<br>2)å¦‚æœå‡ºç°ç½‘ç»œæ•…éšœï¼Œä¼šé€ æˆèŠ‚ç‚¹åˆ†åŒº<br>3)åˆ†å¸ƒå¼ç³»ç»Ÿåœ¨å­˜åœ¨èŠ‚ç‚¹åˆ†åŒºçš„æƒ…å†µä¸‹ï¼ŒCå’ŒAæ˜¯å†²çªçš„<br><br>é€šè¿‡ä¸Šé¢çš„äº‹å®æˆ‘ä»¬å¯ä»¥æ¨æ–­å‡ºï¼Œå¦‚æœæƒ³è®¾è®¡å‡ºä¸€ä¸ªCAç³»ç»Ÿï¼Œå¿…é¡»ä¿è¯ç½‘ç»œä¸å‡ºç°åˆ†åŒºæ‰æœ‰å¯èƒ½ï¼Œæ€æ ·ä¿è¯ç½‘ç»œä¸å‡ºç°åˆ†åŒºå‘¢ï¼Œä¸€æ˜¯å•å°æœºå™¨ï¼ŒäºŒæ˜¯åƒä¾‹å­ä¸­æ‰€è¿°ï¼Œå°†æ‰€æœ‰èŠ‚ç‚¹æ”¾åœ¨åŒä¸ªæ•°æ®ä¸­å¿ƒä¸­å¯ä»¥å‡å®šç½‘ç»œå‡ºç°åˆ†åŒºçš„æ¦‚ç‡å¾ˆä½ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¾‹å­ä¸­çš„æƒ…å†µå¯ä»¥å‡è£…ç§°ä¸ºCAã€‚<br><br>è¿˜æœ‰ä¸€äº›éœ€è¦è¾…åŠ©ç†è§£CAPçš„çŸ¥è¯†å¦‚ä¸‹:<br>1)å¯¹äºåˆ†å¸ƒå¼ç³»ç»Ÿè€Œè¨€ï¼Œæœ€ç®€å•å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼Œä¸€æ˜¯æ‰€æœ‰èŠ‚ç‚¹é€šè¿‡éƒ½å¯ä»¥é€šè¿‡æŸç§ç­–ç•¥å¯¹å¤–æä¾›æœåŠ¡ï¼Œæ˜¯å¯¹ç­‰çš„ï¼ŒäºŒæ˜¯æ‰€æœ‰èŠ‚ç‚¹é€šè¿‡ä¸€ä¸ªmasterå¯¹å¤–æä¾›æœåŠ¡ï¼Œç”šè‡³æ˜¯ä¸€ä¸ªå•ç‚¹çš„master<br>2)æ¢è®¨ç³»ç»ŸCAPçš„å‰æåº”è¯¥æ˜¯ç³»ç»Ÿåœ¨èƒ½æä¾›æœåŠ¡çš„æƒ…å†µä¸‹çš„CAPï¼Œå¦‚æœå­˜åœ¨masterå•ç‚¹ï¼Œä½†æ˜¯æœ‰å¾ˆå¤šä»å±workerçš„è¯ï¼Œè¿™æ—¶çš„å¯ç”¨æ€§æ¢è®¨éœ€è¦åˆ’åˆ†ä¸ºworkeræ•…éšœå’Œmasteræ•…éšœæ¥çœ‹ã€‚å¯¹äºæ–‡ä¸­çš„ä¾‹å­masterå¦‚æœæŒ‚æ‰ç³»ç»Ÿä¸å¯ç”¨åˆ™è¡¨åAå…¶å®ä¹Ÿæ˜¯å‹‰å¼ºçš„<br><br>CAP Theorem is like the old joke about software projects: you can have it on TIME, in BUDGET, or CORRECT. Pick any twoğŸ˜€<br><br>CAPä¸‰è€…äº’ç›¸åˆ¶è¡¡ï¼Œåº”è¯¥æ˜¯çœ‹ä¾§é‡å“ªä¸¤ä¸ªï¼Œè€Œä¸æ˜¯é€‰äº†å“ªä¸¤ä¸ªï¼Œä¸æ˜¯ä¸¤ä¸ª100åˆ†å‰©ä¸‹çš„ä¸€ä¸ª0åˆ†ï¼Œæœ¬è´¨ä¸Šéƒ½è¦å…¼é¡¾çš„ã€‚","like_count":42,"discussions":[{"author":{"id":1045945,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f5/b9/888fe350.jpg","nickname":"ä¸è®°å¹´","note":"","ucode":"287E40C68356DC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":213712,"discussion_content":"è¿™ä¸ªè§£é‡Šå‰å®³\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585115463,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111899,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f7/5b/d2e7c2c4.jpg","nickname":"æ—¶éšæ—¶ç°","note":"","ucode":"DA4D622FF84920","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":28383,"discussion_content":"æ­£è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570693394,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91880,"user_name":"Codelife","can_delete":false,"product_type":"c1","uid":1041421,"ip_address":"","ucode":"10458683978083","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLhMtBwGqqmyhxp5uaDTvvp18iaalQj8qHv6u8rv1FQXGozfl3alPvdPHpEsTWwFPFVOoP6EeKT4bw/132","comment_is_top":false,"comment_ctime":1557125980,"is_pvip":false,"replies":[{"id":"32908","content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼ä½ çš„ç†è§£éå¸¸æ­£ç¡®ï¼Œå°±æ˜¯å› ä¸ºè¿™æ ·Kafka Replicationçš„è®¾è®¡ä¸­ä¸éœ€è¦è€ƒè™‘åˆ°Pçš„å­˜åœ¨ï¼Œè®©æ•´ä¸ªReplication Designæˆä¸ºCAç³»ç»Ÿã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557190626,"ip_address":"","comment_id":91880,"utype":1}],"discussion_count":2,"race_medal":0,"score":"74571570012","product_id":100025301,"comment_content":"ä¸¥æ ¼æ¥è¯´,CAPç†è®ºæ˜¯é’ˆå¯¹åˆ†åŒºå‰¯æœ¬æ¥å®šä¹‰çš„ï¼Œä¹‹æ‰€ä»¥è¯´kafkaæ”¾å¼ƒPï¼Œåªæ”¯æŒCAï¼Œæ˜¯å› ä¸ºï¼ŒkafkaåŸç†ä¸­å½“å‡ºç°å•ä¸ªbrokeå®•æœºï¼Œå°†è¦å‡ºç°åˆ†åŒºçš„æ—¶å€™ï¼Œç›´æ¥å°†è¯¥brokeä»é›†ç¾¤ä¸­å‰”é™¤ï¼Œç¡®ä¿æ•´ä¸ªé›†ç¾¤ä¸ä¼šå‡ºç°Pç°è±¡","like_count":18,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449068,"discussion_content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼ä½ çš„ç†è§£éå¸¸æ­£ç¡®ï¼Œå°±æ˜¯å› ä¸ºè¿™æ ·Kafka Replicationçš„è®¾è®¡ä¸­ä¸éœ€è¦è€ƒè™‘åˆ°Pçš„å­˜åœ¨ï¼Œè®©æ•´ä¸ªReplication Designæˆä¸ºCAç³»ç»Ÿã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557190626,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1110662,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f2/86/d689f77e.jpg","nickname":"Hank_Yan","note":"","ucode":"86899B561C502B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289452,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594104516,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122682,"user_name":"coldpark","can_delete":false,"product_type":"c1","uid":1058331,"ip_address":"","ucode":"D1B0F343B384F8","user_header":"https://static001.geekbang.org/account/avatar/00/10/26/1b/4caf36bd.jpg","comment_is_top":false,"comment_ctime":1565488529,"is_pvip":false,"replies":[{"id":"47609","content":"æ˜¯æœ‰ä¸€å®šé“ç†","user_name":"ä½œè€…å›å¤","user_name_real":"Yuannanè”¡å…ƒæ¥ ","uid":"1257426","ctime":1566882956,"ip_address":"","comment_id":122682,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31630259601","product_id":100025301,"comment_content":"æœ‰ä¸€ä¸ªå½¢è±¡çš„æ¯”å–»ä¸çŸ¥é“æ°å½“ä¸æ°å½“ï¼Œä¸€ä¸ªç³»ç»Ÿç›¸å½“äºä¸€ä¸ªå›¢é˜Ÿï¼Œæœ‰Cå±æ€§è¯´æ˜è¿™ä¸ªå›¢é˜Ÿæ¯æ¬¡éƒ½èƒ½ä¿è´¨ä¿é‡å®Œæˆä»»åŠ¡ï¼ŒAå±æ€§è¯´æ˜è¿™ä¸ªå›¢é˜Ÿæ¯æ¬¡éƒ½èƒ½åŠæ—¶å®Œæˆä»»åŠ¡ï¼ŒPå±æ€§ç›¸å½“äºè¿™ä¸ªå›¢é˜Ÿå†…éƒ¨å¶å°”ä¼šçŠ¯ä¸€äº›å°é”™è¯¯ã€‚çŠ¯é”™æ˜¯å¾ˆå¸¸è§çš„ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½å…·æœ‰På±æ€§ã€‚<br>CPç±»å‹çš„å›¢é˜Ÿå¯¹å¤–çš„å½¢è±¡ç›¸å½“äºï¼šæˆ‘çš„å›¢é˜Ÿä¸æ˜¯å®Œç¾çš„ï¼Œä½†æˆ‘çš„äº§å“ç»å¯¹ä¸ä¼šå‡ºé—®é¢˜ï¼Œåªè¦ä½ ç»™æˆ‘è¶³å¤Ÿçš„æ—¶é—´è®©æˆ‘ä»¬æŠŠé—®é¢˜æ’æŸ¥æ¸…æ¥šã€‚<br>APç±»å‹çš„å›¢é˜Ÿç»™äººçš„æ„Ÿè§‰å°±æ˜¯ï¼šäººéåœ£è´¤ï¼Œå­°èƒ½æ— è¿‡ï¼Œæˆ‘çš„é˜Ÿå‘˜ä¼šçŠ¯é”™ï¼Œæˆ‘çš„å›¢é˜Ÿä¹Ÿæœ‰ä¼°è®¡ä¸è¶³çš„æ—¶å€™ï¼Œä½†æ˜¯å®¢æˆ·çš„éœ€æ±‚æˆ‘ä»¬æ€»ä¼šæœ€å¿«å“åº”ã€‚<br>CAç±»å‹çš„å›¢é˜Ÿæœ‰ä¸ªå¼ºäººé¢†è¢–ï¼ˆleaderèŠ‚ç‚¹ï¼‰ï¼šä»»ä½•äº‹åŠ¡æ— è®ºå¤§å°éƒ½è¿‡é—®ä¸€éï¼Œä¸€æ—¦å‘ç°æ‰‹ä¸‹æœ‰äººçŠ¯é”™ï¼Œç«‹é©¬å‰”é™¤å‡ºå›¢é˜Ÿï¼Œå¦‚æœè‡ªå·±çŠ¯é”™ï¼Œè®©å‡ºé¢†è¢–åœ°ä½ï¼Œæ•´ä¸ªå›¢é˜Ÿä¸€å®šè¦ä¿è¯æœ€å¿«æœ€å¥½å®Œæˆä»»åŠ¡ã€‚","like_count":7,"discussions":[{"author":{"id":1257426,"avatar":"https://static001.geekbang.org/account/avatar/00/13/2f/d2/0b6a8945.jpg","nickname":"Yuannanè”¡å…ƒæ¥ ","note":"","ucode":"695E183CE496A8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462359,"discussion_content":"æ˜¯æœ‰ä¸€å®šé“ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566882956,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98520,"user_name":"Zoe","can_delete":false,"product_type":"c1","uid":1528912,"ip_address":"","ucode":"A5D671919EE7B1","user_header":"https://static001.geekbang.org/account/avatar/00/17/54/50/8a76a8cc.jpg","comment_is_top":false,"comment_ctime":1559015821,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"14443917709","product_id":100025301,"comment_content":"æŸ¥äº†æŸ¥æ–‡æ¡£ï¼Œå¯¹äºKafkaæ²¡æœ‰è€ƒè™‘På› ç´ ï¼Œæ˜¯å› ä¸ºç›¸åŒçš„partition ï¼ˆleaderå’Œreplicationsï¼‰éƒ½åœ¨åŒä¸€ä¸ªdata centeré‡Œï¼Œå¤§æ¦‚æ˜¯è¯´ä¸éœ€è¦å»è€ƒè™‘Pã€‚<br><br>ä½†å¯¹äºåŒæ—¶æ»¡è¶³CAè¿˜è¯·è€å¸ˆå†è§£é‡Šä¸€ä¸‹ã€‚æ–‡æ¡£é‡Œè¯´ï¼Œå¯ä»¥config availability over durabilityï¼Œä¹Ÿå¯ä»¥åä¹‹ã€‚<br>å¦‚æœé€‰æ‹©availabilityçš„è¯ï¼Œè®¾ç½®acks=allï¼Œå¯ä»¥ä¿è¯isré‡Œç™»è®°åœ¨å†Œçš„brokeréƒ½æ¥æ”¶åˆ°ä¿¡æ¯ï¼Œä½†isré‡Œä¹Ÿå¯èƒ½åªæœ‰leaderä¸€ä¸ªã€‚æ‰€ä»¥å½“leaderæŒ‚äº†ä¹‹ååˆ°å†é€‰å‡ºæ–°leaderæœŸé—´å°±æœ‰æ•°æ®ä¸¢å¤±çš„å¯èƒ½æ€§ã€‚<br>å¦‚æœé€‰æ‹©durabilityçš„è¯å¯ä»¥è®¾ç½®min_insync_replicasï¼Œä½†å¦‚æœå°äºè¿™ä¸ªthresholdçš„æ—¶å€™ï¼Œä¸æ˜¯å¾—ç­‰ç€æŸä¸ªbrokeræ¢å¤ï¼Œè¿™æ ·ä¸å°±ç‰ºç‰²availabiltyäº†å—ï¼Ÿ<br><br>æ‰€ä»¥ï¼Œåˆ°åº•Cå’ŒAæ˜¯å¦‚ä½•éƒ½æ»¡è¶³çš„ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1106802,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e3/72/afd1eef0.jpg","nickname":"æŸ³å¹´æ€æ°´","note":"","ucode":"65589C121B904A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1838,"discussion_content":"æˆ‘çš„ç†è§£æ˜¯è¿™æ ·çš„ï¼šè®¾ç½® acks=allåŠ min_isr çš„æƒ…å†µä¸‹ï¼ˆæœåŠ¡ç«¯è¿˜è¦ç¦æ­¢è„é€‰ä¸¾ï¼Œè¿™äº›é…ç½®æ˜¯ä¸ä¸¢çš„å¿…è¦æ¡ä»¶ï¼Œå¯ä»¥çœ‹ä¸‹è¿™ä¸ªï¼šhttp://matt33.com/2017/09/04/kafka-best-pratice/#%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%95%B0%E6%8D%AE%E4%B8%8D%E4%B8%A2ï¼‰ï¼Œå‡è®¾è¿™ä¸ª partitionæœ‰ 3 ä¸ªå‰¯æœ¬ï¼Œmin_isrè®¾ç½®ä¸º 2ï¼Œé‚£ä¹ˆè¿™ä¸ªç³»ç»Ÿæœ€å¤šå®¹å¿ 1 å°æœºå™¨æ•…éšœï¼Œè€Œä¸”ç³»ç»Ÿè¿˜æ˜¯å¯ä»¥ä¿è¯å¼ºä¸€è‡´æ€§çš„ï¼Œä¹Ÿå°±æ˜¯æ»¡è¶³äº† CA çš„ç‰¹æ€§ã€‚\nå…³äºä½ è¯´çš„æŒ‚æ‰çš„æœºå™¨å°äº min_isr æ—¶éœ€è¦ç­‰å¾…çš„æƒ…å†µï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿçš„ A æ˜¯æœ‰è¦æ±‚çš„ï¼Œå®¹å¿æ•…éšœçš„æœºå™¨æ˜¯é™åˆ¶çš„ï¼Œå¹¶ä¸æ˜¯è¯´æ‰€æœ‰æœºå™¨æŒ‚äº†ï¼Œæˆ‘è¿˜èƒ½ä¿è¯å¯ç”¨æ€§ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1562943039,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91813,"user_name":"æ¡ƒå›­æ‚ ç„¶åœ¨","can_delete":false,"product_type":"c1","uid":1017637,"ip_address":"","ucode":"704460D9CAD1CB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/87/25/898dea4e.jpg","comment_is_top":false,"comment_ctime":1557113313,"is_pvip":false,"replies":[{"id":"32904","content":"è°¢è°¢ä½ çš„æ”¯æŒï¼Œå“ˆå“ˆï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557189433,"ip_address":"","comment_id":91813,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14442015201","product_id":100025301,"comment_content":"å¦å¤–ï¼Œå¢åŠ ä¸€ä¸ªè¯„è®ºï¼šè”¡è€å¸ˆçš„æ–‡ç« å¤´å›¾æ¯å¼ éƒ½è·Ÿå†…å®¹å¼ºç›¸å…³ï¼ˆä¸çŸ¥æ˜¯å¦è‡ªå·±På›¾æˆ–è€…ç…§ç›¸çš„ï¼‰ï¼Œè€Œä¸”å³ä¸Šè§’æœ‰æ–‡ç« åºå·å¾ˆç”¨å¿ƒï¼Œç‚¹èµï¼","like_count":3,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449042,"discussion_content":"è°¢è°¢ä½ çš„æ”¯æŒï¼Œå“ˆå“ˆï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557189433,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91772,"user_name":"ç‹èª Claire","can_delete":false,"product_type":"c1","uid":1090310,"ip_address":"","ucode":"0D9CC82C9F44D4","user_header":"https://static001.geekbang.org/account/avatar/00/10/a3/06/9fa93074.jpg","comment_is_top":false,"comment_ctime":1557105967,"is_pvip":false,"replies":[{"id":"32877","content":"è°¢è°¢ä½ çš„æé—®ï¼æˆ‘çš„ç†è§£æ˜¯å¦‚æœä»…ä»…å°±ä¸€ä¸ªKafka Replication clusteræ¥è¯´ï¼Œå¦‚æœé¢†å¯¼è€…æŒ‚äº†æˆ‘ä»¬å°±ä¸ä¼šå†ä»è¿™ä¸ªclusteræ‹¿åˆ°å†…å®¹äº†ï¼Œæ‰€ä»¥åœ¨Intra-cluster Replicationè¿™ä¸ªè®¾è®¡ç‚¹ä¸Šï¼Œä»–ä»¬æ˜¯ä¸è€ƒè™‘Pçš„ã€‚<br><br>ä¹‹æ‰€ä»¥æˆ‘åœ¨æ–‡ä¸­è¯´Kafka Replicationé€‰æ‹©äº†CAï¼Œæ˜¯å› ä¸ºKafkaçš„ä½œè€…ä¹‹ä¸€Jun Raoåœ¨è®¾è®¡Kafka Replicationçš„æ—¶å€™ï¼Œæ˜ç¡®è¯´æ˜äº†â€œAll distributed systems must make trade-offs between guaranteeing consistency, availability, and partition tolerance. Our goal was to support replication in a Kafka cluster within a single datacenter, where network partitioning is rare, so our design focuses on maintaining highly available and strongly consistent replicas.â€ï¼Œè¿™ä¸€ç‚¹æ˜¯åœ¨Linkedinçš„å®˜æ–¹æ–‡æ¡£ä¸Špublishçš„ã€‚è€Œåœ¨2013å¹´çš„Apacheconä¸Šï¼ŒKafka Replicationçš„æŠ€æœ¯æ¼”è®²ä¸Šä¹Ÿæ˜ç¡®è¯´æ˜äº†â€œKafka Replication: Pick CAâ€ã€‚<br><br>æ‰€ä»¥ä½ ä¼šå‘ç°ï¼Œä»–ä»¬çš„è®¾è®¡æ€è·¯æ˜¯ä»…ä»…å°±Intra-clusterçš„data replicationå‡ºå‘çš„ã€‚å½“ç„¶ï¼Œå¦‚æœä»æ•´ä¸ªKafkaç³»ç»Ÿæ¥è¯´ï¼Œæ˜¯ä¸å¯èƒ½æ”¾å¼ƒPçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557185087,"ip_address":"","comment_id":91772,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14442007855","product_id":100025301,"comment_content":"kafka çš„replicationæœºåˆ¶ï¼Œå³ä½¿å‡ºç°åˆ†åŒºè¿™æ ·çš„é”™è¯¯ï¼Œç³»ç»Ÿä¹Ÿèƒ½å¤Ÿé€šè¿‡é¢†å¯¼è€…èŠ‚ç‚¹è¿”å›æ¶ˆæ¯ã€‚æ€ä¹ˆç®—æ”¾å¼ƒäº†På‘¢ï¼Ÿè°¢è°¢ã€‚","like_count":3,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449025,"discussion_content":"è°¢è°¢ä½ çš„æé—®ï¼æˆ‘çš„ç†è§£æ˜¯å¦‚æœä»…ä»…å°±ä¸€ä¸ªKafka Replication clusteræ¥è¯´ï¼Œå¦‚æœé¢†å¯¼è€…æŒ‚äº†æˆ‘ä»¬å°±ä¸ä¼šå†ä»è¿™ä¸ªclusteræ‹¿åˆ°å†…å®¹äº†ï¼Œæ‰€ä»¥åœ¨Intra-cluster Replicationè¿™ä¸ªè®¾è®¡ç‚¹ä¸Šï¼Œä»–ä»¬æ˜¯ä¸è€ƒè™‘Pçš„ã€‚\n\nä¹‹æ‰€ä»¥æˆ‘åœ¨æ–‡ä¸­è¯´Kafka Replicationé€‰æ‹©äº†CAï¼Œæ˜¯å› ä¸ºKafkaçš„ä½œè€…ä¹‹ä¸€Jun Raoåœ¨è®¾è®¡Kafka Replicationçš„æ—¶å€™ï¼Œæ˜ç¡®è¯´æ˜äº†â€œAll distributed systems must make trade-offs between guaranteeing consistency, availability, and partition tolerance. Our goal was to support replication in a Kafka cluster within a single datacenter, where network partitioning is rare, so our design focuses on maintaining highly available and strongly consistent replicas.â€ï¼Œè¿™ä¸€ç‚¹æ˜¯åœ¨Linkedinçš„å®˜æ–¹æ–‡æ¡£ä¸Špublishçš„ã€‚è€Œåœ¨2013å¹´çš„Apacheconä¸Šï¼ŒKafka Replicationçš„æŠ€æœ¯æ¼”è®²ä¸Šä¹Ÿæ˜ç¡®è¯´æ˜äº†â€œKafka Replication: Pick CAâ€ã€‚\n\næ‰€ä»¥ä½ ä¼šå‘ç°ï¼Œä»–ä»¬çš„è®¾è®¡æ€è·¯æ˜¯ä»…ä»…å°±Intra-clusterçš„data replicationå‡ºå‘çš„ã€‚å½“ç„¶ï¼Œå¦‚æœä»æ•´ä¸ªKafkaç³»ç»Ÿæ¥è¯´ï¼Œæ˜¯ä¸å¯èƒ½æ”¾å¼ƒPçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557185087,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136532,"user_name":"Geek_guys","can_delete":false,"product_type":"c1","uid":1667727,"ip_address":"","ucode":"4B4EBF0254D4A0","user_header":"","comment_is_top":false,"comment_ctime":1569465701,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10159400293","product_id":100025301,"comment_content":"å…¶å®ä¸ºå•¥è¦çº ç»“è¿™äº›æ–‡å­—æ¦‚å¿µå‘¢ï¼Œä¸ªäººæ„Ÿè§‰è€å¸ˆåœ¨æ–‡ç« é‡Œè®²çš„è¿™äº›ä¾‹å­å¾ˆå®¹æ˜“è¯¯å¯¼å¬ä¼—å’Œè¯»è€…ï¼Œæœ‰äº›æ ¹æœ¬å°±æ²¡æœ‰è®²æ¸…æ¥šï¼Œæ¯”å¦‚redisä½ è¯´æ˜¯CPï¼Œå¤§å®¶çŸ¥é“redisçš„é«˜å¯ç”¨æœ‰ä¸»ä»æ¨¡å¼ï¼Œå“¨å…µæ¨¡å¼ï¼Œclusteræ¨¡å¼ï¼Œå¦‚æœè„±ç¦»è¿™äº›æ¶æ„æˆ–è€…ä¸šåŠ¡åœºæ™¯è®²CAPï¼Œæœªå…å¤ªæœ‰ç‚¹çº¸ä¸Šè°ˆå…µï¼Œä¸æ•¢è‹ŸåŒã€‚CAPä¸æ˜¯ä¸€å¥—æ–¹æ³•è®ºï¼Œè€Œæ˜¯ä¸€ä¸ªç»“æœï¼Œä»»ä½•åˆ†å¸ƒå¼ç³»ç»Ÿçš„è®¾è®¡ä¸€å®šæ˜¯åœ¨ç‰¹å®šç¯å¢ƒä¸‹è§£å†³æŸä¸ªæˆ–è€…æŸäº›é—®é¢˜ï¼ŒCAPåªæ˜¯è¿™äº›è®¾è®¡åçš„ä¸€ä¸ªç»“æœè€Œå·²ã€‚","like_count":2},{"had_liked":false,"id":94317,"user_name":"å’Œä½ ä¸€èµ·æ¬ç –çš„èƒ¡å¤§çˆ·","can_delete":false,"product_type":"c1","uid":1008587,"ip_address":"","ucode":"54607F4E17917A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/cb/7c004188.jpg","comment_is_top":false,"comment_ctime":1557768435,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10147703027","product_id":100025301,"comment_content":"kafkaçš„ä¾‹å­å…¶å®å¤æ‚ï¼Œä¸å¤§é€‚åˆä¸¾pçš„ä¾‹å­ï¼Œkafkaä¹Ÿä¸ä¸€å®šè¦å…¨syncä¹‹åå†™å…¥æ‰ç¡®è®¤ï¼Œisrä¹Ÿæ˜¯å¯ä»¥é…çš„ã€‚æˆ‘çš„ç†è§£è¿™é‡ŒæŸå¤±pæ˜¯åœ¨isrä¸ç­‰äºreplicaï¼Œåˆ†åŒºåleaderä¸è§äº†ï¼Œä¸€ä¸ªæ²¡åŒæ­¥çš„replicaå˜æˆleaderï¼Œä¸€ä¼šleaderå›æ¥äº†ï¼Œä¸¤è¾¹æ•°æ®å°±å¯¹ä¸ä¸Šäº†ã€‚å¦‚æœisrè®¾ç½®æˆå’Œreplicaä¸€è‡´ï¼Œä¸€æ—¦åˆ†åŒºäº†ï¼Œæœ‰replicaæ— æ³•å†™å…¥äº†ï¼Œkafkaé‚£ä¸ªlogå°±æ²¡æ³•ç”¨äº†. ä½†æ˜¯å¦‚æœisrèƒ½æŒ‰ç”Ÿå­˜èŠ‚ç‚¹æ”¶ç¼©ï¼Œæ˜¯ä¸æ˜¯è¿™ä¸ªé—®é¢˜ä¹Ÿè§£å†³äº†ã€‚","like_count":2},{"had_liked":false,"id":93868,"user_name":"J.M.Liu","can_delete":false,"product_type":"c1","uid":1200037,"ip_address":"","ucode":"B2CB84B8E923A6","user_header":"https://static001.geekbang.org/account/avatar/00/12/4f/a5/71358d7b.jpg","comment_is_top":false,"comment_ctime":1557644807,"is_pvip":false,"replies":[{"id":"33521","content":"è°¢è°¢ä½ çš„å†æ¬¡ç•™è¨€ï¼æ˜¯çš„ï¼Œç†è§£æ­£ç¡®ï¼æ—¢ç„¶replication1å¯¹äºé›†ç¾¤æ¥è¯´ç°åœ¨ä»¥åŠä»¥åéƒ½ä¸å¯ç”¨äº†ï¼Œä¹Ÿå°±ç›¸å¯¹äºé›†ç¾¤æ²¡æœ‰äº†è¿™ä¸ªreplication1ï¼Œé‚£ä¹Ÿå°±ä¸å­˜åœ¨è¯´ç½‘ç»œåˆ†åŒºåreplication1è¿˜æ˜¯å¦åœ¨é›†ç¾¤æ­£å¸¸è¿è¡Œçš„é—®é¢˜äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557648032,"ip_address":"","comment_id":93868,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10147579399","product_id":100025301,"comment_content":"è€å¸ˆï¼Œæˆ‘å¥½åƒæ‡‚äº†ã€‚kafka replicationä¸ä¿è¯pï¼ŒæŒ‡çš„æ˜¯å½“ç½‘ç»œå‡ºç°åˆ†åŒºåï¼Œå’Œä¸»æœ‰ä¸€å°å‰¯æœ¬æ¯”å¦‚replicatin1å’Œleaderå¤±è”äº†ï¼Œé‚£replication1å°±ä¼šè¢«è¸¢å‡ºå»ï¼Œç›¸å½“å®ƒäºå®•æœºäº†ã€‚åœ¨è¿™é‡Œï¼Œåˆ†åŒºå¯¼è‡´replication1ä¸å¯ç”¨äº†ï¼Œæ‰€ä»¥è¯´ä¸ä¿è¯pã€‚<br>æ˜¯è¿™æ ·ç†è§£å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449802,"discussion_content":"è°¢è°¢ä½ çš„å†æ¬¡ç•™è¨€ï¼æ˜¯çš„ï¼Œç†è§£æ­£ç¡®ï¼æ—¢ç„¶replication1å¯¹äºé›†ç¾¤æ¥è¯´ç°åœ¨ä»¥åŠä»¥åéƒ½ä¸å¯ç”¨äº†ï¼Œä¹Ÿå°±ç›¸å¯¹äºé›†ç¾¤æ²¡æœ‰äº†è¿™ä¸ªreplication1ï¼Œé‚£ä¹Ÿå°±ä¸å­˜åœ¨è¯´ç½‘ç»œåˆ†åŒºåreplication1è¿˜æ˜¯å¦åœ¨é›†ç¾¤æ­£å¸¸è¿è¡Œçš„é—®é¢˜äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557648032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93672,"user_name":"J.M.Liu","can_delete":false,"product_type":"c1","uid":1200037,"ip_address":"","ucode":"B2CB84B8E923A6","user_header":"https://static001.geekbang.org/account/avatar/00/12/4f/a5/71358d7b.jpg","comment_is_top":false,"comment_ctime":1557556352,"is_pvip":false,"replies":[{"id":"33498","content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼å…¶å®é€‰æ‹©CAçš„ç³»ç»Ÿæ˜¯å°‘ä¹‹åˆå°‘ï¼Œä½ çš„é—®é¢˜é‡Œé¢æåˆ°äº†ä¸€ä¸ªå…³é”®ç‚¹ï¼Œå½“æœºå­æŒ‚æ‰çš„æ—¶å€™æˆ–è€…å½“ç½‘ç»œåˆ†åŒºå‡ºç°çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šç›´æ¥å°†è¿™ä¸ªæœºå­ä»é›†ç¾¤ä¸­å‰”é™¤æ‰äº†ï¼Œä¹Ÿå°±æ˜¯è¯´æ— è®ºä»¥åè¿™ä¸ªæœºå­å¤„äºä»€ä¹ˆçŠ¶æ€éƒ½ä¸ä¼šå†å‡ºç°åœ¨è¿™ä¸ªé›†ç¾¤ä¸­ï¼Œåœ¨é›†ç¾¤ä¸­å‰©ä¸‹çš„æœºå­æ•°æ®ä¸€ç›´éƒ½æ˜¯åŒæ­¥çš„ï¼Œæ‰€ä»¥å°±æœ‰äº†æœ‰CAå´ä¸å­˜åœ¨Pçš„è¯´æ³•äº†ã€‚ä¸çŸ¥é“è¿™ä¸ªè§£é‡Šä½ è§‰å¾—æ€ä¹ˆæ ·ï¼ŒåŒæ—¶ä¹Ÿæ¬¢è¿ä½ ä¸ç†è§£çš„è¯ç»§ç»­æé—®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557641841,"ip_address":"","comment_id":93672,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10147490944","product_id":100025301,"comment_content":"ä¸å¤ªç†è§£caç³»ç»Ÿï¼Œå…è®¸æœ‰æœºå­æŒ‚æ‰ï¼Œå´ä¸å…è®¸ç½‘ç»œåˆ†åŒºã€‚æœºå­éƒ½æŒ‚æ‰äº†ï¼Œåˆ°è¿™å°æœºå­çš„ç½‘ç»œå¯ä¸å°±æ˜¯è¿ä¸é€šäº†å—ï¼Ÿ å…è®¸æœºå­åŒ–æ‰å´ä¸å…è®¸æœºå­å’Œé›†ç¾¤å¤±è”ï¼Œè¿™æ˜¯ä¸ªæ‚–è®ºå‘€ã€‚æ€ä¹ˆç†è§£è¿™ä¸ªå‘¢è€å¸ˆ","like_count":2,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449725,"discussion_content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼å…¶å®é€‰æ‹©CAçš„ç³»ç»Ÿæ˜¯å°‘ä¹‹åˆå°‘ï¼Œä½ çš„é—®é¢˜é‡Œé¢æåˆ°äº†ä¸€ä¸ªå…³é”®ç‚¹ï¼Œå½“æœºå­æŒ‚æ‰çš„æ—¶å€™æˆ–è€…å½“ç½‘ç»œåˆ†åŒºå‡ºç°çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šç›´æ¥å°†è¿™ä¸ªæœºå­ä»é›†ç¾¤ä¸­å‰”é™¤æ‰äº†ï¼Œä¹Ÿå°±æ˜¯è¯´æ— è®ºä»¥åè¿™ä¸ªæœºå­å¤„äºä»€ä¹ˆçŠ¶æ€éƒ½ä¸ä¼šå†å‡ºç°åœ¨è¿™ä¸ªé›†ç¾¤ä¸­ï¼Œåœ¨é›†ç¾¤ä¸­å‰©ä¸‹çš„æœºå­æ•°æ®ä¸€ç›´éƒ½æ˜¯åŒæ­¥çš„ï¼Œæ‰€ä»¥å°±æœ‰äº†æœ‰CAå´ä¸å­˜åœ¨Pçš„è¯´æ³•äº†ã€‚ä¸çŸ¥é“è¿™ä¸ªè§£é‡Šä½ è§‰å¾—æ€ä¹ˆæ ·ï¼ŒåŒæ—¶ä¹Ÿæ¬¢è¿ä½ ä¸ç†è§£çš„è¯ç»§ç»­æé—®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557641841,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91808,"user_name":"æ¡ƒå›­æ‚ ç„¶åœ¨","can_delete":false,"product_type":"c1","uid":1017637,"ip_address":"","ucode":"704460D9CAD1CB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/87/25/898dea4e.jpg","comment_is_top":false,"comment_ctime":1557113082,"is_pvip":false,"replies":[{"id":"32934","content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼På±æ€§çš„å¥½å¤„æ˜¯åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œæ— è®ºç½‘ç»œå‘ä¸å‘ç”Ÿåˆ†åŒºï¼Œæ•´ä¸ªç³»ç»Ÿéƒ½å¯ä»¥ç…§å¸¸è¿è¡Œã€‚ä¸ç®¡åˆ†åŒºåç”¨æˆ·è¯»åˆ°çš„æ˜¯stale dataï¼Œè¿˜æ˜¯up-to-date dataã€‚åƒå¸¸è¶…åŒå­¦çš„ç•™è¨€ä¸­ä¸¾äº†å‡ ä¸ªä¾‹å­ï¼Œå¦‚æœç³»ç»Ÿè®¾è®¡ä¸Šæ²¡æœ‰äº†På±æ€§ï¼Œå¾ˆå¤šæ—¶å€™network partitionå‘ç”Ÿäº†ï¼Œ é‚£å‰©ä¸‹çš„ä¸€äº›èŠ‚ç‚¹å¯èƒ½å°±æ— æ³•å†ç”¨äº†ï¼Œæœ€åçš„æƒ…å†µä¸‹å¯èƒ½æ•´ä¸ªç³»ç»Ÿéƒ½æ— æ³•è¿è¡Œä¸‹å»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557197537,"ip_address":"","comment_id":91808,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10147047674","product_id":100025301,"comment_content":"æˆ‘ç†è§£kafkaä½œä¸ºä¸€ä¸ªæ¶ˆæ¯ç³»ç»Ÿå¹³å°ï¼Œæ˜¯ä¸å…è®¸æ¶ˆæ¯ä¸¢å¤±çš„ï¼Œæ‰€ä»¥é€šè¿‡replicationæœºåˆ¶å†—ä½™æ•°æ®ä¿è¯ã€‚ä½†æ˜¯På±æ€§æ›´åƒæ˜¯ä¸€ä¸ªç¼ºç‚¹ï¼ˆå®¹å¿äº†æ¶ˆæ¯ä¸¢å¤±ï¼‰ï¼Œå®ƒçš„å¥½å¤„è¯¥æ€ä¹ˆç†è§£å‘¢ï¼Ÿè°¢è°¢è€å¸ˆï¼","like_count":2,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449040,"discussion_content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼På±æ€§çš„å¥½å¤„æ˜¯åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œæ— è®ºç½‘ç»œå‘ä¸å‘ç”Ÿåˆ†åŒºï¼Œæ•´ä¸ªç³»ç»Ÿéƒ½å¯ä»¥ç…§å¸¸è¿è¡Œã€‚ä¸ç®¡åˆ†åŒºåç”¨æˆ·è¯»åˆ°çš„æ˜¯stale dataï¼Œè¿˜æ˜¯up-to-date dataã€‚åƒå¸¸è¶…åŒå­¦çš„ç•™è¨€ä¸­ä¸¾äº†å‡ ä¸ªä¾‹å­ï¼Œå¦‚æœç³»ç»Ÿè®¾è®¡ä¸Šæ²¡æœ‰äº†På±æ€§ï¼Œå¾ˆå¤šæ—¶å€™network partitionå‘ç”Ÿäº†ï¼Œ é‚£å‰©ä¸‹çš„ä¸€äº›èŠ‚ç‚¹å¯èƒ½å°±æ— æ³•å†ç”¨äº†ï¼Œæœ€åçš„æƒ…å†µä¸‹å¯èƒ½æ•´ä¸ªç³»ç»Ÿéƒ½æ— æ³•è¿è¡Œä¸‹å»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557197537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91732,"user_name":"wmg","can_delete":false,"product_type":"c1","uid":1070036,"ip_address":"","ucode":"BA4CED171B59E9","user_header":"https://static001.geekbang.org/account/avatar/00/10/53/d4/2ed767ea.jpg","comment_is_top":false,"comment_ctime":1557102319,"is_pvip":false,"replies":[{"id":"32911","content":"è°¢è°¢ä½ çš„æé—®ï¼å¯¹äºæ•´ä¸ªKafkaç³»ç»Ÿæ¥è¯´ï¼Œä½ çš„ç†è§£æ˜¯æ­£ç¡®çš„ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557191036,"ip_address":"","comment_id":91732,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10147036911","product_id":100025301,"comment_content":"è€å¸ˆï¼Œå¦‚æœkafkaæ”¯æŒå¿…é¡»åŒæ­¥èŠ‚ç‚¹å†™æˆåŠŸï¼Œé‚£æ˜¯ä¸æ˜¯å°±æ˜¯ä¸€ä¸ªcpç³»ç»Ÿï¼Œå¦‚æœæ”¯æŒéå¥åº·èŠ‚ç‚¹é€‰ä¸¾ä¸ºleaderï¼Œæ˜¯ä¸æ˜¯å°±æ˜¯apç³»ç»Ÿï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449007,"discussion_content":"è°¢è°¢ä½ çš„æé—®ï¼å¯¹äºæ•´ä¸ªKafkaç³»ç»Ÿæ¥è¯´ï¼Œä½ çš„ç†è§£æ˜¯æ­£ç¡®çš„ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557191036,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":94739,"user_name":"Flash","can_delete":false,"product_type":"c1","uid":1236163,"ip_address":"","ucode":"E285075C9E0B02","user_header":"https://static001.geekbang.org/account/avatar/00/12/dc/c3/e4ba51d5.jpg","comment_is_top":false,"comment_ctime":1557887726,"is_pvip":false,"replies":[{"id":"34206","content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼æœ€ç»ˆä¸€è‡´æ€§å’Œçº¿æ€§ä¸€è‡´æ€§å¹¶ä¸æ˜¯ä¸€ä¸ªæ„æ€ã€‚<br><br>çº¿æ€§ä¸€è‡´æ€§æ˜¯å±äºå¼ºä¸€è‡´æ€§ï¼Œå¦‚æœç”¨åœ¨å¾®åšä¸Šå°±æ˜¯è¯´å¦‚æœä¸€ä¸ªç”¨æˆ·å‘äº†ä¸€æ¡æ–°çš„å¾®åšï¼Œé‚£è¿™ä¸ªç”¨æˆ·çš„æ‰€æœ‰å¥½å‹åœ¨åˆ·æ–°è¿™ä¸ªçš„ç”¨æˆ·å¾®åšçš„æ—¶å€™éƒ½ä¸€å®šè¦çœ‹åˆ°è¿™æ¡æ–°çš„å¾®åšã€‚<br><br>å¦‚æœæ˜¯æœ€ç»ˆä¸€è‡´æ€§çš„è¯ï¼ŒæŒ‡çš„æ˜¯å¦‚æœä¸€ä¸ªç”¨æˆ·å‘äº†ä¸€æ¡æ–°çš„å¾®åšï¼Œé‚£è¿™ä¸ªç”¨æˆ·çš„å¥½å‹åˆ·æ–°è¿™ä¸ªç”¨æˆ·å¾®åšçš„æ—¶å€™ï¼Œæœ‰å¯èƒ½ä¼šçœ‹åˆ°è¿™æ¡æ–°çš„å¾®åšï¼Œä¹Ÿæœ‰å¯èƒ½çœ‹ä¸åˆ°ã€‚ä½†æ˜¯ä¸æ–­åœ°åˆ·æ–°ä¹‹åï¼Œç»è¿‡ä¸€æ®µæ—¶é—´æœ€ç»ˆæ‰€æœ‰çš„ç”¨æˆ·æ€»ä¼šçœ‹åˆ°è¿™æ¡æ–°çš„å¾®åšã€‚<br><br>æ‰€ä»¥è¯´å‘å¾®åšä¸€èˆ¬éƒ½ä¼šç”¨åˆ°APå±æ€§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1558128832,"ip_address":"","comment_id":94739,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5852855022","product_id":100025301,"comment_content":"è°¢è°¢è€å¸ˆï¼Œæ˜¯ä¸äº†è§£å¾®åšçš„æœºåˆ¶ï¼Œè¯·é—®è€å¸ˆï¼Œå‘å¾®åšåº”è¯¥è¦ç”¨ä»€ä¹ˆCAPå±æ€§ï¼Ÿ<br>çœ‹åˆ°ç•™è¨€æœ‰äººè¯´ï¼Œå‘å¾®åšä¿è¯æœ€ç»ˆä¸€è‡´æ€§å°±å¥½ï¼Œä¸çŸ¥é“è¿™ä¸ªè·ŸCAPçš„çº¿æ€§ä¸€è‡´æ€§æ˜¯ä¸æ˜¯ä¸€ä¸ªæ„æ€ï¼Ÿ<br>","like_count":1,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450189,"discussion_content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼æœ€ç»ˆä¸€è‡´æ€§å’Œçº¿æ€§ä¸€è‡´æ€§å¹¶ä¸æ˜¯ä¸€ä¸ªæ„æ€ã€‚\n\nçº¿æ€§ä¸€è‡´æ€§æ˜¯å±äºå¼ºä¸€è‡´æ€§ï¼Œå¦‚æœç”¨åœ¨å¾®åšä¸Šå°±æ˜¯è¯´å¦‚æœä¸€ä¸ªç”¨æˆ·å‘äº†ä¸€æ¡æ–°çš„å¾®åšï¼Œé‚£è¿™ä¸ªç”¨æˆ·çš„æ‰€æœ‰å¥½å‹åœ¨åˆ·æ–°è¿™ä¸ªçš„ç”¨æˆ·å¾®åšçš„æ—¶å€™éƒ½ä¸€å®šè¦çœ‹åˆ°è¿™æ¡æ–°çš„å¾®åšã€‚\n\nå¦‚æœæ˜¯æœ€ç»ˆä¸€è‡´æ€§çš„è¯ï¼ŒæŒ‡çš„æ˜¯å¦‚æœä¸€ä¸ªç”¨æˆ·å‘äº†ä¸€æ¡æ–°çš„å¾®åšï¼Œé‚£è¿™ä¸ªç”¨æˆ·çš„å¥½å‹åˆ·æ–°è¿™ä¸ªç”¨æˆ·å¾®åšçš„æ—¶å€™ï¼Œæœ‰å¯èƒ½ä¼šçœ‹åˆ°è¿™æ¡æ–°çš„å¾®åšï¼Œä¹Ÿæœ‰å¯èƒ½çœ‹ä¸åˆ°ã€‚ä½†æ˜¯ä¸æ–­åœ°åˆ·æ–°ä¹‹åï¼Œç»è¿‡ä¸€æ®µæ—¶é—´æœ€ç»ˆæ‰€æœ‰çš„ç”¨æˆ·æ€»ä¼šçœ‹åˆ°è¿™æ¡æ–°çš„å¾®åšã€‚\n\næ‰€ä»¥è¯´å‘å¾®åšä¸€èˆ¬éƒ½ä¼šç”¨åˆ°APå±æ€§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558128832,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93792,"user_name":"LaimanYeung","can_delete":false,"product_type":"c1","uid":1503079,"ip_address":"","ucode":"D809F2842031CA","user_header":"https://static001.geekbang.org/account/avatar/00/16/ef/67/bb9d9358.jpg","comment_is_top":false,"comment_ctime":1557593293,"is_pvip":false,"replies":[{"id":"33488","content":"è°¢è°¢ä½ çš„æ€»ç»“ï¼éå¸¸æ£’ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557639495,"ip_address":"","comment_id":93792,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5852560589","product_id":100025301,"comment_content":"Aï¼šé›†ç¾¤æŸä¸ªæˆ–æŸå‡ èŠ‚ç‚¹æŒ‚æ‰æ—¶ï¼Œå®¢æˆ·ç«¯ä»ç„¶å¯ä»¥è®¿é—®æœåŠ¡ç«¯.<br>Cï¼šå®¢æˆ·è®¿é—®é›†ç¾¤ä¸­ä»»ä¸€æœåŠ¡ç«¯ï¼Œè¿”å›çš„çŠ¶æ€éƒ½æ˜¯ä¸€è‡´çš„.<br>Pï¼šé›†ç¾¤å†…éƒ¨æœºå™¨é€šè®¯å‡ºç°é—®é¢˜å¯¼è‡´æœåŠ¡Açš„æ•°æ®æ— æ³•åŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹æ—¶ï¼Œå®¢æˆ·ç«¯è®¿é—®æœåŠ¡Aï¼ŒæœåŠ¡Aæ‰”èƒ½è¿”å›æœªåŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹çš„æ•°æ®.","like_count":2,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449771,"discussion_content":"è°¢è°¢ä½ çš„æ€»ç»“ï¼éå¸¸æ£’ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557639495,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1066752,"avatar":"https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg","nickname":"piboye","note":"","ucode":"7CFD8712857A85","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311046,"discussion_content":"a ä¸å…‰æ˜¯èŠ‚ç‚¹æŒ‚äº†å§ï¼Œåˆ†åŒºæ˜¯æŒ‡èŠ‚ç‚¹é—´ç½‘ç»œä¸åŒï¼Œä½†å’Œå®¢æˆ·ç«¯çš„è¿æ¥æ˜¯é€šçš„ã€‚ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602201953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93418,"user_name":"hua168","can_delete":false,"product_type":"c1","uid":1065255,"ip_address":"","ucode":"CFF9A7E86EBA48","user_header":"https://static001.geekbang.org/account/avatar/00/10/41/27/3ff1a1d6.jpg","comment_is_top":false,"comment_ctime":1557467201,"is_pvip":false,"replies":[{"id":"33556","content":"è°¢è°¢ä½ çš„æé—®ï¼<br>1. æ˜¯çš„ï¼ŒèŠ‚ç‚¹æ˜¯æŒ‡æ‰€æœ‰çš„èŠ‚ç‚¹ã€‚<br>2. å¦‚æœæŒ‰ç…§ä½ æ‰€è¯´çš„æ¶æ„ï¼Œä¸¤ä¸ªèŠ‚ç‚¹éƒ½å…è®¸å†™å…¥æ•°æ®çš„è¯ï¼Œä¸­é—´è‚¯å®šä¼šæœ‰ä¸€ä¸ªmaster nodeå»åŒæ­¥è¿™äº›å†™å…¥æ•°æ®ã€‚è€Œæˆ‘æ‰€ç†è§£åœ¨ä½ è¯´çš„ä¾‹å­ä¸­å¯ä»¥éšæœºè¯»å–ä»»æ„ä¸€ä¸ªnodeçš„æ•°æ®è¿™ç§æ¶æ„ï¼Œä½ å¯ä»¥å‚è€ƒdynamo quorumçš„åšæ³•ï¼Œè¦ä¿æŒåŒæ­¥çš„è¯ä¸å¯èƒ½åªè¯»ä¸€ä¸ªnodeçš„æ•°æ®ï¼Œè€Œæ˜¯è¦è¯»å–Nä¸ªnodesçš„æ•°æ®çœ‹çœ‹æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´äº†æ‰è¿”å›ç»“æœç»™å®¢æˆ·ã€‚<br>3. å¦‚æœæ˜¯æŒ‰ç…§ä¸“æ ä¸­æ‰€è®²çš„Kafka Replicationçš„ä¾‹å­ï¼Œå› ä¸ºå‡ºç°network partitionå‡ºç°è€Œå¯¼è‡´replicationèŠ‚ç‚¹æ— æ³•åŒæ­¥æ•°æ®äº†ï¼Œé‚£è¿™ä¸ªreplicationèŠ‚ç‚¹å°±ä¼šè¢«å‰”é™¤å‡ºé›†ç¾¤ï¼Œå‰©ä¸‹çš„æ‰€æœ‰èŠ‚ç‚¹æ•°æ®è¿˜æ˜¯åŒæ­¥çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557700366,"ip_address":"","comment_id":93418,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5852434497","product_id":100025301,"comment_content":"Availabilityå’ŒPartition Toleranceå¹¶ä¸æ˜¯ç”±æ˜¯å¦å…è®¸æ•°æ®ä¸¢å¤±æ¥åˆ¤æ–­çš„ã€‚<br><br>æˆ‘æ¥ä¸¾ä¸ªä¾‹å­è¯´æ˜å§ã€‚å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªç”±ä¸¤ä¸ªèŠ‚ç‚¹ç»„æˆçš„é›†ç¾¤ï¼Œè¿™ä¸¤ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥ç‹¬ç«‹è¿ä½œä¹Ÿå¯ä»¥ä¸å¯¹æ–¹é€šè®¯ï¼Œè€Œå®¢æˆ·ç«¯æ˜¯ä¸è¿™ä¸ªé›†ç¾¤é€šè®¯çš„ã€‚ä½œä¸ºä¸€ä¸ªé›†ç¾¤æ¥è¯´ï¼ŒAvailabilityæŒ‡çš„æ˜¯ä¸ç®¡è¿™ä¸¤ä¸ªèŠ‚ç‚¹å“ªä¸€ä¸ªèŠ‚ç‚¹åæ‰ä¸èƒ½è¿ä½œäº†ï¼Œå¯¹äºå®¢æˆ·ç«¯æ¥è¯´è¿˜æ˜¯å¯ä»¥ç»§ç»­ä¸è¿™ä¸ªé›†ç¾¤è¿›è¡Œé€šè®¯çš„ã€‚Partition ToleranceæŒ‡å¾—æ˜¯ï¼Œæœ¬æ¥è¿™ä¸¤ä¸ªèŠ‚ç‚¹å¯èƒ½æ˜¯éœ€è¦äº’ç›¸é€šè®¯æ¥åŒæ­¥æ•°æ®çš„ï¼Œè€Œå› ä¸ºNetwork Partitionä½¿å¾—å®ƒä»¬ä¹‹é—´ä¸èƒ½é€šè®¯äº†ï¼Œä½†æ˜¯å¯¹äºå®¢æˆ·ç«¯æ¥è¯´è¿˜æ˜¯å¯ä»¥ç»§ç»­ä¸è¿™ä¸ªé›†ç¾¤è¿›è¡Œé€šè®¯çš„ã€‚<br><br>æŒ‰ç…§æ‚¨è¿™æ ·è¯´ï¼Œæˆ‘ç–‘æƒ‘çš„æ˜¯ï¼š<br>1. èŠ‚ç‚¹æ˜¯æ‰€æœ‰èŠ‚ç‚¹ï¼ŒåŒ…æ‹¬ä¸»èŠ‚ç‚¹å§ï¼Ÿ<br>2. ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´ï¼Œå¦‚æœæœ‰æ•°æ®åˆ†åˆ«å†™å…¥çš„è¯ï¼Œé‚£ä¸å°±æ˜¯æ•°æ®ä¸ä¸€è‡´å—ï¼Ÿ<br>  å¦‚æœnode1å†™å…¥Aæ•°æ®ï¼Œnode2è¢«å†™å…¥Bæ•°æ®ï¼Œæ€åŒæ­¥ï¼Ÿé‚£æ•°æ®ä¸æ˜¯ä¹±å¥—äº†ï¼Ÿè¯»ä¹Ÿå‡ºç°ä¸ä¸€çš„æƒ…å†µ<br>æ¯”å¦‚æ˜¯é‡‘é’±ç±»çš„ï¼Œä¸èƒ½æ˜¯è´Ÿæ•°ï¼Œæˆ‘è¯·æ±‚node1èŠ±å®Œäº†ï¼Œæˆ‘åˆ·æ–°ä¸€ä¸‹åˆè®¿é—®åˆ°node2å‘ç°è¿˜æ˜¯åŸæ¥ï¼Œæˆ‘åˆèŠ±å®Œäº†ï¼Œé‚£æˆ‘ä¸æ˜¯å¯ä»¥èŠ±åŒå€ï¼Ÿä¸€åŒæ­¥é‚£ä¸æ˜¯å‡ºé”™ï¼ŸåŒæ­¥ä¸äº†ï¼Œå› ä¸ºæ‰£åŒå€ï¼Œå·²å°äº0<br><br>3. å¦‚æœæ˜¯CAçš„è¯ï¼ŒPå‡ºé—®é¢˜ï¼Œä¸æ˜¯å‡ºç°ä¸ä¸€è‡´å—ï¼Œé‚£ä¹ˆæˆ‘æ€ä¹ˆä¿è¯Cï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449624,"discussion_content":"è°¢è°¢ä½ çš„æé—®ï¼\n1. æ˜¯çš„ï¼ŒèŠ‚ç‚¹æ˜¯æŒ‡æ‰€æœ‰çš„èŠ‚ç‚¹ã€‚\n2. å¦‚æœæŒ‰ç…§ä½ æ‰€è¯´çš„æ¶æ„ï¼Œä¸¤ä¸ªèŠ‚ç‚¹éƒ½å…è®¸å†™å…¥æ•°æ®çš„è¯ï¼Œä¸­é—´è‚¯å®šä¼šæœ‰ä¸€ä¸ªmaster nodeå»åŒæ­¥è¿™äº›å†™å…¥æ•°æ®ã€‚è€Œæˆ‘æ‰€ç†è§£åœ¨ä½ è¯´çš„ä¾‹å­ä¸­å¯ä»¥éšæœºè¯»å–ä»»æ„ä¸€ä¸ªnodeçš„æ•°æ®è¿™ç§æ¶æ„ï¼Œä½ å¯ä»¥å‚è€ƒdynamo quorumçš„åšæ³•ï¼Œè¦ä¿æŒåŒæ­¥çš„è¯ä¸å¯èƒ½åªè¯»ä¸€ä¸ªnodeçš„æ•°æ®ï¼Œè€Œæ˜¯è¦è¯»å–Nä¸ªnodesçš„æ•°æ®çœ‹çœ‹æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´äº†æ‰è¿”å›ç»“æœç»™å®¢æˆ·ã€‚\n3. å¦‚æœæ˜¯æŒ‰ç…§ä¸“æ ä¸­æ‰€è®²çš„Kafka Replicationçš„ä¾‹å­ï¼Œå› ä¸ºå‡ºç°network partitionå‡ºç°è€Œå¯¼è‡´replicationèŠ‚ç‚¹æ— æ³•åŒæ­¥æ•°æ®äº†ï¼Œé‚£è¿™ä¸ªreplicationèŠ‚ç‚¹å°±ä¼šè¢«å‰”é™¤å‡ºé›†ç¾¤ï¼Œå‰©ä¸‹çš„æ‰€æœ‰èŠ‚ç‚¹æ•°æ®è¿˜æ˜¯åŒæ­¥çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557700366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":92803,"user_name":"æ¶µ","can_delete":false,"product_type":"c1","uid":1502742,"ip_address":"","ucode":"BB8575DB13F1E0","user_header":"https://static001.geekbang.org/account/avatar/00/16/ee/16/742956ac.jpg","comment_is_top":false,"comment_ctime":1557328581,"is_pvip":false,"replies":[{"id":"33221","content":"è°¢è°¢ä½ çš„æé—®ï¼ç°åœ¨åœ¨å¾ˆå¤šç³»ç»Ÿçš„è®¾è®¡ä¸­éƒ½æ˜¯å¯ä»¥é€šè¿‡è°ƒèŠ‚ç³»ç»Ÿé…ç½®æ¥è¾¾åˆ°CPæˆ–è€…APçš„åŠŸèƒ½ï¼Œä½†æ˜¯ä¸å¯èƒ½åŒæ—¶æ»¡è¶³Cã€Aã€Pè¿™ä¸‰ä¸ªå±æ€§ã€‚<br>åƒå¾ˆå¤šåŒå­¦ä»¬éƒ½ä¼šæåˆ°çš„ï¼Œå¦‚æœä¸€å¥—ç³»ç»Ÿé‡Œæœ‰äº†ä¸»ä»å¤åˆ¶é›†ç¾¤è¿™ç§é«˜å¯ç”¨çš„æ¶æ„ï¼Œé‚£æ˜¯ä¸æ˜¯è¿™ä¸ªç³»ç»Ÿå°±ä¸€å®šæ˜¯APç³»ç»Ÿäº†ï¼Ÿå…¶å®ä¹Ÿä¸ä¸€å®šçš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœç³»ç»Ÿå·²ç»æ­å»ºäº†ä¸»ä»å¤åˆ¶çš„é«˜å¯ç”¨æ¶æ„ï¼Œä½†æ˜¯ç³»ç»Ÿæƒ³è¾¾åˆ°CPï¼Œè€Œè¿™ä¸ªæ—¶å€™ä¸»èŠ‚ç‚¹å’Œä»èŠ‚ç‚¹çš„æ•°æ®æ›´æ–°å¯èƒ½å¹¶ä¸ä¸€è‡´ï¼Œä½†æ˜¯ä¸»èŠ‚ç‚¹å› ä¸ºæŸäº›åŸå› æ— æ³•è¿é€šæˆ–è€…æ˜¯æš‚æ—¶å´©æºƒäº†ï¼Œç³»ç»Ÿå¯ä»¥é€‰æ‹©å¯¹å®¢æˆ·ç«¯çš„è¯·æ±‚ä¸è¿”å›ä»»ä½•ç»“æœï¼Œå› ä¸ºæ•°æ®ä¸ä¸€è‡´ã€‚é‚£è¿™ä¸ªæ—¶å€™ç³»ç»Ÿå…¶å®å°±æ²¡æœ‰è¾¾åˆ°Aå±æ€§äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557427725,"ip_address":"","comment_id":92803,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5852295877","product_id":100025301,"comment_content":"è€å¸ˆå¥½ï¼Œé€šè¿‡æ‚¨å¯¹kafka replicationçš„è®²è§£ï¼Œä»¥åŠåŒå­¦ä»¬åˆ†æçš„å…¶ä»–ç³»ç»Ÿï¼Œæ„Ÿè§‰ä¸€ä¸ªåˆ†å¸ƒå¼å¹³å°åœ¨è®¾è®¡æ—¶éœ€è¦é€‰æ‹©ä¿éšœCPæˆ–APï¼Œè¢«æ‹¿æ‰çš„Aæˆ–Cä¹Ÿä¸æ˜¯å®Œå…¨ä¸è€ƒè™‘ï¼Œä¼šé€šè¿‡ä¸€äº›å…¶ä»–çš„è¾…åŠ©ç³»ç»Ÿæ¥æ”¯æŒä¿éšœï¼Œæ‰€ä»¥å¯¹äºå¹³å°æ¥è¯´ç»å¤§å¤šæ•°æ—¶é—´æ˜¯å¯ä»¥åšåˆ°CAPçš„ã€‚ä¸çŸ¥é“è¿™æ ·ç†è§£æ˜¯å¦æ­£ç¡®?","like_count":1,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449388,"discussion_content":"è°¢è°¢ä½ çš„æé—®ï¼ç°åœ¨åœ¨å¾ˆå¤šç³»ç»Ÿçš„è®¾è®¡ä¸­éƒ½æ˜¯å¯ä»¥é€šè¿‡è°ƒèŠ‚ç³»ç»Ÿé…ç½®æ¥è¾¾åˆ°CPæˆ–è€…APçš„åŠŸèƒ½ï¼Œä½†æ˜¯ä¸å¯èƒ½åŒæ—¶æ»¡è¶³Cã€Aã€Pè¿™ä¸‰ä¸ªå±æ€§ã€‚\nåƒå¾ˆå¤šåŒå­¦ä»¬éƒ½ä¼šæåˆ°çš„ï¼Œå¦‚æœä¸€å¥—ç³»ç»Ÿé‡Œæœ‰äº†ä¸»ä»å¤åˆ¶é›†ç¾¤è¿™ç§é«˜å¯ç”¨çš„æ¶æ„ï¼Œé‚£æ˜¯ä¸æ˜¯è¿™ä¸ªç³»ç»Ÿå°±ä¸€å®šæ˜¯APç³»ç»Ÿäº†ï¼Ÿå…¶å®ä¹Ÿä¸ä¸€å®šçš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœç³»ç»Ÿå·²ç»æ­å»ºäº†ä¸»ä»å¤åˆ¶çš„é«˜å¯ç”¨æ¶æ„ï¼Œä½†æ˜¯ç³»ç»Ÿæƒ³è¾¾åˆ°CPï¼Œè€Œè¿™ä¸ªæ—¶å€™ä¸»èŠ‚ç‚¹å’Œä»èŠ‚ç‚¹çš„æ•°æ®æ›´æ–°å¯èƒ½å¹¶ä¸ä¸€è‡´ï¼Œä½†æ˜¯ä¸»èŠ‚ç‚¹å› ä¸ºæŸäº›åŸå› æ— æ³•è¿é€šæˆ–è€…æ˜¯æš‚æ—¶å´©æºƒäº†ï¼Œç³»ç»Ÿå¯ä»¥é€‰æ‹©å¯¹å®¢æˆ·ç«¯çš„è¯·æ±‚ä¸è¿”å›ä»»ä½•ç»“æœï¼Œå› ä¸ºæ•°æ®ä¸ä¸€è‡´ã€‚é‚£è¿™ä¸ªæ—¶å€™ç³»ç»Ÿå…¶å®å°±æ²¡æœ‰è¾¾åˆ°Aå±æ€§äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557427725,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":92071,"user_name":"åˆ˜ä¸‡é‡Œ","can_delete":false,"product_type":"c1","uid":1504306,"ip_address":"","ucode":"B4E54997D1455F","user_header":"https://static001.geekbang.org/account/avatar/00/16/f4/32/c4550f66.jpg","comment_is_top":false,"comment_ctime":1557185961,"is_pvip":false,"replies":[{"id":"32894","content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼ç°åœ¨æ¥è¯´è¿˜æ²¡æœ‰ä¸“é—¨ä»‹ç»Apache Beamçš„ä¹¦ç±ï¼Œä¸è¿‡å¦‚æœä½ æƒ³äº†è§£åº•å±‚æ€æƒ³çš„è¿˜ï¼Œå¯ä»¥çœ‹Tyler Akidauå†™çš„Streaming Systemsã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557188207,"ip_address":"","comment_id":92071,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5852153257","product_id":100025301,"comment_content":"è€å¸ˆï¼Œæ‚¨æœ‰apache beamç›¸å…³çš„ä¹¦æ¨èå—ï¼Ÿè°¢è°¢","like_count":1,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449137,"discussion_content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼ç°åœ¨æ¥è¯´è¿˜æ²¡æœ‰ä¸“é—¨ä»‹ç»Apache Beamçš„ä¹¦ç±ï¼Œä¸è¿‡å¦‚æœä½ æƒ³äº†è§£åº•å±‚æ€æƒ³çš„è¿˜ï¼Œå¯ä»¥çœ‹Tyler Akidauå†™çš„Streaming Systemsã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557188207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91951,"user_name":"æŒ–çŸ¿çš„å°æˆˆ","can_delete":false,"product_type":"c1","uid":1503917,"ip_address":"","ucode":"2078A85139BD5D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/9chAb6SjxFiapSeicsAsGqzziaNlhX9d5aEt8Z0gUNsZJ9dICaDHqAypGvjv4Bx3PryHnj7OFnOXFOp7Ik21CVXEA/132","comment_is_top":false,"comment_ctime":1557143427,"is_pvip":false,"replies":[{"id":"32892","content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼<br>1. æ˜¯çš„å‘¢ï¼ŒKafka Replicationçš„è®¾è®¡æ€æƒ³å°±æ˜¯å› ä¸ºä¸€ä¸ªæ•°æ®ä¸­å¿ƒä¸­å¾ˆå°‘ä¼šå‡ºç°Network Partitionæ‰€ä»¥ä¸»æ”»é«˜å¯ç”¨å’Œå¼ºä¸€è‡´æ€§ã€‚ä½ çš„ç†è§£æ˜¯å¯¹çš„ï¼Œä¸è¿‡æ„Ÿè§‰å¾ˆå¤šå…¶ä»–è¯»è€…è¯¯ä¼šäº†æˆ‘æ‰€è¯´çš„Kafka Replicationï¼Œç†è§£æˆæ•´ä¸ªKafkaç³»ç»Ÿéƒ½æ˜¯CAç³»ç»Ÿäº†ï¼Œå“ˆå“ˆã€‚<br>2. æˆ‘ä¹Ÿå­¦ä¹ å—æ•™äº†ï¼Œè°¢è°¢ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557188063,"ip_address":"","comment_id":91951,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5852110723","product_id":100025301,"comment_content":"1. kafkaä½œä¸ºCAç³»ç»Ÿçš„ç†è§£ï¼š<br>      kafkaçš„è®¾è®¡æ˜¯åªéœ€è¦ä¿è¯å•ä¸ªæ•°æ®ä¸­å¿ƒçš„brokerä¹‹é—´èƒ½å¤Ÿæ•°æ®å¤åˆ¶å°±å¥½ï¼Œå‡ºç°ç½‘ç»œåˆ†åŒºçš„æƒ…å†µæ¯”è¾ƒå°‘ï¼Œå› æ­¤ä»–ä¸»æ”»é«˜å¯ç”¨å’Œå¼ºä¸€è‡´æ€§<br>2.  æ–‡ä¸­ï¼Œè€å¸ˆæåˆ°kafkaçš„Leaderé€‰ä¸¾æ˜¯ç”±Zookeeperé€‰ä¸¾çš„ï¼Œè¿™å„¿æœ‰ç‚¹ä¸ä¸¥è°¨<br>     åŸå› ï¼škafkaä¼šç”±Zookeeperé€‰ä¸¾ä¸€å°brokerä½œä¸ºcontrollerï¼Œä¹‹åç”±controlleræ¥ç»´æŠ¤partitionçš„leaderã€flowerï¼Œè€Œleaderå®•æœºä¹‹åè¿›è¡Œæ–°leaderçš„é€‰ä¸¾ä¹Ÿæ˜¯ç”±controllerè´Ÿè´£çš„<br>3. å¾®åšå‘å¾®åšçš„åŠŸèƒ½ï¼Œæ»¡è¶³APå°±è¡Œï¼ŒCçš„è¯åªéœ€è¦æ˜¯æœ€ç»ˆä¸€è‡´æ€§å°±å¥½ï¼Œå°±è·Ÿå¾®ä¿¡æœ‹å‹åœˆä¸€æ ·","like_count":1,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449095,"discussion_content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼\n1. æ˜¯çš„å‘¢ï¼ŒKafka Replicationçš„è®¾è®¡æ€æƒ³å°±æ˜¯å› ä¸ºä¸€ä¸ªæ•°æ®ä¸­å¿ƒä¸­å¾ˆå°‘ä¼šå‡ºç°Network Partitionæ‰€ä»¥ä¸»æ”»é«˜å¯ç”¨å’Œå¼ºä¸€è‡´æ€§ã€‚ä½ çš„ç†è§£æ˜¯å¯¹çš„ï¼Œä¸è¿‡æ„Ÿè§‰å¾ˆå¤šå…¶ä»–è¯»è€…è¯¯ä¼šäº†æˆ‘æ‰€è¯´çš„Kafka Replicationï¼Œç†è§£æˆæ•´ä¸ªKafkaç³»ç»Ÿéƒ½æ˜¯CAç³»ç»Ÿäº†ï¼Œå“ˆå“ˆã€‚\n2. æˆ‘ä¹Ÿå­¦ä¹ å—æ•™äº†ï¼Œè°¢è°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557188063,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91950,"user_name":"æŒ–çŸ¿çš„å°æˆˆ","can_delete":false,"product_type":"c1","uid":1503917,"ip_address":"","ucode":"2078A85139BD5D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/9chAb6SjxFiapSeicsAsGqzziaNlhX9d5aEt8Z0gUNsZJ9dICaDHqAypGvjv4Bx3PryHnj7OFnOXFOp7Ik21CVXEA/132","comment_is_top":false,"comment_ctime":1557143368,"is_pvip":false,"replies":[{"id":"32891","content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼<br>1. æ˜¯çš„å‘¢ï¼ŒKafka Replicationçš„è®¾è®¡æ€æƒ³å°±æ˜¯å› ä¸ºä¸€ä¸ªæ•°æ®ä¸­å¿ƒä¸­å¾ˆå°‘ä¼šå‡ºç°Network Partitionæ‰€ä»¥ä¸»æ”»é«˜å¯ç”¨å’Œå¼ºä¸€è‡´æ€§ã€‚ä½ çš„ç†è§£æ˜¯å¯¹çš„ï¼Œä¸è¿‡æ„Ÿè§‰å¾ˆå¤šå…¶ä»–è¯»è€…è¯¯ä¼šäº†æˆ‘æ‰€è¯´çš„Kafka Replicationï¼Œç†è§£æˆæ•´ä¸ªKafkaç³»ç»Ÿéƒ½æ˜¯CAç³»ç»Ÿäº†ï¼Œå“ˆå“ˆã€‚<br>2. æˆ‘ä¹Ÿå­¦ä¹ å—æ•™äº†ï¼Œè°¢è°¢ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557188056,"ip_address":"","comment_id":91950,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5852110664","product_id":100025301,"comment_content":"1. kafkaä½œä¸ºCAç³»ç»Ÿçš„ç†è§£ï¼š<br>      kafkaçš„è®¾è®¡æ˜¯åªéœ€è¦ä¿è¯å•ä¸ªæ•°æ®ä¸­å¿ƒçš„brokerä¹‹é—´èƒ½å¤Ÿæ•°æ®å¤åˆ¶å°±å¥½ï¼Œå‡ºç°ç½‘ç»œåˆ†åŒºçš„æƒ…å†µæ¯”è¾ƒå°‘ï¼Œå› æ­¤ä»–ä¸»æ”»é«˜å¯ç”¨å’Œå¼ºä¸€è‡´æ€§<br>2.  æ–‡ä¸­ï¼Œè€å¸ˆæåˆ°kafkaçš„Leaderé€‰ä¸¾æ˜¯ç”±Zookeeperé€‰ä¸¾çš„ï¼Œè¿™å„¿æœ‰ç‚¹ä¸ä¸¥è°¨<br>     åŸå› ï¼škafkaä¼šç”±Zookeeperé€‰ä¸¾ä¸€å°brokerä½œä¸ºcontrollerï¼Œä¹‹åç”±controlleræ¥ç»´æŠ¤partitionçš„leaderã€flowerï¼Œè€Œleaderå®•æœºä¹‹åè¿›è¡Œæ–°leaderçš„é€‰ä¸¾ä¹Ÿæ˜¯ç”±controllerè´Ÿè´£çš„<br>3. å¾®åšå‘å¾®åšçš„åŠŸèƒ½ï¼Œæ»¡è¶³APå°±è¡Œï¼ŒCçš„è¯åªéœ€è¦æ˜¯æœ€ç»ˆä¸€è‡´æ€§å°±å¥½ï¼Œå°±è·Ÿå¾®ä¿¡æœ‹å‹åœˆä¸€æ ·","like_count":1,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449094,"discussion_content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼\n1. æ˜¯çš„å‘¢ï¼ŒKafka Replicationçš„è®¾è®¡æ€æƒ³å°±æ˜¯å› ä¸ºä¸€ä¸ªæ•°æ®ä¸­å¿ƒä¸­å¾ˆå°‘ä¼šå‡ºç°Network Partitionæ‰€ä»¥ä¸»æ”»é«˜å¯ç”¨å’Œå¼ºä¸€è‡´æ€§ã€‚ä½ çš„ç†è§£æ˜¯å¯¹çš„ï¼Œä¸è¿‡æ„Ÿè§‰å¾ˆå¤šå…¶ä»–è¯»è€…è¯¯ä¼šäº†æˆ‘æ‰€è¯´çš„Kafka Replicationï¼Œç†è§£æˆæ•´ä¸ªKafkaç³»ç»Ÿéƒ½æ˜¯CAç³»ç»Ÿäº†ï¼Œå“ˆå“ˆã€‚\n2. æˆ‘ä¹Ÿå­¦ä¹ å—æ•™äº†ï¼Œè°¢è°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557188056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91949,"user_name":"coder","can_delete":false,"product_type":"c1","uid":1146910,"ip_address":"","ucode":"10638C8601A7CD","user_header":"https://static001.geekbang.org/account/avatar/00/11/80/1e/784e50c9.jpg","comment_is_top":false,"comment_ctime":1557143288,"is_pvip":false,"replies":[{"id":"32907","content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼æˆ‘ä¹Ÿå­¦ä¹ äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557190236,"ip_address":"","comment_id":91949,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5852110584","product_id":100025301,"comment_content":"Kafkaé›†ç¾¤leaderç»´æŠ¤äº†ä¸€ä¸ªin-sync replica (ISR) setï¼Œè¡¨ç¤ºä¸€ä¸ªå’Œleaderä¿æŒåŒæ­¥çš„followeré›†åˆï¼Œå¦‚æœfolloweré•¿æ—¶é—´æœªå‘leaderåŒæ­¥æ•°æ®ï¼Œæ—¶é—´è¶…è¿‡ä¸€ä¸ªè®¾ç½®çš„å‚æ•°ï¼Œåˆ™è¯¥followerå°±ä¼šè¢«è¸¢å‡ºISRï¼Œè€Œåè¯¥followerå›é‡å¯è‡ªå·±å¹¶å‘leaderåŒæ­¥æ•°æ®ï¼Œé€šè¿‡è¿™ç§æ–¹æ³•é¿å…é•¿æ—¶é—´ä¸èƒ½åŒæ­¥æ•°æ®çš„é—®é¢˜","like_count":1,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449093,"discussion_content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼æˆ‘ä¹Ÿå­¦ä¹ äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557190236,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91858,"user_name":"kris37","can_delete":false,"product_type":"c1","uid":1179297,"ip_address":"","ucode":"65555B42CFF0A1","user_header":"","comment_is_top":false,"comment_ctime":1557121069,"is_pvip":true,"replies":[{"id":"33041","content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼ä»…å¯¹è¿™ä¸ªclusterçš„Replicationè€Œè¨€ï¼Œè¿™ä¸ªç†è§£æ˜¯æ­£ç¡®çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557266999,"ip_address":"","comment_id":91858,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5852088365","product_id":100025301,"comment_content":"kafkaä¹‹æ‰€ä»¥è¯´æ˜¯caç³»ç»Ÿï¼Œæ˜¯å› ä¸ºä»–è·Ÿæœ¬å°±ä¸ä¿è¯pï¼Œå› ä¸ºå‘ç”Ÿäº†p kafka çš„è¢«ç‹¬ç«‹çš„åˆ†åŒºéƒ¨åˆ†æ— æ³•ä¿è¯c ä¹Ÿæ— æ³•ä¿è¯a","like_count":1,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449061,"discussion_content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼ä»…å¯¹è¿™ä¸ªclusterçš„Replicationè€Œè¨€ï¼Œè¿™ä¸ªç†è§£æ˜¯æ­£ç¡®çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557266999,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91835,"user_name":"é™ˆå»ºæ–Œçº¢äº†..","can_delete":false,"product_type":"c1","uid":1073301,"ip_address":"","ucode":"575F04D041C2C8","user_header":"https://static001.geekbang.org/account/avatar/00/10/60/95/08571d0b.jpg","comment_is_top":false,"comment_ctime":1557117234,"is_pvip":false,"replies":[{"id":"33059","content":"è°¢è°¢ä½ çš„ç»éªŒåˆ†äº«ï¼Redisåœ¨æœ€åˆè®¾è®¡çš„æ—¶å€™ï¼Œæ˜¯å±äºsingle serverçš„ï¼Œå³ä¾¿åé¢æœ‰äº†ä¸»ä»å¤åˆ¶çš„æœºåˆ¶ï¼Œå½“ä¸»èŠ‚ç‚¹æŒ‚äº†åªè¦ä½ ä¸ä»Secondary nodeè¯»å–æ•°æ®ï¼Œè¿˜æ˜¯å¯ä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œæ‰€ä»¥ä¸šç•Œä¸€ç›´ç§°Redisæ˜¯å±äºCP systemã€‚<br><br>å½“ç„¶ä½ è¯´å¾—ä¹Ÿå¾ˆå¯¹ï¼Œåœ¨Redisæœ‰äº†Sentinelç³»ç»Ÿä¹‹åä¹Ÿå¯ä»¥æä¾›High availabilityäº†ã€‚è™½ç„¶æˆ‘å¾ˆå°‘ç”¨åˆ°Redisï¼Œä½ æ‰€è¯´çš„key rehashåº”è¯¥æ˜¯å±äºSentinelä¸­quorumçš„ä¸€ç§åº”ç”¨ï¼Œç”¨æ¥ä¾¦æµ‹æœ‰å“ªäº›èŠ‚ç‚¹æŒ‚äº†ã€‚<br><br>æœ€åæˆ‘æƒ³å¼•ç”¨ä¸€ä¸‹Reidsä½œè€…Antirezçš„è¯ï¼šâ€œRedis Cluster for instance is a system biased towards consistency than availability. Redis Sentinel itself is an HA solution with the dogma of consistency and master slave setups.â€","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557278134,"ip_address":"","comment_id":91835,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5852084530","product_id":100025301,"comment_content":"redisæ˜¯ap å§ï¼Œredisé›†ç¾¤æŒ‚ä¸€å°ï¼Œkeyä¼šrehashï¼Œä¿è¯å¯ç”¨ã€‚redisåšåˆ†ä¸å¼é”ï¼Œä¸»èŠ‚ç‚¹æŒ‚äº†ï¼Œå‡å¦‚ä¸»è¿˜æ²¡æ¥å¾—åŠåŒæ­¥æ•°æ®ï¼Œæ•°æ®ä¸¢äº†ï¼Œé”ä¼šè¢«ç”³è¯·å¤šæ¬¡ã€‚ä¿è¯ä½ èƒ½ç”³è¯·ï¼Œè¿™æ˜¯å¯ç”¨æ€§ï¼Œä¸é™åˆ¶ä½ ç”³è¯·å¤šæ¬¡ï¼Œè¿™æ˜¯æ²¡æœ‰ä¸€è‡´æ€§ã€‚","like_count":1,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449051,"discussion_content":"è°¢è°¢ä½ çš„ç»éªŒåˆ†äº«ï¼Redisåœ¨æœ€åˆè®¾è®¡çš„æ—¶å€™ï¼Œæ˜¯å±äºsingle serverçš„ï¼Œå³ä¾¿åé¢æœ‰äº†ä¸»ä»å¤åˆ¶çš„æœºåˆ¶ï¼Œå½“ä¸»èŠ‚ç‚¹æŒ‚äº†åªè¦ä½ ä¸ä»Secondary nodeè¯»å–æ•°æ®ï¼Œè¿˜æ˜¯å¯ä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œæ‰€ä»¥ä¸šç•Œä¸€ç›´ç§°Redisæ˜¯å±äºCP systemã€‚\n\nå½“ç„¶ä½ è¯´å¾—ä¹Ÿå¾ˆå¯¹ï¼Œåœ¨Redisæœ‰äº†Sentinelç³»ç»Ÿä¹‹åä¹Ÿå¯ä»¥æä¾›High availabilityäº†ã€‚è™½ç„¶æˆ‘å¾ˆå°‘ç”¨åˆ°Redisï¼Œä½ æ‰€è¯´çš„key rehashåº”è¯¥æ˜¯å±äºSentinelä¸­quorumçš„ä¸€ç§åº”ç”¨ï¼Œç”¨æ¥ä¾¦æµ‹æœ‰å“ªäº›èŠ‚ç‚¹æŒ‚äº†ã€‚\n\næœ€åæˆ‘æƒ³å¼•ç”¨ä¸€ä¸‹Reidsä½œè€…Antirezçš„è¯ï¼šâ€œRedis Cluster for instance is a system biased towards consistency than availability. Redis Sentinel itself is an HA solution with the dogma of consistency and master slave setups.â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557278134,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91760,"user_name":"Geek_1987v5","can_delete":false,"product_type":"c1","uid":1514466,"ip_address":"","ucode":"603A31AF885149","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/lUOVNGBvDTqss5XExibXsOrx1mAM7raMhQbdEHdkAeIEGLoK2wJXjy1QiaDKZlQ9vLjTyZcia39KVmrpzJB8zRhqA/132","comment_is_top":false,"comment_ctime":1557105063,"is_pvip":false,"replies":[{"id":"32905","content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼å¦‚æœé€‰æ‹©CPçš„è¯å°±è¦è€ƒè™‘åˆ°å¦‚æœç”¨æˆ·è®¿é—®ä¸åˆ°å¾®åšäº†ä¼šæœ‰å¾ˆå¤šä¸æ»¡å“¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557189500,"ip_address":"","comment_id":91760,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5852072359","product_id":100025301,"comment_content":"CP","like_count":1,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449020,"discussion_content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼å¦‚æœé€‰æ‹©CPçš„è¯å°±è¦è€ƒè™‘åˆ°å¦‚æœç”¨æˆ·è®¿é—®ä¸åˆ°å¾®åšäº†ä¼šæœ‰å¾ˆå¤šä¸æ»¡å“¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557189500,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91758,"user_name":"9527","can_delete":false,"product_type":"c1","uid":1032735,"ip_address":"","ucode":"04B51C09E3C7B8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c2/1f/343f2dec.jpg","comment_is_top":false,"comment_ctime":1557104844,"is_pvip":false,"replies":[{"id":"33072","content":"ä½ å¥½ï¼Œè°¢è°¢ä½ çš„æé—®ï¼<br>1. æ²¡é”™ï¼Œçº¿æ€§ä¸€è‡´æ€§å¯ä»¥ç†è§£ä¸ºå¼ºä¸€è‡´æ€§ã€‚<br>2. å…³äºå…¬å¸é€‰æ‹©å“ªä¸€ä¸ªæŠ€æœ¯æ ˆå¯èƒ½è¿˜æ˜¯å–å†³äºè‡ªèº«çš„åº”ç”¨åœºæ™¯å’Œéœ€æ±‚çš„ã€‚åƒå½“æ—¶Facebookå†³å®šæ”¾å¼ƒCassandraè€Œä½¿ç”¨HBaseçš„åŸå› ï¼ŒåŸæ–‡æ˜¯è¯´â€œWe found Cassandra&#39;s eventual consistency model to be a difficult pattern<br>to reconcile for our new Messages infrastructure.â€ã€‚æ‰€ä»¥å¯¹äºFacebookè€Œè¨€ï¼Œå°±åƒä½ æ‰€è¯´çš„ï¼Œæœ€ç»ˆä¸€è‡´æ€§æ¨¡å‹å¯¼è‡´äº†Facebookæ”¾å¼ƒå®ƒã€‚<br>3. Partition toleranceä¸€èˆ¬åœ¨ç³»ç»Ÿä¸­éƒ½ä¸ä¼šå°‘çš„ï¼Œå› ä¸ºè¦ä¿è¯å‡ºç°ç½‘ç»œåˆ†åŒºåç³»ç»Ÿèƒ½æ­£å¸¸è¿è¡Œã€‚å¯¹äºAçš„ç†è§£å¯ä»¥è¿™ä¹ˆçœ‹ï¼Œä¸»ä»å¤‡ä»½ç¡®å®æ˜¯èƒ½æé«˜Availabilityï¼Œä¸è¿‡é—®é¢˜è¦è¿™ä¹ˆçœ‹ã€‚HBaseæ˜¯è¦ä¿è¯strong consistencyçš„ï¼Œå¦‚æœä¸åŒèŠ‚ç‚¹çš„æ•°æ®ä¸ä¸€è‡´ï¼Œå³ä¾¿èŠ‚ç‚¹è¿˜åœ¨è¿è¡ŒHBaseä¹Ÿæ— æ³•è¿”å›ç»“æœã€‚<br>4. è¿™ä¸ªè¦çœ‹ä½ æ€ä¹ˆé…ç½®äº†ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªMySqlé›†ç¾¤ï¼Œé‚£å°±æ˜¯CPäº†ï¼Œå¦‚æœä½ é…ç½®å¤šä¸ªåŒæ­¥çš„MySqlé›†ç¾¤ï¼Œé‚£å°±æ˜¯APã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557281959,"ip_address":"","comment_id":91758,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5852072140","product_id":100025301,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘æœ‰å‡ ä¸ªé—®é¢˜ä¸æ˜ç™½<br>1.æ–‡ä¸­æåˆ°çš„ä¸€è‡´æ€§æ˜¯çº¿æ€§ä¸€è‡´çš„ï¼Œè¿™ä¸ªæ˜¯ç›¸å½“äºå¼ºä¸€è‡´æ€§å—<br><br>2.Cassandraæ˜¯APçš„ï¼ŒHBaseæ˜¯CPçš„ï¼Œå¾ˆå¤šé¡¹ç›®éƒ½å°†HBaseæ›¿ä»£äº†Cassandraï¼Œæ˜¯å› ä¸ºè¿ç»´æ°´å¹³ä¸Šæ¥äº†ï¼Œå¯ä»¥ç”¨è¿ç»´æ¥å¼¥è¡¥HBaseä¸­é«˜å¯ç”¨çš„ä¸è¶³å—ï¼Œè€ŒCassandraè¢«å¾ˆå¤šé¡¹ç›®å¼ƒç”¨æ˜¯å› ä¸ºå®ƒä¸æ˜¯æœ€ç»ˆä¸€è‡´æ€§çš„ï¼Œå¯¼è‡´åœ¨ä¸€æ®µæ—¶é—´çª—å£å†…ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´ï¼Œè¿™æ ·ç†è§£å¯¹å—ï¼Ÿ<br><br>3.HBaseçš„Masterå¯ä»¥èµ·å¤šä¸ªä½œä¸ºå¤‡ä»½é¿å…å•ç‚¹é—®é¢˜ï¼Œé‚£ä¸æ˜¯åº”è¯¥æ˜¯CAå—ï¼Œä¸ºä»€ä¹ˆæ˜¯CPå‘¢ï¼Ÿ<br><br>4.MySqlé›†ç¾¤åº”è¯¥æ˜¯å±äºCAè¿˜æ˜¯CPå‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449018,"discussion_content":"ä½ å¥½ï¼Œè°¢è°¢ä½ çš„æé—®ï¼\n1. æ²¡é”™ï¼Œçº¿æ€§ä¸€è‡´æ€§å¯ä»¥ç†è§£ä¸ºå¼ºä¸€è‡´æ€§ã€‚\n2. å…³äºå…¬å¸é€‰æ‹©å“ªä¸€ä¸ªæŠ€æœ¯æ ˆå¯èƒ½è¿˜æ˜¯å–å†³äºè‡ªèº«çš„åº”ç”¨åœºæ™¯å’Œéœ€æ±‚çš„ã€‚åƒå½“æ—¶Facebookå†³å®šæ”¾å¼ƒCassandraè€Œä½¿ç”¨HBaseçš„åŸå› ï¼ŒåŸæ–‡æ˜¯è¯´â€œWe found Cassandra&amp;#39;s eventual consistency model to be a difficult pattern\nto reconcile for our new Messages infrastructure.â€ã€‚æ‰€ä»¥å¯¹äºFacebookè€Œè¨€ï¼Œå°±åƒä½ æ‰€è¯´çš„ï¼Œæœ€ç»ˆä¸€è‡´æ€§æ¨¡å‹å¯¼è‡´äº†Facebookæ”¾å¼ƒå®ƒã€‚\n3. Partition toleranceä¸€èˆ¬åœ¨ç³»ç»Ÿä¸­éƒ½ä¸ä¼šå°‘çš„ï¼Œå› ä¸ºè¦ä¿è¯å‡ºç°ç½‘ç»œåˆ†åŒºåç³»ç»Ÿèƒ½æ­£å¸¸è¿è¡Œã€‚å¯¹äºAçš„ç†è§£å¯ä»¥è¿™ä¹ˆçœ‹ï¼Œä¸»ä»å¤‡ä»½ç¡®å®æ˜¯èƒ½æé«˜Availabilityï¼Œä¸è¿‡é—®é¢˜è¦è¿™ä¹ˆçœ‹ã€‚HBaseæ˜¯è¦ä¿è¯strong consistencyçš„ï¼Œå¦‚æœä¸åŒèŠ‚ç‚¹çš„æ•°æ®ä¸ä¸€è‡´ï¼Œå³ä¾¿èŠ‚ç‚¹è¿˜åœ¨è¿è¡ŒHBaseä¹Ÿæ— æ³•è¿”å›ç»“æœã€‚\n4. è¿™ä¸ªè¦çœ‹ä½ æ€ä¹ˆé…ç½®äº†ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªMySqlé›†ç¾¤ï¼Œé‚£å°±æ˜¯CPäº†ï¼Œå¦‚æœä½ é…ç½®å¤šä¸ªåŒæ­¥çš„MySqlé›†ç¾¤ï¼Œé‚£å°±æ˜¯APã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557281959,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91757,"user_name":"ykkk88","can_delete":false,"product_type":"c1","uid":1068585,"ip_address":"","ucode":"A1BCFC2F0D1022","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/29/1be3dd40.jpg","comment_is_top":false,"comment_ctime":1557104793,"is_pvip":false,"replies":[{"id":"32913","content":"è°¢è°¢ä½ çš„æé—®ï¼æ„Ÿè§‰å¾ˆå¤šè¯»è€…éƒ½æœ‰åŒæ ·çš„é—®é¢˜ã€‚<br><br>æˆ‘çš„ç†è§£æ˜¯å¦‚æœä»…ä»…å°±ä¸€ä¸ªKafka Replication clusteræ¥è¯´ï¼Œå¦‚æœé¢†å¯¼è€…æŒ‚äº†æˆ‘ä»¬å°±ä¸ä¼šå†ä»è¿™ä¸ªclusteræ‹¿åˆ°å†…å®¹äº†ï¼Œæ‰€ä»¥åœ¨Intra-cluster Replicationè¿™ä¸ªè®¾è®¡ç‚¹ä¸Šï¼Œä»–ä»¬æ˜¯ä¸è€ƒè™‘Pçš„ã€‚<br><br>ä¹‹æ‰€ä»¥æˆ‘åœ¨æ–‡ä¸­è¯´Kafka Replicationé€‰æ‹©äº†CAï¼Œæ˜¯å› ä¸ºKafkaçš„ä½œè€…ä¹‹ä¸€Jun Raoåœ¨è®¾è®¡Kafka Replicationçš„æ—¶å€™ï¼Œæ˜ç¡®è¯´æ˜äº†â€œAll distributed systems must make trade-offs between guaranteeing consistency, availability, and partition tolerance. Our goal was to support replication in a Kafka cluster within a single datacenter, where network partitioning is rare, so our design focuses on maintaining highly available and strongly consistent replicas.â€ï¼Œè¿™ä¸€ç‚¹æ˜¯åœ¨Linkedinçš„å®˜æ–¹æ–‡æ¡£ä¸Špublishçš„ã€‚è€Œåœ¨2013å¹´çš„Apacheconä¸Šï¼ŒKafka Replicationçš„æŠ€æœ¯æ¼”è®²ä¸Šä¹Ÿæ˜ç¡®è¯´æ˜äº†â€œKafka Replication: Pick CAâ€ã€‚<br><br>æ‰€ä»¥ä½ ä¼šå‘ç°ï¼Œä»–ä»¬çš„è®¾è®¡æ€è·¯æ˜¯ä»…ä»…å°±Intra-clusterçš„data replicationå‡ºå‘çš„ã€‚å½“ç„¶ï¼Œå¦‚æœä»æ•´ä¸ªKafkaç³»ç»Ÿæ¥è¯´ï¼Œæ˜¯ä¸å¯èƒ½æ”¾å¼ƒPçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557191103,"ip_address":"","comment_id":91757,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5852072089","product_id":100025301,"comment_content":"kafka replicationå’Œæ”¾å¼ƒpæœ‰ä»€ä¹ˆå…³ç³»ä¹ˆ","like_count":1,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449017,"discussion_content":"è°¢è°¢ä½ çš„æé—®ï¼æ„Ÿè§‰å¾ˆå¤šè¯»è€…éƒ½æœ‰åŒæ ·çš„é—®é¢˜ã€‚\n\næˆ‘çš„ç†è§£æ˜¯å¦‚æœä»…ä»…å°±ä¸€ä¸ªKafka Replication clusteræ¥è¯´ï¼Œå¦‚æœé¢†å¯¼è€…æŒ‚äº†æˆ‘ä»¬å°±ä¸ä¼šå†ä»è¿™ä¸ªclusteræ‹¿åˆ°å†…å®¹äº†ï¼Œæ‰€ä»¥åœ¨Intra-cluster Replicationè¿™ä¸ªè®¾è®¡ç‚¹ä¸Šï¼Œä»–ä»¬æ˜¯ä¸è€ƒè™‘Pçš„ã€‚\n\nä¹‹æ‰€ä»¥æˆ‘åœ¨æ–‡ä¸­è¯´Kafka Replicationé€‰æ‹©äº†CAï¼Œæ˜¯å› ä¸ºKafkaçš„ä½œè€…ä¹‹ä¸€Jun Raoåœ¨è®¾è®¡Kafka Replicationçš„æ—¶å€™ï¼Œæ˜ç¡®è¯´æ˜äº†â€œAll distributed systems must make trade-offs between guaranteeing consistency, availability, and partition tolerance. Our goal was to support replication in a Kafka cluster within a single datacenter, where network partitioning is rare, so our design focuses on maintaining highly available and strongly consistent replicas.â€ï¼Œè¿™ä¸€ç‚¹æ˜¯åœ¨Linkedinçš„å®˜æ–¹æ–‡æ¡£ä¸Špublishçš„ã€‚è€Œåœ¨2013å¹´çš„Apacheconä¸Šï¼ŒKafka Replicationçš„æŠ€æœ¯æ¼”è®²ä¸Šä¹Ÿæ˜ç¡®è¯´æ˜äº†â€œKafka Replication: Pick CAâ€ã€‚\n\næ‰€ä»¥ä½ ä¼šå‘ç°ï¼Œä»–ä»¬çš„è®¾è®¡æ€è·¯æ˜¯ä»…ä»…å°±Intra-clusterçš„data replicationå‡ºå‘çš„ã€‚å½“ç„¶ï¼Œå¦‚æœä»æ•´ä¸ªKafkaç³»ç»Ÿæ¥è¯´ï¼Œæ˜¯ä¸å¯èƒ½æ”¾å¼ƒPçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557191103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322154,"user_name":"James","can_delete":false,"product_type":"c1","uid":1036309,"ip_address":"","ucode":"7A0DC75746CB3A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d0/15/c5dc2b0d.jpg","comment_is_top":false,"comment_ctime":1637208489,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637208489","product_id":100025301,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæƒ³é—®ä¸‹å¯ç”¨æ€§ä¸æ€§èƒ½çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿåœ¨Rediså’ŒMySQL  cache asideæ¨¡å¼å¹¶å‘æ—¶ä¼šå­˜åœ¨ç¼“å­˜ä¸ä¸€è‡´çš„ï¼Œé‚£è¿™é‡Œçš„ä¸ä¸€è‡´æˆ‘å¯ä»¥ç‰ºç‰²æ€§èƒ½ï¼ˆæ¯”å¦‚åŠ åˆ†å¸ƒå¼é”ï¼‰æ¥è§£å†³ï¼Œæ‰€ä»¥è¿™é‡Œçš„æ€§èƒ½å°±æ˜¯å¯ç”¨æ€§å—ï¼Ÿæˆ‘ç†è§£å¯ç”¨æ€§æ²¡æœ‰è¦æ±‚æ€§èƒ½ï¼Œä¸€ä¸ªè¯·æ±‚è¿‡æ¥æˆ‘å¯ä»¥è®©ä»–ç­‰å¾…ä¸€å°ä¼šï¼ˆåŠ é”å¤„ç†å¹¶å‘é—®é¢˜æˆ–è€…è¿›è¡Œåˆ†å¸ƒå¼äº‹åŠ¡è¾¾åˆ°å¼ºä¸€è‡´ï¼‰ï¼Œç„¶åå¤„ç†å®ƒï¼Œè¿™ä¸ªæœ€ç»ˆä¼šè¿”å›ç»“æœï¼Œåªæ˜¯æ¥å£å¤„ç†æ—¶é—´å˜é•¿äº†ï¼Œä¸èƒ½è¯´ç‰ºç‰²äº†å¯ç”¨æ€§å§ï¼Ÿ","like_count":0},{"had_liked":false,"id":252249,"user_name":"piboye","can_delete":false,"product_type":"c1","uid":1066752,"ip_address":"","ucode":"7CFD8712857A85","user_header":"https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg","comment_is_top":false,"comment_ctime":1602212509,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1602212509","product_id":100025301,"comment_content":"1 ç½‘ç»œåˆ†åŒº éƒ½æ˜¯çŸ­æš‚çš„ï¼Œåç»­å¯ä»¥æ¢å¤ã€‚ç½‘ç»œåˆ†åŒºä¸æ˜¯æŒ‡èŠ‚ç‚¹æŒ‚äº†ï¼Œç½‘ç»œåˆ†åŒºçš„èŠ‚ç‚¹å’Œå®¢æˆ·ç«¯è¿˜æ˜¯æœ‰è¿æ¥çš„ã€‚ ç½‘ç»œåˆ†åŒºä¹Ÿä¸ä¸€å®šæŒ‡ä¸¢åŒ…ï¼Œå»¶è¿Ÿä¹Ÿä¼šå¯¼è‡´è¯¯åˆ¤ã€‚<br>2æœºå™¨é›¶æ—¶æŒ‚äº†ï¼Œè€ƒè™‘æœºå™¨æ¢å¤çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µå¯ä»¥çœ‹æˆæ˜¯ç½‘ç»œåˆ†åŒºçš„ç®€å•æ¨¡å¼ã€‚<br>3 å•èŠ‚ç‚¹æ²¡åŠæ³•åŒºåˆ†æ˜¯ç½‘ç»œåˆ†åŒºè¿˜æ˜¯æœºå™¨é›¶æ—¶æŒ‚äº†ã€‚<br><br>kafkaä¹‹æ‰€è¯´è‡ªå·±ä¸è€ƒè™‘pï¼ŒåŸºæœ¬æ¡ä»¶æ˜¯åŒä¸€æ•°æ®ä¸­å¿ƒå¾ˆå°‘ç½‘ç»œåˆ†åŒºï¼Œå½“çœŸæ­£å‡ºç°çš„æ—¶å€™ï¼Œä»–ä¼šæŠŠåˆ†åŒºå½“æˆèŠ‚ç‚¹æ°¸ä¹…æ•…éšœï¼ŒèŠ‚ç‚¹æ°¸ä¹…æ•…éšœå…¶å®æ˜¯æ›´ç®€å•çš„æƒ…å†µã€‚<br><br>capç»å…¸ è®¨è®ºçš„æ˜¯å•ä¸€æ•°æ®ï¼ŒåŸå­å†™æ“ä½œï¼Œç½‘ç»œæ— å»¶è¿Ÿï¼Œéæœºå™¨æŒ‚æ‰çš„åœºæ™¯ã€‚ è€Œæˆ‘ä»¬è®¨è®ºcapçš„æ—¶å€™å…¶å®ä¼šæœ‰ä¸åŒçš„å‡è®¾å’Œç†è§£ï¼Œè¿™å¯¼è‡´capæœ€å®¹æ˜“èµ·äº‰è®®<br><br>c æ˜¯é’ˆå¯¹å•ä»½æ•°æ®è¿˜æ˜¯å¤šä»½æ•°æ®ï¼›ä¸€è‡´æ€§è¿˜æœ‰è¦åŒºåˆ†ä¸åŒçš„æ¥å£ï¼Œæ¯”å¦‚etcdæœ¬èº«ä¹Ÿæä¾›éä¸€è‡´æ€§è¯»çš„æ“ä½œï¼›ä¸€è‡´æ€§çš„çº§åˆ«ä¹Ÿæœ‰å¾ˆå¤šï¼Œçº¿æ€§ï¼Œå› æœï¼Œå†™è¯»ï¼Œè¯»è¯»ï¼Œå†™å†™ï¼›ä¸€è‡´æ€§è®¨è®ºè¿˜æ¶‰åŠæ—¶é’Ÿæºçš„é—®é¢˜ï¼Œæ—¶é’Ÿè¯¯å·®æ˜¯å¤šå°‘èŒƒå›´å†…ã€‚<br><br>a åŒºåˆ†æ˜¯ä»€ä¹ˆæ“ä½œï¼Œç°å®ç³»ç»Ÿä¸­è¿˜è¦è€ƒè™‘è¶…æ—¶æ—¶é—´ï¼Œè¿˜æœ‰qpsçš„å˜åŒ–ï¼Œè¿˜æœ‰ä¸å¯ç”¨çš„æ—¶é—´èŒƒå›´sla<br><br>p ç½‘ç»œåˆ†åŒºï¼Œæ˜¯ä¸¢åŒ…ï¼Ÿç½‘ç»œåŒ…è¶…æ—¶ï¼Ÿç³»ç»Ÿå¤„ç†è¶…æ—¶ï¼Ÿ æœºå™¨æŒ‚æ‰ï¼Ÿaåˆ°bé€šï¼Œbåˆ°aä¸é€šå‘¢ï¼Ÿå•èŠ‚ç‚¹å¾ˆéš¾åŒºåˆ†æ˜¯ä»€ä¹ˆåŸå› ï¼Œå¾€å¾€åªèƒ½æŠŠæ¥å£è¶…æ—¶æˆ–è€…æ•…éšœå½“æˆæ˜¯åˆ†åŒºé”™è¯¯æ¥å¤„ç†ã€‚ åˆ†åŒºåˆæ¶‰åŠæ„ŸçŸ¥ï¼Œå¤„ç†ï¼Œå’Œæ¢å¤ã€‚<br>","like_count":0},{"had_liked":false,"id":252217,"user_name":"piboye","can_delete":false,"product_type":"c1","uid":1066752,"ip_address":"","ucode":"7CFD8712857A85","user_header":"https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg","comment_is_top":false,"comment_ctime":1602201345,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1602201345","product_id":100025301,"comment_content":"cap ä¸€ç›´ä»¥æ¥è¯¯è§£å¤ªå¤šäº†ï¼Œcï¼Œaï¼Œpæ¯ä¸€ä¸ªå±æ€§éƒ½æœ‰ä¸åŒçš„ç°åº¦ã€‚","like_count":0},{"had_liked":false,"id":252191,"user_name":"piboye","can_delete":false,"product_type":"c1","uid":1066752,"ip_address":"","ucode":"7CFD8712857A85","user_header":"https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg","comment_is_top":false,"comment_ctime":1602168608,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1602168608","product_id":100025301,"comment_content":"çœŸæ˜¯æ¯ä¸ªäººç†è§£çš„capéƒ½ä¸ä¸€æ ·å•Šï¼Œçœ‹äº†3ä¸ªè¯¾ç¨‹ï¼Œéƒ½æœ‰ä¸åŒçš„ç†è§£ğŸ˜‚","like_count":0},{"had_liked":false,"id":252189,"user_name":"piboye","can_delete":false,"product_type":"c1","uid":1066752,"ip_address":"","ucode":"7CFD8712857A85","user_header":"https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg","comment_is_top":false,"comment_ctime":1602167884,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1602167884","product_id":100025301,"comment_content":"å‘å¾®åšï¼Œå‘æœ¬èº«åº”è¯¥æ˜¯cpï¼Œå‘å®Œä¹‹åçš„é€šçŸ¥å¯ä»¥æ˜¯apã€‚ å› ä¸ºå‘æ–‡ç« å¤±è´¥äº†ç”¨æˆ·å¯ä»¥é‡è¯•ï¼Œä½†ä¸èƒ½å‘äº†æˆåŠŸåï¼Œç³»ç»Ÿåé¢åˆè®¤ä¸ºæ²¡å‘ã€‚é€šçŸ¥éƒ¨åˆ†ä¸ä¸€è‡´å½±å“ä¸å¤§ã€‚","like_count":0},{"had_liked":false,"id":248928,"user_name":"Ignacio","can_delete":false,"product_type":"c1","uid":1130334,"ip_address":"","ucode":"AEAA24A58B6D29","user_header":"https://static001.geekbang.org/account/avatar/00/11/3f/5e/2fa1377d.jpg","comment_is_top":false,"comment_ctime":1600362520,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1600362520","product_id":100025301,"comment_content":"æ–‡ä¸­æåˆ°çš„CAç¤ºä¾‹å…¶å®æ˜¯æœ‰å¾ˆå¼ºçš„è¯¯å¯¼æ€§çš„ã€‚ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿè‚¯å®šæ”¯æŒnetwork partitionä¹Ÿå°±æ˜¯På±æ€§ã€‚åœ¨å‡ºç°ç½‘ç»œåˆ†åŒºåï¼ŒCå’ŒAä¸å¯èƒ½åŒæ—¶æ»¡è¶³ï¼Œä»»ä½•åˆ†å¸ƒå¼ç³»ç»Ÿéƒ½è¦åœ¨Cå’ŒAä¹‹é—´åšä¸€ä¸ªé€‰æ‹©ã€‚å¯èƒ½çš„ç»“æœåªæœ‰ä¸¤ä¸ªï¼šCPå’ŒAPã€‚ä¸æ”¯æŒç½‘ç»œåˆ†åŒºï¼Œé‚£æ˜¯å•ç‚¹ç³»ç»Ÿï¼Œä¸å­˜åœ¨è®¨è®ºCAPçš„æ„ä¹‰ã€‚","like_count":0},{"had_liked":false,"id":238075,"user_name":"stephen","can_delete":false,"product_type":"c1","uid":1337994,"ip_address":"","ucode":"CDEB34771891A3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/dAkTIgz3sFoO20qQMbRiaRqWrpicIWiaLMbkeLkribTOUvrzDZPOaRfZgQOvTtAgib35D7DKFiarejer74F4Qs0771mQ/132","comment_is_top":false,"comment_ctime":1596065529,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596065529","product_id":100025301,"comment_content":"kafkaæ˜¯topicåˆ†partition æ¯ä¸ªpartitionä¸»ä»å¤åˆ¶ï¼Œpart itionå…¶å®å°±æ˜¯åˆ†åŒºçš„æ¦‚å¿µï¼Œåªä¸è¿‡å¦‚æœè¯´çš„æ˜¯ä¸€ä¸ªpartitionè‡ªå·±çš„isrï¼Œé‚£ç¡®å®å®ƒæ²¡æœ‰è€ƒè™‘pç‰¹æ€§","like_count":0},{"had_liked":false,"id":194891,"user_name":"ä¸è®°å¹´","can_delete":false,"product_type":"c1","uid":1045945,"ip_address":"","ucode":"287E40C68356DC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f5/b9/888fe350.jpg","comment_is_top":false,"comment_ctime":1585116927,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585116927","product_id":100025301,"comment_content":"å‡è®¾æˆ‘ä»¬çš„ç³»ç»Ÿå¿…é¡»æ»¡è¶³P, ä¹Ÿå°±æ˜¯å®¹å¿ç½‘ç»œåˆ†åŒºã€‚<br>å½“åˆ†åŒºäº§ç”Ÿæ—¶ï¼Œå¦‚æœè¦æ»¡è¶³Aï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªåˆ†åŒºéƒ½è¦æä¾›æœåŠ¡ï¼Œå› ä¸ºå„åˆ†åŒºä¹‹é—´æ— æ³•é€šä¿¡æ‰€ä»¥æ»¡è¶³ä¸äº†Cã€‚<br>å¦‚æœè¦æ»¡è¶³Cï¼Œä¹Ÿå°±æ˜¯ç³»ç»Ÿåªå‘ç”¨æˆ·æä¾›çŠ¶æ€å®ŒæˆåŒæ­¥çš„æœºå™¨ï¼Œé‚£ä¹ˆå¿…è¦è¦æ”¾å¼ƒæ‰å…¶å®ƒåˆ†åŒºçš„æœºå™¨ï¼Œåªä¿ç•™æŸä¸€ä¸ªåˆ†åŒºä¸­çš„æœºå™¨å¯¹å¤–æä¾›æœåŠ¡ã€‚<br>å‡è®¾æˆ‘ä»¬çš„ç³»ç»Ÿå¿…é¡»æ»¡è¶³C<br>å½“å‡ºç°ç½‘ç»œåˆ†åŒºæ—¶ï¼Œå¦‚æœè¦æƒ³ä¿ç•™P, ä¹Ÿå°±æ˜¯è¯´å„ä¸ªåˆ†åŒºä¾ç„¶æ˜¯ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼Œå› ä¸ºCçš„åŸå› ï¼Œå¿…ç„¶å­˜åœ¨åˆ†åŒºæ— æ³•æä¾›æœåŠ¡ï¼Œå› æ­¤æ— æ³•ä¿è¯A<br>å¦‚æœæƒ³ä¿è¯Aï¼Œå°±ä¸èƒ½å­˜åœ¨Pï¼Œä¹Ÿå°±æ˜¯è¯´è¦å‰”é™¤åˆ†åŒºï¼Œæœ€ç»ˆåªä¿ç•™ä¸€ä¸ªåˆ†åŒº","like_count":0},{"had_liked":false,"id":193805,"user_name":"Eden2020","can_delete":false,"product_type":"c1","uid":1899158,"ip_address":"","ucode":"0DEE62F2335237","user_header":"https://static001.geekbang.org/account/avatar/00/1c/fa/96/4a7b7505.jpg","comment_is_top":false,"comment_ctime":1584968512,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584968512","product_id":100025301,"comment_content":"å‘å¾®åšé€‰æ‹©APå³å¯ã€‚CAPåªèƒ½è¯´æ˜¯æŒ‡å¯¼æ€æƒ³ï¼Œç”Ÿäº§å®è·µä¸­è¿˜æ˜¯å¾ˆå¤šç»†èŠ‚è¦è€ƒè™‘çš„ï¼Œæ„Ÿè§‰è¿™ä¸€å—ç¼ºä¹ä¸€äº›æ·±åº¦çš„è§£è¯»","like_count":0},{"had_liked":false,"id":179120,"user_name":"æ¥Š_å®µå¤œ","can_delete":false,"product_type":"c1","uid":1019302,"ip_address":"","ucode":"7BA0CADC5F23BB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/a6/22c37c91.jpg","comment_is_top":false,"comment_ctime":1581923075,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581923075","product_id":100025301,"comment_content":"è”¡è€å¸ˆå¥½, æš‚æ—¶è¯»äº†ä¸‰éæ–‡ç« , ä½†ä»ç„¶æœ‰äº›ç–‘é—®;<br>- ç»¼åˆæ¥çœ‹, æ˜¯å¦èƒ½è¯´ Pçš„å«ä¹‰ å…¶å®åŒ…å«äº† [ C or A ] å‘¢?<br>- æ¢ä¸€ç§é—®æ³•: Pèƒ½å¦çœ‹åš [ C or A ] çš„è¶…é›†å‘¢?<br><br>æ ¹æ®æ–‡ç« è®ºè¿°, å¦‚æœä¸€ä¸ªç³»ç»Ÿæ²¡æœ‰äº†P, ä¸€æ—¦ç½‘ç»œå‘ç”Ÿäº†å¼‚å¸¸, é‚£ä¸å°±æ²¡æœ‰Aäº†å—? ç½‘ç»œå¼‚å¸¸äº†, åˆè°ˆä»€ä¹ˆCå‘¢?<br>å› æ­¤, åœ¨ç³»ç»Ÿå·²ç»æœ‰äº†Pçš„å‰æä¸‹, æ‰æœ‰åŸºç¡€å»é€‰æ‹© Cæˆ–è€…A å§?<br><br>æ ¹æ®æ‚¨çš„è¯„è®º, ä¹Ÿæ˜¯è¯´, Kafkaä½œä¸ºä¸€ä¸ªæ•´ä½“ç³»ç»Ÿ, è‚¯å®šæ˜¯ä¿ç•™äº†P, é‚£æ˜¯å¦å¯ä»¥è®¤ä¸º, Kafkaä½œä¸ºä¸€ä¸ªæ•´ä½“, åŒæ—¶å°±ä¿ç•™äº†[CAP]å‘¢?<br>","like_count":0},{"had_liked":false,"id":172126,"user_name":"é£","can_delete":false,"product_type":"c1","uid":1032932,"ip_address":"","ucode":"2DEDB586E625C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c2/e4/ad418d90.jpg","comment_is_top":false,"comment_ctime":1579093968,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1579093968","product_id":100025301,"comment_content":"æƒ³è¯·æ•™ä¸‹è€å¸ˆï¼Œelasticsearchå±äºCAPä¸­çš„å“ªä¸¤ç§ï¼Ÿä¸€ç›´æ²¡æ€è€ƒå‡ºæ¥ã€‚ã€‚ã€‚","like_count":0},{"had_liked":false,"id":126607,"user_name":"é˜¿å·-è±†å¤«","can_delete":false,"product_type":"c1","uid":1005123,"ip_address":"","ucode":"732188848B0A85","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/43/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1566435715,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566435715","product_id":100025301,"comment_content":"é‚£æˆ‘çš„ç†è§£å°±æ˜¯hdfsæ»¡è¶³capï¼Œa ä¸€å°namenode ä¸€å°datanodeæŒ‚æ‰ç³»ç»Ÿå¯ç”¨ï¼Œc hdfs ä¸‰å‰¯æœ¬ï¼ŒP namnodeå‘ç”Ÿåˆ†åŒºï¼Œstand by èŠ‚ç‚¹å˜æˆactive ä¸€æ—¦æ‹‰èµ·æŒ‚æ‰namnodeæ•°æ®åå‘åŒæ­¥ã€‚ è¯·é—®è¿™æ˜¯ä¸æ˜¯capéƒ½æ»¡è¶³äº†å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":108967,"user_name":"æ»©æ¶‚æ›³å°¾","can_delete":false,"product_type":"c1","uid":1187478,"ip_address":"","ucode":"40F650F2A419D4","user_header":"https://static001.geekbang.org/account/avatar/00/12/1e/96/c735ad6b.jpg","comment_is_top":false,"comment_ctime":1561942811,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561942811","product_id":100025301,"comment_content":"çº¿æ€§ä¸€è‡´æ€§â€”â€”å¯¹åˆ†å¸ƒå¼ç³»ç»Ÿæ“ä½œB æ™šäº æ“ä½œAï¼Œåˆ™Bçœ‹åˆ°çš„åˆ†å¸ƒå¼ç³»ç»ŸçŠ¶æ€ä¹Ÿæ›´æ™šã€‚<br>æ‰€è°“â€œçº¿æ€§â€ï¼šxè½´ä¸ºæ“ä½œï¼Œyè½´ä¸ºç³»ç»ŸçŠ¶æ€ï¼Œä¸¤è€…æˆçº¿æ€§ã€‚","like_count":0},{"had_liked":false,"id":105847,"user_name":"ç§‘è«æ¹–ç•”çš„çƒç«¥","can_delete":false,"product_type":"c1","uid":1025780,"ip_address":"","ucode":"E63B6D4F7EA129","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a6/f4/f641a356.jpg","comment_is_top":false,"comment_ctime":1561093059,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561093059","product_id":100025301,"comment_content":"è€å¸ˆå’Œtim cookæœ‰ç‚¹åƒå•Š","like_count":0},{"had_liked":false,"id":104425,"user_name":"ä½ å¥½æ—…è¡Œè€…","can_delete":false,"product_type":"c1","uid":1154101,"ip_address":"","ucode":"5C72A428DC28F3","user_header":"https://static001.geekbang.org/account/avatar/00/11/9c/35/9dc79371.jpg","comment_is_top":false,"comment_ctime":1560751682,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560751682","product_id":100025301,"comment_content":"è€å¸ˆæåˆ°çš„Kafkaçš„é‚£ä¸ªæ¼”è®²æ¥è‡ªé¥¶å†›åœ¨2013å¹´åšçš„ä¸€æ¬¡æŠ¥å‘Šï¼ŒæŠ¥å‘Šçš„åœ°å€æ˜¯<br>https:&#47;&#47;www.youtube.com&#47;watch?v=XcvHmqmh16gå‡ºç°åœ¨21:50å·¦å³çš„åœ°æ–¹ã€‚æŠ¥å‘Šé‡Œæåˆ°ï¼Œå› ä¸ºKafkaæ˜¯éƒ¨ç½²åœ¨ä¸€ä¸ªDataCenterä¸­çš„ï¼Œè€Œä¸€ä¸ªDataCenterå¾ˆå°‘ä¼šå‡ºç°Partitioningçš„æƒ…å†µï¼Œæ‰€ä»¥Kafkaæ”¾å¼ƒäº†Pã€‚å¯æ˜¯æˆ‘æƒ³é—®ä¸€ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆåœ¨ä¸€ä¸ªDataCenterå°±å¾ˆå°‘å‡ºç°Partitioningçš„æƒ…å†µäº†å‘¢ï¼Ÿ<br><br>è¿˜æœ‰ï¼Œè€å¸ˆåœ¨å›å¤é‡Œå¤šæ¬¡æåˆ°ï¼Œå¤§å®¶è¯¯ä¼šäº†æ‚¨çš„æ„æ€ï¼Œè®¤ä¸ºæ•´ä¸ªKafkaç³»ç»Ÿéƒ½æ˜¯CAçš„ã€‚é‚£ä¹ˆè¯·é—®è€å¸ˆï¼Œæ•´ä¸ªKafkaç³»ç»Ÿæ˜¯æ€æ ·çš„å‘¢ï¼Ÿ<br><br>æœ€åé—®è€å¸ˆä¸€ä¸ªé—®é¢˜å“ˆï¼Œå› ä¸ºè‡ªå·±æœ€è¿‘ä¹Ÿåœ¨ç ”ç©¶Redisï¼Œè€å¸ˆè¯´Redisæ”¾å¼ƒäº†é«˜å¯ç”¨æ€§ã€‚å¯æ˜¯ä½œä¸ºä¸€ä¸ªé«˜å¯ç”¨é«˜æ€§èƒ½åˆ†å¸ƒå¼ç¼“å­˜ï¼ŒRedisçš„æ€§èƒ½æ˜¯éå¸¸å‡ºè‰²çš„ï¼Œä¸ºä»€ä¹ˆè¯´ä»–ä¸æ˜¯é«˜å¯ç”¨çš„å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":103432,"user_name":"å€ªå¿…è£","can_delete":false,"product_type":"c1","uid":1046496,"ip_address":"","ucode":"34F707BB9DDDC9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f7/e0/34290aa4.jpg","comment_is_top":false,"comment_ctime":1560434348,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560434348","product_id":100025301,"comment_content":"c:å„èŠ‚ç‚¹æ•°æ®ä¸€è‡´æ€§<br>a:èŠ‚ç‚¹æŒ‚æ‰ä¾ç„¶å¯è¿è¡Œ<br>p:é€šè®¯è¿çº¿æŒ‚æ‰ä¾ç„¶å¯è¿è¡Œ","like_count":0},{"had_liked":false,"id":101348,"user_name":"xfly","can_delete":false,"product_type":"c1","uid":1193153,"ip_address":"","ucode":"215CF53ECF2298","user_header":"https://static001.geekbang.org/account/avatar/00/12/34/c1/255161c9.jpg","comment_is_top":false,"comment_ctime":1559786341,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1559786341","product_id":100025301,"comment_content":"ä¸çŸ¥é“æˆ‘çš„ç†è§£æ­£ç¡®ä¸æ­£ç¡®ï¼š<br>1ï¼Œä¸€ä»½æ•°æ®åœ¨å¤šå°æœºå™¨ä¸Šæœ‰å‰¯æœ¬ï¼Œä¸€ä¸ªå‰¯æœ¬çš„leaderå®•æœºï¼Œè¿™ä»½æ•°æ®å°±ä¸èƒ½æ­£ç¡®è¿”å›å®¢æˆ·ç«¯äº†ï¼Œæ‰€ä»¥ä¸æ»¡è¶³åˆ†åŒºå®¹é”™æ€§ï¼Œè€Œé‚£äº›å„ä¸ªå‰¯æœ¬çš„åœ°ä½å¹³ç­‰çš„ç³»ç»Ÿæ˜¯æ»¡è¶³åˆ†åŒºå®¹é”™æ€§çš„ã€‚<br>2ï¼Œç¨åkafkaé€šè¿‡é€‰ä¸¾ä¸ºåˆšæ‰çš„å‰¯æœ¬æœ‰äº†æ–°çš„leaderï¼Œæ•°æ®ç°åœ¨èƒ½æ­£å¸¸è¿”å›äº†ï¼Œè¿™ä½“ç°çš„æ˜¯kafkaçš„Aå±æ€§ï¼ˆé«˜å¯ç”¨ï¼‰ï¼Œè¿™é‡Œåˆ†åŒºå®¹é”™è·Ÿå¯ç”¨æ€§æ˜¯å¾ˆå®¹æ˜“æ··æ·†çš„","like_count":0},{"had_liked":false,"id":94690,"user_name":"Flash","can_delete":false,"product_type":"c1","uid":1236163,"ip_address":"","ucode":"E285075C9E0B02","user_header":"https://static001.geekbang.org/account/avatar/00/12/dc/c3/e4ba51d5.jpg","comment_is_top":false,"comment_ctime":1557882397,"is_pvip":false,"replies":[{"id":"33874","content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼è¯·é—®ä½ è¯´çš„æ˜¯è¿˜æ²¡ç†è§£CAPå‘¢è¿˜æ˜¯ä¸äº†è§£å¾®åšçš„æœºåˆ¶å‘¢ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557884528,"ip_address":"","comment_id":94690,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557882397","product_id":100025301,"comment_content":"çœ‹å®Œæœ¬ç¯‡æ–‡ç« ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“å¾®åšæ˜¯ç”¨ä»€ä¹ˆCAPä¸­çš„å“ªä¸¤ä¸ªå±æ€§å•Šï¼Œæ›´åˆ«è¯´å»æ€è€ƒé‡æ–°è®¾è®¡æ€ä¹ˆåšå‘¢ï¼Ÿï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450172,"discussion_content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼è¯·é—®ä½ è¯´çš„æ˜¯è¿˜æ²¡ç†è§£CAPå‘¢è¿˜æ˜¯ä¸äº†è§£å¾®åšçš„æœºåˆ¶å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557884528,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93592,"user_name":"å¤§ä¿Šstan","can_delete":false,"product_type":"c1","uid":1125370,"ip_address":"","ucode":"BD0CB5FC790DDB","user_header":"https://static001.geekbang.org/account/avatar/00/11/2b/fa/1cde88d4.jpg","comment_is_top":false,"comment_ctime":1557507583,"is_pvip":false,"replies":[{"id":"33462","content":"è°¢è°¢ä½ çš„ç•™è¨€æé—®ï¼Zookeeperä¸€èˆ¬ä¼šè®¤ä¸ºæ˜¯CPç³»ç»Ÿï¼Œå¯¹äºä½ æ‰€è¯´çš„ä½œä¸ºæ³¨å†Œä¸­å¿ƒç¼ºå°‘Pçš„æƒ…å†µï¼Œæˆ‘æœç´¢äº†ä¸€ä¸‹ç›¸å…³èµ„æ–™ï¼Œå¥½åƒå¹¶æ²¡æœ‰è¿™æ ·çš„å®˜æ–¹è¯´æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557560549,"ip_address":"","comment_id":93592,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557507583","product_id":100025301,"comment_content":"è€å¸ˆæ‚¨å¥½ èƒ½å¦æŠŠkaffkaçš„caç±»æ¯”ä¸ºzookeeperä½œä¸ºæ³¨å†Œä¸­å¿ƒæ—¶ä¹Ÿç¼ºå°‘pï¼Œè¿˜æœ‰å°±æ˜¯zookeeperåœ¨è¿›è¡Œå¤§é‡èŠ‚ç‚¹é‡æ–°é€‰å–æ—¶æ˜¯ç¼ºå°‘açš„","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449691,"discussion_content":"è°¢è°¢ä½ çš„ç•™è¨€æé—®ï¼Zookeeperä¸€èˆ¬ä¼šè®¤ä¸ºæ˜¯CPç³»ç»Ÿï¼Œå¯¹äºä½ æ‰€è¯´çš„ä½œä¸ºæ³¨å†Œä¸­å¿ƒç¼ºå°‘Pçš„æƒ…å†µï¼Œæˆ‘æœç´¢äº†ä¸€ä¸‹ç›¸å…³èµ„æ–™ï¼Œå¥½åƒå¹¶æ²¡æœ‰è¿™æ ·çš„å®˜æ–¹è¯´æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557560549,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93288,"user_name":"è’™å¼€å¼º","can_delete":false,"product_type":"c1","uid":1317706,"ip_address":"","ucode":"61B3183781B9F7","user_header":"https://static001.geekbang.org/account/avatar/00/14/1b/4a/f9df2d06.jpg","comment_is_top":false,"comment_ctime":1557450232,"is_pvip":false,"replies":[{"id":"33272","content":"è°¢è°¢ä½ çš„æé—®ï¼å¦‚æœæ„Ÿå…´è¶£çš„è¯å¯ä»¥æŸ¥é˜…ï¼šhttps:&#47;&#47;engineering.linkedin.com&#47;kafka&#47;intra-cluster-replication-apache-kafkaã€‚åŒæ—¶ä¹Ÿæ¬¢è¿ä½ ç»§ç»­ç•™è¨€è®¨è®ºï¼Œå› ä¸ºè¿™ä¸ªKafka Replicationçš„ä¾‹å­ç¡®å®ä¸å¤ªå¥½ç†è§£ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557453215,"ip_address":"","comment_id":93288,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557450232","product_id":100025301,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œæˆ‘çœ‹åˆ°åœ¨ç•™è¨€åŒºé‡Œä½ å›ç­”æé—®è€…æ—¶ï¼Œè¯´äº†kafkaé€‰æ‹©äº†caï¼Œè¿™ä¸ªæ˜¯åœ¨å®˜ç½‘çš„é‚£ä¸ªåœ°æ–¹å¯ä»¥æŸ¥çœ‹è¿™ä¸ªè¯´æ˜å‘¢","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449564,"discussion_content":"è°¢è°¢ä½ çš„æé—®ï¼å¦‚æœæ„Ÿå…´è¶£çš„è¯å¯ä»¥æŸ¥é˜…ï¼šhttps://engineering.linkedin.com/kafka/intra-cluster-replication-apache-kafkaã€‚åŒæ—¶ä¹Ÿæ¬¢è¿ä½ ç»§ç»­ç•™è¨€è®¨è®ºï¼Œå› ä¸ºè¿™ä¸ªKafka Replicationçš„ä¾‹å­ç¡®å®ä¸å¤ªå¥½ç†è§£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557453215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93118,"user_name":"æ±¶æ¬è","can_delete":false,"product_type":"c1","uid":1062855,"ip_address":"","ucode":"3A0D84A190FB9E","user_header":"https://static001.geekbang.org/account/avatar/00/10/37/c7/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1557401340,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557401340","product_id":100025301,"comment_content":"kafkaçš„ä¾‹å­æ„Ÿè§‰æœ‰ç‚¹å¥‡æ€ª<br><br>1.æŒ‰ç…§æ–‡ä¸­ açš„ç†è®ºï¼Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä»»æ„éæ•…éšœçš„æœåŠ¡å™¨éƒ½å¿…é¡»å¯¹å®¢æˆ·çš„è¯·æ±‚äº§ç”Ÿå“åº”ã€‚å¦‚æœ masteræŒ‚äº†ï¼Œé‚£ slaverå¿…é¡»å¯¹å®¢æˆ·è¯·æ±‚äº§ç”Ÿå“åº”æ‰å¯¹ï¼Œä½†æŒ‰ replicationæ¶æ„ï¼Œ masteræŒ‚äº†ä¼šåœæ­¢æœåŠ¡ã€‚<br><br>2.æŒ‰æ–‡ä¸­ pç†è®ºï¼Œå½“æŸäº›ç³»ç»Ÿå…è®¸ç½‘ç»œä¸¢å¤±ä»ä¸€ä¸ªèŠ‚ç‚¹å‘é€åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹çš„ä»»æ„å¤šæ¡æ¶ˆæ¯ã€‚å¦‚æœä¸æ”¯æŒpï¼Œé‚£slaveræŒ‚äº†ï¼Œreplicationåº”è¯¥åœæ­¢æœåŠ¡ã€‚ä½†å…¶å®æ˜¯å…è®¸masteråˆ°slaveræ•°æ®ä¸¢å¤±çš„","like_count":0},{"had_liked":false,"id":93060,"user_name":"hua168","can_delete":false,"product_type":"c1","uid":1065255,"ip_address":"","ucode":"CFF9A7E86EBA48","user_header":"https://static001.geekbang.org/account/avatar/00/10/41/27/3ff1a1d6.jpg","comment_is_top":false,"comment_ctime":1557386717,"is_pvip":false,"replies":[{"id":"33271","content":"è°¢è°¢ä½ çš„æé—®ï¼<br><br>Availabilityå’ŒPartition Toleranceå¹¶ä¸æ˜¯ç”±æ˜¯å¦å…è®¸æ•°æ®ä¸¢å¤±æ¥åˆ¤æ–­çš„ã€‚<br><br>æˆ‘æ¥ä¸¾ä¸ªä¾‹å­è¯´æ˜å§ã€‚å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªç”±ä¸¤ä¸ªèŠ‚ç‚¹ç»„æˆçš„é›†ç¾¤ï¼Œè¿™ä¸¤ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥ç‹¬ç«‹è¿ä½œä¹Ÿå¯ä»¥ä¸å¯¹æ–¹é€šè®¯ï¼Œè€Œå®¢æˆ·ç«¯æ˜¯ä¸è¿™ä¸ªé›†ç¾¤é€šè®¯çš„ã€‚ä½œä¸ºä¸€ä¸ªé›†ç¾¤æ¥è¯´ï¼ŒAvailabilityæŒ‡çš„æ˜¯ä¸ç®¡è¿™ä¸¤ä¸ªèŠ‚ç‚¹å“ªä¸€ä¸ªèŠ‚ç‚¹åæ‰ä¸èƒ½è¿ä½œäº†ï¼Œå¯¹äºå®¢æˆ·ç«¯æ¥è¯´è¿˜æ˜¯å¯ä»¥ç»§ç»­ä¸è¿™ä¸ªé›†ç¾¤è¿›è¡Œé€šè®¯çš„ã€‚Partition ToleranceæŒ‡å¾—æ˜¯ï¼Œæœ¬æ¥è¿™ä¸¤ä¸ªèŠ‚ç‚¹å¯èƒ½æ˜¯éœ€è¦äº’ç›¸é€šè®¯æ¥åŒæ­¥æ•°æ®çš„ï¼Œè€Œå› ä¸ºNetwork Partitionä½¿å¾—å®ƒä»¬ä¹‹é—´ä¸èƒ½é€šè®¯äº†ï¼Œä½†æ˜¯å¯¹äºå®¢æˆ·ç«¯æ¥è¯´è¿˜æ˜¯å¯ä»¥ç»§ç»­ä¸è¿™ä¸ªé›†ç¾¤è¿›è¡Œé€šè®¯çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557453096,"ip_address":"","comment_id":93060,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557386717","product_id":100025301,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸€ä¸‹Aä¸Pæ˜¯æ€åŒºåˆ«çš„ï¼Œæ˜¯ä¸æ˜¯ä»æ˜¯å¦å…è®¸æ•°æ®ä¸¢å¤±ä¸Šåˆ¤æ–­ï¼Ÿ<br>Aæ‰€æœ‰èŠ‚ç‚¹é—´å‘æ•°æ®æ˜¯æ²¡æœ‰ä¸¢å¤±çš„<br>PèŠ‚ç‚¹é—´æ•°æ®æ˜¯å…è®¸ä¸¢å¤±çš„ï¼Œ<br>å¦‚æœè¿™æ ·çš„è¯ï¼Œé‚£ä¹ˆä¸»èŠ‚ç‚¹å’ŒèŠ‚ç‚¹é—´æ•°æ®ä¸æ˜¯äº§ç”Ÿä¸ä¸€è‡´çš„æƒ…å†µå—ï¼Œåˆæ€ä¹ˆä¿è¯Cï¼Œä¸€è‡´æ€§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449475,"discussion_content":"è°¢è°¢ä½ çš„æé—®ï¼\n\nAvailabilityå’ŒPartition Toleranceå¹¶ä¸æ˜¯ç”±æ˜¯å¦å…è®¸æ•°æ®ä¸¢å¤±æ¥åˆ¤æ–­çš„ã€‚\n\næˆ‘æ¥ä¸¾ä¸ªä¾‹å­è¯´æ˜å§ã€‚å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªç”±ä¸¤ä¸ªèŠ‚ç‚¹ç»„æˆçš„é›†ç¾¤ï¼Œè¿™ä¸¤ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥ç‹¬ç«‹è¿ä½œä¹Ÿå¯ä»¥ä¸å¯¹æ–¹é€šè®¯ï¼Œè€Œå®¢æˆ·ç«¯æ˜¯ä¸è¿™ä¸ªé›†ç¾¤é€šè®¯çš„ã€‚ä½œä¸ºä¸€ä¸ªé›†ç¾¤æ¥è¯´ï¼ŒAvailabilityæŒ‡çš„æ˜¯ä¸ç®¡è¿™ä¸¤ä¸ªèŠ‚ç‚¹å“ªä¸€ä¸ªèŠ‚ç‚¹åæ‰ä¸èƒ½è¿ä½œäº†ï¼Œå¯¹äºå®¢æˆ·ç«¯æ¥è¯´è¿˜æ˜¯å¯ä»¥ç»§ç»­ä¸è¿™ä¸ªé›†ç¾¤è¿›è¡Œé€šè®¯çš„ã€‚Partition ToleranceæŒ‡å¾—æ˜¯ï¼Œæœ¬æ¥è¿™ä¸¤ä¸ªèŠ‚ç‚¹å¯èƒ½æ˜¯éœ€è¦äº’ç›¸é€šè®¯æ¥åŒæ­¥æ•°æ®çš„ï¼Œè€Œå› ä¸ºNetwork Partitionä½¿å¾—å®ƒä»¬ä¹‹é—´ä¸èƒ½é€šè®¯äº†ï¼Œä½†æ˜¯å¯¹äºå®¢æˆ·ç«¯æ¥è¯´è¿˜æ˜¯å¯ä»¥ç»§ç»­ä¸è¿™ä¸ªé›†ç¾¤è¿›è¡Œé€šè®¯çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557453096,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":92914,"user_name":"zhihai.tu","can_delete":false,"product_type":"c1","uid":1045888,"ip_address":"","ucode":"61371EA3EF6988","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f5/80/baddf03b.jpg","comment_is_top":false,"comment_ctime":1557364536,"is_pvip":true,"replies":[{"id":"33183","content":"è°¢è°¢ä½ çš„ç­”æ¡ˆï¼æˆ‘ä¹ŸèµåŒï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557387244,"ip_address":"","comment_id":92914,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557364536","product_id":100025301,"comment_content":"APå§ï¼ŒCåªè¦ä¿æŒæœ€ç»ˆä¸€è‡´æ€§å°±å¯ä»¥äº†ã€‚ç”¨æˆ·å‘é€å¾®åšï¼Œå†™å’Œè¯»ä¹‹é—´å¯ä»¥å®¹å¿ä¸€å®šçš„å»¶è¿Ÿã€‚","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449423,"discussion_content":"è°¢è°¢ä½ çš„ç­”æ¡ˆï¼æˆ‘ä¹ŸèµåŒï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557387244,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":92859,"user_name":"éƒ½å¸‚å¤œå½’äºº","can_delete":false,"product_type":"c1","uid":1071909,"ip_address":"","ucode":"DFF59BE3D80B42","user_header":"https://static001.geekbang.org/account/avatar/00/10/5b/25/d78cc1fe.jpg","comment_is_top":false,"comment_ctime":1557357987,"is_pvip":true,"replies":[{"id":"33185","content":"è°¢è°¢ä½ çš„æé—®ï¼å…¶å®è¿™ä¸ªè¦çœ‹ä½ æ€ä¹ˆç†è§£åŒæ­¥è¿™ä¸ªè¯äº†ã€‚æˆ‘å¯ä»¥ä¸¾ä¸ªä¾‹å­æ¥è¯´æ˜æˆ‘æƒ³è¡¨è¾¾çš„æ„æ€ã€‚å¦‚æœæ“ä½œAå’ŒBéƒ½æ˜¯æ•°å€¼åŠ ä¸€è¿™ä¸ªæ“ä½œï¼Œåœ¨Aå’ŒBæ“ä½œä¹‹å‰ç³»ç»ŸçŠ¶æ€æ˜¯0ã€‚æ“ä½œAæˆåŠŸå®Œæˆäº†å¹¶ä¸”åœ¨Bä¹‹å‰ï¼Œé‚£ç³»ç»ŸçŠ¶æ€Aå°±æ˜¯æ•°å€¼1äº†ï¼Œç³»ç»ŸçŠ¶æ€Bä¸ä¼šæ˜¯0ä¹Ÿä¸ä¼šæ˜¯1å¿…é¡»2ã€‚å¦‚æœä½ ç†è§£çš„åŒæ­¥æ˜¯è¿™æ ·çš„è¯é‚£å°±å¯¹äº†ã€‚å¯èƒ½æˆ‘è¡¨è¾¾å¾—ä¸åˆ°ä½ï¼Œè°¢è°¢æŒ‡å‡ºï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557388350,"ip_address":"","comment_id":92859,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557357987","product_id":100025301,"comment_content":"å¦‚æœæ“ä½œ A æ˜¯åœ¨æ“ä½œ B ä¹‹å‰å‘ç”Ÿçš„ï¼Œå¹¶ä¸”æ“ä½œ A æˆåŠŸäº†ã€‚é‚£ä¹ˆç³»ç»ŸçŠ¶æ€ B å¿…é¡»è¦æ¯”ç³»ç»ŸçŠ¶æ€ A æ›´åŠ æ–°ã€‚<br>è¯·é—®æ€ä¹ˆä¼šæ›´åŠ æ–°ï¼Ÿåº”è¯¥æ˜¯åŒæ­¥å§ï¼Ÿè°¢è°¢ï¼","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449402,"discussion_content":"è°¢è°¢ä½ çš„æé—®ï¼å…¶å®è¿™ä¸ªè¦çœ‹ä½ æ€ä¹ˆç†è§£åŒæ­¥è¿™ä¸ªè¯äº†ã€‚æˆ‘å¯ä»¥ä¸¾ä¸ªä¾‹å­æ¥è¯´æ˜æˆ‘æƒ³è¡¨è¾¾çš„æ„æ€ã€‚å¦‚æœæ“ä½œAå’ŒBéƒ½æ˜¯æ•°å€¼åŠ ä¸€è¿™ä¸ªæ“ä½œï¼Œåœ¨Aå’ŒBæ“ä½œä¹‹å‰ç³»ç»ŸçŠ¶æ€æ˜¯0ã€‚æ“ä½œAæˆåŠŸå®Œæˆäº†å¹¶ä¸”åœ¨Bä¹‹å‰ï¼Œé‚£ç³»ç»ŸçŠ¶æ€Aå°±æ˜¯æ•°å€¼1äº†ï¼Œç³»ç»ŸçŠ¶æ€Bä¸ä¼šæ˜¯0ä¹Ÿä¸ä¼šæ˜¯1å¿…é¡»2ã€‚å¦‚æœä½ ç†è§£çš„åŒæ­¥æ˜¯è¿™æ ·çš„è¯é‚£å°±å¯¹äº†ã€‚å¯èƒ½æˆ‘è¡¨è¾¾å¾—ä¸åˆ°ä½ï¼Œè°¢è°¢æŒ‡å‡ºï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557388350,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":92541,"user_name":"zhengfc","can_delete":false,"product_type":"c1","uid":1003097,"ip_address":"","ucode":"9DBB9F6F11D3C8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4e/59/cdd842b2.jpg","comment_is_top":false,"comment_ctime":1557296913,"is_pvip":false,"replies":[{"id":"33141","content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼æˆ‘å¾ˆèµåŒä½ çš„æƒ³æ³•ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557338400,"ip_address":"","comment_id":92541,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557296913","product_id":100025301,"comment_content":"å¾®åšä½œä¸ºç¤¾äº¤ç±»çš„äº§å“ä¸€èˆ¬éœ€è¦ä¿è¯å¯ç”¨æ€§ï¼Œå³APï¼›ä¸é‡‘èç›¸å…³çš„äº§å“ä¸€èˆ¬è¦ä¿è¯CPï¼Œä¾‹å¦‚æ”¯ä»˜å®","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449311,"discussion_content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼æˆ‘å¾ˆèµåŒä½ çš„æƒ³æ³•ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557338400,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":92331,"user_name":"SpanningWings","can_delete":false,"product_type":"c1","uid":1503174,"ip_address":"","ucode":"A5E98A2626F187","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/dV2JvjoAOHOibxVqExibsBv0ib9jJ9zD8icYaDtFbicUgP0GmRbzmgujvz6pOl6drUcgdvfQXTJpOOY9OL45WrkInbA/132","comment_is_top":false,"comment_ctime":1557234192,"is_pvip":false,"replies":[{"id":"33037","content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼æˆ‘ååˆ†èµæˆç¬¬ä¸€æ®µä½ å¯¹Availabilityçš„ç†è§£ï¼æˆ‘ä¸ªäººçš„ç†è§£æ˜¯åœ¨è¿™ä¸ªReplicationçš„è®¾è®¡ç†å¿µä¸Šï¼Œä»–ä»¬ä¸ä¼šè€ƒè™‘network partitionå‘ç”Ÿåä¼šæ€ä¹ˆå¤„ç†ã€‚ä½†æ˜¯å¯¹äºæ•´ä¸ªKafkaç³»ç»Ÿæ¥è¯´ï¼Œåƒè¿™ç§Leader electionåº•å±‚infrastructureè¿˜æ˜¯ç”±Zookeeperæ¥å®ç°ï¼Œè‚¯å®šè¿˜æ˜¯CPæˆ–è€…APçš„ã€‚åœ¨ç•™è¨€é‡Œæˆ‘çœ‹åˆ°å¸¸è¶…åŒå­¦ä¹Ÿç»™å‡ºäº†ä¸€äº›referenceæ„Ÿè§‰ä¹Ÿæ˜¯ä¸é”™çš„ä¾‹å­ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557262550,"ip_address":"","comment_id":92331,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557234192","product_id":100025301,"comment_content":"å¯¹CAç³»ç»Ÿçš„åˆ†ç±»æˆ‘è¿˜æ˜¯æœ‰é—®é¢˜ã€‚åœ¨Kafka replicationçš„ä¾‹å­é‡Œé¢ï¼Œå½“ç½‘ç»œpartitionå‘ç”Ÿæ—¶ï¼Œæ¯”å¦‚åŸleaderä¸èƒ½è®¿é—®äº†ï¼ŒèŠ‚ç‚¹é‡æ–°elect leaderï¼Œè¿™æ˜¯å…¸å‹çš„æ”¾å¼ƒConsistencyæ¥ä¿è¯Availabilityçš„åšæ³•å“¦ã€‚è¿™æ ·çœ‹æ¥ï¼Œå®ƒæ˜¯ä¸ªAPç³»ç»Ÿã€‚<br><br>çœ‹æ¥è®¾è®¡è€…çš„æ„æ€æ˜¯æ­£å¸¸æƒ…å†µä¸‹ï¼Œå®£ç§°ä¸æ”¯æŒPã€‚å¼‚å¸¸æƒ…å†µä¸‹ï¼ŒPçœŸçš„å‘ç”Ÿäº†ï¼Œåæœè‡ªè´Ÿï¼Œå¯ä»¥é€‰æ‹©Aæ¥æ¢å¤æœåŠ¡ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©Cåœæ­¢æœåŠ¡ã€‚","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449218,"discussion_content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼æˆ‘ååˆ†èµæˆç¬¬ä¸€æ®µä½ å¯¹Availabilityçš„ç†è§£ï¼æˆ‘ä¸ªäººçš„ç†è§£æ˜¯åœ¨è¿™ä¸ªReplicationçš„è®¾è®¡ç†å¿µä¸Šï¼Œä»–ä»¬ä¸ä¼šè€ƒè™‘network partitionå‘ç”Ÿåä¼šæ€ä¹ˆå¤„ç†ã€‚ä½†æ˜¯å¯¹äºæ•´ä¸ªKafkaç³»ç»Ÿæ¥è¯´ï¼Œåƒè¿™ç§Leader electionåº•å±‚infrastructureè¿˜æ˜¯ç”±Zookeeperæ¥å®ç°ï¼Œè‚¯å®šè¿˜æ˜¯CPæˆ–è€…APçš„ã€‚åœ¨ç•™è¨€é‡Œæˆ‘çœ‹åˆ°å¸¸è¶…åŒå­¦ä¹Ÿç»™å‡ºäº†ä¸€äº›referenceæ„Ÿè§‰ä¹Ÿæ˜¯ä¸é”™çš„ä¾‹å­ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557262550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":92310,"user_name":"å¾","can_delete":false,"product_type":"c1","uid":1502878,"ip_address":"","ucode":"6BE46455FDD491","user_header":"https://static001.geekbang.org/account/avatar/00/16/ee/9e/204ce89c.jpg","comment_is_top":false,"comment_ctime":1557229174,"is_pvip":false,"replies":[{"id":"33055","content":"è°¢è°¢ä½ çš„ç»éªŒåˆ†äº«ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557274199,"ip_address":"","comment_id":92310,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557229174","product_id":100025301,"comment_content":"ä¸ªäººç†è§£ï¼ŒDYNAMOï¼Œé™ä½Wã€R  å°±å®ç°äº†A ï¼ŒåŠ å¤§Wã€R å°±å®ç°äº†Cï¼Œæ¯”è¾ƒçµæ´»ã€‚","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449213,"discussion_content":"è°¢è°¢ä½ çš„ç»éªŒåˆ†äº«ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557274199,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":92278,"user_name":"cricket1981","can_delete":false,"product_type":"c1","uid":1001715,"ip_address":"","ucode":"758262F5958DA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/f3/f1034ffd.jpg","comment_is_top":false,"comment_ctime":1557219594,"is_pvip":false,"replies":[{"id":"33050","content":"è°¢è°¢ä½ çš„æé—®ï¼<br><br>çœ‹æ¥ä½ æ˜¯æœ‰åœ¨ä½¿ç”¨æˆ–è€…æºç å‰–æè¿‡Kafkaã€‚æ˜¯çš„å‘¢ï¼ŒKafkaåº•å±‚å®ç°çš„è¯å°±å¦‚ä½ æ‰€è¯´çš„ï¼Œæ˜¯é€šè¿‡ReplicaFetcherManagerç®¡ç†ReplicaFetcherThreadï¼Œfollowerä¸æ–­åœ°å»è·å–leaderä¸­çš„message offsetã€‚ä¸è¿‡æˆ‘è§‰å¾—åœ¨è®²è¿°è¿™ä¸ªä¾‹å­çš„æ—¶å€™å¦‚æœè®²è¿°åˆ°äº†åº•å±‚å®ç°çš„è¯ï¼Œå¯èƒ½ä¸ä¸€å®šå®¹æ˜“ç†è§£ï¼Œæ¯•ç«Ÿè¿™ä¸ªä¸“æ ä¸æ˜¯Kafkaä¸“æ ã€‚æˆ‘æ›´å¸Œæœ›è¿˜æ˜¯åœ¨high levelä¸Šè¯´æ˜ç™½ä¸€ä¸ªæ¦‚å¿µå§ã€‚<br><br>å¦‚æœä½ è§‰å¾—å¸Œæœ›åé¢çš„ç« èŠ‚èƒ½å¤Ÿè®²è¿°åº•å±‚å®ç°çš„è¯ï¼Œä¹Ÿæ¬¢è¿ä½ æå‡ºè‡ªå·±çš„çœ‹æ³•å»ºè®®ç»™æˆ‘ï¼Œè°¢è°¢ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557271609,"ip_address":"","comment_id":92278,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557219594","product_id":100025301,"comment_content":"æ–‡ä¸­æè¿°kafkaçš„è¿™å¥&quot;2. é¢†å¯¼è€…èŠ‚ç‚¹æ”¶åˆ°è¯·æ±‚åå…ˆåœ¨æœ¬åœ°ä¿å­˜å¥½ï¼Œç„¶åä¹ŸåŒæ—¶å‘æ¶ˆæ¯é€šçŸ¥ R1å’ŒR2&quot;ï¼Œéš¾é“ä¸æ˜¯followeråˆ›å»ºReplicaFetcherThreadå»ä¸»åŠ¨pull leaderä¸­çš„æ¶ˆæ¯å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449205,"discussion_content":"è°¢è°¢ä½ çš„æé—®ï¼\n\nçœ‹æ¥ä½ æ˜¯æœ‰åœ¨ä½¿ç”¨æˆ–è€…æºç å‰–æè¿‡Kafkaã€‚æ˜¯çš„å‘¢ï¼ŒKafkaåº•å±‚å®ç°çš„è¯å°±å¦‚ä½ æ‰€è¯´çš„ï¼Œæ˜¯é€šè¿‡ReplicaFetcherManagerç®¡ç†ReplicaFetcherThreadï¼Œfollowerä¸æ–­åœ°å»è·å–leaderä¸­çš„message offsetã€‚ä¸è¿‡æˆ‘è§‰å¾—åœ¨è®²è¿°è¿™ä¸ªä¾‹å­çš„æ—¶å€™å¦‚æœè®²è¿°åˆ°äº†åº•å±‚å®ç°çš„è¯ï¼Œå¯èƒ½ä¸ä¸€å®šå®¹æ˜“ç†è§£ï¼Œæ¯•ç«Ÿè¿™ä¸ªä¸“æ ä¸æ˜¯Kafkaä¸“æ ã€‚æˆ‘æ›´å¸Œæœ›è¿˜æ˜¯åœ¨high levelä¸Šè¯´æ˜ç™½ä¸€ä¸ªæ¦‚å¿µå§ã€‚\n\nå¦‚æœä½ è§‰å¾—å¸Œæœ›åé¢çš„ç« èŠ‚èƒ½å¤Ÿè®²è¿°åº•å±‚å®ç°çš„è¯ï¼Œä¹Ÿæ¬¢è¿ä½ æå‡ºè‡ªå·±çš„çœ‹æ³•å»ºè®®ç»™æˆ‘ï¼Œè°¢è°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557271609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":92277,"user_name":"cricket1981","can_delete":false,"product_type":"c1","uid":1001715,"ip_address":"","ucode":"758262F5958DA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/f3/f1034ffd.jpg","comment_is_top":false,"comment_ctime":1557219500,"is_pvip":false,"replies":[{"id":"33052","content":"è°¢è°¢ä½ çš„æé—®ï¼æˆ‘ä¸ªäººç†è§£æ˜¯çº¿æ€§ä¸€è‡´æ€§ï¼ˆLinearizabilityï¼‰å¯ä»¥çœ‹ä½œæ˜¯å¼ºä¸€è‡´æ€§ï¼ˆStrong Consistencyï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557272387,"ip_address":"","comment_id":92277,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557219500","product_id":100025301,"comment_content":"æ€æ ·ç†è§£æ–‡ä¸­æ‰€è¿°çš„â€œçº¿æ€§ä¸€è‡´æ€§â€ï¼Ÿå¹³å¸¸å¬åˆ°çš„ä¸€è‡´æ€§åŒ…æ‹¬æœ‰â€œå¼ºä¸€è‡´æ€§â€ï¼Œâ€œå¼±ä¸€è‡´æ€§â€å’Œâ€œæœ€ç»ˆä¸€è‡´æ€§â€ï¼Œé‚£ä¹ˆè¿™é‡Œè¯´çš„â€œçº¿æ€§ä¸€è‡´æ€§â€è·Ÿå®ƒä»¬æœ‰åŒºåˆ«å’Œè”ç³»å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449204,"discussion_content":"è°¢è°¢ä½ çš„æé—®ï¼æˆ‘ä¸ªäººç†è§£æ˜¯çº¿æ€§ä¸€è‡´æ€§ï¼ˆLinearizabilityï¼‰å¯ä»¥çœ‹ä½œæ˜¯å¼ºä¸€è‡´æ€§ï¼ˆStrong Consistencyï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557272387,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":92070,"user_name":"coyang","can_delete":false,"product_type":"c1","uid":1024805,"ip_address":"","ucode":"563687E0F6A441","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a3/25/5da16c25.jpg","comment_is_top":false,"comment_ctime":1557185527,"is_pvip":true,"replies":[{"id":"32895","content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼GlusterFSæˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡å¬è¯´ï¼Œå­¦ä¹ äº†ï¼Œè°¢è°¢ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557188583,"ip_address":"","comment_id":92070,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557185527","product_id":100025301,"comment_content":"å‘å¾®åšé€‰æ‹©apï¼Œcä¸æ˜¯ç‰¹åˆ«é‡è¦ï¼Œåªè¦æœ€åèƒ½å¤Ÿè¾¾åˆ°ä¸€è‡´å°±å¯ä»¥äº†ã€‚åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»ŸGlusterFSæ„Ÿè§‰å’Œkafkaå¾ˆç›¸ä¼¼ï¼Œä¹Ÿæ˜¯æ”¾å¼ƒäº†pã€‚","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449136,"discussion_content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼GlusterFSæˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡å¬è¯´ï¼Œå­¦ä¹ äº†ï¼Œè°¢è°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557188583,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91982,"user_name":"Ming","can_delete":false,"product_type":"c1","uid":1516011,"ip_address":"","ucode":"69BB73B8AB7E3F","user_header":"https://static001.geekbang.org/account/avatar/00/17/21/eb/bb2e7a3b.jpg","comment_is_top":false,"comment_ctime":1557148821,"is_pvip":false,"replies":[{"id":"32890","content":"è°¢è°¢ä½ çš„ç•™è¨€ä¸è§‚ç‚¹ï¼<br><br>CAPç†è®ºå…¶å®å¹¶ä¸ç²—ç³™ï¼Œéƒ½æœ‰æ˜ç¡®çš„å®šä¹‰ã€‚ä¸è¿‡å¦‚ä½ æ‰€è¯´ï¼Œä¸åŒçš„ç³»ç»Ÿå¯¹äºconsistencyä¼šæœ‰ä¸åŒçš„å®šä¹‰ï¼Œå¯èƒ½å·²ç»åç¦»äº†å½“åˆè®ºæ–‡ä¸­æ‰€é˜æ˜çš„consistencyè§‚ç‚¹ã€‚<br><br>å½“ç„¶äº†ï¼Œå¤§éƒ¨åˆ†çš„ç†è®ºæˆ‘ä»¬éƒ½æ˜¯å¯ä»¥åœ¨wikiä¸Šé¢æ‰¾å¾—åˆ°çš„ã€‚ä¸å•å•æ˜¯æˆ‘çš„ä¸“æ ï¼Œåƒå…¶å®ƒä¸“æ ä¸­ï¼Œå¦‚æ“ä½œç³»ç»Ÿæ–¹é¢çš„æ¦‚å¿µã€æ•°æ®åº“çš„æ¦‚å¿µåˆæˆ–è€…æ˜¯è®¡ç»„ä¸Šçš„æ¦‚å¿µéƒ½èƒ½å¤Ÿåœ¨wikiä¸Šæ‰¾åˆ°ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸ºä»€ä¹ˆåˆè¦æ‹¿å‡ºæ¥ç»™è¯»è€…è®²è§£å‘¢ï¼Ÿæˆ‘åœ¨è®¾è®¡ä¸“æ çš„æ—¶å€™å¹¶ä¸å‡è®¾è¯»è€…çš„èƒŒæ™¯ï¼Œæ— è®ºä½ æ˜¯æ¯«æ— ç»éªŒçš„å­¦ç”Ÿåˆæˆ–è€…æ˜¯æ‹¥æœ‰å¾ˆå¤šå¤§æ•°æ®å¤„ç†ç»éªŒçš„å·¥ç¨‹å¸ˆï¼Œæˆ‘éƒ½å¸Œæœ›èƒ½ç…§é¡¾åˆ°å¤§éƒ¨åˆ†çš„è¯»è€…è®©å¤§å®¶éƒ½æœ‰ä¸€å®šçš„æ”¶è·ã€‚æˆ‘ä¹Ÿç›¸ä¿¡ä½ æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç»éªŒçš„é«˜çº§å·¥ç¨‹å¸ˆï¼Œå­¦ä¹ é˜…è¯»èƒ½åŠ›æ¯”å…¶ä»–äººä¼šæ›´å¿«ä¸€äº›ï¼Œæ‰€ä»¥é˜…è¯»æŸäº›ç¯‡ç« çš„æ—¶å€™å¯èƒ½ä¼šè§‰å¾—åç®€å•ä¸€äº›ã€‚<br><br>å¯¹äºé¡¾å®¢äº¤äº’çš„é—®é¢˜ï¼Œå¯èƒ½æˆ‘ç•™è¨€çš„å»¶æ—¶æœ‰é•¿æœ‰çŸ­ï¼Œè®©ä½ è§‰å¾—è®²å¸ˆä¹Ÿå°±ä¸å’Œé¡¾å®¢äº¤äº’çš„é”™è§‰ã€‚ä½†æ˜¯æˆ‘ä¸€ç›´éƒ½å¸Œæœ›èƒ½ä¿è¯é˜…è¯»æ¯ä¸€ä½é¡¾å®¢çš„ç•™è¨€å¹¶ä¸”ä¹Ÿå†™ä¸‹è‡ªå·±çš„æƒ³æ³•ã€‚åœ¨æ­¤ä¹Ÿæ„Ÿè°¢ä½ çš„å»ºè®®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557187692,"ip_address":"","comment_id":91982,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557148821","product_id":100025301,"comment_content":"CAPçš„ç†è®ºæ˜¯20å¹´å‰çš„äº§ç‰©ï¼Œå¾ˆç²—ç³™ï¼Œä¸åŒçš„vendorå¯¹å…¶çš„ç†è§£éƒ½ä¸ä¸€æ ·ã€‚å› æ­¤æˆ‘ä»¥ä¸ºè®¨è®ºè¿™ä¸ªçš„æ„ä¹‰ä¸å¤§ï¼ˆç•™ä¸ªwikié“¾æ¥å®Œå…¨è¶³å¤Ÿï¼‰ï¼Œä½œä¸ºå·¥ç¨‹å¸ˆå¾€å¾€å…³æ³¨çš„æ˜¯â€œä»€ä¹ˆæƒ…å†µä¸‹ä¼šæŒ‚ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ä¼šæ•°æ®ä¸ä¸€è‡´â€ã€‚<br><br>æˆ‘æ„Ÿè§‰ï¼Œè¿™ä¸ªä¸“æ é™¤äº†ä»å¼€ç¯‡çš„è‹¥å¹²ç« ï¼Œä¹‹åçš„å†…å®¹è´¨é‡ä¸‹æ»‘ï¼Œè®²å¸ˆä¹Ÿå°‘æœ‰å¯¹é¡¾å®¢çš„äº¤äº’ã€‚æˆ‘çœŸå¸Œæœ›å¹³å°èƒ½æä¾›æŒ‰é˜¶æ®µæ”¶è´¹ï¼Œè€Œä¸æ˜¯ä¸€é”¤å­ä¹°å–ã€‚","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449101,"discussion_content":"è°¢è°¢ä½ çš„ç•™è¨€ä¸è§‚ç‚¹ï¼\n\nCAPç†è®ºå…¶å®å¹¶ä¸ç²—ç³™ï¼Œéƒ½æœ‰æ˜ç¡®çš„å®šä¹‰ã€‚ä¸è¿‡å¦‚ä½ æ‰€è¯´ï¼Œä¸åŒçš„ç³»ç»Ÿå¯¹äºconsistencyä¼šæœ‰ä¸åŒçš„å®šä¹‰ï¼Œå¯èƒ½å·²ç»åç¦»äº†å½“åˆè®ºæ–‡ä¸­æ‰€é˜æ˜çš„consistencyè§‚ç‚¹ã€‚\n\nå½“ç„¶äº†ï¼Œå¤§éƒ¨åˆ†çš„ç†è®ºæˆ‘ä»¬éƒ½æ˜¯å¯ä»¥åœ¨wikiä¸Šé¢æ‰¾å¾—åˆ°çš„ã€‚ä¸å•å•æ˜¯æˆ‘çš„ä¸“æ ï¼Œåƒå…¶å®ƒä¸“æ ä¸­ï¼Œå¦‚æ“ä½œç³»ç»Ÿæ–¹é¢çš„æ¦‚å¿µã€æ•°æ®åº“çš„æ¦‚å¿µåˆæˆ–è€…æ˜¯è®¡ç»„ä¸Šçš„æ¦‚å¿µéƒ½èƒ½å¤Ÿåœ¨wikiä¸Šæ‰¾åˆ°ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸ºä»€ä¹ˆåˆè¦æ‹¿å‡ºæ¥ç»™è¯»è€…è®²è§£å‘¢ï¼Ÿæˆ‘åœ¨è®¾è®¡ä¸“æ çš„æ—¶å€™å¹¶ä¸å‡è®¾è¯»è€…çš„èƒŒæ™¯ï¼Œæ— è®ºä½ æ˜¯æ¯«æ— ç»éªŒçš„å­¦ç”Ÿåˆæˆ–è€…æ˜¯æ‹¥æœ‰å¾ˆå¤šå¤§æ•°æ®å¤„ç†ç»éªŒçš„å·¥ç¨‹å¸ˆï¼Œæˆ‘éƒ½å¸Œæœ›èƒ½ç…§é¡¾åˆ°å¤§éƒ¨åˆ†çš„è¯»è€…è®©å¤§å®¶éƒ½æœ‰ä¸€å®šçš„æ”¶è·ã€‚æˆ‘ä¹Ÿç›¸ä¿¡ä½ æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç»éªŒçš„é«˜çº§å·¥ç¨‹å¸ˆï¼Œå­¦ä¹ é˜…è¯»èƒ½åŠ›æ¯”å…¶ä»–äººä¼šæ›´å¿«ä¸€äº›ï¼Œæ‰€ä»¥é˜…è¯»æŸäº›ç¯‡ç« çš„æ—¶å€™å¯èƒ½ä¼šè§‰å¾—åç®€å•ä¸€äº›ã€‚\n\nå¯¹äºé¡¾å®¢äº¤äº’çš„é—®é¢˜ï¼Œå¯èƒ½æˆ‘ç•™è¨€çš„å»¶æ—¶æœ‰é•¿æœ‰çŸ­ï¼Œè®©ä½ è§‰å¾—è®²å¸ˆä¹Ÿå°±ä¸å’Œé¡¾å®¢äº¤äº’çš„é”™è§‰ã€‚ä½†æ˜¯æˆ‘ä¸€ç›´éƒ½å¸Œæœ›èƒ½ä¿è¯é˜…è¯»æ¯ä¸€ä½é¡¾å®¢çš„ç•™è¨€å¹¶ä¸”ä¹Ÿå†™ä¸‹è‡ªå·±çš„æƒ³æ³•ã€‚åœ¨æ­¤ä¹Ÿæ„Ÿè°¢ä½ çš„å»ºè®®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557187692,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91954,"user_name":"miwucc","can_delete":false,"product_type":"c1","uid":1326429,"ip_address":"","ucode":"7935BD907119AE","user_header":"https://static001.geekbang.org/account/avatar/00/14/3d/5d/ac666969.jpg","comment_is_top":false,"comment_ctime":1557143941,"is_pvip":false,"replies":[{"id":"32879","content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼Œæœ‰è´¨ç–‘æ˜¯ä¸€ä»¶å¥½çš„äº‹æƒ…ï¼<br><br>é¦–å…ˆæˆ‘ä¸ç¡®å®šä½ æ˜¯è§‰å¾—ä¾‹å­ä¸­çš„å“ªä¸€å—å†…å®¹ä½ è§‰å¾—ä¸åŒæ„ï¼Œå¦‚æœä½ çš„ç–‘é—®æ˜¯Kafkaè¿™ä¸ªç³»ç»Ÿæ˜¯å¦æ”¾å¼ƒäº†Pï¼Œæˆ‘çš„å›ç­”æ˜¯å¹¶æ²¡æœ‰æ”¾å¼ƒPã€‚ä½œä¸ºä¸€ä¸ªæ•´ä½“ç³»ç»Ÿæ¥è¯´ï¼Œåœ¨åˆ†å¸ƒå¼çš„ç¯å¢ƒä¸‹ï¼Œç³»ç»Ÿçš„è®¾è®¡æ˜¯ä¸ä¼šæ”¾å¼ƒPçš„ï¼Œä¹Ÿå°±æ˜¯å¤§å¤šæ•°ç³»ç»Ÿåœ¨CAPé‡Œé¢éƒ½ä¼šé€‰æ‹©APæˆ–è€…CPã€‚ <br><br>è€Œå¦‚æœä½ çš„ç–‘é—®æ˜¯Kafka Replication Designçš„æ€æƒ³é‡Œæœ‰æ²¡æœ‰æ”¾å¼ƒPï¼Œè¿™ä¸€ç‚¹æˆ‘è§‰å¾—æˆ‘æ˜¯è®¤åŒKafkaä½œè€…Jun Raoçš„è§‚ç‚¹çš„ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿç‰¹åœ°åœ¨æ ‡é¢˜ä¸­å†™ä¸Šâ€œæ”¾å¼ƒäº†På±æ€§çš„Kafka Replicationâ€ï¼Œè€Œä¸æ˜¯â€œæ”¾å¼ƒäº†På±æ€§çš„Kafkaç³»ç»Ÿâ€ä»¥å…å¼•èµ·è¯¯ä¼šã€‚<br><br>Kafkaçš„ä½œè€…ä¹‹ä¸€Jun Raoåœ¨è®¾è®¡Kafka Replicationçš„æ—¶å€™ï¼Œæ˜ç¡®è¯´æ˜äº†â€œAll distributed systems must make trade-offs between guaranteeing consistency, availability, and partition tolerance. Our goal was to support replication in a Kafka cluster within a single datacenter, where network partitioning is rare, so our design focuses on maintaining highly available and strongly consistent replicas.â€ï¼Œè¿™ä¸€ç‚¹æ˜¯åœ¨Linkedinçš„Engineeringå®˜æ–¹æ–‡æ¡£ä¸Špublishçš„ã€‚è€Œåœ¨2013å¹´çš„Apacheconä¸Šï¼ŒKafka Replicationçš„æŠ€æœ¯æ¼”è®²ä¸Šä¹Ÿæ˜ç¡®è¯´æ˜äº†â€œKafka Replication: Pick CAâ€ã€‚ <br><br>å¦‚æœè¿˜æœ‰ç–‘é—®çš„åœ°æ–¹ï¼Œä¹Ÿæ¬¢è¿ä½ ç»§ç»­ç•™è¨€æé—®ï¼Œä¸€èµ·å­¦ä¹ è¿›æ­¥ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557185801,"ip_address":"","comment_id":91954,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557143941","product_id":100025301,"comment_content":"kafkaçš„ä¾‹å­è§‰å¾—ä¸åŒæ„ã€‚","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449097,"discussion_content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼Œæœ‰è´¨ç–‘æ˜¯ä¸€ä»¶å¥½çš„äº‹æƒ…ï¼\n\né¦–å…ˆæˆ‘ä¸ç¡®å®šä½ æ˜¯è§‰å¾—ä¾‹å­ä¸­çš„å“ªä¸€å—å†…å®¹ä½ è§‰å¾—ä¸åŒæ„ï¼Œå¦‚æœä½ çš„ç–‘é—®æ˜¯Kafkaè¿™ä¸ªç³»ç»Ÿæ˜¯å¦æ”¾å¼ƒäº†Pï¼Œæˆ‘çš„å›ç­”æ˜¯å¹¶æ²¡æœ‰æ”¾å¼ƒPã€‚ä½œä¸ºä¸€ä¸ªæ•´ä½“ç³»ç»Ÿæ¥è¯´ï¼Œåœ¨åˆ†å¸ƒå¼çš„ç¯å¢ƒä¸‹ï¼Œç³»ç»Ÿçš„è®¾è®¡æ˜¯ä¸ä¼šæ”¾å¼ƒPçš„ï¼Œä¹Ÿå°±æ˜¯å¤§å¤šæ•°ç³»ç»Ÿåœ¨CAPé‡Œé¢éƒ½ä¼šé€‰æ‹©APæˆ–è€…CPã€‚ \n\nè€Œå¦‚æœä½ çš„ç–‘é—®æ˜¯Kafka Replication Designçš„æ€æƒ³é‡Œæœ‰æ²¡æœ‰æ”¾å¼ƒPï¼Œè¿™ä¸€ç‚¹æˆ‘è§‰å¾—æˆ‘æ˜¯è®¤åŒKafkaä½œè€…Jun Raoçš„è§‚ç‚¹çš„ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿç‰¹åœ°åœ¨æ ‡é¢˜ä¸­å†™ä¸Šâ€œæ”¾å¼ƒäº†På±æ€§çš„Kafka Replicationâ€ï¼Œè€Œä¸æ˜¯â€œæ”¾å¼ƒäº†På±æ€§çš„Kafkaç³»ç»Ÿâ€ä»¥å…å¼•èµ·è¯¯ä¼šã€‚\n\nKafkaçš„ä½œè€…ä¹‹ä¸€Jun Raoåœ¨è®¾è®¡Kafka Replicationçš„æ—¶å€™ï¼Œæ˜ç¡®è¯´æ˜äº†â€œAll distributed systems must make trade-offs between guaranteeing consistency, availability, and partition tolerance. Our goal was to support replication in a Kafka cluster within a single datacenter, where network partitioning is rare, so our design focuses on maintaining highly available and strongly consistent replicas.â€ï¼Œè¿™ä¸€ç‚¹æ˜¯åœ¨Linkedinçš„Engineeringå®˜æ–¹æ–‡æ¡£ä¸Špublishçš„ã€‚è€Œåœ¨2013å¹´çš„Apacheconä¸Šï¼ŒKafka Replicationçš„æŠ€æœ¯æ¼”è®²ä¸Šä¹Ÿæ˜ç¡®è¯´æ˜äº†â€œKafka Replication: Pick CAâ€ã€‚ \n\nå¦‚æœè¿˜æœ‰ç–‘é—®çš„åœ°æ–¹ï¼Œä¹Ÿæ¬¢è¿ä½ ç»§ç»­ç•™è¨€æé—®ï¼Œä¸€èµ·å­¦ä¹ è¿›æ­¥ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557185801,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91939,"user_name":"å­™ç¨šæ˜Š","can_delete":false,"product_type":"c1","uid":1010660,"ip_address":"","ucode":"44283BA4A577B6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6b/e4/afacba1c.jpg","comment_is_top":false,"comment_ctime":1557140621,"is_pvip":false,"replies":[{"id":"32900","content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼å“ˆå“ˆï¼ŒHBaseåœ¨è®¾è®¡ä¸Šé€‰æ‹©äº†Consistencyå’ŒPartition Toleranceã€‚åè€Œæ˜¯Cassandraæ˜¯AP systemã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557189311,"ip_address":"","comment_id":91939,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557140621","product_id":100025301,"comment_content":"hbase çš„æ‰€æœ‰è®°å½•éƒ½æ˜¯append only çš„ï¼Œå°è±¡ä¸­æ˜¯APï¼Œåè€Œæ˜¯consistency æœ‰ç‚¹å¦¥åï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449088,"discussion_content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼å“ˆå“ˆï¼ŒHBaseåœ¨è®¾è®¡ä¸Šé€‰æ‹©äº†Consistencyå’ŒPartition Toleranceã€‚åè€Œæ˜¯Cassandraæ˜¯AP systemã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557189311,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91830,"user_name":"ç¬‘åœ°","can_delete":false,"product_type":"c1","uid":1103478,"ip_address":"","ucode":"2CD6F5BCAAC2C8","user_header":"https://static001.geekbang.org/account/avatar/00/10/d6/76/be6fc02e.jpg","comment_is_top":false,"comment_ctime":1557116774,"is_pvip":false,"replies":[{"id":"33039","content":"æ•°æ®å’Œæ¶æ„ä¸æ˜¯å‰²è£‚çš„ä¸¤ä¸ªäº‹æƒ…ï¼Œç›¸åæˆ‘ä»¬è¿™é‡Œè®²çš„æ˜¯æ•°æ®å¤„ç†ç³»ç»Ÿçš„æ¶æ„è®¾è®¡ã€‚ä¸è®ºæ˜¯å‰ç«¯å·¥ç¨‹å¸ˆè¦è€ƒè™‘å‰ç«¯æ¶æ„ï¼Œå­˜å‚¨ç³»ç»Ÿè¦è€ƒè™‘å­˜å‚¨ç³»ç»Ÿæ¶æ„ã€‚è„±ç¦»äº†æŠ€æœ¯ç³»ç»Ÿï¼Œæ¶æ„æ— ä»è°ˆèµ·ï¼Œè„±ç¦»äº†æ¶æ„è®¾è®¡æˆ‘ä¹Ÿä¸è®¤ä¸ºçº¯ç²¹çš„æ•°æ®æœ‰ä»€ä¹ˆæ„ä¹‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Yuannanè”¡å…ƒæ¥ ","uid":"1257426","ctime":1557266790,"ip_address":"","comment_id":91830,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557116774","product_id":100025301,"comment_content":"æ„Ÿè§‰è¿™å‡ è®²éƒ½å¾ˆå¤§æ•°æ®å…³ç³»æ²¡é‚£ä¹ˆå¤§ï¼Œæ›´å¤šæ˜¯è®²æ¶æ„æ–¹é¢çš„ï¼Œå†…å®¹èƒ½å¦å‘å¤§æ•°æ®å€¾æ–œä¸€ç‚¹","like_count":0,"discussions":[{"author":{"id":1257426,"avatar":"https://static001.geekbang.org/account/avatar/00/13/2f/d2/0b6a8945.jpg","nickname":"Yuannanè”¡å…ƒæ¥ ","note":"","ucode":"695E183CE496A8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449049,"discussion_content":"æ•°æ®å’Œæ¶æ„ä¸æ˜¯å‰²è£‚çš„ä¸¤ä¸ªäº‹æƒ…ï¼Œç›¸åæˆ‘ä»¬è¿™é‡Œè®²çš„æ˜¯æ•°æ®å¤„ç†ç³»ç»Ÿçš„æ¶æ„è®¾è®¡ã€‚ä¸è®ºæ˜¯å‰ç«¯å·¥ç¨‹å¸ˆè¦è€ƒè™‘å‰ç«¯æ¶æ„ï¼Œå­˜å‚¨ç³»ç»Ÿè¦è€ƒè™‘å­˜å‚¨ç³»ç»Ÿæ¶æ„ã€‚è„±ç¦»äº†æŠ€æœ¯ç³»ç»Ÿï¼Œæ¶æ„æ— ä»è°ˆèµ·ï¼Œè„±ç¦»äº†æ¶æ„è®¾è®¡æˆ‘ä¹Ÿä¸è®¤ä¸ºçº¯ç²¹çš„æ•°æ®æœ‰ä»€ä¹ˆæ„ä¹‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557266790,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91828,"user_name":"å­™ç¨šæ˜Š","can_delete":false,"product_type":"c1","uid":1010660,"ip_address":"","ucode":"44283BA4A577B6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6b/e4/afacba1c.jpg","comment_is_top":false,"comment_ctime":1557116214,"is_pvip":false,"replies":[{"id":"32902","content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼Œç†è§£æ­£ç¡®çš„ï¼å¥½ä¸€ä¸ªä¸æŒ‚æ‰æ˜¯ç‹é“ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557189390,"ip_address":"","comment_id":91828,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557116214","product_id":100025301,"comment_content":"å¾®åšè¿™ç§append only çš„ç³»ç»Ÿï¼Œå¯¹ä¸€è‡´æ€§å…¶å®æ²¡å¤šå¤§éœ€æ±‚ï¼Œç”¨æˆ·é—²ç€æ²¡äº‹ä¹Ÿä¼šä¸åœåˆ·çš„ï¼Œä¸æŒ‚æ‰æ˜¯ç‹é“","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449047,"discussion_content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼Œç†è§£æ­£ç¡®çš„ï¼å¥½ä¸€ä¸ªä¸æŒ‚æ‰æ˜¯ç‹é“ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557189390,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91826,"user_name":"å­™ç¨šæ˜Š","can_delete":false,"product_type":"c1","uid":1010660,"ip_address":"","ucode":"44283BA4A577B6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6b/e4/afacba1c.jpg","comment_is_top":false,"comment_ctime":1557116092,"is_pvip":false,"replies":[{"id":"32903","content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼Œç†è§£æ­£ç¡®çš„ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557189413,"ip_address":"","comment_id":91826,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557116092","product_id":100025301,"comment_content":"APï¼Œå¾®åšå¯¹consistency è¦æ±‚ä¸é«˜ï¼Œè®¿é—®é‡åˆç‰¹åˆ«å¤§ï¼Œå°¤å…¶æ˜¯æ˜æ˜Ÿçš„æ¶ˆæ¯ï¼Œé€ æˆç¬é—´çˆ†å‘æµé‡ï¼Œavailability æ¯”è¾ƒé‡è¦","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449046,"discussion_content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼Œç†è§£æ­£ç¡®çš„ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557189413,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91800,"user_name":"æœ‰é“­","can_delete":false,"product_type":"c1","uid":1046302,"ip_address":"","ucode":"2C7CB36CA5C04C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/3XbCueYYVWTiclv8T5tFpwiblOxLphvSZxL4ujMdqVMibZnOiaFK2C5nKRGv407iaAsrI0CDICYVQJtiaITzkjfjbvrQ/132","comment_is_top":false,"comment_ctime":1557111045,"is_pvip":false,"replies":[{"id":"32897","content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼Œç†è§£æ­£ç¡®çš„ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557188695,"ip_address":"","comment_id":91800,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557111045","product_id":100025301,"comment_content":"å¾®åšåªèƒ½é€‰APï¼š<br>å¯ç”¨æ€§å¿…é¡»ä¿è¯<br>æ•°æ®é‡åºå¤§ï¼Œå¿…é¡»åˆ†åŒº<br>ä¸€è‡´æ€§å°±åªèƒ½æ”¾åé¢ï¼Œæœ€ç»ˆä¸€è‡´å°±è¡Œäº†ï¼Œæ™šä¸€ç‚¹çœ‹åˆ°å›å¤ä¹Ÿæ²¡å•¥å¤§çš„å½±å“","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449033,"discussion_content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼Œç†è§£æ­£ç¡®çš„ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557188695,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91769,"user_name":"aof","can_delete":false,"product_type":"c1","uid":1062864,"ip_address":"","ucode":"5815D63C4926BC","user_header":"https://static001.geekbang.org/account/avatar/00/10/37/d0/26975fba.jpg","comment_is_top":false,"comment_ctime":1557105622,"is_pvip":false,"replies":[{"id":"32899","content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼Œç†è§£æ­£ç¡®çš„ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557188959,"ip_address":"","comment_id":91769,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557105622","product_id":100025301,"comment_content":"APã€‚<br>Aæ˜¯è¦æ»¡è¶³å¯ç”¨æ€§ï¼Œä¸€å®šè¦æœ‰ä¿¡æ¯è¿”å›<br>Påˆ†åŒºå®¹é”™ä¸€èˆ¬æ¥è®²ä¸å¯é¿å…<br>Cå¯¹äºä¸åŒçš„ç”¨æˆ·å»åˆ·æ–°ä½ å‘çš„å¾®åšï¼Œåªè¦ä¿è¯æœ€ç»ˆä¸€è‡´æ€§å°±å¯ä»¥äº†","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449022,"discussion_content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼Œç†è§£æ­£ç¡®çš„ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557188959,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91759,"user_name":"å­¤é¹œé½é£","can_delete":false,"product_type":"c1","uid":1149144,"ip_address":"","ucode":"33CF3142DAD56C","user_header":"https://static001.geekbang.org/account/avatar/00/11/88/d8/fdd2cecd.jpg","comment_is_top":false,"comment_ctime":1557104845,"is_pvip":false,"replies":[{"id":"32896","content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼Œç†è§£æ­£ç¡®çš„ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557188679,"ip_address":"","comment_id":91759,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557104845","product_id":100025301,"comment_content":"å¾®åšçš„åœºæ™¯å¯¹Cçš„è¦æ±‚å¹¶ä¸æ˜¯ååˆ†ç´§è¿«ï¼Œè€ŒAPæ‰æ˜¯å…³é”®","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449019,"discussion_content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼Œç†è§£æ­£ç¡®çš„ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557188679,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91752,"user_name":"ä¸è´°è¿‡å…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1496958,"ip_address":"","ucode":"B208B8DF5FA109","user_header":"https://static001.geekbang.org/account/avatar/00/16/d7/7e/6b6384e9.jpg","comment_is_top":false,"comment_ctime":1557104205,"is_pvip":false,"replies":[{"id":"32914","content":"è°¢è°¢ä½ çš„ç­”æ¡ˆï¼Œæˆ‘ä¹Ÿååˆ†èµåŒï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557191120,"ip_address":"","comment_id":91752,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557104205","product_id":100025301,"comment_content":"å‘å¾®åšï¼Œä¸éœ€è¦ä¸€è‡´æ€§ï¼Œå³Cå±æ€§ï¼Œä½†æ˜¯å…¶éœ€è¦æœ€ç»ˆä¸€è‡´æ€§ã€‚éœ€è¦APå±æ€§ï¼Œå³ä»–éœ€è¦é«˜å¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§ã€‚","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449016,"discussion_content":"è°¢è°¢ä½ çš„ç­”æ¡ˆï¼Œæˆ‘ä¹Ÿååˆ†èµåŒï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557191120,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91748,"user_name":"é‚±ä»è´¤â€»klion26","can_delete":false,"product_type":"c1","uid":1027239,"ip_address":"","ucode":"36DF21F2B9E94C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ac/a7/4d41966a.jpg","comment_is_top":false,"comment_ctime":1557103954,"is_pvip":false,"replies":[{"id":"32915","content":"è°¢è°¢ä½ çš„ç­”æ¡ˆï¼Œæˆ‘ä¹Ÿååˆ†èµåŒï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557191134,"ip_address":"","comment_id":91748,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557103954","product_id":100025301,"comment_content":"ap<br>p æ˜¯è‚¯å®šéœ€è¦çš„ï¼Œéœ€è¦ä¿è¯å¯é æ€§ï¼Œéšæ—¶éƒ½å¯ä»¥è®¿é—®<br>a å’Œ c æ¥è¯´ï¼Œå¾®åšä¸åƒè®°è´¦ç³»ç»Ÿï¼Œä¸éœ€è¦å¼ºä¸€è‡´æ€§ï¼Œå°±ç®—æ¯ä¸ªäººçœ‹åˆ°çš„éƒ½æ˜¯ä¸ä¸€æ ·çš„çŠ¶æ€ä¹Ÿæ˜¯å…è®¸çš„ï¼ŒåæœŸè§†æƒ…å†µæ¥è¿›è¡Œä¿®è¡¥å°±å¥½äº†ï¼Œå› æ­¤é€‰æ‹© a æ”¾å¼ƒ c","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449013,"discussion_content":"è°¢è°¢ä½ çš„ç­”æ¡ˆï¼Œæˆ‘ä¹Ÿååˆ†èµåŒï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557191134,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91743,"user_name":"æ—å¤•","can_delete":false,"product_type":"c1","uid":1494249,"ip_address":"","ucode":"89ADA39FC10BBD","user_header":"https://static001.geekbang.org/account/avatar/00/16/cc/e9/19497393.jpg","comment_is_top":false,"comment_ctime":1557103680,"is_pvip":false,"replies":[{"id":"32910","content":"è°¢è°¢ä½ çš„ç•™è¨€æé—®ï¼<br><br>æˆ‘çš„ç†è§£æ˜¯å¦‚æœä»…ä»…å°±ä¸€ä¸ªKafka Replication clusteræ¥è¯´ï¼Œå¦‚æœé¢†å¯¼è€…æŒ‚äº†æˆ‘ä»¬å°±ä¸ä¼šå†ä»è¿™ä¸ªclusteræ‹¿åˆ°å†…å®¹äº†ï¼Œæ‰€ä»¥åœ¨Intra-cluster Replicationè¿™ä¸ªè®¾è®¡ç‚¹ä¸Šï¼Œä»–ä»¬æ˜¯ä¸è€ƒè™‘Pçš„ã€‚<br><br>ä¹‹æ‰€ä»¥æˆ‘åœ¨æ–‡ä¸­è¯´Kafka Replicationé€‰æ‹©äº†CAï¼Œæ˜¯å› ä¸ºKafkaçš„ä½œè€…ä¹‹ä¸€Jun Raoåœ¨è®¾è®¡Kafka Replicationçš„æ—¶å€™ï¼Œæ˜ç¡®è¯´æ˜äº†â€œAll distributed systems must make trade-offs between guaranteeing consistency, availability, and partition tolerance. Our goal was to support replication in a Kafka cluster within a single datacenter, where network partitioning is rare, so our design focuses on maintaining highly available and strongly consistent replicas.â€ï¼Œè¿™ä¸€ç‚¹æ˜¯åœ¨Linkedinçš„å®˜æ–¹æ–‡æ¡£ä¸Špublishçš„ã€‚è€Œåœ¨2013å¹´çš„Apacheconä¸Šï¼ŒKafka Replicationçš„æŠ€æœ¯æ¼”è®²ä¸Šä¹Ÿæ˜ç¡®è¯´æ˜äº†â€œKafka Replication: Pick CAâ€ã€‚<br><br>æ‰€ä»¥ä½ ä¼šå‘ç°ï¼Œä»–ä»¬çš„è®¾è®¡æ€è·¯æ˜¯ä»…ä»…å°±Intra-clusterçš„data replicationå‡ºå‘çš„ã€‚å½“ç„¶ï¼Œå¦‚æœä»æ•´ä¸ªKafkaç³»ç»Ÿæ¥è¯´ï¼Œæ˜¯ä¸å¯èƒ½æ”¾å¼ƒPçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557190958,"ip_address":"","comment_id":91743,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557103680","product_id":100025301,"comment_content":"ä½ å¥½ï¼Œkafkaæ˜¯CAçš„é‚£æ®µä¸å¤ªç†è§£ï¼Œæ—¢ç„¶ä¸¤å°followeréƒ½æŒ‚äº†ï¼Œkafkaé›†ç¾¤è¿˜èƒ½è¿”å›ç»“æœï¼Œä¸æ˜¯æ»¡è¶³äº†åˆ†åŒºå®¹é”™å—","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449012,"discussion_content":"è°¢è°¢ä½ çš„ç•™è¨€æé—®ï¼\n\næˆ‘çš„ç†è§£æ˜¯å¦‚æœä»…ä»…å°±ä¸€ä¸ªKafka Replication clusteræ¥è¯´ï¼Œå¦‚æœé¢†å¯¼è€…æŒ‚äº†æˆ‘ä»¬å°±ä¸ä¼šå†ä»è¿™ä¸ªclusteræ‹¿åˆ°å†…å®¹äº†ï¼Œæ‰€ä»¥åœ¨Intra-cluster Replicationè¿™ä¸ªè®¾è®¡ç‚¹ä¸Šï¼Œä»–ä»¬æ˜¯ä¸è€ƒè™‘Pçš„ã€‚\n\nä¹‹æ‰€ä»¥æˆ‘åœ¨æ–‡ä¸­è¯´Kafka Replicationé€‰æ‹©äº†CAï¼Œæ˜¯å› ä¸ºKafkaçš„ä½œè€…ä¹‹ä¸€Jun Raoåœ¨è®¾è®¡Kafka Replicationçš„æ—¶å€™ï¼Œæ˜ç¡®è¯´æ˜äº†â€œAll distributed systems must make trade-offs between guaranteeing consistency, availability, and partition tolerance. Our goal was to support replication in a Kafka cluster within a single datacenter, where network partitioning is rare, so our design focuses on maintaining highly available and strongly consistent replicas.â€ï¼Œè¿™ä¸€ç‚¹æ˜¯åœ¨Linkedinçš„å®˜æ–¹æ–‡æ¡£ä¸Špublishçš„ã€‚è€Œåœ¨2013å¹´çš„Apacheconä¸Šï¼ŒKafka Replicationçš„æŠ€æœ¯æ¼”è®²ä¸Šä¹Ÿæ˜ç¡®è¯´æ˜äº†â€œKafka Replication: Pick CAâ€ã€‚\n\næ‰€ä»¥ä½ ä¼šå‘ç°ï¼Œä»–ä»¬çš„è®¾è®¡æ€è·¯æ˜¯ä»…ä»…å°±Intra-clusterçš„data replicationå‡ºå‘çš„ã€‚å½“ç„¶ï¼Œå¦‚æœä»æ•´ä¸ªKafkaç³»ç»Ÿæ¥è¯´ï¼Œæ˜¯ä¸å¯èƒ½æ”¾å¼ƒPçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557190958,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91736,"user_name":"JohnT3e","can_delete":false,"product_type":"c1","uid":1063982,"ip_address":"","ucode":"CF4AAAC933529C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLdWHFCr66TzHS2CpCkiaRaDIk3tU5sKPry16Q7ic0mZZdy8LOCYc38wOmyv5RZico7icBVeaPX8X2jcw/132","comment_is_top":false,"comment_ctime":1557103314,"is_pvip":false,"replies":[{"id":"32909","content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼Œæˆ‘ååˆ†èµåŒä½ çš„ç­”æ¡ˆï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557190675,"ip_address":"","comment_id":91736,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557103314","product_id":100025301,"comment_content":"å‘å¾®åšåªéœ€è¦æœ€ç»ˆä¸€è‡´æ€§ä¿è¯å°±å¯ä»¥äº†ï¼Œå› æ­¤é€‰æ‹©APã€‚","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449010,"discussion_content":"è°¢è°¢ä½ çš„ç•™è¨€ï¼Œæˆ‘ååˆ†èµåŒä½ çš„ç­”æ¡ˆï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557190675,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91731,"user_name":"Allie","can_delete":false,"product_type":"c1","uid":1059891,"ip_address":"","ucode":"80497FE06D8E1F","user_header":"https://static001.geekbang.org/account/avatar/00/10/2c/33/f3755a9b.jpg","comment_is_top":false,"comment_ctime":1557102234,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557102234","product_id":100025301,"comment_content":"APï¼Œå¾®åšéœ€è¦ä¿è¯å‘é€å’ŒæŸ¥çœ‹ä¿¡æ¯ï¼Œè€Œæ‰€æœ‰æ•°æ®çš„åŠæ—¶æ€§æ˜¯ä¸éœ€è¦ä¸¥æ ¼ä¿è¯çš„","like_count":0},{"had_liked":false,"id":91730,"user_name":"Allie","can_delete":false,"product_type":"c1","uid":1059891,"ip_address":"","ucode":"80497FE06D8E1F","user_header":"https://static001.geekbang.org/account/avatar/00/10/2c/33/f3755a9b.jpg","comment_is_top":false,"comment_ctime":1557102062,"is_pvip":false,"replies":[{"id":"32912","content":"è°¢è°¢ä½ çš„ç­”æ¡ˆï¼Œæˆ‘ä¹Ÿååˆ†èµåŒï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557191052,"ip_address":"","comment_id":91730,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557102062","product_id":100025301,"comment_content":"apï¼Œä¸€è‡´æ€§ä¸éœ€è¦ä¸¥æ ¼ä¿è¯ï¼Œè€Œå¦å¤–ä¸¤ä¸ªæ˜¯å¿…é¡»æœ‰çš„ï¼Œä¸ç„¶å½±å“åŠŸèƒ½ä½¿ç”¨","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449006,"discussion_content":"è°¢è°¢ä½ çš„ç­”æ¡ˆï¼Œæˆ‘ä¹Ÿååˆ†èµåŒï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557191052,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91714,"user_name":"å¤§æ¼ èƒ¡æ¨","can_delete":false,"product_type":"c1","uid":1070357,"ip_address":"","ucode":"A655BF98DE8158","user_header":"https://static001.geekbang.org/account/avatar/00/10/55/15/3c75f9f6.jpg","comment_is_top":false,"comment_ctime":1557099433,"is_pvip":true,"replies":[{"id":"32926","content":"è°¢è°¢ä½ çš„ç­”æ¡ˆï¼Œæˆ‘ä¹Ÿååˆ†èµåŒï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557194439,"ip_address":"","comment_id":91714,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557099433","product_id":100025301,"comment_content":"é€‰æ‹©AP","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449001,"discussion_content":"è°¢è°¢ä½ çš„ç­”æ¡ˆï¼Œæˆ‘ä¹Ÿååˆ†èµåŒï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557194439,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91695,"user_name":"icejoywoo","can_delete":false,"product_type":"c1","uid":1019222,"ip_address":"","ucode":"E68C8B54D07EC3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/56/2a04dd88.jpg","comment_is_top":false,"comment_ctime":1557075039,"is_pvip":false,"replies":[{"id":"32927","content":"è°¢è°¢ä½ çš„ç­”æ¡ˆï¼Œæˆ‘ä¹Ÿååˆ†èµåŒï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_88e0d7","uid":"1503187","ctime":1557194454,"ip_address":"","comment_id":91695,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557075039","product_id":100025301,"comment_content":"APï¼Œå‘å¾®åšä»¥åfollowerä¸éœ€è¦ç¬¬ä¸€æ—¶é—´çœ‹åˆ°","like_count":0,"discussions":[{"author":{"id":1503187,"avatar":"","nickname":"Geek_88e0d7","note":"","ucode":"3E2596F3EB9165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448995,"discussion_content":"è°¢è°¢ä½ çš„ç­”æ¡ˆï¼Œæˆ‘ä¹Ÿååˆ†èµåŒï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557194454,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]}]}