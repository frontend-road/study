{"id":484604,"title":"åŠ é¤ï½œä½œä¸ºGo Moduleçš„ä½œè€…ï¼Œä½ åº”è¯¥çŸ¥é“çš„å‡ ä»¶äº‹","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯Tony Baiã€‚</p><p>æˆ‘ä»¬çš„ä¸“æ åœ¨06å’Œ07è®²å¯¹Go Moduleæ„å»ºæ¨¡å¼çš„åŸç†ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨Go Moduleæ„å»ºæ¨¡å¼åšäº†è¯¦ç»†çš„è®²è§£ï¼Œåœ¨è¯¾åç•™è¨€ä¸­ï¼Œæˆ‘çœ‹åˆ°å¾ˆå¤šåŒå­¦ç›´å‘¼è¿‡ç˜¾ï¼Œè¡¨ç¤ºç»ˆäºææ¸…æ¥šGo Moduleæ„å»ºæ¨¡å¼äº†ã€‚</p><p>ä¸è¿‡ï¼Œä¹‹å‰çš„è®²è§£æ›´å¤šæ˜¯ä»Go Moduleçš„ä½¿ç”¨è€…è§’åº¦å‡ºå‘çš„ã€‚åœ¨è¿™ç¯‡åŠ é¤ä¸­ï¼Œæˆ‘ä»¬å†ä»Go Moduleçš„ä½œè€…æˆ–ç»´æŠ¤è€…çš„è§†è§’ï¼Œæ¥èŠèŠåœ¨è§„åˆ’ã€å‘å¸ƒå’Œç»´æŠ¤Go Moduleæ—¶éœ€è¦è€ƒè™‘å’Œæ³¨æ„ä»€ä¹ˆäº‹æƒ…ï¼ŒåŒ…æ‹¬goé¡¹ç›®ä»“åº“å¸ƒå±€ã€Go Moduleçš„å‘å¸ƒã€å‡çº§moduleä¸»ç‰ˆæœ¬å·ã€ä½œåºŸç‰¹å®šç‰ˆæœ¬çš„moduleï¼Œç­‰ç­‰ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä½œä¸ºGo Moduleä½œè€…åœ¨è§„åˆ’moduleæ—¶é‡åˆ°çš„ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šä¸€ä¸ªä»£ç ä»“åº“ï¼ˆrepoï¼‰ç®¡ç†ä¸€ä¸ªmoduleï¼Œè¿˜æ˜¯ä¸€ä¸ªä»“åº“ç®¡ç†å¤šä¸ªmoduleï¼Ÿ</p><h2>ä»“åº“å¸ƒå±€ï¼šæ˜¯å•moduleè¿˜æ˜¯å¤šmodule</h2><p>å¦‚æœæ²¡æœ‰å•ä¸€ä»“åº“ï¼ˆmonorepoï¼‰çš„å¼ºçº¦æŸï¼Œé‚£ä¹ˆåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œä½ é€‰æ‹©ä¸€ä¸ªä»“åº“ç®¡ç†ä¸€ä¸ªmoduleæ˜¯ä¸ä¼šé”™çš„ï¼Œè¿™æ˜¯ç®¡ç†Go Moduleçš„æœ€ç®€å•çš„æ–¹å¼ï¼Œä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„æ ‡å‡†æ–¹å¼ã€‚è¿™ç§æ–¹å¼ä¸‹ï¼Œmoduleç»´æŠ¤è€…ç»´æŠ¤èµ·æ¥ä¼šå¾ˆæ–¹ä¾¿ï¼Œmoduleçš„ä½¿ç”¨è€…åœ¨å¼•ç”¨moduleä¸‹é¢çš„åŒ…æ—¶ï¼Œä¹Ÿå¯ä»¥å¾ˆå®¹æ˜“åœ°ç¡®å®šåŒ…çš„å¯¼å…¥è·¯å¾„ã€‚</p><!-- [[[read_end]]] --><p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œæˆ‘ä»¬åœ¨github.com/bigwhite/srsmè¿™ä¸ªä»“åº“ä¸‹ç®¡ç†ç€ä¸€ä¸ªGo Moduleï¼ˆsrsmæ˜¯single repo single moduleçš„ç¼©å†™ï¼‰ã€‚</p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œmodule pathä¸ä»“åº“åœ°å€ä¿æŒä¸€è‡´ï¼Œéƒ½æ˜¯github.com/bigwhite/srsmï¼Œè¿™ç‚¹ä¼šä½“ç°åœ¨go.modä¸­ï¼š</p><pre><code class=\"language-plain\">// go.mod\nmodule github.com/bigwhite/srsm\n\ngo 1.17\n</code></pre><p>ç„¶åæˆ‘ä»¬å¯¹ä»“åº“æ‰“tagï¼Œè¿™ä¸ªtagä¹Ÿä¼šæˆä¸ºGo Moduleçš„ç‰ˆæœ¬å·ï¼Œè¿™æ ·ï¼Œå¯¹ä»“åº“çš„ç‰ˆæœ¬ç®¡ç†å…¶å®å°±æ˜¯å¯¹Go Moduleçš„ç‰ˆæœ¬ç®¡ç†ã€‚</p><p>å¦‚æœè¿™ä¸ªä»“åº“ä¸‹çš„å¸ƒå±€æ˜¯è¿™æ ·çš„ï¼š</p><pre><code class=\"language-plain\">./srsm\nâ”œâ”€â”€ go.mod\nâ”œâ”€â”€ go.sum\nâ”œâ”€â”€ pkg1/\nâ”‚&nbsp;&nbsp; â””â”€â”€ pkg1.go\nâ””â”€â”€ pkg2/\n    â””â”€â”€ pkg2.go\n</code></pre><p>é‚£ä¹ˆè¿™ä¸ªmoduleçš„ä½¿ç”¨è€…å¯ä»¥å¾ˆè½»æ¾åœ°ç¡®å®špkg1å’Œpkg2ä¸¤ä¸ªåŒ…çš„å¯¼å…¥è·¯å¾„ï¼Œä¸€ä¸ªæ˜¯github.com/bigwhite/srsm/pkg1ï¼Œå¦ä¸€ä¸ªåˆ™æ˜¯github.com/bigwhite/srsm/pkg2ã€‚</p><p>å¦‚æœmoduleæ¼”è¿›åˆ°äº†v2.x.xç‰ˆæœ¬ï¼Œé‚£ä¹ˆä»¥pkg1åŒ…ä¸ºä¾‹ï¼Œå®ƒçš„åŒ…çš„å¯¼å…¥è·¯å¾„å°±å˜æˆäº†github.com/bigwhite/srsm/v2/pkg1ã€‚</p><p>å¦‚æœç»„ç»‡å±‚é¢è¦æ±‚é‡‡ç”¨å•ä¸€ä»“åº“ï¼ˆmonorepoï¼‰æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰Go Moduleéƒ½å¿…é¡»æ”¾åœ¨ä¸€ä¸ªrepoä¸‹ï¼Œé‚£æˆ‘ä»¬åªèƒ½ä½¿ç”¨å•repoä¸‹ç®¡ç†å¤šä¸ªGo Moduleçš„æ–¹æ³•äº†ã€‚</p><p>è®°å¾—Go Moduleçš„è®¾è®¡è€…Russ Coxæ›¾è¯´è¿‡ï¼šâ€œåœ¨å•repoå¤šmoduleçš„å¸ƒå±€ä¸‹ï¼Œæ·»åŠ moduleã€åˆ é™¤moduleï¼Œä»¥åŠå¯¹moduleè¿›è¡Œç‰ˆæœ¬ç®¡ç†ï¼Œéƒ½éœ€è¦ç›¸å½“è°¨æ…å’Œæ·±æ€ç†Ÿè™‘ï¼Œå› æ­¤ï¼Œç®¡ç†ä¸€ä¸ªå•moduleçš„ç‰ˆæœ¬åº“ï¼Œå‡ ä¹æ€»æ˜¯æ¯”ç®¡ç†ç°æœ‰ç‰ˆæœ¬åº“ä¸­çš„å¤šä¸ªmoduleè¦å®¹æ˜“å’Œç®€å•â€ã€‚</p><p>æˆ‘ä»¬ä¹Ÿç”¨ä¸€ä¸ªä¾‹å­æ¥æ„Ÿå—ä¸€ä¸‹è¿™å¥è¯çš„æ·±æ„ã€‚</p><p>è¿™é‡Œæ˜¯ä¸€ä¸ªå•repoå¤šmoduleçš„ä¾‹å­ï¼Œæˆ‘ä»¬å‡è®¾repoåœ°å€æ˜¯github.com/bigwhite/srmmã€‚è¿™ä¸ªrepoä¸‹çš„ç»“æ„å¸ƒå±€å¦‚ä¸‹ï¼ˆsrmmæ˜¯single repo multiple modulesçš„ç¼©å†™ï¼‰ï¼š</p><pre><code class=\"language-plain\">./srmm\nâ”œâ”€â”€ module1\nâ”‚&nbsp;&nbsp; â”œâ”€â”€ go.mod\nâ”‚&nbsp;&nbsp; â””â”€â”€ pkg1\nâ”‚&nbsp;&nbsp;     â””â”€â”€ pkg1.go\nâ””â”€â”€ module2\n    â”œâ”€â”€ go.mod\n    â””â”€â”€ pkg2\n        â””â”€â”€ pkg2.go\n</code></pre><p>srmmä»“åº“ä¸‹é¢æœ‰ä¸¤ä¸ªGo Moduleï¼Œåˆ†ä¸ºä½äºå­ç›®å½•module1å’Œmodule2çš„ä¸‹é¢ï¼Œè¿™ä¸¤ä¸ªç›®å½•ä¹Ÿæ˜¯å„è‡ªmoduleçš„æ ¹ç›®å½•ï¼ˆmodule rootï¼‰ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œmoduleçš„pathä¹Ÿä¸èƒ½éšæ„æŒ‡å®šï¼Œå¿…é¡»åŒ…å«å­ç›®å½•çš„åå­—ã€‚</p><p>æˆ‘ä»¬ä»¥module1ä¸ºä¾‹åˆ†æä¸€ä¸‹ï¼Œå®ƒçš„pathæ˜¯github.com/bigwhite/srmm/module1ï¼Œåªæœ‰è¿™æ ·ï¼ŒGoå‘½ä»¤æ‰èƒ½æ ¹æ®ç”¨æˆ·å¯¼å…¥åŒ…çš„è·¯å¾„ï¼Œæ‰¾åˆ°å¯¹åº”çš„ä»“åº“åœ°å€å’Œåœ¨ä»“åº“ä¸­çš„ç›¸å¯¹ä½ç½®ã€‚åŒç†ï¼Œmodule1ä¸‹çš„åŒ…ååŒæ ·æ˜¯ä»¥module pathä¸ºå‰ç¼€çš„ï¼Œæ¯”å¦‚ï¼šgithub.com/bigwhite/srmm/module1/pkg1ã€‚</p><p>åœ¨å•ä»“åº“å¤šmoduleæ¨¡å¼ä¸‹ï¼Œå„ä¸ªmoduleçš„ç‰ˆæœ¬æ˜¯ç‹¬ç«‹ç»´æŠ¤çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨é€šè¿‡æ‰“tagæ–¹å¼å‘å¸ƒæŸä¸ªmoduleç‰ˆæœ¬æ—¶ï¼Œtagçš„åå­—å¿…é¡»åŒ…å«å­ç›®å½•åã€‚æ¯”å¦‚ï¼šå¦‚æœæˆ‘ä»¬è¦å‘å¸ƒmodule1çš„v1.0.0ç‰ˆæœ¬ï¼Œæˆ‘ä»¬ä¸èƒ½é€šè¿‡ç»™ä»“åº“æ‰“v1.0.0è¿™ä¸ªtagå·æ¥å‘å¸ƒmodule1çš„v1.0.0ç‰ˆæœ¬ï¼Œ<strong>æ­£ç¡®çš„ä½œæ³•åº”è¯¥æ˜¯æ‰“module1/v1.0.0è¿™ä¸ªtagå·</strong>ã€‚</p><p>ä½ ç°åœ¨å¯èƒ½è§‰å¾—è¿™æ ·ç†è§£èµ·æ¥ä¹Ÿæ²¡æœ‰å¤šå¤æ‚ï¼Œä½†å½“å„ä¸ªmoduleçš„ä¸»ç‰ˆæœ¬å·å‡çº§æ—¶ï¼Œä½ å°±ä¼šæ„Ÿå—åˆ°è¿™ç§æ–¹å¼å¸¦æ¥çš„ç¹çäº†ï¼Œè¿™ä¸ªæˆ‘ä»¬ç¨åå†ç»†è¯´ã€‚</p><h2>å‘å¸ƒGo Module</h2><p>å½“æˆ‘ä»¬çš„moduleå®Œæˆå¼€å‘ä¸æµ‹è¯•ï¼Œmoduleä¾¿å¯ä»¥å‘å¸ƒäº†ã€‚å‘å¸ƒçš„æ­¥éª¤ä¹Ÿååˆ†ç®€å•ï¼Œå°±æ˜¯ä¸ºrepoæ‰“ä¸Štagå¹¶æ¨é€åˆ°ä»£ç æœåŠ¡å™¨ä¸Šå°±å¥½äº†ã€‚</p><p>å¦‚æœé‡‡ç”¨å•repoå•moduleç®¡ç†æ–¹å¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç»™repoæ‰“çš„tagå°±æ˜¯moduleçš„ç‰ˆæœ¬ã€‚å¦‚æœé‡‡ç”¨çš„æ˜¯å•repoå¤šmoduleçš„ç®¡ç†æ–¹å¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦æ³¨æ„åœ¨tagä¸­åŠ ä¸Šå„ä¸ªmoduleçš„å­ç›®å½•åï¼Œè¿™æ ·æ‰èƒ½èµ·åˆ°å‘å¸ƒæŸä¸ªmoduleç‰ˆæœ¬çš„ä½œç”¨ï¼Œå¦åˆ™moduleçš„ç”¨æˆ·é€šè¿‡go get xxx@latestä¹Ÿæ— æ³•çœ‹åˆ°æ–°å‘å¸ƒçš„moduleç‰ˆæœ¬ã€‚</p><p>è€Œä¸”ï¼Œè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªéœ€è¦ä½ ç‰¹åˆ«æ³¨æ„çš„åœ°æ–¹ï¼Œå¦‚æœä½ åœ¨å‘å¸ƒæ­£å¼ç‰ˆä¹‹å‰å…ˆå‘å¸ƒäº†alphaæˆ–betaç‰ˆç»™å¤§å®¶å…¬æµ‹ä½¿ç”¨ï¼Œé‚£ä¹ˆä½ ä¸€å®šè¦æé†’ä½ çš„moduleçš„ä½¿ç”¨è€…ï¼Œè®©ä»–ä»¬é€šè¿‡go getæŒ‡å®šå…¬æµ‹ç‰ˆæœ¬å·æ¥æ˜¾å¼å‡çº§ä¾èµ–ï¼Œæ¯”å¦‚ï¼š</p><pre><code class=\"language-plain\">$go get github.com/bigwhite/srsm@v1.1.0-beta.1\n</code></pre><p>è¿™æ ·ï¼Œgo getå·¥å…·æ‰ä¼šå°†ä½¿ç”¨è€…é¡¹ç›®ä¾èµ–çš„github.com/bigwhite/srsmçš„ç‰ˆæœ¬æ›´æ–°ä¸ºv1.1.0-beta.1ã€‚è€Œæˆ‘ä»¬é€šè¿‡ <code>go get github.com/bigwhite/srsm@latest</code>ï¼Œæ˜¯ä¸ä¼šè·å–åˆ°åƒä¸Šé¢v1.1.0-beta.1è¿™æ ·çš„å‘å¸ƒå‰çš„å…¬æµ‹ç‰ˆæœ¬çš„ã€‚</p><p>å¤šæ•°æƒ…å†µä¸‹ï¼ŒGo Moduleçš„ç»´æŠ¤è€…å¯ä»¥æ­£ç¡®åœ°å‘å¸ƒGo Moduleã€‚ä½†äººæ€»æ˜¯ä¼šçŠ¯é”™çš„ï¼Œä½œä¸ºGo Moduleçš„ä½œè€…æˆ–ç»´æŠ¤è€…ï¼Œæˆ‘ä»¬å¶å°”ä¹Ÿä¼šå‡ºç°è¿™æ ·çš„ä½çº§é”™è¯¯ï¼š<strong>å°†ä¸€ä¸ªå¤„äºbrokençŠ¶æ€çš„moduleå‘å¸ƒäº†å‡ºå»</strong>ã€‚é‚£ä¸€æ—¦å‡ºç°è¿™æ ·çš„æƒ…å†µï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿæˆ‘ä»¬ç»§ç»­å‘ä¸‹çœ‹ã€‚</p><h2>ä½œåºŸç‰¹å®šç‰ˆæœ¬çš„Go Module</h2><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å¦‚æœå‘å¸ƒäº†é”™è¯¯çš„moduleç‰ˆæœ¬ä¼šå¯¹moduleçš„ä½¿ç”¨è€…å¸¦å»ä»€ä¹ˆå½±å“ã€‚</p><p>æˆ‘ä»¬ç›´æ¥æ¥çœ‹ä¸€ä¸ªä¾‹å­ã€‚å‡è®¾bitbucket.org/bigwhite/m1æ˜¯æˆ‘ç»´æŠ¤çš„ä¸€ä¸ªGo Moduleï¼Œå®ƒç›®å‰å·²ç»æ¼”è¿›åˆ°v1.0.1ç‰ˆæœ¬äº†ï¼Œå¹¶ä¸”æœ‰ä¸¤ä¸ªä½¿ç”¨è€…c1å’Œc2ï¼Œä½ å¯ä»¥çœ‹ä¸‹è¿™ä¸ªç¤ºæ„å›¾ï¼Œèƒ½æ›´ç›´è§‚åœ°äº†è§£m1å½“å‰çš„çŠ¶æ€ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/23/0a/23931514c6ea70debaeb9e5709cec20a.jpg?wh=1920x861\" alt=\"å›¾ç‰‡\"></p><p>æŸä¸€å¤©ï¼Œæˆ‘ä¸€ä¸å°å¿ƒï¼Œå°±æŠŠä¸€ä¸ªå¤„äºbrokençŠ¶æ€çš„moduleç‰ˆæœ¬ï¼Œm1@v1.0.2å‘å¸ƒå‡ºå»äº†ï¼æ­¤æ—¶æ­¤åˆ»ï¼Œm1çš„v1.0.2ç‰ˆæœ¬è¿˜åªå­˜åœ¨äºå®ƒçš„æºä»“åº“ç«™ç‚¹ä¸Šï¼Œä¹Ÿå°±æ˜¯bitbucket/bigwhite/m1ä¸­ï¼Œåœ¨ä»»ä½•ä¸€ä¸ªGoProxyæœåŠ¡å™¨ä¸Šéƒ½è¿˜æ²¡æœ‰è¿™ä¸ªç‰ˆæœ¬çš„ç¼“å­˜ã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼Œä¾èµ–m1çš„ä¸¤ä¸ªé¡¹ç›®c1å’Œc2ä¾èµ–çš„ä»ç„¶æ˜¯m1@v1.0.1ç‰ˆæœ¬ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ²¡æœ‰æ˜¾å¼å‡çº§m1çš„ç‰ˆæœ¬ï¼Œc1å’Œc2çš„æ„å»ºå°±ä¸ä¼šå—åˆ°å¤„äºbrokençŠ¶æ€çš„module v1.0.2ç‰ˆæœ¬çš„å½±å“ï¼Œè¿™ä¹Ÿæ˜¯Go Moduleæœ€å°ç‰ˆæœ¬é€‰æ‹©çš„ä¼˜ç‚¹ã€‚</p><p>è€Œä¸”ï¼Œç”±äºm1@v1.0.2è¿˜æ²¡æœ‰è¢«GoProxyæœåŠ¡å™¨ç¼“å­˜ï¼Œåœ¨GOPROXYç¯å¢ƒå˜é‡å¼€å¯çš„æƒ…å†µä¸‹ï¼Œgo listæ˜¯æŸ¥ä¸åˆ°m1æœ‰å¯å‡çº§çš„ç‰ˆæœ¬çš„ï¼š</p><pre><code class=\"language-plain\">// ä»¥c2ä¸ºä¾‹ï¼š\n$go list -m -u all\ngithub.com/bigwhite/c2\nbitbucket.org/bigwhite/m1 v1.0.1\n</code></pre><p>ä½†å¦‚è‹¥æˆ‘ä»¬ç»•å¼€GOPROXYï¼Œé‚£ä¹ˆgo listå°±å¯ä»¥æŸ¥æ‰¾åˆ°m1çš„æœ€æ–°ç‰ˆæœ¬ä¸ºv1.0.2ï¼ˆæˆ‘ä»¬é€šè¿‡è®¾ç½®GONOPROXYæ¥è®©go listæŸ¥è¯¢m1çš„æºä»“åº“è€Œä¸æ˜¯ä»£ç†æœåŠ¡å™¨ä¸Šçš„ç¼“å­˜ï¼‰ï¼š</p><pre><code class=\"language-plain\">$GONOPROXY=\"bitbucket.org/bigwhite/m1\" go list -m -u all\ngithub.com/bigwhite/c2\nbitbucket.org/bigwhite/m1 v1.0.1 [v1.0.2]\n</code></pre><p>ä¹‹åï¼Œå¦‚æœæŸä¸ªm1çš„æ¶ˆè´¹è€…ï¼Œæ¯”å¦‚c2ï¼Œé€šè¿‡go get bitbucket.org/bigwhite/m1@v1.0.2å¯¹m1çš„ä¾èµ–ç‰ˆæœ¬è¿›è¡Œäº†æ˜¾å¼æ›´æ–°ï¼Œé‚£å°±ä¼šè§¦å‘GOPROXYå¯¹m1@v1.0.2ç‰ˆæœ¬çš„ç¼“å­˜ã€‚è¿™æ ·ä¸€é€šæ“ä½œåï¼Œmodule proxyä»¥åŠm1çš„æ¶ˆè´¹è€…çš„å½“å‰çš„çŠ¶æ€å°±ä¼šå˜æˆè¿™æ ·ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/85/31/85fyy48dd62570758dd21666a4646631.jpg?wh=1920x972\" alt=\"å›¾ç‰‡\"></p><p>ç”±äºGoproxyæœåŠ¡å·²ç»ç¼“å­˜äº†m1çš„v1.0.2ç‰ˆæœ¬ï¼Œè¿™ä¹‹åï¼Œm1çš„å…¶ä»–æ¶ˆè´¹è€…ï¼Œæ¯”å¦‚c1å°±èƒ½å¤Ÿåœ¨GOPROXYå¼€å¯çš„æƒ…å†µä¸‹æŸ¥è¯¢åˆ°m1å­˜åœ¨æ–°ç‰ˆæœ¬v1.0.2ï¼Œå³ä¾¿å®ƒæ˜¯brokençš„ï¼š</p><pre><code class=\"language-plain\">// ä»¥c1ä¸ºä¾‹ï¼š\n$go list -m -u all\ngithub.com/bigwhite/c1\nbitbucket.org/bigwhite/m1 v1.0.1 [v1.0.2]\n</code></pre><p>ä½†æ˜¯ï¼Œä¸€æ—¦brokençš„m1ç‰ˆæœ¬ï¼ˆv1.0.2ï¼‰è¿›å…¥åˆ°GoProxyçš„ç¼“å­˜ï¼Œé‚£ä¹ˆå®ƒçš„â€œå±å®³æ€§â€å°±ä¼šâ€œå¤§è‚†ä¼ æ’­â€å¼€ã€‚è¿™æ—¶module m1çš„æ–°æ¶ˆè´¹è€…éƒ½å°†å—åˆ°å½±å“ï¼</p><p>æ¯”å¦‚è¿™é‡Œæˆ‘ä»¬å¼•å…¥ä¸€ä¸ªæ–°çš„æ¶ˆè´¹è€…c3ï¼Œc3çš„é¦–æ¬¡æ„å»ºå°±ä¼šå› m1çš„æŸåè€ŒæŠ¥é”™ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/73/00/737eb3121d9fa70387742de128eba500.jpg?wh=1920x1252\" alt=\"å›¾ç‰‡\"></p><p>åˆ°è¿™é‡Œï¼Œç³Ÿç³•çš„æƒ…å†µå·²ç»å‡ºç°äº†ï¼é‚£æˆ‘ä»¬æ€ä¹ˆä½œåºŸæ‰m1@v1.0.2ç‰ˆæœ¬æ¥ä¿®å¤è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p><p>å¦‚æœåœ¨GOPATHæ—¶ä»£ï¼ŒåºŸæ‰ä¸€ä¸ªä¹‹å‰å‘çš„åŒ…ç‰ˆæœ¬æ˜¯åˆ†åˆ†é’Ÿçš„äº‹æƒ…ï¼Œå› ä¸ºé‚£æ—¶åŒ…æ¶ˆè´¹è€…ä¾èµ–çš„éƒ½æ˜¯latest commitã€‚åŒ…ä½œè€…åªè¦fixæ‰é—®é¢˜ã€æäº¤å¹¶é‡æ–°å‘å¸ƒå°±å¯ä»¥äº†ã€‚</p><p>ä½†æ˜¯åœ¨Go Moduleæ—¶ä»£ï¼Œä½œåºŸæ‰ä¸€ä¸ªå·²ç»å‘å¸ƒäº†çš„Go Moduleç‰ˆæœ¬è¿˜çœŸä¸æ˜¯ä¸€ä»¶èƒ½è½»æ˜“åšå¥½çš„äº‹æƒ…ã€‚è¿™å¾ˆå¤§ç¨‹åº¦æ˜¯æºäºå¤§é‡Go Moduleä»£ç†æœåŠ¡å™¨çš„å­˜åœ¨ï¼ŒGo Moduleä»£ç†æœåŠ¡å™¨ä¼šå°†å·²å‘å¸ƒçš„brokençš„moduleç¼“å­˜èµ·æ¥ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹å¯èƒ½çš„é—®é¢˜è§£å†³æ–¹æ³•ã€‚</p><h3>ä¿®å¤brokenç‰ˆæœ¬å¹¶é‡æ–°å‘å¸ƒ</h3><p>è¦è§£å†³æ‰è¿™ä¸ªé—®é¢˜ï¼ŒGo Moduleä½œè€…æœ‰ä¸€ä¸ªå¾ˆç›´æ¥çš„è§£å†³æ–¹æ³•ï¼Œå°±æ˜¯ï¼š<strong>ä¿®å¤brokençš„moduleç‰ˆæœ¬å¹¶é‡æ–°å‘å¸ƒ</strong>ã€‚å®ƒçš„æ“ä½œæ­¥éª¤ä¹Ÿå¾ˆç®€å•ï¼šm1çš„ä½œè€…åªéœ€è¦åˆ é™¤æ‰è¿œç¨‹çš„tag: v1.0.2ï¼Œåœ¨æœ¬åœ°fixæ‰é—®é¢˜ï¼Œç„¶åé‡æ–°tag v1.0.2å¹¶pushå‘å¸ƒåˆ°bitbucketä¸Šçš„ä»“åº“ä¸­å°±å¯ä»¥äº†ã€‚</p><p>ä½†è¿™æ ·åšçœŸçš„èƒ½ç”Ÿæ•ˆä¹ˆï¼Ÿ</p><p>ç†è®ºä¸Šï¼Œå¦‚æœm1çš„æ‰€æœ‰æ¶ˆè´¹è€…ï¼Œéƒ½é€šè¿‡m1æ‰€åœ¨ä»£ç æ‰˜ç®¡æœåŠ¡å™¨ï¼ˆbitbucketï¼‰æ¥è·å–m1çš„ç‰¹å®šç‰ˆæœ¬ï¼Œé‚£ä¹ˆè¿™ç§æ–¹æ³•è¿˜çœŸèƒ½è§£å†³æ‰è¿™ä¸ªé—®é¢˜ã€‚å¯¹äºå·²ç»getåˆ°broken v1.0.2çš„æ¶ˆè´¹è€…æ¥è¯´ï¼Œä»–ä»¬åªéœ€æ¸…é™¤æ‰æœ¬åœ°çš„module cacheï¼ˆgo clean -modcacheï¼‰ï¼Œç„¶åå†é‡æ–°æ„å»ºå°±å¯ä»¥äº†ï¼›å¯¹äºm1çš„æ–°æ¶ˆè´¹è€…ï¼Œä»–ä»¬ç›´æ¥å¾—åˆ°çš„å°±æ˜¯é‡æ–°å‘å¸ƒåçš„v1.0.2ç‰ˆæœ¬ã€‚</p><p>ä½†ç°å®çš„æƒ…å†µæ—¶ï¼Œç°åœ¨å¤§å®¶éƒ½æ˜¯é€šè¿‡GoproxyæœåŠ¡æ¥è·å–moduleçš„ã€‚</p><p>æ‰€ä»¥ï¼Œä¸€æ—¦ä¸€ä¸ªmoduleç‰ˆæœ¬è¢«å‘å¸ƒï¼Œå½“æŸä¸ªæ¶ˆè´¹è€…é€šè¿‡ä»–é…ç½®çš„goproxyè·å–è¿™ä¸ªç‰ˆæœ¬æ—¶ï¼Œè¿™ä¸ªç‰ˆæœ¬å°±ä¼šåœ¨è¢«ç¼“å­˜åœ¨å¯¹åº”çš„ä»£ç†æœåŠ¡å™¨ä¸Šã€‚åç»­m1çš„æ¶ˆè´¹è€…é€šè¿‡è¿™ä¸ªgoproxyæœåŠ¡å™¨è·å–é‚£ä¸ªç‰ˆæœ¬çš„m1æ—¶ï¼Œè¯·æ±‚ä¸ä¼šå†å›åˆ°m1æ‰€åœ¨çš„æºä»£ç æ‰˜ç®¡æœåŠ¡å™¨ã€‚</p><p>è¿™æ ·ï¼Œå³ä¾¿m1çš„æºæœåŠ¡å™¨ä¸Šçš„v1.0.2ç‰ˆæœ¬å¾—åˆ°äº†é‡æ–°å‘å¸ƒï¼Œæ•£å¸ƒåœ¨å„ä¸ªgoproxyæœåŠ¡å™¨ä¸Šçš„broken v1.0.2ä¹Ÿä¾æ—§å­˜åœ¨ï¼Œå¹¶ä¸”è¢«â€œä¼ æ’­â€åˆ°å„ä¸ªm1æ¶ˆè´¹è€…çš„å¼€å‘ç¯å¢ƒä¸­ï¼Œè€Œé‡æ–°å‘å¸ƒåçš„v1.0.2ç‰ˆæœ¬å´å¾—ä¸åˆ°â€œä¼ æ’­â€çš„æœºä¼šï¼Œæˆ‘ä»¬è¿˜æ˜¯ç”¨ä¸€å¼ å›¾æ¥ç›´è§‚å±•ç¤ºä¸‹è¿™ç§â€œçª˜å¢ƒâ€ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/c0/2b/c07fba8655615046c49110fb91bb662b.jpg?wh=1920x1252\" alt=\"å›¾ç‰‡\"></p><p>å› æ­¤ï¼Œä»æ¶ˆè´¹è€…çš„è§’åº¦çœ‹ï¼Œm1çš„v1.0.2ç‰ˆæœ¬ä¾æ—§æ˜¯é‚£ä¸ªbrokençš„ç‰ˆæœ¬ï¼Œè¿™ç§è§£å†³æªæ–½æ— æ•ˆï¼</p><p>é‚£ä½ å¯èƒ½ä¼šé—®ï¼Œå¦‚æœm1çš„ä½œè€…åˆ é™¤äº†bitbucketä¸Šçš„v1.0.2è¿™ä¸ªå‘å¸ƒç‰ˆæœ¬ï¼Œå„å¤§goproxyæœåŠ¡å™¨ä¸Šçš„broken v1.0.2ç‰ˆæœ¬æ˜¯å¦ä¹Ÿä¼šè¢«åŒæ­¥åˆ é™¤å‘¢ï¼Ÿ</p><p>é—æ†¾åœ°å‘Šè¯‰ä½ ï¼šä¸ä¼šã€‚</p><p>GoproxyæœåŠ¡å™¨å½“åˆçš„ä¸€ä¸ªè®¾è®¡ç›®æ ‡ï¼Œå°±æ˜¯å°½å¯èƒ½åœ°ç¼“å­˜æ›´å¤šmoduleã€‚æ‰€ä»¥ï¼Œå³ä¾¿æŸä¸ªmoduleçš„æºç ä»“åº“éƒ½è¢«åˆ é™¤äº†ï¼Œè¿™ä¸ªmoduleçš„å„ä¸ªç‰ˆæœ¬ä¾æ—§ä¼šç¼“å­˜åœ¨goproxyæœåŠ¡å™¨ä¸Šï¼Œè¿™ä¸ªmoduleçš„æ¶ˆè´¹è€…ä¾ç„¶å¯ä»¥æ­£å¸¸è·å–è¿™ä¸ªmoduleï¼Œå¹¶é¡ºåˆ©æ„å»ºã€‚</p><p>å› æ­¤ï¼ŒgoproxyæœåŠ¡å™¨å½“å‰çš„å®ç°éƒ½æ²¡æœ‰ä¸»åŠ¨åˆ æ‰æŸä¸ªmoduleç¼“å­˜çš„ç‰¹æ€§ã€‚å½“ç„¶äº†ï¼Œè¿™å¯èƒ½ä¹Ÿä¸æ˜¯ç»å¯¹çš„ï¼Œæ¯•ç«Ÿä¸åŒgoproxyæœåŠ¡çš„å®ç°æœ‰æ‰€ä¸åŒã€‚</p><p>é‚£è¿™ç§é—®é¢˜è¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿè¿™ç§æƒ…å†µä¸‹ï¼ŒGoç¤¾åŒºæ›´ä¸ºå¸¸è§çš„è§£å†³æ–¹å¼å°±æ˜¯<strong>å‘å¸ƒmoduleçš„æ–°patchç‰ˆæœ¬</strong></p><h3>å‘å¸ƒmoduleçš„æ–°patchç‰ˆæœ¬</h3><p>æˆ‘ä»¬ä¾ç„¶ä»¥ä¸Šé¢çš„m1ä¸ºä¾‹ï¼Œç°åœ¨æˆ‘ä»¬åºŸé™¤æ‰v1.0.2ï¼Œåœ¨æœ¬åœ°ä¿®æ­£é—®é¢˜åï¼Œç›´æ¥æ‰“v1.0.3æ ‡ç­¾ï¼Œå¹¶å‘å¸ƒpushåˆ°è¿œç¨‹ä»£ç æœåŠ¡å™¨ä¸Šã€‚è¿™æ ·m1çš„æ¶ˆè´¹è€…ä»¥åŠmodule proxyçš„æ•´ä½“çŠ¶æ€å°±å˜æˆè¿™ä¸ªæ ·å­äº†ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/b7/35/b74c8b9182f3f195c11ff2e20964ed35.jpg?wh=1920x1045\" alt=\"å›¾ç‰‡\"></p><p>åœ¨è¿™æ ·çš„çŠ¶æ€ä¸‹ï¼Œæˆ‘ä»¬åˆ†åˆ«çœ‹çœ‹m1çš„æ¶ˆè´¹è€…çš„æƒ…å†µï¼š</p><ul>\n<li>å¯¹äºä¾èµ–m1@v1.0.1ç‰ˆæœ¬çš„c1ï¼Œåœ¨æœªæ‰‹å·¥æ›´æ–°ä¾èµ–ç‰ˆæœ¬çš„æƒ…å†µä¸‹ï¼Œå®ƒä»ç„¶å¯ä»¥ä¿æŒæˆåŠŸçš„æ„å»ºï¼›</li>\n<li>å¯¹äºm1çš„æ–°æ¶ˆè´¹è€…ï¼Œæ¯”å¦‚c4ï¼Œå®ƒé¦–æ¬¡æ„å»ºæ—¶ä½¿ç”¨çš„å°±æ˜¯m1çš„æœ€æ–°patchç‰ˆv1.0.3ï¼Œè·¨è¿‡äº†ä½œåºŸçš„v1.0.2ï¼Œå¹¶æˆåŠŸå®Œæˆæ„å»ºï¼›</li>\n<li>å¯¹äºä¹‹å‰æ›¾ä¾èµ–v1.0.2ç‰ˆæœ¬çš„æ¶ˆè´¹è€…c2æ¥è¯´ï¼Œè¿™ä¸ªæ—¶å€™ä»–ä»¬éœ€è¦æ‰‹å·¥ä»‹å…¥æ‰èƒ½è§£å†³é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯éœ€è¦åœ¨c2ç¯å¢ƒä¸­æ‰‹å·¥å‡çº§ä¾èµ–ç‰ˆæœ¬åˆ°v1.0.3ï¼Œè¿™æ ·c2ä¹Ÿä¼šå¾—åˆ°æˆåŠŸæ„å»ºã€‚</li>\n</ul><p>é‚£è¿™æ ·ï¼Œæˆ‘ä»¬é”™è¯¯ç‰ˆæœ¬çš„é—®é¢˜å°±å¾—åˆ°äº†ç¼“è§£ã€‚</p><p>ä»Go 1.16ç‰ˆæœ¬å¼€å§‹ï¼ŒGo Moduleä½œè€…è¿˜å¯ä»¥åœ¨go.modä¸­ä½¿ç”¨æ–°å¢åŠ çš„ <a href=\"https://go.dev/ref/mod#go-mod-file-retract\">retractæŒ‡ç¤ºç¬¦</a>ï¼Œæ ‡è¯†å‡ºå“ªäº›ç‰ˆæœ¬æ˜¯ä½œåºŸçš„ä¸”ä¸æ¨èä½¿ç”¨çš„ã€‚retractçš„è¯­æ³•å½¢å¼å¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\">// go.mod\nretract v1.0.0           // ä½œåºŸv1.0.0ç‰ˆæœ¬\nretract [v1.1.0, v1.2.0] // ä½œåºŸv1.1.0å’Œv1.2.0ä¸¤ä¸ªç‰ˆæœ¬\n</code></pre><p>æˆ‘ä»¬è¿˜ç”¨m1ä¸ºä¾‹ï¼Œæˆ‘ä»¬å°†m1çš„go.modæ›´æ–°ä¸ºå¦‚ä¸‹å†…å®¹ï¼š</p><pre><code class=\"language-plain\">//m1çš„go.mod\nmodule bitbucket.org/bigwhite/m1\n\ngo 1.17\n\nretract v1.0.2\n</code></pre><p>ç„¶åå°†m1æ”¾å…¥v1.0.3æ ‡ç­¾ä¸­å¹¶å‘å¸ƒã€‚ç°åœ¨m1çš„æ¶ˆè´¹è€…c2è¦æŸ¥çœ‹m1æ˜¯å¦æœ‰æœ€æ–°ç‰ˆæœ¬æ—¶ï¼Œå¯ä»¥æŸ¥çœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼ˆc2æœ¬åœ°ç¯å¢ƒä½¿ç”¨go1.17ç‰ˆæœ¬ï¼‰ï¼š</p><pre><code class=\"language-plain\">$GONOPROXY=bitbucket.org/bigwhite/m1 go list -m -u all\n... ...\nbitbucket.org/bigwhite/m1 v1.0.2 (retracted) [v1.0.3]\n</code></pre><p>ä»go listçš„è¾“å‡ºç»“æœä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†v1.0.2ç‰ˆæœ¬ä¸Šæœ‰äº†retractedçš„æç¤ºï¼Œæç¤ºè¿™ä¸ªç‰ˆæœ¬å·²ç»è¢«m1çš„ä½œè€…ä½œåºŸäº†ï¼Œä¸åº”è¯¥å†ä½¿ç”¨ï¼Œåº”å‡çº§ä¸ºv1.0.3ã€‚</p><p>ä½†retractedä»…ä»…æ˜¯ä¸€ä¸ªæç¤ºä½œç”¨ï¼Œå¹¶ä¸å½±å“go buildçš„ç»“æœï¼Œc2ç¯å¢ƒï¼ˆä¹‹å‰åœ¨go.modä¸­ä¾èµ–m1çš„v1.0.2ï¼‰ä¸‹çš„go buildä¸ä¼šè‡ªåŠ¨ç»•è¿‡v1.0.2ï¼Œé™¤éæ˜¾å¼æ›´æ–°åˆ°v1.0.3ã€‚</p><p>ä¸è¿‡ï¼Œä¸Šé¢çš„è¿™ä¸ªretractæŒ‡ç¤ºç¬¦é€‚åˆæ ‡è®°è¦ä½œåºŸçš„ç‹¬ç«‹çš„minorå’Œpatchç‰ˆæœ¬ï¼Œå¦‚æœè¦æç¤ºç”¨æŸä¸ªmoduleçš„æŸä¸ªå¤§ç‰ˆæœ¬æ•´ä¸ªä½œåºŸï¼Œæˆ‘ä»¬ç”¨Go 1.17ç‰ˆæœ¬å¼•å…¥çš„Deprecatedæ³¨é‡Šè¡Œæ›´é€‚åˆã€‚ä¸‹é¢æ˜¯ä½¿ç”¨Deprecatedæ³¨é‡Šè¡Œçš„ä¾‹å­ï¼š</p><pre><code class=\"language-plain\">// Deprecated: use bitbucket.org/bigwhite/m1/v2 instead.\nmodule bitbucket.org/bigwhite/m1\n</code></pre><p>å¦‚æœæˆ‘ä»¬åœ¨module m1çš„go.modä¸­ä½¿ç”¨äº†Deprecatedæ³¨é‡Šï¼Œé‚£ä¹ˆm1çš„æ¶ˆè´¹è€…åœ¨go getè·å–m1ç‰ˆæœ¬æ—¶ï¼Œæˆ–è€…æ˜¯é€šè¿‡go listæŸ¥çœ‹m1ç‰ˆæœ¬æ—¶ï¼Œä¼šæ”¶åˆ°ç›¸åº”çš„ä½œåºŸæç¤ºï¼Œä»¥go getä¸ºä¾‹ï¼š</p><pre><code class=\"language-plain\">$go get bitbucket.org/bigwhite/m1@latest\ngo: downloading bitbucket.org/bigwhite/m1 v1.0.3\ngo: module bitbucket.org/bigwhite/m1 is deprecated: use bitbucket.org/bigwhite/m1/v2 instead.\n... ...\n</code></pre><p>ä¸è¿‡Deprecatedæ³¨é‡Šçš„å½±å“ä¹Ÿä»…é™äºæç¤ºï¼Œå®ƒä¸ä¼šå½±å“åˆ°æ¶ˆè´¹è€…çš„é¡¹ç›®æ„å»ºä¸ä½¿ç”¨ã€‚</p><h2>å‡çº§moduleçš„majorç‰ˆæœ¬å·</h2><p>éšç€moduleçš„æ¼”åŒ–ï¼Œæ€»æœ‰ä¸€å¤©moduleä¼šå‡ºç°ä¸å…¼å®¹ä»¥å‰ç‰ˆæœ¬çš„changeï¼Œè¿™å°±åˆ°äº†éœ€è¦å‡çº§moduleçš„majorç‰ˆæœ¬å·çš„æ—¶å€™äº†ã€‚</p><p>åœ¨å‰é¢çš„è®²è§£ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†Go Moduleçš„è¯­ä¹‰å¯¼å…¥ç‰ˆæœ¬æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯Go Moduleè§„å®šï¼š<strong>å¦‚æœåŒä¸€ä¸ªåŒ…çš„æ–°æ—§ç‰ˆæœ¬æ˜¯å…¼å®¹çš„ï¼Œé‚£ä¹ˆå®ƒä»¬çš„åŒ…å¯¼å…¥è·¯å¾„åº”è¯¥æ˜¯ç›¸åŒçš„</strong>ã€‚åè¿‡æ¥è¯´ï¼Œå¦‚æœæ–°æ—§ä¸¤ä¸ªåŒ…ä¸å…¼å®¹ï¼Œé‚£ä¹ˆåº”è¯¥é‡‡ç”¨ä¸åŒçš„å¯¼å…¥è·¯å¾„ã€‚</p><p>è€Œä¸”ï¼Œæˆ‘ä»¬çŸ¥é“ï¼ŒGoå›¢é˜Ÿé‡‡ç”¨äº†å°†â€œmajorç‰ˆæœ¬â€ä½œä¸ºå¯¼å…¥è·¯å¾„çš„ä¸€éƒ¨åˆ†çš„è®¾è®¡ã€‚è¿™ç§è®¾è®¡æ”¯æŒåœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œå¯¼å…¥åŒä¸€ä¸ªrepoä¸‹çš„ä¸åŒmajorç‰ˆæœ¬çš„moduleï¼Œæ¯”å¦‚ï¼š</p><pre><code class=\"language-plain\">import (\n    \"bitbucket.org/bigwhite/m1/pkg1\"   // å¯¼å…¥majorç‰ˆæœ¬å·ä¸ºv0æˆ–v1çš„moduleä¸‹çš„pkg1\n    pkg1v2 \"bitbucket.org/bigwhite/m1/v2/pkg1\" // å¯¼å…¥majorç‰ˆæœ¬å·ä¸ºv2çš„moduleä¸‹çš„pkg1\n)\n</code></pre><p>æˆ‘ä»¬å¯ä»¥è®¤ä¸ºï¼š<strong>åœ¨åŒä¸€ä¸ªrepoä¸‹ï¼Œä¸åŒmajorå·çš„moduleå°±æ˜¯å®Œå…¨ä¸åŒçš„module</strong>ï¼Œç”šè‡³åŒä¸€repoä¸‹ï¼Œä¸åŒmajorå·çš„moduleå¯ä»¥ç›¸äº’å¯¼å…¥ã€‚</p><p>è¿™æ ·ä¸€æ¥ï¼Œå¯¹äºmoduleä½œè€…/ç»´æŠ¤è€…è€Œè¨€ï¼Œå‡çº§majorç‰ˆæœ¬å·ï¼Œä¹Ÿå°±æ„å‘³ç€é«˜ç‰ˆæœ¬çš„ä»£ç è¦ä¸ä½ç‰ˆæœ¬çš„ä»£ç å½»åº•åˆ†å¼€ç»´æŠ¤ï¼Œé€šå¸¸Goç¤¾åŒºä¼šé‡‡ç”¨ä¸ºæ–°çš„majorç‰ˆæœ¬å»ºç«‹æ–°çš„majoråˆ†æ”¯çš„æ–¹å¼ï¼Œæ¥å°†ä¸åŒmajorç‰ˆæœ¬çš„ä»£ç åˆ†ç¦»å¼€ï¼Œè¿™ç§æ–¹æ¡ˆè¢«ç§°ä¸ºâ€œmajor branchâ€çš„æ–¹æ¡ˆã€‚</p><p>major branchæ–¹æ¡ˆå¯¹äºå¤šæ•°gopheræ¥è¯´ï¼Œæ˜¯ä¸€ä¸ªè¿‡æ¸¡æ¯”è¾ƒè‡ªç„¶çš„æ–¹æ¡ˆï¼Œå®ƒé€šè¿‡å»ºç«‹vNåˆ†æ”¯å¹¶åŸºäºvNåˆ†æ”¯æ‰“vN.x.xçš„tagçš„æ–¹å¼ï¼Œåšmajorç‰ˆæœ¬çš„å‘å¸ƒã€‚</p><p>é‚£ä¹ˆï¼Œé‡‡ç”¨è¿™ç§æ–¹æ¡ˆçš„Go Moduleä½œè€…å‡çº§majorç‰ˆæœ¬å·æ—¶è¦æ€ä¹ˆæ“ä½œå‘¢ï¼Ÿ</p><p>æˆ‘ä»¬ä»¥å°†bitbucket.org/bigwhite/m1çš„majorç‰ˆæœ¬å·å‡çº§åˆ°v2ä¸ºä¾‹çœ‹çœ‹ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬è¦å»ºç«‹v2ä»£ç åˆ†æ”¯å¹¶åˆ‡æ¢åˆ°v2åˆ†æ”¯ä¸Šæ“ä½œï¼Œç„¶åä¿®æ”¹go.modæ–‡ä»¶ä¸­çš„module pathï¼Œå¢åŠ v2åç¼€ï¼š</p><pre><code class=\"language-plain\">//go.mod\nmodule bitbucket.org/bigwhite/m1/v2\n\ngo 1.17\n</code></pre><p>è¿™é‡Œè¦ç‰¹åˆ«æ³¨æ„ä¸€ç‚¹ï¼Œå¦‚æœmoduleå†…éƒ¨åŒ…é—´æœ‰ç›¸äº’å¯¼å…¥ï¼Œé‚£ä¹ˆåœ¨å‡çº§majorå·çš„æ—¶å€™ï¼Œè¿™äº›åŒ…çš„importè·¯å¾„ä¸Šä¹Ÿè¦å¢åŠ v2ï¼Œå¦åˆ™ï¼Œå°±ä¼šå­˜åœ¨åœ¨é«˜majorå·çš„moduleä»£ç ä¸­ï¼Œå¼•ç”¨ä½majorå·çš„moduleä»£ç çš„æƒ…å†µï¼Œ<strong>è¿™ä¹Ÿæ˜¯moduleä½œè€…æœ€å®¹æ˜“å¿½ç•¥çš„äº‹æƒ…</strong>ã€‚</p><p>è¿™æ ·ä¸€é€šæ“ä½œåï¼Œæˆ‘ä»¬å°±å°†repoä¸‹çš„moduleåˆ†ä¸ºäº†ä¸¤ä¸ªmoduleäº†ï¼Œä¸€ä¸ªæ˜¯åŸå…ˆçš„v0/v1 moduleï¼Œåœ¨master/mainåˆ†æ”¯ä¸Šï¼›æ–°å»ºçš„v2åˆ†æ”¯æ‰¿è½½äº†majorå·ä¸º2çš„moduleçš„ä»£ç ã€‚majorå·å‡çº§çš„è¿™ä¸ªæ“ä½œè¿‡ç¨‹è¿˜æ˜¯å¾ˆå®¹æ˜“å‡ºé”™çš„ï¼Œä½ æ“ä½œæ—¶ä¸€å®šè¦è°¨æ…ã€‚</p><p>å¯¹äºæ¶ˆè´¹è€…è€Œè¨€ï¼Œåœ¨å®ƒä¾èµ–çš„moduleè¿›è¡Œmajorç‰ˆæœ¬å·å‡çº§åï¼Œä»–ä»¬åªéœ€è¦åœ¨è¿™ä¸ªä¾èµ–moduleçš„importè·¯å¾„çš„åé¢ï¼Œå¢åŠ /vNå°±å¯ä»¥äº†ï¼ˆè¿™é‡Œæ˜¯/v2ï¼‰ï¼Œå½“ç„¶ä»£ç ä¸­ä¹Ÿè¦é’ˆå¯¹ä¸å…¼å®¹çš„éƒ¨åˆ†è¿›è¡Œä¿®æ”¹ï¼Œç„¶ågoå·¥å…·å°±ä¼šè‡ªåŠ¨ä¸‹è½½ç›¸å…³moduleã€‚</p><p>æ—©æœŸGoå›¢é˜Ÿè¿˜æä¾›äº†åˆ©ç”¨å­ç›®å½•åˆ†å‰²ä¸åŒmajorç‰ˆæœ¬çš„æ–¹æ¡ˆï¼Œæˆ‘ä»¬ä¹Ÿçœ‹çœ‹è¿™ç§æ–¹å¼æ€ä¹ˆæ ·ã€‚</p><p>æˆ‘ä»¬è¿˜æ˜¯ä»¥bitbucket.org/bigwhite/m1ä¸ºä¾‹ï¼Œå¦‚æœè¿™ä¸ªmoduleå·²ç»æ¼”åŒ–åˆ°v3ç‰ˆæœ¬äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªmoduleæ‰€åœ¨ä»“åº“çš„ç›®å½•ç»“æ„åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p><pre><code class=\"language-plain\"># tree m1\nm1\nâ”œâ”€â”€ pkg1\nâ”‚   â””â”€â”€ pkg1.go\nâ”œâ”€â”€ go.mod\nâ”œâ”€â”€ v2\nâ”‚   â”œâ”€â”€ pkg1 \nâ”‚   â”‚   â””â”€â”€ pkg1.go\nâ”‚   â””â”€â”€ go.mod\nâ””â”€â”€ v3\n    â”œâ”€â”€ pkg1 \n    â”‚   â””â”€â”€ pkg1.go\n    â””â”€â”€ go.mod\n</code></pre><p>è¿™é‡Œæˆ‘ä»¬ç›´æ¥ç”¨vNä½œä¸ºå­ç›®å½•åå­—ï¼Œåœ¨ä»£ç ä»“åº“ä¸­å°†ä¸åŒç‰ˆæœ¬moduleæ”¾ç½®åœ¨ä¸åŒçš„å­ç›®å½•ä¸­ï¼Œè¿™æ ·ï¼Œgoå‘½ä»¤å°±ä¼šå°†ä»“åº“å†…çš„å­ç›®å½•åä¸majorå·åŒ¹é…å¹¶æ‰¾åˆ°å¯¹åº”ç‰ˆæœ¬çš„moduleã€‚</p><p>ä»æè¿°ä¸Šçœ‹ï¼Œä¼¼ä¹è¿™ç§é€šè¿‡å­ç›®å½•æ–¹å¼æ¥å®ç°majorç‰ˆæœ¬å·å‡çº§ï¼Œä¼šæ›´â€œç®€å•â€ä¸€äº›ã€‚ä½†æˆ‘æ€»æ„Ÿè§‰è¿™ç§æ–¹å¼æœ‰äº›â€œæ€ªâ€ï¼Œè€Œä¸”ï¼Œå…¶ä»–ä¸»æµè¯­è¨€ä¹Ÿå¾ˆå°‘æœ‰ç”¨è¿™ç§æ–¹å¼è¿›è¡Œmajorç‰ˆæœ¬å·å‡çº§çš„ã€‚</p><p>å¦å¤–ä¸€æ—¦ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬ä¼¼ä¹ä¹Ÿå¾ˆéš¾åˆ©ç”¨gitå·¥å…·åœ¨ä¸åŒmajorç‰ˆæœ¬ä¹‹é—´è¿›è¡Œä»£ç çš„mergeäº†ã€‚ç›®å‰Goæ–‡æ¡£ä¸­ä¼¼ä¹ä¹Ÿä¸å†æè¿™ç§æ–¹æ¡ˆäº†ï¼Œæˆ‘ä¸ªäººä¹Ÿå»ºè®®ä½ <strong>å°½é‡ä½¿ç”¨majoråˆ†æ”¯æ–¹æ¡ˆ</strong>ã€‚</p><p>åœ¨å®é™…æ“ä½œä¸­ï¼Œä¹Ÿæœ‰ä¸€äº›Go Moduleçš„ä»“åº“ï¼Œå§‹ç»ˆ<strong>å°†masteræˆ–mainåˆ†æ”¯ä½œä¸ºæœ€é«˜majorç‰ˆæœ¬çš„åˆ†æ”¯</strong>ï¼Œç„¶åå»ºç«‹ä½ç‰ˆæœ¬åˆ†æ”¯æ¥ç»´æŠ¤ä½majorç‰ˆæœ¬çš„moduleä»£ç ï¼Œæ¯”å¦‚ï¼š<a href=\"https://github.com/etcd-io/etcd\">etcd</a>ã€<a href=\"https://github.com/go-redis/redis\">go-redis</a>ç­‰ã€‚</p><p>è¿™ç§æ–¹å¼æœ¬è´¨ä¸Šå’Œå‰é¢å»ºç«‹majoråˆ†æ”¯çš„æ–¹å¼æ˜¯ä¸€æ ·çš„ï¼Œå¹¶ä¸”è¿™ç§æ–¹å¼æ›´ç¬¦åˆä¸€ä¸ªGo Moduleæ¼”åŒ–çš„è¶‹åŠ¿å’Œä½œè€…çš„æ„å›¾ï¼Œä¹Ÿå°±æ˜¯ä½ç‰ˆæœ¬çš„Go Moduleéšç€æ—¶é—´çš„æ¨ç§»å°†æ¸æ¸ä¸å†ç»´æŠ¤ï¼Œè€Œæœ€æ–°æœ€é«˜ç‰ˆæœ¬çš„Go Moduleæ˜¯moduleä½œè€…æœ€æƒ³è®©ä½¿ç”¨è€…ä½¿ç”¨çš„ç‰ˆæœ¬ã€‚</p><p>ä½†åœ¨å•repoå¤šmoduleç®¡ç†æ–¹å¼ä¸‹ï¼Œå‡çº§moduleçš„majorç‰ˆæœ¬å·æœ‰äº›å¤æ‚ï¼Œæˆ‘ä»¬éœ€è¦åˆ†ä¸ºä¸¤ç§æƒ…å†µæ¥è€ƒè™‘ã€‚</p><p><strong>ç¬¬ä¸€ç§æƒ…å†µï¼šrepoä¸‹çš„æ‰€æœ‰moduleç»Ÿä¸€è¿›è¡Œç‰ˆæœ¬å‘å¸ƒã€‚</strong></p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦å‘ä¸Šé¢æ‰€è¯´çš„é‚£æ ·å»ºç«‹vNç‰ˆæœ¬åˆ†æ”¯å°±å¯ä»¥äº†ï¼Œåœ¨vNåˆ†æ”¯ä¸Šå¯¹repoä¸‹æ‰€æœ‰moduleè¿›è¡Œæ¼”è¿›ï¼Œç»Ÿä¸€æ‰“tagå¹¶å‘å¸ƒã€‚å½“ç„¶tagè¦é‡‡ç”¨å¸¦æœ‰moduleå­ç›®å½•åçš„é‚£ç§æ–¹å¼ï¼Œæ¯”å¦‚ï¼šmodule1/v2.0.0ã€‚</p><p>etcdé¡¹ç›®å¯¹æ——ä¸‹çš„Go Moduleçš„ç»Ÿä¸€ç‰ˆæœ¬å‘å¸ƒï¼Œå°±æ˜¯ç”¨çš„è¿™ç§æ–¹å¼ã€‚å¦‚æœç¿»çœ‹ä¸€ä¸‹etcdçš„é¡¹ç›®ï¼Œä½ ä¼šå‘ç°etcdåªä¼šå»ºç«‹å°‘é‡çš„åƒrelease-3.4ã€release-3.5è¿™æ ·çš„majoråˆ†æ”¯ï¼ŒåŸºäºè¿™äº›åˆ†æ”¯ï¼Œetcdä¼šç»Ÿä¸€å‘å¸ƒmoduleName/v3.4.xå’ŒmoduleName/v3.5.xç‰ˆæœ¬ã€‚</p><p><strong>ç¬¬äºŒä¸ªæƒ…å†µï¼šrepoä¸‹çš„moduleå„è‡ªç‹¬ç«‹è¿›è¡Œç‰ˆæœ¬å‘å¸ƒã€‚</strong></p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç®€å•åˆ›å»ºä¸€ä¸ªmajorå·åˆ†æ”¯æ¥ç»´æŠ¤moduleçš„æ–¹å¼ï¼Œå°±ä¼šæ˜¾å¾—ä¸å¤Ÿç”¨äº†ï¼Œæˆ‘ä»¬å¾ˆå¯èƒ½éœ€è¦å»ºç«‹majoråˆ†æ”¯çŸ©é˜µã€‚å‡è®¾æˆ‘ä»¬çš„ä¸€ä¸ªrepoä¸‹ç®¡ç†äº†å¤šä¸ªmoduleï¼Œä»m1åˆ°mNï¼Œé‚£ä¹ˆmajorå·éœ€è¦å‡çº§æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦å°†majorç‰ˆæœ¬å·ä¸moduleåšä¸€ä¸ªç»„åˆï¼Œå½¢æˆä¸‹é¢çš„åˆ†æ”¯çŸ©é˜µï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/89/64/8932b28df291e7efbc537d4843cfc464.jpeg?wh=1453x860\" alt=\"å›¾ç‰‡\"></p><p>ä»¥m1ä¸ºä¾‹ï¼Œå½“m1çš„majorç‰ˆæœ¬å·éœ€è¦å‡çº§åˆ°2æ—¶ï¼Œæˆ‘ä»¬å»ºç«‹v2_m1 majoråˆ†æ”¯ä¸“é—¨ç”¨äºç»´æŠ¤å’Œå‘å¸ƒm1 moduleçš„v2.x.xç‰ˆæœ¬ã€‚</p><p>å½“ç„¶ä¸Šè¿°çš„çŸ©é˜µæ˜¯ä¸€ä¸ªå…¨çŸ©é˜µ(æ‰€æœ‰é¡¹ä¸­éƒ½æœ‰å€¼)ï¼Œå®é™…é¡¹ç›®ä¸­å¯èƒ½é‡‡ç”¨çš„æ˜¯ç¨€ç–çŸ©é˜µï¼Œä¹Ÿå°±æ˜¯å¹¶éæ‰€æœ‰çš„è¡¨æ ¼é¡¹ä¸­éƒ½æœ‰å€¼ï¼Œå› ä¸ºrepoä¸‹å„ä¸ªmoduleçš„majorå·å‡çº§å¹¶ä¸æ˜¯åŒæ­¥çš„ï¼Œæœ‰äº›moduleçš„majorå·å¯èƒ½å·²ç»å‡çº§åˆ°äº†4ï¼Œä½†æœ‰äº›moduleçš„majorå·å¯èƒ½è¿˜åœç•™åœ¨2ã€‚</p><h2>å°ç»“</h2><p>å¥½äº†ï¼Œä»Šå¤©çš„åŠ é¤è®²åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œç°åœ¨æˆ‘ä»¬ä¸€èµ·æ¥å›é¡¾ä¸€ä¸‹å§ã€‚</p><p>åœ¨è¿™ä¸€è®²ï¼Œæˆ‘ä»¬æ›´å¤šä»Go Moduleçš„ä½œè€…æˆ–ç»´æŠ¤è€…çš„è§’åº¦å‡ºå‘ï¼Œå»æ€è€ƒè§„åˆ’ã€å‘å¸ƒå’Œç»´æŠ¤Go Moduleè¿‡ç¨‹ä¸­å¯èƒ½é‡åˆ°çš„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ³•ã€‚</p><p>Go Moduleç»è¿‡å¤šå¹´æ‰“ç£¨å·²ç»é€æ¸æˆç†Ÿï¼Œå¯¹å„ç§Go Moduleä»“åº“çš„å¸ƒå±€æ–¹å¼éƒ½æä¾›äº†å¾ˆå¥½çš„æ”¯æŒã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šé‡‡ç”¨åœ¨å•ä»“åº“å•moduleçš„å¸ƒå±€æ–¹å¼ï¼Œæ— è®ºæ˜¯å‘å¸ƒmoduleæ‰“ç‰ˆæœ¬å·è¿˜æ˜¯å‡çº§majorç‰ˆæœ¬å·ï¼Œè¿™ç§æ–¹å¼éƒ½ç®€å•æ˜“æ‡‚ï¼Œå¿ƒæ™ºè´Ÿæ‹…ä½ã€‚</p><p>å½“ç„¶Go Moduleä¹Ÿæ”¯æŒåœ¨ä¸€ä¸ªä»“åº“ä¸‹ç®¡ç†å¤šä¸ªmoduleï¼Œå¦‚æœä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œè¦æ³¨æ„å‘å¸ƒæŸmoduleæ—¶ï¼Œtagåå­—è¦åŒ…å«moduleç›®å½•åï¼Œæ¯”å¦‚ï¼šmodule1/v1.0.1ã€‚</p><p>å‡çº§moduleçš„majorç‰ˆæœ¬å·æ—¶ï¼Œä½ ä¸€å®šè¦æ³¨æ„ï¼šå¦‚æœmoduleå†…éƒ¨åŒ…é—´æœ‰ç›¸äº’å¯¼å…¥ï¼Œé‚£ä¹ˆè¿™äº›åŒ…çš„importè·¯å¾„ä¸Šä¹Ÿè¦å¢åŠ vNï¼Œå¦åˆ™å°±ä¼šå­˜åœ¨åœ¨é«˜majorå·çš„moduleä»£ç ä¸­ï¼Œå¼•ç”¨ä½majorå·çš„moduleä»£ç çš„æƒ…å†µï¼Œå¯¼è‡´å‡ºç°ä¸€äº›å¥‡æ€ªçš„é—®é¢˜ã€‚</p><p>æ­¤å¤–ï¼Œå‘å¸ƒGo Moduleæ—¶ä½ ä¹Ÿä¸€å®šè¦è°¨æ…å°å¿ƒï¼Œå› ä¸ºä¸€æ—¦å°†brokençš„ç‰ˆæœ¬å‘å¸ƒå‡ºå»ï¼Œè¦æƒ³ä½œåºŸè¿™ä¸ªç‰ˆæœ¬æ˜¯æ²¡æœ‰å¤ªå¥½çš„æ–¹æ¡ˆçš„ï¼Œç°æœ‰çš„æ–¹æ¡ˆéƒ½æˆ–å¤šæˆ–å°‘å¯¹moduleä½¿ç”¨è€…æœ‰äº›å½±å“ã€‚å°¤å…¶æ˜¯é‡‡ç”¨å•repoå¤šmoduleçš„å¸ƒå±€æ–¹å¼æ—¶ï¼Œå‘å¸ƒmoduleæ—¶æ›´æ˜¯è¦æ ¼å¤–ç»†å¿ƒã€‚</p><h2>æ€è€ƒé¢˜</h2><p>å‰é¢æåˆ°è¿‡ï¼ŒGo Moduleåªæœ‰åœ¨å¼•å…¥ä¸å…¼å®¹çš„changeæ—¶æ‰ä¼šå‡çº§majorç‰ˆæœ¬å·ï¼Œé‚£ä¹ˆå“ªäº›changeå±äºä¸å…¼å®¹çš„changeå‘¢ï¼Ÿå¦‚ä½•æ›´å¥½æ›´å¿«åœ°è¯†åˆ«å‡ºè¿™äº›ä¸å…¼å®¹changeå‘¢ï¼Ÿæ¬¢è¿åœ¨ç•™è¨€åŒºè°ˆè°ˆä½ çš„æƒ³æ³•å’Œå®è·µã€‚</p><p>æ¬¢è¿ä½ æŠŠè¿™èŠ‚è¯¾åˆ†äº«ç»™æ›´å¤šæ„Ÿå…´è¶£çš„æœ‹å‹ã€‚æˆ‘æ˜¯Tony Baiï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ã€‚</p>","comments":[{"had_liked":false,"id":333303,"user_name":"bearlu","can_delete":false,"product_type":"c1","uid":1030862,"ip_address":"","ucode":"14F260C8B24E27","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ba/ce/fd45714f.jpg","comment_is_top":false,"comment_ctime":1644280885,"is_pvip":true,"replies":[{"id":121788,"content":"æ–‡ç« é‡Œæ²¡æœ‰å°†è¿™ä¸ªè¿‡ç¨‹æ•´ç†æˆæµç¨‹å›¾ã€‚ä½†æ˜¯ç»“åˆè¿™ç¯‡åŠ é¤ä»¥åŠä¸“æ ä¸­è®²è§£go moduleçš„ç« èŠ‚ï¼Œå¯ä»¥è‡ªå·±æ•´ç†ä¸€ä¸‹ã€‚æ•´ç†è¿‡ç¨‹ä¸­ï¼Œå¦‚é‡åˆ°å…·ä½“é—®é¢˜ï¼Œå¯ä»¥ç•™è¨€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1644286361,"ip_address":"","comment_id":333303,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"è€å¸ˆï¼Œä½ å¥½ã€‚æœ‰æ²¡æœ‰æ„å»ºmoduleçš„é¡¹ç›®è¿‡ç¨‹çš„èµ„æ–™ï¼Ÿæ¯”å¦‚æˆ‘æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œæƒ³å‘å¸ƒå‡ºå»ï¼Œæ•´ä¸ªæµç¨‹æ˜¯å¦‚ä½•ï¼Ÿ","like_count":1},{"had_liked":false,"id":347041,"user_name":"é»„å¸¸å‡¯","can_delete":false,"product_type":"c1","uid":1450651,"ip_address":"","ucode":"A8D40EA8EB6BFD","user_header":"https://static001.geekbang.org/account/avatar/00/16/22/9b/4486d287.jpg","comment_is_top":false,"comment_ctime":1653637564,"is_pvip":false,"replies":[{"id":126562,"content":"importåé¢çš„å¯¼å…¥è·¯å¾„å°±æ˜¯go moduleæ‰€åœ¨è·¯å¾„å•Šã€‚\n\næ¯”å¦‚ï¼šimport &quot;github.com&#47;xxxx&#47;yyyy&quot;, goå°±å¯ä»¥ç›´æ¥å»github.com&#47;xxxx&#47;yyyyå»ä¸‹è½½çš„å•Šã€‚å½“ç„¶æœ‰äº†goproxyçš„å­˜åœ¨ï¼Œå¦‚æœgoproxyä¸Šå·²ç»cacheäº†æ‰€éœ€è¦çš„ç‰ˆæœ¬ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç›´æ¥ä»goproxyä¸Šè·å–åˆ°ã€‚å¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆgoproxyä¹Ÿæ˜¯ä¼šæ ¹æ®go moduleçš„è·¯å¾„ç›´æ¥å»githubä¸Šæ‰¾åˆ°ã€‚\n\nå½“ç„¶github.comåªæ˜¯go moduleæ‰˜ç®¡è¾ƒå¤šçš„ä»£ç ç«™ç‚¹ï¼Œä½ è¿˜å¯ä»¥ç”¨gitlabã€bitbucketç­‰ï¼Œé“ç†æ˜¯ä¸€æ ·çš„ã€‚\n\n","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1653744442,"ip_address":"","comment_id":347041,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"åœ¨ä»£ç é‡Œimportçš„åŒ…ï¼Œæ˜¯æ€ä¹ˆæ‰¾åˆ°githubä¸Šçš„å‘¢ï¼Ÿæ˜¯goproxyçš„ä½œç”¨å—","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573951,"discussion_content":"importåé¢çš„å¯¼å…¥è·¯å¾„å°±æ˜¯go moduleæ‰€åœ¨è·¯å¾„å•Šã€‚\n\næ¯”å¦‚ï¼šimport &#34;github.com/xxxx/yyyy&#34;, goå°±å¯ä»¥ç›´æ¥å»github.com/xxxx/yyyyå»ä¸‹è½½çš„å•Šã€‚å½“ç„¶æœ‰äº†goproxyçš„å­˜åœ¨ï¼Œå¦‚æœgoproxyä¸Šå·²ç»cacheäº†æ‰€éœ€è¦çš„ç‰ˆæœ¬ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç›´æ¥ä»goproxyä¸Šè·å–åˆ°ã€‚å¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆgoproxyä¹Ÿæ˜¯ä¼šæ ¹æ®go moduleçš„è·¯å¾„ç›´æ¥å»githubä¸Šæ‰¾åˆ°ã€‚\n\nå½“ç„¶github.comåªæ˜¯go moduleæ‰˜ç®¡è¾ƒå¤šçš„ä»£ç ç«™ç‚¹ï¼Œä½ è¿˜å¯ä»¥ç”¨gitlabã€bitbucketç­‰ï¼Œé“ç†æ˜¯ä¸€æ ·çš„ã€‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653744442,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343486,"user_name":"è°¢å°è·¯","can_delete":false,"product_type":"c1","uid":1035064,"ip_address":"","ucode":"C9FE2EB10DC105","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cb/38/4c9cfdf4.jpg","comment_is_top":false,"comment_ctime":1650872375,"is_pvip":false,"replies":[{"id":125440,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1651011614,"ip_address":"","comment_id":343486,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"ä¸€ä¸ªéšæ€§è§„åˆ™ï¼Œtag æ°¸è¿œé€’å¢ï¼ˆä¸ä¼šåˆ é™¤ï¼Œæ›´ä¸ä¼šé€’å‡ï¼‰ï¼Œå°±èƒ½é¿å…å¾ˆå¤šé—®é¢˜ã€‚","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573951,"discussion_content":"importåé¢çš„å¯¼å…¥è·¯å¾„å°±æ˜¯go moduleæ‰€åœ¨è·¯å¾„å•Šã€‚\n\næ¯”å¦‚ï¼šimport &#34;github.com/xxxx/yyyy&#34;, goå°±å¯ä»¥ç›´æ¥å»github.com/xxxx/yyyyå»ä¸‹è½½çš„å•Šã€‚å½“ç„¶æœ‰äº†goproxyçš„å­˜åœ¨ï¼Œå¦‚æœgoproxyä¸Šå·²ç»cacheäº†æ‰€éœ€è¦çš„ç‰ˆæœ¬ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç›´æ¥ä»goproxyä¸Šè·å–åˆ°ã€‚å¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆgoproxyä¹Ÿæ˜¯ä¼šæ ¹æ®go moduleçš„è·¯å¾„ç›´æ¥å»githubä¸Šæ‰¾åˆ°ã€‚\n\nå½“ç„¶github.comåªæ˜¯go moduleæ‰˜ç®¡è¾ƒå¤šçš„ä»£ç ç«™ç‚¹ï¼Œä½ è¿˜å¯ä»¥ç”¨gitlabã€bitbucketç­‰ï¼Œé“ç†æ˜¯ä¸€æ ·çš„ã€‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653744442,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":334221,"user_name":"å¥•","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1644819758,"is_pvip":false,"replies":[{"id":122147,"content":"é—®é¢˜ä¸­çš„â€œå®‰è£…â€æ˜¯æŒ‡å“ªä¸ªç¯èŠ‚ï¼Ÿgo installä¹ˆï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1644916664,"ip_address":"","comment_id":334221,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"æœ‰ä¸ªç–‘é—®ï¼š å‘å¸ƒç‰ˆæœ¬çš„æ—¶å€™æ˜¯ V2.0.0 ï¼Œ å®‰è£…çš„æ—¶å€™ æ˜¯ä¸æ˜¯ç›´æ¥æ‰¾  v2.0.0 è¿™ä¸ª tagå°±å¯ä»¥äº†ï¼Ÿ å’Œ go.mod æŒ‡å®šçš„ç‰ˆæœ¬æ˜¯æ²¡æœ‰å…³ç³»ï¼Ÿ  go.mod æŒ‡å®šçš„ç‰ˆæœ¬ åªæ˜¯ä¾èµ–æ¨¡å—å†…éƒ¨è¿›è¡ŒåŒºåˆ†çš„","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567821,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651011614,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333303,"user_name":"bearlu","can_delete":false,"product_type":"c1","uid":1030862,"ip_address":"","ucode":"14F260C8B24E27","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ba/ce/fd45714f.jpg","comment_is_top":false,"comment_ctime":1644280885,"is_pvip":true,"replies":[{"id":121788,"content":"æ–‡ç« é‡Œæ²¡æœ‰å°†è¿™ä¸ªè¿‡ç¨‹æ•´ç†æˆæµç¨‹å›¾ã€‚ä½†æ˜¯ç»“åˆè¿™ç¯‡åŠ é¤ä»¥åŠä¸“æ ä¸­è®²è§£go moduleçš„ç« èŠ‚ï¼Œå¯ä»¥è‡ªå·±æ•´ç†ä¸€ä¸‹ã€‚æ•´ç†è¿‡ç¨‹ä¸­ï¼Œå¦‚é‡åˆ°å…·ä½“é—®é¢˜ï¼Œå¯ä»¥ç•™è¨€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1644286361,"ip_address":"","comment_id":333303,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"è€å¸ˆï¼Œä½ å¥½ã€‚æœ‰æ²¡æœ‰æ„å»ºmoduleçš„é¡¹ç›®è¿‡ç¨‹çš„èµ„æ–™ï¼Ÿæ¯”å¦‚æˆ‘æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œæƒ³å‘å¸ƒå‡ºå»ï¼Œæ•´ä¸ªæµç¨‹æ˜¯å¦‚ä½•ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549876,"discussion_content":"æ–‡ç« é‡Œæ²¡æœ‰å°†è¿™ä¸ªè¿‡ç¨‹æ•´ç†æˆæµç¨‹å›¾ã€‚ä½†æ˜¯ç»“åˆè¿™ç¯‡åŠ é¤ä»¥åŠä¸“æ ä¸­è®²è§£go moduleçš„ç« èŠ‚ï¼Œå¯ä»¥è‡ªå·±æ•´ç†ä¸€ä¸‹ã€‚æ•´ç†è¿‡ç¨‹ä¸­ï¼Œå¦‚é‡åˆ°å…·ä½“é—®é¢˜ï¼Œå¯ä»¥ç•™è¨€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644286361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1035064,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cb/38/4c9cfdf4.jpg","nickname":"è°¢å°è·¯","note":"","ucode":"C9FE2EB10DC105","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567270,"discussion_content":"è‡ªå·±ä½¿ç”¨ Module æ–¹å¼å†™ä¸ªç®€å•çš„åº“ï¼Œæ¨é€åˆ°æ‰˜ç®¡å¹³å°ã€‚å†ä½¿ç”¨å¦ä¸€ä¸ªé¡¹ç›®ä½¿ç”¨è¿™ä¸ªæ¨é€åˆ°æ‰˜ç®¡å¹³å°çš„åº“ï¼ˆåƒä½¿ç”¨ç¬¬ä¸‰æ–¹åº“é‚£ä¹ˆæ“ä½œï¼‰ã€‚å°±å¤§æ¦‚èƒ½çŸ¥é“äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650872313,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1030862,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ba/ce/fd45714f.jpg","nickname":"bearlu","note":"","ucode":"14F260C8B24E27","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549893,"discussion_content":"å¥½çš„ï¼Œè°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644288596,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":347041,"user_name":"é»„å¸¸å‡¯","can_delete":false,"product_type":"c1","uid":1450651,"ip_address":"","ucode":"A8D40EA8EB6BFD","user_header":"https://static001.geekbang.org/account/avatar/00/16/22/9b/4486d287.jpg","comment_is_top":false,"comment_ctime":1653637564,"is_pvip":false,"replies":[{"id":126562,"content":"importåé¢çš„å¯¼å…¥è·¯å¾„å°±æ˜¯go moduleæ‰€åœ¨è·¯å¾„å•Šã€‚\n\næ¯”å¦‚ï¼šimport &quot;github.com&#47;xxxx&#47;yyyy&quot;, goå°±å¯ä»¥ç›´æ¥å»github.com&#47;xxxx&#47;yyyyå»ä¸‹è½½çš„å•Šã€‚å½“ç„¶æœ‰äº†goproxyçš„å­˜åœ¨ï¼Œå¦‚æœgoproxyä¸Šå·²ç»cacheäº†æ‰€éœ€è¦çš„ç‰ˆæœ¬ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç›´æ¥ä»goproxyä¸Šè·å–åˆ°ã€‚å¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆgoproxyä¹Ÿæ˜¯ä¼šæ ¹æ®go moduleçš„è·¯å¾„ç›´æ¥å»githubä¸Šæ‰¾åˆ°ã€‚\n\nå½“ç„¶github.comåªæ˜¯go moduleæ‰˜ç®¡è¾ƒå¤šçš„ä»£ç ç«™ç‚¹ï¼Œä½ è¿˜å¯ä»¥ç”¨gitlabã€bitbucketç­‰ï¼Œé“ç†æ˜¯ä¸€æ ·çš„ã€‚\n\n","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1653744442,"ip_address":"","comment_id":347041,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"åœ¨ä»£ç é‡Œimportçš„åŒ…ï¼Œæ˜¯æ€ä¹ˆæ‰¾åˆ°githubä¸Šçš„å‘¢ï¼Ÿæ˜¯goproxyçš„ä½œç”¨å—","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549876,"discussion_content":"æ–‡ç« é‡Œæ²¡æœ‰å°†è¿™ä¸ªè¿‡ç¨‹æ•´ç†æˆæµç¨‹å›¾ã€‚ä½†æ˜¯ç»“åˆè¿™ç¯‡åŠ é¤ä»¥åŠä¸“æ ä¸­è®²è§£go moduleçš„ç« èŠ‚ï¼Œå¯ä»¥è‡ªå·±æ•´ç†ä¸€ä¸‹ã€‚æ•´ç†è¿‡ç¨‹ä¸­ï¼Œå¦‚é‡åˆ°å…·ä½“é—®é¢˜ï¼Œå¯ä»¥ç•™è¨€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644286361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1035064,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cb/38/4c9cfdf4.jpg","nickname":"è°¢å°è·¯","note":"","ucode":"C9FE2EB10DC105","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567270,"discussion_content":"è‡ªå·±ä½¿ç”¨ Module æ–¹å¼å†™ä¸ªç®€å•çš„åº“ï¼Œæ¨é€åˆ°æ‰˜ç®¡å¹³å°ã€‚å†ä½¿ç”¨å¦ä¸€ä¸ªé¡¹ç›®ä½¿ç”¨è¿™ä¸ªæ¨é€åˆ°æ‰˜ç®¡å¹³å°çš„åº“ï¼ˆåƒä½¿ç”¨ç¬¬ä¸‰æ–¹åº“é‚£ä¹ˆæ“ä½œï¼‰ã€‚å°±å¤§æ¦‚èƒ½çŸ¥é“äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650872313,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1030862,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ba/ce/fd45714f.jpg","nickname":"bearlu","note":"","ucode":"14F260C8B24E27","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549893,"discussion_content":"å¥½çš„ï¼Œè°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644288596,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343486,"user_name":"è°¢å°è·¯","can_delete":false,"product_type":"c1","uid":1035064,"ip_address":"","ucode":"C9FE2EB10DC105","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cb/38/4c9cfdf4.jpg","comment_is_top":false,"comment_ctime":1650872375,"is_pvip":false,"replies":[{"id":125440,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1651011614,"ip_address":"","comment_id":343486,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"ä¸€ä¸ªéšæ€§è§„åˆ™ï¼Œtag æ°¸è¿œé€’å¢ï¼ˆä¸ä¼šåˆ é™¤ï¼Œæ›´ä¸ä¼šé€’å‡ï¼‰ï¼Œå°±èƒ½é¿å…å¾ˆå¤šé—®é¢˜ã€‚","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567821,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651011614,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":334221,"user_name":"å¥•","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1644819758,"is_pvip":false,"replies":[{"id":122147,"content":"é—®é¢˜ä¸­çš„â€œå®‰è£…â€æ˜¯æŒ‡å“ªä¸ªç¯èŠ‚ï¼Ÿgo installä¹ˆï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1644916664,"ip_address":"","comment_id":334221,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"æœ‰ä¸ªç–‘é—®ï¼š å‘å¸ƒç‰ˆæœ¬çš„æ—¶å€™æ˜¯ V2.0.0 ï¼Œ å®‰è£…çš„æ—¶å€™ æ˜¯ä¸æ˜¯ç›´æ¥æ‰¾  v2.0.0 è¿™ä¸ª tagå°±å¯ä»¥äº†ï¼Ÿ å’Œ go.mod æŒ‡å®šçš„ç‰ˆæœ¬æ˜¯æ²¡æœ‰å…³ç³»ï¼Ÿ  go.mod æŒ‡å®šçš„ç‰ˆæœ¬ åªæ˜¯ä¾èµ–æ¨¡å—å†…éƒ¨è¿›è¡ŒåŒºåˆ†çš„","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":551172,"discussion_content":"é—®é¢˜ä¸­çš„â€œå®‰è£…â€æ˜¯æŒ‡å“ªä¸ªç¯èŠ‚ï¼Ÿgo installä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644916664,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"å¥•","note":"","ucode":"73CEA468CE70C3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":551225,"discussion_content":"go get","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644932358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":551172,"ip_address":"","group_id":0},"score":551225,"extra":""}]}]}]}