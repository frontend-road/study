{"id":263697,"title":"19 | 熟练执行JavaScript的方法和技巧，掌握JavaScript操作滚动条","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/Selenium\">https://gitee.com/geektime-geekbang/Selenium</a></p>","comments":[{"had_liked":false,"id":335358,"user_name":"per","can_delete":false,"product_type":"c3","uid":2112515,"ip_address":"","ucode":"DC156A3C7AA1BD","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLpuXh4ibibw0eAZyW8Yqd51ictib0fLS2rd69ictFVibBBmEDuaYDuoJIT6Glh045BthwJL3S6gDQkQicwA/132","comment_is_top":false,"comment_ctime":1645486369,"is_pvip":false,"replies":[{"id":125486,"content":"js语法可以是任意的","user_name":"作者回复","user_name_real":"编辑","uid":1654315,"ctime":1651036714,"ip_address":"","comment_id":335358,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师，请问下，js定位的方法是什么，是固定语法吗，js＝后面一串的字符是如何确定的","like_count":2,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567990,"discussion_content":"js语法可以是任意的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651036714,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351456,"user_name":"arun20350130","can_delete":false,"product_type":"c3","uid":1145846,"ip_address":"","ucode":"1C889D0BB036C8","user_header":"https://static001.geekbang.org/account/avatar/00/11/7b/f6/3f8f6775.jpg","comment_is_top":false,"comment_ctime":1657804763,"is_pvip":true,"replies":[{"id":134403,"content":"在资料包里面有pdf","user_name":"作者回复","user_name_real":"编辑","uid":1654315,"ctime":1677055556,"ip_address":"河北","comment_id":351456,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师,视频的markdown文档可以分享下么?","like_count":1,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606265,"discussion_content":"在资料包里面有pdf","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677055556,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"河北","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357517,"user_name":"星辰","can_delete":false,"product_type":"c3","uid":2089218,"ip_address":"江苏","ucode":"27736BFBA9D325","user_header":"https://static001.geekbang.org/account/avatar/00/1f/e1/02/b352cde7.jpg","comment_is_top":false,"comment_ctime":1663324280,"is_pvip":false,"replies":[{"id":134393,"content":"根据你提供的代码，在这种情况下，如果输入框的边框没有变成红色，可能是因为输入框的焦点没有被激活。输入框没有焦点时，执行 JavaScript 代码修改样式，可能会没有效果。\n\n因此，你可以尝试在执行 JavaScript 代码前，先点击一下输入框，使输入框获得焦点。可以使用 WebDriver 的 `click()` 方法来实现。例如：\n\n```\ninput_box = self.driver.find_element(By.ID, &#39;kw&#39;)\ninput_box.click()\n\njs = &#39;var q = document.getElementById(&quot;kw&quot;); q.style.border = &quot;2px solid red&quot;&#39;\nself.driver.execute_script(js)\n```\n\n这样，在执行 JavaScript 代码前，会先通过 `click()` 方法点击输入框，使其获得焦点，然后再执行 JavaScript 代码修改样式，就能够成功修改输入框的样式了。\n\n","user_name":"作者回复","user_name_real":"编辑","uid":1654315,"ctime":1677055096,"ip_address":"河北","comment_id":357517,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"js = &#39;var q = document.getElementById(&quot;kw&quot;); q.style.border = &quot;2px solid red&quot;&#39;\n        self.driver.execute_script(js)\n\n老师，为啥这个需要点击下屏幕。输入框的边框才会变成红色","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606254,"discussion_content":"根据你提供的代码，在这种情况下，如果输入框的边框没有变成红色，可能是因为输入框的焦点没有被激活。输入框没有焦点时，执行 JavaScript 代码修改样式，可能会没有效果。\n\n因此，你可以尝试在执行 JavaScript 代码前，先点击一下输入框，使输入框获得焦点。可以使用 WebDriver 的 `click()` 方法来实现。例如：\n\n```\ninput_box = self.driver.find_element(By.ID, &#39;kw&#39;)\ninput_box.click()\n\njs = &#39;var q = document.getElementById(&#34;kw&#34;); q.style.border = &#34;2px solid red&#34;&#39;\nself.driver.execute_script(js)\n```\n\n这样，在执行 JavaScript 代码前，会先通过 `click()` 方法点击输入框，使其获得焦点，然后再执行 JavaScript 代码修改样式，就能够成功修改输入框的样式了。\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677055096,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"河北","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3219448,"avatar":"https://static001.geekbang.org/account/avatar/00/31/1f/f8/75a54133.jpg","nickname":"JJ_RUNNING","note":"","ucode":"A231FA871F8949","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":651637,"discussion_content":"在js脚本最后加上q.blur()，将输入框焦点移除，边框颜色就变成修改后的样式了。\n&#34;var q = document.getElementById(&#39;kw&#39;); q.style.border=&#39;10px solid red&#39;; q.blur()&#34;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1727194054,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"湖北","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":336659,"user_name":"SONG_SNOW","can_delete":false,"product_type":"c3","uid":1474522,"ip_address":"","ucode":"EA1363D71B1286","user_header":"","comment_is_top":false,"comment_ctime":1646277501,"is_pvip":false,"replies":[{"id":125476,"content":"用js","user_name":"作者回复","user_name_real":"编辑","uid":1654315,"ctime":1651034780,"ip_address":"","comment_id":336659,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师，你好，请问一个页面多个滚动条怎么定位，滚动条没有ID，是div","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567968,"discussion_content":"用js","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651034780,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":336657,"user_name":"SONG_SNOW","can_delete":false,"product_type":"c3","uid":1474522,"ip_address":"","ucode":"EA1363D71B1286","user_header":"","comment_is_top":false,"comment_ctime":1646277360,"is_pvip":false,"replies":[{"id":125475,"content":"这种需要js","user_name":"作者回复","user_name_real":"编辑","uid":1654315,"ctime":1651034769,"ip_address":"","comment_id":336657,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师你好，请问一下，页面中有多个滚动条且没有Id怎么定位呢？我试了总是","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567967,"discussion_content":"这种需要js","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651034769,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":252630,"user_name":"YC","can_delete":false,"product_type":"c3","uid":1927405,"ip_address":"","ucode":"6198E227F626CD","user_header":"","comment_is_top":false,"comment_ctime":1602409489,"is_pvip":false,"replies":[{"id":92415,"content":"打开开发者工具调试一下 看看 是语法错误 还是兼容性问题","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1602544642,"ip_address":"","comment_id":252630,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"js = &#39;window.scrollTo(0, document.body.scrollHeight)&#39;\njs = &#39;var q=document.getElementById(&quot;kw&quot;); q.style.border=&quot;2px solid red&quot;&#39;\nwin 10， Chrome运行时，都没有执行呢","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506820,"discussion_content":"打开开发者工具调试一下 看看 是语法错误 还是兼容性问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602544642,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1716156,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/2f/bc/71e5dbbc.jpg","nickname":"测试菜鸟","note":"","ucode":"610650BDE3548C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":354811,"discussion_content":"我这边看的时候一开始输入框也没有变色，把鼠标从输入框上移开就变了，你试试。不选中输入框的时候会变色。","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1615344641,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244009,"user_name":"小璐","can_delete":false,"product_type":"c3","uid":2078893,"ip_address":"","ucode":"E6BB2734176850","user_header":"https://static001.geekbang.org/account/avatar/00/1f/b8/ad/99155035.jpg","comment_is_top":false,"comment_ctime":1598350650,"is_pvip":false,"replies":[{"id":89973,"content":"加上等待 试试","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1598508712,"ip_address":"","comment_id":244009,"utype":1}],"discussion_count":7,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"js = &#39;var q=document.getElementById(&quot;kw&quot;); q.style.border=&quot;2px solid red&quot;&#39;,为什么颜色显示不出来呢","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504451,"discussion_content":"加上等待 试试","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598508712,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1004119,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/57/af4e58e8.jpg","nickname":"行者无疆","note":"","ucode":"80F19373FCF82B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534336,"discussion_content":"因为打开页面鼠标就聚焦在输入框，边框就一直都是蓝色，鼠标在输入框外空白处单击一下，就会变成红色了","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1638167407,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1716156,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/2f/bc/71e5dbbc.jpg","nickname":"测试菜鸟","note":"","ucode":"610650BDE3548C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":354812,"discussion_content":"不要选中输入框试试","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615344720,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2066865,"avatar":"","nickname":"契凡","note":"","ucode":"FA8F82AD4D6BD3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333306,"discussion_content":"一样的问题 chrome 无法解析","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607498763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1080128,"avatar":"https://static001.geekbang.org/account/avatar/00/10/7b/40/0f4a2fc7.jpg","nickname":"Mason慢慢跑","note":"","ucode":"DC443EE964C9B0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306941,"discussion_content":"同上，Mac，颜色不变，也没有报错","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600423442,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2078227,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/b6/13/ec46a3c5.jpg","nickname":"花开花落","note":"","ucode":"AA53576D12B9AB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301687,"discussion_content":"我也是一样的问题，也sleep了几秒，还是不行","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598607582,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1675213,"avatar":"https://static001.geekbang.org/account/avatar/00/19/8f/cd/35eb4150.jpg","nickname":"万万","note":"","ucode":"CC8BE5FB3D50DC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301320,"discussion_content":"我也遇到了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598489772,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":237718,"user_name":"💋💋💋","can_delete":false,"product_type":"c3","uid":1787715,"ip_address":"","ucode":"1830A7008859C2","user_header":"https://static001.geekbang.org/account/avatar/00/1b/47/43/771e653b.jpg","comment_is_top":false,"comment_ctime":1595935156,"is_pvip":false,"replies":[{"id":87828,"content":"环境 还是 如果是环境 这样 sudo mv chromedriver &#47;usr&#47;local&#47;bin 把驱动放到这里就行","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1595943702,"ip_address":"","comment_id":237718,"utype":1}],"discussion_count":1,"race_medal":1,"score":2,"product_id":100055601,"comment_content":"老师，mac上怎么实现呀，我没找到其他的方法。 ","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502515,"discussion_content":"环境 还是 如果是环境 这样 sudo mv chromedriver /usr/local/bin 把驱动放到这里就行","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595943702,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}