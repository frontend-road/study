{"id":534688,"title":"16ï½œè§†é¢‘ï¼šåˆçº§ç¯‡å®æ“æ€»ç»“","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯Chronoã€‚</p><p>å­¦å®Œäº†å‰é¢çš„7èŠ‚æ–‡å­—+éŸ³é¢‘çš„è¯¾ç¨‹ä¹‹åï¼Œä»Šå¤©åˆæ˜¯ä¸€èŠ‚è§†é¢‘è¯¾ç¨‹ï¼Œå¯¹â€œåˆçº§ç¯‡â€é‡ŒKubernetesçŸ¥è¯†åšä¸€ä¸ªå›é¡¾ä¸æ€»ç»“ï¼ŒåŒæ ·è¿˜æ˜¯æ³¨é‡å®é™…æ“ä½œçš„æ¼”ç¤ºï¼Œè€Œä¸ä¼šè®²è§£ç†è®ºçŸ¥è¯†ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬ä¼šå¯åŠ¨æœ¬æœºç¯å¢ƒé‡Œçš„minikubeï¼Œç™»å½•è™šæ‹ŸèŠ‚ç‚¹çœ‹çœ‹apiserverã€etcdã€schedulerç­‰ç»„ä»¶ï¼Œç„¶åä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·kubectlæ“ä½œKubernetesï¼Œåˆ›å»ºPodã€Jobã€CronJobã€ConfigMapã€Secretç­‰APIå¯¹è±¡ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬è§†é¢‘ä¸Šè§ã€‚</p><hr><h3>ä¸€. minikubeç¯å¢ƒ</h3><p><video poster=\"https://static001.geekbang.org/resource/image/f9/82/f9dc1572049e052dbf7a6b7d60b39482.jpg\" preload=\"none\" controls=\"\"><source src=\"https://media001.geekbang.org/customerTrans/7e27d07d27d407ebcc195a0e78395f55/22d0d4d8-182403ae05f-0000-0000-01d-dbacd.mp4\" type=\"video/mp4\"><source src=\" https://media001.geekbang.org/d51c4ba4c0f6480a853aa0260ac96255/fd7f460dc9d14904998adf7b1f6fceb0-df367729a5aa180933814f46cd6ca103-sd.m3u8\" type=\"application/x-mpegURL\"></video></p><p>è§†é¢‘æ“ä½œè¦ç‚¹ï¼š</p><p>æˆ‘ä»¬ä»minikubeç¯å¢ƒå¼€å§‹ï¼Œå®‰è£…çš„è¿‡ç¨‹å°±ä¸æ¼”ç¤ºäº†ï¼Œæˆ‘å‡è®¾ä½ å·²ç»æŒ‰ç…§<a href=\"https://time.geekbang.org/column/article/529780\">ç¬¬9è®²</a>é‡Œçš„æ­¥éª¤æˆåŠŸä¸‹è½½äº†minikubeå’Œkubectlçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p><p>å…ˆçœ‹ä¸€ä¸‹minikubeçš„ç‰ˆæœ¬å·ï¼š</p><pre><code class=\"language-plain\">minikube version\n</code></pre><p>æ˜¾ç¤ºçš„æ˜¯å½“å‰çš„æœ€æ–°ç‰ˆæœ¬1.25.2ï¼Œå†çœ‹ä¸€ä¸‹å®ƒçš„çŠ¶æ€ï¼š</p><pre><code class=\"language-plain\">minikube status\n</code></pre><p>å¯ä»¥çœ‹åˆ°Kubernetesçš„ç»„ä»¶éƒ½æ²¡æœ‰å¯åŠ¨ï¼Œé›†ç¾¤å¤„äºåœæ­¢çŠ¶æ€ã€‚</p><p>ç°åœ¨è®©æˆ‘ä»¬ç”¨ <code>minikube start</code> å¯åŠ¨minikubeé›†ç¾¤ï¼š</p><pre><code class=\"language-plain\">minikube start --kubernetes-version=v1.23.3\n</code></pre><p>ç¨ç­‰ä¸€å°ä¼šï¼Œçœ‹çœ‹å®ƒæç¤ºé‡Œçš„è¡¨æƒ…ç¬¦å·ï¼Œä¸€ä¸ªæœ¬åœ°çš„å¾®å‹Kubernetesé›†ç¾¤å°±åˆ›å»ºå¥½äº†ã€‚ä»æç¤ºä¿¡æ¯é‡Œå¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªKubernetesé›†ç¾¤çš„ç‰ˆæœ¬æ˜¯v1.23.3ï¼Œè¿è¡Œåœ¨Docker 20.10.12ä¸Šã€‚</p><!-- [[[read_end]]] --><p>ç°åœ¨æˆ‘ä»¬å†çœ‹ä¸€ä¸‹minikubeçš„çŠ¶æ€ï¼š</p><pre><code class=\"language-plain\">minikube status\n</code></pre><p>å¯ä»¥çœ‹åˆ°Kubernetesçš„æ ¸å¿ƒç»„ä»¶kubeletã€apiserveréƒ½æ˜¯è¿è¡ŒçŠ¶æ€äº†ã€‚</p><p>å‘½ä»¤ <code>minikube node list</code> å¯ä»¥æŸ¥çœ‹è¿™ä¸ªå¾®å‹é›†ç¾¤çš„èŠ‚ç‚¹åˆ—è¡¨ï¼š</p><pre><code class=\"language-plain\">minikube node list\n</code></pre><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œminikubeåªä¼šåˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿™é‡Œæ˜¾ç¤ºå®ƒçš„IPåœ°å€æ˜¯â€œ192.168.49.2â€ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½ä»¤ <code>minikube ssh</code> ç›´æ¥ç™»å½•åˆ°è¿™ä¸ªèŠ‚ç‚¹ï¼Œæ˜¯è™šæ‹Ÿæœºé‡Œçš„ä¸€ä¸ªè™šæ‹Ÿæœºï¼Œåœ¨é‡Œé¢å¯ä»¥æ‰§è¡Œä»»æ„çš„Linuxæ“ä½œï¼š</p><pre><code class=\"language-bash\">uname -a  #æ˜¾ç¤ºæ˜¯Ubuntuæ“ä½œç³»ç»Ÿ\ndocker version #è¿™ä¸ªèŠ‚ç‚¹é‡Œä¹Ÿè·‘äº†ä¸€ä¸ªdockerï¼Œä½†å…¶å®æ˜¯å¤ç”¨äº†å®¿ä¸»æœºçš„docker\ndocker ps    #èƒ½å¤Ÿçœ‹åˆ°èŠ‚ç‚¹é‡Œä»¥å®¹å™¨å½¢å¼è¿è¡Œçš„Kubernetesè¿›ç¨‹ï¼Œæ¯”å¦‚pauseã€schedulerç­‰ç­‰\nexit\n</code></pre><p>çœ‹å®Œäº†minikubeé›†ç¾¤çš„çŠ¶æ€ï¼Œè®©æˆ‘ä»¬ç”¨kubectlæ¥æ“ä½œKubernetesï¼Œé¦–å…ˆæ˜¯çœ‹ç‰ˆæœ¬å·ï¼š</p><pre><code class=\"language-plain\">kubectl version\n</code></pre><p>æ˜¾ç¤ºç‰ˆæœ¬æ˜¯1.23.3ã€‚ç”¨ <code>kubectl get pod</code> çœ‹çœ‹å½“å‰é›†ç¾¤é‡Œè¿è¡Œçš„è¿è¡Œåº”ç”¨ï¼Œä¼šå‘ç°æ˜¯ç©ºçš„ã€‚</p><p>è®©æˆ‘ä»¬ç”¨ <code>run</code> å‘½ä»¤è¿è¡Œä¸€ä¸ªNginx Podï¼š</p><pre><code class=\"language-plain\">kubectl run ngx --image=nginx:alpine\n</code></pre><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å†æŸ¥çœ‹Podï¼Œ <code>kubectl get pod</code> å°±ä¼šçœ‹åˆ°æœ‰ä¸€ä¸ªPodè¿è¡Œäº†ã€‚</p><p>è¿™ä¸ªNginx podå±äºdefaultåå­—ç©ºé—´ï¼Œè€Œapiserverç­‰æ ¸å¿ƒç»„ä»¶æ˜¯åœ¨kube-systemåå­—ç©ºé—´ï¼Œä½ å¯ä»¥ç”¨ <code>-n</code> å‚æ•°æŸ¥çœ‹åœ¨kube-systemé‡Œè¿è¡Œçš„Podï¼š</p><pre><code class=\"language-plain\">kubectl get pod -n kube-system\n</code></pre><p>å¯ä»¥çœ‹åˆ°apiserverã€etcdã€schedulerã€controller managerã€corednsã€kube-proxyç­‰ç»„ä»¶éƒ½æ˜¯ä»¥Podçš„å½¢å¼åœ¨è¿™é‡Œè¿è¡Œã€‚</p><h3>äºŒ. ç”¨kubectlæ“ä½œAPIå¯¹è±¡</h3><p><video poster=\"https://static001.geekbang.org/resource/image/54/36/54b52afb862a759b3ab4a39849f83e36.jpg\" preload=\"none\" controls=\"\"><source src=\"https://media001.geekbang.org/customerTrans/7e27d07d27d407ebcc195a0e78395f55/f620f7b-181b8be45bb-0000-0000-01d-dbacd.mp4\" type=\"video/mp4\"><source src=\" https://media001.geekbang.org/5ecce2893a7b475fab32e3a23006a487/231855bd53144b16b576cebea6e18207-dfe9193d7796080a7458c2209015a6ec-sd.m3u8\" type=\"application/x-mpegURL\"></video></p><p>è§†é¢‘æ“ä½œè¦ç‚¹ï¼š</p><p>ä¸‹é¢æˆ‘ä»¬æŠŠæ³¨æ„åŠ›é›†ä¸­åœ¨kubectlæ“ä½œKubernetes APIå¯¹è±¡ä¸Šã€‚</p><p>å…ˆæ¥æŸ¥çœ‹å½“å‰Kubernetesç‰ˆæœ¬æ”¯æŒçš„æ‰€æœ‰apiå¯¹è±¡ï¼Œå‘½ä»¤æ˜¯ <code>kubectl api-resources</code>ï¼š</p><pre><code class=\"language-plain\">kubectl api-resources\n</code></pre><p>å®ƒçš„è¾“å‡ºä¿¡æ¯å¾ˆå¤šï¼Œä½ å¯ä»¥çœ‹åˆ°Podçš„ç®€å†™æ˜¯poã€api versionæ˜¯v1ã€CronJobçš„ç®€å†™æ˜¯cjã€api versionæ˜¯batch/v1ï¼Œè¿™äº›ä¿¡æ¯åœ¨æˆ‘ä»¬ç¼–å†™YAMLæè¿°æ–‡ä»¶çš„æ—¶å€™éå¸¸æœ‰ç”¨ã€‚</p><p>å†æ¥çœ‹å¦ä¸€ä¸ªå¸¸ç”¨çš„å‘½ä»¤ <code>kubectl explain</code>ï¼Œå®ƒèƒ½å¤Ÿç»™å‡ºapiå¯¹è±¡å­—æ®µçš„è¯¦ç»†ä¿¡æ¯ï¼Œæ¯”å¦‚æŸ¥çœ‹Podï¼š</p><pre><code class=\"language-plain\">kubectl explain pod\nkubectl explain pod.metadata\nkubectl explain pod.spec\nkubectl explain pod.spec.containers\n</code></pre><p>æœ‰äº†è¿™ä¸ªéšæ‰‹å¯å¾—çš„æ–‡æ¡£ï¼Œæˆ‘ä»¬åœ¨ç¼–å†™YAMLæ–‡ä»¶çš„æ—¶å€™å°±ä¸ä¼šä¸çŸ¥æ‰€æªäº†ã€‚</p><p>åˆ›å»ºYAMLæ ·æ¿è¦ç”¨åˆ°ä¸¤ä¸ªç‰¹æ®Šå‚æ•°â€œ--dry-run=clientâ€å’Œâ€œ-o yamlâ€ï¼Œæˆ‘æŠŠå®ƒå®šä¹‰æˆä¸€ä¸ªç¯å¢ƒå˜é‡ï¼š</p><pre><code class=\"language-plain\">export out=\"--dry-run=client -o yaml\"\n</code></pre><p>ç„¶åæˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ªPodçš„YAMLï¼š</p><pre><code class=\"language-plain\">kubectl run ngx --image=nginx:alpine $out &gt; pod.yml\n</code></pre><p>ç”¨viç¼–è¾‘è¿™ä¸ªæ–‡ä»¶ï¼Œåˆ é™¤ä¸éœ€è¦çš„å­—æ®µï¼Œä¸€ä¸ªYAMLæè¿°æ–‡ä»¶å½¢å¼çš„APIå¯¹è±¡å°±åˆ›å»ºå¥½äº†ã€‚</p><h3>ä¸‰. Podå¯¹è±¡</h3><p><video poster=\"https://static001.geekbang.org/resource/image/c5/11/c5f98ac2230ca607f779a6596cd5b011.jpg\" preload=\"none\" controls=\"\"><source src=\"https://media001.geekbang.org/customerTrans/7e27d07d27d407ebcc195a0e78395f55/4cb608fe-181b8be430b-0000-0000-01d-dbacd.mp4\" type=\"video/mp4\"><source src=\" https://media001.geekbang.org/e735dc9e459b41a0909da5159e215913/68ed2a70a377430ebdb6837d09b9cb26-f205ce729b35fa8d25ef857e7012159a-sd.m3u8\" type=\"application/x-mpegURL\"></video></p><p>è§†é¢‘æ“ä½œè¦ç‚¹ï¼š</p><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå·²ç»ç¼–è¾‘å¥½çš„Nginx podå¯¹è±¡ï¼Œé‡Œé¢å®šä¹‰äº†åå­—æ˜¯ngx-podï¼Œæœ‰ä¸¤ä¸ªæ ‡ç­¾envå’Œownerï¼Œspecé‡Œçš„containerså®šä¹‰äº†Podé‡Œåªæœ‰ä¸€ä¸ªå®¹å™¨ï¼Œé•œåƒæ˜¯nginx:alpineï¼Œå¯¹å¤–çš„ç«¯å£æ˜¯80ã€‚</p><p>ç°åœ¨å°±å¯ä»¥ä½¿ç”¨å‘½ä»¤ <code>kubectl apply</code> åˆ›å»ºè¿™ä¸ªPodï¼Œå†ç”¨ <code>kubectl get pod</code> æ¥æŸ¥çœ‹çŠ¶æ€ï¼š</p><pre><code class=\"language-plain\">kubectl apply -f ngx-pod.yml\nkubectl get pod\n</code></pre><p>å‘½ä»¤ <code>kubectl logs</code> ä¼šè¾“å‡ºNginxçš„è¿è¡Œæ—¥å¿—ï¼š</p><pre><code class=\"language-plain\">kubectl logs ngx-pod\n</code></pre><p>æˆ‘ä»¬è¿˜å¯ä»¥ç”¨ <code>kubectl exec</code> è¿›å…¥Podé‡Œçš„å®¹å™¨ï¼Œæ³¨æ„è¦æœ‰ <code>--</code>ï¼š</p><pre><code class=\"language-plain\">kubectl exec -it ngx-pod -- sh\nnginx -v\nuname -a\nexit\n</code></pre><p>æœ€åæˆ‘ä»¬ç”¨ <code>kubectl delete</code> åˆ é™¤è¿™ä¸ªPodï¼š</p><pre><code class=\"language-plain\">kubectl delete -f ngx-pod.yml\n</code></pre><h3>å››. ç¦»çº¿ä¸šåŠ¡å¯¹è±¡Jobã€CronJob</h3><p><video poster=\"https://static001.geekbang.org/resource/image/86/40/86834deaa8f1259ca65da6cdc5867340.jpg\" preload=\"none\" controls=\"\"><source src=\"https://media001.geekbang.org/customerTrans/7e27d07d27d407ebcc195a0e78395f55/1d3d2044-181b8be3fe0-0000-0000-01d-dbacd.mp4\" type=\"video/mp4\"><source src=\" https://media001.geekbang.org/d17275ca36d54b2d873b8343e1a86622/0954d47bb02d492d9023512a5cddab89-9ea5ba81a6f03f1503c458c01849978c-sd.m3u8\" type=\"application/x-mpegURL\"></video></p><p>è§†é¢‘æ“ä½œè¦ç‚¹ï¼š</p><p>çœ‹å®Œäº†Podçš„åŸºæœ¬æ“ä½œä¹‹åï¼Œæˆ‘ä»¬æ¥çœ‹ç¦»çº¿ä¸šåŠ¡çš„å¯¹è±¡Jobå’ŒCronJobã€‚</p><p>é¦–å…ˆè¦ç”¨ <code>kubectl create</code> åˆ›å»ºä¸€ä¸ªJobæ ·æ¿æ–‡ä»¶ï¼š</p><pre><code class=\"language-plain\">kubectl create job echo-job --image=busybox $out\n</code></pre><p>æŠŠå®ƒä¿å­˜ç¼–è¾‘ä¹‹åï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªJobå¯¹è±¡ï¼Œç”¨viçœ‹ä¸€ä¸‹ã€‚è¿™ä¸ªJobéå¸¸ç®€å•ï¼Œæ‰§è¡Œechoå‘½ä»¤ï¼Œè¾“å‡ºhello worldã€‚æ³¨æ„å®ƒçš„restartPolicyæ˜¯OnFailureï¼Œè¡¨ç¤ºå¤±è´¥åè¦åŸåœ°é‡å¯å®¹å™¨ã€‚</p><p>ç°åœ¨æ¥åˆ›å»ºJobå¯¹è±¡ï¼Œç”¨çš„å‘½ä»¤è¿˜æ˜¯ <code>kubectl apply</code>ï¼š</p><pre><code class=\"language-plain\">kubectl apply -f job.yml\n</code></pre><p>åˆ›å»ºä¹‹åç”¨ <code>kubectl get job</code>ã€<code>kubectl get pod</code> æ¥åˆ†åˆ«æŸ¥çœ‹Jobå’ŒPodçš„çŠ¶æ€ï¼Œä½¿ç”¨å‘½ä»¤ <code>kubectl logs</code> æ¥è·å–Podçš„è¿è¡Œç»“æœï¼š</p><pre><code class=\"language-plain\">kubectl get job\nkubectl get pod\nkubectl logs echo-job-l52l7\n</code></pre><p>CronJobåŒæ ·ä¹Ÿå¯ä»¥è‡ªåŠ¨ç”Ÿæˆæ ·æ¿æ–‡ä»¶ï¼š</p><pre><code class=\"language-plain\">kubectl create cj echo-cj --image=busybox --schedule=\"\" $out\nvi cronjob.yml\n</code></pre><p>CronJobå¯¹è±¡é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œå®ƒä½¿ç”¨jobTemplateåˆå®šä¹‰äº†ä¸€ä¸ªJobï¼Œç„¶ååœ¨å­—æ®µscheduleé‡Œä½¿ç”¨cronè¯­æ³•å®šä¹‰äº†å®šæ—¶è¿è¡Œçš„è§„åˆ™ï¼Œè¿™é‡Œå°±æ˜¯æ¯åˆ†é’Ÿè¿è¡Œä¸€æ¬¡ã€‚</p><p>CronJobçš„ç”¨æ³•å’ŒJobå‡ ä¹æ˜¯ä¸€æ ·çš„ï¼Œç”¨ <code>apply</code> å‘½ä»¤åˆ›å»ºåå°±å¯ä»¥ç”¨getæ¥æŸ¥çœ‹ä½œä¸šçš„è¿è¡ŒçŠ¶æ€ï¼š</p><pre><code class=\"language-plain\">kubectl apply -f cronjob.yml\nkubectl get cj\nkubectl get pod\n</code></pre><p>æœ€åè®©æˆ‘ä»¬ç”¨ <code>delete</code> å‘½ä»¤åˆ é™¤è¿™ä¸¤ä¸ªAPIå¯¹è±¡ï¼š</p><pre><code class=\"language-plain\">kubectl delete -f job.yml\nkubectl delete -f cronjob.yml\n</code></pre><h3>äº”. é…ç½®ä¿¡æ¯å¯¹è±¡ConfigMapå’ŒSecret</h3><p><video poster=\"https://static001.geekbang.org/resource/image/90/30/9015b2f688128be127419a9f1575f330.jpg\" preload=\"none\" controls=\"\"><source src=\"https://media001.geekbang.org/customerTrans/7e27d07d27d407ebcc195a0e78395f55/5d50af62-182403adbf9-0000-0000-01d-dbacd.mp4\" type=\"video/mp4\"><source src=\" https://media001.geekbang.org/0125c506fb01492db04ac984a89c54a8/6851bc79d22644b28c38a9f4e387ca54-b2612598497ab5a2b4602c985bb2fe7a-sd.m3u8\" type=\"application/x-mpegURL\"></video></p><p>è§†é¢‘æ“ä½œè¦ç‚¹ï¼š</p><p>ä¸‹é¢æˆ‘æ¥æ¼”ç¤ºKubernetesé‡Œçš„é…ç½®ä¿¡æ¯å¯¹è±¡ConfigMapå’Œsecretã€‚</p><p>è¿˜æ˜¯è€åŠæ³•ï¼Œå…ˆç”¨ <code>kubectl create</code> åˆ›å»ºConfigMapçš„æ ·æ¿æ–‡ä»¶ï¼Œä¸è¿‡è¦å‘½ä»¤åé¢å¤šåŠ ä¸€ä¸ªå‚æ•° <code>--from-literal</code> ï¼Œä»å­—é¢å€¼ç”Ÿæˆä¸€äº›æ•°æ®ï¼š</p><pre><code class=\"language-plain\">kubectl create cm info --from-literal=k=v $out\n</code></pre><p>Secretä¹Ÿæ˜¯åŒæ ·çš„åˆ›å»ºæ–¹å¼ï¼Œæ³¨æ„å‘½ä»¤å½¢å¼ä¸ConfigMapç•¥æœ‰ä¸åŒï¼Œè¦ç”¨genericè¡¨ç¤ºä¸€èˆ¬çš„æœºå¯†ä¿¡æ¯ï¼š</p><pre><code class=\"language-plain\">kubectl create secret generic user --from-literal=name=root $out\n</code></pre><p>æˆ‘ä»¬æ¥çœ‹çœ‹å·²ç»ç¼–è¾‘å¥½çš„YAMLæ–‡ä»¶:</p><pre><code class=\"language-plain\">vi cm.yml\n</code></pre><p>è¿™é‡Œå®šä¹‰äº†4ä¸ªé…ç½®é¡¹ï¼Œæ³¨æ„ConfigMapè¦æ±‚å¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥æœ€å¥½ç”¨å¼•å·å¼•èµ·æ¥ï¼Œé¿å…è§£é‡Šæˆæ•°å­—å¯¼è‡´é”™è¯¯ã€‚</p><pre><code class=\"language-plain\">vi secret.yml\n</code></pre><p>Secreté‡Œå®šä¹‰äº†3ä¸ªé…ç½®é¡¹ï¼Œç”±äºåšäº†base64ç¼–ç ï¼Œä¸èƒ½ç›´æ¥çœ‹åˆ°åŸå€¼ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥åœ¨å‘½ä»¤è¡Œé‡Œç”¨å·¥å…·base64 -dè§£ç ï¼Œæ¯”å¦‚çœ‹ç”¨æˆ·åï¼š</p><pre><code class=\"language-plain\">echo cm9vdA== | base64 -d\n</code></pre><p>ç°åœ¨è®©æˆ‘ä»¬åˆ›å»ºè¿™ä¸¤ä¸ªå¯¹è±¡ï¼š</p><pre><code class=\"language-plain\">kubectl apply&nbsp;-f cm.yml\nkubectl apply  -f secret.yml\n</code></pre><p>ç„¶åæŸ¥çœ‹è¿™äº›å¯¹è±¡çš„çŠ¶æ€ï¼š</p><pre><code class=\"language-plain\">kubectl get cm\nkubectl describe cm info\n</code></pre><p>ConfigMapæ˜¯æ˜æ–‡æ˜¾ç¤ºï¼š</p><pre><code class=\"language-plain\">kubectl get secret\nkubectl describe secret user\n</code></pre><p>è€ŒSecretçš„ç±»å‹æ˜¯Opaqueï¼Œä¸é€æ˜çš„ï¼Œä¸èƒ½ç›´æ¥çœ‹åˆ°ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬æŠŠè¿™äº›é…ç½®ä¿¡æ¯ä»¥å­˜å‚¨å·çš„å½¢å¼æ³¨å…¥Podï¼Œéœ€è¦åœ¨Podé‡ŒåŠ å…¥â€œ<strong>volumes</strong>â€å’Œâ€œ<strong>volumeMounts</strong>â€å­—æ®µï¼š</p><pre><code class=\"language-plain\">vi vol-pod.yml\n</code></pre><p>åœ¨è¿™ä»½YAMLé‡Œï¼Œæˆ‘ä¸ºConfigMapå’ŒSecretå®šä¹‰äº†ä¸¤ä¸ªvolumeï¼Œåˆ†åˆ«æ˜¯cm-volå’Œsec-volï¼Œç„¶ååœ¨volumeMountsé‡ŒæŠŠå®ƒä»¬æŒ‚è½½åˆ°äº†tmpç›®å½•ã€‚</p><p>ç”¨ <code>kubectl apply</code> å‘½ä»¤åˆ›å»ºä¹‹åï¼Œæˆ‘ä»¬è¿˜æ˜¯ç”¨ <code>kubectl exec</code> è¿›å…¥Podï¼Œçœ‹çœ‹é…ç½®ä¿¡æ¯è¢«åŠ è½½æˆäº†ä»€ä¹ˆå½¢å¼ï¼š</p><pre><code class=\"language-bash\">kubectl apply -f vol-pod.yml\nkubectl get pod\nkubectl exec -it vol-pod -- sh\n\ncd /tmp\nls              #åŠ è½½æˆä¸¤ä¸ªç›®å½•\ncd cm-items/\ncat greeting\ncd ..\ncd sec-items/\ncat pwd        #å·²ç»è¢«base64è§£ç \n</code></pre><h3>å…­. åœ¨Kubernetesé‡Œæ­å»ºWordPress</h3><p><video poster=\"https://static001.geekbang.org/resource/image/fc/a7/fc2ba132b807e8f4a5412c148b9545a7.jpg\" preload=\"none\" controls=\"\"><source src=\"https://media001.geekbang.org/customerTrans/7e27d07d27d407ebcc195a0e78395f55/2c632123-181b8be36f6-0000-0000-01d-dbacd.mp4\" type=\"video/mp4\"><source src=\" https://media001.geekbang.org/16a4e076eb6d4597bd087f1f1432aa28/0bee8924d19d4b4fb5009bbf37d370d8-1b4720df19676267e3d7bc65e8decfce-sd.m3u8\" type=\"application/x-mpegURL\"></video></p><p>è§†é¢‘æ“ä½œè¦ç‚¹ï¼š</p><p>æœ€åæˆ‘ä»¬åœ¨Kubernetesé‡Œæ­å»ºWordPressï¼Œè¿™äº›YAMLæ–‡ä»¶éƒ½å·²ç»å‡†å¤‡å¥½äº†ï¼Œåªéœ€è¦é€ä¸ªç”¨ <code>apply</code> å‘½ä»¤åˆ›å»ºå°±å¯ä»¥ã€‚</p><p>é¦–å…ˆæ˜¯MariaDBæ•°æ®åº“ï¼š</p><pre><code class=\"language-plain\">kubectl apply -f mariadb-pod.yml\nkubectl get pod -o wide\n</code></pre><p>éœ€è¦çœ‹å®ƒçš„IPåœ°å€ï¼Œè¿™é‡Œæ˜¯172.17.0.ï¼Ÿï¼Œç„¶åæˆ‘ä»¬ä¿®æ”¹WordPress YAMLï¼Œç¯å¢ƒå˜é‡hostæ”¹æˆMariaDBçš„åœ°å€ï¼Œç„¶åå†åˆ›å»ºWordPress Podï¼š</p><pre><code class=\"language-plain\">kubectl apply -f wp-pod.yml\nkubectl get pod -o wide\n</code></pre><p>ç°åœ¨è¿™ä¸¤ä¸ªPodéƒ½å·²ç»æ­£å¸¸è¿è¡Œäº†ï¼Œæˆ‘ä»¬éœ€è¦æŠŠWordPressçš„ç«¯å£æš´éœ²å‡ºæ¥ï¼Œç”¨çš„æ˜¯ <code>kubectl port-forward</code> å‘½ä»¤ï¼š</p><pre><code class=\"language-plain\">kubectl port-forward wp-pod 8080:80 &amp;\n</code></pre><p>ç„¶åæˆ‘ä»¬ç”¨Dockerè¿è¡ŒNginxå®¹å™¨ï¼Œä»£ç†è¿™ä¸ªç«¯å£ï¼š</p><pre><code class=\"language-plain\">./wp_proxy.sh\ndocker ps\n</code></pre><p>ç°åœ¨æˆ‘ä»¬æ‰“å¼€Macä¸Šçš„Safariæµè§ˆå™¨ï¼Œè¾“å…¥è™šæ‹Ÿæœºçš„IPåœ°å€â€œ<a href=\"http://192.168.10.208\">http://192.168.10.208</a>â€ï¼Œå°±å¯ä»¥çœ‹åˆ°WordPressçš„å®‰è£…ç•Œé¢äº†ã€‚</p><h3>è¯¾ä¸‹ä½œä¸š</h3><p>ä»Šå¤©æ˜¯åŠ¨æ‰‹æ“ä½œè¯¾ï¼Œè®°å¾—è®©è‡ªå·±å®é™…ä¸Šæ‰‹æ“ä½œä¸€éï¼Œæ¯•ç«Ÿçœ‹ä¸€éå’Œå†™ä¸€éå­¦ä¹ æ•ˆæœå®Œå…¨ä¸åŒå“¦ã€‚</p><p>æ¬¢è¿åˆ†äº«è‡ªå·±çš„å­¦ä¹ ä½“éªŒå’Œç–‘é—®ï¼Œåœ¨ç•™è¨€åŒºå‚ä¸è®¨è®ºã€‚æˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ã€‚</p>","neighbors":{"left":{"article_title":"15ï½œå®æˆ˜æ¼”ç»ƒï¼šç©è½¬Kubernetesï¼ˆ1ï¼‰","id":534644},"right":{"article_title":"17ï½œæ›´çœŸå®çš„äº‘åŸç”Ÿï¼šå®é™…æ­å»ºå¤šèŠ‚ç‚¹çš„Kubernetesé›†ç¾¤","id":534762}},"comments":[{"had_liked":false,"id":353028,"user_name":"SuperSu","can_delete":false,"product_type":"c1","uid":1068326,"ip_address":"é™•è¥¿","ucode":"A3F7AF23D193AF","user_header":"https://static001.geekbang.org/account/avatar/00/10/4d/26/44095eba.jpg","comment_is_top":false,"comment_ctime":1659082009,"is_pvip":false,"replies":[{"id":128378,"content":"good ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1659134563,"ip_address":"é™•è¥¿","comment_id":353028,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"ä»“åº“åœ°å€ï¼šhttps:&#47;&#47;github.com&#47;chronolaw&#47;k8s_study","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582004,"discussion_content":"good ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659134563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é™•è¥¿","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360234,"user_name":"ç¾å¦™çš„ä»£ç ","can_delete":false,"product_type":"c1","uid":1111985,"ip_address":"ä¸Šæµ·","ucode":"9DADD72C193296","user_header":"https://static001.geekbang.org/account/avatar/00/10/f7/b1/982ea185.jpg","comment_is_top":false,"comment_ctime":1666326770,"is_pvip":true,"replies":[{"id":131029,"content":"é€æ­¥å®ç°Kubernetesç¯å¢ƒè¿è¡Œï¼Œåé¢ä¼šç”¨Ingress Controllerã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1666339325,"ip_address":"ä¸Šæµ·","comment_id":360234,"utype":1}],"discussion_count":1,"race_medal":1,"score":2,"product_id":100114501,"comment_content":"nginx ä»£ç†8080æ€ä¹ˆä¸ç”¨k8sè·‘ï¼Œ æ˜¯å› ä¸ºdocker  ç½‘ç»œhostæ¨¡å‹æ–¹ä¾¿å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591172,"discussion_content":"é€æ­¥å®ç°Kubernetesç¯å¢ƒè¿è¡Œï¼Œåé¢ä¼šç”¨Ingress Controllerã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1666339325,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372350,"user_name":"æ°é¥­å“’","can_delete":false,"product_type":"c1","uid":1014023,"ip_address":"ä¸Šæµ·","ucode":"0395069A050057","user_header":"https://static001.geekbang.org/account/avatar/00/0f/79/07/2f418316.jpg","comment_is_top":false,"comment_ctime":1681011677,"is_pvip":false,"replies":[{"id":135913,"content":"GitHubä¸Šæœ‰ï¼Œåœ¨è¯¾å‰å‡†å¤‡é‡Œæœ‰åœ°å€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1681085129,"ip_address":"åŒ—äº¬","comment_id":372350,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"mariadb-pod.ymlæœ‰äººå¯ä»¥ç»™è¿™å‡ ä¸ªyamlçš„æ–‡ä»¶ç ï¼Œè°¢è°¢å¤§ä½¬å¤ªéš¾äº†","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613003,"discussion_content":"GitHubä¸Šæœ‰ï¼Œåœ¨è¯¾å‰å‡†å¤‡é‡Œæœ‰åœ°å€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681085129,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357922,"user_name":"vivi","can_delete":false,"product_type":"c1","uid":2710540,"ip_address":"åŒ—äº¬","ucode":"C9489CDCC37263","user_header":"https://static001.geekbang.org/account/avatar/00/29/5c/0c/e504ebfe.jpg","comment_is_top":false,"comment_ctime":1663747911,"is_pvip":false,"replies":[{"id":130252,"content":"å¥½åƒæœ‰ä¸å°‘åŒå­¦é‡åˆ°ç±»ä¼¼çš„é—®é¢˜ï¼Œåº”è¯¥æ˜¯shellå¤„ç†å˜é‡çš„è¡Œä¸ºä¸åŒï¼Œå¯ä»¥è¯•ç€æ”¹æˆbashï¼Œæˆ–è€…æ¢ä¸€ä¸‹å½¢å¼ï¼Œæ¯”å¦‚export out=&quot;--dry-run=&#39;client&#39; -o yaml&quot;","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1663754786,"ip_address":"åŒ—äº¬","comment_id":357922,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"export out=&quot;--dry-run=client -o yaml&quot;\n\nè¿™ä¸ªä¼šæŠ¥é”™ï¼šerror: Invalid dry-run value (client -o yaml). Must be &quot;none&quot;, &quot;server&quot;, or &quot;client&quot;.","like_count":1,"discussions":[{"author":{"id":2089387,"avatar":"http://thirdwx.qlogo.cn/mmopen/KFgDEHIEpnSCx7ia62ckQ2JdXMT33lCibiaoFVUrDgJrf1S8g0pfwKdUU8etmeVUADPsibFE7S77r8qQX87UKvPKEsXia5nQua9Xib/132","nickname":"xxrl","note":"","ucode":"120D1F54C8C3D8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590629,"discussion_content":"æ¢æˆ -o yaml --dry-run=client åº”è¯¥ä¹Ÿå¯ä»¥","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1665932868,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588426,"discussion_content":"å¥½åƒæœ‰ä¸å°‘åŒå­¦é‡åˆ°ç±»ä¼¼çš„é—®é¢˜ï¼Œåº”è¯¥æ˜¯shellå¤„ç†å˜é‡çš„è¡Œä¸ºä¸åŒï¼Œå¯ä»¥è¯•ç€æ”¹æˆbashï¼Œæˆ–è€…æ¢ä¸€ä¸‹å½¢å¼ï¼Œæ¯”å¦‚export out=&#34;--dry-run=&#39;client&#39; -o yaml&#34;","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1663754786,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2057406,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/64/be/546665e3.jpg","nickname":"å¿ƒéšç¼˜","note":"","ucode":"F7F5C49EA80E03","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":640862,"discussion_content":"æ”¹æˆ export out=&#39;--dry-run=client -o yaml&#39;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1711950319,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3183263,"avatar":"https://static001.geekbang.org/account/avatar/00/30/92/9f/d5255fe8.jpg","nickname":"snake","note":"","ucode":"0C7398D3A68119","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596271,"discussion_content":"è·ŸLinuxç‰ˆæœ¬æœ‰å…³å—ï¼Œcentos7å¯ä»¥ç›´æ¥è¿è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670836269,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353363,"user_name":"èŠ±èŠ±å¤§è„¸çŒ«","can_delete":false,"product_type":"c1","uid":1117318,"ip_address":"åŒ—äº¬","ucode":"8ABDB3F7F4FB0F","user_header":"https://static001.geekbang.org/account/avatar/00/11/0c/86/8e52afb8.jpg","comment_is_top":false,"comment_ctime":1659405419,"is_pvip":true,"replies":[{"id":128477,"content":"good","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1659421164,"ip_address":"åŒ—äº¬","comment_id":353363,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"å¯åŠ¨dashboardçš„æ—¶å€™ï¼Œå‡ºç°ï¼šExiting due to HOST_KUBECTL_PROXY: proxy start: fork&#47;exec &#47;usr&#47;local&#47;bin&#47;kubectl: exec format errorï¼Œé€šè¿‡å®˜æ–¹çš„issueï¼ˆhttps:&#47;&#47;github.com&#47;kubernetes&#47;minikube&#47;issues&#47;5256ï¼‰è§£å†³å¤„ç†","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582390,"discussion_content":"good","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659421164,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353273,"user_name":"Geek_7e25fd","can_delete":false,"product_type":"c1","uid":3021787,"ip_address":"åŒ—äº¬","ucode":"A730520B1512C1","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/P5EIPG3R01kEcsSSm0UZlyysg3qak8qWQXlwKKIoCkdxKtyorxD6h4S7bVvNNBM9icynCGvZO0bA5jGNgy3oBiag/132","comment_is_top":false,"comment_ctime":1659325730,"is_pvip":false,"replies":[{"id":128435,"content":"æ¢ä¸€ä¸ªå¥½ç‚¹çš„ç½‘ç»œå§ï¼Œæˆ–è€…æå‰ç”¨docker pullæ‹‰ä¸‹æ¥ï¼Œæ²¡åˆ«çš„å¥½åŠæ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1659336103,"ip_address":"åŒ—äº¬","comment_id":353273,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"æˆ‘åœ¨å¯åŠ¨minikubeé›†ç¾¤æ—¶ï¼Œå¡åœ¨äº†pulling base image,è¿™ä¸ªè¯¥å¦‚ä½•è§£å†³å‘€ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582247,"discussion_content":"æ¢ä¸€ä¸ªå¥½ç‚¹çš„ç½‘ç»œå§ï¼Œæˆ–è€…æå‰ç”¨docker pullæ‹‰ä¸‹æ¥ï¼Œæ²¡åˆ«çš„å¥½åŠæ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659336103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353007,"user_name":"Geek_f09d5e","can_delete":false,"product_type":"c1","uid":1816369,"ip_address":"é™•è¥¿","ucode":"0EB2DF15BAB6AD","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/H8NxrljQXlibw5tznwNYgqp9WSJicDIB8Bn9MygzFD0jn6ycBfkPDnDEcoEbuh2C3N6fCSAlvWV9wuA5KFa5yMuQ/132","comment_is_top":false,"comment_ctime":1659075364,"is_pvip":false,"replies":[{"id":128352,"content":"å¯å‚è€ƒGitHubä»“åº“ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1659077522,"ip_address":"é™•è¥¿","comment_id":353007,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"wp_proxy.sh æ–‡ä»¶å†…å®¹æ˜¯ä»€ä¹ˆ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581934,"discussion_content":"å¯å‚è€ƒGitHubä»“åº“ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659077522,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é™•è¥¿","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1068326,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4d/26/44095eba.jpg","nickname":"SuperSu","note":"","ucode":"A3F7AF23D193AF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581949,"discussion_content":"ä»“åº“åœ°å€æ˜¯ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659081723,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é™•è¥¿","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352737,"user_name":"å¼ ä»ï¼ˆä¿¡æ¯ä¸­å¿ƒï¼‰","can_delete":false,"product_type":"c1","uid":2845762,"ip_address":"","ucode":"14E9A525232E05","user_header":"","comment_is_top":false,"comment_ctime":1658904267,"is_pvip":false,"replies":[{"id":128278,"content":"å­¦ä¹ çš„äº‹æƒ…æ€¥ä¸å¾—","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1658911136,"ip_address":"","comment_id":352737,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"éƒ½å¥½ï¼Œå°±å«Œå¼ƒå¤ªæ…¢äº†ï¼ˆæŒ‡çš„äººæå®¢ï¼Œä¸æ˜¯è€å¸ˆï¼‰","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581663,"discussion_content":"å­¦ä¹ çš„äº‹æƒ…æ€¥ä¸å¾—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658911136,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391297,"user_name":"Geek_515a78","can_delete":false,"product_type":"c1","uid":3668233,"ip_address":"ä¸Šæµ·","ucode":"5FD39D35662D46","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/oqsRehqvt95V3jUACiaS9FhVunlWr8j3vY6VSartRU1TFQPxS106My9ySfYgOymwM2EF6SNNho3DIIJHtAjo6uw/132","comment_is_top":false,"comment_ctime":1717902619,"is_pvip":false,"replies":[{"id":142325,"content":"è¯•è¯•ç§‘å­¦ä¸Šç½‘ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1718071107,"ip_address":"ä¸Šæµ·","comment_id":391297,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"kubectl apply -f mariadb-pod.ymlåï¼Œæˆ‘æ‹‰ä¸èµ·æ¥è¿™ä¸ªå®¹å™¨ï¼Œæ˜¾ç¤ºä¸‹è½½å¤±è´¥ï¼Œæˆ‘æ˜¯ç”¨githubä¸Šé¢çš„ymlæ–‡ä»¶","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646476,"discussion_content":"è¯•è¯•ç§‘å­¦ä¸Šç½‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1718071107,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":1,"child_discussions":[{"author":{"id":3668233,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/oqsRehqvt95V3jUACiaS9FhVunlWr8j3vY6VSartRU1TFQPxS106My9ySfYgOymwM2EF6SNNho3DIIJHtAjo6uw/132","nickname":"Geek_515a78","note":"","ucode":"5FD39D35662D46","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":646479,"discussion_content":"æˆ‘ç§‘å­¦ä¸Šç½‘äº†ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1718074415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":646476,"ip_address":"ä¸Šæµ·","group_id":0},"score":646479,"extra":""}]}]},{"had_liked":false,"id":388772,"user_name":"Geek_07ead6","can_delete":false,"product_type":"c1","uid":1714992,"ip_address":"å¹¿ä¸œ","ucode":"424137ADA9AA23","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoREZlw6JWh1OXYvcKhOToBPCSqVr33Vhc0gmW9jNT3JHtW7NtaiaiaNJicjjxyVia7Oec3Qq1bzLGreQ/132","comment_is_top":false,"comment_ctime":1710845728,"is_pvip":false,"replies":[{"id":141515,"content":"Kuberneteså®˜ç½‘ä¸Šæœ‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1710935838,"ip_address":"åŒ—äº¬","comment_id":388772,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"è€å¸ˆï¼Œyamlæ–‡ä»¶å“ªé‡Œæœ‰å„ä¸ªå¯¹è±¡çš„å…¨å­—æ®µç»“æ„ç¤ºä¾‹å¯ä»¥å‚è€ƒå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":639814,"discussion_content":"Kuberneteså®˜ç½‘ä¸Šæœ‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1710935839,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":387432,"user_name":"Geek_000c13","can_delete":false,"product_type":"c1","uid":3816516,"ip_address":"æ–°åŠ å¡","ucode":"C331C9AEFA569D","user_header":"","comment_is_top":false,"comment_ctime":1707271228,"is_pvip":false,"replies":[{"id":141273,"content":"è¯•äº†ä¸€ä¸‹ï¼Œç¡®å®å¦‚æ­¤ï¼Œå½“æ—¶æ²¡æœ‰è®¤çœŸè°ƒæŸ¥ï¼ŒæŠ±æ­‰ï¼Œæ„Ÿè°¢æŒ‡æ­£ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1708848362,"ip_address":"åŒ—äº¬","comment_id":387432,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"æ–‡ä¸­ä»£ç éƒ¨åˆ†: `docker version #è¿™ä¸ªèŠ‚ç‚¹é‡Œä¹Ÿè·‘äº†ä¸€ä¸ªdockerï¼Œä½†å…¶å®æ˜¯å¤ç”¨äº†å®¿ä¸»æœºçš„docker`ã€‚\næœ‰ä¸ªç–‘é—®ï¼Œminikubeè¿è¡Œçš„kicbaseé‡Œè¿è¡Œçš„dockerï¼Œè·Ÿå®¿ä¸»æœºè¿è¡Œçš„dockeræ˜¯äº’ä¸å½±å“çš„å…³ç³»ï¼Œä¸æ˜¯å¤ç”¨çš„å…³ç³»å§ï¼Ÿ\næˆ‘åœ¨å®¿ä¸»æœºæ‰§è¡Œdocker versionï¼Œå’ŒminikubeèŠ‚ç‚¹é‡Œæ‰§è¡Œdocker versionï¼Œç‰ˆæœ¬æ˜¯ä¸åŒçš„ï¼Œdocker imagesä¹Ÿæ˜¯å®Œå…¨ä¸åŒçš„ã€‚\n","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":637712,"discussion_content":"è¯•äº†ä¸€ä¸‹ï¼Œç¡®å®å¦‚æ­¤ï¼Œå½“æ—¶æ²¡æœ‰è®¤çœŸè°ƒæŸ¥ï¼ŒæŠ±æ­‰ï¼Œæ„Ÿè°¢æŒ‡æ­£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1708848363,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364442,"user_name":"...","can_delete":false,"product_type":"c1","uid":1896681,"ip_address":"ä¸Šæµ·","ucode":"E3694D4CED77E0","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f0/e9/1ff0a3d5.jpg","comment_is_top":false,"comment_ctime":1670984616,"is_pvip":false,"replies":[{"id":132476,"content":"åªæ˜¯ä¸ºäº†å’Œå…¥é—¨ç¯‡çš„æ¶æ„ä¿æŒä¸€è‡´ï¼Œå¯èƒ½é€ æˆäº†äº›å›°æƒ‘ï¼Œsorryã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1670989684,"ip_address":"ä¸Šæµ·","comment_id":364442,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"è€å¸ˆï¼Œè¿™é‡Œå°†podç«¯å£æ˜ å°„æˆæœ¬åœ°ç«¯å£8080äº†ï¼Œä¸ºå•¥è¿˜è¦æä¸ªnginxä»£ç†ï¼Ÿè¿™æ ·ç”¨çš„ç›®çš„æ˜¯ä»€ä¹ˆå•Š","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596440,"discussion_content":"åªæ˜¯ä¸ºäº†å’Œå…¥é—¨ç¯‡çš„æ¶æ„ä¿æŒä¸€è‡´ï¼Œå¯èƒ½é€ æˆäº†äº›å›°æƒ‘ï¼Œsorryã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670989684,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360232,"user_name":"ç¾å¦™çš„ä»£ç ","can_delete":false,"product_type":"c1","uid":1111985,"ip_address":"ä¸Šæµ·","ucode":"9DADD72C193296","user_header":"https://static001.geekbang.org/account/avatar/00/10/f7/b1/982ea185.jpg","comment_is_top":false,"comment_ctime":1666326542,"is_pvip":true,"replies":[{"id":131028,"content":"kubectl  port-forward åªæ˜¯ç”¨æ¥ä¸´æ—¶æµ‹è¯•ç”¨çš„ï¼Œæ­£å¼ç”Ÿäº§è‚¯å®šè¦ç”¨Serviceã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1666339291,"ip_address":"ä¸Šæµ·","comment_id":360232,"utype":1}],"discussion_count":1,"race_medal":1,"score":3,"product_id":100114501,"comment_content":"kubectl  port-forward   æ˜¯æ€ä¹ˆæŠŠå®¿ä¸»æœºç«¯å£8080  æ˜ å°„åˆ°äº†word-pod  80 ?   å¦‚æœåé¢çš„db-pod,  addresså˜äº†æ€ä¹ˆåŠï¼Œæ‰€ä»¥åé¢å°±ç”¨service å¥½äº›å§","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591171,"discussion_content":"kubectl  port-forward åªæ˜¯ç”¨æ¥ä¸´æ—¶æµ‹è¯•ç”¨çš„ï¼Œæ­£å¼ç”Ÿäº§è‚¯å®šè¦ç”¨Serviceã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1666339291,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}