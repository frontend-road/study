{"id":323696,"title":"07｜ 分析测试结果：你得到的测试结果真的靠谱吗？","content":"<p>你好，我是博伟。</p><p>经过前面的确定目标和假设、确定指标、选取实验单位、计算所需样本大小后，我们终于来到了A/B测试的最后一站：分析测试结果。</p><p>在正式开始之前，我想先问你一个问题：拿到测试结果之后，就可以马上进行分析了吗？肯定不行。因为只有确定测试结果值得信赖之后，才可以进行分析。其实，分析A/B测试结果并不难，难的是如何得出值得信赖的结果，从而给业务以正确的指导。</p><p>为什么这么说呢？接下来，我就通过一个音乐App要提高用户升级率的例子，和你先拆解下导致测试结果不可靠的因素有哪些，然后再看看具体该怎么分析。</p><h2>案例导入</h2><p>通常情况下，音乐App有两种盈利模式，一种是提供免费音乐，但是会在App中加广告，通过广告赚钱；一种是让用户付费订阅App，享受高品质的免广告音乐。</p><p>我们的这款音乐App是两种盈利模式都有，但是从长期盈利效果和用户体验来看，采用用户付费订阅的模式会更胜一筹。因此，我们计划在双十一前后，针对App里的免费用户做一次促销，吸引他们付费。</p><p>现在有这么两条广告语，为了通过A/B测试验证哪条更有效，将其分别放到实验组和对照组：</p><ul>\n<li>对照组广告语：千万曲库免广告无限畅听，用户升级，免费试用半年！</li>\n<li>实验组广告语：即日起到11月15日，用户升级，免费试用半年！</li>\n</ul><!-- [[[read_end]]] --><p>现在，我们来完成A/B测试的整体设计方案。</p><ul>\n<li>确定目标：使更多的免费用户升级成为付费用户。</li>\n<li>提出假设：通过在广告语中加入倒计时这种增加紧迫感的信息，能够提升免费用户的升级率。</li>\n<li>确定实验单位：免费用户的用户ID。</li>\n<li>实验组/对照组：随机分配，50%/50%。</li>\n<li>评价指标：用户升级率 = 点击广告升级的用户数 / 看到广告的用户数。</li>\n<li>评价指标的波动范围：[1.86%，2.14%]。</li>\n</ul><p>设计好了A/B测试的框架，实施了A/B测试后，我们就可以等待分析测试结果了。那什么时候可以查看测试结果，停止A/B测试呢？这是保证测试结果可信赖要解决的第一个问题。</p><h2><strong>什么时候可以查看测试结果？</strong></h2><p>还记得我们上节课，在计算测试要达到显著性结果所需的最小样本量时，用到的一个公式吗？</p><p>A/B测试所需的时间 = 总样本量 / 每天可以得到的样本量。</p><p>结合这个公式，再根据App中每天免费用户的流量，我们可以计算出这个测试在理论上需要跑10天。</p><p>其实，这个公式只是理论上推导，<strong>具体到A/B测试的实践中，我们要确定测试时间，除了考虑样本量的大小外，还要考虑指标周期性变化的因素</strong>。</p><p>如果指标具有强烈的周期性变化，比如周中和周末的变化很大，那么这时候的测试时间要包含至少一个周期的时间，以排除指标周期性变化的影响。</p><p>在音乐App这个案例中，我们通过历史数据发现，在周末升级的用户要比周中多。这就说明用户升级率这个评价指标，会以每周为单位形成周期性的变化，所以我们的测试至少要跑7天。而我们通过最小样本量已经算出了本次测试需要跑10天，包含了一个周期，所以我们可以放心地把测试时间定为10天。</p><p>我再多补充一句，如果计算出的测试时间小于一个周期的时间，那么最好也按照一个周期来算，这样做更为保险。</p><p>不过啊，在测试实际进行的过程中，有可能出现这样一种情况：在预计时间之前，评价指标出现了显著不同。这时候你就要小心了，如果提前结束测试，就会前功尽弃。我来给你具体解释下。</p><p>假设负责这个测试的数据分析师是第一次做A/B测试，所以特别激动兴奋，每天都在观测实验，计算测试结果。在实验进行到第6天的时候（样本量还没有达到预期），他发现实验组和对照组的评价指标出现了显著的不同。这位数据分析师就在想，<strong>测试结果在预计时间之前达到了统计显著，这个实验是不是提前成功了呢？</strong></p><p>答案当然是否定的。</p><p>一方面，因为样本量是不断变化的，所以每次观测到的测试其实都可以算作新的实验。根据统计上的惯例，A/B测试一般有5%的第一类错误率α，也就是说每重复测试100次，平均就会得到5次错误的统计显著性的结果。</p><p>这就意味着如果我们观测的次数变多的话，那么观测到错误的统计显著结果的概率就会大大提升，这是多重检验问题（Multiple Testing Issue）的一种体现。关于多重检验问题，我会在第9节课中详细讲解。</p><p>另一方面，提前观测到统计显著的结果，这就意味着样本量并没有达到事先估算的最小样本量，那么这个所谓的“统计显著的结果”就极有可能是错误的假阳性（False Positive）。“假阳性”是指，两组事实上是相同的，而测试结果错误地认为两组显著不同。</p><p>因此这位数据分析师还不能提前结束这次测试，仍然需要继续观测实验。</p><p>但<strong>如果测试已经跑到了第10天，样本量也达到了之前计算的量，那是不是就可以开始分析A/B测试的结果了呢？</strong></p><p>答案依旧是不行。</p><p>俗话说心急吃不了热豆腐，为了确保实验在具体实施过程中按照我们预先设计的进行，保证中途不出现Bug，那么在正式分析实验结果前，我们还要进行测试的合理性检验（Sanity Check），从而保证实验结果的准确性。</p><p>在第3和第4节课我们学过，为了确保在具体实施过程中不会出现破坏统计合理性的Bug，我们可以用护栏指标来保证统计品质。这时，我们可以使用实验/对照组样本大小的比例和实验/对照组中特征的分布这两个护栏指标。这是保证测试结果可信赖，我们要关注的第二个问题。</p><h2><strong>保障统计品质的合理性检验</strong></h2><h3><strong>检验实验/对照组样本量的比例</strong></h3><p>我们预设的是，实验组和对照组的样本量各占总样本量的50%，现在我们来看看实验过程中有没有发生什么变化。</p><p>各组样本量占总样本量的比例也是概率，也是符合二项分布的，所以具体的操作方法（参见第4节课指标波动性的相关内容）是：</p><ul>\n<li>首先根据二项分布的公式$\\sqrt{\\frac{p(1-p)}{n}}$算出标准误差。</li>\n<li>然后，以0.5（50%）为中心构建95%的置信区间。</li>\n<li>最后，确认实际的两组样本量的比例是否在置信区间内。</li>\n</ul><p>如果总的比例在置信区间内的话，就说明即使总的比例不完全等于50%/50%，也是非常接近，属于正常波动，两组样本量大小就符合预期。否则，就说明实验有问题。那该如何确认和解决潜在问题呢？</p><p>回到我们的A/B测试上来，我们实验组的样本量315256，对照组的样本量为315174。通过公式我们求得标准误差为：<img src=\"https://static001.geekbang.org/resource/image/11/68/11bbd59c8bb96e725b0279bc3f31f268.png?wh=456*120\" alt=\"\"><br>\n计算出来的结果是0.06%，我们构建了95%的置信区间[50%-1.96*0.06%, 50%+1.96*0.06%] = [49.88%,50.12%]，也就是两组占比的波动范围，然后算出总体的实验组/对照组的样本量比例=50.01%/49.99%。</p><p>可以看到，两组占比均在置信区间内，属于正常波动。也就是说，两组样本量符合均分的预期，成功通过了<strong>实验/对照组样本量的比例</strong>这个合理性检验。那我们接下来就可以进行实验/对照组中特征的分布这个合理性检验了。</p><h3><strong>检验实验/对照组中特征的分布</strong></h3><p>A/B测试中实验组和对照组的数据要相似才具有可比性。这里的相似，我们可以通过比较两组的特征分布来判断。</p><p>常用的特征包括用户的年龄、性别、地点等基本信息，或者可能影响评价指标的特征。比如在音乐App这个案例中，我们还可以查看用户平时的活跃程度。如果这些特征在两组中分布比例相差较大，则说明实验有问题。</p><p>一旦从合理性检验中发现了问题，就不要急着分析实验结果了，实验结果大概率是不准确的。我们要做的就是找到出现问题的原因，解决问题，并重新实施改进后的A/B测试。</p><p>找原因的方法主要有以下两种：</p><ul>\n<li>和工程师一起从实施的流程方面进行检查，看看是不是具体实施层面上两组有偏差或者bug。</li>\n<li>从不同的维度来分析现有的数据，看看是不是某一个特定维度存在偏差。常用的维度有时间（天）、操作系统、设备类型等。比如从操作系统维度，去看两组中iOS和Android的用户的比例是否存在偏差，如果是的话那说明原因和操作系统有关。</li>\n</ul><p>通过数据分析发现这两组数据中重要特征的分布基本一致，说明两组数据是相似的。这就意味着我们已经通过了合理性检验，接下来我们就可以分析A/B测试的结果了。</p><p>最后，我还想跟你强调一下，这两个合理性检验是都要进行的，这是保障实验质量的关键。这两种检验如果没有通过的话都会使实验结果不准确，具体来说，实验/对照组样本量的比例和实验设计不相同时会出现样本比例不匹配问题（Sample Ratio Mismatch），实验/对照组的特征分布不相似则会导致辛普森悖论问题（Simpson Paradox），这两类问题我们会在第11节课中重点讲解。</p><h2><strong>如何分析A/B测试的结果？</strong></h2><p>其实，分析A/B测试的结果，主要就是对比实验组和对照的评价指标是否有显著不同。那怎么理解“显著”呢？其实，“显著”就是要排除偶然随机性的因素，通过统计的方法来证明两者的不同是事实存在的，而不是由于波动性造成的巧合。</p><p>那具体怎么做呢？</p><p>首先我们可以用统计中的假设检验（Hypothesis Testing）计算出相关的统计量，然后再来分析测试的结果。最常用的统计量是用P值（P value）和置信区间(Confidence Interval)这两种统计量。</p><p>你可能会说，假设检验中有各种各样的检验（Test），我应该选取什么检验来计算P值和置信区间呢？这里我们不需要理解这些检验的复杂理论解释，只要熟悉实践中常用的3种检验方法的使用场景就可以了：</p><ol>\n<li>Z检验（Z Test）</li>\n</ol><p>当评价指标为概率类指标时（比如转化率，注册率等等），一般选用Z检验（在A/B测试中有时又被称为比例检验（Proportion Test））来计算出相应的P值和置信区间。</p><ol start=\"2\">\n<li>T检验（T Test）</li>\n</ol><p>当评价指标为均值类指标时（比如人均使用时间，人均使用频率等等），且在大样本量下可以近似成正态分布时，一般选用T 检验来计算相应的P值和置信区间。</p><ol start=\"3\">\n<li>Bootstrapping</li>\n</ol><p>当评价指标的分布比较复杂，在大样本量下也不能近似成正态分布时（比如70%用户的使用时间，OEC等），一般采用Bootstrapping的方法，从P值或者置信区间的定义来计算P值和置信区间（具体方法请参见第三节课指标波动性的相关内容）。</p><p>现在我们已经拿到了如下的测试结果：</p><ul>\n<li>实验组：样本量为315256，升级的用户为7566，升级率为2.4%。</li>\n<li>对照组：样本量为315174，升级的用户为6303，升级率为2.0%。</li>\n</ul><p>因为评价指标的波动范围是[1.86%,2.14%]，所以我们可以得出实验组的升级率2.4%并不属于正常范围，很有可能显著不同于对照组。</p><p>接下来，我们就可以通过P值法和置信区间法来分析这个测试结果，验证我们的假设是否正确。</p><h3><strong>P值法</strong></h3><p>首先我们可以采取P值法，借助一些计算工具，常见有Python、R，还有网上的一些在线工具（比如这个<a href=\"https://abtestguide.com/calc/\">网站</a>），都可以计算P值。具体选择哪个工具，根据自己的喜好来就可以。我个人比较喜欢选用R来计算：</p><pre><code>results &lt;- prop.test(x = c(7566, 6303), n = c(315256, 315174))\n</code></pre><p>因为用户升级率这个评价指标属于概率类指标，所以我们选择了专门针对概率类指标的函数<a href=\"https://www.rdocumentation.org/packages/stats/versions/3.6.2/topics/prop.test\">prop.test</a>。</p><p>通过计算，我们可以得到P值 &lt; $2.2 e^{-16}$：</p><p><img src=\"https://static001.geekbang.org/resource/image/75/c1/752de9629816c6124ed3d549cae367c1.png?wh=1454*562?wh=1454*562\" alt=\"\"></p><p>根据统计惯例，一般我们会把测试的显著水平（Significance Level）α定为5%（统计上的约定俗成），再把计算出来的P值和5%相比。当P值小于5%时，说明两组指标具有显著的不同。当P值大于5%时，说明两组指标没有显著的不同。如果你对这块概念还不是很清楚，可以回顾下第二节课中假设检验的内容。</p><p>从上面的结果可以看出，P值远远小于5%且接近于0，说明两组指标具有显著的不同，这就意味着实验组的广告语确实能提升免费用户的升级率。</p><h3><strong>置信区间法</strong></h3><p>在第三节课介绍指标时，我们学习了该怎样构建置信区间。现在我们要比较实验组和对照组的评价指标是否显著不同，也就是看两者的差值是不是为0。这时候，我们就要构建两组指标差值$\\left(p_{\\text {test}}-p_{\\text {control}}\\right)$的置信区间了。</p><p>置信区间的具体计算我们也可以借助Python和R等软件，当然你也可以使用我在第二讲时介绍过的具体函数，这里我们还是用R的<a href=\"https://www.rdocumentation.org/packages/stats/versions/3.6.2/topics/prop.test\">prop.test</a>这个函数。</p><p>其实当我们在上面用这个函数计算P值时，R也顺便把95%的置信区间算出来了：<br>\n<img src=\"https://static001.geekbang.org/resource/image/75/c1/752de9629816c6124ed3d549cae367c1.png?wh=1454*562?wh=1454*562\" alt=\"\"></p><p>由图可见，95%的置信区间为[0.0033, 0.0047]。</p><p>接下来，我们需要比较一下两组指标是否有统计显著的不同，也就是要看看这个置信区间是否包括0。</p><p>我们知道数值在置信区间内均为正常波动，如果置信区间包括0的话，就说明两组指标的差值也有可能为0，两组指标是相等的。而如果置信区间不包括0的话，就说明两组指标的差值不为0，两组指标是显著不同的。</p><p>显然，[0.0033, 0.0047]这个置信区间是不包括0的，也就是说我们的测试结果是统计显著的。那对应到业务上，与对照组的广告语（千万曲库免广告无限畅听，用户升级，免费试用半年！）相比，带有紧迫感的实验组广告语（实验组广告语即日起到11月15日，用户升级，免费试用半年！）能吸引更多用户升级，也就验证了我们最开始的假设是成立的。</p><p>学到这里，我们发现<strong>无论是P值法还是置信区间法，都可以用来分析A/B测试结果是否具有统计显著性。那么，在实际应用中该如何选择呢？两者有什么差别吗？</strong></p><p>其实，在大部分情况下这两种方法是通用的，只要选择一种就可以。但如果需要考虑实施变化后的收益和成本的关系时，我们就要选择置信区间法了。</p><p>因为要考虑收益和成本的关系时，除了满足结果在统计上是显著的（两组指标不相同，差值的置信区间不包括0）还不够，更要让结果在业务上也是显著的（两组指标不仅要不相等，而且其差值δ &gt;= $\\delta_{\\text {收支平衡}}$，并且差值的置信区间的范围都要比$\\delta_{\\text {收支平衡}}$大）。</p><h2><strong>小结</strong></h2><p>这节课我们主要讲解了A/B测试中如何分析结果，根据实践经验我给你总结了3个要点：</p><ul>\n<li>切莫心急，一定要等到达到足够样本量时再分析测试结果。</li>\n<li>分析结果前一定要做合理性检验来确保测试的质量，否则一旦实施过程中出现Bug，就会功亏一篑。</li>\n<li>一定要根据指标和数据的特点，选择正确的分析方法来得出可以驱动业务的结论。</li>\n</ul><p>数据领域有一句名言：“Garbage in, garbage out”，意思就是“放进去的是垃圾，产出的还是垃圾”。这句话放在A/B测试中同样适用：如果A/B测试没有设置好，或者虽然计划得很好，但要是在实施过程中出现了问题，也会得到错误的结果和结论，从而给业务带来难以估量的损失。</p><p>所以，前面我们用4节课来讲怎么设置实验，今天又花了很多篇幅来介绍确保结果是可信赖的，都是在给“分析测试结果”做铺垫。</p><p>好了，今天这个音乐App的测试得到了显著的结果，皆大欢喜。但是如果结果不显著，又该怎么办呢？</p><p>关于这个问题，我们在第9节课再来好好讨论！</p><h2><strong>思考题</strong></h2><p>你觉得分析结果前的合理性检验还可以参考哪些护栏指标呢？为什么？</p><p>欢迎在留言区写下你的思考和答案，我们一起交流讨论。如果你觉得有所收获，欢迎你把这一讲分享给你的朋友，邀请他一起学习。</p>","neighbors":{"left":{"article_title":"06 | 选择实验样本量：样本量越多越好吗？","id":322706},"right":{"article_title":"08 | 案例串讲：从0开始，搭建一个规范的A/B测试框架","id":324297}},"comments":[{"had_liked":false,"id":270485,"user_name":"贤者时间","can_delete":false,"product_type":"c1","uid":1457871,"ip_address":"","ucode":"7FE7F4F0A1E14A","user_header":"https://static001.geekbang.org/account/avatar/00/16/3e/cf/375ca6bd.jpg","comment_is_top":false,"comment_ctime":1609144334,"is_pvip":false,"replies":[{"id":98511,"content":"你好，达到了(根据δ收支平衡作为最小检测提升​来计算的)样本量，只是说明当δ&gt;=δ收支平衡时，结果才有可能统计显著（非假阳性），但是这里要注意，实验观测到的δ&gt;=δ收支平衡，并不代表δ真的大于δ收支平衡，因为δ本身也是个随机变量，因为这个实验观测到的δ&gt;=δ收支平衡有可能是偶然得到的，结果统计显著只是说明δ不等于0（两组不同），所以要想证明δ&gt;=δ收支平衡在事实上成立，还是得要δ的置信区间的范围都要比 δ收支平衡​大（即δ的置信区间要不能包含δ收支平衡，而且δ的整个置信区间都要比δ收支平衡大。","user_name":"作者回复","user_name_real":"Bobby","uid":2139349,"ctime":1609748697,"ip_address":"","comment_id":270485,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100065501,"comment_content":"因为要考虑收益和成本的关系时，除了满足结果在统计上是显著的（两组指标不相同，差值的置信区间不包括 0）还不够，更要让结果在业务上也是显著的（两组指标不仅要不相等，而且其差值δ &gt;= δ收支平衡​，并且差值的置信区间的范围都要比 δ收支平衡​ 大）。\n\n上面这段话的后半部分不太明白，两个方法在统计学上是等价的，那置信区间怎么保证差值δ &gt;= δ收支平衡​呢?我们计算样本量的时候，不是已经考虑到这个差值了吗？那么只要统计上显著，就说明超过这个差值了，不是吗？","like_count":5},{"had_liked":false,"id":269357,"user_name":"贤者时间","can_delete":false,"product_type":"c1","uid":1457871,"ip_address":"","ucode":"7FE7F4F0A1E14A","user_header":"https://static001.geekbang.org/account/avatar/00/16/3e/cf/375ca6bd.jpg","comment_is_top":false,"comment_ctime":1608622102,"is_pvip":false,"replies":[{"id":97827,"content":"你好，A&#47;B测试中一个重要的环节就是要把实验单位分组，一个实验单位要么被分到实验组，要么被分到对照组这里的话你可以把每个实验对象分组这个事件当做N次独立重复事件，其中‘实验对象被分配到实验组’这个结果发生了K次，这样子理解的话就是二项分布啦。","user_name":"作者回复","user_name_real":"Bobby","uid":2139349,"ctime":1608790315,"ip_address":"","comment_id":269357,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100065501,"comment_content":" 在 保障统计品质的合理性检验 这一节中老师提到，“各组样本量占总样本量的比例也是概率，也是符合二项分布的”，这句话很不理解，为什么这个比例会服从二项分布呢？这里面的总体、样本、样本点分别是什么呢？我理解二项分布是N次独立重复实现发生K次的概率，但是这个想法在这个例子中好像很难套进去。","like_count":5,"discussions":[{"author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512645,"discussion_content":"你好，达到了(根据δ收支平衡作为最小检测提升​来计算的)样本量，只是说明当δ&amp;gt;=δ收支平衡时，结果才有可能统计显著（非假阳性），但是这里要注意，实验观测到的δ&amp;gt;=δ收支平衡，并不代表δ真的大于δ收支平衡，因为δ本身也是个随机变量，因为这个实验观测到的δ&amp;gt;=δ收支平衡有可能是偶然得到的，结果统计显著只是说明δ不等于0（两组不同），所以要想证明δ&amp;gt;=δ收支平衡在事实上成立，还是得要δ的置信区间的范围都要比 δ收支平衡​大（即δ的置信区间要不能包含δ收支平衡，而且δ的整个置信区间都要比δ收支平衡大。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609748697,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":269378,"user_name":"吴优秀同学","can_delete":false,"product_type":"c1","uid":1606707,"ip_address":"","ucode":"E3BAAC604E9972","user_header":"https://static001.geekbang.org/account/avatar/00/18/84/33/b3666d78.jpg","comment_is_top":false,"comment_ctime":1608628337,"is_pvip":false,"replies":[{"id":97701,"content":"哈哈也是吴优秀同学学习吸收的速度太快了！","user_name":"编辑回复","user_name_real":"李辰洋","uid":2189689,"ctime":1608630534,"ip_address":"","comment_id":269378,"utype":2}],"discussion_count":8,"race_medal":0,"score":2,"product_id":100065501,"comment_content":"对专栏唯一的抱怨就是更新太慢。在这里请教老师一个问题，在计算样本量的时候我们预估会有10%的提升，然后以此得出样本量进行abtest。最后发现a组和b组之间的比率之差没有达到10%只有3%，但是统计结果是显著的。那是不是意味着我们还要继续进行检验，增加样本量，让我们能够对3%的差异进行检测呢？还是说差异没达到10%，不用进行统计学检测，直接否定这个改变能带来10%的差异这个假设。","like_count":3,"discussions":[{"author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512246,"discussion_content":"你好，A/B测试中一个重要的环节就是要把实验单位分组，一个实验单位要么被分到实验组，要么被分到对照组这里的话你可以把每个实验对象分组这个事件当做N次独立重复事件，其中‘实验对象被分配到实验组’这个结果发生了K次，这样子理解的话就是二项分布啦。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608790315,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273083,"user_name":"贤者时间","can_delete":false,"product_type":"c1","uid":1457871,"ip_address":"","ucode":"7FE7F4F0A1E14A","user_header":"https://static001.geekbang.org/account/avatar/00/16/3e/cf/375ca6bd.jpg","comment_is_top":false,"comment_ctime":1610433604,"is_pvip":false,"replies":[{"id":99197,"content":"你好，你说的这种情况从统计角度上来说应该不会出现，因为指标的历史波动率一般是95%的置信区间，计算结果时的置信水平也是95%（显著水平5%）， 所以理论上这个情况是不太可能成立的。","user_name":"作者回复","user_name_real":"Bobby","uid":2139349,"ctime":1610756066,"ip_address":"","comment_id":273083,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100065501,"comment_content":"请教老师一个问题。假如出现下面这种情况，怎么办：\n实验组和对照组经过假设检验后，结果是显著的；\n但是对照组指标加上历史波动率之后，实验组指标又没有达到。\n（假设其他条件都是满足的。）\n那这个结果还是显著的吗？如何对待呢？","like_count":2,"discussions":[{"author":{"id":2189689,"avatar":"https://static001.geekbang.org/account/avatar/00/21/69/79/b4132042.jpg","nickname":"🐑","note":"","ucode":"DE34B3B14287D1","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512254,"discussion_content":"哈哈也是吴优秀同学学习吸收的速度太快了！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608630534,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1250922,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIzGGthScz54sECZJKX3lgyjCATkgrvSt5N3eOsYB34jibCr3SkAX88QaZ5IVmME9Ec7VdkQGwRSPw/132","nickname":"哈哈哈","note":"","ucode":"8AC20A1C9C7DF8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":655057,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1734070978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1674783,"avatar":"https://static001.geekbang.org/account/avatar/00/19/8e/1f/f96bd42d.jpg","nickname":"落空","note":"","ucode":"EC6AD8FC982697","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379933,"discussion_content":"说明预估的10%的提升太乐观了😏","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624251865,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342808,"discussion_content":"这里因为的得到了3%的提升，不是10%，所以建议延长测试时间（增大样本量）来达到3%显著的样本量，再延长时间的同时呢结果其实也可能会有变化，如果充足样本量后结果还是3%显著，那么就可以否定这个改变能带来10%的差异这个假设，因为差异只是3%","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610839263,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2813087,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/ec/9f/7fa3bf00.jpg","nickname":"Elaine","note":"","ucode":"BC35964F85B55B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":405695,"discussion_content":"抓住你啦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634624788,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":342808,"ip_address":"","group_id":0},"score":405695,"extra":""}]},{"author":{"id":1796939,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/6b/4b/4a622bdf.jpg","nickname":"四月.  🕊","note":"","ucode":"C8B8C3605AB67A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339289,"discussion_content":"个人理解：这里分为统计性显著和实际显著，统计性显著就是3%显著，是在没有实现成本的情况下，如果达到显著就可以判定两组不同了。实际显著是因为成本要求比例差值到10%以上才会收支平衡，作出产品改动才有正收益，因此如果达到3%的样本总量不算是试验完成，应该等达到样本总量后再看是否显著。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609592380,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1142793,"avatar":"https://static001.geekbang.org/account/avatar/00/11/70/09/7bdfdd5a.jpg","nickname":"Han","note":"","ucode":"5DA59122479BDF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339064,"discussion_content":"应该按照3%的差异计算所需的样本量吧，如果现有的样本量满足了3%差异所需，那我认为不需要重新实验了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609490489,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2912515,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/71/03/3901b97c.jpg","nickname":"郑华筝","note":"","ucode":"41788AC3544D70","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1142793,"avatar":"https://static001.geekbang.org/account/avatar/00/11/70/09/7bdfdd5a.jpg","nickname":"Han","note":"","ucode":"5DA59122479BDF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583644,"discussion_content":"您好，根据样本量的计算公式，如果MDE更小的话，是需要更多样本量的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660268255,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":339064,"ip_address":"北京","group_id":0},"score":583644,"extra":""}]}]},{"had_liked":false,"id":269293,"user_name":"西西","can_delete":false,"product_type":"c1","uid":2351985,"ip_address":"","ucode":"ED0A1234FF75A1","user_header":"https://static001.geekbang.org/account/avatar/00/23/e3/71/a2a46a9b.jpg","comment_is_top":false,"comment_ctime":1608602718,"is_pvip":false,"replies":[{"id":97694,"content":"条件允许的话推荐重新做实验，因为样本差异过大可能是因为偶然的随机不够造成的，如果重新做实验还存在类似的情况的话如果实验流程没有错误的话，那么可能就是实施层面除了问题，需要和工程师来一起找bug了。当然如果时间紧迫没时间去跑新的实验在较大的样本量中随机选出和较小样本量差不多的样本进行比较，比如用倾向评分匹配(Propensity Score Matching)，这个我在第9节课和第12节课中都会讲解。","user_name":"作者回复","user_name_real":"Bobby","uid":2139349,"ctime":1608620653,"ip_address":"","comment_id":269293,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100065501,"comment_content":"合理性检验如果没有通过怎么办呢？比如样本量差异过大，应该重新做实验吗？或者在较大的样本量中随机选出和较小样本量差不多的样本进行比较可行吗？","like_count":2,"discussions":[{"author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513487,"discussion_content":"你好，你说的这种情况从统计角度上来说应该不会出现，因为指标的历史波动率一般是95%的置信区间，计算结果时的置信水平也是95%（显著水平5%）， 所以理论上这个情况是不太可能成立的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610756066,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1457871,"avatar":"https://static001.geekbang.org/account/avatar/00/16/3e/cf/375ca6bd.jpg","nickname":"贤者时间","note":"","ucode":"7FE7F4F0A1E14A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342806,"discussion_content":"所以我会怀疑，是不是用较近历史数据的AA测试，得到的波动率和样本量会更准确一些。（因为通常这种方式波动率会较小，需要的样本量会较大）\n\n或者更进一步：用不同历史时间段，对每个时间段做多次AA测试。最后取波动率的最大值。这样得到的样本量n就是介于两者之间的了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610838266,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1457871,"avatar":"https://static001.geekbang.org/account/avatar/00/16/3e/cf/375ca6bd.jpg","nickname":"贤者时间","note":"","ucode":"7FE7F4F0A1E14A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342805,"discussion_content":"我举一个例子吧，假设波动率是5%，该值下计算得到的样本量通常不会很大，假设1w吧（足够大了）。最后结果实验组和对照组差距3%，这种情况是统计显著的，但没超过波动率。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610837838,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1250922,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIzGGthScz54sECZJKX3lgyjCATkgrvSt5N3eOsYB34jibCr3SkAX88QaZ5IVmME9Ec7VdkQGwRSPw/132","nickname":"哈哈哈","note":"","ucode":"8AC20A1C9C7DF8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1457871,"avatar":"https://static001.geekbang.org/account/avatar/00/16/3e/cf/375ca6bd.jpg","nickname":"贤者时间","note":"","ucode":"7FE7F4F0A1E14A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":655060,"discussion_content":"这种情况下，不可能显著","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1734075580,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":342805,"ip_address":"北京","group_id":0},"score":655060,"extra":""}]}]},{"had_liked":false,"id":269325,"user_name":"那时刻","can_delete":false,"product_type":"c1","uid":1150927,"ip_address":"","ucode":"B0D150856C3A4A","user_header":"https://static001.geekbang.org/account/avatar/00/11/8f/cf/890f82d6.jpg","comment_is_top":false,"comment_ctime":1608613628,"is_pvip":false,"replies":[{"id":97826,"content":"你好，很高兴你能体会到课程的连贯性。对于你的问题：1.因为差值delta是一个随机变量，是有波动范围的，差值的置信区间比delta_收支平衡大这个要求就是说明差值的波动范围都要比delta_收支平衡大才行，我们把它用一个数δ表示，这个δ只是代表了其平均值而已。2.对的，是根据历史数据算出的哈。","user_name":"作者回复","user_name_real":"Bobby","uid":2139349,"ctime":1608789723,"ip_address":"","comment_id":269325,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100065501,"comment_content":"我们目前使用的护栏指标是DAU和留存，细想了下，感觉可以归入到老师提到的delta收支平衡。不知理解是否正确？\n\n另外请教老师两个问题：\n1. 因为要考虑收益和成本的关系时，让结果在业务上也是显著的（两组指标不仅要不相等，而且其差值δ &gt;= delta_收支平衡，并且差值的置信区间的范围都要比 delta 大。为什么同时要求差值的置信区间比delta大呢？\n2. 评价指标的波动范围：[1.86%，2.14%]。这数据是依据历史数据算出的么？\n\n另外，体会到老师说到前后文章是有关联的，文中“我们构建了 95% 的置信区间[50%-1.96*0.06%, 50%+1.96*0.06%] = [49.88%,50.12%]”。我迟疑这个1.96，后来在第四章找到，它表示95%置信区间的Z score。通过例子翻阅之前的理论，蛮有意思的，同时也加深印象。","like_count":1,"discussions":[{"author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512221,"discussion_content":"条件允许的话推荐重新做实验，因为样本差异过大可能是因为偶然的随机不够造成的，如果重新做实验还存在类似的情况的话如果实验流程没有错误的话，那么可能就是实施层面除了问题，需要和工程师来一起找bug了。当然如果时间紧迫没时间去跑新的实验在较大的样本量中随机选出和较小样本量差不多的样本进行比较，比如用倾向评分匹配(Propensity Score Matching)，这个我在第9节课和第12节课中都会讲解。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608620653,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":304712,"user_name":"frango","can_delete":false,"product_type":"c1","uid":2220559,"ip_address":"","ucode":"356D4C152500F7","user_header":"https://static001.geekbang.org/account/avatar/00/21/e2/0f/19520317.jpg","comment_is_top":false,"comment_ctime":1627561861,"is_pvip":false,"replies":[{"id":112220,"content":"哈哈公式的话写出来有些复杂且枯燥，毕竟本专栏还是以实用为主，不过你如果感兴趣的话可以把Python&#47;R这些开源软件包的源代码找出来看下，而且你也可以从中找到这些代码中计算原理相关的文献的。","user_name":"作者回复","user_name_real":"Bobby","uid":2139349,"ctime":1630361593,"ip_address":"","comment_id":304712,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100065501,"comment_content":"老师，能出一版 用公式计算的吗？这用软件算，不同软件包不一样，计算原理也不知道，","like_count":0,"discussions":[{"author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512235,"discussion_content":"你好，很高兴你能体会到课程的连贯性。对于你的问题：1.因为差值delta是一个随机变量，是有波动范围的，差值的置信区间比delta_收支平衡大这个要求就是说明差值的波动范围都要比delta_收支平衡大才行，我们把它用一个数δ表示，这个δ只是代表了其平均值而已。2.对的，是根据历史数据算出的哈。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608789723,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":299484,"user_name":"章光辉","can_delete":false,"product_type":"c1","uid":1046152,"ip_address":"","ucode":"49ACA750CAF19E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f6/88/ee32fde9.jpg","comment_is_top":false,"comment_ctime":1624675549,"is_pvip":true,"replies":null,"discussion_count":4,"race_medal":0,"score":2,"product_id":100065501,"comment_content":"读者贤者时间问的问题确实有可能发生，拿老师的例子为例:\n- 实验组：样本量为 315256，升级的用户为 7566，升级率为 2.4%。\n- 对照组：样本量为 315174，升级的用户为 6303，升级率为 2.0%。\n通过计算发现结果是显著的，但是历史数据表明对照组的升级率在1.5%~2.5%之间波动，所以从历史数据来看实验组又不显著，请问这种情况下要如何分析？","like_count":2,"discussions":[{"author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524131,"discussion_content":"哈哈公式的话写出来有些复杂且枯燥，毕竟本专栏还是以实用为主，不过你如果感兴趣的话可以把Python/R这些开源软件包的源代码找出来看下，而且你也可以从中找到这些代码中计算原理相关的文献的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630361593,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350571,"user_name":"飞飞今天学会da了吗","can_delete":false,"product_type":"c1","uid":3023330,"ip_address":"","ucode":"B09299766FD829","user_header":"https://static001.geekbang.org/account/avatar/00/2e/21/e2/0146a8ab.jpg","comment_is_top":false,"comment_ctime":1657010834,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100065501,"comment_content":"老师您好：\n下述部分\n现在我们已经拿到了如下的测试结果：实验组：样本量为 315256，升级的用户为 7566，升级率为 2.4%。对照组：样本量为 315174，升级的用户为 6303，升级率为 2.0%。因为评价指标的波动范围是[1.86%,2.14%]\n\n我按照  2.0% 加减 根号(0.02*0.98&#47;(315174+315256)) 计算出来的结果与上述结论不同\n请问下老师这个结论是按照什么逻辑计算出来的呢？谢谢老师","like_count":1},{"had_liked":false,"id":327100,"user_name":"嘻嘻大魔王","can_delete":false,"product_type":"c1","uid":1397443,"ip_address":"","ucode":"C1E90D687E9446","user_header":"https://static001.geekbang.org/account/avatar/00/15/52/c3/b12e5fe1.jpg","comment_is_top":false,"comment_ctime":1639916706,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100065501,"comment_content":"老师，我有一个问题，如果我们这边每次用平台20%流量的uid去做ab测试（大约3000w用户），可观测的指标超过100个，如果每个指标都做z test的话，这个计算量应该如何优化？ 像我们这种hash 分桶的抽样方式是不是已经可以省去检验步骤，直接观测策略对大盘的整体影响了？","like_count":1},{"had_liked":false,"id":270485,"user_name":"贤者时间","can_delete":false,"product_type":"c1","uid":1457871,"ip_address":"","ucode":"7FE7F4F0A1E14A","user_header":"https://static001.geekbang.org/account/avatar/00/16/3e/cf/375ca6bd.jpg","comment_is_top":false,"comment_ctime":1609144334,"is_pvip":false,"replies":[{"id":98511,"content":"你好，达到了(根据δ收支平衡作为最小检测提升​来计算的)样本量，只是说明当δ&gt;=δ收支平衡时，结果才有可能统计显著（非假阳性），但是这里要注意，实验观测到的δ&gt;=δ收支平衡，并不代表δ真的大于δ收支平衡，因为δ本身也是个随机变量，因为这个实验观测到的δ&gt;=δ收支平衡有可能是偶然得到的，结果统计显著只是说明δ不等于0（两组不同），所以要想证明δ&gt;=δ收支平衡在事实上成立，还是得要δ的置信区间的范围都要比 δ收支平衡​大（即δ的置信区间要不能包含δ收支平衡，而且δ的整个置信区间都要比δ收支平衡大。","user_name":"作者回复","user_name_real":"Bobby","uid":2139349,"ctime":1609748697,"ip_address":"","comment_id":270485,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100065501,"comment_content":"因为要考虑收益和成本的关系时，除了满足结果在统计上是显著的（两组指标不相同，差值的置信区间不包括 0）还不够，更要让结果在业务上也是显著的（两组指标不仅要不相等，而且其差值δ &gt;= δ收支平衡​，并且差值的置信区间的范围都要比 δ收支平衡​ 大）。\n\n上面这段话的后半部分不太明白，两个方法在统计学上是等价的，那置信区间怎么保证差值δ &gt;= δ收支平衡​呢?我们计算样本量的时候，不是已经考虑到这个差值了吗？那么只要统计上显著，就说明超过这个差值了，不是吗？","like_count":5,"discussions":[{"author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512645,"discussion_content":"你好，达到了(根据δ收支平衡作为最小检测提升​来计算的)样本量，只是说明当δ&amp;gt;=δ收支平衡时，结果才有可能统计显著（非假阳性），但是这里要注意，实验观测到的δ&amp;gt;=δ收支平衡，并不代表δ真的大于δ收支平衡，因为δ本身也是个随机变量，因为这个实验观测到的δ&amp;gt;=δ收支平衡有可能是偶然得到的，结果统计显著只是说明δ不等于0（两组不同），所以要想证明δ&amp;gt;=δ收支平衡在事实上成立，还是得要δ的置信区间的范围都要比 δ收支平衡​大（即δ的置信区间要不能包含δ收支平衡，而且δ的整个置信区间都要比δ收支平衡大。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609748697,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":269357,"user_name":"贤者时间","can_delete":false,"product_type":"c1","uid":1457871,"ip_address":"","ucode":"7FE7F4F0A1E14A","user_header":"https://static001.geekbang.org/account/avatar/00/16/3e/cf/375ca6bd.jpg","comment_is_top":false,"comment_ctime":1608622102,"is_pvip":false,"replies":[{"id":97827,"content":"你好，A&#47;B测试中一个重要的环节就是要把实验单位分组，一个实验单位要么被分到实验组，要么被分到对照组这里的话你可以把每个实验对象分组这个事件当做N次独立重复事件，其中‘实验对象被分配到实验组’这个结果发生了K次，这样子理解的话就是二项分布啦。","user_name":"作者回复","user_name_real":"Bobby","uid":2139349,"ctime":1608790315,"ip_address":"","comment_id":269357,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100065501,"comment_content":" 在 保障统计品质的合理性检验 这一节中老师提到，“各组样本量占总样本量的比例也是概率，也是符合二项分布的”，这句话很不理解，为什么这个比例会服从二项分布呢？这里面的总体、样本、样本点分别是什么呢？我理解二项分布是N次独立重复实现发生K次的概率，但是这个想法在这个例子中好像很难套进去。","like_count":5,"discussions":[{"author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512246,"discussion_content":"你好，A/B测试中一个重要的环节就是要把实验单位分组，一个实验单位要么被分到实验组，要么被分到对照组这里的话你可以把每个实验对象分组这个事件当做N次独立重复事件，其中‘实验对象被分配到实验组’这个结果发生了K次，这样子理解的话就是二项分布啦。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608790315,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":269378,"user_name":"吴优秀同学","can_delete":false,"product_type":"c1","uid":1606707,"ip_address":"","ucode":"E3BAAC604E9972","user_header":"https://static001.geekbang.org/account/avatar/00/18/84/33/b3666d78.jpg","comment_is_top":false,"comment_ctime":1608628337,"is_pvip":false,"replies":[{"id":97701,"content":"哈哈也是吴优秀同学学习吸收的速度太快了！","user_name":"编辑回复","user_name_real":"李辰洋","uid":2189689,"ctime":1608630534,"ip_address":"","comment_id":269378,"utype":2}],"discussion_count":8,"race_medal":0,"score":2,"product_id":100065501,"comment_content":"对专栏唯一的抱怨就是更新太慢。在这里请教老师一个问题，在计算样本量的时候我们预估会有10%的提升，然后以此得出样本量进行abtest。最后发现a组和b组之间的比率之差没有达到10%只有3%，但是统计结果是显著的。那是不是意味着我们还要继续进行检验，增加样本量，让我们能够对3%的差异进行检测呢？还是说差异没达到10%，不用进行统计学检测，直接否定这个改变能带来10%的差异这个假设。","like_count":3,"discussions":[{"author":{"id":2189689,"avatar":"https://static001.geekbang.org/account/avatar/00/21/69/79/b4132042.jpg","nickname":"🐑","note":"","ucode":"DE34B3B14287D1","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512254,"discussion_content":"哈哈也是吴优秀同学学习吸收的速度太快了！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608630534,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1250922,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIzGGthScz54sECZJKX3lgyjCATkgrvSt5N3eOsYB34jibCr3SkAX88QaZ5IVmME9Ec7VdkQGwRSPw/132","nickname":"哈哈哈","note":"","ucode":"8AC20A1C9C7DF8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":655057,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1734070978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1674783,"avatar":"https://static001.geekbang.org/account/avatar/00/19/8e/1f/f96bd42d.jpg","nickname":"落空","note":"","ucode":"EC6AD8FC982697","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379933,"discussion_content":"说明预估的10%的提升太乐观了😏","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624251865,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342808,"discussion_content":"这里因为的得到了3%的提升，不是10%，所以建议延长测试时间（增大样本量）来达到3%显著的样本量，再延长时间的同时呢结果其实也可能会有变化，如果充足样本量后结果还是3%显著，那么就可以否定这个改变能带来10%的差异这个假设，因为差异只是3%","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610839263,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2813087,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/ec/9f/7fa3bf00.jpg","nickname":"Elaine","note":"","ucode":"BC35964F85B55B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":405695,"discussion_content":"抓住你啦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634624788,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":342808,"ip_address":"","group_id":0},"score":405695,"extra":""}]},{"author":{"id":1796939,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/6b/4b/4a622bdf.jpg","nickname":"四月.  🕊","note":"","ucode":"C8B8C3605AB67A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339289,"discussion_content":"个人理解：这里分为统计性显著和实际显著，统计性显著就是3%显著，是在没有实现成本的情况下，如果达到显著就可以判定两组不同了。实际显著是因为成本要求比例差值到10%以上才会收支平衡，作出产品改动才有正收益，因此如果达到3%的样本总量不算是试验完成，应该等达到样本总量后再看是否显著。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609592380,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1142793,"avatar":"https://static001.geekbang.org/account/avatar/00/11/70/09/7bdfdd5a.jpg","nickname":"Han","note":"","ucode":"5DA59122479BDF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339064,"discussion_content":"应该按照3%的差异计算所需的样本量吧，如果现有的样本量满足了3%差异所需，那我认为不需要重新实验了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609490489,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2912515,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/71/03/3901b97c.jpg","nickname":"郑华筝","note":"","ucode":"41788AC3544D70","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1142793,"avatar":"https://static001.geekbang.org/account/avatar/00/11/70/09/7bdfdd5a.jpg","nickname":"Han","note":"","ucode":"5DA59122479BDF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583644,"discussion_content":"您好，根据样本量的计算公式，如果MDE更小的话，是需要更多样本量的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660268255,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":339064,"ip_address":"北京","group_id":0},"score":583644,"extra":""}]}]},{"had_liked":false,"id":273083,"user_name":"贤者时间","can_delete":false,"product_type":"c1","uid":1457871,"ip_address":"","ucode":"7FE7F4F0A1E14A","user_header":"https://static001.geekbang.org/account/avatar/00/16/3e/cf/375ca6bd.jpg","comment_is_top":false,"comment_ctime":1610433604,"is_pvip":false,"replies":[{"id":99197,"content":"你好，你说的这种情况从统计角度上来说应该不会出现，因为指标的历史波动率一般是95%的置信区间，计算结果时的置信水平也是95%（显著水平5%）， 所以理论上这个情况是不太可能成立的。","user_name":"作者回复","user_name_real":"Bobby","uid":2139349,"ctime":1610756066,"ip_address":"","comment_id":273083,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100065501,"comment_content":"请教老师一个问题。假如出现下面这种情况，怎么办：\n实验组和对照组经过假设检验后，结果是显著的；\n但是对照组指标加上历史波动率之后，实验组指标又没有达到。\n（假设其他条件都是满足的。）\n那这个结果还是显著的吗？如何对待呢？","like_count":2,"discussions":[{"author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513487,"discussion_content":"你好，你说的这种情况从统计角度上来说应该不会出现，因为指标的历史波动率一般是95%的置信区间，计算结果时的置信水平也是95%（显著水平5%）， 所以理论上这个情况是不太可能成立的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610756066,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1457871,"avatar":"https://static001.geekbang.org/account/avatar/00/16/3e/cf/375ca6bd.jpg","nickname":"贤者时间","note":"","ucode":"7FE7F4F0A1E14A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342806,"discussion_content":"所以我会怀疑，是不是用较近历史数据的AA测试，得到的波动率和样本量会更准确一些。（因为通常这种方式波动率会较小，需要的样本量会较大）\n\n或者更进一步：用不同历史时间段，对每个时间段做多次AA测试。最后取波动率的最大值。这样得到的样本量n就是介于两者之间的了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610838266,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1457871,"avatar":"https://static001.geekbang.org/account/avatar/00/16/3e/cf/375ca6bd.jpg","nickname":"贤者时间","note":"","ucode":"7FE7F4F0A1E14A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342805,"discussion_content":"我举一个例子吧，假设波动率是5%，该值下计算得到的样本量通常不会很大，假设1w吧（足够大了）。最后结果实验组和对照组差距3%，这种情况是统计显著的，但没超过波动率。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610837838,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1250922,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIzGGthScz54sECZJKX3lgyjCATkgrvSt5N3eOsYB34jibCr3SkAX88QaZ5IVmME9Ec7VdkQGwRSPw/132","nickname":"哈哈哈","note":"","ucode":"8AC20A1C9C7DF8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1457871,"avatar":"https://static001.geekbang.org/account/avatar/00/16/3e/cf/375ca6bd.jpg","nickname":"贤者时间","note":"","ucode":"7FE7F4F0A1E14A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":655060,"discussion_content":"这种情况下，不可能显著","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1734075580,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":342805,"ip_address":"北京","group_id":0},"score":655060,"extra":""}]}]},{"had_liked":false,"id":269293,"user_name":"西西","can_delete":false,"product_type":"c1","uid":2351985,"ip_address":"","ucode":"ED0A1234FF75A1","user_header":"https://static001.geekbang.org/account/avatar/00/23/e3/71/a2a46a9b.jpg","comment_is_top":false,"comment_ctime":1608602718,"is_pvip":false,"replies":[{"id":97694,"content":"条件允许的话推荐重新做实验，因为样本差异过大可能是因为偶然的随机不够造成的，如果重新做实验还存在类似的情况的话如果实验流程没有错误的话，那么可能就是实施层面除了问题，需要和工程师来一起找bug了。当然如果时间紧迫没时间去跑新的实验在较大的样本量中随机选出和较小样本量差不多的样本进行比较，比如用倾向评分匹配(Propensity Score Matching)，这个我在第9节课和第12节课中都会讲解。","user_name":"作者回复","user_name_real":"Bobby","uid":2139349,"ctime":1608620653,"ip_address":"","comment_id":269293,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100065501,"comment_content":"合理性检验如果没有通过怎么办呢？比如样本量差异过大，应该重新做实验吗？或者在较大的样本量中随机选出和较小样本量差不多的样本进行比较可行吗？","like_count":2,"discussions":[{"author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512221,"discussion_content":"条件允许的话推荐重新做实验，因为样本差异过大可能是因为偶然的随机不够造成的，如果重新做实验还存在类似的情况的话如果实验流程没有错误的话，那么可能就是实施层面除了问题，需要和工程师来一起找bug了。当然如果时间紧迫没时间去跑新的实验在较大的样本量中随机选出和较小样本量差不多的样本进行比较，比如用倾向评分匹配(Propensity Score Matching)，这个我在第9节课和第12节课中都会讲解。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608620653,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":269325,"user_name":"那时刻","can_delete":false,"product_type":"c1","uid":1150927,"ip_address":"","ucode":"B0D150856C3A4A","user_header":"https://static001.geekbang.org/account/avatar/00/11/8f/cf/890f82d6.jpg","comment_is_top":false,"comment_ctime":1608613628,"is_pvip":false,"replies":[{"id":97826,"content":"你好，很高兴你能体会到课程的连贯性。对于你的问题：1.因为差值delta是一个随机变量，是有波动范围的，差值的置信区间比delta_收支平衡大这个要求就是说明差值的波动范围都要比delta_收支平衡大才行，我们把它用一个数δ表示，这个δ只是代表了其平均值而已。2.对的，是根据历史数据算出的哈。","user_name":"作者回复","user_name_real":"Bobby","uid":2139349,"ctime":1608789723,"ip_address":"","comment_id":269325,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100065501,"comment_content":"我们目前使用的护栏指标是DAU和留存，细想了下，感觉可以归入到老师提到的delta收支平衡。不知理解是否正确？\n\n另外请教老师两个问题：\n1. 因为要考虑收益和成本的关系时，让结果在业务上也是显著的（两组指标不仅要不相等，而且其差值δ &gt;= delta_收支平衡，并且差值的置信区间的范围都要比 delta 大。为什么同时要求差值的置信区间比delta大呢？\n2. 评价指标的波动范围：[1.86%，2.14%]。这数据是依据历史数据算出的么？\n\n另外，体会到老师说到前后文章是有关联的，文中“我们构建了 95% 的置信区间[50%-1.96*0.06%, 50%+1.96*0.06%] = [49.88%,50.12%]”。我迟疑这个1.96，后来在第四章找到，它表示95%置信区间的Z score。通过例子翻阅之前的理论，蛮有意思的，同时也加深印象。","like_count":1,"discussions":[{"author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512235,"discussion_content":"你好，很高兴你能体会到课程的连贯性。对于你的问题：1.因为差值delta是一个随机变量，是有波动范围的，差值的置信区间比delta_收支平衡大这个要求就是说明差值的波动范围都要比delta_收支平衡大才行，我们把它用一个数δ表示，这个δ只是代表了其平均值而已。2.对的，是根据历史数据算出的哈。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608789723,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":304712,"user_name":"frango","can_delete":false,"product_type":"c1","uid":2220559,"ip_address":"","ucode":"356D4C152500F7","user_header":"https://static001.geekbang.org/account/avatar/00/21/e2/0f/19520317.jpg","comment_is_top":false,"comment_ctime":1627561861,"is_pvip":false,"replies":[{"id":112220,"content":"哈哈公式的话写出来有些复杂且枯燥，毕竟本专栏还是以实用为主，不过你如果感兴趣的话可以把Python&#47;R这些开源软件包的源代码找出来看下，而且你也可以从中找到这些代码中计算原理相关的文献的。","user_name":"作者回复","user_name_real":"Bobby","uid":2139349,"ctime":1630361593,"ip_address":"","comment_id":304712,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100065501,"comment_content":"老师，能出一版 用公式计算的吗？这用软件算，不同软件包不一样，计算原理也不知道，","like_count":0,"discussions":[{"author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524131,"discussion_content":"哈哈公式的话写出来有些复杂且枯燥，毕竟本专栏还是以实用为主，不过你如果感兴趣的话可以把Python/R这些开源软件包的源代码找出来看下，而且你也可以从中找到这些代码中计算原理相关的文献的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630361593,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":299484,"user_name":"章光辉","can_delete":false,"product_type":"c1","uid":1046152,"ip_address":"","ucode":"49ACA750CAF19E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f6/88/ee32fde9.jpg","comment_is_top":false,"comment_ctime":1624675549,"is_pvip":true,"replies":null,"discussion_count":4,"race_medal":0,"score":2,"product_id":100065501,"comment_content":"读者贤者时间问的问题确实有可能发生，拿老师的例子为例:\n- 实验组：样本量为 315256，升级的用户为 7566，升级率为 2.4%。\n- 对照组：样本量为 315174，升级的用户为 6303，升级率为 2.0%。\n通过计算发现结果是显著的，但是历史数据表明对照组的升级率在1.5%~2.5%之间波动，所以从历史数据来看实验组又不显著，请问这种情况下要如何分析？","like_count":2,"discussions":[{"author":{"id":1108740,"avatar":"https://static001.geekbang.org/account/avatar/00/10/eb/04/de98e879.jpg","nickname":"周哲","note":"","ucode":"479B74808A5297","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":402918,"discussion_content":"老师，二项分布的方差是npq，为啥标准差是sqrt（pq/n）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633963898,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":2813087,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/ec/9f/7fa3bf00.jpg","nickname":"Elaine","note":"","ucode":"BC35964F85B55B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1108740,"avatar":"https://static001.geekbang.org/account/avatar/00/10/eb/04/de98e879.jpg","nickname":"周哲","note":"","ucode":"479B74808A5297","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":405694,"discussion_content":"因为它是比例的二项分布，方差是pq。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634624761,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":402918,"ip_address":"","group_id":0},"score":405694,"extra":""},{"author":{"id":2871541,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/d0/f5/4d68176a.jpg","nickname":"让我来","note":"","ucode":"E13D9F620376F9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1108740,"avatar":"https://static001.geekbang.org/account/avatar/00/10/eb/04/de98e879.jpg","nickname":"周哲","note":"","ucode":"479B74808A5297","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549760,"discussion_content":"这是比例的抽样分布。按照中心极限定理，二项分布的比例抽样分布方差等于npq/n²，所以它的标准差是sqrt(pq/n)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644228750,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":402918,"ip_address":"","group_id":0},"score":549760,"extra":""},{"author":{"id":2840253,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/56/bd/204dbdbd.jpg","nickname":"孙权","note":"","ucode":"A41C2E5D9FB80E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1108740,"avatar":"https://static001.geekbang.org/account/avatar/00/10/eb/04/de98e879.jpg","nickname":"周哲","note":"","ucode":"479B74808A5297","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":620743,"discussion_content":"样本均值的分布是要除以n的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1686495069,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":402918,"ip_address":"北京","group_id":0},"score":620743,"extra":""}]}]},{"had_liked":false,"id":350571,"user_name":"飞飞今天学会da了吗","can_delete":false,"product_type":"c1","uid":3023330,"ip_address":"","ucode":"B09299766FD829","user_header":"https://static001.geekbang.org/account/avatar/00/2e/21/e2/0146a8ab.jpg","comment_is_top":false,"comment_ctime":1657010834,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100065501,"comment_content":"老师您好：\n下述部分\n现在我们已经拿到了如下的测试结果：实验组：样本量为 315256，升级的用户为 7566，升级率为 2.4%。对照组：样本量为 315174，升级的用户为 6303，升级率为 2.0%。因为评价指标的波动范围是[1.86%,2.14%]\n\n我按照  2.0% 加减 根号(0.02*0.98&#47;(315174+315256)) 计算出来的结果与上述结论不同\n请问下老师这个结论是按照什么逻辑计算出来的呢？谢谢老师","like_count":1},{"had_liked":false,"id":327100,"user_name":"嘻嘻大魔王","can_delete":false,"product_type":"c1","uid":1397443,"ip_address":"","ucode":"C1E90D687E9446","user_header":"https://static001.geekbang.org/account/avatar/00/15/52/c3/b12e5fe1.jpg","comment_is_top":false,"comment_ctime":1639916706,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100065501,"comment_content":"老师，我有一个问题，如果我们这边每次用平台20%流量的uid去做ab测试（大约3000w用户），可观测的指标超过100个，如果每个指标都做z test的话，这个计算量应该如何优化？ 像我们这种hash 分桶的抽样方式是不是已经可以省去检验步骤，直接观测策略对大盘的整体影响了？","like_count":1,"discussions":[{"author":{"id":1108740,"avatar":"https://static001.geekbang.org/account/avatar/00/10/eb/04/de98e879.jpg","nickname":"周哲","note":"","ucode":"479B74808A5297","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":402918,"discussion_content":"老师，二项分布的方差是npq，为啥标准差是sqrt（pq/n）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633963898,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":2813087,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/ec/9f/7fa3bf00.jpg","nickname":"Elaine","note":"","ucode":"BC35964F85B55B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1108740,"avatar":"https://static001.geekbang.org/account/avatar/00/10/eb/04/de98e879.jpg","nickname":"周哲","note":"","ucode":"479B74808A5297","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":405694,"discussion_content":"因为它是比例的二项分布，方差是pq。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634624761,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":402918,"ip_address":"","group_id":0},"score":405694,"extra":""},{"author":{"id":2871541,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/d0/f5/4d68176a.jpg","nickname":"让我来","note":"","ucode":"E13D9F620376F9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1108740,"avatar":"https://static001.geekbang.org/account/avatar/00/10/eb/04/de98e879.jpg","nickname":"周哲","note":"","ucode":"479B74808A5297","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549760,"discussion_content":"这是比例的抽样分布。按照中心极限定理，二项分布的比例抽样分布方差等于npq/n²，所以它的标准差是sqrt(pq/n)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644228750,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":402918,"ip_address":"","group_id":0},"score":549760,"extra":""},{"author":{"id":2840253,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/56/bd/204dbdbd.jpg","nickname":"孙权","note":"","ucode":"A41C2E5D9FB80E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1108740,"avatar":"https://static001.geekbang.org/account/avatar/00/10/eb/04/de98e879.jpg","nickname":"周哲","note":"","ucode":"479B74808A5297","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":620743,"discussion_content":"样本均值的分布是要除以n的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1686495069,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":402918,"ip_address":"北京","group_id":0},"score":620743,"extra":""}]}]},{"had_liked":false,"id":316144,"user_name":"张皓","can_delete":false,"product_type":"c1","uid":1264178,"ip_address":"","ucode":"AEF620DB7F8522","user_header":"https://static001.geekbang.org/account/avatar/00/13/4a/32/5605e892.jpg","comment_is_top":false,"comment_ctime":1634179373,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100065501,"comment_content":"“因为评价指标的波动范围是[1.86%,2.14%]，所以我们可以得出实验组的升级率 2.4% 并不属于正常范围，很有可能显著不同于对照组。”\n这个我是怎么算的呢？我根据数据来算，发现对不上","like_count":1},{"had_liked":false,"id":382811,"user_name":"金海涛","can_delete":false,"product_type":"c1","uid":2735297,"ip_address":"北京","ucode":"90064E9BCD4514","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJW1mt6zS8bNAxbq2tjIPQbSoDUzDgia8Q52Ns7CxxhxaF5GAqbGiam8iaOQyic3fO9lnqVkcOhtNXXSw/132","comment_is_top":false,"comment_ctime":1698065803,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100065501,"comment_content":" 想问一个问题，目前我们在比较试验结果显著性的时候，经常采用的是test&amp;control A diff 绝对值大于等于 controlA&amp;control AAdiff， 这种评价方式对吗？","like_count":0},{"had_liked":false,"id":382810,"user_name":"金海涛","can_delete":false,"product_type":"c1","uid":2735297,"ip_address":"北京","ucode":"90064E9BCD4514","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJW1mt6zS8bNAxbq2tjIPQbSoDUzDgia8Q52Ns7CxxhxaF5GAqbGiam8iaOQyic3fO9lnqVkcOhtNXXSw/132","comment_is_top":false,"comment_ctime":1698065661,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100065501,"comment_content":"想问一个问题，目前我们经常在做实验， 针对实验的结果判断是否置信，会考虑","like_count":0},{"had_liked":false,"id":372883,"user_name":"Adam twe","can_delete":false,"product_type":"c1","uid":3554694,"ip_address":"北京","ucode":"F83240D9C019FE","user_header":"https://static001.geekbang.org/account/avatar/00/36/3d/86/1df02f3c.jpg","comment_is_top":false,"comment_ctime":1681743549,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100065501,"comment_content":"老师python置信区间咋算的啊 网上没找到合适的参数输入","like_count":0},{"had_liked":false,"id":349665,"user_name":"阿东","can_delete":false,"product_type":"c1","uid":2842654,"ip_address":"","ucode":"60D313ED25AA17","user_header":"https://static001.geekbang.org/account/avatar/00/2b/60/1e/5c133cf0.jpg","comment_is_top":false,"comment_ctime":1656213329,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100065501,"comment_content":"博伟老师你好，请教个问题，假设实验组和对照组各100人，我可以用z检验检验两组的转化人数比例是否有显著差异。那如果100人每个人有不同的转化金额，我可以直接用z检验检验金额的转化率吗？","like_count":0},{"had_liked":false,"id":342294,"user_name":"Mikey","can_delete":false,"product_type":"c1","uid":1188191,"ip_address":"","ucode":"3EC73395031E88","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/5f/9e1300d3.jpg","comment_is_top":false,"comment_ctime":1650174378,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100065501,"comment_content":"如果实验结论预期和后续上线情况不一致，一定是实验出了问题是嘛？","like_count":0},{"had_liked":false,"id":326200,"user_name":"求知鸟","can_delete":false,"product_type":"c1","uid":1309134,"ip_address":"","ucode":"76249BB4897629","user_header":"https://static001.geekbang.org/account/avatar/00/13/f9/ce/4985c6fc.jpg","comment_is_top":false,"comment_ctime":1639414222,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100065501,"comment_content":"Z检验：一般用于大样本（即样本容量大于30）平均值差异性检验的方法。它是用标准正态分布的理论来推断差异发生的概率，从而比较两个平均数的差异是否显著。在国内也被称作u检验。\n\nT检验：主要用于样本含量较小（例如n &lt; 30），总体标准差σ未知的正态分布。T检验是用t分布理论来推论差异发生的概率，从而比较两个平均数的差异是否显著。\n\n和老师给出的建议有违背？","like_count":0},{"had_liked":false,"id":313359,"user_name":"will_liu","can_delete":false,"product_type":"c1","uid":1790757,"ip_address":"","ucode":"B6902365D90798","user_header":"https://static001.geekbang.org/account/avatar/00/1b/53/25/91e7485e.jpg","comment_is_top":false,"comment_ctime":1632389175,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100065501,"comment_content":"每天可以得到的样本量是啥","like_count":0},{"had_liked":false,"id":316144,"user_name":"张皓","can_delete":false,"product_type":"c1","uid":1264178,"ip_address":"","ucode":"AEF620DB7F8522","user_header":"https://static001.geekbang.org/account/avatar/00/13/4a/32/5605e892.jpg","comment_is_top":false,"comment_ctime":1634179373,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100065501,"comment_content":"“因为评价指标的波动范围是[1.86%,2.14%]，所以我们可以得出实验组的升级率 2.4% 并不属于正常范围，很有可能显著不同于对照组。”\n这个我是怎么算的呢？我根据数据来算，发现对不上","like_count":1},{"had_liked":false,"id":382811,"user_name":"金海涛","can_delete":false,"product_type":"c1","uid":2735297,"ip_address":"北京","ucode":"90064E9BCD4514","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJW1mt6zS8bNAxbq2tjIPQbSoDUzDgia8Q52Ns7CxxhxaF5GAqbGiam8iaOQyic3fO9lnqVkcOhtNXXSw/132","comment_is_top":false,"comment_ctime":1698065803,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100065501,"comment_content":" 想问一个问题，目前我们在比较试验结果显著性的时候，经常采用的是test&amp;control A diff 绝对值大于等于 controlA&amp;control AAdiff， 这种评价方式对吗？","like_count":0},{"had_liked":false,"id":382810,"user_name":"金海涛","can_delete":false,"product_type":"c1","uid":2735297,"ip_address":"北京","ucode":"90064E9BCD4514","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJW1mt6zS8bNAxbq2tjIPQbSoDUzDgia8Q52Ns7CxxhxaF5GAqbGiam8iaOQyic3fO9lnqVkcOhtNXXSw/132","comment_is_top":false,"comment_ctime":1698065661,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100065501,"comment_content":"想问一个问题，目前我们经常在做实验， 针对实验的结果判断是否置信，会考虑","like_count":0},{"had_liked":false,"id":372883,"user_name":"Adam twe","can_delete":false,"product_type":"c1","uid":3554694,"ip_address":"北京","ucode":"F83240D9C019FE","user_header":"https://static001.geekbang.org/account/avatar/00/36/3d/86/1df02f3c.jpg","comment_is_top":false,"comment_ctime":1681743549,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100065501,"comment_content":"老师python置信区间咋算的啊 网上没找到合适的参数输入","like_count":0},{"had_liked":false,"id":349665,"user_name":"阿东","can_delete":false,"product_type":"c1","uid":2842654,"ip_address":"","ucode":"60D313ED25AA17","user_header":"https://static001.geekbang.org/account/avatar/00/2b/60/1e/5c133cf0.jpg","comment_is_top":false,"comment_ctime":1656213329,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100065501,"comment_content":"博伟老师你好，请教个问题，假设实验组和对照组各100人，我可以用z检验检验两组的转化人数比例是否有显著差异。那如果100人每个人有不同的转化金额，我可以直接用z检验检验金额的转化率吗？","like_count":0},{"had_liked":false,"id":342294,"user_name":"Mikey","can_delete":false,"product_type":"c1","uid":1188191,"ip_address":"","ucode":"3EC73395031E88","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/5f/9e1300d3.jpg","comment_is_top":false,"comment_ctime":1650174378,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100065501,"comment_content":"如果实验结论预期和后续上线情况不一致，一定是实验出了问题是嘛？","like_count":0},{"had_liked":false,"id":326200,"user_name":"求知鸟","can_delete":false,"product_type":"c1","uid":1309134,"ip_address":"","ucode":"76249BB4897629","user_header":"https://static001.geekbang.org/account/avatar/00/13/f9/ce/4985c6fc.jpg","comment_is_top":false,"comment_ctime":1639414222,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100065501,"comment_content":"Z检验：一般用于大样本（即样本容量大于30）平均值差异性检验的方法。它是用标准正态分布的理论来推断差异发生的概率，从而比较两个平均数的差异是否显著。在国内也被称作u检验。\n\nT检验：主要用于样本含量较小（例如n &lt; 30），总体标准差σ未知的正态分布。T检验是用t分布理论来推论差异发生的概率，从而比较两个平均数的差异是否显著。\n\n和老师给出的建议有违背？","like_count":0},{"had_liked":false,"id":313359,"user_name":"will_liu","can_delete":false,"product_type":"c1","uid":1790757,"ip_address":"","ucode":"B6902365D90798","user_header":"https://static001.geekbang.org/account/avatar/00/1b/53/25/91e7485e.jpg","comment_is_top":false,"comment_ctime":1632389175,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100065501,"comment_content":"每天可以得到的样本量是啥","like_count":0}]}