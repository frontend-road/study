{"id":781435,"title":"04｜本地部署：如何本地化部署开源大模型ChatGLM3-6B？","content":"<p>你好，我是独行。</p><p>前面听我讲了这么多，相信你也很想上手试一试了。从这节课开始，我们进入一个新的章节，这部分我们会学习如何部署开源大模型ChatGLM3-6B，本地搭建向量库并结合LangChain做检索增强（RAG），并且我会带你做一次微调，从头学习<strong>大模型的部署、微调、推理</strong>等过程。</p><p>这节课我们就来讲一下如何本地化部署ChatGLM3-6B（后面我们简称为6B）。讲6B之前我们先整体看一下目前国内外大模型的发展状况，以便我们进行技术选型。</p><h2>大模型的选择</h2><p>当前环境下，大模型百花齐放。我筛选出了一些核心玩家，你可以看一下表格。非核心的其实还有很多，这里我就不一一列举了。厂商虽然很多，但真正在研究技术的没多少，毕竟前面我们讲过，玩大模型投入非常大，光看得见的成本，包括人才、训练和硬件费用，一年就得投入几个亿，不是一般玩家能玩得起的。</p><p><img src=\"https://static001.geekbang.org/resource/image/a4/a0/a4e540e0b41d3d58e2cec92ae15d38a0.png?wh=2532x1340\" alt=\"图片\"></p><p>当然，也有不少厂商是基于LLaMA爆改的，或者叫套壳，不是真正意义上的自研大模型。</p><p>ChatGLM-6B和LLaMA2是目前开源项目比较热的两个，早在2023年年初，国内刚兴起大模型热潮时，智谱AI就开源了ChatGLM-6B，当然130B也可以拿过来跑，只不过模型太大，需要比较多的显卡，所以很多人就部署6B试玩。</p><!-- [[[read_end]]] --><p>从长远看，信创大潮下，国产大模型肯定是首选，企业布局AI大模型，要么选择MaaS服务，调用大厂大模型API，要么选择开源大模型，自己微调、部署，为上层应用提供服务。使用MaaS服务会面临数据安全问题，所以一般企业会选择私有化部署+公有云MaaS混合的方式来架构。在国产厂商里面，光从技术角度讲，我认为智谱AI是国内大模型研发水平最高的厂商，这也是我选择ChatGLM-6B的原因。</p><p>还有一点需要考虑，就是6B参数规模为62亿，单张3090显卡就可以进行微调（P-Turing）和推理，对于中小企业而言，简直就是福音。</p><p><img src=\"https://static001.geekbang.org/resource/image/af/8b/af978014b18d697cd68257e62975ec8b.png?wh=2540x1054\" alt=\"图片\"></p><p>当然，如果企业预算充足（百万以上），可以尝试6B的老大哥GLM-130B，简称130B，千亿参数规模，推理能力更强，使用130B的话除了GPU资源费用，还需要进行商业授权，这个要注意。</p><p><img src=\"https://static001.geekbang.org/resource/image/a5/9a/a53215243f9b534bdbyy5dd038d0779a.png?wh=2438x580\" alt=\"图片\"></p><p>下面我们讲讲预算不足的情况下，怎么搞定显卡资源？</p><h2>如何搞定显卡资源？</h2><p>玩儿大模型第一步就是要想办法解决计算资源问题，要么CPU要么GPU，当然还有TPU，不过TPU太小众，这里我就不介绍了。我建议你想办法申请GPU，因为适合CPU计算的大模型不多，有些大模型可以在CPU上进行推理，但是需要使用低精度轻量化模型，而低精度下模型会失真，效果肯定不行，只适合简单把玩。如果要真正体验并应用到实际项目，必须上GPU。那我们可以从哪些渠道去购买GPU呢？</p><ol>\n<li><strong>购买二手显卡</strong>：无论是个人使用还是企业使用，都可以考虑在网上购买二手RTX3090显卡，单卡24G显存，8000块左右，可以用于本地微调、推理。如果想用在产品上，也可以通过云服务做映射，提供简单的推理服务，但是不适合为大规模客户提供服务。</li>\n<li><strong>淘宝租赁显卡资源</strong>：适合个人学习使用，可以按天/周/月/年购买服务，比较灵活，成本也不高。</li>\n<li><strong>在线GPU租赁</strong>：比如autodl、RTX3090-24G，每月大概不到900块钱，也很划算。不仅仅可以用来本地测试，还可以用于生产环境推理，如果用在生产环境的话，最好按照实际推理需求，评估每秒推理量（具体方法我会在大模型应用架构部分讲解），搭建高可用推理环境。</li>\n<li><strong>各个平台免费资源</strong>：比如阿里云PAI平台、智谱AI的开放平台等，对于新人都有一定的免费GPU额度，这个方式省钱，但是不推荐，因为有时需要为平台推广拉人，也挺耗时间的。</li>\n</ol><h2>ChatGLM3-6B部署</h2><p>ChatGLM-6B目前已经发展到第3代ChatGLM3-6B，除了中英文推理，还增强了数学、代码等推理能力，我记得一年前的6B在代码或者数学方面是比较弱的。根据目前的官方信息，在语义、数学、推理、代码、知识等不同角度的数据集上测评显示，ChatGLM3-6B-Base在10B以下的基础模型中性能是最强的，除此之外，还具有8K、32K、128K等多个长文理解能力版本。下面我们就一步一步来安装部署ChatGLM3-6B，你也可以在<a href=\"https://github.com/THUDM/ChatGLM3\">官方文档</a>里找到安装教程。</p><h4>准备环境</h4><p>操作系统推荐Linux环境，如Ubuntu或者CentOS。</p><p><img src=\"https://static001.geekbang.org/resource/image/0c/eb/0c3defe2984a1f29721b5920016104eb.png?wh=2314x606\" alt=\"图片\"></p><ul>\n<li>Python推荐3.10～3.11版本。</li>\n<li>Transformers库推荐4.36.2版本。</li>\n<li>Torch 推荐使用 2.0 及以上的版本，以获得最佳的推理性能。</li>\n</ul><h4>克隆代码</h4><pre><code class=\"language-python\">git clone https://github.com/THUDM/ChatGLM3\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/e5/bc/e53bcfdc761101b5a5e55b4f58dd6dbc.png?wh=1022x223\" alt=\"图片\"></p><h4>安装依赖</h4><p>注意：要切换成国内pip源，比如阿里云，下载会快很多。</p><pre><code class=\"language-python\">pip config set global.index-url&nbsp;https://mirrors.aliyun.com/pypi/simple/\ncd ChatGLM3\npip install -r requirements.txt\n</code></pre><p>显示以下内容表明依赖安装成功。</p><p><img src=\"https://static001.geekbang.org/resource/image/e8/4b/e8b4f77dff6dd93ab9554e2853cc564b.png?wh=1914x594\" alt=\"图片\"></p><h4>下载模型</h4><pre><code class=\"language-python\">git clone https://huggingface.co/THUDM/chatglm3-6b\n</code></pre><p>如果Huggingface下载比较慢的话，也可以选择ModelScope进行下载。下载完将chatglm3-6b文件夹重新命名成model并放在ChatGLM3文件夹下，这一步非必需，只要放在一个路径下，在下一步提示的文件里，指定好模型文件路径即可。</p><h4>命令行模式启动</h4><p>打开文件 <code>basic_demo/cli_demo.py</code>，修改模型加载路径。</p><pre><code class=\"language-python\">MODEL_PATH = os.environ.get('MODEL_PATH', '../model')\n</code></pre><p>执行 <code>python cli_demo.py</code>。<br>\n<img src=\"https://static001.geekbang.org/resource/image/b9/1b/b9c920372yy65521df248f8efb66b01b.png?wh=1906x537\" alt=\"图片\"></p><h4>Web控制台模式启动</h4><p>打开文件 <code>basic_demo/web_demo_gradio.py</code>，修改模型加载路径。</p><pre><code class=\"language-python\">MODEL_PATH = os.environ.get('MODEL_PATH', '../model')\n</code></pre><p>同时修改最后一行：</p><pre><code class=\"language-python\">demo.launch(server_name=\"127.0.0.1\", server_port=7870, inbrowser=True, share=False)\n</code></pre><p>server_name修改为本地IP，并指定端口server_port即可。也可以设置share=True，使用gradio提供的链接进行访问。</p><p>执行 <code>python web_demo_gradio.py</code>。</p><p><img src=\"https://static001.geekbang.org/resource/image/70/fa/70cbbe44362d1548094f77a959e7c1fa.png?wh=2452x1436\" alt=\"图片\"></p><p>默认情况下，模型以FP16精度加载，大概需要13GB显存。如果你的电脑没有GPU，只能通过CPU启动，6B也是支持的，需要大概32G的内存。我们修改一下模型加载脚本。</p><pre><code class=\"language-python\">model = AutoModel.from_pretrained(MODEL_PATH trust_remote_code=True).float()\n</code></pre><p>如果你的电脑有GPU，但是显存不够，也可以通过修改模型加载脚本，在4-bit量化下运行，只需要6GB左右的显存就可以进行流程推理。</p><pre><code class=\"language-python\">model = AutoModel.from_pretrained(MODEL_PATH, trust_remote_code=True, ).quantize(4).cuda()\n</code></pre><p>同时，官方也提供了一个全新的web demo，支持Chat、Tool、Code Interpreter，就在我们克隆下来的代码里，在文件夹composite_demo下。</p><pre><code class=\"language-python\">cd composite_demo\npip install -r requirements.txt\nexport MODEL_PATH=../model\nstreamlit run main.py 或者 python -m streamlit run main.py\n</code></pre><p>页面确实上了一个档次。</p><p><img src=\"https://static001.geekbang.org/resource/image/28/06/284f2c42be5dd945ee495163602aff06.png?wh=2804x1432\" alt=\"图片\"></p><p>接下来我简单总结一下部署过程：</p><ol>\n<li>安装Python环境，包含pip；</li>\n<li>下载代码；</li>\n<li>下载模型；</li>\n<li>安装依赖；</li>\n<li>修改示例代码，指定模型路径、精度等参数；</li>\n<li>命令行启动。</li>\n</ol><p>整体来说，如果Python版本在3.10～3.11之间，网络环境也没问题的话，安装还是很快的，如果有GPU的话，推理效果也是很好的。在我们部署好模型之后，就可以进行推理了。推理之前，6B有几个参数可以进行设置，就是<strong>超参数</strong>，用来控制模型的推理准确度，我们知道大模型推理每次给的回答可能都和之前不一样，这也是为什么大模型不能用来处理精确度要求很高的任务的原因，比如让大模型算个税、算工资等等。</p><h2>超参数介绍</h2><p>ChatGLM3-6B有3个参数可以设置。</p><ol>\n<li>max_length：模型的总token限制，包括输入和输出的tokens。</li>\n<li>temperature：模型的温度。温度只是调整单词的概率分布。它最终的宏观效果是，在较低的温度下，我们的模型更具确定性，而在较高的温度下，则不那么确定。数字越小，给出的答案越精确。</li>\n<li>top_p：模型采样策略参数。每一步只从累积概率超过某个阈值 p 的最小单词集合中进行随机采样，而不考虑其他低概率的词。只关注概率分布的核心部分，忽略了尾部。</li>\n</ol><p>对于以下场景，官方推荐使用这样的参数进行设置：</p><p><img src=\"https://static001.geekbang.org/resource/image/fa/58/faf0a74ffb6d1766d3d309442a6f5358.png?wh=2544x1346\" alt=\"图片\"></p><p>系统设置好，我们基本就可以开始进行问答了，ChatGLM3-6B采用了一种新的Prompt格式，看上去应该是模仿的ChatGPT。下面我们介绍下这种提问格式。</p><h2>新的Prompt格式</h2><p>新的提示格式，主要是增加了几个角色，在对话场景中，有且仅有以下三种角色。</p><ul>\n<li>system：系统信息，出现在消息的最前面，可以指定回答问题的角色。</li>\n<li>user：我们提的问题。</li>\n<li>assistant：大模型给出的回复。</li>\n</ul><p>在代码场景中，有且仅有user、assistant、system、observation四种角色。observation是外部返回的结果，比如调用外部API，代码执行逻辑等返回的结果，都通过observation返回。observation必须放在assistant之后。</p><p>下面这个是官方提供的例子，基本把以上4种角色都解释清楚了。</p><pre><code class=\"language-python\">&lt;|system|&gt;\nAnswer the following questions as best as you can. You have access to the following tools:\n[\n&nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; \"name\": \"get_current_weather\",\n&nbsp; &nbsp; &nbsp; &nbsp; \"description\": \"Get the current weather in a given location\",\n&nbsp; &nbsp; &nbsp; &nbsp; \"parameters\": {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"type\": \"object\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"properties\": {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"location\": {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"type\": \"string\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"description\": \"The city and state, e.g. San Francisco, CA\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"unit\": {\"type\": \"string\"},\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"required\": [\"location\"],\n&nbsp; &nbsp; &nbsp; &nbsp; },\n&nbsp; &nbsp; }\n]\n&lt;|user|&gt;\n今天北京的天气怎么样？\n&lt;|assistant|&gt;\n好的，让我们来查看今天的天气\n&lt;|assistant|&gt;get_current_weather\n\n\n```python\ntool_call(location=\"beijing\", unit=\"celsius\")\n\n&lt;|observation|&gt;\n{\"temperature\": 22}\n&lt;|assistant|&gt;\n根据查询结果，今天北京的气温为 22 摄氏度。\n</code></pre><p>为什么会这么设计呢？</p><p>首先，当前阶段的大模型经过训练后，都可以遵守系统消息，而系统消息不算用户对话的一部分，与用户是隔离的，但是可以控制模型与用户交互的范围，比如我们在system角色里指定模型充当Java技术专家，那么就可以指导模型的输出偏向于Java技术范围。</p><p>还有一个原因就是<strong>防止用户进行输入注入攻击</strong>。在进行多轮对话的时候，每次新的对话都会把历史对话都带进去。如果我们在前面的对话中，告诉模型错误的提示，那么这些错误的提示会在后续的对话中被当作正确的上下文带进去。我们知道基于自回归的模型，会根据上下文进行内容推理，这样就可能生成错误的内容。角色可以使内容更加容易区分，增加注入攻击的复杂度。这种方式不一定能处理所有的攻击类型，类似于我们日常开发中的XSS注入，只能尽可能减少，完全避免有点难。</p><h2>小结</h2><p>这节课我们学习了如何部署6B。从模型的选择到环境配置再到模型启动、推理，整体来说已经比较全面了，如果你在实际操作的过程中遇到环境问题，可以自己Google一下尝试去解决。毕竟每个人的环境不一样，可能会遇到各种各样的问题，主要还是Python相关的多一些。如果这一节课有些内容你没有看懂也不用急，先把模型部署及推理这一块熟悉一下，后面我们会逐渐深入地讲解。</p><p><img src=\"https://static001.geekbang.org/resource/image/e1/6e/e18c5ee37836cd26025a2b2ed60f546e.png?wh=2484x1390\" alt=\"图片\"></p><h2>思考题</h2><p>我们知道ChatGLM3-6B是一个具有62亿参数规模的大语言模型，那你知道大模型的参数是什么意思吗？62亿表示什么？欢迎你把你的观点分享到评论区，我们一起讨论，如果你觉得这节课的内容对你有帮助的话，也欢迎你分享给其他朋友，我们下节课再见！</p><p><a href=\"https://jinshuju.net/f/D8y8pw\">戳此加入课程交流群</a></p>","comments":[{"had_liked":false,"id":391586,"user_name":"徐石头","can_delete":false,"product_type":"c1","uid":1035885,"ip_address":"湖南","ucode":"D8FA8A64FB7E33","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ce/6d/530df0dd.jpg","comment_is_top":false,"comment_ctime":1718600875,"is_pvip":true,"replies":[{"id":142388,"content":"感谢分享👍","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1718609444,"ip_address":"浙江","comment_id":391586,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100770601,"comment_content":"1. 网络问题，可以用国内的地址，https:&#47;&#47;gitee.com&#47;mirrors&#47;chatglm3和 https:&#47;&#47;www.modelscope.cn&#47;ZhipuAI&#47;chatglm3-6b.git，注意不要用 hf 的，模型不全报错\n2. 显卡驱动问题，需要把N 卡驱动最低升级到11.8，要先卸载干净旧驱动，再升级。\n3. chatglm 如果没有找到 GPU，就会使用 CPU 运算，响应速度会非常慢，用 TOP 查看 CPU 使用率\n4. 注意 cuda 版本和pytorch的版本一定要匹配，这里我踩了坑","like_count":12,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646720,"discussion_content":"感谢分享👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1718609444,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":392475,"user_name":"张 ·万岁！","can_delete":false,"product_type":"c1","uid":3923442,"ip_address":"北京","ucode":"C95598C751FCC1","user_header":"https://static001.geekbang.org/account/avatar/00/3b/dd/f2/3513c633.jpg","comment_is_top":false,"comment_ctime":1721043479,"is_pvip":false,"replies":[{"id":142685,"content":"赞","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1721380544,"ip_address":"浙江","comment_id":392475,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100770601,"comment_content":"现在是24年7月15，刚刚结束这个模型部署模块。我使用的是阿里云的PAI平台，如果有人和我一样希望我能帮到你们。\n1.git clone https:&#47;&#47;github.com&#47;THUDM&#47;ChatGLM3换成git clone https:&#47;&#47;gitee.com&#47;mirrors&#47;chatglm3。因为阿里云不支持HF\n2.下载模型不要用git clone https:&#47;&#47;huggingface.co&#47;THUDM&#47;chatglm3-6b，我尝试过各种各样的lfs，都不好用。先pip install modelscope，然后使用python代码from modelscope import snapshot_download\nmodel_dir = snapshot_download(&quot;ZhipuAI&#47;chatglm3-6b&quot;, revision = &quot;v1.0.0&quot;)，他会下载到cache区，使用linux基本指令移过来就好\n3.MODEL_PATH = os.environ.get(&#39;MODEL_PATH&#39;, &#39;..&#47;model&#39;)这里，一定要用绝对地址！！！！\n4.UnicodeDecodeError: &#39;utf-8&#39; codec can&#39;t decode byte 0xe8 in position 24: invalid continuation byte如果有编码问题，命令行改编码export LANGUAGE=en_US.UTF-8，因为他一开始是zh_CN.UTF-8，一定要改成en_US.UTF-8。输入locale检查一下，确保都是en_US.UTF-8\n5.使用综合web那个案例中，记得去client中改一下# MODEL_PATH = os.environ.get(&#39;MODEL_PATH&#39;, &#39;THUDM&#47;chatglm3-6b&#39;)\nMODEL_PATH = os.environ.get(&#39;MODEL_PATH&#39;, &#39;&#47;mnt&#47;workspace&#47;modelscope&#47;hub&#47;ZhipuAI&#47;chatglm3-6b&#39;)\n而且，这里transformers和huggingface_hub版本不能太高，我的transformer是4.30.2，huggingface_hub是0.19.0","like_count":6,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":648326,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1721380544,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":392200,"user_name":"微笑的向日葵","can_delete":false,"product_type":"c1","uid":1099151,"ip_address":"中国香港","ucode":"90659BD4413DF1","user_header":"https://static001.geekbang.org/account/avatar/00/10/c5/8f/80443115.jpg","comment_is_top":false,"comment_ctime":1720245504,"is_pvip":false,"replies":[{"id":142588,"content":"感谢分享！","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1720519209,"ip_address":"浙江","comment_id":392200,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100770601,"comment_content":"我本地跑起来了   redmi G 2020  Windows 环境 ，  显卡： RTX 3060 laptop  参考 的是 \nhttps:&#47;&#47;www.bilibili.com&#47;video&#47;BV1ce411J7nZ&#47;?p=33&amp;spm_id_from=pageDriver&amp;vd_source=c16aa13fad5b13a7c51efcfcad58e883\n\nhttps:&#47;&#47;www.bilibili.com&#47;read&#47;cv29866295&#47;\n\n很详细 ","like_count":4,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":647724,"discussion_content":"感谢分享！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1720519210,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1819176,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/c2/28/32fdc447.jpg","nickname":"newchaos","note":"","ucode":"EBC1909694A0F4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":654163,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1732060172,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391415,"user_name":"Eleven","can_delete":false,"product_type":"c1","uid":1168452,"ip_address":"湖南","ucode":"FB4A0C8CA732BE","user_header":"https://static001.geekbang.org/account/avatar/00/11/d4/44/0ec958f4.jpg","comment_is_top":false,"comment_ctime":1718204239,"is_pvip":false,"replies":[{"id":142350,"content":"没错，可以结合例子理解下参数的训练过程","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1718242024,"ip_address":"浙江","comment_id":391415,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100770601,"comment_content":"大模型的参数指的是在模型训练过程中需要学习和确定的变量或数值。这些参数决定了模型如何处理输入数据并生成相应的输出。在深度学习和自然语言处理领域，模型的参数数量通常与模型的复杂性和功能强大程度有关。","like_count":2,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646577,"discussion_content":"没错，可以结合例子理解下参数的训练过程","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1718242024,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391406,"user_name":"Geek_5203b4","can_delete":false,"product_type":"c1","uid":3905342,"ip_address":"福建","ucode":"110A14CF86181D","user_header":"","comment_is_top":false,"comment_ctime":1718195732,"is_pvip":false,"replies":[{"id":142349,"content":"大，这几个超参数你可以暴漏给用户，作为用户选项，不知道你有没有用过微软的copilot，页面上就有三个选项：有创造力、平衡、精确，我猜测底层就是通过这几个超参数控制的","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1718241985,"ip_address":"浙江","comment_id":391406,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100770601,"comment_content":"学习打卡~想请教老师一个问题，temperature和top_p对生成的结果影响大吗？如何测试到最佳的数值呢？谢谢老师！","like_count":2,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646576,"discussion_content":"大，这几个超参数你可以暴漏给用户，作为用户选项，不知道你有没有用过微软的copilot，页面上就有三个选项：有创造力、平衡、精确，我猜测底层就是通过这几个超参数控制的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1718241985,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391399,"user_name":"Geek_6bdb4e","can_delete":false,"product_type":"c1","uid":2720810,"ip_address":"河北","ucode":"2953D400AA5385","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/xfclWEPQ7szTZnKqnX9icSbgDWV0VAib3Cyo8Vg0OG3Usby88ic7ZgO2ho5lj0icOWI4JeJ70zUBiaTW1xh1UCFRPqA/132","comment_is_top":false,"comment_ctime":1718185872,"is_pvip":false,"replies":[{"id":142340,"content":"可以的，而且很多时候是决定性理由，目前信创大潮下，有些企业尤其是央国企，已经发文必须使用国产化软件，像操作系统、数据库、服务器等等都必须用国产的。大模型私有化部署一般来说都是稍微大一点的企业玩的，即便并不是所有公司都要求必须使用国产化软件，但是它是一个属性，企业可以自主选择。","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1718192546,"ip_address":"浙江","comment_id":391399,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100770601,"comment_content":"国产也能成为推荐理由吗","like_count":2,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646550,"discussion_content":"可以的，而且很多时候是决定性理由，目前信创大潮下，有些企业尤其是央国企，已经发文必须使用国产化软件，像操作系统、数据库、服务器等等都必须用国产的。大模型私有化部署一般来说都是稍微大一点的企业玩的，即便并不是所有公司都要求必须使用国产化软件，但是它是一个属性，企业可以自主选择。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1718192546,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":393654,"user_name":"go home","can_delete":false,"product_type":"c1","uid":1611299,"ip_address":"广东","ucode":"63BE127479BDE1","user_header":"https://static001.geekbang.org/account/avatar/00/18/96/23/a5cd0e1b.jpg","comment_is_top":false,"comment_ctime":1724492127,"is_pvip":false,"replies":[{"id":143033,"content":"可以用LLaMA3，文中使用6B，一来是因为课程做的比较早，二来支持国产化软件","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1725530333,"ip_address":"浙江","comment_id":393654,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100770601,"comment_content":"爲什麽不用LLaMA3呢，它在推理上面更加具有優勢。","like_count":1,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":650743,"discussion_content":"可以用LLaMA3，文中使用6B，一来是因为课程做的比较早，二来支持国产化软件","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1725530333,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":392213,"user_name":"阿斯蒂芬","can_delete":false,"product_type":"c1","uid":1024164,"ip_address":"广东","ucode":"61D5E3BDA4EBC5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a0/a4/b060c723.jpg","comment_is_top":false,"comment_ctime":1720273958,"is_pvip":false,"replies":[{"id":142596,"content":"参考这里的说明：https:&#47;&#47;github.com&#47;THUDM&#47;ChatGLM-6B&#47;blob&#47;main&#47;README.md","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1720605399,"ip_address":"浙江","comment_id":392213,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100770601,"comment_content":"「如果你的电脑有 GPU，但是显存不够，也可以通过修改模型加载脚本，在 4-bit 量化下运行，只需要 6GB 左右的显存就可以进行流程推理。」如果没有GPU呢，怎么跑量化？\n\nwin本，32G mem，纯cpu 跑还是挺吃力的，速度慢到怀疑人生。今天折腾了下使用 chatglm.cpp 成功部署了量化版，速度杠杠滴。","like_count":1,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":647789,"discussion_content":"参考这里的说明：https://github.com/THUDM/ChatGLM-6B/blob/main/README.md","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1720605399,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391517,"user_name":"Eleven","can_delete":false,"product_type":"c1","uid":1168452,"ip_address":"湖南","ucode":"FB4A0C8CA732BE","user_header":"https://static001.geekbang.org/account/avatar/00/11/d4/44/0ec958f4.jpg","comment_is_top":false,"comment_ctime":1718374684,"is_pvip":false,"replies":[{"id":142368,"content":"可以参考下这个文章：https:&#47;&#47;github.com&#47;chatchat-space&#47;Langchain-Chatchat&#47;issues&#47;3103","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1718413820,"ip_address":"浙江","comment_id":391517,"utype":1}],"discussion_count":5,"race_medal":0,"score":2,"product_id":100770601,"comment_content":"RuntimeError: Internal: could not parse ModelProto from ..&#47;model&#47;tokenizer.model","like_count":1,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646644,"discussion_content":"可以参考下这个文章：https://github.com/chatchat-space/Langchain-Chatchat/issues/3103","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1718413820,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":1,"child_discussions":[{"author":{"id":3923442,"avatar":"https://static001.geekbang.org/account/avatar/00/3b/dd/f2/3513c633.jpg","nickname":"张 ·万岁！","note":"","ucode":"C95598C751FCC1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":647979,"discussion_content":"我也出现了这个问题，按照他的步骤做也不管用啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1720870511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":646644,"ip_address":"新加坡","group_id":0},"score":647979,"extra":""}]},{"author":{"id":1008257,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/81/ad80f427.jpg","nickname":"Lane","note":"","ucode":"F70459D1BBD9F4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":649475,"discussion_content":"本质是安装 git lfs（git大文件）      https://git-lfs.com/\n然后重新执行git clone https://www.modelscope.cn/ZhipuAI/chatglm3-6b.git 即可\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1723460286,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1039351,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/db/f7/29cff40f.jpg","nickname":"星","note":"","ucode":"652BF9B9DB377B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1008257,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/81/ad80f427.jpg","nickname":"Lane","note":"","ucode":"F70459D1BBD9F4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":650904,"discussion_content":"多谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1725850912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":649475,"ip_address":"北京","group_id":0},"score":650904,"extra":""},{"author":{"id":1039351,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/db/f7/29cff40f.jpg","nickname":"星","note":"","ucode":"652BF9B9DB377B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1008257,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/81/ad80f427.jpg","nickname":"Lane","note":"","ucode":"F70459D1BBD9F4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":650906,"discussion_content":"我卡在这里好久，以为是Python版本的问题，换了好几个也不行。把git lfs安上就可以了。\nLinux下的安装方法：https://github.com/git-lfs/git-lfs/blob/main/INSTALLING.md","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1725852216,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":649475,"ip_address":"北京","group_id":0},"score":650906,"extra":""}]}]},{"had_liked":false,"id":391394,"user_name":"张申傲","can_delete":false,"product_type":"c1","uid":1182372,"ip_address":"北京","ucode":"22D46BC529BA8A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0a/a4/828a431f.jpg","comment_is_top":false,"comment_ctime":1718179548,"is_pvip":false,"replies":[{"id":142344,"content":"哈哈，参数就是权重和偏置，具体什么是权重什么是偏置，我们后面的课程中有详细的介绍，有疑问可以随时问我。","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1718192903,"ip_address":"浙江","comment_id":391394,"utype":1}],"discussion_count":1,"race_medal":2,"score":2,"product_id":100770601,"comment_content":"第4讲打卡~\n关于思考题，问了下ChatGPT，回答如下：\n大模型的参数指的是模型中的可调整的变量，这些变量决定了模型如何处理输入数据并生成输出。在人工智能和机器学习中，参数是模型学习和适应新数据的关键部分。常见的参数如权重（w）和偏置（b）。","like_count":1,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646554,"discussion_content":"哈哈，参数就是权重和偏置，具体什么是权重什么是偏置，我们后面的课程中有详细的介绍，有疑问可以随时问我。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1718192904,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":394509,"user_name":"Geek_0a4616","can_delete":false,"product_type":"c1","uid":1670730,"ip_address":"江苏","ucode":"9C37ED61ECCAC2","user_header":"","comment_is_top":false,"comment_ctime":1727012405,"is_pvip":false,"replies":[{"id":143237,"content":"看情况，词汇表可以单独放在文件里","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1727345566,"ip_address":"浙江","comment_id":394509,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100770601,"comment_content":"老师 大模型 最终推理出来的是个数字，数字和词汇的映射关系 是存在权重文件 https:&#47;&#47;huggingface.co&#47;THUDM&#47;chatglm3-6b 里面的吗？","like_count":0,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":651730,"discussion_content":"看情况，词汇表可以单独放在文件里","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1727345566,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":393037,"user_name":"赵鹏","can_delete":false,"product_type":"c1","uid":2988258,"ip_address":"广东","ucode":"944B2DEFF548FC","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEJVo4SoLPrD4iauzuPMy4F63fsUhicZTeGbYrQTc9rB1kkMgoSGgTgxkLCRSKbFc0GicXBwq4hU9tH4EClnwWIYrp6ARalcvayQiauzWlZrQS0GAA/132","comment_is_top":false,"comment_ctime":1722568388,"is_pvip":false,"replies":[{"id":142821,"content":"Google尝试解决下","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1723198385,"ip_address":"浙江","comment_id":393037,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100770601,"comment_content":"pip3 install -r requirements.txt 执行报错，日志如下，请问如何解决？谢谢！\n\n  ERROR: Command errored out with exit status 1:\n   command: &#47;Library&#47;Developer&#47;CommandLineTools&#47;usr&#47;bin&#47;python3 &#47;Library&#47;Developer&#47;CommandLineTools&#47;Library&#47;Frameworks&#47;Python3.framework&#47;Versions&#47;3.9&#47;lib&#47;python3.9&#47;site-packages&#47;pip&#47;_vendor&#47;pep517&#47;in_process&#47;_in_process.py get_requires_for_build_wheel &#47;var&#47;folders&#47;d_&#47;zyrnlk3j65l1rrm5vlz_khnm0000gn&#47;T&#47;tmpi1loqnkg\n       cwd: &#47;private&#47;var&#47;folders&#47;d_&#47;zyrnlk3j65l1rrm5vlz_khnm0000gn&#47;T&#47;pip-install-axuijjbp&#47;vllm_bde8e7d4069844fcbf5e5312fb56958f\n  Complete output (20 lines):\n  fatal: not a git repository (or any of the parent directories): .git\n  setup.py:56: RuntimeWarning: Failed to get commit hash:\n  Command &#39;[&#39;git&#39;, &#39;rev-parse&#39;, &#39;HEAD&#39;]&#39; returned non-zero exit status 128.\n    embed_commit_hash()\n  Traceback (most recent call last):\n    File &quot;&#47;Library&#47;Developer&#47;CommandLineTools&#47;Library&#47;Frameworks&#47;Python3.framework&#47;Versions&#47;3.9&#47;lib&#47;python3.9&#47;site-packages&#47;pip&#47;_vendor&#47;pep517&#47;in_process&#47;_in_process.py&quot;, line 349, in &lt;module&gt;\n      main()\n    File &quot;&#47;Library&#47;Developer&#47;CommandLineTools&#47;Library&#47;Frameworks&#47;Python3.framework&#47;Versions&#47;3.9&#47;lib&#47;python3.9&#47;site-packages&#47;pip&#47;_vendor&#47;pep517&#47;in_process&#47;_in_process.py&quot;, line 331, in main\n      json_out[&#39;return_val&#39;] = hook(**hook_input[&#39;kwargs&#39;])\n    File &quot;&#47;Library&#47;Developer&#47;CommandLineTools&#47;Library&#47;Frameworks&#47;Python3.framework&#47;Versions&#47;3.9&#47;lib&#47;python3.9&#47;site-packages&#47;pip&#47;_vendor&#47;pep517&#47;in_process&#47;_in_process.py&quot;, line 117, in get_requires_for_build_wheel\n      return hook(config_settings)\n    File &quot;&#47;Library&#47;Developer&#47;CommandLineTools&#47;Library&#47;Frameworks&#47;Python3.framework&#47;Versions&#47;3.9&#47;lib&#47;python3.9&#47;site-packages&#47;setuptools&#47;build_meta.py&quot;, line 154, in get_requires_for_build_wheel\n      return self._get_build_requires(\n    File &quot;&#47;Library&#47;Developer&#47;CommandLineTools&#47;Library&#47;Frameworks&#47;Python3.framework&#47;Versions&#47;3.9&#47;lib&#47;python3.9&#47;site-packages&#47;setuptools&#47;build_meta.py&quot;, line 135, in _get_build_requires","like_count":0,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":649359,"discussion_content":"Google尝试解决下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1723198385,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":392900,"user_name":"废物点心的黄金时代","can_delete":false,"product_type":"c1","uid":1157168,"ip_address":"北京","ucode":"14D769C267837D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM4Tkl5dibyG2Wriah2P5FR2dib3KiarXOmoVONicO2yGkoDwLtC0XIjYCiaziaEjYTte3cOuAdxAv5xkCNGdYq841DZePI/132","comment_is_top":false,"comment_ctime":1722095707,"is_pvip":false,"replies":[{"id":142732,"content":"可以用ollama，用自己熟悉的工具即可","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1722307869,"ip_address":"浙江","comment_id":392900,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100770601,"comment_content":"为啥不直接用ollama部署本地模型呢？","like_count":0,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":648846,"discussion_content":"可以用ollama，用自己熟悉的工具即可","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1722307869,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":392777,"user_name":"Twein","can_delete":false,"product_type":"c1","uid":1309882,"ip_address":"海南","ucode":"83498605A39292","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/1G2rlRgNalXbcUnHibRNMibAeHQhWoKNl4e4EgkiawDynZZiaO4W3vSSMtlYEKrt6e7GW4mcu1sjcs7bGKjl0vRhWQ/132","comment_is_top":false,"comment_ctime":1721745570,"is_pvip":false,"replies":[{"id":142740,"content":"Python依赖安装问题可以网上找找解决办法","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1722309408,"ip_address":"浙江","comment_id":392777,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100770601,"comment_content":"执行pip install -r requirements.txt报错：Getting requirements to build wheel ... error\n  error: subprocess-exited-with-error\n  × Getting requirements to build wheel did not run successfully.\n  │ exit code: 1\n  ╰─&gt; [20 lines of output]\n      Traceback (most recent call last):\n        File &quot;D:\\tools\\python\\Lib\\site-packages\\pip\\_vendor\\pyproject_hooks\\_in_process\\_in_process.py&quot;, line 353, in &lt;module&gt;\n          main()\n        File &quot;D:\\tools\\python\\Lib\\site-packages\\pip\\_vendor\\pyproject_hooks\\_in_process\\_in_process.py&quot;, line 335, in main\n          json_out[&#39;return_val&#39;] = hook(**hook_input[&#39;kwargs&#39;])\n                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        File &quot;D:\\tools\\python\\Lib\\site-packages\\pip\\_vendor\\pyproject_hooks\\_in_process\\_in_process.py&quot;, line 118, in get_requires_for_build_wheel\n          return hook(config_settings)\n                 ^^^^^^^^^^^^^^^^^^^^^\n        File &quot;C:\\Users\\twein\\AppData\\Local\\Temp\\pip-build-env-y57aktmf\\overlay\\Lib\\site-packages\\setuptools\\build_meta.py&quot;, line 327, in get_requires_for_build_wheel\n          return self._get_build_requires(config_settings, requirements=[])\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        File &quot;C:\\Users\\twein\\AppData\\Local\\Temp\\pip-build-env-y57aktmf\\overlay\\Lib\\site-packages\\setuptools\\build_meta.py&quot;, line 297, in _get_build_requires\n          self.run_setup()\n        File &quot;C:\\Users\\twein\\AppData\\Local\\Temp\\pip-build-env-y57aktmf\\overlay\\Lib\\site-packages\\setuptools\\build_meta.py&quot;, line 313, in run_setup\n          exec(code, locals())\n        File &quot;&lt;string&gt;&quot;, line 12, in &lt;module&gt;\n        File &quot;C:\\Users\\twein\\AppData\\Local\\Temp\\pip-build-env-y57aktmf\\overlay\\Lib\\site-packages\\torch\\__init__.py&quot;, line 143, in &lt;module&gt;\n          raise err\n      OSError: [WinError 126] 找不到指定的模块。 Error loading &quot;C:\\Users\\twein\\AppData\\Local\\Temp\\pip-build-env-y57aktmf\\overlay\\Lib\\site-packages\\torch\\lib\\fbgemm.dll&quot; or one of its dependencies.\n","like_count":0,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":648858,"discussion_content":"Python依赖安装问题可以网上找找解决办法","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1722309408,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":392718,"user_name":"黄蓉 Jessie","can_delete":false,"product_type":"c1","uid":1033945,"ip_address":"北京","ucode":"F3205D3B9172F0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c6/d9/9058e13c.jpg","comment_is_top":false,"comment_ctime":1721617852,"is_pvip":false,"replies":[{"id":142739,"content":"网上找找解决办法，我没用过M2，M1是能跑起来的，但是很卡，我用的GPU跑的","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1722309375,"ip_address":"浙江","comment_id":392718,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100770601,"comment_content":"MAC M2 pro的电脑安装ChatGLM3的依赖报错， AssertionError: vLLM only supports Linux platform (including WSL).应该是vllm这个包不支持","like_count":0,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":648857,"discussion_content":"网上找找解决办法，我没用过M2，M1是能跑起来的，但是很卡，我用的GPU跑的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1722309375,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":1,"child_discussions":[{"author":{"id":2988258,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEJVo4SoLPrD4iauzuPMy4F63fsUhicZTeGbYrQTc9rB1kkMgoSGgTgxkLCRSKbFc0GicXBwq4hU9tH4EClnwWIYrp6ARalcvayQiauzWlZrQS0GAA/132","nickname":"赵鹏","note":"","ucode":"944B2DEFF548FC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":649046,"discussion_content":"老师，我的MacBook Air （芯片：Apple M1）执行  pip install -r requirements.txt时，也报了这个错，请问有解决方法吗？谢谢！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1722594111,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":648857,"ip_address":"广东","group_id":0},"score":649046,"extra":""}]},{"author":{"id":1008257,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/81/ad80f427.jpg","nickname":"Lane","note":"","ucode":"F70459D1BBD9F4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":649565,"discussion_content":"这个不是必须的，从.requirement.txt里注释掉就行","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1723607494,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":392199,"user_name":"微笑的向日葵","can_delete":false,"product_type":"c1","uid":1099151,"ip_address":"中国香港","ucode":"90659BD4413DF1","user_header":"https://static001.geekbang.org/account/avatar/00/10/c5/8f/80443115.jpg","comment_is_top":false,"comment_ctime":1720245372,"is_pvip":false,"replies":[{"id":142587,"content":"加油","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1720519198,"ip_address":"浙江","comment_id":392199,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100770601,"comment_content":"我的电脑是 redmi G 2020  RTX 3060 laptop  ","like_count":0,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":647723,"discussion_content":"加油","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1720519198,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":392155,"user_name":"Geek_e9e5f5","can_delete":false,"product_type":"c1","uid":2479080,"ip_address":"海南","ucode":"C848B4E896A9AF","user_header":"","comment_is_top":false,"comment_ctime":1720095175,"is_pvip":false,"replies":[{"id":142552,"content":"我能理解你的意思。大模型里包含的知识，不是原始的我们理解的知识，而是规律，规律放在权重文件里，也就是我们说的模型里。当我们向模型提问的时候，模型会按照学习好的规律进行推理，最终的答案是由多个词汇组成的，每个词汇就是推理出来的，最后连成了一个完整的答案。再往后学习，你会越来越清晰。","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1720143619,"ip_address":"浙江","comment_id":392155,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100770601,"comment_content":"老师请教您个问题，大模型本地部署的情况，再部署动作结束后，只是部署了大模型代码呢？还是也包括大模型训练之后它拥有的所有记忆知识节点（这块不知道这么描述是不是准确）","like_count":0,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":647523,"discussion_content":"我能理解你的意思。大模型里包含的知识，不是原始的我们理解的知识，而是规律，规律放在权重文件里，也就是我们说的模型里。当我们向模型提问的时候，模型会按照学习好的规律进行推理，最终的答案是由多个词汇组成的，每个词汇就是推理出来的，最后连成了一个完整的答案。再往后学习，你会越来越清晰。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1720143619,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":392083,"user_name":"silentyears","can_delete":false,"product_type":"c1","uid":1061748,"ip_address":"北京","ucode":"6E137BFEB874CA","user_header":"https://static001.geekbang.org/account/avatar/00/10/33/74/d9d143fa.jpg","comment_is_top":false,"comment_ctime":1719904079,"is_pvip":false,"replies":[{"id":142527,"content":"模型是权重文件，代码是一些示例代码，用来演示怎么调用模型","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1719973328,"ip_address":"浙江","comment_id":392083,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100770601,"comment_content":"请问下载的模型和下载的代码有什么区别","like_count":0,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":647381,"discussion_content":"模型是权重文件，代码是一些示例代码，用来演示怎么调用模型","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1719973328,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":392030,"user_name":"Geek_frank","can_delete":false,"product_type":"c1","uid":1685433,"ip_address":"上海","ucode":"534D46C2D1EFF5","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erG6I79WlHDjs51JOff9GBibD4Fh2PhITQMvmh2aTUVzH2BKia1tFLLoQr7VFeZddywwRoZlVUyhDDQ/132","comment_is_top":false,"comment_ctime":1719795228,"is_pvip":false,"replies":[{"id":142512,"content":"可以的，感兴趣的话可以自己研究下，本课程系列没有把ollama考虑进来","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1719816300,"ip_address":"浙江","comment_id":392030,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100770601,"comment_content":"打卡第四课。 大模型的本地部署使用源码本地部署可以是可以，但是感觉就是太麻烦。是不是可以用ollama这种工具来托管大模型，部署和运行都由ollama来实现。而且可以实现不同模型的切换","like_count":0,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":647290,"discussion_content":"可以的，感兴趣的话可以自己研究下，本课程系列没有把ollama考虑进来","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1719816300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":392019,"user_name":"夏龙飞","can_delete":false,"product_type":"c1","uid":3679252,"ip_address":"河南","ucode":"B9981450CB1E90","user_header":"https://static001.geekbang.org/account/avatar/00/38/24/14/4b9add72.jpg","comment_is_top":false,"comment_ctime":1719729173,"is_pvip":false,"replies":[{"id":142514,"content":"看着是模型文件不全哈","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1719817041,"ip_address":"浙江","comment_id":392019,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100770601,"comment_content":"安装模型之后，这个报错咋搞啊\nroot@autodl-container-966c4d9eb4-c83428bd:~&#47;chatglm&#47;chatglm3&#47;basic_demo# python cli_demo.py\nTraceback (most recent call last):\n  File &quot;cli_demo.py&quot;, line 8, in &lt;module&gt;\n    tokenizer = AutoTokenizer.from_pretrained(TOKENIZER_PATH, trust_remote_code=True)\n  File &quot;&#47;root&#47;miniconda3&#47;lib&#47;python3.8&#47;site-packages&#47;transformers&#47;models&#47;auto&#47;tokenization_auto.py&quot;, line 847, in from_pretrained\n    return tokenizer_class.from_pretrained(\n  File &quot;&#47;root&#47;miniconda3&#47;lib&#47;python3.8&#47;site-packages&#47;transformers&#47;tokenization_utils_base.py&quot;, line 2089, in from_pretrained\n    return cls._from_pretrained(\n  File &quot;&#47;root&#47;miniconda3&#47;lib&#47;python3.8&#47;site-packages&#47;transformers&#47;tokenization_utils_base.py&quot;, line 2311, in _from_pretrained\n    tokenizer = cls(*init_inputs, **init_kwargs)\n  File &quot;&#47;root&#47;.cache&#47;huggingface&#47;modules&#47;transformers_modules&#47;chatglm3-6b&#47;tokenization_chatglm.py&quot;, line 109, in __init__    self.tokenizer = SPTokenizer(vocab_file)\n  File &quot;&#47;root&#47;.cache&#47;huggingface&#47;modules&#47;transformers_modules&#47;chatglm3-6b&#47;tokenization_chatglm.py&quot;, line 18, in __init__\n    self.sp_model = SentencePieceProcessor(model_file=model_path)\n  File &quot;&#47;root&#47;miniconda3&#47;lib&#47;python3.8&#47;site-packages&#47;sentencepiece&#47;__init__.py&quot;, line 468, in Init\n    self.Load(model_file=model_file, model_proto=model_proto)\n  File &quot;&#47;root&#47;miniconda3&#47;lib&#47;python3.8&#47;site-packages&#47;sentencepiece&#47;__init__.py&quot;, line 961, in Load\n    return self.LoadFromFile(model_file)\n  File &quot;&#47;root&#47;miniconda3&#47;lib&#47;python3.8&#47;site-packages&#47;sentencepiece&#47;__init__.py&quot;, line 316, in LoadFromFile\n    return _sentencepiece.SentencePieceProcessor_LoadFromFile(self, arg)\nRuntimeError: Internal: could not parse ModelProto from ..&#47;chatglm3-6b&#47;tokenizer.model","like_count":0,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":647292,"discussion_content":"看着是模型文件不全哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1719817041,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2003611,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLjyEAbPomCv8pES57hAiaTicbDjSUs9QmgHs42kk7PSwwcrAvib0RtIseDmsicLOkNkdp6mbPZ4piaM0A/132","nickname":"Neil_001","note":"","ucode":"5DAE076377EF91","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":648144,"discussion_content":"请问解决了吗，我也有这个问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1721123585,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"美国","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391892,"user_name":"JACOB","can_delete":false,"product_type":"c1","uid":1086123,"ip_address":"北京","ucode":"C8D791859CE830","user_header":"https://static001.geekbang.org/account/avatar/00/10/92/ab/7ba4218a.jpg","comment_is_top":false,"comment_ctime":1719363163,"is_pvip":false,"replies":[{"id":142474,"content":"后面的课程有介绍，DeepSpeed","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1719550545,"ip_address":"浙江","comment_id":391892,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100770601,"comment_content":"本文介绍了单机部署非常好，请问分布式部署怎么搞，多机多GPU","like_count":0,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":647143,"discussion_content":"后面的课程有介绍，DeepSpeed","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1719550545,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391814,"user_name":"gesanri","can_delete":false,"product_type":"c1","uid":1121174,"ip_address":"湖北","ucode":"AE3B97DC3ED668","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELtOO0HKrj5SI5JSlmwiaCvaF6GLiaTmf5NX88OZaO3HymTAGTeIoicBUjqzmMF6sF5raPFjuqLFibrrw/132","comment_is_top":false,"comment_ctime":1719152144,"is_pvip":false,"replies":[{"id":142451,"content":"部署、训练、微调需要，和ChatGPT对话直接上OpenAI官网就行","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1719195506,"ip_address":"浙江","comment_id":391814,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100770601,"comment_content":"请问下，这篇文章里举的例子，和gpt进行对话也需要gpu吗？还是说训练和微调的时候才需要gpu呢？","like_count":0,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646970,"discussion_content":"部署、训练、微调需要，和ChatGPT对话直接上OpenAI官网就行","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1719195506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391810,"user_name":"元气🍣 🇨🇳","can_delete":false,"product_type":"c1","uid":2097775,"ip_address":"广东","ucode":"A2EE6BAB418BCB","user_header":"https://static001.geekbang.org/account/avatar/00/20/02/6f/7e125dd5.jpg","comment_is_top":false,"comment_ctime":1719145313,"is_pvip":false,"replies":[{"id":142450,"content":"windows应该也可以的，看网上有人在windows上跑过，我没试过。我在Ubuntu和Mac上都部署过","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1719195455,"ip_address":"浙江","comment_id":391810,"utype":1}],"discussion_count":5,"race_medal":0,"score":4,"product_id":100770601,"comment_content":"操作系统必须是Linux 环境吗？windows 行不行？","like_count":0,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646969,"discussion_content":"windows应该也可以的，看网上有人在windows上跑过，我没试过。我在Ubuntu和Mac上都部署过","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1719195456,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1619751,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ1rIbtzMltwtkdOgyk7nxzQOZtocVBwuAsZbUgY2gZHfnds4Onj6Zcxcba7fPI1qyHcb9jzJibZqA/132","nickname":"Geek_9mqneh","note":"","ucode":"C4FC9537DA87EB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":647180,"discussion_content":"已解决 ：vllm&gt;=0.4.2 删除这个依赖即可","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1719638361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1619751,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ1rIbtzMltwtkdOgyk7nxzQOZtocVBwuAsZbUgY2gZHfnds4Onj6Zcxcba7fPI1qyHcb9jzJibZqA/132","nickname":"Geek_9mqneh","note":"","ucode":"C4FC9537DA87EB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":647177,"discussion_content":"执行命令 ：  pip install -r requirements.txt","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1719637772,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1619751,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ1rIbtzMltwtkdOgyk7nxzQOZtocVBwuAsZbUgY2gZHfnds4Onj6Zcxcba7fPI1qyHcb9jzJibZqA/132","nickname":"Geek_9mqneh","note":"","ucode":"C4FC9537DA87EB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":647176,"discussion_content":"部署环境Mac M3","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1719637713,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1619751,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ1rIbtzMltwtkdOgyk7nxzQOZtocVBwuAsZbUgY2gZHfnds4Onj6Zcxcba7fPI1qyHcb9jzJibZqA/132","nickname":"Geek_9mqneh","note":"","ucode":"C4FC9537DA87EB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":647175,"discussion_content":"mac上部署报错\n Getting requirements to build wheel ... error\n  error: subprocess-exited-with-error\n  \n  × Getting requirements to build wheel did not run successfully.\n  │ exit code: 1\n  ╰─&gt; [18 lines of output]\n      Traceback (most recent call last):\n        File &#34;/opt/anaconda3/lib/python3.11/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py&#34;, line 353, in &lt;module&gt;\n          main()\n        File &#34;/opt/anaconda3/lib/python3.11/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py&#34;, line 335, in main\n          json_out[&#39;return_val&#39;] = hook(**hook_input[&#39;kwargs&#39;])\n                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        File &#34;/opt/anaconda3/lib/python3.11/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py&#34;, line 118, in get_requires_for_build_wheel\n          return hook(config_settings)\n                 ^^^^^^^^^^^^^^^^^^^^^\n        File &#34;&lt;string&gt;&#34;, line 36, in &lt;module&gt;\n      AssertionError: vLLM only supports Linux platform (including WSL).\n      [end of output]\n  \n  note: This error originates from a subprocess, and is likely not a problem with pip.\nerror: subprocess-exited-with-error\n\n× Getting requirements to build wheel did not run successfully.\n│ exit code: 1\n╰─&gt; See above for output.\n\nnote: This error originates from a subprocess, and is likely not a problem with pip.\n\n这个如何解决","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1719637589,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391737,"user_name":"春和景明","can_delete":false,"product_type":"c1","uid":1272482,"ip_address":"北京","ucode":"A27970A276ECD6","user_header":"https://static001.geekbang.org/account/avatar/00/13/6a/a2/f9efd9dc.jpg","comment_is_top":false,"comment_ctime":1718961528,"is_pvip":false,"replies":[{"id":142444,"content":"看着像编码问题？你试试英文","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1718969072,"ip_address":"浙江","comment_id":391737,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100770601,"comment_content":"root@eais-bjeg6jkdvfi9w77spgwf-cc9d4cd9f-9n8q6:&#47;mnt&#47;workspace&#47;ChatGLM3# python basic_demo&#47;cli_demo.py \nLoading checkpoint shards: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 7&#47;7 [00:03&lt;00:00,  2.01it&#47;s]\n欢迎使用 ChatGLM3-6B 模型，输入内容即可进行对话，clear 清空对话历史，stop 终止程序\n\n用户：你是谁\n\nChatGLM：2024-06-21 17:02:25.171267: I tensorflow&#47;core&#47;platform&#47;cpu_feature_guard.cc:210] This TensorFlow binary is optimized to use available CPU instructions in performance-critical operations.\nTo enable the following instructions: AVX2 FMA, in other operations, rebuild TensorFlow with the appropriate compiler flags.\n2024-06-21 17:02:26.264294: W tensorflow&#47;compiler&#47;tf2tensorrt&#47;utils&#47;py_utils.cc:38] TF-TRT Warning: Could not find TensorRT\nTraceback (most recent call last):\n  File &quot;&#47;mnt&#47;workspace&#47;ChatGLM3&#47;basic_demo&#47;cli_demo.py&quot;, line 59, in &lt;module&gt;\n    main()\n  File &quot;&#47;mnt&#47;workspace&#47;ChatGLM3&#47;basic_demo&#47;cli_demo.py&quot;, line 45, in main\n    for response, history, past_key_values in model.stream_chat(tokenizer, query, history=history, top_p=1,\n  File &quot;&#47;usr&#47;local&#47;lib&#47;python3.10&#47;site-packages&#47;torch&#47;utils&#47;_contextlib.py&quot;, line 35, in generator_context\n    response = gen.send(None)\n  File &quot;&#47;root&#47;.cache&#47;huggingface&#47;modules&#47;transformers_modules&#47;chatglm3-6b&#47;modeling_chatglm.py&quot;, line 1075, in stream_chat\n    response = tokenizer.decode(outputs)\n  File &quot;&#47;usr&#47;local&#47;lib&#47;python3.10&#47;site-packages&#47;transformers&#47;tokenization_utils_base.py&quot;, line 3809, in decode\n.....\nUnicodeDecodeError: &#39;ascii&#39; codec can&#39;t decode byte 0xe6 in position 0: ordinal not in range(128)","like_count":0,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646907,"discussion_content":"看着像编码问题？你试试英文","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1718969072,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391675,"user_name":"Bug Killer","can_delete":false,"product_type":"c1","uid":1186089,"ip_address":"浙江","ucode":"2741A206F504E1","user_header":"https://static001.geekbang.org/account/avatar/00/12/19/29/4a8214b7.jpg","comment_is_top":false,"comment_ctime":1718791261,"is_pvip":false,"replies":[{"id":142443,"content":"还有别的信息吗？","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1718965675,"ip_address":"浙江","comment_id":391675,"utype":1}],"discussion_count":3,"race_medal":0,"score":4,"product_id":100770601,"comment_content":"执行pip install -r requirements.txt 一直报错\nInstalling build dependencies ... done\n  Getting requirements to build wheel ... error\n  error: subprocess-exited-with-error\n  \n  × Getting requirements to build wheel did not run successfully.\n  │ exit code: 1\n  ╰─&gt; [18 lines of output]\n      Traceback (most recent call last):\n        File &quot;&#47;Users&#47;liuga&#47;ai&#47;ChatGLM3&#47;path&#47;to&#47;venv&#47;lib&#47;python3.12&#47;site-packages&#47;pip&#47;_vendor&#47;pyproject_hooks&#47;_in_process&#47;_in_process.py&quot;, line 353, in &lt;module&gt;\n          main()\n        File &quot;&#47;Users&#47;liuga&#47;ai&#47;ChatGLM3&#47;path&#47;to&#47;venv&#47;lib&#47;python3.12&#47;site-packages&#47;pip&#47;_vendor&#47;pyproject_hooks&#47;_in_process&#47;_in_process.py&quot;, line 335, in main\n          json_out[&#39;return_val&#39;] = hook(**hook_input[&#39;kwargs&#39;])\n                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        File &quot;&#47;Users&#47;liuga&#47;ai&#47;ChatGLM3&#47;path&#47;to&#47;venv&#47;lib&#47;python3.12&#47;site-packages&#47;pip&#47;_vendor&#47;pyproject_hooks&#47;_in_process&#47;_in_process.py&quot;, line 118, in get_requires_for_build_wheel\n          return hook(config_settings)\n                 ^^^^^^^^^^^^^^^^^^^^^\n        File &quot;&#47;private&#47;var&#47;folders&#47;nb&#47;kdvtrmzj52q1c5pq4brf50y00000gp&#47;T&#47;pip-build-env-arr1_sd0&#47;overlay&#47;lib&#47;python3.12&#47;site-packages&#47;setuptools&#47;build_meta.py&quot;, line 325, in get_requires_for_build_wheel\n          return self._get_build_requires(config_settings, requirements=[&#39;wheel&#39;])\n","like_count":0,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646905,"discussion_content":"还有别的信息吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1718965675,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1309882,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/1G2rlRgNalXbcUnHibRNMibAeHQhWoKNl4e4EgkiawDynZZiaO4W3vSSMtlYEKrt6e7GW4mcu1sjcs7bGKjl0vRhWQ/132","nickname":"Twein","note":"","ucode":"83498605A39292","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":648565,"discussion_content":"我在windows上部署，安装依赖的时候也是报这个错误，请问这个问题现在解决了吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1721806717,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"海南","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2440338,"avatar":"https://static001.geekbang.org/account/avatar/00/25/3c/92/81fa306d.jpg","nickname":"张Dave","note":"","ucode":"0E8B6FDEB7505B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":647618,"discussion_content":"\n        File &#34;C:\\users\\kaixin\\appdata\\local\\programs\\python\\python38\\lib\\site-packages\\pip\\_vendor\\pyproject_hooks\\_in_process\\_in_process.py&#34;, line 118, in get_requires_for_build_wheel\n          return hook(config_settings)\n        File &#34;C:\\Users\\KaiXin\\AppData\\Local\\Temp\\pip-build-env-guxvi63o\\overlay\\Lib\\site-packages\\setuptools\\build_meta.py&#34;, line 327, in get_requires_for_build_wheel\n          return self._get_build_requires(config_settings, requirements=[])\n        File &#34;C:\\Users\\KaiXin\\AppData\\Local\\Temp\\pip-build-env-guxvi63o\\overlay\\Lib\\site-packages\\setuptools\\build_meta.py&#34;, line 297, in _get_build_requires\n          self.run_setup()\n        File &#34;C:\\Users\\KaiXin\\AppData\\Local\\Temp\\pip-build-env-guxvi63o\\overlay\\Lib\\site-packages\\setuptools\\build_meta.py&#34;, line 313, in run_setup\n          exec(code, locals())\n        File &#34;&lt;string&gt;&#34;, line 11, in &lt;module&gt;\n        File &#34;C:\\Users\\KaiXin\\AppData\\Local\\Temp\\pip-build-env-guxvi63o\\overlay\\Lib\\site-packages\\torch\\__init__.py&#34;, line 141, in &lt;module&gt;\n          raise err\n      OSError: [WinError 126] 找不到指定的模块。 Error loading &#34;C:\\Users\\KaiXin\\AppData\\Local\\Temp\\pip-build-env-guxvi63o\\overlay\\Lib\\site-packages\\torch\\lib\\shm.dll&#34; or one of its dependencies.\n      [end of output]\n\n  note: This error originates from a subprocess, and is likely not a problem with pip.\nerror: subprocess-exited-with-error\n\n× Getting requirements to build wheel did not run successfully.\n│ exit code: 1\n╰─&gt; See above for output.\n\nnote: This error originates from a subprocess, and is likely not a problem with pip.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1720317592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"四川","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391565,"user_name":"jimmy","can_delete":false,"product_type":"c1","uid":1003506,"ip_address":"广东","ucode":"87F30D58CEA91E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4f/f2/41f3907d.jpg","comment_is_top":false,"comment_ctime":1718530460,"is_pvip":false,"replies":[{"id":142381,"content":"哪个依赖？","user_name":"作者回复","user_name_real":"编辑","uid":2083554,"ctime":1718549753,"ip_address":"浙江","comment_id":391565,"utype":1}],"discussion_count":3,"race_medal":0,"score":4,"product_id":100770601,"comment_content":"不支持MAC M3Pro本地部署,安装依赖时错误信息 AssertionError: vLLM only supports Linux platform (including WSL).","like_count":0,"discussions":[{"author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646689,"discussion_content":"哪个依赖？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1718549754,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":2,"child_discussions":[{"author":{"id":1003506,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4f/f2/41f3907d.jpg","nickname":"jimmy","note":"","ucode":"87F30D58CEA91E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2083554,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZP8e2vqiaACFaDxruOzUTPbPv2uRUTp9UuEg98Ib9aYddjZK2kastqf0B14Ec7uXx7CCSXr0fhAA/132","nickname":"Geek_cf2545","note":"","ucode":"B69DF1E734FBA2","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":646737,"discussion_content":"谢谢.在github找到了一个解决办法,可以不装这个依赖   https://github.com/THUDM/ChatGLM3/issues/1231     vllm&gt;=0.4.2","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1718642960,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":646689,"ip_address":"广东","group_id":0},"score":646737,"extra":""},{"author":{"id":1008257,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/81/ad80f427.jpg","nickname":"Lane","note":"","ucode":"F70459D1BBD9F4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1003506,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4f/f2/41f3907d.jpg","nickname":"jimmy","note":"","ucode":"87F30D58CEA91E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":649468,"discussion_content":"好使，把# vllm&gt;=0.4.2 注释就好了","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1723453693,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":646737,"ip_address":"北京","group_id":0},"score":649468,"extra":""}]}]},{"had_liked":false,"id":396099,"user_name":"月狼葱葱","can_delete":false,"product_type":"c1","uid":1101360,"ip_address":"上海","ucode":"506D751D956F87","user_header":"https://static001.geekbang.org/account/avatar/00/10/ce/30/eb380376.jpg","comment_is_top":false,"comment_ctime":1733121721,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100770601,"comment_content":"System:win11\n显卡：4080laptop\nPython：3.10.15\n\nglm3：https:&#47;&#47;www.modelscope.cn&#47;models&#47;ZhipuAI&#47;chatglm3-6b\ncuda：https:&#47;&#47;developer.nvidia.com&#47;cuda-downloads\n\ntransformers：pip install transformers==4.40.0\nvllm：pip install vllm==0.6.4\npytorch(这个去官网看，有对应的命令)：pip3 install torch torchvision torchaudio --index-url https:&#47;&#47;download.pytorch.org&#47;whl&#47;cu124\n\ncomposite_demo中client.py的MODEL_PATH可以写死绝对路径，要不就去改环境变量","like_count":0},{"had_liked":false,"id":395780,"user_name":"任帅兵","can_delete":false,"product_type":"c1","uid":1775205,"ip_address":"北京","ucode":"CA36C692012C72","user_header":"https://static001.geekbang.org/account/avatar/00/1b/16/65/ae88c7ad.jpg","comment_is_top":false,"comment_ctime":1732063345,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100770601,"comment_content":"requirements.txt 中有一个 vllm&gt;=0.4.2，这个包安装时报错：\n\nAssertionError: vLLM only supports Linux platform (including WSL).\n\n搜索了一下这个包目前不支持windows环境，请问一下这个该如何解决啊？","like_count":0},{"had_liked":false,"id":395504,"user_name":"like life","can_delete":false,"product_type":"c1","uid":3017830,"ip_address":"湖南","ucode":"8D82CD400FC155","user_header":"https://static001.geekbang.org/account/avatar/00/2e/0c/66/51161385.jpg","comment_is_top":false,"comment_ctime":1730990258,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100770601,"comment_content":"大模型的参数代表着给模型提供训练的数据，62 亿表示62亿个训练参数","like_count":0},{"had_liked":false,"id":394672,"user_name":"Geek_0a4616","can_delete":false,"product_type":"c1","uid":1670730,"ip_address":"江苏","ucode":"9C37ED61ECCAC2","user_header":"","comment_is_top":false,"comment_ctime":1727508535,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100770601,"comment_content":"老师帮忙看下 我的python版本 3.10.11\n执行 pip install -r requirements.txt\n\nERROR: Could not find a version that satisfies the requirement torch==2.3.0 (from versions: 1.11.0, 1.12.0, 1.12.1, 1.13.0, 1.13.1, 2.0.0, 2.0.1, 2.1.0, 2.1.1, 2.1.2, 2.2.0, 2.2.1, 2.2.2)\nERROR: No matching distribution found for torch==2.3.0\n \n\n升级了也不行，没有报错 pip install --upgrade torch\n\n","like_count":0}]}