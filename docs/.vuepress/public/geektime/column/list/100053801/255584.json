{"id":255584,"title":"05 | å¦‚ä½•ç”¨å‘é‡å’Œåæ ‡ç³»æè¿°ç‚¹å’Œçº¿æ®µï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æœˆå½±ã€‚</p><p>ä¸ºä»€ä¹ˆä½ åšäº†å¾ˆå¤šå¯è§†åŒ–é¡¹ç›®ï¼Œè§£å†³äº†ä¸€ä¸ªã€ä¸¤ä¸ªã€ä¸‰ä¸ªç”šè‡³å¤šä¸ªä¸åŒç±»å‹çš„å›¾è¡¨å±•ç°ä¹‹åï¼Œè¿˜æ˜¯ä¸èƒ½ç³»ç»Ÿåœ°æå‡è‡ªå·±çš„èƒ½åŠ›ï¼Œåœ¨ä¸‹æ¬¡é¢å¯¹æ–°çš„é¡¹ç›®æ—¶ä¾ç„¶ä¼šæœ‰å„ç§éš¾ä»¥å…‹æœçš„å›°éš¾ï¼Ÿè¿™æ˜¯å› ä¸ºä½ é™·å…¥äº†ç»†èŠ‚é‡Œã€‚</p><p>ä»€ä¹ˆæ˜¯ç»†èŠ‚ï¼Ÿç®€å•æ¥è¯´ï¼Œç»†èŠ‚å°±æ˜¯å„ç§çº¯ç²¹çš„å›¾å½¢å­¦é—®é¢˜ã€‚åœ¨å¯è§†åŒ–é¡¹ç›®é‡Œï¼Œæˆ‘ä»¬éœ€è¦æè¿°å¾ˆå¤šçš„å›¾å½¢ï¼Œè€Œæè¿°å›¾å½¢çš„é¡¶ç‚¹ã€è¾¹ã€çº¿ã€é¢ã€ä½“å’Œå…¶ä»–å„ç§ä¿¡æ¯æœ‰å¾ˆå¤šä¸åŒçš„æ–¹æ³•ã€‚å¹¶ä¸”ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨ä¸åŒçš„ç»˜å›¾ç³»ç»Ÿï¼Œæ¯ä¸ªç»˜å›¾ç³»ç»Ÿåˆå¯èƒ½æœ‰ç‹¬ç‰¹çš„æ–¹å¼æˆ–è€…ç‰¹å®šçš„APIï¼Œå»è§£å†³æŸä¸ªæˆ–æŸç±»å…·ä½“çš„é—®é¢˜ã€‚</p><p>æ­£å› ä¸ºæœ‰äº†å¤ªå¤šå¯ä»¥é€‰æ‹©çš„å·¥å…·ï¼Œæˆ‘ä»¬ä¹Ÿå°±å¾ˆéš¾æ‰¾åˆ°æœ€æ°å½“çš„é‚£ä¸€ä¸ªã€‚è€Œä¸”<strong>å¦‚æœæˆ‘ä»¬æ‰‹ä¸­åªæœ‰è§£å†³å…·ä½“é—®é¢˜çš„å·¥å…·ï¼Œæ²¡æœ‰ç»Ÿä¸€çš„æ–¹æ³•è®ºï¼Œé‚£æˆ‘ä»¬ä¹Ÿæ— æ³•ä¸€åŠ³æ°¸é€¸åœ°è§£å†³é—®é¢˜çš„æ ¹æœ¬</strong>ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬è¦å»ºç«‹ä¸€å¥—ä¸å„ä¸ªå›¾å½¢ç³»ç»Ÿæ— å…³è”çš„ã€ç®€å•çš„åŸºäºå‘é‡å’ŒçŸ©é˜µè¿ç®—çš„æ•°å­¦ä½“ç³»ï¼Œç”¨å®ƒæ¥æè¿°æ‰€æœ‰çš„å‡ ä½•å›¾å½¢ä¿¡æ¯ã€‚è¿™å°±æ˜¯æˆ‘åœ¨æ•°å­¦ç¯‡æƒ³è¦å’Œä½ è®¨è®ºçš„ä¸»è¦é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯<strong>å¦‚ä½•å»ºç«‹ä¸€å¥—æè¿°å‡ ä½•å›¾å½¢ä¿¡æ¯çš„æ•°å­¦ä½“ç³»ï¼Œä»¥åŠå¦‚ä½•ç”¨è¿™ä¸ªä½“ç³»æ¥è§£å†³æˆ‘ä»¬çš„å¯è§†åŒ–å›¾å½¢å‘ˆç°çš„é—®é¢˜</strong>ã€‚</p><p>é‚£è¿™ä¸€èŠ‚è¯¾ï¼Œæˆ‘ä»¬å…ˆå­¦ä¹ ç”¨åæ ‡ç³»ä¸å‘é‡æ¥æè¿°åŸºæœ¬å›¾å½¢çš„æ–¹æ³•ï¼Œä»å¦‚ä½•å®šä¹‰å’Œå˜æ¢å›¾å½¢çš„ç›´è§’åæ ‡ç³»ï¼Œä»¥åŠå¦‚ä½•è¿ç”¨å‘é‡è¡¨ç¤ºç‚¹å’Œçº¿æ®µè¿™ä¸¤æ–¹é¢è®²èµ·ã€‚</p><!-- [[[read_end]]] --><h2>åæ ‡ç³»ä¸åæ ‡æ˜ å°„</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æµè§ˆå™¨çš„å››ä¸ªå›¾å½¢ç³»ç»Ÿé€šç”¨çš„åæ ‡ç³»åˆ†åˆ«æ˜¯ä»€ä¹ˆæ ·çš„ã€‚</p><p>HTMLé‡‡ç”¨çš„æ˜¯çª—å£åæ ‡ç³»ï¼Œä»¥å‚è€ƒå¯¹è±¡ï¼ˆå‚è€ƒå¯¹è±¡é€šå¸¸æ˜¯æœ€æ¥è¿‘å›¾å½¢å…ƒç´ çš„positionéstaticçš„å…ƒç´ ï¼‰çš„å…ƒç´ ç›’å­å·¦ä¸Šè§’ä¸ºåæ ‡åŸç‚¹ï¼Œxè½´å‘å³ï¼Œyè½´å‘ä¸‹ï¼Œåæ ‡å€¼å¯¹åº”åƒç´ å€¼ã€‚</p><p>SVGé‡‡ç”¨çš„æ˜¯è§†åŒºç›’å­ï¼ˆviewBoxï¼‰åæ ‡ç³»ã€‚è¿™ä¸ªåæ ‡ç³»åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæ˜¯ä»¥svgæ ¹å…ƒç´ å·¦ä¸Šè§’ä¸ºåæ ‡åŸç‚¹ï¼Œxè½´å‘å³ï¼Œyè½´å‘ä¸‹ï¼Œsvgæ ¹å…ƒç´ å³ä¸‹è§’åæ ‡ä¸ºå®ƒçš„åƒç´ å®½é«˜å€¼ã€‚å¦‚æœæˆ‘ä»¬è®¾ç½®äº†viewBoxå±æ€§ï¼Œé‚£ä¹ˆsvgæ ¹å…ƒç´ å·¦ä¸Šè§’ä¸ºviewBoxçš„å‰ä¸¤ä¸ªå€¼ï¼Œå³ä¸‹è§’ä¸ºviewBoxçš„åä¸¤ä¸ªå€¼ã€‚</p><p>Canvasé‡‡ç”¨çš„åæ ‡ç³»æˆ‘ä»¬æ¯”è¾ƒç†Ÿæ‚‰äº†ï¼Œå®ƒé»˜è®¤ä»¥ç”»å¸ƒå·¦ä¸Šè§’ä¸ºåæ ‡åŸç‚¹ï¼Œå³ä¸‹è§’åæ ‡å€¼ä¸ºCanvasçš„ç”»å¸ƒå®½é«˜å€¼ã€‚</p><p>WebGLçš„åæ ‡ç³»æ¯”è¾ƒç‰¹æ®Šï¼Œæ˜¯ä¸€ä¸ªä¸‰ç»´åæ ‡ç³»ã€‚å®ƒé»˜è®¤ä»¥ç”»å¸ƒæ­£ä¸­é—´ä¸ºåæ ‡åŸç‚¹ï¼Œxè½´æœå³ï¼Œyè½´æœä¸Šï¼Œzè½´æœå¤–ï¼Œxè½´ã€yè½´åœ¨ç”»å¸ƒä¸­èŒƒå›´æ˜¯-1åˆ°1ã€‚</p><p>å°½ç®¡è¿™å››ä¸ªåæ ‡ç³»åœ¨åŸç‚¹ä½ç½®ã€åæ ‡è½´æ–¹å‘ã€åæ ‡èŒƒå›´ä¸Šæœ‰æ‰€åŒºåˆ«ï¼Œä½†éƒ½æ˜¯<strong>ç›´è§’åæ ‡ç³»</strong>ï¼Œæ‰€ä»¥å®ƒä»¬éƒ½æ»¡è¶³ç›´è§’åæ ‡ç³»çš„ç‰¹æ€§ï¼šä¸ç®¡åŸç‚¹å’Œè½´çš„æ–¹å‘æ€ä¹ˆå˜ï¼Œç”¨åŒæ ·çš„æ–¹æ³•ç»˜åˆ¶å‡ ä½•å›¾å½¢ï¼Œå®ƒä»¬çš„å½¢çŠ¶å’Œç›¸å¯¹ä½ç½®éƒ½ä¸å˜ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/5e/89/5e3bc7cd089e2e28c527b57a1df5cb89.jpeg?wh=1920*1080\" alt=\"\"></p><p>ä¸ºäº†æ–¹ä¾¿å¤„ç†å›¾å½¢ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å¯¹åæ ‡ç³»è¿›è¡Œè½¬æ¢ã€‚è½¬æ¢åæ ‡ç³»å¯ä»¥è¯´æ˜¯ä¸€ä¸ªéå¸¸åŸºç¡€ä¸”é‡è¦çš„æ“ä½œäº†ã€‚æ­£å› ä¸ºè¿™å››ä¸ªåæ ‡ç³»éƒ½æ˜¯ç›´è§’åæ ‡ç³»ï¼Œæ‰€ä»¥å®ƒä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ç›¸äº’è½¬åŒ–ã€‚å…¶ä¸­ï¼ŒHTMLã€SVGå’ŒCanvaséƒ½æä¾›äº†transformçš„APIèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å¾ˆæ–¹ä¾¿åœ°è½¬æ¢åæ ‡ç³»ã€‚è€ŒWebGLæœ¬èº«ä¸æä¾›tranformçš„APIï¼Œä½†æˆ‘ä»¬å¯ä»¥åœ¨shaderé‡ŒåšçŸ©é˜µè¿ç®—æ¥å®ç°åæ ‡è½¬æ¢ï¼ŒWebGLçš„é—®é¢˜æˆ‘ä»¬åœ¨åç»­è¯¾ç¨‹ä¼šæœ‰ä¸“é—¨è®¨è®ºï¼Œä»Šå¤©æˆ‘ä»¬å…ˆæ¥è¯´è¯´å…¶ä»–ä¸‰ç§ã€‚é‚£æ¥ä¸‹æ¥æˆ‘ä»¬å°±ä»¥Canvasä¸ºä¾‹ï¼Œæ¥çœ‹çœ‹ç”¨transform APIæ€æ ·è¿›è¡Œåæ ‡è½¬æ¢ã€‚</p><h2>å¦‚ä½•ç”¨Canvaså®ç°åæ ‡ç³»è½¬æ¢ï¼Ÿ</h2><p>å‡è®¾ï¼Œæˆ‘ä»¬è¦åœ¨å®½512 * é«˜256çš„ä¸€ä¸ªCanvasç”»å¸ƒä¸Šå®ç°å¦‚ä¸‹çš„è§†è§‰æ•ˆæœã€‚å…¶ä¸­ï¼Œå±±çš„é«˜åº¦æ˜¯100ï¼Œåº•è¾¹200ï¼Œä¸¤åº§å±±çš„ä¸­å¿ƒä½ç½®åˆ°ä¸­çº¿çš„è·ç¦»éƒ½æ˜¯80ï¼Œå¤ªé˜³çš„åœ†å¿ƒé«˜åº¦æ˜¯150ã€‚</p><p>å½“ç„¶ï¼Œåœ¨ä¸è½¬æ¢åæ ‡ç³»çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå›¾å½¢ç»˜åˆ¶å‡ºæ¥ï¼Œä½†æ˜¯è¦ç»è¿‡é¡¶ç‚¹æ¢ç®—ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥è¯´ä¸€è¯´è¿™ä¸ªè¿‡ç¨‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a8/09/a8ec91897b2ede72d5c48d4d6b2d5409.jpeg?wh=1920*870\" alt=\"\"></p><p>é¦–å…ˆï¼Œå› ä¸ºCanvasåæ ‡ç³»é»˜è®¤çš„åŸç‚¹æ˜¯å·¦ä¸Šè§’ï¼Œåº•è¾¹çš„yåæ ‡æ˜¯256ï¼Œè€Œå±±çš„é«˜åº¦æ˜¯100ï¼Œæ‰€ä»¥å±±é¡¶ç‚¹çš„yåæ ‡æ˜¯256 - 100 = 156ã€‚è€Œå› ä¸ºå¤ªé˜³çš„é«˜åº¦æ˜¯150ï¼Œæ‰€ä»¥å¤ªé˜³åœ†å¿ƒçš„yåæ ‡æ˜¯256 - 150 = 106ã€‚</p><p>ç„¶åï¼Œå› ä¸ºxè½´ä¸­ç‚¹çš„åæ ‡æ˜¯512 / 2 = 256ï¼Œæ‰€ä»¥ä¸¤åº§å±±é¡¶ç‚¹çš„xåæ ‡åˆ†åˆ«æ˜¯256 - 80å’Œ256 + 80ï¼Œä¹Ÿå°±æ˜¯176å’Œ336ã€‚åˆå› ä¸ºå±±æ˜¯ç­‰è…°ä¸‰è§’å½¢ï¼Œå®ƒçš„åº•è¾¹æ˜¯200ï¼Œæ‰€ä»¥ä¸¤åº§å±±åº•è¾¹çš„xåæ ‡è®¡ç®—å‡ºæ¥ï¼Œåˆ†åˆ«æ˜¯ 76ã€276ã€236ã€436ï¼ˆ176 - 100 =76ã€176 + 100=276ã€336 - 100=236ã€ 336 + 100=436ï¼‰ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/55/29/552676f6f0268d2091b838e268651929.jpeg?wh=1920*832\" alt=\"\"></p><p>è®¡ç®—å‡ºè¿™äº›åæ ‡ä¹‹åï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±å¯ä»¥å°†è¿™ä¸ªå›¾ç”»å‡ºæ¥äº†ã€‚ä¸è¿‡ï¼Œä¸ºäº†å¢åŠ ä¸€äº›è¶£å‘³æ€§ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ª<a href=\"https://github.com/pshihn/rough\">Rough.js</a>çš„åº“ï¼Œç»˜åˆ¶ä¸€ä¸ªæ‰‹ç»˜é£æ ¼çš„å›¾åƒï¼ˆRough.jsåº“çš„APIå’ŒCanvaså·®ä¸å¤šï¼Œç»˜åˆ¶å‡ºæ¥çš„å›¾å½¢æ¯”è¾ƒæœ‰è¶£ï¼‰ã€‚ç»˜åˆ¶çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>const rc = rough.canvas(document.querySelector('canvas'));\nconst hillOpts = {roughness: 2.8, strokeWidth: 2, fill: 'blue'};\nrc.path('M76 256L176 156L276 256', hillOpts);\nrc.path('M236 256L336 156L436 256', hillOpts);\nrc.circle(256, 106, 105, {\n  stroke: 'red',\n  strokeWidth: 4,\n  fill: 'rgba(255, 255, 0, 0.4)',\n  fillStyle: 'solid',\n});\n</code></pre><p>æœ€ç»ˆï¼Œæˆ‘ä»¬ç»˜åˆ¶å‡ºçš„å›¾å½¢æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/cd/cb/cddabd7aeca8e5yy0c22c85879f5dccb.jpeg?wh=1920*1080\" alt=\"\"></p><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬é€šè¿‡ç®€å•çš„è®¡ç®—å°±ç»˜åˆ¶å‡ºäº†è¿™ä¸€ç»„å›¾å½¢ã€‚ä½†ä½ ä¹Ÿèƒ½å¤Ÿæƒ³åˆ°ï¼Œå¦‚æœæ¯æ¬¡ç»˜åˆ¶éƒ½è¦èŠ±è´¹æ—¶é—´åœ¨åæ ‡æ¢ç®—ä¸Šï¼Œè¿™ä¼šéå¸¸ä¸æ–¹ä¾¿ã€‚æ‰€ä»¥ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨åæ ‡ç³»å˜æ¢æ¥ä»£æ›¿åæ ‡æ¢ç®—ã€‚</p><p>è¿™é‡Œï¼Œæˆ‘ä»¬ç»™Canvasçš„2Dä¸Šä¸‹æ–‡è®¾ç½®ä¸€ä¸‹transformå˜æ¢ã€‚æˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ°ä¸¤ä¸ªå˜æ¢ï¼štranslateå’Œscaleã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬é€šè¿‡translateå˜æ¢å°†Canvasç”»å¸ƒçš„åæ ‡åŸç‚¹ï¼Œä»å·¦ä¸Šè§’(0, 0)ç‚¹ç§»åŠ¨è‡³(256, 256)ä½ç½®ï¼Œå³ç”»å¸ƒçš„åº•è¾¹ä¸Šçš„ä¸­ç‚¹ä½ç½®ã€‚æ¥ç€ï¼Œä»¥ç§»åŠ¨äº†åŸç‚¹åæ–°çš„åæ ‡ä¸ºå‚ç…§ï¼Œé€šè¿‡scale(1, -1)å°†yè½´å‘ä¸‹çš„éƒ¨åˆ†ï¼Œå³y&gt;0çš„éƒ¨åˆ†æ²¿xè½´ç¿»è½¬180åº¦ï¼Œè¿™æ ·åæ ‡ç³»å°±å˜æˆä»¥ç”»å¸ƒåº•è¾¹ä¸­ç‚¹ä¸ºåŸç‚¹ï¼Œxè½´å‘å³ï¼Œyè½´å‘ä¸Šçš„åæ ‡ç³»äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/8a/de/8a1f3ed166942736206124aba16965de.jpeg?wh=1920*1080\" alt=\"\" title=\"åæ ‡ç³»\"></p><p>æ‰§è¡Œäº†è¿™ä¸ªåæ ‡å˜æ¢ï¼Œä¹Ÿå°±æ˜¯è®©åæ ‡ç³»åŸç‚¹åœ¨ä¸­é—´ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ›´æ–¹ä¾¿ã€ç›´è§‚åœ°è®¡ç®—å‡ºå‡ ä¸ªå›¾å½¢å…ƒç´ çš„åæ ‡äº†ã€‚</p><p>ä¸¤ä¸ªå±±é¡¶çš„åæ ‡å°±æ˜¯ (-80, 100) å’Œ (80, 100)ï¼Œå±±è„šçš„åæ ‡å°±æ˜¯ (-180, 0)ã€(20, 0)ã€(-20, 0)ã€(180, 0)ï¼Œå¤ªé˜³çš„ä¸­å¿ƒç‚¹çš„åæ ‡å°±æ˜¯(0, 150)ã€‚é‚£ä¹ˆæ›´æ”¹åçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre><code>const rc = rough.canvas(document.querySelector('canvas'));\nconst ctx = rc.ctx;\nctx.translate(256, 256);\nctx.scale(1, -1);\n\nconst hillOpts = {roughness: 2.8, strokeWidth: 2, fill: 'blue'};\n\nrc.path('M-180 0L-80 100L20 0', hillOpts);\nrc.path('M-20 0L80 100L180 0', hillOpts);\n\nrc.circle(0, 150, 105, {\n  stroke: 'red',\n  strokeWidth: 4,\n  fill: 'rgba(255,255, 0, 0.4)',\n  fillStyle: 'solid',\n});\n</code></pre><p>å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬å°±å®Œæˆäº†åæ ‡å˜æ¢ã€‚ä½†æ˜¯å› ä¸ºè¿™ä¸ªä¾‹å­è¦ç»˜åˆ¶çš„å›¾å½¢å¾ˆå°‘ï¼Œæ‰€ä»¥è¿˜ä¸å¤ªèƒ½ä½“ç°ä½¿ç”¨åæ ‡ç³»å˜æ¢çš„å¥½å¤„ã€‚ä¸è¿‡ï¼Œä½ å¯ä»¥æƒ³ä¸€ä¸‹ï¼Œåœ¨å¯è§†åŒ–çš„è®¸å¤šåº”ç”¨åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬éƒ½è¦å¤„ç†æˆç™¾ä¸Šåƒçš„å›¾å½¢ã€‚å¦‚æœè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬åœ¨åŸå§‹åæ ‡ä¸‹é€šè¿‡è®¡ç®—é¡¶ç‚¹æ¥ç»˜åˆ¶å›¾å½¢ï¼Œè®¡ç®—é‡ä¼šéå¸¸å¤§ï¼Œå¾ˆéº»çƒ¦ã€‚é‚£é‡‡ç”¨åæ ‡å˜æ¢çš„æ–¹å¼å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¼˜åŒ–æ€è·¯ï¼Œ<strong>å®ƒèƒ½å¤Ÿç®€åŒ–è®¡ç®—é‡ï¼Œè¿™ä¸ä»…è®©ä»£ç æ›´å®¹æ˜“ç†è§£ï¼Œä¹Ÿå¯ä»¥èŠ‚çœCPUè¿ç®—çš„æ—¶é—´</strong>ã€‚</p><p>ç†è§£ç›´è§’åæ ‡ç³»çš„åæ ‡å˜æ¢ä¹‹åï¼Œæˆ‘ä»¬å†æ¥è¯´è¯´ç›´è§’åæ ‡ç³»é‡Œç»˜åˆ¶å›¾å½¢çš„æ–¹æ³•ã€‚<strong>é‚£ä¸ç®¡æˆ‘ä»¬ç”¨ä»€ä¹ˆç»˜å›¾ç³»ç»Ÿç»˜åˆ¶å›¾å½¢ï¼Œä¸€èˆ¬çš„å‡ ä½•å›¾å½¢éƒ½æ˜¯ç”±ç‚¹ã€çº¿æ®µå’Œé¢æ„æˆã€‚å…¶ä¸­ï¼Œç‚¹å’Œçº¿æ®µæ˜¯åŸºç¡€çš„å›¾å…ƒä¿¡æ¯ï¼Œå› æ­¤ï¼Œå¦‚ä½•æè¿°å®ƒä»¬æ˜¯ç»˜å›¾çš„å…³é”®</strong>ã€‚</p><h2>å¦‚ä½•ç”¨å‘é‡æ¥æè¿°ç‚¹å’Œçº¿æ®µï¼Ÿ</h2><p>é‚£åœ¨ç›´è§’åæ ‡ç³»ä¸‹ï¼Œæˆ‘ä»¬æ˜¯æ€ä¹ˆè¡¨ç¤º<strong>ç‚¹å’Œçº¿æ®µçš„å‘¢</strong>ï¼Ÿæˆ‘ä»¬ä¸€èˆ¬æ˜¯ç”¨å‘é‡æ¥è¡¨ç¤ºä¸€ä¸ªç‚¹æˆ–è€…ä¸€ä¸ªçº¿æ®µã€‚</p><p>å‰é¢çš„ä¾‹å­å› ä¸ºåŒ…å«xã€yä¸¤ä¸ªåæ ‡è½´ï¼Œæ‰€ä»¥å®ƒä»¬æ„æˆäº†ä¸€ä¸ªç»˜å›¾çš„å¹³é¢ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨äºŒç»´å‘é‡æ¥è¡¨ç¤ºè¿™ä¸ªå¹³é¢ä¸Šçš„ç‚¹å’Œçº¿æ®µã€‚äºŒç»´å‘é‡å…¶å®å°±æ˜¯ä¸€ä¸ªåŒ…å«äº†ä¸¤ä¸ªæ•°å€¼çš„æ•°ç»„ï¼Œä¸€ä¸ªæ˜¯xåæ ‡å€¼ï¼Œä¸€ä¸ªæ˜¯yåæ ‡å€¼ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/0d/58/0de1596f2df5002c3a8b26723f0f0558.jpeg?wh=1920*1080\" alt=\"\"></p><p>å‡è®¾ï¼Œç°åœ¨è¿™ä¸ªå¹³é¢ç›´è§’åæ ‡ç³»ä¸Šæœ‰ä¸€ä¸ªå‘é‡vã€‚å‘é‡væœ‰ä¸¤ä¸ªå«ä¹‰ï¼šä¸€æ˜¯å¯ä»¥è¡¨ç¤ºè¯¥åæ ‡ç³»ä¸‹ä½äº(x, y)å¤„çš„ä¸€ä¸ªç‚¹ï¼›äºŒæ˜¯å¯ä»¥è¡¨ç¤ºä»åŸç‚¹(0,0)åˆ°åæ ‡(x,y)çš„ä¸€æ ¹çº¿æ®µã€‚</p><p>æ¥ä¸‹æ¥ï¼Œä¸ºäº†æ–¹ä¾¿ä½ ç†è§£ï¼Œæˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸€ä¸‹å…³äºå‘é‡çš„æ•°å­¦çŸ¥è¯†ã€‚</p><p><strong>é¦–å…ˆï¼Œå‘é‡å’Œæ ‡é‡ä¸€æ ·å¯ä»¥è¿›è¡Œæ•°å­¦è¿ç®—ã€‚</strong>ä¸¾ä¸ªä¾‹å­ï¼Œç°åœ¨æœ‰ä¸¤ä¸ªå‘é‡ï¼Œv<sub>1</sub>å’Œv<sub>2</sub>ï¼Œå¦‚æœè®©å®ƒä»¬ç›¸åŠ ï¼Œå…¶ç»“æœç›¸å½“äºå°†v<sub>1</sub>å‘é‡çš„ç»ˆç‚¹ï¼ˆx<sub>1</sub>, y<sub>1</sub>ï¼‰ï¼Œæ²¿ç€v<sub>2</sub>å‘é‡çš„æ–¹å‘ç§»åŠ¨ä¸€æ®µè·ç¦»ï¼Œè¿™æ®µè·ç¦»ç­‰äºv<sub>2</sub>å‘é‡çš„é•¿åº¦ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å¹³é¢ä¸Šå¾—åˆ°ä¸€ä¸ªæ–°çš„ç‚¹ï¼ˆx<sub>1</sub> + x<sub>2</sub>, y<sub>1</sub> + y<sub>2</sub>ï¼‰ï¼Œä¸€æ¡æ–°çš„çº¿æ®µ[(0, 0), (x<sub>1</sub> + x<sub>2</sub>, y<sub>1</sub> + y<sub>2</sub>)]ï¼Œä»¥åŠä¸€æ®µæŠ˜çº¿ï¼š[(0, 0), (x<sub>1</sub>, y<sub>1</sub>) , (x<sub>1</sub> + x<sub>2</sub>, y<sub>1</sub> + y<sub>2</sub>)]ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/8e/29/8ebb3963e385ba9fda2dab46d7277e29.jpeg?wh=1920*1080\" alt=\"\"></p><p><strong>å…¶æ¬¡ï¼Œä¸€ä¸ªå‘é‡åŒ…å«æœ‰é•¿åº¦å’Œæ–¹å‘ä¿¡æ¯</strong>ã€‚å®ƒçš„é•¿åº¦å¯ä»¥ç”¨å‘é‡çš„xã€yçš„å¹³æ–¹å’Œçš„å¹³æ–¹æ ¹æ¥è¡¨ç¤ºï¼Œå¦‚æœç”¨JavaScriptæ¥è®¡ç®—ï¼Œå°±æ˜¯ï¼š</p><pre><code>v.length = function(){return Math.hypot(this.x, this.y)};\n</code></pre><p>å®ƒçš„æ–¹å‘å¯ä»¥ç”¨ä¸xè½´çš„å¤¹è§’æ¥è¡¨ç¤ºï¼Œå³ï¼š</p><pre><code>v.dir = function() { return Math.atan2(this.y, this.x);}\n</code></pre><p>åœ¨ä¸Šé¢çš„ä»£ç é‡Œï¼ŒMath.atan2çš„å–å€¼èŒƒå›´æ˜¯-Ï€åˆ°Ï€ï¼Œè´Ÿæ•°è¡¨ç¤ºåœ¨xè½´ä¸‹æ–¹ï¼Œæ­£æ•°è¡¨ç¤ºåœ¨xè½´ä¸Šæ–¹ã€‚</p><p>æœ€åï¼Œæ ¹æ®é•¿åº¦å’Œæ–¹å‘çš„å®šä¹‰ï¼Œæˆ‘ä»¬è¿˜èƒ½æ¨å¯¼å‡ºä¸€ç»„å…³ç³»å¼ï¼š</p><pre><code>v.x = v.length * Math.cos(v.dir);\nv.y = v.length * Math.sin(v.dir);\n\n</code></pre><p>è¿™ä¸ªæ¨è®ºæ„å‘³ç€ä¸€ä¸ªé‡è¦çš„äº‹å®ï¼šæˆ‘ä»¬å¯ä»¥å¾ˆç®€å•åœ°æ„é€ å‡ºä¸€ä¸ªç»˜å›¾å‘é‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›ä»¥ç‚¹(x<sub>0</sub>, y<sub>0</sub>)ä¸ºèµ·ç‚¹ï¼Œæ²¿ç€æŸä¸ªæ–¹å‘ç”»ä¸€æ®µé•¿åº¦ä¸ºlengthçš„çº¿æ®µï¼Œæˆ‘ä»¬åªéœ€è¦æ„é€ å‡ºå¦‚ä¸‹çš„ä¸€ä¸ªå‘é‡å°±å¯ä»¥äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/7c/a3/7cf68477844ee77a31163008d2bb39a3.jpeg?wh=1920*560\" alt=\"\"></p><p>è¿™é‡Œçš„Î±æ˜¯ä¸xè½´çš„å¤¹è§’ï¼Œvæ˜¯ä¸€ä¸ªå•ä½å‘é‡ï¼Œå®ƒçš„é•¿åº¦ä¸º1ã€‚ç„¶åæˆ‘ä»¬æŠŠå‘é‡(x<sub>0</sub>, y<sub>0</sub>)ä¸è¿™ä¸ªå‘é‡v<sub>1</sub>ç›¸åŠ ï¼Œå¾—åˆ°çš„å°±æ˜¯è¿™æ¡çº¿æ®µçš„ç»ˆç‚¹ã€‚è¿™ä¹ˆè®²è¿˜æ˜¯æ¯”è¾ƒæŠ½è±¡ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ã€‚</p><h2>å®æˆ˜æ¼”ç»ƒï¼šç”¨å‘é‡ç»˜åˆ¶ä¸€æ£µæ ‘</h2><p>æˆ‘ä»¬ç”¨å‰é¢å­¦åˆ°çš„å‘é‡çŸ¥è¯†æ¥ç»˜åˆ¶ä¸€æ£µéšæœºç”Ÿæˆçš„æ ‘ï¼Œæƒ³è¦ç”Ÿæˆçš„æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/6y/f4/6yydf8017e95529yybb987d97e9yy9f4.jpeg?wh=1920*1080\" alt=\"\"></p><p>æˆ‘ä»¬è¿˜æ˜¯ç”¨Canvas2Dæ¥ç»˜åˆ¶ã€‚é¦–å…ˆæ˜¯åæ ‡å˜æ¢ï¼ŒåŸç†å‰é¢è®²è¿‡ï¼Œæˆ‘å°±ä¸ç»†è¯´äº†ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬è¦åšçš„å˜æ¢æ˜¯å°†åæ ‡åŸç‚¹ä»å·¦ä¸Šè§’ç§»åŠ¨åˆ°å·¦ä¸‹è§’ï¼Œå¹¶ä¸”è®©yè½´ç¿»è½¬ä¸ºå‘ä¸Šã€‚</p><pre><code>ctx.translate(0, canvas.height);\nctx.scale(1, -1);\nctx.lineCap = 'round';\n</code></pre><p>ç„¶åï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç”»æ ‘æçš„å‡½æ•° drawBranchã€‚</p><pre><code>function drawBranch(context, v0, length, thickness, dir, bias) {\n  ...\n}\n</code></pre><p>è¿™ä¸ªå‡½æ•°æœ‰å…­ä¸ªå‚æ•°ï¼š</p><ul>\n<li>contextæ˜¯æˆ‘ä»¬çš„Canvas2Dä¸Šä¸‹æ–‡</li>\n<li>v<sub>0</sub>æ˜¯èµ·å§‹å‘é‡</li>\n<li>lengthæ˜¯å½“å‰æ ‘æçš„é•¿åº¦</li>\n<li>thicknessæ˜¯å½“å‰æ ‘æçš„ç²—ç»†</li>\n<li>diræ˜¯å½“å‰æ ‘æçš„æ–¹å‘ï¼Œç”¨ä¸xè½´çš„å¤¹è§’è¡¨ç¤ºï¼Œå•ä½æ˜¯å¼§åº¦ã€‚</li>\n<li>biasæ˜¯ä¸€ä¸ªéšæœºåå‘å› å­ï¼Œç”¨æ¥è®©æ ‘æçš„æœå‘æœ‰ä¸€å®šçš„éšæœºæ€§</li>\n</ul><p>å› ä¸ºv<sub>0</sub>æ˜¯æ ‘æçš„èµ·ç‚¹åæ ‡ï¼Œé‚£æ ¹æ®å‰é¢å‘é‡è®¡ç®—çš„åŸç†ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå•ä½å‘é‡(1, 0)ï¼Œå®ƒæ˜¯ä¸€ä¸ªæœå‘xè½´ï¼Œé•¿åº¦ä¸º1çš„å‘é‡ã€‚ç„¶åæˆ‘ä»¬æ—‹è½¬dirå¼§åº¦ï¼Œå†ä¹˜ä»¥æ ‘æé•¿åº¦lengthã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±èƒ½è®¡ç®—å‡ºæ ‘æçš„ç»ˆç‚¹åæ ‡äº†ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><pre><code> const v = new Vector2D(1, 0).rotate(dir).scale(length);\n const v1 = v0.copy().add(v);\n</code></pre><p>å‘é‡çš„æ—‹è½¬æ˜¯å‘é‡çš„ä¸€ç§å¸¸è§æ“ä½œï¼Œå¯¹äºäºŒç»´ç©ºé—´æ¥è¯´ï¼Œå‘é‡çš„æ—‹è½¬å¯ä»¥å®šä¹‰æˆå¦‚ä¸‹æ–¹æ³•ï¼ˆè¿™é‡Œæˆ‘ä»¬çœç•¥äº†æ•°å­¦æ¨å¯¼è¿‡ç¨‹ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å»çœ‹ä¸€ä¸‹<a href=\"https://zhuanlan.zhihu.com/p/98007510\">æ•°å­¦åŸç†</a>ï¼‰ã€‚è¿™ä¸ªæ–¹æ³•æˆ‘ä»¬åé¢è¿˜ä¼šç»å¸¸ç”¨åˆ°ï¼Œä½ å…ˆè®°ä¸€ä¸‹ï¼Œåç»­æˆ‘ä»¬è®²åˆ°ä»¿å°„å˜æ¢çš„æ—¶å€™ï¼Œä¼šæœ‰æ›´è¯¦ç»†çš„è§£é‡Šã€‚</p><pre><code>class Vector2D {\n  ...  \n  rotate(rad) {\n    const c = Math.cos(rad),\n      s = Math.sin(rad);\n    const [x, y] = this;\n\n    this.x = x * c + y * -s;\n    this.y = x * s + y * c;\n\n    return this;\n  }\n}\n</code></pre><p>æˆ‘ä»¬å¯ä»¥ä»ä¸€ä¸ªèµ·å§‹è§’åº¦å¼€å§‹é€’å½’åœ°æ—‹è½¬æ ‘æï¼Œæ¯æ¬¡å°†æ ‘æåˆ†å‰æˆå·¦å³ä¸¤ä¸ªåˆ†æï¼š</p><pre><code>  if(thickness &gt; 2) {\n    const left = dir + 0.2;\n    drawBranch(context, v1, length * 0.9, thickness * 0.8, left, bias * 0.9);\n    const right = dir - 0.2;\n    drawBranch(context, v1, length * 0.9, thickness * 0.8, right, bias * 0.9);\n  }\n\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/1f/y1/1f95a7d1e6ecf30c7db0ef0afc0f7yy1.jpeg?wh=1920*1080\" alt=\"\"></p><p>è¿™æ ·ï¼Œæˆ‘ä»¬å¾—åˆ°çš„å°±æ˜¯ä¸€æ£µå½¢çŠ¶è§„å¾‹çš„æ ‘ã€‚</p><p>æ¥ç€æˆ‘ä»¬ä¿®æ”¹ä»£ç ï¼ŒåŠ å…¥éšæœºå› å­ï¼Œè®©è¿­ä»£ç”Ÿæˆçš„æ–°æ ‘ææœ‰ä¸€ä¸ªéšæœºçš„åè½¬è§’åº¦ã€‚</p><pre><code>  if(thickness &gt; 2) {\n    const left = Math.PI / 4 + 0.5 * (dir + 0.2) + bias * (Math.random() - 0.5);\n    drawBranch(context, v1, length * 0.9, thickness * 0.8, left, bias * 0.9);\n    const right = Math.PI / 4 + 0.5 * (dir - 0.2) + bias * (Math.random() - 0.5);\n    drawBranch(context, v1, length * 0.9, thickness * 0.8, right, bias * 0.9);\n  }\n</code></pre><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°ä¸€æ£µéšæœºçš„æ ‘ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/53/7f/5350becdbb756ce4dae1289b7beba37f.jpeg?wh=1920*1080\" alt=\"\"></p><p>æœ€åï¼Œä¸ºäº†ç¾è§‚ï¼Œæˆ‘ä»¬å†éšæœºç»˜åˆ¶ä¸€äº›èŠ±ç“£ä¸Šå»ï¼Œä½ ä¹Ÿå¯ä»¥å°è¯•ç»˜åˆ¶å…¶ä»–çš„å›¾æ¡ˆåˆ°è¿™æ£µæ ‘ä¸Šã€‚</p><pre><code>  if(thickness &lt; 5 &amp;&amp; Math.random() &lt; 0.3) {\n    context.save();\n    context.strokeStyle = '#c72c35';\n    const th = Math.random() * 6 + 3;\n    context.lineWidth = th;\n    context.beginPath();\n    context.moveTo(...v1);\n    context.lineTo(v1.x, v1.y - 2);\n    context.stroke();\n    context.restore();\n  }\n</code></pre><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å®ç°äº†ç»˜åˆ¶ä¸€æ£µéšæœºæ ‘çš„æ–¹æ³•ã€‚</p><p>å®ƒçš„å®Œæ•´ä»£ç åœ¨<a href=\"https://github.com/akira-cn/graphics/tree/master/vector_tree\">GitHubä»“åº“</a>ï¼Œä½ å¯ä»¥ç ”ç©¶ä¸€ä¸‹ã€‚è¿™é‡Œé¢æœ€å…³é”®çš„ä¸€æ­¥å°±æ˜¯å‰é¢çš„å‘é‡æ“ä½œï¼Œä¸ºäº†å®ç°å‘é‡çš„rotateã€scaleã€addç­‰æ–¹æ³•ï¼Œæˆ‘å°è£…äº†ä¸€ä¸ªç®€å•çš„åº“Vector2d.jsï¼Œä½ ä¹Ÿå¯ä»¥åœ¨<a href=\"https://github.com/akira-cn/graphics/blob/master/common/lib/vector2d.js\">ä»£ç ä»“åº“</a>ä¸­æ‰¾åˆ°å®ƒã€‚</p><h2>å‘é‡è¿ç®—çš„æ„ä¹‰</h2><p>å®é™…ä¸Šï¼Œåœ¨æˆ‘ä»¬çš„å¯è§†åŒ–é¡¹ç›®é‡Œï¼Œç›´æ¥ä½¿ç”¨å‘é‡çš„åŠ æ³•ã€æ—‹è½¬å’Œä¹˜æ³•æ¥æ„é€ çº¿æ®µç»˜åˆ¶å›¾å½¢çš„æƒ…å½¢å¹¶ä¸å¤šã€‚è¿™æ˜¯å› ä¸ºï¼Œåœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ•°æ®åœ¨ä¼ ç»™å‰ç«¯çš„æ—¶å€™å°±å·²ç»è®¡ç®—å¥½äº†ï¼Œæˆ‘ä»¬åªéœ€è¦æ‹¿åˆ°æ•°æ®ç‚¹çš„ä¿¡æ¯ï¼Œæ ¹æ®åæ ‡å˜æ¢è¿›è¡Œæ˜ å°„ï¼Œç„¶åç›´æ¥ç”¨æ˜ å°„åçš„ç‚¹æ¥ç»˜åˆ¶å›¾å½¢å³å¯ã€‚</p><p>æ—¢ç„¶è¿™æ ·ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨è¿™é‡Œåˆè¦å¼ºè°ƒå‘é‡æ“ä½œçš„é‡è¦æ€§å‘¢ï¼Ÿè™½ç„¶æˆ‘ä»¬å¾ˆå°‘ç›´æ¥ä½¿ç”¨å‘é‡æ„é€ çº¿æ®µæ¥å®Œæˆç»˜å›¾ï¼Œä½†æ˜¯å‘é‡è¿ç®—çš„æ„ä¹‰å¹¶ä¸ä»…ä»…åªæ˜¯ç”¨æ¥ç®—ç‚¹çš„ä½ç½®å’Œæ„é€ çº¿æ®µï¼Œè¿™åªæ˜¯æœ€åˆçº§çš„ç”¨æ³•ã€‚æˆ‘ä»¬è¦è®°ä½ï¼Œ<strong>å¯è§†åŒ–å‘ˆç°ä¾èµ–äºè®¡ç®—æœºå›¾å½¢å­¦ï¼Œè€Œå‘é‡è¿ç®—æ˜¯æ•´ä¸ªè®¡ç®—æœºå›¾å½¢å­¦çš„æ•°å­¦åŸºç¡€ã€‚</strong></p><p>è€Œä¸”ï¼Œåœ¨å‘é‡è¿ç®—ä¸­ï¼Œé™¤äº†åŠ æ³•è¡¨ç¤ºç§»åŠ¨ç‚¹å’Œç»˜åˆ¶çº¿æ®µå¤–ï¼Œå‘é‡çš„ç‚¹ä¹˜ã€å‰ä¹˜è¿ç®—ä¹Ÿæœ‰ç‰¹æ®Šçš„æ„ä¹‰ã€‚è¯¾åæˆ‘ä¼šç»™ä½ å‡ºä¸€é“æœ‰æŒ‘æˆ˜æ€§çš„æ€è€ƒé¢˜ ï¼Œè®©ä½ èƒ½æ›´æ·±å…¥åœ°ç†è§£å‘é‡è¿ç®—çš„ç°å®æ„ä¹‰ï¼Œåœ¨ä¸‹ä¸€èŠ‚è¯¾é‡Œæˆ‘ä¼šç»™ä½ ç­”æ¡ˆã€‚</p><h2>è¦ç‚¹æ€»ç»“</h2><p>è¿™ä¸€èŠ‚è¯¾ï¼Œ æˆ‘ä»¬ä»¥Canvasä¸ºä¾‹å­¦ä¹ äº†åæ ‡å˜æ¢ï¼Œä»¥åŠç”¨å‘é‡æè¿°ç‚¹å’Œçº¿æ®µçš„åŸç†å’Œæ–¹æ³•ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œé‡‡ç”¨å¹³é¢ç›´è§’åæ ‡ç³»ç»˜å›¾çš„æ—¶å€™ï¼Œå¯¹åæ ‡è¿›è¡Œå¹³ç§»ç­‰çº¿æ€§å˜æ¢ï¼Œå¹¶ä¸ä¼šæ”¹å˜åæ ‡ç³»ä¸­å›¾å½¢çš„åŸºæœ¬å½¢çŠ¶å’Œç›¸å¯¹ä½ç½®ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åˆ©ç”¨åæ ‡å˜æ¢è®©æˆ‘ä»¬çš„ç»˜å›¾å˜å¾—æ›´åŠ å®¹æ˜“ã€‚Canvasåæ ‡å˜æ¢ç»å¸¸ä¼šç”¨åˆ°translateå’Œscaleè¿™ä¸¤ä¸ªå˜æ¢ï¼Œå®ƒä»¬çš„æ“ä½œå’ŒåŸç†éƒ½å¾ˆç®€å•ï¼Œæˆ‘ä»¬æ ¹æ®å®é™…éœ€æ±‚æ¥è®¾ç½®å°±å¥½äº†ã€‚</p><p>åœ¨å¹³é¢ç›´è§’åæ ‡ç³»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰å‘é‡æ¥ç»˜å›¾ã€‚å‘é‡å¯ä»¥è¡¨ç¤ºç»˜å›¾ç©ºé—´ä¸­çš„ä¸€ä¸ªç‚¹ï¼Œæˆ–è€…è¿æ¥åŸç‚¹çš„ä¸€æ¡çº¿æ®µã€‚ä¸¤ä¸ªå‘é‡ç›¸åŠ ï¼Œç»“æœç›¸å½“äºå°†è¢«åŠ å‘é‡çš„ç»ˆç‚¹æ²¿ç€åŠ æ•°å‘é‡çš„æ–¹å‘ç§»åŠ¨ä¸€æ®µè·ç¦»ï¼Œç§»åŠ¨çš„è·ç¦»ç­‰äºåŠ æ•°å‘é‡çš„é•¿åº¦ã€‚åˆ©ç”¨å‘é‡çš„è¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬å°±èƒ½ä»¥æŸä¸ªç‚¹ä¸ºèµ·ç‚¹ï¼Œæœä»»æ„æ–¹å‘ç»˜åˆ¶çº¿æ®µï¼Œä»è€Œç»˜åˆ¶å„ç§è¾ƒå¤æ‚çš„å‡ ä½•å›¾å½¢äº†ã€‚</p><h2>å°è¯•ç‰›åˆ€</h2><ol>\n<li>æˆ‘ä»¬å·²ç»çŸ¥é“å¦‚ä½•ç”¨å‘é‡æ¥å®šä¹‰ä¸€ä¸ªçº¿æ®µï¼Œä½ çŸ¥é“å¦‚ä½•åˆ¤æ–­ä¸¤ä¸ªçº¿æ®µçš„ä½ç½®å…³ç³»å—ï¼Ÿå‡è®¾æœ‰ä¸¤ä¸ªçº¿æ®µl<sub>1</sub>å’Œl<sub>2</sub>ï¼Œå·²çŸ¥å®ƒä»¬çš„èµ·ç‚¹å’Œç»ˆç‚¹åˆ†åˆ«æ˜¯[(x<sub>10</sub>, y<sub>10</sub>),(x<sub>11</sub>, y<sub>11</sub>)]ã€[(x<sub>20</sub>, y<sub>20</sub>),(x<sub>21</sub>, y<sub>21</sub>)]ï¼Œä½ èƒ½åˆ¤æ–­å®ƒä»¬çš„å…³ç³»å—ï¼ˆå°æç¤ºï¼šä¸¤ä¸ªçº¿æ®µä¹‹é—´çš„å…³ç³»æœ‰<strong>å¹³è¡Œã€å‚ç›´</strong>æˆ–æ—¢ä¸å¹³è¡Œåˆä¸å‚ç›´ï¼‰ï¼Ÿ</li>\n<li>å·²çŸ¥çº¿æ®µ[(x<sub>0</sub>, y<sub>0</sub>)ã€(x<sub>1</sub>, y<sub>1</sub>)]ï¼Œä»¥åŠä¸€ä¸ªç‚¹(x<sub>2</sub>, y<sub>2</sub>)ï¼Œæ€ä¹ˆæ±‚ç‚¹åˆ°çº¿æ®µçš„è·ç¦»ï¼Ÿ</li>\n<li>ä¸€ä¸ªå¹³é¢ä¸Šæ”¾ç½®äº†ä¸€ä¸ªæ‰«æå™¨ï¼Œæ–¹å‘å»¶yè½´æ–¹å‘ï¼ˆè¯¥åæ ‡ç³»yè½´å‘ä¸Šï¼‰ï¼Œæ‰«æå™¨çš„è§†è§’æ˜¯60åº¦ã€‚å‡è®¾å®ƒå¯ä»¥æ‰«æåˆ°æ— é™è¿œçš„åœ°æ–¹ï¼Œé‚£å¯¹äºå¹³é¢ä¸Šç»™å®šçš„ä»»æ„ä¸€ä¸ªç‚¹(x,y)ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•åˆ¤æ–­è¿™ä¸ªç‚¹æ˜¯å¦å¤„äºæ‰«æèŒƒå›´å†…å‘¢ï¼Ÿ</li>\n</ol><p><img src=\"https://static001.geekbang.org/resource/image/89/64/8961491152b0fe953826d59d687a0b64.jpeg?wh=1920*1080\" alt=\"\"></p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå’Œæˆ‘è®¨è®ºï¼Œåˆ†äº«ä½ çš„ç­”æ¡ˆå’Œæ€è€ƒï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™èŠ‚è¯¾åˆ†äº«ç»™ä½ çš„æœ‹å‹ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ï¼</p><hr><h2><span class=\"reference\">æºç </span></h2><p><span class=\"reference\"> [1]<a href=\"https://github.com/akira-cn/graphics/tree/master/vector_tree\">ç»˜åˆ¶éšæœºæ ‘çš„æºä»£ç </a></span><br>\n<span class=\"reference\">[2]<a href=\"https://github.com/akira-cn/graphics/tree/master/coordinates\">åæ ‡å˜æ¢çš„æºä»£ç </a></span></p><h2><span class=\"reference\">æ¨èé˜…è¯»</span></h2><p><span class=\"reference\">[1] <a href=\"https://zhuanlan.zhihu.com/p/98007510\">äºŒç»´æ—‹è½¬çŸ©é˜µä¸å‘é‡æ—‹è½¬æ¨èæ–‡æ¡£</a></span><br>\n<span class=\"reference\">[2] ä¸€ä¸ªæœ‰è¶£çš„ç»˜å›¾åº“ï¼š<a href=\"https://github.com/pshihn/rough\">Rough.js</a></span><br>\n<span class=\"reference\">[3] <a href=\"https://github.com/akira-cn/graphics/blob/master/common/lib/vector2d.js\">Vector2d.jsæ¨¡å—æ–‡æ¡£</a></span></p>","neighbors":{"left":{"article_title":"04 | GPUä¸æ¸²æŸ“ç®¡çº¿ï¼šå¦‚ä½•ç”¨WebGLç»˜åˆ¶æœ€ç®€å•çš„å‡ ä½•å›¾å½¢ï¼Ÿ","id":254631},"right":{"article_title":"06 |  å¯è§†åŒ–ä¸­ä½ å¿…é¡»è¦æŒæ¡çš„å‘é‡ä¹˜æ³•çŸ¥è¯†","id":256827}},"comments":[{"had_liked":false,"id":231401,"user_name":"gltjk","can_delete":false,"product_type":"c1","uid":1341515,"ip_address":"","ucode":"A2ACFE7D8A32C5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7hqBj1WIXVJgRwxVEg7fREAwI04BKRM8ibzVA8DIOaLSLqIrjw8UYr9GDUFFZW7mhBLC4hSp5r9g/132","comment_is_top":false,"comment_ctime":1593668034,"is_pvip":false,"replies":[{"id":"85497","content":"èµ","user_name":"ä½œè€…å›å¤","user_name_real":"æœˆå½±","uid":"1159792","ctime":1593739345,"ip_address":"","comment_id":231401,"utype":1}],"discussion_count":2,"race_medal":0,"score":"126147719618","product_id":100053801,"comment_content":"ç”¨å‘é‡çš„ç‚¹ä¹˜ã€å‰ä¹˜æ¦‚å¿µé‡æ–°æ¢³ç†å°è¯•ç‰›åˆ€çš„ä¸‰é¢˜ï¼š<br><br>çº¿æ®µ A1B1 ä¸çº¿æ®µ A2B2 çš„å…³ç³» {<br>  å¦‚æœ |A1B1| æˆ– |A2B2| ä¸º 0 ï¼Œè¯´æ˜çº¿æ®µé€€åŒ–æˆç‚¹ï¼Œæ— æ³•åˆ¤æ–­å…³ç³»<br>  å¦‚æœ A1B1Â·A2B2 ä¸º 0ï¼Œè¯´æ˜å¤¹è§’çš„ä½™å¼¦å€¼ä¸º 0ï¼ŒäºŒè€…å‚ç›´<br>  å¦‚æœ |A1B1Ã—A2B2| ä¸º 0ï¼Œè¯´æ˜å¤¹è§’çš„æ­£å¼¦å€¼ä¸º 0ï¼ŒäºŒè€…æ–¹å‘ä¸€è‡´ï¼Œå¯èƒ½å¹³è¡Œä¹Ÿå¯èƒ½é‡åˆ {<br>    å¦‚æœ |A1B1Ã—A1A2| ä¸ä¸º0ï¼Œè¯´æ˜å››ç‚¹ä¸å…±çº¿ï¼Œæ’é™¤æ‰é‡åˆçš„æƒ…å†µï¼ŒäºŒè€…å¹³è¡Œ<br>  }<br>  å…¶ä»–æƒ…å†µå³ä¸ºæ—¢ä¸å¹³è¡Œä¹Ÿä¸å‚ç›´<br>}<br><br>ç‚¹ P åˆ°çº¿æ®µ AB çš„è·ç¦» {<br>  å¦‚æœ |AB| ä¸º 0ï¼Œè¯´æ˜çº¿æ®µé€€åŒ–æˆç‚¹ï¼Œ|AP| å°±æ˜¯è·ç¦»<br>  å¦‚æœ APÂ·ABï¼š<br>    &lt;0ï¼Œè¯´æ˜ P åˆ° AB çš„æŠ•å½±åœ¨çº¿æ®µ BA çš„å»¶é•¿çº¿ä¸Šï¼Œâˆ PAB ä¸ºé’è§’ï¼Œ|AP| å°±æ˜¯è·ç¦»<br>    &gt;|AB|ï¼Œè¯´æ˜ P åˆ° AB çš„æŠ•å½±åœ¨çº¿æ®µ AB çš„å»¶é•¿çº¿ä¸Šï¼Œâˆ PBA ä¸ºé’è§’ï¼Œ|BP| å°±æ˜¯è·ç¦»<br>    å…¶ä»–æƒ…å†µï¼Œè¯´æ˜ P åˆ° AB çš„æŠ•å½±åœ¨çº¿æ®µ AB ä¸Šï¼Œç”¨ |APÃ—AB| é™¤ä»¥ |AB| å³å¯ç®—å‡ºè·ç¦»ï¼ˆå¤–ç§¯æ¨¡çš„å‡ ä½•æ„ä¹‰ |absinÎ¸| å°±æ˜¯å¹³è¡Œå››è¾¹å½¢çš„é¢ç§¯ï¼Œé™¤ä»¥åº•å¾—åˆ°é«˜ï¼‰<br>}<br><br>ç‚¹ P ä¸æ‰«æè§’åº¦ Î± çš„å…³ç³» {<br>  å¦‚æœ Î±&gt;2Ï€ï¼Œ360Â°å…¨è¦†ç›–ï¼Œè‚¯å®šèƒ½æ‰«æåˆ°<br>  å¦‚æœ Î±&lt;0ï¼Œå½“å‰ä»…å½“ç‚¹ P ä¸åŸç‚¹é‡åˆï¼ˆå³ P çš„æ¨¡ä¸º 0ï¼‰æ—¶æ‰èƒ½æ‰«æåˆ°<br>  æŠŠä¸€å››è±¡é™é‡Œçš„è¾¹ä¸Šä»åŸç‚¹å‡ºå‘çš„å‘é‡å®šä¸º Aï¼ŒäºŒä¸‰è±¡é™é‡Œçš„å®šä¸º Bï¼ˆå¦‚æœ Î±=0ï¼Œè™½ç„¶äºŒè€…ä¸åœ¨è±¡é™é‡Œï¼Œä¸è¿‡æ­¤æ—¶æ–¹å‘ä¸€è‡´ï¼Œæ— æ‰€è°“äº†ï¼‰<br>  å¦‚æœ |AxP|=0 æˆ– |PxB|=0ï¼Œè¯´æ˜ P ä¸ A æˆ– B æ–¹å‘ä¸€è‡´ï¼Œåˆšå¥½åœ¨è¾¹ç¼˜ä¸Šï¼Œèƒ½æ‰«æåˆ°<br>  å¦‚æœ Î±&gt;Ï€ï¼Œå¯ä»¥å‡è®¾åæ ‡ç³»ä¸Šä¸‹ç¿»è½¬ï¼Œæœ‰ä¸€ä¸ªè§†è§’ä¸º 2Ï€-Î± çš„æ‰«æå™¨åœ¨æ‰«æ P å…³äº x è½´çš„æ˜ å°„ P&#39;ï¼Œå¦‚æœ P&#39; èƒ½è¢«æ‰«æåˆ°ï¼Œè¯´æ˜ P æ‰«æä¸åˆ°ï¼Œåä¹‹äº¦ç„¶<br>  å…¶ä½™æƒ…å†µï¼Œå¦‚æœè¦æ‰«æåˆ°ï¼Œå¿…é¡»è¦è®©ä» A åˆ° B é€†æ—¶é’ˆæ‰«ææ—¶ç»è¿‡ Pï¼Œå³ AxP å’Œ PxB çš„æ–¹å‘éƒ½è¦ä¸ z è½´æ­£æ–¹å‘ä¸€è‡´ï¼ˆç”¨å³æ‰‹èºæ—‹å®šåˆ™å¯ä»¥åˆ¤æ–­ï¼‰<br>}<br><br>ä»£ç å¦‚ä¸‹ï¼ˆåœ¨ä¹‹å‰çš„ä»£ç ä¸Šä¿®æ”¹çš„ï¼‰ï¼š<br>https:&#47;&#47;codepen.io&#47;gltjk&#47;pen&#47;eYJyOeR","like_count":30,"discussions":[{"author":{"id":1159792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/70/ba9cecc6.jpg","nickname":"æœˆå½±","note":"","ucode":"298582FA7DBF27","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500286,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593739345,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1230313,"avatar":"https://static001.geekbang.org/account/avatar/00/12/c5/e9/4013a191.jpg","nickname":"é˜¿é‘«","note":"","ucode":"97A0BE95FB7383","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290380,"discussion_content":"ç¬¬äºŒé—®åº”è¯¥æ˜¯åˆ¤æ–­|AP|cosÎ¸ çš„è·ç¦»å§ï¼Ÿ\n|AP|cosÎ¸ < 0 è¡¨ç¤º âˆ PAB ä¸ºé’è§’ï¼Œ|AP| å°±æ˜¯è·ç¦»\n|AP|cosÎ¸ > |AB| è¡¨ç¤º âˆ PBA ä¸ºé’è§’ï¼Œ|BP| å°±æ˜¯è·ç¦»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594454170,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":231164,"user_name":"gltjk","can_delete":false,"product_type":"c1","uid":1341515,"ip_address":"","ucode":"A2ACFE7D8A32C5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7hqBj1WIXVJgRwxVEg7fREAwI04BKRM8ibzVA8DIOaLSLqIrjw8UYr9GDUFFZW7mhBLC4hSp5r9g/132","comment_is_top":false,"comment_ctime":1593597839,"is_pvip":false,"replies":[{"id":"85407","content":"ç”¨ä»£æ•°æ–¹æ³•å½“ç„¶ä¹Ÿèƒ½åšï¼Œä¸è¿‡è¿™æ ·åˆè¦åˆ¤æ–­å¼€æ–¹ç¬¦å·åˆè¦åˆ¤æ–­æ— ç©·å¤§ï¼Œå¯èƒ½è¿˜æœ‰å…¶ä»–ç‰¹æ®Šæƒ…å†µéå¸¸ç¹çã€‚æ—¢ç„¶æˆ‘ä»¬è¿™ä¸€èŠ‚è®²äº†å‘é‡ï¼Œä½ è¯•ç€ç”¨å‘é‡æ€è·¯å»è§£å†³ï¼Œä¼šå‘ç°ååˆ†ç®€å•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æœˆå½±","uid":"1159792","ctime":1593653443,"ip_address":"","comment_id":231164,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23068434319","product_id":100053801,"comment_content":"ä»Šå¤©çš„å°è¯•ç‰›åˆ€å®Œå…¨æ˜¯ä¸­å­¦æ•°å­¦å•Šâ€¦â€¦<br><br>1. ç”¨Î”y&#47;Î”xè®¡ç®—æ–œç‡ï¼Œå¹³è¡Œæ˜¯æ–œç‡ç›¸ç­‰ï¼Œå‚ç›´æ˜¯æ–œç‡ä¹˜ç§¯ä¸º-1ã€‚æ‰€ä»¥ï¼š<br>å¹³è¡Œï¼šÎ”y1&#47;Î”x1=Î”y2&#47;Î”x2<br>å‚ç›´ï¼š(Î”y1&#47;Î”x1)(Î”y2&#47;Î”x2)=-1<br>ä¸ºäº†é¿å…å‡ºç°åˆ†æ¯ä¸ºé›¶ï¼ˆå³å¹³è¡Œäºyè½´ï¼Œæ–œç‡æ— ç©·å¤§ï¼‰çš„æƒ…å†µï¼Œå¯ä»¥æŠŠé™¤æ³•æ¢æˆä¹˜æ³•ï¼š<br>å¹³è¡Œï¼šÎ”x1Î”y2-Î”x2Î”y1=0<br>å‚ç›´ï¼šÎ”x1Î”x2+Î”y1Î”y2=0<br>ä¸è¿‡è¦è€ƒè™‘ä¸€ä¸ªè¾¹ç¼˜æƒ…å†µï¼Œå¦‚æœä¸¤ä¸ªçº¿æ®µæœ‰ä¸€ä¸ªé•¿åº¦ä¸ºé›¶äº†ï¼ˆé€€åŒ–æˆç‚¹ï¼‰ï¼Œå°±æ²¡æ³•åˆ¤æ–­äº†ã€‚<br><br>2. è®¾çº¿æ®µä¸ºABï¼Œå…¶ä¸­A(x0,y0),B(x1,y1)ï¼Œç‚¹P(x2,y2)<br>æ­£å¸¸æ€è·¯æ˜¯ç›´æ¥å¥—ç”¨ç‚¹åˆ°ç›´çº¿è·ç¦»å…¬å¼ d=|Ax0+By0+C|&#47;Math.hypot(A,B)ï¼Œå…¶ä¸­Aã€Bã€Cä¸ºç›´çº¿æ–¹ç¨‹Ax+By+C=0é‡Œçš„ç³»æ•°ï¼Œ(x0,y0)ä¸ºç‚¹çš„åæ ‡ã€‚<br>ç”¨ä¸¤ç‚¹å¼å†™å‡ºç›´çº¿æ–¹ç¨‹ï¼Œ(y-y0)&#47;(x-x0)=(y1-y0)&#47;(x1-x0)<br>æ¢æˆAx+By+C=0çš„å½¢å¼å¹¶æ’é™¤åˆ†æ¯ä¸º0çš„æƒ…å†µï¼š(y1-y0)x+(x0-x1)y-(y1-y0)x0-(x0-x1)y0=0<br>è§‚å¯Ÿç³»æ•°å¾—A=y1-y0ï¼ŒB=x0-x1ï¼Œc=-(y1-y0)x0-(x0-x1)y0=-Ax0-By0<br>æŠŠAã€Bã€CåŠ(x2,y2)ä»£å…¥å³å¯ã€‚<br>ä¸è¿‡è¿™é‡Œæœ‰ä¸ªå‘ï¼Œç»™çš„ä¸æ˜¯ç›´çº¿ï¼Œè€Œæ˜¯çº¿æ®µï¼Œçº¿æ®µæ˜¯ä¸èƒ½æ— é™å»¶é•¿çš„ï¼Œæ‰€ä»¥è¿‡ç‚¹åˆ°ç›´çº¿ä½œå‚çº¿ä¸ç›´çº¿çš„äº¤ç‚¹ä¸ä¸€å®šåœ¨çº¿æ®µä¸Šã€‚<br>å¦‚æœé‡åˆ°è¿™ç§æƒ…å†µï¼Œå³è§’Aæˆ–è§’Bæ˜¯é’è§’ï¼Œå°±åªèƒ½å–PAå’ŒPBçš„è¾ƒå°å€¼ã€‚<br>åˆ¤æ–­æ˜¯å¦ä¸ºé’è§’ï¼Œå¯ä»¥ç”¨é‚»è¾¹å¹³æ–¹å’Œå‡å»å¯¹è¾¹å¹³æ–¹ï¼Œç»“æœä¸ºè´Ÿæ•°è¯´æ˜æ˜¯é’è§’ï¼ˆæ­£æ•°æ˜¯é”è§’ï¼Œé›¶æ˜¯ç›´è§’â€”â€”åˆšå¥½å°±æ˜¯å‹¾è‚¡å®šç†äº†ï¼‰ã€‚<br>å¦å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªè¾¹ç¼˜æƒ…å†µï¼Œå°±æ˜¯çº¿æ®µçš„ä¸¤ä¸ªç‚¹é‡åˆï¼Œä¸ç¬¬ä¸€é¢˜ä¸åŒï¼Œè¿™æ—¶å€™çš„è·ç¦»è¿˜æ˜¯å¯ä»¥ç®—çš„ï¼ˆæ­¤æ—¶PA=PBï¼‰ã€‚<br><br>3. æ¨¡ä»¿æ–‡ä¸­æ€è·¯ç”¨åæ­£åˆ‡å‡½æ•°Math.atan2()å–åˆ°èŒƒå›´æ˜¯[-PI, PI]çš„è§’åº¦å€¼ï¼Œç„¶åä¸æ‰«æèŒƒå›´æ¯”è¾ƒå³å¯ã€‚<br>è¿™é‡Œæˆ‘æŠŠæ‰«æèŒƒå›´æ‰©å±•ä¸ºä»»æ„å®æ•°çš„è§’åº¦ï¼Œå¹¶å…è®¸æ‰«æåˆ°åŸç‚¹ï¼ˆå¦‚æœè§’åº¦ä¸ºè´Ÿåˆ™åªèƒ½æ‰«æåˆ°åŸç‚¹ï¼‰ã€‚<br>ç„¶åå¯¹æ‰«æèŒƒå›´çš„ä¸€åŠÎ¸è¿›è¡Œåˆ†ç±»è®¨è®ºï¼š<br>è¶…è¿‡Ï€ï¼Œè¯´æ˜360Â°å…¨æ–¹ä½è¦†ç›–ï¼Œè‚¯å®šæ‰«æå¾—åˆ°ï¼›<br>æ²¡åˆ°Ï€&#47;2ï¼Œæ‰«æèŒƒå›´åœ¨[-Ï€,0]ä¹‹ä¸­ï¼Œç›´æ¥å’Œåæ­£åˆ‡å€¼æ¯”è¾ƒå³å¯ï¼›<br>å…¶ä½™æƒ…å†µï¼Œæ‰«æèŒƒå›´èµ·ç‚¹åœ¨ç¬¬å››è±¡é™ï¼Œç»ˆç‚¹åœ¨ç¬¬ä¸‰è±¡é™ï¼Œè¢«æ‰«æçš„ç‚¹å¦‚æœåœ¨ä¸‰å››è±¡é™è¦å¤§äºèµ·ç‚¹æˆ–å°äºç»ˆç‚¹ï¼Œå¦‚æœåœ¨ä¸€äºŒè±¡é™è‚¯å®šèƒ½æ‰«æåˆ°ï¼ˆä¹Ÿè‚¯å®šå¤§äºèµ·ç‚¹ï¼‰ã€‚<br><br>ç»¼ä¸Šï¼Œå› ä¸ºæ•°å­—æ¯”è¾ƒå¤šï¼Œè¿™æ¬¡ä»£ç ç”¨TSå®Œæˆï¼ŒåŒæ—¶é¡ºä¾¿ä½“éªŒäº†ä¸€ä¸‹Vue 3çš„Composition APIï¼š<br>https:&#47;&#47;codepen.io&#47;gltjk&#47;pen&#47;OJMOOJR","like_count":5,"discussions":[{"author":{"id":1159792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/70/ba9cecc6.jpg","nickname":"æœˆå½±","note":"","ucode":"298582FA7DBF27","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500183,"discussion_content":"ç”¨ä»£æ•°æ–¹æ³•å½“ç„¶ä¹Ÿèƒ½åšï¼Œä¸è¿‡è¿™æ ·åˆè¦åˆ¤æ–­å¼€æ–¹ç¬¦å·åˆè¦åˆ¤æ–­æ— ç©·å¤§ï¼Œå¯èƒ½è¿˜æœ‰å…¶ä»–ç‰¹æ®Šæƒ…å†µéå¸¸ç¹çã€‚æ—¢ç„¶æˆ‘ä»¬è¿™ä¸€èŠ‚è®²äº†å‘é‡ï¼Œä½ è¯•ç€ç”¨å‘é‡æ€è·¯å»è§£å†³ï¼Œä¼šå‘ç°ååˆ†ç®€å•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593653443,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":231086,"user_name":"Cailven","can_delete":false,"product_type":"c1","uid":1381478,"ip_address":"","ucode":"4F80DC0E86066A","user_header":"https://static001.geekbang.org/account/avatar/00/15/14/66/57b04294.jpg","comment_is_top":false,"comment_ctime":1593578391,"is_pvip":false,"replies":[{"id":"85412","content":"å—¯å—¯ï¼Œåç»­è¯¾ç¨‹ä¸­è¿˜ä¼šçœ‹åˆ°ç”¨åˆ†å½¢æ€æƒ³ç»˜åˆ¶æœ‰è¶£å›¾æ¡ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æœˆå½±","uid":"1159792","ctime":1593654731,"ip_address":"","comment_id":231086,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18773447575","product_id":100053801,"comment_content":"é‚£æ£µæ ‘è®©æˆ‘æƒ³åˆ°äº†æ›¾ç»ç”¨åˆ†å½¢å‡ ä½•åœ¨webglé‡Œç©ç”Ÿæˆè‰ºæœ¯çš„ç»å†ã€‚æ­£æ‰€è°“æ•°å­¦ä¸å¥½æ²¡æ³•æè‰ºæœ¯ï¼Œåˆšå·§è¿™å¥è¯å°±è¡¨ç°åœ¨å›¾å½¢å­¦å’Œè§†è§‰å¯è§†åŒ–æ‰€è°“çš„åˆ›æ„ç¼–ç¨‹è¿™ä¸ªèŒƒç•´é‡Œã€‚","like_count":4,"discussions":[{"author":{"id":1159792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/70/ba9cecc6.jpg","nickname":"æœˆå½±","note":"","ucode":"298582FA7DBF27","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500148,"discussion_content":"å—¯å—¯ï¼Œåç»­è¯¾ç¨‹ä¸­è¿˜ä¼šçœ‹åˆ°ç”¨åˆ†å½¢æ€æƒ³ç»˜åˆ¶æœ‰è¶£å›¾æ¡ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593654731,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":261103,"user_name":"weineel","can_delete":false,"product_type":"c1","uid":1049741,"ip_address":"","ucode":"6DC6EF4F256A53","user_header":"https://static001.geekbang.org/account/avatar/00/10/04/8d/005c2ff3.jpg","comment_is_top":false,"comment_ctime":1605196755,"is_pvip":true,"replies":[{"id":"94949","content":"ä¹˜ä¸Šé€†çŸ©é˜µå°±å¯ä»¥è½¬æ¢å›æ¥","user_name":"ä½œè€…å›å¤","user_name_real":"æœˆå½±","uid":"1159792","ctime":1605492360,"ip_address":"","comment_id":261103,"utype":1}],"discussion_count":1,"race_medal":1,"score":"10195131347","product_id":100053801,"comment_content":"è€å¸ˆå¥½ï¼Œåæ ‡ç³»è½¬æ¢åæ€ä¹ˆè½¬æ¢å›æ¥ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1159792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/70/ba9cecc6.jpg","nickname":"æœˆå½±","note":"","ucode":"298582FA7DBF27","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509378,"discussion_content":"ä¹˜ä¸Šé€†çŸ©é˜µå°±å¯ä»¥è½¬æ¢å›æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605492360,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":231127,"user_name":"æ¸¡","can_delete":false,"product_type":"c1","uid":1397140,"ip_address":"","ucode":"55C09E9A495BAC","user_header":"https://static001.geekbang.org/account/avatar/00/15/51/94/d667294c.jpg","comment_is_top":false,"comment_ctime":1593589931,"is_pvip":false,"replies":[{"id":"85409","content":"å¾ˆæ£’ï½ç¬¬äºŒé¢˜ä¸å¿…æ±‚äº¤ç‚¹æˆ–è€…è¯´å‚è¶³ã€‚å¯ä»¥ç›´æ¥ç”¨å‘é‡å‰ç§¯çš„æ¨¡ç­‰äºå¹³è¡Œå››è¾¹å½¢é¢ç§¯è¿™ä¸€æ€§è´¨ï¼Œå†é™¤ä»¥åº•è¾¹é•¿åº¦ï¼Œå¾—åˆ°çš„å°±æ˜¯å¹³è¡Œå››è¾¹å½¢çš„é«˜ï¼Œå³ç‚¹åˆ°ç›´çº¿çš„è·ç¦»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æœˆå½±","uid":"1159792","ctime":1593653754,"ip_address":"","comment_id":231127,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10183524523","product_id":100053801,"comment_content":"ä»¿ä½›å›åˆ°äº†ä¸­å­¦çš„è§£æå‡ ä½•é¢˜ï¼Œæ„Ÿè°¢è€å¸ˆè®²è§£å‘é‡çš„ä¸¤ä¸ªå«ä¹‰ï¼Œä½†æˆ‘å¯¹å‘é‡æœ‰äº›è‡ªå·±çš„ç†è§£ï¼Œæ­£å¥½æœ‰è‚‹äºè§£å†³è€å¸ˆä»Šå¤©çš„æ€è€ƒé¢˜ï¼Œä¸‹é¢è¯´è¯´æˆ‘çš„æ€è·¯ï¼š<br><br>1.1ï¼šè‹¥å¯¹æ­¤é¢˜åšä¸€ä¸ªç­‰æ•ˆæ›¿ä»£çš„è¯ï¼Œå…¶å®ä¸å¿…æ‹˜æ³¥äºçº¿æ®µï¼Œå¯ä»¥å»¶ä¼¸åˆ°çº¿æ®µæ‰€åœ¨çš„ç›´çº¿ï¼Œè¿™ä¸¤æ¡ç›´çº¿æ˜¯å¦å¹³è¡Œæˆ–å‚ç›´ä¸åŸæ¥çš„ä¸¤æ¡çº¿æ®µçš„å…³ç³»æ˜¯ä¸€è‡´çš„<br>1.2ï¼šç›´çº¿çš„å…³ç³»å¯ä»¥ç†è§£ä¸ºæ–¹å‘ä¸Šçš„å…³ç³»ï¼Œæ—¢ç„¶å‘é‡å¯ä»¥è¡¨ç¤ºæ–¹å‘ï¼Œé‚£ä¹ˆæ­¤é¢˜å°±å¯ä»¥è¿›ä¸€æ­¥ç”¨å‘é‡æ¥æ›¿ä»£åŸæ¥çš„çº¿æ®µï¼Œä¾‹å¦‚ç”¨v1æ›¿ä»£çº¿æ®µl1,å€¼ä¸ºï¼ˆx11-x10,y11-y10)ã€‚<br>*1.2.1ï¼šè‹¥ä¸ç†è§£çš„è¯ï¼Œå°±å½“æ˜¯æŠŠåŸæ¥çš„ä¸¤æ¡ç›´çº¿å¹³ç§»è‡³ç»è¿‡åæ ‡åŸç‚¹å§ï¼Œå› ä¸ºå¹³ç§»ä¸å½±å“ç›´çº¿å¹³ç­‰æˆ–å‚ç›´çš„å…³ç³»<br>1.2.2ï¼šä¸ºæ–¹ä¾¿ä¹¦å†™ä¸æŸ¥çœ‹ï¼Œè®¾ä¸€äº›åˆ«åå§ï¼šv1=(X1,Y1),å…¶ä¸­X1=x11-x10,Y1=y11-y10ï¼›v2=(X2,Y2),å…¶ä¸­X2=x21-x20,Y2=y21-y20<br>1.3ï¼šå‘é‡å‚ç›´çš„æ¡ä»¶æ˜¯ç‚¹ç§¯ä¸º0ï¼Œæ‰€ä»¥è¿™é‡Œåˆ¤æ–­å‚ç›´çš„æ¡ä»¶æ˜¯X1*X2 + Y1*Y2 == 0<br>1.4ï¼šå¹³è¡Œçš„æ¡ä»¶æˆ‘æƒ³è¯´å¾—ç®€å•ç‚¹ï¼Œé€€å›åˆ°ç›´çº¿å°±æ˜¯å®ƒä»¬ä¸xè½´çš„å¤¹è§’ç›¸ç­‰ï¼Œä¹Ÿå°±æ˜¯æ–œç‡ç›¸ç­‰ï¼Œæ‰€ä»¥æ¡ä»¶æ˜¯X1*Y2 == X2*Y1<br><br>2.1ï¼šä¸ç¬¬1é¢˜ä¸€æ ·çš„æ›¿ä»£ï¼Œè·ç¦»ç­‰äºè¯¥ç‚¹åˆ°çº¿æ®µæ‰€åœ¨ç›´çº¿çš„è·ç¦»ï¼Œé‚£å…³é”®å°±æ˜¯åœ¨ç›´çº¿ä¸Šæ‰¾ä¸€ä¸ªç‚¹ï¼Œè¿™ä¸ªç‚¹ä¸æŒ‡å®šç‚¹çš„è¿æˆçš„ç›´çº¿ä¸åŸæ¥çš„ç›´çº¿å‚ç›´ï¼Œæœ€åè¦æ±‚çš„è·ç¦»å°±æ˜¯è¿™ä¸¤ä¸ªç‚¹çš„è·ç¦»äº†<br>2.2ï¼šåŒæ ·ï¼Œç”¨å‘é‡æ›¿ä»£é¢˜ä¸­çš„çº¿æ®µå°±æ˜¯:v1=(X1ï¼ŒY1)ï¼Œå…¶ä¸­X1=x1-x0,Y1=y1-y0,ç„¶åå‡‘ä¸€ä¸ªä¸æ­¤å‘é‡å‚ç›´çš„å‘é‡v2å‡ºæ¥ï¼Œç®€å•åšæ³•å°±æ˜¯v2=(-Y1,X1), ä»£å…¥ç‚¹ç§¯å…¬å¼å¿…å¾—0<br>2.2.1ï¼šå½“ç„¶v2ä¹Ÿå¯ä»¥æ˜¯ï¼ˆY1,-X1),è¿™é‡Œä¸å¦¨ç”¨å‰ä¸€ä¸ªï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„<br>*2.3ï¼šæœ¬é¢˜æˆ‘å¯¹å‘é‡çš„ç†è§£æ˜¯ï¼šä»æŸç‚¹åˆ°å¦ä¸€ç‚¹çš„å¢é‡ï¼Œå³äºŒç»´çš„deltaã€‚å€Ÿæ­¤å°±å¯ä»¥ç®—å‡ºä¸é¢˜ä¸­çº¿æ®µå‚ç›´çš„ç›´çº¿ä¸Šçš„å¦ä¸€ä¸ªç‚¹,å°±æ˜¯æŠŠå‰é¢ç®—å‡ºçš„å‚ç›´å‘é‡åŠ ç»™ç‚¹(x2,y2)ï¼Œå°±å¾—åˆ°äº†(x2-Y1,y2+X1)ï¼Œå³(x2-y1+y0,y2+x1-x0)<br>2.4ï¼šä¸¤ç‚¹å†³å®šä¸€ç›´çº¿ï¼ŒåŸºäºè¿™ä¸¤ä¸ªç‚¹ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç®—å‡ºé‚£æ¡å‚ç›´ç›´çº¿çš„æ–¹ç¨‹äº†ï¼Œå†åŠ ä¸Šé¢˜ä¸­çº¿æ®µçš„ç›´çº¿æ–¹ç¨‹ï¼Œé‚£ä¹ˆè¿™ä¸ªå…³é”®ç‚¹å°±æ˜¯è¿™ä¸¤æ¡ç›´çº¿çš„äº¤ç‚¹ï¼Œé—®é¢˜è½¬åŒ–ä¸ºè§£äºŒå…ƒä¸€æ¬¡æ–¹ç¨‹ç»„äº†ã€‚<br>2.5ï¼šæœ€åè·ç¦»å°±ç­‰äºè¿™ä¸ªäº¤ç‚¹åˆ°ï¼ˆx2,y2)çš„è·ç¦»<br><br>3.1ï¼šæ­¤é¢˜æˆ‘çš„è¯´æ³•ä¸å¤ªä¸¥è°¨ï¼Œå…ˆè¿™ä¹ˆç®€åŒ–ï¼šæŠŠæ‰«æå™¨çš„ä¸¤æ¡è¾¹çœ‹æˆä¸¤ä¸ªå‘é‡v1=(X1,Y1)ï¼Œå‡å®šæ˜¯å·¦è¾¹é‚£æ¡ï¼›v2=(X2,Y2)ï¼Œå‡å®šæ˜¯å³è¾¹é‚£æ¡ã€‚ä»åæ ‡åŸç‚¹åˆ°ç›®æ ‡ç‚¹çœ‹ä½œå‘é‡v0(X0,Y0)ã€‚<br>3.2ï¼šé‚£ä¹ˆç›®æ ‡ç‚¹è½åœ¨æ‰«æå™¨èŒƒå›´å†…çš„æ¡ä»¶å°±æ˜¯ï¼šv0åœ¨v1å³è¾¹ï¼ŒåŒæ—¶ä¹Ÿåœ¨v2çš„å·¦è¾¹ã€‚ï¼ˆå¯¹äºå·¦è¾¹å³è¾¹çš„è¯´æ³•æˆ‘å°±å…ˆä¸ç»™å‡ºä¸¥è°¨çš„è¯´æ˜äº†ï¼Œä¸çŸ¥é“æœ‰æ²¡æœ‰ä¸“ä¸šæœ¯è¯­ï¼‰<br>*3.3ï¼šé‡åˆçš„å‘é‡å¯ä»¥å¼±åŒ–ç†è§£ä¸ºå¹³è¡Œçš„å‘é‡ï¼ŒåŸºäºç¬¬ä¸€é¢˜çš„ç»“è®ºï¼Œå‡å¦‚v0ä¸v1é‡åˆï¼Œå°±ä¼šæœ‰X0*Y1 == X1*Y0ï¼Œå³X0*Y1-X1*Y0 == 0ï¼Œ<br>*3.3.1ï¼šé‚£è¦æ˜¯X0*Y1-X1*Y0çš„å€¼ä¸ç­‰äº0å‘¢ï¼Ÿï¼Œé‚£æƒ…å†µå°±æ˜¯v0åœ¨v1çš„å·¦è¾¹æˆ–å³è¾¹äº†ã€‚<br>3.3.2ï¼šX0*Y1-X1*Y0è¿™ä¸ªå¼å­æ˜¯å¸¦æ–¹å‘æ€§çš„ï¼Œå§‘ä¸”å®šä¹‰ä¸ºä»v0æ—‹è½¬åˆ°v1,å€¼æœ‰æ­£è´Ÿï¼ˆåä¹‹X1*Y0-X0*Y1å°±æ˜¯ä»v1æ—‹è½¬åˆ°v0ï¼‰<br>3.4ï¼šé‚£ä¹ˆæŠŠ3.2çš„è¯´æ³•è¿›ä¸€æ­¥æ•°å­—åŒ–å°±æ˜¯ä»v0æ—‹è½¬åˆ°v1ä¸ä»v0æ—‹è½¬åˆ°v2äº’ä¸ºç›¸åæ•°ã€‚ï¼ˆå…¶å®å…¶ä¸­ä¸€ä¸ªä¸º0ä¹Ÿè¡Œï¼Œè¡¨äºç›®æ ‡ç‚¹è½åœ¨äº†è¾¹ç•Œä¸Šï¼‰<br>3.5ï¼šæœ€åå¾—å‡ºçš„å…¬å¼åŒ–æ¡ä»¶å°±æ˜¯ï¼š(X0*Y1-X1*Y0) * (X0*Y2-X2*Y0) &lt;= 0","like_count":3,"discussions":[{"author":{"id":1159792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/70/ba9cecc6.jpg","nickname":"æœˆå½±","note":"","ucode":"298582FA7DBF27","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500167,"discussion_content":"å¾ˆæ£’ï½ç¬¬äºŒé¢˜ä¸å¿…æ±‚äº¤ç‚¹æˆ–è€…è¯´å‚è¶³ã€‚å¯ä»¥ç›´æ¥ç”¨å‘é‡å‰ç§¯çš„æ¨¡ç­‰äºå¹³è¡Œå››è¾¹å½¢é¢ç§¯è¿™ä¸€æ€§è´¨ï¼Œå†é™¤ä»¥åº•è¾¹é•¿åº¦ï¼Œå¾—åˆ°çš„å°±æ˜¯å¹³è¡Œå››è¾¹å½¢çš„é«˜ï¼Œå³ç‚¹åˆ°ç›´çº¿çš„è·ç¦»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593653754,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296638,"user_name":"é˜¿ä¸œ","can_delete":false,"product_type":"c1","uid":1500320,"ip_address":"","ucode":"E9393F62B4091D","user_header":"https://static001.geekbang.org/account/avatar/00/16/e4/a0/62a8b07e.jpg","comment_is_top":false,"comment_ctime":1623076862,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5918044158","product_id":100053801,"comment_content":"ä½œä¸š<br>1.  ç”¨å‘é‡ç§¯è®¡ç®—å¤¹è§’<br>2. ç”¨å‘é‡ç§¯è§£æ–¹ç¨‹<br>3. ç”¨å‘é‡ç§¯è®¡ç®—å¤¹è§’","like_count":2},{"had_liked":false,"id":251021,"user_name":"ä»æ­¤åˆ»èµ·å¼€å§‹","can_delete":false,"product_type":"c1","uid":1519667,"ip_address":"","ucode":"F7E9C1311025D2","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/qIr1icpa5ibRk1E3qXn0EXCfeTR0OCbz0XFtfEpdvkPWDfAK88nbwRaJibZz8ibhJ93ShtpjmC1Qsia3iagghpiaFDzWQ/132","comment_is_top":false,"comment_ctime":1601332801,"is_pvip":false,"replies":[{"id":"94959","content":"è¿è¡Œä¸äº†å…·ä½“æ˜¯æŒ‡ä»€ä¹ˆï¼Ÿè¿™æ˜¯ES Modulesæ¨¡å—ï¼Œè¾ƒæ–°çš„chromeæµè§ˆå™¨ä¸­å¯ä»¥é€šè¿‡type=moduleçš„scriptæ ‡ç­¾åŠ è½½ï¼Œæˆ–è€…ç”¨babelç¼–è¯‘ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æœˆå½±","uid":"1159792","ctime":1605492959,"ip_address":"","comment_id":251021,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5896300097","product_id":100053801,"comment_content":"è¿™vector2d.jså¦‚ä½•ç”¨ï¼Ÿæˆ‘åœ¨pycharm copyäº†è€å¸ˆä¸Šä¼ çš„æºç ï¼Œä½†è¿è¡Œä¸äº†","like_count":1,"discussions":[{"author":{"id":1159792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/70/ba9cecc6.jpg","nickname":"æœˆå½±","note":"","ucode":"298582FA7DBF27","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506366,"discussion_content":"è¿è¡Œä¸äº†å…·ä½“æ˜¯æŒ‡ä»€ä¹ˆï¼Ÿè¿™æ˜¯ES Modulesæ¨¡å—ï¼Œè¾ƒæ–°çš„chromeæµè§ˆå™¨ä¸­å¯ä»¥é€šè¿‡type=moduleçš„scriptæ ‡ç­¾åŠ è½½ï¼Œæˆ–è€…ç”¨babelç¼–è¯‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605492959,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1142009,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6c/f9/af80b4da.jpg","nickname":"è°­é¹","note":"","ucode":"4A8120C4AA6F2F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374160,"discussion_content":"Mac chrome ä¸Šæ‰“å¼€ç”»æ ‘çš„html å±•ç¤ºå¤§ç™½å±  å•¥åŸå› å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621045970,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240059,"user_name":"å˜»å˜»","can_delete":false,"product_type":"c1","uid":1373304,"ip_address":"","ucode":"BE59D46445F568","user_header":"https://static001.geekbang.org/account/avatar/00/14/f4/78/9953da19.jpg","comment_is_top":false,"comment_ctime":1596729559,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5891696855","product_id":100053801,"comment_content":"ç¬¬äºŒé¢˜è®©çº¿æ®µæ—‹è½¬åˆ°xè½´æˆ–è€…yè½´ï¼ŒåŒæ—¶å¦ä¸€ä¸ªç‚¹åŒæ­¥æ—‹è½¬ã€‚æœ€åç‚¹çš„xåæ ‡æˆ–è€…yåæ ‡å°±æ˜¯è·ç¦»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","like_count":1},{"had_liked":false,"id":234461,"user_name":"SMWğŸ™ğŸ»","can_delete":false,"product_type":"c1","uid":1032071,"ip_address":"","ucode":"95245A9350A4B9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bf/87/591180d9.jpg","comment_is_top":false,"comment_ctime":1594695712,"is_pvip":false,"replies":[{"id":"87190","content":"rotateåº”è¯¥æ˜¯æ—‹è½¬äº†radè§’ï¼Œä¸æ˜¯æ—‹è½¬åˆ°ã€‚ä½ å®ç°çš„å°‘äº†åŸæ¥çš„è§’åº¦ã€‚æŠŠæ­£ä½™å¼¦ç”¨å’Œè§’å…¬å¼å±•å¼€ï¼Œå°±å¾—åˆ°æˆ‘çš„ç»“æœã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æœˆå½±","uid":"1159792","ctime":1595293391,"ip_address":"","comment_id":234461,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5889663008","product_id":100053801,"comment_content":"è¿™ä¸ªæ–¹æ³•çš„é€»è¾‘æ²¡æœ‰çœ‹æ‡‚ï¼Œå¤§ä½¬èƒ½å¦è§£é‡Šä¸€ä¸‹<br> rotate(rad) {<br>    const c = Math.cos(rad),<br>      s = Math.sin(rad);<br>    const [x, y] = this;<br><br>    this.x = x * c + y * -s;<br>    this.y = x * s + y * c;<br><br>    return this;<br>  }<br>æˆ‘æ˜¯è¿™ä¹ˆå®ç°çš„<br>  rotate(rad) {<br>    const [x, y] = this<br>    const length = Math.hypot(x, y)<br>    const c = Math.cos(rad)<br>    const s = Math.sin(rad)<br>    this.x = length * c<br>    this.y = length * s<br>   <br>    return this<br>  }","like_count":1,"discussions":[{"author":{"id":1159792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/70/ba9cecc6.jpg","nickname":"æœˆå½±","note":"","ucode":"298582FA7DBF27","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501398,"discussion_content":"rotateåº”è¯¥æ˜¯æ—‹è½¬äº†radè§’ï¼Œä¸æ˜¯æ—‹è½¬åˆ°ã€‚ä½ å®ç°çš„å°‘äº†åŸæ¥çš„è§’åº¦ã€‚æŠŠæ­£ä½™å¼¦ç”¨å’Œè§’å…¬å¼å±•å¼€ï¼Œå°±å¾—åˆ°æˆ‘çš„ç»“æœã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595293391,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2108781,"avatar":"https://static001.geekbang.org/account/avatar/00/20/2d/6d/08103212.jpg","nickname":"ç‹æˆ","note":"","ucode":"FDC39D4316988A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567539,"discussion_content":"è¿™ä¸ªrotateå‡½æ•°æ„æ€æ˜¯ï¼šåœ¨åŸæ¥è§’åº¦çš„åŸºç¡€ä¸Šï¼Œå†æ—‹è½¬radè§’åº¦ã€‚\n\næ¯”å¦‚ï¼š\nåŸæ¥æ˜¯ sin(oldRad) ï¼Œç°åœ¨æ˜¯sin(oldRad + rad);\nåŸæ¥æ˜¯ cos(oldRad)ï¼Œç°åœ¨æ˜¯cos(oldRad + rad);\n\næ ¹æ®ä¸‰è§’å‡½æ•°å’Œå·®è¿ç®—å…¬å¼ï¼š\n\nå› ä¸ºæ˜¯å•ä½å‘é‡ï¼Œæ‰€ä»¥ cos(oldRad) = x; sin(oldRad) = y;\né‚£ä¹ˆ this.x = x * c - y * s; å°±å¯ä»¥ç†è§£ä¸º newX = cos(oldRad+rad) = cos(oldRad)*cos(rad) - sin(oldRad)*sin(rad) = x*cos(rad) - y*sin(rad)\nè€Œ this.y = x * s + y * c; å°±å¯ä»¥ç†è§£ä¸º newY = sin(oldRad+rad) = sin(oldRad)*cos(rad) + cos(oldRad)*sin(rad) = y*cos(rad) + x*sin(rad)\n    ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650939794,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":234254,"user_name":"Geek_b6af14","can_delete":false,"product_type":"c1","uid":1230879,"ip_address":"","ucode":"6A0F25B688DD98","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/cOPCqJLyN1z8jOJxo3VkuxHnV6KyaarEdVbkPaAvibj5fImJm8o45iblztVicXJXlSlOHFUFoJOswaP0TETf17sqA/132","comment_is_top":false,"comment_ctime":1594630959,"is_pvip":false,"replies":[{"id":"86497","content":"å¯ä»¥ç­‰åç»­é€šè¿‡ä¾‹å­æ…¢æ…¢ç†è§£","user_name":"ä½œè€…å›å¤","user_name_real":"æœˆå½±","uid":"1159792","ctime":1594690208,"ip_address":"","comment_id":234254,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5889598255","product_id":100053801,"comment_content":"å¯¹åæ ‡å˜æ¢å’Œå›¾å½¢å¹³ç§»çš„å¥½å¤„è¿˜æ˜¯æ²¡å¤ªå¤§æ„Ÿè§‰~~~","like_count":1,"discussions":[{"author":{"id":1159792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/70/ba9cecc6.jpg","nickname":"æœˆå½±","note":"","ucode":"298582FA7DBF27","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501331,"discussion_content":"å¯ä»¥ç­‰åç»­é€šè¿‡ä¾‹å­æ…¢æ…¢ç†è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594690208,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1513300,"avatar":"https://static001.geekbang.org/account/avatar/00/17/17/54/d1e9265f.jpg","nickname":"LiSkysunCHN","note":"","ucode":"AB0DD880E99B65","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291538,"discussion_content":"åæ ‡ç³»å¹³ç§»ï¼ˆæ„Ÿè§‰åƒä¸ªå¤§å·¥ç¨‹å…¶å®åªæœ‰ä¸¤è¡Œè¡Œä»£ç ï¼‰ï¼Œä¸€åŠ³æ°¸é€¸~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594865150,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358137,"user_name":"é‡å­è”·è–‡","can_delete":false,"product_type":"c1","uid":1999274,"ip_address":"ä¸Šæµ·","ucode":"EFD71A65DF2262","user_header":"https://static001.geekbang.org/account/avatar/00/1e/81/aa/1f7a8e88.jpg","comment_is_top":false,"comment_ctime":1663930293,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1663930293","product_id":100053801,"comment_content":"è¯¾åé¢˜å…¨éƒ¨ç”¨å‘é‡åšï¼Œé‡ç‚¹æ˜¯ç†è§£å‘é‡ç‚¹ä¹˜å’Œå‰ä¹˜çš„å‡ ä½•æ„ä¹‰<br>å‰ä¹˜çš„ç»“æœå–ç»å¯¹å€¼æ˜¯ä¸¤å‘é‡æ‰€å¤¹å¹³è¡Œå››è¾¹å½¢çš„é¢ç§¯ï¼Œæ­£è´Ÿä¸å‰ä¹˜çš„é¡ºåºæœ‰å…³ï¼Œå¦‚æœAÃ—Bä¸ºæ­£ï¼Œåˆ™Båœ¨Açš„å·¦è¾¹ï¼Œæˆ–è€…è¯´Aå¯ä»¥é€†æ—¶é’ˆæ—‹è½¬åˆ°Bï¼ˆæ—‹è½¬è§’åº¦å°äº180Â°ï¼‰ï¼Œå¦‚æœåˆšå¥½ä¸º0åˆ™ABåŒå‘æˆ–åå‘ï¼Œå› ä¸ºåŒå‘æˆ–åå‘æ—¶å¤¹å‡ºçš„å››è¾¹å½¢é¢ç§¯ä¸º0<br>ç‚¹ç§¯çš„ç»“æœå–ç»å¯¹å€¼æ˜¯ä¸€ä¸ªå‘é‡åœ¨å¦ä¸€ä¸ªå‘é‡ä¸Šçš„æŠ•å½±çš„é•¿åº¦ä¸å¦ä¸€ä¸ªå‘é‡çš„é•¿åº¦çš„ç§¯ï¼Œä¸ç‚¹ä¹˜é¡ºåºæ— å…³ï¼Œæ­£è´Ÿå–å†³äºä¸¤å‘é‡æ˜¯å¦â€åŒå‘â€œï¼Œæˆ‘ä»¬è®¤ä¸ºä¸¤å‘é‡å¤¹è§’å°äº90Â°æ—¶æ˜¯åŒå‘ï¼ŒåŒå‘ä¸ºæ­£ï¼Œå¦‚æœåˆšå¥½ä¸º0åˆ™ABå‚ç›´ï¼Œå› ä¸ºæŠ•å½±çš„é•¿åº¦ä¸º0ï¼Œæ‰€ä»¥æœ€åçš„ä¹˜ç§¯ä¹Ÿæ˜¯0<br>ç¬¬ä¸€é¢˜ï¼Œå°†ä¸¤ä¸ªçº¿æ®µéƒ½ç§»åˆ°åŸç‚¹ï¼Œç›¸å½“äºè½¬æ¢ä¸ºå‘é‡ï¼Œé€šè¿‡ç‚¹ä¹˜ã€å‰ä¹˜çš„ç»“æœå³å¯åˆ¤æ–­å…³ç³»<br>ç¬¬äºŒé¢˜ï¼Œå°†çº¿æ®µç§»åˆ°åŸç‚¹ï¼Œç‚¹ä¹ŸåšåŒæ ·çš„å¹³ç§»ï¼ˆå‡å»çº¿æ®µçš„èµ·ç‚¹ï¼‰ï¼Œé‚£ä¹ˆç‚¹åˆ°çº¿æ®µçš„è·ç¦»å°±æ˜¯ä¸¤å‘é‡æ‰€å¤¹å¹³è¡Œå››è¾¹å½¢çš„å…¶ä¸­ä¸€æ¡é«˜ï¼Œç”¨å‰ä¹˜å¾—åˆ°é¢ç§¯ï¼Œé™¤ä»¥çº¿æ®µçš„é•¿åº¦å°±å¾—åˆ°äº†é«˜<br>ç¬¬ä¸‰é¢˜ï¼Œç›®æ ‡ç‚¹åˆ†åˆ«ä¸ä¸¤æ¡å…‰çº¿å‰ä¹˜ï¼Œæ ¹æ®å‰ä¹˜ç»“æœåˆ¤æ–­","like_count":0},{"had_liked":false,"id":355250,"user_name":"å©·","can_delete":false,"product_type":"c1","uid":1385068,"ip_address":"ä¸Šæµ·","ucode":"8AEB0531206061","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Lnt6rcGHmnic4lumjb19icwLJjic3jOHCVrUxRqOAoXcBYjotlVRQXoYek1KGyTzbY9AcnK59POAlt3YpGGrOST6Q/132","comment_is_top":false,"comment_ctime":1661224653,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1661224653","product_id":100053801,"comment_content":"è€å¸ˆå¥½ï¼Œéšæœºå› å­çš„åŠ å…¥æ˜¯æœ‰ç‰¹å®šæ–¹å¼å—ï¼Ÿä¸ºä»€ä¹ˆæ˜¯è¿™æ ·å†™ï¼Ÿconst left = Math.PI &#47; 4 + 0.5 * (dir + 0.2) + bias * (Math.random() - 0.5);","like_count":0},{"had_liked":false,"id":334832,"user_name":"ff","can_delete":false,"product_type":"c1","uid":2685946,"ip_address":"","ucode":"981AF5E9439EDC","user_header":"","comment_is_top":false,"comment_ctime":1645149903,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645149903","product_id":100053801,"comment_content":"è¿™ä¸‰é“é¢˜å€’æ˜¯éƒ½å¯ä»¥é€šè¿‡çº¿æ€§å˜æ¢å®Œæˆï¼Œæ„Ÿè§‰æ¯”è¾ƒå°‘äººè¯´ï¼Œæˆ‘å°±è®²è®²æˆ‘çš„æƒ³æ³•ï¼š<br>1. æ„é€ æ—‹è½¬çŸ©é˜µå°†å…¶ä¸­ä»»ä½•ä¸€ä¸ªå‘é‡æ–¹å‘å˜æ¢ç›´ä¸€ä¸ªåŸºå‘é‡æ–¹å‘ï¼Œå°†å¦ä¸€ä¸ªå‘é‡åšåŒç­‰å˜æ¢åæ£€æŸ¥ä¸ä¸¤ä¸ªåŸºå‘é‡çš„å…³ç³»å³å¯ï¼ˆå½’ä¸€åŒ–ååˆ¤æ–­ç‚¹ä¹˜ä¸º1æˆ–ä¸º0ï¼‰<br>2. å°†å‘é‡åº”ç”¨æ—‹è½¬çŸ©é˜µè‡³åŸºå‘é‡æ–¹å‘ï¼ˆè®¾ä¸ºxæ­£æ–¹å‘ï¼‰ï¼Œç‚¹ä½¿ç”¨åŒä¸€ä¸ªå˜æ¢åå…¶yåæ ‡å³ä¸ºè·ç¦»<br>3. æ±‚å˜æ¢çŸ©é˜µå°†ä¸¤ä¸ª60åº¦å¤¹è„šçš„å‘é‡å˜æ¢è‡³æ­£äº¤åŸºå‘é‡ï¼Œä¹‹åå¯¹å¾…å˜æ¢çš„ç‚¹æ£€æŸ¥æ˜¯å¦åœ¨ç¬¬ä¸€è±¡é™ï¼ˆxï¼Œyå‡å¤§äº0ï¼‰å³å¯","like_count":0},{"had_liked":false,"id":323968,"user_name":"Geek_14f218","can_delete":false,"product_type":"c1","uid":2820969,"ip_address":"","ucode":"97999FA957C4F5","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/6h0quvqS7e3WOJgNiczAtEJOicia4aRaTHtzCECdzvMlDWJiaqEqnQIS0ibria7cqWhTYvaapWdThnGPvAJrEibicicSqJg/132","comment_is_top":false,"comment_ctime":1638242502,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638242502","product_id":100053801,"comment_content":"æ‰“å¼€ç™½å±ï¼Œå‘ç°æ˜¯è·¨åŸŸé—®é¢˜ã€‚åœ¨ vs code ä¸‹è½½Live Serveræ’ä»¶å³å¯å®Œç¾è§£å†³ï¼š<br>1.åœ¨vscodeçš„æ‹“å±•æœç´¢Live Serverï¼Œå®‰è£…<br>2.æ‰¾åˆ°å¯¹åº”çš„htmlæ–‡ä»¶ï¼Œå³é”®ç‚¹å‡»é€‰æ‹©â€œopen with live serverâ€<br>ç®€å•ä¸¤æ­¥å°±å¯ä»¥ç‚¹å¼€äº†","like_count":0},{"had_liked":false,"id":292865,"user_name":"è°­é¹","can_delete":false,"product_type":"c1","uid":1142009,"ip_address":"","ucode":"4A8120C4AA6F2F","user_header":"https://static001.geekbang.org/account/avatar/00/11/6c/f9/af80b4da.jpg","comment_is_top":false,"comment_ctime":1621043668,"is_pvip":false,"replies":[{"id":"106053","content":"æ”¶åˆ°ï¼Œæˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹","user_name":"ç¼–è¾‘å›å¤","user_name_real":"ç‹è¹","uid":"1743279","ctime":1621075540,"ip_address":"","comment_id":292865,"utype":2}],"discussion_count":2,"race_medal":0,"score":"1621043668","product_id":100053801,"comment_content":"ç”»æ ‘çš„htmlæ–‡ä»¶ äºå…´èµ·æ¥æ²¡æœ‰å†…å®¹ ä¸€ä¸ªå¤§ç™½å±","like_count":0,"discussions":[{"author":{"id":1743279,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/99/af/e4cc7374.jpg","nickname":"å•Šå‘œ","note":"","ucode":"76E24AB808868D","race_medal":0,"user_type":4,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519991,"discussion_content":"æ”¶åˆ°ï¼Œæˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621075540,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1142009,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6c/f9/af80b4da.jpg","nickname":"è°­é¹","note":"","ucode":"4A8120C4AA6F2F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374239,"discussion_content":"ç”¨åˆ°vector2dçš„ éƒ½æ˜¯ç™½å± siri ç«ç‹ chromeéƒ½æ˜¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621075632,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":281224,"user_name":"é«˜ä½¬","can_delete":false,"product_type":"c1","uid":2436680,"ip_address":"","ucode":"36A7C12A0DCE12","user_header":"https://static001.geekbang.org/account/avatar/00/25/2e/48/2f5ffbec.jpg","comment_is_top":false,"comment_ctime":1614650156,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1614650156","product_id":100053801,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³è¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨è½¬æ¢äº†canvasçš„åæ ‡ç³»ä¹‹åï¼Œå¦‚æœè¦åœ¨canvasä¸Šç»˜åˆ¶å›¾ç‰‡çš„è¯ï¼Œå›¾ç‰‡æ˜¯ä¼šå€’è¿‡æ¥çš„ï¼Œè¯·é—®è¿™ä¸ªé—®é¢˜æœ‰æ²¡æœ‰å¾ˆå¥½çš„è§£å†³æ–¹æ³•ï¼Œæˆ‘ç›®å‰æ˜¯æŠŠå›¾ç‰‡å…ˆæå‰å€’è¿‡æ¥å¤„ç†ä¹‹ååœ¨ç»˜åˆ¶ä¸Šå»ï¼Œä½†æ˜¯è‡ªæ„Ÿè§‰è¿™ä¸ªä¸æ˜¯å¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œæ±‚èµæ•™æ›´å¥½çš„æ–¹æ³•ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1907075,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/3raFU5AA5eEtZSRTiacg0eceh05FFAwSSDwLy48A5TvPVzp3p1oaRnibjP5kIucLHeRb8ocSCcQq3vpe9Ahq0zJw/132","nickname":"Geek_jiang_gdufs","note":"","ucode":"4DF0082F284C64","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":357382,"discussion_content":"ç»˜åˆ¶å›¾ç‰‡å‰å¯ä»¥ç¿»è½¬åæ ‡ç³», ç»˜åˆ¶å®Œåå†è¿˜åŸ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615797434,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":278862,"user_name":"Geek_00734e","can_delete":false,"product_type":"c1","uid":1559528,"ip_address":"","ucode":"5F641387DA2291","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Fnol5T7X9z9icw8yP1Zx5enHdYqbmP4EbNymaP87USujdeDp22QYMEwfYqkT7mOkXYegBZmhRx9bDbUbKGTPYlg/132","comment_is_top":false,"comment_ctime":1613396854,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1613396854","product_id":100053801,"comment_content":"vectory2d.js  ä¸­ è·å–å‘é‡é•¿åº¦è¿™ä¹ˆå†™æ˜¯æœ‰é—®é¢˜çš„ï¼Œå¾—å†™åœ¨constructor  é‡Œé¢ï¼ŒåŒæ—¶normalizeæ–¹æ³•ä¹Ÿå¾—è€ƒè™‘0å‘é‡çš„æƒ…å†µ<br>get length() {<br>    return Math.hypot(this.x, this.y);<br>  }","like_count":0},{"had_liked":false,"id":278746,"user_name":"Herve","can_delete":false,"product_type":"c1","uid":2064214,"ip_address":"","ucode":"25941E69C75D16","user_header":"https://static001.geekbang.org/account/avatar/00/1f/7f/56/1ab5931f.jpg","comment_is_top":false,"comment_ctime":1613287134,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1613287134","product_id":100053801,"comment_content":"ç¬¬ä¸‰ä¸ªé—®é¢˜ï¼šå°†ï¼ˆx, yï¼‰åæ ‡å½’ä¸€åŒ–åã€ä¸ï¼ˆ0ï¼Œ 1 ï¼‰åšç‚¹ä¹˜ï¼Œå› ä¸ºæ˜¯ä¸¤ä¸ªå•ä½å‘é‡çš„ç‚¹ä¹˜ï¼Œç»“æœå°±æ˜¯ä¸¤ä¸ªå‘é‡çš„ä½™å¼¦å€¼ï¼Œç„¶ååˆ¤æ–­å¤§å°","like_count":0},{"had_liked":false,"id":277783,"user_name":"ç•ªè–¯","can_delete":false,"product_type":"c1","uid":2435667,"ip_address":"","ucode":"F0A83719D29595","user_header":"https://static001.geekbang.org/account/avatar/00/25/2a/53/5b9afe0a.jpg","comment_is_top":false,"comment_ctime":1612582863,"is_pvip":false,"replies":[{"id":"101083","content":"å¯ï¼Œä¸è¿‡æœ‰æ›´ç®€å•çš„åŠæ³•","user_name":"ä½œè€…å›å¤","user_name_real":"æœˆå½±","uid":"1159792","ctime":1612875067,"ip_address":"","comment_id":277783,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1612582863","product_id":100053801,"comment_content":"1.æ„å»ºå‘é‡ï¼š<br>a=(x11-x10,y11-y10)<br>b=(x21-x20,y21-y20)<br>ç‚¹ç§¯aâ€¢b=0ä½™å¼¦å€¼ä¸º0åˆ™å‚ç›´<br>ç‚¹ç§¯(aâ€¢b)Â²=(|a||b|)Â² ä½™å¼¦å€¼ä¸ºÂ±1åˆ™å¹³è¡Œ<br><br>2. ä¸‰ç‚¹ç¡®å®šä¸¤æ¡å‘é‡<br>a=(x1-x0,y1-y0)<br>c=(x2-x0,y2-y0)ï¼Œå‹¾è‚¡å®šç†|a|Â²+|b|Â²=|c|Â² å¯æ±‚å¾—å‚ç›´è¾¹çš„é•¿åº¦<br><br>3.é€šè¿‡ç‚¹(x,y)çš„æ­£åˆ‡å€¼ å¯æ¨å‡ºä¸yè½´ä¹‹é—´çš„è§’åº¦","like_count":0,"discussions":[{"author":{"id":1159792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/70/ba9cecc6.jpg","nickname":"æœˆå½±","note":"","ucode":"298582FA7DBF27","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515170,"discussion_content":"å¯ï¼Œä¸è¿‡æœ‰æ›´ç®€å•çš„åŠæ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612875067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":277767,"user_name":"ç•ªè–¯","can_delete":false,"product_type":"c1","uid":2435667,"ip_address":"","ucode":"F0A83719D29595","user_header":"https://static001.geekbang.org/account/avatar/00/25/2a/53/5b9afe0a.jpg","comment_is_top":false,"comment_ctime":1612578300,"is_pvip":false,"replies":[{"id":"101084","content":"å¯ä»¥å¤ä¹ ä¸€ä¸‹æ•°å­¦çŸ¥è¯†","user_name":"ä½œè€…å›å¤","user_name_real":"æœˆå½±","uid":"1159792","ctime":1612875084,"ip_address":"","comment_id":277767,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1612578300","product_id":100053801,"comment_content":"å‘é‡æ—‹è½¬é‚£ä¸ªæ•°å­¦åŸç†çœŸçš„çœ‹æ™•äº† åæ‚”ä¸‰è§’å‡½æ•°æ²¡å­¦æ‰å®...","like_count":0,"discussions":[{"author":{"id":1159792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/70/ba9cecc6.jpg","nickname":"æœˆå½±","note":"","ucode":"298582FA7DBF27","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515161,"discussion_content":"å¯ä»¥å¤ä¹ ä¸€ä¸‹æ•°å­¦çŸ¥è¯†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612875084,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":249543,"user_name":"ä»æ­¤åˆ»èµ·å¼€å§‹","can_delete":false,"product_type":"c1","uid":1519667,"ip_address":"","ucode":"F7E9C1311025D2","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/qIr1icpa5ibRk1E3qXn0EXCfeTR0OCbz0XFtfEpdvkPWDfAK88nbwRaJibZz8ibhJ93ShtpjmC1Qsia3iagghpiaFDzWQ/132","comment_is_top":false,"comment_ctime":1600688284,"is_pvip":false,"replies":[{"id":"94963","content":"pycharmä¸æ˜¯pythonç¼–è¾‘å™¨å—ï¼Ÿè¿™ä¸ªæ˜¯JSä»£ç å“¦ã€‚ã€‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æœˆå½±","uid":"1159792","ctime":1605493141,"ip_address":"","comment_id":249543,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1600688284","product_id":100053801,"comment_content":"è€å¸ˆï¼Œæ²¡çœ‹æ˜ç™½ç»˜åˆ¶éšæœºæ ‘çš„æºä»£ç ä¸­çš„import {Vector2D} from &#39;..&#47;common&#47;lib&#47;vector2d.js&#39;;æ˜¯å¦‚ä½•ç”¨çš„ï¼Œå°½ç®¡ä¹Ÿä¸‹è½½äº†vector2d.js æ–‡ä»¶æ”¾å…¥pycharmä¸­ï¼Œä½†æ— æ³•è¿è¡Œ,è¿™å¥import {Vector2D} from &#39;..&#47;common&#47;lib&#47;vector2d.js&#39;; å¦‚ä½•æ”¹?","like_count":0,"discussions":[{"author":{"id":1159792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/70/ba9cecc6.jpg","nickname":"æœˆå½±","note":"","ucode":"298582FA7DBF27","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505950,"discussion_content":"pycharmä¸æ˜¯pythonç¼–è¾‘å™¨å—ï¼Ÿè¿™ä¸ªæ˜¯JSä»£ç å“¦ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605493141,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244152,"user_name":"æ™¯å„¿","can_delete":false,"product_type":"c1","uid":2045710,"ip_address":"","ucode":"34A05CFDFCDE97","user_header":"https://static001.geekbang.org/account/avatar/00/1f/37/0e/d0172a0e.jpg","comment_is_top":false,"comment_ctime":1598412601,"is_pvip":false,"replies":[{"id":"95001","content":"åæ ‡è½¬æ¢çš„å¼€é”€ä¸å¤§ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸æ˜¯æ€§èƒ½ç“¶é¢ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æœˆå½±","uid":"1159792","ctime":1605515651,"ip_address":"","comment_id":244152,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1598412601","product_id":100053801,"comment_content":"åœ¨è®¡ç®—é‡ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œåæ ‡ç³»è½¬æ¢ï¼ˆtransformã€scaleï¼‰çš„å¼€é”€ å¯¹æ€§èƒ½å½±å“æ˜¯å¦å¯ä»¥å¿½ç•¥ä¸è®¡å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1159792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/70/ba9cecc6.jpg","nickname":"æœˆå½±","note":"","ucode":"298582FA7DBF27","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504503,"discussion_content":"åæ ‡è½¬æ¢çš„å¼€é”€ä¸å¤§ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸æ˜¯æ€§èƒ½ç“¶é¢ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605515651,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":242845,"user_name":"Geek_cd63d9","can_delete":false,"product_type":"c1","uid":2015085,"ip_address":"","ucode":"1EF4B98DF1E171","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL1H2TOJnNTblhmzJ2p88sTjvb86PuXP7A8HpCNKrfobuOc6Cxgy1UogZMIPTmD3VDGXZfTXIaWNw/132","comment_is_top":false,"comment_ctime":1597852600,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597852600","product_id":100053801,"comment_content":"å°´å°¬ï¼ŒåŸºæœ¬çš„è®¡ç®—éƒ½è®°ä¸æ¸…äº†ã€‚<br>1.[(x10, y10),(x11, y11)]ã€[(x20, y20),(x21, y21)]<br>è®¡ç®—å‡ºæ–¹å‘å‘é‡ï¼Œï¼ˆx1ï¼Œy1ï¼‰ï¼Œï¼ˆx2ï¼Œy2ï¼‰<br>å¹³è¡Œï¼šåˆ™x1 * x2 = y1 * x2<br>å‚ç›´ï¼šx1 * x2 + y1 * y2 = 0<br>2.çº¿æ®µä¸¤ä¸ªç‚¹çš„å‰ä¹˜å³ä¸ºæ‰€ç»„æˆå¹³è¡Œå››è¾¹å½¢çš„é¢ç§¯ï¼ŒåŒæ—¶ä¹Ÿç­‰äºåº•è¾¹ä¹˜è·ç¦»ã€‚<br>å‰ä¹˜ï¼šï¼ˆa1ï¼Œa2ï¼‰Ã—ï¼ˆb1ï¼Œb2ï¼‰= a1 *b2 - a2* b1<br>3.åˆ¤æ–­è§’åº¦æˆ–æ–œç‡æ˜¯å¦åœ¨èŒƒå›´å†…<br>","like_count":0},{"had_liked":false,"id":235183,"user_name":"sheeeeep","can_delete":false,"product_type":"c1","uid":1340246,"ip_address":"","ucode":"218AA77BAA73C8","user_header":"https://static001.geekbang.org/account/avatar/00/14/73/56/9cfb1e43.jpg","comment_is_top":false,"comment_ctime":1594916103,"is_pvip":false,"replies":[{"id":"87177","content":"ç¬¬ä¸‰é¢˜ä½ çš„æ€è·¯ä¹ŸæŒºå¥½çš„ï¼Œè¿™é¢˜æœ¬æ¥å°±ä¸åªä¸€ç§æ–¹æ³•","user_name":"ä½œè€…å›å¤","user_name_real":"æœˆå½±","uid":"1159792","ctime":1595292918,"ip_address":"","comment_id":235183,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1594916103","product_id":100053801,"comment_content":"å‰ä¸¤é—®å’Œå¤§å®¶æ€è·¯åŸºæœ¬ä¸€è‡´ï¼Œåˆ©ç”¨å‰ç§¯<br>Q1:ç”¨èµ·ç‚¹å’Œç»ˆç‚¹æ„é€ å‡ºä¸¤ä¸ªå‘é‡ï¼Œæ±‚å‘é‡çš„å‰ç§¯æ¥åˆ¤æ–­æ˜¯å¦å‚ç›´ï¼Œå¹³è¡Œï¼Œäº¤å‰ä¹ƒè‡³æ–¹å‘æ˜¯å¦ä¸€è‡´<br>Q2: ç”¨èµ·ç‚¹å’Œç»ˆç‚¹æ„é€ å‘é‡ï¼Œèµ·ç‚¹å’Œç»™å®šçš„ç‚¹æ„é€ å‘é‡ï¼Œæ±‚ä¸¤ä¸ªå‘é‡çš„å‰ç§¯ã€çº¿æ®µçš„é•¿åº¦æ¥è·å–æŠ•å½±çš„é•¿åº¦ï¼Œå‹¾è‚¡å®šç†æ±‚å‚ç›´çº¿æ®µé•¿åº¦<br>ç¬¬ä¸‰é—®å¤§å®¶ä¼¼ä¹éƒ½æ˜¯ç”¨çš„è§’åº¦è®¡ç®—å’Œæ¯”å¯¹ï¼Œä¸ç¡®å®šæ˜¯å¦å¯ä»¥ç”¨çº¿æ€§å˜æ¢çš„æ€è·¯æ¥å¤„ç†ï¼ŒæŠŠæ‰«æçš„ä¸¤æ¡çº¿ä½œä¸ºåŸºå‘é‡æ„é€ ä¸€ä¸ªæ–°çš„åæ ‡ç³»ï¼Œåªæœ‰ä¸€ä¸ªæœ¦èƒ§çš„æ€è·¯è¯·è€å¸ˆæŒ‡ç‚¹","like_count":0,"discussions":[{"author":{"id":1159792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/70/ba9cecc6.jpg","nickname":"æœˆå½±","note":"","ucode":"298582FA7DBF27","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501628,"discussion_content":"ç¬¬ä¸‰é¢˜ä½ çš„æ€è·¯ä¹ŸæŒºå¥½çš„ï¼Œè¿™é¢˜æœ¬æ¥å°±ä¸åªä¸€ç§æ–¹æ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595292918,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":234517,"user_name":"SMWğŸ™ğŸ»","can_delete":false,"product_type":"c1","uid":1032071,"ip_address":"","ucode":"95245A9350A4B9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bf/87/591180d9.jpg","comment_is_top":false,"comment_ctime":1594712402,"is_pvip":false,"replies":[{"id":"87186","content":"å¦‚æœabéƒ½æ˜¯å•ä½å‘é‡å°±ç”¨ä¸åˆ°abçš„æ¨¡äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æœˆå½±","uid":"1159792","ctime":1595293188,"ip_address":"","comment_id":234517,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1594712402","product_id":100053801,"comment_content":"å‘é‡aï¼Œå‘é‡bï¼ŒÎ¸æ˜¯å¤¹è§’<br>è®¡ç®—å…¬å¼ï¼ša*b = |a||b|cosÎ¸<br>ç–‘é—®ï¼šå‘é‡çš„å¤¹è§’å’Œå‘é‡çš„æ¨¡æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œä¸ºä»€ä¹ˆè®¡ç®—å¤¹è§’ä½™å¼¦æ—¶ï¼Œè¦ç”¨åˆ°å‘é‡çš„æ¨¡","like_count":0,"discussions":[{"author":{"id":1159792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/70/ba9cecc6.jpg","nickname":"æœˆå½±","note":"","ucode":"298582FA7DBF27","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501413,"discussion_content":"å¦‚æœabéƒ½æ˜¯å•ä½å‘é‡å°±ç”¨ä¸åˆ°abçš„æ¨¡äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595293188,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":233600,"user_name":"PresbyterğŸ±","can_delete":false,"product_type":"c1","uid":1244819,"ip_address":"","ucode":"E52F076FE898DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/fe/93/31869247.jpg","comment_is_top":false,"comment_ctime":1594364496,"is_pvip":false,"replies":[{"id":"86301","content":"æ‰§è¡ŒdrawImageçš„è¯æ˜¯ä¼šé¢ å€’çš„ï¼Œå› ä¸ºåæ ‡ç³»å˜äº†ï¼Œè¿™ç§æœ‰å›¾ç‰‡æˆ–è€…æœ‰æ–‡å­—çš„2Dç»˜å›¾åœºæ™¯çš„ç¡®æ˜¯ä¸èƒ½ç¿»è½¬åæ ‡çš„ã€‚å¦‚æœæ˜¯webglçš„è¯ï¼Œæ˜¯å¯ä»¥åœ¨textureåˆ›å»ºæˆ–è€…åœ¨åº”ç”¨çº¹ç†åæ ‡çš„æ—¶å€™å¤„ç†","user_name":"ä½œè€…å›å¤","user_name_real":"æœˆå½±","uid":"1159792","ctime":1594452829,"ip_address":"","comment_id":233600,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1594364496","product_id":100053801,"comment_content":"è€å¸ˆï¼Œé—®ä¸ªé—®é¢˜ï¼Œæˆ‘ä½¿ç”¨scale(1ï¼Œ-1)è½¬æ¢åæ ‡çš„æ—¶å€™ï¼Œæ”¾äº†ä¸€å¼ å›¾ç‰‡åœ¨ä¸Šé¢ç»“æœï¼Œä¸Šä¸‹é¢ å€’äº†ï¼Œè¯·é—®æœ‰ä»€ä¹ˆåŠæ³•è®©ä»–è½¬æ¢å›æ¥?","like_count":0,"discussions":[{"author":{"id":1159792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/70/ba9cecc6.jpg","nickname":"æœˆå½±","note":"","ucode":"298582FA7DBF27","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501104,"discussion_content":"æ‰§è¡ŒdrawImageçš„è¯æ˜¯ä¼šé¢ å€’çš„ï¼Œå› ä¸ºåæ ‡ç³»å˜äº†ï¼Œè¿™ç§æœ‰å›¾ç‰‡æˆ–è€…æœ‰æ–‡å­—çš„2Dç»˜å›¾åœºæ™¯çš„ç¡®æ˜¯ä¸èƒ½ç¿»è½¬åæ ‡çš„ã€‚å¦‚æœæ˜¯webglçš„è¯ï¼Œæ˜¯å¯ä»¥åœ¨textureåˆ›å»ºæˆ–è€…åœ¨åº”ç”¨çº¹ç†åæ ‡çš„æ—¶å€™å¤„ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594452829,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":231460,"user_name":"é‡å­è”·è–‡","can_delete":false,"product_type":"c1","uid":1999274,"ip_address":"","ucode":"EFD71A65DF2262","user_header":"https://static001.geekbang.org/account/avatar/00/1e/81/aa/1f7a8e88.jpg","comment_is_top":false,"comment_ctime":1593680498,"is_pvip":false,"replies":[{"id":"85495","content":"å—¯ï¼Œè¦ç”¨lenä¸èƒ½ç”¨lengthï¼Œå› ä¸ºä¸èƒ½è¦†ç›–æ•°ç»„çš„length","user_name":"ä½œè€…å›å¤","user_name_real":"æœˆå½±","uid":"1159792","ctime":1593739107,"ip_address":"","comment_id":231460,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1593680498","product_id":100053801,"comment_content":"åé¦ˆbugï¼ŒVector2Då®ä¾‹çš„lengthå§‹ç»ˆè¿”å›çš„æ˜¯2ï¼Œè²Œä¼¼å› ä¸ºå®ƒç»§æ‰¿è‡ªArrayï¼Œè¿”å›äº†æ•°ç»„é•¿åº¦ã€‚ä½†æ˜¯æˆ‘ä¸æ˜ç™½è‡ªå·±å®šä¹‰çš„lengthä¸ºä»€ä¹ˆä¸ä¼šè¦†ç›–æ•°ç»„çš„length","like_count":0,"discussions":[{"author":{"id":1159792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/70/ba9cecc6.jpg","nickname":"æœˆå½±","note":"","ucode":"298582FA7DBF27","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500308,"discussion_content":"å—¯ï¼Œè¦ç”¨lenä¸èƒ½ç”¨lengthï¼Œå› ä¸ºä¸èƒ½è¦†ç›–æ•°ç»„çš„length","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593739107,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1999274,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/81/aa/1f7a8e88.jpg","nickname":"é‡å­è”·è–‡","note":"","ucode":"EFD71A65DF2262","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289593,"discussion_content":"åœ¨codepenç”»äº†é‚£æ£µæ ‘ï¼Œæ·»åŠ äº†ç”Ÿé•¿åŠ¨ç”» https://codepen.io/quantum-rose/pen/rNxpxaE","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594140191,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":231275,"user_name":"æµ©æ˜å•¦","can_delete":false,"product_type":"c1","uid":1377422,"ip_address":"","ucode":"120ED8FC45B992","user_header":"https://static001.geekbang.org/account/avatar/00/15/04/8e/e75ecc5e.jpg","comment_is_top":false,"comment_ctime":1593620556,"is_pvip":true,"replies":[{"id":"85403","content":"æˆ‘åé¢ç”¨åŠ é¤æ¥è®²å§","user_name":"ä½œè€…å›å¤","user_name_real":"æœˆå½±","uid":"1159792","ctime":1593653168,"ip_address":"","comment_id":231275,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1593620556","product_id":100053801,"comment_content":"è€å¸ˆ, è¦ä¸è¦å¼„èŠ‚è¯¾æ¥ä¸“é—¨è®²è®²è¿™å‡ èŠ‚çš„ä½œä¸šï¼Œæƒ³çœ‹çœ‹è€å¸ˆçš„å®ç°æ–¹å¼","like_count":0,"discussions":[{"author":{"id":1159792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/70/ba9cecc6.jpg","nickname":"æœˆå½±","note":"","ucode":"298582FA7DBF27","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500231,"discussion_content":"æˆ‘åé¢ç”¨åŠ é¤æ¥è®²å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593653168,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2667591,"avatar":"https://static001.geekbang.org/account/avatar/00/28/b4/47/8cdd9ee6.jpg","nickname":"åŸå—èŠ±å·²å¼€","note":"","ucode":"07BD0F0D51A512","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1159792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/70/ba9cecc6.jpg","nickname":"æœˆå½±","note":"","ucode":"298582FA7DBF27","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":541072,"discussion_content":"è€å¸ˆä»€ä¹ˆæ—¶å€™åŠ é¤å•Šï¼Œè§‚æœ›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640249239,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":500231,"ip_address":""},"score":541072,"extra":""}]}]},{"had_liked":false,"id":231253,"user_name":"ç­‘æ¢¦å¸ˆåˆ˜æ¸Š","can_delete":false,"product_type":"c1","uid":1026867,"ip_address":"","ucode":"35C309A266AC02","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ab/33/75b1f724.jpg","comment_is_top":false,"comment_ctime":1593615009,"is_pvip":false,"replies":[{"id":"85404","content":"æ£’ï½","user_name":"ä½œè€…å›å¤","user_name_real":"æœˆå½±","uid":"1159792","ctime":1593653207,"ip_address":"","comment_id":231253,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1593615009","product_id":100053801,"comment_content":"ä½œä¸š1<br>ç”¨å‘é‡ç‚¹ä¹˜(å†…ç§¯)ã€‚å†…ç§¯ç»“æœç­‰äº0åˆ™è¯´æ˜å‚ç›´ï¼Œä¸ºæ­£è´Ÿ1åˆ™è¯´æ˜å¹³è¡Œï¼Œå¦åˆ™æ—¢ä¸å¹³è¡Œä¹Ÿä¸å‚ç›´<br>function(x10, y10,x11, y11,x20, y20,x21,y21){<br>  const l1_x = x11 - x10;<br>  const l1_y = y11 - y10;<br>  const l2_x = x21 - x20;<br>  const l2_y = y21 - y20;<br><br>  const l1Dotl2 = l1_x * l2_x + l1_y * l2_y;<br><br>  if(l1Dotl2 === 0){<br>     return &quot;å‚ç›´&quot;<br>  }<br>  <br>  if(l1Dotl2*l1Dotl2 === 1){<br>    return &quot;å¹³è¡Œ&quot; <br>  }<br>  <br>  return &quot;æ—¢ä¸å¹³è¡Œåˆä¸å‚ç›´&quot;<br><br>}<br><br>ä½œä¸š2<br><br>æ ¹æ®ç‚¹Pçš„æŠ•å½±åœ¨ä¸åœ¨çº¿æ®µABå†…ï¼Œåˆ†åˆ«ç”±æ˜¯é‚£ç§æƒ…å†µï¼Œåˆ†åˆ«è®¡ç®—<br>&#47;**<br> * @des è®¡ç®—ç»™å®šä¸€ç‚¹åˆ°æŒ‡å®šçº¿æ®µçš„æœ€çŸ­è·ç¦»<br> * @param {number} x  ç»™å®šç‚¹Pçš„xåæ ‡<br> * @param {number} y  ç»™å®šç‚¹Pçš„yåæ ‡<br> * @param {number} x1 ç»™å®šçº¿æ®µçš„çš„èµ·ç‚¹çš„xåæ ‡<br> * @param {number} y1 ç»™å®šçº¿æ®µçš„çš„èµ·ç‚¹çš„yåæ ‡<br> * @param {number} x2 ç»™å®šçº¿æ®µçš„çš„ç»ˆç‚¹çš„xåæ ‡<br> * @param {number} y2 ç»™å®šçº¿æ®µçš„çš„ç»ˆç‚¹çš„yåæ ‡<br> * @return {number} ç‚¹påˆ°çº¿æ®µçš„æœ€çŸ­è·ç¦»<br> *&#47;<br>function distancePtoS(x, y, x1, y1, x2, y2) {<br>    const AP_x = x - x1;<br>    const AP_y = y - y1;<br>    const AB_x = x2 - x1;<br>    const AB_y = y2 - y1;<br>    const PB_x = x - x2;<br>    const PB_y = y - y2;<br><br>    const r =<br>        (AP_x * AB_x + AP_y * AB_y) &#47; (AB_x * AB_x + AB_y * AB_y);<br>    if (r &lt;= 0) {<br>        const PA = Math.sqrt(AP_x * AP_x + AP_y * AP_y);<br>        return PA;<br>    }<br><br>    if (r &gt;= 1) {<br>        const PB = Math.sqrt(PB_x * PB_x + PB_y * PB_y);<br>        return PB;<br>    }<br><br>    const cx = x1 + r * AB_x;<br>    const cy = y1 + r * AB_y;<br>    const PC_x = x - cx;<br>    const PC_y = y - cy;<br><br>    const PC = Math.sqrt(PC_x * PC_x + PC_y * PC_y);<br>    return PC;<br>}","like_count":0,"discussions":[{"author":{"id":1159792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/70/ba9cecc6.jpg","nickname":"æœˆå½±","note":"","ucode":"298582FA7DBF27","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500218,"discussion_content":"æ£’ï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593653207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":231151,"user_name":"åˆ˜å½ª","can_delete":false,"product_type":"c1","uid":1381320,"ip_address":"","ucode":"F99AB6EB881FB2","user_header":"https://static001.geekbang.org/account/avatar/00/15/13/c8/c8493a33.jpg","comment_is_top":false,"comment_ctime":1593594102,"is_pvip":false,"replies":[{"id":"85408","content":"å—¯å—¯ï¼ŒçŸ©é˜µå¾ˆé‡è¦ï¼Œä¸è¿‡æˆ‘ä»¬è¿™é—¨è¯¾ä½œä¸ºå›¾å½¢å­¦åŸºç¡€ä¹Ÿä¸ä¼šæ·±å…¥è®²å¤ªå¤æ‚çš„å†…å®¹","user_name":"ä½œè€…å›å¤","user_name_real":"æœˆå½±","uid":"1159792","ctime":1593653541,"ip_address":"","comment_id":231151,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1593594102","product_id":100053801,"comment_content":"å‘é‡çš„åŸºæœ¬è¿ç®—è¿˜æ˜¯çŸ¥é“çš„ï¼Œä½†æ˜¯åé¢çš„çŸ©é˜µæ€•æœ‰é—®é¢˜ï¼Œå¤§å­¦çš„é«˜æ•°æ²¡å­¦å¥½ï¼Œéœ€è¦ä¸è¡¥è¯¾äº†ã€‚webglçŸ©é˜µæ˜¯åŸºç¡€","like_count":0,"discussions":[{"author":{"id":1159792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/70/ba9cecc6.jpg","nickname":"æœˆå½±","note":"","ucode":"298582FA7DBF27","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500178,"discussion_content":"å—¯å—¯ï¼ŒçŸ©é˜µå¾ˆé‡è¦ï¼Œä¸è¿‡æˆ‘ä»¬è¿™é—¨è¯¾ä½œä¸ºå›¾å½¢å­¦åŸºç¡€ä¹Ÿä¸ä¼šæ·±å…¥è®²å¤ªå¤æ‚çš„å†…å®¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593653541,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}