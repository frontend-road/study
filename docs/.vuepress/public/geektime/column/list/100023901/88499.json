{"id":88499,"title":"16 | Semaphoreï¼šå¦‚ä½•å¿«é€Ÿå®ç°ä¸€ä¸ªé™æµå™¨ï¼Ÿ","content":"<p>Semaphoreï¼Œç°åœ¨æ™®éç¿»è¯‘ä¸ºâ€œä¿¡å·é‡â€ï¼Œä»¥å‰ä¹Ÿæ›¾è¢«ç¿»è¯‘æˆâ€œä¿¡å·ç¯â€ï¼Œå› ä¸ºç±»ä¼¼ç°å®ç”Ÿæ´»é‡Œçš„çº¢ç»¿ç¯ï¼Œè½¦è¾†èƒ½ä¸èƒ½é€šè¡Œï¼Œè¦çœ‹æ˜¯ä¸æ˜¯ç»¿ç¯ã€‚åŒæ ·ï¼Œåœ¨ç¼–ç¨‹ä¸–ç•Œé‡Œï¼Œçº¿ç¨‹èƒ½ä¸èƒ½æ‰§è¡Œï¼Œä¹Ÿè¦çœ‹ä¿¡å·é‡æ˜¯ä¸æ˜¯å…è®¸ã€‚</p><p>ä¿¡å·é‡æ˜¯ç”±å¤§åé¼é¼çš„è®¡ç®—æœºç§‘å­¦å®¶è¿ªæ°æ–¯ç‰¹æ‹‰ï¼ˆDijkstraï¼‰äº1965å¹´æå‡ºï¼Œåœ¨è¿™ä¹‹åçš„15å¹´ï¼Œä¿¡å·é‡ä¸€ç›´éƒ½æ˜¯å¹¶å‘ç¼–ç¨‹é¢†åŸŸçš„ç»ˆç»“è€…ï¼Œç›´åˆ°1980å¹´ç®¡ç¨‹è¢«æå‡ºæ¥ï¼Œæˆ‘ä»¬æ‰æœ‰äº†ç¬¬äºŒé€‰æ‹©ã€‚ç›®å‰å‡ ä¹æ‰€æœ‰æ”¯æŒå¹¶å‘ç¼–ç¨‹çš„è¯­è¨€éƒ½æ”¯æŒä¿¡å·é‡æœºåˆ¶ï¼Œæ‰€ä»¥å­¦å¥½ä¿¡å·é‡è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬é¦–å…ˆä»‹ç»ä¿¡å·é‡æ¨¡å‹ï¼Œä¹‹åä»‹ç»å¦‚ä½•ä½¿ç”¨ä¿¡å·é‡ï¼Œæœ€åæˆ‘ä»¬å†ç”¨ä¿¡å·é‡æ¥å®ç°ä¸€ä¸ªé™æµå™¨ã€‚</p><h2>ä¿¡å·é‡æ¨¡å‹</h2><p>ä¿¡å·é‡æ¨¡å‹è¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œå¯ä»¥ç®€å•æ¦‚æ‹¬ä¸ºï¼š<strong>ä¸€ä¸ªè®¡æ•°å™¨ï¼Œä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—ï¼Œä¸‰ä¸ªæ–¹æ³•</strong>ã€‚åœ¨ä¿¡å·é‡æ¨¡å‹é‡Œï¼Œè®¡æ•°å™¨å’Œç­‰å¾…é˜Ÿåˆ—å¯¹å¤–æ˜¯é€æ˜çš„ï¼Œæ‰€ä»¥åªèƒ½é€šè¿‡ä¿¡å·é‡æ¨¡å‹æä¾›çš„ä¸‰ä¸ªæ–¹æ³•æ¥è®¿é—®å®ƒä»¬ï¼Œè¿™ä¸‰ä¸ªæ–¹æ³•åˆ†åˆ«æ˜¯ï¼šinit()ã€down()å’Œup()ã€‚ä½ å¯ä»¥ç»“åˆä¸‹å›¾æ¥å½¢è±¡åŒ–åœ°ç†è§£ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/6d/5c/6dfeeb9180ff3e038478f2a7dccc9b5c.png?wh=1142*566\" alt=\"\"></p><center><span class=\"reference\">ä¿¡å·é‡æ¨¡å‹å›¾</span></center><p>è¿™ä¸‰ä¸ªæ–¹æ³•è¯¦ç»†çš„è¯­ä¹‰å…·ä½“å¦‚ä¸‹æ‰€ç¤ºã€‚</p><ul>\n<li>init()ï¼šè®¾ç½®è®¡æ•°å™¨çš„åˆå§‹å€¼ã€‚</li>\n<li>down()ï¼šè®¡æ•°å™¨çš„å€¼å‡1ï¼›å¦‚æœæ­¤æ—¶è®¡æ•°å™¨çš„å€¼å°äº0ï¼Œåˆ™å½“å‰çº¿ç¨‹å°†è¢«é˜»å¡ï¼Œå¦åˆ™å½“å‰çº¿ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡Œã€‚</li>\n<li>up()ï¼šè®¡æ•°å™¨çš„å€¼åŠ 1ï¼›å¦‚æœæ­¤æ—¶è®¡æ•°å™¨çš„å€¼å°äºæˆ–è€…ç­‰äº0ï¼Œåˆ™å”¤é†’ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ä¸€ä¸ªçº¿ç¨‹ï¼Œå¹¶å°†å…¶ä»ç­‰å¾…é˜Ÿåˆ—ä¸­ç§»é™¤ã€‚</li>\n</ul><!-- [[[read_end]]] --><p>è¿™é‡Œæåˆ°çš„init()ã€down()å’Œup()ä¸‰ä¸ªæ–¹æ³•éƒ½æ˜¯åŸå­æ€§çš„ï¼Œå¹¶ä¸”è¿™ä¸ªåŸå­æ€§æ˜¯ç”±ä¿¡å·é‡æ¨¡å‹çš„å®ç°æ–¹ä¿è¯çš„ã€‚åœ¨Java SDKé‡Œé¢ï¼Œä¿¡å·é‡æ¨¡å‹æ˜¯ç”±java.util.concurrent.Semaphoreå®ç°çš„ï¼ŒSemaphoreè¿™ä¸ªç±»èƒ½å¤Ÿä¿è¯è¿™ä¸‰ä¸ªæ–¹æ³•éƒ½æ˜¯åŸå­æ“ä½œã€‚</p><p>å¦‚æœä½ è§‰å¾—ä¸Šé¢çš„æè¿°æœ‰ç‚¹ç»•çš„è¯ï¼Œå¯ä»¥å‚è€ƒä¸‹é¢è¿™ä¸ªä»£ç åŒ–çš„ä¿¡å·é‡æ¨¡å‹ã€‚</p><pre><code>class Semaphore{\n  // è®¡æ•°å™¨\n  int count;\n  // ç­‰å¾…é˜Ÿåˆ—\n  Queue queue;\n  // åˆå§‹åŒ–æ“ä½œ\n  Semaphore(int c){\n    this.count=c;\n  }\n  // \n  void down(){\n    this.count--;\n    if(this.count&lt;0){\n      //å°†å½“å‰çº¿ç¨‹æ’å…¥ç­‰å¾…é˜Ÿåˆ—\n      //é˜»å¡å½“å‰çº¿ç¨‹\n    }\n  }\n  void up(){\n    this.count++;\n    if(this.count&lt;=0) {\n      //ç§»é™¤ç­‰å¾…é˜Ÿåˆ—ä¸­çš„æŸä¸ªçº¿ç¨‹T\n      //å”¤é†’çº¿ç¨‹T\n    }\n  }\n}\n</code></pre><p>è¿™é‡Œå†æ’ä¸€å¥ï¼Œä¿¡å·é‡æ¨¡å‹é‡Œé¢ï¼Œdown()ã€up()è¿™ä¸¤ä¸ªæ“ä½œå†å²ä¸Šæœ€æ—©ç§°ä¸ºPæ“ä½œå’ŒVæ“ä½œï¼Œæ‰€ä»¥ä¿¡å·é‡æ¨¡å‹ä¹Ÿè¢«ç§°ä¸ºPVåŸè¯­ã€‚å¦å¤–ï¼Œè¿˜æœ‰äº›äººå–œæ¬¢ç”¨semWait()å’ŒsemSignal()æ¥ç§°å‘¼å®ƒä»¬ï¼Œè™½ç„¶å«æ³•ä¸åŒï¼Œä½†æ˜¯è¯­ä¹‰éƒ½æ˜¯ç›¸åŒçš„ã€‚åœ¨Java SDKå¹¶å‘åŒ…é‡Œï¼Œdown()å’Œup()å¯¹åº”çš„åˆ™æ˜¯acquire()å’Œrelease()ã€‚</p><h2>å¦‚ä½•ä½¿ç”¨ä¿¡å·é‡</h2><p>é€šè¿‡ä¸Šæ–‡ï¼Œä½ åº”è¯¥ä¼šå‘ç°ä¿¡å·é‡çš„æ¨¡å‹è¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œé‚£å…·ä½“è¯¥å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿå…¶å®ä½ æƒ³æƒ³çº¢ç»¿ç¯å°±å¯ä»¥äº†ã€‚åå­—è·¯å£çš„çº¢ç»¿ç¯å¯ä»¥æ§åˆ¶äº¤é€šï¼Œå¾—ç›Šäºå®ƒçš„ä¸€ä¸ªå…³é”®è§„åˆ™ï¼šè½¦è¾†åœ¨é€šè¿‡è·¯å£å‰å¿…é¡»å…ˆæ£€æŸ¥æ˜¯å¦æ˜¯ç»¿ç¯ï¼Œåªæœ‰ç»¿ç¯æ‰èƒ½é€šè¡Œã€‚è¿™ä¸ªè§„åˆ™å’Œæˆ‘ä»¬å‰é¢æåˆ°çš„é”è§„åˆ™æ˜¯ä¸æ˜¯å¾ˆç±»ä¼¼ï¼Ÿ</p><p>å…¶å®ï¼Œä¿¡å·é‡çš„ä½¿ç”¨ä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚è¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯ç”¨ç´¯åŠ å™¨çš„ä¾‹å­æ¥è¯´æ˜ä¿¡å·é‡çš„ä½¿ç”¨å§ã€‚åœ¨ç´¯åŠ å™¨çš„ä¾‹å­é‡Œé¢ï¼Œcount+=1æ“ä½œæ˜¯ä¸ªä¸´ç•ŒåŒºï¼Œåªå…è®¸ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´è¦ä¿è¯äº’æ–¥ã€‚é‚£è¿™ç§æƒ…å†µç”¨ä¿¡å·é‡æ€ä¹ˆæ§åˆ¶å‘¢ï¼Ÿ</p><p>å…¶å®å¾ˆç®€å•ï¼Œå°±åƒæˆ‘ä»¬ç”¨äº’æ–¥é”ä¸€æ ·ï¼Œåªéœ€è¦åœ¨è¿›å…¥ä¸´ç•ŒåŒºä¹‹å‰æ‰§è¡Œä¸€ä¸‹down()æ“ä½œï¼Œé€€å‡ºä¸´ç•ŒåŒºä¹‹å‰æ‰§è¡Œä¸€ä¸‹up()æ“ä½œå°±å¯ä»¥äº†ã€‚ä¸‹é¢æ˜¯Javaä»£ç çš„ç¤ºä¾‹ï¼Œacquire()å°±æ˜¯ä¿¡å·é‡é‡Œçš„down()æ“ä½œï¼Œrelease()å°±æ˜¯ä¿¡å·é‡é‡Œçš„up()æ“ä½œã€‚</p><pre><code>static int count;\n//åˆå§‹åŒ–ä¿¡å·é‡\nstatic final Semaphore s \n    = new Semaphore(1);\n//ç”¨ä¿¡å·é‡ä¿è¯äº’æ–¥    \nstatic void addOne() {\n  s.acquire();\n  try {\n    count+=1;\n  } finally {\n    s.release();\n  }\n}\n</code></pre><p>ä¸‹é¢æˆ‘ä»¬å†æ¥åˆ†æä¸€ä¸‹ï¼Œä¿¡å·é‡æ˜¯å¦‚ä½•ä¿è¯äº’æ–¥çš„ã€‚å‡è®¾ä¸¤ä¸ªçº¿ç¨‹T1å’ŒT2åŒæ—¶è®¿é—®addOne()æ–¹æ³•ï¼Œå½“å®ƒä»¬åŒæ—¶è°ƒç”¨acquire()çš„æ—¶å€™ï¼Œç”±äºacquire()æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œæ‰€ä»¥åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹ï¼ˆå‡è®¾T1ï¼‰æŠŠä¿¡å·é‡é‡Œçš„è®¡æ•°å™¨å‡ä¸º0ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹ï¼ˆT2ï¼‰åˆ™æ˜¯å°†è®¡æ•°å™¨å‡ä¸º-1ã€‚å¯¹äºçº¿ç¨‹T1ï¼Œä¿¡å·é‡é‡Œé¢çš„è®¡æ•°å™¨çš„å€¼æ˜¯0ï¼Œå¤§äºç­‰äº0ï¼Œæ‰€ä»¥çº¿ç¨‹T1ä¼šç»§ç»­æ‰§è¡Œï¼›å¯¹äºçº¿ç¨‹T2ï¼Œä¿¡å·é‡é‡Œé¢çš„è®¡æ•°å™¨çš„å€¼æ˜¯-1ï¼Œå°äº0ï¼ŒæŒ‰ç…§ä¿¡å·é‡æ¨¡å‹é‡Œå¯¹down()æ“ä½œçš„æè¿°ï¼Œçº¿ç¨‹T2å°†è¢«é˜»å¡ã€‚æ‰€ä»¥æ­¤æ—¶åªæœ‰çº¿ç¨‹T1ä¼šè¿›å…¥ä¸´ç•ŒåŒºæ‰§è¡Œ<code>count+=1ï¼›</code>ã€‚</p><p>å½“çº¿ç¨‹T1æ‰§è¡Œrelease()æ“ä½œï¼Œä¹Ÿå°±æ˜¯up()æ“ä½œçš„æ—¶å€™ï¼Œä¿¡å·é‡é‡Œè®¡æ•°å™¨çš„å€¼æ˜¯-1ï¼ŒåŠ 1ä¹‹åçš„å€¼æ˜¯0ï¼Œå°äºç­‰äº0ï¼ŒæŒ‰ç…§ä¿¡å·é‡æ¨¡å‹é‡Œå¯¹up()æ“ä½œçš„æè¿°ï¼Œæ­¤æ—¶ç­‰å¾…é˜Ÿåˆ—ä¸­çš„T2å°†ä¼šè¢«å”¤é†’ã€‚äºæ˜¯T2åœ¨T1æ‰§è¡Œå®Œä¸´ç•ŒåŒºä»£ç ä¹‹åæ‰è·å¾—äº†è¿›å…¥ä¸´ç•ŒåŒºæ‰§è¡Œçš„æœºä¼šï¼Œä»è€Œä¿è¯äº†äº’æ–¥æ€§ã€‚</p><h2>å¿«é€Ÿå®ç°ä¸€ä¸ªé™æµå™¨</h2><p>ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬ç”¨ä¿¡å·é‡å®ç°äº†ä¸€ä¸ªæœ€ç®€å•çš„äº’æ–¥é”åŠŸèƒ½ã€‚ä¼°è®¡ä½ ä¼šè§‰å¾—å¥‡æ€ªï¼Œæ—¢ç„¶æœ‰Java SDKé‡Œé¢æä¾›äº†Lockï¼Œä¸ºå•¥è¿˜è¦æä¾›ä¸€ä¸ªSemaphore ï¼Ÿå…¶å®å®ç°ä¸€ä¸ªäº’æ–¥é”ï¼Œä»…ä»…æ˜¯ Semaphoreçš„éƒ¨åˆ†åŠŸèƒ½ï¼ŒSemaphoreè¿˜æœ‰ä¸€ä¸ªåŠŸèƒ½æ˜¯Lockä¸å®¹æ˜“å®ç°çš„ï¼Œé‚£å°±æ˜¯ï¼š<strong>Semaphoreå¯ä»¥å…è®¸å¤šä¸ªçº¿ç¨‹è®¿é—®ä¸€ä¸ªä¸´ç•ŒåŒº</strong>ã€‚</p><p>ç°å®ä¸­è¿˜æœ‰è¿™ç§éœ€æ±‚ï¼Ÿæœ‰çš„ã€‚æ¯”è¾ƒå¸¸è§çš„éœ€æ±‚å°±æ˜¯æˆ‘ä»¬å·¥ä½œä¸­é‡åˆ°çš„å„ç§æ± åŒ–èµ„æºï¼Œä¾‹å¦‚è¿æ¥æ± ã€å¯¹è±¡æ± ã€çº¿ç¨‹æ± ç­‰ç­‰ã€‚å…¶ä¸­ï¼Œä½ å¯èƒ½æœ€ç†Ÿæ‚‰æ•°æ®åº“è¿æ¥æ± ï¼Œåœ¨åŒä¸€æ—¶åˆ»ï¼Œä¸€å®šæ˜¯å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶ä½¿ç”¨è¿æ¥æ± çš„ï¼Œå½“ç„¶ï¼Œæ¯ä¸ªè¿æ¥åœ¨è¢«é‡Šæ”¾å‰ï¼Œæ˜¯ä¸å…è®¸å…¶ä»–çº¿ç¨‹ä½¿ç”¨çš„ã€‚</p><p>å…¶å®å‰ä¸ä¹…ï¼Œæˆ‘åœ¨å·¥ä½œä¸­ä¹Ÿé‡åˆ°äº†ä¸€ä¸ªå¯¹è±¡æ± çš„éœ€æ±‚ã€‚æ‰€è°“å¯¹è±¡æ± å‘¢ï¼ŒæŒ‡çš„æ˜¯ä¸€æ¬¡æ€§åˆ›å»ºå‡ºNä¸ªå¯¹è±¡ï¼Œä¹‹åæ‰€æœ‰çš„çº¿ç¨‹é‡å¤åˆ©ç”¨è¿™Nä¸ªå¯¹è±¡ï¼Œå½“ç„¶å¯¹è±¡åœ¨è¢«é‡Šæ”¾å‰ï¼Œä¹Ÿæ˜¯ä¸å…è®¸å…¶ä»–çº¿ç¨‹ä½¿ç”¨çš„ã€‚å¯¹è±¡æ± ï¼Œå¯ä»¥ç”¨Listä¿å­˜å®ä¾‹å¯¹è±¡ï¼Œè¿™ä¸ªå¾ˆç®€å•ã€‚ä½†å…³é”®æ˜¯é™æµå™¨çš„è®¾è®¡ï¼Œè¿™é‡Œçš„é™æµï¼ŒæŒ‡çš„æ˜¯ä¸å…è®¸å¤šäºNä¸ªçº¿ç¨‹åŒæ—¶è¿›å…¥ä¸´ç•ŒåŒºã€‚é‚£å¦‚ä½•å¿«é€Ÿå®ç°ä¸€ä¸ªè¿™æ ·çš„é™æµå™¨å‘¢ï¼Ÿè¿™ç§åœºæ™¯ï¼Œæˆ‘ç«‹åˆ»å°±æƒ³åˆ°äº†ä¿¡å·é‡çš„è§£å†³æ–¹æ¡ˆã€‚</p><p>ä¿¡å·é‡çš„è®¡æ•°å™¨ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®æˆäº†1ï¼Œè¿™ä¸ª1è¡¨ç¤ºåªå…è®¸ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒºï¼Œä½†å¦‚æœæˆ‘ä»¬æŠŠè®¡æ•°å™¨çš„å€¼è®¾ç½®æˆå¯¹è±¡æ± é‡Œå¯¹è±¡çš„ä¸ªæ•°Nï¼Œå°±èƒ½å®Œç¾è§£å†³å¯¹è±¡æ± çš„é™æµé—®é¢˜äº†ã€‚ä¸‹é¢å°±æ˜¯å¯¹è±¡æ± çš„ç¤ºä¾‹ä»£ç ã€‚</p><pre><code>class ObjPool&lt;T, R&gt; {\n  final List&lt;T&gt; pool;\n  // ç”¨ä¿¡å·é‡å®ç°é™æµå™¨\n  final Semaphore sem;\n  // æ„é€ å‡½æ•°\n  ObjPool(int size, T t){\n    pool = new Vector&lt;T&gt;(){};\n    for(int i=0; i&lt;size; i++){\n      pool.add(t);\n    }\n    sem = new Semaphore(size);\n  }\n  // åˆ©ç”¨å¯¹è±¡æ± çš„å¯¹è±¡ï¼Œè°ƒç”¨func\n  R exec(Function&lt;T,R&gt; func) {\n    T t = null;\n    sem.acquire();\n    try {\n      t = pool.remove(0);\n      return func.apply(t);\n    } finally {\n      pool.add(t);\n      sem.release();\n    }\n  }\n}\n// åˆ›å»ºå¯¹è±¡æ± \nObjPool&lt;Long, String&gt; pool = \n  new ObjPool&lt;Long, String&gt;(10, 2);\n// é€šè¿‡å¯¹è±¡æ± è·å–tï¼Œä¹‹åæ‰§è¡Œ  \npool.exec(t -&gt; {\n    System.out.println(t);\n    return t.toString();\n});\n</code></pre><p>æˆ‘ä»¬ç”¨ä¸€ä¸ªList<t>æ¥ä¿å­˜å¯¹è±¡å®ä¾‹ï¼Œç”¨Semaphoreå®ç°é™æµå™¨ã€‚å…³é”®çš„ä»£ç æ˜¯ObjPoolé‡Œé¢çš„exec()æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•é‡Œé¢å®ç°äº†é™æµçš„åŠŸèƒ½ã€‚åœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢ï¼Œæˆ‘ä»¬é¦–å…ˆè°ƒç”¨acquire()æ–¹æ³•ï¼ˆä¸ä¹‹åŒ¹é…çš„æ˜¯åœ¨finallyé‡Œé¢è°ƒç”¨release()æ–¹æ³•ï¼‰ï¼Œå‡è®¾å¯¹è±¡æ± çš„å¤§å°æ˜¯10ï¼Œä¿¡å·é‡çš„è®¡æ•°å™¨åˆå§‹åŒ–ä¸º10ï¼Œé‚£ä¹ˆå‰10ä¸ªçº¿ç¨‹è°ƒç”¨acquire()æ–¹æ³•ï¼Œéƒ½èƒ½ç»§ç»­æ‰§è¡Œï¼Œç›¸å½“äºé€šè¿‡äº†ä¿¡å·ç¯ï¼Œè€Œå…¶ä»–çº¿ç¨‹åˆ™ä¼šé˜»å¡åœ¨acquire()æ–¹æ³•ä¸Šã€‚å¯¹äºé€šè¿‡ä¿¡å·ç¯çš„çº¿ç¨‹ï¼Œæˆ‘ä»¬ä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…äº†ä¸€ä¸ªå¯¹è±¡ tï¼ˆè¿™ä¸ªåˆ†é…å·¥ä½œæ˜¯é€šè¿‡pool.remove(0)å®ç°çš„ï¼‰ï¼Œåˆ†é…å®Œä¹‹åä¼šæ‰§è¡Œä¸€ä¸ªå›è°ƒå‡½æ•°funcï¼Œè€Œå‡½æ•°çš„å‚æ•°æ­£æ˜¯å‰é¢åˆ†é…çš„å¯¹è±¡ t ï¼›æ‰§è¡Œå®Œå›è°ƒå‡½æ•°ä¹‹åï¼Œå®ƒä»¬å°±ä¼šé‡Šæ”¾å¯¹è±¡ï¼ˆè¿™ä¸ªé‡Šæ”¾å·¥ä½œæ˜¯é€šè¿‡pool.add(t)å®ç°çš„ï¼‰ï¼ŒåŒæ—¶è°ƒç”¨release()æ–¹æ³•æ¥æ›´æ–°ä¿¡å·é‡çš„è®¡æ•°å™¨ã€‚å¦‚æœæ­¤æ—¶ä¿¡å·é‡é‡Œè®¡æ•°å™¨çš„å€¼å°äºç­‰äº0ï¼Œé‚£ä¹ˆè¯´æ˜æœ‰çº¿ç¨‹åœ¨ç­‰å¾…ï¼Œæ­¤æ—¶ä¼šè‡ªåŠ¨å”¤é†’ç­‰å¾…çš„çº¿ç¨‹ã€‚</t></p><p>ç®€è¨€ä¹‹ï¼Œä½¿ç”¨ä¿¡å·é‡ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°å®ç°ä¸€ä¸ªé™æµå™¨ï¼Œä½¿ç”¨èµ·æ¥è¿˜æ˜¯éå¸¸ç®€å•çš„ã€‚</p><h2>æ€»ç»“</h2><p>ä¿¡å·é‡åœ¨Javaè¯­è¨€é‡Œé¢åæ°”å¹¶ä¸ç®—å¤§ï¼Œä½†æ˜¯åœ¨å…¶ä»–è¯­è¨€é‡Œå´æ˜¯å¾ˆæœ‰çŸ¥ååº¦çš„ã€‚Javaåœ¨å¹¶å‘ç¼–ç¨‹é¢†åŸŸèµ°çš„å¾ˆå¿«ï¼Œé‡ç‚¹æ”¯æŒçš„è¿˜æ˜¯ç®¡ç¨‹æ¨¡å‹ã€‚ ç®¡ç¨‹æ¨¡å‹ç†è®ºä¸Šè§£å†³äº†ä¿¡å·é‡æ¨¡å‹çš„ä¸€äº›ä¸è¶³ï¼Œä¸»è¦ä½“ç°åœ¨æ˜“ç”¨æ€§å’Œå·¥ç¨‹åŒ–æ–¹é¢ï¼Œä¾‹å¦‚ç”¨ä¿¡å·é‡è§£å†³æˆ‘ä»¬æ›¾ç»æåˆ°è¿‡çš„é˜»å¡é˜Ÿåˆ—é—®é¢˜ï¼Œå°±æ¯”ç®¡ç¨‹æ¨¡å‹éº»çƒ¦å¾ˆå¤šï¼Œä½ å¦‚æœæ„Ÿå…´è¶£ï¼Œå¯ä»¥è¯¾ä¸‹äº†è§£å’Œå°è¯•ä¸€ä¸‹ã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>åœ¨ä¸Šé¢å¯¹è±¡æ± çš„ä¾‹å­ä¸­ï¼Œå¯¹è±¡ä¿å­˜åœ¨äº†Vectorä¸­ï¼ŒVectoræ˜¯Javaæä¾›çš„çº¿ç¨‹å®‰å…¨çš„å®¹å™¨ï¼Œå¦‚æœæˆ‘ä»¬æŠŠVectoræ¢æˆArrayListï¼Œæ˜¯å¦å¯ä»¥å‘¢ï¼Ÿ</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºä¸æˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºè®°å½•ä½ çš„æ€è€ƒè¿‡ç¨‹ã€‚æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p><p></p>","neighbors":{"left":{"article_title":"15 | Lockå’ŒConditionï¼ˆä¸‹ï¼‰ï¼šDubboå¦‚ä½•ç”¨ç®¡ç¨‹å®ç°å¼‚æ­¥è½¬åŒæ­¥ï¼Ÿ","id":88487},"right":{"article_title":"17 | ReadWriteLockï¼šå¦‚ä½•å¿«é€Ÿå®ç°ä¸€ä¸ªå®Œå¤‡çš„ç¼“å­˜ï¼Ÿ","id":88909}},"comments":[{"had_liked":false,"id":82933,"user_name":"CCC","can_delete":false,"product_type":"c1","uid":1003738,"ip_address":"","ucode":"2E254444098267","user_header":"https://static001.geekbang.org/account/avatar/00/0f/50/da/ed4803cb.jpg","comment_is_top":false,"comment_ctime":1554351127,"is_pvip":false,"replies":[{"id":"29978","content":"ğŸ‘ğŸ‘ğŸ‘<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554379878,"ip_address":"","comment_id":82933,"utype":1}],"discussion_count":7,"race_medal":0,"score":"1075296175127","product_id":100023901,"comment_content":"æˆ‘ç†è§£çš„å’Œç®¡ç¨‹ç›¸æ¯”ï¼Œä¿¡å·é‡å¯ä»¥å®ç°çš„ç‹¬ç‰¹åŠŸèƒ½å°±æ˜¯åŒæ—¶å…è®¸å¤šä¸ªçº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒºï¼Œä½†æ˜¯ä¿¡å·é‡ä¸èƒ½åšçš„å°±æ˜¯åŒæ—¶å”¤é†’å¤šä¸ªçº¿ç¨‹å»äº‰æŠ¢é”ï¼Œåªèƒ½å”¤é†’ä¸€ä¸ªé˜»å¡ä¸­çš„çº¿ç¨‹ï¼Œè€Œä¸”ä¿¡å·é‡æ¨¡å‹æ˜¯æ²¡æœ‰Conditionçš„æ¦‚å¿µçš„ï¼Œå³é˜»å¡çº¿ç¨‹è¢«é†’äº†ç›´æ¥å°±è¿è¡Œäº†è€Œä¸ä¼šå»æ£€æŸ¥æ­¤æ—¶ä¸´ç•Œæ¡ä»¶æ˜¯å¦å·²ç»ä¸æ»¡è¶³äº†ï¼ŒåŸºäºæ­¤è€ƒè™‘ä¿¡å·é‡æ¨¡å‹æ‰ä¼šè®¾è®¡å‡ºåªèƒ½è®©ä¸€ä¸ªçº¿ç¨‹è¢«å”¤é†’ï¼Œå¦åˆ™å°±ä¼šå‡ºç°å› ä¸ºç¼ºå°‘Conditionæ£€æŸ¥è€Œå¸¦æ¥çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚æ­£å› ä¸ºç¼ºå¤±äº†Conditionï¼Œæ‰€ä»¥ç”¨ä¿¡å·é‡æ¥å®ç°é˜»å¡é˜Ÿåˆ—å°±å¾ˆéº»çƒ¦ï¼Œå› ä¸ºè¦è‡ªå·±å®ç°ç±»ä¼¼Conditionçš„é€»è¾‘ã€‚","like_count":251,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445784,"discussion_content":"ğŸ‘ğŸ‘ğŸ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554379878,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1127046,"avatar":"https://static001.geekbang.org/account/avatar/00/11/32/86/8f339db9.jpg","nickname":"ä»»å¤§é²œ","note":"","ucode":"8D89E7DB9A30E1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367936,"discussion_content":"è¿™ä½ç½‘å‹è¯´çš„ä¸å¯¹ã€‚ä¿¡å·é‡æœ¬æ¥å°±å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸´ç•ŒåŒºã€‚ä½ è¯´çš„åŒæ—¶å”¤é†’å¤šä¸ªçº¿ç¨‹æœ¬æ¥å°±æ˜¯ä¿¡å·é‡æ”¯æŒçš„å¤šçº¿ç¨‹åŒæ—¶è®¿é—®ä¸´ç•ŒåŒºã€‚åªèƒ½å”¤é†’ä¸€ä¸ªçº¿ç¨‹çš„åŸå› æ˜¯ï¼šç”±äºè®¡æ•°å™¨é™åˆ¶äº†ä¸€ä¸ªèåœä¸€ä¸ªå‘ï¼Œå‘æ»¡äº†å†æœ‰èåœå°±å¾—æ’é˜Ÿã€‚ä½ é‡Šæ”¾ä¸€ä¸ªå‘å”¤é†’ä¸€ä¸ªèåœï¼Œè®¡æ•°å™¨å®¹å™¨æ²¡å˜åŒ–ã€‚å¦‚æœé‡Šæ”¾ä¸€ä¸ªå‘ï¼Œå”¤é†’å¤šä¸ªèåœï¼Œé‚£é†’ç€çš„èåœå°±è¶…è¿‡å‘çš„æ•°é‡äº†ã€‚è¿è¡Œçº¿ç¨‹è¶…è¿‡äº†è®¡æ•°å™¨çš„å®¹é‡ï¼Œè¿™å°±è¿èƒŒäº†è®¡æ•°å™¨çš„è®¾è®¡ã€‚","likes_number":20,"is_delete":false,"is_hidden":false,"ctime":1618498981,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2963434,"avatar":"","nickname":"Geek_94fa0e","note":"","ucode":"15BC7D4E130E80","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1127046,"avatar":"https://static001.geekbang.org/account/avatar/00/11/32/86/8f339db9.jpg","nickname":"ä»»å¤§é²œ","note":"","ucode":"8D89E7DB9A30E1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560934,"discussion_content":"å—¯ æœ‰é“ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649494489,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":367936,"ip_address":""},"score":560934,"extra":""}]},{"author":{"id":2011501,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoEcoSRAWRtibKK8RHPc7XibzcyGEfDsUFOXRJWtfd2u549Qa4KpicFNpeq16IqK2KSp9rkF2hrMXDLg/132","nickname":"å°å°ç±³","note":"","ucode":"D2928A29154FBD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278127,"discussion_content":"æˆ‘è®¤ä¸ºè¿™ä¸ªç•™è¨€è¯´çš„ä¸å¯¹ï¼Œä¿¡å·é‡æ¨¡å‹æ‰ä¼šè®¾è®¡å‡ºåªèƒ½è®©ä¸€ä¸ªçº¿ç¨‹è¢«å”¤é†’æ ¹æœ¬ä¸æ˜¯å› ä¸ºæ£€æŸ¥ä¸´ç•Œæ¡ä»¶çš„äº‹ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1591153567,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1687656,"avatar":"https://static001.geekbang.org/account/avatar/00/19/c0/68/314e8306.jpg","nickname":"å¨å…ˆæ£®","note":"","ucode":"5F445C6832274B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2011501,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoEcoSRAWRtibKK8RHPc7XibzcyGEfDsUFOXRJWtfd2u549Qa4KpicFNpeq16IqK2KSp9rkF2hrMXDLg/132","nickname":"å°å°ç±³","note":"","ucode":"D2928A29154FBD","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":363010,"discussion_content":"æ˜¯çš„ï¼Œæˆ‘åŒæ„ä½ çš„çœ‹æ³•ï¼Œæ„Ÿè§‰å°±æ˜¯é’ˆå¯¹å¹¶å‘åšçš„è®¾è®¡çš„å‡ºå‘ç‚¹ä¸ä¸€æ ·ï¼Œç®¡ç¨‹æœ‰ç®¡ç¨‹çš„ä¾¿åˆ©å¤„ï¼Œä¸¤è€…æ„Ÿè§‰æ›´åƒæ˜¯äº’è¡¥çš„å…³ç³»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617094748,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":278127,"ip_address":""},"score":363010,"extra":""}]},{"author":{"id":1855137,"avatar":"","nickname":"Geek_e6f358","note":"","ucode":"C21E94A90258A2","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385125,"discussion_content":"ä¿¡å·é‡æ”¯æŒå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸´ç•ŒåŒºï¼Œä½†æ˜¯ä»è®¾è®¡ä¸Šå°±ä¸æ”¯æŒå”¤é†’æ‰€æœ‰ç­‰å¾…çš„çº¿ç¨‹ã€‚çº¿ç¨‹æ‰§è¡Œdownåè¢«æ”¾è¿›é˜Ÿåˆ—ï¼Œå¦‚æœè¿™æ—¶å€™å”¤é†’æ‰€æœ‰ï¼Œå°±ä¼šæœ‰è¶…è¿‡è®¡æ•°å™¨æ•°é‡çš„çº¿ç¨‹ç»§ç»­æ‰§è¡Œï¼Œèµ„æºä¸å¤Ÿçš„","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1626910832,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1112490,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f9/aa/3e80212e.jpg","nickname":"é¾™çŒ«","note":"","ucode":"FD726CC969EF9C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282867,"discussion_content":"å¤§ä½¬","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1592104960,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82822,"user_name":"è€æ¨åŒå¿—","can_delete":false,"product_type":"c1","uid":1246199,"ip_address":"","ucode":"3F334F0CFD3DE6","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/f7/3a493bec.jpg","comment_is_top":false,"comment_ctime":1554335866,"is_pvip":false,"replies":[{"id":"29982","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554380911,"ip_address":"","comment_id":82822,"utype":1}],"discussion_count":7,"race_medal":0,"score":"671569234042","product_id":100023901,"comment_content":"éœ€è¦ç”¨çº¿ç¨‹å®‰å…¨çš„vectorï¼Œå› ä¸ºä¿¡å·é‡æ”¯æŒå¤šä¸ªçº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒºï¼Œæ‰§è¡Œlistçš„addå’Œremoveæ–¹æ³•æ—¶å¯èƒ½æ˜¯å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œ","like_count":157,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445739,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554380911,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2329635,"avatar":"https://static001.geekbang.org/account/avatar/00/23/8c/23/f1c5bee0.jpg","nickname":"wang.yu","note":"","ucode":"CCA775784B3EB3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384356,"discussion_content":"addåœ¨æ„é€ æ–¹æ³•é‡Œåº”è¯¥ä¸ä¼šå¹¶å‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626515003,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1323667,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIgiarK8ic7vY1dzlxlG4BfXZadxbPe7OqvDI81OFTg7SyiboYsZev3iaNEINhTGyncjmI6upXyloicyhg/132","nickname":"ç„¦ç„¦","note":"","ucode":"0A692D804A8F47","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2329635,"avatar":"https://static001.geekbang.org/account/avatar/00/23/8c/23/f1c5bee0.jpg","nickname":"wang.yu","note":"","ucode":"CCA775784B3EB3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582527,"discussion_content":"ä¿¡å·é‡æ”¯æŒå¤šä¸ªçº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒºï¼Œæ‰€ä»¥æœ‰å¯èƒ½å¹¶å‘ï¼Œå¯¼è‡´listé‡Œé¢çº¿ç¨‹æ•°é‡å’Œä¿¡å·é‡è®¡æ•°å™¨å¯¹ä¸ä¸Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659491981,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":384356,"ip_address":"åŒ—äº¬"},"score":582527,"extra":""}]},{"author":{"id":1284820,"avatar":"https://static001.geekbang.org/account/avatar/00/13/9a/d4/8632497b.jpg","nickname":"æ²™å¯","note":"","ucode":"1498D221133DD8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350271,"discussion_content":"å¦‚æœå¯¹è±¡æ± å®¹é‡æ˜¯1ï¼Œé‚£ä¹ˆç”¨listæ˜¯å¦ä¹Ÿä¸ä¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613791203,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2568744,"avatar":"https://static001.geekbang.org/account/avatar/00/27/32/28/078ec46c.jpg","nickname":"topå•¦å®ƒ","note":"","ucode":"1F2656293D1B9F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1284820,"avatar":"https://static001.geekbang.org/account/avatar/00/13/9a/d4/8632497b.jpg","nickname":"æ²™å¯","note":"","ucode":"1498D221133DD8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555007,"discussion_content":"æˆ‘è§‰å¾—ä¸ä¼š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646720026,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":350271,"ip_address":""},"score":555007,"extra":""}]},{"author":{"id":1213078,"avatar":"https://static001.geekbang.org/account/avatar/00/12/82/96/aa795685.jpg","nickname":"mghio","note":"","ucode":"74883EDE4FD0DC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281647,"discussion_content":"æ­£è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591783950,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1041534,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoEb4oys1R20cc9FfpZsVEt04Dias86A30LUNWM8lPyBahKaMRISNB854hhXRjoohCIIwX1sO86zfA/132","nickname":"0909","note":"","ucode":"56BAF3C6FBF200","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":94715,"discussion_content":"å‰å®³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576982898,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83071,"user_name":"ä»»å¤§é¹","can_delete":false,"product_type":"c1","uid":1069049,"ip_address":"","ucode":"75D14B0FC68DA5","user_header":"https://static001.geekbang.org/account/avatar/00/10/4f/f9/1f0a9665.jpg","comment_is_top":false,"comment_ctime":1554392857,"is_pvip":false,"replies":[{"id":"30002","content":"å¯¹ğŸ‘ğŸ‘ğŸ‘<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554430227,"ip_address":"","comment_id":83071,"utype":1}],"discussion_count":2,"race_medal":0,"score":"229187659545","product_id":100023901,"comment_content":"æœ‰åŒå­¦è®¤ä¸ºup()ä¸­çš„åˆ¤æ–­æ¡ä»¶åº”è¯¥&gt;=0ï¼Œæˆ‘è§‰å¾—æœ‰å¯èƒ½ç†è§£ä¸ºç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ä¸­çš„ç”Ÿäº§è€…äº†ã€‚å¯ä»¥è¿™ä¹ˆæƒ³ï¼Œ&gt;0å°±æ„å‘³ç€æ²¡æœ‰é˜»å¡çš„çº¿ç¨‹äº†ï¼Œæ‰€ä»¥åªæœ‰&lt;=0çš„æƒ…å†µæ‰éœ€è¦å”¤é†’ä¸€ä¸ªç­‰å¾…çš„çº¿ç¨‹ã€‚å…¶å®down()å’Œup()æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œå¹¶ä¸”æ˜¯å…ˆè°ƒç”¨down()è·å¾—é”ï¼Œå¤„ç†å®Œæˆå†è°ƒç”¨up()é‡Šæ”¾é”ï¼Œå¦‚æœä¿¡å·é‡åˆå§‹å€¼ä¸º1ï¼Œåº”è¯¥æ˜¯ä¸ä¼šå‡ºç°&gt;0çš„æƒ…å†µçš„ï¼Œé™¤éæ•…æ„è°ƒå…ˆç”¨up()ï¼Œè¿™ä¹Ÿå¤±å»äº†ä¿¡å·é‡æœ¬èº«çš„æ„ä¹‰äº†ã€‚ä¸çŸ¥é“æˆ‘ç†è§£çš„å¯¹ä¸å¯¹ã€‚","like_count":53,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445846,"discussion_content":"å¯¹ğŸ‘ğŸ‘ğŸ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554430227,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2963434,"avatar":"","nickname":"Geek_94fa0e","note":"","ucode":"15BC7D4E130E80","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560936,"discussion_content":"down()æ˜¯è·å–ï¼›  up()æ˜¯å½’è¿˜ï¼›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649494621,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132207,"user_name":"Alvan","can_delete":false,"product_type":"c1","uid":1002468,"ip_address":"","ucode":"D6529DC67898BF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4b/e4/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1568042681,"is_pvip":true,"replies":[{"id":"50589","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1568083110,"ip_address":"","comment_id":132207,"utype":1}],"discussion_count":5,"race_medal":0,"score":"121827126969","product_id":100023901,"comment_content":"å¾ˆå¤šäººå¯¹up()æ–¹æ³•çš„è®¡æ•°å™¨count&lt;=0ä¸ç†è§£ï¼Œå¯ä»¥çœ‹ä¸‹è¿™é‡Œï¼š<br>1ã€åè¯æ³•éªŒè¯ä¸€ä¸‹ï¼Œå‡å¦‚ä¸€ä¸ªçº¿ç¨‹å…ˆæ‰§è¡Œdown()æ“ä½œï¼Œé‚£ä¹ˆæ­¤æ—¶countçš„å€¼æ˜¯0ï¼Œæ¥ç€è¿™ä¸ªçº¿ç¨‹æ‰§è¡Œup()æ“ä½œï¼Œæ­¤æ—¶countçš„å€¼æ˜¯1ï¼Œå¦‚æœcountåº”è¯¥æ˜¯å¤§äºç­‰äº0ï¼Œé‚£ä¹ˆåº”è¯¥å”¤é†’å…¶ä»–çº¿ç¨‹ï¼Œå¯æ˜¯æ­¤æ—¶å¹¶æ²¡æœ‰çº¿ç¨‹åœ¨ç¡çœ å‘€ï¼Œcountçš„å€¼ä¸åº”è¯¥æ˜¯å¤§äºç­‰äº0ã€‚<br>2ã€å‡å¦‚ä¸€ä¸ªçº¿ç¨‹t1æ‰§è¡Œdown()æ“ä½œï¼Œæ­¤æ—¶count = 0ï¼Œç„¶åt1è¢«ä¸­æ–­ï¼Œå¦å¤–çš„çº¿ç¨‹t2æ‰§è¡Œdown()æ“ä½œï¼Œæ­¤æ—¶count=-1ï¼Œt2é˜»å¡ç¡çœ ï¼Œå¦å¤–çš„çº¿ç¨‹t3æ‰§è¡Œdown()æ“ä½œï¼Œcount=-2ï¼Œt3ä¹Ÿç¡çœ ã€‚count=-2 è¯´æ˜æœ‰ä¸¤ä¸ªçº¿ç¨‹åœ¨ç¡çœ ï¼Œæ¥ç€t1æ‰§è¡Œup() æ“ä½œï¼Œæ­¤æ—¶count=-1ï¼Œå°äºç­‰äº0ï¼Œå”¤é†’t2æˆ–è€…t3å…¶ä¸­ä¸€ä¸ªçº¿ç¨‹ï¼Œå‡å¦‚è®¡æ•°å™¨countæ˜¯å¤§äºç­‰äº0æ‰å”¤é†’å…¶ä»–çº¿ç¨‹ï¼Œè¿™æ˜æ˜¾æ˜¯ä¸å¯¹çš„ã€‚","like_count":28,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466819,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568083110,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051293,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/4c/dd/c6035349.jpg","nickname":"Bumblebee","note":"","ucode":"B879C8A511D08D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560319,"discussion_content":"â›³ï¸","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649257500,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2144474,"avatar":"https://static001.geekbang.org/account/avatar/00/20/b8/da/42284f64.jpg","nickname":"å¼ çŸ¥ä¿¡","note":"","ucode":"7C896BB3214B3D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329276,"discussion_content":"è¿™æ ·è¿˜å¯ä»¥ç®—å‡ºæ¥é˜»å¡çš„çº¿ç¨‹æ•°ç›®ï¼Œå½“count<=0çš„æ—¶å€™ï¼Œé˜»å¡çº¿ç¨‹çš„æ•°ç›®å°±æ˜¯abs(count)+1äº†ï¼Œä¿¡å·é‡è®¾è®¡çœŸæ˜¯å¾ˆå·§å¦™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606358680,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1653218,"avatar":"https://static001.geekbang.org/account/avatar/00/19/39/e2/633f8b70.jpg","nickname":"æ’æ˜Ÿ","note":"","ucode":"F6902B0291FCFC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2144474,"avatar":"https://static001.geekbang.org/account/avatar/00/20/b8/da/42284f64.jpg","nickname":"å¼ çŸ¥ä¿¡","note":"","ucode":"7C896BB3214B3D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542824,"discussion_content":"ä¸éœ€è¦åŠ 1å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640854808,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":329276,"ip_address":""},"score":542824,"extra":""}]},{"author":{"id":1018620,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8a/fc/d1dd57dd.jpg","nickname":"ipofss","note":"","ucode":"DE3061C9259F9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":29320,"discussion_content":"æˆ‘ä¼¼æ‡‚éæ‡‚äº†ï¼Œå†ä»”ç»†ç¢ç£¨ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570761599,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82918,"user_name":"shawn","can_delete":false,"product_type":"c1","uid":1101483,"ip_address":"","ucode":"9AF400BBF2E264","user_header":"https://static001.geekbang.org/account/avatar/00/10/ce/ab/e9d7811f.jpg","comment_is_top":false,"comment_ctime":1554348780,"is_pvip":true,"discussion_count":3,"race_medal":0,"score":"100338596588","product_id":100023901,"comment_content":"è€å¸ˆèƒ½å¦æŠŠè¯¾ç¨‹æ‰€æœ‰çš„å®Œæ•´ä»£ç æ”¾åˆ°githubä¸Šï¼Œè¿™æ ·æˆ‘ä»¬å­¦èµ·æ¥æ›´æ–¹ä¾¿ã€‚åŒ…æ‹¬å…¨é¢å‡ ç« çš„ä¹Ÿå‘ä¸‹ï¼Œå› ä¸ºæœ‰æ—¶å€™æ ¹æ®æ‚¨çš„ä»£ç ï¼Œæˆ‘æ²¡æ³•è¿è¡Œ","like_count":23,"discussions":[{"author":{"id":1445797,"avatar":"https://static001.geekbang.org/account/avatar/00/16/0f/a5/4a68b68b.jpg","nickname":"æˆ‘å¯¹é’¢ç´å‰å¥æ²¡æŠ—ä½“","note":"","ucode":"0E6731E91BD6F7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":279783,"discussion_content":"ä¼ªä»£ç ä½ ä¹Ÿè¦è¿è¡Œï¼Ÿ","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1591415514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1689144,"avatar":"https://static001.geekbang.org/account/avatar/00/19/c6/38/b41dc894.jpg","nickname":"é©¬åŠä»™","note":"","ucode":"14868A55469A76","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":406523,"discussion_content":"ä¼ªä»£ç ç»™ä½ ä¸€ä¸ªæ€è·¯ï¼Œå¯ä»¥è‡ªå·±å°è¯•ä¸€ä¸‹å®ç°ï¼Œæ„Ÿè§‰å°è±¡ä¼šæ›´æ·±åˆ»å‘¢ï¼","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1634784848,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1812970,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a9/ea/5bfce6c5.jpg","nickname":"mgs2002","note":"","ucode":"F5931108BD509B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278925,"discussion_content":"ç¡®å®ï¼Œèƒ½æ”¾ä¸Šå»å°±å¥½äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591258810,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83047,"user_name":"æœ¨å«å…­","can_delete":false,"product_type":"c1","uid":1199495,"ip_address":"","ucode":"D113DF578C5BF5","user_header":"https://static001.geekbang.org/account/avatar/00/12/4d/87/57236a2d.jpg","comment_is_top":false,"comment_ctime":1554383862,"is_pvip":true,"replies":[{"id":"29984","content":"æ˜¯çš„ï¼Œæ„Ÿè°¢å›å¤çš„è¿™ä¹ˆè¯¦ç»†ï¼ï¼ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554392383,"ip_address":"","comment_id":83047,"utype":1}],"discussion_count":3,"race_medal":0,"score":"91748697078","product_id":100023901,"comment_content":"æ¢ArrayListæ˜¯ä¸è¡Œçš„ï¼Œä¸´ç•ŒåŒºå†…å¯èƒ½å­˜åœ¨å¤šä¸ªçº¿ç¨‹æ¥æ‰§è¡Œremoveæ“ä½œï¼Œå‡ºç°ä¸å¯é¢„çŸ¥çš„åæœã€‚<br><br>å¯¹äºchaosåŒå­¦è¯´returnä¹‹å‰é‡Šæ”¾çš„é—®é¢˜ï¼Œæˆ‘è§‰å¾—å¯ä»¥è¿™ä¹ˆç†è§£ï¼šreturnçš„æ˜¯æ‰§è¡Œåçš„ç»“æœï¼Œè€Œä¸æ˜¯â€œæ‰§è¡Œâ€ã€‚æ‰€ä»¥é¡ºåºåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š1acquireï¼›2applyï¼›3finally releaseï¼›4return2çš„ç»“æœ","like_count":21,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445835,"discussion_content":"æ˜¯çš„ï¼Œæ„Ÿè°¢å›å¤çš„è¿™ä¹ˆè¯¦ç»†ï¼ï¼ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554392383,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1100644,"avatar":"https://static001.geekbang.org/account/avatar/00/10/cb/64/4afad7da.jpg","nickname":"æ¬£","note":"","ucode":"35658943C6F20F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546019,"discussion_content":"æ‰§è¡Œé¡ºåºåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š1acquireï¼›2applyï¼›3return2çš„ç»“æœå‹å…¥æ“ä½œæ ˆä¸­ï¼›4finally releaseï¼›\nå¯ä»¥æŸ¥çœ‹å­—èŠ‚ç è¿›è¡ŒéªŒè¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642130540,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1323652,"avatar":"","nickname":"sibyl","note":"","ucode":"0D142011860D69","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289765,"discussion_content":"mask","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594205299,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83390,"user_name":"ç¼ªæ–‡","can_delete":false,"product_type":"c1","uid":1042262,"ip_address":"","ucode":"59603B50EF5FC6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e7/56/c72997f3.jpg","comment_is_top":false,"comment_ctime":1554554126,"is_pvip":false,"replies":[{"id":"30127","content":"åé¢ä¼šä»‹ç»guavaçš„é™æµå™¨","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554560705,"ip_address":"","comment_id":83390,"utype":1}],"discussion_count":1,"race_medal":0,"score":"65979063566","product_id":100023901,"comment_content":"è¿™ä¸ªé™æµå™¨å®é™…ä¸Šé™çš„æ˜¯å¹¶å‘é‡ï¼Œä¹Ÿå°±æ˜¯åŒæ—¶å…è®¸å¤šå°‘ä¸ªè¯·æ±‚é€šè¿‡ï¼Œå¦‚æœé™åˆ¶æ¯ç§’è¯·æ±‚æ•°ï¼Œä¸æ˜¯è¿™ä¸ªå®ç°çš„å§","like_count":15,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446003,"discussion_content":"åé¢ä¼šä»‹ç»guavaçš„é™æµå™¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554560705,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134970,"user_name":"åˆ˜å½¦è¾‰","can_delete":false,"product_type":"c1","uid":1115468,"ip_address":"","ucode":"FC9AA4FA78DFDA","user_header":"https://static001.geekbang.org/account/avatar/00/11/05/4c/558b0012.jpg","comment_is_top":false,"comment_ctime":1568964864,"is_pvip":false,"replies":[{"id":"51817","content":"å”¤é†’åç›´æ¥æ‰§è¡Œä¸šåŠ¡ä»£ç ï¼Œåœ¨å“ªé‡Œé˜»å¡ï¼Œå”¤é†’åå°±åœ¨å“ªé‡Œç»§ç»­æ‰§è¡Œ","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1568981736,"ip_address":"","comment_id":134970,"utype":1}],"discussion_count":3,"race_medal":0,"score":"44518637824","product_id":100023901,"comment_content":"å‡å¦‚æœ‰3ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹Aã€Bã€Cï¼Œä¿¡å·é‡è®¡æ•°å™¨ä¸º1ï¼Œçº¿ç¨‹Aæ‰§è¡Œdownçš„æ—¶å€™å˜ä¸º0ï¼Œä¸é˜»å¡ï¼›çº¿ç¨‹Bæ‰§è¡Œdownï¼Œå˜ä¸º-1ï¼Œé˜»å¡ï¼›çº¿ç¨‹Cæ‰§è¡Œdownå˜ä¸º-2ï¼Œé˜»å¡ã€‚å½“çº¿ç¨‹Aæ‰§è¡Œå®Œï¼Œè°ƒç”¨upåï¼Œå˜ä¸º-1ï¼Œæ­¤æ—¶å”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼Œé‚£ä¹ˆè¯·é—®å”¤é†’ä¹‹åçš„æ“ä½œå‘¢ï¼Ÿå”¤é†’ä¹‹åç›´æ¥å°±æ‰§è¡Œäº†ä¸šåŠ¡ä»£ç äº†ï¼Ÿè¿˜æ˜¯å”¤é†’ä¹‹åè¿˜éœ€è¦å»å…ˆæ‰§è¡Œdownï¼ŸæŒ‰åˆ†æçš„è¯åº”è¯¥ä¸èƒ½æ‰§è¡Œdownäº†ï¼Œå¦‚æœæ‰§è¡Œdownçš„è¯ï¼Œè®¡æ•°å™¨å˜ä¸º-2ï¼Œè¿˜ä¼šé˜»å¡ï¼Œæ‰€ä»¥æ˜¯ä¸æ˜¯è¿™å—å„¿çš„é˜»å¡å’Œå”¤é†’ä¹Ÿæ˜¯ç”¨çš„waitå’Œnotifyå‘¢ï¼Ÿå”¤é†’ä¹‹åï¼Œä»é˜»å¡çš„ä»£ç å¼€å§‹ç»§ç»­æ‰§è¡Œï¼Œè¿™æ ·å°±å¯ä»¥æˆåŠŸæ‰§è¡Œä¸‹å»äº†ã€‚éº»çƒ¦è€å¸ˆè§£ç­”ä¸€ä¸‹å“ˆï¼Œè°¢è°¢ã€‚","like_count":10,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467983,"discussion_content":"å”¤é†’åç›´æ¥æ‰§è¡Œä¸šåŠ¡ä»£ç ï¼Œåœ¨å“ªé‡Œé˜»å¡ï¼Œå”¤é†’åå°±åœ¨å“ªé‡Œç»§ç»­æ‰§è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568981736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1386371,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/NKKKlrmVDex70MuicAPLIQ4CVksVR1FvUrcvtJXq941iaichBDbYq3ViaXNYYWGtdo1JfRSLPvosEoL7h4QBmJ63UA/132","nickname":"jspkl","note":"","ucode":"E1527B0A24FC9B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374667,"discussion_content":"æˆ‘ä¹Ÿä¸€ç›´æ²¡æƒ³é€šè¿™é‡Œï¼Œä»¥ä¸ºé˜»å¡çš„çº¿ç¨‹å”¤é†’åè¿˜ä¼šç»§ç»­åˆ¤æ–­è®¡æ•°å™¨çš„å€¼ï¼Œè¿™æ ·å½“å¤§é‡çº¿ç¨‹æ¶Œè¿›æ¥çš„æ—¶å€™ï¼Œå½“è®¡æ•°å™¨å°äº0åï¼Œåç»­çš„çº¿ç¨‹æ°¸è¿œä¼šè¢«é˜»å¡åœ¨è¿™äº†ã€‚çœ‹äº†è€å¸ˆçš„å›å¤åï¼Œå”¤é†’åçš„çº¿ç¨‹ä¸å†åˆ¤æ–­è®¡æ•°å™¨ï¼Œå°±æƒ³é€šäº†ï¼ï¼","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1621307428,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2697700,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/LFJZ4x47rvShGhsePLIxc8EzdlBxAmVAIjJ2FQZ4NEpo8E4JCZQEOb2NIfOuiaQLL6Otkt7W3Rmu6Tv3AkgYdRA/132","nickname":"é”®ç›˜ä¸Šçš„é­”æœ¯","note":"","ucode":"A731D721FB8D3A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557167,"discussion_content":"å’Œwait()ï¼Œnotify()æ²¡å…³ç³»ï¼Œ çº¿ç¨‹é˜»å¡åå†å”¤é†’ï¼Œéƒ½æ˜¯ä»ä¹‹å‰æ‰§è¡Œåˆ°çš„åœ°æ–¹ç»§ç»­æ‰§è¡Œä¸‹å»ã€‚ åˆšæ‰ifåˆ¤æ–­è¿‡äº†ï¼Œåé¢ä¸ä¼šå†åˆ¤æ–­äº†ã€‚ ç®¡ç¨‹æ¨¡å‹é‡Œç”¨while()åˆ™æ˜¯è¿˜è¦å†åˆ¤æ–­ä¸‹ï¼Œä½†æœ¬è´¨ä¹Ÿæ˜¯ä»åˆšæ‰é˜»å¡åçš„ä»£ç ç»§ç»­æ‰§è¡Œã€‚ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647680593,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82867,"user_name":"crazypokerk","can_delete":false,"product_type":"c1","uid":1158383,"ip_address":"","ucode":"9AAD5D9726E503","user_header":"https://static001.geekbang.org/account/avatar/00/11/ac/ef/494f56c3.jpg","comment_is_top":false,"comment_ctime":1554341317,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"40209046981","product_id":100023901,"comment_content":"æ–‡ä¸­ï¼Œup()ï¼šè®¡æ•°å™¨çš„å€¼åŠ  1ï¼›å¦‚æœæ­¤æ—¶è®¡æ•°å™¨çš„å€¼å°äºæˆ–è€…ç­‰äº0ï¼Œè¿™å¥è¯åº”è¯¥æ˜¯å¤§äºç­‰äº0å§<br>","like_count":9,"discussions":[{"author":{"id":1138016,"avatar":"https://static001.geekbang.org/account/avatar/00/11/5d/60/38ea52c5.jpg","nickname":"Brightä¸¶","note":"","ucode":"B1DEA8C8100538","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2204,"discussion_content":"æ˜¯å°äºæˆ–è€…ç­‰äº0ï¼Œç†è®ºä¸Šï¼Œè´Ÿå¤šå°‘å°±æœ‰å¤šå°‘çº¿ç¨‹åœ¨ç­‰å¾…ï¼Œå¦‚æœå¤§äº0æ„å‘³ç€æ²¡æœ‰çº¿ç¨‹ç­‰å¾…ï¼Œé€šçŸ¥ä¹Ÿå°±æ²¡æœ‰äº†æ„ä¹‰","likes_number":14,"is_delete":false,"is_hidden":false,"ctime":1563353219,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2330905,"avatar":"https://static001.geekbang.org/account/avatar/00/23/91/19/6a3e7efc.jpg","nickname":"ç¨‹åºå‘˜9527","note":"","ucode":"1A1609F6BEAD84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380756,"discussion_content":"å‡å¦‚æœ‰105è¾†è½¦ï¼Œæ­¤æ—¶ä¿¡å·é‡ï¼ˆinit()æ–¹æ³•ï¼‰è®¾ç½®count = 100ï¼Œåªèƒ½åŒæ—¶ç»è¿‡100è¾†ï¼Œæ­¤æ—¶å‰é¢100è¾†è½¦ä¾æ¬¡è°ƒç”¨down()ï¼Œä¸€ç›´åˆ°ç¬¬101è¾†è½¦æ—¶ï¼Œcount = -1 ï¼Œå°äº0äº†ï¼Œåé¢çš„5è¾†è½¦è¢«é˜»å¡ï¼Œè¿™5è¾†è½¦æ˜¯åœ¨ç­‰å¾…çš„ï¼Œæ­¤æ—¶è¿™count = -5ï¼Œä»£è¡¨è¿˜æœ‰5è¾†è½¦åœ¨ç­‰å¾…ï¼Œè¿‡å»çš„è½¦å­å†è°ƒç”¨up()ï¼Œå”¤é†’åœ¨ç­‰å¾…çš„5è¾†è½¦ã€‚\nå‡å¦‚count> 0 ,è¯´æ˜æ­¤æ—¶å¯èƒ½å¹¶æ²¡æœ‰åŒæ—¶ç»è¿‡100è¾†è½¦ï¼Œå¯èƒ½åŒæ—¶ç»è¿‡çš„æ˜¯99è¾†ï¼Œä»£è¡¨åé¢å·²ç»æ²¡æœ‰è½¦åœ¨ç­‰äº†","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1624688928,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82863,"user_name":"crazypokerk","can_delete":false,"product_type":"c1","uid":1158383,"ip_address":"","ucode":"9AAD5D9726E503","user_header":"https://static001.geekbang.org/account/avatar/00/11/ac/ef/494f56c3.jpg","comment_is_top":false,"comment_ctime":1554340696,"is_pvip":false,"replies":[{"id":"30005","content":"å¼‚å¸¸éƒ½è¢«æˆ‘çœç•¥äº†ï¼Œè¿™æ ·ä»£ç æ›´èƒ½ä¸“æ³¨çš„è¡¨è¾¾é—®é¢˜ï¼Œå¦‚æœä½ æœ¬åœ°å®éªŒï¼ŒåŠ ä¸Šå°±å¯ä»¥äº†ã€‚æ‰‹æœºå±å¹•å¤ªå°ï¼ŒæŠ˜è¡Œåè¡Œæ•°å¤ªå¤šï¼Œçœ‹åˆ°åé¢å¿˜äº†å‰é¢ï¼Œæ‰€ä»¥æˆ‘å°½è®²ç²¾ç‚¼ä»£ç <br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554431608,"ip_address":"","comment_id":82863,"utype":1}],"discussion_count":4,"race_medal":0,"score":"35914079064","product_id":100023901,"comment_content":"è€å¸ˆï¼Œé‚£ä¸ªè®¡æ•°å™¨ä¸­å¾—s.acquire()æ˜¯éœ€è¦æ•è·å¼‚å¸¸çš„ã€‚<br>static int count;<br>    static final Semaphore s = new Semaphore(1);<br><br>    static void addOne() throws InterruptedException {<br>        s.acquire();<br>        try {<br>            count += 1;<br>        }finally {<br>            s.release();<br>        }<br>    }","like_count":8,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445752,"discussion_content":"å¼‚å¸¸éƒ½è¢«æˆ‘çœç•¥äº†ï¼Œè¿™æ ·ä»£ç æ›´èƒ½ä¸“æ³¨çš„è¡¨è¾¾é—®é¢˜ï¼Œå¦‚æœä½ æœ¬åœ°å®éªŒï¼ŒåŠ ä¸Šå°±å¯ä»¥äº†ã€‚æ‰‹æœºå±å¹•å¤ªå°ï¼ŒæŠ˜è¡Œåè¡Œæ•°å¤ªå¤šï¼Œçœ‹åˆ°åé¢å¿˜äº†å‰é¢ï¼Œæ‰€ä»¥æˆ‘å°½è®²ç²¾ç‚¼ä»£ç \n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554431608,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1440772,"avatar":"https://static001.geekbang.org/account/avatar/00/15/fc/04/d83a555e.jpg","nickname":"Kevinâš¡ï¸Zhou","note":"","ucode":"C0FC2673705212","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":189058,"discussion_content":"è¯·é—®count+=1ä¸ºä»€ä¹ˆéœ€è¦try block?\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582851145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2617045,"avatar":"https://static001.geekbang.org/account/avatar/00/27/ee/d5/95e193c9.jpg","nickname":"å¸é©¬è£† Â· éœç›ä¼Š","note":"","ucode":"FC5BCB8165EA4E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1440772,"avatar":"https://static001.geekbang.org/account/avatar/00/15/fc/04/d83a555e.jpg","nickname":"Kevinâš¡ï¸Zhou","note":"","ucode":"C0FC2673705212","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376893,"discussion_content":"æ€•æ•´å‹æº¢å‡ºå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622395033,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":189058,"ip_address":""},"score":376893,"extra":""},{"author":{"id":2697700,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/LFJZ4x47rvShGhsePLIxc8EzdlBxAmVAIjJ2FQZ4NEpo8E4JCZQEOb2NIfOuiaQLL6Otkt7W3Rmu6Tv3AkgYdRA/132","nickname":"é”®ç›˜ä¸Šçš„é­”æœ¯","note":"","ucode":"A731D721FB8D3A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1440772,"avatar":"https://static001.geekbang.org/account/avatar/00/15/fc/04/d83a555e.jpg","nickname":"Kevinâš¡ï¸Zhou","note":"","ucode":"C0FC2673705212","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557168,"discussion_content":"åŠ é”ä»£ç çš„èŒƒå¼ï¼Œä¹ æƒ¯é—®é¢˜ï¼Œä¿è¯finallyé‡Œå¯ä»¥é‡Šæ”¾é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647680718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":189058,"ip_address":""},"score":557168,"extra":""}]}]},{"had_liked":false,"id":83896,"user_name":"ken","can_delete":false,"product_type":"c1","uid":1048245,"ip_address":"","ucode":"A43E42B541624D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fe/b5/df0f658f.jpg","comment_is_top":false,"comment_ctime":1554730571,"is_pvip":false,"replies":[{"id":"30311","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554772822,"ip_address":"","comment_id":83896,"utype":1}],"discussion_count":2,"race_medal":0,"score":"31619501643","product_id":100023901,"comment_content":"<br>public class Food {<br><br>    public String name;<br><br>    private long warmTime;<br><br>    public Food(String name, long warmTime) {<br>        this.name = name;<br>        this.warmTime = warmTime;<br>    }<br><br>    public String getName() {<br>        return name;<br>    }<br><br>    public long getWarmTime() {<br>        return warmTime;<br>    }<br>}<br><br><br><br>public class MicrowaveOven {<br><br>    public String name;<br><br>    public MicrowaveOven(String name) {<br>        this.name = name;<br>    }<br><br>    public Food warm(Food food) {<br>        long second = food.getWarmTime() * 1000;<br>        try {<br>            Thread.sleep(second);<br>        } catch (InterruptedException e) {<br>            e.printStackTrace();<br>        }<br><br>        System.out.println(String.format(&quot;%s warm %s %d seconds food.&quot;, name,food.getName() ,food.getWarmTime()));<br>        return food;<br>    }<br><br>    public String getName() {<br>        return name;<br>    }<br>}<br>public class MicrowaveOvenPool {<br><br>    private List&lt;MicrowaveOven&gt; microwaveOvens;<br><br>    private Semaphore semaphore;<br><br>    public MicrowaveOvenPool(int size,@NotNull List&lt;MicrowaveOven&gt; microwaveOvens) {<br>        this.microwaveOvens = new Vector&lt;&gt;(microwaveOvens);<br>        this.semaphore = new Semaphore(size);<br>    }<br>    public Food exec(Function&lt;MicrowaveOven, Food&gt; func) {<br>        MicrowaveOven microwaveOven = null;<br>        try{<br>            semaphore.acquire();<br>            microwaveOven = microwaveOvens.remove(0);<br>            return func.apply(microwaveOven);<br>        }catch (InterruptedException e) {<br>            e.printStackTrace();<br>        } finally {<br>            microwaveOvens.add(microwaveOven);<br>            semaphore.release();<br>        }<br>        return null;<br>    }<br><br>}<br>","like_count":7,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446175,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554772822,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2349472,"avatar":"","nickname":"å‘†å‘†","note":"","ucode":"8DB23A69E063F7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343014,"discussion_content":"ä½ å¥½ï¼Œä»£ç ä¸­åŠ çƒ­é€»è¾‘çš„sleepéš¾é“ä¸ä¼šè®©å‡ºcpuç»™å…¶ä»–èµ„æºå˜›ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610908260,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84217,"user_name":"é•¿çœ‰_å¼ æ°¸","can_delete":false,"product_type":"c1","uid":1442279,"ip_address":"","ucode":"B3DCA68BDD473E","user_header":"https://static001.geekbang.org/account/avatar/00/16/01/e7/091804b7.jpg","comment_is_top":false,"comment_ctime":1554806826,"is_pvip":false,"replies":[{"id":"30392","content":"éœ€è¦","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554819893,"ip_address":"","comment_id":84217,"utype":1}],"discussion_count":2,"race_medal":0,"score":"27324610602","product_id":100023901,"comment_content":"å¯¹äºè¿›å…¥çš„å¤šä¸ªçº¿ç¨‹èµ„æºä¹‹é—´ï¼Œå¦‚æœæœ‰å…¬ç”¨çš„ä¿¡æ¯çš„è¯ï¼Œæ˜¯å¦è¿˜éœ€è¦åŠ é”æ“ä½œå‘¢ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446282,"discussion_content":"éœ€è¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554819893,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2697700,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/LFJZ4x47rvShGhsePLIxc8EzdlBxAmVAIjJ2FQZ4NEpo8E4JCZQEOb2NIfOuiaQLL6Otkt7W3Rmu6Tv3AkgYdRA/132","nickname":"é”®ç›˜ä¸Šçš„é­”æœ¯","note":"","ucode":"A731D721FB8D3A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557166,"discussion_content":"è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¦ç”¨Vectorè€Œä¸æ˜¯ArrayListçš„åŸå› ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647680181,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":111092,"user_name":"å€šæ¢¦æµ","can_delete":false,"product_type":"c1","uid":1435045,"ip_address":"","ucode":"7CB442D629534B","user_header":"https://static001.geekbang.org/account/avatar/00/15/e5/a5/fae40ac3.jpg","comment_is_top":false,"comment_ctime":1562470323,"is_pvip":false,"replies":[{"id":"40419","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1562478618,"ip_address":"","comment_id":111092,"utype":1}],"discussion_count":4,"race_medal":0,"score":"23037306803","product_id":100023901,"comment_content":"é™æµå™¨ï¼ŒåŸºäºè€å¸ˆçš„ä»£ç ï¼Œè‡ªå·±æ‰‹åŠ¨å®Œå–„äº†ä¸€ä¸‹ã€‚<br>package com.thread.demo;<br><br>import java.util.List;<br>import java.util.Vector;<br>import java.util.concurrent.Semaphore;<br>import java.util.function.Function;<br><br>public class ObjPool&lt;T,R&gt; {<br>    private List&lt;T&gt; pool;<br>    &#47;&#47;ä½¿ç”¨ä¿¡å·é‡å®ç°é™æµå™¨<br>    private final Semaphore semaphore;<br><br><br>    ObjPool(T[] tArray){<br>        pool=new Vector&lt;T&gt;(){};<br>        int size=tArray.length;<br>        for(int i=0;i&lt;size;i++){<br>            pool.add(tArray[i]);<br>        }<br>        semaphore=new Semaphore(size);<br>    }<br><br>    R exec(Function&lt;T,R&gt; func) throws InterruptedException {<br>        T t=null;<br>        semaphore.acquire();<br>        try{<br>            t=pool.remove(0);<br>            return func.apply(t);<br>        }finally {<br>            pool.add(t);<br>            semaphore.release();<br>        }<br>    }<br><br>    public static void main(String[] args){<br>        String[] messages=new String[10];<br>        for(int i=0;i&lt;10;i++){<br>            messages[i]=&quot;obj_&quot;+i;<br>        }<br>        ObjPool&lt;String,String&gt; pool=new ObjPool&lt;&gt;(messages );<br><br>        for(int i=0;i&lt;100;i++){<br>            Thread thread=new Thread(() -&gt;{<br>                try {<br>                    pool.exec(t -&gt; {<br>                        System.out.println(&quot;å½“å‰çº¿ç¨‹id:&quot;+Thread.currentThread().getId()+&quot;,å½“å‰è·å–åˆ°çš„å¯¹è±¡ï¼š&quot;+t);<br>                        return  t;<br>                    });<br>                } catch (InterruptedException e) {<br>                    e.printStackTrace();<br>                }<br>            });<br>            thread.start();<br>            try {<br>                thread.join();<br>            } catch (InterruptedException e) {<br>                e.printStackTrace();<br>            }<br>        }<br><br>    }<br><br><br>}<br>","like_count":5,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457224,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562478618,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1934694,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/waRzibso0x6xML85EqngrIiasYzItRsZkkz8ZLqdciadFmSMiaia12MGQMBBliahMBTR5sEjVL0dvibMsJXdsuAYIicKXA/132","nickname":"é¢œæ°","note":"","ucode":"C5EDBC1AA62CCF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575781,"discussion_content":" thread.join();æœ‰ç‚¹é—®é¢˜å•Šï¼ŒåŒä¸€æ—¶é—´åªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655106585,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1618328,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b1/98/11b22d79.jpg","nickname":"çµ†","note":"","ucode":"52D965461314DB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369784,"discussion_content":"æµ‹è¯•æ–¹æ³•åŠ æ·±ç†è§£ï¼ŒğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619155986,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1030449,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b9/31/636e9007.jpg","nickname":"melo","note":"","ucode":"BF381B18E75867","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285029,"discussion_content":"thread.join();å¯ä»¥ç”¨CountDownLatch(n)ä»£æ›¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592717728,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95441,"user_name":"Mr Q.","can_delete":false,"product_type":"c1","uid":1330435,"ip_address":"","ucode":"A9BED15092B769","user_header":"https://static001.geekbang.org/account/avatar/00/14/4d/03/01c5de8f.jpg","comment_is_top":false,"comment_ctime":1558056659,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23032893139","product_id":100023901,"comment_content":"åˆ›å»ºå¯¹è±¡æ± çš„æ—¶å€™éƒ½æ˜¯æ·»åŠ çš„åŒä¸€ä¸ªå¯¹è±¡ã€‚","like_count":5},{"had_liked":false,"id":82820,"user_name":"å°å’Œå°šç¬¨å—åŒ—","can_delete":false,"product_type":"c1","uid":1204628,"ip_address":"","ucode":"17C9BBB6DD25D2","user_header":"https://static001.geekbang.org/account/avatar/00/12/61/94/713b38ef.jpg","comment_is_top":false,"comment_ctime":1554335683,"is_pvip":false,"replies":[{"id":"30074","content":"ä¸å¯ä»¥ï¼Œæœ‰å¤šä¸ªçº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒº","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554479430,"ip_address":"","comment_id":82820,"utype":1}],"discussion_count":4,"race_medal":0,"score":"23029172163","product_id":100023901,"comment_content":"semaphoreåº•å±‚é€šè¿‡AQSå®ç°ï¼ŒAQSå†…éƒ¨é€šè¿‡ä¸€ä¸ªvolatileå˜é‡é—´æ¥å®ç°åŒæ­¥ã€‚<br>æ ¹æ®happen-beforeåŸåˆ™çš„volatileè§„åˆ™å’Œä¼ é€’æ€§è§„åˆ™ã€‚ä½¿ç”¨arraylistä¹Ÿä¸ä¼šå‘ç”Ÿçº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚","like_count":5,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445737,"discussion_content":"ä¸å¯ä»¥ï¼Œæœ‰å¤šä¸ªçº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554479430,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1441569,"avatar":"https://static001.geekbang.org/account/avatar/00/15/ff/21/8815d2e5.jpg","nickname":"äº®å­","note":"","ucode":"DF37D5E0714D02","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543978,"discussion_content":"listæœ‰add  removeæ“ä½œï¼Œä¸ç”¨çº¿ç¨‹å®‰å…¨çš„ä¸å¯ä»¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641371900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2046055,"avatar":"","nickname":"æœæ€»","note":"","ucode":"C6600875A265E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286982,"discussion_content":"ä¸€å®šè¦ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„listå•Šï¼ŒArrayList,LinkedListéƒ½æ˜¯ä¸å®‰å…¨çš„ï¼Œsemaphoreåªæ˜¯ä¸€ä¸ªé™æµå™¨ï¼Œæ˜¯å…±äº«é”ï¼Œå¤šä¸ªçº¿ç¨‹ä¼šæ‰§è¡Œremoveæ“ä½œï¼Œé‚£å°±æœ‰æˆ‘é—®é¢˜äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593340507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2308075,"avatar":"","nickname":"Geek_89e362","note":"","ucode":"E596C2CFE1CFAF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2046055,"avatar":"","nickname":"æœæ€»","note":"","ucode":"C6600875A265E7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327120,"discussion_content":"ä¸æ˜¯ä¸å¯ç”¨ï¼Œå¦‚æœä½¿ç”¨ ArrayListæˆ–è€…LinkedListåº”è¯¥æ˜¯éœ€è¦åŠ é”å¤„ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605750240,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":286982,"ip_address":""},"score":327120,"extra":""}]}]},{"had_liked":false,"id":84201,"user_name":"æœ¨å¶äººKing","can_delete":false,"product_type":"c1","uid":1028805,"ip_address":"","ucode":"0BDCA51E6F0B76","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b2/c5/6ae0be56.jpg","comment_is_top":false,"comment_ctime":1554802541,"is_pvip":false,"replies":[{"id":"30401","content":"å®é™…é¡¹ç›®ä¸­ä¸€å®šæ˜¯ä¸åŒçš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554821785,"ip_address":"","comment_id":84201,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18734671725","product_id":100023901,"comment_content":"ObjPool(int size, T t){<br>    pool = new Vector&lt;T&gt;(){};<br>    for(int i=0; i&lt;size; i++){<br>      pool.add(t);<br>    }<br>    sem = new Semaphore(size);<br>  }<br> &#47;&#47;--------------------------------<br><br>è€å¸ˆè¿™é‡Œpool.add(t)  ä¸€ç›´å¾ªç¯æ·»åŠ çš„æ˜¯åŒä¸€ä¸ªå¼•ç”¨å¯¹è±¡ã€‚æ²¡å¤ªæ˜ç™½ã€‚ ä¸ºä»€ä¹ˆä¸æ˜¯æ·»åŠ ä¸åŒçš„t ","like_count":4,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446278,"discussion_content":"å®é™…é¡¹ç›®ä¸­ä¸€å®šæ˜¯ä¸åŒçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554821785,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82858,"user_name":"master","can_delete":false,"product_type":"c1","uid":1245550,"ip_address":"","ucode":"E525135E4C7639","user_header":"https://static001.geekbang.org/account/avatar/00/13/01/6e/a217a0f6.jpg","comment_is_top":false,"comment_ctime":1554340100,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18734209284","product_id":100023901,"comment_content":"è€å¸ˆï¼Œvoid  up()æ–¹æ³•ä¸­çš„this.countåˆ¤æ–­æ¡ä»¶æ˜¯å¦åº”è¯¥ä¸º&gt;=0","like_count":4,"discussions":[{"author":{"id":1319732,"avatar":"https://static001.geekbang.org/account/avatar/00/14/23/34/3c6ed163.jpg","nickname":"lacan","note":"","ucode":"9DA87E3D69B45E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":143448,"discussion_content":"åŠè·¯å‡ºå®¶ä¹‹å‰ä¹Ÿæœ‰ç–‘é—®, ç½‘ä¸Šæœä¸€ä¸‹å°±æ˜ç™½äº†, ç™¾åº¦ `Semaphore down up`","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579507711,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83317,"user_name":"å—å±±","can_delete":false,"product_type":"c1","uid":1119593,"ip_address":"","ucode":"94656FE4A6C378","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/69/187b9968.jpg","comment_is_top":false,"comment_ctime":1554531381,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"14439433269","product_id":100023901,"comment_content":"ä¸å¯ä»¥ï¼Œä¸´ç•ŒåŒºä¼šæœ‰å¤šä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œ","like_count":3},{"had_liked":false,"id":83218,"user_name":"QQæ€ª","can_delete":false,"product_type":"c1","uid":1211223,"ip_address":"","ucode":"1A39B8433D9208","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","comment_is_top":false,"comment_ctime":1554470793,"is_pvip":false,"replies":[{"id":"30069","content":"å¦‚æœä»…ä»…æ˜¯ä¸ºäº†äº’æ–¥ï¼Œéƒ½å¯ä»¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554479076,"ip_address":"","comment_id":83218,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14439372681","product_id":100023901,"comment_content":"ç”¨åˆå§‹åŒ–ä¸º1çš„Semaphoreå’Œç®¡ç¨‹æ¥å•å•æ§åˆ¶çº¿ç¨‹å®‰å…¨ï¼Œå“ªä¸ªæ›´æœ‰ä¼˜åŠ¿ï¼Ÿä¸ºå•¥javaä¸ç›´æ¥ç”¨ä¿¡å·é‡æ¥å®ç°äº’æ–¥?","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445923,"discussion_content":"å¦‚æœä»…ä»…æ˜¯ä¸ºäº†äº’æ–¥ï¼Œéƒ½å¯ä»¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554479076,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1580837,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1f/25/6e913101.jpg","nickname":"æ¥ çˆ¸","note":"","ucode":"2D4DDB32E9C4E9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":184942,"discussion_content":"åº”è¯¥ä¸èƒ½ç”¨listå§ï¼Œå¤šä¸ªçº¿ç¨‹ä¼šåŒæ—¶æ‰§è¡Œå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582589831,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83066,"user_name":"Presley","can_delete":false,"product_type":"c1","uid":1215219,"ip_address":"","ucode":"D8F125835F4903","user_header":"https://static001.geekbang.org/account/avatar/00/12/8a/f3/7c89d00e.jpg","comment_is_top":false,"comment_ctime":1554390608,"is_pvip":false,"replies":[{"id":"30006","content":"ğŸ‘ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554431652,"ip_address":"","comment_id":83066,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14439292496","product_id":100023901,"comment_content":"è¿›å…¥ä¸´ç•ŒåŒºçš„Nä¸ªçº¿ç¨‹ä¸å®‰å…¨ã€‚add&#47;removeéƒ½æ˜¯ä¸å®‰å…¨çš„ã€‚æ‹¿removeä¸¾ä¾‹, ArrayList remove()æºç ï¼š<br>public E remove(int index) {<br>        rangeCheck(index);<br><br>        modCount++;<br>       <br>        &#47;&#47; å‡è®¾è¿ä¸ªçº¿ç¨‹ t1,t2éƒ½æ‰§è¡Œåˆ°è¿™ä¸€æ­¥ï¼Œt1 è®©å‡ºcpu,t2æ‰§è¡Œ<br>        E oldValue = elementData(index);<br>        &#47;&#47; åˆ°è¿™æ­¥,t1ç»§ç»­æ‰§è¡Œï¼Œè¿™æ—¶t1,t2æ‹¿åˆ°çš„oldValueæ˜¯ä¸€æ ·çš„ï¼Œä¸¤ä¸ªçº¿ç¨‹èƒ½æ‹¿åˆ°åŒä¸€ä¸ªå¯¹è±¡ï¼Œæ˜æ˜¾çº¿ç¨‹ä¸å®‰å…¨å•Š<br><br>        int numMoved = size - index - 1;<br>        if (numMoved &gt; 0)<br>            System.arraycopy(elementData, index+1, elementData, index,<br>                             numMoved);<br>        elementData[--size] = null; &#47;&#47; clear to let GC do its work<br><br>        return oldValue;<br>    }<br>","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445843,"discussion_content":"ğŸ‘ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554431652,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158078,"user_name":"æ¢¦å€šæ æ†","can_delete":false,"product_type":"c1","uid":1095857,"ip_address":"","ucode":"BDEB97F2822445","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/bvj76PmeUvW8kokyu91IZWuRATKmabibDWbzAj2TajeEic7WvKCJOLaOh6jibEmdQ36EO3sBUZ0HibAiapsrZo64U8w/132","comment_is_top":false,"comment_ctime":1575326609,"is_pvip":false,"replies":[{"id":"60747","content":"ä¸ä¼šï¼Œæ‰€ä»¥ä¸€æ—¦å‘ç”Ÿæ­»é”ï¼Œå¾€å¾€åªèƒ½é‡å¯","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1575463288,"ip_address":"","comment_id":158078,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10165261201","product_id":100023901,"comment_content":"å¦‚æœä¸€ä¸ªçº¿ç¨‹ä¸€ç›´åœ¨ç¡çœ ä¸è¢«å”¤é†’å‘¢ï¼Ÿè¿™ä¸ªçº¿ç¨‹ä¼šç»è¿‡ä¸€å®šæ—¶é—´è‡ªå·±æ¶ˆäº¡å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476623,"discussion_content":"ä¸ä¼šï¼Œæ‰€ä»¥ä¸€æ—¦å‘ç”Ÿæ­»é”ï¼Œå¾€å¾€åªèƒ½é‡å¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575463288,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83134,"user_name":"æ˜“å„¿æ˜“","can_delete":false,"product_type":"c1","uid":1242864,"ip_address":"","ucode":"B15D1031CA841E","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqLcWH3mSPmhjrs1aGL4b3TqI7xDqWWibM4nYFrRlp0z7FNSWaJz0mqovrgIA7ibmrPt8zRScSfRaqQ/132","comment_is_top":false,"comment_ctime":1554433169,"is_pvip":false,"replies":[{"id":"30067","content":"å¿…é¡»æˆå¯¹å‡ºç°ï¼Œæ‰€ä»¥æ‰ç”¨try finally ","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554478912,"ip_address":"","comment_id":83134,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10144367761","product_id":100023901,"comment_content":"è®¡æ•°å™¨å€¼å°äº0ï¼Œçº¿ç¨‹ä¼šé˜»å¡å¹¶è¿›å…¥é˜Ÿåˆ—ï¼Œå¦‚æœè®¡æ•°å™¨å€¼å¤§äºåˆå§‹å€¼å‘¢ï¼Ÿæˆ‘ä»£ç æµ‹è¯•äº†ä¸€ä¸‹ï¼Œæ‰§è¡Œèµ·æ¥æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ€»è§‰å¾—æœ‰äº›ä¸å¤ªé è°±â€¦â€¦è¯·é—®è€å¸ˆï¼šä¿¡å·é‡çš„ä½¿ç”¨è§„èŒƒæ˜¯ä¸æ˜¯å¾—è¦æ±‚acquire()release()å¿…é¡»æˆå¯¹å‡ºç°å¹¶ä¿è¯release()é¡ºåˆ©æ‰§è¡Œï¼Ÿå¦åˆ™ç‹¬ç«‹çš„acquire()å°±èƒ½ä½¿è®¡æ•°å™¨å€¼å¤§äºåˆå§‹å€¼ï¼Œå¯èƒ½ä¼šå¼•å…¥BUGï¼ˆå¯¼è‡´çº¿ç¨‹æ•°å¤šä½™æ± ä¸­é™å®šçš„æ•°é‡ï¼‰ï¼Œä¸è¿‡è¿™ä¸ªä¹Ÿæœ‰å¥½å¤„ï¼Œè²Œä¼¼ä¹Ÿå¯ä»¥èµ·åˆ°åŠ¨æ€è°ƒæ•´semaphoreåˆå§‹å€¼çš„ä½œç”¨ã€‚è€å¸ˆæˆ‘æ²¡æœ‰å¹¶å‘å¼€å‘ç»éªŒï¼Œåªæ˜¯æ ¹æ®ä¸“æ å†…æœ‰é™å†…å®¹æ€è€ƒï¼Œä¸çŸ¥é“æˆ‘çš„æƒ³æ³•å¯¹ä¸å¯¹ï¼Œæœ‰æ²¡æœ‰å®é™…æ„ä¹‰ã€‚è¯·æŒ‡æ•™~","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445878,"discussion_content":"å¿…é¡»æˆå¯¹å‡ºç°ï¼Œæ‰€ä»¥æ‰ç”¨try finally ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554478912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":346495,"user_name":"Bumblebee","can_delete":false,"product_type":"c1","uid":2051293,"ip_address":"","ucode":"B879C8A511D08D","user_header":"https://static001.geekbang.org/account/avatar/00/1f/4c/dd/c6035349.jpg","comment_is_top":false,"comment_ctime":1653199011,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5948166307","product_id":100023901,"comment_content":"ä»Šæ—¥æ€»ç»“ï¼Œæ€»ç»“çš„ä¸å¯¹çš„å¸Œæœ›è€å¸ˆåŒå­¦ä»¬å¤šå¤šæŒ‡æ­£ã€‚<br><br>ä¸€ã€ä¿¡å·é‡æ¨¡å‹ã€‚<br>â‘   ä¸€ä¸ªè®¡æ•°å™¨ï¼›<br>â‘¡  ä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—ï¼›<br>â‘¢  ä¸‰ä¸ªæ–¹æ³•ï¼›<br>      1ï¼‰initè®¾ç½®è®¡æ•°å™¨çš„åˆå§‹å€¼ï¼ˆç›¸å½“äºèµ„æºæ•°ï¼Œå¯¹åº”ä¿¡å·é‡ï¼‰ï¼›<br>      2ï¼‰downè®¡æ•°å™¨çš„å€¼å‡1ï¼Œå¦‚æœæ­¤æ—¶è®¡æ•°å™¨çš„å€¼å°äº0å½“å‰çº¿ç¨‹è¢«é˜»å¡ï¼Œå¦åˆ™å½“å‰çº¿ç¨‹ç»§ç»­æ‰§è¡Œï¼ˆå¯¹åº”PVæ“ä½œä¸­çš„Pæ“ä½œï¼‰ï¼›<br>     3ï¼‰upè®¡æ•°å™¨åŠ 1ï¼Œå¦‚æœæ­¤æ—¶è®¡æ•°å™¨çš„å€¼å°äºæˆ–ç­‰äº0ï¼Œåˆ™å”¤é†’ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ä¸€ä¸ªçº¿ç¨‹ï¼Œå¹¶å°†å…¶ä»ç­‰å¾…é˜Ÿåˆ—ä¸­ç§»é™¤ï¼ˆå¯¹å‘€PVæ“ä½œä¸­çš„Væ“ä½œï¼‰ï¼›<br><br>äºŒã€æ”¶è·<br>â‘   ä¿¡å·é‡PVæ“ä½œç§»åŠ¨è¦æˆå¯¹å‡ºç°ï¼Œè€Œä¸”Pæ“ä½œä¸€å®šè¦å…ˆä¸Væ“ä½œï¼Œè¿™æ ·PVæ“ä½œä¸­çš„åˆ¤æ–­æ‰ä¸ä¼šå‡ºç°è®¡æ•°å™¨å¤§äºï¼ˆåˆå§‹å€¼  å‡ 1ï¼‰çš„æƒ…å†µã€‚<br>","like_count":1},{"had_liked":false,"id":286994,"user_name":"æ—¶å…‰å®ˆæŠ¤è€…-åŸºå…°","can_delete":false,"product_type":"c1","uid":1554995,"ip_address":"","ucode":"F0B0887B1979D2","user_header":"https://static001.geekbang.org/account/avatar/00/17/ba/33/2d83d174.jpg","comment_is_top":false,"comment_ctime":1617719597,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5912686893","product_id":100023901,"comment_content":"è€å¸ˆï¼Œä¿¡å·é‡æ¨¡å‹çš„Semaphoreå®ç°ä¸­æ‚¨æåˆ°init()ã€down() å’Œ up() ä¸‰ä¸ªæ–¹æ³•éƒ½æ˜¯åŸå­æ€§ï¼Œé‚£å‡å¦‚æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œSemaphoreä¸­çš„countï¼Œå¯è§æ€§æ˜¯æ€ä¹ˆä¿è¯çš„å‘¢","like_count":1},{"had_liked":false,"id":264310,"user_name":"Monday","can_delete":false,"product_type":"c1","uid":1250907,"ip_address":"","ucode":"77B9BACC783598","user_header":"https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg","comment_is_top":false,"comment_ctime":1606435815,"is_pvip":false,"replies":[{"id":"95894","content":"ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1606492142,"ip_address":"","comment_id":264310,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5901403111","product_id":100023901,"comment_content":"æ€è€ƒé¢˜ï¼š<br>Vectoræ¢æˆArrayListä¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œé—®é¢˜å‡ºç°åœ¨pool.remove()å’Œpool.add()æ–¹æ³•è°ƒç”¨æ—¶ã€‚","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510512,"discussion_content":"ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606492142,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1250907,"avatar":"https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg","nickname":"Monday","note":"","ucode":"77B9BACC783598","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":330286,"discussion_content":"è€å¸ˆçš„ç•™è¨€ï¼Œä¹±ç äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606555138,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":230115,"user_name":"è¥¿é—¨å¹ç‰›","can_delete":false,"product_type":"c1","uid":1508990,"ip_address":"","ucode":"E5D3624DDE1E83","user_header":"https://static001.geekbang.org/account/avatar/00/17/06/7e/735968e2.jpg","comment_is_top":false,"comment_ctime":1593266671,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5888233967","product_id":100023901,"comment_content":"é’ˆå¯¹upæ“ä½œå°äºç­‰äº0ï¼Œæ˜¯åœ¨åŠ ä¸€ä¹‹ååˆ¤æ–­æ˜¯å¦å°äºç­‰äº0ï¼Œä¼°è®¡å¾ˆå¤šäººï¼Œéƒ½æ˜¯è§‰å¾—ç­‰äº0ï¼Œå”¤é†’ç­‰å¾…é˜Ÿåˆ—æœ‰ç–‘é—®ï¼Œå…¶å®ç­‰äº0æ˜¯ä»è´Ÿä¸€åŠ è¿‡å»çš„ï¼Œæ—¢ç„¶æ˜¯è´Ÿä¸€ï¼Œè‚¯å®šæ˜¯æœ‰çº¿ç¨‹é˜»å¡ï¼Œåªè¦æ˜¯è´Ÿçš„ï¼Œå¿…ç„¶æœ‰é˜»å¡çš„çº¿ç¨‹ï¼Œè¿™é‡Œupä¹‹ååŠ 1ï¼Œå¦‚æœå°äºç­‰äº0ï¼Œå¿…ç„¶æœ‰é˜»å¡çš„çº¿ç¨‹éœ€è¦è¢«å”¤é†’","like_count":1},{"had_liked":false,"id":109416,"user_name":"å¤å¤œ","can_delete":false,"product_type":"c1","uid":1341612,"ip_address":"","ucode":"0A82D3CFCEDF07","user_header":"https://static001.geekbang.org/account/avatar/00/14/78/ac/e5e6e7f3.jpg","comment_is_top":false,"comment_ctime":1562030764,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5856998060","product_id":100023901,"comment_content":"åœ¨ä¿¡å·é‡æ¨¡å‹é‡Œï¼Œè®¡æ•°å™¨å’Œç­‰å¾…é˜Ÿåˆ—å¯¹å¤–æ˜¯é€æ˜çš„ï¼Œæ‰€ä»¥åªèƒ½é€šè¿‡ä¿¡å·é‡æ¨¡å‹æä¾›çš„ä¸‰ä¸ªæ–¹æ³•æ¥è®¿é—®å®ƒä»¬ï¼Œè¿™ä¸‰ä¸ªæ–¹æ³•åˆ†åˆ«æ˜¯ï¼šinit()ã€down() å’Œ up()ã€‚<br><br>è¿™é‡Œåº”è¯¥æ˜¯ä¸é€æ˜å§ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":2899368,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/3d/a8/6ed7aaad.jpg","nickname":"å•¤é…’é…é¸­è„–","note":"","ucode":"860FC0887FF88C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549605,"discussion_content":"è¿™é‡Œçš„é€æ˜åº”è¯¥å°±æ˜¯ä¸å¯è§çš„æ„æ€ï¼Œinvisible","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644120988,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108934,"user_name":"æ¨é¹ç¨‹baci","can_delete":false,"product_type":"c1","uid":1205949,"ip_address":"","ucode":"3D22F6B74340A8","user_header":"https://static001.geekbang.org/account/avatar/00/12/66/bd/bd5d503e.jpg","comment_is_top":false,"comment_ctime":1561939913,"is_pvip":false,"replies":[{"id":"53937","content":"å®ç°å°±ç•™ç»™æœ‰å…´è¶£çš„åŒå­¦å§","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1570717907,"ip_address":"","comment_id":108934,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5856907209","product_id":100023901,"comment_content":"è€å¸ˆï¼Œè¿™ä¸€èŠ‚æ„Ÿè§‰æœ‰äº›å†…å®¹æ²¡æœ‰è®²å…¨ï¼Œsemaphoreä¸­çº¿ç¨‹çš„ç­‰å¾…å”¤é†’æœºåˆ¶æ˜¯ä¸æ˜¯è¿˜æ˜¯ç”¨åˆ°äº†waitå’Œsiganalæ–¹æ³•ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456172,"discussion_content":"å®ç°å°±ç•™ç»™æœ‰å…´è¶£çš„åŒå­¦å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570717907,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":87471,"user_name":"roaming","can_delete":false,"product_type":"c1","uid":1039232,"ip_address":"","ucode":"2736679690AB81","user_header":"https://static001.geekbang.org/account/avatar/00/0f/db/80/6b7629d7.jpg","comment_is_top":false,"comment_ctime":1555601405,"is_pvip":false,"replies":[{"id":"31471","content":"ä¿¡å·é‡æ¨¡å‹æ˜¯ç”¨å®ƒå®ç°çš„ï¼Œå¤ªåº•å±‚çš„ä¸œè¥¿éƒ½ä¸æ˜¯ç»™æ™®é€šäººç”¨çš„<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1555633322,"ip_address":"","comment_id":87471,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5850568701","product_id":100023901,"comment_content":"è€å¸ˆï¼ŒLockSupportç”¨çš„ä¹Ÿæ˜¯ä¿¡å·é‡æ¨¡å‹ï¼Œå¯¹å—ï¼Ÿä¸“æ é‡Œæ²¡æœ‰æåˆ°è¿™ä¸ªå·¥å…·ç±»ï¼Œæ˜¯ä¸å¸¸ç”¨å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447469,"discussion_content":"ä¿¡å·é‡æ¨¡å‹æ˜¯ç”¨å®ƒå®ç°çš„ï¼Œå¤ªåº•å±‚çš„ä¸œè¥¿éƒ½ä¸æ˜¯ç»™æ™®é€šäººç”¨çš„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555633322,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84876,"user_name":"å¤šè¥„ä¸¸","can_delete":false,"product_type":"c1","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1554942596,"is_pvip":false,"replies":[{"id":"30598","content":"åŒæ ·æ„Ÿè°¢æ”¯æŒï¼ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554999609,"ip_address":"","comment_id":84876,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5849909892","product_id":100023901,"comment_content":"æˆ‘åªæƒ³è¯´ï¼ŒçœŸçš„è®²çš„å¾ˆèµï¼<br><br>æ¸…æ˜èŠ‚ååˆ°ç°åœ¨ä¸€ç›´åœ¨å¿™å…¶ä»–çš„ï¼Œä»Šå¤©æ—©ä¸Šæ‰è¡¥äº†ä¸€èŠ‚ï¼ŒçœŸçš„å¾ˆèµï¼ <br><br>è°¢è°¢è€å¸ˆè§£å¼€äº†æˆ‘ä¸€ç›´ä»¥æ¥çš„ç–‘æƒ‘ï¼Œè°¢è°¢æ‚¨ï¼","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446482,"discussion_content":"åŒæ ·æ„Ÿè°¢æ”¯æŒï¼ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554999609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354969,"user_name":"é¡¾è¨€","can_delete":false,"product_type":"c1","uid":1184481,"ip_address":"åŒ—äº¬","ucode":"79DDEDCADD1F49","user_header":"https://static001.geekbang.org/account/avatar/00/12/12/e1/6d0114fe.jpg","comment_is_top":false,"comment_ctime":1660920272,"is_pvip":true,"replies":[{"id":"129676","content":"åæ¥éƒ½ç”¨ç®¡ç¨‹ï¼Œä¼°è®¡ä¹Ÿæ˜¯å› ä¸ºè¿™ä¸ª","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1269969","ctime":1662094454,"ip_address":"åŒ—äº¬","comment_id":354969,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1660920272","product_id":100023901,"comment_content":"Semaphore å¤šäºå¤šä¸ªä¸´ç•ŒåŒºçš„äº’æ–¥æ„Ÿè§‰æ²¡æœ‰ç®¡ç¨‹é‚£ä¹ˆæ–¹ä¾¿ï¼Œä¸çŸ¥é“è€å¸ˆæœ‰æ²¡æœ‰æ›´å¥½çš„æ€è·¯ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586298,"discussion_content":"åæ¥éƒ½ç”¨ç®¡ç¨‹ï¼Œä¼°è®¡ä¹Ÿæ˜¯å› ä¸ºè¿™ä¸ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662094454,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354169,"user_name":"ä½•å¦¨","can_delete":false,"product_type":"c1","uid":1385377,"ip_address":"åŒ—äº¬","ucode":"EC3983BFF7992A","user_header":"https://static001.geekbang.org/account/avatar/00/15/23/a1/b08f3ee7.jpg","comment_is_top":false,"comment_ctime":1660140314,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1660140314","product_id":100023901,"comment_content":"ç›´æ¥ Runnable ä¸é¦™å—","like_count":0},{"had_liked":false,"id":345823,"user_name":"å­¦ä¹ å­¦ä¸ªå±","can_delete":false,"product_type":"c1","uid":1049017,"ip_address":"","ucode":"DF2D61E6FB2FCE","user_header":"https://static001.geekbang.org/account/avatar/00/10/01/b9/73435279.jpg","comment_is_top":false,"comment_ctime":1652616987,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652616987","product_id":100023901,"comment_content":"ArrayList éçº¿ç¨‹å®‰å…¨ã€‚å¦‚ç”¨éœ€è¦åšåŒæ­¥å¤„ç†ã€‚","like_count":0},{"had_liked":false,"id":343197,"user_name":"Que","can_delete":false,"product_type":"c1","uid":2971537,"ip_address":"","ucode":"0F30D90B73C5A1","user_header":"https://static001.geekbang.org/account/avatar/00/2d/57/91/89ae9614.jpg","comment_is_top":false,"comment_ctime":1650703791,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650703791","product_id":100023901,"comment_content":"è¿™ä¸ªé™æµå™¨ä½¿ç”¨ReentrantReadWriteLockä¸­çš„è¯»é”ï¼Œå¯ä»¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":320999,"user_name":"Donkey","can_delete":false,"product_type":"c1","uid":2753834,"ip_address":"","ucode":"3DB4DFF6D99035","user_header":"https://static001.geekbang.org/account/avatar/00/2a/05/2a/cfbcb0b2.jpg","comment_is_top":false,"comment_ctime":1636614597,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636614597","product_id":100023901,"comment_content":"t = pool.remove(pool.size()-1) æ˜¯ä¸æ˜¯ä¼šæ›´åˆé€‚","like_count":0},{"had_liked":false,"id":311813,"user_name":"prader26","can_delete":false,"product_type":"c1","uid":1433707,"ip_address":"","ucode":"5EFFFC374ADECE","user_header":"https://static001.geekbang.org/account/avatar/00/15/e0/6b/f61d7466.jpg","comment_is_top":false,"comment_ctime":1631489466,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1631489466","product_id":100023901,"comment_content":"å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶è¿›å…¥ä¸´ç•ŒåŒºï¼Œä¸è¿‡æŸä¸ªæ—¶é—´ç‚¹åªå…è®¸æœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œã€‚","like_count":0},{"had_liked":false,"id":307633,"user_name":"î”¶æœ¨å­æî”¶","can_delete":false,"product_type":"c1","uid":1694965,"ip_address":"","ucode":"815BAC4C950949","user_header":"https://static001.geekbang.org/account/avatar/00/19/dc/f5/806bd1ff.jpg","comment_is_top":false,"comment_ctime":1629185658,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629185658","product_id":100023901,"comment_content":"package com.mzl.base;<br><br>import java.util.concurrent.Semaphore;<br><br>&#47;**<br> * @author lihuagen<br> * @version 1.0<br> * @className: SemaphoreTest<br> * @description: TODO<br> * @date 2021&#47;8&#47;17 15:10<br> *&#47;<br>public class SemaphoreTest {<br>    &#47;**<br>     * åˆå§‹åŒ–ä¿¡å·é‡<br>     *&#47;<br>    static int count;<br>    static final Semaphore s = new Semaphore(1);<br>    &#47;**<br>     * ç”¨ä¿¡å·é‡ä¿è¯äº’æ–¥<br>     *&#47;<br>    static void addOne() throws InterruptedException {<br>        s.acquire();<br>        try {<br>            count++;<br>        } finally {<br>            s.release();<br>        }<br>    }<br>    public static void main(String[] args) {<br>        for (int i = 0; i &lt; 10; i++) {<br>            new Thread(() -&gt; {<br>                try {<br>                    SemaphoreTest.addOne();<br>                    System.out.println(SemaphoreTest.count);<br>                } catch (InterruptedException e) {<br>                    e.printStackTrace();<br>                }<br>            }).start();<br>        }<br>    }<br>}<br>æˆ‘å¤šæ¬¡æ‰§è¡Œåï¼Œæœ‰æ¦‚ç‡å‡ºç°ä¸¤ä¸ª2ï¼ŒaddOneæ–¹æ³•ä¸æ˜¯ä¸´ç•ŒåŒºå—ï¼Ÿæˆ‘ä¿¡å·é‡è®¾ç½®çš„æ˜¯1ï¼Œåº”è¯¥åªæœ‰1ä¸ªçº¿ç¨‹åœ¨è·‘ï¼Œä¸ºå•¥ä¼šå‡ºç°é‡å¤çš„ï¼Ÿ<br>System.out.println(SemaphoreTest.count); è¿™ä¸ªæ–¹æ³• addOne() æ–¹æ³•å†…å°±æ­£å¸¸äº†ï¼Œæ²¡å‡ºç°è¿‡é‡å¤çš„äº†ï¼Œèƒ½é—®ä¸‹è€å¸ˆå’Œå„ä½å¤§ä½¬è¿™æ˜¯ä¸ºä»€ä¹ˆå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":306071,"user_name":"æäºŒæœ¨","can_delete":false,"product_type":"c1","uid":1103091,"ip_address":"","ucode":"30E03BB84ADB27","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/f3/129d6dfe.jpg","comment_is_top":false,"comment_ctime":1628327617,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1628327617","product_id":100023901,"comment_content":"ä¿¡å·é‡æ˜¯ä¿è¯æŒ‡å®šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è¿›å…¥ä¸´ç•ŒåŒºï¼Œè€Œä¸æ˜¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½è¿›å…¥ä¸´ç•ŒåŒºï¼Œæ‰€ä»¥è¦ç”¨çº¿ç¨‹å®‰å…¨çš„vector","like_count":0},{"had_liked":false,"id":306070,"user_name":"æäºŒæœ¨","can_delete":false,"product_type":"c1","uid":1103091,"ip_address":"","ucode":"30E03BB84ADB27","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/f3/129d6dfe.jpg","comment_is_top":false,"comment_ctime":1628327511,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1628327511","product_id":100023901,"comment_content":"ä¿¡å·é‡æ¨¡å‹å¯ä»¥æ¦‚æ‹¬ä¸ºï¼šä¸€ä¸ªè®¡æ•°å™¨ï¼Œä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—ï¼Œä¸‰ä¸ªæ–¹æ³•","like_count":0},{"had_liked":false,"id":296981,"user_name":"å®‹æŸ¯ä»°","can_delete":false,"product_type":"c1","uid":1422296,"ip_address":"","ucode":"50FB61E3E9DAF8","user_header":"https://static001.geekbang.org/account/avatar/00/15/b3/d8/c56e0f0b.jpg","comment_is_top":false,"comment_ctime":1623247743,"is_pvip":false,"replies":[{"id":"107964","content":"èƒ½åšä¸ºé”ä½¿ç”¨ï¼Œå¯è§æ€§ä¹Ÿå’Œé”ä¸€æ ·","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1623409766,"ip_address":"","comment_id":296981,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1623247743","product_id":100023901,"comment_content":"è€å¸ˆï¼Œä¿¡å·é‡åˆå§‹å€¼è®¾ç½®ä¸º1ä¹Ÿä¸å¯ä»¥ç›´æ¥ä½œä¸ºé”æ¥ä½¿ç”¨çš„å§ï¼Œå®ƒä¿è¯ä¸äº†è¢«ä¿æŠ¤èµ„æºçš„å¯è§æ€§å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521670,"discussion_content":"èƒ½åšä¸ºé”ä½¿ç”¨ï¼Œå¯è§æ€§ä¹Ÿå’Œé”ä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623409766,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":285196,"user_name":"Laughing","can_delete":false,"product_type":"c1","uid":1002134,"ip_address":"","ucode":"F68F1E000CA800","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4a/96/99466a06.jpg","comment_is_top":false,"comment_ctime":1616663241,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616663241","product_id":100023901,"comment_content":"ä¸è¡Œï¼Œå¯¹äºå¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œArrayListçš„removeæ˜¯ä¸ç¬¦åˆHappens-Beforeçš„ã€‚","like_count":0},{"had_liked":false,"id":283413,"user_name":"Owen","can_delete":false,"product_type":"c1","uid":2403622,"ip_address":"","ucode":"FDE0D574B8ED5A","user_header":"https://static001.geekbang.org/account/avatar/00/24/ad/26/d46f4394.jpg","comment_is_top":false,"comment_ctime":1615774014,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615774014","product_id":100023901,"comment_content":"ä¿¡å·é‡å’Œç®¡ç¨‹çš„ä¸åŒä¹‹å¤„é™¤äº†åœ¨äºåŒæ—¶è¿›å…¥ä¸´ç•ŒåŒºçš„çº¿ç¨‹æ•°é‡ï¼Œä¿¡å·é‡æ˜¯ä¸æ˜¯ä¹Ÿæ²¡æœ‰æ¡ä»¶å˜é‡è¿™ä¸€ä¸ªä¸œè¥¿","like_count":0},{"had_liked":false,"id":275999,"user_name":"æˆç”µå¸…æ‰","can_delete":false,"product_type":"c1","uid":2139604,"ip_address":"","ucode":"DDE757138F41D2","user_header":"","comment_is_top":false,"comment_ctime":1611741023,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611741023","product_id":100023901,"comment_content":"ä¿¡å·é‡ä¸­çš„è¢«é˜»å¡çš„çº¿ç¨‹æ˜¯å‡ºäºblockã€waitingã€timed_waitçŠ¶æ€ä¸­çš„å“ªç§çŠ¶æ€ï¼Ÿæ˜¯ä¸æ˜¯å’Œè°ƒç”¨çš„é˜»å¡å‡½æ•°æœ‰å…³ç³»ï¼Ÿ","like_count":0},{"had_liked":false,"id":269332,"user_name":"Eduardo Falaschi","can_delete":false,"product_type":"c1","uid":1400977,"ip_address":"","ucode":"493480ABA57C94","user_header":"https://static001.geekbang.org/account/avatar/00/15/60/91/b17c007b.jpg","comment_is_top":false,"comment_ctime":1608616071,"is_pvip":false,"replies":[{"id":"97778","content":"ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½å¦‚æœå†åŠ ä¸Šç†”æ–­å°±æ›´å¥½äº†","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1608767106,"ip_address":"","comment_id":269332,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1608616071","product_id":100023901,"comment_content":"åœ¨è°ƒç”¨ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„æ”¯æŒå¹¶å‘é‡ä¸å¤§çš„ç³»ç»Ÿæ—¶ï¼Œéœ€è¦é™æµ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512240,"discussion_content":"ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½å¦‚æœå†åŠ ä¸Šç†”æ–­å°±æ›´å¥½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608767106,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":250228,"user_name":"maybe","can_delete":false,"product_type":"c1","uid":1475528,"ip_address":"","ucode":"93D160F617E750","user_header":"https://static001.geekbang.org/account/avatar/00/16/83/c8/5ce842f6.jpg","comment_is_top":false,"comment_ctime":1600999319,"is_pvip":false,"discussion_count":0,"race_medal":4,"score":"1600999319","product_id":100023901,"comment_content":"package org.learning;<br><br>import java.util.ArrayList;<br>import java.util.List;<br>import java.util.Random;<br>import java.util.Vector;<br>import java.util.concurrent.Semaphore;<br><br>public class SemaphoreTest {<br><br>    public static void main(String[] args) {<br>        var admin = new ToiletAdministrator(2);<br>        for (int i = 0; i &lt; 100; i++) {<br>            var t = new Thread(() -&gt; {<br>                admin.gotoToilet();<br>            });<br>            t.setName(String.valueOf(i + 1));<br>            t.start();<br>        }<br>    }<br><br>    static class ToiletAdministrator {<br>        private final List&lt;Toilet&gt; toilets;<br>        private final Semaphore semaphore;<br><br>        public ToiletAdministrator(int n) {<br>            toilets = new Vector&lt;&gt;(n);<br>            for (int i = 0; i &lt; n; i++) {<br>                toilets.add(new Toilet(i + 1));<br>            }<br>            semaphore = new Semaphore(n);<br>        }<br><br>        public void gotoToilet() {<br>            try {<br>                semaphore.acquire();<br>            } catch (InterruptedException e) {<br>                e.printStackTrace();<br>            }<br>            Toilet toilet = null;<br>            try {<br>                toilet = toilets.remove(0);<br>                System.out.println(Thread.currentThread().getName() + &quot; got the toilet &quot; + toilet.getNumber() + &quot; and went all the way&quot;);<br>            } finally {<br>                toilets.add(toilet);<br>                semaphore.release();<br>            }<br>        }<br>    }<br><br>    static class Toilet {<br>        private final int number;<br><br>        public Toilet(int number) {<br>            this.number = number;<br>        }<br><br>        public int getNumber() {<br>            return number;<br>        }<br>    }<br>}<br>æ­£ç¡®æ‰§è¡Œ","like_count":0},{"had_liked":false,"id":250226,"user_name":"maybe","can_delete":false,"product_type":"c1","uid":1475528,"ip_address":"","ucode":"93D160F617E750","user_header":"https://static001.geekbang.org/account/avatar/00/16/83/c8/5ce842f6.jpg","comment_is_top":false,"comment_ctime":1600999222,"is_pvip":false,"discussion_count":0,"race_medal":4,"score":"1600999222","product_id":100023901,"comment_content":"package org.learning;<br><br>import java.util.ArrayList;<br>import java.util.List;<br>import java.util.Random;<br>import java.util.Vector;<br>import java.util.concurrent.Semaphore;<br><br>public class SemaphoreTest {<br><br>    public static void main(String[] args) {<br>        var admin = new ToiletAdministrator(2);<br>        for (int i = 0; i &lt; 100; i++) {<br>            var t = new Thread(() -&gt; {<br>                admin.gotoToilet();<br>            });<br>            t.setName(String.valueOf(i + 1));<br>            t.start();<br>        }<br>    }<br><br>    static class ToiletAdministrator {<br>        private final List&lt;Toilet&gt; toilets;<br>        private final Semaphore semaphore;<br><br>        public ToiletAdministrator(int n) {<br>            toilets = new ArrayList&lt;&gt;(n);<br>            for (int i = 0; i &lt; n; i++) {<br>                toilets.add(new Toilet(i + 1));<br>            }<br>            semaphore = new Semaphore(n);<br>        }<br><br>        public void gotoToilet() {<br>            try {<br>                semaphore.acquire();<br>            } catch (InterruptedException e) {<br>                e.printStackTrace();<br>            }<br>            Toilet toilet = null;<br>            try {<br>                toilet = toilets.remove(0);<br>                System.out.println(Thread.currentThread().getName() + &quot; got the toilet &quot; + toilet.getNumber() + &quot; and went all the way&quot;);<br>                Thread.sleep(new Random().nextInt(1000));<br>            } catch (InterruptedException e) {<br>                e.printStackTrace();<br>            } finally {<br>                toilets.add(toilet);<br>                semaphore.release();<br>            }<br>        }<br>    }<br><br>    static class Toilet {<br>        private final int number;<br><br>        public Toilet(int number) {<br>            this.number = number;<br>        }<br><br>        public int getNumber() {<br>            return number;<br>        }<br>    }<br>}<br><br>vectoræ¢æˆarraylistæŠ›ç©ºæŒ‡é’ˆ","like_count":0},{"had_liked":false,"id":246242,"user_name":"ğŸ","can_delete":false,"product_type":"c1","uid":1183211,"ip_address":"","ucode":"28B3C527D81DC3","user_header":"https://static001.geekbang.org/account/avatar/00/12/0d/eb/c3ff1e85.jpg","comment_is_top":false,"comment_ctime":1599219471,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1599219471","product_id":100023901,"comment_content":"è¿™ä¸ªç¬¬ä¸€æ„Ÿè§‰è§‰å¾—ä¸ç”¨å¹¶å‘ï¼Œå–å¯¹è±¡çš„æ—¶å€™ç›´æ¥å–ä¸å°±è¡Œäº†ï¼Œå–åˆ°å°±ç”¨ï¼Œå–ä¸åˆ°å°±å¾ªç¯å†å–ã€‚ç”¨ä¸Šå¹¶å‘åŒæ­¥å·¥å…·ç±»çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1358045,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b8/dd/37726c34.jpg","nickname":"å°é©¬å“¥","note":"","ucode":"B2C0FF38F8C9BC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367693,"discussion_content":"æ± åŒ–æŠ€æœ¯å¤ç”¨äº†å¯¹è±¡, å‡å°‘äº†å¯¹è±¡åˆ›å»ºæ¬¡æ•°; æ—¢ç„¶å¯¼è‡´å¤šä¸ªå¯¹è±¡åŒæ—¶è®¿é—®å…±äº«èµ„æºäº†, å¯èƒ½æœ‰å¹¶å‘é—®é¢˜, æ‰€ä»¥ä½¿ç”¨å¹¶å‘æŠ€æœ¯.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618443526,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244218,"user_name":"fightingD","can_delete":false,"product_type":"c1","uid":1443637,"ip_address":"","ucode":"AD2876CED5D5AC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKwViav94kcF50CxA0Jw7icicxociaVzut97iacy3b2ciacFqXuFWdiakVq304YcI8pt4HT5A1Yvp8EkYCpw/132","comment_is_top":false,"comment_ctime":1598431157,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598431157","product_id":100023901,"comment_content":"ä¸å¯ä»¥ï¼ŒVector add(),remove()æ“ä½œæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¦‚æœæ›¿æ¢æˆArrayList æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚","like_count":0},{"had_liked":false,"id":237819,"user_name":"æƒ˜ é—»","can_delete":false,"product_type":"c1","uid":1181650,"ip_address":"","ucode":"C5909F034BF072","user_header":"https://static001.geekbang.org/account/avatar/00/12/07/d2/0d7ee298.jpg","comment_is_top":false,"comment_ctime":1595982948,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595982948","product_id":100023901,"comment_content":"ä¸å¯ä»¥ï¼ŒåŒæ—¶æ“ä½œä¸å®‰å…¨çš„æ•°ç»„ï¼Œä¼šæœ‰å¹¶å‘é—®é¢˜ã€‚","like_count":0},{"had_liked":false,"id":224522,"user_name":"Just","can_delete":false,"product_type":"c1","uid":2022626,"ip_address":"","ucode":"35FA6917DE1D04","user_header":"https://static001.geekbang.org/account/avatar/00/1e/dc/e2/a3abd320.jpg","comment_is_top":false,"comment_ctime":1591430207,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591430207","product_id":100023901,"comment_content":"1ï¼‰arraylistä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¹¶å‘æ“ä½œå¯èƒ½ä¼šè·å–åŒä¸€ä¸ªå…ƒç´ ï¼›vectoræ˜¯çº¿ç¨‹å®‰å…¨çš„<br>2ï¼‰upæ–¹æ³•å’Œdownæ–¹æ³•çš„æ¡ä»¶æˆ‘è§‰å¾—æ˜¯è¦å¯¹åº”ç›¸å…³ï¼Œçº¯ç²¹è¯´å¤§äºç­‰äº0ä¸å¤ªè®¤åŒ","like_count":0},{"had_liked":false,"id":224032,"user_name":"mgs2002","can_delete":false,"product_type":"c1","uid":1812970,"ip_address":"","ucode":"F5931108BD509B","user_header":"https://static001.geekbang.org/account/avatar/00/1b/a9/ea/5bfce6c5.jpg","comment_is_top":false,"comment_ctime":1591259611,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591259611","product_id":100023901,"comment_content":"æ€è€ƒé¢˜å§ArrayListæ¢æˆCopyOnWriteArrayListå¯ä»¥å§ï¼Œåˆ é™¤å’Œæ·»åŠ å„è‡ªçš„å‰¯æœ¬","like_count":0},{"had_liked":false,"id":216893,"user_name":"M","can_delete":false,"product_type":"c1","uid":1810576,"ip_address":"","ucode":"06F26E1D62E9C9","user_header":"https://wx.qlogo.cn/mmopen/vi_32/eLNeJNaEkwGSK7xvtamMibVLMy2MpbIqX3iaEhT7JtSnTRMRTwZ2j4HX7WAapiashbiaBDVriaXKSP0Oeic6ZAEVEXag/132","comment_is_top":false,"comment_ctime":1589363814,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589363814","product_id":100023901,"comment_content":"ä¸èƒ½æ¢æˆArrayListï¼Œå› ä¸ºç‰µæ‰¯åˆ°äº†åˆ é™¤å’Œæ·»åŠ ï¼Œå¯¹äºå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ï¼Œä¼šæœ‰å¹¶å‘é£é™©ï¼ŒåŒæ—¶åˆ é™¤å¤šä¸ªï¼Œæ·»åŠ å¤šä¸ª<br><br><br><br><br><br>ä¿¡å·é‡ä¼˜ç‚¹ï¼š<br>1.å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è¿›å…¥ä¸´ç•ŒåŒº<br>2.äº’æ–¥","like_count":0},{"had_liked":false,"id":216885,"user_name":"M","can_delete":false,"product_type":"c1","uid":1810576,"ip_address":"","ucode":"06F26E1D62E9C9","user_header":"https://wx.qlogo.cn/mmopen/vi_32/eLNeJNaEkwGSK7xvtamMibVLMy2MpbIqX3iaEhT7JtSnTRMRTwZ2j4HX7WAapiashbiaBDVriaXKSP0Oeic6ZAEVEXag/132","comment_is_top":false,"comment_ctime":1589362364,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589362364","product_id":100023901,"comment_content":"å¦‚æœæˆ‘åˆå§‹åŒ–äº†2ï¼Œå‡è®¾ä¸¤æ¡çº¿ç¨‹ï¼Œdownçš„æ—¶å€™countå€¼éƒ½ä¸å°äº0ï¼Œä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œ,é‚£å°±ä¿è¯ä¸äº†äº’æ–¥äº†å§?<br>static int count;<br>&#47;&#47;åˆå§‹åŒ–ä¿¡å·é‡<br>static final Semaphore s <br>    = new Semaphore(1);<br>&#47;&#47;ç”¨ä¿¡å·é‡ä¿è¯äº’æ–¥    <br>static void addOne() {<br>  s.acquire();<br>  try {<br>    count+=1;<br>  } finally {<br>    s.release();<br>  }<br>}","like_count":0},{"had_liked":false,"id":214435,"user_name":"è§å—å±±","can_delete":false,"product_type":"c1","uid":1118111,"ip_address":"","ucode":"6A8BB82B7573CA","user_header":"https://static001.geekbang.org/account/avatar/00/11/0f/9f/f4b06bd5.jpg","comment_is_top":false,"comment_ctime":1588749155,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588749155","product_id":100023901,"comment_content":"Semaphoreå’Œç®¡ç¨‹çš„åŒºåˆ«: <br>Semaphoreå…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸´ç•Œèµ„æºï¼Œç®¡ç¨‹èƒ½å¤Ÿåšåˆ°è¿™ç‚¹ï¼Œä½†éœ€è¦é¢å¤–å¼€å‘ç±»ä¼¼Semaphoreçš„åŠŸèƒ½; <br>Semaphoreæ¯æ¬¡å”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼Œå†…éƒ¨æ²¡æœ‰æä¾›æ¡ä»¶å˜é‡ï¼Œå®ç°é˜»å¡å¯¹åˆ—æ¯”è¾ƒå›°éš¾ï¼Œè€Œç®¡ç¨‹å¯ä»¥å”¤é†’å…¨éƒ¨çº¿ç¨‹ï¼Œæä¾›å¤šä¸ªæ¡ä»¶å˜é‡ã€‚<br><br>ä¿¡å·é‡å‡ºç°æ—©äºç®¡ç¨‹ï¼Œå› æ­¤å¯ä»¥è¿™ä¹ˆæƒ³ï¼Œç®¡ç¨‹æ˜¯æ›´è¿›ä¸€æ­¥è§£å†³å¹¶å‘çš„æ–¹æ¡ˆï¼Œå› æ­¤ï¼Œå†æŸäº›æ–¹é¢æ˜¯ä¼˜åŒ–çš„ã€‚ä½†æ˜¯é’ˆå¯¹åŒæ—¶è®¿é—®å¤šä¸ªä¸´ç•Œèµ„æºè¿™ç‚¹ï¼Œéœ€è¦åˆ©ç”¨ç®¡ç¨‹ç»§ç»­å®ç°ã€‚","like_count":1},{"had_liked":false,"id":207932,"user_name":"Destiny","can_delete":false,"product_type":"c1","uid":1258567,"ip_address":"","ucode":"B9F1AE7CDF5C30","user_header":"https://static001.geekbang.org/account/avatar/00/13/34/47/6d212e42.jpg","comment_is_top":false,"comment_ctime":1587218279,"is_pvip":false,"replies":[{"id":"77686","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1587286384,"ip_address":"","comment_id":207932,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1587218279","product_id":100023901,"comment_content":"è€å¸ˆå¥½ï¼Œæœ‰ä¸€ä¸ªé—®é¢˜æƒ³é—®ä¸€ä¸‹ï¼Œå¦‚æœéƒ¨ç½²æœåŠ¡çš„æœºå™¨æ˜¯é›†ç¾¤ï¼Œé‚£ä¹ˆè¿™ä¸ªSemaphoreçš„é™æµæ˜¯ä¸æ˜¯å°±ä¸èƒ½ç”¨äº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492285,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587286384,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2330905,"avatar":"https://static001.geekbang.org/account/avatar/00/23/91/19/6a3e7efc.jpg","nickname":"ç¨‹åºå‘˜9527","note":"","ucode":"1A1609F6BEAD84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380763,"discussion_content":"ä»¤ç‰Œæ¡¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624690590,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1812970,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a9/ea/5bfce6c5.jpg","nickname":"mgs2002","note":"","ucode":"F5931108BD509B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278926,"discussion_content":"é›†ç¾¤çš„è¯é™æµå¯ä»¥é€šè¿‡ç½‘å…³å±‚æ¥åš","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591259501,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":204598,"user_name":"liian2019","can_delete":false,"product_type":"c1","uid":1503741,"ip_address":"","ucode":"22F639944F0EA0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epvjpicXzEv02d9ztRzIWIicbejyFTTtRA5K6oYmdicq9HQgGfRn3DLytTHQ6CHspb0TibqFkMibhBXj2g/132","comment_is_top":false,"comment_ctime":1586426762,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1586426762","product_id":100023901,"comment_content":"çœ‹å®Œæ„Ÿè§‰æˆ‘å¯ä»¥ç”¨AtomicIntergerå®ç°ä¸€ä¸ªé”äº† å“ˆå“ˆ ","like_count":0},{"had_liked":false,"id":201654,"user_name":"Easltr","can_delete":false,"product_type":"c1","uid":1442882,"ip_address":"","ucode":"DC6E6F76280549","user_header":"https://static001.geekbang.org/account/avatar/00/16/04/42/8e41c126.jpg","comment_is_top":false,"comment_ctime":1585817172,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585817172","product_id":100023901,"comment_content":"ä¸è¡Œï¼Œå› ä¸ºSemaphoreæ”¯æŒå¤šä¸ªçº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒºçš„ï¼Œå¦‚æœç”¨çº¿ç¨‹ä¸å®‰å…¨çš„arraylistä¼šå‡ºç°å¹¶å‘é—®é¢˜","like_count":0},{"had_liked":false,"id":184984,"user_name":"å‡¯","can_delete":false,"product_type":"c1","uid":1670995,"ip_address":"","ucode":"BFEA3EE7393B80","user_header":"https://static001.geekbang.org/account/avatar/00/19/7f/53/a9ae31ce.jpg","comment_is_top":false,"comment_ctime":1583462413,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583462413","product_id":100023901,"comment_content":"è€å¸ˆ å¦‚æœä¿¡å·é‡åˆå§‹åŒ–æ—¶è®¸å¯è¯ä¸º0ä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µï¼Ÿè¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±ä¸€ä¸ªè·å–ä¿¡å·é‡è®¸å¯è¯çš„çº¿ç¨‹ä¸­ï¼Œæ‰§è¡Œå®Œä»¥åæ²¡æœ‰é‡Šæ”¾ï¼Œä½†æ˜¯çº¿ç¨‹å·²ç»ç»“æŸä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ï¼Ÿ","like_count":0},{"had_liked":false,"id":180811,"user_name":"missed","can_delete":false,"product_type":"c1","uid":1670935,"ip_address":"","ucode":"89D0016FAEE0D0","user_header":"https://static001.geekbang.org/account/avatar/00/19/7f/17/181c8d6f.jpg","comment_is_top":false,"comment_ctime":1582420331,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582420331","product_id":100023901,"comment_content":"æŠŠArraylistä¸¢åˆ°collectionsçš„synchronizedListä¹Ÿè¡Œå§ï¼Œä¹Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„äº†","like_count":0},{"had_liked":false,"id":176416,"user_name":"supermouse","can_delete":false,"product_type":"c1","uid":1321860,"ip_address":"","ucode":"88072D5F881827","user_header":"https://static001.geekbang.org/account/avatar/00/14/2b/84/07f0c0d6.jpg","comment_is_top":false,"comment_ctime":1581054617,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581054617","product_id":100023901,"comment_content":"ä¸å¯ä»¥ï¼Œå› ä¸ºç”¨ArrayListçš„è¯å¦‚æœæœ‰ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œpool.remove(0)æˆ–è€…pool.add(t)çš„æ“ä½œï¼Œæœ‰å¯èƒ½å¯¼è‡´poolçš„sizeåªå‡1æˆ–è€…åªåŠ 1ï¼Œè¿™æ ·å°±è¾¾ä¸åˆ°é™æµçš„ç›®çš„äº†ã€‚","like_count":0},{"had_liked":false,"id":169056,"user_name":"ä¹¾å¤ç¬é—´","can_delete":false,"product_type":"c1","uid":1683130,"ip_address":"","ucode":"15BDCF29CBF8EB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLWIUF31dicT1YBTxWNX0uvbMxl15UwdlwFicGhNo0DsQ7CbM6k16EQxK7bwSMcicLGMdYto4jGPTvrg/132","comment_is_top":false,"comment_ctime":1578268826,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578268826","product_id":100023901,"comment_content":"ä¿¡å·é‡ï¼Œç”¨ä¿¡å·ç¯æ¥å½¢å®¹çš„è¯ï¼Œæ˜¯å…è®¸æ±½è½¦ç©¿è¿‡åŒä¸€æ–‘é©¬çº¿çš„ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨vector è¿™æ ·çº¿ç¨‹å®‰å…¨çš„æ•°æ®ç»“æ„","like_count":0},{"had_liked":false,"id":168506,"user_name":"é™ˆ","can_delete":false,"product_type":"c1","uid":1531763,"ip_address":"","ucode":"8AEF8530530311","user_header":"https://static001.geekbang.org/account/avatar/00/17/5f/73/a9346146.jpg","comment_is_top":false,"comment_ctime":1578101551,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1578101551","product_id":100023901,"comment_content":"ä¿¡å·é‡å®ç°çš„ä»£ç ä¸­this.count--ï¼Œè¿™ä¸ªæ“ä½œå¥½åƒä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„å§ï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":163332,"user_name":"FH","can_delete":false,"product_type":"c1","uid":1179224,"ip_address":"","ucode":"E47F6765CF1EEE","user_header":"https://static001.geekbang.org/account/avatar/00/11/fe/58/2cddaca4.jpg","comment_is_top":false,"comment_ctime":1576688414,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576688414","product_id":100023901,"comment_content":"è®¡æ•°å™¨çš„å€¼å¦‚æœ&gt;0, è¡¨ç¤ºæ± ä¸­è¿˜æœ‰æœªä½¿ç”¨çš„èµ„æº, é‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´ç­‰å¾…é˜Ÿåˆ—é‡Œæ²¡æœ‰ç­‰å¾…çº¿ç¨‹, æ‰€ä»¥ä¸éœ€è¦å”¤é†’äº†. æ³¨æ„è¿™é‡Œçš„è®¡æ•°å™¨å€¼æ˜¯å¯ä»¥&lt;0çš„, å½“&lt;0æ—¶è¡¨ç¤ºé˜»å¡é˜Ÿåˆ—ä¸ä¸ºç©º, æ‰€ä»¥æ­¤æ—¶æ‰éœ€è¦å”¤é†’","like_count":0},{"had_liked":false,"id":158713,"user_name":"å‘¨å›½æ ‹","can_delete":false,"product_type":"c1","uid":1222582,"ip_address":"","ucode":"CA46E833FB608E","user_header":"https://static001.geekbang.org/account/avatar/00/12/a7/b6/4831632e.jpg","comment_is_top":false,"comment_ctime":1575439031,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575439031","product_id":100023901,"comment_content":"è€å¸ˆ ä½ å¥½ Semaphore(0) å’ŒSemaphore(1)æœ‰ä»€ä¹ˆä¸åŒå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":154851,"user_name":"å°æ°˜","can_delete":false,"product_type":"c1","uid":1622109,"ip_address":"","ucode":"DA55B9A02D9EE0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erPMtAfnQdpx1yOZQ2ic7icqUs3tvibEjUXQMUXKiaakyuIho6k6vmdl46nrdWjXIjPIRg9Pmco00tR5w/132","comment_is_top":false,"comment_ctime":1574580397,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574580397","product_id":100023901,"comment_content":"è¯¾åæ€è€ƒï¼Œä¸å¯ä»¥å°†Vector æ¢æˆArrayList ,å› ä¸ºä¿¡å·é‡å…è®¸åŒä¸€æ—¶åˆ»å¤šä¸ªçº¿ç¨‹è®¿é—®ä¸´ç•ŒåŒºï¼Œè¿™æ—¶å¤šä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨pool.remove()å’Œpool.add()æ–¹æ³•ä¼šæœ‰åŸå­æ€§é—®é¢˜ã€‚","like_count":0},{"had_liked":false,"id":153403,"user_name":"æœ•çˆ±å¾å¦ƒ","can_delete":false,"product_type":"c1","uid":1733692,"ip_address":"","ucode":"B10EB69934F9E2","user_header":"https://static001.geekbang.org/account/avatar/00/1a/74/3c/da79d2a1.jpg","comment_is_top":false,"comment_ctime":1574230759,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574230759","product_id":100023901,"comment_content":"ä¸èƒ½ä½¿ç”¨ArrayListçš„ï¼Œå› ä¸ºaddå’Œremoveæ–¹æ³•å¯ä»¥åŒæ—¶æœ‰å¤šä¸ªçº¿ç¨‹è¿›è¡Œï¼Œå‡å¦‚ç°åœ¨æ˜¯removeæ–¹æ³•ï¼Œæœ‰ä¸¤ä¸ªçº¿ç¨‹è¿‡æ¥ï¼ŒåŒæ—¶removeç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°å¼‚å¸¸ï¼ŒaddåŒç†ï¼Œè¿™å°±å¥½åƒæ˜¯count = count + 1 ä¸€æ ·ï¼Œå‡å¦‚ç°åœ¨count = 0ï¼ŒåŒæ—¶ä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œè¿™ä¸ª+1çš„æ“ä½œï¼Œæœ€åç»“æœå¯èƒ½å°±æ˜¯count = 1 è¿™ä¸ªé“ç†æ˜¯ä¸€æ ·çš„","like_count":0},{"had_liked":false,"id":150946,"user_name":"ITæ©˜å­","can_delete":false,"product_type":"c1","uid":1066932,"ip_address":"","ucode":"1DBEE96BAF8B0B","user_header":"https://static001.geekbang.org/account/avatar/00/10/47/b4/e8b3f53f.jpg","comment_is_top":false,"comment_ctime":1573633243,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573633243","product_id":100023901,"comment_content":"è€å¸ˆ å¯¹è±¡æ± çš„ç¤ºä¾‹ä»£ç ä¸­ObjPoolçš„æ„é€ å‡½æ•°åœ¨å°†å¯¹è±¡tåŠ å…¥poolä¸­æ—¶ç”¨çš„æ˜¯åŒä¸€ä¸ªtï¼Œæ˜¯å¦æ„å‘³ç€Tè¿™ä¸ªç±»å¿…é¡»æ˜¯çº¿ç¨‹å®‰å…¨çš„ç±»æ‰ä¸ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Ÿå¦åˆ™æé™æƒ…å†µä¸‹ï¼Œsizeä¸ªçº¿ç¨‹åœ¨åŒæ—¶è°ƒç”¨execæ–¹æ³•æ—¶ï¼Œè‹¥funcä¸­çš„æ“ä½œä¼šæ”¹å˜tçš„æˆå‘˜å˜é‡ï¼Œåˆ™å¿…å®šä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Ÿ","like_count":0},{"had_liked":false,"id":148252,"user_name":"è€ƒä¼‘","can_delete":false,"product_type":"c1","uid":1053955,"ip_address":"","ucode":"968DFC00D6D0CF","user_header":"https://static001.geekbang.org/account/avatar/00/10/15/03/c0fe1dbf.jpg","comment_is_top":false,"comment_ctime":1572963902,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1572963902","product_id":100023901,"comment_content":"ä½¿ç”¨ä¿¡å·é‡è¿›è¡Œå¹¶å‘ç¼–ç¨‹ï¼Œä¿è¯äº†å…±äº«å˜é‡çš„äº’æ–¥ï¼Œä½†æ˜¯æ²¡æœ‰è§£å†³åŒæ­¥ï¼Œå³çº¿ç¨‹é—´çš„äº¤äº’ä¸æ˜¯å¾ˆä¾¿åˆ©ï¼Œè¿™å¯èƒ½æ˜¯ä¿¡å·é‡åœ¨JAVAç¼–ç¨‹ä¸­åœ°ä½ä¸é«˜çš„åŸå› ","like_count":0},{"had_liked":false,"id":141890,"user_name":"245864982","can_delete":false,"product_type":"c1","uid":1238485,"ip_address":"","ucode":"AC47075A95B759","user_header":"https://static001.geekbang.org/account/avatar/00/12/e5/d5/680402fd.jpg","comment_is_top":false,"comment_ctime":1571245219,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571245219","product_id":100023901,"comment_content":"å¾ˆèµ","like_count":0},{"had_liked":false,"id":140059,"user_name":"æ°‘å·¥597","can_delete":false,"product_type":"c1","uid":1529858,"ip_address":"","ucode":"DB6857E21E9318","user_header":"https://static001.geekbang.org/account/avatar/00/17/58/02/2b7ccf09.jpg","comment_is_top":false,"comment_ctime":1570799136,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570799136","product_id":100023901,"comment_content":"AQSæœ‰ä¸¤ç§æ”¯æŒæ–¹å¼ï¼ŒåŒæ­¥å’Œäº’æ–¥ï¼Œåªæœ‰äº’æ–¥çš„æ¨¡å¼æ‰å¯ä»¥åˆ›é€ å‡ºä¸´ç•ŒåŒºï¼Œç„¶åå¯ä»¥ä½¿ç”¨éçº¿ç¨‹å®‰å…¨çš„å®¹å™¨å§","like_count":0},{"had_liked":false,"id":138900,"user_name":"æ™¯æ¢¦å›­","can_delete":false,"product_type":"c1","uid":1620479,"ip_address":"","ucode":"0A17708457ACB2","user_header":"https://static001.geekbang.org/account/avatar/00/18/b9/ff/ea6c2e86.jpg","comment_is_top":false,"comment_ctime":1570501849,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570501849","product_id":100023901,"comment_content":"é˜»å¡é˜Ÿåˆ—çš„å¤§å°å¯ä»¥è®¾ç½®å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":136905,"user_name":"zshanjun","can_delete":false,"product_type":"c1","uid":1182120,"ip_address":"","ucode":"0C99216D6FBDB8","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/oCx7GX9P4w5cml1cpbFD1x21Biad3MLCTOhTPJvicRW3xp9C8xTgdiaOSdpFyvibKSfcD1LL4miaT7VtqqKms6rgujg/132","comment_is_top":false,"comment_ctime":1569551255,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1569551255","product_id":100023901,"comment_content":"&#47;**<br> * ç”¨ä¿¡å·é‡å®ç°é˜»å¡é˜Ÿåˆ—<br> *&#47;<br>public class SemaphoreQueue {<br><br>    private List&lt;Integer&gt; list;<br>    <br>    &#47;&#47; å¯ä»¥è¿›è¡Œputæ“ä½œçš„è®¸å¯æ•°é‡<br>    private Semaphore putActionNum;<br>    <br>    &#47;&#47; å¯ä»¥è¿›è¡Œgetæ“ä½œçš„è®¸å¯æ•°é‡<br>    private Semaphore getActionNum;<br>    <br>    private Semaphore mutex;<br><br>    public SemaphoreQueue(int capacity) {<br>        putActionNum = new Semaphore(capacity);<br>        &#47;&#47; åˆå§‹åŒ–æ—¶é˜Ÿåˆ—ä¸ºç©º<br>        getActionNum = new Semaphore(0);<br>        mutex = new Semaphore(1);<br>        list = new ArrayList&lt;&gt;(capacity);<br>    }<br><br>    public void put(Integer val) {<br>        try {<br>            &#47;&#47; putæ“ä½œè®¸å¯è¯-1<br>            putActionNum.acquire();<br>            mutex.acquire();<br>            list.add(val);<br>            mutex.release();<br>            &#47;&#47; getæ“ä½œè®¸å¯è¯+1<br>            getActionNum.release();<br>        } catch (InterruptedException e) {<br>            e.printStackTrace();<br>        }<br>    }<br><br>    public Integer get() {<br>        Integer val = null;<br>        try {<br>            getActionNum.acquire();<br>            mutex.acquire();<br>            val = list.get(0);<br>            list.remove(0);<br>            mutex.release();<br>            &#47;&#47; putæ“ä½œè®¸å¯è¯+1<br>            putActionNum.release();<br>        } catch (InterruptedException e) {<br>            e.printStackTrace();<br>        }<br>        return val;<br>    }<br><br>    public static void main(String[] args) {<br>        SemaphoreQueue queue = new SemaphoreQueue(5);<br>        for (int i = 0; i &lt; 10; i++) {<br>            Thread thread = new Thread(() -&gt; {<br>                for (int j = 0; j &lt; 100; j++) {<br>                    if (j % 2 == 1) {<br>                        Integer val = queue.get();<br>                        System.out.println(val);<br>                    } else {<br>                        queue.put(j);<br>                    }<br>                }<br>            });<br>            thread.start();<br>        }<br><br>        try {<br>            Thread.sleep(5000);<br>        } catch (InterruptedException e) {<br>            e.printStackTrace();<br>        }<br>    }<br>}","like_count":0},{"had_liked":false,"id":132391,"user_name":"Sharry","can_delete":false,"product_type":"c1","uid":1239293,"ip_address":"","ucode":"045DDB864659F6","user_header":"https://static001.geekbang.org/account/avatar/00/12/e8/fd/035f4c94.jpg","comment_is_top":false,"comment_ctime":1568106392,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568106392","product_id":100023901,"comment_content":"å› ä¸ºä¸´ç•ŒåŒºå…è®¸å¤šä¸ªçº¿ç¨‹è®¿é—®, æ•… ArrayList çš„ remove æ˜¯æ— æ³•ä¿è¯çº¿ç¨‹å®‰å…¨çš„","like_count":0},{"had_liked":false,"id":126804,"user_name":"æ—¥æ‹±ä¸€å…µ","can_delete":false,"product_type":"c1","uid":1437158,"ip_address":"","ucode":"D6386E5CD7C061","user_header":"https://static001.geekbang.org/account/avatar/00/15/ed/e6/75a32708.jpg","comment_is_top":false,"comment_ctime":1566481184,"is_pvip":false,"replies":[{"id":"47020","content":"éœ€è¦","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1566559031,"ip_address":"","comment_id":126804,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566481184","product_id":100023901,"comment_content":"è€å¸ˆï¼Œä¿¡å·é‡æ˜¯å…è®¸å¤šä¸ªçº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒºï¼Œå¦‚æœä¸´ç•ŒåŒºå†…æœ‰å…±äº«å˜é‡ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡ä¹Ÿæ˜¯è¦åŠ é”çš„å§ï¼Œæ¯”å¦‚ count è®¡æ•°","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464177,"discussion_content":"éœ€è¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566559031,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122364,"user_name":"åŠç”Ÿç“œã€‚","can_delete":false,"product_type":"c1","uid":1606288,"ip_address":"","ucode":"6D4CC445230D19","user_header":"https://static001.geekbang.org/account/avatar/00/18/82/90/295449c4.jpg","comment_is_top":false,"comment_ctime":1565349401,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565349401","product_id":100023901,"comment_content":"ä¸å¯ä»¥ï¼Œå› ä¸ºArrayListçš„removeæ“ä½œä¸æ˜¯åŸå­æ€§çš„ã€‚é‚£ä¹ˆåœ¨è¿›å…¥exceæ–¹æ³•çš„æ—¶å€™ï¼Œå¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œremoveæ–¹æ³•ï¼Œè¿™æ ·å°±å¯èƒ½ä¼šé€ æˆå¼‚å¸¸ã€‚","like_count":0},{"had_liked":false,"id":118455,"user_name":"ä¼Ÿä¼ŸğŸ’¤","can_delete":false,"product_type":"c1","uid":1442413,"ip_address":"","ucode":"622AF8AA3D163D","user_header":"https://static001.geekbang.org/account/avatar/00/16/02/6d/fa23b086.jpg","comment_is_top":false,"comment_ctime":1564367828,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564367828","product_id":100023901,"comment_content":" List MyStrList = Collections.synchronizedList(new ArrayList());","like_count":0},{"had_liked":false,"id":116998,"user_name":"æ‹¯æ•‘åœ°çƒå¥½ç´¯","can_delete":false,"product_type":"c1","uid":1339022,"ip_address":"","ucode":"7643439601EF4C","user_header":"https://static001.geekbang.org/account/avatar/00/14/6e/8e/5d309a85.jpg","comment_is_top":false,"comment_ctime":1563952893,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563952893","product_id":100023901,"comment_content":"---æ€»ç»“---<br>ä¿¡å·é‡ç›¸å¯¹ç®¡ç¨‹çš„ç‰¹å®šä½¿ç”¨åœºæ™¯ï¼šå®ç°å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸´ç•ŒåŒº<br>ä¿¡å·é‡çš„äº’æ–¥å®ç°ï¼šä¾èµ–äºåŸå­çš„upå’Œdownæ“ä½œå¯¹è®¡æ•°å™¨è¿›è¡ŒåŠ å‡","like_count":0},{"had_liked":false,"id":116124,"user_name":"å†‰é‡","can_delete":false,"product_type":"c1","uid":1137353,"ip_address":"","ucode":"2CAEA424996876","user_header":"https://static001.geekbang.org/account/avatar/00/11/5a/c9/933ee0a8.jpg","comment_is_top":false,"comment_ctime":1563791165,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1563791165","product_id":100023901,"comment_content":"Semaphoreæ²¡æœ‰å®ç°åŒæ­¥ï¼Œå½“æˆ‘ä»¬éœ€è¦å®ç°æ•°æ®çš„åŒæ­¥æ—¶å€™è¿˜éœ€è¦è‡ªå·±è¿›è¡Œåšæ•°æ®åŒæ­¥ï¼Œæˆ‘å¯¹è¿™ä¸ªæ¯”è¾ƒéš¾ä»¥ç†è§£ï¼Œå› ä¸ºæ¯æ¬¡acquire()éƒ½æ˜¯åŸå­æ€§çš„ï¼Œæ‰€æœ‰åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨æ“ä½œæ•°æ®ï¼Œä¸ºä»€ä¹ˆè¿˜ä¼šå‡ºç°æ•°æ®ä¸åŒæ­¥å‘¢ï¼Ÿè¯·è€å¸ˆè§£ç­”ä¸€ä¸‹ã€‚<br>æ‰“å°æ—¥å¿—ï¼š<br>thread-å¹¶å‘æµ‹è¯•çº¿ç¨‹-runner-7è·å–è®¸å¯(18)ï¼Œå‰©ä½™ï¼š0<br>thread-å¹¶å‘æµ‹è¯•çº¿ç¨‹-runner-5è·å–è®¸å¯(17)ï¼Œå‰©ä½™ï¼š1<br>thread-å¹¶å‘æµ‹è¯•çº¿ç¨‹-runner-5æ‰§è¡Œdataè‡ªå¢å‰ï¼šdata=18<br>thread-å¹¶å‘æµ‹è¯•çº¿ç¨‹-runner-5æ‰§è¡Œdataè‡ªå¢åï¼šdata=19<br>thread-å¹¶å‘æµ‹è¯•çº¿ç¨‹-runner-1è·å–è®¸å¯(15)ï¼Œå‰©ä½™ï¼š2<br>thread-å¹¶å‘æµ‹è¯•çº¿ç¨‹-runner-1æ‰§è¡Œdataè‡ªå¢å‰ï¼šdata=19<br>thread-å¹¶å‘æµ‹è¯•çº¿ç¨‹-runner-1æ‰§è¡Œdataè‡ªå¢åï¼šdata=20<br>thread-å¹¶å‘æµ‹è¯•çº¿ç¨‹-runner-4é‡Šæ”¾è®¸å¯(14)ï¼Œå‰©ä½™ï¼š3<br>thread-å¹¶å‘æµ‹è¯•çº¿ç¨‹-runner-3é‡Šæ”¾è®¸å¯(13)ï¼Œå‰©ä½™ï¼š3<br>thread-å¹¶å‘æµ‹è¯•çº¿ç¨‹-runner-7æ‰§è¡Œdataè‡ªå¢å‰ï¼šdata=18<br>thread-å¹¶å‘æµ‹è¯•çº¿ç¨‹-runner-7æ‰§è¡Œdataè‡ªå¢åï¼šdata=21<br>","like_count":0,"discussions":[{"author":{"id":1606288,"avatar":"https://static001.geekbang.org/account/avatar/00/18/82/90/295449c4.jpg","nickname":"åŠç”Ÿç“œã€‚","note":"","ucode":"6D4CC445230D19","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4393,"discussion_content":"acquire()åŸå­æ€§æ˜¯æŒ‡é‡Œé¢çš„è®¡æ•°å™¨æ“ä½œæ˜¯åŸå­æ€§çš„ã€‚ä½†æ˜¯ä½ çš„ä¿¡å·é‡å¤§äº1ï¼Œé‚£ä¹ˆåŒä¸€ä¸ªæ—¶é—´å°±ä¼šæœ‰å¤šä¸ªçº¿ç¨‹æ“ä½œåŒä¸€ä¸ªæ•°æ®ï¼Œæ‰€ä»¥å°±ä¼šå‡ºç°æ•°æ®ä¸åŒæ­¥çš„é—®é¢˜ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1565349605,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1137353,"avatar":"https://static001.geekbang.org/account/avatar/00/11/5a/c9/933ee0a8.jpg","nickname":"å†‰é‡","note":"","ucode":"2CAEA424996876","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1606288,"avatar":"https://static001.geekbang.org/account/avatar/00/18/82/90/295449c4.jpg","nickname":"åŠç”Ÿç“œã€‚","note":"","ucode":"6D4CC445230D19","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5581,"discussion_content":"è°¢è°¢è€é“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566360214,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4393,"ip_address":""},"score":5581,"extra":""}]}]},{"had_liked":false,"id":107397,"user_name":"æ–æ³¢é‚£å¥‘","can_delete":false,"product_type":"c1","uid":1464006,"ip_address":"","ucode":"85E2EBC01392B1","user_header":"https://static001.geekbang.org/account/avatar/00/16/56/c6/0b449bc6.jpg","comment_is_top":false,"comment_ctime":1561527640,"is_pvip":false,"replies":[{"id":"38944","content":"è¿™æ¬¡è¦çœ‹å…·ä½“åœºæ™¯","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1561597021,"ip_address":"","comment_id":107397,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561527640","product_id":100023901,"comment_content":"è€å¸ˆ æˆ‘æƒ³é—®ä¸€ä¸‹ åœ¨é‚£ä¸ªå¯¹è±¡æ± ä¾‹å­ä¸­ æ˜¯ä¸æ˜¯è£…å…¥çš„å¯¹è±¡æ˜¯ä¸å¯å˜çš„ ä¸ç„¶åœ¨è°ƒç”¨funcçš„æ—¶å€™å¤šçº¿ç¨‹å¯èƒ½ä¼šå¯¼è‡´ç»“æœé”™è¯¯ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455497,"discussion_content":"è¿™æ¬¡è¦çœ‹å…·ä½“åœºæ™¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561597021,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104266,"user_name":"å½»å¤´æ’¤å°¾","can_delete":false,"product_type":"c1","uid":1421174,"ip_address":"","ucode":"7B120836359858","user_header":"https://static001.geekbang.org/account/avatar/00/15/af/76/feaffdea.jpg","comment_is_top":false,"comment_ctime":1560702485,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560702485","product_id":100023901,"comment_content":"è¿™ä¸ªé™æµå™¨ çš„size è®©æˆ‘æƒ³åˆ°äº† çº¿ç¨‹æ± çš„æ ¸å¿ƒçº¿ç¨‹æ•°,è®©å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸´ç•ŒåŒºçš„æ„ä¹‰å°±æ˜¯å……åˆ†å‘æŒ¥å¤šçº¿ç¨‹çš„ä½œç”¨,è€Œä¸æ˜¯æŠŠå¤šçº¿ç¨‹ä»»åŠ¡ä¸²è¡ŒåŒ–ä»è€Œå¤±å»äº†å¤šçº¿ç¨‹çš„æ„ä¹‰.","like_count":0},{"had_liked":false,"id":98647,"user_name":"è¶…","can_delete":false,"product_type":"c1","uid":1032518,"ip_address":"","ucode":"7867523DB57020","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c1/46/78c177e9.jpg","comment_is_top":false,"comment_ctime":1559049105,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559049105","product_id":100023901,"comment_content":"ç»“åˆçº¿ç¨‹æ± çš„åœºæ™¯è¿›è¡Œä½¿ç”¨æ¯”è¾ƒå¤šã€‚ ","like_count":0},{"had_liked":false,"id":94965,"user_name":"ç–¯ç‹‚åŸƒé‡Œå…‹","can_delete":false,"product_type":"c1","uid":1099882,"ip_address":"","ucode":"1BD274519202B0","user_header":"https://static001.geekbang.org/account/avatar/00/10/c8/6a/ab820630.jpg","comment_is_top":false,"comment_ctime":1557930954,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557930954","product_id":100023901,"comment_content":"é’ˆå¯¹ä»»ä½•ä¸€ä¸ªkeyçš„å†™å…¥éƒ½æœ‰å…¨å±€çš„å†™é”ï¼Œè¿™ä¸åˆé€‚å§ï¼Ÿå¦‚æœæƒ³ç»™æ¯ä¸ªkeyå»ºç«‹è‡ªå·±çš„é”æ€ä¹ˆåšå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":92939,"user_name":"è°¢ç‰¹","can_delete":false,"product_type":"c1","uid":1248684,"ip_address":"","ucode":"9C30DBFECFE649","user_header":"https://static001.geekbang.org/account/avatar/00/13/0d/ac/09678490.jpg","comment_is_top":false,"comment_ctime":1557365642,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557365642","product_id":100023901,"comment_content":"ä¸ºä»€ä¹ˆéƒ½æ˜¯å°äº0","like_count":0},{"had_liked":false,"id":92460,"user_name":"è°¢ç‰¹","can_delete":false,"product_type":"c1","uid":1248684,"ip_address":"","ucode":"9C30DBFECFE649","user_header":"https://static001.geekbang.org/account/avatar/00/13/0d/ac/09678490.jpg","comment_is_top":false,"comment_ctime":1557277689,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557277689","product_id":100023901,"comment_content":"ä¸ºä»€ä¹ˆéƒ½æ˜¯å°äº0","like_count":0},{"had_liked":false,"id":91823,"user_name":"ycfHH","can_delete":false,"product_type":"c1","uid":1498283,"ip_address":"","ucode":"084FF6C86CBCE4","user_header":"","comment_is_top":false,"comment_ctime":1557115079,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557115079","product_id":100023901,"comment_content":"ObjPoolåˆå§‹åŒ–sizeå¤§äº1æ—¶ç”¨ArrayListå°±ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹ArrayListè¿›è¡Œæ“ä½œäº†ã€‚","like_count":0},{"had_liked":false,"id":90512,"user_name":"xuery","can_delete":false,"product_type":"c1","uid":1027584,"ip_address":"","ucode":"F461B61BE06131","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ae/00/025f37e7.jpg","comment_is_top":false,"comment_ctime":1556542369,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1556542369","product_id":100023901,"comment_content":"ä¿¡å·é‡è®¡æ•°å™¨è®¾ç½®ä¸º1ï¼Œåˆ™å¯ä»¥ä½œä¸ºäº’æ–¥é”ä½¿ç”¨ï¼›è‡³äºå®ç°é˜»å¡é˜Ÿåˆ—ä¸­çš„conditionï¼Œç°åœ¨è¿˜æ²¡æœ‰æ€è·¯ã€‚<br>ä¸èƒ½ç”¨ArrayListï¼Œä½¿ç”¨ä¿¡å·é‡ä¼šæœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶è¿›å…¥åˆ°pool.remove(0)ä¸­ï¼ŒArrayListçš„removeæ–¹æ³•æ˜¾ç„¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„","like_count":0},{"had_liked":false,"id":89023,"user_name":"Geek_53bccf","can_delete":false,"product_type":"c1","uid":1481179,"ip_address":"","ucode":"1818C97E5D1CCC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/UfqEYrR3cQXUhPEibnXD3kPSc8f0ibR4bdz6JnibjOBibfcxWrkVlz4iaCAAutOSotiaP2ROYX5esYfhAB3vj4avnYqQ/132","comment_is_top":false,"comment_ctime":1556066857,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1556066857","product_id":100023901,"comment_content":"downæ–¹æ³•é‡Œé¢å½“è®¡æ•°å™¨å°äºé›¶çš„æ—¶å€™ å°±é˜»å¡çº¿ç¨‹ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªçº¿ç¨‹è¿›å…¥é˜»å¡é‚£è®¡æ•°å™¨å°±æ˜¯-2å½“è°ƒç”¨upæ–¹æ³•çš„ä¸€æ¬¡çš„æ—¶å€™ï¼Œæ­¤æ—¶è®¡æ•°å™¨å°±ä¸º-1é‚£ä¾æ—§å°äºé›¶è°ƒç”¨downæ–¹æ³•ä¾æ—§é˜»å¡ è¿™æ ·çš„è¯å²‚ä¸æ˜¯æœ‰é—®é¢˜ã€‚æ˜æ˜ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨äº†upæ–¹æ³•å°±æ˜¯é‡Šæ”¾ä¿¡å·é‡ å¦ä¸€ä¸ªçº¿ç¨‹è·å¾—è¿™ä¸ªä¿¡å·é‡çš„æ—¶å€™å‘ç°å®ƒçš„è®¡æ•°å™¨æ˜¯-1ä¾æ—§å°äºé›¶åˆ™è¿›å…¥é˜»å¡çŠ¶æ€ ","like_count":0},{"had_liked":false,"id":84389,"user_name":"Juc","can_delete":false,"product_type":"c1","uid":1217566,"ip_address":"","ucode":"EF82A73FAA7F8D","user_header":"https://static001.geekbang.org/account/avatar/00/12/94/1e/973cda79.jpg","comment_is_top":false,"comment_ctime":1554857017,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554857017","product_id":100023901,"comment_content":"è€å¸ˆå¯ä»¥å…¬å¸ƒä¸€ä¸‹å®Œæ•´çš„ä»£ç åˆ°githubä¸Šå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":83899,"user_name":"ken","can_delete":false,"product_type":"c1","uid":1048245,"ip_address":"","ucode":"A43E42B541624D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fe/b5/df0f658f.jpg","comment_is_top":false,"comment_ctime":1554730781,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554730781","product_id":100023901,"comment_content":"ä¿¡å·é‡æä¾›çš„æ–¹æ³•æ˜¯å®‰å…¨çš„ï¼Œä½¿ç”¨ä¿¡å·é‡çš„æ–¹æ³•æ”¯æŒå¤šä¸ªçº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒºï¼Œæ­¤æ—¶ä¸´ç•ŒåŒºä¹Ÿæ˜¯ä¸€ä¸ªå¤šçº¿çº¿ç¨‹çš„åœºæ™¯æ‰€ä»¥éœ€è¦ä½¿ç”¨Vectoræ“ä½œlistã€‚","like_count":0},{"had_liked":false,"id":83634,"user_name":"å¿ƒä¸­æ— å‰‘","can_delete":false,"product_type":"c1","uid":1479311,"ip_address":"","ucode":"85C27AC7523EE4","user_header":"https://static001.geekbang.org/account/avatar/00/16/92/8f/0378e325.jpg","comment_is_top":false,"comment_ctime":1554687562,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554687562","product_id":100023901,"comment_content":"è€å¸ˆçš„æ± å­ä¾‹å­ï¼Œåˆ›å»ºå¯¹è±¡æ± çš„æ—¶å€™ï¼Œæ³›å‹Long,String,è¿™ä¸€æ®µæŠ¥é”™å•Š","like_count":0},{"had_liked":false,"id":83341,"user_name":"zero","can_delete":false,"product_type":"c1","uid":1299615,"ip_address":"","ucode":"528DD5C8399AEC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKlwpFM3tkeG15YqyJTYWkfqkdmro9POq6SicYm57TaEFDOUZCXjoe0Z0Iz6UibGQqic3icJRsHdFzibtw/132","comment_is_top":false,"comment_ctime":1554540268,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1554540268","product_id":100023901,"comment_content":"ArrayListçš„removeå’Œaddæ–¹æ³•ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ŒVectorå¯ä»¥ä¿è¯addã€removeæ˜¯çº¿ç¨‹å®‰å…¨ã€‚æ‰€åœ¨å¯¹è±¡æ± çš„ä¾‹å­ä¸­ï¼Œå¦‚æœä½¿ç”¨ArrayListæ›¿æ¢æ‰Vectorçš„è¯ï¼Œåœ¨ç”±å¤šä¸ªçº¿ç¨‹ä»çº¿ç¨‹æ± è·å–å¯¹è±¡æ˜¯ä¼šå‡ºç°å¹¶å‘é—®é¢˜ã€‚","like_count":0},{"had_liked":false,"id":83247,"user_name":"æµ·é¸¿","can_delete":false,"product_type":"c1","uid":1104275,"ip_address":"","ucode":"7074EF94EA70AD","user_header":"https://static001.geekbang.org/account/avatar/00/10/d9/93/098e5ef5.jpg","comment_is_top":false,"comment_ctime":1554479202,"is_pvip":false,"replies":[{"id":"30267","content":"æ˜¯ğŸ˜‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554709424,"ip_address":"","comment_id":83247,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1554479202","product_id":100023901,"comment_content":"Semaphore å¯ä»¥å…è®¸å¤šä¸ªçº¿ç¨‹è®¿é—®ä¸€ä¸ªä¸´ç•ŒåŒºã€‚åƒæ± èµ„æºé‚£æ ·ï¼Œè¿›å…¥ä¹‹åè¿˜æ˜¯å¾—æ§åˆ¶èµ„æºçš„è·å–å•Šï¼Œä¸ç„¶è¿˜æ˜¯ä¼šäº§ç”Ÿå¹¶å‘é—®é¢˜å•Šï¼Œä¸æ˜¯å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445937,"discussion_content":"æ˜¯ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554709424,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2330905,"avatar":"https://static001.geekbang.org/account/avatar/00/23/91/19/6a3e7efc.jpg","nickname":"ç¨‹åºå‘˜9527","note":"","ucode":"1A1609F6BEAD84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380765,"discussion_content":"ä¸´ç•ŒåŒºé‡Œé¢çš„å…±äº«å˜é‡éœ€è¦è‡ªå·±æ§åˆ¶çº¿ç¨‹å®‰å…¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624690993,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83236,"user_name":"ç©ºçŸ¥","can_delete":false,"product_type":"c1","uid":1013283,"ip_address":"","ucode":"C448E98238DD36","user_header":"https://static001.geekbang.org/account/avatar/00/0f/76/23/31e5e984.jpg","comment_is_top":false,"comment_ctime":1554475380,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554475380","product_id":100023901,"comment_content":"ä¸èƒ½ arraylistçš„remove addæ“ä½œæ²¡æœ‰åŠ é”, ä¿¡å·é‡å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œ,å¯èƒ½ä¿©çº¿ç¨‹æ“ä½œ removeæ“ä½œåŒä¸€ä¸ªå¯¹è±¡","like_count":0},{"had_liked":false,"id":83188,"user_name":"å†°æ¿€å‡Œçš„çœ¼æ³ª","can_delete":false,"product_type":"c1","uid":1087945,"ip_address":"","ucode":"5DCB974667E93A","user_header":"https://static001.geekbang.org/account/avatar/00/10/99/c9/a7c77746.jpg","comment_is_top":false,"comment_ctime":1554454913,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554454913","product_id":100023901,"comment_content":"semå¯ä»¥ä¿éšœä¸€ç±»èµ„æºæœ€å¤šæœ‰å¤šå°‘å¹¶å‘ä½¿ç”¨ï¼Œä½†æ˜¯èµ„æºçš„å¹¶å‘å®‰å…¨éœ€è¦å•ç‹¬è€ƒè™‘","like_count":0},{"had_liked":false,"id":83131,"user_name":"ZOUå¿—ä¼Ÿ","can_delete":false,"product_type":"c1","uid":1029179,"ip_address":"","ucode":"439779871CC992","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b4/3b/a1f7e3a4.jpg","comment_is_top":false,"comment_ctime":1554432332,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554432332","product_id":100023901,"comment_content":"æ˜ç™½äº†ï¼Œç”¨ä¿¡å·é‡æ¯”ç®¡ç¨‹çš„ä¼˜åŠ¿æ˜¯ï¼Œä¿¡å·é‡ä¸ç”¨å†å¦å¤–åˆ¤æ–­å¯¹è±¡æ± çš„å¤§å°ï¼Œè°¢è°¢è€å¸ˆğŸ‘ ","like_count":0},{"had_liked":false,"id":83125,"user_name":"æ˜“å„¿æ˜“","can_delete":false,"product_type":"c1","uid":1242864,"ip_address":"","ucode":"B15D1031CA841E","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqLcWH3mSPmhjrs1aGL4b3TqI7xDqWWibM4nYFrRlp0z7FNSWaJz0mqovrgIA7ibmrPt8zRScSfRaqQ/132","comment_is_top":false,"comment_ctime":1554430795,"is_pvip":false,"replies":[{"id":"30068","content":"æ¡æ¡å¤§è·¯é€šç½—é©¬ï¼Œéƒ½å¯ä»¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554478987,"ip_address":"","comment_id":83125,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554430795","product_id":100023901,"comment_content":"é™æµå™¨ï¼Œå¹³æ—¶è‡ªå·±å¼€å‘çš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯ç®€å•ä½¿ç”¨é˜»å¡é˜Ÿåˆ—å°±å¯ä»¥äº†å‘¢ï¼Ÿå’Œä¿¡å·é‡æ¯”èµ·æ¥æœ‰ä»€ä¹ˆå·®åˆ«å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445873,"discussion_content":"æ¡æ¡å¤§è·¯é€šç½—é©¬ï¼Œéƒ½å¯ä»¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554478987,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83076,"user_name":"WP","can_delete":false,"product_type":"c1","uid":1105956,"ip_address":"","ucode":"4A24C6CAA70220","user_header":"https://static001.geekbang.org/account/avatar/00/10/e0/24/4529f2a4.jpg","comment_is_top":false,"comment_ctime":1554394080,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554394080","product_id":100023901,"comment_content":"ç‹è€å¸ˆçš„è¿™ä¸ªä¸“æ è®©æˆ‘å—ç›ŠåŒªæµ…å•Šï¼Œæ”¶è·å¤šå¤šï¼Œå“ˆå“ˆï¼ŒæœŸå¾…åé¢çš„æ–‡ç« ~~","like_count":0},{"had_liked":false,"id":83065,"user_name":"Presley","can_delete":false,"product_type":"c1","uid":1215219,"ip_address":"","ucode":"D8F125835F4903","user_header":"https://static001.geekbang.org/account/avatar/00/12/8a/f3/7c89d00e.jpg","comment_is_top":false,"comment_ctime":1554389988,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554389988","product_id":100023901,"comment_content":"éœ€è¦ä¿è¯10ä¸ªçº¿ç¨‹çš„çº¿ç¨‹å®‰å…¨","like_count":0},{"had_liked":false,"id":83054,"user_name":"WP","can_delete":false,"product_type":"c1","uid":1105956,"ip_address":"","ucode":"4A24C6CAA70220","user_header":"https://static001.geekbang.org/account/avatar/00/10/e0/24/4529f2a4.jpg","comment_is_top":false,"comment_ctime":1554384888,"is_pvip":false,"replies":[{"id":"29985","content":"å¹¶å‘ç¨‹åºå°±è¿™æ ·ï¼Œä¸€ä¸å°å¿ƒå°±é”™ï¼Œè°éƒ½å…ä¸äº†çŠ¯è¿™ç§é”™è¯¯ğŸ˜‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554392598,"ip_address":"","comment_id":83054,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554384888","product_id":100023901,"comment_content":"æˆ‘å¥½åƒçŸ¥é“åŸå› äº†   finallyé‡Œé¢çš„å›æ”¶å’Œè®¡æ•°å™¨é¡ºåºè°ƒæ•´ä¸‹å°±å¯¹äº†   æˆ‘é”™äº†~~","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445837,"discussion_content":"å¹¶å‘ç¨‹åºå°±è¿™æ ·ï¼Œä¸€ä¸å°å¿ƒå°±é”™ï¼Œè°éƒ½å…ä¸äº†çŠ¯è¿™ç§é”™è¯¯ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554392598,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83053,"user_name":"WP","can_delete":false,"product_type":"c1","uid":1105956,"ip_address":"","ucode":"4A24C6CAA70220","user_header":"https://static001.geekbang.org/account/avatar/00/10/e0/24/4529f2a4.jpg","comment_is_top":false,"comment_ctime":1554384768,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554384768","product_id":100023901,"comment_content":"mainé‡Œé¢çš„å¾ªç¯åˆ›å»ºçº¿ç¨‹æ•°é‡10æ²¡é—®é¢˜    è®¾å®šå¤§ä¸€äº›å°±ä¼šé‡åˆ°ç©ºæŒ‡é’ˆ","like_count":0},{"had_liked":false,"id":83051,"user_name":"WP","can_delete":false,"product_type":"c1","uid":1105956,"ip_address":"","ucode":"4A24C6CAA70220","user_header":"https://static001.geekbang.org/account/avatar/00/10/e0/24/4529f2a4.jpg","comment_is_top":false,"comment_ctime":1554384490,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554384490","product_id":100023901,"comment_content":"package com.zzu.concurrent;<br>import java.util.List;<br>import java.util.Vector;<br>import java.util.concurrent.Semaphore;<br>import java.util.function.Function;<br>&#47;**<br> * @Corp<br> * @Description: ç»ƒä¹ å¤šçº¿ç¨‹<br> * @Author hotwater<br> * @Date 2019å¹´04æœˆ04æ—¥  17:47<br> * @Version Version2.0.0<br> *&#47;<br>public class ConcurrentPool&lt;T, R&gt; {<br>&#47;&#47; æ ¸å¿ƒä»£ç ï¼šå®ç°ä¸€ä¸ªå¯¹è±¡æ± çš„é™æµå™¨<br>    &#47;&#47;å¯¹è±¡æ± å­<br>      volatile List&lt;T&gt; pool = new Vector&lt;T&gt;();<br>    &#47;&#47;é™æµå™¨<br>    final Semaphore semaphore;<br><br><br>    public ConcurrentPool(int poolSize, T t) {<br>        &#47;&#47;åˆå§‹åŒ–å¯¹è±¡æ± æ“ä½œ<br>        for (int x = 0; x &lt; poolSize; x++) {<br>            pool.add(t);<br>        }<br>        &#47;&#47;åˆå§‹åŒ–é™æµå™¨<br>        this.semaphore = new Semaphore(poolSize);<br>    }<br><br>    &#47;&#47;æ‰§è¡Œå™¨<br>    R exec(Function&lt;T, R&gt; function) {<br>        T remove = null;<br>        try {<br><br>            &#47;&#47;ç”³è¯·èµ„æº<br>            System.err.println(&quot;çº¿ç¨‹&quot;+Thread.currentThread().getName()+&quot;ç”³è¯·èµ„æºå‰æ± å­å¤§å°ï¼š&quot;+pool.size());<br>            semaphore.acquire();<br>            &#47;&#47;ä»æ± å­ä¸­ç§»é™¤<br>            remove = pool.remove(0);<br>            System.err.println(&quot;çº¿ç¨‹&quot;+Thread.currentThread().getName()+&quot;ç”³è¯·èµ„æºåæ± å­å¤§å°ï¼š&quot;+pool.size());<br>             return function.apply(remove);<br>        } catch (Exception e) {<br>            e.printStackTrace();<br>        } finally {<br>            &#47;&#47;å›æ”¶èµ„æº<br>            System.err.println(&quot;çº¿ç¨‹&quot;+Thread.currentThread().getName()+&quot;å›æ”¶èµ„æºå‰æ± å­å¤§å°ï¼š&quot;+pool.size());<br>            semaphore.release();<br>            pool.add(remove);<br>            System.err.println(&quot;çº¿ç¨‹&quot;+Thread.currentThread().getName()+&quot;å›æ”¶èµ„æºåæ± å­å¤§å°ï¼š&quot;+pool.size());<br>        }<br>        return null;<br>    }<br><br>    public static void main(String[] args) {<br>        ConcurrentPool&lt;Integer,String&gt;pool=new ConcurrentPool&lt;&gt;(10,2);<br>        for (int x=0;x&lt;10;x++) {<br>            new Thread(new Runnable() {<br>                @Override<br>                public void run() {<br>                   pool.exec(t-&gt;{<br>                        System.err.println(Thread.currentThread().getName()+&quot;FUNCTIONå‡½æ•°æ‰§è¡Œï¼š&quot;+t);<br>                        return t.toString();<br>                    });<br>                }<br>            }).start();<br>        }<br>    }<br>}","like_count":0},{"had_liked":false,"id":83043,"user_name":"æ©˜å­","can_delete":false,"product_type":"c1","uid":1368522,"ip_address":"","ucode":"EDF6145878F897","user_header":"https://static001.geekbang.org/account/avatar/00/14/e1/ca/d8b0835f.jpg","comment_is_top":false,"comment_ctime":1554382743,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554382743","product_id":100023901,"comment_content":"AQSä¹Ÿæ˜¯ç”¨CASå®ç°çš„ï¼Œä¿¡å·é‡å› ä¸ºå¯ä»¥è®¾ç½®æ•°é‡ï¼Œæ‰€ä»¥ä¸€æ¬¡ä¼šæœ‰å¤šä¸ªçº¿ç¨‹æ“ä½œlistä¹Ÿå°±æ˜¯åŸå­æ€§ä¸èƒ½ä¿è¯ã€‚","like_count":0},{"had_liked":false,"id":83025,"user_name":"WP","can_delete":false,"product_type":"c1","uid":1105956,"ip_address":"","ucode":"4A24C6CAA70220","user_header":"https://static001.geekbang.org/account/avatar/00/10/e0/24/4529f2a4.jpg","comment_is_top":false,"comment_ctime":1554376266,"is_pvip":false,"replies":[{"id":"29974","content":"æœ€å¥½æŠŠä»£ç å¸–å‡ºæ¥<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554379673,"ip_address":"","comment_id":83025,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554376266","product_id":100023901,"comment_content":"å°è¯•è·‘æ›´å¤šçº¿ç¨‹ä¼šæœ‰ç©ºæŒ‡é’ˆé—®é¢˜ï¼š<br>17è¡Œä»£ç ï¼št = pool.remove(0);<br>32è¡Œä»£ç ï¼šreturn t.toString();<br>æ—¢ç„¶ä¸Šæ–‡çš„16è¡Œä»£ç  sem.acquire();è·å–ä¸åˆ°ä¿¡å·é‡å°±ä¼šçº¿ç¨‹é˜»å¡ï¼Œé‚£ä¹ˆä¸ºå•¥è¿˜ä¼šç©ºæŒ‡é’ˆå‘¢ï¼Œæ˜¯æˆ‘ç†è§£çš„é—®é¢˜ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445823,"discussion_content":"æœ€å¥½æŠŠä»£ç å¸–å‡ºæ¥\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554379673,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83021,"user_name":"ç›¸ä¿¡çš„åŠ›é‡","can_delete":false,"product_type":"c1","uid":1313827,"ip_address":"","ucode":"C3B807AD5DBE85","user_header":"https://static001.geekbang.org/account/avatar/00/14/0c/23/0193e869.jpg","comment_is_top":false,"comment_ctime":1554374754,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554374754","product_id":100023901,"comment_content":"ArrayListçš„addå’Œremoveæ–¹æ³•ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¹¶å‘æ‰§è¡Œå¯èƒ½ä¼šå‡ºé”™ã€‚","like_count":0},{"had_liked":false,"id":83016,"user_name":"KnightÂ²ÂºÂ¹â¸","can_delete":false,"product_type":"c1","uid":1089754,"ip_address":"","ucode":"BDCB830B6A730F","user_header":"https://static001.geekbang.org/account/avatar/00/10/a0/da/4f50f1b2.jpg","comment_is_top":false,"comment_ctime":1554373567,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554373567","product_id":100023901,"comment_content":"æˆ‘æœ€è¿‘ä¹Ÿé‡åˆ°äº†å¯¹è±¡æ± çš„éœ€æ±‚ã€‚ä½†æ˜¯æˆ‘çš„åœºæ™¯æ˜¯å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶ä½¿ç”¨æŸä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨ç‰¹å®šçš„æ—¶é—´éœ€è¦å¯¹è±¡è¿›è¡Œå›æ”¶å®é™…æ˜¯ä½¿ç”¨æ–°çš„å¯¹è±¡è¿›è¡Œæ›¿æ¢ï¼ŒæŠŠæ—§çš„å¯¹è±¡å›æ”¶å¾…ä¸‹æ¬¡ä½¿ç”¨ï¼›ä¸”å›æ”¶çš„é¢‘ç‡éå¸¸ä½ï¼Œä¸€å¤©åªå›æ”¶ä¸€æ¬¡ï¼‰ã€‚æ²¡æœ‰æ‰“ç®—ä½¿ç”¨è¯»å†™é”ï¼Œå› ä¸ºæ€§èƒ½è¦æ±‚éå¸¸é«˜ã€‚","like_count":0},{"had_liked":false,"id":83007,"user_name":"liurh","can_delete":false,"product_type":"c1","uid":1468570,"ip_address":"","ucode":"9EFF41023D60D1","user_header":"","comment_is_top":false,"comment_ctime":1554371298,"is_pvip":false,"replies":[{"id":"29975","content":"ğŸ‘ğŸ‘<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554379702,"ip_address":"","comment_id":83007,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554371298","product_id":100023901,"comment_content":"ä¸å¯ä»¥ï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶è¿›å…¥ä¸´ç•ŒåŒºï¼Œremoveæ–¹æ³•å¯èƒ½ä¼šç§»é™¤åŒä¸€ä¸ªå¯¹è±¡","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445815,"discussion_content":"ğŸ‘ğŸ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554379702,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82961,"user_name":"å¼ å¤©å±¹","can_delete":false,"product_type":"c1","uid":1477612,"ip_address":"","ucode":"8BD6BD6DCF0F4F","user_header":"https://static001.geekbang.org/account/avatar/00/16/8b/ec/dc03f5ad.jpg","comment_is_top":false,"comment_ctime":1554360209,"is_pvip":false,"replies":[{"id":"29976","content":"ğŸ‘ğŸ‘ğŸ‘<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554379725,"ip_address":"","comment_id":82961,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554360209","product_id":100023901,"comment_content":"å¦‚æœä¿¡å·é‡åˆå§‹åŒ–ä¸º1 å°±å¯ä»¥ç”¨ArrayListï¼Œå› ä¸ºè¿™ä¸ªæ—¶å€™execç›¸å½“äºä¸€ä¸ªçº¿ç¨‹çš„ä¸´ç•ŒåŒºç±»ä¼¼äºäº’æ–¥é”ï¼Œä½†æ˜¯ç°åœ¨åˆå§‹åŒ–ä¸º10ï¼Œä¹Ÿå°±æ„å‘³ç€å¯èƒ½æœ‰å¤šäºä¸€ä¸ªçº¿ç¨‹åŒæ—¶åœ¨æ‰§è¡Œexecæ–¹æ³•ï¼Œä¹Ÿå°±æ„å‘³ç€list.removeæ–¹æ³•ä¸­å¯èƒ½å‘ç”Ÿçº¿ç¨‹åˆ‡æ¢ï¼Œremoveæ–¹æ³•æ¶‰åŠsizeçš„åˆ¤æ–­è‚¯å®šæ˜¯æœ‰é™æ€æ¡ä»¶çš„ï¼Œæ‰€ä»¥å¿…é¡»ç”¨vectorä¿è¯removeæ“ä½œçš„åŸå­æ€§","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445795,"discussion_content":"ğŸ‘ğŸ‘ğŸ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554379725,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82915,"user_name":"é¸ ç¿±","can_delete":false,"product_type":"c1","uid":1116568,"ip_address":"","ucode":"7D498AF2BC4289","user_header":"https://static001.geekbang.org/account/avatar/00/11/09/98/b11c372b.jpg","comment_is_top":false,"comment_ctime":1554347986,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1554347986","product_id":100023901,"comment_content":"çœ‹è§è¯„è®ºåŒºè¿˜æœ‰åŒå­¦è¿˜åœ¨è¯´ç”±äºhappen-beforeï¼Œå¯ä»¥ä½¿ç”¨arraylist<br>æœç„¶è¿˜æ˜¯æ²¡æœ‰ææ‡‚å¯è§æ€§å’Œå¹¶å‘å®‰å…¨çš„å…³ç³»å‘¢","like_count":0,"discussions":[{"author":{"id":1252567,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1c/d7/c176ad9f.jpg","nickname":"ç»å°˜è€Œå»","note":"","ucode":"690E4E6B3E39DD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":362993,"discussion_content":"è§£é‡Šä¸€ä¸‹ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617087047,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82897,"user_name":"Rayjun","can_delete":false,"product_type":"c1","uid":1002514,"ip_address":"","ucode":"61A3D1A3D03569","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4c/12/f0c145d4.jpg","comment_is_top":false,"comment_ctime":1554345456,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1554345456","product_id":100023901,"comment_content":"æ–‡ä¸­è¯´çš„è®¡æ•°å™¨å’Œç­‰å¾…é˜Ÿåˆ—å¯¹å¤–åº”è¯¥æ˜¯ä¸é€æ˜çš„å§","like_count":0},{"had_liked":false,"id":82889,"user_name":"è´ºå®‡","can_delete":false,"product_type":"c1","uid":1445040,"ip_address":"","ucode":"55854825CC4AD2","user_header":"https://static001.geekbang.org/account/avatar/00/16/0c/b0/26c0e53f.jpg","comment_is_top":false,"comment_ctime":1554344126,"is_pvip":true,"replies":[{"id":"30071","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554479323,"ip_address":"","comment_id":82889,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554344126","product_id":100023901,"comment_content":"è™½ç„¶ä¿¡å·é‡çš„downå’Œupéƒ½æ˜¯åŸå­æ“ä½œï¼Œçº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯ä¸¤ä¸ªæ–¹æ³•ä¸­é—´çš„æ“ä½œä¸ä¸€å®šä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œæ‰€ä»¥è¿™é‡Œè¿˜æ˜¯è¦é€šè¿‡ç®¡ç¨‹æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚æˆ‘è§‰å¾—Vertorå¯ä»¥æ¢æˆBlockingQueue,æ•ˆç‡æ›´é«˜ä¸€ç‚¹","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445766,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554479323,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82888,"user_name":"in","can_delete":false,"product_type":"c1","uid":1437481,"ip_address":"","ucode":"55329844488EA7","user_header":"https://static001.geekbang.org/account/avatar/00/15/ef/29/5f0094ff.jpg","comment_is_top":false,"comment_ctime":1554343903,"is_pvip":false,"replies":[{"id":"29971","content":"æŠŠreturnåˆ†æˆä¸¤è¡Œå†™æ˜¯ä¸æ˜¯å°±ç†è§£äº†å‘¢ğŸ˜‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554379531,"ip_address":"","comment_id":82888,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554343903","product_id":100023901,"comment_content":"finally è¯­å¥å—æ˜¯åœ¨ try æˆ–è€… catch ä¸­çš„ return è¯­å¥ä¹‹å‰æ‰§è¡Œçš„ã€‚<br> try {<br>      t = pool.remove(0);<br>      return func.apply(t);<br>    } finally {<br>      pool.add(t);<br>      sem.release();<br>    }<br>é‚£å›è°ƒå‡½æ•°æ²¡æ‰§è¡Œå®Œï¼Œå¯¹è±¡å°±è¢«é‡Šæ”¾äº†ï¼Œè¿™ç‚¹æœ‰ç‚¹ç–‘é—®ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445765,"discussion_content":"æŠŠreturnåˆ†æˆä¸¤è¡Œå†™æ˜¯ä¸æ˜¯å°±ç†è§£äº†å‘¢ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554379531,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82885,"user_name":"ZOUå¿—ä¼Ÿ","can_delete":false,"product_type":"c1","uid":1029179,"ip_address":"","ucode":"439779871CC992","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b4/3b/a1f7e3a4.jpg","comment_is_top":false,"comment_ctime":1554343316,"is_pvip":false,"replies":[{"id":"29972","content":"ç”¨ç®¡ç¨‹å†™ä¸€ä¸ªï¼Œæ¯”è¾ƒä¸€ä¸‹å°±çŸ¥é“äº†<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554379587,"ip_address":"","comment_id":82885,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554343316","product_id":100023901,"comment_content":"è¿™ä¸ªå¯¹è±¡æ± ç”¨ä¿¡å·é‡å®ç°æ¯”ç®¡ç¨‹å®ç°çš„ä¼˜åŠ¿åœ¨å“ªï¼Ÿæ‹¿å¯¹è±¡çš„æ—¶å€™çº¿ç¨‹ä¸æ˜¯è¿˜æ˜¯è¦äº’æ–¥æ‹¿å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445763,"discussion_content":"ç”¨ç®¡ç¨‹å†™ä¸€ä¸ªï¼Œæ¯”è¾ƒä¸€ä¸‹å°±çŸ¥é“äº†\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554379587,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82880,"user_name":"xiyi","can_delete":false,"product_type":"c1","uid":1447833,"ip_address":"","ucode":"E368673D610D91","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIBarfQrgZjEW8uUgvQckubEIFwNCJL93OygIgx3fCkObgRzSdo2baVWRd1C8mV6VDGKuoBFic4ZZA/132","comment_is_top":false,"comment_ctime":1554342897,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554342897","product_id":100023901,"comment_content":"Arraylist ä¸è¡Œï¼Œå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå¤šçº¿ç¨‹å¹¶å‘åˆ é™¤å¯èƒ½å¯¼è‡´ä¸¤ä¸ªçº¿ç¨‹ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡ï¼ä¸¤ä¸ªçº¿ç¨‹çš„removeæ“ä½œæ²¡æœ‰happen-beforeçš„å…³ç³»ï¼Œæ²¡æœ‰æ»¡è¶³ä¼ é€’æ€§","like_count":0},{"had_liked":false,"id":82879,"user_name":"æ˜“æ°´å—é£","can_delete":false,"product_type":"c1","uid":1123818,"ip_address":"","ucode":"A2A0F18228A5D0","user_header":"https://static001.geekbang.org/account/avatar/00/11/25/ea/ec869117.jpg","comment_is_top":false,"comment_ctime":1554342832,"is_pvip":false,"replies":[{"id":"29973","content":"è¿™ä¸ªæ°´å¹³é«˜çš„è‡ªå·±çœ‹æºç å§","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554379620,"ip_address":"","comment_id":82879,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554342832","product_id":100023901,"comment_content":"è€å¸ˆä»¥åä¼šè®²ä¸‹ä¿¡å·é‡åº•å±‚åŸç†å—","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445762,"discussion_content":"è¿™ä¸ªæ°´å¹³é«˜çš„è‡ªå·±çœ‹æºç å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554379620,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82877,"user_name":"kevin","can_delete":false,"product_type":"c1","uid":1237471,"ip_address":"","ucode":"5F6D82F118C6F6","user_header":"https://static001.geekbang.org/account/avatar/00/12/e1/df/6e6a4c6b.jpg","comment_is_top":false,"comment_ctime":1554342446,"is_pvip":false,"replies":[{"id":"30073","content":"ä¸å¯ä»¥ï¼Œæœ‰å¤šä¸ªçº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒº","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554479387,"ip_address":"","comment_id":82877,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554342446","product_id":100023901,"comment_content":"å¯¹äºè¯¾åé¢˜ï¼Œé˜Ÿåˆ—å·²é€šè¿‡semaphoreä¿æŠ¤ï¼Œå¯ä»¥ä½¿ç”¨ArrayList","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445760,"discussion_content":"ä¸å¯ä»¥ï¼Œæœ‰å¤šä¸ªçº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554479387,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82868,"user_name":"è¥¿è¥¿å¼—ä¸å¡å¤«å¡","can_delete":false,"product_type":"c1","uid":1001710,"ip_address":"","ucode":"B4C27B8335B76A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/ee/872ad07e.jpg","comment_is_top":false,"comment_ctime":1554341430,"is_pvip":true,"replies":[{"id":"29980","content":"ğŸ‘<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554380572,"ip_address":"","comment_id":82868,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554341430","product_id":100023901,"comment_content":"ä¸å¯ä»¥ä½¿ç”¨ArrayListã€‚å¦‚æœé™æµNï¼Œé‚£å°±ç›¸å½“äºå…è®¸Nä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ï¼Œè€ŒArrayListä¸æ˜¯çº¿ç¨‹å®‰å…¨","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445755,"discussion_content":"ğŸ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554380572,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82861,"user_name":"æ³¢æ³¢","can_delete":false,"product_type":"c1","uid":1155827,"ip_address":"","ucode":"4344D9F4486D42","user_header":"https://static001.geekbang.org/account/avatar/00/11/a2/f3/aa504fa6.jpg","comment_is_top":false,"comment_ctime":1554340462,"is_pvip":false,"replies":[{"id":"29981","content":"å¹¶å‘åŒ…é‡Œä¸œè¥¿å¤ªå¤šï¼Œåªèƒ½é«˜åº¦æ¦‚æ‹¬äº†ğŸ˜‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554380741,"ip_address":"","comment_id":82861,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554340462","product_id":100023901,"comment_content":"è¯„è®ºåŒºè¶Šæ¥è¶Šå°‘ï¼Œæˆ‘æ¥æ°´ä¸€ä¸‹ï¼Œè®²çš„æœ‰éš¾åº¦ï¼Œå·²ç»å¼€å§‹ç¬¬äºŒè½®å­¦ä¹ è€å¸ˆè¯¾ç¨‹äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445751,"discussion_content":"å¹¶å‘åŒ…é‡Œä¸œè¥¿å¤ªå¤šï¼Œåªèƒ½é«˜åº¦æ¦‚æ‹¬äº†ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554380741,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82856,"user_name":"å›å“¥èŠæŠ€æœ¯","can_delete":false,"product_type":"c1","uid":1325816,"ip_address":"","ucode":"2C9A22BCE4C79E","user_header":"https://static001.geekbang.org/account/avatar/00/14/3a/f8/c1a939e7.jpg","comment_is_top":false,"comment_ctime":1554339854,"is_pvip":false,"replies":[{"id":"30072","content":"ä¸å¯ä»¥ï¼Œæœ‰å¤šä¸ªçº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒº","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554479370,"ip_address":"","comment_id":82856,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554339854","product_id":100023901,"comment_content":"å·²ç»ç”¨ä¿¡å·é‡åšäº†æ§åˆ¶ï¼Œç”¨arraylistä¹Ÿæ˜¯å¯ä»¥çš„","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445748,"discussion_content":"ä¸å¯ä»¥ï¼Œæœ‰å¤šä¸ªçº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554479370,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82852,"user_name":"undifined","can_delete":false,"product_type":"c1","uid":1068920,"ip_address":"","ucode":"449CB4CD2DC089","user_header":"https://static001.geekbang.org/account/avatar/00/10/4f/78/c3d8ecb0.jpg","comment_is_top":false,"comment_ctime":1554339636,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554339636","product_id":100023901,"comment_content":"ä¸å¯ä»¥ï¼Œå¦‚æœæ¢æˆ ArrayListï¼Œå³ä½¿æœ‰Semaphoreï¼Œä¹Ÿæœ‰å¯èƒ½é€ æˆä¸¤ä¸ªçº¿ç¨‹æ‹¿åˆ°åŒä¸€ä¸ªå¯¹è±¡","like_count":0},{"had_liked":false,"id":82847,"user_name":"é­æ˜¥æ²³","can_delete":false,"product_type":"c1","uid":1117048,"ip_address":"","ucode":"DDD2998C157639","user_header":"https://static001.geekbang.org/account/avatar/00/11/0b/78/22410c47.jpg","comment_is_top":false,"comment_ctime":1554339147,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1554339147","product_id":100023901,"comment_content":"è€å¸ˆä½ å¥½ï¼Œacquireæ–¹æ³•æ˜¯å¦‚ä½•ä¿è¯æ˜¯ä¸€ä¸ªåŸå­æ“ä½œçš„å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":82846,"user_name":"ä¸€é“é˜³å…‰","can_delete":false,"product_type":"c1","uid":1239557,"ip_address":"","ucode":"F35207CCCEC6E2","user_header":"https://static001.geekbang.org/account/avatar/00/12/ea/05/c0d8014d.jpg","comment_is_top":false,"comment_ctime":1554339054,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554339054","product_id":100023901,"comment_content":"å¤šä¸ªçº¿ç¨‹æ‰§è¡Œremoveæ“ä½œï¼Œä½¿ç”¨arrayListä¼šå¯¼è‡´çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå¦‚æœä¿¡å·é‡æ˜¯1,å°±æ²¡æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚","like_count":0},{"had_liked":false,"id":82842,"user_name":"æ°´ç›®æ²¾","can_delete":false,"product_type":"c1","uid":1274495,"ip_address":"","ucode":"FDD1D15C277D58","user_header":"https://static001.geekbang.org/account/avatar/00/13/72/7f/5da093c5.jpg","comment_is_top":false,"comment_ctime":1554338450,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554338450","product_id":100023901,"comment_content":"ä¿¡å·é‡åªèƒ½ä¿è¯Nä¸ªçº¿ç¨‹æ¥å¯¹è±¡æ± ä¸­å–å¯¹è±¡ï¼Œè€Œè¿™ N ä¸ªçº¿ç¨‹æ“ä½œå¯¹è±¡æ± è¿˜æ˜¯éœ€è¦ä¿è¯å®‰å…¨çš„ï¼Œæ‰€æœ‰ vector å¯ä»¥è€Œ arraylist ä¸è¡Œã€‚","like_count":0},{"had_liked":false,"id":82840,"user_name":"å‘¨æ²»æ…§","can_delete":false,"product_type":"c1","uid":1335293,"ip_address":"","ucode":"7D56C4E66BEE17","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKR3ibELhjgVicCNShZCBwvaDxibnzibggG4wUzVkS2mkDxUBZyIs87nDEdJ7PiahJBVoZcuhQ84RxAziag/132","comment_is_top":false,"comment_ctime":1554338404,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554338404","product_id":100023901,"comment_content":"ä¸èƒ½æ¢ï¼Œå½“å¤šä¸ªçº¿ç¨‹åŒæ—¶è¿›å…¥ä¿¡å·é‡è·å–çš„ä¸´ç•Œç‚¹ç‚¹æ—¶ï¼ŒåŒæ—¶æ‰§è¡Œremoveæ–¹æ³•æ˜¯ç°åœºä¸å®‰å…¨çš„åŒç†add","like_count":0},{"had_liked":false,"id":82829,"user_name":"0bug","can_delete":false,"product_type":"c1","uid":1050335,"ip_address":"","ucode":"CADCC882F31784","user_header":"https://static001.geekbang.org/account/avatar/00/10/06/df/60126ff3.jpg","comment_is_top":false,"comment_ctime":1554337497,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554337497","product_id":100023901,"comment_content":"åªæœ‰size ç­‰äº1çš„æ—¶å€™å¯ä»¥ç”¨arraylist","like_count":0},{"had_liked":false,"id":82818,"user_name":"é«˜æº","can_delete":false,"product_type":"c1","uid":1048887,"ip_address":"","ucode":"751B41FD38EF7D","user_header":"https://static001.geekbang.org/account/avatar/00/10/01/37/12e4c9c9.jpg","comment_is_top":false,"comment_ctime":1554334693,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554334693","product_id":100023901,"comment_content":"Arraylistä¸æ˜¯çº¿ç¨‹åŒæ­¥çš„ï¼Œé€ æˆå¤šä¸ªçº¿ç¨‹è¿›å…¥å¯¼è‡´æ•°æ®é”™è¯¯","like_count":0}]}