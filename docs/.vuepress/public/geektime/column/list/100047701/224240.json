{"id":224240,"title":"16 | ç”¨å¥½Java 8çš„æ—¥æœŸæ—¶é—´ç±»ï¼Œå°‘è¸©ä¸€äº›â€œè€ä¸‰æ ·â€çš„å‘","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æœ±æ™”ã€‚ä»Šå¤©ï¼Œæˆ‘æ¥å’Œä½ è¯´è¯´æ¼äººçš„æ—¶é—´é”™ä¹±é—®é¢˜ã€‚</p><p>åœ¨Java 8ä¹‹å‰ï¼Œæˆ‘ä»¬å¤„ç†æ—¥æœŸæ—¶é—´éœ€æ±‚æ—¶ï¼Œä½¿ç”¨Dateã€Calenderå’ŒSimpleDateFormatï¼Œæ¥å£°æ˜æ—¶é—´æˆ³ã€ä½¿ç”¨æ—¥å†å¤„ç†æ—¥æœŸå’Œæ ¼å¼åŒ–è§£ææ—¥æœŸæ—¶é—´ã€‚ä½†æ˜¯ï¼Œè¿™äº›ç±»çš„APIçš„ç¼ºç‚¹æ¯”è¾ƒæ˜æ˜¾ï¼Œæ¯”å¦‚å¯è¯»æ€§å·®ã€æ˜“ç”¨æ€§å·®ã€ä½¿ç”¨èµ·æ¥å†—ä½™ç¹çï¼Œè¿˜æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p><p>å› æ­¤ï¼ŒJava 8æ¨å‡ºäº†æ–°çš„æ—¥æœŸæ—¶é—´ç±»ã€‚æ¯ä¸€ä¸ªç±»åŠŸèƒ½æ˜ç¡®æ¸…æ™°ã€ç±»ä¹‹é—´åä½œç®€å•ã€APIå®šä¹‰æ¸…æ™°ä¸è¸©å‘ï¼ŒAPIåŠŸèƒ½å¼ºå¤§æ— éœ€å€ŸåŠ©å¤–éƒ¨å·¥å…·ç±»å³å¯å®Œæˆæ“ä½œï¼Œå¹¶ä¸”çº¿ç¨‹å®‰å…¨ã€‚</p><p>ä½†æ˜¯ï¼ŒJava 8åˆšæ¨å‡ºçš„æ—¶å€™ï¼Œè¯¸å¦‚åºåˆ—åŒ–ã€æ•°æ®è®¿é—®ç­‰ç±»åº“éƒ½è¿˜ä¸æ”¯æŒJava 8çš„æ—¥æœŸæ—¶é—´ç±»å‹ï¼Œéœ€è¦åœ¨æ–°è€ç±»ä¸­æ¥å›è½¬æ¢ã€‚æ¯”å¦‚ï¼Œåœ¨ä¸šåŠ¡é€»è¾‘å±‚ä½¿ç”¨LocalDateTimeï¼Œå­˜å…¥æ•°æ®åº“æˆ–è€…è¿”å›å‰ç«¯çš„æ—¶å€™è¿˜è¦åˆ‡æ¢å›Dateã€‚å› æ­¤ï¼Œå¾ˆå¤šåŒå­¦è¿˜æ˜¯é€‰æ‹©ä½¿ç”¨è€çš„æ—¥æœŸæ—¶é—´ç±»ã€‚</p><p>ç°åœ¨å‡ å¹´æ—¶é—´è¿‡å»äº†ï¼Œå‡ ä¹æ‰€æœ‰çš„ç±»åº“éƒ½æ”¯æŒäº†æ–°æ—¥æœŸæ—¶é—´ç±»å‹ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿä¸ä¼šæœ‰æ¥å›åˆ‡æ¢ç­‰é—®é¢˜äº†ã€‚ä½†ï¼Œå¾ˆå¤šä»£ç ä¸­å› ä¸ºè¿˜æ˜¯ç”¨çš„é—ç•™çš„æ—¥æœŸæ—¶é—´ç±»ï¼Œå› æ­¤å‡ºç°äº†å¾ˆå¤šæ—¶é—´é”™ä¹±çš„é”™è¯¯å®è·µã€‚æ¯”å¦‚ï¼Œè¯•å›¾é€šè¿‡éšæ„ä¿®æ”¹æ—¶åŒºï¼Œä½¿è¯»å–åˆ°çš„æ•°æ®åŒ¹é…å½“å‰æ—¶é’Ÿï¼›å†æ¯”å¦‚ï¼Œè¯•å›¾ç›´æ¥å¯¹è¯»å–åˆ°çš„æ•°æ®åšåŠ ã€å‡å‡ ä¸ªå°æ—¶çš„æ“ä½œï¼Œæ¥â€œä¿®æ­£æ•°æ®â€ã€‚</p><!-- [[[read_end]]] --><p>ä»Šå¤©ï¼Œæˆ‘å°±é‡ç‚¹ä¸ä½ åˆ†æä¸‹æ—¶é—´é”™ä¹±é—®é¢˜èƒŒåçš„åŸå› ï¼Œçœ‹çœ‹ä½¿ç”¨é—ç•™çš„æ—¥æœŸæ—¶é—´ç±»ï¼Œæ¥å¤„ç†æ—¥æœŸæ—¶é—´åˆå§‹åŒ–ã€æ ¼å¼åŒ–ã€è§£æã€è®¡ç®—ç­‰å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨æ–°æ—¥æœŸæ—¶é—´ç±»æ¥è§£å†³ã€‚</p><h2>åˆå§‹åŒ–æ—¥æœŸæ—¶é—´</h2><p>æˆ‘ä»¬å…ˆä»æ—¥æœŸæ—¶é—´çš„åˆå§‹åŒ–çœ‹èµ·ã€‚å¦‚æœè¦åˆå§‹åŒ–ä¸€ä¸ª2019å¹´12æœˆ31æ—¥11ç‚¹12åˆ†13ç§’è¿™æ ·çš„æ—¶é—´ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä¸¤è¡Œä»£ç å—ï¼Ÿ</p><pre><code>Date date = new Date(2019, 12, 31, 11, 12, 13);\nSystem.out.println(date);\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œè¾“å‡ºçš„æ—¶é—´æ˜¯3029å¹´1æœˆ31æ—¥11ç‚¹12åˆ†13ç§’ï¼š</p><pre><code>Sat Jan 31 11:12:13 CST 3920\n</code></pre><p>ç›¸ä¿¡çœ‹åˆ°è¿™é‡Œï¼Œä½ ä¼šè¯´è¿™æ˜¯æ–°æ‰‹æ‰ä¼šçŠ¯çš„ä½çº§é”™è¯¯ï¼šå¹´åº”è¯¥æ˜¯å’Œ1900çš„å·®å€¼ï¼Œæœˆåº”è¯¥æ˜¯ä»0åˆ°11è€Œä¸æ˜¯ä»1åˆ°12ã€‚</p><pre><code>Date date = new Date(2019 - 1900, 11, 31, 11, 12, 13);\n</code></pre><p>ä½ è¯´çš„æ²¡é”™ï¼Œä½†æ›´é‡è¦çš„é—®é¢˜æ˜¯ï¼Œå½“æœ‰å›½é™…åŒ–éœ€æ±‚æ—¶ï¼Œéœ€è¦ä½¿ç”¨Calendarç±»æ¥åˆå§‹åŒ–æ—¶é—´ã€‚</p><p>ä½¿ç”¨Calendaræ”¹é€ ä¹‹åï¼Œåˆå§‹åŒ–æ—¶å¹´å‚æ•°ç›´æ¥ä½¿ç”¨å½“å‰å¹´å³å¯ï¼Œä¸è¿‡æœˆéœ€è¦æ³¨æ„æ˜¯ä»0åˆ°11ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨Calendar.DECEMBERæ¥åˆå§‹åŒ–æœˆä»½ï¼Œæ›´ä¸å®¹æ˜“çŠ¯é”™ã€‚ä¸ºäº†è¯´æ˜æ—¶åŒºçš„é—®é¢˜ï¼Œæˆ‘åˆ†åˆ«ä½¿ç”¨å½“å‰æ—¶åŒºå’Œçº½çº¦æ—¶åŒºåˆå§‹åŒ–äº†ä¸¤æ¬¡ç›¸åŒçš„æ—¥æœŸï¼š</p><pre><code>Calendar calendar = Calendar.getInstance();\ncalendar.set(2019, 11, 31, 11, 12, 13);\nSystem.out.println(calendar.getTime());\nCalendar calendar2 = Calendar.getInstance(TimeZone.getTimeZone(&quot;America/New_York&quot;));\ncalendar2.set(2019, Calendar.DECEMBER, 31, 11, 12, 13);\nSystem.out.println(calendar2.getTime());\n</code></pre><p>è¾“å‡ºæ˜¾ç¤ºäº†ä¸¤ä¸ªæ—¶é—´ï¼Œè¯´æ˜æ—¶åŒºäº§ç”Ÿäº†ä½œç”¨ã€‚ä½†ï¼Œæˆ‘ä»¬æ›´ä¹ æƒ¯å¹´/æœˆ/æ—¥ æ—¶:åˆ†:ç§’è¿™æ ·çš„æ—¥æœŸæ—¶é—´æ ¼å¼ï¼Œå¯¹ç°åœ¨è¾“å‡ºçš„æ—¥æœŸæ ¼å¼è¿˜ä¸æ»¡æ„ï¼š</p><pre><code>Tue Dec 31 11:12:13 CST 2019\nWed Jan 01 00:12:13 CST 2020\n</code></pre><p>é‚£ï¼Œæ—¶åŒºçš„é—®é¢˜æ˜¯æ€ä¹ˆå›äº‹ï¼Œåˆæ€ä¹ˆæ ¼å¼åŒ–éœ€è¦è¾“å‡ºçš„æ—¥æœŸæ—¶é—´å‘¢ï¼Ÿæ¥ä¸‹æ¥ï¼Œæˆ‘å°±ä¸ä½ é€ä¸€åˆ†æä¸‹è¿™ä¸¤ä¸ªé—®é¢˜ã€‚</p><h2>â€œæ¼äººâ€çš„æ—¶åŒºé—®é¢˜</h2><p>æˆ‘ä»¬çŸ¥é“ï¼Œå…¨çƒæœ‰24ä¸ªæ—¶åŒºï¼ŒåŒä¸€ä¸ªæ—¶åˆ»ä¸åŒæ—¶åŒºï¼ˆæ¯”å¦‚ä¸­å›½ä¸Šæµ·å’Œç¾å›½çº½çº¦ï¼‰çš„æ—¶é—´æ˜¯ä¸ä¸€æ ·çš„ã€‚å¯¹äºéœ€è¦å…¨çƒåŒ–çš„é¡¹ç›®ï¼Œå¦‚æœåˆå§‹åŒ–æ—¶é—´æ—¶æ²¡æœ‰æä¾›æ—¶åŒºï¼Œé‚£å°±ä¸æ˜¯ä¸€ä¸ªçœŸæ­£æ„ä¹‰ä¸Šçš„æ—¶é—´ï¼Œåªèƒ½è®¤ä¸ºæ˜¯æˆ‘çœ‹åˆ°çš„å½“å‰æ—¶é—´çš„ä¸€ä¸ªè¡¨ç¤ºã€‚</p><p>å…³äºDateç±»ï¼Œæˆ‘ä»¬è¦æœ‰ä¸¤ç‚¹è®¤è¯†ï¼š</p><ul>\n<li>ä¸€æ˜¯ï¼ŒDateå¹¶æ— æ—¶åŒºé—®é¢˜ï¼Œä¸–ç•Œä¸Šä»»ä½•ä¸€å°è®¡ç®—æœºä½¿ç”¨new Date()åˆå§‹åŒ–å¾—åˆ°çš„æ—¶é—´éƒ½ä¸€æ ·ã€‚å› ä¸ºï¼ŒDateä¸­ä¿å­˜çš„æ˜¯UTCæ—¶é—´ï¼ŒUTCæ˜¯ä»¥åŸå­é’Ÿä¸ºåŸºç¡€çš„ç»Ÿä¸€æ—¶é—´ï¼Œä¸ä»¥å¤ªé˜³å‚ç…§è®¡æ—¶ï¼Œå¹¶æ— æ—¶åŒºåˆ’åˆ†ã€‚</li>\n<li>äºŒæ˜¯ï¼ŒDateä¸­ä¿å­˜çš„æ˜¯ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œä»£è¡¨çš„æ˜¯ä»1970å¹´1æœˆ1æ—¥0ç‚¹ï¼ˆEpochæ—¶é—´ï¼‰åˆ°ç°åœ¨çš„æ¯«ç§’æ•°ã€‚å°è¯•è¾“å‡ºDate(0)ï¼š</li>\n</ul><pre><code>System.out.println(new Date(0));\nSystem.out.println(TimeZone.getDefault().getID() + &quot;:&quot; + TimeZone.getDefault().getRawOffset()/3600000);\n</code></pre><p>æˆ‘å¾—åˆ°çš„æ˜¯1970å¹´1æœˆ1æ—¥8ç‚¹ã€‚å› ä¸ºæˆ‘æœºå™¨å½“å‰çš„æ—¶åŒºæ˜¯ä¸­å›½ä¸Šæµ·ï¼Œç›¸æ¯”UTCæ—¶å·®+8å°æ—¶ï¼š</p><pre><code>Thu Jan 01 08:00:00 CST 1970\nAsia/Shanghai:8\n</code></pre><p>å¯¹äºå›½é™…åŒ–ï¼ˆä¸–ç•Œå„å›½çš„äººéƒ½åœ¨ä½¿ç”¨ï¼‰çš„é¡¹ç›®ï¼Œå¤„ç†å¥½æ—¶é—´å’Œæ—¶åŒºé—®é¢˜é¦–å…ˆå°±æ˜¯è¦æ­£ç¡®ä¿å­˜æ—¥æœŸæ—¶é—´ã€‚è¿™é‡Œæœ‰ä¸¤ç§ä¿å­˜æ–¹å¼ï¼š</p><ul>\n<li>æ–¹å¼ä¸€ï¼Œä»¥UTCä¿å­˜ï¼Œä¿å­˜çš„æ—¶é—´æ²¡æœ‰æ—¶åŒºå±æ€§ï¼Œæ˜¯ä¸æ¶‰åŠæ—¶åŒºæ—¶é—´å·®é—®é¢˜çš„ä¸–ç•Œç»Ÿä¸€æ—¶é—´ã€‚æˆ‘ä»¬é€šå¸¸è¯´çš„æ—¶é—´æˆ³ï¼Œæˆ–Javaä¸­çš„Dateç±»å°±æ˜¯ç”¨çš„è¿™ç§æ–¹å¼ï¼Œè¿™ä¹Ÿæ˜¯æ¨èçš„æ–¹å¼ã€‚</li>\n<li>æ–¹å¼äºŒï¼Œä»¥å­—é¢é‡ä¿å­˜ï¼Œæ¯”å¦‚å¹´/æœˆ/æ—¥ æ—¶:åˆ†:ç§’ï¼Œä¸€å®šè¦åŒæ—¶ä¿å­˜æ—¶åŒºä¿¡æ¯ã€‚åªæœ‰æœ‰äº†æ—¶åŒºä¿¡æ¯ï¼Œæˆ‘ä»¬æ‰èƒ½çŸ¥é“è¿™ä¸ªå­—é¢é‡æ—¶é—´çœŸæ­£çš„æ—¶é—´ç‚¹ï¼Œå¦åˆ™å®ƒåªæ˜¯ä¸€ä¸ªç»™äººçœ‹çš„æ—¶é—´è¡¨ç¤ºï¼Œåªåœ¨å½“å‰æ—¶åŒºæœ‰æ„ä¹‰ã€‚Calendaræ˜¯æœ‰æ—¶åŒºæ¦‚å¿µçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šè¿‡ä¸åŒçš„æ—¶åŒºåˆå§‹åŒ–Calendarï¼Œå¾—åˆ°äº†ä¸åŒçš„æ—¶é—´ã€‚</li>\n</ul><p>æ­£ç¡®ä¿å­˜æ—¥æœŸæ—¶é—´ä¹‹åï¼Œå°±æ˜¯æ­£ç¡®å±•ç¤ºï¼Œå³æˆ‘ä»¬è¦ä½¿ç”¨æ­£ç¡®çš„æ—¶åŒºï¼ŒæŠŠæ—¶é—´ç‚¹å±•ç¤ºä¸ºç¬¦åˆå½“å‰æ—¶åŒºçš„æ—¶é—´è¡¨ç¤ºã€‚åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±èƒ½ç†è§£ä¸ºä»€ä¹ˆä¼šæœ‰æ‰€è°“çš„â€œæ—¶é—´é”™ä¹±â€é—®é¢˜äº†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å†é€šè¿‡å®é™…æ¡ˆä¾‹åˆ†æä¸€ä¸‹ï¼Œä»å­—é¢é‡è§£ææˆæ—¶é—´å’Œä»æ—¶é—´æ ¼å¼åŒ–ä¸ºå­—é¢é‡è¿™ä¸¤ç±»é—®é¢˜ã€‚</p><p><strong>ç¬¬ä¸€ç±»æ˜¯</strong>ï¼Œå¯¹äºåŒä¸€ä¸ªæ—¶é—´è¡¨ç¤ºï¼Œæ¯”å¦‚2020-01-02 22:00:00ï¼Œä¸åŒæ—¶åŒºçš„äººè½¬æ¢æˆDateä¼šå¾—åˆ°ä¸åŒçš„æ—¶é—´ï¼ˆæ—¶é—´æˆ³ï¼‰ï¼š</p><pre><code>String stringDate = &quot;2020-01-02 22:00:00&quot;;\nSimpleDateFormat inputFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n//é»˜è®¤æ—¶åŒºè§£ææ—¶é—´è¡¨ç¤º\nDate date1 = inputFormat.parse(stringDate);\nSystem.out.println(date1 + &quot;:&quot; + date1.getTime());\n//çº½çº¦æ—¶åŒºè§£ææ—¶é—´è¡¨ç¤º\ninputFormat.setTimeZone(TimeZone.getTimeZone(&quot;America/New_York&quot;));\nDate date2 = inputFormat.parse(stringDate);\nSystem.out.println(date2 + &quot;:&quot; + date2.getTime());\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼ŒæŠŠ2020-01-02 22:00:00è¿™æ ·çš„æ—¶é—´è¡¨ç¤ºï¼Œå¯¹äºå½“å‰çš„ä¸Šæµ·æ—¶åŒºå’Œçº½çº¦æ—¶åŒºï¼Œè½¬åŒ–ä¸ºUTCæ—¶é—´æˆ³æ˜¯ä¸åŒçš„æ—¶é—´ï¼š</p><pre><code>Thu Jan 02 22:00:00 CST 2020:1577973600000\nFri Jan 03 11:00:00 CST 2020:1578020400000\n</code></pre><p>è¿™æ­£æ˜¯UTCçš„æ„ä¹‰ï¼Œå¹¶ä¸æ˜¯æ—¶é—´é”™ä¹±ã€‚å¯¹äºåŒä¸€ä¸ªæœ¬åœ°æ—¶é—´çš„è¡¨ç¤ºï¼Œä¸åŒæ—¶åŒºçš„äººè§£æå¾—åˆ°çš„UTCæ—¶é—´ä¸€å®šæ˜¯ä¸åŒçš„ï¼Œåè¿‡æ¥ä¸åŒçš„æœ¬åœ°æ—¶é—´å¯èƒ½å¯¹åº”åŒä¸€ä¸ªUTCã€‚</p><p><strong>ç¬¬äºŒç±»é—®é¢˜æ˜¯</strong>ï¼Œæ ¼å¼åŒ–åå‡ºç°çš„é”™ä¹±ï¼Œå³åŒä¸€ä¸ªDateï¼Œåœ¨ä¸åŒçš„æ—¶åŒºä¸‹æ ¼å¼åŒ–å¾—åˆ°ä¸åŒçš„æ—¶é—´è¡¨ç¤ºã€‚æ¯”å¦‚ï¼Œåœ¨æˆ‘çš„å½“å‰æ—¶åŒºå’Œçº½çº¦æ—¶åŒºæ ¼å¼åŒ–2020-01-02 22:00:00ï¼š</p><pre><code>String stringDate = &quot;2020-01-02 22:00:00&quot;;\nSimpleDateFormat inputFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n//åŒä¸€Date\nDate date = inputFormat.parse(stringDate);\n//é»˜è®¤æ—¶åŒºæ ¼å¼åŒ–è¾“å‡ºï¼š\nSystem.out.println(new SimpleDateFormat(&quot;[yyyy-MM-dd HH:mm:ss Z]&quot;).format(date));\n//çº½çº¦æ—¶åŒºæ ¼å¼åŒ–è¾“å‡º\nTimeZone.setDefault(TimeZone.getTimeZone(&quot;America/New_York&quot;));\nSystem.out.println(new SimpleDateFormat(&quot;[yyyy-MM-dd HH:mm:ss Z]&quot;).format(date));\n</code></pre><p>è¾“å‡ºå¦‚ä¸‹ï¼Œæˆ‘å½“å‰æ—¶åŒºçš„Offsetï¼ˆæ—¶å·®ï¼‰æ˜¯+8å°æ—¶ï¼Œå¯¹äº-5å°æ—¶çš„çº½çº¦ï¼Œæ™šä¸Š10ç‚¹å¯¹åº”æ—©ä¸Š9ç‚¹ï¼š</p><pre><code>[2020-01-02 22:00:00 +0800]\n[2020-01-02 09:00:00 -0500]\n</code></pre><p>å› æ­¤ï¼Œæœ‰äº›æ—¶å€™æ•°æ®åº“ä¸­ç›¸åŒçš„æ—¶é—´ï¼Œç”±äºæœåŠ¡å™¨çš„æ—¶åŒºè®¾ç½®ä¸åŒï¼Œè¯»å–åˆ°çš„æ—¶é—´è¡¨ç¤ºä¸åŒã€‚è¿™ï¼Œä¸æ˜¯æ—¶é—´é”™ä¹±ï¼Œæ­£æ˜¯æ—¶åŒºå‘æŒ¥äº†ä½œç”¨ï¼Œå› ä¸ºUTCæ—¶é—´éœ€è¦æ ¹æ®å½“å‰æ—¶åŒºè§£æä¸ºæ­£ç¡®çš„æœ¬åœ°æ—¶é—´ã€‚</p><p>æ‰€ä»¥ï¼Œ<strong>è¦æ­£ç¡®å¤„ç†æ—¶åŒºï¼Œåœ¨äºå­˜è¿›å»å’Œè¯»å‡ºæ¥ä¸¤æ–¹é¢</strong>ï¼šå­˜çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨æ­£ç¡®çš„å½“å‰æ—¶åŒºæ¥ä¿å­˜ï¼Œè¿™æ ·UTCæ—¶é—´æ‰ä¼šæ­£ç¡®ï¼›è¯»çš„æ—¶å€™ï¼Œä¹Ÿåªæœ‰æ­£ç¡®è®¾ç½®æœ¬åœ°æ—¶åŒºï¼Œæ‰èƒ½æŠŠUTCæ—¶é—´è½¬æ¢ä¸ºæ­£ç¡®çš„å½“åœ°æ—¶é—´ã€‚</p><p>Java 8æ¨å‡ºäº†æ–°çš„æ—¶é—´æ—¥æœŸç±»ZoneIdã€ZoneOffsetã€LocalDateTimeã€ZonedDateTimeå’ŒDateTimeFormatterï¼Œå¤„ç†æ—¶åŒºé—®é¢˜æ›´ç®€å•æ¸…æ™°ã€‚æˆ‘ä»¬å†ç”¨è¿™äº›ç±»é…åˆä¸€ä¸ªå®Œæ•´çš„ä¾‹å­ï¼Œæ¥ç†è§£ä¸€ä¸‹æ—¶é—´çš„è§£æå’Œå±•ç¤ºï¼š</p><ul>\n<li>é¦–å…ˆåˆå§‹åŒ–ä¸Šæµ·ã€çº½çº¦å’Œä¸œäº¬ä¸‰ä¸ªæ—¶åŒºã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ZoneId.ofæ¥åˆå§‹åŒ–ä¸€ä¸ªæ ‡å‡†çš„æ—¶åŒºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ZoneOffset.ofHoursé€šè¿‡ä¸€ä¸ªoffsetï¼Œæ¥åˆå§‹åŒ–ä¸€ä¸ªå…·æœ‰æŒ‡å®šæ—¶é—´å·®çš„è‡ªå®šä¹‰æ—¶åŒºã€‚</li>\n<li>å¯¹äºæ—¥æœŸæ—¶é—´è¡¨ç¤ºï¼ŒLocalDateTimeä¸å¸¦æœ‰æ—¶åŒºå±æ€§ï¼Œæ‰€ä»¥å‘½åä¸ºæœ¬åœ°æ—¶åŒºçš„æ—¥æœŸæ—¶é—´ï¼›è€ŒZonedDateTime=LocalDateTime+ZoneIdï¼Œå…·æœ‰æ—¶åŒºå±æ€§ã€‚å› æ­¤ï¼ŒLocalDateTimeåªèƒ½è®¤ä¸ºæ˜¯ä¸€ä¸ªæ—¶é—´è¡¨ç¤ºï¼ŒZonedDateTimeæ‰æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æ—¶é—´ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬æŠŠ2020-01-02 22:00:00è¿™ä¸ªæ—¶é—´è¡¨ç¤ºï¼Œä½¿ç”¨ä¸œäº¬æ—¶åŒºæ¥è§£æå¾—åˆ°ä¸€ä¸ªZonedDateTimeã€‚</li>\n<li>ä½¿ç”¨DateTimeFormatteræ ¼å¼åŒ–æ—¶é—´çš„æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡withZoneæ–¹æ³•ç›´æ¥è®¾ç½®æ ¼å¼åŒ–ä½¿ç”¨çš„æ—¶åŒºã€‚æœ€åï¼Œåˆ†åˆ«ä»¥ä¸Šæµ·ã€çº½çº¦å’Œä¸œäº¬ä¸‰ä¸ªæ—¶åŒºæ¥æ ¼å¼åŒ–è¿™ä¸ªæ—¶é—´è¾“å‡ºï¼š</li>\n</ul><pre><code>//ä¸€ä¸ªæ—¶é—´è¡¨ç¤º\nString stringDate = &quot;2020-01-02 22:00:00&quot;;\n//åˆå§‹åŒ–ä¸‰ä¸ªæ—¶åŒº\nZoneId timeZoneSH = ZoneId.of(&quot;Asia/Shanghai&quot;);\nZoneId timeZoneNY = ZoneId.of(&quot;America/New_York&quot;);\nZoneId timeZoneJST = ZoneOffset.ofHours(9);\n//æ ¼å¼åŒ–å™¨\nDateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;);\nZonedDateTime date = ZonedDateTime.of(LocalDateTime.parse(stringDate, dateTimeFormatter), timeZoneJST);\n//ä½¿ç”¨DateTimeFormatteræ ¼å¼åŒ–æ—¶é—´ï¼Œå¯ä»¥é€šè¿‡withZoneæ–¹æ³•ç›´æ¥è®¾ç½®æ ¼å¼åŒ–ä½¿ç”¨çš„æ—¶åŒº\nDateTimeFormatter outputFormat = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss Z&quot;);\nSystem.out.println(timeZoneSH.getId() + outputFormat.withZone(timeZoneSH).format(date));\nSystem.out.println(timeZoneNY.getId() + outputFormat.withZone(timeZoneNY).format(date));\nSystem.out.println(timeZoneJST.getId() + outputFormat.withZone(timeZoneJST).format(date));\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œç›¸åŒçš„æ—¶åŒºï¼Œç»è¿‡è§£æå­˜è¿›å»å’Œè¯»å‡ºæ¥çš„æ—¶é—´è¡¨ç¤ºæ˜¯ä¸€æ ·çš„ï¼ˆæ¯”å¦‚æœ€åä¸€è¡Œï¼‰ï¼›è€Œå¯¹äºä¸åŒçš„æ—¶åŒºï¼Œæ¯”å¦‚ä¸Šæµ·å’Œçº½çº¦ï¼Œæœ€åè¾“å‡ºçš„æœ¬åœ°æ—¶é—´ä¸åŒã€‚+9å°æ—¶æ—¶åŒºçš„æ™šä¸Š10ç‚¹ï¼Œå¯¹äºä¸Šæµ·æ˜¯+8å°æ—¶ï¼Œæ‰€ä»¥ä¸Šæµ·æœ¬åœ°æ—¶é—´æ˜¯æ™šä¸Š9ç‚¹ï¼›è€Œå¯¹äºçº½çº¦æ˜¯-5å°æ—¶ï¼Œå·®14å°æ—¶ï¼Œæ‰€ä»¥æ˜¯æ—©ä¸Š8ç‚¹ï¼š</p><pre><code>Asia/Shanghai2020-01-02 21:00:00 +0800\nAmerica/New_York2020-01-02 08:00:00 -0500\n+09:002020-01-02 22:00:00 +0900\n</code></pre><p>åˆ°è¿™é‡Œï¼Œæˆ‘æ¥å°ç»“ä¸‹ã€‚è¦æ­£ç¡®å¤„ç†å›½é™…åŒ–æ—¶é—´é—®é¢˜ï¼Œæˆ‘æ¨èä½¿ç”¨Java 8çš„æ—¥æœŸæ—¶é—´ç±»ï¼Œå³ä½¿ç”¨ZonedDateTimeä¿å­˜æ—¶é—´ï¼Œç„¶åä½¿ç”¨è®¾ç½®äº†ZoneIdçš„DateTimeFormatteré…åˆZonedDateTimeè¿›è¡Œæ—¶é—´æ ¼å¼åŒ–å¾—åˆ°æœ¬åœ°æ—¶é—´è¡¨ç¤ºã€‚è¿™æ ·çš„åˆ’åˆ†ååˆ†æ¸…æ™°ã€ç»†åŒ–ï¼Œä¹Ÿä¸å®¹æ˜“å‡ºé”™ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç»§ç»­çœ‹çœ‹å¯¹äºæ—¥æœŸæ—¶é—´çš„æ ¼å¼åŒ–å’Œè§£æï¼Œä½¿ç”¨é—ç•™çš„SimpleDateFormatï¼Œä¼šé‡åˆ°å“ªäº›é—®é¢˜ã€‚</p><h2>æ—¥æœŸæ—¶é—´æ ¼å¼åŒ–å’Œè§£æ</h2><p>æ¯åˆ°å¹´åº•ï¼Œå°±æœ‰å¾ˆå¤šå¼€å‘åŒå­¦è¸©æ—¶é—´æ ¼å¼åŒ–çš„å‘ï¼Œæ¯”å¦‚â€œè¿™æ˜æ˜æ˜¯ä¸€ä¸ª2019å¹´çš„æ—¥æœŸï¼Œ<strong>æ€ä¹ˆä½¿ç”¨SimpleDateFormatæ ¼å¼åŒ–åå°±æå‰è·¨å¹´äº†</strong>â€ã€‚æˆ‘ä»¬æ¥é‡ç°ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ã€‚</p><p>åˆå§‹åŒ–ä¸€ä¸ªCalendarï¼Œè®¾ç½®æ—¥æœŸæ—¶é—´ä¸º2019å¹´12æœˆ29æ—¥ï¼Œä½¿ç”¨å¤§å†™çš„YYYYæ¥åˆå§‹åŒ–SimpleDateFormatï¼š</p><pre><code>Locale.setDefault(Locale.SIMPLIFIED_CHINESE);\nSystem.out.println(&quot;defaultLocale:&quot; + Locale.getDefault());\nCalendar calendar = Calendar.getInstance();\ncalendar.set(2019, Calendar.DECEMBER, 29,0,0,0);\nSimpleDateFormat YYYY = new SimpleDateFormat(&quot;YYYY-MM-dd&quot;);\nSystem.out.println(&quot;æ ¼å¼åŒ–: &quot; + YYYY.format(calendar.getTime()));\nSystem.out.println(&quot;weekYear:&quot; + calendar.getWeekYear());\nSystem.out.println(&quot;firstDayOfWeek:&quot; + calendar.getFirstDayOfWeek());\nSystem.out.println(&quot;minimalDaysInFirstWeek:&quot; + calendar.getMinimalDaysInFirstWeek());\n</code></pre><p>å¾—åˆ°çš„è¾“å‡ºå´æ˜¯2020å¹´12æœˆ29æ—¥ï¼š</p><pre><code>defaultLocale:zh_CN\næ ¼å¼åŒ–: 2020-12-29\nweekYear:2020\nfirstDayOfWeek:1\nminimalDaysInFirstWeek:1\n</code></pre><p>å‡ºç°è¿™ä¸ªé—®é¢˜çš„åŸå› åœ¨äºï¼Œè¿™ä½åŒå­¦æ··æ·†äº†SimpleDateFormatçš„å„ç§æ ¼å¼åŒ–æ¨¡å¼ã€‚JDKçš„<a href=\"https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html\">æ–‡æ¡£</a>ä¸­æœ‰è¯´æ˜ï¼šå°å†™yæ˜¯å¹´ï¼Œè€Œå¤§å†™Yæ˜¯week yearï¼Œä¹Ÿå°±æ˜¯æ‰€åœ¨çš„å‘¨å±äºå“ªä¸€å¹´ã€‚</p><p>ä¸€å¹´ç¬¬ä¸€å‘¨çš„åˆ¤æ–­æ–¹å¼æ˜¯ï¼Œä»getFirstDayOfWeek()å¼€å§‹ï¼Œå®Œæ•´çš„7å¤©ï¼Œå¹¶ä¸”åŒ…å«é‚£ä¸€å¹´è‡³å°‘getMinimalDaysInFirstWeek()å¤©ã€‚è¿™ä¸ªè®¡ç®—æ–¹å¼å’ŒåŒºåŸŸç›¸å…³ï¼Œå¯¹äºå½“å‰zh_CNåŒºåŸŸæ¥è¯´ï¼Œ2020å¹´ç¬¬ä¸€å‘¨çš„æ¡ä»¶æ˜¯ï¼Œä»å‘¨æ—¥å¼€å§‹çš„å®Œæ•´7å¤©ï¼Œ2020å¹´åŒ…å«1å¤©å³å¯ã€‚æ˜¾ç„¶ï¼Œ2019å¹´12æœˆ29æ—¥å‘¨æ—¥åˆ°2020å¹´1æœˆ4æ—¥å‘¨å…­æ˜¯2020å¹´ç¬¬ä¸€å‘¨ï¼Œå¾—å‡ºçš„week yearå°±æ˜¯2020å¹´ã€‚</p><p>å¦‚æœæŠŠåŒºåŸŸæ”¹ä¸ºæ³•å›½ï¼š</p><pre><code>Locale.setDefault(Locale.FRANCE);\n</code></pre><p>é‚£ä¹ˆweek yeayå°±è¿˜æ˜¯2019å¹´ï¼Œå› ä¸ºä¸€å‘¨çš„ç¬¬ä¸€å¤©ä»å‘¨ä¸€å¼€å§‹ç®—ï¼Œ2020å¹´çš„ç¬¬ä¸€å‘¨æ˜¯2019å¹´12æœˆ30æ—¥å‘¨ä¸€å¼€å§‹ï¼Œ29æ—¥è¿˜æ˜¯å±äºå»å¹´ï¼š</p><pre><code>defaultLocale:fr_FR\næ ¼å¼åŒ–: 2019-12-29\nweekYear:2019\nfirstDayOfWeek:2\nminimalDaysInFirstWeek:4\n</code></pre><p>è¿™ä¸ªæ¡ˆä¾‹å‘Šè¯‰æˆ‘ä»¬ï¼Œæ²¡æœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œé’ˆå¯¹å¹´ä»½çš„æ—¥æœŸæ ¼å¼åŒ–ï¼Œåº”è¯¥ä¸€å¾‹ä½¿ç”¨ â€œyâ€ è€Œé â€œYâ€ã€‚</p><p>é™¤äº†æ ¼å¼åŒ–è¡¨è¾¾å¼å®¹æ˜“è¸©å‘å¤–ï¼ŒSimpleDateFormatè¿˜æœ‰ä¸¤ä¸ªè‘—åçš„å‘ã€‚</p><p>ç¬¬ä¸€ä¸ªå‘æ˜¯ï¼Œ<strong>å®šä¹‰çš„staticçš„SimpleDateFormatå¯èƒ½ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</strong>æ¯”å¦‚åƒè¿™æ ·ï¼Œä½¿ç”¨ä¸€ä¸ª100çº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Œå¾ªç¯20æ¬¡æŠŠæ—¶é—´æ ¼å¼åŒ–ä»»åŠ¡æäº¤åˆ°çº¿ç¨‹æ± å¤„ç†ï¼Œæ¯ä¸ªä»»åŠ¡ä¸­åˆå¾ªç¯10æ¬¡è§£æ2020-01-01 11:12:13è¿™æ ·ä¸€ä¸ªæ—¶é—´è¡¨ç¤ºï¼š</p><pre><code>ExecutorService threadPool = Executors.newFixedThreadPool(100);\nfor (int i = 0; i &lt; 20; i++) {\n    //æäº¤20ä¸ªå¹¶å‘è§£ææ—¶é—´çš„ä»»åŠ¡åˆ°çº¿ç¨‹æ± ï¼Œæ¨¡æ‹Ÿå¹¶å‘ç¯å¢ƒ\n    threadPool.execute(() -&gt; {\n        for (int j = 0; j &lt; 10; j++) {\n            try {\n                System.out.println(simpleDateFormat.parse(&quot;2020-01-01 11:12:13&quot;));\n            } catch (ParseException e) {\n                e.printStackTrace();\n            }\n        }\n    });\n}\nthreadPool.shutdown();\nthreadPool.awaitTermination(1, TimeUnit.HOURS);\n</code></pre><p>è¿è¡Œç¨‹åºåå¤§é‡æŠ¥é”™ï¼Œä¸”æ²¡æœ‰æŠ¥é”™çš„è¾“å‡ºç»“æœä¹Ÿä¸æ­£å¸¸ï¼Œæ¯”å¦‚2020å¹´è§£ææˆäº†1212å¹´ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/3e/27/3ee2e923b3cf4e13722b7b0773de1b27.png?wh=3040*1530\" alt=\"\"></p><p>SimpleDateFormatçš„ä½œç”¨æ˜¯å®šä¹‰è§£æå’Œæ ¼å¼åŒ–æ—¥æœŸæ—¶é—´çš„æ¨¡å¼ã€‚è¿™ï¼Œçœ‹èµ·æ¥è¿™æ˜¯ä¸€æ¬¡æ€§çš„å·¥ä½œï¼Œåº”è¯¥å¤ç”¨ï¼Œä½†å®ƒçš„è§£æå’Œæ ¼å¼åŒ–æ“ä½œæ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ç›¸å…³æºç ï¼š</p><ul>\n<li>SimpleDateFormatç»§æ‰¿äº†DateFormatï¼ŒDateFormatæœ‰ä¸€ä¸ªå­—æ®µCalendarï¼›</li>\n<li>SimpleDateFormatçš„parseæ–¹æ³•è°ƒç”¨CalendarBuilderçš„establishæ–¹æ³•ï¼Œæ¥æ„å»ºCalendarï¼›</li>\n<li>establishæ–¹æ³•å†…éƒ¨å…ˆæ¸…ç©ºCalendarå†æ„å»ºCalendarï¼Œæ•´ä¸ªæ“ä½œæ²¡æœ‰åŠ é”ã€‚</li>\n</ul><p>æ˜¾ç„¶ï¼Œå¦‚æœå¤šçº¿ç¨‹æ± è°ƒç”¨parseæ–¹æ³•ï¼Œä¹Ÿå°±æ„å‘³ç€å¤šçº¿ç¨‹åœ¨å¹¶å‘æ“ä½œä¸€ä¸ªCalendarï¼Œå¯èƒ½ä¼šäº§ç”Ÿä¸€ä¸ªçº¿ç¨‹è¿˜æ²¡æ¥å¾—åŠå¤„ç†Calendarå°±è¢«å¦ä¸€ä¸ªçº¿ç¨‹æ¸…ç©ºäº†çš„æƒ…å†µï¼š</p><pre><code>public abstract class DateFormat extends Format {\n    protected Calendar calendar;\n}\npublic class SimpleDateFormat extends DateFormat {\n    @Override\n    public Date parse(String text, ParsePosition pos)\n    {\n        CalendarBuilder calb = new CalendarBuilder();\n\t\tparsedDate = calb.establish(calendar).getTime();\n        return parsedDate;\n    }\n}\n\nclass CalendarBuilder {\n\tCalendar establish(Calendar cal) {\n       \t...\n        cal.clear();//æ¸…ç©º\n        \n        for (int stamp = MINIMUM_USER_STAMP; stamp &lt; nextStamp; stamp++) {\n            for (int index = 0; index &lt;= maxFieldIndex; index++) {\n                if (field[index] == stamp) {\n                    cal.set(index, field[MAX_FIELD + index]);//æ„å»º\n                    break;\n                }\n            }\n        }\n        return cal;\n    }\n}\n</code></pre><p>formatæ–¹æ³•ä¹Ÿç±»ä¼¼ï¼Œä½ å¯ä»¥è‡ªå·±åˆ†æã€‚å› æ­¤åªèƒ½åœ¨åŒä¸€ä¸ªçº¿ç¨‹å¤ç”¨SimpleDateFormatï¼Œæ¯”è¾ƒå¥½çš„è§£å†³æ–¹å¼æ˜¯ï¼Œé€šè¿‡ThreadLocalæ¥å­˜æ”¾SimpleDateFormatï¼š</p><pre><code>private static ThreadLocal&lt;SimpleDateFormat&gt; threadSafeSimpleDateFormat = ThreadLocal.withInitial(() -&gt; new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;));\n</code></pre><p>ç¬¬äºŒä¸ªå‘æ˜¯ï¼Œ<strong>å½“éœ€è¦è§£æçš„å­—ç¬¦ä¸²å’Œæ ¼å¼ä¸åŒ¹é…çš„æ—¶å€™ï¼ŒSimpleDateFormatè¡¨ç°å¾—å¾ˆå®½å®¹</strong>ï¼Œè¿˜æ˜¯èƒ½å¾—åˆ°ç»“æœã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬æœŸæœ›ä½¿ç”¨yyyyMMæ¥è§£æ20160901å­—ç¬¦ä¸²ï¼š</p><pre><code>String dateString = &quot;20160901&quot;;\nSimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyyMM&quot;);\nSystem.out.println(&quot;result:&quot; + dateFormat.parse(dateString));\n</code></pre><p>å±…ç„¶è¾“å‡ºäº†2091å¹´1æœˆ1æ—¥ï¼ŒåŸå› æ˜¯æŠŠ0901å½“æˆäº†æœˆä»½ï¼Œç›¸å½“äº75å¹´ï¼š</p><pre><code>result:Mon Jan 01 00:00:00 CST 2091\n</code></pre><p>å¯¹äºSimpleDateFormatçš„è¿™ä¸‰ä¸ªå‘ï¼Œæˆ‘ä»¬ä½¿ç”¨Java 8ä¸­çš„DateTimeFormatterå°±å¯ä»¥é¿è¿‡å»ã€‚é¦–å…ˆï¼Œä½¿ç”¨DateTimeFormatterBuilderæ¥å®šä¹‰æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œä¸ç”¨å»è®°å¿†ä½¿ç”¨å¤§å†™çš„Yè¿˜æ˜¯å°å†™çš„Yï¼Œå¤§å†™çš„Mè¿˜æ˜¯å°å†™çš„mï¼š</p><pre><code>private static DateTimeFormatter dateTimeFormatter = new DateTimeFormatterBuilder()\n        .appendValue(ChronoField.YEAR) //å¹´\n        .appendLiteral(&quot;/&quot;)\n        .appendValue(ChronoField.MONTH_OF_YEAR) //æœˆ\n        .appendLiteral(&quot;/&quot;)\n        .appendValue(ChronoField.DAY_OF_MONTH) //æ—¥\n        .appendLiteral(&quot; &quot;)\n        .appendValue(ChronoField.HOUR_OF_DAY) //æ—¶\n        .appendLiteral(&quot;:&quot;)\n        .appendValue(ChronoField.MINUTE_OF_HOUR) //åˆ†\n        .appendLiteral(&quot;:&quot;)\n        .appendValue(ChronoField.SECOND_OF_MINUTE) //ç§’\n        .appendLiteral(&quot;.&quot;)\n        .appendValue(ChronoField.MILLI_OF_SECOND) //æ¯«ç§’\n        .toFormatter();\n</code></pre><p>å…¶æ¬¡ï¼ŒDateTimeFormatteræ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯ä»¥å®šä¹‰ä¸ºstaticä½¿ç”¨ï¼›æœ€åï¼ŒDateTimeFormatterçš„è§£ææ¯”è¾ƒä¸¥æ ¼ï¼Œéœ€è¦è§£æçš„å­—ç¬¦ä¸²å’Œæ ¼å¼ä¸åŒ¹é…æ—¶ï¼Œä¼šç›´æ¥æŠ¥é”™ï¼Œè€Œä¸ä¼šæŠŠ0901è§£æä¸ºæœˆä»½ã€‚æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹ï¼š</p><pre><code>//ä½¿ç”¨åˆšæ‰å®šä¹‰çš„DateTimeFormatterBuilderæ„å»ºçš„DateTimeFormatteræ¥è§£æè¿™ä¸ªæ—¶é—´\nLocalDateTime localDateTime = LocalDateTime.parse(&quot;2020/1/2 12:34:56.789&quot;, dateTimeFormatter);\n//è§£ææˆåŠŸ\nSystem.out.println(localDateTime.format(dateTimeFormatter));\n//ä½¿ç”¨yyyyMMæ ¼å¼è§£æ20160901æ˜¯å¦å¯ä»¥æˆåŠŸå‘¢ï¼Ÿ\nString dt = &quot;20160901&quot;;\nDateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(&quot;yyyyMM&quot;);\nSystem.out.println(&quot;result:&quot; + dateTimeFormatter.parse(dt));\n</code></pre><p>è¾“å‡ºæ—¥å¿—å¦‚ä¸‹ï¼š</p><pre><code>2020/1/2 12:34:56.789\nException in thread &quot;main&quot; java.time.format.DateTimeParseException: Text '20160901' could not be parsed at index 0\n\tat java.time.format.DateTimeFormatter.parseResolved0(DateTimeFormatter.java:1949)\n\tat java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:1777)\n\tat org.geekbang.time.commonmistakes.datetime.dateformat.CommonMistakesApplication.better(CommonMistakesApplication.java:80)\n\tat org.geekbang.time.commonmistakes.datetime.dateformat.CommonMistakesApplication.main(CommonMistakesApplication.java:41)\n</code></pre><p>åˆ°è¿™é‡Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œä½¿ç”¨Java 8ä¸­çš„DateTimeFormatterè¿›è¡Œæ—¥æœŸæ—¶é—´çš„æ ¼å¼åŒ–å’Œè§£æï¼Œæ˜¾ç„¶æ›´è®©äººæ”¾å¿ƒã€‚é‚£ä¹ˆï¼Œå¯¹äºæ—¥æœŸæ—¶é—´çš„è¿ç®—ï¼Œä½¿ç”¨Java 8ä¸­çš„æ—¥æœŸæ—¶é—´ç±»ä¼šä¸ä¼šæ›´ç®€å•å‘¢ï¼Ÿ</p><h2>æ—¥æœŸæ—¶é—´çš„è®¡ç®—</h2><p>å…³äºæ—¥æœŸæ—¶é—´çš„è®¡ç®—ï¼Œæˆ‘å…ˆå’Œä½ è¯´ä¸€ä¸ªå¸¸è¸©çš„å‘ã€‚æœ‰äº›åŒå­¦å–œæ¬¢ç›´æ¥ä½¿ç”¨æ—¶é—´æˆ³è¿›è¡Œæ—¶é—´è®¡ç®—ï¼Œæ¯”å¦‚å¸Œæœ›å¾—åˆ°å½“å‰æ—¶é—´ä¹‹å30å¤©çš„æ—¶é—´ï¼Œä¼šè¿™ä¹ˆå†™ä»£ç ï¼šç›´æ¥æŠŠnew Date().getTimeæ–¹æ³•å¾—åˆ°çš„æ—¶é—´æˆ³åŠ 30å¤©å¯¹åº”çš„æ¯«ç§’æ•°ï¼Œä¹Ÿå°±æ˜¯30å¤©*1000æ¯«ç§’*3600ç§’*24å°æ—¶ï¼š</p><pre><code>Date today = new Date();\nDate nextMonth = new Date(today.getTime() + 30 * 1000 * 60 * 60 * 24);\nSystem.out.println(today);\nSystem.out.println(nextMonth);\n</code></pre><p>å¾—åˆ°çš„æ—¥æœŸå±…ç„¶æ¯”å½“å‰æ—¥æœŸè¿˜è¦æ—©ï¼Œæ ¹æœ¬ä¸æ˜¯æ™š30å¤©çš„æ—¶é—´ï¼š</p><pre><code>Sat Feb 01 14:17:41 CST 2020\nSun Jan 12 21:14:54 CST 2020\n</code></pre><p>å‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œ<strong>å…¶å®æ˜¯å› ä¸ºintå‘ç”Ÿäº†æº¢å‡º</strong>ã€‚ä¿®å¤æ–¹å¼å°±æ˜¯æŠŠ30æ”¹ä¸º30Lï¼Œè®©å…¶æˆä¸ºä¸€ä¸ªlongï¼š</p><pre><code>Date today = new Date();\nDate nextMonth = new Date(today.getTime() + 30L * 1000 * 60 * 60 * 24);\nSystem.out.println(today);\nSystem.out.println(nextMonth);\n</code></pre><p>è¿™æ ·å°±å¯ä»¥å¾—åˆ°æ­£ç¡®ç»“æœäº†ï¼š</p><pre><code>Sat Feb 01 14:17:41 CST 2020\nMon Mar 02 14:17:41 CST 2020\n</code></pre><p>ä¸éš¾å‘ç°ï¼Œæ‰‹åŠ¨åœ¨æ—¶é—´æˆ³ä¸Šè¿›è¡Œè®¡ç®—æ“ä½œçš„æ–¹å¼éå¸¸å®¹æ˜“å‡ºé”™ã€‚å¯¹äºJava 8ä¹‹å‰çš„ä»£ç ï¼Œæˆ‘æ›´å»ºè®®ä½¿ç”¨Calendarï¼š</p><pre><code>Calendar c = Calendar.getInstance();\nc.setTime(new Date());\nc.add(Calendar.DAY_OF_MONTH, 30);\nSystem.out.println(c.getTime());\n</code></pre><p>ä½¿ç”¨Java 8çš„æ—¥æœŸæ—¶é—´ç±»å‹ï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œå„ç§è®¡ç®—ï¼Œæ›´åŠ ç®€æ´å’Œæ–¹ä¾¿ï¼š</p><pre><code>LocalDateTime localDateTime = LocalDateTime.now();\nSystem.out.println(localDateTime.plusDays(30));\n</code></pre><p>å¹¶ä¸”ï¼Œ<strong>å¯¹æ—¥æœŸæ—¶é—´åšè®¡ç®—æ“ä½œï¼ŒJava 8æ—¥æœŸæ—¶é—´APIä¼šæ¯”CalendaråŠŸèƒ½å¼ºå¤§å¾ˆå¤š</strong>ã€‚</p><p>ç¬¬ä¸€ï¼Œå¯ä»¥ä½¿ç”¨å„ç§minuså’Œplusæ–¹æ³•ç›´æ¥å¯¹æ—¥æœŸè¿›è¡ŒåŠ å‡æ“ä½œï¼Œæ¯”å¦‚å¦‚ä¸‹ä»£ç å®ç°äº†å‡ä¸€å¤©å’ŒåŠ ä¸€å¤©ï¼Œä»¥åŠå‡ä¸€ä¸ªæœˆå’ŒåŠ ä¸€ä¸ªæœˆï¼š</p><pre><code>System.out.println(&quot;//æµ‹è¯•æ“ä½œæ—¥æœŸ&quot;);\nSystem.out.println(LocalDate.now()\n        .minus(Period.ofDays(1))\n        .plus(1, ChronoUnit.DAYS)\n        .minusMonths(1)\n        .plus(Period.ofMonths(1)));\n</code></pre><p>å¯ä»¥å¾—åˆ°ï¼š</p><pre><code>//æµ‹è¯•æ“ä½œæ—¥æœŸ\n2020-02-01\n</code></pre><p>ç¬¬äºŒï¼Œè¿˜å¯ä»¥é€šè¿‡withæ–¹æ³•è¿›è¡Œå¿«æ·æ—¶é—´è°ƒèŠ‚ï¼Œæ¯”å¦‚ï¼š</p><ul>\n<li>ä½¿ç”¨TemporalAdjusters.firstDayOfMonthå¾—åˆ°å½“å‰æœˆçš„ç¬¬ä¸€å¤©ï¼›</li>\n<li>ä½¿ç”¨TemporalAdjusters.firstDayOfYear()å¾—åˆ°å½“å‰å¹´çš„ç¬¬ä¸€å¤©ï¼›</li>\n<li>ä½¿ç”¨TemporalAdjusters.previous(DayOfWeek.SATURDAY)å¾—åˆ°ä¸Šä¸€ä¸ªå‘¨å…­ï¼›</li>\n<li>ä½¿ç”¨TemporalAdjusters.lastInMonth(DayOfWeek.FRIDAY)å¾—åˆ°æœ¬æœˆæœ€åä¸€ä¸ªå‘¨äº”ã€‚</li>\n</ul><pre><code>System.out.println(&quot;//æœ¬æœˆçš„ç¬¬ä¸€å¤©&quot;);\nSystem.out.println(LocalDate.now().with(TemporalAdjusters.firstDayOfMonth()));\n\nSystem.out.println(&quot;//ä»Šå¹´çš„ç¨‹åºå‘˜æ—¥&quot;);\nSystem.out.println(LocalDate.now().with(TemporalAdjusters.firstDayOfYear()).plusDays(255));\n\nSystem.out.println(&quot;//ä»Šå¤©ä¹‹å‰çš„ä¸€ä¸ªå‘¨å…­&quot;);\nSystem.out.println(LocalDate.now().with(TemporalAdjusters.previous(DayOfWeek.SATURDAY)));\n\nSystem.out.println(&quot;//æœ¬æœˆæœ€åä¸€ä¸ªå·¥ä½œæ—¥&quot;);\nSystem.out.println(LocalDate.now().with(TemporalAdjusters.lastInMonth(DayOfWeek.FRIDAY)));\n</code></pre><p>è¾“å‡ºå¦‚ä¸‹ï¼š</p><pre><code>//æœ¬æœˆçš„ç¬¬ä¸€å¤©\n2020-02-01\n//ä»Šå¹´çš„ç¨‹åºå‘˜æ—¥\n2020-09-12\n//ä»Šå¤©ä¹‹å‰çš„ä¸€ä¸ªå‘¨å…­\n2020-01-25\n//æœ¬æœˆæœ€åä¸€ä¸ªå·¥ä½œæ—¥\n2020-02-28\n</code></pre><p>ç¬¬ä¸‰ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨lambdaè¡¨è¾¾å¼è¿›è¡Œè‡ªå®šä¹‰çš„æ—¶é—´è°ƒæ•´ã€‚æ¯”å¦‚ï¼Œä¸ºå½“å‰æ—¶é—´å¢åŠ 100å¤©ä»¥å†…çš„éšæœºå¤©æ•°ï¼š</p><pre><code>System.out.println(LocalDate.now().with(temporal -&gt; temporal.plus(ThreadLocalRandom.current().nextInt(100), ChronoUnit.DAYS)));\n</code></pre><p>å¾—åˆ°ï¼š</p><pre><code>2020-03-15\n</code></pre><p>é™¤äº†è®¡ç®—å¤–ï¼Œè¿˜å¯ä»¥åˆ¤æ–­æ—¥æœŸæ˜¯å¦ç¬¦åˆæŸä¸ªæ¡ä»¶ã€‚æ¯”å¦‚ï¼Œè‡ªå®šä¹‰å‡½æ•°ï¼Œåˆ¤æ–­æŒ‡å®šæ—¥æœŸæ˜¯å¦æ˜¯å®¶åº­æˆå‘˜çš„ç”Ÿæ—¥ï¼š</p><pre><code>public static Boolean isFamilyBirthday(TemporalAccessor date) {\n    int month = date.get(MONTH_OF_YEAR);\n    int day = date.get(DAY_OF_MONTH);\n    if (month == Month.FEBRUARY.getValue() &amp;&amp; day == 17)\n        return Boolean.TRUE;\n    if (month == Month.SEPTEMBER.getValue() &amp;&amp; day == 21)\n        return Boolean.TRUE;\n    if (month == Month.MAY.getValue() &amp;&amp; day == 22)\n        return Boolean.TRUE;\n    return Boolean.FALSE;\n}\n</code></pre><p>ç„¶åï¼Œä½¿ç”¨queryæ–¹æ³•æŸ¥è¯¢æ˜¯å¦åŒ¹é…æ¡ä»¶ï¼š</p><pre><code>System.out.println(&quot;//æŸ¥è¯¢æ˜¯å¦æ˜¯ä»Šå¤©è¦ä¸¾åŠç”Ÿæ—¥&quot;);\nSystem.out.println(LocalDate.now().query(CommonMistakesApplication::isFamilyBirthday));\n</code></pre><p>ä½¿ç”¨Java 8æ“ä½œå’Œè®¡ç®—æ—¥æœŸæ—¶é—´è™½ç„¶æ–¹ä¾¿ï¼Œä½†è®¡ç®—ä¸¤ä¸ªæ—¥æœŸå·®æ—¶å¯èƒ½ä¼šè¸©å‘ï¼š<strong>Java 8ä¸­æœ‰ä¸€ä¸ªä¸“é—¨çš„ç±»Periodå®šä¹‰äº†æ—¥æœŸé—´éš”ï¼Œé€šè¿‡Period.betweenå¾—åˆ°äº†ä¸¤ä¸ªLocalDateçš„å·®ï¼Œè¿”å›çš„æ˜¯ä¸¤ä¸ªæ—¥æœŸå·®å‡ å¹´é›¶å‡ æœˆé›¶å‡ å¤©ã€‚å¦‚æœå¸Œæœ›å¾—çŸ¥ä¸¤ä¸ªæ—¥æœŸä¹‹é—´å·®å‡ å¤©ï¼Œç›´æ¥è°ƒç”¨Periodçš„getDays()æ–¹æ³•å¾—åˆ°çš„åªæ˜¯æœ€åçš„â€œé›¶å‡ å¤©â€ï¼Œè€Œä¸æ˜¯ç®—æ€»çš„é—´éš”å¤©æ•°</strong>ã€‚</p><p>æ¯”å¦‚ï¼Œè®¡ç®—2019å¹´12æœˆ12æ—¥å’Œ2019å¹´10æœˆ1æ—¥çš„æ—¥æœŸé—´éš”ï¼Œå¾ˆæ˜æ˜¾æ—¥æœŸå·®æ˜¯2ä¸ªæœˆé›¶11å¤©ï¼Œä½†è·å–getDaysæ–¹æ³•å¾—åˆ°çš„ç»“æœåªæ˜¯11å¤©ï¼Œè€Œä¸æ˜¯72å¤©ï¼š</p><pre><code>System.out.println(&quot;//è®¡ç®—æ—¥æœŸå·®&quot;);\nLocalDate today = LocalDate.of(2019, 12, 12);\nLocalDate specifyDate = LocalDate.of(2019, 10, 1);\nSystem.out.println(Period.between(specifyDate, today).getDays());\nSystem.out.println(Period.between(specifyDate, today));\nSystem.out.println(ChronoUnit.DAYS.between(specifyDate, today));\n</code></pre><p>å¯ä»¥ä½¿ç”¨ChronoUnit.DAYS.betweenè§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p><pre><code>//è®¡ç®—æ—¥æœŸå·®\n11\nP2M11D\n72\n</code></pre><p>ä»æ—¥æœŸæ—¶é—´çš„æ—¶åŒºåˆ°æ ¼å¼åŒ–å†åˆ°è®¡ç®—ï¼Œä½ æ˜¯ä¸æ˜¯ä½“ä¼šåˆ°Java 8æ—¥æœŸæ—¶é—´ç±»çš„å¼ºå¤§äº†å‘¢ï¼Ÿ</p><h2>é‡ç‚¹å›é¡¾</h2><p>ä»Šå¤©ï¼Œæˆ‘å’Œä½ ä¸€èµ·çœ‹äº†æ—¥æœŸæ—¶é—´çš„åˆå§‹åŒ–ã€æ—¶åŒºã€æ ¼å¼åŒ–ã€è§£æå’Œè®¡ç®—çš„é—®é¢˜ã€‚æˆ‘ä»¬çœ‹åˆ°ï¼Œä½¿ç”¨Java 8ä¸­çš„æ—¥æœŸæ—¶é—´åŒ…Java.timeçš„ç±»è¿›è¡Œå„ç§æ“ä½œï¼Œä¼šæ¯”ä½¿ç”¨é—ç•™çš„Dateã€Calenderå’ŒSimpleDateFormatæ›´ç®€å•ã€æ¸…æ™°ï¼ŒåŠŸèƒ½ä¹Ÿæ›´ä¸°å¯Œã€å‘ä¹Ÿæ¯”è¾ƒå°‘ã€‚</p><p>å¦‚æœæœ‰æ¡ä»¶çš„è¯ï¼Œæˆ‘è¿˜æ˜¯å»ºè®®å…¨é¢æ”¹ä¸ºä½¿ç”¨Java 8çš„æ—¥æœŸæ—¶é—´ç±»å‹ã€‚æˆ‘æŠŠJava 8å‰åçš„æ—¥æœŸæ—¶é—´ç±»å‹ï¼Œæ±‡æ€»åˆ°äº†ä¸€å¼ æ€ç»´å¯¼å›¾ä¸Šï¼Œå›¾ä¸­ç®­å¤´ä»£è¡¨çš„æ˜¯æ–°è€ç±»å‹åœ¨æ¦‚å¿µä¸Šç­‰ä»·çš„ç±»å‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/22/33/225d00087f500dbdf5e666e58ead1433.png?wh=1740*970\" alt=\"\"></p><p>è¿™é‡Œæœ‰ä¸ªè¯¯åŒºæ˜¯ï¼Œè®¤ä¸ºjava.util.Dateç±»ä¼¼äºæ–°APIä¸­çš„LocalDateTimeã€‚å…¶å®ä¸æ˜¯ï¼Œè™½ç„¶å®ƒä»¬éƒ½æ²¡æœ‰æ—¶åŒºæ¦‚å¿µï¼Œä½†java.util.Dateç±»æ˜¯å› ä¸ºä½¿ç”¨UTCè¡¨ç¤ºï¼Œæ‰€ä»¥æ²¡æœ‰æ—¶åŒºæ¦‚å¿µï¼Œå…¶æœ¬è´¨æ˜¯æ—¶é—´æˆ³ï¼›è€ŒLocalDateTimeï¼Œä¸¥æ ¼ä¸Šå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªæ—¥æœŸæ—¶é—´çš„è¡¨ç¤ºï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ—¶é—´ç‚¹ã€‚</p><p>å› æ­¤ï¼Œåœ¨æŠŠDateè½¬æ¢ä¸ºLocalDateTimeçš„æ—¶å€™ï¼Œéœ€è¦é€šè¿‡Dateçš„toInstantæ–¹æ³•å¾—åˆ°ä¸€ä¸ªUTCæ—¶é—´æˆ³è¿›è¡Œè½¬æ¢ï¼Œå¹¶éœ€è¦æä¾›å½“å‰çš„æ—¶åŒºï¼Œè¿™æ ·æ‰èƒ½æŠŠUTCæ—¶é—´è½¬æ¢ä¸ºæœ¬åœ°æ—¥æœŸæ—¶é—´ï¼ˆçš„è¡¨ç¤ºï¼‰ã€‚åè¿‡æ¥ï¼ŒæŠŠLocalDateTimeçš„æ—¶é—´è¡¨ç¤ºè½¬æ¢ä¸ºDateæ—¶ï¼Œä¹Ÿéœ€è¦æä¾›æ—¶åŒºï¼Œç”¨äºæŒ‡å®šæ˜¯å“ªä¸ªæ—¶åŒºçš„æ—¶é—´è¡¨ç¤ºï¼Œä¹Ÿå°±æ˜¯å…ˆé€šè¿‡atZoneæ–¹æ³•æŠŠLocalDateTimeè½¬æ¢ä¸ºZonedDateTimeï¼Œç„¶åæ‰èƒ½è·å¾—UTCæ—¶é—´æˆ³ï¼š</p><pre><code>Date in = new Date();\nLocalDateTime ldt = LocalDateTime.ofInstant(in.toInstant(), ZoneId.systemDefault());\nDate out = Date.from(ldt.atZone(ZoneId.systemDefault()).toInstant());\n</code></pre><p>å¾ˆå¤šåŒå­¦è¯´ä½¿ç”¨æ–°APIå¾ˆéº»çƒ¦ï¼Œè¿˜éœ€è¦è€ƒè™‘æ—¶åŒºçš„æ¦‚å¿µï¼Œä¸€ç‚¹éƒ½ä¸ç®€æ´ã€‚ä½†æˆ‘é€šè¿‡è¿™ç¯‡æ–‡ç« è¦å’Œä½ è¯´çš„æ˜¯ï¼Œå¹¶ä¸æ˜¯å› ä¸ºAPIéœ€è¦è®¾è®¡å¾—è¿™ä¹ˆç¹çï¼Œè€Œæ˜¯UTCæ—¶é—´è¦å˜ä¸ºå½“åœ°æ—¶é—´ï¼Œå¿…é¡»è€ƒè™‘æ—¶åŒºã€‚</p><p>ä»Šå¤©ç”¨åˆ°çš„ä»£ç ï¼Œæˆ‘éƒ½æ”¾åœ¨äº†GitHubä¸Šï¼Œä½ å¯ä»¥ç‚¹å‡»<a href=\"https://github.com/JosephZhu1983/java-common-mistakes\">è¿™ä¸ªé“¾æ¥</a>æŸ¥çœ‹ã€‚</p><h2>æ€è€ƒä¸è®¨è®º</h2><ol>\n<li>æˆ‘ä»Šå¤©å¤šæ¬¡å¼ºè°ƒDateæ˜¯ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œæ˜¯UTCæ—¶é—´ã€æ²¡æœ‰æ—¶åŒºæ¦‚å¿µï¼Œä¸ºä»€ä¹ˆè°ƒç”¨å…¶toStringæ–¹æ³•ä¼šè¾“å‡ºç±»ä¼¼CSTä¹‹ç±»çš„æ—¶åŒºå­—æ ·å‘¢ï¼Ÿ</li>\n<li>æ—¥æœŸæ—¶é—´æ•°æ®å§‹ç»ˆè¦ä¿å­˜åˆ°æ•°æ®åº“ä¸­ï¼ŒMySQLä¸­æœ‰ä¸¤ç§æ•°æ®ç±»å‹datetimeå’Œtimestampå¯ä»¥ç”¨æ¥ä¿å­˜æ—¥æœŸæ—¶é—´ã€‚ä½ èƒ½è¯´è¯´å®ƒä»¬çš„åŒºåˆ«å—ï¼Œå®ƒä»¬æ˜¯å¦åŒ…å«æ—¶åŒºä¿¡æ¯å‘¢ï¼Ÿ</li>\n</ol><p>å¯¹äºæ—¥æœŸå’Œæ—¶é—´ï¼Œä½ è¿˜é‡åˆ°è¿‡ä»€ä¹ˆå‘å—ï¼Ÿæˆ‘æ˜¯æœ±æ™”ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºä¸æˆ‘ç•™è¨€åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–åŒäº‹ï¼Œä¸€èµ·äº¤æµã€‚</p>","neighbors":{"left":{"article_title":"15 | åºåˆ—åŒ–ï¼šä¸€æ¥ä¸€å›ä½ è¿˜æ˜¯åŸæ¥çš„ä½ å—ï¼Ÿ","id":223111},"right":{"article_title":"17 | åˆ«ä»¥ä¸ºâ€œè‡ªåŠ¨æŒ¡â€å°±ä¸å¯èƒ½å‡ºç°OOM","id":224784}},"comments":[{"had_liked":false,"id":207146,"user_name":"Darren","can_delete":false,"product_type":"c1","uid":1254968,"ip_address":"","ucode":"CCD2B2C492BE9A","user_header":"https://static001.geekbang.org/account/avatar/00/13/26/38/ef063dc2.jpg","comment_is_top":false,"comment_ctime":1587016117,"is_pvip":true,"replies":[{"id":"77390","content":"å¾ˆå…¨é¢","user_name":"ä½œè€…å›å¤","comment_id":207146,"uid":"1001470","ip_address":"","utype":1,"ctime":1587017254,"user_name_real":"æœ±æ™”"}],"discussion_count":3,"race_medal":0,"score":"199155511733","product_id":100047701,"comment_content":"è¯•ç€å›åˆ°ä¸‹é—®é¢˜ï¼š<br>ç¬¬ä¸€ä¸ªï¼š<br>Dateçš„toString()æ–¹æ³•å¤„ç†çš„ï¼ŒåŒStringä¸­æœ‰BaseCalendar.Date date = normalize();<br>è€Œnormalizeä¸­è¿›è¡Œè¿™æ ·å¤„ç†cdate = (BaseCalendar.Date) cal.getCalendarDate(fastTime,TimeZone.getDefaultRef()ï¼›<br>å› æ­¤å…¶å®æ˜¯è·å–å½“å‰çš„é»˜è®¤æ—¶åŒºçš„ã€‚<br>ç¬¬äºŒä¸ªï¼š<br>ä»ä¸‹é¢å‡ ä¸ªç»´åº¦è¿›è¡ŒåŒºåˆ†ï¼š<br>å ç”¨ç©ºé—´ï¼šdatetimeï¼š8å­—èŠ‚ã€‚timestamp 4å­—èŠ‚<br>è¡¨ç¤ºèŒƒå›´ï¼šdatetime\t&#39;1000-01-01 00:00:00.000000&#39; to &#39;9999-12-31 23:59:59.999999&#39;<br>\t\ttimestamp\t&#39;1970-01-01 00:00:01.000000&#39; to &#39;2038-01-19 03:14:07.999999&#39;<br>æ—¶åŒºï¼štimestamp åªå  4 ä¸ªå­—èŠ‚ï¼Œè€Œä¸”æ˜¯ä»¥utcçš„æ ¼å¼å‚¨å­˜ï¼Œ å®ƒä¼šè‡ªåŠ¨æ£€ç´¢å½“å‰æ—¶åŒºå¹¶è¿›è¡Œè½¬æ¢ã€‚<br>\tdatetimeä»¥ 8 ä¸ªå­—èŠ‚å‚¨å­˜ï¼Œä¸ä¼šè¿›è¡Œæ—¶åŒºçš„æ£€ç´¢.<br>\tä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºtimestampæ¥è¯´ï¼Œå¦‚æœå‚¨å­˜æ—¶çš„æ—¶åŒºå’Œæ£€ç´¢æ—¶çš„æ—¶åŒºä¸ä¸€æ ·ï¼Œé‚£ä¹ˆæ‹¿å‡ºæ¥çš„æ•°æ®ä¹Ÿä¸ä¸€æ ·ã€‚å¯¹äºdatetimeæ¥è¯´ï¼Œå­˜ä»€ä¹ˆæ‹¿åˆ°çš„å°±æ˜¯ä»€ä¹ˆã€‚<br>æ›´æ–°ï¼štimestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMPï¼›<br>\tè¿™ä¸ªç‰¹æ€§æ˜¯è‡ªåŠ¨åˆå§‹åŒ–å’Œè‡ªåŠ¨æ›´æ–°ï¼ˆAutomatic Initialization and Updatingï¼‰ã€‚<br>\tè‡ªåŠ¨æ›´æ–°æŒ‡çš„æ˜¯å¦‚æœä¿®æ”¹äº†å…¶å®ƒå­—æ®µï¼Œåˆ™è¯¥å­—æ®µçš„å€¼å°†è‡ªåŠ¨æ›´æ–°ä¸ºå½“å‰ç³»ç»Ÿæ—¶é—´ã€‚<br>\tå®ƒä¸â€œexplicit_defaults_for_timestampâ€å‚æ•°æœ‰å…³ã€‚<br><br>\tBy default, the first TIMESTAMP column has both DEFAULT CURRENT_TIMESTAMP and ON UPDATE CURRENT_TIMESTAMP if neither is specified explicitlyã€‚<br>\tå¾ˆå¤šæ—¶å€™ï¼Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œå¦‚ä½•ç¦ç”¨å‘¢ï¼Ÿ<br>\t\t1. å°†â€œexplicit_defaults_for_timestampâ€çš„å€¼è®¾ç½®ä¸ºONã€‚<br>\t\t2. â€œexplicit_defaults_for_timestampâ€çš„å€¼ä¾æ—§æ˜¯OFFï¼Œä¹Ÿæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥ç¦ç”¨<br>     \t\t1&gt; ç”¨DEFAULTå­å¥è¯¥è¯¥åˆ—æŒ‡å®šä¸€ä¸ªé»˜è®¤å€¼<br>     \t\t2&gt; ä¸ºè¯¥åˆ—æŒ‡å®šNULLå±æ€§ã€‚<br><br><br>    åœ¨MySQL 5.6.5ç‰ˆæœ¬ä¹‹å‰ï¼ŒAutomatic Initialization and Updatingåªé€‚ç”¨äºTIMESTAMPï¼Œè€Œä¸”ä¸€å¼ è¡¨ä¸­ï¼Œæœ€å¤šå…è®¸ä¸€ä¸ªTIMESTAMPå­—æ®µé‡‡ç”¨è¯¥ç‰¹æ€§ã€‚ä»MySQL 5.6.5å¼€å§‹ï¼ŒAutomatic Initialization and UpdatingåŒæ—¶é€‚ç”¨äºTIMESTAMPå’ŒDATETIMEï¼Œä¸”ä¸é™åˆ¶æ•°é‡ã€‚","like_count":47,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492024,"discussion_content":"å¾ˆå…¨é¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587017254,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1438157,"avatar":"https://static001.geekbang.org/account/avatar/00/15/f1/cd/210d3c74.jpg","nickname":"dongdong5820","note":"","ucode":"272431574E123E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567725,"discussion_content":"è¯¾ä»£è¡¨å°±æ˜¯ç‰›ğŸ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650982480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294066,"discussion_content":"è¯¾ä»£è¡¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595773304,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207065,"user_name":"ğŸ‘½","can_delete":false,"product_type":"c1","uid":1274117,"ip_address":"","ucode":"D313AF941B412D","user_header":"https://static001.geekbang.org/account/avatar/00/13/71/05/db554eba.jpg","comment_is_top":false,"comment_ctime":1587001996,"is_pvip":false,"replies":[{"id":"77381","content":"ä¿å­˜å’Œä¼ è¾“ç”¨æ—¶é—´æˆ³çš„ç¡®æ¯”è¾ƒæ–¹ä¾¿ï¼Œç”¨å¸¦æœ‰æ—¶åŒºçš„å­—é¢é‡æ—¶é—´è¡¨ç¤ºå­—ç¬¦ä¸²ï¼Œè¿˜æœ‰æ ¼å¼ä¸ç»Ÿä¸€çš„é—®é¢˜","user_name":"ä½œè€…å›å¤","comment_id":207065,"uid":"1001470","ip_address":"","utype":1,"ctime":1587012759,"user_name_real":"æœ±æ™”"}],"discussion_count":3,"race_medal":0,"score":"78896413324","product_id":100047701,"comment_content":"å¯¹äºæ—¶é—´ï¼Œæˆ‘ä¸ªäººçš„ç†è§£å’Œç›®å‰çš„ä½¿ç”¨ç»éªŒæ˜¯â€”â€”èƒ½ç”¨æ—¶é—´æˆ³å°±ç”¨æ—¶é—´æˆ³ã€‚<br>æ—¶é—´æˆ³æœ‰å‡ ä¸ªä¼˜åŠ¿ï¼š<br>1ï¼Œä¾¿äºæ¯”è¾ƒå’Œæ’åºï¼Œæ— è®ºæ•°æ®åº“è¿˜æ˜¯åå°ä¸šåŠ¡ä¸­éƒ½æ˜¯å¦‚æ­¤ã€‚<br>2ï¼Œä¹Ÿæ¯”è¾ƒä¾¿äºè®¡ç®—ï¼Œè™½ç„¶æ–‡ä¸­æåˆ°äº†Longçš„é—®é¢˜ï¼Œä½†æ˜¯ï¼Œæˆ‘è®¤ä¸ºLçš„é—®é¢˜çš„æ ¹æœ¬åœ¨äºLongç±»å‹çš„ç†è§£ï¼Œä¸æ˜¯æ—¶é—´æˆ³è¿™ä¸ªä¸šåŠ¡çš„é—®é¢˜ã€‚å¯¹Longçš„åŸºç¡€æ¯”è¾ƒå¥½äº†ä¹‹åï¼Œä¹Ÿå°±è¶³ä»¥åº”å¯¹è®¡ç®—ä¸­çš„é—®é¢˜äº†ã€‚<br>3ï¼Œå¤šç«¯ç»Ÿä¸€ï¼Œç°åœ¨æä¾›ç»™å‰ç«¯çš„å¾ˆå¤šæœåŠ¡éƒ½é‡‡ç”¨ç›´æ¥è½¬æ¢å¥½å¹´æœˆæ—¥çš„å­—ç¬¦ä¸²äº†ï¼Œä½†æ˜¯æœ‰æ—¶å€™ï¼Œå‰ç«¯éœ€è¦å¯¹æ—¶é—´è¿›è¡Œæ¯”è¾ƒçš„æ—¶å€™è¿˜æ˜¯éœ€è¦é¢å¤–è½¬åŒ–ï¼Œä¼šå¾ˆéº»çƒ¦ã€‚è€Œä¸”ä¸åˆ©äºæ ¼å¼åŒ–ã€‚æ—¶é—´æˆ³çš„è¯å°±é¿å…äº†è¿™ä¸ªé—®é¢˜ï¼Œè‡ªå·±è¿›è¡Œè®¡ç®—ï¼Œè‡ªå·±æ ¼å¼åŒ–ã€‚å‰ç«¯è‡ªå·±éšä¾¿ç©ã€‚<br>","like_count":18,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491997,"discussion_content":"ä¿å­˜å’Œä¼ è¾“ç”¨æ—¶é—´æˆ³çš„ç¡®æ¯”è¾ƒæ–¹ä¾¿ï¼Œç”¨å¸¦æœ‰æ—¶åŒºçš„å­—é¢é‡æ—¶é—´è¡¨ç¤ºå­—ç¬¦ä¸²ï¼Œè¿˜æœ‰æ ¼å¼ä¸ç»Ÿä¸€çš„é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587012759,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1274787,"avatar":"https://static001.geekbang.org/account/avatar/00/13/73/a3/2b077607.jpg","nickname":"Michael","note":"","ucode":"C233DF1D224EC1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":239242,"discussion_content":"ç°åœ¨æˆ‘ä»¬å‡ºæ¥å£çš„æ—¶å€™ï¼Œå‰ç«¯éƒ½è¦æ±‚æˆ‘ä»¬ç»™æ—¶é—´æ ¼å¼çš„æ—¶å€™éƒ½æ˜¯è½¬å¥½çš„å­—ç¬¦ä¸²ï¼Œéƒ½æ˜¯ç»Ÿä¸€è¿™ç§æ ¼å¼ï¼š\nyyyy-MM-dd HH:mm:ss\nå‰ç«¯æ‹¿æ¥ç›´æ¥å±•ç¤ºï¼Œæœ€å¤šè‡ªå·±æ‹¼æ¥ä¸‹ï¼Œä»–ä»¬çš„ç†ç”±çš„æ˜¯æ ¼å¼åŒ–è¿™ç§æ“ä½œç‰¹åˆ«è€—è´¹æ€§èƒ½ï¼Œè€Œä¸”åå°ç»™å‡ºçš„æ ¼å¼å‡åº”è¯¥ç»Ÿä¸€ï¼Œä¸èƒ½å‡ºç°äº”èŠ±å…«é—¨çš„æ—¶é—´æ ¼å¼ï¼Œyyyy-MM-dd HH:mm:ssè¿™ç§æ ¼å¼è¦ä¹ˆç›´æ¥å±•ç¤ºï¼Œè¦ä¹ˆæˆªå–ä¸‹ã€‚\n","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1587286698,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1225974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b4/f6/e39d5af1.jpg","nickname":"é’±ç±³","note":"","ucode":"07AA44C6A40D34","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390722,"discussion_content":"é‚£è¿™ä¸ªæ—¶é—´æˆ³åœ¨æ•°æ®åº“ä¸­æ˜¯æŒ‡ä»€ä¹ˆï¼Œä»£ç ä¸­æŒ‡ä»€ä¹ˆï¼Ÿï¼ˆæ•°æ®åº“timestamp&amp;ä»£ç Dateï¼‰orï¼ˆæ•°æ®åº“bigint&amp;ä»£ç Longï¼‰ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629988540,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207027,"user_name":"pedro","can_delete":false,"product_type":"c1","uid":1200704,"ip_address":"","ucode":"F40C839DDFD599","user_header":"https://static001.geekbang.org/account/avatar/00/12/52/40/e57a736e.jpg","comment_is_top":false,"comment_ctime":1586998149,"is_pvip":false,"replies":[{"id":"77347","content":"æ˜¯","user_name":"ä½œè€…å›å¤","comment_id":207027,"uid":"1001470","ip_address":"","utype":1,"ctime":1587005089,"user_name_real":"æœ±æ™”"}],"discussion_count":1,"race_medal":0,"score":"57421572997","product_id":100047701,"comment_content":"ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œè™½ç„¶ Date æœ¬è´¨æ˜¯ä¸€ä¸ªæ—¶é—´æˆ³æ²¡æœ‰æ—¶åŒºçš„æ¦‚å¿µï¼Œä½†æ˜¯åœ¨ toString çš„æ—¶å€™ä¸ºäº†å¯è¯»æ€§ä¼šæ¨æµ‹å½“å‰æ—¶åŒºï¼Œå¦‚æœå¾—ä¸åˆ°å°±ä¼šä½¿ç”¨ GMTã€‚","like_count":13,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491985,"discussion_content":"æ˜¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587005089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207062,"user_name":"ğŸ‘½","can_delete":false,"product_type":"c1","uid":1274117,"ip_address":"","ucode":"D313AF941B412D","user_header":"https://static001.geekbang.org/account/avatar/00/13/71/05/db554eba.jpg","comment_is_top":false,"comment_ctime":1587001364,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"48831641620","product_id":100047701,"comment_content":"æ€è€ƒé¢˜1:<br>æ ¹æœ¬åŸå› åœ¨äºtoStringçš„æºä»£ç ï¼š<br>sb.append(zi.getDisplayName(date.isDaylightTime(), TimeZone.SHORT, Locale.US)); &#47;&#47; zzz è¿™ä¸€è¡Œã€‚<br>Dateçš„toStringå®é™…ä¸Šï¼Œæ˜¯æ–°å»ºä¸€ä¸ªStringBuilderï¼Œç„¶åæ ¹æ®Dateå¯¹è±¡é‡Œçš„å¹´æœˆæ—¥å‘¨ï¼Œå°†å…¶æ ¼å¼åŒ–ã€‚<br>æ ¼å¼åŒ–è¿‡ç¨‹ä¸­ï¼Œä¼¼ä¹ä¼šè·å–ç³»ç»Ÿé»˜è®¤çš„æ—¶åŒºï¼Œå¦‚æœå–ä¸åˆ°ç³»ç»Ÿé»˜è®¤æ—¶åŒºï¼Œå°±ä½¿ç”¨GMTã€‚<br>ä¸ºäº†æµ‹è¯•æˆ‘çš„çŒœæƒ³ï¼Œæˆ‘å°è¯•æ›´æ”¹æœ¬æœºæ—¶åŒºï¼Œç»“æœè¾“å‡ºï¼š<br>Wed Apr 15 21:40:10 EDT 2020<br>ç›¸æ¯”è¾ƒæ­£å¸¸è‡ªåŠ¨æ—¶åŒº<br>Thu Apr 16 09:41:31 CST 2020<br>åŸºæœ¬ä¸æˆ‘çš„çŒœæµ‹ä¸€è‡´ã€‚<br><br><br><br>","like_count":11},{"had_liked":false,"id":207076,"user_name":"ä¿ŠæŸ±","can_delete":false,"product_type":"c1","uid":1439043,"ip_address":"","ucode":"7067F256DAFF9B","user_header":"https://static001.geekbang.org/account/avatar/00/15/f5/43/b882ab43.jpg","comment_is_top":false,"comment_ctime":1587003189,"is_pvip":false,"replies":[{"id":"77372","content":"å¤§å¤šæ•°æ—¶å€™é¡¹ç›®æ²¡æœ‰å…¨çƒåŒ–éœ€æ±‚æ˜ å°„åˆ°æœ¬åœ°æ—¶åŒºå³å¯ï¼Œå¯ä»¥ä½¿ç”¨LocalDateTimeã€‚<br><br>ä¸è¿‡æˆ‘ä»¬è¯´datetimeä¸åŒ…å«æ—¶åŒºï¼Œæ˜¯å›ºå®šçš„æ—¶é—´è¡¨ç¤ºä»…ä»…æ˜¯æŒ‡MySQLæœ¬èº«ã€‚ä½¿ç”¨timestampï¼Œéœ€è¦è€ƒè™‘Javaè¿›ç¨‹çš„æ—¶åŒºå’ŒMySQLè¿æ¥çš„æ—¶åŒºã€‚è€Œä½¿ç”¨datetimeç±»å‹ï¼Œåˆ™åªéœ€è¦è€ƒè™‘Javaè¿›ç¨‹çš„æ—¶åŒºï¼ˆå› ä¸ºMySQL datetimeæ²¡æœ‰æ—¶åŒºä¿¡æ¯äº†ï¼ŒJDBCæ—¶é—´æˆ³è½¬æ¢æˆMySQL datetimeï¼Œä¼šæ ¹æ®MySQLçš„serverTimezoneåšä¸€æ¬¡è½¬æ¢ï¼‰<br><br>å…·ä½“ä½ å¯èƒ½éœ€è¦è‡ªå·±å¤šåšä¸€äº›å®éªŒæ¥ç†è§£ï¼Œå‡ ä¸ªå±‚é¢<br>1ã€mysqlæœ¬èº«å¯¹äºdatetimeå’Œtimestampçš„åŒºåˆ«<br>2ã€javaåº”ç”¨å’Œmysqläº¤äº’æ—¶çš„å…³ç³»","user_name":"ä½œè€…å›å¤","comment_id":207076,"uid":"1001470","ip_address":"","utype":1,"ctime":1587009562,"user_name_real":"æœ±æ™”"}],"discussion_count":1,"race_medal":0,"score":"18766872373","product_id":100047701,"comment_content":"è€å¸ˆï¼Œæ˜ å°„è¡¨çš„beanï¼Œè‹¥æ•°æ®åº“å­—æ®µä¸º Timestampï¼Œé‚£ java çš„å­—æ®µåº”è¯¥è®¾ä¸º ZonedDateTime æœ€ä¸ºåˆç†å—ï¼Ÿ å› ä¸ºæˆ‘çœ‹ç½‘ä¸Šå¾ˆå¤šäººéƒ½æ˜¯ç”¨ LocalDateTime è¿›è¡Œæ˜ å°„","like_count":4,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492001,"discussion_content":"å¤§å¤šæ•°æ—¶å€™é¡¹ç›®æ²¡æœ‰å…¨çƒåŒ–éœ€æ±‚æ˜ å°„åˆ°æœ¬åœ°æ—¶åŒºå³å¯ï¼Œå¯ä»¥ä½¿ç”¨LocalDateTimeã€‚\n\nä¸è¿‡æˆ‘ä»¬è¯´datetimeä¸åŒ…å«æ—¶åŒºï¼Œæ˜¯å›ºå®šçš„æ—¶é—´è¡¨ç¤ºä»…ä»…æ˜¯æŒ‡MySQLæœ¬èº«ã€‚ä½¿ç”¨timestampï¼Œéœ€è¦è€ƒè™‘Javaè¿›ç¨‹çš„æ—¶åŒºå’ŒMySQLè¿æ¥çš„æ—¶åŒºã€‚è€Œä½¿ç”¨datetimeç±»å‹ï¼Œåˆ™åªéœ€è¦è€ƒè™‘Javaè¿›ç¨‹çš„æ—¶åŒºï¼ˆå› ä¸ºMySQL datetimeæ²¡æœ‰æ—¶åŒºä¿¡æ¯äº†ï¼ŒJDBCæ—¶é—´æˆ³è½¬æ¢æˆMySQL datetimeï¼Œä¼šæ ¹æ®MySQLçš„serverTimezoneåšä¸€æ¬¡è½¬æ¢ï¼‰\n\nå…·ä½“ä½ å¯èƒ½éœ€è¦è‡ªå·±å¤šåšä¸€äº›å®éªŒæ¥ç†è§£ï¼Œå‡ ä¸ªå±‚é¢\n1ã€mysqlæœ¬èº«å¯¹äºdatetimeå’Œtimestampçš„åŒºåˆ«\n2ã€javaåº”ç”¨å’Œmysqläº¤äº’æ—¶çš„å…³ç³»","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1587009562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223797,"user_name":"Monday","can_delete":false,"product_type":"c1","uid":1250907,"ip_address":"","ucode":"77B9BACC783598","user_header":"https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg","comment_is_top":false,"comment_ctime":1591182848,"is_pvip":false,"replies":[{"id":"82416","content":"å¥½å§ï¼Œä¸è¿‡ThreadLocalå¯ä»¥ç”¨çš„","user_name":"ä½œè€…å›å¤","comment_id":223797,"uid":"1001470","ip_address":"","utype":1,"ctime":1591187675,"user_name_real":"æœ±æ™”"}],"discussion_count":1,"race_medal":0,"score":"14476084736","product_id":100047701,"comment_content":"ä»Šå¤©è¸©å‘private static simpledateformatï¼Œé«˜å¹¶å‘ä¸‹å‡ºç°numberformatexceptioné”™è¯¯ã€‚å•ç¬”æ•°æ®é‡æ”¾æ²¡æœ‰é—®é¢˜ã€‚åˆçœ‹åˆ°è¿™ä¸ªå¼‚å¸¸ä¸€è„¸æ‡µï¼Œå®Œå…¨è”ç³»ä¸åˆ°æ˜¯simpledateformatçš„å‘ã€‚<br>åé¢çªç„¶æƒ³èµ·è€å¸ˆè¿™ç¯‡æ–‡ç« ã€‚ã€‚ã€‚å®Œå…¨æ˜¯å‘äºŒçš„é‡ç°ã€‚å› ä¸ºæ˜¯jdk6æ‰€ä»¥é€‰æ‹©äº†å»æ‰staticè§£å†³ï¼Œæ¯æ¬¡éƒ½ä¼šæ–°å»ºä¸€ä¸ªå¯¹è±¡","like_count":3,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497243,"discussion_content":"å¥½å§ï¼Œä¸è¿‡ThreadLocalå¯ä»¥ç”¨çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591187675,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215988,"user_name":"lee","can_delete":false,"product_type":"c1","uid":1019937,"ip_address":"","ucode":"1FA130A398A06D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/90/21/bb289d5e.jpg","comment_is_top":false,"comment_ctime":1589163907,"is_pvip":false,"replies":[{"id":"79923","content":"       å¤ä»¤æ—¶çš„å…³ç³»ï¼Œæœ‰å…³å¤ä»¤æ—¶ä½ å¯ä»¥ç½‘ä¸Šæœç´¢ä¸€äº›èµ„æ–™<br><br>System.out.println(TimeZone.getDefault().inDaylightTime(date));<br>","user_name":"ä½œè€…å›å¤","comment_id":215988,"uid":"1001470","ip_address":"","utype":1,"ctime":1589165848,"user_name_real":"æœ±æ™”"}],"discussion_count":1,"race_medal":0,"score":"14474065795","product_id":100047701,"comment_content":"è€å¸ˆå¥½ï¼Œä¸Šæµ·æ—¶åŒºå’Œçº½çº¦æ—¶åŒºä¸‹ï¼Œæ ¼å¼åŒ–åŒä¸€ä¸ªæ—¶é—´ä¸²å¾—åˆ°çš„å½“å‰æ—¶å·®æœ‰æ—¶å€™æ˜¯12å°æ—¶ï¼Œæœ‰æ—¶å€™æ˜¯13å°æ—¶å‘¢ï¼ŒæŠŠstringDateæ”¹æˆ2020-05-02 22:00:00å¾—åˆ°çš„ç›¸å·®12å°æ—¶<br>String stringDate = &quot;2020-05-02 22:00:00&quot;;<br>SimpleDateFormat inputFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);<br>&#47;&#47;åŒä¸€Date<br>Date date = inputFormat.parse(stringDate);<br>&#47;&#47;é»˜è®¤æ—¶åŒºæ ¼å¼åŒ–è¾“å‡ºï¼š<br>System.out.println(new SimpleDateFormat(&quot;[yyyy-MM-dd HH:mm:ss Z]&quot;).format(date));<br>&#47;&#47;çº½çº¦æ—¶åŒºæ ¼å¼åŒ–è¾“å‡º<br>TimeZone.setDefault(TimeZone.getTimeZone(&quot;America&#47;New_York&quot;));<br>System.out.println(new SimpleDateFormat(&quot;[yyyy-MM-dd HH:mm:ss Z]&quot;).format(date));","like_count":3,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494631,"discussion_content":"       å¤ä»¤æ—¶çš„å…³ç³»ï¼Œæœ‰å…³å¤ä»¤æ—¶ä½ å¯ä»¥ç½‘ä¸Šæœç´¢ä¸€äº›èµ„æ–™\n\nSystem.out.println(TimeZone.getDefault().inDaylightTime(date));\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589165848,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207127,"user_name":"eazonshaw","can_delete":false,"product_type":"c1","uid":1493784,"ip_address":"","ucode":"423952F7CEF475","user_header":"https://static001.geekbang.org/account/avatar/00/16/cb/18/4877c08b.jpg","comment_is_top":false,"comment_ctime":1587011648,"is_pvip":false,"replies":[{"id":"77382","content":"TIMESTAMPä¿å­˜çš„æ—¶å€™æ ¹æ®å½“å‰æ—¶åŒºè½¬æ¢ä¸ºUTCï¼ŒæŸ¥è¯¢çš„æ—¶å€™å†æ ¹æ®å½“å‰æ—¶åŒºä»UTCè½¬å›æ¥ï¼Œè€ŒDATETIMEå°±æ˜¯ä¸€ä¸ªæ­»çš„å­—ç¬¦ä¸²æ—¶é—´ï¼ˆä»…ä»…å¯¹MySQLæœ¬èº«è€Œè¨€ï¼‰è¡¨ç¤ºã€‚æœ‰å…³mysqlæ—¶é—´ç±»å‹å¯ä»¥è¯¦ç»†çœ‹ä¸€ä¸‹è¿™ä¸ªppt<br>http:&#47;&#47;cdn.oreillystatic.com&#47;en&#47;assets&#47;1&#47;event&#47;36&#47;Time%20Zones%20and%20MySQL%20Presentation.pdf<br><br>å¦‚æœä½ çš„é¡¹ç›®æœ‰å›½é™…åŒ–éœ€æ±‚ï¼Œæ¨èä½¿ç”¨æ—¶é—´æˆ³ï¼Œå¹¶ä¸”éœ€è¦ç¡®ä¿ä½ çš„åº”ç”¨æœåŠ¡å™¨å’Œæ•°æ®åº“æœåŠ¡å™¨è®¾ç½®äº†æ­£ç¡®çš„åŒ¹é…å½“åœ°æ—¶åŒºçš„æ—¶åŒºé…ç½®ï¼ˆå…¶å®ï¼Œå³ä¾¿ä½ çš„é¡¹ç›®æ²¡æœ‰å›½é™…åŒ–éœ€æ±‚ï¼Œè®¾ç½®æ­£ç¡®çš„éœ€æ±‚ï¼Œè‡³å°‘æ˜¯åº”ç”¨æœåŠ¡å™¨å’Œæ•°æ®åº“æœåŠ¡å™¨è®¾ç½®ä¸€è‡´çš„æ—¶åŒºï¼Œä¹Ÿæ˜¯éœ€è¦çš„ï¼‰<br><br>","user_name":"ä½œè€…å›å¤","comment_id":207127,"uid":"1001470","ip_address":"","utype":1,"ctime":1587013286,"user_name_real":"æœ±æ™”"}],"discussion_count":1,"race_medal":0,"score":"14471913536","product_id":100047701,"comment_content":"é—®é¢˜äºŒï¼š<br>é¦–å…ˆï¼Œä¸ºäº†è®©dockerå®¹å™¨çš„æ—¶é—´æ ¼å¼å’Œå®¿ä¸»æœºä¸€è‡´ï¼Œå¯ä»¥åœ¨environmentä¸­æ·»åŠ TZ: Asia&#47;Shanghaiã€‚<br>å®éªŒå‘ç°ï¼Œåˆ‡æ¢mysqlçš„TIME_ZONEåˆ°â€œamerica&#47;new_yorkâ€åï¼Œå‘ç°datetimeæ ¼å¼å­—æ®µä¸å‘ç”Ÿå˜åŒ–ï¼Œè€Œtimestampæ ¼å¼ä¼šæ¢ç®—æˆçº½çº¦æ—¶åŒºæ—¶é—´ï¼Œæ‰€ä»¥timestampæ ¼å¼çš„æ—¥æœŸä¿å­˜äº†æ—¶åŒºä¿¡æ¯ï¼Œè€Œdatetimeæ²¡æœ‰ã€‚<br>æ„Ÿè§‰åœ¨ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œæœ‰å¯èƒ½å‡ºç°æœåŠ¡å™¨æˆ–å®¹å™¨ç³»ç»Ÿæ—¶é—´å¹¶æœªè®¾ç½®æ—¶åŒºï¼Œå¯¼è‡´ä¿å­˜çš„æ•°æ®å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚å› æ­¤ï¼Œæ˜¯ä¸æ˜¯æ›´æ¨èä½¿ç”¨timestampæ ¼å¼æ¥ä¿å­˜æ—¥æœŸï¼Œé¿å…è¿™ç§æƒ…å†µå‘ç”Ÿå‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492016,"discussion_content":"TIMESTAMPä¿å­˜çš„æ—¶å€™æ ¹æ®å½“å‰æ—¶åŒºè½¬æ¢ä¸ºUTCï¼ŒæŸ¥è¯¢çš„æ—¶å€™å†æ ¹æ®å½“å‰æ—¶åŒºä»UTCè½¬å›æ¥ï¼Œè€ŒDATETIMEå°±æ˜¯ä¸€ä¸ªæ­»çš„å­—ç¬¦ä¸²æ—¶é—´ï¼ˆä»…ä»…å¯¹MySQLæœ¬èº«è€Œè¨€ï¼‰è¡¨ç¤ºã€‚æœ‰å…³mysqlæ—¶é—´ç±»å‹å¯ä»¥è¯¦ç»†çœ‹ä¸€ä¸‹è¿™ä¸ªppt\nhttp://cdn.oreillystatic.com/en/assets/1/event/36/Time%20Zones%20and%20MySQL%20Presentation.pdf\n\nå¦‚æœä½ çš„é¡¹ç›®æœ‰å›½é™…åŒ–éœ€æ±‚ï¼Œæ¨èä½¿ç”¨æ—¶é—´æˆ³ï¼Œå¹¶ä¸”éœ€è¦ç¡®ä¿ä½ çš„åº”ç”¨æœåŠ¡å™¨å’Œæ•°æ®åº“æœåŠ¡å™¨è®¾ç½®äº†æ­£ç¡®çš„åŒ¹é…å½“åœ°æ—¶åŒºçš„æ—¶åŒºé…ç½®ï¼ˆå…¶å®ï¼Œå³ä¾¿ä½ çš„é¡¹ç›®æ²¡æœ‰å›½é™…åŒ–éœ€æ±‚ï¼Œè®¾ç½®æ­£ç¡®çš„éœ€æ±‚ï¼Œè‡³å°‘æ˜¯åº”ç”¨æœåŠ¡å™¨å’Œæ•°æ®åº“æœåŠ¡å™¨è®¾ç½®ä¸€è‡´çš„æ—¶åŒºï¼Œä¹Ÿæ˜¯éœ€è¦çš„ï¼‰\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587013286,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207063,"user_name":"ğŸ‘½","can_delete":false,"product_type":"c1","uid":1274117,"ip_address":"","ucode":"D313AF941B412D","user_header":"https://static001.geekbang.org/account/avatar/00/13/71/05/db554eba.jpg","comment_is_top":false,"comment_ctime":1587001555,"is_pvip":false,"replies":[{"id":"77380","content":"https:&#47;&#47;dev.mysql.com&#47;doc&#47;refman&#47;5.6&#47;en&#47;timestamp-initialization.html<br><br>ä½ è¯´çš„åº”è¯¥æ˜¯ã€As of MySQL 5.6.5, TIMESTAMP and DATETIME columns can be automatically initializated and updated to the current date and time (that is, the current timestamp). Before 5.6.5, this is true only for TIMESTAMP, and for at most one TIMESTAMP column per table. The following notes first describe automatic initialization and updating for MySQL 5.6.5 and up, then the differences for versions preceding 5.6.5.ã€è¿™ä¸ªé—®é¢˜ï¼Œå…¶å®å¹¶ä¸æ˜¯æŒ‡åªèƒ½æœ‰ä¸€ä¸ªTIMESTAMP åˆ—ï¼Œè€Œæ˜¯åªèƒ½æœ‰ä¸€ä¸ªTIMESTAMPåˆ—ä½¿ç”¨CURRENT_TIMESTAMPæ¥åˆå§‹åŒ–æˆ–è‡ªåŠ¨æ›´æ–°æ—¶é—´æˆ³","user_name":"ä½œè€…å›å¤","comment_id":207063,"uid":"1001470","ip_address":"","utype":1,"ctime":1587012613,"user_name_real":"æœ±æ™”"}],"discussion_count":1,"race_medal":0,"score":"14471903443","product_id":100047701,"comment_content":"æ€è€ƒé¢˜2:<br>è¯´å®è¯ï¼Œæ•°æ®åº“ç›¸å…³çŸ¥è¯†æ˜¯æˆ‘çš„å¼±é¡¹ã€‚<br>æŸ¥äº†ä¸€ä¸‹ï¼Œå¤§æ¦‚æ˜¯TIMESTAMPåŒ…å«äº†æ—¶åŒºä¿¡æ¯ï¼Œè€ŒDATETIMEä¸åŒ…å«ã€‚å¦å¤–æœ‰ä¸€ä¸ªæ˜¯ï¼Œæˆ‘å°è±¡ä¸­5.7ä¹‹åçš„mysqlç‰ˆæœ¬ï¼Œæœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªTIMESTAMPçš„å­—æ®µã€‚è¿™ä¹Ÿç®—æ˜¯ä¸ªåŒºåˆ«å§ã€‚","like_count":3,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491996,"discussion_content":"https://dev.mysql.com/doc/refman/5.6/en/timestamp-initialization.html\n\nä½ è¯´çš„åº”è¯¥æ˜¯ã€As of MySQL 5.6.5, TIMESTAMP and DATETIME columns can be automatically initializated and updated to the current date and time (that is, the current timestamp). Before 5.6.5, this is true only for TIMESTAMP, and for at most one TIMESTAMP column per table. The following notes first describe automatic initialization and updating for MySQL 5.6.5 and up, then the differences for versions preceding 5.6.5.ã€è¿™ä¸ªé—®é¢˜ï¼Œå…¶å®å¹¶ä¸æ˜¯æŒ‡åªèƒ½æœ‰ä¸€ä¸ªTIMESTAMP åˆ—ï¼Œè€Œæ˜¯åªèƒ½æœ‰ä¸€ä¸ªTIMESTAMPåˆ—ä½¿ç”¨CURRENT_TIMESTAMPæ¥åˆå§‹åŒ–æˆ–è‡ªåŠ¨æ›´æ–°æ—¶é—´æˆ³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587012613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":209443,"user_name":"ä¿ŠæŸ±","can_delete":false,"product_type":"c1","uid":1439043,"ip_address":"","ucode":"7067F256DAFF9B","user_header":"https://static001.geekbang.org/account/avatar/00/15/f5/43/b882ab43.jpg","comment_is_top":false,"comment_ctime":1587549947,"is_pvip":false,"replies":[{"id":"78205","content":"å½“ç„¶å¯ä»¥ä½¿ç”¨Instantæ˜ å°„ï¼Œå‚è€ƒhttps:&#47;&#47;i.stack.imgur.com&#47;idLPT.png","user_name":"ä½œè€…å›å¤","comment_id":209443,"uid":"1001470","ip_address":"","utype":1,"ctime":1587561179,"user_name_real":"æœ±æ™”"}],"discussion_count":1,"race_medal":0,"score":"10177484539","product_id":100047701,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸€ä¸ªé—®é¢˜å›°æ‰°å·²ä¹…ï¼Œå¸Œæœ›èƒ½å¤Ÿè§£ç­”ä¸€ä¸‹ï¼Œç›®å‰æˆ‘ä»¬å¯¹å¤–è¾“å‡ºçš„ API ï¼Œæ—¶é—´éƒ½æ˜¯æ—¶é—´æˆ³çš„å½¢å¼ï¼Œ å†…éƒ¨ç³»ç»Ÿçš„äº¤äº’ï¼Œæ—¶é—´ä¹Ÿæ˜¯æ—¶é—´æˆ³çš„å½¢å¼ã€‚ é‚£æˆ‘ç”¨ Instant å»æ˜ å°„æ•°æ®åº“çš„ Timestamp&#47;DateTime å­—æ®µï¼Œä¼šä¸ä¼šæ›´å¥½ï¼Ÿ å¦åˆ™çš„è¯ï¼Œéœ€è¦åœ¨å¤šå¤„éƒ½è¦æ³¨æ„ LocalDateTime å’Œ æ—¶é—´æˆ³çš„ç›¸äº’è½¬æ¢ ï¼ˆæ¯”å¦‚ redis çš„åºåˆ—åŒ–ååºåˆ—åŒ–ï¼Œjson çš„åºåˆ—åŒ–ã€ååºåˆ—åŒ–ï¼‰","like_count":2,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492799,"discussion_content":"å½“ç„¶å¯ä»¥ä½¿ç”¨Instantæ˜ å°„ï¼Œå‚è€ƒhttps://i.stack.imgur.com/idLPT.png","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587561179,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207141,"user_name":"å¤§å¤§å¤§ç†Šmyeh","can_delete":false,"product_type":"c1","uid":1139413,"ip_address":"","ucode":"4832C2E7CEB151","user_header":"https://static001.geekbang.org/account/avatar/00/11/62/d5/1f5c5ab6.jpg","comment_is_top":false,"comment_ctime":1587014431,"is_pvip":false,"replies":[{"id":"77389","content":"ğŸ‘ğŸ»","user_name":"ä½œè€…å›å¤","comment_id":207141,"uid":"1001470","ip_address":"","utype":1,"ctime":1587016906,"user_name_real":"æœ±æ™”"}],"discussion_count":1,"race_medal":0,"score":"10176949023","product_id":100047701,"comment_content":"æˆ‘è™½ç„¶ç°åœ¨ç”¨çš„æ˜¯jdk1.8ï¼Œä½†å¯¹äºæ—¥æœŸçš„æ“ä½œä¸€èˆ¬è¿˜æ˜¯ä¹ æƒ¯äºç”¨Dateæˆ–longï¼Œä»¥åå¯ä»¥å°è¯•ç”¨LocalDateTimeç­‰ç±»ã€‚<br><br>æ€è€ƒé¢˜1<br>Date#toStringæ–¹æ³•ä¸­ï¼Œä¼šå°†å½“å‰æ—¶é—´è½¬åŒ–ä¸ºBaseCalendar.Dateç±»ï¼Œè¿™ä¸ªç±»æœ‰ä¸€ä¸ªZoneå±æ€§ï¼Œåœ¨toStringçš„æ—¶å€™ä¼šè¢«è¿½åŠ åˆ°å­—ç¬¦ä¸²ä¸­ï¼ˆé»˜è®¤æ˜¯GMTï¼‰<br><br>æ€è€ƒé¢˜2<br>datetimeå ç”¨8å­—èŠ‚ï¼Œä¸å—æ—¶åŒºå½±å“ï¼Œè¡¨ç¤ºèŒƒå›´&#39;1000-01-01 00:00:00&#39; to &#39;9999-12-31 23:59:59&#39;<br>timestampå ç”¨4å­—èŠ‚ï¼Œå—æ—¶åŒºå½±å“ï¼Œè¡¨ç¤ºèŒƒå›´&#39;1970-01-01 00:00:01&#39; to &#39;2038-01-19 03:14:07&#39;ï¼Œè‹¥æ’å…¥nullä¼šè‡ªåŠ¨è½¬åŒ–ä¸ºå½“å‰æ—¶é—´","like_count":2,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492021,"discussion_content":"ğŸ‘ğŸ»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587016906,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207028,"user_name":"pedro","can_delete":false,"product_type":"c1","uid":1200704,"ip_address":"","ucode":"F40C839DDFD599","user_header":"https://static001.geekbang.org/account/avatar/00/12/52/40/e57a736e.jpg","comment_is_top":false,"comment_ctime":1586998279,"is_pvip":false,"replies":[{"id":"77342","content":"å¤§æ–¹å‘å¯¹ï¼Œå¯ä»¥å†è€ƒè™‘ä¸€ä¸‹æˆ‘ä»¬å¦‚ä½•é€‰æ‹©","user_name":"ä½œè€…å›å¤","comment_id":207028,"uid":"1001470","ip_address":"","utype":1,"ctime":1587004236,"user_name_real":"æœ±æ™”"}],"discussion_count":1,"race_medal":0,"score":"10176932871","product_id":100047701,"comment_content":"ç¬¬äºŒä¸ªé—®é¢˜ï¼Œtimestamp ä¼šæŠŠä¼ å…¥çš„æ—¶é—´è½¬åŒ–ä¸º UTC å³æ—¶é—´æˆ³è¿›è¡Œå­˜å‚¨ï¼Œè€Œ datetime ä¹Ÿç›´æ¥å°†ä¼ å…¥çš„æ—¶é—´å­˜å‚¨ã€‚","like_count":2,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491986,"discussion_content":"å¤§æ–¹å‘å¯¹ï¼Œå¯ä»¥å†è€ƒè™‘ä¸€ä¸‹æˆ‘ä»¬å¦‚ä½•é€‰æ‹©","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587004236,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243107,"user_name":"VIC","can_delete":false,"product_type":"c1","uid":1114064,"ip_address":"","ucode":"3B3E6D344488B2","user_header":"https://static001.geekbang.org/account/avatar/00/10/ff/d0/402be1e9.jpg","comment_is_top":false,"comment_ctime":1597969241,"is_pvip":false,"replies":[{"id":"89641","content":"SimpleDateFormatç”¨ThreadLocalåŒ…ä¸€ä¸‹ï¼Œæœç´¢ä¸€ä¸‹è§£å†³SimpleDateFormatçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œç½‘ä¸Šæ–‡ç« ä¸€å¤§å †","user_name":"ä½œè€…å›å¤","comment_id":243107,"uid":"1001470","ip_address":"","utype":1,"ctime":1597988244,"user_name_real":"æœ±æ™”"}],"discussion_count":1,"race_medal":0,"score":"5892936537","product_id":100047701,"comment_content":"threadlocal simpledateformatï¼Œæœ‰å®Œæ•´ä¾‹å­å—","like_count":1,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504182,"discussion_content":"SimpleDateFormatç”¨ThreadLocalåŒ…ä¸€ä¸‹ï¼Œæœç´¢ä¸€ä¸‹è§£å†³SimpleDateFormatçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œç½‘ä¸Šæ–‡ç« ä¸€å¤§å †","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597988244,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":236358,"user_name":"ç¨‹åºå‘˜å°è·ƒ","can_delete":false,"product_type":"c1","uid":1015483,"ip_address":"","ucode":"25BB96E0791A60","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7e/bb/947c329a.jpg","comment_is_top":false,"comment_ctime":1595398865,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5890366161","product_id":100047701,"comment_content":"å­¦ä¹ è¿™ä¸ªä¸“æ çš„å‰å‡ ç¯‡çš„æ—¶å€™ï¼Œå°±å‘ç°éœ€è¦æœ‰å¾ˆå¼ºçš„Java 8åŠŸåº•ï¼Œä½œä¸ºä¸€åJavaerï¼Œæˆ‘ä¹°äº†æœ¬ã€ŠJava å®æˆ˜ã€‹æ¥æ›´å¥½çš„å­¦ä¹ Java 8çš„æ–°ç‰¹æ€§ï¼Œä¹Ÿèƒ½è·Ÿä¸Šè¯¾ç¨‹çš„èŠ‚å¥ã€‚","like_count":1},{"had_liked":false,"id":228092,"user_name":"senekis","can_delete":false,"product_type":"c1","uid":1446025,"ip_address":"","ucode":"CD88681F0278FD","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erTlRJ6skf7iawAeqNfIT1PPgjD7swUdRIRkX1iczjj97GNrxnsnn3QuOhkVbCLgFYAm7sMZficNTSbA/132","comment_is_top":false,"comment_ctime":1592552842,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5887520138","product_id":100047701,"comment_content":"1. æ—¶åŒºé—®é¢˜çš„åŸå› <br><br>Dateå’ŒInstantéƒ½å¯ä»¥æ ¹æ®æ—¶é—´æˆ³æ¥åˆ›å»ºï¼Œå…¶ä¸­å¹¶ä¸åŒ…å«æ—¶åŒºä¿¡æ¯ï¼Œå› æ­¤å¹¶ä¸ä¼šå‡ºç°æ‰€è°“çš„æ—¶é—´é”™è¯¯ã€‚<br>å› æ­¤åœ¨ä¿å­˜æ•°æ®æ—¶ï¼Œéƒ½å¯ä»¥é€šè¿‡Longå‹æ¥ä¿å­˜æ—¶é—´æˆ³ä¿¡æ¯ã€‚<br>å½“éœ€è¦å®ç°æ—¥æœŸæ ¼å¼åŒ–æ—¶ï¼Œé€šè¿‡å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºå¯¹åº”çš„æ—¶åŒºçš„æ—¶é—´è¿›è¡Œæ˜¾ç¤ºã€‚<br><br><br>2. æµ‹è¯•Demo<br><br>public class DateTest {<br><br>    @Test<br>    public void timeStampTest() {<br><br>        Date date = new Date();<br>        Instant instant = date.toInstant();<br>        assertEquals(date.getTime(), instant.toEpochMilli());<br><br>        ZoneId shZoneId = ZoneId.of(&quot;Asia&#47;Shanghai&quot;);<br>        ZoneId cgZoneId = ZoneId.of(&quot;America&#47;Chicago&quot;);<br>        LocalDateTime shLocalDateTime =  LocalDateTime.ofInstant(instant, shZoneId);<br>        LocalDateTime cgLocalDateTime = LocalDateTime.ofInstant(instant, cgZoneId);<br>        assertEquals(shLocalDateTime.getSecond(), cgLocalDateTime.getSecond());<br>        assertEquals(Math.abs(shLocalDateTime.getHour() - cgLocalDateTime.getHour()), 13);<br><br>        ZonedDateTime shZonedDateTime = ZonedDateTime.of(shLocalDateTime, shZoneId);<br>        ZonedDateTime cgZonedDateTime = ZonedDateTime.of(cgLocalDateTime, cgZoneId);<br>        assertEquals(shLocalDateTime.getSecond(), cgZonedDateTime.getSecond());<br><br>        DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;);<br>        String shDateTimeStr = dateTimeFormatter.format(shZonedDateTime);<br>        String cgDateTimeStr = dateTimeFormatter.format(cgZonedDateTime);<br>        assertFalse(shDateTimeStr.equals(cgDateTimeStr));<br><br>    }<br><br>}","like_count":1},{"had_liked":false,"id":208159,"user_name":"Michael","can_delete":false,"product_type":"c1","uid":1274787,"ip_address":"","ucode":"C233DF1D224EC1","user_header":"https://static001.geekbang.org/account/avatar/00/13/73/a3/2b077607.jpg","comment_is_top":false,"comment_ctime":1587286442,"is_pvip":true,"replies":[{"id":"77693","content":"ä¸å¤ªæ˜ç™½å•¥æ„æ€ï¼Œä»£ç ä¸­æ²¡æœ‰è´´å‡ºè·å–æœ¬å‘¨æ—¥æˆªæ­¢æ—¶é—´çš„æ–¹æ³•ï¼Œè·å–åˆ°ä¸‹å‘¨ä¸€-1så³å¯","user_name":"ä½œè€…å›å¤","comment_id":208159,"uid":"1001470","ip_address":"","utype":1,"ctime":1587291208,"user_name_real":"æœ±æ™”"}],"discussion_count":3,"race_medal":0,"score":"5882253738","product_id":100047701,"comment_content":"private static final DateTimeFormatter df = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;);<br><br>**<br>     * è·å–æœ¬å‘¨ä¸€å¼€å§‹æ—¶é—´<br>     * @return<br>     *&#47;<br>    public static String getFirstTimeByWeek() {<br>        LocalDateTime currentTime = LocalDateTime.now();<br>        LocalDateTime weekStartTime = currentTime.with(TemporalAdjusters.previous(DayOfWeek.SUNDAY)).plusDays(1).truncatedTo(ChronoUnit.DAYS);<br>        &#47;&#47;æ±‚å‡ºè¿™ä¸ªæ—¥æœŸæ‰€åœ¨å‘¨çš„æ˜ŸæœŸä¸€<br>        return weekStartTime.format(df);<br>    }<br><br><br>    &#47;**<br>     * è·å–æœ¬å‘¨ä¸€æˆªæ­¢æ—¶é—´<br>     * @return<br>     *&#47;<br>    public static String getLastTimeByWeek() {<br>        LocalDateTime currentTime = LocalDateTime.now();<br>        LocalDateTime weekEndTime = currentTime.with(TemporalAdjusters.next(DayOfWeek.MONDAY)).minusDays(1);<br>        &#47;&#47;æ±‚å‡ºè¿™ä¸ªæ—¥æœŸæ‰€åœ¨å‘¨çš„æ˜ŸæœŸä¸€<br>        return weekEndTime.format(df);<br>    }<br><br><br>    &#47;**<br>     * è·å–å½“æœˆç¬¬ä¸€å¤©å…¶å®æ—¶é—´<br>     * @return<br>     *&#47;<br>    public static String getFirstTimeByMonth() {<br>        LocalDateTime currentTime = LocalDateTime.now();<br>        LocalDateTime monthStartDate = currentTime.withDayOfMonth(1).truncatedTo(ChronoUnit.DAYS);<br>        return monthStartDate.format(df);<br>    }<br><br>    &#47;**<br>     * è·å–å½“æœˆæœ€åä¸€å¤©æˆªæ­¢æ—¶é—´<br>     * @return<br>     *&#47;<br>    public static String getLastTimeByMonth() {<br>        LocalDateTime currentTime = LocalDateTime.now();<br>        LocalDateTime monthEndDate = currentTime.plusMonths(1L).withDayOfMonth(1).truncatedTo(ChronoUnit.DAYS).plus(-1L, ChronoUnit.MILLIS);<br>        return monthEndDate.format(df);<br>    }<br><br>è·å–æœ¬å‘¨æ—¥æˆªæ­¢æ—¶é—´çš„æ—¶å€™æ€»æ˜¯è·å–ä¸åˆ°æ—¶åˆ†ç§’çš„é‚£éƒ¨åˆ†:23:59:59","like_count":1,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492361,"discussion_content":"ä¸å¤ªæ˜ç™½å•¥æ„æ€ï¼Œä»£ç ä¸­æ²¡æœ‰è´´å‡ºè·å–æœ¬å‘¨æ—¥æˆªæ­¢æ—¶é—´çš„æ–¹æ³•ï¼Œè·å–åˆ°ä¸‹å‘¨ä¸€-1så³å¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587291208,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1274787,"avatar":"https://static001.geekbang.org/account/avatar/00/13/73/a3/2b077607.jpg","nickname":"Michael","note":"","ucode":"C233DF1D224EC1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":239338,"discussion_content":"/**\n     * è·å–æœ¬å‘¨æ—¥æˆªæ­¢æ—¶é—´\n     * @return\n     */\n    public static String getLastTimeByWeek() {\n        LocalDateTime currentTime = LocalDateTime.now();\n        LocalDateTime weekEndTime = currentTime.with(TemporalAdjusters.next(DayOfWeek.MONDAY)).minusDays(1).truncatedTo(ChronoUnit.DAYS);\n        //æ±‚å‡ºè¿™ä¸ªæ—¥æœŸæ‰€åœ¨å‘¨çš„æ˜ŸæœŸä¸€\n        return weekEndTime.format(df);\n    }\n\næ— æ³•å¾—åˆ°2020-04-19 23:59:59ï¼Œåªèƒ½å¾—åˆ°2020-04-19 00:00:00","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587294725,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1261959,"avatar":"https://static001.geekbang.org/account/avatar/00/13/41/87/46d7e1c2.jpg","nickname":"Better me","note":"","ucode":"CADF08D357489A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1274787,"avatar":"https://static001.geekbang.org/account/avatar/00/13/73/a3/2b077607.jpg","nickname":"Michael","note":"","ucode":"C233DF1D224EC1","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":267820,"discussion_content":"å‡äº†ä¸€å¤©","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589695408,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":239338,"ip_address":""},"score":267820,"extra":""}]}]},{"had_liked":false,"id":207898,"user_name":"Wiggle Wiggle","can_delete":false,"product_type":"c1","uid":1036052,"ip_address":"","ucode":"EFE746551BA998","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cf/14/384258ba.jpg","comment_is_top":false,"comment_ctime":1587210794,"is_pvip":false,"replies":[{"id":"77588","content":"å¤„ç†æ•°æ®çš„æ—¶å€™è¦é¢å¯¹å„ç§ä¸å¸¦æ—¶åŒºçš„stringæˆ–datetimeã€‚ã€‚ã€‚è¿™æ˜¾ç„¶æ˜¯ä¼šæœ‰é—®é¢˜çš„","user_name":"ä½œè€…å›å¤","comment_id":207898,"uid":"1001470","ip_address":"","utype":1,"ctime":1587215369,"user_name_real":"æœ±æ™”"}],"discussion_count":1,"race_medal":0,"score":"5882178090","product_id":100047701,"comment_content":"æˆ‘åœ¨å¤–ä¼ï¼Œå…¬å¸å¤§éƒ¨åˆ†æ•°æ®ç”¨çš„æ´›æ‰çŸ¶æ—¶é—´ï¼ˆå¸¦äº†å¤ä»¤æ—¶ï¼‰ï¼Œå¤„ç†æ•°æ®çš„æ—¶å€™è¦é¢å¯¹å„ç§ä¸å¸¦æ—¶åŒºçš„stringæˆ–datetimeï¼Œæ— æ¯”é…¸çˆ½","like_count":1,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492274,"discussion_content":"å¤„ç†æ•°æ®çš„æ—¶å€™è¦é¢å¯¹å„ç§ä¸å¸¦æ—¶åŒºçš„stringæˆ–datetimeã€‚ã€‚ã€‚è¿™æ˜¾ç„¶æ˜¯ä¼šæœ‰é—®é¢˜çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587215369,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360089,"user_name":"å¥”è·‘","can_delete":false,"product_type":"c1","uid":1361556,"ip_address":"åŒ—äº¬","ucode":"A64A0DCA50D9FA","user_header":"https://static001.geekbang.org/account/avatar/00/14/c6/94/48ca3281.jpg","comment_is_top":false,"comment_ctime":1666170133,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1666170133","product_id":100047701,"comment_content":"æ˜ å°„æ•°æ®åº“æ—¶ï¼ŒDateç”¨ä»€ä¹ˆæ›¿æ¢å‘¢ï¼ŒLocalDateTimeè¿˜æ˜¯Instantï¼Ÿ<br>JDK8çš„LocalDateå’Œjoda.timeçš„LocalDateå“ªä¸ªæ›´é€‚åˆç”¨åœ¨é¡¹ç›®é‡Œï¼Ÿ","like_count":0},{"had_liked":false,"id":332698,"user_name":"è½¦é¸¿éŸ¡","can_delete":false,"product_type":"c1","uid":2843289,"ip_address":"","ucode":"7A5B69B3F0A830","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJBru6Qa44qibaOnbEQprP1SOhBq0YWHCsjBAvNKmSu7DxKNSmtbiaZ1nQGf56m2gMDicsjiasnzI5VAw/132","comment_is_top":false,"comment_ctime":1643501676,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1643501676","product_id":100047701,"comment_content":"MySQLæ—¶é—´æˆ³æœ‰èŒƒå›´é™åˆ¶ï¼Œé‚£ä¹ˆdateæ—¶é—´æˆ³æœ‰èŒƒå›´é™åˆ¶å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":301459,"user_name":"walleæ–Œ","can_delete":false,"product_type":"c1","uid":1062848,"ip_address":"","ucode":"0DB3243004951F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","comment_is_top":false,"comment_ctime":1625706700,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625706700","product_id":100047701,"comment_content":"æˆ‘é€‰æ‹©ç”¨joda-time çš„ DateTime è€Œä¸”ç»å¤§éƒ¨åˆ†æ–°è€é¡¹ç›®éƒ½æ˜¯è¿™ä¸ªã€‚ã€‚è¿è´¯æ€§å¾ˆå¥½ã€‚ã€‚ä¸­é—´è®¡ç®—ç»å¯¹æ—¶é—´ä¹Ÿæ˜¯æ–¹ä¾¿çš„å¾ˆã€‚ã€‚ ","like_count":0},{"had_liked":false,"id":278171,"user_name":"å¼ æ»”","can_delete":false,"product_type":"c1","uid":1322636,"ip_address":"","ucode":"87ABAFF0E861E0","user_header":"https://static001.geekbang.org/account/avatar/00/14/2e/8c/b261e15a.jpg","comment_is_top":false,"comment_ctime":1612784667,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612784667","product_id":100047701,"comment_content":"è€å¸ˆï¼Œjavaé‡Œé¢æœ‰æ¥å—å­—ç¬¦ä¸²å‚æ•°ï¼Œç„¶åè¿”å›æ—¥æœŸå¯¹è±¡çš„APIå—ï¼Ÿç±»ä¼¼äºjava.util.Dateé‡Œé¢çš„æ„é€ å‡½æ•°public Date(String s) ï¼Œä½†è¿™ä¸ªæ„é€ å‡½æ•°æ˜¯Deprecatedã€‚","like_count":0},{"had_liked":false,"id":263748,"user_name":"Demon.Lee","can_delete":false,"product_type":"c1","uid":1052859,"ip_address":"","ucode":"7F0E5493A8E345","user_header":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","comment_is_top":false,"comment_ctime":1606261843,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1606261843","product_id":100047701,"comment_content":"æˆ‘ç”¨springboot2.2.xåœ¨POJOä¸­åˆ†åˆ«ä½¿ç”¨LocalDateTime, Instant, ZonedDateTimeä¸­æ’å…¥å­—æ®µåˆ°mongodbä¸­ï¼Œå…¶ä¸­ZonedDateTimeä¸èƒ½ç›´æ¥æ’å…¥ï¼Œéœ€è¦é¢å¤–å¢åŠ Convertè¿›è¡Œè½¬æ¢ã€‚é’ˆå¯¹å›½é™…ä¸šåŠ¡ï¼Œç”¨Instantå¯èƒ½ä¼šæ›´æ–¹ä¾¿äº›ï¼Œç„¶åä½¿ç”¨å¸¦ZoneIdçš„DateTimeFormatterè¿›è¡Œæ ¼å¼åŒ–ã€‚å¦‚æœåªæ˜¯å›½å†…ä¸šåŠ¡ï¼Œæˆ‘è§‰å¾—ä½¿ç”¨LocalDateTimeå°±å¤Ÿç”¨äº†ã€‚è¯·è€å¸ˆåŠå°ä¼™ä¼´ä»¬æŒ‡æ­£ã€‚","like_count":0},{"had_liked":false,"id":227305,"user_name":"ææ¾","can_delete":false,"product_type":"c1","uid":2039388,"ip_address":"","ucode":"28572BCFD696E5","user_header":"","comment_is_top":false,"comment_ctime":1592355617,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592355617","product_id":100047701,"comment_content":"æˆ‘å¼€å‘ä¸­ä¸€èˆ¬ä½¿ç”¨ä¼˜ç§€çš„å¼€æºå·¥å…·åŒ…ï¼ŒApache commons  , joda","like_count":0},{"had_liked":false,"id":212823,"user_name":"grandcool","can_delete":false,"product_type":"c1","uid":1000037,"ip_address":"","ucode":"7545E76CE3FEFC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/42/65/f444ea39.jpg","comment_is_top":false,"comment_ctime":1588216566,"is_pvip":false,"replies":[{"id":"79051","content":"å› ä¸ºä¸åŒæ—¶åŒºçš„äººéƒ½å¯ä»¥æœ‰è‡ªå·±çš„æœ¬åœ°&#47;å½“åœ°æ—¶é—´ï¼Œå¯¹åº”UTCæ˜¯ä¸€ä¸ª","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1588229100,"ip_address":"","comment_id":212823,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1588216566","product_id":100047701,"comment_content":"è€å¸ˆï¼Œä¸ºå•¥â€œä¸åŒçš„æœ¬åœ°æ—¶é—´å¯èƒ½å¯¹åº”åŒä¸€ä¸ª UTCâ€å•Šï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493621,"discussion_content":"å› ä¸ºä¸åŒæ—¶åŒºçš„äººéƒ½å¯ä»¥æœ‰è‡ªå·±çš„æœ¬åœ°/å½“åœ°æ—¶é—´ï¼Œå¯¹åº”UTCæ˜¯ä¸€ä¸ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588229100,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207869,"user_name":"wang","can_delete":false,"product_type":"c1","uid":1161200,"ip_address":"","ucode":"5D569805C6A923","user_header":"https://static001.geekbang.org/account/avatar/00/11/b7/f0/a570f68a.jpg","comment_is_top":false,"comment_ctime":1587201049,"is_pvip":false,"replies":[{"id":"77589","content":"å®ƒå°±æ˜¯ä¸€ä¸ªæ—¶é—´è¡¨ç¤ºï¼Œæ²¡æœ‰ä¿å­˜æ—¶åŒºï¼Œç†è§£ä¸ºå­˜äº†å½“å‰æ—¶åŒºçš„ZonedDateTimeä¸å¤ªå‡†ç¡®<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1587215961,"ip_address":"","comment_id":207869,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1587201049","product_id":100047701,"comment_content":"æ„Ÿè§‰LocalDateTimeåƒæ˜¯å­˜äº†å½“å‰æ—¶åŒºçš„zoneddatetimeï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492265,"discussion_content":"å®ƒå°±æ˜¯ä¸€ä¸ªæ—¶é—´è¡¨ç¤ºï¼Œæ²¡æœ‰ä¿å­˜æ—¶åŒºï¼Œç†è§£ä¸ºå­˜äº†å½“å‰æ—¶åŒºçš„ZonedDateTimeä¸å¤ªå‡†ç¡®\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587215961,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207207,"user_name":"åˆ˜å¤§æ˜","can_delete":false,"product_type":"c1","uid":1035081,"ip_address":"","ucode":"83C063FBD9BF2B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cb/49/0b9ffc8e.jpg","comment_is_top":false,"comment_ctime":1587024158,"is_pvip":false,"replies":[{"id":"77402","content":"æ˜¯","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1587030083,"ip_address":"","comment_id":207207,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1587024158","product_id":100047701,"comment_content":"æ€è€ƒé¢˜1.æ˜¯toString æ–¹æ³•é‡Œé¢if (zi != null) {<br>            sb.append(zi.getDisplayName(date.isDaylightTime(), TimeZone.SHORT, Locale.US)); &#47;&#47; zzz<br>        } else {<br>            sb.append(&quot;GMT&quot;);<br>        }<br>åŠ äº†è¿™ä¸ªè¾“å‡ºç»“æœ<br><br>","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492039,"discussion_content":"æ˜¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587030083,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207203,"user_name":"Jerry Wu","can_delete":false,"product_type":"c1","uid":1203567,"ip_address":"","ucode":"AD29B6942AAAA6","user_header":"https://static001.geekbang.org/account/avatar/00/12/5d/6f/42494dcf.jpg","comment_is_top":false,"comment_ctime":1587023396,"is_pvip":false,"replies":[{"id":"77404","content":"æ²¡å…³ç³»æ²¡è¸©å‘æ˜¯å¥½äº‹æƒ…ï¼Œå…ˆäº†è§£ä¸€ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1587031261,"ip_address":"","comment_id":207203,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1587023396","product_id":100047701,"comment_content":"åœ¨æ—¥æœŸä¸Šï¼Œæˆ‘æ²¡è¸©è¿‡å‘ã€‚<br><br>é¦–å…ˆï¼Œæˆ‘åšçš„éƒ½æ˜¯å›½å†…é¡¹ç›®ï¼Œä¸ä¼šå‡ºç°æ—¶åŒºçš„é—®é¢˜ï¼›<br>å…¶æ¬¡ï¼Œå¯¹æ—¶é—´çš„åº”ç”¨çœŸä¸å¤šï¼Œå°±æ˜¯æ—¶é—´çš„ä¿å­˜ã€æ ¼å¼åŒ–ã€æ¯”è¾ƒï¼›<br><br>çœ‹æ¥æˆ‘è¿˜æ˜¯å¤ªç‹­éš˜äº†ï¼Œæœ€è¿‘ä¸‰èŠ‚è¯¾è¯´åˆ°çš„å‘éƒ½æ²¡è§è¿‡ã€‚å‘¨æœ«å¾—å¤šè·‘å‡ éè€å¸ˆçš„ä»£ç ï¼ŒåŠ æ·±æ„Ÿå—æ‰è¡Œã€‚","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492038,"discussion_content":"æ²¡å…³ç³»æ²¡è¸©å‘æ˜¯å¥½äº‹æƒ…ï¼Œå…ˆäº†è§£ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587031261,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}