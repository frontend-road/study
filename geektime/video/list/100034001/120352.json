{"id":120352,"title":"11 | 如何在Swift中使用Optional","content":"<p><strong>课件地址</strong></p><p><a href=\"https://gitee.com/geektime-geekbang/swift-course\">https://gitee.com/geektime-geekbang/swift-course</a></p>","comments":[{"had_liked":false,"id":157241,"user_name":"奋斗的小朱","can_delete":false,"product_type":"c3","uid":1628186,"ip_address":"","ucode":"EB98E73E7DC6C9","user_header":"https://static001.geekbang.org/account/avatar/00/18/d8/1a/cf7cf45d.jpg","comment_is_top":false,"comment_ctime":1575095566,"is_pvip":false,"replies":[{"id":60593,"content":"看一下后面模式匹配那节课，是一种pattern match","user_name":"作者回复","user_name_real":"Geek_f72435","uid":1341726,"ctime":1575343714,"ip_address":"","comment_id":157241,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"绑定解绑的时候，if后面let actualStr = str，这个返回值是BOOL类型吗？不太看得懂","like_count":0,"discussions":[{"author":{"id":1341726,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLxtKhpmvzx2VB4iajicfJVFmQR3eP3xBpdpQEovpSqUfAOrNImvYwVb7P37ibI0ONziau9sbFEk8oDaA/132","nickname":"elfgate","note":"","ucode":"3C0B5F7C1F664C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476372,"discussion_content":"看一下后面模式匹配那节课，是一种pattern match","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575343714,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127993,"user_name":"松间明月","can_delete":false,"product_type":"c3","uid":1457259,"ip_address":"","ucode":"C86ACBE74FEC1A","user_header":"https://static001.geekbang.org/account/avatar/00/16/3c/6b/27f7577d.jpg","comment_is_top":false,"comment_ctime":1566818178,"is_pvip":false,"replies":[{"id":47566,"content":"在后面运算符部分","user_name":"作者回复","user_name_real":"Geek_f72435","uid":1341726,"ctime":1566877385,"ip_address":"","comment_id":127993,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"那使用 ?? 的方式解包怎么没讲啊","like_count":0,"discussions":[{"author":{"id":1341726,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLxtKhpmvzx2VB4iajicfJVFmQR3eP3xBpdpQEovpSqUfAOrNImvYwVb7P37ibI0ONziau9sbFEk8oDaA/132","nickname":"elfgate","note":"","ucode":"3C0B5F7C1F664C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464742,"discussion_content":"在后面运算符部分","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566877385,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127375,"user_name":"拉德姆","can_delete":false,"product_type":"c3","uid":1043757,"ip_address":"","ucode":"A813EDA3984385","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erdmsQ1lvSIk6GR6CcicQjKwXicxEJIELxfhX7J1kky08myb1UrscfFLg6nDHTwUFRAeosTKDX7WxpA/132","comment_is_top":false,"comment_ctime":1566669209,"is_pvip":false,"replies":[{"id":47327,"content":"是","user_name":"作者回复","user_name_real":"Geek_f72435","uid":1341726,"ctime":1566790826,"ip_address":"","comment_id":127375,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"加叹号还是optional么？","like_count":0,"discussions":[{"author":{"id":1341726,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLxtKhpmvzx2VB4iajicfJVFmQR3eP3xBpdpQEovpSqUfAOrNImvYwVb7P37ibI0ONziau9sbFEk8oDaA/132","nickname":"elfgate","note":"","ucode":"3C0B5F7C1F664C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464462,"discussion_content":"是","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566790826,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127155,"user_name":"Life is fantastic","can_delete":false,"product_type":"c3","uid":1627686,"ip_address":"","ucode":"CB53002C82F1AA","user_header":"https://static001.geekbang.org/account/avatar/00/18/d6/26/8c06d424.jpg","comment_is_top":false,"comment_ctime":1566570598,"is_pvip":false,"replies":[{"id":58072,"content":"好习惯","user_name":"作者回复","user_name_real":"Geek_f72435","uid":1341726,"ctime":1573637557,"ip_address":"","comment_id":127155,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"建议养成习惯使用模式匹配或者函数链去做运算，不要用强制解绑，非要用的话要自定义运算符函数断言测试打印。","like_count":0,"discussions":[{"author":{"id":1341726,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLxtKhpmvzx2VB4iajicfJVFmQR3eP3xBpdpQEovpSqUfAOrNImvYwVb7P37ibI0ONziau9sbFEk8oDaA/132","nickname":"elfgate","note":"","ucode":"3C0B5F7C1F664C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464346,"discussion_content":"好习惯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573637557,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":291698,"user_name":"Geek__2099","can_delete":false,"product_type":"c3","uid":1457784,"ip_address":"","ucode":"01444B60F18A66","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep8unibCib9rdHib0D6Rf6TjecPQu1yic0G9sjzriczlTcwGHP6DaxtEmHyN7pCrD9zV7OSegyf7EUBvaA/132","comment_is_top":false,"comment_ctime":1620439062,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"Optional,是”不存在“或“空”概念的加强版本。对比来看，nil是“不存在”的基础版本。\n\n在编程语言中，&quot;类型&quot;是对所有已知存在的定义，是抽象。\n\n所有类型的值，是具象。具象，是抽象的具体表现，是实际的存在。\n\n可见，nil必然不能与false等同，因为不在一个层级上。false已经是一种具象，它是类型的值，而不是类型的定义。\n\n在人类语言的处理中，“不存在”是指与已知的所有类型均不兼容。\n\n当nil是人类语言中的&quot;不存在&quot;时，nil必然与任何已知不兼容。表现在编程语言的实现中，即判断nil与任何&quot;类型&quot;不相等，这就是oc中nil是无类型指针的内涵。\n\n然而，OC中任何对象均可用nil表示，动摇了这个约定。原因很简单，对象有定义和规范，它也是一种类型，也是一种已知的存在。\n\n那为什么要引入nil?\n\n那是因为，在程序语言中，nil的功能不是表达与”类型“同层的“不存在”，而是与&quot;类型的值&quot;同层的&quot;不存在&quot;，即表示某个&quot;类型&quot;的值，不在其“值空间”中的状态。\n\n如数据表中某个字段还没有设值时的状态，或其它语言中设定某变量还未赋值时的状态。\n\n在程序语言的完备性原则下，没有不能表达的类型。\n\nnil，是人类思维和程序思维的一个交叉混淆点。\n\n在oc中，nil是一个表示“类型的值”是“不存在”的独立概念。它通过多个规定，将其与类型进行了隐晦与含糊的联系。\n\n在swift中，去掉了这种模糊性。\n\n在swift中引入optional type的目的，就是将&quot;不存在&quot;这个概念绑定到具体的类型上。在apple的optional实现机制中，optional.nil指向的是值的“不存在”，同时表示：如有值只能是optional.some&lt;T&gt;中的T类型。\n\n至此，optional type，在语义上，清晰一致的将所有类型的值空间进行了nil的扩展。\n\n至于在编译器中的友好提示，减少出错等等，都是衍生品。","like_count":1},{"had_liked":false,"id":361524,"user_name":"猪小擎","can_delete":false,"product_type":"c3","uid":1370959,"ip_address":"北京","ucode":"D9552746AE3327","user_header":"https://static001.geekbang.org/account/avatar/00/14/eb/4f/6a97b1cd.jpg","comment_is_top":false,"comment_ctime":1667573759,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"隐世展开和非可选项有啥区别？ let a ：String = “啊”， let a：String！ = “啊”，这么感觉没任何区别呢？","like_count":0},{"had_liked":false,"id":319427,"user_name":"斗斗","can_delete":false,"product_type":"c3","uid":2207985,"ip_address":"","ucode":"1178E2D17EFD19","user_header":"https://static001.geekbang.org/account/avatar/00/21/b0/f1/6d225d82.jpg","comment_is_top":false,"comment_ctime":1635814203,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"nsnull\n","like_count":0},{"had_liked":false,"id":180134,"user_name":"o0oi1i","can_delete":false,"product_type":"c3","uid":1132312,"ip_address":"","ucode":"D1F6AD4AAEAFBE","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/18/293cd24d.jpg","comment_is_top":false,"comment_ctime":1582195706,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"打卡11","like_count":0},{"had_liked":false,"id":126042,"user_name":"CrazyCodes","can_delete":false,"product_type":"c3","uid":1081205,"ip_address":"","ucode":"C9C0E72522EB5B","user_header":"https://static001.geekbang.org/account/avatar/00/10/7f/75/551c5d6c.jpg","comment_is_top":false,"comment_ctime":1566300272,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"optional 的用处在哪里。我没有学过OC,php程序员一脸懵逼 😂","like_count":0,"discussions":[{"author":{"id":1834962,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/ff/d2/67090203.jpg","nickname":"畅畅","note":"","ucode":"6BCDEF603F2C14","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581020,"discussion_content":"就类似kotlin的可空类型，用于尽可能在编写代码的时候避免空异常","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658460290,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1043757,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erdmsQ1lvSIk6GR6CcicQjKwXicxEJIELxfhX7J1kky08myb1UrscfFLg6nDHTwUFRAeosTKDX7WxpA/132","nickname":"拉德姆","note":"","ucode":"A813EDA3984385","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6100,"discussion_content":"你知道NullPointerException多么麻烦，就知道optional的好了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566669801,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}