{"id":97459,"title":"01 | åˆæ¢OpenRestyçš„ä¸‰å¤§ç‰¹æ€§","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æ¸©é“­ã€‚</p><p>å¼€ç¯‡è¯é‡Œæˆ‘ä»¬è¯´è¿‡ï¼ŒOpenRestyçš„ä¼˜åŠ¿æ˜¾è€Œæ˜“è§ã€‚ä¸è¿‡ï¼Œåœ¨å…·ä½“å­¦ä¹ ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆç®€å•å›é¡¾ä¸‹ OpenResty çš„å‘å±•è¿‡ç¨‹ï¼Œè¿™æœ‰åŠ©äºä½ å¯¹åé¢å†…å®¹æœ‰æ›´å¥½çš„ç†è§£ã€‚</p><h2>OpenRestyçš„å‘å±•</h2><p>OpenResty å¹¶ä¸åƒå…¶ä»–çš„å¼€å‘è¯­è¨€ä¸€æ ·ä»é›¶å¼€å§‹æ­å»ºï¼Œè€Œæ˜¯åŸºäºæˆç†Ÿçš„å¼€æºç»„ä»¶â€”â€”NGINX å’Œ LuaJITã€‚OpenResty è¯ç”Ÿäº 2007 å¹´ï¼Œä¸è¿‡ï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¹¶æ²¡æœ‰é€‰æ‹© Luaï¼Œè€Œæ˜¯ç”¨äº† Perlï¼Œè¿™è·Ÿä½œè€…ç« äº¦æ˜¥çš„æŠ€æœ¯åå¥½æœ‰å¾ˆå¤§å…³ç³»ã€‚</p><p>ä½† Perl çš„æ€§èƒ½è¿œè¿œä¸èƒ½è¾¾åˆ°è¦æ±‚ï¼Œäºæ˜¯ï¼Œåœ¨ç¬¬äºŒä¸ªç‰ˆæœ¬ä¸­ï¼ŒPerl å°±è¢« Lua ç»™æ›¿æ¢äº†ã€‚ ä¸è¿‡ï¼Œ<strong>åœ¨ OpenResty å®˜æ–¹çš„é¡¹ç›®ä¸­ï¼ŒPerl ä¾ç„¶å æ®ç€é‡è¦çš„è§’è‰²ï¼ŒOpenResty å·¥ç¨‹åŒ–æ–¹é¢éƒ½æ˜¯ç”¨ Perl æ¥æ„å»ºï¼Œæ¯”å¦‚æµ‹è¯•æ¡†æ¶ã€Linterã€CLI ç­‰</strong>ï¼Œåé¢æˆ‘ä»¬ä¹Ÿä¼šé€æ­¥ä»‹ç»ã€‚</p><p>åæ¥ï¼Œç« äº¦æ˜¥ç¦»å¼€äº†æ·˜å®ï¼ŒåŠ å…¥äº†ç¾å›½çš„ CDN å…¬å¸ Cloudflareã€‚å› ä¸º OpenResty é«˜æ€§èƒ½å’ŒåŠ¨æ€çš„ä¼˜åŠ¿å¾ˆé€‚åˆ CDN çš„ä¸šåŠ¡éœ€æ±‚ï¼Œå¾ˆå¿«ï¼Œ OpenResty å°±æˆä¸º CDN çš„æŠ€æœ¯æ ‡å‡†ã€‚ é€šè¿‡ä¸°å¯Œçš„ lua-resty åº“ï¼ŒOpenResty å¼€å§‹é€æ¸æ‘†è„± NGINX çš„å½±å­ï¼Œå½¢æˆè‡ªå·±çš„ç”Ÿæ€ä½“ç³»ï¼Œåœ¨ API ç½‘å…³ã€è½¯WAF ç­‰é¢†åŸŸè¢«å¹¿æ³›ä½¿ç”¨ã€‚</p><!-- [[[read_end]]] --><p>å…¶å®ï¼Œæˆ‘ç»å¸¸è¯´ï¼ŒOpenResty æ˜¯ä¸€ä¸ªè¢«å¹¿æ³›ä½¿ç”¨çš„æŠ€æœ¯ï¼Œä½†å®ƒå¹¶ä¸èƒ½ç®—å¾—ä¸Šæ˜¯çƒ­é—¨æŠ€æœ¯ï¼Œè¿™å¬ä¸Šå»æœ‰ç‚¹çŸ›ç›¾ï¼Œåˆ°åº•ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ</p><p>è¯´å®ƒåº”ç”¨å¹¿ï¼Œæ˜¯å› ä¸º OpenResty ç°åœ¨æ˜¯å…¨çƒæ’åç¬¬äº”çš„ Web æœåŠ¡å™¨ã€‚æˆ‘ä»¬ç»å¸¸ç”¨åˆ°çš„ 12306 çš„ä½™ç¥¨æŸ¥è¯¢åŠŸèƒ½ï¼Œæˆ–è€…æ˜¯äº¬ä¸œçš„å•†å“è¯¦æƒ…é¡µï¼Œè¿™äº›é«˜æµé‡çš„èƒŒåï¼Œå…¶å®éƒ½æ˜¯ OpenResty åœ¨é»˜é»˜åœ°æä¾›æœåŠ¡ã€‚</p><p>è¯´å®ƒå¹¶ä¸çƒ­é—¨ï¼Œé‚£æ˜¯å› ä¸ºä½¿ç”¨ OpenResty æ¥æ„å»ºä¸šåŠ¡ç³»ç»Ÿçš„æ¯”ä¾‹å¹¶ä¸é«˜ã€‚ä½¿ç”¨è€…å¤§éƒ½ç”¨OpenRestyæ¥å¤„ç†å…¥å£æµé‡ï¼Œå¹¶æ²¡æœ‰æ·±å…¥åˆ°ä¸šåŠ¡é‡Œé¢å»ï¼Œè‡ªç„¶ï¼Œå¯¹äº OpenResty çš„ä½¿ç”¨ä¹Ÿæ˜¯æµ…å°è¾„æ­¢ï¼Œæ»¡è¶³å½“å‰çš„éœ€æ±‚å°±å¯ä»¥äº†ã€‚è¿™å½“ç„¶ä¹Ÿä¸ OpenResty æ²¡æœ‰åƒ Javaã€Python é‚£æ ·æœ‰æˆç†Ÿçš„ Web æ¡†æ¶å’Œç”Ÿæ€æœ‰å…³ã€‚</p><p>è¯´äº†è¿™ä¹ˆå¤šï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘é‡ç‚¹æ¥ä»‹ç»ä¸‹ï¼ŒOpenResty è¿™ä¸ªå¼€æºé¡¹ç›®å€¼å¾—ç§°é“å’Œå­¦ä¹ çš„å‡ ä¸ªåœ°æ–¹ã€‚</p><h2>OpenRestyçš„ä¸‰å¤§ç‰¹æ€§</h2><h3>è¯¦å°½çš„æ–‡æ¡£å’Œæµ‹è¯•ç”¨ä¾‹</h3><p>æ²¡é”™ï¼Œæ–‡æ¡£å’Œæµ‹è¯•æ˜¯åˆ¤æ–­å¼€æºé¡¹ç›®æ˜¯å¦é è°±çš„å…³é”®æŒ‡æ ‡ï¼Œç”šè‡³æ˜¯æ’åœ¨ä»£ç è´¨é‡å’Œæ€§èƒ½ä¹‹å‰çš„ã€‚</p><p>OpenResty çš„æ–‡æ¡£éå¸¸è¯¦ç»†ï¼Œä½œè€…æŠŠæ¯ä¸€ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹éƒ½å†™åœ¨äº†æ–‡æ¡£ä¸­ã€‚ç»å¤§éƒ¨åˆ†æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦ä»”ç»†æŸ¥çœ‹æ–‡æ¡£ï¼Œå°±èƒ½è§£å†³é‡åˆ°çš„é—®é¢˜ï¼Œè€Œä¸ç”¨è°·æ­Œæœç´¢æˆ–è€…æ˜¯è·Ÿè¸ªåˆ°æºç ä¸­ã€‚ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼ŒOpenResty è¿˜è‡ªå¸¦äº†ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·<code>restydoc</code>ï¼Œä¸“é—¨ç”¨æ¥å¸®åŠ©ä½ é€šè¿‡ shell æŸ¥çœ‹æ–‡æ¡£ï¼Œé¿å…ç¼–ç è¿‡ç¨‹è¢«æ‰“æ–­ã€‚</p><p>ä¸è¿‡ï¼Œæ–‡æ¡£ä¸­åªä¼šæœ‰ä¸€ä¸¤ä¸ªé€šç”¨çš„ä»£ç ç‰‡æ®µï¼Œå¹¶æ²¡æœ‰å®Œæ•´å’Œå¤æ‚çš„ç¤ºä¾‹ï¼Œåˆ°å“ªé‡Œå¯ä»¥æ‰¾åˆ°è¿™æ ·çš„ä¾‹å­å‘¢ï¼Ÿ</p><p>å¯¹äº OpenResty æ¥è¯´ï¼Œè‡ªç„¶æ˜¯<code>/t</code>ç›®å½•ï¼Œå®ƒé‡Œé¢å°±æ˜¯æ‰€æœ‰çš„æµ‹è¯•æ¡ˆä¾‹ã€‚æ¯ä¸€ä¸ªæµ‹è¯•æ¡ˆä¾‹éƒ½åŒ…å«å®Œæ•´çš„ NGINX é…ç½®å’Œ Lua ä»£ç ï¼Œä»¥åŠæµ‹è¯•çš„è¾“å…¥æ•°æ®å’Œé¢„æœŸçš„è¾“å‡ºæ•°æ®ã€‚ä¸è¿‡ï¼ŒOpenResty ä½¿ç”¨çš„æµ‹è¯•æ¡†æ¶ï¼Œä¸å…¶ä»–æ–­è¨€é£æ ¼çš„æµ‹è¯•æ¡†æ¶å®Œå…¨ä¸åŒï¼Œåé¢æˆ‘ä¼šç”¨ä¸“é—¨ç« èŠ‚æ¥åšä»‹ç»ã€‚</p><h3>åŒæ­¥éé˜»å¡</h3><p>åç¨‹ï¼Œæ˜¯å¾ˆå¤šè„šæœ¬è¯­è¨€ä¸ºäº†æå‡æ€§èƒ½ï¼Œåœ¨è¿‘å‡ å¹´æ–°å¢çš„ç‰¹æ€§ã€‚ä½†å®ƒä»¬å®ç°å¾—å¹¶ä¸å®Œç¾ï¼Œæœ‰äº›æ˜¯è¯­æ³•ç³–ï¼Œæœ‰äº›è¿˜éœ€è¦æ˜¾å¼çš„å…³é”®å­—å£°æ˜ã€‚</p><p>OpenResty åˆ™æ²¡æœ‰å†å²åŒ…è¢±ï¼Œåœ¨è¯ç”Ÿä¹‹åˆå°±æ”¯æŒäº†åç¨‹ï¼Œå¹¶åŸºäºæ­¤å®ç°äº†<strong>åŒæ­¥éé˜»å¡</strong>çš„ç¼–ç¨‹æ¨¡å¼ã€‚è¿™ä¸€ç‚¹æ˜¯å¾ˆé‡è¦çš„ï¼Œæ¯•ç«Ÿï¼Œç¨‹åºå‘˜ä¹Ÿæ˜¯äººï¼Œä»£ç åº”è¯¥æ›´ç¬¦åˆäººçš„æ€ç»´ä¹ æƒ¯ã€‚æ˜¾å¼çš„å›è°ƒå’Œå¼‚æ­¥å…³é”®å­—ä¼šæ‰“æ–­æ€è·¯ï¼Œä¹Ÿç»™è°ƒè¯•å¸¦æ¥äº†å›°éš¾ã€‚</p><p>è¿™é‡Œæˆ‘è§£é‡Šä¸€ä¸‹ï¼Œä»€ä¹ˆæ˜¯åŒæ­¥éé˜»å¡ã€‚å…ˆè¯´åŒæ­¥ï¼Œè¿™ä¸ªå¾ˆç®€å•ï¼Œå°±æ˜¯æŒ‰ç…§ä»£ç æ¥é¡ºåºæ‰§è¡Œã€‚æ¯”å¦‚ä¸‹é¢è¿™æ®µä¼ªç ï¼š</p><pre><code>local res, err  = query-mysql(sql)\nlocal value, err = query-redis(key)\n</code></pre><p>åœ¨åŒä¸€è¯·æ±‚è¿æ¥ä¸­ï¼Œå¦‚æœè¦ç­‰ MySQL çš„æŸ¥è¯¢ç»“æœè¿”å›åï¼Œæ‰èƒ½ç»§ç»­å»æŸ¥è¯¢ Redisï¼Œé‚£å°±æ˜¯åŒæ­¥ï¼›å¦‚æœä¸ç”¨ç­‰ MySQL çš„è¿”å›ï¼Œå°±èƒ½ç»§ç»­å¾€ä¸‹èµ°ï¼Œå»æŸ¥è¯¢ Redisï¼Œé‚£å°±æ˜¯å¼‚æ­¥ã€‚å¯¹äº OpenResty æ¥è¯´ï¼Œç»å¤§éƒ¨åˆ†éƒ½æ˜¯åŒæ­¥æ“ä½œï¼Œåªæœ‰ <code>ngx.timer</code> è¿™ç§åå°å®šæ—¶å™¨ç›¸å…³çš„ APIï¼Œæ‰æ˜¯å¼‚æ­¥æ“ä½œã€‚</p><p>å†æ¥è¯´è¯´éé˜»å¡ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå®¹æ˜“å’Œâ€œå¼‚æ­¥â€æ··æ·†çš„æ¦‚å¿µã€‚è¿™é‡Œæˆ‘ä»¬è¯´çš„â€œé˜»å¡â€ï¼Œç‰¹æŒ‡é˜»å¡æ“ä½œç³»ç»Ÿçº¿ç¨‹ã€‚æˆ‘ä»¬ç»§ç»­çœ‹ä¸Šé¢çš„ä¾‹å­ï¼Œå‡è®¾æŸ¥è¯¢ MySQL éœ€è¦1s çš„æ—¶é—´ï¼Œå¦‚æœåœ¨è¿™1s å†…ï¼Œæ“ä½œç³»ç»Ÿçš„èµ„æºï¼ˆCPUï¼‰æ˜¯ç©ºé—²ç€å¹¶å‚»å‚»åœ°ç­‰å¾…è¿”å›ï¼Œé‚£å°±æ˜¯é˜»å¡ï¼›å¦‚æœ CPU è¶æœºå»å¤„ç†å…¶ä»–è¿æ¥çš„è¯·æ±‚ï¼Œé‚£å°±æ˜¯éé˜»å¡ã€‚éé˜»å¡ä¹Ÿæ˜¯ C10Kã€C100K è¿™äº›é«˜å¹¶å‘èƒ½å¤Ÿå®ç°çš„å…³é”®ã€‚</p><p>åŒæ­¥éé˜»å¡è¿™ä¸ªæ¦‚å¿µå¾ˆé‡è¦ï¼Œå»ºè®®ä½ ä»”ç»†ç¢ç£¨ä¸€ä¸‹ã€‚æˆ‘è®¤ä¸ºï¼Œè¿™ä¸€æ¦‚å¿µæœ€å¥½ä¸è¦é€šè¿‡ç±»æ¯”æ¥ç†è§£ï¼Œå› ä¸ºä¸æ°å½“çš„ç±»æ¯”ï¼Œå¾ˆå¯èƒ½æŠŠä½ æå¾—æ›´ç³Šæ¶‚ã€‚</p><p>åœ¨ OpenResty ä¸­ï¼Œä¸Šé¢çš„ä¼ªç å°±å¯ä»¥ç›´æ¥å®ç°åŒæ­¥éé˜»å¡ï¼Œè€Œä¸ç”¨ä»»ä½•æ˜¾å¼çš„å…³é”®å­—ã€‚è¿™é‡Œä¹Ÿå†æ¬¡ä½“ç°äº†ï¼Œè®©å¼€å‘è€…ç”¨èµ·æ¥æ›´ç®€å•ï¼Œæ˜¯ OpenResty çš„ç†å¿µä¹‹ä¸€ã€‚</p><h3>åŠ¨æ€</h3><p>OpenResty æœ‰ä¸€ä¸ªéå¸¸å¤§çš„ä¼˜åŠ¿ï¼Œå¹¶ä¸”è¿˜æ²¡æœ‰è¢«å……åˆ†æŒ–æ˜ï¼Œå°±æ˜¯å®ƒçš„<strong>åŠ¨æ€</strong>ã€‚</p><p>ä¼ ç»Ÿçš„ Web æœåŠ¡å™¨ï¼Œæ¯”å¦‚ NGINXï¼Œå¦‚æœå‘ç”Ÿä»»ä½•çš„å˜åŠ¨ï¼Œéƒ½éœ€è¦ä½ å»ä¿®æ”¹ç£ç›˜ä¸Šçš„é…ç½®æ–‡ä»¶ï¼Œç„¶åé‡æ–°åŠ è½½æ‰èƒ½ç”Ÿæ•ˆï¼Œè¿™ä¹Ÿæ˜¯å› ä¸ºå®ƒä»¬å¹¶æ²¡æœ‰æä¾› APIï¼Œæ¥æ§åˆ¶è¿è¡Œæ—¶çš„è¡Œä¸ºã€‚æ‰€ä»¥ï¼Œåœ¨éœ€è¦é¢‘ç¹å˜åŠ¨çš„å¾®æœåŠ¡é¢†åŸŸï¼ŒNGINX è™½ç„¶æœ‰å¤šæ¬¡å°è¯•ï¼Œä½†æ¯«æ— å»ºæ ‘ã€‚è€Œå¼‚å†›çªèµ·çš„ Envoyï¼Œ æ­£æ˜¯å‡­ç€ xDS è¿™ç§åŠ¨æ€æ§åˆ¶çš„ APIï¼Œå¤§æœ‰å¯¹ NGINX é€ æˆé™ç»´æ”»å‡»çš„å¨èƒã€‚</p><p>å’Œ NGINX ã€ Envoy ä¸åŒçš„æ˜¯ï¼ŒOpenResty æ˜¯ç”±è„šæœ¬è¯­è¨€ Lua æ¥æ§åˆ¶é€»è¾‘çš„ï¼Œè€ŒåŠ¨æ€ï¼Œä¾¿æ˜¯ Lua å¤©ç”Ÿçš„ä¼˜åŠ¿ã€‚é€šè¿‡ OpenResty ä¸­ lua-nginx-module æ¨¡å—ä¸­æä¾›çš„ Lua APIï¼Œæˆ‘ä»¬å¯ä»¥åŠ¨æ€åœ°æ§åˆ¶è·¯ç”±ã€ä¸Šæ¸¸ã€SSL è¯ä¹¦ã€è¯·æ±‚ã€å“åº”ç­‰ã€‚ç”šè‡³æ›´è¿›ä¸€æ­¥ï¼Œä½ å¯ä»¥åœ¨ä¸é‡å¯ OpenResty çš„å‰æä¸‹ï¼Œä¿®æ”¹ä¸šåŠ¡çš„å¤„ç†é€»è¾‘ï¼Œå¹¶ä¸å±€é™äº OpenResty æä¾›çš„ Lua APIã€‚</p><p>è¿™é‡Œæœ‰ä¸€ä¸ªå¾ˆåˆé€‚çš„ç±»æ¯”ï¼Œå¯ä»¥å¸®ä½ ç†è§£ä¸Šé¢å…³äºåŠ¨æ€çš„è¯´æ˜ã€‚ä½ å¯ä»¥æŠŠ Web æœåŠ¡å™¨å½“åšæ˜¯ä¸€ä¸ªæ­£åœ¨é«˜é€Ÿå…¬è·¯ä¸Šé£é©°çš„æ±½è½¦ï¼ŒNGINX éœ€è¦åœè½¦æ‰èƒ½æ›´æ¢è½®èƒï¼Œæ›´æ¢è½¦æ¼†é¢œè‰²ï¼›Envoy å¯ä»¥ä¸€è¾¹è·‘ä¸€è¾¹æ¢è½®èƒå’Œé¢œè‰²ï¼›è€Œ OpenResty é™¤äº†å…·å¤‡å‰è€…èƒ½åŠ›å¤–ï¼Œè¿˜å¯ä»¥åœ¨ä¸åœè½¦çš„æƒ…å†µä¸‹ï¼Œç›´æ¥æŠŠæ±½è½¦ä» SUV å˜æˆè·‘è½¦ã€‚</p><p>æ˜¾ç„¶ï¼ŒæŒæ¡è¿™ç§â€œé€†å¤©â€çš„èƒ½åŠ›åï¼ŒOpenResty çš„èƒ½åŠ›åœˆå’Œæƒ³è±¡åŠ›å°±æ‰©å±•åˆ°äº†å…¶ä»–é¢†åŸŸï¼Œæ¯”å¦‚  Serverless å’Œè¾¹ç¼˜è®¡ç®—ç­‰ã€‚</p><h2>ä½ å­¦ä¹ çš„é‡ç‚¹åœ¨å“ªé‡Œï¼Ÿ</h2><p>è®²äº†è¿™ä¹ˆå¤šOpenRestyçš„é‡ç‚¹ç‰¹æ€§ï¼Œä½ åˆè¯¥æ€ä¹ˆå­¦å‘¢ï¼Ÿæˆ‘è®¤ä¸ºï¼Œå­¦ä¹ éœ€è¦æŠ“é‡ç‚¹ï¼Œå›´ç»•ä¸»çº¿æ¥å±•å¼€ï¼Œè€Œä¸æ˜¯çœ‰æ¯›èƒ¡å­ä¸€æŠŠæŠ“ï¼Œè¿™æ ·ï¼Œä½ æ‰èƒ½æ„å»ºå‡ºè„‰ç»œæ¸…æ™°çš„çŸ¥è¯†ä½“ç³»ã€‚</p><p>è¦çŸ¥é“ï¼Œä¸ç®¡å¤šä¹ˆå…¨é¢çš„è¯¾ç¨‹ï¼Œéƒ½ä¸å¯èƒ½è¦†ç›–æ‰€æœ‰é—®é¢˜ï¼Œæ›´ä¸èƒ½ç›´æ¥å¸®ä½ è§£å†³çº¿ä¸Šçš„æ¯ä¸ª bug å’Œå¼‚å¸¸ã€‚</p><p>å›åˆ°OpenRestyçš„å­¦ä¹ ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œæƒ³è¦å­¦å¥½ OpenRestyï¼Œä½ å¿…é¡»ç†è§£ä¸‹é¢8ä¸ªé‡ç‚¹ï¼š</p><ul>\n<li>\n<p>åŒæ­¥éé˜»å¡çš„ç¼–ç¨‹æ¨¡å¼ï¼›</p>\n</li>\n<li>\n<p>ä¸åŒé˜¶æ®µçš„ä½œç”¨ï¼›</p>\n</li>\n<li>\n<p>LuaJIT å’Œ Lua çš„ä¸åŒä¹‹å¤„ï¼›</p>\n</li>\n<li>\n<p>OpenResty API å’Œå‘¨è¾¹åº“ï¼›</p>\n</li>\n<li>\n<p>åç¨‹å’Œ cosocketï¼›</p>\n</li>\n<li>\n<p>å•å…ƒæµ‹è¯•æ¡†æ¶å’Œæ€§èƒ½æµ‹è¯•å·¥å…·ï¼›</p>\n</li>\n<li>\n<p>ç«ç„°å›¾å’Œå‘¨è¾¹å·¥å…·é“¾ï¼›</p>\n</li>\n<li>\n<p>æ€§èƒ½ä¼˜åŒ–ã€‚</p>\n</li>\n</ul><p>è¿™äº›å†…å®¹æ­£æ˜¯æˆ‘ä»¬å­¦ä¹ çš„é‡ç‚¹ï¼Œåœ¨ä¸“æ çš„å„ä¸ªæ¨¡å—ä¸­æˆ‘éƒ½ä¼šåˆ†åˆ«è®²åˆ°ã€‚åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å¸Œæœ›ä½ èƒ½ä¸¾ä¸€åä¸‰ï¼Œå¹¶ä¸”æ ¹æ®è‡ªå·±çš„å…´è¶£ç‚¹å’ŒèƒŒæ™¯ï¼Œæœ‰é’ˆå¯¹æ€§åœ°æ·±å…¥é˜…è¯»æŸäº›ç« èŠ‚ã€‚</p><p>å¦‚æœä½ æ˜¯ OpenResty çš„åˆå­¦è€…ï¼Œé‚£ä¹ˆä½ å¯ä»¥å®Œå…¨è·Ÿç€ä¸“æ çš„è¿›åº¦ï¼Œåœ¨è‡ªå·±çš„ç¯å¢ƒä¸­å®‰è£… OpenRestyï¼Œè¿è¡Œå¹¶ä¿®æ”¹ç¤ºä¾‹ä»£ç ã€‚è¦è®°ä½ï¼Œä½ çš„é‡ç‚¹åœ¨äºæ„å»º OpenResty çš„å…¨è²Œï¼Œè€Œéæ­»ç£•æŸä¸ªçŸ¥è¯†ç‚¹ã€‚å½“ç„¶ï¼Œå¦‚æœä½ æœ‰ç–‘é—®çš„åœ°æ–¹ï¼Œéšæ—¶å¯ä»¥åœ¨ç•™è¨€åŒºæå‡ºï¼Œæˆ‘ä¼šè§£ç­”ä½ çš„å›°æƒ‘ã€‚</p><p>å¦‚æœä½ æ­£åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ OpenRestyï¼Œé‚£å°±å¤ªæ£’äº†ï¼Œç›¸ä¿¡ä½ åœ¨é˜…è¯» LuaJIT å’Œæ€§èƒ½ä¼˜åŒ–ç« èŠ‚æ—¶ï¼Œä¸€å®šä¼šæœ‰æ›´å¤šçš„å…±é¸£ï¼Œæ›´èƒ½åº”ç”¨åˆ°å®é™…ï¼Œåœ¨ä½ çš„é¡¹ç›®ä¸­çœ‹åˆ°ä¼˜åŒ–å‰åçš„æ€§èƒ½æŒ‡æ ‡å˜åŒ–ã€‚</p><p>å¦å¤–ï¼Œå¦‚æœä½ æƒ³è¦ç»™ OpenResty ä»¥åŠå‘¨è¾¹åº“è´¡çŒ®ä»£ç ï¼Œé‚£ä¹ˆæœ€å¤§çš„é—¨æ§›ï¼Œå¹¶ä¸æ˜¯å¯¹ OpenResty åŸç†çš„ç†è§£ï¼Œæˆ–è€…æ˜¯å¦‚ä½•ç¼–å†™ NGINX C æ¨¡å—çš„é—®é¢˜ï¼Œè€Œæ˜¯æµ‹è¯•æ¡ˆä¾‹å’Œä»£ç è§„èŒƒã€‚æˆ‘è§è¿‡å¤ªå¤š OpenResty çš„ä»£ç è´¡çŒ®è€…ï¼ˆä¹ŸåŒ…æ‹¬æˆ‘è‡ªå·±ï¼‰ï¼Œåœ¨ä¸€ä¸ª PR ä¸Šåå¤ä¿®æ”¹æµ‹è¯•æ¡ˆä¾‹å’Œä»£ç é£æ ¼ï¼Œè¿™å…¶ä¸­æœ‰å¤ªå¤šé²œä¸ºäººçŸ¥çš„æ½œè§„åˆ™ã€‚æ‰€ä»¥ï¼Œä¸“æ çš„ä»£ç è§„èŒƒå’Œå•å…ƒæµ‹è¯•éƒ¨åˆ†ï¼Œå°±æ˜¯ä¸ºä½ å‡†å¤‡çš„ã€‚</p><p>è€Œå¦‚æœä½ æ˜¯æµ‹è¯•å·¥ç¨‹å¸ˆï¼Œå³ä½¿ä½ ä¸ä½¿ç”¨ OpenRestyï¼ŒOpenResty çš„æµ‹è¯•æ¡†æ¶å’Œæ€§èƒ½åˆ†æå·¥å…·é›†ï¼Œä¹Ÿå¿…èƒ½ç»™ä½ éå¸¸å¤šçš„å¯å‘ã€‚æ¯•ç«Ÿï¼ŒOpenResty åœ¨æµ‹è¯•ä¸Šé¢çš„æŠ•å…¥å’Œç§¯ç´¯æ˜¯ç›¸å½“æ·±åšçš„ã€‚</p><h2>å†™åœ¨æœ€å</h2><p>æ¬¢è¿ä½ ç•™è¨€å’Œæˆ‘åˆ†äº«ä½ çš„ OpenResty å­¦ä¹ ä¹‹è·¯ï¼Œåœ¨è¿™æœŸé—´ï¼Œä½ åˆèµ°è¿‡å“ªäº›å¼¯è·¯å‘¢ï¼Ÿä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« è½¬å‘ç»™ä½ çš„åŒäº‹ã€æœ‹å‹ã€‚</p><p>è¿˜æ˜¯é‚£å¥è¯ï¼Œåœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­ï¼Œä½ æœ‰ä»»ä½•ç–‘é—®ï¼Œéƒ½å¯ä»¥åœ¨ä¸“æ ä¸­ç•™è¨€ï¼Œæˆ‘ä¼šç¬¬ä¸€æ—¶é—´ç»™ä½ ç­”å¤ã€‚</p><p></p>","neighbors":{"left":{"article_title":"å¼€ç¯‡è¯ | OpenRestyï¼Œä¸ºä½ æ‰“å¼€é«˜æ€§èƒ½å¼€å‘çš„å¤§é—¨","id":96516},"right":{"article_title":"02 | å¦‚ä½•å†™å‡ºä½ çš„â€œhello worldâ€ï¼Ÿ","id":97475}},"comments":[{"had_liked":false,"id":98148,"user_name":"è¡Œè€…","can_delete":false,"product_type":"c1","uid":1063734,"ip_address":"","ucode":"EA31201A7C5AE1","user_header":"https://static001.geekbang.org/account/avatar/00/10/3b/36/2d61e080.jpg","comment_is_top":false,"comment_ctime":1558920912,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"164767678160","product_id":100028301,"comment_content":"åŒæ­¥å¼‚æ­¥è¯´çš„æ˜¯ä»£ç ï¼Œè°ƒç”¨å°±æœ‰è¿”å›æ˜¯åŒæ­¥ï¼Œåä¹‹æ˜¯å¼‚æ­¥ã€‚<br>é˜»å¡éé˜»å¡è¯´çš„æ˜¯cpuï¼Œapuè¦ç­‰å¾…å°±æ˜¯é˜»å¡ï¼Œåä¹‹éé˜»å¡ã€‚<br><br>éé˜»å¡å¹¶ä¸èƒ½ç¼©å‡rtæ—¶é—´ï¼Œå…¶æœ€å¤§çš„ä¼˜ç‚¹æ˜¯å¯ä»¥æœåŠ¡æ›´å¤šçš„è¯·æ±‚ï¼Œè¾¾åˆ°c100kã€‚<br><br>é’ˆå¯¹ffåŒå­¦çš„é—®é¢˜ï¼Œé˜»å¡éé˜»å¡å¯¹äºä»£ç æ¥è¯´æ˜¯ï¼Œä»…ä»…æ˜¯åº•å±‚å®ç°ä¸åŒã€‚","like_count":39},{"had_liked":false,"id":98150,"user_name":"zhang","can_delete":false,"product_type":"c1","uid":1517047,"ip_address":"","ucode":"650C292030057B","user_header":"https://static001.geekbang.org/account/avatar/00/17/25/f7/4cc60573.jpg","comment_is_top":false,"comment_ctime":1558921213,"is_pvip":false,"replies":[{"id":"35113","content":"ğŸ‘ ä¸€èµ·å­¦ä¹ ","user_name":"ä½œè€…å›å¤","comment_id":98150,"uid":"1017955","ip_address":"","utype":1,"ctime":1558922888,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":1,"race_medal":0,"score":"61688463357","product_id":100028301,"comment_content":"åˆ†äº«ä¸€ç¯‡ä»¥å‰å­¦openresty æ—¶å†™çš„ç¬”è®°ï¼Œå½“æ—¶å¤„äºä¸€ä¸ªé˜…è¯»è¿‡nginxæºç ï¼Œä½†æ˜¯æ²¡æœ‰å®é™…ä½¿ç”¨æˆ–è€…å¼€å‘nginxçš„æƒ…å†µï¼Œå¦å¤–ä¸ªäººçš„æè¿°æè¿°èƒ½åŠ›ä¹Ÿæ¯”è¾ƒå·®ï¼Œå¾ˆå¤šçŸ¥è¯†å‚¨å¤‡ä¸è¶³ã€‚<br><br>å½“æ—¶å†™è¿™ç¯‡ç¬”è®°å¹¶ä¸æ˜¯å¯¹æºç è¿›è¡Œè§£è¯»ï¼Œåªæ˜¯ç«™åœ¨ä¸€ä¸ªæœ‰ä»€ä¹ˆåŠŸèƒ½ï¼Œæˆ‘åº”è¯¥å¦‚ä½•å®ç°å®ƒï¼Œå®ƒæ˜¯å¦‚ä½•åšçš„ï¼Œè¿™æ ·ä¸€ä¸ªè§’åº¦å»åˆ†æçš„ã€‚<br><br>å¸Œæœ›è¿™ç¯‡ç¬”è®°å¯ä»¥è®©å¤§å®¶æœ‰ä¸€å®šæ”¶è·ï¼Œä¹Ÿå¸Œæœ›æˆ‘ä»¬å¯ä»¥äº’ç›¸æ‰¶æŒï¼Œä¸€èµ·åšæŒä¸‹å»ï¼Œå­¦å¥½è¿™é—¨è¯¾ç¨‹ã€‚<br><br><br>http:&#47;&#47;note.youdao.com&#47;noteshare?id=965c9f034a82ffb0f8b4de6ca81f3e73","like_count":15,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451579,"discussion_content":"ğŸ‘ ä¸€èµ·å­¦ä¹ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558922888,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98095,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1558915369,"is_pvip":true,"replies":[{"id":"35111","content":"https:&#47;&#47;github.com&#47;openresty&#47;openresty æ˜¯ç”¨äºæ‰“æºç åŒ…çš„é¡¹ç›®ï¼Œæ‰€ä»¥æµ‹è¯•æ¡ˆä¾‹ä¸å¤šã€‚<br>æ˜¯çš„ï¼Œéœ€è¦çœ‹è¿™ä¸ªå­é¡¹ç›®çš„ä»“åº“ã€‚","user_name":"ä½œè€…å›å¤","comment_id":98095,"uid":"1017955","ip_address":"","utype":1,"ctime":1558922765,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":1,"race_medal":0,"score":"27328719145","product_id":100028301,"comment_content":"çœ‹äº†ä¸‹ openresty github ä»“åº“ https:&#47;&#47;github.com&#47;openresty&#47;openresty å‘ç° tæ–‡ä»¶å¤¹ä¸‹æ²¡æœ‰ä»€ä¹ˆæµ‹è¯•æ–‡ä»¶ï¼Œè¿™ä¸ªæ˜¯éœ€è¦çœ‹æ¯ä¸ªç›¸å…³çš„æ¨¡å—çš„ä»“åº“å—ï¼Ÿ åˆçœ‹äº† https:&#47;&#47;github.com&#47;openresty&#47;lua-nginx-module è¿™ä¸ªæ¨¡å—å‘ç° tæ–‡ä»¶å¤¹ä¸‹æ˜¯æœ‰æµ‹è¯•æ–‡ä»¶çš„","like_count":7,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451552,"discussion_content":"https://github.com/openresty/openresty æ˜¯ç”¨äºæ‰“æºç åŒ…çš„é¡¹ç›®ï¼Œæ‰€ä»¥æµ‹è¯•æ¡ˆä¾‹ä¸å¤šã€‚\næ˜¯çš„ï¼Œéœ€è¦çœ‹è¿™ä¸ªå­é¡¹ç›®çš„ä»“åº“ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558922765,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98113,"user_name":"FF","can_delete":false,"product_type":"c1","uid":1001615,"ip_address":"","ucode":"26349F32B406D7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/8f/7ecd4eed.jpg","comment_is_top":false,"comment_ctime":1558917320,"is_pvip":false,"replies":[{"id":"35115","content":"ç†è§£ 1 æ˜¯å¯¹çš„ã€‚ç«™åœ¨ç”¨æˆ·è¯·æ±‚çš„è§’åº¦ï¼Œéé˜»å¡å¹¶ä¸ä¼šå‡å°‘å¤„ç†çš„æ—¶é—´ï¼Œä½†æ˜¯ä¼šå‡å°‘ç­‰å¾…çš„æ—¶é—´ã€‚OpenResty çš„æ¯ä¸ª worker åŒä¸€æ—¶é—´åªåœ¨å¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼Œå¦‚æœé˜»å¡äº†ï¼Œè¿™ä¸ª worker ä¸Šçš„å…¶ä»–è¯·æ±‚éƒ½éœ€è¦ç­‰å¾…ã€‚<br>C10K è¦è§£å†³çš„æ˜¯é«˜å¹¶å‘çš„é—®é¢˜ï¼Œæ˜¯æœåŠ¡ç«¯çš„æ•´ä½“æ€§èƒ½ã€‚","user_name":"ä½œè€…å›å¤","comment_id":98113,"uid":"1017955","ip_address":"","utype":1,"ctime":1558923369,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":1,"race_medal":0,"score":"23033753800","product_id":100028301,"comment_content":"è¯·æ•™ä¸‹æ¸©è€å¸ˆï¼Œå…³äºé˜»å¡&#47;éé˜»å¡ã€‚<br><br>å¦‚æœ CPU è¶æœºå»å¤„ç†å…¶ä»–è¿æ¥çš„è¯·æ±‚ï¼Œé‚£å°±æ˜¯éé˜»å¡ã€‚<br><br>ä½†å¯¹äºç”¨æˆ·çº¿ç¨‹æ¥è®²ï¼Œæ€ä¹ˆç†è§£è¿™ä¸ªéé˜»å¡å‘¢ï¼Ÿ<br><br>ç†è§£1ï¼Œè¿™ä¸ªæŸ¥è¯¢çš„ç”¨æˆ·çº¿ç¨‹æ˜¯ä¸æ˜¯è¿˜å¾—é˜»å¡ç­‰å¾… 1 ç§’é’Ÿç­‰å¾…è¿”å›ï¼Ÿè¿™æ ·çš„è¯åº”ç”¨çš„æ€§èƒ½è¿˜æ˜¯ä¼šä¸ç†æƒ³ï¼Ÿ<br><br>ç†è§£2ï¼Œç”¨æˆ·çº¿ç¨‹ä¹Ÿæ˜¯éé˜»å¡ï¼Œæ“ä½œç³»ç»Ÿçº¿ç¨‹éé˜»å¡è¿”å›åï¼Œç”¨æˆ·çš„æ•°æ®ä¸ä¸€å®šæœ‰ï¼Œè¿™ä¸ªæ—¶å€™ç”¨æˆ·çº¿ç¨‹è¦è½®è¯¢å»è°ƒç”¨æŸ¥è¯¢ï¼Œç›´åˆ°æœ‰æ•°æ®ã€‚è¿™æ ·çš„è¯ï¼Œå¯¹äºåº”ç”¨æ¥è®²ï¼Œæ€§èƒ½ä¸æ˜¯ä¸€æ ·ä¸ç†æƒ³ï¼Ÿ<br><br>å“ªç§ç†è§£æ˜¯å¯¹çš„å‘¢ï¼Ÿä½†æ— è®ºå“ªç§ï¼Œç”¨æˆ·åº”ç”¨æ€§èƒ½å¯èƒ½éƒ½æä¸ä¸Šç†æƒ³ï¼Œè¿™æ ·çš„è¯ä¸ºä½•éé˜»å¡æ˜¯C10Kï¼ŒC100K å®ç°çš„å…³é”®å‘¢ï¼Ÿ<br><br>","like_count":5,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451561,"discussion_content":"ç†è§£ 1 æ˜¯å¯¹çš„ã€‚ç«™åœ¨ç”¨æˆ·è¯·æ±‚çš„è§’åº¦ï¼Œéé˜»å¡å¹¶ä¸ä¼šå‡å°‘å¤„ç†çš„æ—¶é—´ï¼Œä½†æ˜¯ä¼šå‡å°‘ç­‰å¾…çš„æ—¶é—´ã€‚OpenResty çš„æ¯ä¸ª worker åŒä¸€æ—¶é—´åªåœ¨å¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼Œå¦‚æœé˜»å¡äº†ï¼Œè¿™ä¸ª worker ä¸Šçš„å…¶ä»–è¯·æ±‚éƒ½éœ€è¦ç­‰å¾…ã€‚\nC10K è¦è§£å†³çš„æ˜¯é«˜å¹¶å‘çš„é—®é¢˜ï¼Œæ˜¯æœåŠ¡ç«¯çš„æ•´ä½“æ€§èƒ½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558923369,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98920,"user_name":"ä¸šä½™è‰","can_delete":false,"product_type":"c1","uid":1126538,"ip_address":"","ucode":"99BDC1E629049D","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/8a/b5ca7286.jpg","comment_is_top":false,"comment_ctime":1559116264,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18738985448","product_id":100028301,"comment_content":"æ€»ç»“ï¼šOpenResty çš„ä¸‰å¤§ç‰¹æ€§ã€‚<br>1ã€è¯¦å°½çš„æ–‡æ¡£å’Œæµ‹è¯•ç”¨ä¾‹ï¼ˆè¿™ä¸ªä¸èƒ½ç®—ç‰¹æ€§å§ï¼‰ã€‚<br>2ã€åŒæ­¥éé˜»å¡ã€‚<br>3ã€åŠ¨æ€ã€‚","like_count":4},{"had_liked":false,"id":100838,"user_name":"Lucianoæé‘«","can_delete":false,"product_type":"c1","uid":1329995,"ip_address":"","ucode":"5FBE5F86FD5B2C","user_header":"https://static001.geekbang.org/account/avatar/00/14/4b/4b/97926cba.jpg","comment_is_top":false,"comment_ctime":1559651266,"is_pvip":false,"replies":[{"id":"36551","content":"æ˜¯ GitHub ä¸­ Pull Request çš„ç¼©å†™","user_name":"ä½œè€…å›å¤","comment_id":100838,"uid":"1017955","ip_address":"","utype":1,"ctime":1559805326,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":1,"race_medal":0,"score":"14444553154","product_id":100028301,"comment_content":"præ˜¯å•¥æ„æ€<br>","like_count":3,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452701,"discussion_content":"æ˜¯ GitHub ä¸­ Pull Request çš„ç¼©å†™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559805326,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":100233,"user_name":"shonm","can_delete":false,"product_type":"c1","uid":1132459,"ip_address":"","ucode":"A4E2B4167D9F1E","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/ab/3311945c.jpg","comment_is_top":false,"comment_ctime":1559488631,"is_pvip":false,"replies":[{"id":"36153","content":"éé˜»å¡çš„è‡ªç„¶ä¸ä¼šç­‰å¾… 1 ç§’ï¼Œä½†è¿™ 1 ç§’é’Ÿçš„æ—¶é—´å†…ï¼ŒCPU æ˜¯å»å¤„ç†å…¶ä»–è¯·æ±‚çš„é€»è¾‘ï¼Œå¹¶ä¸”æŠŠå½“å‰è¯·æ±‚æŒ‚èµ·ã€‚<br>ç­‰æ•°æ®åº“è¿”å›äº†ç»“æœåï¼Œæ‰å”¤é†’ä¹‹å‰çš„è¯·æ±‚ï¼Œè¿™æ ·å°±åšåˆ°äº†åŒæ­¥ã€‚","user_name":"ä½œè€…å›å¤","comment_id":100233,"uid":"1017955","ip_address":"","utype":1,"ctime":1559552279,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":3,"race_medal":0,"score":"14444390519","product_id":100028301,"comment_content":"è€å¸ˆä½ å¥½ï¼Œä¸Šé¢çš„ä»£ç ä¸­ï¼Œå¦‚æœæ˜¯éé˜»å¡çš„ï¼Œä»–ä¸æ˜¯ç«‹é©¬è¿”å›å—ï¼Œæ€ä¹ˆåˆä¼šç­‰1ç§’ï¼Œæ€ä¹ˆåšåˆ°åŒæ­¥å‘¢ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452467,"discussion_content":"éé˜»å¡çš„è‡ªç„¶ä¸ä¼šç­‰å¾… 1 ç§’ï¼Œä½†è¿™ 1 ç§’é’Ÿçš„æ—¶é—´å†…ï¼ŒCPU æ˜¯å»å¤„ç†å…¶ä»–è¯·æ±‚çš„é€»è¾‘ï¼Œå¹¶ä¸”æŠŠå½“å‰è¯·æ±‚æŒ‚èµ·ã€‚\nç­‰æ•°æ®åº“è¿”å›äº†ç»“æœåï¼Œæ‰å”¤é†’ä¹‹å‰çš„è¯·æ±‚ï¼Œè¿™æ ·å°±åšåˆ°äº†åŒæ­¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559552279,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1053787,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLzvaL724GwtzZ5mcldUnlicicSlI8BXL9icRZbUOB10qjRMlmog7UTvwxSBHXagnPGGR1BYdjWcGGSg/132","nickname":"wwj","note":"","ucode":"B98AE5F5D85A87","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4569,"discussion_content":"é˜»å¡ä¸€èˆ¬è¯´çš„æ˜¯io è¿™ä¸ªæˆ‘è§‰çš„åº”è¯¥æ˜¯ç”¨æˆ·çº¿ç¨‹ å°±æ˜¯å¸¸è¯´çš„ç»¿è‰²çº¿ç¨‹ å¯¹äºi oæ¥è¯´ä»–å®é™…ä¸Šè¿˜æ˜¯é˜»å¡çš„ ä¸å­˜åœ¨éé˜»å¡  åº”è¯¥è¯´æ˜¯ç”¨æˆ·çº¿ç¨‹åŒæ­¥ è¿™ä¸ªæˆæœ¬æ¯”è¾ƒä½ æ“ä½œç³»ç»Ÿçš„åŒæ­¥ æˆæœ¬æ˜¯æ¯”è¾ƒé«˜çš„ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565569312,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1184651,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/5XxiaGg3QRVLcQNw3jfzlVtXE6MbFD4nEQkIibEuM2ekic23qN1aGOZP58NhBeibHd8XN4x626icFSlw0VI5tMiauNWA/132","nickname":"lulu","note":"","ucode":"E2F5B9C2D36A7D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1053787,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLzvaL724GwtzZ5mcldUnlicicSlI8BXL9icRZbUOB10qjRMlmog7UTvwxSBHXagnPGGR1BYdjWcGGSg/132","nickname":"wwj","note":"","ucode":"B98AE5F5D85A87","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":9903,"discussion_content":"ä½ ç†è§£é”™äº†ï¼Œæ˜¯IOç­‰å¤–éƒ¨ä¸­æ–­å› ä¸ºä½é€Ÿå¯¼è‡´é”å®šäº†CPUï¼Œå¯¼è‡´CPUç©ºç­‰å¾…IOçš„å®Œæˆï¼Œå…¶ä»–çº¿ç¨‹æ— æ³•ä½¿ç”¨CPUï¼Œè¿™ä¸ªæ‰æ˜¯é˜»å¡çš„æ„æ€ï¼Œä¹Ÿå°±æ˜¯é˜»å¡äº†å…¶ä»–çº¿ç¨‹ä½¿ç”¨CPUã€‚æ“ä½œç³»ç»Ÿé‡Œé¢æœ‰ç›¸å…³ä»‹ç»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568242448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4569,"ip_address":""},"score":9903,"extra":""}]}]},{"had_liked":false,"id":98082,"user_name":"é¦¬å‰å‰ğŸ’«","can_delete":false,"product_type":"c1","uid":1318103,"ip_address":"","ucode":"9FE5757917DE6B","user_header":"https://static001.geekbang.org/account/avatar/00/14/1c/d7/f6bcb019.jpg","comment_is_top":false,"comment_ctime":1558909077,"is_pvip":false,"replies":[{"id":"35117","content":"ä¸€èµ·å­¦ä¹ ","user_name":"ä½œè€…å›å¤","comment_id":98082,"uid":"1017955","ip_address":"","utype":1,"ctime":1558923386,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":1,"race_medal":0,"score":"14443810965","product_id":100028301,"comment_content":"æœŸå¾…å·²ä¹…ï¼Œç¬¬ä¸€æ¬¡å¬è¯´è¿™æŠ€æœ¯å°±æ˜¯åœ¨ç½‘æ˜“äº‘è¯¾å ‚è€å¸ˆè®²çš„è¯¾ï¼Œä¹°äº†ä¹¦å‡†å¤‡å­¦ä¹ è€å¸ˆå°±å¼€äº†æå®¢æ—¶é—´çš„ä¸“æ ï¼Œç»“åˆä¹¦é›†å’Œè€å¸ˆçš„ä¸“æ å¸Œæœ›èƒ½æœ‰æ‰€æ”¶è·ã€‚","like_count":3,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451548,"discussion_content":"ä¸€èµ·å­¦ä¹ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558923386,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":100499,"user_name":"é˜³ä»”","can_delete":false,"product_type":"c1","uid":1318915,"ip_address":"","ucode":"4907A3750CEAD6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo2SjCeylLv0P3Glle5277kA4b8cAuxr1NrC0njPKEqzSpB8IEicHB29GicFFwG1qiaxs4hxRiaBmoibVw/132","comment_is_top":false,"comment_ctime":1559567600,"is_pvip":false,"replies":[{"id":"36554","content":"æˆ‘è¯»â€œè·¯å•¦â€","user_name":"ä½œè€…å›å¤","comment_id":100499,"uid":"1017955","ip_address":"","utype":1,"ctime":1559805414,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":2,"race_medal":0,"score":"10149502192","product_id":100028301,"comment_content":"Luaåˆ°åº•æ€ä¹ˆè¯»ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452575,"discussion_content":"æˆ‘è¯»â€œè·¯å•¦â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559805414,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1325126,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/dglMUGgevn9w5w3AGtTDibGhqGjf7G3GHwlOGXQl25xD7g2EsEktgxh2v4dgriaI2yLG2j45IhZCbhVg1eDrugOQ/132","nickname":"1024","note":"","ucode":"9DFAF1F44D469F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":75000,"discussion_content":"è¯»â€œlu aâ€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575714231,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98427,"user_name":"LoveDr.kang","can_delete":false,"product_type":"c1","uid":1118806,"ip_address":"","ucode":"BED888A788922C","user_header":"https://static001.geekbang.org/account/avatar/00/11/12/56/4abadfc3.jpg","comment_is_top":false,"comment_ctime":1559003913,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"10148938505","product_id":100028301,"comment_content":"ä¸è¦é€šè¿‡ç±»æ¯”å»ç†è§£åŒæ­¥éé˜»å¡ï¼Œä»è¿™å¥è¯å°±æ„Ÿè§‰è€å¸ˆå¾ˆåŠ¡å®ï¼Œç½‘ä¸Šå¾ˆå¤šä¸¾ä¾‹å­çš„çœŸçš„ç‰¹åˆ«è¯¯å¯¼äººï¼Œå°¤å…¶ä¸€äº›æ²¡å®é™…ç»éªŒçš„æ–°æ‰‹ï¼Œè¿˜æ˜¯è¦ä»æ¦‚å¿µå…¥æ‰‹ï¼Œå¤šå¤šä½“ä¼šï¼Œæ‰èƒ½é¢†ä¼šç²¾é«“ã€‚","like_count":3},{"had_liked":false,"id":98528,"user_name":"è®¸å¤šå­","can_delete":false,"product_type":"c1","uid":1318326,"ip_address":"","ucode":"D2ABB4906D18ED","user_header":"","comment_is_top":false,"comment_ctime":1559018138,"is_pvip":false,"replies":[{"id":"35256","content":"å½“ç„¶å¯ä»¥ï¼ŒOpenResty æ˜¯åŸºäº NGINX çš„ã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒOpenResty çš„ç‰ˆæœ¬ä¸€èˆ¬ä¼šè½åäº NGINXã€‚","user_name":"ä½œè€…å›å¤","comment_id":98528,"uid":"1017955","ip_address":"","utype":1,"ctime":1559032713,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":1,"race_medal":0,"score":"5853985434","product_id":100028301,"comment_content":"\bè¯·é—®openrestyå¯ä¸å¯ä»¥å°±å½“ä½œnginxæ¥ä½¿ç”¨å‘¢ï¼Ÿä¸å†™luaçš„æƒ…å†µä¸‹ï¼Œç”¨æ¥æ­å»ºwebæœåŠ¡å™¨ï¼Œè¿™ä¸¤è€…æœ‰æ²¡æœ‰åŒºåˆ«å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451721,"discussion_content":"å½“ç„¶å¯ä»¥ï¼ŒOpenResty æ˜¯åŸºäº NGINX çš„ã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒOpenResty çš„ç‰ˆæœ¬ä¸€èˆ¬ä¼šè½åäº NGINXã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559032713,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98382,"user_name":"å°åˆš","can_delete":false,"product_type":"c1","uid":1062230,"ip_address":"","ucode":"494DA0730F9498","user_header":"https://static001.geekbang.org/account/avatar/00/10/35/56/59ae9888.jpg","comment_is_top":false,"comment_ctime":1558972799,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5853940095","product_id":100028301,"comment_content":"ä»£ç å®ç°æ˜¯åŒæ­¥ä¸å¼‚æ­¥ï¼Œé˜»å¡æ˜¯çº¿ç¨‹è°ƒç”¨è¿‡ç¨‹","like_count":1},{"had_liked":false,"id":339351,"user_name":"èˆŸ leo","can_delete":false,"product_type":"c1","uid":2165530,"ip_address":"","ucode":"DE2BA1E906F2FB","user_header":"https://static001.geekbang.org/account/avatar/00/21/0b/1a/b793ca36.jpg","comment_is_top":false,"comment_ctime":1648042046,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1648042046","product_id":100028301,"comment_content":"è€å¸ˆ æœ‰æ²¡æœ‰OpenRestyçš„å¾®ä¿¡äº¤æµç¾¤å‘€","like_count":0},{"had_liked":false,"id":306157,"user_name":"lzh","can_delete":false,"product_type":"c1","uid":1336951,"ip_address":"","ucode":"C3D83DF4230109","user_header":"https://static001.geekbang.org/account/avatar/00/14/66/77/194ba21d.jpg","comment_is_top":false,"comment_ctime":1628410645,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628410645","product_id":100028301,"comment_content":"é˜»å¡å’Œéé˜»å¡é‚£é‡Œï¼Œæˆ‘è§‰å¾—æ–‡ä¸­æœ‰ç‚¹æ²¡è®²æ¸…æ¥šã€‚ç»“åˆAPUEç¬¬14ç« å’Œè‡ªå·±çš„ç†è§£è¡¥å……ä¸€ä¸‹ï¼Œä»…ä¾›å‚è€ƒã€‚<br><br>é˜»å¡ï¼Œæ„å‘³ç€è¿™ä¸ªè¿›ç¨‹ä¼šè¢«æŒ‚èµ·ï¼›éé˜»å¡ï¼Œå¦‚æœIOèƒ½è¯»ï¼Œå°±è¿”å›æ•°æ®ï¼Œerr=nilï¼›ä¸èƒ½è¯»åˆ™è¿”å›err != nilã€‚<br><br>è¿™é‡Œè¯´mysqlæ“ä½œè¦1sï¼ˆè¿™ä¸ª1så†…ï¼Œå¯¹mysqlè¯·æ±‚éƒ½ä¼šè¿”å›err!=nilï¼‰ï¼Œç„¶åCPUè¶æœºå»å¤„ç†å…¶ä»–è¯·æ±‚ï¼Œopenrestyåœ¨è¿™é‡Œå¯èƒ½æ˜¯ç”¨äº†ç±»ä¼¼yeildä¹‹ç±»çš„æ–¹å¼ï¼ˆåç¨‹ï¼‰ï¼Œå½“mysqlè¿”å›erræ—¶ï¼Œyeildåˆ°å…¶ä»–å‡½æ•°ä¸­æ‰§è¡Œï¼Œè¿›ç¨‹ä¸€ç›´éƒ½åœ¨è·‘ï¼Œæ²¡æœ‰è¢«æŒ‚èµ·ã€‚<br><br>å¦‚æœå½“å‰è¿›ç¨‹å°±åªæœ‰æ“ä½œmysqlä¸€ä¸ªåç¨‹ï¼ˆç®€å•ç†è§£å°±æ˜¯è¿›ç¨‹åªæœ‰è¿™ä¸€ä¸ªä¸“é—¨query mysqlçš„å‡½æ•°è¦æ‰§è¡Œï¼‰ï¼Œé‚£è¿™1så°±ä¼šåå¤yeildå‡ºå»ç„¶ååˆè¿›å…¥è¿™ä¸ªqueryå‡½æ•°ï¼Œç›¸å½“äºä¸€ç›´åœ¨query mysqlï¼Œç„¶åmysqä¸€ç›´è¿”å›errã€‚è¿™æ ·å°±æ˜¯éé˜»å¡çš„ï¼Œåœ¨mysqlæ²¡æœ‰è¿”å›æ•°æ®å‰ï¼Œè¿›ç¨‹æ˜¯ä¸ä¼šquery redisçš„ï¼Œè¿™æ ·å°±æ˜¯åŒæ­¥çš„ã€‚<br><br>ä¹‹å‰ä¹çœ‹â€œcpuè¶æœºå¤„ç†å…¶ä»–è¯·æ±‚â€è¿™å¥è¯ï¼Œä¼šè®©æˆ‘ä»¥ä¸ºè¿›ç¨‹è¢«æŒ‚èµ·ï¼Œè¿™å°±æ„Ÿè§‰ä¸éé˜»å¡çŸ›ç›¾ï¼Œåƒè¿™ç§åç¨‹çš„æ–¹å¼ï¼Œå¦‚æœèƒ½æŒ‰yeildæ¥è¯´è¯´ï¼Œé‚£ç¬é—´å°±èƒ½ç†è§£äº†ã€‚<br>","like_count":0},{"had_liked":false,"id":303958,"user_name":"è´ºé’§å¨","can_delete":false,"product_type":"c1","uid":1218353,"ip_address":"","ucode":"3E1FC908C28E29","user_header":"https://static001.geekbang.org/account/avatar/00/12/97/31/76485177.jpg","comment_is_top":false,"comment_ctime":1627123993,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627123993","product_id":100028301,"comment_content":"è€å¸ˆå¥½ï¼Œæƒ³é—®ä¸‹ nginx æ˜¯å¼‚æ­¥éé˜»å¡çš„ï¼Œopenrestyæ˜¯åŒæ­¥éé˜»å¡çš„ï¼Œé‚£ä»–ä»¬ä¹‹é—´çš„åŒæ­¥å¼‚æ­¥çš„å·®å¼‚å…·ä½“æ˜¯æŒ‡ä»€ä¹ˆ","like_count":0},{"had_liked":false,"id":210519,"user_name":"Geek_b2b3f5","can_delete":false,"product_type":"c1","uid":1547680,"ip_address":"","ucode":"6060E995FE3E90","user_header":"","comment_is_top":false,"comment_ctime":1587783076,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1587783076","product_id":100028301,"comment_content":"è€å¸ˆï¼Œæˆ‘åˆšå…¥é—¨OR, æœ‰ä¸ªå°é—®é¢˜è¯·æ•™ä¸€ä¸‹ï¼Œngx.utctime()ä¸ç³»ç»Ÿæ—¶é—´ä¸€è‡´ï¼Œngx.localtime()æ¯”ç³»ç»Ÿæ—¶é—´+8å°æ—¶ï¼Œæ€ä¹ˆæ‰èƒ½è®¾ç½®æ­£å¸¸å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1547680,"avatar":"","nickname":"Geek_b2b3f5","note":"","ucode":"6060E995FE3E90","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":248552,"discussion_content":"æ‰“æ‰°äº†ï¼Œé—®é¢˜å·²è§£å†³ï¼Œç¡¬ä»¶æ—¶é—´æœªåŒæ­¥æˆç³»ç»Ÿæ—¶é—´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587879024,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":196170,"user_name":"Geek__CherryKing","can_delete":false,"product_type":"c1","uid":1453587,"ip_address":"","ucode":"C93265645BEFCF","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1zZ7icsZIYadtCb5T0BCzBLOWToNgQ2C7hPU5N5zpVbUeKfvlBjLibWeibxg0HN7icprEWaWF23S9qw/132","comment_is_top":false,"comment_ctime":1585241977,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585241977","product_id":100028301,"comment_content":"åˆå­¦å…¥å‘æ‰“å¡","like_count":0},{"had_liked":false,"id":191888,"user_name":"lcp0578","can_delete":false,"product_type":"c1","uid":1559585,"ip_address":"","ucode":"E347928F8DB98D","user_header":"https://static001.geekbang.org/account/avatar/00/17/cc/21/e3c45732.jpg","comment_is_top":false,"comment_ctime":1584802613,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584802613","product_id":100028301,"comment_content":"ä¸é”™ğŸ‘","like_count":0},{"had_liked":false,"id":179715,"user_name":"jackstraw","can_delete":false,"product_type":"c1","uid":1137207,"ip_address":"","ucode":"C967D2D6158F99","user_header":"https://static001.geekbang.org/account/avatar/00/11/5a/37/8775d714.jpg","comment_is_top":false,"comment_ctime":1582083128,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582083128","product_id":100028301,"comment_content":"è€å¸ˆæœ‰é‡åˆ°åœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œluaä»£ç ä¸æ‰§è¡Œçš„æƒ…å†µä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":160709,"user_name":"Geek_67aae8","can_delete":false,"product_type":"c1","uid":1180081,"ip_address":"","ucode":"B586A5D7EDC71E","user_header":"https://static001.geekbang.org/account/avatar/00/12/01/b1/658b8540.jpg","comment_is_top":false,"comment_ctime":1576024505,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576024505","product_id":100028301,"comment_content":"åšçˆ¬è™«çš„è¯ï¼Œæ€ä¹ˆæ ·ï¼Ÿ","like_count":0},{"had_liked":false,"id":120031,"user_name":"ZeroIce","can_delete":false,"product_type":"c1","uid":1305369,"ip_address":"","ucode":"30133BA83CE349","user_header":"https://static001.geekbang.org/account/avatar/00/13/eb/19/0d990b03.jpg","comment_is_top":false,"comment_ctime":1564759490,"is_pvip":false,"replies":[{"id":"46069","content":"js çš„ä¸å¤ªæ‡‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ¸©é“­@OpenResty","uid":"1017955","ctime":1566198559,"ip_address":"","comment_id":120031,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1564759490","product_id":100028301,"comment_content":"è€å¸ˆï¼Œå¼‚æ­¥å¯å¦é€šè¿‡js å®ã€å¾®ä»»åŠ¡è¿›è¡Œç†è§£ï¼Ÿå³ï¼šå•çº¿ç¨‹jsæƒ³åšå¤šçº¿ç¨‹çš„äº‹ï¼ˆä¾‹ï¼šsettimeoutï¼‰ï¼Œ<br><br>éé˜»å¡ï¼šé€šè¿‡å¤šçº¿ç¨‹è¿›è¡Œå¹¶å‘å¤„ç†","like_count":0,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461180,"discussion_content":"js çš„ä¸å¤ªæ‡‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566198559,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118318,"user_name":"-W.LI-","can_delete":false,"product_type":"c1","uid":1210699,"ip_address":"","ucode":"3556786538664F","user_header":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","comment_is_top":false,"comment_ctime":1564320251,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564320251","product_id":100028301,"comment_content":"è€å¸ˆå¥½!è¿™ä¸ªåŒæ­¥éé˜»å¡å’Œã€‚IOæ¨¡å‹çš„éé˜»å¡ä¸€æ ·ä¹ˆ?åŒæ­¥å“åº”æˆåŠŸå¤±è´¥ï¼Œé…åˆIOå¤šè·¯å¤ç”¨ä½¿ç”¨ã€‚ä¸»çº¿ç¨‹selectorå¤šè·¯å¤ç”¨å™¨é˜»å¡ï¼Œä»»åŠ¡æäº¤çº¿ç¨‹æ± å¤„ç†(å­çº¿ç¨‹)ã€‚å­çº¿ç¨‹å¤„ç†å®Œä»¥åé€šè¿‡è°ƒç”¨channelçš„å›è°ƒå‡½æ•°å“åº”å®¢æˆ·ç«¯?","like_count":0},{"had_liked":false,"id":105321,"user_name":".","can_delete":false,"product_type":"c1","uid":1214439,"ip_address":"","ucode":"62FA36529ABF0E","user_header":"https://static001.geekbang.org/account/avatar/00/12/87/e7/043f9dda.jpg","comment_is_top":false,"comment_ctime":1560968513,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560968513","product_id":100028301,"comment_content":"æˆ‘å¯¹åŒæ­¥å¼‚æ­¥ï¼Œé˜»å¡éé˜»å¡çš„ç†è§£æ˜¯ï¼šæŠŠå®ƒä»¬åˆ†åˆ«ç±»æ¯”æˆâ€˜â€™äººâ€˜â€™å’Œâ€™â€˜â€˜äº‹â€™â€™ã€‚åŒæ­¥ï¼šä¸€ä¸ªäººåšäº‹ï¼›å¼‚æ­¥ï¼›å¤šä¸ªäººåŒæ—¶åšäº‹ã€‚é˜»å¡ï¼šè¦åšçš„å¤šä»¶äº‹æƒ…ä¸²è¡Œæ‰§è¡Œï¼Œåšå®Œä¸€ä»¶äº‹ä¹‹åæ‰èƒ½å¼€å§‹åšä¸‹ä¸€ä»¶äº‹ï¼›éé˜»å¡ï¼šè¦åšçš„å¤šä»¶äº‹æƒ…äº’ç›¸ç©¿æ’æ‰§è¡Œï¼Œæ— ä¸¥æ ¼é¡ºåºè¦æ±‚ã€‚","like_count":0},{"had_liked":false,"id":101474,"user_name":"bookå°¾æ±","can_delete":false,"product_type":"c1","uid":1446375,"ip_address":"","ucode":"AE2B8DFC643ACC","user_header":"https://static001.geekbang.org/account/avatar/00/16/11/e7/044a9a6c.jpg","comment_is_top":false,"comment_ctime":1559815724,"is_pvip":true,"replies":[{"id":"36604","content":"æ²¡æœ‰äº†è§£è¿‡è¿™æœ¬ä¹¦ï¼Œä¸å¥½è¯„ä»·","user_name":"ä½œè€…å›å¤","user_name_real":"æ¸©é“­@OpenResty","uid":"1017955","ctime":1559864346,"ip_address":"","comment_id":101474,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1559815724","product_id":100028301,"comment_content":"å­¦äº†è¿™é—¨è¯¾ç¨‹ï¼Œè¿˜ç”¨çœ‹openrestyå…¥é—¨åˆ°å®è·µé‚£æœ¬ä¹¦å—","like_count":0,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452979,"discussion_content":"æ²¡æœ‰äº†è§£è¿‡è¿™æœ¬ä¹¦ï¼Œä¸å¥½è¯„ä»·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559864346,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":100498,"user_name":"é˜³ä»”","can_delete":false,"product_type":"c1","uid":1318915,"ip_address":"","ucode":"4907A3750CEAD6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo2SjCeylLv0P3Glle5277kA4b8cAuxr1NrC0njPKEqzSpB8IEicHB29GicFFwG1qiaxs4hxRiaBmoibVw/132","comment_is_top":false,"comment_ctime":1559567544,"is_pvip":false,"replies":[{"id":"36556","content":"API ç½‘å…³æ˜¯ç”¨æ¥ç»Ÿä¸€ç®¡ç†æœåŠ¡çš„ç½‘å…³ï¼Œæ¯”å¦‚æ”¯ä»˜ã€ç”¨æˆ·ç™»å½•ç­‰éƒ½æ˜¯ API å½¢å¼å¯¹å¤–æä¾›çš„æœåŠ¡ï¼Œå®ƒä»¬éƒ½éœ€è¦ä¸€ä¸ªç½‘å…³æ¥åšç»Ÿä¸€çš„å®‰å…¨å’Œèº«ä»½è®¤è¯ã€‚<br>API ç½‘å…³æ˜¯åŸºäº web æœåŠ¡å™¨ï¼Œæˆ–è€…åœ¨ web æœåŠ¡å™¨åé¢ä¸€å±‚çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ¸©é“­@OpenResty","uid":"1017955","ctime":1559805559,"ip_address":"","comment_id":100498,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1559567544","product_id":100028301,"comment_content":"ä¸æ‡‚å°±é—®ï¼šæ–‡ä¸­ä¸€ç›´è¯´çš„APIç½‘å…³æ˜¯æŒ‡ä»€ä¹ˆï¼Ÿå’Œnginxï¼Œtomcatï¼Œapacheè¿™ç§webæœåŠ¡å™¨æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452574,"discussion_content":"API ç½‘å…³æ˜¯ç”¨æ¥ç»Ÿä¸€ç®¡ç†æœåŠ¡çš„ç½‘å…³ï¼Œæ¯”å¦‚æ”¯ä»˜ã€ç”¨æˆ·ç™»å½•ç­‰éƒ½æ˜¯ API å½¢å¼å¯¹å¤–æä¾›çš„æœåŠ¡ï¼Œå®ƒä»¬éƒ½éœ€è¦ä¸€ä¸ªç½‘å…³æ¥åšç»Ÿä¸€çš„å®‰å…¨å’Œèº«ä»½è®¤è¯ã€‚\nAPI ç½‘å…³æ˜¯åŸºäº web æœåŠ¡å™¨ï¼Œæˆ–è€…åœ¨ web æœåŠ¡å™¨åé¢ä¸€å±‚çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559805559,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":99165,"user_name":"Panda","can_delete":false,"product_type":"c1","uid":1095740,"ip_address":"","ucode":"911A200C7B18BE","user_header":"https://static001.geekbang.org/account/avatar/00/10/b8/3c/1a294619.jpg","comment_is_top":false,"comment_ctime":1559173840,"is_pvip":false,"replies":[{"id":"35656","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"æ¸©é“­@OpenResty","uid":"1017955","ctime":1559193195,"ip_address":"","comment_id":99165,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1559173840","product_id":100028301,"comment_content":"NGINX å¯¹èµ„æºçš„â€œæŠ é—¨â€ + LuaJITçš„è½»é‡ = Openrestyçš„é«˜æ€§èƒ½ çµæ´»","like_count":0,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451999,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559193195,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98569,"user_name":"KOK","can_delete":false,"product_type":"c1","uid":1545491,"ip_address":"","ucode":"2D8BB46F187783","user_header":"","comment_is_top":false,"comment_ctime":1559032573,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559032573","product_id":100028301,"comment_content":"æ„Ÿè°¢ï¼ŒæœŸå¾…ä¸‹ä¸€è®²","like_count":0},{"had_liked":false,"id":98312,"user_name":"HelloBug","can_delete":false,"product_type":"c1","uid":1249598,"ip_address":"","ucode":"E61A4AD5C2F724","user_header":"https://static001.geekbang.org/account/avatar/00/13/11/3e/925aa996.jpg","comment_is_top":false,"comment_ctime":1558954672,"is_pvip":true,"replies":[{"id":"35379","content":"å½“ç„¶å¯ä»¥ï¼Œè¿™å°±æ˜¯ OpenResty çš„ä¼˜åŠ¿","user_name":"ä½œè€…å›å¤","user_name_real":"æ¸©é“­@OpenResty","uid":"1017955","ctime":1559100378,"ip_address":"","comment_id":98312,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1558954672","product_id":100028301,"comment_content":"è€å¸ˆï¼Œè¿™é‡Œè¯´çš„openrestyçš„åŠ¨æ€ç‰¹æ€§åŒ…å«lua_code_cacheæŒ‡ä»¤å¸¦æ¥çš„ä¸ç”¨åŠ¨æ€åŠ è½½nginx ä»¥åŠæ–‡ä¸­æ‰€è¯´â€œé€šè¿‡ OpenResty ä¸­ lua-nginx-module æ¨¡å—ä¸­æä¾›çš„ Lua APIï¼Œæˆ‘ä»¬å¯ä»¥åŠ¨æ€åœ°æ§åˆ¶è·¯ç”±ã€ä¸Šæ¸¸ã€SSL è¯ä¹¦ã€è¯·æ±‚ã€å“åº”ç­‰ã€‚â€åè€…æ˜¯æŒ‡å¯¹æ¯ä¸ªè¯·æ±‚å¯ä»¥ä¸ªæ€§åŒ–çš„æ§åˆ¶å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451639,"discussion_content":"å½“ç„¶å¯ä»¥ï¼Œè¿™å°±æ˜¯ OpenResty çš„ä¼˜åŠ¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559100378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98167,"user_name":"æ®µå…ˆæ£®","can_delete":false,"product_type":"c1","uid":1310788,"ip_address":"","ucode":"90251BB8BF8DDB","user_header":"https://static001.geekbang.org/account/avatar/00/14/00/44/d5cf762b.jpg","comment_is_top":false,"comment_ctime":1558923992,"is_pvip":false,"replies":[{"id":"35380","content":"éƒ½æ˜¯åç¨‹å’Œäº‹ä»¶é©±åŠ¨ï¼Œæ˜¯ä¸€æ ·çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ¸©é“­@OpenResty","uid":"1017955","ctime":1559100404,"ip_address":"","comment_id":98167,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1558923992","product_id":100028301,"comment_content":"è¿™ä¸ªéé˜»å¡å’Œnodejsçš„éé˜»å¡å®ç°åŸç†ç›¸åŒå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451588,"discussion_content":"éƒ½æ˜¯åç¨‹å’Œäº‹ä»¶é©±åŠ¨ï¼Œæ˜¯ä¸€æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559100404,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98156,"user_name":"HelloBug","can_delete":false,"product_type":"c1","uid":1249598,"ip_address":"","ucode":"E61A4AD5C2F724","user_header":"https://static001.geekbang.org/account/avatar/00/13/11/3e/925aa996.jpg","comment_is_top":false,"comment_ctime":1558922202,"is_pvip":true,"replies":[{"id":"35119","content":"æ˜¯æŒ‡ä¸ç”¨ reload nginx è¿›ç¨‹ã€‚<br>lua_code_cache æ˜¯é»˜è®¤å¼€å¯çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ¸©é“­@OpenResty","uid":"1017955","ctime":1558923612,"ip_address":"","comment_id":98156,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1558922202","product_id":100028301,"comment_content":"è¿™é‡Œè¯´çš„ä¸é‡å¯æ˜¯æŒ‡é‡æ–°åŠ è½½å—ï¼Ÿè¿˜æ˜¯è¯´å¼€å¯ç¼“å­˜æŒ‡ä»¤ï¼Ÿæ„Ÿè§‰ä¸¤ä¸ªéƒ½ä¸æ˜¯~ğŸ˜‚","like_count":0,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451581,"discussion_content":"æ˜¯æŒ‡ä¸ç”¨ reload nginx è¿›ç¨‹ã€‚\nlua_code_cache æ˜¯é»˜è®¤å¼€å¯çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558923612,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}