{"id":806933,"title":"10ï½œMySQLå¦‚ä½•å¿«é€Ÿå¯¼å…¥å¯¼å‡ºæ•°æ®ï¼Ÿï¼ˆä¸‹ï¼‰","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ä¿Šè¾¾ã€‚</p><p>ä¸Šä¸€è®²æˆ‘ä»‹ç»äº†mysqldumpå’ŒMySQL Shellçš„Dumpå·¥å…·ã€‚ä½¿ç”¨mysqldumpå¯¼å‡ºçš„ï¼Œå®é™…ä¸Šæ˜¯ä¸€ä¸ªSQLæ–‡ä»¶ï¼Œå°†è¿™ä¸ªæ–‡ä»¶ç›´æ¥æ‹¿åˆ°æ•°æ®åº“ä¸­æ‰§è¡Œï¼Œå°±å¯ä»¥å®Œæˆæ•°æ®å¯¼å…¥ã€‚MySQL Shell Dumpå·¥å…·å°†å»ºè¡¨è¯­å¥ã€è¡¨ä¸­çš„æ•°æ®å¯¼å‡ºåˆ°äº†ä¸åŒçš„æ–‡ä»¶ä¸­ï¼Œè€Œä¸”æ•°æ®ä»¥æ–‡æœ¬æ–‡ä»¶çš„å½¢å¼å­˜å‚¨ï¼Œéœ€è¦ä½¿ç”¨MySQL Shellé…å¥—çš„Loadå·¥å…·ï¼Œæˆ–è€…ä½¿ç”¨Load Dataå‘½ä»¤å¯¼å…¥æ•°æ®ã€‚</p><p>è¿™ä¸€è®²æˆ‘ä»¬æ¥å­¦ä¹ MySQL Shell Loadå·¥å…·çš„ä½¿ç”¨æ–¹æ³•ï¼Œä»¥åŠå¯¼å‡ºå’Œå¯¼å…¥å•ä¸ªè¡¨æ•°æ®çš„ä¸€äº›å…¶ä»–æ–¹æ³•ã€‚</p><h2>MySQL Shell Loadå·¥å…·</h2><h3>ä½¿ç”¨load_dumpå¯¼å…¥</h3><p>MySQL Shell Dumpå¯¼å‡ºçš„æ•°æ®ï¼Œå¯ä»¥ç”¨MySQL Shell Loadå·¥å…·å¯¼å…¥ã€‚load_dumpæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯Dumpæ–‡ä»¶çš„è·¯å¾„ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œç”¨æ¥æŒ‡å®šå¯¼å…¥çš„å„ä¸ªé€‰é¡¹ã€‚</p><pre><code class=\"language-go\">util.load_dump(\"/data/backup/db_backups\", {})\n</code></pre><p>load_dumpé»˜è®¤ä¼šå¯¼å…¥Dumpè·¯å¾„ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ã€‚ä½ å¯ä»¥ä½¿ç”¨includeSchemasã€includeTablesæ¥æŒ‡å®šéœ€è¦å¯¼å…¥çš„åº“å’Œè¡¨ï¼Œç”¨excludeSchemasã€excludeTableså¿½ç•¥æŒ‡ä¸€äº›åº“å’Œè¡¨ã€‚è¿™é‡ŒincludeTableså’ŒexcludeTablesä¸­è¡¨åçš„æ ¼å¼ä¸º\"db_name.table_name\"ã€‚</p><!-- [[[read_end]]] --><pre><code class=\"language-go\">util.load_dump(\"/data/backup/db_backups\", {\n    \"includeTables\":[\"employees.salaries\"]\n})\n</code></pre><p>å°†loadDdlè®¾ç½®ä¸ºTrueï¼ŒloadDataè®¾ç½®ä¸ºFalseï¼Œä½ å¯ä»¥åªå¯¼å…¥è¡¨ç»“æ„ï¼Œä¸å¯¼å…¥æ•°æ®ã€‚</p><pre><code class=\"language-go\">util.load_dump(\"employees_dump\", {\n    \"includeTables\":[\"employees.salaries\"], \n    \"loadDdl\":True,\n    \"loadData\":False\n})\n</code></pre><p>å¦‚æœä½ åªå¯¼å‡ºäº†ä¸€ä¸ªåº“ï¼Œè¿˜å¯ä»¥é€šè¿‡schemaé€‰é¡¹ï¼Œæ•°æ®å¯¼å…¥åˆ°å¦å¤–ä¸€ä¸ªåº“ä¸­ã€‚å¦‚æœæŒ‡å®šçš„åº“ä¸å­˜åœ¨ï¼Œload_dumpä¼šè‡ªåŠ¨åˆ›å»ºè¿™ä¸ªæ•°æ®åº“ã€‚</p><pre><code class=\"language-go\">util.load_dump(\"/data/backup/backup_employees\", {\n\t\"schema\":\"employees_restore\"\n})\n</code></pre><p>å¦‚æœDumpæ–‡ä»¶ä¸­åŒ…å«äº†å¤šä¸ªåº“ï¼Œé‚£ä¹ˆä½¿ç”¨schemaé€‰é¡¹æ—¶ï¼Œä¼šæŠ¥å‡ºä¸‹é¢è¿™æ ·çš„é”™è¯¯ä¿¡æ¯ã€‚</p><pre><code class=\"language-go\">ERROR: The 'schema' option can only be used when loading a single schema, but 2 will be loaded.\n</code></pre><h3>æ³¨æ„äº‹é¡¹</h3><ol>\n<li>\n<p>load_dumpå·¥å…·ä½¿ç”¨LOAD DATA LOCAL INFILEå‘½ä»¤å¯¼å…¥æ•°æ®ï¼Œå› æ­¤éœ€è¦åœ¨ç›®æ ‡åº“ä¸Šå°†local_infileè®¾ç½®ä¸ºONï¼Œå¦åˆ™ä¼šæŠ¥é”™â€œERROR: The â€˜local_infileâ€™ global system variable must be set to ON in the target server, after the server is verified to be trusted.â€ã€‚</p>\n</li>\n<li>\n<p>ä½¿ç”¨load_dumpå¯¼å…¥æ—¶ï¼Œå¦‚æœç›®æ ‡åº“ä¸­å·²ç»æœ‰åŒåçš„è¡¨ï¼Œå¯¼å…¥æ“ä½œä¼šæŠ¥é”™ã€‚</p>\n</li>\n</ol><pre><code class=\"language-go\">ERROR: Schema `employees` already contains a table named employees\nERROR: One or more objects in the dump already exist in the destination database. You must either DROP these objects or exclude them from the load.\n</code></pre><p>ä½ å¯ä»¥è®¾ç½®excludeTablesï¼Œä¸å¯¼å…¥è¿™äº›è¡¨ã€‚æˆ–è€…è®¾ç½®ignoreExistingObjectsï¼Œå¿½ç•¥å·²ç»å­˜åœ¨çš„è¡¨ã€‚æ³¨æ„ï¼Œè®¾ç½®ignoreExistingObjectsåªæ˜¯ä¸é‡æ–°åˆ›å»ºè¡¨ï¼Œæ•°æ®è¿˜æ˜¯ä¼šé‡æ–°å¯¼å…¥çš„ï¼Œè¡¨ä¸­å·²ç»å­˜åœ¨æ•°æ®ï¼Œä¼šè¢«Dumpæ–‡ä»¶ä¸­çš„æ•°æ®è¦†ç›–ã€‚</p><ol start=\"3\">\n<li>load_dumpå°†å¯¼å…¥çš„è¿›åº¦è®°å½•åœ¨progressFileæ–‡ä»¶ä¸­ã€‚å¦‚æœå¯¼å…¥è¿‡ç¨‹å¼‚å¸¸ä¸­æ–­ï¼Œä¸‹æ¬¡ç»§ç»­å¯¼å…¥æ—¶ï¼Œä¼šæ ¹æ®progressFileæ–‡ä»¶ä¸­çš„å†…å®¹è·³è¿‡å·²ç»å®Œæˆçš„æ­¥éª¤ã€‚å¦‚æœä½ æƒ³é‡æ–°å¯¼å…¥æ•°æ®ï¼Œå¯ä»¥å°†resetProgressè®¾ç½®ä¸ºTrueã€‚</li>\n</ol><pre><code class=\"language-go\">util.load_dump(\"/data/backup/backup_employees\", {\n\t\"schema\":\"employees_restore\",\n\t\"resetProgress\": True,\n})\n</code></pre><h3>Loadé€‰é¡¹</h3><p>ä¸‹é¢çš„è¡¨æ ¼æ•´ç†äº†Loadå·¥å…·æ”¯æŒçš„ä¸€éƒ¨åˆ†å‚æ•°ï¼Œä¾›ä½ å‚è€ƒã€‚å®Œæ•´çš„é€‰é¡¹è¯·å‚è€ƒ<a href=\"https://dev.mysql.com/doc/mysql-shell/8.0/en/mysql-shell-utilities-load-dump.html\">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/15/8c/1594612be99cf0ed9806d24da09cc78c.jpg?wh=1920x2177\" alt=\"å›¾ç‰‡\"></p><p>MySQL Shell Dumpå¯¼å‡ºçš„æ–‡ä»¶ï¼Œå®é™…ä¸Šè¿˜å¯ä»¥ç›´æ¥ä½¿ç”¨LOAD DATAå‘½ä»¤å¯¼å…¥ï¼Œæˆ–è€…ä½¿ç”¨MySQL Shellçš„import_tableå¯¼å…¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä¼šä¾æ¬¡ä»‹ç»ã€‚</p><h2>å•è¡¨æ•°æ®å¯¼å‡º</h2><p>MySQL Shell Dumpå¯¼å‡ºçš„æ•°æ®ï¼Œå®é™…ä¸Šä½¿ç”¨äº†æ¯”è¾ƒå¸¸ç”¨çš„ä¸€ç§æ•°æ®æ ¼å¼ã€‚åœ¨MySQLä¸­ï¼Œè¿˜æœ‰å…¶ä»–å‡ ä¸ªæ–¹æ³•ä¹Ÿèƒ½å°†æ•°æ®å¯¼å‡ºæˆä¸€æ ·çš„æ ¼å¼ï¼ŒåŒ…æ‹¬ä½¿ç”¨SELECT INTO OUTFILEå’Œä½¿ç”¨MySQL Shellçš„export_tableåŠŸèƒ½ã€‚</p><h3>ä½¿ç”¨SELECT INTO OUTFILE</h3><p>ä½¿ç”¨SELECT INTO OUTFILEå¯ä»¥å°†æ•°æ®å¯¼å‡ºåˆ°æ–‡æœ¬æ–‡ä»¶ã€‚ä¸è¿‡ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½æ—¶ï¼Œéœ€è¦å…ˆè®¾ç½®æ•°æ®åº“å‚æ•°secure_file_privã€‚ä¿®æ”¹secure_file_privéœ€è¦é‡å¯æ•°æ®åº“ï¼Œæˆ‘ä»¬å°†å‚æ•°åŠ åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼Œé‡å¯æ•°æ®åº“ã€‚</p><pre><code class=\"language-go\"># tail -1 /data/mysql01/my.cnf\nsecure_file_priv=''\n</code></pre><p>OUTFILEä¸èƒ½æŒ‡å‘å·²ç»å­˜åœ¨çš„æ–‡ä»¶ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p><pre><code class=\"language-go\">mysql&gt; select * from employees.employees limit 10 into outfile '/tmp/emp.txt';\nQuery OK, 10 rows affected (0.19 sec)\n</code></pre><p>SELECT INTOä¸åŠ é¢å¤–å‚æ•°æ—¶ï¼Œä½¿ç”¨Tabåˆ†å‰²å­—æ®µï¼Œä½¿ç”¨æ¢è¡Œç¬¦åˆ†å‰²è®°å½•ã€‚</p><pre><code class=\"language-go\"># head -5 /tmp/emp.txt\n10001\t1953-09-02\tGeorgi\tFacello\tM\t1986-06-26\n10002\t1964-06-02\tBezalel\tSimmel\tF\t1985-11-21\n10003\t1959-12-03\tParto\tBamford\tM\t1986-08-28\n10004\t1954-05-01\tChirstian\tKoblick\tM\t1986-12-01\n10005\t1955-01-21\tKyoichi\tMaliniak\tM\t1989-09-12\n</code></pre><p>ä½ å¯ä»¥åˆ†åˆ«æŒ‡å®šåˆ—åˆ†å‰²ç¬¦ã€è¡Œåˆ†å‰²ç¬¦ã€è½¬ä¹‰ç¬¦ã€‚ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œåˆ—åˆ†å‰²ç¬¦æ˜¯é€—å· <code>\",\"</code>ï¼Œè¡Œåˆ†å‰²ç¬¦æ˜¯æ¢è¡Œç¬¦ <code>\"\\n\"</code>ï¼Œå­—æ®µçš„æ•°æ®ç”¨å¼•å·å¼•ç”¨èµ·æ¥ã€‚</p><pre><code class=\"language-go\">mysql&gt; select * from employees limit 10\n     into outfile '/tmp/emp1.txt'\n     character set utf8mb4\n     fields terminated by ','\n     optionally enclosed by '\"'\n     escaped by '\\\\'\n     lines terminated by '\\n';\nQuery OK, 10 rows affected (0.01 sec)\n</code></pre><p>è¿™æ ·å¯¼å‡ºçš„æ–‡ä»¶ï¼Œå°±æ˜¯éå¸¸å¸¸è§çš„CSVæ ¼å¼ã€‚</p><pre><code class=\"language-go\"># cat /tmp/emp1.txt\n10001,\"1953-09-02\",\"Georgi\",\"Facello\",\"M\",\"1986-06-26\"\n10002,\"1964-06-02\",\"Bezalel\",\"Simmel\",\"F\",\"1985-11-21\"\n10003,\"1959-12-03\",\"Parto\",\"Bamford\",\"M\",\"1986-08-28\"\n10004,\"1954-05-01\",\"Chirstian\",\"Koblick\",\"M\",\"1986-12-01\"\n10005,\"1955-01-21\",\"Kyoichi\",\"Maliniak\",\"M\",\"1989-09-12\"\n</code></pre><p>å®é™…åœºæ™¯ä¸­ï¼Œå­—æ®µä¸­å­˜å‚¨çš„æ•°æ®ä¸­å¾ˆå¯èƒ½ä¹ŸåŒ…å«äº†åˆ—åˆ†å‰²ç¬¦ã€è¡Œåˆ†å‰²ç¬¦ã€å¼•å·ã€è½¬ä¹‰ç¬¦ï¼Œè¿™ä¼šå¼•èµ·æ–‡ä»¶æ ¼å¼é”™ä¹±å—ï¼Ÿæˆ‘ä»¬ç”¨ä¸€ä¸ªä¾‹å­æ¥æµ‹è¯•ä¸‹ã€‚</p><pre><code class=\"language-go\">mysql&gt; create table emp2(\n    emp_no int,\n    emp_name varchar(60),\n    emp_intro varchar(100),\n    primary key (emp_no)\n) engine=InnoDB;\n\nmysql&gt; insert into emp2 values\n    (10001, 'å¼ ä¸‰', 'ä¸€ç”ŸäºŒ,äºŒç”Ÿä¸‰,ä¸‰ç”Ÿä¸‡ç‰©ã€‚'),\n    (10002, 'ææŸ', 'å¼•ç”¨ä¸€å¥åè¨€:\"å¤©è¡Œå¥\\nå›å­ä»¥è‡ªå¼ºä¸æ¯\"'),\n    (10003, 'é™ˆæŸ', 'D:\\\\Pictures\\\\myself.png');\n\nmysql&gt; select * from emp2;\n+--------+----------+------------------------------------------------------+\n| emp_no | emp_name | emp_intro                                            |\n+--------+----------+------------------------------------------------------+\n|  10001 | å¼ ä¸‰     | ä¸€ç”ŸäºŒ,äºŒç”Ÿä¸‰,ä¸‰ç”Ÿä¸‡ç‰©ã€‚                             |\n|  10002 | ææŸ     | å¼•ç”¨ä¸€å¥åè¨€:\"å¤©è¡Œå¥\nå›å­ä»¥è‡ªå¼ºä¸æ¯\"                 |\n|  10003 | é™ˆæŸ     | D:\\Pictures\\myself.png                               |\n+--------+----------+------------------------------------------------------+\n3 rows in set (0.00 sec)\n</code></pre><p>ä¸Šé¢è¿™ä¸ªè¡¨çš„å‡ è¡Œæ•°æ®ä¸­ï¼Œæœ‰é€—å·ã€åŒå¼•å·ã€æ¢è¡Œç¬¦ã€åæ–œæ è¿™äº›ç‰¹æ®Šçš„å­—ç¬¦ã€‚å°†æ•°æ®å¯¼å‡ºåï¼Œå¯ä»¥çœ‹åˆ°è¿™äº›ç‰¹æ®Šå­—ç¬¦éƒ½è¿›è¡Œäº†è½¬ä¹‰å¤„ç†ã€‚å› æ­¤å¯¼å…¥è¿™äº›æ•°æ®æ—¶ï¼Œåªè¦æŒ‡å®šç›¸åŒçš„å‚æ•°ï¼Œå°±ä¸ä¼šæœ‰ä»»ä½•é—®é¢˜ã€‚</p><pre><code class=\"language-go\">mysql&gt; select * from emp2 limit 10\n     into outfile '/tmp/emp2.txt'\n     character set utf8mb4\n     fields terminated by ','\n     optionally enclosed by '\"'\n     escaped by '\\\\'\n     lines terminated by '\\n';\n\nQuery OK, 3 rows affected (0.00 sec)\n</code></pre><pre><code class=\"language-go\"># cat /tmp/emp2.txt\n10001,\"å¼ ä¸‰\",\"ä¸€ç”ŸäºŒ,äºŒç”Ÿä¸‰,ä¸‰ç”Ÿä¸‡ç‰©ã€‚\"\n10002,\"ææŸ\",\"å¼•ç”¨ä¸€å¥åè¨€:\\\"å¤©è¡Œå¥\\\nå›å­ä»¥è‡ªå¼ºä¸æ¯\\\"\"\n10003,\"é™ˆæŸ\",\"D:\\\\Pictures\\\\myself.png\"\n</code></pre><p>SELECT INTO OUTFILEåªèƒ½å°†æ•°æ®å¯¼å‡ºåœ¨æ•°æ®åº“æœåŠ¡å™¨çš„ç›®å½•ä¸­ï¼Œä½¿ç”¨èµ·æ¥å¹¶ä¸æ˜¯å¾ˆæ–¹ä¾¿ã€‚å› ä¸ºä½ å¯èƒ½å¹¶æ²¡æœ‰æ•°æ®åº“æœåŠ¡å™¨çš„æƒé™ï¼Œæ¯”å¦‚ä½ å¯èƒ½ä½¿ç”¨äº†äº‘æ•°æ®åº“ï¼Œæ— æ³•è®¿é—®åº•å±‚æ“ä½œç³»ç»Ÿã€‚</p><h3>ä½¿ç”¨MySQL Shell export_tableå¯¼å‡ºæ•°æ®</h3><p>MySQL Shellæä¾›äº†export_tableåŠŸèƒ½ï¼Œå¯ä»¥å°†è¡¨çš„æ•°æ®å¯¼å‡ºåˆ°æœ¬åœ°æ–‡ä»¶ä¸­ã€‚ä¸‹é¢è¿™ä¸ªä¾‹å­ä½¿ç”¨export_tableå¯¼å‡ºemp2è¡¨ã€‚</p><pre><code class=\"language-go\">mysqlsh -u user_01 -h172.16.121.234 -psomepass --py --mysql\n\n MySQL Py &gt; util.export_table(\"employees.emp2\", \"/data/backup/emp2.csv\", {\n    \"linesTerminatedBy\": \"\\n\",\n    \"fieldsTerminatedBy\": \",\",\n    \"fieldsEnclosedBy\": \"\\\"\",\n    \"fieldsOptionallyEnclosed\": True,\n    \"fieldsEscapedBy\": \"\\\\\"\n    })\n\n\nInitializing - done\nGathering information - done\nRunning data dump using 1 thread.\nNOTE: Progress information uses estimated values and may not be accurate.\nStarting data dump\n100% (3 rows / ~3 rows), 0.00 rows/s, 0.00 B/s\nDump duration: 00:00:00s\nTotal duration: 00:00:00s\nData size: 170 bytes\nRows written: 3\nBytes written: 170 bytes\nAverage throughput: 170.00 B/s\n\nThe dump can be loaded using:\nutil.import_table(\"/data/backup/emp2.csv\", {\n    \"characterSet\": \"utf8mb4\",\n    \"fieldsEnclosedBy\": \"\\\"\",\n    \"fieldsEscapedBy\": \"\\\\\",\n    \"fieldsOptionallyEnclosed\": true,\n    \"fieldsTerminatedBy\": \",\",\n    \"linesTerminatedBy\": \"\\n\",\n    \"schema\": \"employees\",\n    \"table\": \"emp2\"\n})\n</code></pre><p>æŒ‡å®šç›¸åŒçš„å‚æ•°åï¼Œä½¿ç”¨export_tableç”Ÿæˆçš„æ–‡ä»¶å’ŒSELECT INTO OUTFILEåŸºæœ¬ä¸€è‡´ã€‚</p><pre><code class=\"language-go\"># cat ./employees_dump/emp2.csv\n10001,\"å¼ ä¸‰\",\"ä¸€ç”ŸäºŒ\\,äºŒç”Ÿä¸‰\\,ä¸‰ç”Ÿä¸‡ç‰©ã€‚\"\n10002,\"ææŸ\",\"å¼•ç”¨ä¸€å¥åè¨€:\\\"å¤©è¡Œå¥\\nå›å­ä»¥è‡ªå¼ºä¸æ¯\\\"\"\n10003,\"é™ˆæŸ\",\"D:\\\\Pictures\\\\myself.png\"\n</code></pre><h2>å•è¡¨æ•°æ®å¯¼å…¥</h2><p>å‰é¢è®²åˆ°ï¼Œload_dumpåº•å±‚å®é™…ä¸Šä½¿ç”¨äº†LOAD DATA LOCAL INFILEå‘½ä»¤æ¥å¯¼å…¥æ•°æ®ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨MySQLå®¢æˆ·ç«¯ä¸­ç›´æ¥ä½¿ç”¨LOAD DATAå‘½ä»¤ã€‚</p><h3>ä½¿ç”¨Load Dataå¯¼å…¥æ•°æ®</h3><p>LOAD DATAå‘½ä»¤çš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š</p><pre><code class=\"language-go\">LOAD DATA\n    [LOCAL]\n    INFILE 'file_name'\n    [REPLACE | IGNORE]\n    INTO TABLE tbl_name\n    [CHARACTER SET charset_name]\n    [FIELDS\n        [TERMINATED BY 'string']\n        [[OPTIONALLY] ENCLOSED BY 'char']\n        [ESCAPED BY 'char']\n    ]\n    [LINES\n        [STARTING BY 'string']\n        [TERMINATED BY 'string']\n    ]\n    [IGNORE number {LINES | ROWS}]\n    [(col_name_or_user_var\n        [, col_name_or_user_var] ...)]\n    [SET col_name={expr | DEFAULT}\n        [, col_name={expr | DEFAULT}] ...]\n</code></pre><p>INFILEæŒ‡å®šæ–‡ä»¶è·¯å¾„ï¼Œå¦‚æœä¸åŠ LOCALï¼Œé‚£ä¹ˆæ–‡ä»¶éœ€è¦å­˜æ”¾åœ¨æ•°æ®åº“æœåŠ¡å™¨çš„æŒ‡å®šè·¯å¾„ä¸‹ï¼Œå¹¶ä¸”ç™»å½•ç”¨æˆ·éœ€è¦æœ‰FILEæƒé™ã€‚å¦‚æœåŠ ä¸Šäº†LOCALï¼Œé‚£ä¹ˆæ–‡ä»¶éœ€è¦åœ¨å®¢æˆ·ç«¯æ‰€åœ¨çš„æœºå™¨ä¸Šã€‚å¦‚æœå¯¼å…¥çš„æ•°æ®å’Œè¡¨é‡ŒåŸæœ‰çš„æ•°æ®æœ‰å†²çªï¼Œé»˜è®¤ä¼šæŠ¥é”™ï¼Œå¯ä»¥åŠ ä¸ŠREPLACEï¼Œè¦†ç›–è¡¨ä¸­çš„æ•°æ®ï¼Œæˆ–è€…åŠ ä¸ŠIGNOREï¼Œè·³è¿‡å†²çªçš„æ•°æ®ã€‚</p><p>ä½ å¯ä»¥ä½¿ç”¨IGNOREå¿½ç•¥æ–‡ä»¶å¼€å¤´çš„å‡ è¡Œå†…å®¹ã€‚å¦‚æœä½ çš„æ–‡ä»¶å‰å‡ è¡Œæ˜¯æ ‡é¢˜ï¼Œä½¿ç”¨IGNOREå°±å¾ˆæ–¹ä¾¿ã€‚</p><p>ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨LOAD DATAå‘½ä»¤æ¥å¯¼å…¥ä¹‹å‰ç”Ÿæˆçš„CSVæ–‡ä»¶ã€‚æ³¨æ„mysqlå‘½ä»¤è¡Œéœ€è¦åŠ ä¸Šå‚æ•°â€“local-infileã€‚</p><pre><code class=\"language-go\">mysql -vvv -uuser_01 -h172.16.121.234 -pabc123 -psomepass --local-infile employees &lt;&lt;EOF\nload data local infile '/data/backup/emp2.csv' \nreplace into table emp3\ncharacter set utf8mb4\nfields terminated by ','\noptionally enclosed by '\"'\nescaped by '\\\\\\\\'\nlines terminated by '\\n';\nEOF\n</code></pre><p>å¯¼å…¥åè¦æ£€æŸ¥å‘½ä»¤çš„è¾“å‡ºä¿¡æ¯ï¼Œå¦‚æœæœ‰Warningï¼Œéœ€è¦æ£€æŸ¥ä¸‹äº§ç”Ÿwarningçš„å…·ä½“åŸå› ã€‚</p><pre><code class=\"language-go\">Query OK, 3 rows affected (1.42 sec)\nRecords: 3  Deleted: 0  Skipped: 0  Warnings: 0\n\nBye\n</code></pre><p>æˆ‘ä»¬æ¥æ£€æŸ¥ä¸‹å¯¼å…¥çš„æ•°æ®ï¼Œæ²¡æœ‰å‘ç°ä»€ä¹ˆé—®é¢˜ã€‚</p><pre><code class=\"language-go\">mysql&gt; select * from emp3;\n+--------+----------+------------------------------------------------------+\n| emp_no | emp_name | emp_intro                                            |\n+--------+----------+------------------------------------------------------+\n|  10001 | å¼ ä¸‰     | ä¸€ç”ŸäºŒ,äºŒç”Ÿä¸‰,ä¸‰ç”Ÿä¸‡ç‰©ã€‚                             |\n|  10002 | ææŸ     | å¼•ç”¨ä¸€å¥åè¨€:\"å¤©è¡Œå¥\nå›å­ä»¥è‡ªå¼ºä¸æ¯\"                 |\n|  10003 | é™ˆæŸ     | D:\\Pictures\\myself.png                               |\n+--------+----------+------------------------------------------------------+\n3 rows in set (0.00 sec)\n</code></pre><p>åˆšæ‰çš„ä¾‹å­ä¸­ï¼ŒCSVæ–‡ä»¶ä¸­å­—æ®µæ•°é‡å’Œé¡ºåºè·Ÿè¡¨é‡Œé¢çš„å­—æ®µæ•°é‡å’Œé¡ºåºå®Œå…¨ä¸€è‡´ã€‚å¦‚æœæ–‡ä»¶å’Œè¡¨é‡Œé¢å­—æ®µæ•°é‡æˆ–é¡ºåºä¸ä¸€è‡´ï¼Œåº”è¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå…·ä½“çš„ä¾‹å­æ¥è¯´æ˜å¦‚ä½•å¤„ç†è¿™ç§æƒ…å†µã€‚</p><pre><code class=\"language-go\">create table emp4(\n    emp_name varchar(64),\n    emp_no int,\n    emp_intro varchar(100),\n    grade int,\n    primary key(emp_no)\n) engine=InnoDB;\n</code></pre><p>emp4è¿™ä¸ªè¡¨å’Œåˆšæ‰çš„emp2.csvæ–‡ä»¶çš„å­—æ®µé¡ºåºä¸ä¸€æ ·ï¼Œå­—æ®µæ•°é‡ä¹Ÿä¸ä¸€æ ·ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/30/4d/3031c7c3a5ca759a82671d42810a2a4d.jpg?wh=1076x348\" alt=\"å›¾ç‰‡\"></p><p>å¯¼å…¥æ•°æ®æ—¶ï¼Œä»¥CSVæ–‡ä»¶ä¸­å­—æ®µé¡ºåºä¸ºå‡†ï¼ŒæŒ‡å®šå­—æ®µåˆ—è¡¨ã€‚æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œç¬¬ä¸€åˆ—å¯¹åº”åˆ°emp_noå­—æ®µï¼Œç¬¬äºŒåˆ—å¯¹åº”åˆ°emp_nameå­—æ®µï¼Œç¬¬ä¸‰åˆ—å¯¹åº”åˆ°å˜é‡@emp_introã€‚ç„¶åå†ä½¿ç”¨SETï¼Œå°†è¡¨çš„gradeå­—æ®µè®¾ç½®æˆå›ºå®šå€¼10ï¼Œå°†emp_introå­—æ®µè®¾ç½®ä¸ºæ–‡ä»¶ä¸­emp_introåˆ—çš„å‰ç¼€ã€‚</p><pre><code class=\"language-go\">mysql -vvv -uuser_01 -h172.16.121.234 -pabc123 -psomepass --local-infile employees &lt;&lt;EOF\nload data local infile '/data/backup/emp2.csv' \nreplace into table emp4\ncharacter set utf8mb4\nfields terminated by ','\noptionally enclosed by '\"'\nescaped by '\\\\\\\\'\nlines terminated by '\\n'\n(emp_no, emp_name, @emp_intro)\nset grade = 10, emp_intro = substring(@emp_intro, 1, 5)\nEOF\n</code></pre><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¯¼å…¥çš„æ•°æ®æ˜¯ä¸æ˜¯ç¬¦åˆé¢„æœŸã€‚</p><pre><code class=\"language-go\">mysql&gt; select * from emp4;\n+----------+--------+-----------------+-------+\n| emp_name | emp_no | emp_intro       | grade |\n+----------+--------+-----------------+-------+\n| å¼ ä¸‰     |  10001 | ä¸€ç”ŸäºŒ,äºŒ       |    10 |\n| ææŸ     |  10002 | å¼•ç”¨ä¸€å¥å      |    10 |\n| é™ˆæŸ     |  10003 | D:\\Pi           |    10 |\n+----------+--------+-----------------+-------+\n</code></pre><h3>MySQL Shell å¹¶è¡Œå¯¼å…¥</h3><p>ä½¿ç”¨Load Dataå‘½ä»¤å¯¼å…¥ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œæ•°æ®åº“å†…éƒ¨ä½¿ç”¨äº†å•çº¿ç¨‹å¤„ç†ã€‚æœåŠ¡ç«¯æ¥æ”¶åˆ°LOAD DATA LOCAL INFILEå‘½ä»¤åï¼Œå‘å®¢æˆ·ç«¯è®¿é—®æ–‡ä»¶å†…å®¹ã€‚å®¢æˆ·ç«¯ä¾æ¬¡è¯»å–æ–‡ä»¶çš„å†…å®¹ï¼Œé€šè¿‡ç½‘ç»œå‘é€åˆ°æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯å°†ç½‘ç»œä¸­è¯»å–åˆ°çš„æ•°æ®è§£ææˆä¸€è¡Œä¸€è¡Œçš„è®°å½•ï¼Œå†è°ƒç”¨å­˜å‚¨å¼•æ“æ¥å£å†™å…¥æ•°æ®ã€‚</p><p>MySQL Shellçš„import_tableå·¥å…·æä¾›äº†å¹¶è¡Œå¯¼å…¥æ•°æ®çš„åŠŸèƒ½ï¼Œå¦‚æœä½ çš„MySQLæœåŠ¡å™¨é…ç½®æ¯”è¾ƒé«˜ï¼ŒCPUå’ŒIOæ€§èƒ½éƒ½å¾ˆå¥½ï¼Œä½¿ç”¨å¹¶è¡Œå¯¼å…¥å¯èƒ½èƒ½æé«˜å¤§è¡¨çš„å¯¼å…¥é€Ÿåº¦ã€‚</p><p>MySQL Shell Dumpå¯¼å‡ºçš„æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ç”¨import_tableæ¥å¯¼å…¥ã€‚æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œimport_tableå¯ä»¥ç›´æ¥å¯¼å…¥zstdå‹ç¼©è¿‡çš„æ–‡ä»¶ï¼Œä½†æ˜¯å¯¹äºå•ä¸ªå‹ç¼©æ–‡ä»¶æ˜¯æ— æ³•ä½¿ç”¨å¹¶è¡Œå¯¼å…¥çš„ã€‚</p><p>ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å…ˆè§£å‹æ–‡ä»¶ï¼Œå†ä½¿ç”¨import_tableæ¥å¯¼å…¥ã€‚æˆ‘ä»¬å°†bytesPerChunkè®¾ç½®ä¸º1Mï¼Œä¹Ÿå°±æ˜¯æ¯æ‰§è¡Œä¸€æ¬¡LOAD DATAå‘½ä»¤ï¼Œå°±å‘é€1Mçš„æ–‡ä»¶å†…å®¹ã€‚threadsè®¾ç½®ä¸º8ã€‚</p><pre><code class=\"language-plain\"># zstd -d employees@salaries@@0.tsv.zst\n\n# mysqlsh -u user_01 -h172.16.121.234 -psomepass --py --mysql\n\n MySQL Py &gt; util.import_table(\n     \"/data/backup/employees_dump/employees@salaries@@0.tsv\", \n     {   \n        \"schema\": \"employees\",  \n        \"table\": \"salaries_backup\",\n        \"bytesPerChunk\": \"1M\",\n        \"threads\":8\n    })\n</code></pre><p>åˆ°ç›®æ ‡æœåŠ¡å™¨ä¸Šæ‰§è¡Œshow processlistï¼Œå¯ä»¥çœ‹åˆ°æœ‰8ä¸ªä¼šè¯éƒ½åœ¨æ‰§è¡ŒLOAD DATAå‘½ä»¤ã€‚</p><pre><code class=\"language-plain\">*************************** 10. row ***************************\n     Id: 60\n   User: user_01\n   Host: mysql02:45028\n     db: employees\nCommand: Query\n   Time: 36\n  State: executing\n   Info: LOAD DATA LOCAL INFILE '/data/backup/employees_dump/employees@salaries@@0.tsv' INTO TABLE `employees\n*************************** 11. row ***************************\n     Id: 61\n   User: user_01\n   Host: mysql02:45026\n     db: employees\nCommand: Query\n   Time: 36\n  State: executing\n   Info: LOAD DATA LOCAL INFILE '/data/backup/employees_dump/employees@salaries@@0.tsv' INTO TABLE `employees\n\n......\n*************************** 17. row ***************************\n     Id: 67\n   User: user_01\n   Host: mysql02:45040\n     db: employees\nCommand: Query\n   Time: 36\n  State: executing\n   Info: LOAD DATA LOCAL INFILE '/data/backup/employees_dump/employees@salaries@@0.tsv' INTO TABLE `employees\n</code></pre><p>æŒ‡å®šç›¸åº”çš„å‚æ•°åï¼Œimport_tableä¹Ÿèƒ½ç”¨æ¥å¯¼å…¥CSVæ ¼å¼çš„æ–‡ä»¶ï¼Œå¯ä»¥çœ‹å‡ºï¼Œè¿™äº›å‚æ•°å’ŒLOAD DATAå‘½ä»¤å¯ä»¥ä¸€ä¸€å¯¹åº”èµ·æ¥ã€‚</p><pre><code class=\"language-plain\">util.import_table(\n     \"/data/backup/emp2.csv\", \n     {   \n        \"schema\": \"employees\",  \n        \"table\": \"emp4\",\n  \n        \"linesTerminatedBy\": \"\\n\",\n        \"fieldsTerminatedBy\": \",\",\n        \"fieldsEnclosedBy\": '\"',\n        \"fieldsOptionallyEnclosed\": True,\n        \"fieldsEscapedBy\": \"\\\\\",\n        \"replaceDuplicates\": True,\n        \"columns\": [\"emp_no\", \"emp_name\", 1 ],\n        \"decodeColumns\": {\n            \"grade\":11,\n            \"emp_intro\":\"substring(@1, 1, 10)\",\n        }\n    })\n\n</code></pre><pre><code class=\"language-plain\">mysql&gt; select * from emp4;\n+----------+--------+----------------------------+-------+\n| emp_name | emp_no | emp_intro                  | grade |\n+----------+--------+----------------------------+-------+\n| å¼ ä¸‰     |  10001 | ä¸€ç”ŸäºŒ,äºŒç”Ÿä¸‰,ä¸‰ç”Ÿ         |    11 |\n| ææŸ     |  10002 | å¼•ç”¨ä¸€å¥åè¨€:\"å¤©è¡Œ         |    11 |\n| é™ˆæŸ     |  10003 | D:\\Picture                 |    11 |\n+----------+--------+----------------------------+-------+\n</code></pre><h4>import_tableé€‰é¡¹</h4><p>æˆ‘æ•´ç†äº†import_tableæ”¯æŒçš„éƒ¨åˆ†é€‰é¡¹ï¼Œä¾›ä½ å‚è€ƒã€‚å®Œæ•´çš„é€‰é¡¹è¯·å‚è€ƒ<a href=\"https://dev.mysql.com/doc/mysql-shell/8.0/en/mysql-shell-utilities-parallel-table.html\">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e5/09/e5ffdea7316793cb8af235750223cd09.png?wh=1758x1536\" alt=\"å›¾ç‰‡\"></p><h2>æ€»ç»“</h2><p>è¿™ä¸€è®²æˆ‘ä»¬æ¢è®¨äº†MySQLæ•°æ®å¯¼å…¥å¯¼å‡ºçš„ä¸€äº›å·¥å…·å’Œæ–¹æ³•ï¼Œè¿™éƒ½æ˜¯å®˜æ–¹æä¾›çš„å·¥å…·ã€‚mysqldumpä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ï¼Œä½†ç”±äºæ˜¯å•çº¿ç¨‹çš„ï¼Œå¦‚æœä½ çš„æ•°æ®åº“ç‰¹åˆ«å¤§ï¼Œå¯¼å…¥æ•°æ®å¯èƒ½ä¼šéœ€è¦å¾ˆé•¿çš„æ—¶é—´ã€‚ä½ éœ€è¦æ³¨æ„ï¼Œå¯¼å‡ºæ•°æ®æ—¶æ˜¯å¦ä¼šé”è¡¨ï¼Œå°¤å…¶æ˜¯å¯¼å‡ºç”Ÿäº§ç¯å¢ƒçš„æ•°æ®åº“æ—¶ï¼Œä¸è¦å½±å“æ­£å¸¸çš„ä¸šåŠ¡è®¿é—®ã€‚</p><p>MySQL Shellçš„Dumpå’ŒLoadå·¥å…·èƒ½ä»¥å¤šçº¿ç¨‹çš„æ–¹å¼è¿è¡Œï¼Œåœ¨å¯¼å‡ºå’Œå¯¼å…¥å¤§é‡æ•°æ®æ—¶æœ‰ä¼˜åŠ¿ã€‚å½“ç„¶ï¼Œå¦‚æœä½ éœ€è¦å¤åˆ¶æ•´ä¸ªæ•°æ®åº“å®ä¾‹ï¼Œä½¿ç”¨ç‰©ç†å¤‡ä»½çš„æ–¹å¼å¯èƒ½æ€§èƒ½æ›´å¥½ï¼Œåç»­çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šåˆ†åˆ«ä»‹ç»ä½¿ç”¨xtrabackupå’Œcloneæ’ä»¶æ¥å¤åˆ¶æ•´ä¸ªåº“çš„æ–¹æ³•ã€‚</p><p>å¦‚æœä½ éœ€è¦å°†å¤§é‡æ•°æ®ä»åˆ«çš„æ•°æ®åº“è¿ç§»åˆ°MySQLï¼Œä¸€ç§å¯è¡Œçš„æ–¹æ³•æ˜¯å…ˆå°†æºåº“çš„æ•°æ®å¯¼å‡ºæˆCSVæ–‡ä»¶ï¼Œç„¶åå†ä½¿ç”¨LOAD DATAæˆ–MySQL Shellçš„import_tableå¯¼å…¥æ•°æ®ã€‚æ•°æ®å¯¼å‡ºå’Œå¯¼å…¥æ—¶ï¼Œè¿˜éœ€è¦æ³¨æ„æ–‡æœ¬æ•°æ®çš„å­—ç¬¦é›†ï¼Œå¯¼å…¥æ•°æ®åè¦æ£€æŸ¥æ˜¯å¦æœ‰ä¹±ç äº§ç”Ÿã€‚åŒæ—¶ä¹Ÿè¦æ£€æŸ¥å¯¼å…¥å‰åçš„æ•°æ®é‡æ˜¯å¦ä¸€æ ·ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>ç”±äºå…¬å¸çš„ç­–ç•¥ï¼Œéœ€è¦å°†ä¸€ä¸ªæ ¸å¿ƒä¸šåŠ¡ç³»ç»Ÿçš„Oracleæ•°æ®åº“è¿ç§»åˆ°MySQLã€‚è¿™ä¸ªOracleæ•°æ®åº“å¤§æ¦‚æœ‰1Tæ•°æ®ï¼Œè¿ç§»è¿‡ç¨‹ä¸­ï¼Œè¦å°½å¯èƒ½ç¼©çŸ­ä¸šåŠ¡åœæœºçš„æ—¶é—´ï¼Œä¸šåŠ¡æ–¹èƒ½æ¥å—çš„æœ€å¤§åœæœºæ—¶é—´åœ¨1ï½2å°æ—¶ä¹‹å†…ã€‚è¯·ä½ è®¾è®¡ä¸€ä¸ªæ–¹æ¡ˆï¼Œå°†æ•°æ®å¹³æ»‘åœ°è¿ç§»åˆ°MySQLã€‚ä½ éœ€è¦è€ƒè™‘å…¨é‡æ•°æ®å¦‚ä½•è¿ç§»ï¼Œä¸šåŠ¡è¿è¡ŒæœŸé—´æ–°äº§ç”Ÿçš„æ•°æ®å¦‚ä½•è¿ç§»ã€‚</p><p>æœŸå¾…ä½ çš„æ€è€ƒï¼Œæ¬¢è¿åœ¨ç•™è¨€åŒºä¸­ä¸æˆ‘äº¤æµã€‚å¦‚æœä»Šå¤©çš„è¯¾ç¨‹è®©ä½ æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿è½¬å‘ç»™æœ‰éœ€è¦çš„æœ‹å‹ã€‚æˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼</p>","neighbors":{"left":{"article_title":"09ï½œMySQLå¦‚ä½•å¿«é€Ÿå¯¼å…¥å¯¼å‡ºæ•°æ®ï¼Ÿï¼ˆä¸Šï¼‰","id":804980},"right":{"article_title":"11ï½œè¡¨å¤ªå¤§äº†ï¼Œä¿®æ”¹è¡¨ç»“æ„å¤ªæ…¢æ€ä¹ˆè§£å†³ï¼Ÿï¼ˆä¸Šï¼‰","id":806938}},"comments":[{"had_liked":false,"id":394109,"user_name":"123","can_delete":false,"product_type":"c1","uid":2662872,"ip_address":"æµ™æ±Ÿ","ucode":"5A343B568B9524","user_header":"https://static001.geekbang.org/account/avatar/00/28/a1/d8/42252c48.jpg","comment_is_top":false,"comment_ctime":1725851552,"is_pvip":false,"replies":[{"id":143092,"content":"å¦‚æœæºåº“æ˜¯MySQLï¼Œå¯ä»¥æŒ‰è¿™ä¸ªæ€è·¯æ¥åšã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":3898827,"ctime":1726057489,"ip_address":"æµ™æ±Ÿ","comment_id":394109,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100799401,"comment_content":"æ€è€ƒé¢˜ï¼š\n\nå¯ä»¥é€šè¿‡Oracleå·¥å…·å¤šçº¿ç¨‹å¯¼å‡ºæ•´ä¸ªæ•°æ®åº“å®ä¾‹ï¼Œè®¾ç½®å¼€å¯äº‹åŠ¡ï¼ŒçŸ­æš‚çš„è·å–å…¨å±€é”åè¿›è¡Œå¿«ç…§å¯¼å‡ºï¼Œå°†æ•°æ®å¯¼å‡ºåˆ°æŒ‡å®šç›®å½•ä¸­ï¼Œå¹¶ä¸”æ¯ä¸ªåº“è¡¨çš„ddlå’Œæ•°æ®éƒ½æ˜¯åˆ†å¼€å­˜æ”¾ï¼Œæ–¹ä¾¿åé¢çš„å¹¶è¡Œå¯¼å…¥ï¼›\n\nå¯¼å…¥è¿‡ç¨‹ä¸­ä½¿ç”¨import_tableï¼ŒæŒ‡å®šçº¿ç¨‹æ•°ï¼Œå…·ä½“çš„çº¿ç¨‹æ•°æ®è¿˜æ˜¯è¦æ ¹æ®ç›®æ ‡æ•°æ®åº“çš„å¹¶å‘å†™æ€§èƒ½æ¥ç¡®å®šï¼Œå°½å¯èƒ½çš„ç¼©çŸ­æ—¶é—´;\n\nå¯¹äºå¯¼å‡ºå¯¼å…¥è¿‡ç¨‹ä¸­çš„å¢é‡æ•°æ®ï¼Œå¯ä»¥åœ¨å¯¼å‡ºå¼€å§‹çš„æ—¶å€™è®°å½•binlogä½ç½®æˆ–GTIDçš„å…¨å±€äº‹åŠ¡idï¼Œå¯¼å…¥å¢é‡æ•°æ®çš„æ—¶å€™å¯ä»¥é€šè¿‡binlogä½ç½®å’ŒGTIDæ¥æ¢å¤å¢é‡æ•°æ®ï¼Œä¸”å¯¼å‡ºæ•°æ®çš„è¿‡ç¨‹å°½é‡åœ¨ç”¨æˆ·é‡å°‘çš„æ—¶é—´æ“ä½œï¼Œç¡®ä¿å¢é‡çš„æ•°æ®å°½å¯èƒ½å°‘ï¼ŒåŒæ—¶æ¥å‡å°‘å¯¼å…¥å¢é‡æ•°æ®æ—¶ä¸šåŠ¡åº“çš„åœæœºæ—¶é—´ï¼›","like_count":2,"discussions":[{"author":{"id":3898827,"avatar":"https://static001.geekbang.org/account/avatar/00/3b/7d/cb/fa3dae58.jpg","nickname":"ä¿Šè¾¾","note":"","ucode":"F79BF9651AD086","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":651011,"discussion_content":"å¦‚æœæºåº“æ˜¯MySQLï¼Œå¯ä»¥æŒ‰è¿™ä¸ªæ€è·¯æ¥åšã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1726057490,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":394140,"user_name":"ls","can_delete":false,"product_type":"c1","uid":1001037,"ip_address":"ä¸Šæµ·","ucode":"C18E208B1DFDA7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/46/4d/161f3779.jpg","comment_is_top":false,"comment_ctime":1725937885,"is_pvip":true,"replies":[{"id":143090,"content":"å…¨é‡æ•°æ®é‡‡ç”¨Oracleå¯¼å‡ºcsvï¼Œç„¶åå†å¯¼å…¥åˆ°MySQLï¼Œæ˜¯ä¸€ç§æ¯”è¾ƒé«˜æ•ˆçš„æ•°æ®è¿ç§»æ–¹æ³•ã€‚\nå¢é‡æ•°æ®éœ€è¦å¦å¤–æƒ³åŠæ³•ï¼Œæ¯”å¦‚åº”ç”¨ç¨‹åºåŒå†™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":3898827,"ctime":1726057183,"ip_address":"æµ™æ±Ÿ","comment_id":394140,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100799401,"comment_content":"ä¹Ÿå¯ä»¥çœ‹æ•°æ®å˜åŒ–ç¨‹åº¦ï¼Œå¦‚æœå†å²æ•°æ®å‡ ä¹ä¸ä¼šæ”¹å˜ï¼Œå¯ä»¥ç›´æ¥oracle å¹¶å‘å¯¼å‡ºcsv ï¼Œç„¶åmysql  å¹¶å‘å¯¼å…¥csvï¼Œæœ€åæ£€æŸ¥æ•°æ®","like_count":0,"discussions":[{"author":{"id":3898827,"avatar":"https://static001.geekbang.org/account/avatar/00/3b/7d/cb/fa3dae58.jpg","nickname":"ä¿Šè¾¾","note":"","ucode":"F79BF9651AD086","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":651008,"discussion_content":"å…¨é‡æ•°æ®é‡‡ç”¨Oracleå¯¼å‡ºcsvï¼Œç„¶åå†å¯¼å…¥åˆ°MySQLï¼Œæ˜¯ä¸€ç§æ¯”è¾ƒé«˜æ•ˆçš„æ•°æ®è¿ç§»æ–¹æ³•ã€‚\nå¢é‡æ•°æ®éœ€è¦å¦å¤–æƒ³åŠæ³•ï¼Œæ¯”å¦‚åº”ç”¨ç¨‹åºåŒå†™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1726057183,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":394139,"user_name":"ls","can_delete":false,"product_type":"c1","uid":1001037,"ip_address":"ä¸Šæµ·","ucode":"C18E208B1DFDA7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/46/4d/161f3779.jpg","comment_is_top":false,"comment_ctime":1725937804,"is_pvip":true,"replies":[{"id":143089,"content":"å¯ä»¥çš„ã€‚\nOGGæ˜¯ä¸šç•Œç”¨å¾—æ¯”è¾ƒå¤šçš„å®æ—¶åŒæ­¥å·¥å…·ï¼Œå¯¹Oracleçš„æ”¯æŒæ¯”è¾ƒå¼ºå¤§ã€‚ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":3898827,"ctime":1726056829,"ip_address":"æµ™æ±Ÿ","comment_id":394139,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100799401,"comment_content":"å€Ÿç”¨ogg å…ˆå®æ—¶åŒæ­¥ Oracleå’ŒMySQLçš„æ•°æ®ï¼Œåˆ‡æ¢çª—å£æ—¶é—´ç”¨æ¥æ£€æµ‹æ•°æ®åŒæ­¥æ˜¯å¦æ­£ç¡®ã€‚","like_count":0,"discussions":[{"author":{"id":3898827,"avatar":"https://static001.geekbang.org/account/avatar/00/3b/7d/cb/fa3dae58.jpg","nickname":"ä¿Šè¾¾","note":"","ucode":"F79BF9651AD086","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":651007,"discussion_content":"å¯ä»¥çš„ã€‚\nOGGæ˜¯ä¸šç•Œç”¨å¾—æ¯”è¾ƒå¤šçš„å®æ—¶åŒæ­¥å·¥å…·ï¼Œå¯¹Oracleçš„æ”¯æŒæ¯”è¾ƒå¼ºå¤§ã€‚ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1726056830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":394107,"user_name":"Geek_0126","can_delete":false,"product_type":"c1","uid":3952196,"ip_address":"æµ™æ±Ÿ","ucode":"2916F7FB3F6D71","user_header":"https://static001.geekbang.org/account/avatar/00/3c/4e/44/49b29792.jpg","comment_is_top":false,"comment_ctime":1725850190,"is_pvip":false,"replies":[{"id":143091,"content":"å¦‚æœæºåº“æ˜¯MySQLï¼Œå®æ—¶å¢é‡çš„æ•°æ®å¯ä»¥é‡‡ç”¨ä¸€äº›å¼€æºçš„æ–¹æ¡ˆæ¥å¤„ç†ã€‚\nå¦‚æœæºåº“æ˜¯Oracleï¼Œå®æ—¶å¢é‡æ•°æ®å¯ä»¥é‡‡ç”¨ä¸€äº›å•†ä¸šåŒ–çš„äº§å“æ¥åŒæ­¥ï¼Œæˆ–è€…åœ¨åº”ç”¨å±‚åŒå†™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":3898827,"ctime":1726057320,"ip_address":"æµ™æ±Ÿ","comment_id":394107,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100799401,"comment_content":"å¼‚æ„æ•°æ®æºä¹‹é—´çš„åŒæ­¥é—®é¢˜ï¼Œå°±è¦å€ŸåŠ©åŒæ­¥å·¥å…·äº†ï¼Œä¾‹å¦‚DataXã€cloudcanalç­‰ï¼Œå¯ä»¥å…ˆè¿›è¡Œå…¨é‡è¿ç§»ï¼Œç„¶åå†å¼€å¯å¢é‡åŒæ­¥ã€‚ä¸è¿‡å…¶ä¸­éœ€è¦æ³¨æ„çš„ç»†èŠ‚å¤ªå¤šäº†ï¼Œæ¯”å¦‚æ•°æ®ç±»å‹åŠå„ç§æ•°æ®åº“å¯¹è±¡ä¹‹é—´çš„è½¬æ¢ã€‚","like_count":0,"discussions":[{"author":{"id":3898827,"avatar":"https://static001.geekbang.org/account/avatar/00/3b/7d/cb/fa3dae58.jpg","nickname":"ä¿Šè¾¾","note":"","ucode":"F79BF9651AD086","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":651009,"discussion_content":"å¦‚æœæºåº“æ˜¯MySQLï¼Œå®æ—¶å¢é‡çš„æ•°æ®å¯ä»¥é‡‡ç”¨ä¸€äº›å¼€æºçš„æ–¹æ¡ˆæ¥å¤„ç†ã€‚\nå¦‚æœæºåº“æ˜¯Oracleï¼Œå®æ—¶å¢é‡æ•°æ®å¯ä»¥é‡‡ç”¨ä¸€äº›å•†ä¸šåŒ–çš„äº§å“æ¥åŒæ­¥ï¼Œæˆ–è€…åœ¨åº”ç”¨å±‚åŒå†™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1726057320,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]}]}