{"id":84933,"title":"37丨数据采集实战：如何自动化运营微博？","content":"<p>今天我来带你做一个数据采集的实战。之前我讲到可以使用第三方工具，比如八爪鱼做数据采集，也可以自己编写脚本，比如使用Python。编写Python做数据采集和自动化最大的好处就是可控性强，每个步骤都可以调试，而且可以找到问题所在并一一突破。</p><p>今天我就带你使用Python自动化运营微博。关于今天的学习，希望你能达成以下的3个学习目标：</p><ol>\n<li>\n<p>掌握Selenium自动化测试工具，以及元素定位的方法；</p>\n</li>\n<li>\n<p>学会编写微博自动化功能模块：加关注，写评论，发微博；</p>\n</li>\n<li>\n<p>对微博自动化做自我总结。</p>\n</li>\n</ol><h2>Selenium自动化测试工具</h2><p>当我们做Web自动化测试的时候，可以选用Selenium或者Puppeteer工具。我在<a href=\"https://time.geekbang.org/column/article/76001\">第10篇</a>的时候简单介绍过Selenium这个工具，你可以再回顾一下。Puppeteer通过控制无头Chrome来完成浏览器的工作。这两个工具之间的区别在于：Selenium更关注程序执行的流程本身，比如找到指定的元素，设置相应的值，然后点击操作。而Puppeteer是浏览者的视角，比如光标移动到某个元素上，键盘输入某个内容等。</p><p>今天我们继续使用Selenium工具自动化模拟浏览器，重点是学习对元素的定位。在第10篇讲到Selenium WebDriver的使用时，重点是对HTML进行获取和解析，然后通过HTML中的XPath进行提取，读取相应的内容。</p><!-- [[[read_end]]] --><p>在今天的实战里，我们需要在微博上自动登录，加关注，发评论，发微博等，这些操作都需要在浏览器上完成，所以我们可以使用Webdriver自带的元素定位功能。</p><p>如果我们想定位一个元素，可以通过id、name、class、tag、链接上的全部文本、链接上的部分文本、XPath或者CSS进行定位，在Selenium Webdriver中也提供了这8种方法方便我们定位元素。</p><ol>\n<li>\n<p>通过id定位：我们可以使用find_element_by_id()函数。比如我们想定位id=loginName的元素，就可以使用browser.find_element_by_id(“loginName”)。</p>\n</li>\n<li>\n<p>通过name定位：我们可以使用find_element_by_name()函数，比如我们想要对name=key_word的元素进行定位，就可以使用browser.find_element_by_name(“key_word”)。</p>\n</li>\n<li>\n<p>通过class定位：可以使用find_element_by_class_name()函数。</p>\n</li>\n<li>\n<p>通过tag定位：使用find_element_by_tag_name()函数。</p>\n</li>\n<li>\n<p>通过link上的完整文本定位：使用find_element_by_link_text()函数。</p>\n</li>\n<li>\n<p>通过link上的部分文本定位：使用find_element_by_partial_link_text()函数。有时候超链接上的文本很长，我们通过查找部分文本内容就可以定位。</p>\n</li>\n<li>\n<p>通过XPath定位：使用find_element_by_xpath()函数。使用XPath定位的通用性比较好，因为当id、name、class为多个，或者元素没有这些属性值的时候，XPath定位可以帮我们完成任务。</p>\n</li>\n<li>\n<p>通过CSS定位：使用find_element_by_css_selector()函数。CSS定位也是常用的定位方法，相比于XPath来说更简洁。</p>\n</li>\n</ol><p>在我们获取某个元素之后，就可以对这个元素进行操作了，对元素进行的操作包括：</p><ol>\n<li>清空输入框的内容：使用clear()函数；</li>\n<li>在输入框中输入内容：使用send_keys(content)函数传入要输入的文本；</li>\n<li>点击按钮：使用click()函数，如果元素是个按钮或者链接的时候，可以点击操作；</li>\n<li>提交表单：使用submit()函数，元素对象为一个表单的时候，可以提交表单；</li>\n</ol><p>了解WebDriver元素定位和功能之后，我们模拟一下微博的自动登录，具体代码如下：</p><pre><code>from selenium import webdriver\nimport time\nbrowser = webdriver.Chrome()\n# 登录微博\ndef weibo_login(username, password):\n     # 打开微博登录页\n     browser.get('https://passport.weibo.cn/signin/login')\n     browser.implicitly_wait(5)\n     time.sleep(1)\n     # 填写登录信息：用户名、密码\n     browser.find_element_by_id(&quot;loginName&quot;).send_keys(username)\n     browser.find_element_by_id(&quot;loginPassword&quot;).send_keys(password)\n     time.sleep(1)\n     # 点击登录\n     browser.find_element_by_id(&quot;loginAction&quot;).click()\n     time.sleep(1)\n# 设置用户名、密码\nusername = 'XXXX'\npassword = &quot;XXXX&quot;\nweibo_login(username, password)\n</code></pre><p>需要说明的是，你需要填写自己的微博用户名和密码（对应username和password）。</p><p>通过HTML标签分析，我们能看到id=loginName和id=loginPassword对应着用户名和密码的输入框，获取这两个元素之后，使用send_keys()设置用户名和密码，然后通过id=loginAction找到登录按钮，获取该元素，使用click()函数点击提交。</p><p>这样我们就完成了微博的自动化登录，具体效果如下：</p><p><img src=\"https://static001.geekbang.org/resource/image/38/71/380827a5713e41896dfe5436a4589471.gif?wh=600*620\" alt=\"\"></p><h2>微博自动化运营：加关注，写评论，发微博</h2><p>我们已经基本了解了Selenium WebDriver是如何获取指定元素，并且对元素进行操作的。下面我们撰写一下微博自动加关注，写评论，发微博的功能代码，具体模块如下：</p><p><img src=\"https://static001.geekbang.org/resource/image/61/4e/61ed79746527371c7bf1c173355f6c4e.jpg?wh=2328*788\" alt=\"\"><br>\n我们刚才完成了weibo_login微博登录模块的编写，现在来看下加关注的功能，具体代码如下：</p><pre><code># 添加指定的用户\ndef add_follow(uid):\n    browser.get('https://m.weibo.com/u/'+str(uid))\n    time.sleep(1)\n    #browser.find_element_by_id(&quot;follow&quot;).click()\n    follow_button = browser.find_element_by_xpath('//div[@class=&quot;m-add-box m-followBtn&quot;]')\n    follow_button.click()\n    time.sleep(1)\n    # 选择分组\n    group_button = browser.find_element_by_xpath('//div[@class=&quot;m-btn m-btn-white m-btn-text-black&quot;]')\n    group_button.click()\n    time.sleep(1)\n# 每天学点心理学UID\nuid = '1890826225' \nadd_follow(uid)\n</code></pre><p>这里有两点你需要注意。</p><p>第一点是如何找到用户的UID呢？</p><p>在微博中，用户是用UID做唯一标识的。代码中我随机指定了一个UID，你也可以指定其他的UID。那么如何获取用户的UID的呢？</p><p>你可以点击任何一个微博用户，查看他的URL链接，比如链接是<a href=\"https://weibo.com/u/5020181423\">https://weibo.com/u/5020181423</a> ，那么u后面的数字5020181423即为用户的UID。你也可能遇到<a href=\"https://weibo.com/ixinli\">https://weibo.com/ixinli</a>（每天学点心理学）这样的链接情况，那么通过查看他的粉丝即可以显示出UID，比如这个微博的粉丝链接是<a href=\"https://weibo.com/1890826225/fans\">https://weibo.com/1890826225/fans</a>，那么UID对应的就是1890826225。</p><p>第二个需要注意的是使用XPath定位元素定位。</p><p>我们如何找到“关注”这个按钮的元素标识呢？在Chrome浏览器中，在“关注”按钮用鼠标右键点击，选择“检查”查看这个元素对应的代码。通过分析，你能看到这个元素的div标签中的class属性为m-add-box m-followBtn，那么你可以通过find_element_by_xpath(’//div[@class=“m-add-box m-followBtn”]’)获取这个元素。关注之后，程序会弹出选择分组的页面，如下所示。</p><p>通过同样的方法，你可以查看“取消”这个按钮对应的HTML标签特征，然后通过find_element_by_xpath定位，使用click()函数提交。这样我们就关注了一个指定的用户。</p><p><img src=\"https://static001.geekbang.org/resource/image/8e/0a/8ed67303e83dd8e7aee9338802c2cb0a.png?wh=880*1189\" alt=\"\"><br>\n接下来，我们继续完成写评论和发微博的模块代码：</p><pre><code># 给指定某条微博添加内容\ndef add_comment(weibo_url, content):\n    browser.get(weibo_url)\n    browser.implicitly_wait(5)\n    content_textarea = browser.find_element_by_css_selector(&quot;textarea.W_input&quot;).clear()\n    content_textarea = browser.find_element_by_css_selector(&quot;textarea.W_input&quot;).send_keys(content)\n    time.sleep(2)\n    comment_button = browser.find_element_by_css_selector(&quot;.W_btn_a&quot;).click()\n    time.sleep(1)\n \n# 发文字微博\ndef post_weibo(content):\n    # 跳转到用户的首页\n    browser.get('https://weibo.com')\n    browser.implicitly_wait(5)\n    # 点击右上角的发布按钮\n    post_button = browser.find_element_by_css_selector(&quot;[node-type='publish']&quot;).click()\n    # 在弹出的文本框中输入内容\n    content_textarea = browser.find_element_by_css_selector(&quot;textarea.W_input&quot;).send_keys(content)\n    time.sleep(2)\n    # 点击发布按钮\n    post_button = browser.find_element_by_css_selector(&quot;[node-type='submit']&quot;).click()\n    time.sleep(1)\n# 给指定的微博写评论\nweibo_url = 'https://weibo.com/1890826225/HjjqSahwl'\ncontent = 'Gook Luck!好运已上路！'\n# 自动发微博\ncontent = '每天学点心理学'\npost_weibo(content)\n</code></pre><p>这个环节里，同样也有一些需要说明的地方。</p><p>如何找到某条微博的链接呢？你可以在某个用户微博页面中点击时间的链接，这样就可以获取这条微博的链接。</p><p><img src=\"https://static001.geekbang.org/resource/image/63/a9/633528f33648263152cd92b353030ba9.png?wh=1728*474\" alt=\"\"><br>\n如何定位评论区中输入框元素的位置呢？</p><p>我们将鼠标移动到评论框中，在Chrome浏览器中点击右键“查看”，可以看到这个textarea的class是W_input，使用find_element_by_css_selector函数进行定位，然后通过send_keys设置内容。</p><p>最后就是发微博的流程。我们可以观察到点击微博页面的右上角的按钮后，会弹出一个发微博的文本框，设置好内容，点击发送即可。发微博的函数和写评论的代码类似，使用find_element_by_css_selector()函数定位，通过send_keys()设置内容的设置，最后通过click()发送。</p><p>上面的代码你可以自己模拟下，在实际运行过程中，你可能会遇到各种情况，比如下面这种情况：</p><p><img src=\"https://static001.geekbang.org/resource/image/14/04/1453a3253b24aba642b6bf477b5add04.png?wh=950*706\" alt=\"\"><br>\n微博自动化运营是一个系统的工程，需要考虑到各种情况，比如相同的内容发布需要间隔10分钟以上；关注了一个用户之后，就无法对他二次关注，可以判断是否已经关注过，再关注操作；因为操作频繁导致需要输入验证码的情况等。</p><p>另外，微博自动化运营只是自动化运营的开始，实际上在微信上我们也可以做同样的操作。比如监听微信群的消息，自动发微信等。实际要考虑的问题比微博的要复杂。</p><h2>总结</h2><p>今天我带你进行了微博自动化运营的实战，通过实战你对使用Selenium WebDriver应该更有了解，包括如何定位指定的元素，对元素进行各种操作等。同时我们使用了implicitly_wait函数以及time.sleep()函数让浏览器和程序等待一段时间，完成数据加载之后再进行后续的操作，这样就避免了数据没有加载完，导致获取不到指定元素的情况。</p><p>通过三个模块（加关注、写评论、发微博）的编写，你能了解如何使用工具完成自动化的操作。在实际的过程中，可能会遇到各种复杂情况，这些都需要你在运行过程中慢慢体会。</p><p>自动化运营是个细致的活儿，我在之前的加餐文章中也提到过。如果真的想要实现自动化，还需要解决反垃圾的清理问题等，你可以再回顾一下。</p><p><img src=\"https://static001.geekbang.org/resource/image/33/d5/33ee64c5a434e1a7093594499e9c05d5.png?wh=1728*1029\" alt=\"\"><br>\n最后留两道题吧。今天我们对微博加关注这一模块编写了代码，同样我们也可能会对某个指定用户的UID做取消关注的操作，请你使用今天讲的元素定位和操作功能，编写相应的代码。</p><p>通过今天自动化测试工具的学习，你有怎样的收获和总结呢？</p><p>欢迎在评论区与我分享你的答案，也欢迎点击”请朋友读“，把这篇文章分享给你的朋友或者同事，一起实战交流一下。</p><p></p>","comments":[{"had_liked":false,"id":74139,"user_name":"牛奶布丁","can_delete":false,"product_type":"c1","uid":1368494,"ip_address":"","ucode":"38994AEF4A6E78","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/KQpJHrQFQnezpyMlffXh9m9Dh6o8Z2yZXw8lEN73TyltgMGgDjhAz2cTbMpe2jgwWzkPr5Ribf2LgIDOE77kLdA/132","comment_is_top":false,"comment_ctime":1552114307,"is_pvip":false,"replies":[{"id":64444,"content":"这个最好用第三方工具，比如八爪鱼这种","user_name":"作者回复","user_name_real":"cy","uid":1306094,"ctime":1577619364,"ip_address":"","comment_id":74139,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100021701,"comment_content":"老师，微博登录时需要验证码怎么处理呢？","like_count":16},{"had_liked":false,"id":73984,"user_name":"梁林松","can_delete":false,"product_type":"c1","uid":1144766,"ip_address":"","ucode":"FA032C3B4E245E","user_header":"https://static001.geekbang.org/account/avatar/00/11/77/be/1f2409e8.jpg","comment_is_top":false,"comment_ctime":1552052887,"is_pvip":false,"replies":[{"id":64456,"content":"对 XPath Helper很好用","user_name":"作者回复","user_name_real":"cy","uid":1306094,"ctime":1577619497,"ip_address":"","comment_id":73984,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100021701,"comment_content":"给打家介绍一个XPath的小窍门： 下载 XPath Helper插件，安装后 在网页上选取想要提取的元素， 点击右键 选中 检查 然后 开发者工具自动打开 你可以看到 HTML代码 ，选中然后再次点击右键，选中copy 里的 copy to xpath这样就得到了xpath的值了。","like_count":13,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442368,"discussion_content":"对 XPath Helper很好用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577619497,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1763091,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e7/13/6f76ada6.jpg","nickname":"大龄程序员在线治掉发","note":"","ucode":"A246D4E4683589","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575292,"discussion_content":"有空试一下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654732736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1617284,"avatar":"","nickname":"Geek_78a41a","note":"","ucode":"5BF45C53211CA5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":22931,"discussion_content":"firefox里有个插件叫xpath finder，也很好用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569728699,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1464176,"avatar":"","nickname":"周志翔","note":"","ucode":"22866A9A9650E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2659,"discussion_content":"我的好像工具不会自动打开","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563848513,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73841,"user_name":"一语中的","can_delete":false,"product_type":"c1","uid":1320112,"ip_address":"","ucode":"E1A0EFCEAD83B4","user_header":"https://static001.geekbang.org/account/avatar/00/14/24/b0/a6e0b03a.jpg","comment_is_top":false,"comment_ctime":1552014010,"is_pvip":false,"replies":[{"id":64455,"content":"不错的图书分享","user_name":"作者回复","user_name_real":"cy","uid":1306094,"ctime":1577619486,"ip_address":"","comment_id":73841,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100021701,"comment_content":"数据思维和算法是我的薄弱项，还在一节一节敲之前例子中的代码，但selenium和爬虫是强项，8种定位方法结合WebDriverWait，再加上ActionChains中的方法和js基本天天用。\n虽然学的有点虐(除了本课程最近同时在补《利用python进行数据分析》《精益数据分析》)但是很开心~~~","like_count":11,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442303,"discussion_content":"不错的图书分享","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577619486,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74117,"user_name":"Geek_hve78z","can_delete":false,"product_type":"c1","uid":1015045,"ip_address":"","ucode":"386803B8FC2DD5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7d/05/4bad0c7c.jpg","comment_is_top":false,"comment_ctime":1552106535,"is_pvip":false,"replies":[{"id":64445,"content":"Good Job","user_name":"作者回复","user_name_real":"cy","uid":1306094,"ctime":1577619374,"ip_address":"","comment_id":74117,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100021701,"comment_content":"取消关注时，必须登录账户\n______________\n#模拟微博自动登录\nfrom selenium import webdriver\nimport time\nbrowser=webdriver.Chrome(&#39;.&#47;chromedriver&#39;)\n\n# 登陆微博\ndef weibo_login(username,password):\n    # 打开微博登录页\n    browser.get(&#39;https:&#47;&#47;passport.weibo.cn&#47;signin&#47;login&#39;)\n    browser.implicitly_wait(5)\n    time.sleep(1)\n    # 填写登录信息：用户名、密码\n    browser.find_element_by_id(&quot;loginName&quot;).send_keys(username)\n    browser.find_element_by_id(&quot;loginPassword&quot;).send_keys(password)\n    time.sleep(1)\n    # 点击登录\n    browser.find_element_by_id(&quot;loginAction&quot;).click()\n    time.sleep(1)\n    \n# 设置用户名、密码\nusername=&#39;**********&#39;\npassword=&#39;*********&#39;\nweibo_login(username,password)\n\n\n\n# 取消指定的用户\ndef out_follow(uid):\n    browser.get(&#39;https:&#47;&#47;m.weibo.cn&#47;u&#47;&#39;+str(uid))\n    time.sleep(1)\n    #browser.find_element_by_id(&quot;follow&quot;).click()\n    out_follow_button=browser.find_element_by_xpath(&#39;&#47;&#47;*[@id=&quot;app&quot;]&#47;div[1]&#47;div[4]&#47;div[2]&#47;div&#47;div[1]&#47;div&#47;span&#47;h4&#39;)\n    out_follow_button.click()\n    time.sleep(1)\n    \n    # 点击取消关注\n    out_button1=browser.find_element_by_xpath(&#39;&#47;&#47;*[@id=&quot;app&quot;]&#47;div[1]&#47;div[4]&#47;div[2]&#47;div&#47;div[1]&#47;div&#47;div&#47;ul&#47;li[2]&#47;div&#47;h4&#39;)\n    out_button1.click()\n    \n    #再次确认取消关注\n    out_button2=browser.find_element_by_xpath(&#39;&#47;&#47;*[@id=&quot;app&quot;]&#47;div[2]&#47;div[1]&#47;div[2]&#47;footer&#47;div[2]&#47;a&#39;)\n    out_button2.click()\n    time.sleep(1)\n# 每天学点心理学 UID\nuid=&#39;1890826225&#39;\nout_follow(uid)\n","like_count":8,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442303,"discussion_content":"不错的图书分享","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577619486,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73982,"user_name":"志","can_delete":false,"product_type":"c1","uid":1307922,"ip_address":"","ucode":"805696CC72A0E2","user_header":"https://static001.geekbang.org/account/avatar/00/13/f5/12/a5383fff.jpg","comment_is_top":false,"comment_ctime":1552052776,"is_pvip":false,"replies":[{"id":64448,"content":"Good Job","user_name":"作者回复","user_name_real":"cy","uid":1306094,"ctime":1577619394,"ip_address":"","comment_id":73982,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100021701,"comment_content":"课后练习取消关注模块：\n# 取关指定的用户\ndef unfollow(uid):\n    browser.get(&#39;https:&#47;&#47;m.weibo.com&#47;u&#47;&#39;+str(uid))\n    time.sleep(1)\n    unfollow_button = browser.find_element_by_xpath(&#39;&#47;&#47;*[@id=&quot;app&quot;]&#47;div[1]&#47;div[4]&#47;div[2]&#47;div&#47;div[1]&#47;div&#39;)\n    unfollow_button.click()\n    time.sleep(1)\n    # 选择取消关注\n    uf_button = browser.find_element_by_xpath(&#39;&#47;&#47;*[@id=&quot;app&quot;]&#47;div[1]&#47;div[4]&#47;div[2]&#47;div&#47;div[1]&#47;div&#47;div&#47;ul&#47;li[2]&#47;div&#39;)\n    uf_button.click()\n    time.sleep(1)\n    # 确定取消\n    confirm_button = browser.find_element_by_xpath(&#39;&#47;&#47;*[@id=&quot;app&quot;]&#47;div[2]&#47;div[1]&#47;div[2]&#47;footer&#47;div[2]&#47;a&#39;)\n    confirm_button.click()\n    time.sleep(1)\n    \n# 每天学点心理学 UID\nuid = &#39;1890826225&#39; \nunfollow(uid)","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442454,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577619374,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":188993,"user_name":"Untitled","can_delete":false,"product_type":"c1","uid":1039464,"ip_address":"","ucode":"8DD6ABA3E81A2E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/dc/68/006ba72c.jpg","comment_is_top":false,"comment_ctime":1584442898,"is_pvip":false,"replies":[{"id":104359,"content":"评论也可以尝试哦。原理相似，开发者工具中找到在源码中定位它的标签或属性，就可以爬取到想要的信息。","user_name":"作者回复","user_name_real":"cy","uid":1306094,"ctime":1617904851,"ip_address":"","comment_id":188993,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100021701,"comment_content":"相对于发微博和加关注，更多需求是爬取评论","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442367,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577619394,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129335,"user_name":"Lisa","can_delete":false,"product_type":"c1","uid":1622750,"ip_address":"","ucode":"9879032355DC55","user_header":"https://static001.geekbang.org/account/avatar/00/18/c2/de/98cd7728.jpg","comment_is_top":false,"comment_ctime":1567089913,"is_pvip":false,"replies":[{"id":62739,"content":"元素定位的问题","user_name":"作者回复","user_name_real":"cy","uid":1306094,"ctime":1577087767,"ip_address":"","comment_id":129335,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100021701,"comment_content":"selenium.common.exceptions.NoSuchElementException: Message: no such element: Unable to locate element: {&quot;method&quot;:&quot;css selector&quot;,&quot;selector&quot;:&quot;textarea.W_input&quot;}\n  (Session info: chrome=76.0.3809.132)\n这个报错怎么处理？？？","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465408,"discussion_content":"元素定位的问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577087767,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1622750,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c2/de/98cd7728.jpg","nickname":"Lisa","note":"","ucode":"9879032355DC55","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6877,"discussion_content":"解决了，这个错误是因为选择器找错了（话说对于小白而言真的好难找-_-||）","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1567151856,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":116420,"user_name":"周志翔","can_delete":false,"product_type":"c1","uid":1464176,"ip_address":"","ucode":"22866A9A9650E6","user_header":"","comment_is_top":false,"comment_ctime":1563848289,"is_pvip":false,"replies":[{"id":63643,"content":"有时候网站样式变化了，xpath也需要调整","user_name":"作者回复","user_name_real":"cy","uid":1306094,"ctime":1577526297,"ip_address":"","comment_id":116420,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100021701,"comment_content":"可能是这个网站用的比较多了，xpath定位变了","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459532,"discussion_content":"有时候网站样式变化了，xpath也需要调整","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577526297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":88826,"user_name":"滢","can_delete":false,"product_type":"c1","uid":1221511,"ip_address":"","ucode":"971A6F20AF3F9A","user_header":"https://static001.geekbang.org/account/avatar/00/12/a3/87/c415e370.jpg","comment_is_top":false,"comment_ctime":1556008676,"is_pvip":false,"replies":[{"id":64226,"content":"还是可以登录的，你也可以考虑用八爪鱼试试","user_name":"作者回复","user_name_real":"cy","uid":1306094,"ctime":1577614905,"ip_address":"","comment_id":88826,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100021701,"comment_content":"一直提示这个问题  driver.find_elements_by_css_selector(&quot;[node-type=&#39;publish&#39;]&quot;).click()\nAttributeError: &#39;list&#39; object has no attribute &#39;click&#39;   老师能帮忙看下嘛？ \n另外，一直在刷一直在刷 微博不让登录来，课后练习后面补上","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459532,"discussion_content":"有时候网站样式变化了，xpath也需要调整","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577526297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82717,"user_name":"随便讲两句","can_delete":false,"product_type":"c1","uid":1015782,"ip_address":"","ucode":"76682D0AB87DE1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7f/e6/c8a69b20.jpg","comment_is_top":false,"comment_ctime":1554283643,"is_pvip":false,"replies":[{"id":64328,"content":"Good Sharing","user_name":"作者回复","user_name_real":"cy","uid":1306094,"ctime":1577616948,"ip_address":"","comment_id":82717,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100021701,"comment_content":"关注&#47;取消关注用 [ https:&#47;&#47;m.weibo.cn&#47;profile&#47;:uid ] 这个页面也很方便。\n\n# 取消关注\ndef unfollow(uid):\n    browser.get(&#39;https:&#47;&#47;m.weibo.cn&#47;profile&#47;&#39; + str(uid))\n    browser.implicitly_wait(5)\n    time.sleep(1)\n    browser.find_element_by_xpath(&quot;&#47;&#47;a[@class=&#39;m-btn m-btn-block m-btn-lite-white&#39;]&quot;).click()\n    time.sleep(1)\n    browser.find_element_by_xpath(&quot;&#47;&#47;a[@class=&#39;m-btn m-btn-white m-btn-text-orange&#39;]&quot;).click()\n    time.sleep(1)","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447914,"discussion_content":"还是可以登录的，你也可以考虑用八爪鱼试试","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577614905,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1698217,"avatar":"https://static001.geekbang.org/account/avatar/00/19/e9/a9/1be6086d.jpg","nickname":"饿羊咆哮～嗝～","note":"","ucode":"C5AE61E888103B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":32795,"discussion_content":"版本不兼容，把find_elements_by_....改为find_element_by....","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571061372,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1622750,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c2/de/98cd7728.jpg","nickname":"Lisa","note":"","ucode":"9879032355DC55","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6876,"discussion_content":"满足node-type=&#39;publish&#39;的应该有多个","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567151695,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74139,"user_name":"牛奶布丁","can_delete":false,"product_type":"c1","uid":1368494,"ip_address":"","ucode":"38994AEF4A6E78","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/KQpJHrQFQnezpyMlffXh9m9Dh6o8Z2yZXw8lEN73TyltgMGgDjhAz2cTbMpe2jgwWzkPr5Ribf2LgIDOE77kLdA/132","comment_is_top":false,"comment_ctime":1552114307,"is_pvip":false,"replies":[{"id":64444,"content":"这个最好用第三方工具，比如八爪鱼这种","user_name":"作者回复","user_name_real":"cy","uid":1306094,"ctime":1577619364,"ip_address":"","comment_id":74139,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100021701,"comment_content":"老师，微博登录时需要验证码怎么处理呢？","like_count":16,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442462,"discussion_content":"这个最好用第三方工具，比如八爪鱼这种","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577619364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1526391,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/77/754a127b.jpg","nickname":"王张","note":"","ucode":"8153B5532B2C62","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3949,"discussion_content":"验证码没有太好的方法 自有下载下来手填，估计以后会有图形识别。。。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565000520,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73984,"user_name":"梁林松","can_delete":false,"product_type":"c1","uid":1144766,"ip_address":"","ucode":"FA032C3B4E245E","user_header":"https://static001.geekbang.org/account/avatar/00/11/77/be/1f2409e8.jpg","comment_is_top":false,"comment_ctime":1552052887,"is_pvip":false,"replies":[{"id":64456,"content":"对 XPath Helper很好用","user_name":"作者回复","user_name_real":"cy","uid":1306094,"ctime":1577619497,"ip_address":"","comment_id":73984,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100021701,"comment_content":"给打家介绍一个XPath的小窍门： 下载 XPath Helper插件，安装后 在网页上选取想要提取的元素， 点击右键 选中 检查 然后 开发者工具自动打开 你可以看到 HTML代码 ，选中然后再次点击右键，选中copy 里的 copy to xpath这样就得到了xpath的值了。","like_count":13,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442462,"discussion_content":"这个最好用第三方工具，比如八爪鱼这种","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577619364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1526391,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/77/754a127b.jpg","nickname":"王张","note":"","ucode":"8153B5532B2C62","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3949,"discussion_content":"验证码没有太好的方法 自有下载下来手填，估计以后会有图形识别。。。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565000520,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73841,"user_name":"一语中的","can_delete":false,"product_type":"c1","uid":1320112,"ip_address":"","ucode":"E1A0EFCEAD83B4","user_header":"https://static001.geekbang.org/account/avatar/00/14/24/b0/a6e0b03a.jpg","comment_is_top":false,"comment_ctime":1552014010,"is_pvip":false,"replies":[{"id":64455,"content":"不错的图书分享","user_name":"作者回复","user_name_real":"cy","uid":1306094,"ctime":1577619486,"ip_address":"","comment_id":73841,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100021701,"comment_content":"数据思维和算法是我的薄弱项，还在一节一节敲之前例子中的代码，但selenium和爬虫是强项，8种定位方法结合WebDriverWait，再加上ActionChains中的方法和js基本天天用。\n虽然学的有点虐(除了本课程最近同时在补《利用python进行数据分析》《精益数据分析》)但是很开心~~~","like_count":11,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442368,"discussion_content":"对 XPath Helper很好用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577619497,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1763091,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e7/13/6f76ada6.jpg","nickname":"大龄程序员在线治掉发","note":"","ucode":"A246D4E4683589","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575292,"discussion_content":"有空试一下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654732736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1617284,"avatar":"","nickname":"Geek_78a41a","note":"","ucode":"5BF45C53211CA5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":22931,"discussion_content":"firefox里有个插件叫xpath finder，也很好用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569728699,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1464176,"avatar":"","nickname":"周志翔","note":"","ucode":"22866A9A9650E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2659,"discussion_content":"我的好像工具不会自动打开","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563848513,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74117,"user_name":"Geek_hve78z","can_delete":false,"product_type":"c1","uid":1015045,"ip_address":"","ucode":"386803B8FC2DD5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7d/05/4bad0c7c.jpg","comment_is_top":false,"comment_ctime":1552106535,"is_pvip":false,"replies":[{"id":64445,"content":"Good Job","user_name":"作者回复","user_name_real":"cy","uid":1306094,"ctime":1577619374,"ip_address":"","comment_id":74117,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100021701,"comment_content":"取消关注时，必须登录账户\n______________\n#模拟微博自动登录\nfrom selenium import webdriver\nimport time\nbrowser=webdriver.Chrome(&#39;.&#47;chromedriver&#39;)\n\n# 登陆微博\ndef weibo_login(username,password):\n    # 打开微博登录页\n    browser.get(&#39;https:&#47;&#47;passport.weibo.cn&#47;signin&#47;login&#39;)\n    browser.implicitly_wait(5)\n    time.sleep(1)\n    # 填写登录信息：用户名、密码\n    browser.find_element_by_id(&quot;loginName&quot;).send_keys(username)\n    browser.find_element_by_id(&quot;loginPassword&quot;).send_keys(password)\n    time.sleep(1)\n    # 点击登录\n    browser.find_element_by_id(&quot;loginAction&quot;).click()\n    time.sleep(1)\n    \n# 设置用户名、密码\nusername=&#39;**********&#39;\npassword=&#39;*********&#39;\nweibo_login(username,password)\n\n\n\n# 取消指定的用户\ndef out_follow(uid):\n    browser.get(&#39;https:&#47;&#47;m.weibo.cn&#47;u&#47;&#39;+str(uid))\n    time.sleep(1)\n    #browser.find_element_by_id(&quot;follow&quot;).click()\n    out_follow_button=browser.find_element_by_xpath(&#39;&#47;&#47;*[@id=&quot;app&quot;]&#47;div[1]&#47;div[4]&#47;div[2]&#47;div&#47;div[1]&#47;div&#47;span&#47;h4&#39;)\n    out_follow_button.click()\n    time.sleep(1)\n    \n    # 点击取消关注\n    out_button1=browser.find_element_by_xpath(&#39;&#47;&#47;*[@id=&quot;app&quot;]&#47;div[1]&#47;div[4]&#47;div[2]&#47;div&#47;div[1]&#47;div&#47;div&#47;ul&#47;li[2]&#47;div&#47;h4&#39;)\n    out_button1.click()\n    \n    #再次确认取消关注\n    out_button2=browser.find_element_by_xpath(&#39;&#47;&#47;*[@id=&quot;app&quot;]&#47;div[2]&#47;div[1]&#47;div[2]&#47;footer&#47;div[2]&#47;a&#39;)\n    out_button2.click()\n    time.sleep(1)\n# 每天学点心理学 UID\nuid=&#39;1890826225&#39;\nout_follow(uid)\n","like_count":8,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442454,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577619374,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73982,"user_name":"志","can_delete":false,"product_type":"c1","uid":1307922,"ip_address":"","ucode":"805696CC72A0E2","user_header":"https://static001.geekbang.org/account/avatar/00/13/f5/12/a5383fff.jpg","comment_is_top":false,"comment_ctime":1552052776,"is_pvip":false,"replies":[{"id":64448,"content":"Good Job","user_name":"作者回复","user_name_real":"cy","uid":1306094,"ctime":1577619394,"ip_address":"","comment_id":73982,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100021701,"comment_content":"课后练习取消关注模块：\n# 取关指定的用户\ndef unfollow(uid):\n    browser.get(&#39;https:&#47;&#47;m.weibo.com&#47;u&#47;&#39;+str(uid))\n    time.sleep(1)\n    unfollow_button = browser.find_element_by_xpath(&#39;&#47;&#47;*[@id=&quot;app&quot;]&#47;div[1]&#47;div[4]&#47;div[2]&#47;div&#47;div[1]&#47;div&#39;)\n    unfollow_button.click()\n    time.sleep(1)\n    # 选择取消关注\n    uf_button = browser.find_element_by_xpath(&#39;&#47;&#47;*[@id=&quot;app&quot;]&#47;div[1]&#47;div[4]&#47;div[2]&#47;div&#47;div[1]&#47;div&#47;div&#47;ul&#47;li[2]&#47;div&#39;)\n    uf_button.click()\n    time.sleep(1)\n    # 确定取消\n    confirm_button = browser.find_element_by_xpath(&#39;&#47;&#47;*[@id=&quot;app&quot;]&#47;div[2]&#47;div[1]&#47;div[2]&#47;footer&#47;div[2]&#47;a&#39;)\n    confirm_button.click()\n    time.sleep(1)\n    \n# 每天学点心理学 UID\nuid = &#39;1890826225&#39; \nunfollow(uid)","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442367,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577619394,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":188993,"user_name":"Untitled","can_delete":false,"product_type":"c1","uid":1039464,"ip_address":"","ucode":"8DD6ABA3E81A2E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/dc/68/006ba72c.jpg","comment_is_top":false,"comment_ctime":1584442898,"is_pvip":false,"replies":[{"id":104359,"content":"评论也可以尝试哦。原理相似，开发者工具中找到在源码中定位它的标签或属性，就可以爬取到想要的信息。","user_name":"作者回复","user_name_real":"cy","uid":1306094,"ctime":1617904851,"ip_address":"","comment_id":188993,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100021701,"comment_content":"相对于发微博和加关注，更多需求是爬取评论","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487581,"discussion_content":"评论也可以尝试哦。原理相似，开发者工具中找到在源码中定位它的标签或属性，就可以爬取到想要的信息。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617904851,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129335,"user_name":"Lisa","can_delete":false,"product_type":"c1","uid":1622750,"ip_address":"","ucode":"9879032355DC55","user_header":"https://static001.geekbang.org/account/avatar/00/18/c2/de/98cd7728.jpg","comment_is_top":false,"comment_ctime":1567089913,"is_pvip":false,"replies":[{"id":62739,"content":"元素定位的问题","user_name":"作者回复","user_name_real":"cy","uid":1306094,"ctime":1577087767,"ip_address":"","comment_id":129335,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100021701,"comment_content":"selenium.common.exceptions.NoSuchElementException: Message: no such element: Unable to locate element: {&quot;method&quot;:&quot;css selector&quot;,&quot;selector&quot;:&quot;textarea.W_input&quot;}\n  (Session info: chrome=76.0.3809.132)\n这个报错怎么处理？？？","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487581,"discussion_content":"评论也可以尝试哦。原理相似，开发者工具中找到在源码中定位它的标签或属性，就可以爬取到想要的信息。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617904851,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":116420,"user_name":"周志翔","can_delete":false,"product_type":"c1","uid":1464176,"ip_address":"","ucode":"22866A9A9650E6","user_header":"","comment_is_top":false,"comment_ctime":1563848289,"is_pvip":false,"replies":[{"id":63643,"content":"有时候网站样式变化了，xpath也需要调整","user_name":"作者回复","user_name_real":"cy","uid":1306094,"ctime":1577526297,"ip_address":"","comment_id":116420,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100021701,"comment_content":"可能是这个网站用的比较多了，xpath定位变了","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465408,"discussion_content":"元素定位的问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577087767,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1622750,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c2/de/98cd7728.jpg","nickname":"Lisa","note":"","ucode":"9879032355DC55","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6877,"discussion_content":"解决了，这个错误是因为选择器找错了（话说对于小白而言真的好难找-_-||）","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1567151856,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":88826,"user_name":"滢","can_delete":false,"product_type":"c1","uid":1221511,"ip_address":"","ucode":"971A6F20AF3F9A","user_header":"https://static001.geekbang.org/account/avatar/00/12/a3/87/c415e370.jpg","comment_is_top":false,"comment_ctime":1556008676,"is_pvip":false,"replies":[{"id":64226,"content":"还是可以登录的，你也可以考虑用八爪鱼试试","user_name":"作者回复","user_name_real":"cy","uid":1306094,"ctime":1577614905,"ip_address":"","comment_id":88826,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100021701,"comment_content":"一直提示这个问题  driver.find_elements_by_css_selector(&quot;[node-type=&#39;publish&#39;]&quot;).click()\nAttributeError: &#39;list&#39; object has no attribute &#39;click&#39;   老师能帮忙看下嘛？ \n另外，一直在刷一直在刷 微博不让登录来，课后练习后面补上","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447914,"discussion_content":"还是可以登录的，你也可以考虑用八爪鱼试试","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577614905,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1698217,"avatar":"https://static001.geekbang.org/account/avatar/00/19/e9/a9/1be6086d.jpg","nickname":"饿羊咆哮～嗝～","note":"","ucode":"C5AE61E888103B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":32795,"discussion_content":"版本不兼容，把find_elements_by_....改为find_element_by....","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571061372,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1622750,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c2/de/98cd7728.jpg","nickname":"Lisa","note":"","ucode":"9879032355DC55","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6876,"discussion_content":"满足node-type=&#39;publish&#39;的应该有多个","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567151695,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82717,"user_name":"随便讲两句","can_delete":false,"product_type":"c1","uid":1015782,"ip_address":"","ucode":"76682D0AB87DE1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7f/e6/c8a69b20.jpg","comment_is_top":false,"comment_ctime":1554283643,"is_pvip":false,"replies":[{"id":64328,"content":"Good Sharing","user_name":"作者回复","user_name_real":"cy","uid":1306094,"ctime":1577616948,"ip_address":"","comment_id":82717,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100021701,"comment_content":"关注&#47;取消关注用 [ https:&#47;&#47;m.weibo.cn&#47;profile&#47;:uid ] 这个页面也很方便。\n\n# 取消关注\ndef unfollow(uid):\n    browser.get(&#39;https:&#47;&#47;m.weibo.cn&#47;profile&#47;&#39; + str(uid))\n    browser.implicitly_wait(5)\n    time.sleep(1)\n    browser.find_element_by_xpath(&quot;&#47;&#47;a[@class=&#39;m-btn m-btn-block m-btn-lite-white&#39;]&quot;).click()\n    time.sleep(1)\n    browser.find_element_by_xpath(&quot;&#47;&#47;a[@class=&#39;m-btn m-btn-white m-btn-text-orange&#39;]&quot;).click()\n    time.sleep(1)","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445698,"discussion_content":"Good Sharing","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577616948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74107,"user_name":"Geek_hve78z","can_delete":false,"product_type":"c1","uid":1015045,"ip_address":"","ucode":"386803B8FC2DD5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7d/05/4bad0c7c.jpg","comment_is_top":false,"comment_ctime":1552104837,"is_pvip":false,"replies":[{"id":64446,"content":"不错的分享","user_name":"作者回复","user_name_real":"cy","uid":1306094,"ctime":1577619378,"ip_address":"","comment_id":74107,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100021701,"comment_content":"css_selector定位总结\nhttps:&#47;&#47;www.cnblogs.com&#47;yahutiaotiao&#47;p&#47;8044849.html\n","like_count":1},{"had_liked":false,"id":218811,"user_name":"groot888","can_delete":false,"product_type":"c1","uid":1266597,"ip_address":"","ucode":"50E50681D6BE0C","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/oseia6IjJIPziamTI2EQ0Bpr8icUicXTea2UuH105t4Bia4yFwBHld49cIQbjORvDdTtMCVdL39H9WxFwzyXspqqHUg/132","comment_is_top":false,"comment_ctime":1589879558,"is_pvip":false,"replies":[{"id":103952,"content":"当你要上传图片的前端代码是用input时，可以接=使用.sendkeys(图片路径）;其他情况需要使用autoIT3工具。","user_name":"作者回复","user_name_real":"cy","uid":1306094,"ctime":1617287032,"ip_address":"","comment_id":218811,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100021701,"comment_content":"老师你好，自动化运营微博我想上传图片怎么做呢，看到网上说用AutoIt3脚本语言，但是每次上传需要传不同的图片才行啊","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442446,"discussion_content":"不错的分享","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577619378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73863,"user_name":"Geek_hve78z","can_delete":false,"product_type":"c1","uid":1015045,"ip_address":"","ucode":"386803B8FC2DD5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7d/05/4bad0c7c.jpg","comment_is_top":false,"comment_ctime":1552019875,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100021701,"comment_content":"利用Selenium在微博用户页面点击关注，弹出新的小窗口，但是程序显示无法定位到“取消按钮”。通过网上查找，说是需要driver.switchTo().fame(&quot;&quot;)重新定位页面，但是运行失败，求指导。\nhttps:&#47;&#47;www.cnblogs.com&#47;ella-yao&#47;p&#47;7762352.html\n","like_count":6},{"had_liked":false,"id":389692,"user_name":"yanyu-xin","can_delete":false,"product_type":"c1","uid":1899757,"ip_address":"广东","ucode":"3AA389F9E4C236","user_header":"","comment_is_top":false,"comment_ctime":1713257590,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100021701,"comment_content":"使用Selenium 4.19.0版本时遇到了AttributeError: &#39;WebDriver&#39; object has no attribute &#39;find_element_by_xpath&#39;的错误，这意味着需要将代码中的元素查找方法更新为新的语法。具体来说，需要从selenium.webdriver.common.by导入By类，并使用find_element方法来替代原来的find_element_by_xpath方法。\n\n在Selenium 4.3.0及之后的版本中，原有的元素查找方法find_element_by_*和find_elements_by_*已经被弃用。现在，Selenium推荐使用新的查找元素的方法，即通过find_element函数结合By类来定位元素。例如，原来使用find_element_by_xpath的方式现在应该改为find_element(By.XPATH, ...)的形式","like_count":1},{"had_liked":false,"id":302464,"user_name":"GodlovezZ","can_delete":false,"product_type":"c1","uid":2682232,"ip_address":"","ucode":"A68483CC1A9D0D","user_header":"https://static001.geekbang.org/account/avatar/00/28/ed/78/2a1f3a48.jpg","comment_is_top":false,"comment_ctime":1626231736,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100021701,"comment_content":"老师好，您这些都是通过python2实现的，请问有对应python3的代码嘛","like_count":1},{"had_liked":false,"id":188992,"user_name":"Untitled","can_delete":false,"product_type":"c1","uid":1039464,"ip_address":"","ucode":"8DD6ABA3E81A2E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/dc/68/006ba72c.jpg","comment_is_top":false,"comment_ctime":1584442821,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100021701,"comment_content":"有验证码这个怎么处理？？","like_count":1},{"had_liked":false,"id":74645,"user_name":"梁林松","can_delete":false,"product_type":"c1","uid":1144766,"ip_address":"","ucode":"FA032C3B4E245E","user_header":"https://static001.geekbang.org/account/avatar/00/11/77/be/1f2409e8.jpg","comment_is_top":false,"comment_ctime":1552271623,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100021701,"comment_content":"我发现只要直接点击私信  udi就出现了。\nhttps:&#47;&#47;api.weibo.com&#47;chat&#47;#&#47;chat?to_uid=1890826225","like_count":1},{"had_liked":false,"id":74118,"user_name":"third","can_delete":false,"product_type":"c1","uid":1025114,"ip_address":"","ucode":"9A37408A834F0B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a4/5a/e708e423.jpg","comment_is_top":false,"comment_ctime":1552106851,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100021701,"comment_content":"问题\n1.可能是我不玩微博的原因吧，为什么我点击每天学点心理学主页的左边关注后面的1884976粉丝，得到的是https:&#47;&#47;weibo.com&#47;p&#47;1005051890826225&#47;follow?relate=fans&amp;from=100505&amp;wvr=6&amp;mod=headfans&amp;current=fans#place这个网址？，怎么才能得到https:&#47;&#47;weibo.com&#47;1890826225&#47;fans\n2.强制等待1s主要是为了什么呢？是为了，防止反爬机制吗？那如果这样，设置成随机强制休眠是不是会更好？\n3.我反复测试，好像被微博发现了，现在进不去微博了。然后等一时间又能进去了\n4.当我进入微博的主页的时候，并没有保持登录状态，变成了无登录状态，要设置成保持登录状态吗？\n5.作业\ndef unfollow(uid):\n    browser.get(&#39;https:&#47;&#47;m.weibo.com&#47;u&#47;&#39;+str(uid))\n    already_concerned_button=browser.find_element_by_xpath(&quot;&#47;&#47;div[@class=&#39;m-diy-btn m-box-col m-box-center m-box-center-a&#39;][1]&#47;&#47;span&quot;)\n    already_concerned_button.click()\n    time.sleep(1)\n    unfollow_buttom=browser.find_element_by_xpath(&quot;&#47;&#47;div[4]&#47;&#47;li[2]&quot;)\n    unfollow_buttom.click()\n    time.sleep(1)\n    confirm_buttom=browser.find_element_by_xpath(&quot;&#47;&#47;div[@class=&#39;m-box-col&#39;][2]&quot;)\n    time.sleep(1)\nuid=&#39;1890826225&#39;\n# add_follw(uid)\nunfollow(uid)","like_count":1},{"had_liked":false,"id":73897,"user_name":"白夜","can_delete":false,"product_type":"c1","uid":1354449,"ip_address":"","ucode":"7AABFA7C04EA34","user_header":"https://static001.geekbang.org/account/avatar/00/14/aa/d1/076482f3.jpg","comment_is_top":false,"comment_ctime":1552027844,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100021701,"comment_content":"老师，我想问问，每天学点心理学 里的内容，是从哪里找来的？不怕被举报抄袭吗","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495584,"discussion_content":"当你要上传图片的前端代码是用input时，可以接=使用.sendkeys(图片路径）;其他情况需要使用autoIT3工具。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617287032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":392143,"user_name":"初","can_delete":false,"product_type":"c1","uid":1187792,"ip_address":"上海","ucode":"E124D8A566DA43","user_header":"https://static001.geekbang.org/account/avatar/00/12/1f/d0/660502a4.jpg","comment_is_top":false,"comment_ctime":1720075702,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100021701,"comment_content":"好多页面元素改了，还有find_element的语法也改了，把登录和加关注的脚本改了，后面的不改了。之前做过从51job上爬招聘数据，所以找xpath还挺容易的。整个流程也基本就是 找元素-塞内容-操作元素，不过开头的两个验证码真的太烦了，图形验证码+手机验证码，这俩我是通过sleep足够的时间之后手动操作的。","like_count":1,"discussions":[{"author":{"id":1464176,"avatar":"","nickname":"周志翔","note":"","ucode":"22866A9A9650E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2660,"discussion_content":"网上的这种东西都是抄来抄去的哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563848544,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74107,"user_name":"Geek_hve78z","can_delete":false,"product_type":"c1","uid":1015045,"ip_address":"","ucode":"386803B8FC2DD5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7d/05/4bad0c7c.jpg","comment_is_top":false,"comment_ctime":1552104837,"is_pvip":false,"replies":[{"id":64446,"content":"不错的分享","user_name":"作者回复","user_name_real":"cy","uid":1306094,"ctime":1577619378,"ip_address":"","comment_id":74107,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100021701,"comment_content":"css_selector定位总结\nhttps:&#47;&#47;www.cnblogs.com&#47;yahutiaotiao&#47;p&#47;8044849.html\n","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442446,"discussion_content":"不错的分享","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577619378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":218811,"user_name":"groot888","can_delete":false,"product_type":"c1","uid":1266597,"ip_address":"","ucode":"50E50681D6BE0C","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/oseia6IjJIPziamTI2EQ0Bpr8icUicXTea2UuH105t4Bia4yFwBHld49cIQbjORvDdTtMCVdL39H9WxFwzyXspqqHUg/132","comment_is_top":false,"comment_ctime":1589879558,"is_pvip":false,"replies":[{"id":103952,"content":"当你要上传图片的前端代码是用input时，可以接=使用.sendkeys(图片路径）;其他情况需要使用autoIT3工具。","user_name":"作者回复","user_name_real":"cy","uid":1306094,"ctime":1617287032,"ip_address":"","comment_id":218811,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100021701,"comment_content":"老师你好，自动化运营微博我想上传图片怎么做呢，看到网上说用AutoIt3脚本语言，但是每次上传需要传不同的图片才行啊","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495584,"discussion_content":"当你要上传图片的前端代码是用input时，可以接=使用.sendkeys(图片路径）;其他情况需要使用autoIT3工具。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617287032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73863,"user_name":"Geek_hve78z","can_delete":false,"product_type":"c1","uid":1015045,"ip_address":"","ucode":"386803B8FC2DD5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7d/05/4bad0c7c.jpg","comment_is_top":false,"comment_ctime":1552019875,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100021701,"comment_content":"利用Selenium在微博用户页面点击关注，弹出新的小窗口，但是程序显示无法定位到“取消按钮”。通过网上查找，说是需要driver.switchTo().fame(&quot;&quot;)重新定位页面，但是运行失败，求指导。\nhttps:&#47;&#47;www.cnblogs.com&#47;ella-yao&#47;p&#47;7762352.html\n","like_count":6},{"had_liked":false,"id":389692,"user_name":"yanyu-xin","can_delete":false,"product_type":"c1","uid":1899757,"ip_address":"广东","ucode":"3AA389F9E4C236","user_header":"","comment_is_top":false,"comment_ctime":1713257590,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100021701,"comment_content":"使用Selenium 4.19.0版本时遇到了AttributeError: &#39;WebDriver&#39; object has no attribute &#39;find_element_by_xpath&#39;的错误，这意味着需要将代码中的元素查找方法更新为新的语法。具体来说，需要从selenium.webdriver.common.by导入By类，并使用find_element方法来替代原来的find_element_by_xpath方法。\n\n在Selenium 4.3.0及之后的版本中，原有的元素查找方法find_element_by_*和find_elements_by_*已经被弃用。现在，Selenium推荐使用新的查找元素的方法，即通过find_element函数结合By类来定位元素。例如，原来使用find_element_by_xpath的方式现在应该改为find_element(By.XPATH, ...)的形式","like_count":1},{"had_liked":false,"id":302464,"user_name":"GodlovezZ","can_delete":false,"product_type":"c1","uid":2682232,"ip_address":"","ucode":"A68483CC1A9D0D","user_header":"https://static001.geekbang.org/account/avatar/00/28/ed/78/2a1f3a48.jpg","comment_is_top":false,"comment_ctime":1626231736,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100021701,"comment_content":"老师好，您这些都是通过python2实现的，请问有对应python3的代码嘛","like_count":1},{"had_liked":false,"id":188992,"user_name":"Untitled","can_delete":false,"product_type":"c1","uid":1039464,"ip_address":"","ucode":"8DD6ABA3E81A2E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/dc/68/006ba72c.jpg","comment_is_top":false,"comment_ctime":1584442821,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100021701,"comment_content":"有验证码这个怎么处理？？","like_count":1},{"had_liked":false,"id":74645,"user_name":"梁林松","can_delete":false,"product_type":"c1","uid":1144766,"ip_address":"","ucode":"FA032C3B4E245E","user_header":"https://static001.geekbang.org/account/avatar/00/11/77/be/1f2409e8.jpg","comment_is_top":false,"comment_ctime":1552271623,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100021701,"comment_content":"我发现只要直接点击私信  udi就出现了。\nhttps:&#47;&#47;api.weibo.com&#47;chat&#47;#&#47;chat?to_uid=1890826225","like_count":1},{"had_liked":false,"id":74118,"user_name":"third","can_delete":false,"product_type":"c1","uid":1025114,"ip_address":"","ucode":"9A37408A834F0B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a4/5a/e708e423.jpg","comment_is_top":false,"comment_ctime":1552106851,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100021701,"comment_content":"问题\n1.可能是我不玩微博的原因吧，为什么我点击每天学点心理学主页的左边关注后面的1884976粉丝，得到的是https:&#47;&#47;weibo.com&#47;p&#47;1005051890826225&#47;follow?relate=fans&amp;from=100505&amp;wvr=6&amp;mod=headfans&amp;current=fans#place这个网址？，怎么才能得到https:&#47;&#47;weibo.com&#47;1890826225&#47;fans\n2.强制等待1s主要是为了什么呢？是为了，防止反爬机制吗？那如果这样，设置成随机强制休眠是不是会更好？\n3.我反复测试，好像被微博发现了，现在进不去微博了。然后等一时间又能进去了\n4.当我进入微博的主页的时候，并没有保持登录状态，变成了无登录状态，要设置成保持登录状态吗？\n5.作业\ndef unfollow(uid):\n    browser.get(&#39;https:&#47;&#47;m.weibo.com&#47;u&#47;&#39;+str(uid))\n    already_concerned_button=browser.find_element_by_xpath(&quot;&#47;&#47;div[@class=&#39;m-diy-btn m-box-col m-box-center m-box-center-a&#39;][1]&#47;&#47;span&quot;)\n    already_concerned_button.click()\n    time.sleep(1)\n    unfollow_buttom=browser.find_element_by_xpath(&quot;&#47;&#47;div[4]&#47;&#47;li[2]&quot;)\n    unfollow_buttom.click()\n    time.sleep(1)\n    confirm_buttom=browser.find_element_by_xpath(&quot;&#47;&#47;div[@class=&#39;m-box-col&#39;][2]&quot;)\n    time.sleep(1)\nuid=&#39;1890826225&#39;\n# add_follw(uid)\nunfollow(uid)","like_count":1},{"had_liked":false,"id":73897,"user_name":"白夜","can_delete":false,"product_type":"c1","uid":1354449,"ip_address":"","ucode":"7AABFA7C04EA34","user_header":"https://static001.geekbang.org/account/avatar/00/14/aa/d1/076482f3.jpg","comment_is_top":false,"comment_ctime":1552027844,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100021701,"comment_content":"老师，我想问问，每天学点心理学 里的内容，是从哪里找来的？不怕被举报抄袭吗","like_count":1,"discussions":[{"author":{"id":1464176,"avatar":"","nickname":"周志翔","note":"","ucode":"22866A9A9650E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2660,"discussion_content":"网上的这种东西都是抄来抄去的哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563848544,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":392143,"user_name":"初","can_delete":false,"product_type":"c1","uid":1187792,"ip_address":"上海","ucode":"E124D8A566DA43","user_header":"https://static001.geekbang.org/account/avatar/00/12/1f/d0/660502a4.jpg","comment_is_top":false,"comment_ctime":1720075702,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100021701,"comment_content":"好多页面元素改了，还有find_element的语法也改了，把登录和加关注的脚本改了，后面的不改了。之前做过从51job上爬招聘数据，所以找xpath还挺容易的。整个流程也基本就是 找元素-塞内容-操作元素，不过开头的两个验证码真的太烦了，图形验证码+手机验证码，这俩我是通过sleep足够的时间之后手动操作的。","like_count":1},{"had_liked":false,"id":382785,"user_name":"静静呀","can_delete":false,"product_type":"c1","uid":3690337,"ip_address":"上海","ucode":"C0540C96A261BF","user_header":"https://static001.geekbang.org/account/avatar/00/38/4f/61/018352d4.jpg","comment_is_top":false,"comment_ctime":1698050710,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100021701,"comment_content":"xpath定位实在是太难了，整了半天还是定位错的，好难","like_count":0},{"had_liked":false,"id":295527,"user_name":"KokutoDa","can_delete":false,"product_type":"c1","uid":1189534,"ip_address":"","ucode":"2561207E84840E","user_header":"https://static001.geekbang.org/account/avatar/00/12/26/9e/836f603b.jpg","comment_is_top":false,"comment_ctime":1622461239,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100021701,"comment_content":"关于有验证码怎么自动登录\n1.login方法：用户密码登录，验证码处手动操作，登录成功后打印出 cookie\n2.login_by_cookie：添加 cookie 到 driver，再刷新页面就登录成功了。\n\nfrom selenium import webdriver\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.common.keys import Keys\nimport time\n\n# 手动登录\ndef login(driver, user, pw):\n    xpath_user = &quot;&#47;&#47;input[@id=&#39;loginname&#39;]&quot;\n    xpath_pw = &quot;&#47;&#47;input[@type=&#39;password&#39;]&quot;\n    # 等待页面显示\n    WebDriverWait(driver, 10).until(lambda driver: driver.find_element_by_xpath(xpath_user))\n    # 用户密码登录\n    elem_user = driver.find_element_by_xpath(xpath_user)\n    elem_user.send_keys(user)\n    elem_pw = driver.find_element_by_xpath(xpath_pw)\n    elem_pw.send_keys(pw)\n    elem_pw.send_keys(Keys.RETURN)\n    # 获取手动登录后的 cookie\n    time.sleep(60)\n    print(driver.get_cookies())\n\ndef login_by_cookie(driver, cookies):\n    time.sleep(5)\n    for i in cookies:\n        driver.add_cookie(i)\n    time.sleep(3)\n    driver.refresh()\n\nurl = &#39;https:&#47;&#47;weibo.com&#47;&#39;\ndriver = webdriver.Firefox()\ndriver.get(url)\n\nuser = &#39;***&#39;\npw = &quot;***&quot;\ncookies = [&#39;...&#39;]\n# login(driver, user, pw)\n# 使用登录后获得的 cookie 登录\nlogin_by_cookie(driver, cookies)","like_count":0},{"had_liked":false,"id":178928,"user_name":"建强","can_delete":false,"product_type":"c1","uid":1397126,"ip_address":"","ucode":"62B03D0E0C64EC","user_header":"https://static001.geekbang.org/account/avatar/00/15/51/86/b5fd8dd8.jpg","comment_is_top":false,"comment_ctime":1581856847,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100021701,"comment_content":"# 微博自动化运营模拟，因字数限制，这里只放了两个功能：对指定用户加关注、对指定用户取消关注，其中第一个功能是老师写的。\nfrom selenium import webdriver\nimport time\n\n# 关注指定的用户\ndef add_follow(browser, weibourl, uid):\n#BEGIN\n    browser.get(weibourl + str(uid))\n    time.sleep(1)\n    follow_button = browser.find_element_by_xpath(&quot;&#47;&#47;div[@class=&#39;m-add-box m-followBtn m-btn m-btn-block m-btn-blue&#39;]&quot;)\n    follow_button.click()\n    time.sleep(1)\n\n    # 选择&quot;特别关注&quot;分组\n    group_button = browser.find_element_by_xpath(&quot;&#47;&#47;li[1]&#47;label[@class=&#39;m-checkbox&#39;]&quot;)\n    group_button.click()\n    time.sleep(1)\n\n    # 点击&quot;确定&quot;按钮\n    ok_button = browser.find_element_by_xpath(&quot;&#47;&#47;a[@class=&#39;m-btn m-btn-white m-btn-text-orange&#39;]&quot;)\n    ok_button.click()\n    time.sleep(1)\n#END\n\n# 取消关注指定的用户\ndef del_follow(browser, weibourl, uid):\n#BEGIN\n    browser.get(weibourl + str(uid))\n    time.sleep(1)\n\n    # 定位&quot;已关注&quot;按钮，并点击\n    follow_button = browser.find_element_by_xpath(&quot;&#47;&#47;a[@class=&#39;m-btn m-btn-block m-btn-lite-white&#39;]&quot;)\n    follow_button.click()\n    time.sleep(1)\n\n    # 定位&quot;确定&quot;按钮，并点击\n    ok_button = browser.find_element_by_xpath(&quot;&#47;&#47;a[@class=&#39;m-btn m-btn-white m-btn-text-orange&#39;]&quot;)\n    ok_button.click()\n    time.sleep(1)\n#END\n\n# 主程序\ndef main():\n#BEGIN\n\n    # 关注用户&quot;宅剧排行榜&quot;\n    weibourl = &#39;https:&#47;&#47;m.weibo.cn&#47;profile&#47;&#39;\n    uid = &#39;1878531805&#39; \n    add_follow(browser, weibourl, uid)\n\n    # 对用户&quot;宅剧排行榜&quot;取消关注\n    del_follow(browser, weibourl, uid)\n#END\n\nif __name__ == &#39;__main__&#39;:\n    main()\n\n&#39;&#39;&#39;\n主要收获:\n1. 对网页自动化操作有了初步认识\n2. 进一步掌握了利用xpath进行网页元素定位的操作。\n&#39;&#39;&#39;","like_count":0},{"had_liked":false,"id":108383,"user_name":"董大琳儿","can_delete":false,"product_type":"c1","uid":1582410,"ip_address":"","ucode":"8D03DA624D5EF8","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIc88LLmwU7RU1tGcmo5OZyPibKeXPg31wMxyc2uByEO3g44f6uLcu1bXGNO9AHVgn0PK5hwkcfYZA/132","comment_is_top":false,"comment_ctime":1561735223,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":4,"product_id":100021701,"comment_content":"NoSuchElementException: no such element: Unable to locate element: {&quot;method&quot;:&quot;xpath&quot;,&quot;selector&quot;:&quot;&#47;&#47;div[@class=&quot;m-btn m-btn-white m-btn-text-black&quot;]&quot;}\n  (Session info: chrome=75.0.3770.100)，，，一直在报错","like_count":0},{"had_liked":false,"id":90154,"user_name":"ping","can_delete":false,"product_type":"c1","uid":1353257,"ip_address":"","ucode":"B4A6B03C30E117","user_header":"https://static001.geekbang.org/account/avatar/00/14/a6/29/3ee29119.jpg","comment_is_top":false,"comment_ctime":1556433673,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100021701,"comment_content":"通过同样的方法，你可以查看“取消”这个按钮对应的 HTML , 但是就是没找到：\nno such element: Unable to locate element\n\n","like_count":0,"discussions":[{"author":{"id":1076722,"avatar":"https://static001.geekbang.org/account/avatar/00/10/6d/f2/d5459a08.jpg","nickname":"陆尧","note":"","ucode":"34625DFE2E68A3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":783,"discussion_content":"这里div换成a就行了，实际上要找的是一个链接","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562056588,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382785,"user_name":"静静呀","can_delete":false,"product_type":"c1","uid":3690337,"ip_address":"上海","ucode":"C0540C96A261BF","user_header":"https://static001.geekbang.org/account/avatar/00/38/4f/61/018352d4.jpg","comment_is_top":false,"comment_ctime":1698050710,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100021701,"comment_content":"xpath定位实在是太难了，整了半天还是定位错的，好难","like_count":0},{"had_liked":false,"id":295527,"user_name":"KokutoDa","can_delete":false,"product_type":"c1","uid":1189534,"ip_address":"","ucode":"2561207E84840E","user_header":"https://static001.geekbang.org/account/avatar/00/12/26/9e/836f603b.jpg","comment_is_top":false,"comment_ctime":1622461239,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100021701,"comment_content":"关于有验证码怎么自动登录\n1.login方法：用户密码登录，验证码处手动操作，登录成功后打印出 cookie\n2.login_by_cookie：添加 cookie 到 driver，再刷新页面就登录成功了。\n\nfrom selenium import webdriver\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.common.keys import Keys\nimport time\n\n# 手动登录\ndef login(driver, user, pw):\n    xpath_user = &quot;&#47;&#47;input[@id=&#39;loginname&#39;]&quot;\n    xpath_pw = &quot;&#47;&#47;input[@type=&#39;password&#39;]&quot;\n    # 等待页面显示\n    WebDriverWait(driver, 10).until(lambda driver: driver.find_element_by_xpath(xpath_user))\n    # 用户密码登录\n    elem_user = driver.find_element_by_xpath(xpath_user)\n    elem_user.send_keys(user)\n    elem_pw = driver.find_element_by_xpath(xpath_pw)\n    elem_pw.send_keys(pw)\n    elem_pw.send_keys(Keys.RETURN)\n    # 获取手动登录后的 cookie\n    time.sleep(60)\n    print(driver.get_cookies())\n\ndef login_by_cookie(driver, cookies):\n    time.sleep(5)\n    for i in cookies:\n        driver.add_cookie(i)\n    time.sleep(3)\n    driver.refresh()\n\nurl = &#39;https:&#47;&#47;weibo.com&#47;&#39;\ndriver = webdriver.Firefox()\ndriver.get(url)\n\nuser = &#39;***&#39;\npw = &quot;***&quot;\ncookies = [&#39;...&#39;]\n# login(driver, user, pw)\n# 使用登录后获得的 cookie 登录\nlogin_by_cookie(driver, cookies)","like_count":0},{"had_liked":false,"id":178928,"user_name":"建强","can_delete":false,"product_type":"c1","uid":1397126,"ip_address":"","ucode":"62B03D0E0C64EC","user_header":"https://static001.geekbang.org/account/avatar/00/15/51/86/b5fd8dd8.jpg","comment_is_top":false,"comment_ctime":1581856847,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100021701,"comment_content":"# 微博自动化运营模拟，因字数限制，这里只放了两个功能：对指定用户加关注、对指定用户取消关注，其中第一个功能是老师写的。\nfrom selenium import webdriver\nimport time\n\n# 关注指定的用户\ndef add_follow(browser, weibourl, uid):\n#BEGIN\n    browser.get(weibourl + str(uid))\n    time.sleep(1)\n    follow_button = browser.find_element_by_xpath(&quot;&#47;&#47;div[@class=&#39;m-add-box m-followBtn m-btn m-btn-block m-btn-blue&#39;]&quot;)\n    follow_button.click()\n    time.sleep(1)\n\n    # 选择&quot;特别关注&quot;分组\n    group_button = browser.find_element_by_xpath(&quot;&#47;&#47;li[1]&#47;label[@class=&#39;m-checkbox&#39;]&quot;)\n    group_button.click()\n    time.sleep(1)\n\n    # 点击&quot;确定&quot;按钮\n    ok_button = browser.find_element_by_xpath(&quot;&#47;&#47;a[@class=&#39;m-btn m-btn-white m-btn-text-orange&#39;]&quot;)\n    ok_button.click()\n    time.sleep(1)\n#END\n\n# 取消关注指定的用户\ndef del_follow(browser, weibourl, uid):\n#BEGIN\n    browser.get(weibourl + str(uid))\n    time.sleep(1)\n\n    # 定位&quot;已关注&quot;按钮，并点击\n    follow_button = browser.find_element_by_xpath(&quot;&#47;&#47;a[@class=&#39;m-btn m-btn-block m-btn-lite-white&#39;]&quot;)\n    follow_button.click()\n    time.sleep(1)\n\n    # 定位&quot;确定&quot;按钮，并点击\n    ok_button = browser.find_element_by_xpath(&quot;&#47;&#47;a[@class=&#39;m-btn m-btn-white m-btn-text-orange&#39;]&quot;)\n    ok_button.click()\n    time.sleep(1)\n#END\n\n# 主程序\ndef main():\n#BEGIN\n\n    # 关注用户&quot;宅剧排行榜&quot;\n    weibourl = &#39;https:&#47;&#47;m.weibo.cn&#47;profile&#47;&#39;\n    uid = &#39;1878531805&#39; \n    add_follow(browser, weibourl, uid)\n\n    # 对用户&quot;宅剧排行榜&quot;取消关注\n    del_follow(browser, weibourl, uid)\n#END\n\nif __name__ == &#39;__main__&#39;:\n    main()\n\n&#39;&#39;&#39;\n主要收获:\n1. 对网页自动化操作有了初步认识\n2. 进一步掌握了利用xpath进行网页元素定位的操作。\n&#39;&#39;&#39;","like_count":0},{"had_liked":false,"id":108383,"user_name":"董大琳儿","can_delete":false,"product_type":"c1","uid":1582410,"ip_address":"","ucode":"8D03DA624D5EF8","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIc88LLmwU7RU1tGcmo5OZyPibKeXPg31wMxyc2uByEO3g44f6uLcu1bXGNO9AHVgn0PK5hwkcfYZA/132","comment_is_top":false,"comment_ctime":1561735223,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":4,"product_id":100021701,"comment_content":"NoSuchElementException: no such element: Unable to locate element: {&quot;method&quot;:&quot;xpath&quot;,&quot;selector&quot;:&quot;&#47;&#47;div[@class=&quot;m-btn m-btn-white m-btn-text-black&quot;]&quot;}\n  (Session info: chrome=75.0.3770.100)，，，一直在报错","like_count":0,"discussions":[{"author":{"id":1076722,"avatar":"https://static001.geekbang.org/account/avatar/00/10/6d/f2/d5459a08.jpg","nickname":"陆尧","note":"","ucode":"34625DFE2E68A3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":783,"discussion_content":"这里div换成a就行了，实际上要找的是一个链接","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562056588,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90154,"user_name":"ping","can_delete":false,"product_type":"c1","uid":1353257,"ip_address":"","ucode":"B4A6B03C30E117","user_header":"https://static001.geekbang.org/account/avatar/00/14/a6/29/3ee29119.jpg","comment_is_top":false,"comment_ctime":1556433673,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100021701,"comment_content":"通过同样的方法，你可以查看“取消”这个按钮对应的 HTML , 但是就是没找到：\nno such element: Unable to locate element\n\n","like_count":0}]}