{"id":8924,"title":"第10讲 | UDP协议：因性善而简单，难免碰到“城会玩”","content":"<p>讲完了IP层以后，接下来我们开始讲传输层。传输层里比较重要的两个协议，一个是TCP，一个是UDP。对于不从事底层开发的人员来讲，或者对于开发应用的人来讲，最常用的就是这两个协议。由于面试的时候，这两个协议经常会被放在一起问，因而我在讲的时候，也会结合着来讲。</p>\n<h2>TCP和UDP有哪些区别？</h2>\n<p>一般面试的时候我问这两个协议的区别，大部分人会回答，TCP是面向连接的，UDP是面向无连接的。</p>\n<p>什么叫面向连接，什么叫无连接呢？在互通之前，面向连接的协议会先建立连接。例如，TCP会三次握手，而UDP不会。为什么要建立连接呢？你TCP三次握手，我UDP也可以发三个包玩玩，有什么区别吗？</p>\n<p><strong>所谓的建立连接，是为了在客户端和服务端维护连接，而建立一定的数据结构来维护双方交互的状态，用这样的数据结构来保证所谓的面向连接的特性。</strong></p>\n<p>例如，<strong>TCP提供可靠交付</strong>。通过TCP连接传输的数据，无差错、不丢失、不重复、并且按序到达。我们都知道IP包是没有任何可靠性保证的，一旦发出去，就像西天取经，走丢了、被妖怪吃了，都只能随它去。但是TCP号称能做到那个连接维护的程序做的事情，这个下两节我会详细描述。而<strong>UDP继承了IP包的特性，不保证不丢失，不保证按顺序到达。</strong></p>\n<p>再如，<strong>TCP是面向字节流的</strong>。发送的时候发的是一个流，没头没尾。IP包可不是一个流，而是一个个的IP包。之所以变成了流，这也是TCP自己的状态维护做的事情。而<strong>UDP继承了IP的特性，基于数据报的，一个一个地发，一个一个地收。</strong></p>\n<p>还有<strong>TCP是可以有拥塞控制的</strong>。它意识到包丢弃了或者网络的环境不好了，就会根据情况调整自己的行为，看看是不是发快了，要不要发慢点。<strong>UDP就不会，应用让我发，我就发，管它洪水滔天。</strong></p>\n<p>因而<strong>TCP其实是一个有状态服务</strong>，通俗地讲就是有脑子的，里面精确地记着发送了没有，接收到没有，发送到哪个了，应该接收哪个了，错一点儿都不行。而<strong>UDP则是无状态服务</strong>。通俗地说是没脑子的，天真无邪的，发出去就发出去了。</p>\n<p>我们可以这样比喻，如果MAC层定义了本地局域网的传输行为，IP层定义了整个网络端到端的传输行为，这两层基本定义了这样的基因：网络传输是以包为单位的，二层叫帧，网络层叫包，传输层叫段。我们笼统地称为包。包单独传输，自行选路，在不同的设备封装解封装，不保证到达。基于这个基因，生下来的孩子UDP完全继承了这些特性，几乎没有自己的思想。</p>\n<h2>UDP包头是什么样的？</h2>\n<p>我们来看一下UDP包头。</p>\n<p>前面章节我已经讲过包的传输过程，这里不再赘述。当我发送的UDP包到达目标机器后，发现MAC地址匹配，于是就取下来，将剩下的包传给处理IP层的代码。把IP头取下来，发现目标IP匹配，接下来呢？这里面的数据包是给谁呢？</p>\n<p>发送的时候，我知道我发的是一个UDP的包，收到的那台机器咋知道的呢？所以在IP头里面有个8位协议，这里会存放，数据里面到底是TCP还是UDP，当然这里是UDP。于是，如果我们知道UDP头的格式，就能从数据里面，将它解析出来。解析出来以后呢？数据给谁处理呢？</p>\n<p>处理完传输层的事情，内核的事情基本就干完了，里面的数据应该交给应用程序自己去处理，可是一台机器上跑着这么多的应用程序，应该给谁呢？</p>\n<p>无论应用程序写的使用TCP传数据，还是UDP传数据，都要监听一个端口。正是这个端口，用来区分应用程序，要不说端口不能冲突呢。两个应用监听一个端口，到时候包给谁呀？所以，按理说，无论是TCP还是UDP包头里面应该有端口号，根据端口号，将数据交给相应的应用程序。</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/2c/84/2c9a109f3be308dea901004a5a3b4c84.jpg?wh=2183*1103\" alt=\"\" /></p>\n<p>当我们看到UDP包头的时候，发现的确有端口号，有源端口号和目标端口号。因为是两端通信嘛，这很好理解。但是你还会发现，UDP除了端口号，再没有其他的了。和下两节要讲的TCP头比起来，这个简直简单得一塌糊涂啊！</p>\n<h2>UDP的三大特点</h2>\n<p>UDP就像小孩子一样，有以下这些特点：</p>\n<!-- [[[read_end]]] -->\n<p>第一，<strong>沟通简单</strong>，不需要一肚子花花肠子（大量的数据结构、处理逻辑、包头字段）。前提是它相信网络世界是美好的，秉承性善论，相信网络通路默认就是很容易送达的，不容易被丢弃的。</p>\n<p>第二，<strong>轻信他人</strong>。它不会建立连接，虽然有端口号，但是监听在这个地方，谁都可以传给他数据，他也可以传给任何人数据，甚至可以同时传给多个人数据。</p>\n<p>第三，<strong>愣头青，做事不懂权变</strong>。不知道什么时候该坚持，什么时候该退让。它不会根据网络的情况进行发包的拥塞控制，无论网络丢包丢成啥样了，它该怎么发还怎么发。</p>\n<h2>UDP的三大使用场景</h2>\n<p>基于UDP这种“小孩子”的特点，我们可以考虑在以下的场景中使用。</p>\n<p>第一，<strong>需要资源少，在网络情况比较好的内网，或者对于丢包不敏感的应用</strong>。这很好理解，就像如果你是领导，你会让你们组刚毕业的小朋友去做一些没有那么难的项目，打一些没有那么难的客户，或者做一些失败了也能忍受的实验性项目。</p>\n<p>我们在第四节讲的DHCP就是基于UDP协议的。一般的获取IP地址都是内网请求，而且一次获取不到IP又没事，过一会儿还有机会。我们讲过PXE可以在启动的时候自动安装操作系统，操作系统镜像的下载使用的TFTP，这个也是基于UDP协议的。在还没有操作系统的时候，客户端拥有的资源很少，不适合维护一个复杂的状态机，而且因为是内网，一般也没啥问题。</p>\n<p>第二，<strong>不需要一对一沟通，建立连接，而是可以广播的应用</strong>。咱们小时候人都很简单，大家在班级里面，谁成绩好，谁写作好，应该表扬谁惩罚谁，谁得几个小红花都是当着全班的面讲的，公平公正公开。长大了人心复杂了，薪水、奖金要背靠背，和员工一对一沟通。</p>\n<p>UDP的不面向连接的功能，可以使得可以承载广播或者多播的协议。DHCP就是一种广播的形式，就是基于UDP协议的，而广播包的格式前面说过了。</p>\n<p>对于多播，我们在讲IP地址的时候，讲过一个D类地址，也即组播地址，使用这个地址，可以将包组播给一批机器。当一台机器上的某个进程想监听某个组播地址的时候，需要发送IGMP包，所在网络的路由器就能收到这个包，知道有个机器上有个进程在监听这个组播地址。当路由器收到这个组播地址的时候，会将包转发给这台机器，这样就实现了跨路由器的组播。</p>\n<p>在后面云中网络部分，有一个协议VXLAN，也是需要用到组播，也是基于UDP协议的。</p>\n<p>第三，<strong>需要处理速度快，时延低，可以容忍少数丢包，但是要求即便网络拥塞，也毫不退缩，一往无前的时候</strong>。记得曾国藩建立湘军的时候，专门招出生牛犊不怕虎的新兵，而不用那些“老油条”的八旗兵，就是因为八旗兵经历的事情多，遇到敌军不敢舍死忘生。</p>\n<p>同理，UDP简单、处理速度快，不像TCP那样，操这么多的心，各种重传啊，保证顺序啊，前面的不收到，后面的没法处理啊。不然等这些事情做完了，时延早就上去了。而TCP在网络不好出现丢包的时候，拥塞控制策略会主动的退缩，降低发送速度，这就相当于本来环境就差，还自断臂膀，用户本来就卡，这下更卡了。</p>\n<p>当前很多应用都是要求低时延的，它们可不想用TCP如此复杂的机制，而是想根据自己的场景，实现自己的可靠和连接保证。例如，如果应用自己觉得，有的包丢了就丢了，没必要重传了，就可以算了，有的比较重要，则应用自己重传，而不依赖于TCP。有的前面的包没到，后面的包到了，那就先给客户展示后面的嘛，干嘛非得等到齐了呢？如果网络不好，丢了包，那不能退缩啊，要尽快传啊，速度不能降下来啊，要挤占带宽，抢在客户失去耐心之前到达。</p>\n<p>由于UDP十分简单，基本啥都没做，也就给了应用“城会玩”的机会。就像在和平年代，每个人应该有独立的思考和行为，应该可靠并且礼让；但是如果在战争年代，往往不太需要过于独立的思考，而需要士兵简单服从命令就可以了。</p>\n<p>曾国藩说哪支部队需要诱敌牺牲，也就牺牲了，相当于包丢了就丢了。两军狭路相逢的时候，曾国藩说上，没有带宽也要上，这才给了曾国藩运筹帷幄，城会玩的机会。同理如果你实现的应用需要有自己的连接策略，可靠保证，时延要求，使用UDP，然后再应用层实现这些是再好不过了。</p>\n<h2>基于UDP的“城会玩”的五个例子</h2>\n<p>我列举几种“城会玩”的例子。</p>\n<h3>“城会玩”一：网页或者APP的访问</h3>\n<p>原来访问网页和手机APP都是基于HTTP协议的。HTTP协议是基于TCP的，建立连接都需要多次交互，对于时延比较大的目前主流的移动互联网来讲，建立一次连接需要的时间会比较长，然而既然是移动中，TCP可能还会断了重连，也是很耗时的。而且目前的HTTP协议，往往采取多个数据通道共享一个连接的情况，这样本来为了加快传输速度，但是TCP的严格顺序策略使得哪怕共享通道，前一个不来，后一个和前一个即便没关系，也要等着，时延也会加大。</p>\n<p>而<strong>QUIC</strong>（全称<strong>Quick UDP Internet Connections</strong>，<strong>快速UDP互联网连接</strong>）是Google提出的一种基于UDP改进的通信协议，其目的是降低网络通信的延迟，提供更好的用户互动体验。</p>\n<p>QUIC在应用层上，会自己实现快速连接建立、减少重传时延，自适应拥塞控制，是应用层“城会玩”的代表。这一节主要是讲UDP，QUIC我们放到应用层去讲。</p>\n<h3>“城会玩”二：流媒体的协议</h3>\n<p>现在直播比较火，直播协议多使用RTMP，这个协议我们后面的章节也会讲，而这个RTMP协议也是基于TCP的。TCP的严格顺序传输要保证前一个收到了，下一个才能确认，如果前一个收不到，下一个就算包已经收到了，在缓存里面，也需要等着。对于直播来讲，这显然是不合适的，因为老的视频帧丢了其实也就丢了，就算再传过来用户也不在意了，他们要看新的了，如果老是没来就等着，卡顿了，新的也看不了，那就会丢失客户，所以直播，实时性比较比较重要，宁可丢包，也不要卡顿的。</p>\n<p>另外，对于丢包，其实对于视频播放来讲，有的包可以丢，有的包不能丢，因为视频的连续帧里面，有的帧重要，有的不重要，如果必须要丢包，隔几个帧丢一个，其实看视频的人不会感知，但是如果连续丢帧，就会感知了，因而在网络不好的情况下，应用希望选择性的丢帧。</p>\n<p>还有就是当网络不好的时候，TCP协议会主动降低发送速度，这对本来当时就卡的看视频来讲是要命的，应该应用层马上重传，而不是主动让步。因而，很多直播应用，都基于UDP实现了自己的视频传输协议。</p>\n<h3>“城会玩”三：实时游戏</h3>\n<p>游戏有一个特点，就是实时性比较高。快一秒你干掉别人，慢一秒你被别人爆头，所以很多职业玩家会买非常专业的鼠标和键盘，争分夺秒。</p>\n<p>因而，实时游戏中客户端和服务端要建立长连接，来保证实时传输。但是游戏玩家很多，服务器却不多。由于维护TCP连接需要在内核维护一些数据结构，因而一台机器能够支撑的TCP连接数目是有限的，然后UDP由于是没有连接的，在异步IO机制引入之前，常常是应对海量客户端连接的策略。</p>\n<p>另外还是TCP的强顺序问题，对战的游戏，对网络的要求很简单，玩家通过客户端发送给服务器鼠标和键盘行走的位置，服务器会处理每个用户发送过来的所有场景，处理完再返回给客户端，客户端解析响应，渲染最新的场景展示给玩家。</p>\n<p>如果出现一个数据包丢失，所有事情都需要停下来等待这个数据包重发。客户端会出现等待接收数据，然而玩家并不关心过期的数据，激战中卡1秒，等能动了都已经死了。</p>\n<p>游戏对实时要求较为严格的情况下，采用自定义的可靠UDP协议，自定义重传策略，能够把丢包产生的延迟降到最低，尽量减少网络问题对游戏性造成的影响。</p>\n<h3>“城会玩”四：IoT物联网</h3>\n<p>一方面，物联网领域终端资源少，很可能只是个内存非常小的嵌入式系统，而维护TCP协议代价太大；另一方面，物联网对实时性要求也很高，而TCP还是因为上面的那些原因导致时延大。Google旗下的Nest建立Thread Group，推出了物联网通信协议Thread，就是基于UDP协议的。</p>\n<h3>“城会玩”五：移动通信领域</h3>\n<p>在4G网络里，移动流量上网的数据面对的协议GTP-U是基于UDP的。因为移动网络协议比较复杂，而GTP协议本身就包含复杂的手机上线下线的通信协议。如果基于TCP，TCP的机制就显得非常多余，这部分协议我会在后面的章节单独讲解。</p>\n<h2>小结</h2>\n<p>好了，这节就到这里了，我们来总结一下：</p>\n<ul>\n<li>\n<p>如果将TCP比作成熟的社会人，UDP则是头脑简单的小朋友。TCP复杂，UDP简单；TCP维护连接，UDP谁都相信；TCP会坚持知进退；UDP愣头青一个，勇往直前；</p>\n</li>\n<li>\n<p>UDP虽然简单，但它有简单的用法。它可以用在环境简单、需要多播、应用层自己控制传输的地方。例如DHCP、VXLAN、QUIC等。</p>\n</li>\n</ul>\n<p>最后，给你留两个思考题吧。</p>\n<ol>\n<li>\n<p>都说TCP是面向连接的，在计算机看来，怎么样才算一个连接呢？</p>\n</li>\n<li>\n<p>你知道TCP的连接是如何建立，又是如何关闭的吗？</p>\n</li>\n</ol>\n<p>欢迎你留言和讨论。趣谈网络协议，我们下期见！</p>\n","neighbors":{"left":{"article_title":"第9讲 | 路由协议：西出网关无故人，敢问路在何方","id":8729},"right":{"article_title":"第11讲 | TCP协议（上）：因性恶而复杂，先恶后善反轻松","id":8975}},"comments":[{"had_liked":false,"id":13556,"user_name":"iiwoai","can_delete":false,"product_type":"c1","uid":1159368,"ip_address":"","ucode":"ADAE57FD62A15B","user_header":"https://static001.geekbang.org/account/avatar/00/11/b0/c8/342a063f.jpg","comment_is_top":false,"comment_ctime":1529758813,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"1234185372765","product_id":100007101,"comment_content":"每次最后的问题，应该在第二次讲课的时候给答案说出来啊","like_count":288,"discussions":[{"author":{"id":1026857,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ab/29/53afdb24.jpg","nickname":"量子纠结","note":"","ucode":"564D9BADCD5C34","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":365733,"discussion_content":"自己把评论看一遍，问题答案会有的，甚至是更透彻","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1617872311,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1304851,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e9/13/68bdadf0.jpg","nickname":"小德","note":"","ucode":"0B9F85E8E55747","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":280093,"discussion_content":"同意，要不每次提了问题又不解答","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1591492190,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1202089,"avatar":"https://static001.geekbang.org/account/avatar/00/12/57/a9/9abbe7a4.jpg","nickname":"神三元","note":"","ucode":"0FB2E7C0683599","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":150090,"discussion_content":"是啊，老师人呢","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1579788746,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1037940,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/d6/74/6f04af6f.jpg","nickname":"鸿溟","note":"","ucode":"C8FC4C3DB6161E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282025,"discussion_content":"老师应该是想让自己总结答案吧，大多数问题的答案其实都在后一节的课程中提到了","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1591863333,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121576,"user_name":"李小四","can_delete":false,"product_type":"c1","uid":1112747,"ip_address":"","ucode":"2A766BE16B276B","user_header":"https://static001.geekbang.org/account/avatar/00/10/fa/ab/0d39e745.jpg","comment_is_top":false,"comment_ctime":1565161186,"is_pvip":false,"replies":[{"id":"46347","content":"这个比喻太好了，对的TCP不是桥，是在码头上增加了记录人员，核查人员和督导人员","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1566296581,"ip_address":"","comment_id":121576,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1010882475746","product_id":100007101,"comment_content":"网络_10<br># 作业<br>- 连接：在自己监听的端口接收到连接的请求，然后经过“三次握手”，维护一定的数据结构和对方的信息，确认了该信息：我发的内容对方会接收，对方发的内容我也会接收，直到连接断开。<br>- 断开：经过“四次挥手”确保双方都知道且同意对方断开连接，然后在remove为对方维护的数据结构和信息，对方之后发送的包也不会接收，直到 再次连接。<br><br>我看到有的同学说，TCP是建立了一座桥，我认为这个比喻不恰当，TCP更好的比喻是在码头上增加了记录人员，核查人员和督导人员，至于IP层和数据链路层，它没有任何改造。<br>","like_count":236,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461859,"discussion_content":"这个比喻太好了，对的TCP不是桥，是在码头上增加了记录人员，核查人员和督导人员","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566296581,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1042354,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/e7/b2/334bc992.jpg","nickname":"AlfredLover","note":"","ucode":"A3A998F362CC37","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301097,"discussion_content":"remove为对方维护的数据结构和信息 这里不是立马remove，而是隔一段时间才remove吧？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598406663,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1625233,"avatar":"https://static001.geekbang.org/account/avatar/00/18/cc/91/d56a81af.jpg","nickname":"CoderArthur","note":"","ucode":"5B591914F0F67C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":107471,"discussion_content":"同一个tcp的两个包，路由路径会一样吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577583197,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1652085,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKORTofsU89GYKtywquzKuEiabvZnEOonfMYKuCPlo8GDlXqZuJdBicu0XtlaeodH4BnmHV1kldSAwQ/132","nickname":"未来怎样","note":"","ucode":"4E54EB62595B27","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1625233,"avatar":"https://static001.geekbang.org/account/avatar/00/18/cc/91/d56a81af.jpg","nickname":"CoderArthur","note":"","ucode":"5B591914F0F67C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":206284,"discussion_content":"不一定","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584374268,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":107471,"ip_address":""},"score":206284,"extra":""}]}]},{"had_liked":false,"id":108847,"user_name":"Richie","can_delete":false,"product_type":"c1","uid":1019588,"ip_address":"","ucode":"12314EF0347693","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8e/c4/8d1150f3.jpg","comment_is_top":false,"comment_ctime":1561900186,"is_pvip":false,"replies":[{"id":"48818","content":"理解的太对了","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567499106,"ip_address":"","comment_id":108847,"utype":1}],"discussion_count":5,"race_medal":0,"score":"611447256218","product_id":100007101,"comment_content":"TCP&#47;UDP建立连接的本质就是在客户端和服务端各自维护一定的数据结构（一种状态机），来记录和维护这个“连接”的状态 。并不是真的会在这两个端之间有一条类似“网络专线”这么一个东西（在学网络协议之前脑海里是这么想象的）。<br><br>在IP层，网络情况该不稳定还是不稳定，数据传输走的是什么路径上层是控制不了的，TCP能做的只能是做更多判断，更多重试，更多拥塞控制之类的东西。<br>","like_count":143,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456137,"discussion_content":"理解的太对了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567499106,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574239,"discussion_content":"UDP并不会建立连接。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653919511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1967769,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/06/99/ed00cd77.jpg","nickname":"MYL","note":"","ucode":"D6AC234A51C259","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570519,"discussion_content":"感谢！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651804155,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1124075,"avatar":"https://static001.geekbang.org/account/avatar/00/11/26/eb/24e0ac9c.jpg","nickname":"嬴梦川","note":"","ucode":"104CDFD26A1711","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339248,"discussion_content":"一针见血，直戳要害","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609579690,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1019588,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8e/c4/8d1150f3.jpg","nickname":"Richie","note":"","ucode":"12314EF0347693","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1124075,"avatar":"https://static001.geekbang.org/account/avatar/00/11/26/eb/24e0ac9c.jpg","nickname":"嬴梦川","note":"","ucode":"104CDFD26A1711","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340330,"discussion_content":"谢谢！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609981176,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":339248,"ip_address":""},"score":340330,"extra":""}]}]},{"had_liked":false,"id":69324,"user_name":"仁者","can_delete":false,"product_type":"c1","uid":1130632,"ip_address":"","ucode":"EE2BA3A7FA34BC","user_header":"https://static001.geekbang.org/account/avatar/00/11/40/88/b36caddb.jpg","comment_is_top":false,"comment_ctime":1550717681,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"297903461105","product_id":100007101,"comment_content":"我们可以把发送端和接收端比作河流的两端，把传输的数据包比作运送的石料。TCP 是先搭桥（即建立连接）再一车一车地运（即面向数据流），确保可以顺利到达河对岸，当遇到桥上运输车辆较多时可以自行控制快慢（即拥堵控制）；UDP 则是靠手一个一个地扔（即无连接、基于数据报），不管货物能否顺利到达河对岸，也不关心扔的快慢频率。","like_count":70},{"had_liked":false,"id":11884,"user_name":"赵强强","can_delete":false,"product_type":"c1","uid":1073596,"ip_address":"","ucode":"1B8AE07484C69A","user_header":"https://static001.geekbang.org/account/avatar/00/10/61/bc/88a905a5.jpg","comment_is_top":false,"comment_ctime":1528421445,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"126082473029","product_id":100007101,"comment_content":"第一个问题:TCP连接是通过三次握手建立连接，四次挥手释放连接，这里的连接是指彼此可以感知到对方的存在，计算机两端表现为socket,有对应的接受缓存和发送缓存，有相应的拥塞控制策略","like_count":29},{"had_liked":false,"id":12119,"user_name":"Mr.Peng","can_delete":false,"product_type":"c1","uid":1060524,"ip_address":"","ucode":"2FC3100578147C","user_header":"https://static001.geekbang.org/account/avatar/00/10/2e/ac/7f056518.jpg","comment_is_top":false,"comment_ctime":1528599781,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"117492716773","product_id":100007101,"comment_content":"对包分析的工具及书籍分享一些！","like_count":27,"discussions":[{"author":{"id":1000584,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/44/88/b3653ec2.jpg","nickname":"杜义强","note":"","ucode":"D023B9C3319965","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378840,"discussion_content":"wireshark","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1623460180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24341,"user_name":"Havid","can_delete":false,"product_type":"c1","uid":1221633,"ip_address":"","ucode":"2933B4F49D7520","user_header":"https://static001.geekbang.org/account/avatar/00/12/a4/01/22729368.jpg","comment_is_top":false,"comment_ctime":1536912630,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"108911095030","product_id":100007101,"comment_content":"包最终都是通过链路层、物量层这样子一个一个出去的，所以连接只是一种逻辑术语，并不存在像管道那样子的东西，连接在这里相当于双方一种约定，双方按说好的规矩维护状态。","like_count":26},{"had_liked":false,"id":12422,"user_name":"Chok Wah","can_delete":false,"product_type":"c1","uid":1147040,"ip_address":"","ucode":"4DD3D6E978BA36","user_header":"https://static001.geekbang.org/account/avatar/00/11/80/a0/26a8d76b.jpg","comment_is_top":false,"comment_ctime":1528812953,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"83133191577","product_id":100007101,"comment_content":"可以详细讲讲UDP常见小技巧，面试常问。<br>比如UDP发过去怎么确认收到；<br>基于UDP封装的协议一般会做哪些措施。","like_count":19,"discussions":[{"author":{"id":2032840,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/04/c8/3c7af100.jpg","nickname":"Javatar","note":"","ucode":"E216645CDF632C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296228,"discussion_content":"UDP不会确认，发完就发完了，不管了。","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1596472928,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":11901,"user_name":"蓝色理想","can_delete":false,"product_type":"c1","uid":1015043,"ip_address":"","ucode":"43C8D83DC19A17","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7d/03/4e71c307.jpg","comment_is_top":false,"comment_ctime":1528426679,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"70247903415","product_id":100007101,"comment_content":"似懂非懂，看来还是没懂╯□╰…如果有代码演示看看效果就很好了👍","like_count":16,"discussions":[{"author":{"id":1234591,"avatar":"https://static001.geekbang.org/account/avatar/00/12/d6/9f/0213e8a0.jpg","nickname":"🤪HappyJoo","note":"","ucode":"96E1858F06BABA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":264679,"discussion_content":"没有必要吧，网络协议一般不需要讲的那么深，平时都用不到吧？我猜只要理解大概的原理就够了。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1589343618,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2913864,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/MYShyjtRtib2GIQiaK4hV3ZP9pQ1qiaS74DA4K4YHY4SIiaFDfsCKgiaMWwm9zFsSn3bt5pawp5Kdn5MWgiaw5909nug/132","nickname":"Geek_aa1c31","note":"","ucode":"1AC14C053638AF","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559323,"discussion_content":"协议是一种来说约定,  就像是说明文档, 并不于具体的实现代码挂钩哦~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648706269,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1124075,"avatar":"https://static001.geekbang.org/account/avatar/00/11/26/eb/24e0ac9c.jpg","nickname":"嬴梦川","note":"","ucode":"104CDFD26A1711","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339251,"discussion_content":"这个赞同，有个整体图景就可以了，如果不是专业做网络这块的话","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609580234,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":26485,"user_name":"耿老的竹林","can_delete":false,"product_type":"c1","uid":1077159,"ip_address":"","ucode":"AACE6B6CF786AF","user_header":"https://static001.geekbang.org/account/avatar/00/10/6f/a7/0bc9616f.jpg","comment_is_top":false,"comment_ctime":1537618796,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"57372193644","product_id":100007101,"comment_content":"<br>UDP协议看起来简单，恰恰提供给了巨大的扩展空间。","like_count":14,"discussions":[{"author":{"id":1124075,"avatar":"https://static001.geekbang.org/account/avatar/00/11/26/eb/24e0ac9c.jpg","nickname":"嬴梦川","note":"","ucode":"104CDFD26A1711","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339252,"discussion_content":"正因为简单，才提供了这么大的可塑性啊","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1609580256,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":11920,"user_name":"Yang","can_delete":false,"product_type":"c1","uid":1001663,"ip_address":"","ucode":"E9173DC9D79C8E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/bf/a9c9b1a1.jpg","comment_is_top":false,"comment_ctime":1528434094,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"57363008942","product_id":100007101,"comment_content":"连接:3次握手之后，咱俩之间确认自己发的东西对方都能收到，然后咱俩各自维护这种状态！连接就建立了……","like_count":13},{"had_liked":false,"id":11975,"user_name":"埃罗芒阿老师","can_delete":false,"product_type":"c1","uid":1134044,"ip_address":"","ucode":"6A6FB0ACC2C036","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/dc/87809ad2.jpg","comment_is_top":false,"comment_ctime":1528475008,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"44478147968","product_id":100007101,"comment_content":"1.两端各自记录对方的IP端口序列号连接状态等，并且维护连接状态<br>2.三次握手四次挥手","like_count":10},{"had_liked":false,"id":14618,"user_name":"Untitled","can_delete":false,"product_type":"c1","uid":1039464,"ip_address":"","ucode":"8DD6ABA3E81A2E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/dc/68/006ba72c.jpg","comment_is_top":false,"comment_ctime":1530578165,"is_pvip":false,"discussion_count":1,"race_medal":2,"score":"27300381941","product_id":100007101,"comment_content":"以前觉得UDT应用不广，听了课之后觉得UDT的应用很多，但实际怎么查看应用用的是TCP还是UDP<br>呢？","like_count":6,"discussions":[{"author":{"id":1000018,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/42/52/19553613.jpg","nickname":"刘培培","note":"","ucode":"77D1914E50E7E5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6370,"discussion_content":"抓包分析","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1566872170,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":14534,"user_name":"次郎","can_delete":false,"product_type":"c1","uid":1134620,"ip_address":"","ucode":"446499E130A66A","user_header":"https://static001.geekbang.org/account/avatar/00/11/50/1c/26dc1927.jpg","comment_is_top":false,"comment_ctime":1530516683,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23005353163","product_id":100007101,"comment_content":"能不能讲解一些打洞之类的知识？","like_count":5},{"had_liked":false,"id":12803,"user_name":"小q","can_delete":false,"product_type":"c1","uid":1139211,"ip_address":"","ucode":"4999C88996BE61","user_header":"https://static001.geekbang.org/account/avatar/00/11/62/0b/13ee0753.jpg","comment_is_top":false,"comment_ctime":1529043618,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"23003880098","product_id":100007101,"comment_content":"上面说可以推荐本分接析包的书籍，是什么书呀","like_count":5,"discussions":[{"author":{"id":1453131,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/4wiaKDwz4YI8B68hLd7qSa6SrIOqkBo67Y7gcIFevGHgaAKzbK5PoXcIJJhrmkzKyWvWOkYcMs66iav5EVbHZ9ag/132","nickname":"Geek__ILoveStudyAndWork","note":"","ucode":"47FFA5F59019CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531039,"discussion_content":"林沛满-wireshark网络分析就这么简单","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637210993,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":11922,"user_name":"Yangjing","can_delete":false,"product_type":"c1","uid":1018061,"ip_address":"","ucode":"D88DFD4958D07C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/88/cd/2c3808ce.jpg","comment_is_top":false,"comment_ctime":1528435717,"is_pvip":true,"replies":[{"id":"3907","content":"因为是音频课程，所以不太适合对包进行分析讲解，但是可以推荐本书，有很多书已经非常好了","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1528446550,"ip_address":"","comment_id":11922,"utype":1}],"discussion_count":8,"race_medal":0,"score":"23003272197","product_id":100007101,"comment_content":"后面可以讲一下实际的分析不？比如用工具 wireshark 对包进行分析讲解，自己能看懂一部分简单的","like_count":5,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":419046,"discussion_content":"因为是音频课程，所以不太适合对包进行分析讲解，但是可以推荐本书，有很多书已经非常好了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1528446550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181650,"avatar":"https://static001.geekbang.org/account/avatar/00/12/07/d2/0d7ee298.jpg","nickname":"惘 闻","note":"","ucode":"C5909F034BF072","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296872,"discussion_content":"卧槽  你倒是推荐啊","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1596693628,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2096243,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/fc/73/64b0d20e.jpg","nickname":"Saxon Lee","note":"","ucode":"38D656829A0513","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181650,"avatar":"https://static001.geekbang.org/account/avatar/00/12/07/d2/0d7ee298.jpg","nickname":"惘 闻","note":"","ucode":"C5909F034BF072","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298480,"discussion_content":"暴躁老哥哈哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597307830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":296872,"ip_address":""},"score":298480,"extra":""},{"author":{"id":2216844,"avatar":"https://static001.geekbang.org/account/avatar/00/21/d3/8c/28ce0e71.jpg","nickname":"叁碎","note":"","ucode":"8E5F7D2830DBB3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181650,"avatar":"https://static001.geekbang.org/account/avatar/00/12/07/d2/0d7ee298.jpg","nickname":"惘 闻","note":"","ucode":"C5909F034BF072","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328594,"discussion_content":"老哥 稳","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606187891,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":296872,"ip_address":""},"score":328594,"extra":""}]},{"author":{"id":1257422,"avatar":"https://static001.geekbang.org/account/avatar/00/13/2f/ce/c72d4c67.jpg","nickname":"movesan","note":"","ucode":"29CDF0F2B604C8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":174486,"discussion_content":"老师你说推荐本书，倒是说啊[哭笑脸][哭笑脸][哭笑脸]","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1581922532,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1099170,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c5/a2/4ece341b.jpg","nickname":"Ivan.Qi","note":"","ucode":"36F46A4D1F0EAA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297478,"discussion_content":"《Wireshark网络分析就这么简单》《wireshark网络分析的艺术》","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1596948172,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2591874,"avatar":"","nickname":"Geek_5aec96","note":"","ucode":"45345D53041E42","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390500,"discussion_content":"为啥要搞音频？不是视频","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629868257,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1253407,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/HVXxGmWhuagcmojCpMROxLRUdP057D8DzKzLpoXib7PicynvlZVxg0MGeS4qvk20f6I3wXnDhpMQGfPlor0XKc1A/132","nickname":"三行","note":"","ucode":"B85B0D1810EA9B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":112103,"discussion_content":"啥书呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577830737,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43191,"user_name":"HelloBug","can_delete":false,"product_type":"c1","uid":1249598,"ip_address":"","ucode":"E61A4AD5C2F724","user_header":"https://static001.geekbang.org/account/avatar/00/13/11/3e/925aa996.jpg","comment_is_top":false,"comment_ctime":1543195123,"is_pvip":true,"replies":[{"id":"15511","content":"一个tcp连接","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1543232814,"ip_address":"","comment_id":43191,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18723064307","product_id":100007101,"comment_content":"老师好，如何理解HTTP协议的多数据通道共享一个连接？","like_count":4,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430319,"discussion_content":"一个tcp连接","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543232814,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2314165,"avatar":"https://static001.geekbang.org/account/avatar/00/23/4f/b5/bd6140a5.jpg","nickname":"ARM","note":"","ucode":"788FD0DBD39B94","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331200,"discussion_content":"一个http对应UI个TCP》多个一来一回的http对应一个TCP》多个来来回回的http对应一个TCP（管线化）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606806650,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":19107,"user_name":"Eric","can_delete":false,"product_type":"c1","uid":1196906,"ip_address":"","ucode":"C4DA5340DA6165","user_header":"https://static001.geekbang.org/account/avatar/00/12/43/6a/3ea0c553.jpg","comment_is_top":false,"comment_ctime":1533686189,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18713555373","product_id":100007101,"comment_content":"深入浅出，少见的课程，很好！","like_count":4},{"had_liked":false,"id":13679,"user_name":"Skye","can_delete":false,"product_type":"c1","uid":1057533,"ip_address":"","ucode":"F58365BA5CE17E","user_header":"https://static001.geekbang.org/account/avatar/00/10/22/fd/56c4fb54.jpg","comment_is_top":false,"comment_ctime":1529925135,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18709794319","product_id":100007101,"comment_content":"请问老师，TCP自面向字节流，和UDP的数据包具体形式是怎么样的。面向字节流之后下层还怎么封装呀","like_count":4,"discussions":[{"author":{"id":1270969,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/XktNguBOU1CyXt2QoNtY6TAHnfA1QEqXZmdn7whTZggeKSiaibnbRwnHR1T1XqPDQrVJDbUicFw4bXBzlNby71a1g/132","nickname":"夜色下云淡风轻","note":"","ucode":"59C1656AED4792","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546228,"discussion_content":"udp直接把一个完整包发过去，数据不拆分，而tcp是切片编号按顺序一个个发过去收到再组装","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1642240911,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":12083,"user_name":"u","can_delete":false,"product_type":"c1","uid":1140276,"ip_address":"","ucode":"88FA7BA089807C","user_header":"https://static001.geekbang.org/account/avatar/00/11/66/34/0508d9e4.jpg","comment_is_top":false,"comment_ctime":1528557500,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18708426684","product_id":100007101,"comment_content":"听一遍不够，要多听几遍","like_count":4},{"had_liked":false,"id":40199,"user_name":"A-李永军","can_delete":false,"product_type":"c1","uid":1307668,"ip_address":"","ucode":"BED0D78187796A","user_header":"https://static001.geekbang.org/account/avatar/00/13/f4/14/1d235e1c.jpg","comment_is_top":false,"comment_ctime":1542548814,"is_pvip":false,"replies":[{"id":"14514","content":"udp应该一个包是一个，每个都是完整的，不用排序。如果非得要排，就需要应用层自己来排序了","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1542593817,"ip_address":"","comment_id":40199,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14427450702","product_id":100007101,"comment_content":"刘老师，udp传输怎样能避免乱序呢？","like_count":3,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":429422,"discussion_content":"udp应该一个包是一个，每个都是完整的，不用排序。如果非得要排，就需要应用层自己来排序了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1542593817,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2536581,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b4/85/eaffe571.jpg","nickname":"美食家房","note":"","ucode":"8D1DCBE0FC48E4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376262,"discussion_content":"应用层的数据结构里面制定一系列规则来排序？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622040443,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":18930,"user_name":"horsechestnut","can_delete":false,"product_type":"c1","uid":1177115,"ip_address":"","ucode":"6B34233FC08059","user_header":"","comment_is_top":false,"comment_ctime":1533608032,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14418509920","product_id":100007101,"comment_content":"计算机会在内核中维护一个数据结构，以及状态机，去保证tcp是连接的","like_count":3},{"had_liked":false,"id":18345,"user_name":"蔡呆呆","can_delete":false,"product_type":"c1","uid":1074818,"ip_address":"","ucode":"51EDDEFB274CB3","user_header":"https://static001.geekbang.org/account/avatar/00/10/66/82/c2acd57e.jpg","comment_is_top":false,"comment_ctime":1533263678,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14418165566","product_id":100007101,"comment_content":"异步IO是怎么维护TCP连接的呢，不需要每个连接都在内核中维护数据结构吗？","like_count":3},{"had_liked":false,"id":12347,"user_name":"robin","can_delete":false,"product_type":"c1","uid":1133779,"ip_address":"","ucode":"79A6C0A5749B25","user_header":"","comment_is_top":false,"comment_ctime":1528770977,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14413672865","product_id":100007101,"comment_content":"连接是一种状态，建立连接是维持一种状态，维持状态通过一定的数据结构来完成","like_count":3},{"had_liked":false,"id":12006,"user_name":"孙悟空","can_delete":false,"product_type":"c1","uid":1055660,"ip_address":"","ucode":"28356CBC83C464","user_header":"https://static001.geekbang.org/account/avatar/00/10/1b/ac/41ec8c80.jpg","comment_is_top":false,"comment_ctime":1528512742,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14413414630","product_id":100007101,"comment_content":"请教下，这些网络知识如何实践呢","like_count":3},{"had_liked":false,"id":11895,"user_name":"云学","can_delete":false,"product_type":"c1","uid":1027233,"ip_address":"","ucode":"366AE90BA06356","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ac/a1/43d83698.jpg","comment_is_top":false,"comment_ctime":1528423548,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14413325436","product_id":100007101,"comment_content":"作者还懂4G协议呀，厉害","like_count":3},{"had_liked":false,"id":11880,"user_name":"姜戈","can_delete":false,"product_type":"c1","uid":1119654,"ip_address":"","ucode":"8CF8A5AD9A3E10","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/a6/723854ee.jpg","comment_is_top":false,"comment_ctime":1528420286,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14413322174","product_id":100007101,"comment_content":"技术中穿插小故事，大师风范，我等叹服^_^","like_count":3},{"had_liked":false,"id":170517,"user_name":"LH","can_delete":false,"product_type":"c1","uid":1211178,"ip_address":"","ucode":"819B9B2409E834","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/2a/7d8b5943.jpg","comment_is_top":false,"comment_ctime":1578624529,"is_pvip":false,"replies":[{"id":"66275","content":"UDP的头和TCP的头的意思是网络包的头。这里面说的无头无尾的意思是无始无终，除非显式的关闭，可以一直传输。所以两个“头”的意思不是一个意思","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1578823831,"ip_address":"","comment_id":170517,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10168559121","product_id":100007101,"comment_content":"前面说tcp是基于流的传输，无头无尾。后面说UDP的头和tcp不一样，我被搞晕流","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481004,"discussion_content":"UDP的头和TCP的头的意思是网络包的头。这里面说的无头无尾的意思是无始无终，除非显式的关闭，可以一直传输。所以两个“头”的意思不是一个意思","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578823831,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":149465,"user_name":"雨后的夜","can_delete":false,"product_type":"c1","uid":1359202,"ip_address":"","ucode":"0E8C183AEB02EF","user_header":"https://static001.geekbang.org/account/avatar/00/14/bd/62/283e24ab.jpg","comment_is_top":false,"comment_ctime":1573225226,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10163159818","product_id":100007101,"comment_content":"&quot;而这个 RTMP 协议也是基于 TCP 的&quot;  -- 这里是不是搞错了，是UDP吧？","like_count":2},{"had_liked":false,"id":131877,"user_name":"Yang","can_delete":false,"product_type":"c1","uid":1600728,"ip_address":"","ucode":"2503AB441E9CE8","user_header":"https://static001.geekbang.org/account/avatar/00/18/6c/d8/e8eda334.jpg","comment_is_top":false,"comment_ctime":1567947501,"is_pvip":false,"replies":[{"id":"50575","content":"没有特殊要求，就tcp吧","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1568078856,"ip_address":"","comment_id":131877,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10157882093","product_id":100007101,"comment_content":"我想问一下，如果一个公司开发应用，他们可以自己选择用UDP 还是TCP吗？ ","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466661,"discussion_content":"没有特殊要求，就tcp吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568078856,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108521,"user_name":"N_H","can_delete":false,"product_type":"c1","uid":1541386,"ip_address":"","ucode":"109B67557AB3CE","user_header":"https://static001.geekbang.org/account/avatar/00/17/85/0a/e564e572.jpg","comment_is_top":false,"comment_ctime":1561791105,"is_pvip":false,"replies":[{"id":"48824","content":"keepalive","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567499700,"ip_address":"","comment_id":108521,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10151725697","product_id":100007101,"comment_content":"客户端和服务端建立tcp连接时，为了验证连接是否还在，客户端和服务端之间应该会不停地发送一些确认的信息，保证客户端和服务端之间的连接还在。（推测的）","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456022,"discussion_content":"keepalive","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567499700,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91539,"user_name":"Hector","can_delete":false,"product_type":"c1","uid":1496889,"ip_address":"","ucode":"110CAF87ADDC01","user_header":"https://static001.geekbang.org/account/avatar/00/16/d7/39/6698b6a9.jpg","comment_is_top":false,"comment_ctime":1557051230,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10146985822","product_id":100007101,"comment_content":"其实TCP来源于人类的交流，航海的双方通信交流的一个要义我们术语叫double-check.双方建立通信连接和结束会话一模一样，还对重要信息进行复述。","like_count":2},{"had_liked":false,"id":75433,"user_name":"滢","can_delete":false,"product_type":"c1","uid":1221511,"ip_address":"","ucode":"971A6F20AF3F9A","user_header":"https://static001.geekbang.org/account/avatar/00/12/a3/87/c415e370.jpg","comment_is_top":false,"comment_ctime":1552397132,"is_pvip":false,"replies":[{"id":"50256","content":"有校验，没有重传","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567828168,"ip_address":"","comment_id":75433,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10142331724","product_id":100007101,"comment_content":"UDP应该也有错误检测的吧，老师是否补充下UDP检验和^_^","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442890,"discussion_content":"有校验，没有重传","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567828168,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58323,"user_name":"靠人品去赢","can_delete":false,"product_type":"c1","uid":1301286,"ip_address":"","ucode":"7A20F9EBE847E1","user_header":"https://static001.geekbang.org/account/avatar/00/13/db/26/54f2c164.jpg","comment_is_top":false,"comment_ctime":1547036843,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"10136971435","product_id":100007101,"comment_content":"关于协议是有状态的还是无状态的，比喻很通俗易懂，想问一下除了TCP，还有那些协议是有状态的？，毕竟基于TCP的HTTP都是无状态的，想扩展一下思路。","like_count":2,"discussions":[{"author":{"id":2913864,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/MYShyjtRtib2GIQiaK4hV3ZP9pQ1qiaS74DA4K4YHY4SIiaFDfsCKgiaMWwm9zFsSn3bt5pawp5Kdn5MWgiaw5909nug/132","nickname":"Geek_aa1c31","note":"","ucode":"1AC14C053638AF","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559325,"discussion_content":"在网络协议中, 协议是否用有状态往往指的是自身协议的设计,  与下层协议是否有状态并无关系, 就像HTTP下层并不一定要用TCP换成UDP一样也可以~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648706767,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134906,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/3a/95168093.jpg","nickname":"一只智障","note":"","ucode":"AAEDAE771516E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":319458,"discussion_content":"我的理解是http无状态是因为每次建立完链接就释放掉了。 应该是所有基于tcp的链接都是有状态的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604035352,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":14784,"user_name":"硅谷居士","can_delete":false,"product_type":"c1","uid":1018463,"ip_address":"","ucode":"BD3D3BA142F280","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8a/5f/c60d0ffe.jpg","comment_is_top":false,"comment_ctime":1530664354,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10120598946","product_id":100007101,"comment_content":"1. 五元组，协议、本机ip、本机端口、远程主机ip、远程主机端口<br><br>2. 三次握手，四次挥手(也可能是三次挥手)","like_count":2},{"had_liked":false,"id":13397,"user_name":"野山门","can_delete":false,"product_type":"c1","uid":1019276,"ip_address":"","ucode":"4430AF308209A0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/8c/8e3d356c.jpg","comment_is_top":false,"comment_ctime":1529583573,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10119518165","product_id":100007101,"comment_content":"分析的很好。作为程序员经常和TCP和UDP打交道，能行底层原理和优缺点的角度了解，是这个专栏的核心价值。","like_count":2},{"had_liked":false,"id":11863,"user_name":"进阶的码农","can_delete":false,"product_type":"c1","uid":1017821,"ip_address":"","ucode":"D8991282640334","user_header":"https://static001.geekbang.org/account/avatar/00/0f/87/dd/4f53f95d.jpg","comment_is_top":false,"comment_ctime":1528416511,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10118351103","product_id":100007101,"comment_content":"赞 每天早上都要看下是否有更新 期待","like_count":2},{"had_liked":false,"id":135505,"user_name":"杰森莫玛","can_delete":false,"product_type":"c1","uid":1079152,"ip_address":"","ucode":"A29AEC27270657","user_header":"https://static001.geekbang.org/account/avatar/00/10/77/70/466368e1.jpg","comment_is_top":false,"comment_ctime":1569200652,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5864167948","product_id":100007101,"comment_content":"结合现实生活、历史来讲解非常有意思，理解的也更快.不是死板的知识点，感谢老师的分享","like_count":1},{"had_liked":false,"id":130709,"user_name":"葡萄有点酸","can_delete":false,"product_type":"c1","uid":1136529,"ip_address":"","ucode":"51C3CE1E685D8E","user_header":"https://static001.geekbang.org/account/avatar/00/11/57/91/3a082914.jpg","comment_is_top":false,"comment_ctime":1567515761,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5862483057","product_id":100007101,"comment_content":"问题1：三次握手，即双向都有发送和接收，这样就建立起了一个连接；<br>问题2：四次挥手，双向都表示不发送也不接受，这样就断开了一个连接。","like_count":1},{"had_liked":false,"id":80799,"user_name":"天王","can_delete":false,"product_type":"c1","uid":1239337,"ip_address":"","ucode":"C074B2F9A5F007","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/29/629d9bb0.jpg","comment_is_top":false,"comment_ctime":1553735479,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5848702775","product_id":100007101,"comment_content":"UDP和TCP都是基于传输层的协议，UDP和TCP协议的区别是，UDP是无连接的协议，UDP的特性是不保证不丢包，不保证顺序到达，TCP是基于有连接的协议，有连接是说在通讯之前，先建立一个连接，数据在这个连接里面传输，在本地维护一套数据结构来维护和记录状态和传输包的情况。TCP传输的是字节流，UDP传输的是包，构成有源端口号和目标端口号，剩下的就是数据包。UDP适用的场景，1 比较简单不复杂，网络比较好的内网环境2 不需要一对一建立连接处理，广播的模式3对丢包不敏感，没有重传和等待，丢了还继续重传。","like_count":1},{"had_liked":false,"id":24634,"user_name":"Tom","can_delete":false,"product_type":"c1","uid":1109832,"ip_address":"","ucode":"00EEDE4CB11776","user_header":"","comment_is_top":false,"comment_ctime":1537176362,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5832143658","product_id":100007101,"comment_content":"跨路由器的组播，是否意味着可以在内网发组播到路由器连接运营商的端口","like_count":1},{"had_liked":false,"id":22000,"user_name":"SimonKoh","can_delete":false,"product_type":"c1","uid":1115932,"ip_address":"","ucode":"94A91BA4C69FD1","user_header":"https://static001.geekbang.org/account/avatar/00/11/07/1c/a255e6ac.jpg","comment_is_top":false,"comment_ctime":1535432496,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5830399792","product_id":100007101,"comment_content":"老师讲的好棒！ 我觉得要充分吸收老师所讲的东西还是需要有一定的网络基础，推荐b站韩立刚的计算机网络","like_count":1},{"had_liked":false,"id":15998,"user_name":"天天向⬆️","can_delete":false,"product_type":"c1","uid":1169850,"ip_address":"","ucode":"94040EE2B1E75C","user_header":"","comment_is_top":false,"comment_ctime":1531724420,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5826691716","product_id":100007101,"comment_content":"我基础比较差，一时不了解帧，包，流的区别，老师可以通俗的解释一下吗？","like_count":1},{"had_liked":false,"id":12014,"user_name":"没心没肺","can_delete":false,"product_type":"c1","uid":1048207,"ip_address":"","ucode":"2F80ACC4697EEE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fe/8f/466f880d.jpg","comment_is_top":false,"comment_ctime":1528515748,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5823483044","product_id":100007101,"comment_content":"UDP也有春天","like_count":1},{"had_liked":false,"id":11868,"user_name":"I.am DZX","can_delete":false,"product_type":"c1","uid":1122095,"ip_address":"","ucode":"DBE2B7A50C423A","user_header":"https://static001.geekbang.org/account/avatar/00/11/1f/2f/e35d6a1d.jpg","comment_is_top":false,"comment_ctime":1528418506,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5823385802","product_id":100007101,"comment_content":"三次握手<br>四次挥手","like_count":1},{"had_liked":false,"id":357336,"user_name":"小杰","can_delete":false,"product_type":"c1","uid":2853200,"ip_address":"浙江","ucode":"BBDF8E9F348F65","user_header":"https://static001.geekbang.org/account/avatar/00/2b/89/50/aee9fdab.jpg","comment_is_top":false,"comment_ctime":1663162699,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1663162699","product_id":100007101,"comment_content":"1、链接是逻辑上的，对计算机来说，只知道端口，ip，mac，以及维护他们的数据结构。2、一问一答搞三次。哦这个是建立链接，还有一个是断开链接，那就是4次问答了。说实话，具体为什么要这样做不知道为什么？但是老师在下一讲肯定会有","like_count":0},{"had_liked":false,"id":330147,"user_name":"孙新","can_delete":false,"product_type":"c1","uid":2875594,"ip_address":"","ucode":"A80038A479B943","user_header":"https://static001.geekbang.org/account/avatar/00/2b/e0/ca/adfaa551.jpg","comment_is_top":false,"comment_ctime":1641815509,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1641815509","product_id":100007101,"comment_content":"求问老师和各位大佬，有没有什么稍微深入一点的udp相关的网络或者网络编程书籍推荐的。有时候碰到的困惑问题真的比较难解决，也没有人问。身边都同是c++开发，不太懂深入的网络方面的问题。","like_count":0},{"had_liked":false,"id":322207,"user_name":"mickey","can_delete":false,"product_type":"c1","uid":1051663,"ip_address":"","ucode":"8B490C2DDE4010","user_header":"https://static001.geekbang.org/account/avatar/00/10/0c/0f/93d1c8eb.jpg","comment_is_top":false,"comment_ctime":1637237242,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637237242","product_id":100007101,"comment_content":"TCP 三次握手，四次分手。","like_count":0},{"had_liked":false,"id":309319,"user_name":"陈阳","can_delete":false,"product_type":"c1","uid":2653715,"ip_address":"","ucode":"C8E676C967D23A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKib3vNM6TPT1umvR3TictnLurJPKuQq4iblH5upgBB3kHL9hoN3Pgh3MaR2rjz6fWgMiaDpicd8R5wsAQ/132","comment_is_top":false,"comment_ctime":1630044368,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1630044368","product_id":100007101,"comment_content":"文中：“再如，TCP 是面向字节流的。发送的时候发的是一个流，没头没尾。IP 包可不是一个流，而是一个个的 IP 包。之所以变成了流，这也是 TCP 自己的状态维护做的事情。而 UDP 继承了 IP 的特性，基于数据报的，一个一个地发，一个一个地收。”<br>这一段怎么理解？ 怎么定义字节流和数据包， 我认为的数据包应该也是二进制字节数组啊<br>","like_count":0},{"had_liked":false,"id":300537,"user_name":"Geek_5baa01","can_delete":false,"product_type":"c1","uid":2470693,"ip_address":"","ucode":"EE194170C4B30E","user_header":"","comment_is_top":false,"comment_ctime":1625210399,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625210399","product_id":100007101,"comment_content":"1. 都说 TCP 是面向连接的，在计算机看来，怎么样才算一个连接呢？<br><br>有目标的链接信息，比如端口，然后目标的心跳正常<br><br>2。你知道 TCP 的连接是如何建立，又是如何关闭的吗？<br><br>3次握手，4次挥手","like_count":0},{"had_liked":false,"id":289859,"user_name":"没有軒的筝","can_delete":false,"product_type":"c1","uid":1332535,"ip_address":"","ucode":"8B6A8A1B5472EE","user_header":"https://static001.geekbang.org/account/avatar/00/14/55/37/57aeb6af.jpg","comment_is_top":false,"comment_ctime":1619233390,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619233390","product_id":100007101,"comment_content":"1：先说说传输层，传输层是提供应用进程间的逻辑通信，而这逻辑通信有主要的两种方式或者协议，TCP和UDP；应用程序在使用TCP协议传输之前，必须先建立连接，就像打电话一样，先拨通号确定对方已经接通，然后进行通话，最后挂断通话；有人会问，TCP连接到底能解决什么问题，不先连接行不行?首先第一要解决的问题是客户端和服务端要通信，双方必须都得知道对方已经存在，要不然你传也白传，还浪费资源，第二协商一些参数（这个大家可以下面自行了解），第三对资源的分配，比如TCP缓存大小；最后说一下网络层和传输层，网络层和传输层都是提供逻辑通信，网络层是为主机之间提供逻辑通信，运输层是为应用进程之间提供端到端的逻辑通信","like_count":0},{"had_liked":false,"id":285638,"user_name":"Wangyf","can_delete":false,"product_type":"c1","uid":2226219,"ip_address":"","ucode":"349068A07CB1D4","user_header":"https://static001.geekbang.org/account/avatar/00/21/f8/2b/339660f1.jpg","comment_is_top":false,"comment_ctime":1616933793,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1616933793","product_id":100007101,"comment_content":"有一个问题，既然 UDP 是无连接的，那么第一次发送 UDP 的时候，目的端口号是怎么获取的？<br>看网上说，服务器里的服务使用的都是 1024 以内的数字，那这也说得通。那如果假设服务器上运行的是自定义的服务，没有使用 1024 以内的端口，那么该如何让源主机知道，在监听哪个端口？人肉通知吗？","like_count":0},{"had_liked":false,"id":281594,"user_name":"余巍","can_delete":false,"product_type":"c1","uid":1995082,"ip_address":"","ucode":"B0819C42A82371","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI0eGJygV4lh6PJuotKrz1jsZcOdNiaHnUC3y5A2O3yudUQLkzOE8758icDoXlvgpytQ50ibSIc9nJmg/132","comment_is_top":false,"comment_ctime":1614821752,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1614821752","product_id":100007101,"comment_content":"本质上网络上包数据该丢还是丢，udp和tcp都是算法上的实现策略，我理解udp和tcp就像两个极端，很多时候我们更需要中庸一些的策略（算法实现）","like_count":0},{"had_liked":false,"id":268731,"user_name":"你听得到","can_delete":false,"product_type":"c1","uid":1218472,"ip_address":"","ucode":"F4BB5EDE60D3FB","user_header":"https://static001.geekbang.org/account/avatar/00/12/97/a8/779cdd2f.jpg","comment_is_top":false,"comment_ctime":1608310426,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1608310426","product_id":100007101,"comment_content":"statsd 也是使用 UDP 协议的","like_count":0},{"had_liked":false,"id":266460,"user_name":"🍓准准","can_delete":false,"product_type":"c1","uid":1130447,"ip_address":"","ucode":"79D9BAB51566B3","user_header":"https://static001.geekbang.org/account/avatar/00/11/3f/cf/854ae8fa.jpg","comment_is_top":false,"comment_ctime":1607345674,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607345674","product_id":100007101,"comment_content":"有个问题 如果按照tcp强顺序执行的话，像kafka这种有ack参数的，ack=0接许顺序不一致，所以kafka是基于udp的吗","like_count":0},{"had_liked":false,"id":259954,"user_name":"潇潇雨歇","can_delete":false,"product_type":"c1","uid":1251429,"ip_address":"","ucode":"4BD52BF0F0A084","user_header":"https://static001.geekbang.org/account/avatar/00/13/18/65/35361f02.jpg","comment_is_top":false,"comment_ctime":1604896031,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1604896031","product_id":100007101,"comment_content":"1、客户端与服务端建立通信，双方都能请求应答<br>2、三次握手和四次挥手","like_count":0},{"had_liked":false,"id":254834,"user_name":"陈德伟","can_delete":false,"product_type":"c1","uid":1106323,"ip_address":"","ucode":"5250CCF3937854","user_header":"https://static001.geekbang.org/account/avatar/00/10/e1/93/365ba71d.jpg","comment_is_top":false,"comment_ctime":1603197100,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603197100","product_id":100007101,"comment_content":"1，在计算机看来，TCP连接就是维护了一个占位符或则socket结构数据符号，标记一下状态<br>2，tcp三次握手建立连接、四次挥手释放连接","like_count":0},{"had_liked":false,"id":248354,"user_name":"King-ZJ","can_delete":false,"product_type":"c1","uid":1915385,"ip_address":"","ucode":"7448A4BBB5A118","user_header":"https://static001.geekbang.org/account/avatar/00/1d/39/f9/b946719a.jpg","comment_is_top":false,"comment_ctime":1600132630,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1600132630","product_id":100007101,"comment_content":"传输层一直都是自己的痛点，对于UDP知识点觉得简单，却没有和TCP联系在一起进行对比学习，从而学透。","like_count":0},{"had_liked":false,"id":246958,"user_name":"大土豆","can_delete":false,"product_type":"c1","uid":1121636,"ip_address":"","ucode":"67445DC3EC9DB0","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/64/52a5863b.jpg","comment_is_top":false,"comment_ctime":1599541140,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1599541140","product_id":100007101,"comment_content":"有一个问题，为什么udp的包头需要长度字段，ip包不是已经有长度了吗？基于ip的icmp包也没有长度字段。","like_count":0},{"had_liked":false,"id":242700,"user_name":"郑祖煌","can_delete":false,"product_type":"c1","uid":1469608,"ip_address":"","ucode":"49A0D2E3279826","user_header":"https://static001.geekbang.org/account/avatar/00/16/6c/a8/1922a0f5.jpg","comment_is_top":false,"comment_ctime":1597819779,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597819779","product_id":100007101,"comment_content":"1.简历连接，就是在收发数据之前已经确保通路之间是没有问题的了，通过三次握手已经确定了。同时确定后的连接，收发双方都会维护了相关的信息和状态。<br>2.通过三次握手建立连接 ，通过四次挥手来断开连接。","like_count":0},{"had_liked":false,"id":237458,"user_name":"天然","can_delete":false,"product_type":"c1","uid":1435982,"ip_address":"","ucode":"0F12BD470A8104","user_header":"https://static001.geekbang.org/account/avatar/00/15/e9/4e/22c73926.jpg","comment_is_top":false,"comment_ctime":1595836922,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595836922","product_id":100007101,"comment_content":"老师您好，最近碰到个问题。linux服务器用tcpdump能抓取到发过来的syslog日志，但是程序读取不到，想问下您可能是什么原因呢？用root用户，日志端口是11001","like_count":0},{"had_liked":false,"id":233940,"user_name":"蓝士钦","can_delete":false,"product_type":"c1","uid":1229516,"ip_address":"","ucode":"726EB5C8EF1249","user_header":"https://static001.geekbang.org/account/avatar/00/12/c2/cc/ca22bb7c.jpg","comment_is_top":false,"comment_ctime":1594525484,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594525484","product_id":100007101,"comment_content":"文章中说到移动通讯领域4G的上网数据是营运商自定义的UDP，那么我们移动设备打开浏览器访问网络的时候，难道不是TCP吗？","like_count":0},{"had_liked":false,"id":227048,"user_name":"wanj","can_delete":false,"product_type":"c1","uid":1259549,"ip_address":"","ucode":"BE9ECC67ABC004","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLnYfSUc8hJ3oLfa39qkNiaXNibs3VyAbgT7ZXasZXp89fRL7YBakIZdNNEE7kClOjN2KpBUuGpacfQ/132","comment_is_top":false,"comment_ctime":1592272319,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592272319","product_id":100007101,"comment_content":"问题1：tcp的客户端和服务端都会维护一个状态机，当两端通过握手协议，状态机的都太都为established时，即视为建立了连接。","like_count":0},{"had_liked":false,"id":226495,"user_name":"鼠里鼠气","can_delete":false,"product_type":"c1","uid":1696883,"ip_address":"","ucode":"4793476BBDB202","user_header":"https://static001.geekbang.org/account/avatar/00/19/e4/73/74dce191.jpg","comment_is_top":false,"comment_ctime":1592122145,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592122145","product_id":100007101,"comment_content":"对于&quot;TCP是面向字节流&quot;的理解：在网络环境不好的情况下，假设应用层一次性给了传输层很多的数据，这些数据被放在传输层的缓存中。在传输数据的时候，TCP会根据窗口大小等条件，将数据进行分组(分包)，这些分组向下传递，层层封装，最终成为网络上传送的数据包。而我们不应该认为 应用层给的数据会被一次性的传输走，所以这个&quot;流&quot;，我认为可以理解成一个大桶里装满水，分几次倒出来。(前提，你认为一次性倒出来不好。)  <br>不知道理解得对不对?还望大神指点！！","like_count":0},{"had_liked":false,"id":213486,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1588431081,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588431081","product_id":100007101,"comment_content":"之前运维说“UDP风暴”很可怕，所以内网禁止了UDP，真正的互联网也会出现禁止UDP的网关，导致消息发布出去吗？","like_count":0},{"had_liked":false,"id":210971,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1587871950,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587871950","product_id":100007101,"comment_content":"TCP的建立连接,是通过了三次握手来让建立连接的双方彼此感知到了,这就是建立连接,而关闭连接则是四次挥手,正式下达分手通知书","like_count":0},{"had_liked":false,"id":204772,"user_name":"看不见的城市","can_delete":false,"product_type":"c1","uid":1905705,"ip_address":"","ucode":"A33F894543C90F","user_header":"https://static001.geekbang.org/account/avatar/00/1d/14/29/48ad4b9d.jpg","comment_is_top":false,"comment_ctime":1586454851,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586454851","product_id":100007101,"comment_content":"接收乱序的数据包后，会怎样，如果包都丢失，有序无序有区别吗","like_count":0},{"had_liked":false,"id":201961,"user_name":"KK","can_delete":false,"product_type":"c1","uid":1324863,"ip_address":"","ucode":"FFC31A3FE3A285","user_header":"https://static001.geekbang.org/account/avatar/00/14/37/3f/a9127a73.jpg","comment_is_top":false,"comment_ctime":1585882380,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1585882380","product_id":100007101,"comment_content":"通过这样的对比，对于TCP与UDP的理解更深刻了。同时，对于UDP的使用也了解到了更多。","like_count":0},{"had_liked":false,"id":201126,"user_name":"yuliz","can_delete":false,"product_type":"c1","uid":1080693,"ip_address":"","ucode":"BFF5B4606559E6","user_header":"https://static001.geekbang.org/account/avatar/00/10/7d/75/c812597b.jpg","comment_is_top":false,"comment_ctime":1585720619,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585720619","product_id":100007101,"comment_content":"。。。小孩子的特性不是愣头青。。。。","like_count":0},{"had_liked":false,"id":193357,"user_name":"Geek_f0bd6b","can_delete":false,"product_type":"c1","uid":1905495,"ip_address":"","ucode":"54C2BD14F77F72","user_header":"","comment_is_top":false,"comment_ctime":1584890910,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584890910","product_id":100007101,"comment_content":"性善，尽力而为，这两个褒义词，值得献给IT人！","like_count":0},{"had_liked":false,"id":191432,"user_name":"King-ZJ","can_delete":false,"product_type":"c1","uid":1915385,"ip_address":"","ucode":"7448A4BBB5A118","user_header":"https://static001.geekbang.org/account/avatar/00/1d/39/f9/b946719a.jpg","comment_is_top":false,"comment_ctime":1584772526,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584772526","product_id":100007101,"comment_content":"这节讲到传输层：UDP和TCP。UDP简单、时延小，在如今追求更快的时代有很多应用都是基于UDP的；TCP可靠，对于追求稳的应用是基于TCP的。不同的一些都有各自的优缺点，就如人一样，找到长处优点，基于这些优势发挥出你的魅力，这也是很美妙的事情。","like_count":0},{"had_liked":false,"id":144246,"user_name":"扶幽","can_delete":false,"product_type":"c1","uid":1322612,"ip_address":"","ucode":"1400EDFF8970D3","user_header":"https://static001.geekbang.org/account/avatar/00/14/2e/74/88c613e0.jpg","comment_is_top":false,"comment_ctime":1571882115,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571882115","product_id":100007101,"comment_content":"怎样才算是一个连接呢？","like_count":0},{"had_liked":false,"id":142161,"user_name":"wd2010","can_delete":false,"product_type":"c1","uid":1691581,"ip_address":"","ucode":"E194E4EFECA013","user_header":"https://static001.geekbang.org/account/avatar/00/19/cf/bd/4fa01a1c.jpg","comment_is_top":false,"comment_ctime":1571302266,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571302266","product_id":100007101,"comment_content":"老师，请问这些网络知识如何实践呢","like_count":0},{"had_liked":false,"id":136601,"user_name":"chenhz","can_delete":false,"product_type":"c1","uid":1078160,"ip_address":"","ucode":"485420EA3282D4","user_header":"https://static001.geekbang.org/account/avatar/00/10/73/90/9118f46d.jpg","comment_is_top":false,"comment_ctime":1569479601,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1569479601","product_id":100007101,"comment_content":"&quot;但是 TCP 的严格顺序策略使得哪怕共享通道，前一个不来，后一个和前一个即便没关系，也要等着，时延也会加大。&quot;<br><br>HTTP 1.1 数据包请求响应是异步的，同一个站点同时发起请求，不需要排队的吧？","like_count":0,"discussions":[{"author":{"id":1210265,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Gswh7ibY4tubXhp0BXOmV2pXZ3XsXic1d942ZMAEgWrRSF99bDskOTsG1g172ibORXxSCWTn9HWUX5vSSUVWU5I4A/132","nickname":"奔奔奔跑","note":"","ucode":"F86EC205DCAACE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":274365,"discussion_content":"HTTP2才不要","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590574845,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133639,"user_name":"纯洁的憎恶","can_delete":false,"product_type":"c1","uid":1130512,"ip_address":"","ucode":"5E9757DE6F45DF","user_header":"https://static001.geekbang.org/account/avatar/00/11/40/10/b6bf3c3c.jpg","comment_is_top":false,"comment_ctime":1568625830,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1568625830","product_id":100007101,"comment_content":"当前不确认，后续不传输，看来是TCP影响实时响应的罪魁祸首啊。","like_count":0},{"had_liked":false,"id":131605,"user_name":"月成FUN","can_delete":false,"product_type":"c1","uid":1616728,"ip_address":"","ucode":"75EE9B951D73CF","user_header":"https://static001.geekbang.org/account/avatar/00/18/ab/58/ae036dfc.jpg","comment_is_top":false,"comment_ctime":1567824117,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567824117","product_id":100007101,"comment_content":"计算机看来，两端维护相同的数据结构就相当于建立连接了吧","like_count":0},{"had_liked":false,"id":123707,"user_name":"Better me","can_delete":false,"product_type":"c1","uid":1261959,"ip_address":"","ucode":"CADF08D357489A","user_header":"https://static001.geekbang.org/account/avatar/00/13/41/87/46d7e1c2.jpg","comment_is_top":false,"comment_ctime":1565745770,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1565745770","product_id":100007101,"comment_content":"1、TCP中所谓的连接在计算机看来就是客户端服务端各自的一发一收成功了，两端各自维护自己内核中的数据结构(记录对方IP端口序列号等可以说是一种状态机)，通过这样感知到对方的存在，从而建立起连接<br>2、三次握手，四次挥手","like_count":0},{"had_liked":false,"id":109732,"user_name":"嘎子","can_delete":false,"product_type":"c1","uid":1273348,"ip_address":"","ucode":"E6FB6E97710C89","user_header":"https://static001.geekbang.org/account/avatar/00/13/6e/04/94677062.jpg","comment_is_top":false,"comment_ctime":1562083806,"is_pvip":false,"replies":[{"id":"48808","content":"谢谢","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567498115,"ip_address":"","comment_id":109732,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562083806","product_id":100007101,"comment_content":"哈哈哈！太赞啦！写的好好笑！","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456543,"discussion_content":"谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567498115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":100815,"user_name":"追风筝的人","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1559645257,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559645257","product_id":100007101,"comment_content":"TCP协议通过三次握手建立连接，四次挥手关闭连接","like_count":0},{"had_liked":false,"id":99768,"user_name":"man1s","can_delete":false,"product_type":"c1","uid":1466953,"ip_address":"","ucode":"FFDB6B52F65A1B","user_header":"https://static001.geekbang.org/account/avatar/00/16/62/49/6332c99b.jpg","comment_is_top":false,"comment_ctime":1559294882,"is_pvip":false,"replies":[{"id":"49218","content":"自顶往下方法，哈哈。<br><br>有本书是这样讲的，但是难度太大","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567604101,"ip_address":"","comment_id":99768,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1559294882","product_id":100007101,"comment_content":"为什么我感觉从上层往底层讲会好一些","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452264,"discussion_content":"自顶往下方法，哈哈。\n\n有本书是这样讲的，但是难度太大","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567604101,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":88609,"user_name":"彭旭锐","can_delete":false,"product_type":"c1","uid":1358937,"ip_address":"","ucode":"CFEC1848D32C3F","user_header":"https://static001.geekbang.org/account/avatar/00/14/bc/59/c0725015.jpg","comment_is_top":false,"comment_ctime":1555953921,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555953921","product_id":100007101,"comment_content":"传输层的“地址”是端口，传输层底层的网络层的地址是IP地址，因此在传输层的区分一个连接需要5个信息：源IP地址、目标IP地址、协议号（UDP&#47;TCP等）、源端口号、目标端口号","like_count":0},{"had_liked":false,"id":86165,"user_name":"Ronnyz","can_delete":false,"product_type":"c1","uid":1488280,"ip_address":"","ucode":"9F34527B1D343D","user_header":"https://static001.geekbang.org/account/avatar/00/16/b5/98/ffaf2aca.jpg","comment_is_top":false,"comment_ctime":1555318455,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555318455","product_id":100007101,"comment_content":"第二问：TCP的三次握手和四次挥手","like_count":0},{"had_liked":false,"id":85278,"user_name":"王浩","can_delete":false,"product_type":"c1","uid":1229190,"ip_address":"","ucode":"EF4CFD45533803","user_header":"https://static001.geekbang.org/account/avatar/00/12/c1/86/afd6e862.jpg","comment_is_top":false,"comment_ctime":1555030534,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555030534","product_id":100007101,"comment_content":"UDP不需要链接传输，速度快，容易丢包，像个纯真的小孩相信整个网络是完美无瑕的。<br>TCP需要建立链接，每个建立链接需要经过三次握手来建立连接，同时是以流的方式传输数据，并且保证无丢包，不重复，有顺序。","like_count":0},{"had_liked":false,"id":57964,"user_name":"caohuan","can_delete":false,"product_type":"c1","uid":1256428,"ip_address":"","ucode":"4B092E33F3DF1E","user_header":"https://static001.geekbang.org/account/avatar/00/13/2b/ec/af6d0b10.jpg","comment_is_top":false,"comment_ctime":1546951732,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546951732","product_id":100007101,"comment_content":"本篇所得 1.TCP是面向连接的，有状态，有自己规则的协议，它以 字节流 的形式传输 数据。<br>2.UDP是面向无连接，无状态，它继承IP的特性，<br>网络层 传输数据是基于包的形式，传输在 数据链路层 叫帧，网络层 叫 包，传输层 叫段，笼统的称为 包，MAC地址匹配，IP头里面，有8个协议，UDP的端口号 包括 源端口号 和目标端口号。<br><br>UDP的特性 1）沟通简单 2）轻信他人 3）愣头青，不懂权变。<br><br>UDP的使用场景 1）需要资源少，内网的模式，可允许丢包 ，DHCP就是UDP的协议 2）可以广播 3）快速且低延迟。<br><br>UDP的实际运用场景 1）服从命令 比如Google的QUIC 快速UDP互联网连接  基于UDP的协议 2）流媒体的协议，比如直播 可以丢帧，不能卡顿 3）实时游戏，只在乎 实时数据处理 4）IOT 物联网 因为终端资源少，终端只能囊括 一个很小的芯片 5）移动通讯领域4G的GTP-U是基于UDP协议的。<br><br>回答老师的问题，问题1的个人解答：TCP是听过 三次握手 四次挥手，且在交互反馈的时候 有反馈命令，符合 则正常连接，反之 连接异常。<br>问题2的个人解答：TCP通过握手连接，挥手就是关闭连接，期待老师下一讲的解答。","like_count":0},{"had_liked":false,"id":57427,"user_name":"四喜","can_delete":false,"product_type":"c1","uid":1071389,"ip_address":"","ucode":"C5EBED19C0F332","user_header":"https://static001.geekbang.org/account/avatar/00/10/59/1d/c89abcd8.jpg","comment_is_top":false,"comment_ctime":1546787404,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546787404","product_id":100007101,"comment_content":"这一课很生动简单","like_count":0},{"had_liked":false,"id":55139,"user_name":"自然","can_delete":false,"product_type":"c1","uid":1071508,"ip_address":"","ucode":"BE7B107039BCCA","user_header":"https://static001.geekbang.org/account/avatar/00/10/59/94/b94b5995.jpg","comment_is_top":false,"comment_ctime":1546051196,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546051196","product_id":100007101,"comment_content":"解决了心中很多困惑。谢谢老师。","like_count":0},{"had_liked":false,"id":41014,"user_name":"潇洒","can_delete":false,"product_type":"c1","uid":1035982,"ip_address":"","ucode":"3B7CADE099E392","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ce/ce/761f285c.jpg","comment_is_top":false,"comment_ctime":1542713039,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1542713039","product_id":100007101,"comment_content":"问题一：建立连接的本质就是两端都有分配内存空间用于两者的交互<br>问题二：三次握手，四次挥手<br>这样理解对吗","like_count":0},{"had_liked":false,"id":26533,"user_name":"TaoLR","can_delete":false,"product_type":"c1","uid":1004102,"ip_address":"","ucode":"1BAE96AA8E6229","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/46/3d4f32f7.jpg","comment_is_top":false,"comment_ctime":1537640235,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1537640235","product_id":100007101,"comment_content":"老师讲得真好👨‍🏫","like_count":0},{"had_liked":false,"id":23373,"user_name":"潇洒哥er","can_delete":false,"product_type":"c1","uid":1227101,"ip_address":"","ucode":"6ECF035120B350","user_header":"https://static001.geekbang.org/account/avatar/00/12/b9/5d/9e6e7a67.jpg","comment_is_top":false,"comment_ctime":1536313249,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1536313249","product_id":100007101,"comment_content":"老师，你越写越调皮了😝","like_count":0},{"had_liked":false,"id":23025,"user_name":"何磊","can_delete":false,"product_type":"c1","uid":1047604,"ip_address":"","ucode":"78934C3ED4A342","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fc/34/c733b116.jpg","comment_is_top":false,"comment_ctime":1536112564,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1536112564","product_id":100007101,"comment_content":"第一个问题：所谓链接就是服务端与客户端二者的socket互相保持对方的信息，直到数据发送结束。<br>第二个问题：断开者主动调用close，让客户端ack后，等应用程序把数据处理完后，客户端再向服务端发送一个close操作，服务器响应一个ack，整个关闭结束。","like_count":0},{"had_liked":false,"id":22191,"user_name":"番薯佬","can_delete":false,"product_type":"c1","uid":1089067,"ip_address":"","ucode":"0148EAB10879C8","user_header":"https://static001.geekbang.org/account/avatar/00/10/9e/2b/221af43f.jpg","comment_is_top":false,"comment_ctime":1535543358,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1535543358","product_id":100007101,"comment_content":"推荐的书呢","like_count":0},{"had_liked":false,"id":18561,"user_name":"Yangjing","can_delete":false,"product_type":"c1","uid":1018061,"ip_address":"","ucode":"D88DFD4958D07C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/88/cd/2c3808ce.jpg","comment_is_top":false,"comment_ctime":1533454273,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1533454273","product_id":100007101,"comment_content":"建立连接在代码层面就是通过 Socket 建立描述符，然后调用 connect 连接。<br>描述符=socket(xx, xx)  connect()","like_count":0},{"had_liked":false,"id":17278,"user_name":"Alery","can_delete":false,"product_type":"c1","uid":1156557,"ip_address":"","ucode":"08F3F49181E67B","user_header":"https://static001.geekbang.org/account/avatar/00/11/a5/cd/3aff5d57.jpg","comment_is_top":false,"comment_ctime":1532535461,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1532535461","product_id":100007101,"comment_content":"老师，您推荐对包分析的书是什么书呢？","like_count":0},{"had_liked":false,"id":16422,"user_name":"you~胖子","can_delete":false,"product_type":"c1","uid":1141807,"ip_address":"","ucode":"D1A5B25499844A","user_header":"https://static001.geekbang.org/account/avatar/00/11/6c/2f/6cf39bf6.jpg","comment_is_top":false,"comment_ctime":1531956812,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1531956812","product_id":100007101,"comment_content":"希望老师能对基础差的推荐一些书，不然云里雾里的，谢谢老师","like_count":0},{"had_liked":false,"id":14933,"user_name":"一步","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1530753353,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1530753353","product_id":100007101,"comment_content":"我知道QQ是基于UDP，那<br>消息应该是基于应用层进行控制的，重发啊什么的","like_count":1},{"had_liked":false,"id":14645,"user_name":"Jaime","can_delete":false,"product_type":"c1","uid":1078333,"ip_address":"","ucode":"904192CC4E916F","user_header":"https://static001.geekbang.org/account/avatar/00/10/74/3d/54bbc1df.jpg","comment_is_top":false,"comment_ctime":1530582328,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1530582328","product_id":100007101,"comment_content":"1 对应与TCP的实现，TCP是维持了一个状态机，那么对于计算机来看，应该是当处于连接状态的时候就是一条链接。<br>2 TCP是靠三次握手保证了连接成功，四次握手实现了可靠的网络关闭。","like_count":0},{"had_liked":false,"id":13186,"user_name":"海波","can_delete":false,"product_type":"c1","uid":1129240,"ip_address":"","ucode":"2C25C723DC2A56","user_header":"https://static001.geekbang.org/account/avatar/00/11/3b/18/45397ce9.jpg","comment_is_top":false,"comment_ctime":1529453095,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1529453095","product_id":100007101,"comment_content":"推荐的书呢。","like_count":0}]}