{"id":474260,"title":"30ï½œæ¥å£ï¼šGoä¸­æœ€å¼ºå¤§çš„é­”æ³•","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯Tony Baiã€‚</p><p>åœ¨å‰é¢çš„ä¸¤è®²ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†æ¥å£çš„åŸºç¡€çŸ¥è¯†ã€æ¥å£ç±»å‹å®šä¹‰çš„æƒ¯ä¾‹ä»¥åŠæ¥å£åœ¨è¿è¡Œæ—¶çš„è¡¨ç¤ºã€‚æŒæ¡äº†è¿™äº›å†…å®¹åï¼Œå¯ä»¥è¯´ï¼Œåœ¨è¯­æ³•å±‚é¢çš„æœ‰å…³æ¥å£çš„é—®é¢˜ï¼Œå¯¹æˆ‘ä»¬æ¥è¯´éƒ½ä¸æ˜¯ä»€ä¹ˆé˜»ç¢äº†ã€‚åœ¨å¼„æ¸…æ¥šæ¥å£æ˜¯ä»€ä¹ˆè¿™ä¸ªé—®é¢˜ä¹‹åï¼Œæ‘†åœ¨æˆ‘ä»¬é¢å‰çš„å°±æ˜¯<strong>æ€ä¹ˆç”¨æ¥å£</strong>çš„é—®é¢˜äº†ã€‚</p><p>ä¸è¿‡ï¼Œè¿™é‡Œçš„â€œæ€ä¹ˆç”¨â€ï¼Œå¯ä¸æ˜¯è¦å‘Šè¯‰ä½ æ€ä¹ˆä½¿ç”¨Goæ ‡å‡†åº“ä¸­çš„æ¥å£æˆ–ç¬¬ä¸‰æ–¹åŒ…ä¸­å®šä¹‰å¥½çš„æ¥å£ï¼Œè€Œæ˜¯è®©ä½ å­¦ä¹ å¦‚ä½•åˆ©ç”¨æ¥å£è¿›è¡Œåº”ç”¨çš„è®¾è®¡ï¼Œä»¥åŠæ”¹å–„å·²æœ‰åº”ç”¨çš„è®¾è®¡ï¼Œæ¢å¥è¯è¯´å°±æ˜¯<strong>Goæ¥å£çš„åº”ç”¨æ¨¡å¼æˆ–æƒ¯ä¾‹</strong>ã€‚</p><p>ä¸è¿‡åœ¨è®²è§£æ¥å£åº”ç”¨æ¨¡å¼ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜å…ˆè¦äº†è§£ä¸€ä¸ªå‰ç½®åŸåˆ™ï¼Œé‚£å°±æ˜¯<strong>åœ¨å®é™…çœŸæ­£éœ€è¦çš„æ—¶å€™æ‰å¯¹ç¨‹åºè¿›è¡ŒæŠ½è±¡</strong>ã€‚å†é€šä¿—ä¸€äº›æ¥è®²ï¼Œå°±æ˜¯<strong>ä¸è¦ä¸ºäº†æŠ½è±¡è€ŒæŠ½è±¡</strong>ã€‚ä¸Šä¸€è®²ä¸­æˆ‘ä»¬è¯´è¿‡ï¼Œæ¥å£æœ¬è´¨ä¸Šæ˜¯ä¸€ç§æŠ½è±¡ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯è§£è€¦ï¼Œæ‰€ä»¥è¿™æ¡åŸåˆ™ä¹Ÿåœ¨å‘Šè¯‰æˆ‘ä»¬ï¼š<strong>ä¸è¦ä¸ºäº†ä½¿ç”¨æ¥å£è€Œä½¿ç”¨æ¥å£</strong>ã€‚ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬è¦ç»™ä¸€ä¸ªè®¡ç®—å™¨æ·»åŠ ä¸€ä¸ªæ•´æ•°åŠ æ³•çš„åŠŸèƒ½ç‰¹æ€§ï¼Œæœ¬æ¥ä¸€ä¸ªå‡½æ•°å°±å¯ä»¥å®ç°ï¼š</p><pre><code class=\"language-plain\">func Add(a int64, b int64) int64 {\n\treturn a+b\n}\n</code></pre><p>ä½†å¦‚æœä½ éè¦å¼•å…¥ä¸€ä¸ªæ¥å£ï¼Œç»“æœä»£ç å¯èƒ½å°±å˜æˆäº†è¿™æ ·ï¼š</p><pre><code class=\"language-plain\">type Adder interface {\n    Add(int64, int64) int64\n}\n\nfunc Add(adder Adder, a int64, b int64) int64 {\n\treturn adder.Add(a, b)\n}\n</code></pre><!-- [[[read_end]]] --><p>è¿™å°±ä¼šäº§ç”Ÿä¸€ç§â€œè¿‡è®¾è®¡â€çš„å‘³é“äº†ã€‚</p><p>è¦æ³¨æ„ï¼Œæ¥å£çš„ç¡®å¯ä»¥å®ç°<strong>è§£è€¦</strong>ï¼Œä½†å®ƒä¹Ÿä¼šå¼•å…¥â€œæŠ½è±¡â€çš„å‰¯ä½œç”¨ï¼Œæˆ–è€…è¯´æ¥å£è¿™ç§æŠ½è±¡ä¹Ÿä¸æ˜¯å…è´¹çš„ï¼Œæ˜¯æœ‰æˆæœ¬çš„ï¼Œé™¤äº†ä¼šé€ æˆè¿è¡Œæ•ˆç‡çš„ä¸‹é™ä¹‹å¤–ï¼Œä¹Ÿä¼šå½±å“ä»£ç çš„å¯è¯»æ€§ã€‚ä¸è¿‡è¿™é‡Œä½ å°±ä¸è¦æ‹¿æˆ‘ä¹‹å‰è®²è§£ä¸­çš„å®æˆ˜ä¾‹å­å»å¯¹å·å…¥åº§äº†ï¼Œé‚£äº›ä¾‹å­æ›´å¤šæ˜¯ä¸ºäº†è®©ä½ å­¦ä¹ Goè¯­æ³•çš„ä¾¿åˆ©è€Œæ„å»ºçš„ã€‚</p><p>åœ¨å¤šæ•°æƒ…å†µä¸‹ï¼Œåœ¨çœŸå®çš„ç”Ÿäº§é¡¹ç›®ä¸­ï¼Œæ¥å£éƒ½èƒ½ç»™åº”ç”¨è®¾è®¡å¸¦æ¥å¥½å¤„ã€‚é‚£ä¹ˆå¦‚æœè¦ç”¨æ¥å£ï¼Œæˆ‘ä»¬åº”è¯¥æ€ä¹ˆç”¨å‘¢ï¼Ÿæ€ä¹ˆå€ŸåŠ©æ¥å£æ¥æ”¹å–„ç¨‹åºçš„è®¾è®¡ï¼Œè®©ç³»ç»Ÿå®ç°æˆ‘ä»¬å¸¸è¯´çš„é«˜å†…èšå’Œä½è€¦åˆå‘¢ï¼Ÿè¿™å°±è¦ä»Goè¯­è¨€çš„â€œç»„åˆâ€çš„è®¾è®¡å“²å­¦è¯´èµ·ã€‚</p><h2>ä¸€åˆ‡çš†ç»„åˆ</h2><p>Goè¯­è¨€ä¹‹çˆ¶Rob Pikeæ›¾è¯´è¿‡ï¼š<strong>å¦‚æœC++å’ŒJavaæ˜¯å…³äºç±»å‹å±‚æ¬¡ç»“æ„å’Œç±»å‹åˆ†ç±»çš„è¯­è¨€ï¼Œé‚£ä¹ˆGoåˆ™æ˜¯å…³äºç»„åˆçš„è¯­è¨€</strong>ã€‚å¦‚æœæŠŠGoåº”ç”¨ç¨‹åºæ¯”ä½œæ˜¯ä¸€å°æœºå™¨çš„è¯ï¼Œé‚£ä¹ˆ<strong>ç»„åˆ</strong>å…³æ³¨çš„å°±æ˜¯å¦‚ä½•å°†æ•£è½åœ¨å„ä¸ªåŒ…ä¸­çš„â€œé›¶ä»¶â€å…³è”å¹¶ç»„è£…åˆ°ä¸€èµ·ã€‚æˆ‘ä»¬å‰é¢ä¹Ÿè¯´è¿‡ï¼Œ<strong>ç»„åˆ</strong>æ˜¯Goè¯­è¨€çš„é‡è¦è®¾è®¡å“²å­¦ä¹‹ä¸€ï¼Œè€Œæ­£äº¤æ€§åˆ™ä¸ºç»„åˆå“²å­¦çš„è½åœ°æä¾›äº†æ›´ä¸ºæ–¹ä¾¿çš„æ¡ä»¶ã€‚</p><p><strong>æ­£äº¤ï¼ˆOrthogonalityï¼‰</strong>æ˜¯ä»å‡ ä½•å­¦ä¸­å€Ÿç”¨çš„æœ¯è¯­ï¼Œè¯´çš„æ˜¯å¦‚æœä¸¤æ¡çº¿ä»¥ç›´è§’ç›¸äº¤ï¼Œé‚£ä¹ˆè¿™ä¸¤æ¡çº¿å°±æ˜¯æ­£äº¤çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨ä»£æ•°è¯¾ç¨‹ä¸­ç»å¸¸ç”¨åˆ°çš„åæ ‡è½´å°±æ˜¯è¿™æ ·ã€‚ç”¨å‘é‡æœ¯è¯­è¯´ï¼Œè¿™ä¸¤æ¡ç›´çº¿äº’ä¸ä¾èµ–ï¼Œæ²¿ç€æŸä¸€æ¡ç›´çº¿ç§»åŠ¨ï¼Œä½ æŠ•å½±åˆ°å¦ä¸€æ¡ç›´çº¿ä¸Šçš„ä½ç½®ä¸å˜ã€‚</p><p>åœ¨è®¡ç®—æœºæŠ€æœ¯ä¸­ï¼Œæ­£äº¤æ€§ç”¨äºè¡¨ç¤ºæŸç§ä¸ç›¸ä¾èµ–æ€§æˆ–æ˜¯è§£è€¦æ€§ã€‚å¦‚æœä¸¤ä¸ªæˆ–æ›´å¤šäº‹ç‰©ä¸­çš„ä¸€ä¸ªå‘ç”Ÿå˜åŒ–ï¼Œä¸ä¼šå½±å“å…¶ä»–äº‹ç‰©ï¼Œé‚£ä¹ˆè¿™äº›äº‹ç‰©å°±æ˜¯æ­£äº¤çš„ã€‚æ¯”å¦‚ï¼Œåœ¨è®¾è®¡è‰¯å¥½çš„ç³»ç»Ÿä¸­ï¼Œæ•°æ®åº“ä»£ç ä¸ç”¨æˆ·ç•Œé¢æ˜¯æ­£äº¤çš„ï¼šä½ å¯ä»¥æ”¹åŠ¨ç•Œé¢ï¼Œè€Œä¸å½±å“æ•°æ®åº“ï¼›æ›´æ¢æ•°æ®åº“ï¼Œè€Œä¸ç”¨æ”¹åŠ¨ç•Œé¢ã€‚</p><p><strong>ç¼–ç¨‹è¯­è¨€çš„è¯­æ³•å…ƒç´ é—´å’Œè¯­è¨€ç‰¹æ€§ä¹Ÿå­˜åœ¨ç€æ­£äº¤çš„æƒ…å†µï¼Œå¹¶ä¸”é€šè¿‡å°†è¿™äº›æ­£äº¤çš„ç‰¹æ€§ç»„åˆèµ·æ¥ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°æ›´ä¸ºé«˜çº§çš„ç‰¹æ€§</strong>ã€‚åœ¨è¯­è¨€è®¾è®¡å±‚é¢ï¼ŒGoè¯­è¨€å°±ä¸ºå¹¿å¤§Gopheræä¾›äº†è¯¸å¤šæ­£äº¤çš„è¯­æ³•å…ƒç´ ä¾›åç»­ç»„åˆä½¿ç”¨ï¼ŒåŒ…æ‹¬ï¼š</p><ul>\n<li>Goè¯­è¨€æ— ç±»å‹ä½“ç³»ï¼ˆType Hierarchyï¼‰ï¼Œæ²¡æœ‰çˆ¶å­ç±»çš„æ¦‚å¿µï¼Œç±»å‹å®šä¹‰æ˜¯æ­£äº¤ç‹¬ç«‹çš„ï¼›</li>\n<li>æ–¹æ³•å’Œç±»å‹æ˜¯æ­£äº¤çš„ï¼Œæ¯ç§ç±»å‹éƒ½å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„æ–¹æ³•é›†åˆï¼Œæ–¹æ³•æœ¬è´¨ä¸Šåªæ˜¯ä¸€ä¸ªå°†receiverå‚æ•°ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°çš„å‡½æ•°è€Œå·²ï¼›</li>\n<li>æ¥å£ä¸å®ƒçš„å®ç°è€…ä¹‹é—´æ— â€œæ˜¾å¼å…³è”â€ï¼Œä¹Ÿå°±è¯´æ¥å£ä¸Goè¯­è¨€å…¶ä»–éƒ¨åˆ†ä¹Ÿæ˜¯æ­£äº¤çš„ã€‚</li>\n</ul><p>åœ¨è¿™äº›æ­£äº¤è¯­æ³•å…ƒç´ å½“ä¸­ï¼Œ<strong>æ¥å£ä½œä¸ºGoè¯­è¨€æä¾›çš„å…·æœ‰å¤©ç„¶æ­£äº¤æ€§çš„è¯­æ³•å…ƒç´ </strong>ï¼Œåœ¨Goç¨‹åºçš„é™æ€ç»“æ„æ­å»ºä¸è€¦åˆè®¾è®¡ä¸­æ‰®æ¼”ç€è‡³å…³é‡è¦çš„è§’è‰²ã€‚ è€Œè¦æƒ³çŸ¥é“æ¥å£ç©¶ç«Ÿæ‰®æ¼”ä»€ä¹ˆè§’è‰²ï¼Œæˆ‘ä»¬å°±å…ˆè¦äº†è§£ç»„åˆçš„æ–¹å¼ã€‚</p><p>æ„å»ºGoåº”ç”¨ç¨‹åºçš„é™æ€éª¨æ¶ç»“æ„æœ‰ä¸¤ç§ä¸»è¦çš„ç»„åˆæ–¹å¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/2f/44/2f07b12yyea031bdc38fc3bbc316dc44.jpg?wh=1980x1080\" alt=\"\"></p><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œè¿™ä¸¤ç§ç»„åˆæ–¹å¼åˆ†åˆ«ä¸ºå‚ç›´ç»„åˆå’Œæ°´å¹³ç»„åˆï¼Œé‚£è¿™ä¸¤ç§ç»„åˆçš„å„è‡ªå«ä¹‰ä¸åº”ç”¨èŒƒå›´æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬åˆ†åˆ«è¯¦ç»†è¯´è¯´ã€‚</p><h2>å‚ç›´ç»„åˆ</h2><p>å‚ç›´ç»„åˆæ›´å¤šç”¨åœ¨å°†å¤šä¸ªç±»å‹ï¼ˆå¦‚ä¸Šå›¾ä¸­çš„T1ã€I1ç­‰ï¼‰é€šè¿‡â€œç±»å‹åµŒå…¥ï¼ˆType Embeddingï¼‰â€çš„æ–¹å¼å®ç°æ–°ç±»å‹ï¼ˆå¦‚NT1ï¼‰çš„å®šä¹‰ã€‚</p><p>ä¼ ç»Ÿé¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼ˆæ¯”å¦‚ï¼šC++ï¼‰å¤§å¤šæ˜¯é€šè¿‡ç»§æ‰¿çš„æ–¹å¼å»ºæ„å‡ºè‡ªå·±çš„ç±»å‹ä½“ç³»çš„ï¼Œä½†Goè¯­è¨€å¹¶æ²¡æœ‰ç±»å‹ä½“ç³»çš„æ¦‚å¿µã€‚Goè¯­è¨€é€šè¿‡ç±»å‹çš„ç»„åˆè€Œä¸æ˜¯ç»§æ‰¿è®©å•ä¸€ç±»å‹<strong>æ‰¿è½½æ›´å¤šçš„åŠŸèƒ½</strong>ã€‚ç”±äºè¿™ç§æ–¹å¼ä¸ç¡¬ä»¶é…ç½®å‡çº§çš„å‚ç›´æ‰©å±•å¾ˆç±»ä¼¼ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å«å®ƒ<strong>å‚ç›´ç»„åˆ</strong>ã€‚</p><p>åˆå› ä¸ºä¸æ˜¯ç»§æ‰¿ï¼Œé‚£ä¹ˆé€šè¿‡å‚ç›´ç»„åˆå®šä¹‰çš„æ–°ç±»å‹ä¸è¢«åµŒå…¥çš„ç±»å‹ä¹‹é—´å°±æ²¡æœ‰æ‰€è°“â€œçˆ¶å­å…³ç³»â€çš„æ¦‚å¿µäº†ï¼Œä¹Ÿæ²¡æœ‰å‘ä¸Šã€å‘ä¸‹è½¬å‹ï¼ˆType Castingï¼‰ï¼Œè¢«åµŒå…¥çš„ç±»å‹ä¹Ÿä¸çŸ¥é“å°†å…¶åµŒå…¥çš„å¤–éƒ¨ç±»å‹çš„å­˜åœ¨ã€‚è°ƒç”¨æ–¹æ³•æ—¶ï¼Œæ–¹æ³•çš„åŒ¹é…å–å†³äºæ–¹æ³•åå­—ï¼Œè€Œä¸æ˜¯ç±»å‹ã€‚</p><p><strong>è¿™æ ·çš„å‚ç›´ç»„åˆæ›´å¤šåº”ç”¨åœ¨æ–°ç±»å‹çš„å®šä¹‰æ–¹é¢</strong>ã€‚é€šè¿‡è¿™ç§å‚ç›´ç»„åˆï¼Œæˆ‘ä»¬å¯ä»¥è¾¾åˆ°æ–¹æ³•å®ç°çš„å¤ç”¨ã€æ¥å£å®šä¹‰é‡ç”¨ç­‰ç›®çš„ã€‚</p><p>å‰é¢è¯´äº†ï¼Œåœ¨å®ç°å±‚é¢ï¼ŒGoè¯­è¨€é€šè¿‡ç±»å‹åµŒå…¥ï¼ˆType Embeddingï¼‰å®ç°å‚ç›´ç»„åˆï¼Œç»„åˆæ–¹å¼ä¸»è¦æœ‰ä»¥ä¸‹è¿™ä¹ˆå‡ ç§ã€‚å› ä¸ºæˆ‘ä»¬åœ¨26è®²å·²ç»å¯¹ç±»å‹åµŒå…¥è¿›è¡Œäº†è¯¦ç»†è®²è§£ï¼Œæˆ‘è¿™é‡Œåªç®€å•å¸¦ä½ å›é¡¾ä¸€ä¸‹ã€‚</p><h3><strong>ç¬¬ä¸€ç§ï¼šé€šè¿‡åµŒå…¥æ¥å£æ„å»ºæ¥å£</strong></h3><p>é€šè¿‡åœ¨æ¥å£å®šä¹‰ä¸­åµŒå…¥å…¶ä»–æ¥å£ç±»å‹ï¼Œå®ç°æ¥å£è¡Œä¸ºèšåˆï¼Œç»„æˆå¤§æ¥å£ã€‚è¿™ç§æ–¹å¼åœ¨æ ‡å‡†åº“ä¸­éå¸¸å¸¸è§ï¼Œä¹Ÿæ˜¯Goæ¥å£ç±»å‹å®šä¹‰çš„æƒ¯ä¾‹ï¼Œæˆ‘ä»¬åœ¨å‰é¢çš„è®²è§£ä¸­ä¹Ÿä¸æ­¢ä¸€æ¬¡æåŠã€‚</p><p>æ¯”å¦‚è¿™ä¸ªReadWriteræ¥å£ç±»å‹å°±é‡‡ç”¨äº†è¿™ç§ç±»å‹åµŒå…¥æ–¹å¼ï¼š</p><pre><code class=\"language-plain\">// $GOROOT/src/io/io.go\ntype ReadWriter interface {\n    Reader\n    Writer\n}\n</code></pre><h3><strong>ç¬¬äºŒç§ï¼šé€šè¿‡åµŒå…¥æ¥å£æ„å»ºç»“æ„ä½“ç±»å‹</strong></h3><p>è¿™é‡Œæˆ‘ä»¬ç›´æ¥æ¥çœ‹ä¸€ä¸ªé€šè¿‡åµŒå…¥æ¥å£ç±»å‹åˆ›å»ºæ–°ç»“æ„ä½“ç±»å‹çš„ä¾‹å­ï¼š</p><pre><code class=\"language-plain\">type MyReader struct {\n\tio.Reader // underlying reader\n\tN int64   // max bytes remaining\n}\n</code></pre><p>åœ¨å‰é¢çš„è®²è§£ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿæ›¾æåˆ°è¿‡ï¼Œåœ¨ç»“æ„ä½“ä¸­åµŒå…¥æ¥å£ï¼Œå¯ä»¥ç”¨äºå¿«é€Ÿæ„å»ºæ»¡è¶³æŸä¸€ä¸ªæ¥å£çš„ç»“æ„ä½“ç±»å‹ï¼Œæ¥æ»¡è¶³æŸå•å…ƒæµ‹è¯•çš„éœ€è¦ï¼Œä¹‹åæˆ‘ä»¬åªéœ€è¦å®ç°å°‘æ•°éœ€è¦çš„æ¥å£æ–¹æ³•å°±å¯ä»¥äº†ã€‚å°¤å…¶æ˜¯å°†è¿™æ ·çš„ç»“æ„ä½“ç±»å‹å˜é‡ä¼ é€’èµ‹å€¼ç»™å¤§æ¥å£çš„æ—¶å€™ï¼Œå°±æ›´èƒ½ä½“ç°åµŒå…¥æ¥å£ç±»å‹çš„ä¼˜åŠ¿äº†ã€‚</p><h3>ç¬¬ä¸‰ç§ï¼šé€šè¿‡åµŒå…¥ç»“æ„ä½“ç±»å‹æ„å»ºæ–°ç»“æ„ä½“ç±»å‹</h3><p>åœ¨ç»“æ„ä½“ä¸­åµŒå…¥æ¥å£ç±»å‹åå’Œåœ¨ç»“æ„ä½“ä¸­åµŒå…¥å…¶ä»–ç»“æ„ä½“ï¼Œéƒ½æ˜¯â€œå§”æ´¾æ¨¡å¼ï¼ˆdelegateï¼‰â€çš„ä¸€ç§åº”ç”¨ã€‚å¯¹æ–°ç»“æ„ä½“ç±»å‹çš„æ–¹æ³•è°ƒç”¨ï¼Œå¯èƒ½ä¼šè¢«â€œå§”æ´¾â€ç»™è¯¥ç»“æ„ä½“å†…éƒ¨åµŒå…¥çš„ç»“æ„ä½“çš„å®ä¾‹ï¼Œé€šè¿‡è¿™ç§æ–¹å¼æ„å»ºçš„æ–°ç»“æ„ä½“ç±»å‹å°±â€œç»§æ‰¿â€äº†è¢«åµŒå…¥çš„ç»“æ„ä½“çš„æ–¹æ³•çš„å®ç°ã€‚</p><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼ŒåŒ…æ‹¬åµŒå…¥æ¥å£ç±»å‹åœ¨å†…çš„å„ç§å‚ç›´ç»„åˆæ›´å¤šç”¨äºç±»å‹å®šä¹‰å±‚é¢ï¼Œæœ¬è´¨ä¸Šå®ƒæ˜¯ä¸€ç§<strong>ç±»å‹ç»„åˆ</strong>ï¼Œä¹Ÿæ˜¯ä¸€ç§ç±»å‹ä¹‹é—´çš„è€¦åˆæ–¹å¼ã€‚</p><p>è¯´å®Œäº†å‚ç›´ç»„åˆï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹æ°´å¹³ç»„åˆã€‚</p><h2>æ°´å¹³ç»„åˆ</h2><p>å½“æˆ‘ä»¬é€šè¿‡å‚ç›´ç»„åˆå°†ä¸€ä¸ªä¸ªç±»å‹å»ºç«‹å®Œæ¯•åï¼Œå°±å¥½æ¯”æˆ‘ä»¬å·²ç»å»ºç«‹äº†æ•´ä¸ªåº”ç”¨ç¨‹åºéª¨æ¶ä¸­çš„â€œå™¨å®˜â€ï¼Œæ¯”å¦‚æ‰‹ã€æ‰‹è‡‚ç­‰ï¼Œé‚£ä¹ˆè¿™äº›â€œå™¨å®˜â€ä¹‹é—´åˆæ˜¯é€šè¿‡ä»€ä¹ˆè¿æ¥åœ¨ä¸€èµ·çš„å‘¢ï¼Ÿ</p><p>å…³èŠ‚!</p><p>æ²¡é”™ï¼é‚£ä¹ˆåœ¨Goåº”ç”¨é™æ€éª¨æ¶ä¸­ï¼Œä»€ä¹ˆå…ƒç´ ç»å¸¸æ‰®æ¼”ç€â€œå…³èŠ‚â€çš„è§’è‰²å‘¢ï¼Ÿæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥çœ‹ä¸€ä¸‹ã€‚</p><p>å‡è®¾ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªä»»åŠ¡ï¼Œè¦ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå®ç°å°†ä¸€æ®µæ•°æ®å†™å…¥ç£ç›˜çš„åŠŸèƒ½ã€‚é€šå¸¸æˆ‘ä»¬éƒ½å¯ä»¥å¾ˆå®¹æ˜“åœ°å†™å‡ºä¸‹é¢çš„å‡½æ•°ï¼š</p><pre><code class=\"language-plain\">func Save(f *os.File, data []byte) error\n</code></pre><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œè¿™ä¸ªå‡½æ•°ä½¿ç”¨ä¸€ä¸ª*os.Fileæ¥è¡¨ç¤ºæ•°æ®å†™å…¥çš„ç›®çš„åœ°ï¼Œè¿™ä¸ªå‡½æ•°å®ç°åå¯ä»¥å·¥ä½œå¾—å¾ˆå¥½ã€‚ä½†è¿™é‡Œä¾æ—§å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ã€‚</p><p>é¦–å…ˆï¼Œè¿™ä¸ªå‡½æ•°å¾ˆéš¾æµ‹è¯•ã€‚os.Fileæ˜¯ä¸€ä¸ªå°è£…äº†ç£ç›˜æ–‡ä»¶æè¿°ç¬¦ï¼ˆåˆç§°å¥æŸ„ï¼‰çš„ç»“æ„ä½“ï¼Œåªæœ‰é€šè¿‡æ‰“å¼€æˆ–åˆ›å»ºçœŸå®ç£ç›˜æ–‡ä»¶æ‰èƒ½è·å¾—è¿™ä¸ªç»“æ„ä½“çš„å®ä¾‹ï¼Œè¿™å°±æ„å‘³ç€ï¼Œå¦‚æœæˆ‘ä»¬è¦å¯¹Saveè¿™ä¸ªå‡½æ•°è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œå°±å¿…é¡»ä½¿ç”¨çœŸå®çš„ç£ç›˜æ–‡ä»¶ã€‚æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡Saveå‡½æ•°å†™å…¥æ–‡ä»¶åï¼Œæˆ‘ä»¬è¿˜éœ€è¦å†æ¬¡æ“ä½œæ–‡ä»¶ã€è¯»å–åˆšåˆšå†™å…¥çš„å†…å®¹æ¥åˆ¤æ–­å†™å…¥å†…å®¹æ˜¯å¦æ­£ç¡®ï¼Œå¹¶ä¸”æ¯æ¬¡æµ‹è¯•ç»“æŸå‰éƒ½è¦å¯¹åˆ›å»ºçš„ä¸´æ—¶æ–‡ä»¶è¿›è¡Œæ¸…ç†ï¼Œé¿å…ç»™åç»­çš„æµ‹è¯•å¸¦å»å½±å“ã€‚</p><p>å…¶æ¬¡ï¼ŒSaveå‡½æ•°è¿èƒŒäº†æ¥å£åˆ†ç¦»åŸåˆ™ã€‚æ ¹æ®ä¸šç•Œå¹¿æ³›æ¨å´‡çš„Robert Martinï¼ˆBobå¤§å”ï¼‰çš„<a href=\"http://en.wikipedia.org/wiki/Interface_segregation_principle\">æ¥å£åˆ†ç¦»åŸåˆ™ï¼ˆISPåŸåˆ™ï¼ŒInterface Segregation Principleï¼‰</a>ï¼Œä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯ä¸åº”è¯¥è¢«è¿«ä¾èµ–ä»–ä»¬ä¸ä½¿ç”¨çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ä¼šå‘ç°os.Fileä¸ä»…åŒ…å«Saveå‡½æ•°éœ€è¦çš„ä¸å†™æ•°æ®ç›¸å…³çš„Writeæ–¹æ³•ï¼Œè¿˜åŒ…å«äº†å…¶ä»–ä¸ä¿å­˜æ•°æ®åˆ°æ–‡ä»¶æ“ä½œä¸ç›¸å…³çš„æ–¹æ³•ã€‚æ¯”å¦‚ï¼Œä½ ä¹Ÿå¯ä»¥çœ‹ä¸‹*os.FileåŒ…å«çš„è¿™äº›æ–¹æ³•ï¼š</p><pre><code class=\"language-plain\">func (f *File) Chdir() error\nfunc (f *File) Chmod(mode FileMode) error\nfunc (f *File) Chown(uid, gid int) error\n... ...\n</code></pre><p>è¿™ç§è®©Saveå‡½æ•°è¢«è¿«ä¾èµ–å®ƒæ‰€ä¸ä½¿ç”¨çš„æ–¹æ³•çš„è®¾è®¡è¿åäº†ISPåŸåˆ™ã€‚</p><p>æœ€åï¼ŒSaveå‡½æ•°å¯¹os.Fileçš„å¼ºä¾èµ–è®©å®ƒå¤±å»äº†æ‰©å±•æ€§ã€‚åƒSaveè¿™æ ·çš„åŠŸèƒ½å‡½æ•°ï¼Œå®ƒæ—¥åå¾ˆå¤§å¯èƒ½ä¼šå¢åŠ å‘ç½‘ç»œå­˜å‚¨å†™å…¥æ•°æ®çš„åŠŸèƒ½éœ€æ±‚ã€‚ä½†å¦‚æœåˆ°é‚£æ—¶æˆ‘ä»¬å†æ¥æ”¹å˜Saveå‡½æ•°çš„å‡½æ•°ç­¾åï¼ˆå‚æ•°åˆ—è¡¨+è¿”å›å€¼ï¼‰çš„è¯ï¼Œå°†å½±å“åˆ°Saveå‡½æ•°çš„æ‰€æœ‰è°ƒç”¨è€…ã€‚</p><p>ç»¼åˆè€ƒè™‘è¿™å‡ ç§åŸå› ï¼Œæˆ‘ä»¬å‘ç°Saveå‡½æ•°æ‰€åœ¨çš„â€œå™¨å®˜â€ä¸os.Fileæ‰€åœ¨çš„â€œå™¨å®˜â€ä¹‹é—´é‡‡ç”¨äº†ä¸€ç§ç¡¬è¿æ¥çš„æ–¹å¼ï¼Œè€Œä»¥os.Fileè¿™æ ·çš„ç»“æ„ä½“ä½œä¸ºâ€œå…³èŠ‚â€è®©å®ƒè¿æ¥çš„ä¸¤ä¸ªâ€œå™¨å®˜â€ä¸§å¤±äº†ç›¸äº’è¿åŠ¨çš„è‡ªç”±åº¦ï¼Œè®©å®ƒä¸å®ƒè¿æ¥çš„ä¸¤ä¸ªâ€œå™¨å®˜â€æ„æˆçš„è”ç»“ä½“å˜å¾—â€œåƒµç›´â€ã€‚</p><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•æ›´æ¢â€œå…³èŠ‚â€æ¥æ”¹å–„Saveçš„è®¾è®¡å‘¢ï¼Ÿæˆ‘ä»¬æ¥è¯•è¯•æ¥å£ã€‚æ–°ç‰ˆçš„Saveå‡½æ•°åŸå‹å¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\">func Save(w io.Writer, data []byte) error\n</code></pre><p>ä½ å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ç”¨io.Writeræ¥å£ç±»å‹æ›¿æ¢æ‰äº†*os.Fileã€‚è¿™æ ·ä¸€æ¥ï¼Œæ–°ç‰ˆSaveçš„è®¾è®¡å°±ç¬¦åˆäº†æ¥å£åˆ†ç¦»åŸåˆ™ï¼Œå› ä¸ºio.Writerä»…åŒ…å«ä¸€ä¸ªWriteæ–¹æ³•ï¼Œè€Œä¸”è¿™ä¸ªæ–¹æ³•æ°æ°æ˜¯Saveå”¯ä¸€éœ€è¦çš„æ–¹æ³•ã€‚</p><p>å¦å¤–ï¼Œè¿™é‡Œæˆ‘ä»¬ä»¥io.Writeræ¥å£ç±»å‹è¡¨ç¤ºæ•°æ®å†™å…¥çš„ç›®çš„åœ°ï¼Œæ—¢å¯ä»¥æ”¯æŒå‘ç£ç›˜å†™å…¥ï¼Œä¹Ÿå¯ä»¥æ”¯æŒå‘ç½‘ç»œå­˜å‚¨å†™å…¥ï¼Œå¹¶æ”¯æŒä»»ä½•å®ç°äº†Writeæ–¹æ³•çš„å†™å…¥è¡Œä¸ºï¼Œè¿™è®©Saveå‡½æ•°çš„æ‰©å±•æ€§å¾—åˆ°äº†è´¨çš„æå‡ã€‚</p><p>è¿˜æœ‰ä¸€ç‚¹ï¼Œä¹Ÿæ˜¯ä¹‹å‰æˆ‘ä»¬ä¸€ç›´å¼ºè°ƒçš„ï¼Œæ¥å£æœ¬è´¨æ˜¯å¥‘çº¦ï¼Œå…·æœ‰å¤©ç„¶çš„é™ä½è€¦åˆçš„ä½œç”¨ã€‚åŸºäºè¿™ç‚¹ï¼Œæˆ‘ä»¬å¯¹Saveå‡½æ•°çš„æµ‹è¯•ä¹Ÿå°†å˜å¾—ååˆ†å®¹æ˜“ï¼Œæ¯”å¦‚ä¸‹é¢ç¤ºä¾‹ä»£ç ï¼š</p><pre><code class=\"language-plain\">func TestSave(t *testing.T) {\n    b := make([]byte, 0, 128)\n    buf := bytes.NewBuffer(b)\n    data := []byte(\"hello, golang\")\n    err := Save(buf, data)\n    if err != nil {\n        t.Errorf(\"want nil, actual %s\", err.Error())\n    }\n\n    saved := buf.Bytes()\n    if !reflect.DeepEqual(saved, data) {\n        t.Errorf(\"want %s, actual %s\", string(data), string(saved))\n    }\n}\n</code></pre><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡bytes.NewBufferåˆ›å»ºäº†ä¸€ä¸ª*bytes.Bufferç±»å‹å˜é‡bufï¼Œç”±äºbytes.Bufferå®ç°äº†Writeæ–¹æ³•ï¼Œè¿›è€Œå®ç°äº†io.Writeræ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥åˆæ³•åœ°å°†å˜é‡bufä¼ é€’ç»™Saveå‡½æ•°ã€‚ä¹‹åæˆ‘ä»¬å¯ä»¥ä»bufä¸­å–å‡ºSaveå‡½æ•°å†™å…¥çš„æ•°æ®å†…å®¹ä¸é¢„æœŸçš„æ•°æ®åšæ¯”å¯¹ï¼Œå°±å¯ä»¥è¾¾åˆ°å¯¹Saveå‡½æ•°è¿›è¡Œå•å…ƒæµ‹è¯•çš„ç›®çš„äº†ã€‚åœ¨æ•´ä¸ªæµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸éœ€è¦åˆ›å»ºä»»ä½•ç£ç›˜æ–‡ä»¶æˆ–å»ºç«‹ä»»ä½•ç½‘ç»œè¿æ¥ã€‚</p><p>çœ‹åˆ°è¿™é‡Œï¼Œä½ åº”è¯¥æ„Ÿå—åˆ°äº†ï¼Œç”¨æ¥å£ä½œä¸ºâ€œå…³èŠ‚ï¼ˆè¿æ¥ç‚¹ï¼‰â€çš„å¥½å¤„å¾ˆå¤šï¼åƒä¸Šé¢å›¾ä¸­å±•ç¤ºçš„é‚£æ ·ï¼Œæ¥å£å¯ä»¥å°†å„ä¸ªç±»å‹æ°´å¹³ç»„åˆï¼ˆè¿æ¥ï¼‰åœ¨ä¸€èµ·ã€‚é€šè¿‡æ¥å£çš„ç¼–ç»‡ï¼Œæ•´ä¸ªåº”ç”¨ç¨‹åºä¸å†æ˜¯ä¸€ä¸ªä¸ªå­¤ç«‹çš„â€œå™¨å®˜â€ï¼Œè€Œæ˜¯ä¸€å¹…å®Œæ•´çš„ã€æœ‰çµæ´»æ€§å’Œæ‰©å±•æ€§çš„é™æ€éª¨æ¶ç»“æ„ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»ç¡®å®šäº†<strong>æ¥å£æ‰¿æ‹…äº†åº”ç”¨éª¨æ¶çš„â€œå…³èŠ‚â€è§’è‰²</strong>ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥çœ‹çœ‹æ¥å£æ˜¯å¦‚ä½•æ¼”å¥½è¿™ä¸€è§’è‰²çš„ã€‚</p><h2>æ¥å£åº”ç”¨çš„å‡ ç§æ¨¡å¼</h2><p>å‰é¢å·²ç»è¯´äº†ï¼Œä»¥æ¥å£ä¸ºâ€œå…³èŠ‚â€çš„æ°´å¹³ç»„åˆæ–¹å¼ï¼Œå¯ä»¥å°†å„ä¸ªå‚ç›´ç»„åˆå‡ºçš„ç±»å‹â€œè€¦åˆâ€åœ¨ä¸€èµ·ï¼Œä»è€Œç¼–ç»‡å‡ºç¨‹åºé™æ€éª¨æ¶ã€‚è€Œé€šè¿‡æ¥å£è¿›è¡Œæ°´å¹³ç»„åˆçš„åŸºæœ¬æ¨¡å¼å°±æ˜¯ï¼š<strong>ä½¿ç”¨æ¥å—æ¥å£ç±»å‹å‚æ•°çš„å‡½æ•°æˆ–æ–¹æ³•</strong>ã€‚åœ¨è¿™ä¸ªåŸºæœ¬æ¨¡å¼åŸºç¡€ä¸Šï¼Œè¿˜æœ‰å…¶ä»–å‡ ç§â€œè¡ç”Ÿå“â€ã€‚æˆ‘ä»¬å…ˆä»åŸºæœ¬æ¨¡å¼è¯´èµ·ï¼Œå†å¾€å¤–å»¶ä¼¸ã€‚</p><h3>åŸºæœ¬æ¨¡å¼</h3><p>æ¥å—æ¥å£ç±»å‹å‚æ•°çš„å‡½æ•°æˆ–æ–¹æ³•æ˜¯æ°´å¹³ç»„åˆçš„åŸºæœ¬è¯­æ³•ï¼Œå½¢å¼æ˜¯è¿™æ ·çš„ï¼š</p><pre><code class=\"language-plain\">func YourFuncName(param YourInterfaceType)\n</code></pre><p>æˆ‘ä»¬å¥—ç”¨éª¨æ¶å…³èŠ‚çš„æ¦‚å¿µï¼Œç”¨è¿™å¹…å›¾æ¥è¡¨ç¤ºä¸Šé¢åŸºæœ¬æ¨¡å¼è¯­æ³•çš„è¿ç”¨æ–¹æ³•ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/7b/d6/7be0727d1eda688dbyye480fd8d869d6.jpg?wh=1980x1080\" alt=\"\"></p><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œå‡½æ•°/æ–¹æ³•å‚æ•°ä¸­çš„æ¥å£ç±»å‹ä½œä¸ºâ€œå…³èŠ‚ï¼ˆè¿æ¥ç‚¹ï¼‰â€ï¼Œæ”¯æŒå°†ä½äºå¤šä¸ªåŒ…ä¸­çš„å¤šä¸ªç±»å‹ä¸YourFuncNameå‡½æ•°è¿æ¥åˆ°ä¸€èµ·ï¼Œå…±åŒå®ç°æŸä¸€æ–°ç‰¹æ€§ã€‚</p><p>åŒæ—¶ï¼Œæ¥å£ç±»å‹å’Œå®ƒçš„å®ç°è€…ä¹‹é—´éšå¼çš„å…³ç³»å´åœ¨ä¸ç»æ„é—´æ»¡è¶³äº†ï¼šä¾èµ–æŠ½è±¡ï¼ˆDIPï¼‰ã€é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLSPï¼‰ã€æ¥å£éš”ç¦»ï¼ˆISPï¼‰ç­‰ä»£ç è®¾è®¡åŸåˆ™ï¼Œè¿™åœ¨å…¶ä»–è¯­è¨€ä¸­æ˜¯éœ€è¦å¾ˆâ€œåˆ»æ„â€åœ°è®¾è®¡è°‹åˆ’çš„ï¼Œä½†å¯¹Goæ¥å£æ¥çœ‹ï¼Œè¿™ä¸€åˆ‡å´æ˜¯è‡ªç„¶è€Œç„¶çš„ã€‚</p><p>è¿™ä¸€æ°´å¹³ç»„åˆçš„åŸºæœ¬æ¨¡å¼åœ¨Goæ ‡å‡†åº“ã€Goç¤¾åŒºç¬¬ä¸‰æ–¹åŒ…ä¸­æœ‰ç€å¹¿æ³›åº”ç”¨ï¼Œå…¶ä»–å‡ ç§æ¨¡å¼ä¹Ÿæ˜¯ä»è¿™ä¸ªæ¨¡å¼è¡ç”Ÿçš„ã€‚ä¸‹é¢æˆ‘ä»¬é€ä¸€çœ‹ä¸€ä¸‹å„ä¸ªè¡ç”Ÿæ¨¡å¼ã€‚</p><h3>åˆ›å»ºæ¨¡å¼</h3><p>Goç¤¾åŒºæµä¼ ä¸€ä¸ªç»éªŒæ³•åˆ™ï¼šâ€œæ¥å—æ¥å£ï¼Œè¿”å›ç»“æ„ä½“ï¼ˆAccept interfaces, return structsï¼‰â€ï¼Œè¿™å…¶å®å°±æ˜¯ä¸€ç§æŠŠæ¥å£ä½œä¸ºâ€œå…³èŠ‚â€çš„åº”ç”¨æ¨¡å¼ã€‚æˆ‘è¿™é‡ŒæŠŠå®ƒå«åšåˆ›å»ºæ¨¡å¼ï¼Œæ˜¯å› ä¸ºè¿™ä¸ªç»éªŒæ³•åˆ™å¤šç”¨äºåˆ›å»ºæŸä¸€ç»“æ„ä½“ç±»å‹çš„å®ä¾‹ã€‚</p><p>ä¸‹é¢æ˜¯Goæ ‡å‡†åº“ä¸­ï¼Œè¿ç”¨åˆ›å»ºæ¨¡å¼åˆ›å»ºç»“æ„ä½“å®ä¾‹çš„ä»£ç æ‘˜å½•ï¼š</p><pre><code class=\"language-plain\">// $GOROOT/src/sync/cond.go\ntype Cond struct {\n    ... ...\n    L Locker\n}\n\nfunc NewCond(l Locker) *Cond {\n    return &amp;Cond{L: l}\n}\n\n// $GOROOT/src/log/log.go\ntype Logger struct {\n    mu     sync.Mutex \n    prefix string     \n    flag   int        \n    out    io.Writer  \n    buf    []byte    \n}\n\nfunc New(out io.Writer, prefix string, flag int) *Logger {\n    return &amp;Logger{out: out, prefix: prefix, flag: flag}\n}\n\n// $GOROOT/src/log/log.go\ntype Writer struct {\n    err error\n    buf []byte\n    n   int\n    wr  io.Writer\n}\n\nfunc NewWriterSize(w io.Writer, size int) *Writer {\n    // Is it already a Writer?\n    b, ok := w.(*Writer)\n    if ok &amp;&amp; len(b.buf) &gt;= size {\n        return b\n    }\n    if size &lt;= 0 {\n        size = defaultBufSize\n    }\n    return &amp;Writer{\n        buf: make([]byte, size),\n        wr:  w,\n    }\n}\n</code></pre><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œåˆ›å»ºæ¨¡å¼åœ¨syncã€logã€bufioåŒ…ä¸­éƒ½æœ‰åº”ç”¨ã€‚ä»¥ä¸Šé¢logåŒ…çš„Newå‡½æ•°ä¸ºä¾‹ï¼Œè¿™ä¸ªå‡½æ•°ç”¨äºå®ä¾‹åŒ–ä¸€ä¸ªlog.Loggerå®ä¾‹ï¼Œå®ƒæ¥å—ä¸€ä¸ªio.Writeræ¥å£ç±»å‹çš„å‚æ•°ï¼Œè¿”å›*log.Loggerã€‚ä»Newçš„å®ç°ä¸Šæ¥çœ‹ï¼Œä¼ å…¥çš„outå‚æ•°è¢«ä½œä¸ºåˆå€¼èµ‹å€¼ç»™äº†log.Loggerç»“æ„ä½“å­—æ®µoutã€‚</p><p>åˆ›å»ºæ¨¡å¼é€šè¿‡æ¥å£ï¼Œåœ¨NewXXXå‡½æ•°æ‰€åœ¨åŒ…ä¸æ¥å£çš„å®ç°è€…æ‰€åœ¨åŒ…ä¹‹é—´å»ºç«‹äº†ä¸€ä¸ªè¿æ¥ã€‚å¤§å¤šæ•°åŒ…å«æ¥å£ç±»å‹å­—æ®µçš„ç»“æ„ä½“çš„å®ä¾‹åŒ–ï¼Œéƒ½å¯ä»¥ä½¿ç”¨åˆ›å»ºæ¨¡å¼å®ç°ã€‚è¿™ä¸ªæ¨¡å¼æ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œæˆ‘ä»¬å°±ä¸å†æ·±å…¥äº†ã€‚</p><h3>åŒ…è£…å™¨æ¨¡å¼</h3><p>åœ¨åŸºæœ¬æ¨¡å¼çš„åŸºç¡€ä¸Šï¼Œå½“è¿”å›å€¼çš„ç±»å‹ä¸å‚æ•°ç±»å‹ç›¸åŒæ—¶ï¼Œæˆ‘ä»¬èƒ½å¾—åˆ°ä¸‹é¢å½¢å¼çš„å‡½æ•°åŸå‹ï¼š</p><pre><code class=\"language-plain\">func YourWrapperFunc(param YourInterfaceType) YourInterfaceType\n</code></pre><p>é€šè¿‡è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°å¯¹è¾“å…¥å‚æ•°çš„ç±»å‹çš„åŒ…è£…ï¼Œå¹¶åœ¨ä¸æ”¹å˜è¢«åŒ…è£…ç±»å‹ï¼ˆè¾“å…¥å‚æ•°ç±»å‹ï¼‰çš„å®šä¹‰çš„æƒ…å†µä¸‹ï¼Œè¿”å›å…·å¤‡æ–°åŠŸèƒ½ç‰¹æ€§çš„ã€å®ç°ç›¸åŒæ¥å£ç±»å‹çš„æ–°ç±»å‹ã€‚è¿™ç§æ¥å£åº”ç”¨æ¨¡å¼æˆ‘ä»¬å«å®ƒ<strong>åŒ…è£…å™¨æ¨¡å¼</strong>ï¼Œä¹Ÿå«è£…é¥°å™¨æ¨¡å¼ã€‚åŒ…è£…å™¨å¤šç”¨äºå¯¹è¾“å…¥æ•°æ®çš„è¿‡æ»¤ã€å˜æ¢ç­‰æ“ä½œã€‚</p><p>ä¸‹é¢å°±æ˜¯Goæ ‡å‡†åº“ä¸­ä¸€ä¸ªå…¸å‹çš„<strong>åŒ…è£…å™¨æ¨¡å¼</strong>çš„åº”ç”¨ï¼š</p><pre><code class=\"language-plain\">// $GOROOT/src/io/io.go\nfunc LimitReader(r Reader, n int64) Reader { return &amp;LimitedReader{r, n} }\n\ntype LimitedReader struct {\n    R Reader // underlying reader\n    N int64  // max bytes remaining\n}\n\nfunc (l *LimitedReader) Read(p []byte) (n int, err error) {\n    // ... ...\n}\n</code></pre><p>é€šè¿‡ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡LimitReaderå‡½æ•°çš„åŒ…è£…åï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªå…·æœ‰æ–°åŠŸèƒ½ç‰¹æ€§çš„io.Readeræ¥å£çš„å®ç°ç±»å‹ï¼Œä¹Ÿå°±æ˜¯LimitedReaderã€‚è¿™ä¸ªæ–°ç±»å‹åœ¨Readerçš„è¯­ä¹‰åŸºç¡€ä¸Šå®ç°äº†å¯¹è¯»å–å­—èŠ‚ä¸ªæ•°çš„é™åˆ¶ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å†å…·ä½“çœ‹LimitReaderçš„ä¸€ä¸ªä½¿ç”¨ç¤ºä¾‹ï¼š</p><pre><code class=\"language-plain\">func main() {\n    r := strings.NewReader(\"hello, gopher!\\n\")\n    lr := io.LimitReader(r, 4)\n    if _, err := io.Copy(os.Stdout, lr); err != nil {\n        log.Fatal(err)\n    }\n}\n</code></pre><p>è¿è¡Œè¿™ä¸ªç¤ºä¾‹ï¼Œæˆ‘ä»¬å¾—åˆ°äº†è¿™ä¸ªç»“æœï¼š</p><pre><code class=\"language-plain\">hell\n</code></pre><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œå½“é‡‡ç”¨ç»è¿‡LimitReaderåŒ…è£…åè¿”å›çš„io.Readerå»è¯»å–å†…å®¹æ—¶ï¼Œè¯»åˆ°çš„æ˜¯ç»è¿‡LimitedReaderçº¦æŸåçš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯åªè¯»åˆ°äº†åŸå­—ç¬¦ä¸²å‰é¢çš„4ä¸ªå­—èŠ‚ï¼š<strong>â€œhellâ€</strong>ã€‚</p><p>ç”±äºåŒ…è£…å™¨æ¨¡å¼ä¸‹çš„åŒ…è£…å‡½æ•°ï¼ˆå¦‚ä¸Šé¢çš„LimitReaderï¼‰çš„è¿”å›å€¼ç±»å‹ä¸å‚æ•°ç±»å‹ç›¸åŒï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†å¤šä¸ªæ¥å—åŒä¸€æ¥å£ç±»å‹å‚æ•°çš„åŒ…è£…å‡½æ•°ç»„åˆæˆä¸€æ¡é“¾æ¥è°ƒç”¨ï¼Œå½¢å¼æ˜¯è¿™æ ·çš„ï¼š</p><pre><code class=\"language-plain\">YourWrapperFunc1(YourWrapperFunc2(YourWrapperFunc3(...)))\n</code></pre><p>æˆ‘ä»¬åœ¨ä¸Šé¢ç¤ºä¾‹çš„åŸºç¡€ä¸Šè‡ªå®šä¹‰ä¸€ä¸ªåŒ…è£…å‡½æ•°ï¼š<code>CapReader</code>ï¼Œé€šè¿‡è¿™ä¸ªå‡½æ•°çš„åŒ…è£…ï¼Œæˆ‘ä»¬èƒ½å¾—åˆ°ä¸€ä¸ªå¯ä»¥å°†è¾“å…¥çš„æ•°æ®è½¬æ¢ä¸ºå¤§å†™çš„Readeræ¥å£å®ç°ï¼š</p><pre><code class=\"language-plain\">func CapReader(r io.Reader) io.Reader {\n    return &amp;capitalizedReader{r: r}\n}\n\ntype capitalizedReader struct {\n    r io.Reader\n}\n\nfunc (r *capitalizedReader) Read(p []byte) (int, error) {\n    n, err := r.r.Read(p)\n    if err != nil {\n        return 0, err\n    }\n\n    q := bytes.ToUpper(p)\n    for i, v := range q {\n        p[i] = v\n    }\n    return n, err\n}\n\nfunc main() {\n    r := strings.NewReader(\"hello, gopher!\\n\")\n    r1 := CapReader(io.LimitReader(r, 4))\n    if _, err := io.Copy(os.Stdout, r1); err != nil {\n        log.Fatal(err)\n    }\n}\n</code></pre><p>è¿™é‡Œï¼Œæˆ‘ä»¬å°†CapReaderå’Œio.LimitReaderä¸²åœ¨äº†ä¸€èµ·å½¢æˆä¸€æ¡è°ƒç”¨é“¾ï¼Œè¿™æ¡è°ƒç”¨é“¾çš„åŠŸèƒ½å˜ä¸ºï¼šæˆªå–è¾“å…¥æ•°æ®çš„å‰å››ä¸ªå­—èŠ‚å¹¶å°†å…¶è½¬æ¢ä¸ºå¤§å†™å­—æ¯ã€‚è¿™ä¸ªç¤ºä¾‹çš„è¿è¡Œç»“æœä¸æˆ‘ä»¬é¢„æœŸåŠŸèƒ½ä¹Ÿæ˜¯ä¸€è‡´çš„ï¼š</p><pre><code class=\"language-plain\">HELL\n</code></pre><h3>é€‚é…å™¨æ¨¡å¼</h3><p>é€‚é…å™¨æ¨¡å¼ä¸æ˜¯åŸºæœ¬æ¨¡å¼çš„ç›´æ¥è¡ç”Ÿæ¨¡å¼ï¼Œä½†è¿™ç§æ¨¡å¼æ˜¯åé¢æˆ‘ä»¬è®²è§£ä¸­é—´ä»¶æ¨¡å¼çš„å‰æï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç®€å•ä»‹ç»ä¸‹è¿™ä¸ªæ¨¡å¼ã€‚</p><p>é€‚é…å™¨æ¨¡å¼çš„æ ¸å¿ƒæ˜¯é€‚é…å™¨å‡½æ•°ç±»å‹ï¼ˆAdapter Function Typeï¼‰ã€‚é€‚é…å™¨å‡½æ•°ç±»å‹æ˜¯ä¸€ä¸ªè¾…åŠ©æ°´å¹³ç»„åˆå®ç°çš„â€œå·¥å…·â€ç±»å‹ã€‚è¿™é‡Œæˆ‘è¦å†å¼ºè°ƒä¸€ä¸‹ï¼Œ<strong>å®ƒæ˜¯ä¸€ä¸ªç±»å‹</strong>ã€‚å®ƒå¯ä»¥å°†ä¸€ä¸ªæ»¡è¶³ç‰¹å®šå‡½æ•°ç­¾åçš„æ™®é€šå‡½æ•°ï¼Œæ˜¾å¼è½¬æ¢æˆè‡ªèº«ç±»å‹çš„å®ä¾‹ï¼Œè½¬æ¢åçš„å®ä¾‹åŒæ—¶ä¹Ÿæ˜¯æŸä¸ªæ¥å£ç±»å‹çš„å®ç°è€…ã€‚</p><p>æœ€å…¸å‹çš„é€‚é…å™¨å‡½æ•°ç±»å‹è«è¿‡äºæˆ‘ä»¬åœ¨ç¬¬21è®²ä¸­æåˆ°è¿‡çš„ <code>http.HandlerFunc</code> äº†ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªåº”ç”¨http.HandlerFuncçš„ä¾‹å­ï¼š</p><pre><code class=\"language-plain\">func greetings(w http.ResponseWriter, r *http.Request) {\n    fmt.Fprintf(w, \"Welcome!\")\n}\n\nfunc main() {\n    http.ListenAndServe(\":8080\", http.HandlerFunc(greetings))\n}\n</code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªä¾‹å­é€šè¿‡http.HandlerFuncè¿™ä¸ªé€‚é…å™¨å‡½æ•°ç±»å‹ï¼Œå°†æ™®é€šå‡½æ•°greetingså¿«é€Ÿè½¬åŒ–ä¸ºæ»¡è¶³http.Handleræ¥å£çš„ç±»å‹ã€‚è€Œhttp.HandleFuncè¿™ä¸ªé€‚é…å™¨å‡½æ•°ç±»å‹çš„å®šä¹‰æ˜¯è¿™æ ·çš„ï¼š</p><pre><code class=\"language-plain\">// $GOROOT/src/net/http/server.go\ntype Handler interface {\n    ServeHTTP(ResponseWriter, *Request)\n}\n\ntype HandlerFunc func(ResponseWriter, *Request)\n\nfunc (f HandlerFunc) ServeHTTP(w ResponseWriter, r *Request) {\n    f(w, r)\n}\n</code></pre><p>ç»è¿‡HandlerFuncçš„é€‚é…è½¬åŒ–åï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†å®ƒçš„å®ä¾‹ç”¨ä½œå®å‚ï¼Œä¼ é€’ç»™æ¥æ”¶http.Handleræ¥å£çš„http.ListenAndServeå‡½æ•°ï¼Œä»è€Œå®ç°åŸºäºæ¥å£çš„ç»„åˆã€‚</p><h3>ä¸­é—´ä»¶ï¼ˆMiddlewareï¼‰</h3><p>æœ€åï¼Œæˆ‘ä»¬æ¥ä»‹ç»ä¸‹ä¸­é—´ä»¶è¿™ä¸ªåº”ç”¨æ¨¡å¼ã€‚ä¸­é—´ä»¶ï¼ˆMiddlewareï¼‰è¿™ä¸ªè¯çš„å«ä¹‰å¯å¤§å¯å°ã€‚åœ¨Go Webç¼–ç¨‹ä¸­ï¼Œâ€œä¸­é—´ä»¶â€å¸¸å¸¸æŒ‡çš„æ˜¯ä¸€ä¸ªå®ç°äº†http.Handleræ¥å£çš„http.HandlerFuncç±»å‹å®ä¾‹ã€‚å®è´¨ä¸Šï¼Œè¿™é‡Œçš„<strong>ä¸­é—´ä»¶å°±æ˜¯åŒ…è£…æ¨¡å¼å’Œé€‚é…å™¨æ¨¡å¼ç»“åˆçš„äº§ç‰©</strong>ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><pre><code class=\"language-plain\">func validateAuth(s string) error {\n    if s != \"123456\" {\n        return fmt.Errorf(\"%s\", \"bad auth token\")\n    }\n    return nil\n}\n\nfunc greetings(w http.ResponseWriter, r *http.Request) {\n    fmt.Fprintf(w, \"Welcome!\")\n}\n\nfunc logHandler(h http.Handler) http.Handler {\n    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n        t := time.Now()\n        log.Printf(\"[%s] %q %v\\n\", r.Method, r.URL.String(), t)\n        h.ServeHTTP(w, r)\n    })\n}\n\nfunc authHandler(h http.Handler) http.Handler {\n    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n        err := validateAuth(r.Header.Get(\"auth\"))\n        if err != nil {\n            http.Error(w, \"bad auth param\", http.StatusUnauthorized)\n            return\n        }\n        h.ServeHTTP(w, r)\n    })\n\n}\n\nfunc main() {\n    http.ListenAndServe(\":8080\", logHandler(authHandler(http.HandlerFunc(greetings))))\n}\n</code></pre><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œæ‰€è°“ä¸­é—´ä»¶ï¼ˆå¦‚ï¼šlogHandlerã€authHandlerï¼‰æœ¬è´¨å°±æ˜¯ä¸€ä¸ªåŒ…è£…å‡½æ•°ï¼ˆæ”¯æŒé“¾å¼è°ƒç”¨ï¼‰ï¼Œä½†å®ƒçš„å†…éƒ¨åˆ©ç”¨äº†é€‚é…å™¨å‡½æ•°ç±»å‹ï¼ˆhttp.HandlerFuncï¼‰ï¼Œå°†ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼ˆæ¯”å¦‚ä¾‹å­ä¸­çš„å‡ ä¸ªåŒ¿åå‡½æ•°ï¼‰è½¬å‹ä¸ºå®ç°äº†http.Handlerçš„ç±»å‹çš„å®ä¾‹ã€‚</p><p>è¿è¡Œè¿™ä¸ªç¤ºä¾‹ï¼Œå¹¶ç”¨curlå·¥å…·å‘½ä»¤å¯¹å…¶è¿›è¡Œæµ‹è¯•ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸‹é¢ç»“æœï¼š</p><pre><code class=\"language-plain\">$curl http://localhost:8080\nbad auth param\n\n$curl -H \"auth:123456\" localhost:8080/ \nWelcome!\n</code></pre><p>ä»æµ‹è¯•ç»“æœä¸Šçœ‹ï¼Œä¸­é—´ä»¶authHandlerèµ·åˆ°äº†å¯¹HTTPè¯·æ±‚è¿›è¡Œé‰´æƒçš„ä½œç”¨ã€‚</p><p>å¥½äº†ï¼Œåˆ°è¿™é‡Œæˆ‘ä»¬å®Œæˆäº†å¯¹æ¥å£çš„ä¸€ä¸ªåŸºæœ¬ä½¿ç”¨æ¨¡å¼ä»¥åŠä¸‰ä¸ªè¡ç”Ÿæ¨¡å¼çš„å­¦ä¹ ï¼Œæ·±åˆ»ç†è§£å¹¶çµæ´»è¿ç”¨è¿™äº›æ¥å£ä½¿ç”¨æ¨¡å¼å°†ç»™ä½ çš„åº”ç”¨è®¾è®¡å¸¦æ¥æ˜¾è‘—çš„æå‡ã€‚</p><h2>å°½é‡é¿å…ä½¿ç”¨ç©ºæ¥å£ä½œä¸ºå‡½æ•°å‚æ•°ç±»å‹</h2><p>æœ€åï¼Œæˆ‘å†æ¥è¯´ä¸€ä¸‹æ¥å£ä½¿ç”¨çš„æ³¨æ„äº‹é¡¹ï¼Œè¿™ä¸ªæ³¨æ„äº‹é¡¹ä¸ç©ºæ¥å£æœ‰å…³ã€‚Goè¯­è¨€ä¹‹çˆ¶Rob Pikeæ›¾è¯´è¿‡ï¼š<strong>ç©ºæ¥å£ä¸æä¾›ä»»ä½•ä¿¡æ¯ï¼ˆThe empty interface says nothingï¼‰</strong>ã€‚æˆ‘ä»¬åº”è¯¥æ€ä¹ˆç†è§£è¿™å¥è¯çš„æ·±å±‚å«ä¹‰å‘¢ï¼Ÿ</p><p>åœ¨Goè¯­è¨€ä¸­ï¼Œä¸€æ–¹é¢ä½ ä¸ç”¨åƒJavaé‚£æ ·æ˜¾å¼å£°æ˜æŸä¸ªç±»å‹å®ç°äº†æŸä¸ªæ¥å£ï¼Œä½†å¦ä¸€æ–¹é¢ï¼Œä½ åˆå¿…é¡»å£°æ˜è¿™ä¸ªæ¥å£ï¼Œè¿™åˆä¸æ¥å£åœ¨Javaç­‰é™æ€ç±»å‹è¯­è¨€ä¸­çš„å·¥ä½œæ–¹å¼æ›´åŠ ä¸€è‡´ã€‚</p><p>è¿™ç§ä¸éœ€è¦ç±»å‹æ˜¾å¼å£°æ˜å®ç°äº†æŸä¸ªæ¥å£çš„æ–¹å¼ï¼Œå¯ä»¥è®©ç§ç±»ç¹å¤šçš„ç±»å‹ä¸æ¥å£åŒ¹é…ï¼ŒåŒ…æ‹¬é‚£äº›å­˜é‡çš„ã€å¹¶éç”±ä½ ç¼–å†™çš„ä»£ç ä»¥åŠä½ æ— æ³•ç¼–è¾‘çš„ä»£ç ï¼ˆæ¯”å¦‚ï¼šæ ‡å‡†åº“ï¼‰ã€‚Goçš„è¿™ç§å¤„ç†æ–¹å¼å…¼é¡¾å®‰å…¨æ€§å’Œçµæ´»æ€§ï¼Œå…¶ä¸­ï¼Œè¿™ä¸ªå®‰å…¨æ€§å°±æ˜¯ç”±Goç¼–è¯‘å™¨æ¥ä¿è¯çš„ï¼Œè€Œä¸ºç¼–è¯‘å™¨æä¾›è¾“å…¥ä¿¡æ¯çš„æ°æ°æ˜¯æ¥å£ç±»å‹çš„å®šä¹‰ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬çœ‹ä¸‹é¢çš„æ¥å£ï¼š</p><pre><code class=\"language-plain\">// $GOROOT/src/io/io.go\ntype Reader interface {\n\tRead(p []byte) (n int, err error)\n}\n</code></pre><p>Goç¼–è¯‘å™¨é€šè¿‡è§£æè¿™ä¸ªæ¥å£å®šä¹‰ï¼Œå¾—åˆ°æ¥å£çš„åå­—ä¿¡æ¯ä»¥åŠå®ƒçš„æ–¹æ³•ä¿¡æ¯ï¼Œåœ¨ä¸ºè¿™ä¸ªæ¥å£ç±»å‹å‚æ•°èµ‹å€¼æ—¶ï¼Œç¼–è¯‘å™¨å°±ä¼šæ ¹æ®è¿™äº›ä¿¡æ¯å¯¹å®å‚è¿›è¡Œæ£€æŸ¥ã€‚è¿™æ—¶ä½ å¯ä»¥æƒ³ä¸€ä¸‹ï¼Œå¦‚æœå‡½æ•°æˆ–æ–¹æ³•çš„å‚æ•°ç±»å‹ä¸ºç©ºæ¥å£ <code>interface{}</code>ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ</p><p>è¿™æ°å¥½å°±åº”äº†Rob Pikeçš„é‚£å¥è¯ï¼šâ€œç©ºæ¥å£ä¸æä¾›ä»»ä½•ä¿¡æ¯â€ã€‚è¿™é‡Œâ€œæä¾›â€ä¸€è¯çš„å¯¹è±¡ä¸æ˜¯å¼€å‘è€…ï¼Œè€Œæ˜¯ç¼–è¯‘å™¨ã€‚åœ¨å‡½æ•°æˆ–æ–¹æ³•å‚æ•°ä¸­ä½¿ç”¨ç©ºæ¥å£ç±»å‹ï¼Œå°±æ„å‘³ç€ä½ æ²¡æœ‰ä¸ºç¼–è¯‘å™¨æä¾›å…³äºä¼ å…¥å®å‚æ•°æ®çš„ä»»ä½•ä¿¡æ¯ï¼Œæ‰€ä»¥ï¼Œä½ å°±ä¼šå¤±å»é™æ€ç±»å‹è¯­è¨€ç±»å‹å®‰å…¨æ£€æŸ¥çš„<strong>â€œä¿æŠ¤å±éšœâ€</strong>ï¼Œä½ éœ€è¦è‡ªå·±æ£€æŸ¥ç±»ä¼¼çš„é”™è¯¯ï¼Œå¹¶ä¸”ç›´åˆ°è¿è¡Œæ—¶æ‰èƒ½å‘ç°æ­¤ç±»é”™è¯¯ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘å»ºè®®å¹¿å¤§Gopherå°½å¯èƒ½åœ°æŠ½è±¡å‡ºå¸¦æœ‰ä¸€å®šè¡Œä¸ºå¥‘çº¦çš„æ¥å£ï¼Œå¹¶å°†å®ƒä½œä¸ºå‡½æ•°å‚æ•°ç±»å‹ï¼Œ<strong>å°½é‡ä¸è¦ä½¿ç”¨å¯ä»¥â€œé€ƒè¿‡â€ç¼–è¯‘å™¨ç±»å‹å®‰å…¨æ£€æŸ¥çš„ç©ºæ¥å£ç±»å‹ï¼ˆinterface{}ï¼‰</strong>ã€‚</p><p>åœ¨è¿™æ–¹é¢ï¼ŒGoæ ‡å‡†åº“å·²ç»ä¸ºæˆ‘ä»¬ä½œå‡ºäº†â€è¡¨ç‡â€œã€‚å…¨é¢æœç´¢æ ‡å‡†åº“åï¼Œä½ å¯ä»¥å‘ç°ä»¥ <code>interface{}</code>ä¸ºå‚æ•°ç±»å‹çš„æ–¹æ³•å’Œå‡½æ•°å°‘ä¹‹ç”šå°‘ã€‚ä¸è¿‡ï¼Œä¹Ÿè¿˜æœ‰ï¼Œä½¿ç”¨ <code>interface{}</code>ä½œä¸ºå‚æ•°ç±»å‹çš„å‡½æ•°æˆ–æ–¹æ³•ä¸»è¦æœ‰ä¸¤ç±»ï¼š</p><ul>\n<li>å®¹å™¨ç®—æ³•ç±»ï¼Œæ¯”å¦‚ï¼šcontainerä¸‹çš„heapã€listå’ŒringåŒ…ã€sortåŒ…ã€sync.Mapç­‰ï¼›</li>\n<li>æ ¼å¼åŒ–/æ—¥å¿—ç±»ï¼Œæ¯”å¦‚ï¼šfmtåŒ…ã€logåŒ…ç­‰ã€‚</li>\n</ul><p>è¿™äº›ä½¿ç”¨ <code>interface{}</code>ä½œä¸ºå‚æ•°ç±»å‹çš„å‡½æ•°æˆ–æ–¹æ³•éƒ½æœ‰ä¸€ä¸ªå…±åŒç‰¹ç‚¹ï¼Œå°±æ˜¯å®ƒä»¬é¢å¯¹çš„éƒ½æ˜¯æœªçŸ¥ç±»å‹çš„æ•°æ®ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œä½¿ç”¨å…·æœ‰â€œæ³›å‹â€èƒ½åŠ›çš„ <code>interface{}ç±»å‹ã€‚</code>æˆ‘ä»¬ä¹Ÿå¯ä»¥ç†è§£ä¸ºæ˜¯åœ¨Goè¯­è¨€å°šæœªæ”¯æŒæ³›å‹çš„è¿™ä¸ªé˜¶æ®µçš„æƒå®œä¹‹è®¡ã€‚ç­‰Goæ³›å‹è½åœ°åï¼Œå¾ˆå¤šåœºåˆä¸‹interface{}å°±å¯ä»¥è¢«æ³›å‹æ›¿ä»£äº†ã€‚</p><h2>å°ç»“</h2><p>å¥½äº†ï¼Œä»Šå¤©çš„è¯¾è®²åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œç°åœ¨æˆ‘ä»¬ä¸€èµ·æ¥å›é¡¾ä¸€ä¸‹å§ã€‚</p><p>åœ¨è¿™ä¸€è®²ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦å›´ç»•æ¥å£çš„åº”ç”¨æ¨¡å¼è¿›è¡Œè®²è§£ã€‚ä½ åœ¨ä½¿ç”¨æ¥å£å‰ä¸€å®šè¦ææ¸…æ¥šè‡ªå·±ä½¿ç”¨æ¥å£çš„åŸå› ï¼Œåƒä¸‡ä¸èƒ½ä¸ºäº†ä½¿ç”¨æ¥å£è€Œä½¿ç”¨æ¥å£ã€‚</p><p>æ¥å£ä¸Goçš„â€œç»„åˆâ€çš„è®¾è®¡å“²å­¦æ¯æ¯ç›¸å…³ã€‚åœ¨Goè¯­è¨€ä¸­ï¼Œç»„åˆæ˜¯Goç¨‹åºé—´å„ä¸ªéƒ¨åˆ†çš„ä¸»è¦è€¦åˆæ–¹å¼ã€‚å‚ç›´ç»„åˆå¯å®ç°æ–¹æ³•å®ç°å’Œæ¥å£å®šä¹‰çš„é‡ç”¨ï¼Œæ›´å¤šç”¨äºåœ¨æ–°ç±»å‹çš„å®šä¹‰æ–¹é¢ã€‚è€Œæ°´å¹³ç»„åˆæ›´å¤šå°†æ¥å£ä½œä¸ºâ€œå…³èŠ‚â€ï¼Œå°†å„ä¸ªå‚ç›´ç»„åˆå‡ºçš„ç±»å‹â€œè€¦åˆâ€åœ¨ä¸€èµ·ï¼Œä»è€Œç¼–åˆ¶å‡ºç¨‹åºçš„é™æ€éª¨æ¶ã€‚</p><p>é€šè¿‡æ¥å£è¿›è¡Œæ°´å¹³ç»„åˆçš„åŸºæœ¬æ¨¡å¼ï¼Œæ˜¯â€œä½¿ç”¨æ¥å—æ¥å£ç±»å‹å‚æ•°çš„å‡½æ•°æˆ–æ–¹æ³•â€ï¼Œåœ¨è¿™ä¸€åŸºæœ¬æ¨¡å¼çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬è¿˜å­¦ä¹ äº†å‡ ä¸ªè¡ç”Ÿæ¨¡å¼ï¼šåˆ›å»ºæ¨¡å¼ã€åŒ…è£…å™¨æ¨¡å¼ä¸ä¸­é—´ä»¶æ¨¡å¼ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å­¦ä¹ äº†ä¸€ä¸ªè¾…åŠ©æ°´å¹³ç»„åˆå®ç°çš„â€œå·¥å…·â€ç±»å‹ï¼šé€‚é…å™¨å‡½æ•°ç±»å‹ï¼Œå®ƒä¹Ÿæ˜¯å®ç°ä¸­é—´ä»¶æ¨¡å¼çš„å‰æã€‚</p><p>æœ€åéœ€è¦æˆ‘ä»¬ç‰¢è®°çš„æ˜¯ï¼šæˆ‘ä»¬è¦<strong>å°½é‡é¿å…ä½¿ç”¨ç©ºæ¥å£ä½œä¸ºå‡½æ•°å‚æ•°ç±»å‹ã€‚</strong>ä¸€æ—¦ä½¿ç”¨ç©ºæ¥å£ä½œä¸ºå‡½æ•°å‚æ•°ç±»å‹ï¼Œä½ å°†å¤±å»ç¼–è¯‘å™¨ä¸ºä½ æä¾›çš„ç±»å‹å®‰å…¨ä¿æŠ¤å±éšœã€‚</p><h2>æ€è€ƒé¢˜</h2><p>é™¤äº†è¿™ä¸€è®²ä¸­ä»‹ç»çš„æ¥å£åº”ç”¨æ¨¡å¼ï¼Œä½ è¿˜è§è¿‡æˆ–ä½¿ç”¨è¿‡å“ªäº›æ¥å£åº”ç”¨æ¨¡å¼å‘¢ï¼ŸæœŸå¾…åœ¨ç•™è¨€åŒºçœ‹åˆ°ä½ çš„åˆ†äº«ã€‚</p><p>æ¬¢è¿æŠŠè¿™èŠ‚è¯¾åˆ†äº«ç»™æ›´å¤šå¯¹Goè¯­è¨€çš„æ¥å£æ„Ÿå…´è¶£çš„æœ‹å‹ã€‚æˆ‘æ˜¯Tony Baiï¼Œä¸‹èŠ‚è¯¾è§ã€‚</p>","neighbors":{"left":{"article_title":"29ï½œæ¥å£ï¼šä¸ºä»€ä¹ˆnilæ¥å£ä¸ç­‰äºnilï¼Ÿ","id":473414},"right":{"article_title":"å…ƒæ—¦å¿«ä¹ï½œè¿™æ˜¯ä¸€ä»½æš‚æ—¶åœæ›´çš„å£°æ˜","id":474265}},"comments":[{"had_liked":false,"id":328877,"user_name":"return","can_delete":false,"product_type":"c1","uid":1135528,"ip_address":"","ucode":"42B8A3380DF04B","user_header":"https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg","comment_is_top":false,"comment_ctime":1640923103,"is_pvip":false,"replies":[{"id":120314,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1641874379,"ip_address":"","comment_id":328877,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"è€å¸ˆè®²çš„å¤ªå¥½äº†ï¼Œè™½ç„¶å®šä½æ˜¯å…¥é—¨ï¼Œ \nä½†ä¸ªäººè®¤ä¸ºï¼Œ åŸºç¡€æ‰æ˜¯æœ€æ ¸å¿ƒçš„ï¼Œ è€å¸ˆæŠŠåŸºç¡€è®²çš„å¤ªé€å½»äº†ã€‚è¿™ä¸ªä¸“æ æ¯”æŸäº›è¿›é˜¶é«˜é˜¶ä¸“æ å¥½å¤šäº†ã€‚\nè¿™ä¸€ç¯‡ åŠ æ·±äº† æˆ‘å¯¹ç»„åˆçš„ç†è§£ï¼Œ\næ„Ÿè°¢è€å¸ˆç”¨å¿ƒçš„è¾“å‡ºã€‚\nå¥½é¥­ä¸æ€•æ™šï¼Œ è€å¿ƒç­‰ç­‰è€å¸ˆåç»­çš„ é«˜è´¨é‡çŸ¥è¯†ï¼Œ å¤§å®¶åˆ«å‚¬ï¼Œå“è´¨ç¬¬ä¸€ã€‚","like_count":33},{"had_liked":false,"id":334939,"user_name":"Geek_2337af","can_delete":false,"product_type":"c1","uid":2847330,"ip_address":"","ucode":"54B135EB7E70F1","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep7c7UKsjRiclaAqD9vMHSUXayzrvRhvic3Lm6ibX82L3DibJnCCtDmB3OfxbuVjetpT6Qa8IuwqZCWlw/132","comment_is_top":false,"comment_ctime":1645192308,"is_pvip":false,"replies":[{"id":122603,"content":"å¥½é—®é¢˜ï¼ğŸ‘\n\n1. goè§„èŒƒä¸­è¯´ï¼š åªæœ‰å¯å¯»å€çš„(addressable)çš„å˜é‡åœ¨è°ƒç”¨*Tä½œä¸ºreceiverå‚æ•°ç±»å‹çš„æ–¹æ³•æ—¶ï¼ŒGoæ‰ä¼šæ–½å±•â€œè¯­æ³•ç³–â€ï¼Œå–å…¶åœ°å€å†è°ƒç”¨å¯¹åº”çš„æ–¹æ³•ã€‚å…³äºaddressableè¿™ä¸ªæ¦‚å¿µæ¯”è¾ƒå¤æ‚ï¼Œåœ¨ä¸“æ é‡Œä¸ä¾¿å±•å¼€ï¼Œå°±æ²¡æœ‰æã€‚var _ = IntSet{}.String() ä¸­çš„IntSet()æ˜¯ä¸€ä¸ªä¸­é—´å€¼ï¼Œæ˜¯ä¸å¯è·å¾—å…¶åœ°å€çš„ï¼Œå› æ­¤ä¸èƒ½è¢«è‡ªåŠ¨è½¬æ¢ï¼Œå› æ­¤ç¼–è¯‘å™¨æŠ¥é”™ã€‚\n2. è°ƒç”¨æ–¹æ³•çš„ä¹ æƒ¯æ²¡æœ‰æ ‡å‡†ğŸ˜","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":1026224,"ctime":1645603933,"ip_address":"","comment_id":334939,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"åœ¨å­¦ä¹ ä¸Šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œè¯·è€å¸ˆè§£ç­”ï¼š\nIntSetç±»å‹çš„Stringæ–¹æ³•çš„æ¥æ”¶è€…æ˜¯ä¸€ä¸ªæŒ‡é’ˆç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½åœ¨ä¸€ä¸ªä¸èƒ½å¯»å€çš„IntSetå€¼ä¸Šè°ƒç”¨è¿™ä¸ªæ–¹æ³•\ntype IntSet struct { &#47;* ... *&#47; }\nfunc (*IntSet) String() string\nvar _ = IntSet{}.String() &#47;&#47; compile error: String requires *IntSet receiver\nä½†æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªIntSetå€¼ä¸Šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼š\nvar s IntSet\nvar _ = s.String() &#47;&#47; OK: s is a variable and &amp;s has a String method\n1.æ€ä¹ˆç†è§£è¿™ä¸ªä¸èƒ½å¯»å€çš„IntSetå€¼\n2.è°ƒç”¨æ–¹æ³•çš„ä¹ æƒ¯æ˜¯ç›´æ¥ä½¿ç”¨ç»“æ„ä½“å˜é‡ï¼ˆvar i InSetï¼‰ï¼Œè¿˜æ˜¯j := InSet{},å‡è®¾æ–¹æ³•ä¸­ä¸éœ€è¦ä½¿ç”¨åˆ°è¿™ä¸ªå®ä¾‹","like_count":11,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545205,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641874379,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":330941,"user_name":"æ–‡ç»","can_delete":false,"product_type":"c1","uid":1072346,"ip_address":"","ucode":"2C059BD2A4276B","user_header":"https://static001.geekbang.org/account/avatar/00/10/5c/da/0a8bc27b.jpg","comment_is_top":false,"comment_ctime":1642317525,"is_pvip":true,"replies":[{"id":120977,"content":"ä½ çš„ç†è§£æ²¡é”™ï¼è¿™ä¸ªåœ¨ä¸“æ å‰é¢çš„è¯¾ç¨‹ä¸­ä¹Ÿè®²è¿‡ï¼Œè¿™é‡Œå°±æ˜¯ä¸€ä¸ªç±»å‹è½¬æ¢ã€‚é€šè¿‡ç±»å‹è½¬æ¢ï¼ŒHandlerFuncå¯ä»¥è®©ä¸€ä¸ªæ™®é€šå‡½æ•°æˆä¸ºå®ç°ServeHTTPæ–¹æ³•çš„å¯¹è±¡ï¼Œä»è€Œæ»¡è¶³http.Handleræ¥å£ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":1026224,"ctime":1642458609,"ip_address":"","comment_id":330941,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"ç™½è€å¸ˆï¼Œè¿™æ®µä»£ç æˆ‘æœ‰ç‚¹ç–‘é—®ï¼š\ntype HandlerFunc func(ResponseWriter, *Request) \nè¿™é‡Œæ˜¯å®šä¹‰äº†HandlerFuncç±»å‹\nhttp.HandlerFunc(greetings)\nåœ¨è¿™é‡Œæ˜¯ä¸æ˜¯å¯¹greetingsåšäº†ç±»å‹è½¬æ¢ï¼Ÿåƒæ˜¯int64(123)ã€‚æˆ‘æŠŠè¿™ä¸ªè·Ÿå¯¹è±¡çš„åˆå§‹åŒ–æœ‰ç‚¹æ··æ·†ï¼Œè§‰å¾—è¦æœ‰ä¸ªå­—æ®µæ¥å­˜å‚¨greetingsçš„å€¼ã€‚","like_count":8,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552815,"discussion_content":"å¥½é—®é¢˜ï¼ğŸ‘\n\n1. goè§„èŒƒä¸­è¯´ï¼š åªæœ‰å¯å¯»å€çš„(addressable)çš„å˜é‡åœ¨è°ƒç”¨*Tä½œä¸ºreceiverå‚æ•°ç±»å‹çš„æ–¹æ³•æ—¶ï¼ŒGoæ‰ä¼šæ–½å±•â€œè¯­æ³•ç³–â€ï¼Œå–å…¶åœ°å€å†è°ƒç”¨å¯¹åº”çš„æ–¹æ³•ã€‚å…³äºaddressableè¿™ä¸ªæ¦‚å¿µæ¯”è¾ƒå¤æ‚ï¼Œåœ¨ä¸“æ é‡Œä¸ä¾¿å±•å¼€ï¼Œå°±æ²¡æœ‰æã€‚var _ = IntSet{}.String() ä¸­çš„IntSet()æ˜¯ä¸€ä¸ªä¸­é—´å€¼ï¼Œæ˜¯ä¸å¯è·å¾—å…¶åœ°å€çš„ï¼Œå› æ­¤ä¸èƒ½è¢«è‡ªåŠ¨è½¬æ¢ï¼Œå› æ­¤ç¼–è¯‘å™¨æŠ¥é”™ã€‚\n2. è°ƒç”¨æ–¹æ³•çš„ä¹ æƒ¯æ²¡æœ‰æ ‡å‡†ğŸ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645603934,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1590695,"avatar":"https://static001.geekbang.org/account/avatar/00/18/45/a7/da9b2d2b.jpg","nickname":"ç™¾ç‚¼é’¢","note":"","ucode":"71A20C3C0B2978","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":607962,"discussion_content":"æŠŠ `func (*IntSet) String() string` æ”¹ä¸º `func (IntSet) String() string` ä¸Šé¢çš„è°ƒç”¨ `var _ = IntSet{}.String()` å°±ä¸æŠ¥é”™äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678198115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":329187,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1641199390,"is_pvip":false,"replies":[{"id":120435,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1641998079,"ip_address":"","comment_id":329187,"utype":1}],"discussion_count":7,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"Go ä¸­çš„æ¥å£å®ç°çš„æ˜¯çœŸé‡Œæ°æ›¿æ¢åŸåˆ™(LSP)ï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçˆ¶ç±»å¼ºè½¬å­ç±»åä½¿ç”¨å­ç±»ç‰¹æœ‰æ–¹æ³•çš„å‡é‡Œæ°æ›¿æ¢åŸåˆ™äº†","like_count":8,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546895,"discussion_content":"ä½ çš„ç†è§£æ²¡é”™ï¼è¿™ä¸ªåœ¨ä¸“æ å‰é¢çš„è¯¾ç¨‹ä¸­ä¹Ÿè®²è¿‡ï¼Œè¿™é‡Œå°±æ˜¯ä¸€ä¸ªç±»å‹è½¬æ¢ã€‚é€šè¿‡ç±»å‹è½¬æ¢ï¼ŒHandlerFuncå¯ä»¥è®©ä¸€ä¸ªæ™®é€šå‡½æ•°æˆä¸ºå®ç°ServeHTTPæ–¹æ³•çš„å¯¹è±¡ï¼Œä»è€Œæ»¡è¶³http.Handleræ¥å£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642458609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2082894,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL4XcqiaZHCzSblOSzf71k7VoCSRB6E7nwlv1LDPaDOxILueiccibRw3At6l5Xfxf2ibTP7o3yy6Geajg/132","nickname":"chubaibai","note":"","ucode":"4B23AE050DC85E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":592531,"discussion_content":"javaç¨‹åºå‘˜å­¦ä¹ goï¼Œå‰é¢ç« èŠ‚å‡ºç°è¿™æ®µhttp.HandlerFunc(greetings)æ—¶å°±å®Œå…¨æ‡µé€¼æ²¡æ‡‚ï¼ŒçŸ³åŒ–äº†ï¼Œä»Šå¤©åˆçŸ³åŒ–ä¸€éã€‚\næ­£æ–‡é‡Œä½œè€…è®²è¿‡funcçš„ç±»å‹è½¬æ¢ä¹ˆï¼Œæ²¡å°è±¡ï¼Œæ‰€ä»¥è§‰å¾—å¤ªè·³è·ƒã€‚\nå‚è€ƒäº†å¤–éƒ¨ä»‹ç» https://objcoding.com/2017/12/27/Go-functions-as-values-and-types/ ï¼Œæ‰ç†è§£äº†è¿™å—ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1667467703,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353565,"user_name":"SuperSu","can_delete":false,"product_type":"c1","uid":1068326,"ip_address":"è¾½å®","ucode":"A3F7AF23D193AF","user_header":"https://static001.geekbang.org/account/avatar/00/10/4d/26/44095eba.jpg","comment_is_top":false,"comment_ctime":1659575081,"is_pvip":false,"replies":[{"id":128658,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1659914668,"ip_address":"è¾½å®","comment_id":353565,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"å…ˆç”Ÿå¾ªå¾ªå–„è¯±ï¼Œçœ‹çš„å­¦ç”Ÿç›´å‘¼è¿‡ç˜¾","like_count":4,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545596,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641998079,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546616,"discussion_content":"æ¥å£çš„å®ç°å¯ä»¥æœ‰è‡ªå·±ç‰¹æœ‰çš„æ–¹æ³•ï¼Œä½†åœ¨è°ˆè®ºé‡Œæ°æ›¿æ¢åŸåˆ™æ—¶ï¼Œæ¥å£çš„å®ç°åªèƒ½æš´éœ²è‡ªå·±å®ç°çš„æ¥å£æ–¹æ³•ï¼Œä¸èƒ½æš´éœ²è‡ªå·±ç‰¹æœ‰çš„æ–¹æ³•ã€‚\n\næˆ‘ä¹Ÿæ˜¯Goå°ç™½ï¼Œä¸Šé¢çš„ç•™è¨€ä¸»è¦æƒ³è¡¨è¾¾ï¼šåœ¨Goä¸­ä¸ä¼šå› ä¸ºå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œå¯¼è‡´å‡çš„é‡Œæ°æ›¿æ¢åŸåˆ™å‡ºç°ã€‚Javaä¸­ç»å¸¸å‡ºç°ä½¿ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œæ‰“ç ´é‡Œæ°æ›¿æ¢åŸåˆ™çš„ä»£ç ã€‚\nè¯¦ç»†è¯´æ˜è¯·é˜…è¯»ï¼šéƒ‘æ™”è€å¸ˆ ã€Šè½¯ä»¶è®¾è®¡ä¹‹ç¾ã€‹| 22 | Liskovæ›¿æ¢åŸåˆ™ï¼šç”¨äº†ç»§æ‰¿ï¼Œå­ç±»å°±è®¾è®¡å¯¹äº†å—ï¼Ÿhttp://gk.link/a/114tf\n\nä»¥ä¸‹æ‘˜è‡ªæ–‡ä¸­éƒ¨åˆ†å†…å®¹ï¼š\n\nLiskov æ›¿æ¢åŸåˆ™ï¼šè‹¥æ¯ä¸ªç±»å‹ S çš„å¯¹è±¡ o1ï¼Œéƒ½å­˜åœ¨ä¸€ä¸ªç±»å‹ T çš„å¯¹è±¡ o2ï¼Œä½¿å¾—åœ¨æ‰€æœ‰é’ˆå¯¹ T ç¼–ç¨‹çš„ç¨‹åº P ä¸­ï¼Œç”¨ o1 æ›¿æ¢ o2 åï¼Œç¨‹åº P è¡Œä¸ºä¿æŒä¸å˜ï¼Œåˆ™ S æ˜¯ T çš„å­ç±»å‹ã€‚\nç”¨é€šä¿—çš„è®²æ³•æ¥è¯´ï¼Œæ„æ€å°±æ˜¯ï¼Œå­ç±»å‹ï¼ˆsubtypeï¼‰å¿…é¡»èƒ½å¤Ÿæ›¿æ¢å…¶çˆ¶ç±»å‹ï¼ˆbase typeï¼‰ã€‚\nè¿™å¥è¯çœ‹ä¼¼ç®€å•ï¼Œä½†æ˜¯è¿åè¿™ä¸ªåŸåˆ™ï¼Œåæœæ˜¯å¾ˆä¸¥é‡çš„ï¼Œæ¯”å¦‚ï¼Œçˆ¶ç±»å‹è§„å®šæ¥å£ä¸èƒ½æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œå­ç±»å‹æŠ›å‡ºäº†å¼‚å¸¸ï¼Œå°±ä¼šå¯¼è‡´ç¨‹åºè¿è¡Œçš„å¤±è´¥ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1642349261,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1479120,"avatar":"https://static001.geekbang.org/account/avatar/00/16/91/d0/35bc62b1.jpg","nickname":"æ— å’","note":"","ucode":"B9759B5646F3AB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":603757,"discussion_content":"æ¥å£çš„å®ç°è€…Exportè‡ªå·±ç‰¹æœ‰çš„æ–¹æ³•ï¼Œå¯èƒ½å¯¼è‡´è¡Œä¸ºä¸ä¸€è‡´ï¼Œä»è€Œç ´åLSPã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1676272502,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1254968,"avatar":"https://static001.geekbang.org/account/avatar/00/13/26/38/ef063dc2.jpg","nickname":"Darren","note":"","ucode":"CCD2B2C492BE9A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546246,"discussion_content":"ä½œä¸ºgoå°ç™½çš„æˆ‘é—®ä¸‹å“ˆï¼Œä¸ºå•¥ä¸ä¼šï¼Œä½œä¸ºæ¥å£çš„å®ç°ï¼Œæˆ‘ä¹Ÿå¯ä»¥æœ‰è‡ªå·±ç‰¹æœ‰çš„æ–¹æ³•å‘€ï¼Œä¸ºå•¥ä¸èƒ½è°ƒç”¨è‡ªå·±ç‰¹æœ‰çš„æ–¹æ³•äº†ï¼Ÿæ¯”å¦‚å¦‚ä¸‹è¿™æ ·\n\nfunc main() {\n\tvar ti TestInterface\n\tti = Test1{}\n\n\tti.M1()\n\n\ttest1, ok := ti.(Test1)\n\tif ok {\n\t\ttest1.M2()\n\t} else {\n\t\tfmt.Println(&#34;false&#34;)\n\t}\n\n}\n\ntype TestInterface interface {\n\tM1()\n}\n\ntype Test1 struct {\n}\n\nfunc (t Test1) M1() {\n\tfmt.Println(&#34;m1&#34;)\n}\n\nfunc (t Test1) M2() {\n\tfmt.Println(&#34;m2&#34;)\n}","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642253201,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1254968,"avatar":"https://static001.geekbang.org/account/avatar/00/13/26/38/ef063dc2.jpg","nickname":"Darren","note":"","ucode":"CCD2B2C492BE9A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546875,"discussion_content":"æ˜¨å¤©çš„å›å¤æ²¡è·Ÿåœ¨ä½ ç•™è¨€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642435584,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":546246,"ip_address":"","group_id":0},"score":546875,"extra":""},{"author":{"id":1254968,"avatar":"https://static001.geekbang.org/account/avatar/00/13/26/38/ef063dc2.jpg","nickname":"Darren","note":"","ucode":"CCD2B2C492BE9A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546915,"discussion_content":"çœ‹åˆ°ç•™è¨€äº†ï¼Œè°¢è°¢å•¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642469586,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":546875,"ip_address":"","group_id":0},"score":546915,"extra":""},{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1254968,"avatar":"https://static001.geekbang.org/account/avatar/00/13/26/38/ef063dc2.jpg","nickname":"Darren","note":"","ucode":"CCD2B2C492BE9A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547048,"discussion_content":"ğŸ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642505248,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":546915,"ip_address":"","group_id":0},"score":547048,"extra":""}]}]},{"had_liked":false,"id":332252,"user_name":"å¤šé€‰å‚æ•°","can_delete":false,"product_type":"c1","uid":1248326,"ip_address":"","ucode":"B2294D80AB075F","user_header":"https://static001.geekbang.org/account/avatar/00/13/0c/46/dfe32cf4.jpg","comment_is_top":false,"comment_ctime":1643112676,"is_pvip":false,"replies":[{"id":121505,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1643361406,"ip_address":"","comment_id":332252,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"ç‰¹åˆ«å–œæ¬¢ç™½è€å¸ˆè®² Goï¼Œè¿™ä¸ªä¸“æ è™½ç„¶è¯´æ˜¯ Go ç¬¬ä¸€è¯¾ï¼Œä½†æ˜¯æ„Ÿè§‰è¿™å†…å®¹å·²ç»ä¸æ˜¯åŸºç¡€çš„å†…å®¹ï¼Œè€Œæ˜¯ä½œä¸ºæ·±åº¦å…¥é—¨ Go çš„è¯¾äº†ã€‚å¦å¤–ï¼Œæ•´ç¯‡ä¸“æ ä¸­ï¼Œè€å¸ˆå§‹ç»ˆåœ¨ä¸æ–­ç»™æˆ‘è®² Go çš„æ€æƒ³ï¼Œè¿™ç‚¹çœŸçš„è¶… niceã€‚åŸæœ¬æˆ‘è§‰å¾—ç”¨ä¸€é—¨è¦ç”¨å®ƒç‰¹æœ‰çš„ä¸œè¥¿ï¼Œæ¯”å¦‚ Go çš„å¹¶å‘ï¼Œè€Œç™½è€å¸ˆè®©æˆ‘æ›´æ·±å…¥å»ç†è§£ Go çš„æ€æƒ³ï¼Œè¿™æ‰æ˜¯æ´»ç”¨ä¸€é—¨è¯­è¨€çš„æ ·å­ã€‚","like_count":4,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583072,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659914668,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"è¾½å®","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3794407,"avatar":"","nickname":"Geek_3d0fe8","note":"","ucode":"E75EACDA00E7A6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":638868,"discussion_content":"æ‹é©¬å±è¿˜æ˜¯ä½ å‰å®³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1710049532,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":329522,"user_name":"Calvin","can_delete":false,"product_type":"c1","uid":1603004,"ip_address":"","ucode":"0EEF5B207623B5","user_header":"https://static001.geekbang.org/account/avatar/00/18/75/bc/89d88775.jpg","comment_is_top":false,"comment_ctime":1641387495,"is_pvip":false,"replies":[{"id":120469,"content":"ä½ è¯´çš„æ²¡é”™ã€‚ä¸­é—´ä»¶(middleware)è¿™ä¸ªè¯çš„å…·ä½“å«ä¹‰è¦ç»“åˆå…·ä½“ä¸Šä¸‹æ–‡æ¥çœ‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1642039136,"ip_address":"","comment_id":329522,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"Gopher è¿™é‡Œè¯´çš„â€œä¸­é—´ä»¶â€å’Œ PHPer çš„â€œä¸­é—´ä»¶â€æ¦‚å¿µæ˜¯ä¸æ˜¯æœ‰ç‚¹åƒï¼Ÿ\nä½†æ˜¯è²Œä¼¼è·Ÿ Javaer çš„â€œä¸­é—´ä»¶â€æ¦‚å¿µä¸å¤ªä¸€æ ·ï¼šJavaer çš„â€œä¸­é—´ä»¶â€æ˜¯ç±»ä¼¼ kafkaã€zookeeper ç­‰ä¹‹ç±»çš„è½¯ä»¶é¡¹ç›®ï¼Œè€Œ Gopher çš„â€œä¸­é—´ä»¶â€æ„Ÿè§‰æ›´åƒæ˜¯ Javaer ä¸­çš„â€œè¿‡æ»¤å™¨â€ã€â€œæ‹¦æˆªå™¨â€æ¦‚å¿µï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545677,"discussion_content":"ä½ è¯´çš„æ²¡é”™ã€‚ä¸­é—´ä»¶(middleware)è¿™ä¸ªè¯çš„å…·ä½“å«ä¹‰è¦ç»“åˆå…·ä½“ä¸Šä¸‹æ–‡æ¥çœ‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642039136,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":363245,"user_name":"æ’•å½±","can_delete":false,"product_type":"c1","uid":3222094,"ip_address":"è¾½å®","ucode":"8DC169F8B8E653","user_header":"https://static001.geekbang.org/account/avatar/00/31/2a/4e/a3f53cae.jpg","comment_is_top":false,"comment_ctime":1669391581,"is_pvip":false,"replies":[{"id":132075,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1669461911,"ip_address":"è¾½å®","comment_id":363245,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"çŠ¹å¦‚çœ‹ç²¾å½©è¿›çƒé›†é”¦ï¼Œå¤©çŸ¥é“è€å¸ˆåœ¨ä¹‹å‰å€’äº†å¤šå°‘è„šï¼Œæµäº†å¤šå°‘æ±—","like_count":3,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":594840,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1669461912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"è¾½å®","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":330938,"user_name":"æ–‡ç»","can_delete":false,"product_type":"c1","uid":1072346,"ip_address":"","ucode":"2C059BD2A4276B","user_header":"https://static001.geekbang.org/account/avatar/00/10/5c/da/0a8bc27b.jpg","comment_is_top":false,"comment_ctime":1642316738,"is_pvip":true,"replies":[{"id":120908,"content":"æˆ‘è‡ªå·±çš„å­¦ä¹ ä¹‹è·¯ï¼Œæˆ‘è¿˜çœŸæ²¡æœ‰â€œè®¤çœŸâ€æ€»ç»“è¿‡ã€‚æ‰‹åŠ¨å…æ‚²:)ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1642412280,"ip_address":"","comment_id":330938,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"å¼ºçƒˆè¯·æ±‚ç™½è€å¸ˆåšä¸€æ¬¡åŠ é¤ï¼šè®²ä¸€è®²è‡ªå·±çš„Goè¯­è¨€å­¦ä¹ ä¹‹è·¯ï¼Œä»¥åŠè‡ªå·±æ€ä¹ˆåšåˆ°å†™å‡ºæ¥çš„æ–‡ç« å³é€šä¿—æ˜“æ‡‚åˆè¶³å¤Ÿæ·±å…¥çš„ğŸ‘è¿™ç§èƒ½åŠ›èƒ½å­¦ä¹ ä¸ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":594840,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1669461912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"è¾½å®","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":374345,"user_name":"Geek_73c432","can_delete":false,"product_type":"c1","uid":2869118,"ip_address":"å¹¿ä¸œ","ucode":"3E11EB02B14DE0","user_header":"","comment_is_top":false,"comment_ctime":1683968450,"is_pvip":false,"replies":[{"id":136698,"content":"Goç¼–è¯‘å™¨ä¼šå¯¹å„ä¸ªå˜é‡åšé€ƒé€¸åˆ†æ(escape analysis)ï¼Œå¯¹äºé€ƒé€¸çš„å˜é‡ï¼Œgoç¼–è¯‘å™¨ä¼šå°†å…¶åˆ†é…åœ¨heapä¸Šï¼Œè¿™æ ·return çš„påœ¨å‡½æ•°NewErrorå¤–é¢ä½¿ç”¨ä¹Ÿæ˜¯å®‰å…¨æœ‰æ•ˆçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1684120521,"ip_address":"åŒ—äº¬","comment_id":374345,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"type MyError struct {\n\terr error\n}\n\nfunc (e MyError) Error() string {\n\treturn &quot;fatal error&quot;\n}\n\nfunc NewError(e error) *MyError {\n\tvar p *MyError\n\tp = &amp;MyError{err: e}\n\treturn p\n}\n\nåœ¨åˆ›å»ºè€…æ¨¡å¼ä¸­ï¼Œæˆ‘çœ‹åˆ°åˆ›å»ºå‡½æ•°çš„æƒ¯ä¾‹æ˜¯è¿”å›ç»“æ„çš„æŒ‡é’ˆï¼Œä¾‹å¦‚å˜é‡ pï¼Œä½†æ˜¯å‡½æ•°è°ƒç”¨åå˜é‡ p æ‰€åœ¨çš„æ ˆå¸§å·²ç»è¢«å›æ”¶äº†å•Šï¼Œé‚£å¤–éƒ¨çš„æŒ‡é’ˆ q := NewError(e) æŒ‡å‘çš„åœ°å€ä¸æ˜¯æ— æ•ˆäº†ä¹ˆï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546745,"discussion_content":"æˆ‘è‡ªå·±çš„å­¦ä¹ ä¹‹è·¯ï¼Œæˆ‘è¿˜çœŸæ²¡æœ‰â€œè®¤çœŸâ€æ€»ç»“è¿‡ã€‚æ‰‹åŠ¨å…æ‚²:)ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642412280,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":328877,"user_name":"return","can_delete":false,"product_type":"c1","uid":1135528,"ip_address":"","ucode":"42B8A3380DF04B","user_header":"https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg","comment_is_top":false,"comment_ctime":1640923103,"is_pvip":false,"replies":[{"id":120314,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1641874379,"ip_address":"","comment_id":328877,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"è€å¸ˆè®²çš„å¤ªå¥½äº†ï¼Œè™½ç„¶å®šä½æ˜¯å…¥é—¨ï¼Œ \nä½†ä¸ªäººè®¤ä¸ºï¼Œ åŸºç¡€æ‰æ˜¯æœ€æ ¸å¿ƒçš„ï¼Œ è€å¸ˆæŠŠåŸºç¡€è®²çš„å¤ªé€å½»äº†ã€‚è¿™ä¸ªä¸“æ æ¯”æŸäº›è¿›é˜¶é«˜é˜¶ä¸“æ å¥½å¤šäº†ã€‚\nè¿™ä¸€ç¯‡ åŠ æ·±äº† æˆ‘å¯¹ç»„åˆçš„ç†è§£ï¼Œ\næ„Ÿè°¢è€å¸ˆç”¨å¿ƒçš„è¾“å‡ºã€‚\nå¥½é¥­ä¸æ€•æ™šï¼Œ è€å¿ƒç­‰ç­‰è€å¸ˆåç»­çš„ é«˜è´¨é‡çŸ¥è¯†ï¼Œ å¤§å®¶åˆ«å‚¬ï¼Œå“è´¨ç¬¬ä¸€ã€‚","like_count":33,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545205,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641874379,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":334939,"user_name":"Geek_2337af","can_delete":false,"product_type":"c1","uid":2847330,"ip_address":"","ucode":"54B135EB7E70F1","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep7c7UKsjRiclaAqD9vMHSUXayzrvRhvic3Lm6ibX82L3DibJnCCtDmB3OfxbuVjetpT6Qa8IuwqZCWlw/132","comment_is_top":false,"comment_ctime":1645192308,"is_pvip":false,"replies":[{"id":122603,"content":"å¥½é—®é¢˜ï¼ğŸ‘\n\n1. goè§„èŒƒä¸­è¯´ï¼š åªæœ‰å¯å¯»å€çš„(addressable)çš„å˜é‡åœ¨è°ƒç”¨*Tä½œä¸ºreceiverå‚æ•°ç±»å‹çš„æ–¹æ³•æ—¶ï¼ŒGoæ‰ä¼šæ–½å±•â€œè¯­æ³•ç³–â€ï¼Œå–å…¶åœ°å€å†è°ƒç”¨å¯¹åº”çš„æ–¹æ³•ã€‚å…³äºaddressableè¿™ä¸ªæ¦‚å¿µæ¯”è¾ƒå¤æ‚ï¼Œåœ¨ä¸“æ é‡Œä¸ä¾¿å±•å¼€ï¼Œå°±æ²¡æœ‰æã€‚var _ = IntSet{}.String() ä¸­çš„IntSet()æ˜¯ä¸€ä¸ªä¸­é—´å€¼ï¼Œæ˜¯ä¸å¯è·å¾—å…¶åœ°å€çš„ï¼Œå› æ­¤ä¸èƒ½è¢«è‡ªåŠ¨è½¬æ¢ï¼Œå› æ­¤ç¼–è¯‘å™¨æŠ¥é”™ã€‚\n2. è°ƒç”¨æ–¹æ³•çš„ä¹ æƒ¯æ²¡æœ‰æ ‡å‡†ğŸ˜","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":1026224,"ctime":1645603933,"ip_address":"","comment_id":334939,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"åœ¨å­¦ä¹ ä¸Šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œè¯·è€å¸ˆè§£ç­”ï¼š\nIntSetç±»å‹çš„Stringæ–¹æ³•çš„æ¥æ”¶è€…æ˜¯ä¸€ä¸ªæŒ‡é’ˆç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½åœ¨ä¸€ä¸ªä¸èƒ½å¯»å€çš„IntSetå€¼ä¸Šè°ƒç”¨è¿™ä¸ªæ–¹æ³•\ntype IntSet struct { &#47;* ... *&#47; }\nfunc (*IntSet) String() string\nvar _ = IntSet{}.String() &#47;&#47; compile error: String requires *IntSet receiver\nä½†æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªIntSetå€¼ä¸Šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼š\nvar s IntSet\nvar _ = s.String() &#47;&#47; OK: s is a variable and &amp;s has a String method\n1.æ€ä¹ˆç†è§£è¿™ä¸ªä¸èƒ½å¯»å€çš„IntSetå€¼\n2.è°ƒç”¨æ–¹æ³•çš„ä¹ æƒ¯æ˜¯ç›´æ¥ä½¿ç”¨ç»“æ„ä½“å˜é‡ï¼ˆvar i InSetï¼‰ï¼Œè¿˜æ˜¯j := InSet{},å‡è®¾æ–¹æ³•ä¸­ä¸éœ€è¦ä½¿ç”¨åˆ°è¿™ä¸ªå®ä¾‹","like_count":11,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552815,"discussion_content":"å¥½é—®é¢˜ï¼ğŸ‘\n\n1. goè§„èŒƒä¸­è¯´ï¼š åªæœ‰å¯å¯»å€çš„(addressable)çš„å˜é‡åœ¨è°ƒç”¨*Tä½œä¸ºreceiverå‚æ•°ç±»å‹çš„æ–¹æ³•æ—¶ï¼ŒGoæ‰ä¼šæ–½å±•â€œè¯­æ³•ç³–â€ï¼Œå–å…¶åœ°å€å†è°ƒç”¨å¯¹åº”çš„æ–¹æ³•ã€‚å…³äºaddressableè¿™ä¸ªæ¦‚å¿µæ¯”è¾ƒå¤æ‚ï¼Œåœ¨ä¸“æ é‡Œä¸ä¾¿å±•å¼€ï¼Œå°±æ²¡æœ‰æã€‚var _ = IntSet{}.String() ä¸­çš„IntSet()æ˜¯ä¸€ä¸ªä¸­é—´å€¼ï¼Œæ˜¯ä¸å¯è·å¾—å…¶åœ°å€çš„ï¼Œå› æ­¤ä¸èƒ½è¢«è‡ªåŠ¨è½¬æ¢ï¼Œå› æ­¤ç¼–è¯‘å™¨æŠ¥é”™ã€‚\n2. è°ƒç”¨æ–¹æ³•çš„ä¹ æƒ¯æ²¡æœ‰æ ‡å‡†ğŸ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645603934,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1590695,"avatar":"https://static001.geekbang.org/account/avatar/00/18/45/a7/da9b2d2b.jpg","nickname":"ç™¾ç‚¼é’¢","note":"","ucode":"71A20C3C0B2978","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":607962,"discussion_content":"æŠŠ `func (*IntSet) String() string` æ”¹ä¸º `func (IntSet) String() string` ä¸Šé¢çš„è°ƒç”¨ `var _ = IntSet{}.String()` å°±ä¸æŠ¥é”™äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678198115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":330941,"user_name":"æ–‡ç»","can_delete":false,"product_type":"c1","uid":1072346,"ip_address":"","ucode":"2C059BD2A4276B","user_header":"https://static001.geekbang.org/account/avatar/00/10/5c/da/0a8bc27b.jpg","comment_is_top":false,"comment_ctime":1642317525,"is_pvip":true,"replies":[{"id":120977,"content":"ä½ çš„ç†è§£æ²¡é”™ï¼è¿™ä¸ªåœ¨ä¸“æ å‰é¢çš„è¯¾ç¨‹ä¸­ä¹Ÿè®²è¿‡ï¼Œè¿™é‡Œå°±æ˜¯ä¸€ä¸ªç±»å‹è½¬æ¢ã€‚é€šè¿‡ç±»å‹è½¬æ¢ï¼ŒHandlerFuncå¯ä»¥è®©ä¸€ä¸ªæ™®é€šå‡½æ•°æˆä¸ºå®ç°ServeHTTPæ–¹æ³•çš„å¯¹è±¡ï¼Œä»è€Œæ»¡è¶³http.Handleræ¥å£ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":1026224,"ctime":1642458609,"ip_address":"","comment_id":330941,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"ç™½è€å¸ˆï¼Œè¿™æ®µä»£ç æˆ‘æœ‰ç‚¹ç–‘é—®ï¼š\ntype HandlerFunc func(ResponseWriter, *Request) \nè¿™é‡Œæ˜¯å®šä¹‰äº†HandlerFuncç±»å‹\nhttp.HandlerFunc(greetings)\nåœ¨è¿™é‡Œæ˜¯ä¸æ˜¯å¯¹greetingsåšäº†ç±»å‹è½¬æ¢ï¼Ÿåƒæ˜¯int64(123)ã€‚æˆ‘æŠŠè¿™ä¸ªè·Ÿå¯¹è±¡çš„åˆå§‹åŒ–æœ‰ç‚¹æ··æ·†ï¼Œè§‰å¾—è¦æœ‰ä¸ªå­—æ®µæ¥å­˜å‚¨greetingsçš„å€¼ã€‚","like_count":8,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546895,"discussion_content":"ä½ çš„ç†è§£æ²¡é”™ï¼è¿™ä¸ªåœ¨ä¸“æ å‰é¢çš„è¯¾ç¨‹ä¸­ä¹Ÿè®²è¿‡ï¼Œè¿™é‡Œå°±æ˜¯ä¸€ä¸ªç±»å‹è½¬æ¢ã€‚é€šè¿‡ç±»å‹è½¬æ¢ï¼ŒHandlerFuncå¯ä»¥è®©ä¸€ä¸ªæ™®é€šå‡½æ•°æˆä¸ºå®ç°ServeHTTPæ–¹æ³•çš„å¯¹è±¡ï¼Œä»è€Œæ»¡è¶³http.Handleræ¥å£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642458609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2082894,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL4XcqiaZHCzSblOSzf71k7VoCSRB6E7nwlv1LDPaDOxILueiccibRw3At6l5Xfxf2ibTP7o3yy6Geajg/132","nickname":"chubaibai","note":"","ucode":"4B23AE050DC85E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":592531,"discussion_content":"javaç¨‹åºå‘˜å­¦ä¹ goï¼Œå‰é¢ç« èŠ‚å‡ºç°è¿™æ®µhttp.HandlerFunc(greetings)æ—¶å°±å®Œå…¨æ‡µé€¼æ²¡æ‡‚ï¼ŒçŸ³åŒ–äº†ï¼Œä»Šå¤©åˆçŸ³åŒ–ä¸€éã€‚\næ­£æ–‡é‡Œä½œè€…è®²è¿‡funcçš„ç±»å‹è½¬æ¢ä¹ˆï¼Œæ²¡å°è±¡ï¼Œæ‰€ä»¥è§‰å¾—å¤ªè·³è·ƒã€‚\nå‚è€ƒäº†å¤–éƒ¨ä»‹ç» https://objcoding.com/2017/12/27/Go-functions-as-values-and-types/ ï¼Œæ‰ç†è§£äº†è¿™å—ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1667467703,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":329187,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1641199390,"is_pvip":false,"replies":[{"id":120435,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1641998079,"ip_address":"","comment_id":329187,"utype":1}],"discussion_count":7,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"Go ä¸­çš„æ¥å£å®ç°çš„æ˜¯çœŸé‡Œæ°æ›¿æ¢åŸåˆ™(LSP)ï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçˆ¶ç±»å¼ºè½¬å­ç±»åä½¿ç”¨å­ç±»ç‰¹æœ‰æ–¹æ³•çš„å‡é‡Œæ°æ›¿æ¢åŸåˆ™äº†","like_count":8,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545596,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641998079,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546616,"discussion_content":"æ¥å£çš„å®ç°å¯ä»¥æœ‰è‡ªå·±ç‰¹æœ‰çš„æ–¹æ³•ï¼Œä½†åœ¨è°ˆè®ºé‡Œæ°æ›¿æ¢åŸåˆ™æ—¶ï¼Œæ¥å£çš„å®ç°åªèƒ½æš´éœ²è‡ªå·±å®ç°çš„æ¥å£æ–¹æ³•ï¼Œä¸èƒ½æš´éœ²è‡ªå·±ç‰¹æœ‰çš„æ–¹æ³•ã€‚\n\næˆ‘ä¹Ÿæ˜¯Goå°ç™½ï¼Œä¸Šé¢çš„ç•™è¨€ä¸»è¦æƒ³è¡¨è¾¾ï¼šåœ¨Goä¸­ä¸ä¼šå› ä¸ºå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œå¯¼è‡´å‡çš„é‡Œæ°æ›¿æ¢åŸåˆ™å‡ºç°ã€‚Javaä¸­ç»å¸¸å‡ºç°ä½¿ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œæ‰“ç ´é‡Œæ°æ›¿æ¢åŸåˆ™çš„ä»£ç ã€‚\nè¯¦ç»†è¯´æ˜è¯·é˜…è¯»ï¼šéƒ‘æ™”è€å¸ˆ ã€Šè½¯ä»¶è®¾è®¡ä¹‹ç¾ã€‹| 22 | Liskovæ›¿æ¢åŸåˆ™ï¼šç”¨äº†ç»§æ‰¿ï¼Œå­ç±»å°±è®¾è®¡å¯¹äº†å—ï¼Ÿhttp://gk.link/a/114tf\n\nä»¥ä¸‹æ‘˜è‡ªæ–‡ä¸­éƒ¨åˆ†å†…å®¹ï¼š\n\nLiskov æ›¿æ¢åŸåˆ™ï¼šè‹¥æ¯ä¸ªç±»å‹ S çš„å¯¹è±¡ o1ï¼Œéƒ½å­˜åœ¨ä¸€ä¸ªç±»å‹ T çš„å¯¹è±¡ o2ï¼Œä½¿å¾—åœ¨æ‰€æœ‰é’ˆå¯¹ T ç¼–ç¨‹çš„ç¨‹åº P ä¸­ï¼Œç”¨ o1 æ›¿æ¢ o2 åï¼Œç¨‹åº P è¡Œä¸ºä¿æŒä¸å˜ï¼Œåˆ™ S æ˜¯ T çš„å­ç±»å‹ã€‚\nç”¨é€šä¿—çš„è®²æ³•æ¥è¯´ï¼Œæ„æ€å°±æ˜¯ï¼Œå­ç±»å‹ï¼ˆsubtypeï¼‰å¿…é¡»èƒ½å¤Ÿæ›¿æ¢å…¶çˆ¶ç±»å‹ï¼ˆbase typeï¼‰ã€‚\nè¿™å¥è¯çœ‹ä¼¼ç®€å•ï¼Œä½†æ˜¯è¿åè¿™ä¸ªåŸåˆ™ï¼Œåæœæ˜¯å¾ˆä¸¥é‡çš„ï¼Œæ¯”å¦‚ï¼Œçˆ¶ç±»å‹è§„å®šæ¥å£ä¸èƒ½æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œå­ç±»å‹æŠ›å‡ºäº†å¼‚å¸¸ï¼Œå°±ä¼šå¯¼è‡´ç¨‹åºè¿è¡Œçš„å¤±è´¥ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1642349261,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1479120,"avatar":"https://static001.geekbang.org/account/avatar/00/16/91/d0/35bc62b1.jpg","nickname":"æ— å’","note":"","ucode":"B9759B5646F3AB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":603757,"discussion_content":"æ¥å£çš„å®ç°è€…Exportè‡ªå·±ç‰¹æœ‰çš„æ–¹æ³•ï¼Œå¯èƒ½å¯¼è‡´è¡Œä¸ºä¸ä¸€è‡´ï¼Œä»è€Œç ´åLSPã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1676272502,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1254968,"avatar":"https://static001.geekbang.org/account/avatar/00/13/26/38/ef063dc2.jpg","nickname":"Darren","note":"","ucode":"CCD2B2C492BE9A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546246,"discussion_content":"ä½œä¸ºgoå°ç™½çš„æˆ‘é—®ä¸‹å“ˆï¼Œä¸ºå•¥ä¸ä¼šï¼Œä½œä¸ºæ¥å£çš„å®ç°ï¼Œæˆ‘ä¹Ÿå¯ä»¥æœ‰è‡ªå·±ç‰¹æœ‰çš„æ–¹æ³•å‘€ï¼Œä¸ºå•¥ä¸èƒ½è°ƒç”¨è‡ªå·±ç‰¹æœ‰çš„æ–¹æ³•äº†ï¼Ÿæ¯”å¦‚å¦‚ä¸‹è¿™æ ·\n\nfunc main() {\n\tvar ti TestInterface\n\tti = Test1{}\n\n\tti.M1()\n\n\ttest1, ok := ti.(Test1)\n\tif ok {\n\t\ttest1.M2()\n\t} else {\n\t\tfmt.Println(&#34;false&#34;)\n\t}\n\n}\n\ntype TestInterface interface {\n\tM1()\n}\n\ntype Test1 struct {\n}\n\nfunc (t Test1) M1() {\n\tfmt.Println(&#34;m1&#34;)\n}\n\nfunc (t Test1) M2() {\n\tfmt.Println(&#34;m2&#34;)\n}","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642253201,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1254968,"avatar":"https://static001.geekbang.org/account/avatar/00/13/26/38/ef063dc2.jpg","nickname":"Darren","note":"","ucode":"CCD2B2C492BE9A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546875,"discussion_content":"æ˜¨å¤©çš„å›å¤æ²¡è·Ÿåœ¨ä½ ç•™è¨€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642435584,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":546246,"ip_address":"","group_id":0},"score":546875,"extra":""},{"author":{"id":1254968,"avatar":"https://static001.geekbang.org/account/avatar/00/13/26/38/ef063dc2.jpg","nickname":"Darren","note":"","ucode":"CCD2B2C492BE9A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546915,"discussion_content":"çœ‹åˆ°ç•™è¨€äº†ï¼Œè°¢è°¢å•¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642469586,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":546875,"ip_address":"","group_id":0},"score":546915,"extra":""},{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1254968,"avatar":"https://static001.geekbang.org/account/avatar/00/13/26/38/ef063dc2.jpg","nickname":"Darren","note":"","ucode":"CCD2B2C492BE9A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547048,"discussion_content":"ğŸ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642505248,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":546915,"ip_address":"","group_id":0},"score":547048,"extra":""}]}]},{"had_liked":false,"id":353565,"user_name":"SuperSu","can_delete":false,"product_type":"c1","uid":1068326,"ip_address":"è¾½å®","ucode":"A3F7AF23D193AF","user_header":"https://static001.geekbang.org/account/avatar/00/10/4d/26/44095eba.jpg","comment_is_top":false,"comment_ctime":1659575081,"is_pvip":false,"replies":[{"id":128658,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1659914668,"ip_address":"è¾½å®","comment_id":353565,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"å…ˆç”Ÿå¾ªå¾ªå–„è¯±ï¼Œçœ‹çš„å­¦ç”Ÿç›´å‘¼è¿‡ç˜¾","like_count":4,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583072,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659914668,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"è¾½å®","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3794407,"avatar":"","nickname":"Geek_3d0fe8","note":"","ucode":"E75EACDA00E7A6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":638868,"discussion_content":"æ‹é©¬å±è¿˜æ˜¯ä½ å‰å®³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1710049532,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332252,"user_name":"å¤šé€‰å‚æ•°","can_delete":false,"product_type":"c1","uid":1248326,"ip_address":"","ucode":"B2294D80AB075F","user_header":"https://static001.geekbang.org/account/avatar/00/13/0c/46/dfe32cf4.jpg","comment_is_top":false,"comment_ctime":1643112676,"is_pvip":false,"replies":[{"id":121505,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1643361406,"ip_address":"","comment_id":332252,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"ç‰¹åˆ«å–œæ¬¢ç™½è€å¸ˆè®² Goï¼Œè¿™ä¸ªä¸“æ è™½ç„¶è¯´æ˜¯ Go ç¬¬ä¸€è¯¾ï¼Œä½†æ˜¯æ„Ÿè§‰è¿™å†…å®¹å·²ç»ä¸æ˜¯åŸºç¡€çš„å†…å®¹ï¼Œè€Œæ˜¯ä½œä¸ºæ·±åº¦å…¥é—¨ Go çš„è¯¾äº†ã€‚å¦å¤–ï¼Œæ•´ç¯‡ä¸“æ ä¸­ï¼Œè€å¸ˆå§‹ç»ˆåœ¨ä¸æ–­ç»™æˆ‘è®² Go çš„æ€æƒ³ï¼Œè¿™ç‚¹çœŸçš„è¶… niceã€‚åŸæœ¬æˆ‘è§‰å¾—ç”¨ä¸€é—¨è¦ç”¨å®ƒç‰¹æœ‰çš„ä¸œè¥¿ï¼Œæ¯”å¦‚ Go çš„å¹¶å‘ï¼Œè€Œç™½è€å¸ˆè®©æˆ‘æ›´æ·±å…¥å»ç†è§£ Go çš„æ€æƒ³ï¼Œè¿™æ‰æ˜¯æ´»ç”¨ä¸€é—¨è¯­è¨€çš„æ ·å­ã€‚","like_count":4,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548772,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643361406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":329522,"user_name":"Calvin","can_delete":false,"product_type":"c1","uid":1603004,"ip_address":"","ucode":"0EEF5B207623B5","user_header":"https://static001.geekbang.org/account/avatar/00/18/75/bc/89d88775.jpg","comment_is_top":false,"comment_ctime":1641387495,"is_pvip":false,"replies":[{"id":120469,"content":"ä½ è¯´çš„æ²¡é”™ã€‚ä¸­é—´ä»¶(middleware)è¿™ä¸ªè¯çš„å…·ä½“å«ä¹‰è¦ç»“åˆå…·ä½“ä¸Šä¸‹æ–‡æ¥çœ‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1642039136,"ip_address":"","comment_id":329522,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"Gopher è¿™é‡Œè¯´çš„â€œä¸­é—´ä»¶â€å’Œ PHPer çš„â€œä¸­é—´ä»¶â€æ¦‚å¿µæ˜¯ä¸æ˜¯æœ‰ç‚¹åƒï¼Ÿ\nä½†æ˜¯è²Œä¼¼è·Ÿ Javaer çš„â€œä¸­é—´ä»¶â€æ¦‚å¿µä¸å¤ªä¸€æ ·ï¼šJavaer çš„â€œä¸­é—´ä»¶â€æ˜¯ç±»ä¼¼ kafkaã€zookeeper ç­‰ä¹‹ç±»çš„è½¯ä»¶é¡¹ç›®ï¼Œè€Œ Gopher çš„â€œä¸­é—´ä»¶â€æ„Ÿè§‰æ›´åƒæ˜¯ Javaer ä¸­çš„â€œè¿‡æ»¤å™¨â€ã€â€œæ‹¦æˆªå™¨â€æ¦‚å¿µï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548772,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643361406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":363245,"user_name":"æ’•å½±","can_delete":false,"product_type":"c1","uid":3222094,"ip_address":"è¾½å®","ucode":"8DC169F8B8E653","user_header":"https://static001.geekbang.org/account/avatar/00/31/2a/4e/a3f53cae.jpg","comment_is_top":false,"comment_ctime":1669391581,"is_pvip":false,"replies":[{"id":132075,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1669461911,"ip_address":"è¾½å®","comment_id":363245,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"çŠ¹å¦‚çœ‹ç²¾å½©è¿›çƒé›†é”¦ï¼Œå¤©çŸ¥é“è€å¸ˆåœ¨ä¹‹å‰å€’äº†å¤šå°‘è„šï¼Œæµäº†å¤šå°‘æ±—","like_count":3,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545677,"discussion_content":"ä½ è¯´çš„æ²¡é”™ã€‚ä¸­é—´ä»¶(middleware)è¿™ä¸ªè¯çš„å…·ä½“å«ä¹‰è¦ç»“åˆå…·ä½“ä¸Šä¸‹æ–‡æ¥çœ‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642039136,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":330938,"user_name":"æ–‡ç»","can_delete":false,"product_type":"c1","uid":1072346,"ip_address":"","ucode":"2C059BD2A4276B","user_header":"https://static001.geekbang.org/account/avatar/00/10/5c/da/0a8bc27b.jpg","comment_is_top":false,"comment_ctime":1642316738,"is_pvip":true,"replies":[{"id":120908,"content":"æˆ‘è‡ªå·±çš„å­¦ä¹ ä¹‹è·¯ï¼Œæˆ‘è¿˜çœŸæ²¡æœ‰â€œè®¤çœŸâ€æ€»ç»“è¿‡ã€‚æ‰‹åŠ¨å…æ‚²:)ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1642412280,"ip_address":"","comment_id":330938,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"å¼ºçƒˆè¯·æ±‚ç™½è€å¸ˆåšä¸€æ¬¡åŠ é¤ï¼šè®²ä¸€è®²è‡ªå·±çš„Goè¯­è¨€å­¦ä¹ ä¹‹è·¯ï¼Œä»¥åŠè‡ªå·±æ€ä¹ˆåšåˆ°å†™å‡ºæ¥çš„æ–‡ç« å³é€šä¿—æ˜“æ‡‚åˆè¶³å¤Ÿæ·±å…¥çš„ğŸ‘è¿™ç§èƒ½åŠ›èƒ½å­¦ä¹ ä¸ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546745,"discussion_content":"æˆ‘è‡ªå·±çš„å­¦ä¹ ä¹‹è·¯ï¼Œæˆ‘è¿˜çœŸæ²¡æœ‰â€œè®¤çœŸâ€æ€»ç»“è¿‡ã€‚æ‰‹åŠ¨å…æ‚²:)ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642412280,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":374345,"user_name":"Geek_73c432","can_delete":false,"product_type":"c1","uid":2869118,"ip_address":"å¹¿ä¸œ","ucode":"3E11EB02B14DE0","user_header":"","comment_is_top":false,"comment_ctime":1683968450,"is_pvip":false,"replies":[{"id":136698,"content":"Goç¼–è¯‘å™¨ä¼šå¯¹å„ä¸ªå˜é‡åšé€ƒé€¸åˆ†æ(escape analysis)ï¼Œå¯¹äºé€ƒé€¸çš„å˜é‡ï¼Œgoç¼–è¯‘å™¨ä¼šå°†å…¶åˆ†é…åœ¨heapä¸Šï¼Œè¿™æ ·return çš„påœ¨å‡½æ•°NewErrorå¤–é¢ä½¿ç”¨ä¹Ÿæ˜¯å®‰å…¨æœ‰æ•ˆçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1684120521,"ip_address":"åŒ—äº¬","comment_id":374345,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"type MyError struct {\n\terr error\n}\n\nfunc (e MyError) Error() string {\n\treturn &quot;fatal error&quot;\n}\n\nfunc NewError(e error) *MyError {\n\tvar p *MyError\n\tp = &amp;MyError{err: e}\n\treturn p\n}\n\nåœ¨åˆ›å»ºè€…æ¨¡å¼ä¸­ï¼Œæˆ‘çœ‹åˆ°åˆ›å»ºå‡½æ•°çš„æƒ¯ä¾‹æ˜¯è¿”å›ç»“æ„çš„æŒ‡é’ˆï¼Œä¾‹å¦‚å˜é‡ pï¼Œä½†æ˜¯å‡½æ•°è°ƒç”¨åå˜é‡ p æ‰€åœ¨çš„æ ˆå¸§å·²ç»è¢«å›æ”¶äº†å•Šï¼Œé‚£å¤–éƒ¨çš„æŒ‡é’ˆ q := NewError(e) æŒ‡å‘çš„åœ°å€ä¸æ˜¯æ— æ•ˆäº†ä¹ˆï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":618114,"discussion_content":"Goç¼–è¯‘å™¨ä¼šå¯¹å„ä¸ªå˜é‡åšé€ƒé€¸åˆ†æ(escape analysis)ï¼Œå¯¹äºé€ƒé€¸çš„å˜é‡ï¼Œgoç¼–è¯‘å™¨ä¼šå°†å…¶åˆ†é…åœ¨heapä¸Šï¼Œè¿™æ ·return çš„påœ¨å‡½æ•°NewErrorå¤–é¢ä½¿ç”¨ä¹Ÿæ˜¯å®‰å…¨æœ‰æ•ˆçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684120521,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360729,"user_name":"X","can_delete":false,"product_type":"c1","uid":1760295,"ip_address":"åŒ—äº¬","ucode":"0B0FA86372A621","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKEDxLO0wLibic5WkVl1x7TIL0fsxX1zl2GbRjutYQ89fGRrv2VKJtNmmJb32iarbcHROlmW8SOQsHag/132","comment_is_top":false,"comment_ctime":1666785780,"is_pvip":true,"replies":[{"id":131279,"content":"è°¬èµäº†ğŸ˜","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1666934622,"ip_address":"åŒ—äº¬","comment_id":360729,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"ç›®å‰çœ‹è¿‡goçš„èµ„æ–™ä¸­æœ€å¥½æ»´ï¼Œæ²¡æœ‰ä¹‹ä¸€ï¼Œä¸æ¥æ”¶è´¨ç–‘ï¼Œä¸æ¥å—åé©³ï¼","like_count":2},{"had_liked":false,"id":338828,"user_name":"pyhhou","can_delete":false,"product_type":"c1","uid":1256496,"ip_address":"","ucode":"31EF8D50CF91A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","comment_is_top":false,"comment_ctime":1647755284,"is_pvip":false,"replies":[{"id":123867,"content":"âœ…","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1647826859,"ip_address":"","comment_id":338828,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"å°è¯•ç€å»ç†è§£ logHandler(authHandler(http.HandlerFunc(greetings)))() çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œåƒæ˜¯ logHandler ä»¥åŠ authHandler è¿™ç§ä¸­é—´ä»¶å‡½æ•°éƒ½ä¼šè¿”å›ä¸€ä¸ªé—­åŒ…å‡½æ•°ï¼Œåœ¨é—­åŒ…å‡½æ•°ä¸­å®ƒä»¬é€šè¿‡ h.ServeHTTP(w, r) ä¸ä¸‹ä¸€å±‚çš„ï¼ˆä¼ å…¥çš„ï¼‰å‡½æ•°è¿›è¡Œé“¾æ¥\n\nServeHTTP è®¾è®¡çš„æŒºå·§å¦™çš„ï¼Œä»…ä»…çœ‹è¿™ä¸ªå‡½æ•°çš„å®šä¹‰å¹¶ä¸å¤ªç†è§£ï¼Œçœ‹äº†ä¾‹å­åæ‰æ˜ç™½å…¶ç”¨æ„\n\nä¸çŸ¥é“æˆ‘ç†è§£çš„å¯¹ä¸å¯¹ï¼Œæˆ–è€…å“ªé‡Œæœ‰é—æ¼ï¼Œè¿˜æœ›è€å¸ˆæŒ‡æ•™ ğŸ™","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591920,"discussion_content":"è°¬èµäº†ğŸ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666934622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":337696,"user_name":"ivhong","can_delete":false,"product_type":"c1","uid":2659871,"ip_address":"","ucode":"9947B228807AC9","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ8ic8eLTo5rnqIMJicUfpkVBrOUJAW4fANicKIbHdC54O9SOdwSoeK6o8icibaUbh7ZUXAkGF9zwHqo0Q/132","comment_is_top":false,"comment_ctime":1646980480,"is_pvip":false,"replies":[{"id":123516,"content":"åŒ…è£…å™¨æ˜¯å®ç°â€œmiddlewareâ€çš„åŸºç¡€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1647089405,"ip_address":"","comment_id":337696,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"åŒ…è£…å™¨çš„æ¦‚å¿µæ˜¯ä¸æ˜¯ä¹Ÿæœ‰ç‚¹â€œä¸­é—´ä»¶â€çš„æ„æ€ ï¼šï¼‰\næ¯”å¦‚capitalizedReaderä¸­çš„ï¼Œæ˜¯åç½®ä¸­é—´ä»¶ï¼Œå¤„ç†è¾“å‡ºçš„ï¼Œå¦‚æœæ”¹æˆä¸‹é¢çš„å®ç°ï¼Œå°±æ˜¯å‰ç½®ä¸­é—´ä»¶ï¼Œåœ¨è¾“å…¥å‰å¤„ç†çš„ã€‚\nfunc (r *capitalizedReader) Read(p []byte) (int, error) {\n\t&#47;&#47;do some thing\n\tn, err := r.r.Read(p)\n\treturn n, err\n}","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557454,"discussion_content":"âœ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647826859,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1252173,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1b/4d/2cc44d9a.jpg","nickname":"åˆ˜å¿½æ‚ ","note":"","ucode":"095DE3A8D3F450","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586544,"discussion_content":"è¿™é‡Œè°ƒh.ServeHTTPå…¶å®å°±æ˜¯è°ƒä¸‹ä¸€å±‚çš„å‡½æ•°ï¼Œåªæ˜¯é€šè¿‡æ¥å£çš„æ–¹å¼ï¼Œè¿™ä¸ªå‚è€ƒHandlerFuncå®šä¹‰é‡Œé¢ServeHTTPçš„å®ç°ï¼Œè¿™é‡Œå¤„ç†çš„å¾ˆå·§å¦™ï¼Œæœ‰ç‚¹cè¯­è¨€å›è°ƒå‡½æ•°ä¼ è‡ªå·±ç»“æ„ä½“æŒ‡é’ˆçš„å‘³å„¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662319569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":362450,"user_name":"ğŸ—£","can_delete":false,"product_type":"c1","uid":2930077,"ip_address":"åŒ—äº¬","ucode":"28D0DDC9BABE54","user_header":"https://static001.geekbang.org/account/avatar/00/2c/b5/9d/6010e455.jpg","comment_is_top":false,"comment_ctime":1668525855,"is_pvip":false,"replies":[{"id":131836,"content":"io.Copyå®ç°ä¸­ä¼šè°ƒç”¨ä¼ å…¥çš„å‚æ•°(io.Readerçš„å®ç°)çš„Readæ–¹æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1668587514,"ip_address":"åŒ—äº¬","comment_id":362450,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"ç™½è€å¸ˆï¼Œæœ‰ä¸ªå°å°çš„ç–‘é—®\nè¯·é—®ä¸‹åŒ…è£…å™¨æ¨¡å¼ä¸­çš„ä»£ç ä¸­çš„ Readå‡½æ•°åœ¨ä»€ä¹ˆæ—¶å€™è¢«è°ƒç”¨çš„\n","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593854,"discussion_content":"io.Copyå®ç°ä¸­ä¼šè°ƒç”¨ä¼ å…¥çš„å‚æ•°(io.Readerçš„å®ç°)çš„Readæ–¹æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668587514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359924,"user_name":"Geek_1d2661","can_delete":false,"product_type":"c1","uid":3186090,"ip_address":"åŒ—äº¬","ucode":"CC02863D939FEC","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoGLuQGiaBftJglfdCicBnCWw8tZKkbEJoU3lpgI10mAzaYgS0QLicG02GMH9zSzFD2KFQ0SHc6PuMUA/132","comment_is_top":false,"comment_ctime":1666064971,"is_pvip":false,"replies":[{"id":130950,"content":"io.Copyä¼šè°ƒç”¨Readerçš„Readæ–¹æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1666175230,"ip_address":"åŒ—äº¬","comment_id":359924,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"æˆ‘æœ‰ä¸ªå°ç–‘é—®å°±æ˜¯åŒ…è£…å™¨è¿™é‡Œï¼šæ–°å®šä¹‰çš„ç»“æ„ä½“capitalizedReadeå†™äº†Readçš„æ–¹æ³•ç”¨äºå˜æˆå¤§å†™ï¼Œä½†æ˜¯åœ¨ä¸»å‡½æ•°mainé‡Œé¢æ²¡çœ‹è§æ˜¾å¼è°ƒç”¨.Readæ–¹æ³•å•Š","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593854,"discussion_content":"io.Copyå®ç°ä¸­ä¼šè°ƒç”¨ä¼ å…¥çš„å‚æ•°(io.Readerçš„å®ç°)çš„Readæ–¹æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668587514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359181,"user_name":"Geek_5e294c","can_delete":false,"product_type":"c1","uid":2658412,"ip_address":"è¾½å®","ucode":"E3B53893EBB2D4","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/pFZlQIFFHQ0E4SNCWPdgrQO19Dg1GPIsFibQzwpicF64rEOL2PoUwGMXrZQ70raDHdEicIDauiaeVKLBbze2NCABibg/132","comment_is_top":false,"comment_ctime":1665307541,"is_pvip":false,"replies":[{"id":130661,"content":"é€šå¸¸ä¸å®šé¡¹çš„æ•°æ®æ˜¯é€šè¿‡bodyä¼ è¿‡æ¥çš„ï¼Œä¸€èˆ¬æ•°æ®å¤šä»¥ç‰¹å®šç¼–ç å½¢å¼æ”¾åœ¨bodyä¸­ï¼Œæ¯”å¦‚jsonã€‚ä½ è¦åšçš„å°±æ˜¯å°†è¿™äº›æ•°æ®unmarshalåˆ°ä¸€ä¸ªç»“æ„ä¸­ï¼Œå¾ˆå¤šWebæ¡†æ¶ç”¨ï¼šmap[string]interface{}æ¥ä½œä¸ºå†…å­˜ä¸­æ‰¿è½½æ•°æ®çš„ç»“æ„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1665380540,"ip_address":"è¾½å®","comment_id":359181,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"è€å¸ˆæ‚¨å¥½ æˆ‘è¿™é‡Œæƒ³åˆ°ä¸€ç§åœºæ™¯ å½“å‰ç«¯å‘é€æ¥çš„æ•°æ®ä¸ºä¸å®šé¡¹çš„æ—¶å€™ æ¥å£åº”è¯¥å¦‚ä½•è®¾è®¡ï¼Ÿ å…¥å‚æ˜¯è®¾è®¡ä¸º...interface ç„¶åå¤„ç†è¿˜æ˜¯ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590934,"discussion_content":"io.Copyä¼šè°ƒç”¨Readerçš„Readæ–¹æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666175231,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352419,"user_name":"kwaiå","can_delete":false,"product_type":"c1","uid":2622485,"ip_address":"","ucode":"24FE0E54F47CB5","user_header":"https://static001.geekbang.org/account/avatar/00/28/04/15/841ab52b.jpg","comment_is_top":false,"comment_ctime":1658653177,"is_pvip":false,"replies":[{"id":128193,"content":"å¯¹saveè¿›è¡Œæµ‹è¯•ï¼Œé€šå¸¸éœ€è¦ä¿å­˜åˆ°æ–‡ä»¶æˆ–ç½‘ç»œå­˜å‚¨ä¸­ã€‚ä½†ç”±äºé‡‡ç”¨äº†io.Writerç±»å‹å‚æ•°å¯¹å†™å…¥ç›®æ ‡è¿›è¡Œäº†æŠ½è±¡ï¼Œæˆ‘ä»¬å°†saveåŠ¨ä½œä¸å®é™…ç›®æ ‡å­åšäº†è§£è€¦åˆã€‚å› æ­¤åœ¨è¿™ä¸ªæµ‹è¯•ä¸­æˆ‘ä»¬æ— éœ€çœŸæ­£åˆ›å»ºä»»ä½•ç£ç›˜æ–‡ä»¶æˆ–åŠ äº†ä½ ä»»ä½•ç½‘ç»œè¿æ¥(è¿æ¥ç½‘ç»œå­˜å‚¨)ï¼Œä»…éœ€æ„é€ äº†ä¸€ä¸ªæ»¡è¶³io.Writeræ¥å£çš„å®ä¾‹å³å¯å®Œæˆå¯¹saveé€»è¾‘çš„æµ‹è¯•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1658704880,"ip_address":"","comment_id":352419,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"â€œåœ¨æ•´ä¸ªæµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸éœ€è¦åˆ›å»ºä»»ä½•ç£ç›˜æ–‡ä»¶æˆ–å»ºç«‹ä»»ä½•ç½‘ç»œè¿æ¥ã€‚â€è€å¸ˆè¿™ä¸€å¥æ²¡å¤ªæ˜ç™½ï¼Œå¦‚æœæœ‰ä¼ ç»“æ„ä½“çš„æµ‹è¯•caseå¯¹ç€çœ‹åº”è¯¥æ›´æ¸…æ™°ä¸€ç‚¹","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581274,"discussion_content":"å¯¹saveè¿›è¡Œæµ‹è¯•ï¼Œé€šå¸¸éœ€è¦ä¿å­˜åˆ°æ–‡ä»¶æˆ–ç½‘ç»œå­˜å‚¨ä¸­ã€‚ä½†ç”±äºé‡‡ç”¨äº†io.Writerç±»å‹å‚æ•°å¯¹å†™å…¥ç›®æ ‡è¿›è¡Œäº†æŠ½è±¡ï¼Œæˆ‘ä»¬å°†saveåŠ¨ä½œä¸å®é™…ç›®æ ‡å­åšäº†è§£è€¦åˆã€‚å› æ­¤åœ¨è¿™ä¸ªæµ‹è¯•ä¸­æˆ‘ä»¬æ— éœ€çœŸæ­£åˆ›å»ºä»»ä½•ç£ç›˜æ–‡ä»¶æˆ–åŠ äº†ä½ ä»»ä½•ç½‘ç»œè¿æ¥(è¿æ¥ç½‘ç»œå­˜å‚¨)ï¼Œä»…éœ€æ„é€ äº†ä¸€ä¸ªæ»¡è¶³io.Writeræ¥å£çš„å®ä¾‹å³å¯å®Œæˆå¯¹saveé€»è¾‘çš„æµ‹è¯•ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1658704880,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350928,"user_name":"Demon.Lee","can_delete":false,"product_type":"c1","uid":1052859,"ip_address":"","ucode":"7F0E5493A8E345","user_header":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","comment_is_top":false,"comment_ctime":1657355040,"is_pvip":false,"replies":[{"id":127781,"content":"è¿™æ®µä»£ç å¦‚æœéè¦ä¼ å…¥non-empty interfaceï¼Œå°±æœ‰äº›çŸ«æƒ…äº†ã€‚\n\nå½“ç„¶ä½ è¿™é‡Œä½¿ç”¨v interface{}ï¼Œå…¶å®æ˜¯å¾—ç›Šäºæ ‡å‡†åº“jsonçš„Marshalçš„å‚æ•°ç±»å‹æ˜¯interface{}ã€‚\n\nå¦‚æœä½ éè¦é™åˆ¶responseç”¨æˆ·ä¼ å…¥å‚æ•°çš„ç±»å‹ï¼Œè¿™é‡Œå°†å…¶è§†ä¸ºstrictæ¨¡å¼ï¼Œé‚£ä¹ˆ\n\né‚£ä¹ˆç¬¬äºŒä¸ªå‚æ•°æ˜¯å¦å¯ä»¥æ”¹ä¸ºv json.Marshalerï¼Œè¿™æ ·å¯¹ä¼ å…¥çš„å‚æ•°åšäº†strictçº¦æŸã€‚å½“ç„¶è¿™ç§æ”¹æ³•å¯¹ä½¿ç”¨è€…æ¥è¯´ï¼Œä½“éªŒä¸\n  å¥½ã€‚å°¤å…¶æ˜¯ä¼ å…¥åŸç”Ÿç±»å‹å®ä¾‹æ—¶ï¼Œæ¯”å¦‚intã€‚\n  \n  å½“ç„¶æ³›å‹å¼•å…¥åï¼Œå¯ä»¥ç”¨æ³›å‹çº¦æŸæ¥ä¿®é¥°å‚æ•°vã€‚å°†å…è®¸ä¼ å…¥çš„ç±»å‹æ”¾å…¥çº¦æŸä¸­ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1657696120,"ip_address":"","comment_id":350928,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"æ„Ÿè§‰ç©ºæ¥å£è¯¥ç”¨è¿˜å¾—ç”¨ï¼Œæ¯”å¦‚è¿™é‡Œçš„å‚æ•° vï¼š\n\nfunc response(w http.ResponseWriter, v interface{}) {\n\tdata, err := json.Marshal(v)\n\tif err != nil {\n\t\thttp.Error(w, err.Error(), http.StatusInternalServerError)\n\t\treturn\n\t}\n\tw.Header().Set(&quot;Content-Type&quot;, &quot;application&#47;json&quot;)\n\tw.Write(data)\n}\n\nç°åœ¨ go1.18 æœ‰äº†èŒƒå‹ï¼Œä½†è¿™é‡Œå¥½åƒè¿˜å¾—è¿™ä¹ˆä¼ å‚æ•° vï¼Œå› ä¸ºå®ƒå¯èƒ½æ˜¯å„ç§ç»“æ„ä½“ç±»å‹ï¼Œè€å¸ˆæœ‰æ›´å¥½çš„æ–¹æ¡ˆå—ï¼Œè°¢è°¢ã€‚","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581274,"discussion_content":"å¯¹saveè¿›è¡Œæµ‹è¯•ï¼Œé€šå¸¸éœ€è¦ä¿å­˜åˆ°æ–‡ä»¶æˆ–ç½‘ç»œå­˜å‚¨ä¸­ã€‚ä½†ç”±äºé‡‡ç”¨äº†io.Writerç±»å‹å‚æ•°å¯¹å†™å…¥ç›®æ ‡è¿›è¡Œäº†æŠ½è±¡ï¼Œæˆ‘ä»¬å°†saveåŠ¨ä½œä¸å®é™…ç›®æ ‡å­åšäº†è§£è€¦åˆã€‚å› æ­¤åœ¨è¿™ä¸ªæµ‹è¯•ä¸­æˆ‘ä»¬æ— éœ€çœŸæ­£åˆ›å»ºä»»ä½•ç£ç›˜æ–‡ä»¶æˆ–åŠ äº†ä½ ä»»ä½•ç½‘ç»œè¿æ¥(è¿æ¥ç½‘ç»œå­˜å‚¨)ï¼Œä»…éœ€æ„é€ äº†ä¸€ä¸ªæ»¡è¶³io.Writeræ¥å£çš„å®ä¾‹å³å¯å®Œæˆå¯¹saveé€»è¾‘çš„æµ‹è¯•ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1658704880,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":348237,"user_name":"ç”·å„¿åˆ°æ­»å¿ƒå¦‚é“","can_delete":false,"product_type":"c1","uid":1799844,"ip_address":"","ucode":"687A58349727A9","user_header":"https://static001.geekbang.org/account/avatar/00/1b/76/a4/964330c6.jpg","comment_is_top":false,"comment_ctime":1654855859,"is_pvip":false,"replies":[{"id":126867,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1654872353,"ip_address":"","comment_id":348237,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"æ„Ÿè°¢è€å¸ˆï¼Œå¾ˆå¤šä¸œè¥¿éƒ½æ˜¯çœ‹å®Œä¹‹åè±ç„¶å¼€æœ—","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575484,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654872353,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":335105,"user_name":"é’äº‰","can_delete":false,"product_type":"c1","uid":1657132,"ip_address":"","ucode":"D226C9DA9EF9C1","user_header":"https://static001.geekbang.org/account/avatar/00/19/49/2c/5d3679dd.jpg","comment_is_top":false,"comment_ctime":1645337301,"is_pvip":false,"replies":[{"id":122608,"content":"è¿™æ˜¯æˆ‘è¿è¡Œçš„ç»“æœã€‚ä¸åŠ authï¼Œä¼šè¿”å›bad auth param\n\n$curl localhost:8080\nbad auth param\n$curl -H &quot;auth:123456&quot; localhost:8080&#47;\nWelcome!\n\n                                                                                                 ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1645604811,"ip_address":"","comment_id":335105,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"\nfunc validateAuth(s string) error {\n    if s != &quot;123456&quot; {\n        return fmt.Errorf(&quot;%s&quot;, &quot;bad auth token&quot;)\n    }\n    return nil\n}\n\nfunc greetings(w http.ResponseWriter, r *http.Request) {\n    fmt.Fprintf(w, &quot;Welcome!&quot;)\n}\n\nfunc logHandler(h http.Handler) http.Handler {\n    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n        t := time.Now()\n        log.Printf(&quot;[%s] %q %v\\n&quot;, r.Method, r.URL.String(), t)\n        h.ServeHTTP(w, r)\n    })\n}\n\nfunc authHandler(h http.Handler) http.Handler {\n    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n        err := validateAuth(r.Header.Get(&quot;auth&quot;))\n        if err != nil {\n            http.Error(w, &quot;bad auth param&quot;, http.StatusUnauthorized)\n            return\n        }\n        h.ServeHTTP(w, r)\n    })\n\n}\n\nfunc main() {\n    http.ListenAndServe(&quot;:8080&quot;, logHandler(authHandler(http.HandlerFunc(greetings))))\n}\nç™½è€å¸ˆï¼Œè¿™æ®µä»£ç ï¼Œè¯·æ±‚çš„ä¿¡æ¯ä¸åŠ authï¼Œè¿”å›ä¿¡æ¯ä¹Ÿæ˜¯welcome!","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552821,"discussion_content":"è¿™æ˜¯æˆ‘è¿è¡Œçš„ç»“æœã€‚ä¸åŠ authï¼Œä¼šè¿”å›bad auth param\n\n$curl localhost:8080\nbad auth param\n$curl -H &#34;auth:123456&#34; localhost:8080/\nWelcome!\n\n                                                                                                 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645604811,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360729,"user_name":"X","can_delete":false,"product_type":"c1","uid":1760295,"ip_address":"åŒ—äº¬","ucode":"0B0FA86372A621","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKEDxLO0wLibic5WkVl1x7TIL0fsxX1zl2GbRjutYQ89fGRrv2VKJtNmmJb32iarbcHROlmW8SOQsHag/132","comment_is_top":false,"comment_ctime":1666785780,"is_pvip":true,"replies":[{"id":131279,"content":"è°¬èµäº†ğŸ˜","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1666934622,"ip_address":"åŒ—äº¬","comment_id":360729,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"ç›®å‰çœ‹è¿‡goçš„èµ„æ–™ä¸­æœ€å¥½æ»´ï¼Œæ²¡æœ‰ä¹‹ä¸€ï¼Œä¸æ¥æ”¶è´¨ç–‘ï¼Œä¸æ¥å—åé©³ï¼","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591920,"discussion_content":"è°¬èµäº†ğŸ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666934622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":338828,"user_name":"pyhhou","can_delete":false,"product_type":"c1","uid":1256496,"ip_address":"","ucode":"31EF8D50CF91A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","comment_is_top":false,"comment_ctime":1647755284,"is_pvip":false,"replies":[{"id":123867,"content":"âœ…","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1647826859,"ip_address":"","comment_id":338828,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"å°è¯•ç€å»ç†è§£ logHandler(authHandler(http.HandlerFunc(greetings)))() çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œåƒæ˜¯ logHandler ä»¥åŠ authHandler è¿™ç§ä¸­é—´ä»¶å‡½æ•°éƒ½ä¼šè¿”å›ä¸€ä¸ªé—­åŒ…å‡½æ•°ï¼Œåœ¨é—­åŒ…å‡½æ•°ä¸­å®ƒä»¬é€šè¿‡ h.ServeHTTP(w, r) ä¸ä¸‹ä¸€å±‚çš„ï¼ˆä¼ å…¥çš„ï¼‰å‡½æ•°è¿›è¡Œé“¾æ¥\n\nServeHTTP è®¾è®¡çš„æŒºå·§å¦™çš„ï¼Œä»…ä»…çœ‹è¿™ä¸ªå‡½æ•°çš„å®šä¹‰å¹¶ä¸å¤ªç†è§£ï¼Œçœ‹äº†ä¾‹å­åæ‰æ˜ç™½å…¶ç”¨æ„\n\nä¸çŸ¥é“æˆ‘ç†è§£çš„å¯¹ä¸å¯¹ï¼Œæˆ–è€…å“ªé‡Œæœ‰é—æ¼ï¼Œè¿˜æœ›è€å¸ˆæŒ‡æ•™ ğŸ™","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557454,"discussion_content":"âœ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647826859,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1252173,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1b/4d/2cc44d9a.jpg","nickname":"åˆ˜å¿½æ‚ ","note":"","ucode":"095DE3A8D3F450","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586544,"discussion_content":"è¿™é‡Œè°ƒh.ServeHTTPå…¶å®å°±æ˜¯è°ƒä¸‹ä¸€å±‚çš„å‡½æ•°ï¼Œåªæ˜¯é€šè¿‡æ¥å£çš„æ–¹å¼ï¼Œè¿™ä¸ªå‚è€ƒHandlerFuncå®šä¹‰é‡Œé¢ServeHTTPçš„å®ç°ï¼Œè¿™é‡Œå¤„ç†çš„å¾ˆå·§å¦™ï¼Œæœ‰ç‚¹cè¯­è¨€å›è°ƒå‡½æ•°ä¼ è‡ªå·±ç»“æ„ä½“æŒ‡é’ˆçš„å‘³å„¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662319569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":337696,"user_name":"ivhong","can_delete":false,"product_type":"c1","uid":2659871,"ip_address":"","ucode":"9947B228807AC9","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ8ic8eLTo5rnqIMJicUfpkVBrOUJAW4fANicKIbHdC54O9SOdwSoeK6o8icibaUbh7ZUXAkGF9zwHqo0Q/132","comment_is_top":false,"comment_ctime":1646980480,"is_pvip":false,"replies":[{"id":123516,"content":"åŒ…è£…å™¨æ˜¯å®ç°â€œmiddlewareâ€çš„åŸºç¡€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1647089405,"ip_address":"","comment_id":337696,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"åŒ…è£…å™¨çš„æ¦‚å¿µæ˜¯ä¸æ˜¯ä¹Ÿæœ‰ç‚¹â€œä¸­é—´ä»¶â€çš„æ„æ€ ï¼šï¼‰\næ¯”å¦‚capitalizedReaderä¸­çš„ï¼Œæ˜¯åç½®ä¸­é—´ä»¶ï¼Œå¤„ç†è¾“å‡ºçš„ï¼Œå¦‚æœæ”¹æˆä¸‹é¢çš„å®ç°ï¼Œå°±æ˜¯å‰ç½®ä¸­é—´ä»¶ï¼Œåœ¨è¾“å…¥å‰å¤„ç†çš„ã€‚\nfunc (r *capitalizedReader) Read(p []byte) (int, error) {\n\t&#47;&#47;do some thing\n\tn, err := r.r.Read(p)\n\treturn n, err\n}","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555873,"discussion_content":"åŒ…è£…å™¨æ˜¯å®ç°â€œmiddlewareâ€çš„åŸºç¡€ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1647089405,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":362450,"user_name":"ğŸ—£","can_delete":false,"product_type":"c1","uid":2930077,"ip_address":"åŒ—äº¬","ucode":"28D0DDC9BABE54","user_header":"https://static001.geekbang.org/account/avatar/00/2c/b5/9d/6010e455.jpg","comment_is_top":false,"comment_ctime":1668525855,"is_pvip":false,"replies":[{"id":131836,"content":"io.Copyå®ç°ä¸­ä¼šè°ƒç”¨ä¼ å…¥çš„å‚æ•°(io.Readerçš„å®ç°)çš„Readæ–¹æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1668587514,"ip_address":"åŒ—äº¬","comment_id":362450,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"ç™½è€å¸ˆï¼Œæœ‰ä¸ªå°å°çš„ç–‘é—®\nè¯·é—®ä¸‹åŒ…è£…å™¨æ¨¡å¼ä¸­çš„ä»£ç ä¸­çš„ Readå‡½æ•°åœ¨ä»€ä¹ˆæ—¶å€™è¢«è°ƒç”¨çš„\n","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555873,"discussion_content":"åŒ…è£…å™¨æ˜¯å®ç°â€œmiddlewareâ€çš„åŸºç¡€ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1647089405,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359924,"user_name":"Geek_1d2661","can_delete":false,"product_type":"c1","uid":3186090,"ip_address":"åŒ—äº¬","ucode":"CC02863D939FEC","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoGLuQGiaBftJglfdCicBnCWw8tZKkbEJoU3lpgI10mAzaYgS0QLicG02GMH9zSzFD2KFQ0SHc6PuMUA/132","comment_is_top":false,"comment_ctime":1666064971,"is_pvip":false,"replies":[{"id":130950,"content":"io.Copyä¼šè°ƒç”¨Readerçš„Readæ–¹æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1666175230,"ip_address":"åŒ—äº¬","comment_id":359924,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"æˆ‘æœ‰ä¸ªå°ç–‘é—®å°±æ˜¯åŒ…è£…å™¨è¿™é‡Œï¼šæ–°å®šä¹‰çš„ç»“æ„ä½“capitalizedReadeå†™äº†Readçš„æ–¹æ³•ç”¨äºå˜æˆå¤§å†™ï¼Œä½†æ˜¯åœ¨ä¸»å‡½æ•°mainé‡Œé¢æ²¡çœ‹è§æ˜¾å¼è°ƒç”¨.Readæ–¹æ³•å•Š","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590934,"discussion_content":"io.Copyä¼šè°ƒç”¨Readerçš„Readæ–¹æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666175231,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359181,"user_name":"Geek_5e294c","can_delete":false,"product_type":"c1","uid":2658412,"ip_address":"è¾½å®","ucode":"E3B53893EBB2D4","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/pFZlQIFFHQ0E4SNCWPdgrQO19Dg1GPIsFibQzwpicF64rEOL2PoUwGMXrZQ70raDHdEicIDauiaeVKLBbze2NCABibg/132","comment_is_top":false,"comment_ctime":1665307541,"is_pvip":false,"replies":[{"id":130661,"content":"é€šå¸¸ä¸å®šé¡¹çš„æ•°æ®æ˜¯é€šè¿‡bodyä¼ è¿‡æ¥çš„ï¼Œä¸€èˆ¬æ•°æ®å¤šä»¥ç‰¹å®šç¼–ç å½¢å¼æ”¾åœ¨bodyä¸­ï¼Œæ¯”å¦‚jsonã€‚ä½ è¦åšçš„å°±æ˜¯å°†è¿™äº›æ•°æ®unmarshalåˆ°ä¸€ä¸ªç»“æ„ä¸­ï¼Œå¾ˆå¤šWebæ¡†æ¶ç”¨ï¼šmap[string]interface{}æ¥ä½œä¸ºå†…å­˜ä¸­æ‰¿è½½æ•°æ®çš„ç»“æ„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1665380540,"ip_address":"è¾½å®","comment_id":359181,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"è€å¸ˆæ‚¨å¥½ æˆ‘è¿™é‡Œæƒ³åˆ°ä¸€ç§åœºæ™¯ å½“å‰ç«¯å‘é€æ¥çš„æ•°æ®ä¸ºä¸å®šé¡¹çš„æ—¶å€™ æ¥å£åº”è¯¥å¦‚ä½•è®¾è®¡ï¼Ÿ å…¥å‚æ˜¯è®¾è®¡ä¸º...interface ç„¶åå¤„ç†è¿˜æ˜¯ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589875,"discussion_content":"é€šå¸¸ä¸å®šé¡¹çš„æ•°æ®æ˜¯é€šè¿‡bodyä¼ è¿‡æ¥çš„ï¼Œä¸€èˆ¬æ•°æ®å¤šä»¥ç‰¹å®šç¼–ç å½¢å¼æ”¾åœ¨bodyä¸­ï¼Œæ¯”å¦‚jsonã€‚ä½ è¦åšçš„å°±æ˜¯å°†è¿™äº›æ•°æ®unmarshalåˆ°ä¸€ä¸ªç»“æ„ä¸­ï¼Œå¾ˆå¤šWebæ¡†æ¶ç”¨ï¼šmap[string]interface{}æ¥ä½œä¸ºå†…å­˜ä¸­æ‰¿è½½æ•°æ®çš„ç»“æ„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665380540,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"è¾½å®","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352419,"user_name":"kwaiå","can_delete":false,"product_type":"c1","uid":2622485,"ip_address":"","ucode":"24FE0E54F47CB5","user_header":"https://static001.geekbang.org/account/avatar/00/28/04/15/841ab52b.jpg","comment_is_top":false,"comment_ctime":1658653177,"is_pvip":false,"replies":[{"id":128193,"content":"å¯¹saveè¿›è¡Œæµ‹è¯•ï¼Œé€šå¸¸éœ€è¦ä¿å­˜åˆ°æ–‡ä»¶æˆ–ç½‘ç»œå­˜å‚¨ä¸­ã€‚ä½†ç”±äºé‡‡ç”¨äº†io.Writerç±»å‹å‚æ•°å¯¹å†™å…¥ç›®æ ‡è¿›è¡Œäº†æŠ½è±¡ï¼Œæˆ‘ä»¬å°†saveåŠ¨ä½œä¸å®é™…ç›®æ ‡å­åšäº†è§£è€¦åˆã€‚å› æ­¤åœ¨è¿™ä¸ªæµ‹è¯•ä¸­æˆ‘ä»¬æ— éœ€çœŸæ­£åˆ›å»ºä»»ä½•ç£ç›˜æ–‡ä»¶æˆ–åŠ äº†ä½ ä»»ä½•ç½‘ç»œè¿æ¥(è¿æ¥ç½‘ç»œå­˜å‚¨)ï¼Œä»…éœ€æ„é€ äº†ä¸€ä¸ªæ»¡è¶³io.Writeræ¥å£çš„å®ä¾‹å³å¯å®Œæˆå¯¹saveé€»è¾‘çš„æµ‹è¯•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1658704880,"ip_address":"","comment_id":352419,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"â€œåœ¨æ•´ä¸ªæµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸éœ€è¦åˆ›å»ºä»»ä½•ç£ç›˜æ–‡ä»¶æˆ–å»ºç«‹ä»»ä½•ç½‘ç»œè¿æ¥ã€‚â€è€å¸ˆè¿™ä¸€å¥æ²¡å¤ªæ˜ç™½ï¼Œå¦‚æœæœ‰ä¼ ç»“æ„ä½“çš„æµ‹è¯•caseå¯¹ç€çœ‹åº”è¯¥æ›´æ¸…æ™°ä¸€ç‚¹","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589875,"discussion_content":"é€šå¸¸ä¸å®šé¡¹çš„æ•°æ®æ˜¯é€šè¿‡bodyä¼ è¿‡æ¥çš„ï¼Œä¸€èˆ¬æ•°æ®å¤šä»¥ç‰¹å®šç¼–ç å½¢å¼æ”¾åœ¨bodyä¸­ï¼Œæ¯”å¦‚jsonã€‚ä½ è¦åšçš„å°±æ˜¯å°†è¿™äº›æ•°æ®unmarshalåˆ°ä¸€ä¸ªç»“æ„ä¸­ï¼Œå¾ˆå¤šWebæ¡†æ¶ç”¨ï¼šmap[string]interface{}æ¥ä½œä¸ºå†…å­˜ä¸­æ‰¿è½½æ•°æ®çš„ç»“æ„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665380540,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"è¾½å®","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350928,"user_name":"Demon.Lee","can_delete":false,"product_type":"c1","uid":1052859,"ip_address":"","ucode":"7F0E5493A8E345","user_header":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","comment_is_top":false,"comment_ctime":1657355040,"is_pvip":false,"replies":[{"id":127781,"content":"è¿™æ®µä»£ç å¦‚æœéè¦ä¼ å…¥non-empty interfaceï¼Œå°±æœ‰äº›çŸ«æƒ…äº†ã€‚\n\nå½“ç„¶ä½ è¿™é‡Œä½¿ç”¨v interface{}ï¼Œå…¶å®æ˜¯å¾—ç›Šäºæ ‡å‡†åº“jsonçš„Marshalçš„å‚æ•°ç±»å‹æ˜¯interface{}ã€‚\n\nå¦‚æœä½ éè¦é™åˆ¶responseç”¨æˆ·ä¼ å…¥å‚æ•°çš„ç±»å‹ï¼Œè¿™é‡Œå°†å…¶è§†ä¸ºstrictæ¨¡å¼ï¼Œé‚£ä¹ˆ\n\né‚£ä¹ˆç¬¬äºŒä¸ªå‚æ•°æ˜¯å¦å¯ä»¥æ”¹ä¸ºv json.Marshalerï¼Œè¿™æ ·å¯¹ä¼ å…¥çš„å‚æ•°åšäº†strictçº¦æŸã€‚å½“ç„¶è¿™ç§æ”¹æ³•å¯¹ä½¿ç”¨è€…æ¥è¯´ï¼Œä½“éªŒä¸\n  å¥½ã€‚å°¤å…¶æ˜¯ä¼ å…¥åŸç”Ÿç±»å‹å®ä¾‹æ—¶ï¼Œæ¯”å¦‚intã€‚\n  \n  å½“ç„¶æ³›å‹å¼•å…¥åï¼Œå¯ä»¥ç”¨æ³›å‹çº¦æŸæ¥ä¿®é¥°å‚æ•°vã€‚å°†å…è®¸ä¼ å…¥çš„ç±»å‹æ”¾å…¥çº¦æŸä¸­ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1657696120,"ip_address":"","comment_id":350928,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"æ„Ÿè§‰ç©ºæ¥å£è¯¥ç”¨è¿˜å¾—ç”¨ï¼Œæ¯”å¦‚è¿™é‡Œçš„å‚æ•° vï¼š\n\nfunc response(w http.ResponseWriter, v interface{}) {\n\tdata, err := json.Marshal(v)\n\tif err != nil {\n\t\thttp.Error(w, err.Error(), http.StatusInternalServerError)\n\t\treturn\n\t}\n\tw.Header().Set(&quot;Content-Type&quot;, &quot;application&#47;json&quot;)\n\tw.Write(data)\n}\n\nç°åœ¨ go1.18 æœ‰äº†èŒƒå‹ï¼Œä½†è¿™é‡Œå¥½åƒè¿˜å¾—è¿™ä¹ˆä¼ å‚æ•° vï¼Œå› ä¸ºå®ƒå¯èƒ½æ˜¯å„ç§ç»“æ„ä½“ç±»å‹ï¼Œè€å¸ˆæœ‰æ›´å¥½çš„æ–¹æ¡ˆå—ï¼Œè°¢è°¢ã€‚","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579802,"discussion_content":"è¿™æ®µä»£ç å¦‚æœéè¦ä¼ å…¥non-empty interfaceï¼Œå°±æœ‰äº›çŸ«æƒ…äº†ã€‚\n\nå½“ç„¶ä½ è¿™é‡Œä½¿ç”¨v interface{}ï¼Œå…¶å®æ˜¯å¾—ç›Šäºæ ‡å‡†åº“jsonçš„Marshalçš„å‚æ•°ç±»å‹æ˜¯interface{}ã€‚\n\nå¦‚æœä½ éè¦é™åˆ¶responseç”¨æˆ·ä¼ å…¥å‚æ•°çš„ç±»å‹ï¼Œè¿™é‡Œå°†å…¶è§†ä¸ºstrictæ¨¡å¼ï¼Œé‚£ä¹ˆ\n\né‚£ä¹ˆç¬¬äºŒä¸ªå‚æ•°æ˜¯å¦å¯ä»¥æ”¹ä¸ºv json.Marshalerï¼Œè¿™æ ·å¯¹ä¼ å…¥çš„å‚æ•°åšäº†strictçº¦æŸã€‚å½“ç„¶è¿™ç§æ”¹æ³•å¯¹ä½¿ç”¨è€…æ¥è¯´ï¼Œä½“éªŒä¸\n  å¥½ã€‚å°¤å…¶æ˜¯ä¼ å…¥åŸç”Ÿç±»å‹å®ä¾‹æ—¶ï¼Œæ¯”å¦‚intã€‚\n  \n  å½“ç„¶æ³›å‹å¼•å…¥åï¼Œå¯ä»¥ç”¨æ³›å‹çº¦æŸæ¥ä¿®é¥°å‚æ•°vã€‚å°†å…è®¸ä¼ å…¥çš„ç±»å‹æ”¾å…¥çº¦æŸä¸­ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657696120,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":348237,"user_name":"ç”·å„¿åˆ°æ­»å¿ƒå¦‚é“","can_delete":false,"product_type":"c1","uid":1799844,"ip_address":"","ucode":"687A58349727A9","user_header":"https://static001.geekbang.org/account/avatar/00/1b/76/a4/964330c6.jpg","comment_is_top":false,"comment_ctime":1654855859,"is_pvip":false,"replies":[{"id":126867,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1654872353,"ip_address":"","comment_id":348237,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"æ„Ÿè°¢è€å¸ˆï¼Œå¾ˆå¤šä¸œè¥¿éƒ½æ˜¯çœ‹å®Œä¹‹åè±ç„¶å¼€æœ—","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579802,"discussion_content":"è¿™æ®µä»£ç å¦‚æœéè¦ä¼ å…¥non-empty interfaceï¼Œå°±æœ‰äº›çŸ«æƒ…äº†ã€‚\n\nå½“ç„¶ä½ è¿™é‡Œä½¿ç”¨v interface{}ï¼Œå…¶å®æ˜¯å¾—ç›Šäºæ ‡å‡†åº“jsonçš„Marshalçš„å‚æ•°ç±»å‹æ˜¯interface{}ã€‚\n\nå¦‚æœä½ éè¦é™åˆ¶responseç”¨æˆ·ä¼ å…¥å‚æ•°çš„ç±»å‹ï¼Œè¿™é‡Œå°†å…¶è§†ä¸ºstrictæ¨¡å¼ï¼Œé‚£ä¹ˆ\n\né‚£ä¹ˆç¬¬äºŒä¸ªå‚æ•°æ˜¯å¦å¯ä»¥æ”¹ä¸ºv json.Marshalerï¼Œè¿™æ ·å¯¹ä¼ å…¥çš„å‚æ•°åšäº†strictçº¦æŸã€‚å½“ç„¶è¿™ç§æ”¹æ³•å¯¹ä½¿ç”¨è€…æ¥è¯´ï¼Œä½“éªŒä¸\n  å¥½ã€‚å°¤å…¶æ˜¯ä¼ å…¥åŸç”Ÿç±»å‹å®ä¾‹æ—¶ï¼Œæ¯”å¦‚intã€‚\n  \n  å½“ç„¶æ³›å‹å¼•å…¥åï¼Œå¯ä»¥ç”¨æ³›å‹çº¦æŸæ¥ä¿®é¥°å‚æ•°vã€‚å°†å…è®¸ä¼ å…¥çš„ç±»å‹æ”¾å…¥çº¦æŸä¸­ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657696120,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":335105,"user_name":"é’äº‰","can_delete":false,"product_type":"c1","uid":1657132,"ip_address":"","ucode":"D226C9DA9EF9C1","user_header":"https://static001.geekbang.org/account/avatar/00/19/49/2c/5d3679dd.jpg","comment_is_top":false,"comment_ctime":1645337301,"is_pvip":false,"replies":[{"id":122608,"content":"è¿™æ˜¯æˆ‘è¿è¡Œçš„ç»“æœã€‚ä¸åŠ authï¼Œä¼šè¿”å›bad auth param\n\n$curl localhost:8080\nbad auth param\n$curl -H &quot;auth:123456&quot; localhost:8080&#47;\nWelcome!\n\n                                                                                                 ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1645604811,"ip_address":"","comment_id":335105,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"\nfunc validateAuth(s string) error {\n    if s != &quot;123456&quot; {\n        return fmt.Errorf(&quot;%s&quot;, &quot;bad auth token&quot;)\n    }\n    return nil\n}\n\nfunc greetings(w http.ResponseWriter, r *http.Request) {\n    fmt.Fprintf(w, &quot;Welcome!&quot;)\n}\n\nfunc logHandler(h http.Handler) http.Handler {\n    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n        t := time.Now()\n        log.Printf(&quot;[%s] %q %v\\n&quot;, r.Method, r.URL.String(), t)\n        h.ServeHTTP(w, r)\n    })\n}\n\nfunc authHandler(h http.Handler) http.Handler {\n    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n        err := validateAuth(r.Header.Get(&quot;auth&quot;))\n        if err != nil {\n            http.Error(w, &quot;bad auth param&quot;, http.StatusUnauthorized)\n            return\n        }\n        h.ServeHTTP(w, r)\n    })\n\n}\n\nfunc main() {\n    http.ListenAndServe(&quot;:8080&quot;, logHandler(authHandler(http.HandlerFunc(greetings))))\n}\nç™½è€å¸ˆï¼Œè¿™æ®µä»£ç ï¼Œè¯·æ±‚çš„ä¿¡æ¯ä¸åŠ authï¼Œè¿”å›ä¿¡æ¯ä¹Ÿæ˜¯welcome!","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575484,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654872353,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":329074,"user_name":"æœ¨æœ¨","can_delete":false,"product_type":"c1","uid":2704565,"ip_address":"","ucode":"86820F26A27308","user_header":"https://static001.geekbang.org/account/avatar/00/29/44/b5/7eba5a0e.jpg","comment_is_top":false,"comment_ctime":1641096243,"is_pvip":false,"replies":[{"id":120299,"content":"åŒæ„Ÿã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1641869067,"ip_address":"","comment_id":329074,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"å¹²è´§æ»¡æ»¡ï¼Œè¶Šå­¦è¶Šè§‰å¾—goçœŸçš„æ˜¯å¯¹ç¨‹åºå‘˜å¾ˆå‹å¥½çš„è¯­è¨€ã€‚","like_count":1},{"had_liked":false,"id":328970,"user_name":"$ä¾¯","can_delete":false,"product_type":"c1","uid":1019939,"ip_address":"","ucode":"488B1BD3924E7E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/90/23/5c74e9b7.jpg","comment_is_top":false,"comment_ctime":1640962351,"is_pvip":false,"replies":[{"id":120303,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1641870934,"ip_address":"","comment_id":328970,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"ä»¥å‰ä¸€äº›å¯¹æ¥å£ä¸æ‡‚çš„çŸ¥è¯†ç‚¹ï¼Œç»è¿‡è€å¸ˆçš„è®²è§£åå˜å¾—è±ç„¶å¼€æœ—ï¼Œå®åœ¨æ˜¯å‰å®³ï¼","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545178,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641870934,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":328920,"user_name":"liaomars","can_delete":false,"product_type":"c1","uid":2104856,"ip_address":"","ucode":"4FCA97EE9FB57D","user_header":"https://static001.geekbang.org/account/avatar/00/20/1e/18/9d1f1439.jpg","comment_is_top":false,"comment_ctime":1640936611,"is_pvip":false,"replies":[{"id":120313,"content":"ç»„åˆï¼Œç»„åˆï¼Œç»„åˆ:)","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1641874361,"ip_address":"","comment_id":328920,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"è¿™åº”è¯¥æ˜¯æœ€æ¥è¿‘é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ç‰¹æ€§äº†å§","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545204,"discussion_content":"ç»„åˆï¼Œç»„åˆï¼Œç»„åˆ:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641874361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356468,"user_name":"è èå¹é›ªâ€”Code","can_delete":false,"product_type":"c1","uid":1650378,"ip_address":"åŒ—äº¬","ucode":"A5B2FC661EE17D","user_header":"https://static001.geekbang.org/account/avatar/00/19/2e/ca/469f7266.jpg","comment_is_top":false,"comment_ctime":1662349226,"is_pvip":false,"replies":[{"id":129799,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1662429454,"ip_address":"åŒ—äº¬","comment_id":356468,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"goè¯­è¨€åœ¨è€å¸ˆè¿™å…¥é—¨äº†","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586674,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662429454,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":330786,"user_name":"æ–‡ç»","can_delete":false,"product_type":"c1","uid":1072346,"ip_address":"","ucode":"2C059BD2A4276B","user_header":"https://static001.geekbang.org/account/avatar/00/10/5c/da/0a8bc27b.jpg","comment_is_top":false,"comment_ctime":1642159830,"is_pvip":true,"replies":[{"id":121536,"content":"â€œè¿‡è®¾è®¡â€ä¸â€œè¿‡åº¦è®¾è®¡â€è¿™ä¸¤ä¸ªè¯éƒ½æœ‰ï¼Œå«ä¹‰ä¸€æ ·çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1643441826,"ip_address":"","comment_id":330786,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100093501,"comment_content":" æ–‡ä¸­çš„ï¼šè¿™å°±ä¼šäº§ç”Ÿä¸€ç§â€œè¿‡è®¾è®¡â€çš„å‘³é“äº†ã€‚\nè¯´çš„æ˜¯è¿‡åº¦è®¾è®¡å§ï¼Œå°‘äº†ä¸€ä¸ªå­—ã€‚","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586674,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662429454,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":329638,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1641454009,"is_pvip":false,"replies":[{"id":120480,"content":"ç”¨åˆä¸­æ•°å­¦æ¥è§£é‡Šæ­£äº¤ä¸¤ä¸ªäº‹ç‰©çš„å…³ç³»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1642041533,"ip_address":"","comment_id":329638,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"å¤§ç™½è€å¸ˆçš„æ–‡ç« çœŸçš„åšåˆ°äº†æ·±å…¥æµ…å‡ºã€‚\n\næ–‡ä¸­æœ‰è¿™ä¹ˆä¸€å¥è¯ï¼šâ€œæ²¿ç€æŸä¸€æ¡ç›´çº¿ç§»åŠ¨ï¼Œä½ æŠ•å½±åˆ°å¦ä¸€æ¡ç›´çº¿ä¸Šçš„ä½ç½®ä¸å˜ã€‚â€ æ€ä¹ˆç†è§£è¿™ä¸€å¥è¯å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545698,"discussion_content":"ç”¨åˆä¸­æ•°å­¦æ¥è§£é‡Šæ­£äº¤ä¸¤ä¸ªäº‹ç‰©çš„å…³ç³»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642041533,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1045910,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f5/96/0cf9f3c7.jpg","nickname":"Aeins","note":"","ucode":"D5BF220767541D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574421,"discussion_content":"æ¯”å¦‚ï¼Œåœ¨åæ ‡è½´ä¸Šï¼Œæ²¿Yè½´èµ°ï¼Œæ— è®ºèµ°å¤šè¿œï¼ŒæŠ•å½±éƒ½åœ¨åŸç‚¹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1654053513,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":328803,"user_name":"Julien","can_delete":false,"product_type":"c1","uid":1204568,"ip_address":"","ucode":"2A3F0CF46B4034","user_header":"https://static001.geekbang.org/account/avatar/00/12/61/58/7b078879.jpg","comment_is_top":false,"comment_ctime":1640907038,"is_pvip":false,"replies":[{"id":120324,"content":"å¦‚æœåƒä½ è¯´çš„é‚£æ ·æ”¹ï¼Œå°±ä¼šå¯¼è‡´æ— é™é€’å½’è°ƒç”¨ï¼Œç›´è‡³æ ˆæº¢å‡ºå§ã€‚å†ä»”ç»†è¯»è¯»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1641875121,"ip_address":"","comment_id":328803,"utype":1}],"discussion_count":3,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"åŒ…è£…å™¨æ¨¡å¼çš„ä»£ç ç¤ºä¾‹é‡Œï¼ŒcapitalizedReaderï¼Œç¬¬10è¡Œçš„\nn, err := r.r.Read(p) \næ˜¯ä¸æ˜¯åº”è¯¥æ”¹æˆ\nn, err := r.Read(p) ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545215,"discussion_content":"å¦‚æœåƒä½ è¯´çš„é‚£æ ·æ”¹ï¼Œå°±ä¼šå¯¼è‡´æ— é™é€’å½’è°ƒç”¨ï¼Œç›´è‡³æ ˆæº¢å‡ºå§ã€‚å†ä»”ç»†è¯»è¯»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641875121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1184102,"avatar":"https://static001.geekbang.org/account/avatar/00/12/11/66/ac631a36.jpg","nickname":"Geralt","note":"","ucode":"2F31ED777D06A0","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543172,"discussion_content":"è€å¸ˆå†™çš„æ²¡é”™çš„ï¼ŒcapitalizedReaderæ²¡æœ‰ä½¿ç”¨ç±»å‹åµŒå…¥","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1640971552,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2872251,"avatar":"","nickname":"Geek_3021b3","note":"","ucode":"6F843535DAFE8B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544054,"discussion_content":"ä½¿ç”¨ç±»å‹åµŒå…¥çš„è¯ä¹Ÿè¦ç”¨r.Reader.Read(p)ï¼Œå¦åˆ™çš„è¯å°±æ— é™é€’å½’äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641389503,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":328802,"user_name":"ç½—æ°","can_delete":false,"product_type":"c1","uid":1320487,"ip_address":"","ucode":"96BAFAA147341F","user_header":"https://static001.geekbang.org/account/avatar/00/14/26/27/eba94899.jpg","comment_is_top":false,"comment_ctime":1640906800,"is_pvip":false,"replies":[{"id":120323,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1641874473,"ip_address":"","comment_id":328802,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"åˆæ˜¯å¹²è´§æ»¡æ»¡çš„ä¸€ç¯‡æ–‡ç« ï¼Œè¿›ä¸€æ­¥åŠ æ·±äº†æˆ‘å¯¹ç»„åˆå“²å­¦çš„ç†è§£ã€‚","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545214,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641874474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":390736,"user_name":"äººè¨€æœ‰åŠ›","can_delete":false,"product_type":"c1","uid":1690736,"ip_address":"æµ™æ±Ÿ","ucode":"3708FBBFB641FE","user_header":"https://static001.geekbang.org/account/avatar/00/19/cc/70/64045bc0.jpg","comment_is_top":false,"comment_ctime":1716123884,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"æœ¬èŠ‚è®²äº†goè¯­è¨€æ¥å£ä½¿ç”¨ä¸­çš„è®¾è®¡åŸåˆ™\n1ã€å‚ç›´ç»„åˆä¸»è¦æ˜¯é€šè¿‡ç±»å‹åµŒå…¥è¿›è¡Œå¤ç”¨\n2ã€æ°´å¹³ç»„åˆå°±æ˜¯å°½é‡ç”¨æ¥å£ç±»å‹ä½œä¸ºæ–¹æ³•å’Œå‡½æ•°çš„å…¥å‚ï¼Œæ¾è€¦åˆã€‚","like_count":0},{"had_liked":false,"id":358692,"user_name":"piboye","can_delete":false,"product_type":"c1","uid":1066752,"ip_address":"æ±Ÿè¥¿","ucode":"7CFD8712857A85","user_header":"https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg","comment_is_top":false,"comment_ctime":1664587762,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"å‰å®³äº†ğŸ‘","like_count":0},{"had_liked":false,"id":329074,"user_name":"æœ¨æœ¨","can_delete":false,"product_type":"c1","uid":2704565,"ip_address":"","ucode":"86820F26A27308","user_header":"https://static001.geekbang.org/account/avatar/00/29/44/b5/7eba5a0e.jpg","comment_is_top":false,"comment_ctime":1641096243,"is_pvip":false,"replies":[{"id":120299,"content":"åŒæ„Ÿã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1641869067,"ip_address":"","comment_id":329074,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"å¹²è´§æ»¡æ»¡ï¼Œè¶Šå­¦è¶Šè§‰å¾—goçœŸçš„æ˜¯å¯¹ç¨‹åºå‘˜å¾ˆå‹å¥½çš„è¯­è¨€ã€‚","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545168,"discussion_content":"åŒæ„Ÿã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641869067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":328970,"user_name":"$ä¾¯","can_delete":false,"product_type":"c1","uid":1019939,"ip_address":"","ucode":"488B1BD3924E7E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/90/23/5c74e9b7.jpg","comment_is_top":false,"comment_ctime":1640962351,"is_pvip":false,"replies":[{"id":120303,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1641870934,"ip_address":"","comment_id":328970,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"ä»¥å‰ä¸€äº›å¯¹æ¥å£ä¸æ‡‚çš„çŸ¥è¯†ç‚¹ï¼Œç»è¿‡è€å¸ˆçš„è®²è§£åå˜å¾—è±ç„¶å¼€æœ—ï¼Œå®åœ¨æ˜¯å‰å®³ï¼","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545168,"discussion_content":"åŒæ„Ÿã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641869067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":328920,"user_name":"liaomars","can_delete":false,"product_type":"c1","uid":2104856,"ip_address":"","ucode":"4FCA97EE9FB57D","user_header":"https://static001.geekbang.org/account/avatar/00/20/1e/18/9d1f1439.jpg","comment_is_top":false,"comment_ctime":1640936611,"is_pvip":false,"replies":[{"id":120313,"content":"ç»„åˆï¼Œç»„åˆï¼Œç»„åˆ:)","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1641874361,"ip_address":"","comment_id":328920,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"è¿™åº”è¯¥æ˜¯æœ€æ¥è¿‘é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ç‰¹æ€§äº†å§","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545178,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641870934,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356468,"user_name":"è èå¹é›ªâ€”Code","can_delete":false,"product_type":"c1","uid":1650378,"ip_address":"åŒ—äº¬","ucode":"A5B2FC661EE17D","user_header":"https://static001.geekbang.org/account/avatar/00/19/2e/ca/469f7266.jpg","comment_is_top":false,"comment_ctime":1662349226,"is_pvip":false,"replies":[{"id":129799,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1662429454,"ip_address":"åŒ—äº¬","comment_id":356468,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"goè¯­è¨€åœ¨è€å¸ˆè¿™å…¥é—¨äº†","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545204,"discussion_content":"ç»„åˆï¼Œç»„åˆï¼Œç»„åˆ:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641874361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":330786,"user_name":"æ–‡ç»","can_delete":false,"product_type":"c1","uid":1072346,"ip_address":"","ucode":"2C059BD2A4276B","user_header":"https://static001.geekbang.org/account/avatar/00/10/5c/da/0a8bc27b.jpg","comment_is_top":false,"comment_ctime":1642159830,"is_pvip":true,"replies":[{"id":121536,"content":"â€œè¿‡è®¾è®¡â€ä¸â€œè¿‡åº¦è®¾è®¡â€è¿™ä¸¤ä¸ªè¯éƒ½æœ‰ï¼Œå«ä¹‰ä¸€æ ·çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1643441826,"ip_address":"","comment_id":330786,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100093501,"comment_content":" æ–‡ä¸­çš„ï¼šè¿™å°±ä¼šäº§ç”Ÿä¸€ç§â€œè¿‡è®¾è®¡â€çš„å‘³é“äº†ã€‚\nè¯´çš„æ˜¯è¿‡åº¦è®¾è®¡å§ï¼Œå°‘äº†ä¸€ä¸ªå­—ã€‚","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548898,"discussion_content":"â€œè¿‡è®¾è®¡â€ä¸â€œè¿‡åº¦è®¾è®¡â€è¿™ä¸¤ä¸ªè¯éƒ½æœ‰ï¼Œå«ä¹‰ä¸€æ ·çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643441826,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1248326,"avatar":"https://static001.geekbang.org/account/avatar/00/13/0c/46/dfe32cf4.jpg","nickname":"å¤šé€‰å‚æ•°","note":"","ucode":"B2294D80AB075F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548286,"discussion_content":"è¿™ä¸ªä¹Ÿä¸ç®—æ˜¯å°‘ï¼Œéƒ½è¿™ä¹ˆè¯´ã€‚æ¯”å¦‚ã€Œè¿‡æ‹Ÿåˆã€","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1643112391,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":329638,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1641454009,"is_pvip":false,"replies":[{"id":120480,"content":"ç”¨åˆä¸­æ•°å­¦æ¥è§£é‡Šæ­£äº¤ä¸¤ä¸ªäº‹ç‰©çš„å…³ç³»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1642041533,"ip_address":"","comment_id":329638,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"å¤§ç™½è€å¸ˆçš„æ–‡ç« çœŸçš„åšåˆ°äº†æ·±å…¥æµ…å‡ºã€‚\n\næ–‡ä¸­æœ‰è¿™ä¹ˆä¸€å¥è¯ï¼šâ€œæ²¿ç€æŸä¸€æ¡ç›´çº¿ç§»åŠ¨ï¼Œä½ æŠ•å½±åˆ°å¦ä¸€æ¡ç›´çº¿ä¸Šçš„ä½ç½®ä¸å˜ã€‚â€ æ€ä¹ˆç†è§£è¿™ä¸€å¥è¯å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548898,"discussion_content":"â€œè¿‡è®¾è®¡â€ä¸â€œè¿‡åº¦è®¾è®¡â€è¿™ä¸¤ä¸ªè¯éƒ½æœ‰ï¼Œå«ä¹‰ä¸€æ ·çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643441826,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1248326,"avatar":"https://static001.geekbang.org/account/avatar/00/13/0c/46/dfe32cf4.jpg","nickname":"å¤šé€‰å‚æ•°","note":"","ucode":"B2294D80AB075F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548286,"discussion_content":"è¿™ä¸ªä¹Ÿä¸ç®—æ˜¯å°‘ï¼Œéƒ½è¿™ä¹ˆè¯´ã€‚æ¯”å¦‚ã€Œè¿‡æ‹Ÿåˆã€","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1643112391,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":328803,"user_name":"Julien","can_delete":false,"product_type":"c1","uid":1204568,"ip_address":"","ucode":"2A3F0CF46B4034","user_header":"https://static001.geekbang.org/account/avatar/00/12/61/58/7b078879.jpg","comment_is_top":false,"comment_ctime":1640907038,"is_pvip":false,"replies":[{"id":120324,"content":"å¦‚æœåƒä½ è¯´çš„é‚£æ ·æ”¹ï¼Œå°±ä¼šå¯¼è‡´æ— é™é€’å½’è°ƒç”¨ï¼Œç›´è‡³æ ˆæº¢å‡ºå§ã€‚å†ä»”ç»†è¯»è¯»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1641875121,"ip_address":"","comment_id":328803,"utype":1}],"discussion_count":3,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"åŒ…è£…å™¨æ¨¡å¼çš„ä»£ç ç¤ºä¾‹é‡Œï¼ŒcapitalizedReaderï¼Œç¬¬10è¡Œçš„\nn, err := r.r.Read(p) \næ˜¯ä¸æ˜¯åº”è¯¥æ”¹æˆ\nn, err := r.Read(p) ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545698,"discussion_content":"ç”¨åˆä¸­æ•°å­¦æ¥è§£é‡Šæ­£äº¤ä¸¤ä¸ªäº‹ç‰©çš„å…³ç³»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642041533,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1045910,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f5/96/0cf9f3c7.jpg","nickname":"Aeins","note":"","ucode":"D5BF220767541D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574421,"discussion_content":"æ¯”å¦‚ï¼Œåœ¨åæ ‡è½´ä¸Šï¼Œæ²¿Yè½´èµ°ï¼Œæ— è®ºèµ°å¤šè¿œï¼ŒæŠ•å½±éƒ½åœ¨åŸç‚¹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1654053513,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":328802,"user_name":"ç½—æ°","can_delete":false,"product_type":"c1","uid":1320487,"ip_address":"","ucode":"96BAFAA147341F","user_header":"https://static001.geekbang.org/account/avatar/00/14/26/27/eba94899.jpg","comment_is_top":false,"comment_ctime":1640906800,"is_pvip":false,"replies":[{"id":120323,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1641874473,"ip_address":"","comment_id":328802,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"åˆæ˜¯å¹²è´§æ»¡æ»¡çš„ä¸€ç¯‡æ–‡ç« ï¼Œè¿›ä¸€æ­¥åŠ æ·±äº†æˆ‘å¯¹ç»„åˆå“²å­¦çš„ç†è§£ã€‚","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545215,"discussion_content":"å¦‚æœåƒä½ è¯´çš„é‚£æ ·æ”¹ï¼Œå°±ä¼šå¯¼è‡´æ— é™é€’å½’è°ƒç”¨ï¼Œç›´è‡³æ ˆæº¢å‡ºå§ã€‚å†ä»”ç»†è¯»è¯»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641875121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1184102,"avatar":"https://static001.geekbang.org/account/avatar/00/12/11/66/ac631a36.jpg","nickname":"Geralt","note":"","ucode":"2F31ED777D06A0","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543172,"discussion_content":"è€å¸ˆå†™çš„æ²¡é”™çš„ï¼ŒcapitalizedReaderæ²¡æœ‰ä½¿ç”¨ç±»å‹åµŒå…¥","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1640971552,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2872251,"avatar":"","nickname":"Geek_3021b3","note":"","ucode":"6F843535DAFE8B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544054,"discussion_content":"ä½¿ç”¨ç±»å‹åµŒå…¥çš„è¯ä¹Ÿè¦ç”¨r.Reader.Read(p)ï¼Œå¦åˆ™çš„è¯å°±æ— é™é€’å½’äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641389503,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":390736,"user_name":"äººè¨€æœ‰åŠ›","can_delete":false,"product_type":"c1","uid":1690736,"ip_address":"æµ™æ±Ÿ","ucode":"3708FBBFB641FE","user_header":"https://static001.geekbang.org/account/avatar/00/19/cc/70/64045bc0.jpg","comment_is_top":false,"comment_ctime":1716123884,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"æœ¬èŠ‚è®²äº†goè¯­è¨€æ¥å£ä½¿ç”¨ä¸­çš„è®¾è®¡åŸåˆ™\n1ã€å‚ç›´ç»„åˆä¸»è¦æ˜¯é€šè¿‡ç±»å‹åµŒå…¥è¿›è¡Œå¤ç”¨\n2ã€æ°´å¹³ç»„åˆå°±æ˜¯å°½é‡ç”¨æ¥å£ç±»å‹ä½œä¸ºæ–¹æ³•å’Œå‡½æ•°çš„å…¥å‚ï¼Œæ¾è€¦åˆã€‚","like_count":0},{"had_liked":false,"id":358692,"user_name":"piboye","can_delete":false,"product_type":"c1","uid":1066752,"ip_address":"æ±Ÿè¥¿","ucode":"7CFD8712857A85","user_header":"https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg","comment_is_top":false,"comment_ctime":1664587762,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"å‰å®³äº†ğŸ‘","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545214,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641874474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":347460,"user_name":"Aeins","can_delete":false,"product_type":"c1","uid":1045910,"ip_address":"","ucode":"D5BF220767541D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f5/96/0cf9f3c7.jpg","comment_is_top":false,"comment_ctime":1654054300,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100093501,"comment_content":"æ„Ÿè§‰åˆ«æ‰­çš„åœ°æ–¹\n\n1. Go ä¸­çš„æ¥å£æœ‰åŠ¨æ€ç±»å‹ï¼ŒåŠ¨æ€å€¼ã€‚ä¸ä»…æ˜¯ä¸€ç§è¡Œä¸ºæŠ½è±¡ï¼Œè¿˜æ˜¯å…·ä½“çš„ç¨‹åºå®ä½“ã€‚èƒ½ç›´æ¥é€šè¿‡æ¥å£å˜é‡è°ƒç”¨æ–¹æ³•ã€‚æ¯”å•çº¯ç”¨æ¥ç±»å‹æ³¨è§£æ›´å¼ºå¤§\n\n2. ServeHTTP é‡Œç›´æ¥è°ƒç”¨ fã€‚è¿™ç§åŒ…è£… Go ç‹¬æœ‰çš„å§ï¼ŒåŠŸèƒ½ä¸Šæœ‰è£…é¥°å™¨ï¼Œæœ‰å§”æ‰˜çš„æ„Ÿè§‰\ntype HandlerFunc func(ResponseWriter, *Request)\n\nfunc (f HandlerFunc) ServeHTTP(w ResponseWriter, r *Request) {    f(w, r)}\n","like_count":0},{"had_liked":false,"id":347460,"user_name":"Aeins","can_delete":false,"product_type":"c1","uid":1045910,"ip_address":"","ucode":"D5BF220767541D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f5/96/0cf9f3c7.jpg","comment_is_top":false,"comment_ctime":1654054300,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100093501,"comment_content":"æ„Ÿè§‰åˆ«æ‰­çš„åœ°æ–¹\n\n1. Go ä¸­çš„æ¥å£æœ‰åŠ¨æ€ç±»å‹ï¼ŒåŠ¨æ€å€¼ã€‚ä¸ä»…æ˜¯ä¸€ç§è¡Œä¸ºæŠ½è±¡ï¼Œè¿˜æ˜¯å…·ä½“çš„ç¨‹åºå®ä½“ã€‚èƒ½ç›´æ¥é€šè¿‡æ¥å£å˜é‡è°ƒç”¨æ–¹æ³•ã€‚æ¯”å•çº¯ç”¨æ¥ç±»å‹æ³¨è§£æ›´å¼ºå¤§\n\n2. ServeHTTP é‡Œç›´æ¥è°ƒç”¨ fã€‚è¿™ç§åŒ…è£… Go ç‹¬æœ‰çš„å§ï¼ŒåŠŸèƒ½ä¸Šæœ‰è£…é¥°å™¨ï¼Œæœ‰å§”æ‰˜çš„æ„Ÿè§‰\ntype HandlerFunc func(ResponseWriter, *Request)\n\nfunc (f HandlerFunc) ServeHTTP(w ResponseWriter, r *Request) {    f(w, r)}\n","like_count":0}]}