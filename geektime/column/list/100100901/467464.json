{"id":467464,"title":"02ï½œåŒå‘é“¾è¡¨ï¼šlistå¦‚ä½•å®ç°é«˜æ•ˆåœ°æ’å…¥ä¸åˆ é™¤ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å¾®æ‰°å›ã€‚</p><p>åœ¨ä¸Šä¸€è®²å®ç°çš„ä¸€ä¸ªç®€æ˜“é“¶è¡Œè´¦æˆ·ç®¡ç†ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªè´¦å·éƒ½å¯¹åº”äº†ä¸€ä¸ªä½™é¢ï¼Œç³»ç»Ÿæ”¯æŒç”¨æˆ·çš„å¼€é€šã€å­˜/å–æ¬¾å’ŒæŸ¥è¯¢ä½™é¢ã€‚æˆ‘ä»¬ä½¿ç”¨åŠ¨æ€æ•°ç»„å®¹å™¨æ»¡è¶³äº†é¢‘ç¹éšæœºè®¿é—®æŸ¥è¯¢çš„éœ€æ±‚ã€‚</p><p>ä½†æ˜¯å¦‚æœè¦åœ¨ç³»ç»Ÿé‡Œæ”¯æŒåˆ é™¤çš„åŠŸèƒ½ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬ä¸ºäº†ä¸è¿›è¡Œæ•´ä½“çš„æ•°ç»„ç§»åŠ¨æ“ä½œï¼Œé€šå¸¸å°±åªèƒ½ä¿ç•™è¿™ä¸ªç”¨æˆ·åœ¨æ•°ç»„é‡Œå ç”¨çš„å†…å­˜ï¼Œç”¨å°†å…ƒç´ æ ‡è®°ä¸ºç‰¹æ®Šå€¼çš„æ–¹å¼æ¥æ¨¡æ‹Ÿâ€œåˆ é™¤â€ï¼›è€Œå› ä¸ºæ•°ç»„æ˜¯è¿ç»­å­˜å‚¨çš„ï¼Œä¸èƒ½å•ç‹¬é‡Šæ”¾æ‰æ•°ç»„ä¸­é—´æŸäº›åŒºåŸŸçš„å†…å­˜ï¼Œæ‰€ä»¥è¿™æ®µå†…å­˜ç©ºé—´æˆ‘ä»¬å®é™…ä¸Šå°±æ˜¯æµªè´¹çš„ã€‚</p><p>å¦‚æœè¿˜æœ‰ä¸ªéœ€æ±‚ï¼Œæ¯”å¦‚ç°åœ¨æŸä¸ªä¸è®²é“ç†çš„é¢†å¯¼æ¥åˆ°è¿™ä¸ªé“¶è¡Œï¼Œè¦æ±‚è‡ªå·±åœ¨æ•°ç»„ä¸­æ’åœ¨æœ€å‰é¢ï¼›é‚£ä¹ˆæˆ‘ä»¬ä¸å¾—ä¸å°†æ‰€æœ‰äººçš„è´¦æˆ·ä¿¡æ¯å¾€åæŒªåŠ¨ä¸€ä½æ¥æ»¡è¶³ä»–å¥‡æ€ªçš„è‡ªå°Šå¿ƒï¼Œè¿™ä¹Ÿä¼šå¸¦æ¥é«˜æ˜‚çš„æ—¶é—´å¤æ‚åº¦ã€‚</p><p>é‚£ä¹ˆæœ‰æ²¡æœ‰åŠæ³•è®©æˆ‘ä»¬ä¸å†éœ€è¦è¿ç»­çš„å­˜å‚¨ç©ºé—´å»å­˜å‚¨ä¸€ä¸ªåºåˆ—ï¼ŒåŒæ—¶åˆå¯ä»¥åœ¨åºåˆ—ä¸­å¿«é€Ÿè¿›è¡Œæ’å…¥/åˆ é™¤æ“ä½œè€Œä¸ç”¨æ³¢åŠä¹‹åçš„æ‰€æœ‰å…ƒç´ å‘¢ï¼Ÿ</p><p>è¿™å°±éœ€è¦å¦ä¸€ç§å¸¸è§çš„åºåˆ—å¼æ•°æ®ç»“æ„â€”â€”é“¾è¡¨ç™»åœºäº†ï¼Œè¿™åŒæ ·æ˜¯å‡ ä¹æ‰€æœ‰é«˜çº§è¯­è¨€éƒ½ä¼šåŸç”Ÿæ”¯æŒçš„æ•°æ®ç»“æ„ã€‚</p><h2>é“¾è¡¨</h2><p>é“¾è¡¨è¿™ä¸ªæ•°æ®ç»“æ„çš„å‘æ˜ä¹Ÿæ˜¯å¾ˆä¹…ä¹‹å‰çš„äº‹äº†ï¼Œæœ€æ—©åœ¨1955å¹´ï¼Œå®ƒå°±æ˜¯IPLè¿™ä¸€å¤è€è¯­è¨€çš„å†…ç½®æ•°æ®ç»“æ„ï¼Œç”¨äºå¼€å‘å½“æ—¶çš„äººå·¥æ™ºèƒ½ç¨‹åºã€‚</p><p>ç±»ä¼¼æ•°ç»„ï¼Œé“¾è¡¨åŒæ ·æ˜¯ä¸€ç§åºåˆ—å¼çš„æ•°æ®ç»“æ„ï¼Œä½†å­˜å‚¨å…ƒç´ æ—¶å¹¶ä¸éœ€è¦ä½¿ç”¨è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œè€Œæ˜¯é‡‡ç”¨ä¸€ç³»åˆ—é€šè¿‡æŒ‡é’ˆç›¸è¿çš„èŠ‚ç‚¹æ¥å­˜å‚¨ï¼Œ<strong>å› ä¸ºæœ‰äº†æŒ‡é’ˆæ¥å…³è”èŠ‚ç‚¹çš„åœ°å€ï¼Œå°±ä¸éœ€è¦è¿ç»­å­˜å‚¨äº†</strong>ã€‚</p><!-- [[[read_end]]] --><p>åœ¨æ¯ä¸ªèŠ‚ç‚¹å†…ï¼Œæˆ‘ä»¬éƒ½ä¼šåŒæ—¶å­˜å‚¨å…ƒç´ çš„æ•°æ®ä¿¡æ¯å’Œä¸€ä¸ªæŒ‡é’ˆï¼Œå­˜å‚¨å…ƒç´ ä¿¡æ¯çš„éƒ¨åˆ†æ˜¯æ•°æ®åŸŸï¼Œä¹Ÿå°±æ˜¯ data fieldï¼Œå­˜å‚¨æŒ‡é’ˆçš„åœ°æ–¹ç§°ä¸ºå¼•ç”¨åŸŸï¼Œä¹Ÿå°±æ˜¯ reference fieldï¼›å…¶ä¸­æŒ‡é’ˆæŒ‡å‘è¯¥èŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯è®°å½•ç€é“¾è¡¨ä¸­å­˜å‚¨ä¸‹ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹çš„åœ°å€ã€‚</p><p>ä¸‹å›¾å°±æ˜¯ä¸€ä¸ªå…¸å‹é•¿åº¦ä¸º3çš„é“¾è¡¨çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŒ‡é’ˆå¾ˆå®¹æ˜“åœ°ä»ç¬¬ä¸€ä¸ªèŠ‚ç‚¹éå†å®Œæ•´ä¸ªé“¾è¡¨ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/57/5f/57a4afd78ed47c5f4dedd450c87b8c5f.jpg?wh=1920x787\" alt=\"å›¾ç‰‡\"></p><p>ä»å†…å­˜å¸ƒå±€èƒ½çœ‹å‡ºæ¥ï¼Œé“¾è¡¨æ¯”è¿ç»­å­˜å‚¨çš„æ•°ç»„ï¼Œæœ‰æ›´çµæ´»çš„å†…å­˜ä½¿ç”¨æ–¹å¼å’Œæ›´é«˜çš„å†…å­˜ä½¿ç”¨ç‡ã€‚</p><p>å› ä¸ºæ•°ç»„è¦æ±‚äº‹å…ˆåˆ†é…å†…å­˜ï¼Œè€Œé“¾è¡¨æ˜¯æ¯æ¬¡æ’å…¥æ–°èŠ‚ç‚¹çš„æ—¶å€™ï¼Œæ‰ç”³è¯·è¯¥èŠ‚ç‚¹æ‰€éœ€çš„å†…å­˜ç©ºé—´ï¼Œçµæ´»å¾—å¤šï¼Œä¹Ÿå°±ä¸ä¼šæœ‰åˆ†é…ç©ºé—´æ²¡æœ‰è¢«ä½¿ç”¨çš„æµªè´¹é—®é¢˜ï¼Œè‡ªç„¶å†…å­˜ä½¿ç”¨ç‡é«˜ã€‚</p><p>é“¾è¡¨å­˜å‚¨å…ƒç´ é‡‡ç”¨çš„æ˜¯é€šè¿‡æŒ‡é’ˆçš„ä¸²è”æ–¹å¼ï¼Œè€Œéæ•°ç»„çš„è¿ç»­æ’åˆ—æ–¹å¼ã€‚æˆ‘ä»¬åœ¨ä»»ä½•ä½ç½®æ’å…¥æˆ–è€…åˆ é™¤èŠ‚ç‚¹ï¼Œä¸å†éœ€è¦ä¸ºäº†ä¿æŒå…ƒç´ çš„è¿ç»­å­˜å‚¨è€Œè¿›è¡ŒO(n)çš„æ•´ä½“ç§»åŠ¨æ“ä½œï¼Œåªéœ€è¦è¿›è¡ŒO(1)çš„æŒ‡é’ˆæ”¹å†™ï¼ŒåŠ ç”³è¯·æˆ–è€…é‡Šæ”¾å†…å­˜å°±è¡Œã€‚è¿™æ˜¾ç„¶æ¯”æ•°ç»„çš„æ’å…¥åˆ é™¤è¦é«˜æ•ˆå¾—å¤šã€‚</p><p>ä½†æ˜¯æ¯•ç«Ÿé±¼å’Œç†ŠæŒä¸èƒ½å…¼å¾—ã€‚<strong>ä¹Ÿæ­£æ˜¯å› ä¸ºè¿™æ ·éè¿ç»­çš„å­˜å‚¨æ–¹å¼ï¼Œæˆ‘ä»¬éœ€è¦è®¿é—®é“¾è¡¨ä¸­ç¬¬nä¸ªå…ƒç´ çš„æ—¶å€™å°±ä¸å¾—ä¸ä»å¤´èŠ‚ç‚¹éå†</strong>ï¼Œå¯¼è‡´è®¿é—®ç¬¬iä¸ªå…ƒç´ çš„å‡æ‘Šæ—¶é—´å¤æ‚åº¦ä¸ºO(N)ï¼Œè€Œä¸èƒ½åƒæ•°ç»„é‚£æ ·ç›´æ¥åŸºäºä¸‹æ ‡å’Œå…ƒç´ å¤§å°ï¼Œè®¡ç®—å‡ºæŒ‡å®šå…ƒç´ çš„åç§»é‡ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½ç®€å•åœ°è¯´é“¾è¡¨å’Œæ•°ç»„å“ªä¸ªæ›´å¥½ï¼Œè€Œæ˜¯è¦æ ¹æ®ä½¿ç”¨çš„åœºæ™¯åšå‡ºåˆé€‚çš„é€‰æ‹©ã€‚æ¯•ç«Ÿå¦‚æœä¸¤ä¸ªç›¸ä¼¼çš„æ•°æ®ç»“æ„å…¶ä¸­ä¸€ä¸ªå„ä¸ªæ–¹é¢éƒ½å¥½äºå¦ä¸€ä¸ªçš„è¯ï¼Œå¦ä¸€ä¸ªæ•°æ®ç»“æ„å¯èƒ½ä¹Ÿä¸ä¼šå­˜åœ¨è‡³ä»Šäº†ã€‚</p><p>åŸºäºä¸Šé¢çš„ç‰¹æ€§å¯¹æ¯”ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€ä¸ªå¤§è‡´çš„ç»“è®ºï¼šé“¾è¡¨æ›´é€‚ç”¨äºåˆ é™¤ã€æ’å…¥ã€éå†æ“ä½œé¢‘ç¹çš„åœºæ™¯ï¼Œè€Œä¸é€‚ç”¨äºéšæœºè®¿é—®ç´¢å¼•é¢‘ç¹çš„åœºæ™¯ã€‚æ¯”å¦‚åœ¨å†…å­˜æ± ã€æ“ä½œç³»ç»Ÿè¿›ç¨‹ç®¡ç†ã€æœ€å¸¸ç”¨çš„ç¼“å­˜æ›¿æ¢ç®—æ³•LRUä¸­éƒ½æœ‰åº”ç”¨ï¼Œä¹‹åè®²è§£åˆ°ç›¸å…³ä¸“é¢˜çš„æ—¶å€™ä¹Ÿä¼šæåˆ°ã€‚</p><h2>å•é“¾è¡¨vsåŒé“¾è¡¨vså¾ªç¯é“¾è¡¨</h2><p>åœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®ä¸åŒçš„éœ€æ±‚ï¼Œå¤§è‡´æœ‰3ç§å¸¸è§çš„é“¾è¡¨å½¢å¼ï¼Œå•é“¾è¡¨ã€åŒé“¾è¡¨å’Œå¾ªç¯é“¾è¡¨ï¼Œå®ƒä»¬éƒ½éœ€è¦æ”¯æŒå‡ ç§æœ€åŸºæœ¬çš„é“¾è¡¨æ“ä½œï¼ŒåŒ…æ‹¬æ’å…¥èŠ‚ç‚¹ã€åˆ é™¤èŠ‚ç‚¹ã€ä¿®æ”¹èŠ‚ç‚¹ä¿¡æ¯ï¼Œä»¥åŠè®¿é—®éå†èŠ‚ç‚¹ä¿¡æ¯ã€‚</p><p>å¯ä»¥çœ‹å›¾ç›´è§‚æ„Ÿå—ä¸‰è€…çš„åŒºåˆ«ã€‚ä¸‰ç§é“¾è¡¨èŠ‚ç‚¹éƒ½åŒ…å«å¼•ç”¨åŸŸå’Œæ•°æ®åŸŸã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/fb/a5/fb50a216ba0f4d38461427d13cd0d9a5.jpg?wh=1920x787\" alt=\"å›¾ç‰‡\"></p><p>å…¶ä¸­ï¼Œå•é“¾è¡¨å’ŒåŒé“¾è¡¨æœ€å¤§çš„åŒºåˆ«å°±åœ¨äºï¼Œå•é“¾è¡¨çš„å¼•ç”¨åŸŸï¼Œåªå­˜äº†ä¸€ä¸ªåç»§æŒ‡é’ˆã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a4/02/a42ab74b0ceaf7675eb07b830e986c02.jpg?wh=1920x787\" alt=\"å›¾ç‰‡\"></p><p>è€ŒåŒé“¾è¡¨æœ‰ä¸¤ä¸ªå¼•ç”¨åŸŸï¼Œä¸åªå­˜æœ‰åç»§èŠ‚ç‚¹çš„åœ°å€ï¼Œä¹Ÿå­˜å‚¨äº†å‰é©±èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬<strong>å¯ä»¥åŒå‘éå†é“¾è¡¨ï¼Œæ‹¥æœ‰äº†åœ¨éå†ä¸­å›é€€çš„èƒ½åŠ›</strong>ã€‚åœ¨é“¾è¡¨é¦–å°¾çš„å‰é©±å’Œåç»§æŒ‡é’ˆï¼Œå¯ä»¥è®¾ä¸ºNULLæˆ–è€…æŒ‡å‘ä¸€ä¸ªç‰¹æ®Šçš„è™šæ‹ŸèŠ‚ç‚¹ï¼Œæ¥æ ‡è®°é“¾è¡¨çš„ç»ˆç»“ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/b0/e6/b02c37b3d8ba0a9a213e3ff1d1461ee6.jpg?wh=1920x787\" alt=\"å›¾ç‰‡\"></p><p>è€Œå¾ªç¯é“¾è¡¨åˆ™æ˜¯ä¸€ä¸ªæ²¡æœ‰è¾¹ç•Œçš„ç¯ï¼Œæ—¢å¯ä»¥ç”¨åŒé“¾è¡¨æ¥å®ç°ä¹Ÿå¯ä»¥ç”¨å•é“¾è¡¨å®ç°ã€‚ç›¸æ¯”äºå‰ä¸¤è€…çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œåœ¨é“¾è¡¨çš„è¾¹ç•Œï¼Œæ¯”å¦‚å°¾éƒ¨ï¼Œä¸å†è®¾ä¸ºNULLæˆ–è€…ä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œè€Œæ˜¯ç›´æ¥å°†å°¾éƒ¨æŒ‡å‘é“¾è¡¨çš„å¤´éƒ¨ã€‚è¿™åœ¨è®¸å¤šéœ€è¦å¾ªç¯éå†çš„åœºæ™¯ä¸‹éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚å¯ä»¥ç”¨äºæ¨¡æ‹Ÿçº¦ç‘Ÿå¤«ç¯ã€‚</p><h2>STLä¸­Listçš„å®ç°</h2><p>å¥½äº†ï¼Œè®²è§£å®Œé“¾è¡¨çš„åŸºç¡€æ¦‚å¿µå’Œåˆ†ç±»ï¼Œè¿›å…¥ä»Šå¤©çš„é‡å¤´æˆï¼Œæˆ‘ä»¬çœ‹çœ‹å¦‚ä½•å®ç°ä¸€ä¸ªé“¾è¡¨ã€‚</p><p>ä¸ºäº†å¥‘åˆä¸“æ çœŸå®ä¸–ç•Œçš„è¯­ä¹‰ï¼Œæˆ‘ä»¬ç»§ç»­ä»¥STLè¿™ä¸€ä¹…ç»è€ƒéªŒçš„C++æ ‡å‡†åº“ä¸­çš„å®ç°æ¥è®²è§£ã€‚<strong>Listå°±æ˜¯STLä¸­çš„é“¾è¡¨å®¹å™¨ï¼Œå®ƒå®ç°çš„æ˜¯å‰é¢æåˆ°çš„åŒå‘ã€å¾ªç¯é“¾è¡¨</strong>ã€‚å¦‚æœä½ æƒ³è¦ä½¿ç”¨æ›´èŠ‚çº¦ç©ºé—´çš„å•é“¾è¡¨ï¼ŒSTLä¸­ä¹Ÿæä¾›äº†ç›¸åº”çš„å®ç°<a href=\"https://en.cppreference.com/w/cpp/container/forward_list\">forward_list</a>ï¼Œæœ‰å…´è¶£çš„è¯ï¼Œä½ å¯ä»¥è‡ªå·±å»äº†è§£èƒŒåçš„å®ç°ã€‚</p><p>å’Œä¸ŠèŠ‚è¯¾ä¸€æ ·ï¼Œå› ä¸ºSTLçš„å®ç°èƒŒåæ¶‰åŠäº†è®¸å¤šç¹ççš„C++é«˜çº§è¯­æ³•ï¼Œæˆ‘ä»¬ä¼šå¯¹ä»£ç åšä¸€å®šçš„ç®€åŒ–æ–¹ä¾¿ç†è§£ï¼Œä½ å¯¹C++ä¸æ„Ÿå…´è¶£çš„è¯ä¹Ÿä¸ç”¨æ·±ç©¶ã€‚</p><h3>é“¾è¡¨èŠ‚ç‚¹çš„å®ç°</h3><p>é¦–å…ˆæ¥çœ‹ä¸€ä¸‹ list çš„ä¸»è¦ç»„æˆéƒ¨åˆ†node ï¼Œä¹Ÿå°±æ˜¯é“¾è¡¨èŠ‚ç‚¹ï¼Œå®ƒæ˜¯æ•´ä¸ªé“¾è¡¨çš„å…³é”®ï¼Œå­˜å‚¨ç€å…ƒç´ ä¿¡æ¯æœ¬èº«å’Œè¿æ¥é“¾è¡¨çš„å‰åæŒ‡é’ˆã€‚</p><p>NodeèŠ‚ç‚¹çš„å®ç°å¦‚ä¸‹ï¼š</p><pre><code class=\"language-c++\">template &lt;class T&gt;\nstruct __list_node {\n  __list_node&lt;T&gt;* next;  // å‰é©±èŠ‚ç‚¹æŒ‡é’ˆ\n  __list_node&lt;T&gt;* prev; // åç»§èŠ‚ç‚¹æŒ‡é’ˆ\n  T data; //å­˜å‚¨æ•°æ®\n};\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œé“¾è¡¨èŠ‚ç‚¹çš„å®šä¹‰ï¼Œé™¤äº†ä¸ºäº†æ”¯æŒå„ç§å…ƒç´ ç±»å‹è€Œç”¨åˆ°çš„æ³›å‹è¯­æ³•ã€‚å…¶ä»–çš„å†…å®¹å’Œå‰é¢è¯´çš„åŒé“¾è¡¨çš„èŠ‚ç‚¹å®Œå…¨ä¸€è‡´ï¼Œ<strong>æŒ‡é’ˆåŸŸåŒæ—¶åŒ…å«äº†å‰é©±å’Œåç»§èŠ‚ç‚¹çš„åœ°å€</strong>ï¼Œæˆå‘˜å˜é‡dataç”¨äºå­˜å‚¨å…ƒç´ ä¿¡æ¯æœ¬èº«ã€‚</p><h3>é“¾è¡¨è¿­ä»£å™¨çš„å®ç°</h3><p>æ‰€æœ‰çš„STLå®¹å™¨éƒ½éœ€è¦å®ç°è¿­ä»£å™¨ï¼Œè¿™ä¹Ÿæ˜¯åé¢æ‰€æœ‰æ“ä½œçš„åŸºç¡€ã€‚</p><p>è¿­ä»£å™¨æä¾›ç”¨äºéå†çš„æœ€é‡è¦çš„æ¥å£ï¼Œå®ƒæœ¬èº«ä¹Ÿæ˜¯ä¸€ç§é‡è¦çš„è®¾è®¡æ¨¡å¼ï¼Œæ”¯æŒçš„æ“ä½œå°±æ˜¯è‡ªå¢<code>++</code>å’Œè‡ªå‡<code>--</code>ã€‚ä¸Šä¸€è®²çš„vectorï¼Œå› ä¸ºå†…å­˜æ˜¯è¿ç»­å­˜å‚¨çš„ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡åœ°å€çš„++å’Œâ€“æ“ä½œï¼›ä½†åœ¨å†…å­˜ä¸è¿ç»­å­˜å‚¨çš„Listä¸­ï¼Œæˆ‘ä»¬éœ€è¦åŸºäºèŠ‚ç‚¹å¼•ç”¨åŸŸä¸­çš„å‰é©±åç»§èŠ‚ç‚¹ä¿¡æ¯ï¼Œæ¥å®ç°è‡ªå·±çš„è¿­ä»£æ–¹æ³•ã€‚</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class=\"language-c++\">template&lt;typename T&gt;\nstruct __list_iterator{\n    typedef __list_iterator&lt;T&gt;   self;\n    typedef __list_node&lt;T&gt;*      link_type;\n    link_type ptr; //æˆå‘˜\n    __list_iterator(link_type p = nullptr):ptr(p){}\n}\n\nT&amp; operator *(){return ptr-&gt;data;}\nT* operator -&gt;(){return &amp;(operator*());}\n// ç±»ä¼¼ ++x è¿”å›nextèŠ‚ç‚¹\nself&amp; operator++(){\n    ptr = ptr-&gt;next;\n    return *this;\n}\n// ç±»ä¼¼ x++ è¿”å›å½“å‰èŠ‚ç‚¹\nself operator++(int){\n    self tmp = *this;\n    ++*this;\n    return tmp;\n}\n// ç±»ä¼¼ --x è¿”å›prevèŠ‚ç‚¹\nself&amp; operator--(){\n    ptr = ptr-&gt;prev;\n    return *this;\n}\n// ç±»ä¼¼ x-- è¿”å›å½“å‰èŠ‚ç‚¹\nself operator--(int){\n    self tmp = *this;\n    --*this;\n    return tmp;\n}\nbool operator==(const __list_iterator&amp; rhs){\n    return ptr == rhs.ptr;\n}\nbool operator!=(const __list_iterator&amp; rhs){\n    return !(*this==rhs);\n}\n</code></pre><p>å…¶å®å°±æ˜¯å°†è¿­ä»£å™¨çš„æ–¹æ³•éƒ½å®ç°ä¸€éã€‚æˆ‘ä»¬é‡ç‚¹éœ€è¦å…³æ³¨çš„æ“ä½œæ˜¯++å’Œâ€“ï¼Œå¯¹åº”å®ç°ä¹Ÿéå¸¸ç›´è§‚ã€‚</p><p>åœ¨è¿­ä»£å™¨ä¸­ï¼Œptræ˜¯æˆ‘ä»¬çš„ä¸»è¦æˆå‘˜å˜é‡ï¼Œå®ƒæŒ‡å‘çš„å°±æ˜¯è¿­ä»£å™¨å½“å‰éå†çš„èŠ‚ç‚¹åœ°å€ã€‚æ‰€ä»¥++å°±æ˜¯è¿”å›ä¸€ä¸ªæŒ‡å‘ <code>ptr-&gt;next</code> çš„æŒ‡é’ˆï¼›è€Œâ€“å¯¹åº”çš„ï¼Œå°±æ˜¯è¿”å›ä¸€ä¸ªæŒ‡å‘<code>prt-&gt;prev</code>  çš„æŒ‡é’ˆï¼›åŒæ—¶æˆ‘ä»¬éœ€è¦æŠŠå†…ç½®çš„ptr ä¹ŸæŒ‡å‘prt-&gt;next æˆ–è€… ptr-&gt;prevã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è‡ªå¦‚åœ°ç”¨è¿­ä»£å™¨åœ¨é“¾è¡¨ä¸Šè¿›è¡Œéå†äº†ã€‚</p><h2>é“¾è¡¨æ•°æ®ç»“æ„çš„å®ç°</h2><p>æœ‰äº†è¿­ä»£å™¨å’ŒèŠ‚ç‚¹ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯å°†STLä¸­åŒå‘å¾ªç¯é“¾è¡¨çš„ç»“æ„ï¼Œç”¨C++è¯­è¨€æè¿°å‡ºæ¥ï¼Œå¹¶å°†ä¸€äº›é“¾è¡¨ç›¸å…³çš„åŸºæœ¬æ“ä½œå®ç°å‡ºæ¥ã€‚</p><p>æ‰€è°“é“¾è¡¨ï¼Œå°±æ˜¯è¦å°†èŠ‚ç‚¹é“¾æ¥èµ·æ¥ã€‚ç”±äºé“¾è¡¨èŠ‚ç‚¹æœ¬èº«å·²ç»å­˜äº†å‰ç½®åç»§èŠ‚ç‚¹çš„åœ°å€ï¼Œæ‰€ä»¥<strong>é“¾è¡¨æ•°æ®ç»“æ„ä¸»è¦çš„å†…æ¶µï¼Œå…¶å®åªéœ€è¦ä½¿ç”¨ä¸€ä¸ªèŠ‚ç‚¹å³å¯è¡¨ç¤ºå‡ºæ¥</strong>ï¼Œç”¨è¿™ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‰¾åˆ°æ‰€æœ‰å…¶ä»–çš„èŠ‚ç‚¹ã€‚</p><p>æ‰€ä»¥æ•°æ®ç»“æ„å®šä¹‰å¦‚ä¸‹ï¼š</p><pre><code class=\"language-c++\">    template&lt;typename T&gt;\n    class list{\n        protected:\n            typedef __list_node&lt;T&gt; list_node; // æ˜¾ç¤ºå®šä¹‰list_nodeç±»å‹\n            typedef allocator&lt;list_node&gt; nodeAllocator; // å®šä¹‰allocatorç±»å‹\n        public:\n            typedef T                  value_type;\n            typedef T&amp;                 reference;\n            typedef value_type*        pointer;\n            typedef list_node*         link_type;\n            typedef const value_type*  const_pointer;\n            typedef size_t             size_type;\n        public:\n            typedef __list_iterator&lt;value_type&gt; iterator; // è¿­ä»£å™¨ç±»å‹é‡å†™\n        private:\n            link_type node; // åªè¦ä¸€ä¸ªæŒ‡é’ˆï¼Œä¾¿å¯è¡¨ç¤ºæ•´ä¸ªç¯çŠ¶åŒå‘é“¾è¡¨\n            // ......\n    }\n</code></pre><p>è¿™æ®µä»£ç çœ‹èµ·æ¥æ¯”è¾ƒé•¿ï¼Œå…¶å®å¤§éƒ¨åˆ†æ˜¯ä¸€äº›ç±»å‹å®šä¹‰ï¼Œæ¯”å¦‚ç®€å†™äº†å¸¦æ³›å‹çš„èŠ‚ç‚¹ç±»å‹ï¼Œæ›´å¤šæ˜¯ä¸ºäº†ä¿è¯è¯­ä¹‰æ¸…æ™°å’Œå¯è¯»ã€‚æˆ‘ä»¬çœŸæ­£è¦å…³æ³¨çš„åªæœ‰privateçš„æˆå‘˜å˜é‡ nodeï¼Œäº‹å®ä¸Šï¼Œè¿™ä¸€ä¸ªèŠ‚ç‚¹å°±å¯ä»¥è¡¨ç¤ºæ•´ä¸ªç¯çŠ¶åŒå‘é“¾è¡¨ã€‚</p><p>åœ¨å†…å­˜ä¸­çš„æ’å¸ƒæ–¹å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br>\n<img src=\"https://static001.geekbang.org/resource/image/d0/62/d090e6a6c8ff2e4f6da3b6d5a2c48b62.jpg?wh=1920x1028\" alt=\"å›¾ç‰‡\"></p><p>æ¯ä¸ªé“¾è¡¨æ•°æ®ç»“æ„ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ª<strong>è™šæ‹ŸèŠ‚ç‚¹çš„æˆå‘˜å˜é‡nodeï¼Œç”¨äºæ ‡è®°è¿™æ•´ä¸ªå¾ªç¯é“¾è¡¨çš„é¦–å°¾è¿æ¥å¤„</strong>ï¼Œå®ƒæ—¢æ˜¯æ•´ä¸ªé“¾è¡¨çš„å¼€å§‹ï¼Œä¹Ÿæ˜¯æ•´ä¸ªé“¾è¡¨çš„ç»“å°¾ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªè™šæ‹ŸèŠ‚ç‚¹çš„pre æŒ‡å‘é“¾è¡¨çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œå®ƒçš„nextæŒ‡å‘é“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p><p>æ‰€ä»¥é“¾è¡¨åˆå§‹åŒ–å®¹é‡ä¸ºé›¶çš„æ—¶å€™ï¼Œæ˜¾ç„¶åªæœ‰ä¸€ä¸ªå‰åæŒ‡é’ˆéƒ½æŒ‡å‘è‡ªå·±çš„è™šæ‹ŸèŠ‚ç‚¹ã€‚</p><p>è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªéå¸¸å·§å¦™çš„è®¾è®¡ï¼Œæˆ‘ä»¬ä¼šè®©end()è¿­ä»£å™¨æŒ‡å‘è¿™ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œbegin()åˆ™ä¼šæŒ‡å‘è™šæ‹ŸèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿™å®Œç¾ç¬¦åˆè¿­ä»£å™¨å‰é—­åå¼€çš„è¯­ä¹‰ã€‚</p><p>å› ä¸ºend()èŠ‚ç‚¹æŒ‡å‘çš„æ˜¯ä¸€ä¸ªå¹¶ä¸çœŸå®å­˜å‚¨æ•°æ®çš„å…ƒç´ ï¼Œæ˜¯æ°¸è¿œå–ä¸åˆ°å€¼çš„ï¼›è€Œå¯¹åº”çš„begin()ï¼Œåœ¨é“¾è¡¨ä¸ç©ºçš„æ—¶å€™ï¼ŒæŒ‡å‘æ­£æ˜¯é“¾è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚å› æ­¤è¦éå†é“¾è¡¨æ‰€æœ‰çš„å…ƒç´ çš„æ—¶å€™ï¼Œå°±ä¼šå†™å‡ºè¿™æ ·çš„ä»£ç ï¼š</p><pre><code class=\"language-c++\">for (std::list&lt;int&gt;::iterator it=mylist.begin(); it != mylist.end(); ++it)\n    std::cout &lt;&lt; ' ' &lt;&lt; *it;\n</code></pre><p>æˆ‘ä»¬åœ¨åˆ¤æ–­æ˜¯å¦éå†åˆ°ç»ˆç‚¹çš„ä»£ç ï¼Œå°±å’Œvectorä¸€æ ·ï¼Œå†™çš„æ˜¯ it != mylist.end() ã€‚</p><h2>é“¾è¡¨åŸºæœ¬æ“ä½œçš„å®ç°</h2><p>å¥½äº†ï¼Œç»ˆäºæ¥åˆ°æœ€æ¿€åŠ¨äººå¿ƒçš„éƒ¨åˆ†ï¼šé“¾è¡¨çš„åŸºæœ¬æ“ä½œã€‚</p><p>æœ‰äº†åˆšæ‰çš„æ•°æ®ç»“æ„å’Œè¿­ä»£å™¨ï¼Œå¾ˆå®¹æ˜“è®¿é—®åˆ°é“¾è¡¨çš„èŠ‚ç‚¹äº†ï¼Œæˆ‘ä»¬å¼€å§‹å®ç°é“¾è¡¨çš„å¦å¤–å‡ ä¸ªä¸»è¦æ“ä½œï¼šåˆå§‹åŒ–é“¾è¡¨ã€æ’å…¥èŠ‚ç‚¹ã€åˆ é™¤èŠ‚ç‚¹ã€‚</p><p>å…ˆæ¥çœ‹ä¸€åˆ‡çš„å¼€å§‹ï¼Œé“¾è¡¨æ˜¯å¦‚ä½•åˆå§‹åŒ–çš„ã€‚</p><p>ç›¸æ¯”æ•°ç»„å…¶å®è¦ç®€å•ä¸€äº›ï¼Œå› ä¸ºå‰é¢è¯´äº†ï¼Œä¸€ä¸ªç©ºçš„é“¾è¡¨ï¼Œå°±åªåŒ…å«äº†ä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼ŒSTLå†…ç½®çš„ç©ºé—´é…ç½®å™¨å¾ˆå®¹æ˜“å¤„ç†è¿™ä¸ªèŠ‚ç‚¹çš„å†…å­˜ç”³è¯·ã€‚åˆå§‹åŒ–ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class=\"language-c++\">void empty_initialize() {\n  node = get_node(0);\n  node-&gt;next = node; // next æŒ‡é’ˆæŒ‡å‘è‡ªèº«\n  node-&gt;prev = node; // prev æŒ‡é’ˆæŒ‡å‘è‡ªèº«\n}\n\nlink_type get_node() { return list_node_allocator:allocate(); }\n</code></pre><p>å½“é“¾è¡¨ä¸ºç©ºæ—¶ï¼Œè™šæ‹ŸèŠ‚ç‚¹å‰ã€åæŒ‡é’ˆéƒ½æŒ‡å‘è‡ªèº«ï¼Œä»£ç å°±æ˜¯å¦‚æ­¤ç®€æ´ç›´è§‚ã€‚</p><p>é‚£æ€ä¹ˆå¾€é“¾è¡¨é‡Œæ’å…¥æ•°æ®å‘¢ï¼Œæˆ‘ä»¬ä¸»è¦çœ‹ <code>insert</code> æ–¹æ³•æ˜¯å¦‚ä½•å®ç°çš„ï¼Œå®ƒç”¨æ¥åœ¨é“¾è¡¨ä¸­çš„ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹åé¢æ’å…¥æ•°æ®ã€‚æœ‰äº†insertï¼Œæˆ‘ä»¬å½“ç„¶ä¹Ÿèƒ½å¾ˆå®¹æ˜“å®ç° push_back ç­‰å¸¸ç”¨æ–¹æ³•ã€‚</p><p>é‚£ insert éœ€è¦ä¼ å…¥å“ªäº›å‚æ•°å‘¢ï¼Ÿ</p><p>å‰é¢ä¹Ÿè¯´äº†ï¼Œç›¸æ¯”æ•°ç»„ï¼Œé“¾è¡¨çš„æœ€å¤§ä¼˜åŠ¿ä¹‹ä¸€å°±æ˜¯å®ƒçš„æ’å…¥å’Œåˆ é™¤æ•ˆç‡ä¼šé«˜æ•ˆå¾—å¤šã€‚è¿™æ­£æ˜¯å› ä¸ºå†…å­˜ç©ºé—´ä¸æ˜¯çº¿æ€§æ’åˆ—çš„ï¼Œæ‰€ä»¥æƒ³è¦æ’å…¥æ•°æ®ï¼Œæˆ‘ä»¬åªéœ€è¦ä¿®æ”¹æŒ‡å®šä½ç½®çš„å‰ã€åæŒ‡é’ˆçš„æŒ‡å‘ï¼ŒæŠŠæ–°çš„èŠ‚ç‚¹åœ¨é€»è¾‘ä¸Šæ’å…¥æŸä¸ªä½ç½®å°±å¯ä»¥äº†ã€‚</p><p>æ‰€ä»¥ insertéœ€è¦<strong>ä¸¤ä¸ªå…¥å‚ï¼Œä¸€ä¸ªæ˜¯æ’å…¥ä½ç½®ï¼Œç±»å‹æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼›å¦ä¸€ä¸ªæ˜¯æ’å…¥çš„å€¼</strong>ã€‚å…¶å®ç°æ–¹æ³•å¦‚ä¸‹ï¼š</p><pre><code class=\"language-c++\">iterator insert(iterator position, const T&amp; x) {\n  lik_type tmp = create_node(x); // åˆ›å»ºä¸€ä¸ªä¸´æ—¶èŠ‚ç‚¹\n  tmp-&gt;next = position.node; // å°†è¯¥èŠ‚ç‚¹çš„åç»§æŒ‡é’ˆæŒ‡å‘å½“å‰ä½ç½®çš„èŠ‚ç‚¹\n  tmp-&gt;prev = position.node-&gt;prev; // å°†è¯¥èŠ‚ç‚¹çš„å‰é©±æŒ‡é’ˆæŒ‡å‘å½“å‰ä½ç½®çš„å‰é©±èŠ‚ç‚¹\n  (link_type(position.node-&gt;prev))-&gt;next = tmp; // å°†å‰é©±èŠ‚ç‚¹æœ¬æ¥æŒ‡å‘å½“å‰èŠ‚ç‚¹çš„åç»§æŒ‡é’ˆæ”¹ä¸ºæŒ‡å‘è¯¥ä¸´æ—¶èŠ‚ç‚¹\n  position.node-&gt;prev = tmp; // åŒæ ·ï¼Œå½“å‰ä½ç½®çš„å‰é©±æŒ‡é’ˆä¹Ÿè¦ä¿®æ”¹ä¸ºæŒ‡å‘è¯¥ä¸´æ—¶èŠ‚ç‚¹\n  return tmp;\n}\n</code></pre><p>ä»£ç å…¶å®å¹¶ä¸å¤æ‚ï¼Œä½†è®¸å¤šæ–°æ‰‹è¿˜æ˜¯éœ€è¦èŠ±ä¸€äº›æ—¶é—´ç†è§£ä¸€ä¸‹çš„ï¼Œæ•´ä¸ªè¿‡ç¨‹æœ‰ç‚¹åƒâ€œç©¿é’ˆå¼•çº¿â€ã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/fa/13/fa87760aeb6af98ab9e9a272410dde13.jpg?wh=1920x1028\" alt=\"å›¾ç‰‡\"></p><p>å…ˆåˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹tmpï¼Œå°†è¯¥èŠ‚ç‚¹çš„å‰é©±åç»§åˆ†åˆ«æŒ‡å‘å½“å‰positionçš„å‰é©±å’Œpositionæœ¬èº«ï¼›å†å°†å½“å‰positionçš„åç»§å’Œposition-&gt;prevçš„å‰é©±æŒ‡å‘è¿™ä¸ªæ–°åˆ›å»ºçš„èŠ‚ç‚¹ã€‚è¿™æ ·æˆ‘ä»¬å°±å®Œæˆäº†é“¾è¡¨èŠ‚ç‚¹çš„æ’å…¥ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/7e/c3/7e4ae3e8b7a12eac2c4ca469a40261c3.jpg?wh=1920x787\" alt=\"å›¾ç‰‡\"></p><p>è¿™äº›æ“ä½œçš„é¡ºåºæ˜¯éå¸¸é‡è¦çš„ã€‚ä½ å¯ä»¥ç†è§£æˆè¦<strong>å…ˆæŠŠæ–°çš„èŠ‚ç‚¹å…¨æ¥ä¸Šå»ï¼Œæ‰èƒ½æŠŠæ—§æŒ‡é’ˆä¸€ä¸€æ”¹è¿‡æ¥</strong>ã€‚</p><p>å¦‚æœè°ƒæ¢äº†æ“ä½œçš„é¡ºåºï¼Œæ¯”å¦‚å…ˆå°†å½“å‰positionçš„åç»§æŒ‡å‘ä¸´æ—¶èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è®¿é—®ä¸åˆ°æ’å…¥èŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹äº†ã€‚å»ºè®®ä½ ç”¨çº¸ç¬”å¤šæ¨¡æ‹Ÿå‡ éæ•´ä¸ªæ’å…¥çš„è¿‡ç¨‹ï¼Œå¤šç»ƒä¹ å‡ éè‡ªç„¶å°±èƒ½æŒæ¡äº†ã€‚</p><p>è€Œé“¾è¡¨çš„åˆ é™¤æ“ä½œæ˜¯ç±»ä¼¼çš„ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯è¿›è¡Œä¸€ç»„å’Œæ’å…¥ç›¸åçš„æ“ä½œã€‚æ‰¾åˆ°æŸä¸ªéœ€è¦åˆ é™¤çš„èŠ‚ç‚¹ä½ç½®ï¼Œå°†è¯¥èŠ‚ç‚¹çš„åç»§å’Œå‰é©±ç›´æ¥å…³è”åœ¨ä¸€èµ·ï¼Œæœ€åé‡Šæ”¾æ‰å¾…åˆ é™¤èŠ‚ç‚¹çš„ç©ºé—´å³å¯ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class=\"language-c++\">iterator erase(iterator position) {\n  link_type next_node = link_type(position.node-&gt;next);\n  link_type prev_node = link_type(position.node-&gt;prev);\n  prev_node-&gt;next = next_node;\n  next_node-&gt;prev = prev_node;\n  destroy_node(position.node);\n  return iterator(next_node);\n}\n</code></pre><p>æœ‰äº† insert å’Œ eraseæ“ä½œï¼Œå…¶ä»–ä¸€äº›åŸºç¡€æ“ä½œå½“ç„¶ä¹Ÿå¾ˆå®¹æ˜“è¡ç”Ÿå‡ºæ¥ã€‚æ¯”å¦‚pop_front/pop_back/push_backï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æŒ‡å®šçš„ä½ç½®è°ƒç”¨ erase å’Œ insert å³å¯ï¼Œé¦–å°¾çš„ä½ç½®éƒ½å¯ä»¥é€šè¿‡beginã€endç­‰è¿­ä»£å™¨æ¥å£å¿«é€Ÿå–åˆ°ï¼š</p><pre><code class=\"language-c++\">void pop_front() { erase(begin()) };\nvoid pop_back() {\n  iterator tmp = end(); \n  erase(--tmp);\n}\n\npush_back(const T&amp; x) { insert(end(), x); }\n</code></pre><p>è¿™ä¸‰ä¸ªæ“ä½œéƒ½æ˜¯åœ¨O(1)æ—¶é—´å¤æ‚åº¦å†…å¯ä»¥å®Œæˆçš„ï¼Œæ¯”vectorå¯¹åº”çš„æ“ä½œO(n)çš„æ—¶é—´å¤æ‚åº¦è¦é«˜æ•ˆå¾ˆå¤šã€‚</p><p>listå…¶å®è¿˜æ”¯æŒsortç­‰æ“ä½œï¼Œå€ŸåŠ©å†…éƒ¨å®ç°çš„transferæ–¹æ³•å’Œå½’å¹¶æ’åºçš„æ€æƒ³ï¼ŒåŒæ ·å¯ä»¥åšåˆ°O(n*logn)çš„å¤æ‚åº¦ã€‚ä½†å®ç°æ¯”è¾ƒå¤æ‚ï¼Œå¦‚æœä½ æœ‰å…´è¶£ï¼Œå¯ä»¥å»çœ‹è‡ªå·±æœç´¢ä¸€ä¸‹ç›¸å…³çš„èµ„æ–™ï¼ŒåŠ›æ‰£ä¸Šæœ‰ä¸€é“å…³äºé“¾è¡¨æ’åºçš„<a href=\"https://leetcode-cn.com/problems/sort-list/solution/sort-list-gui-bing-pai-xu-lian-biao-by-jyd\">é¢˜ç›®</a>ä¹Ÿå¯ä»¥ç»ƒä¹ ã€‚</p><h2>æ€»ç»“</h2><p>é“¾è¡¨ï¼Œç›¸æ¯”äºæ•°ç»„ï¼Œæœ‰æ›´å¥½çš„çµæ´»æ€§å’Œæ›´ä½çš„æ’å…¥ã€åˆ é™¤çš„å¤æ‚åº¦ï¼Œæ›´åŠ é€‚ç”¨äºæŸ¥è¯¢ç´¢å¼•è¾ƒå°‘ã€éå†ã€æ’å…¥ã€åˆ é™¤æ“ä½œè¾ƒå¤šçš„åœºæ™¯ï¼Œæ‰€ä»¥è¦é¢‘ç¹åœ¨å®¹å™¨ä¸­é—´æŸä¸ªä½ç½®æ’å…¥å…ƒç´ çš„æ—¶å€™ï¼Œå°±ç»å¸¸ç”¨åˆ°ï¼Œæ¯”å¦‚åœ¨LRUå’Œæ“ä½œç³»ç»Ÿè¿›ç¨‹è°ƒåº¦çš„åœºæ™¯ä¸‹å°±éƒ½ä¼šç”¨åˆ°ã€‚</p><p>é“¾è¡¨æ“ä½œåœ¨å®ç°çš„è¿‡ç¨‹ä¸­ä¸»è¦éœ€è¦æ³¨æ„æŒ‡é’ˆä¹‹é—´çš„å˜æ¢é¡ºåºï¼Œä½ å¯ä»¥åœ¨è„‘æµ·é‡Œå¤šæ¨¡æ‹Ÿå‡ éè¿™æ ·çš„è¿‡ç¨‹ï¼Œå¹¶å°è¯•åœ¨ä¸å€ŸåŠ©å‚è€ƒèµ„æ–™çš„å‰æä¸‹è‡ªå·±å®ç°å‡ æ¬¡ï¼Œè¿™ä¹Ÿæ˜¯é¢è¯•å®˜åœ¨ç®—æ³•é¢è¯•ä¸­ç»å¸¸ä¼šè€ƒå¯Ÿçš„ç‚¹ã€‚</p><h2>è¯¾åä½œä¸š</h2><p>ä»Šå¤©æ²¡æœ‰è®²é“¾è¡¨ä¸­findæ–¹æ³•çš„å®ç°ï¼Œè¿™ä¹Ÿæ˜¯STLåœ¨å„ç§å®¹å™¨ä¸­éƒ½ä¼šæä¾›çš„ä¸€ä¸ªé€šç”¨æ–¹æ³•ã€‚è¯¥æ–¹æ³•ç”¨äºå¯»æ‰¾å®¹å™¨ä¸­æŸä¸ªå€¼çš„è¿­ä»£å™¨ï¼Œæ¯”å¦‚é“¾è¡¨ 1-&gt;5-&gt;3-&gt;4 ä¸­ï¼Œè°ƒç”¨find(3)ï¼Œä½ åº”è¯¥è¿”å›çš„å°±æ˜¯é“¾è¡¨ä¸­çš„ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹çš„è¿­ä»£å™¨ã€‚ä½ å¯ä»¥æ¥å®ç°ä¸€ä¸‹findæ–¹æ³•å—ï¼Ÿæ—¶é—´å¤æ‚åº¦åˆæ˜¯å¤šå°‘å‘¢ï¼Ÿ</p><p>æ¬¢è¿ç•™è¨€ä¸æˆ‘è®¨è®ºã€‚å¦‚æœä½ è§‰å¾—æ–‡ç« æœ‰å¸®åŠ©çš„è¯å‘¢ï¼Œä¹Ÿæ¬¢è¿ä½ ç‚¹èµè½¬å‘ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ï½</p>","comments":[{"had_liked":false,"id":326209,"user_name":"Paul Shan","can_delete":false,"product_type":"c1","uid":1593140,"ip_address":"","ucode":"32D99989028284","user_header":"","comment_is_top":false,"comment_ctime":1639434052,"is_pvip":false,"replies":[{"id":"118550","content":"è¯´çš„å¾ˆå¥½","user_name":"ä½œè€…å›å¤","comment_id":326209,"uid":"1107505","ip_address":"","utype":1,"ctime":1639538894,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"14524335940","product_id":100100901,"comment_content":"é“¾è¡¨æ”¾å¼ƒäº†æ•°ç»„è§„æ•´è¿ç»­çš„å¸ƒå±€ï¼Œåªå­˜å‚¨ä¸‹ä¸€ä¸ªæˆ–è€…ä¸Šä¸€ä¸ªèŠ‚ç‚¹æŒ‡é’ˆï¼Œå¸¦æ¥äº†æ’å…¥å’Œåˆ é™¤çš„é«˜æ•ˆï¼Œä¹Ÿå……åˆ†åˆ©ç”¨äº†å†…å­˜çš„ç¢ç‰‡ï¼Œä½†æ˜¯ç‰ºç‰²äº†å…¨å±€æŸ¥è¯¢çš„æ•ˆç‡ã€‚<br>","like_count":4,"discussions":[{"author":{"id":1107505,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e6/31/5b8800fb.jpg","nickname":"å¾®æ‰°ç†è®º","note":"","ucode":"55D0542FA602D9","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538841,"discussion_content":"è¯´çš„å¾ˆå¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639538894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":326210,"user_name":"webmin","can_delete":false,"product_type":"c1","uid":1047014,"ip_address":"","ucode":"98B0CA882454E8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f9/e6/47742988.jpg","comment_is_top":false,"comment_ctime":1639438424,"is_pvip":true,"replies":[{"id":"118551","content":"æˆ‘è§‰å¾—è¿™ä¸ªå’Œé“¾è¡¨è¿˜æ˜¯æœ‰æœ¬è´¨åŒºåˆ«çš„å“ˆï¼›<br>æ•°ç»„åŸºäºå…ƒç´ ä¸‹è¡¨è®¿é—®æ•°æ®å¯ä»¥åšåˆ°O(1)æ˜¯å› ä¸ºå¯ä»¥ç›´æ¥è®¡ç®—å‡ºå…ƒç´ åœ¨å†…å­˜ä¸­çš„åœ°å€ï¼›è€Œé“¾è¡¨åªèƒ½é€šè¿‡éå†å®ç°è¿™ä¸€ç‚¹ã€‚","user_name":"ä½œè€…å›å¤","comment_id":326210,"uid":"1107505","ip_address":"","utype":1,"ctime":1639538967,"user_name_real":"ç¼–è¾‘"}],"discussion_count":3,"race_medal":0,"score":"10229373016","product_id":100100901,"comment_content":"æ•°ç»„æ˜¯ä¸€ç§ç‰¹æ®Šå½¢å¼çš„é“¾è¡¨ï¼ŒæŠŠé“¾æ¥ä»»æ„è·³è½¬å‹ç¼©ä¸ºæ¸¸æ ‡å®šä½ã€‚","like_count":2,"discussions":[{"author":{"id":1107505,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e6/31/5b8800fb.jpg","nickname":"å¾®æ‰°ç†è®º","note":"","ucode":"55D0542FA602D9","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538842,"discussion_content":"æˆ‘è§‰å¾—è¿™ä¸ªå’Œé“¾è¡¨è¿˜æ˜¯æœ‰æœ¬è´¨åŒºåˆ«çš„å“ˆï¼›\næ•°ç»„åŸºäºå…ƒç´ ä¸‹è¡¨è®¿é—®æ•°æ®å¯ä»¥åšåˆ°O(1)æ˜¯å› ä¸ºå¯ä»¥ç›´æ¥è®¡ç®—å‡ºå…ƒç´ åœ¨å†…å­˜ä¸­çš„åœ°å€ï¼›è€Œé“¾è¡¨åªèƒ½é€šè¿‡éå†å®ç°è¿™ä¸€ç‚¹ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1639538967,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1047014,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f9/e6/47742988.jpg","nickname":"webmin","note":"","ucode":"98B0CA882454E8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1107505,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e6/31/5b8800fb.jpg","nickname":"å¾®æ‰°ç†è®º","note":"","ucode":"55D0542FA602D9","race_medal":0,"user_type":2,"is_pvip":true},"discussion":{"id":538897,"discussion_content":"ç‰¹æ®Šçš„é“¾è¡¨çš„ç»„æˆåœ¨å†…å­˜ä¸­æ˜¯é¡ºåºçš„ï¼Œä¸”æ¯ä¸ªå…ƒç´ ç±»å‹ç›¸åŒï¼Œè¿™æ ·å°±å¯ä»¥è®¡ç®—å‡ºè·³è½¬ä½ç½®ã€‚åªæ˜¯è¿™æ—¶çš„nextæŒ‡é’ˆå°±æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639551862,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":538842,"ip_address":""},"score":538897,"extra":""}]},{"author":{"id":1206751,"avatar":"https://static001.geekbang.org/account/avatar/00/12/69/df/2dca1305.jpg","nickname":"Healtheon","note":"","ucode":"B564B1FC4456E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581273,"discussion_content":"æœ¬è´¨ä¸Šéƒ½ä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658682128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333912,"user_name":"æ–°ä¸–ç•Œ","can_delete":false,"product_type":"c1","uid":1079495,"ip_address":"","ucode":"4473DC1505F158","user_header":"https://static001.geekbang.org/account/avatar/00/10/78/c7/083a3a0b.jpg","comment_is_top":false,"comment_ctime":1644576316,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5939543612","product_id":100100901,"comment_content":"ç¬¬ä¸€å¤„ä»£ç ä½ç½®ï¼Œå‰é©±èŠ‚ç‚¹å’Œåç»§èŠ‚ç‚¹æ³¨é‡Šå†™åäº†","like_count":2},{"had_liked":false,"id":326907,"user_name":"vcjmhg","can_delete":false,"product_type":"c1","uid":1526461,"ip_address":"","ucode":"B508D1E9B3F974","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/j24oyxHcpB5AMR9pMO6fITqnOFVOncnk2T1vdu1rYLfq1cN6Sj7xVrBVbCvHXUad2MpfyBcE4neBguxmjIxyiaQ/132","comment_is_top":false,"comment_ctime":1639743675,"is_pvip":false,"replies":[{"id":"119170","content":"æ²¡é”™ çº¢é»‘æ ‘æˆ‘ä»¬ä¹‹åä¹Ÿä¼šå±•å¼€è®²è§£<br>å¯ä»¥+V: constant_variation ä¸€èµ·äº¤æµï½","user_name":"ä½œè€…å›å¤","comment_id":326907,"uid":"1107505","ip_address":"","utype":1,"ctime":1640142779,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1639743675","product_id":100100901,"comment_content":"æœ€å®¹æ˜“æƒ³åˆ°çš„æ–¹æ³•å°±æ˜¯ä»èµ·ç‚¹è°ƒç”¨è¿­ä»£å™¨è¿›è¡Œéå†ï¼Œéå†è¿‡ç¨‹ä¸­æ¯”è¾ƒèŠ‚ç‚¹å€¼ä¸3æ˜¯å¦ç›¸åŒï¼Œå¦‚æœç›¸åŒåˆ™è¿”å›è¯¥ä½ç½®è¿­ä»£å™¨ï¼Œå¦åˆ™ç»§ç»­å‘åéå†ï¼›æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œå¦‚æœé“¾è¡¨æœ¬èº«æœ‰åºï¼Œå¯è€ƒè™‘è¿›è¡Œä¼˜åŒ–ï¼Œæ¯”å¦‚ç”¨çº¢é»‘æ ‘ï¼Œæ—¶é—´å¤æ‚åº¦å¯é™ä½è‡³O(logn)ã€‚","like_count":0,"discussions":[{"author":{"id":1107505,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e6/31/5b8800fb.jpg","nickname":"å¾®æ‰°ç†è®º","note":"","ucode":"55D0542FA602D9","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540725,"discussion_content":"æ²¡é”™ çº¢é»‘æ ‘æˆ‘ä»¬ä¹‹åä¹Ÿä¼šå±•å¼€è®²è§£\nå¯ä»¥+V: constant_variation ä¸€èµ·äº¤æµï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640142779,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":326268,"user_name":"å‹","can_delete":false,"product_type":"c1","uid":2536820,"ip_address":"","ucode":"972A4333A8B101","user_header":"https://static001.geekbang.org/account/avatar/00/26/b5/74/cd80b9f4.jpg","comment_is_top":false,"comment_ctime":1639453871,"is_pvip":false,"replies":[{"id":"118547","content":"å—¯å—¯ ä¸è¿‡é“¾è¡¨æœ¬èº«è¦æœ‰åºæ˜¯ä¸€ä¸ªå¾ˆé«˜çš„è¦æ±‚å“ˆ è¿™ç§æ—¶å€™ä¸€èˆ¬ä¼šé‡‡ç”¨çº¢é»‘æ ‘æˆ–è€…è·³è¡¨å®ç°","user_name":"ä½œè€…å›å¤","comment_id":326268,"uid":"1107505","ip_address":"","utype":1,"ctime":1639538834,"user_name_real":"ç¼–è¾‘"}],"discussion_count":2,"race_medal":0,"score":"1639453871","product_id":100100901,"comment_content":"æ˜¯O(n)ï¼Œä½†å¦‚æœä¸€ä¸ªé“¾è¡¨è¦ä¿è¯æœ‰åº é‚£ä¹ˆæˆ‘å¯ä»¥åœ¨findä¹‹åä¿å­˜ä¸€ä¸‹ä¸Šæ¬¡findçš„æŒ‡é’ˆä½ç½® ç„¶åä¸‹æ¬¡findå†³å®šå¾€å‰æˆ–è€…å¾€å ä¸è¿‡è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ€è€ƒ æ€ä¹ˆæŠ˜è…¾éƒ½æ˜¯O(N)","like_count":0,"discussions":[{"author":{"id":1107505,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e6/31/5b8800fb.jpg","nickname":"å¾®æ‰°ç†è®º","note":"","ucode":"55D0542FA602D9","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538838,"discussion_content":"å—¯å—¯ ä¸è¿‡é“¾è¡¨æœ¬èº«è¦æœ‰åºæ˜¯ä¸€ä¸ªå¾ˆé«˜çš„è¦æ±‚å“ˆ è¿™ç§æ—¶å€™ä¸€èˆ¬ä¼šé‡‡ç”¨çº¢é»‘æ ‘æˆ–è€…è·³è¡¨å®ç°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639538835,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2536820,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b5/74/cd80b9f4.jpg","nickname":"å‹","note":"","ucode":"972A4333A8B101","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1107505,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e6/31/5b8800fb.jpg","nickname":"å¾®æ‰°ç†è®º","note":"","ucode":"55D0542FA602D9","race_medal":0,"user_type":2,"is_pvip":true},"discussion":{"id":538863,"discussion_content":"å—¯å—¯ğŸ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639540717,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":538838,"ip_address":""},"score":538863,"extra":""}]}]},{"had_liked":false,"id":326240,"user_name":"é‚£æ—¶åˆ»","can_delete":false,"product_type":"c1","uid":1150927,"ip_address":"","ucode":"B0D150856C3A4A","user_header":"https://static001.geekbang.org/account/avatar/00/11/8f/cf/890f82d6.jpg","comment_is_top":false,"comment_ctime":1639448439,"is_pvip":false,"replies":[{"id":"118549","content":"ä½ è¯´çš„æ²¡é”™ æ„Ÿè°¢æŒ‡è¯","user_name":"ä½œè€…å›å¤","comment_id":326240,"uid":"1107505","ip_address":"","utype":1,"ctime":1639538876,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1639448439","product_id":100100901,"comment_content":"begin() åˆ™ä¼šæŒ‡å‘è™šæ‹ŸèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿™å®Œç¾ç¬¦åˆè¿­ä»£å™¨å‰å¼€åé—­çš„è¯­ä¹‰ã€‚ è¿™é‡Œè²Œä¼¼åº”è¯¥æ˜¯å‰é—­åå¼€ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1107505,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e6/31/5b8800fb.jpg","nickname":"å¾®æ‰°ç†è®º","note":"","ucode":"55D0542FA602D9","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538840,"discussion_content":"ä½ è¯´çš„æ²¡é”™ æ„Ÿè°¢æŒ‡è¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639538876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}