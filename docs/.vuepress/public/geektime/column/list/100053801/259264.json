{"id":259264,"title":"09 | å¦‚ä½•ç”¨ä»¿å°„å˜æ¢å¯¹å‡ ä½•å›¾å½¢è¿›è¡Œåæ ‡å˜æ¢ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æœˆå½±ã€‚</p><p>å‰é¢ä¸¤èŠ‚è¯¾ï¼Œæˆ‘ä»¬å­¦ä¹ äº†ç”¨å‘é‡è¡¨ç¤ºçš„é¡¶ç‚¹ï¼Œæ¥æè¿°æ›²çº¿å’Œå¤šè¾¹å½¢çš„æ–¹æ³•ã€‚ä½†æ˜¯åœ¨å®é™…ç»˜åˆ¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨ç”»å¸ƒä¸Šç»˜åˆ¶è®¸å¤šè½®å»“ç›¸åŒçš„å›¾å½¢ï¼Œéš¾é“è¿™ä¹Ÿéœ€è¦æˆ‘ä»¬é‡å¤åœ°å»è®¡ç®—æ¯ä¸ªå›¾å½¢çš„é¡¶ç‚¹å—ï¼Ÿå½“ç„¶ä¸éœ€è¦ã€‚æˆ‘ä»¬åªéœ€è¦åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„å‡ ä½•è½®å»“ï¼Œç„¶åé€šè¿‡<strong>ä»¿å°„å˜æ¢</strong>æ¥æ”¹å˜å‡ ä½•å›¾å½¢çš„ä½ç½®ã€å½¢çŠ¶ã€å¤§å°å’Œè§’åº¦ã€‚</p><p>ä»¿å°„å˜æ¢æ˜¯æ‹“æ‰‘å­¦å’Œå›¾å½¢å­¦ä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„åŸºç¡€æ¦‚å¿µã€‚åˆ©ç”¨å®ƒï¼Œæˆ‘ä»¬æ‰èƒ½åœ¨å¯è§†åŒ–åº”ç”¨ä¸­å¿«é€Ÿç»˜åˆ¶å‡ºå½¢æ€ã€ä½ç½®ã€å¤§å°å„å¼‚çš„ä¼—å¤šå‡ ä½•å›¾å½¢ã€‚æ‰€ä»¥ï¼Œè¿™ä¸€èŠ‚è¯¾ï¼Œæˆ‘ä»¬å°±æ¥è¯´ä¸€è¯´ä»¿å°„å˜æ¢çš„æ•°å­¦åŸºç¡€å’ŒåŸºæœ¬æ“ä½œï¼Œå®ƒå‡ ä¹ä¼šè¢«åº”ç”¨åˆ°æˆ‘ä»¬åé¢è®²åˆ°çš„æ‰€æœ‰è§†è§‰å‘ˆç°çš„æ¡ˆä¾‹ä¸­ï¼Œæ‰€ä»¥ä½ ä¸€å®šè¦æŒæ¡ã€‚</p><h2>ä»€ä¹ˆæ˜¯ä»¿å°„å˜æ¢ï¼Ÿ</h2><p>ä»¿å°„å˜æ¢ç®€å•æ¥è¯´å°±æ˜¯â€œçº¿æ€§å˜æ¢+å¹³ç§»â€ã€‚å®é™…ä¸Šåœ¨å¹³å¸¸çš„Webå¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿç»å¸¸ä¼šç”¨åˆ°ä»¿å°„å˜æ¢ï¼Œæ¯”å¦‚ï¼Œå¯¹å…ƒç´ è®¾ç½®CSSçš„transformå±æ€§å°±æ˜¯å¯¹å…ƒç´ åº”ç”¨ä»¿å°„å˜æ¢ã€‚</p><p>å†è¯´å›åˆ°å‡ ä½•å›¾å½¢ï¼Œé’ˆå¯¹å®ƒçš„ä»¿å°„å˜æ¢å…·æœ‰ä»¥ä¸‹2ä¸ªæ€§è´¨ï¼š</p><ol>\n<li>ä»¿å°„å˜æ¢å‰æ˜¯ç›´çº¿æ®µçš„ï¼Œä»¿å°„å˜æ¢åä¾ç„¶æ˜¯ç›´çº¿æ®µ</li>\n<li>å¯¹ä¸¤æ¡ç›´çº¿æ®µaå’Œbåº”ç”¨åŒæ ·çš„ä»¿å°„å˜æ¢ï¼Œå˜æ¢å‰åçº¿æ®µé•¿åº¦æ¯”ä¾‹ä¿æŒä¸å˜</li>\n</ol><p>ç”±äºä»¿å°„å˜æ¢å…·æœ‰è¿™ä¸¤ä¸ªæ€§è´¨ï¼Œå› æ­¤å¯¹çº¿æ€§ç©ºé—´ä¸­çš„å‡ ä½•å›¾å½¢è¿›è¡Œä»¿å°„å˜æ¢ï¼Œå°±ç›¸å½“äºå¯¹å®ƒçš„æ¯ä¸ªé¡¶ç‚¹å‘é‡è¿›è¡Œä»¿å°„å˜æ¢ã€‚</p><!-- [[[read_end]]] --><p>é‚£å…·ä½“æ€ä¹ˆæ“ä½œå‘¢ï¼Ÿä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¥è¯¦ç»†è¯´è¯´ã€‚</p><h2>å‘é‡çš„å¹³ç§»ã€æ—‹è½¬ä¸ç¼©æ”¾</h2><p>å¸¸è§çš„ä»¿å°„å˜æ¢å½¢å¼åŒ…æ‹¬<strong>å¹³ç§»ã€æ—‹è½¬ã€ç¼©æ”¾</strong>ä»¥åŠå®ƒä»¬çš„ç»„åˆã€‚å…¶ä¸­ï¼Œå¹³ç§»å˜æ¢æ˜¯æœ€ç®€å•çš„ä»¿å°„å˜æ¢ã€‚å¦‚æœæˆ‘ä»¬æƒ³è®©å‘é‡P(x<sub>0</sub>, y<sub>0</sub>)æ²¿ç€å‘é‡Q(x<sub>1</sub>, y<sub>1</sub>)å¹³ç§»ï¼Œåªè¦å°†På’ŒQç›¸åŠ å°±å¯ä»¥äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/3b/b5/3b1afc9f056d4840cb111252bcc179b5.jpeg?wh=1920*320\" alt=\"\" title=\"å¹³ç§»åçš„å‘é‡pçš„åæ ‡\"></p><p><strong>æ¥ç€æ˜¯æ—‹è½¬å˜æ¢</strong>ã€‚å®é™…ä¸Šï¼Œæ—‹è½¬å˜æ¢æˆ‘ä»¬åœ¨ç¬¬5è¯¾æ¥è§¦è¿‡ï¼Œå½“æ—¶æˆ‘ä»¬æŠŠå‘é‡çš„æ—‹è½¬å®šä¹‰æˆäº†å¦‚ä¸‹çš„å‡½æ•°ï¼š</p><pre><code>class Vector2D {\n  ...  \n  rotate(rad) {\n    const c = Math.cos(rad),\n      s = Math.sin(rad);\n    const [x, y] = this;\n\n    this.x = x * c + y * -s;\n    this.y = x * s + y * c;\n\n    return this;\n  }\n}\n</code></pre><p>ä½†æ˜¯ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰è®¨è®ºè¿™ä¸ªå‡½æ•°æ˜¯æ€ä¹ˆæ¥çš„ï¼Œé‚£åœ¨è¿™é‡Œæˆ‘ä»¬é€šè¿‡ä¸‰è§’å‡½æ•°æ¥ç®€å•æ¨å¯¼ä¸€ä¸‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/91/18/914yy44e969c9f75f5413295eef29718.jpg?wh=1920*797\" alt=\"\"></p><p>å‡è®¾å‘é‡Pçš„é•¿åº¦ä¸ºrï¼Œè§’åº¦æ˜¯âºï¼Œç°åœ¨æˆ‘ä»¬è¦å°†å®ƒé€†æ—¶é’ˆæ—‹è½¬â¬è§’ï¼Œæ­¤æ—¶æ–°çš„å‘é‡Pâ€™çš„å‚æ•°æ–¹ç¨‹ä¸ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/73/1b/7383bf5a2529bc6b1687617769b6da1b.jpeg?wh=1920*373\" alt=\"\"></p><p>ç„¶åï¼Œå› ä¸ºrcosâºã€rsinâºæ˜¯å‘é‡PåŸå§‹çš„åæ ‡x<sub>0</sub>ã€y<sub>0</sub>ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠåæ ‡ä»£å…¥åˆ°ä¸Šé¢çš„å…¬å¼ä¸­ï¼Œå°±ä¼šå¾—åˆ°å¦‚ä¸‹çš„å…¬å¼ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/88/f4/88aea77872789dfb0322db466315f5f4.jpeg?wh=1920*352\" alt=\"\"></p><p>æœ€åï¼Œæˆ‘ä»¬å†å°†å®ƒå†™æˆçŸ©é˜µå½¢å¼ï¼Œå°±ä¼šå¾—åˆ°ä¸€ä¸ªæ—‹è½¬çŸ©é˜µã€‚è‡³äºä¸ºä»€ä¹ˆè¦å†™æˆçŸ©é˜µå½¢å¼ï¼Œæˆ‘åé¢ä¼šè®²ï¼Œè¿™é‡Œä½ å…ˆè®°ä½è¿™ä¸ªæ—‹è½¬çŸ©é˜µçš„å…¬å¼å°±å¯ä»¥äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e5/a2/e52cae6173e2b4056e9aa752a93076a2.jpeg?wh=1920*302\" alt=\"\"></p><p><strong>ç„¶åæ˜¯ç¼©æ”¾å˜æ¢</strong>ã€‚ç¼©æ”¾å˜æ¢ä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è®©å‘é‡ä¸æ ‡é‡ï¼ˆæ ‡é‡åªæœ‰å¤§å°ã€æ²¡æœ‰æ–¹å‘ï¼‰ç›¸ä¹˜ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/46/72/46d1bb8b507b1f1c9bc14dd6715a4372.jpeg?wh=1920*346\" alt=\"\"></p><p>å¯¹äºå¾—åˆ°çš„è¿™ä¸ªå…¬å¼ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå®ƒå†™æˆçŸ©é˜µå½¢å¼ã€‚ç»“æœå¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/2b/a4/2b15e082213c56756686771526afbda4.jpg?wh=1920*327\" alt=\"\"></p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†ä¸‰ä¸ªåŸºæœ¬çš„ä»¿å°„å˜æ¢å…¬å¼ï¼Œå…¶ä¸­æ—‹è½¬å’Œç¼©æ”¾éƒ½å¯ä»¥å†™æˆçŸ©é˜µä¸å‘é‡ç›¸ä¹˜çš„å½¢å¼ã€‚è¿™ç§èƒ½å†™æˆçŸ©é˜µä¸å‘é‡ç›¸ä¹˜å½¢å¼çš„å˜æ¢ï¼Œå°±å«åš<strong>çº¿æ€§å˜æ¢</strong>ã€‚çº¿æ€§å˜æ¢é™¤äº†å¯ä»¥æ»¡è¶³ä»¿å°„å˜æ¢çš„2ä¸ªæ€§è´¨ä¹‹å¤–ï¼Œè¿˜æœ‰2ä¸ªé¢å¤–çš„æ€§è´¨ï¼š</p><ol>\n<li>çº¿æ€§å˜æ¢ä¸æ”¹å˜åæ ‡åŸç‚¹ï¼ˆå› ä¸ºå¦‚æœx<sub>0</sub>ã€y<sub>0</sub>ç­‰äºé›¶ï¼Œé‚£ä¹ˆxã€yè‚¯å®šç­‰äº0ï¼‰ï¼›</li>\n<li>çº¿æ€§å˜æ¢å¯ä»¥å åŠ ï¼Œå¤šä¸ªçº¿æ€§å˜æ¢çš„å åŠ ç»“æœå°±æ˜¯å°†çº¿æ€§å˜æ¢çš„çŸ©é˜µä¾æ¬¡ç›¸ä¹˜ï¼Œå†ä¸åŸå§‹å‘é‡ç›¸ä¹˜ã€‚</li>\n</ol><p>é‚£æ ¹æ®çº¿æ€§å˜æ¢çš„ç¬¬2æ¡æ€§è´¨ï¼Œæˆ‘ä»¬å°±èƒ½æ€»ç»“å‡ºä¸€ä¸ªé€šç”¨çš„çº¿æ€§å˜æ¢å…¬å¼ï¼Œå³ä¸€ä¸ªåŸå§‹å‘é‡P<sub>0</sub>ç»è¿‡M<sub>1</sub>ã€M<sub>2</sub>ã€â€¦M<sub>n </sub>æ¬¡çš„çº¿æ€§å˜æ¢ä¹‹åå¾—åˆ°æœ€ç»ˆçš„åæ ‡Pã€‚çº¿æ€§å˜åŒ–çš„å åŠ æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ€§è´¨ï¼Œå®ƒæ˜¯æˆ‘ä»¬å¯¹å›¾å½¢è¿›è¡Œå˜æ¢çš„åŸºç¡€ï¼Œæ‰€ä»¥ä½ ä¸€å®šè¦ç‰¢è®°çº¿æ€§å˜åŒ–çš„å åŠ æ€§è´¨ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/de/c7/deca8b0bce015f249a48a5c6e7dcdfc7.jpeg?wh=1920*347\" alt=\"\"></p><p>å¥½äº†ï¼Œå¸¸è§çš„ä»¿å°„å˜æ¢å½¢å¼æˆ‘ä»¬è¯´å®Œäº†ã€‚æ€»çš„æ¥è¯´ï¼Œå‘é‡çš„åŸºæœ¬ä»¿å°„å˜æ¢åˆ†ä¸ºå¹³ç§»ã€æ—‹è½¬ä¸ç¼©æ”¾ï¼Œå…¶ä¸­æ—‹è½¬ä¸ç¼©æ”¾å±äºçº¿æ€§å˜æ¢ï¼Œè€Œå¹³ç§»ä¸å±äºçº¿æ€§å˜æ¢ã€‚åŸºäºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä»¿å°„å˜æ¢çš„ä¸€èˆ¬è¡¨è¾¾å¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/c2/57/c275c765a311e4faa2845435f9d54e57.jpg?wh=1920*472\" alt=\"\"></p><h2>ä»¿å°„å˜æ¢çš„å…¬å¼ä¼˜åŒ–</h2><p>ä¸Šé¢è¿™ä¸ªå…¬å¼æˆ‘ä»¬è¿˜å¯ä»¥æ”¹å†™æˆçŸ©é˜µçš„å½¢å¼ï¼Œåœ¨æ”¹å†™çš„å…¬å¼é‡Œï¼Œæˆ‘ä»¬å®é™…ä¸Šæ˜¯ç»™çº¿æ€§ç©ºé—´å¢åŠ äº†ä¸€ä¸ªç»´åº¦ã€‚æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬ç”¨é«˜ç»´åº¦çš„çº¿æ€§å˜æ¢è¡¨ç¤ºäº†ä½ç»´åº¦çš„ä»¿å°„å˜æ¢ï¼</p><p><img src=\"https://static001.geekbang.org/resource/image/53/27/53e134cae1bfced9e5a1bd60df0aed27.jpeg?wh=1920*285\" alt=\"\"></p><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å°†åŸæœ¬nç»´çš„åæ ‡è½¬æ¢ä¸ºäº†n+1ç»´çš„åæ ‡ã€‚è¿™ç§n+1ç»´åæ ‡è¢«ç§°ä¸º<strong>é½æ¬¡åæ ‡</strong>ï¼Œå¯¹åº”çš„çŸ©é˜µå°±è¢«ç§°ä¸º<strong>é½æ¬¡çŸ©é˜µ</strong>ã€‚</p><p>é½æ¬¡åæ ‡å’Œé½æ¬¡çŸ©é˜µæ˜¯å¯è§†åŒ–ä¸­éå¸¸å¸¸ç”¨çš„æ•°å­¦å·¥å…·ï¼Œå®ƒèƒ½è®©æˆ‘ä»¬ç”¨çº¿æ€§å˜æ¢æ¥è¡¨ç¤ºä»¿å°„å˜æ¢ã€‚è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±èƒ½åˆ©ç”¨çº¿æ€§å˜æ¢çš„å åŠ æ€§è´¨ï¼Œæ¥éå¸¸æ–¹ä¾¿åœ°è¿›è¡Œå„ç§å¤æ‚çš„ä»¿å°„å˜æ¢äº†ã€‚è½å®åˆ°å…±è¯†ä¸Šï¼Œå°±æ˜¯æŠŠè¿™äº›å˜æ¢çš„çŸ©é˜µç›¸ä¹˜å¾—åˆ°ä¸€ä¸ªæ–°çš„çŸ©é˜µï¼Œå†æŠŠå®ƒä¹˜ä»¥åŸå‘é‡ã€‚æˆ‘ä»¬åœ¨ç»˜åˆ¶å‡ ä½•å›¾å½¢çš„æ—¶å€™ä¼šç»å¸¸ç”¨åˆ°å®ƒï¼Œæ‰€ä»¥ä½ è¦è®°ä½è¿™ä¸ªå…¬å¼ã€‚</p><h2>ä»¿å°„å˜æ¢çš„åº”ç”¨ï¼šå®ç°ç²’å­åŠ¨ç”»</h2><p>å¥½äº†ï¼Œç°åœ¨ä½ å·²ç»çŸ¥é“äº†ä»¿å°„å˜æ¢çš„æ•°å­¦åŸºç¡€ã€‚é‚£å®ƒè¯¥æ€ä¹ˆåº”ç”¨å‘¢ï¼Ÿä¸€ä¸ªå¾ˆå¸¸è§çš„åº”ç”¨ï¼Œå°±æ˜¯åˆ©ç”¨å®ƒæ¥å®ç°ç²’å­åŠ¨ç”»ã€‚</p><p>ä½ å¯èƒ½è¿˜ä¸ç†Ÿæ‚‰ç²’å­åŠ¨ç”»ï¼Œæˆ‘ä»¬å…ˆæ¥å¿«é€Ÿè®¤è¯†ä¸€ä¸‹å®ƒã€‚å®ƒèƒ½åœ¨ä¸€å®šæ—¶é—´å†…ç”Ÿæˆè®¸å¤šéšæœºè¿åŠ¨çš„å°å›¾å½¢ï¼Œè¿™ç±»åŠ¨ç”»é€šå¸¸æ˜¯é€šè¿‡ç»™äººä»¥è§†è§‰ä¸Šçš„éœ‡æ’¼ï¼Œæ¥è¾¾åˆ°è·å–ç”¨æˆ·å…³æ³¨çš„æ•ˆæœã€‚åœ¨å¯è§†åŒ–ä¸­ï¼Œç²’å­åŠ¨ç”»å¯ä»¥ç”¨æ¥è¡¨è¾¾æ•°æ®ä¿¡æ¯æœ¬èº«ï¼ˆæ¯”å¦‚æ•°é‡ã€å¤§å°ç­‰ç­‰ï¼‰ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥ä¿®é¥°ç•Œé¢ã€å¸å¼•ç”¨æˆ·çš„å…³æ³¨ï¼Œå®ƒæ˜¯æˆ‘ä»¬åœ¨å¯è§†åŒ–ä¸­ç»å¸¸ä¼šç”¨åˆ°çš„ä¸€ç§è§†è§‰æ•ˆæœã€‚</p><p>åœ¨ç²’å­åŠ¨ç”»çš„å®ç°è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦åœ¨ç•Œé¢ä¸Šå¿«é€Ÿæ”¹å˜ä¸€å¤§æ‰¹å›¾å½¢çš„å¤§å°ã€å½¢çŠ¶å’Œä½ç½®ï¼Œæ‰€ä»¥ç”¨å›¾å½¢çš„ä»¿å°„å˜æ¢æ¥å®ç°æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ³•ã€‚</p><p>ä¸ºäº†æ–¹ä¾¿ä½ ç†è§£ï¼Œæˆ‘ä»¬ä»Šå¤©åªè®²ä¸€ä¸ªç®€å•çš„ç²’å­åŠ¨ç”»ã€‚è¿™ä¸ªç²’å­åŠ¨ç”»çš„è¿è¡Œæ•ˆæœï¼Œæ˜¯ä»ä¸€ä¸ªç‚¹å¼€å§‹å‘å°„å‡ºè®¸å¤šé¢œè‰²ã€å¤§å°ã€è§’åº¦å„å¼‚çš„ä¸‰è§’å½¢ï¼Œå¹¶ä¸”é€šè¿‡ä¸æ–­å˜åŒ–å®ƒä»¬çš„ä½ç½®ï¼Œäº§ç”Ÿä¸€ç§æ’’èŠ±èˆ¬çš„è§†è§‰æ•ˆæœã€‚</p><h3>1. åˆ›å»ºä¸‰è§’å½¢</h3><p>å› ä¸ºè¿™ä¸ªç²’å­åŠ¨ç”»ä¸­ä¸»è¦ç”¨åˆ°äº†ä¸‰è§’å½¢ï¼Œæ‰€ä»¥æˆ‘ä»¬ç¬¬ä¸€æ­¥å°±è¦åˆ›å»ºä¸‰è§’å½¢ã€‚<strong>åˆ›å»ºä¸‰è§’å½¢ä¸€å…±å¯ä»¥åˆ†ä¸ºä¸¤æ­¥ï¼Œç¬¬ä¸€æ­¥ï¼Œ</strong><strong>æˆ‘ä»¬å®šä¹‰ä¸‰è§’å½¢çš„é¡¶ç‚¹å¹¶å°†æ•°æ®é€åˆ°ç¼“å†²åŒº</strong>ã€‚è¿™ä¸€æ­¥ï¼Œä½ ç›´æ¥çœ‹ä¸‹é¢åˆ›å»ºWebGLProgramçš„æ­¥éª¤å°±èƒ½ç†è§£ã€‚å¦‚æœä½ è¿˜ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œæˆ‘å»ºè®®ä½ å¤ä¹ ä¸€ä¸‹ç¬¬4èŠ‚è¯¾çš„å†…å®¹ã€‚</p><pre><code>const position = new Float32Array([\n  -1, -1,\n  0, 1,\n  1, -1,\n]);\nconst bufferId = gl.createBuffer();\ngl.bindBuffer(gl.ARRAY_BUFFER, bufferId);\ngl.bufferData(gl.ARRAY_BUFFER, position, gl.STATIC_DRAW);\n\nconst vPosition = gl.getAttribLocation(program, 'position');\ngl.vertexAttribPointer(vPosition, 2, gl.FLOAT, false, 0, 0);\ngl.enableVertexAttribArray(vPosition);\n</code></pre><p><strong>ç¬¬äºŒæ­¥ï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ªåˆ›å»ºéšæœºä¸‰è§’å½¢å±æ€§çš„å‡½æ•°</strong>ã€‚å…·ä½“æ¥è¯´å°±æ˜¯ï¼Œåˆ©ç”¨randomTriangleséšæœºåˆ›å»ºä¸€ä¸ªä¸‰è§’å½¢çš„ä¿¡æ¯ï¼Œå…¶ä¸­çš„å‚æ•°åŒ…æ‹¬é¢œè‰²u_colorã€åˆå§‹æ—‹è½¬è§’åº¦u_rotationã€åˆå§‹å¤§å°u_scaleã€åˆå§‹æ—¶é—´u_timeã€åŠ¨ç”»æŒç»­æ—¶é—´u_dirationã€è¿åŠ¨æ–¹å‘u_dirå’Œåˆ›å»ºæ—¶é—´startTimeã€‚é™¤äº†startTimeä¹‹å¤–çš„æ•°æ®ï¼Œæˆ‘ä»¬éƒ½éœ€è¦ä¼ ç»™shaderå»å¤„ç†ã€‚</p><pre><code>function randomTriangles() {\n  const u_color = [Math.random(), Math.random(), Math.random(), 1.0]; // éšæœºé¢œè‰²\n  const u_rotation = Math.random() * Math.PI; // åˆå§‹æ—‹è½¬è§’åº¦\n  const u_scale = Math.random() * 0.05 + 0.03; // åˆå§‹å¤§å°\n  const u_time = 0;\n  const u_duration = 3.0; // æŒç»­3ç§’é’Ÿ\n\n  const rad = Math.random() * Math.PI * 2;\n  const u_dir = [Math.cos(rad), Math.sin(rad)]; // è¿åŠ¨æ–¹å‘\n  const startTime = performance.now();\n\n  return {u_color, u_rotation, u_scale, u_time, u_duration, u_dir, startTime};\n}\n</code></pre><h3>2.  è®¾ç½®uniformå˜é‡</h3><p>é€šè¿‡å‰é¢çš„ä»£ç ï¼Œæˆ‘ä»¬å·²ç»å°†ä¸‰è§’å½¢é¡¶ç‚¹ä¿¡æ¯ä¼ å…¥ç¼“å†²åŒºã€‚æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨WebGLçš„shaderä¸­ï¼Œé¡¶ç‚¹ç›¸å…³çš„å˜é‡å¯ä»¥ç”¨attributeå£°æ˜ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ç°åœ¨è¦æŠŠu_colorã€u_rotationç­‰ä¸€ç³»åˆ—å˜é‡ä¹Ÿä¼ åˆ°shaderä¸­ï¼Œè¿™äº›å˜é‡ä¸ä¸‰è§’å½¢å…·ä½“é¡¶ç‚¹æ— å…³ï¼Œå®ƒä»¬æ˜¯ä¸€äº›å›ºå®šçš„å€¼ã€‚è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å°±è¦ç”¨åˆ°shaderçš„å¦ä¸€ç§å˜é‡å£°æ˜ï¼Œä¹Ÿå°±æ˜¯uniformæ¥å£°æ˜ã€‚</p><p>é‚£å®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿé¦–å…ˆï¼Œattributeå˜é‡æ˜¯å¯¹åº”äºé¡¶ç‚¹çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡ ä½•å›¾å½¢æœ‰å‡ ä¸ªé¡¶ç‚¹å°±è¦æä¾›å‡ ä»½attributeæ•°æ®ã€‚å¹¶ä¸”ï¼Œattributeå˜é‡åªèƒ½åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­ä½¿ç”¨ï¼Œå¦‚æœè¦åœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­ä½¿ç”¨ï¼Œéœ€è¦æˆ‘ä»¬é€šè¿‡varyingå˜é‡å°†å®ƒä¼ ç»™ç‰‡å…ƒç€è‰²å™¨æ‰è¡Œã€‚è¿™æ ·ä¸€æ¥ï¼Œç‰‡å…ƒç€è‰²å™¨ä¸­è·å–çš„å®é™…å€¼ï¼Œå°±æ˜¯ç»è¿‡é¡¶ç‚¹çº¿æ€§æ’å€¼çš„ã€‚</p><p>è€Œuniformå£°æ˜çš„å˜é‡ä¸åŒï¼Œuniformå£°æ˜çš„å˜é‡å’Œå…¶ä»–è¯­è¨€ä¸­çš„å¸¸é‡ä¸€æ ·ï¼Œæˆ‘ä»¬èµ‹ç»™unformå˜é‡çš„å€¼åœ¨shaderæ‰§è¡Œçš„è¿‡ç¨‹ä¸­ä¸å¯æ”¹å˜ã€‚è€Œä¸”ä¸€ä¸ªå˜é‡çš„å€¼æ˜¯å”¯ä¸€çš„ï¼Œä¸éšé¡¶ç‚¹å˜åŒ–ã€‚<strong>uniformå˜é‡æ—¢å¯ä»¥åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­ä½¿ç”¨ã€‚</strong></p><p>åœ¨WebGLä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ gl.uniformXXX(loc, u_color); çš„æ–¹æ³•å°†æ•°æ®ä¼ ç»™shaderçš„uniformå˜é‡ã€‚å…¶ä¸­ï¼ŒXXXæ˜¯æˆ‘ä»¬éšç€æ•°æ®ç±»å‹ä¸åŒå–å¾—ä¸åŒçš„åå­—ã€‚æˆ‘åœ¨ä¸‹é¢åˆ—ä¸¾äº†ä¸€äº›æ¯”è¾ƒå¸¸ç”¨çš„ï¼Œä½ å¯ä»¥çœ‹çœ‹ï¼š</p><ul>\n<li>gl.uniform1fä¼ å…¥ä¸€ä¸ªæµ®ç‚¹æ•°ï¼Œå¯¹åº”çš„uniformå˜é‡çš„ç±»å‹ä¸ºfloat</li>\n<li>gl.uniform4fä¼ å…¥å››ä¸ªæµ®ç‚¹æ•°ï¼Œå¯¹åº”çš„uniformå˜é‡ç±»å‹ä¸ºfloat[4]</li>\n<li>gl.uniform3fvä¼ å…¥ä¸€ä¸ªä¸‰ç»´å‘é‡ï¼Œå¯¹åº”çš„uniformå˜é‡ç±»å‹ä¸ºvec3</li>\n<li>gl.uniformMatrix4fvä¼ å…¥ä¸€ä¸ª4x4çš„çŸ©é˜µï¼Œå¯¹åº”çš„uniformå˜é‡ç±»å‹ä¸ºmat4</li>\n</ul><p>ä»Šå¤©ï¼Œå…³äºWebGLçš„uniformçš„è®¾ç½®ï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“è¿™ä¸ªæœ€å¸¸ç”¨çš„æ–¹æ³•å°±å¯ä»¥äº†ï¼Œæ›´è¯¦ç»†çš„è®¾ç½®ä¿¡æ¯ï¼Œä½ å¯ä»¥å‚è€ƒ<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/uniform\">MDNå®˜æ–¹æ–‡æ¡£</a>ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®ç°è¿™ä¸ªå‡½æ•°ï¼Œå°†éšæœºä¸‰è§’å½¢ä¿¡æ¯ä¼ ç»™shaderé‡Œçš„uniformå˜é‡ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>function setUniforms(gl, {u_color, u_rotation, u_scale, u_time, u_duration, u_dir}) {\n  // gl.getUniformLocation æ‹¿åˆ°uniformå˜é‡çš„æŒ‡é’ˆ\n  let loc = gl.getUniformLocation(program, 'u_color');\n  // å°†æ•°æ®ä¼ ç»™ unfirom å˜é‡çš„åœ°å€\n  gl.uniform4fv(loc, u_color);\n\n  loc = gl.getUniformLocation(program, 'u_rotation');\n  gl.uniform1f(loc, u_rotation);\n\n  loc = gl.getUniformLocation(program, 'u_scale');\n  gl.uniform1f(loc, u_scale);\n\n  loc = gl.getUniformLocation(program, 'u_time');\n  gl.uniform1f(loc, u_time);\n\n  loc = gl.getUniformLocation(program, 'u_duration');\n  gl.uniform1f(loc, u_duration);\n\n  loc = gl.getUniformLocation(program, 'u_dir');\n  gl.uniform2fv(loc, u_dir);\n}\n</code></pre><h3>3. ç”¨requestAnimationFrameå®ç°åŠ¨ç”»</h3><p>ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨requestAnimationFrameå®ç°åŠ¨ç”»ã€‚å…·ä½“çš„æ–¹æ³•å°±æ˜¯ï¼Œæˆ‘ä»¬åœ¨updateæ–¹æ³•ä¸­æ¯æ¬¡æ–°å»ºæ•°ä¸ªéšæœºä¸‰è§’å½¢ï¼Œç„¶åä¾æ¬¡ä¿®æ”¹æ‰€æœ‰ä¸‰è§’å½¢çš„u_timeå±æ€§ï¼Œé€šè¿‡setUniformsæ–¹æ³•å°†ä¿®æ”¹çš„å±æ€§æ›´æ–°åˆ°shaderå˜é‡ä¸­ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨shaderä¸­è¯»å–å˜é‡çš„å€¼è¿›è¡Œå¤„ç†äº†ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>let triangles = [];\n\nfunction update() {\n  for(let i = 0; i &lt; 5 * Math.random(); i++) {\n    triangles.push(randomTriangles());\n  }\n  gl.clear(gl.COLOR_BUFFER_BIT);\n  // å¯¹æ¯ä¸ªä¸‰è§’å½¢é‡æ–°è®¾ç½®u_time\n  triangles.forEach((triangle) =&gt; {\n    triangle.u_time = (performance.now() - triangle.startTime) / 1000;\n    setUniforms(gl, triangle);\n    gl.drawArrays(gl.TRIANGLES, 0, position.length / 2);\n  });\n  // ç§»é™¤å·²ç»ç»“æŸåŠ¨ç”»çš„ä¸‰è§’å½¢\n  triangles = triangles.filter((triangle) =&gt; {\n    return triangle.u_time &lt;= triangle.u_duration;\n  });\n  requestAnimationFrame(update);\n}\n\nrequestAnimationFrame(update);\n</code></pre><p>æˆ‘ä»¬å†å›è¿‡å¤´æ¥çœ‹æœ€ç»ˆè¦å®ç°çš„æ•ˆæœã€‚ä½ ä¼šå‘ç°ï¼Œæ‰€æœ‰çš„ä¸‰è§’å½¢ï¼Œéƒ½æ˜¯ç”±å°å˜å¤§æœç€ç‰¹å®šçš„æ–¹å‘æ—‹è½¬ã€‚é‚£æƒ³è¦å®ç°è¿™ä¸ªæ•ˆæœï¼Œæˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°å‰é¢è®²è¿‡çš„ä»¿å°„å˜æ¢ï¼Œåœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­è¿›è¡ŒçŸ©é˜µè¿ç®—ã€‚</p><p>åœ¨è¿™ä¸€æ­¥ä¸­ï¼Œé¡¶ç‚¹ç€è‰²å™¨ä¸­çš„glslä»£ç æœ€å…³é”®ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹è¿™ä¸ªä»£ç æ˜¯æ€ä¹ˆå†™çš„ã€‚</p><pre><code>attribute vec2 position;\n\nuniform float u_rotation;\nuniform float u_time;\nuniform float u_duration;\nuniform float u_scale;\nuniform vec2 u_dir;\n\nvarying float vP;\n\nvoid main() {\n  float p = min(1.0, u_time / u_duration);\n  float rad = u_rotation + 3.14 * 10.0 * p;\n  float scale = u_scale * p * (2.0 - p);\n  vec2 offset = 2.0 * u_dir * p * p;\n  mat3 translateMatrix = mat3(\n    1.0, 0.0, 0.0,\n    0.0, 1.0, 0.0,\n    offset.x, offset.y, 1.0\n  );\n  mat3 rotateMatrix = mat3(\n    cos(rad), sin(rad), 0.0,\n    -sin(rad), cos(rad), 0.0,\n    0.0, 0.0, 1.0\n  );\n  mat3 scaleMatrix = mat3(\n    scale, 0.0, 0.0,\n    0.0, scale, 0.0,\n    0.0, 0.0, 1.0\n  );\n  gl_PointSize = 1.0;\n  vec3 pos = translateMatrix * rotateMatrix * scaleMatrix * vec3(position, 1.0);\n  gl_Position = vec4(pos, 1.0);\n  vP = p;\n}\n</code></pre><p>å…¶ä¸­æœ‰å‡ ä¸ªå…³é”®å‚æ•°ï¼Œä½ å¯èƒ½è¿˜æ¯”è¾ƒé™Œç”Ÿï¼Œæˆ‘æ¥åˆ†åˆ«ä»‹ç»ä¸€ä¸‹ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰çš„pæ˜¯å½“å‰åŠ¨ç”»è¿›åº¦ï¼Œå®ƒçš„å€¼æ˜¯u_time / u_durationï¼Œå–å€¼åŒºé—´ä»0åˆ°1ã€‚radæ˜¯æ—‹è½¬è§’åº¦ï¼Œå®ƒçš„å€¼æ˜¯åˆå§‹è§’åº¦u_rotationåŠ ä¸Š10Ï€ï¼Œè¡¨ç¤ºåœ¨åŠ¨ç”»è¿‡ç¨‹ä¸­å®ƒä¼šç»•è‡ªèº«æ—‹è½¬5å‘¨ã€‚</p><p>å…¶æ¬¡ï¼Œscaleæ˜¯ç¼©æ”¾æ¯”ä¾‹ï¼Œå®ƒçš„å€¼æ˜¯åˆå§‹ç¼©æ”¾æ¯”ä¾‹ä¹˜ä»¥ä¸€ä¸ªç³»æ•°ï¼Œè¿™ä¸ªç³»æ•°æ˜¯p * (2.0 - p)ï¼Œåœ¨æˆ‘ä»¬åé¢è®¨è®ºåŠ¨ç”»çš„æ—¶å€™ä½ ä¼šçŸ¥é“ï¼Œp * (2.0 - p)æ˜¯ä¸€ä¸ªç¼“åŠ¨å‡½æ•°ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“ï¼Œå®ƒçš„ä½œç”¨æ˜¯è®©scaleçš„å˜åŒ–é‡éšç€æ—¶é—´æ¨ç§»é€æ¸å‡å°å°±å¯ä»¥äº†ã€‚</p><p>æœ€åï¼Œoffsetæ˜¯ä¸€ä¸ªäºŒç»´å‘é‡ï¼Œå®ƒæ˜¯åˆå§‹å€¼u_dirä¸ 2.0 * p * p çš„ä¹˜ç§¯ï¼Œå› ä¸ºu_diræ˜¯ä¸ªå•ä½å‘é‡ï¼Œè¿™é‡Œçš„2.0è¡¨ç¤ºå®ƒçš„æœ€å¤§ç§»åŠ¨è·ç¦»ä¸º 2ï¼Œp * pä¹Ÿæ˜¯ä¸€ä¸ªç¼“åŠ¨å‡½æ•°ï¼Œä½œç”¨æ˜¯è®©ä½ç§»çš„å˜åŒ–é‡éšç€æ—¶é—´å¢åŠ è€Œå¢å¤§ã€‚</p><p>å®šä¹‰å®Œè¿™äº›å‚æ•°ä»¥åï¼Œæˆ‘ä»¬å¾—åˆ°ä¸‰ä¸ªé½æ¬¡çŸ©é˜µï¼štranslateMatrixæ˜¯åç§»çŸ©é˜µï¼ŒrotateMatrixæ˜¯æ—‹è½¬çŸ©é˜µï¼ŒscaleMatrixæ˜¯ç¼©æ”¾çŸ©é˜µã€‚æˆ‘ä»¬å°†posçš„å€¼è®¾ç½®ä¸ºè¿™ä¸‰ä¸ªçŸ©é˜µä¸positionçš„ä¹˜ç§¯ï¼Œè¿™æ ·å°±å®Œæˆå¯¹é¡¶ç‚¹çš„çº¿æ€§å˜æ¢ï¼Œå‘ˆç°å‡ºæ¥çš„æ•ˆæœä¹Ÿå°±æ˜¯ä¸‰è§’å½¢ä¼šå‘ç€ç‰¹å®šçš„æ–¹å‘æ—‹è½¬ã€ç§»åŠ¨å’Œç¼©æ”¾ã€‚</p><h3>4. åœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­ç€è‰²</h3><p>æœ€åï¼Œæˆ‘ä»¬åœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­å¯¹è¿™äº›ä¸‰è§’å½¢ç€è‰²ã€‚æˆ‘ä»¬å°†pä¹Ÿå°±æ˜¯åŠ¨ç”»è¿›åº¦ï¼Œä»é¡¶ç‚¹ç€è‰²å™¨é€šè¿‡å˜é‡varying vPä¼ ç»™ç‰‡å…ƒç€è‰²å™¨ï¼Œç„¶ååœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­è®©alphaå€¼éšç€vPå€¼å˜åŒ–ï¼Œè¿™æ ·å°±èƒ½åŒæ—¶å®ç°ç²’å­çš„æ·¡å‡ºæ•ˆæœäº†ã€‚</p><p>ç‰‡å…ƒç€è‰²å™¨ä¸­çš„ä»£ç å¦‚ä¸‹ï¼š</p><pre><code> precision mediump float;\n  uniform vec4 u_color;\n  varying float vP;\n\n  void main()\n  {\n    gl_FragColor.xyz = u_color.xyz;\n    gl_FragColor.a = (1.0 - vP) * u_color.a;\n  }  \n</code></pre><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±ç”¨ä»¿å°„å˜æ¢å®ç°äº†ä¸€ä¸ªæœ‰è¶£çš„ç²’å­åŠ¨ç”»ã€‚</p><h2>CSSçš„ä»¿å°„å˜æ¢</h2><p>æ—¢ç„¶æˆ‘ä»¬è®²äº†ä»¿å°„å˜æ¢ï¼Œè¿™é‡Œè¿˜æ˜¯è¦å†æä¸€ä¸‹CSSä¸­æˆ‘ä»¬å¸¸ç”¨çš„å±æ€§transformã€‚</p><pre><code>div.block {\n  transform: rotate(30deg) translate(100px,50px) scale(1.5);\n}\n</code></pre><p>CSSä¸­çš„transformæ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„å±æ€§ï¼Œå®ƒçš„ä½œç”¨å…¶å®ä¹Ÿæ˜¯å¯¹å…ƒç´ è¿›è¡Œä»¿å°„å˜æ¢ã€‚</p><p>å®ƒä¸ä»…æ”¯æŒtranslateã€rotateã€scaleç­‰å€¼ï¼Œè¿˜æ”¯æŒmatrixã€‚CSSçš„matrixæ˜¯ä¸€ä¸ªç®€å†™çš„é½æ¬¡çŸ©é˜µï¼Œå› ä¸ºå®ƒçœç•¥äº†3é˜¶é½æ¬¡çŸ©é˜µç¬¬ä¸‰è¡Œçš„0, 0, 1å€¼ï¼Œæ‰€ä»¥å®ƒ åªæœ‰6ä¸ªå€¼ã€‚</p><p>transformåœ¨CSSä¸­å˜æ¢å…ƒç´ çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ä½œä¸ºå‰ç«¯å·¥ç¨‹å¸ˆéƒ½æ¯”è¾ƒç†Ÿæ‚‰äº†ã€‚ä½†ä½ çŸ¥é“æ€ä¹ˆä¼˜åŒ–å®ƒæ¥æé«˜æ€§èƒ½å—ï¼Ÿä¸‹é¢ï¼Œæˆ‘å°±é‡ç‚¹æ¥è¯´è¯´è¿™ä¸€ç‚¹ã€‚</p><p>ç»“åˆä¸Šé¢ä»‹ç»çš„é½æ¬¡çŸ©é˜µå˜æ¢çš„åŸç†ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹CSSçš„transformå±æ€§è¿›è¡Œå‹ç¼©ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå®šä¹‰CSS transformï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code>div.block {\n  transform: rotate(30deg) translate(100px,50px) scale(1.5);\n}\n</code></pre><p>ä¹Ÿå°±æ˜¯æˆ‘ä»¬å…ˆæ—‹è½¬30åº¦ï¼Œç„¶åå¹³ç§»100pxã€50pxï¼Œæœ€åå†æ”¾å¤§1.5å€ã€‚å®é™…ä¸Šç›¸å½“äºæˆ‘ä»¬åšäº†å¦‚ä¸‹å˜æ¢ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/5e/98/5e18daef0ff059498804419b704c6a98.jpeg?wh=1920*389\" alt=\"\"></p><p>è¿™é‡Œæˆ‘å°±ä¸å†è‡ªå·±å†™çŸ©é˜µä¹˜æ³•çš„åº“äº†ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªå‘é‡çŸ©é˜µè¿ç®—çš„æ•°å­¦åº“mathï¼Œå®ƒå‡ ä¹åŒ…å«äº†æ‰€æœ‰å›¾å½¢å­¦éœ€è¦ç”¨åˆ°çš„æ•°å­¦æ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨åé¢è¯¾ç¨‹ä¸­ä¹Ÿä¼šç»å¸¸ç”¨åˆ°å®ƒï¼Œä½ å¯ä»¥å‚è€ƒ<a href=\"https://github.com/akira-cn/graphics/tree/master/common/lib/math\">GitHubä»“åº“</a>å…ˆäº†è§£ä¸€ä¸‹å®ƒã€‚</p><p>æˆ‘ä»¬ç®€å•ç®—ä¸€ä¸‹ä¸‰ä¸ªçŸ©é˜µç›¸ä¹˜ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code>import {multiply} from 'common/lib/math/functions/mat3fun.js';\n\nconst rad = Math.PI / 6;\nconst a = [\n  Math.cos(rad), -Math.sin(rad), 0,\n  Math.sin(rad), Math.cos(rad), 0,\n  0, 0, 1\n];\n\nconst b = [\n  1, 0, 100,\n  0, 1, 50,\n  0, 0, 1\n];\n\nconst c = [\n  1.5, 0, 0,\n  0, 1.5, 0,\n  0, 0, 1\n];\n\nconst res = [a, b, c].reduce((a, b) =&gt; {\n  return multiply([], b, a);\n});\n\nconsole.log(res);\n/*\n[1.299038105676658, -0.7499999999999999, 61.60254037844388, \n  0.7499999999999999, 1.299038105676658, 93.30127018922192,\n  0, 0, 1]\n*/\n</code></pre><p>æ‰€ä»¥å‘¢ï¼Œæˆ‘ä»¬æœ€ç»ˆå°±å¯ä»¥å°†ä¸Šé¢çš„transformç”¨ä¸€ä¸ªçŸ©é˜µè¡¨ç¤ºï¼š</p><pre><code>div.block {\n  transform: matrix(1.3,0.75,-0.75,1.3,61.6,93.3)ï¼›\n}\n</code></pre><p>è¿™æ ·çš„transformæ•ˆæœå’Œä¹‹å‰rotateã€translateå’Œscaleåˆ†å¼€å†™çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å­—ç¬¦æ•°æ›´å°‘ï¼Œæ‰€ä»¥èƒ½å‡å°CSSæ–‡ä»¶çš„å¤§å°ã€‚</p><p>é‚£åœ¨æˆ‘ä»¬ä»‹ç»å®Œä»¿å°„å˜æ¢ä¹‹åï¼Œä½ æ˜¯ä¸æ˜¯å¯¹CSS transformçš„ç†è§£ä¹Ÿæ›´æ·±äº†å‘¢ï¼Ÿæ²¡é”™ï¼Œä¸å…‰æ˜¯transformï¼Œåœ¨æˆ‘ä»¬ä¹‹åçš„å­¦ä¹ ä¸­ï¼Œä½ ä¹Ÿå¯ä»¥å¤šæƒ³æƒ³ï¼Œè¿˜æœ‰å“ªäº›å†…å®¹åœ¨CSSä¸­ä¹Ÿæœ‰ç›¸ä¼¼çš„ä½œç”¨ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿèƒ½åˆ©ç”¨åœ¨å¯è§†åŒ–ä¸­å­¦åˆ°çš„çŸ¥è¯†æ¥ä¼˜åŒ–æ€§èƒ½ã€‚</p><h2>è¦ç‚¹æ€»ç»“</h2><p>è¿™ä¸€èŠ‚è¯¾æˆ‘ä»¬ä»‹ç»äº†ç”¨å‘é‡å’ŒçŸ©é˜µè¿ç®—æ¥æ”¹å˜å‡ ä½•å›¾å½¢çš„å½¢çŠ¶ã€å¤§å°å’Œä½ç½®ã€‚å…¶ä¸­ï¼Œå‘é‡çš„å¹³ç§»ã€æ—‹è½¬å’Œç¼©æ”¾éƒ½å±äºä»¿å°„å˜æ¢ï¼Œè€Œä»¿å°„å˜æ¢å…·æœ‰2ä¸ªæ€§è´¨ï¼š</p><ol>\n<li>å˜æ¢å‰æ˜¯ç›´çº¿æ®µçš„ï¼Œå˜æ¢åä¾ç„¶æ˜¯ç›´çº¿æ®µ</li>\n<li>å¯¹ä¸¤æ¡ç›´çº¿æ®µaå’Œbåº”ç”¨åŒæ ·çš„ä»¿å°„å˜æ¢ï¼Œå˜æ¢å‰åçº¿æ®µé•¿åº¦æ¯”ä¾‹ä¿æŒä¸å˜</li>\n</ol><p>é‚£ä»¿å°„å˜æ¢ä¸­çš„æ—‹è½¬å’Œç¼©æ”¾åˆå±äºçº¿æ€§å˜æ¢ï¼Œè€Œçº¿æ€§å˜æ¢åœ¨ä»¿å°„å˜æ¢æ€§è´¨çš„åŸºç¡€ä¸Šè¿˜æœ‰2ä¸ªé¢å¤–çš„æ€§è´¨ï¼š</p><ol>\n<li>çº¿æ€§å˜æ¢ä¸æ”¹å˜åæ ‡åŸç‚¹ï¼ˆå› ä¸ºå¦‚æœx<sub>0</sub>ã€y<sub>0</sub>ç­‰äºé›¶ï¼Œé‚£ä¹ˆxã€yè‚¯å®šç­‰äº0ï¼‰</li>\n<li>çº¿æ€§å˜æ¢å¯ä»¥å åŠ ï¼Œå¤šä¸ªçº¿æ€§å˜æ¢çš„å åŠ ç»“æœå°±æ˜¯å°†çº¿æ€§å˜æ¢çš„çŸ©é˜µä¾æ¬¡ç›¸ä¹˜ï¼Œå†ä¸å‘é‡ç›¸ä¹˜</li>\n</ol><p>é€šè¿‡é½æ¬¡åæ ‡å’Œé½æ¬¡çŸ©é˜µï¼Œæˆ‘ä»¬å¯ä»¥å°†å¹³ç§»è¿™æ ·çš„éçº¿æ€§ä»¿å°„å˜æ¢ç”¨æ›´é«˜ç»´åº¦çš„çº¿æ€§å˜æ¢æ¥è¡¨ç¤ºã€‚è¿™ä¹ˆåšçš„ç›®çš„æ˜¯è®©æˆ‘ä»¬èƒ½å¤Ÿå°†ä»¿å°„å˜æ¢çš„ç»„åˆç®€åŒ–ä¸ºçŸ©é˜µä¹˜æ³•è¿ç®—ã€‚</p><p>åˆ°è¿™é‡Œï¼Œæ•°å­¦åŸºç¡€ç¯‡çš„å†…å®¹æˆ‘ä»¬å°±å­¦å®Œäº†ã€‚åœ¨è¿™ä¸€ç¯‡çš„å¼€å¤´ï¼Œæˆ‘ä»¬è¯´äº†è¦æ€»ç»“å‡ºä¸€ä¸ªé€šç”¨çš„åŸºç¡€æ•°å­¦ç»˜å›¾ä½“ç³»ï¼Œè¿™æ ·æ‰ä¸è‡³äºé™·å…¥ç»†èŠ‚é‡Œã€‚æ‰€ä»¥å•Šï¼Œæˆ‘æ€»ç»“äº†ä¸€ä¸ªç®€å•çš„çŸ¥è¯†è„‘å›¾ï¼ŒæŠŠæˆ‘ä»¬åœ¨æ•°å­¦ç¯‡é‡Œè®²è¿‡çš„æ•°å­¦çŸ¥è¯†æ±‡æ€»åˆ°äº†ä¸€èµ·ï¼Œå®ƒè‚¯å®šä¸ä¼šæ˜¯ä¸€ä¸ªéå¸¸å®Œæ•´çš„æ•°å­¦ç»˜å›¾ä½“ç³»ï¼Œä½†æ˜¯å¯¹æˆ‘ä»¬ä¹‹åçš„å­¦ä¹ æ¥è¯´ï¼Œå·²ç»è¶³å¤Ÿç”¨äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/bf/7c/bfdd8c7f5f15e5b703128cdaf419f07c.jpg?wh=2515*2158\" alt=\"\"></p><p>æœ€åå‘¢ï¼Œæˆ‘è¿˜æƒ³å†å•°å—¦å‡ å¥ã€‚å›¾å½¢å­¦ä½œä¸ºå¯è§†åŒ–çš„åŸºç¡€ï¼Œæ˜¯ä¸€é—¨å¾ˆæ·±çš„å­¦é—®ã€‚å®ƒç‰µæ¶‰çš„æ•°å­¦å†…å®¹éå¸¸å¤šï¼ŒåŒ…æ‹¬çº¿æ€§ä»£æ•°ã€å‡ ä½•ã€å¾®ç§¯åˆ†å’Œæ¦‚ç‡ç»Ÿè®¡ç­‰ç­‰ã€‚é‚£è¿™é—¨è¯¾é‡Œæˆ‘ä»¬æ‰€ä»‹ç»çš„æ•°å­¦çŸ¥è¯†ï¼Œå…¶å®è¿˜éƒ½åªæ˜¯ä¸€äº›å…¥é—¨çŸ¥è¯†ã€‚</p><p>é‚£å¦‚æœä½ å¯¹å›¾å½¢å­¦æœ¬èº«å¾ˆæ„Ÿå…´è¶£ï¼Œæƒ³è¦æ·±å…¥å­¦ä¹ å®ƒåœ¨å…¶ä»–é¢†åŸŸï¼Œæ¯”å¦‚æ¸¸æˆã€è§†é¢‘ã€AR/VRç­‰é¢†åŸŸçš„åº”ç”¨ï¼Œè¿™é‡Œæˆ‘æ¨èä½ ä¸€äº›æ·±å…¥å­¦ä¹ çš„èµ„æ–™ã€‚</p><ol>\n<li><a href=\"https://www.youtube.com/watch?v=fNk_zzaMoSs&amp;list=PLZHQObOWTQDPD3MizzM2xVFitgF8hE_ab\">3Blue1Brownçš„æ•°å­¦å’Œå›¾å½¢å­¦åŸºç¡€è¯¾ç¨‹</a> è®²å¾—æ·±å…¥æµ…å‡ºï¼Œæ˜¯éå¸¸æ£’çš„å…¥é—¨æ•™ç¨‹ã€‚</li>\n<li><a href=\"https://book.douban.com/subject/26868819/\">ã€ŠFundamentals of Computer Graphicsã€‹</a>è¿™æœ¬ä¹¦æ˜¯å›¾å½¢å­¦å…¥é—¨çš„ç»å…¸æ•™æã€‚</li>\n</ol><h2>å°è¯•ç‰›åˆ€</h2><ol>\n<li>\n<p>åœ¨å®ç°ç²’å­åŠ¨ç”»çš„æ—¶å€™ï¼Œæˆ‘ä»¬è®©translateMatrix * rotateMatrix * scaleMatrixï¼Œè¿™ä¸‰ä¸ªçŸ©é˜µæŒ‰è¿™æ ·çš„é¡ºåºç›¸ä¹˜ã€‚é‚£å¦‚æœæˆ‘ä»¬é¢ å€’å®ƒä»¬çš„ç›¸ä¹˜æ¬¡åºï¼ŒæŠŠroateMatrixæ”¾åˆ°translateMatrixå‰é¢ï¼Œæˆ–è€…æŠŠscaleMatrixæ”¾åˆ°translateMatrixå‰é¢ï¼Œä¼šäº§ç”Ÿä»€ä¹ˆæ ·çš„ç»“æœå‘¢ï¼Ÿä¸ºä»€ä¹ˆå‘¢ï¼Ÿä½ å¯ä»¥æ€è€ƒä¸€ä¸‹ï¼Œç„¶åä»GitHubä¸Šforkä»£ç ï¼ŒåŠ¨æ‰‹è¯•ä¸€è¯•ã€‚</p>\n</li>\n<li>\n<p>æˆ‘ä»¬çŸ¥é“ï¼ŒCSSçš„transformé™¤äº†translateã€rotateå’Œscaleå˜æ¢ä»¥å¤–ï¼Œè¿˜æœ‰skewå˜æ¢ã€‚skewå˜æ¢æ˜¯ä¸€ç§æ²¿ç€è½´å‘çš„æ‰­æ›²å˜æ¢ï¼Œå®ƒä¹Ÿå±äºä¸€ç§çº¿æ€§å˜æ¢ï¼Œå®ƒçš„å˜æ¢çŸ©é˜µæ˜¯ï¼š<br>\n<img src=\"https://static001.geekbang.org/resource/image/b2/44/b265fbd6719e6785c9d0da9364a91f44.jpeg?wh=1920*460\" alt=\"\"></p>\n</li>\n</ol><p>ä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªçŸ©é˜µï¼Œç»™æˆ‘ä»¬çš„ç²’å­åŠ¨ç”»åŠ ä¸Šéšæœºçš„æ‰­æ›²æ•ˆæœå—ï¼Ÿ</p><ol start=\"3\">\n<li>å› ä¸ºé½æ¬¡åæ ‡å’Œé½æ¬¡çŸ©é˜µçš„æ¦‚å¿µï¼Œå¯ä»¥ä»äºŒç»´ä¸€ç›´æ¨å¹¿åˆ°Nç»´ï¼Œè€Œä¸”CSSçš„transformè¿˜æ”¯æŒ3Då˜æ¢ã€‚é‚£ä½ å¯ä»¥ç”¨é½æ¬¡çŸ©é˜µçš„åŸç†å¯¹CSSå±æ€§çš„3Då˜æ¢åº”ç”¨matrix3dï¼Œå®ç°å‡ºæœ‰è¶£çš„3Då˜æ¢æ•ˆæœå—ï¼Ÿï¼ˆğŸ’¡å°æç¤ºï¼šè¦æ”¯æŒ3ç»´çš„é½æ¬¡åæ ‡ï¼Œéœ€è¦4ç»´é½æ¬¡çŸ©é˜µï¼‰ï¼Ÿ</li>\n</ol><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå’Œæˆ‘è®¨è®ºï¼Œåˆ†äº«ä½ çš„ç­”æ¡ˆå’Œæ€è€ƒï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™èŠ‚è¯¾åˆ†äº«ç»™ä½ çš„æœ‹å‹ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ï¼</p><hr><h2><span class=\"reference\">æºç </span></h2><p><span class=\"reference\">[1]ç²’å­åŠ¨ç”»çš„<a href=\"https://github.com/akira-cn/graphics/tree/master/webgl_particles\">å®Œæ•´ä»£ç </a></span></p><p><span class=\"reference\">[2]çŸ©é˜µè¿ç®—æ•°å­¦åº“çš„<a href=\"https://github.com/akira-cn/graphics/tree/master/common/lib/math\">å®Œæ•´ä»£ç </a></span></p><h2><span class=\"reference\">æ¨èé˜…è¯»</span></h2><p><span class=\"reference\">[1]WebGLçš„uniformå˜é‡è®¾ç½®<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/uniform\">å®˜æ–¹æ–‡æ¡£</a></span></p><p><span class=\"reference\">[2]<a href=\"https://www.youtube.com/watch?v=fNk_zzaMoSs&amp;list=PLZHQObOWTQDPD3MizzM2xVFitgF8hE_ab\">3Blue1Brownçš„æ•°å­¦å’Œå›¾å½¢å­¦åŸºç¡€è¯¾ç¨‹</a> </span></p><p><span class=\"reference\">[3]å›¾å½¢å­¦å…¥é—¨ç»å…¸æ•™æ<a href=\"https://book.douban.com/subject/26868819/\">ã€ŠFundamentals of Computer Graphicsã€‹</a></span></p>","neighbors":{"left":{"article_title":"08 | å¦‚ä½•åˆ©ç”¨ä¸‰è§’å‰–åˆ†å’Œå‘é‡æ“ä½œæè¿°å¹¶å¤„ç†å¤šè¾¹å½¢ï¼Ÿ","id":258101},"right":{"article_title":"10 | å›¾å½¢ç³»ç»Ÿå¦‚ä½•è¡¨ç¤ºé¢œè‰²ï¼Ÿ","id":260922}},"comments":[{"had_liked":false,"id":233483,"user_name":"å»–ç†ŠçŒ«","can_delete":false,"product_type":"c1","uid":1141444,"ip_address":"","ucode":"8E8C475CD11FBC","user_header":"https://static001.geekbang.org/account/avatar/00/11/6a/c4/8679ca8a.jpg","comment_is_top":false,"comment_ctime":1594342539,"is_pvip":false,"replies":[{"id":"86180","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","comment_id":233483,"uid":"1159792","ip_address":"","utype":1,"ctime":1594346852,"user_name_real":"æœˆå½±"}],"discussion_count":2,"race_medal":0,"score":"83198721163","product_id":100053801,"comment_content":"3Blue1Brown çš„æ•°å­¦å’Œå›¾å½¢å­¦åŸºç¡€è¯¾ç¨‹ï¼Œæ‰“ä¸å¼€çš„åŒå­¦ï¼Œåœ¨3B1Båœ¨Bç«™ä¹Ÿæœ‰è´¦å·ï¼Œè€å¸ˆå‘çš„è¿™ä¸ªæ˜¯ã€Šçº¿æ€§ä»£æ•°çš„æœ¬è´¨ã€‹ï¼Œæœç´¢ä¸€ä¸‹å°±èƒ½æ‰¾åˆ°äº†ï¼Œè¿™ä¸ªè§†é¢‘çœ‹å®Œä»¥åå¯¹çŸ©é˜µçš„ç†è§£å°±èƒ½æ·±å…¥å¾ˆå¤šäº†","like_count":20,"discussions":[{"author":{"id":1159792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/70/ba9cecc6.jpg","nickname":"æœˆå½±","note":"","ucode":"298582FA7DBF27","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501058,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594346852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1620455,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b9/e7/74de54d9.jpg","nickname":"é»‘æš—æ£®æ—","note":"","ucode":"77CD53149482A0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377040,"discussion_content":"æ„Ÿè°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622471278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":234516,"user_name":"Geek_frank","can_delete":false,"product_type":"c1","uid":2049021,"ip_address":"","ucode":"CF973E61ED2E59","user_header":"https://static001.geekbang.org/account/avatar/00/1f/43/fd/cf190699.jpg","comment_is_top":false,"comment_ctime":1594712306,"is_pvip":true,"replies":[{"id":"87187","content":"å¦‚æœæ²¡æŠ¥é”™ï¼Œåªæ˜¯shaderå†™çš„é—®é¢˜å¯¼è‡´ç»“æœä¸å¯¹ï¼Œè°ƒè¯•èµ·æ¥æ˜¯æ¯”è¾ƒéº»çƒ¦ï¼Œåªèƒ½æœ‰è€å¿ƒåœ°ä¿®æ”¹å¹¶æµ‹è¯•ç»“æœäº†","user_name":"ä½œè€…å›å¤","comment_id":234516,"uid":"1159792","ip_address":"","utype":1,"ctime":1595293257,"user_name_real":"æœˆå½±"}],"discussion_count":2,"race_medal":0,"score":"10184646898","product_id":100053801,"comment_content":"è¯·é—®å…³äº webglç»˜å›¾å¦‚ä½•ä»£ç æµ‹è¯•ï¼Ÿæˆ‘ç…§ç€ä»£ç æ•²ä¸€éï¼Œæ²¡æœ‰å˜æ¢æ•ˆæœï¼Œä¹Ÿä¸æŠ¥é”™ã€‚æŠŠgithubçš„ä»£ç å¤åˆ¶è¿‡æ¥å°±å¯ä»¥è¿è¡Œäº†ã€‚","like_count":2,"discussions":[{"author":{"id":1159792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/70/ba9cecc6.jpg","nickname":"æœˆå½±","note":"","ucode":"298582FA7DBF27","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501412,"discussion_content":"å¦‚æœæ²¡æŠ¥é”™ï¼Œåªæ˜¯shaderå†™çš„é—®é¢˜å¯¼è‡´ç»“æœä¸å¯¹ï¼Œè°ƒè¯•èµ·æ¥æ˜¯æ¯”è¾ƒéº»çƒ¦ï¼Œåªèƒ½æœ‰è€å¿ƒåœ°ä¿®æ”¹å¹¶æµ‹è¯•ç»“æœäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595293257,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1620455,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b9/e7/74de54d9.jpg","nickname":"é»‘æš—æ£®æ—","note":"","ucode":"77CD53149482A0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377043,"discussion_content":"gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)å¯ä»¥æŸ¥çœ‹shaderæ˜¯å¦ç¼–è¯‘æˆåŠŸ å¹¶è¿”å›ç›¸å…³çš„ä¿¡æ¯ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622471556,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":246615,"user_name":"Thoughtful valiant.","can_delete":false,"product_type":"c1","uid":1078689,"ip_address":"","ucode":"669EFFC64395B1","user_header":"https://static001.geekbang.org/account/avatar/00/10/75/a1/be1a3bce.jpg","comment_is_top":false,"comment_ctime":1599439215,"is_pvip":false,"replies":[{"id":"94973","content":"æ£’æ£’å“’","user_name":"ä½œè€…å›å¤","comment_id":246615,"uid":"1159792","ip_address":"","utype":1,"ctime":1605493470,"user_name_real":"æœˆå½±"}],"discussion_count":1,"race_medal":0,"score":"5894406511","product_id":100053801,"comment_content":"å°ä¼™ä¼´å¯ä»¥åº·åº·æˆ‘ä¹‹å‰å†™çš„è¿™ä¸¤ç¯‡æ–‡ç« ï¼š<br>ä»¿å°„å˜æ¢ç†è®ºç¯‡ï¼šhttps:&#47;&#47;mp.weixin.qq.com&#47;s&#47;-aZ3tUgMv0uGOmbov-RRhw<br>ä»¿å°„å˜æ¢å®æ“ç¯‡ï¼š<br>https:&#47;&#47;mp.weixin.qq.com&#47;s&#47;LsDRJ6iJ5q1kNJA6xdADGQ<br>","like_count":1,"discussions":[{"author":{"id":1159792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/70/ba9cecc6.jpg","nickname":"æœˆå½±","note":"","ucode":"298582FA7DBF27","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505193,"discussion_content":"æ£’æ£’å“’","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605493470,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":235658,"user_name":"é˜¿é‘«","can_delete":false,"product_type":"c1","uid":1230313,"ip_address":"","ucode":"97A0BE95FB7383","user_header":"https://static001.geekbang.org/account/avatar/00/12/c5/e9/4013a191.jpg","comment_is_top":false,"comment_ctime":1595139295,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5890106591","product_id":100053801,"comment_content":"æ•°å­¦çŸ¥è¯†å…¨è¿˜ç»™è€å¸ˆäº†","like_count":1},{"had_liked":false,"id":325753,"user_name":"Leon twoâœŒğŸ»","can_delete":false,"product_type":"c1","uid":1962497,"ip_address":"","ucode":"871CDB528384FB","user_header":"https://static001.geekbang.org/account/avatar/00/1d/f2/01/fc1aad31.jpg","comment_is_top":false,"comment_ctime":1639116996,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1639116996","product_id":100053801,"comment_content":"è¯·é—®è€å¸ˆï¼Œå¦‚æœæƒ³è¦åŠ¨æ€çš„æ”¹å˜é¡¶ç‚¹çš„æ•°æ®ï¼Œä¸çŸ¥é“è¦æ€ä¹ˆåšå‘¢ï¼Œæ¯”å¦‚å®ç°ç²’å­æ•ˆæœè·Ÿéšé¼ æ ‡ç‚¹å‡»&#47;ç§»åŠ¨çš„ä½ç½®","like_count":0,"discussions":[{"author":{"id":1249969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/12/b1/3a112b27.jpg","nickname":"æ®µå¸…å¸…","note":"","ucode":"2675BC0BE154E8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581159,"discussion_content":"ç™½å­¦äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658560595,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":315670,"user_name":"ih gwyc","can_delete":false,"product_type":"c1","uid":1738427,"ip_address":"","ucode":"2CE75B2C96BB67","user_header":"https://static001.geekbang.org/account/avatar/00/1a/86/bb/115160a1.jpg","comment_is_top":false,"comment_ctime":1633940957,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1633940957","product_id":100053801,"comment_content":"æˆ‘æƒ³è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¶Šå­¦åˆ°åé¢äººè¶Šå°‘çš„åŸå› äº†ï¼Œéƒ½å¡åœ¨æ•°å­¦è¿™å—äº†å§~~~~","like_count":0,"discussions":[{"author":{"id":1249969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/12/b1/3a112b27.jpg","nickname":"æ®µå¸…å¸…","note":"","ucode":"2675BC0BE154E8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581160,"discussion_content":"ä¸€å‘¨äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658560611,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":297108,"user_name":"MG.Fre","can_delete":false,"product_type":"c1","uid":2438273,"ip_address":"","ucode":"F13921B03CC4D5","user_header":"https://static001.geekbang.org/account/avatar/00/25/34/81/f44f2f11.jpg","comment_is_top":false,"comment_ctime":1623313915,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1623313915","product_id":100053801,"comment_content":"æœˆå½±è€å¸ˆï¼Œç²’å­åŠ¨ç”»ä¸­æœ€åä¸‰ä¸ªçŸ©é˜µä¸ position çš„ä¹˜ç§¯ï¼Œç¨‹åºæ˜¯ä»å³å‘å·¦è®¡ç®—çš„å—ï¼Œæˆ‘çš„ç†è§£æ˜¯å…ˆä¸€å®šè¦æ—‹è½¬æˆ–è€…ç¼©æ”¾åæ‰èƒ½è¿›è¡Œå¹³ç§»ã€‚","like_count":0},{"had_liked":false,"id":296982,"user_name":"å‹¿æ›´æ”¹ä»»ä½•ä¿¡æ¯","can_delete":false,"product_type":"c1","uid":2028956,"ip_address":"","ucode":"575185C69C05A3","user_header":"","comment_is_top":false,"comment_ctime":1623247913,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1623247913","product_id":100053801,"comment_content":"float rad = u_rotation + 3.14 * 10.0 * p;<br>ç²’å­åŠ¨ç”»é‡Œçš„é¡¶ç‚¹ç€è‰²å™¨ä»£ç æœ‰è¿™ä¹ˆä¸€è¡Œï¼Œ ä¸ç†è§£ä¸ºå•¥è¿™é‡Œæ˜¯ä¹˜ä»¥ 10 ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1962497,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/f2/01/fc1aad31.jpg","nickname":"Leon twoâœŒğŸ»","note":"","ucode":"871CDB528384FB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537376,"discussion_content":"åŠåœˆæ—‹è½¬Math.PI = 3.14ï¼Œ* 10 å°±æ˜¯æ—‹è½¬äº”åœˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639045151,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296896,"user_name":"å‹¿æ›´æ”¹ä»»ä½•ä¿¡æ¯","can_delete":false,"product_type":"c1","uid":2028956,"ip_address":"","ucode":"575185C69C05A3","user_header":"","comment_is_top":false,"comment_ctime":1623217784,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1623217784","product_id":100053801,"comment_content":"é¡¶ç‚¹ç€è‰²å™¨ä¸­ï¼Œä¸ºä½•å¦‚ä¸‹å®ç°ï¼Ÿ <br>    float p = min(1.0, u_time &#47; u_duration);<br>ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥     float p = u_time &#47; u_duration; å‘¢","like_count":0,"discussions":[{"author":{"id":1102126,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d1/2e/ad6315ab.jpg","nickname":"è‚å£«ä¼Ÿ","note":"","ucode":"C1624B259BB34E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":394738,"discussion_content":"è¿™æ ·å¯ä»¥é˜²æ­¢ç²¾åº¦è¯¯å·®å¯¼è‡´çš„è¿›åº¦è¶Šç•Œï¼Œå› ä¸ºæŒ‰æ—¶é—´è®¡ç®—è¿›åº¦çš„è¯ï¼Œå–å€¼èŒƒå›´åœ¨[0,1.0]","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1632022421,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287737,"user_name":"Gyrate","can_delete":false,"product_type":"c1","uid":2074062,"ip_address":"","ucode":"0F799A139826EB","user_header":"https://static001.geekbang.org/account/avatar/00/1f/a5/ce/e4fae1bb.jpg","comment_is_top":false,"comment_ctime":1618129283,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618129283","product_id":100053801,"comment_content":"è€å¸ˆï¼Œè¯·é—®æœ‰æ²¡æœ‰åŠæ³•å¯¹é¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡å…ƒç€è‰²å™¨ä¸­çš„GLSLä»£ç è¿›è¡Œè°ƒè¯•å‘¢","like_count":0},{"had_liked":false,"id":241509,"user_name":"ç™½å¤œ","can_delete":false,"product_type":"c1","uid":1169110,"ip_address":"","ucode":"72FAE44C19F592","user_header":"https://static001.geekbang.org/account/avatar/00/11/d6/d6/c757b62c.jpg","comment_is_top":false,"comment_ctime":1597314655,"is_pvip":false,"replies":[{"id":"89828","content":"èµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","user_name":"ä½œè€…å›å¤","comment_id":241509,"uid":"1159792","ip_address":"","utype":1,"ctime":1598313884,"user_name_real":"æœˆå½±"}],"discussion_count":2,"race_medal":0,"score":"1597314655","product_id":100053801,"comment_content":"å…³äºè€å¸ˆä¾‹å­ä¸­vertexçŸ©é˜µçš„ä¸€äº›ç¬”è®°ï¼Œå¸®åŠ©ä¸å¤ªæ˜ç™½çš„åŒå­¦ï¼š<br><br>é¦–å…ˆï¼Œglslä¸­çŸ©é˜µçš„å®šä¹‰æ˜¯å…ˆåˆ—åè¡Œçš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç†è§£çš„çŸ©é˜µçš„è½¬ç½®çŸ©é˜µï¼ˆè¡Œåˆ—äº’æ¢ï¼‰<br><br>æ—‹è½¬ï¼š<br><br>|cosA  -sinA  0|     |x|        |xcosA-ysinA|<br>|sinA  cosA   0|  *  |y|   =   |xsinA+ycosA|   =  |x, y| æ—‹è½¬Aåº¦<br>|0     0         1|      |1|        |1               |<br><br><br>ä½ç§»ï¼š<br><br>|1  0   A|     |x|          |x+A|<br>|0  1   B|  *  |y|   =    |y+B|   =  |x, y| ä½ç§» |A, B|<br>|0  0   0|     |1|         |1    |        <br><br><br>ç¼©æ”¾ï¼š<br><br>|A  0   0|      |x|        |x*A|<br>|0  B   0|  *  |y|   =   |y*B|   =  |x, y| ä¸­xç¼©æ”¾Aï¼Œyç¼©æ”¾B<br>|0  0   0|      |1|        |1    |   <br><br><br>æ‰€ä»¥æŒ‰ç…§å®šä¹‰å°†çŸ©é˜µè½¬ç½®ä¸€ä¸‹ï¼Œå°±å¾—åˆ°ä»£ç ä¸­å®šä¹‰çš„ä¸‰ä¸ªMatrix","like_count":1,"discussions":[{"author":{"id":1159792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/70/ba9cecc6.jpg","nickname":"æœˆå½±","note":"","ucode":"298582FA7DBF27","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503758,"discussion_content":"èµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598313884,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1962497,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/f2/01/fc1aad31.jpg","nickname":"Leon twoâœŒğŸ»","note":"","ucode":"871CDB528384FB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537582,"discussion_content":"ç†è§£äº†ï¼Œæ„Ÿè°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639107155,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":238331,"user_name":"kylin","can_delete":false,"product_type":"c1","uid":1351248,"ip_address":"","ucode":"3588B62A4F9534","user_header":"https://static001.geekbang.org/account/avatar/00/14/9e/50/21e0beca.jpg","comment_is_top":false,"comment_ctime":1596123013,"is_pvip":true,"replies":[{"id":"88081","content":"å› ä¸ºçŸ©é˜µå¯ä»¥ä»¥è¡Œä¸»åºï¼Œä¹Ÿå¯ä»¥ä»¥åˆ—ä¸»åºï¼Œåœ¨glslä¸­é»˜è®¤æ˜¯ä»¥åˆ—ä¸»åº","user_name":"ä½œè€…å›å¤","comment_id":238331,"uid":"1159792","ip_address":"","utype":1,"ctime":1596167365,"user_name_real":"æœˆå½±"}],"discussion_count":1,"race_medal":0,"score":"1596123013","product_id":100053801,"comment_content":"å¤§ä½¬ï¼Œç²’å­ç³»ç»Ÿä¸­é¡¶ç‚¹ç€è‰²å™¨ä¸­çš„çŸ©é˜µä¸ºå•¥æ˜¯ä½ å‰é¢è®²çš„çŸ©é˜µçš„è½¬ç½®å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1159792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/70/ba9cecc6.jpg","nickname":"æœˆå½±","note":"","ucode":"298582FA7DBF27","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502708,"discussion_content":"å› ä¸ºçŸ©é˜µå¯ä»¥ä»¥è¡Œä¸»åºï¼Œä¹Ÿå¯ä»¥ä»¥åˆ—ä¸»åºï¼Œåœ¨glslä¸­é»˜è®¤æ˜¯ä»¥åˆ—ä¸»åº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596167365,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":234202,"user_name":"Geek_frank","can_delete":false,"product_type":"c1","uid":2049021,"ip_address":"","ucode":"CF973E61ED2E59","user_header":"https://static001.geekbang.org/account/avatar/00/1f/43/fd/cf190699.jpg","comment_is_top":false,"comment_ctime":1594618792,"is_pvip":true,"replies":[{"id":"87192","content":"å“ˆå“ˆï¼Œæˆ‘è§‰å¾—å¤§å­¦è¯¾ç¨‹å®‰æ’å¤±è´¥ï¼Œå¤§ä¸€å¤§äºŒåŸºç¡€è¯¾å¹¶ä¸å‘Šè¯‰ä½ è¿™äº›å†…å®¹çš„å®é™…ç”¨é€”ï¼Œæ‰€ä»¥æ²¡åŠ¨åŠ›å­¦ã€‚å¤§ä¸‰å¤§å››å¼€å§‹åº”ç”¨çš„æ—¶å€™æ‰å‘ç°åŸºç¡€æ²¡å­¦å¥½ã€‚","user_name":"ä½œè€…å›å¤","comment_id":234202,"uid":"1159792","ip_address":"","utype":1,"ctime":1595293470,"user_name_real":"æœˆå½±"}],"discussion_count":1,"race_medal":0,"score":"1594618792","product_id":100053801,"comment_content":"ã€‚ã€‚ã€‚å­¦äº†è¿™ä¹ˆä¹…çš„çº¿æ€§ä»£æ•°ï¼Œç°åœ¨ç»ˆäºçŸ¥é“ä¸€ç‚¹æŸäº›æ¦‚å¿µåœ¨ç°å®ä¸­çš„æ˜ å°„äº†ï¼","like_count":0,"discussions":[{"author":{"id":1159792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/70/ba9cecc6.jpg","nickname":"æœˆå½±","note":"","ucode":"298582FA7DBF27","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501316,"discussion_content":"å“ˆå“ˆï¼Œæˆ‘è§‰å¾—å¤§å­¦è¯¾ç¨‹å®‰æ’å¤±è´¥ï¼Œå¤§ä¸€å¤§äºŒåŸºç¡€è¯¾å¹¶ä¸å‘Šè¯‰ä½ è¿™äº›å†…å®¹çš„å®é™…ç”¨é€”ï¼Œæ‰€ä»¥æ²¡åŠ¨åŠ›å­¦ã€‚å¤§ä¸‰å¤§å››å¼€å§‹åº”ç”¨çš„æ—¶å€™æ‰å‘ç°åŸºç¡€æ²¡å­¦å¥½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595293470,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}