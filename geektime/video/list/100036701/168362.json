{"id":168362,"title":"41 | 跟踪诊断：应用能可视，心里才有底","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geek_netty\">https://gitee.com/geektime-geekbang/geek_netty</a></p>","comments":[{"had_liked":false,"id":200423,"user_name":"NoBody","can_delete":false,"product_type":"c3","uid":1173766,"ip_address":"","ucode":"72E1B4FCDA2469","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/06/038a9cea.jpg","comment_is_top":false,"comment_ctime":1585582414,"is_pvip":false,"replies":[{"id":78805,"content":"metric是个非常大的话题，现在也比较热门，其实好好搞，能做出的图表更好看，只是鉴于不是重点，所以只是举例做了一个，比较粗糙，你可以继续深入扩展下，不过这不属于netty的话题了。","user_name":"作者回复","user_name_real":"stroller","uid":1638649,"ctime":1588054164,"ip_address":"","comment_id":200423,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"这节不但了解到netty。还第一次认识到metric度量类的框架和思想以及jmx的一些使用。哈哈哈","like_count":3,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490023,"discussion_content":"metric是个非常大的话题，现在也比较热门，其实好好搞，能做出的图表更好看，只是鉴于不是重点，所以只是举例做了一个，比较粗糙，你可以继续深入扩展下，不过这不属于netty的话题了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588054164,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161222,"user_name":"Peter","can_delete":false,"product_type":"c3","uid":1595382,"ip_address":"","ucode":"A77322C4E07B2D","user_header":"https://static001.geekbang.org/account/avatar/00/18/57/f6/2c7ac1ad.jpg","comment_is_top":false,"comment_ctime":1576150724,"is_pvip":false,"replies":[{"id":61854,"content":"你这个真的是照葫芦画瓢，哈，metric除了gauge还有其他很多类型，比如counter, 你可以比较学习然后完善下，不能全照搬，就算能工作，也不优美。\n你说的其他类型的，你不会的，你估计被局限在好像必须使用handler是的，其实不必如此，这样你实现的思路就宽泛了。","user_name":"作者回复","user_name_real":"stroller","uid":1638649,"ctime":1576570084,"ip_address":"","comment_id":161222,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"老师您好，今天课程里的几个统计我都试着实现了https:&#47;&#47;github.com&#47;PeterLu798&#47;netty-research&#47;blob&#47;master&#47;src&#47;main&#47;java&#47;io&#47;netty&#47;example&#47;study&#47;server&#47;codec&#47;handler&#47;MetricHandler.java，可能有些不对的请老师帮着看下。还有几个不会实现，请赐教：线程数、待处理任务、积累的数量、ByteBuf分配细节","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477648,"discussion_content":"你这个真的是照葫芦画瓢，哈，metric除了gauge还有其他很多类型，比如counter, 你可以比较学习然后完善下，不能全照搬，就算能工作，也不优美。\n你说的其他类型的，你不会的，你估计被局限在好像必须使用handler是的，其实不必如此，这样你实现的思路就宽泛了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576570084,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":153583,"user_name":"lecy_L","can_delete":false,"product_type":"c3","uid":1127659,"ip_address":"","ucode":"7C96DDBB3D1F7E","user_header":"https://static001.geekbang.org/account/avatar/00/11/34/eb/d00aedb0.jpg","comment_is_top":false,"comment_ctime":1574262619,"is_pvip":false,"replies":[{"id":59123,"content":"你可以详细描述下您的问题么（比如重新提一个问题）？发送消息的延迟是仅仅是发送？还是说包括请求处理时间，是客户端还是服务器？单纯看这个问题，像客户端发送消息到服务器端收到的时间统计，网络延时？所以帮忙重新提个问题看下吧，谢谢","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1574316419,"ip_address":"","comment_id":153583,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"老师你好，我现在有个这样的场景。需要统计收集一下长连接发送消息的延迟，请问有哪些数据可以帮助我呢？以及收集方式","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475219,"discussion_content":"你可以详细描述下您的问题么（比如重新提一个问题）？发送消息的延迟是仅仅是发送？还是说包括请求处理时间，是客户端还是服务器？单纯看这个问题，像客户端发送消息到服务器端收到的时间统计，网络延时？所以帮忙重新提个问题看下吧，谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574316419,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1127659,"avatar":"https://static001.geekbang.org/account/avatar/00/11/34/eb/d00aedb0.jpg","nickname":"lecy_L","note":"","ucode":"7C96DDBB3D1F7E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":55206,"discussion_content":"你好，问题是这样的。最近接手了一个socket项目。属于管理长链接按照协议命令下推的。业务场景就是直播房间(10来个链接)中一些屏幕中的命令，比如下一步，登录，创建房间，鼠标挪动等动作。最近发现部分用户出现接收延迟，想监控采集一些数据分析原因。想了解下有哪些数据可以帮到我以及收集方式。(非网络抖动，目前是每个链接1秒30桢)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574346032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":376672,"user_name":"Geek_e75873","can_delete":false,"product_type":"c3","uid":2897667,"ip_address":"北京","ucode":"7638992BFC9FAB","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLvdkH0jmPBloZycTL2Qu6eqJZKdLF60J0ic2KMoCqyaqR69QSEvXDRg54cicOBe3YRouONCEhjpQcQ/132","comment_is_top":false,"comment_ctime":1687183119,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"etc 是什么","like_count":0},{"had_liked":false,"id":375311,"user_name":"Geek_2979fb","can_delete":false,"product_type":"c3","uid":3629083,"ip_address":"江苏","ucode":"A9AE28B4FAA8AA","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJCicxmZH6CG1QnDiakNOnr0zNcJnib8iamWek97nL91Hg6VcTQjSRicUwnOgT8wJ1lt1AzQ0ydbSXibIHg/132","comment_is_top":false,"comment_ctime":1685319368,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"整体感觉知识有点散，不成体系","like_count":0},{"had_liked":false,"id":326063,"user_name":"Z.K","can_delete":false,"product_type":"c3","uid":2061550,"ip_address":"","ucode":"ABA1FD4A77F877","user_header":"https://static001.geekbang.org/account/avatar/00/1f/74/ee/1182b202.jpg","comment_is_top":false,"comment_ctime":1639358895,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"给老师点赞","like_count":0}]}