{"id":230982,"title":"26 | 日志：如何获取Envoy的日志并进行调试","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geektime-servicemesh\">https://gitee.com/geektime-geekbang/geektime-servicemesh</a></p>","comments":[{"had_liked":false,"id":218958,"user_name":"空空如也","can_delete":false,"product_type":"c3","uid":1194238,"ip_address":"","ucode":"342F3A2C8A3C11","user_header":"https://static001.geekbang.org/account/avatar/00/12/38/fe/988bf0d9.jpg","comment_is_top":false,"comment_ctime":1589903828,"is_pvip":false,"replies":[{"id":81063,"content":"官方没有特别的建议，目前filebeat是比较轻量级的解决方案，和收集应用log没区别。\n觉得开源不保险可以考虑托管产品，如appmesh.\n外部服务可以通过定义serviceentry像管理内部服务一样。","user_name":"作者回复","user_name_real":"马若飞","uid":1046394,"ctime":1590035601,"ip_address":"","comment_id":218958,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"envoy的日志怎么采集到elk？filebeat还是fluentd？官方有啥建议吗 ？  我们系统的日志采集方案是通过log4j2的kafka appender接kafka logstash es kibana做的。我觉得在公司使用istio的担忧还是对这个东西不精通，出了问题不好解决。\n最大的问题可能就是对于外部服务的调用这块，istio也能做到完全一样的遥测，流控等功能吗？","like_count":1,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"马若飞","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495632,"discussion_content":"官方没有特别的建议，目前filebeat是比较轻量级的解决方案，和收集应用log没区别。\n觉得开源不保险可以考虑托管产品，如appmesh.\n外部服务可以通过定义serviceentry像管理内部服务一样。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590035601,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":302699,"user_name":"Geek_16c433","can_delete":false,"product_type":"c3","uid":2683568,"ip_address":"","ucode":"EE9A36FBFA450E","user_header":"https://static001.geekbang.org/account/avatar/00/28/f2/b0/07b35f6a.jpg","comment_is_top":false,"comment_ctime":1626338977,"is_pvip":false,"replies":[{"id":110124,"content":"进入envoy的container查看","user_name":"作者回复","user_name_real":"马若飞","uid":1046394,"ctime":1627354215,"ip_address":"","comment_id":302699,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"envoy通过配置accessLogFile: &#47;dev&#47;stdout能够开启日志，但是在我主机的哪个目录才能找到我的日志文件？","like_count":0,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"马若飞","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523392,"discussion_content":"进入envoy的container查看","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627354215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225735,"user_name":"郑童文","can_delete":false,"product_type":"c3","uid":1030733,"ip_address":"","ucode":"3D193715CB8549","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ba/4d/7ba09ff0.jpg","comment_is_top":false,"comment_ctime":1591843545,"is_pvip":false,"replies":[{"id":83414,"content":"这块我暂时也没有深入研究，建议还是先从官方文档入手。\nhttps:&#47;&#47;istio.io&#47;latest&#47;docs&#47;reference&#47;config&#47;networking&#47;envoy-filter&#47;#EnvoyFilter","user_name":"作者回复","user_name_real":"马若飞","uid":1046394,"ctime":1592144148,"ip_address":"","comment_id":225735,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"能否讲一下如何配置EnvoyFilter 特别是加入某些\nIstio中filter的配置和envoy 文档中的语法很不一样，要添加和配置某个filter很迷惑","like_count":0,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"马若飞","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497970,"discussion_content":"这块我暂时也没有深入研究，建议还是先从官方文档入手。\nhttps://istio.io/latest/docs/reference/config/networking/envoy-filter/#EnvoyFilter","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592144148,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215299,"user_name":"坤","can_delete":false,"product_type":"c3","uid":1010922,"ip_address":"","ucode":"74E6838226A405","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6c/ea/ce9854a5.jpg","comment_is_top":false,"comment_ctime":1588950036,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"请问503的错误一般如何排查问题。我们压测时并发时出现大量的uc uf错误。","like_count":0,"discussions":[{"author":{"id":1336951,"avatar":"https://static001.geekbang.org/account/avatar/00/14/66/77/194ba21d.jpg","nickname":"ileruza","note":"","ucode":"C3D83DF4230109","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577458,"discussion_content":"这明显就是把服务压挂了吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656127341,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}