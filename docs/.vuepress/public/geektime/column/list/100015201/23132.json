{"id":23132,"title":"09 | 从容器到容器云：谈谈Kubernetes的本质","content":"<p>你好，我是张磊。今天我和你分享的主题是：从容器到容器云，谈谈Kubernetes的本质。</p><p>在前面的四篇文章中，我以Docker项目为例，一步步剖析了Linux容器的具体实现方式。通过这些讲解你应该能够明白：一个“容器”，实际上是一个由Linux Namespace、Linux Cgroups和rootfs三种技术构建出来的进程的隔离环境。</p><p>从这个结构中我们不难看出，一个正在运行的Linux容器，其实可以被“一分为二”地看待：</p><ol>\n<li>\n<p>一组联合挂载在/var/lib/docker/aufs/mnt上的rootfs，这一部分我们称为“容器镜像”（Container Image），是容器的静态视图；</p>\n</li>\n<li>\n<p>一个由Namespace+Cgroups构成的隔离环境，这一部分我们称为“容器运行时”（Container Runtime），是容器的动态视图。</p>\n</li>\n</ol><p>更进一步地说，作为一名开发者，我并不关心容器运行时的差异。因为，在整个“开发-测试-发布”的流程中，真正承载着容器信息进行传递的，是容器镜像，而不是容器运行时。</p><p>这个重要假设，正是容器技术圈在Docker项目成功后不久，就迅速走向了“容器编排”这个“上层建筑”的主要原因：作为一家云服务商或者基础设施提供商，我只要能够将用户提交的Docker镜像以容器的方式运行起来，就能成为这个非常热闹的容器生态图上的一个承载点，从而将整个容器技术栈上的价值，沉淀在我的这个节点上。</p><!-- [[[read_end]]] --><p>更重要的是，只要从我这个承载点向Docker镜像制作者和使用者方向回溯，整条路径上的各个服务节点，比如CI/CD、监控、安全、网络、存储等等，都有我可以发挥和盈利的余地。这个逻辑，正是所有云计算提供商如此热衷于容器技术的重要原因：通过容器镜像，它们可以和潜在用户（即，开发者）直接关联起来。</p><p>从一个开发者和单一的容器镜像，到无数开发者和庞大的容器集群，容器技术实现了从“容器”到“容器云”的飞跃，标志着它真正得到了市场和生态的认可。</p><p>这样，<strong>容器就从一个开发者手里的小工具，一跃成为了云计算领域的绝对主角；而能够定义容器组织和管理规范的“容器编排”技术，则当仁不让地坐上了容器技术领域的“头把交椅”。</strong></p><p>这其中，最具代表性的容器编排工具，当属Docker公司的Compose+Swarm组合，以及Google与RedHat公司共同主导的Kubernetes项目。</p><p>我在前面介绍容器技术发展历史的四篇预习文章中，已经对这两个开源项目做了详细的剖析和评述。所以，在今天的这次分享中，我会专注于本专栏的主角Kubernetes项目，谈一谈它的设计与架构。</p><p>跟很多基础设施领域先有工程实践、后有方法论的发展路线不同，Kubernetes项目的理论基础则要比工程实践走得靠前得多，这当然要归功于Google公司在2015年4月发布的Borg论文了。</p><p>Borg系统，一直以来都被誉为Google公司内部最强大的“秘密武器”。虽然略显夸张，但这个说法倒不算是吹牛。</p><p>因为，相比于Spanner、BigTable等相对上层的项目，Borg要承担的责任，是承载Google公司整个基础设施的核心依赖。在Google公司已经公开发表的基础设施体系论文中，Borg项目当仁不让地位居整个基础设施技术栈的最底层。</p><p><img src=\"https://static001.geekbang.org/resource/image/c7/bd/c7ed0043465bccff2efc1a1257e970bd.png?wh=1244*728\" alt=\"\"><br>\n图片来源：<a href=\"http://malteschwarzkopf.de/research/assets/google-stack.pdf\">Malte Schwarzkopf. “Operating system support for warehouse-scale computing”. PhD thesis. University of Cambridge Computer Laboratory (to appear), 2015, Chapter 2.</a></p><p>上面这幅图，来自于Google Omega论文的第一作者的博士毕业论文。它描绘了当时Google已经公开发表的整个基础设施栈。在这个图里，你既可以找到MapReduce、BigTable等知名项目，也能看到Borg和它的继任者Omega位于整个技术栈的最底层。</p><p>正是由于这样的定位，Borg可以说是Google最不可能开源的一个项目。而幸运的是，得益于Docker项目和容器技术的风靡，它却终于得以以另一种方式与开源社区见面，这个方式就是Kubernetes项目。</p><p>所以，相比于“小打小闹”的Docker公司、“旧瓶装新酒”的Mesos社区，<strong>Kubernetes项目从一开始就比较幸运地站上了一个他人难以企及的高度</strong>：在它的成长阶段，这个项目每一个核心特性的提出，几乎都脱胎于Borg/Omega系统的设计与经验。更重要的是，这些特性在开源社区落地的过程中，又在整个社区的合力之下得到了极大的改进，修复了很多当年遗留在Borg体系中的缺陷和问题。</p><p>所以，尽管在发布之初被批评是“曲高和寡”，但是在逐渐觉察到Docker技术栈的“稚嫩”和Mesos社区的“老迈”之后，这个社区很快就明白了：Kubernetes项目在Borg体系的指导下，体现出了一种独有的“先进性”与“完备性”，而这些特质才是一个基础设施领域开源项目赖以生存的核心价值。</p><p>为了更好地理解这两种特质，我们不妨从Kubernetes的顶层设计说起。</p><p><span class=\"orange\">首先，Kubernetes项目要解决的问题是什么？</span></p><p>编排？调度？容器云？还是集群管理？</p><p>实际上，这个问题到目前为止都没有固定的答案。因为在不同的发展阶段，Kubernetes需要着重解决的问题是不同的。</p><p>但是，对于大多数用户来说，他们希望Kubernetes项目带来的体验是确定的：现在我有了应用的容器镜像，请帮我在一个给定的集群上把这个应用运行起来。</p><p>更进一步地说，我还希望Kubernetes能给我提供路由网关、水平扩展、监控、备份、灾难恢复等一系列运维能力。</p><p>等一下，这些功能听起来好像有些耳熟？这不就是经典PaaS（比如，Cloud Foundry）项目的能力吗？</p><p>而且，有了Docker之后，我根本不需要什么Kubernetes、PaaS，只要使用Docker公司的Compose+Swarm项目，就完全可以很方便地DIY出这些功能了！</p><p>所以说，如果Kubernetes项目只是停留在拉取用户镜像、运行容器，以及提供常见的运维功能的话，那么别说跟“原生”的Docker Swarm项目竞争了，哪怕跟经典的PaaS项目相比也难有什么优势可言。</p><p>而实际上，在定义核心功能的过程中，Kubernetes项目正是依托着Borg项目的理论优势，才在短短几个月内迅速站稳了脚跟，进而确定了一个如下图所示的全局架构：</p><p><img src=\"https://static001.geekbang.org/resource/image/8e/67/8ee9f2fa987eccb490cfaa91c6484f67.png?wh=1920*1080\" alt=\"\"></p><p>我们可以看到，Kubernetes项目的架构，跟它的原型项目Borg非常类似，都由Master和Node两种节点组成，而这两种角色分别对应着控制节点和计算节点。</p><p>其中，控制节点，即Master节点，由三个紧密协作的独立组件组合而成，它们分别是负责API服务的kube-apiserver、负责调度的kube-scheduler，以及负责容器编排的kube-controller-manager。整个集群的持久化数据，则由kube-apiserver处理后保存在Etcd中。</p><p>而计算节点上最核心的部分，则是一个叫作kubelet的组件。</p><p><strong>在Kubernetes项目中，kubelet主要负责同容器运行时（比如Docker项目）打交道</strong>。而这个交互所依赖的，是一个称作CRI（Container Runtime Interface）的远程调用接口，这个接口定义了容器运行时的各项核心操作，比如：启动一个容器需要的所有参数。</p><p>这也是为何，Kubernetes项目并不关心你部署的是什么容器运行时、使用的什么技术实现，只要你的这个容器运行时能够运行标准的容器镜像，它就可以通过实现CRI接入到Kubernetes项目当中。</p><p>而具体的容器运行时，比如Docker项目，则一般通过OCI这个容器运行时规范同底层的Linux操作系统进行交互，即：把CRI请求翻译成对Linux操作系统的调用（操作Linux Namespace和Cgroups等）。</p><p><strong>此外，kubelet还通过gRPC协议同一个叫作Device Plugin的插件进行交互</strong>。这个插件，是Kubernetes项目用来管理GPU等宿主机物理设备的主要组件，也是基于Kubernetes项目进行机器学习训练、高性能作业支持等工作必须关注的功能。</p><p>而<strong>kubelet的另一个重要功能，则是调用网络插件和存储插件为容器配置网络和持久化存储</strong>。这两个插件与kubelet进行交互的接口，分别是CNI（Container Networking Interface）和CSI（Container Storage Interface）。</p><p>实际上，kubelet这个奇怪的名字，来自于Borg项目里的同源组件Borglet。不过，如果你浏览过Borg论文的话，就会发现，这个命名方式可能是kubelet组件与Borglet组件的唯一相似之处。因为Borg项目，并不支持我们这里所讲的容器技术，而只是简单地使用了Linux Cgroups对进程进行限制。</p><p>这就意味着，像Docker这样的“容器镜像”在Borg中是不存在的，Borglet组件也自然不需要像kubelet这样考虑如何同Docker进行交互、如何对容器镜像进行管理的问题，也不需要支持CRI、CNI、CSI等诸多容器技术接口。</p><p>可以说，kubelet完全就是为了实现Kubernetes项目对容器的管理能力而重新实现的一个组件，与Borg之间并没有直接的传承关系。</p><blockquote>\n<p>备注：虽然不使用Docker，但Google内部确实在使用一个包管理工具，名叫Midas Package Manager (MPM)，其实它可以部分取代Docker镜像的角色。</p>\n</blockquote><p><span class=\"orange\">那么，Borg对于Kubernetes项目的指导作用又体现在哪里呢？</span></p><p>答案是，Master节点。</p><p>虽然在Master节点的实现细节上Borg项目与Kubernetes项目不尽相同，但它们的出发点却高度一致，即：如何编排、管理、调度用户提交的作业？</p><p>所以，Borg项目完全可以把Docker镜像看作一种新的应用打包方式。这样，Borg团队过去在大规模作业管理与编排上的经验就可以直接“套”在Kubernetes项目上了。</p><p>这些经验最主要的表现就是，<strong>从一开始，Kubernetes项目就没有像同时期的各种“容器云”项目那样，把Docker作为整个架构的核心，而仅仅把它作为最底层的一个容器运行时实现。</strong></p><p>而Kubernetes项目要着重解决的问题，则来自于Borg的研究人员在论文中提到的一个非常重要的观点：</p><blockquote>\n<p>运行在大规模集群中的各种任务之间，实际上存在着各种各样的关系。这些关系的处理，才是作业编排和管理系统最困难的地方。</p>\n</blockquote><p>事实也正是如此。</p><p>其实，这种任务与任务之间的关系，在我们平常的各种技术场景中随处可见。比如，一个Web应用与数据库之间的访问关系，一个负载均衡器和它的后端服务之间的代理关系，一个门户应用与授权组件之间的调用关系。</p><p>更进一步地说，同属于一个服务单位的不同功能之间，也完全可能存在这样的关系。比如，一个Web应用与日志搜集组件之间的文件交换关系。</p><p>而在容器技术普及之前，传统虚拟机环境对这种关系的处理方法都是比较“粗粒度”的。你会经常发现很多功能并不相关的应用被一股脑儿地部署在同一台虚拟机中，只是因为它们之间偶尔会互相发起几个HTTP请求。</p><p>更常见的情况则是，一个应用被部署在虚拟机里之后，你还得手动维护很多跟它协作的守护进程（Daemon），用来处理它的日志搜集、灾难恢复、数据备份等辅助工作。</p><p>但容器技术出现以后，你就不难发现，在“功能单位”的划分上，容器有着独一无二的“细粒度”优势：毕竟容器的本质，只是一个进程而已。</p><p>也就是说，只要你愿意，那些原先拥挤在同一个虚拟机里的各个应用、组件、守护进程，都可以被分别做成镜像，然后运行在一个个专属的容器中。它们之间互不干涉，拥有各自的资源配额，可以被调度在整个集群里的任何一台机器上。而这，正是一个PaaS系统最理想的工作状态，也是所谓“微服务”思想得以落地的先决条件。</p><p>当然，如果只做到“封装微服务、调度单容器”这一层次，Docker Swarm项目就已经绰绰有余了。如果再加上Compose项目，你甚至还具备了处理一些简单依赖关系的能力，比如：一个“Web容器”和它要访问的数据库“DB容器”。</p><p>在Compose项目中，你可以为这样的两个容器定义一个“link”，而Docker项目则会负责维护这个“link”关系，其具体做法是：Docker会在Web容器中，将DB容器的IP地址、端口等信息以环境变量的方式注入进去，供应用进程使用，比如：</p><pre><code>    DB_NAME=/web/db\n    DB_PORT=tcp://172.17.0.5:5432\n    DB_PORT_5432_TCP=tcp://172.17.0.5:5432\n    DB_PORT_5432_TCP_PROTO=tcp\n    DB_PORT_5432_TCP_PORT=5432\n    DB_PORT_5432_TCP_ADDR=172.17.0.5\n</code></pre><p>而当DB容器发生变化时（比如，镜像更新，被迁移到其他宿主机上等等），这些环境变量的值会由Docker项目自动更新。<strong>这就是平台项目自动地处理容器间关系的典型例子。</strong></p><p>可是，如果我们现在的需求是，要求这个项目能够处理前面提到的所有类型的关系，甚至还要能够支持未来可能出现的更多种类的关系呢？</p><p>这时，“link”这种单独针对一种案例设计的解决方案就太过简单了。如果你做过架构方面的工作，就会深有感触：一旦要追求项目的普适性，那就一定要从顶层开始做好设计。</p><p>所以，<strong>Kubernetes项目最主要的设计思想是，从更宏观的角度，以统一的方式来定义任务之间的各种关系，并且为将来支持更多种类的关系留有余地。</strong></p><p>比如，Kubernetes项目对容器间的“访问”进行了分类，首先总结出了一类非常常见的“紧密交互”的关系，即：这些应用之间需要非常频繁的交互和访问；又或者，它们会直接通过本地文件进行信息交换。</p><p>在常规环境下，这些应用往往会被直接部署在同一台机器上，通过Localhost通信，通过本地磁盘目录交换文件。而在Kubernetes项目中，这些容器则会被划分为一个“Pod”，Pod里的容器共享同一个Network Namespace、同一组数据卷，从而达到高效率交换信息的目的。</p><p>Pod是Kubernetes项目中最基础的一个对象，源自于Google Borg论文中一个名叫Alloc的设计。在后续的章节中，我们会对Pod做更进一步地阐述。</p><p>而对于另外一种更为常见的需求，比如Web应用与数据库之间的访问关系，Kubernetes项目则提供了一种叫作“Service”的服务。像这样的两个应用，往往故意不部署在同一台机器上，这样即使Web应用所在的机器宕机了，数据库也完全不受影响。可是，我们知道，对于一个容器来说，它的IP地址等信息不是固定的，那么Web应用又怎么找到数据库容器的Pod呢？</p><p>所以，Kubernetes项目的做法是给Pod绑定一个Service服务，而Service服务声明的IP地址等信息是“终生不变”的。这个<strong>Service服务的主要作用，就是作为Pod的代理入口（Portal），从而代替Pod对外暴露一个固定的网络地址</strong>。</p><p>这样，对于Web应用的Pod来说，它需要关心的就是数据库Pod的Service信息。不难想象，Service后端真正代理的Pod的IP地址、端口等信息的自动更新、维护，则是Kubernetes项目的职责。</p><p>像这样，围绕着容器和Pod不断向真实的技术场景扩展，我们就能够摸索出一幅如下所示的Kubernetes项目核心功能的“全景图”。</p><p><img src=\"https://static001.geekbang.org/resource/image/16/06/16c095d6efb8d8c226ad9b098689f306.png?wh=1920*1080\" alt=\"\"></p><p>按照这幅图的线索，我们从容器这个最基础的概念出发，首先遇到了容器间“紧密协作”关系的难题，于是就扩展到了Pod；有了Pod之后，我们希望能一次启动多个应用的实例，这样就需要Deployment这个Pod的多实例管理器；而有了这样一组相同的Pod后，我们又需要通过一个固定的IP地址和端口以负载均衡的方式访问它，于是就有了Service。</p><p>可是，如果现在两个不同Pod之间不仅有“访问关系”，还要求在发起时加上授权信息。最典型的例子就是Web应用对数据库访问时需要Credential（数据库的用户名和密码）信息。那么，在Kubernetes中这样的关系又如何处理呢？</p><p>Kubernetes项目提供了一种叫作Secret的对象，它其实是一个保存在Etcd里的键值对数据。这样，你把Credential信息以Secret的方式存在Etcd里，Kubernetes就会在你指定的Pod（比如，Web应用的Pod）启动时，自动把Secret里的数据以Volume的方式挂载到容器里。这样，这个Web应用就可以访问数据库了。</p><p><strong>除了应用与应用之间的关系外，应用运行的形态是影响“如何容器化这个应用”的第二个重要因素。</strong></p><p>为此，Kubernetes定义了新的、基于Pod改进后的对象。比如Job，用来描述一次性运行的Pod（比如，大数据任务）；再比如DaemonSet，用来描述每个宿主机上必须且只能运行一个副本的守护进程服务；又比如CronJob，则用于描述定时任务等等。</p><p>如此种种，正是Kubernetes项目定义容器间关系和形态的主要方法。</p><p>可以看到，Kubernetes项目并没有像其他项目那样，为每一个管理功能创建一个指令，然后在项目中实现其中的逻辑。这种做法，的确可以解决当前的问题，但是在更多的问题来临之后，往往会力不从心。</p><p>相比之下，在Kubernetes项目中，我们所推崇的使用方法是：</p><ul>\n<li>首先，通过一个“编排对象”，比如Pod、Job、CronJob等，来描述你试图管理的应用；</li>\n<li>然后，再为它定义一些“服务对象”，比如Service、Secret、Horizontal Pod Autoscaler（自动水平扩展器）等。这些对象，会负责具体的平台级功能。</li>\n</ul><p><strong>这种使用方法，就是所谓的“声明式API”。这种API对应的“编排对象”和“服务对象”，都是Kubernetes项目中的API对象（API Object）。</strong></p><p>这就是Kubernetes最核心的设计理念，也是接下来我会重点剖析的关键技术点。</p><p><span class=\"orange\">最后，我来回答一个更直接的问题：Kubernetes项目如何启动一个容器化任务呢？</span></p><p>比如，我现在已经制作好了一个Nginx容器镜像，希望让平台帮我启动这个镜像。并且，我要求平台帮我运行两个完全相同的Nginx副本，以负载均衡的方式共同对外提供服务。</p><ul>\n<li>\n<p>如果是自己DIY的话，可能需要启动两台虚拟机，分别安装两个Nginx，然后使用keepalived为这两个虚拟机做一个虚拟IP。</p>\n</li>\n<li>\n<p>而如果使用Kubernetes项目呢？你需要做的则是编写如下这样一个YAML文件（比如名叫nginx-deployment.yaml）：</p>\n</li>\n</ul><pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: nginx-deployment\n  labels:\n    app: nginx\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: nginx\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n      - name: nginx\n        image: nginx:1.7.9\n        ports:\n        - containerPort: 80\n</code></pre><p>在上面这个YAML文件中，我们定义了一个Deployment对象，它的主体部分（spec.template部分）是一个使用Nginx镜像的Pod，而这个Pod的副本数是2（replicas=2）。</p><p>然后执行：</p><pre><code>$ kubectl create -f nginx-deployment.yaml\n</code></pre><p>这样，两个完全相同的Nginx容器副本就被启动了。</p><p>不过，这么看来，做同样一件事情，Kubernetes用户要做的工作也不少嘛。</p><p>别急，在后续的讲解中，我会陆续介绍Kubernetes项目这种“声明式API”的种种好处，以及基于它实现的强大的编排能力。</p><p>拭目以待吧。</p><h2>总结</h2><p>首先，我和你一起回顾了容器的核心知识，说明了容器其实可以分为两个部分：容器运行时和容器镜像。</p><p>然后，我重点介绍了Kubernetes项目的架构，详细讲解了它如何使用“声明式API”来描述容器化业务和容器间关系的设计思想。</p><p>实际上，过去很多的集群管理项目（比如Yarn、Mesos，以及Swarm）所擅长的，都是把一个容器，按照某种规则，放置在某个最佳节点上运行起来。这种功能，我们称为“调度”。</p><p>而Kubernetes项目所擅长的，是按照用户的意愿和整个系统的规则，完全自动化地处理好容器之间的各种关系。<strong>这种功能，就是我们经常听到的一个概念：编排。</strong></p><p>所以说，Kubernetes项目的本质，是为用户提供一个具有普遍意义的容器编排工具。</p><p>不过，更重要的是，Kubernetes项目为用户提供的不仅限于一个工具。它真正的价值，乃在于提供了一套基于容器构建分布式系统的基础依赖。关于这一点，相信你会在今后的学习中，体会越来越深。</p><h2>思考题</h2><ol>\n<li>\n<p>这今天的分享中，我介绍了Kubernetes项目的架构。你是否了解了Docker Swarm（SwarmKit项目）和Kubernetes在架构上和使用方法上的异同呢？</p>\n</li>\n<li>\n<p>在Kubernetes之前，很多项目都没办法管理“有状态”的容器，即，不能从一台宿主机“迁移”到另一台宿主机上的容器。你是否能列举出，阻止这种“迁移”的原因都有哪些呢？</p>\n</li>\n</ol><p>感谢你的收听，欢迎你给我留言，也欢迎分享给更多的朋友一起阅读。</p>","neighbors":{"left":{"article_title":"08 | 白话容器基础（四）：重新认识Docker容器","id":18119},"right":{"article_title":"10 | Kubernetes一键部署利器：kubeadm","id":39712}},"comments":[{"had_liked":false,"id":23855,"user_name":"Geek_zz","can_delete":false,"product_type":"c1","uid":1130682,"ip_address":"","ucode":"A3AC7C2991B50D","user_header":"https://static001.geekbang.org/account/avatar/00/11/40/ba/2c8af305.jpg","comment_is_top":false,"comment_ctime":1536709189,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"2024466305605","product_id":100015201,"comment_content":"对这个专栏看的越多，越觉得作者讲得有条理又有深度，物超超超所值","like_count":472},{"had_liked":false,"id":24469,"user_name":"Jeff.W","can_delete":false,"product_type":"c1","uid":1140420,"ip_address":"","ucode":"2043F83FB7B39C","user_header":"https://static001.geekbang.org/account/avatar/00/11/66/c4/038f9325.jpg","comment_is_top":false,"comment_ctime":1537059976,"is_pvip":false,"replies":[{"id":"8973","content":"没毛病","user_name":"作者回复","comment_id":24469,"uid":"1218095","ip_address":"","utype":1,"ctime":1537087153,"user_name_real":"Geek_6ef93d"}],"discussion_count":8,"race_medal":0,"score":"1929977375880","product_id":100015201,"comment_content":"从微服务架构来讲，多个独立功能内聚的服务带来了整体的灵活性，但是同时也带来了部署运维的复杂度提升，这时Docker配合Devops带来了不少的便利(轻量、隔离、一致性、CI、CD等)解决了不少问题，再配合compose，看起来一切都很美了，为什么还需要K8s？可以试着这样理解么？把微服务理解为人，那么服务治理其实就是人之间的沟通而已，人太多了就需要生存空间和沟通方式的优化，这就需要集群和编排了。Docker Compose，swarm，可以解决少数人之间的关系，比如把手机号给你，你就可以方便的找到我，但是如果手机号变更的时候就会麻烦，人多了也会麻烦。而k8s是站在上帝视角俯视芸芸众生后的高度抽象，他看到了大概有哪些类人(组织）以及不同组织有什么样的特点（Job、CornJob、Autoscaler、StatefulSet、DaemonSet...），不同组织之间交流可能需要什么（ConfigMap,Secret...）,这样比价紧密的人们在相同pod中，通过Service-不会变更的手机号，来和不同的组织进行沟通，Deployment、RC则可以帮组人们快速构建组织。Dokcer 后出的swarm mode，有类似的视角抽象（比如Service），不过相对来说并不完善。以上，是否可以这样理解？","like_count":450,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423996,"discussion_content":"没毛病","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537087153,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1080812,"avatar":"https://static001.geekbang.org/account/avatar/00/10/7d/ec/ccd30c1d.jpg","nickname":"WangBo","note":"","ucode":"8BFCC4E2639175","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":40448,"discussion_content":"凑个热闹，service可以理解成 公司，pod是公司里的人。人可以辞职入职，人的手机号也可以变更，但公司在工商局(k8s)的注册信息（组织机构代码、公司名称）不会变。","likes_number":23,"is_delete":false,"is_hidden":false,"ctime":1572194355,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1153968,"avatar":"https://static001.geekbang.org/account/avatar/00/11/9b/b0/30d6c3d8.jpg","nickname":"xiaohinata","note":"","ucode":"5402942AF518C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":35581,"discussion_content":"凑个热闹，service理解成身份证号码，service和pod的关系理解成实名登记，手机号在怎么换通过身份证号码也可以找到","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1571290597,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1035744,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cd/e0/c85bb948.jpg","nickname":"朱雯","note":"","ucode":"064C45FBF6B51F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":318942,"discussion_content":"可能是没管理过大型系统，所以很难理解为啥要微服务，为啥又要容器化，在之前的我看来，小规模的交换自身的数据，也就是手机号就完事了，现实中也没有人会交换身份证好，但是站在大社会的角度来看，手机号变更，就是意味着人变更的逻辑肯定是行不通的，但是对于只知道你原先手机号的人肯定找不到了，从这个角度看，容器编排是相当重要的。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1603887758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1169147,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d6/fb/837af7bf.jpg","nickname":"董永刚","note":"","ucode":"ADA792B226A6CD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370387,"discussion_content":"牛👍","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1619398821,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1035744,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cd/e0/c85bb948.jpg","nickname":"朱雯","note":"","ucode":"064C45FBF6B51F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":318941,"discussion_content":"这两个凑热闹的我居然看懂了，我看完之后的反应也是身份证和手机号的想法。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1603887589,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1145624,"avatar":"https://static001.geekbang.org/account/avatar/00/11/7b/18/6e44e6e0.jpg","nickname":"恺撒之剑","note":"","ucode":"18F55D253647E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550305,"discussion_content":"理解到位","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644479598,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1154101,"avatar":"https://static001.geekbang.org/account/avatar/00/11/9c/35/9dc79371.jpg","nickname":"你好旅行者","note":"","ucode":"5C72A428DC28F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306232,"discussion_content":"@WangBo @xiaohinata 你俩可太会凑热闹了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600226041,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":28930,"user_name":"大豪。","can_delete":false,"product_type":"c1","uid":1210469,"ip_address":"","ucode":"6C66E15D42BC88","user_header":"https://static001.geekbang.org/account/avatar/00/12/78/65/fc80bc6d.jpg","comment_is_top":false,"comment_ctime":1538199192,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"632898391704","product_id":100015201,"comment_content":"这价格讲到这种程度，跟捡到便宜似的，感谢作者","like_count":148},{"had_liked":false,"id":23937,"user_name":"Tigerfive","can_delete":false,"product_type":"c1","uid":1221781,"ip_address":"","ucode":"D29522D4EFABEF","user_header":"https://static001.geekbang.org/account/avatar/00/12/a4/95/474d5eaf.jpg","comment_is_top":false,"comment_ctime":1536725403,"is_pvip":false,"replies":[{"id":"8756","content":"是的，到目前为止，迁移都是做不到的，只能删除后在新的节点上重新创建","user_name":"作者回复","comment_id":23937,"uid":"1218095","ip_address":"","utype":1,"ctime":1536731702,"user_name_real":"Geek_6ef93d"}],"discussion_count":4,"race_medal":0,"score":"448213324187","product_id":100015201,"comment_content":"感觉不能迁移“有状态”的容器，是因为迁移的是容器的rootfs，但是一些动态视图是没有办法伴随迁移一同进行迁移的。","like_count":105,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423788,"discussion_content":"是的，到目前为止，迁移都是做不到的，只能删除后在新的节点上重新创建","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536731702,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2092532,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/ed/f4/611b7bdc.jpg","nickname":"李沐沐","note":"","ucode":"6D1A38A212F5D8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312245,"discussion_content":"有状态的容器跑在虚拟机里面，基于虚拟机的层次做迁移","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1602639402,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1005431,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/77/046d310b.jpg","nickname":"明月出","note":"","ucode":"F61BC34FDA802D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2092532,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/ed/f4/611b7bdc.jpg","nickname":"李沐沐","note":"","ucode":"6D1A38A212F5D8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387546,"discussion_content":"不能迁移容器，我还不能迁移虚拟机？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628238650,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":312245,"ip_address":""},"score":387546,"extra":""}]},{"author":{"id":2153136,"avatar":"https://static001.geekbang.org/account/avatar/00/20/da/b0/a2425eca.jpg","nickname":"甜质粥","note":"","ucode":"696E929660A124","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302160,"discussion_content":"如果能做到迁移是不是一件好事","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598802038,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23866,"user_name":"hugeo","can_delete":false,"product_type":"c1","uid":1042824,"ip_address":"","ucode":"438F289EDD21CD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e9/88/941e488a.jpg","comment_is_top":false,"comment_ctime":1536711474,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"358018997042","product_id":100015201,"comment_content":"学费太值得了，老师太会教课了说得很清楚","like_count":83},{"had_liked":false,"id":23975,"user_name":"Xiye","can_delete":false,"product_type":"c1","uid":1062516,"ip_address":"","ucode":"9F8E73180435AF","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIGzSM6be2xCNS00kQYHDgXO3icOoOSsvnz3FiaCov5Kgs6oaXkBicLbicuEerJjiaNPWxB0FTVmdur3kg/132","comment_is_top":false,"comment_ctime":1536736046,"is_pvip":false,"replies":[{"id":"8834","content":"没错！","user_name":"作者回复","comment_id":23975,"uid":"1218095","ip_address":"","utype":1,"ctime":1536821685,"user_name_real":"Geek_6ef93d"}],"discussion_count":2,"race_medal":0,"score":"276414642990","product_id":100015201,"comment_content":"对于第二个问题，是不是像存储在文件或者数据库里的数据还是比较好迁移，但是对于缓存，临时存储的数据是不是就不太好迁移。","like_count":64,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423797,"discussion_content":"没错！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536821685,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2179383,"avatar":"https://static001.geekbang.org/account/avatar/00/21/41/37/b89f3d67.jpg","nickname":"我在睡觉","note":"","ucode":"6503B611151D3C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334566,"discussion_content":"我倒是觉得你说的两种情况迁移成本是一样的，对弈k8s来说","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607901019,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":35319,"user_name":"小谢同学","can_delete":false,"product_type":"c1","uid":1032544,"ip_address":"","ucode":"E809E6BC470631","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c1/60/fc3689d0.jpg","comment_is_top":false,"comment_ctime":1540516913,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"267828489265","product_id":100015201,"comment_content":"k8s就是把组织协调这项管理学落实到计算机工程上","like_count":62},{"had_liked":false,"id":108048,"user_name":"ECHO","can_delete":false,"product_type":"c1","uid":1101496,"ip_address":"","ucode":"E78B3B557D469C","user_header":"https://static001.geekbang.org/account/avatar/00/10/ce/b8/92178ccd.jpg","comment_is_top":false,"comment_ctime":1561653656,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"177655312792","product_id":100015201,"comment_content":"订这么多课程，这个作者最有水平，太值了！把如此复杂的容器技术说的引人入胜！","like_count":41,"discussions":[{"author":{"id":2145489,"avatar":"https://static001.geekbang.org/account/avatar/00/20/bc/d1/f6944790.jpg","nickname":"zkqcs","note":"","ucode":"8EB24C8BF6BBF1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312608,"discussion_content":"阿里大佬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602747452,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24519,"user_name":"hpfish","can_delete":false,"product_type":"c1","uid":1217377,"ip_address":"","ucode":"86DB066E5B6D89","user_header":"https://static001.geekbang.org/account/avatar/00/12/93/61/3e4607c7.jpg","comment_is_top":false,"comment_ctime":1537104385,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"173335796225","product_id":100015201,"comment_content":"面向yaml文件编程","like_count":40,"discussions":[{"author":{"id":1076347,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM5suA7q5mM40ULTY5OlQpoerPRMQD8NcMbKxDHhNmjQNUCngkSJEzRvMVDibAHw2whGZxAFlibzribOA/132","nickname":"jxlwqq","note":"","ucode":"94AEEEEB55C6AA","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":205283,"discussion_content":"哈哈哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584283866,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":189448,"user_name":"Neo","can_delete":false,"product_type":"c1","uid":1004003,"ip_address":"","ucode":"DA1C960B5F23DC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/51/e3/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1584517288,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"130433536168","product_id":100015201,"comment_content":"在极客时间总共买了19个专栏了，可以不夸张的说，张老师的《深入剖析kubernetes》是最好的没有之一。内容循序渐进，以发问的方式由浅入深，很有代入感。极客时间啥时候开个赞赏功能，我要给老师加鸡腿，哈哈哈。","like_count":30},{"had_liked":false,"id":25880,"user_name":"LiJiao","can_delete":false,"product_type":"c1","uid":1157621,"ip_address":"","ucode":"E274D90C022D49","user_header":"https://static001.geekbang.org/account/avatar/00/11/a9/f5/4aed8129.jpg","comment_is_top":false,"comment_ctime":1537460254,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"96026740766","product_id":100015201,"comment_content":"迁移可以简单分为两类：磁盘数据文件不变，进程重启；磁盘数据文件不变、内存数据也不变，相当于连带进程一起挪过去。第一种类型有很简单的方法：挂载云盘，从空间上解耦。第二种类型就复杂了，需要将内存数据一点点迁移过去，最后瞬间切换。IaaS很早就应用热迁移技术了。<br><br>Kubernetes则讨巧了，只着眼于应用，直接约定容器是可以随时被杀死的，热迁移就没有那么重要了。甚至连IP都隐藏了，又绕过了一个大难题～","like_count":22},{"had_liked":false,"id":289014,"user_name":"楊_宵夜","can_delete":false,"product_type":"c1","uid":1019302,"ip_address":"","ucode":"7BA0CADC5F23BB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/a6/22c37c91.jpg","comment_is_top":false,"comment_ctime":1618820546,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"78928231874","product_id":100015201,"comment_content":"2021 年 04 月 19 日前来膜拜, K8s 宣布弃用 Docker, 再一次说明了张 sir 对 k8s 架构的见解是多么正确且深入.","like_count":19},{"had_liked":false,"id":42970,"user_name":"刘岚乔月","can_delete":false,"product_type":"c1","uid":1095289,"ip_address":"","ucode":"99A9AB4E4E1111","user_header":"https://static001.geekbang.org/account/avatar/00/10/b6/79/22e582a5.jpg","comment_is_top":false,"comment_ctime":1543121123,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"74557565155","product_id":100015201,"comment_content":"第一次接触K8S，这篇文章整整看了一个小时，算是对整体有个模糊的轮廓概念。。。<br>PS：讲真心不错","like_count":17,"discussions":[{"author":{"id":1271529,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epIRUib6JlvCShzgvX3PlD2kWgl65VHoS5jhh5Jibgsz2SeRvdTt5IW1WWnN2Uyf5a6Sk8WQuKicSgSw/132","nickname":"山人","note":"","ucode":"8285F39E9F36E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380635,"discussion_content":"不瞒你说，我都是看三遍以上的，反复看才能尝试理解","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1624612042,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":37914,"user_name":"盆盆","can_delete":false,"product_type":"c1","uid":1218511,"ip_address":"","ucode":"8FA6E2C78F561A","user_header":"https://static001.geekbang.org/account/avatar/00/12/97/cf/bd257cfb.jpg","comment_is_top":false,"comment_ctime":1541806744,"is_pvip":false,"replies":[{"id":"13666","content":"语言大师你好","user_name":"作者回复","comment_id":37914,"uid":"1218095","ip_address":"","utype":1,"ctime":1541897331,"user_name_real":"Geek_6ef93d"}],"discussion_count":3,"race_medal":0,"score":"65966316184","product_id":100015201,"comment_content":"赞，这几天一直在追更，欲罢不能😃😃<br>Kubelet这个词，词根let是小的意思，小猪piglet，微软PowerShell也有cmdlet，班门弄斧了，不知道对不","like_count":15,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":428525,"discussion_content":"语言大师你好","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1541897331,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1335273,"avatar":"https://static001.geekbang.org/account/avatar/00/14/5f/e9/510fa022.jpg","nickname":"吕小荣","note":"","ucode":"9CB18695616330","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":402117,"discussion_content":"那 Java 的  Servlets 是啥意思呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633792946,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1631578,"avatar":"https://static001.geekbang.org/account/avatar/00/18/e5/5a/b7987ae1.jpg","nickname":"ken","note":"","ucode":"164151B21C153F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1335273,"avatar":"https://static001.geekbang.org/account/avatar/00/14/5f/e9/510fa022.jpg","nickname":"吕小荣","note":"","ucode":"9CB18695616330","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556112,"discussion_content":"就是服务中的一个小服务","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647221343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":402117,"ip_address":""},"score":556112,"extra":""}]}]},{"had_liked":false,"id":24082,"user_name":"Rod","can_delete":false,"product_type":"c1","uid":1183042,"ip_address":"","ucode":"A3F675888D9061","user_header":"https://static001.geekbang.org/account/avatar/00/12/0d/42/22eae851.jpg","comment_is_top":false,"comment_ctime":1536800113,"is_pvip":false,"replies":[{"id":"8825","content":"service vip不会变，除非你把它删了重建。通过dns解析的是headless service，它不会分配vip。","user_name":"作者回复","comment_id":24082,"uid":"1218095","ip_address":"","utype":1,"ctime":1536821345,"user_name_real":"Geek_6ef93d"}],"discussion_count":1,"race_medal":0,"score":"65961309553","product_id":100015201,"comment_content":"@老师。我记得service的ip也是可变的。不变的是service name。通过kube dns解析。当然service可以绑定主机名。但是那样就不能高可用。不知道我说的对不对？","like_count":15,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423832,"discussion_content":"service vip不会变，除非你把它删了重建。通过dns解析的是headless service，它不会分配vip。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536821345,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23974,"user_name":"huan","can_delete":false,"product_type":"c1","uid":1012286,"ip_address":"","ucode":"46CB95F6E4E5FF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/72/3e/534db55d.jpg","comment_is_top":false,"comment_ctime":1536735924,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"61666278068","product_id":100015201,"comment_content":"1 我自己用swarm后，感觉和docker 公司的整体风格很一致：上手简单，但是最后还是没用的很好，因为毕竟需要太多的依赖需要在不同容器之间传递。k8s从更高视野看服务器软件架构从而提出更有效而且看起来更重的方案，最终被证明是有效的。","like_count":14},{"had_liked":false,"id":24081,"user_name":"骨汤鸡蛋面","can_delete":false,"product_type":"c1","uid":1050002,"ip_address":"","ucode":"2AC141A523E710","user_header":"https://static001.geekbang.org/account/avatar/00/10/05/92/b609f7e3.jpg","comment_is_top":false,"comment_ctime":1536799899,"is_pvip":true,"replies":[{"id":"8826","content":"前面是paas层用的，后面是容器用的","user_name":"作者回复","comment_id":24081,"uid":"1218095","ip_address":"","utype":1,"ctime":1536821368,"user_name_real":"Geek_6ef93d"}],"discussion_count":1,"race_medal":0,"score":"48781440155","product_id":100015201,"comment_content":"一直对CNI、CSI 有点困惑，为什么不将其纳入到container runtime&#47;oci 的范畴？","like_count":11,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423831,"discussion_content":"前面是paas层用的，后面是容器用的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536821368,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24500,"user_name":"Scott","can_delete":false,"product_type":"c1","uid":1014800,"ip_address":"","ucode":"7E57FDCB5E5D49","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/10/165cb374.jpg","comment_is_top":false,"comment_ctime":1537089072,"is_pvip":false,"replies":[{"id":"8995","content":"没有，这一块的设计我后面会讲到","user_name":"作者回复","comment_id":24500,"uid":"1218095","ip_address":"","utype":1,"ctime":1537152518,"user_name_real":"Geek_6ef93d"}],"discussion_count":2,"race_medal":0,"score":"44486762032","product_id":100015201,"comment_content":"为什么一个node上，kubelet与Device plugin要走gRPC，这个没有CSI这样的专门中间层吗？","like_count":10,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424010,"discussion_content":"没有，这一块的设计我后面会讲到","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537152518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1011174,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/6d/e6/57bfae83.jpg","nickname":"Cybertrunk","note":"","ucode":"D557A710E1835F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":214530,"discussion_content":"都5G了，感觉Pod可以跑在地球上的任何地方，那时就知道gRPC的用处了。Google可以根据Pod的特性，设计出超微Pod设备，进入你血管清除血栓和结石的超微机器人不是梦。","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1585203593,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23913,"user_name":"sprzhing","can_delete":false,"product_type":"c1","uid":1218617,"ip_address":"","ucode":"5C58ADB2A10CF6","user_header":"https://wx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELheoqTu05oOnCW3FdxiaIzYvmMMMNmKXDtwtdvtNdeuj8mgAWB9zibubHcPE5K8KPGX53GzxlibBRNg/132","comment_is_top":false,"comment_ctime":1536717272,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"40191422936","product_id":100015201,"comment_content":"不能迁移是因为容器在本地的很多状态修改不会commit到云端吧？","like_count":9},{"had_liked":false,"id":268624,"user_name":"njleon007","can_delete":false,"product_type":"c1","uid":2026567,"ip_address":"","ucode":"54F38C1C834598","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLvfic0yoAJYvT08jxcrExhr4xJ6twJv18q0ka2QmDUr4R6dXszjQJgQib7HPLAykMefBkO1AWqWhQQ/132","comment_is_top":false,"comment_ctime":1608276464,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"31673047536","product_id":100015201,"comment_content":"二刷，慢慢深入","like_count":7},{"had_liked":false,"id":242274,"user_name":"ch_ort","can_delete":false,"product_type":"c1","uid":1580926,"ip_address":"","ucode":"B79746E687F29E","user_header":"","comment_is_top":false,"comment_ctime":1597654946,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"31662426018","product_id":100015201,"comment_content":"Kubernete的核心组建有：API Server（API服务）、Scheduler（调度）、Controller Manager（容器编排）、Etcd（集群的持久化数据）、Kubelet（计算节点最核心的组件）。<br><br>计算节点上的Kubelet通过CRI与容器交互，通过CSI与存储交互，通过CNI与网络交互，通过grpc与Devcie Plugin交互。<br><br>Kubernetes与之前的Yarn、Mesos之间最大的区别在于：Yarn、Mesos更多的是完成“调度”的功能，而Kubernetes更擅长处理容器之间的关系，提供的是“编排”的功能<br>","like_count":7},{"had_liked":false,"id":167936,"user_name":"土豆海贼","can_delete":false,"product_type":"c1","uid":1109089,"ip_address":"","ucode":"0246DB9692C223","user_header":"https://static001.geekbang.org/account/avatar/00/10/ec/61/703f1a80.jpg","comment_is_top":false,"comment_ctime":1577966553,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"31642737625","product_id":100015201,"comment_content":"感谢作者的输出，逻辑很清晰，讲的也很透彻。有状态的应用弹性扩缩容也好，迁移也罢目前貌似都没有太好的解法，因此我们一般会要求尽量把状态不要放在web层，尽量下移，把“状态”信息存放到缓存或者消息中。我理解的有状态的应用阻止“迁移”的原因主要是将关键信息存放在了内存中，所以不能直接做“迁移”。有一些存放在硬盘上的，或者单独跑定时任务的一些算法类的应用可以通过volume等方式解决，但毕竟不是正道。","like_count":7},{"had_liked":false,"id":23864,"user_name":"pytimer","can_delete":false,"product_type":"c1","uid":1014666,"ip_address":"","ucode":"A0038F6CB1F9AC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ercmNryEicqDS73icpUu7W0BnZ7ZIia6jR7kdVMIzH0q1d7L8EKAYWeTJcribibGcHnJzpsjRFxAe26egQ/132","comment_is_top":false,"comment_ctime":1536711353,"is_pvip":false,"replies":[{"id":"8741","content":"那就要看有多少种状态需要处理啦","user_name":"作者回复","comment_id":23864,"uid":"1218095","ip_address":"","utype":1,"ctime":1536720506,"user_name_real":"Geek_6ef93d"}],"discussion_count":1,"race_medal":0,"score":"31601482425","product_id":100015201,"comment_content":"第二个问题: 我觉得应该是很多容器数据都是挂载在本地路径，所以没办法直接进行迁移。<br><br>如果容器的数据挂载在共享存储上，那是不是没有kubernetes也是可以迁移有状态的容器？","like_count":7,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423761,"discussion_content":"那就要看有多少种状态需要处理啦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536720506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":36603,"user_name":"x","can_delete":false,"product_type":"c1","uid":1229769,"ip_address":"","ucode":"96C5BFB1449FFB","user_header":"https://static001.geekbang.org/account/avatar/00/12/c3/c9/a8e03342.jpg","comment_is_top":false,"comment_ctime":1541169699,"is_pvip":false,"replies":[{"id":"13039","content":"结论太想当然了。具体哪种driver是取决于宿主机的，aufs好端端的就被你淘汰了……","user_name":"作者回复","comment_id":36603,"uid":"1218095","ip_address":"","utype":1,"ctime":1541339091,"user_name_real":"Geek_6ef93d"}],"discussion_count":1,"race_medal":0,"score":"27310973475","product_id":100015201,"comment_content":"现在docker 的Storage Driver基本都是overlay2 了，aufs快被淘汰了了吧","like_count":6,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":427932,"discussion_content":"结论太想当然了。具体哪种driver是取决于宿主机的，aufs好端端的就被你淘汰了……","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1541339091,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85292,"user_name":"Myth","can_delete":false,"product_type":"c1","uid":1496118,"ip_address":"","ucode":"66F91BFD6390C8","user_header":"https://static001.geekbang.org/account/avatar/00/16/d4/36/328d2a5a.jpg","comment_is_top":false,"comment_ctime":1555031263,"is_pvip":false,"replies":[{"id":"31578","content":"是HA，proxy提供负载均衡","user_name":"作者回复","comment_id":85292,"uid":"1218095","ip_address":"","utype":1,"ctime":1555697554,"user_name_real":"Geek_6ef93d"}],"discussion_count":1,"race_medal":0,"score":"23029867743","product_id":100015201,"comment_content":"使用 keepalived 算容灾备份，不算负载均衡吧？","like_count":5,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446618,"discussion_content":"是HA，proxy提供负载均衡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555697554,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":26377,"user_name":"龙坤","can_delete":false,"product_type":"c1","uid":1233455,"ip_address":"","ucode":"D1724E68D6304D","user_header":"https://static001.geekbang.org/account/avatar/00/12/d2/2f/04882ff8.jpg","comment_is_top":false,"comment_ctime":1537582129,"is_pvip":false,"replies":[{"id":"9597","content":"开源和商业不分家","user_name":"作者回复","comment_id":26377,"uid":"1218095","ip_address":"","utype":1,"ctime":1537613195,"user_name_real":"Geek_6ef93d"}],"discussion_count":1,"race_medal":1,"score":"23012418609","product_id":100015201,"comment_content":"容器OCI规范推出，那么统一规范的容器镜像都可以在不同厂商自主研发的容器运行时上运行。随着时间的推进，在容器编排上的需求，虽然有swarm和mesos的方案，但是对于一些有能力做基于容器PaaS平台的大公司，并且还有一些具有自主研发能力、野心大和具有一定PaaS平台资源的，并想借用容器赚钱的大公司，就不太乐意用这些方案（所以为什么大公司前期都迫切需要一个容器规范出现的原因吧）。这时也迫切需要一个可以对接自主研发的“运行时”的工具出来，并该工具能弥补容器编排不完美这个缺陷。个人觉得，Kubernetes的出现确实伟大，伟大到击垮Docker公司原先建立的都围着他转的容器社区体系，也伟大到可以又让大公司赚钱。 --- 纯属个人理解","like_count":5,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424609,"discussion_content":"开源和商业不分家","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537613195,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":340722,"user_name":"let_me_go","can_delete":false,"product_type":"c1","uid":1510177,"ip_address":"","ucode":"A5936F5C5E3D65","user_header":"https://static001.geekbang.org/account/avatar/00/17/0b/21/f1aea35b.jpg","comment_is_top":false,"comment_ctime":1649077930,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18828947114","product_id":100015201,"comment_content":"读完这篇文章，颇有感悟<br>K8s站在了一个更高的视角，对于它来说，容器只是一种基础能力，不关心其实现，不需要非得与docker 这种容器进行绑定，它提供的是容器之间编排的能力。而根据docker衍生出来的Compose+Swarm，只是站在了docker的视角，思考该怎么扩大docker的影响范围。k8s对战docker，看起来属实是降维打击了。<br>编程中，我们经常说到抽象能力，相比docker，k8s无疑是站在一个更高的视角，抽象程度更高。一提到List，通常就会想到ArrayList，LinkedList，站在更高的角度来看，这都是属于Collection(集合)的一部分。代码的抽象程度越高，普适性也就越好。抽象能力，代表了你对事物的见解能力。<br>Docker本身是一个很优秀的产品，从一个小公司成长起来，在大厂商的层层包围下异军突起属实不易。作为一个小公司，只能好好耕耘自己的产品，与时间赛跑，不断加深自己的护城河，从docker出发，衍生出对应的整个生态圈。但是大公司呢？他们有足够的沉淀，有能力站在一个更高的起点，轻而易举拿出一些更好的产品击溃小公司，更可怕的是他们不用追求盈利，他们玩不起，也可以硬生生的拖垮你。想想之前的反垄断，一个行业被巨头垄断以后就能只手遮天了，就可以轻而易举的磨灭一些敢于挑战的小公司。<br>很可惜，docker最终还是没有突破巨头的包围圈。小说里通常都是草根人物逆袭成龙傲天，但现实却是能成为龙傲天的主角背后是因为有一个龙傲天的的爹。","like_count":4},{"had_liked":false,"id":24415,"user_name":"silverhawk","can_delete":false,"product_type":"c1","uid":1018649,"ip_address":"","ucode":"BFBC8AF32868DA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8b/19/a15d060d.jpg","comment_is_top":false,"comment_ctime":1536988951,"is_pvip":false,"replies":[{"id":"8967","content":"对，两个分开的","user_name":"作者回复","comment_id":24415,"uid":"1218095","ip_address":"","utype":1,"ctime":1537086844,"user_name_real":"Geek_6ef93d"}],"discussion_count":2,"race_medal":0,"score":"18716858135","product_id":100015201,"comment_content":"写的很好，谢谢。如果我现在有一个service已经被打包成pod用k8s管理，这个service对每个request需要查询外部一个k,v store，那么现在想把这个k,v store比如redis也做成pod，是做到一个pod里面，还是service这样比较合适，听起来好像做成service，两者之间还是继续用GRPC？","like_count":4,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423973,"discussion_content":"对，两个分开的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537086844,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1105387,"avatar":"https://static001.geekbang.org/account/avatar/00/10/dd/eb/80f9d212.jpg","nickname":"lttzzlll","note":"","ucode":"FA160F7C02ABAA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389087,"discussion_content":"怎么能是grpc呢？只要两者可以互通，就是Redis的Resp，就是个TCP协议。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629113717,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24276,"user_name":"Frank","can_delete":false,"product_type":"c1","uid":1111985,"ip_address":"","ucode":"9DADD72C193296","user_header":"https://static001.geekbang.org/account/avatar/00/10/f7/b1/982ea185.jpg","comment_is_top":false,"comment_ctime":1536889057,"is_pvip":true,"replies":[{"id":"8884","content":"job是pod的管理器，后面会细讲","user_name":"作者回复","comment_id":24276,"uid":"1218095","ip_address":"","utype":1,"ctime":1536889252,"user_name_real":"Geek_6ef93d"}],"discussion_count":1,"race_medal":0,"score":"18716758241","product_id":100015201,"comment_content":"老师，问下pod和job  到底是关系？ 我没有懂呢","like_count":4,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423910,"discussion_content":"job是pod的管理器，后面会细讲","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536889252,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":248793,"user_name":"Kevin","can_delete":false,"product_type":"c1","uid":2183828,"ip_address":"","ucode":"AA63014830E5F2","user_header":"https://static001.geekbang.org/account/avatar/00/21/52/94/cf3b7903.jpg","comment_is_top":false,"comment_ctime":1600312390,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14485214278","product_id":100015201,"comment_content":"这位老师的功底和基本功真的很扎实，不然不能这样归纳和总结出这些东西","like_count":3},{"had_liked":false,"id":228790,"user_name":"大海","can_delete":false,"product_type":"c1","uid":1820113,"ip_address":"","ucode":"3CFF5494CC0604","user_header":"https://static001.geekbang.org/account/avatar/00/1b/c5/d1/5c4faaae.jpg","comment_is_top":false,"comment_ctime":1592809945,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14477711833","product_id":100015201,"comment_content":"看过Kubernetes In Action，再看这个，比较爽。条理非常清晰，写得非常好。","like_count":3},{"had_liked":false,"id":24007,"user_name":"阿硕","can_delete":false,"product_type":"c1","uid":1210978,"ip_address":"","ucode":"39856C29E6614B","user_header":"https://static001.geekbang.org/account/avatar/00/12/7a/62/9b248708.jpg","comment_is_top":false,"comment_ctime":1536748932,"is_pvip":false,"replies":[{"id":"8831","content":"对对","user_name":"作者回复","comment_id":24007,"uid":"1218095","ip_address":"","utype":1,"ctime":1536821598,"user_name_real":"Geek_6ef93d"}],"discussion_count":1,"race_medal":0,"score":"14421650820","product_id":100015201,"comment_content":"整个集群的持久化数据，则由 kube-apiserver 处理后保存在 Ectd 中。是不是Etcd呢？","like_count":3,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423806,"discussion_content":"对对","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536821598,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333583,"user_name":"圆滚滚","can_delete":false,"product_type":"c1","uid":1351012,"ip_address":"","ucode":"E4D81822A87D50","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/64/272dc1b7.jpg","comment_is_top":false,"comment_ctime":1644411769,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10234346361","product_id":100015201,"comment_content":"18年就有这个专栏了么，诶，看到的晚了点。老师讲的非常棒！","like_count":2},{"had_liked":false,"id":47291,"user_name":"乔良qiaoliang","can_delete":false,"product_type":"c1","uid":1075315,"ip_address":"","ucode":"DDE301B3DF57A8","user_header":"https://static001.geekbang.org/account/avatar/00/10/68/73/3cda533e.jpg","comment_is_top":false,"comment_ctime":1544101554,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10134036146","product_id":100015201,"comment_content":"最后nginx 的例子是在一个虚拟机里面跑两个pod ? 那如果想像第一个例子一样在两台虚拟机里各跑一个呢？","like_count":2,"discussions":[{"author":{"id":1625051,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLtwSXKialWYQgo1OXWYIsyj4zxK8AbQb1tp6iceZ5cGPYFcoczlubd7VicJPuvWqHrFXJXtUTP4kd9A/132","nickname":"Monokai","note":"","ucode":"367B7F2EFB6BA5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4749,"discussion_content":"用daemonset","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565704469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":44920,"user_name":"宝爷","can_delete":false,"product_type":"c1","uid":1153664,"ip_address":"","ucode":"DD517FA7EB59AB","user_header":"https://static001.geekbang.org/account/avatar/00/11/9a/80/2bf8d7fc.jpg","comment_is_top":false,"comment_ctime":1543507885,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10133442477","product_id":100015201,"comment_content":"在 Kubernetes 之前，很多项目都没办法管理“有状态”的容器，即，不能从一台宿主机“迁移”到另一台宿主机上的容器。<br><br>在Kubernetes之后，我也看不出哪里能够对有状态的容器进行迁移了，内存中的东西，这个不是一般的麻烦，性价比很低","like_count":2,"discussions":[{"author":{"id":1218128,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/50/bde525b1.jpg","nickname":"北卡","note":"","ucode":"2D947A61689FC6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":136859,"discussion_content":"以前我们有个图片上传下载的程序，一开始是在内存中直接做缓存的。但有段时间aws的机器经常挂掉，如果那个程序不能直接迁移就风险太大。后来把缓存部分用redis来做了，就实现了迁移，不过那个有状态程序也变成无状态程序了。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1579168940,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":44050,"user_name":"一生一世一双人","can_delete":false,"product_type":"c1","uid":1148589,"ip_address":"","ucode":"563500BA097B45","user_header":"https://static001.geekbang.org/account/avatar/00/11/86/ad/dd7bfa58.jpg","comment_is_top":false,"comment_ctime":1543366524,"is_pvip":false,"replies":[{"id":"15720","content":"一般的做法是把kubernetes 当layer 0用","user_name":"作者回复","comment_id":44050,"uid":"1218095","ip_address":"","utype":1,"ctime":1543371362,"user_name_real":"Geek_6ef93d"}],"discussion_count":1,"race_medal":0,"score":"10133301116","product_id":100015201,"comment_content":"老师，k8s能在大数据运维里有什么好的解决方案嘛？","like_count":2,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430611,"discussion_content":"一般的做法是把kubernetes 当layer 0用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543371362,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":40378,"user_name":"王关胜","can_delete":false,"product_type":"c1","uid":1011159,"ip_address":"","ucode":"A11D227B153865","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6d/d7/a30f4940.jpg","comment_is_top":false,"comment_ctime":1542608830,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10132543422","product_id":100015201,"comment_content":"虽然我已经了解这块了，但是再看一遍张磊老师的剖析，很深刻！","like_count":2},{"had_liked":false,"id":35874,"user_name":"kid1412z","can_delete":false,"product_type":"c1","uid":1123310,"ip_address":"","ucode":"00652FFE1B1103","user_header":"https://static001.geekbang.org/account/avatar/00/11/23/ee/9a45407e.jpg","comment_is_top":false,"comment_ctime":1540826916,"is_pvip":false,"replies":[{"id":"12799","content":"都可以，实验环境部署在一起。高可用分开。","user_name":"作者回复","comment_id":35874,"uid":"1218095","ip_address":"","utype":1,"ctime":1540875502,"user_name_real":"Geek_6ef93d"}],"discussion_count":1,"race_medal":0,"score":"10130761508","product_id":100015201,"comment_content":"老师请问，master节点是单点部署上面有三个模块 还是可以多点部署，每个节点担任不同的角色？","like_count":2,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":427696,"discussion_content":"都可以，实验环境部署在一起。高可用分开。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1540875502,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":337813,"user_name":"阿白","can_delete":false,"product_type":"c1","uid":2535948,"ip_address":"","ucode":"28D1FB38CCC669","user_header":"https://static001.geekbang.org/account/avatar/00/26/b2/0c/5a217ec6.jpg","comment_is_top":false,"comment_ctime":1647075175,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5942042471","product_id":100015201,"comment_content":"老师讲得真好，说实话我在上个月购买此课程的时候，还觉得当前已经时2022年了，还来看2018年的Kubernetes版本的课程是不是太out了（呵呵，我这个人有个毛病，看电子书文档的时候，喜欢 Sort by public data），但是老师的课程和其他的那些中文的、英文的教程相比有截然不同的特色，既有深入一些的内容（Docker解剖），又有一览众山小的结构图，更有宏观和本质的剖析。当前公司正在进行IaaS服务的微服务化改造和容器化改造，我虽然没有机会直接参与编码（我是做自动化测试和CI&#47;CD的），但是借老师的肩膀真正进一步搞懂Docker 和 Kubernetes，相信也会有很大的技能和绩效帮助的，哈哈。再次谢谢老师，接着往下学后面的课程了~~~","like_count":1},{"had_liked":false,"id":334742,"user_name":"DFighting","can_delete":false,"product_type":"c1","uid":1233193,"ip_address":"","ucode":"F3BA2426FF8582","user_header":"https://static001.geekbang.org/account/avatar/00/12/d1/29/1b1234ed.jpg","comment_is_top":false,"comment_ctime":1645098760,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5940066056","product_id":100015201,"comment_content":"今天课程最大的收获就一句话：编排是处理关系抽象模型的，调度是处理执行抽象模型的。感觉k8s成功关键是他是基于容器的一种抽象，而docker只是容器的一种实现而已。感觉和编码一样，先定位好抽象的层次，然后是抽象出模型，最后才是下手，k8s真是站在brog的肩膀之上了","like_count":1},{"had_liked":false,"id":264217,"user_name":"永不言弃","can_delete":false,"product_type":"c1","uid":1104956,"ip_address":"","ucode":"D6F426124F3938","user_header":"https://static001.geekbang.org/account/avatar/00/10/dc/3c/bee2744b.jpg","comment_is_top":false,"comment_ctime":1606382188,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5901349484","product_id":100015201,"comment_content":"继续了解Kubernetes ，看看到底牛成啥样，能赢过原来Docker自己打造的生态","like_count":1},{"had_liked":false,"id":259780,"user_name":"剑八","can_delete":false,"product_type":"c1","uid":1297630,"ip_address":"","ucode":"0A09F41DB8A4E7","user_header":"https://static001.geekbang.org/account/avatar/00/13/cc/de/e28c01e1.jpg","comment_is_top":false,"comment_ctime":1604832275,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5899799571","product_id":100015201,"comment_content":"Kubernetes要从整体容器编排的视角去做的顶层架构。<br>容器及相应容器间的关系，做了抽象。<br>对于安全，服务对象的IP地址负载均衡抽出平台型的功能，对于容器来讲只需要定义我需要哪个服务，至于这个服务IP是什么以及有多少机子，以及这个服务本身的容灾则由平台级功能进行提供。<br><br>docker设计上本身缺少容器间关系的高度抽象，如web容器需要访问数据库，docker的做法是用容器变量去实现，这样如果数据库地址变了或发生容灾，实际是很难动态去变的。且对于web容器使用者来讲已经接触到具像的ip地址了。","like_count":1},{"had_liked":false,"id":208620,"user_name":"杨壮壮爱学习","can_delete":false,"product_type":"c1","uid":1901177,"ip_address":"","ucode":"A674916A01B805","user_header":"https://static001.geekbang.org/account/avatar/00/1d/02/79/8b33aa66.jpg","comment_is_top":false,"comment_ctime":1587392032,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5882359328","product_id":100015201,"comment_content":"看到这章，发现物超所值，感谢作者！","like_count":1},{"had_liked":false,"id":201343,"user_name":"Geek_1","can_delete":false,"product_type":"c1","uid":1707085,"ip_address":"","ucode":"15AB250206A084","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL7pexxicTgIdcyQKFuyjwlRTwQNQ8A7MbS9ubnngL32zu2PBrhVbkDia5NLiacqT1SrYMOZOgtmcqeQ/132","comment_is_top":false,"comment_ctime":1585753669,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5880720965","product_id":100015201,"comment_content":"膜拜大神！这课程太太太赞了！！感谢老师！","like_count":1},{"had_liked":false,"id":198218,"user_name":"0xTang","can_delete":false,"product_type":"c1","uid":1019659,"ip_address":"","ucode":"82F5282EF3044B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8f/0b/a438de52.jpg","comment_is_top":false,"comment_ctime":1585418056,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5880385352","product_id":100015201,"comment_content":"K8s分为master和worker，master有apiserver，scheduler，control manager，etcd。worker有kubulete，kubu proxy，和运行时容器","like_count":1},{"had_liked":false,"id":195872,"user_name":"向死而生的devil","can_delete":false,"product_type":"c1","uid":1620093,"ip_address":"","ucode":"728FFF5B75CC5D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erCsjMVpe5IvMcJNC0ddz3bcmMCkUibgKaqn85SqUXfnGx2X77phtoic8HicZtzBpA0iaXrlDpS5N747w/132","comment_is_top":false,"comment_ctime":1585220358,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5880187654","product_id":100015201,"comment_content":"大爱这种讲解方式，很生动，特别容易吸收和理解。","like_count":1},{"had_liked":false,"id":195600,"user_name":"Cybertrunk","can_delete":false,"product_type":"c1","uid":1011174,"ip_address":"","ucode":"D557A710E1835F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6d/e6/57bfae83.jpg","comment_is_top":false,"comment_ctime":1585203041,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5880170337","product_id":100015201,"comment_content":"“它真正的价值，乃在于提供了一套基于容器构建分布式系统的基础依赖。” 这不妥妥滴就是一个微服务架构吗？！","like_count":1},{"had_liked":false,"id":183555,"user_name":"zackery","can_delete":false,"product_type":"c1","uid":1052282,"ip_address":"","ucode":"92D737D6773855","user_header":"https://static001.geekbang.org/account/avatar/00/10/0e/7a/ab527628.jpg","comment_is_top":false,"comment_ctime":1583065473,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5878032769","product_id":100015201,"comment_content":"1.没有用过swarm<br>2.不能迁移常见的原因：<br>  1）依赖服务间，调用关系与ip绑定。k8s 的 service 就是解决这个问题的<br>  2）容器运行，需要用到本地的磁盘上的数据。可以用到分布式文件系统来解决","like_count":1},{"had_liked":false,"id":152515,"user_name":"ChrisTan","can_delete":false,"product_type":"c1","uid":1633619,"ip_address":"","ucode":"E07B49B638AA8F","user_header":"https://static001.geekbang.org/account/avatar/00/18/ed/53/6eb6601b.jpg","comment_is_top":false,"comment_ctime":1574038548,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5869005844","product_id":100015201,"comment_content":"ip tables 有nat路由转发功能","like_count":1},{"had_liked":false,"id":130919,"user_name":"德才少年","can_delete":false,"product_type":"c1","uid":1387877,"ip_address":"","ucode":"ED2664924F127B","user_header":"https://static001.geekbang.org/account/avatar/00/15/2d/65/b2f209e7.jpg","comment_is_top":false,"comment_ctime":1567575025,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5862542321","product_id":100015201,"comment_content":"老师讲课能把发展历史讲明白，讲技术时，先是提出问题，然后通过技术解决问题，更是能抽丝剥茧，讲得清楚透彻。上学这么多年，头一次喜欢学习的感觉。","like_count":1},{"had_liked":false,"id":54481,"user_name":"淸曉","can_delete":false,"product_type":"c1","uid":1332899,"ip_address":"","ucode":"6E63DA4E29FE09","user_header":"https://static001.geekbang.org/account/avatar/00/14/56/a3/649d861c.jpg","comment_is_top":false,"comment_ctime":1545879542,"is_pvip":false,"replies":[{"id":"19832","content":"靠宿主机上的iptables啊","user_name":"作者回复","comment_id":54481,"uid":"1218095","ip_address":"","utype":1,"ctime":1545953763,"user_name_real":"Geek_6ef93d"}],"discussion_count":1,"race_medal":0,"score":"5840846838","product_id":100015201,"comment_content":"老师你好！<br>server VIP是虚拟出来的，外界怎么来通过VIP访问到后端呢？是在路由器上做什么吗，还是别的？","like_count":1,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434470,"discussion_content":"靠宿主机上的iptables啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545953763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":34965,"user_name":"Raymond","can_delete":false,"product_type":"c1","uid":1017066,"ip_address":"","ucode":"AC4730FF76DE72","user_header":"https://static001.geekbang.org/account/avatar/00/0f/84/ea/8c8ad78e.jpg","comment_is_top":false,"comment_ctime":1540371248,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5835338544","product_id":100015201,"comment_content":"docker swarm用起来是简单，但是bug多啊，已经碰到几次在执行命令之后整个集群down掉了。。。不止我一个人碰到这种问题，哎，集群DOWN了要重建所以有服务，超级蛋疼","like_count":1},{"had_liked":false,"id":27298,"user_name":"Gmc2","can_delete":false,"product_type":"c1","uid":1143932,"ip_address":"","ucode":"D1B035A98AC123","user_header":"https://static001.geekbang.org/account/avatar/00/11/74/7c/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1537867792,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5832835088","product_id":100015201,"comment_content":"精彩！","like_count":1},{"had_liked":false,"id":24544,"user_name":"silver","can_delete":false,"product_type":"c1","uid":1186740,"ip_address":"","ucode":"908E3C8560D6E1","user_header":"https://static001.geekbang.org/account/avatar/00/12/1b/b4/a6db1c1e.jpg","comment_is_top":false,"comment_ctime":1537135019,"is_pvip":false,"replies":[{"id":"8990","content":"mesos是旧瓶，marathon是新酒","user_name":"作者回复","comment_id":24544,"uid":"1218095","ip_address":"","utype":1,"ctime":1537152329,"user_name_real":"Geek_6ef93d"}],"discussion_count":1,"race_medal":0,"score":"5832102315","product_id":100015201,"comment_content":"为什么说mesos是老迈和旧瓶装新酒呢？Mesos本身所做的事情是有限的，很大一部分取决于它的scheduler,谈论mesos不是很大一方面取决于scheduler么","like_count":1,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424027,"discussion_content":"mesos是旧瓶，marathon是新酒","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537152329,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24079,"user_name":"徐海浪","can_delete":false,"product_type":"c1","uid":1078528,"ip_address":"","ucode":"21801C420D0610","user_header":"https://static001.geekbang.org/account/avatar/00/10/75/00/618b20da.jpg","comment_is_top":false,"comment_ctime":1536799868,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"5831767164","product_id":100015201,"comment_content":"2: Kubernetes 项目Pod 绑定Service 服务，可以使得在迁移服务提供方时，自动管理内部ip映射关系，使用方无感。我想到项目上的数据库可以这么做的有Redis(NAT)&#47;Mysql(主从)&#47;MongoDB(副本集)，web应用在同一个Pod可以做负载均衡(?)，至于dubbo应用自动注册更不用说，这样在部署集成时可以用k8s拉起整个业务系统。","like_count":1},{"had_liked":false,"id":23863,"user_name":"马若飞","can_delete":false,"product_type":"c1","uid":1046394,"ip_address":"","ucode":"3D0327329A10AE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","comment_is_top":false,"comment_ctime":1536710837,"is_pvip":false,"replies":[{"id":"8738","content":"istio就是kubernetes一个体系下的东西，我很快会讲到。类似于，阿里和支付宝吧。","user_name":"作者回复","comment_id":23863,"uid":"1218095","ip_address":"","utype":1,"ctime":1536720421,"user_name_real":"Geek_6ef93d"}],"discussion_count":1,"race_medal":0,"score":"5831678133","product_id":100015201,"comment_content":"k8s的架构分master和node和现在的Istio很像，也是分了控制面板和数据面板，估计Istio的设计借鉴了k8s","like_count":1,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423760,"discussion_content":"istio就是kubernetes一个体系下的东西，我很快会讲到。类似于，阿里和支付宝吧。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536720421,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23862,"user_name":"天下","can_delete":false,"product_type":"c1","uid":1139564,"ip_address":"","ucode":"B7A23205108AFF","user_header":"","comment_is_top":false,"comment_ctime":1536710832,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5831678128","product_id":100015201,"comment_content":"没法迁移是不能方便解决相互之间的依赖，耦合度高的，随着项目的变大各种依赖会让人崩溃。","like_count":1},{"had_liked":false,"id":23847,"user_name":"咕噜男爵-Tony","can_delete":false,"product_type":"c1","uid":1219258,"ip_address":"","ucode":"8C841851AC767F","user_header":"https://static001.geekbang.org/account/avatar/00/12/9a/ba/f5eb2a66.jpg","comment_is_top":false,"comment_ctime":1536683936,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5831651232","product_id":100015201,"comment_content":"尝试回答第二个问题，阻止迁移的情况有volum 映射，造成数据文件与固定宿主机绑定；还有就是网络问题。","like_count":1},{"had_liked":false,"id":360309,"user_name":"HIM","can_delete":false,"product_type":"c1","uid":3029424,"ip_address":"广东","ucode":"3EB56F684CB343","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epq2AfJ26y9tHb6z7kyRyF9vdFsEYcibgwZKZNkwaHpLLLLNyjT4NeqCnYjcdOOibN1OwG27X0ede6g/132","comment_is_top":false,"comment_ctime":1666419030,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1666419030","product_id":100015201,"comment_content":"作者以严谨的态度写的这篇专栏，将知识点娓娓道来，让我们学得非常丝滑顺畅， 真是太舒服了。更重要的是这种像做科研的严谨态度写的文章，使得知识点清晰明了，张老师yyds","like_count":0},{"had_liked":false,"id":351867,"user_name":"Geek_e2be2a","can_delete":false,"product_type":"c1","uid":2233595,"ip_address":"","ucode":"A226E03FFA28EA","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM5dE76DFqQlkTdseGfAKdcb7XSpS8eOlJ5W0g5jJxWe8EoBb5Yz4JGZU6zPFosonSibudko7yDgfiaw/132","comment_is_top":false,"comment_ctime":1658240347,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1658240347","product_id":100015201,"comment_content":"1. Docker swarm和k8s底层都用了容器技术，swarm只是简单对容器关系做link按一定规则进行部署，k8s更加强大灵活，从跟宏观的角度统一的方式定义容器间的各种关系也支持更多的应用形态。<br>2. 不能迁移 a. 因为有服务间的应用，迁移后可能导致服务链断开。b. 服务本身有状态，状态不能一起迁移","like_count":0},{"had_liked":false,"id":349141,"user_name":"dst","can_delete":false,"product_type":"c1","uid":1861196,"ip_address":"","ucode":"9177BBB6C8B905","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKx6EdicYYuYK745brMa9yAlkZs2YmzxRAm4BQ2kw9GbtcC8ebnQlyBfIJnGjH57ib4HVlQIpSbTrBw/132","comment_is_top":false,"comment_ctime":1655771263,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1655771263","product_id":100015201,"comment_content":"老师厉害啊，大道至简，老师在这个领域已经可以称为入道了。来自一名k8s小白","like_count":0},{"had_liked":false,"id":347785,"user_name":"qming","can_delete":false,"product_type":"c1","uid":1446541,"ip_address":"","ucode":"0E9AAAF36B23D7","user_header":"https://static001.geekbang.org/account/avatar/00/16/12/8d/46fda282.jpg","comment_is_top":false,"comment_ctime":1654427783,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654427783","product_id":100015201,"comment_content":"第一个问题：<br>(1)docker 架构中，管理节点和工作节点都必须启动dockerengine，k8s 则不关心底层容器实现<br>(2)docker处理简单的容器调度，k8s处理各种任务之间的关系的编排","like_count":0},{"had_liked":false,"id":347455,"user_name":"DL3650","can_delete":false,"product_type":"c1","uid":2140331,"ip_address":"","ucode":"AD879AA447C4E1","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/LD14T5z9zHdcRUQzDF8jsWMiaVChK0NY2xTqmgK1LDImY3VcNtVYicRzMD1N0er5dEU75BGm8E5eIENKgEXpFvRg/132","comment_is_top":false,"comment_ctime":1654053040,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654053040","product_id":100015201,"comment_content":"讲的非常好，从设计者的角度分析。大神！","like_count":0},{"had_liked":false,"id":347083,"user_name":"文文","can_delete":false,"product_type":"c1","uid":2359283,"ip_address":"","ucode":"E97CA4A6E182DA","user_header":"https://static001.geekbang.org/account/avatar/00/23/ff/f3/b2645179.jpg","comment_is_top":false,"comment_ctime":1653703486,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1653703486","product_id":100015201,"comment_content":"深刻的理解，不停留于实现和操作层面","like_count":0},{"had_liked":false,"id":342791,"user_name":"Nio","can_delete":false,"product_type":"c1","uid":1529642,"ip_address":"","ucode":"A1B8D3C01FB937","user_header":"https://static001.geekbang.org/account/avatar/00/17/57/2a/c6c95f37.jpg","comment_is_top":false,"comment_ctime":1650464118,"is_pvip":true,"discussion_count":0,"race_medal":4,"score":"1650464118","product_id":100015201,"comment_content":"还没有入门，所以对本质不太理解","like_count":0},{"had_liked":false,"id":338594,"user_name":"小麦","can_delete":false,"product_type":"c1","uid":1520108,"ip_address":"","ucode":"1ACFD9D0E9DEF4","user_header":"https://static001.geekbang.org/account/avatar/00/17/31/ec/190a4538.jpg","comment_is_top":false,"comment_ctime":1647586739,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1647586739","product_id":100015201,"comment_content":"需要多看几遍～","like_count":0},{"had_liked":false,"id":337714,"user_name":"stualan","can_delete":false,"product_type":"c1","uid":2869705,"ip_address":"","ucode":"4378834ED27965","user_header":"https://static001.geekbang.org/account/avatar/00/2b/c9/c9/70494446.jpg","comment_is_top":false,"comment_ctime":1646985998,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1646985998","product_id":100015201,"comment_content":"调度与编排的定义了两种不同的架构模式，对应的是两种不同的产品","like_count":0},{"had_liked":false,"id":329782,"user_name":"Yabo","can_delete":false,"product_type":"c1","uid":2643652,"ip_address":"","ucode":"6C3977DF466EDA","user_header":"https://static001.geekbang.org/account/avatar/00/28/56/c4/ecc9a1e9.jpg","comment_is_top":false,"comment_ctime":1641536908,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1641536908","product_id":100015201,"comment_content":"&quot;编排&quot;这个词对应的英文是orchestration吗？感觉这个翻译似乎没有充分表现出背后的技术含义？","like_count":0},{"had_liked":false,"id":329616,"user_name":"无名无姓","can_delete":false,"product_type":"c1","uid":2621412,"ip_address":"","ucode":"487BD5AA2CD305","user_header":"https://static001.geekbang.org/account/avatar/00/27/ff/e4/927547a9.jpg","comment_is_top":false,"comment_ctime":1641446753,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1641446753","product_id":100015201,"comment_content":"作者讲的真好","like_count":0},{"had_liked":false,"id":321008,"user_name":"追风筝的人","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1636617978,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636617978","product_id":100015201,"comment_content":"所以说，Kubernetes 项目的本质，是为用户提供一个具有普遍意义的容器编排工具。不过，更重要的是，Kubernetes 项目为用户提供的不仅限于一个工具。它真正的价值，乃在于提供了一套基于容器构建分布式系统的基础依赖。关于这一点，相信你会在今后的学习中，体会越来越深。","like_count":0},{"had_liked":false,"id":321007,"user_name":"追风筝的人","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1636617821,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636617821","product_id":100015201,"comment_content":"Kubernetes 项目的本质，是为用户提供一个具有普遍意义的容器编排工具。","like_count":0},{"had_liked":false,"id":320887,"user_name":"NOFX","can_delete":false,"product_type":"c1","uid":2001382,"ip_address":"","ucode":"5BD2DE30DCE277","user_header":"https://static001.geekbang.org/account/avatar/00/1e/89/e6/cf1ea14c.jpg","comment_is_top":false,"comment_ctime":1636541573,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1636541573","product_id":100015201,"comment_content":"调度和编排的区别没get到。哥们儿感觉调度是按规则安排资源。编排是制定规则，然后按规则调度(编排包含了调度?)  来点大手子们指点下","like_count":0},{"had_liked":false,"id":315298,"user_name":"吕小荣","can_delete":false,"product_type":"c1","uid":1335273,"ip_address":"","ucode":"9CB18695616330","user_header":"https://static001.geekbang.org/account/avatar/00/14/5f/e9/510fa022.jpg","comment_is_top":false,"comment_ctime":1633792875,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633792875","product_id":100015201,"comment_content":"很多框架在部署代码时，会执行 Database Migration Job，这种 Job 放到 Kubernetes 中合适吗？","like_count":0},{"had_liked":false,"id":301300,"user_name":"李二木","can_delete":false,"product_type":"c1","uid":1103091,"ip_address":"","ucode":"30E03BB84ADB27","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/f3/129d6dfe.jpg","comment_is_top":false,"comment_ctime":1625624866,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1625624866","product_id":100015201,"comment_content":"调度就是把一个容器，按照某种规则，放置在某个最佳节点上运行起来。 编排就是按照用户的意愿和整个系统的规则，完全自动化地处理好容器之间的各种关系。 编排要比调度省事<br>","like_count":0},{"had_liked":false,"id":301287,"user_name":"李二木","can_delete":false,"product_type":"c1","uid":1103091,"ip_address":"","ucode":"30E03BB84ADB27","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/f3/129d6dfe.jpg","comment_is_top":false,"comment_ctime":1625622597,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1625622597","product_id":100015201,"comment_content":"Kubernetes 项目最主要的设计思想是，从更宏观的角度，以统一的方式来定义任务之间的各种关系，并且为将来支持更多种类的关系留有余地。这种架构设计很值得我们学习。","like_count":0},{"had_liked":false,"id":300131,"user_name":"Ryan","can_delete":false,"product_type":"c1","uid":1667987,"ip_address":"","ucode":"95BBBEE5B23878","user_header":"https://static001.geekbang.org/account/avatar/00/19/73/93/0a3a1e5b.jpg","comment_is_top":false,"comment_ctime":1625018179,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625018179","product_id":100015201,"comment_content":"service的作用类似于JAVA_HOME","like_count":0},{"had_liked":false,"id":300005,"user_name":"Geek_f0e081","can_delete":false,"product_type":"c1","uid":2677511,"ip_address":"","ucode":"B0BB6982B847B6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIgsP6UzNiaph34q9AiaPj7WR8moALHkWpKAibLXn4zULibocJzF6ErSb6YJTlUEPlSZtkibwD9QK5BN0A/132","comment_is_top":false,"comment_ctime":1624952355,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624952355","product_id":100015201,"comment_content":"看K8S教学我居然看出了DCI和DDD的设计感觉, 那些是一个聚合, 那些是角色, 那些是交互.","like_count":0},{"had_liked":false,"id":299985,"user_name":"独孤九剑","can_delete":false,"product_type":"c1","uid":2230909,"ip_address":"","ucode":"6C1253E2B8C1D4","user_header":"https://static001.geekbang.org/account/avatar/00/22/0a/7d/ac715471.jpg","comment_is_top":false,"comment_ctime":1624947910,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624947910","product_id":100015201,"comment_content":"平台是比框架更高层次的抽象","like_count":0},{"had_liked":false,"id":298373,"user_name":"徐章宁","can_delete":false,"product_type":"c1","uid":1175391,"ip_address":"","ucode":"9122F0F39CDF6A","user_header":"https://static001.geekbang.org/account/avatar/00/11/ef/5f/449a59ab.jpg","comment_is_top":false,"comment_ctime":1624067671,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624067671","product_id":100015201,"comment_content":"感觉全贯通了，感谢之至","like_count":0},{"had_liked":false,"id":289541,"user_name":"kevinlee","can_delete":false,"product_type":"c1","uid":1134269,"ip_address":"","ucode":"DD1A9A952E29D4","user_header":"https://static001.geekbang.org/account/avatar/00/11/4e/bd/a1c16e5f.jpg","comment_is_top":false,"comment_ctime":1619073114,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619073114","product_id":100015201,"comment_content":"读第二遍","like_count":0},{"had_liked":false,"id":288602,"user_name":"不明真相的群众","can_delete":false,"product_type":"c1","uid":2267730,"ip_address":"","ucode":"046A7D345171B8","user_header":"https://static001.geekbang.org/account/avatar/00/22/9a/52/93416b65.jpg","comment_is_top":false,"comment_ctime":1618557262,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1618557262","product_id":100015201,"comment_content":"看到这里，真心觉得这个专栏物超所值。容器技术基础这部分，值得多看几遍，收获满满","like_count":0},{"had_liked":false,"id":284817,"user_name":"Michael","can_delete":false,"product_type":"c1","uid":1274787,"ip_address":"","ucode":"C233DF1D224EC1","user_header":"https://static001.geekbang.org/account/avatar/00/13/73/a3/2b077607.jpg","comment_is_top":false,"comment_ctime":1616485523,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1616485523","product_id":100015201,"comment_content":"讲的是真不错。","like_count":0},{"had_liked":false,"id":284493,"user_name":"Geek_5baa01","can_delete":false,"product_type":"c1","uid":2470693,"ip_address":"","ucode":"EE194170C4B30E","user_header":"","comment_is_top":false,"comment_ctime":1616301675,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616301675","product_id":100015201,"comment_content":"“有状态”迁移的话，应该有配置&#47;秘钥&#47;存储&#47;网络<br>1. 秘钥应该可以手动 copy，<br>2. 配置的话如果是集群，那么可能涉及 IP&#47;hostname 等等修改，会比较麻烦<br>3. 存储迁移要看类型，NAS&#47;SAN 之类网盘比较容易，如果是本地磁盘就麻烦了，我理解 k8s 也不好处理<br>4. 网络的话，防火墙最麻烦，没有 cni 自己管理规则非常难受","like_count":0},{"had_liked":false,"id":277503,"user_name":"微末凡尘","can_delete":false,"product_type":"c1","uid":1099525,"ip_address":"","ucode":"25EDFD0914D0F4","user_header":"https://static001.geekbang.org/account/avatar/00/10/c7/05/19c5c255.jpg","comment_is_top":false,"comment_ctime":1612435440,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612435440","product_id":100015201,"comment_content":"小公司或者小项目使用docker+compose足以解决问题，目前我们公司就是使用这种方式，但是随着项目越来越多管理起来有点力不从心，容器出错也无法立刻感知和恢复，最近正在准备迁移到k8s上，而k8s就可以很好的解决了这个问题，可以提供编排容器，自动恢复，水平扩展等等功能，老师写的文章真的好，赞！ingress(外部统一入口)-&gt;service(内部集群访问入口)-&gt;deployment-&gt;pod.","like_count":0},{"had_liked":false,"id":273497,"user_name":"东","can_delete":false,"product_type":"c1","uid":1043947,"ip_address":"","ucode":"0FF5018422CEA9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ed/eb/88cac7a5.jpg","comment_is_top":false,"comment_ctime":1610614892,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1610614892","product_id":100015201,"comment_content":"三刷，mark","like_count":0},{"had_liked":false,"id":258782,"user_name":"梦想的优惠券","can_delete":false,"product_type":"c1","uid":1257418,"ip_address":"","ucode":"D3B44F6C618CA7","user_header":"https://static001.geekbang.org/account/avatar/00/13/2f/ca/cbce6e94.jpg","comment_is_top":false,"comment_ctime":1604555820,"is_pvip":false,"discussion_count":0,"race_medal":4,"score":"1604555820","product_id":100015201,"comment_content":"点赞，来来回回看了好几遍","like_count":0},{"had_liked":false,"id":255667,"user_name":"张小益","can_delete":false,"product_type":"c1","uid":1347798,"ip_address":"","ucode":"702BC860386C61","user_header":"https://static001.geekbang.org/account/avatar/00/14/90/d6/f806b648.jpg","comment_is_top":false,"comment_ctime":1603410042,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603410042","product_id":100015201,"comment_content":"最近要在公司做一次K8S分享，来学习下课程，查缺补漏","like_count":0},{"had_liked":false,"id":245433,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1598943561,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598943561","product_id":100015201,"comment_content":"2,主要是因为在本地有很多临时文件,迁移的时候无法进行有效的迁移","like_count":0},{"had_liked":false,"id":245138,"user_name":"supakito","can_delete":false,"product_type":"c1","uid":1387156,"ip_address":"","ucode":"3060AB5E0D4E24","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/gKnIR8mga02s9xdQoxyJBibmuxHGhfQ8WZicia3Ie4wBQKg4Zc1oVoS03mvaCD46je9xCza25qXc3w6KMckpS0BqQ/132","comment_is_top":false,"comment_ctime":1598843762,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598843762","product_id":100015201,"comment_content":"这篇文章已经阅读了三四次了，每次阅读都会有新的收获和体会，感谢老师抽丝剥茧的细致讲解。","like_count":0},{"had_liked":false,"id":238891,"user_name":"Seemoon","can_delete":false,"product_type":"c1","uid":1809130,"ip_address":"","ucode":"170D486E86986C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJV07WOuzNCBk7WffLoibpC3pjaiaUe2icbAbryBY5BNEZa6ibiaqgGzqntU3ZoCqicxInzh0icb5zXGgojw/132","comment_is_top":false,"comment_ctime":1596358130,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596358130","product_id":100015201,"comment_content":"看了好几遍。","like_count":0},{"had_liked":false,"id":232160,"user_name":"海阔天空","can_delete":false,"product_type":"c1","uid":1733275,"ip_address":"","ucode":"8658B1610192E7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJOBwR7MCVqwZzc3keFAJT12Sic3VYWx4PrZbCGDm4kBZD3oqnR4xsibGGtGy4tFO8y05Ims27SiaavA/132","comment_is_top":false,"comment_ctime":1593876948,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593876948","product_id":100015201,"comment_content":"阻止有状态服务迁移的原因是1.固定的网络ID<br>和2.与其相互关联绑定的存储数据","like_count":0},{"had_liked":false,"id":230802,"user_name":"黄伟洪","can_delete":false,"product_type":"c1","uid":1369165,"ip_address":"","ucode":"97331040A49EAD","user_header":"https://static001.geekbang.org/account/avatar/00/14/e4/4d/c7b5f20a.jpg","comment_is_top":false,"comment_ctime":1593498459,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593498459","product_id":100015201,"comment_content":"这是讲得最明白的。","like_count":0},{"had_liked":false,"id":229136,"user_name":"孙文东","can_delete":false,"product_type":"c1","uid":1166392,"ip_address":"","ucode":"FA61D70F827F36","user_header":"https://static001.geekbang.org/account/avatar/00/11/cc/38/d746f29b.jpg","comment_is_top":false,"comment_ctime":1592905327,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592905327","product_id":100015201,"comment_content":"真的物超所值，讲的太好了，","like_count":0},{"had_liked":false,"id":220840,"user_name":"lasdaybg","can_delete":false,"product_type":"c1","uid":1053818,"ip_address":"","ucode":"C292CF7263ED81","user_header":"https://static001.geekbang.org/account/avatar/00/10/14/7a/7b8dd310.jpg","comment_is_top":false,"comment_ctime":1590328656,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590328656","product_id":100015201,"comment_content":"docker swarm是具体-具体的联系，像小公司的组织架构，人与人之间互联；<br>k8s是抽象-抽象的联系，像大公司的组织架构，部门与部门之间互联","like_count":0},{"had_liked":false,"id":212026,"user_name":"张三","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1588048668,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588048668","product_id":100015201,"comment_content":"把专栏囫囵吞枣的看完之后，第二遍再看这篇文章，觉得这篇是专栏的提纲挈领","like_count":0},{"had_liked":false,"id":208010,"user_name":"张三","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1587255168,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587255168","product_id":100015201,"comment_content":"学习了，精彩！","like_count":0},{"had_liked":false,"id":202083,"user_name":"电光火石","can_delete":false,"product_type":"c1","uid":1013160,"ip_address":"","ucode":"3AD33BB4AA940F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/a8/dfe4cade.jpg","comment_is_top":false,"comment_ctime":1585900293,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585900293","product_id":100015201,"comment_content":"老师能举个例子，什么场景下面，一个pod里面包含多个container吗？谢谢了！","like_count":0},{"had_liked":false,"id":192555,"user_name":"韩向民","can_delete":false,"product_type":"c1","uid":1310021,"ip_address":"","ucode":"C0335C3785C303","user_header":"https://static001.geekbang.org/account/avatar/00/13/fd/45/a498dcb9.jpg","comment_is_top":false,"comment_ctime":1584859771,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584859771","product_id":100015201,"comment_content":"本文介绍的kubernetes为何能脱颖而出，因为有强大的理论为后盾。","like_count":0},{"had_liked":false,"id":189136,"user_name":"学习使人快乐","can_delete":false,"product_type":"c1","uid":1478759,"ip_address":"","ucode":"1EC27CE663EE65","user_header":"https://static001.geekbang.org/account/avatar/00/16/90/67/106306e7.jpg","comment_is_top":false,"comment_ctime":1584458565,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584458565","product_id":100015201,"comment_content":"老师直接再出个docker 专栏吧，讲的特别好","like_count":0},{"had_liked":false,"id":171733,"user_name":"lfn","can_delete":false,"product_type":"c1","uid":1026593,"ip_address":"","ucode":"2E1558C6A12A89","user_header":"https://static001.geekbang.org/account/avatar/00/0f/aa/21/6c3ba9af.jpg","comment_is_top":false,"comment_ctime":1579003374,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1579003374","product_id":100015201,"comment_content":"2020-1-14, 打卡。","like_count":0},{"had_liked":false,"id":171007,"user_name":"猪尾巴","can_delete":false,"product_type":"c1","uid":1169487,"ip_address":"","ucode":"4BDA1DB1A8A1B3","user_header":"https://static001.geekbang.org/account/avatar/00/11/d8/4f/4ec15857.jpg","comment_is_top":false,"comment_ctime":1578819467,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578819467","product_id":100015201,"comment_content":" k8s 之所以能够迁移有状态的容器， 是依赖的了etcd这样的键值存储系统 对吗 ","like_count":0},{"had_liked":false,"id":156233,"user_name":"Zack","can_delete":false,"product_type":"c1","uid":1758012,"ip_address":"","ucode":"758511DF7D6D17","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eokhlnrZO1G1SnxWka7hSeqwHnIcuQKugQDBDKUDXc2ZDXKsibHTNviaG6CiaqBiaK5Bwcu37xakaFthw/132","comment_is_top":false,"comment_ctime":1574840514,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574840514","product_id":100015201,"comment_content":"一组联合挂载在 &#47;var&#47;lib&#47;docker&#47;aufs&#47;mnt 上的 rootfs，这一部分我们称为“容器镜像”（Container Image），是容器的静态视图；<br>这里不太理解，不是应该&#47;var&#47;lib&#47;docker&#47;aufs&#47;diff下才是静态视图么， &#47;var&#47;lib&#47;docker&#47;aufs&#47;mnt下的内容不是运行容器后，发生联合挂载之后才产生的么？","like_count":0},{"had_liked":false,"id":151399,"user_name":"敲键盘的人","can_delete":false,"product_type":"c1","uid":1232210,"ip_address":"","ucode":"59AFFFE9DA5B4E","user_header":"https://static001.geekbang.org/account/avatar/00/12/cd/52/a2478536.jpg","comment_is_top":false,"comment_ctime":1573713333,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573713333","product_id":100015201,"comment_content":"讲的真的很好，原先只是对docker会用一点，通过这几篇文章学习下来，感觉docker也不是那么神秘的技术，顶一个","like_count":0},{"had_liked":false,"id":150573,"user_name":"靠人品去赢","can_delete":false,"product_type":"c1","uid":1301286,"ip_address":"","ucode":"7A20F9EBE847E1","user_header":"https://static001.geekbang.org/account/avatar/00/13/db/26/54f2c164.jpg","comment_is_top":false,"comment_ctime":1573559825,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573559825","product_id":100015201,"comment_content":"我算是隐约知道，阿里云容器里面的无状态了。","like_count":0},{"had_liked":false,"id":142814,"user_name":"Deephug","can_delete":false,"product_type":"c1","uid":1705587,"ip_address":"","ucode":"E32B54889F7E87","user_header":"https://static001.geekbang.org/account/avatar/00/1a/06/73/c9c6fb6a.jpg","comment_is_top":false,"comment_ctime":1571541877,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1571541877","product_id":100015201,"comment_content":"k8s可以迁移有状态的容器？<br>","like_count":0,"discussions":[{"author":{"id":2095991,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/fb/77/16e93a45.jpg","nickname":"shup","note":"","ucode":"102BA9E095D3BA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301588,"discussion_content":"上面的留言老师已经解答，不可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598582853,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134303,"user_name":"窗外","can_delete":false,"product_type":"c1","uid":1542520,"ip_address":"","ucode":"3FF86229C97428","user_header":"","comment_is_top":false,"comment_ctime":1568800011,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1568800011","product_id":100015201,"comment_content":"老师你好，这里有个栗子：为什么要用多个nginx服务来做负载均衡，是什么样的场景。<br>一般都是一个nginx服务，配置多个service来实现负载均衡的。你这个对前置机就做负载均衡了?","like_count":0,"discussions":[{"author":{"id":1107432,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e5/e8/033bdbf5.jpg","nickname":"王灯武","note":"","ucode":"B35FF513125BA9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":71091,"discussion_content":"多台nginx很正常啊，一个是高可用(单台挂了另一个可服务)，另一方面还可分担负载","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575386208,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130991,"user_name":"德才少年","can_delete":false,"product_type":"c1","uid":1387877,"ip_address":"","ucode":"ED2664924F127B","user_header":"https://static001.geekbang.org/account/avatar/00/15/2d/65/b2f209e7.jpg","comment_is_top":false,"comment_ctime":1567591150,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567591150","product_id":100015201,"comment_content":"kubernetes并不应该仅仅从容器调度工具去认识，更应该认为kubernetes是一个管理者，以统一的方式来定义任务之间的各种关系。故认为容器是一个具有普遍意义的容器编排工具。","like_count":0},{"had_liked":false,"id":121551,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1015754,"ip_address":"","ucode":"00DF2FEC58D2E6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7f/ca/ea85bfdd.jpg","comment_is_top":false,"comment_ctime":1565157930,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565157930","product_id":100015201,"comment_content":"老师，请问你还有其他的课程吗？我都买！像读小说一样读你的专栏，把复杂的技术讲解地轻松易懂","like_count":0},{"had_liked":false,"id":112983,"user_name":"小学一年级","can_delete":false,"product_type":"c1","uid":1217230,"ip_address":"","ucode":"59B9805D7C2D92","user_header":"https://static001.geekbang.org/account/avatar/00/12/92/ce/9d24cb2c.jpg","comment_is_top":false,"comment_ctime":1562859831,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562859831","product_id":100015201,"comment_content":"OCI 是什么意思？","like_count":0},{"had_liked":false,"id":102878,"user_name":"GLADIATOR","can_delete":false,"product_type":"c1","uid":1448564,"ip_address":"","ucode":"6FE14E0BCD6240","user_header":"https://static001.geekbang.org/account/avatar/00/16/1a/74/8f7f8786.jpg","comment_is_top":false,"comment_ctime":1560319135,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560319135","product_id":100015201,"comment_content":"以后每一讲我都通过笔记的方式重新整理","like_count":0},{"had_liked":false,"id":101727,"user_name":"紅","can_delete":false,"product_type":"c1","uid":1487358,"ip_address":"","ucode":"DD0AB4F310F958","user_header":"https://static001.geekbang.org/account/avatar/00/16/b1/fe/bca7c747.jpg","comment_is_top":false,"comment_ctime":1559937802,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1559937802","product_id":100015201,"comment_content":"这样，你把 Credential 信息以 Secret 的方式存在 Etcd 里，Kubernetes 就会在你指定的 Pod（比如，Web 应用的 Pod）启动时，自动把 Secret 里的数据以 Volume 的方式挂载到容器里。这样，这个 Web 应用就可以访问数据库了。<br><br>这个地方不是笔误吗？以volume形式？是environment形式吧？","like_count":0,"discussions":[{"author":{"id":1135293,"avatar":"https://static001.geekbang.org/account/avatar/00/11/52/bd/abb7bfe3.jpg","nickname":"电线杆儿","note":"","ucode":"0C66FB877B9636","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":135156,"discussion_content":"Secret 可以作为数据卷被挂载，或作为环境变量 暴露出来以供 pod 中的容器使用。它们也可以被系统的其他部分使用，而不直接暴露在 pod 内。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579073487,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":80824,"user_name":"小猪","can_delete":false,"product_type":"c1","uid":1201662,"ip_address":"","ucode":"EAD6A4876CEF3B","user_header":"https://static001.geekbang.org/account/avatar/00/12/55/fe/ab541300.jpg","comment_is_top":false,"comment_ctime":1553738733,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553738733","product_id":100015201,"comment_content":"etcd存储是安装kubernetes时默认搭建的自己使用的存储吗？","like_count":0},{"had_liked":false,"id":58048,"user_name":"jecky","can_delete":false,"product_type":"c1","uid":1218345,"ip_address":"","ucode":"77335394D00B45","user_header":"https://static001.geekbang.org/account/avatar/00/12/97/29/7ab10a03.jpg","comment_is_top":false,"comment_ctime":1546968229,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546968229","product_id":100015201,"comment_content":"为了解决那个有状态容器的问题，可以把这些有状态的信息做抽象吗？还是有可能不同的使用场景这些信息会很不一样，无法抽象出来？","like_count":0},{"had_liked":false,"id":51005,"user_name":"大飞","can_delete":false,"product_type":"c1","uid":1320080,"ip_address":"","ucode":"2D98888FC63CA9","user_header":"","comment_is_top":false,"comment_ctime":1545098235,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545098235","product_id":100015201,"comment_content":"打卡","like_count":0},{"had_liked":false,"id":42368,"user_name":"ShawnWu","can_delete":false,"product_type":"c1","uid":1308538,"ip_address":"","ucode":"B59C07067BB51E","user_header":"https://static001.geekbang.org/account/avatar/00/13/f7/7a/fc236813.jpg","comment_is_top":false,"comment_ctime":1542943437,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1542943437","product_id":100015201,"comment_content":"这个专栏最有价值，顶","like_count":0},{"had_liked":false,"id":40902,"user_name":"程序修行","can_delete":false,"product_type":"c1","uid":1257409,"ip_address":"","ucode":"2CCD5ACAFF0E8D","user_header":"","comment_is_top":false,"comment_ctime":1542691923,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1542691923","product_id":100015201,"comment_content":"老师，请教一个问题哈。我有一个应用部署在k8s集群中，作为一个service。我在用我笔记本访问这个应用的时候，我们把source IP抓取下来，可是抓取下来的是10.XXX的内部IP，并非真正的我笔记本的IP，这个是什么原因呢？我该修改哪里了？","like_count":0},{"had_liked":false,"id":38642,"user_name":"我是钢铁侠","can_delete":false,"product_type":"c1","uid":1219888,"ip_address":"","ucode":"78D00BF06BEABA","user_header":"https://static001.geekbang.org/account/avatar/00/12/9d/30/7c33565d.jpg","comment_is_top":false,"comment_ctime":1542092930,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1542092930","product_id":100015201,"comment_content":"“整个集群的持久化数据，则由 kube-apiserver 处理后保存在 Ectd 中。” 这句话中etcd拼错了","like_count":0},{"had_liked":false,"id":34848,"user_name":"草莓&#47;mg","can_delete":false,"product_type":"c1","uid":1001572,"ip_address":"","ucode":"EB173DC8D3E0C0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/64/e0b94df2.jpg","comment_is_top":false,"comment_ctime":1540340602,"is_pvip":false,"replies":[{"id":"12541","content":"1.11","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1540440129,"ip_address":"","comment_id":34848,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1540340602","product_id":100015201,"comment_content":"张老师问一下，kubectl 和 kubeadm分别装的什么版本？","like_count":0,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":427361,"discussion_content":"1.11","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1540440129,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":32315,"user_name":"帅","can_delete":false,"product_type":"c1","uid":1207367,"ip_address":"","ucode":"DB792F56C26429","user_header":"https://static001.geekbang.org/account/avatar/00/12/6c/47/57b6c4e8.jpg","comment_is_top":false,"comment_ctime":1539526795,"is_pvip":false,"replies":[{"id":"11811","content":"当然一样……那不就是nginx么","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539571230,"ip_address":"","comment_id":32315,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1539526795","product_id":100015201,"comment_content":"老师你好，咱们这章节提到的用k8s部署的负载均衡的nginx跟nginx本身的upstream 效果一样么？期待老师的回复！非常感谢！<br>","like_count":0,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426723,"discussion_content":"当然一样……那不就是nginx么","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539571230,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27954,"user_name":"天勤","can_delete":false,"product_type":"c1","uid":1219229,"ip_address":"","ucode":"282B5F9F9A0C5F","user_header":"https://static001.geekbang.org/account/avatar/00/12/9a/9d/82140a27.jpg","comment_is_top":false,"comment_ctime":1537970520,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1537970520","product_id":100015201,"comment_content":"讲的很透彻，物超所值！","like_count":0},{"had_liked":false,"id":27069,"user_name":"Joe Black","can_delete":false,"product_type":"c1","uid":1052528,"ip_address":"","ucode":"21FE222A286445","user_header":"https://static001.geekbang.org/account/avatar/00/10/0f/70/c8680841.jpg","comment_is_top":false,"comment_ctime":1537828907,"is_pvip":false,"replies":[{"id":"9874","content":"没错，正是编排和调度的区别","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1537887714,"ip_address":"","comment_id":27069,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1537828907","product_id":100015201,"comment_content":"之前用过HTCondor这样的老牌调度系统，专注任务调度和依赖关系处理，咋一看和k8s有很多功能重叠（也能调度容器）。但感觉k8s结合容器更好地处理了打包、编排和扩展性等问题，是开发运维一体化的利器，上层的应用不用太关注底层基础设施的变化，和这类传统调度系统的关注点不在一个层次。","like_count":0,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424797,"discussion_content":"没错，正是编排和调度的区别","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537887714,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":26076,"user_name":"一帆","can_delete":false,"product_type":"c1","uid":1081304,"ip_address":"","ucode":"EFA0CE26A410FB","user_header":"https://static001.geekbang.org/account/avatar/00/10/7f/d8/1df45d98.jpg","comment_is_top":false,"comment_ctime":1537496613,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1537496613","product_id":100015201,"comment_content":"赞","like_count":0},{"had_liked":false,"id":25557,"user_name":"Hunsbiously","can_delete":false,"product_type":"c1","uid":1008477,"ip_address":"","ucode":"300A5168EC94A6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/5d/b523af2d.jpg","comment_is_top":false,"comment_ctime":1537362573,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1537362573","product_id":100015201,"comment_content":"如果可能，希望能够讲解一下这个视频的内容。https:&#47;&#47;m.youtube.com&#47;watch?v=ER9eIXL2_14#fauxfullscreen","like_count":0},{"had_liked":false,"id":24209,"user_name":"他说风雨中","can_delete":false,"product_type":"c1","uid":1048012,"ip_address":"","ucode":"3175063755F1FD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fd/cc/b13b71f9.jpg","comment_is_top":false,"comment_ctime":1536845382,"is_pvip":false,"replies":[{"id":"8864","content":"cpuset cpushare都支持","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536849190,"ip_address":"","comment_id":24209,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1536845382","product_id":100015201,"comment_content":"老师您好，很喜欢看您的文章，文采也很好，想问您一个问题，kubernetes1.10beta介绍的时候，在说到对cpu的支持的时候，只是一笔带过，想问一下您 kubernetes1.10对cpu到底支持到什么程度呢","like_count":0,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423882,"discussion_content":"cpuset cpushare都支持","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536849190,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24181,"user_name":"陈华","can_delete":false,"product_type":"c1","uid":1082730,"ip_address":"","ucode":"3AF9E8EB39E507","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtS26SJpSF7JLu9pusGsy1Qln0NdQg1eV2YKOJxpX2QXaBuuyXMqZY3fm0rhzKwsqN5aa6CVNOQQ/132","comment_is_top":false,"comment_ctime":1536835482,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1536835482","product_id":100015201,"comment_content":"更新的太慢了迫不及待了，","like_count":0},{"had_liked":false,"id":24140,"user_name":"燕岭听涛","can_delete":false,"product_type":"c1","uid":1228123,"ip_address":"","ucode":"0358ECCAB39258","user_header":"https://static001.geekbang.org/account/avatar/00/12/bd/5b/94bb1036.jpg","comment_is_top":false,"comment_ctime":1536821637,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1536821637","product_id":100015201,"comment_content":"终于跟上进度了，清晰了好多","like_count":0},{"had_liked":false,"id":24128,"user_name":"李宏博","can_delete":false,"product_type":"c1","uid":1230828,"ip_address":"","ucode":"CC3010C3C03FAD","user_header":"https://static001.geekbang.org/account/avatar/00/12/c7/ec/622ff525.jpg","comment_is_top":false,"comment_ctime":1536813888,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1536813888","product_id":100015201,"comment_content":"非常感谢，受益匪浅","like_count":0},{"had_liked":false,"id":24056,"user_name":"随风","can_delete":false,"product_type":"c1","uid":1128822,"ip_address":"","ucode":"2C74CFC1AE2774","user_header":"https://static001.geekbang.org/account/avatar/00/11/39/76/b14221a5.jpg","comment_is_top":false,"comment_ctime":1536797075,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1536797075","product_id":100015201,"comment_content":"听了几遍，每遍都有收获。👍<br><br>期待早点听到istio的内容，在选型","like_count":0},{"had_liked":false,"id":24039,"user_name":"小伟","can_delete":false,"product_type":"c1","uid":1229457,"ip_address":"","ucode":"4E20DFD3D4FF82","user_header":"https://static001.geekbang.org/account/avatar/00/12/c2/91/fba79b87.jpg","comment_is_top":false,"comment_ctime":1536768392,"is_pvip":false,"replies":[{"id":"8829","content":"就是专栏覆盖的这些内容。","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536821507,"ip_address":"","comment_id":24039,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1536768392","product_id":100015201,"comment_content":"老师，你觉得作为一个运维在学习k8s时重点关注哪些技术点将来在能发挥更大作业呢？我们公司正准备上架k8s项目，我都不知道该重点学习哪里？","like_count":0,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423816,"discussion_content":"就是专栏覆盖的这些内容。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536821507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23919,"user_name":"阿青，你学到了吗","can_delete":false,"product_type":"c1","uid":1218795,"ip_address":"","ucode":"9FA5AC497E87F9","user_header":"https://static001.geekbang.org/account/avatar/00/12/98/eb/bf53184b.jpg","comment_is_top":false,"comment_ctime":1536718804,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1536718804","product_id":100015201,"comment_content":"物超所值！！！","like_count":0},{"had_liked":false,"id":23903,"user_name":"Tank","can_delete":false,"product_type":"c1","uid":1007106,"ip_address":"","ucode":"652A770CD3908B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5e/02/b50560ac.jpg","comment_is_top":false,"comment_ctime":1536716085,"is_pvip":false,"replies":[{"id":"8735","content":"devicemapper是基于快照的，你其实可以想象一下，层是不是就很像某一时刻的快照呢？","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536720283,"ip_address":"","comment_id":23903,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1536716085","product_id":100015201,"comment_content":"Server Version: 18.06.0-ce<br>Storage Driver: devicemapper<br>Backing Filesystem: xfs<br><br>我本地的并非 aufs 我本地没有设置过。<br>这里面的原理是否可以讲一下。","like_count":0,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423775,"discussion_content":"devicemapper是基于快照的，你其实可以想象一下，层是不是就很像某一时刻的快照呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536720283,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23902,"user_name":"gogo","can_delete":false,"product_type":"c1","uid":1003104,"ip_address":"","ucode":"E8F0F3B000020A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4e/60/0d5aa340.jpg","comment_is_top":false,"comment_ctime":1536715801,"is_pvip":false,"replies":[{"id":"8736","content":"不止这两个状态，想象一下主从结构的mysql","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536720321,"ip_address":"","comment_id":23902,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1536715801","product_id":100015201,"comment_content":"尝试第二个问题：例如mysql这种有状态服务，当容器被调度到其他节点时，ip和存储的数据都无法同步了","like_count":0,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423774,"discussion_content":"不止这两个状态，想象一下主从结构的mysql","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536720321,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23850,"user_name":"刘欣洲","can_delete":false,"product_type":"c1","uid":1020871,"ip_address":"","ucode":"767B7D80D01623","user_header":"https://static001.geekbang.org/account/avatar/00/0f/93/c7/1640226d.jpg","comment_is_top":false,"comment_ctime":1536701345,"is_pvip":false,"replies":[{"id":"8740","content":"任何时候都有小众市场的存在","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536720471,"ip_address":"","comment_id":23850,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1536701345","product_id":100015201,"comment_content":"Kubernetes 的成功是不是意味着Docker Swarm 的失败？ Docker Swarm还有存在的必要性吗？","like_count":0,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423753,"discussion_content":"任何时候都有小众市场的存在","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536720471,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23842,"user_name":"咕噜男爵-Tony","can_delete":false,"product_type":"c1","uid":1219258,"ip_address":"","ucode":"8C841851AC767F","user_header":"https://static001.geekbang.org/account/avatar/00/12/9a/ba/f5eb2a66.jpg","comment_is_top":false,"comment_ctime":1536682237,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1536682237","product_id":100015201,"comment_content":"沙发","like_count":0,"discussions":[{"author":{"id":1336475,"avatar":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","nickname":"J.Smile","note":"","ucode":"C4D98DFDBF7584","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":203801,"discussion_content":"官方认证沙发","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584084200,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}