{"id":332341,"title":"07 | æ»¥ç”¨æ§åˆ¶è¯­å¥ï¼šå‡ºç°æ§åˆ¶ç»“æ„ï¼Œå¤šåŠæ˜¯é”™è¯¯çš„æç¤º","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯éƒ‘æ™”ã€‚</p><p>åœ¨å‰é¢å‡ è®²ï¼Œæˆ‘ä»¬å·²ç»è®²äº†ä¸å°‘çš„åå‘³é“ï¼Œæ¯”å¦‚é•¿å‡½æ•°ã€å¤§ç±»ç­‰ã€‚å¯¹äºæœ‰ä¸€å®šä»ä¸šç»éªŒçš„ç¨‹åºå‘˜æ¥è¯´ï¼Œå³ä¾¿ä¸èƒ½å¯¹è¿™äº›åå‘³é“æœ‰ä¸€ä¸ªå¾ˆæ¸…æ¥šçš„ä¸ªäººè®¤çŸ¥ï¼Œä½†è‡³å°‘ä¸€è¯´å‡ºæ¥ï¼Œé€šå¸¸éƒ½çŸ¥é“æ˜¯æ€ä¹ˆå›äº‹ã€‚</p><p>ä½†è¿™èŠ‚è¯¾æˆ‘è¦è®²çš„åå‘³é“å¯¹äºå¾ˆå¤šäººæ¥è¯´ï¼Œå¯èƒ½å°±æœ‰ç‚¹æŒ‘æˆ˜äº†ã€‚è¿™å¹¶ä¸æ˜¯è¯´å†…å®¹æœ‰å¤šéš¾ï¼Œç›¸åï¼Œå¤§éƒ¨åˆ†äººå¯¹è¿™äº›å†…å®¹ç®€ç›´å¤ªç†Ÿæ‚‰äº†ã€‚æ‰€ä»¥ï¼Œå½“æˆ‘æŠŠå®ƒä»¬ä»¥åå‘³é“çš„æ–¹å¼å‘ˆç°å‡ºæ¥æ—¶ï¼Œè¿™ä¼šæå¤§åœ°æŒ‘æˆ˜å¾ˆå¤šäººçš„è®¤çŸ¥ã€‚</p><p>è¿™ä¸ªåå‘³é“å°±æ˜¯æ»¥ç”¨æ§åˆ¶è¯­å¥ï¼Œä¹Ÿå°±æ˜¯ä½ ç†Ÿæ‚‰çš„ ifã€for ç­‰ç­‰ï¼Œè¿™ä¸ªåå‘³é“éå¸¸å…¸å‹ï¼Œä½†å¾ˆå¤šäººæ¯å¤©éƒ½ç”¨å®ƒä»¬ï¼Œå´å¯¹é—®é¢˜æ¯«æ— æ„ŸçŸ¥ã€‚ä»Šå¤©æˆ‘ä»¬å°±å…ˆä»ä¸€ä¸ªä½ å®¹æ˜“æ¥å—çš„åå‘³é“å¼€å§‹ï¼Œè¯´ä¸€è¯´ä½¿ç”¨æ§åˆ¶è¯­å¥æ—¶ï¼Œé—®é¢˜åˆ°åº•å‡ºåœ¨å“ªã€‚</p><h2>åµŒå¥—çš„ä»£ç </h2><p>æˆ‘ç»™ä½ çœ‹ä¸€å¼ è®©æˆ‘å°è±¡æå…¶æ·±åˆ»çš„å›¾ï¼Œçœ‹äº†ä¹‹åä½ å°±çŸ¥é“æˆ‘è¦è®²çš„è¿™ä¸ªåå‘³é“æ˜¯ä»€ä¹ˆäº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/20/4f/207d60ffb815dff3272090f876503a4f.jpeg?wh=723*521\" alt=\"\" title=\"å›¾ç‰‡æ¥æºäºç½‘ç»œ\"></p><p>ç›¸ä¿¡ä¸å°‘åŒå­¦åœ¨ç½‘ä¸Šè§è¿‡è¿™å¼ å›¾ï¼Œæ˜¯çš„ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å°±æ¥è®¨è®º<strong>åµŒå¥—çš„ä»£ç </strong>ã€‚</p><p>è€ƒè™‘åˆ°ç¯‡å¹…ï¼Œæˆ‘å°±ä¸ç”¨è¿™ä¹ˆéœ‡æ’¼çš„ä»£ç åšæ¡ˆä¾‹äº†ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä»è§„æ¨¡å°ä¸€ç‚¹çš„ä»£ç å¼€å§‹è®¨è®ºï¼š</p><pre><code>public void distributeEpubs(final long bookId) {\n  List&lt;Epub&gt; epubs = this.getEpubsByBookId(bookId);\n  for (Epub epub : epubs) {\n    if (epub.isValid()) {\n      boolean registered = this.registerIsbn(epub);\n      if (registered) {\n        this.sendEpub(epub);\n      }\n    }                                            \n  }\n}\n</code></pre><p>è¿™æ˜¯ä¸€æ®µåš EPUBåˆ†å‘çš„ä»£ç ï¼ŒEPUB æ˜¯ä¸€ç§ç”µå­ä¹¦æ ¼å¼ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æ ¹æ®ä½œå“ ID æ‰¾åˆ°è¦åˆ†å‘çš„ EPUBï¼Œç„¶åæ£€æŸ¥ EPUB çš„æœ‰æ•ˆæ€§ã€‚å¯¹äºæœ‰æ•ˆçš„ EPUBï¼Œæˆ‘ä»¬è¦ä¸ºå®ƒæ³¨å†Œ ISBN ä¿¡æ¯ï¼Œæ³¨å†ŒæˆåŠŸä¹‹åï¼Œå°†è¿™ä¸ª EPUB å‘é€å‡ºå»ã€‚</p><!-- [[[read_end]]] --><p>ä»£ç é€»è¾‘å¹¶ä¸æ˜¯ç‰¹åˆ«å¤æ‚ï¼Œåªä¸è¿‡ï¼Œåœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†å¤šå±‚çš„ç¼©è¿›ï¼Œfor å¾ªç¯ä¸€å±‚ï¼Œé‡Œé¢æœ‰ä¸¤ä¸ª if ï¼Œåˆå¤šåŠ äº†ä¸¤å±‚ã€‚å³ä¾¿ä¸æ˜¯ç‰¹åˆ«å¤æ‚çš„ä»£ç ï¼Œä¹Ÿæœ‰è¿™ä¹ˆå¤šçš„ç¼©è¿›ï¼Œå¯æƒ³è€ŒçŸ¥ï¼Œå¦‚æœé€»è¾‘å†å¤æ‚ä¸€ç‚¹ï¼Œç¼©è¿›ä¼šæˆä»€ä¹ˆæ ·å­ã€‚</p><p>è¿™æ®µä»£ç ä¹‹æ‰€ä»¥ä¼šå†™æˆè¿™ä¸ªæ ·å­ï¼Œå…¶å®å°±æ˜¯æˆ‘åœ¨è®²â€œ<a href=\"https://time.geekbang.org/column/article/327424\">é•¿å‡½æ•°</a>â€é‚£èŠ‚è¯¾é‡Œæ‰€è¯´çš„ï¼šâ€œ<strong>å¹³é“ºç›´å™åœ°å†™ä»£ç </strong>â€ã€‚è¿™æ®µä»£ç çš„ä½œè€…åªæ˜¯æŒ‰ç…§éœ€æ±‚ä¸€æ­¥ä¸€æ­¥åœ°æŠŠä»£ç å®ç°å‡ºæ¥äº†ã€‚ä»å®ç°åŠŸèƒ½çš„è§’åº¦æ¥è¯´ï¼Œè¿™æ®µä»£ç è‚¯å®šæ²¡é”™ï¼Œä½†é—®é¢˜åœ¨äºï¼Œåœ¨æŠŠåŠŸèƒ½å®ç°ä¹‹åï¼Œä»–åœäº†ä¸‹æ¥ï¼Œè€Œæ²¡æœ‰æŠŠä»£ç é‡æ–°æ•´ç†ä¸€ä¸‹ã€‚é‚£æˆ‘ä»¬å°±æ¥æ›¿è¿™æ®µä»£ç ä½œè€…å°†å®ƒæ•´ç†æˆåº”æœ‰çš„æ ·å­ã€‚</p><p>æ—¢ç„¶æˆ‘ä»¬ä¸å–œæ¬¢ç¼©è¿›ç‰¹åˆ«å¤šçš„ä»£ç ï¼Œé‚£æˆ‘ä»¬å°±è¦æ¶ˆé™¤ç¼©è¿›ã€‚å…·ä½“åˆ°è¿™æ®µä»£ç ï¼Œä¸€ä¸ªç€æ‰‹ç‚¹æ˜¯ for å¾ªç¯ï¼Œå› ä¸ºé€šå¸¸æ¥è¯´ï¼Œfor å¾ªç¯å¤„ç†çš„æ˜¯ä¸€ä¸ªé›†åˆï¼Œè€Œå¾ªç¯é‡Œé¢å¤„ç†çš„æ˜¯è¿™ä¸ªé›†åˆä¸­çš„ä¸€ä¸ªå…ƒç´ ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå¾ªç¯ä¸­çš„å†…å®¹æå–æˆä¸€ä¸ªå‡½æ•°ï¼Œè®©è¿™ä¸ªå‡½æ•°åªå¤„ç†ä¸€ä¸ªå…ƒç´ ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š</p><pre><code>public void distributeEpubs(final long bookId) {\n  List&lt;Epub&gt; epubs = this.getEpubsByBookId(bookId);\n  for (Epub epub : epubs) {\n    this.distributeEpub(epub)ï¼›\n  }\n}\n\n\nprivate void distributeEpub(final Epub epub) {\n  if (epub.isValid()) {\n    boolean registered = this.registerIsbn(epub);\n    if (registered) {\n      this.sendEpub(epub);\n    }\n  }\n}\n</code></pre><p>è¿™é‡Œæˆ‘ä»¬å·²ç»æœ‰äº†ä¸€æ¬¡æ‹†åˆ†ï¼Œåˆ†è§£å‡ºæ¥ distributeEpub å‡½æ•°æ¯æ¬¡åªå¤„ç†ä¸€ä¸ªå…ƒç´ ã€‚æ‹†åˆ†å‡ºæ¥çš„ä¸¤ä¸ªå‡½æ•°åœ¨ç¼©è¿›çš„é—®é¢˜ä¸Šï¼Œå°±æ”¹å–„äº†ä¸€ç‚¹ã€‚</p><p>ç¬¬ä¸€ä¸ªå‡½æ•° distributeEpubs åªæœ‰ä¸€å±‚ç¼©è¿›ï¼Œè¿™æ˜¯ä¸€ä¸ªæ­£å¸¸å‡½æ•°åº”æœ‰çš„æ ·å­ï¼Œä¸è¿‡ï¼Œç¬¬äºŒä¸ªå‡½æ•° distributeEpub åˆ™è¿˜æœ‰å¤šå±‚ç¼©è¿›ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­å¤„ç†ä¸€ä¸‹ã€‚</p><h2>if å’Œ else</h2><p>åœ¨ distributeEpub é‡Œï¼Œé€ æˆç¼©è¿›çš„åŸå› æ˜¯ if è¯­å¥ã€‚é€šå¸¸æ¥è¯´ï¼Œif è¯­å¥é€ æˆçš„ç¼©è¿›ï¼Œå¾ˆå¤šæ—¶å€™éƒ½æ˜¯åœ¨æ£€æŸ¥æŸä¸ªå…ˆå†³æ¡ä»¶ï¼Œåªæœ‰æ¡ä»¶é€šè¿‡æ—¶ï¼Œæ‰ç»§ç»­æ‰§è¡Œåç»­çš„ä»£ç ã€‚è¿™æ ·çš„ä»£ç å¯ä»¥ä½¿ç”¨å«è¯­å¥ï¼ˆguard clauseï¼‰æ¥è§£å†³ï¼Œä¹Ÿå°±æ˜¯è®¾ç½®å•ç‹¬çš„æ£€æŸ¥æ¡ä»¶ï¼Œä¸æ»¡è¶³è¿™ä¸ªæ£€æŸ¥æ¡ä»¶æ—¶ï¼Œç«‹åˆ»ä»å‡½æ•°ä¸­è¿”å›ã€‚</p><p>è¿™æ˜¯ä¸€ç§å…¸å‹çš„é‡æ„æ‰‹æ³•ï¼š<strong>ä»¥å«è¯­å¥å–ä»£åµŒå¥—çš„æ¡ä»¶è¡¨è¾¾å¼ï¼ˆReplace Nested Conditional with Guard Clausesï¼‰</strong>ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹çœ‹æ”¹è¿›åçš„ distributeEpub å‡½æ•°ï¼š</p><pre><code>private void distributeEpub(final Epub epub) {\n  if (!epub.isValid()) {\n    return;\n  }\n  \n  boolean registered = this.registerIsbn(epub);\n  if (!registered) {\n    return;\n  }\n  \n  this.sendEpub(epub);\n}\n</code></pre><p>æ”¹é€ åçš„ distributeEpub å°±æ²¡æœ‰äº†åµŒå¥—ï¼Œä¹Ÿå°±æ²¡æœ‰é‚£ä¹ˆå¤šå±‚çš„ç¼©è¿›äº†ã€‚ä½ å¯èƒ½å·²ç»å‘ç°äº†ï¼Œç»è¿‡æˆ‘ä»¬æ”¹é€ ä¹‹åï¼Œä»£ç é‡Œåªæœ‰ä¸€å±‚çš„ç¼©è¿›<strong>ã€‚</strong>å½“ä»£ç é‡Œåªæœ‰ä¸€å±‚ç¼©è¿›æ—¶ï¼Œä»£ç çš„å¤æ‚åº¦å°±å¤§å¤§é™ä½äº†ï¼Œç†è§£æˆæœ¬å’Œå‡ºç°é—®é¢˜ä¹‹åå®šä½çš„æˆæœ¬ä¹Ÿéšä¹‹å¤§å¹…åº¦é™ä½ã€‚</p><p><strong>å‡½æ•°è‡³å¤šæœ‰ä¸€å±‚ç¼©è¿›</strong>ï¼Œè¿™æ˜¯â€œå¯¹è±¡å¥èº«æ“ï¼ˆã€Š<a href=\"https://www.infoq.cn/minibook/thoughtworks-anthology\">ThoughtWorksæ–‡é›†</a>ã€‹ä¹¦é‡Œçš„ä¸€ç¯‡ï¼‰â€é‡Œçš„ä¸€ä¸ªè§„åˆ™ã€‚å‰é¢è®²â€œ<a href=\"https://time.geekbang.org/column/article/327483\">å¤§ç±»</a>â€çš„æ—¶å€™ï¼Œæˆ‘æ›¾ç»æåˆ°è¿‡â€œå¯¹è±¡å¥èº«æ“â€è¿™ç¯‡æ–‡ç« ï¼Œå…¶ä¸­ç»™å‡ºäº†ä¹æ¡ç¼–ç¨‹è§„åˆ™ï¼Œä¸‹é¢æˆ‘ä»¬å†æ¥è®²å…¶ä¸­çš„ä¸€æ¡ï¼š<strong>ä¸è¦ä½¿ç”¨ else å…³é”®å­—</strong>ã€‚</p><p>æ²¡é”™ï¼Œ<strong>else ä¹Ÿæ˜¯ä¸€ç§åå‘³é“ï¼Œè¿™æ˜¯æŒ‘æˆ˜å¾ˆå¤šç¨‹åºå‘˜è®¤çŸ¥çš„</strong>ã€‚åœ¨å¤§å¤šæ•°äººå°è±¡ä¸­ï¼Œif å’Œ else æ˜¯äº²å¦‚ä¸€å®¶çš„æ•´ä½“ï¼Œå®ƒä»¬å‡ ä¹æ˜¯æ¯”ç¿¼é½é£çš„ã€‚é‚£ä¹ˆï¼Œelse å¯ä»¥ä¸å†™å—ï¼Ÿå¯ä»¥ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ä¸‹é¢çš„ä»£ç ï¼š</p><pre><code>public double getEpubPrice(final boolean highQuality, final int chapterSequence) {\n  double price = 0;\n  if (highQuality &amp;&amp; chapterSequence &gt; START_CHARGING_SEQUENCE) {\n    price = 4.99;\n  } else if (sequenceNumber &gt; START_CHARGING_SEQUENCE\n        &amp;&amp; sequenceNumber &lt;= FURTHER_CHARGING_SEQUENCE) {\n    price = 1.99;\n  } else if (sequenceNumber &gt; FURTHER_CHARGING_SEQUENCE) {\n    price = 2.99;\n  } else {\n    price = 0.99;\n  }\n  \n  return price;\n}\n</code></pre><p>è¿™æ˜¯ä¸€ä¸ªæ ¹æ® EPUB ä¿¡æ¯è¿›è¡Œå®šä»·çš„å‡½æ•°ï¼Œå®ƒçš„å®šä»·é€»è¾‘æ­£å¦‚ä»£ç ä¸­æ‰€ç¤ºã€‚</p><ul>\n<li>å¦‚æœæ˜¯é«˜å“è´¨ä¹¦ï¼Œè€Œä¸”è¦æ˜¯ç« èŠ‚åºå·è¶…è¿‡èµ·å§‹ä»˜è´¹ç« èŠ‚ï¼Œå°±å®šä»·4.99ï¼›</li>\n<li>å¯¹ä¸€èˆ¬çš„ä¹¦è€Œè¨€ï¼Œè¶…è¿‡èµ·å§‹ä»˜è´¹ç« èŠ‚ï¼Œå°±å®šä»· 1.99ï¼›è¶…è¿‡è¿›ä¸€æ­¥ä»˜è´¹ç« èŠ‚ï¼Œå°±å®šä»· 2.99ã€‚</li>\n<li>ç¼ºçœæƒ…å†µä¸‹ï¼Œå®šä»· 0.99ã€‚</li>\n</ul><p>å°±è¿™æ®µä»£ç è€Œè¨€ï¼Œå¦‚æœæƒ³ä¸ä½¿ç”¨ elseï¼Œä¸€ä¸ªç®€å•çš„å¤„ç†æ‰‹æ³•å°±æ˜¯è®©æ¯ä¸ªé€»è¾‘æå‰è¿”å›ï¼Œè¿™å’Œæˆ‘ä»¬å‰é¢æåˆ°çš„å«è¯­å¥çš„è§£å†³æ–¹æ¡ˆå¦‚å‡ºä¸€è¾™ï¼š</p><pre><code>public double getEpubPrice(final boolean highQuality, final int chapterSequence) {\n  if (highQuality &amp;&amp; chapterSequence &gt; START_CHARGING_SEQUENCE) {\n    return 4.99;\n  } \n  \n  if (sequenceNumber &gt; START_CHARGING_SEQUENCE\n        &amp;&amp; sequenceNumber &lt;= FURTHER_CHARGING_SEQUENCE) {\n    return 1.99;\n  } \n\n\n  if (sequenceNumber &gt; FURTHER_CHARGING_SEQUENCE) {\n    return 2.99;\n  } \n\n\n  return 0.99;\n</code></pre><p>å¯¹äºè¿™ç§é€»è¾‘ä¸Šè¿˜æ¯”è¾ƒç®€å•çš„ä»£ç ï¼Œè¿™ä¹ˆæ”¹é€ è¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“çš„ï¼Œè€Œå¯¹äºä¸€äº›æ›´ä¸ºå¤æ‚çš„ä»£ç ï¼Œä¹Ÿè®¸å°±è¦ç”¨åˆ°å¤šæ€æ¥æ”¹è¿›ä»£ç äº†ã€‚ä¸è¿‡åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå¤§éƒ¨åˆ†ä»£ç é€»è¾‘éƒ½æ˜¯é€æ¸å˜å¾—å¤æ‚çš„ï¼Œæ‰€ä»¥ï¼Œæœ€å¥½åœ¨å®ƒè¿˜æ¯”è¾ƒç®€å•æ—¶ï¼Œå°±æŠŠåå‘³é“æ¶ˆç­æ‰ã€‚è¿™æ‰æ˜¯æœ€ç†æƒ³çš„åšæ³•ã€‚</p><p>æ— è®ºæ˜¯åµŒå¥—çš„ä»£ç ï¼Œè¿˜æ˜¯ else è¯­å¥ï¼Œæˆ‘ä»¬ä¹‹æ‰€ä»¥è¦æŠŠå®ƒä»¬è§†ä¸ºåå‘³é“ï¼Œæœ¬è´¨ä¸Šéƒ½åœ¨è¿½æ±‚ç®€å•ï¼Œå› ä¸ºä¸€æ®µä»£ç çš„åˆ†æ”¯è¿‡å¤šï¼Œå…¶å¤æ‚åº¦å°±ä¼šå¤§å¹…åº¦å¢åŠ ã€‚æˆ‘ä»¬ä¸€ç›´åœ¨è¯´ï¼Œäººè„‘èƒ½å¤Ÿç†è§£çš„å¤æ‚åº¦æ˜¯æœ‰é™çš„ï¼Œåˆ†æ”¯è¿‡å¤šçš„ä»£ç ä¸€å®šæ˜¯ä¼šè¶…è¿‡è¿™ä¸ªç†è§£èŒƒå›´ã€‚</p><p>åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œæœ‰ä¸€ä¸ªè¡¡é‡ä»£ç å¤æ‚åº¦å¸¸ç”¨çš„æ ‡å‡†ï¼Œå«åš<a href=\"https://en.wikipedia.org/wiki/Cyclomatic_complexity\">åœˆå¤æ‚åº¦</a>ï¼ˆCyclomatic complexityï¼Œç®€ç§° CCï¼‰ï¼Œåœˆå¤æ‚åº¦è¶Šé«˜ï¼Œä»£ç è¶Šå¤æ‚ï¼Œç†è§£å’Œç»´æŠ¤çš„æˆæœ¬å°±è¶Šé«˜ã€‚åœ¨åœˆå¤æ‚åº¦çš„åˆ¤å®šä¸­ï¼Œå¾ªç¯å’Œé€‰æ‹©è¯­å¥å æœ‰é‡è¦çš„åœ°ä½ã€‚åœˆå¤æ‚åº¦å¯ä»¥ä½¿ç”¨å·¥å…·æ¥æ£€æŸ¥ï¼Œæ¯”å¦‚ï¼Œåœ¨ Java ä¸–ç•Œä¸­ï¼Œæœ‰å¾ˆå¤šå¯ä»¥æ£€æŸ¥åœˆå¤æ‚åº¦çš„å·¥å…·ï¼Œæˆ‘ä»¬ä¹‹å‰æåˆ°è¿‡çš„ Checkstyle å°±å¯ä»¥åš<a href=\"https://checkstyle.sourceforge.io/config_metrics.html#CyclomaticComplexity\">åœˆå¤æ‚åº¦çš„æ£€æŸ¥</a>ï¼Œä½ å¯ä»¥é™åˆ¶æœ€å¤§çš„åœˆå¤æ‚åº¦ï¼Œå½“åœˆå¤æ‚åº¦å¤§äºæŸä¸ªå€¼çš„æ—¶å€™ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p><p>åªè¦æˆ‘ä»¬èƒ½å¤Ÿæ¶ˆé™¤åµŒå¥—ï¼Œæ¶ˆé™¤ elseï¼Œä»£ç çš„åœˆå¤æ‚åº¦å°±ä¸ä¼šå¾ˆé«˜ï¼Œç†è§£å’Œç»´æŠ¤çš„æˆæœ¬è‡ªç„¶ä¹Ÿå°±ä¼šéšä¹‹é™ä½ã€‚</p><h2>é‡å¤çš„ Switch</h2><p>é€šè¿‡å‰é¢å†…å®¹çš„ä»‹ç»ï¼Œä½ ä¼šå‘ç°ï¼Œå¾ªç¯å’Œé€‰æ‹©è¯­å¥è¿™äº›ä½ æœ€ç†Ÿæ‚‰çš„ä¸œè¥¿ï¼Œå…¶å®éƒ½æ˜¯åå‘³é“å‡ºç°çš„é«˜é£é™©åœ°å¸¦ï¼Œå¿…é¡»å°å¿ƒç¿¼ç¿¼åœ°ä½¿ç”¨å®ƒä»¬ã€‚æ¥ä¸‹æ¥ï¼Œè¿˜æœ‰ä¸€ä¸ªä½ ä»ç¼–ç¨‹ä¹‹åˆå°±ç†Ÿæ‚‰çš„ä¸œè¥¿ï¼Œä¹Ÿæ˜¯å¦ä¸€ä¸ªåå‘³é“çš„é«˜é£é™©åœ°å¸¦ã€‚æˆ‘ä»¬æ¥çœ‹ä¸¤æ®µä»£ç ï¼š</p><pre><code>public double getBookPrice(final User user, final Book book) {\n  double price = book.getPrice();\n  switch (user.getLevel()) {\n    case UserLevel.SILVER:\n      return price * 0.9;\n    case UserLevel.GOLD: \n      return price * 0.8;\n    case UserLevel.PLATINUM:\n      return price * 0.75;\n    default:\n      return price;\n  }\n}\n\n\npublic double getEpubPrice(final User user, final Epub epub) {\n  double price = epub.getPrice();\n  switch (user.getLevel()) {\n    case UserLevel.SILVER:\n      return price * 0.95;\n    case UserLevel.GOLD: \n      return price * 0.85;\n    case UserLevel.PLATINUM:\n      return price * 0.8;\n    default:\n      return price;\n  }\n}\n</code></pre><p>è¿™ä¸¤æ®µä»£ç ï¼Œåˆ†åˆ«è®¡ç®—äº†ç”¨æˆ·åœ¨ç½‘ç«™ä¸Šè´­ä¹°ä½œå“åœ¨çº¿é˜…è¯»æ‰€æ”¯ä»˜çš„ä»·æ ¼ï¼Œä»¥åŠè´­ä¹° EPUB æ ¼å¼ç”µå­ä¹¦æ‰€æ”¯ä»˜çš„ä»·æ ¼ã€‚å…¶ä¸­ï¼Œç”¨æˆ·å®é™…æ”¯ä»˜çš„ä»·æ ¼ä¼šæ ¹æ®ç”¨æˆ·åœ¨ç³»ç»Ÿä¸­çš„ç”¨æˆ·çº§åˆ«æœ‰æ‰€å·®å¼‚ï¼Œçº§åˆ«è¶Šé«˜ï¼ŒæŠ˜æ‰£å°±è¶Šé«˜ã€‚</p><p>æ˜¾ç„¶ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°é‡Œå‡ºç°äº†ç±»ä¼¼çš„ä»£ç ï¼Œå…¶ä¸­æœ€ç±»ä¼¼çš„éƒ¨åˆ†å°±æ˜¯ switchï¼Œéƒ½æ˜¯æ ¹æ®ç”¨æˆ·çº§åˆ«è¿›è¡Œåˆ¤æ–­ã€‚äº‹å®ä¸Šï¼Œè¿™å¹¶ä¸æ˜¯ä»…æœ‰çš„æ ¹æ®ç”¨æˆ·çº§åˆ«è¿›è¡Œåˆ¤æ–­çš„ä»£ç ï¼Œå„ç§éœ€è¦åŒºåˆ†ç”¨æˆ·çº§åˆ«çš„åœºæ™¯ä¸­éƒ½æœ‰ç±»ä¼¼çš„ä»£ç ï¼Œè€Œè¿™ä¹Ÿæ˜¯ä¸€ç§å…¸å‹çš„åå‘³é“ï¼š<strong>é‡å¤çš„switchï¼ˆRepeated Switchï¼‰</strong>ã€‚</p><p>ä¹‹æ‰€ä»¥ä¼šå‡ºç°é‡å¤çš„ switchï¼Œé€šå¸¸éƒ½æ˜¯ç¼ºå°‘äº†ä¸€ä¸ªæ¨¡å‹ã€‚æ‰€ä»¥ï¼Œåº”å¯¹è¿™ç§åå‘³é“ï¼Œé‡æ„çš„æ‰‹æ³•æ˜¯ï¼š<strong>ä»¥å¤šæ€å–ä»£æ¡ä»¶è¡¨è¾¾å¼ï¼ˆRelace Conditional with Polymorphismï¼‰</strong>ã€‚å…·ä½“åˆ°è¿™é‡Œçš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥ä¸€ä¸ª UserLevel çš„æ¨¡å‹ï¼Œå°† switch æ¶ˆé™¤æ‰ï¼š</p><pre><code>interface UserLevel {\n  double getBookPrice(Book book);\n  double getEpubPrice(Epub epub);\n}\n\n\nclass RegularUserLevel implements UserLevel {\n  public double getBookPrice(final Book book) {\n    return book.getPrice();\n  }\n  \n  public double getEpubPrice(final Epub epub) {\n    return epub.getPrice();\n}\n\n\nclass GoldUserLevel implements UserLevel {\n  public double getBookPrice(final Book book) {\n    return book.getPrice() * 0.8;\n  }\n  \n  public double getEpubPrice(final Epub epub) {\n    return epub.getPrice() * 0.85;\n  }\n}\n\n\nclass SilverUserLevel implements UserLevel {\n  public double getBookPrice(final Book book) {\n    return book.getPrice() * 0.9;\n  }\n  \n  public double getEpubPrice(final Epub epub) {\n    return epub.getPrice() * 0.85;\n  }\n}\n\n\nclass PlatinumUserLevel implements UserLevel {\n  public double getBookPrice(final Book book) {\n    return book.getPrice() * 0.75;\n  }\n  \n  public double getEpubPrice(final Epub epub) {\n    return epub.getPrice() * 0.8; \n</code></pre><p>æœ‰äº†è¿™ä¸ªåŸºç¡€ï¼Œå‰é¢çš„ä»£ç å°±å¯ä»¥æŠŠ switch å»æ‰äº†ï¼š</p><pre><code>public double getBookPrice(final User user, final Book book) {\n  UserLevel level = user.getUserLevel()\n  return level.getBookPrice(book);\n}\n\n\npublic double getEpubPrice(final User user, final Epub epub) {\n  UserLevel level = user.getUserLevel()\n  return level.getEpubPrice(epub);\n}\n</code></pre><p>æˆ‘åœ¨ã€Šè½¯ä»¶è®¾è®¡ä¹‹ç¾ã€‹è®²<a href=\"https://time.geekbang.org/column/article/261238\">å¼€æ”¾å°é—­åŸåˆ™</a>çš„æ—¶å€™ï¼Œç”¨çš„ä¾‹å­å’Œè¿™æ®µä»£ç æ˜¯ç±»ä¼¼çš„ï¼Œé‡Œé¢ä¹Ÿæœ‰è°ƒæ•´çš„è¿‡ç¨‹ï¼Œä½ æœ‰å…´è¶£çš„è¯ï¼Œä¸å¦¨å»çœ‹ä¸€ä¸‹ã€‚åªä¸è¿‡ï¼Œåœ¨é‚£ä¸ªä¾‹å­é‡Œé¢ï¼Œæˆ‘ä»¬çœ‹åˆ°çš„æ˜¯ä¸€è¿ä¸²çš„â€œ if..elseâ€ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œswitch å…¶å®å°±æ˜¯ä¸€å †â€œ if..elseâ€ çš„ç®€åŒ–å†™æ³•ï¼ŒäºŒè€…æ˜¯ç­‰ä»·çš„ï¼Œæ‰€ä»¥ï¼Œè¿™ä¸ªé‡æ„æ‰‹æ³•ï¼Œä»¥å¤šæ€å–ä»£çš„æ˜¯æ¡ä»¶è¡¨è¾¾å¼ï¼Œè€Œä¸ä»…ä»…æ˜¯å–ä»£ switchã€‚</p><p>å…¶å®ï¼Œå…³äºæ§åˆ¶è¯­å¥è¿˜æœ‰ä¸€ä¸ªåå‘³é“ï¼Œé‚£å°±æ˜¯å¾ªç¯è¯­å¥ã€‚æ²¡é”™ï¼Œå¾ªç¯æœ¬èº«å°±æ˜¯ä¸€ä¸ªåå‘³é“ï¼Œä½†è®²è§£å®ƒè¿˜éœ€è¦ä¸€äº›çŸ¥è¯†çš„é“ºå«ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä¼šæŠŠå®ƒæ”¾åˆ°åé¢ç¬¬13èŠ‚ï¼Œè®²â€œè½åçš„ä»£ç é£æ ¼â€æ—¶å†æ¥è®²è§£ã€‚è¿™é‡Œï¼Œä½ åªè¦çŸ¥é“å¾ªç¯è¯­å¥ä¹Ÿæ˜¯ä¸€ä¸ªåå‘³é“å°±å¤Ÿäº†ã€‚</p><h2>æ€»ç»“æ—¶åˆ»</h2><p>ä»Šå¤©æˆ‘ä»¬è®²äº†ç¨‹åºå‘˜ä»¬æœ€ç†Ÿæ‚‰çš„æ§åˆ¶è¯­å¥ï¼šé€‰æ‹©è¯­å¥å’Œå¾ªç¯è¯­å¥ã€‚é—æ†¾çš„æ˜¯ï¼Œè¿™äº›è¯­å¥ä»Šå¤©éƒ½æˆäº†åå‘³é“çš„é«˜å‘åœ°å¸¦ï¼Œä»¥å„ç§å½¢æ€å‘ˆç°åœ¨æˆ‘ä»¬é¢å‰ï¼š</p><ul>\n<li>åµŒå¥—çš„ä»£ç ï¼›</li>\n<li>else è¯­å¥ï¼›</li>\n<li>é‡å¤çš„ switchï¼›</li>\n<li>å¾ªç¯è¯­å¥ã€‚</li>\n</ul><p>åµŒå¥—çš„ä»£ç ä¹Ÿå¥½ï¼Œelse è¯­å¥ä¹Ÿç½¢ï¼ŒäºŒè€…çœŸæ­£çš„é—®é¢˜åœ¨äºï¼Œå®ƒä»¬ä¼šä½¿ä»£ç å˜å¾—å¤æ‚ï¼Œè¶…å‡ºäººè„‘æ‰€èƒ½ç†è§£çš„èŒƒç•´ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æå–å•ä¸ªå…ƒç´ æ“ä½œï¼Œé™ä½å¾ªç¯è¯­å¥çš„å¤æ‚åº¦ï¼Œè€Œç”¨å«è¯­å¥æ¥ç®€åŒ–æ¡ä»¶è¡¨è¾¾å¼çš„ç¼–å†™ï¼Œé™ä½é€‰æ‹©è¯­å¥çš„å¤æ‚åº¦ã€‚ä¸€ä¸ªè¡¡é‡ä»£ç å¤æ‚åº¦çš„æ ‡å‡†æ˜¯åœˆå¤æ‚åº¦ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å·¥å…·æ£€æŸ¥ä¸€æ®µä»£ç çš„åœˆå¤æ‚åº¦ã€‚</p><p>é‡å¤çš„ switch æœ¬è´¨ä¸Šæ˜¯ç¼ºå°‘äº†ä¸€ä¸ªæ¨¡å‹ï¼Œå¯ä»¥ä½¿ç”¨å¤šæ€å–ä»£æ¡ä»¶è¡¨è¾¾å¼ï¼Œå¼•å…¥ç¼ºå°‘çš„æ¨¡å‹ï¼Œæ¶ˆé™¤é‡å¤çš„ switchã€‚</p><p>å¦‚æœä»Šå¤©çš„å†…å®¹ä½ åªèƒ½è®°ä½ä¸€ä»¶äº‹ï¼Œé‚£è¯·è®°ä½ï¼š<strong>å¾ªç¯å’Œé€‰æ‹©è¯­å¥ï¼Œå¯èƒ½éƒ½æ˜¯åå‘³é“ã€‚</strong></p><p><img src=\"https://static001.geekbang.org/resource/image/6c/9f/6c9aedb0d5d58a0eaf08c7fe36040a9f.jpg?wh=2284*3156\" alt=\"\"></p><h2>æ€è€ƒé¢˜</h2><p>ä»Šå¤©è®¨è®ºçš„åå‘³é“æŒ‘æˆ˜äº†å¾ˆå¤šäººä¹ ä»¥ä¸ºå¸¸çš„ç¼–ç æ–¹å¼ï¼Œæˆ‘æƒ³è¯·ä½ è°ˆè°ˆä½ å’Œè¿™äº›è¯­å¥çš„æ•…äº‹ï¼Œæ˜¯ä¸èˆä¹Ÿå¥½ï¼Œæ˜¯çº ç»“ä¹Ÿç½¢ï¼Œæ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„çœ‹æ³•ã€‚</p><p>å¦‚æœè¿™èŠ‚è¯¾çš„å†…å®¹ç¡®å®é¢ è¦†äº†ä½ çš„è®¤çŸ¥ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠå®ƒåˆ†äº«å‡ºå»ï¼Œè®©æ›´å¤šäººçŸ¥é“ã€‚</p><p>æ„Ÿè°¢é˜…è¯»ï¼Œæˆ‘ä»¬ä¸‹ä¸€è®²å†è§ï¼</p><p><span class=\"reference\">å‚è€ƒèµ„æ–™</span>ï¼š<a href=\"https://time.geekbang.org/column/article/261238\">å¼€æ”¾å°é—­åŸåˆ™ï¼šä¸æ”¹ä»£ç æ€ä¹ˆå†™æ–°åŠŸèƒ½ï¼Ÿ</a></p>","comments":[{"had_liked":false,"id":277971,"user_name":"å‘†å‘†ç‹—çš„å…½","can_delete":false,"product_type":"c1","uid":2404924,"ip_address":"","ucode":"B7D445F3BE2E4C","user_header":"https://static001.geekbang.org/account/avatar/00/24/b2/3c/22028324.jpg","comment_is_top":false,"comment_ctime":1612687237,"is_pvip":false,"replies":[{"id":"100908","content":"æ²¡ä»€ä¹ˆä¸å¦¥ï¼Œå®é™…ä¸Šï¼Œæˆ‘ä¹Ÿç»å¸¸è¿™ä¹ˆåšã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘é€‰æ‹©äº†å¤§å®¶æ›´å®¹æ˜“ç†è§£çš„æ–¹å¼ï¼Œé€‚ç”¨é¢æ›´å¹¿ä¸€äº›è€Œå·²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1612710727,"ip_address":"","comment_id":277971,"utype":1}],"discussion_count":6,"race_medal":0,"score":"100396935045","product_id":100068401,"comment_content":"ä½ å¥½ï¼Œæˆ‘çœ‹æ‚¨å»ºç«‹äº†å¾ˆå¤šä¸æšä¸¾é¡¹ä¸€ä¸€å¯¹åº”çš„å†…éƒ¨ç±»ï¼Œè¿™äº›å†…éƒ¨ç±»çš„åˆ›å»ºåœ¨é‚£ä¸ªä½ç½®ä¸æšä¸¾å¯¹è±¡æœ¬èº«ç»‘å®šï¼Ÿè¿˜æ˜¯è¯´æšä¸¾UserLevel(æšä¸¾) implements UserLevel(æ¥å£)ï¼Ÿ<br><br>æˆ‘ä¸€èˆ¬éƒ½æ˜¯ä¹ æƒ¯å°†è¿™äº›é€»è¾‘å°è£…åœ¨æšä¸¾çš„å®ç°é‡Œå…·ä½“ä»£ç æˆ‘ä¸€èˆ¬ä¼šå®ç°ä¸ºï¼š<br><br>public enum UserLevel {<br>    SILVER() {<br>        @Override<br>        public double getPrice(Book book) {<br>            return book.getPrice() * 0.9;<br>        }<br><br>        @Override<br>        public double getPrice(Epub epub) {<br>            return epub.getPrice() * 0.85;<br>        }<br>    },<br>    GOLD() {<br>        @Override<br>        public double getPrice(Book book) {<br>            return book.getPrice() * 0.8;<br>        }<br><br>        @Override<br>        public double getPrice(Epub epub) {<br>            return epub.getPrice() * 0.85;<br>        }<br>    },<br>    PLATINUMP() {<br>        @Override<br>        public double getPrice(Book book) {<br>            return book.getPrice() * 0.75;<br>        }<br><br>        @Override<br>        public double getPrice(Epub epub) {<br>            return epub.getPrice() * 0.8;<br>        }<br>    };<br><br>    public abstract double getPrice(Book book);<br><br>    public abstract double getPrice(Epub epub);<br>}<br><br>ç„¶åè°ƒç”¨çš„åœ°æ–¹ï¼š<br><br>public double getBookPrice(final User user, final Book book) {<br>    UserLevel level = user.getUserLevel();<br>    return level.getPrice(book);<br>}<br><br><br>public double getBookPrice(final User user, final Epub epub) {<br>    UserLevel level = user.getUserLevel();<br>    return level.getPrice(epub);<br>}<br><br>è¯·é—®è¿™é‡Œæˆ‘ç”¨æ­¤ç§æ–¹å¼å®ç°ï¼Œæ˜¯å¦æœ‰ä»€ä¹ˆä¸å¦¥ï¼Ÿ<br>æˆ‘ä¸ªäººåœ¨é¡¹ç›®ä¸­å‡ ä¹å¾ˆåå‘äºç”¨æšä¸¾ï¼Œæ¥å°è£…å¾ˆå¤šä¸šåŠ¡çš„ä¸åŒæ€§ï¼ˆä¸šåŠ¡é’ˆå¯¹ä¸åŒæšä¸¾çš„å®ç°ä¸åˆ¤æ–­ï¼Œéƒ½æ”¾åœ¨äº†æšä¸¾çš„æ–¹æ³•å®ç°ä¸­ï¼‰<br>æ˜¯å¦æœ‰é—®é¢˜ï¼Ÿå¸Œæœ›å¾—åˆ°éƒ‘è€å¸ˆè§£ç­”ï¼Œæ„Ÿè°¢<br><br>","like_count":24,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515233,"discussion_content":"æ²¡ä»€ä¹ˆä¸å¦¥ï¼Œå®é™…ä¸Šï¼Œæˆ‘ä¹Ÿç»å¸¸è¿™ä¹ˆåšã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘é€‰æ‹©äº†å¤§å®¶æ›´å®¹æ˜“ç†è§£çš„æ–¹å¼ï¼Œé€‚ç”¨é¢æ›´å¹¿ä¸€äº›è€Œå·²ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1612710727,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3183263,"avatar":"https://static001.geekbang.org/account/avatar/00/30/92/9f/d5255fe8.jpg","nickname":"snake","note":"","ucode":"0C7398D3A68119","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588378,"discussion_content":"ä¸çŸ¥é“æšä¸¾è¿˜æœ‰è¿™ç§å†™æ³•ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663726942,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é‡åº†"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1759325,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d8/5d/07dfb3b5.jpg","nickname":"æ¯è«åœ","note":"","ucode":"4FA1D5CBBEF702","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578384,"discussion_content":"è¿™ç§æ–¹å¼è¿˜çœŸæ²¡ç”¨è¿‡ä¸€å®šè¦å†™å†™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656689566,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2415448,"avatar":"https://static001.geekbang.org/account/avatar/00/24/db/58/a7a0a85b.jpg","nickname":"äºŒé¥¼","note":"","ucode":"48120565D135F7","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574463,"discussion_content":"æ²¡ç”¨è¿‡çš„å†™æ³•ï¼Œå­¦ä¹ ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654071653,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1501593,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJ5Hnw1tL9EWGdzhibCw89hibKjibwcyUBCSJsQWaxxfGu5AkBibibV0anaKqw3nf3ZP0UWy5BaEYyw2Q/132","nickname":"smilekaka","note":"","ucode":"C01D8020019FDC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573821,"discussion_content":"è¿™æ˜¯ä»€ä¹ˆå†™æ³•ï¼Ÿ æˆ‘æ€ä¹ˆæ²¡è§è¿‡å•Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653663494,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051293,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/4c/dd/c6035349.jpg","nickname":"Bumblebee","note":"","ucode":"B879C8A511D08D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573448,"discussion_content":"ğŸš©","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653437765,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273481,"user_name":"äºé€”","can_delete":false,"product_type":"c1","uid":1669343,"ip_address":"","ucode":"70300C6CCCEAF1","user_header":"https://static001.geekbang.org/account/avatar/00/19/78/df/424bdc4a.jpg","comment_is_top":false,"comment_ctime":1610611052,"is_pvip":true,"replies":[{"id":"99096","content":"å­¦ä¹ ä¸€äº›è¡Œä¸šé€šç”¨çš„è¯­è¨€è¿˜æ˜¯éœ€è¦çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1610621381,"ip_address":"","comment_id":273481,"utype":1}],"discussion_count":3,"race_medal":0,"score":"96099891564","product_id":100068401,"comment_content":"ä»¥å«è¯­å¥å–ä»£åµŒå¥—çš„æ¡ä»¶è¡¨è¾¾å¼ã€‚æˆ‘åœ¨ç¬¬ä¸€å®¶å…¬å¸è½¬æ­£åï¼Œç»„å†…code review ï¼Œæˆ‘ä»¬ç»„é•¿å°±æ¨èäº†è¿™ç§åšæ³•ï¼Œä¸€ç›´æ²¿ç”¨åˆ°ç°åœ¨ğŸ˜ï¼Œåªæ˜¯ä¸çŸ¥é“â€œå«è¯­å¥â€è¿™ä¸ªæ­£å¼çš„æ¦‚å¿µï¼","like_count":22,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513613,"discussion_content":"å­¦ä¹ ä¸€äº›è¡Œä¸šé€šç”¨çš„è¯­è¨€è¿˜æ˜¯éœ€è¦çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610621381,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2831222,"avatar":"","nickname":"æ‰£å­","note":"","ucode":"B44CE20098B938","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413296,"discussion_content":"å‘ç°è·Ÿç€å¼€æºé¡¹ç›®ï¼Œæˆ‘ä¹Ÿä¸çŸ¥ä¸è§‰å­¦ä¼šäº†å«è¯­å¥ï¼Œåªæ˜¯å•çº¯è§‰å¾—æ¡ç†æ¸…æ™°åˆä¸å†—ä½™ã€‚å¬äº†è€å¸ˆçš„è¯¾ï¼Œæ‰çœŸæ­£é¢†ä¼šäº†ã€‚è®ºå¥½ä¾‹å­çš„é‡è¦æ€§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636440558,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1669343,"avatar":"https://static001.geekbang.org/account/avatar/00/19/78/df/424bdc4a.jpg","nickname":"äºé€”","note":"","ucode":"70300C6CCCEAF1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342232,"discussion_content":"å—¯ï¼Œè€å¸ˆæœ‰å“ªäº›æ¨èçš„é€”å¾„å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610621475,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":274015,"user_name":"Demon.Lee","can_delete":false,"product_type":"c1","uid":1052859,"ip_address":"","ucode":"7F0E5493A8E345","user_header":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","comment_is_top":false,"comment_ctime":1610788404,"is_pvip":false,"replies":[{"id":"99891","content":"å«è¯­å¥æ˜¯å‰ææ¡ä»¶ï¼Œç»“æœæ˜¯æå‰è¿”å›ã€‚<br><br>è‡³äºä½ çš„ç¬¬äºŒä¸ªé—®é¢˜ï¼Œçœ‹ä¸æ‡‚ä¸­æ–‡æ—¶ï¼Œå°±å»çœ‹è‹±æ–‡ã€‚<br><br>The Law of Demeter (â€œtalk only to your friendsâ€) is a good place to start, but think about it this way: you can play with your toys, with toys that you make, and with toys that someone gives you. You donâ€™t ever, ever play with your toyâ€™s toys.<br><br>äººå®¶çš„åŸæ–‡æ˜¯ You donâ€™t ever, ever play with your toyâ€™s toys. åˆ«åŠ¨ç©å…·çš„ç©å…·ï¼Œå’Œè¿ªç±³ç‰¹æ³•åˆ™è¯´çš„æ˜¯ä¸€å›äº‹ï¼Œæ‰€ä»¥ï¼Œä½ ä¸ç†è§£çš„åŸå› æ˜¯ç¿»è¯‘çš„ä¸å¥½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1611452286,"ip_address":"","comment_id":274015,"utype":1}],"discussion_count":4,"race_medal":1,"score":"40265494068","product_id":100068401,"comment_content":"éƒ‘å¤§ï¼Œè¯·æ•™ä¸¤ä¸ªé—®é¢˜ï¼Œè°¢è°¢ã€‚<br>â€œå¯¹è±¡å¥èº«æ“â€ä¸­æœ‰è¿™æ ·å‡ å¥è¯ï¼š<br>1ï¼‰è§„åˆ™2ï¼šæ‹’ç»elseå…³é”®å­—<br>    â€œéœ€è¦å°å¿ƒçš„æ˜¯ï¼Œå¦‚æœè¿‡åº¦ä½¿ç”¨â€œæå‰è¿”å›â€ï¼Œä»£ç çš„æ¸…æ™°åº¦å¾ˆå¿«ä¼šé™ä½ã€‚â€ï¼Œ<br>    â€œé¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ç»™æˆ‘ä»¬æä¾›äº†ä¸€ç§æ›´ä¸ºå¼ºå¤§çš„å·¥å…·â€”â€”å¤šæ€ã€‚å®ƒèƒ½å¤Ÿå¤„ç†æ›´ä¸ºå¤æ‚çš„æ¡ä»¶ åˆ¤æ–­ã€‚å¯¹äºç®€å•çš„æ¡ä»¶åˆ¤æ–­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨â€œå«è¯­å¥â€å’Œâ€œæå‰è¿”å›â€æ›¿æ¢å®ƒã€‚â€<br> è¿™é‡Œçš„â€œå«è¯­å¥â€ å’Œ â€œæå‰è¿”å›â€ æ˜¯ä¸€ä¸ªæ„æ€ä¹ˆï¼Œæˆ‘ç†è§£ä»–ä»¬æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯æå‰checkå¹¶returnã€‚<br><br>2ï¼‰è§„åˆ™4ï¼šä¸€è¡Œä»£ç åªæœ‰ä¸€ä¸ªâ€œ.â€è¿ç®—ç¬¦<br>â€œè¿ªç±³ç‰¹æ³•åˆ™ï¼ˆThe Law of Demeterï¼Œâ€œåªå’Œèº«è¾¹çš„æœ‹å‹äº¤æµâ€ï¼‰æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ã€‚è¿˜å¯ä»¥è¿™ æ ·æ€è€ƒå®ƒï¼šä½ å¯ä»¥ç©è‡ªå·±çš„ç©å…·ï¼Œå¯ä»¥ç©ä½ åˆ¶é€ çš„ç©å…·ï¼Œè¿˜æœ‰åˆ«äººé€ç»™ä½ çš„ç©å…·ã€‚ä½†æ˜¯æ°¸è¿œ ä¸è¦ç¢°ä½ çš„ç©å…·ã€‚â€<br>ä»€ä¹ˆå« â€œä¸è¦ç¢°ä½ çš„ç©å…·â€ï¼Ÿæ˜¯ä¸æ˜¯ â€œä¸è¦ç¢°åˆ«äººçš„ç©å…·â€ï¼Ÿ<br>","like_count":10,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513895,"discussion_content":"å«è¯­å¥æ˜¯å‰ææ¡ä»¶ï¼Œç»“æœæ˜¯æå‰è¿”å›ã€‚\n\nè‡³äºä½ çš„ç¬¬äºŒä¸ªé—®é¢˜ï¼Œçœ‹ä¸æ‡‚ä¸­æ–‡æ—¶ï¼Œå°±å»çœ‹è‹±æ–‡ã€‚\n\nThe Law of Demeter (â€œtalk only to your friendsâ€) is a good place to start, but think about it this way: you can play with your toys, with toys that you make, and with toys that someone gives you. You donâ€™t ever, ever play with your toyâ€™s toys.\n\näººå®¶çš„åŸæ–‡æ˜¯ You donâ€™t ever, ever play with your toyâ€™s toys. åˆ«åŠ¨ç©å…·çš„ç©å…·ï¼Œå’Œè¿ªç±³ç‰¹æ³•åˆ™è¯´çš„æ˜¯ä¸€å›äº‹ï¼Œæ‰€ä»¥ï¼Œä½ ä¸ç†è§£çš„åŸå› æ˜¯ç¿»è¯‘çš„ä¸å¥½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611452286,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1362235,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c9/3b/ead87c38.jpg","nickname":"Seed2009","note":"","ucode":"E21E429D3D1F8F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":346289,"discussion_content":"å“ˆå“ˆï¼Œå¾ˆå¤šç¿»è¯‘çœŸçš„è¯¯äººå­å¼Ÿï¼æŸäº›ä½œè€…è¿˜å–œæ¬¢æ•…å¼„ç„è™š","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1611901729,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1759325,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d8/5d/07dfb3b5.jpg","nickname":"æ¯è«åœ","note":"","ucode":"4FA1D5CBBEF702","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578386,"discussion_content":"é«˜çº§äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656690378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1052859,"avatar":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","nickname":"Demon.Lee","note":"","ucode":"7F0E5493A8E345","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":344372,"discussion_content":"æˆ‘é”™äº†ï¼Œä¸‹æ¬¡ä¸€å®šçœ‹è‹±æ–‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611452846,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":274210,"user_name":"Geek_3b1096","can_delete":false,"product_type":"c1","uid":1549364,"ip_address":"","ucode":"A6BD92B79B3632","user_header":"","comment_is_top":false,"comment_ctime":1610910893,"is_pvip":false,"replies":[{"id":"99578","content":"å°±æ˜¯è¦æ‰“ç ´è¿™ç§è®¤çŸ¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1610965439,"ip_address":"","comment_id":274210,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27380714669","product_id":100068401,"comment_content":"ä¸€ç›´ä»¥æ¥è®¤ä¸ºif-elseæˆå¯¹å‡ºç°","like_count":7,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513943,"discussion_content":"å°±æ˜¯è¦æ‰“ç ´è¿™ç§è®¤çŸ¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610965439,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273428,"user_name":"Hobo","can_delete":false,"product_type":"c1","uid":1041960,"ip_address":"","ucode":"BE991F04E66ECD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e6/28/1d3aace3.jpg","comment_is_top":false,"comment_ctime":1610594092,"is_pvip":false,"replies":[{"id":"99106","content":"è‚‰çœ¼å¯è§çš„è¿›æ­¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1610628298,"ip_address":"","comment_id":273428,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27380397868","product_id":100068401,"comment_content":"çœŸçš„æ£’ï¼Œæˆ‘ç°åœ¨å†™ä»£ç ä¹Ÿæ˜¯å°½é‡åªç”¨ifé¿å…elseï¼Œå¯è¯»æ€§æ¯”åŸæ¥ifelseå¥½å¤ªå¤š","like_count":7,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513604,"discussion_content":"è‚‰çœ¼å¯è§çš„è¿›æ­¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610628298,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273376,"user_name":"é˜¿å¸ƒé»‘çš®è¯º","can_delete":false,"product_type":"c1","uid":1007156,"ip_address":"","ucode":"D9533156D5EC29","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5e/34/2c34e55a.jpg","comment_is_top":false,"comment_ctime":1610563340,"is_pvip":false,"replies":[{"id":"99142","content":"è¿™æ˜¯ä¸€ä¸ªå¥½é—®é¢˜ã€‚<br><br>æˆ‘ä¸å»ºè®®é’ˆå¯¹ä¸åŒçš„ç”¨æˆ·çº§åˆ«æä¾›ä¸åŒçš„ APIï¼Œå› ä¸ºè¿™æ˜¯å’Œå…·ä½“ä¸šåŠ¡æ¼”è¿›å¼ºç›¸å…³çš„ï¼Œæ¯æ·»åŠ ä¸€ä¸ªç”¨æˆ·çº§åˆ«ï¼ŒAPI éƒ½è¦ä¿®æ”¹ï¼Œç¨³å®šæ€§éå¸¸å·®ã€‚<br><br>è¿™é‡Œä¸€å®šè¦æœ‰é˜²è…å±‚çš„æ¦‚å¿µåœ¨å¿ƒé‡Œï¼ŒAPI æ¥å£æ˜¯å¤–éƒ¨çš„ï¼Œå®ƒé‡Œé¢ä¼ è¾“çš„å†…å®¹ä¸ä¸€å®šå’Œä¸šåŠ¡æ˜¯ä¸€ä¸€æ˜ å°„çš„ã€‚æ‰€ä»¥ï¼ŒæŠŠä¼ è¾“ä¸­çš„ç”¨æˆ·çº§åˆ«é€šè¿‡ä¸€ä¸ªå·¥å‚ï¼ˆfactoryï¼‰è½¬æ¢æˆä¸€ä¸ªä¸šåŠ¡å¯¹è±¡æ˜¯éå¸¸æ­£å¸¸çš„ã€‚åœ¨ç¬¬ 11 è®²ä¼šæœ‰è®²åˆ°ä¸€ä¸ªç±»ä¼¼çš„é—®é¢˜ã€‚<br><br>è¿™é‡Œçš„é‡ç‚¹å°±æ˜¯æä¾› APIï¼Œå°±è¦æ€è€ƒ API åº”è¯¥æ€ä¹ˆè®¾è®¡ï¼Œç„¶åæ˜¯ï¼ŒAPI å’Œä¸šåŠ¡å¯¹è±¡ä¹‹é—´å¦‚ä½•æ˜ å°„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1610666712,"ip_address":"","comment_id":273376,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27380367116","product_id":100068401,"comment_content":"éƒ‘è€å¸ˆï¼Œ<br><br>ä»¥UserLevelä¸ºä¾‹ï¼Œå‡è®¾æˆ‘éœ€è¦æä¾›ä¸€ä¸ªapi, ç”¨æˆ·ç«¯æä¾›request bodyï¼Œ æˆ‘ï¼ˆserviceç«¯ï¼‰éœ€è¦æŠŠrequest body serializeæˆä¸€ä¸ªUserLevel ï¼ˆbodyä¼šé¢å¤–æä¾›ä¸€ä¸ªusertypeæ˜¯enum(regular, gold, silver)ï¼Œä¹‹åéœ€è¦getBookPrice()ã€‚<br><br>é—®é¢˜æ˜¯ï¼Œserializeä¹‹åæ²¡åŠæ³•æŠŠUserLevel castæˆå…·ä½“çš„RegularUserLevel&#47;GoldUserlevelï¼Œ è‡³å°‘c#ä¸å…è®¸æŠŠçˆ¶ç±»castæˆå­ç±»ã€‚æˆ‘ç°åœ¨çš„è§£å†³æ–¹æ¡ˆæ˜¯å†™äº†ä¸€ä¸ªparser, æ ¹æ®usertypeå†™äº†ä¸€ä¸ªswitchè¯­å¥ï¼Œæ¯ä¸ªå­ç±»çš„æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªçˆ¶ç±» GoldUserLevel(UserLevel ul)ï¼Œç„¶åæŠŠæˆå‘˜å®Œå…¨copyã€‚æ„Ÿè§‰ä¸¤ä¸ªåå‘³é“æ­£åœ¨äº§ç”Ÿ, æƒ³è¯·æ•™ä¸€ä¸‹ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹æ‚¨ä¼šæ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ<br><br>1. æ˜¯å¦ä¸åŒçš„ userlevel éœ€è¦æä¾›ä¸åŒçš„api?<br>2. å‡è®¾éœ€æ±‚å°±æ˜¯æä¾›ä¸€ä¸ªapiè§£å†³æ‰€æœ‰çš„userlevelï¼Œè¿™ç§æƒ…å†µä¸‹çš„best practiceæ˜¯æ€æ ·å‘¢ï¼Ÿ  <br><br>è°¢è°¢ï¼","like_count":6,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513585,"discussion_content":"è¿™æ˜¯ä¸€ä¸ªå¥½é—®é¢˜ã€‚\n\næˆ‘ä¸å»ºè®®é’ˆå¯¹ä¸åŒçš„ç”¨æˆ·çº§åˆ«æä¾›ä¸åŒçš„ APIï¼Œå› ä¸ºè¿™æ˜¯å’Œå…·ä½“ä¸šåŠ¡æ¼”è¿›å¼ºç›¸å…³çš„ï¼Œæ¯æ·»åŠ ä¸€ä¸ªç”¨æˆ·çº§åˆ«ï¼ŒAPI éƒ½è¦ä¿®æ”¹ï¼Œç¨³å®šæ€§éå¸¸å·®ã€‚\n\nè¿™é‡Œä¸€å®šè¦æœ‰é˜²è…å±‚çš„æ¦‚å¿µåœ¨å¿ƒé‡Œï¼ŒAPI æ¥å£æ˜¯å¤–éƒ¨çš„ï¼Œå®ƒé‡Œé¢ä¼ è¾“çš„å†…å®¹ä¸ä¸€å®šå’Œä¸šåŠ¡æ˜¯ä¸€ä¸€æ˜ å°„çš„ã€‚æ‰€ä»¥ï¼ŒæŠŠä¼ è¾“ä¸­çš„ç”¨æˆ·çº§åˆ«é€šè¿‡ä¸€ä¸ªå·¥å‚ï¼ˆfactoryï¼‰è½¬æ¢æˆä¸€ä¸ªä¸šåŠ¡å¯¹è±¡æ˜¯éå¸¸æ­£å¸¸çš„ã€‚åœ¨ç¬¬ 11 è®²ä¼šæœ‰è®²åˆ°ä¸€ä¸ªç±»ä¼¼çš„é—®é¢˜ã€‚\n\nè¿™é‡Œçš„é‡ç‚¹å°±æ˜¯æä¾› APIï¼Œå°±è¦æ€è€ƒ API åº”è¯¥æ€ä¹ˆè®¾è®¡ï¼Œç„¶åæ˜¯ï¼ŒAPI å’Œä¸šåŠ¡å¯¹è±¡ä¹‹é—´å¦‚ä½•æ˜ å°„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610666712,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273371,"user_name":"ä¸šä½™çˆ±å¥½è€…","can_delete":false,"product_type":"c1","uid":1482915,"ip_address":"","ucode":"A890935A982988","user_header":"https://static001.geekbang.org/account/avatar/00/16/a0/a3/8da99bb0.jpg","comment_is_top":false,"comment_ctime":1610555245,"is_pvip":false,"replies":[{"id":"99099","content":"å¥½æ ·çš„ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1610621488,"ip_address":"","comment_id":273371,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27380359021","product_id":100068401,"comment_content":"å·¥ä½œä¸¤å¹´ï¼Œä»æœªç”¨è¿‡switch","like_count":6,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513581,"discussion_content":"å¥½æ ·çš„ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610621488,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273416,"user_name":"adang","can_delete":false,"product_type":"c1","uid":1143712,"ip_address":"","ucode":"0F2ECF8B92D46B","user_header":"https://static001.geekbang.org/account/avatar/00/11/73/a0/7dcc9212.jpg","comment_is_top":false,"comment_ctime":1610591729,"is_pvip":false,"replies":[{"id":"99108","content":"è¿›ä¸€æ­¥æœ‰ä¸€æ­¥çš„æ¬¢å–œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1610628372,"ip_address":"","comment_id":273416,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23085428209","product_id":100068401,"comment_content":"å¯¹äºif...elseè¿™ç§æƒ…å†µï¼Œå°è±¡å¾ˆæ·±åˆ»ï¼Œåˆšåˆšå…¥è¡Œå†™ä»£ç çš„æ—¶å€™ï¼ŒTeamLeaderå°±è®²ï¼Œä¸è¦å†™å¾ˆé•¿çš„if.....elseï¼Œè¿™æ ·çš„ä»£ç ï¼Œçœ‹äº†åŠå¤©åˆ°æœ€åå‘ç°è¿˜æœ‰ä¸€ä¸ªelseæƒ…å†µè¦å¤„ç†ï¼Œä»£ç è¯»è¿›æ¥å¤ªè´¹åŠ²ï¼Œè¦æŠŠå¼‚å¸¸æƒ…å†µå…ˆå¤„ç†æ‰å…ˆè¿”å›ï¼Œè¿™æ ·ä»£ç çœ‹èµ·æ¥æ¯”è¾ƒæ¸…çˆ½ã€‚åé¢å†™ä»£ç çš„æ—¶å€™ï¼Œä¹Ÿä¼šæŒ‰ç…§è¿™ç§æ€è·¯æ¥å¤„ç†ã€‚åœ¨å…¶ä»–å›¢é˜Ÿçœ‹åˆ°çš„ä»£ç ï¼Œç»å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯if...else if..else è¿™æ ·å¹³é“ºç€å†™ï¼Œå¸¸å¸¸æ€€ç–‘è‡ªå·±çš„å†™æ³•æ˜¯ä¸æ˜¯é”™çš„:(ã€‚å¯¹äºé‡å¤switchè¿™ç§æƒ…å†µï¼ŒçœŸä¸çŸ¥é“æ˜¯æœ‰è¿™æ ·çš„ä¼˜åŒ–æ–¹æ¡ˆçš„ï¼Œå¥½å¥½æ”¶è—ã€‚","like_count":6,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513599,"discussion_content":"è¿›ä¸€æ­¥æœ‰ä¸€æ­¥çš„æ¬¢å–œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610628372,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273886,"user_name":"qinsi","can_delete":false,"product_type":"c1","uid":1667175,"ip_address":"","ucode":"090D9C4068FF12","user_header":"https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg","comment_is_top":false,"comment_ctime":1610705364,"is_pvip":true,"replies":[{"id":"99182","content":"åŒæ ·çš„äº‹ï¼Œå¯ä»¥æœ‰ä¸åŒçš„åšæ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1610723219,"ip_address":"","comment_id":273886,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18790574548","product_id":100068401,"comment_content":"smalltalké‡Œæ²¡æœ‰æ§åˆ¶ç»“æ„ï¼›lispé‡Œæ²¡æœ‰å¾ªç¯","like_count":4,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513844,"discussion_content":"åŒæ ·çš„äº‹ï¼Œå¯ä»¥æœ‰ä¸åŒçš„åšæ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610723219,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273418,"user_name":"åˆ˜å¤§æ˜","can_delete":false,"product_type":"c1","uid":1035081,"ip_address":"","ucode":"83C063FBD9BF2B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cb/49/0b9ffc8e.jpg","comment_is_top":false,"comment_ctime":1610592179,"is_pvip":false,"replies":[{"id":"99107","content":"å¯ä»¥å‘åˆ°éƒ¨è½é‡Œçš„ä»£ç åæ§½å¤§ä¼šï¼Œè®©å¤§å®¶å¼€å¼€çœ¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1610628338,"ip_address":"","comment_id":273418,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14495494067","product_id":100068401,"comment_content":"ä»£ç åå‘³é“ä¹‹æ»¥ç”¨æ§åˆ¶è¯­å¥,è¿™ä¸ªåœ¨é¡¹ç›®ä¸­ä¹Ÿéå¸¸å¸¸è§ã€‚å¯æƒœè¯„è®ºä¸èƒ½å‘å›¾ç‰‡ã€‚ä¸ç„¶å°±å‘ä¸Šæ¥çœ‹çœ‹ã€‚<br>è¿™æ®µæ—¶é—´ä¸€ç›´åœ¨çº ç»“è¦ä¸è¦ç¦»èŒï¼Œè¿œç¦»è¿™äº›çƒ‚ä»£ç ã€‚ä½†æ˜¯æ€ä¹ˆå­¦ä¹ é‡æ„çƒ‚ä»£ç ä¸ä¹Ÿæ˜¯ä¸€ç§æ›´å¥½çš„æŒ‘æˆ˜å—ï¼Ÿ<br>æˆ‘æƒ³å¦‚æœèƒ½æŠŠå…¬å¸çš„çƒ‚ä»£ç é‡æ„è®©ä»£ç æ›´å¥½çœ‹ï¼Œé‚£ä¹Ÿæ˜¯ä¸€ç§èƒ½åŠ›çš„æå‡ã€‚","like_count":3,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513600,"discussion_content":"å¯ä»¥å‘åˆ°éƒ¨è½é‡Œçš„ä»£ç åæ§½å¤§ä¼šï¼Œè®©å¤§å®¶å¼€å¼€çœ¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610628338,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":340781,"user_name":"Nutopia.","can_delete":false,"product_type":"c1","uid":2326356,"ip_address":"","ucode":"166B2698E15F40","user_header":"https://static001.geekbang.org/account/avatar/00/23/7f/54/58566e96.jpg","comment_is_top":false,"comment_ctime":1649139205,"is_pvip":false,"replies":[{"id":"124814","content":"ä½ è¿™ä¸ªç†è§£å¾ˆåˆ°ä½","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1258861","ctime":1649729903,"ip_address":"","comment_id":340781,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10239073797","product_id":100068401,"comment_content":"è¿™èŠ‚è¯¾æœ€åçš„switchæ„Ÿè§‰å¾ˆå¤šäººæ²¡ç†è§£åˆ°ä½ï¼Œæ–‡ç« çš„æ„æ€åº”è¯¥æ˜¯â€œä¸‘â€åœ¨é‡å¤ï¼Œå¹¶ä¸æ˜¯â€œä¸‘â€åœ¨switchã€‚","like_count":3,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561839,"discussion_content":"ä½ è¿™ä¸ªç†è§£å¾ˆåˆ°ä½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649729903,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":328339,"user_name":"åˆ˜ç¾½ç¦…","can_delete":false,"product_type":"c1","uid":1996866,"ip_address":"","ucode":"E1241C44D00477","user_header":"https://static001.geekbang.org/account/avatar/00/1e/78/42/03295e28.jpg","comment_is_top":false,"comment_ctime":1640676941,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10230611533","product_id":100068401,"comment_content":"åªæœ‰ä¸€å±‚çš„ if  else ,ä¸ä¼˜åŒ–ä¹Ÿè¡Œçš„.     <br>åªè¦å›¢é˜Ÿæˆå‘˜ä¸€çœ¼éƒ½èƒ½çœ‹æ‡‚å°±æ²¡é—®é¢˜,  æœ‰é—®é¢˜çš„æ˜¯åµŒå¥—å¤ªæ·±çš„if else,<br>æˆ‘è®¤ä¸º,å®Œå…¨ä¸å†™else ä¹Ÿæ˜¯ä¸€ç§è¿‡çŠ¹ä¸åŠçš„æƒ³æ³•.","like_count":3,"discussions":[{"author":{"id":1193874,"avatar":"https://static001.geekbang.org/account/avatar/00/12/37/92/961ba560.jpg","nickname":"æˆäººä»¥ğŸŸï¼Œä¸å¦‚æˆäººä»¥æ¸”","note":"","ucode":"BD53829E924B66","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567451,"discussion_content":"é‡æ„è¿™äº›ä»£ç â€œåå‘³é“â€ï¼Œå…¶æœ¬è´¨å°±æ˜¯è¿½æ±‚ç®€å•æ€§ã€‚è¿½æ±‚ç®€å•æ€§çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œä½ è¯´çš„ä¹Ÿæ˜¯ä¸€ç§æ–¹æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650928432,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":278012,"user_name":"ç¾ç¾","can_delete":false,"product_type":"c1","uid":1148422,"ip_address":"","ucode":"44CC95C45AF345","user_header":"https://static001.geekbang.org/account/avatar/00/11/86/06/72b01bb7.jpg","comment_is_top":false,"comment_ctime":1612701664,"is_pvip":false,"replies":[{"id":"101050","content":"æ•°å­—æ˜¯ä¸€ä¸ªç³Ÿç³•çš„é€‰é¡¹ï¼Œç®€å•çš„ç”¨ Enumï¼Œå¤æ‚çš„ç”¨ç±»ã€‚ä½ çœŸæ­£éœ€è¦çš„æ˜¯ä¸€ä¸ªå·¥å‚ï¼Œåªåœ¨åˆ›å»ºçš„æ—¶å€™éœ€è¦æ¡ä»¶åˆ¤æ–­ã€‚æœ‰ switch ä¸æ˜¯é—®é¢˜ï¼Œæœ‰é‡å¤çš„æ˜¯é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1612859377,"ip_address":"","comment_id":278012,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10202636256","product_id":100068401,"comment_content":"è€å¸ˆï¼Œswitch é‚£ä¸ªä¾‹å­ï¼ŒæŠ½å‡ºäº†å¥½å‡ ä¸ªxxxUserLeverlï¼Œä½†é€šå¸¸æƒ…å†µï¼ŒuserLevelè¿˜æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œéœ€è¦æŠŠæ•°å­—è½¬æˆclassï¼Œè¿™é‡Œæ˜¯ä¸æ˜¯åˆå‡ºç°äº†switch æˆ–è€… if else çš„æƒ…å†µå‘¢ï¼Œæ€ä¹ˆè§£å†³ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515248,"discussion_content":"æ•°å­—æ˜¯ä¸€ä¸ªç³Ÿç³•çš„é€‰é¡¹ï¼Œç®€å•çš„ç”¨ Enumï¼Œå¤æ‚çš„ç”¨ç±»ã€‚ä½ çœŸæ­£éœ€è¦çš„æ˜¯ä¸€ä¸ªå·¥å‚ï¼Œåªåœ¨åˆ›å»ºçš„æ—¶å€™éœ€è¦æ¡ä»¶åˆ¤æ–­ã€‚æœ‰ switch ä¸æ˜¯é—®é¢˜ï¼Œæœ‰é‡å¤çš„æ˜¯é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612859377,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":277056,"user_name":"AFlymamba","can_delete":false,"product_type":"c1","uid":1359224,"ip_address":"","ucode":"FAEAF3BD3E5146","user_header":"https://static001.geekbang.org/account/avatar/00/14/bd/78/be976ab3.jpg","comment_is_top":false,"comment_ctime":1612248098,"is_pvip":true,"replies":[{"id":"100537","content":"å¤šè°¢åˆ†äº«ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1612255828,"ip_address":"","comment_id":277056,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10202182690","product_id":100068401,"comment_content":"ç°è±¡ï¼šæ£€æŸ¥åŸæœ‰è‡ªå·±ä»£ç ï¼šå‘ç°æ›¾ç»æœ‰è¿‡è¿™æ®µelseçš„åå‘³é“<br>JSONObject ticketInfo = this.getTicket(corpid, agentid);<br>if (null == agentid) {<br>    ticketInfo = this.getJsApiTicket(corpid);<br>} else {<br>    ticketInfo = this.getAgentJsApiTicket(corpid, agentid);<br>}<br>æ”¹è¿›ï¼šç”¨äº†ä¸¤ç§æ–¹å¼å»è°ƒæ•´ï¼š<br>æ–¹å¼ä¸€ï¼šæå–æ–¹æ³•ï¼Œå†…éƒ¨ç”¨ä¸‰ç›®è¡¨è¾¾å¼<br>private JSONObject getTicket(final String corpid, final Long agentid) {<br>  return null == agentid ? this.getJsApiTicket(corpid) : this.getAgentJsApiTicket(corpid, agentid);<br>}<br>æ–¹å¼äºŒï¼šé‡‡ç”¨returnï¼Œå«è¯­å¥å»æå‰è¿”å›<br>private JSONObject getTicketMethodTwo(final String corpid, final Long agentid) {<br>      if (null == agentid) {<br>            return this.getJsApiTicket(corpid);<br>      }<br>      return this.getAgentJsApiTicket(corpid, agentid);<br>}<br><br>æœ€ç»ˆï¼Œå›åˆ°è°ƒç”¨ç‚¹ï¼š<br>JSONObject ticketInfo = this.getTicket(corpid, agentid);<br>æ€»ç»“ï¼šå¤šæ€è€ƒï¼Œä¸åŒè§’åº¦ç”¨ä¸åŒæ ‡å‡†å»è‡ªé—®ï¼Œå°æ­¥é‡æ„å’Œä¼˜åŒ–ï¼Œå°æ­¥æäº¤ã€‚","like_count":3,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514917,"discussion_content":"å¤šè°¢åˆ†äº«ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612255828,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273519,"user_name":"Tio Kang","can_delete":false,"product_type":"c1","uid":1509271,"ip_address":"","ucode":"841190098F8F90","user_header":"https://static001.geekbang.org/account/avatar/00/17/07/97/980d36e2.jpg","comment_is_top":false,"comment_ctime":1610620316,"is_pvip":false,"replies":[{"id":"99141","content":"ä¸»è¦æ˜¯ä¸ºäº†å‡å°‘åµŒå¥—ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1610666144,"ip_address":"","comment_id":273519,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10200554908","product_id":100068401,"comment_content":"æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œelseè¯­å¥ä»¥CCè¡¡é‡æ˜¯ä¸å½±å“ä»£ç å¤æ‚åº¦çš„ã€‚é‚£ä¹ˆæ˜¯å¦å®é™…ä¸Šä¸å†™elseçš„åŸå› å¦‚ä¸‹ï¼š1.å‡å°‘ä»£ç è¡Œæ•°ï¼›2. é¿å…elseå¸¦æ¥çš„æ½œåœ¨çš„åµŒå¥—å¯èƒ½","like_count":2,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513622,"discussion_content":"ä¸»è¦æ˜¯ä¸ºäº†å‡å°‘åµŒå¥—ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610666144,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":328609,"user_name":"Peter","can_delete":false,"product_type":"c1","uid":2425556,"ip_address":"","ucode":"5E57A0FE948966","user_header":"https://static001.geekbang.org/account/avatar/00/25/02/d4/1e0bb504.jpg","comment_is_top":false,"comment_ctime":1640788850,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5935756146","product_id":100068401,"comment_content":"éƒ‘å¤§ï¼š<br>public double getBookPrice(final User user, final Book book) {<br>  UserLevel level = user.getUserLevel()<br>  return level.getBookPrice(book);<br>}<br><br><br>public double getEpubPrice(final User user, final Epub epub) {<br>  UserLevel level = user.getUserLevel()<br>  return level.getEpubPrice(epub);<br>}<br><br>æƒ³é—®ä¸‹ä½ è¿™ä¹ˆé‡æ„å®Œä¹‹åï¼Œæ˜¯ä¸æ˜¯UserLevel level = user.getUserLevel() è¿™ä¸ªå‡½æ•°é‡Œé¢ä¼šæœ‰switch caseçš„å­˜åœ¨å‘¢ï¼Ÿæ˜¯ä¸æ˜¯æˆ‘å¯ä»¥ç†è§£è¿™ç§é‡æ„åªæ˜¯æ¶ˆé™¤äº†switch caseçš„é‡å¤ä»£ç  å¹¶ä¸èƒ½æ¶ˆé™¤switch caseè¿™ç§å‘¢ï¼Ÿ<br><br>","like_count":1,"discussions":[{"author":{"id":1193874,"avatar":"https://static001.geekbang.org/account/avatar/00/12/37/92/961ba560.jpg","nickname":"æˆäººä»¥ğŸŸï¼Œä¸å¦‚æˆäººä»¥æ¸”","note":"","ucode":"BD53829E924B66","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567452,"discussion_content":"æ˜¯çš„ã€‚åå‘³é“ ä¸åœ¨äº switch ï¼Œè€Œåœ¨äºé‡å¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650928698,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312390,"user_name":"é˜¿å§†æ–¯å£®","can_delete":false,"product_type":"c1","uid":1265599,"ip_address":"","ucode":"87D5923D639CD6","user_header":"https://static001.geekbang.org/account/avatar/00/13/4f/bf/6584bdeb.jpg","comment_is_top":false,"comment_ctime":1631783004,"is_pvip":false,"replies":[{"id":"113444","content":"ä½ å¼€å§‹é€æ¸çš„æ‰¾åˆ°æ„Ÿè§‰äº†","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1632313034,"ip_address":"","comment_id":312390,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5926750300","product_id":100068401,"comment_content":"ä»Šå¤©å†™äº†ä¸€æ®µä»£ç ã€‚å……æ»¡äº†åå‘³é“ã€‚if è¿‡å¤šï¼Œé‡å¤è¿‡å¤šã€‚ä½†ä¸çŸ¥é“å¦‚ä½•ä¸‹æ‰‹ã€‚è¯­è¨€å±‚é¢ä¸å¤ªç†Ÿæ‚‰ã€‚çœ‹ç€è¿™æ®µåå‘³é“çš„ä»£ç ï¼Œå¿ƒä¸­æœ‰äº›æ‡Šæ¼ã€‚æ€ä¹ˆæ”¹å‘¢ï¼Ÿ<br>æƒ³èµ·æ ¡é•¿è¯´çš„ï¼Œé‡æ„å°±æ˜¯é€æ­¥ä¸€ç‚¹ç‚¹å»ä¿®æ”¹åå‘³é“ã€‚çªç„¶çµæ„Ÿæ¥äº†ï¼Œæ—¢ç„¶æœ‰é‡å¤ï¼Œé‚£å°±ä¸€ç‚¹ç‚¹å»æ¶ˆé™¤é‡å¤ã€‚ä¸ç”¨ä¸€æ¬¡åˆ°ä½ã€‚å°æ­¥å¿«èµ°ã€‚<br>äºæ˜¯å†™èµ·æœ€ç®€å•çš„å•å…ƒæµ‹è¯•ï¼Œä»æµ‹è¯•å…¥æ‰‹ï¼Œä¸€ç‚¹ç‚¹æ¶ˆé™¤åå‘³é“ã€‚æœ¬æ¥ä¸€å †çš„åå‘³é“ä»£ç ã€‚å±…ç„¶çœŸçš„è¢«æˆ‘æ”¹æˆäº†æ²¡æœ‰é‡å¤ï¼Œè¿˜å…·å¤‡äº†æ‰©å±•æ€§çš„ç±»ã€‚<br>æœŸå¾…æ ¡é•¿çš„è®­ç»ƒè¥ï¼Œæˆ–è€…æ–°ä¸“æ ã€‚","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526957,"discussion_content":"ä½ å¼€å§‹é€æ¸çš„æ‰¾åˆ°æ„Ÿè§‰äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632313034,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":291871,"user_name":"çš®ç‰¹å°”","can_delete":false,"product_type":"c1","uid":1017161,"ip_address":"","ucode":"313862C91DD325","user_header":"https://static001.geekbang.org/account/avatar/00/0f/85/49/585c69c4.jpg","comment_is_top":false,"comment_ctime":1620565044,"is_pvip":false,"replies":[{"id":"105806","content":"æˆ‘åœ¨ã€Šè½¯ä»¶è®¾è®¡ä¹‹ç¾ã€‹é‡Œè®²è¿‡ï¼Œè¯­è¨€è®¾è®¡å’Œç¨‹åºåº“è®¾è®¡æ˜¯ä¸€å›äº‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1620778598,"ip_address":"","comment_id":291871,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5915532340","product_id":100068401,"comment_content":"ç¼–ç¨‹è¯­è¨€æ˜¯è¶‹åŒçš„ã€‚åœ¨Swifté‡Œï¼Œç›´æ¥å°±æŠŠguardï¼ˆå®ˆå«ï¼‰åšä¸ºå…³é”®è¯äº†","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519588,"discussion_content":"æˆ‘åœ¨ã€Šè½¯ä»¶è®¾è®¡ä¹‹ç¾ã€‹é‡Œè®²è¿‡ï¼Œè¯­è¨€è®¾è®¡å’Œç¨‹åºåº“è®¾è®¡æ˜¯ä¸€å›äº‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620778598,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":275656,"user_name":"ç‹å•¸","can_delete":false,"product_type":"c1","uid":1341532,"ip_address":"","ucode":"6B895624D3260D","user_header":"https://static001.geekbang.org/account/avatar/00/14/78/5c/347b3c66.jpg","comment_is_top":false,"comment_ctime":1611635122,"is_pvip":false,"replies":[{"id":"100046","content":"è¦çš„å°±æ˜¯â€œä¸‡ä¸‡æ²¡æƒ³åˆ°â€","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1611645545,"ip_address":"","comment_id":275656,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5906602418","product_id":100068401,"comment_content":"å¾ªç¯ä¹Ÿæ˜¯åå‘³é“ï¼Œæ˜¯æˆ‘ä¸‡ä¸‡æ²¡æƒ³åˆ°çš„","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514427,"discussion_content":"è¦çš„å°±æ˜¯â€œä¸‡ä¸‡æ²¡æƒ³åˆ°â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611645545,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273953,"user_name":"return","can_delete":false,"product_type":"c1","uid":1135528,"ip_address":"","ucode":"42B8A3380DF04B","user_header":"https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg","comment_is_top":false,"comment_ctime":1610765628,"is_pvip":false,"replies":[{"id":"99218","content":"switchæœ¬èº«ä¸æ˜¯é—®é¢˜ï¼Œé—®é¢˜æ˜¯é‡å¤ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1610777582,"ip_address":"","comment_id":273953,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5905732924","product_id":100068401,"comment_content":"è€å¸ˆè®²çš„å¾ˆå¥½ï¼Œæ„Ÿè°¢è€å¸ˆï¼Œ<br>å†è¯·æ•™ä¸€ä¸‹è€å¸ˆï¼Œæ–‡ä¸­çš„è¿™è¡Œä»£ç <br>UserLevel level = user.getUserLevel()<br>getUserLevel  è¿™ä¸ªæ–¹æ³• å¦‚ä½•å†™æ‰æ˜¯å¥½çš„ï¼Œ å½’æ ¹åˆ°åº•æ˜¯ä¸æ˜¯è¿˜å¾—åˆ¤æ–­ã€‚<br>","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513872,"discussion_content":"switchæœ¬èº«ä¸æ˜¯é—®é¢˜ï¼Œé—®é¢˜æ˜¯é‡å¤ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1610777582,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1135528,"avatar":"https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg","nickname":"return","note":"","ucode":"42B8A3380DF04B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343534,"discussion_content":"åˆçœ‹äº†ä¸€éæ–‡ç« ï¼Œ æ„Ÿè§‰getåˆ°è€å¸ˆè¯´çš„ç‚¹äº†ï¼Œ å¾ˆæœ‰é“ç†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611068868,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273904,"user_name":"Abcd","can_delete":false,"product_type":"c1","uid":1796908,"ip_address":"","ucode":"274C7487FDDC21","user_header":"https://static001.geekbang.org/account/avatar/00/1b/6b/2c/b27eefc5.jpg","comment_is_top":false,"comment_ctime":1610715407,"is_pvip":false,"replies":[{"id":"99181","content":"ä¼˜åŒ–çš„åœºæ™¯è¦å•ç‹¬ç®—ï¼Œé‚£éƒ½æ˜¯éå¸¸è§„å†™æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1610723158,"ip_address":"","comment_id":273904,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5905682703","product_id":100068401,"comment_content":"switchä¹Ÿä¸æ˜¯æ¯’è¯ï¼Œæ¯”å¦‚ç”¨åœ¨&quot;å¾ªç¯å±•å¼€&quot;ï¼Œ&quot;è¾¾å¤«è®¾å¤‡&quot;ä¸Šè¿˜æ˜¯å¾ˆä¸é”™çš„","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513853,"discussion_content":"ä¼˜åŒ–çš„åœºæ™¯è¦å•ç‹¬ç®—ï¼Œé‚£éƒ½æ˜¯éå¸¸è§„å†™æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610723158,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1667175,"avatar":"https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg","nickname":"qinsi","note":"","ucode":"090D9C4068FF12","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342649,"discussion_content":"&#34;How to Get Fired Using Switch Statements &amp; Statement Expressions&#34; https://blog.robertelder.org/switch-statements-statement-expressions/","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610765435,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273405,"user_name":"çˆ±åƒå½©è™¹ç³–çš„çŒ«~","can_delete":false,"product_type":"c1","uid":1261108,"ip_address":"","ucode":"9EC7A8FD4B7DB1","user_header":"https://static001.geekbang.org/account/avatar/00/13/3e/34/dd0a3c61.jpg","comment_is_top":false,"comment_ctime":1610589520,"is_pvip":false,"replies":[{"id":"99098","content":"å—¯ï¼Œå¯ä»¥è¿™ä¹ˆç†è§£ï¼Œä¹Ÿè®²ä¸€äº›ã€Šé‡æ„ã€‹æ²¡è®²çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1610621465,"ip_address":"","comment_id":273405,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5905556816","product_id":100068401,"comment_content":"çœ‹åˆ°è¿™ç¯‡ï¼Œæˆ‘çªç„¶é†’æ‚Ÿï¼Œéƒ‘æ˜¯æƒ³è¦å°†ã€Šé‡æ„ã€‹ä¸­çš„å†…å®¹æ‰ç¢äº†ï¼Œå–åˆé€‚çš„è®²è§£å‡ºæ¥å—ï¼ŸğŸ˜Š","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513596,"discussion_content":"å—¯ï¼Œå¯ä»¥è¿™ä¹ˆç†è§£ï¼Œä¹Ÿè®²ä¸€äº›ã€Šé‡æ„ã€‹æ²¡è®²çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610621465,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350245,"user_name":"æ¯è«åœ","can_delete":false,"product_type":"c1","uid":1759325,"ip_address":"","ucode":"4FA1D5CBBEF702","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d8/5d/07dfb3b5.jpg","comment_is_top":false,"comment_ctime":1656690701,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1656690701","product_id":100068401,"comment_content":"æˆ‘ä¸€ç›´ä»¥ä¸ºswitchè¯­å¥æ˜¯å¯¹if...else ifè¯­å¥çš„ä¼˜åŒ–ï¼Œä»¥è‡³äºä½†å‡¡é‡åˆ°éƒ½ä¼šè½¬ä½switchè¯­å¥ï¼Œé˜¿é‡Œå·´å·´çš„ç¼–ç¨‹è§„èŒƒé‡Œé¢ä¹Ÿæ˜¯è¿™ä¹ˆå†™çš„ï¼Œä¹Ÿæ²¡æ·±ç©¶ï¼Œç°åœ¨æ‰çŸ¥é“switchåªä¸è¿‡æ˜¯if...else ifçš„å˜å½¢ï¼Œæ²¡æœ¬è´¨åŒºåˆ«ã€‚è¿™ç‚¹ç°åœ¨getåˆ°äº†ã€‚","like_count":0},{"had_liked":false,"id":348801,"user_name":"nuan","can_delete":false,"product_type":"c1","uid":2905523,"ip_address":"é™•è¥¿","ucode":"55FF98EB85404D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIDqHQQByGiaXcAk94MdDn3ftupZLXyR6bAKibxOzMxy5h3uBwZ7QiaCiaIfbCMK0cIQfGNax8iawoiaQAg/132","comment_is_top":false,"comment_ctime":1655424555,"is_pvip":true,"replies":[{"id":"128416","content":"é—®é¢˜åœ¨äºä½ æ‰€è°“çš„æ€§èƒ½ä¸‹é™æ˜¯ä¸æ˜¯é‡ç‚¹ã€‚æå‰ä¼˜åŒ–æ˜¯ä¸‡æ¶ä¹‹æºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1258861","ctime":1659312142,"ip_address":"é™•è¥¿","comment_id":348801,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1655424555","product_id":100068401,"comment_content":"è¯·é—®è€å¸ˆï¼Œä¸ç”¨else if æˆ–switché€»è¾‘æ˜¯ç®€å•äº†ï¼Œä½†ä¹Ÿå¯èƒ½ä¼šé€ æˆæ€§èƒ½ä¸‹é™å§ï¼Œå› ä¸ºæ¯ä¸ªåˆ†æ”¯éƒ½è¦åˆ¤æ–­ä¸€æ¬¡äº†","like_count":0,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582194,"discussion_content":"é—®é¢˜åœ¨äºä½ æ‰€è°“çš„æ€§èƒ½ä¸‹é™æ˜¯ä¸æ˜¯é‡ç‚¹ã€‚æå‰ä¼˜åŒ–æ˜¯ä¸‡æ¶ä¹‹æºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659312142,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é™•è¥¿"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":347169,"user_name":"if...else...","can_delete":false,"product_type":"c1","uid":2550743,"ip_address":"","ucode":"D0565908C99695","user_header":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","comment_is_top":false,"comment_ctime":1653786342,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1653786342","product_id":100068401,"comment_content":"å¾ªç¯å’Œé€‰æ‹©è¯­å¥ï¼Œå¯èƒ½éƒ½æ˜¯åå‘³é“ã€‚--è®°ä¸‹æ¥","like_count":0},{"had_liked":false,"id":346767,"user_name":"Bumblebee","can_delete":false,"product_type":"c1","uid":2051293,"ip_address":"","ucode":"B879C8A511D08D","user_header":"https://static001.geekbang.org/account/avatar/00/1f/4c/dd/c6035349.jpg","comment_is_top":false,"comment_ctime":1653408132,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1653408132","product_id":100068401,"comment_content":"è¯´æ¥ä¹Ÿå¥‡æ€ªï¼Œå‰é¢å‡ ç« è¯´çš„åœ¨æœªçœ‹æœ¬ä¸“æ ä¹‹å‰ï¼Œè‡ªå·±åšçš„ä¸æ˜¯ç‰¹åˆ«å¥½ï¼Œåˆ°æ˜¯è¿™ä¸€ç« è‡ªå·±å¹³æ—¶çš„åšæ³•å’Œä¸“æ è¯´çš„ä¸€è‡´ğŸ˜‚ğŸ˜‚ğŸ˜‚","like_count":0},{"had_liked":false,"id":329876,"user_name":"æ²‰é»˜ç€èµ°ï¼Œç”¨å¿ƒæ„Ÿå—&#47;shx","can_delete":false,"product_type":"c1","uid":1764677,"ip_address":"","ucode":"F552AA7EF18975","user_header":"https://static001.geekbang.org/account/avatar/00/1a/ed/45/3cc0a4df.jpg","comment_is_top":false,"comment_ctime":1641618970,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1641618970","product_id":100068401,"comment_content":"switchè¯­å¥ç”¨å¤šæ€é‡æ„ï¼Œçœ‹äº†néè¡¨ç¤ºæ²¡çœ‹æ‡‚","like_count":0},{"had_liked":false,"id":328602,"user_name":"Peter","can_delete":false,"product_type":"c1","uid":2425556,"ip_address":"","ucode":"5E57A0FE948966","user_header":"https://static001.geekbang.org/account/avatar/00/25/02/d4/1e0bb504.jpg","comment_is_top":false,"comment_ctime":1640786512,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640786512","product_id":100068401,"comment_content":"æƒ³è¯·æ•™ä¸‹ å¦‚æœä½ ä¸Šé¢é‚£éƒ¨åˆ†é‡æ„ä»£ç å¤„ç†çš„è¯ï¼Œæˆ‘æŠŠforå¾ªç¯æ”¾åˆ°ç¬¬äºŒä¸ªå‡½æ•°é‡Œé¢çš„è¯ï¼Œä¼šæœ‰å•¥ä¸å¥½çš„åœ°æ–¹å—<br>public void distributeEpubs(final long bookId) {<br>  List&lt;Epub&gt; epubs = this.getEpubsByBookId(bookId);<br>  for (Epub epub : epubs) {<br>    this.distributeEpub(epub)ï¼›<br>  }<br>}<br><br><br>private void distributeEpub(final Epub epub) {<br>  if (epub.isValid()) {<br>    boolean registered = this.registerIsbn(epub);<br>    if (registered) {<br>      this.sendEpub(epub);<br>    }<br>  }<br>}","like_count":0},{"had_liked":false,"id":316373,"user_name":"ç‹¬å­¤ä¹å‰‘","can_delete":false,"product_type":"c1","uid":2230909,"ip_address":"","ucode":"6C1253E2B8C1D4","user_header":"https://static001.geekbang.org/account/avatar/00/22/0a/7d/ac715471.jpg","comment_is_top":false,"comment_ctime":1634290440,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634290440","product_id":100068401,"comment_content":"å¤šæ€+å°è£…","like_count":0},{"had_liked":false,"id":308345,"user_name":"asusual","can_delete":false,"product_type":"c1","uid":2735468,"ip_address":"","ucode":"AF9AA546D3794F","user_header":"https://static001.geekbang.org/account/avatar/00/29/bd/6c/a988846d.jpg","comment_is_top":false,"comment_ctime":1629547670,"is_pvip":false,"replies":[{"id":"111661","content":"1. å¯ä»¥è€ƒè™‘ Visitor æ¨¡å¼<br>2. ä¸è¦ä½¿ç”¨ applicationContext.getBeanï¼Œç ´åäº† Spring æœ¬æ¥çš„è®¾è®¡ã€‚åœ¨ã€Šç¨‹åºå‘˜çš„è®¾è®¡è¯¾ã€‹ä¸­ï¼Œæˆ‘ä¸“é—¨è®²äº†è¿™ç§åšæ³•çš„é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1629595660,"ip_address":"","comment_id":308345,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1629547670","product_id":100068401,"comment_content":"å¦‚æœæ˜¯ç¬¬ä¸‰æ–¹åº“è¿”å›çš„å¯¹è±¡,è¿™é‡Œæ˜¯Statement, javaç¨‹åºæ²¡æœ‰ç‰¹åˆ«çš„åŠæ³•æ¥å»æ‰ifã€‚<br>String processStatement(Statement statement) {<br>        if (statement instanceof Insert) {<br>            return applicationContext.getBean(InsertSQLStatementHandler.class).process(statement, tenantContext.getTenantId())<br>        }<br>        if (statement instanceof Select) {<br>            return applicationContext.getBean(SelectSQLStatementHandler.class).process(statement, tenantContext.getTenantId())<br>        }<br>    }","like_count":0,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525465,"discussion_content":"1. å¯ä»¥è€ƒè™‘ Visitor æ¨¡å¼\n2. ä¸è¦ä½¿ç”¨ applicationContext.getBeanï¼Œç ´åäº† Spring æœ¬æ¥çš„è®¾è®¡ã€‚åœ¨ã€Šç¨‹åºå‘˜çš„è®¾è®¡è¯¾ã€‹ä¸­ï¼Œæˆ‘ä¸“é—¨è®²äº†è¿™ç§åšæ³•çš„é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629595660,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284922,"user_name":"æ…ç‹¬æ˜å¼º","can_delete":false,"product_type":"c1","uid":1965699,"ip_address":"","ucode":"DC2F7F2C0C8F60","user_header":"https://static001.geekbang.org/account/avatar/00/1d/fe/83/df562574.jpg","comment_is_top":false,"comment_ctime":1616548248,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616548248","product_id":100068401,"comment_content":"switchçš„ä¼˜åŒ–å¯¹åº”åˆ°è®¾è®¡æ¨¡å¼ï¼Œåº”è¯¥æ˜¯å·¥å‚æ¨¡å¼å’Œç­–ç•¥æ¨¡å¼ã€‚ å·¥å‚é€šè¿‡ä¼šå‘˜çº§åˆ«å»åˆ›å»ºä»·æ ¼æ¥å£","like_count":0},{"had_liked":false,"id":283172,"user_name":"ææ–‡å½¬","can_delete":false,"product_type":"c1","uid":2251534,"ip_address":"","ucode":"4CD326DC443028","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLia4qBUs5bFs5tU3yVCcBapIcnVftM60nrJ73eu30YDMbDNvjhvnibct3pMYlj62G1c7nH8jSBaiaLw/132","comment_is_top":false,"comment_ctime":1615606817,"is_pvip":false,"replies":[{"id":"102859","content":"ä»¥å‰æœ‰ä¸€äº›æ‰€è°“çš„åšæ³•æ˜¯ä¸ºäº†æ€§èƒ½ä¼˜åŒ–ï¼Œä½†è¿™ä¸ªç†ç”±å®åœ¨ä¸æ˜¯ä¸€ä¸ªå¥½ç†ç”±ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1615815463,"ip_address":"","comment_id":283172,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1615606817","product_id":100068401,"comment_content":"ä¸çŸ¥é“ä»¥å‰åœ¨å“ªé‡Œçœ‹åˆ°è¿‡ä¸è¦æå‰returnï¼Œæ‰€ä»¥æ€»æ˜¯æœ‰å¿ƒæ™ºè´Ÿæ‹…ï¼Œçœ‹æ¥ä»¥åå¯ä»¥å…‰æ˜æ­£å¤§æ¶ˆé™¤elseäº†","like_count":0,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516952,"discussion_content":"ä»¥å‰æœ‰ä¸€äº›æ‰€è°“çš„åšæ³•æ˜¯ä¸ºäº†æ€§èƒ½ä¼˜åŒ–ï¼Œä½†è¿™ä¸ªç†ç”±å®åœ¨ä¸æ˜¯ä¸€ä¸ªå¥½ç†ç”±ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615815463,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2764859,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/30/3b/2237eaa0.jpg","nickname":"Î»","note":"","ucode":"2C75ED9F15BC04","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":397575,"discussion_content":"å› ä¸ºåœ¨Cè¯­è¨€é‡Œé¢å¾ˆå¤šæ—¶å€™éœ€è¦åœ¨è¿”å›å‰æ‰‹åŠ¨æ¸…ç†èµ„æºï¼Œæ‰€ä»¥ä¸ºäº†å®‰å…¨å°±éœ€è¦ç¦æ­¢åœ¨å‡½æ•°æ‰§è¡Œä¸­è¿”å›ï¼Œåªä¸è¿‡è¿™ä¸€å¥—åœ¨å…¶ä»–çš„ç°ä»£åŒ–çš„è¯­è¨€ä¸­å¹¶ä¸é€šç”¨ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1632643218,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":278402,"user_name":"good-goose","can_delete":false,"product_type":"c1","uid":2410740,"ip_address":"","ucode":"86BDE6A483DEC6","user_header":"https://static001.geekbang.org/account/avatar/00/24/c8/f4/c2bdf8e8.jpg","comment_is_top":false,"comment_ctime":1612927566,"is_pvip":false,"replies":[{"id":"102943","content":"å¥½ä¸œè¥¿æ˜¯å…±åŒçš„","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1615900955,"ip_address":"","comment_id":278402,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1612927566","product_id":100068401,"comment_content":"ä»goè¯­è¨€ä¸­å­¦åˆ°çš„å«è¯­å¥ï¼Œæ„Ÿè§‰å†™å‡ºæ¥ç‰¹åˆ«æ¸…æ™°","like_count":0,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515372,"discussion_content":"å¥½ä¸œè¥¿æ˜¯å…±åŒçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615900955,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}