{"id":699436,"title":"02ï½œç”¨LangChainå¿«é€Ÿæ„å»ºåŸºäºâ€œæ˜“é€Ÿé²œèŠ±â€æœ¬åœ°çŸ¥è¯†åº“çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é»„ä½³ï¼Œæ¬¢è¿æ¥åˆ°LangChainå®æˆ˜è¯¾ï¼</p><p>åœ¨æ·±å…¥è®²è§£LangChainçš„æ¯ä¸€ä¸ªå…·ä½“ç»„ä»¶ä¹‹å‰ï¼Œæˆ‘æƒ³å¸¦ç€ä½ ä»å¤´å®Œæˆä¸€ä¸ªå¾ˆå®ç”¨ã€å¾ˆæœ‰æ„ä¹‰çš„å®æˆ˜é¡¹ç›®ã€‚ç›®çš„å°±æ˜¯è®©ä½ ç›´è§‚æ„Ÿå—ä¸€ä¸‹LangChainä½œä¸ºä¸€ä¸ªåŸºäºå¤§è¯­è¨€æ¨¡å‹çš„åº”ç”¨å¼€å‘æ¡†æ¶ï¼ŒåŠŸèƒ½åˆ°åº•æœ‰å¤šä¹ˆå¼ºå¤§ã€‚å¥½çš„ï¼Œç°åœ¨å°±å¼€å§‹ï¼</p><h2>é¡¹ç›®åŠå®ç°æ¡†æ¶</h2><p>æˆ‘ä»¬å…ˆæ¥æ•´ä½“äº†è§£ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ã€‚</p><p><strong>é¡¹ç›®åç§°</strong>ï¼šâ€œæ˜“é€Ÿé²œèŠ±â€å†…éƒ¨å‘˜å·¥çŸ¥è¯†åº“é—®ç­”ç³»ç»Ÿã€‚</p><p><strong>é¡¹ç›®ä»‹ç»</strong>ï¼šâ€œæ˜“é€Ÿé²œèŠ±â€ä½œä¸ºä¸€ä¸ªå¤§å‹åœ¨çº¿é²œèŠ±é”€å”®å¹³å°ï¼Œæœ‰è‡ªå·±çš„ä¸šåŠ¡æµç¨‹å’Œè§„èŒƒï¼Œä¹Ÿæ‹¥æœ‰é’ˆå¯¹å‘˜å·¥çš„SOPæ‰‹å†Œã€‚æ–°å‘˜å·¥å…¥èŒåŸ¹è®­æ—¶ï¼Œä¼šåˆ†äº«ç›¸å…³çš„ä¿¡æ¯ã€‚ä½†æ˜¯ï¼Œè¿™äº›ä¿¡æ¯åˆ†æ•£äºå†…éƒ¨ç½‘å’ŒHRéƒ¨é—¨ç›®å½•å„å¤„ï¼Œæœ‰æ—¶ä¸ä¾¿æŸ¥è¯¢ï¼›æœ‰æ—¶å› ä¸ºæ–‡æ¡£è¿‡äºå†—é•¿ï¼Œå‘˜å·¥æ— æ³•ç¬¬ä¸€æ—¶é—´æ‰¾åˆ°æƒ³è¦çš„å†…å®¹ï¼›æœ‰æ—¶å…¬å¸æ”¿ç­–å·²æ›´æ–°ï¼Œä½†æ˜¯å‘˜å·¥æ‰‹å¤´çš„æ–‡æ¡£è¿˜æ˜¯æ—§ç‰ˆå†…å®¹ã€‚</p><p>åŸºäºä¸Šè¿°éœ€æ±‚ï¼Œæˆ‘ä»¬å°†å¼€å‘ä¸€å¥—åŸºäºå„ç§å†…éƒ¨çŸ¥è¯†æ‰‹å†Œçš„ â€œDoc-QAâ€ ç³»ç»Ÿã€‚è¿™ä¸ªç³»ç»Ÿå°†å……åˆ†åˆ©ç”¨LangChainæ¡†æ¶ï¼Œå¤„ç†ä»å‘˜å·¥æ‰‹å†Œä¸­äº§ç”Ÿçš„å„ç§é—®é¢˜ã€‚è¿™ä¸ªé—®ç­”ç³»ç»Ÿèƒ½å¤Ÿç†è§£å‘˜å·¥çš„é—®é¢˜ï¼Œå¹¶åŸºäºæœ€æ–°çš„å‘˜å·¥æ‰‹å†Œï¼Œç»™å‡ºç²¾å‡†çš„ç­”æ¡ˆã€‚</p><p><strong>å¼€å‘æ¡†æ¶</strong>ï¼šä¸‹é¢è¿™å¼ å›¾ç‰‡æè¿°äº†é€šè¿‡LangChainæ¡†æ¶å®ç°ä¸€ä¸ªçŸ¥è¯†åº“æ–‡æ¡£ç³»ç»Ÿçš„æ•´ä½“æ¡†æ¶ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/c6/bf/c66995f1bf8575fb8fyye6293200eabf.jpg?wh=1393x697\" alt=\"\" title=\"åŸºäºæ•°æ®æºçš„æ–‡æ¡£é—®ç­”ç³»ç»Ÿå¼€å‘æ¡†æ¶\"></p><p>æ•´ä¸ªæ¡†æ¶åˆ†ä¸ºè¿™æ ·ä¸‰ä¸ªéƒ¨åˆ†ã€‚</p><ul>\n<li>æ•°æ®æºï¼ˆData Sourcesï¼‰ï¼šæ•°æ®å¯ä»¥æœ‰å¾ˆå¤šç§ï¼ŒåŒ…æ‹¬PDFåœ¨å†…çš„éç»“æ„åŒ–çš„æ•°æ®ï¼ˆUnstructured Dataï¼‰ã€SQLåœ¨å†…çš„ç»“æ„åŒ–çš„æ•°æ®ï¼ˆStructured Dataï¼‰ï¼Œä»¥åŠPythonã€Javaä¹‹ç±»çš„ä»£ç ï¼ˆCodeï¼‰ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬èšç„¦äºå¯¹éç»“æ„åŒ–æ•°æ®çš„å¤„ç†ã€‚</li>\n<li>å¤§æ¨¡å‹åº”ç”¨ï¼ˆApplicationï¼Œå³LLM Appï¼‰ï¼šä»¥å¤§æ¨¡å‹ä¸ºé€»è¾‘å¼•æ“ï¼Œç”Ÿæˆæˆ‘ä»¬æ‰€éœ€è¦çš„å›ç­”ã€‚</li>\n<li>ç”¨ä¾‹ï¼ˆUse-Casesï¼‰ï¼šå¤§æ¨¡å‹ç”Ÿæˆçš„å›ç­”å¯ä»¥æ„å»ºå‡ºQA/èŠå¤©æœºå™¨äººç­‰ç³»ç»Ÿã€‚</li>\n</ul><!-- [[[read_end]]] --><p><strong>æ ¸å¿ƒå®ç°æœºåˆ¶ï¼š</strong>è¿™ä¸ªé¡¹ç›®çš„æ ¸å¿ƒå®ç°æœºåˆ¶æ˜¯ä¸‹å›¾æ‰€ç¤ºçš„æ•°æ®å¤„ç†ç®¡é“ï¼ˆPipelineï¼‰ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/73/87/73a46eecd42038961db9067e75de3387.jpg?wh=2509x799\" alt=\"\" title=\"æ–‡æ¡£é—®ç­”ç³»ç»Ÿçš„æ•°æ®å¤„ç†ç®¡é“\"></p><p>åœ¨è¿™ä¸ªç®¡é“çš„æ¯ä¸€æ­¥ä¸­ï¼ŒLangChainéƒ½ä¸ºæˆ‘ä»¬æä¾›äº†ç›¸å…³å·¥å…·ï¼Œè®©ä½ è½»æ¾å®ç°åŸºäºæ–‡æ¡£çš„é—®ç­”åŠŸèƒ½ã€‚</p><p>å…·ä½“æµç¨‹åˆ†ä¸ºä¸‹é¢5æ­¥ã€‚</p><ol>\n<li>Loadingï¼šæ–‡æ¡£åŠ è½½å™¨æŠŠDocuments <strong>åŠ è½½</strong>ä¸ºä»¥LangChainèƒ½å¤Ÿè¯»å–çš„å½¢å¼ã€‚</li>\n<li>Splittingï¼šæ–‡æœ¬åˆ†å‰²å™¨æŠŠDocuments <strong>åˆ‡åˆ†</strong>ä¸ºæŒ‡å®šå¤§å°çš„åˆ†å‰²ï¼Œæˆ‘æŠŠå®ƒä»¬ç§°ä¸ºâ€œæ–‡æ¡£å—â€æˆ–è€…â€œæ–‡æ¡£ç‰‡â€ã€‚</li>\n<li>Storageï¼šå°†ä¸Šä¸€æ­¥ä¸­åˆ†å‰²å¥½çš„â€œæ–‡æ¡£å—â€ä»¥â€œåµŒå…¥â€ï¼ˆEmbeddingï¼‰çš„å½¢å¼<strong>å­˜å‚¨</strong>åˆ°å‘é‡æ•°æ®åº“ï¼ˆVector DBï¼‰ä¸­ï¼Œå½¢æˆä¸€ä¸ªä¸ªçš„â€œåµŒå…¥ç‰‡â€ã€‚</li>\n<li>Retrievalï¼šåº”ç”¨ç¨‹åºä»å­˜å‚¨ä¸­<strong>æ£€ç´¢</strong>åˆ†å‰²åçš„æ–‡æ¡£ï¼ˆä¾‹å¦‚é€šè¿‡æ¯”è¾ƒä½™å¼¦ç›¸ä¼¼åº¦ï¼Œæ‰¾åˆ°ä¸è¾“å…¥é—®é¢˜ç±»ä¼¼çš„åµŒå…¥ç‰‡ï¼‰ã€‚</li>\n<li>Outputï¼šæŠŠé—®é¢˜å’Œç›¸ä¼¼çš„åµŒå…¥ç‰‡ä¼ é€’ç»™è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ï¼Œä½¿ç”¨åŒ…å«é—®é¢˜å’Œæ£€ç´¢åˆ°çš„åˆ†å‰²çš„æç¤º<strong>ç”Ÿæˆç­”æ¡ˆ</strong>ã€‚</li>\n</ol><p>ä¸Šé¢5ä¸ªç¯èŠ‚çš„ä»‹ç»éƒ½éå¸¸ç®€å•ï¼Œæœ‰äº›æ¦‚å¿µï¼ˆå¦‚åµŒå…¥ã€å‘é‡å­˜å‚¨ï¼‰æ˜¯ç¬¬ä¸€æ¬¡å‡ºç°ï¼Œç†è§£èµ·æ¥éœ€è¦ä¸€äº›èƒŒæ™¯çŸ¥è¯†ï¼Œåˆ«ç€æ€¥ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å…·ä½“è®²è§£è¿™5æ­¥ã€‚</p><h2>æ•°æ®çš„å‡†å¤‡å’Œè½½å…¥</h2><p>â€œæ˜“é€Ÿé²œèŠ±â€çš„å†…éƒ¨èµ„æ–™åŒ…æ‹¬ pdfã€word å’Œ txt æ ¼å¼çš„å„ç§æ–‡ä»¶ï¼Œæˆ‘å·²ç»æ”¾åœ¨<a href=\"https://github.com/huangjia2019/langchain/tree/main/02_%E6%96%87%E6%A1%A3QA%E7%B3%BB%E7%BB%9F\">è¿™é‡Œ</a>ä¾›ä½ ä¸‹è½½ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/b6/ff/b69956a706112266df404eee953459ff.jpg?wh=402x224\" alt=\"\"></p><p>å…¶ä¸­ä¸€ä¸ªæ–‡æ¡£çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/93/24/931a55af4f0a3842a640d95c2c4bf224.jpg?wh=1630x1073\" alt=\"\"></p><p>æˆ‘ä»¬é¦–å…ˆç”¨LangChainä¸­çš„document_loadersæ¥åŠ è½½å„ç§æ ¼å¼çš„æ–‡æœ¬æ–‡ä»¶ã€‚ï¼ˆè¿™äº›æ–‡ä»¶æˆ‘æŠŠå®ƒæ”¾åœ¨OneFlowerè¿™ä¸ªç›®å½•ä¸­äº†ï¼Œå¦‚æœä½ åˆ›å»ºè‡ªå·±çš„æ–‡ä»¶å¤¹ï¼Œå°±è¦è°ƒæ•´ä¸€ä¸‹ä»£ç ä¸­çš„ç›®å½•ã€‚ï¼‰</p><p>åœ¨è¿™ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬ä» pdfã€word å’Œ txt æ–‡ä»¶ä¸­åŠ è½½æ–‡æœ¬ï¼Œç„¶åå°†è¿™äº›æ–‡æœ¬å­˜å‚¨åœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­ã€‚ï¼ˆæ³¨æ„ï¼šå¯èƒ½éœ€è¦å®‰è£…PyPDFã€Docx2txtç­‰åº“ï¼‰</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\">import os\nos.environ[\"OPENAI_API_KEY\"] = 'ä½ çš„Open AI API Key'\n\n# 1.Load å¯¼å…¥Document Loaders\nfrom langchain.document_loaders import PyPDFLoader\nfrom langchain.document_loaders import Docx2txtLoader\nfrom langchain.document_loaders import TextLoader\n\n# åŠ è½½Documents\nbase_dir = '.\\OneFlower' # æ–‡æ¡£çš„å­˜æ”¾ç›®å½•\ndocuments = []\nfor file in os.listdir(base_dir): \n&nbsp; &nbsp; # æ„å»ºå®Œæ•´çš„æ–‡ä»¶è·¯å¾„\n&nbsp; &nbsp; file_path = os.path.join(base_dir, file)\n&nbsp; &nbsp; if file.endswith('.pdf'):\n&nbsp; &nbsp; &nbsp; &nbsp; loader = PyPDFLoader(file_path)\n&nbsp; &nbsp; &nbsp; &nbsp; documents.extend(loader.load())\n&nbsp; &nbsp; elif file.endswith('.docx'): \n&nbsp; &nbsp; &nbsp; &nbsp; loader = Docx2txtLoader(file_path)\n&nbsp; &nbsp; &nbsp; &nbsp; documents.extend(loader.load())\n&nbsp; &nbsp; elif file.endswith('.txt'):\n&nbsp; &nbsp; &nbsp; &nbsp; loader = TextLoader(file_path)\n&nbsp; &nbsp; &nbsp; &nbsp; documents.extend(loader.load())\n</code></pre><p>è¿™é‡Œæˆ‘ä»¬é¦–å…ˆå¯¼å…¥äº†OpenAIçš„API Keyã€‚å› ä¸ºåé¢æˆ‘ä»¬éœ€è¦åˆ©ç”¨Open AIçš„ä¸¤ç§ä¸åŒæ¨¡å‹åšä»¥ä¸‹ä¸¤ä»¶äº‹ï¼š</p><ul>\n<li>ç”¨OpenAIçš„Embeddingæ¨¡å‹ä¸ºæ–‡æ¡£åšåµŒå…¥ã€‚</li>\n<li>è°ƒç”¨OpenAIçš„GPTæ¨¡å‹æ¥ç”Ÿæˆé—®ç­”ç³»ç»Ÿä¸­çš„å›ç­”ã€‚</li>\n</ul><p>å½“ç„¶äº†ï¼ŒLangChainæ‰€æ”¯æŒçš„å¤§æ¨¡å‹ç»ä¸ä»…ä»…æ˜¯Open AIè€Œå·²ï¼Œä½ å®Œå…¨å¯ä»¥éµå¾ªè¿™ä¸ªæ¡†æ¶ï¼ŒæŠŠEmbeddingæ¨¡å‹å’Œè´Ÿè´£ç”Ÿæˆå›ç­”çš„è¯­è¨€æ¨¡å‹éƒ½æ›¿æ¢ä¸ºå…¶ä»–çš„å¼€æºæ¨¡å‹ã€‚</p><p>åœ¨è¿è¡Œä¸Šé¢çš„ç¨‹åºæ—¶ï¼Œé™¤äº†è¦å¯¼å…¥æ­£ç¡®çš„Open AI Keyä¹‹å¤–ï¼Œè¿˜è¦æ³¨æ„çš„æ˜¯å·¥å…·åŒ…çš„å®‰è£…ã€‚ä½¿ç”¨LangChainæ—¶ï¼Œæ ¹æ®å…·ä½“çš„ä»»åŠ¡ï¼Œå¾€å¾€éœ€è¦å„ç§ä¸åŒçš„å·¥å…·åŒ…ï¼ˆæ¯”å¦‚ä¸Šé¢çš„ä»£ç éœ€è¦PyPDFå’ŒDocx2txtå·¥å…·ï¼‰ã€‚å®ƒä»¬å®‰è£…èµ·æ¥éƒ½éå¸¸ç®€å•ï¼Œå¦‚æœç¨‹åºæŠ¥é”™ç¼ºå°‘æŸä¸ªåŒ…ï¼Œåªè¦é€šè¿‡ <code>pip install</code> å®‰è£…ç›¸å…³åŒ…å³å¯ã€‚</p><h2>æ–‡æœ¬çš„åˆ†å‰²</h2><p>æ¥ä¸‹æ¥éœ€è¦å°†åŠ è½½çš„æ–‡æœ¬åˆ†å‰²æˆæ›´å°çš„å—ï¼Œä»¥ä¾¿è¿›è¡ŒåµŒå…¥å’Œå‘é‡å­˜å‚¨ã€‚è¿™ä¸ªæ­¥éª¤ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ LangChainä¸­çš„RecursiveCharacterTextSplitter æ¥åˆ†å‰²æ–‡æœ¬ã€‚</p><pre><code class=\"language-plain\"># 2.Split å°†Documentsåˆ‡åˆ†æˆå—ä»¥ä¾¿åç»­è¿›è¡ŒåµŒå…¥å’Œå‘é‡å­˜å‚¨\nfrom langchain.text_splitter import RecursiveCharacterTextSplitter\ntext_splitter = RecursiveCharacterTextSplitter(chunk_size=200, chunk_overlap=10)\nchunked_documents = text_splitter.split_documents(documents)\n</code></pre><p>ç°åœ¨ï¼Œæˆ‘ä»¬çš„æ–‡æ¡£è¢«åˆ‡æˆäº†ä¸€ä¸ªä¸ª200å­—ç¬¦å·¦å³çš„æ–‡æ¡£å—ã€‚è¿™ä¸€æ­¥ï¼Œæ˜¯ä¸ºæŠŠå®ƒä»¬å­˜å‚¨è¿›ä¸‹é¢çš„å‘é‡æ•°æ®åº“åšå‡†å¤‡ã€‚</p><h2>å‘é‡æ•°æ®åº“å­˜å‚¨</h2><p>ç´§æ¥ç€ï¼Œæˆ‘ä»¬å°†è¿™äº›åˆ†å‰²åçš„æ–‡æœ¬è½¬æ¢æˆåµŒå…¥çš„å½¢å¼ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨ä¸€ä¸ªå‘é‡æ•°æ®åº“ä¸­ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† OpenAIEmbeddings æ¥ç”ŸæˆåµŒå…¥ï¼Œç„¶åä½¿ç”¨ Qdrant è¿™ä¸ªå‘é‡æ•°æ®åº“æ¥å­˜å‚¨åµŒå…¥ï¼ˆè¿™é‡Œéœ€è¦pip install qdrant-clientï¼‰ã€‚</p><p>å¦‚æœæ–‡æœ¬çš„â€œåµŒå…¥â€è¿™ä¸ªæ¦‚å¿µå¯¹ä½ æ¥è¯´æœ‰äº›é™Œç”Ÿçš„è¯ï¼Œä½ å¯ä»¥çœ‹ä¸€ä¸‹ä¸‹é¢çš„è¯´æ˜ã€‚</p><blockquote>\n<p><span class=\"reference\">è¯åµŒå…¥ï¼ˆWord Embeddingï¼‰æ˜¯è‡ªç„¶è¯­è¨€å¤„ç†å’Œæœºå™¨å­¦ä¹ ä¸­çš„ä¸€ä¸ªæ¦‚å¿µï¼Œå®ƒå°†æ–‡å­—æˆ–è¯è¯­è½¬æ¢ä¸ºä¸€ç³»åˆ—æ•°å­—ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªå‘é‡ã€‚ç®€å•åœ°è¯´ï¼Œè¯åµŒå…¥å°±æ˜¯ä¸€ä¸ªä¸ºæ¯ä¸ªè¯åˆ†é…çš„æ•°å­—åˆ—è¡¨ã€‚è¿™äº›æ•°å­—ä¸æ˜¯éšæœºçš„ï¼Œè€Œæ˜¯æ•è·äº†è¿™ä¸ªè¯çš„å«ä¹‰å’Œå®ƒåœ¨æ–‡æœ¬ä¸­çš„ä¸Šä¸‹æ–‡ã€‚å› æ­¤ï¼Œè¯­ä¹‰ä¸Šç›¸ä¼¼æˆ–ç›¸å…³çš„è¯åœ¨è¿™ä¸ªæ•°å­—ç©ºé—´ä¸­ä¼šæ¯”è¾ƒæ¥è¿‘ã€‚</span><br>\n&nbsp;<br>\n<span class=\"reference\">ä¸¾ä¸ªä¾‹å­ï¼Œé€šè¿‡æŸç§è¯åµŒå…¥æŠ€æœ¯ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå¾—åˆ°ï¼š</span><br>\n<span class=\"reference\">â€œå›½ç‹â€ -&gt; [1.2, 0.5, 3.1, â€¦]</span><br>\n<span class=\"reference\">â€œçš‡å¸â€ -&gt; [1.3, 0.6, 2.9, â€¦]</span><br>\n<span class=\"reference\">â€œè‹¹æœâ€ -&gt; [0.9, -1.2, 0.3, â€¦]</span><br>\n&nbsp;<br>\n<span class=\"reference\">ä»è¿™äº›å‘é‡ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°â€œå›½ç‹â€å’Œâ€œçš‡å¸â€è¿™ä¸¤ä¸ªè¯çš„å‘é‡åœ¨æŸç§ç¨‹åº¦ä¸Šæ˜¯ç›¸ä¼¼çš„ï¼Œè€Œä¸â€œè‹¹æœâ€è¿™ä¸ªè¯ç›¸æ¯”ï¼Œå®ƒä»¬çš„å‘é‡åˆ™ç›¸å·®å¾ˆå¤§ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªæ¦‚å¿µåœ¨è¯­ä¹‰ä¸Šæ˜¯ä¸åŒçš„ã€‚</span><br>\n&nbsp;<br>\n<span class=\"reference\">è¯åµŒå…¥çš„ä¼˜ç‚¹æ˜¯ï¼Œå®ƒæä¾›äº†ä¸€ç§å°†æ–‡æœ¬æ•°æ®è½¬åŒ–ä¸ºè®¡ç®—æœºå¯ä»¥ç†è§£å’Œå¤„ç†çš„å½¢å¼ï¼ŒåŒæ—¶ä¿ç•™äº†è¯è¯­ä¹‹é—´çš„è¯­ä¹‰å…³ç³»ã€‚è¿™åœ¨è®¸å¤šè‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡ä¸­éƒ½æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œæ¯”å¦‚æ–‡æœ¬åˆ†ç±»ã€æœºå™¨ç¿»è¯‘å’Œæƒ…æ„Ÿåˆ†æç­‰ã€‚</span></p>\n</blockquote><p>ä½ ä¹Ÿå¯ä»¥å¯¹ç…§ä¸‹é¢çš„è®²è§£å­¦ä¹ ä¸€ä¸‹å‘é‡æ•°æ®åº“è¿™ä¸ªæ¦‚å¿µï¼Œå®ƒæœ€è¿‘å› ä¸ºå¤§è¯­è¨€æ¨¡å‹çš„æµè¡Œå˜å¾—éå¸¸ç«çˆ†ã€‚</p><blockquote>\n<p><span class=\"reference\">å‘é‡æ•°æ®åº“ï¼Œä¹Ÿç§°ä¸ºçŸ¢é‡æ•°æ®åº“æˆ–è€…å‘é‡æœç´¢å¼•æ“ï¼Œæ˜¯ä¸€ç§ä¸“é—¨ç”¨äºå­˜å‚¨å’Œæœç´¢å‘é‡å½¢å¼çš„æ•°æ®çš„æ•°æ®åº“ã€‚åœ¨ä¼—å¤šçš„æœºå™¨å­¦ä¹ å’Œäººå·¥æ™ºèƒ½åº”ç”¨ä¸­ï¼Œå°¤å…¶æ˜¯è‡ªç„¶è¯­è¨€å¤„ç†å’Œå›¾åƒè¯†åˆ«è¿™ç±»æ¶‰åŠå¤§é‡éç»“æ„åŒ–æ•°æ®çš„é¢†åŸŸï¼Œå°†æ•°æ®è½¬åŒ–ä¸ºé«˜ç»´åº¦çš„å‘é‡æ˜¯å¸¸è§çš„å¤„ç†æ–¹å¼ã€‚è¿™äº›å‘é‡å¯èƒ½æ‹¥æœ‰æ•°ç™¾ç”šè‡³æ•°åƒä¸ªç»´åº¦ï¼Œæ˜¯å¯¹å¤æ‚çš„éç»“æ„åŒ–æ•°æ®å¦‚æ–‡æœ¬ã€å›¾åƒçš„ä¸€ç§æ•°å­¦è¡¨è¿°ï¼Œä»è€Œä½¿è¿™äº›æ•°æ®èƒ½è¢«æœºå™¨ç†è§£å’Œå¤„ç†ã€‚ç„¶è€Œï¼Œä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“åœ¨å­˜å‚¨å’ŒæŸ¥è¯¢å¦‚æ­¤é«˜ç»´åº¦å’Œå¤æ‚æ€§çš„å‘é‡æ•°æ®æ—¶ï¼Œå¾€å¾€é¢ä¸´ç€æ•ˆç‡å’Œæ€§èƒ½çš„é—®é¢˜ã€‚å› æ­¤ï¼Œå‘é‡æ•°æ®åº“è¢«è®¾è®¡å‡ºæ¥ä»¥è§£å†³è¿™ä¸€é—®é¢˜ï¼Œå®ƒå…·å¤‡é«˜æ•ˆå­˜å‚¨å’Œå¤„ç†é«˜ç»´å‘é‡æ•°æ®çš„èƒ½åŠ›ï¼Œä»è€Œæ›´å¥½åœ°æ”¯æŒæ¶‰åŠéç»“æ„åŒ–æ•°æ®å¤„ç†çš„äººå·¥æ™ºèƒ½åº”ç”¨ã€‚</span></p>\n</blockquote><p><img src=\"https://static001.geekbang.org/resource/image/e3/16/e3c7e244b15f9527a4eb811e550a8f16.png?wh=2989x1805\" alt=\"\" title=\"å›¾ç‰‡æ¥æºç½‘ç»œï¼Œå‘é‡æ•°æ®åº“å¯ä»¥å­˜å‚¨å„ç§éç»“æ„åŒ–çš„æ•°æ®\"></p><p>å‘é‡æ•°æ®åº“æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚Pineconeã€Chromaå’ŒQdrantï¼Œæœ‰äº›æ˜¯æ”¶è´¹çš„ï¼Œæœ‰äº›åˆ™æ˜¯å¼€æºçš„ã€‚</p><p>LangChainä¸­æ”¯æŒå¾ˆå¤šå‘é‡æ•°æ®åº“ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©çš„æ˜¯å¼€æºå‘é‡æ•°æ®åº“Qdrantã€‚ï¼ˆæ³¨æ„ï¼Œéœ€è¦å®‰è£…qdrant-clientï¼‰</p><p>å…·ä½“å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\"># 3.Store å°†åˆ†å‰²åµŒå…¥å¹¶å­˜å‚¨åœ¨çŸ¢é‡æ•°æ®åº“Qdrantä¸­\nfrom langchain.vectorstores import Qdrant\nfrom langchain.embeddings import OpenAIEmbeddings\nvectorstore = Qdrant.from_documents(\n&nbsp; &nbsp; documents=chunked_documents, # ä»¥åˆ†å—çš„æ–‡æ¡£\n&nbsp; &nbsp; embedding=OpenAIEmbeddings(), # ç”¨OpenAIçš„Embedding ModelåšåµŒå…¥\n&nbsp; &nbsp; location=\":memory:\", &nbsp;# in-memory å­˜å‚¨\n&nbsp; &nbsp; collection_name=\"my_documents\",) # æŒ‡å®šcollection_name\n</code></pre><p>ç›®å‰ï¼Œæ˜“é€Ÿé²œèŠ±çš„æ‰€æœ‰å†…éƒ¨æ–‡æ¡£ï¼Œéƒ½ä»¥â€œæ–‡æ¡£å—åµŒå…¥ç‰‡â€çš„æ ¼å¼è¢«å­˜å‚¨åœ¨å‘é‡æ•°æ®åº“é‡Œé¢äº†ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬åªéœ€è¦æŸ¥è¯¢è¿™ä¸ªå‘é‡æ•°æ®åº“ï¼Œå°±å¯ä»¥æ‰¾åˆ°å¤§ä½“ä¸Šç›¸å…³çš„ä¿¡æ¯äº†ã€‚</p><h2>ç›¸å…³ä¿¡æ¯çš„è·å–</h2><p>å½“å†…éƒ¨æ–‡æ¡£å­˜å‚¨åˆ°å‘é‡æ•°æ®åº“ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®é—®é¢˜å’Œä»»åŠ¡æ¥æå–æœ€ç›¸å…³çš„ä¿¡æ¯ã€‚æ­¤æ—¶ï¼Œä¿¡æ¯æå–çš„åŸºæœ¬æ–¹å¼å°±æ˜¯æŠŠé—®é¢˜ä¹Ÿè½¬æ¢ä¸ºå‘é‡ï¼Œç„¶åå»å’Œå‘é‡æ•°æ®åº“ä¸­çš„å„ä¸ªå‘é‡è¿›è¡Œæ¯”è¾ƒï¼Œæå–æœ€æ¥è¿‘çš„ä¿¡æ¯ã€‚</p><p>å‘é‡ä¹‹é—´çš„æ¯”è¾ƒé€šå¸¸åŸºäºå‘é‡çš„è·ç¦»æˆ–è€…ç›¸ä¼¼åº¦ã€‚åœ¨é«˜ç»´ç©ºé—´ä¸­ï¼Œå¸¸ç”¨çš„å‘é‡è·ç¦»æˆ–ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•æœ‰æ¬§æ°è·ç¦»å’Œä½™å¼¦ç›¸ä¼¼åº¦ã€‚</p><ul>\n<li><strong>æ¬§æ°è·ç¦»</strong>ï¼šè¿™æ˜¯æœ€ç›´æ¥çš„è·ç¦»åº¦é‡æ–¹å¼ï¼Œå°±åƒåœ¨äºŒç»´å¹³é¢ä¸Šæµ‹é‡ä¸¤ç‚¹ä¹‹é—´çš„ç›´çº¿è·ç¦»é‚£æ ·ã€‚åœ¨é«˜ç»´ç©ºé—´ä¸­ï¼Œä¸¤ä¸ªå‘é‡çš„æ¬§æ°è·ç¦»å°±æ˜¯å„ä¸ªå¯¹åº”ç»´åº¦å·®çš„å¹³æ–¹å’Œçš„å¹³æ–¹æ ¹ã€‚</li>\n<li><strong>ä½™å¼¦ç›¸ä¼¼åº¦</strong>ï¼šåœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ›´å…³å¿ƒå‘é‡çš„æ–¹å‘è€Œä¸æ˜¯å®ƒçš„å¤§å°ã€‚ä¾‹å¦‚åœ¨æ–‡æœ¬å¤„ç†ä¸­ï¼Œä¸€ä¸ªè¯çš„å‘é‡å¯èƒ½ä¼šå› ä¸ºæ–‡æœ¬é•¿åº¦çš„ä¸åŒï¼Œè€Œåœ¨å¤§å°ä¸Šæœ‰å¾ˆå¤§çš„å·®è·ï¼Œä½†æ–¹å‘æ›´èƒ½åæ˜ å…¶è¯­ä¹‰ã€‚ä½™å¼¦ç›¸ä¼¼åº¦å°±æ˜¯åº¦é‡å‘é‡ä¹‹é—´æ–¹å‘çš„ç›¸ä¼¼æ€§ï¼Œå®ƒçš„å€¼èŒƒå›´åœ¨-1åˆ°1ä¹‹é—´ï¼Œå€¼è¶Šæ¥è¿‘1ï¼Œè¡¨ç¤ºä¸¤ä¸ªå‘é‡çš„æ–¹å‘è¶Šç›¸ä¼¼ã€‚</li>\n</ul><p>è¿™ä¸¤ç§æ–¹æ³•éƒ½è¢«å¹¿æ³›åº”ç”¨äºå„ç§æœºå™¨å­¦ä¹ å’Œäººå·¥æ™ºèƒ½ä»»åŠ¡ä¸­ï¼Œé€‰æ‹©å“ªä¸€ç§æ–¹æ³•å–å†³äºå…·ä½“çš„åº”ç”¨åœºæ™¯ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/32/7a/32db77431433da86d9f818037752bd7a.png?wh=1600x1320\" alt=\"\" title=\"å›¾ç‰‡æ¥æºç½‘ç»œï¼Œè¯­ä¹‰ç›¸ä¼¼çš„å‘é‡ä¹‹é—´çš„è·ç¦»è¿‘æˆ–è€…æ–¹å‘ç›¸ä¼¼\"></p><p>å½“ç„¶è¿™é‡Œä½ è‚¯å®šä¼šé—®äº†ï¼Œé‚£ä¹ˆåˆ°åº•ä»€ä¹ˆæ—¶å€™é€‰æ‹©æ¬§å¼è·ç¦»ï¼Œä»€ä¹ˆæ—¶å€™é€‰æ‹©ä½™å¼¦ç›¸ä¼¼åº¦å‘¢ï¼Ÿ</p><p>ç®€å•æ¥è¯´ï¼Œå…³å¿ƒæ•°é‡ç­‰å¤§å°å·®å¼‚æ—¶ç”¨æ¬§æ°è·ç¦»ï¼Œå…³å¿ƒæ–‡æœ¬ç­‰è¯­ä¹‰å·®å¼‚æ—¶ç”¨ä½™å¼¦ç›¸ä¼¼åº¦ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œæ¬§æ°è·ç¦»åº¦é‡çš„æ˜¯ç»å¯¹è·ç¦»ï¼Œå®ƒèƒ½å¾ˆå¥½åœ°åæ˜ å‡ºå‘é‡çš„ç»å¯¹å·®å¼‚ã€‚å½“æˆ‘ä»¬å…³å¿ƒæ•°æ®çš„ç»å¯¹å¤§å°ï¼Œä¾‹å¦‚åœ¨ç‰©å“æ¨èç³»ç»Ÿä¸­ï¼Œç”¨æˆ·çš„è´­ä¹°é‡å¯èƒ½åæ˜ ä»–ä»¬çš„åå¥½å¼ºåº¦ï¼Œæ­¤æ—¶å¯ä»¥è€ƒè™‘ä½¿ç”¨æ¬§æ°è·ç¦»ã€‚åŒæ ·ï¼Œåœ¨æ•°æ®é›†ä¸­å„ä¸ªå‘é‡çš„å¤§å°ç›¸ä¼¼ï¼Œä¸”æ•°æ®åˆ†å¸ƒå¤§è‡´å‡åŒ€æ—¶ï¼Œä½¿ç”¨æ¬§æ°è·ç¦»ä¹Ÿæ¯”è¾ƒé€‚åˆã€‚</p><p>ä½™å¼¦ç›¸ä¼¼åº¦åº¦é‡çš„æ˜¯æ–¹å‘çš„ç›¸ä¼¼æ€§ï¼Œå®ƒæ›´å…³å¿ƒçš„æ˜¯ä¸¤ä¸ªå‘é‡çš„è§’åº¦å·®å¼‚ï¼Œè€Œä¸æ˜¯å®ƒä»¬çš„å¤§å°å·®å¼‚ã€‚åœ¨å¤„ç†æ–‡æœ¬æ•°æ®æˆ–è€…å…¶ä»–é«˜ç»´ç¨€ç–æ•°æ®çš„æ—¶å€™ï¼Œä½™å¼¦ç›¸ä¼¼åº¦ç‰¹åˆ«æœ‰ç”¨ã€‚æ¯”å¦‚åœ¨ä¿¡æ¯æ£€ç´¢å’Œæ–‡æœ¬åˆ†ç±»ç­‰ä»»åŠ¡ä¸­ï¼Œæ–‡æœ¬æ•°æ®å¾€å¾€è¢«è¡¨ç¤ºä¸ºé«˜ç»´çš„è¯å‘é‡ï¼Œè¯å‘é‡çš„æ–¹å‘æ›´èƒ½åæ˜ å…¶è¯­ä¹‰ç›¸ä¼¼æ€§ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨ä½™å¼¦ç›¸ä¼¼åº¦ã€‚</p><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æ­£åœ¨å¤„ç†çš„æ˜¯æ–‡æœ¬æ•°æ®ï¼Œç›®æ ‡æ˜¯å»ºç«‹ä¸€ä¸ªé—®ç­”ç³»ç»Ÿï¼Œéœ€è¦ä»è¯­ä¹‰ä¸Šç†è§£å’Œæ¯”è¾ƒé—®é¢˜å¯èƒ½çš„ç­”æ¡ˆã€‚å› æ­¤ï¼Œæˆ‘å»ºè®®ä½¿ç”¨ä½™å¼¦ç›¸ä¼¼åº¦ä½œä¸ºåº¦é‡æ ‡å‡†ã€‚é€šè¿‡æ¯”è¾ƒé—®é¢˜å’Œç­”æ¡ˆå‘é‡åœ¨è¯­ä¹‰ç©ºé—´ä¸­çš„æ–¹å‘ï¼Œå¯ä»¥æ‰¾åˆ°ä¸æå‡ºçš„é—®é¢˜æœ€åŒ¹é…çš„ç­”æ¡ˆã€‚</p><p>åœ¨è¿™ä¸€æ­¥çš„ä»£ç éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ªèŠå¤©æ¨¡å‹ã€‚ç„¶åéœ€è¦åˆ›å»ºä¸€ä¸ª RetrievalQA é“¾ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ£€ç´¢å¼é—®ç­”æ¨¡å‹ï¼Œç”¨äºç”Ÿæˆé—®é¢˜çš„ç­”æ¡ˆã€‚</p><p>åœ¨RetrievalQA é“¾ä¸­æœ‰ä¸‹é¢ä¸¤å¤§é‡è¦ç»„æˆéƒ¨åˆ†ã€‚</p><ul>\n<li>LLMæ˜¯å¤§æ¨¡å‹ï¼Œè´Ÿè´£å›ç­”é—®é¢˜ã€‚</li>\n<li>retrieverï¼ˆvectorstore.as_retriever()ï¼‰è´Ÿè´£æ ¹æ®é—®é¢˜æ£€ç´¢ç›¸å…³çš„æ–‡æ¡£ï¼Œæ‰¾åˆ°å…·ä½“çš„â€œåµŒå…¥ç‰‡â€ã€‚è¿™äº›â€œåµŒå…¥ç‰‡â€å¯¹åº”çš„â€œæ–‡æ¡£å—â€å°±ä¼šä½œä¸ºçŸ¥è¯†ä¿¡æ¯ï¼Œå’Œé—®é¢˜ä¸€èµ·ä¼ é€’è¿›å…¥å¤§æ¨¡å‹ã€‚æœ¬åœ°æ–‡æ¡£ä¸­æ£€ç´¢è€Œå¾—çš„çŸ¥è¯†å¾ˆé‡è¦ï¼Œå› ä¸º<strong>ä»äº’è”ç½‘ä¿¡æ¯ä¸­è®­ç»ƒè€Œæ¥çš„å¤§æ¨¡å‹ä¸å¯èƒ½æ‹¥æœ‰â€œæ˜“é€Ÿé²œèŠ±â€ä½œä¸ºä¸€ä¸ªç§è¥ä¼ä¸šçš„å†…éƒ¨çŸ¥è¯†</strong>ã€‚</li>\n</ul><p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\"># 4. Retrieval å‡†å¤‡æ¨¡å‹å’ŒRetrievalé“¾\nimport logging # å¯¼å…¥Loggingå·¥å…·\nfrom langchain.chat_models import ChatOpenAI # ChatOpenAIæ¨¡å‹\nfrom langchain.retrievers.multi_query import MultiQueryRetriever # MultiQueryRetrieverå·¥å…·\nfrom langchain.chains import RetrievalQA # RetrievalQAé“¾\n\n# è®¾ç½®Logging\nlogging.basicConfig()\nlogging.getLogger('langchain.retrievers.multi_query').setLevel(logging.INFO)\n\n# å®ä¾‹åŒ–ä¸€ä¸ªå¤§æ¨¡å‹å·¥å…· - OpenAIçš„GPT-3.5\nllm = ChatOpenAI(model_name=\"gpt-3.5-turbo\", temperature=0)\n\n# å®ä¾‹åŒ–ä¸€ä¸ªMultiQueryRetriever\nretriever_from_llm = MultiQueryRetriever.from_llm(retriever=vectorstore.as_retriever(), llm=llm)\n\n# å®ä¾‹åŒ–ä¸€ä¸ªRetrievalQAé“¾\nqa_chain = RetrievalQA.from_chain_type(llm,retriever=retriever_from_llm)\n</code></pre><p>ç°åœ¨æˆ‘ä»¬å·²ç»ä¸ºåç»­çš„æ­¥éª¤åšå¥½äº†å‡†å¤‡ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯æ¥æ”¶æ¥è‡ªç³»ç»Ÿç”¨æˆ·çš„å…·ä½“é—®é¢˜ï¼Œå¹¶æ ¹æ®é—®é¢˜æ£€ç´¢ä¿¡æ¯ï¼Œç”Ÿæˆå›ç­”ã€‚</p><h2>ç”Ÿæˆå›ç­”å¹¶å±•ç¤º</h2><p>è¿™ä¸€æ­¥æ˜¯é—®ç­”ç³»ç»Ÿåº”ç”¨çš„ä¸»è¦UIäº¤äº’éƒ¨åˆ†ï¼Œè¿™é‡Œä¼šåˆ›å»ºä¸€ä¸ª Flask åº”ç”¨ï¼ˆéœ€è¦å®‰è£…FlaskåŒ…ï¼‰æ¥æ¥æ”¶ç”¨æˆ·çš„é—®é¢˜ï¼Œå¹¶ç”Ÿæˆç›¸åº”çš„ç­”æ¡ˆï¼Œæœ€åé€šè¿‡ index.html å¯¹ç­”æ¡ˆè¿›è¡Œæ¸²æŸ“å’Œå‘ˆç°ã€‚</p><p>åœ¨è¿™ä¸ªæ­¥éª¤ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¹‹å‰åˆ›å»ºçš„ RetrievalQA é“¾æ¥è·å–ç›¸å…³çš„æ–‡æ¡£å’Œç”Ÿæˆç­”æ¡ˆã€‚ç„¶åï¼Œå°†è¿™äº›ä¿¡æ¯è¿”å›ç»™ç”¨æˆ·ï¼Œæ˜¾ç¤ºåœ¨ç½‘é¡µä¸Šã€‚</p><pre><code class=\"language-plain\"># 5. Output é—®ç­”ç³»ç»Ÿçš„UIå®ç°\nfrom flask import Flask, request, render_template\napp = Flask(__name__) # Flask APP\n\n@app.route('/', methods=['GET', 'POST'])\ndef home():\n&nbsp; &nbsp; if request.method == 'POST':\n\n&nbsp; &nbsp; &nbsp; &nbsp; # æ¥æ”¶ç”¨æˆ·è¾“å…¥ä½œä¸ºé—®é¢˜\n&nbsp; &nbsp; &nbsp; &nbsp; question = request.form.get('question') &nbsp; &nbsp; &nbsp; &nbsp;\n&nbsp; &nbsp; &nbsp; &nbsp; \n&nbsp; &nbsp; &nbsp; &nbsp; # RetrievalQAé“¾ - è¯»å…¥é—®é¢˜ï¼Œç”Ÿæˆç­”æ¡ˆ\n&nbsp; &nbsp; &nbsp; &nbsp; result = qa_chain({\"query\": question})\n&nbsp; &nbsp; &nbsp; &nbsp; \n&nbsp; &nbsp; &nbsp; &nbsp; # æŠŠå¤§æ¨¡å‹çš„å›ç­”ç»“æœè¿”å›ç½‘é¡µè¿›è¡Œæ¸²æŸ“\n&nbsp; &nbsp; &nbsp; &nbsp; return render_template('index.html', result=result)\n&nbsp; &nbsp; \n&nbsp; &nbsp; return render_template('index.html')\n\nif __name__ == \"__main__\":\n&nbsp; &nbsp; app.run(host='0.0.0.0',debug=True,port=5000)\n</code></pre><p>ç›¸å…³HTMLç½‘é¡µçš„å…³é”®ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\">&lt;body&gt;\n&nbsp; &nbsp; &lt;div class=\"container\"&gt;\n&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class=\"header\"&gt;\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h1&gt;æ˜“é€Ÿé²œèŠ±å†…éƒ¨é—®ç­”ç³»ç»Ÿ&lt;/h1&gt;\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;img src=\"{{ url_for('static', filename='flower.png') }}\" alt=\"flower logo\" width=\"200\"&gt; \n&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;\n&nbsp; &nbsp; &nbsp; &nbsp; &lt;form method=\"POST\"&gt;\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for=\"question\"&gt;Enter your question:&lt;/label&gt;&lt;br&gt;\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=\"text\" id=\"question\" name=\"question\"&gt;&lt;br&gt;\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=\"submit\" value=\"Submit\"&gt;\n&nbsp; &nbsp; &nbsp; &nbsp; &lt;/form&gt;\n&nbsp; &nbsp; &nbsp; &nbsp; {% if result is defined %}\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h2&gt;Answer&lt;/h2&gt;\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p&gt;{{ result.result }}&lt;/p&gt;\n&nbsp; &nbsp; &nbsp; &nbsp; {% endif %}\n&nbsp; &nbsp; &lt;/div&gt;\n&lt;/body&gt;\n\n</code></pre><p>è¿™ä¸ªé¡¹ç›®çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/21/3e/2110cd73ddb8677f9b188d41c589c73e.png?wh=710x465\" alt=\"\"></p><p>è¿è¡Œç¨‹åºä¹‹åï¼Œæˆ‘ä»¬è·‘èµ·ä¸€ä¸ªç½‘é¡µ <a href=\"http://127.0.0.1:5000/\">http://127.0.0.1:5000/</a>ã€‚ä¸ç½‘é¡µè¿›è¡Œäº’åŠ¨æ—¶ï¼Œå¯ä»¥å‘ç°ï¼Œé—®ç­”ç³»ç»Ÿå®Œç¾ç”Ÿæˆäº†ä¸“å±äºå¼‚é€Ÿé²œèŠ±å†…éƒ¨èµ„æ–™çš„å›ç­”ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/46/17/46b5b08c5f022f2c4c5975436b3e2d17.png?wh=567x338\" alt=\"\" title=\"é—®ç­”ç³»ç»ŸæˆåŠŸæ£€ç´¢åˆ°å†…éƒ¨èµ„æ–™å¹¶ä½œå‡ºå›ç­”\"></p><h2>æ€»ç»“æ—¶åˆ»</h2><p>æ¥å›é¡¾ä¸€ä¸‹ä¸Šé¢çš„æµç¨‹ã€‚æ­£å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å…ˆæŠŠæœ¬åœ°çŸ¥è¯†åˆ‡ç‰‡ååšEmbeddingï¼Œå­˜å‚¨åˆ°å‘é‡æ•°æ®åº“ä¸­ï¼Œç„¶åæŠŠç”¨æˆ·çš„è¾“å…¥å’Œä»å‘é‡æ•°æ®åº“ä¸­æ£€ç´¢åˆ°çš„æœ¬åœ°çŸ¥è¯†ä¼ é€’ç»™å¤§æ¨¡å‹ï¼Œæœ€ç»ˆç”Ÿæˆæ‰€æƒ³è¦çš„å›ç­”ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/24/af/249c631211275e40f3e72d05dda976af.jpg?wh=2523x1058\" alt=\"\"></p><p>æ€ä¹ˆæ ·ï¼Œä½ æ˜¯ä¸æ˜¯è§‰å¾—æ•´ä¸ªæµç¨‹ç‰¹åˆ«ç®€å•æ˜“æ‡‚ï¼Ÿ</p><p>å¯¹äº†ï¼ŒLangChain+LLMçš„é…ç½®å°±æ˜¯ä½¿åŸæœ¬å¤æ‚çš„ä¸œè¥¿å˜å¾—ç‰¹åˆ«ç®€å•ï¼Œç‰¹åˆ«æ˜“äºæ“ä½œã€‚è€Œè¿™ä¸ªä»»åŠ¡ï¼Œåœ¨å¤§æ¨¡å‹å’ŒLangChainå‡ºç°ä¹‹å‰ï¼Œè¦å®ç°èµ·æ¥å¯ä¸æ˜¯è¿™ä¹ˆç®€å•çš„ã€‚</p><p>å¦‚æœè¿™ä¸ªç¤ºä¾‹è®©ä½ äº†è§£åˆ°äº†LangChainçš„å¨åŠ›ï¼Œé‚£ä¹ˆè¿™èŠ‚è¯¾çš„ç›®æ ‡ä¹Ÿå°±å®Œæˆäº†ã€‚é™¤äº†æµç¨‹å›¾çš„å›é¡¾ï¼Œæˆ‘ä¹Ÿä¸ºä½ å‡†å¤‡äº†ä¸€ä¸ªè¯¦ç»†ç‰ˆçš„è„‘å›¾ï¼Œä½ å¯ä»¥å¯¹ç…§ç€å¤ä¹ ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/78/c2/78a4b0435639b4db8c4e024d830a2ac2.jpg?wh=2482x1434\" alt=\"\"></p><p>åœ¨åé¢å‡ èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å³å°†å¯¹LangChainçš„æ¨¡å‹ã€é“¾ã€å†…å­˜ã€ä»£ç†ç­‰ç»„ä»¶è¿›è¡Œè¯¦ç»†æ‹†è§£ï¼Œæˆ‘ä¼šå¸¦ç€ä½ å®ç°æ›´å¤šä»»åŠ¡ï¼Œå¼€å‘å‡ºæ›´å¥‡å¦™çš„åº”ç”¨ã€‚</p><h2>æ€è€ƒé¢˜</h2><ol>\n<li>è¯·ä½ ç”¨è‡ªå·±çš„è¯ç®€è¿°ä¸€ä¸‹è¿™ä¸ªåŸºäºæ–‡æ¡£çš„QAï¼ˆé—®ç­”ï¼‰ç³»ç»Ÿçš„å®ç°æµç¨‹ï¼Ÿ</li>\n<li>LangChainæ”¯æŒå¾ˆå¤šç§å‘é‡æ•°æ®åº“ï¼Œä½ èƒ½å¦ç”¨å¦ä¸€ç§å¸¸ç”¨çš„å‘é‡æ•°æ®åº“Chromaæ¥å®ç°è¿™ä¸ªä»»åŠ¡ï¼Ÿ</li>\n<li>LangChainæ”¯æŒå¾ˆå¤šç§å¤§è¯­è¨€æ¨¡å‹ï¼Œä½ èƒ½å¦ç”¨HuggingFaceç½‘ç«™æä¾›çš„å¼€æºæ¨¡å‹ <a href=\"https://huggingface.co/google/flan-t5-xl\">google/flan-t5-x1</a> ä»£æ›¿GPT-3.5å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Ÿ</li>\n</ol><p>é¢˜ç›®è¾ƒå¤šï¼Œå¯ä»¥é€‰æ‹©æ€§å°è¯•ï¼ŒæœŸå¾…åœ¨ç•™è¨€åŒºçœ‹åˆ°ä½ çš„åˆ†äº«ã€‚å¦‚æœä½ è§‰å¾—å†…å®¹å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¹Ÿæ¬¢è¿åˆ†äº«ç»™æœ‰éœ€è¦çš„æœ‹å‹ï¼æœ€åå¦‚æœä½ å­¦æœ‰ä½™åŠ›ï¼Œå¯ä»¥è¿›ä¸€æ­¥å­¦ä¹ ä¸‹é¢çš„å»¶ä¼¸é˜…è¯»ã€‚</p><h2>å»¶ä¼¸é˜…è¯»</h2><ol>\n<li>LangChainå®˜æ–¹æ–‡æ¡£å¯¹ <a href=\"https://docs.langchain.com/docs/use-cases/qa-docs\">Document QA ç³»ç»Ÿ</a>è®¾è®¡åŠå®ç°çš„è¯¦ç»†è¯´æ˜</li>\n<li>HuggingFaceå®˜ç½‘ä¸Šçš„<a href=\"https://huggingface.co/tasks/document-question-answering\">æ–‡æ¡£é—®ç­”</a>èµ„æº</li>\n<li>è®ºæ–‡<a href=\"https://arxiv.org/abs/2010.10439\">å¼€æ”¾å¼è¡¨æ ¼ä¸æ–‡æœ¬é—®é¢˜å›ç­”</a>ï¼ŒChen, W., Chang, M.-W., Schlinger, E., Wang, W., &amp; Cohen, W. W. (2021). Open Question Answering over Tables and Text. ICLR 2021.</li>\n</ol>","comments":[{"had_liked":false,"id":391324,"user_name":"é»„ä½³","can_delete":false,"product_type":"c1","uid":1809833,"ip_address":"æ–°åŠ å¡","ucode":"8EC41D2EAB0E3C","user_header":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","comment_is_top":true,"comment_ctime":1717994378,"is_pvip":false,"replies":[{"id":142322,"content":"https:&#47;&#47;github.com&#47;huangjia2019&#47;langchain-in-action - æˆ‘ç»™Repoæ”¹äº†ä¸ªå","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1718028713,"ip_address":"æ–°åŠ å¡","comment_id":391324,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"å„ä½åŒå­¦ï¼Œå¥½æ¶ˆæ¯ï¼Œæœ¬è¯¾ä»£ç æˆ‘å·²ç»æ ¹æ®LangChain 0.2ç‰ˆæœ¬è¿›è¡Œäº†æ›´æ–°ï¼Œå‡å°‘äº†warningï¼è¯·å¤§å®¶Cloneæ–°çš„Github Repoå‚è€ƒDocQA_v0.2.pyã€‚https:&#47;&#47;github.com&#47;huangjia2019&#47;langchain\n","like_count":16,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646463,"discussion_content":"https://github.com/huangjia2019/langchain-in-action - æˆ‘ç»™Repoæ”¹äº†ä¸ªå","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1718028713,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1687571,"avatar":"https://static001.geekbang.org/account/avatar/00/19/c0/13/52cd5ea8.jpg","nickname":"Ryan","note":"","ucode":"A316CBB3CAB97B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":653761,"discussion_content":"è€å¸ˆä½ å¥½ï¼Œè¯·æ•™ä¸€ä¸‹ï¼Œå­¦å®Œè¿™ä¸ªè¯¾ç¨‹ï¼Œæˆ‘èƒ½ä¸èƒ½åŸºäºå‰ç«¯ç»„ä»¶åº“æ–‡æ¡£æ­å»ºä¸€ä¸ªçŸ¥è¯†åº“ï¼Œç”Ÿæˆä»£ç ç»™æˆ‘ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1731422226,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ¹–åŒ—","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":381430,"user_name":"shatu","can_delete":false,"product_type":"c1","uid":2760732,"ip_address":"åŒ—äº¬","ucode":"27077AA35B8C22","user_header":"https://static001.geekbang.org/account/avatar/00/2a/20/1c/de379ed1.jpg","comment_is_top":false,"comment_ctime":1695199346,"is_pvip":false,"replies":[{"id":138944,"content":"shatuå…„å¼Ÿæ¥å•¦ã€‚ä¸€å¹´å¤šå‰ï¼Œä½ åœ¨ã€Šé›¶åŸºç¡€å®æˆ˜æœºå™¨å­¦ä¹ ã€‹ä¸“æ ä¸­ç»™æˆ‘ç•™è¨€ï¼Œè§£å†³äº†matplotlibç»˜å›¾æ— æ³•æ˜¾ç¤ºä¸­æ–‡å’Œè´Ÿå·çš„é—®é¢˜ã€‚æˆ‘æŠŠé‚£ä¸ªæ–¹æ¡ˆå†™è¿›äº†ã€Šæ•°æ®åˆ†æå’–å“¥åè¯ã€‹ä¹¦é‡Œé¢äº†ï¼Œåºè¨€ä¸­æˆ‘åŒæ—¶ä¹Ÿæ„Ÿè°¢äº†ä½ ã€‚\n-------------------------------------------\nhttps:&#47;&#47;time.geekbang.org&#47;column&#47;article&#47;414504 \n2.matplotlibä½œå›¾æ ‡ç­¾äº§ç”Ÿä¹±ç çš„è§£å†³æ–¹æ¡ˆ\nplt.rcParams[&#39;font.sans-serif&#39;]=[&#39;SimHei&#39;] #ç”¨æ¥æ­£å¸¸æ˜¾ç¤ºä¸­æ–‡æ ‡ç­¾\nplt.rcParams[&#39;axes.unicode_minus&#39;]=False #ç”¨æ¥æ­£å¸¸æ˜¾ç¤ºè´Ÿå·\n-------------------------------------------\nè¿™é‡Œï¼Œè°¢è°¢ä½ çš„å†æ¬¡åˆ†äº«ã€‚\n\nå¯¹äºå‡ ä¸ªé—®é¢˜ï¼š\n1.MultiQueryRetrieveråœ¨ä»£ç ä¸­çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ\nMultiQueryRetriever - è¿™æ˜¯LangChainä¸­çš„æ£€ç´¢å™¨ä¹‹ä¸€ã€‚å®ƒçš„ç‰¹ç‚¹ä½¿ç”¨è¯­è¨€æ¨¡å‹ä»ä¸åŒçš„è§†è§’ä¸ºç»™å®šçš„ç”¨æˆ·è¾“å…¥æŸ¥è¯¢ç”Ÿæˆå¤šä¸ªæŸ¥è¯¢ã€‚ç„¶åä½¿ç”¨è¿™äº›æŸ¥è¯¢æ¥æ£€ç´¢ä¸€ç»„ç›¸å…³æ–‡æ¡£ã€‚â€”â€” è¿™æ˜¯ä¸€ç§å¸¸è§ç­–ç•¥ã€‚\n2.Langchainä¸­ä¸åŒRetrieversåº”è¯¥å¦‚ä½•é€‰æ‹©ï¼Ÿâ€”â€”  Langchainä¸­Retrieverå¾ˆå¤šï¼ŒMultiQueryRetrieverã€VectorRetrieverå’ŒKeywordRetrieverç­‰ç­‰ã€‚è¯¦è§ç¬¬15è¯¾ã€‚\nä¸åŒçš„Retrieversåœ¨Langchainä¸­æœ‰ä¸åŒçš„é€‰æ‹©æ–¹å¼ã€‚é€‰æ‹©Retrieverçš„æ–¹æ³•å–å†³äºæ‚¨çš„éœ€æ±‚å’Œæ•°æ®ç±»å‹ã€‚\nå¦‚æœæ•°æ®æ˜¯åŸºäºå‘é‡çš„ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨VectorRetrieverã€‚VectorRetrieverä½¿ç”¨å‘é‡æ•°æ®åº“è¿›è¡Œæ£€ç´¢ï¼Œå¹¶æ ¹æ®æŸ¥è¯¢å‘é‡æ‰¾åˆ°æœ€ç›¸ä¼¼çš„æ–‡æ¡£ã€‚å¯ä»¥ä½¿ç”¨ä¸åŒçš„åµŒå…¥æ¨¡å‹ï¼ˆå¦‚OpenAIEmbeddingsï¼‰æ¥æ„å»ºå‘é‡æ•°æ®åº“ï¼Œå¹¶ä½¿ç”¨VectorRetrieverè¿›è¡Œæ£€ç´¢ã€‚\nå¦‚æœæ•°æ®æ˜¯åŸºäºå…³é”®è¯çš„ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨KeywordRetrieverã€‚KeywordRetrieverä½¿ç”¨å…³é”®è¯åŒ¹é…çš„æ–¹æ³•è¿›è¡Œæ£€ç´¢ã€‚å¯ä»¥å°†å…³é”®è¯ä¸æ–‡æ¡£è¿›è¡Œå…³è”ï¼Œå¹¶ä½¿ç”¨KeywordRetrieveræ ¹æ®å…³é”®è¯è¿›è¡Œæ£€ç´¢ã€‚\nå¦‚æœå¸Œæœ›è‡ªåŠ¨ç”Ÿæˆå¤šä¸ªæŸ¥è¯¢å¹¶è·å–æ›´ä¸°å¯Œçš„ç»“æœï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨MultiQueryRetrieverã€‚MultiQueryRetrieverä½¿ç”¨è¯­è¨€æ¨¡å‹ç”Ÿæˆå¤šä¸ªæŸ¥è¯¢ï¼Œå¹¶æ ¹æ®è¿™äº›æŸ¥è¯¢æ£€ç´¢ç›¸å…³æ–‡æ¡£ã€‚MultiQueryRetrieverç”Ÿæˆå¤šä¸ªæŸ¥è¯¢çš„ä¸åŒè§†è§’ï¼Œä»¥è·å–æ›´å¤šæ½œåœ¨ç›¸å…³çš„æ–‡æ¡£ã€‚\n3.å¯¹äºä¸­æ–‡è€Œè¨€ï¼Œå¦‚ä½•åˆ¤æ–­ä¸åŒæ–‡æœ¬åˆ†å‰²æ–¹æ³•çš„æ•ˆæœå·®å¼‚ï¼Ÿ\n--- ä¼¼ä¹æ²¡æœ‰ä¸€å®šä¹‹è§„ï¼Œä½ å¯ä»¥è¯•è¯•è®°ä½æ–¹æ³•ï¼Œæ‰“å°å‡ºæ¥åˆ†å‰²ç»“æœçœ‹ä¸€çœ‹ã€‚å¯èƒ½æŒ‰ç…§å¥å­æˆ–è€…æ®µè½åˆ†å§ã€‚æˆ–è€…ä¸€ä¸ªè¯­ä¹‰å—åˆ†æˆä¸€ç‰‡ï¼ˆç±»ä¼¼ä¸æ®µè½ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":1809833,"ctime":1695226066,"ip_address":"æ–°åŠ å¡","comment_id":381430,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"å­¦ä¹ å°ç»“ï¼š\næ’å‘ç‚¹ï¼š\n1.æ–‡æœ¬åˆ†å‰²é»˜è®¤é‡‡ç”¨â€œutf-8â€ï¼Œä¸­æ–‡å­—ç¬¦ä¼šå‡ºé”™ï¼Œæ”¹ä¸ºâ€œgbkâ€åè§£å†³\né—®é¢˜ç‚¹ï¼š\n1.MultiQueryRetrieveråœ¨ä»£ç ä¸­çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ\n2.Langchainä¸­ä¸åŒRetrieversåº”è¯¥å¦‚ä½•é€‰æ‹©ï¼Ÿ\n3.å¯¹äºä¸­æ–‡è€Œè¨€ï¼Œå¦‚ä½•åˆ¤æ–­ä¸åŒæ–‡æœ¬åˆ†å‰²æ–¹æ³•çš„æ•ˆæœå·®å¼‚ï¼Ÿ","like_count":20,"discussions":[{"author":{"id":2843816,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJTe4eLLCMb20O9AoXMCRdD8o4yCK8u3iaDk207z3cJicicInaBgJuNPJWicYrAWdwXS20LeC6adlQXsA/132","nickname":"Geek_62bb7d","note":"","ucode":"341C244F668C5F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":632560,"discussion_content":"å¤§ä½¬ å­—ç¬¦ç¼–ç é—®é¢˜æ€ä¹ˆè§£å†³çš„å“ˆï¼Ÿ\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1700980468,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2811365,"avatar":"","nickname":"Geek9671","note":"","ucode":"259F4143DFD2E2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":632559,"discussion_content":"1.æ–‡æœ¬åˆ†å‰²é»˜è®¤é‡‡ç”¨â€œutf-8â€ï¼Œä¸­æ–‡å­—ç¬¦ä¼šå‡ºé”™ï¼Œæ”¹ä¸ºâ€œgbkâ€åè§£å†³\n----\nè¿™ä¸ªé—®é¢˜æ€ä¹ˆè§£å†³çš„å“ˆï¼Ÿæ±‚è§£ç­”","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1700980361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":628361,"discussion_content":"shatuå…„å¼Ÿæ¥å•¦ã€‚ä¸€å¹´å¤šå‰ï¼Œä½ åœ¨ã€Šé›¶åŸºç¡€å®æˆ˜æœºå™¨å­¦ä¹ ã€‹ä¸“æ ä¸­ç»™æˆ‘ç•™è¨€ï¼Œè§£å†³äº†matplotlibç»˜å›¾æ— æ³•æ˜¾ç¤ºä¸­æ–‡å’Œè´Ÿå·çš„é—®é¢˜ã€‚æˆ‘æŠŠé‚£ä¸ªæ–¹æ¡ˆå†™è¿›äº†ã€Šæ•°æ®åˆ†æå’–å“¥åè¯ã€‹ä¹¦é‡Œé¢äº†ï¼Œåºè¨€ä¸­æˆ‘åŒæ—¶ä¹Ÿæ„Ÿè°¢äº†ä½ ã€‚\n-------------------------------------------\nhttps://time.geekbang.org/column/article/414504 \n2.matplotlibä½œå›¾æ ‡ç­¾äº§ç”Ÿä¹±ç çš„è§£å†³æ–¹æ¡ˆ\nplt.rcParams['font.sans-serif']=['SimHei'] #ç”¨æ¥æ­£å¸¸æ˜¾ç¤ºä¸­æ–‡æ ‡ç­¾\nplt.rcParams['axes.unicode_minus']=False #ç”¨æ¥æ­£å¸¸æ˜¾ç¤ºè´Ÿå·\n-------------------------------------------\nè¿™é‡Œï¼Œè°¢è°¢ä½ çš„å†æ¬¡åˆ†äº«ã€‚\n\nå¯¹äºå‡ ä¸ªé—®é¢˜ï¼š\n1.MultiQueryRetrieveråœ¨ä»£ç ä¸­çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ\nMultiQueryRetriever - è¿™æ˜¯LangChainä¸­çš„æ£€ç´¢å™¨ä¹‹ä¸€ã€‚å®ƒçš„ç‰¹ç‚¹ä½¿ç”¨è¯­è¨€æ¨¡å‹ä»ä¸åŒçš„è§†è§’ä¸ºç»™å®šçš„ç”¨æˆ·è¾“å…¥æŸ¥è¯¢ç”Ÿæˆå¤šä¸ªæŸ¥è¯¢ã€‚ç„¶åä½¿ç”¨è¿™äº›æŸ¥è¯¢æ¥æ£€ç´¢ä¸€ç»„ç›¸å…³æ–‡æ¡£ã€‚â€”â€” è¿™æ˜¯ä¸€ç§å¸¸è§ç­–ç•¥ã€‚\n2.Langchainä¸­ä¸åŒRetrieversåº”è¯¥å¦‚ä½•é€‰æ‹©ï¼Ÿâ€”â€”  Langchainä¸­Retrieverå¾ˆå¤šï¼ŒMultiQueryRetrieverã€VectorRetrieverå’ŒKeywordRetrieverç­‰ç­‰ã€‚è¯¦è§ç¬¬15è¯¾ã€‚\nä¸åŒçš„Retrieversåœ¨Langchainä¸­æœ‰ä¸åŒçš„é€‰æ‹©æ–¹å¼ã€‚é€‰æ‹©Retrieverçš„æ–¹æ³•å–å†³äºæ‚¨çš„éœ€æ±‚å’Œæ•°æ®ç±»å‹ã€‚\nå¦‚æœæ•°æ®æ˜¯åŸºäºå‘é‡çš„ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨VectorRetrieverã€‚VectorRetrieverä½¿ç”¨å‘é‡æ•°æ®åº“è¿›è¡Œæ£€ç´¢ï¼Œå¹¶æ ¹æ®æŸ¥è¯¢å‘é‡æ‰¾åˆ°æœ€ç›¸ä¼¼çš„æ–‡æ¡£ã€‚å¯ä»¥ä½¿ç”¨ä¸åŒçš„åµŒå…¥æ¨¡å‹ï¼ˆå¦‚OpenAIEmbeddingsï¼‰æ¥æ„å»ºå‘é‡æ•°æ®åº“ï¼Œå¹¶ä½¿ç”¨VectorRetrieverè¿›è¡Œæ£€ç´¢ã€‚\nå¦‚æœæ•°æ®æ˜¯åŸºäºå…³é”®è¯çš„ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨KeywordRetrieverã€‚KeywordRetrieverä½¿ç”¨å…³é”®è¯åŒ¹é…çš„æ–¹æ³•è¿›è¡Œæ£€ç´¢ã€‚å¯ä»¥å°†å…³é”®è¯ä¸æ–‡æ¡£è¿›è¡Œå…³è”ï¼Œå¹¶ä½¿ç”¨KeywordRetrieveræ ¹æ®å…³é”®è¯è¿›è¡Œæ£€ç´¢ã€‚\nå¦‚æœå¸Œæœ›è‡ªåŠ¨ç”Ÿæˆå¤šä¸ªæŸ¥è¯¢å¹¶è·å–æ›´ä¸°å¯Œçš„ç»“æœï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨MultiQueryRetrieverã€‚MultiQueryRetrieverä½¿ç”¨è¯­è¨€æ¨¡å‹ç”Ÿæˆå¤šä¸ªæŸ¥è¯¢ï¼Œå¹¶æ ¹æ®è¿™äº›æŸ¥è¯¢æ£€ç´¢ç›¸å…³æ–‡æ¡£ã€‚MultiQueryRetrieverç”Ÿæˆå¤šä¸ªæŸ¥è¯¢çš„ä¸åŒè§†è§’ï¼Œä»¥è·å–æ›´å¤šæ½œåœ¨ç›¸å…³çš„æ–‡æ¡£ã€‚\n3.å¯¹äºä¸­æ–‡è€Œè¨€ï¼Œå¦‚ä½•åˆ¤æ–­ä¸åŒæ–‡æœ¬åˆ†å‰²æ–¹æ³•çš„æ•ˆæœå·®å¼‚ï¼Ÿ\n--- ä¼¼ä¹æ²¡æœ‰ä¸€å®šä¹‹è§„ï¼Œä½ å¯ä»¥è¯•è¯•è®°ä½æ–¹æ³•ï¼Œæ‰“å°å‡ºæ¥åˆ†å‰²ç»“æœçœ‹ä¸€çœ‹ã€‚å¯èƒ½æŒ‰ç…§å¥å­æˆ–è€…æ®µè½åˆ†å§ã€‚æˆ–è€…ä¸€ä¸ªè¯­ä¹‰å—åˆ†æˆä¸€ç‰‡ï¼ˆç±»ä¼¼ä¸æ®µè½ï¼‰ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1695226066,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":381234,"user_name":"Geek_ebb87d","can_delete":false,"product_type":"c1","uid":3622117,"ip_address":"å››å·","ucode":"4558A3B2862A4C","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/h5jfedUT5Sv7ibzM8WNCxoO9c136UUXDroaib2BUVILcZVp0FFBiaDPEbzPVv1J94LhR4oianox3wgyWpUBbtNJs0A/132","comment_is_top":false,"comment_ctime":1694872198,"is_pvip":false,"replies":[{"id":138873,"content":"è¡¥å……å†…å®¹ï¼šéšç€LangChainæ–‡æ¡£çš„å‘å±•ï¼Œæœ‰äº†ä¸€äº›è¯»è¡¨ç­–ç•¥ï¼ŒåŒ…æ‹¬ä½¿ç”¨Unstrutured åº“ æ‘˜å‡ºè¡¨æ ¼ ç­‰ç­‰ åŒ…æ‹¬å¤šæ¨¡æ€çš„ä¸€äº›å¤„ç†ã€‚\n\nhttps:&#47;&#47;github.com&#47;langchain-ai&#47;langchain&#47;blob&#47;master&#47;cookbook&#47;Semi_Structured_RAG.ipynb\n\nè¿™äº›æ–°å†…å®¹ï¼Œå€¼å¾—æ€»ç»“æˆä¸€ä¸ªæ–°ä¸“æ ï¼ï¼ï¼æˆ‘è¦å‘å¥‹å­¦ä¹ äº†ã€‚\n\nçš„ç¡®ï¼Œè¿™æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚éš¾åº¦åœ¨äºè¡¨æ ¼é€šå¸¸åŒ…å«ç»“æ„åŒ–ä¿¡æ¯ï¼Œä¸ä¼ ç»Ÿçš„è¿ç»­æ–‡æœ¬è¡¨ç¤ºæ–¹å¼ä¸åŒã€‚\n\né‚£ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆçš„åšä¸€äº›å°è¯•å“ˆï¼š\nç¬¬ä¸€ä¸ªæ˜¯è¡¨æ ¼æ•°æ®çš„é¢„å¤„ç†ï¼šå°†è¡¨æ ¼æ•°æ®è½¬æ¢ä¸ºè¿ç»­æ–‡æœ¬æè¿°ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªè¡¨æ ¼ä¸­çš„æ¡ç›®&quot;å§“å: å¼ ä¸‰, å¹´é¾„: 25&quot;å¯ä»¥è¢«è½¬åŒ–ä¸º&quot;å¼ ä¸‰çš„å¹´é¾„æ˜¯25å²&quot;ã€‚è¿™æ ·å°±å°†è¡¨æ ¼å†…å®¹è½¬æ¢ä¸ºæ¨¡å‹æ›´å®¹æ˜“ç†è§£çš„æ ¼å¼ã€‚\n\nç¬¬äºŒä¸ªæ€è·¯æ˜¯èåˆä¸€äº›ä¸“é—¨åŸºäºè¡¨æ ¼æ•°æ®è€Œè®­ç»ƒçš„å¤§æ¨¡å‹æ¡†æ¶ï¼Œæ¯”å¦‚è¯´PyTorch Tabularæˆ–è€…TabNetï¼Œå‚è€ƒï¼š\nhttps:&#47;&#47;paperswithcode.com&#47;paper&#47;pytorch-tabular-a-framework-for-deep-learning\nhttps:&#47;&#47;paperswithcode.com&#47;method&#47;tabnet\n\nç¬¬ä¸‰ä¸ªæ€è·¯ï¼Œæ˜¯å¦å¯ä»¥ç»“åˆçŸ¥è¯†å›¾è°±ã€‚çŸ¥è¯†å›¾è°±æ˜¯è¡¨ç¤ºçŸ¥è¯†çš„å›¾å½¢ç»“æ„ã€‚é€šè¿‡å°†è¡¨æ ¼æ•°æ®è½¬æ¢ä¸ºçŸ¥è¯†å›¾è°±ä¸­çš„å®ä½“å’Œå…³ç³»ï¼Œæ˜¯å¦å¯ä»¥ä½¿ç”¨å›¾ç¥ç»ç½‘ç»œæˆ–å…¶ä»–æŠ€æœ¯æ¥æŸ¥è¯¢å’Œå¤„ç†æ•°æ®ã€‚---- è§†ä½ çš„å…·ä½“è¡¨æ ¼æ˜¯ä»€ä¹ˆè¡¨æ ¼è€Œå®šã€‚\n\nç¬¬4ä¸ªæ€è·¯ï¼šåœ¨RAGç³»ç»Ÿä¸­ï¼Œå¢å¼ºæ£€ç´¢ç»„ä»¶çš„èƒ½åŠ›ä»¥æ›´å¥½åœ°æ£€ç´¢è¡¨æ ¼æ•°æ®ã€‚è¿™å¯èƒ½æ¶‰åŠå¼€å‘é’ˆå¯¹è¡¨æ ¼ç»“æ„çš„ç‰¹å®šæ£€ç´¢ç­–ç•¥ã€‚â€”â€”æ¯”å¦‚è¯´ç”Ÿæˆç´¢å¼•æ—¶ï¼ŒåŠ å…¥ä¸€äº›Meta dataã€‚\n\næ€»è€Œè¨€ä¹‹ï¼Œæˆ‘æ„Ÿè§‰å¦‚æœä½ çš„è¡¨æ ¼ç›´æ¥åµŒå…¥åæ•ˆæœä¸å¥½çš„è¯ï¼Œè€ƒè™‘éœ€è¦å¯¹è¡¨æ ¼æ•°æ®åšä¸€äº›ç‰¹å¾å·¥ç¨‹ï¼Œå†åµŒå…¥æˆ–è€…å­˜å‚¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":1809833,"ctime":1694963749,"ip_address":"æ–°åŠ å¡","comment_id":381234,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"å…¶å®ä¸ä»…å›¾ç‰‡ï¼Œæ–‡æ¡£ä¸­å¦‚æœæœ‰è¡¨æ ¼ï¼Œå¤„ç†é—®ç­”çš„æ•ˆæœä¹Ÿä¸å¥½ï¼Œè¡¨æ ¼æ–¹é¢è€å¸ˆæ˜¯å¦æœ‰æ€è·¯ï¼Ÿ\n","like_count":15,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":628116,"discussion_content":"è¡¥å……å†…å®¹ï¼šéšç€LangChainæ–‡æ¡£çš„å‘å±•ï¼Œæœ‰äº†ä¸€äº›è¯»è¡¨ç­–ç•¥ï¼ŒåŒ…æ‹¬ä½¿ç”¨Unstrutured åº“ æ‘˜å‡ºè¡¨æ ¼ ç­‰ç­‰ åŒ…æ‹¬å¤šæ¨¡æ€çš„ä¸€äº›å¤„ç†ã€‚\n\nhttps://github.com/langchain-ai/langchain/blob/master/cookbook/Semi_Structured_RAG.ipynb\n\nè¿™äº›æ–°å†…å®¹ï¼Œå€¼å¾—æ€»ç»“æˆä¸€ä¸ªæ–°ä¸“æ ï¼ï¼ï¼æˆ‘è¦å‘å¥‹å­¦ä¹ äº†ã€‚\n\nçš„ç¡®ï¼Œè¿™æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚éš¾åº¦åœ¨äºè¡¨æ ¼é€šå¸¸åŒ…å«ç»“æ„åŒ–ä¿¡æ¯ï¼Œä¸ä¼ ç»Ÿçš„è¿ç»­æ–‡æœ¬è¡¨ç¤ºæ–¹å¼ä¸åŒã€‚\n\né‚£ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆçš„åšä¸€äº›å°è¯•å“ˆï¼š\nç¬¬ä¸€ä¸ªæ˜¯è¡¨æ ¼æ•°æ®çš„é¢„å¤„ç†ï¼šå°†è¡¨æ ¼æ•°æ®è½¬æ¢ä¸ºè¿ç»­æ–‡æœ¬æè¿°ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªè¡¨æ ¼ä¸­çš„æ¡ç›®\"å§“å: å¼ ä¸‰, å¹´é¾„: 25\"å¯ä»¥è¢«è½¬åŒ–ä¸º\"å¼ ä¸‰çš„å¹´é¾„æ˜¯25å²\"ã€‚è¿™æ ·å°±å°†è¡¨æ ¼å†…å®¹è½¬æ¢ä¸ºæ¨¡å‹æ›´å®¹æ˜“ç†è§£çš„æ ¼å¼ã€‚\n\nç¬¬äºŒä¸ªæ€è·¯æ˜¯èåˆä¸€äº›ä¸“é—¨åŸºäºè¡¨æ ¼æ•°æ®è€Œè®­ç»ƒçš„å¤§æ¨¡å‹æ¡†æ¶ï¼Œæ¯”å¦‚è¯´PyTorch Tabularæˆ–è€…TabNetï¼Œå‚è€ƒï¼š\nhttps://paperswithcode.com/paper/pytorch-tabular-a-framework-for-deep-learning\nhttps://paperswithcode.com/method/tabnet\n\nç¬¬ä¸‰ä¸ªæ€è·¯ï¼Œæ˜¯å¦å¯ä»¥ç»“åˆçŸ¥è¯†å›¾è°±ã€‚çŸ¥è¯†å›¾è°±æ˜¯è¡¨ç¤ºçŸ¥è¯†çš„å›¾å½¢ç»“æ„ã€‚é€šè¿‡å°†è¡¨æ ¼æ•°æ®è½¬æ¢ä¸ºçŸ¥è¯†å›¾è°±ä¸­çš„å®ä½“å’Œå…³ç³»ï¼Œæ˜¯å¦å¯ä»¥ä½¿ç”¨å›¾ç¥ç»ç½‘ç»œæˆ–å…¶ä»–æŠ€æœ¯æ¥æŸ¥è¯¢å’Œå¤„ç†æ•°æ®ã€‚---- è§†ä½ çš„å…·ä½“è¡¨æ ¼æ˜¯ä»€ä¹ˆè¡¨æ ¼è€Œå®šã€‚\n\nç¬¬4ä¸ªæ€è·¯ï¼šåœ¨RAGç³»ç»Ÿä¸­ï¼Œå¢å¼ºæ£€ç´¢ç»„ä»¶çš„èƒ½åŠ›ä»¥æ›´å¥½åœ°æ£€ç´¢è¡¨æ ¼æ•°æ®ã€‚è¿™å¯èƒ½æ¶‰åŠå¼€å‘é’ˆå¯¹è¡¨æ ¼ç»“æ„çš„ç‰¹å®šæ£€ç´¢ç­–ç•¥ã€‚â€”â€”æ¯”å¦‚è¯´ç”Ÿæˆç´¢å¼•æ—¶ï¼ŒåŠ å…¥ä¸€äº›Meta dataã€‚\n\næ€»è€Œè¨€ä¹‹ï¼Œæˆ‘æ„Ÿè§‰å¦‚æœä½ çš„è¡¨æ ¼ç›´æ¥åµŒå…¥åæ•ˆæœä¸å¥½çš„è¯ï¼Œè€ƒè™‘éœ€è¦å¯¹è¡¨æ ¼æ•°æ®åšä¸€äº›ç‰¹å¾å·¥ç¨‹ï¼Œå†åµŒå…¥æˆ–è€…å­˜å‚¨ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1694963749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1152412,"avatar":"https://static001.geekbang.org/account/avatar/00/11/95/9c/35f7bdbf.jpg","nickname":"å­™é¹å®‡","note":"","ucode":"DF4A813EA4DDA9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631193,"discussion_content":"æˆ‘è§‰å¾—ç»“æ„åŒ–çš„è¡¨æ ¼åè€Œä¸æ˜¯é—®é¢˜ å¯ä»¥ç”¨markdownçš„è¡¨æ ¼è¡¨ç¤ºæˆ–è€…jsonæ¥è¡¨ç¤º æœ‰çš„æ—¶å€™pdfæ–‡æ¡£çš„è¡¨æ ¼æå–å‡ºæ¥æ˜¯ä¹±çš„ ä»–æ˜¯è¢«å½“ä½œä¸€ä¸ªä¸ªæ–‡æœ¬å—çš„é¡ºåºè¯»å‡ºæ¥çš„ è¿™æ ·è¡¨æ ¼æœ¬èº«çš„ç»“æ„ä¿¡æ¯å°±å®Œå…¨ä¸¢å¤±äº† è¿™æ‰æ˜¯æœ€å¯æ€•çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699380183,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1312694,"avatar":"https://static001.geekbang.org/account/avatar/00/14/07/b6/e213fc11.jpg","nickname":"å¥¹ã®ä»–","note":"","ucode":"A61CEC365D782F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1152412,"avatar":"https://static001.geekbang.org/account/avatar/00/11/95/9c/35f7bdbf.jpg","nickname":"å­™é¹å®‡","note":"","ucode":"DF4A813EA4DDA9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631888,"discussion_content":"å¦‚æœæ˜¯Mangoä¸­çš„æ•°æ®ï¼Œæ•°æ®é‡æ¯”è¾ƒå¤§çš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•å¿«é€Ÿæ£€ç´¢å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700102558,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":631193,"ip_address":"æ±Ÿè‹","group_id":0},"score":631888,"extra":""}]}]},{"had_liked":false,"id":380988,"user_name":"Geek_439927","can_delete":false,"product_type":"c1","uid":2935783,"ip_address":"ä¸Šæµ·","ucode":"F7A1B76BD33CFA","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKDZx5XkVZFrlIxDEhWiatEmLLDtD7M5B35rJacp6qMUpdXDZpvpw3o7bCPqcUCWUWXM8q7PRelOZg/132","comment_is_top":false,"comment_ctime":1694532150,"is_pvip":false,"replies":[{"id":138791,"content":"åŒå­¦ï¼Œè°¢è°¢ä½ æå‡ºçš„å¥½é—®é¢˜ã€‚\nLangChainä¸­æ˜¯æœ‰æ–‡ä»¶æ£€ç´¢è¿™ä¸ªæ¨¡å—çš„ã€‚ä½ çš„ç³»ç»Ÿæ“ä½œæ‰‹å†Œä¸­çš„æ–‡æœ¬éƒ¨åˆ†å¯ä»¥è¢«LangChainè½½å…¥ï¼Œè¿›è¡ŒChunkï¼Œç„¶åç”¨å¤§æ¨¡å‹Embeddingåå­˜å…¥å‘é‡æ•°æ®åº“ã€‚åé¢ä½ å¯ä»¥æ£€ç´¢å®ƒä»¬ã€‚\nä½†æ˜¯ï¼ŒLangChainæˆ–è€…è¯´æ–‡æœ¬ç±»å¤§æ¨¡å‹ç›®å‰è¿˜ä¸æ”¯æŒå¤šæ¨¡æ€çš„åŠŸèƒ½ï¼Œè¿˜ä¸èƒ½è¯»å›¾ï¼Œæ­¤å¤„ï¼Œä½ éœ€è¦åœ¨ä½ çš„åº”ç”¨ä¸­å¼•å…¥å¤šæ¨¡æ€çš„å¤§æ¨¡å‹ï¼Œæ¯”å¦‚ç±»ä¼¼ä¸CLIPè¿™ç§å›¾æ–‡æ¨¡å‹ï¼ˆhttps:&#47;&#47;github.com&#47;openai&#47;CLIP - å›¾æ–‡å¯¹æ¯”å­¦ä¹ æ–¹æ³•ï¼‰ï¼Œæƒ³åŠæ³•æŠŠå›¾æ–‡çš„ç´¢å¼•é“¾æ¥èµ·æ¥ã€‚ç„¶åï¼Œåœ¨èƒ½å¤Ÿåˆ©ç”¨LangChainï¼Œåœ¨æŸ¥è¯¢åˆ°æ–‡æ¡£æ—¶ï¼ŒæŠŠç›¸å…³çš„å›¾ä¹ŸåŒæ—¶æ˜¾ç¤ºå‡ºæ¥ã€‚\nè¦å®Œæˆä½ çš„éœ€æ±‚ï¼Œä¸æ˜¯ä¸€ä»¶å¾ˆè½»æ¾çš„å·¥ä½œï¼Œå¸Œæœ›ä½ èƒ½å¤ŸæŠŠå®ƒå¼„å‡ºæ¥ï¼Œç„¶åè·Ÿå¤§å®¶åˆ†äº«æ›´å…·ä½“åœ°ç»†èŠ‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1694626541,"ip_address":"æ–°åŠ å¡","comment_id":380988,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³é€šè¿‡Langchain +å¼€æºå¤§æ¨¡å‹æ­å»ºä¸€ä¸ªç§æœ‰åŒ–çš„çŸ¥è¯†åº“GPTï¼Œæ–‡ä»¶å†…å®¹æ˜¯æ–‡å­—+å›¾ç‰‡ï¼Œå›¾ç‰‡çš„å†…å®¹æ²¡æœ‰æ–‡å­—ï¼Œä½ å¯ä»¥æƒ³è±¡æˆè¿™ä¸ªæ–‡ä»¶æ˜¯ä¸€ä¸ªç³»ç»Ÿæ“ä½œæ‰‹å†Œï¼Œæ‰‹å†Œé‡Œé¢æœ‰ä¸€äº›æ–‡å­—æè¿°ï¼Œä»¥åŠä¸€æ­¥ä¸€æ­¥åœ°æ“ä½œæˆªå›¾ï¼Œè¿™ç§æ ¼å¼çš„æ–‡æ¡£å¯è¡Œå—ï¼Œåœ¨LLMç»™å‡ºçš„å›ç­”ä¸­ï¼Œå¸Œæœ›èƒ½å¤Ÿæ˜¾ç¤ºè¿™äº›å›¾ç‰‡","like_count":10,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627874,"discussion_content":"åŒå­¦ï¼Œè°¢è°¢ä½ æå‡ºçš„å¥½é—®é¢˜ã€‚\nLangChainä¸­æ˜¯æœ‰æ–‡ä»¶æ£€ç´¢è¿™ä¸ªæ¨¡å—çš„ã€‚ä½ çš„ç³»ç»Ÿæ“ä½œæ‰‹å†Œä¸­çš„æ–‡æœ¬éƒ¨åˆ†å¯ä»¥è¢«LangChainè½½å…¥ï¼Œè¿›è¡ŒChunkï¼Œç„¶åç”¨å¤§æ¨¡å‹Embeddingåå­˜å…¥å‘é‡æ•°æ®åº“ã€‚åé¢ä½ å¯ä»¥æ£€ç´¢å®ƒä»¬ã€‚\nä½†æ˜¯ï¼ŒLangChainæˆ–è€…è¯´æ–‡æœ¬ç±»å¤§æ¨¡å‹ç›®å‰è¿˜ä¸æ”¯æŒå¤šæ¨¡æ€çš„åŠŸèƒ½ï¼Œè¿˜ä¸èƒ½è¯»å›¾ï¼Œæ­¤å¤„ï¼Œä½ éœ€è¦åœ¨ä½ çš„åº”ç”¨ä¸­å¼•å…¥å¤šæ¨¡æ€çš„å¤§æ¨¡å‹ï¼Œæ¯”å¦‚ç±»ä¼¼ä¸CLIPè¿™ç§å›¾æ–‡æ¨¡å‹ï¼ˆhttps://github.com/openai/CLIP - å›¾æ–‡å¯¹æ¯”å­¦ä¹ æ–¹æ³•ï¼‰ï¼Œæƒ³åŠæ³•æŠŠå›¾æ–‡çš„ç´¢å¼•é“¾æ¥èµ·æ¥ã€‚ç„¶åï¼Œåœ¨èƒ½å¤Ÿåˆ©ç”¨LangChainï¼Œåœ¨æŸ¥è¯¢åˆ°æ–‡æ¡£æ—¶ï¼ŒæŠŠç›¸å…³çš„å›¾ä¹ŸåŒæ—¶æ˜¾ç¤ºå‡ºæ¥ã€‚\nè¦å®Œæˆä½ çš„éœ€æ±‚ï¼Œä¸æ˜¯ä¸€ä»¶å¾ˆè½»æ¾çš„å·¥ä½œï¼Œå¸Œæœ›ä½ èƒ½å¤ŸæŠŠå®ƒå¼„å‡ºæ¥ï¼Œç„¶åè·Ÿå¤§å®¶åˆ†äº«æ›´å…·ä½“åœ°ç»†èŠ‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694626541,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1124105,"avatar":"https://static001.geekbang.org/account/avatar/00/11/27/09/5c873257.jpg","nickname":"å°å±±ç¾Š","note":"","ucode":"FC1F6E8C162FD5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630367,"discussion_content":"æˆ‘ä¹°è¿™ä¸ªè¯¾ï¼Œå°±æ˜¯æ¥å­¦è¿™ä¸ªå›¾ç‰‡çš„ï¼Œç»“æœï¼Œæœ‰äº›å¤±æœ›å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698371976,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":380917,"user_name":"iLeGeND","can_delete":false,"product_type":"c1","uid":1055475,"ip_address":"åŒ—äº¬","ucode":"4055A628A6E97C","user_header":"https://static001.geekbang.org/account/avatar/00/10/1a/f3/41d5ba7d.jpg","comment_is_top":false,"comment_ctime":1694440919,"is_pvip":false,"replies":[{"id":138738,"content":"æœ‰ï¼åŒå­¦å»æˆ‘çš„github, https:&#47;&#47;github.com&#47;huangjia2019 , æ‰¾LangChainï¼Œæˆ‘ä¼šæŠŠä»£ç é€æ­¥éƒ½ä¸Šä¼ ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1694485448,"ip_address":"æ–°åŠ å¡","comment_id":380917,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"è€å¸ˆèƒ½ä¸èƒ½æä¾›ä¸€ä¸‹æ–‡ç« ä¸­ä»£ç å®Œæ•´æºç ","like_count":9,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627732,"discussion_content":"æœ‰ï¼åŒå­¦å»æˆ‘çš„github, https://github.com/huangjia2019 , æ‰¾LangChainï¼Œæˆ‘ä¼šæŠŠä»£ç é€æ­¥éƒ½ä¸Šä¼ ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694485448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":380915,"user_name":"iLeGeND","can_delete":false,"product_type":"c1","uid":1055475,"ip_address":"åŒ—äº¬","ucode":"4055A628A6E97C","user_header":"https://static001.geekbang.org/account/avatar/00/10/1a/f3/41d5ba7d.jpg","comment_is_top":false,"comment_ctime":1694440469,"is_pvip":false,"replies":[{"id":138740,"content":"è°¢è°¢åŒå­¦é¼“åŠ±ï¼Œä¹Ÿå¸Œæœ›å¤§å®¶å¤šå¤šåˆ†äº«è‡ªå·±ä½¿ç”¨æ—¶å‘ç°çš„ç”¨ä¾‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1694485592,"ip_address":"æ–°åŠ å¡","comment_id":380915,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"æ·±å…¥æµ…å‡ºï¼Œç›¸å½“æ¸…æ™°","like_count":5,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627734,"discussion_content":"è°¢è°¢åŒå­¦é¼“åŠ±ï¼Œä¹Ÿå¸Œæœ›å¤§å®¶å¤šå¤šåˆ†äº«è‡ªå·±ä½¿ç”¨æ—¶å‘ç°çš„ç”¨ä¾‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694485592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":381128,"user_name":"é˜¿æ–¯è’‚èŠ¬","can_delete":false,"product_type":"c1","uid":1024164,"ip_address":"å¹¿ä¸œ","ucode":"61D5E3BDA4EBC5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a0/a4/b060c723.jpg","comment_is_top":false,"comment_ctime":1694703196,"is_pvip":false,"replies":[{"id":138822,"content":"å“ˆå“ˆï¼Œè¿™è‚¿ä¹ˆèƒ½æ˜¯å°æœ‰æˆå°±æ„Ÿå‘¢ï¼è¿™æ˜¯å¤§æœ‰æˆå°±æ„Ÿã€‚\næœ¬è¯¾ä»£ç ï¼Œæ¯ä¸ªå°æœ‹å‹éƒ½åº”è¯¥äº²æ‰‹è·‘ä¸€éã€‚\nğŸ˜ ğŸ˜† ğŸ˜… ğŸ˜‚ ğŸ¤£","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1694705813,"ip_address":"æ–°åŠ å¡","comment_id":381128,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"è·Ÿç€è€å¸ˆä»£ç æ•²ä¸€éï¼Œè§£å†³è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ï¼ŒæˆåŠŸrunèµ·æ¥ä¹‹åï¼Œè¿˜æ˜¯å°æœ‰æˆå°±æ„Ÿçš„ğŸ˜","like_count":4,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627956,"discussion_content":"å“ˆå“ˆï¼Œè¿™è‚¿ä¹ˆèƒ½æ˜¯å°æœ‰æˆå°±æ„Ÿå‘¢ï¼è¿™æ˜¯å¤§æœ‰æˆå°±æ„Ÿã€‚\næœ¬è¯¾ä»£ç ï¼Œæ¯ä¸ªå°æœ‹å‹éƒ½åº”è¯¥äº²æ‰‹è·‘ä¸€éã€‚\nğŸ˜ ğŸ˜† ğŸ˜… ğŸ˜‚ ğŸ¤£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694705813,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1024164,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a0/a4/b060c723.jpg","nickname":"é˜¿æ–¯è’‚èŠ¬","note":"","ucode":"61D5E3BDA4EBC5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":628049,"discussion_content":"å¤§æˆå°±ï¼æ„Ÿè§‰æ‰‹å†™äº†ä¸€ä¸ªChatPDFï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694788625,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":381046,"user_name":"Realm","can_delete":false,"product_type":"c1","uid":1081299,"ip_address":"æµ™æ±Ÿ","ucode":"30CBEBE619D1A2","user_header":"https://static001.geekbang.org/account/avatar/00/10/7f/d3/b5896293.jpg","comment_is_top":false,"comment_ctime":1694607504,"is_pvip":true,"replies":[{"id":138792,"content":"å…·ä½“æƒ…å†µå…·ä½“åˆ†æï¼Œç›®å‰æˆ‘ä»¬æ˜¯æŠŠå®ƒä¿å­˜åœ¨å†…å­˜ä¸­çš„ï¼Œå› ä¸ºè¿™æ ·æ£€ç´¢èµ·æ¥æ¯”è¾ƒå¿«ã€‚å½“ç„¶ä½ ä¹Ÿå®Œå…¨å¯ä»¥å°†å‘é‡æ•°æ®å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œæ¯”å¦‚ä½¿ç”¨Qdrantï¼ŒFaissç­‰ç³»ç»Ÿï¼Œéƒ½ä¸ºå‘é‡æ•°æ®åˆ›å»ºé«˜æ•ˆçš„ç´¢å¼•ï¼Œä»è€Œå®ç°å¿«é€Ÿçš„è¿‘ä¼¼æŸ¥è¯¢ã€‚è¿™æ ·ä½ å°±ä¸ç”¨æ¯æ¬¡éƒ½Embeddingäº†ã€‚\n\næ··åˆæ–¹æ¡ˆ: åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½å¸Œæœ›ç»“åˆå†…å­˜å’Œç£ç›˜å­˜å‚¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1694627096,"ip_address":"æ–°åŠ å¡","comment_id":381046,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"è¿™é‡Œåˆ‡å‰²æ–‡æœ¬ï¼Œç”Ÿæˆçš„å‘é‡æ•°æ®åº“ï¼Œä¿å­˜åœ¨å†…å­˜ä¸­å—ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627875,"discussion_content":"å…·ä½“æƒ…å†µå…·ä½“åˆ†æï¼Œç›®å‰æˆ‘ä»¬æ˜¯æŠŠå®ƒä¿å­˜åœ¨å†…å­˜ä¸­çš„ï¼Œå› ä¸ºè¿™æ ·æ£€ç´¢èµ·æ¥æ¯”è¾ƒå¿«ã€‚å½“ç„¶ä½ ä¹Ÿå®Œå…¨å¯ä»¥å°†å‘é‡æ•°æ®å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œæ¯”å¦‚ä½¿ç”¨Qdrantï¼ŒFaissç­‰ç³»ç»Ÿï¼Œéƒ½ä¸ºå‘é‡æ•°æ®åˆ›å»ºé«˜æ•ˆçš„ç´¢å¼•ï¼Œä»è€Œå®ç°å¿«é€Ÿçš„è¿‘ä¼¼æŸ¥è¯¢ã€‚è¿™æ ·ä½ å°±ä¸ç”¨æ¯æ¬¡éƒ½Embeddingäº†ã€‚\n\næ··åˆæ–¹æ¡ˆ: åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½å¸Œæœ›ç»“åˆå†…å­˜å’Œç£ç›˜å­˜å‚¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694627096,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2189310,"avatar":"https://static001.geekbang.org/account/avatar/00/21/67/fe/5d17661a.jpg","nickname":"æ‚Ÿå°˜","note":"","ucode":"4E7E854340D3A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631135,"discussion_content":"ç”Ÿæˆçš„å‘é‡æ•°æ®ï¼Œå¦‚æœä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå ç”¨çš„å†…å­˜ä¼šä¸ä¼šå¾ˆå¤§ï¼Ÿæ‹¿æ˜“é€Ÿé²œèŠ±è¿™ä¸ªä¸ºä¾‹ï¼Œå¤§æ¦‚å ç”¨å¤šå°‘å†…å­˜ï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699326728,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1081299,"avatar":"https://static001.geekbang.org/account/avatar/00/10/7f/d3/b5896293.jpg","nickname":"Realm","note":"","ucode":"30CBEBE619D1A2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2189310,"avatar":"https://static001.geekbang.org/account/avatar/00/21/67/fe/5d17661a.jpg","nickname":"æ‚Ÿå°˜","note":"","ucode":"4E7E854340D3A4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631452,"discussion_content":"ä¹Ÿå¯ä»¥ä½¿ç”¨çŸ¢é‡æ•°æ®åº“ï¼Œé€šè¿‡ç½‘ç»œè®¿é—®æ•°æ®åº“.","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1699572303,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":631135,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":631452,"extra":""}]}]},{"had_liked":false,"id":385820,"user_name":"æ¸…é£æ˜æœˆ","can_delete":false,"product_type":"c1","uid":1086309,"ip_address":"ä¸Šæµ·","ucode":"37E01E81F9A353","user_header":"https://static001.geekbang.org/account/avatar/00/10/93/65/6016b046.jpg","comment_is_top":false,"comment_ctime":1703467376,"is_pvip":false,"replies":[{"id":140675,"content":"ä½¿ç”¨LangChainçš„ç´¢å¼•API - https:&#47;&#47;python.langchain.com&#47;docs&#47;modules&#47;data_connection&#47;indexing","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1703842022,"ip_address":"ç‘å£«","comment_id":385820,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"å¦‚æœæ–‡æ¡£æœ‰æ›´æ–°æ€ä¹ˆæ›´æ–°ç´¢å¼•","like_count":3,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":634727,"discussion_content":"ä½¿ç”¨LangChainçš„ç´¢å¼•API - https://python.langchain.com/docs/modules/data_connection/indexing","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1703842023,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382733,"user_name":"æ•¬","can_delete":false,"product_type":"c1","uid":1344618,"ip_address":"ä¸Šæµ·","ucode":"56537F4C78E604","user_header":"https://static001.geekbang.org/account/avatar/00/14/84/6a/8599e17f.jpg","comment_is_top":false,"comment_ctime":1697904612,"is_pvip":false,"replies":[{"id":139458,"content":"å¥½ï¼è°¢è°¢åŒå­¦çš„è¿™ä¸ªInputã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1698143136,"ip_address":"ç‘å£«","comment_id":382733,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100617601,"comment_content":"æˆ‘ç”¨OpenAIEmbeddingsæŸ¥è¯¢å‡ºæ¥çš„ç»“æœä¸å¯¹ï¼Œåæ¥è¯¥ç”¨text2vec-base-chineseæ‰æ­£å¸¸ã€‚ ","like_count":3,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630164,"discussion_content":"å¥½ï¼è°¢è°¢åŒå­¦çš„è¿™ä¸ªInputã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698143137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1213258,"avatar":"https://static001.geekbang.org/account/avatar/00/12/83/4a/3e08427e.jpg","nickname":"è¯å¸ˆ","note":"","ucode":"14BB054A38A2F0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":648986,"discussion_content":"è¯·é—®æ˜¯https://huggingface.co/shibing624/text2vec-base-chineseä¹ˆï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1722507376,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å››å·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":381290,"user_name":"å—é£åŒ—å··","can_delete":false,"product_type":"c1","uid":2795450,"ip_address":"åŒ—äº¬","ucode":"F5A7A45537D249","user_header":"https://static001.geekbang.org/account/avatar/00/2a/a7/ba/66b4aebe.jpg","comment_is_top":false,"comment_ctime":1694999834,"is_pvip":false,"replies":[{"id":138888,"content":"æ–‡æœ¬åˆ‡å‰²ç²’åº¦ä¹Ÿæ˜¯RAGé‡Œé¢çš„ä¸€ä¸ªå…³é”®ç‚¹ã€‚å¤ªç»†å’Œå¤ªç²—éƒ½ä¸å¥½ã€‚\nä½†æ˜¯è¿™é‡Œä¹Ÿæœ‰ä¸€ä¸ªå¤©ç„¶é™åˆ¶ï¼Œå°±æ˜¯ï¼Œå†ç²—ï¼Œéƒ½ä¸èƒ½è¶…è¿‡4Kï¼Œå¯¹å§ã€‚å› ä¸ºå¤§æ¨¡å‹å¯èƒ½éƒ½åƒä¸è¿›å»é‚£ä¹ˆå¤§çš„Tokenæ•°ï¼Œç›®å‰çš„å¤§æ¨¡å‹ä¸€æ¬¡èƒ½å¤ŸPassè¿›å»çš„Tokenæ•°é‡æ˜¯æœ‰è¿™ä¸ªé™åˆ¶çš„ã€‚\né‚£ä¹ˆï¼Œæœ€å°æ˜¯å¤šå°‘ï¼Ÿæˆ‘è®¤ä¸ºä¹Ÿä¸èƒ½å°‘è¿‡50åˆ°100ä¸ªTokenå§ã€‚å¦‚æœä½ å¤ªå°‘äº†ï¼Œæ ¹æœ¬å°±æ²¡æœ‰å¤šå°‘ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œæ£€ç´¢å‡ºæ¥çš„ä¿¡æ¯éƒ½æ˜¯ä¸å®Œæ•´çš„ã€‚\n\né‚£ä¹ˆï¼Œåœ¨100-4Kè¿™ä¸ªèŒƒå›´ï¼Œä½ åº”è¯¥å¦‚ä½•å…·ä½“ç¡®å®šä½ çš„åˆ‡å‰²ç²’åº¦ï¼Ÿé‚£è‚¯å®šåˆæ˜¯å’Œä½ çš„å…·ä½“é—®é¢˜ç›¸å…³çš„äº†ã€‚\n\nå¦‚æœä½ æœŸå¾…ä½ çš„æŸ¥è¯¢ï¼Œç»“æœéƒ½æ˜¯200å­—ä»¥å†…çš„åé¦ˆï¼Œé‚£ä¹ˆ200-300çš„Tokenæ•°é‡æ˜¯åˆé€‚çš„ã€‚\nå¦‚æœä½ æ˜¯åšSummarizationç±»å‹çš„ä»»åŠ¡ï¼Œé‚£ä¹ˆåˆ‡ç‰‡è¦å¤§ä¸€ç‚¹æ¯”è¾ƒå¥½ï¼Œ500ï¼Œ1000ï¼Œå¯èƒ½æ‰èƒ½æ€»ç»“å‡ºæ¥äº›ä¸œè¥¿ï¼Œå¯¹å§ã€‚\n\nè¿˜æœ‰ä¸€äº›è€ƒé‡\nè€ƒè™‘ä¸Šä¸‹æ–‡ï¼šç¡®ä¿å³ä½¿åœ¨ç»†ç²’åº¦çš„æ–‡æœ¬ä¸­ï¼Œä¹Ÿè¦ä¿å­˜è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ é€‰æ‹©å¥å­ä¸ºå•ä½ï¼Œé‚£ä¹ˆå¯èƒ½è€ƒè™‘å°†å‰åçš„å¥å­ä¹ŸåŠ å…¥ï¼Œå½¢æˆä¸€ä¸ªæ®µè½ï¼Œä»¥ä¾¿ä¸ºå¤§æ¨¡å‹æä¾›ä¸Šä¸‹æ–‡ã€‚\n\né‡‡ç”¨åŠ¨æ€çª—å£ï¼šåœ¨æ£€ç´¢æ—¶ï¼Œå¯ä»¥é‡‡ç”¨åŠ¨æ€çš„çª—å£å¤§å°ï¼Œå³æ ¹æ®æ£€ç´¢åˆ°çš„å…³é”®ä¿¡æ¯åŠ¨æ€è°ƒæ•´æ–‡æœ¬åˆ‡å‰²çš„èŒƒå›´ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿å³ä½¿åœ¨ç»†ç²’åº¦ä¸­ä¹Ÿèƒ½æä¾›è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ã€‚\nç»“åˆå¤šç²’åº¦ç­–ç•¥ï¼šåœ¨æ£€ç´¢æˆ–å…¶ä»–ä»»åŠ¡ä¸­ï¼Œå¯ä»¥è€ƒè™‘åŒæ—¶ä½¿ç”¨å¤šä¸ªæ–‡æœ¬ç²’åº¦ã€‚ä¾‹å¦‚ï¼Œé¦–å…ˆä½¿ç”¨ç²—ç²’åº¦è·å–å¤§è‡´çš„èŒƒå›´ï¼Œç„¶ååœ¨è¯¥èŒƒå›´å†…ä½¿ç”¨ç»†ç²’åº¦è¿›ä¸€æ­¥æ£€ç´¢ã€‚\n\næ€»ä¹‹ï¼Œä¸æ–­è°ƒè¯•å§ï¼Œæ‰¾åˆ°ä½ çš„å“ªä¸€æ¬¾ã€‚ä½ æ‰¾åˆ°äº†ï¼Œå‘ç°äº†ä¸€äº›ç»éªŒï¼Œä¸è¦å¿˜äº†å’Œå’±ä»¬åˆ†äº«ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1695008113,"ip_address":"æ–°åŠ å¡","comment_id":381290,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100617601,"comment_content":"è€å¸ˆï¼Œæƒ³é—®ä¸€ä¸‹æ–‡æœ¬åˆ‡å‰²ç²’åº¦æ€æ ·æ˜¯åˆé€‚çš„å‘¢ï¼Ÿç²—ç²’åº¦çš„æ–‡æœ¬è¢«æ£€ç´¢å‡ºæ¥ä¹‹åç»™å¤§æ¨¡å‹å‚è€ƒï¼Œå¤§æ¨¡å‹æ€»ä¼šè¢«æ–‡æœ¬ä¸­çš„æ— å…³ä¿¡æ¯å¹²æ‰°; è€Œç»†ç²’åº¦çš„æ–‡æœ¬ï¼Œæˆ‘åˆæ€•æ£€ç´¢å‡ºæ¥çš„ä¿¡æ¯ä¸å…¨ï¼Œç¼ºå°‘ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå¯¼è‡´å¤§æ¨¡å‹æ²¡æ³•ç»™å‡ºæ­£ç¡®ç­”æ¡ˆã€‚è¯·é—®è€å¸ˆæ˜¯æ€ä¹ˆåœ¨å·¥ç¨‹ä¸­å¹³è¡¡åˆ‡å‰²æ–‡æœ¬çš„é•¿çŸ­çš„å‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":628142,"discussion_content":"æ–‡æœ¬åˆ‡å‰²ç²’åº¦ä¹Ÿæ˜¯RAGé‡Œé¢çš„ä¸€ä¸ªå…³é”®ç‚¹ã€‚å¤ªç»†å’Œå¤ªç²—éƒ½ä¸å¥½ã€‚\nä½†æ˜¯è¿™é‡Œä¹Ÿæœ‰ä¸€ä¸ªå¤©ç„¶é™åˆ¶ï¼Œå°±æ˜¯ï¼Œå†ç²—ï¼Œéƒ½ä¸èƒ½è¶…è¿‡4Kï¼Œå¯¹å§ã€‚å› ä¸ºå¤§æ¨¡å‹å¯èƒ½éƒ½åƒä¸è¿›å»é‚£ä¹ˆå¤§çš„Tokenæ•°ï¼Œç›®å‰çš„å¤§æ¨¡å‹ä¸€æ¬¡èƒ½å¤ŸPassè¿›å»çš„Tokenæ•°é‡æ˜¯æœ‰è¿™ä¸ªé™åˆ¶çš„ã€‚\né‚£ä¹ˆï¼Œæœ€å°æ˜¯å¤šå°‘ï¼Ÿæˆ‘è®¤ä¸ºä¹Ÿä¸èƒ½å°‘è¿‡50åˆ°100ä¸ªTokenå§ã€‚å¦‚æœä½ å¤ªå°‘äº†ï¼Œæ ¹æœ¬å°±æ²¡æœ‰å¤šå°‘ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œæ£€ç´¢å‡ºæ¥çš„ä¿¡æ¯éƒ½æ˜¯ä¸å®Œæ•´çš„ã€‚\n\né‚£ä¹ˆï¼Œåœ¨100-4Kè¿™ä¸ªèŒƒå›´ï¼Œä½ åº”è¯¥å¦‚ä½•å…·ä½“ç¡®å®šä½ çš„åˆ‡å‰²ç²’åº¦ï¼Ÿé‚£è‚¯å®šåˆæ˜¯å’Œä½ çš„å…·ä½“é—®é¢˜ç›¸å…³çš„äº†ã€‚\n\nå¦‚æœä½ æœŸå¾…ä½ çš„æŸ¥è¯¢ï¼Œç»“æœéƒ½æ˜¯200å­—ä»¥å†…çš„åé¦ˆï¼Œé‚£ä¹ˆ200-300çš„Tokenæ•°é‡æ˜¯åˆé€‚çš„ã€‚\nå¦‚æœä½ æ˜¯åšSummarizationç±»å‹çš„ä»»åŠ¡ï¼Œé‚£ä¹ˆåˆ‡ç‰‡è¦å¤§ä¸€ç‚¹æ¯”è¾ƒå¥½ï¼Œ500ï¼Œ1000ï¼Œå¯èƒ½æ‰èƒ½æ€»ç»“å‡ºæ¥äº›ä¸œè¥¿ï¼Œå¯¹å§ã€‚\n\nè¿˜æœ‰ä¸€äº›è€ƒé‡\nè€ƒè™‘ä¸Šä¸‹æ–‡ï¼šç¡®ä¿å³ä½¿åœ¨ç»†ç²’åº¦çš„æ–‡æœ¬ä¸­ï¼Œä¹Ÿè¦ä¿å­˜è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ é€‰æ‹©å¥å­ä¸ºå•ä½ï¼Œé‚£ä¹ˆå¯èƒ½è€ƒè™‘å°†å‰åçš„å¥å­ä¹ŸåŠ å…¥ï¼Œå½¢æˆä¸€ä¸ªæ®µè½ï¼Œä»¥ä¾¿ä¸ºå¤§æ¨¡å‹æä¾›ä¸Šä¸‹æ–‡ã€‚\n\né‡‡ç”¨åŠ¨æ€çª—å£ï¼šåœ¨æ£€ç´¢æ—¶ï¼Œå¯ä»¥é‡‡ç”¨åŠ¨æ€çš„çª—å£å¤§å°ï¼Œå³æ ¹æ®æ£€ç´¢åˆ°çš„å…³é”®ä¿¡æ¯åŠ¨æ€è°ƒæ•´æ–‡æœ¬åˆ‡å‰²çš„èŒƒå›´ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿å³ä½¿åœ¨ç»†ç²’åº¦ä¸­ä¹Ÿèƒ½æä¾›è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ã€‚\nç»“åˆå¤šç²’åº¦ç­–ç•¥ï¼šåœ¨æ£€ç´¢æˆ–å…¶ä»–ä»»åŠ¡ä¸­ï¼Œå¯ä»¥è€ƒè™‘åŒæ—¶ä½¿ç”¨å¤šä¸ªæ–‡æœ¬ç²’åº¦ã€‚ä¾‹å¦‚ï¼Œé¦–å…ˆä½¿ç”¨ç²—ç²’åº¦è·å–å¤§è‡´çš„èŒƒå›´ï¼Œç„¶ååœ¨è¯¥èŒƒå›´å†…ä½¿ç”¨ç»†ç²’åº¦è¿›ä¸€æ­¥æ£€ç´¢ã€‚\n\næ€»ä¹‹ï¼Œä¸æ–­è°ƒè¯•å§ï¼Œæ‰¾åˆ°ä½ çš„å“ªä¸€æ¬¾ã€‚ä½ æ‰¾åˆ°äº†ï¼Œå‘ç°äº†ä¸€äº›ç»éªŒï¼Œä¸è¦å¿˜äº†å’Œå’±ä»¬åˆ†äº«ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1695008113,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2795450,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/a7/ba/66b4aebe.jpg","nickname":"å—é£åŒ—å··","note":"","ucode":"F5A7A45537D249","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":628263,"discussion_content":"è€å¸ˆï¼Œæˆ‘æƒ³çš„å°±æ˜¯å…ˆç²—ç²’åº¦çš„æ£€ç´¢ï¼Œå†ç»†ç²’åº¦çš„æ£€ç´¢ï¼Œè€—æ—¶ä¸»è¦åœ¨åµŒå…¥é˜¶æ®µï¼Œæœ¬åœ°éƒ¨ç½²çš„åµŒå…¥æ¨¡å‹åµŒå…¥é€Ÿåº¦å¥½åƒå¾ˆå¿«ï¼Œæˆ‘æƒ³å…ˆè¿™æ ·åšè¯•ä¸€è¯•ï¼Œå¦‚æœå†æœ‰å…·ä½“çš„é—®é¢˜ï¼Œè¿˜æƒ³å†å‘è€å¸ˆæ±‚æ•™ï¼Œæ„Ÿè°¢è€å¸ˆçš„è€å¿ƒè§£ç­”ï¼","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1695125886,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":628142,"ip_address":"åŒ—äº¬","group_id":0},"score":628263,"extra":""}]}]},{"had_liked":false,"id":386191,"user_name":"å¾å†°","can_delete":false,"product_type":"c1","uid":1208569,"ip_address":"ä¸Šæµ·","ucode":"BAC1B611CF58ED","user_header":"https://static001.geekbang.org/account/avatar/00/12/70/f9/352365e3.jpg","comment_is_top":false,"comment_ctime":1704288233,"is_pvip":false,"replies":[{"id":140823,"content":"æ‚¨å¥½ï¼è°¢è°¢ä½ åˆ†äº«è¿™äº›å°è¯•ã€‚æˆ‘åœ¨æƒ³ï¼Œå¦‚æœRecursiveCharacterTextSplitterçš„ç¡®æœ‰è¿™äº›é™åˆ¶ï¼Œèƒ½å¦è€ƒè™‘æŠŠRecursiveCharacterTextSplitter Copyå‡ºæ¥ï¼Œè‡ªå·±åšä¸€ä¸ªæ²¡æœ‰é™åˆ¶çš„ç‰ˆæœ¬ã€‚çœ‹çœ‹æ˜¯å¦å¯è¡Œã€‚çœ‹çœ‹å…¶å®ƒåŒå­¦æœ‰æ²¡æœ‰å…¶å®ƒå»ºè®®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1704774450,"ip_address":"ç‘å£«","comment_id":386191,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100617601,"comment_content":"é»„è€å¸ˆä½ å¥½ï¼Œæƒ³è¯·æ•™ä¸‹ï¼Œæˆ‘æŠŠå¤§æ¨¡å‹æ”¹æˆäº†ä½¿ç”¨é˜¿é‡Œäº‘çš„çµç§¯å¤§æ¨¡å‹å¹³å°çš„é€šä¹‰åƒé—®APIï¼ŒåŒæ—¶ä½¿ç”¨çµç§¯çš„&quot;text-embedding-v2&quot;çš„æ¨¡å‹åšæ–‡æ¡£çš„å‘é‡åŒ–å¤„ç†ã€‚ä½†æ˜¯ åšå‘é‡åŒ–çš„æ—¶å€™ï¼Œå‘ç°è¿™ä¸ªçµç§¯çš„&quot;text-embedding-v2&quot;è¿™ä¸ªapiå•æ¬¡è¯·æ±‚æ–‡æœ¬æœ€å¤§è¡Œæ•°é™åˆ¶ä¸ºæœ€å¤§25è¡Œã€‚\ndemoä¸­çš„pdfæ–‡æ¡£æ•°æ®ï¼Œ documents.extend(loader.load())è¿™ä¸€æ­¥æ˜¯ï¼Œæˆ‘çœ‹documentsåˆ—è¡¨å¤§å°å°±æ˜¯35ï¼Œ\nåé¢è°ƒæ•´åˆ†ç‰‡å¤§å°ï¼Œtext_splitter = RecursiveCharacterTextSplitter(chunk_size=500,chunk_overlap=10)ï¼Œchunk_sizeå†å¤§ï¼Œåˆ†ç‰‡æ•°æœ€å°ä¹Ÿæ˜¯35ï¼Œå¯¼è‡´è°ƒç”¨apiè¶…è¿‡æœ€å¤§è¡Œæ•°é™åˆ¶ã€‚è¿™å—æœ‰ä»€ä¹ˆåŠæ³•å¤„ç†ä¸‹å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635372,"discussion_content":"æ‚¨å¥½ï¼è°¢è°¢ä½ åˆ†äº«è¿™äº›å°è¯•ã€‚æˆ‘åœ¨æƒ³ï¼Œå¦‚æœRecursiveCharacterTextSplitterçš„ç¡®æœ‰è¿™äº›é™åˆ¶ï¼Œèƒ½å¦è€ƒè™‘æŠŠRecursiveCharacterTextSplitter Copyå‡ºæ¥ï¼Œè‡ªå·±åšä¸€ä¸ªæ²¡æœ‰é™åˆ¶çš„ç‰ˆæœ¬ã€‚çœ‹çœ‹æ˜¯å¦å¯è¡Œã€‚çœ‹çœ‹å…¶å®ƒåŒå­¦æœ‰æ²¡æœ‰å…¶å®ƒå»ºè®®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1704774450,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383595,"user_name":"æ‚Ÿå°˜","can_delete":false,"product_type":"c1","uid":2189310,"ip_address":"åŒ—äº¬","ucode":"4E7E854340D3A4","user_header":"https://static001.geekbang.org/account/avatar/00/21/67/fe/5d17661a.jpg","comment_is_top":false,"comment_ctime":1699327255,"is_pvip":false,"replies":[{"id":140202,"content":"å¯ä»¥ã€‚ä½ å°±æœ‰äº†ä¸€ä¸ªåŒ»å­¦+æ³•å¾‹çš„èŠå¤©å™¨ã€‚å“ªä¸ªæ›´é«˜ï¼Ÿå–å†³äºä½ å“ªæ­¥çš„æ•°æ®æ›´å¥½ï¼Œå–å†³äºä½ è®­ç»ƒçš„å¥½ï¼Œè¿˜æ˜¯RAGçš„å¥½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1700584213,"ip_address":"ç‘å£«","comment_id":383595,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100617601,"comment_content":"å¦‚æœä¸€ä¸ªå¤§æ¨¡å‹ ä½¿ç”¨çš„åŒ»å­¦çš„çŸ¥è¯†åº“è®­ç»ƒå®Œæˆçš„ï¼Œé‚£æˆ‘é’ˆå¯¹è¿™ä¸ªå¤§æ¨¡å‹å†å¯¹æ³•å¾‹ç»è¿‡ æ•°æ®å‡†å¤‡å’Œè½½å…¥ã€æ–‡æœ¬åˆ†å‰²ã€å‘é‡æ•°æ®åº“å­˜å‚¨ã€ç›¸å…³ä¿¡æ¯çš„è·å– ç­‰æœ¬æ–‡ä¸­çš„æ­¥éª¤ï¼Œé‚£è¿™ä¸ªå¤§æ¨¡å‹èƒ½æä¾›æ³•å¾‹çš„ç›¸å…³å›ç­”å—ï¼Ÿè¯¥å¤§æ¨¡å‹æä¾›çš„åŒ»å­¦çš„åŠå¯¹æ³•å¾‹æä¾›çš„å›ç­”å‡†ç¡®åº¦ å“ªä¸ªæ›´é«˜ä¸€äº›ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":632252,"discussion_content":"å¯ä»¥ã€‚ä½ å°±æœ‰äº†ä¸€ä¸ªåŒ»å­¦+æ³•å¾‹çš„èŠå¤©å™¨ã€‚å“ªä¸ªæ›´é«˜ï¼Ÿå–å†³äºä½ å“ªæ­¥çš„æ•°æ®æ›´å¥½ï¼Œå–å†³äºä½ è®­ç»ƒçš„å¥½ï¼Œè¿˜æ˜¯RAGçš„å¥½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700584213,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383407,"user_name":"ä¸€è·¯å‰è¡Œ","can_delete":false,"product_type":"c1","uid":1288985,"ip_address":"åŒ—äº¬","ucode":"32D3C715690783","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcFhGY0NV4kFzOSXWDHR2lrI2UbUP4Y016GOnpTH7dqSbicqJarX0pHxMsfLopRiacKEPXLx7IHHqg/132","comment_is_top":false,"comment_ctime":1698992356,"is_pvip":false,"replies":[{"id":139674,"content":"https:&#47;&#47;docs.google.com&#47;spreadsheets&#47;d&#47;1oAeF4Q7ILxxfInGJ8vTsBck3-2U9VV8idDf3hJOozNw&#47;edit#gid=0\nè¿™é‡Œæœ‰äººåšäº†ä¸ªæ¯”è¾ƒè¡¨è€¶ï¼ŒåŒå­¦çœ‹ä¸€çœ‹ã€‚ç›®å‰æˆ‘ç”¨èµ·æ¥ï¼Œç®€å•çš„éœ€æ±‚å¤§æ¦‚éƒ½å·®ä¸å¤šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1699002784,"ip_address":"ç‘å£«","comment_id":383407,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100617601,"comment_content":"qdrantï¼Œchromadb,fiassè€å¸ˆåœ¨è¿™äº›å‘é‡åº“çš„é€‰æ‹©ä¸Šæœ‰ä»€ä¹ˆå»ºè®®ä¹ˆ","like_count":2,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630881,"discussion_content":"https://docs.google.com/spreadsheets/d/1oAeF4Q7ILxxfInGJ8vTsBck3-2U9VV8idDf3hJOozNw/edit#gid=0\nè¿™é‡Œæœ‰äººåšäº†ä¸ªæ¯”è¾ƒè¡¨è€¶ï¼ŒåŒå­¦çœ‹ä¸€çœ‹ã€‚ç›®å‰æˆ‘ç”¨èµ·æ¥ï¼Œç®€å•çš„éœ€æ±‚å¤§æ¦‚éƒ½å·®ä¸å¤šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699002784,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1524351,"avatar":"https://static001.geekbang.org/account/avatar/00/17/42/7f/db8fa45f.jpg","nickname":"æ™“æ¶›","note":"","ucode":"41CB1620A9B82C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":632462,"discussion_content":"å•†ç”¨çš„ç»´åº¦ç”¨å“ªä¸ªæ¯”è¾ƒå¥½å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700795154,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ—¥æœ¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382160,"user_name":"Lominnave","can_delete":false,"product_type":"c1","uid":1066748,"ip_address":"æµ™æ±Ÿ","ucode":"0674B630718AD9","user_header":"https://static001.geekbang.org/account/avatar/00/10/46/fc/147e38d9.jpg","comment_is_top":false,"comment_ctime":1696812198,"is_pvip":false,"replies":[{"id":139201,"content":"å¯¹ç»“æ„åŒ–çš„æ•°æ®åº“åšEmbeddingï¼Œè¿™ä¸ªé—®é¢˜æˆ‘æ²¡æœ‰æƒ³è¿‡ã€‚é€šå¸¸æˆ‘ä»¬æ˜¯å¯¹éç»“æ„åŒ–çš„æ•°æ®åšEmbeddingã€‚å¦‚æœæ•°æ®åº“è¡¨çš„ç»“æ„éå¸¸æ¸…æ™°äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿˜æ˜¯ç”¨SQLæ¥æŸ¥è¯¢ä¼šæ›´å‡†ç¡®å§ï¼Œæˆ‘æƒ³ã€‚\nLLMå¯ä»¥åšSQLæŸ¥è¯¢ï¼Œæˆ‘åé¢è¯¾ç¨‹é‡Œä¼šæœ‰ä¸€èŠ‚è®²åˆ°ã€‚\nå…³äºä½ çš„é—®é¢˜ï¼Œæˆ‘æœåˆ°ä¸¤ç¯‡è®ºæ–‡ï¼Œä½ çœ‹çœ‹æ˜¯å¦æœ‰å¸®åŠ©ï¼š\nhttps:&#47;&#47;dl.acm.org&#47;doi&#47;abs&#47;10.1145&#47;3076246.3076251\nhttps:&#47;&#47;www.cidrdb.org&#47;cidr2019&#47;papers&#47;p27-bordawekar-cidr19.pdf\nå…¶å®ƒåŒå­¦æœ‰é‡åˆ°ç±»ä¼¼éœ€æ±‚å—ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1696847028,"ip_address":"ç‘å£«","comment_id":382160,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100617601,"comment_content":"è¯·é—®è€å¸ˆï¼Œå¯¹äºDBçš„ç»“æ„åŒ–æ•°æ®è¿›è¡ŒçŸ¥è¯†åº“å»ºè®¾ï¼Œå¦‚ä½•è¿›è¡ŒEmbeddingè®¾è®¡å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629231,"discussion_content":"å¯¹ç»“æ„åŒ–çš„æ•°æ®åº“åšEmbeddingï¼Œè¿™ä¸ªé—®é¢˜æˆ‘æ²¡æœ‰æƒ³è¿‡ã€‚é€šå¸¸æˆ‘ä»¬æ˜¯å¯¹éç»“æ„åŒ–çš„æ•°æ®åšEmbeddingã€‚å¦‚æœæ•°æ®åº“è¡¨çš„ç»“æ„éå¸¸æ¸…æ™°äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿˜æ˜¯ç”¨SQLæ¥æŸ¥è¯¢ä¼šæ›´å‡†ç¡®å§ï¼Œæˆ‘æƒ³ã€‚\nLLMå¯ä»¥åšSQLæŸ¥è¯¢ï¼Œæˆ‘åé¢è¯¾ç¨‹é‡Œä¼šæœ‰ä¸€èŠ‚è®²åˆ°ã€‚\nå…³äºä½ çš„é—®é¢˜ï¼Œæˆ‘æœåˆ°ä¸¤ç¯‡è®ºæ–‡ï¼Œä½ çœ‹çœ‹æ˜¯å¦æœ‰å¸®åŠ©ï¼š\nhttps://dl.acm.org/doi/abs/10.1145/3076246.3076251\nhttps://www.cidrdb.org/cidr2019/papers/p27-bordawekar-cidr19.pdf\nå…¶å®ƒåŒå­¦æœ‰é‡åˆ°ç±»ä¼¼éœ€æ±‚å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1696847028,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1222726,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a8/46/42c2e559.jpg","nickname":"ç…œå¯¶","note":"","ucode":"F5A5BB5DAD4912","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629435,"discussion_content":"æˆ‘æœ‰åŒæ ·çš„ç–‘é—®ï¼Œä½†æˆ‘ç†è§£æˆ‘è¿™è¾¹æ˜¯è¦å¯¹SQLçš„æ“ä½œè¯­å¥åšEmbedingï¼Œè€Œéç›´æ¥å¯¹db dataåš","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1697070876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391101,"user_name":"è¿›å‡»çš„çŸ®äºº","can_delete":false,"product_type":"c1","uid":1711917,"ip_address":"å››å·","ucode":"3E2838168F62E9","user_header":"https://static001.geekbang.org/account/avatar/00/1a/1f/2d/90648df8.jpg","comment_is_top":false,"comment_ctime":1717327729,"is_pvip":false,"replies":[{"id":142249,"content":"æœ€è¿‘å®åœ¨æ˜¯å¤ªå¿™å¤ªå¿™äº†ï¼Œè¿˜æ²¡æ¥å¾—åŠæ•´ä½“æ¢³ç†LangChainçš„ä»£ç ï¼Œå¸Œæœ›å°½å¿«å¼„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1717498768,"ip_address":"æ–°åŠ å¡","comment_id":391101,"utype":1}],"discussion_count":1,"race_medal":2,"score":3,"product_id":100617601,"comment_content":"è€å¸ˆ, ä»£ç è¿˜æ²¡æ›´æ–°å‘€","like_count":1,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646177,"discussion_content":"æœ€è¿‘å®åœ¨æ˜¯å¤ªå¿™å¤ªå¿™äº†ï¼Œè¿˜æ²¡æ¥å¾—åŠæ•´ä½“æ¢³ç†LangChainçš„ä»£ç ï¼Œå¸Œæœ›å°½å¿«å¼„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1717498768,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":390917,"user_name":"é£æ ¼è‹¥å¹²","can_delete":false,"product_type":"c1","uid":1241291,"ip_address":"æ²³åŒ—","ucode":"F6C676B4823033","user_header":"https://static001.geekbang.org/account/avatar/00/12/f0/cb/27b88c1c.jpg","comment_is_top":false,"comment_ctime":1716736070,"is_pvip":true,"replies":[{"id":142263,"content":"åœ¨è¿™é‡Œå‘€https:&#47;&#47;python.langchain.com&#47;v0.2&#47;docs&#47;tutorials&#47;local_rag&#47;","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1717647674,"ip_address":"æ–°åŠ å¡","comment_id":390917,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100617601,"comment_content":"LangChain å®˜æ–¹æ–‡æ¡£å¯¹ Document QA ç³»ç»Ÿè®¾è®¡åŠå®ç°çš„è¯¦ç»†è¯´æ˜ï¼Œv0.1çš„é“¾æ¥å¤±æ•ˆäº†ï¼Œè€å¸ˆæ–¹ä¾¿å¸®å¿™æ‰¾ä¸€ä¸‹0.2ç‰ˆæœ¬çš„å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646250,"discussion_content":"åœ¨è¿™é‡Œå‘€https://python.langchain.com/v0.2/docs/tutorials/local_rag/","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1717647674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":388988,"user_name":"Geek_094518","can_delete":false,"product_type":"c1","uid":3866037,"ip_address":"å¹¿ä¸œ","ucode":"1AFD9AC9F4F27E","user_header":"","comment_is_top":false,"comment_ctime":1711343534,"is_pvip":false,"replies":[{"id":141709,"content":"æ˜¯çš„ï¼Œè°¢è°¢åŒå­¦è¡¥å……ã€‚æˆ‘å›å¤´é€æ¸ç»Ÿä¸€æ›´æ–°ä»£ç ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1712809290,"ip_address":"æ–°åŠ å¡","comment_id":388988,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100617601,"comment_content":"æ’å‘ç‚¹2 \n\nè¦å®‰è£… pip install tiktoken\n\nä» langchain å¯¼å…¥å‘é‡å­˜å‚¨å’ŒåµŒå…¥å¼æ¨¡å—çš„åšæ³•å·²è¢«å¼ƒç”¨,å°†åœ¨æœªæ¥ç‰ˆæœ¬ä¸­è¢«ç§»é™¤ã€‚æ‚¨éœ€è¦ä» langchain-community åŒ…ä¸­å¯¼å…¥å®ƒä»¬ã€‚ä¾‹å¦‚:\n\nfrom langchain_community.vectorstores import Qdrant\nfrom langchain_community.embeddings import OpenAIEmbeddings\n","like_count":1,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":641599,"discussion_content":"æ˜¯çš„ï¼Œè°¢è°¢åŒå­¦è¡¥å……ã€‚æˆ‘å›å¤´é€æ¸ç»Ÿä¸€æ›´æ–°ä»£ç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1712809290,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":384236,"user_name":"dydcm","can_delete":false,"product_type":"c1","uid":1105690,"ip_address":"å¹¿ä¸œ","ucode":"7A3F4F292F3DB5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/hllDt1dmuR6iciaahutPe9NjOic5OPMc7fbTysLTn8wgCSPW3zjYvd5rYDWBwQkSmqfsFntK12fLmam63FWpMklfg/132","comment_is_top":false,"comment_ctime":1700567564,"is_pvip":false,"replies":[{"id":140170,"content":"å¯ä»¥æŠŠçŸ¥è¯†å›¾è°±ä¸­çš„Subgraphï¼Œä»¥åŠå…³è”Nodeï¼ŒTripletsç­‰ç­‰ EmbeddingååŠ å…¥RAGçš„Pipelineä¸­çš„æŸäº›ç¯èŠ‚ï¼Œå…·ä½“é—®é¢˜å…·ä½“åˆ†æã€‚\nç°åœ¨æœ‰ä¸€ç§æ€æ½®è®¤ä¸ºChatGPTå‡ºç°ä¹‹åï¼ŒçŸ¥è¯†å›¾è°±æ²¡ä»€ä¹ˆç”¨äº†ã€‚ä½ å¯ä»¥è¯•è¯•åŠ å…¥çŸ¥è¯†å›¾è°±å…ƒç´ æ•ˆç‡æ˜¯å¦ä¼šæé«˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1700578212,"ip_address":"ç‘å£«","comment_id":384236,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100617601,"comment_content":"ç›®å‰æƒ³ç”¨langchainçŸ¥è¯†å›¾è°±çš„å›¾æ•°æ®åº“ä¸å¤§æ¨¡å‹ç»“åˆï¼Œè¯·é—®è€å¸ˆæœ‰ä»€ä¹ˆå»ºè®®æ–¹æ¡ˆå—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":632213,"discussion_content":"å¯ä»¥æŠŠçŸ¥è¯†å›¾è°±ä¸­çš„Subgraphï¼Œä»¥åŠå…³è”Nodeï¼ŒTripletsç­‰ç­‰ EmbeddingååŠ å…¥RAGçš„Pipelineä¸­çš„æŸäº›ç¯èŠ‚ï¼Œå…·ä½“é—®é¢˜å…·ä½“åˆ†æã€‚\nç°åœ¨æœ‰ä¸€ç§æ€æ½®è®¤ä¸ºChatGPTå‡ºç°ä¹‹åï¼ŒçŸ¥è¯†å›¾è°±æ²¡ä»€ä¹ˆç”¨äº†ã€‚ä½ å¯ä»¥è¯•è¯•åŠ å…¥çŸ¥è¯†å›¾è°±å…ƒç´ æ•ˆç‡æ˜¯å¦ä¼šæé«˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700578212,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383592,"user_name":"æ‚Ÿå°˜","can_delete":false,"product_type":"c1","uid":2189310,"ip_address":"åŒ—äº¬","ucode":"4E7E854340D3A4","user_header":"https://static001.geekbang.org/account/avatar/00/21/67/fe/5d17661a.jpg","comment_is_top":false,"comment_ctime":1699326779,"is_pvip":false,"replies":[{"id":140201,"content":"æ˜¯çš„ï¼Œå¦‚åŒå“ä¸åŒå­¦æ‰€è¯´ã€‚å¥½åƒå¯ä»¥ï¼Œæœ‰ç›¸å…³æ–‡æ¡£ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1700584111,"ip_address":"ç‘å£«","comment_id":383592,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100617601,"comment_content":"è€å¸ˆï¼ŒESæ˜¯å‘é‡æ•°æ®åº“å—ï¼Ÿåˆ†å‰²åçš„æ–‡æœ¬ï¼Œèƒ½å¦å­˜å‚¨äºESé‡Œï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":632251,"discussion_content":"æ˜¯çš„ï¼Œå¦‚åŒå“ä¸åŒå­¦æ‰€è¯´ã€‚å¥½åƒå¯ä»¥ï¼Œæœ‰ç›¸å…³æ–‡æ¡£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700584111,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1030687,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ba/1f/7551f182.jpg","nickname":"å“ä¸îŒ®îŒ®","note":"","ucode":"71B68238D304FE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631439,"discussion_content":"ES ä¹Ÿå…·æœ‰å‘é‡å­˜å‚¨çš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥ç®—ä½œvdbï¼Œå…³äºLangchain å’Œ ES æ•°æ®åº“çš„ç»“åˆï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š\nhttps://python.langchain.com/docs/integrations/text_embedding/elasticsearch\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1699536060,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382615,"user_name":"ä¸€é¢æ¹–æ°´","can_delete":false,"product_type":"c1","uid":1193473,"ip_address":"å››å·","ucode":"6339F033312FB2","user_header":"https://static001.geekbang.org/account/avatar/00/12/36/01/eb3ba274.jpg","comment_is_top":false,"comment_ctime":1697681422,"is_pvip":false,"replies":[{"id":139453,"content":"å¯å‚è€ƒæ–‡æ¡£https:&#47;&#47;python.langchain.com&#47;docs&#47;integrations&#47;document_loaders&#47;\nåˆ—å‡ºäº†æ‰€æœ‰ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1698142034,"ip_address":"ç‘å£«","comment_id":382615,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100617601,"comment_content":"langchainçš„document_loadersç›®å‰éƒ½æ”¯æŒå“ªäº›æ–‡æ¡£ç±»å‹å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630159,"discussion_content":"å¯å‚è€ƒæ–‡æ¡£https://python.langchain.com/docs/integrations/document_loaders/\nåˆ—å‡ºäº†æ‰€æœ‰ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698142034,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":381885,"user_name":"å¼ æ±æˆ","can_delete":false,"product_type":"c1","uid":2709072,"ip_address":"å®‰å¾½","ucode":"87560F280AC793","user_header":"https://static001.geekbang.org/account/avatar/00/29/56/50/3fdfdceb.jpg","comment_is_top":false,"comment_ctime":1696087024,"is_pvip":false,"replies":[{"id":139103,"content":"åŒå­¦å¥½ï¼Œå¦‚æœæƒ³è°ƒç”¨çš„æ¨¡å‹å·²ç»å¼€æºï¼Œä½ çš„è¿™ä¸ªé—®é¢˜åœ¨ç¬¬5è¯¾åº”è¯¥æœ‰ç­”æ¡ˆã€‚å¦‚æœæ²¡æœ‰å¼€æºï¼Œé‚£ä¹ˆæ™ºèƒ½ç­‰å¾…å®ƒçš„APIè¢«LangChainæ‰€æ”¯æŒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1696241443,"ip_address":"æ–°åŠ å¡","comment_id":381885,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100617601,"comment_content":"è€å¸ˆè¯·é—®ä¸€ä¸‹ï¼Œæˆ‘æƒ³åœ¨langchainé‡Œè°ƒç”¨å›½äº§å¤§æ¨¡å‹ï¼Œæ¯”å¦‚è®¯é£æ˜Ÿç«å¤§æ¨¡å‹ï¼Œä½†æˆ‘çœ‹langchainå®˜ç½‘ä¸Šå®ƒè¿˜æ²¡æœ‰è¢«é›†æˆè¿›å»ï¼Œé‚£åº”è¯¥å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":628920,"discussion_content":"åŒå­¦å¥½ï¼Œå¦‚æœæƒ³è°ƒç”¨çš„æ¨¡å‹å·²ç»å¼€æºï¼Œä½ çš„è¿™ä¸ªé—®é¢˜åœ¨ç¬¬5è¯¾åº”è¯¥æœ‰ç­”æ¡ˆã€‚å¦‚æœæ²¡æœ‰å¼€æºï¼Œé‚£ä¹ˆæ™ºèƒ½ç­‰å¾…å®ƒçš„APIè¢«LangChainæ‰€æ”¯æŒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1696241444,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1690447,"avatar":"https://static001.geekbang.org/account/avatar/00/19/cb/4f/7466a488.jpg","nickname":"Pengyuan Li","note":"","ucode":"2759D2BB51D981","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646944,"discussion_content":"å¤§æ¨¡å‹çœŸçš„æœ‰â€œå›½äº§â€çš„å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1719069805,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¾å›½","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":381859,"user_name":"è¨€åå¹´","can_delete":false,"product_type":"c1","uid":1110039,"ip_address":"åŒ—äº¬","ucode":"67B8B49C3A3B17","user_header":"https://static001.geekbang.org/account/avatar/00/10/f0/17/796a3d20.jpg","comment_is_top":false,"comment_ctime":1696043344,"is_pvip":false,"replies":[{"id":139100,"content":"https:&#47;&#47;github.com&#47;langchain-ai&#47;langchain&#47;issues&#47;8259 - ä¼¼ä¹æœ‰äººæ±‡æŠ¥äº†åŒæ ·çš„é—®é¢˜ï¼Œå¤šè·‘ä¸€æ¬¡å°±å¥½äº†ï¼Œä½†æ˜¯ç›®å‰æ²¡æœ‰å¾ˆå¥½çš„ç¨³å®šè§£å†³æ–¹æ¡ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1696240017,"ip_address":"æ–°åŠ å¡","comment_id":381859,"utype":1}],"discussion_count":6,"race_medal":0,"score":4,"product_id":100617601,"comment_content":"embeddingsè¢«é™æµäº†ã€‚å¤§å®¶æ€ä¹ˆè·‘çš„å‘¢ï¼Ÿ\n\n&#47;embeddings\nRetrying langchain.embeddings.openai.embed_with_retry.&lt;locals&gt;._embed_with_retry in 4.0 seconds as it raised RateLimitError: Rate limit reached for default-text-embedding-ada-002 in organization org-ZK1ptPebNCVCArIQG8s81jxx on requests per min. Limit: 3 &#47; min. Please try again in 20s. Contact us through our help center at help.openai.com if you continue to have issues. Please add a payment method to your account to increase your rate limit. Visit https:&#47;&#47;platform.openai.com&#47;account&#47;billing to add a payment method..","like_count":1,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":628917,"discussion_content":"https://github.com/langchain-ai/langchain/issues/8259 - ä¼¼ä¹æœ‰äººæ±‡æŠ¥äº†åŒæ ·çš„é—®é¢˜ï¼Œå¤šè·‘ä¸€æ¬¡å°±å¥½äº†ï¼Œä½†æ˜¯ç›®å‰æ²¡æœ‰å¾ˆå¥½çš„ç¨³å®šè§£å†³æ–¹æ¡ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1696240017,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111434,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/8a/e0fa8730.jpg","nickname":"å­¦æ¸£è¦æ¯æ—¥è¿›æ­¥","note":"","ucode":"0EB5CB54F2E890","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":633922,"discussion_content":"retriever_from_llm = MultiQueryRetriever.from_llm(retriever=vectorstore.as_retriever(), llm=llm)\nqa_chain = RetrievalQA.from_chain_type(llm,retriever=retriever_from_llm) \nç›´æ¥æ”¹æˆ \n qa_chain = RetrievalQA.from_chain_type(llm, retriever=vectorstore.as_retriever())","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1702800469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":3812327,"avatar":"","nickname":"Geek_92acd6","note":"","ucode":"ED648B38DA4688","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1111434,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/8a/e0fa8730.jpg","nickname":"å­¦æ¸£è¦æ¯æ—¥è¿›æ­¥","note":"","ucode":"0EB5CB54F2E890","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635547,"discussion_content":"ä½ è¿™ä¸æ˜¯ç›´æ¥æŠŠMultiQueryRetrieverç»™å»æ‰äº†ï¼Œå‰Šè¶³é€‚å±¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1704941752,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":633922,"ip_address":"åŒ—äº¬","group_id":0},"score":635547,"extra":""}]},{"author":{"id":1387305,"avatar":"https://static001.geekbang.org/account/avatar/00/15/2b/29/e532303b.jpg","nickname":"é“­å¨","note":"","ucode":"AADD5F95899F45","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631753,"discussion_content":"+1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699934089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1193473,"avatar":"https://static001.geekbang.org/account/avatar/00/12/36/01/eb3ba274.jpg","nickname":"ä¸€é¢æ¹–æ°´","note":"","ucode":"6339F033312FB2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629270,"discussion_content":"æˆ‘ä¹Ÿæ˜¯é™æµäº†ï¼Œä¸æ™“å¾—æœ‰ä»€ä¹ˆåŠæ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1696917993,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å››å·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1262168,"avatar":"https://static001.geekbang.org/account/avatar/00/13/42/58/2286eca6.jpg","nickname":"HdUIprince","note":"","ucode":"2510EBFACDBDB2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":628877,"discussion_content":"+1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1696081494,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¾å›½","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":390785,"user_name":"Geek_144417","can_delete":false,"product_type":"c1","uid":3579803,"ip_address":"","ucode":"6C6910108E1D56","user_header":"","comment_is_top":false,"comment_ctime":1716278364,"is_pvip":false,"replies":[{"id":142264,"content":"æˆ‘è§‰å¾—åªæ˜¯æ–‡æœ¬ã€‚åŒå­¦å¯ä»¥æ·±å…¥çœ‹ä¸€ä¸‹ä»£ç ã€‚ç›®å‰ä¹Ÿæœ‰èƒ½å¤ŸæŠŠæ¯ä¸€é¡µPDFä½œä¸ºå›¾çš„å·¥å…·æ¥è¯»çš„è§£å†³æ–¹æ¡ˆï¼Œæˆ‘çš„æ–°è¯¾ã€Šå¤§æ¨¡å‹åº”ç”¨å¼€å‘å®æˆ˜ã€‹ä¸­æœ‰å¯ä»¥è¯»å›¾çš„RAGç¤ºä¾‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1717647957,"ip_address":"æ–°åŠ å¡","comment_id":390785,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100617601,"comment_content":"è¯·é—®loader = PyPDFLoader(file_path)   documents.extend(loader.load()) ç»è¿‡è¿™ä¸€æ­¥ï¼Œdocumentså­˜çš„æ˜¯ä»€ä¹ˆï¼Œæˆ–è€…loader.load()æ˜¯ä»€ä¹ˆï¼Œæ˜¯pdfçš„å›¾ç‰‡è¿˜æ˜¯pdfç¼–ç æˆä¸€æ®µç¼–ç è¿˜æ˜¯pdfè§£æåæå–çš„æ–‡å­—å’Œå›¾ç‰‡ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646251,"discussion_content":"æˆ‘è§‰å¾—åªæ˜¯æ–‡æœ¬ã€‚åŒå­¦å¯ä»¥æ·±å…¥çœ‹ä¸€ä¸‹ä»£ç ã€‚ç›®å‰ä¹Ÿæœ‰èƒ½å¤ŸæŠŠæ¯ä¸€é¡µPDFä½œä¸ºå›¾çš„å·¥å…·æ¥è¯»çš„è§£å†³æ–¹æ¡ˆï¼Œæˆ‘çš„æ–°è¯¾ã€Šå¤§æ¨¡å‹åº”ç”¨å¼€å‘å®æˆ˜ã€‹ä¸­æœ‰å¯ä»¥è¯»å›¾çš„RAGç¤ºä¾‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1717647957,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":390649,"user_name":"Amir","can_delete":false,"product_type":"c1","uid":1284452,"ip_address":"å¹¿ä¸œ","ucode":"901D8E94E306CF","user_header":"https://static001.geekbang.org/account/avatar/00/13/99/64/7912c306.jpg","comment_is_top":false,"comment_ctime":1715853104,"is_pvip":false,"replies":[{"id":142266,"content":"ChatGLMæ–°ç‰ˆå¯¹è¯åŠŸèƒ½ä¹Ÿè¶Šæ¥è¶Šå¼ºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1717648057,"ip_address":"æ–°åŠ å¡","comment_id":390649,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100617601,"comment_content":"æ™ºè°±æ¸…è¨€çš„embedding2 ç”Ÿæˆembeddingæ•ˆæœè¿˜è¡Œï¼Œéœ€è¦è‡ªå·±æ ¹æ®langchain çš„ Embeddingsè‡ªå·±å®ç°ä¸€ä¸‹","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646253,"discussion_content":"ChatGLMæ–°ç‰ˆå¯¹è¯åŠŸèƒ½ä¹Ÿè¶Šæ¥è¶Šå¼ºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1717648058,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1241291,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f0/cb/27b88c1c.jpg","nickname":"é£æ ¼è‹¥å¹²","note":"","ucode":"F6C676B4823033","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":645773,"discussion_content":"æ­£çº ç»“æä¸å®šopenaiè¯¥æ€ä¹ˆåŠï¼Œæ„Ÿè°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1716736321,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¾å›½","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":390417,"user_name":"æ›¹èƒ–å­","can_delete":false,"product_type":"c1","uid":1374648,"ip_address":"æ¹–å—","ucode":"8911E5DA412E59","user_header":"https://static001.geekbang.org/account/avatar/00/14/f9/b8/0f3bd8ec.jpg","comment_is_top":false,"comment_ctime":1715311025,"is_pvip":false,"replies":[{"id":142269,"content":"è°¢è°¢ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1717648344,"ip_address":"æ–°åŠ å¡","comment_id":390417,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100617601,"comment_content":"æ–°çš„ï¼š\nfrom langchain_community.document_loaders import PyPDFLoader\nfrom langchain_community.document_loaders import Docx2txtLoader\nfrom langchain_community.document_loaders import TextLoader\n\nfrom langchain_community.vectorstores import Qdrant\nfrom langchain_openai import OpenAIEmbeddings","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646256,"discussion_content":"è°¢è°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1717648344,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":390352,"user_name":"Geek_6df977","can_delete":false,"product_type":"c1","uid":1695261,"ip_address":"å¹¿ä¸œ","ucode":"4F26A42C9BD901","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/9doFL0ZzcWf5gkQ10cHsOziamhHicjq1k2KHvJibkicBjHsKyvf9jMepvdgLFiadiaI8PScf73Pl7QK3ibp6MYicWn9BuQ/132","comment_is_top":false,"comment_ctime":1715181831,"is_pvip":false,"replies":[{"id":142272,"content":"ç›®å‰æˆ‘è·‘èµ·æ¥è¿˜å¥½ï¼Œæ²¡æœ‰é‡åˆ°é”™è¯¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1717648512,"ip_address":"æ–°åŠ å¡","comment_id":390352,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100617601,"comment_content":"æœ‰äººé‡åˆ°è¿™ä¸ªæŠ¥é”™å—\nvectorstore = Qdrant.from_documents(\n    documents=chunked_documents,  # ä»¥åˆ†å—çš„æ–‡æ¡£\n    embedding=OpenAIEmbeddings(),  # ç”¨OpenAIçš„Embedding ModelåšåµŒå…¥\n    location=&quot;:memory:&quot;,  # in-memory å­˜å‚¨\n    collection_name=&quot;my_documents&quot;, ) \n\n    vector_size = len(partial_embeddings[0])\n                      ~~~~~~~~~~~~~~~~~~^^^\nIndexError: list index out of range  ","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646259,"discussion_content":"ç›®å‰æˆ‘è·‘èµ·æ¥è¿˜å¥½ï¼Œæ²¡æœ‰é‡åˆ°é”™è¯¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1717648512,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":388987,"user_name":"Geek_094518","can_delete":false,"product_type":"c1","uid":3866037,"ip_address":"å¹¿ä¸œ","ucode":"1AFD9AC9F4F27E","user_header":"","comment_is_top":false,"comment_ctime":1711343358,"is_pvip":false,"replies":[{"id":141618,"content":"å¥½å˜ï¼Œæ„Ÿè°¢æ‚¨çš„å»ºè®®ï¼Œæˆ‘ä¼šå®‰æ’è°ƒæ•´ä¸€ä¸‹è¯¾ç¨‹å’ŒGithubä¸Šé¢çš„ä»£ç ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1711987867,"ip_address":"æ–°åŠ å¡","comment_id":388987,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100617601,"comment_content":"æ’å‘å»ºè®®:\n\nåœ¨æ‚¨çš„Pythonä»£ç ä¸­,å°†ä»langchainå¯¼å…¥æ–‡æ¡£åŠ è½½å™¨çš„è¯­å¥æ›¿æ¢ä¸ºä»langchain-communityå¯¼å…¥ã€‚ä¾‹å¦‚,å¦‚æœæ‚¨æœ‰ä»¥ä¸‹å¯¼å…¥è¯­å¥:\n\n\nfrom langchain import Docx2txtLoader\nfrom langchain import TextLoader\nè¯·å°†å®ƒä»¬æ›¿æ¢ä¸º:\n\nfrom langchain_community.document_loaders import Docx2txtLoader\nfrom langchain_community.document_loaders import TextLoader","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":640929,"discussion_content":"å¥½å˜ï¼Œæ„Ÿè°¢æ‚¨çš„å»ºè®®ï¼Œæˆ‘ä¼šå®‰æ’è°ƒæ•´ä¸€ä¸‹è¯¾ç¨‹å’ŒGithubä¸Šé¢çš„ä»£ç ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1711987867,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":386376,"user_name":"ï¼","can_delete":false,"product_type":"c1","uid":2049513,"ip_address":"å®‰å¾½","ucode":"C84A98C613A95A","user_header":"https://static001.geekbang.org/account/avatar/00/1f/45/e9/4947093c.jpg","comment_is_top":false,"comment_ctime":1704712901,"is_pvip":false,"replies":[{"id":140914,"content":"å¾ˆéš¾è¯´ã€‚ä½ æ¢ä¸ªå‘é‡æ•°æ®åº“ï¼Œæˆ–è€…é‡è·‘ä¸€ä¸‹è¯•è¯•ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1705069002,"ip_address":"ç‘å£«","comment_id":386376,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100617601,"comment_content":"Traceback (most recent call last):\n  File &quot;&#47;Users&#47;wangrui&#47;Documents&#47;dev&#47;project&#47;python&#47;langchain-learning&#47;answer_QA.py&quot;, line 34, in &lt;module&gt;\n    vectorstore = Qdrant.from_documents(\n  File &quot;&#47;Users&#47;wangrui&#47;anaconda3&#47;envs&#47;py3.9&#47;lib&#47;python3.9&#47;site-packages&#47;langchain_core&#47;vectorstores.py&quot;, line 508, in from_documents\n    return cls.from_texts(texts, embedding, metadatas=metadatas, **kwargs)\n\n    return self._request(\n  File &quot;&#47;Users&#47;wangrui&#47;anaconda3&#47;envs&#47;py3.9&#47;lib&#47;python3.9&#47;site-packages&#47;openai&#47;_base_client.py&quot;, line 930, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.InternalServerError: Internal Server Error è¯·é—®è¿™æ˜¯å•¥åŸå› ","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635719,"discussion_content":"å¾ˆéš¾è¯´ã€‚ä½ æ¢ä¸ªå‘é‡æ•°æ®åº“ï¼Œæˆ–è€…é‡è·‘ä¸€ä¸‹è¯•è¯•ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1705069002,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":385854,"user_name":"æ£®ã€‚","can_delete":false,"product_type":"c1","uid":1780469,"ip_address":"å¹¿ä¸œ","ucode":"2E5F5BA32AD433","user_header":"https://static001.geekbang.org/account/avatar/00/1b/2a/f5/30d1f7b9.jpg","comment_is_top":false,"comment_ctime":1703515444,"is_pvip":false,"replies":[{"id":140827,"content":"æç¤ºå·¥ç¨‹è¦åšå¥½ã€‚ç”¨ChatGPTçš„ç½‘é¡µç‰ˆæ¥å°è¯•å„ç§å„æ ·çš„æç¤ºã€‚\nè¿™é‡Œæ˜¯ä¸¤ä¸ªå¤§åŸåˆ™ï¼š\næ˜ç¡®å’Œç²¾ç»†åŒ–æŒ‡ä»¤ï¼šç¡®ä¿æ‚¨æä¾›ç»™æ¨¡å‹çš„æŒ‡ä»¤å°½å¯èƒ½æ˜ç¡®å’Œè¯¦ç»†ã€‚åŒ…æ‹¬æœŸæœ›çš„ JSON ç»“æ„ã€æ¯ä¸ªå­—æ®µåº”è¯¥åŒ…å«çš„ä¿¡æ¯ç±»å‹ç­‰ã€‚\næä¾›ç¤ºä¾‹ï¼šåœ¨æŒ‡ä»¤ä¸­åŒ…æ‹¬ä¸€ä¸¤ä¸ªè½¬æ¢å¥½çš„ä¾‹å­ï¼Œè¿™å¯ä»¥å¸®åŠ©æ¨¡å‹æ›´å¥½åœ°ç†è§£é¢„æœŸçš„è¾“å‡ºæ ¼å¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1704777042,"ip_address":"ç‘å£«","comment_id":385854,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100617601,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘åœ¨å®è·µä¸­ï¼Œé€šè¿‡å¤§æ¨¡å‹æŠŠä¸€ä¸ªå¥å­è½¬æˆæˆ‘æƒ³è¦çš„ç»“æ„åŒ–jsonï¼Œæ•ˆæœä¸æ˜¯å¾ˆç†æƒ³ï¼Œå·²ç»è¾“ç»™äº†å‡ ä¸ªä¾‹å­äº†ï¼Œä½†å‡ºæ¥çš„ç»“æœä¸ç¨³å®šï¼Œæœ‰å“ªäº›ä¼˜åŒ–æ€è·¯","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635380,"discussion_content":"æç¤ºå·¥ç¨‹è¦åšå¥½ã€‚ç”¨ChatGPTçš„ç½‘é¡µç‰ˆæ¥å°è¯•å„ç§å„æ ·çš„æç¤ºã€‚\nè¿™é‡Œæ˜¯ä¸¤ä¸ªå¤§åŸåˆ™ï¼š\næ˜ç¡®å’Œç²¾ç»†åŒ–æŒ‡ä»¤ï¼šç¡®ä¿æ‚¨æä¾›ç»™æ¨¡å‹çš„æŒ‡ä»¤å°½å¯èƒ½æ˜ç¡®å’Œè¯¦ç»†ã€‚åŒ…æ‹¬æœŸæœ›çš„ JSON ç»“æ„ã€æ¯ä¸ªå­—æ®µåº”è¯¥åŒ…å«çš„ä¿¡æ¯ç±»å‹ç­‰ã€‚\næä¾›ç¤ºä¾‹ï¼šåœ¨æŒ‡ä»¤ä¸­åŒ…æ‹¬ä¸€ä¸¤ä¸ªè½¬æ¢å¥½çš„ä¾‹å­ï¼Œè¿™å¯ä»¥å¸®åŠ©æ¨¡å‹æ›´å¥½åœ°ç†è§£é¢„æœŸçš„è¾“å‡ºæ ¼å¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1704777042,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":385429,"user_name":"Charlie","can_delete":false,"product_type":"c1","uid":3717083,"ip_address":"ä¸Šæµ·","ucode":"B0E8E54F5DC893","user_header":"https://static001.geekbang.org/account/avatar/00/38/b7/db/dd23d4c3.jpg","comment_is_top":false,"comment_ctime":1702620704,"is_pvip":false,"replies":[{"id":140831,"content":"æˆ–è®¸æ˜¯åº“ç‰ˆæœ¬ä¹‹é—´å†²çªï¼Œæˆ‘æ²¡æœ‰é‡åˆ°è¿‡ï¼Œçœ‹çœ‹åŒå­¦ä»¬æœ‰æ²¡æœ‰è§£å†³æ–¹æ¡ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1704805391,"ip_address":"æ–°åŠ å¡","comment_id":385429,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100617601,"comment_content":"é™¤äº†ç”¨OpenAIEmbeddings åš embeddingï¼Œåœ¨å°è¯•ç”¨ LlamaCppEmbeddings åšembeddingæ—¶ æˆ‘é‡åˆ° ä¸€ä¸ªæŠ¥é”™ï¼Œä¸çŸ¥é“æ˜¯å¦è·Ÿ llama-cpp-python ç‰ˆæœ¬æœ‰å…³ã€‚ æœ‰é‡åˆ°çš„å—ï¼Œæ€ä¹ˆè§£å†³çš„å‘¢ï¼Ÿ \nllama_cpp&#47;llama.py&quot;, line 1309, in create_embedding\n    data.append(\nSystemError: &lt;method &#39;append&#39; of &#39;list&#39; objects&gt; returned a result with an error set\n","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635404,"discussion_content":"æˆ–è®¸æ˜¯åº“ç‰ˆæœ¬ä¹‹é—´å†²çªï¼Œæˆ‘æ²¡æœ‰é‡åˆ°è¿‡ï¼Œçœ‹çœ‹åŒå­¦ä»¬æœ‰æ²¡æœ‰è§£å†³æ–¹æ¡ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1704805391,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":384538,"user_name":"é£éš¼[å’–å•¡]","can_delete":false,"product_type":"c1","uid":1044188,"ip_address":"ç¾å›½","ucode":"075116DF9B0D88","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ee/dc/39fa0a55.jpg","comment_is_top":false,"comment_ctime":1701115823,"is_pvip":false,"replies":[{"id":140928,"content":"è¿™ä¸ªæˆ‘ä¸å¤§æ¸…æ¥šå› ä¸ºæˆ‘æ²¡æœ‰ç¢°åˆ°è¿‡ï¼Œå¯ä»¥åŠ ç¾¤è®¨è®ºçœ‹çœ‹å…¶å®ƒåŒå­¦å¦‚ä½•è§£å†³çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1705071300,"ip_address":"ç‘å£«","comment_id":384538,"utype":1}],"discussion_count":2,"race_medal":0,"score":5,"product_id":100617601,"comment_content":"å¦‚æœéplusç”¨æˆ·ï¼Œå¦‚ä½•é™åˆ¶è¯·æ±‚é€Ÿç‡---åœ¨langchain\nopenai.RateLimitError: Error code: 429 - {&#39;error&#39;: {&#39;message&#39;: &#39;Rate limit reached for text-embedding-ada-002 in organization org-SLqKGSSKZL9bqoi2qUubGRuT on requests per min (RPM): Limit 3, Used 3, Requested 1. Please try again in 20s. Visit https:&#47;&#47;platform.openai.com&#47;account&#47;rate-limits to learn more.","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635734,"discussion_content":"è¿™ä¸ªæˆ‘ä¸å¤§æ¸…æ¥šå› ä¸ºæˆ‘æ²¡æœ‰ç¢°åˆ°è¿‡ï¼Œå¯ä»¥åŠ ç¾¤è®¨è®ºçœ‹çœ‹å…¶å®ƒåŒå­¦å¦‚ä½•è§£å†³çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1705071300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2858725,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/9e/e5/9e732ec1.jpg","nickname":"æ³½","note":"","ucode":"44A1D076F59D60","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":634166,"discussion_content":"æˆ‘ä¹Ÿå¡åœ¨é€Ÿç‡è¿™å—ï¼Œè¿™è¯¾é—¨æ§›çœŸé«˜ï¼Œ è‡ªå·±çš„åˆ°æœŸäº†ï¼Œå°±åœ¨ç½‘ä¸Šä¹°çš„ keyï¼Œè¿˜è¢«é€Ÿç‡é™åˆ¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1703061021,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¾å›½","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":384028,"user_name":"é£å‘åŒ—å¹","can_delete":false,"product_type":"c1","uid":1623409,"ip_address":"å¹¿ä¸œ","ucode":"2FD0BC5159E1C1","user_header":"https://static001.geekbang.org/account/avatar/00/18/c5/71/f7c43b49.jpg","comment_is_top":false,"comment_ctime":1700122335,"is_pvip":false,"replies":[{"id":140175,"content":"åªèƒ½è¯·å›½å†…è®¿é—®äº†HuggingFaceçš„å°æœ‹å‹ä»¬æ¥ä»‹ç»ä¸€äº›æ–¹æ³•ï¼Œæˆ‘æƒ³å¿…ç„¶æœ‰æ–¹æ³•","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1700579438,"ip_address":"ç‘å£«","comment_id":384028,"utype":1}],"discussion_count":2,"race_medal":0,"score":5,"product_id":100617601,"comment_content":"HuggingFaceå¦‚ä½•è®¿é—®å•Š","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":632219,"discussion_content":"åªèƒ½è¯·å›½å†…è®¿é—®äº†HuggingFaceçš„å°æœ‹å‹ä»¬æ¥ä»‹ç»ä¸€äº›æ–¹æ³•ï¼Œæˆ‘æƒ³å¿…ç„¶æœ‰æ–¹æ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700579438,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2011138,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/b0/02/98f8b0ee.jpg","nickname":"æ–¹åElton","note":"","ucode":"180D03AADB5D2C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":648738,"discussion_content":"é•œåƒç«™ï¼šhttps://hf-mirror.com/","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1722076790,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383998,"user_name":"è¿œæ¸¸","can_delete":false,"product_type":"c1","uid":2103322,"ip_address":"åŒ—äº¬","ucode":"73792ED128D57C","user_header":"https://static001.geekbang.org/account/avatar/00/20/18/1a/5f36bb6e.jpg","comment_is_top":false,"comment_ctime":1700059762,"is_pvip":false,"replies":[{"id":140174,"content":"å•Šï¼å¦‚æœæˆ‘çš„PDFå¯ä»¥å‘½ä¸­ï¼ŒåŒå­¦ä½ å¦å¤–çš„PDFä¸å¯ä»¥ï¼Œé‚£ä¹ˆæˆ‘æ€€ç–‘åŒå­¦çš„PDFæ ¼å¼æœ‰é—®é¢˜ï¼ï¼ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1700578946,"ip_address":"ç‘å£«","comment_id":383998,"utype":1}],"discussion_count":3,"race_medal":0,"score":5,"product_id":100617601,"comment_content":"è€å¸ˆï¼Œæˆ‘å°†å¦å¤–ä¸€ä¸ªPDFæ–‡æ¡£æ”¾å…¥åˆ°OneFlowerç›®å½•ä¸­ï¼Œè¯¢é—®æ­¤PDFç›¸å…³çš„å†…å®¹ï¼Œå¾—åˆ°çš„ç­”æ¡ˆæ€»æ˜¯â€œå¯¹ä¸èµ·ï¼Œæˆ‘ä¸çŸ¥é“xxxâ€ï¼Œå¥½åƒå‘é‡æ²¡æœ‰å‘½ä¸­ä¸€æ ·ï¼Œæ‰€ä»¥å¤§æ¨¡å‹æ— ä»åˆ†æï¼Œä½œä¸ºä¸€ä¸ªpythonæ–°æ‰‹ï¼Œè¯¥æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":632218,"discussion_content":"å•Šï¼å¦‚æœæˆ‘çš„PDFå¯ä»¥å‘½ä¸­ï¼ŒåŒå­¦ä½ å¦å¤–çš„PDFä¸å¯ä»¥ï¼Œé‚£ä¹ˆæˆ‘æ€€ç–‘åŒå­¦çš„PDFæ ¼å¼æœ‰é—®é¢˜ï¼ï¼ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700578946,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2103322,"avatar":"https://static001.geekbang.org/account/avatar/00/20/18/1a/5f36bb6e.jpg","nickname":"è¿œæ¸¸","note":"","ucode":"73792ED128D57C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631892,"discussion_content":"è°ƒè¯•äº†ï¼Œä»¥ä¸‹ä¸¤å¥promptï¼Œä¸€å­—ä¹‹å·®ï¼Œä¸‹é¢çš„èƒ½å‡ºç»“æœï¼Œä¸Šé¢çš„ä¸è¡Œã€‚\næˆ‘è¦å»é‡åº†å‡ºå·®ï¼Œè¯·é—®ä½å®¿æ ‡å‡†æ˜¯å¤šå°‘\næˆ‘è¦å»é‡åº†å‡ºå·®ï¼Œè¯·é—®ä½å®¿è´¹æ ‡å‡†æ˜¯å¤šå°‘","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1700105540,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2103322,"avatar":"https://static001.geekbang.org/account/avatar/00/20/18/1a/5f36bb6e.jpg","nickname":"è¿œæ¸¸","note":"","ucode":"73792ED128D57C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631893,"discussion_content":"è¿˜æœ‰ä¸ªç°è±¡ï¼Œæ˜¯å‘é‡æ•°æ®åº“å‘½ä¸­çš„ä¿¡æ¯å¤ªå°‘ï¼Œå¯¼è‡´å¤§æ¨¡å‹æ¨æ–­æ—¶ç¼ºå°‘ä¿¡æ¯ã€‚è€å¸ˆï¼Œæ˜¯å¦æœ‰åŠæ³•å¢å¤§å‘é‡å‘½ä¸­çš„èŒƒå›´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700106036,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383738,"user_name":"å“ä¸îŒ®îŒ®","can_delete":false,"product_type":"c1","uid":1030687,"ip_address":"åŒ—äº¬","ucode":"71B68238D304FE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ba/1f/7551f182.jpg","comment_is_top":false,"comment_ctime":1699531693,"is_pvip":false,"replies":[{"id":140190,"content":"è°¢è°¢åŒå­¦è´¡çŒ®æ’é”™è¿‡ç¨‹ï¼Œè¿™å¯¹äºå…¶å®ƒå­¦ä¹ è€…å¾ˆæœ‰å¥½å¤„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1700582520,"ip_address":"ç‘å£«","comment_id":383738,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100617601,"comment_content":"åœ¨æˆ‘çš„ç¯å¢ƒä¸­ï¼Œåœ¨loadç¯èŠ‚ï¼Œè¿è¡Œæ—¶ç›´æ¥æŠ¥ä»¥ä¸‹é”™è¯¯ï¼š\n\nTraceback (most recent call last):\n  File &quot;&#47;Users&#47;xxx&#47;miniconda&#47;lib&#47;python3.11&#47;site-packages&#47;openai&#47;openai_object.py&quot;, line 59, in __getattr__\n    return self[k]\n           ~~~~^^^\nKeyError: &#39;data&#39;\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n......\n......\n    raise AttributeError(*err.args)\nAttributeError: data\n\nç„¶åæˆ‘è¯•ç€æŠŠä¸‹é¢2è¡Œæ³¨é‡Šæ‰ä»¥åï¼Œå°±å¯ä»¥äº†ï¼š\nfor file in os.listdir(base_dir):\n    # æ„å»ºå®Œæ•´çš„æ–‡ä»¶è·¯å¾„\n    file_path = os.path.join(base_dir, file)\n    if file.endswith(&#39;.pdf&#39;):\n        loader = PyPDFLoader(file_path)\n        ##documents.extend(loader.load())\n    elif file.endswith(&#39;.docx&#39;):\n        loader = Docx2txtLoader(file_path)\n        ##documents.extend(loader.load())\n    elif file.endswith(&#39;.txt&#39;):\n        loader = TextLoader(file_path)\n        documents.extend(loader.load())\n","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":632239,"discussion_content":"è°¢è°¢åŒå­¦è´¡çŒ®æ’é”™è¿‡ç¨‹ï¼Œè¿™å¯¹äºå…¶å®ƒå­¦ä¹ è€…å¾ˆæœ‰å¥½å¤„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700582520,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383618,"user_name":"sugar","can_delete":false,"product_type":"c1","uid":2184057,"ip_address":"æ±Ÿè‹","ucode":"491906283FC13B","user_header":"https://static001.geekbang.org/account/avatar/00/21/53/79/327ef30e.jpg","comment_is_top":false,"comment_ctime":1699358120,"is_pvip":false,"replies":[{"id":140200,"content":"æˆ‘ä»¬æ•™å­¦ä¸»è¦ç”¨openapiï¼ŒLangChainä¹Ÿæ”¯æŒå…¶å®ƒå¼€æºæ¨¡å‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1700583908,"ip_address":"ç‘å£«","comment_id":383618,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100617601,"comment_content":"è¿™ä¸ªlangchain æ˜¯å¿…éœ€ç”¨ openapi çš„keyä¹ˆ\n","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":632249,"discussion_content":"æˆ‘ä»¬æ•™å­¦ä¸»è¦ç”¨openapiï¼ŒLangChainä¹Ÿæ”¯æŒå…¶å®ƒå¼€æºæ¨¡å‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700583908,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383406,"user_name":"ä¸€è·¯å‰è¡Œ","can_delete":false,"product_type":"c1","uid":1288985,"ip_address":"åŒ—äº¬","ucode":"32D3C715690783","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcFhGY0NV4kFzOSXWDHR2lrI2UbUP4Y016GOnpTH7dqSbicqJarX0pHxMsfLopRiacKEPXLx7IHHqg/132","comment_is_top":false,"comment_ctime":1698991846,"is_pvip":false,"replies":[{"id":139682,"content":"å—¯å—¯ï¼Œè°¢è°¢åŒå­¦çš„æé†’ã€‚Docx2txtLoader æ— æ³•å¤„ç†.docæ–‡ä»¶ï¼Œæˆ‘å·²ç»æ›´æ”¹äº†githubä¸Šçš„ä»£ç ï¼ŒæŠŠor file.endswith(&#39;.doc&#39;)å»æ‰æ›´å¥½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1699026800,"ip_address":"ç‘å£«","comment_id":383406,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100617601,"comment_content":"elif file.endswith(&#39;.docx&#39;) or file.endswith(&#39;.doc&#39;): \nloader = Docx2txtLoader(file_path) \ndocuments.extend(loader.load())\nè€å¸ˆï¼ŒDocx2txtLoader æ— æ³•å¤„ç†.docæ–‡ä»¶å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630903,"discussion_content":"å—¯å—¯ï¼Œè°¢è°¢åŒå­¦çš„æé†’ã€‚Docx2txtLoader æ— æ³•å¤„ç†.docæ–‡ä»¶ï¼Œæˆ‘å·²ç»æ›´æ”¹äº†githubä¸Šçš„ä»£ç ï¼ŒæŠŠor file.endswith(&#39;.doc&#39;)å»æ‰æ›´å¥½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699026800,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382731,"user_name":"æ•¬","can_delete":false,"product_type":"c1","uid":1344618,"ip_address":"ä¸Šæµ·","ucode":"56537F4C78E604","user_header":"https://static001.geekbang.org/account/avatar/00/14/84/6a/8599e17f.jpg","comment_is_top":false,"comment_ctime":1697901928,"is_pvip":false,"replies":[{"id":139460,"content":"Milvus.from_documents æ˜¯ä¸€ä¸ªä¸€æ¬¡æ€§çš„æ‰¹é‡åŠ è½½æ–‡æ¡£çš„æ–¹æ³•,ç”¨äºåˆæ¬¡æ„å»º Milvus æ•°æ®åº“ã€‚é‚£ä¹ˆï¼Œå¦‚æœä½ æƒ³ä¿å­˜Embeddingï¼Œå¯ä»¥å­˜å‚¨åœ¨æ–‡ä»¶ç³»ç»Ÿï¼Œæˆ–è€…å‘é‡æ•°æ®åº“çš„äº‘å­˜è´®ä¸­ï¼Œä¸‹æ¬¡å¯ä»¥ç›´æ¥åŠ è½½Embeddingã€‚\nè¯¦ç»†çš„APIæ–‡æ¡£ï¼šhttps:&#47;&#47;api.python.langchain.com&#47;en&#47;latest&#47;vectorstores&#47;langchain.vectorstores.milvus.Milvus.html","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1698148334,"ip_address":"ç‘å£«","comment_id":382731,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100617601,"comment_content":"è€å¸ˆè¯·é—® æˆ‘ç†è§£Milvus.from_documents æ˜¯ç”¨æ¥åŠ è½½æ–‡æ¡£åˆ°å‘é‡æ•°æ®åº“ï¼Œé‚£è¿™æ˜¯ä¸€æ¬¡æ€§æ“ä½œï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630172,"discussion_content":"Milvus.from_documents æ˜¯ä¸€ä¸ªä¸€æ¬¡æ€§çš„æ‰¹é‡åŠ è½½æ–‡æ¡£çš„æ–¹æ³•,ç”¨äºåˆæ¬¡æ„å»º Milvus æ•°æ®åº“ã€‚é‚£ä¹ˆï¼Œå¦‚æœä½ æƒ³ä¿å­˜Embeddingï¼Œå¯ä»¥å­˜å‚¨åœ¨æ–‡ä»¶ç³»ç»Ÿï¼Œæˆ–è€…å‘é‡æ•°æ®åº“çš„äº‘å­˜è´®ä¸­ï¼Œä¸‹æ¬¡å¯ä»¥ç›´æ¥åŠ è½½Embeddingã€‚\nè¯¦ç»†çš„APIæ–‡æ¡£ï¼šhttps://api.python.langchain.com/en/latest/vectorstores/langchain.vectorstores.milvus.Milvus.html","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698148334,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382616,"user_name":"ä¸€é¢æ¹–æ°´","can_delete":false,"product_type":"c1","uid":1193473,"ip_address":"å››å·","ucode":"6339F033312FB2","user_header":"https://static001.geekbang.org/account/avatar/00/12/36/01/eb3ba274.jpg","comment_is_top":false,"comment_ctime":1697682572,"is_pvip":false,"replies":[{"id":139439,"content":"æœ‰ä¸€ç‚¹ç‚¹ä¸æ˜ç™½åŒå­¦çš„é—®é¢˜ã€‚å†…å­˜çš„æ„æ€ä¸å°±æ˜¯å·²ç»åŠ è½½åˆ°ç¨‹åºä¸­äº†ä¹ˆï¼Œå¯ä»¥ç›´æ¥passç»™LLMå¤„ç†äº†ã€‚æ¯”å¦‚è¯´ç¨‹åºä¸­åˆ›å»ºä¸€ä¸ªå˜é‡ï¼Œå°±æ˜¯åœ¨å†…å­˜ä¸­äº†ï¼Œä½ å¯ä»¥ç›´æ¥ä¼ ç»™æ¨¡å‹ã€‚document_loadersæ˜¯åœ¨å„ç§æ–‡ä»¶ç³»ç»Ÿï¼Œæ•°æ®åº“ä¸­åŠ è½½æ–‡ä»¶ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1698138753,"ip_address":"ç‘å£«","comment_id":382616,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100617601,"comment_content":"è€å¸ˆå¥½ï¼Œlangchain.document_loaderså¦‚ä½•åŠ è½½åœ¨å†…å­˜ä¸­çš„æ–‡ä»¶å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630142,"discussion_content":"æœ‰ä¸€ç‚¹ç‚¹ä¸æ˜ç™½åŒå­¦çš„é—®é¢˜ã€‚å†…å­˜çš„æ„æ€ä¸å°±æ˜¯å·²ç»åŠ è½½åˆ°ç¨‹åºä¸­äº†ä¹ˆï¼Œå¯ä»¥ç›´æ¥passç»™LLMå¤„ç†äº†ã€‚æ¯”å¦‚è¯´ç¨‹åºä¸­åˆ›å»ºä¸€ä¸ªå˜é‡ï¼Œå°±æ˜¯åœ¨å†…å­˜ä¸­äº†ï¼Œä½ å¯ä»¥ç›´æ¥ä¼ ç»™æ¨¡å‹ã€‚document_loadersæ˜¯åœ¨å„ç§æ–‡ä»¶ç³»ç»Ÿï¼Œæ•°æ®åº“ä¸­åŠ è½½æ–‡ä»¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698138753,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382340,"user_name":"ç‹å† å‡¯","can_delete":false,"product_type":"c1","uid":1075779,"ip_address":"å±±ä¸œ","ucode":"65879571114481","user_header":"https://static001.geekbang.org/account/avatar/00/10/6a/43/30f1b445.jpg","comment_is_top":false,"comment_ctime":1697094334,"is_pvip":false,"replies":[{"id":139283,"content":"è¿™ä¸ªé—®é¢˜ä¼¼ä¹æœ‰ç‚¹æ£˜æ‰‹ã€‚\nopenai_object.pyè¿™ä¸ªåº“è¡¨ç¤ºä¼ è¿›å»çš„æ ¼å¼ä¸å¯¹ã€‚\nè¿™ä¹Ÿæœ‰å¯èƒ½æ˜¯Qdrantçš„ç‰ˆæœ¬ï¼Œä»¥åŠLangChainçš„ç‰ˆæœ¬é—®é¢˜ã€‚\n|qdrant-client             1.5.0\nlangchain                 0.0.305\nè¿™æ˜¯æˆ‘ç›®å‰çš„ç‰ˆæœ¬ï¼Œä½ çœ‹çœ‹ä½ çš„ç‰ˆæœ¬å…ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1697424968,"ip_address":"ç‘å£«","comment_id":382340,"utype":1}],"discussion_count":4,"race_medal":0,"score":5,"product_id":100617601,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œåˆå­¦python å’Œlangchainï¼Œåœ¨è”ç³»è¿™ä¸ªç« èŠ‚çš„æ—¶å€™å‡ºç°äº†ç‚¹é—®é¢˜ã€‚å› ä¸ºopenaiå……å€¼æ¸ é“æ²¡æ‰“é€šï¼Œæ‰¾äº†ä¸ªç¬¬ä¸‰æ–¹å¹³æ›¿æ¥å£ï¼Œåœ¨è®²æ–‡æ¡£åˆ†å—åµŒå…¥å‘é‡æ•°æ®åº“è¿™æ­¥æŠ¥é”™ï¼ŒæŠ¥é”™å†…å®¹æ˜¯æ¥å£è°ƒç”¨å‚æ•°é”™è¯¯ã€‚å’Œç¬¬ä¸‰æ–¹å¹³æ›¿è”è°ƒåï¼Œé‚£è¾¹åé¦ˆæ˜¯openaiå¾—æ¥å£å¾—ä¼ å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬è¿™ä¸ªä»£ç é‡Œä¼ äº†å‘é‡æ•°ç»„ï¼Œæ‰€ä»¥æŠ¥é”™ã€‚æƒ³è¯·è€å¸ˆçœ‹çœ‹æ€ä¹ˆè§£å†³ã€‚\n\n# 3.Store å°†åˆ†å‰²åµŒå…¥å¹¶å­˜å‚¨åœ¨çŸ¢é‡æ•°æ®åº“Qdrantä¸­\nfrom langchain.vectorstores import Qdrant\nfrom langchain.embeddings import OpenAIEmbeddings\n# from langchain.embeddings import HuggingFaceInstructEmbeddings\n# emmodel=HuggingFaceInstructEmbeddings(model_name=&#39;hkunlp&#47;instructor-xl&#39;);\nembedding= OpenAIEmbeddings()\nprint(embedding)\nprint(chunked_documents)\nvectorstore = Qdrant.from_documents(\n    documents=chunked_documents,  # ä»¥åˆ†å—çš„æ–‡æ¡£\n    embedding=embedding,  # ç”¨OpenAIçš„Embedding ModelåšåµŒå…¥\n    location=&quot;:memory:&quot;,  # in-memory å­˜å‚¨\n    collection_name=&quot;my_documents&quot;)  # æŒ‡å®šcollection_name\nprint(vectorstore)\n\nè¿™æ®µä»£ç æŠ¥é”™ã€‚\né”™è¯¯æ ˆæ˜¯ï¼š\nTraceback (most recent call last):\n  File &quot;C:\\Users\\guank\\AppData\\Roaming\\Python\\Python310\\site-packages\\openai\\openai_object.py&quot;, line 59, in __getattr__\n    return self[k]\nKeyError: &#39;data&#39;","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629596,"discussion_content":"è¿™ä¸ªé—®é¢˜ä¼¼ä¹æœ‰ç‚¹æ£˜æ‰‹ã€‚\nopenai_object.pyè¿™ä¸ªåº“è¡¨ç¤ºä¼ è¿›å»çš„æ ¼å¼ä¸å¯¹ã€‚\nè¿™ä¹Ÿæœ‰å¯èƒ½æ˜¯Qdrantçš„ç‰ˆæœ¬ï¼Œä»¥åŠLangChainçš„ç‰ˆæœ¬é—®é¢˜ã€‚\n|qdrant-client             1.5.0\nlangchain                 0.0.305\nè¿™æ˜¯æˆ‘ç›®å‰çš„ç‰ˆæœ¬ï¼Œä½ çœ‹çœ‹ä½ çš„ç‰ˆæœ¬å…ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1697424968,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2049513,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/45/e9/4947093c.jpg","nickname":"ï¼","note":"","ucode":"C84A98C613A95A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":635317,"discussion_content":"è¯·é—®openai åº”è¯¥ç”¨ä»€ä¹ˆç‰ˆæœ¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1704713272,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":629596,"ip_address":"å®‰å¾½","group_id":0},"score":635317,"extra":""}]},{"author":{"id":1008312,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/b8/0e1b655e.jpg","nickname":"fireshort","note":"","ucode":"10550CA9C6C730","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629949,"discussion_content":"å»ºè®®å¼€é€šAzureçš„å¤§æ¨¡å‹ï¼Œç”¨èµ·æ¥å’ŒChatGPTçš„å·®ä¸å¤šï¼Œå¯ä»¥ç”¨å›½å†…çš„ä¿¡ç”¨å¡æŒ‰é‡ä»˜è´¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1697875525,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1075779,"avatar":"https://static001.geekbang.org/account/avatar/00/10/6a/43/30f1b445.jpg","nickname":"ç‹å† å‡¯","note":"","ucode":"65879571114481","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629614,"discussion_content":"(base) C:\\Users\\guank&gt;pip list|findstr langchain\nlangchain                     0.0.305\n\n(base) C:\\Users\\guank&gt;pip list|findstr qdrant-client\nqdrant-client                 1.5.0\n\nå·²ç»æ”¹æˆå’Œè€å¸ˆä¸€æ ·çš„ç‰ˆæœ¬äº†ï¼Œè¿˜æ˜¯æŠ¥åŒæ ·çš„é”™è¯¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1697437922,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å±±ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382099,"user_name":"é‚±æ–‡åº†","can_delete":false,"product_type":"c1","uid":1237079,"ip_address":"åŒ—äº¬","ucode":"2B96FDE64FB59A","user_header":"https://static001.geekbang.org/account/avatar/00/12/e0/57/060b5c21.jpg","comment_is_top":false,"comment_ctime":1696690631,"is_pvip":false,"replies":[{"id":139192,"content":"æ ¹æ®ä½ æä¾›çš„é”™è¯¯ä¿¡æ¯ï¼Œè¿™ä¼¼ä¹å’Œä»£ç†æœåŠ¡å™¨æœ‰å…³ã€‚os.environ[&quot;OPENAI_API_BASE&quot;]ä¸ºæä¾›API Keyçš„ç¬¬ä¸‰æ–¹åœ°å€ -- ä¸çŸ¥é“æ˜¯ä¸æ˜¯å’Œè¿™ä¸ªæœ‰å…³ã€‚ä¹Ÿè®¸éœ€è¦é€šè¿‡å¦å¤–çš„æ–¹æ³•æ‹¿åˆ°è‡ªå·±çš„API Keyã€‚\nçœ‹çœ‹å…¶å®ƒåŒå­¦æ˜¯å¦æ›¾é‡åˆ°è¿‡ç±»ä¼¼çš„äº‹æƒ…ã€‚\n","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1696783527,"ip_address":"ç‘å£«","comment_id":382099,"utype":1}],"discussion_count":2,"race_medal":0,"score":6,"product_id":100617601,"comment_content":"è€å¸ˆï¼Œæˆ‘ä»githubä¸‹è½½äº†å®Œæ•´çš„æºä»£ç ï¼Œä¿®æ”¹äº†os.environ[&quot;OPENAI_API_KEY&quot;]ä¸ºæˆ‘è‡ªå·±çš„sk-å¼€å¤´çš„API Keyï¼ŒåŒæ—¶å¢åŠ äº†os.environ[&quot;OPENAI_API_BASE&quot;]ä¸ºæä¾›API Keyçš„ç¬¬ä¸‰æ–¹åœ°å€ï¼Œæ‰§è¡ŒDocQA.pyï¼Œå‡ºç°äº†å¦‚ä¸‹çš„é”™è¯¯ä¿¡æ¯ï¼Œè¯·å¸®å¿™åˆ†æä¸€ä¸‹æ˜¯ä»€ä¹ˆåŸå› ï¼Œæ„Ÿè°¢ã€‚\n  File &quot;C:\\Users\\qiuwenqing\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\urllib3\\connectionpool.py&quot;, line 667, in urlopen\n    self._prepare_proxy(conn)\nã€‚ã€‚ã€‚ã€‚ã€‚\nConnectionResetError: [WinError 10054] è¿œç¨‹ä¸»æœºå¼ºè¿«å…³é—­äº†ä¸€ä¸ªç°æœ‰çš„è¿æ¥ã€‚\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File &quot;C:\\Users\\qiuwenqing\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\requests\\adapters.py&quot;, line 486, in send\n    resp = conn.urlopen(\n           ^^^^^^^^^^^^^\nã€‚ã€‚ã€‚ã€‚ã€‚ã€‚\nurllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host=&#39;openaipublic.blob.core.windows.net&#39;, port=443): Max retries exceeded with url: &#47;encodings&#47;cl100k_base.tiktoken (Caused by ProxyError(&#39;Cannot connect to proxy.&#39;, ConnectionResetError(10054, &#39;è¿œç¨‹ä¸»æœºå¼ºè¿«å…³é—­äº†ä¸€ä¸ªç°æœ‰çš„è¿æ¥ã€‚&#39;, None, 10054, None)))\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File &quot;C:\\Work\\Code\\chatGPT_sample\\langchain-main\\02_æ–‡æ¡£QAç³»ç»Ÿ\\DocQA.py&quot;, line 39, in &lt;module&gt;\n    vectorstore = Qdrant.from_documents(\n                  ^^^^^^^^^^^^^^^^^^^^^^\nã€‚ã€‚ã€‚ã€‚ã€‚ã€‚\n  File &quot;C:\\Users\\qiuwenqing\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\requests\\adapters.py&quot;, line 513, in send\n    raise ProxyError(e, request=request)\nrequests.exceptions.ProxyError: HTTPSConnectionPool(host=&#39;openaipublic.blob.core.windows.net&#39;, port=443): Max retries exceeded with url: &#47;encodings&#47;cl100k_base.tiktoken (Caused by ProxyError(&#39;Cannot connect to proxy.&#39;, ConnectionResetError(10054, &#39;è¿œç¨‹ä¸»æœºå¼ºè¿«å…³é—­äº†ä¸€ä¸ªç°æœ‰çš„è¿æ¥ã€‚&#39;, None, 10054, None)))\n","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629185,"discussion_content":"æ ¹æ®ä½ æä¾›çš„é”™è¯¯ä¿¡æ¯ï¼Œè¿™ä¼¼ä¹å’Œä»£ç†æœåŠ¡å™¨æœ‰å…³ã€‚os.environ[&#34;OPENAI_API_BASE&#34;]ä¸ºæä¾›API Keyçš„ç¬¬ä¸‰æ–¹åœ°å€ -- ä¸çŸ¥é“æ˜¯ä¸æ˜¯å’Œè¿™ä¸ªæœ‰å…³ã€‚ä¹Ÿè®¸éœ€è¦é€šè¿‡å¦å¤–çš„æ–¹æ³•æ‹¿åˆ°è‡ªå·±çš„API Keyã€‚\nçœ‹çœ‹å…¶å®ƒåŒå­¦æ˜¯å¦æ›¾é‡åˆ°è¿‡ç±»ä¼¼çš„äº‹æƒ…ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1696783527,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1237079,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e0/57/060b5c21.jpg","nickname":"é‚±æ–‡åº†","note":"","ucode":"2B96FDE64FB59A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629220,"discussion_content":"æ„Ÿè°¢è€å¸ˆï¼Œæˆ‘è®¾ç½®äº†ç¬¬ä¸‰æ–¹çš„api baseä¹‹åå°±å¯ä»¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1696843330,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":381835,"user_name":"LuckyZag","can_delete":false,"product_type":"c1","uid":3579399,"ip_address":"æµ™æ±Ÿ","ucode":"6EAF416E366A9E","user_header":"https://static001.geekbang.org/account/avatar/00/36/9e/07/4ddcd9b8.jpg","comment_is_top":false,"comment_ctime":1695953997,"is_pvip":false,"replies":[{"id":139082,"content":"æˆ‘è§‰å¾—ä½ é‡åˆ°çš„é—®é¢˜æ˜¯å› ä¸º Google Colab è¿è¡Œåœ¨äº‘ç«¯ï¼Œè€Œä¸æ˜¯åœ¨ä½ çš„æœ¬åœ°è®¡ç®—æœºä¸Šã€‚å½“ä½ åœ¨ Colab ä¸­è¿è¡Œ Flask å¹¶å°è¯•è®¿é—® 127.0.0.1 æ—¶ï¼Œä½ å®é™…ä¸Šæ˜¯åœ¨å°è¯•è®¿é—® Google äº‘æœåŠ¡å™¨ä¸Šçš„æœ¬åœ°åœ°å€ï¼Œè€Œä¸æ˜¯ä½ çš„è®¡ç®—æœºä¸Šçš„åœ°å€ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ æ— æ³•æ­£å¸¸æ‰“å¼€ç½‘é¡µçš„åŸå› ã€‚\nå»ºè®®æ˜¯ä½ ä¸è¦ç”¨flaskäº†ï¼Œç›´æ¥ç®€åŒ–æˆæœ¬åœ°å¯¹è¯å§ã€‚\n\ndef main():\n    print(&quot;æ¬¢è¿ä½¿ç”¨é—®ç­”ç³»ç»Ÿï¼è¾“å…¥&#39;é€€å‡º&#39;æ¥ç»“æŸå¯¹è¯ã€‚&quot;)\n    \n    while True:\n        # æ¥æ”¶ç”¨æˆ·è¾“å…¥ä½œä¸ºé—®é¢˜\n        question = input(&quot;è¯·è¾“å…¥ä½ çš„é—®é¢˜: &quot;)\n        \n        # å¦‚æœç”¨æˆ·è¾“å…¥â€œé€€å‡ºâ€ï¼Œåˆ™ç»“æŸå¯¹è¯\n        if question.lower() == &#39;é€€å‡º&#39;:\n            print(&quot;æ„Ÿè°¢ä½¿ç”¨ï¼Œå†è§ï¼&quot;)\n            break\n        \n        # RetrievalQAé“¾ - è¯»å…¥é—®é¢˜ï¼Œç”Ÿæˆç­”æ¡ˆ\n        result = qa_chain({&quot;query&quot;: question})\n        \n        # æ‰“å°å¤§æ¨¡å‹çš„å›ç­”ç»“æœ\n        print(&quot;ç­”æ¡ˆ:&quot;, result)\n\nif __name__ == &quot;__main__&quot;:\n    main()","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1695981066,"ip_address":"æ–°åŠ å¡","comment_id":381835,"utype":1}],"discussion_count":2,"race_medal":0,"score":6,"product_id":100617601,"comment_content":"è€å¸ˆæˆ‘åœ¨colabä¸­æŠŠqaçš„ä»£ç ä»¥ipynbå½¢å¼æ‰§è¡Œï¼Œåˆ°flaské‚£ä¸€æ­¥çš„æ—¶å€™è·³è½¬åˆ°127.0.0.1æ— æ³•æ­£å¸¸æ‰“å¼€ç½‘é¡µï¼Œæ„Ÿè§‰æ˜¯æˆ‘æŒ‚äº†vpnçš„é—®é¢˜ï¼Œä½†æ˜¯ä¸æŒ‚vpnåˆæ‰“ä¸å¼€colabï¼Œæ€ä¹ˆè§£å†³å‘€ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":628852,"discussion_content":"æˆ‘è§‰å¾—ä½ é‡åˆ°çš„é—®é¢˜æ˜¯å› ä¸º Google Colab è¿è¡Œåœ¨äº‘ç«¯ï¼Œè€Œä¸æ˜¯åœ¨ä½ çš„æœ¬åœ°è®¡ç®—æœºä¸Šã€‚å½“ä½ åœ¨ Colab ä¸­è¿è¡Œ Flask å¹¶å°è¯•è®¿é—® 127.0.0.1 æ—¶ï¼Œä½ å®é™…ä¸Šæ˜¯åœ¨å°è¯•è®¿é—® Google äº‘æœåŠ¡å™¨ä¸Šçš„æœ¬åœ°åœ°å€ï¼Œè€Œä¸æ˜¯ä½ çš„è®¡ç®—æœºä¸Šçš„åœ°å€ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ æ— æ³•æ­£å¸¸æ‰“å¼€ç½‘é¡µçš„åŸå› ã€‚\nå»ºè®®æ˜¯ä½ ä¸è¦ç”¨flaskäº†ï¼Œç›´æ¥ç®€åŒ–æˆæœ¬åœ°å¯¹è¯å§ã€‚\n\ndef main():\n    print(&#34;æ¬¢è¿ä½¿ç”¨é—®ç­”ç³»ç»Ÿï¼è¾“å…¥&#39;é€€å‡º&#39;æ¥ç»“æŸå¯¹è¯ã€‚&#34;)\n    \n    while True:\n        # æ¥æ”¶ç”¨æˆ·è¾“å…¥ä½œä¸ºé—®é¢˜\n        question = input(&#34;è¯·è¾“å…¥ä½ çš„é—®é¢˜: &#34;)\n        \n        # å¦‚æœç”¨æˆ·è¾“å…¥â€œé€€å‡ºâ€ï¼Œåˆ™ç»“æŸå¯¹è¯\n        if question.lower() == &#39;é€€å‡º&#39;:\n            print(&#34;æ„Ÿè°¢ä½¿ç”¨ï¼Œå†è§ï¼&#34;)\n            break\n        \n        # RetrievalQAé“¾ - è¯»å…¥é—®é¢˜ï¼Œç”Ÿæˆç­”æ¡ˆ\n        result = qa_chain({&#34;query&#34;: question})\n        \n        # æ‰“å°å¤§æ¨¡å‹çš„å›ç­”ç»“æœ\n        print(&#34;ç­”æ¡ˆ:&#34;, result)\n\nif __name__ == &#34;__main__&#34;:\n    main()","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1695981066,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1262168,"avatar":"https://static001.geekbang.org/account/avatar/00/13/42/58/2286eca6.jpg","nickname":"HdUIprince","note":"","ucode":"2510EBFACDBDB2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":628878,"discussion_content":"æœ¬åœ°ç”¨Jupyterå¯ä»¥è¿™æ ·ä¿®æ”¹ï¼š\n\n# app.run(host=&#39;0.0.0.0&#39;,debug=True,port=5000)\nfrom werkzeug.serving import run_simple\nrun_simple(&#39;localhost&#39;, 5000, app)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1696081555,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¾å›½","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":381826,"user_name":"å¤ä»”","can_delete":false,"product_type":"c1","uid":1115178,"ip_address":"åŒ—äº¬","ucode":"79483980F52780","user_header":"https://static001.geekbang.org/account/avatar/00/11/04/2a/232f5f5f.jpg","comment_is_top":false,"comment_ctime":1695903179,"is_pvip":false,"replies":[{"id":139094,"content":"æ¢æˆèƒ½å®¹çº³æ›´å¤šTokençš„model:\ngpt-4 - 8192\ngpt-3.5-turbo-16k - 16K\nhttps:&#47;&#47;platform.openai.com&#47;docs&#47;models\nç›®å‰æˆ‘æ²¡æœ‰æ‰¾åˆ°åœ¨LangChainä¸­é™å®šæç¤ºè¯­Tokenæ•°é‡çš„æ–¹æ³•ï¼Œå¦‚æœæœ‰åŒå­¦çŸ¥é“æ›´å¥½çš„æ–¹æ³•å¯ä»¥åˆ†äº«ã€‚\n","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1696176048,"ip_address":"æ–°åŠ å¡","comment_id":381826,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100617601,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œå‚è€ƒä»£ç ï¼Œè¿›è¡Œæé—®ï¼ŒæŠ¥é”™äº†ï¼Œè¿™ä¸ªæœ€å¤§çš„tokenï¼Œåœ¨å“ªé‡Œè®¾ç½®å‘¢ï¼Ÿopenai.error.InvalidRequestError: This model&#39;s maximum context length is 4097 tokens. However, your messages resulted in 4693 tokens. Please reduce the length of the messages.","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":628893,"discussion_content":"æ¢æˆèƒ½å®¹çº³æ›´å¤šTokençš„model:\ngpt-4 - 8192\ngpt-3.5-turbo-16k - 16K\nhttps://platform.openai.com/docs/models\nç›®å‰æˆ‘æ²¡æœ‰æ‰¾åˆ°åœ¨LangChainä¸­é™å®šæç¤ºè¯­Tokenæ•°é‡çš„æ–¹æ³•ï¼Œå¦‚æœæœ‰åŒå­¦çŸ¥é“æ›´å¥½çš„æ–¹æ³•å¯ä»¥åˆ†äº«ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1696176048,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":381366,"user_name":"å°æ’","can_delete":false,"product_type":"c1","uid":1117292,"ip_address":"æµ™æ±Ÿ","ucode":"A7B4709A7A61AC","user_header":"https://static001.geekbang.org/account/avatar/00/11/0c/6c/91017c02.jpg","comment_is_top":false,"comment_ctime":1695108596,"is_pvip":false,"replies":[{"id":138931,"content":"åŒå­¦ï¼Œå¯å¦debugä¸€ä¸‹ï¼Œç ”ç©¶ç ”ç©¶æç¤ºçš„æ ¼å¼ï¼Ÿæˆ‘ç›¸ä¿¡ä½ ä¼šæ”¶è·å¾ˆå¤šã€‚\nå¦å¤–ï¼šåç»­è¯¾ç¨‹ä¸­ä¼šæœ‰å¤§é‡çš„å…³äºä¼ é€’ç»™LLMçš„æç¤ºçš„è¯¦ç»†è®²è§£ï¼ŒåŒ…æ‹¬Debugçš„æ­¥éª¤ã€‚è¯·æœŸå¾…ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1695138563,"ip_address":"æ–°åŠ å¡","comment_id":381366,"utype":1}],"discussion_count":2,"race_medal":0,"score":6,"product_id":100617601,"comment_content":"æ ¸å¿ƒå®ç°æœºåˆ¶é‡Œçš„ç¬¬äº”æ­¥ï¼šæŠŠé—®é¢˜å’Œç›¸ä¼¼çš„åµŒå…¥ç‰‡ä¼ é€’ç»™è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ï¼Œä½¿ç”¨åŒ…å«é—®é¢˜å’Œæ£€ç´¢åˆ°çš„åˆ†å‰²çš„æç¤ºç”Ÿæˆç­”æ¡ˆã€‚\nè€å¸ˆï¼Œæˆ‘æƒ³çŸ¥é“LLMæ”¶åˆ°çš„æç¤ºå¤§æ¦‚é•¿å•¥æ ·ï¼Ÿå¦‚æœæ¢æˆå…¶ä»–çš„LLMï¼Œé‚£ä¹ˆLangchainç»„ç»‡å‡ºæ¥çš„æç¤ºæ˜¯å¦ä¹Ÿä¸ä¸€æ ·ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":628283,"discussion_content":"åŒå­¦ï¼Œå¯å¦debugä¸€ä¸‹ï¼Œç ”ç©¶ç ”ç©¶æç¤ºçš„æ ¼å¼ï¼Ÿæˆ‘ç›¸ä¿¡ä½ ä¼šæ”¶è·å¾ˆå¤šã€‚\nå¦å¤–ï¼šåç»­è¯¾ç¨‹ä¸­ä¼šæœ‰å¤§é‡çš„å…³äºä¼ é€’ç»™LLMçš„æç¤ºçš„è¯¦ç»†è®²è§£ï¼ŒåŒ…æ‹¬Debugçš„æ­¥éª¤ã€‚è¯·æœŸå¾…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1695138563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1117292,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0c/6c/91017c02.jpg","nickname":"å°æ’","note":"","ucode":"A7B4709A7A61AC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":628762,"discussion_content":"æˆ‘æ›¿æ¢æˆäº†æ–‡å¿ƒä¸€è¨€ï¼ˆhttps://github.com/ninehills/langchain-wenxinï¼‰\nä»¥ä¸‹æ˜¯debugå‡ºæ¥çš„å†…å®¹ï¼Œåˆ†äº«ç»™å¤§å®¶ï¼š\n\nUse the following pieces of context to answer the question at the end. If you don&#39;t know the answer, just say that you don&#39;t know, don&#39;t try to make up an answer.\n\næ˜“é€Ÿé²œèŠ± è¿™ä¸ªå¤§å®¶åº­éœ€è¦æ‚¨ã€æˆ‘ã€ä»–æ¯ä¸€ä½å‘˜å·¥ç§¯æå‘æ‰¬â€œ å›¢\\nç»“å‘ä¸Šï¼Œå®Œç¾æ— ç¼º â€çš„ä¼ä¸šç²¾ç¥ï¼Œä»¥é«˜åº¦çš„ä¸»äººç¿è´£ä»»æ„Ÿã€ä½¿å‘½æ„Ÿï¼Œ\\nä¸æ˜“é€Ÿé²œèŠ± åŒå‘¼å¸ã€å…±å‘½ è¿ï¼Œåœ¨å„è‡ªçš„å²—ä½ä¸Šï¼Œå‹¤å¥‹æ•¬ä¸šï¼Œå°½èŒå°½\\nè´£ï¼Œå¥‹åŠ›æ‹¼æã€‚ä½œä¸ºå¤§å®¶åº­çš„ä¸€å‘˜ï¼ŒåŒä»ä¹‹é—´åº”é»˜å¥‘é…åˆ......\n\nQuestion: è‘£äº‹é•¿è‡´è¾ä¸­æåˆ°çš„ä¼ä¸šç²¾ç¥æ˜¯ä»€ä¹ˆï¼Ÿ\nHelpful Answer:","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1695807818,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":381288,"user_name":"æ¨æ¾","can_delete":false,"product_type":"c1","uid":1264510,"ip_address":"ä¸Šæµ·","ucode":"A4373FF2845251","user_header":"https://static001.geekbang.org/account/avatar/00/13/4b/7e/b469c383.jpg","comment_is_top":false,"comment_ctime":1694999284,"is_pvip":false,"replies":[{"id":138890,"content":"å¯ä»¥å•Šï¼Œå°±é€‰æ‹©å“åº”çš„Modelè¿›è¡ŒåµŒå…¥å‘—ï¼Œæœ‰ç›¸å…³çš„Modelå’Œæ–¹æ³•ã€‚çœ‹ä¸€ä¸‹ä¸‹é¢é“¾æ¥çš„â€œCode search using embeddingsâ€è¿™ä¸€æ®µå§ã€‚\nhttps:&#47;&#47;platform.openai.com&#47;docs&#47;guides&#47;embeddings&#47;embeddings\nhttps:&#47;&#47;python.langchain.com&#47;docs&#47;modules&#47;data_connection&#47;document_transformers&#47;text_splitters&#47;code_splitter","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1695008883,"ip_address":"æ–°åŠ å¡","comment_id":381288,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100617601,"comment_content":"è¿™ç§æ–¹å¼æ˜¯ä¸æ˜¯åªèƒ½å¯¹æ–‡å­—è¿›è¡Œembeddingï¼Ÿå¯¹äºä»£ç ä¹‹ç±»éæ–‡å­—ç±»å‹çš„æ€ä¹ˆåšembeddingï¼ŸåŒæ ·çš„æ–¹å¼ä¹Ÿé€‚ç”¨ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":628144,"discussion_content":"å¯ä»¥å•Šï¼Œå°±é€‰æ‹©å“åº”çš„Modelè¿›è¡ŒåµŒå…¥å‘—ï¼Œæœ‰ç›¸å…³çš„Modelå’Œæ–¹æ³•ã€‚çœ‹ä¸€ä¸‹ä¸‹é¢é“¾æ¥çš„â€œCode search using embeddingsâ€è¿™ä¸€æ®µå§ã€‚\nhttps://platform.openai.com/docs/guides/embeddings/embeddings\nhttps://python.langchain.com/docs/modules/data_connection/document_transformers/text_splitters/code_splitter","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1695008883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":381268,"user_name":"åœ¨è·¯ä¸Š","can_delete":false,"product_type":"c1","uid":1402511,"ip_address":"å¹¿ä¸œ","ucode":"6E31908EFE1107","user_header":"https://static001.geekbang.org/account/avatar/00/15/66/8f/02be926d.jpg","comment_is_top":false,"comment_ctime":1694958952,"is_pvip":false,"replies":[{"id":138912,"content":"å¥½æ£’ï¼ŒT5èƒ½åŠ›æœ‰é™ï¼Œè®©æˆ‘ä»¬ä¸€åŒå¯»æ‰¾èƒ½ç”¨çš„å¹³æ›¿ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1695086427,"ip_address":"æ–°åŠ å¡","comment_id":381268,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100617601,"comment_content":"\n1.è¯·ä½ ç”¨è‡ªå·±çš„è¯ç®€è¿°ä¸€ä¸‹è¿™ä¸ªåŸºäºæ–‡æ¡£çš„ QAç³»ç»Ÿçš„å®ç°æµç¨‹\n1.åŠ è½½æ–‡æ¡£ï¼›2.å°†æ–‡æ¡£åˆ‡å‰²æˆç‰‡æ®µï¼›3.å°†ç‰‡æ®µç¼–ç æˆç‰‡æ®µå‘é‡ï¼›4.å°†ç‰‡æ®µå‘é‡å­˜å…¥æ•°æ®åº“ï¼›5.å°†é—®é¢˜ç¼–ç æˆé—®é¢˜å‘é‡ï¼›6.ç”¨é—®é¢˜å‘é‡åŒ¹é…ç›¸ä¼¼çš„ç‰‡æ®µå‘é‡åˆ—è¡¨ï¼›7.å°†é—®é¢˜å’Œç›¸å…³çš„ç‰‡æ®µä¼ ç»™å¤§è¯­è¨€æ¨¡å‹ï¼Œç”±å¤§è¯­è¨€æ¨¡å‹å›ç­”é—®é¢˜ã€‚\n2.ä½¿ç”¨å‘é‡æ•°æ®åº“Chromaå’Œæ¨¡å‹google&#47;flan-t5-xlå®ç°QAç³»ç»Ÿ\nä»æµ‹è¯•ç»“æœçœ‹ï¼Œt5æ¨¡å‹æ— æ³•å›ç­”é—®é¢˜ï¼Œå¾ˆå¯èƒ½æ˜¯æˆ‘çš„è°ƒç”¨æ–¹å¼æœ‰é—®é¢˜ã€‚åŒ¹é…åˆ°çš„ç›¸å…³ç‰‡æ®µéœ€è¦ä½œä¸ºcontextä¼ ç»™æ¨¡å‹ï¼Œä¸åŒæ¨¡å‹çš„ä¼ é€’æ–¹å¼å¯èƒ½æœ‰ä¸åŒæ–¹å¼ã€‚\n\nimport os\nos.environ[&quot;http_proxy&quot;] = &quot;http:&#47;&#47;127.0.0.1:7890&quot;\nos.environ[&quot;https_proxy&quot;] = &quot;http:&#47;&#47;127.0.0.1:7890&quot;\n\nfrom dotenv import load_dotenv\nload_dotenv()\n\n...\nfrom langchain.vectorstores import Chroma\nfrom langchain.embeddings import OpenAIEmbeddings\n\nvectorstore = Chroma.from_documents(\n    documents=chunked_documents, # ä»¥åˆ†å—çš„æ–‡æ¡£\n    embedding=OpenAIEmbeddings(request_timeout=60000), # ç”¨OpenAIçš„Embedding ModelåšåµŒå…¥\n    persist_directory=&quot;.&#47;vectorstore&#47;chroma&quot;,  # å­˜å‚¨\n    collection_name=&quot;my_documents&quot;,) # æŒ‡å®šcollection_name\n\nprint(&quot;vectorstore:&quot;, vectorstore)\nimport logging \nfrom langchain.chains import RetrievalQA \n\n# è®¾ç½®Logging\nlogging.basicConfig(level=logging.DEBUG)\n\nfrom langchain import HuggingFaceHub\nllm = HuggingFaceHub(repo_id=&quot;google&#47;flan-t5-base&quot;)\nqa_chain = RetrievalQA.from_chain_type(llm,retriever=vectorstore.as_retriever())\n\nquestion=&quot;è‘£äº‹é•¿è‡´è¾ä¸­æåˆ°çš„ä¼ä¸šç²¾ç¥æ˜¯ä»€ä¹ˆï¼Ÿ&quot;\nresult = qa_chain.run(query=question)\nprint(result)","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":628206,"discussion_content":"å¥½æ£’ï¼ŒT5èƒ½åŠ›æœ‰é™ï¼Œè®©æˆ‘ä»¬ä¸€åŒå¯»æ‰¾èƒ½ç”¨çš„å¹³æ›¿ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1695086427,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":380964,"user_name":"nick","can_delete":false,"product_type":"c1","uid":1061843,"ip_address":"åŒ—äº¬","ucode":"91263882076AC0","user_header":"https://static001.geekbang.org/account/avatar/00/10/33/d3/30a89b21.jpg","comment_is_top":false,"comment_ctime":1694514821,"is_pvip":false,"replies":[{"id":138749,"content":"æ–‡æ¡£æ”¾åœ¨å¤šçº§ç›®å½•ä¸‹é¢è‚¯å®šæ˜¯å¯ä»¥çš„å‘€ï¼Œä¿®æ”¹è¯»å…¥çš„æ–¹å¼é€’å½’ç›®å½•è¯»å…¥å°±è¡Œå•¦ã€‚WPS&#47;çŸ³å¢¨æ–‡æ¡£ç±»ä¼¼çš„åœ¨çº¿ååŒå·¥å…·ï¼Œç°åœ¨è‚¯å®šä¸è¡Œï¼Œè¦ç­‰æ¥å£å–½ã€‚è¦æ˜¯Google Docï¼ŒOffice 365çš„æ–‡æ¡£ï¼Œé‚£ä¹ˆAPIåº”è¯¥æ˜¯å¯ä»¥åšåˆ°äº†ã€‚å› ä¸ºæœ‰æ¥å£äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1694533284,"ip_address":"æ–°åŠ å¡","comment_id":380964,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100617601,"comment_content":"æ–‡æ¡£æ–‡ä»¶åªèƒ½æ”¾åœ¨ä¸€çº§ç›®å½•é‡Œå—ï¼Ÿèƒ½ä¸èƒ½åšåˆ°å¤šçº§ç›®å½•ä¸‹æ–‡æ¡£çš„é—®è¾¾ï¼Ÿå¦å¤–åƒä½¿ç”¨WPSè¿™ä¸€ç±»åœ¨çº¿ååŒå·¥å…·ä¸Šé¢çš„æ–‡æ¡£èƒ½å¦å®ç°ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627783,"discussion_content":"æ–‡æ¡£æ”¾åœ¨å¤šçº§ç›®å½•ä¸‹é¢è‚¯å®šæ˜¯å¯ä»¥çš„å‘€ï¼Œä¿®æ”¹è¯»å…¥çš„æ–¹å¼é€’å½’ç›®å½•è¯»å…¥å°±è¡Œå•¦ã€‚WPS/çŸ³å¢¨æ–‡æ¡£ç±»ä¼¼çš„åœ¨çº¿ååŒå·¥å…·ï¼Œç°åœ¨è‚¯å®šä¸è¡Œï¼Œè¦ç­‰æ¥å£å–½ã€‚è¦æ˜¯Google Docï¼ŒOffice 365çš„æ–‡æ¡£ï¼Œé‚£ä¹ˆAPIåº”è¯¥æ˜¯å¯ä»¥åšåˆ°äº†ã€‚å› ä¸ºæœ‰æ¥å£äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694533285,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":380961,"user_name":"Geek_cbcfc8","can_delete":false,"product_type":"c1","uid":2532655,"ip_address":"åŒ—äº¬","ucode":"A2141FDF6C7663","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/lJR3Ba9EuTLRSry9sajEeRcvfwuiaPDr41KicHYGxcsXnRcTxaTp3OHq24AebUR9MS016zSEmqAyws5iaQiaj5TDdQ/132","comment_is_top":false,"comment_ctime":1694510705,"is_pvip":false,"replies":[{"id":138750,"content":"æˆ‘è¿˜æ²¡æœ‰å°è¯•è¿‡å¾ˆå¤šæ¨¡å‹ï¼Œä½ å¯ä»¥è¯•è¯•Llama 2å—ï¼Ÿä¸­æ–‡çš„è¯ï¼Œå¯ä»¥è¯•è¯•ç™¾å·ï¼Œåƒé—®å—ï¼Ÿæˆ‘æ€€ç–‘è¿™äº›æ¨¡å‹èŠå¤©å¯ä»¥ï¼Œéµå¾ªæŒ‡ä»¤èƒ½åŠ›ç›®å‰ä¸ä¼šå¾ˆå¼ºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1694533375,"ip_address":"æ–°åŠ å¡","comment_id":380961,"utype":1}],"discussion_count":2,"race_medal":0,"score":6,"product_id":100617601,"comment_content":"è€å¸ˆä½ å¥½ã€‚ä½ ä»¬LLMéƒ¨åˆ†ç”¨çš„æ˜¯ä»€ä¹ˆæ¨¡å‹å‘¢ï¼Œç›®å‰å‘ç°å¼€æºçš„é™¤äº†chatglmï¼Œä¸­æ–‡è¡¨ç°éƒ½ä¸æ€ä¹ˆå¥½ï¼Œå°¤å…¶æ˜¯æ¨¡æ¿çš„æŒ‡ä»¤ç†è§£æ–¹é¢","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627784,"discussion_content":"æˆ‘è¿˜æ²¡æœ‰å°è¯•è¿‡å¾ˆå¤šæ¨¡å‹ï¼Œä½ å¯ä»¥è¯•è¯•Llama 2å—ï¼Ÿä¸­æ–‡çš„è¯ï¼Œå¯ä»¥è¯•è¯•ç™¾å·ï¼Œåƒé—®å—ï¼Ÿæˆ‘æ€€ç–‘è¿™äº›æ¨¡å‹èŠå¤©å¯ä»¥ï¼Œéµå¾ªæŒ‡ä»¤èƒ½åŠ›ç›®å‰ä¸ä¼šå¾ˆå¼ºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694533376,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1110039,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f0/17/796a3d20.jpg","nickname":"è¨€åå¹´","note":"","ucode":"67B8B49C3A3B17","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":628583,"discussion_content":"å› ä¸ºè¿™ä¸ªè¯„è®ºï¼Œå‘ç°äº†æ–°å¤§é™† æ™ºè°±æ¸…è¨€ä¹Ÿå°±æ˜¯ chatglm ï¼Œæˆ‘åˆšè¯•äº†ä¸‹ï¼Œè¿˜æŒºå¥½ç”¨çš„å‘¢","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1695552072,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":380959,"user_name":"Kevin","can_delete":false,"product_type":"c1","uid":2422166,"ip_address":"æ¾³å¤§åˆ©äºš","ucode":"3BF17EEEA6DBF7","user_header":"https://static001.geekbang.org/account/avatar/00/24/f5/96/4e3dd4e1.jpg","comment_is_top":false,"comment_ctime":1694508664,"is_pvip":false,"replies":[{"id":138751,"content":"å“¦ï¼Œå¯¹å¯¹ã€‚åŒå­¦ä½ è¯´çš„å¯¹ã€‚ä»£ç å·²ç»æ•´ç†ã€‚Retriverä½œä¸ºå®ä¾‹åŒ–qa_chainçš„ä¸€ä¸ªå‚æ•°passåˆ°Chainé‡Œé¢å»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":1809833,"ctime":1694533449,"ip_address":"æ–°åŠ å¡","comment_id":380959,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100617601,"comment_content":"è€å¸ˆè¿™ä¸ªMutiQueryRetrieverä¼¼ä¹æ²¡æœ‰ç”¨ï¼Œç½‘é¡µåº”ç”¨ç›´æ¥qa_chainäº†ã€‚å¦‚æœç”¨çš„è¯ï¼Œä¹Ÿæ˜¯ä½œä¸ºå®ä¾‹åŒ–qa_chainçš„ä¸€ä¸ªå‚æ•°passè¿›å»ä¹ˆï¼Ÿretriever_from_llm = MultiQueryRetriever.from_llm(retriever=vectorstore.as_retriever(), llm=llm)","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627785,"discussion_content":"å“¦ï¼Œå¯¹å¯¹ã€‚åŒå­¦ä½ è¯´çš„å¯¹ã€‚ä»£ç å·²ç»æ•´ç†ã€‚Retriverä½œä¸ºå®ä¾‹åŒ–qa_chainçš„ä¸€ä¸ªå‚æ•°passåˆ°Chainé‡Œé¢å»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694533449,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":380937,"user_name":"æ— å¿ƒæ’æŸ³","can_delete":false,"product_type":"c1","uid":2433253,"ip_address":"ç¾å›½","ucode":"26BBA6C1234454","user_header":"https://static001.geekbang.org/account/avatar/00/25/20/e5/8f7e835f.jpg","comment_is_top":false,"comment_ctime":1694485975,"is_pvip":false,"replies":[{"id":138743,"content":"è¿™ä¸ªçœ‹èµ·æ¥å°±æ˜¯ç‰ˆæœ¬é—®é¢˜ã€‚ä½ è°ƒç”¨çš„æ–¹æ³•Qdrant.from_documentsä¸­ï¼Œæ‰¾ä¸åˆ°location=&quot;:memory:&quot;è¿™ä¸ªå‚æ•°ã€‚è¿™æˆ–è®¸æ˜¯LangChainç‰ˆæœ¬é—®é¢˜ï¼Œæˆ–è®¸æ˜¯Qdrantç‰ˆæœ¬é—®é¢˜ï¼Œéœ€è¦pip upgradeå‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬è¯•ä¸€è¯•ã€‚\n\nhttps:&#47;&#47;api.python.langchain.com&#47;en&#47;latest&#47;vectorstores&#47;langchain.vectorstores.qdrant.Qdrant.html#langchain.vectorstores.qdrant.Qdrant.from_documents\n\né‚£ä¹ˆåŒå­¦ï¼Œä½ çœ‹æˆ‘ä¸Šé¢å‘çš„è¿™ä¸ªLangChainæœ€æ–°ç‰ˆçš„APIè¯´æ˜ï¼Œæ˜¯æœ‰&#39;location&#39;å‚æ•°çš„ã€‚\n\nParameters\ntexts â€“ A list of texts to be indexed in Qdrant.\nembedding â€“ A subclass of Embeddings, responsible for text vectorization.\nmetadatas â€“ An optional list of metadata. If provided it has to be of the same length as a list of texts.\nids â€“ Optional list of ids to associate with the texts. Ids have to be uuid-like strings.\nlocation â€“ If :memory: - use in-memory Qdrant instance. If str - use it as a url parameter. If None - fallback to relying on host and port parameters.","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1809833,"ctime":1694486878,"ip_address":"æ–°åŠ å¡","comment_id":380937,"utype":1}],"discussion_count":9,"race_medal":0,"score":6,"product_id":100617601,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘å°è¯•è¿è¡Œè¿™æ®µä»£ç ï¼š\nvectorstore = Qdrant.from_documents(\n    documents=chunked_documents, \n    embedding=OpenAIEmbeddings(), \n    location=&quot;:memory:&quot;,\n    collection_name=&quot;my_documents&quot;,) ï¼Œä½†æ˜¯å‡ºç°äº†ä¸‹é¢çš„é”™è¯¯ï¼šTypeError: Client.__init__() got an unexpected keyword argument &#39;location&#39;ã€‚ æˆ‘æŸ¥çœ‹äº†æœ‰å…³Qrant çš„æ–‡æ¡£ ï¼ˆhttps:&#47;&#47;qdrant.tech&#47;documentation&#47;integrations&#47;langchain&#47;ï¼‰ï¼Œä¹Ÿæ²¡è§£å†³é—®é¢˜ã€‚éº»çƒ¦è€å¸ˆæŒ‡ç‚¹ä¸‹ã€‚","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627739,"discussion_content":"è¿™ä¸ªçœ‹èµ·æ¥å°±æ˜¯ç‰ˆæœ¬é—®é¢˜ã€‚ä½ è°ƒç”¨çš„æ–¹æ³•Qdrant.from_documentsä¸­ï¼Œæ‰¾ä¸åˆ°location=&#34;:memory:&#34;è¿™ä¸ªå‚æ•°ã€‚è¿™æˆ–è®¸æ˜¯LangChainç‰ˆæœ¬é—®é¢˜ï¼Œæˆ–è®¸æ˜¯Qdrantç‰ˆæœ¬é—®é¢˜ï¼Œéœ€è¦pip upgradeå‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬è¯•ä¸€è¯•ã€‚\n\nhttps://api.python.langchain.com/en/latest/vectorstores/langchain.vectorstores.qdrant.Qdrant.html#langchain.vectorstores.qdrant.Qdrant.from_documents\n\né‚£ä¹ˆåŒå­¦ï¼Œä½ çœ‹æˆ‘ä¸Šé¢å‘çš„è¿™ä¸ªLangChainæœ€æ–°ç‰ˆçš„APIè¯´æ˜ï¼Œæ˜¯æœ‰&#39;location&#39;å‚æ•°çš„ã€‚\n\nParameters\ntexts â€“ A list of texts to be indexed in Qdrant.\nembedding â€“ A subclass of Embeddings, responsible for text vectorization.\nmetadatas â€“ An optional list of metadata. If provided it has to be of the same length as a list of texts.\nids â€“ Optional list of ids to associate with the texts. Ids have to be uuid-like strings.\nlocation â€“ If :memory: - use in-memory Qdrant instance. If str - use it as a url parameter. If None - fallback to relying on host and port parameters.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694486878,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2848334,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/76/4e/344fc0a0.jpg","nickname":"Volcano@ä¾¯æ˜æ‰¬","note":"","ucode":"4E4D97B93F6545","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":628581,"discussion_content":"è€å¸ˆï¼Œå¦‚æœåµŒå…¥è¯æ˜¯ä¸€ä¸ªæ–°çš„ç»„åˆè¯ï¼Œæˆ‘æ€ä¹ˆæ‰èƒ½åŠ åˆ°LangChainï¼Œä»¥å‡å°‘è¯­ä¹‰ä¸Šçš„æ­§ä¹‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1695550503,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":2848334,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/76/4e/344fc0a0.jpg","nickname":"Volcano@ä¾¯æ˜æ‰¬","note":"","ucode":"4E4D97B93F6545","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":628839,"discussion_content":"è¿™ä¸ªéœ€è¦å¾®è°ƒç›¸åº”çš„æä¾›åµŒå…¥çš„LLMå§ï¼Œåº”è¯¥ä¸æ˜¯LangChainæœ¬èº«èƒ½åšåˆ°çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1695903450,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":628581,"ip_address":"æ–°åŠ å¡","group_id":0},"score":628839,"extra":""}]},{"author":{"id":2748121,"avatar":"https://static001.geekbang.org/account/avatar/00/29/ee/d9/10005a4a.jpg","nickname":"æŸ¯æ","note":"","ucode":"1B2A063DDE9C90","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627887,"discussion_content":"æˆ‘ä¹Ÿé‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œ\npip install --upgrade qdrant-client\nåè§£å†³äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694658451,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2433253,"avatar":"https://static001.geekbang.org/account/avatar/00/25/20/e5/8f7e835f.jpg","nickname":"æ— å¿ƒæ’æŸ³","note":"","ucode":"26BBA6C1234454","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627791,"discussion_content":"è€å¸ˆä½ å¥½ï¼Œå·²ç»å°è¯•å°†langchainå’ŒQdrant éƒ½æ›´æ–°åˆ°äº†æœ€æ–°ç‰ˆæœ¬ï¼Œä»ç„¶æ˜¯åŒæ ·çš„é”™è¯¯ï¼Œå¯ä»¥æä¾›ä¸‹ä½ å¯¹åº”çš„langchainå’ŒQdrant ç‰ˆæœ¬ç»™æˆ‘å—ï¼Ÿè°¢è°¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694550290,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¾å›½","group_id":0},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1024164,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a0/a4/b060c723.jpg","nickname":"é˜¿æ–¯è’‚èŠ¬","note":"","ucode":"61D5E3BDA4EBC5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2433253,"avatar":"https://static001.geekbang.org/account/avatar/00/25/20/e5/8f7e835f.jpg","nickname":"æ— å¿ƒæ’æŸ³","note":"","ucode":"26BBA6C1234454","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627884,"discussion_content":"è¯·é—®è§£å†³äº†å—ï¼Œä½ ç°åœ¨çš„ langchainå’Œqdrant-clientæœ€æ–°ç‰ˆæœ¬åˆ†åˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694655277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":627791,"ip_address":"å¹¿ä¸œ","group_id":0},"score":627884,"extra":""},{"author":{"id":1024164,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a0/a4/b060c723.jpg","nickname":"é˜¿æ–¯è’‚èŠ¬","note":"","ucode":"61D5E3BDA4EBC5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2433253,"avatar":"https://static001.geekbang.org/account/avatar/00/25/20/e5/8f7e835f.jpg","nickname":"æ— å¿ƒæ’æŸ³","note":"","ucode":"26BBA6C1234454","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627885,"discussion_content":"é‡åˆ°äº†è·Ÿä½ ç±»ä¼¼çš„é—®é¢˜ï¼Œæˆ‘çš„é”™è¯¯å †æ ˆæœ€åæŒ‡å‘äº† qdrant_client.py\næŸ¥çœ‹æœ¬æœºqdrant-client ç‰ˆæœ¬æ˜¯ 0.11.10\nçœ‹äº†ä¸‹æºç ï¼Œç¡®å®æœ‰ _grpc_channel å±æ€§ï¼Œä½†æ˜¯æœ€æ–°çš„ 1.5.0 ç‰ˆæœ¬æºç æ²¡æœ‰\nå‡çº§ qdrant-client åˆ° 1.5.0 åè§£å†³äº†ï¼Œå…·ä½“åŸå› æš‚æ—¶æ²¡æœ‰ä»”ç»†ç ”ç©¶\nå¦‚æœä½ çš„é”™è¯¯å †æ ˆè·Ÿæˆ‘çš„ä¸€è‡´ï¼Œä¹Ÿå¯ä»¥è¯•è¯•çœ‹\n\nTypeError: Client.__init__() got an unexpected keyword argument &#39;location&#39;\nException ignored in: &lt;function QdrantClient.__del__ at 0x0000022E3AD071C0&gt;\nTraceback (most recent call last):\n  File &#34;~\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\qdrant_client\\qdrant_client.py&#34;, line 132, in __del__\n    if self._grpc_channel is not None:\nAttributeError: &#39;QdrantClient&#39; object has no attribute &#39;_grpc_channel&#39;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694657648,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":627791,"ip_address":"å¹¿ä¸œ","group_id":0},"score":627885,"extra":""},{"author":{"id":2433253,"avatar":"https://static001.geekbang.org/account/avatar/00/25/20/e5/8f7e835f.jpg","nickname":"æ— å¿ƒæ’æŸ³","note":"","ucode":"26BBA6C1234454","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1024164,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a0/a4/b060c723.jpg","nickname":"é˜¿æ–¯è’‚èŠ¬","note":"","ucode":"61D5E3BDA4EBC5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627948,"discussion_content":"è°¢è°¢ä½ æä¾›çš„å»ºè®®ã€‚æˆ‘æŠŠlangchain å’Œqdrant-clientéƒ½å‡çº§åˆ°äº†æœ€æ–°ç‰ˆæœ¬ï¼Œæ²¡æœ‰è§£å†³é—®é¢˜ã€‚åæ¥æŠŠç‰ˆæœ¬éƒ½é™çº§äº†ï¼Œé—®é¢˜è§£å†³äº†ã€‚é™çº§åçš„ç‰ˆæœ¬æ˜¯ï¼šlangchain==0.0.279ï¼› qdrant-client==1.3.2","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1694699726,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":627885,"ip_address":"ç¾å›½","group_id":0},"score":627948,"extra":""}]}]},{"had_liked":false,"id":392363,"user_name":"yanyu-xin","can_delete":false,"product_type":"c1","uid":1899757,"ip_address":"å¹¿ä¸œ","ucode":"3AA389F9E4C236","user_header":"","comment_is_top":false,"comment_ctime":1720703759,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100617601,"comment_content":"ç”¨é˜¿é‡Œäº‘çš„é€šä¹‰åƒé—®æ”¹å†™è€å¸ˆçš„é—®ç­”ç³»ç»Ÿï¼š--- (ä»£ç 3ã€4ã€5æ¨¡å—ï¼‰\n------\n\n# 3. åˆ›å»ºå‘é‡å­˜å‚¨å’Œæ£€ç´¢å™¨\nembeddings = DashScopeEmbeddings(model=&quot;text-embedding-v1&quot;, dashscope_api_key= DASHSCOPE_API_KEY)\nvectorstore = FAISS.from_documents(texts, embeddings)\nretriever = vectorstore.as_retriever(search_kwargs={&quot;k&quot;: 5})\n\n# ä½¿ç”¨LLMChainExtractoråˆ›å»ºæ–‡æ¡£å‹ç¼©å™¨   \nfrom langchain.retrievers.document_compressors import LLMChainExtractor     \ncompressor = LLMChainExtractor.from_llm(llm)        \n\n\n# åˆ›å»ºä¸Šä¸‹æ–‡å‹ç¼©æ£€ç´¢å™¨\ncompression_retriever = ContextualCompressionRetriever(\n    base_retriever=retriever,\n    base_compressor=compressor\n)\n\n# 4. åˆ›å»ºRetrievalQAé“¾\nqa_chain = RetrievalQA.from_chain_type(llm=llm, chain_type=&quot;stuff&quot;, retriever=compression_retriever)\n\n# 5. Output é—®ç­”ç³»ç»Ÿçš„UIå®ç°\nfrom flask import Flask, request, render_template\napp = Flask(__name__) # Flask APP\n\n@app.route(&#39;&#47;&#39;, methods=[&#39;GET&#39;, &#39;POST&#39;])\ndef home():\n    if request.method == &#39;POST&#39;:\n\n        # æ¥æ”¶ç”¨æˆ·è¾“å…¥ä½œä¸ºé—®é¢˜\n        question = request.form.get(&#39;question&#39;)        \n        \n        # RetrievalQAé“¾ - è¯»å…¥é—®é¢˜ï¼Œç”Ÿæˆç­”æ¡ˆ\n        result = qa_chain({&quot;query&quot;: question})\n        \n        # æŠŠå¤§æ¨¡å‹çš„å›ç­”ç»“æœè¿”å›ç½‘é¡µè¿›è¡Œæ¸²æŸ“\n        return render_template(&#39;index.html&#39;, result=result)\n    \n    return render_template(&#39;index.html&#39;)\n\nif __name__ == &quot;__main__&quot;:\n    app.run(host=&#39;0.0.0.0&#39;,debug=True,port=5000)","like_count":2},{"had_liked":false,"id":392362,"user_name":"yanyu-xin","can_delete":false,"product_type":"c1","uid":1899757,"ip_address":"å¹¿ä¸œ","ucode":"3AA389F9E4C236","user_header":"","comment_is_top":false,"comment_ctime":1720703728,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100617601,"comment_content":"ç”¨é˜¿é‡Œäº‘çš„é€šä¹‰åƒé—®æ”¹å†™è€å¸ˆçš„é—®ç­”ç³»ç»Ÿï¼š--- (ä»£ç 1ã€2æ¨¡å—ï¼‰\n------\nimport logging\nfrom langchain.chat_models import ChatTongyi\nfrom langchain.retrievers import ContextualCompressionRetriever\nfrom langchain.chains import RetrievalQA\nfrom langchain_community.embeddings import DashScopeEmbeddings\nfrom langchain.vectorstores import FAISS\nfrom langchain.document_loaders import TextLoader\nfrom langchain.text_splitter import RecursiveCharacterTextSplitter\nimport os\n\n# 1. Load å¯¼å…¥Document Loaders\nfrom langchain.document_loaders import PyPDFLoader\nfrom langchain.document_loaders import Docx2txtLoader\nfrom langchain_community.llms import Tongyi\n\nDASHSCOPE_API_KEY = &quot;API_KEY&quot;   #&#39;ä½ çš„é˜¿é‡Œäº‘DashScope API Key&#39;\n\n# è®¾ç½®æ—¥å¿—çº§åˆ«\nlogging.basicConfig(level=logging.INFO)\n\n# å®ä¾‹åŒ–é€šä¹‰åƒé—®æ¨¡å‹ï¼Œä½¿ç”¨qwen-turbo\nllm = ChatTongyi(model_name=&quot;qwen-turbo&quot;, api_key= DASHSCOPE_API_KEY)\n\n# åŠ è½½æ–‡æ¡£ Documents\nbase_dir =  &#39;.&#47;OneFlower&#39;  # ä½ çš„æ–‡æ¡£çš„å­˜æ”¾ç›®å½•\ndocuments = []\nfor file in os.listdir(base_dir):\n    #print(file)\n    # æ„å»ºå®Œæ•´çš„æ–‡ä»¶è·¯å¾„\n    file_path = os.path.join(base_dir, file)\n    if file.endswith(&#39;.pdf&#39;):\n        loader = PyPDFLoader(file_path)\n        documents.extend(loader.load())\n    elif file.endswith(&#39;.docx&#39;):\n        loader = Docx2txtLoader(file_path)\n        documents.extend(loader.load())\n    elif file.endswith(&#39;.txt&#39;):\n        loader = TextLoader(file_path)\n        documents.extend(loader.load())\n\n # 2. å°†Documents æ–‡æ¡£è¿›è¡Œæ–‡æœ¬åˆ‡åˆ† \ntext_splitter = RecursiveCharacterTextSplitter(chunk_size=500, chunk_overlap=100)\ntexts = text_splitter.split_documents(documents)\n","like_count":2},{"had_liked":false,"id":392332,"user_name":"å¼ ç”³å‚²","can_delete":false,"product_type":"c1","uid":1182372,"ip_address":"åŒ—äº¬","ucode":"22D46BC529BA8A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0a/a4/828a431f.jpg","comment_is_top":false,"comment_ctime":1720616514,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":2,"score":7,"product_id":100617601,"comment_content":"ç¬¬2è®²æ‰“å¡~\nè¯¾ç¨‹å†…å®¹éå¸¸æ£’ï¼Œä¸€ä¸ªå°ä¾‹å­å°±æŠŠæ•´ä¸ªLLMåº”ç”¨çš„æ ¸å¿ƒæµç¨‹ä¸²èµ·æ¥äº†~","like_count":1},{"had_liked":false,"id":388744,"user_name":"å­™å¿—æƒ ","can_delete":false,"product_type":"c1","uid":1103449,"ip_address":"æ¾³å¤§åˆ©äºš","ucode":"04F0AAF12EA847","user_header":"https://static001.geekbang.org/account/avatar/00/10/d6/59/6b7ce4f0.jpg","comment_is_top":false,"comment_ctime":1710812497,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100617601,"comment_content":"è€å¸ˆï¼Œè„‘å›¾ç”¨ä»€ä¹ˆè½¯ä»¶ç”»çš„ï¼Œxmindæ²¡æœ‰çœ‹åˆ°ç±»ä¼¼æ¨¡æ¿ï¼Ÿ","like_count":1},{"had_liked":false,"id":386657,"user_name":"ç¨‹åºå‘˜åœ¨ä¿®è¡Œ","can_delete":false,"product_type":"c1","uid":1763638,"ip_address":"æ—¥æœ¬","ucode":"384F2D1FDB7345","user_header":"https://static001.geekbang.org/account/avatar/00/1a/e9/36/96294f1d.jpg","comment_is_top":false,"comment_ctime":1705299462,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":7,"product_id":100617601,"comment_content":"è€å¸ˆ, æˆ‘å¯¼å…¥äº†æˆ‘çš„csvæ–‡ä»¶, é‡Œé¢æœ‰100æ¡è®°å½•(åŒ…å«header row), \nç°è±¡: çœ‹èµ·æ¥å¹¶æ²¡æœ‰æˆåŠŸå»åŸºäº100æ¡è®°å½•å›ç­”é—®é¢˜.  \ndebug: æˆ‘ç¡®å®printäº†å¯¼å…¥çš„æ•°æ®(æœ‰100æ¡)\nç–‘é—®: æ±‚check\n\nimport ...\nfrom langchain.document_loaders.csv_loader import CSVLoader\n\nfile_path=&#39;static&#47;nps.csv&#39;\n\nos.environ[&quot;OPENAI_API_KEY&quot;] = &quot;marked&quot;\n\n\nllm = ChatOpenAI(temperature=0, model_name=&quot;gpt-3.5&quot;)\n\nwith open(file_path, &#39;rb&#39;) as f:\n    result = chardet.detect(f.read())\n\nprint(f&quot;Detected Encoding: {result[&#39;encoding&#39;]}&quot;)\n\n# Use the detected encoding in the CSVLoader\nloader = CSVLoader(file_path=file_path, encoding=result[&#39;encoding&#39;])\ndata = loader.load()\n# print(data)\n\ntext_splitter = CharacterTextSplitter(chunk_size=1000, chunk_overlap=100)\ndocuments = text_splitter.split_documents(data)\n\nprint(f&quot;Number of Documents: {len(documents)}&quot;)\n\n\nembeddings = OpenAIEmbeddings()\nvectorstore = Chroma.from_documents(documents, embeddings)\nqa = ConversationalRetrievalChain.from_llm(ChatOpenAI(temperature=0), vectorstore.as_retriever())\n\nwith gr.Blocks() as demo:\n    chatbot = gr.Chatbot()\n    msg = gr.Textbox()\n    clear = gr.Button(&quot;Clear&quot;)\n    chat_history = []\n\n    def user(user_message, history):\n        langchain_history = [(msg[1], history[i+1][1] if i+1 &lt; len(history) else &quot;&quot;) for i, msg in enumerate(history) if i % 2 == 0]\n        response = qa({&quot;question&quot;: user_message, &quot;chat_history&quot;: langchain_history})\n        history.append((user_message, response[&quot;answer&quot;]))\n        return gr.update(value=&quot;&quot;), history\n\n    msg.submit(user, [msg, chatbot], [msg, chatbot], queue=False)\n    clear.click(lambda: None, None, chatbot, queue=False)\n\nif __name__ == &quot;__main__&quot;:\n    demo.launch(debug=True)\n\n\nhow many siteurl we have, pls list them\nWe have four siteurls. They are:\nvillage.a.com\nhere.a.com\nsutherland.a.com\nsutherland.a.com\n\nhow many records you have\nI don&#39;t have access to the total number of records.\n\n\npls list top 5 siteurl\nThe top 5 siteurls based on the given context are:\nvillage.a.com\ncisco.a.com\ntechmglobal.a.com","like_count":1,"discussions":[{"author":{"id":3899156,"avatar":"","nickname":"Geek_610366","note":"","ucode":"8238241E3B25A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":645914,"discussion_content":"æˆ‘ä¹Ÿæ˜¯è¿™ä¸ªé—®é¢˜ï¼Œæœ‰è§£å†³å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1716977702,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":396449,"user_name":"åˆå¤œä¿®é“ƒ","can_delete":false,"product_type":"c1","uid":2413066,"ip_address":"åŒ—äº¬","ucode":"EF8DB6CD219CC1","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/iaK3hr7TO6WRFgmFkia0Q75ThkpyIOQtnXSttpI1ib8ianXxbb6LlPgPLZNOj5niaZnBt6Htps2Jia11v9l2VeL7EPibw/132","comment_is_top":false,"comment_ctime":1734507576,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":1,"score":7,"product_id":100617601,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæ²¡æœ‰çœ‹åˆ°é—®é¢˜æ˜¯åœ¨å“ªé‡Œ embeddingçš„ï¼Œæˆ‘ç†è§£å»å‘é‡æ•°æ®åº“ä¸­æŸ¥è¯¢æ•°æ®é¡µéœ€è¦å…ˆæŠŠé—®é¢˜å‘é‡åŒ–ã€‚ ä¸çŸ¥é“æˆ‘ç†è§£å¯¹ä¹ˆã€‚","like_count":0},{"had_liked":false,"id":393444,"user_name":"é£ç¿”çš„å‚»ç“œ","can_delete":false,"product_type":"c1","uid":1039425,"ip_address":"åŒ—äº¬","ucode":"F0F6479802C9D3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/dc/41/65fb3b80.jpg","comment_is_top":false,"comment_ctime":1723811239,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100617601,"comment_content":"è€å¸ˆï¼Œæˆ‘çš„æœ¬åœ°è¿è¡ŒæŠ¥è¿™ä¸ª","like_count":1},{"had_liked":false,"id":393335,"user_name":"å‹¤å°ç ","can_delete":false,"product_type":"c1","uid":1071860,"ip_address":"åŒ—äº¬","ucode":"E9813F165F5EA5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKr3ZPRg8ECLpOkfpN1ny8HGV8DIkQ0fo4blKFSQgK0x76C5WiaxFXQpoIqTHWEV3bia603bBmtwZcg/132","comment_is_top":false,"comment_ctime":1723538362,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100617601,"comment_content":"ç½‘ç»œåŸå› å¯èƒ½å¤§å®¶è®¿é—®OpenAIçš„APIå„ç§ä¸æ–¹ä¾¿ã€‚å­¦ä¹ è¿‡ç¨‹ä¸­å„ä½å¯ä»¥å°è¯•ä½¿ç”¨ Ollama æœ¬åœ°éƒ¨ç½²æ¨¡å‹æ¥ç¼–å†™å’Œè°ƒè¯•ä»£ç ã€‚ åœ¨ä½³å“¥ç»™çš„ç¤ºä¾‹ä»£ç åŸºç¡€ä¸Šä¿®æ”¹åä»£ç å¦‚ä¸‹ï¼Œå¸Œæœ›èƒ½ç»™å„ä½æä¾›ä¸€ç‚¹å‚è€ƒã€‚\n\n#!&#47;usr&#47;bin&#47;env python\n\nimport os\n\nfrom langchain.document_loaders import PyPDFLoader\nfrom langchain.document_loaders import Docx2txtLoader # pip install docx2txt\nfrom langchain.document_loaders import TextLoader\n\nbase_dir = &#39;.&#47;docs&#39;\ndocuments = []\n\nfor file in os.listdir(base_dir): \n    file_path = os.path.join(base_dir, file)\n    if file.endswith(&#39;.pdf&#39;):\n        loader = PyPDFLoader(file_path)\n        documents.extend(loader.load())\n    elif file.endswith(&#39;.docx&#39;): \n        loader = Docx2txtLoader(file_path)\n        documents.extend(loader.load())\n    elif file.endswith(&#39;.txt&#39;):\n        loader = TextLoader(file_path)\n        documents.extend(loader.load())\n\nfrom langchain.text_splitter import RecursiveCharacterTextSplitter\ntext_splitter = RecursiveCharacterTextSplitter(chunk_size=200, chunk_overlap=10)\nchunked_documents = text_splitter.split_documents(documents)\n\nfrom langchain_chroma import Chroma # ä½¿ç”¨ Chroma\nfrom langchain_ollama import OllamaEmbeddings\n\nollama_embed = OllamaEmbeddings(model=&quot;nomic-embed-text&quot;) # ä½¿ç”¨nomic-embed-textåšembed\nvectorstore = Chroma.from_documents(\n    documents=chunked_documents,\n    embedding=ollama_embed,\n    collection_name=&#39;my_document&#39;,\n)\n\nimport logging\n\nfrom langchain_ollama import ChatOllama\nfrom langchain.retrievers.multi_query import MultiQueryRetriever\nfrom langchain.chains import RetrievalQA\n\nlogging.basicConfig()\nlogging.getLogger(&#39;langchain.retrievers.multi_query&#39;).setLevel(logging.INFO)\n\nllm = ChatOllama(model=&#39;llama3.1:8b&#39;) # ä½¿ç”¨ llama3.1:8b æ¨¡å‹\n\nretriever_from_llm = MultiQueryRetriever.from_llm(retriever=vectorstore.as_retriever(), llm=llm)\n\nqa_chain = RetrievalQA.from_chain_type(llm,retriever=retriever_from_llm)\n\n# ç›´æ¥é€šè¿‡qa_chainè¿›è¡Œè°ƒç”¨\nresult = qa_chain({&quot;query&quot;: &quot;è‘£äº‹é•¿è‡´è¾ä¸­æåˆ°çš„ä¼ä¸šç²¾ç¥æŒ‡çš„æ˜¯å•¥ï¼Ÿ&quot;})\n\nresult[&#39;result&#39;]","like_count":0},{"had_liked":false,"id":393075,"user_name":"è¿·é€”å°ç¾”ç¾Š","can_delete":false,"product_type":"c1","uid":3119793,"ip_address":"ä¸­å›½é¦™æ¸¯","ucode":"E20A8CC53F5ED8","user_header":"","comment_is_top":false,"comment_ctime":1722740396,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100617601,"comment_content":"è€å¸ˆï¼Œæƒ³è¯·æ•™ä¸‹ï¼Œè¦è¿‡å»api key ï¼Œé™¤äº†å¤–å›½ä¿¡ç”¨å¡ï¼Œæˆ‘ä»¬è¿˜æœ‰ä»€ä¹ˆå¥½åŠæ³•å—","like_count":1},{"had_liked":false,"id":393022,"user_name":"è¯å¸ˆ","can_delete":false,"product_type":"c1","uid":1213258,"ip_address":"å››å·","ucode":"14BB054A38A2F0","user_header":"https://static001.geekbang.org/account/avatar/00/12/83/4a/3e08427e.jpg","comment_is_top":false,"comment_ctime":1722507149,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100617601,"comment_content":"è€å¸ˆæˆ‘ç”¨å‘é‡æ•°æ®åº“qdrantè¿›è¡Œè¯­ä¹‰æ£€ç´¢æ•ˆæœéå¸¸å·®ï¼ˆä½™å¼¦COSINEæŸ¥è¯¢ï¼‰ï¼Œæ¯”å¦‚æœ¬ä¾‹æˆ‘ç›´æ¥æœâ€œä¼ä¸šç²¾ç¥â€ï¼Œä¼ä¸šç²¾ç¥é‚£è¡Œéƒ½æœä¸å‡ºæ¥ï¼Œæˆ‘å°è¯•ç”¨å„ç§embeddingæ•ˆæœéƒ½ä¸è¡Œï¼Œæ¯”å¦‚ç”¨äº†é€šä¹‰åƒé—®(1536çº¬)ï¼Œhuggingfaceä¸Šçš„chinese-macbert-large(1024çº¬)ï¼Œè±†åŒ…ï¼ˆ2560çº¬ï¼‰ã€‚æ‚¨çŸ¥é“æ˜¯æ€ä¹ˆå›äº‹ä¹ˆï¼Œå‘é‡æ•°æ®åº“qdrantçš„é—®é¢˜ä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":392240,"user_name":"é¦™æ ¼é‡Œæ‹‰é£é¾™","can_delete":false,"product_type":"c1","uid":1339856,"ip_address":"åŒ—äº¬","ucode":"C1263416EE85E3","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKS70PShNZaxpibFc1gWuvibbg3hXR4YKm3MkNgX0n56hWUicN0JfB2GQ6I9UicBfKABH6dkfVDPohA6Q/132","comment_is_top":false,"comment_ctime":1720356358,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100617601,"comment_content":"è¿˜æœ‰ä¸ªé—®é¢˜ï¼Œæˆ‘å¤§è‡´æœäº†ä¸‹æ²¡æœ‰å¤§æ¨¡å‹ä¹‹å‰çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿæ¶æ„ï¼Œå‘ç°æœ‰äº›ç»“æ„æåˆ°äº†ç”¨æˆ·é—®é¢˜åˆ†è¯ã€æŠ½å–å…³é”®è¯ï¼Œå†ç”Ÿæˆembeddingè¿›è¡Œå‘é‡æ£€ç´¢ã€‚æ˜¯å¦åœ¨å¤§æ¨¡å‹åŠ æŒä¸‹ï¼Œåˆ†è¯å’ŒæŠ½å–å…³é”®è¯ç­‰æ­¥éª¤ä¸åœ¨éœ€è¦äº†ï¼Ÿè¿˜æ˜¯è¯´å¦‚æœåœ¨æ›´å¤æ‚çš„ç³»ç»Ÿéœ€è¦æ›´å¥½çš„æ•ˆæœæ—¶ï¼Œè¿˜æ˜¯éœ€è¦è¿™äº›æ­¥éª¤çš„ï¼Ÿ","like_count":0},{"had_liked":false,"id":392239,"user_name":"é¦™æ ¼é‡Œæ‹‰é£é¾™","can_delete":false,"product_type":"c1","uid":1339856,"ip_address":"åŒ—äº¬","ucode":"C1263416EE85E3","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKS70PShNZaxpibFc1gWuvibbg3hXR4YKm3MkNgX0n56hWUicN0JfB2GQ6I9UicBfKABH6dkfVDPohA6Q/132","comment_is_top":false,"comment_ctime":1720355774,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100617601,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘æœ‰ä¸€ç‚¹ä¸æ˜ï¼Œæ‚¨åœ¨æè¿°æ¬§å¼è·ç¦»å’Œç‚¹å‡»è·ç¦»çš„å·®å¼‚æ—¶ï¼Œè¯´æ¬§å¼è·ç¦» èƒ½å¾ˆå¥½åœ°åæ˜ å‡ºå‘é‡çš„ç»å¯¹å·®å¼‚ï¼Œ é€‚åˆå…³å¿ƒæ•°æ®çš„ç»å¯¹å¤§å°æ—¶ä½¿ç”¨ã€‚è¿™ä¸ªâ€œå¤§å°â€å…·ä½“æŒ‡ä»€ä¹ˆï¼Ÿå¯ä¸å¯ä»¥ç†è§£ä¸ºå‘é‡çš„æ¨¡é•¿ï¼Ÿ","like_count":0},{"had_liked":false,"id":392156,"user_name":"å°é£","can_delete":false,"product_type":"c1","uid":1180256,"ip_address":"æµ™æ±Ÿ","ucode":"A5D04FF18880C0","user_header":"https://static001.geekbang.org/account/avatar/00/12/02/60/8b9572ac.jpg","comment_is_top":false,"comment_ctime":1720095660,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100617601,"comment_content":"æå®šå˜ï¼Œæœ‰ç‚¹æ„æ€ï¼ï¼ï¼","like_count":0},{"had_liked":false,"id":392153,"user_name":"å°é£","can_delete":false,"product_type":"c1","uid":1180256,"ip_address":"æµ™æ±Ÿ","ucode":"A5D04FF18880C0","user_header":"https://static001.geekbang.org/account/avatar/00/12/02/60/8b9572ac.jpg","comment_is_top":false,"comment_ctime":1720093607,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100617601,"comment_content":"Traceback (most recent call last):\n  File &quot;&#47;Applications&#47;PyCharm.app&#47;Contents&#47;plugins&#47;python&#47;helpers&#47;pydev&#47;pydevd.py&quot;, line 1535, in _exec\n    pydev_imports.execfile(file, globals, locals)  # execute the script\n  File &quot;&#47;Applications&#47;PyCharm.app&#47;Contents&#47;plugins&#47;python&#47;helpers&#47;pydev&#47;_pydev_imps&#47;_pydev_execfile.py&quot;, line 18, in execfile\n    exec(compile(contents+&quot;\\n&quot;, file, &#39;exec&#39;), glob, loc)\n  File &quot;&#47;Users&#47;zhuyunfeng&#47;develop&#47;workspace&#47;python&#47;zyf51-geek&#47;02yisuxianhua&#47;DocQA_v0.2.py&quot;, line 31, in &lt;module&gt;\n    chunk_documents = text_splitter.split_documents(documents)\n  File &quot;&#47;opt&#47;anaconda3&#47;envs&#47;langchain&#47;lib&#47;python3.10&#47;site-packages&#47;langchain_text_splitters&#47;base.py&quot;, line 94, in split_documents\n    texts.append(doc.page_content)\nAttributeError: &#39;Docx2txtLoader&#39; object has no attribute &#39;page_content&#39;\npython-BaseException\n\n2.Split å°†Documentsåˆ‡åˆ†æˆå—ä»¥ä¾¿åç»­è¿›è¡ŒåµŒå…¥å’Œå‘é‡å­˜å‚¨\næŠ¥è¿™ä¸ªé”™è¯¯ä¿¡æ¯","like_count":0},{"had_liked":false,"id":391715,"user_name":"Kyen","can_delete":false,"product_type":"c1","uid":2850722,"ip_address":"å¹¿ä¸œ","ucode":"57EA9E1700298B","user_header":"https://static001.geekbang.org/account/avatar/00/2b/7f/a2/83dbba75.jpg","comment_is_top":false,"comment_ctime":1718880647,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100617601,"comment_content":"è€å¸ˆï¼Œæœ‰jsç‰ˆæœ¬çš„å—ï¼Ÿpythonæ²¡æœ‰æ¥è§¦è¿‡","like_count":0},{"had_liked":false,"id":391696,"user_name":"Geek_18dfaf","can_delete":false,"product_type":"c1","uid":1543018,"ip_address":"æµ™æ±Ÿ","ucode":"CFC27E78220E2D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqw0R25Bt0iahFhEHfnxmzr9iaZf0eLsDQtFUJzgGkYwHTqicU9TydMngrJ4yL7D50awD2VibHBAdqplQ/132","comment_is_top":false,"comment_ctime":1718856546,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100617601,"comment_content":"vectorstore = Qdrant.from_documents(\n                  ^^^^^^^^^^^^^^^^^^^^^^\n  File &quot;&#47;opt&#47;anaconda3&#47;lib&#47;python3.11&#47;site-packages&#47;langchain_core&#47;vectorstores.py&quot;, line 635, in from_documents\n    return cls.from_texts(texts, embedding, metadatas=metadatas, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &quot;&#47;opt&#47;anaconda3&#47;lib&#47;python3.11&#47;site-packages&#47;langchain_community&#47;vectorstores&#47;qdrant.py&quot;, line 1339, in from_texts\n    qdrant = cls.construct_instance(\n             ^^^^^^^^^^^^^^^^^^^^^^^\n  File &quot;&#47;opt&#47;anaconda3&#47;lib&#47;python3.11&#47;site-packages&#47;langchain_community&#47;vectorstores&#47;qdrant.py&quot;, line 1641, in construct_instance\n    partial_embeddings = embedding.embed_documents(texts[:1])\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &quot;&#47;opt&#47;anaconda3&#47;lib&#47;python3.11&#47;site-packages&#47;langchain_openai&#47;embeddings&#47;base.py&quot;, line 535, in embed_documents\n    return self._get_len_safe_embeddings(texts, engine=engine)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &quot;&#47;opt&#47;anaconda3&#47;lib&#47;python3.11&#47;site-packages&#47;langchain_openai&#47;embeddings&#47;base.py&quot;, line 430, in _get_len_safe_embeddings\n    response = self.client.create(\n               ^^^^^^^^^^^^^^^^^^^\n  File &quot;&#47;opt&#47;anaconda3&#47;lib&#47;python3.11&#47;site-packages&#47;openai&#47;resources&#47;embeddings.py&quot;, line 114, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File &quot;&#47;opt&#47;anaconda3&#47;lib&#47;python3.11&#47;site-packages&#47;openai&#47;_base_client.py&quot;, line 1240, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode characters in position 7-8: ordinal not in range(128)","like_count":0},{"had_liked":false,"id":389642,"user_name":"Ludwig","can_delete":false,"product_type":"c1","uid":1584043,"ip_address":"åŒ—äº¬","ucode":"530E3B10A433AE","user_header":"https://static001.geekbang.org/account/avatar/00/18/2b/ab/90db8a2d.jpg","comment_is_top":false,"comment_ctime":1713150684,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":8,"product_id":100617601,"comment_content":"è€å¸ˆæ‚¨å¥½, æˆ‘æƒ³è¯·æ•™æ‚¨ä¸€ä¸‹æœ‰å…³â€œæ•°æ®éšç§â€çš„é—®é¢˜\nåœ¨è¿™ä¸€ç¯‡æ–‡ç« çš„ä¾‹å­ä¸­, æˆ‘ä»¬çš„æ–‡æœ¬å†…å®¹æ¥æºæ˜¯è‡ªå·±æœ¬åœ°çš„æ–‡ä»¶, é€šè¿‡åŠ è½½å’ŒåµŒå…¥çš„æ­¥éª¤, æ”¾åœ¨äº†å‘é‡æ•°æ®åº“ä¸­, å¯¹äºè¿™ä¸ªè¿‡ç¨‹æˆ‘æ˜¯ç†è§£çš„\nä½†æ˜¯æˆ‘æƒ³çŸ¥é“, è¦è®©å¤§æ¨¡å‹å»ç†è§£å…¶ä¸­çš„æ–‡æœ¬å†…å®¹, å…¶å®è¿˜æ˜¯ç›¸å½“äºæŠŠè¿™äº›æ–‡æœ¬å‘é€å‡ºå»äº†æ˜¯å—? æ˜¯å¦å¯ä»¥è®¤ä¸ºè¿™äº›æ–‡æœ¬çš„æ•°æ®éšç§å·²ç»ä¸å­˜åœ¨äº†?\nä¹‹æ‰€ä»¥é—®è¿™ä¸ªé—®é¢˜, æ˜¯å› ä¸ºç°åœ¨åœ¨ä¸€äº›ä¼ä¸šå†…éƒ¨, è™½ç„¶æœ‰ç±»ä¼¼&quot;å†…éƒ¨æ–‡æ¡£æ™ºèƒ½é—®ç­”ç³»ç»Ÿ&quot;çš„éœ€æ±‚, ä½†æ˜¯å—é™äºä¸€äº›éæŠ€æœ¯åŸå› , ä»–ä»¬å¯¹æ•°æ®éšç§çš„è¦æ±‚éå¸¸é«˜, æ‰€ä»¥å¯¼è‡´ç±»ä¼¼çš„é¡¹ç›®è½åœ°å›°éš¾","like_count":0,"discussions":[{"author":{"id":1339856,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKS70PShNZaxpibFc1gWuvibbg3hXR4YKm3MkNgX0n56hWUicN0JfB2GQ6I9UicBfKABH6dkfVDPohA6Q/132","nickname":"é¦™æ ¼é‡Œæ‹‰é£é¾™","note":"","ucode":"C1263416EE85E3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":647635,"discussion_content":"æ•°æ®éšç§è¦æ±‚é«˜çš„å…¬å¸ï¼Œå¯ä»¥è‡ªå·±æ­å»ºæœ¬åœ°åŒ–çš„å¤§æ¨¡å‹æœåŠ¡ã€‚å¯¹äºè¿™ç§é—®ç­”ç³»ç»Ÿï¼Œæˆ‘æ„Ÿè§‰è§„æ¨¡å°äº›çš„æ¨¡å‹ä¹Ÿå¯ä»¥ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1720356551,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":388570,"user_name":"Ethan","can_delete":false,"product_type":"c1","uid":1276373,"ip_address":"æ—¥æœ¬","ucode":"016F1DEBA895B8","user_header":"https://static001.geekbang.org/account/avatar/00/13/79/d5/4a7971fc.jpg","comment_is_top":false,"comment_ctime":1710407337,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100617601,"comment_content":"ä½¿ç”¨ disk å°† Embedding çš„æ•°æ®ä¿å­˜åˆ°äº†ç£ç›˜ä¸Šã€‚åé¢å†æ¬¡ä½¿ç”¨ vetorstore æ˜¯ä¸æ˜¯å°±ä¸ä¼šé‡æ–° Embedding äº†ã€‚\ndef embed_documents(chunked_documents: list):\n    # 3.Store å°†åˆ†å‰²åµŒå…¥å¹¶å­˜å‚¨åœ¨çŸ¢é‡æ•°æ®åº“Qdrantä¸­\n    from langchain_community.vectorstores import Qdrant\n    from langchain_openai import OpenAIEmbeddings\n    vectorstore = Qdrant.from_documents(\n        documents=chunked_documents,  # ä»¥åˆ†å—çš„æ–‡æ¡£\n        embedding=OpenAIEmbeddings(),  # ç”¨OpenAIçš„Embedding ModelåšåµŒå…¥\n        # location=&quot;:memory:&quot;,  # in-memory å­˜å‚¨\n        path=&quot;db&quot;,  # æŒ‡å®šå­˜å‚¨ä½ç½®\n        collection_name=&quot;my_documents&quot;, )  # æŒ‡å®šcollection_name\n    return vectorstore\n\nå¦å¤–æƒ³è¦åˆå§‹åŒ– vectorstroe  ä½¿ç”¨ from_documents æ–¹æ³•ï¼Œé‡Œé¢æ¥å— documents ä½œä¸ºå‚æ•°ï¼Œåç»­å²‚ä¸æ˜¯æ¯æ¬¡éƒ½éœ€è¦åšä¸€æ¬¡ split documents çš„æ“ä½œï¼Ÿæœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•ï¼Œç±»ä¼¼äº MySQL æ•°æ®åº“ï¼Œç›´æ¥æŸ¥è¯¢å°±å¯ä»¥äº†ã€‚","like_count":0},{"had_liked":false,"id":388328,"user_name":"Dï¼š","can_delete":false,"product_type":"c1","uid":3720573,"ip_address":"ä¸Šæµ·","ucode":"2174D4FC96A50C","user_header":"https://static001.geekbang.org/account/avatar/00/38/c5/7d/55bb670f.jpg","comment_is_top":false,"comment_ctime":1709896007,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":8,"product_id":100617601,"comment_content":"---------------------------------------------------------------------------\nImportError                               Traceback (most recent call last)\nCell In[4], line 1\n----&gt; 1 from langchain.document_loaders import PyPDFLoader\n      2 from langchain.document_loaders import Docx2txtLoader\n      3 from langchain.document_loaders import TextLoader\n\nImportError: cannot import name &#39;PyPDFLoader&#39; from &#39;langchain.document_loaders&#39; (&#47;Users&#47;zxwu&#47;Pro&#47;anaconda3&#47;lib&#47;python3.11&#47;site-packages&#47;langchain&#47;document_loaders&#47;__init__.py)ä¸€ç›´æŠ¥é”™ï¼Œgoogleå’Œstackæœåˆ°çš„æ–¹æ¡ˆä¹Ÿè¯•è¿‡äº†éƒ½ä¸è¡Œ","like_count":0,"discussions":[{"author":{"id":1276373,"avatar":"https://static001.geekbang.org/account/avatar/00/13/79/d5/4a7971fc.jpg","nickname":"Ethan","note":"","ucode":"016F1DEBA895B8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":639237,"discussion_content":"æ›´æ–°äº†ï¼Œä½¿ç”¨è¿™ä¸ªã€‚    from langchain_community.document_loaders import PyPDFLoader\n    from langchain_community.document_loaders import Docx2txtLoader\n    from langchain_community.document_loaders import TextLoader","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1710407385,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ—¥æœ¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":388131,"user_name":"é«˜äº®","can_delete":false,"product_type":"c1","uid":1194104,"ip_address":"è¾½å®","ucode":"2DDBB3607BA80F","user_header":"https://static001.geekbang.org/account/avatar/00/12/38/78/286d0842.jpg","comment_is_top":false,"comment_ctime":1709465518,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100617601,"comment_content":"è€å¸ˆï¼Œå¦‚æœæŠŠå†å²çš„éœ€æ±‚æ–‡æ¡£å’Œä»£ç åšembeddingï¼Œå†ææ–°éœ€æ±‚ï¼Œç”Ÿæˆä»£ç ï¼ŒLangChainæ–¹æ¡ˆå¯è¡Œå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":387999,"user_name":"Alex","can_delete":false,"product_type":"c1","uid":2385747,"ip_address":"å¹¿ä¸œ","ucode":"F3687FEFD0E30D","user_header":"","comment_is_top":false,"comment_ctime":1709120635,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":9,"product_id":100617601,"comment_content":"location=&quot;:memory:&quot;  python æ²¡æœ‰è¿™ç§è¯­æ³•å§ï¼Ÿ æ¥¼ä¸»æ˜¯ä¸æ˜¯å†™é”™äº†å•Š","like_count":0},{"had_liked":false,"id":387815,"user_name":"Longerian","can_delete":false,"product_type":"c1","uid":1032464,"ip_address":"æµ™æ±Ÿ","ucode":"0B74EE70D09A2A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c1/10/28d5a686.jpg","comment_is_top":false,"comment_ctime":1708616288,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":9,"product_id":100617601,"comment_content":"å»¶ä¼¸é˜…è¯»ï¼ŒLangChain å®˜æ–¹æ–‡æ¡£å¯¹ Document QA ç³»ç»Ÿè®¾è®¡åŠå®ç°çš„è¯¦ç»†è¯´æ˜â€”â€”è¿™ä¸ªæ–‡æ¡£é“¾æ¥æ‰¾ä¸åˆ°äº†","like_count":0},{"had_liked":false,"id":387586,"user_name":"Geek_771dd0","can_delete":false,"product_type":"c1","uid":1207372,"ip_address":"å¹¿ä¸œ","ucode":"FC8F77F7D75EE9","user_header":"https://static001.geekbang.org/account/avatar/00/12/6c/4c/d87bb144.jpg","comment_is_top":false,"comment_ctime":1708216334,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":9,"product_id":100617601,"comment_content":"è€å¸ˆï¼Œæ–‡æœ¬åˆ†å‰²é‚£é‡Œæœ‰ä¸ªchunk_sizeå˜é‡ï¼Œæˆ‘è¯•è¿‡å¦‚æœè®¾ç½®è¿‡å¤§æˆ–è€…è¿‡å°ï¼Œéƒ½å¯¹æœ€ç»ˆçš„æ™ºèƒ½å›å¤äº§ç”Ÿå½±å“ï¼Œé‚£è¿™ä¸ªchunk_sizeæ˜¯æ€ä¹ˆç¡®å®šæ‰å¥½å‘¢ï¼Œæœ‰ä»€ä¹ˆæ–¹æ³•è®ºå—","like_count":0},{"had_liked":false,"id":384354,"user_name":"æ™“æ¶›","can_delete":false,"product_type":"c1","uid":1524351,"ip_address":"è‹±å›½","ucode":"41CB1620A9B82C","user_header":"https://static001.geekbang.org/account/avatar/00/17/42/7f/db8fa45f.jpg","comment_is_top":false,"comment_ctime":1700726926,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":9,"product_id":100617601,"comment_content":"text_splitter = RecursiveCharacterTextSplitter(chunk_size=200, chunk_overlap=10)\nè¯·æ•™è€å¸ˆï¼Œåˆ†æœ¬åˆ†å‰²çš„æ—¶å€™è¿™é‡Œè®¾ç½®çš„200å’Œ10æ˜¯åŸºäºä»€ä¹ˆé€»è¾‘è®¾ç½®çš„ï¼Œä¼šå’Œä¹‹åçš„å‘é‡æ•°æ®åº“çš„å¤§å°æœ‰å…³ç³»å—","like_count":0},{"had_liked":false,"id":383632,"user_name":"é£é—´å¹»æƒ³","can_delete":false,"product_type":"c1","uid":2874017,"ip_address":"åœŸè€³å…¶","ucode":"CCD178781CD0CE","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTILhR0NtpB4fNoE1rYIQib6h1zTOpiaiadibbT1IxOiaWr2nvPCCds0vPL6by8JicEXB4ZbNxzQ9MWic8A1w/132","comment_is_top":false,"comment_ctime":1699376031,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":9,"product_id":100617601,"comment_content":"è¯·é—® result = qa_chain({&quot;query&quot;: question}) è¿™ä¸€æ­¥å¦‚ä½•åšåˆ°streamingè¾“å‡ºå‘¢ï¼Ÿé¡µé¢ç­‰å¾…ä¸€æ¬¡æ€§å®Œæ•´è¾“å‡ºresultå†æ˜¾ç¤ºæ„Ÿè§‰å¤ªæ…¢äº†ï¼Œè°¢è°¢ï¼","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"é»„ä½³","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":632250,"discussion_content":"è¿™ä¸ªæˆ‘éœ€è¦ç ”ç©¶ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700584025,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}