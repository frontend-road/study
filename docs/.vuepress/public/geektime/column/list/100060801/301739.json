{"id":301739,"title":"12 | å±€éƒ¨æ•æ„Ÿå“ˆå¸Œï¼šå¦‚ä½•åœ¨å¸¸æ•°æ—¶é—´å†…æœç´¢Embeddingæœ€è¿‘é‚»ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ç‹å–†ã€‚</p><p>åœ¨æ·±åº¦å­¦ä¹ æ¨èç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡‡ç”¨Embeddingå¬å›è¿™ä¸€å‡†ç¡®åˆä¾¿æ·çš„æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œåœ¨é¢å¯¹ç™¾ä¸‡ç”šè‡³æ›´é«˜é‡çº§çš„å€™é€‰é›†æ—¶ï¼Œçº¿æ€§åœ°é€ä¸€è®¡ç®—Embeddingé—´çš„ç›¸ä¼¼åº¦ï¼Œå¾€å¾€ä¼šé€ æˆæå¤§çš„æœåŠ¡å»¶è¿Ÿã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬è¦è§£å†³çš„é—®é¢˜å°±æ˜¯ï¼Œ<strong>å¦‚ä½•å¿«é€Ÿæ‰¾åˆ°ä¸ä¸€ä¸ªEmbeddingæœ€ç›¸ä¼¼çš„Embeddingï¼Ÿ</strong>è¿™ç›´æ¥å†³å®šäº†å¬å›å±‚çš„æ‰§è¡Œé€Ÿåº¦ï¼Œè¿›è€Œä¼šå½±å“æ¨èæœåŠ¡å™¨çš„å“åº”å»¶è¿Ÿã€‚</p><p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±ä¸€èµ·æ¥å­¦ä¹ ä¸€ä¸‹ä¸šç•Œè§£å†³è¿‘ä¼¼Embeddingæœç´¢çš„ä¸»è¦æ–¹æ³•ï¼Œå±€éƒ¨æ•æ„Ÿå“ˆå¸Œã€‚</p><h2>æ¨èç³»ç»Ÿä¸­çš„â€œå¿«é€Ÿâ€Embeddingæœ€è¿‘é‚»æœç´¢é—®é¢˜</h2><p>åœ¨æ·±åº¦å­¦ä¹ æ¨èç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨Embeddingæ–¹æ³•å¯¹ç‰©å“å’Œç”¨æˆ·è¿›è¡Œå‘é‡åŒ–ã€‚åœ¨è®­ç»ƒç‰©å“å’Œç”¨æˆ·çš„Embeddingå‘é‡æ—¶ï¼Œå¦‚æœäºŒè€…çš„Embeddingåœ¨åŒä¸€ä¸ªå‘é‡ç©ºé—´å†…ï¼ˆå¦‚å›¾1ï¼‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡å†…ç§¯ã€ä½™å¼¦ã€æ¬§å¼è·ç¦»ç­‰ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•ï¼Œæ¥è®¡ç®—å®ƒä»¬ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œä»è€Œé€šè¿‡ç”¨æˆ·-ç‰©å“ç›¸ä¼¼åº¦è¿›è¡Œä¸ªæ€§åŒ–æ¨èï¼Œæˆ–è€…é€šè¿‡ç‰©å“-ç‰©å“ç›¸ä¼¼åº¦è¿›è¡Œç›¸ä¼¼ç‰©å“æŸ¥æ‰¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/7f/54/7f7f9647565848d0d530d27d96927654.jpeg?wh=1920*1080\" alt=\"\" title=\"å›¾1 ç”¨æˆ·å’Œç”µå½±çš„Embeddingå‘é‡ç©ºé—´\"></p><p>å‡è®¾ï¼Œç”¨æˆ·å’Œç‰©å“çš„Embedingéƒ½åœ¨ä¸€ä¸ª$k$ç»´çš„Embeddingç©ºé—´ä¸­ï¼Œç‰©å“æ€»æ•°ä¸º$n$ï¼Œé‚£ä¹ˆéå†è®¡ç®—ä¸€ä¸ªç”¨æˆ·å’Œæ‰€æœ‰ç‰©å“å‘é‡ç›¸ä¼¼åº¦çš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘å‘¢ï¼Ÿä¸éš¾ç®—å‡ºæ˜¯$O(kÃ—n)$ã€‚è™½ç„¶è¿™ä¸€å¤æ‚åº¦æ˜¯çº¿æ€§çš„ï¼Œä½†ç‰©å“æ€»æ•°$n$è¾¾åˆ°ç™¾ä¸‡ç”šè‡³åƒä¸‡é‡çº§æ—¶ï¼Œçº¿æ€§çš„æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯çº¿ä¸ŠæœåŠ¡ä¸èƒ½æ‰¿å—çš„ã€‚</p><!-- [[[read_end]]] --><p>æ¢ä¸€ä¸ªè§’åº¦æ€è€ƒè¿™ä¸ªé—®é¢˜ï¼Œç”±äºç”¨æˆ·å’Œç‰©å“çš„EmbeddingåŒå¤„ä¸€ä¸ªå‘é‡ç©ºé—´å†…ï¼Œå› æ­¤<strong>å¬å›ä¸ç”¨æˆ·å‘é‡æœ€ç›¸ä¼¼çš„ç‰©å“Embeddingå‘é‡è¿™ä¸€é—®é¢˜ï¼Œå…¶å®å°±æ˜¯åœ¨å‘é‡ç©ºé—´å†…æœç´¢æœ€è¿‘é‚»çš„è¿‡ç¨‹</strong>ã€‚å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿæ‰¾åˆ°é«˜ç»´ç©ºé—´å¿«é€Ÿæœç´¢æœ€è¿‘é‚»ç‚¹çš„æ–¹æ³•ï¼Œé‚£ä¹ˆç›¸ä¼¼Embeddingçš„å¿«é€Ÿæœç´¢é—®é¢˜å°±è¿åˆƒè€Œè§£äº†ã€‚</p><h2>ä½¿ç”¨â€œèšç±»â€è¿˜æ˜¯â€œç´¢å¼•â€æ¥æœç´¢æœ€è¿‘é‚»ï¼Ÿ</h2><p>é‡åˆ°æœ€è¿‘é‚»æœç´¢çš„é—®é¢˜ï¼Œæˆ‘æƒ³å¤§éƒ¨åˆ†åŒå­¦ç›´è§‰ä¸Šè‚¯å®šä¼šæƒ³åˆ°ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼Œ<strong>ä¸€ç§æ˜¯èšç±»</strong>ï¼Œæˆ‘ä»¬æŠŠç›¸ä¼¼çš„ç‚¹èšç±»åˆ°ä¸€èµ·ï¼Œä¸å°±å¯ä»¥å¿«é€Ÿåœ°æ‰¾åˆ°å½¼æ­¤é—´çš„æœ€è¿‘é‚»äº†å—ï¼Ÿ<strong>å¦ä¸€ç§æ˜¯ç´¢å¼•</strong>ï¼Œæ¯”å¦‚ï¼Œæˆ‘ä»¬é€šè¿‡æŸç§æ•°æ®ç»“æ„å»ºç«‹åŸºäºå‘é‡è·ç¦»çš„ç´¢å¼•ï¼Œåœ¨æŸ¥æ‰¾æœ€è¿‘é‚»çš„æ—¶å€™ï¼Œé€šè¿‡ç´¢å¼•å¿«é€Ÿç¼©å°èŒƒå›´æ¥é™ä½å¤æ‚åº¦ã€‚è¿™ä¸¤ç§æƒ³æ³•å¯ä¸å¯è¡Œå‘¢ï¼Ÿæˆ‘ä»¬ä¸€ä¸€å°è¯•ä¸€ä¸‹ã€‚</p><p>å¯¹äºèšç±»é—®é¢˜ï¼Œæˆ‘æƒ³æœ€ç»å…¸çš„ç®—æ³•å½“å±K-meansã€‚å®ƒå®Œæˆèšç±»çš„è¿‡ç¨‹ä¸»è¦æœ‰ä»¥ä¸‹å‡ æ­¥ï¼š</p><ol>\n<li>éšæœºæŒ‡å®škä¸ªä¸­å¿ƒç‚¹ï¼›</li>\n<li>æ¯ä¸ªä¸­å¿ƒç‚¹ä»£è¡¨ä¸€ä¸ªç±»ï¼ŒæŠŠæ‰€æœ‰çš„ç‚¹æŒ‰ç…§è·ç¦»çš„è¿œè¿‘æŒ‡å®šç»™è·ç¦»æœ€è¿‘çš„ä¸­å¿ƒç‚¹ä»£è¡¨çš„ç±»ï¼›</li>\n<li>è®¡ç®—æ¯ä¸ªç±»åŒ…å«ç‚¹çš„å¹³å‡å€¼ä½œä¸ºæ–°çš„ä¸­å¿ƒç‚¹ä½ç½®ï¼›</li>\n<li>ç¡®å®šå¥½æ–°çš„ä¸­å¿ƒç‚¹ä½ç½®åï¼Œè¿­ä»£è¿›å…¥ç¬¬2æ­¥ï¼Œç›´åˆ°ä¸­å¿ƒç‚¹ä½ç½®æ”¶æ•›ï¼Œä¸å†ç§»åŠ¨ã€‚</li>\n</ol><p>åˆ°è¿™é‡Œï¼Œæ•´ä¸ªK-meansçš„è¿­ä»£æ›´æ–°è¿‡ç¨‹å°±å®Œæˆäº†ï¼Œä½ å¯ä»¥çœ‹ä¸‹å›¾2ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/5d/90/5d93557a390be7dabc82ffdd6baebc90.jpeg?wh=1920*1080\" alt=\"\" title=\"å›¾2 ä¸‰ä¸­å¿ƒç‚¹çš„K-meansç®—æ³•è¿­ä»£è¿‡ç¨‹\"></p><p>å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿåœ¨ç¦»çº¿è®¡ç®—å¥½æ¯ä¸ªEmbeddingå‘é‡çš„ç±»åˆ«ï¼Œåœ¨çº¿ä¸Šæˆ‘ä»¬åªéœ€è¦åœ¨åŒä¸€ä¸ªç±»åˆ«å†…çš„Embeddingå‘é‡ä¸­æœç´¢å°±å¯ä»¥äº†ï¼Œè¿™ä¼šå¤§å¤§ç¼©å°äº†Embeddingçš„æœç´¢èŒƒå›´ï¼Œæ—¶é—´å¤æ‚åº¦è‡ªç„¶å°±ä¸‹é™äº†ã€‚</p><p>ä½†è¿™ä¸ªè¿‡ç¨‹è¿˜æ˜¯å­˜åœ¨ç€ä¸€äº›è¾¹ç•Œæƒ…å†µã€‚æ¯”å¦‚ï¼Œèšç±»è¾¹ç¼˜çš„ç‚¹çš„æœ€è¿‘é‚»å¾€å¾€ä¼šåŒ…æ‹¬ç›¸é‚»èšç±»çš„ç‚¹ï¼Œå¦‚æœæˆ‘ä»¬åªåœ¨ç±»åˆ«å†…æœç´¢ï¼Œå°±ä¼šé—æ¼è¿™äº›è¿‘ä¼¼ç‚¹ã€‚æ­¤å¤–ï¼Œä¸­å¿ƒç‚¹çš„æ•°é‡kä¹Ÿä¸é‚£ä¹ˆå¥½ç¡®å®šï¼Œké€‰å¾—å¤ªå¤§ï¼Œç¦»çº¿è¿­ä»£çš„è¿‡ç¨‹å°±ä¼šéå¸¸æ…¢ï¼Œké€‰å¾—å¤ªå°ï¼Œåœ¨çº¿æœç´¢çš„èŒƒå›´è¿˜æ˜¯å¾ˆå¤§ï¼Œå¹¶æ²¡æœ‰å‡å°‘å¤ªå¤šæœç´¢æ—¶é—´ã€‚æ‰€ä»¥åŸºäºèšç±»çš„æœç´¢è¿˜æ˜¯æœ‰ä¸€å®šå±€é™æ€§çš„ï¼Œè§£å†³ä¸Šé¢çš„é—®é¢˜ä¹Ÿä¼šå¢åŠ è¿‡å¤šå†—ä½™è¿‡ç¨‹ï¼Œå¾—ä¸å¿å¤±ã€‚</p><p>æ—¢ç„¶èšç±»æœ‰å±€é™æ€§ï¼Œé‚£ç´¢å¼•èƒ½ä¸èƒ½å¥æ•ˆå‘¢ï¼Ÿæˆ‘ä»¬è¿™é‡Œå¯ä»¥å°è¯•ä¸€ä¸‹ç»å…¸çš„å‘é‡ç©ºé—´ç´¢å¼•æ–¹æ³•Kd-treeï¼ˆK-dimension treeï¼‰ã€‚ä¸èšç±»ä¸åŒï¼Œå®ƒæ˜¯ä¸ºç©ºé—´ä¸­çš„ç‚¹/å‘é‡å»ºç«‹ä¸€ä¸ªç´¢å¼•ã€‚è¿™è¯¥æ€ä¹ˆç†è§£å‘¢ï¼Ÿ</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œä½ å¯ä»¥çœ‹ä¸‹å›¾3ä¸­çš„ç‚¹äº‘ï¼Œæˆ‘ä»¬å…ˆç”¨çº¢è‰²çš„çº¿æŠŠç‚¹äº‘ä¸€åˆ†ä¸ºäºŒï¼Œå†ç”¨æ·±è“è‰²çš„çº¿æŠŠå„è‡ªç‰‡åŒºçš„ç‚¹äº‘ä¸€åˆ†ä¸ºäºŒï¼Œä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æ¯ä¸ªç‰‡åŒºåªå‰©ä¸‹ä¸€ä¸ªç‚¹ï¼Œè¿™å°±å®Œæˆäº†ç©ºé—´ç´¢å¼•çš„æ„å»ºã€‚å¦‚æœæˆ‘ä»¬èƒ½å¤ŸæŠŠè¿™å¥—ç´¢å¼•â€œæ¬â€åˆ°çº¿ä¸Šï¼Œå°±å¯ä»¥åˆ©ç”¨äºŒå‰æ ‘çš„ç»“æ„å¿«é€Ÿæ‰¾åˆ°é‚»æ¥ç‚¹ã€‚æ¯”å¦‚ï¼Œå¸Œæœ›æ‰¾åˆ°ç‚¹qçš„mä¸ªé‚»æ¥ç‚¹ï¼Œæˆ‘ä»¬å°±å¯ä»¥å…ˆæœç´¢å®ƒç›¸é‚»å­æ ‘ä¸‹çš„ç‚¹ï¼Œå¦‚æœæ•°é‡ä¸å¤Ÿï¼Œæˆ‘ä»¬å¯ä»¥å‘ä¸Šå›é€€ä¸€ä¸ªå±‚çº§ï¼Œæœç´¢å®ƒçˆ¶ç‰‡åŒºä¸‹çš„å…¶ä»–ç‚¹ï¼Œç›´åˆ°æ•°é‡å‡‘å¤Ÿmä¸ªä¸ºæ­¢ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/df/3f/dfb2c271d9eaa3a29054d2aea24b5e3f.jpeg?wh=1920*1080\" alt=\"\" title=\"å›¾3 Kd-treeç´¢å¼•\"></p><p>å¬ä¸Šå»Kd-treeç´¢å¼•ä¼¼ä¹æ˜¯ä¸€ä¸ªå®Œç¾çš„æ–¹æ¡ˆï¼Œä½†å®ƒè¿˜æ˜¯æ— æ³•å®Œå…¨è§£å†³è¾¹ç¼˜ç‚¹æœ€è¿‘é‚»çš„é—®é¢˜ã€‚å¯¹äºç‚¹qæ¥è¯´ï¼Œå®ƒçš„é‚»æ¥ç‰‡åŒºæ˜¯å³ä¸Šè§’çš„ç‰‡åŒºï¼Œä½†æ˜¯å®ƒçš„æœ€è¿‘é‚»ç‚¹å´æ˜¯æ·±è“è‰²åˆ‡åˆ†çº¿ä¸‹æ–¹çš„é‚£ä¸ªç‚¹ã€‚æ‰€ä»¥æŒ‰ç…§Kd-treeçš„ç´¢å¼•æ–¹æ³•ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¼šé—æ¼æ‰æœ€è¿‘é‚»ç‚¹ï¼Œå®ƒåªèƒ½ä¿è¯å¿«é€Ÿæœç´¢åˆ°è¿‘ä¼¼çš„æœ€è¿‘é‚»ç‚¹é›†åˆã€‚è€Œä¸”Kd-treeç´¢å¼•çš„ç»“æ„å¹¶ä¸ç®€å•ï¼Œç¦»çº¿å’Œåœ¨çº¿ç»´æŠ¤çš„è¿‡ç¨‹ä¹Ÿç›¸å¯¹å¤æ‚ï¼Œè¿™äº›éƒ½æ˜¯å®ƒçš„å¼Šç«¯ã€‚é‚£æœ‰æ²¡æœ‰æ›´â€œå®Œç¾â€çš„è§£å†³æ–¹æ³•å‘¢ï¼Ÿ</p><h2>å±€éƒ¨æ•æ„Ÿå“ˆå¸Œçš„åŸºæœ¬åŸç†åŠå¤šæ¡¶ç­–ç•¥</h2><p>ä¸ºäº†â€œæ‹¯æ•‘â€æˆ‘ä»¬æ¨èç³»ç»Ÿçš„å¬å›å±‚ï¼Œâ€œå±€éƒ¨æ•æ„Ÿå“ˆå¸Œâ€ï¼ˆLocality Sensitive Hashing,LSHï¼‰è¿™ä¸€æ–¹æ³•æ¨ªç©ºå‡ºä¸–ï¼Œå®ƒç”¨ç®€æ´è€Œé«˜æ•ˆçš„æ–¹æ³•å‡ ä¹å®Œç¾åœ°è§£å†³äº†è¿™ä¸€é—®é¢˜ã€‚é‚£å®ƒæ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿ</p><h3>1. å±€éƒ¨æ•æ„Ÿå“ˆå¸Œçš„åŸºæœ¬åŸç†</h3><p>å±€éƒ¨æ•æ„Ÿå“ˆå¸Œçš„åŸºæœ¬æ€æƒ³æ˜¯å¸Œæœ›è®©ç›¸é‚»çš„ç‚¹è½å…¥åŒä¸€ä¸ªâ€œæ¡¶â€ï¼Œè¿™æ ·åœ¨è¿›è¡Œæœ€è¿‘é‚»æœç´¢æ—¶ï¼Œæˆ‘ä»¬ä»…éœ€è¦åœ¨ä¸€ä¸ªæ¡¶å†…ï¼Œæˆ–ç›¸é‚»å‡ ä¸ªæ¡¶å†…çš„å…ƒç´ ä¸­è¿›è¡Œæœç´¢å³å¯ã€‚å¦‚æœä¿æŒæ¯ä¸ªæ¡¶ä¸­çš„å…ƒç´ ä¸ªæ•°åœ¨ä¸€ä¸ªå¸¸æ•°é™„è¿‘ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠæœ€è¿‘é‚»æœç´¢çš„æ—¶é—´å¤æ‚åº¦é™ä½åˆ°å¸¸æ•°çº§åˆ«ã€‚</p><p>é‚£ä¹ˆï¼Œå¦‚ä½•æ„å»ºå±€éƒ¨æ•æ„Ÿå“ˆå¸Œä¸­çš„â€œæ¡¶â€å‘¢ï¼Ÿä¸‹é¢ï¼Œæˆ‘ä»¬ä»¥åŸºäºæ¬§å¼è·ç¦»çš„æœ€è¿‘é‚»æœç´¢ä¸ºä¾‹ï¼Œæ¥è§£é‡Šæ„å»ºå±€éƒ¨æ•æ„Ÿå“ˆå¸Œâ€œæ¡¶â€çš„è¿‡ç¨‹ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦å¼„æ¸…æ¥šä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœå°†é«˜ç»´ç©ºé—´ä¸­çš„ç‚¹å‘ä½ç»´ç©ºé—´è¿›è¡Œæ˜ å°„ï¼Œå…¶æ¬§å¼ç›¸å¯¹è·ç¦»æ˜¯ä¸æ˜¯ä¼šä¿æŒä¸å˜å‘¢ï¼Ÿä»¥å›¾4ä¸ºä¾‹ï¼Œå›¾4ä¸­é—´çš„å½©è‰²ç‚¹å¤„åœ¨äºŒç»´ç©ºé—´ä¸­ï¼Œå½“æˆ‘ä»¬æŠŠäºŒç»´ç©ºé—´ä¸­çš„ç‚¹é€šè¿‡ä¸åŒè§’åº¦æ˜ å°„åˆ°aã€bã€cè¿™ä¸‰ä¸ªä¸€ç»´ç©ºé—´æ—¶ï¼Œå¯ä»¥çœ‹åˆ°åŸæœ¬ç›¸è¿‘çš„ç‚¹ï¼Œåœ¨ä¸€ç»´ç©ºé—´ä¸­éƒ½ä¿æŒç€ç›¸è¿‘çš„è·ç¦»ã€‚è€ŒåŸæœ¬è¿œç¦»çš„ç»¿è‰²ç‚¹å’Œçº¢è‰²ç‚¹åœ¨ä¸€ç»´ç©ºé—´aä¸­å¤„äºæ¥è¿‘çš„ä½ç½®ï¼Œå´åœ¨ç©ºé—´bä¸­å¤„äºè¿œç¦»çš„ä½ç½®ã€‚</p><p>å› æ­¤æˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€ä¸ªå®šæ€§çš„ç»“è®ºï¼š<strong>æ¬§å¼ç©ºé—´ä¸­ï¼Œå°†é«˜ç»´ç©ºé—´çš„ç‚¹æ˜ å°„åˆ°ä½ç»´ç©ºé—´ï¼ŒåŸæœ¬æ¥è¿‘çš„ç‚¹åœ¨ä½ç»´ç©ºé—´ä¸­è‚¯å®šä¾ç„¶æ¥è¿‘ï¼Œä½†åŸæœ¬è¿œç¦»çš„ç‚¹åˆ™æœ‰ä¸€å®šæ¦‚ç‡å˜æˆæ¥è¿‘çš„ç‚¹ã€‚</strong></p><p><img src=\"https://static001.geekbang.org/resource/image/d9/55/d9476e92e9a6331274e18abc416db955.jpeg?wh=1920*1080\" alt=\"\" title=\"å›¾4 é«˜ç»´ç©ºé—´ç‚¹å‘ä½ç»´ç©ºé—´æ˜ å°„\"></p><p>åˆ©ç”¨ä½ç»´ç©ºé—´å¯ä»¥ä¿ç•™é«˜ç»´ç©ºé—´ç›¸è¿‘è·ç¦»å…³ç³»çš„æ€§è´¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ„é€ å±€éƒ¨æ•æ„Ÿå“ˆå¸Œâ€œæ¡¶â€ã€‚å¯¹äºEmbeddingå‘é‡æ¥è¯´ï¼Œç”±äºEmbeddingå¤§é‡ä½¿ç”¨å†…ç§¯æ“ä½œè®¡ç®—ç›¸ä¼¼åº¦ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨å†…ç§¯æ“ä½œæ¥æ„å»ºå±€éƒ¨æ•æ„Ÿå“ˆå¸Œæ¡¶ã€‚å‡è®¾$v$æ˜¯é«˜ç»´ç©ºé—´ä¸­çš„kç»´Embeddingå‘é‡ï¼Œ$x$æ˜¯éšæœºç”Ÿæˆçš„kç»´æ˜ å°„å‘é‡ã€‚é‚£æˆ‘ä»¬åˆ©ç”¨å†…ç§¯æ“ä½œå¯ä»¥å°†$v$æ˜ å°„åˆ°ä¸€ç»´ç©ºé—´ï¼Œå¾—åˆ°æ•°å€¼$h(v)=vÂ·x$ã€‚</p><p>è€Œä¸”ï¼Œæˆ‘ä»¬åˆšåˆšè¯´äº†ï¼Œä¸€ç»´ç©ºé—´ä¹Ÿä¼šéƒ¨åˆ†ä¿å­˜é«˜ç»´ç©ºé—´çš„è¿‘ä¼¼è·ç¦»ä¿¡æ¯ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å“ˆå¸Œå‡½æ•°$h(v)$è¿›è¡Œåˆ†æ¡¶ï¼Œå…¬å¼ä¸ºï¼š$h^{x, b}(v)=\\left\\lfloor\\frac{x \\cdot v+b}{w}\\right]$ ã€‚å…¶ä¸­ï¼Œ âŒŠâŒ‹ æ˜¯å‘ä¸‹å–æ•´æ“ä½œï¼Œ $w$æ˜¯åˆ†æ¡¶å®½åº¦ï¼Œ$b$æ˜¯0åˆ°wé—´çš„ä¸€ä¸ªå‡åŒ€åˆ†å¸ƒéšæœºå˜é‡ï¼Œé¿å…åˆ†æ¡¶è¾¹ç•Œå›ºåŒ–ã€‚</p><p>ä¸è¿‡ï¼Œæ˜ å°„æ“ä½œä¼šæŸå¤±éƒ¨åˆ†è·ç¦»ä¿¡æ¯ï¼Œå¦‚æœæˆ‘ä»¬ä»…é‡‡ç”¨ä¸€ä¸ªå“ˆå¸Œå‡½æ•°è¿›è¡Œåˆ†æ¡¶ï¼Œå¿…ç„¶å­˜åœ¨ç›¸è¿‘ç‚¹è¯¯åˆ¤çš„æƒ…å†µï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨mä¸ªå“ˆå¸Œå‡½æ•°åŒæ—¶è¿›è¡Œåˆ†æ¡¶ã€‚å¦‚æœä¸¤ä¸ªç‚¹åŒæ—¶æ‰è¿›äº†mä¸ªæ¡¶ï¼Œé‚£å®ƒä»¬æ˜¯ç›¸ä¼¼ç‚¹çš„æ¦‚ç‡å°†å¤§å¤§å¢åŠ ã€‚é€šè¿‡åˆ†æ¡¶æ‰¾åˆ°ç›¸é‚»ç‚¹çš„å€™é€‰é›†åˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æœ‰é™çš„å€™é€‰é›†åˆä¸­é€šè¿‡éå†æ‰¾åˆ°ç›®æ ‡ç‚¹çœŸæ­£çš„Kè¿‘é‚»äº†ã€‚</p><p>åˆšæ‰æˆ‘ä»¬è®²çš„å“ˆå¸Œç­–ç•¥æ˜¯åŸºäºå†…ç§¯æ“ä½œæ¥åˆ¶å®šçš„ï¼Œå†…ç§¯ç›¸ä¼¼åº¦ä¹Ÿæ˜¯æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„ç›¸ä¼¼åº¦åº¦é‡æ–¹æ³•ï¼Œäº‹å®ä¸Šè·ç¦»çš„å®šä¹‰æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚â€œæ›¼å“ˆé¡¿è·ç¦»â€â€œåˆ‡æ¯”é›ªå¤«è·ç¦»â€â€œæ±‰æ˜è·ç¦»â€ç­‰ç­‰ã€‚é’ˆå¯¹ä¸åŒçš„è·ç¦»å®šä¹‰ï¼Œåˆ†æ¡¶å‡½æ•°çš„å®šä¹‰ä¹Ÿæœ‰æ‰€ä¸åŒï¼Œä½†å±€éƒ¨æ•æ„Ÿå“ˆå¸Œé€šè¿‡åˆ†æ¡¶æ–¹å¼ä¿ç•™éƒ¨åˆ†è·ç¦»ä¿¡æ¯ï¼Œå¤§è§„æ¨¡é™ä½è¿‘é‚»ç‚¹å€™é€‰é›†çš„æœ¬è´¨æ€æƒ³æ˜¯é€šç”¨çš„ã€‚</p><h3>2. å±€éƒ¨æ•æ„Ÿå“ˆå¸Œçš„å¤šæ¡¶ç­–ç•¥</h3><p>åˆšæ‰æˆ‘ä»¬è®²åˆ°äº†å¯ä»¥ä½¿ç”¨å¤šä¸ªåˆ†æ¡¶å‡½æ•°çš„æ–¹å¼æ¥å¢åŠ æ‰¾åˆ°ç›¸ä¼¼ç‚¹çš„æ¦‚ç‡ã€‚é‚£ä½ å¯èƒ½æœ‰ç–‘é—®ï¼Œå¦‚æœæœ‰å¤šä¸ªåˆ†æ¡¶å‡½æ•°çš„è¯ï¼Œå…·ä½“åº”è¯¥å¦‚ä½•å¤„ç†ä¸åŒæ¡¶ä¹‹é—´çš„å…³ç³»å‘¢ï¼Ÿè¿™å°±æ¶‰åŠå±€éƒ¨æ•æ„Ÿå“ˆå¸Œçš„å¤šæ¡¶ç­–ç•¥ã€‚</p><p>å‡è®¾æœ‰Aã€Bã€Cã€Dã€Eäº”ä¸ªç‚¹ï¼Œæœ‰h<sub>1</sub>å’Œh<sub>2</sub>ä¸¤ä¸ªåˆ†æ¡¶å‡½æ•°ã€‚ä½¿ç”¨h<sub>1</sub>æ¥åˆ†æ¡¶æ—¶ï¼ŒAå’ŒBæ‰åˆ°äº†ä¸€ä¸ªæ¡¶é‡Œï¼ŒCã€Dã€Eæ‰åˆ°äº†ä¸€ä¸ªæ¡¶é‡Œï¼›ä½¿ç”¨h<sub>2</sub>æ¥åˆ†æ¡¶æ—¶ï¼ŒAã€Cã€Dæ‰åˆ°äº†ä¸€ä¸ªæ¡¶é‡Œï¼ŒBã€Eåœ¨ä¸€ä¸ªæ¡¶ã€‚é‚£ä¹ˆè¯·é—®å¦‚æœæˆ‘ä»¬æƒ³æ‰¾ç‚¹Cçš„æœ€è¿‘é‚»ç‚¹ï¼Œåº”è¯¥æ€ä¹ˆåˆ©ç”¨ä¸¤ä¸ªåˆ†æ¡¶ç»“æœæ¥è®¡ç®—å‘¢ï¼Ÿ</p><p>å¦‚æœæˆ‘ä»¬ç”¨â€œä¸”â€ï¼ˆAndï¼‰æ“ä½œæ¥å¤„ç†ä¸¤ä¸ªåˆ†æ¡¶ç»“æœä¹‹é—´çš„å…³ç³»ï¼Œé‚£ä¹ˆç»“æœæ˜¯è¿™æ ·çš„ï¼Œæ‰¾åˆ°ä¸ç‚¹Cåœ¨h<sub>1</sub>å‡½æ•°ä¸‹åŒä¸€ä¸ªæ¡¶çš„ç‚¹ï¼Œä¸”åœ¨h<sub>2</sub>å‡½æ•°ä¸‹åŒä¸€ä¸ªæ¡¶çš„ç‚¹ï¼Œä½œä¸ºæœ€è¿‘é‚»å€™é€‰ç‚¹ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ»¡è¶³æ¡ä»¶çš„ç‚¹åªæœ‰ä¸€ä¸ªï¼Œé‚£å°±æ˜¯ç‚¹Dã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç‚¹Dæœ€æœ‰å¯èƒ½æ˜¯ç‚¹Cçš„æœ€è¿‘é‚»ç‚¹ã€‚</p><p>ç”¨â€œä¸”â€æ“ä½œä½œä¸ºå¤šæ¡¶ç­–ç•¥ï¼Œå¯ä»¥æœ€å¤§ç¨‹åº¦åœ°å‡å°‘å€™é€‰ç‚¹æ•°é‡ã€‚ä½†æ˜¯ï¼Œç”±äºå“ˆå¸Œåˆ†æ¡¶å‡½æ•°ä¸æ˜¯ä¸€ä¸ªç»å¯¹ç²¾ç¡®çš„æ“ä½œï¼Œç‚¹Dä¹Ÿåªæ˜¯æœ€æœ‰å¯èƒ½çš„æœ€è¿‘é‚»ç‚¹ï¼Œä¸æ˜¯ä¸€å®šçš„æœ€è¿‘é‚»ç‚¹ï¼Œå› æ­¤ï¼Œâ€œä¸”â€æ“ä½œå…¶å®ä¹Ÿå¢å¤§äº†æ¼æ‰æœ€è¿‘é‚»ç‚¹çš„æ¦‚ç‡ã€‚</p><p>é‚£å¦‚æœæˆ‘ä»¬é‡‡ç”¨â€œæˆ–â€ï¼ˆOrï¼‰æ“ä½œä½œä¸ºå¤šæ¡¶ç­–ç•¥ï¼Œåˆä¼šæ˜¯ä»€ä¹ˆæƒ…å†µå‘¢ï¼Ÿå…·ä½“æ“ä½œå°±æ˜¯ï¼Œæˆ‘ä»¬æ‰¾åˆ°ä¸ç‚¹Cåœ¨h<sub>1</sub>å‡½æ•°ä¸‹åŒä¸€ä¸ªæ¡¶çš„ç‚¹ï¼Œæˆ–åœ¨h<sub>2</sub>å‡½æ•°ä¸‹åŒä¸€ä¸ªæ¡¶çš„ç‚¹ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å€™é€‰é›†ä¸­ä¼šæœ‰ä¸‰ä¸ªç‚¹ï¼Œåˆ†åˆ«æ˜¯Aã€Dã€Eã€‚è¿™æ ·ä¸€æ¥ï¼Œè™½ç„¶æˆ‘ä»¬å¢å¤§äº†å€™é€‰é›†çš„è§„æ¨¡ï¼Œå‡å°‘äº†æ¼æ‰æœ€è¿‘é‚»ç‚¹çš„å¯èƒ½æ€§ï¼Œä½†å¢å¤§äº†åç»­è®¡ç®—çš„å¼€é”€ã€‚</p><p>å½“ç„¶ï¼Œå±€éƒ¨æ•æ„Ÿå“ˆå¸Œçš„å¤šæ¡¶ç­–ç•¥è¿˜å¯ä»¥æ›´åŠ å¤æ‚ï¼Œæ¯”å¦‚ä½¿ç”¨3ä¸ªåˆ†æ¡¶å‡½æ•°åˆ†æ¡¶ï¼ŒæŠŠåŒæ—¶è½å…¥ä¸¤ä¸ªæ¡¶çš„ç‚¹ä½œä¸ºæœ€è¿‘é‚»å€™é€‰ç‚¹ç­‰ç­‰ã€‚</p><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬åˆ°åº•åº”è¯¥é€‰æ‹©â€œä¸”â€æ“ä½œè¿˜æ˜¯â€œæˆ–â€æ“ä½œï¼Œä»¥åŠåˆ°åº•è¯¥é€‰æ‹©ä½¿ç”¨å‡ ä¸ªåˆ†æ¡¶å‡½æ•°ï¼Œæ¯ä¸ªåˆ†æ¡¶å‡½æ•°åˆ†å‡ ä¸ªæ¡¶å‘¢ï¼Ÿè¿™äº›éƒ½è¿˜æ˜¯å·¥ç¨‹ä¸Šçš„æƒè¡¡é—®é¢˜ã€‚æˆ‘è™½ç„¶ä¸èƒ½ç»™å‡ºå…·ä½“çš„æœ€ä½³æ•°å€¼ï¼Œä½†å¯ä»¥ç»™ä½ ä¸€äº›å–å€¼çš„å»ºè®®ï¼š</p><ol>\n<li>ç‚¹æ•°è¶Šå¤šï¼Œæˆ‘ä»¬è¶Šåº”è¯¥å¢åŠ æ¯ä¸ªåˆ†æ¡¶å‡½æ•°ä¸­æ¡¶çš„ä¸ªæ•°ï¼›ç›¸åï¼Œç‚¹æ•°è¶Šå°‘ï¼Œæˆ‘ä»¬è¶Šåº”è¯¥å‡å°‘æ¡¶çš„ä¸ªæ•°ï¼›</li>\n<li>Embeddingå‘é‡çš„ç»´åº¦è¶Šå¤§ï¼Œæˆ‘ä»¬è¶Šåº”è¯¥å¢åŠ å“ˆå¸Œå‡½æ•°çš„æ•°é‡ï¼Œå°½é‡é‡‡ç”¨ä¸”çš„æ–¹å¼ä½œä¸ºå¤šæ¡¶ç­–ç•¥ï¼›ç›¸åï¼ŒEmbeddingå‘é‡ç»´åº¦è¶Šå°ï¼Œæˆ‘ä»¬è¶Šåº”è¯¥å‡å°‘å“ˆå¸Œå‡½æ•°çš„æ•°é‡ï¼Œå¤šé‡‡ç”¨æˆ–çš„æ–¹å¼ä½œä¸ºåˆ†æ¡¶ç­–ç•¥ã€‚</li>\n</ol><p>æœ€åï¼Œæˆ‘ä»¬å†å›å¤´æ¥è§£å†³è¯¾ç¨‹å¼€å¤´æå‡ºçš„é—®é¢˜ï¼Œå±€éƒ¨æ•æ„Ÿå“ˆå¸Œèƒ½åœ¨å¸¸æ•°æ—¶é—´å¾—åˆ°æœ€è¿‘é‚»çš„ç»“æœå—ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œå¦‚æœæˆ‘ä»¬èƒ½å¤Ÿç²¾ç¡®åœ°æ§åˆ¶æ¯ä¸ªæ¡¶å†…çš„ç‚¹çš„è§„æ¨¡æ˜¯$C$ï¼Œå‡è®¾æ¯ä¸ªEmbeddingçš„ç»´åº¦æ˜¯$N$ï¼Œé‚£ä¹ˆæ‰¾åˆ°æœ€è¿‘é‚»ç‚¹çš„æ—¶é—´å¼€é”€å°†æ°¸è¿œåœ¨$O(CÂ·N)$é‡çº§ã€‚é‡‡ç”¨å¤šæ¡¶ç­–ç•¥ä¹‹åï¼Œå‡è®¾åˆ†æ¡¶å‡½æ•°æ•°é‡æ˜¯$K$ï¼Œé‚£ä¹ˆæ—¶é—´å¼€é”€ä¹Ÿåœ¨$O(KÂ·CÂ·N)$é‡çº§ï¼Œè¿™ä»ç„¶æ˜¯ä¸€ä¸ªå¸¸æ•°ã€‚</p><h2>å±€éƒ¨æ•æ„Ÿå“ˆå¸Œå®è·µ</h2><p>ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†å±€éƒ¨æ•æ„Ÿå“ˆå¸Œçš„åŸºæœ¬åŸç†å’Œå¤šæ¡¶ç­–ç•¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·è¿›å…¥å®è·µç¯èŠ‚ï¼Œåˆ©ç”¨Sparrow Recsysè®­ç»ƒå¥½çš„ç‰©å“Embeddingï¼Œæ¥å®ç°å±€éƒ¨æ•æ„Ÿå“ˆå¸Œçš„å¿«é€Ÿæœç´¢å§ã€‚ä¸ºäº†ä¿è¯è·ŸEmbeddingéƒ¨åˆ†çš„å¹³å°ç»Ÿä¸€ï¼Œè¿™ä¸€æ¬¡æˆ‘ä»¬ç»§ç»­ä½¿ç”¨Spark MLlibå®ŒæˆLSHçš„å®ç°ã€‚</p><p>åœ¨å°†ç”µå½±Embeddingæ•°æ®è½¬æ¢æˆdense Vectorçš„å½¢å¼ä¹‹åï¼Œæˆ‘ä»¬ä½¿ç”¨Spark MLlibè‡ªå¸¦çš„LSHåˆ†æ¡¶æ¨¡å‹BucketedRandomProjectionLSHï¼ˆæˆ‘ä»¬ç®€ç§°LSHæ¨¡å‹ï¼‰æ¥è¿›è¡ŒLSHåˆ†æ¡¶ã€‚å…¶ä¸­æœ€å…³é”®çš„éƒ¨åˆ†æ˜¯è®¾å®šLSHæ¨¡å‹ä¸­çš„BucketLengthå’ŒNumHashTablesè¿™ä¸¤ä¸ªå‚æ•°ã€‚å…¶ä¸­ï¼ŒBucketLengthæŒ‡çš„å°±æ˜¯åˆ†æ¡¶å…¬å¼ä¸­çš„åˆ†æ¡¶å®½åº¦wï¼ŒNumHashTablesæŒ‡çš„æ˜¯å¤šæ¡¶ç­–ç•¥ä¸­çš„åˆ†æ¡¶æ¬¡æ•°ã€‚</p><p>æ¸…æ¥šäº†æ¨¡å‹ä¸­çš„å…³é”®å‚æ•°ï¼Œæ‰§è¡Œçš„è¿‡ç¨‹å°±è·Ÿæˆ‘ä»¬è®²è¿‡çš„å…¶ä»–Spark MLlibæ¨¡å‹ä¸€æ ·äº†ï¼Œéƒ½æ˜¯å…ˆè°ƒç”¨fitå‡½æ•°è®­ç»ƒæ¨¡å‹ï¼Œå†è°ƒç”¨transformå‡½æ•°å®Œæˆåˆ†æ¡¶çš„è¿‡ç¨‹ï¼Œå…·ä½“çš„å®ç°ä½ å¯ä»¥å‚è€ƒä¸‹é¢çš„ä»£ç ã€‚</p><pre><code>def embeddingLSH(spark:SparkSession, movieEmbMap:Map[String, Array[Float]]): Unit ={\n  //å°†ç”µå½±embeddingæ•°æ®è½¬æ¢æˆdense Vectorçš„å½¢å¼ï¼Œä¾¿äºä¹‹åå¤„ç†\n  val movieEmbSeq = movieEmbMap.toSeq.map(item =&gt; (item._1, Vectors.dense(item._2.map(f =&gt; f.toDouble))))\n  val movieEmbDF = spark.createDataFrame(movieEmbSeq).toDF(&quot;movieId&quot;, &quot;emb&quot;)\n\n\n  //åˆ©ç”¨Spark MLlibåˆ›å»ºLSHåˆ†æ¡¶æ¨¡å‹\n  val bucketProjectionLSH = new BucketedRandomProjectionLSH()\n    .setBucketLength(0.1)\n    .setNumHashTables(3)\n    .setInputCol(&quot;emb&quot;)\n    .setOutputCol(&quot;bucketId&quot;)\n  //è®­ç»ƒLSHåˆ†æ¡¶æ¨¡å‹\n  val bucketModel = bucketProjectionLSH.fit(movieEmbDF)\n  //è¿›è¡Œåˆ†æ¡¶\n  val embBucketResult = bucketModel.transform(movieEmbDF)\n  \n  //æ‰“å°åˆ†æ¡¶ç»“æœ\n  println(&quot;movieId, emb, bucketId schema:&quot;)\n  embBucketResult.printSchema()\n  println(&quot;movieId, emb, bucketId data result:&quot;)\n  embBucketResult.show(10, truncate = false)\n  \n  //å°è¯•å¯¹ä¸€ä¸ªç¤ºä¾‹EmbeddingæŸ¥æ‰¾æœ€è¿‘é‚»\n  println(&quot;Approximately searching for 5 nearest neighbors of the sample embedding:&quot;)\n  val sampleEmb = Vectors.dense(0.795,0.583,1.120,0.850,0.174,-0.839,-0.0633,0.249,0.673,-0.237)\n  bucketModel.approxNearestNeighbors(movieEmbDF, sampleEmb, 5).show(truncate = false)\n}\n\n</code></pre><p>ä¸ºäº†å¸®åŠ©ä½ æ›´åŠ ç›´è§‚çš„çœ‹åˆ°åˆ†æ¡¶æ“ä½œçš„æ•ˆæœï¼Œæˆ‘æŠŠä½¿ç”¨LSHæ¨¡å‹å¯¹ç”µå½±Embeddingè¿›è¡Œåˆ†æ¡¶å¾—åˆ°çš„äº”ä¸ªç»“æœæ‰“å°äº†å‡ºæ¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>+-------+-----------------------------+------------------+\n|movieId|emb                          |bucketId          |\n+-------+-----------------------------+------------------------+\n|710    |[0.04211471602320671,..]     |[[-2.0], [14.0], [8.0]] |\n|205    |[0.6645985841751099,...]     |[[-4.0], [3.0], [5.0]]  |\n|45     |[0.4899883568286896,...]     |[[-6.0], [-1.0], [2.0]] |\n|515    |[0.6064003705978394,...]     |[[-3.0], [-1.0], [2.0]] |\n|574    |[0.5780771970748901,...]     |[[-5.0], [2.0], [0.0]]  |\n+-------+-----------------------------+------------------------+\n\n</code></pre><p>ä½ å¯ä»¥çœ‹åˆ°åœ¨BucketIdè¿™ä¸€åˆ—ï¼Œå› ä¸ºæˆ‘ä»¬ä¹‹å‰è®¾ç½®äº†NumHashTableså‚æ•°ä¸º3ï¼Œæ‰€ä»¥æ¯ä¸€ä¸ªEmbeddingå¯¹åº”äº†3ä¸ªBucketIdã€‚åœ¨å®é™…çš„æœ€è¿‘é‚»æœç´¢è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨åˆšæ‰è®²çš„å¤šæ¡¶ç­–ç•¥è¿›è¡Œæœç´¢äº†ã€‚</p><p>äº‹å®ä¸Šï¼Œåœ¨ä¸€äº›è¶…å¤§è§„æ¨¡çš„æœ€è¿‘é‚»æœç´¢é—®é¢˜ä¸­ï¼Œç´¢å¼•ã€åˆ†æ¡¶çš„ç­–ç•¥è¿˜èƒ½è¿›ä¸€æ­¥å¤æ‚ã€‚å¦‚æœä½ æœ‰å…´è¶£æ·±å…¥å­¦ä¹ ï¼Œæˆ‘æ¨èä½ å»äº†è§£ä¸€ä¸‹<a href=\"https://github.com/facebookresearch/faiss\">Facebookçš„å¼€æºå‘é‡æœ€è¿‘é‚»æœç´¢åº“FAISS</a>ï¼Œè¿™æ˜¯ä¸€ä¸ªåœ¨ä¸šç•Œå¹¿æ³›åº”ç”¨çš„å¼€æºè§£å†³æ–¹æ¡ˆã€‚</p><h2>å°ç»“</h2><p>æœ¬èŠ‚è¯¾ï¼Œæˆ‘ä»¬ä¸€èµ·è§£å†³äº†â€œEmbeddingæœ€è¿‘é‚»æœç´¢â€é—®é¢˜ã€‚</p><p>äº‹å®ä¸Šï¼Œå¯¹äºæ¨èç³»ç»Ÿæ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå¬å›æœ€ç›¸ä¼¼ç‰©å“Embeddingçš„é—®é¢˜ï¼Œçœ‹æˆæ˜¯åœ¨é«˜ç»´çš„å‘é‡ç©ºé—´å†…æœç´¢æœ€è¿‘é‚»ç‚¹çš„è¿‡ç¨‹ã€‚é‡åˆ°æœ€è¿‘é‚»é—®é¢˜ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šé‡‡ç”¨èšç±»å’Œç´¢å¼•è¿™ä¸¤ç§æ–¹æ³•ã€‚ä½†æ˜¯èšç±»å’Œç´¢å¼•éƒ½æ— æ³•å®Œå…¨è§£å†³è¾¹ç¼˜ç‚¹æœ€è¿‘é‚»çš„é—®é¢˜ï¼Œå¹¶ä¸”å¯¹äºèšç±»æ¥è¯´ï¼Œä¸­å¿ƒç‚¹çš„æ•°é‡kä¹Ÿå¹¶ä¸å¥½ç¡®å®šï¼Œè€Œå¯¹äºKd-treeç´¢å¼•æ¥è¯´ï¼ŒKd-treeç´¢å¼•çš„ç»“æ„å¹¶ä¸ç®€å•ï¼Œç¦»çº¿å’Œåœ¨çº¿ç»´æŠ¤çš„è¿‡ç¨‹ä¹Ÿç›¸å¯¹å¤æ‚ã€‚</p><p>å› æ­¤ï¼Œè§£å†³æœ€è¿‘é‚»é—®é¢˜æœ€â€œå®Œç¾â€çš„åŠæ³•å°±æ˜¯ä½¿ç”¨å±€éƒ¨æ•æ„Ÿå“ˆå¸Œï¼Œåœ¨æ¯ä¸ªæ¡¶å†…ç‚¹çš„æ•°é‡æ¥è¿‘æ—¶ï¼Œå®ƒèƒ½å¤ŸæŠŠæœ€è¿‘é‚»æŸ¥æ‰¾çš„æ—¶é—´æ§åˆ¶åœ¨å¸¸æ•°çº§åˆ«ã€‚ä¸ºäº†è¿›ä¸€æ­¥æé«˜æœ€è¿‘é‚»æœç´¢çš„æ•ˆç‡æˆ–å¬å›ç‡ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é‡‡ç”¨å¤šæ¡¶ç­–ç•¥ï¼Œé¦–å…ˆæ˜¯åŸºäºâ€œä¸”â€æ“ä½œçš„å¤šæ¡¶ç­–ç•¥èƒ½å¤Ÿè¿›ä¸€æ­¥å‡å°‘å€™é€‰é›†è§„æ¨¡ï¼Œå¢åŠ è®¡ç®—æ•ˆç‡ï¼Œå…¶æ¬¡æ˜¯åŸºäºâ€œæˆ–â€æ“ä½œçš„å¤šæ¡¶ç­–ç•¥åˆ™èƒ½å¤Ÿæé«˜å¬å›ç‡ï¼Œå‡å°‘æ¼æ‰æœ€è¿‘é‚»ç‚¹çš„å¯èƒ½æ€§ã€‚</p><p>æœ€åï¼Œæˆ‘åœ¨ä¸‹é¢åˆ—å‡ºäº†å„ç§æ–¹æ³•çš„ä¼˜ç¼ºç‚¹ï¼Œå¸Œæœ›èƒ½å¸®åŠ©ä½ åšä¸€ä¸ªå¿«é€Ÿçš„å¤ç›˜ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/40/b1/40yy632948cdd9090fe34d3957307eb1.jpeg?wh=1920*878\" alt=\"\"></p><h2>è¯¾åæ€è€ƒ</h2><p>å¦‚æœè®©ä½ åœ¨æ¨èæœåŠ¡å™¨å†…éƒ¨çš„å¬å›å±‚å®ç°æœ€è¿‘é‚»æœç´¢è¿‡ç¨‹ï¼Œä½ ä¼šæ€æ ·å­˜å‚¨å’Œä½¿ç”¨æˆ‘ä»¬åœ¨ç¦»çº¿äº§ç”Ÿçš„åˆ†æ¡¶æ•°æ®ï¼Œä»¥åŠæ€æ ·è®¾è®¡çº¿ä¸Šçš„æœç´¢è¿‡ç¨‹å‘¢ï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºå†™å‡ºä½ çš„ç­”æ¡ˆï¼Œæ›´æ¬¢è¿ä½ æŠŠè¿™ä¸€è¿‡ç¨‹çš„å®ç°æäº¤Pull Requeståˆ°Sparrow Resysé¡¹ç›®ï¼Œå¦‚æœèƒ½å¤Ÿè¢«é‡‡çº³ï¼Œä½ å°†æˆä¸ºè¿™ä¸€å¼€æºé¡¹ç›®çš„è´¡çŒ®è€…ä¹‹ä¸€ã€‚æˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼</p>","neighbors":{"left":{"article_title":"11 | å¬å›å±‚ï¼šå¦‚ä½•å¿«é€Ÿåˆå‡†ç¡®åœ°ç­›é€‰æ‰ä¸ç›¸å…³ç‰©å“ï¼Ÿ","id":299494},"right":{"article_title":"13 | æ¨¡å‹æœåŠ¡ï¼šæ€æ ·æŠŠä½ çš„ç¦»çº¿æ¨¡å‹éƒ¨ç½²åˆ°çº¿ä¸Šï¼Ÿ","id":303430}},"comments":[{"had_liked":false,"id":257986,"user_name":"Dikiwi","can_delete":false,"product_type":"c1","uid":2198644,"ip_address":"","ucode":"F6E4C2008C7F7B","user_header":"https://static001.geekbang.org/account/avatar/00/21/8c/74/2bbd132d.jpg","comment_is_top":false,"comment_ctime":1604235586,"is_pvip":false,"replies":[{"id":"94056","content":"è¿™æ˜¯ä¸ªå¥½é—®é¢˜ï¼Œæ¨èå…¶ä»–åŒå­¦ä¹Ÿå…³æ³¨ã€‚<br><br>å› ä¸ºå¦‚æœæ€»æ˜¯å›ºå®šè¾¹ç•Œï¼Œå¾ˆå®¹æ˜“è®©è¾¹ç•Œä¸¤è¾¹éå¸¸æ¥è¿‘çš„ç‚¹æ€»æ˜¯è¢«åˆ†åˆ°ä¸¤ä¸ªæ¡¶é‡Œã€‚è¿™æ˜¯æˆ‘ä»¬ä¸æƒ³çœ‹åˆ°çš„ã€‚<br><br>æ‰€ä»¥éšæœºè°ƒæ•´bï¼Œç”Ÿæˆå¤šä¸ªhashå‡½æ•°ï¼Œå¹¶ä¸”é‡‡ç”¨æˆ–çš„æ–¹å¼ç»„åˆï¼Œå°±å¯ä»¥ä¸€å®šç¨‹åº¦é¿å…è¿™äº›è¾¹ç•Œç‚¹çš„é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1604365963,"ip_address":"","comment_id":257986,"utype":1}],"discussion_count":1,"race_medal":0,"score":"259302273346","product_id":100060801,"comment_content":"b æ˜¯ 0 åˆ° w é—´çš„ä¸€ä¸ªå‡åŒ€åˆ†å¸ƒéšæœºå˜é‡ï¼Œé¿å…åˆ†æ¡¶è¾¹ç•Œå›ºåŒ–ã€‚è¿™æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæ˜¯è¯´å¯ä»¥é€šè¿‡è°ƒæ•´bæ¥å½¢æˆå¦å¤–ä¸€ä¸ªä¸€ä¸ªhashå‡½æ•°ï¼Ÿ","like_count":61,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508519,"discussion_content":"è¿™æ˜¯ä¸ªå¥½é—®é¢˜ï¼Œæ¨èå…¶ä»–åŒå­¦ä¹Ÿå…³æ³¨ã€‚\n\nå› ä¸ºå¦‚æœæ€»æ˜¯å›ºå®šè¾¹ç•Œï¼Œå¾ˆå®¹æ˜“è®©è¾¹ç•Œä¸¤è¾¹éå¸¸æ¥è¿‘çš„ç‚¹æ€»æ˜¯è¢«åˆ†åˆ°ä¸¤ä¸ªæ¡¶é‡Œã€‚è¿™æ˜¯æˆ‘ä»¬ä¸æƒ³çœ‹åˆ°çš„ã€‚\n\næ‰€ä»¥éšæœºè°ƒæ•´bï¼Œç”Ÿæˆå¤šä¸ªhashå‡½æ•°ï¼Œå¹¶ä¸”é‡‡ç”¨æˆ–çš„æ–¹å¼ç»„åˆï¼Œå°±å¯ä»¥ä¸€å®šç¨‹åº¦é¿å…è¿™äº›è¾¹ç•Œç‚¹çš„é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604365963,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":257854,"user_name":"kaijien","can_delete":false,"product_type":"c1","uid":1499156,"ip_address":"","ucode":"1192E5E3AEED2E","user_header":"https://static001.geekbang.org/account/avatar/00/16/e0/14/72a484d8.jpg","comment_is_top":false,"comment_ctime":1604156424,"is_pvip":false,"replies":[{"id":"93889","content":"1ã€æ¯ä¸ªæ¡¶å–å¤šå°‘ç‚¹è·Ÿä½ åœ¨çº¿ä¸Šæƒ³å¯»æ‰¾top Nçš„è§„æ¨¡æœ‰å…³ç³»ã€‚æ¯”å¦‚å¬å›å±‚æƒ³å¬å›1000ä¸ªç‰©å“ï¼Œé‚£ä¹ˆNå°±æ˜¯1000ï¼Œé‚£ä¹ˆæ¡¶å†…ç‚¹æ•°çš„è§„æ¨¡å°±ç»´æŒåœ¨1000-5000çš„çº§åˆ«æ˜¯æ¯”è¾ƒåˆé€‚çš„ã€‚å½“ç„¶äº†ç‚¹æ•°è¿˜è·Ÿä½ æƒ³å–ä¸”è¿˜æ˜¯æˆ–ï¼Œæœ‰å¤šå°‘ä¸ªå“ˆå¸Œå‡½æ•°æœ‰å…³ç³»ï¼Œä½†åŸºæœ¬ä¸Šéœ€è¦è·ŸNåœ¨ä¸€ä¸ªé‡çº§ä¸”é«˜äºNã€‚<br><br>2ã€Embeddingåœ¨å®è·µä¸­å…¶å®å¾ˆå°‘å–768é‚£ä¹ˆé«˜çš„ç»´åº¦ï¼Œæˆ‘ä»¬è®­ç»ƒæ¨¡å‹æ—¶å€™çš„ç»éªŒæ˜¯ï¼Œè¶…è¿‡100ç»´åï¼Œå¢åŠ ç»´åº¦çš„ä½œç”¨å°±æ²¡é‚£ä¹ˆæ˜æ˜¾äº†ï¼Œé€šå¸¸å–10-50ç»´å°±è¶³å¤Ÿäº†ã€‚æ¯”å¦‚è¯´50ç»´ï¼Œè¿™å…¶å®å·²ç»æ˜¯éå¸¸é«˜ç»´çš„embeddingäº†ï¼Œæˆ‘æ¨èç”¨æ¯”è¾ƒå¤æ‚ä¸€ç‚¹çš„æ“ä½œï¼Œæ¯”å¦‚å–5ä¸ªå“ˆå¸Œå‡½æ•°ï¼ŒåŒæ—¶è½åœ¨3+ä¸ªæ¡¶é‡Œçš„ç‚¹ä½œä¸ºå€™é€‰ç‚¹ã€‚<br><br>ä½†è¿˜æ˜¯é‚£å¥è¯ï¼Œè¦è‡ªå·±è§‚å¯Ÿæ•°æ®ï¼Œè§‚å¯ŸLSHçš„å¬å›ç‡å¦‚ä½•ï¼Œå› ä¸ºæ¯å®¶çš„æ•°æ®éƒ½ä¸ä¸€æ ·ï¼Œä»åˆ«äººé‚£å¾—æ¥çš„ç»éªŒç»å¸¸ä¸å¥æ•ˆæ˜¯å¾ˆæ­£å¸¸çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1604208406,"ip_address":"","comment_id":257854,"utype":1}],"discussion_count":2,"race_medal":0,"score":"151928011784","product_id":100060801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæ‚¨æåˆ°ç‚¹æ•°è¶Šå¤šè¶Šåº”è¯¥å¢åŠ æ¡¶çš„ä¸ªæ•°ï¼Œè¿˜æœ‰Embeddingç»´åº¦è¶Šå¤§è¶Šåº”è¯¥å¢åŠ å“ˆå¸Œå‡½æ•°å¹¶å¤šç”¨ä¸”çš„æ–¹å¼ï¼Œé‚£ä»æ‚¨çš„ç»éªŒä¸Š:<br>1 æ¯ä¸ªæ¡¶ç»´æŒå¤šå°‘ä¸ªç‚¹æ¯”è¾ƒå¥½ï¼Ÿ<br>2 Embeddingä¸€èˆ¬å¤šå°‘ç®—å¤§ï¼Ÿæ¯”å¦‚768ç»´æ˜¯å¦åº”è¯¥ç”¨ä¸”çš„æ–¹å¼ï¼Ÿåº”è¯¥ç”¨å¤šå°‘å“ˆå¸Œå‡½æ•°æ¯”è¾ƒå¥½ï¼Ÿ","like_count":36,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508475,"discussion_content":"1ã€æ¯ä¸ªæ¡¶å–å¤šå°‘ç‚¹è·Ÿä½ åœ¨çº¿ä¸Šæƒ³å¯»æ‰¾top Nçš„è§„æ¨¡æœ‰å…³ç³»ã€‚æ¯”å¦‚å¬å›å±‚æƒ³å¬å›1000ä¸ªç‰©å“ï¼Œé‚£ä¹ˆNå°±æ˜¯1000ï¼Œé‚£ä¹ˆæ¡¶å†…ç‚¹æ•°çš„è§„æ¨¡å°±ç»´æŒåœ¨1000-5000çš„çº§åˆ«æ˜¯æ¯”è¾ƒåˆé€‚çš„ã€‚å½“ç„¶äº†ç‚¹æ•°è¿˜è·Ÿä½ æƒ³å–ä¸”è¿˜æ˜¯æˆ–ï¼Œæœ‰å¤šå°‘ä¸ªå“ˆå¸Œå‡½æ•°æœ‰å…³ç³»ï¼Œä½†åŸºæœ¬ä¸Šéœ€è¦è·ŸNåœ¨ä¸€ä¸ªé‡çº§ä¸”é«˜äºNã€‚\n\n2ã€Embeddingåœ¨å®è·µä¸­å…¶å®å¾ˆå°‘å–768é‚£ä¹ˆé«˜çš„ç»´åº¦ï¼Œæˆ‘ä»¬è®­ç»ƒæ¨¡å‹æ—¶å€™çš„ç»éªŒæ˜¯ï¼Œè¶…è¿‡100ç»´åï¼Œå¢åŠ ç»´åº¦çš„ä½œç”¨å°±æ²¡é‚£ä¹ˆæ˜æ˜¾äº†ï¼Œé€šå¸¸å–10-50ç»´å°±è¶³å¤Ÿäº†ã€‚æ¯”å¦‚è¯´50ç»´ï¼Œè¿™å…¶å®å·²ç»æ˜¯éå¸¸é«˜ç»´çš„embeddingäº†ï¼Œæˆ‘æ¨èç”¨æ¯”è¾ƒå¤æ‚ä¸€ç‚¹çš„æ“ä½œï¼Œæ¯”å¦‚å–5ä¸ªå“ˆå¸Œå‡½æ•°ï¼ŒåŒæ—¶è½åœ¨3+ä¸ªæ¡¶é‡Œçš„ç‚¹ä½œä¸ºå€™é€‰ç‚¹ã€‚\n\nä½†è¿˜æ˜¯é‚£å¥è¯ï¼Œè¦è‡ªå·±è§‚å¯Ÿæ•°æ®ï¼Œè§‚å¯ŸLSHçš„å¬å›ç‡å¦‚ä½•ï¼Œå› ä¸ºæ¯å®¶çš„æ•°æ®éƒ½ä¸ä¸€æ ·ï¼Œä»åˆ«äººé‚£å¾—æ¥çš„ç»éªŒç»å¸¸ä¸å¥æ•ˆæ˜¯å¾ˆæ­£å¸¸çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604208406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1579494,"avatar":"https://static001.geekbang.org/account/avatar/00/18/19/e6/2a7be4dd.jpg","nickname":"æ°è¥¿","note":"","ucode":"22BCC2644B69D8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390895,"discussion_content":"è€å¸ˆå¥½ï¼Œæƒ³é—®ä¸‹ï¼Œå¦‚ä½•å¯ä»¥çœ‹åˆ°æ¯ä¸ªæ¡¶ç‚¹æ•°çš„çœŸå®æ•°æ®é‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630122319,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":281436,"user_name":"Alan","can_delete":false,"product_type":"c1","uid":2115316,"ip_address":"","ucode":"591A28E310A8F5","user_header":"https://static001.geekbang.org/account/avatar/00/20/46/f4/93b1275b.jpg","comment_is_top":false,"comment_ctime":1614750879,"is_pvip":false,"replies":[{"id":"102383","content":"èµï¼Œè¿™ä¸ªæˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œéå¸¸æ„Ÿè°¢åˆ†äº«ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1615024070,"ip_address":"","comment_id":281436,"utype":1}],"discussion_count":4,"race_medal":0,"score":"143348671647","product_id":100060801,"comment_content":"æ‚„æ‚„å‘Šè¯‰å¤§å®¶ï¼šembeddingå±‚Kå€¼çš„åˆå§‹åˆ¤æ–­ï¼Œæœ‰ä¸ªç»éªŒå…¬å¼:K= Embeddingç»´æ•°å¼€4æ¬¡æ–¹ ,x=åˆå§‹çš„ç»´åº¦æ•°ï¼›<br>åç»­ï¼ŒKå€¼è°ƒå‚æŒ‰ç…§2çš„å€æ•°è¿›è¡Œè°ƒæ•´ï¼Œä¾‹å¦‚ï¼š2ï¼Œ4ï¼Œ8ï¼Œ16ï¼›","like_count":34,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516398,"discussion_content":"èµï¼Œè¿™ä¸ªæˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œéå¸¸æ„Ÿè°¢åˆ†äº«ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615024070,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2206796,"avatar":"","nickname":"Geek1963","note":"","ucode":"241D1837F792E2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534639,"discussion_content":"xæ˜¯å•¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638247323,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2705003,"avatar":"https://static001.geekbang.org/account/avatar/00/29/46/6b/16237b5a.jpg","nickname":"Someone you loved","note":"","ucode":"CA86C3020E73F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388215,"discussion_content":"è¯·é—®ï¼Œè¿™é‡Œçš„Kå€¼æ˜¯æŒ‡ä»€ä¹ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628657395,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2735592,"avatar":"","nickname":"WJing","note":"","ucode":"391A148418523B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2705003,"avatar":"https://static001.geekbang.org/account/avatar/00/29/46/6b/16237b5a.jpg","nickname":"Someone you loved","note":"","ucode":"CA86C3020E73F6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391895,"discussion_content":"ä¸Šæ–‡ä¸­Kæ˜¯åˆ†æ¡¶çš„æ•°é‡","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1630677748,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":388215,"ip_address":""},"score":391895,"extra":""}]}]},{"had_liked":false,"id":269983,"user_name":"Alr","can_delete":false,"product_type":"c1","uid":1367146,"ip_address":"","ucode":"A08011E911E946","user_header":"","comment_is_top":false,"comment_ctime":1608867350,"is_pvip":false,"replies":[{"id":"97892","content":"å¯¹çš„ã€‚å°±æ˜¯å»ºç«‹å€’æ’ç´¢å¼•çš„æ€è·¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1608958970,"ip_address":"","comment_id":269983,"utype":1}],"discussion_count":1,"race_medal":0,"score":"96098147862","product_id":100060801,"comment_content":"è¯¾åæ€è€ƒé—®é¢˜ï¼šä»¥item_idä½œä¸ºkeyï¼Œ item_idå¯¹åº”çš„BucketIdä½œä¸ºvalueå­˜å‚¨åœ¨redisï¼Œ å†ä»¥æ¯ä¸ªBucketIdä½œä¸ºkeyï¼Œ item_idä½œä¸ºvalueå­˜å‚¨åœ¨redisï¼Œ åœ¨å¬å›çš„æ—¶å€™éå†item_idçš„æ‰€æœ‰BucketIdï¼Œè·å–BucketIdå¯¹åº”çš„item_idå°±æ˜¯éœ€è¦å¬å›çš„itemï¼Œ è¯·é—®è€å¸ˆè¿™ä¸ªæ€è·¯å¯¹å— ","like_count":23,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512475,"discussion_content":"å¯¹çš„ã€‚å°±æ˜¯å»ºç«‹å€’æ’ç´¢å¼•çš„æ€è·¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608958970,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":257719,"user_name":"æµ£ç†Šå½“å®¶","can_delete":false,"product_type":"c1","uid":1952248,"ip_address":"","ucode":"939F06050423E4","user_header":"https://static001.geekbang.org/account/avatar/00/1d/c9/f8/72955ef9.jpg","comment_is_top":false,"comment_ctime":1604096222,"is_pvip":false,"replies":[{"id":"93875","content":"å¥½é—®é¢˜ã€‚åœ¨å’±ä»¬çš„é¡¹ç›®é‡Œï¼Œç”¨æˆ·embeddingå°±æ˜¯é€šè¿‡å¹³å‡è¿™ä¸ªç”¨æˆ·è¯„è®ºè¿‡çš„é«˜åˆ†ç”µå½±çš„embeddingå¾—åˆ°çš„ã€‚<br>æ‰€ä»¥ä»–ä»¬è‚¯å®šæ˜¯åœ¨ä¸€ä¸ªå‘é‡ç©ºé—´é‡Œã€‚<br><br>åªè¦æ˜¯åˆ©ç”¨ç”¨æˆ·å†å²çš„item embeddingç”Ÿæˆçš„ç”¨æˆ·embeddingï¼Œå¯ä»¥è¯´éƒ½æ˜¯åœ¨ä¸€ä¸ªå‘é‡ç©ºé—´å†…ï¼Œè¿™äº›ç”Ÿæˆæ–¹å¼åŒ…æ‹¬ä½†ä¸é™äºaverage poolingï¼Œsum poolingï¼Œattentionç­‰ç­‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1604185398,"ip_address":"","comment_id":257719,"utype":1}],"discussion_count":2,"race_medal":0,"score":"66028605662","product_id":100060801,"comment_content":"è¯·é—®è€å¸ˆå…³äºè¿™å¥è¯ â€œåœ¨è®­ç»ƒç‰©å“å’Œç”¨æˆ·çš„ Embedding å‘é‡æ—¶ï¼Œå¦‚æœäºŒè€…çš„ Embedding åœ¨åŒä¸€ä¸ªå‘é‡ç©ºé—´å†…â€ï¼Œ æˆ‘ä»¬åœ¨ä¹‹å‰6-7èŠ‚embeddingçš„ä¸­ï¼Œè®²äº†æ€ä¹ˆæŠŠç‰©å“åºåˆ—ä¿¡æ¯è½¬åŒ–ä¸ºembeddingï¼Œ æƒ³çŸ¥é“ï¼Œç”¨æˆ·çš„embeddingæ˜¯æ€ä¹ˆç”Ÿæˆçš„å‘¢ï¼Ÿ ç„¶åï¼Œç‰©å“å’Œç”¨æˆ·åœ¨åŒä¸€ä¸ªå‘é‡ç©ºé—´ï¼Œè¿™ä¸ªæ˜¯æ€ä¹ˆå¾—åˆ°çš„å‘¢ï¼Ÿ","like_count":15,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508428,"discussion_content":"å¥½é—®é¢˜ã€‚åœ¨å’±ä»¬çš„é¡¹ç›®é‡Œï¼Œç”¨æˆ·embeddingå°±æ˜¯é€šè¿‡å¹³å‡è¿™ä¸ªç”¨æˆ·è¯„è®ºè¿‡çš„é«˜åˆ†ç”µå½±çš„embeddingå¾—åˆ°çš„ã€‚\næ‰€ä»¥ä»–ä»¬è‚¯å®šæ˜¯åœ¨ä¸€ä¸ªå‘é‡ç©ºé—´é‡Œã€‚\n\nåªè¦æ˜¯åˆ©ç”¨ç”¨æˆ·å†å²çš„item embeddingç”Ÿæˆçš„ç”¨æˆ·embeddingï¼Œå¯ä»¥è¯´éƒ½æ˜¯åœ¨ä¸€ä¸ªå‘é‡ç©ºé—´å†…ï¼Œè¿™äº›ç”Ÿæˆæ–¹å¼åŒ…æ‹¬ä½†ä¸é™äºaverage poolingï¼Œsum poolingï¼Œattentionç­‰ç­‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604185398,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2598647,"avatar":"https://static001.geekbang.org/account/avatar/00/27/a6/f7/e434c375.jpg","nickname":"Sean","note":"","ucode":"E35C2300971FA2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371420,"discussion_content":"å€Ÿè¿™ä¸²å†é—®ä¸€ä¸‹ï¼Œé’ˆå¯¹å†·å¯åŠ¨çš„ç”¨æˆ·ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šä½¿ç”¨å¹´é¾„ã€æ€§åˆ«ã€èŒä¸šç­‰ç‰¹å¾µä½œä¸ºåˆå§‹çš„embeddingï¼Œè¿™æ ·åœ¨æ²¡æœ‰ä»»ä½•æµè§ˆçºªå½•çš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•ä¿è¯ç”¨æˆ·å’Œç‰©å“åœ¨åŒä¸€ä¸ªå‘é‡ç©ºé—´å†…å‘¢ï¼Ÿ\næˆ–æ˜¯é™¤äº†è§‚çœ‹çºªå½•ä¹‹å¤–ï¼Œæˆ‘ä¹Ÿæƒ³åŠ å…¥ä¸€äº›é¢å¤–çš„ç‰¹å¾µæ¥åšç”¨æˆ·embeddingï¼Œè¿™æ ·åˆè¯¥å¦‚ä½•ä¿è¯æ˜¯å’Œç‰©å“åœ¨åŒä¸€ä¸ªå‘é‡ç©ºé—´å‘¢ï¼Ÿè°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619765351,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":265294,"user_name":"èŒƒé—²","can_delete":false,"product_type":"c1","uid":1073125,"ip_address":"","ucode":"F21FD7DF6BA53C","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/e5/54325854.jpg","comment_is_top":false,"comment_ctime":1606840290,"is_pvip":false,"replies":[{"id":"96528","content":"æ²¡æœ‰magicå˜›ï¼Œå„ç§æ–¹æ³•éƒ½æœ‰ä¼˜åŠ¿ï¼Œé€‚ç”¨çš„æ•°æ®é‡ä¹Ÿä¸åŒã€‚æ‰€ä»¥facebookåœ¨faissé‡Œé¢å…¶å®æ˜¯èåˆäº†å¤šç§ç´¢å¼•æ–¹å¼ï¼Œå¤§å®¶æœ‰å…´è¶£è¿˜æ˜¯æ¨èæ·±å…¥å»çœ‹ä¸€ä¸‹faissçš„åŸç†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1606940759,"ip_address":"","comment_id":265294,"utype":1}],"discussion_count":1,"race_medal":0,"score":"53146447842","product_id":100060801,"comment_content":"LSHä¹Ÿæœ‰è‡ªå·±çš„é—®é¢˜ã€‚æ•°æ®é‡å¤ªå¤§çš„æ—¶å€™ï¼Œhashçš„ä¸ªæ•°ä¸å¥½é€‰æ‹©ï¼Œå¦å¤–å­˜åœ¨hashå†²çªï¼Œå®¹æ˜“é™ä½å¬å›ç‡ã€‚<br><br>åŒåŸºäºæ ‘çš„ï¼ŒåŸºäºé‡åŒ–çš„ï¼ŒåŸºäºçš„å›¾çš„æ–¹æ³•æ¥æ¯”ï¼Œåœ¨å¬å›ç‡ï¼Œé€Ÿåº¦å’Œå†…å­˜ä½¿ç”¨ä¸Šéƒ½ä¸å ä¼˜åŠ¿ã€‚","like_count":12,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510865,"discussion_content":"æ²¡æœ‰magicå˜›ï¼Œå„ç§æ–¹æ³•éƒ½æœ‰ä¼˜åŠ¿ï¼Œé€‚ç”¨çš„æ•°æ®é‡ä¹Ÿä¸åŒã€‚æ‰€ä»¥facebookåœ¨faissé‡Œé¢å…¶å®æ˜¯èåˆäº†å¤šç§ç´¢å¼•æ–¹å¼ï¼Œå¤§å®¶æœ‰å…´è¶£è¿˜æ˜¯æ¨èæ·±å…¥å»çœ‹ä¸€ä¸‹faissçš„åŸç†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606940759,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":259447,"user_name":"haydenlo","can_delete":false,"product_type":"c1","uid":1594293,"ip_address":"","ucode":"D9EEF8226C3D81","user_header":"","comment_is_top":false,"comment_ctime":1604729330,"is_pvip":false,"replies":[{"id":"95607","content":"æ ¹æ®ä½ è®­ç»ƒembeddingæ—¶å€™é€‰æ‹©çš„ç›¸ä¼¼åº¦æ¥ç¡®å®šã€‚<br><br>æ¯”å¦‚ä½ è®­ç»ƒembeddingæ¨¡å‹æ—¶å°±é‡‡ç”¨äº†æ¬§å¼è·ç¦»ï¼Œé‚£ä¹ˆè¿™é‡Œå°±ç”¨æ¬§å¼è·ç¦»ã€‚è®­ç»ƒæ¨¡å‹æ—¶ç”¨äº†å†…ç§¯ï¼Œè¿™é‡Œå°±ç”¨å†…ç§¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1606168601,"ip_address":"","comment_id":259447,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35964467698","product_id":100060801,"comment_content":"è¯·é—®å¯¹äºè®¡ç®—è·ç¦»ï¼Œæ¬§å‡ é‡Œå¾—è·ç¦»å’Œä½™å¼¦è·ç¦»ç­‰åº”è¯¥æ€ä¹ˆé€‰æ‹©ï¼Ÿ","like_count":9,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508940,"discussion_content":"æ ¹æ®ä½ è®­ç»ƒembeddingæ—¶å€™é€‰æ‹©çš„ç›¸ä¼¼åº¦æ¥ç¡®å®šã€‚\n\næ¯”å¦‚ä½ è®­ç»ƒembeddingæ¨¡å‹æ—¶å°±é‡‡ç”¨äº†æ¬§å¼è·ç¦»ï¼Œé‚£ä¹ˆè¿™é‡Œå°±ç”¨æ¬§å¼è·ç¦»ã€‚è®­ç»ƒæ¨¡å‹æ—¶ç”¨äº†å†…ç§¯ï¼Œè¿™é‡Œå°±ç”¨å†…ç§¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606168601,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":257866,"user_name":"JustDoDT","can_delete":false,"product_type":"c1","uid":1127175,"ip_address":"","ucode":"6AF0B80F00EAEF","user_header":"https://static001.geekbang.org/account/avatar/00/11/33/07/8f351609.jpg","comment_is_top":false,"comment_ctime":1604161231,"is_pvip":false,"replies":[{"id":"93888","content":"å¾ˆéš¾ç²¾ç¡®æ§åˆ¶æ¯ä¸ªæ¡¶å†…çš„è§„æ¨¡æ˜¯Cï¼Œä½†èƒ½é€šè¿‡æ§åˆ¶æ¡¶çš„å®½åº¦wï¼Œæ¥å¤§æ¦‚æ§åˆ¶æ¡¶çš„è§„æ¨¡åœ¨Cé™„è¿‘ã€‚å»æ‰ä¸€äº›å™ªå£°ç‚¹åï¼Œå¦‚æœç‚¹çš„åˆ†å¸ƒæ¯”è¾ƒå‡åŒ€ï¼Œé‚£ä¹ˆæ¯ä¸ªæ¡¶çš„è§„æ¨¡å°±æ¯”è¾ƒç¨³å®šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1604207934,"ip_address":"","comment_id":257866,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23078997711","product_id":100060801,"comment_content":"å¦‚ä½•ç²¾ç¡®çš„æ§åˆ¶æ¯ä¸ªæ¡¶å†…çš„ç‚¹çš„è§„æ¨¡æ˜¯ Cï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508481,"discussion_content":"å¾ˆéš¾ç²¾ç¡®æ§åˆ¶æ¯ä¸ªæ¡¶å†…çš„è§„æ¨¡æ˜¯Cï¼Œä½†èƒ½é€šè¿‡æ§åˆ¶æ¡¶çš„å®½åº¦wï¼Œæ¥å¤§æ¦‚æ§åˆ¶æ¡¶çš„è§„æ¨¡åœ¨Cé™„è¿‘ã€‚å»æ‰ä¸€äº›å™ªå£°ç‚¹åï¼Œå¦‚æœç‚¹çš„åˆ†å¸ƒæ¯”è¾ƒå‡åŒ€ï¼Œé‚£ä¹ˆæ¯ä¸ªæ¡¶çš„è§„æ¨¡å°±æ¯”è¾ƒç¨³å®šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604207934,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":303454,"user_name":"Yang Hong","can_delete":false,"product_type":"c1","uid":2664414,"ip_address":"","ucode":"B92C87587CE9E1","user_header":"","comment_is_top":false,"comment_ctime":1626794013,"is_pvip":false,"replies":[{"id":"109853","content":"user embä¸ç”¨é¢„å­˜åˆ†æ¡¶ï¼Œä¿å­˜hashå‡½æ•°åœ¨çº¿ç®—å°±å¯ä»¥","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1626843179,"ip_address":"","comment_id":303454,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18806663197","product_id":100060801,"comment_content":"è¯¾åæ€è€ƒï¼š<br>ç¦»çº¿è®­ç»ƒï¼šLSH modelä¸ºæ¯ä¸ªitem embeddingç”Ÿæˆmä¸ªåˆ†æ¡¶ï¼ŒåŒæ—¶ä¸ºæ¯ä¸ªuser embeddingç”Ÿæˆmä¸ªåˆ†æ¡¶ã€‚<br><br>ç¦»çº¿å­˜å‚¨ï¼š1ï¼‰åœ¨redisä¸­å­˜å‚¨itemçš„åˆ†æ¡¶ç»“æœï¼Œkeyä¸ºitem_idï¼Œ valueä¸ºitemå¯¹åº”çš„BucketIdï¼›å»ºç«‹å€’æ’ç´¢å¼•ï¼Œå†ä»¥æ¯ä¸ªBucketIdä½œä¸ºkeyï¼Œ valueä¸ºå¯¹åº”çš„item_idï¼›2ï¼‰åœ¨redisä¸­å­˜å‚¨userçš„åˆ†æ¡¶ç»“æœï¼Œkeyä¸ºuser_idï¼Œ valueä¸ºuserå¯¹åº”çš„BucketIdï¼›<br><br>åœ¨çº¿å¬å›ï¼š1ï¼‰å–å‡ºç›®æ ‡userçš„user embeddingï¼Œå’Œuserå¯¹åº”çš„BucketIdï¼›2ï¼‰æŸ¥è¯¢redisåˆ†åˆ«è·å–mä¸ªBucketIdå¯¹åº”çš„item_idï¼Œç”¨ä¸”&#47;æˆ–çš„å¤šæ¡¶ç­–ç•¥æ‰¾åˆ°éœ€è¦å¬å›çš„itemã€‚<br><br>ä¸çŸ¥é“è¿™ä¸ªæ€è·¯å¯¹ä¸å¯¹ã€‚","like_count":5,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523685,"discussion_content":"user embä¸ç”¨é¢„å­˜åˆ†æ¡¶ï¼Œä¿å­˜hashå‡½æ•°åœ¨çº¿ç®—å°±å¯ä»¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626843179,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":275983,"user_name":"æ¢æ ‹ğŸ’","can_delete":false,"product_type":"c1","uid":1067594,"ip_address":"","ucode":"16EEF0DD596A80","user_header":"https://static001.geekbang.org/account/avatar/00/10/4a/4a/fdae1e16.jpg","comment_is_top":false,"comment_ctime":1611736526,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18791605710","product_id":100060801,"comment_content":"åˆ†æ¡¶å®½åº¦æ€ä¹ˆå†³å®šçš„ï¼Œéå¸¸è¿·æƒ‘ã€‚","like_count":4},{"had_liked":false,"id":257569,"user_name":"é‚£æ—¶åˆ»","can_delete":false,"product_type":"c1","uid":1150927,"ip_address":"","ucode":"B0D150856C3A4A","user_header":"https://static001.geekbang.org/account/avatar/00/11/8f/cf/890f82d6.jpg","comment_is_top":false,"comment_ctime":1604029055,"is_pvip":false,"replies":[{"id":"93837","content":"è¿™æ˜¯ä¸ªå¥½é—®é¢˜ï¼Œä½†æˆ‘è§‰å¾—è‡ªå·±æ€è€ƒä¸éš¾å¾—å‡ºç»“è®ºã€‚minhashå’Œsimhashä¸»è¦ç”¨åœ¨æ–‡æ¡£å»é‡è¿™æ ·çš„åœºæ™¯ï¼Œä½ è§‰å¾—èƒ½ä¸èƒ½æŠŠminhashå’Œsimhashåº”ç”¨åœ¨embeddingçš„åˆ†æ¡¶è¿‡ç¨‹ä¸­ï¼Ÿå¦‚æœå¯ä»¥çš„è¯ï¼Œåº”ç”¨è¿‡ç¨‹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1604092653,"ip_address":"","comment_id":257569,"utype":1}],"discussion_count":2,"race_medal":1,"score":"18783898239","product_id":100060801,"comment_content":"è¯·é—®è€å¸ˆå±€éƒ¨æ•æ„Ÿå“ˆå¸Œé‡Œçš„minhashå’Œsimhashæ˜¯å¦æœ‰åº”ç”¨å‘¢ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508379,"discussion_content":"è¿™æ˜¯ä¸ªå¥½é—®é¢˜ï¼Œä½†æˆ‘è§‰å¾—è‡ªå·±æ€è€ƒä¸éš¾å¾—å‡ºç»“è®ºã€‚minhashå’Œsimhashä¸»è¦ç”¨åœ¨æ–‡æ¡£å»é‡è¿™æ ·çš„åœºæ™¯ï¼Œä½ è§‰å¾—èƒ½ä¸èƒ½æŠŠminhashå’Œsimhashåº”ç”¨åœ¨embeddingçš„åˆ†æ¡¶è¿‡ç¨‹ä¸­ï¼Ÿå¦‚æœå¯ä»¥çš„è¯ï¼Œåº”ç”¨è¿‡ç¨‹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604092653,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2413045,"avatar":"https://static001.geekbang.org/account/avatar/00/24/d1/f5/efe2175a.jpg","nickname":"Alvin","note":"","ucode":"6F5E9AFAD16FB6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387160,"discussion_content":"åº”ç”¨åœ¨åˆ†æ¡¶å»æ‰ä»¥å‰çœ‹è¿‡çš„ç”µå½±å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628014039,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":304168,"user_name":"Infp","can_delete":false,"product_type":"c1","uid":2687465,"ip_address":"","ucode":"17467CFFB40E6B","user_header":"","comment_is_top":false,"comment_ctime":1627283030,"is_pvip":false,"replies":[{"id":"110098","content":"LSHåªæ˜¯ANNçš„ä¸€ç§è§£å†³æ–¹æ³•ï¼ŒFaissé‡‡ç”¨äº†å¤šç§ç´¢å¼•çš„ç»“æ„ï¼Œå¯ä»¥æ‰©å±•å­¦ä¹ ä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1627333983,"ip_address":"","comment_id":304168,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14512184918","product_id":100060801,"comment_content":"æœ¬äººç”¨è¿‡faissï¼ŒLSHæ— è®ºæ˜¯å¬å›ç‡è¿˜æ˜¯é€Ÿåº¦æ–¹é¢éƒ½ä¸æ˜¯å¾ˆå¥½ã€‚åŸºäºå›¾çš„HNSWæˆ–è€…HNSWSQæ˜¯æ¯”è¾ƒå¥½çš„ç´¢å¼•æ–¹å¼ï¼Œå½“ç„¶ç¼ºç‚¹æ˜¯ä¼šå ç”¨è¾ƒå¤§çš„å­˜å‚¨ç©ºé—´ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–ç´¢å¼•æ–¹å¼ï¼Œå¯å‚è€ƒfaissçš„GitHubä»‹ç»ã€‚å¦å¤–ï¼Œfaissçš„wikié‡Œé¢æœ‰å…³äºå¦‚ä½•é€‰æ‹©ç´¢å¼•çš„æŒ‡å—ï¼Œæœ‰éœ€è¦çš„åŒå­¦å¯ä»¥å»äº†è§£ä¸€ä¸‹ï¼šhttps:&#47;&#47;github.com&#47;facebookresearch&#47;faiss&#47;wiki&#47;Guidelines-to-choose-an-indexã€‚","like_count":4,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523958,"discussion_content":"LSHåªæ˜¯ANNçš„ä¸€ç§è§£å†³æ–¹æ³•ï¼ŒFaissé‡‡ç”¨äº†å¤šç§ç´¢å¼•çš„ç»“æ„ï¼Œå¯ä»¥æ‰©å±•å­¦ä¹ ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627333983,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":261407,"user_name":"é©¬é¾™æµ","can_delete":false,"product_type":"c1","uid":1087792,"ip_address":"","ucode":"16F9CE022297FF","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erUKWZy1fBBcJncWRNh9M3TkjThqgsIIpmGOTCyg2IN80IDf3COkeWyTLHliczAppIkfBgCJTsUn1g/132","comment_is_top":false,"comment_ctime":1605323969,"is_pvip":false,"replies":[{"id":"94860","content":"LSHæ˜¯Faiss indexé€‰æ‹©çš„ä¸€ç§ï¼ŒFaissçš„è¯¦ç»†ç»†èŠ‚å¤ªå¤šï¼Œé€‰æ‹©ä¹Ÿæ¯”è¾ƒå¤šï¼Œéœ€è¦å‚ç…§å¼€æºé¡¹ç›®å±•å¼€å­¦ä¹ ã€‚<br><br>Embeddingå‘é‡çš„ç»´åº¦è¶Šå¤§ï¼Œå•ä¸ªLSHåˆ†æ¡¶é”™è¯¯çš„æ¦‚ç‡å°±è¶Šå¤§ï¼Œå¤šä¸ªåˆ†æ¡¶è”åˆæ‰æ›´å®¹æ˜“æ‰¾åˆ°ç›¸ä¼¼ç‰©å“ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1605338387,"ip_address":"","comment_id":261407,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14490225857","product_id":100060801,"comment_content":"Embedding å‘é‡çš„ç»´åº¦è¶Šå¤§ï¼Œæˆ‘ä»¬è¶Šåº”è¯¥å¢åŠ å“ˆå¸Œå‡½æ•°çš„æ•°é‡ï¼Œå°½é‡é‡‡ç”¨ä¸”çš„æ–¹å¼ä½œä¸ºå¤šæ¡¶ç­–ç•¥ï¼›è¿™è¯æ€ä¹ˆç†è§£å‘¢ï¼Ÿè¿˜æœ‰å°±æ˜¯faissè¿™ç§ï¼Œé‡Œé¢ç”¨åˆ°çš„å°±æ˜¯å±€éƒ¨å“ˆå¸ŒåŸç†?","like_count":3,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509476,"discussion_content":"LSHæ˜¯Faiss indexé€‰æ‹©çš„ä¸€ç§ï¼ŒFaissçš„è¯¦ç»†ç»†èŠ‚å¤ªå¤šï¼Œé€‰æ‹©ä¹Ÿæ¯”è¾ƒå¤šï¼Œéœ€è¦å‚ç…§å¼€æºé¡¹ç›®å±•å¼€å­¦ä¹ ã€‚\n\nEmbeddingå‘é‡çš„ç»´åº¦è¶Šå¤§ï¼Œå•ä¸ªLSHåˆ†æ¡¶é”™è¯¯çš„æ¦‚ç‡å°±è¶Šå¤§ï¼Œå¤šä¸ªåˆ†æ¡¶è”åˆæ‰æ›´å®¹æ˜“æ‰¾åˆ°ç›¸ä¼¼ç‰©å“ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605338387,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":301324,"user_name":"é­”æ³•æµ·","can_delete":false,"product_type":"c1","uid":2015537,"ip_address":"","ucode":"ACC78501A9980F","user_header":"https://static001.geekbang.org/account/avatar/00/1e/c1/31/e991c364.jpg","comment_is_top":false,"comment_ctime":1625634568,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10215569160","product_id":100060801,"comment_content":"è€å¸ˆï¼Œé‡åˆ°ä¸ªé—®é¢˜ï¼Œåœ¨ä½¿ç”¨faissçš„æ—¶å€™ï¼Œcpuå ç”¨ç‡åœ¨trainçš„æ—¶å€™ä¸€ç›´æ˜¯100%ã€‚ç½‘ä¸Šè®¾ç½®çš„ä¸¤ä¸ªå‚æ•°ï¼š<br>1. export OMP_WAIT_POLICY=PASSIVEå·²ç»åŠ å…¥äº†ç¯å¢ƒå˜é‡<br>2. faiss.omp_set_num_threads(4)<br>å…¶ä»–è¿‡ç¨‹éƒ½okï¼Œå°±æ˜¯åœ¨trainå’Œaddçš„æ—¶å€™ä¸€ç›´æ˜¯100%ã€‚è¿™ä¸ªéœ€è¦æ€ä¹ˆä¿®å¤ï¼Ÿ<br>","like_count":2},{"had_liked":false,"id":271150,"user_name":"æ¨ä½³äº¦","can_delete":false,"product_type":"c1","uid":2046547,"ip_address":"","ucode":"D2009DAC396F25","user_header":"https://static001.geekbang.org/account/avatar/00/1f/3a/53/ec2c6c55.jpg","comment_is_top":false,"comment_ctime":1609416929,"is_pvip":false,"replies":[{"id":"98331","content":"æ˜¯è¿™æ ·ï¼ŒEmbeddingç»´åº¦å¤§è®¡ç®—é‡å¤§æ˜¯è‚¯å®šçš„ã€‚è¿™æœ¬èº«å°±æ˜¯ä¸€ä¸ªtradeoffï¼Œæœ‰æ—¶å€™ï¼Œä¸ºäº†çº¿ä¸Šè¿‡ç¨‹æ›´é«˜æ•ˆï¼Œå‡å°‘embçš„ç»´åº¦ä¹Ÿæ˜¯å¯ä»¥ç‰ºç‰²çš„é€‰æ‹©ã€‚ä¸€åˆ‡å·¥ç¨‹é—®é¢˜éƒ½æ˜¯å–èˆçš„é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1609475624,"ip_address":"","comment_id":271150,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10199351521","product_id":100060801,"comment_content":"è¯·é—®è€å¸ˆï¼Œä¸ºä»€ä¹ˆï¼š<br><br>Embedding å‘é‡ç»´åº¦è¶Šå¤§ï¼Œè¶Šåº”å¢åŠ å“ˆå¸Œå‡½æ•°çš„æ•°é‡ï¼Œç”¨â€œä¸”â€åˆ†æ¡¶ï¼›ç›¸åï¼ŒEmbedding å‘é‡ç»´åº¦è¶Šå°ï¼Œæˆ‘ä»¬è¶Šåº”å‡å°‘å“ˆå¸Œå‡½æ•°çš„æ•°é‡ï¼Œç”¨â€œæˆ–â€åˆ†æ¡¶ï¼Ÿ<br><br>æˆ‘çš„ç†è§£æ˜¯ï¼ŒEmbeddingç»´åº¦è¾ƒå¤§ï¼Œç‰¹å¾å¯†é›†ä¸å¥½åˆ†ï¼Œé‡‡ç”¨å¤šä¸ªå“ˆå¸Œå‡½æ•°åšæ˜ å°„å†å–äº¤çš„ç¡®å¯ä»¥æ‰¾åˆ°ç›¸ä¼¼çš„Embeddingï¼›Embeddingç»´åº¦è¾ƒå°ï¼Œç‰¹å¾åˆ†æ•£ï¼Œéœ€è¦çš„æ¡¶ä¸å¤šï¼Œç”¨æˆ–å¯ä»¥å¢åŠ ç»“æœæ•°é‡ã€‚<br><br>ä½†æ˜¯ç–‘è™‘åœ¨äºï¼ŒEmbeddingå¤§ï¼Œéœ€è¦çš„æ¡¶ä¹Ÿå¤šï¼Œè®¡ç®—é‡å²‚ä¸æ˜¯ä¼šå˜å¾—éå¸¸å¤§ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512848,"discussion_content":"æ˜¯è¿™æ ·ï¼ŒEmbeddingç»´åº¦å¤§è®¡ç®—é‡å¤§æ˜¯è‚¯å®šçš„ã€‚è¿™æœ¬èº«å°±æ˜¯ä¸€ä¸ªtradeoffï¼Œæœ‰æ—¶å€™ï¼Œä¸ºäº†çº¿ä¸Šè¿‡ç¨‹æ›´é«˜æ•ˆï¼Œå‡å°‘embçš„ç»´åº¦ä¹Ÿæ˜¯å¯ä»¥ç‰ºç‰²çš„é€‰æ‹©ã€‚ä¸€åˆ‡å·¥ç¨‹é—®é¢˜éƒ½æ˜¯å–èˆçš„é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609475624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1489525,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI9X140JXPuaDB8PibXpwFWds6mZvg1w7THkyB6NjBkP7x4HqSk2wuUvcmDb9O2l0fCkxvB3ibL0L2A/132","nickname":"ç§‘å­¦å…»ç‰›","note":"","ucode":"B205209A814AC8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":403144,"discussion_content":"é«˜ç»´ç©ºé—´åº”è¯¥æ›´ç´«ç¨€ç–è€Œä¸æ˜¯æ›´å¯†é›†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634016580,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":264615,"user_name":"follow-fate","can_delete":false,"product_type":"c1","uid":2302995,"ip_address":"","ucode":"EF5C9BA5A77979","user_header":"https://static001.geekbang.org/account/avatar/00/23/24/13/8fb0424b.jpg","comment_is_top":false,"comment_ctime":1606547574,"is_pvip":false,"replies":[{"id":"96252","content":"å¯ä»¥ã€‚faissæ˜¯ä¸šç•Œä¸»æµè§£å†³æ–¹æ¡ˆï¼ŒLSHæ˜¯å®ƒçš„åŸç†ä¹‹ä¸€ï¼Œè¿™é‡ŒLSHä¸»è¦æ˜¯ä¸ºäº†å¤§å®¶å­¦ä¹ åŸç†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1606787711,"ip_address":"","comment_id":264615,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10196482166","product_id":100060801,"comment_content":"facebookå¼€æºçš„faissæ˜¯ä¸æ˜¯å¯ä»¥æ›¿ä»£LSHäº†ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510623,"discussion_content":"å¯ä»¥ã€‚faissæ˜¯ä¸šç•Œä¸»æµè§£å†³æ–¹æ¡ˆï¼ŒLSHæ˜¯å®ƒçš„åŸç†ä¹‹ä¸€ï¼Œè¿™é‡ŒLSHä¸»è¦æ˜¯ä¸ºäº†å¤§å®¶å­¦ä¹ åŸç†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606787711,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1697075,"avatar":"","nickname":"Sanders","note":"","ucode":"3D460FEEDCDF34","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348040,"discussion_content":"Faissé€‚åˆå¤§è§„æ¨¡åº“å‘é‡çš„æŸ¥æ‰¾ï¼ŒLshé€‚åˆå°è§„æ¨¡çš„æŸ¥æ‰¾ï¼Œæ•ˆæœä¸Šï¼ŒFaisså¬å›æ¯”Lshä½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612410007,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":262610,"user_name":"ã€‚LEAF","can_delete":false,"product_type":"c1","uid":2304080,"ip_address":"","ucode":"99C30EBBBBADC1","user_header":"https://static001.geekbang.org/account/avatar/00/23/28/50/c8cb0c3b.jpg","comment_is_top":false,"comment_ctime":1605778721,"is_pvip":false,"replies":[{"id":"95326","content":"æ˜¯è¿™æ ·çš„ã€‚<br><br>å¦‚æœè§‰å¾—ä¸ä¿é™©ï¼Œè¿˜å¯ä»¥åœ¨ä¸´è¿‘æ¡¶æ‰¾ï¼Œè¿™é‡Œé¢è¿˜æ˜¯ä¸€ä¸ªå¬å›ç‡å’Œå‡†ç¡®ç‡ä¹‹é—´æƒè¡¡çš„é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1605832978,"ip_address":"","comment_id":262610,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10195713313","product_id":100060801,"comment_content":"è€å¸ˆå¥½ï¼Œæœ€åå¾—åˆ° æ¯ä¸ªç”µå½±çš„ åˆ†æ¡¶ï¼Œæ¯”å¦‚[-2.0], [14.0], [8.0]]ï¼Œç›¸å½“äºå†åšå¬å›çš„æ—¶å€™ï¼Œæ¯”å¦‚ä½¿ç”¨â€œæˆ–â€ç­–ç•¥ï¼Œå°±ç›´æ¥å†å‰©ä½™æ‰€æœ‰ç”µå½±é‡Œæ‰¾åˆ° åœ¨[-2.0], [14.0], [8.0] 3ä¸ªæ¡¶é‡Œçš„ç”µå½±å°±å¯ä»¥äº†å§","like_count":2,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509895,"discussion_content":"æ˜¯è¿™æ ·çš„ã€‚\n\nå¦‚æœè§‰å¾—ä¸ä¿é™©ï¼Œè¿˜å¯ä»¥åœ¨ä¸´è¿‘æ¡¶æ‰¾ï¼Œè¿™é‡Œé¢è¿˜æ˜¯ä¸€ä¸ªå¬å›ç‡å’Œå‡†ç¡®ç‡ä¹‹é—´æƒè¡¡çš„é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605832978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":257502,"user_name":"ALAN","can_delete":false,"product_type":"c1","uid":1240164,"ip_address":"","ucode":"70E3B1C730E63F","user_header":"https://static001.geekbang.org/account/avatar/00/12/ec/64/7403c694.jpg","comment_is_top":false,"comment_ctime":1604016608,"is_pvip":false,"replies":[{"id":"93836","content":"æ˜¯çš„ï¼Œæ‰€ä»¥å¾—åˆ°äº†ä¸‰ä¸ªbucketid","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1604092432,"ip_address":"","comment_id":257502,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10193951200","product_id":100060801,"comment_content":"è€å¸ˆï¼Œnumhashtableä¸º3ï¼Œæ˜¯æŒ‡ä½¿ç”¨äº†3ä¸ªåˆ†æ¡¶å‡½æ•°å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508353,"discussion_content":"æ˜¯çš„ï¼Œæ‰€ä»¥å¾—åˆ°äº†ä¸‰ä¸ªbucketid","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604092432,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":297671,"user_name":"æŒ–æ˜æœº","can_delete":false,"product_type":"c1","uid":2371003,"ip_address":"","ucode":"B604CF78054E25","user_header":"https://static001.geekbang.org/account/avatar/00/24/2d/bb/8bd1b6e1.jpg","comment_is_top":false,"comment_ctime":1623721763,"is_pvip":false,"replies":[{"id":"108161","content":"ç”¨æˆ·å’Œç‰©å“å‘é‡ç›´æ¥dot prodcutæˆ–è€…cosin similarityäº¤å‰ï¼Œé‚£ä¹ˆåœ¨ä¸€ä¸ªç©ºé—´å†…ï¼Œå¦‚æœç»è¿‡äº†concatå±‚ï¼Œæˆ–è€…MLPè¿›è¡Œäº¤å‰ï¼Œé‚£ä¹ˆä¸åœ¨ä¸€ä¸ªç©ºé—´å†…","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1623876598,"ip_address":"","comment_id":297671,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5918689059","product_id":100060801,"comment_content":"å¦‚ä½•åˆ¤æ–­ç”¨æˆ·å’Œç‰©å“æ˜¯å¦åœ¨ä¸€ä¸ªå‘é‡ç©ºé—´å‘¢ï¼Ÿæˆ‘çœ‹åé¢åŒå¡”çš„æ—¶å€™åˆè¯´ç‰©å“å’Œå‘é‡ä¸åœ¨ä¸€ä¸ªç©ºé—´ï¼Œè¿™æ˜¯å¦‚ä½•åˆ¤æ–­çš„å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521900,"discussion_content":"ç”¨æˆ·å’Œç‰©å“å‘é‡ç›´æ¥dot prodcutæˆ–è€…cosin similarityäº¤å‰ï¼Œé‚£ä¹ˆåœ¨ä¸€ä¸ªç©ºé—´å†…ï¼Œå¦‚æœç»è¿‡äº†concatå±‚ï¼Œæˆ–è€…MLPè¿›è¡Œäº¤å‰ï¼Œé‚£ä¹ˆä¸åœ¨ä¸€ä¸ªç©ºé—´å†…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623876598,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":272089,"user_name":"æ¢æ ‹ğŸ’","can_delete":false,"product_type":"c1","uid":1067594,"ip_address":"","ucode":"16EEF0DD596A80","user_header":"https://static001.geekbang.org/account/avatar/00/10/4a/4a/fdae1e16.jpg","comment_is_top":false,"comment_ctime":1609929668,"is_pvip":false,"replies":[{"id":"98665","content":"è¿‡ç¨‹åŸºæœ¬æ­£ç¡®ã€‚ä½†éš¾ç‚¹2ä¸å¤ªæˆç«‹ï¼Œå°±æ˜¯æŠŠæ¯ä¸ªitemå’Œuser embçš„æ¡¶idå­˜åˆ°rediså°±å¯ä»¥äº†ï¼Œæˆ–è€…å»ºç«‹å€’æ’ç´¢å¼•ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯æ¯”è¾ƒç›´æ¥çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1609971917,"ip_address":"","comment_id":272089,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5904896964","product_id":100060801,"comment_content":"è¯¾åæ€è€ƒï¼š<br>1ï¼‰é¦–å…ˆuser embeddingæ˜¯åŸºäºå†å²æµè§ˆitem embeddingå¹³å‡åç”Ÿæˆçš„ï¼Œè¿™ä¸ªä¸€èˆ¬æ˜¯onlineå®æ—¶è®¡ç®—çš„ã€‚<br>2ï¼‰å½“æ‹¿åˆ°user embeddingåï¼Œæˆ‘ä»¬éœ€è¦ç¦»çº¿è®­ç»ƒå¥½çš„LSH modelå¯¹è¿™ä¸ªembå‘é‡æ±‚å‡º3ä¸ªåˆ†æ¡¶ã€‚<br>3ï¼‰æ‹¿åˆ°3ä¸ªåˆ†æ¡¶ï¼Œæˆ‘ä»¬éœ€è¦å¬å›3ä¸ªæ¡¶å†…çš„item embeddingåˆ°å†…å­˜ï¼Œå†è¿›è¡ŒOnlineè®¡ç®—æ±‚æœ€è¿‘è·ç¦»ã€‚<br><br>é‚£ä¹ˆéš¾ç‚¹åœ¨äºï¼š<br>1ï¼‰å†·å¯åŠ¨ç”¨æˆ·æ²¡æœ‰å†å²è¡Œä¸ºï¼Œæ— æ³•ç”¨ã€‚<br>2ï¼‰LSH modelæ€ä¹ˆå¯¼å‡ºåˆ°onlineæœåŠ¡ä½¿ç”¨ã€‚","like_count":2,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513149,"discussion_content":"è¿‡ç¨‹åŸºæœ¬æ­£ç¡®ã€‚ä½†éš¾ç‚¹2ä¸å¤ªæˆç«‹ï¼Œå°±æ˜¯æŠŠæ¯ä¸ªitemå’Œuser embçš„æ¡¶idå­˜åˆ°rediså°±å¯ä»¥äº†ï¼Œæˆ–è€…å»ºç«‹å€’æ’ç´¢å¼•ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯æ¯”è¾ƒç›´æ¥çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609971917,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2403705,"avatar":"","nickname":"Wa","note":"","ucode":"96E28E50FCA96C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342286,"discussion_content":"åŒè¿½é—®ä¸€ä¸‹è€å¸ˆéš¾ç‚¹äºŒï¼Œæ‰€ä»¥onlineæœåŠ¡å¹¶ä¸èƒ½åˆ©ç”¨ç”¨æˆ·çš„å®æ—¶è¡Œä¸ºæ•°æ®è¿›è¡Œå®æ—¶è®¡ç®—å—ï¼Ÿæ¯”å¦‚ç”¨æˆ·äº§ç”Ÿæ–°è¡Œä¸ºä¼šæ›´æ–°user embï¼Œé‚£å°±éœ€è¦ç¦»çº¿ä¿å­˜çš„LSHçš„xå’Œbã€wå‚æ•°æ¥è®¡ç®—æ–°çš„useræ¡¶idå•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610626917,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1067594,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4a/4a/fdae1e16.jpg","nickname":"æ¢æ ‹ğŸ’","note":"","ucode":"16EEF0DD596A80","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340342,"discussion_content":"æˆ‘ä»¥ä¸ºuser embæ˜¯onlineå®æ—¶æ ¹æ®è¿‘æœŸæµè§ˆå†å²çš„item embå¹³å‡è€Œæ¥çš„ï¼Œæ‰€ä»¥è§‰å¾—éœ€è¦lshæ”¾åˆ°çº¿ä¸Šä½¿ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609983131,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":265410,"user_name":"Geek_91c50b","can_delete":false,"product_type":"c1","uid":2281331,"ip_address":"","ucode":"AA6F9A01B84406","user_header":"","comment_is_top":false,"comment_ctime":1606892239,"is_pvip":false,"replies":[{"id":"96518","content":"embeddingé‚£å‡ è®²è·³è¿‡äº†å—ï¼Ÿåç»­æ¨èæ¨¡å‹çš„è¯¾ç¨‹ä¹Ÿä¼šæ¶‰åŠã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1606940170,"ip_address":"","comment_id":265410,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5901859535","product_id":100060801,"comment_content":"è¯·é—®ï¼Œç”¨æˆ·çš„embadingå’Œç‰©å“embadingæ˜¯é€šè¿‡å“ªäº›ç‰¹å¾è¿›è¡Œå¤„ç†çš„ï¼Œä¾‹å¦‚æ€§åˆ«ã€å¹´é¾„ï¼Ÿæ€æ ·å¤„ç†æˆæ•°å­—çš„ï¼Œè¿™ä¸€å—çš„ä»£ç æœ‰åœ¨å·¥ç¨‹é‡Œå—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510922,"discussion_content":"embeddingé‚£å‡ è®²è·³è¿‡äº†å—ï¼Ÿåç»­æ¨èæ¨¡å‹çš„è¯¾ç¨‹ä¹Ÿä¼šæ¶‰åŠã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606940170,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2403705,"avatar":"","nickname":"Wa","note":"","ucode":"96E28E50FCA96C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342257,"discussion_content":"åº”è¯¥æ˜¯è·³è¿‡äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610625525,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":262199,"user_name":"å‚»","can_delete":false,"product_type":"c1","uid":1136426,"ip_address":"","ucode":"099D3EFDAF12EF","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Y5U2ADUvruWhziaB4tSyiaAN7h9OcHMGj6X6nAeqJyJvrqWs8JmyO6yOTBziatAEIG6gHRic0jvT3d0hxNhiaAUVYkw/132","comment_is_top":false,"comment_ctime":1605663100,"is_pvip":false,"replies":[{"id":"95231","content":"ä¸åœ¨ä¸€ä¸ªå‘é‡ç©ºé—´å†…å°±æ²¡æ³•ä½¿ç”¨ç”¨æˆ·å’Œç‰©å“ä¹‹é—´çš„LSHçš„æ–¹æ³•ï¼Œå› ä¸ºä»–ä»¬æ ¹æœ¬æ²¡æœ‰è¿‘é‚»å…³ç³»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1605747361,"ip_address":"","comment_id":262199,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5900630396","product_id":100060801,"comment_content":"æƒ³é—®ä¸‹è€å¸ˆï¼Œå…³äºâ€œåœ¨è®­ç»ƒç‰©å“å’Œç”¨æˆ·çš„å‘é‡æ—¶ï¼Œå¦‚æœäºŒè€…åœ¨åŒä¸€ä¸ªå‘é‡ç©ºé—´å†…â€ï¼Œé‚£å¦‚æœç”¨æˆ·çš„å‘é‡ç©ºé—´ï¼ˆæ¯”å¦‚ç”¨æˆ·idçš„embeddingå‘é‡ï¼‰å’Œç‰©å“çš„å‘é‡ä¸åœ¨åŒä¸€ä¸ªå‘é‡ç©ºé—´è¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Œè°¢è°¢è€å¸ˆï½","like_count":1,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509731,"discussion_content":"ä¸åœ¨ä¸€ä¸ªå‘é‡ç©ºé—´å†…å°±æ²¡æ³•ä½¿ç”¨ç”¨æˆ·å’Œç‰©å“ä¹‹é—´çš„LSHçš„æ–¹æ³•ï¼Œå› ä¸ºä»–ä»¬æ ¹æœ¬æ²¡æœ‰è¿‘é‚»å…³ç³»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605747361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1136426,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Y5U2ADUvruWhziaB4tSyiaAN7h9OcHMGj6X6nAeqJyJvrqWs8JmyO6yOTBziatAEIG6gHRic0jvT3d0hxNhiaAUVYkw/132","nickname":"å‚»","note":"","ucode":"099D3EFDAF12EF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327101,"discussion_content":"æ˜¯çš„ï¼Œé‚£æƒ³é—®ä¸‹è€å¸ˆï¼Œè¿™ç§ä¸€èˆ¬ç”¨ä»€ä¹ˆæ–¹æ³•æ¥å¤„ç†å‘¢ï¼Ÿè¿˜æ˜¯è¯´ï¼Œä¸€èˆ¬éƒ½ä¼šåœ¨åŒä¸€ä¸ªç©ºé—´é‡Œå‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605748283,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1136426,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Y5U2ADUvruWhziaB4tSyiaAN7h9OcHMGj6X6nAeqJyJvrqWs8JmyO6yOTBziatAEIG6gHRic0jvT3d0hxNhiaAUVYkw/132","nickname":"å‚»","note":"","ucode":"099D3EFDAF12EF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327684,"discussion_content":"è¿™è·Ÿä½ çš„æ¨¡å‹è®¾è®¡æœ‰å…³ï¼Œæ¯”å¦‚ä½ çš„user embæ˜¯é€šè¿‡item embå–å¹³å‡ç”Ÿæˆçš„ï¼Œé‚£ä¹ˆä»–ä»¬è‡ªç„¶åœ¨ä¸€ä¸ªå‘é‡ç©ºé—´é‡Œã€‚å†æ¯”å¦‚ï¼Œuser embå’Œitem embåˆ†åˆ«æ˜¯åœ¨æ¨¡å‹ä¸¤ä¸ªä¸åŒçš„embeddingå±‚ä¸­ç”Ÿæˆçš„ï¼Œè€Œä¸”è¿™ä¸¤ä¸ªembeddingå±‚ä¹‹é—´åˆæ²¡æœ‰äº¤äº’ï¼Œä»–ä»¬å°±ä¸åœ¨ä¸€ä¸ªå‘é‡ç©ºé—´å†…ã€‚\n\nè¿™ä¸æ˜¯ä¸€ä¸ªæ€ä¹ˆå¤„ç†çš„é—®é¢˜ï¼Œæ˜¯å¦‚æœä½ æƒ³è®©ä»–ä»¬åœ¨ä¸€ä¸ªå‘é‡ç©ºé—´å†…ï¼Œè®¾è®¡æ¨¡å‹å’Œæ–¹æ¡ˆçš„æ—¶å€™å°±è¦ç”¨ç›¸åº”çš„æ–¹å¼ç”Ÿæˆã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1605913643,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":327101,"ip_address":""},"score":327684,"extra":""}]}]},{"had_liked":false,"id":257658,"user_name":"è¶…~~","can_delete":false,"product_type":"c1","uid":2198718,"ip_address":"","ucode":"F259C26BD1E2CC","user_header":"https://static001.geekbang.org/account/avatar/00/21/8c/be/f3661bb0.jpg","comment_is_top":false,"comment_ctime":1604050228,"is_pvip":false,"replies":[{"id":"93839","content":"æ²¡æœ‰é…ç½®scalaæ—¶èƒ½å¯åŠ¨æ˜¯å› ä¸ºonlineéƒ¨åˆ†ä¸ä¼šä½¿ç”¨scalaä»£ç ã€‚<br><br>è¿™ä¸ªé—®é¢˜ç¡®å®æ¯”è¾ƒä¸å¥½å¤ç°ã€‚ä¸è¿‡è‚¯å®šæ˜¯scalaçš„é—®é¢˜ã€‚æˆ‘æ¨èä½ å†å®‰è£…ä¸€éscalaç¯å¢ƒï¼Œæ¯”å¦‚æ¢ä¸€ä¸ª2.11çš„å°ç‰ˆæœ¬ï¼Œæ¢ä¸€ä¸ªæ–°çš„å®‰è£…è·¯å¾„ï¼Œçœ‹çœ‹è¡Œä¸è¡Œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1604093051,"ip_address":"","comment_id":257658,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5899017524","product_id":100060801,"comment_content":"ä½ å¥½è€å¸ˆï¼Œæˆ‘cloneä¸‹æ¥çš„ä»£ç ï¼Œç¯å¢ƒä¸­æ²¡æœ‰é…ç½®scala æ—¶ï¼Œå¯ä»¥æ­£å¸¸å¯åŠ¨ï¼Œä½†æŒ‡å®šscala2. 11åï¼Œå¯åŠ¨æŠ¥é”™Error:scalac: Token not found: &#47;Users&#47;edz&#47;.idea-build&#47;tokens&#47;3200  è°·æ­Œä¹Ÿæ²¡æœ‰æ‰¾åˆ°ç­”æ¡ˆï¼Œè°¢è°¢","like_count":1,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508406,"discussion_content":"æ²¡æœ‰é…ç½®scalaæ—¶èƒ½å¯åŠ¨æ˜¯å› ä¸ºonlineéƒ¨åˆ†ä¸ä¼šä½¿ç”¨scalaä»£ç ã€‚\n\nè¿™ä¸ªé—®é¢˜ç¡®å®æ¯”è¾ƒä¸å¥½å¤ç°ã€‚ä¸è¿‡è‚¯å®šæ˜¯scalaçš„é—®é¢˜ã€‚æˆ‘æ¨èä½ å†å®‰è£…ä¸€éscalaç¯å¢ƒï¼Œæ¯”å¦‚æ¢ä¸€ä¸ª2.11çš„å°ç‰ˆæœ¬ï¼Œæ¢ä¸€ä¸ªæ–°çš„å®‰è£…è·¯å¾„ï¼Œçœ‹çœ‹è¡Œä¸è¡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604093051,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2198718,"avatar":"https://static001.geekbang.org/account/avatar/00/21/8c/be/f3661bb0.jpg","nickname":"è¶…~~","note":"","ucode":"F259C26BD1E2CC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":320681,"discussion_content":"è°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604451672,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":339322,"user_name":"å°åš","can_delete":false,"product_type":"c1","uid":1078829,"ip_address":"","ucode":"4DB860A0D35BA0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er6OV33jHia3U6Y6xwm9BryshBqapb8iaQCf3P4RUxIxiakfEdEzDEPy5QR6sjCjqj7CNgz6Lyj8rPYA/132","comment_is_top":false,"comment_ctime":1648036211,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1648036211","product_id":100060801,"comment_content":"æˆ‘çœ‹sparkçš„mlåŒ…é‡Œé¢æ‰¾kè¿‘é‚»çš„apiå¿…é¡»å·²ç»å›ºå®šè¦targetå‘é‡ï¼Œå¦‚æœæˆ‘å°±æƒ³æ‰¾100wä¸ªå‘é‡ä¸­ï¼Œä»–ä»¬æ¯ä¸ªæœ€è¿‘é‚»çš„topkå‘¢ï¼Ÿè¿™ä¸ªapiæ˜¯å¦å°±ä¸èƒ½ç”¨äº†å‘¢","like_count":0},{"had_liked":false,"id":326735,"user_name":"é™å¿ƒ","can_delete":false,"product_type":"c1","uid":1335457,"ip_address":"","ucode":"EB264FA6519FDA","user_header":"https://static001.geekbang.org/account/avatar/00/14/60/a1/8f003697.jpg","comment_is_top":false,"comment_ctime":1639649746,"is_pvip":true,"discussion_count":0,"race_medal":5,"score":"1639649746","product_id":100060801,"comment_content":"è¿™èŠ‚è¯¾å¯¹äºåšå‡ºä¸€ä¸ªé«˜æ€§èƒ½çš„æ¨èç³»ç»Ÿè‡³å…³é‡è¦å‘€ï¼Œæ”¶è—äº†ï¼<br>ä»¥å‰åœ¨ä½¿ç”¨ElasticSearchåšç©ºé—´æœç´¢çš„æ—¶å€™äº†è§£è¿‡ï¼Œå¥½åƒESä¸­çš„ç©ºé—´ç´¢å¼•ä¹Ÿæ˜¯ç±»ä¼¼çš„å®ç°ç®—æ³•ã€‚<br>å¯¹æƒ³å‡ºæ¥è¿™å¥—ç®—æ³•çš„äººä½©æœçš„çœŸæ˜¯äº”ä½“æŠ•åœ°å‘€ï¼","like_count":0},{"had_liked":false,"id":317750,"user_name":"deepX","can_delete":false,"product_type":"c1","uid":2674181,"ip_address":"","ucode":"1040F5AC6DEC06","user_header":"https://static001.geekbang.org/account/avatar/00/28/ce/05/da3e7c63.jpg","comment_is_top":false,"comment_ctime":1634925354,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634925354","product_id":100060801,"comment_content":"reformer ç”¨åˆ°äº†LSH","like_count":0},{"had_liked":false,"id":304656,"user_name":"é™ˆå¨æ´‹","can_delete":false,"product_type":"c1","uid":2264679,"ip_address":"","ucode":"DCF84B4D3A7354","user_header":"https://static001.geekbang.org/account/avatar/00/22/8e/67/afb412fb.jpg","comment_is_top":false,"comment_ctime":1627539961,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627539961","product_id":100060801,"comment_content":"å–†å“¥ï¼Œå¥½ï¼~  è¯·é—®ä¸ªé—®é¢˜ï¼š<br><br> Jaccardè·ç¦»(æ°å¡å¾·è·ç¦») æ˜¯ç”¨æ¥è¡¡é‡ä¸¤ä¸ªé›†åˆä¹‹é—´çš„ç›¸ä¼¼æ€§ï¼Œåœ¨æ¨¡å‹åº”ç”¨ä¸­ï¼Œä½¿ç”¨ç¦»æ•£å‘é‡æ•°æ®ä¼šæ¯”è¾ƒå¿«ï¼Œä½†æ˜¯å®ƒæ˜¯é€‚ç”¨äºä»€ä¹ˆåœºæ™¯çš„ï¼Ÿ","like_count":0},{"had_liked":false,"id":303679,"user_name":"ä¸œæ³¢","can_delete":false,"product_type":"c1","uid":1133870,"ip_address":"","ucode":"AD99D9EFBE7C05","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/2e/eaf81624.jpg","comment_is_top":false,"comment_ctime":1626925894,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626925894","product_id":100060801,"comment_content":"è¿™ä¸ªå¤šhashåˆ†æ¡¶ï¼Œæœ‰äº›bloomè¿‡æ»¤å™¨çš„å‘³é“","like_count":0},{"had_liked":false,"id":303288,"user_name":"Yang Hong","can_delete":false,"product_type":"c1","uid":2664414,"ip_address":"","ucode":"B92C87587CE9E1","user_header":"","comment_is_top":false,"comment_ctime":1626702493,"is_pvip":false,"replies":[{"id":"109823","content":"éšæœºè°ƒæ•´bå’Œéšæœºè°ƒæ•´å‘é‡éƒ½å¯ä»¥ç”Ÿæˆå¤šä¸ªhashå‡½æ•°ï¼Œè¿™ä¸¤ä¸ªä¸çŸ›ç›¾ã€‚åœ¨å®é™…ä½¿ç”¨ä¸­æˆ‘ä»¬å¾€å¾€ä¼šç»“åˆä½¿ç”¨è¿™ä¸¤ç§æ–¹æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1626818448,"ip_address":"","comment_id":303288,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1626702493","product_id":100060801,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œæˆ‘å¯¹ä¸åŒhashå‡½æ•°ä¹‹é—´å¦‚ä½•ç¡®å®šæœ‰ç‚¹ä¸æ¸…æ¥šã€‚æˆ‘ä¸€å¼€å§‹ç†è§£çš„æ˜¯ä¸åŒçš„hashå‡½æ•°æ˜¯é€šè¿‡éšæœºè°ƒæ•´xç”Ÿæˆçš„ï¼Œé€šè¿‡ç”Ÿæˆä¸åŒçš„xå‘é‡å’Œvä¹‹é—´æŠ•å½±ï¼Œæ¥æ•è·ç‚¹ä¹‹é—´åœ¨ä¸åŒæŠ•å½±æ–¹å‘ä¸Šçš„è·ç¦»å…³ç³»ï¼›åæ¥çœ‹è¯„è®ºæ‚¨æåˆ°æ˜¯é€šè¿‡éšæœºè°ƒæ•´bæ¥ç”Ÿæˆå¤šä¸ªhashå‡½æ•°ã€‚<br><br>æˆ‘ç–‘æƒ‘çš„ç‚¹æ˜¯ï¼Œå¦‚æœé€šè¿‡éšæœºè°ƒæ•´bæ¥ç”Ÿæˆhashå‡½æ•°ï¼Œæ˜¯å¦hashé—´å…±ç”¨ä¸€ä¸ªxå‘é‡å‘¢ï¼Ÿï¼ˆå¦‚æœhashå‡½æ•°ä¹‹é—´ç”¨çš„ä¸€ä¸ªxå‘é‡åº”è¯¥ä¼šæœ‰é—®é¢˜å§ï¼Œå°±åƒæ‚¨åœ¨è¯¾ä¸­æåˆ°çš„â€œåŸæœ¬è¿œç¦»çš„ç‚¹ä¼šæœ‰ä¸€å®šæ¦‚ç‡å˜æˆæ¥è¿‘çš„ç‚¹â€ï¼Œå¦‚æœé€‰çš„è¿™ä¸ªxå‘é‡æ°å¥½è®©åŸæœ¬è¿œç¦»çš„ç‚¹æŠ•å½±åè·ç¦»å˜è¿‘äº†é‚£ä¹ˆå€™é€‰é›†å°±ä¸å‡†ç¡®äº†ï¼‰","like_count":0,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523617,"discussion_content":"éšæœºè°ƒæ•´bå’Œéšæœºè°ƒæ•´å‘é‡éƒ½å¯ä»¥ç”Ÿæˆå¤šä¸ªhashå‡½æ•°ï¼Œè¿™ä¸¤ä¸ªä¸çŸ›ç›¾ã€‚åœ¨å®é™…ä½¿ç”¨ä¸­æˆ‘ä»¬å¾€å¾€ä¼šç»“åˆä½¿ç”¨è¿™ä¸¤ç§æ–¹æ³•ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1626818448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":299278,"user_name":"Ricardo","can_delete":false,"product_type":"c1","uid":1846121,"ip_address":"","ucode":"6FD382958FFD31","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIacvl2hoQU11kU97wDuKPKP418MNYrnPU8vA4ibXf2a2wvRh5dkb2h28T5yqW3a05yBSxx75IDhtQ/132","comment_is_top":false,"comment_ctime":1624542494,"is_pvip":false,"replies":[{"id":"109378","content":"åªæ˜¯ä¸€ä¸ªç´¢å¼•id","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1626215018,"ip_address":"","comment_id":299278,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1624542494","product_id":100060801,"comment_content":"ä¸€ä¸ªbucketIdå°±æ˜¯ä¸€ä¸ªåˆ†æ¡¶ç»“æœçš„ç´¢å¼•ï¼Œåªæ˜¯æˆ‘æ¯”è¾ƒå°‘çœ‹åˆ°æœ‰è´Ÿæ•°åšç´¢å¼•å€¼çš„ï¼Œæƒ³é—®ä¸‹è€å¸ˆè¿™é‡Œçš„è´Ÿæ•°æ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šå«ä¹‰å§ï¼Ÿä¹Ÿåªæ˜¯ä»£è¡¨ä¸€ä¸ªç´¢å¼•è€Œå·²å¯¹å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522384,"discussion_content":"åªæ˜¯ä¸€ä¸ªç´¢å¼•id","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626215018,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":298937,"user_name":"æŠ±å°æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1504652,"ip_address":"","ucode":"BA7B0DAFDA4AF5","user_header":"https://static001.geekbang.org/account/avatar/00/16/f5/8c/82fb5890.jpg","comment_is_top":false,"comment_ctime":1624385980,"is_pvip":true,"replies":[{"id":"109375","content":"è¿™ä¸ªç†è§£åº”è¯¥æ˜¯æœ‰ç‚¹é—®é¢˜ã€‚user embeddingç”Ÿæˆå¥½äº†å°±é€šè¿‡å®ƒè®¡ç®—å‡ºæ‰€åœ¨çš„æ¡¶ï¼Œç„¶åå–å‡ºæ¡¶ä¸­æ‰€æœ‰çš„itemå°±å¯ä»¥äº†","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1626214874,"ip_address":"","comment_id":298937,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1624385980","product_id":100060801,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³è¯·é—®ä¸€ä¸‹ï¼Œå‡è®¾å¯¹itemå·²ç»åšå¥½äº†åˆ†æ¡¶ï¼Œåœ¨é’ˆå¯¹æŸä¸€ç”¨æˆ·è¿›è¡Œå¬å›æ—¶ï¼Œç”¨æˆ·çš„embeddingæ˜¯æ ¹æ®ç”¨æˆ·å–œçˆ±çš„å¤šä¸ªitemçš„embeddingå–å‡å€¼å¾—åˆ°ã€‚ç”¨æˆ·embeddingä¸ä¸€å®šä¼šæœ‰å¯¹åº”çš„itemIdï¼Œé‚£ä¹ˆå¦‚ä½•æ ¹æ®ç”¨æˆ·çš„ä¿¡æ¯å»å–å¯¹åº”itemçš„å¯¹åº”bucketé‡Œçš„å…¶ä»–itemå‘¢ï¼Ÿæ˜¯æŠŠç”¨æˆ·embeddingè®¡ç®—è¿‡ç¨‹ä¸­çš„æ¯ä¸€ä¸ªiteméƒ½æ‹¿å‡ºæ¥æŸ¥æ‰¾bucketå†è¿›è¡Œå¬å›å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522283,"discussion_content":"è¿™ä¸ªç†è§£åº”è¯¥æ˜¯æœ‰ç‚¹é—®é¢˜ã€‚user embeddingç”Ÿæˆå¥½äº†å°±é€šè¿‡å®ƒè®¡ç®—å‡ºæ‰€åœ¨çš„æ¡¶ï¼Œç„¶åå–å‡ºæ¡¶ä¸­æ‰€æœ‰çš„itemå°±å¯ä»¥äº†","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1626214874,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":298112,"user_name":"Ricardo","can_delete":false,"product_type":"c1","uid":1846121,"ip_address":"","ucode":"6FD382958FFD31","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIacvl2hoQU11kU97wDuKPKP418MNYrnPU8vA4ibXf2a2wvRh5dkb2h28T5yqW3a05yBSxx75IDhtQ/132","comment_is_top":false,"comment_ctime":1623916157,"is_pvip":false,"replies":[{"id":"108419","content":"bucketidå¯ä»¥æ˜¯è´Ÿæ•°å—ï¼Ÿå­¦å®Œè¿™èŠ‚è¯¾åº”è¯¥ä¸éš¾å›ç­”ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1624387760,"ip_address":"","comment_id":298112,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1623916157","product_id":100060801,"comment_content":"æœ€åå¾—åˆ°çš„bucketIdæ˜¯ä»€ä¹ˆå«ä¹‰å‘¢ï¼Ÿä¸ºä»€ä¹ˆè¿˜ä¼šæœ‰è´Ÿæ•°ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522019,"discussion_content":"bucketidå¯ä»¥æ˜¯è´Ÿæ•°å—ï¼Ÿå­¦å®Œè¿™èŠ‚è¯¾åº”è¯¥ä¸éš¾å›ç­”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624387760,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":290795,"user_name":"MutouMan","can_delete":false,"product_type":"c1","uid":2454131,"ip_address":"","ucode":"E2E78C6EE25E80","user_header":"https://static001.geekbang.org/account/avatar/00/25/72/73/d707c8be.jpg","comment_is_top":false,"comment_ctime":1619754089,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619754089","product_id":100060801,"comment_content":"å¯¹å¤æ‚åº¦çš„åˆ†æè¿˜æ˜¯æœ‰äº›ç³Šæ¶‚ï¼Œå‡è®¾åªæœ‰ä¸€ä¸ªæ¡¶ï¼Œç‰¹å¾å‘é‡ç»´åº¦æ˜¯Nï¼Œå› ä¸ºä»Nç»´è¦æŠ•å½±åˆ°1ç»´ï¼Œè¿™ä¸ªæ“ä½œæ˜¯O(N)ï¼Œæˆ‘ä»¬æœ‰Cä¸ªç‚¹ï¼Œæ‰€ä»¥å¤æ‚åº¦æ˜¯O(NC). æ¯ä¸€ä¸ªæ¡¶å¯¹åº”ä¸€ä¸ªä¸åŒçš„ä¸€ç»´ï¼Œæ‰€ä»¥æ˜¯O(KNC). è¯·é—®æˆ‘çš„ç†è§£å¯¹å—ï¼Ÿè°¢è°¢","like_count":0},{"had_liked":false,"id":290791,"user_name":"MutouMan","can_delete":false,"product_type":"c1","uid":2454131,"ip_address":"","ucode":"E2E78C6EE25E80","user_header":"https://static001.geekbang.org/account/avatar/00/25/72/73/d707c8be.jpg","comment_is_top":false,"comment_ctime":1619753597,"is_pvip":false,"replies":[{"id":"105446","content":"ç›¸äº’ç‹¬ç«‹çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1620010944,"ip_address":"","comment_id":290791,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1619753597","product_id":100060801,"comment_content":"æ¡¶çš„å®½åº¦å’Œæ¡¶æ•°æ˜¯äº’ç›¸ç‹¬ç«‹å—ï¼Ÿæˆ‘çš„ç†è§£æ˜¯æ¡¶æ•°å°‘ï¼Œå®½åº¦å°±å¤§ã€‚ç±»ä¼¼quantile transfomerã€‚è°¢è°¢ï¼","like_count":0,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519289,"discussion_content":"ç›¸äº’ç‹¬ç«‹çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620010944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":290789,"user_name":"MutouMan","can_delete":false,"product_type":"c1","uid":2454131,"ip_address":"","ucode":"E2E78C6EE25E80","user_header":"https://static001.geekbang.org/account/avatar/00/25/72/73/d707c8be.jpg","comment_is_top":false,"comment_ctime":1619753501,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619753501","product_id":100060801,"comment_content":"æ¨èç³»ç»Ÿæ–°æ‰‹åˆ†äº«ä¸‹è‡ªå·±çš„æƒ³æ³•ï¼š<br>çº¿ä¸‹åˆ†å¥½æ¡¶åï¼ŒæŠŠç‰©å“ã€ç”¨æˆ·å’Œæ¡¶ã€æ¡¶å’Œç‰©å“ã€ç”¨æˆ·åˆ†åˆ«ä½œä¸ºkey-value pairå­˜åˆ°çº¿ä¸Šã€‚å½“ç”¨æˆ·è®¿é—®æ—¶ï¼Œæé€šè¿‡ç”¨æˆ·idæ‰¾åˆ°ç›¸å…³çš„æ¡¶idï¼Œç„¶åè¿›è¡Œå¤šæ¡¶æœç´¢å¬å›ã€‚","like_count":0},{"had_liked":false,"id":289285,"user_name":"Geek1591","can_delete":false,"product_type":"c1","uid":2028942,"ip_address":"","ucode":"A65CFAE8B3F857","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f5/8e/1d68db9a.jpg","comment_is_top":false,"comment_ctime":1618968929,"is_pvip":false,"replies":[{"id":"105066","content":"é‡‡ç”¨ä¸åŒçš„bå¯ä»¥å¯¹åº”åŒä¸€ä¸ªhashå‡½æ•°ï¼Œæ˜¯ä¸ºäº†è§£å†³åŒä¸€ä¸ªhashå‡½æ•°åˆ†æ¡¶æ—¶çš„è¾¹ç•Œå›ºåŒ–é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1619112535,"ip_address":"","comment_id":289285,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1618968929","product_id":100060801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œä¸ºäº†é¿å…è¾¹ç•Œå›ºåŒ–ï¼Œé‡‡ç”¨ä¸åŒçš„bï¼Œæ„å‘³ç€æ˜¯ä¸åŒhashå‡½æ•°å¯¹ä¹ˆï¼Œæ¯ä¸ªhashå‡½æ•°å¯¹åº”ä¸€ä¸ªåˆ†æ¡¶ï¼Œé‚£ä¹ˆå®è·µä¸Šè¯´è®¾ç½®ä¸‰ä¸ªæ¡¶ï¼Œæ˜¯ä¼˜å…ˆé€‰æ‹©ä¸åŒçš„xï¼ˆæŠ•å½±å‘é‡ï¼‰ï¼Œè¿˜æ˜¯ä¼šé€‰æ‹©ä¸åŒçš„bï¼Œæˆ–è€…æ¯ä¸ªxé€‰æ‹©è‹¥å¹²ä¸ªbï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518876,"discussion_content":"é‡‡ç”¨ä¸åŒçš„bå¯ä»¥å¯¹åº”åŒä¸€ä¸ªhashå‡½æ•°ï¼Œæ˜¯ä¸ºäº†è§£å†³åŒä¸€ä¸ªhashå‡½æ•°åˆ†æ¡¶æ—¶çš„è¾¹ç•Œå›ºåŒ–é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619112535,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284436,"user_name":"pop","can_delete":false,"product_type":"c1","uid":1381733,"ip_address":"","ucode":"9D81F3ED54321C","user_header":"https://static001.geekbang.org/account/avatar/00/15/15/65/37d05463.jpg","comment_is_top":false,"comment_ctime":1616249026,"is_pvip":false,"replies":[{"id":"103427","content":"numhashtablesæ˜¯åšå‡ æ¬¡hashåˆ†æ¡¶ï¼Œè€Œä¸æ˜¯åˆ†æ¡¶çš„ä¸ªæ•°ã€‚bucketlengthå¯ä»¥æ§åˆ¶åˆ†æ¡¶ä¸ªæ•°ï¼Œæ‰€ä»¥è¿™é‡Œå¹¶æ²¡æœ‰ä¸€ä¸ªå˜é‡æ˜¯æ§åˆ¶åˆ†æ¡¶ä¸ªæ•°çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1616637436,"ip_address":"","comment_id":284436,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1616249026","product_id":100060801,"comment_content":"è€å¸ˆæˆ‘è¿™æ ·ç†è§£å¯¹ä¸å¯¹ï¼šnumhashtablesæ˜¯ä»£è¡¨åˆ†æ¡¶ä¸ªæ•°ï¼Œåˆ†æ¡¶è¶Šå¤šåˆ†æ¡¶å®½åº¦bucketlengthåº”è¯¥è¦å°ã€‚ç„¶åå‡è®¾å¯¹10ä¸‡æ¡10ç»´æ•°æ®å¬å›100æ¡ï¼Œè½åœ¨æ¯ä¸ªæ¡¶å†…æ•°æ®åº”è¯¥åœ¨100åˆ°500å·¦å³ï¼Œé‚£ä¹ˆnumhashtablesåº”è¯¥è®¾ä¸º200åˆ°1000ï¼Ÿï¼ˆæ„Ÿè§‰å’Œä¾‹å­é‡Œçš„4å·®çš„å¥½å¤šï¼Œæˆ‘æ˜¯ä¸æ˜¯ç†è§£é”™äº†ï¼‰","like_count":0,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517348,"discussion_content":"numhashtablesæ˜¯åšå‡ æ¬¡hashåˆ†æ¡¶ï¼Œè€Œä¸æ˜¯åˆ†æ¡¶çš„ä¸ªæ•°ã€‚bucketlengthå¯ä»¥æ§åˆ¶åˆ†æ¡¶ä¸ªæ•°ï¼Œæ‰€ä»¥è¿™é‡Œå¹¶æ²¡æœ‰ä¸€ä¸ªå˜é‡æ˜¯æ§åˆ¶åˆ†æ¡¶ä¸ªæ•°çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616637436,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":280716,"user_name":"åå¹´","can_delete":false,"product_type":"c1","uid":2203446,"ip_address":"","ucode":"C26A0A3FC64960","user_header":"https://static001.geekbang.org/account/avatar/00/21/9f/36/b534ff31.jpg","comment_is_top":false,"comment_ctime":1614326124,"is_pvip":false,"replies":[{"id":"101935","content":"æˆ‘æ„Ÿè§‰æˆ‘è®²çš„è¿˜æ¯”è¾ƒæ˜ç™½ã€‚å¦‚æœä¸æ˜ç™½å°±é’ˆå¯¹å…³é”®è¯å†æœä¸€ä¸‹ç›¸å…³æ–‡ç« å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1614390286,"ip_address":"","comment_id":280716,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1614326124","product_id":100060801,"comment_content":"å±€éƒ¨æ•æ„Ÿå“ˆå¸Œçœ‹äº†å¥½å¤šå¸–å­è¿˜æ˜¯æ²¡å¼„æ˜ç™½ï¼Œè€å¸ˆæœ‰æ²¡æœ‰å¥½çš„ç›¸å…³èµ„æ–™æ¨ä»‹ä¸‹","like_count":0,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516191,"discussion_content":"æˆ‘æ„Ÿè§‰æˆ‘è®²çš„è¿˜æ¯”è¾ƒæ˜ç™½ã€‚å¦‚æœä¸æ˜ç™½å°±é’ˆå¯¹å…³é”®è¯å†æœä¸€ä¸‹ç›¸å…³æ–‡ç« å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614390286,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":257876,"user_name":"æµ£ç†Šå½“å®¶","can_delete":false,"product_type":"c1","uid":1952248,"ip_address":"","ucode":"939F06050423E4","user_header":"https://static001.geekbang.org/account/avatar/00/1d/c9/f8/72955ef9.jpg","comment_is_top":false,"comment_ctime":1604172556,"is_pvip":false,"replies":[{"id":"93890","content":"ä¸æ˜¯ç‰¹åˆ«æ¸…æ¥šä½ çš„é—®é¢˜ï¼ŒLSHçš„é™ç»´å°±æ˜¯é€šè¿‡åˆ†æ¡¶å‡½æ•°å®ç°çš„å§ï¼Ÿä½ è¯´çš„é™ç»´æ˜¯åº”ç”¨äº†é‚£ç§ç®—æ³•æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å–†","uid":"1662192","ctime":1604208457,"ip_address":"","comment_id":257876,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1604172556","product_id":100060801,"comment_content":"è¿˜æœ‰ä¸ªå…³äºå±€éƒ¨æ•æ„Ÿå“ˆå¸Œçš„é—®é¢˜æƒ³é—®è€å¸ˆï¼Œ æˆ‘çš„ç†è§£æ˜¯LSHä¹Ÿæ˜¯é€šè¿‡é™ç»´çš„æ‰‹æ®µæ¥æé«˜æœç´¢top nä¸ªç‚¹çš„æ—¶é—´å¤æ‚åº¦çš„ã€‚ é‚£å…·ä½“çš„é™ç»´æ˜¯åº”ç”¨äº†é‚£ç§ç®—æ³•å‘¢ï¼Ÿæˆ‘å°è¯•ç€æœäº†ä¸‹æ²¡æœ‰æ‰¾åˆ°æ›´ç»†èŠ‚çš„èµ„æ–™ï¼Œä¹Ÿæƒ³è¯·è€å¸ˆæˆ–è€…å¤§å®¶æ¨èå¥½çš„å­¦ä¹ èµ„æ–™ã€‚","like_count":0,"discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508485,"discussion_content":"ä¸æ˜¯ç‰¹åˆ«æ¸…æ¥šä½ çš„é—®é¢˜ï¼ŒLSHçš„é™ç»´å°±æ˜¯é€šè¿‡åˆ†æ¡¶å‡½æ•°å®ç°çš„å§ï¼Ÿä½ è¯´çš„é™ç»´æ˜¯åº”ç”¨äº†é‚£ç§ç®—æ³•æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604208457,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1952248,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/c9/f8/72955ef9.jpg","nickname":"æµ£ç†Šå½“å®¶","note":"","ucode":"939F06050423E4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":320346,"discussion_content":"ä¸å¥½æ„æ€è€å¸ˆæˆ‘æ²¡æœ‰è¡¨è¾¾æ¸…æ¥šï¼Œæ ¹æ®æ–‡ç« é‡ŒLSHçš„å›¾ç¤ºï¼Œæˆ‘çš„ç†è§£æ˜¯æˆ‘ä»¬æŠŠé«˜ç»´å‘é‡é€šè¿‡ä¸åŒçš„è§’åº¦æ–¹å‘ï¼Œæ˜ å°„åˆ°äº†ä¸€ä¸ªä½ç»´å‘é‡ä¸Šï¼ˆå›¾å››ä¸­æ˜¯äºŒç»´åˆ°ä¸€ç»´ï¼‰ï¼Œ æ‰€ä»¥æˆ‘çš„é—®é¢˜æ˜¯ï¼Œ1ï¼‰è¿™ä¸ªæ˜ å°„çš„è¿‡ç¨‹æ˜¯é€šè¿‡ä»€ä¹ˆç®—æ³•åšåˆ°çš„ï¼Ÿæ˜¯æœ‰ç›¸å…³çš„çŸ©é˜µè¿ç®—å¯ä»¥ç›´æ¥å¾—åˆ°å—ï¼Ÿ 2ï¼‰ç°å®å·¥ä½œä¸­ï¼Œ æ¯ä¸ªæ¡¶åº”ç”¨çš„å‘é‡æ˜¯ä¸€ç»´çš„å—ï¼ˆå¦‚å›¾4é‚£ç§ï¼‰ï¼Œè¿˜æ˜¯ä¼šæœ‰æ›´é«˜ç»´ï¼Œ åŸºäºåŸå§‹å‘é‡çš„ç»´æ•°ï¼Ÿ 3ï¼‰å¦‚ä½•é€‰å–é«˜ç»´å‘ä½ç»´æŠ•å½±çš„æ–¹å‘å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604324815,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1952248,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/c9/f8/72955ef9.jpg","nickname":"æµ£ç†Šå½“å®¶","note":"","ucode":"939F06050423E4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":320508,"discussion_content":"1. æ˜ å°„å‡½æ•°å°±æ˜¯æ–‡ä¸­çš„åˆ†æ¡¶å‡½æ•°\n2. ä¸€èˆ¬éœ€è¦æ˜ å°„åˆ°ä¸€ä¸ªæ¡¶çš„idä¸Šï¼Œæ‰€ä»¥æ˜¯ä¸€ç»´çš„\n3.éšæœºé€‰å–æŠ•å½±æ–¹å‘","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1604386469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":320346,"ip_address":""},"score":320508,"extra":""},{"author":{"id":1952248,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/c9/f8/72955ef9.jpg","nickname":"æµ£ç†Šå½“å®¶","note":"","ucode":"939F06050423E4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1662192,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5c/f0/46214d29.jpg","nickname":"ç‹å–†","note":"","ucode":"2EDC616F905F3F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":321225,"discussion_content":"æ˜ç™½äº†ï¼æ„Ÿè°¢è€å¸ˆçš„è§£ç­”ï¼","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1604550533,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":320508,"ip_address":""},"score":321225,"extra":""}]}]}]}