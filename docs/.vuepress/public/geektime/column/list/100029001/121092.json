{"id":121092,"title":"38 | WebSocketï¼šæ²™ç›’é‡Œçš„TCP","content":"<p>åœ¨ä¹‹å‰è®²TCP/IPåè®®æ ˆçš„æ—¶å€™ï¼Œæˆ‘è¯´è¿‡æœ‰â€œTCP Socketâ€ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸€ç§åŠŸèƒ½æ¥å£ï¼Œé€šè¿‡è¿™äº›æ¥å£å°±å¯ä»¥ä½¿ç”¨TCP/IPåè®®æ ˆåœ¨ä¼ è¾“å±‚æ”¶å‘æ•°æ®ã€‚</p><p>é‚£ä¹ˆï¼Œä½ çŸ¥é“è¿˜æœ‰ä¸€ç§ä¸œè¥¿å«â€œWebSocketâ€å—ï¼Ÿ</p><p>å•ä»åå­—ä¸Šçœ‹ï¼Œâ€œWebâ€æŒ‡çš„æ˜¯HTTPï¼Œâ€œSocketâ€æ˜¯å¥—æ¥å­—è°ƒç”¨ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªè¿èµ·æ¥åˆæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ</p><p>æ‰€è°“â€œæœ›æ–‡ç”Ÿä¹‰â€ï¼Œå¤§æ¦‚ä½ ä¹Ÿèƒ½çŒœå‡ºæ¥ï¼Œâ€œWebSocketâ€å°±æ˜¯è¿è¡Œåœ¨â€œWebâ€ï¼Œä¹Ÿå°±æ˜¯HTTPä¸Šçš„Socketé€šä¿¡è§„èŒƒï¼Œæä¾›ä¸â€œTCP Socketâ€ç±»ä¼¼çš„åŠŸèƒ½ï¼Œä½¿ç”¨å®ƒå°±å¯ä»¥åƒâ€œTCP Socketâ€ä¸€æ ·è°ƒç”¨ä¸‹å±‚åè®®æ ˆï¼Œä»»æ„åœ°æ”¶å‘æ•°æ®ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ee/28/ee6685c7d3c673b95e46d582828eee28.png?wh=1142*502\" alt=\"\"></p><p>æ›´å‡†ç¡®åœ°è¯´ï¼Œâ€œWebSocketâ€æ˜¯ä¸€ç§åŸºäºTCPçš„è½»é‡çº§ç½‘ç»œé€šä¿¡åè®®ï¼Œåœ¨åœ°ä½ä¸Šæ˜¯ä¸HTTPâ€œå¹³çº§â€çš„ã€‚</p><h2>ä¸ºä»€ä¹ˆè¦æœ‰WebSocket</h2><p>ä¸è¿‡ï¼Œå·²ç»æœ‰äº†è¢«å¹¿æ³›åº”ç”¨çš„HTTPåè®®ï¼Œä¸ºä»€ä¹ˆè¦å†å‡ºä¸€ä¸ªWebSocketå‘¢ï¼Ÿå®ƒæœ‰å“ªäº›å¥½å¤„å‘¢ï¼Ÿ</p><p>å…¶å®WebSocketä¸HTTP/2ä¸€æ ·ï¼Œéƒ½æ˜¯ä¸ºäº†è§£å†³HTTPæŸæ–¹é¢çš„ç¼ºé™·è€Œè¯ç”Ÿçš„ã€‚HTTP/2é’ˆå¯¹çš„æ˜¯â€œé˜Ÿå¤´é˜»å¡â€ï¼Œè€ŒWebSocketé’ˆå¯¹çš„æ˜¯â€œè¯·æ±‚-åº”ç­”â€é€šä¿¡æ¨¡å¼ã€‚</p><p>é‚£ä¹ˆï¼Œâ€œè¯·æ±‚-åº”ç­”â€æœ‰ä»€ä¹ˆä¸å¥½çš„åœ°æ–¹å‘¢ï¼Ÿ</p><p>â€œè¯·æ±‚-åº”ç­”â€æ˜¯ä¸€ç§â€œ<strong>åŠåŒå·¥</strong>â€çš„é€šä¿¡æ¨¡å¼ï¼Œè™½ç„¶å¯ä»¥åŒå‘æ”¶å‘æ•°æ®ï¼Œä½†åŒä¸€æ—¶åˆ»åªèƒ½ä¸€ä¸ªæ–¹å‘ä¸Šæœ‰åŠ¨ä½œï¼Œä¼ è¾“æ•ˆç‡ä½ã€‚æ›´å…³é”®çš„ä¸€ç‚¹ï¼Œå®ƒæ˜¯ä¸€ç§â€œè¢«åŠ¨â€é€šä¿¡æ¨¡å¼ï¼ŒæœåŠ¡å™¨åªèƒ½â€œè¢«åŠ¨â€å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œæ— æ³•ä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘é€æ•°æ®ã€‚</p><!-- [[[read_end]]] --><p>è™½ç„¶åæ¥çš„HTTP/2ã€HTTP/3æ–°å¢äº†Streamã€Server Pushç­‰ç‰¹æ€§ï¼Œä½†â€œè¯·æ±‚-åº”ç­”â€ä¾ç„¶æ˜¯ä¸»è¦çš„å·¥ä½œæ–¹å¼ã€‚è¿™å°±å¯¼è‡´HTTPéš¾ä»¥åº”ç”¨åœ¨åŠ¨æ€é¡µé¢ã€å³æ—¶æ¶ˆæ¯ã€ç½‘ç»œæ¸¸æˆç­‰è¦æ±‚â€œ<strong>å®æ—¶é€šä¿¡</strong>â€çš„é¢†åŸŸã€‚</p><p>åœ¨WebSocketå‡ºç°ä¹‹å‰ï¼Œåœ¨æµè§ˆå™¨ç¯å¢ƒé‡Œç”¨JavaScriptå¼€å‘å®æ—¶Webåº”ç”¨å¾ˆéº»çƒ¦ã€‚å› ä¸ºæµè§ˆå™¨æ˜¯ä¸€ä¸ªâ€œå—é™çš„æ²™ç›’â€ï¼Œä¸èƒ½ç”¨TCPï¼Œåªæœ‰HTTPåè®®å¯ç”¨ï¼Œæ‰€ä»¥å°±å‡ºç°äº†å¾ˆå¤šâ€œå˜é€šâ€çš„æŠ€æœ¯ï¼Œâ€œ<strong>è½®è¯¢</strong>â€ï¼ˆpollingï¼‰å°±æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„çš„ä¸€ç§ã€‚</p><p>ç®€å•åœ°è¯´ï¼Œè½®è¯¢å°±æ˜¯ä¸åœåœ°å‘æœåŠ¡å™¨å‘é€HTTPè¯·æ±‚ï¼Œé—®æœ‰æ²¡æœ‰æ•°æ®ï¼Œæœ‰æ•°æ®çš„è¯æœåŠ¡å™¨å°±ç”¨å“åº”æŠ¥æ–‡å›åº”ã€‚å¦‚æœè½®è¯¢çš„é¢‘ç‡æ¯”è¾ƒé«˜ï¼Œé‚£ä¹ˆå°±å¯ä»¥è¿‘ä¼¼åœ°å®ç°â€œå®æ—¶é€šä¿¡â€çš„æ•ˆæœã€‚</p><p>ä½†è½®è¯¢çš„ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œåå¤å‘é€æ— æ•ˆæŸ¥è¯¢è¯·æ±‚è€—è´¹äº†å¤§é‡çš„å¸¦å®½å’ŒCPUèµ„æºï¼Œéå¸¸ä¸ç»æµã€‚</p><p>æ‰€ä»¥ï¼Œä¸ºäº†å…‹æœHTTPâ€œè¯·æ±‚-åº”ç­”â€æ¨¡å¼çš„ç¼ºç‚¹ï¼ŒWebSocketå°±â€œåº”è¿è€Œç”Ÿâ€äº†ã€‚å®ƒåŸæ¥æ˜¯HTML5çš„ä¸€éƒ¨åˆ†ï¼Œåæ¥â€œè‡ªç«‹é—¨æˆ·â€ï¼Œå½¢æˆäº†ä¸€ä¸ªå•ç‹¬çš„æ ‡å‡†ï¼ŒRFCæ–‡æ¡£ç¼–å·æ˜¯6455ã€‚</p><h2>WebSocketçš„ç‰¹ç‚¹</h2><p>WebSocketæ˜¯ä¸€ä¸ªçœŸæ­£â€œ<strong>å…¨åŒå·¥</strong>â€çš„é€šä¿¡åè®®ï¼Œä¸TCPä¸€æ ·ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½å¯ä»¥éšæ—¶å‘å¯¹æ–¹å‘é€æ•°æ®ï¼Œè€Œä¸ç”¨åƒHTTPâ€œä½ æ‹ä¸€ï¼Œæˆ‘æ‹ä¸€â€é‚£ä¹ˆâ€œå®¢å¥—â€ã€‚äºæ˜¯ï¼ŒæœåŠ¡å™¨å°±å¯ä»¥å˜å¾—æ›´åŠ â€œä¸»åŠ¨â€äº†ã€‚ä¸€æ—¦åå°æœ‰æ–°çš„æ•°æ®ï¼Œå°±å¯ä»¥ç«‹å³â€œæ¨é€â€ç»™å®¢æˆ·ç«¯ï¼Œä¸éœ€è¦å®¢æˆ·ç«¯è½®è¯¢ï¼Œâ€œå®æ—¶é€šä¿¡â€çš„æ•ˆç‡ä¹Ÿå°±æé«˜äº†ã€‚</p><p>WebSocketé‡‡ç”¨äº†äºŒè¿›åˆ¶å¸§ç»“æ„ï¼Œè¯­æ³•ã€è¯­ä¹‰ä¸HTTPå®Œå…¨ä¸å…¼å®¹ï¼Œä½†å› ä¸ºå®ƒçš„ä¸»è¦è¿è¡Œç¯å¢ƒæ˜¯æµè§ˆå™¨ï¼Œä¸ºäº†ä¾¿äºæ¨å¹¿å’Œåº”ç”¨ï¼Œå°±ä¸å¾—ä¸â€œæ­ä¾¿è½¦â€ï¼Œåœ¨ä½¿ç”¨ä¹ æƒ¯ä¸Šå°½é‡å‘HTTPé æ‹¢ï¼Œè¿™å°±æ˜¯å®ƒåå­—é‡Œâ€œWebâ€çš„å«ä¹‰ã€‚</p><p>æœåŠ¡å‘ç°æ–¹é¢ï¼ŒWebSocketæ²¡æœ‰ä½¿ç”¨TCPçš„â€œIPåœ°å€+ç«¯å£å·â€ï¼Œè€Œæ˜¯å»¶ç”¨äº†HTTPçš„URIæ ¼å¼ï¼Œä½†å¼€å¤´çš„åè®®åä¸æ˜¯â€œhttpâ€ï¼Œå¼•å…¥çš„æ˜¯ä¸¤ä¸ªæ–°çš„åå­—ï¼šâ€œ<strong>ws</strong>â€å’Œâ€œ<strong>wss</strong>â€ï¼Œåˆ†åˆ«è¡¨ç¤ºæ˜æ–‡å’ŒåŠ å¯†çš„WebSocketåè®®ã€‚</p><p>WebSocketçš„é»˜è®¤ç«¯å£ä¹Ÿé€‰æ‹©äº†80å’Œ443ï¼Œå› ä¸ºç°åœ¨äº’è”ç½‘ä¸Šçš„é˜²ç«å¢™å±è”½äº†ç»å¤§å¤šæ•°çš„ç«¯å£ï¼Œåªå¯¹HTTPçš„80ã€443ç«¯å£â€œæ”¾è¡Œâ€ï¼Œæ‰€ä»¥WebSocketå°±å¯ä»¥â€œä¼ªè£…â€æˆHTTPåè®®ï¼Œæ¯”è¾ƒå®¹æ˜“åœ°â€œç©¿é€â€é˜²ç«å¢™ï¼Œä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥ã€‚å…·ä½“æ˜¯æ€ä¹ˆâ€œä¼ªè£…â€çš„ï¼Œæˆ‘ç¨åå†è®²ã€‚</p><p>ä¸‹é¢æˆ‘ä¸¾å‡ ä¸ªWebSocketæœåŠ¡çš„ä¾‹å­ï¼Œä½ çœ‹çœ‹ï¼Œæ˜¯ä¸æ˜¯å’ŒHTTPå‡ ä¹ä¸€æ¨¡ä¸€æ ·ï¼š</p><pre><code>ws://www.chrono.com\nws://www.chrono.com:8080/srv\nwss://www.chrono.com:445/im?user_id=xxx\n</code></pre><p>è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼ŒWebSocketçš„åå­—å®¹æ˜“è®©äººäº§ç”Ÿè¯¯è§£ï¼Œè™½ç„¶å¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬ä¼šåœ¨æµè§ˆå™¨é‡Œè°ƒç”¨APIæ¥ä½¿ç”¨WebSocketï¼Œä½†å®ƒä¸æ˜¯ä¸€ä¸ªâ€œè°ƒç”¨æ¥å£çš„é›†åˆâ€ï¼Œè€Œæ˜¯ä¸€ä¸ªé€šä¿¡åè®®ï¼Œæ‰€ä»¥æˆ‘è§‰å¾—æŠŠå®ƒç†è§£æˆâ€œ<strong>TCP over Web</strong>â€ä¼šæ›´æ°å½“ä¸€äº›ã€‚</p><h2>WebSocketçš„å¸§ç»“æ„</h2><p>åˆšæ‰è¯´äº†ï¼ŒWebSocketç”¨çš„ä¹Ÿæ˜¯äºŒè¿›åˆ¶å¸§ï¼Œæœ‰ä¹‹å‰HTTP/2ã€HTTP/3çš„ç»éªŒï¼Œç›¸ä¿¡ä½ è¿™æ¬¡ä¹Ÿèƒ½å¾ˆå¿«æŒæ¡WebSocketçš„æŠ¥æ–‡ç»“æ„ã€‚</p><p>ä¸è¿‡WebSocketå’ŒHTTP/2çš„å…³æ³¨ç‚¹ä¸åŒï¼ŒWebSocketæ›´<strong>ä¾§é‡äºâ€œå®æ—¶é€šä¿¡â€</strong>ï¼Œè€ŒHTTP/2æ›´ä¾§é‡äºæé«˜ä¼ è¾“æ•ˆç‡ï¼Œæ‰€ä»¥ä¸¤è€…çš„å¸§ç»“æ„ä¹Ÿæœ‰å¾ˆå¤§çš„åŒºåˆ«ã€‚</p><p>WebSocketè™½ç„¶æœ‰â€œå¸§â€ï¼Œä½†å´æ²¡æœ‰åƒHTTP/2é‚£æ ·å®šä¹‰â€œæµâ€ï¼Œä¹Ÿå°±ä¸å­˜åœ¨â€œå¤šè·¯å¤ç”¨â€â€œä¼˜å…ˆçº§â€ç­‰å¤æ‚çš„ç‰¹æ€§ï¼Œè€Œå®ƒè‡ªèº«å°±æ˜¯â€œå…¨åŒå·¥â€çš„ï¼Œä¹Ÿå°±ä¸éœ€è¦â€œæœåŠ¡å™¨æ¨é€â€ã€‚æ‰€ä»¥ç»¼åˆèµ·æ¥ï¼ŒWebSocketçš„å¸§å­¦ä¹ èµ·æ¥ä¼šç®€å•ä¸€äº›ã€‚</p><p>ä¸‹å›¾å°±æ˜¯WebSocketçš„å¸§ç»“æ„å®šä¹‰ï¼Œé•¿åº¦ä¸å›ºå®šï¼Œæœ€å°‘2ä¸ªå­—èŠ‚ï¼Œæœ€å¤š14å­—èŠ‚ï¼Œçœ‹ç€å¥½åƒå¾ˆå¤æ‚ï¼Œå®é™…éå¸¸ç®€å•ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/29/c4/29d33e972dda5a27aa4773eea896a8c4.png?wh=2468*1523\" alt=\"\"></p><p>å¼€å¤´çš„ä¸¤ä¸ªå­—èŠ‚æ˜¯å¿…é¡»çš„ï¼Œä¹Ÿæ˜¯æœ€å…³é”®çš„ã€‚</p><p>ç¬¬ä¸€ä¸ªå­—èŠ‚çš„ç¬¬ä¸€ä½â€œ<strong>FIN</strong>â€æ˜¯æ¶ˆæ¯ç»“æŸçš„æ ‡å¿—ä½ï¼Œç›¸å½“äºHTTP/2é‡Œçš„â€œEND_STREAMâ€ï¼Œè¡¨ç¤ºæ•°æ®å‘é€å®Œæ¯•ã€‚ä¸€ä¸ªæ¶ˆæ¯å¯ä»¥æ‹†æˆå¤šä¸ªå¸§ï¼Œæ¥æ”¶æ–¹çœ‹åˆ°â€œFINâ€åï¼Œå°±å¯ä»¥æŠŠå‰é¢çš„å¸§æ‹¼èµ·æ¥ï¼Œç»„æˆå®Œæ•´çš„æ¶ˆæ¯ã€‚</p><p>â€œFINâ€åé¢çš„ä¸‰ä¸ªä½æ˜¯ä¿ç•™ä½ï¼Œç›®å‰æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œä½†å¿…é¡»æ˜¯0ã€‚</p><p>ç¬¬ä¸€ä¸ªå­—èŠ‚çš„å4ä½å¾ˆé‡è¦ï¼Œå«<strong>â€œOpcode</strong>â€ï¼Œæ“ä½œç ï¼Œå…¶å®å°±æ˜¯å¸§ç±»å‹ï¼Œæ¯”å¦‚1è¡¨ç¤ºå¸§å†…å®¹æ˜¯çº¯æ–‡æœ¬ï¼Œ2è¡¨ç¤ºå¸§å†…å®¹æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œ8æ˜¯å…³é—­è¿æ¥ï¼Œ9å’Œ10åˆ†åˆ«æ˜¯è¿æ¥ä¿æ´»çš„PINGå’ŒPONGã€‚</p><p>ç¬¬äºŒä¸ªå­—èŠ‚ç¬¬ä¸€ä½æ˜¯æ©ç æ ‡å¿—ä½â€œ<strong>MASK</strong>â€ï¼Œè¡¨ç¤ºå¸§å†…å®¹æ˜¯å¦ä½¿ç”¨å¼‚æˆ–æ“ä½œï¼ˆxorï¼‰åšç®€å•çš„åŠ å¯†ã€‚ç›®å‰çš„WebSocketæ ‡å‡†è§„å®šï¼Œå®¢æˆ·ç«¯å‘é€æ•°æ®å¿…é¡»ä½¿ç”¨æ©ç ï¼Œè€ŒæœåŠ¡å™¨å‘é€åˆ™å¿…é¡»ä¸ä½¿ç”¨æ©ç ã€‚</p><p>ç¬¬äºŒä¸ªå­—èŠ‚å7ä½æ˜¯â€œ<strong>Payload len</strong>â€ï¼Œè¡¨ç¤ºå¸§å†…å®¹çš„é•¿åº¦ã€‚å®ƒæ˜¯å¦ä¸€ç§å˜é•¿ç¼–ç ï¼Œæœ€å°‘7ä½ï¼Œæœ€å¤šæ˜¯7+64ä½ï¼Œä¹Ÿå°±æ˜¯é¢å¤–å¢åŠ 8ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥ä¸€ä¸ªWebSocketå¸§æœ€å¤§æ˜¯2^64ã€‚</p><p>é•¿åº¦å­—æ®µåé¢æ˜¯â€œ<strong>Masking-key</strong>â€ï¼Œæ©ç å¯†é’¥ï¼Œå®ƒæ˜¯ç”±ä¸Šé¢çš„æ ‡å¿—ä½â€œMASKâ€å†³å®šçš„ï¼Œå¦‚æœä½¿ç”¨æ©ç å°±æ˜¯4ä¸ªå­—èŠ‚çš„éšæœºæ•°ï¼Œå¦åˆ™å°±ä¸å­˜åœ¨ã€‚</p><p>è¿™ä¹ˆåˆ†æä¸‹æ¥ï¼Œå…¶å®WebSocketçš„å¸§å¤´å°±å››ä¸ªéƒ¨åˆ†ï¼šâ€œ<strong>ç»“æŸæ ‡å¿—ä½+æ“ä½œç +å¸§é•¿åº¦+æ©ç </strong>â€ï¼Œåªæ˜¯ä½¿ç”¨äº†å˜é•¿ç¼–ç çš„â€œå°èŠ±æ‹›â€ï¼Œä¸åƒHTTP/2å®šé•¿æŠ¥æ–‡å¤´é‚£ä¹ˆç®€å•æ˜äº†ã€‚</p><p>æˆ‘ä»¬çš„å®éªŒç¯å¢ƒåˆ©ç”¨OpenRestyçš„â€œlua-resty-websocketâ€åº“ï¼Œå®ç°äº†ä¸€ä¸ªç®€å•çš„WebSocketé€šä¿¡ï¼Œä½ å¯ä»¥è®¿é—®URIâ€œ/38-1â€ï¼Œå®ƒä¼šè¿æ¥åç«¯çš„WebSocketæœåŠ¡â€œws://127.0.0.1/38-0â€ï¼Œç”¨WiresharkæŠ“åŒ…å°±å¯ä»¥çœ‹åˆ°WebSocketçš„æ•´ä¸ªé€šä¿¡è¿‡ç¨‹ã€‚</p><p>ä¸‹é¢çš„æˆªå›¾æ˜¯å…¶ä¸­çš„ä¸€ä¸ªæ–‡æœ¬å¸§ï¼Œå› ä¸ºå®ƒæ˜¯å®¢æˆ·ç«¯å‘å‡ºçš„ï¼Œæ‰€ä»¥éœ€è¦æ©ç ï¼ŒæŠ¥æ–‡å¤´å°±åœ¨ä¸¤ä¸ªå­—èŠ‚ä¹‹å¤–å¤šäº†å››ä¸ªå­—èŠ‚çš„â€œMasking-keyâ€ï¼Œæ€»å…±æ˜¯6ä¸ªå­—èŠ‚ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/c9/94/c91ee4815097f5f9059ab798bb841594.png?wh=1269*634\" alt=\"\"></p><p>è€ŒæŠ¥æ–‡å†…å®¹ç»è¿‡æ©ç ï¼Œä¸æ˜¯ç›´æ¥å¯è§çš„æ˜æ–‡ï¼Œä½†æ©ç çš„å®‰å…¨å¼ºåº¦å‡ ä¹æ˜¯é›¶ï¼Œç”¨â€œMasking-keyâ€ç®€å•åœ°å¼‚æˆ–ä¸€ä¸‹å°±å¯ä»¥è½¬æ¢å‡ºæ˜æ–‡ã€‚</p><h2>WebSocketçš„æ¡æ‰‹</h2><p>å’ŒTCPã€TLSä¸€æ ·ï¼ŒWebSocketä¹Ÿè¦æœ‰ä¸€ä¸ªæ¡æ‰‹è¿‡ç¨‹ï¼Œç„¶åæ‰èƒ½æ­£å¼æ”¶å‘æ•°æ®ã€‚</p><p>è¿™é‡Œå®ƒè¿˜æ˜¯æ­ä¸Šäº†HTTPçš„â€œä¾¿è½¦â€ï¼Œåˆ©ç”¨äº†HTTPæœ¬èº«çš„â€œåè®®å‡çº§â€ç‰¹æ€§ï¼Œâ€œä¼ªè£…â€æˆHTTPï¼Œè¿™æ ·å°±èƒ½ç»•è¿‡æµè§ˆå™¨æ²™ç›’ã€ç½‘ç»œé˜²ç«å¢™ç­‰ç­‰é™åˆ¶ï¼Œè¿™ä¹Ÿæ˜¯WebSocketä¸HTTPçš„å¦ä¸€ä¸ªé‡è¦å…³è”ç‚¹ã€‚</p><p>WebSocketçš„æ¡æ‰‹æ˜¯ä¸€ä¸ªæ ‡å‡†çš„HTTP GETè¯·æ±‚ï¼Œä½†è¦å¸¦ä¸Šä¸¤ä¸ªåè®®å‡çº§çš„ä¸“ç”¨å¤´å­—æ®µï¼š</p><ul>\n<li>â€œConnection: Upgradeâ€ï¼Œè¡¨ç¤ºè¦æ±‚åè®®â€œå‡çº§â€ï¼›</li>\n<li>â€œUpgrade: websocketâ€ï¼Œè¡¨ç¤ºè¦â€œå‡çº§â€æˆWebSocketåè®®ã€‚</li>\n</ul><p>å¦å¤–ï¼Œä¸ºäº†é˜²æ­¢æ™®é€šçš„HTTPæ¶ˆæ¯è¢«â€œæ„å¤–â€è¯†åˆ«æˆWebSocketï¼Œæ¡æ‰‹æ¶ˆæ¯è¿˜å¢åŠ äº†ä¸¤ä¸ªé¢å¤–çš„è®¤è¯ç”¨å¤´å­—æ®µï¼ˆæ‰€è°“çš„â€œæŒ‘æˆ˜â€ï¼ŒChallengeï¼‰ï¼š</p><ul>\n<li>Sec-WebSocket-Keyï¼šä¸€ä¸ªBase64ç¼–ç çš„16å­—èŠ‚éšæœºæ•°ï¼Œä½œä¸ºç®€å•çš„è®¤è¯å¯†é’¥ï¼›</li>\n<li>Sec-WebSocket-Versionï¼šåè®®çš„ç‰ˆæœ¬å·ï¼Œå½“å‰å¿…é¡»æ˜¯13ã€‚</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/8f/97/8f007bb0e403b6cc28493565f709c997.png?wh=2096*865\" alt=\"\"></p><p>æœåŠ¡å™¨æ”¶åˆ°HTTPè¯·æ±‚æŠ¥æ–‡ï¼Œçœ‹åˆ°ä¸Šé¢çš„å››ä¸ªå­—æ®µï¼Œå°±çŸ¥é“è¿™ä¸æ˜¯ä¸€ä¸ªæ™®é€šçš„GETè¯·æ±‚ï¼Œè€Œæ˜¯WebSocketçš„å‡çº§è¯·æ±‚ï¼Œäºæ˜¯å°±ä¸èµ°æ™®é€šçš„HTTPå¤„ç†æµç¨‹ï¼Œè€Œæ˜¯æ„é€ ä¸€ä¸ªç‰¹æ®Šçš„â€œ101 Switching Protocolsâ€å“åº”æŠ¥æ–‡ï¼Œé€šçŸ¥å®¢æˆ·ç«¯ï¼Œæ¥ä¸‹æ¥å°±ä¸ç”¨HTTPäº†ï¼Œå…¨æ”¹ç”¨WebSocketåè®®é€šä¿¡ã€‚ï¼ˆæœ‰ç‚¹åƒTLSçš„â€œChange Cipher Specâ€ï¼‰</p><p>WebSocketçš„æ¡æ‰‹å“åº”æŠ¥æ–‡ä¹Ÿæ˜¯æœ‰ç‰¹æ®Šæ ¼å¼çš„ï¼Œè¦ç”¨å­—æ®µâ€œSec-WebSocket-Acceptâ€éªŒè¯å®¢æˆ·ç«¯è¯·æ±‚æŠ¥æ–‡ï¼ŒåŒæ ·ä¹Ÿæ˜¯ä¸ºäº†é˜²æ­¢è¯¯è¿æ¥ã€‚</p><p>å…·ä½“çš„åšæ³•æ˜¯æŠŠè¯·æ±‚å¤´é‡Œâ€œSec-WebSocket-Keyâ€çš„å€¼ï¼ŒåŠ ä¸Šä¸€ä¸ªä¸“ç”¨çš„UUID â€œ258EAFA5-E914-47DA-95CA-C5AB0DC85B11â€ï¼Œå†è®¡ç®—SHA-1æ‘˜è¦ã€‚</p><pre><code>encode_base64(\n  sha1( \n    Sec-WebSocket-Key + '258EAFA5-E914-47DA-95CA-C5AB0DC85B11' ))\n</code></pre><p>å®¢æˆ·ç«¯æ”¶åˆ°å“åº”æŠ¥æ–‡ï¼Œå°±å¯ä»¥ç”¨åŒæ ·çš„ç®—æ³•ï¼Œæ¯”å¯¹å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œå°±è¯´æ˜è¿”å›çš„æŠ¥æ–‡ç¡®å®æ˜¯åˆšæ‰æ¡æ‰‹æ—¶è¿æ¥çš„æœåŠ¡å™¨ï¼Œè®¤è¯æˆåŠŸã€‚</p><p>æ¡æ‰‹å®Œæˆï¼Œåç»­ä¼ è¾“çš„æ•°æ®å°±ä¸å†æ˜¯HTTPæŠ¥æ–‡ï¼Œè€Œæ˜¯WebSocketæ ¼å¼çš„äºŒè¿›åˆ¶å¸§äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/84/03/84e9fa337f2b4c2c9f14760feb41c903.png?wh=1254*707\" alt=\"\"></p><h2>å°ç»“</h2><p>æµè§ˆå™¨æ˜¯ä¸€ä¸ªâ€œæ²™ç›’â€ç¯å¢ƒï¼Œæœ‰å¾ˆå¤šçš„é™åˆ¶ï¼Œä¸å…è®¸å»ºç«‹TCPè¿æ¥æ”¶å‘æ•°æ®ï¼Œè€Œæœ‰äº†WebSocketï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æµè§ˆå™¨é‡Œä¸æœåŠ¡å™¨ç›´æ¥å»ºç«‹â€œTCPè¿æ¥â€ï¼Œè·å¾—æ›´å¤šçš„è‡ªç”±ã€‚</p><p>ä¸è¿‡è‡ªç”±ä¹Ÿæ˜¯æœ‰ä»£ä»·çš„ï¼ŒWebSocketè™½ç„¶æ˜¯åœ¨åº”ç”¨å±‚ï¼Œä½†ä½¿ç”¨æ–¹å¼å´ä¸â€œTCP Socketâ€å·®ä¸å¤šï¼Œè¿‡äºâ€œåŸå§‹â€ï¼Œç”¨æˆ·å¿…é¡»è‡ªå·±ç®¡ç†è¿æ¥ã€ç¼“å­˜ã€çŠ¶æ€ï¼Œå¼€å‘ä¸Šæ¯”HTTPå¤æ‚çš„å¤šï¼Œæ‰€ä»¥æ˜¯å¦è¦åœ¨é¡¹ç›®ä¸­å¼•å…¥WebSocketå¿…é¡»æ…é‡è€ƒè™‘ã€‚</p><ol>\n<li><span class=\"orange\">HTTPçš„â€œè¯·æ±‚-åº”ç­”â€æ¨¡å¼ä¸é€‚åˆå¼€å‘â€œå®æ—¶é€šä¿¡â€åº”ç”¨ï¼Œæ•ˆç‡ä½ï¼Œéš¾ä»¥å®ç°åŠ¨æ€é¡µé¢ï¼Œæ‰€ä»¥å‡ºç°äº†WebSocketï¼›</span></li>\n<li><span class=\"orange\">WebSocketæ˜¯ä¸€ä¸ªâ€œå…¨åŒå·¥â€çš„é€šä¿¡åè®®ï¼Œç›¸å½“äºå¯¹TCPåšäº†ä¸€å±‚â€œè–„è–„çš„åŒ…è£…â€ï¼Œè®©å®ƒè¿è¡Œåœ¨æµè§ˆå™¨ç¯å¢ƒé‡Œï¼›</span></li>\n<li><span class=\"orange\">WebSocketä½¿ç”¨å…¼å®¹HTTPçš„URIæ¥å‘ç°æœåŠ¡ï¼Œä½†å®šä¹‰äº†æ–°çš„åè®®åâ€œwsâ€å’Œâ€œwssâ€ï¼Œç«¯å£å·ä¹Ÿæ²¿ç”¨äº†80å’Œ443ï¼›</span></li>\n<li><span class=\"orange\">WebSocketä½¿ç”¨äºŒè¿›åˆ¶å¸§ï¼Œç»“æ„æ¯”è¾ƒç®€å•ï¼Œç‰¹æ®Šçš„åœ°æ–¹æ˜¯æœ‰ä¸ªâ€œæ©ç â€æ“ä½œï¼Œå®¢æˆ·ç«¯å‘æ•°æ®å¿…é¡»æ©ç ï¼ŒæœåŠ¡å™¨åˆ™ä¸ç”¨ï¼›</span></li>\n<li><span class=\"orange\">WebSocketåˆ©ç”¨HTTPåè®®å®ç°è¿æ¥æ¡æ‰‹ï¼Œå‘é€GETè¯·æ±‚è¦æ±‚â€œåè®®å‡çº§â€ï¼Œæ¡æ‰‹è¿‡ç¨‹ä¸­æœ‰ä¸ªéå¸¸ç®€å•çš„è®¤è¯æœºåˆ¶ï¼Œç›®çš„æ˜¯é˜²æ­¢è¯¯è¿æ¥ã€‚</span></li>\n</ol><h2>è¯¾ä¸‹ä½œä¸š</h2><ol>\n<li>WebSocketä¸HTTP/2æœ‰å¾ˆå¤šç›¸ä¼¼ç‚¹ï¼Œæ¯”å¦‚éƒ½å¯ä»¥ä»HTTP/1å‡çº§ï¼Œéƒ½é‡‡ç”¨äºŒè¿›åˆ¶å¸§ç»“æ„ï¼Œä½ èƒ½æ¯”è¾ƒä¸€ä¸‹è¿™ä¸¤ä¸ªåè®®å—ï¼Ÿ</li>\n<li>è¯•ç€è‡ªå·±è§£é‡Šä¸€ä¸‹WebSocketé‡Œçš„â€Webâ€œå’Œâ€Socketâ€œçš„å«ä¹‰ã€‚</li>\n<li>ç»“åˆè‡ªå·±çš„å®é™…å·¥ä½œï¼Œä½ è§‰å¾—WebSocketé€‚åˆç”¨åœ¨å“ªäº›åœºæ™¯é‡Œï¼Ÿ</li>\n</ol><p>æ¬¢è¿ä½ æŠŠè‡ªå·±çš„å­¦ä¹ ä½“ä¼šå†™åœ¨ç•™è¨€åŒºï¼Œä¸æˆ‘å’Œå…¶ä»–åŒå­¦ä¸€èµ·è®¨è®ºã€‚å¦‚æœä½ è§‰å¾—æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿æŠŠæ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/4b/5b/4b81de6b5c57db92ed7808344482ef5b.png?wh=1769*3348\" alt=\"unpreview\"></p><p></p>","neighbors":{"left":{"article_title":"37 | CDNï¼šåŠ é€Ÿæˆ‘ä»¬çš„ç½‘ç»œæœåŠ¡","id":120664},"right":{"article_title":"39 | HTTPæ€§èƒ½ä¼˜åŒ–é¢é¢è§‚ï¼ˆä¸Šï¼‰","id":126374}},"comments":[{"had_liked":false,"id":127004,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1566532793,"is_pvip":false,"replies":[{"id":"46998","content":"greatã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1566543247,"ip_address":"","comment_id":127004,"utype":1}],"discussion_count":1,"race_medal":0,"score":"104645747897","product_id":100029001,"comment_content":"æ€è€ƒé¢˜ï¼š<br>1.WebSocket å’Œ HTTP&#47;2 éƒ½æ˜¯ç”¨æ¥å¼¥è¡¥HTTPåè®®çš„ä¸€äº›ç¼ºé™·å’Œä¸è¶³ï¼ŒWebSocket ä¸»è¦è§£å†³åŒå‘é€šä¿¡ã€å…¨åŒå·¥é—®é¢˜ï¼ŒHTTP&#47;2 ä¸»è¦è§£å†³ä¼ è¾“æ•ˆç‡çš„é—®é¢˜ï¼Œä¸¤è€…åœ¨äºŒè¿›åˆ¶å¸§çš„æ ¼å¼ä¸Šä¹Ÿä¸å¤ªä¸€æ ·ï¼ŒHTTP&#47;2 æœ‰å¤šè·¯å¤ç”¨ã€ä¼˜å…ˆçº§å’Œæµçš„æ¦‚å¿µã€‚<br><br>2.è¯•ç€è‡ªå·±è§£é‡Šä¸€ä¸‹ WebSocket é‡Œçš„â€Webâ€œå’Œâ€Socketâ€œçš„å«ä¹‰ã€‚<br>Webå°±æ˜¯HTTPçš„æ„æ€ï¼ŒSocketå°±æ˜¯ç½‘ç»œç¼–ç¨‹é‡Œçš„å¥—æ¥å­—ï¼Œä¹Ÿå°±æ˜¯HTTPåè®®ä¸Šçš„ç½‘ç»œå¥—æ¥å­—ï¼Œå¯ä»¥ä»»æ„åŒå‘é€šä¿¡ã€‚<br><br>3.ç»“åˆè‡ªå·±çš„å®é™…å·¥ä½œï¼Œä½ è§‰å¾— WebSocket é€‚åˆç”¨åœ¨å“ªäº›åœºæ™¯é‡Œï¼Ÿ<br>IMé€šä¿¡ï¼Œå®æ—¶äº’åŠ¨ï¼Œå›è°ƒå“åº”ï¼Œæ•°æ®å®æ—¶åŒæ­¥ã€‚","like_count":25,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464278,"discussion_content":"greatã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566543247,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176550,"user_name":"cugphoenix","can_delete":false,"product_type":"c1","uid":1474356,"ip_address":"","ucode":"80101AF04C00D3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI3F4IdQuDZrhN8ThibP85eCiaSWTYpTrcC6QB9EoAkw3IIj6otMibb1CgrS1uzITAnJmGLXQ2tgIkAQ/132","comment_is_top":false,"comment_ctime":1581084637,"is_pvip":false,"replies":[{"id":"68566","content":"ç†è§£çš„åŸºæœ¬æ­£ç¡®ï¼ŒæŠŠWebSocketå’Œhttpã€tcpçš„å…³ç³»ç†é¡ºäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1581133282,"ip_address":"","comment_id":176550,"utype":1}],"discussion_count":1,"race_medal":0,"score":"53120692189","product_id":100029001,"comment_content":"æ˜¯ä¸æ˜¯å¯ä»¥è¿™æ ·ç†è§£ï¼šHTTPæ˜¯åŸºäºTCPçš„ï¼Œé€šè¿‡TCPæ”¶å‘çš„æ¶ˆæ¯ç”¨HTTPçš„åº”ç”¨å±‚åè®®è§£æã€‚WebSocketæ˜¯é¦–å…ˆé€šè¿‡HTTPåè®®æŠŠTCPé“¾æ¥å»ºå¥½ï¼Œç„¶åé€šè¿‡Upgradeå­—æ®µè¿›è¡Œåè®®è½¬æ¢ï¼Œåœ¨æ”¶åˆ°æœåŠ¡å™¨çš„101 Switching Protocolsåº”ç­”ä¹‹åï¼Œåç»­çš„TCPæ¶ˆæ¯å°±é€šè¿‡WebSocketåè®®è§£æã€‚","like_count":13,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483137,"discussion_content":"ç†è§£çš„åŸºæœ¬æ­£ç¡®ï¼ŒæŠŠWebSocketå’Œhttpã€tcpçš„å…³ç³»ç†é¡ºäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581133282,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126878,"user_name":"LeonğŸ“·","can_delete":false,"product_type":"c1","uid":1219496,"ip_address":"","ucode":"B9BBD1EFAAE5A2","user_header":"https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg","comment_is_top":false,"comment_ctime":1566513764,"is_pvip":false,"replies":[{"id":"46919","content":"WebSocketé€‚åˆå®æ—¶é€šä¿¡äº¤äº’çš„åœºæ™¯ï¼Œå’Œæ¶ˆæ¯é˜Ÿåˆ—å…¶å®æ˜¯ä¸¤ä¸ªé¢†åŸŸï¼Œä¸å†²çªï¼Œå¯ä»¥äº’ç›¸ç»“åˆä½¿ç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1566521575,"ip_address":"","comment_id":126878,"utype":1}],"discussion_count":3,"race_medal":0,"score":"48811154020","product_id":100029001,"comment_content":"å·¥ä½œåœºæ™¯é‡åˆ°è¿‡ç”¨æˆ·è®¢é˜…è‚¡ç¥¨çš„è‚¡ä»·ï¼Œè‚¡ä»·æ³¢åŠ¨æ—¶å®æ—¶æ¨é€ç»™æµ·é‡è®¢é˜…çš„ç”¨æˆ·ï¼Œé¢è¯•åœºæ™¯è¢«é—®åˆ°ä¸¤æ¬¡ï¼Œä¸€ åƒä¸‡ç²‰ä¸çš„æ˜æ˜Ÿå‘å¸ƒåŠ¨æ€å¦‚ä½•æ¨é€ç»™ç²‰ä¸ äºŒ æµ·é‡ç”¨æˆ·çš„ä¸»æ’­ç›´æ’­å¦‚ä½•æ¨é€å¼¹å¹• å½“æ—¶å›ç­”æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå…¶å®web socketæ‰æ˜¯æ¯”è¾ƒå¥½çš„æ–¹æ¡ˆ","like_count":11,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464219,"discussion_content":"WebSocketé€‚åˆå®æ—¶é€šä¿¡äº¤äº’çš„åœºæ™¯ï¼Œå’Œæ¶ˆæ¯é˜Ÿåˆ—å…¶å®æ˜¯ä¸¤ä¸ªé¢†åŸŸï¼Œä¸å†²çªï¼Œå¯ä»¥äº’ç›¸ç»“åˆä½¿ç”¨ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566521575,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1212902,"avatar":"https://static001.geekbang.org/account/avatar/00/12/81/e6/6cafed37.jpg","nickname":"æ—…é€”","note":"","ucode":"5022477E8E9441","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299689,"discussion_content":"å¾®åšè¿™ç§å‘å¸ƒåŠ¨æ€ åªæ˜¯æ™®é€šçš„æ•°æ®åº“æŸ¥è¯¢å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597765607,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1484184,"avatar":"https://static001.geekbang.org/account/avatar/00/16/a5/98/a65ff31a.jpg","nickname":"djfhchdh","note":"","ucode":"E71D75328CE398","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5952,"discussion_content":"å‰å®³ï¼Œå­¦ä¹ äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566549724,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":182778,"user_name":"å¤§åœŸè±†","can_delete":false,"product_type":"c1","uid":1121636,"ip_address":"","ucode":"67445DC3EC9DB0","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/64/52a5863b.jpg","comment_is_top":false,"comment_ctime":1582864649,"is_pvip":true,"replies":[{"id":"70718","content":"è¯´çš„å¾ˆå¯¹ã€‚<br><br>æ­£æ–‡é‡Œçš„tcp over webåªæ˜¯ä¸€ç§æ¯”å–»ï¼Œå¼ºè°ƒäº†WebSocketä¸httpçš„åŒºåˆ«ï¼Œä¸tcpçš„ç›¸ä¼¼æ€§ï¼Œä¸æ˜¯é‚£ä¹ˆä¸¥è°¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1582879994,"ip_address":"","comment_id":182778,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23057701129","product_id":100029001,"comment_content":"WebSocketå®šä¹‰ä¸ºtcp over webï¼Œæˆ‘ä¸ªäººæ„Ÿè§‰æ˜¯ä¸å¦¥çš„ï¼Œåº”è¯¥æ˜¯&quot;å¯é æœ‰åºçš„ä¼ è¾“å±‚ + å®ç°ç»„åŒ…åè®®çš„åº”ç”¨å±‚çš„é•¿è¿æ¥æ–¹æ¡ˆ over web&quot;ã€‚WebSocketå’ŒHTTPå·²ç»æœ‰åŒ…çš„ç»“æ„äº†,ä¸šåŠ¡ç›´æ¥å¯ä»¥ç”¨äº†ï¼Œæµè§ˆå™¨Aå‘ä¸€ä¸ªwebsocketåŒ…ï¼Œæ¯”å¦‚è¯´æ•°æ®æ˜¯1234ï¼Œç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å¯ä»¥è·å–è¿™ä¸ªåŒ…ï¼Œæ•°æ®æ˜¯1234ï¼Œå’Œhttpä¸€æ ·äº†ã€‚è€Œtcpè¿˜æ˜¯åŸå§‹çš„æ²¡å¤´æ²¡å°¾çš„å­—èŠ‚æµï¼Œæƒ³è¦é€šè®¯ï¼Œè¿˜å¾—å†è‡ªå®šä¹‰ä¸€ä¸ªåº”ç”¨å±‚çš„åè®®ã€‚","like_count":5,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485446,"discussion_content":"è¯´çš„å¾ˆå¯¹ã€‚\n\næ­£æ–‡é‡Œçš„tcp over webåªæ˜¯ä¸€ç§æ¯”å–»ï¼Œå¼ºè°ƒäº†WebSocketä¸httpçš„åŒºåˆ«ï¼Œä¸tcpçš„ç›¸ä¼¼æ€§ï¼Œä¸æ˜¯é‚£ä¹ˆä¸¥è°¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582879994,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134387,"user_name":"chao","can_delete":false,"product_type":"c1","uid":1358527,"ip_address":"","ucode":"AE1DBB0592747C","user_header":"https://static001.geekbang.org/account/avatar/00/14/ba/bf/e9a44c63.jpg","comment_is_top":false,"comment_ctime":1568815743,"is_pvip":false,"replies":[{"id":"51541","content":"æˆ‘ä¸ªäººä¹Ÿè§‰å¾—WebSocketçš„å˜é•¿ç¼–ç è®¾è®¡çš„å¾ˆå¥‡æ€ªã€‚<br><br>ç¬¬äºŒä¸ªå­—èŠ‚æœ€é«˜ä½è¢«maskå ç”¨ï¼Œæ‰€ä»¥ä½7ä½è¡¨ç¤ºé•¿åº¦ï¼Œæœ€å¤š127ã€‚<br><br>é‚£ä¹ˆ125ä¸€ä¸‹åœ¨ä½7ä½å°±å¤Ÿäº†ï¼Œ126ç”¨ä½œæ ‡å¿—ä½ï¼Œè¡¨ç¤ºåç»­ä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚ï¼Œ127åˆæ˜¯å¦å¤–ä¸€ä¸ªæ ‡å¿—ä½ï¼Œè¡¨ç¤ºåé¢æ˜¯å››ä¸ªå­—èŠ‚ã€‚<br><br>æ‰€ä»¥è¶…è¿‡125åä½7ä½å°±ä¸å†æ˜¯é•¿åº¦çš„å«ä¹‰äº†ï¼Œè€Œæ˜¯æ ‡å¿—ä½ï¼š126=&gt;2 bytesï¼Œ 127=&gt; 4 bytesã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1568853268,"ip_address":"","comment_id":134387,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18748684927","product_id":100029001,"comment_content":"1ã€ç¬¬äºŒä¸ªå­—èŠ‚å 7 ä½æ˜¯â€œPayload lenâ€ï¼Œè¡¨ç¤ºå¸§å†…å®¹çš„é•¿åº¦ã€‚å®ƒæ˜¯å¦ä¸€ç§å˜é•¿ç¼–ç ï¼Œæœ€å°‘ 7 ä½ï¼Œæœ€å¤šæ˜¯ 7+64 ä½ï¼Œä¹Ÿå°±æ˜¯é¢å¤–å¢åŠ  8 ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥ä¸€ä¸ª WebSocket å¸§æœ€å¤§æ˜¯ 2^64ã€‚<br>2ã€å¦‚æœæ•°æ®çš„é•¿åº¦å°äºç­‰äº125ä¸ªå­—èŠ‚ï¼Œåˆ™ç”¨é»˜è®¤çš„7ä¸ªbitæ¥æ ‡ç¤ºæ•°æ®çš„é•¿åº¦ï¼›<br>å¦‚æœæ•°æ®çš„é•¿åº¦ä¸º126ä¸ªå­—èŠ‚ï¼Œåˆ™ç”¨åé¢ç›¸é‚»çš„2ä¸ªå­—èŠ‚æ¥ä¿å­˜ä¸€ä¸ª16bitä½çš„æ— ç¬¦å·æ•´æ•°ä½œä¸ºæ•°æ®çš„é•¿åº¦ï¼›<br>å¦‚æœæ•°æ®çš„é•¿åº¦å¤§äºç­‰äº127ä¸ªå­—èŠ‚ï¼Œåˆ™ç”¨åé¢ç›¸é‚»çš„8ä¸ªå­—èŠ‚æ¥ä¿å­˜ä¸€ä¸ª64bitä½çš„æ— ç¬¦å·æ•´æ•°ä½œä¸ºæ•°æ®çš„é•¿åº¦ï¼›<br>è€å¸ˆï¼Œ2æ˜¯å…¶å®ƒåœ°æ–¹çœ‹åˆ°çš„ï¼ŒPayload len è¿™æ ·è®¾è®¡çš„åŸå› æ˜¯ä»€ä¹ˆï¼Œä»¥åŠæ²¡æ˜ç™½ä¸ºå•¥126ä¸ªå­—èŠ‚çš„é•¿åº¦è¦ç”¨16bitæ¥è¡¨ç¤º","like_count":4,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467725,"discussion_content":"æˆ‘ä¸ªäººä¹Ÿè§‰å¾—WebSocketçš„å˜é•¿ç¼–ç è®¾è®¡çš„å¾ˆå¥‡æ€ªã€‚\n\nç¬¬äºŒä¸ªå­—èŠ‚æœ€é«˜ä½è¢«maskå ç”¨ï¼Œæ‰€ä»¥ä½7ä½è¡¨ç¤ºé•¿åº¦ï¼Œæœ€å¤š127ã€‚\n\né‚£ä¹ˆ125ä¸€ä¸‹åœ¨ä½7ä½å°±å¤Ÿäº†ï¼Œ126ç”¨ä½œæ ‡å¿—ä½ï¼Œè¡¨ç¤ºåç»­ä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚ï¼Œ127åˆæ˜¯å¦å¤–ä¸€ä¸ªæ ‡å¿—ä½ï¼Œè¡¨ç¤ºåé¢æ˜¯å››ä¸ªå­—èŠ‚ã€‚\n\næ‰€ä»¥è¶…è¿‡125åä½7ä½å°±ä¸å†æ˜¯é•¿åº¦çš„å«ä¹‰äº†ï¼Œè€Œæ˜¯æ ‡å¿—ä½ï¼š126=&amp;gt;2 bytesï¼Œ 127=&amp;gt; 4 bytesã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568853268,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":160644,"user_name":"å¤ç›®","can_delete":false,"product_type":"c1","uid":1212750,"ip_address":"","ucode":"67C075A01CF4D2","user_header":"https://static001.geekbang.org/account/avatar/00/12/81/4e/d71092f4.jpg","comment_is_top":false,"comment_ctime":1575992718,"is_pvip":false,"replies":[{"id":"61313","content":"è¿™ä¸¤ä¸ªç¡®å®å¾ˆåƒï¼Œç¬¬ä¸€æ¬¡æ¥è§¦çš„äººï¼ˆåŒ…æ‹¬æˆ‘ï¼‰ä¹Ÿæ˜¯å®¹æ˜“å¼„ç³Šæ¶‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1576025808,"ip_address":"","comment_id":160644,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14460894606","product_id":100029001,"comment_content":"ä¸¤å¹´å‰æˆ‘å®ä¹ çš„æ—¶å€™å…¬å¸é¡¹ç›®ç”¨è¿‡ï¼Œåˆ°ç°åœ¨æˆ‘æ‰ææ¸…æ¥šå’Œhttpçš„åŒºåˆ«ï¼Œæƒ­æ„§â€¦","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477444,"discussion_content":"è¿™ä¸¤ä¸ªç¡®å®å¾ˆåƒï¼Œç¬¬ä¸€æ¬¡æ¥è§¦çš„äººï¼ˆåŒ…æ‹¬æˆ‘ï¼‰ä¹Ÿæ˜¯å®¹æ˜“å¼„ç³Šæ¶‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576025808,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":314337,"user_name":"ccx","can_delete":false,"product_type":"c1","uid":1042577,"ip_address":"","ucode":"FC0B6CC8A3D3A1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e8/91/e05a03a0.jpg","comment_is_top":false,"comment_ctime":1632975640,"is_pvip":false,"replies":[{"id":"113859","content":"websocketåœ¨å¦‚ä»Šçš„äº’è”ç½‘å¤§ç¯å¢ƒä¸‹éå¸¸æœ‰ç”¨ï¼ŒåŸºäºhttpæ¡æ‰‹å»ºè¿è®©å®ƒå¯ä»¥å¾ˆå®¹æ˜“è¿è¡Œåœ¨å„ç§webæœåŠ¡ä¸Šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1632999130,"ip_address":"","comment_id":314337,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5927942936","product_id":100029001,"comment_content":"åœ¨ FINTECH é¢†åŸŸå·¥ä½œäº†å‡ å¹´äº†ï¼Œè‡ªç ”å‘çš„å¤–æ±‡&#47;æ•°å­—è´§å¸äº¤æ˜“ç³»ç»Ÿçš„è¡Œæƒ…æ¨¡å—åŸºæœ¬éƒ½æ˜¯ websocket å®ç°çš„ï¼›å¦å¤–è¿˜é‡åˆ°ä¸€ä¸ªæœ‰æ„æ€çš„åœºæ™¯ï¼Œå°±æ˜¯ discord çš„æœºå™¨äºº Slash Commands çš„å®ç°ä¹Ÿæ˜¯åŸºäº websocket  çš„ã€‚","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527648,"discussion_content":"websocketåœ¨å¦‚ä»Šçš„äº’è”ç½‘å¤§ç¯å¢ƒä¸‹éå¸¸æœ‰ç”¨ï¼ŒåŸºäºhttpæ¡æ‰‹å»ºè¿è®©å®ƒå¯ä»¥å¾ˆå®¹æ˜“è¿è¡Œåœ¨å„ç§webæœåŠ¡ä¸Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632999130,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":173907,"user_name":"Daiver","can_delete":false,"product_type":"c1","uid":1466447,"ip_address":"","ucode":"9B1A03AFBC79BC","user_header":"https://static001.geekbang.org/account/avatar/00/16/60/4f/db0e62b3.jpg","comment_is_top":false,"comment_ctime":1579771955,"is_pvip":false,"replies":[{"id":"67670","content":"socket.ioæ˜¯ä¸€ä¸ªå¼€å‘æ¡†æ¶ï¼Œè€ŒWebSocketæ˜¯ä¼ è¾“åè®®ï¼Œä¸¤è€…è™½ç„¶æœ‰è”ç³»ï¼Œä½†ä¸èƒ½æ··åœ¨ä¸€èµ·ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1579862182,"ip_address":"","comment_id":173907,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5874739251","product_id":100029001,"comment_content":"è¿˜æœ‰socket.ioï¼Œç®—æ˜¯websocketçš„è¶…é›†äº†ã€‚","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482236,"discussion_content":"socket.ioæ˜¯ä¸€ä¸ªå¼€å‘æ¡†æ¶ï¼Œè€ŒWebSocketæ˜¯ä¼ è¾“åè®®ï¼Œä¸¤è€…è™½ç„¶æœ‰è”ç³»ï¼Œä½†ä¸èƒ½æ··åœ¨ä¸€èµ·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579862182,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1466447,"avatar":"https://static001.geekbang.org/account/avatar/00/16/60/4f/db0e62b3.jpg","nickname":"Daiver","note":"","ucode":"9B1A03AFBC79BC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":152095,"discussion_content":"æ˜¯çš„æ˜¯çš„ï¼Œæ˜¯åè®®çš„å…·ä½“å®ç°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579940047,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126923,"user_name":"Cris","can_delete":false,"product_type":"c1","uid":1473520,"ip_address":"","ucode":"F8A287134F1078","user_header":"https://static001.geekbang.org/account/avatar/00/16/7b/f0/269139d5.jpg","comment_is_top":false,"comment_ctime":1566521906,"is_pvip":false,"replies":[{"id":"46952","content":"å¯ä»¥å‚è€ƒä¸€ä¸‹ç¬¬6è®²ï¼Œç«¯å£å·æ˜¯è·Ÿtcpåè®®ç›¸å…³çš„æ¦‚å¿µã€‚<br><br>å› ä¸ºåŸŸåå®é™…ä¸Šæ˜¯ipåœ°å€çš„ç­‰ä»·æ›¿æ¢ï¼Œæ‰€ä»¥ç«¯å£å·å°±å¯ä»¥è·Ÿåœ¨åŸŸååé¢ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1566524874,"ip_address":"","comment_id":126923,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5861489202","product_id":100029001,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸‹ï¼Œurié‡Œçš„ç«¯å£å·ï¼Œæœ‰ä»€ä¹ˆç”¨ï¼Ÿä¸ºä»€ä¹ˆå®ƒæ˜¯å’Œåè®®å¯¹åº”çš„ï¼ˆhttpé»˜è®¤80ï¼Œhttpsé»˜è®¤443ï¼‰ï¼Œå´åˆå†™åœ¨åŸŸåçš„åé¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464245,"discussion_content":"å¯ä»¥å‚è€ƒä¸€ä¸‹ç¬¬6è®²ï¼Œç«¯å£å·æ˜¯è·Ÿtcpåè®®ç›¸å…³çš„æ¦‚å¿µã€‚\n\nå› ä¸ºåŸŸåå®é™…ä¸Šæ˜¯ipåœ°å€çš„ç­‰ä»·æ›¿æ¢ï¼Œæ‰€ä»¥ç«¯å£å·å°±å¯ä»¥è·Ÿåœ¨åŸŸååé¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566524874,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126903,"user_name":"å¾æµ·æµª","can_delete":false,"product_type":"c1","uid":1078528,"ip_address":"","ucode":"21801C420D0610","user_header":"https://static001.geekbang.org/account/avatar/00/10/75/00/618b20da.jpg","comment_is_top":false,"comment_ctime":1566520053,"is_pvip":false,"replies":[{"id":"46948","content":"<br>1.åœ¨WebSocketé‡Œæ²¡æœ‰è¯·æ±‚å“åº”çš„æ¦‚å¿µï¼Œæ”¶å‘çš„éƒ½æ˜¯æ•°æ®å¸§ï¼Œé€šä¿¡çš„åŒæ–¹å¯ä»¥è‡ªå·±è§£é‡Šå¸§çš„å«ä¹‰ã€‚<br><br>2.åº”è¯¥æ˜¯åŸºäºwebï¼Œä¹Ÿå°±æ˜¯httpåè®®ã€‚<br><br>3.å¯¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1566524485,"ip_address":"","comment_id":126903,"utype":1}],"discussion_count":2,"race_medal":1,"score":"5861487349","product_id":100029001,"comment_content":"1. WebSocket ä¸ HTTP&#47;2 æœ‰å¾ˆå¤šç›¸ä¼¼ç‚¹ï¼Œæ¯”å¦‚éƒ½å¯ä»¥ä» HTTP&#47;1 å‡çº§ï¼Œéƒ½é‡‡ç”¨äºŒè¿›åˆ¶å¸§ç»“æ„ï¼Œä½ èƒ½æ¯”è¾ƒä¸€ä¸‹è¿™ä¸¤ä¸ªåè®®å—ï¼Ÿ<br>å·®åˆ«ï¼šHTTP&#47;2æ˜¯è¯·æ±‚ä¸å“åº”çš„æ¨¡å¼ï¼Œè€ŒWebSocketæ˜¯åŒå‘çš„ï¼ŒæœåŠ¡å™¨ä¹Ÿå¯ä»¥ä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ã€‚<br>2. è¯•ç€è‡ªå·±è§£é‡Šä¸€ä¸‹ WebSocket é‡Œçš„â€Webâ€œå’Œâ€Socketâ€œçš„å«ä¹‰ã€‚<br>æ˜¯åŸºäºwebæœåŠ¡å™¨ï¼Œç±»ä¼¼äºtcpçš„socketæ–¹å¼æ¥ä½¿ç”¨çš„åè®®ã€‚<br>3. ç»“åˆè‡ªå·±çš„å®é™…å·¥ä½œï¼Œä½ è§‰å¾— WebSocket é€‚åˆç”¨åœ¨å“ªäº›åœºæ™¯é‡Œï¼Ÿ<br>æˆ‘åœ¨å®é™…å·¥ä½œä¸­è¿˜æ²¡æœ‰ç”¨åˆ°WebSocketï¼Œè§‰å¾—é€‚åˆæœåŠ¡å™¨ä¸»åŠ¨æ¨é€çš„å®¢æˆ·ç«¯çš„åœºæ™¯ï¼Œæ¯”å¦‚ç«™å†…ä¿¡æˆ–è€…ç«™å†…èŠå¤©ï¼Œæˆ–è€…åœ¨çº¿é¡µæ¸¸ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464238,"discussion_content":"\n1.åœ¨WebSocketé‡Œæ²¡æœ‰è¯·æ±‚å“åº”çš„æ¦‚å¿µï¼Œæ”¶å‘çš„éƒ½æ˜¯æ•°æ®å¸§ï¼Œé€šä¿¡çš„åŒæ–¹å¯ä»¥è‡ªå·±è§£é‡Šå¸§çš„å«ä¹‰ã€‚\n\n2.åº”è¯¥æ˜¯åŸºäºwebï¼Œä¹Ÿå°±æ˜¯httpåè®®ã€‚\n\n3.å¯¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566524485,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1078528,"avatar":"https://static001.geekbang.org/account/avatar/00/10/75/00/618b20da.jpg","nickname":"å¾æµ·æµª","note":"","ucode":"21801C420D0610","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5915,"discussion_content":"è°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566536131,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126892,"user_name":"-W.LI-","can_delete":false,"product_type":"c1","uid":1210699,"ip_address":"","ucode":"3556786538664F","user_header":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","comment_is_top":false,"comment_ctime":1566518417,"is_pvip":false,"replies":[{"id":"46946","content":"<br>WebSocketå…¶å®å°±æ˜¯ç»™tcpåŠ äº†ä¸€å±‚ç®€å•çš„åŒ…è£…ï¼Œæ‰€ä»¥å®ƒçš„å¹¶å‘èƒ½åŠ›å–å†³äºæœåŠ¡å™¨ï¼Œå¹¶ä¸æ˜¯kvçš„å½¢å¼ï¼Œä½ åº”è¯¥æŠŠå®ƒç†è§£æˆè¿è¡Œåœ¨httpä¸Šçš„tcpï¼Œç”¨tcpçš„æ€è·¯å»è€ƒè™‘å®ƒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1566524295,"ip_address":"","comment_id":126892,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5861485713","product_id":100029001,"comment_content":"è€å¸ˆå¥½!websocketå•æœºæœåŠ¡å™¨èƒ½æ”¯æŒå¤šå°‘é“¾æ¥å•Š?ä¹‹å‰æ²¡ç”¨è¿‡websocketã€‚çœ‹å¸–å­å¥½åƒæ˜¯é€šè¿‡key-valueå½¢å¼å­˜å‚¨æ‰€æœ‰é“¾æ¥ã€‚éœ€è¦ç”¨å¾—æ—¶å€™é€šè¿‡keyæ‹¿åˆ°é“¾æ¥å¾€å¤–å†™æ•°æ®ã€‚å¸Œæœ›è€å¸ˆç§‘æ™®ä¸‹web socketçš„ç®€å•åº”ç”¨å’Œå®ç°ï¼Œæ€§èƒ½åˆ†æã€‚<br>éœ€è¦æœåŠ¡å™¨ä¸»åŠ¨æ¨çš„æ„Ÿè§‰éƒ½å¯ä»¥ç”¨websocketåšã€‚<br>èŠå¤©å·¥å…·:ç”¨æˆ·Aï¼Œç”¨æˆ·Bï¼Œ<br>A-&gt;æœåŠ¡å™¨(ä¿å­˜èŠå¤©è®°å½•)-&gt;B;B-&gt;æœåŠ¡å™¨(ä¿å­˜èŠå¤©è®°å½•)-&gt;A;æ˜¯è¿™æ ·ä¹ˆ?","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464229,"discussion_content":"\nWebSocketå…¶å®å°±æ˜¯ç»™tcpåŠ äº†ä¸€å±‚ç®€å•çš„åŒ…è£…ï¼Œæ‰€ä»¥å®ƒçš„å¹¶å‘èƒ½åŠ›å–å†³äºæœåŠ¡å™¨ï¼Œå¹¶ä¸æ˜¯kvçš„å½¢å¼ï¼Œä½ åº”è¯¥æŠŠå®ƒç†è§£æˆè¿è¡Œåœ¨httpä¸Šçš„tcpï¼Œç”¨tcpçš„æ€è·¯å»è€ƒè™‘å®ƒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566524295,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":346326,"user_name":"Evan Xia","can_delete":false,"product_type":"c1","uid":2310344,"ip_address":"","ucode":"6800538102355E","user_header":"https://static001.geekbang.org/account/avatar/00/23/40/c8/17af3598.jpg","comment_is_top":false,"comment_ctime":1653027486,"is_pvip":false,"replies":[{"id":"126385","content":"Â è¿™ä¸ªåœºæ™¯ç”¨websocketè¿˜æ˜¯æŒºåˆé€‚çš„ï¼Œä¸è¿‡ç½‘ç»œçš„é—®é¢˜å°±æ˜¯åè®®ä¹‹å¤–çš„äº‹æƒ…äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1653192151,"ip_address":"","comment_id":346326,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1653027486","product_id":100029001,"comment_content":"æˆ‘ä»¬çš„ä¸šåŠ¡åœºæ™¯æ˜¯åœ¨ä¸‹é»‘ç™½æ£‹çš„è¿‡ç¨‹åŒæ–¹éƒ½èƒ½å®æ—¶æ”¶åˆ°å¯¹æ–¹çš„è½å­ï¼Œ ç”¨çš„æ˜¯ä¸€ä¸ªå°è£…å¥½çš„Centrifugoåº“ï¼ŒæœŸé—´é‡åˆ°æœ€å¤šçš„å°±æ˜¯ç½‘ç»œä¸å¥½é‡è¿çš„é—®é¢˜","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573076,"discussion_content":"Â è¿™ä¸ªåœºæ™¯ç”¨websocketè¿˜æ˜¯æŒºåˆé€‚çš„ï¼Œä¸è¿‡ç½‘ç»œçš„é—®é¢˜å°±æ˜¯åè®®ä¹‹å¤–çš„äº‹æƒ…äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653192151,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322704,"user_name":"Jasmine","can_delete":false,"product_type":"c1","uid":1585145,"ip_address":"","ucode":"E54999CC612A7C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIuTjCibv0afd7SSdLicfNk0f7KO5ga9VMleD1hc2DtQfianK20ht06SekClKV7M8UXLRHqQLm9hJ3ow/132","comment_is_top":false,"comment_ctime":1637559481,"is_pvip":false,"replies":[{"id":"117197","content":"å‰é¢çš„7ä½æ˜¯æ ‡å¿—ä½ï¼Œå·²ç»è¢«å ç”¨äº†ï¼Œæ‰€ä»¥åªèƒ½ç”¨64ä½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1637632808,"ip_address":"","comment_id":322704,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637559481","product_id":100029001,"comment_content":"ç¬¬äºŒä¸ªå­—èŠ‚å 7 ä½æ˜¯â€œPayload lenâ€ï¼Œè¡¨ç¤ºå¸§å†…å®¹çš„é•¿åº¦ã€‚å®ƒæ˜¯å¦ä¸€ç§å˜é•¿ç¼–ç ï¼Œæœ€å°‘ 7 ä½ï¼Œæœ€å¤šæ˜¯ 7+64 ä½ï¼Œä¹Ÿå°±æ˜¯é¢å¤–å¢åŠ  8 ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥ä¸€ä¸ª WebSocket å¸§æœ€å¤§æ˜¯ 2^64ã€‚â€”â€”è¿™é‡Œæœ€å¤§çš„å¸§ä¸ºä»€ä¹ˆä¸è¯´æ˜¯2^71å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532505,"discussion_content":"å‰é¢çš„7ä½æ˜¯æ ‡å¿—ä½ï¼Œå·²ç»è¢«å ç”¨äº†ï¼Œæ‰€ä»¥åªèƒ½ç”¨64ä½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637632808,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296089,"user_name":"Unknown element","can_delete":false,"product_type":"c1","uid":2028277,"ip_address":"","ucode":"34A129800D0238","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f2/f5/b82f410d.jpg","comment_is_top":false,"comment_ctime":1622737335,"is_pvip":false,"replies":[{"id":"107497","content":"<br>1.websocketæœ¬è´¨ä¸Šå’Œtcpæ˜¯ä¸€æ ·çš„ï¼ŒåŒå·¥æ˜¯æŒ‡é€šä¿¡çš„åŒæ–¹å¯ä»¥åŒæ—¶å‘é€æ•°æ®ï¼Œä½†ä¸€ä¸ªæ–¹å‘ä¸Šçš„æ•°æ®åŒ…è¿˜æ˜¯æœ‰åºçš„ã€‚<br><br>2.æ³¨æ„å®ƒç”¨äº†å˜é•¿ç¼–ç ï¼Œè¶…è¿‡127æ‰ä¼šç”¨8ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºé•¿åº¦ï¼Œæ‰€ä»¥æœ€å¤§é•¿åº¦æ˜¯2^64ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1622803866,"ip_address":"","comment_id":296089,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1622737335","product_id":100029001,"comment_content":"è€å¸ˆé—®ä¸‹<br>1.Web socketæ—¢ç„¶æ²¡æœ‰æµçš„æ¦‚å¿µé‚£å…·ä½“æ˜¯æ€ä¹ˆå®ç°å…¨åŒå·¥çš„å‘¢  ä¸¤è¾¹éƒ½åŒæ—¶æ”¶å‘é‚£åŒ…çš„é¡ºåºå°±ä¹±äº†å§<br>2.Web socketå¸§é‡Œå¸§é•¿åº¦æœ€å¤§æ˜¯7+64ä½é‚£æœ€é•¿ä¸åº”è¯¥æ˜¯2^71ä½å—  ä¸ºä»€ä¹ˆè¯¾ç¨‹é‡Œè¯´æœ€é•¿æ˜¯2^64ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521319,"discussion_content":"\n1.websocketæœ¬è´¨ä¸Šå’Œtcpæ˜¯ä¸€æ ·çš„ï¼ŒåŒå·¥æ˜¯æŒ‡é€šä¿¡çš„åŒæ–¹å¯ä»¥åŒæ—¶å‘é€æ•°æ®ï¼Œä½†ä¸€ä¸ªæ–¹å‘ä¸Šçš„æ•°æ®åŒ…è¿˜æ˜¯æœ‰åºçš„ã€‚\n\n2.æ³¨æ„å®ƒç”¨äº†å˜é•¿ç¼–ç ï¼Œè¶…è¿‡127æ‰ä¼šç”¨8ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºé•¿åº¦ï¼Œæ‰€ä»¥æœ€å¤§é•¿åº¦æ˜¯2^64ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622803866,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2028277,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f2/f5/b82f410d.jpg","nickname":"Unknown element","note":"","ucode":"34A129800D0238","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377970,"discussion_content":"ä¸€ä¸ªæ–¹å‘ä¸Šæ˜¯æœ‰åºçš„é‚£åªæ˜¯å‘é€çš„æ—¶å€™æœ‰åºå§  å—åˆ°çš„é¡ºåºæœ‰å¯èƒ½ä¼šä¹±å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622984957,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289177,"user_name":"å¼ å³°","can_delete":false,"product_type":"c1","uid":1097820,"ip_address":"","ucode":"7015E9A9137521","user_header":"https://static001.geekbang.org/account/avatar/00/10/c0/5c/10111544.jpg","comment_is_top":false,"comment_ctime":1618904087,"is_pvip":false,"replies":[{"id":"104934","content":"å¯¹è¿™ä¸¤ä¸ªä¸æ˜¯å¤ªäº†è§£ï¼Œæ„Ÿè§‰åƒæ˜¯jsé‡Œçš„ç¼–ç¨‹æ¦‚å¿µå§ï¼Œä¸ä¼ è¾“åè®®æœ¬èº«æ²¡æœ‰å…³ç³»ã€‚<br><br>æŠ±æ­‰äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1618914428,"ip_address":"","comment_id":289177,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1618904087","product_id":100029001,"comment_content":"æœåŠ¡å™¨å‘é€äº‹ä»¶ï¼ˆServer-sent Eventsï¼‰æ˜¯åŸºäº WebSocket åè®®çš„ä¸€ç§æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€äº‹ä»¶å’Œæ•°æ®çš„å•å‘é€šè®¯ã€‚<br>HTML5 æœåŠ¡å™¨å‘é€äº‹ä»¶ï¼ˆserver-sent eventï¼‰å…è®¸ç½‘é¡µè·å¾—æ¥è‡ªæœåŠ¡å™¨çš„æ›´æ–°ã€‚<br><br>è€å¸ˆèƒ½è®²è§£ä¸€ä¸‹ Server-sent Events å’Œ websocketçš„ç›¸åŒå’Œä¸åŒã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518842,"discussion_content":"å¯¹è¿™ä¸¤ä¸ªä¸æ˜¯å¤ªäº†è§£ï¼Œæ„Ÿè§‰åƒæ˜¯jsé‡Œçš„ç¼–ç¨‹æ¦‚å¿µå§ï¼Œä¸ä¼ è¾“åè®®æœ¬èº«æ²¡æœ‰å…³ç³»ã€‚\n\næŠ±æ­‰äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618914428,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287316,"user_name":"blueBean","can_delete":false,"product_type":"c1","uid":1816697,"ip_address":"","ucode":"6A68D2414BD904","user_header":"https://static001.geekbang.org/account/avatar/00/1b/b8/79/a4dbe9ee.jpg","comment_is_top":false,"comment_ctime":1617880366,"is_pvip":false,"replies":[{"id":"104375","content":"FINåªæ˜¯ä¸€ä¸ªä»£å·ï¼Œå¹¶ä¸æ˜¯ä¸‰ä¸ªå­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´0æ˜¯æ²¡ç»“æŸï¼Œ1æ˜¯ç»“æŸã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1617932672,"ip_address":"","comment_id":287316,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1617880366","product_id":100029001,"comment_content":"å¸§é‚£é‡Œï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„ç¬¬ä¸€ä½åº”è¯¥å°±æ˜¯ä¸€ä¸ªbitå§ï¼Œä¸ºå•¥èƒ½æ”¾ä¸‹FINè¿™ä¸ªå­—æ®µå‘¢ï¼Ÿæƒ³ä¸é€š","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518268,"discussion_content":"FINåªæ˜¯ä¸€ä¸ªä»£å·ï¼Œå¹¶ä¸æ˜¯ä¸‰ä¸ªå­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´0æ˜¯æ²¡ç»“æŸï¼Œ1æ˜¯ç»“æŸã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617932672,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284434,"user_name":"è„±ç¼°çš„é‡é©¬__","can_delete":false,"product_type":"c1","uid":1447569,"ip_address":"","ucode":"D5F993E7232C61","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/WtHCCMoLJ2DvzqQwPYZyj2RlN7eibTLMHDMTSO4xIKjfKR1Eh9L98AMkkZY7FmegWyGLahRQJ5ibPzeeFtfpeSow/132","comment_is_top":false,"comment_ctime":1616248092,"is_pvip":false,"replies":[{"id":"103157","content":"WebSocketå’Œhttpä¸€æ ·ï¼Œå®¢æˆ·ç«¯è¦å‘èµ·è¿æ¥ï¼Œæ¥ä¸‹æ¥å°±å’Œtcpä¸€æ ·äº†ï¼ŒæœåŠ¡å™¨åœ¨å†…å­˜é‡Œä¿æŒå¤šä¸ªä¸å®¢æˆ·ç«¯çš„è¿æ¥ã€‚<br><br>å¦‚æœä¼šPythonï¼Œå¯ä»¥æ‰¾ç›¸å…³çš„åº“è¯•ä¸€è¯•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1616290128,"ip_address":"","comment_id":284434,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1616248092","product_id":100029001,"comment_content":"è€å¸ˆä½ å¥½ï¼Œè¯·é—®æœåŠ¡ç«¯åœ¨ä½¿ç”¨websocketä¸»åŠ¨æ¨é€ä¿¡æ¯ç»™å®¢æˆ·ç«¯çš„æ—¶å€™ï¼Œæ˜¯å¦‚ä½•çŸ¥é“å®¢æˆ·ç«¯çš„å‘¢ï¼Ÿå¦å¤–æœåŠ¡ç«¯è¦ä¸»åŠ¨æ¨é€çš„å®¢æˆ·ç«¯æœ‰æˆåƒä¸Šä¸‡ä¸ªï¼Œå“ªåˆå¦‚ä½•æ¨é€ï¼Ÿä¸åƒå®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡ç«¯ï¼Œå®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡ç«¯æ˜¯ä½¿ç”¨httpï¼Œæœ‰ipå’Œç«¯å£ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517347,"discussion_content":"WebSocketå’Œhttpä¸€æ ·ï¼Œå®¢æˆ·ç«¯è¦å‘èµ·è¿æ¥ï¼Œæ¥ä¸‹æ¥å°±å’Œtcpä¸€æ ·äº†ï¼ŒæœåŠ¡å™¨åœ¨å†…å­˜é‡Œä¿æŒå¤šä¸ªä¸å®¢æˆ·ç«¯çš„è¿æ¥ã€‚\n\nå¦‚æœä¼šPythonï¼Œå¯ä»¥æ‰¾ç›¸å…³çš„åº“è¯•ä¸€è¯•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616290128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":275298,"user_name":"ä¹˜é£ç ´æµª","can_delete":false,"product_type":"c1","uid":2406841,"ip_address":"","ucode":"937AF15F3FEBDC","user_header":"https://static001.geekbang.org/account/avatar/00/24/b9/b9/9e4d7aa4.jpg","comment_is_top":false,"comment_ctime":1611457815,"is_pvip":false,"replies":[{"id":"99929","content":"å¯èƒ½æ˜¯æœ¬åœ°çš„dnsè§£æç¼“å­˜çš„é—®é¢˜ï¼Œå¯ä»¥è€ƒè™‘ç”¨dockerç¯å¢ƒè¯•è¯•ï¼Œæˆ–è€…ç”¨ä¸€ä¸ªå¹²å‡€çš„è™šæ‹Ÿæœºç¯å¢ƒé‡æ–°æ­å»ºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1611537095,"ip_address":"","comment_id":275298,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1611457815","product_id":100029001,"comment_content":"ç½—å¤§å¸ˆï¼Œæ‰€æœ‰WSçš„é¡µé¢éƒ½æ— æ³•æ‰“å¼€ï¼Œé”™è¯¯æç¤ºå¦‚ä¸‹ï¼Œ<br>æ— æ³•è®¿é—®æ­¤ç½‘ç«™ç½‘å€ä¸º ws:&#47;&#47;www.chrono.com:8080&#47;srv çš„ç½‘é¡µå¯èƒ½æš‚æ—¶æ— æ³•è¿æ¥ï¼Œæˆ–è€…å®ƒå·²æ°¸ä¹…æ€§åœ°ç§»åŠ¨åˆ°äº†æ–°ç½‘å€ã€‚<br>ERR_DISALLOWED_URL_SCHEME<br><br>æ— æ³•è®¿é—®æ­¤ç½‘ç«™ç½‘å€ä¸º ws:&#47;&#47;127.0.0.1&#47;38-0 çš„ç½‘é¡µå¯èƒ½æš‚æ—¶æ— æ³•è¿æ¥ï¼Œæˆ–è€…å®ƒå·²æ°¸ä¹…æ€§åœ°ç§»åŠ¨åˆ°äº†æ–°ç½‘å€ã€‚<br>ERR_DISALLOWED_URL_SCHEME<br><br>wiresharkä¹ŸæŠ“ä¸åˆ°ä»»ä½•åŒ…<br>","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514300,"discussion_content":"å¯èƒ½æ˜¯æœ¬åœ°çš„dnsè§£æç¼“å­˜çš„é—®é¢˜ï¼Œå¯ä»¥è€ƒè™‘ç”¨dockerç¯å¢ƒè¯•è¯•ï¼Œæˆ–è€…ç”¨ä¸€ä¸ªå¹²å‡€çš„è™šæ‹Ÿæœºç¯å¢ƒé‡æ–°æ­å»ºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611537095,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2406841,"avatar":"https://static001.geekbang.org/account/avatar/00/24/b9/b9/9e4d7aa4.jpg","nickname":"ä¹˜é£ç ´æµª","note":"","ucode":"937AF15F3FEBDC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":345136,"discussion_content":"å¤§å¸ˆï¼Œåº”è¯¥ä¸æ˜¯dnsç¼“å­˜é—®é¢˜ï¼Œé‡å¯ç”µè„‘ä¹Ÿä¸è¡Œï¼Œipconfig /flushdnsä¹Ÿä¸è¡Œ\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611664538,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":2406841,"avatar":"https://static001.geekbang.org/account/avatar/00/24/b9/b9/9e4d7aa4.jpg","nickname":"ä¹˜é£ç ´æµª","note":"","ucode":"937AF15F3FEBDC","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369163,"discussion_content":"æ¢è™šæ‹Ÿæœºæˆ–è€…dockerå§ï¼Œå®é™…ç¯å¢ƒå½±å“å› ç´ å¤ªå¤šï¼Œåœ¨è¿™é‡Œä¸å¥½è§£å†³ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618964699,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":345136,"ip_address":""},"score":369163,"extra":""}]}]},{"had_liked":false,"id":249110,"user_name":"ç«é”…å°ç‹å­","can_delete":false,"product_type":"c1","uid":1053262,"ip_address":"","ucode":"7D1BF39C437A99","user_header":"https://static001.geekbang.org/account/avatar/00/10/12/4e/ff0702fc.jpg","comment_is_top":false,"comment_ctime":1600434118,"is_pvip":false,"replies":[{"id":"91412","content":"WebSocketçš„å¸§åˆ’åˆ†æ˜¯ç”±åº”ç”¨è‡ªå·±å®šä¹‰çš„ï¼Œå’Œhttp&#47;2å·®ä¸å¤šï¼Œå®ƒçš„ä¸‹å±‚è¿˜æ˜¯äº¤ç»™tcpå‘é€ï¼Œæ‰€ä»¥ä¸ç”¨è€ƒè™‘ä¼ è¾“çš„åº•å±‚ç»†èŠ‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1600484053,"ip_address":"","comment_id":249110,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1600434118","product_id":100029001,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œå¯ä»¥è§£é‡Šä¸€ä¸‹å…¶ä¸­çš„å¸§æ˜¯å¦‚ä½•å…·ä½“åˆ’åˆ†çš„å— æ¯”å¦‚å‘é€ä¸€ä¸ªå¤§çš„å†…å®¹ ï¼Œåˆ†å‰²å¸§æœ‰ä»€ä¹ˆä¾æ®ï¼Œè¿˜æ˜¯è¯´ä¾èµ–mssæˆ–è€…æ»‘åŠ¨çª—å£è¿™äº›å†…å®¹ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505834,"discussion_content":"WebSocketçš„å¸§åˆ’åˆ†æ˜¯ç”±åº”ç”¨è‡ªå·±å®šä¹‰çš„ï¼Œå’Œhttp/2å·®ä¸å¤šï¼Œå®ƒçš„ä¸‹å±‚è¿˜æ˜¯äº¤ç»™tcpå‘é€ï¼Œæ‰€ä»¥ä¸ç”¨è€ƒè™‘ä¼ è¾“çš„åº•å±‚ç»†èŠ‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600484053,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":230554,"user_name":"Maske","can_delete":false,"product_type":"c1","uid":1696847,"ip_address":"","ucode":"A19BB41A47E852","user_header":"https://static001.geekbang.org/account/avatar/00/19/e4/4f/df6d810d.jpg","comment_is_top":false,"comment_ctime":1593416771,"is_pvip":true,"replies":[{"id":"85092","content":"goodï¼Œå¿«å­¦å®Œäº†ï¼ŒåŠ æ²¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1593423650,"ip_address":"","comment_id":230554,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1593416771","product_id":100029001,"comment_content":"1.éƒ½æ˜¯å»ºç«‹åœ¨tcp&#47;ipä¹‹ä¸Šï¼Œé»˜è®¤ç«¯å£å’Œhttp(s)ä¸€æ ·ã€‚ä¸åŒç‚¹ï¼šhttp2ä¸“æ³¨äºè§£å†³http1.1çš„æ€§èƒ½é—®é¢˜ã€‚websocketæ˜¯ä¸€ç§å…¨åŒå·¥é€šä¿¡åè®®ï¼Œè§£å†³çš„æ˜¯èƒ½å¤Ÿè®©æœåŠ¡å™¨ç«¯ä¸»åŠ¨æ¨é€æ•°æ®ç»™å®¢æˆ·ç«¯çš„é—®é¢˜ï¼Œä½¿å¾—webåº”ç”¨ä¸å†å±€é™äºâ€˜è¯·æ±‚â€”â€”åº”ç­”â€™æ¨¡å¼ã€‚<br>2.â€˜webâ€™è¡¨ç¤ºæ˜¯åŸºäºwebæµè§ˆå™¨å±‚é¢çš„ï¼Œåœ¨å‰ç«¯é€šè¿‡jsåŠ¨æ€æ§åˆ¶ç½‘ç»œçš„è¿æ¥ä¸æ–­å¼€ã€æ•°æ®æ”¶å‘æ“ä½œã€‚socketæ˜¯ä¸€ç§åº”ç”¨è¿›ç¨‹ä¸ç½‘ç»œé€šä¿¡åè®®ä¹‹é—´çš„è¿æ¥æœºåˆ¶ã€‚<br>3.å®æ—¶èŠå¤©åº”ç”¨ï¼Œé‡‘èé¢†åŸŸçš„è‚¡ä»·è‚¡æŒ‡ç­‰èµ°åŠ¿å›¾çš„ç»˜åˆ¶ä¹Ÿéœ€è¦å®æ—¶è·å–æœ€æ–°çš„æ•°æ®ï¼Œå¯¼èˆªåº”ç”¨ä¹Ÿéœ€è¦è·å–å®æ—¶è·¯å†µã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499934,"discussion_content":"goodï¼Œå¿«å­¦å®Œäº†ï¼ŒåŠ æ²¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593423650,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1696847,"avatar":"https://static001.geekbang.org/account/avatar/00/19/e4/4f/df6d810d.jpg","nickname":"Maske","note":"","ucode":"A19BB41A47E852","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287363,"discussion_content":"å“ˆå“ˆï¼Œæ„Ÿè°¢è€å¸ˆæ”¯æŒï¼Œåé¢æœ‰é—®é¢˜è‚¯å®šä¹Ÿå…ä¸äº†å†å›å¤´å¤šçœ‹å‡ éçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593424455,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":220794,"user_name":"æˆ‘æ¯é¸¡å•Šï¼","can_delete":false,"product_type":"c1","uid":1633705,"ip_address":"","ucode":"7BFB14BC99E978","user_header":"https://static001.geekbang.org/account/avatar/00/18/ed/a9/662318ab.jpg","comment_is_top":false,"comment_ctime":1590324731,"is_pvip":false,"replies":[{"id":"81447","content":"è¯´çš„å¾ˆå¥½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1590366423,"ip_address":"","comment_id":220794,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1590324731","product_id":100029001,"comment_content":"1.WebSocket ä¸ HTTP&#47;2 æœ‰å¾ˆå¤šç›¸ä¼¼ç‚¹ï¼Œæ¯”å¦‚éƒ½å¯ä»¥ä» HTTP&#47;1 å‡çº§ï¼Œéƒ½é‡‡ç”¨äºŒè¿›åˆ¶å¸§ç»“æ„ï¼Œä½ èƒ½æ¯”è¾ƒä¸€ä¸‹è¿™ä¸¤ä¸ªåè®®å—ï¼Ÿ<br><br>websocketé‡Œé¢æœ‰å¸§çš„æ¦‚å¿µï¼Œå´æ²¡æœ‰http2.0é‡Œçš„è™šæ‹Ÿæµçš„æ¦‚å¿µï¼Œä¹Ÿä¸å­˜åœ¨ä¼˜å…ˆçº§ï¼Œå¤šè·¯å¤ç”¨ã€‚websocketçš„å‡ºç°æœ¬è´¨ä¸Šè¿˜æ˜¯ä¸ºäº†è§£å†³httpçš„åŠåŒå·¥çš„é—®é¢˜ï¼Œå˜æˆå…¨åŒå·¥ï¼ŒæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯å¯ä»¥éšæ„é€šè¡Œçš„é—®é¢˜","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496240,"discussion_content":"è¯´çš„å¾ˆå¥½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590366423,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":220789,"user_name":"æˆ‘æ¯é¸¡å•Šï¼","can_delete":false,"product_type":"c1","uid":1633705,"ip_address":"","ucode":"7BFB14BC99E978","user_header":"https://static001.geekbang.org/account/avatar/00/18/ed/a9/662318ab.jpg","comment_is_top":false,"comment_ctime":1590324542,"is_pvip":false,"replies":[{"id":"81446","content":"nice","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1590366397,"ip_address":"","comment_id":220789,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1590324542","product_id":100029001,"comment_content":"3.ç»“åˆè‡ªå·±çš„å®é™…å·¥ä½œï¼Œä½ è§‰å¾— WebSocket é€‚åˆç”¨åœ¨å“ªäº›åœºæ™¯é‡Œï¼Ÿ<br>æœ€è¿‘åœ¨åšç›´æ’­åŠŸèƒ½çš„é¡¹ç›®ï¼Œå°±ç”¨åˆ°äº†websovketçš„å»åšç”¨æˆ·è¯„è®ºçš„æ¨é€ï¼Œè§‚çœ‹äººæ•°ç­‰çš„åŠŸèƒ½ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496238,"discussion_content":"nice","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590366397,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":213562,"user_name":"å“å‘¦æ­ª","can_delete":false,"product_type":"c1","uid":1792176,"ip_address":"","ucode":"63E0B984B71C7C","user_header":"https://static001.geekbang.org/account/avatar/00/1b/58/b0/417b4117.jpg","comment_is_top":false,"comment_ctime":1588475103,"is_pvip":false,"replies":[{"id":"79173","content":"httpä¸æ˜¯å®æ—¶çš„ï¼Œserver pushä¹Ÿä¸èƒ½æ¨é€ä»»æ„æ•°æ®ï¼Œåªèƒ½ç®—æ˜¯ç•¥æœ‰æ”¹è¿›çš„åŠåŒå·¥ï¼Œå’ŒWebSocketçš„å…¨åŒå·¥è¿˜æ˜¯æœ‰å¾ˆå¤§å·®è·çš„ã€‚<br><br>WebSocketæœåŠ¡å™¨ç«¯å¯ä»¥ä»»æ„å‘é€æ•°æ®ï¼Œæ¯”http&#47;2è¦è‡ªç”±çµæ´»çš„å¤šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1588487437,"ip_address":"","comment_id":213562,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1588475103","product_id":100029001,"comment_content":"è€å¸ˆï¼Œä½ å¥½ã€‚æˆ‘æƒ³é—®ä¸€ä¸‹æ—¢ç„¶ http&#47;2 ä¹Ÿå¯ä»¥ Server pushï¼Œé‚£ä¹ˆæ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥ç†è§£æ˜¯ å…¨åŒå·¥ï¼Œwebsocketå’Œ http&#47;2 åœ¨ Server push ä¸Šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493814,"discussion_content":"httpä¸æ˜¯å®æ—¶çš„ï¼Œserver pushä¹Ÿä¸èƒ½æ¨é€ä»»æ„æ•°æ®ï¼Œåªèƒ½ç®—æ˜¯ç•¥æœ‰æ”¹è¿›çš„åŠåŒå·¥ï¼Œå’ŒWebSocketçš„å…¨åŒå·¥è¿˜æ˜¯æœ‰å¾ˆå¤§å·®è·çš„ã€‚\n\nWebSocketæœåŠ¡å™¨ç«¯å¯ä»¥ä»»æ„å‘é€æ•°æ®ï¼Œæ¯”http/2è¦è‡ªç”±çµæ´»çš„å¤šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588487437,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207429,"user_name":"å¼ ä¸‰","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1587085365,"is_pvip":false,"replies":[{"id":"77479","content":"<br>1.å¾®ä¿¡çš„å…·ä½“æŠ€æœ¯ä¸äº†è§£ï¼Œçœ‹uriæ˜¯httpï¼Œå†…éƒ¨æ˜¯å¦ç”¨äº†WebSocketå¯ä»¥æŠ“åŒ…çœ‹çœ‹ã€‚<br><br>2.å¯¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1587092188,"ip_address":"","comment_id":207429,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1587085365","product_id":100029001,"comment_content":"å¾®ä¿¡ç½‘é¡µç«¯å°±æ˜¯ç”¨WebSocketå§ï¼Ÿå°è´´å£«ç¬¬å››ç‚¹ï¼Œå¦‚æœè¿è¡Œåœ¨ssl&#47;tls ä¸Šï¼ŒæŒ‡çš„æ˜¯wsså—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492120,"discussion_content":"\n1.å¾®ä¿¡çš„å…·ä½“æŠ€æœ¯ä¸äº†è§£ï¼Œçœ‹uriæ˜¯httpï¼Œå†…éƒ¨æ˜¯å¦ç”¨äº†WebSocketå¯ä»¥æŠ“åŒ…çœ‹çœ‹ã€‚\n\n2.å¯¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587092188,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":202841,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1586076218,"is_pvip":false,"replies":[{"id":"76036","content":"è¯´çš„éƒ½å¾ˆåˆ°ä½ã€‚<br><br>WebSocketå°±æ˜¯ç”¨æ¥è½»é‡çº§æ›¿ä»£tcpçš„ï¼Œå¯ä»¥é€šè¿‡httpåè®®æ¥å»ºç«‹è¿æ¥ï¼Œå®ç°å…¨åŒå·¥é€šä¿¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1586221921,"ip_address":"","comment_id":202841,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1586076218","product_id":100029001,"comment_content":"1ï¼šWebSocket ä¸ HTTP&#47;2 æœ‰å¾ˆå¤šç›¸ä¼¼ç‚¹ï¼Œæ¯”å¦‚éƒ½å¯ä»¥ä» HTTP&#47;1 å‡çº§ï¼Œéƒ½é‡‡ç”¨äºŒè¿›åˆ¶å¸§ç»“æ„ï¼Œä½ èƒ½æ¯”è¾ƒä¸€ä¸‹è¿™ä¸¤ä¸ªåè®®å—ï¼Ÿ<br>åˆå¿ƒä¸ä¸€æ ·ï¼ŒWebSocketæ ¸å¿ƒæ˜¯å®ç°å…¨åŒå·¥é€šä¿¡ï¼Œå¯ä»¥é‡åˆ†çš„åˆ©ç”¨ç½‘ç»œçš„é€šä¿¡èƒ½åŠ›ï¼Œå®ç°å…¨åŒå·¥åæœåŠ¡å™¨å°±ä¸æ€»æ˜¯è¢«åŠ¨çš„å“åº”äº†ï¼Œä¹Ÿå¯ä»¥ä¸»åŠ¨é‚€è¯·æµè§ˆå™¨å–å’–å•¡ã€‚HTTP&#47;2æ ¸å¿ƒæ˜¯æé«˜æ•°æ®çš„ä¼ è¾“æ•ˆç‡ï¼Œé€šè¿‡å¤šè·¯å¤ç”¨çš„æ–¹å¼æ¥å®ç°ã€‚<br><br>2ï¼šè¯•ç€è‡ªå·±è§£é‡Šä¸€ä¸‹ WebSocket é‡Œçš„â€Webâ€œå’Œâ€Socketâ€œçš„å«ä¹‰ã€‚<br>Webä¸»è¦å¼ºè°ƒæµè§ˆå™¨æˆ–è€…ç½‘é¡µç›¸å…³çš„åº”ç”¨å§ï¼<br>Socketä¸»è¦å¼ºè°ƒä»–æ˜¯åœ¨TCPä¸Šçš„ä¸€å±‚è–„è–„çš„å°è£…ï¼Œå®ç°é€šä¿¡æ–¹å¼æ¯”è¾ƒç®€å•è€ƒå‘åº•å±‚ã€‚<br><br>3ï¼šç»“åˆè‡ªå·±çš„å®é™…å·¥ä½œï¼Œä½ è§‰å¾— WebSocket é€‚åˆç”¨åœ¨å“ªäº›åœºæ™¯é‡Œï¼Ÿ<br>ç›®å‰è¿˜æ²¡ç”¨åˆ°ï¼Œä»–æ ¸å¿ƒè§£å†³çš„æ˜¯å…¨åŒå·¥é€šä¿¡é—®é¢˜ï¼ŒHTTPæ—©å°±å°±è§£å†³äº†æµè§ˆå™¨ä¾§çš„ä¸»åŠ¨è¯·æ±‚ï¼Œé‚£ä»–çš„å‡ºç°ä¸»è¦æ–¹ä¾¿äº†æƒ³å‘èµ·ä¸»åŠ¨è¯·æ±‚çš„æœåŠ¡å™¨è¿™ä¸€ä¾§ã€‚åªæœ‰æ˜¯æœåŠ¡å™¨æƒ³ä¸»åŠ¨æ¨é€æ•°æ®çš„åœºæ™¯ä¹Ÿè®¸éƒ½åˆé€‚ï¼Œæ¯”å¦‚ï¼šæ•°æ®å˜åŠ¨ä¸»åŠ¨æ¨é€ï¼Œä¸ç”¨å®¢æˆ·ç«¯ä¸æ–­è½®è¯¢ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490698,"discussion_content":"è¯´çš„éƒ½å¾ˆåˆ°ä½ã€‚\n\nWebSocketå°±æ˜¯ç”¨æ¥è½»é‡çº§æ›¿ä»£tcpçš„ï¼Œå¯ä»¥é€šè¿‡httpåè®®æ¥å»ºç«‹è¿æ¥ï¼Œå®ç°å…¨åŒå·¥é€šä¿¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586221921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":201029,"user_name":"é”¦","can_delete":false,"product_type":"c1","uid":1468298,"ip_address":"","ucode":"CB0EB4B68C468B","user_header":"https://static001.geekbang.org/account/avatar/00/16/67/8a/babd74dc.jpg","comment_is_top":false,"comment_ctime":1585707812,"is_pvip":false,"replies":[{"id":"75213","content":"<br>è¿™æ ·åšå½“ç„¶æ²¡æœ‰é—®é¢˜ï¼Œä¸è¿‡è¿™å°±å’Œhttpä¸€æ ·äº†ã€‚<br><br>å°å¸§çš„å¥½å¤„æ˜¯å®¹æ˜“å¤„ç†ï¼ŒæµåŒ–ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1585718037,"ip_address":"","comment_id":201029,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1585707812","product_id":100029001,"comment_content":"ä¸ºå•¥è¦ä½¿ç”¨è¿™ä¹ˆå¤šå¸§å‘¢ï¼Ÿä½¿ç”¨ä¸€ä¸ªå¸§å¤´ï¼Œé‡Œé¢å®šä¹‰æŠ¥æ–‡é•¿åº¦ä¸å°±è¡Œäº†å—ï¼Ÿå¸§å¤´åé¢å…¨æ˜¯æŠ¥æ–‡ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490216,"discussion_content":"\nè¿™æ ·åšå½“ç„¶æ²¡æœ‰é—®é¢˜ï¼Œä¸è¿‡è¿™å°±å’Œhttpä¸€æ ·äº†ã€‚\n\nå°å¸§çš„å¥½å¤„æ˜¯å®¹æ˜“å¤„ç†ï¼ŒæµåŒ–ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585718037,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":196557,"user_name":"Geek_5b0e47","can_delete":false,"product_type":"c1","uid":1822723,"ip_address":"","ucode":"3D6F1426B0593D","user_header":"","comment_is_top":false,"comment_ctime":1585293011,"is_pvip":false,"replies":[{"id":"74434","content":"niceï¼Œå®æ—¶æ¨é€ç”¨WebSocketå¾ˆå¥½ä½¿ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1585295145,"ip_address":"","comment_id":196557,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1585293011","product_id":100029001,"comment_content":"å‘å®¢æˆ·ç«¯ç›‘æ§å±æ¨é€æ—¶å®æ›´æ–°æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨websocket","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489331,"discussion_content":"niceï¼Œå®æ—¶æ¨é€ç”¨WebSocketå¾ˆå¥½ä½¿ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585295145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168538,"user_name":"å°é¸Ÿæ·«å¤ª","can_delete":false,"product_type":"c1","uid":1247186,"ip_address":"","ucode":"AC44F552DDF93E","user_header":"https://static001.geekbang.org/account/avatar/00/13/07/d2/d7a200d5.jpg","comment_is_top":false,"comment_ctime":1578106318,"is_pvip":false,"replies":[{"id":"65551","content":"sseè¿˜æ˜¯åŸºäºhttpçš„ï¼Œæ¯”è¾ƒç®€å•ï¼Œä½†å¯¹æµè§ˆå™¨è¦æ±‚é«˜ã€‚è€ŒWebSocketæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åè®®ï¼Œæ›´åŠ çµæ´»ï¼ŒåŠŸèƒ½æ›´å¼ºã€‚<br><br>åªè¦åˆé€‚åº”ç”¨åœºæ™¯å°±å¥½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1578273190,"ip_address":"","comment_id":168538,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578106318","product_id":100029001,"comment_content":"ç°åœ¨å…¬å¸åšçš„æ¶ˆæ¯æ¨é€ç”¨çš„æ˜¯SSEï¼Œå¦‚æœä¸ç”¨ä»æµè§ˆå™¨å¾€æœåŠ¡å™¨åŒå‘æ¨ï¼Œç”¨SSEæ„Ÿè§‰è¦æ¯”WebSocketçœäº‹å¾ˆå¤šã€‚ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480243,"discussion_content":"sseè¿˜æ˜¯åŸºäºhttpçš„ï¼Œæ¯”è¾ƒç®€å•ï¼Œä½†å¯¹æµè§ˆå™¨è¦æ±‚é«˜ã€‚è€ŒWebSocketæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åè®®ï¼Œæ›´åŠ çµæ´»ï¼ŒåŠŸèƒ½æ›´å¼ºã€‚\n\nåªè¦åˆé€‚åº”ç”¨åœºæ™¯å°±å¥½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578273190,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":148124,"user_name":"Demon.Lee","can_delete":false,"product_type":"c1","uid":1052859,"ip_address":"","ucode":"7F0E5493A8E345","user_header":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","comment_is_top":false,"comment_ctime":1572944386,"is_pvip":false,"replies":[{"id":"57115","content":"æŠ±æ­‰æ²¡ç”¨è¿‡mqttï¼Œä¸èƒ½ç»™å‡ºä¸¤è€…çš„å¯¹æ¯”ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1573001848,"ip_address":"","comment_id":148124,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1572944386","product_id":100029001,"comment_content":"ä¹‹å‰ç”¨MQTTè¿›è¡Œæ•°æ®æ¨é€ï¼Œä¸websocketè¿˜æ˜¯ä¸å¤ªä¸€æ ·ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473405,"discussion_content":"æŠ±æ­‰æ²¡ç”¨è¿‡mqttï¼Œä¸èƒ½ç»™å‡ºä¸¤è€…çš„å¯¹æ¯”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573001848,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129268,"user_name":"ä¸¶æ™¯","can_delete":false,"product_type":"c1","uid":1079269,"ip_address":"","ucode":"128AAC7A93E641","user_header":"https://static001.geekbang.org/account/avatar/00/10/77/e5/8b5844df.jpg","comment_is_top":false,"comment_ctime":1567074525,"is_pvip":false,"replies":[{"id":"48108","content":"ä¸è¡Œï¼ŒWebSocketæ˜¯å®æ—¶å…¨åŒå·¥ï¼Œè€Œhttp&#47;2çš„æ¨é€åªæ˜¯ä¸ºäº†å‡å°‘å®¢æˆ·ç«¯è¯·æ±‚çš„æˆæœ¬ï¼Œå‡ºå‘ç‚¹ä¸åŒï¼Œç”¨èµ·æ¥ä¹Ÿå°±å·®è·å¾ˆå¤§ï¼Œæ¯•ç«Ÿhttp&#47;2çš„ä¸»è¦åº”ç”¨åœºæ™¯è¿˜æ˜¯æ ‡å‡†çš„httpè¯·æ±‚åº”ç­”ï¼Œå®æ—¶æ€§ä¸å¼ºã€‚<br><br>WebSocketå’Œhttp&#47;2å„æœ‰è‡ªå·±çš„ä¼˜åŠ¿ï¼Œä¸å­˜åœ¨ç›¸äº’æ›¿ä»£ã€‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1567083982,"ip_address":"","comment_id":129268,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1567074525","product_id":100029001,"comment_content":"è€å¸ˆå¥½ï¼Œé‚£æ˜¯ä¸æ˜¯å¯ä»¥ç†è§£æˆå…¶å® http2 ä¹Ÿèƒ½è§£å†³ WebSocket æ‰€è§£å†³çš„é—®é¢˜ï¼Ÿå› ä¸º hhtp2 ä¹Ÿèƒ½æœåŠ¡å™¨æ¨é€ï¼Ÿè°¢è°¢è€å¸ˆ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465371,"discussion_content":"ä¸è¡Œï¼ŒWebSocketæ˜¯å®æ—¶å…¨åŒå·¥ï¼Œè€Œhttp/2çš„æ¨é€åªæ˜¯ä¸ºäº†å‡å°‘å®¢æˆ·ç«¯è¯·æ±‚çš„æˆæœ¬ï¼Œå‡ºå‘ç‚¹ä¸åŒï¼Œç”¨èµ·æ¥ä¹Ÿå°±å·®è·å¾ˆå¤§ï¼Œæ¯•ç«Ÿhttp/2çš„ä¸»è¦åº”ç”¨åœºæ™¯è¿˜æ˜¯æ ‡å‡†çš„httpè¯·æ±‚åº”ç­”ï¼Œå®æ—¶æ€§ä¸å¼ºã€‚\n\nWebSocketå’Œhttp/2å„æœ‰è‡ªå·±çš„ä¼˜åŠ¿ï¼Œä¸å­˜åœ¨ç›¸äº’æ›¿ä»£ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567083982,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1523315,"avatar":"","nickname":"GeekCoder","note":"","ucode":"14BB73CBE28545","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":574126,"discussion_content":"HTTP2æœåŠ¡ç«¯ä¸æ˜¯ä¹Ÿå¯ä»¥ä¸»åŠ¨ç»™å®¢æˆ·ç«¯æ¨é€å—ï¼Ÿä¸æ˜¯å®æ—¶çš„å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653839203,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":465371,"ip_address":""},"score":574126,"extra":""}]}]},{"had_liked":false,"id":128080,"user_name":"å´”ä¼Ÿå","can_delete":false,"product_type":"c1","uid":1022452,"ip_address":"","ucode":"ACDEEDF2A10999","user_header":"https://static001.geekbang.org/account/avatar/00/0f/99/f4/e0484cac.jpg","comment_is_top":false,"comment_ctime":1566828747,"is_pvip":true,"replies":[{"id":"47505","content":"åè®®é‡Œè¦æ±‚å®¢æˆ·ç«¯å‘é€WebSocketå¸§ï¼Œå¿…é¡»ä½¿ç”¨æ©ç ï¼Œå¦åˆ™å°±æ˜¯æ ¼å¼é”™è¯¯ï¼ŒæœåŠ¡å™¨åº”è¯¥æ‹’ç»æ¥æ”¶ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1566867322,"ip_address":"","comment_id":128080,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566828747","product_id":100029001,"comment_content":"å¼ºåˆ¶å®¢æˆ·ç«¯æ©ç æ˜¯ä»€ä¹ˆæ„æ€","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464785,"discussion_content":"åè®®é‡Œè¦æ±‚å®¢æˆ·ç«¯å‘é€WebSocketå¸§ï¼Œå¿…é¡»ä½¿ç”¨æ©ç ï¼Œå¦åˆ™å°±æ˜¯æ ¼å¼é”™è¯¯ï¼ŒæœåŠ¡å™¨åº”è¯¥æ‹’ç»æ¥æ”¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566867322,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127176,"user_name":"å®‰æ’","can_delete":false,"product_type":"c1","uid":1260026,"ip_address":"","ucode":"F78CFA9624CAEF","user_header":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","comment_is_top":false,"comment_ctime":1566577849,"is_pvip":false,"replies":[{"id":"47155","content":"WebSocket APIæ˜¯HTML5çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥JSå°±å¯ä»¥ä½¿ç”¨WebSocketå®ç°å®æ—¶é€šä¿¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1566690358,"ip_address":"","comment_id":127176,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566577849","product_id":100029001,"comment_content":"æ˜¯jsçš„å®æ—¶webåº”ç”¨ä¼šè°ƒç”¨websocket apiå—ï¼Ÿæ²¡æ¥è§¦è¿‡jsï¼Œä¸å¤ªæ‡‚è¿™å¥—è¿è¡Œæµç¨‹ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464357,"discussion_content":"WebSocket APIæ˜¯HTML5çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥JSå°±å¯ä»¥ä½¿ç”¨WebSocketå®ç°å®æ—¶é€šä¿¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566690358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127175,"user_name":"å®‰æ’","can_delete":false,"product_type":"c1","uid":1260026,"ip_address":"","ucode":"F78CFA9624CAEF","user_header":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","comment_is_top":false,"comment_ctime":1566577706,"is_pvip":false,"replies":[{"id":"47156","content":"WebSocketæ˜¯ä¸€ä¸ªé€šç”¨çš„åè®®ï¼Œåªæ˜¯å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯åœ¨httpã€æµè§ˆå™¨é‡Œä½¿ç”¨ã€‚<br><br>å®Œå…¨å¯ä»¥è‡ªå·±å†™ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œä½¿ç”¨WebSocketæ¥é€šä¿¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1566690423,"ip_address":"","comment_id":127175,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1566577706","product_id":100029001,"comment_content":"è™½ç„¶å¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬ä¼šåœ¨æµè§ˆå™¨é‡Œè°ƒç”¨ API æ¥ä½¿ç”¨ WebSocketã€‚è¿™å¥è¯ä¸å¤ªç†è§£ï¼Œwebsocketä¸æ˜¯åªæœ‰æµè§ˆå™¨è‡ªå·±ä¼šè°ƒç”¨å—ï¼Ÿç”¨æˆ·è¿˜èƒ½åœ¨æµè§ˆå™¨ä¹‹ä¸Šè°ƒç”¨websocket  apiï¼Œå¯ä»¥ä¸¾ä¸ªä¾‹å­å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464356,"discussion_content":"WebSocketæ˜¯ä¸€ä¸ªé€šç”¨çš„åè®®ï¼Œåªæ˜¯å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯åœ¨httpã€æµè§ˆå™¨é‡Œä½¿ç”¨ã€‚\n\nå®Œå…¨å¯ä»¥è‡ªå·±å†™ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œä½¿ç”¨WebSocketæ¥é€šä¿¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566690423,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1057122,"avatar":"https://static001.geekbang.org/account/avatar/00/10/21/62/abb7bfe3.jpg","nickname":"Aiæ™®","note":"","ucode":"637F2378FAFC96","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351456,"discussion_content":"è€å¸ˆè¯·é—®websocketå¦‚æœä¿æŒå¤šä¸ªé“¾æ¥ä¿æŒé•¿é“¾æ¥å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614275222,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}