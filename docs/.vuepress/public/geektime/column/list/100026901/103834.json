{"id":103834,"title":"23 | ä½ çœŸçš„æ‡‚Python GILï¼ˆå…¨å±€è§£é‡Šå™¨é”ï¼‰å—ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æ™¯éœ„ã€‚</p><p>å‰é¢å‡ èŠ‚è¯¾ï¼Œæˆ‘ä»¬å­¦ä¹ äº†Pythonçš„å¹¶å‘ç¼–ç¨‹ç‰¹æ€§ï¼Œä¹Ÿäº†è§£äº†å¤šçº¿ç¨‹ç¼–ç¨‹ã€‚äº‹å®ä¸Šï¼ŒPythonå¤šçº¿ç¨‹å¦ä¸€ä¸ªå¾ˆé‡è¦çš„è¯é¢˜â€”â€”GILï¼ˆGlobal Interpreter Lockï¼Œå³å…¨å±€è§£é‡Šå™¨é”ï¼‰å´é²œæœ‰äººçŸ¥ï¼Œç”šè‡³è¿å¾ˆå¤šPythonâ€œè€å¸æœºâ€éƒ½è§‰å¾—GILå°±æ˜¯ä¸€ä¸ªè°œã€‚ä»Šå¤©æˆ‘å°±æ¥ä¸ºä½ è§£è°œï¼Œå¸¦ä½ ä¸€èµ·æ¥çœ‹GILã€‚</p><h2>ä¸€ä¸ªä¸è§£ä¹‹è°œ</h2><p>è€³å¬ä¸ºè™šï¼Œçœ¼è§ä¸ºå®ã€‚æˆ‘ä»¬ä¸å¦¨å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œè®©ä½ æ„Ÿå—ä¸‹GILä¸ºä»€ä¹ˆä¼šè®©äººä¸æ˜æ‰€ä»¥ã€‚</p><p>æ¯”å¦‚ä¸‹é¢è¿™æ®µå¾ˆç®€å•çš„cpu-boundä»£ç ï¼š</p><pre><code>def CountDown(n):\n    while n &gt; 0:\n        n -= 1\n</code></pre><p>ç°åœ¨ï¼Œå‡è®¾ä¸€ä¸ªå¾ˆå¤§çš„æ•°å­—n = 100000000ï¼Œæˆ‘ä»¬å…ˆæ¥è¯•è¯•å•çº¿ç¨‹çš„æƒ…å†µä¸‹æ‰§è¡ŒCountDown(n)ã€‚åœ¨æˆ‘æ‰‹ä¸Šè¿™å°å·ç§°8æ ¸çš„MacBookä¸Šæ‰§è¡Œåï¼Œæˆ‘å‘ç°å®ƒçš„è€—æ—¶ä¸º5.4sã€‚</p><p>è¿™æ—¶ï¼Œæˆ‘ä»¬æƒ³è¦ç”¨å¤šçº¿ç¨‹æ¥åŠ é€Ÿï¼Œæ¯”å¦‚ä¸‹é¢è¿™å‡ è¡Œæ“ä½œï¼š</p><pre><code>from threading import Thread\n\nn = 100000000\n\nt1 = Thread(target=CountDown, args=[n // 2])\nt2 = Thread(target=CountDown, args=[n // 2])\nt1.start()\nt2.start()\nt1.join()\nt2.join()\n</code></pre><p>æˆ‘åˆåœ¨åŒä¸€å°æœºå™¨ä¸Šè·‘äº†ä¸€ä¸‹ï¼Œç»“æœå‘ç°ï¼Œè¿™ä¸ä»…æ²¡æœ‰å¾—åˆ°é€Ÿåº¦çš„æå‡ï¼Œåè€Œè®©è¿è¡Œå˜æ…¢ï¼Œæ€»å…±èŠ±äº†9.6sã€‚</p><p>æˆ‘è¿˜æ˜¯ä¸æ­»å¿ƒï¼Œå†³å®šä½¿ç”¨å››ä¸ªçº¿ç¨‹å†è¯•ä¸€æ¬¡ï¼Œç»“æœå‘ç°è¿è¡Œæ—¶é—´è¿˜æ˜¯9.8sï¼Œå’Œ2ä¸ªçº¿ç¨‹çš„ç»“æœå‡ ä¹ä¸€æ ·ã€‚</p><p>è¿™æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿéš¾é“æ˜¯æˆ‘ä¹°äº†å‡çš„MacBookå—ï¼Ÿä½ å¯ä»¥å…ˆè‡ªå·±æ€è€ƒä¸€ä¸‹è¿™ä¸ªé—®é¢˜ï¼Œä¹Ÿå¯ä»¥åœ¨è‡ªå·±ç”µè„‘ä¸Šæµ‹è¯•ä¸€ä¸‹ã€‚æˆ‘å½“ç„¶ä¹Ÿè¦è‡ªæˆ‘åæ€ä¸€ä¸‹ï¼Œå¹¶ä¸”æå‡ºäº†ä¸‹é¢ä¸¤ä¸ªçŒœæƒ³ã€‚</p><!-- [[[read_end]]] --><p>ç¬¬ä¸€ä¸ªæ€€ç–‘ï¼šæˆ‘çš„æœºå™¨å‡ºé—®é¢˜äº†å—ï¼Ÿ</p><p>è¿™ä¸å¾—ä¸è¯´ä¹Ÿæ˜¯ä¸€ä¸ªåˆç†çš„çŒœæƒ³ã€‚å› æ­¤æˆ‘åˆæ‰¾äº†ä¸€ä¸ªå•æ ¸CPUçš„å°å¼æœºï¼Œè·‘äº†ä¸€ä¸‹ä¸Šé¢çš„å®éªŒã€‚è¿™æ¬¡æˆ‘å‘ç°ï¼Œåœ¨å•æ ¸CPUç”µè„‘ä¸Šï¼Œå•çº¿ç¨‹è¿è¡Œéœ€è¦11sæ—¶é—´ï¼Œ2ä¸ªçº¿ç¨‹è¿è¡Œä¹Ÿæ˜¯11sæ—¶é—´ã€‚è™½ç„¶ä¸åƒç¬¬ä¸€å°æœºå™¨é‚£æ ·ï¼Œå¤šçº¿ç¨‹åè€Œæ¯”å•çº¿ç¨‹æ›´æ…¢ï¼Œä½†æ˜¯è¿™ä¸¤æ¬¡æ•´ä½“æ•ˆæœå‡ ä¹ä¸€æ ·å‘€ï¼</p><p>çœ‹èµ·æ¥ï¼Œè¿™ä¸åƒæ˜¯ç”µè„‘çš„é—®é¢˜ï¼Œè€Œæ˜¯Pythonçš„çº¿ç¨‹å¤±æ•ˆäº†ï¼Œæ²¡æœ‰èµ·åˆ°å¹¶è¡Œè®¡ç®—çš„ä½œç”¨ã€‚</p><p>é¡ºç†æˆç« ï¼Œæˆ‘åˆæœ‰äº†ç¬¬äºŒä¸ªæ€€ç–‘ï¼šPythonçš„çº¿ç¨‹æ˜¯ä¸æ˜¯å‡çš„çº¿ç¨‹ï¼Ÿ</p><p>Pythonçš„çº¿ç¨‹ï¼Œçš„çš„ç¡®ç¡®å°è£…äº†åº•å±‚çš„æ“ä½œç³»ç»Ÿçº¿ç¨‹ï¼Œåœ¨Linuxç³»ç»Ÿé‡Œæ˜¯Pthreadï¼ˆå…¨ç§°ä¸ºPOSIX Threadï¼‰ï¼Œè€Œåœ¨Windowsç³»ç»Ÿé‡Œæ˜¯Windows Threadã€‚å¦å¤–ï¼ŒPythonçš„çº¿ç¨‹ï¼Œä¹Ÿå®Œå…¨å—æ“ä½œç³»ç»Ÿç®¡ç†ï¼Œæ¯”å¦‚åè°ƒä½•æ—¶æ‰§è¡Œã€ç®¡ç†å†…å­˜èµ„æºã€ç®¡ç†ä¸­æ–­ç­‰ç­‰ã€‚</p><p>æ‰€ä»¥ï¼Œè™½ç„¶Pythonçš„çº¿ç¨‹å’ŒC++çš„çº¿ç¨‹æœ¬è´¨ä¸Šæ˜¯ä¸åŒçš„æŠ½è±¡ï¼Œä½†å®ƒä»¬çš„åº•å±‚å¹¶æ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚</p><h2>ä¸ºä»€ä¹ˆæœ‰GILï¼Ÿ</h2><p>çœ‹æ¥æˆ‘çš„ä¸¤ä¸ªçŒœæƒ³ï¼Œéƒ½ä¸èƒ½è§£é‡Šå¼€å¤´çš„è¿™ä¸ªæœªè§£ä¹‹è°œã€‚é‚£ç©¶ç«Ÿè°æ‰æ˜¯â€œç½ªé­ç¥¸é¦–â€å‘¢ï¼Ÿäº‹å®ä¸Šï¼Œæ­£æ˜¯æˆ‘ä»¬ä»Šå¤©çš„ä¸»è§’ï¼Œä¹Ÿå°±æ˜¯GILï¼Œå¯¼è‡´äº†Pythonçº¿ç¨‹çš„æ€§èƒ½å¹¶ä¸åƒæˆ‘ä»¬æœŸæœ›çš„é‚£æ ·ã€‚</p><p>GILï¼Œæ˜¯æœ€æµè¡Œçš„Pythonè§£é‡Šå™¨CPythonä¸­çš„ä¸€ä¸ªæŠ€æœ¯æœ¯è¯­ã€‚å®ƒçš„æ„æ€æ˜¯å…¨å±€è§£é‡Šå™¨é”ï¼Œæœ¬è´¨ä¸Šæ˜¯ç±»ä¼¼æ“ä½œç³»ç»Ÿçš„Mutexã€‚æ¯ä¸€ä¸ªPythonçº¿ç¨‹ï¼Œåœ¨CPythonè§£é‡Šå™¨ä¸­æ‰§è¡Œæ—¶ï¼Œéƒ½ä¼šå…ˆé”ä½è‡ªå·±çš„çº¿ç¨‹ï¼Œé˜»æ­¢åˆ«çš„çº¿ç¨‹æ‰§è¡Œã€‚</p><p>å½“ç„¶ï¼ŒCPythonä¼šåšä¸€äº›å°æŠŠæˆï¼Œè½®æµæ‰§è¡ŒPythonçº¿ç¨‹ã€‚è¿™æ ·ä¸€æ¥ï¼Œç”¨æˆ·çœ‹åˆ°çš„å°±æ˜¯â€œä¼ªå¹¶è¡Œâ€â€”â€”Pythonçº¿ç¨‹åœ¨äº¤é”™æ‰§è¡Œï¼Œæ¥æ¨¡æ‹ŸçœŸæ­£å¹¶è¡Œçš„çº¿ç¨‹ã€‚</p><p>é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆCPythonéœ€è¦GILå‘¢ï¼Ÿè¿™å…¶å®å’ŒCPythonçš„å®ç°æœ‰å…³ã€‚ä¸‹ä¸€èŠ‚æˆ‘ä»¬ä¼šè®²Pythonçš„å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œä»Šå¤©å…ˆç¨å¾®æä¸€ä¸‹ã€‚</p><p>CPythonä½¿ç”¨å¼•ç”¨è®¡æ•°æ¥ç®¡ç†å†…å­˜ï¼Œæ‰€æœ‰Pythonè„šæœ¬ä¸­åˆ›å»ºçš„å®ä¾‹ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªå¼•ç”¨è®¡æ•°ï¼Œæ¥è®°å½•æœ‰å¤šå°‘ä¸ªæŒ‡é’ˆæŒ‡å‘å®ƒã€‚å½“å¼•ç”¨è®¡æ•°åªæœ‰0æ—¶ï¼Œåˆ™ä¼šè‡ªåŠ¨é‡Šæ”¾å†…å­˜ã€‚</p><p>ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p><pre><code>&gt;&gt;&gt; import sys\n&gt;&gt;&gt; a = []\n&gt;&gt;&gt; b = a\n&gt;&gt;&gt; sys.getrefcount(a)\n3\n</code></pre><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œaçš„å¼•ç”¨è®¡æ•°æ˜¯3ï¼Œå› ä¸ºæœ‰aã€bå’Œä½œä¸ºå‚æ•°ä¼ é€’çš„getrefcountè¿™ä¸‰ä¸ªåœ°æ–¹ï¼Œéƒ½å¼•ç”¨äº†ä¸€ä¸ªç©ºåˆ—è¡¨ã€‚</p><p>è¿™æ ·ä¸€æ¥ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªPythonçº¿ç¨‹åŒæ—¶å¼•ç”¨äº†aï¼Œå°±ä¼šé€ æˆå¼•ç”¨è®¡æ•°çš„race conditionï¼Œå¼•ç”¨è®¡æ•°å¯èƒ½æœ€ç»ˆåªå¢åŠ 1ï¼Œè¿™æ ·å°±ä¼šé€ æˆå†…å­˜è¢«æ±¡æŸ“ã€‚å› ä¸ºç¬¬ä¸€ä¸ªçº¿ç¨‹ç»“æŸæ—¶ï¼Œä¼šæŠŠå¼•ç”¨è®¡æ•°å‡å°‘1ï¼Œè¿™æ—¶å¯èƒ½è¾¾åˆ°æ¡ä»¶é‡Šæ”¾å†…å­˜ï¼Œå½“ç¬¬äºŒä¸ªçº¿ç¨‹å†è¯•å›¾è®¿é—®aæ—¶ï¼Œå°±æ‰¾ä¸åˆ°æœ‰æ•ˆçš„å†…å­˜äº†ã€‚</p><p>æ‰€ä»¥è¯´ï¼ŒCPython  å¼•è¿› GIL å…¶å®ä¸»è¦å°±æ˜¯è¿™ä¹ˆä¸¤ä¸ªåŸå› ï¼š</p><ul>\n<li>ä¸€æ˜¯è®¾è®¡è€…ä¸ºäº†è§„é¿ç±»ä¼¼äºå†…å­˜ç®¡ç†è¿™æ ·çš„å¤æ‚çš„ç«äº‰é£é™©é—®é¢˜ï¼ˆrace conditionï¼‰ï¼›</li>\n<li>äºŒæ˜¯å› ä¸ºCPythonå¤§é‡ä½¿ç”¨Cè¯­è¨€åº“ï¼Œä½†å¤§éƒ¨åˆ†Cè¯­è¨€åº“éƒ½ä¸æ˜¯åŸç”Ÿçº¿ç¨‹å®‰å…¨çš„ï¼ˆçº¿ç¨‹å®‰å…¨ä¼šé™ä½æ€§èƒ½å’Œå¢åŠ å¤æ‚åº¦ï¼‰ã€‚</li>\n</ul><h2>GILæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h2><p>ä¸‹é¢è¿™å¼ å›¾ï¼Œå°±æ˜¯ä¸€ä¸ªGILåœ¨Pythonç¨‹åºçš„å·¥ä½œç¤ºä¾‹ã€‚å…¶ä¸­ï¼ŒThread 1ã€2ã€3è½®æµæ‰§è¡Œï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹åœ¨å¼€å§‹æ‰§è¡Œæ—¶ï¼Œéƒ½ä¼šé”ä½GILï¼Œä»¥é˜»æ­¢åˆ«çš„çº¿ç¨‹æ‰§è¡Œï¼›åŒæ ·çš„ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œä¸€æ®µåï¼Œä¼šé‡Šæ”¾GILï¼Œä»¥å…è®¸åˆ«çš„çº¿ç¨‹å¼€å§‹åˆ©ç”¨èµ„æºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/db/8d/dba8e4a107829d0b72ea513be34fe18d.png?wh=720*272\" alt=\"\"></p><p>ç»†å¿ƒçš„ä½ å¯èƒ½ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆPythonçº¿ç¨‹ä¼šå»ä¸»åŠ¨é‡Šæ”¾GILå‘¢ï¼Ÿæ¯•ç«Ÿï¼Œå¦‚æœä»…ä»…æ˜¯è¦æ±‚Pythonçº¿ç¨‹åœ¨å¼€å§‹æ‰§è¡Œæ—¶é”ä½GILï¼Œè€Œæ°¸è¿œä¸å»é‡Šæ”¾GILï¼Œé‚£åˆ«çš„çº¿ç¨‹å°±éƒ½æ²¡æœ‰äº†è¿è¡Œçš„æœºä¼šã€‚</p><p>æ²¡é”™ï¼ŒCPythonä¸­è¿˜æœ‰å¦ä¸€ä¸ªæœºåˆ¶ï¼Œå«åšcheck_intervalï¼Œæ„æ€æ˜¯CPythonè§£é‡Šå™¨ä¼šå»è½®è¯¢æ£€æŸ¥çº¿ç¨‹GILçš„é”ä½æƒ…å†µã€‚æ¯éš”ä¸€æ®µæ—¶é—´ï¼ŒPythonè§£é‡Šå™¨å°±ä¼šå¼ºåˆ¶å½“å‰çº¿ç¨‹å»é‡Šæ”¾GILï¼Œè¿™æ ·åˆ«çš„çº¿ç¨‹æ‰èƒ½æœ‰æ‰§è¡Œçš„æœºä¼šã€‚</p><p>ä¸åŒç‰ˆæœ¬çš„Pythonä¸­ï¼Œcheck intervalçš„å®ç°æ–¹å¼å¹¶ä¸ä¸€æ ·ã€‚æ—©æœŸçš„Pythonæ˜¯100ä¸ªticksï¼Œå¤§è‡´å¯¹åº”äº†1000ä¸ªbytecodesï¼›è€Œ Python 3ä»¥åï¼Œintervalæ˜¯15æ¯«ç§’ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¸å¿…ç»†ç©¶å…·ä½“å¤šä¹…ä¼šå¼ºåˆ¶é‡Šæ”¾GILï¼Œè¿™ä¸åº”è¯¥æˆä¸ºæˆ‘ä»¬ç¨‹åºè®¾è®¡çš„ä¾èµ–æ¡ä»¶ï¼Œæˆ‘ä»¬åªéœ€æ˜ç™½ï¼ŒCPythonè§£é‡Šå™¨ä¼šåœ¨ä¸€ä¸ªâ€œåˆç†â€çš„æ—¶é—´èŒƒå›´å†…é‡Šæ”¾GILå°±å¯ä»¥äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/42/88/42791f4cf34c0a784f466be22efeb388.png?wh=646*160\" alt=\"\"></p><p>æ•´ä½“æ¥è¯´ï¼Œæ¯ä¸€ä¸ªPythonçº¿ç¨‹éƒ½æ˜¯ç±»ä¼¼è¿™æ ·å¾ªç¯çš„å°è£…ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼š</p><pre><code>for (;;) {\n    if (--ticker &lt; 0) {\n        ticker = check_interval;\n    \n        /* Give another thread a chance */\n        PyThread_release_lock(interpreter_lock);\n    \n        /* Other threads may run now */\n    \n        PyThread_acquire_lock(interpreter_lock, 1);\n    }\n\n    bytecode = *next_instr++;\n    switch (bytecode) {\n        /* execute the next instruction ... */ \n    }\n}\n</code></pre><p>ä»è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ªPythonçº¿ç¨‹éƒ½ä¼šå…ˆæ£€æŸ¥tickerè®¡æ•°ã€‚åªæœ‰åœ¨tickerå¤§äº0çš„æƒ…å†µä¸‹ï¼Œçº¿ç¨‹æ‰ä¼šå»æ‰§è¡Œè‡ªå·±çš„bytecodeã€‚</p><h2>Pythonçš„çº¿ç¨‹å®‰å…¨</h2><p>ä¸è¿‡ï¼Œæœ‰äº†GILï¼Œå¹¶ä¸æ„å‘³ç€æˆ‘ä»¬Pythonç¼–ç¨‹è€…å°±ä¸ç”¨å»è€ƒè™‘çº¿ç¨‹å®‰å…¨äº†ã€‚å³ä½¿æˆ‘ä»¬çŸ¥é“ï¼ŒGILä»…å…è®¸ä¸€ä¸ªPythonçº¿ç¨‹æ‰§è¡Œï¼Œä½†å‰é¢æˆ‘ä¹Ÿè®²åˆ°äº†ï¼ŒPythonè¿˜æœ‰check intervalè¿™æ ·çš„æŠ¢å æœºåˆ¶ã€‚æˆ‘ä»¬æ¥è€ƒè™‘è¿™æ ·ä¸€æ®µä»£ç ï¼š</p><pre><code>import threading\n\nn = 0\n\ndef foo():\n    global n\n    n += 1\n\nthreads = []\nfor i in range(100):\n    t = threading.Thread(target=foo)\n    threads.append(t)\n\nfor t in threads:\n    t.start()\n\nfor t in threads:\n    t.join()\n\nprint(n)\n</code></pre><p>å¦‚æœä½ æ‰§è¡Œçš„è¯ï¼Œå°±ä¼šå‘ç°ï¼Œå°½ç®¡å¤§éƒ¨åˆ†æ—¶å€™å®ƒèƒ½å¤Ÿæ‰“å°100ï¼Œä½†æœ‰æ—¶ä¾¯ä¹Ÿä¼šæ‰“å°99æˆ–è€…98ã€‚</p><p>è¿™å…¶å®å°±æ˜¯å› ä¸ºï¼Œ<code>n+=1</code>è¿™ä¸€å¥ä»£ç è®©çº¿ç¨‹å¹¶ä¸å®‰å…¨ã€‚å¦‚æœä½ å»ç¿»è¯‘fooè¿™ä¸ªå‡½æ•°çš„bytecodeï¼Œå°±ä¼šå‘ç°ï¼Œå®ƒå®é™…ä¸Šç”±ä¸‹é¢å››è¡Œbytecodeç»„æˆï¼š</p><pre><code>&gt;&gt;&gt; import dis\n&gt;&gt;&gt; dis.dis(foo)\nLOAD_GLOBAL              0 (n)\nLOAD_CONST               1 (1)\nINPLACE_ADD\nSTORE_GLOBAL             0 (n)\n</code></pre><p>è€Œè¿™å››è¡Œbytecodeä¸­é—´éƒ½æ˜¯æœ‰å¯èƒ½è¢«æ‰“æ–­çš„ï¼</p><p>æ‰€ä»¥ï¼Œåƒä¸‡åˆ«æƒ³ç€ï¼Œæœ‰äº†GILä½ çš„ç¨‹åºå°±å¯ä»¥é«˜æ•æ— å¿§äº†ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦å»æ³¨æ„çº¿ç¨‹å®‰å…¨ã€‚æ­£å¦‚æˆ‘å¼€å¤´æ‰€è¯´ï¼Œ<strong>GILçš„è®¾è®¡ï¼Œä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿CPythonè§£é‡Šå™¨å±‚é¢çš„ç¼–å†™è€…ï¼Œè€Œä¸æ˜¯Pythonåº”ç”¨å±‚é¢çš„ç¨‹åºå‘˜</strong>ã€‚ä½œä¸ºPythonçš„ä½¿ç”¨è€…ï¼Œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦lockç­‰å·¥å…·ï¼Œæ¥ç¡®ä¿çº¿ç¨‹å®‰å…¨ã€‚æ¯”å¦‚æˆ‘ä¸‹é¢çš„è¿™ä¸ªä¾‹å­ï¼š</p><pre><code>n = 0\nlock = threading.Lock()\n\ndef foo():\n    global n\n    with lock:\n        n += 1\n</code></pre><h2>å¦‚ä½•ç»•è¿‡GILï¼Ÿ</h2><p>å­¦åˆ°è¿™é‡Œï¼Œä¼°è®¡æœ‰çš„Pythonä½¿ç”¨è€…æ„Ÿè§‰è‡ªå·±åƒè¢«åºŸäº†æ­¦åŠŸä¸€æ ·ï¼Œè§‰å¾—é™é¾™åå…«æŒåªå‰©ä¸‹äº†ä¸€æŒã€‚å…¶å®å¤§å¯ä¸å¿…ï¼Œä½ å¹¶ä¸éœ€è¦å¤ªæ²®ä¸§ã€‚Pythonçš„GILï¼Œæ˜¯é€šè¿‡CPythonçš„è§£é‡Šå™¨åŠ çš„é™åˆ¶ã€‚å¦‚æœä½ çš„ä»£ç å¹¶ä¸éœ€è¦CPythonè§£é‡Šå™¨æ¥æ‰§è¡Œï¼Œå°±ä¸å†å—GILçš„é™åˆ¶ã€‚</p><p>äº‹å®ä¸Šï¼Œå¾ˆå¤šé«˜æ€§èƒ½åº”ç”¨åœºæ™¯éƒ½å·²ç»æœ‰å¤§é‡çš„Cå®ç°çš„Pythonåº“ï¼Œä¾‹å¦‚NumPyçš„çŸ©é˜µè¿ç®—ï¼Œå°±éƒ½æ˜¯é€šè¿‡Cæ¥å®ç°çš„ï¼Œå¹¶ä¸å—GILå½±å“ã€‚</p><p>æ‰€ä»¥ï¼Œå¤§éƒ¨åˆ†åº”ç”¨æƒ…å†µä¸‹ï¼Œä½ å¹¶ä¸éœ€è¦è¿‡å¤šè€ƒè™‘GILã€‚å› ä¸ºå¦‚æœå¤šçº¿ç¨‹è®¡ç®—æˆä¸ºæ€§èƒ½ç“¶é¢ˆï¼Œå¾€å¾€å·²ç»æœ‰Pythonåº“æ¥è§£å†³è¿™ä¸ªé—®é¢˜äº†ã€‚</p><p>æ¢å¥è¯è¯´ï¼Œå¦‚æœä½ çš„åº”ç”¨çœŸçš„å¯¹æ€§èƒ½æœ‰è¶…çº§ä¸¥æ ¼çš„è¦æ±‚ï¼Œæ¯”å¦‚100uså°±å¯¹ä½ çš„åº”ç”¨æœ‰å¾ˆå¤§å½±å“ï¼Œé‚£æˆ‘å¿…é¡»è¦è¯´ï¼ŒPythonå¯èƒ½ä¸æ˜¯ä½ çš„æœ€ä¼˜é€‰æ‹©ã€‚</p><p>å½“ç„¶ï¼Œå¯ä»¥ç†è§£çš„æ˜¯ï¼Œæˆ‘ä»¬éš¾ä»¥é¿å…çš„æœ‰æ—¶å€™å°±æ˜¯æƒ³ä¸´æ—¶ç»™è‡ªå·±æ¾æ¾ç»‘ï¼Œæ‘†è„±GILï¼Œæ¯”å¦‚åœ¨æ·±åº¦å­¦ä¹ åº”ç”¨é‡Œï¼Œå¤§éƒ¨åˆ†ä»£ç å°±éƒ½æ˜¯Pythonçš„ã€‚åœ¨å®é™…å·¥ä½œä¸­ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å®ç°ä¸€ä¸ªè‡ªå®šä¹‰çš„å¾®åˆ†ç®—å­ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªç‰¹å®šç¡¬ä»¶çš„åŠ é€Ÿå™¨ï¼Œé‚£æˆ‘ä»¬å°±ä¸å¾—ä¸æŠŠè¿™äº›å…³é”®æ€§èƒ½ï¼ˆperformance-criticalï¼‰ä»£ç åœ¨C++ä¸­å®ç°ï¼ˆä¸å†å—GILæ‰€é™ï¼‰ï¼Œç„¶åå†æä¾›Pythonçš„è°ƒç”¨æ¥å£ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œä½ åªéœ€è¦é‡ç‚¹è®°ä½ï¼Œç»•è¿‡GILçš„å¤§è‡´æ€è·¯æœ‰è¿™ä¹ˆä¸¤ç§å°±å¤Ÿäº†ï¼š</p><ol>\n<li>ç»•è¿‡CPythonï¼Œä½¿ç”¨JPythonï¼ˆJavaå®ç°çš„Pythonè§£é‡Šå™¨ï¼‰ç­‰åˆ«çš„å®ç°ï¼›</li>\n<li>æŠŠå…³é”®æ€§èƒ½ä»£ç ï¼Œæ”¾åˆ°åˆ«çš„è¯­è¨€ï¼ˆä¸€èˆ¬æ˜¯C++ï¼‰ä¸­å®ç°ã€‚</li>\n</ol><h2>æ€»ç»“</h2><p>ä»Šå¤©è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼Œäº†è§£äº†GILå¯¹äºåº”ç”¨çš„å½±å“ï¼›ä¹‹åæˆ‘ä»¬é€‚åº¦å‰–æäº†GILçš„å®ç°åŸç†ï¼Œä½ ä¸å¿…æ·±ç©¶ä¸€äº›åŸç†çš„ç»†èŠ‚ï¼Œæ˜ç™½å…¶ä¸»è¦æœºåˆ¶å’Œå­˜åœ¨çš„éšæ‚£å³å¯ã€‚</p><p>è‡ªç„¶ï¼Œæˆ‘ä¹Ÿä¸ºä½ æä¾›äº†ç»•è¿‡GILçš„ä¸¤ç§æ€è·¯ã€‚ä¸è¿‡è¿˜æ˜¯é‚£å¥è¯ï¼Œå¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦è¿‡å¤šçº ç»“GILçš„å½±å“ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æœ€åï¼Œæˆ‘ç»™ä½ ç•™ä¸‹ä¸¤é“æ€è€ƒé¢˜ã€‚</p><p>ç¬¬ä¸€é—®ï¼Œåœ¨æˆ‘ä»¬å¤„ç†cpu-boundçš„ä»»åŠ¡ï¼ˆæ–‡ä¸­ç¬¬ä¸€ä¸ªä¾‹å­ï¼‰æ—¶ï¼Œä¸ºä»€ä¹ˆæœ‰æ—¶å€™ä½¿ç”¨å¤šçº¿ç¨‹ä¼šæ¯”å•çº¿ç¨‹è¿˜è¦æ…¢äº›ï¼Ÿ</p><p>ç¬¬äºŒé—®ï¼Œä½ è§‰å¾—GILæ˜¯ä¸€ä¸ªå¥½çš„è®¾è®¡å—ï¼Ÿäº‹å®ä¸Šï¼Œåœ¨Python 3ä¹‹åï¼Œç¡®å®æœ‰å¾ˆå¤šå…³äºGILæ”¹è¿›ç”šè‡³æ˜¯å–æ¶ˆçš„è®¨è®ºï¼Œä½ çš„çœ‹æ³•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä½ åœ¨å¹³å¸¸å·¥ä½œä¸­æœ‰è¢«GILå›°æ‰°è¿‡çš„åœºæ™¯å—ï¼Ÿ</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå†™ä¸‹ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™ä½ çš„åŒäº‹æœ‹å‹ï¼Œæˆ‘ä»¬ä¸€èµ·äº¤æµã€ä¸€èµ·è¿›æ­¥ã€‚</p><p></p>","neighbors":{"left":{"article_title":"22 | å¹¶å‘ç¼–ç¨‹ä¹‹Asyncio","id":103358},"right":{"article_title":"24 | å¸¦ä½ è§£æ Python åƒåœ¾å›æ”¶æœºåˆ¶","id":104265}},"comments":[{"had_liked":false,"id":111020,"user_name":"å°ä¾ é¾™æ—‹é£","can_delete":false,"product_type":"c1","uid":1126441,"ip_address":"","ucode":"073F3924A99835","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/29/d6816ebf.jpg","comment_is_top":false,"comment_ctime":1562423939,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"547023270531","product_id":100026901,"comment_content":"å…ˆmarkä¸€ä¸‹å­¦åˆ°çš„çŸ¥è¯†ç‚¹ï¼š<br>ä¸€ã€æŸ¥çœ‹å¼•ç”¨è®¡æ•°çš„æ–¹æ³•ï¼šsys.getrefcount(a)<br>äºŒã€CPythonå¼•è¿›GILçš„ä¸»è¦åŸå› æ˜¯ï¼š<br>1. è®¾è®¡è€…ä¸ºäº†è§„é¿ç±»ä¼¼å†…å­˜ç®¡ç†è¿™æ ·çš„å¤æ‚ç«äº‰é£é™©é—®é¢˜ï¼ˆrace conditionï¼‰ï¼›<br>2. CPythonå¤§é‡ä½¿ç”¨Cè¯­è¨€åº“ï¼Œä½†å¤§éƒ¨åˆ†Cè¯­è¨€åº“éƒ½ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ˆçº¿ç¨‹å®‰å…¨ä¼šé™ä½æ€§èƒ½å’Œå¢åŠ å¤æ‚åº¦ï¼‰ã€‚<br>ä¸‰ã€ç»•è¿‡GILçš„ä¸¤ç§æ€è·¯ï¼š<br>1. ç»•è¿‡CPythonï¼Œä½¿ç”¨JPythonç­‰åˆ«çš„å®ç°ï¼›<br>2. æŠŠå…³é”®æ€§èƒ½ä»£ç æ”¾åˆ°å…¶ä»–è¯­è¨€ä¸­å®ç°ï¼Œæ¯”å¦‚C++ã€‚<br><br><br>é—®ç­”è€å¸ˆçš„é—®é¢˜ï¼š<br>1. cpu-boundå±äºè®¡ç®—å¯†é›†å‹ç¨‹åºï¼Œç”¨å¤šçº¿ç¨‹è¿è¡Œæ—¶ï¼Œæ¯ä¸ªçº¿ç¨‹åœ¨å¼€å§‹æ‰§è¡Œæ—¶éƒ½ä¼šé”ä½GILã€æ‰§è¡Œå®Œä¼šé‡Šæ”¾GILï¼Œè¿™ä¸¤ä¸ªæ­¥éª¤æ¯”è¾ƒè´¹æ—¶ã€‚ç›¸æ¯”å•çº¿ç¨‹å°±æ²¡æœ‰åˆ‡æ¢çº¿ç¨‹çš„é—®é¢˜ï¼Œæ‰€ä»¥æ›´å¿«ã€‚<br>ç›¸åï¼Œåœ¨å¤„ç†å¤šé˜»å¡é«˜å»¶è¿Ÿçš„IOå¯†é›†å‹ç¨‹åºæ—¶ï¼Œå› ä¸ºå¤šçº¿ç¨‹æœ‰check intervalæœºåˆ¶ï¼Œè‹¥é‡é˜»å¡ï¼ŒCPythonä¼šå¼ºåˆ¶å½“å‰çº¿ç¨‹è®©å‡ºï¼ˆé‡Šæ”¾ï¼‰GILï¼Œç»™å…¶ä»–çº¿ç¨‹æ‰§è¡Œçš„æœºä¼šã€‚æ‰€ä»¥èƒ½æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚<br>2. ç¬¬äºŒä¸ªé—®é¢˜æ‘˜æŠ„äº†çŸ¥ä¹ä¸Šçš„è®¨è®ºï¼š<br>åœ¨python3ä¸­ï¼ŒGILä¸ä½¿ç”¨ticksè®¡æ•°ï¼Œæ”¹ä¸ºä½¿ç”¨è®¡æ—¶å™¨ï¼ˆæ‰§è¡Œæ—¶é—´è¾¾åˆ°é˜ˆå€¼åinterval=15æ¯«ç§’ï¼Œå½“å‰çº¿ç¨‹é‡Šæ”¾GILï¼‰ï¼Œè¿™æ ·å¯¹CPUå¯†é›†å‹ç¨‹åºæ›´åŠ å‹å¥½ï¼Œä½†ä¾ç„¶æ²¡æœ‰è§£å†³GILå¯¼è‡´çš„åŒä¸€æ—¶é—´åªèƒ½æ‰§è¡Œä¸€ä¸ªçº¿ç¨‹çš„é—®é¢˜ï¼Œæ‰€ä»¥æ•ˆç‡ä¾ç„¶ä¸å°½å¦‚äººæ„ã€‚å¤šæ ¸å¤šçº¿ç¨‹æ¯”å•æ ¸å¤šçº¿ç¨‹æ›´å·®ï¼ŒåŸå› æ˜¯å•æ ¸ä¸‹å¤šçº¿ç¨‹ï¼Œæ¯æ¬¡é‡Šæ”¾GILï¼Œå”¤é†’çš„é‚£ä¸ªçº¿ç¨‹éƒ½èƒ½è·å–åˆ°GILé”ï¼Œæ‰€ä»¥èƒ½å¤Ÿæ— ç¼æ‰§è¡Œï¼Œä½†å¤šæ ¸ä¸‹ï¼ŒCPU0é‡Šæ”¾GILåï¼Œå…¶ä»–CPUä¸Šçš„çº¿ç¨‹éƒ½ä¼šè¿›è¡Œç«äº‰ï¼Œä½†GILå¯èƒ½ä¼šé©¬ä¸Šåˆè¢«CPU0æ‹¿åˆ°ï¼Œå¯¼è‡´å…¶ä»–å‡ ä¸ªCPUä¸Šè¢«å”¤é†’åçš„çº¿ç¨‹ä¼šé†’ç€ç­‰å¾…åˆ°åˆ‡æ¢æ—¶é—´ååˆè¿›å…¥å¾…è°ƒåº¦çŠ¶æ€ï¼Œè¿™æ ·ä¼šé€ æˆçº¿ç¨‹é¢ ç°¸(thrashing)ï¼Œå¯¼è‡´æ•ˆç‡æ›´ä½ã€‚<br>ç»å¸¸ä¼šå¬åˆ°è€æ‰‹è¯´ï¼šâ€œpythonä¸‹æƒ³è¦å……åˆ†åˆ©ç”¨å¤šæ ¸CPUï¼Œå°±ç”¨å¤šè¿›ç¨‹â€ï¼ŒåŸå› æ˜¯ä»€ä¹ˆå‘¢ï¼ŸåŸå› æ˜¯ï¼šæ¯ä¸ªè¿›ç¨‹æœ‰å„è‡ªç‹¬ç«‹çš„GILï¼Œäº’ä¸å¹²æ‰°ï¼Œè¿™æ ·å°±å¯ä»¥çœŸæ­£æ„ä¹‰ä¸Šçš„å¹¶è¡Œæ‰§è¡Œï¼Œæ‰€ä»¥åœ¨pythonä¸­ï¼Œå¤šè¿›ç¨‹çš„æ‰§è¡Œæ•ˆç‡ä¼˜äºå¤šçº¿ç¨‹(ä»…ä»…é’ˆå¯¹å¤šæ ¸CPUè€Œè¨€)ã€‚æ‰€ä»¥æˆ‘ä»¬èƒ½å¤Ÿå¾—å‡ºç»“è®ºï¼šå¤šæ ¸ä¸‹ï¼Œæƒ³åšå¹¶è¡Œæå‡æ•ˆç‡ï¼Œæ¯”è¾ƒé€šç”¨çš„æ–¹æ³•æ˜¯ä½¿ç”¨å¤šè¿›ç¨‹ï¼Œèƒ½å¤Ÿæœ‰æ•ˆæé«˜æ‰§è¡Œæ•ˆç‡ã€‚","like_count":128,"discussions":[{"author":{"id":1528751,"avatar":"https://static001.geekbang.org/account/avatar/00/17/53/af/e5bf5d08.jpg","nickname":"lllong33","note":"","ucode":"5D012385994C3D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3113,"discussion_content":"å¤šæ ¸å¤šçº¿ç¨‹æ¯”å•æ ¸å¤šçº¿ç¨‹æ›´å·®...\nä½†å¤šæ ¸ä¸‹ï¼ŒCPU0é‡Šæ”¾GILåï¼Œå…¶ä»–CPUä¸Šçš„çº¿ç¨‹éƒ½ä¼šè¿›è¡Œç«äº‰ï¼Œä½†GILå¯èƒ½ä¼šé©¬ä¸Šåˆè¢«CPU0æ‹¿åˆ°ï¼Œå¯¼è‡´å…¶ä»–å‡ ä¸ªCPUä¸Šè¢«å”¤é†’åçš„çº¿ç¨‹ä¼šé†’ç€ç­‰å¾…åˆ°åˆ‡æ¢æ—¶é—´ååˆè¿›å…¥å¾…è°ƒåº¦çŠ¶æ€ï¼Œè¿™æ ·ä¼šé€ æˆçº¿ç¨‹é¢ ç°¸(thrashing)ï¼Œå¯¼è‡´æ•ˆç‡æ›´ä½ã€‚\n-------------------\næœ‰ç–‘é—®ï¼Œå¤šæ ¸æ€ä¹ˆå‡ºç°GILçš„ç«äº‰ï¼Ÿæœ‰ç‚¹ä¸èƒ½ç†è§£ä¸ºå•¥å¤šæ ¸çš„æƒ…å†µï¼Œè¿˜å»æŠ¢åˆ«çš„cpuçš„çº¿ç¨‹ï¼Œæ˜¯å› ä¸ºçº¿ç¨‹ä¸å¤Ÿï¼Ÿæœ‰ä»€ä¹ˆåœºæ™¯å˜›? \næˆ‘çš„ç†è§£æ˜¯ï¼šcpu0çš„çº¿ç¨‹ä¸åº”è¯¥å»cpu1æ‹¿èµ„æºã€‚è¿™æ ·å¾ˆå¥‡æ€ªã€‚æˆ‘çš„è®¤çŸ¥æ˜¯å•è¿›ç¨‹å¯¹åº”å¾ˆå¤šçº¿ç¨‹ï¼Œå•çº¿ç¨‹å¯¹åº”å¤šåç¨‹ã€‚ã€‚\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1564197126,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1371633,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqyicZYyW7ahaXgXUD8ZAS8x0t8jx5rYLhwbUCJiawRepKIZfsLdkxdQ9XQMo99c1UDibmNVfFnAqwPg/132","nickname":"ç¨‹åºæ°´æœå®","note":"","ucode":"1700DDFE073A56","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":75678,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575765212,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108975,"user_name":"leixin","can_delete":false,"product_type":"c1","uid":1318291,"ip_address":"","ucode":"9885DF5FB2E136","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/szNEybCR1Al4p6eDyT8atNjen7ZY9cBJSXOQl1EnrTM2efiaHlPtL7X44JeibXs9qEFLWv6HJWBwq5tVlNahGDGQ/132","comment_is_top":false,"comment_ctime":1561943331,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"156180765987","product_id":100026901,"comment_content":"æœ‰é‡è¦çš„ä¸€ç‚¹æ²¡è®²ï¼ŒGILä¼šåœ¨é‡åˆ°ioçš„æ—¶å€™è‡ªåŠ¨é‡Šæ”¾ï¼Œç»™å…¶ä»–çº¿ç¨‹æ‰§è¡Œçš„æœºä¼šï¼Œè¿™æ ·Pythonå¤šçº¿ç¨‹åœ¨ioé˜»å¡çš„å¤šä»»åŠ¡ä¸­æœ‰æ•ˆã€‚","like_count":37,"discussions":[{"author":{"id":1919541,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/4a/35/66caeed9.jpg","nickname":"å®Œç¾åšæŒ","note":"","ucode":"AE0261D8DDEF64","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":310419,"discussion_content":"è€å¸ˆä¹‹å‰çš„è¯´æ³•ï¼š21è®²\nâ€œäº‹å®ä¸Šï¼ŒPython çš„è§£é‡Šå™¨å¹¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¸ºäº†è§£å†³ç”±æ­¤å¸¦æ¥çš„ race condition ç­‰é—®é¢˜ï¼ŒPython ä¾¿å¼•å…¥äº†å…¨å±€è§£é‡Šå™¨é”ï¼Œä¹Ÿå°±æ˜¯åŒä¸€æ—¶åˆ»ï¼Œåªå…è®¸ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œã€‚å½“ç„¶ï¼Œåœ¨æ‰§è¡Œ I/O æ“ä½œæ—¶ï¼Œå¦‚æœä¸€ä¸ªçº¿ç¨‹è¢« block äº†ï¼Œå…¨å±€è§£é‡Šå™¨é”ä¾¿ä¼šè¢«é‡Šæ”¾ï¼Œä»è€Œè®©å¦ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿç»§ç»­æ‰§è¡Œã€‚â€\n\næˆ‘æ˜¯æ„Ÿè§‰è‡ªå·±æœ‰ç‚¹æ··æ·† block å’Œ lockï¼Œä»€ä¹ˆå«ä¸€ä¸ªçº¿ç¨‹è¢«blockäº†","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1601822423,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1014665,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7b/89/34f2cbcc.jpg","nickname":"æ¨å®‡","note":"","ucode":"EB74DF6E269F03","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1919541,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/4a/35/66caeed9.jpg","nickname":"å®Œç¾åšæŒ","note":"","ucode":"AE0261D8DDEF64","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531768,"discussion_content":"é˜»å¡ã€‚ä¸€èˆ¬æ˜¯å› ä¸ºç¼ºå°‘äº†æŸç§èµ„æº/æ¡ä»¶ï¼Œå³ä½¿ç»™è¿™ä¸ªçº¿ç¨‹CPUï¼Œå®ƒä¹Ÿæ— æ³•æ‰§è¡Œä¸‹å»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637411147,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":310419,"ip_address":""},"score":531768,"extra":"{\"user_type\":1}"}]},{"author":{"id":2023589,"avatar":"","nickname":"è‹æ³½æ•","note":"","ucode":"E88B6B535BF04C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":394546,"discussion_content":"blockæŒ‡çš„æ˜¯lockçš„åä¹‰è¯ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631932027,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108958,"user_name":"leixin","can_delete":false,"product_type":"c1","uid":1318291,"ip_address":"","ucode":"9885DF5FB2E136","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/szNEybCR1Al4p6eDyT8atNjen7ZY9cBJSXOQl1EnrTM2efiaHlPtL7X44JeibXs9qEFLWv6HJWBwq5tVlNahGDGQ/132","comment_is_top":false,"comment_ctime":1561942185,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"147590830249","product_id":100026901,"comment_content":"è€å¸ˆï¼Œæˆ‘æ›¾ç»å»æŸå¤§å‚é¢è¯•ã€‚äººå®¶é—®äº†æˆ‘å‡ ä¸ªé—®é¢˜ï¼Œæ¯”è¯´è¯´ï¼Œä½ çŸ¥é“å…ƒç±»å—ï¼ŸPythonæ˜¯å¦‚ä½•è§£å†³å¾ªç¯å¼•ç”¨çš„ï¼Ÿæ¢å¥è¯è¯´ï¼ŒPythonçš„åƒåœ¾å›æ”¶æœºåˆ¶æ˜¯å¦‚ä½•ï¼Ÿæˆ‘åæ¥è‡ªå·±æ‰¾äº†äº›èµ„æ–™çœ‹äº†ï¼Œè¿˜æ˜¯ï¼Œä¸æ˜¯ç†è§£çš„ç‰¹åˆ«æ˜ç™½ã€‚è€å¸ˆåé¢çš„è¯¾ç¨‹èƒ½å¸®æˆ‘ä»¬è®²è§£ä¸‹å—ï¼Ÿ","like_count":33,"discussions":[{"author":{"id":1914504,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/36/88/20b6a6ee.jpg","nickname":"Simon","note":"","ucode":"A8A2E3E57BD029","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":220627,"discussion_content":"å…ƒç±»å°±æ˜¯metaclassï¼Œå·²è®²è¿‡","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1585909033,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144637,"user_name":"å»ºå¼º","can_delete":false,"product_type":"c1","uid":1397126,"ip_address":"","ucode":"62B03D0E0C64EC","user_header":"https://static001.geekbang.org/account/avatar/00/15/51/86/b5fd8dd8.jpg","comment_is_top":false,"comment_ctime":1571987755,"is_pvip":false,"replies":[{"id":"63092","content":"è®²çš„ä¸é”™","user_name":"ä½œè€…å›å¤","user_name_real":"Yuannanè”¡å…ƒæ¥ ","uid":"1257426","ctime":1577248136,"ip_address":"","comment_id":144637,"utype":1}],"discussion_count":2,"race_medal":0,"score":"48816628011","product_id":100026901,"comment_content":"æ€è€ƒé¢˜1ï¼š<br>ç”±äºGILé‡‡ç”¨è½®æµè¿è¡Œçº¿ç¨‹çš„æœºåˆ¶ï¼ŒGILéœ€è¦åœ¨çº¿ç¨‹ä¹‹é—´ä¸æ–­è½®æµè¿›è¡Œåˆ‡æ¢ï¼Œçº¿ç¨‹å¦‚æœè¾ƒå¤šæˆ–è¿è¡Œæ—¶é—´è¾ƒé•¿ï¼Œåˆ‡æ¢å¸¦æ¥çš„æ€§èƒ½æŸå¤±å¯èƒ½ä¼šè¶…è¿‡å•çº¿ç¨‹ã€‚<br><br>æ€è€ƒé¢˜2ï¼š<br>ä¸ªäººè§‰å¾—GILä»ç„¶æ˜¯ä¸€ç§å¥½çš„è®¾è®¡ï¼Œè™½ç„¶æŸå¤±äº†ä¸€äº›æ€§èƒ½ï¼Œä½†åœ¨ä¿è¯èµ„æºä¸å‘ç”Ÿå†²çªï¼Œé¢„é˜²æ­»é”æ–¹é¢è¿˜æ˜¯æœ‰ä¸€å®šä½œç”¨çš„ã€‚<br><br>ä»¥ä¸Šæ˜¯ä¸ªäººçš„ä¸€ç‚¹è‚¤æµ…ç†è§£ï¼Œè¯·è€å¸ˆæŒ‡æ­£ã€‚","like_count":11,"discussions":[{"author":{"id":1257426,"avatar":"https://static001.geekbang.org/account/avatar/00/13/2f/d2/0b6a8945.jpg","nickname":"Yuannanè”¡å…ƒæ¥ ","note":"","ucode":"695E183CE496A8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472045,"discussion_content":"è®²çš„ä¸é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577248136,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1757369,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d0/b9/f89ce558.jpg","nickname":"kingsley","note":"","ucode":"B5C86B601A25AA","race_medal":2,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540187,"discussion_content":"å®é™…æœ‰é‡åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639984580,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108905,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1105161,"ip_address":"","ucode":"1EECCA0F43E278","user_header":"https://static001.geekbang.org/account/avatar/00/10/dd/09/feca820a.jpg","comment_is_top":false,"comment_ctime":1561920310,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"44511593270","product_id":100026901,"comment_content":"pythonçš„å•çº¿ç¨‹å’Œå¤šçº¿ç¨‹åŒæ—¶éƒ½åªèƒ½åˆ©ç”¨ä¸€é¢—cpuæ ¸å¿ƒï¼Œå¯¹äºçº¯cpu heavyä»»åŠ¡åœºæ™¯ï¼Œä¸æ¶‰åŠåˆ°ioè€—æ—¶ç¯èŠ‚ï¼Œcpuéƒ½æ˜¯å……åˆ†åˆ©ç”¨çš„ï¼Œå¤šçº¿ç¨‹å’Œå•çº¿ç¨‹ç›¸æ¯”åå€’æ˜¯å¤šäº†çº¿ç¨‹åˆ‡æ¢çš„æˆæœ¬ï¼Œæ‰€ä»¥æ€§èƒ½åè€Œä¸å¦‚å•çº¿ç¨‹ã€‚","like_count":10},{"had_liked":false,"id":109101,"user_name":"SCAR","can_delete":false,"product_type":"c1","uid":1031209,"ip_address":"","ucode":"38C0927FA3C5FC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bc/29/022905e6.jpg","comment_is_top":false,"comment_ctime":1561962589,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"35921700957","product_id":100026901,"comment_content":"1.cpu-boundä»»åŠ¡çš„å¤šçº¿ç¨‹ç›¸æ¯”å•çº¿ç¨‹ï¼Œæ—¶é—´çš„å¢åŠ åœ¨äºé”æ·»åŠ çš„è·å–å’Œé‡Šæ”¾çš„å¼€é”€ç»“æœã€‚<br>2.è¿”å›åˆ°pythonè¯ç”Ÿçš„å¹´ä»£ï¼ŒGILç›¸å¯¹æ¥è¯´æ˜¯åˆç†è€Œä¸”æœ‰æ•ˆç‡çš„ï¼Œå®ƒæ˜“äºå®ç°ï¼Œå¾ˆå®¹æ˜“å°±æ·»åŠ åˆ°pythonä¸­ï¼Œè€Œä¸”å®ƒä¸ºå•çº¿ç¨‹ç¨‹åºæä¾›äº†æ€§èƒ½æå‡ã€‚ä»¥è‡³äºGuidoåœ¨â€œIt isn&#39;t Easy to Remove the GILâ€é‡Œé¢è¯´â€œ I&#39;d welcome a set of patches into Py3k only if the performance for a single-threaded program (and for a multi-threaded but I&#47;O-bound program) does not decreaseâ€ã€‚è€Œåˆ°ç°åœ¨ä¸ºæ­¢ï¼Œä»»ä½•å°è¯•éƒ½æ²¡æœ‰è¾¾åˆ°è¿™ä¸€æ¡ä»¶ã€‚<br><br>","like_count":8,"discussions":[{"author":{"id":1524797,"avatar":"https://static001.geekbang.org/account/avatar/00/17/44/3d/35d6670d.jpg","nickname":"Claywoow","note":"","ucode":"1F1C70BCE33536","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1176,"discussion_content":"ä¼˜ç§€çš„åŒå­¦å¯ä»¥å¤šè¯´ä¸€äº›å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562332277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171840,"user_name":"jackstraw","can_delete":false,"product_type":"c1","uid":1137207,"ip_address":"","ucode":"C967D2D6158F99","user_header":"https://static001.geekbang.org/account/avatar/00/11/5a/37/8775d714.jpg","comment_is_top":false,"comment_ctime":1579045136,"is_pvip":false,"replies":[{"id":"66785","content":"å¯¹","user_name":"ä½œè€…å›å¤","user_name_real":"Jingxiao","uid":"1259521","ctime":1579135570,"ip_address":"","comment_id":171840,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27348848912","product_id":100026901,"comment_content":"å…³äºç»•è¿‡GILçš„ç¬¬äºŒä¸ªæ–¹å¼ï¼šå°†å…³é”®çš„æ€§èƒ½ä»£ç æ”¾åˆ°åˆ«çš„è¯­è¨€ä¸­ï¼ˆé€šå¸¸C++ï¼‰å®ç°ï¼›è¿™ç§è§£å†³æ–¹å¼æŒ‡çš„æ˜¯åœ¨åˆ«çš„è¯­è¨€ä¸­ä½¿ç”¨å¤šçº¿ç¨‹çš„æ–¹å¼å¤„ç†ä»»åŠ¡ä¹ˆï¼Ÿå°±æ˜¯ä¸ç”¨pythonçš„å¤šçº¿ç¨‹ï¼Œè€Œæ˜¯åœ¨åˆ«çš„è¯­è¨€ä¸­ä½¿ç”¨å¤šçº¿ç¨‹ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1259521,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJOlibibPFEWOib8ib7RtfAtxND5FUqCxxoeTuLAbBI9ic23xuwdXT4IyiaWq3Fic9RgEAYI0lBTbEp2rcg/132","nickname":"Jingxiao","note":"","ucode":"EB966BB87132F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481531,"discussion_content":"å¯¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579135570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108921,"user_name":"farFlight","can_delete":false,"product_type":"c1","uid":1245211,"ip_address":"","ucode":"B0872D3ECBEC38","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83epbRibsic15KXfGEN3SSjnLhXGyhK2Uyrj5ibBJsKAjicNqtafDaQOLH4xpSJRZD1vmibFPJER1ySmwP9A/132","comment_is_top":false,"comment_ctime":1561937580,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"14446839468","product_id":100026901,"comment_content":"å¦å¤–ï¼Œåœ¨æµ‹è¯•ä¸åŠ é”çš„ foo å‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘è¿™é‡Œå¾ªç¯æµ‹è¯•10000æ¬¡ä¹Ÿä¸ä¼šè§åˆ°n!=100çš„æƒ…å†µï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1276373,"avatar":"https://static001.geekbang.org/account/avatar/00/13/79/d5/4a7971fc.jpg","nickname":"Ethan","note":"","ucode":"016F1DEBA895B8","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":16189,"discussion_content":"å¯ä»¥ä½¿ç”¨ Python2 è¿›è¡Œæµ‹è¯•ï¼ŒPython 3 åšäº†ç›¸åº”çš„ä¼˜åŒ–ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568875405,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221419,"user_name":"Kfreer","can_delete":false,"product_type":"c1","uid":1114448,"ip_address":"","ucode":"0B6BA0603963C3","user_header":"https://static001.geekbang.org/account/avatar/00/11/01/50/9ac4905e.jpg","comment_is_top":false,"comment_ctime":1590496738,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10180431330","product_id":100026901,"comment_content":"1åœ¨æˆ‘ä»¬å¤„ç† cpu-bound çš„ä»»åŠ¡ï¼ˆæ–‡ä¸­ç¬¬ä¸€ä¸ªä¾‹å­ï¼‰æ—¶ï¼Œä¸ºä»€ä¹ˆæœ‰æ—¶å€™ä½¿ç”¨å¤šçº¿ç¨‹ä¼šæ¯”å•çº¿ç¨‹è¿˜è¦æ…¢äº›ï¼Ÿ<br>ç­”ï¼šç”±äºCPythonä¸­GILçš„å­˜åœ¨ï¼ˆè¿è¡Œçº¿ç¨‹å‰éœ€è¦å…ˆè·å–GILï¼‰ï¼Œæ‰€ä»¥å³ä¾¿æ˜¯å¤šçº¿ç¨‹è¿è¡Œï¼ŒåŒä¸€æ—¶åˆ»ä¹Ÿåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œä¸”åˆ‡çº¿ç¨‹ä¹‹é—´åˆ‡æ¢æ—¶è¿˜è¦æ¶ˆè€—ä¸€éƒ¨åˆ†èµ„æºã€‚è¿™å°±å¯¼è‡´cpuå¯†é›†å‹ä»»åŠ¡ä¸‹å¤šçº¿ç¨‹åè€Œæ²¡æœ‰å•çº¿ç¨‹è¿è¡Œçš„å¿«ã€‚<br><br>2ä½ è§‰å¾— GIL æ˜¯ä¸€ä¸ªå¥½çš„è®¾è®¡å—ï¼Ÿäº‹å®ä¸Šï¼Œåœ¨ Python 3 ä¹‹åï¼Œç¡®å®æœ‰å¾ˆå¤šå…³äº GIL æ”¹è¿›ç”šè‡³æ˜¯å–æ¶ˆçš„è®¨è®ºï¼Œä½ çš„çœ‹æ³•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä½ åœ¨å¹³å¸¸å·¥ä½œä¸­æœ‰è¢« GIL å›°æ‰°è¿‡çš„åœºæ™¯å—ï¼Ÿ<br>ç­”ï¼šä¸æ˜¯ä¸€ä¸ªå¥½çš„è®¾è®¡ï¼Œä»…ä»…æ˜¯ç®€åŒ–äº†è§£é‡Šå™¨çš„è®¾è®¡ï¼Œä¸”å¹¶æ²¡æœ‰è§£å†³çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ã€‚<br><br>æ€»ç»“ï¼šCPUå¯†é›†å‹ä»»åŠ¡ç”¨å¤šè¿›ç¨‹å¹¶è¡Œå¤„ç†ï¼ˆCPUéœ€å¤šæ ¸ï¼‰ï¼ŒI&#47;Oå¯†é›†å‹ä»»åŠ¡ç”¨åç¨‹ï¼Œç†è®ºä¸Šåç¨‹æ¯”å¤šçº¿ç¨‹çš„æ•ˆç‡è¿˜è¦é«˜ã€‚","like_count":2},{"had_liked":false,"id":109125,"user_name":"ç¨‹åºå‘˜äººç”Ÿ","can_delete":false,"product_type":"c1","uid":1113668,"ip_address":"","ucode":"C5C5073D89AAA2","user_header":"https://static001.geekbang.org/account/avatar/00/10/fe/44/3e3040ac.jpg","comment_is_top":false,"comment_ctime":1561966946,"is_pvip":false,"discussion_count":8,"race_medal":0,"score":"10151901538","product_id":100026901,"comment_content":"t1 = Thread(target=CountDown, args=[n &#47;&#47; 2]) è€å¸ˆï¼Œè¿™æ®µä»£ç é‡Œé¢n&#47;&#47;2æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1199670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/4e/36/de029ebf.jpg","nickname":"ğŸ¬Innocence","note":"","ucode":"7CBAB4976FACE0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38664,"discussion_content":"å› ä¸ºThreadåçš„argsæ¥å—çš„å‚æ•°å¿…é¡»æ˜¯ä¸ªiteratorï¼Œä¹Ÿå°±æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥ç”¨liståŒ…è£¹èµ·æ¥é‡Œé¢ï¼Œå†åœ¨é‡Œé¢åˆ†æˆä¸¤ä»½åšä¸¤ä¸ªçº¿ç¨‹çš„å¤„ç†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1571815382,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1919541,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/4a/35/66caeed9.jpg","nickname":"å®Œç¾åšæŒ","note":"","ucode":"AE0261D8DDEF64","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1199670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/4e/36/de029ebf.jpg","nickname":"ğŸ¬Innocence","note":"","ucode":"7CBAB4976FACE0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":310443,"discussion_content":"æˆ‘ä¸å¤ªæ‡‚ä¸ºä»€ä¹ˆ Thread åçš„ args å¿…é¡»æ˜¯è¿­ä»£å™¨ï¼Œæˆ‘æŸ¥äº†å®˜æ–¹æ–‡æ¡£å¥½åƒæ˜¯è¯´â€œargs is the argument tupleâ€\nclass threading.Thread(group=None, target=None, name=None, args=(), kwargs={}, *, daemon=None)\nargs is the argument tuple for the target invocation. Defaults to ().","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1601852919,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":38664,"ip_address":""},"score":310443,"extra":""}]},{"author":{"id":1126441,"avatar":"https://static001.geekbang.org/account/avatar/00/11/30/29/d6816ebf.jpg","nickname":"å°ä¾ é¾™æ—‹é£","note":"","ucode":"073F3924A99835","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1232,"discussion_content":"åœ°æ¿é™¤ï¼Œå‘ä¸‹å–æ•´","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1562420930,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1113668,"avatar":"https://static001.geekbang.org/account/avatar/00/10/fe/44/3e3040ac.jpg","nickname":"ç¨‹åºå‘˜äººç”Ÿ","note":"","ucode":"C5C5073D89AAA2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":977,"discussion_content":"è‡ªå·±å›ç­”ï¼š//ç®—æœ¯è¿ç®—ç¬¦æ˜¯ å–æ•´é™¤ - å‘ä¸‹å–æ¥è¿‘é™¤æ•°çš„æ•´æ•°\nä¾‹å­ï¼š\n>>> 9//2\n4\n>>> -9//2\n-5","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1562216718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1914504,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/36/88/20b6a6ee.jpg","nickname":"Simon","note":"","ucode":"A8A2E3E57BD029","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":220626,"discussion_content":"æœ¬æ¥æ€»çš„ä»»åŠ¡æ˜¯nï¼Œå¼€å¯äº†ä¸¤ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹çš„ä»»åŠ¡é‡å°±æ˜¯æ€»çš„ä¸€åŠï¼šn//2","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585908914,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1341402,"avatar":"https://static001.geekbang.org/account/avatar/00/14/77/da/54c663f3.jpg","nickname":"WingÂ·ä¸‰é‡‘","note":"","ucode":"6B9F5822C3717F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":962,"discussion_content":"a // b ç›¸å½“äº numpy.ceil(a / b)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562209842,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1242702,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f6/4e/0066303c.jpg","nickname":"cuikt","note":"","ucode":"9A1DB426CEFEEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":849,"discussion_content":"// è¡¨ç¤ºå–ç»å¯¹å€¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562121008,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1105161,"avatar":"https://static001.geekbang.org/account/avatar/00/10/dd/09/feca820a.jpg","nickname":"helloworld","note":"","ucode":"1EECCA0F43E278","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":701,"discussion_content":"å¹³å‡åˆ†æˆä¸¤ä»½æ•°æ®ï¼Œç”¨æ¥ç»™ä¸¤ä¸ªçº¿ç¨‹åˆ†åˆ«æ‰§è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561970174,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":247964,"user_name":"å¼ å·¡","can_delete":false,"product_type":"c1","uid":1984969,"ip_address":"","ucode":"500B6A68C325B9","user_header":"","comment_is_top":false,"comment_ctime":1599958143,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5894925439","product_id":100026901,"comment_content":"è¿™æ˜¯mackbookè¢«é»‘çš„æœ€æƒ¨çš„ä¸€æ¬¡ï¼Œå“ˆå“ˆå“ˆ","like_count":2},{"had_liked":false,"id":141115,"user_name":"è‡ªç”±æ°‘","can_delete":false,"product_type":"c1","uid":1346236,"ip_address":"","ucode":"435C67531697F1","user_header":"https://static001.geekbang.org/account/avatar/00/14/8a/bc/cb39ed38.jpg","comment_is_top":false,"comment_ctime":1571116803,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5866084099","product_id":100026901,"comment_content":"æ€è€ƒé¢˜<br>1.çº¿ç¨‹åˆ‡æ¢æœ‰å¼€é”€æˆæœ¬ï¼Œå¦å¤–æœ€ä¸»è¦æ˜¯ç”±äºGILçš„å­˜åœ¨ä½¿pythonçš„å¹¶è¡Œä¸ºä¼ªå¹¶è¡Œã€‚<br>2.æˆ‘è§‰å¾—ä¸æ˜¯å¥½è®¾è®¡ï¼Œåƒæˆ´ç€é•£é“è·³èˆï¼Œå¥½å¤„ä»…ä»…æ˜¯ç®€åŒ–äº†è§£é‡Šå™¨çš„è®¾è®¡ã€‚è€Œä¸”å®ƒå¹¶ä¸èƒ½å®Œå…¨è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚ä½†æˆ‘å¹³æ—¶å¾ˆå°‘ç”¨å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œæ‰€ä»¥è¿˜æ²¡æœ‰å®é™…ä½“ä¼šã€‚è€Œåƒè§£é‡Šå™¨è¿™æ ·çš„åŸºç¡€è®¾æ–½åº”è¯¥æ˜¯æŠŠè„æ´»ç•™ç»™è‡ªå·±ï¼Œå°½é‡å‡å°‘ç”¨æˆ·çš„å¤æ‚æ€§ã€‚ç±»ä¼¼è¿˜æœ‰ä»python2åˆ°python3çš„å¤§å˜åŠ¨ã€‚","like_count":1},{"had_liked":false,"id":109122,"user_name":"ç¨‹åºå‘˜äººç”Ÿ","can_delete":false,"product_type":"c1","uid":1113668,"ip_address":"","ucode":"C5C5073D89AAA2","user_header":"https://static001.geekbang.org/account/avatar/00/10/fe/44/3e3040ac.jpg","comment_is_top":false,"comment_ctime":1561966475,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5856933771","product_id":100026901,"comment_content":"é€šè¿‡è€å¸ˆçš„è®²è§£ï¼Œæˆ‘è§‰å¾—GILæœ‰ç‚¹åƒjavaçš„Synchronized ç›‘è§†å™¨é”ï¼ŒåŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹è·å¾—ç›‘è§†å™¨é”ã€‚æ‰€ä»¥çº¿ç¨‹çš„é¢‘ç¹åˆ‡æ¢ï¼Œä¼šå¢åŠ CPUå¼€é”€ï¼Œå¯¼è‡´å¤šçº¿ç¨‹åè€Œé€Ÿåº¦å˜æ…¢ã€‚","like_count":1},{"had_liked":false,"id":346995,"user_name":"Aå›","can_delete":false,"product_type":"c1","uid":1940105,"ip_address":"","ucode":"FE96F089C2312C","user_header":"https://static001.geekbang.org/account/avatar/00/1d/9a/89/babe8b52.jpg","comment_is_top":false,"comment_ctime":1653609977,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1653609977","product_id":100026901,"comment_content":"å¦‚æœæ˜¯é€šè¿‡Threadingåˆ›å»ºå¤šçº¿ç¨‹ï¼Œå¤šçº¿ç¨‹è·‘python APIå°è£…çš„C++ç¨‹åºï¼Œè¿™æ ·æ˜¯å—é™GILçš„ã€‚è€ŒæŠŠåˆ›å»ºå¤šçº¿ç¨‹çš„å·¥ä½œæ”¾åˆ°C++ç¨‹åºé‡Œï¼Œå°±ä¸è¢«GILæ‰€ç´¯äº†ã€‚","like_count":0},{"had_liked":false,"id":310219,"user_name":"é”‹","can_delete":false,"product_type":"c1","uid":1948762,"ip_address":"","ucode":"61A3ACB1D14CAF","user_header":"https://static001.geekbang.org/account/avatar/00/1d/bc/5a/855160ca.jpg","comment_is_top":false,"comment_ctime":1630551901,"is_pvip":true,"discussion_count":0,"race_medal":2,"score":"1630551901","product_id":100026901,"comment_content":"check_intervalæœ‰å¯èƒ½å¯¼è‡´çº¿ç¨‹é¥¿æ­»å—","like_count":0},{"had_liked":false,"id":283813,"user_name":"sugar","can_delete":false,"product_type":"c1","uid":2184057,"ip_address":"","ucode":"491906283FC13B","user_header":"https://static001.geekbang.org/account/avatar/00/21/53/79/327ef30e.jpg","comment_is_top":false,"comment_ctime":1615945723,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1615945723","product_id":100026901,"comment_content":"å¤„ç†è®¡ç®—å¯†é›†ä»»åŠ¡ï¼Œå¤šçº¿ç¨‹çš„æ¥å›åˆ‡æ¢æ¶ˆè€—èµ„æºï¼Œæ‰€ä»¥ä¸åŠå•çº¿ç¨‹","like_count":0},{"had_liked":false,"id":282887,"user_name":"zys","can_delete":false,"product_type":"c1","uid":2508685,"ip_address":"","ucode":"594399D8EA484D","user_header":"https://static001.geekbang.org/account/avatar/00/26/47/8d/5d2f4acd.jpg","comment_is_top":false,"comment_ctime":1615452341,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615452341","product_id":100026901,"comment_content":"ä¸€æ ¸å¿ƒçš„cpuå¯¹åº”ä¸€ä¸ªå®Œç¾çš„pythonæ‰§è¡Œ.<br>éœ€è¦å¤šæ ¸å¿ƒå¹¶è¡Œ,å¤šå¼€,æˆ–è€…è°ƒç”¨,å…¶ä»–åº“æ¥ä½¿ç”¨å°±è¡Œäº†,,æœ¬è´¨æ¥è®²,gilä¹ æƒ¯äº†,ä¹Ÿæ²¡ä»€ä¹ˆå•Š ","like_count":0},{"had_liked":false,"id":175629,"user_name":"è‹¹æœ","can_delete":false,"product_type":"c1","uid":1761988,"ip_address":"","ucode":"5D0FA9D8560FD8","user_header":"https://static001.geekbang.org/account/avatar/00/1a/e2/c4/25acaa38.jpg","comment_is_top":false,"comment_ctime":1580785886,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1580785886","product_id":100026901,"comment_content":"è‡ªå·±çš„æ¯”å–»ç†è§£<br>1ï¼Œå•çº¿ç¨‹ï¼Œæœ‰è¯­æ–‡ï¼ˆ1ï¼‰ï¼Œæ•°å­¦ï¼ˆ2ï¼‰ï¼Œè‹±è¯­ï¼ˆ3ï¼‰ä½œä¸šï¼ŒæŒ‰ç…§é¡ºåº123å†™é—®ä½œä¸š<br>2ï¼Œå¤šçº¿ç¨‹ï¼Œåœ¨Cpythonè§£é‡Šå™¨ç§ï¼Œæœ‰GILå­˜åœ¨ï¼ŒæŒ‰ç…§check interval æœºåˆ¶ï¼Œæ˜¯è¯­æ–‡ä½œä¸šå†™5åˆ†é’Ÿï¼Œæ¢ç€æ•°å­¦ä½œä¸šå†™5åˆ†é’Ÿï¼Œè‹±è¯­5åˆ†é’Ÿï¼Œåœ¨æ¢ç€è¯­æ–‡å†™ï¼šçº¿ç¨‹é˜»å¡çš„æƒ…å†µï¼Œç†è§£ä¸ºæ•°å­¦æœ‰é“é¢˜ç›®å¾ˆéš¾ï¼Œï¼ˆI&#47;Oå¯†é›†ï¼‰æå‰ä¸åšï¼Œé‡Šæ”¾å‡ºæ¥ï¼Œ<br>3ï¼Œå¤šè¿›ç¨‹ï¼Œæ‰¾ä¸¤ä¸ªäººå¸®å¿™åšï¼Œä¸‰ä¸ªäººåˆ†åˆ«åšè¯­æ–‡ï¼Œæ•°å­¦ï¼Œè‹±è¯­ï¼Œæœ€åå®Œæˆçš„ç®—ç»ˆæ­¢æ—¶é—´ï¼Œ<br>çº¿ç¨‹å®‰å…¨ç†è§£ä¸ºï¼Œåšè¯­æ–‡ä½œä¸šæ—¶ï¼Œä¸éœ€è¦ç”¨åˆ°æ•°å­¦ä½œä¸šé‡Œçš„èµ„æ–™ï¼Œå·¥å…·ï¼Œ","like_count":0},{"had_liked":false,"id":153899,"user_name":"Paul Shan","can_delete":false,"product_type":"c1","uid":1593140,"ip_address":"","ucode":"32D99989028284","user_header":"","comment_is_top":false,"comment_ctime":1574327887,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574327887","product_id":100026901,"comment_content":"GILåœ¨Pythonä½œä¸ºè„šæœ¬æˆ–è€…å®¢æˆ·ç«¯ç¨‹åºæ²¡é—®é¢˜ï¼Œä½œä¸ºé«˜æ€§èƒ½ç¨‹åºå¤šå°‘æœ‰ç‚¹é—®é¢˜ã€‚å½“å¼•å…¥åç¨‹åï¼Œå¹¶å‘è¢«å¾ˆå¥½å¤„ç†ï¼Œç°åœ¨åªå‰©ä¸‹å¹¶è¡Œä¸å¤ªç†æƒ³ï¼Œç”¨çš„æ˜¯å¤šè¿›ç¨‹æ¨¡å‹ï¼Œæ²¡æœ‰åˆ©ç”¨æ“ä½œç³»ç»Ÿæœ€å°è°ƒåº¦å•å…ƒã€‚","like_count":0},{"had_liked":false,"id":153892,"user_name":"Paul Shan","can_delete":false,"product_type":"c1","uid":1593140,"ip_address":"","ucode":"32D99989028284","user_header":"","comment_is_top":false,"comment_ctime":1574326622,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574326622","product_id":100026901,"comment_content":"Python å¤šçº¿ç¨‹æ˜¯ä¼ªå¤šçº¿ç¨‹ã€‚","like_count":0},{"had_liked":false,"id":140418,"user_name":"æ‰¶å¹½","can_delete":false,"product_type":"c1","uid":1322612,"ip_address":"","ucode":"1400EDFF8970D3","user_header":"https://static001.geekbang.org/account/avatar/00/14/2e/74/88c613e0.jpg","comment_is_top":false,"comment_ctime":1570935766,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570935766","product_id":100026901,"comment_content":"ç¬¬ä¸€é—®ï¼šå› ä¸ºPythonä¸­æœ‰GILçš„å­˜åœ¨ï¼Œä½¿å¾—åœ¨æ¯ä¸€ä¸ªæ—¶åˆ»éƒ½åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è¿è¡Œã€‚å¦‚æœå¼ºè¡Œä½¿ç”¨å¤šçº¿ç¨‹çš„è¯ï¼Œçº¿ç¨‹çš„åˆ‡æ¢å›è€—è´¹é¢å¤–çš„èµ„æºï¼Œæ‰€æœ‰è¿è¡Œæ›´æ…¢ï¼›<br>ç¬¬äºŒé—®ï¼šæœ‰ï¼Œä½¿ç”¨Pythonç¼–å†™çš„æœ‰é™å…ƒæ•°å€¼ç¨‹åºè¿ç®—å¾ˆæ…¢ï¼Œè€Œä¸”å½“æ—¶ä¹Ÿä¸æ‡‚ä»€ä¹ˆçº¿ç¨‹å®‰ä¸å®‰å…¨ï¼Œä¹Ÿä¸ä¼šåŠ é”ï¼Œæœ€åç®—å‡ºæ¥çš„ç»“æœæ€ä¹ˆéƒ½è·Ÿæ ‡å‡†ç­”æ¡ˆå¯¹ä¸ä¸Šã€‚<br>:-P","like_count":0},{"had_liked":false,"id":135986,"user_name":"djfhchdh","can_delete":false,"product_type":"c1","uid":1484184,"ip_address":"","ucode":"E71D75328CE398","user_header":"https://static001.geekbang.org/account/avatar/00/16/a5/98/a65ff31a.jpg","comment_is_top":false,"comment_ctime":1569321055,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1569321055","product_id":100026901,"comment_content":"1ã€çº¿ç¨‹åˆ‡æ¢å¯¹æ€§èƒ½æœ‰æ¶ˆè€—      2ã€GILçš„è®¾è®¡æ–¹ä¾¿äº†CPythonçš„ç¼–å†™ï¼Œä½†æ˜¯å¯¹ä½¿ç”¨è€…ä¸å¤ªå‹å¥½","like_count":0},{"had_liked":false,"id":134477,"user_name":"Hector","can_delete":false,"product_type":"c1","uid":1496889,"ip_address":"","ucode":"110CAF87ADDC01","user_header":"https://static001.geekbang.org/account/avatar/00/16/d7/39/6698b6a9.jpg","comment_is_top":false,"comment_ctime":1568854210,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568854210","product_id":100026901,"comment_content":"æˆ‘æœ‰ä¸ªé—®é¢˜ï¼Œå¤šæ ¸cpuä¸‹çš„å¤šçº¿ç¨‹æ¯”å•æ ¸cpuä¸‹çš„å¤šçº¿ç¨‹(å‡è®¾ä¸€ä¸ªè¿›ç¨‹)çš„æ•ˆç‡æ˜¯æ›´ä½çš„ï¼ŒåŸå› æ˜¯çº¿ç¨‹é¢ ç°¸ã€‚è€å¸ˆèƒ½è§£é‡Šä¸‹çº¿ç¨‹é¢ ç°¸ä¹ˆ?å¤šæ ¸cpuä¸‹çš„å¤šçº¿ç¨‹GILæ˜¯æ€ä¹ˆé‡Šæ”¾çš„ï¼Œå…¶ä»–çº¿ç¨‹æ˜¯æ€ä¹ˆäº‰å¤ºçš„?","like_count":0},{"had_liked":false,"id":122572,"user_name":"Nick","can_delete":false,"product_type":"c1","uid":1621048,"ip_address":"","ucode":"F6AF580DC1DCBB","user_header":"https://static001.geekbang.org/account/avatar/00/18/bc/38/de0b8d90.jpg","comment_is_top":false,"comment_ctime":1565426374,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1565426374","product_id":100026901,"comment_content":"è€å¸ˆï¼Œæƒ³è¯·æ•™ä¸€ä¸‹ï¼šæ–‡ä¸­åœ¨â€œPython çš„çº¿ç¨‹å®‰å…¨â€çš„ä¸€èŠ‚ä¸­ï¼Œä»¥fooå‡½æ•°çš„å­—èŠ‚ç ä¸ºä¾‹ï¼Œè¯´â€œè¿™å››è¡Œ bytecode ä¸­é—´éƒ½æ˜¯æœ‰å¯èƒ½è¢«æ‰“æ–­çš„â€ã€‚æˆ‘è§‰å¾—ï¼Œå³ä½¿æ¯”å¦‚åœ¨æŸè¡Œbytecodeæ‰§è¡Œå®Œä¹‹åçº¿ç¨‹è¢«æ‰“æ–­äº†ï¼Œç­‰è¿™ä¸ªçº¿ç¨‹é‡æ–°è·å¾—GILåä¸æ˜¯ä¼šç»§ç»­æ¥ç€æ‰§è¡Œåé¢çš„bytecodeå—ï¼Œå› æ­¤ä»ç»“æœçœ‹ï¼Œæœ€ç»ˆæ¯ä¸€æ¡bytecodeéƒ½è¢«æ‰§è¡Œå®Œäº†ï¼Œé‚£ä¹ˆå¯¹ç»“æœåº”è¯¥æ˜¯ä¸ä¼šæœ‰å½±å“çš„å‘€ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1200713,"avatar":"https://static001.geekbang.org/account/avatar/00/12/52/49/23a6ea52.jpg","nickname":"å¶å­","note":"","ucode":"4B043DE31345C2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307574,"discussion_content":"å¯¹çš„ã€‚åŒæ„æ¥¼ä¸Šã€‚æœ‰å¯èƒ½æ˜¯è¿˜åœ¨å¯„å­˜å™¨ä¸­ï¼Œæ²¡æœ‰æ¥å¾—åŠå­˜åˆ°å†…å­˜ï¼Œæ¯”å¦‚99ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹è¯»å–çš„å€¼å°±æ˜¯ä¹‹å‰çº¿ç¨‹æ²¡åŠ ä¹‹å‰çš„å€¼88ï¼Œç„¶åå¤„ç†å®Œï¼Œå­˜åˆ°äº†å†…å­˜ä¸º99ï¼Œè€Œä¹‹å‰çš„çº¿ç¨‹å°±å°†ä¹‹å‰æ²¡å­˜çš„å€¼99å­˜è¿›å»äº†ã€‚è¿™ä¸ªæ—¶å€™ç»“æœå°±ä¸å¯¹äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600689246,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1019736,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8f/58/08e4d923.jpg","nickname":"éº»èŠ±","note":"","ucode":"67721A5F0C9EC7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6755,"discussion_content":">>> import dis\n>>> dis.dis(foo)\nLOAD_GLOBAL 0 (n)\nLOAD_CONST 1 (1)\nINPLACE_ADD\nSTORE_GLOBAL 0 (n)\n\næ¯”å¦‚å½“å‰n=98 åŠ 1åä¸º99ï¼Œè¿è¡Œåˆ°store_globalçš„æ—¶å€™è¢«æ‰“æ–­ï¼Œ99çš„å€¼æ²¡æœ‰ä¿å­˜åˆ°nï¼Œæ–°çº¿ç¨‹è·‘çš„æ—¶å€™nè¿˜æ˜¯98ï¼Œé‚£ä¹ˆæ–°çº¿ç¨‹è·‘å®Œï¼Œnæ˜¯99ï¼Œgilç»™åˆ°è¢«ä¸­æ–­çš„çº¿ç¨‹ï¼Œè¦ä¿å­˜çš„å€¼ä¹Ÿæ˜¯99","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567084703,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117486,"user_name":"taoist","can_delete":false,"product_type":"c1","uid":1195004,"ip_address":"","ucode":"D70AFE25CD8F10","user_header":"https://static001.geekbang.org/account/avatar/00/12/3b/fc/04a75cd0.jpg","comment_is_top":false,"comment_ctime":1564058410,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1564058410","product_id":100026901,"comment_content":"1. çº¿ç¨‹åˆ‡æ¢éœ€è¦æˆæœ¬ï¼ˆCPUèµ„æºï¼‰ ï¼ŒCPUå¯†é›†åœºåˆä½¿ç”¨å¤šçº¿ç¨‹ä¼šæ›´æ…¢<br>2. åˆšå¼€å§‹æ˜¯ä¸€ä¸ªå¥½è®¾è®¡ï¼Œå¯ä»¥æ›´å¿«æ›´ç®€æ´æ›´é«˜æ•ˆçš„å®ç°ä»£ç ï¼Œåæ¥å°±æˆäº†å†å²çš„é—ç•™çš„åŒ…è¢±ï¼Œæœ‰å¤§é‡çš„åº“ä¾èµ–GIL å¸¦æ¥çš„çº¿ç¨‹å®‰å…¨ï¼ŒåºŸé™¤çš„æˆæœ¬éå¸¸é«˜ï¼Œå› æ­¤CPython åªèƒ½ä¸æ–­æ”¹è¿› GILï¼Œå¾ˆéš¾ä¸€æ¬¡æ€§å½»åº•å–æ¶ˆã€‚","like_count":0},{"had_liked":false,"id":114605,"user_name":"ä¸”å¬ç–¯åŸ","can_delete":false,"product_type":"c1","uid":1159459,"ip_address":"","ucode":"B010B16E5465F4","user_header":"https://static001.geekbang.org/account/avatar/00/11/b1/23/5df1f341.jpg","comment_is_top":false,"comment_ctime":1563348555,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563348555","product_id":100026901,"comment_content":"1. pyhtonçš„å¤šçº¿ç¨‹æŒ‰ç…§æ–‡ä¸­æ‰€è¯´çš„å®é™…ä¸Šè¿˜æ˜¯å•çº¿ç¨‹çš„å®ç°ï¼Œè¡¨é¢ä¸Šä½¿ç”¨äº†pythonçš„å¤šçº¿ç¨‹ï¼Œä½†å®é™…è¿˜æ˜¯å•çº¿è¿è¡Œï¼Œç›¸æ¯”è¾ƒå•çº¿ç¨‹è€Œè¨€è¿˜å¤šäº†è®¸å¤šè¿›ç¨‹åˆ‡æ¢çš„é”çš„å¼€é”€ï¼Œå› æ­¤å¤šçº¿ç¨‹ç‰ˆæœ¬åè€Œæ¯”å•çº¿ç¨‹ç‰ˆæœ¬è¦æ…¢ã€‚","like_count":0},{"had_liked":false,"id":113862,"user_name":"è´ºå®‡","can_delete":false,"product_type":"c1","uid":1445040,"ip_address":"","ucode":"55854825CC4AD2","user_header":"https://static001.geekbang.org/account/avatar/00/16/0c/b0/26c0e53f.jpg","comment_is_top":false,"comment_ctime":1563174727,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1563174727","product_id":100026901,"comment_content":"å’Œrubyä¸€æ ·","like_count":0},{"had_liked":false,"id":110528,"user_name":"Ben","can_delete":false,"product_type":"c1","uid":1252353,"ip_address":"","ucode":"70351D4FAE47F7","user_header":"https://static001.geekbang.org/account/avatar/00/13/1c/01/5aaaf5b6.jpg","comment_is_top":false,"comment_ctime":1562290102,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562290102","product_id":100026901,"comment_content":"1. å¤šçº¿ç¨‹é€‚åˆå¤„ç†å¤šä¸ªç‹¬ç«‹çš„å­ä»»åŠ¡, å¦‚æœnæ˜¯åˆ—è¡¨, é‚£ä¹ˆå¤šçº¿ç¨‹&#47;å¤šè¿›ç¨‹å¯ä»¥å¤§å¤§å‡å°‘æ‰§è¡Œæ—¶é—´. ä½†æ˜¯é’ˆå¯¹å•ä¸ªæ•°å­—nçš„è®¡ç®—, å¤šçº¿ç¨‹è®¡ç®—æ—¶å˜é‡n, å¯ä»¥è§†ä¸ºè¢«ç«äº‰çš„èµ„æº, ä¼šlockä½éæ‰§è¡Œçº¿ç¨‹, GILæœºåˆ¶ä¼šcheck_interval, å¼ºåˆ¶æ›´æ¢ä¸ºå…¶ä»–çº¿ç¨‹, é¢å¤–å¢åŠ äº†æ‰§è¡Œæ—¶é—´. å½¢è±¡æ¥è¯´, å°±æ˜¯ä¸€ä¸ªäººè¦å¹²çš„æ´», éè¦å‡ ä¸ªäººä¸€èµ·å¹², ä¸€ä¸ªäººå¹²çš„æ—¶å€™. å…¶ä»–äººåªèƒ½å¹²çœ‹ç€, GILæ¢äººæ—¶, è¿˜è¦é¢å¤–çš„æ—¶é—´.<br>2. æ¯ä¸€ç§è®¾è®¡éƒ½æ˜¯ä¸ºäº†è§£å†³é—®é¢˜è®¾è®¡çš„, I&#47;Oæ…¢æ—¶ä½¿ç”¨asyncio, ä¹Ÿå°±æ˜¯GILé€‚åˆçš„åœºæ™¯. ä½†æ˜¯I&#47;Oå¿«æ—¶, é€‚åˆå¤šçº¿ç¨‹, æ­¤æ—¶GILèƒ½å»æ‰å°±å¥½äº†","like_count":0},{"had_liked":false,"id":110515,"user_name":"æ±ªzZ","can_delete":false,"product_type":"c1","uid":1234757,"ip_address":"","ucode":"8B93062A683902","user_header":"https://static001.geekbang.org/account/avatar/00/12/d7/45/d1621188.jpg","comment_is_top":false,"comment_ctime":1562288931,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1562288931","product_id":100026901,"comment_content":"1.åœ¨ç¬¬ä¸€ä¾‹å­ä¸­å¤šçº¿ç¨‹é—´åˆ‡æ¢éœ€è¦æ—¶é—´ï¼Œæ‰€ä»¥å¤šçº¿ç¨‹æ¯”å•çº¿ç¨‹æ…¢ã€‚<br>2.å…³äºæ€è€ƒé¢˜2ï¼Œæˆ‘æœ€è¿‘åœ¨å†™ä¸€ä¸ªGUIï¼Œå·¦è¾¹éœ€è¦å®æ—¶æ˜¾ç¤ºæ‘„åƒå¤´ï¼Œå³è¾¹åšä¸€äº›å¸¸è§„å¤„ç†ã€‚ç”¨çš„æ˜¯tkï¼Œå·¦è¾¹æ‘„åƒå¤´å¤šçº¿ç¨‹æ˜¾ç¤ºï¼Œç›´æ¥ç”¨å¤šçº¿ç¨‹æ‘„åƒå¤´è§†é¢‘ä¼šé—ªï¼Œç„¶åç”¨tkçš„updateæ›´æ–°æ‘„åƒå¤´æ˜¾ç¤ºï¼Œå›¾åƒä¼šç¨å¾®å¡é¡¿ã€‚<br>èƒ½ä¸èƒ½æŒ‡ç‚¹ä¸€ä¸‹ï¼Œæ€ä¹ˆæ‰èƒ½åœ¨ç•Œé¢ä¸Šå·¦è¾¹æ˜¾ç¤ºæ‘„åƒå¤´ä¸å¡ä¸é—ªï¼Ÿ","like_count":0},{"had_liked":false,"id":109934,"user_name":"Redevil","can_delete":false,"product_type":"c1","uid":1527609,"ip_address":"","ucode":"21C90472DC6357","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PrKSgib1DcguTZYoOAqNw8tpLKylQU6dQPwI4NLJkd6344EWHaLF5yHe6PpAD6fsxSm0no7qiakiaEHUYw4nzTEyw/132","comment_is_top":false,"comment_ctime":1562136606,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1562136606","product_id":100026901,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œé—®ä¸ªä¸€ç›´æƒ³é—®çš„é—®é¢˜ï¼š<br>å‡è®¾æœ‰ä¸€ä¸ªæœ€ç®€å•çš„pythonç¨‹åºï¼Œcpu-boundï¼Œæ¯”å¦‚å¾ªç¯printä»é›¶åˆ°10äº¿ã€‚<br>æˆ‘çš„æœºå™¨æ˜¯Linuxç³»ç»Ÿï¼Œ4æ ¸å¿ƒCPUã€‚<br>æˆ‘å¼€ä¸¤ä¸ªterminalçª—å£ï¼Œæ¯ä¸ªçª—å£éƒ½è·‘è¿™ä¸ªç¨‹åºã€‚<br>è¿™ä¸ªæ—¶å€™ä¸¤ä¸ªç¨‹åºä¼šç›¸äº’å½±å“å—ï¼Ÿè¿™ä¸ªæ¶‰åŠåˆ°äº†GILå—ï¼Ÿ<br>ä¸¤ä¸ªç¨‹åºåŒæ—¶è·‘å’Œåªè·‘ä¸€ä¸ªç¨‹åºï¼Œæ‰§è¡Œæ—¶é—´ä¸Šä¼šæœ‰å¾ˆå¤§å¢åŠ å—ï¼Ÿ<br>è°¢è°¢ï¼","like_count":0,"discussions":[{"author":{"id":2467189,"avatar":"https://static001.geekbang.org/account/avatar/00/25/a5/75/123bab9e.jpg","nickname":"einslssac","note":"","ucode":"BE4D19B6F30E9A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":356133,"discussion_content":"Linuxä¸‹é¢çš„shellï¼Œæ¯å•ç‹¬å¼€ä¸ªshellå…¶è¿è¡Œç¯å¢ƒéƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œå°½ç®¡ä½ ä¸¤ä¸ªshellè¿è¡Œçš„æ˜¯æºç ä¸€æ ·çš„ç¨‹åºï¼Œä½ è®¤ä¸ºæ˜¯åŒä¸€ä¸ªè¿›ç¨‹ï¼Œå®é™…ä¸Šç›¸å½“äºåœ¨ä¸åŒç¯å¢ƒé‡Œé¢è·‘ä¸åŒç¨‹åºï¼Œä¸¤ä¸ªç¨‹åºå®Œå…¨æ²¡å…³ç³»ï¼Œæ—¢ä¸æ˜¯å¤šçº¿ç¨‹ä¹Ÿä¸æ˜¯å¤šè¿›ç¨‹ï¼Œä»…ä»…æ˜¯ä¸¤ä¸ªç¨‹åºè€Œå·²ï¼›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615537826,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1346236,"avatar":"https://static001.geekbang.org/account/avatar/00/14/8a/bc/cb39ed38.jpg","nickname":"è‡ªç”±æ°‘","note":"","ucode":"435C67531697F1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":33373,"discussion_content":"å¼€ä¸¤ä¸ªç»ˆç«¯çª—å£æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼Œäº’ä¸å½±å“å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571118126,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109432,"user_name":"18646333118","can_delete":false,"product_type":"c1","uid":1202411,"ip_address":"","ucode":"35576AC4E5ADDD","user_header":"https://static001.geekbang.org/account/avatar/00/12/58/eb/cf3608bd.jpg","comment_is_top":false,"comment_ctime":1562031944,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1562031944","product_id":100026901,"comment_content":"import sys<br>a = []<br>b = a<br>c = b<br>sys.getrefcount(a)<br>ç»“æœ:4<br>è€å¸ˆè¯·æ•™ä¸‹ï¼Œåœ¨16è¯¾å°†çš„å˜é‡èµ‹å€¼é‚£ç« è¯´ a =b è¿™æ ·ç›¸å½“äºaæŒ‡å‘å¯¹è±¡ï¼Œbä¹ŸæŒ‡å‘å¯¹è±¡ ã€‚é‚£è¿™é‡Œä¸ºä»€ä¹ˆå­˜åœ¨å¼•ç”¨å…³ç³»é‚£<br><br>","like_count":0,"discussions":[{"author":{"id":1914504,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/36/88/20b6a6ee.jpg","nickname":"Simon","note":"","ucode":"A8A2E3E57BD029","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":220628,"discussion_content":"å¦å¤–ï¼Œsys.getrefcount(a)æ‰§è¡Œå®Œæˆåï¼Œaçš„å¼•ç”¨è®¡æ•°é‡å›åˆ°3","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585909247,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1200713,"avatar":"https://static001.geekbang.org/account/avatar/00/12/52/49/23a6ea52.jpg","nickname":"å¶å­","note":"","ucode":"4B043DE31345C2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1914504,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/36/88/20b6a6ee.jpg","nickname":"Simon","note":"","ucode":"A8A2E3E57BD029","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":307583,"discussion_content":"æˆ‘æƒ³è¯·é—®ä¸‹è¿™é‡Œå¦‚æœåŒæ—¶å¼•ç”¨aï¼Œä¸ºä»€ä¹ˆå¼•ç”¨è®¡æ•°åªå¯èƒ½å¢åŠ 1ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600691527,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":220628,"ip_address":""},"score":307583,"extra":""}]},{"author":{"id":1276373,"avatar":"https://static001.geekbang.org/account/avatar/00/13/79/d5/4a7971fc.jpg","nickname":"Ethan","note":"","ucode":"016F1DEBA895B8","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":16187,"discussion_content":"è¿™é‡Œçš„å¼•ç”¨æ˜¯å¯¹äº &#34;å¯¹è±¡&#34; æ¥è¯´çš„ï¼Œä½ æ‰€è¯´çš„ a,b,c å¯ä»¥ç†è§£æˆåˆ«åã€‚æ³¨æ„åŒºåˆ†ä¸€ä¸‹å¼•ç”¨å’Œå¯¹è±¡çš„æ¦‚å¿µã€‚è¿™é‡Œçš„ç»“æœæ˜¯ 4ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹ sys.getrefcount() çš„å®šä¹‰ï¼Œæœ¬èº«ä¹Ÿä¼šä¸´æ—¶å¼•ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568875348,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109219,"user_name":"Fergus","can_delete":false,"product_type":"c1","uid":1277066,"ip_address":"","ucode":"3A8AC741C49CEB","user_header":"https://static001.geekbang.org/account/avatar/00/13/7c/8a/bdeb76ac.jpg","comment_is_top":false,"comment_ctime":1561983152,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561983152","product_id":100026901,"comment_content":"ç­”1ã€çº¿ç¨‹åˆ‡æ¢ä¹Ÿæ˜¯æ¶ˆè€—èµ„æºçš„ï¼Œå¯¹äºcpu-boundçš„ä»»åŠ¡ï¼Œä¸åœçš„åˆ‡æ¢è¿‡ç¨‹ä¸­ä¸èƒ½æå‡æ•ˆç‡ï¼Œåè€Œæ¶ˆè€—äº†æ›´å¤šèµ„æºï¼›<br><br>ç­”2ã€æ„Ÿè§‰ä¸åº”è¯¥å–æ¶ˆï¼Œæ–‡ä¸­è€å¸ˆæåˆ°cpythonçš„åº•å±‚cä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¦‚æœå–æ¶ˆï¼Œå¯èƒ½ä¼šæå‡ä¸€å®šçš„å…¥é—¨éš¾åº¦ã€‚æ²¡æœ‰å—åˆ°å›°æ‰°ã€‚è·¯è¿‡ãƒ½( ï¿£Ğ´ï¿£;)ãƒ","like_count":0},{"had_liked":false,"id":109098,"user_name":"å“é›¨","can_delete":false,"product_type":"c1","uid":1581705,"ip_address":"","ucode":"C5FB3A3BC68F92","user_header":"https://static001.geekbang.org/account/avatar/00/18/22/89/73397ccb.jpg","comment_is_top":false,"comment_ctime":1561962009,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561962009","product_id":100026901,"comment_content":"CPU heavy çš„ä»»åŠ¡å¤šçº¿ç¨‹è¿˜è¦æœ‰åˆ‡æ¢çº¿ç¨‹çš„æ¶ˆè€—ï¼Œæ‰€ä»¥æ—¶é—´æ¯”å•çº¿ç¨‹è¿˜è¦å¤šã€‚<br>å¹³æ—¶å·¥ä½œæ²¡æœ‰ç”¨åˆ°å¤šçº¿ç¨‹ï¼Œå¼‚æ­¥æ‰§è¡Œä»»åŠ¡éƒ½æ˜¯é‡‡ç”¨celeryçš„ã€‚","like_count":0},{"had_liked":false,"id":108962,"user_name":"Hoo-Ah","can_delete":false,"product_type":"c1","uid":1306913,"ip_address":"","ucode":"823093A6C7DEE7","user_header":"https://static001.geekbang.org/account/avatar/00/13/f1/21/52e8267b.jpg","comment_is_top":false,"comment_ctime":1561942557,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561942557","product_id":100026901,"comment_content":"ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šå› ä¸ºçº¿ç¨‹åˆ‡æ¢éœ€è¦è€—è´¹ä¸€å®šçš„cpuèµ„æºï¼›<br>ç¬¬äºŒä¸ªé—®é¢˜ï¼šå¤šä¸ªçº¿ç¨‹éœ€è¦å¯¹åŒæ ·çš„æ•°æ®è¿›è¡Œä¿®æ”¹çš„æ—¶å€™åŠ é”ï¼Œä¸ºäº†æé«˜æ•ˆç‡ï¼ŒåŒä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹çš„æ—¶å€™å¯ä»¥æ”¹ä¸ºå¯é‡å…¥é”ã€‚","like_count":0},{"had_liked":false,"id":108920,"user_name":"îŒ®","can_delete":false,"product_type":"c1","uid":1322330,"ip_address":"","ucode":"FA2983C5AD320C","user_header":"https://static001.geekbang.org/account/avatar/00/14/2d/5a/cc637589.jpg","comment_is_top":false,"comment_ctime":1561937211,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561937211","product_id":100026901,"comment_content":"pythonè¿˜æ˜¯å±äºå•çº¿ç¨‹æ‰§è¡Œï¼Œcpuå¯†é›†å‹å±äºå¤§é‡è®¡ç®—ï¼Œå¤šçº¿ç¨‹åè€Œä¼šå¢åŠ çº¿ç¨‹åˆ‡æ¢å¼€é”€ï¼Œæ•ˆæœä¸å¦‚å•çº¿ç¨‹ã€‚ è€å¸ˆ:æœ‰ä¸ªé—®é¢˜ï¼Œæˆ‘åœ¨å†™flaskæ¥å£ç™»é™†æ—¶ï¼Œæˆ‘ç”¨çš„seleniumï¼Œåˆ†ä¸ºä¸¤æ­¥ï¼Œä¸€æ¨¡æ‹Ÿè·å–çŸ­ä¿¡éªŒè¯ç ï¼ŒäºŒæ¨¡æ‹Ÿè¾“å…¥éªŒè¯ç ç™»é™†ï¼Œæˆ‘æ€ä¹ˆæ–­å¼€è¿™ä¸¤ä¸ªè¯·æ±‚å‘¢ï¼Œé˜²æ­¢è·å–éªŒè¯ç åç”¨æˆ·å…³é—­æµè§ˆå™¨ï¼Œæˆ‘seleniumæ²¡å…³é—­ï¼Ÿ","like_count":0},{"had_liked":false,"id":108917,"user_name":"farFlight","can_delete":false,"product_type":"c1","uid":1245211,"ip_address":"","ucode":"B0872D3ECBEC38","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83epbRibsic15KXfGEN3SSjnLhXGyhK2Uyrj5ibBJsKAjicNqtafDaQOLH4xpSJRZD1vmibFPJER1ySmwP9A/132","comment_is_top":false,"comment_ctime":1561937145,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561937145","product_id":100026901,"comment_content":"ç¬¬ä¸€ä¸ªä¾‹å­åˆ‡æ¢è¿›ç¨‹è¿˜éœ€è¦æ—¶é—´ï¼Œå¯¼è‡´é€Ÿåº¦æ›´æ…¢å§","like_count":0}]}