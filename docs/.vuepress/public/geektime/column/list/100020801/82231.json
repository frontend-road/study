{"id":82231,"title":"42 | grantä¹‹åè¦è·Ÿç€flush privilegeså—ï¼Ÿ","content":"<p>åœ¨MySQLé‡Œé¢ï¼Œgrantè¯­å¥æ˜¯ç”¨æ¥ç»™ç”¨æˆ·èµ‹æƒçš„ã€‚ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰è§è¿‡ä¸€äº›æ“ä½œæ–‡æ¡£é‡Œé¢æåˆ°ï¼Œgrantä¹‹åè¦é©¬ä¸Šè·Ÿç€æ‰§è¡Œä¸€ä¸ªflush privilegeså‘½ä»¤ï¼Œæ‰èƒ½ä½¿èµ‹æƒè¯­å¥ç”Ÿæ•ˆã€‚æˆ‘æœ€å¼€å§‹ä½¿ç”¨MySQLçš„æ—¶å€™ï¼Œå°±æ˜¯ç…§ç€ä¸€ä¸ªæ“ä½œæ–‡æ¡£çš„è¯´æ˜æŒ‰ç…§è¿™ä¸ªé¡ºåºæ“ä½œçš„ã€‚</p><p>é‚£ä¹ˆï¼Œgrantä¹‹åçœŸçš„éœ€è¦æ‰§è¡Œflush privilegeså—ï¼Ÿå¦‚æœæ²¡æœ‰æ‰§è¡Œè¿™ä¸ªflushå‘½ä»¤çš„è¯ï¼Œèµ‹æƒè¯­å¥çœŸçš„ä¸èƒ½ç”Ÿæ•ˆå—ï¼Ÿ</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°±å…ˆå’Œä½ ä»‹ç»ä¸€ä¸‹grantè¯­å¥å’Œflush privilegesè¯­å¥åˆ†åˆ«åšäº†ä»€ä¹ˆäº‹æƒ…ï¼Œç„¶åå†ä¸€èµ·æ¥åˆ†æè¿™ä¸ªé—®é¢˜ã€‚</p><p>ä¸ºäº†ä¾¿äºè¯´æ˜ï¼Œæˆ‘å…ˆåˆ›å»ºä¸€ä¸ªç”¨æˆ·ï¼š</p><pre><code>create user 'ua'@'%' identified by 'pa';\n</code></pre><p>è¿™æ¡è¯­å¥çš„é€»è¾‘æ˜¯åˆ›å»ºä¸€ä¸ªç”¨æˆ·â€™uaâ€™@â€™%â€™ï¼Œå¯†ç æ˜¯paã€‚æ³¨æ„ï¼Œåœ¨MySQLé‡Œé¢ï¼Œç”¨æˆ·å(user)+åœ°å€(host)æ‰è¡¨ç¤ºä¸€ä¸ªç”¨æˆ·ï¼Œå› æ­¤ ua@ip1 å’Œ ua@ip2ä»£è¡¨çš„æ˜¯ä¸¤ä¸ªä¸åŒçš„ç”¨æˆ·ã€‚</p><p>è¿™æ¡å‘½ä»¤åšäº†ä¸¤ä¸ªåŠ¨ä½œï¼š</p><ol>\n<li>\n<p>ç£ç›˜ä¸Šï¼Œå¾€mysql.userè¡¨é‡Œæ’å…¥ä¸€è¡Œï¼Œç”±äºæ²¡æœ‰æŒ‡å®šæƒé™ï¼Œæ‰€ä»¥è¿™è¡Œæ•°æ®ä¸Šæ‰€æœ‰è¡¨ç¤ºæƒé™çš„å­—æ®µçš„å€¼éƒ½æ˜¯Nï¼›</p>\n</li>\n<li>\n<p>å†…å­˜é‡Œï¼Œå¾€æ•°ç»„acl_usersé‡Œæ’å…¥ä¸€ä¸ªacl_userå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡çš„accesså­—æ®µå€¼ä¸º0ã€‚</p>\n</li>\n</ol><p>å›¾1å°±æ˜¯è¿™ä¸ªæ—¶åˆ»ç”¨æˆ·uaåœ¨userè¡¨ä¸­çš„çŠ¶æ€ã€‚</p><!-- [[[read_end]]] --><p><img src=\"https://static001.geekbang.org/resource/image/7e/35/7e75bbfbca0cb932e1256941c99d5f35.png?wh=1378*1542\" alt=\"\"></p><center><span class=\"reference\">å›¾1 mysql.user æ•°æ®è¡Œ</span></center><p>åœ¨MySQLä¸­ï¼Œç”¨æˆ·æƒé™æ˜¯æœ‰ä¸åŒçš„èŒƒå›´çš„ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å°±æŒ‰ç…§ç”¨æˆ·æƒé™èŒƒå›´ä»å¤§åˆ°å°çš„é¡ºåºä¾æ¬¡å’Œä½ è¯´æ˜ã€‚</p><h1>å…¨å±€æƒé™</h1><p>å…¨å±€æƒé™ï¼Œä½œç”¨äºæ•´ä¸ªMySQLå®ä¾‹ï¼Œè¿™äº›æƒé™ä¿¡æ¯ä¿å­˜åœ¨mysqlåº“çš„userè¡¨é‡Œã€‚å¦‚æœæˆ‘è¦ç»™ç”¨æˆ·uaèµ‹ä¸€ä¸ªæœ€é«˜æƒé™çš„è¯ï¼Œè¯­å¥æ˜¯è¿™ä¹ˆå†™çš„ï¼š</p><pre><code>grant all privileges on *.* to 'ua'@'%' with grant option;\n</code></pre><p>è¿™ä¸ªgrantå‘½ä»¤åšäº†ä¸¤ä¸ªåŠ¨ä½œï¼š</p><ol>\n<li>\n<p>ç£ç›˜ä¸Šï¼Œå°†mysql.userè¡¨é‡Œï¼Œç”¨æˆ·â€™uaâ€™@â€™%'è¿™ä¸€è¡Œçš„æ‰€æœ‰è¡¨ç¤ºæƒé™çš„å­—æ®µçš„å€¼éƒ½ä¿®æ”¹ä¸ºâ€˜Yâ€™ï¼›</p>\n</li>\n<li>\n<p>å†…å­˜é‡Œï¼Œä»æ•°ç»„acl_usersä¸­æ‰¾åˆ°è¿™ä¸ªç”¨æˆ·å¯¹åº”çš„å¯¹è±¡ï¼Œå°†accesså€¼ï¼ˆæƒé™ä½ï¼‰ä¿®æ”¹ä¸ºäºŒè¿›åˆ¶çš„â€œå…¨1â€ã€‚</p>\n</li>\n</ol><p>åœ¨è¿™ä¸ªgrantå‘½ä»¤æ‰§è¡Œå®Œæˆåï¼Œå¦‚æœæœ‰æ–°çš„å®¢æˆ·ç«¯ä½¿ç”¨ç”¨æˆ·åuaç™»å½•æˆåŠŸï¼ŒMySQLä¼šä¸ºæ–°è¿æ¥ç»´æŠ¤ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡ï¼Œç„¶åä»acl_usersæ•°ç»„é‡ŒæŸ¥åˆ°è¿™ä¸ªç”¨æˆ·çš„æƒé™ï¼Œå¹¶å°†æƒé™å€¼æ‹·è´åˆ°è¿™ä¸ªçº¿ç¨‹å¯¹è±¡ä¸­ã€‚ä¹‹ååœ¨è¿™ä¸ªè¿æ¥ä¸­æ‰§è¡Œçš„è¯­å¥ï¼Œæ‰€æœ‰å…³äºå…¨å±€æƒé™çš„åˆ¤æ–­ï¼Œéƒ½ç›´æ¥ä½¿ç”¨çº¿ç¨‹å¯¹è±¡å†…éƒ¨ä¿å­˜çš„æƒé™ä½ã€‚</p><p>åŸºäºä¸Šé¢çš„åˆ†ææˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼š</p><ol>\n<li>\n<p>grant å‘½ä»¤å¯¹äºå…¨å±€æƒé™ï¼ŒåŒæ—¶æ›´æ–°äº†ç£ç›˜å’Œå†…å­˜ã€‚å‘½ä»¤å®Œæˆåå³æ—¶ç”Ÿæ•ˆï¼Œæ¥ä¸‹æ¥æ–°åˆ›å»ºçš„è¿æ¥ä¼šä½¿ç”¨æ–°çš„æƒé™ã€‚</p>\n</li>\n<li>\n<p>å¯¹äºä¸€ä¸ªå·²ç»å­˜åœ¨çš„è¿æ¥ï¼Œå®ƒçš„å…¨å±€æƒé™ä¸å—grantå‘½ä»¤çš„å½±å“ã€‚</p>\n</li>\n</ol><p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œ<strong>ä¸€èˆ¬åœ¨ç”Ÿäº§ç¯å¢ƒä¸Šè¦åˆç†æ§åˆ¶ç”¨æˆ·æƒé™çš„èŒƒå›´</strong>ã€‚æˆ‘ä»¬ä¸Šé¢ç”¨åˆ°çš„è¿™ä¸ªgrantè¯­å¥å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„é”™è¯¯ç¤ºèŒƒã€‚å¦‚æœä¸€ä¸ªç”¨æˆ·æœ‰æ‰€æœ‰æƒé™ï¼Œä¸€èˆ¬å°±ä¸åº”è¯¥è®¾ç½®ä¸ºæ‰€æœ‰IPåœ°å€éƒ½å¯ä»¥è®¿é—®ã€‚</p><p>å¦‚æœè¦å›æ”¶ä¸Šé¢çš„grantè¯­å¥èµ‹äºˆçš„æƒé™ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤ï¼š</p><pre><code>revoke all privileges on *.* from 'ua'@'%';\n</code></pre><p>è¿™æ¡revokeå‘½ä»¤çš„ç”¨æ³•ä¸grantç±»ä¼¼ï¼Œåšäº†å¦‚ä¸‹ä¸¤ä¸ªåŠ¨ä½œï¼š</p><ol>\n<li>\n<p>ç£ç›˜ä¸Šï¼Œå°†mysql.userè¡¨é‡Œï¼Œç”¨æˆ·â€™uaâ€™@â€™%'è¿™ä¸€è¡Œçš„æ‰€æœ‰è¡¨ç¤ºæƒé™çš„å­—æ®µçš„å€¼éƒ½ä¿®æ”¹ä¸ºâ€œNâ€ï¼›</p>\n</li>\n<li>\n<p>å†…å­˜é‡Œï¼Œä»æ•°ç»„acl_usersä¸­æ‰¾åˆ°è¿™ä¸ªç”¨æˆ·å¯¹åº”çš„å¯¹è±¡ï¼Œå°†accessçš„å€¼ä¿®æ”¹ä¸º0ã€‚</p>\n</li>\n</ol><h1>dbæƒé™</h1><p>é™¤äº†å…¨å±€æƒé™ï¼ŒMySQLä¹Ÿæ”¯æŒåº“çº§åˆ«çš„æƒé™å®šä¹‰ã€‚å¦‚æœè¦è®©ç”¨æˆ·uaæ‹¥æœ‰åº“db1çš„æ‰€æœ‰æƒé™ï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢è¿™æ¡å‘½ä»¤ï¼š</p><pre><code>grant all privileges on db1.* to 'ua'@'%' with grant option;\n</code></pre><p>åŸºäºåº“çš„æƒé™è®°å½•ä¿å­˜åœ¨mysql.dbè¡¨ä¸­ï¼Œåœ¨å†…å­˜é‡Œåˆ™ä¿å­˜åœ¨æ•°ç»„acl_dbsä¸­ã€‚è¿™æ¡grantå‘½ä»¤åšäº†å¦‚ä¸‹ä¸¤ä¸ªåŠ¨ä½œï¼š</p><ol>\n<li>\n<p>ç£ç›˜ä¸Šï¼Œå¾€mysql.dbè¡¨ä¸­æ’å…¥äº†ä¸€è¡Œè®°å½•ï¼Œæ‰€æœ‰æƒé™ä½å­—æ®µè®¾ç½®ä¸ºâ€œYâ€ï¼›</p>\n</li>\n<li>\n<p>å†…å­˜é‡Œï¼Œå¢åŠ ä¸€ä¸ªå¯¹è±¡åˆ°æ•°ç»„acl_dbsä¸­ï¼Œè¿™ä¸ªå¯¹è±¡çš„æƒé™ä½ä¸ºâ€œå…¨1â€ã€‚</p>\n</li>\n</ol><p>å›¾2å°±æ˜¯è¿™ä¸ªæ—¶åˆ»ç”¨æˆ·uaåœ¨dbè¡¨ä¸­çš„çŠ¶æ€ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/32/2e/32cd61ee14ad2f370e1de0fb4e39bb2e.png?wh=1400*1180\" alt=\"\"></p><center><span class=\"reference\">å›¾2 mysql.db æ•°æ®è¡Œ</span></center><p>æ¯æ¬¡éœ€è¦åˆ¤æ–­ä¸€ä¸ªç”¨æˆ·å¯¹ä¸€ä¸ªæ•°æ®åº“è¯»å†™æƒé™çš„æ—¶å€™ï¼Œéƒ½éœ€è¦éå†ä¸€æ¬¡acl_dbsæ•°ç»„ï¼Œæ ¹æ®userã€hostå’Œdbæ‰¾åˆ°åŒ¹é…çš„å¯¹è±¡ï¼Œç„¶åæ ¹æ®å¯¹è±¡çš„æƒé™ä½æ¥åˆ¤æ–­ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œgrantä¿®æ”¹dbæƒé™çš„æ—¶å€™ï¼Œæ˜¯åŒæ—¶å¯¹ç£ç›˜å’Œå†…å­˜ç”Ÿæ•ˆçš„ã€‚</p><p>grantæ“ä½œå¯¹äºå·²ç»å­˜åœ¨çš„è¿æ¥çš„å½±å“ï¼Œåœ¨å…¨å±€æƒé™å’ŒåŸºäºdbçš„æƒé™æ•ˆæœæ˜¯ä¸åŒçš„ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åšä¸€ä¸ªå¯¹ç…§è¯•éªŒæ¥åˆ†åˆ«çœ‹ä¸€ä¸‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ae/c7/aea26807c8895961b666a5d96b081ac7.png?wh=1246*1320\" alt=\"\"></p><center><span class=\"reference\">å›¾3 æƒé™æ“ä½œæ•ˆæœ</span></center><p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œå›¾ä¸­set global sync_binlogè¿™ä¸ªæ“ä½œæ˜¯éœ€è¦superæƒé™çš„ã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶ç”¨æˆ·uaçš„superæƒé™åœ¨T3æ—¶åˆ»å·²ç»é€šè¿‡revokeè¯­å¥å›æ”¶äº†ï¼Œä½†æ˜¯åœ¨T4æ—¶åˆ»æ‰§è¡Œset globalçš„æ—¶å€™ï¼Œæƒé™éªŒè¯è¿˜æ˜¯é€šè¿‡äº†ã€‚è¿™æ˜¯å› ä¸ºsuperæ˜¯å…¨å±€æƒé™ï¼Œè¿™ä¸ªæƒé™ä¿¡æ¯åœ¨çº¿ç¨‹å¯¹è±¡ä¸­ï¼Œè€Œrevokeæ“ä½œå½±å“ä¸åˆ°è¿™ä¸ªçº¿ç¨‹å¯¹è±¡ã€‚</p><p>è€Œåœ¨T5æ—¶åˆ»å»æ‰uaå¯¹db1åº“çš„æ‰€æœ‰æƒé™åï¼Œåœ¨T6æ—¶åˆ»session Bå†æ“ä½œdb1åº“çš„è¡¨ï¼Œå°±ä¼šæŠ¥é”™â€œæƒé™ä¸è¶³â€ã€‚è¿™æ˜¯å› ä¸ºacl_dbsæ˜¯ä¸€ä¸ªå…¨å±€æ•°ç»„ï¼Œæ‰€æœ‰çº¿ç¨‹åˆ¤æ–­dbæƒé™éƒ½ç”¨è¿™ä¸ªæ•°ç»„ï¼Œè¿™æ ·revokeæ“ä½œé©¬ä¸Šå°±ä¼šå½±å“åˆ°session Bã€‚</p><p>è¿™é‡Œåœ¨ä»£ç å®ç°ä¸Šæœ‰ä¸€ä¸ªç‰¹åˆ«çš„é€»è¾‘ï¼Œå¦‚æœå½“å‰ä¼šè¯å·²ç»å¤„äºæŸä¸€ä¸ªdbé‡Œé¢ï¼Œä¹‹å‰useè¿™ä¸ªåº“çš„æ—¶å€™æ‹¿åˆ°çš„åº“æƒé™ä¼šä¿å­˜åœ¨ä¼šè¯å˜é‡ä¸­ã€‚</p><p>ä½ å¯ä»¥çœ‹åˆ°åœ¨T6æ—¶åˆ»ï¼Œsession Cå’Œsession Bå¯¹è¡¨tçš„æ“ä½œé€»è¾‘æ˜¯ä¸€æ ·çš„ã€‚ä½†æ˜¯session BæŠ¥é”™ï¼Œè€Œsession Cå¯ä»¥æ‰§è¡ŒæˆåŠŸã€‚è¿™æ˜¯å› ä¸ºsession Cåœ¨T2 æ—¶åˆ»æ‰§è¡Œçš„use db1ï¼Œæ‹¿åˆ°äº†è¿™ä¸ªåº“çš„æƒé™ï¼Œåœ¨åˆ‡æ¢å‡ºdb1åº“ä¹‹å‰ï¼Œsession Cå¯¹è¿™ä¸ªåº“å°±ä¸€ç›´æœ‰æƒé™ã€‚</p><h1>è¡¨æƒé™å’Œåˆ—æƒé™</h1><p>é™¤äº†dbçº§åˆ«çš„æƒé™å¤–ï¼ŒMySQLæ”¯æŒæ›´ç»†ç²’åº¦çš„è¡¨æƒé™å’Œåˆ—æƒé™ã€‚å…¶ä¸­ï¼Œè¡¨æƒé™å®šä¹‰å­˜æ”¾åœ¨è¡¨mysql.tables_privä¸­ï¼Œåˆ—æƒé™å®šä¹‰å­˜æ”¾åœ¨è¡¨mysql.columns_privä¸­ã€‚è¿™ä¸¤ç±»æƒé™ï¼Œç»„åˆèµ·æ¥å­˜æ”¾åœ¨å†…å­˜çš„hashç»“æ„column_priv_hashä¸­ã€‚</p><p>è¿™ä¸¤ç±»æƒé™çš„èµ‹æƒå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre><code>create table db1.t1(id int, a int);\n\ngrant all privileges on db1.t1 to 'ua'@'%' with grant option;\nGRANT SELECT(id), INSERT (id,a) ON mydb.mytbl TO 'ua'@'%' with grant option;\n</code></pre><p>è·Ÿdbæƒé™ç±»ä¼¼ï¼Œè¿™ä¸¤ä¸ªæƒé™æ¯æ¬¡grantçš„æ—¶å€™éƒ½ä¼šä¿®æ”¹æ•°æ®è¡¨ï¼Œä¹Ÿä¼šåŒæ­¥ä¿®æ”¹å†…å­˜ä¸­çš„hashç»“æ„ã€‚å› æ­¤ï¼Œå¯¹è¿™ä¸¤ç±»æƒé™çš„æ“ä½œï¼Œä¹Ÿä¼šé©¬ä¸Šå½±å“åˆ°å·²ç»å­˜åœ¨çš„è¿æ¥ã€‚</p><p>çœ‹åˆ°è¿™é‡Œï¼Œä½ ä¸€å®šä¼šé—®ï¼Œçœ‹æ¥grantè¯­å¥éƒ½æ˜¯å³æ—¶ç”Ÿæ•ˆçš„ï¼Œé‚£è¿™ä¹ˆçœ‹åº”è¯¥å°±ä¸éœ€è¦æ‰§è¡Œflush privilegesè¯­å¥äº†å‘€ã€‚</p><p>ç­”æ¡ˆä¹Ÿç¡®å®æ˜¯è¿™æ ·çš„ã€‚</p><p>flush privilegeså‘½ä»¤ä¼šæ¸…ç©ºacl_usersæ•°ç»„ï¼Œç„¶åä»mysql.userè¡¨ä¸­è¯»å–æ•°æ®é‡æ–°åŠ è½½ï¼Œé‡æ–°æ„é€ ä¸€ä¸ªacl_usersæ•°ç»„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»¥æ•°æ®è¡¨ä¸­çš„æ•°æ®ä¸ºå‡†ï¼Œä¼šå°†å…¨å±€æƒé™å†…å­˜æ•°ç»„é‡æ–°åŠ è½½ä¸€éã€‚</p><p>åŒæ ·åœ°ï¼Œå¯¹äºdbæƒé™ã€è¡¨æƒé™å’Œåˆ—æƒé™ï¼ŒMySQLä¹Ÿåšäº†è¿™æ ·çš„å¤„ç†ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå†…å­˜çš„æƒé™æ•°æ®å’Œç£ç›˜æ•°æ®è¡¨ç›¸åŒçš„è¯ï¼Œä¸éœ€è¦æ‰§è¡Œflush privilegesã€‚è€Œå¦‚æœæˆ‘ä»¬éƒ½æ˜¯ç”¨grant/revokeè¯­å¥æ¥æ‰§è¡Œçš„è¯ï¼Œå†…å­˜å’Œæ•°æ®è¡¨æœ¬æ¥å°±æ˜¯ä¿æŒåŒæ­¥æ›´æ–°çš„ã€‚</p><p><strong>å› æ­¤ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œgrantå‘½ä»¤ä¹‹åï¼Œæ²¡æœ‰å¿…è¦è·Ÿç€æ‰§è¡Œflush privilegeså‘½ä»¤ã€‚</strong></p><h1>flush privilegesä½¿ç”¨åœºæ™¯</h1><p>é‚£ä¹ˆï¼Œflush privilegesæ˜¯åœ¨ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å‘¢ï¼Ÿæ˜¾ç„¶ï¼Œå½“æ•°æ®è¡¨ä¸­çš„æƒé™æ•°æ®è·Ÿå†…å­˜ä¸­çš„æƒé™æ•°æ®ä¸ä¸€è‡´çš„æ—¶å€™ï¼Œflush privilegesè¯­å¥å¯ä»¥ç”¨æ¥é‡å»ºå†…å­˜æ•°æ®ï¼Œè¾¾åˆ°ä¸€è‡´çŠ¶æ€ã€‚</p><p>è¿™ç§ä¸ä¸€è‡´å¾€å¾€æ˜¯ç”±ä¸è§„èŒƒçš„æ“ä½œå¯¼è‡´çš„ï¼Œæ¯”å¦‚ç›´æ¥ç”¨DMLè¯­å¥æ“ä½œç³»ç»Ÿæƒé™è¡¨ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¸‹é¢è¿™ä¸ªåœºæ™¯ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/90/ec/9031814361be42b7bc084ad2ab2aa3ec.png?wh=1250*690\" alt=\"\"></p><center><span class=\"reference\">å›¾4 ä½¿ç”¨flush privileges</span></center><p>å¯ä»¥çœ‹åˆ°ï¼ŒT3æ—¶åˆ»è™½ç„¶å·²ç»ç”¨deleteè¯­å¥åˆ é™¤äº†ç”¨æˆ·uaï¼Œä½†æ˜¯åœ¨T4æ—¶åˆ»ï¼Œä»ç„¶å¯ä»¥ç”¨uaè¿æ¥æˆåŠŸã€‚åŸå› å°±æ˜¯ï¼Œè¿™æ—¶å€™å†…å­˜ä¸­acl_usersæ•°ç»„ä¸­è¿˜æœ‰è¿™ä¸ªç”¨æˆ·ï¼Œå› æ­¤ç³»ç»Ÿåˆ¤æ–­æ—¶è®¤ä¸ºç”¨æˆ·è¿˜æ­£å¸¸å­˜åœ¨ã€‚</p><p>åœ¨T5æ—¶åˆ»æ‰§è¡Œè¿‡flushå‘½ä»¤åï¼Œå†…å­˜æ›´æ–°ï¼ŒT6æ—¶åˆ»å†è¦ç”¨uaæ¥ç™»å½•çš„è¯ï¼Œå°±ä¼šæŠ¥é”™â€œæ— æ³•è®¿é—®â€äº†ã€‚</p><p>ç›´æ¥æ“ä½œç³»ç»Ÿè¡¨æ˜¯ä¸è§„èŒƒçš„æ“ä½œï¼Œè¿™ä¸ªä¸ä¸€è‡´çŠ¶æ€ä¹Ÿä¼šå¯¼è‡´ä¸€äº›æ›´â€œè¯¡å¼‚â€çš„ç°è±¡å‘ç”Ÿã€‚æ¯”å¦‚ï¼Œå‰é¢è¿™ä¸ªé€šè¿‡deleteè¯­å¥åˆ é™¤ç”¨æˆ·çš„ä¾‹å­ï¼Œå°±ä¼šå‡ºç°ä¸‹é¢çš„æƒ…å†µï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/dd/f1/dd625b6b4eb2dcbdaac73648a1af50f1.png?wh=1140*502\" alt=\"\"></p><center><span class=\"reference\">å›¾5 ä¸è§„èŒƒæƒé™æ“ä½œå¯¼è‡´çš„å¼‚å¸¸</span></center><p>å¯ä»¥çœ‹åˆ°ï¼Œç”±äºåœ¨T3æ—¶åˆ»ç›´æ¥åˆ é™¤äº†æ•°æ®è¡¨çš„è®°å½•ï¼Œè€Œå†…å­˜çš„æ•°æ®è¿˜å­˜åœ¨ã€‚è¿™å°±å¯¼è‡´äº†ï¼š</p><ol>\n<li>\n<p>T4æ—¶åˆ»ç»™ç”¨æˆ·uaèµ‹æƒé™å¤±è´¥ï¼Œå› ä¸ºmysql.userè¡¨ä¸­æ‰¾ä¸åˆ°è¿™è¡Œè®°å½•ï¼›</p>\n</li>\n<li>\n<p>è€ŒT5æ—¶åˆ»è¦é‡æ–°åˆ›å»ºè¿™ä¸ªç”¨æˆ·ä¹Ÿä¸è¡Œï¼Œå› ä¸ºåœ¨åšå†…å­˜åˆ¤æ–­çš„æ—¶å€™ï¼Œä¼šè®¤ä¸ºè¿™ä¸ªç”¨æˆ·è¿˜å­˜åœ¨ã€‚</p>\n</li>\n</ol><h1>å°ç»“</h1><p>ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘å’Œä½ ä»‹ç»äº†MySQLç”¨æˆ·æƒé™åœ¨æ•°æ®è¡¨å’Œå†…å­˜ä¸­çš„å­˜åœ¨å½¢å¼ï¼Œä»¥åŠgrantå’Œrevokeå‘½ä»¤çš„æ‰§è¡Œé€»è¾‘ã€‚</p><p>grantè¯­å¥ä¼šåŒæ—¶ä¿®æ”¹æ•°æ®è¡¨å’Œå†…å­˜ï¼Œåˆ¤æ–­æƒé™çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯å†…å­˜æ•°æ®ã€‚å› æ­¤ï¼Œè§„èŒƒåœ°ä½¿ç”¨grantå’Œrevokeè¯­å¥ï¼Œæ˜¯ä¸éœ€è¦éšååŠ ä¸Šflush privilegesè¯­å¥çš„ã€‚</p><p>flush privilegesè¯­å¥æœ¬èº«ä¼šç”¨æ•°æ®è¡¨çš„æ•°æ®é‡å»ºä¸€ä»½å†…å­˜æƒé™æ•°æ®ï¼Œæ‰€ä»¥åœ¨æƒé™æ•°æ®å¯èƒ½å­˜åœ¨ä¸ä¸€è‡´çš„æƒ…å†µä¸‹å†ä½¿ç”¨ã€‚è€Œè¿™ç§ä¸ä¸€è‡´å¾€å¾€æ˜¯ç”±äºç›´æ¥ç”¨DMLè¯­å¥æ“ä½œç³»ç»Ÿæƒé™è¡¨å¯¼è‡´çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å°½é‡ä¸è¦ä½¿ç”¨è¿™ç±»è¯­å¥ã€‚</p><p>å¦å¤–ï¼Œåœ¨ä½¿ç”¨grantè¯­å¥èµ‹æƒæ—¶ï¼Œä½ å¯èƒ½è¿˜ä¼šçœ‹åˆ°è¿™æ ·çš„å†™æ³•ï¼š</p><pre><code>grant super on *.* to 'ua'@'%' identified by 'pa';\n</code></pre><p>è¿™æ¡å‘½ä»¤åŠ äº†identified by â€˜å¯†ç â€™ï¼Œ è¯­å¥çš„é€»è¾‘é‡Œé¢é™¤äº†èµ‹æƒå¤–ï¼Œè¿˜åŒ…å«äº†ï¼š</p><ol>\n<li>\n<p>å¦‚æœç”¨æˆ·â€™uaâ€™@â€™%'ä¸å­˜åœ¨ï¼Œå°±åˆ›å»ºè¿™ä¸ªç”¨æˆ·ï¼Œå¯†ç æ˜¯paï¼›</p>\n</li>\n<li>\n<p>å¦‚æœç”¨æˆ·uaå·²ç»å­˜åœ¨ï¼Œå°±å°†å¯†ç ä¿®æ”¹æˆpaã€‚</p>\n</li>\n</ol><p>è¿™ä¹Ÿæ˜¯ä¸€ç§ä¸å»ºè®®çš„å†™æ³•ï¼Œå› ä¸ºè¿™ç§å†™æ³•å¾ˆå®¹æ˜“å°±ä¼šä¸æ…æŠŠå¯†ç ç»™æ”¹äº†ã€‚</p><p>â€œgrantä¹‹åéšæ‰‹åŠ flush privilegesâ€ï¼Œæˆ‘è‡ªå·±æ˜¯è¿™ä¹ˆä½¿ç”¨äº†ä¸¤ä¸‰å¹´ä¹‹åï¼Œåœ¨çœ‹ä»£ç çš„æ—¶å€™æ‰å‘ç°å…¶å®å¹¶ä¸éœ€è¦è¿™æ ·åšï¼Œé‚£å·²ç»æ˜¯2011å¹´çš„äº‹æƒ…äº†ã€‚</p><p>å»å¹´æˆ‘çœ‹åˆ°ä¸€ä½å°ä¼™ä¼´è¿™ä¹ˆæ“ä½œçš„æ—¶å€™ï¼ŒæŒ‡å‡ºè¿™ä¸ªé—®é¢˜æ—¶ï¼Œä»–ä¹Ÿè§‰å¾—å¾ˆç¥å¥‡ã€‚å› ä¸ºï¼Œä»–å’Œæˆ‘ä¸€æ ·çœ‹çš„ç¬¬ä¸€ä»½æ–‡æ¡£å°±æ˜¯è¿™ä¹ˆå†™çš„ï¼Œè‡ªå·±ä¹Ÿä¸€ç›´æ˜¯è¿™ä¹ˆç”¨çš„ã€‚</p><p>æ‰€ä»¥ï¼Œä»Šå¤©çš„è¯¾åé—®é¢˜æ˜¯ï¼Œè¯·ä½ ä¹Ÿæ¥è¯´ä¸€è¯´ï¼Œåœ¨ä½¿ç”¨æ•°æ®åº“æˆ–è€…å†™ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰æ²¡æœ‰é‡åˆ°è¿‡ç±»ä¼¼çš„åœºæ™¯ï¼šè¯¯ç”¨äº†å¾ˆé•¿æ—¶é—´ä»¥åï¼Œç”±äºä¸€ä¸ªå¥‘æœºå‘ç°â€œå•Šï¼ŒåŸæ¥æˆ‘é”™äº†è¿™ä¹ˆä¹…â€ï¼Ÿ</p><p>ä½ å¯ä»¥æŠŠä½ çš„ç»å†å†™åœ¨ç•™è¨€åŒºï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« çš„æœ«å°¾é€‰å–æœ‰è¶£çš„è¯„è®ºå’Œä½ åˆ†äº«ã€‚æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><h1>ä¸ŠæœŸé—®é¢˜æ—¶é—´</h1><p>ä¸ŠæœŸçš„é—®é¢˜æ˜¯ï¼ŒMySQLè§£æstatementæ ¼å¼çš„binlogçš„æ—¶å€™ï¼Œå¯¹äºload dataå‘½ä»¤ï¼Œè§£æå‡ºæ¥ä¸ºä»€ä¹ˆç”¨çš„æ˜¯load data localã€‚</p><p>è¿™æ ·åšçš„ä¸€ä¸ªåŸå› æ˜¯ï¼Œä¸ºäº†ç¡®ä¿å¤‡åº“åº”ç”¨binlogæ­£å¸¸ã€‚å› ä¸ºå¤‡åº“å¯èƒ½é…ç½®äº†secure_file_priv=nullï¼Œæ‰€ä»¥å¦‚æœä¸ç”¨localçš„è¯ï¼Œå¯èƒ½ä¼šå¯¼å…¥å¤±è´¥ï¼Œé€ æˆä¸»å¤‡åŒæ­¥å»¶è¿Ÿã€‚</p><p>å¦ä¸€ç§åº”ç”¨åœºæ™¯æ˜¯ä½¿ç”¨mysqlbinlogå·¥å…·è§£æbinlogæ–‡ä»¶ï¼Œå¹¶åº”ç”¨åˆ°ç›®æ ‡åº“çš„æƒ…å†µã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤ ï¼š</p><pre><code>mysqlbinlog $binlog_file | mysql -h$host -P$port -u$user -p$pwd\n</code></pre><p>æŠŠæ—¥å¿—ç›´æ¥è§£æå‡ºæ¥å‘ç»™ç›®æ ‡åº“æ‰§è¡Œã€‚å¢åŠ localï¼Œå°±èƒ½è®©è¿™ä¸ªæ–¹æ³•æ”¯æŒéæœ¬åœ°çš„$hostã€‚</p><p>è¯„è®ºåŒºç•™è¨€ç‚¹èµæ¿ï¼š</p><blockquote>\n<p>@poppy ã€@åº“æ·˜æ·˜ ä¸¤ä½åŒå­¦æåˆ°äº†ç¬¬ä¸€ä¸ªåœºæ™¯ï¼›<br>\n@ç‹æ˜¾ä¼Ÿ @lionetes ä¸¤ä½åŒå­¦å¸®å¿™å›ç­”äº† @undifined åŒå­¦çš„ç–‘é—®ï¼Œæ‹·è´å‡ºæ¥çš„æ–‡ä»¶è¦ç¡®ä¿MySQLè¿›ç¨‹å¯ä»¥è¯»ã€‚</p>\n</blockquote><p></p>","neighbors":{"left":{"article_title":"41 | æ€ä¹ˆæœ€å¿«åœ°å¤åˆ¶ä¸€å¼ è¡¨ï¼Ÿ","id":81925},"right":{"article_title":"43 | è¦ä¸è¦ä½¿ç”¨åˆ†åŒºè¡¨ï¼Ÿ","id":82560}},"comments":[{"had_liked":false,"id":68964,"user_name":"way","can_delete":false,"product_type":"c1","uid":1302713,"ip_address":"","ucode":"AD1CBEBA5FDBA9","user_header":"https://static001.geekbang.org/account/avatar/00/13/e0/b9/bca7ff9a.jpg","comment_is_top":false,"comment_ctime":1550634955,"is_pvip":false,"replies":[{"id":"24470","content":"ğŸ‘<br><br>æˆ‘æœ€å¼€å§‹ä½¿ç”¨MySQLçš„æ—¶å€™ï¼Œå°±æ˜¯ä¸è‡ªç„¶çš„åœ¨\\Gåé¢åŠ åˆ†å·<br>è€Œä¸”è¿˜çœ‹åˆ°æŠ¥é”™ï¼Œå¥½ç´§å¼ ğŸ˜†","user_name":"ä½œè€…å›å¤","comment_id":68964,"uid":"1264162","ip_address":"","utype":1,"ctime":1550640741,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":6,"race_medal":0,"score":"272133574603","product_id":100020801,"comment_content":"å†™ä¸ªæ¯”è¾ƒå°çš„ç‚¹ï¼šåœ¨å‘½ä»¤è¡ŒæŸ¥è¯¢æ•°æ®éœ€è¦è¡Œè½¬åˆ—çš„æ—¶å€™ä¹ æƒ¯åŠ ä¸ª\\G ; æ¯”å¦‚slave slave stauts \\G ; åæ¥å‘ç° ; æ˜¯å¤šä½™çš„ã€‚åˆ—å‡ ä¸ªå¸¸ç”¨çš„<br>\\G è¡Œè½¬åˆ—å¹¶å‘é€ç»™ mysql server<br>\\g ç­‰åŒäº ;<br>\\! æ‰§è¡Œç³»ç»Ÿå‘½ä»¤<br>\\q exit<br>\\c æ¸…é™¤å½“å‰SQLï¼ˆä¸æ‰§è¡Œï¼‰<br>\\s mysql status ä¿¡æ¯<br>å…¶ä»–å‚è€ƒ \\h","like_count":64,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439893,"discussion_content":"ğŸ‘\n\næˆ‘æœ€å¼€å§‹ä½¿ç”¨MySQLçš„æ—¶å€™ï¼Œå°±æ˜¯ä¸è‡ªç„¶çš„åœ¨\\Gåé¢åŠ åˆ†å·\nè€Œä¸”è¿˜çœ‹åˆ°æŠ¥é”™ï¼Œå¥½ç´§å¼ ğŸ˜†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550640741,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1341276,"avatar":"https://static001.geekbang.org/account/avatar/00/14/77/5c/8d53165e.jpg","nickname":"bingo","note":"","ucode":"DD96820EC8871D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":405882,"discussion_content":"\\h å’Œ \\? å¯ä»¥æŸ¥çœ‹è¿™äº›å‘½ä»¤çš„æ‰‹å†Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634655752,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2001997,"avatar":"","nickname":"æ¨å©·","note":"","ucode":"3AE642802D375C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337294,"discussion_content":"ä»Šå¤©çœ‹äº†æ–‡ç« æ‰çŸ¥é“åˆ†å·æ˜¯å¤šä½™çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608864817,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1028343,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b0/f7/228a6c37.jpg","nickname":"æ±Ÿæ¹–ä¸Š","note":"","ucode":"E10516C681EF23","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291534,"discussion_content":"\\Gï¼Œç”¨é”™äº†3å¹´...","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594864350,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1155646,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKotsBr2icbYNYlRSlicGUD1H7lulSTQUAiclsEz9gnG5kCW9qeDwdYtlRMXic3V6sj9UrfKLPJnQojag/132","nickname":"ppd0705","note":"","ucode":"EB63D4E3FD1E9A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291078,"discussion_content":"slave slave stauts \\Gåé¢ä¸éœ€è¦åŠ `;`  å­¦åˆ°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594701733,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1056807,"avatar":"https://static001.geekbang.org/account/avatar/00/10/20/27/a6932fbe.jpg","nickname":"è™¢åœ‹æŠ€é†¬","note":"","ucode":"5A192262AA037E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2284,"discussion_content":"ä»Šå¤©æ‰å‘ç°è¿™ä¸ªåˆ†å·æ˜¯å¤šä½™çš„ï¼Œæˆ‘è¿˜å»éªŒè¯äº†ä¸‹ğŸ¤£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563437286,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":68166,"user_name":"undifined","can_delete":false,"product_type":"c1","uid":1068920,"ip_address":"","ucode":"449CB4CD2DC089","user_header":"https://static001.geekbang.org/account/avatar/00/10/4f/78/c3d8ecb0.jpg","comment_is_top":false,"comment_ctime":1550452309,"is_pvip":false,"replies":[{"id":"24141","content":"ğŸ‘ï¼Œä¼˜ç§€","user_name":"ä½œè€…å›å¤","comment_id":68166,"uid":"1264162","ip_address":"","utype":1,"ctime":1550462297,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":7,"race_medal":0,"score":"173349144149","product_id":100020801,"comment_content":"æƒé™çš„ä½œç”¨èŒƒå›´å’Œä¿®æ”¹ç­–ç•¥æ€»ç»“ï¼š<br>http:&#47;&#47;ww1.sinaimg.cn&#47;large&#47;d1885ed1ly1g0ab2twmjaj21gs0js78u.jpg","like_count":41,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439544,"discussion_content":"ğŸ‘ï¼Œä¼˜ç§€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550462297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1108080,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e8/70/95f17940.jpg","nickname":"ç®­é£å¤©","note":"","ucode":"B3735758CBC533","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":279862,"discussion_content":"use database åï¼Œå¯¹dbçš„å°±ä¸æ˜¯ç«‹å³ç”Ÿæ•ˆï¼Ÿæ˜¯å› ä¸ºç›´æ¥ä½¿ç”¨äº†çº¿ç¨‹å†…éƒ¨çš„dbç¼“å­˜æƒé™ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591437082,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2172435,"avatar":"https://static001.geekbang.org/account/avatar/00/21/26/13/0319db8a.jpg","nickname":"Allen","note":"","ucode":"AFDFD3036A8779","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1108080,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e8/70/95f17940.jpg","nickname":"ç®­é£å¤©","note":"","ucode":"B3735758CBC533","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380614,"discussion_content":"è¡¨é‡Œæ²¡è¿™ä¸ªï¼Œä½†è€å¸ˆæåˆ°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624605058,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":279862,"ip_address":""},"score":380614,"extra":""}]},{"author":{"id":1124075,"avatar":"https://static001.geekbang.org/account/avatar/00/11/26/eb/24e0ac9c.jpg","nickname":"å¬´æ¢¦å·","note":"","ucode":"104CDFD26A1711","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375980,"discussion_content":"è¿™ä¹ˆä¸€æ€»ç»“å°±æ¸…æ™°å¤šäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621912711,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1786819,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/43/c3/2c53acd7.jpg","nickname":"é›„é¹°","note":"","ucode":"67E0C4BDE7F6F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302900,"discussion_content":"å†…å­˜å­˜å‚¨åˆ—ä¸­çš„è¡¨æƒé™å’Œåˆ—æƒé™çš„å†…å­˜å­˜å‚¨å†™åäº†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599058844,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1336475,"avatar":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","nickname":"J.Smile","note":"","ucode":"C4D98DFDBF7584","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281512,"discussion_content":"ä¼˜ç§€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591754989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1013992,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/78/e8/29569aaf.jpg","nickname":"æ°å…‹","note":"","ucode":"0E5C00A91309BB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1107,"discussion_content":"ä¼˜ç§€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562318296,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":68278,"user_name":"å‘èŠ½çš„ç´«èœ","can_delete":false,"product_type":"c1","uid":1055836,"ip_address":"","ucode":"49450F3287DF28","user_header":"https://static001.geekbang.org/account/avatar/00/10/1c/5c/f5f24221.jpg","comment_is_top":false,"comment_ctime":1550475727,"is_pvip":false,"replies":[{"id":"24238","content":"è”åˆç´¢å¼•å°±æ˜¯ä¸¤ä¸ªå­—æ®µæ‹¼èµ·æ¥ä½œç´¢å¼•<br><br>æ¯”å¦‚ä¸€ä¸ªç´¢å¼•å¦‚æœå®šä¹‰ä¸º(f1,f2),<br>åœ¨æ•°æ®ä¸Šï¼Œå°±æ˜¯f1çš„å€¼ä¹‹åè·Ÿç€f2çš„å€¼ã€‚<br>æŸ¥æ‰¾çš„æ—¶å€™ï¼Œæ¯”å¦‚æ‰§è¡Œ where f1=M and f2=N, ä¹Ÿæ˜¯æŠŠM,Næ‹¼èµ·æ¥ï¼Œå»ç´¢å¼•æ ‘æŸ¥æ‰¾","user_name":"ä½œè€…å›å¤","comment_id":68278,"uid":"1264162","ip_address":"","utype":1,"ctime":1550502196,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":6,"race_medal":0,"score":"126104527311","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè”åˆç´¢å¼•çš„æ•°æ®ç»“æ„æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿåˆ°åº•æ˜¯æ€ä¹ˆå­˜çš„ï¼Ÿçœ‹äº†å‰é¢ç´¢å¼•ä¸¤ç« ï¼Œè¿˜æ˜¯ä¸å¤ªæ‡‚ï¼Œç•™è¨€é‡Œè€å¸ˆè¯´ä¼šåœ¨åé¢ç« èŠ‚ä¼šè®²åˆ°ï¼Œä½†æˆ‘ä¹Ÿæ²¡çœ‹åˆ°ï¼Œæ‰€ä»¥æ¥æ­¤é—®ä¸€ä¸‹ï¼Ÿè€å¸ˆèƒ½å¦ç”»å›¾è®²è§£ä¸€ä¸‹","like_count":30,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439604,"discussion_content":"è”åˆç´¢å¼•å°±æ˜¯ä¸¤ä¸ªå­—æ®µæ‹¼èµ·æ¥ä½œç´¢å¼•\n\næ¯”å¦‚ä¸€ä¸ªç´¢å¼•å¦‚æœå®šä¹‰ä¸º(f1,f2),\nåœ¨æ•°æ®ä¸Šï¼Œå°±æ˜¯f1çš„å€¼ä¹‹åè·Ÿç€f2çš„å€¼ã€‚\næŸ¥æ‰¾çš„æ—¶å€™ï¼Œæ¯”å¦‚æ‰§è¡Œ where f1=M and f2=N, ä¹Ÿæ˜¯æŠŠM,Næ‹¼èµ·æ¥ï¼Œå»ç´¢å¼•æ ‘æŸ¥æ‰¾","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550502196,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1909732,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLY0FFoux40Negib6LrE7EwT3T2BUbpYzOzUeiaiaXBmNGDGVgIZr5NeWBTEeCuALOg3ODtWa21bHMgg/132","nickname":"Geek_99ae14","note":"","ucode":"268852986A6B69","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":409316,"discussion_content":"çœ‹ä¸‹è¿™ä¸ªè§£é‡Š https://zhuanlan.zhihu.com/p/109623980","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635417940,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1152599,"avatar":"https://static001.geekbang.org/account/avatar/00/11/96/57/397ead08.jpg","nickname":"ä¸€ä¸ªç±³å±Œ","note":"","ucode":"8470D3FB4456F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":212359,"discussion_content":"ä¸æ˜¯åªå»ºç¬¬ä¸€ä¸ªæ•°æ®çš„ç´¢å¼•å—ï¼Œåé¢çš„æ•°æ®å­˜å‚¨åœ¨ç´¢å¼•å¶å­ä¸­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584964556,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1464006,"avatar":"https://static001.geekbang.org/account/avatar/00/16/56/c6/0b449bc6.jpg","nickname":"æ–æ³¢é‚£å¥‘","note":"","ucode":"85E2EBC01392B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":203346,"discussion_content":"ä»¥å‰ç¢°åˆ°ä¸€ä¸ªé¢è¯•é¢˜ é¢è¯•å®˜é—® å½“æˆ‘åˆ›å»ºäº†ä¸€ä¸ªè”åˆç´¢å¼•å®é™…ä¸Šmysqlåˆ›å»ºäº†å‡ ä¸ªç´¢å¼•ï¼Ÿæ¯”å¦‚åˆ›å»ºäº†è”åˆç´¢å¼•(a,b,c,d) é‚£å®é™…ä¸Šåˆ›å»ºäº†å‡ ä¸ªï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584024130,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1997293,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/79/ed/4737a49b.jpg","nickname":"é›ªã®é›«Â·é›¨ã®éŸ³","note":"","ucode":"0693DA3939A321","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1464006,"avatar":"https://static001.geekbang.org/account/avatar/00/16/56/c6/0b449bc6.jpg","nickname":"æ–æ³¢é‚£å¥‘","note":"","ucode":"85E2EBC01392B1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":274691,"discussion_content":"åªæœ‰ä¸€æ£µç´¢å¼•æ ‘ï¼Œç´¢å¼•æ ‘çš„å¶å­èŠ‚ç‚¹æ˜¯æŒ‰ç…§a,b,c,dçš„é¡ºåºæ’åºçš„","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1590604059,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":203346,"ip_address":""},"score":274691,"extra":""}]},{"author":{"id":1541014,"avatar":"https://static001.geekbang.org/account/avatar/00/17/83/96/73ff13a0.jpg","nickname":"å¤©äº®å‰è¯´æ™šå®‰","note":"","ucode":"1D82EE562A7C71","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":202887,"discussion_content":"ä¸æ˜¯ä¸¤ä¸ªå­—æ®µéƒ½ç´¢å¼•æœ‰åºå˜›ï¼Œåªæ˜¯å‰é¢çš„å­—æ®µä¸ºä¸€æ®µæœ‰åº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583973415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":68178,"user_name":"LeonğŸ“·","can_delete":false,"product_type":"c1","uid":1219496,"ip_address":"","ucode":"B9BBD1EFAAE5A2","user_header":"https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg","comment_is_top":false,"comment_ctime":1550454378,"is_pvip":false,"replies":[{"id":"24237","content":"å¯¹ï¼Œdropæ˜¯åŒæ—¶æ“ä½œç£ç›˜å’Œå†…å­˜ï¼Œ<br>deleteå°±æ˜¯æˆ‘ä»¬è¯´çš„ä¸è§„èŒƒæ“ä½œ","user_name":"ä½œè€…å›å¤","comment_id":68178,"uid":"1264162","ip_address":"","utype":1,"ctime":1550502024,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"126104505962","product_id":100020801,"comment_content":"è€å¸ˆæˆ‘ä½¿ç”¨delteåˆ é™¤ç”¨æˆ·ï¼Œå†åˆ›å»ºç”¨æˆ·éƒ½æ˜¯å¤±è´¥ï¼Œä½†æ˜¯ä½¿ç”¨dropå°±å¯ä»¥äº†<br>mysql&gt; create user &#39;ua&#39;@&#39;%&#39; identified by &#39;L1234567890c-&#39;;<br>ERROR 1396 (HY000): Operation CREATE USER failed for &#39;ua&#39;@&#39;%&#39;<br>mysql&gt; drop user &#39;ua&#39;@&#39;%&#39;;<br>Query OK, 0 rows affected (0.00 sec)<br><br>mysql&gt; create user &#39;ua&#39;@&#39;%&#39; identified by &#39;L1234567890c-&#39;;<br>Query OK, 0 rows affected (0.01 sec)<br>æ˜¯ä¸æ˜¯dropæ‰ä¼šåŒæ—¶ä»å†…å­˜å’Œç£ç›˜åˆ é™¤ç”¨æˆ·ä¿¡æ¯ï¼Œä½†æ˜¯deleteåªæ˜¯ä»ç£ç›˜åˆ é™¤","like_count":30,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439550,"discussion_content":"å¯¹ï¼Œdropæ˜¯åŒæ—¶æ“ä½œç£ç›˜å’Œå†…å­˜ï¼Œ\ndeleteå°±æ˜¯æˆ‘ä»¬è¯´çš„ä¸è§„èŒƒæ“ä½œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550502024,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1476490,"avatar":"https://static001.geekbang.org/account/avatar/00/16/87/8a/07ab933c.jpg","nickname":"ç’€ç’¨æ˜Ÿç©º","note":"","ucode":"CE6324C4261A52","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333281,"discussion_content":"DDL DMLçš„åŒºåˆ«","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1607495403,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114945,"user_name":"è™¢åœ‹æŠ€é†¬","can_delete":false,"product_type":"c1","uid":1056807,"ip_address":"","ucode":"5A192262AA037E","user_header":"https://static001.geekbang.org/account/avatar/00/10/20/27/a6932fbe.jpg","comment_is_top":false,"comment_ctime":1563437135,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"74577881167","product_id":100020801,"comment_content":"è€å¸ˆçš„æ–‡ç« ä¿¡æ¯é‡(å¯†åº¦)å¾ˆå¤§ï¼Œä¸€èˆ¬æƒ…å†µä¸‹å¾—è¯»å¥½å‡ éï¼Œç”šè‡³è¯»åˆ°å¤´å¤§ï¼›æœ¬ç¯‡æ˜¯å°‘æœ‰çš„å‡ ç¯‡ä¸€å£æ°”è¯»å®Œèƒ½ç†è§£çš„ï¼Œä¸å®¹æ˜“å•Š ğŸ˜‚","like_count":18},{"had_liked":false,"id":68460,"user_name":"æ—­ä¸œ(Frank)","can_delete":false,"product_type":"c1","uid":1024486,"ip_address":"","ucode":"176FA629800062","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a1/e6/50da1b2d.jpg","comment_is_top":false,"comment_ctime":1550502970,"is_pvip":false,"replies":[{"id":"24273","content":"æ²¡æœ‰å½±å“<br><br>å»ºè®®å°±æ˜¯æ¯æ¬¡å¦‚æœè¦åŠ åˆ—éƒ½åŠ åˆ°æœ€åä¸€åˆ—ğŸ˜†","user_name":"ä½œè€…å›å¤","comment_id":68460,"uid":"1264162","ip_address":"","utype":1,"ctime":1550539354,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":3,"race_medal":0,"score":"53090110522","product_id":100020801,"comment_content":"è€å¸ˆè¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼šMySQL è¡¨è®¾è®¡æ—¶åˆ—è¡¨é¡ºåºå¯¹MySQLæ€§èƒ½çš„å½±å“å¤§å—ï¼Ÿå¯¹è¡¨çš„åˆ—é¡ºåºæœ‰ä»€ä¹ˆå»ºè®®å—ï¼Ÿ","like_count":13,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439685,"discussion_content":"æ²¡æœ‰å½±å“\n\nå»ºè®®å°±æ˜¯æ¯æ¬¡å¦‚æœè¦åŠ åˆ—éƒ½åŠ åˆ°æœ€åä¸€åˆ—ğŸ˜†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550539354,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1194853,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3b/65/3a4fc8cf.jpg","nickname":"prepared","note":"","ucode":"00E54A5C7CDCBE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339557,"discussion_content":"â€œå»ºè®®å°±æ˜¯æ¯æ¬¡å¦‚æœè¦åŠ åˆ—éƒ½åŠ åˆ°æœ€åä¸€åˆ—â€ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609731216,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1887586,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLhicDSmL4vicPADhxxzOzukMar8nV5Tc3ic2dz4FQIxMX3WmX5a2V3sdD121eWpvfQI8NXIkkDZoDFw/132","nickname":"Geek_536b54","note":"","ucode":"F62BC7781D9212","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1194853,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3b/65/3a4fc8cf.jpg","nickname":"prepared","note":"","ucode":"00E54A5C7CDCBE","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":344792,"discussion_content":"å› ä¸ºä¸»ä»åŒæ­¥çš„æ—¶å€™ æœ€åä¸€åˆ—æ²¡æœ‰å€¼ä¹Ÿæ²¡å…³ç³» ï¼Œå¦‚æœæ’å…¥ä¸­é—´ ä¼šsqlæŠ¥é”™","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1611572390,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":339557,"ip_address":""},"score":344792,"extra":""}]}]},{"had_liked":false,"id":68297,"user_name":"å¤œç©ºä¸­æœ€äº®çš„æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1267566,"ip_address":"","ucode":"ADC3E7B6789955","user_header":"https://static001.geekbang.org/account/avatar/00/13/57/6e/b6795c44.jpg","comment_is_top":false,"comment_ctime":1550480102,"is_pvip":false,"replies":[{"id":"24269","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","comment_id":68297,"uid":"1264162","ip_address":"","utype":1,"ctime":1550539042,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"44500153062","product_id":100020801,"comment_content":"é€šè¿‡è€å¸ˆçš„è®²è§£ flush privileges è¿™å›å½»åº•æ‡‚äº†ï¼Œé«˜å…´ğŸ˜ƒ","like_count":10,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439616,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550539042,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1624590,"avatar":"https://static001.geekbang.org/account/avatar/00/18/ca/0e/5009c5ff.jpg","nickname":"é‡è§","note":"","ucode":"FAF53CD4C28494","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":83985,"discussion_content":"ä¹Ÿç¡®å®æ˜¯ flush ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576478246,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84436,"user_name":"å†°ç‚¹18","can_delete":false,"product_type":"c1","uid":1112370,"ip_address":"","ucode":"0BD9DBE5D3242E","user_header":"https://static001.geekbang.org/account/avatar/00/10/f9/32/8ced1824.jpg","comment_is_top":false,"comment_ctime":1554862137,"is_pvip":false,"replies":[{"id":"30750","content":"ipad ä¸Šçš„pencil ï¼Œæ˜¯ç¼–è¾‘å°å§å§ç”»çš„å“ˆï¼Œæˆ‘ç”»çš„æ˜¯çŸ©å½¢çš„å›¾ğŸ˜…","user_name":"ä½œè€…å›å¤","comment_id":84436,"uid":"1264162","ip_address":"","utype":1,"ctime":1555147376,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"35914600505","product_id":100020801,"comment_content":"ä¸¤ä¸‰ä¸ªæœˆçš„æ—¶é—´ï¼Œç»ˆäºåœ¨ä¸Šç­åœ°é“ä¸Šè¯»å®Œäº†æ•´éƒ¨ä¸“æ ï¼Œè€å¸ˆè¾›è‹¦äº†ï¼æ¥ä¸‹æ¥å°±æ˜¯æ­å»ºç¯å¢ƒï¼ŒäºŒåˆ·å’ŒéªŒè¯äº†ï¼ä¸€ç›´æœ‰ä¸ªé—®é¢˜ï¼Œæƒ³é—®ä¸‹è€å¸ˆï¼Œæ‚¨ç”¨çš„ç”»å›¾å·¥å…·æ˜¯å“ªä¸ªï¼Ÿé£æ ¼æˆ‘ç‰¹åˆ«å–œæ¬¢ï¼Œä½†æ˜¯æ²¡æ‰¾åˆ°","like_count":9,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446359,"discussion_content":"ipad ä¸Šçš„pencil ï¼Œæ˜¯ç¼–è¾‘å°å§å§ç”»çš„å“ˆï¼Œæˆ‘ç”»çš„æ˜¯çŸ©å½¢çš„å›¾ğŸ˜…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555147376,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":68464,"user_name":"XD","can_delete":false,"product_type":"c1","uid":1079293,"ip_address":"","ucode":"DC9DCFB3841A4E","user_header":"https://static001.geekbang.org/account/avatar/00/10/77/fd/c6619535.jpg","comment_is_top":false,"comment_ctime":1550503721,"is_pvip":false,"replies":[{"id":"24404","content":"ä½ è¯´çš„å¯¹ï¼Œæˆ‘åˆšç¿»ä»£ç ç¡®è®¤äº†ä¸‹ï¼Œç¡®å®æ˜¯ç‰¹åˆ«å¯¹â€œå½“å‰dbâ€æœ‰ä¸€ä¸ªæ”¾è¿‡çš„é€»è¾‘ã€‚<br><br>å¤šè°¢æŒ‡æ­£ã€‚æˆ‘å‹˜è¯¯ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","comment_id":68464,"uid":"1264162","ip_address":"","utype":1,"ctime":1550582089,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"35910242089","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘åˆšè¯´çš„æ˜¯acl_dbï¼Œæ˜¯åœ¨dbåˆ‡æ¢çš„æ—¶å€™ï¼Œä»acl_dbsæ‹·è´åˆ°çº¿ç¨‹å†…éƒ¨çš„ï¼Ÿç±»ä¼¼acl_userã€‚<br><br>session a<br>drop user &#39;test&#39;@&#39;%&#39;;<br>create user &#39;test&#39;@&#39;%&#39; identified by &#39;123456&#39;;<br>grant SELECT,UPDATE on gt.* to &#39;test&#39;@&#39;%&#39;;<br><br>session b   ä½¿ç”¨testç™»å½•<br>use gt;<br><br>session a<br>revoke SELECT,UPDATE on gt.* from &#39;test&#39;@&#39;%&#39;;<br><br>session b<br>show databases;  &#47;&#47;åªèƒ½çœ‹åˆ°information_schemaåº“<br>use gt;   &#47;&#47; Access denied for user &#39;test&#39;@&#39;%&#39; to database &#39;gt&#39;<br>show tables;   &#47;&#47;å¯ä»¥çœ‹åˆ°gtåº“ä¸­æ‰€æœ‰çš„è¡¨<br>select&#47;update  &#47;&#47;æ“ä½œéƒ½æ­£å¸¸","like_count":9,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439688,"discussion_content":"ä½ è¯´çš„å¯¹ï¼Œæˆ‘åˆšç¿»ä»£ç ç¡®è®¤äº†ä¸‹ï¼Œç¡®å®æ˜¯ç‰¹åˆ«å¯¹â€œå½“å‰dbâ€æœ‰ä¸€ä¸ªæ”¾è¿‡çš„é€»è¾‘ã€‚\n\nå¤šè°¢æŒ‡æ­£ã€‚æˆ‘å‹˜è¯¯ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550582089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":68306,"user_name":"å¤¹å¿ƒé¢åŒ…","can_delete":false,"product_type":"c1","uid":1301957,"ip_address":"","ucode":"002BBA49D83D17","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJCscgdVibmoPyRLRaicvk6rjTJxePZ6VFHvGjUQvtfhCS6kO4OZ1AVibbhNGKlWZmpEFf2yA6ptsqHw/132","comment_is_top":false,"comment_ctime":1550480991,"is_pvip":false,"replies":[{"id":"24306","content":"æ˜¯çš„ï¼ŒMySQLè¿˜æ”¯æŒ % èµ‹æƒï¼Œ%è¡¨ç¤ºåŒ¹é…ä»»æ„å­—ç¬¦ä¸²ï¼Œ<br>æ¯”å¦‚<br>grant all privileges on `db%`.* to ... è¡¨ç¤ºæ‰€æœ‰ä»¥dbä¸ºå‰ç¼€çš„åº“ã€‚<br><br>ä¸è¿‡ã€‚ã€‚ã€‚æˆ‘æ¯”è¾ƒä¸å»ºè®®è¿™ä¹ˆç”¨ğŸ˜…","user_name":"ä½œè€…å›å¤","comment_id":68306,"uid":"1264162","ip_address":"","utype":1,"ctime":1550543584,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"31615252063","product_id":100020801,"comment_content":"æˆ‘åœ¨æ­¤åˆ†äº«ä¸€ä¸ªæˆæƒåº“çš„å°æŠ€å·§, å¦‚æœéœ€è¦æˆæƒå¤šä¸ªåº“,åº“åè¿˜æœ‰è§„å¾‹,æ¯”å¦‚ db_201701 db_201702<br>å¯ä»¥é‡‡ç”¨æ­£åˆ™åŒ¹é…å†™ä¸€æ¡ grant  on db______,æ¯ä¸€ä¸ª_ä»£è¡¨ä¸€ä¸ªå­—ç¬¦.è¿™æ ·é¿å…äº†å¤šæ¬¡æˆæƒ,ç®€åŒ–äº†è¿‡ç¨‹ã€‚æˆ‘ä»¬çº¿ä¸Šå·²ç»é‡‡ç”¨","like_count":7,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439620,"discussion_content":"æ˜¯çš„ï¼ŒMySQLè¿˜æ”¯æŒ % èµ‹æƒï¼Œ%è¡¨ç¤ºåŒ¹é…ä»»æ„å­—ç¬¦ä¸²ï¼Œ\næ¯”å¦‚\ngrant all privileges on `db%`.* to ... è¡¨ç¤ºæ‰€æœ‰ä»¥dbä¸ºå‰ç¼€çš„åº“ã€‚\n\nä¸è¿‡ã€‚ã€‚ã€‚æˆ‘æ¯”è¾ƒä¸å»ºè®®è¿™ä¹ˆç”¨ğŸ˜…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550543584,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1285652,"avatar":"","nickname":"mycat","note":"","ucode":"6878BD32D042F2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327424,"discussion_content":"db%å‰åçš„åå¼•å·ä¸å¯ä»¥çœç•¥ï¼Œçœç•¥åä¸ç”Ÿæ•ˆã€‚\nè¿™ç§æˆæƒæ–¹å¼é€‚ç”¨äºå¤šç§Ÿæˆ·çš„åœºæ™¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605835664,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107808,"user_name":"ä¸šä½™è‰","can_delete":false,"product_type":"c1","uid":1126538,"ip_address":"","ucode":"99BDC1E629049D","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/8a/b5ca7286.jpg","comment_is_top":false,"comment_ctime":1561614552,"is_pvip":false,"replies":[{"id":"39546","content":"è®¤çœŸçœ‹äº†è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘æœ‰ç‚¹ç–‘æƒ‘å“¦<br><br>â€œè¿™æ‹›å¤Ÿç‹ ã€‚é‡å¯åœ¨ç¨‹åºå‘˜å±Šçš„æ€æ‹›è¢«ä»–æ¥ä¸Šäº†ã€‚ä½†æ˜¯ï¼Œé‡å¯å¤±çµäº†ï¼Œé‡å¯åï¼Œå·²æœ‰çš„è¿æ¥è¿˜æ˜¯æ²¡æƒé™ã€‚å…·ä½“çš„è¡¨ç°æ˜¯ï¼Œå¤‡åº“ä¸Šçš„å¤åˆ¶è¿æ¥è¿˜æ˜¯æœªæƒé™ã€‚â€<br>ä¸»åº“é‡å¯çš„è¯ï¼Œå¤‡åº“çš„è¿æ¥ä¹Ÿæ˜¯é‡æ–°åˆ›å»ºçš„<br><br>å¦‚æœâ€œé‡å¯æ— æ•ˆâ€è€Œâ€œkillè¿æ¥æœ‰æ•ˆâ€ï¼Œé‚£ä¸å¤ªåˆç†å“¦<br><br>","user_name":"ä½œè€…å›å¤","comment_id":107808,"uid":"1264162","ip_address":"","utype":1,"ctime":1561983791,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"18741483736","product_id":100020801,"comment_content":"ä»å­¦ä¹ ä¸­æ¥ï¼Œåˆ°å®æˆ˜ä¸­å»ï¼åšäº†ä¸€ä¸ªæ€»ç»“ï¼Œå¯èƒ½å†™çš„ä¸å¯¹ï¼Œå¸Œæœ›è€å¸ˆæŒ‡ç‚¹ã€‚https:&#47;&#47;mp.weixin.qq.com&#47;s&#47;7KGQGpm0IGaVjco6UjLeAQ","like_count":4,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455682,"discussion_content":"è®¤çœŸçœ‹äº†è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘æœ‰ç‚¹ç–‘æƒ‘å“¦\n\nâ€œè¿™æ‹›å¤Ÿç‹ ã€‚é‡å¯åœ¨ç¨‹åºå‘˜å±Šçš„æ€æ‹›è¢«ä»–æ¥ä¸Šäº†ã€‚ä½†æ˜¯ï¼Œé‡å¯å¤±çµäº†ï¼Œé‡å¯åï¼Œå·²æœ‰çš„è¿æ¥è¿˜æ˜¯æ²¡æƒé™ã€‚å…·ä½“çš„è¡¨ç°æ˜¯ï¼Œå¤‡åº“ä¸Šçš„å¤åˆ¶è¿æ¥è¿˜æ˜¯æœªæƒé™ã€‚â€\nä¸»åº“é‡å¯çš„è¯ï¼Œå¤‡åº“çš„è¿æ¥ä¹Ÿæ˜¯é‡æ–°åˆ›å»ºçš„\n\nå¦‚æœâ€œé‡å¯æ— æ•ˆâ€è€Œâ€œkillè¿æ¥æœ‰æ•ˆâ€ï¼Œé‚£ä¸å¤ªåˆç†å“¦\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561983791,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2419120,"avatar":"https://static001.geekbang.org/account/avatar/00/24/e9/b0/43c00943.jpg","nickname":"äººäººæœ‰åŠŸç»ƒ","note":"","ucode":"5B4DC86867B14D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351259,"discussion_content":"å“ˆå“ˆå“ˆ  å¥½ç©","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614218343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":202739,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1586061017,"is_pvip":true,"discussion_count":4,"race_medal":1,"score":"14470962905","product_id":100020801,"comment_content":"ä¸ºä»€ä¹ˆæ‰§è¡Œ grant èµ‹æƒçš„å‘½ä»¤æ—¶ï¼Œåé¢è¿˜è¦åŠ ä¸Š with grant option å‘¢ï¼Ÿ è¯•äº†ä¸€ä¸‹ä¸åŠ ä¹Ÿæ˜¯å¯ä»¥çš„","like_count":4,"discussions":[{"author":{"id":1285652,"avatar":"","nickname":"mycat","note":"","ucode":"6878BD32D042F2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327428,"discussion_content":"è¿™ä¸ªwith grant optionçš„æ„æ€æ˜¯å…è®¸è¿™ä¸ªè¢«æˆæƒçš„ç”¨æˆ·ï¼ŒæŠŠä»–æ‰€å…·æœ‰çš„æƒé™å†æˆäºˆå…¶ä»–ç”¨æˆ·ã€‚æ²¡æœ‰è¿™ä¸ªå…³é”®è¯ï¼Œåˆ™è¿™ä¸ªè¢«æˆæƒçš„ç”¨æˆ·åªèƒ½è‡ªå·±æœ‰ç”¨å½“å‰èµ‹äºˆä»–çš„æƒé™ã€‚ä»–ä¸èƒ½æŠŠä»–çš„æƒé™å†å¤åˆ¶ç»™å…¶ä»–ç”¨æˆ·ã€‚","likes_number":12,"is_delete":false,"is_hidden":false,"ctime":1605836236,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2166073,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/k3YD3y3BzGDSdrwRJyJY4BXsNJibfM4uzOdDVKIAlFApR2FZCLg2ibrZtJ4vuahA3LHLW9GKzH5CMGqCDhWjhZqg/132","nickname":"æˆ’é…’çš„æç™½","note":"","ucode":"744E1A22761647","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1285652,"avatar":"","nickname":"mycat","note":"","ucode":"6878BD32D042F2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372988,"discussion_content":"å­¦åˆ°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620557077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":327428,"ip_address":""},"score":372988,"extra":""}]},{"author":{"id":1786819,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/43/c3/2c53acd7.jpg","nickname":"é›„é¹°","note":"","ucode":"67E0C4BDE7F6F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302634,"discussion_content":"å…¶å®æˆ‘ä¸€ç›´ä¹Ÿæœ‰è¿™ä¸ªç–‘é—®ï¼Œå‰é¢çš„all ä¸æ˜¯å·²ç»åŒ…æ‹¬äº†grantæƒé™äº†å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598974532,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1167324,"avatar":"https://static001.geekbang.org/account/avatar/00/11/cf/dc/f119f657.jpg","nickname":"0ck0","note":"","ucode":"6DCD6ECE7B9BF0","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1786819,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/43/c3/2c53acd7.jpg","nickname":"é›„é¹°","note":"","ucode":"67E0C4BDE7F6F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":555720,"discussion_content":"all ä¸åŒ…æ‹¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647047779,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":302634,"ip_address":""},"score":555720,"extra":""}]}]},{"had_liked":false,"id":184650,"user_name":"ä¸è´Ÿé’æ˜¥ä¸è´Ÿå·±ğŸ¤˜","can_delete":false,"product_type":"c1","uid":1363671,"ip_address":"","ucode":"A6DD8E8B20EA6E","user_header":"https://static001.geekbang.org/account/avatar/00/14/ce/d7/5315f6ce.jpg","comment_is_top":false,"comment_ctime":1583377558,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"14468279446","product_id":100020801,"comment_content":"æˆ‘ä»¥å‰ä¸€ç›´ä»¥ä¸ºæ–°å¢åŠ çš„æˆæƒï¼Œåªé’ˆå¯¹æ–°çš„è¿æ¥ç”Ÿæ•ˆï¼Œå¯¹äºå·²å­˜åœ¨çš„æƒé™ï¼Œä¸ç”Ÿæ•ˆï¼Œç°åœ¨æ˜¯å¯¹äºæŸä¸ªç”¨æˆ·æˆäºˆå…¨å±€çš„æƒé™ï¼Œå¯¹äºå·²å­˜åœ¨çš„è¿æ¥ä¸ç”Ÿæ•ˆï¼Œå¯¹äº db,table ç›¸å…³çš„æƒé™æ˜¯å¯¹äºå·²å­˜åœ¨çš„è¿æ¥å’Œæ–°çš„è¿æ¥éƒ½æ˜¯ç«‹å³ç”Ÿæ•ˆ","like_count":4},{"had_liked":false,"id":122109,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1565305787,"is_pvip":false,"replies":[{"id":"44881","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","comment_id":122109,"uid":"1264162","ip_address":"","utype":1,"ctime":1565319757,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"14450207675","product_id":100020801,"comment_content":"è¿™ç¯‡å®¹æ˜“æ¶ˆåŒ–ï¼Œè€å¸ˆè¾›è‹¦ï¼Œä½ ä¸è®²è¿™ä¸ªï¼Œæˆ‘æƒ³æˆ‘å¾ˆéš¾å‘ç°è¿™ä¸ªç»†èŠ‚ï¼Œä¸šåŠ¡å¼€å‘å¢åˆ æ”¹æŸ¥ç”¨çš„å¤šï¼Œå…¶ä»–å‘½ä»¤å¹³æ—¶ä¸å’‹ç”¨ã€‚<br>å¤šç©æ‰èƒ½å‘ç°æ›´å¤šå¥½ç©çš„ï¼Œå¦‚æœèƒ½æœ‰å‡ ä¸ªè€å¸ˆè¿™æ ·çš„æœ‹å‹ä¸€èµ·ç©ï¼Œé‚£è¯¥æœ‰å¤šå¥½ç©ã€‚","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462103,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565319757,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":68195,"user_name":"Sinyo","can_delete":false,"product_type":"c1","uid":1307297,"ip_address":"","ucode":"57B243E7AB86A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJAibnPX9jW8kqLcIfibjic8GbkQkEUYyFKJkc39hZhibVlNrqwTjdLozkqibI2IwACd5YzofYickNxFnZg/132","comment_is_top":false,"comment_ctime":1550455630,"is_pvip":false,"replies":[{"id":"24140","content":"ğŸ‘<br><br><br>è¿™ç¬¬äºŒä¸ªå†™æ³•è·Ÿï¼š<br>select order_key ,createtime FROM aaa force index(createtime) group by order_key<br> çš„é€»è¾‘è¯­ä¹‰ç›¸åŒå—ï¼Ÿ<br>","user_name":"ä½œè€…å›å¤","comment_id":68195,"uid":"1264162","ip_address":"","utype":1,"ctime":1550462244,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"14435357518","product_id":100020801,"comment_content":"æŸ¥ä¸€å¼ å¤§è¡¨ï¼Œorder_keyå­—æ®µå€¼å¯¹åº”çš„æœ€å°createtimeï¼›<br>ä»¥å‰ä¸€ç›´ç”¨æ–¹æ³•ä¸€æŸ¥æ•°ï¼Œåæ¥åŒäº‹è¯´å¯ä»¥ä¼˜åŒ–æˆæ–¹æ³•äºŒï¼ŒæŸ¥è¯¢æ•ˆç‡æ¯”æ–¹æ³•ä¸€é«˜äº†å‡ å€ï¼›<br>mysqlç‰¹æœ‰çš„group byåŠŸèƒ½ï¼Œæ²¡æœ‰group byçš„å­—æ®µé»˜è®¤å–æŸ¥åˆ°çš„ç¬¬ä¸€æ¡è®°å½•ï¼›<br><br>æ–¹æ³•ä¸€ï¼š<br>select distinct order_key<br>      ,createtime<br>  from (select order_key<br>              ,min(createtime) createtime<br>          from aaa<br>         group by order_key) a<br>  join aaa b<br>    on a.order_key = b.order_key<br>   and a.createtime = b.createtime<br><br>æ–¹æ³•äºŒï¼š<br>select order_key<br>      ,createtime<br>  from (select order_key<br>              ,createtime<br>          FROM aaa<br>         order by createtime<br>       ) a<br> group by order_key","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439558,"discussion_content":"ğŸ‘\n\n\nè¿™ç¬¬äºŒä¸ªå†™æ³•è·Ÿï¼š\nselect order_key ,createtime FROM aaa force index(createtime) group by order_key\n çš„é€»è¾‘è¯­ä¹‰ç›¸åŒå—ï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550462244,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335922,"discussion_content":"ä½œè€…çš„æ–¹æ¡ˆæ„Ÿè§‰æŠŠæ–¹æ³•2ï¼Œç»™ä¼˜åŒ–äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608386063,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296550,"user_name":"å¼ è¯š","can_delete":false,"product_type":"c1","uid":1115702,"ip_address":"","ucode":"F623703194769B","user_header":"https://static001.geekbang.org/account/avatar/00/11/06/36/d288bcc7.jpg","comment_is_top":false,"comment_ctime":1623038928,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5918006224","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸€ä¸ªé—®é¢˜ã€‚åœ¨æˆ‘ä»¬çš„ç¨‹åºä¸­ï¼Œå¾€å¾€ä¼šç”¨åˆ°æ•°æ®åº“è¿æ¥æ± ã€‚åœ¨ä¿®æ”¹mysqlä¸€äº›å…¨å±€é…ç½®æ—¶ï¼Œå¾€å¾€åªä¼šå¯¹åç»­æ–°å»ºç«‹çš„è¿æ¥æ‰ç”Ÿæ•ˆã€‚ä½†æ˜¯æ•°æ®åº“è¿æ¥æ± ä¸­é‚£ç§è€çš„è¿æ¥å°±ä¼šä¸€ç›´æ˜¯åŸæ¥çš„é…ç½®ã€‚<br>è¿™ç§æƒ…å†µæˆ‘ä»¬æ˜¯å¿…é¡»é‡å¯åº”ç”¨æ‰è¡Œå—ï¼Ÿ<br>è¿˜æœ‰èƒ½å¤§æ¦‚è¯´ä¸€ä¸‹ä¿®æ”¹é…ç½®ï¼Œåªå¯¹åç»­æ–°å¢çš„è¿æ¥ç”Ÿæ•ˆçš„é…ç½®çš„ä¾‹å­å—ï¼Ÿ<br>ç±»ä¼¼ä¿®æ”¹å…¨å±€çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œsql_modeçš„å‚æ•°å¥½åƒä¹Ÿæ˜¯","like_count":2},{"had_liked":false,"id":69055,"user_name":"è¤ç«è™«","can_delete":false,"product_type":"c1","uid":1333142,"ip_address":"","ucode":"FA4AB9636C53C4","user_header":"https://static001.geekbang.org/account/avatar/00/14/57/96/b65bdf43.jpg","comment_is_top":false,"comment_ctime":1550652760,"is_pvip":false,"replies":[{"id":"24492","content":"ğŸ‘<br>æ˜¯çœŸçˆ±","user_name":"ä½œè€…å›å¤","comment_id":69055,"uid":"1264162","ip_address":"","utype":1,"ctime":1550659480,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"5845620056","product_id":100020801,"comment_content":"åšæŒåˆ°æœ€å ä¸ºè€å¸ˆæ‰“call","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439934,"discussion_content":"ğŸ‘\næ˜¯çœŸçˆ±","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550659480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":68591,"user_name":"èˆœ","can_delete":false,"product_type":"c1","uid":1221029,"ip_address":"","ucode":"F5778B1F9290FD","user_header":"https://static001.geekbang.org/account/avatar/00/12/a1/a5/2100367c.jpg","comment_is_top":false,"comment_ctime":1550552308,"is_pvip":false,"replies":[{"id":"24357","content":"37ç¯‡è®²äº†group byçš„ï¼Œä½ çœ‹ä¸‹<br><br>è¿˜æœ‰é—®å†æå‡ºæ¥ğŸ˜†","user_name":"ä½œè€…å›å¤","comment_id":68591,"uid":"1264162","ip_address":"","utype":1,"ctime":1550561961,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"5845519604","product_id":100020801,"comment_content":"è€å¸ˆï¼Œä»‹ç»å®Œäº†order byåèƒ½ä¸èƒ½ç»§ç»­ä»‹ç»ä¸‹group byçš„åŸç†ï¼Ÿç­‰äº†å¥½ä¹…äº†ï¼Œä¸€ç›´æƒ³ç»§ç»­åœ¨order byåŸºç¡€ä¸Šç†è§£ä¸‹group byï¼Œåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¸¤è€…åœ¨ç´¢å¼•åˆ©ç”¨ä¸Šå¾ˆç›¸è¿‘ï¼Œæ€§èƒ½è€ƒè™‘ä¹Ÿç±»ä¼¼","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439742,"discussion_content":"37ç¯‡è®²äº†group byçš„ï¼Œä½ çœ‹ä¸‹\n\nè¿˜æœ‰é—®å†æå‡ºæ¥ğŸ˜†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550561961,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":68147,"user_name":"çˆ¸çˆ¸å›æ¥äº†","can_delete":false,"product_type":"c1","uid":1305016,"ip_address":"","ucode":"30B8C927C04D66","user_header":"","comment_is_top":false,"comment_ctime":1550448721,"is_pvip":false,"replies":[{"id":"24131","content":"ğŸ˜†ä½ è¯´çš„æ˜¯å‚æ•°çš„åå­—ï¼Œè¿˜æ˜¯å‚æ•°çš„å€¼ï¼Ÿ<br>","user_name":"ä½œè€…å›å¤","comment_id":68147,"uid":"1264162","ip_address":"","utype":1,"ctime":1550452608,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"5845416017","product_id":100020801,"comment_content":"ä¼—æ‰€å‘¨çŸ¥ï¼Œsqlæ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ã€‚ç„¶è€Œï¼Œæ¶‰åŠæ’ä»¶çš„å˜é‡å´ä¸æ˜¯è¿™æ ·ï¼›ä¸Šæ¬¡åœ¨é…ç½®ä¸€ä¸ªæ’ä»¶çš„å‚æ•°çš„æ—¶å€™ï¼Œè‹¦æ€è‰¯ä¹…â€¦â€¦æœ€åå‘ç°äº†è¿™ä¸ªé—®é¢˜ã€‚éš¾å—ğŸ˜­","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439536,"discussion_content":"ğŸ˜†ä½ è¯´çš„æ˜¯å‚æ•°çš„åå­—ï¼Œè¿˜æ˜¯å‚æ•°çš„å€¼ï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550452608,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332015,"user_name":"PRETEXT","can_delete":false,"product_type":"c1","uid":2438545,"ip_address":"","ucode":"BBA18231EE4EDA","user_header":"https://static001.geekbang.org/account/avatar/00/25/35/91/d523a803.jpg","comment_is_top":false,"comment_ctime":1642985079,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1642985079","product_id":100020801,"comment_content":"è²Œä¼¼ä¿®æ”¹ç”¨æˆ·å¯†ç éœ€è¦flushprivilege,æ–°é“¾æ¥æ‰å¯ä»¥ç”¨æ–°å¯†ç é“¾æ¥","like_count":0},{"had_liked":false,"id":289274,"user_name":"giteebravo","can_delete":false,"product_type":"c1","uid":1005290,"ip_address":"","ucode":"C087E8D6B5A98B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/ea/32608c44.jpg","comment_is_top":false,"comment_ctime":1618965655,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1618965655","product_id":100020801,"comment_content":"<br>é¢å¯¹ä¸€ä¸ªæ•°æ®åº“ï¼Œæ€ä¹ˆå‘ç°æœ‰è¿™ç±»ä¸è§„èŒƒçš„æƒé™æ“ä½œå­˜åœ¨å‘¢ï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":275547,"user_name":"è€K","can_delete":false,"product_type":"c1","uid":1144458,"ip_address":"","ucode":"B9ED8A82942D1D","user_header":"https://static001.geekbang.org/account/avatar/00/11/76/8a/74cf038a.jpg","comment_is_top":false,"comment_ctime":1611580329,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1611580329","product_id":100020801,"comment_content":"å®æµ‹äº†ä¸€æŠŠï¼š<br>è¿æ¥Aï¼š<br>CREATE USER &#39;tester&#39; @&#39;%&#39; IDENTIFIED BY &#39;pa&#39;;<br><br>è¿æ¥Bï¼š<br>ä½¿ç”¨ tester ç™»å½•æ­£å¸¸è¿æ¥<br><br>éšååœ¨è¿æ¥Aé‡Œé¢æ‰§è¡Œï¼š<br>REVOKE ALL PRIVILEGES ON *.* <br>FROM<br>\t&#39;tester&#39; @&#39;%&#39;;<br><br>flush PRIVILEGES;<br><br>æ— è®ºæ€ä¹ˆç€éƒ½å¯ä»¥ä½¿ç”¨ testerè¿æ¥ä¸Šæ¥ï¼Œè¿™æ˜¯æ€ä¹ˆäº†ï¼Ÿè®©äººå‡Œä¹±<br>åªæœ‰ service mysql restart æ–¹å¯ç”Ÿæ•ˆ.<br>MySQL ç‰ˆæœ¬ï¼š5.5.6<br>ä½¿ç”¨çš„ Navicat å®¢æˆ·ç«¯","like_count":1,"discussions":[{"author":{"id":2723576,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epxppZUun6eqepI5hGHjU3fP8yVIicUq7gYRZfR3PoDCMQqd2ia8CmCSa1mIIf6OYGFjbW28RCXmrJQ/132","nickname":"Geek_aef4be","note":"","ucode":"F1C3F2AE3CCA0F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585189,"discussion_content":"ä½ æ˜¯ä¸æ˜¯è¿˜æœ‰ä¸€ä¸ªtester@ipçš„ç”¨æˆ·ï¼Œtester@%æ˜¯ä¸¤ä¸ªä¸åŒçš„ç”¨æˆ·å’¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661391918,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":186924,"user_name":"å¤©äº®å‰è¯´æ™šå®‰","can_delete":false,"product_type":"c1","uid":1541014,"ip_address":"","ucode":"1D82EE562A7C71","user_header":"https://static001.geekbang.org/account/avatar/00/17/83/96/73ff13a0.jpg","comment_is_top":false,"comment_ctime":1583974027,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583974027","product_id":100020801,"comment_content":"çº¿ç¨‹å†…çš„æƒé™æ˜¯ä¸æ˜¯æ²¡æ³•åˆ·æ–°çš„å•Šï¼Ÿå› ä¸ºflushåªæ˜¯åŒæ­¥å†…å­˜ä¸­å…¨å±€æƒé™æ•°ç»„çš„å€¼ã€‚","like_count":0},{"had_liked":false,"id":148470,"user_name":"AlphaLiu","can_delete":false,"product_type":"c1","uid":1127786,"ip_address":"","ucode":"B75A4C82E7DC03","user_header":"https://static001.geekbang.org/account/avatar/00/11/35/6a/8ab55564.jpg","comment_is_top":false,"comment_ctime":1573013038,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573013038","product_id":100020801,"comment_content":"åœ¨ç”Ÿäº§åº“è¿›è¡Œå…¨é‡å¤‡ä»½ï¼š<br>mysqldump -uroot -p654321 --all-databases &gt; alldatabases.sql<br>åœ¨æœ¬åœ°åº“æ¢å¤ï¼š<br>mysql -uroot -p123456 &lt; alldatabases.sql<br>æ¢å¤åï¼Œè¿˜æ˜¯èƒ½ä½¿ç”¨mysql -uroot -p123456ç™»å½•ï¼Œ<br>è€Œmysql -uroot -p654321ï¼Œä¸èƒ½ç™»å½•ã€‚<br>å¿…é¡»flush privilegesæˆ–è€…systemctl restart mysqld.serviceåï¼Œ<br>æ¢å¤åçš„rootå¯†ç æ‰èƒ½ç”Ÿæ•ˆã€‚<br>è¯·æ•™ä¸‹è€å¸ˆï¼Œè¿™æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ","like_count":0},{"had_liked":false,"id":112484,"user_name":"æœä¼Ÿ","can_delete":false,"product_type":"c1","uid":1154580,"ip_address":"","ucode":"C804ACEB176D5E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/8Zs7gEMVq90uejXZMvA409gcln7d9TJgvOW5GQPSfSN0eOTgibhmyKvWltOrtRxdODXGl9zg1eUbAAfliaTicUKqQ/132","comment_is_top":false,"comment_ctime":1562744224,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562744224","product_id":100020801,"comment_content":"å…¨å±€æƒé™ã€å¯¹äºä¸€ä¸ªå·²ç»å­˜åœ¨çš„è¿æ¥ï¼Œå®ƒçš„å…¨å±€æƒé™ä¸å— grant å‘½ä»¤çš„å½±å“ã€‚é‚£å¦‚æœæˆ‘è¦æ›´æ–°å·²å»ºç«‹è¿æ¥çš„æƒé™ã€æ€ä¹ˆåŠã€éš¾é“å¿…é¡»é‡æ–°å»ºç«‹è¿æ¥æ‰èƒ½ç”Ÿæ•ˆå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":112409,"user_name":"William","can_delete":false,"product_type":"c1","uid":1346215,"ip_address":"","ucode":"55F5D9DEE485B1","user_header":"https://static001.geekbang.org/account/avatar/00/14/8a/a7/674c1864.jpg","comment_is_top":false,"comment_ctime":1562729359,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1562729359","product_id":100020801,"comment_content":"ä»æ–‡ä¸­äº†è§£åˆ°, flush privileges å®é™…ä¸Šå°±æ˜¯ä¿è¯ç£ç›˜ä¸å†…å­˜çš„æ•°æ®ä¸€è‡´æ€§.<br>å¦‚æœä¸€è‡´,é‚£ä¹ˆæ— éœ€æ‰§è¡Œ(æ‰§è¡Œäº†ä¹Ÿæ²¡å…³ç³», ä½†æ˜¯å±äºç”»è›‡æ·»è¶³), <br>ä½†æ˜¯ä¸ä¸€è‡´, å°±éœ€è¦æ‰§è¡Œ..<br><br><br>å…¨å±€çš„æƒé™ä¿®æ”¹, ä¸å½±å“å½“å‰å·²æœ‰çº¿ç¨‹, æ–°çº¿ç¨‹å»ºç«‹é‡‡ç”¨æ–°çš„æƒé™.<br>è€Œå¯¹äºdb è¡¨ åˆ— çš„ æƒé™ æ“ä½œ, å®æ—¶ç”Ÿæ•ˆ. ","like_count":0},{"had_liked":false,"id":68748,"user_name":"wljs","can_delete":false,"product_type":"c1","uid":1306543,"ip_address":"","ucode":"6B88A664972AD2","user_header":"https://static001.geekbang.org/account/avatar/00/13/ef/af/ba786593.jpg","comment_is_top":false,"comment_ctime":1550591494,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1550591494","product_id":100020801,"comment_content":"è€å¸ˆæˆ‘æƒ³é—®ä¸ªé—®é¢˜ æˆ‘ä»¬å…¬å¸ä¸€ä¸ªè®¢å•è¡¨æœ‰110ä¸ªå­—æ®µ æƒ³æ‹†åˆ†æˆä¸¤ä¸ªè¡¨ ç¬¬ä¸€ä¸ªè¡¨æ”¾ç»å¸¸æŸ¥çš„å­—æ®µ ç¬¬äºŒä¸ªè¡¨æ”¾ä¸å¸¸æŸ¥çš„ ç°åœ¨ç¨‹åºç«¯ä¸æƒ³æ”¹sqlï¼Œæ•°æ®åº“ç«¯æ¥å®ç° å½“æŸ¥è¯¢å­—æ®µä¸­ ç¬¬ä¸€ä¸ªè¡¨ä¸å­˜åœ¨ å°±å»å…³è”ç¬¬äºŒä¸ªè¡¨æŸ¥å‡ºæ•°æ®  dbèƒ½å®ç°ä¸ï¼Ÿ","like_count":0},{"had_liked":false,"id":68435,"user_name":"XD","can_delete":false,"product_type":"c1","uid":1079293,"ip_address":"","ucode":"DC9DCFB3841A4E","user_header":"https://static001.geekbang.org/account/avatar/00/10/77/fd/c6619535.jpg","comment_is_top":false,"comment_ctime":1550499933,"is_pvip":false,"replies":[{"id":"24234","content":"acl_dbsæ˜¯å…¨å±€æ•°ç»„<br><br>æŠŠä½ ä½¿ç”¨sqlè¯­å¥ï¼Œå’Œè¯­å¥åºåˆ—å‘ä¸€ä¸‹å“¦<br><br>ç±»ä¼¼æŒ‰ç…§æ—¶é—´é¡ºåº<br>session aï¼š<br>  xxx<br>  xxx<br>session b:<br>   xxxx<br>session a:<br>   xxxx<br>è¿™æ ·","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1550501963,"ip_address":"","comment_id":68435,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1550499933","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå®é™…æµ‹è¯•äº†ä¸‹ã€‚<br>ä¸¤ä¸ªä¼šè¯abï¼Œç™»é™†è´¦å·éƒ½ä¸ºuserã€‚aä¸­ç»™useræˆäºˆdb1çš„selectã€updateæƒé™ï¼Œbåˆ‡æ¢åˆ°db1ï¼Œå¯ä»¥æ­£å¸¸å¢æ”¹ã€‚ç„¶åaä¸­å›æ”¶è¯¥ç”¨æˆ·çš„dbæƒé™ï¼Œbä¼šè¯ä¸­çš„ç”¨æˆ·è¿˜æ˜¯å¯ä»¥è¿›è¡Œå¢æ”¹æ“ä½œçš„ã€‚<br>æˆ‘å‘ç°ç”¨æˆ·çš„dbæƒé™å¥½åƒæ˜¯åœ¨åˆ‡æ¢æ•°æ®åº“çš„æ—¶å€™åˆ·æ–°çš„ï¼Œåªè¦ä¸åˆ‡æ¢ï¼Œgrantæ“ä½œå¹¶ä¸ä¼šäº§ç”Ÿä½œç”¨ï¼Œæ‰€ä»¥acl_dbæ˜¯å¦ä¹Ÿæ˜¯ç»´æŠ¤åœ¨çº¿ç¨‹å†…éƒ¨çš„å‘¢ï¼Ÿ<br><br>ä»¥åŠï¼Œæƒé™æ£€éªŒåº”è¯¥æ˜¯åœ¨ä¼˜åŒ–å™¨çš„è¯­ä¹‰åˆ†æé‡Œè¿›è¡Œçš„å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439672,"discussion_content":"acl_dbsæ˜¯å…¨å±€æ•°ç»„\n\næŠŠä½ ä½¿ç”¨sqlè¯­å¥ï¼Œå’Œè¯­å¥åºåˆ—å‘ä¸€ä¸‹å“¦\n\nç±»ä¼¼æŒ‰ç…§æ—¶é—´é¡ºåº\nsession aï¼š\n  xxx\n  xxx\nsession b:\n   xxxx\nsession a:\n   xxxx\nè¿™æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550501963,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":68203,"user_name":"æ™¨æ€æš®è¯­","can_delete":false,"product_type":"c1","uid":1304974,"ip_address":"","ucode":"F21D2FDCDD6B43","user_header":"https://static001.geekbang.org/account/avatar/00/13/e9/8e/6dc15a91.jpg","comment_is_top":false,"comment_ctime":1550456883,"is_pvip":false,"replies":[{"id":"25256","content":"è¿™ä¸ªè·Ÿbinlog_formatæœ‰å…³ã€‚<br><br>å¦‚æœbinlog_format=row,  é‚£ä¹ˆæœ€åsession Açš„selectæŸ¥åˆ°çš„æ˜¯2ï¼›<br>å¦‚æœbinlog_format=statement,  é‚£ä¹ˆæœ€åsession Açš„selectæŸ¥åˆ°çš„æ˜¯3ï¼›<br><br>æˆ‘ä»¬åœ¨æ–‡ç« é‡Œé¢æœ‰åšäº†è¯´æ˜äº†ï¼Œè¿™ä¸ªé€»è¾‘æ˜¯ä¾èµ–äºâ€œMySQLåœ¨æ‰§è¡Œupdateè¯­å¥çš„æ—¶å€™ï¼Œæœ‰æ²¡æœ‰æŠŠå­—æ®µcä¹Ÿè¯»è¿›æ¥â€ï¼Œ<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1551182661,"ip_address":"","comment_id":68203,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1550456883","product_id":100020801,"comment_content":"ä¸è€å¸ˆ,æ‚¨å¥½ï¼š<br>å…³äºä¸Šä¸€ç« æˆ‘ç•™è¨€çš„ç–‘é—®,æˆ‘é‡æ–°æ•´ç†äº†ä¸‹ã€‚å°±æ˜¯ç¬¬åäº”ç« ä¸­è€å¸ˆç•™çš„æ€è€ƒé¢˜ã€‚<br>æˆ‘æ¨¡æ‹Ÿäº†è€å¸ˆçš„å®éªŒ,ç»“æœæœ‰ç‚¹å‡ºå…¥,è¯·è€å¸ˆå¸®å¿™çœ‹çœ‹ï¼Œè°¢è°¢ï¼<br>åŸºç¡€ç¯å¢ƒ:<br>mysql&gt; select version();<br>+------------+<br>| version()  |<br>+------------+<br>| 5.7.22-log |<br>+------------+<br>1 row in set (0.00 sec)<br><br>mysql&gt; show variables like &#39;%tx%&#39;;<br>+---------------+-----------------+<br>| Variable_name | Value           |<br>+---------------+-----------------+<br>| tx_isolation  | REPEATABLE-READ |<br>| tx_read_only  | OFF             |<br>+---------------+-----------------+<br>2 rows in set (0.00 sec)<br>æ¨¡æ‹Ÿå®éªŒ:<br>session A:\t                                         <br>mysql&gt; begin;\t<br>mysql&gt; select * from t;\t<br>+----+------+\t<br>| id | a    |\t<br>+----+------+\t<br>|  1 |    2 |\t<br>+----+------+\t<br>1 row in set (0.00 sec)\t<br><br>session B:                                          <br>mysql&gt; update t set a=3 where id=1;      <br>Query OK, 1 row affected (0.00 sec)      <br>Rows matched: 1  Changed: 1  Warnings: 0 \t                                                  <br><br>SESSION A:                                                 <br>mysql&gt;  update t set a=3 where id=1;\t<br>Query OK, 0 rows affected (0.00 sec)\t<br>Rows matched: 1  Changed: 0  Warnings: 0\t<br>&#47;*è€å¸ˆçš„å®éªŒæ˜¾ç¤ºä¸ºï¼š1 rows affected*&#47;\t<br>mysql&gt; select * from t where id=1;\t<br>+----+------+\t<br>| id | a    |\t<br>+----+------+\t<br>|  1 |    2 |\t<br>+----+------+\t<br>1 row in set (0.00 sec)\t<br>&#47;*è€å¸ˆå®éªŒçš„æŸ¥è¯¢ç»“æœä¸ºï¼š1,3\t*&#47;","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439564,"discussion_content":"è¿™ä¸ªè·Ÿbinlog_formatæœ‰å…³ã€‚\n\nå¦‚æœbinlog_format=row,  é‚£ä¹ˆæœ€åsession Açš„selectæŸ¥åˆ°çš„æ˜¯2ï¼›\nå¦‚æœbinlog_format=statement,  é‚£ä¹ˆæœ€åsession Açš„selectæŸ¥åˆ°çš„æ˜¯3ï¼›\n\næˆ‘ä»¬åœ¨æ–‡ç« é‡Œé¢æœ‰åšäº†è¯´æ˜äº†ï¼Œè¿™ä¸ªé€»è¾‘æ˜¯ä¾èµ–äºâ€œMySQLåœ¨æ‰§è¡Œupdateè¯­å¥çš„æ—¶å€™ï¼Œæœ‰æ²¡æœ‰æŠŠå­—æ®µcä¹Ÿè¯»è¿›æ¥â€ï¼Œ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551182661,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1148537,"avatar":"https://static001.geekbang.org/account/avatar/00/11/86/79/28fcafa6.jpg","nickname":"èƒ¡çº¢ä¼Ÿî”«","note":"","ucode":"33F12A97311F63","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281719,"discussion_content":"æˆ‘åšäº†å®éªŒå‘ç°ï¼Œæ— è®ºrrè¿˜æ˜¯rcï¼Œrowè¿˜æ˜¯statementï¼Œéƒ½ä¸ä¼šçœŸæ­£å»ä¿®æ”¹å†…å­˜æ•°æ®é¡µï¼Œä½†ä¼šæŒæœ‰è¡Œé”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591797673,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}