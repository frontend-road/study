{"id":76795,"title":"25 | MySQLæ˜¯æ€ä¹ˆä¿è¯é«˜å¯ç”¨çš„ï¼Ÿ","content":"<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å’Œä½ ä»‹ç»äº†binlogçš„åŸºæœ¬å†…å®¹ï¼Œåœ¨ä¸€ä¸ªä¸»å¤‡å…³ç³»ä¸­ï¼Œæ¯ä¸ªå¤‡åº“æ¥æ”¶ä¸»åº“çš„binlogå¹¶æ‰§è¡Œã€‚</p><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œåªè¦ä¸»åº“æ‰§è¡Œæ›´æ–°ç”Ÿæˆçš„æ‰€æœ‰binlogï¼Œéƒ½å¯ä»¥ä¼ åˆ°å¤‡åº“å¹¶è¢«æ­£ç¡®åœ°æ‰§è¡Œï¼Œå¤‡åº“å°±èƒ½è¾¾åˆ°è·Ÿä¸»åº“ä¸€è‡´çš„çŠ¶æ€ï¼Œè¿™å°±æ˜¯æœ€ç»ˆä¸€è‡´æ€§ã€‚</p><p>ä½†æ˜¯ï¼ŒMySQLè¦æä¾›é«˜å¯ç”¨èƒ½åŠ›ï¼Œåªæœ‰æœ€ç»ˆä¸€è‡´æ€§æ˜¯ä¸å¤Ÿçš„ã€‚ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿä»Šå¤©æˆ‘å°±ç€é‡å’Œä½ åˆ†æä¸€ä¸‹ã€‚</p><p>è¿™é‡Œï¼Œæˆ‘å†æ”¾ä¸€æ¬¡ä¸Šä¸€ç¯‡æ–‡ç« ä¸­è®²åˆ°çš„åŒMç»“æ„çš„ä¸»å¤‡åˆ‡æ¢æµç¨‹å›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/89/cc/89290bbcf454ff9a3dc5de42a85a69cc.png?wh=1142*880\" alt=\"\"></p><center><span class=\"reference\">å›¾ 1 MySQLä¸»å¤‡åˆ‡æ¢æµç¨‹--åŒMç»“æ„</span></center><h1>ä¸»å¤‡å»¶è¿Ÿ</h1><p>ä¸»å¤‡åˆ‡æ¢å¯èƒ½æ˜¯ä¸€ä¸ªä¸»åŠ¨è¿ç»´åŠ¨ä½œï¼Œæ¯”å¦‚è½¯ä»¶å‡çº§ã€ä¸»åº“æ‰€åœ¨æœºå™¨æŒ‰è®¡åˆ’ä¸‹çº¿ç­‰ï¼Œä¹Ÿå¯èƒ½æ˜¯è¢«åŠ¨æ“ä½œï¼Œæ¯”å¦‚ä¸»åº“æ‰€åœ¨æœºå™¨æ‰ç”µã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å…ˆä¸€èµ·çœ‹çœ‹ä¸»åŠ¨åˆ‡æ¢çš„åœºæ™¯ã€‚</p><p>åœ¨ä»‹ç»ä¸»åŠ¨åˆ‡æ¢æµç¨‹çš„è¯¦ç»†æ­¥éª¤ä¹‹å‰ï¼Œæˆ‘è¦å…ˆè·Ÿä½ è¯´æ˜ä¸€ä¸ªæ¦‚å¿µï¼Œå³â€œåŒæ­¥å»¶è¿Ÿâ€ã€‚ä¸æ•°æ®åŒæ­¥æœ‰å…³çš„æ—¶é—´ç‚¹ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹ä¸‰ä¸ªï¼š</p><ol>\n<li>\n<p>ä¸»åº“Aæ‰§è¡Œå®Œæˆä¸€ä¸ªäº‹åŠ¡ï¼Œå†™å…¥binlogï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªæ—¶åˆ»è®°ä¸ºT1;</p>\n</li>\n<li>\n<p>ä¹‹åä¼ ç»™å¤‡åº“Bï¼Œæˆ‘ä»¬æŠŠå¤‡åº“Bæ¥æ”¶å®Œè¿™ä¸ªbinlogçš„æ—¶åˆ»è®°ä¸ºT2;</p>\n</li>\n<li>\n<p>å¤‡åº“Bæ‰§è¡Œå®Œæˆè¿™ä¸ªäº‹åŠ¡ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªæ—¶åˆ»è®°ä¸ºT3ã€‚</p>\n</li>\n</ol><p>æ‰€è°“ä¸»å¤‡å»¶è¿Ÿï¼Œå°±æ˜¯åŒä¸€ä¸ªäº‹åŠ¡ï¼Œåœ¨å¤‡åº“æ‰§è¡Œå®Œæˆçš„æ—¶é—´å’Œä¸»åº“æ‰§è¡Œå®Œæˆçš„æ—¶é—´ä¹‹é—´çš„å·®å€¼ï¼Œä¹Ÿå°±æ˜¯T3-T1ã€‚</p><p>ä½ å¯ä»¥åœ¨å¤‡åº“ä¸Šæ‰§è¡Œshow slave statuså‘½ä»¤ï¼Œå®ƒçš„è¿”å›ç»“æœé‡Œé¢ä¼šæ˜¾ç¤ºseconds_behind_masterï¼Œç”¨äºè¡¨ç¤ºå½“å‰å¤‡åº“å»¶è¿Ÿäº†å¤šå°‘ç§’ã€‚</p><!-- [[[read_end]]] --><p>seconds_behind_masterçš„è®¡ç®—æ–¹æ³•æ˜¯è¿™æ ·çš„ï¼š</p><ol>\n<li>\n<p>æ¯ä¸ªäº‹åŠ¡çš„binlog é‡Œé¢éƒ½æœ‰ä¸€ä¸ªæ—¶é—´å­—æ®µï¼Œç”¨äºè®°å½•ä¸»åº“ä¸Šå†™å…¥çš„æ—¶é—´ï¼›</p>\n</li>\n<li>\n<p>å¤‡åº“å–å‡ºå½“å‰æ­£åœ¨æ‰§è¡Œçš„äº‹åŠ¡çš„æ—¶é—´å­—æ®µçš„å€¼ï¼Œè®¡ç®—å®ƒä¸å½“å‰ç³»ç»Ÿæ—¶é—´çš„å·®å€¼ï¼Œå¾—åˆ°seconds_behind_masterã€‚</p>\n</li>\n</ol><p>å¯ä»¥çœ‹åˆ°ï¼Œå…¶å®seconds_behind_masterè¿™ä¸ªå‚æ•°è®¡ç®—çš„å°±æ˜¯T3-T1ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨seconds_behind_masteræ¥ä½œä¸ºä¸»å¤‡å»¶è¿Ÿçš„å€¼ï¼Œè¿™ä¸ªå€¼çš„æ—¶é—´ç²¾åº¦æ˜¯ç§’ã€‚</p><p>ä½ å¯èƒ½ä¼šé—®ï¼Œå¦‚æœä¸»å¤‡åº“æœºå™¨çš„ç³»ç»Ÿæ—¶é—´è®¾ç½®ä¸ä¸€è‡´ï¼Œä¼šä¸ä¼šå¯¼è‡´ä¸»å¤‡å»¶è¿Ÿçš„å€¼ä¸å‡†ï¼Ÿ</p><p>å…¶å®ä¸ä¼šçš„ã€‚å› ä¸ºï¼Œå¤‡åº“è¿æ¥åˆ°ä¸»åº“çš„æ—¶å€™ï¼Œä¼šé€šè¿‡æ‰§è¡ŒSELECT UNIX_TIMESTAMP()å‡½æ•°æ¥è·å¾—å½“å‰ä¸»åº“çš„ç³»ç»Ÿæ—¶é—´ã€‚å¦‚æœè¿™æ—¶å€™å‘ç°ä¸»åº“çš„ç³»ç»Ÿæ—¶é—´ä¸è‡ªå·±ä¸ä¸€è‡´ï¼Œå¤‡åº“åœ¨æ‰§è¡Œseconds_behind_masterè®¡ç®—çš„æ—¶å€™ä¼šè‡ªåŠ¨æ‰£æ‰è¿™ä¸ªå·®å€¼ã€‚</p><p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œåœ¨ç½‘ç»œæ­£å¸¸çš„æ—¶å€™ï¼Œæ—¥å¿—ä»ä¸»åº“ä¼ ç»™å¤‡åº“æ‰€éœ€çš„æ—¶é—´æ˜¯å¾ˆçŸ­çš„ï¼Œå³T2-T1çš„å€¼æ˜¯éå¸¸å°çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç½‘ç»œæ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸»å¤‡å»¶è¿Ÿçš„ä¸»è¦æ¥æºæ˜¯å¤‡åº“æ¥æ”¶å®Œbinlogå’Œæ‰§è¡Œå®Œè¿™ä¸ªäº‹åŠ¡ä¹‹é—´çš„æ—¶é—´å·®ã€‚</p><p>æ‰€ä»¥è¯´ï¼Œä¸»å¤‡å»¶è¿Ÿæœ€ç›´æ¥çš„è¡¨ç°æ˜¯ï¼Œå¤‡åº“æ¶ˆè´¹ä¸­è½¬æ—¥å¿—ï¼ˆrelay logï¼‰çš„é€Ÿåº¦ï¼Œæ¯”ä¸»åº“ç”Ÿäº§binlogçš„é€Ÿåº¦è¦æ…¢ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å°±å’Œä½ ä¸€èµ·åˆ†æä¸‹ï¼Œè¿™å¯èƒ½æ˜¯ç”±å“ªäº›åŸå› å¯¼è‡´çš„ã€‚</p><h1>ä¸»å¤‡å»¶è¿Ÿçš„æ¥æº</h1><p><strong>é¦–å…ˆï¼Œæœ‰äº›éƒ¨ç½²æ¡ä»¶ä¸‹ï¼Œå¤‡åº“æ‰€åœ¨æœºå™¨çš„æ€§èƒ½è¦æ¯”ä¸»åº“æ‰€åœ¨çš„æœºå™¨æ€§èƒ½å·®ã€‚</strong></p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæœ‰äººè¿™ä¹ˆéƒ¨ç½²æ—¶çš„æƒ³æ³•æ˜¯ï¼Œåæ­£å¤‡åº“æ²¡æœ‰è¯·æ±‚ï¼Œæ‰€ä»¥å¯ä»¥ç”¨å·®ä¸€ç‚¹å„¿çš„æœºå™¨ã€‚æˆ–è€…ï¼Œä»–ä»¬ä¼šæŠŠ20ä¸ªä¸»åº“æ”¾åœ¨4å°æœºå™¨ä¸Šï¼Œè€ŒæŠŠå¤‡åº“é›†ä¸­åœ¨ä¸€å°æœºå™¨ä¸Šã€‚</p><p>å…¶å®æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæ›´æ–°è¯·æ±‚å¯¹IOPSçš„å‹åŠ›ï¼Œåœ¨ä¸»åº“å’Œå¤‡åº“ä¸Šæ˜¯æ— å·®åˆ«çš„ã€‚æ‰€ä»¥ï¼Œåšè¿™ç§éƒ¨ç½²æ—¶ï¼Œä¸€èˆ¬éƒ½ä¼šå°†å¤‡åº“è®¾ç½®ä¸ºâ€œéåŒ1â€çš„æ¨¡å¼ã€‚</p><p>ä½†å®é™…ä¸Šï¼Œæ›´æ–°è¿‡ç¨‹ä¸­ä¹Ÿä¼šè§¦å‘å¤§é‡çš„è¯»æ“ä½œã€‚æ‰€ä»¥ï¼Œå½“å¤‡åº“ä¸»æœºä¸Šçš„å¤šä¸ªå¤‡åº“éƒ½åœ¨äº‰æŠ¢èµ„æºçš„æ—¶å€™ï¼Œå°±å¯èƒ½ä¼šå¯¼è‡´ä¸»å¤‡å»¶è¿Ÿäº†ã€‚</p><p>å½“ç„¶ï¼Œè¿™ç§éƒ¨ç½²ç°åœ¨æ¯”è¾ƒå°‘äº†ã€‚å› ä¸ºä¸»å¤‡å¯èƒ½å‘ç”Ÿåˆ‡æ¢ï¼Œå¤‡åº“éšæ—¶å¯èƒ½å˜æˆä¸»åº“ï¼Œæ‰€ä»¥ä¸»å¤‡åº“é€‰ç”¨ç›¸åŒè§„æ ¼çš„æœºå™¨ï¼Œå¹¶ä¸”åšå¯¹ç§°éƒ¨ç½²ï¼Œæ˜¯ç°åœ¨æ¯”è¾ƒå¸¸è§çš„æƒ…å†µã€‚</p><p>è¿½é—®1ï¼šä½†æ˜¯ï¼Œåšäº†å¯¹ç§°éƒ¨ç½²ä»¥åï¼Œè¿˜å¯èƒ½ä¼šæœ‰å»¶è¿Ÿã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>è¿™å°±æ˜¯<strong>ç¬¬äºŒç§å¸¸è§çš„å¯èƒ½äº†ï¼Œå³å¤‡åº“çš„å‹åŠ›å¤§</strong>ã€‚ä¸€èˆ¬çš„æƒ³æ³•æ˜¯ï¼Œä¸»åº“æ—¢ç„¶æä¾›äº†å†™èƒ½åŠ›ï¼Œé‚£ä¹ˆå¤‡åº“å¯ä»¥æä¾›ä¸€äº›è¯»èƒ½åŠ›ã€‚æˆ–è€…ä¸€äº›è¿è¥åå°éœ€è¦çš„åˆ†æè¯­å¥ï¼Œä¸èƒ½å½±å“æ­£å¸¸ä¸šåŠ¡ï¼Œæ‰€ä»¥åªèƒ½åœ¨å¤‡åº“ä¸Šè·‘ã€‚</p><p>æˆ‘çœŸå°±è§è¿‡ä¸å°‘è¿™æ ·çš„æƒ…å†µã€‚ç”±äºä¸»åº“ç›´æ¥å½±å“ä¸šåŠ¡ï¼Œå¤§å®¶ä½¿ç”¨èµ·æ¥ä¼šæ¯”è¾ƒå…‹åˆ¶ï¼Œåè€Œå¿½è§†äº†å¤‡åº“çš„å‹åŠ›æ§åˆ¶ã€‚ç»“æœå°±æ˜¯ï¼Œå¤‡åº“ä¸Šçš„æŸ¥è¯¢è€—è´¹äº†å¤§é‡çš„CPUèµ„æºï¼Œå½±å“äº†åŒæ­¥é€Ÿåº¦ï¼Œé€ æˆä¸»å¤‡å»¶è¿Ÿã€‚</p><p>è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬ä¸€èˆ¬å¯ä»¥è¿™ä¹ˆå¤„ç†ï¼š</p><ol>\n<li>\n<p>ä¸€ä¸»å¤šä»ã€‚é™¤äº†å¤‡åº“å¤–ï¼Œå¯ä»¥å¤šæ¥å‡ ä¸ªä»åº“ï¼Œè®©è¿™äº›ä»åº“æ¥åˆ†æ‹…è¯»çš„å‹åŠ›ã€‚</p>\n</li>\n<li>\n<p>é€šè¿‡binlogè¾“å‡ºåˆ°å¤–éƒ¨ç³»ç»Ÿï¼Œæ¯”å¦‚Hadoopè¿™ç±»ç³»ç»Ÿï¼Œè®©å¤–éƒ¨ç³»ç»Ÿæä¾›ç»Ÿè®¡ç±»æŸ¥è¯¢çš„èƒ½åŠ›ã€‚</p>\n</li>\n</ol><p>å…¶ä¸­ï¼Œä¸€ä¸»å¤šä»çš„æ–¹å¼å¤§éƒ½ä¼šè¢«é‡‡ç”¨ã€‚å› ä¸ºä½œä¸ºæ•°æ®åº“ç³»ç»Ÿï¼Œè¿˜å¿…é¡»ä¿è¯æœ‰å®šæœŸå…¨é‡å¤‡ä»½çš„èƒ½åŠ›ã€‚è€Œä»åº“ï¼Œå°±å¾ˆé€‚åˆç”¨æ¥åšå¤‡ä»½ã€‚</p><blockquote>\n<p>å¤‡æ³¨ï¼šè¿™é‡Œéœ€è¦è¯´æ˜ä¸€ä¸‹ï¼Œä»åº“å’Œå¤‡åº“åœ¨æ¦‚å¿µä¸Šå…¶å®å·®ä¸å¤šã€‚åœ¨æˆ‘ä»¬è¿™ä¸ªä¸“æ é‡Œï¼Œä¸ºäº†æ–¹ä¾¿æè¿°ï¼Œæˆ‘æŠŠä¼šåœ¨HAè¿‡ç¨‹ä¸­è¢«é€‰æˆæ–°ä¸»åº“çš„ï¼Œç§°ä¸ºå¤‡åº“ï¼Œå…¶ä»–çš„ç§°ä¸ºä»åº“ã€‚</p>\n</blockquote><p>è¿½é—®2ï¼šé‡‡ç”¨äº†ä¸€ä¸»å¤šä»ï¼Œä¿è¯å¤‡åº“çš„å‹åŠ›ä¸ä¼šè¶…è¿‡ä¸»åº“ï¼Œè¿˜æœ‰ä»€ä¹ˆæƒ…å†µå¯èƒ½å¯¼è‡´ä¸»å¤‡å»¶è¿Ÿå—ï¼Ÿ</p><p><strong>è¿™å°±æ˜¯ç¬¬ä¸‰ç§å¯èƒ½äº†ï¼Œå³å¤§äº‹åŠ¡ã€‚</strong></p><p>å¤§äº‹åŠ¡è¿™ç§æƒ…å†µå¾ˆå¥½ç†è§£ã€‚å› ä¸ºä¸»åº“ä¸Šå¿…é¡»ç­‰äº‹åŠ¡æ‰§è¡Œå®Œæˆæ‰ä¼šå†™å…¥binlogï¼Œå†ä¼ ç»™å¤‡åº“ã€‚æ‰€ä»¥ï¼Œå¦‚æœä¸€ä¸ªä¸»åº“ä¸Šçš„è¯­å¥æ‰§è¡Œ10åˆ†é’Ÿï¼Œé‚£è¿™ä¸ªäº‹åŠ¡å¾ˆå¯èƒ½å°±ä¼šå¯¼è‡´ä»åº“å»¶è¿Ÿ10åˆ†é’Ÿã€‚</p><p>ä¸çŸ¥é“ä½ æ‰€åœ¨å…¬å¸çš„DBAæœ‰æ²¡æœ‰è·Ÿä½ è¿™ä¹ˆè¯´è¿‡ï¼šä¸è¦<strong>ä¸€æ¬¡æ€§åœ°ç”¨deleteè¯­å¥åˆ é™¤å¤ªå¤šæ•°æ®</strong>ã€‚å…¶å®ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„å¤§äº‹åŠ¡åœºæ™¯ã€‚</p><p>æ¯”å¦‚ï¼Œä¸€äº›å½’æ¡£ç±»çš„æ•°æ®ï¼Œå¹³æ—¶æ²¡æœ‰æ³¨æ„åˆ é™¤å†å²æ•°æ®ï¼Œç­‰åˆ°ç©ºé—´å¿«æ»¡äº†ï¼Œä¸šåŠ¡å¼€å‘äººå‘˜è¦ä¸€æ¬¡æ€§åœ°åˆ æ‰å¤§é‡å†å²æ•°æ®ã€‚åŒæ—¶ï¼Œåˆå› ä¸ºè¦é¿å…åœ¨é«˜å³°æœŸæ“ä½œä¼šå½±å“ä¸šåŠ¡ï¼ˆè‡³å°‘æœ‰è¿™ä¸ªæ„è¯†è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼‰ï¼Œæ‰€ä»¥ä¼šåœ¨æ™šä¸Šæ‰§è¡Œè¿™äº›å¤§é‡æ•°æ®çš„åˆ é™¤æ“ä½œã€‚</p><p>ç»“æœï¼Œè´Ÿè´£çš„DBAåŒå­¦åŠå¤œå°±ä¼šæ”¶åˆ°å»¶è¿ŸæŠ¥è­¦ã€‚ç„¶åï¼ŒDBAå›¢é˜Ÿå°±è¦æ±‚ä½ åç»­å†åˆ é™¤æ•°æ®çš„æ—¶å€™ï¼Œè¦æ§åˆ¶æ¯ä¸ªäº‹åŠ¡åˆ é™¤çš„æ•°æ®é‡ï¼Œåˆ†æˆå¤šæ¬¡åˆ é™¤ã€‚</p><p><strong>å¦ä¸€ç§å…¸å‹çš„å¤§äº‹åŠ¡åœºæ™¯ï¼Œå°±æ˜¯å¤§è¡¨DDLã€‚</strong>è¿™ä¸ªåœºæ™¯ï¼Œæˆ‘åœ¨å‰é¢çš„æ–‡ç« ä¸­ä»‹ç»è¿‡ã€‚å¤„ç†æ–¹æ¡ˆå°±æ˜¯ï¼Œè®¡åˆ’å†…çš„DDLï¼Œå»ºè®®ä½¿ç”¨gh-ostæ–¹æ¡ˆï¼ˆè¿™é‡Œï¼Œä½ å¯ä»¥å†å›é¡¾ä¸‹ç¬¬13ç¯‡æ–‡ç« <a href=\"https://time.geekbang.org/column/article/72388\">ã€Šä¸ºä»€ä¹ˆè¡¨æ•°æ®åˆ æ‰ä¸€åŠï¼Œè¡¨æ–‡ä»¶å¤§å°ä¸å˜ï¼Ÿã€‹</a>ä¸­çš„ç›¸å…³å†…å®¹ï¼‰ã€‚</p><p>è¿½é—®3ï¼šå¦‚æœä¸»åº“ä¸Šä¹Ÿä¸åšå¤§äº‹åŠ¡äº†ï¼Œè¿˜æœ‰ä»€ä¹ˆåŸå› ä¼šå¯¼è‡´ä¸»å¤‡å»¶è¿Ÿå—ï¼Ÿ</p><p>é€ æˆä¸»å¤‡å»¶è¿Ÿè¿˜æœ‰ä¸€ä¸ªå¤§æ–¹å‘çš„åŸå› ï¼Œå°±æ˜¯<strong>å¤‡åº“çš„å¹¶è¡Œå¤åˆ¶èƒ½åŠ›</strong>ã€‚è¿™ä¸ªè¯é¢˜ï¼Œæˆ‘ä¼šç•™åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« å†å’Œä½ è¯¦ç»†ä»‹ç»ã€‚</p><p>å…¶å®è¿˜æ˜¯æœ‰ä¸å°‘å…¶ä»–æƒ…å†µä¼šå¯¼è‡´ä¸»å¤‡å»¶è¿Ÿï¼Œå¦‚æœä½ è¿˜ç¢°åˆ°è¿‡å…¶ä»–åœºæ™¯ï¼Œæ¬¢è¿ä½ åœ¨è¯„è®ºåŒºç»™æˆ‘ç•™è¨€ï¼Œæˆ‘æ¥å’Œä½ ä¸€èµ·åˆ†æã€è®¨è®ºã€‚</p><p>ç”±äºä¸»å¤‡å»¶è¿Ÿçš„å­˜åœ¨ï¼Œæ‰€ä»¥åœ¨ä¸»å¤‡åˆ‡æ¢çš„æ—¶å€™ï¼Œå°±ç›¸åº”çš„æœ‰ä¸åŒçš„ç­–ç•¥ã€‚</p><h1>å¯é æ€§ä¼˜å…ˆç­–ç•¥</h1><p>åœ¨å›¾1çš„åŒMç»“æ„ä¸‹ï¼Œä»çŠ¶æ€1åˆ°çŠ¶æ€2åˆ‡æ¢çš„è¯¦ç»†è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><ol>\n<li>\n<p>åˆ¤æ–­å¤‡åº“Bç°åœ¨çš„seconds_behind_masterï¼Œå¦‚æœå°äºæŸä¸ªå€¼ï¼ˆæ¯”å¦‚5ç§’ï¼‰ç»§ç»­ä¸‹ä¸€æ­¥ï¼Œå¦åˆ™æŒç»­é‡è¯•è¿™ä¸€æ­¥ï¼›</p>\n</li>\n<li>\n<p>æŠŠä¸»åº“Aæ”¹æˆåªè¯»çŠ¶æ€ï¼Œå³æŠŠreadonlyè®¾ç½®ä¸ºtrueï¼›</p>\n</li>\n<li>\n<p>åˆ¤æ–­å¤‡åº“Bçš„seconds_behind_masterçš„å€¼ï¼Œç›´åˆ°è¿™ä¸ªå€¼å˜æˆ0ä¸ºæ­¢ï¼›</p>\n</li>\n<li>\n<p>æŠŠå¤‡åº“Bæ”¹æˆå¯è¯»å†™çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯æŠŠreadonly è®¾ç½®ä¸ºfalseï¼›</p>\n</li>\n<li>\n<p>æŠŠä¸šåŠ¡è¯·æ±‚åˆ‡åˆ°å¤‡åº“Bã€‚</p>\n</li>\n</ol><p>è¿™ä¸ªåˆ‡æ¢æµç¨‹ï¼Œä¸€èˆ¬æ˜¯ç”±ä¸“é—¨çš„HAç³»ç»Ÿæ¥å®Œæˆçš„ï¼Œæˆ‘ä»¬æš‚æ—¶ç§°ä¹‹ä¸ºå¯é æ€§ä¼˜å…ˆæµç¨‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/54/4a/54f4c7c31e6f0f807c2ab77f78c8844a.png?wh=1142*880\" alt=\"\"></p><center><span class=\"reference\">å›¾2 MySQLå¯é æ€§ä¼˜å…ˆä¸»å¤‡åˆ‡æ¢æµç¨‹</span></center><p>å¤‡æ³¨ï¼šå›¾ä¸­çš„SBMï¼Œæ˜¯seconds_behind_masterå‚æ•°çš„ç®€å†™ã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªåˆ‡æ¢æµç¨‹ä¸­æ˜¯æœ‰ä¸å¯ç”¨æ—¶é—´çš„ã€‚å› ä¸ºåœ¨æ­¥éª¤2ä¹‹åï¼Œä¸»åº“Aå’Œå¤‡åº“Béƒ½å¤„äºreadonlyçŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™æ—¶ç³»ç»Ÿå¤„äºä¸å¯å†™çŠ¶æ€ï¼Œç›´åˆ°æ­¥éª¤5å®Œæˆåæ‰èƒ½æ¢å¤ã€‚</p><p>åœ¨è¿™ä¸ªä¸å¯ç”¨çŠ¶æ€ä¸­ï¼Œæ¯”è¾ƒè€—è´¹æ—¶é—´çš„æ˜¯æ­¥éª¤3ï¼Œå¯èƒ½éœ€è¦è€—è´¹å¥½å‡ ç§’çš„æ—¶é—´ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆéœ€è¦åœ¨æ­¥éª¤1å…ˆåšåˆ¤æ–­ï¼Œç¡®ä¿seconds_behind_masterçš„å€¼è¶³å¤Ÿå°ã€‚</p><p>è¯•æƒ³å¦‚æœä¸€å¼€å§‹ä¸»å¤‡å»¶è¿Ÿå°±é•¿è¾¾30åˆ†é’Ÿï¼Œè€Œä¸å…ˆåšåˆ¤æ–­ç›´æ¥åˆ‡æ¢çš„è¯ï¼Œç³»ç»Ÿçš„ä¸å¯ç”¨æ—¶é—´å°±ä¼šé•¿è¾¾30åˆ†é’Ÿï¼Œè¿™ç§æƒ…å†µä¸€èˆ¬ä¸šåŠ¡éƒ½æ˜¯ä¸å¯æ¥å—çš„ã€‚</p><p>å½“ç„¶ï¼Œç³»ç»Ÿçš„ä¸å¯ç”¨æ—¶é—´ï¼Œæ˜¯ç”±è¿™ä¸ªæ•°æ®å¯é æ€§ä¼˜å…ˆçš„ç­–ç•¥å†³å®šçš„ã€‚ä½ ä¹Ÿå¯ä»¥é€‰æ‹©å¯ç”¨æ€§ä¼˜å…ˆçš„ç­–ç•¥ï¼Œæ¥æŠŠè¿™ä¸ªä¸å¯ç”¨æ—¶é—´å‡ ä¹é™ä¸º0ã€‚</p><h1>å¯ç”¨æ€§ä¼˜å…ˆç­–ç•¥</h1><p>å¦‚æœæˆ‘å¼ºè¡ŒæŠŠæ­¥éª¤4ã€5è°ƒæ•´åˆ°æœ€å¼€å§‹æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ç­‰ä¸»å¤‡æ•°æ®åŒæ­¥ï¼Œç›´æ¥æŠŠè¿æ¥åˆ‡åˆ°å¤‡åº“Bï¼Œå¹¶ä¸”è®©å¤‡åº“Bå¯ä»¥è¯»å†™ï¼Œé‚£ä¹ˆç³»ç»Ÿå‡ ä¹å°±æ²¡æœ‰ä¸å¯ç”¨æ—¶é—´äº†ã€‚</p><p>æˆ‘ä»¬æŠŠè¿™ä¸ªåˆ‡æ¢æµç¨‹ï¼Œæš‚æ—¶ç§°ä½œå¯ç”¨æ€§ä¼˜å…ˆæµç¨‹ã€‚è¿™ä¸ªåˆ‡æ¢æµç¨‹çš„ä»£ä»·ï¼Œå°±æ˜¯å¯èƒ½å‡ºç°æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°±å’Œä½ åˆ†äº«ä¸€ä¸ªå¯ç”¨æ€§ä¼˜å…ˆæµç¨‹äº§ç”Ÿæ•°æ®ä¸ä¸€è‡´çš„ä¾‹å­ã€‚å‡è®¾æœ‰ä¸€ä¸ªè¡¨ tï¼š</p><pre><code>mysql&gt; CREATE TABLE `t` (\n  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,\n  `c` int(11) unsigned DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB;\n\ninsert into t(c) values(1),(2),(3);\n</code></pre><p>è¿™ä¸ªè¡¨å®šä¹‰äº†ä¸€ä¸ªè‡ªå¢ä¸»é”®idï¼Œåˆå§‹åŒ–æ•°æ®åï¼Œä¸»åº“å’Œå¤‡åº“ä¸Šéƒ½æ˜¯3è¡Œæ•°æ®ã€‚æ¥ä¸‹æ¥ï¼Œä¸šåŠ¡äººå‘˜è¦ç»§ç»­åœ¨è¡¨tä¸Šæ‰§è¡Œä¸¤æ¡æ’å…¥è¯­å¥çš„å‘½ä»¤ï¼Œä¾æ¬¡æ˜¯ï¼š</p><pre><code>insert into t(c) values(4);\ninsert into t(c) values(5);\n</code></pre><p>å‡è®¾ï¼Œç°åœ¨ä¸»åº“ä¸Šå…¶ä»–çš„æ•°æ®è¡¨æœ‰å¤§é‡çš„æ›´æ–°ï¼Œå¯¼è‡´ä¸»å¤‡å»¶è¿Ÿè¾¾åˆ°5ç§’ã€‚åœ¨æ’å…¥ä¸€æ¡c=4çš„è¯­å¥åï¼Œå‘èµ·äº†ä¸»å¤‡åˆ‡æ¢ã€‚</p><p>å›¾3æ˜¯<strong>å¯ç”¨æ€§ä¼˜å…ˆç­–ç•¥ï¼Œä¸”binlog_format=mixed</strong>æ—¶çš„åˆ‡æ¢æµç¨‹å’Œæ•°æ®ç»“æœã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/37/3a/3786bd6ad37faa34aca25bf1a1d8af3a.png?wh=1142*880\" alt=\"\"></p><center><span class=\"reference\">å›¾3 å¯ç”¨æ€§ä¼˜å…ˆç­–ç•¥ï¼Œä¸”binlog_format=mixed</span></center><p>ç°åœ¨ï¼Œæˆ‘ä»¬ä¸€èµ·åˆ†æä¸‹è¿™ä¸ªåˆ‡æ¢æµç¨‹ï¼š</p><ol>\n<li>\n<p>æ­¥éª¤2ä¸­ï¼Œä¸»åº“Aæ‰§è¡Œå®Œinsertè¯­å¥ï¼Œæ’å…¥äº†ä¸€è¡Œæ•°æ®ï¼ˆ4,4ï¼‰ï¼Œä¹‹åå¼€å§‹è¿›è¡Œä¸»å¤‡åˆ‡æ¢ã€‚</p>\n</li>\n<li>\n<p>æ­¥éª¤3ä¸­ï¼Œç”±äºä¸»å¤‡ä¹‹é—´æœ‰5ç§’çš„å»¶è¿Ÿï¼Œæ‰€ä»¥å¤‡åº“Bè¿˜æ²¡æ¥å¾—åŠåº”ç”¨â€œæ’å…¥c=4â€è¿™ä¸ªä¸­è½¬æ—¥å¿—ï¼Œå°±å¼€å§‹æ¥æ”¶å®¢æˆ·ç«¯â€œæ’å…¥ c=5â€çš„å‘½ä»¤ã€‚</p>\n</li>\n<li>\n<p>æ­¥éª¤4ä¸­ï¼Œå¤‡åº“Bæ’å…¥äº†ä¸€è¡Œæ•°æ®ï¼ˆ4,5ï¼‰ï¼Œå¹¶ä¸”æŠŠè¿™ä¸ªbinlogå‘ç»™ä¸»åº“Aã€‚</p>\n</li>\n<li>\n<p>æ­¥éª¤5ä¸­ï¼Œå¤‡åº“Bæ‰§è¡Œâ€œæ’å…¥c=4â€è¿™ä¸ªä¸­è½¬æ—¥å¿—ï¼Œæ’å…¥äº†ä¸€è¡Œæ•°æ®ï¼ˆ5,4ï¼‰ã€‚è€Œç›´æ¥åœ¨å¤‡åº“Bæ‰§è¡Œçš„â€œæ’å…¥c=5â€è¿™ä¸ªè¯­å¥ï¼Œä¼ åˆ°ä¸»åº“Aï¼Œå°±æ’å…¥äº†ä¸€è¡Œæ–°æ•°æ®ï¼ˆ5,5ï¼‰ã€‚</p>\n</li>\n</ol><p>æœ€åçš„ç»“æœå°±æ˜¯ï¼Œä¸»åº“Aå’Œå¤‡åº“Bä¸Šå‡ºç°äº†ä¸¤è¡Œä¸ä¸€è‡´çš„æ•°æ®ã€‚å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªæ•°æ®ä¸ä¸€è‡´ï¼Œæ˜¯ç”±å¯ç”¨æ€§ä¼˜å…ˆæµç¨‹å¯¼è‡´çš„ã€‚</p><p>é‚£ä¹ˆï¼Œå¦‚æœæˆ‘è¿˜æ˜¯ç”¨<strong>å¯ç”¨æ€§ä¼˜å…ˆç­–ç•¥ï¼Œä½†è®¾ç½®binlog_format=row</strong>ï¼Œæƒ…å†µåˆä¼šæ€æ ·å‘¢ï¼Ÿ</p><p>å› ä¸ºrowæ ¼å¼åœ¨è®°å½•binlogçš„æ—¶å€™ï¼Œä¼šè®°å½•æ–°æ’å…¥çš„è¡Œçš„æ‰€æœ‰å­—æ®µå€¼ï¼Œæ‰€ä»¥æœ€ååªä¼šæœ‰ä¸€è¡Œä¸ä¸€è‡´ã€‚è€Œä¸”ï¼Œä¸¤è¾¹çš„ä¸»å¤‡åŒæ­¥çš„åº”ç”¨çº¿ç¨‹ä¼šæŠ¥é”™duplicate key errorå¹¶åœæ­¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå¤‡åº“Bçš„(5,4)å’Œä¸»åº“Açš„(5,5)è¿™ä¸¤è¡Œæ•°æ®ï¼Œéƒ½ä¸ä¼šè¢«å¯¹æ–¹æ‰§è¡Œã€‚</p><p>å›¾4ä¸­æˆ‘ç”»å‡ºäº†è¯¦ç»†è¿‡ç¨‹ï¼Œä½ å¯ä»¥è‡ªå·±å†åˆ†æä¸€ä¸‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/b8/43/b8d2229b2b40dd087fd3b111d1bdda43.png?wh=1142*880\" alt=\"\"></p><center><span class=\"reference\">å›¾4 å¯ç”¨æ€§ä¼˜å…ˆç­–ç•¥ï¼Œä¸”binlog_format=row</span></center><p>ä»ä¸Šé¢çš„åˆ†æä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°ä¸€äº›ç»“è®ºï¼š</p><ol>\n<li>\n<p>ä½¿ç”¨rowæ ¼å¼çš„binlogæ—¶ï¼Œæ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜æ›´å®¹æ˜“è¢«å‘ç°ã€‚è€Œä½¿ç”¨mixedæˆ–è€…statementæ ¼å¼çš„binlogæ—¶ï¼Œæ•°æ®å¾ˆå¯èƒ½æ‚„æ‚„åœ°å°±ä¸ä¸€è‡´äº†ã€‚å¦‚æœä½ è¿‡äº†å¾ˆä¹…æ‰å‘ç°æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œå¾ˆå¯èƒ½è¿™æ—¶çš„æ•°æ®ä¸ä¸€è‡´å·²ç»ä¸å¯æŸ¥ï¼Œæˆ–è€…è¿å¸¦é€ æˆäº†æ›´å¤šçš„æ•°æ®é€»è¾‘ä¸ä¸€è‡´ã€‚</p>\n</li>\n<li>\n<p>ä¸»å¤‡åˆ‡æ¢çš„å¯ç”¨æ€§ä¼˜å…ˆç­–ç•¥ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚å› æ­¤ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘éƒ½å»ºè®®ä½ ä½¿ç”¨å¯é æ€§ä¼˜å…ˆç­–ç•¥ã€‚æ¯•ç«Ÿå¯¹æ•°æ®æœåŠ¡æ¥è¯´çš„è¯ï¼Œæ•°æ®çš„å¯é æ€§ä¸€èˆ¬è¿˜æ˜¯è¦ä¼˜äºå¯ç”¨æ€§çš„ã€‚</p>\n</li>\n</ol><p>ä½†äº‹æ— ç»å¯¹ï¼Œ<strong>æœ‰æ²¡æœ‰å“ªç§æƒ…å†µæ•°æ®çš„å¯ç”¨æ€§ä¼˜å…ˆçº§æ›´é«˜å‘¢ï¼Ÿ</strong></p><p>ç­”æ¡ˆæ˜¯ï¼Œæœ‰çš„ã€‚</p><p>æˆ‘æ›¾ç»ç¢°åˆ°è¿‡è¿™æ ·çš„ä¸€ä¸ªåœºæ™¯ï¼š</p><ul>\n<li>æœ‰ä¸€ä¸ªåº“çš„ä½œç”¨æ˜¯è®°å½•æ“ä½œæ—¥å¿—ã€‚è¿™æ—¶å€™ï¼Œå¦‚æœæ•°æ®ä¸ä¸€è‡´å¯ä»¥é€šè¿‡binlogæ¥ä¿®è¡¥ï¼Œè€Œè¿™ä¸ªçŸ­æš‚çš„ä¸ä¸€è‡´ä¹Ÿä¸ä¼šå¼•å‘ä¸šåŠ¡é—®é¢˜ã€‚</li>\n<li>åŒæ—¶ï¼Œä¸šåŠ¡ç³»ç»Ÿä¾èµ–äºè¿™ä¸ªæ—¥å¿—å†™å…¥é€»è¾‘ï¼Œå¦‚æœè¿™ä¸ªåº“ä¸å¯å†™ï¼Œä¼šå¯¼è‡´çº¿ä¸Šçš„ä¸šåŠ¡æ“ä½œæ— æ³•æ‰§è¡Œã€‚</li>\n</ul><p>è¿™æ—¶å€™ï¼Œä½ å¯èƒ½å°±éœ€è¦é€‰æ‹©å…ˆå¼ºè¡Œåˆ‡æ¢ï¼Œäº‹åå†è¡¥æ•°æ®çš„ç­–ç•¥ã€‚</p><p>å½“ç„¶ï¼Œäº‹åå¤ç›˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³åˆ°äº†ä¸€ä¸ªæ”¹è¿›æªæ–½å°±æ˜¯ï¼Œè®©ä¸šåŠ¡é€»è¾‘ä¸è¦ä¾èµ–äºè¿™ç±»æ—¥å¿—çš„å†™å…¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ—¥å¿—å†™å…¥è¿™ä¸ªé€»è¾‘æ¨¡å—åº”è¯¥å¯ä»¥é™çº§ï¼Œæ¯”å¦‚å†™åˆ°æœ¬åœ°æ–‡ä»¶ï¼Œæˆ–è€…å†™åˆ°å¦å¤–ä¸€ä¸ªä¸´æ—¶åº“é‡Œé¢ã€‚</p><p>è¿™æ ·çš„è¯ï¼Œè¿™ç§åœºæ™¯å°±åˆå¯ä»¥ä½¿ç”¨å¯é æ€§ä¼˜å…ˆç­–ç•¥äº†ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å†çœ‹çœ‹ï¼Œ<strong>æŒ‰ç…§å¯é æ€§ä¼˜å…ˆçš„æ€è·¯ï¼Œå¼‚å¸¸åˆ‡æ¢ä¼šæ˜¯ä»€ä¹ˆæ•ˆæœï¼Ÿ</strong></p><p>å‡è®¾ï¼Œä¸»åº“Aå’Œå¤‡åº“Bé—´çš„ä¸»å¤‡å»¶è¿Ÿæ˜¯30åˆ†é’Ÿï¼Œè¿™æ—¶å€™ä¸»åº“Aæ‰ç”µäº†ï¼ŒHAç³»ç»Ÿè¦åˆ‡æ¢Bä½œä¸ºä¸»åº“ã€‚æˆ‘ä»¬åœ¨ä¸»åŠ¨åˆ‡æ¢çš„æ—¶å€™ï¼Œå¯ä»¥ç­‰åˆ°ä¸»å¤‡å»¶è¿Ÿå°äº5ç§’çš„æ—¶å€™å†å¯åŠ¨åˆ‡æ¢ï¼Œä½†è¿™æ—¶å€™å·²ç»åˆ«æ— é€‰æ‹©äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/55/8b/553b7fc2d0dce3ec78bb595e1806eb8b.png?wh=1142*880\" alt=\"\"></p><center><span class=\"reference\">å›¾5 å¯é æ€§ä¼˜å…ˆç­–ç•¥ï¼Œä¸»åº“ä¸å¯ç”¨</span></center><p>é‡‡ç”¨å¯é æ€§ä¼˜å…ˆç­–ç•¥çš„è¯ï¼Œä½ å°±å¿…é¡»å¾—ç­‰åˆ°å¤‡åº“Bçš„seconds_behind_master=0ä¹‹åï¼Œæ‰èƒ½åˆ‡æ¢ã€‚ä½†ç°åœ¨çš„æƒ…å†µæ¯”åˆšåˆšæ›´ä¸¥é‡ï¼Œå¹¶ä¸æ˜¯ç³»ç»Ÿåªè¯»ã€ä¸å¯å†™çš„é—®é¢˜äº†ï¼Œè€Œæ˜¯ç³»ç»Ÿå¤„äºå®Œå…¨ä¸å¯ç”¨çš„çŠ¶æ€ã€‚å› ä¸ºï¼Œä¸»åº“Aæ‰ç”µåï¼Œæˆ‘ä»¬çš„è¿æ¥è¿˜æ²¡æœ‰åˆ‡åˆ°å¤‡åº“Bã€‚</p><p>ä½ å¯èƒ½ä¼šé—®ï¼Œé‚£èƒ½ä¸èƒ½ç›´æ¥åˆ‡æ¢åˆ°å¤‡åº“Bï¼Œä½†æ˜¯ä¿æŒBåªè¯»å‘¢ï¼Ÿ</p><p>è¿™æ ·ä¹Ÿä¸è¡Œã€‚</p><p>å› ä¸ºï¼Œè¿™æ®µæ—¶é—´å†…ï¼Œä¸­è½¬æ—¥å¿—è¿˜æ²¡æœ‰åº”ç”¨å®Œæˆï¼Œå¦‚æœç›´æ¥å‘èµ·ä¸»å¤‡åˆ‡æ¢ï¼Œå®¢æˆ·ç«¯æŸ¥è¯¢çœ‹ä¸åˆ°ä¹‹å‰æ‰§è¡Œå®Œæˆçš„äº‹åŠ¡ï¼Œä¼šè®¤ä¸ºæœ‰â€œæ•°æ®ä¸¢å¤±â€ã€‚</p><p>è™½ç„¶éšç€ä¸­è½¬æ—¥å¿—çš„ç»§ç»­åº”ç”¨ï¼Œè¿™äº›æ•°æ®ä¼šæ¢å¤å›æ¥ï¼Œä½†æ˜¯å¯¹äºä¸€äº›ä¸šåŠ¡æ¥è¯´ï¼ŒæŸ¥è¯¢åˆ°â€œæš‚æ—¶ä¸¢å¤±æ•°æ®çš„çŠ¶æ€â€ä¹Ÿæ˜¯ä¸èƒ½è¢«æ¥å—çš„ã€‚</p><p>èŠåˆ°è¿™é‡Œä½ å°±çŸ¥é“äº†ï¼Œåœ¨æ»¡è¶³æ•°æ®å¯é æ€§çš„å‰æä¸‹ï¼ŒMySQLé«˜å¯ç”¨ç³»ç»Ÿçš„å¯ç”¨æ€§ï¼Œæ˜¯ä¾èµ–äºä¸»å¤‡å»¶è¿Ÿçš„ã€‚å»¶è¿Ÿçš„æ—¶é—´è¶Šå°ï¼Œåœ¨ä¸»åº“æ•…éšœçš„æ—¶å€™ï¼ŒæœåŠ¡æ¢å¤éœ€è¦çš„æ—¶é—´å°±è¶ŠçŸ­ï¼Œå¯ç”¨æ€§å°±è¶Šé«˜ã€‚</p><h1>å°ç»“</h1><p>ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘å…ˆå’Œä½ ä»‹ç»äº†MySQLé«˜å¯ç”¨ç³»ç»Ÿçš„åŸºç¡€ï¼Œå°±æ˜¯ä¸»å¤‡åˆ‡æ¢é€»è¾‘ã€‚ç´§æ¥ç€ï¼Œæˆ‘åˆå’Œä½ è®¨è®ºäº†å‡ ç§ä¼šå¯¼è‡´ä¸»å¤‡å»¶è¿Ÿçš„æƒ…å†µï¼Œä»¥åŠç›¸åº”çš„æ”¹è¿›æ–¹å‘ã€‚</p><p>ç„¶åï¼Œç”±äºä¸»å¤‡å»¶è¿Ÿçš„å­˜åœ¨ï¼Œåˆ‡æ¢ç­–ç•¥å°±æœ‰ä¸åŒçš„é€‰æ‹©ã€‚æ‰€ä»¥ï¼Œæˆ‘åˆå’Œä½ ä¸€èµ·åˆ†æäº†å¯é æ€§ä¼˜å…ˆå’Œå¯ç”¨æ€§ä¼˜å…ˆç­–ç•¥çš„åŒºåˆ«ã€‚</p><p>åœ¨å®é™…çš„åº”ç”¨ä¸­ï¼Œæˆ‘æ›´å»ºè®®ä½¿ç”¨å¯é æ€§ä¼˜å…ˆçš„ç­–ç•¥ã€‚æ¯•ç«Ÿä¿è¯æ•°æ®å‡†ç¡®ï¼Œåº”è¯¥æ˜¯æ•°æ®åº“æœåŠ¡çš„åº•çº¿ã€‚åœ¨è¿™ä¸ªåŸºç¡€ä¸Šï¼Œé€šè¿‡å‡å°‘ä¸»å¤‡å»¶è¿Ÿï¼Œæå‡ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚</p><p>æœ€åï¼Œæˆ‘ç»™ä½ ç•™ä¸‹ä¸€ä¸ªæ€è€ƒé¢˜å§ã€‚</p><p>ä¸€èˆ¬ç°åœ¨çš„æ•°æ®åº“è¿ç»´ç³»ç»Ÿéƒ½æœ‰å¤‡åº“å»¶è¿Ÿç›‘æ§ï¼Œå…¶å®å°±æ˜¯åœ¨å¤‡åº“ä¸Šæ‰§è¡Œ show slave statusï¼Œé‡‡é›†seconds_behind_masterçš„å€¼ã€‚</p><p>å‡è®¾ï¼Œç°åœ¨ä½ çœ‹åˆ°ä½ ç»´æŠ¤çš„ä¸€ä¸ªå¤‡åº“ï¼Œå®ƒçš„å»¶è¿Ÿç›‘æ§çš„å›¾åƒç±»ä¼¼å›¾6ï¼Œæ˜¯ä¸€ä¸ª45Â°æ–œå‘ä¸Šçš„çº¿æ®µï¼Œä½ è§‰å¾—å¯èƒ½æ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´å‘¢ï¼Ÿä½ åˆä¼šæ€ä¹ˆå»ç¡®è®¤è¿™ä¸ªåŸå› å‘¢ï¼Ÿ</p><p><img src=\"https://static001.geekbang.org/resource/image/cf/71/cf5ea52aa3b26ef56c567125197fa171.png?wh=1142*880\" alt=\"\"></p><center><span class=\"reference\">å›¾6 å¤‡åº“å»¶è¿Ÿ</span></center><p>ä½ å¯ä»¥æŠŠä½ çš„åˆ†æå†™åœ¨è¯„è®ºåŒºï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« çš„æœ«å°¾è·Ÿä½ è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><h1>ä¸ŠæœŸé—®é¢˜æ—¶é—´</h1><p>ä¸ŠæœŸæˆ‘ç•™ç»™ä½ çš„é—®é¢˜æ˜¯ï¼Œä»€ä¹ˆæƒ…å†µä¸‹åŒMç»“æ„ä¼šå‡ºç°å¾ªç¯å¤åˆ¶ã€‚</p><p>ä¸€ç§åœºæ™¯æ˜¯ï¼Œåœ¨ä¸€ä¸ªä¸»åº“æ›´æ–°äº‹åŠ¡åï¼Œç”¨å‘½ä»¤set global server_id=xä¿®æ”¹äº†server_idã€‚ç­‰æ—¥å¿—å†ä¼ å›æ¥çš„æ—¶å€™ï¼Œå‘ç°server_idè·Ÿè‡ªå·±çš„server_idä¸åŒï¼Œå°±åªèƒ½æ‰§è¡Œäº†ã€‚</p><p>å¦ä¸€ç§åœºæ™¯æ˜¯ï¼Œæœ‰ä¸‰ä¸ªèŠ‚ç‚¹çš„æ—¶å€™ï¼Œå¦‚å›¾7æ‰€ç¤ºï¼Œtrx1æ˜¯åœ¨èŠ‚ç‚¹ Bæ‰§è¡Œçš„ï¼Œå› æ­¤binlogä¸Šçš„server_idå°±æ˜¯Bï¼Œbinlogä¼ ç»™èŠ‚ç‚¹ Aï¼Œç„¶åAå’ŒAâ€™æ­å»ºäº†åŒMç»“æ„ï¼Œå°±ä¼šå‡ºç°å¾ªç¯å¤åˆ¶ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f9/71/f968192ce2f436c939dd702b8f409771.png?wh=1142*880\" alt=\"\"></p><center><span class=\"reference\">å›¾7 ä¸‰èŠ‚ç‚¹å¾ªç¯å¤åˆ¶</span></center><p>è¿™ç§ä¸‰èŠ‚ç‚¹å¤åˆ¶çš„åœºæ™¯ï¼Œåšæ•°æ®åº“è¿ç§»çš„æ—¶å€™ä¼šå‡ºç°ã€‚</p><p>å¦‚æœå‡ºç°äº†å¾ªç¯å¤åˆ¶ï¼Œå¯ä»¥åœ¨Aæˆ–è€…Aâ€™ä¸Šï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><pre><code>stop slaveï¼›\nCHANGE MASTER TO IGNORE_SERVER_IDS=(server_id_of_B);\nstart slave;\n</code></pre><p>è¿™æ ·è¿™ä¸ªèŠ‚ç‚¹æ”¶åˆ°æ—¥å¿—åå°±ä¸ä¼šå†æ‰§è¡Œã€‚è¿‡ä¸€æ®µæ—¶é—´åï¼Œå†æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æŠŠè¿™ä¸ªå€¼æ”¹å›æ¥ã€‚</p><pre><code>stop slaveï¼›\nCHANGE MASTER TO IGNORE_SERVER_IDS=();\nstart slave;\n</code></pre><p>è¯„è®ºåŒºç•™è¨€ç‚¹èµæ¿ï¼š</p><blockquote>\n<p>@ä¸€å¤§åªã€@HuaMax åŒå­¦æåˆ°äº†ç¬¬ä¸€ä¸ªå¤ç°æ–¹æ³•ï¼›</p>\n</blockquote><blockquote>\n<p>@JonhåŒå­¦æåˆ°äº†IGNORE_SERVER_IDSè¿™ä¸ªè§£å†³æ–¹æ³•ï¼›</p>\n</blockquote><blockquote>\n<p>@React æåˆ°ï¼Œå¦‚æœä¸»å¤‡è®¾ç½®ä¸åŒçš„æ­¥é•¿ï¼Œå¤‡åº“æ˜¯ä¸æ˜¯å¯ä»¥è®¾ç½®ä¸ºå¯è¯»å†™ã€‚æˆ‘çš„å»ºè®®æ˜¯ï¼Œåªè¦è¿™ä¸ªèŠ‚ç‚¹è®¾è®¡å†…å°±ä¸ä¼šæœ‰ä¸šåŠ¡ç›´æ¥åœ¨ä¸Šé¢æ‰§è¡Œæ›´æ–°ï¼Œå°±å»ºè®®è®¾ç½®ä¸ºreadonlyã€‚</p>\n</blockquote><p></p>","comments":[{"had_liked":false,"id":58593,"user_name":"æŸã€äºº","can_delete":false,"product_type":"c1","uid":1308784,"ip_address":"","ucode":"ADB42AA12A11C1","user_header":"https://static001.geekbang.org/account/avatar/00/13/f8/70/f3a33a14.jpg","comment_is_top":false,"comment_ctime":1547127995,"is_pvip":false,"replies":[{"id":"21186","content":"åˆ†æçš„ç‚¹å¾ˆå‡†ç¡®ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547140727,"ip_address":"","comment_id":58593,"utype":1}],"discussion_count":12,"race_medal":0,"score":"753166404795","product_id":100020801,"comment_content":"é‡åˆ°è¿‡ä¸‹é¢å‡ ç§é€ æˆä¸»ä»å»¶è¿Ÿçš„æƒ…å†µ:<br>1.ä¸»åº“DMLè¯­å¥å¹¶å‘å¤§,ä»åº“qpsé«˜<br>2.ä»åº“æœåŠ¡å™¨é…ç½®å·®æˆ–è€…ä¸€å°æœåŠ¡å™¨ä¸Šå‡ å°ä»åº“(èµ„æºç«äº‰æ¿€çƒˆ,ç‰¹åˆ«æ˜¯io)<br>3.ä¸»åº“å’Œä»åº“çš„å‚æ•°é…ç½®ä¸ä¸€æ ·<br>4.å¤§äº‹åŠ¡(DDL,æˆ‘è§‰å¾—DDLä¹Ÿç›¸å½“äºä¸€ä¸ªå¤§äº‹åŠ¡)<br>5.ä»åº“ä¸Šåœ¨è¿›è¡Œå¤‡ä»½æ“ä½œ<br>6.è¡¨ä¸Šæ— ä¸»é”®çš„æƒ…å†µ(ä¸»åº“åˆ©ç”¨ç´¢å¼•æ›´æ”¹æ•°æ®,å¤‡åº“å›æ”¾åªèƒ½ç”¨å…¨è¡¨æ‰«æ,è¿™ç§æƒ…å†µå¯ä»¥è°ƒæ•´slave_rows_search_algorithmså‚æ•°é€‚å½“ä¼˜åŒ–ä¸‹)<br>7.è®¾ç½®çš„æ˜¯å»¶è¿Ÿå¤‡åº“<br>8.å¤‡åº“ç©ºé—´ä¸è¶³çš„æƒ…å†µä¸‹<br><br>è¿™æœŸçš„é—®é¢˜ï¼š<br>çœ‹è¿™æ›²çº¿,åº”è¯¥æ˜¯ä»åº“æ­£åœ¨åº”ç”¨ä¸€ä¸ªå¤§äº‹åŠ¡,æˆ–è€…ä¸€ä¸ªå¤§è¡¨ä¸Šæ— ä¸»é”®çš„æƒ…å†µ(æœ‰è¯¥è¡¨çš„æ›´æ–°)<br>åº”è¯¥æ˜¯T3éšç€æ—¶é—´çš„å¢é•¿åœ¨å¢é•¿,è€ŒT1è¿™ä¸ªæ—¶é—´ç‚¹æ˜¯æ²¡å˜çš„,é€ æˆçš„ç°è±¡å°±æ˜¯<br>éšç€æ—¶é—´çš„å¢é•¿,second_behind_masterä¹Ÿæ˜¯æœ‰è§„å¾‹çš„å¢é•¿","like_count":176,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436128,"discussion_content":"åˆ†æçš„ç‚¹å¾ˆå‡†ç¡®ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547140727,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1541014,"avatar":"https://static001.geekbang.org/account/avatar/00/17/83/96/73ff13a0.jpg","nickname":"å¤©äº®å‰è¯´æ™šå®‰","note":"","ucode":"1D82EE562A7C71","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":185495,"discussion_content":"å…¶å®å°±æ˜¯ä»åº“æ—¥å¿—æ¶ˆè´¹ä¸è¿‡æ¥ï¼Œæœ‰ç‚¹åƒMQæ—¥å¿—å †ç§¯ä¸€æ ·å§","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1582631228,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2283781,"avatar":"https://static001.geekbang.org/account/avatar/00/22/d9/05/0d772dbf.jpg","nickname":"å’¦","note":"","ucode":"2E0D5A488489A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1541014,"avatar":"https://static001.geekbang.org/account/avatar/00/17/83/96/73ff13a0.jpg","nickname":"å¤©äº®å‰è¯´æ™šå®‰","note":"","ucode":"1D82EE562A7C71","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":397397,"discussion_content":"æ˜¯çš„ï¼Œæ„Ÿè§‰åªè¦ç§¯å‹ï¼Œä¹Ÿä¼šå‡ºç°è¿™ç§æ•ˆæœ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632617981,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":185495,"ip_address":""},"score":397397,"extra":""}]},{"author":{"id":1510011,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJgtVYia3HhaS65DjiaWBfTJj0yded6xBZbw0jT3IOxcqQibLz3yibw5KXK515tYXr3iaMibcywadst6C1w/132","nickname":"é£äº‘å˜","note":"","ucode":"E586B6E3FD5157","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":173861,"discussion_content":"å…„å¼Ÿå¾ˆå‰å®³ï¼æ¯æ¬¡åˆ†æéƒ½å¾ˆåˆ°ä½ï¼Œæ€»ç»“ç²¾è¾ŸğŸ‘ğŸ»","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1581865307,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1333389,"avatar":"https://static001.geekbang.org/account/avatar/00/14/58/8d/bc69cde1.jpg","nickname":"æµ©å…‹","note":"","ucode":"99F5D4F24AF574","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334943,"discussion_content":"è¯·æ•™ä¸ªé—®é¢˜6.è¡¨ä¸Šæ— ä¸»é”®çš„æƒ…å†µ(ä¸»åº“åˆ©ç”¨ç´¢å¼•æ›´æ”¹æ•°æ®,å¤‡åº“å›æ”¾åªèƒ½ç”¨å…¨è¡¨æ‰«æ,è¿™ç§æƒ…å†µå¯ä»¥è°ƒæ•´slave_rows_search_algorithmså‚æ•°é€‚å½“ä¼˜åŒ–ä¸‹)ï¼Œè¿™ä¸ªæè¿°çš„åœºæ™¯æ˜¯ï¼Œåœ¨binlog_format=rowï¼Œå¦‚æœä¸»åº“ä½¿ç”¨updateæ›´æ–°å¾ˆå¤šæ¡è¯­å¥çš„è¯ï¼ŒåŒæ­¥åˆ°ä»åº“å°±æ˜¯ä¸€è¡Œè¡Œçš„æ›´æ–°è®°å½•ï¼Œæ¯ä¸€ä¸ªæ›´æ–°è®°å½•ä»åº“éƒ½éœ€è¦å…¨è¡¨æ‰«é¢ä¸€éï¼Œè€Œä¸»åº“çš„æ›´æ–°åªéœ€è¦ä¸€æ¬¡å…¨è¡¨æ‰«æå°±æ›´æ–°å®Œæˆäº†ï¼Œå³ä½¿ä¸»åº“ä½¿ç”¨ç´¢å¼•æ›´æ–°ï¼Œé‚£ä¹ˆä¹Ÿæ˜¯éœ€è¦ä¸€æ¬¡å…¨è¡¨æ‰«æï¼Œæ˜¯è¿™ä¹ˆç†è§£çš„å§ï¼Ÿä¹Ÿå°±æ˜¯è¯´è¡¨åœ¨æ— ä¸»é”®çš„æƒ…å†µä¸‹çš„æ›´æ–°éƒ½æ˜¯èµ°å…¨è¡¨æ‰«ææ¥æ›´æ–°çš„ï¼Œå³ä½¿é€šè¿‡äºŒçº§ç´¢å¼•æ¥æ›´æ–°ä¹Ÿæ˜¯éœ€è¦å…¨è¡¨æ‰«ææ›´æ–°è¡Œæ•°æ®é¡µçš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1608032806,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1308784,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f8/70/f3a33a14.jpg","nickname":"æŸã€äºº","note":"","ucode":"ADB42AA12A11C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1333389,"avatar":"https://static001.geekbang.org/account/avatar/00/14/58/8d/bc69cde1.jpg","nickname":"æµ©å…‹","note":"","ucode":"99F5D4F24AF574","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334953,"discussion_content":"æœ‰ç´¢å¼•å°±èµ°ç´¢å¼•ï¼Œæˆ‘è¿™é‡ŒæŒ‡çš„æ˜¯åˆæ²¡æœ‰ä¸»é”®åˆæ²¡æœ‰ç´¢å¼•çš„æƒ…å†µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608035244,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":334943,"ip_address":""},"score":334953,"extra":""},{"author":{"id":1333389,"avatar":"https://static001.geekbang.org/account/avatar/00/14/58/8d/bc69cde1.jpg","nickname":"æµ©å…‹","note":"","ucode":"99F5D4F24AF574","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1308784,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f8/70/f3a33a14.jpg","nickname":"æŸã€äºº","note":"","ucode":"ADB42AA12A11C1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335053,"discussion_content":"è°¢è°¢å›å¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608082692,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":334953,"ip_address":""},"score":335053,"extra":""}]},{"author":{"id":1115041,"avatar":"https://static001.geekbang.org/account/avatar/00/11/03/a1/e6a0f60b.jpg","nickname":"Sid","note":"","ucode":"0461B574B2736B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":205841,"discussion_content":"ddlä¸ºä»€ä¹ˆç®—æ˜¯å¤§äº‹åŠ¡å•Šï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584349613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1235441,"avatar":"https://static001.geekbang.org/account/avatar/00/12/d9/f1/a00711f8.jpg","nickname":"X  W  z","note":"","ucode":"915BA1CF6090F7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1115041,"avatar":"https://static001.geekbang.org/account/avatar/00/11/03/a1/e6a0f60b.jpg","nickname":"Sid","note":"","ucode":"0461B574B2736B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347562,"discussion_content":"1ã€ddlå…ˆæ‹¿metadataé”ï¼Œå¦‚æœæœ‰å¤‡åº“çš„è¡¨è¢«æŸ¥è¯¢ï¼Œéœ€è¦ç­‰å¾…\n2ã€ddléœ€è¦æ‰«æå…¨è¡¨","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1612257799,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":205841,"ip_address":""},"score":347562,"extra":""}]},{"author":{"id":1543040,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8b/80/8702bd5f.jpg","nickname":"evan","note":"","ucode":"491B073D5AFEDE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":320008,"discussion_content":"æƒ³çŸ¥é“å¤§ä½¬æ˜¯ è¿ç»´è¿˜æ˜¯å¼€å‘?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604224633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1812970,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a9/ea/5bfce6c5.jpg","nickname":"mgs2002","note":"","ucode":"F5931108BD509B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292396,"discussion_content":"å‰å®³äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595214815,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1551612,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ac/fc/fec89308.jpg","nickname":"å¤§é£è½¦å°è½¬è½¬","note":"","ucode":"27FE819F6EE6D7","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":239169,"discussion_content":"åˆ†æçš„å¾ˆğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587280872,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":80259,"user_name":"å¯å¯","can_delete":false,"product_type":"c1","uid":1439947,"ip_address":"","ucode":"DAEF22B24A6317","user_header":"https://static001.geekbang.org/account/avatar/00/15/f8/cb/506edc3c.jpg","comment_is_top":false,"comment_ctime":1553645773,"is_pvip":false,"replies":[{"id":"29652","content":"é¢ã€‚ã€‚è¿™ä¸ªä¸å¥½è¯´ï¼Œå¾—çœ‹é¢è¯•å®˜æ˜¯ä»€ä¹ˆç±»å‹çš„ğŸ˜…<br><br>æœ€å¥½çš„æƒ…å†µæ˜¯é‚£ç§ï¼Œé¢è¯•å®˜é—®ä½ çš„ä¸“æ è®²åˆ°çš„çŸ¥è¯†ç‚¹ä½ éƒ½å›ç­”äº†ï¼Œ<br>ç„¶åé¢è¯•å®˜åˆæŠŠé—®é¢˜å»¶ä¼¸äº†ï¼Œç„¶åä½ è¿˜é¡ºåˆ©å›ç­”å‡ºæ¥äº†ã€‚<br><br>è¿™æ ·å°±å¤§å¤§æ–¹æ–¹è¯´å­¦è¿‡äº†ï¼Œ é¢è¯•å®˜ä¸€å®šè§‰å¾—ä½ åˆå¥½å­¦åˆå‹¤äºæ€è€ƒå“ŸğŸ˜†<br><br>ï¼ˆå…ˆé¢„ç¥ä¸€æ³¢é¡ºåˆ©æ‹¿åˆ°offerå“ˆï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1554052267,"ip_address":"","comment_id":80259,"utype":1}],"discussion_count":15,"race_medal":0,"score":"358035931341","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘å…ˆæ¥è®²ä¸ªç¬‘è¯<br>æ˜¨å¤©å»é¢è¯•å¦ä¸€å®¶å…¬å¸ï¼Œé—®mysqlçš„é—®é¢˜ï¼Œé—®ç½¢ä¹‹åã€‚<br>é¢è¯•å®˜:æˆ‘çœ‹ä½ å¯¹mysqläº†è§£çš„è¿˜è›®æ·±å¾—ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿçœ‹äº†æå®¢æ—¶é—´çš„ã€‚ã€‚ã€‚ï½<br>æˆ‘: æ²¡æœ‰æ²¡æœ‰(è¿å¿™å¦è®¤ï¼Œæœ‰ä¸€ç§æå‰çœ‹äº†è€ƒè¯•ç­”æ¡ˆçš„ç½ªæ¶æ„ŸğŸ˜‚ğŸ˜‚ğŸ˜‚)<br><br><br>æ‰€ä»¥æœ€åæˆ‘æœ‰ä¸ªé—®é¢˜ï¼Œå¦‚æœåé¢è¿˜æœ‰è¿™æ ·çš„é—®é¢˜ï¼Œè€å¸ˆæ‚¨è§‰å¾—æˆ‘åº”è¯¥æ€ä¹ˆå›ç­”ï¼Ÿ","like_count":84,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444803,"discussion_content":"é¢ã€‚ã€‚è¿™ä¸ªä¸å¥½è¯´ï¼Œå¾—çœ‹é¢è¯•å®˜æ˜¯ä»€ä¹ˆç±»å‹çš„ğŸ˜…\n\næœ€å¥½çš„æƒ…å†µæ˜¯é‚£ç§ï¼Œé¢è¯•å®˜é—®ä½ çš„ä¸“æ è®²åˆ°çš„çŸ¥è¯†ç‚¹ä½ éƒ½å›ç­”äº†ï¼Œ\nç„¶åé¢è¯•å®˜åˆæŠŠé—®é¢˜å»¶ä¼¸äº†ï¼Œç„¶åä½ è¿˜é¡ºåˆ©å›ç­”å‡ºæ¥äº†ã€‚\n\nè¿™æ ·å°±å¤§å¤§æ–¹æ–¹è¯´å­¦è¿‡äº†ï¼Œ é¢è¯•å®˜ä¸€å®šè§‰å¾—ä½ åˆå¥½å­¦åˆå‹¤äºæ€è€ƒå“ŸğŸ˜†\n\nï¼ˆå…ˆé¢„ç¥ä¸€æ³¢é¡ºåˆ©æ‹¿åˆ°offerå“ˆï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554052267,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2086960,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/d8/30/840b64fa.jpg","nickname":"Frankæœ¨é£","note":"","ucode":"8DAA325F19E00E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":325596,"discussion_content":"åº”è¯¥å›ç­”ï¼š ä»€ä¹ˆæ—¶é—´ï¼Ÿæå®¢ä»€ä¹ˆï¼Ÿ","likes_number":35,"is_delete":false,"is_hidden":false,"ctime":1605359740,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2008722,"avatar":"","nickname":"ä¸ºæ¢¦ç»ˆé†’","note":"","ucode":"9784EB870F413B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2086960,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/d8/30/840b64fa.jpg","nickname":"Frankæœ¨é£","note":"","ucode":"8DAA325F19E00E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351741,"discussion_content":"é©¬ä»€ä¹ˆæ¢…ï¼Ÿ","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1614421099,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":325596,"ip_address":""},"score":351741,"extra":""}]},{"author":{"id":2052476,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Qq6oLfOTgKzjiculoUDicdv7WoY1iabPfOTumibWeInVP2Mnod9XVPrNSClvIiaLbvtDlIjRnWUNaXcYwREGzlcaDog/132","nickname":"Geek_åœ¨ä¸‹èŸ‘è‚ç‹","note":"","ucode":"E1F5BBB5BC5962","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":323117,"discussion_content":"ä»æå®¢æ—¶é—´å­¦åˆ°äº†é‚£ä¹Ÿæ˜¯è‡ªå·±çš„ã€‚\nä¸ç„¶é¢è¯•æœ‰å•¥æ„ä¹‰å•Šã€‚é¢è¯•æœ¬æ¥ä¸å°±æ˜¯å¯¹çŸ¥è¯†çš„è€ƒå¯Ÿä¹ˆã€‚","likes_number":13,"is_delete":false,"is_hidden":false,"ctime":1604887925,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2283781,"avatar":"https://static001.geekbang.org/account/avatar/00/22/d9/05/0d772dbf.jpg","nickname":"å’¦","note":"","ucode":"2E0D5A488489A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":397400,"discussion_content":"é¢è¯•å®˜:æ¥è¯´è¯´mysql45è®²ç¬¬25ç« è®²äº†ä»€ä¹ˆğŸ§","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1632618057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Javaå’å¢™å·¥ç¨‹å¸ˆ","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306112,"discussion_content":"è¯´å­¦äº†æå®¢æ—¶é—´ï¼Œç„¶åé¢è¯•å®˜é—®é¢˜æ·±åº¦åŠ å¤§ï¼Œå½“åœºå‡‰å‡‰ã€ã€ã€å“ˆå“ˆ","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1600172187,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1046711,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erRDnCKfAWyOSUfU9hI8gYu2qsMOUwnFlCSngM0a9hbdnMmqHmBlziajorVdm9NGjx23SlAJXvicHGQ/132","nickname":"å›å›","note":"","ucode":"0E8F1058F01C28","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364055,"discussion_content":"è¦æ˜¯æˆ‘å°±å¤§å¤§æ–¹æ–¹æ‰¿è®¤äº†ã€‚çŸ¥è¯†ä¸éƒ½æ˜¯æ¥æºäºç½‘ç»œä¸Šçš„å„ç§æ•™ç¨‹ä¹ˆã€‚å°±ç®—æ²¡çœ‹æå®¢æ—¶é—´ï¼Œä¹Ÿè‚¯å®šçœ‹äº†å…¶ä»–æ•™ç¨‹ï¼Œåšå®¢ï¼Œæ€»ä¸èƒ½æ— ä¸­ç”Ÿæœ‰å§ã€‚çœŸæ­£èƒ½ç ”ç©¶æºç çš„åˆæœ‰å‡ äºº","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1617356953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2014285,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKNv880TlsNuKaWcKbxiaAZTQIBWfJAddC8wfOROnwRPRwJXaEGSTBH2sic4jK7IGpxZn79tTDcREjw/132","nickname":"Geek_7482f6","note":"","ucode":"F3565F78525D30","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1046711,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erRDnCKfAWyOSUfU9hI8gYu2qsMOUwnFlCSngM0a9hbdnMmqHmBlziajorVdm9NGjx23SlAJXvicHGQ/132","nickname":"å›å›","note":"","ucode":"0E8F1058F01C28","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":410081,"discussion_content":"å¾ˆéš¾ï¼Œå°¤å…¶æ˜¯åç«¯æ¶‰åŠçš„çŸ¥è¯†å¦‚æ­¤ç¹å¤ï¼Œèƒ½é™ä¸‹å¿ƒæ¥ä¸“ç ”ä¸€ä¸ªæ–¹å‘å°±æŒºä¸é”™äº†~","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1635593281,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":364055,"ip_address":""},"score":410081,"extra":""}]},{"author":{"id":1809802,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/8a/a2d34896.jpg","nickname":"ä¸€å…ƒ(wx:abley1874)","note":"","ucode":"5E7A33642FC767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305149,"discussion_content":"å¼±å¼±é—®ä¸€å¥ï¼Œé¢è¯•å®˜æ²¡çœ‹åˆ°è¿™æ¡è¯„è®ºå—","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1599795571,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1303963,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e5/9b/db9a6a8c.jpg","nickname":"test","note":"","ucode":"2AEB293A81E969","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1809802,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/8a/a2d34896.jpg","nickname":"ä¸€å…ƒ(wx:abley1874)","note":"","ucode":"5E7A33642FC767","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311811,"discussion_content":"æˆ‘æ¥æ™šäº†ï¼Œåˆšçœ‹è§","likes_number":32,"is_delete":false,"is_hidden":false,"ctime":1602492943,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":305149,"ip_address":""},"score":311811,"extra":""},{"author":{"id":2756739,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/10/83/0facd0eb.jpg","nickname":"åˆ©å¨å°”å…µé•¿","note":"","ucode":"FDE0BD5BFB1B4A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1303963,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e5/9b/db9a6a8c.jpg","nickname":"test","note":"","ucode":"2AEB293A81E969","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392280,"discussion_content":"å“ˆå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630933015,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":311811,"ip_address":""},"score":392280,"extra":""}]},{"author":{"id":1543040,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8b/80/8702bd5f.jpg","nickname":"evan","note":"","ucode":"491B073D5AFEDE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":320009,"discussion_content":"ç„¶åå„ç§æ·±æŒ– å‡‰å‡‰","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1604224691,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1046711,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erRDnCKfAWyOSUfU9hI8gYu2qsMOUwnFlCSngM0a9hbdnMmqHmBlziajorVdm9NGjx23SlAJXvicHGQ/132","nickname":"å›å›","note":"","ucode":"0E8F1058F01C28","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364053,"discussion_content":"æ‰€ä»¥é¢è¯•å®˜æ˜¯ç”¨æå®¢æ—¶é—´ä¸“æ æ¥è€ƒä½ çš„ã€‚å“ˆå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617356820,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2172817,"avatar":"","nickname":"Geek_chenyz","note":"","ucode":"BBB37F14FF666E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343687,"discussion_content":"è¿‡äº†ä¹ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611135643,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1028331,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b0/eb/112e7d16.jpg","nickname":"æˆ‘æ˜¯ä¸€æ ¹è‘±","note":"","ucode":"6208D18E65DB2F","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327641,"discussion_content":"è¿‡äº†ä¹ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605880020,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":67288,"user_name":"aubrey","can_delete":false,"product_type":"c1","uid":1304703,"ip_address":"","ucode":"57889C1B77FC3B","user_header":"","comment_is_top":false,"comment_ctime":1550124229,"is_pvip":false,"replies":[{"id":"23994","content":"ğŸ‘å†…è¡ŒğŸ˜†<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1550297675,"ip_address":"","comment_id":67288,"utype":1}],"discussion_count":3,"race_medal":0,"score":"181938750661","product_id":100020801,"comment_content":"semi-syncåœ¨ç½‘ç»œæ•…éšœè¶…æ—¶çš„æƒ…å†µä¸‹ä¼šé€€åŒ–æˆasyncï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœåˆšå¥½ä¸»åº“æ‰ç”µäº†ï¼Œæœ‰äº›binlogè¿˜æ²¡æœ‰ä¼ ç»™ä»åº“ï¼Œä»åº“æ— æ³•åˆ¤æ–­æ•°æ®è·Ÿä¸»åº“æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœå¼ºè¡Œåˆ‡æ¢å¯èƒ½ä¼šå¯¼è‡´ä¸¢æ•°æ®ï¼Œåœ¨é‡‘èä¸šåŠ¡åœºæ™¯ä¸‹åªèƒ½ï¼‚äººå·¥æ™ºèƒ½ï¼‚æ¥åšåˆ‡æ¢ï¼ŒæœåŠ¡ä¸­æ–­æ—¶é—´é•¿ã€‚AliSQLé‡‡ç”¨åŒé€šé“å¤åˆ¶æ›´å®¹æ˜“åˆ¤æ–­ä¸»å¤‡æ•°æ®æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´å¯ä»¥è‡ªåŠ¨åˆ‡æ¢ï¼Œå¦‚æœä¸ä¸€è‡´æ‰éœ€è¦äººå·¥æ¢å¤æ•°æ®ã€‚","like_count":43,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439133,"discussion_content":"ğŸ‘å†…è¡ŒğŸ˜†\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1550297675,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1305728,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ec/80/25d419a5.jpg","nickname":"å®¶å","note":"","ucode":"35EE365E01DBBF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380223,"discussion_content":"åŒé€šé“ï¼Ÿ  ä¸€ä¸ªå¼‚æ­¥ ä¸€ä¸ªåŠåŒæ­¥ä¹ˆ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1624377955,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1226968,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b8/d8/f81b5604.jpg","nickname":"hcyycb","note":"","ucode":"77FF6CA41F9E66","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1305728,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ec/80/25d419a5.jpg","nickname":"å®¶å","note":"","ucode":"35EE365E01DBBF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537602,"discussion_content":"ä¸€ä¸ªç½‘ç»œï¼Œä¸€ä¸ªä¸²å£ï¼Ÿå“ˆå“ˆå“ˆï¼Œæˆ‘çŒœã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1639113276,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":380223,"ip_address":""},"score":537602,"extra":""}]}]},{"had_liked":false,"id":68100,"user_name":"linqw","can_delete":false,"product_type":"c1","uid":1134138,"ip_address":"","ucode":"09DCFE98C54DD8","user_header":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","comment_is_top":false,"comment_ctime":1550412975,"is_pvip":false,"replies":[{"id":"25257","content":"1~4 å¾ˆå¥½çš„æ€»ç»“<br>5. ä¹Ÿæ˜¯å¥½é—®é¢˜ï¼Œç›´æ¥çœ‹ã€Š28 | è¯»å†™åˆ†ç¦»æœ‰å“ªäº›å‘ï¼Ÿã€‹ğŸ˜†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1551182883,"ip_address":"","comment_id":68100,"utype":1}],"discussion_count":7,"race_medal":0,"score":"147579301039","product_id":100020801,"comment_content":"æ€»ç»“ä¸‹å­¦ä¹ å®Œé«˜å¯ç”¨ï¼Œè€å¸ˆæœ‰ç©ºå¸®å¿™çœ‹ä¸‹<br>1ã€ä¸»å¤‡å»¶è¿Ÿï¼Œå°±æ˜¯åœ¨åŒä¸€ä¸ªäº‹åŠ¡åœ¨å¤‡åº“æ‰§è¡Œå®Œæˆçš„æ—¶é—´å’Œä¸»åº“æ‰§è¡Œå®Œæˆçš„æ—¶é—´ä¹‹é—´çš„å·®å€¼ï¼ŒåŒ…æ‹¬ä¸»åº“äº‹åŠ¡æ‰§è¡Œå®Œæˆæ—¶é—´å’Œå°†binlogå‘é€ç»™å¤‡åº“ï¼Œå¤‡åº“äº‹åŠ¡çš„æ‰§è¡Œå®Œæˆæ—¶é—´çš„å·®å€¼ã€‚æ¯ä¸ªäº‹åŠ¡çš„seconds_behind_masterå»¶è¿Ÿæ—¶é—´ï¼Œæ¯ä¸ªäº‹åŠ¡çš„ binlog é‡Œé¢éƒ½æœ‰ä¸€ä¸ªæ—¶é—´å­—æ®µï¼Œç”¨äºè®°å½•ä¸»åº“ä¸Šçš„å†™å…¥æ—¶é—´ï¼Œå¤‡åº“å–å‡ºå½“å‰æ­£åœ¨æ‰§è¡Œçš„äº‹åŠ¡çš„æ—¶é—´å­—æ®µçš„å€¼ï¼Œè®¡ç®—å®ƒä¸å½“å‰ç³»ç»Ÿæ—¶çš„å·®å€¼ã€‚<br>2ã€ä¸»å¤‡å»¶è¿Ÿçš„æ¥æºâ‘ é¦–å…ˆï¼Œæœ‰äº›éƒ¨ç½²æ¡ä»¶ä¸‹ï¼Œå¤‡åº“æ‰€åœ¨æœºå™¨çš„æ€§èƒ½è¦æ¯”ä¸»åº“æ‰€åœ¨çš„æœºå™¨æ€§èƒ½å·®ï¼ŒåŸå› å¤šä¸ªå¤‡åº“éƒ¨ç½²åœ¨åŒä¸€å°æœºå™¨ä¸Šï¼Œå¤§é‡çš„æŸ¥è¯¢ä¼šå¯¼è‡´ioèµ„æºçš„ç«äº‰ï¼Œè§£å†³åŠæ³•æ˜¯é…ç½®â€åŒ1â€œï¼Œredo logå’Œbinlogéƒ½åªwrite fs page cacheâ‘¡å¤‡åº“çš„å‹åŠ›å¤§ï¼Œäº§ç”Ÿçš„åŸå› å¤§é‡çš„æŸ¥è¯¢æ“ä½œåœ¨å¤‡åº“æ“ä½œï¼Œè€—è´¹äº†å¤§é‡çš„cpuï¼Œå¯¼è‡´åŒæ­¥å»¶è¿Ÿï¼Œè§£å†³åŠæ³•ï¼Œä½¿ç”¨ä¸€ä¸»å¤šä»ï¼Œå¤šä¸ªä»å‡å°‘å¤‡çš„æŸ¥è¯¢å‹åŠ›â‘¢å¤§äº‹åŠ¡ï¼Œå› ä¸ºå¦‚æœä¸€ä¸ªå¤§çš„äº‹åŠ¡çš„dmlæ“ä½œå¯¼è‡´æ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼Œå°†å…¶äº‹åŠ¡binlogå‘é€ç»™å¤‡åº“ï¼Œå¤‡åº“ä¹Ÿéœ€æ‰§è¡Œé‚£ä¹ˆé•¿æ—¶é—´ï¼Œå¯¼è‡´ä¸»å¤‡å»¶è¿Ÿï¼Œè§£å†³åŠæ³•å°½é‡å‡å°‘å¤§äº‹åŠ¡ï¼Œæ¯”å¦‚deleteæ“ä½œï¼Œä½¿ç”¨limitåˆ†æ‰¹åˆ é™¤ï¼Œå¯ä»¥é˜²æ­¢å¤§äº‹åŠ¡ä¹Ÿå¯ä»¥å‡å°‘é”çš„èŒƒå›´ã€‚<br>â‘£å¤§è¡¨çš„ddlï¼Œä¼šå¯¼è‡´ä¸»åº“å°†å…¶ddl binlogå‘é€ç»™å¤‡åº“ï¼Œå¤‡åº“è§£æä¸­è½¬æ—¥å¿—ï¼ŒåŒæ­¥ï¼Œåç»­çš„dml binlogå‘é€è¿‡æ¥ï¼Œéœ€ç­‰å¾…ddlçš„mdlå†™é”é‡Šæ”¾ï¼Œå¯¼è‡´ä¸»å¤‡å»¶è¿Ÿã€‚<br>3ã€å¯é æ€§ä¼˜å…ˆç­–ç•¥ï¼Œâ‘ åˆ¤æ–­å¤‡åº“ B ç°åœ¨çš„ seconds_behind_masterå¦‚æœå°äºæŸä¸ªå€¼ï¼ˆæ¯”å¦‚ 5 ç§’ï¼‰ç»§ç»­ä¸‹ä¸€æ­¥ï¼Œå¦åˆ™æŒç»­é‡è¯•è¿™ä¸€æ­¥ï¼Œâ‘¡æŠŠä¸»åº“ A æ”¹æˆåªè¯»çŠ¶æ€ï¼Œå³æŠŠ readonly è®¾ç½®ä¸º trueï¼Œâ‘¢åˆ¤æ–­å¤‡åº“ B çš„ seconds_behind_masterçš„å€¼ï¼Œç›´åˆ°è¿™ä¸ªå€¼å˜æˆ 0 ä¸ºæ­¢ï¼› æŠŠå¤‡åº“ B æ”¹æˆå¯è¯»å†™ä¹Ÿå°±æ˜¯æŠŠ readonly è®¾ç½®ä¸º falseï¼› æŠŠä¸šåŠ¡è¯·æ±‚åˆ‡æ¢åˆ°å¤‡åº“ï¼Œä¸ªäººç†è§£å¦‚æœå‘é€è¿‡æ¥çš„binlogåœ¨ä¸­è½¬æ—¥å¿—ä¸­æœ‰å¤šä¸ªäº‹åŠ¡ï¼Œä¸šåŠ¡ä¸å¯ç”¨çš„æ—¶é—´ï¼Œå°±æ˜¯å¤šä¸ªäº‹åŠ¡è¢«è¿ç”¨çš„æ€»æ—¶é—´ã€‚å¦‚æœéæ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸»åº“æ‰ç”µï¼Œä¼šå¯¼è‡´å‡ºç°çš„é—®é¢˜ï¼Œå¦‚æœå¤‡åº“å’Œä¸»åº“çš„å»¶è¿Ÿæ—¶é—´çŸ­ï¼Œåœ¨ä¸­è½¬æ—¥å¿—è¿ç”¨å®Œæˆï¼Œä¸šåŠ¡æ‰èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œå¦‚æœåœ¨ä¸­è½¬æ—¥å¿—è¿˜æœªè¿ç”¨å®Œæˆï¼Œåˆ‡æ¢ä¸ºå¤‡åº“ä¼šå¯¼è‡´ä¹‹å‰å®Œæˆçš„äº‹åŠ¡ï¼Œâ€æ•°æ®ä¸¢å¤±â€œï¼Œä½†æ˜¯åœ¨ä¸€äº›ä¸šåŠ¡åœºæ™¯ä¸‹ä¸å¯æ¥å—ã€‚<br>4ã€å¯ç”¨æ€§ç­–ç•¥ï¼Œå‡ºç°çš„é—®é¢˜ï¼šåœ¨åŒmï¼Œä¸”binlog_format=mixedï¼Œä¼šå¯¼è‡´ä¸»å¤‡æ•°æ®ä¸ä¸€è‡´ï¼Œä½¿ç”¨ä½¿ç”¨ row æ ¼å¼çš„ binlog æ—¶ï¼Œæ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜æ›´å®¹æ˜“å‘ç°ï¼Œå› ä¸ºbinlog rowä¼šè®°å½•å­—æ®µçš„æ‰€æœ‰å€¼ã€‚<br>5ã€è€å¸ˆæœ‰ä¸ªé—®é¢˜ä¸å¤ªç†è§£ï¼Œå°±æ˜¯ä¸»å¤‡å»¶è¿Ÿæ—¶ï¼Œä¼šå¯¼è‡´å¤‡åº“åœ¨æ²¡æœ‰è¿ç”¨ä¸­è½¬æ—¥å¿—æ—¶ï¼Œä¸šåŠ¡æŸ¥è¯¢æ—¶å¯¼è‡´â€æ•°æ®ä¸¢å¤±â€œï¼Œé‚£å¦‚ä½•è§£å†³äº†ï¼Ÿ","like_count":35,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439513,"discussion_content":"1~4 å¾ˆå¥½çš„æ€»ç»“\n5. ä¹Ÿæ˜¯å¥½é—®é¢˜ï¼Œç›´æ¥çœ‹ã€Š28 | è¯»å†™åˆ†ç¦»æœ‰å“ªäº›å‘ï¼Ÿã€‹ğŸ˜†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551182883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1261860,"avatar":"https://static001.geekbang.org/account/avatar/00/13/41/24/895f242a.jpg","nickname":"ä¸å¿˜åˆå¿ƒ","note":"","ucode":"9D57B894D900B5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294521,"discussion_content":"2 â‘  æè¿°çš„æœ‰é—®é¢˜å§ è§£å†³åŠæ³•æ˜¯é…ç½®â€åŒ1â€œï¼Œredo logå’Œbinlogéƒ½åªwrite fs page cache\n\nä¸ºä»€ä¹ˆåŒ1å°±æ˜¯åªå†™page cacheäº†? fsyncçš„æ“ä½œå“ªå»äº†ï¼Ÿ\n\næˆ‘çš„ç†è§£æ˜¯ æƒ³è¦åŠ å¿«æ—¥å¿—çš„å†™ é‚£å°±åº”è¯¥é…ç½®éåŒ1å•Š\n","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1595915704,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2287841,"avatar":"https://static001.geekbang.org/account/avatar/00/22/e8/e1/6045b299.jpg","nickname":"LPF","note":"","ucode":"036C552D7251E9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1261860,"avatar":"https://static001.geekbang.org/account/avatar/00/13/41/24/895f242a.jpg","nickname":"ä¸å¿˜åˆå¿ƒ","note":"","ucode":"9D57B894D900B5","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":332722,"discussion_content":"å¯¹çš„ï¼Œä»–æ„æ€æ˜¯å¯¹çš„ï¼Œä½†å†™é”™äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607324252,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":294521,"ip_address":""},"score":332722,"extra":""}]},{"author":{"id":2721761,"avatar":"https://static001.geekbang.org/account/avatar/00/29/87/e1/b85dce85.jpg","nickname":"æ— å°½è”šè“","note":"","ucode":"A665DF46833A81","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589177,"discussion_content":"ddlä¸æ˜¯onlineçš„å—ï¼Ÿå¤§éƒ¨åˆ†æ—¶é—´éƒ½æ˜¯mdlè¯»é”ï¼Ÿä¸ºä»€ä¹ˆè¿˜ä¼šæœ‰ä¸»ä»å»¶è¿Ÿå‘¢ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1664501064,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2389270,"avatar":"https://static001.geekbang.org/account/avatar/00/24/75/16/6e28bf17.jpg","nickname":"åˆæ™¨","note":"","ucode":"C5D95D13E49127","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2721761,"avatar":"https://static001.geekbang.org/account/avatar/00/29/87/e1/b85dce85.jpg","nickname":"æ— å°½è”šè“","note":"","ucode":"A665DF46833A81","race_medal":5,"user_type":1,"is_pvip":true},"discussion":{"id":590153,"discussion_content":"onlineçš„DDLï¼Œåˆšå¼€å§‹ä¹Ÿæ˜¯éœ€è¦è·å–MDLå†™é”çš„ï¼Œé¿å…å…¶ä»–äº‹åŠ¡å¹¶å‘DDLï¼›åç»­æ‰ä¼šé™çº§ä¸ºMDLè¯»é”ã€‚   ä»åº“æœ‰é•¿æ—¶é—´çš„æ…¢æŸ¥è¯¢æˆ–è€…æŸ¥è¯¢äº‹åŠ¡æœªæäº¤ï¼Œä¸»åº“åŒæ­¥è¿‡æ¥çš„DDLæ¶‰åŠæŸ¥è¯¢è¡¨çš„æ“ä½œï¼Œä¼šè¢«é˜»å¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665559233,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":589177,"ip_address":"é™•è¥¿"},"score":590153,"extra":""},{"author":{"id":2721761,"avatar":"https://static001.geekbang.org/account/avatar/00/29/87/e1/b85dce85.jpg","nickname":"æ— å°½è”šè“","note":"","ucode":"A665DF46833A81","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":2389270,"avatar":"https://static001.geekbang.org/account/avatar/00/24/75/16/6e28bf17.jpg","nickname":"åˆæ™¨","note":"","ucode":"C5D95D13E49127","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590347,"discussion_content":"ä½ æ˜¯è¯´é•¿äº‹åŠ¡é˜»å¡DDLï¼Ÿ ä½†æˆ‘é—®çš„æ˜¯ä¸ºä»€ä¹ˆDDLä¼šé€ æˆä¸»ä»å»¶è¿Ÿå‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665672837,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":590153,"ip_address":"ä¸Šæµ·"},"score":590347,"extra":""}]},{"author":{"id":2287841,"avatar":"https://static001.geekbang.org/account/avatar/00/22/e8/e1/6045b299.jpg","nickname":"LPF","note":"","ucode":"036C552D7251E9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332724,"discussion_content":"ç¬¬3ç‚¹ï¼šä¸­è½¬æ—¥å¿—æ•°æ®ä¸¢å¤±é—®é¢˜è¿™ä¸ªé—®é¢˜åº”è¯¥å±ä¸»åº“æ‰ç”µï¼Œæ­£åœ¨è‡ªè¡Œä¸­è½¬æ—¥å¿—çš„å¤‡åº“è¢«è½¬ä¸ºä¸»åº“åçš„é—®é¢˜å§ï¼é‚£åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œåœ¨å¯é æ€§ç­–ç•¥æ€§ä¸‹ä¼šè®©binlogæ‰§è¡Œå®Œæ¯•åæ‰ä¼šå°†å¤‡åº“åˆ‡æ¢ä¸ºä¸»åº“æ­¤æ—¶ä¸ä¼šå‘ç”Ÿæ•°æ®ä¸¢å¤±ï¼ˆç”±äºä½ è¯´çš„ä¸»å¤‡å»¶è¿Ÿä½å¯ä»¥è¿™ä¹ˆç”¨ï¼‰ï¼Œä½†åœ¨å¯ç”¨æ€§ç­–ç•¥ä¸‹æ•°æ®ä¸¢å¤±ï¼ˆä¸»å¤‡å»¶è¿ŸæœŸé—´äº‹åŠ¡ä¸å¯è§ï¼‰æœ¬èº«å°±å­˜åœ¨è¿™ä¸ªé—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607324736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":192547,"user_name":"è¿ç»´è€èƒ¡","can_delete":false,"product_type":"c1","uid":1227007,"ip_address":"","ucode":"DF398BEE296E11","user_header":"https://static001.geekbang.org/account/avatar/00/12/b8/ff/249da6da.jpg","comment_is_top":false,"comment_ctime":1584859219,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"108959041619","product_id":100020801,"comment_content":"å¤åˆ¶å»¶è¿Ÿæ’æŸ¥æ€è·¯ï¼š<br>1ã€æŸ¥æ•°æ®åº“åœ¨å¹²ä»€ä¹ˆ<br>pager cat - | grep -v Sleep | sort -rn -k 12 | head -n 20<br>show full processlist;<br>select * from information_schema.processlist where 1=1 order by TIME desc limit 10;<br><br>2ã€æŸ¥çœ‹sql_threadåœ¨å¹²ä»€ä¹ˆ<br>slaveä¸ŠæŸ¥çœ‹çŠ¶æ€ï¼šshow slave status\\G;<br>æŸ¥çœ‹relay_master_log_fileä»¥åŠexec_master_log_pos<br>masterä¸Šè§£æbinglogæ—¥å¿—ï¼šmysqlbinlog -v --base64-output=decode-rows --start-position=exec_master_log_pos relay_master_log_file<br><br>å¦‚æœå‘ç°å¡åœ¨æ“ä½œæŸè¡¨ä¸Šï¼š<br>æ£€æŸ¥è¡¨ç»“æ„<br>     \t  æ²¡æœ‰ç´¢å¼•ï¼šstop slave å¯èƒ½ä¼šå¡ä¸»ï¼Œå»ºè®®å…³é—­mysqlï¼Œå¯åŠ¨åå…ˆåŠ ç´¢å¼•ï¼Œç„¶åstart slave<br>     \t  æœ‰ç´¢å¼•ï¼šåªèƒ½ç­‰ï¼Œå¤§äº‹åŠ¡éœ€è¦åšæ‹†åˆ†ï¼Œä¸è¦æ“ä½œå¤ªå¤šæ•°æ®<br>å¤§äº‹åŠ¡ï¼šMä¸Šsessionå›è¯ä½¿ç”¨statementæ ¼å¼ï¼Œä½¿ç”¨è¯­å¥çº§åˆ«çš„å¤åˆ¶ <br><br>3ã€æŸ¥çœ‹MySQLçŠ¶æ€<br>æœºå™¨æ€§èƒ½ï¼ˆCPUã€IOç­‰ï¼‰ï¼šä»åº“é…ç½®é€‚å½“é«˜ä¸€ç‚¹ï¼Œä½¿ç”¨æ–°ç¡¬ä»¶PCI-Eæˆ–SSDè®¾å¤‡<br>è¡¨ç»“æ„:  è®¾è®¡è¦åˆç†ï¼Œå¿…é¡»æœ‰ä¸»é”®ï¼Œä¸»é”®è¦çŸ­å°ï¼Œä¸ºæŸ¥è¯¢å­—æ®µå»ºç´¢å¼•<br>ä¸šåŠ¡ç¨‹åºï¼šé€‚å½“ä½¿ç”¨ç¼“å­˜ï¼Œå‡å°‘æ•°æ®åº“å‹åŠ›<br>åˆ†æMySQLè¿›ç¨‹å¹¶ç»“åˆæºç ï¼šperf top `pidof mysqld` <br><br>4ã€å‚æ•°ä¸´æ—¶ä¼˜åŒ–<br>ä¸»åº“å¼€å¯group commit<br>ä»åº“å¼€å¯writeset<br>ä»åº“è®¾ç½®sync_binlog=0 &amp;&amp;  innodb_flush_log_at_trx_commit=2<br><br>5ã€æ£€æŸ¥é”æƒ…å†µ<br>show engine innodb status\\G;","like_count":26},{"had_liked":false,"id":58171,"user_name":"ä¸‡å‹‡","can_delete":false,"product_type":"c1","uid":1309092,"ip_address":"","ucode":"BC9E0918DF4516","user_header":"https://static001.geekbang.org/account/avatar/00/13/f9/a4/f0b92135.jpg","comment_is_top":false,"comment_ctime":1547006280,"is_pvip":false,"replies":[{"id":"20971","content":"ğŸ‘ğŸ¿<br>ä½ æ˜¯æœ‰æ•…äº‹çš„ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547016530,"ip_address":"","comment_id":58171,"utype":1}],"discussion_count":3,"race_medal":0,"score":"91741319496","product_id":100020801,"comment_content":"ä¸»å¤‡åŒæ­¥å»¶è¿Ÿï¼Œå·¥ä½œä¸­å¸¸é‡åˆ°å‡ ç§æƒ…å†µï¼š<br>1.ä¸»åº“åšå¤§é‡çš„dmlæ“ä½œï¼Œå¼•èµ·å»¶è¿Ÿ<br>2.ä¸»åº“æœ‰ä¸ªå¤§äº‹åŠ¡åœ¨å¤„ç†ï¼Œå¼•èµ·å»¶è¿Ÿ<br>3.å¯¹myisamå­˜å‚¨å¼•æ“çš„è¡¨åšdmlæ“ä½œï¼Œä»åº“ä¼šæœ‰å»¶è¿Ÿã€‚<br>4.åˆ©ç”¨ptå·¥å…·å¯¹ä¸»åº“çš„å¤§è¡¨åšå­—æ®µæ–°å¢ã€ä¿®æ”¹å’Œæ·»åŠ ç´¢å¼•ç­‰æ“ä½œï¼Œä»åº“ä¼šæœ‰å»¶è¿Ÿã€‚<br>","like_count":22,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435941,"discussion_content":"ğŸ‘ğŸ¿\nä½ æ˜¯æœ‰æ•…äº‹çš„ğŸ˜„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1547016530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1780797,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2c/3d/0bd58aa4.jpg","nickname":"Em","note":"","ucode":"32012A5C603C8A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577933,"discussion_content":"æˆ‘æ„¿ç§°ä½ ä¸ºå»¶è¿Ÿä¹‹ç‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656420502,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1115041,"avatar":"https://static001.geekbang.org/account/avatar/00/11/03/a1/e6a0f60b.jpg","nickname":"Sid","note":"","ucode":"0461B574B2736B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":205820,"discussion_content":"ç¬¬3ç‚¹ï¼Œæ˜¯å› ä¸ºmyisam ä»åº“é‡æ”¾dmlæ—¶ä½¿ç”¨äº†è¡¨é”çš„ç¼˜æ•…ï¼Œå¯¼è‡´ä¸»ä»å»¶è¿Ÿï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584346245,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58509,"user_name":"cyberty","can_delete":false,"product_type":"c1","uid":1018536,"ip_address":"","ucode":"8526DAA65CAEBA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8a/a8/cf86fe53.jpg","comment_is_top":false,"comment_ctime":1547097586,"is_pvip":false,"replies":[{"id":"21175","content":"å¥½é—®é¢˜ï¼Œä¸ä¼š","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547134430,"ip_address":"","comment_id":58509,"utype":1}],"discussion_count":9,"race_medal":0,"score":"87446443506","product_id":100020801,"comment_content":"è¯·é—®è€å¸ˆï¼Œå¦‚æœå¤‡åº“è¿æ¥ä¸»åº“ä¹‹åï¼Œä¸»åº“çš„ç³»ç»Ÿæ—¶é—´ä¿®æ”¹äº†ï¼Œå¤‡åº“åŒæ­¥çš„æ—¶å€™æ˜¯å¦ä¼šè‡ªåŠ¨ä¿®æ­£ï¼Ÿ","like_count":20,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436100,"discussion_content":"å¥½é—®é¢˜ï¼Œä¸ä¼š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547134430,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2278559,"avatar":"https://static001.geekbang.org/account/avatar/00/22/c4/9f/a01e4bd1.jpg","nickname":"æµ·æµª","note":"","ucode":"091941B3556B4B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328816,"discussion_content":"è¿˜ä»¥ä¸ºè€å¸ˆè¯´æ­¤é¢˜ä¸ä¼š","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1606231640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":5,"child_discussions":[{"author":{"id":1887586,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLhicDSmL4vicPADhxxzOzukMar8nV5Tc3ic2dz4FQIxMX3WmX5a2V3sdD121eWpvfQI8NXIkkDZoDFw/132","nickname":"Geek_536b54","note":"","ucode":"F62BC7781D9212","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2278559,"avatar":"https://static001.geekbang.org/account/avatar/00/22/c4/9f/a01e4bd1.jpg","nickname":"æµ·æµª","note":"","ucode":"091941B3556B4B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333983,"discussion_content":"ä¸æ˜¯äººäººéƒ½æ˜¯é€—æ¯”åœˆå­çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607683831,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":328816,"ip_address":""},"score":333983,"extra":""},{"author":{"id":1887586,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLhicDSmL4vicPADhxxzOzukMar8nV5Tc3ic2dz4FQIxMX3WmX5a2V3sdD121eWpvfQI8NXIkkDZoDFw/132","nickname":"Geek_536b54","note":"","ucode":"F62BC7781D9212","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2278559,"avatar":"https://static001.geekbang.org/account/avatar/00/22/c4/9f/a01e4bd1.jpg","nickname":"æµ·æµª","note":"","ucode":"091941B3556B4B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333984,"discussion_content":"ğŸ˜‚ğŸ˜‚ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607683998,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":328816,"ip_address":""},"score":333984,"extra":""},{"author":{"id":2942580,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/e6/74/b59c2ac8.jpg","nickname":"çŸ¥å°","note":"","ucode":"57DCC7F875A72F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2278559,"avatar":"https://static001.geekbang.org/account/avatar/00/22/c4/9f/a01e4bd1.jpg","nickname":"æµ·æµª","note":"","ucode":"091941B3556B4B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566840,"discussion_content":"å“ˆå“ˆå“ˆç¬‘æ­»äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650773496,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":328816,"ip_address":""},"score":566840,"extra":""}]},{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walleæ–Œ","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295970,"discussion_content":"è¯è¯´ï¼Œmysqlä¸ä¼šå®šæœŸè¯»å–æœåŠ¡å™¨çš„æ—¶é’Ÿå—ï¼Ÿæ¯”å¦‚æœåŠ¡å™¨æœ¬èº«æ—¶é’Ÿä¸ntpçš„åŒæ­¥ï¼Œä¿®å¤ä¹‹åã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596417520,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1069548,"avatar":"https://static001.geekbang.org/account/avatar/00/10/51/ec/3d51d5e6.jpg","nickname":"ä¸Šæ ¡","note":"","ucode":"DEE1CEE9E4C680","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289919,"discussion_content":"åº”è¯¥æ˜¯ç”¨åˆ°timestampè®¡ç®—å·®å€¼ï¼Œæ‰€ä»¥ä¸ä¿®æ­£ä¹Ÿæ²¡å…³ç³»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594268377,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58429,"user_name":"John","can_delete":false,"product_type":"c1","uid":1302506,"ip_address":"","ucode":"B4490A065DD779","user_header":"https://static001.geekbang.org/account/avatar/00/13/df/ea/5aad0029.jpg","comment_is_top":false,"comment_ctime":1547082345,"is_pvip":false,"replies":[{"id":"21077","content":"ä½ è¿™ä¸ªæ–¹æ³•å¥½ğŸ‘ğŸ¿<br><br>æ•°æ®é—®é¢˜çš„è¯ï¼Œå¦‚æœæ˜¯è®¾ç½®çš„row æ ¼å¼çš„binlogè¿˜å¥½ï¼Œå› ä¸ºinsertå’Œdeleteéƒ½ä¼šæŠ¥é”™ï¼Œä¼šå‡ºç°å¾ªç¯çš„å°±æ˜¯update, ç„¶åupdateéƒ½æ˜¯å¯é‡å…¥çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547089370,"ip_address":"","comment_id":58429,"utype":1}],"discussion_count":1,"race_medal":0,"score":"78856493673","product_id":100020801,"comment_content":"å¾ªç¯å¤åˆ¶æ ¹æœ¬åŸå› æ˜¯binlogä¸­å¼•å…¥äº†éå½“å‰ä¸»æœºçš„server idï¼Œå¯ä»¥é€šè¿‡ignore server idsè¿‡æ»¤ï¼Œä½†æ˜¯ä¸€èˆ¬æƒ…å†µå¦‚æœå‡ºç°å¾ªç¯å¤åˆ¶ï¼Œæ•°æ®çš„å¯é æ€§å°±å€¼å¾—æ€€ç–‘äº†ï¼Œä¸ç®¡æ˜¯è¿‡æ»¤è¿˜æ˜¯é‡æ–°æ‰¾ç‚¹éƒ½å¾ˆéš¾ä¿è¯å¾ªç¯çš„éƒ¨åˆ†å®Œæ•´æ‰§è¡Œè¿‡ï¼Œæœ€åéƒ½è¦éªŒè¯æ•°æ®çš„çŠ¶æ€ï¼Œå±äºç‰¹åˆ«ä¸¥é‡æ•…éšœğŸ˜‚","like_count":19,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436061,"discussion_content":"ä½ è¿™ä¸ªæ–¹æ³•å¥½ğŸ‘ğŸ¿\n\næ•°æ®é—®é¢˜çš„è¯ï¼Œå¦‚æœæ˜¯è®¾ç½®çš„row æ ¼å¼çš„binlogè¿˜å¥½ï¼Œå› ä¸ºinsertå’Œdeleteéƒ½ä¼šæŠ¥é”™ï¼Œä¼šå‡ºç°å¾ªç¯çš„å°±æ˜¯update, ç„¶åupdateéƒ½æ˜¯å¯é‡å…¥çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547089370,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58141,"user_name":"æ¢ä¸­å","can_delete":false,"product_type":"c1","uid":1006789,"ip_address":"","ucode":"52FE40242CBAD0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5c/c5/1231d633.jpg","comment_is_top":false,"comment_ctime":1547001817,"is_pvip":true,"replies":[{"id":"20963","content":"1.å¯èƒ½ä¼šä¸¢<br>2. è¦çœ‹é‡å¯ä¹‹åçš„æ‹“æ‰‘ç»“æ„äº†ï¼Œå¦‚æœè¿˜æœ‰èŠ‚ç‚¹æ˜¯è¿™ä¸ªåº“çš„ä»åº“ï¼Œè¿˜æ˜¯ä¼šæ‹¿èµ°çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547009398,"ip_address":"","comment_id":58141,"utype":1}],"discussion_count":5,"race_medal":1,"score":"70266478553","product_id":100020801,"comment_content":"æˆ‘æœ‰ä¸€ä¸ªæ¯”è¾ƒæç«¯ä¸€ç‚¹çš„HAé—®é¢˜ï¼Œå‡è®¾ä¸»åº“çš„binlogåˆšå†™æˆåŠŸè¿˜æœªæ¥å¾—åŠæŠŠbinlogåŒæ­¥åˆ°ä»åº“ï¼Œä¸»åº“å°±æ‰ç”µäº†ï¼Œè¿™æ—¶å€™ä»åº“çš„æ•°æ®ä¼šä¸å®Œæ•´å—ï¼Ÿ<br>ç¬¬äºŒä¸ªé—®é¢˜ï¼ŒåŸä¸»åº“é‡å¯åŠ å…¥é›†ç¾¤åï¼Œé‚£æ¡æ²¡æœ‰ä¼ å‡ºå»çš„binlogä¼šå¦‚ä½•å¤„ç†ï¼Ÿ","like_count":17,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435926,"discussion_content":"1.å¯èƒ½ä¼šä¸¢\n2. è¦çœ‹é‡å¯ä¹‹åçš„æ‹“æ‰‘ç»“æ„äº†ï¼Œå¦‚æœè¿˜æœ‰èŠ‚ç‚¹æ˜¯è¿™ä¸ªåº“çš„ä»åº“ï¼Œè¿˜æ˜¯ä¼šæ‹¿èµ°çš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1547009398,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1089345,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9f/41/82306dfe.jpg","nickname":"åŒ…å­","note":"","ucode":"6CC4EBB8CD3924","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2301,"discussion_content":"è°¢è°¢ï¼Œæ‰¾åˆ°ç­”æ¡ˆäº†ï¼Œåœ¨28ç« ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563444964,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1089345,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9f/41/82306dfe.jpg","nickname":"åŒ…å­","note":"","ucode":"6CC4EBB8CD3924","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2294,"discussion_content":"ä½ å¥½ï¼Œè€å¸ˆï¼Œè™½ç„¶è¯¾ç¨‹ç»“æŸå¥½ä¹…äº†ï¼Œè¿˜æ˜¯å¸Œæœ›ä½ èƒ½çœ‹åˆ°è¿™æ¡è¯„è®ºåšè§£ç­”ï¼š\nå°±åƒè¯¥æœ‹å‹æ‰€è¯´çš„ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹æ•°æ®ä¸¢æ‰äº†ã€‚\nè¯¥æ€ä¹ˆåŠï¼Ÿæ•°æ®åº“æœ‰æ²¡æœ‰æä¾›ä¸€ç§ï¼Œå®¢æˆ·ç«¯è¯·æ±‚-->ä¸»å’Œå¤‡éƒ½å†™å¥½binlogåæ‰å“åº”çš„è¿™ç§æœºåˆ¶ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563440323,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"ä¸€æ­¥","note":"","ucode":"73CEA468CE70C3","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":1089345,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9f/41/82306dfe.jpg","nickname":"åŒ…å­","note":"","ucode":"6CC4EBB8CD3924","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":93251,"discussion_content":"è¿™ç§æƒ…å†µï¼Œå½“ä¸»åº“æ‰ç”µäº†ï¼Œä»åº“ä¼šå‡çº§ä¸ºä¸»åº“ï¼Œæƒ³æŠŠä¸¢å¤±çš„æ•°æ®æ‰¾å›ï¼Œå°±è¦åˆ©ç”¨ä¸»åº“çš„binlogè¿›è¡Œæ¢å¤äº†\nä½ è¯´çš„è¿™ç§æœºåˆ¶Mysqlåº”è¯¥æ²¡æœ‰ï¼Œä¸è¿‡æ¶ˆæ¯é˜Ÿåˆ—æœ‰è¿™ç§æœºåˆ¶","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1576917105,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":2294,"ip_address":""},"score":93251,"extra":""},{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1089345,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9f/41/82306dfe.jpg","nickname":"åŒ…å­","note":"","ucode":"6CC4EBB8CD3924","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375097,"discussion_content":"æœ‰ï¼Œlossless semi-sync replication","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621482061,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":2294,"ip_address":""},"score":375097,"extra":""}]}]},{"had_liked":false,"id":58220,"user_name":"Max","can_delete":false,"product_type":"c1","uid":1302420,"ip_address":"","ucode":"E3F1CD8FCB66B3","user_header":"https://static001.geekbang.org/account/avatar/00/13/df/94/84296110.jpg","comment_is_top":false,"comment_ctime":1547012228,"is_pvip":false,"replies":[{"id":"20968","content":"ä¸ç”¨æŠ±æ­‰ï¼Œè¿™æ˜¯å¥½é—®é¢˜å‘€<br><br>è¿æ¥çš„æ—¶å€™ï¼Œä»åº“å‘Šè¯‰ä¸»åº“ä¿¡æ¯ï¼Œ<br>ä¹‹åæ˜¯ä¸»åº“ä¸»åŠ¨å‘çš„ã€‚<br><br>ç½‘ç»œå¦‚æœæ–­å¼€ï¼Œé‡è¿çš„æ—¶å€™æ˜¯ä»åº“é‡æ–°å‘Šè¯‰ä¸»åº“<br><br>ä¸»åº“åªæ˜¯â€œæ ¹æ®è¦æ±‚å‘æ—¥å¿—â€","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547016384,"ip_address":"","comment_id":58220,"utype":1}],"discussion_count":2,"race_medal":0,"score":"61676554372","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå›¾ä¸­äº§ç”Ÿçš„è¿™ä¸ªç°è±¡çš„åŸå› åº”è¯¥æ˜¯ï¼Œæ‰§è¡Œä¸€ä¸ªå¤§äº‹åŠ¡ï¼Œå¯¼è‡´second_behind_masterä¸€ç›´åœ¨å¢åŠ ã€‚<br>å…¶å®second_behind_masterçš„è®¡ç®—æœºæ–¹æ³•åº”è¯¥å½“å‰ç³»ç»Ÿçš„æ—¶é—´æˆ³å‡å»sql_threadçº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„binglog eventä¸Šçš„æ—¶é—´æˆ³ï¼Œå¾—åˆ°çš„å·®å€¼å°±æ˜¯seconds_behind_master.<br>ä½†æ ¹æ®seconds_behind_masteræ¥åˆ¤æ–­ä¸»ä»åŒæ­¥æœ‰ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼Œå¦‚æœä¸»åº“å’Œä»åº“ç½‘ç»œå¦‚æœä¸é€šï¼Œä»åº“ä¸ä¼šé©¬ä¸ŠçŸ¥é“å’Œä¸»åº“è¿æ¥ä¸èƒ½ï¼Œä»åº“æœ‰ä¸€ä¸ª<br>salve_net_timeout=å¤šå°‘ç§’ï¼Œä»åº“ä¼šé€šè¿‡è¿™ä¸ªå‚æ•°å®šæ—¶çš„æ£€æµ‹æ˜¯å¦ä¸ä¸»åº“ä¿æŒé€šè®¯ï¼Œæ‰€ä»¥è¿™ä¸ªå‚æ•°åº”è¯¥è®¾ä¸ºå°ä¸€ç‚¹ã€‚slave_net_timeout=10(å•ä½æ˜¯ç§’).<br>æˆ–è€…ç”¨pt-hearbeatæ¥æ£€æµ‹ä¸»ä»å»¶è¿Ÿã€‚<br><br>è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸ªé¢˜å¤–é—®é¢˜ï¼Œmysqlçš„ä¸»ä»å¤åˆ¶ï¼Œåˆ°åº•æ˜¯ä¸»åº“æŠŠbinlogäº‹ä»¶æ¨é€ç»™ä»åº“ï¼Œè¿˜æ˜¯ä»åº“è¯·æ±‚ä¸»åº“æŠŠbinlogäº‹ä»¶æ¨é€ç»™ä»åº“ã€‚<br>é™¤äº†start slave;è¿™ä¸ªåŠ¨ä½œè¡¨ç¤ºä»åº“è¯·æ±‚æŠŠæŸä¸€ä¸ªbinlogäº‹ä»¶æ¨é€ç»™å®ƒã€‚å› ä¸ºä¸€èˆ¬æƒ…å†µä¸‹ä¸»åº“çš„binlogæ¨é€ç»™ä»åº“æ˜¯å¼‚æ­¥æ¨¡å¼ï¼Œä¸éœ€è¦ä»åº“å‘Šè¯‰ä¸»åº“æˆ‘æ¥æ”¶è¿™ä¸ªäº‹ä»¶.<br>å¦‚æœä¸»ä»ä¹‹é—´ç½‘ç»œä¸é€šï¼Œä¸»åº“ä¼šå¤šæ¬¡å‘é€å·²ç»æ‰§è¡Œè¿‡çš„binlogäº‹ä»¶å—ï¼Ÿç½‘ç»œä¸å¥½å¯èƒ½å¤šæ¬¡æäº¤ å®åœ¨æŠ±æ­‰","like_count":15,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435955,"discussion_content":"ä¸ç”¨æŠ±æ­‰ï¼Œè¿™æ˜¯å¥½é—®é¢˜å‘€\n\nè¿æ¥çš„æ—¶å€™ï¼Œä»åº“å‘Šè¯‰ä¸»åº“ä¿¡æ¯ï¼Œ\nä¹‹åæ˜¯ä¸»åº“ä¸»åŠ¨å‘çš„ã€‚\n\nç½‘ç»œå¦‚æœæ–­å¼€ï¼Œé‡è¿çš„æ—¶å€™æ˜¯ä»åº“é‡æ–°å‘Šè¯‰ä¸»åº“\n\nä¸»åº“åªæ˜¯â€œæ ¹æ®è¦æ±‚å‘æ—¥å¿—â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547016384,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1584208,"avatar":"https://static001.geekbang.org/account/avatar/00/18/2c/50/64365ef7.jpg","nickname":"zhoubo_eric","note":"","ucode":"34725AA3A9D59C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582117,"discussion_content":"è¿™ä¸ªæ˜¯å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659242289,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58486,"user_name":"xm","can_delete":false,"product_type":"c1","uid":1254296,"ip_address":"","ucode":"9A08EB6F201D74","user_header":"https://static001.geekbang.org/account/avatar/00/13/23/98/bd96932f.jpg","comment_is_top":false,"comment_ctime":1547089775,"is_pvip":false,"replies":[{"id":"21171","content":"ä¸€èˆ¬å¤§äº1å°±ä¸å¥½ ^_^","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547134252,"ip_address":"","comment_id":58486,"utype":1}],"discussion_count":1,"race_medal":0,"score":"44496762735","product_id":100020801,"comment_content":"ä¸€èˆ¬ä¸»ä»å»¶æ—¶å¤šå°‘ç®—æ˜¯åˆç†çš„ï¼Ÿæ˜¯ç§’çº§åˆ«å—ï¼Ÿ","like_count":11,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436087,"discussion_content":"ä¸€èˆ¬å¤§äº1å°±ä¸å¥½ ^_^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547134252,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58312,"user_name":"7å·","can_delete":false,"product_type":"c1","uid":1318471,"ip_address":"","ucode":"F7F52807253F21","user_header":"https://static001.geekbang.org/account/avatar/00/14/1e/47/f01225df.jpg","comment_is_top":false,"comment_ctime":1547034161,"is_pvip":false,"replies":[{"id":"21008","content":"ä¼°è®¡ä¸‹ä¸€ä¸ªæœˆå å¤šå°‘æ¯”ä¾‹ï¼Œå¦‚æœæ¯”è¾ƒå°å°±å»ºæ–°è¡¨ï¼ŒæŠŠæ•°æ®å¯¼è¿‡å»å§<br>å¦‚æœä¸€ä¸ªæœˆå æ¯”é«˜çš„è¯ï¼Œåªèƒ½ä¸€ç‚¹ç‚¹åˆ äº†ã€‚<br><br>æ—¶é—´å­—æ®µæœ‰ç´¢å¼•çš„è¯ï¼Œæ¯ä¸ªåˆ†åŒºæŒ‰æ—¶é—´è¿‡æ»¤å‡ºæ¥åˆ é™¤","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547042840,"ip_address":"","comment_id":58312,"utype":1}],"discussion_count":3,"race_medal":0,"score":"44496707121","product_id":100020801,"comment_content":"è€å¸ˆï¼Œç”Ÿäº§ç¯å¢ƒæœ‰ä¸€å¼ è¡¨éœ€è¦æ¸…ç†ï¼Œè¯¥è¡¨å¤§å°140Gã€‚è¦ä¿ç•™æœ€è¿‘ä¸€ä¸ªæœˆçš„æ•°æ®ï¼Œåˆä¸èƒ½æŒ‰æ—¶é—´ç›´æ¥ç”¨deteleåˆ ï¼ˆå…¨è¡¨æ‰«æï¼‰ï¼Œæœ¬æ¥æƒ³é€šè¿‡æ¸…ç©ºåˆ†åŒºè¡¨åˆ ï¼Œä½†æ˜¯åˆ†åŒºè¡¨åˆæ˜¯å“ˆå¸Œçš„ã€‚ã€‚æœ‰æ²¡å¥½çš„åŠæ³•å‘¢ï¼Ÿ","like_count":11,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436005,"discussion_content":"ä¼°è®¡ä¸‹ä¸€ä¸ªæœˆå å¤šå°‘æ¯”ä¾‹ï¼Œå¦‚æœæ¯”è¾ƒå°å°±å»ºæ–°è¡¨ï¼ŒæŠŠæ•°æ®å¯¼è¿‡å»å§\nå¦‚æœä¸€ä¸ªæœˆå æ¯”é«˜çš„è¯ï¼Œåªèƒ½ä¸€ç‚¹ç‚¹åˆ äº†ã€‚\n\næ—¶é—´å­—æ®µæœ‰ç´¢å¼•çš„è¯ï¼Œæ¯ä¸ªåˆ†åŒºæŒ‰æ—¶é—´è¿‡æ»¤å‡ºæ¥åˆ é™¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547042840,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1348251,"avatar":"https://static001.geekbang.org/account/avatar/00/14/92/9b/7afb979a.jpg","nickname":"ç³–å…­å…­çˆ¸çˆ¸","note":"","ucode":"83A4399DA0C6D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1642,"discussion_content":"æˆ‘ä»¬ä½¿ç”¨ä¸­æ˜¯é€šè¿‡æ—¶é—´åˆ†åˆ«æŸ¥è¯¢å‡ºå¼€å§‹å’Œç»“æŸçš„ä¸»é”®ID,ç„¶åæ ¹æ®ä¸»é”®IDèŒƒå›´è¿›è¡Œè½®è¯¢åˆ é™¤","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1562753589,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walleæ–Œ","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295969,"discussion_content":"æˆ‘ä»¬é‚£dbaæ¯æ¬¡éƒ½å»ºè®®æˆ‘è¿™è¾¹ç”¨åˆ†åŒºè¡¨ã€‚ã€‚æˆ‘å¯¹æ­¤è¡¨ç¤ºæ— æ„Ÿï¼Œæˆ‘è‡ªå·±å†™äº†ä¸šåŠ¡ä¸Šçš„æ—¶é—´åºçš„åˆ†è¡¨ï¼Œä¸šåŠ¡æ§åˆ¶å¹¶å‘ä»dbä¸­å–æ•°æ®ï¼Œå¦ˆè€¶ï¼Œåˆ é™¤è¡¨è®°å½•ä¹Ÿæ˜¯æˆ‘è‡ªå·±å†™çš„ç»Ÿä¸€æ¸…åº“ç­–ç•¥-æ—¶é—´åºï¼Œè‡ªå·±æ§åˆ¶åˆ é™¤çš„æ­¥ä¼ï¼Œä¾æ—§åˆ é™¤çš„æ—¶é—´ä¸é•¿åº¦é™åˆ¶  å“ˆå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596417453,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58744,"user_name":"å´”ä¼Ÿå","can_delete":false,"product_type":"c1","uid":1022452,"ip_address":"","ucode":"ACDEEDF2A10999","user_header":"https://static001.geekbang.org/account/avatar/00/0f/99/f4/e0484cac.jpg","comment_is_top":false,"comment_ctime":1547187912,"is_pvip":true,"replies":[{"id":"21230","content":"å¼‚å¸¸åˆ‡æ¢æœ‰å¯èƒ½çš„<br><br>è¦æ ¹æ®ä½ çš„å¤„ç†ç­–ç•¥äº†ï¼Œå¦‚æœä¸èƒ½ä¸¢ï¼Œæœ‰å‡ ä¸ªå¯é€‰çš„<br>1.ä¸åˆ‡æ¢ï¼ˆç­‰è¿™ä¸ªåº“è‡ªå·±æ¢å¤èµ·æ¥ï¼‰<br>2. ä½¿ç”¨semi-syncç­–ç•¥<br>3. å¯åŠ¨åä¸šåŠ¡åšæ•°æ®å¯¹è´¦ï¼ˆè¿™ä¸ªä¸€èˆ¬ç”¨å¾—å°‘ï¼Œæˆæœ¬é«˜ï¼‰<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547190376,"ip_address":"","comment_id":58744,"utype":1}],"discussion_count":2,"race_medal":0,"score":"40201893576","product_id":100020801,"comment_content":"å‘ç”Ÿä¸»ä»åˆ‡æ¢çš„æ—¶å€™ï¼Œä¸»æœ‰çš„æœ€æ–°æ•°æ®æ²¡åŒæ­¥åˆ°ä»ï¼Œä¼šå‡ºç°è¿™ç§æƒ…å†µå—ï¼Œå‡ºç°äº†ä¼šæ€ä¹ˆæ ·","like_count":10,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436197,"discussion_content":"å¼‚å¸¸åˆ‡æ¢æœ‰å¯èƒ½çš„\n\nè¦æ ¹æ®ä½ çš„å¤„ç†ç­–ç•¥äº†ï¼Œå¦‚æœä¸èƒ½ä¸¢ï¼Œæœ‰å‡ ä¸ªå¯é€‰çš„\n1.ä¸åˆ‡æ¢ï¼ˆç­‰è¿™ä¸ªåº“è‡ªå·±æ¢å¤èµ·æ¥ï¼‰\n2. ä½¿ç”¨semi-syncç­–ç•¥\n3. å¯åŠ¨åä¸šåŠ¡åšæ•°æ®å¯¹è´¦ï¼ˆè¿™ä¸ªä¸€èˆ¬ç”¨å¾—å°‘ï¼Œæˆæœ¬é«˜ï¼‰\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547190376,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1812970,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a9/ea/5bfce6c5.jpg","nickname":"mgs2002","note":"","ucode":"F5931108BD509B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292400,"discussion_content":"ç¬¬ä¸‰ç§æ–¹æ¡ˆä½¿ç”¨è¿‡ï¼Œå¾ˆéº»çƒ¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595215486,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":69895,"user_name":"aliang","can_delete":false,"product_type":"c1","uid":1149502,"ip_address":"","ucode":"B36B94B362477F","user_header":"https://static001.geekbang.org/account/avatar/00/11/8a/3e/30c05bce.jpg","comment_is_top":false,"comment_ctime":1550898776,"is_pvip":true,"replies":[{"id":"24922","content":"å—¯ï¼Œå–æ—¶é—´è¿™ä¸ªåŠ¨ä½œåªå‘ç”Ÿåœ¨â€œä¸»ä»å»ºç«‹è¿æ¥â€çš„è¿‡ç¨‹ä¸­ï¼Œ<br>å¦‚æœå·²ç»è¿ç€çš„æ—¶å€™ï¼Œæ—¶é—´æˆ³æ”¹æ‰ï¼Œæ˜¯ä¼šä¸å‡†çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1550943716,"ip_address":"","comment_id":69895,"utype":1}],"discussion_count":3,"race_medal":0,"score":"35910637144","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸€ä¸ªé—®é¢˜ï¼šï¼ˆ1ï¼‰seconds_behind_masterçš„è®¡ç®—æ–¹æ³•æ˜¯é€šè¿‡ä»åº“çš„ç³»ç»Ÿæ—¶é—´æˆ³å‡å»sql_theadçº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„binlog_eventä¸Šçš„æ—¶é—´æˆ³çš„å·®å€¼ã€‚å½“ä»åº“ç³»ç»Ÿæ—¶é—´ä¸å‡†æ—¶ä¹Ÿä¸ä¼šå½±å“secondsçš„å€¼ï¼Œå› ä¸ºä»åº“è¿æ¥åˆ°ä¸»åº“æ—¶ä¼šé€šè¿‡select unix_timestampï¼ˆï¼‰æŸ¥è¯¢ä¸»åº“çš„ç³»ç»Ÿæ—¶é—´ï¼Œè‹¥å‘ç°å’Œä»åº“ä¸ä¸€è‡´ä¼šåœ¨è®¡ç®—secondsè¿™ä¸ªå€¼æ—¶ä½œè°ƒæ•´ï¼ˆ2ï¼‰æˆ‘çš„ç–‘æƒ‘æ˜¯åœ¨ä¸»ä»ç½‘ç»œæ­£å¸¸æ—¶ï¼Œselect unix_timestampæ‰§è¡Œçš„é¢‘ç‡å’Œè§¦å‘æ¡ä»¶æ˜¯æ€æ ·çš„ï¼ˆæ¢å¥è¯è¯´ï¼ˆ1ï¼‰ä¸­æè¿°çš„ä»åº“è¿æ¥åˆ°ä¸»åº“è¿™ä¸ªè¡Œä¸ºæ˜¯ä¸€ç›´å­˜åœ¨çš„è¿˜æ˜¯æœ‰å…¶ä»–è§¦å‘æ¡ä»¶ï¼Ÿï¼‰ã€‚å¦‚æœè¿™ä¸ªé¢‘ç‡ä¸é«˜ï¼Œé‚£åœ¨ä¸¤æ¬¡select unix_timestampæœŸé—´ä»åº“ç³»ç»Ÿæ—¶é—´å‘ç”Ÿå˜åŒ–ï¼Œsecondsçš„å€¼å²‚ä¸æ˜¯ä¸å‡†äº†ï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440338,"discussion_content":"å—¯ï¼Œå–æ—¶é—´è¿™ä¸ªåŠ¨ä½œåªå‘ç”Ÿåœ¨â€œä¸»ä»å»ºç«‹è¿æ¥â€çš„è¿‡ç¨‹ä¸­ï¼Œ\nå¦‚æœå·²ç»è¿ç€çš„æ—¶å€™ï¼Œæ—¶é—´æˆ³æ”¹æ‰ï¼Œæ˜¯ä¼šä¸å‡†çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550943716,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375128,"discussion_content":"åªåœ¨ä¸»å¤‡å»ºç«‹è¿æ¥çš„æ—¶å€™æŸ¥è¯¢ä¸€æ¬¡æ—¶é—´å·®ï¼Œé‚£ä¹ˆè¦æŸ¥è¯¢å‡†ç¡®çš„ä¸»å¤‡å»¶è¿Ÿï¼Œå¯ä»¥ä½¿ç”¨pt-heartbeatå·¥å…·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621491883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"ä¸€æ­¥","note":"","ucode":"73CEA468CE70C3","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":93272,"discussion_content":"è¿™ä¸ªé—®é¢˜ä¹Ÿæ˜¯æˆ‘ç–‘é—®çš„ï¼Œåœ¨å»ºç«‹çš„æ—¶å€™è·å–ä¸»åº“çš„æ—¶é—´ï¼Œå¦‚æœåé¢ä¸»åº“çš„æ—¶é—´æ”¹äº†æˆ–è€…æ—¶åŒºæ”¹äº† åº”è¯¥å°±ä¼šå½±å“è¿™ä¸ªSBMäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576917886,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58369,"user_name":"æ˜“ç¿”","can_delete":false,"product_type":"c1","uid":1304541,"ip_address":"","ucode":"8C63DB7379186C","user_header":"https://static001.geekbang.org/account/avatar/00/13/e7/dd/e68f9cf5.jpg","comment_is_top":false,"comment_ctime":1547045957,"is_pvip":false,"replies":[{"id":"21134","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547120909,"ip_address":"","comment_id":58369,"utype":1}],"discussion_count":2,"race_medal":0,"score":"35906784325","product_id":100020801,"comment_content":"å¸¸è§çš„éƒ½è®²äº†ï¼Œè¡¥å……å‡ ç‚¹æˆ‘é‡åˆ°è¿‡çš„ã€‚<br><br>1,å¤‡åº“åšé€»è¾‘å¤‡ä»½æ—¶ï¼Œæœ‰äº§ç”ŸMDLé”ã€‚ç„¶åå¤åˆ¶çº¿ç¨‹åˆšå¥½è¢«å µå¡ã€‚ã€‚killæ‰å¤‡ä»½çº¿ç¨‹ï¼Œä¸€åˆ‡éƒ½ç•…å¿«äº†ã€‚ã€‚æˆ‘é‡åˆ°è¿‡ï¼Œä½†æ˜¯æ„Ÿè§‰é‚£å¤‡ä»½æœŸé—´äº§ç”Ÿçš„éå…±äº«é”ä¸æ˜¯çŸ­æ—¶é—´å°±é‡Šæ”¾çš„å—ï¼Ÿä¸ºä»€ä¹ˆå µçš„æ—¶é—´é‚£ä¹ˆé•¿ï¼Œæ„Ÿè§‰åƒæ˜¯é‡åˆ°æ­»é”ã€‚å¤§ç¥è®²è®²å…¶ä¸­åŸå› ã€‚<br><br>2ï¼Œæ•°æ®åº“ç”¨äº†å…±äº«å­˜å‚¨ï¼Œå…¶å®ƒä¸šåŠ¡çš„ä¸æœŸå¾…(æˆ‘ä»¬å½“æ—¶æ˜¯å½’æ¡£ç¨‹åº)å ç”¨ä¼šå¯¼è‡´åŒæ ·è¿æ¥è¯¥å­˜å‚¨ä¸Šçš„æ•°æ®åº“é‡åˆ°å†™å…¥ç“¶é¢ˆï¼Œå†™å…¥ä¸ä»…ä»…æ˜¯åº”ç”¨ä¸­ç»§æ—¥å¿—äº§ç”Ÿçš„æ•°æ®ã€‚è¿˜æœ‰å†™ä¸­ç»§æ—¥å¿—ã€‚å†™ä¸­ç»§æ—¥å¿—æ…¢ï¼Œåº”ç”¨æ—¥å¿—çº¿ç¨‹å·¥ä½œå´æœ‰æ¡ä¸ç´Šã€‚è¿™æ—¶å€™ä¹Ÿä¼šäº§ç”Ÿå¤‡åº“å»¶è¿Ÿã€‚ç”±äºä½“ç°æ²¡æœ‰ä¸­ç»§æ—¥å¿—æ»ç•™ï¼Œæ²¡æœ‰æƒ³åˆ°ioé—®é¢˜ï¼Œå½“æ—¶ç¬¬ä¸€ååº”æ˜¯ç½‘ç»œå¸¦å®½è¢«æ‰“æ»¡äº†ï¼Œç¡®è®¤äº†ï¼Œæ²¡æœ‰é—®é¢˜è¿‡åã€‚ç„¶åæ‰¾åˆ°å­˜å‚¨ï¼Œçœ‹å­˜å‚¨IOPSã€‚æœ€åå®šä½åˆ°å½’æ¡£ç¨‹åºæ­£åœ¨æ‰¹é‡å†™å…¥æ•°æ®ã€‚","like_count":8,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436030,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547120909,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2009461,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/a9/75/dbccd12d.jpg","nickname":"ç¨»è‰äºº","note":"","ucode":"6694EE2CD36B8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":356111,"discussion_content":"1ã€å¤‡åº“é€»è¾‘å¤‡ä»½ï¼Œé¦–å…ˆè¦æ‹¿MDLå†™é”ï¼Œå¦‚æœè¿™æ—¶å¤‡åº“æœ‰ä¸ªæ…¢æŸ¥è¯¢å°±ä¼šå¯¼è‡´å¤‡ä»½å µåœ¨äº†æ‹¿é”é˜¶æ®µï¼Œåç»­é˜Ÿåˆ—çš„æ‰€æœ‰SQLéƒ½ä¼šhangä½ï¼Œè¡¨è±¡å°±æ˜¯ä¸»ä»å»¶è¿Ÿä¸æ–­å‡é«˜ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1615533450,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58330,"user_name":"Long","can_delete":false,"product_type":"c1","uid":1318970,"ip_address":"","ucode":"2417242560360A","user_header":"https://static001.geekbang.org/account/avatar/00/14/20/3a/90db6a24.jpg","comment_is_top":false,"comment_ctime":1547038074,"is_pvip":false,"replies":[{"id":"21006","content":"å—¯ï¼Œè¿™è¿™ä¸ªå»ºè®®å¾ˆå¥½ï¼Œæˆ‘ä¼šè€ƒè™‘åŠ çš„å“ˆğŸ¤","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547042671,"ip_address":"","comment_id":58330,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35906776442","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼š<br><br>ä¸€ç›´è¿½è¿™ä¸ªè¯¾ç¨‹ï¼Œè§£å†³äº†æˆ‘è‡ªå·±çš„å¾ˆå¤šçŸ¥è¯†ç›²ç‚¹ï¼Œæˆ–è€…æ›´åŠ æ·±å…¥çš„äº†è§£ä¸€äº›çŸ¥è¯†ç‚¹ï¼Œå·²ç»åœ¨è¯•è¯»ç•™è¨€ä¸‹æ¨èäº†è¿™ä¸ªè¯¾ç¨‹ã€‚<br><br>ä½†æ˜¯æœ‰çš„æ—¶å€™åœ¨åˆ†æé—®é¢˜çš„æ—¶å€™ï¼Œçœ‹å¾ˆå¤šæ—¥å¿—ï¼Œæ¯”å¦‚error logä¸­çš„æ­»é”æ—¥å¿—ï¼ŒæŠ¥é”™æ—¥å¿—ä¸­æ¯ä¸ªå­—æ®µæ˜¯ä»€ä¹ˆæ„æ€ï¼Œä»¥åŠshow innodb engine statusä¸­æ¯ä¸ªæ—¥å¿—æ®µçš„æ„æ€ï¼Œæ¯”å¦‚åœ¨å°†redo logçš„æ—¶å€™innodb statuså°±ä¼šè®°å½•ï¼Œè¿™æ ·å°±å¯ä»¥ç»“åˆè¯¾ç¨‹ä¸­çš„log writeï¼Œpage cahceå’Œfsyncé€»è¾‘åˆ°æ•°æ®åº“ä¸­å®é™…æ„Ÿå—åˆ°å­¦åˆ°çš„åŸå› ï¼Œåœ¨åº”ç”¨ä¸­æ€ä¹ˆä¸€ä¸€å¯¹åº”ã€‚<br>æ¯”å¦‚ï¼Œshow innodb engine statusä¸­ï¼š<br> --------<br> FILE I&#47;O<br> --------<br>***<br>***<br> Pending normal aio reads: 0 [0, 0, 0, 0, 0, 0, 0, 0] , aio writes: 0 [0, 0, 0, 0, 0, 0, 0, 0] ,<br>  ibuf aio reads: 0, log i&#47;o&#39;s: 0, sync i&#47;o&#39;s: 0<br> Pending flushes (fsync) log: 1; buffer pool: 0<br> 14321192292 OS file reads, 120057595 OS file writes, 60413577 OS fsyncs<br> 10 pending preads, 1 pending pwrites<br> 4648.01 reads&#47;s, 16383 avg bytes&#47;read, 48.09 writes&#47;s, 34.98 fsyncs&#47;s<br><br><br> ---<br> LOG<br> ---<br> Log sequence number 3893849611607<br> Log flushed up to   3893849603096<br> Pages flushed up to 3893705803837<br> Last checkpoint at  3893705803837<br> 1 pending log writes, 0 pending chkp writes<br> 28053287 log i&#47;o&#39;s done, 10.15 log i&#47;o&#39;s&#47;second<br><br>ä¹‹å‰çœ‹è¿‡ç½‘ä¸Šçš„ä¸€äº›åˆ†æï¼Œç”±äºå’ŒåŸç†è„±ç¦»ï¼Œæ‰€ä»¥ç†è§£çš„éƒ½ä¸æ·±ã€‚<br>éå¸¸æœŸå¾…è€å¸ˆèƒ½ç»“åˆerror logä¸€äº›å¸¸è§é—®é¢˜åˆ†ææ¯”å¦‚dead lockï¼Œå¸¸è§crashå•Šä¹‹ç±»çš„ï¼Œ<br>ä»¥åŠshow innodb engine statusä¸­çš„é‡ç‚¹å†…å®¹ï¼<br><br>å¤šè°¢<br><br>","like_count":9,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436014,"discussion_content":"å—¯ï¼Œè¿™è¿™ä¸ªå»ºè®®å¾ˆå¥½ï¼Œæˆ‘ä¼šè€ƒè™‘åŠ çš„å“ˆğŸ¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547042671,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58295,"user_name":"EAGLE","can_delete":false,"product_type":"c1","uid":1303484,"ip_address":"","ucode":"5B0FE019A8C9BD","user_header":"https://static001.geekbang.org/account/avatar/00/13/e3/bc/064401c7.jpg","comment_is_top":false,"comment_ctime":1547028664,"is_pvip":false,"replies":[{"id":"21013","content":"è¦çœ‹æœ‰æ²¡æœ‰å¼€å¹¶è¡Œå¤åˆ¶ï¼Œé»˜è®¤æ˜¯ä¸²è¡Œï¼Œä¸€ä¸ªå µå…¨éƒ¨å µ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547043066,"ip_address":"","comment_id":58295,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35906767032","product_id":100020801,"comment_content":"æ–‡ä¸­æåˆ°â€œå¦‚æœä¸€ä¸ªä¸»åº“ä¸Šçš„è¯­å¥æ‰§è¡Œ 10 åˆ†é’Ÿï¼Œé‚£è¿™ä¸ªäº‹åŠ¡å¾ˆå¯èƒ½å°±ä¼šå¯¼è‡´ä»åº“å»¶è¿Ÿ 10 åˆ†é’Ÿâ€ã€‚è¿™ä¸ªå»¶è¿Ÿæ˜¯é’ˆå¯¹å½“å‰deleteäº‹åŠ¡ï¼Œè¿˜æ˜¯æ‰€æœ‰çš„äº‹åŠ¡éƒ½å»¶è¿Ÿã€‚<br><br>","like_count":8,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435993,"discussion_content":"è¦çœ‹æœ‰æ²¡æœ‰å¼€å¹¶è¡Œå¤åˆ¶ï¼Œé»˜è®¤æ˜¯ä¸²è¡Œï¼Œä¸€ä¸ªå µå…¨éƒ¨å µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547043066,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58333,"user_name":"undifined","can_delete":false,"product_type":"c1","uid":1068920,"ip_address":"","ucode":"449CB4CD2DC089","user_header":"https://static001.geekbang.org/account/avatar/00/10/4f/78/c3d8ecb0.jpg","comment_is_top":false,"comment_ctime":1547038363,"is_pvip":false,"replies":[{"id":"21007","content":"1ä¸å¤ªå‡†ç¡®ï¼Œæ˜å¤©æˆ‘ä¼šæåˆ°å“ˆ<br><br>23å¯¹çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547042713,"ip_address":"","comment_id":58333,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23021874843","product_id":100020801,"comment_content":"é—®é¢˜ç­”æ¡ˆï¼š<br>1. å¤‡åº“åœ¨æ‰§è¡Œå¤æ‚æŸ¥è¯¢ï¼Œå¯¼è‡´èµ„æºè¢«å ç”¨<br>2. å¤‡åº“æ­£åœ¨æ‰§è¡Œä¸€ä¸ªå¤§äº‹åŠ¡<br>3. DML è¯­å¥æ‰§è¡Œ<br><br>è€å¸ˆæˆ‘çš„ç†è§£å¯¹å—","like_count":5,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436016,"discussion_content":"1ä¸å¤ªå‡†ç¡®ï¼Œæ˜å¤©æˆ‘ä¼šæåˆ°å“ˆ\n\n23å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547042713,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58258,"user_name":"Sr7vy","can_delete":false,"product_type":"c1","uid":1276653,"ip_address":"","ucode":"4C2D930E984BC9","user_header":"https://static001.geekbang.org/account/avatar/00/13/7a/ed/f52b84b9.jpg","comment_is_top":false,"comment_ctime":1547021755,"is_pvip":false,"replies":[{"id":"21019","content":"é—®é¢˜1:<br>1.å¤‡åº“æ²¡æ”¶åˆ°ï¼Œè¿˜æ˜¯æ”¶åˆ°æ²¡æ‰§è¡Œï¼Œå‰è€…0ï¼Œåè€…30<br>2. ç¬¬äºŒé—®æ²¡çœ‹æ‡‚<br><br>é—®é¢˜2:<br>ç±»ä¼¼çš„ï¼Œä¸»åº“æŠŠæ—¥å¿—éƒ½å‘ç»™å¤‡åº“äº†å—","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547044379,"ip_address":"","comment_id":58258,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23021858235","product_id":100020801,"comment_content":"é—®é¢˜1ï¼šT3çš„è§£é‡Šæ˜¯ï¼šå¤‡åº“æ‰§è¡Œå®Œè¿™ä¸ªäº‹ç‰©ã€‚åˆ™ï¼šSeconds_Behind_Master=T3-T1ã€‚å¦‚T1=30minï¼Œä¸»æ‰§è¡Œå®Œæˆï¼Œå¤‡æ²¡æœ‰æ‰§è¡Œã€‚çŒœæµ‹1ï¼šé‚£ä¹ˆSeconds_Behind_Master=30minå—ï¼ŸçŒœæµ‹2ï¼šå¤‡æ‰§éœ€è¦å…ˆæŠŠè¿™ä¸ª30minçš„äº‹åŠ¡æ‰§è¡Œå®Œåï¼ŒSeconds_Behind_Master=30minï¼Ÿ<br>é—®é¢˜2ï¼šå¾ˆå¤šæ—¶å€™æ˜¯å¦èƒ½æŠŠSeconds_Behind_Masterå½“ä½œçœŸæ­£çš„å»¶è¿Ÿæ—¶é—´ï¼ˆé¢è¯•å¸¸è¢«é—®ï¼‰ï¼Ÿå¦‚æœèƒ½ï¼Œpt-heartbeatå­˜åœ¨è¿˜æœ‰å•¥æ„ä¹‰å•Šï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435976,"discussion_content":"é—®é¢˜1:\n1.å¤‡åº“æ²¡æ”¶åˆ°ï¼Œè¿˜æ˜¯æ”¶åˆ°æ²¡æ‰§è¡Œï¼Œå‰è€…0ï¼Œåè€…30\n2. ç¬¬äºŒé—®æ²¡çœ‹æ‡‚\n\né—®é¢˜2:\nç±»ä¼¼çš„ï¼Œä¸»åº“æŠŠæ—¥å¿—éƒ½å‘ç»™å¤‡åº“äº†å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547044379,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2389270,"avatar":"https://static001.geekbang.org/account/avatar/00/24/75/16/6e28bf17.jpg","nickname":"åˆæ™¨","note":"","ucode":"C5D95D13E49127","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590161,"discussion_content":"ä¸èƒ½ã€‚ä¸»åº“ç”±äºç½‘ç»œåŸå› binlogæœªå‘é€ç»™ä»åº“ï¼Œè¿™æ—¶å€™å»¶è¿Ÿå·²ç»å­˜åœ¨ï¼Œä½†SBMä»ç„¶ä¸º0ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665560665,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é™•è¥¿"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58094,"user_name":"Â JJ","can_delete":false,"product_type":"c1","uid":1250967,"ip_address":"","ucode":"45EC52EFFC49FB","user_header":"https://static001.geekbang.org/account/avatar/00/13/16/97/9e342700.jpg","comment_is_top":false,"comment_ctime":1546996241,"is_pvip":false,"replies":[{"id":"20944","content":"ç­‰åº”ç”¨å®Œå°±è®¤ä¸ºæ˜¯SBM=0<br><br>å¦‚æœä¸èƒ½æ¥å—ä¸»åº“æœ‰æ¥ä¸åŠä¼ çš„ï¼Œå°±ä½¿ç”¨semi-sync","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547001592,"ip_address":"","comment_id":58094,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23021832721","product_id":100020801,"comment_content":"è¯·é—®è€å¸ˆï¼Œä¸»åº“æ–­ç”µäº†ï¼Œæ€ä¹ˆæŠŠbinlogä¼ ç»™ä»åº“åŒæ­¥æ•°æ®ï¼Œæ€ä¹ˆä½¿çš„SBMä¸º0ä¸»ä»åˆ‡æ¢å‘¢ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435902,"discussion_content":"ç­‰åº”ç”¨å®Œå°±è®¤ä¸ºæ˜¯SBM=0\n\nå¦‚æœä¸èƒ½æ¥å—ä¸»åº“æœ‰æ¥ä¸åŠä¼ çš„ï¼Œå°±ä½¿ç”¨semi-sync","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547001592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1371360,"avatar":"https://static001.geekbang.org/account/avatar/00/14/ec/e0/d072d6f0.jpg","nickname":"bigdudo","note":"","ucode":"5938710D7C1149","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":533408,"discussion_content":"æˆ‘çš„ç†è§£ï¼Œä¸»åº“æ–­ç”µäº†ï¼Œä½†æ˜¯åœ¨ä»åº“ioä¸Šä»ç„¶è¿˜æœ‰binlogæ—¥å¿—ã€æˆ–è€…è¯´ä»åº“æœ¬åœ°ä»ç„¶è¿˜æœ‰binlogæ—¥å¿—æ²¡å¤„ç†å®Œã€‚æ‰€ä»¥å³ä½¿ä¸»åº“ä¸å­˜åœ¨äº†ï¼Œä»åº“ä»ç„¶è¦é€šè¿‡ç°å­˜çš„binlogåšå¥½åŒæ­¥å¤„ç†ã€‚ç›´åˆ°ä»åº“åŒæ­¥çš„binlogæ—¥å¿—æ—¶é—´å’Œè‡ªå·±æœ¬åœ°æ—¶é—´å·®å°äº5å³SBM&lt;=5ï¼Œè¡¨ç¤ºä»åº“å…·å¤‡äº†å¯ä»¥å˜ä¸ºä¸»åº“çš„æ¡ä»¶ï¼Œç­‰åˆ°SBM=0äº†ï¼Œé‚£ä¹ˆæ­¤æ—¶ä»åº“å°±å¯ä»¥å˜ä¸ºä¸»åº“è¿›è¡Œè¯»å†™äº†ã€‚æ‰€ä»¥ä¹Ÿå°±æ˜¯åé¢è¯´çš„é‚£å¥è¯ï¼šâ€œé«˜å¯ç”¨æ˜¯ä¾èµ–ä¸»å¤‡å»¶æ—¶çš„ï¼ˆæ›´è¯¦ç»†çš„è¯´æ˜¯ä¾èµ–å¤‡åº“åœ¨åŒæ­¥binlogçš„å»¶æ—¶çš„ï¼‰â€œã€‚åŒæ­¥çš„binlogå»¶æ—¶è¶Šå°ï¼Œä»åº“åœ¨é‡åˆ°æç«¯æƒ…å†µä¸‹åˆ‡ä¸ºä¸»åº“çš„åŠ¨ä½œå°±è¶ŠåŠæ—¶ï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637853104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":435902,"ip_address":""},"score":533408,"extra":"{\"user_type\":1}"}]}]},{"had_liked":false,"id":58088,"user_name":"via","can_delete":false,"product_type":"c1","uid":1017696,"ip_address":"","ucode":"5A7E873D8D8FBE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/87/60/fe8a31ea.jpg","comment_is_top":false,"comment_ctime":1546995214,"is_pvip":false,"replies":[{"id":"21123","content":"canal å¯ä»¥äº†è§£ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547119143,"ip_address":"","comment_id":58088,"utype":1}],"discussion_count":3,"race_medal":0,"score":"23021831694","product_id":100020801,"comment_content":"é€šè¿‡ binlog è¾“å‡ºåˆ°å¤–éƒ¨ç³»ç»Ÿï¼Œæ¯”å¦‚ Hadoop è¿™ç±»...<br><br>æ–‡ä¸­è¿™ä¸ªå…·ä½“æ˜¯å¯é‡‡ç”¨ä»€ä¹ˆå·¥å…·å‘¢ï¼Ÿ<br> ","like_count":5,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435900,"discussion_content":"canal å¯ä»¥äº†è§£ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547119143,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walleæ–Œ","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295973,"discussion_content":"ä¸å…‰æ˜¯hadoop ä¹Ÿå¯ä»¥å¯¼å…¥åˆ°redisï¼Œcanelå¼ºå¤§ ï¼Œæ‰‹åŠ¨ç‚¹èµ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1596417633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2336545,"avatar":"https://static001.geekbang.org/account/avatar/00/23/a7/21/9366cdd8.jpg","nickname":"ä¸‰äº•å¯¿","note":"","ucode":"325E9D64C22C0D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373142,"discussion_content":"ä¹‹å‰å…¬å¸ç”¨è¿‡canalç›‘å¬éƒ¨åˆ†è¡¨ç„¶ååœ¨ä»£ç é‡Œå¤„ç†æ›´æ–°å…¶ä»–ä¸€äº›è¡¨ï¼Œæ²¡æƒ³åˆ°è¿˜å¯ä»¥è¾“å‡ºåˆ°å¤–éƒ¨ç³»ç»Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620630445,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":62839,"user_name":"700","can_delete":false,"product_type":"c1","uid":1072896,"ip_address":"","ucode":"E4BD0CBADAF951","user_header":"","comment_is_top":false,"comment_ctime":1548169361,"is_pvip":false,"replies":[{"id":"22257","content":"è·¨IDCè¿˜å¥½å§ï¼Œè·¨åŸå¸‚æˆ–è€…è·¨æ´²æ‰æ¯”è¾ƒéº»çƒ¦<br>å…¶å®ä¸»è¦è¿˜æ˜¯å»¶è¿Ÿçš„é—®é¢˜ï¼Œè¿™ä¸ªç¡®å®ä¸å¥½è§£å†³ã€‚<br>ä¸šåŠ¡å¼€å‘çš„æ—¶å€™å°½é‡æ˜¯æœ¬åŸå¸‚è®¿é—®ï¼Œå¦åˆ™å®¹æ˜“å‡ºç°æŠ–åŠ¨<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548224578,"ip_address":"","comment_id":62839,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18728038545","product_id":100020801,"comment_content":"è€å¸ˆè¯·æ•™ä¸‹ï¼ŒMySQL ä¸»ä»è·¨ IDC çš„ç—›ç‚¹æ˜¯ä»€ä¹ˆï¼ŸåŒåŸ IDC å’Œå¼‚åœ° IDC çš„ç—›ç‚¹ä¸€æ ·å—ï¼Ÿæ€ä¹ˆæ¥è§£å†³è¿™äº›ç—›ç‚¹ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437368,"discussion_content":"è·¨IDCè¿˜å¥½å§ï¼Œè·¨åŸå¸‚æˆ–è€…è·¨æ´²æ‰æ¯”è¾ƒéº»çƒ¦\nå…¶å®ä¸»è¦è¿˜æ˜¯å»¶è¿Ÿçš„é—®é¢˜ï¼Œè¿™ä¸ªç¡®å®ä¸å¥½è§£å†³ã€‚\nä¸šåŠ¡å¼€å‘çš„æ—¶å€™å°½é‡æ˜¯æœ¬åŸå¸‚è®¿é—®ï¼Œå¦åˆ™å®¹æ˜“å‡ºç°æŠ–åŠ¨\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548224578,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58658,"user_name":"åº·ç£Š","can_delete":false,"product_type":"c1","uid":1256403,"ip_address":"","ucode":"92A367153B33BC","user_header":"https://static001.geekbang.org/account/avatar/00/13/2b/d3/7c42e06c.jpg","comment_is_top":false,"comment_ctime":1547168430,"is_pvip":false,"replies":[{"id":"21205","content":"ç¬¬28ç¯‡ä¸“é—¨è®²è¿™ä¸ªé—®é¢˜ï¼Œæ•¬è¯·æœŸå¾…ğŸ¤","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547176281,"ip_address":"","comment_id":58658,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18727037614","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œç°åœ¨ä¸€èˆ¬é‡‡ç”¨è¯»å†™åˆ†ç¦»ï¼Œè¯»çš„æ˜¯ä»åº“ï¼Œé‚£ä¹ˆä¸»ä»å¦‚æœå‡ºç°å»¶è¿Ÿçš„è¯ï¼Œè¯»åº“å°±è¯»çš„ä¸æ˜¯æœ€æ–°æ•°æ®ï¼Œå¯¹è¿™ç§é—®é¢˜æœ‰ä»€ä¹ˆå¥½å»ºè®®å—ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436153,"discussion_content":"ç¬¬28ç¯‡ä¸“é—¨è®²è¿™ä¸ªé—®é¢˜ï¼Œæ•¬è¯·æœŸå¾…ğŸ¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547176281,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2389270,"avatar":"https://static001.geekbang.org/account/avatar/00/24/75/16/6e28bf17.jpg","nickname":"åˆæ™¨","note":"","ucode":"C5D95D13E49127","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590162,"discussion_content":"è¯»å¯ä»¥å…ˆåˆ‡å›ä¸»åº“ï¼Œä¸»ä»ä¸€è‡´åï¼Œå†åˆ‡å›æ¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665560788,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é™•è¥¿"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58136,"user_name":"WilliamX","can_delete":false,"product_type":"c1","uid":1295476,"ip_address":"","ucode":"E915091A891873","user_header":"https://static001.geekbang.org/account/avatar/00/13/c4/74/27cf551a.jpg","comment_is_top":false,"comment_ctime":1547001526,"is_pvip":false,"replies":[{"id":"21128","content":"å—¯ï¼Œä½ è¿™é‡Œè¯´çš„å¤§äº‹åŠ¡ï¼Œæ˜¯é‚£ç§â€œæŸ¥å¾ˆå¤šï¼Œæ›´æ–°å°‘â€ï¼Œè¿™ç§æ²¡å…³ç³»çš„ï¼›<br><br>ä¸€èˆ¬æˆ‘ä»¬åœ¨è¯´ä¸»å¤‡å»¶è¿Ÿçš„å¤§äº‹åŠ¡ï¼Œæ˜¯æŒ‡â€œæ›´æ–°å¾ˆå¤šè¡Œâ€çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547119353,"ip_address":"","comment_id":58136,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18726870710","product_id":100020801,"comment_content":"å¤§äº‹åŠ¡å¯¼è‡´ä¸»ä»å»¶æ—¶çš„é—®é¢˜ï¼Œæˆ‘ä¿®æ”¹ä¸‹ã€‚<br>ä¸»åº“ä¸Šå³ä½¿æœ‰å¤§äº‹åŠ¡ï¼Œä½†åªè¦å½±å“è¡Œæ•°ä¸å¤šï¼Œä¼ é€åˆ°ä»åº“æ—¶é—´ä¸ºt1ï¼Œå®Œæˆæ—¶é—´ä¸ºT3ï¼Œé‚£è¿™ä¸ªæ—¶é—´gapå’Œæ˜¯å¦å¤§äº‹åŠ¡æ²¡å…³ç³»å§ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435925,"discussion_content":"å—¯ï¼Œä½ è¿™é‡Œè¯´çš„å¤§äº‹åŠ¡ï¼Œæ˜¯é‚£ç§â€œæŸ¥å¾ˆå¤šï¼Œæ›´æ–°å°‘â€ï¼Œè¿™ç§æ²¡å…³ç³»çš„ï¼›\n\nä¸€èˆ¬æˆ‘ä»¬åœ¨è¯´ä¸»å¤‡å»¶è¿Ÿçš„å¤§äº‹åŠ¡ï¼Œæ˜¯æŒ‡â€œæ›´æ–°å¾ˆå¤šè¡Œâ€çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547119353,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58061,"user_name":"å°˜å°","can_delete":false,"product_type":"c1","uid":1247006,"ip_address":"","ucode":"CEE0C006387A03","user_header":"https://static001.geekbang.org/account/avatar/00/13/07/1e/bdbe93f4.jpg","comment_is_top":false,"comment_ctime":1546987503,"is_pvip":false,"replies":[{"id":"21118","content":"å¯¹ï¼Œæ²¡æœ‰ä¸»é”®åŒæ­¥å¾ˆæ…¢ï¼Œç®—æ˜¯ä¸ªbugï¼Œä¸è¿‡ä¹Ÿç¡®å®ä¸åº”è¯¥å†å‡ºç°æ²¡æœ‰ä¸»é”®çš„è¡¨å•¦^_^","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547119009,"ip_address":"","comment_id":58061,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18726856687","product_id":100020801,"comment_content":"è¡¨æ²¡æœ‰ä¸»é”®ï¼Œsysbenchå‹åŠ›æµ‹è¯•ä¹Ÿä¼šå¯¼è‡´ä¸»ä»å»¶æ—¶","like_count":4,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435884,"discussion_content":"å¯¹ï¼Œæ²¡æœ‰ä¸»é”®åŒæ­¥å¾ˆæ…¢ï¼Œç®—æ˜¯ä¸ªbugï¼Œä¸è¿‡ä¹Ÿç¡®å®ä¸åº”è¯¥å†å‡ºç°æ²¡æœ‰ä¸»é”®çš„è¡¨å•¦^_^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547119009,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":154069,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1574376505,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14459278393","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘çœ‹äº†ä¸€ä¸‹MySQL5.7å®˜æ–¹æ–‡æ¡£ï¼Œé‡Œé¢æåˆ°è¯´&quot;æœ¬è´¨ä¸Šï¼ŒSBMæ˜¯SQLçº¿ç¨‹ä¸IOçº¿ç¨‹æ—¶é—´å·®&quot;ï¼Œå¹¶æ˜ç¡®è¯´ï¼Œ&quot;è‹¥ç½‘ç»œå»¶è¿Ÿå¤§ï¼Œä½†SQLçº¿ç¨‹è¿½ä¸Šäº†IOçº¿ç¨‹ï¼ŒSBM=0ã€‚å³åªæœ‰ç½‘ç»œå¾ˆå¿«æ—¶ï¼ŒSBMæ‰æœ‰ç”¨&quot;ã€‚æˆ‘ç†è§£SBMæ˜¯T3-T2","like_count":3},{"had_liked":false,"id":58202,"user_name":"æ¢ä¸­å","can_delete":false,"product_type":"c1","uid":1006789,"ip_address":"","ucode":"52FE40242CBAD0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5c/c5/1231d633.jpg","comment_is_top":false,"comment_ctime":1547009869,"is_pvip":true,"replies":[{"id":"20970","content":"åé¢ä¼šè¯´ï¼Œ<br>å…¶å®ç¡®å®æ˜¯æƒè¡¡çš„ç»“æœ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547016503,"ip_address":"","comment_id":58202,"utype":1}],"discussion_count":1,"race_medal":1,"score":"14431911757","product_id":100020801,"comment_content":"å…³äºsemiâ€“syncï¼Œå¤§ç¥ä»€ä¹ˆæ—¶å€™å¼€ä¸€è®²ï¼Œæ„Ÿè§‰æ¯”è¾ƒé¸¡è‚‹ï¼Œå’Œç½‘ç»œç»‘æ­»äº†ï¼Œå¯ç”¨æ€§è‚¯èƒ½ä¼šé™ä½ã€‚ä¸è¿‡é˜¿é‡Œçš„Oceanbaseä¹Ÿæ˜¯ç”¨ç±»ä¼¼å¼ºä¸€è‡´åŒæ­¥çš„æ–¹å¼ï¼Œå¤§ç¥æ€ä¹ˆçœ‹ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435949,"discussion_content":"åé¢ä¼šè¯´ï¼Œ\nå…¶å®ç¡®å®æ˜¯æƒè¡¡çš„ç»“æœ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547016503,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58109,"user_name":"è€æ¨åŒå¿—","can_delete":false,"product_type":"c1","uid":1246199,"ip_address":"","ucode":"3F334F0CFD3DE6","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/f7/3a493bec.jpg","comment_is_top":false,"comment_ctime":1546998475,"is_pvip":false,"replies":[{"id":"21125","content":"2çš„è¯ï¼Œè™½ç„¶ä¼šå»¶è¿Ÿï¼Œä¸è¿‡ä¸ä¼šæ˜¯è¿™ä¹ˆæ ‡å‡†çš„çº¿<br><br>1 å¯¹çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547119205,"ip_address":"","comment_id":58109,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14431900363","product_id":100020801,"comment_content":"æ€è€ƒé¢˜æƒ…å†µæˆ‘æ„Ÿè§‰æœ‰ä¸¤ç§æƒ…å†µ<br>1ï¼‰å¤§äº‹åŠ¡ã€‚å¦‚è€å¸ˆæ–‡ç« é‡Œè¯´çš„æ—¶é—´æ®µt1ã€t2ã€t3, t1 10åˆ†é’Ÿï¼Œt2å¾ˆå¿«å®Œæˆï¼Œt3ä¹Ÿè¦åœ¨ä»åº“ä¸Šæ‰§è¡Œ10åˆ†é’Ÿã€‚é‚£ä¹ˆåœ¨t3æ—¶é—´æ®µå†…ï¼Œåº”è¯¥å°±æ˜¯å»¶æ—¶ä¸æ–­å¢åŠ å§ã€‚<br><br>2ï¼‰æˆ‘çš„çŒœæµ‹ï¼Œä¸»åº“å¤šçº¿ç¨‹æ‰§è¡Œäº‹åŠ¡ã€‚ä»åº“å•çº¿ç¨‹æ‰§è¡ŒrelayLogï¼Œç›¸å½“äºä¸²è¡ŒåŒ–äº‹åŠ¡ï¼Œåœ¨ä¸»åº“æ¯”è¾ƒç¹å¿™çš„æƒ…å†µä¸‹ï¼Œæ˜¯ä¸æ˜¯ä»åº“ä¹Ÿä¼šå‡ºç°å»¶æ—¶é€æ­¥å¢åŠ çš„æƒ…å†µ","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435910,"discussion_content":"2çš„è¯ï¼Œè™½ç„¶ä¼šå»¶è¿Ÿï¼Œä¸è¿‡ä¸ä¼šæ˜¯è¿™ä¹ˆæ ‡å‡†çš„çº¿\n\n1 å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547119205,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":204522,"user_name":"äº²æ–¤å¼“è™½ğŸ˜ˆ","can_delete":false,"product_type":"c1","uid":1412163,"ip_address":"","ucode":"575893ECF0B7AA","user_header":"https://static001.geekbang.org/account/avatar/00/15/8c/43/af33659f.jpg","comment_is_top":false,"comment_ctime":1586416658,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10176351250","product_id":100020801,"comment_content":"ä¹‹å‰å’ŒdbaèŠ.åœ¨è§£å†³å¤§äº‹åŠ¡åˆ é™¤çš„æ—¶å€™.dbaåšå†³ç»™å‡ºå»ºè®®,æ–°å»ºè¡¨.æŠŠå‰©ä¸‹çš„æ•°æ®æ’è¿›å».ç„¶åæ”¹æˆåŸæ¥çš„åå­—.å†åˆ é™¤ä¹‹å‰çš„è¡¨. æˆ‘è§‰å¾—dbaè¯´çš„å¾ˆå¯¹~å“ˆå“ˆ","like_count":2},{"had_liked":false,"id":67880,"user_name":"aliang","can_delete":false,"product_type":"c1","uid":1149502,"ip_address":"","ucode":"B36B94B362477F","user_header":"https://static001.geekbang.org/account/avatar/00/11/8a/3e/30c05bce.jpg","comment_is_top":false,"comment_ctime":1550308248,"is_pvip":true,"replies":[{"id":"24024","content":"1. å¯èƒ½æ˜¯ç‰ˆæœ¬é—®é¢˜ï¼Ÿç°åœ¨å®˜ç½‘è¿˜åœ¨å‘è¡Œçš„ç‰ˆæœ¬(5.5~8.0)éƒ½æ˜¯æœ‰æŸ¥ä¸»åº“çš„æ—¶é—´æˆ³ï¼Œç„¶åç®—å·®å€¼çš„ï¼›<br>2. å¦‚æœç½‘ç»œæ–­äº†ï¼Œè¿™æ—¶å€™show slave statusæ˜¯èƒ½å¤Ÿåˆ¤æ–­å‡ºæ¥çš„ï¼Œè¿™æ—¶å€™å½“ç„¶æ˜¯è¦æœ‰å¯¹åº”çš„å¼‚å¸¸å¤„ç†äº†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1550321503,"ip_address":"","comment_id":67880,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10140242840","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘ä¹‹å‰åœ¨çœ‹è´ºæ˜¥æ—¸å†™çš„ã€ŠMySQLç®¡ç†ä¹‹é“ï¼šæ€§èƒ½è°ƒä¼˜ã€é«˜å¯ç”¨ä¸ç›‘æ§ã€‹ ç¬¬2ç‰ˆæ—¶ï¼Œä¹¦ä¸Šæåˆ°ï¼šå½“ï¼ˆ1ï¼‰ä»åº“çš„ç³»ç»Ÿæ—¶é—´ä¸å‡†ï¼ˆæ²¡æœ‰æåˆ°è€å¸ˆè®²çš„ä»åº“è®¿é—®ä¸»åº“æ—¶ä¼šæ‰§è¡Œselect unix_timestampï¼ˆï¼‰è·å–ä¸»åº“ç³»ç»Ÿæ—¶é—´ï¼‰ ï¼ˆ2ï¼‰ä¸»ä»ä¹‹é—´ç½‘ç»œä¸­æ–­ï¼ˆæ­¤æ—¶ä¸»åº“binlogæ— æ³•æ¨é€åˆ°ä»åº“ï¼Œå¯¼è‡´ä»åº“æ²¡æœ‰æ­£åœ¨æ‰§è¡Œçš„binlogï¼›slave_net_timeoutè®¾ç½®å¤ªå¤§å¯¼è‡´slaveå¾ˆä¹…æ‰å°è¯•é‡è¿ä¸»åº“ï¼‰è¿™ä¸¤ç§æƒ…å†µæ—¶ï¼Œé seconds_behind_masterçš„å€¼æ¥åˆ¤æ–­ä¸»ä»å»¶è¿Ÿæ˜¯ä¸å‡†çš„ã€‚è¿™ä¸è€å¸ˆè®²çš„æœ‰ç‚¹å‡ºå…¥ï¼Œæ˜¯ä¸æ˜¯ä¹¦ä¸Šæè¿°é”™äº†å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439409,"discussion_content":"1. å¯èƒ½æ˜¯ç‰ˆæœ¬é—®é¢˜ï¼Ÿç°åœ¨å®˜ç½‘è¿˜åœ¨å‘è¡Œçš„ç‰ˆæœ¬(5.5~8.0)éƒ½æ˜¯æœ‰æŸ¥ä¸»åº“çš„æ—¶é—´æˆ³ï¼Œç„¶åç®—å·®å€¼çš„ï¼›\n2. å¦‚æœç½‘ç»œæ–­äº†ï¼Œè¿™æ—¶å€™show slave statusæ˜¯èƒ½å¤Ÿåˆ¤æ–­å‡ºæ¥çš„ï¼Œè¿™æ—¶å€™å½“ç„¶æ˜¯è¦æœ‰å¯¹åº”çš„å¼‚å¸¸å¤„ç†äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550321503,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":62338,"user_name":"å¼ºå“¥","can_delete":false,"product_type":"c1","uid":1206726,"ip_address":"","ucode":"3B8DC780FE4EF9","user_header":"https://static001.geekbang.org/account/avatar/00/12/69/c6/513df085.jpg","comment_is_top":false,"comment_ctime":1548034476,"is_pvip":false,"replies":[{"id":"22029","content":"é¢ é‚£è¿™ä¸ªæ˜¯è¦è·Ÿä¸šåŠ¡å¥½å¥½è®¨è®ºä¸€ä¸‹æ¶æ„è®¾è®¡çš„ï¼Œå¯ä»¥è¿™ä¹ˆè·Ÿä¸šåŠ¡è¯´ï¼Œå¦‚æœæ˜¯ç”±äºé—®é¢˜å¯¼è‡´æ•´ä¸ªè¿ä¸é€šï¼Œä¼šä¸ä¼šé›ªå´©ï¼Ÿ<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ç”¨æ€§ä¸å¯èƒ½100%ï¼Œå¦‚æœä¸å¯ç”¨å°±é›ªå´©ï¼Œè¡¨ç¤ºæ¶æ„éœ€è¦ä¼˜åŒ–ã€‚<br><br>ä¹‹åæ‰è°ˆç­–ç•¥é€‰æ‹©ï¼ˆå¦åˆ™è¿™æ ·æ ¹æœ¬æ²¡å¾—è°ˆå“ˆï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548037380,"ip_address":"","comment_id":62338,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10137969068","product_id":100020801,"comment_content":"ä»Šå¤©è·Ÿå…¬å¸çš„dbaå’¨è¯¢äº†ä¸‹ï¼Œç›®å‰å…¬å¸ç”¨çš„ä¸»å¤‡åˆ‡æ¢ç­–ç•¥éƒ½æ˜¯å¯ç”¨æ€§ä¼˜å…ˆï¼Œè¯´æ˜¯å¯é æ€§ä¼˜å…ˆçš„è¯ï¼Œå¯èƒ½ä¼šå¼•èµ·é›ªå´©ï¼Œä¸»è¦è¿˜æ˜¯ä¸šåŠ¡çš„å¹¶å‘é«˜ï¼Œè¿™ç§åœºæ™¯æ‚¨æ˜¯æ€ä¹ˆçœ‹å‘¢ï¼Ÿéº»çƒ¦ç»™ä¸‹æ€è·¯è°¢è°¢ã€‚","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437174,"discussion_content":"é¢ é‚£è¿™ä¸ªæ˜¯è¦è·Ÿä¸šåŠ¡å¥½å¥½è®¨è®ºä¸€ä¸‹æ¶æ„è®¾è®¡çš„ï¼Œå¯ä»¥è¿™ä¹ˆè·Ÿä¸šåŠ¡è¯´ï¼Œå¦‚æœæ˜¯ç”±äºé—®é¢˜å¯¼è‡´æ•´ä¸ªè¿ä¸é€šï¼Œä¼šä¸ä¼šé›ªå´©ï¼Ÿ\nä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ç”¨æ€§ä¸å¯èƒ½100%ï¼Œå¦‚æœä¸å¯ç”¨å°±é›ªå´©ï¼Œè¡¨ç¤ºæ¶æ„éœ€è¦ä¼˜åŒ–ã€‚\n\nä¹‹åæ‰è°ˆç­–ç•¥é€‰æ‹©ï¼ˆå¦åˆ™è¿™æ ·æ ¹æœ¬æ²¡å¾—è°ˆå“ˆï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548037380,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1812970,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a9/ea/5bfce6c5.jpg","nickname":"mgs2002","note":"","ucode":"F5931108BD509B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292401,"discussion_content":"å¹¶å‘é«˜çš„é—®é¢˜éœ€è¦å…ˆä»æ¶æ„è®¾è®¡æ–¹é¢ä¼˜åŒ–ï¼Œ ä¸èƒ½å‹åŠ›å…¨åˆ°æ•°æ®åº“è¿™è¾¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595215772,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":166446,"discussion_content":"å…³é”®è¿˜æ˜¯è¦çœ‹æ¶æ„è®¾è®¡ï¼Œä¸èƒ½å°†å‹åŠ›é€åˆ°æ•°æ®åº“å±‚é¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581397297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58150,"user_name":"éƒ­åˆš","can_delete":false,"product_type":"c1","uid":1292032,"ip_address":"","ucode":"22CB8ECE8E3DCA","user_header":"https://static001.geekbang.org/account/avatar/00/13/b7/00/12149f4e.jpg","comment_is_top":false,"comment_ctime":1547002941,"is_pvip":false,"replies":[{"id":"20974","content":"è¿™ä¸ªä¾‹å­æˆ‘ä»¬åªæ˜¯ä¸ºäº†æè¿°æ–¹ä¾¿ï¼Œæœ¬è´¨ä¸Šæ˜¯statement å¯¼è‡´çš„ï¼Œ<br>è€ƒè™‘ä¸‹updateçš„ä¾‹å­","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547016661,"ip_address":"","comment_id":58150,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10136937533","product_id":100020801,"comment_content":"å¦‚æœä¸ä½¿ç”¨è‡ªå¢åºåˆ—ä½œä¸ºä¸»é”®ï¼Œç”¨UUIDï¼Œæ˜¯ä¸æ˜¯å°±ä¸ä¼šå‡ºç°ä¸ä¸€è‡´çš„é—®é¢˜ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435930,"discussion_content":"è¿™ä¸ªä¾‹å­æˆ‘ä»¬åªæ˜¯ä¸ºäº†æè¿°æ–¹ä¾¿ï¼Œæœ¬è´¨ä¸Šæ˜¯statement å¯¼è‡´çš„ï¼Œ\nè€ƒè™‘ä¸‹updateçš„ä¾‹å­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547016661,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58038,"user_name":"Sinyo","can_delete":false,"product_type":"c1","uid":1307297,"ip_address":"","ucode":"57B243E7AB86A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJAibnPX9jW8kqLcIfibjic8GbkQkEUYyFKJkc39hZhibVlNrqwTjdLozkqibI2IwACd5YzofYickNxFnZg/132","comment_is_top":false,"comment_ctime":1546965469,"is_pvip":false,"replies":[{"id":"21117","content":"ä¸ä¼šå•Š<br>insertè®°å½•çš„æ—¶å€™è‚¯å®šéƒ½è®°å½•çš„<br>ä½ çš„é»˜è®¤å€¼æ˜¯ä»€ä¹ˆï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547118971,"ip_address":"","comment_id":58038,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10136900061","product_id":100020801,"comment_content":"è€å¸ˆï¼Œåœ¨ binlog rowæ¨¡å¼ä¸‹ï¼Œinsert åˆ°è¡¨ä¸­ä¸€æ¡è®°å½•ï¼Œè¿™æ¡è®°å½•ä¸­æŸä¸ªå­—æ®µä¸å¡«ï¼Œè¯¥å­—æ®µåœ¨è¡¨ä¸­æœ‰è®¾ç½®é»˜è®¤å€¼ï¼Œåˆ©ç”¨canalè§£æbinlogå‡ºæ¥ï¼Œè¿™ä¸ªä¸å¡«çš„å­—æ®µä¼šä¸å­˜åœ¨ï¼›éš¾é“ binlog åªè®°å½•æœ‰æ’å…¥çš„å­—æ®µæ•°æ®ï¼Œè¡¨å­—æ®µçš„é»˜è®¤æ•°æ®å°±ä¸ä¼šè®°å½•ä¹ˆï¼Ÿmysqlç‰ˆæœ¬5.7.22 canalç‰ˆæœ¬1.0.3","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435879,"discussion_content":"ä¸ä¼šå•Š\ninsertè®°å½•çš„æ—¶å€™è‚¯å®šéƒ½è®°å½•çš„\nä½ çš„é»˜è®¤å€¼æ˜¯ä»€ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547118971,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2389270,"avatar":"https://static001.geekbang.org/account/avatar/00/24/75/16/6e28bf17.jpg","nickname":"åˆæ™¨","note":"","ucode":"C5D95D13E49127","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590168,"discussion_content":"è¿™é‡Œåº”è¯¥æ˜¯çš„binlog_row_image=minimal  æœªè®°å½•æ’å…¥çš„é»˜è®¤å€¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665562516,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é™•è¥¿"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342285,"user_name":"å†è§ç†æƒ³","can_delete":false,"product_type":"c1","uid":1245999,"ip_address":"","ucode":"FAC88B3F6F6DFD","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/2f/0a5e0751.jpg","comment_is_top":false,"comment_ctime":1650171629,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5945138925","product_id":100020801,"comment_content":"é€šè¿‡åœ¨ä»åº“ä¸Šæ‰§è¡Œ  show slave status  æŸ¥çœ‹seconds_bebind_master çš„å€¼å¯ä»¥æŸ¥çœ‹ä¸»ä»å»¶è¿Ÿçš„æ—¶é—´ã€‚<br>å¯¼è‡´ä¸»ä»å»¶è¿Ÿçš„å‡ ç§åŸå› ï¼š<br>1.ä»åº“ç›¸è¾ƒäºä¸»åº“ä¸»æœºæ€§èƒ½è¿‡å·®ã€‚<br>2.ä»åº“è¯»å‹åŠ›è¿‡å¤§ï¼Œå¾ˆå¤šè¿ç»´&#47;è¿è¥çš„è€—cpuçš„æ•°æ®ç»Ÿè®¡è¯­å¥åœ¨ä»åº“æ‰§è¡Œã€‚<br>3.ä¸»åº“æ‰§è¡Œå¤§äº‹åŠ¡è€—æ—¶è¯­å¥ã€‚<br>4.ä¸»åº“æ‰§è¡Œå¤§è¡¨çš„DDLè¯­å¥ã€‚<br>5.å¤‡åº“çš„å¹¶è¡Œå¤åˆ¶èƒ½åŠ›è¾ƒå·®ã€‚<br>åŒMæ¶æ„ä¸»å¤‡åˆ‡æ¢çš„æµç¨‹ï¼š<br>1.æŸ¥çœ‹ seconds_behind_masterçš„å€¼ï¼Œå½“å®ƒå°äºä¸€ä¸ªæ•°å€¼ï¼ˆå°äº5sï¼‰æ—¶ï¼Œæ‰§è¡Œä¸‹ä¸€æ­¥ã€‚<br>2.å°†ä¸»åº“è®¾ç½®ä¸ºreadonly= true<br>3.ç­‰seconds_behind_master = 0åï¼Œå°†å¤‡åº“è®¾ç½®ä¸ºreadonly = falseã€‚<br>4.å°†ä¸šåŠ¡è¯·æ±‚å‘é€åˆ°å¤‡åº“ã€‚","like_count":1},{"had_liked":false,"id":182137,"user_name":"å›","can_delete":false,"product_type":"c1","uid":1106635,"ip_address":"","ucode":"9C2574F6A2D82B","user_header":"https://static001.geekbang.org/account/avatar/00/10/e2/cb/74c0dd45.jpg","comment_is_top":false,"comment_ctime":1582716907,"is_pvip":false,"replies":[{"id":"70517","content":"è¿™ç§ä¸ç®—ï¼Œå°±æ˜¯åº”è¯¥ç­‰äº‹åŠ¡æäº¤åæ‰å¯è§ï¼Œè¿™ä¸ªæ˜¯åˆç†çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1582721450,"ip_address":"","comment_id":182137,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5877684203","product_id":100020801,"comment_content":"å¤§äº‹åŠ¡è¿™ç§æƒ…å†µå¾ˆå¥½ç†è§£ã€‚å› ä¸ºä¸»åº“ä¸Šå¿…é¡»ç­‰äº‹åŠ¡æ‰§è¡Œå®Œæˆæ‰ä¼šå†™å…¥ binlogï¼Œå†ä¼ ç»™å¤‡åº“ã€‚æ‰€ä»¥ï¼Œå¦‚æœä¸€ä¸ªä¸»åº“ä¸Šçš„è¯­å¥æ‰§è¡Œ 10 åˆ†é’Ÿï¼Œé‚£è¿™ä¸ªäº‹åŠ¡å¾ˆå¯èƒ½å°±ä¼šå¯¼è‡´ä»åº“å»¶è¿Ÿ 10 åˆ†é’Ÿã€‚<br>==<br>é—®ä¸‹è€å¸ˆè¿™ä¸ªåœºæ™¯ï¼Œä¸€èˆ¬éš”ç¦»çº§åˆ«æ˜¯è¯»æäº¤ï¼Œå¤§äº‹åŠ¡æäº¤åï¼ŒæŸ¥è¯¢ä¹Ÿæ˜¯äº‹åŠ¡æäº¤åæ‰å¯è§ï¼Œè¿™ç§æ˜¯ä¸æ˜¯å°±ä¸ç®—å»¶è¿Ÿï¼Œè¿˜æ˜¯æˆ‘ç†è§£é”™äº†","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485233,"discussion_content":"è¿™ç§ä¸ç®—ï¼Œå°±æ˜¯åº”è¯¥ç­‰äº‹åŠ¡æäº¤åæ‰å¯è§ï¼Œè¿™ä¸ªæ˜¯åˆç†çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582721450,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109434,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1562032068,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5856999364","product_id":100020801,"comment_content":"è§£å†³æ•°æ®è¿ç§»æ—¶ä¸‰èŠ‚ç‚¹å¾ªç¯å¤åˆ¶é—®é¢˜ï¼Œæ˜¯è®¾ç½®å¿½ç•¥æœåŠ¡å™¨ B IGNORE_SERVER_IDS=(server_id_of_B)ï¼Œè¯·é—®ï¼Œå¦‚æœåœ¨ A æˆ– A&#39; ä¸Šå¿½ç•¥ B çš„binlog æ—¥å¿—ï¼Œåº”è¯¥ä¼šå¯¼è‡´è¿™æœŸé—´çš„æ•°æ®ï¼Œæ²¡æœ‰åŒæ­¥åˆ° A æˆ– A&#39;ï¼Ÿ<br>è€Œåé¢å†æ”¹å›æ¥ IGNORE_SERVER_IDS=() æ—¶ï¼Œå¿½ç•¥æœŸé—´çš„è¿™éƒ¨åˆ†æ•°æ®æ€ä¹ˆä» B ç»§ç»­åŒæ­¥åˆ° A æˆ– A&#39;ï¼Ÿ<br><br>è°¢è°¢è€å¸ˆï¼ï¼","like_count":1},{"had_liked":false,"id":102931,"user_name":"åº“å°”æ–¯","can_delete":false,"product_type":"c1","uid":1085569,"ip_address":"","ucode":"BC2F220993C3ED","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIG210UcWicnKgOjBJC3CUxiaRImsiaqscVLyABrA4Kshm7hReicSuyRvfe1x07ydoT8WknNh2QLxU3rA/132","comment_is_top":false,"comment_ctime":1560330656,"is_pvip":false,"replies":[{"id":"37463","content":"å¯¹äºä¸šåŠ¡æ¥è¯´ï¼Œä¸»åº“æäº¤äº†ï¼Œä»åº“æŸ¥ä¸åˆ°ï¼Œå°±ç®—æ˜¯å»¶è¿Ÿ<br>è¿™ä¸ªå¤§äº‹åŠ¡æœ¬èº«å°±å±äºè¿™ç§æƒ…å†µ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1560473044,"ip_address":"","comment_id":102931,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5855297952","product_id":100020801,"comment_content":"é‚£ä¹Ÿåªä¼šå¤§äº‹åŠ¡æœ¬èº«å»¶è¿Ÿã€‚ä½†è¿™å¹¶ä¸ä¼šé€ æˆé—®é¢˜ï¼Œå› ä¸ºå¤§äº‹åŠ¡çš„æ‹¥æœ‰è€…æ˜¯æœ‰é•¿æ—¶æ‰§è¡Œçš„é¢„æœŸçš„ã€‚é‚£ä¸ºä»€ä¹ˆæ–‡ä¸­è¦æ‹¿å‡ºæ¥ä½œä¸ºå…¸å‹å»¶è¿Ÿçš„ä¸€ç§å‘¢ï¼Ÿ<br><br>å…¶å®æˆ‘æ„Ÿè§‰å¤§äº‹åŠ¡å µå¡äº†æ‰€æœ‰äº‹åŠ¡ï¼Œé€ æˆå…¨å±€æ€§çš„delayï¼Œæ‰æˆä¸ºé—®é¢˜ï¼Œä½†æˆ‘ä¸æ˜ç™½åŸå› æ˜¯ä»€ä¹ˆã€‚","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453654,"discussion_content":"å¯¹äºä¸šåŠ¡æ¥è¯´ï¼Œä¸»åº“æäº¤äº†ï¼Œä»åº“æŸ¥ä¸åˆ°ï¼Œå°±ç®—æ˜¯å»¶è¿Ÿ\nè¿™ä¸ªå¤§äº‹åŠ¡æœ¬èº«å°±å±äºè¿™ç§æƒ…å†µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560473044,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":67538,"user_name":"ç˜¦çš®çŒ´","can_delete":false,"product_type":"c1","uid":1069066,"ip_address":"","ucode":"31350273CE7600","user_header":"https://static001.geekbang.org/account/avatar/00/10/50/0a/0ab85b6c.jpg","comment_is_top":false,"comment_ctime":1550194506,"is_pvip":false,"replies":[{"id":"25111","content":"ä¸æ˜¯â€œå› ä¸ºä¸»ä»åŒæ­¥æ—¶å»¶åé«˜ï¼Œå°±éœ€è¦ä¸»ä»åˆ‡æ¢â€ï¼Œè€Œæ˜¯è¯´å¦‚æœå­˜åœ¨åŒæ­¥å»¶è¿Ÿåé«˜ï¼Œé‚£ä¹ˆä¸»ä»åˆ‡æ¢çš„æ—¶å€™å°±ä¼šå½±å“å¯ç”¨æ€§","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1551094623,"ip_address":"","comment_id":67538,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5845161802","product_id":100020801,"comment_content":"å¦‚æœåªæ˜¯å› ä¸ºä¸»ä»åŒæ­¥æ—¶å»¶åé«˜ï¼Œå°±éœ€è¦ä¸»ä»åˆ‡æ¢ï¼Œè¿™æ„ä¹‰å¥½åƒä¸å¤§å•Šï¼Ÿæˆ‘çš„ç†è§£æ˜¯ï¼Œè¿™æ ·åˆ‡è¿˜æ˜¯è¦ç­‰äº‹åŠ¡åœ¨ä»èŠ‚ç‚¹æ‰§è¡Œå®Œæ‰è¡Œï¼Œæœ¬è´¨æ˜¯æŒªäº†ä¸€ä¸ªçªè€Œå·²ï¼Œè¯¥æ…¢çš„è¿˜æ˜¯æ…¢ã€‚ä¸çŸ¥é“è¿™æ ·çš„åˆ‡æ¢ä¼šåœ¨é‚£äº›ä¸šåŠ¡åœºæ™¯ä¸‹å‘ç”Ÿ<br><br>å¦å¤–mysqlçš„é«˜å¯ç”¨ï¼Œæˆ‘ä¸€ç›´ä»¥ä¸ºçš„æ˜¯èŠ‚ç‚¹å®•äº†ä¹‹åï¼Œå…¶ä»–èŠ‚ç‚¹å¯ä»¥æœ‰åŠæ³•ä¸ä¸¢æ•°æ®çš„åˆ‡äº†ï¼Œçœ‹æ ·å­å¼Šç«¯è¿˜æ˜¯æŒºå¤šçš„ã€‚<br><br>è°¢è°¢æŒ‡æ•™","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439236,"discussion_content":"ä¸æ˜¯â€œå› ä¸ºä¸»ä»åŒæ­¥æ—¶å»¶åé«˜ï¼Œå°±éœ€è¦ä¸»ä»åˆ‡æ¢â€ï¼Œè€Œæ˜¯è¯´å¦‚æœå­˜åœ¨åŒæ­¥å»¶è¿Ÿåé«˜ï¼Œé‚£ä¹ˆä¸»ä»åˆ‡æ¢çš„æ—¶å€™å°±ä¼šå½±å“å¯ç”¨æ€§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551094623,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58483,"user_name":"xm","can_delete":false,"product_type":"c1","uid":1254296,"ip_address":"","ucode":"9A08EB6F201D74","user_header":"https://static001.geekbang.org/account/avatar/00/13/23/98/bd96932f.jpg","comment_is_top":false,"comment_ctime":1547089612,"is_pvip":false,"replies":[{"id":"21184","content":"å°±æ˜¯è¦çœ‹è¿˜æœ‰æ²¡æœ‰æ•‘ï¼Œå¦‚æœå„ç§æ–¹æ³•éƒ½æ²¡æ•‘äº†ï¼Œå°±åªèƒ½ä¸»åº“åˆ†åº“äº†<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547140505,"ip_address":"","comment_id":58483,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5842056908","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œå¦‚æœæ˜¯ä¸»åº“çš„qpsä¸Šæ¥äº†ï¼Œä¸»åº“å†™è¯·æ±‚å¤ªå¤šè¿™ç§é€ æˆçš„å»¶è¿Ÿçš„è¯æ˜¯ä¸æ˜¯ä»ä¸»åº“ä¸Šä¸‹æ‰‹å¥½ç‚¹ï¼Ÿè¿™ç§æ˜¯åšçƒ­æ•°æ®éš”ç¦»ä¸»åº“æ‹†åˆ†ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436085,"discussion_content":"å°±æ˜¯è¦çœ‹è¿˜æœ‰æ²¡æœ‰æ•‘ï¼Œå¦‚æœå„ç§æ–¹æ³•éƒ½æ²¡æ•‘äº†ï¼Œå°±åªèƒ½ä¸»åº“åˆ†åº“äº†\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547140505,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58468,"user_name":"å…‰","can_delete":false,"product_type":"c1","uid":1284618,"ip_address":"","ucode":"BDA7F41566E4FE","user_header":"https://static001.geekbang.org/account/avatar/00/13/9a/0a/6c74e932.jpg","comment_is_top":false,"comment_ctime":1547087309,"is_pvip":true,"replies":[{"id":"21138","content":"1. ä¸»åº“ä¸Šåˆ é™¤ï¼Œå¯¹å»¶è¿Ÿæ²¡æœ‰ä»»ä½•å½±å“çš„ï¼Œè¿˜æ˜¯å¾—ç­‰ä»åº“åŒæ­¥å®Œæˆä¹‹åï¼Œå†æ‰§è¡Œâ€œåˆ è¡¨â€è¿™ä¸ªåŠ¨ä½œï¼›<br>   å¤‡åº“çš„è¯ï¼Œå¦‚æœè¿™ä¸ªè¯­å¥å·²ç»åœ¨æ‰§è¡Œäº†ï¼Œä½ æ‰§è¡Œçš„drop tableæ˜¯ä¼šè¢«å µä½çš„ï¼Œæ‰€ä»¥å¯¹å»¶è¿Ÿä¹Ÿæ— ç›Šï¼›<br>2. è¯´çš„æ˜¯ä¸»åº“åˆ é™¤è¿˜æ˜¯å¤‡åº“åˆ é™¤ï¼Ÿ<br>3. è¡¨ç¤ºä»åº“ä¸Šçš„å·¥ä½œçº¿ç¨‹çš„ç­‰å¾…é˜Ÿåˆ—å¤ªå¤šäº†<br>4. ä¸æ˜¯é”è¡¨ï¼Œå°±æ˜¯é”äº†å¤ªå¤šè¡Œäº†ï¼›<br>5. å¦‚æœä½ çœŸçš„å¯ä»¥é‡å»ºè¡¨çš„è¯ï¼Œæ“ä½œä¸Šå¯ä»¥è¿™æ ·ã€‚ <br>    a) å¤‡åº“ä¸Šstop slave<br>    b) å¤‡åº“ä¸Š set sql_log_bin=off; truncate table t;<br>    cï¼‰å¤‡åº“ä¸Šè·³è¿‡è¿™ä¸ªäº‹åŠ¡ï¼ˆæ–¹æ³•åé¢æ–‡ç« ä¼šè¯´ï¼‰<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547121525,"ip_address":"","comment_id":58468,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5842054605","product_id":100020801,"comment_content":"è€å¸ˆè¯·æ•™ä¸ªé—®é¢˜æˆ‘ä»¬å…¬å¸ç°åœ¨ç”¨å¾—é˜¿é‡Œäº‘mysql  ï¼Œæ˜¨å¤©ä¸‹åˆå¼€å§‹äº†å»¶è¿Ÿï¼Œæ’æŸ¥å‘ç°æœ‰å¤§äº‹åŠ¡æ›´æ–°æ“ä½œã€‚<br>ç°åœ¨æ€ä¹ˆè§£å†³è¿™ä¸ªå¤§äº‹åŠ¡å‘¢ã€‚<br>1ã€å¦‚æœæˆ‘ä¸»åº“ä¸Šåˆ é™¤è¿™ä¸ªè¡¨æˆ–è€…ä»åº“ä¸Šåˆ é™¤è¿™ä¸ªè¡¨ä¼šæœ‰ä»€ä¹ˆç»“æœã€‚<br>2ã€æ¯”å¦‚æˆ‘ä¸»åº“ä¸Šä¸‰ä¸ªè¡¨1ã€2ã€3ï¼ŒåªåŒæ­¥äº†1ï¼Œæ²¡åŒæ­¥å®Œæ—¶å€™åˆ é™¤äº†2ã€3è¡¨ï¼Œè¿™æ—¶å€™ä¼šæœ‰ä»€ä¹ˆé”™è¯¯ã€‚<br>3ã€Waiting for Slave Workers to free pending events è¿™ä¸ªæ˜¯ä»£è¡¨ä»€ä¹ˆæ„æ€<br>4ã€mysql tables in use 1, locked 1<br>     6045 lock struct(s), heap size 549072, 159972 row lock(s), undo log entries 159972<br>      MySQL thread id 3, OS thread handle 47532738873088, query id 165269 Executing event<br>è¿™ä¸ªæ˜¯é”è¡¨äº†æŠŠã€‚èƒ½ç®€å•è§£é‡Šä¸‹å‘¢ã€‚æˆ‘æŸ¥èµ„æ–™ä¸æ˜¯å¾ˆæ˜ç™½ã€‚<br>5ã€è¿™ä¸ªäº‹åŠ¡æ˜¯ä¸æ˜¯åªèƒ½ç­‰ã€‚æˆ–è€…æ˜¯é‡å»ºä¸»ä»ã€‚<br>","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436075,"discussion_content":"1. ä¸»åº“ä¸Šåˆ é™¤ï¼Œå¯¹å»¶è¿Ÿæ²¡æœ‰ä»»ä½•å½±å“çš„ï¼Œè¿˜æ˜¯å¾—ç­‰ä»åº“åŒæ­¥å®Œæˆä¹‹åï¼Œå†æ‰§è¡Œâ€œåˆ è¡¨â€è¿™ä¸ªåŠ¨ä½œï¼›\n   å¤‡åº“çš„è¯ï¼Œå¦‚æœè¿™ä¸ªè¯­å¥å·²ç»åœ¨æ‰§è¡Œäº†ï¼Œä½ æ‰§è¡Œçš„drop tableæ˜¯ä¼šè¢«å µä½çš„ï¼Œæ‰€ä»¥å¯¹å»¶è¿Ÿä¹Ÿæ— ç›Šï¼›\n2. è¯´çš„æ˜¯ä¸»åº“åˆ é™¤è¿˜æ˜¯å¤‡åº“åˆ é™¤ï¼Ÿ\n3. è¡¨ç¤ºä»åº“ä¸Šçš„å·¥ä½œçº¿ç¨‹çš„ç­‰å¾…é˜Ÿåˆ—å¤ªå¤šäº†\n4. ä¸æ˜¯é”è¡¨ï¼Œå°±æ˜¯é”äº†å¤ªå¤šè¡Œäº†ï¼›\n5. å¦‚æœä½ çœŸçš„å¯ä»¥é‡å»ºè¡¨çš„è¯ï¼Œæ“ä½œä¸Šå¯ä»¥è¿™æ ·ã€‚ \n    a) å¤‡åº“ä¸Šstop slave\n    b) å¤‡åº“ä¸Š set sql_log_bin=off; truncate table t;\n    cï¼‰å¤‡åº“ä¸Šè·³è¿‡è¿™ä¸ªäº‹åŠ¡ï¼ˆæ–¹æ³•åé¢æ–‡ç« ä¼šè¯´ï¼‰\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547121525,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58438,"user_name":"æ˜¥å›°ç§‹ä¹å¤æ‰“ç›¹","can_delete":false,"product_type":"c1","uid":1210807,"ip_address":"","ucode":"CCC558EF504F4B","user_header":"https://static001.geekbang.org/account/avatar/00/12/79/b7/989824f7.jpg","comment_is_top":false,"comment_ctime":1547083654,"is_pvip":false,"replies":[{"id":"21054","content":"å¥½é—®é¢˜ï¼Œä¸€ç§æ–¹æ³•æ˜¯å¼€semi-sync,ä¸€ç§æ˜¯ç›´æ¥åˆ°ä¸»åº“show master status ï¼Œæ‹¿åˆ°ä»åº“å»åˆ¤æ–­ä½ç‚¹ï¼Œä¸»åŠ¨åˆ‡æ¢å¯ä»¥è¿™ä¹ˆåšã€‚<br>ä¸è¿‡ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåªè¦io_threadæ­£å¸¸running,ï¼Œæ—¥å¿—éƒ½æ˜¯ä¼šé©¬ä¸Šå‘ç»™å¤‡åº“çš„ï¼Œå»¶è¿Ÿåªè¦è¿˜æ˜¯å‘ç”Ÿåœ¨sql_theeadå“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547085410,"ip_address":"","comment_id":58438,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5842050950","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸€ä¸ªé—®é¢˜<br>åœ¨å¤åˆ¶ä¸­ï¼Œå¤‡åº“æ€ä¹ˆç¡®è®¤io_threadå·²ç»å®Œæˆäº†sql_threadåŒæ­¥è¿‡æ¥çš„relay logå‘¢<br>æ¯”å¦‚ï¼Œå»¶æ—¶å¾€å¾€æ˜¯å‘ç”Ÿåœ¨io_threadçš„åº”ç”¨ä¸Š<br>è¿™æ—¶ï¼Œä¸»åº“å®•æœºæ‰binlog(mysql-binlog.000023,ä½ç½®ç‚¹500ï¼‰ï¼Œå‡å¦‚å¤‡åº“çš„relay logå·²ç»æ¥åˆ°åˆ°(mysql-binlog.000023,ä½ç½®ç‚¹400)ï¼Œè¿™æ—¶io_threadå·²ç»åº”ç”¨åˆ°ï¼ˆmysql-binlog.000023,ä½ç½®ç‚¹100)é˜»å¡äº†ï¼ˆæ¯”å¦‚æŸç§å»¶æ—¶ä¹‹ç±»ï¼‰,æƒ³çŸ¥é“æ€ä¹ˆåœ¨å¤‡åº“ä¸Šç¡®è®¤io_threadå·²ç»æ‰§è¡Œå®Œäº†æ¥å—åˆ°çš„æ‰€æœ‰relay logï¼ˆmysql-binlog.000023,ä½ç½®ç‚¹400ï¼‰ï¼Ÿ<br>æŒ‰ç†è¯´ï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™è¦åˆ‡æ¢(æ‰‹åŠ¨)ï¼Œæ˜¯è¦ç­‰åˆ°io_threadçº¿ç¨‹åº”ç”¨å®Œæˆäº†æ‰åº”è¯¥å®Œæˆåˆ‡æ¢çš„ï¼Œ<br>mhaå¯ä»¥è‡ªåŠ¨ç¡®è®¤æ˜¯å¦åº”ç”¨å®Œï¼Œå¦‚æœè¦æ‰‹åŠ¨åˆ‡æ¢ï¼Œæ˜¯å¦åªæœ‰å»è¯»relay å’Œbinlogæ¯”è¾ƒï¼Ÿ<br>","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436064,"discussion_content":"å¥½é—®é¢˜ï¼Œä¸€ç§æ–¹æ³•æ˜¯å¼€semi-sync,ä¸€ç§æ˜¯ç›´æ¥åˆ°ä¸»åº“show master status ï¼Œæ‹¿åˆ°ä»åº“å»åˆ¤æ–­ä½ç‚¹ï¼Œä¸»åŠ¨åˆ‡æ¢å¯ä»¥è¿™ä¹ˆåšã€‚\nä¸è¿‡ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåªè¦io_threadæ­£å¸¸running,ï¼Œæ—¥å¿—éƒ½æ˜¯ä¼šé©¬ä¸Šå‘ç»™å¤‡åº“çš„ï¼Œå»¶è¿Ÿåªè¦è¿˜æ˜¯å‘ç”Ÿåœ¨sql_theeadå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547085410,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58314,"user_name":"å¼ æ°¸å¿—","can_delete":false,"product_type":"c1","uid":1208727,"ip_address":"","ucode":"E54B75EF3F63B3","user_header":"https://static001.geekbang.org/account/avatar/00/12/71/97/f1a3d398.jpg","comment_is_top":false,"comment_ctime":1547035009,"is_pvip":false,"replies":[{"id":"21011","content":"å¯¹çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547042982,"ip_address":"","comment_id":58314,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5842002305","product_id":100020801,"comment_content":"è¡¨ä¸Šæ²¡æœ‰ä¸»é”®æˆ–å”¯ä¸€é”®ï¼Œæˆ–è€…ç´¢å¼•æ•ˆç‡ä¸é«˜ï¼Œè¿™ç±»è¡¨ä¸Šæœ‰æ•°æ®ä¿®æ”¹åˆ é™¤æ—¶ï¼Œç”±äºæ•ˆç‡å¾ˆå·®ï¼Œä¸»ä»åŒæ­¥ä¼šå»¶è¿Ÿã€‚å½“è¿™ç±»è¡¨ä¸Šä¿®æ”¹çš„æ•°æ®å¤šæ—¶ï¼Œå»¶è¿Ÿå°±ä¼šæŒç»­å¢é•¿ã€‚<br>æœ‰ä¸»é”®çš„è¡¨ï¼Œä¸€ä¸ªäº‹åŠ¡æ“ä½œçš„æ•°æ®å¤šæ—¶ï¼Œä¹Ÿä¼šå‡ºç°å»¶è¿ŸæŒç»­å¢é•¿çš„æƒ…å†µã€‚","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436007,"discussion_content":"å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547042982,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58261,"user_name":"user","can_delete":false,"product_type":"c1","uid":1307295,"ip_address":"","ucode":"3AA2D3DA955B4A","user_header":"https://static001.geekbang.org/account/avatar/00/13/f2/9f/b4af181c.jpg","comment_is_top":false,"comment_ctime":1547022408,"is_pvip":false,"replies":[{"id":"21132","content":"ä¸€èˆ¬è¿™ç§æƒ…å†µæ˜¯ä»åº“1çš„å‹åŠ›å¤§ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547119746,"ip_address":"","comment_id":58261,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5841989704","product_id":100020801,"comment_content":"ä¸€ä¸»ä¸¤ä»é…ç½®ä¸€æ ·ï¼ŒæŸä¸€æ—¶åˆ»ï¼Œä»åº“1æœ‰ç¬é—´çš„3så»¶è¿Ÿï¼Œä»åº“2 æ²¡æœ‰å»¶è¿Ÿï¼Œè¿™ä¸ªæ˜¯æ€ä¹ˆå›äº‹å•Šï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435978,"discussion_content":"ä¸€èˆ¬è¿™ç§æƒ…å†µæ˜¯ä»åº“1çš„å‹åŠ›å¤§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547119746,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58170,"user_name":"Dovelol","can_delete":false,"product_type":"c1","uid":1253384,"ip_address":"","ucode":"9B5DDF7720F307","user_header":"https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg","comment_is_top":false,"comment_ctime":1547006271,"is_pvip":false,"replies":[{"id":"20972","content":"ç›‘æ§å»¶è¿Ÿæœ‰å¾ˆå¤šç³»ç»ŸåŒ–çš„å·¥å…·å§ï¼Œ<br>æ¯”è¾ƒè€çš„zabbix éƒ½æœ‰äº†å“¦","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547016592,"ip_address":"","comment_id":58170,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5841973567","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘ä»¬æ˜¯ä¸»ä»æ¶æ„ï¼Œç”¨çš„pt-heartbeatç›‘æ§çš„ä¸»ä»å»¶è¿Ÿï¼Œå¶å°”ä¼šæœ‰1ç§’ï¼Œæå°‘æ•°ä¼šæœ‰10sçš„å»¶è¿Ÿï¼Œæƒ³é—®ä¸‹è¯¥æ€ä¹ˆæŸ¥æ‰¾åŸå› å‘¢ï¼Œå¦å¤–è¿™ä¸ªç›‘æ§ä¸èƒ½è¾“å‡ºç³»ç»Ÿæ—¶é—´ï¼Œå¾ˆéš¾çŸ¥é“å»¶è¿Ÿå‡ºç°çš„æ—¶é—´ç‚¹ï¼Œæƒ³çŸ¥é“mysqlç›‘æ§è¿™å—éƒ½ç”¨å“ªäº›å·¥å…·æ¥é…åˆçš„ã€‚","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435940,"discussion_content":"ç›‘æ§å»¶è¿Ÿæœ‰å¾ˆå¤šç³»ç»ŸåŒ–çš„å·¥å…·å§ï¼Œ\næ¯”è¾ƒè€çš„zabbix éƒ½æœ‰äº†å“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547016592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58132,"user_name":"WilliamX","can_delete":false,"product_type":"c1","uid":1295476,"ip_address":"","ucode":"E915091A891873","user_header":"https://static001.geekbang.org/account/avatar/00/13/c4/74/27cf551a.jpg","comment_is_top":false,"comment_ctime":1547001090,"is_pvip":false,"replies":[{"id":"20964","content":"ç¬¬ä¸€ç§ï¼Œ<br>ç¬¬äºŒç§çš„è¯ï¼Œä»åº“ä¸çŸ¥é“çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547009428,"ip_address":"","comment_id":58132,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5841968386","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå¯¹äºå¤§äº‹åŠ¡çš„ä¸»ä»å»¶æ—¶æœ‰ä¸ªé—®é¢˜ã€‚ä»åº“æ˜¯æ€ä¹ˆæ„ŸçŸ¥åˆ°æœ‰å»¶æ—¶çš„å‘¢ï¼Ÿæ˜¯åˆ é™¤è¡Œæ•°å¤ªå¤šï¼Œä»åº“éœ€è¦ä¸€è¡Œä¸€è¡Œæ‰§è¡Œï¼Œè¿˜æ˜¯è¯´ä¸»åº“ä¸€ç›´æ²¡æœ‰æŠŠbinlogä¼ è¿‡æ¥ï¼Œä»åº“è®¤ä¸ºå»¶æ—¶é«˜å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435922,"discussion_content":"ç¬¬ä¸€ç§ï¼Œ\nç¬¬äºŒç§çš„è¯ï¼Œä»åº“ä¸çŸ¥é“çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547009428,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58127,"user_name":"æ¸…é£æµŠé…’","can_delete":false,"product_type":"c1","uid":1302407,"ip_address":"","ucode":"4BB111C61A40C4","user_header":"https://static001.geekbang.org/account/avatar/00/13/df/87/0e05dadd.jpg","comment_is_top":false,"comment_ctime":1547000334,"is_pvip":false,"replies":[{"id":"21127","content":"æ˜¯çš„<br><br>ä¸è¿‡åé¢æ–‡ç« æ›´æ–°äº†ï¼Œæ¢äº†å¦å¤–ä¸€ä¸ªæ–¹æ³•ï¼Œä½ å†çœ‹ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547119289,"ip_address":"","comment_id":58127,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5841967630","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œå…³äºä¸ŠæœŸæ€è€ƒé¢˜ä¸­ä¸‰èŠ‚ç‚¹å¤åˆ¶çš„åœºæ™¯ã€‚å…¶ä¸­ç¬¬äºŒç§è§£å†³æ–¹æ³•ä¸­ï¼Œstop slave ä¸start slaveä¹‹å‰ï¼Œæˆ‘è§‰å¾—A&#39;çš„binlogä¼šåŒ…å«Aåº“ä¼ é€è¿‡æ¥çš„ä»¥åŠA&#39;åº“è‡ªå·±ç”Ÿäº§çš„ï¼Œæ˜¯ä¸æ˜¯åœ¨å¤åˆ¶è¿‡ç¨‹ä¸­ï¼Œå…ˆæŠŠA&#39;è®¾ç½®ä¸ºåªè¯»æ¨¡å¼ï¼Œå¾…æ•°æ®è¿ç§»ç»“æŸåï¼Œå–æ¶ˆA&#39;çš„åªè¯»æ¨¡å¼ï¼Œå†æŒ‡å‘ Aâ€™æœ€åä¸€ä¸ª binlog æ–‡ä»¶çš„æ–‡ä»¶æœ«å°¾ã€‚","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435919,"discussion_content":"æ˜¯çš„\n\nä¸è¿‡åé¢æ–‡ç« æ›´æ–°äº†ï¼Œæ¢äº†å¦å¤–ä¸€ä¸ªæ–¹æ³•ï¼Œä½ å†çœ‹ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547119289,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58103,"user_name":"å†¯ç¦","can_delete":false,"product_type":"c1","uid":1237163,"ip_address":"","ucode":"17AEE214897924","user_header":"https://static001.geekbang.org/account/avatar/00/12/e0/ab/fb5a0b66.jpg","comment_is_top":false,"comment_ctime":1546997919,"is_pvip":false,"replies":[{"id":"21124","content":"26ç¯‡ä¼šä¸“é—¨è¯´å¤‡åº“å¹¶è¡Œå¤åˆ¶çš„é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547119180,"ip_address":"","comment_id":58103,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5841965215","product_id":100020801,"comment_content":"å‰æ®µæ—¶é—´ï¼Œå…¬å¸ç‰ˆæœ¬æ˜¯5.5.18ï¼Œå®æ—¶è®¡ç®—å¹³å°å†™äº†ä¸€ä¸ªå¤§äº‹åŠ¡ï¼Œå¤§æ¦‚40Gå·¦å³ï¼Œå¯¼è‡´ä¸»å¤‡å»¶è¿Ÿ1ä¸ªå°æ—¶ä»¥ä¸Šï¼Œè¶…å°´å°¬ï¼Œæ‰‹åŠ¨åˆ‡æ¢ä¸»å¤‡read.åæ¥æ‰åªçŸ¥é“5.5ç‰ˆæœ¬ï¼Œå¤‡åº“è§£æbinlog,æ˜¯å•çº¿ç¨‹æ‰§è¡Œè¿™ä¸ªäº‹åŠ¡ã€‚","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435906,"discussion_content":"26ç¯‡ä¼šä¸“é—¨è¯´å¤‡åº“å¹¶è¡Œå¤åˆ¶çš„é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547119180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58079,"user_name":"Second Sight","can_delete":false,"product_type":"c1","uid":1309199,"ip_address":"","ucode":"E979B311AA3491","user_header":"https://static001.geekbang.org/account/avatar/00/13/fa/0f/14bdda08.jpg","comment_is_top":false,"comment_ctime":1546994389,"is_pvip":false,"replies":[{"id":"21122","content":"è¿™æ˜¯ä¸€ç§æƒ…å†µå“ˆ^_^","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547119092,"ip_address":"","comment_id":58079,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5841961685","product_id":100020801,"comment_content":"æˆ‘çŒœæ˜¯å¤§äº‹åŠ¡å§ï¼Œæ¯”å¦‚deleteåˆ å…¨è¡¨","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435896,"discussion_content":"è¿™æ˜¯ä¸€ç§æƒ…å†µå“ˆ^_^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547119092,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58073,"user_name":"æ¢¦åº·","can_delete":false,"product_type":"c1","uid":1069512,"ip_address":"","ucode":"8935F3C329C58E","user_header":"https://static001.geekbang.org/account/avatar/00/10/51/c8/83852d5a.jpg","comment_is_top":false,"comment_ctime":1546992767,"is_pvip":false,"replies":[{"id":"20933","content":"æ›´æ–°æ¯•ç«Ÿè¿˜æ˜¯æ¯”è¯»çš„æˆæœ¬é«˜çš„<br><br>ä¸è¿‡ä¸»é”®å•è¡Œæ›´æ–°10æ¯«ç§’è¿˜æ˜¯æœ‰ç‚¹å¤šï¼Œ<br>å¼€äº†semisyncäº†å—ï¼Ÿå¯ä»¥å…³æ‰çœ‹çœ‹ï¼Œ<br>æˆ–è€…åŒæ ·æ ‘æ‹“æ‰‘æ­ä¸ªä¸ªæµ‹è¯•ç”¨çš„ä¸»å¤‡ï¼Œæµ‹è¯•ä¸€ä¸‹å…³æ‰binlogæ˜¯ä»€ä¹ˆæ•ˆæœ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547000681,"ip_address":"","comment_id":58073,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5841960063","product_id":100020801,"comment_content":"ä¸»åº“ä»åº“åŒæ ·çš„é…ç½®ï¼Œä¸€ä¸ªæ–‡ç« è¡¨æŒ‰ä¸»é”®æ›´æ–°é˜…è¯»æ•°ï¼Œå¤§å¤šæ•°æ—¶å€™10msï¼‹ï¼Œå¶å°”2msä»¥å†…ã€‚ä»åº“æŒ‰ä¸»é”®è¯»ä¸€ç›´1msã€‚ä¸¤ä¸ªæ“ä½œéƒ½æ²¡æœ‰åœ¨ä»£ç é‡Œæ˜¾æ€§å¼€å§‹äº‹åŠ¡æ“ä½œã€‚æ˜¯å› ä¸ºä¸»åº“æ›´æ–°æ“ä½œæ˜¯äº‹åŠ¡ï¼Œä¸”binlogè¦åŒæ­¥åˆ°å¤‡åº“æ‰ç®—å†™å…¥å®Œæˆï¼Œæ‰€ä»¥æ—¶é—´ç‰¹åˆ«é•¿å—ï¼Ÿä½†æ˜¯è§‰å¾—è¿™ä¸ªå·®è·ä¹Ÿå¥½å¤§ã€‚æ±‚åˆ†æã€‚","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435892,"discussion_content":"æ›´æ–°æ¯•ç«Ÿè¿˜æ˜¯æ¯”è¯»çš„æˆæœ¬é«˜çš„\n\nä¸è¿‡ä¸»é”®å•è¡Œæ›´æ–°10æ¯«ç§’è¿˜æ˜¯æœ‰ç‚¹å¤šï¼Œ\nå¼€äº†semisyncäº†å—ï¼Ÿå¯ä»¥å…³æ‰çœ‹çœ‹ï¼Œ\næˆ–è€…åŒæ ·æ ‘æ‹“æ‰‘æ­ä¸ªä¸ªæµ‹è¯•ç”¨çš„ä¸»å¤‡ï¼Œæµ‹è¯•ä¸€ä¸‹å…³æ‰binlogæ˜¯ä»€ä¹ˆæ•ˆæœ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547000681,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":347407,"user_name":"powerful","can_delete":false,"product_type":"c1","uid":3003648,"ip_address":"","ucode":"621D21D2FC5D21","user_header":"https://static001.geekbang.org/account/avatar/00/2d/d5/00/5f328909.jpg","comment_is_top":false,"comment_ctime":1653995293,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1653995293","product_id":100020801,"comment_content":"è€å¸ˆæ²¡å¤ªç†è§£è¿™ä¸ªå‚æ•°â€œIGNORE_SERVER_IDSâ€è®¾ç½®çš„å«ä¹‰ï¼Œè®¾ç½®å‰å’Œè®¾ç½®åçš„æ‰§è¡Œæµç¨‹æ˜¯æ€ä¹ˆæ ·çš„ï¼Œéº»çƒ¦æ‚¨æŠ½æ—¶é—´ç»™ç§‘æ™®ä¸€ä¸‹","like_count":0},{"had_liked":false,"id":345049,"user_name":"shuaiqikk","can_delete":false,"product_type":"c1","uid":2073675,"ip_address":"","ucode":"10C574C5C51FBE","user_header":"https://static001.geekbang.org/account/avatar/00/1f/a4/4b/d26f5e5d.jpg","comment_is_top":false,"comment_ctime":1651982945,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651982945","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸ªé—®é¢˜å’¨è¯¢ä¸€ä¸‹ï¼š<br>ä»åº“æ¥æ”¶ä¸»åº“binlogçš„io_thread ä¸  æ‰§è¡Œ relay logçš„ sql_threadæ˜¯å¸¸é©»å†…å­˜çš„å—ï¼Ÿæ¯ä¸€æ¬¡ä¸»ä»åŒæ­¥éƒ½æ˜¯å¤ç”¨çš„è¿™ä¸¤ä¸ªç›¸åŒçš„çº¿ç¨‹å—","like_count":0},{"had_liked":false,"id":323374,"user_name":"bigdudo","can_delete":false,"product_type":"c1","uid":1371360,"ip_address":"","ucode":"5938710D7C1149","user_header":"https://static001.geekbang.org/account/avatar/00/14/ec/e0/d072d6f0.jpg","comment_is_top":false,"comment_ctime":1637863642,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637863642","product_id":100020801,"comment_content":"æˆ‘çš„ç†è§£è¿™ä¸€ç« åœ¨è®²é«˜å¯ç”¨æ›´å¤šçš„ä¾§é‡ç‚¹åœ¨ä¿è¯é«˜å¯ç”¨ï¼Œä¸»ä»åˆ‡æ¢æ˜¯å®ç°é«˜å¯ç”¨çš„ä¸€ç¯ï¼Œä¿è¯ä¸»ä»åˆ‡æ¢åœ¨ä¸»ä»æœ‰å»¶æ—¶çš„æƒ…å†µä¸‹èƒ½æœ‰æ•ˆåœ°è¿›è¡Œåˆ™æ˜¯binlogå’Œsbmæ¥ä¿è¯çš„ï¼Œå…¶ä¸­æ¶‰åŠåˆ°å¯é æ€§ä¼˜å…ˆè¿˜æ˜¯å¯ç”¨æ€§ä¼˜å…ˆåˆ™æ˜¯åœ¨ä¸»ä»åˆ‡æ¢çš„æ—¶å€™ä¿è¯é«˜å¯ç”¨çš„æ—¶å€™éœ€è¦æƒè¡¡çš„","like_count":0},{"had_liked":false,"id":320859,"user_name":"Tim","can_delete":false,"product_type":"c1","uid":1480717,"ip_address":"","ucode":"3AAA9FD3D8DDDB","user_header":"https://static001.geekbang.org/account/avatar/00/16/98/0d/fb77a32c.jpg","comment_is_top":false,"comment_ctime":1636533344,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636533344","product_id":100020801,"comment_content":"å¦‚æœåœ¨Aâ€˜æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œé‚£ä¹ˆAå¯ä»¥binlogåŒæ­¥serverBçš„å†…å®¹ï¼ŒåŒæ­¥åå‘å‡ºæ¥çš„binlogä¸Šæ ‡è¯†çš„è¿˜æ˜¯serverBï¼Œé‚£å¦‚æœA&#39;ä¸€ç›´ä¸æ‰§è¡Œæ¥è‡ªServerBçš„binlogï¼Œè¿™ä¸æ˜¯æ•°æ®ä¸ä¸€è‡´äº†ä¹ˆï¼Œè¿™ä¸æ¯”å¾ªç¯å¤åˆ¶ä¸¥é‡ä¹ˆã€‚","like_count":0},{"had_liked":false,"id":319948,"user_name":"æ°´æœˆ","can_delete":false,"product_type":"c1","uid":2344034,"ip_address":"","ucode":"78FC68615016DB","user_header":"https://static001.geekbang.org/account/avatar/00/23/c4/62/269aae3f.jpg","comment_is_top":false,"comment_ctime":1636015379,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636015379","product_id":100020801,"comment_content":"æ˜¯ä¸æ˜¯delete rowçš„å¤§äº‹åŠ¡å¦‚æœbinlogæ ¼å¼æ˜¯statementçš„è¯å¯èƒ½å°±ä¸ä¼šæ˜¯ä¸ªå¤§å»¶è¿Ÿäº†","like_count":0},{"had_liked":false,"id":319794,"user_name":"æ‡’èµ«èµ«","can_delete":false,"product_type":"c1","uid":2303492,"ip_address":"","ucode":"EDFB9B69ABB705","user_header":"https://static001.geekbang.org/account/avatar/00/23/26/04/844be9df.jpg","comment_is_top":false,"comment_ctime":1635943572,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635943572","product_id":100020801,"comment_content":"å¯ç”¨æ€§ä¼˜å…ˆç­–ç•¥ï¼Œä¸” binlog_format=rowæ—¶ï¼Œä¸ºä»€ä¹ˆæœ€å¤šåªæœ‰ä¸€è¡Œæ•°æ®ä¸ä¸€è‡´ï¼Ÿåœ¨æ’å…¥4,4åŠ4,5çš„æ—¶å€™ä¸ºä»€ä¹ˆä¸ä¼šæŠ¥é”™duplicate key errorå‘¢ï¼Ÿè€Œæ˜¯åœ¨Aæ’å…¥(5,5)å’ŒBæ’å…¥ï¼ˆ5,4ï¼‰æ—¶æ‰æŠ¥é”™ï¼Ÿ","like_count":0},{"had_liked":false,"id":312001,"user_name":"å®™æ–¯","can_delete":false,"product_type":"c1","uid":2041396,"ip_address":"","ucode":"80DF36BAD298AD","user_header":"https://static001.geekbang.org/account/avatar/00/1f/26/34/891dd45b.jpg","comment_is_top":false,"comment_ctime":1631588276,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1631588276","product_id":100020801,"comment_content":"é—®é¢˜ï¼šæŸæ®µæ—¶é—´ç›‘æ§é‡‡é›†åˆ°seconds_behind_masteræ•°å€¼å‘ä¸Šå˜é™¡äº†ï¼Œä½ è§‰å¾—å¯èƒ½æ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´å‘¢ï¼Ÿä½ åˆä¼šæ€ä¹ˆå»ç¡®è®¤è¿™ä¸ªåŸå› å‘¢ï¼Ÿ<br>å›ç­”ï¼šæ›²çº¿å€¾æ–œè¯´æ˜ä¸»å¤‡å»¶æ—¶å˜å¾—ä¸¥é‡ï¼ŒæŒ‰ç…§ä»Šå¤©è®²è§£å¯¼è‡´è¿™æƒ…å†µå¦‚ä¸‹ã€‚<br>1 å‘é€binlogæ—¶é—´è€—æ—¶ï¼Œå¯¼è‡´ä»åº“æ‰§è¡Œå»¶æ—¶ï¼ˆç½‘ç»œå¼‚å¸¸å˜æ…¢ï¼Œä¼ è¾“ä¸¢åŒ…ç­‰ï¼‰ã€‚<br>2 å¤§äº‹åŠ¡å¤„ç†å¯¼è‡´å»¶æ—¶ã€‚<br>3 ä»åº“qpså‹åŠ›é£™å‡ï¼Œæ¥ä¸åŠå¤„ç†ä¸»ä»åŒæ­¥æ•°æ®ã€‚<br>4 å¤§è¡¨DDLå¤„ç†ã€‚<br>ç¡®è®¤ï¼šå¯ä»¥ä»ä¸šåŠ¡ä¸ŠæŸ¥çœ‹æ˜¯å¦æœ‰å¤§äº‹åŠ¡ï¼ŒDDLå¤„ç†ï¼Œæ£€æŸ¥ç½‘ç»œæƒ…å†µã€‚<br>","like_count":0},{"had_liked":false,"id":308659,"user_name":"å·´æ—ç‰¹","can_delete":false,"product_type":"c1","uid":1330521,"ip_address":"","ucode":"85109C43C4FEB6","user_header":"https://static001.geekbang.org/account/avatar/00/14/4d/59/dfd0bfd9.jpg","comment_is_top":false,"comment_ctime":1629723478,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629723478","product_id":100020801,"comment_content":"æ—è€å¸ˆå¥½ï¼Œè¯·æ•™ä¸ªé—®é¢˜ï¼Œå¦‚æœä¸»åº“æ‰§è¡Œäº†deleteæŸä¸€è¡Œè®°å½•ï¼Œä¸”ä¸»åº“æ²¡æœ‰ä¸»é”®ç´¢å¼•ï¼Œé‚£ä¹ˆä»åº“ä¸Šä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿæ•°æ®é‡å¾ˆå¤§æ—¶ï¼Œä¼šå¯¼è‡´æµæ°´å»¶è¿Ÿä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":303531,"user_name":"å¼ è¯š","can_delete":false,"product_type":"c1","uid":1115702,"ip_address":"","ucode":"F623703194769B","user_header":"https://static001.geekbang.org/account/avatar/00/11/06/36/d288bcc7.jpg","comment_is_top":false,"comment_ctime":1626847292,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1626847292","product_id":100020801,"comment_content":"çªç„¶æƒ³åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå…¬å¸ç°åœ¨é‡‡ç”¨çš„æ˜¯è¯»å†™åˆ†ç¦»æ¶æ„ï¼Œæˆ‘å¯ä»¥çœ‹åˆ°ä»åº“çš„é…ç½®ï¼Œå…¶ä¸­buffer_pool_sizeè®¾ç½®çš„æ˜¯24Gï¼Œä½†æ˜¯innodb_log_file_sizeæ˜¯48M.å› ä¸ºçœ‹ä¸åˆ°å†™åº“çš„é…ç½®ä¿¡æ¯ï¼Œä½†æ˜¯ä¼šæœ‰ä¸€ä¸ªç–‘é—®ï¼Œå› ä¸ºè¯»åº“è´Ÿè´£è¯»å–æ•°æ®ï¼Œæ‰€ä»¥ä¸redo_logåœ¨è¯»åº“ä¸Šæ˜¯æ²¡ç”¨çš„å—ï¼Ÿè¯»åº“åªæ˜¯æ‰§è¡Œå†™åº“åŒæ­¥è¿‡æ¥çš„binlogå°±è¡Œäº†ï¼Ÿ<br>é‚£ä¹ˆæˆ‘èƒ½ä¸èƒ½åœ¨å†™åº“ä¸Šè¿™ä¹ˆé…ï¼Œå°†innodb_log_file_sizeé…ç½®çš„å¤§ä¸€ç‚¹ï¼Œå°†buffer_pool_sizeé…ç½®é€‚ä¸­ï¼Œç„¶åå°†change_buffer_sizeçš„æ¯”ä¾‹è°ƒå¢åˆ°æœ€å¤§ï¼Ÿè¿™ä¸ªé—®é¢˜ä¸Šæœ‰ç‚¹ç–‘æƒ‘ï¼Œæƒ³é—®é—®è€å¸ˆã€‚","like_count":0},{"had_liked":false,"id":276933,"user_name":"åŠ±ç ”å†°","can_delete":false,"product_type":"c1","uid":1106394,"ip_address":"","ucode":"FCBC8266018FA0","user_header":"https://static001.geekbang.org/account/avatar/00/10/e1/da/d7f591a7.jpg","comment_is_top":false,"comment_ctime":1612183141,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1612183141","product_id":100020801,"comment_content":"åˆ¤æ–­å¤‡åº“ B çš„ seconds_behind_master çš„å€¼ï¼Œç›´åˆ°è¿™ä¸ªå€¼å˜æˆ 0 ä¸ºæ­¢ï¼›<br><br>è€å¸ˆæŒ‰ç…§å‰æ–‡çš„è®²è§£ï¼ŒSBMæ˜¯å¤‡åº“æ‰§è¡Œä¸»åº“çš„binlogå–å‡ºäº‹åŠ¡åœ¨ä¸»åº“æ‰§è¡Œæ—¶é—´ç„¶åè®¡ç®—å‡ºæ¥çš„ï¼Œå¦‚æœå°†ä¸»åº“è®¾ç½®æˆreadonlyï¼Œè¿™æ—¶å€™ä¸»åº“æ²¡æœ‰binlog ï¼Œå¤‡åº“æ˜¯å¦‚ä½•è®©SBMå˜æˆ0çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2336545,"avatar":"https://static001.geekbang.org/account/avatar/00/23/a7/21/9366cdd8.jpg","nickname":"ä¸‰äº•å¯¿","note":"","ucode":"325E9D64C22C0D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373325,"discussion_content":"éå¹¶è¡Œå¤åˆ¶ä¸‹:last_master_timestamp æœ‰binlogä¼šæ›´æ–°ä¸ºä¸€ä¸ªäº‹åŠ¡åœ¨ä¸»åº“çš„æ‰§è¡Œæ—¶é—´ï¼Œæ²¡æœ‰binlogçš„è¯åœ¨ç­‰å¾…çš„æ—¶å€™å°±ä¼šæ›´æ–°æˆ0ï¼Œæ ¹æ®æºç é‚£ä¸ªç®—æ³•å½“è¿™ä¸ªå€¼ä¸º0æ—¶ï¼ŒSBMä¸º0ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620698727,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1106394,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e1/da/d7f591a7.jpg","nickname":"åŠ±ç ”å†°","note":"","ucode":"FCBC8266018FA0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2336545,"avatar":"https://static001.geekbang.org/account/avatar/00/23/a7/21/9366cdd8.jpg","nickname":"ä¸‰äº•å¯¿","note":"","ucode":"325E9D64C22C0D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373818,"discussion_content":"æ„Ÿè°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620886328,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":373325,"ip_address":""},"score":373818,"extra":""}]}]},{"had_liked":false,"id":267127,"user_name":"æµ©å…‹","can_delete":false,"product_type":"c1","uid":1333389,"ip_address":"","ucode":"99F5D4F24AF574","user_header":"https://static001.geekbang.org/account/avatar/00/14/58/8d/bc69cde1.jpg","comment_is_top":false,"comment_ctime":1607603905,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607603905","product_id":100020801,"comment_content":"è¡¨ä¸Šæ— ä¸»é”®çš„æƒ…å†µ(ä¸»åº“åˆ©ç”¨ç´¢å¼•æ›´æ”¹æ•°æ®,å¤‡åº“å›æ”¾åªèƒ½ç”¨å…¨è¡¨æ‰«æ,è¿™ç§æƒ…å†µå¯ä»¥è°ƒæ•´slave_rows_search_algorithmså‚æ•°é€‚å½“ä¼˜åŒ–ä¸‹)ï¼Œè¿™ç§æƒ…å†µä¸»åº“æ›´æ–°ä¸ä¹Ÿæ˜¯å…¨è¡¨æ‰«æå—ï¼Ÿè¿˜æ˜¯è¯´ä¸»åº“åˆ©ç”¨ç´¢å¼•æ›´æ–°æ˜¯æ›´æ–°åˆ°change bufferé‡Œäº†ï¼Œç„¶åå†™redo logï¼Œbinlogï¼Œå‘ç»™ä»åº“ï¼Œä»åº“å…¨è¡¨æ‰«æå®šä½éœ€è¦æ›´æ–°çš„è¡Œï¼Œä½†æ˜¯ä¸»åº“æ›´æ–°å…·ä½“è¡Œçš„æ—¶å€™è¿˜æ˜¯éœ€è¦å…¨è¡¨æ‰«æé€šè¿‡rowidæ¥å®šä½åˆ°è¦æ›´æ–°çš„è¡Œï¼Ÿæ²¡æœ‰ä¸»é”®çš„è¡¨ï¼Œæ— è®ºæŸ¥è¯¢è¿˜æ˜¯æ›´æ–°ï¼Œå›è¡¨çš„è¯éƒ½æ˜¯èµ°å…¨è¡¨æ‰«æç”¨rowidåŒ¹é…åˆ°å¯¹åº”çš„è¡Œï¼Ÿçƒ¦è¯·è€å¸ˆç™¾å¿™ä¹‹ä¸­ç»™ç­”ç–‘è§£æƒ‘ä¸‹ï¼Œå¤šè°¢ã€‚","like_count":0},{"had_liked":false,"id":263473,"user_name":"å°å¸…","can_delete":false,"product_type":"c1","uid":1008570,"ip_address":"","ucode":"6044840DDFC335","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/ba/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1606140620,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606140620","product_id":100020801,"comment_content":"è€å¸ˆä¸æ¨èä½¿ç”¨PXCå—","like_count":0},{"had_liked":false,"id":254281,"user_name":"ç´«æ—¥","can_delete":false,"product_type":"c1","uid":1207410,"ip_address":"","ucode":"73A8DEE323AC19","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqXSb2jAzlMM0JdTjWrNiaq2uR9eeloBYp906POddb9evmuj5f4CUoO6ge8TibibwtZicnl1sRHic9rW7g/132","comment_is_top":false,"comment_ctime":1603095319,"is_pvip":true,"discussion_count":0,"race_medal":4,"score":"1603095319","product_id":100020801,"comment_content":"æ„Ÿè§‰è‡ªå·±åŸºç¡€å¥½å·®ï¼Œå°±èƒ½ç†è§£ä¸€éƒ¨åˆ†ï¼Œè¿™ä¸ªæ€ä¹ˆè§£å†³å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":253348,"user_name":"java_lunsong","can_delete":false,"product_type":"c1","uid":1502074,"ip_address":"","ucode":"180EEE6C8BCAA8","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKb5BzdGZbSYHxq88kicdDtBh0yBtJpDAD81wruIsTsLdBysDZztrm8tYb4mBYvAI1ZE4lorKuvmgw/132","comment_is_top":false,"comment_ctime":1602692791,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602692791","product_id":100020801,"comment_content":"æ€ä¹ˆä¿è¯mysql çš„é«˜å¯ç”¨æ€§ï¼Ÿ<br>å‰æè¦çŸ¥é“<br>1. é¦–å…ˆè¦çŸ¥é“ä¸€ä¸ªæ¦‚å¿µå°±æ˜¯åŒæ­¥å»¶æ—¶ã€‚<br>2. ä½œä¸ºä¸€ä¸ªæ•°æ®æœåŠ¡ï¼Œå»ºè®®æ˜¯è¦å…ˆä¿è¯æ•°æ®çš„å¯é æ€§ï¼Œæˆ‘ä»¬ä¸èƒ½ä¸ºäº†å¯ç”¨æ€§æ¥ç‰ºç‰²å¯é æ€§ï¼Œæ•°æ®å‡†ç¡®ï¼Œåº”è¯¥æ˜¯æ•°æ®åº“æœåŠ¡çš„åº•çº¿ã€‚è€Œä¸”è¿™åœ¨æŸäº›ä¸šåŠ¡åœºæ™¯ä¸‹å¯èƒ½ä¼šå¾—ä¸å¿å¤±ã€‚<br>æ‰€ä»¥ï¼Œ ä¿è¯é«˜å¯ç”¨æ€§ï¼Œæˆ‘ä»¬å°±åªèƒ½å°½é‡å¯èƒ½çš„å‡å°‘è¿™ä¸ªåŒæ­¥å»¶æ—¶ï¼ŒåŒæ­¥å»¶æ—¶çš„åŸå› å¯èƒ½æœ‰å¾ˆå¤šï¼š<br>1. å¤‡åº“çš„æœºå™¨ä¸è¡Œï¼ŒIOPSå‹åŠ›å¾ˆå¤§ï¼Œä¼šæœ‰å»¶æ—¶æ¯”è¾ƒé«˜çš„é—®é¢˜<br>2.ç¬¬äºŒç§ï¼Œå¤‡åº“çš„å‹åŠ›ä¼šæ¯”è¾ƒå¤§ï¼Œå¯èƒ½ä¼šæœ‰å¾ˆå¤šå¤æ‚æŸ¥è¯¢<br>3. å¤§äº‹åŠ¡ï¼ˆå¤§è¡¨çš„ddlä¹Ÿç®—æ˜¯ï¼‰<br>æ‰€ä»¥ï¼Œæˆ‘ä»¬è§£å†³äº†å¯¼è‡´åŒæ­¥å»¶æ—¶é«˜çš„åŸå› ï¼ŒæŠŠåŒæ­¥å»¶æ—¶çš„æ—¶é—´é™ä½ä¸‹æ¥ï¼Œæˆ‘ä»¬çš„æ•°æ®åº“æœåŠ¡å°±å¯ä»¥åœ¨ä¸»åº“å¤±è´¥æ—¶ä»å®¹çš„è¿›è¡Œä¸»å¤‡çš„åˆ‡æ¢ï¼Œè¿™æ ·ä¹Ÿå°±ä¿è¯äº†é«˜å¯ç”¨æ€§ã€‚","like_count":0},{"had_liked":false,"id":251865,"user_name":"moonfox","can_delete":false,"product_type":"c1","uid":1526355,"ip_address":"","ucode":"902BFF40EFA9FA","user_header":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","comment_is_top":false,"comment_ctime":1601918137,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1601918137","product_id":100020801,"comment_content":"è¯·é—®ä¸€ä¸‹ï¼ŒT1è¿™ä¸ªæ—¶åˆ»æ˜¯æŒ‡å†™å®Œè¿™ä¸ªäº‹åŠ¡çš„binlog çš„æ—¶é—´ç‚¹ï¼Œè¿˜æ˜¯æŒ‡åˆšå¼€å§‹å†™çš„æ—¶é—´ç‚¹ï¼ŸåŒæ ·T3æ—¶åˆ»æ˜¯æŒ‡å†™å®Œbinlog çš„æ—¶é—´ç‚¹ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1010344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/6a/a8/ee414a25.jpg","nickname":"å…¬å‘Š-SREè¿ç»´å®è·µ","note":"","ucode":"86F4E48AE1D9D8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547510,"discussion_content":"å†™å®Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642730483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":249340,"user_name":"ç¥æ¯“é€é¥","can_delete":false,"product_type":"c1","uid":2147220,"ip_address":"","ucode":"83351CB18B190E","user_header":"https://static001.geekbang.org/account/avatar/00/20/c3/94/e89ebc50.jpg","comment_is_top":false,"comment_ctime":1600600634,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1600600634","product_id":100020801,"comment_content":"å¦‚æœæ˜¯ä¸»åº“å‘ä»åº“ä¸»åŠ¨å‘ï¼Œå½“ä»å¾ˆå¤šæ—¶ï¼Œä¼šä¸ä¼šé‡åˆ°æ€§èƒ½é—®é¢˜ï¼Œä¸ºä»€ä¹ˆä¸æ¶‰åŠä¸ºä»ä¸»åŠ¨ä»ä¸»è·å–æ•°æ®å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1303322,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e3/1a/061e77b6.jpg","nickname":"äº¢æ˜Ÿä¸œ","note":"","ucode":"5E4063E83B2BB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328962,"discussion_content":"ä¼šæœ‰åŒæ­¥æ•°æ®å»¶è¿Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606287730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":247254,"user_name":"Magic","can_delete":false,"product_type":"c1","uid":1272047,"ip_address":"","ucode":"FD9CEDAA419EB0","user_header":"https://static001.geekbang.org/account/avatar/00/13/68/ef/6264ca3d.jpg","comment_is_top":false,"comment_ctime":1599641527,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599641527","product_id":100020801,"comment_content":"å¤§äº‹åŠ¡æˆ–å¤§è¡¨ddlï¼Œå¯ä»¥åˆ°information_schema.innodb_trxæŸ¥è¯¢æ˜¯å¦æœ‰é•¿äº‹åŠ¡ã€‚","like_count":0},{"had_liked":false,"id":240987,"user_name":"èŒƒå¹¿å®‡","can_delete":false,"product_type":"c1","uid":1248960,"ip_address":"","ucode":"FC4F73F683937E","user_header":"https://static001.geekbang.org/account/avatar/00/13/0e/c0/ec9dcece.jpg","comment_is_top":false,"comment_ctime":1597142608,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597142608","product_id":100020801,"comment_content":"è€å¸ˆï¼Œä¸çŸ¥é“ä½ ç°åœ¨è¿˜ä¼šå›å¤å—ï¼Ÿæˆ‘æƒ³é—®é—®ä½ è¿™ä¸ªè¯¾ç¨‹æ˜¯ä¸æ˜¯éœ€è¦æœ‰ä¸€å®šçš„å·¥ä½œç»éªŒå•Šï¼Œæ„Ÿè§‰è¶Šæ¥è¶Šçœ‹ä¸æ‡‚äº†ğŸ˜‚","like_count":0},{"had_liked":false,"id":235803,"user_name":"Adong0678","can_delete":false,"product_type":"c1","uid":1985184,"ip_address":"","ucode":"845EECDFDE6233","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/GjFJHox9V8qh53zIrExw4NK0KG9WBvRH8RJVjm9jp78RSpWfa2xzyq11dTNItpK2icQniaK4bibTv6ksRGiasjTvMg/132","comment_is_top":false,"comment_ctime":1595207298,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1595207298","product_id":100020801,"comment_content":"â€œå¤‡åº“ B çš„ (5,4) å’Œä¸»åº“ A çš„ (5,5) è¿™ä¸¤è¡Œæ•°æ®ï¼Œéƒ½ä¸ä¼šè¢«å¯¹æ–¹æ‰§è¡Œã€‚â€ row æ¨¡å¼ ï¼Œæ˜¯å¤‡åº“ B çš„ ï¼ˆ4ã€5ï¼‰å’Œä¸»åº“ A çš„ (4ã€4ï¼‰è¿™ä¸¤è¡Œæ•°æ®ï¼Œéƒ½ä¸ä¼šè¢«å¯¹æ–¹æ‰§è¡Œã€‚ï¼Ÿ","like_count":0},{"had_liked":false,"id":234068,"user_name":"é™é™è†å¬","can_delete":false,"product_type":"c1","uid":1263932,"ip_address":"","ucode":"0A8600CB928EFE","user_header":"https://static001.geekbang.org/account/avatar/00/13/49/3c/5d54c510.jpg","comment_is_top":false,"comment_ctime":1594569922,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594569922","product_id":100020801,"comment_content":"è€å¸ˆï¼Œç”¨ä»åº“åšå…¨é‡å¤‡ä»½çš„è¯ï¼Œè¯¯åˆ æ•°æ®ä¹Ÿä¼šåŒæ­¥çš„å§ï¼Œæ‰€ä»¥è¿˜æ˜¯è¦æœ‰å…¨é‡å¤‡ä»½çš„æ–‡ä»¶å§","like_count":0},{"had_liked":false,"id":214877,"user_name":"Geek_mango","can_delete":false,"product_type":"c1","uid":1526460,"ip_address":"","ucode":"C9B4FD825065B5","user_header":"https://static001.geekbang.org/account/avatar/00/17/4a/bc/21b36468.jpg","comment_is_top":false,"comment_ctime":1588840792,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588840792","product_id":100020801,"comment_content":"1.è€å¸ˆï¼ŒåŸæ–‡ä¸­çš„è¿™å¥è¯â€œè¯•æƒ³å¦‚æœä¸€å¼€å§‹ä¸»å¤‡å»¶è¿Ÿå°±é•¿è¾¾ 30 åˆ†é’Ÿï¼Œè€Œä¸å…ˆåšåˆ¤æ–­ç›´æ¥åˆ‡æ¢çš„è¯ï¼Œç³»ç»Ÿçš„ä¸å¯ç”¨æ—¶é—´å°±ä¼šé•¿è¾¾ 30 åˆ†é’Ÿï¼Œè¿™ç§æƒ…å†µä¸€èˆ¬ä¸šåŠ¡éƒ½æ˜¯ä¸å¯æ¥å—çš„ã€‚â€ï¼Œå’Œæˆ‘çš„ç†è§£æœ‰äº›ä¸ä¸€æ ·<br>2.æŒ‰ç…§æ–‡ç« çš„æ„æ€â€œå¤‡åº“å–å‡ºå½“å‰æ­£åœ¨æ‰§è¡Œçš„äº‹åŠ¡çš„æ—¶é—´å­—æ®µçš„å€¼ï¼Œè®¡ç®—å®ƒä¸å½“å‰ç³»ç»Ÿæ—¶é—´çš„å·®å€¼ï¼Œå¾—åˆ° seconds_behind_masterã€‚â€<br>3.ä¸»å¤‡å»¶è¿Ÿ30åˆ†é’Ÿæ„æ€å°±æ˜¯å¤‡åº“æ­£åœ¨æ‰§è¡Œçš„äº‹åŠ¡ä¸å½“å‰ç³»ç»Ÿæ—¶é—´å·®30åˆ†é’Ÿå¯¹å§ï¼Ÿ<br>4.æ­¤æ—¶å‘ç”Ÿåˆ‡æ¢ï¼Œä¸»å¤‡éƒ½ä¸ºread-onlyï¼Œé‚£ä¹ˆä¸å¯ç”¨æ—¶é—´å°±æ˜¯ä»åº“è¿½ä¸Šä¸»åº“çš„æ—¶é—´ï¼ˆè¿½ä¸Šç«‹é©¬åˆ‡æ¢ï¼‰ï¼Œè¿™ä¸ªæ—¶é—´ä¸å¾ˆå¤šå› ç´ æœ‰å…³ï¼ˆè€å¸ˆå¯ä»¥å¸®å¿™åˆ†æä¸‹ä¸»è¦å› ç´ ï¼‰ä½†æ˜¯ä¸æ˜¯ç¡®åˆ‡çš„30åˆ†é’Ÿå§ï¼Ÿ<br>5.ä»¥å‰æœ‰æµ‹è¯•è¿‡æ‰‹åŠ¨ä¸»å¤‡å»¶è¿Ÿï¼Œåœ¨å»¶è¿Ÿ1000ç§’å·¦å³æ—¶ï¼ˆæ‰‹åŠ¨å…³é—­ä»åº“åŒæ­¥çº¿ç¨‹é€ æˆï¼‰ä»åº“æ¢å¤åªéœ€è¦åç§’ä»¥å†…ï¼Œå½“ç„¶ä»åº“å…³é—­æœŸé—´æ²¡æœ‰è¿›è¡Œå¤§é‡è¯»å†™æƒ…å†µä¸‹ã€‚<br>6.æ‰€ä»¥è¯´ä¸»å¤‡å»¶è¿Ÿæ—¶é—´å’Œåˆ‡æ¢æ—¶ç³»ç»Ÿä¸å¯ç”¨æ—¶é—´ä¸æ˜¯å®Œå…¨ä¸€è‡´çš„ï¼Œæˆ–è€…è¯´ä¸»å¤‡å»¶è¿Ÿæ—¶é—´ä¸èƒ½ç›´æ¥å†³å®šåˆ‡æ¢æ—¶ç³»ç»Ÿä¸å¯åŒæ—¶é—´ã€‚<br>è€å¸ˆçœ‹çœ‹æˆ‘è¯´çš„æœ‰æ²¡æœ‰å•¥é—®é¢˜ã€‚","like_count":0},{"had_liked":false,"id":213664,"user_name":"dawn","can_delete":false,"product_type":"c1","uid":1296063,"ip_address":"","ucode":"1757B28F1EF5C4","user_header":"https://static001.geekbang.org/account/avatar/00/13/c6/bf/52b3f71d.jpg","comment_is_top":false,"comment_ctime":1588504443,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1588504443","product_id":100020801,"comment_content":"ä¸»å¤‡åˆ‡æ¢çš„æ—¶å€™ä¸ºä»€ä¹ˆä¸ç­‰åˆ°å¤‡åº“çš„seconds_behind_masterä¸º0çš„æ—¶å€™å†åˆ‡æ¢ï¼Œè¿™æ ·æ—¢ä¿è¯äº†å¯é æ€§ï¼Œä¸å¯ç”¨æ—¶é—´ä¹Ÿä¼šéå¸¸çŸ­ã€‚","like_count":0,"discussions":[{"author":{"id":1303322,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e3/1a/061e77b6.jpg","nickname":"äº¢æ˜Ÿä¸œ","note":"","ucode":"5E4063E83B2BB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328963,"discussion_content":"å…ˆä¿è¯æ•°æ®å¯é æ€§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606287843,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":203225,"user_name":"Ryan","can_delete":false,"product_type":"c1","uid":1667987,"ip_address":"","ucode":"95BBBEE5B23878","user_header":"https://static001.geekbang.org/account/avatar/00/19/73/93/0a3a1e5b.jpg","comment_is_top":false,"comment_ctime":1586158324,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586158324","product_id":100020801,"comment_content":"æŒç»­æœ‰å¤§äº‹ç‰©åœ¨æ‰§è¡Œä¼šé€ æˆå›¾6çš„ç°è±¡å§","like_count":0},{"had_liked":false,"id":200674,"user_name":"éš","can_delete":false,"product_type":"c1","uid":1083651,"ip_address":"","ucode":"528AF8BA6278D6","user_header":"https://static001.geekbang.org/account/avatar/00/10/89/03/30f878ca.jpg","comment_is_top":false,"comment_ctime":1585635219,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585635219","product_id":100020801,"comment_content":"è¯·é—®è€å¸ˆçš„å›¾æ˜¯ç”¨ä»€ä¹ˆè½¯ä»¶ç”»çš„ï¼Œè‡ªå·±æƒ³è¦åœ¨å·¥ä½œä¸­ç”»ç±»ä¼¼äºæ•°æ®åº“çš„è¿™ç§å›¾å¥½è´¹æ—¶é—´åˆä¸ç¾è§‚ã€‚","like_count":0},{"had_liked":false,"id":170659,"user_name":"æå®¢-ç»å½±","can_delete":false,"product_type":"c1","uid":1243369,"ip_address":"","ucode":"D302CE68123E74","user_header":"https://static001.geekbang.org/account/avatar/00/12/f8/e9/f16a536b.jpg","comment_is_top":false,"comment_ctime":1578654804,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578654804","product_id":100020801,"comment_content":"è€å¸ˆè®²çš„ä¸»ä»å»¶è¿Ÿåˆ†æçš„æ˜¯ä»ä¸»åº“å’Œä»åº“ï¼Œå…³äºç½‘ç»œå¼•èµ·çš„å»¶è¿Ÿï¼Œå¯ä»¥è°ƒæ•´äºŒä¸ªå‚æ•°<br> master_connect_retry   ä¸»ä»è¿æ¥å¤±è´¥é—´éš”å¤šä¹…é‡è¯•çš„æ—¶é—´  é»˜è®¤æ˜¯60ç§’<br> slave_net_timeout   å½“slaveä»ä¸»æ•°æ®åº“è¯»å–logæ•°æ®å¤±è´¥åï¼Œç­‰å¾…å¤šä¹…é‡æ–°å»ºç«‹è¿æ¥","like_count":0},{"had_liked":false,"id":167364,"user_name":"æ¡ä¸ä½æ‰‹ä¸­æ²™","can_delete":false,"product_type":"c1","uid":1097132,"ip_address":"","ucode":"F194E47C4D42C9","user_header":"https://static001.geekbang.org/account/avatar/00/10/bd/ac/49494ed8.jpg","comment_is_top":false,"comment_ctime":1577775989,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577775989","product_id":100020801,"comment_content":"æ€è€ƒé¢˜ï¼š<br>seconds_behind_masterå‘ˆçº¿æ€§å¢é•¿ï¼Œä»åº“åœ¨æ¢å¤èƒ½åŠ›ä¸å—å½±å“çš„æƒ…å†µä¸‹ï¼Œè¯´æ˜æ­¤æ—¶æœ‰å¤§é‡æ•°æ®éœ€è¦æ‰§è¡ŒåŒæ­¥ï¼Œä¸»åº“å¯èƒ½å­˜åœ¨å¤§äº‹åŠ¡æ‰§è¡Œæˆ–è€…å¤§é‡æ•°æ®æ›´æ–°å’Œåˆ é™¤æ“ä½œå­˜åœ¨","like_count":0},{"had_liked":false,"id":165823,"user_name":"æˆ‘ä¸åƒç”œé£Ÿ","can_delete":false,"product_type":"c1","uid":1086808,"ip_address":"","ucode":"1718E6D78F2852","user_header":"https://static001.geekbang.org/account/avatar/00/10/95/58/95e9507d.jpg","comment_is_top":false,"comment_ctime":1577327458,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577327458","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå¯é æ€§ç­–ç•¥å’Œå¯ç”¨æ€§ç­–ç•¥å…·ä½“æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ1. æ˜¯é€šè¿‡ä¸šåŠ¡ç¨‹åºå®ç°ï¼Ÿ2. Mysqlæœ‰å‚æ•°å¯ä»¥é…ç½®ï¼Ÿ3. DBAæ ¹æ®seconds_behind_masterï¼Œäººå·¥ä»‹å…¥ï¼Ÿ","like_count":0},{"had_liked":false,"id":164258,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1576917546,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1576917546","product_id":100020801,"comment_content":"æ¯ä¸ª binlogæ—¥å¿—éƒ½ä¼šæœ‰ä¸€ä¸ªäº‹åŠ¡çš„æ—¶é—´ï¼Œè¿™æ—¶å€™å¦‚æœä¸»åº“çš„æ—¶é—´æ—¶åŒºæ”¹äº†ï¼Œé‚£ä¹ˆä»åº“çš„ seconds_behind_master æ—¶é—´ä¸å°±è®¡ç®—æœ‰é—®é¢˜äº†å‘¢ï¼Ÿ<br><br>æ˜¯ä¸æ˜¯è¯´å…³äºæ•°æ®åº“çš„æ—¶åŒºä¸è¦è½»æ˜“æ”¹åŠ¨çš„ï¼Œè¿™ä¸ªä¼šå½±å“ binlog ï¼Ÿ","like_count":0},{"had_liked":false,"id":160780,"user_name":"é‡è§","can_delete":false,"product_type":"c1","uid":1624590,"ip_address":"","ucode":"FAF53CD4C28494","user_header":"https://static001.geekbang.org/account/avatar/00/18/ca/0e/5009c5ff.jpg","comment_is_top":false,"comment_ctime":1576031965,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576031965","product_id":100020801,"comment_content":"ä»ç»“æœæ¥çœ‹, ä»åº“æ‹¿åˆ°ä¸»åº“çš„binlogä¹‹å,å¦‚æœæ­¤æ—¶ä»åº“æœ‰æ’å…¥æ“ä½œ, å…ˆæ‰§è¡Œæ’å…¥æ“ä½œ, å†åº”ç”¨relay log.<br><br>å› ä¸ºæ’å…¥æ“ä½œæ’å…¥çš„(4,5), relay logä¸­è®°å½•çš„æ˜¯(4,4), æ‰€ä»¥ä»åº“duplicate key error<br><br>å› ä¸ºä»åº“çš„æ’å…¥æ“ä½œ, å†™å…¥bin logæ˜¯(4,5), ä¸»åº“ä»ä»åº“åŒæ­¥è¿‡æ¥çš„binlog å†™å…¥relay logä¸­, è¦æ‰§è¡Œçš„æ˜¯æ’å…¥(4,5), ä½†æ˜¯ä¸»åº“å·²ç»æœ‰ä¸€ä¸ªæ•°æ®æ˜¯(4,4)äº†, æ‰€ä»¥ä¸»åº“duplicate key error<br><br>ä¸çŸ¥é“æ˜¯ä¸æ˜¯æœ‰ä¸å¯¹çš„åœ°æ–¹.","like_count":0},{"had_liked":false,"id":159014,"user_name":"åˆåŒå’å•æ˜¯ä¸€å¹´å•Š","can_delete":false,"product_type":"c1","uid":1000015,"ip_address":"","ucode":"E067320E537DEE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/42/4f/ff1ac464.jpg","comment_is_top":false,"comment_ctime":1575515359,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575515359","product_id":100020801,"comment_content":"MySQL æœ‰æ²¡æœ‰æ—¢èƒ½ä¿è¯æ•°æ®ä¸€è‡´æ€§ åˆ èƒ½ä¿è¯ ä¸»ä»é«˜å¯ç”¨ åˆ‡æ¢çš„ ç¨³å®šå¼€æºæ–¹æ¡ˆå‘¢ï¼Ÿ è€å¸ˆæ¨èå“ªä¸ª","like_count":0},{"had_liked":false,"id":153686,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1574297295,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574297295","product_id":100020801,"comment_content":"å›ç­”é—®é¢˜ï¼šbinlogæ˜¯ä»¥äº‹åŠ¡ä¸ºåŸå­å†™å…¥çš„ï¼Œäº‹åŠ¡åœ¨å¤‡åº“ä¸Šæ‰§è¡Œæ—¶é—´é•¿ï¼ŒSBMå°±é•¿ã€‚è€—æ—¶é•¿çš„äº‹åŠ¡æœ‰å¯¹å¤§é‡æ•°æ®çš„DMLï¼Œå¯¹å¤§è¡¨çš„DDLï¼Œä»¥åŠå¤‡åº“æœºå™¨æ€§èƒ½æ¯”ä¸»åº“å·®æˆ–è´Ÿè½½é«˜ï¼Œå¯¼è‡´åŒä¸€ä¸ªäº‹åŠ¡ï¼Œåœ¨ä¸»ä¸Šè€—æ—¶1Sï¼Œåœ¨å¤‡ä¸Šå¯èƒ½è€—æ—¶2S","like_count":1},{"had_liked":false,"id":153677,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1574296472,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574296472","product_id":100020801,"comment_content":"Cä¸Aä¸å¯å…¼å¾—<br>Cæ˜¯æ•°æ®ä¸€è‡´ï¼Œè€Œæ•°æ®å¤åˆ¶æ˜¯æœ‰æ—¶é—´æˆæœ¬çš„ï¼ˆä½†è²Œä¼¼å¯ä»¥ç”¨ç£ç›˜å†—ä½™é™ˆåˆ—å¯ä»¥æé«˜è¿™ä¸ªé€Ÿåº¦ï¼Ÿä½†ä¸¤è€…å¾ˆå¯èƒ½è¿˜æ˜¯æœ‰æ—¶é—´å·®çš„ï¼‰ï¼Œè¿™ä¸ªæ—¶é—´æˆæœ¬å°±æ˜¯ä¸å¯ç”¨æ—¶é—´ï¼Œä¸»å¤‡åˆ‡æ¢æ—¶ï¼ŒSBM slave behind masterä¸å¯èƒ½ä¸º0ï¼ŒSBMå³æ–‡ä¸­çš„T3-T1ï¼Œå‘èµ·åˆ‡æ¢ï¼Œè¦ç­‰å¾…T3-T1æ—¶é—´ï¼Œä½¿æ–°ä¸»å®Œæˆrelay logçš„å›æ”¾ï¼Œæ­¤æ—¶é—´å†…ç³»ç»Ÿåªè¯»ï¼Œä¸å¯å†™ï¼Œå³å†™ä¸å¯ç”¨ã€‚<br>Aæ˜¯å¯ç”¨æ€§ï¼Œè‹¥è¦ä¿è¯Aï¼Œå°±æ˜¯åœ¨åˆ‡æ¢åè®©Bç«‹å³å¯å†™ï¼Œè€Œè¿™æ—¶ï¼Œrelay logè¿˜æ²¡é‡æ”¾å®Œï¼Œä¼šå‡ºç°é‡æ”¾relay logå’Œä¸šåŠ¡å†™å…¥å¹¶è¡Œæ‰§è¡Œï¼Œæœ‰å¯èƒ½å¯¼è‡´Aä¸Bæ•°æ®ä¸ä¸€è‡´","like_count":0},{"had_liked":false,"id":153676,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1574296351,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574296351","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸ªé—®é¢˜ï¼Œç”¨ç£ç›˜RAID1æ˜¯ä¸æ˜¯å°±å¯ä»¥å®ç°MySQLå®æ—¶å¤åˆ¶å•Šï¼Œä¸¤å—ç£ç›˜å†™å…¥å†…å®¹ä¸€æ ·ï¼Œä¸»åº“ç”¨ä¸€å—ï¼Œå¤‡åº“ç”¨å¦ä¸€å—ã€‚é‚£è¿™æ ·ï¼Œæ˜¯å¦å¯ä»¥ä»£æ›¿MySQLç”¨relay logé‚£å¥—å¤åˆ¶æœºåˆ¶å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":153645,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1574293380,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1574293380","product_id":100020801,"comment_content":"å¯é æ€§ä¼˜å…ˆå’Œå¯ç”¨æ€§ä¼˜å…ˆï¼Œå°±æ˜¯CAPä¸­çš„Cå’ŒAå§","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":166451,"discussion_content":"å¯ä»¥è¿™ä¹ˆç†è§£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581397672,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129357,"user_name":"MrVito","can_delete":false,"product_type":"c1","uid":1252169,"ip_address":"","ucode":"716FF6F8871706","user_header":"https://static001.geekbang.org/account/avatar/00/13/1b/49/ddefc656.jpg","comment_is_top":false,"comment_ctime":1567094881,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567094881","product_id":100020801,"comment_content":"è¿™ä¸ªç›´çº¿å°±æ˜¯sbmçº¿æ€§å¢é•¿äº†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™é‡Œé¢å¯èƒ½æ˜¯äº‹åŠ¡æ‰§è¡Œå¾ˆä¹…ï¼Œæ¯æ¬¡æƒ³å¤‡ä»½éƒ½è¦æ‰§è¡Œä¸€æ¬¡é•¿äº‹åŠ¡ï¼Œå°±æ—¶é—´å¾ˆé•¿","like_count":0},{"had_liked":false,"id":120315,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1564826660,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564826660","product_id":100020801,"comment_content":"æ‰€æœ‰çš„é«˜å¯ç”¨ç³»ç»Ÿéƒ½æ˜¯åˆ†å¸ƒå¼çš„ï¼Œæ•°æ®é€šè¿‡ç½‘ç»œä»ä¸€ä¸ªåœ°æ–¹åˆ°å¦ä¸€ä¸ªåœ°æ–¹ï¼Œæ€»å…ä¸äº†ä¼šæœ‰ä¸€ä¸ªæ—¶é—´å·®çš„ï¼Œå¯¹äººæ— æ„ŸçŸ¥çš„ä¸ç®—æœ‰å»¶è¿Ÿã€‚è®©äººæœ‰æ„ŸçŸ¥äº†ï¼Œå°±éœ€è¦è§£å†³äº†ï¼Œå¦åˆ™å°±å¥‡æ€ªäº†ã€‚<br>å¦‚æœç°åœ¨å‘ç°ä¸»å¤‡æ•°æ®ä¸ä¸€è‡´äº†ï¼Œæ€ä¹ˆå¿«é€Ÿå®šä½åˆ°é—®é¢˜çš„åŸå› å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":112005,"user_name":"WL","can_delete":false,"product_type":"c1","uid":1173771,"ip_address":"","ucode":"6277DCD776B87E","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/0b/1171ac71.jpg","comment_is_top":false,"comment_ctime":1562652827,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562652827","product_id":100020801,"comment_content":"è¯·é—®ä¸€ä¸‹è€å¸ˆæœ‰å¥½ç”¨çš„å¼€æºhaç³»ç»Ÿå—ï¼Ÿæˆ‘åœ¨ç½‘ä¸Šæ‰¾äº†åŠå¤©æ²¡æ‰¾åˆ°ã€‚","like_count":0},{"had_liked":false,"id":109386,"user_name":"çµçŠ€andy","can_delete":false,"product_type":"c1","uid":1334527,"ip_address":"","ucode":"3C3C36B070676C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/WuVCibYmuGqFLnfIrr0BmkdzHwkialB0DibJ0YnymNNO2Wicy76ZxSvjD66sPVsd9SjkicSS4Z2iadTeOn7zGfwh9sxg/132","comment_is_top":false,"comment_ctime":1562029104,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562029104","product_id":100020801,"comment_content":"ï¼ˆä¸»åº“é…ç½®ï¼‰sync_binlog=1ï¼Œæ¯æ¬¡commitéƒ½ä¼šåˆ·æ–°åˆ°ç£ç›˜æ—¥å¿—ï¼Œå¦‚æœsync_binlog=100ï¼Œç­‰å¾…100æ¬¡commitï¼Œå†åˆ·æ–°åˆ°ç£ç›˜æ—¥å¿—ï¼Œè¿™æ ·çš„è¯ï¼Œä¸»ä»åŒæ­¥ä¼šä¸ä¼šå»¶é•¿å•Šï¼ˆå› ä¸ºåœ¨ç­‰å¾…100æ¬¡commitï¼Œå†åˆ·ç›˜ï¼‰ï¼Ÿ","like_count":0},{"had_liked":false,"id":108139,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1561686443,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561686443","product_id":100020801,"comment_content":"é—®é¢˜ä¸€ï¼šå¤‡åº“åªæ˜¯åœ¨è¿æ¥åˆ°ä¸»åº“çš„æ—¶å€™é€šè¿‡ SELECT UNIX_TIMESTAMP() å‡½æ•°è®¡ç®—å‡ºæ—¶é—´å·®å€¼ï¼Œè¿˜æ˜¯æ¯æ¬¡æ‰§è¡Œ binlog å‰éƒ½ä¼šè®¡ç®—ä¸€æ¬¡æ—¶é—´å·®å€¼ï¼Ÿå¦‚æœæ˜¯å‰è€…ï¼Œé‚£åœ¨ç³»ç»Ÿåç»­è¿è¡Œä¸­ï¼ŒæœåŠ¡å™¨çš„æ—¶é—´äº§ç”Ÿäº†ä¸ä¸€è‡´ï¼Œè¿˜æ˜¯ä¼šè®¡ç®—ä¸å‡†ç¡®å–ã€‚<br><br>é—®é¢˜äºŒï¼šå¯é æ€§ä¼˜å…ˆç­–ç•¥çš„åˆ‡æ¢æ­¥éª¤ä¸­ç¬¬ 1 æ­¥å’Œç¬¬ 3 æ­¥çš„æ—¶é—´åˆ¤æ–­ï¼Œä¼šä¸ä¼šå› ä¸ºå­˜åœ¨ä¸­è½¬æ—¥å¿—è€Œäº§ç”Ÿè¯¯æ“ä½œï¼Ÿ<br>é’ˆå¯¹ç¬¬ 1 æ­¥æœ‰è¿™åœºæ™¯ï¼šæ¯”å¦‚ï¼Œç°åœ¨å¤‡åº“æ‰§è¡Œçš„äº‹åŠ¡ A çš„ SBM ä¸º 3 ç§’ï¼Œä½†æ˜¯ä¸­è½¬æ—¥å¿—é‡Œè¿˜æœ‰ä¸€ä¸ªå¤§äº‹åŠ¡ Bï¼Œå‡å¦‚ 30 åˆ†é’Ÿï¼Œè¿™æ—¶æŠŠä¸»åº“æ”¹æˆåªè¯»äº†ï¼Œå†™ä¸šåŠ¡å°±å¾—åœæ­¢æœåŠ¡ 30 åˆ†é’Ÿã€‚<br>é’ˆå¯¹ç¬¬ 3 æ­¥æœ‰è¿™åœºæ™¯ï¼šå¦‚æœæ°å¥½è¿ç»­å‡ æ¬¡çœ‹åˆ°å¤‡åº“çš„ SBM éƒ½ä¸º 0ï¼Œä½†å®é™…ä¸Šä¸­è½¬æ—¥å¿—é‡Œè¿˜æœ‰äº‹åŠ¡æ²¡å¤„ç†å®Œï¼Œè¿™æ—¶è®¾ç½®å¤‡åº“çš„ readonly ä¸º falseï¼Œæä¾›å†™æœåŠ¡ã€‚å‡è®¾ä¸­è½¬æœ‰ä¸ªäº‹åŠ¡æ˜¯å°† id ä¸º 1 çš„è®°å½•çš„å­—æ®µ f ä» 2 æ”¹ä¸º 5ï¼Œè¿™æ—¶æ¥äº†ä¸€ä¸ªæ–°çš„å†™æ“ä½œï¼Œå¯¹ id ä¸º 1 çš„å­—æ®µè¿›è¡Œ f=f+1 æ“ä½œã€‚æ­£å¸¸ f åº”è¯¥æ˜¯ 6ï¼Œä½†æ˜¯ä¸­è½¬æ—¥å¿—åäºæ–°çš„å†™æ“ä½œï¼Œç°åœ¨å˜æˆäº† 5ã€‚<br>å¦‚æœå­˜åœ¨ä¸Šé¢ 2 ç§åœºæ™¯ï¼Œè¿˜æœ‰æ²¡æœ‰å…¶ä»–æ–¹æ¡ˆï¼Œå¯ä»¥ä¿è¯åˆ‡æ¢ä¸»å¤‡æ—¶ï¼Œä¸ä¼šå­˜åœ¨ä¸­è½¬æ—¥å¿—æ‰€å¸¦æ¥çš„è¯¯æ“ä½œã€‚<br><br>è°¢è°¢è€å¸ˆï¼ï¼â€‹","like_count":0},{"had_liked":false,"id":104879,"user_name":"å†¥ç‹æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1311603,"ip_address":"","ucode":"CA43C381A69736","user_header":"https://static001.geekbang.org/account/avatar/00/14/03/73/38397da1.jpg","comment_is_top":false,"comment_ctime":1560862438,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560862438","product_id":100020801,"comment_content":"ä¸€ã€ç½‘ç»œå¼‚å¸¸å¯¼è‡´binlogä¼ è¾“å»¶è¿Ÿå¢åŠ ã€‚äºŒã€å¤‡ï¼ˆä»ï¼‰åº“å¤„ç†ä¸»åº“ä¼ æ¥çš„binlogé€Ÿåº¦è¿‡æ…¢ï¼Œå¤„ç†è¿‡æ…¢çš„åŸå› å¯èƒ½æ˜¯å¤‡ï¼ˆä»ï¼‰åº“å¯èƒ½æ­£åœ¨æ‰§è¡Œå ç”¨èµ„æºè¿‡å¤šçš„è¯»æ“ä½œã€‚","like_count":0},{"had_liked":false,"id":104272,"user_name":"Xianggg","can_delete":false,"product_type":"c1","uid":1201154,"ip_address":"","ucode":"6377F84FBB183D","user_header":"https://static001.geekbang.org/account/avatar/00/12/54/02/a9762d7e.jpg","comment_is_top":false,"comment_ctime":1560703073,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560703073","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå¦‚æœåœ¨ä¸»å¤‡åˆ‡æ¢æ—¶å€™è®¾ç½®ä¸åŒæ­¥é•¿ï¼Œå¹¶ä¸”ç¡®ä¿è®¾ç½®æ­¥é•¿ä¹‹å‰æ‰€æœ‰çš„threadçš„äº‹åŠ¡éƒ½æäº¤ï¼Œæ²¡æœ‰å¤§é•¿äº‹åŠ¡ï¼Œbinlogç”¨rowæ ¼å¼ï¼Œè¿™æ ·æ˜¯å¦å¯ä»¥åšåˆ°é«˜å¯ç”¨å’Œé«˜å¯é å‘¢","like_count":0},{"had_liked":false,"id":101794,"user_name":"åº“å°”æ–¯","can_delete":false,"product_type":"c1","uid":1085569,"ip_address":"","ucode":"BC2F220993C3ED","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIG210UcWicnKgOjBJC3CUxiaRImsiaqscVLyABrA4Kshm7hReicSuyRvfe1x07ydoT8WknNh2QLxU3rA/132","comment_is_top":false,"comment_ctime":1559974202,"is_pvip":false,"replies":[{"id":"36726","content":"ä½†æ˜¯è¿™ä¸ªå¤§äº‹åŠ¡æœ¬èº«å°±è¦æ‰§è¡Œé‚£ä¹ˆä¹…çš„~","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1560040398,"ip_address":"","comment_id":101794,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1559974202","product_id":100020801,"comment_content":"&quot;&quot;å¤§äº‹åŠ¡è¿™ç§æƒ…å†µå¾ˆå¥½ç†è§£ã€‚å› ä¸ºä¸»åº“ä¸Šå¿…é¡»ç­‰äº‹åŠ¡æ‰§è¡Œå®Œæˆæ‰ä¼šå†™å…¥ binlogï¼Œå†ä¼ ç»™å¤‡åº“ã€‚æ‰€ä»¥ï¼Œå¦‚æœä¸€ä¸ªä¸»åº“ä¸Šçš„è¯­å¥æ‰§è¡Œ 10 åˆ†é’Ÿï¼Œé‚£è¿™ä¸ªäº‹åŠ¡å¾ˆå¯èƒ½å°±ä¼šå¯¼è‡´ä»åº“å»¶è¿Ÿ 10 åˆ†é’Ÿã€‚&quot;&quot;<br><br>è€å¸ˆ ä¸ºä»€ä¹ˆå¤§äº‹åŠ¡ä¼šå¯¼è‡´ä»åº“å»¶è¿Ÿï¼Ÿ å¦‚æœä»åº“æ˜¯å¤šçº¿ç¨‹çš„å‘¢ï¼Ÿ<br>å¤§äº‹åŠ¡æ‰§è¡Œçš„åŒæ—¶ï¼Œå…¶å®ƒçš„å°äº‹åŠ¡è¿˜æ˜¯å¯ä»¥æäº¤å¹¶å†™binlog å¹¶åŒæ­¥åˆ°ä»åº“ï¼Œä¸ºä»€ä¹ˆå°±ä¼šå»¶è¿Ÿäº†å‘¢ï¼Ÿä¸å¤ªç†è§£ï¼Œå¸Œæœ›è€å¸ˆæŒ‡ç‚¹","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453118,"discussion_content":"ä½†æ˜¯è¿™ä¸ªå¤§äº‹åŠ¡æœ¬èº«å°±è¦æ‰§è¡Œé‚£ä¹ˆä¹…çš„~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560040398,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":99348,"user_name":"é£ä¸­é˜¿é˜³","can_delete":false,"product_type":"c1","uid":1301912,"ip_address":"","ucode":"98DD6475A51554","user_header":"https://static001.geekbang.org/account/avatar/00/13/dd/98/3fd7c5a1.jpg","comment_is_top":false,"comment_ctime":1559198012,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559198012","product_id":100020801,"comment_content":"è¯·é—®ä¸€ä¸‹è€å¸ˆ   æˆ‘ä»¬ä¸»ä»ç¯å¢ƒæ˜¯5.6ç‰ˆæœ¬     ä¹Ÿæ˜¯å› ä¸ºä¸»åº“å¤§äº‹åŠ¡ï¼ˆå­˜å‚¨è¿‡ç¨‹æˆ–è€…å¤§è¡¨æŸ¥è¯¢ï¼‰  å¯¼è‡´ä¸»ä»å‡ºç°å»¶è¿Ÿ ï¼Œæœæ–­æ—¶é—´ä¼šè‡ªåŠ¨æ¢å¤ï¼Œè€Œä¸”è¿™ä¸ªå¤§å¤±è¯¯è¿˜ä¼šå¯¼è‡´ä¸»åº“é”è¡¨ï¼Œäº‹åŠ¡æ‰§è¡Œæ—¶é—´å¾ˆé•¿ï¼Œä¹Ÿä¼šè‡ªåŠ¨æ¢å¤ã€‚<br>æˆ‘æƒ³é—®é—®æ€ä¹ˆå»å¤„ç†è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ<br>1 ä¸»ä»é‡‡ç”¨è¯»å†™åˆ†ç¦»ï¼Œè¿™æ ·ä¼šä¸ä¼šå¥½ä¸€ç‚¹ï¼Œå¤§äº‹åŠ¡æŸ¥è¯¢å°±ä¸ä¼šé”è¡¨äº†ï¼Œä¹Ÿä¸ä¼šå½±å“ä¸šåŠ¡äº†<br>2 ç ”å‘ä¼˜åŒ–æŸ¥è¯¢ï¼Œå¤§äº‹åŠ¡sql<br>3 è¿ç»´é…ç½®5.7ï¼ŒMHA  è¯»å†™åˆ†ç¦»  ä»ä» é«˜å¯ç”¨keepalive+lvs","like_count":0},{"had_liked":false,"id":97465,"user_name":"è¿˜ä¸€æ£µæ ‘","can_delete":false,"product_type":"c1","uid":1317709,"ip_address":"","ucode":"C187F2A141D60E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eop9WylZJicLQxlvXukXUgPp39zJHyyReK5s1C9VhA6rric7GiarbfQMuWhdCCDdxdfL610Hc4cNkn9Q/132","comment_is_top":false,"comment_ctime":1558676377,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558676377","product_id":100020801,"comment_content":"ç–‘é—®ï¼š å¦‚æœå¤‡åº“å·²ç»è¿æ¥åˆ°ä¸»åº“ï¼Œå†å¯¹å¤‡åº“æœåŠ¡å™¨æ—¶é—´è°ƒæ•´ï¼Œé‚£è¿™ä¸ªè°ƒæ•´æ˜¯å¦å½±å“Seconds_Behind_Masterçš„å€¼","like_count":0},{"had_liked":false,"id":94409,"user_name":"æŸ³æ ‘","can_delete":false,"product_type":"c1","uid":1025223,"ip_address":"","ucode":"F03249D4534BCB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a4/c7/d1ee69c6.jpg","comment_is_top":false,"comment_ctime":1557802926,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557802926","product_id":100020801,"comment_content":"æ¯ä¸ªæ”¯æŒé›†ç¾¤éƒ¨ç½²çš„è½¯ä»¶ï¼Œéƒ½éœ€è¦åœ¨ä¸€è‡´æ€§å’Œå¯ç”¨æ€§ä¹‹é—´å¯»æ‰¾å¹³è¡¡ï¼Œè¿™ç¯‡æ–‡ç« æè¿°äº†Mysqlåœ¨è¿™æ–¹é¢åšçš„åŠªåŠ›ï¼ŒCAPï¼ŒPå¿…é¡»æ»¡è¶³ï¼Œå‰©ä¸‹çš„ï¼Œå°±æ˜¯åœ¨Cå’ŒAä¹‹é—´ï¼Œå¯»æ‰¾é‚£ä¸ªåˆé€‚çš„åº¦ã€‚","like_count":0},{"had_liked":false,"id":74302,"user_name":"è½»æ­Œèµ‹","can_delete":false,"product_type":"c1","uid":1251574,"ip_address":"","ucode":"22F62446208805","user_header":"https://static001.geekbang.org/account/avatar/00/13/18/f6/2ff7bc7a.jpg","comment_is_top":false,"comment_ctime":1552184846,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552184846","product_id":100020801,"comment_content":"é¦–å…ˆï¼Œèƒ½æŸ¥åˆ°å€¼è¯´æ˜å¤‡åº“è¿˜æ´»ç€<br>å…¶æ¬¡ï¼Œæ—¶é—´æ˜¯çº¿æ€§å‡½æ•°è¯´æ˜å‡½æ•°èµ·ç‚¹å¼€å§‹å¿…ç„¶æœ‰ä¸€ä¸ªäº‹åŠ¡å¯¼è‡´åç»­äº‹åŠ¡æ— æ³•å¾—åˆ°æ‰§è¡Œ<br>çŒœæµ‹è¦ä¹ˆæ˜¯å¤§äº‹åŠ¡é”äº†å¾ˆå¤šï¼Œè¦ä¹ˆæ˜¯ddlé”äº†æ•´ä¸ªè¡¨<br>ç½‘ç»œåº”è¯¥ä¸ä¼šæ–­ï¼Œå› ä¸ºè¿™ä¸ªæ—¶é—´æ˜¯é€šè¿‡å¤‡åº“ä¸­å¯¹binlogçš„æ—¶é—´æˆ³åˆ¤æ–­å‡ºæ¥çš„","like_count":0},{"had_liked":false,"id":73801,"user_name":"gongxt","can_delete":false,"product_type":"c1","uid":1170750,"ip_address":"","ucode":"222C46E0615152","user_header":"https://static001.geekbang.org/account/avatar/00/11/dd/3e/c3028cd5.jpg","comment_is_top":false,"comment_ctime":1552005182,"is_pvip":false,"replies":[{"id":"27148","content":"è¿™ä¸ªæ¯”è¾ƒå¥‡æ€ªè¯¶ï¼Œä¸è¿‡ä¸ºäº†ç²¾ç¡®åˆ¤æ–­ï¼Œè¿˜æ˜¯ç”¨gtidæˆ–è€…ä½ç‚¹å§","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1552147114,"ip_address":"","comment_id":73801,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552005182","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘é‡åˆ°ä¸€ç§æƒ…å†µï¼š<br>åˆ©ç”¨sysbenchå¤§æ‰¹é‡å†™å…¥masterï¼Œæ¥ç€masteræ•…éšœï¼Œç„¶åè¿›è¡Œä¸»ä»åˆ‡æ¢ï¼Œä»æ­¤æ—¶å›æ”¾binlogäº‹ç‰©æ—¥å¿—ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å›æ”¾å®Œæˆæˆ‘å°±çœ‹åˆ°äº†second_behind_master ä¸º0çš„æƒ…å†µï¼Œè¿™ä¸ªæ˜¯å•¥åŸå› å‘€ï¼Ÿ<br>ç„¶åæˆ‘åªèƒ½ä½¿ç”¨å¦å¤–çš„åˆ¤æ–­æ–¹å¼ã€‚åˆ¤æ–­æ˜¯å¦å·²ç»å›æ”¾å®Œæˆï¼Œè€å¸ˆçœ‹åˆ°åè¿˜è¯·è§£æƒ‘ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442284,"discussion_content":"è¿™ä¸ªæ¯”è¾ƒå¥‡æ€ªè¯¶ï¼Œä¸è¿‡ä¸ºäº†ç²¾ç¡®åˆ¤æ–­ï¼Œè¿˜æ˜¯ç”¨gtidæˆ–è€…ä½ç‚¹å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552147114,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":61695,"user_name":"cheriston","can_delete":false,"product_type":"c1","uid":1309984,"ip_address":"","ucode":"617CBFCE0925C4","user_header":"https://static001.geekbang.org/account/avatar/00/13/fd/20/2761ef0e.jpg","comment_is_top":false,"comment_ctime":1547776477,"is_pvip":false,"replies":[{"id":"21899","content":"å—¯å—¯ï¼Œçœ‹ä¸‹28ç¯‡ğŸ˜†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547782857,"ip_address":"","comment_id":61695,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1547776477","product_id":100020801,"comment_content":"è€å¸ˆ  seconds_behind_master=0 ä¹Ÿä¸èƒ½100%ä»£è¡¨ä¸»åº“ä¸ä»åº“ä¹‹é—´æ²¡æœ‰å»¶è¿Ÿ å§ ?","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436956,"discussion_content":"å—¯å—¯ï¼Œçœ‹ä¸‹28ç¯‡ğŸ˜†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547782857,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":59039,"user_name":"ä¸ƒä¸ƒ","can_delete":false,"product_type":"c1","uid":1301937,"ip_address":"","ucode":"277BACE2330C54","user_header":"https://static001.geekbang.org/account/avatar/00/13/dd/b1/7323beb9.jpg","comment_is_top":false,"comment_ctime":1547281936,"is_pvip":true,"replies":[{"id":"21368","content":"è¿™ä¸ªè¯´çš„æ˜¯è¿ç§»è¿‡ç¨‹ï¼Œ<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€å¼€å§‹Aæ˜¯Bçš„ä»åº“ï¼Œåæ¥è¿ç§»è¿‡ç¨‹ä¸­ï¼Œåœæ­¢äº†Aå’ŒBçš„ä¸»å¤‡å…³ç³»ï¼Œè®©Aå’ŒA&#39;äº’ä¸ºä¸»å¤‡","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547293036,"ip_address":"","comment_id":59039,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1547281936","product_id":100020801,"comment_content":"è€å¸ˆæ–‡ç« æœ«å°¾æ€è€ƒé¢˜éƒ¨åˆ†ï¼Œæœ‰ç‚¹å›°æƒ‘æ±‚è§£ç­”ã€‚<br>å¾ªç¯å¤åˆ¶æˆ‘ä¹‹å‰ç†è§£æ˜¯B-&gt;A-&gt;A&#39;-&gt;Bè¿™æ ·çš„æ‹“æ‰‘ç»“æ„ã€‚<br>è€ŒåŒMç»“æ„ç†è§£æ˜¯A-&gt;A&#39;-&gt;Aï¼Œæ­¤æ—¶Aæ˜¯A&#39;çš„ä¸»åº“å’Œä»åº“ï¼ŒBåªèƒ½æ˜¯Açš„ä»åº“ã€‚é‚£ä¹ˆtrx1åœ¨ä»åº“Bä¸Šçš„æ›´æ–°å°±ä¸ä¼šä¼ ç»™Aã€‚<br>æ–‡ä¸­æ˜¯ä¸€ç§å‡è®¾å—ï¼Ÿè¿˜æ˜¯æˆ‘ç†è§£åå·®äº† ~<br><br>--------æ­£æ–‡--------<br>trx1 æ˜¯åœ¨èŠ‚ç‚¹ B æ‰§è¡Œçš„ï¼Œå› æ­¤ binlog ä¸Šçš„ server_id å°±æ˜¯ Bï¼Œbinlog ä¼ ç»™èŠ‚ç‚¹ Aï¼Œç„¶åA å’Œ Aâ€™æ­å»ºäº†åŒ M ç»“æ„ï¼Œå°±ä¼šå‡ºç°å¾ªç¯å¤åˆ¶ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436280,"discussion_content":"è¿™ä¸ªè¯´çš„æ˜¯è¿ç§»è¿‡ç¨‹ï¼Œ\nä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€å¼€å§‹Aæ˜¯Bçš„ä»åº“ï¼Œåæ¥è¿ç§»è¿‡ç¨‹ä¸­ï¼Œåœæ­¢äº†Aå’ŒBçš„ä¸»å¤‡å…³ç³»ï¼Œè®©Aå’ŒA&amp;#39;äº’ä¸ºä¸»å¤‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547293036,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58666,"user_name":"ä»»é¹æ–Œ","can_delete":false,"product_type":"c1","uid":1104086,"ip_address":"","ucode":"34319B05EA6E74","user_header":"https://static001.geekbang.org/account/avatar/00/10/d8/d6/47da34bf.jpg","comment_is_top":false,"comment_ctime":1547169897,"is_pvip":false,"replies":[{"id":"21214","content":"Impossible WHERE noticed after reading const tables<br><br>è¿™ä¸ªè¯­å¥æ˜¯ä¸æ˜¯æ‰§è¡Œç»“æœæ˜¯ç©ºï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547178474,"ip_address":"","comment_id":58666,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1547169897","product_id":100020801,"comment_content":"è€å¸ˆå¥½å‘ç°æˆ‘ä»¬ç³»ç»Ÿä¸­ä¸€æ¡sqlå†™æ³•æ¯”è¾ƒç‹¬ç‰¹<br>SELECT<br>    IF(ha.curricula_type = &#39;02&#39;<br>            AND ((cla.model_code IN (&#39;CM05004&#39; , &#39;CM05001&#39;)<br>            AND cla.is_vip_video = 1)<br>            OR cla.model_code = &#39;CM05008&#39;),<br>        &#39;1&#39;,<br>        &#39;0&#39;) AS &#39;isUK&#39;<br>FROM<br>    h_curricula ha,<br>    h_class cla<br>WHERE<br>    ha.`code` = &#39;2&#39; <br>\tAND cla.`code` =&#39;2&#39; <br>ä½¿ç”¨æŸ¥è¯¢åˆ†æå™¨åæ‰€æœ‰åˆ—éƒ½æ— ä¿¡æ¯æ˜¾ç¤ºï¼Œåªåœ¨Extraåˆ—æ˜¾ç¤ºï¼Œ<br>Impossible WHERE noticed after reading const tablesï¼Œä¸çŸ¥é“å¦‚ä½•åˆ†æå…¶æ‰§è¡Œè®¡åˆ’ã€‚<br>å¦‚æœcodeåˆ—å‡ä¸ºä¸¤ä¸ªè¡¨çš„ä¸»é”®ç±»å‹æ˜¯varcharï¼Œæƒ³çŸ¥é“è¿™ç§æƒ…å†µä¸‹æ˜¯å¦ä¼šäº§ç”Ÿç¬›å¡å°”ç§¯ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436159,"discussion_content":"Impossible WHERE noticed after reading const tables\n\nè¿™ä¸ªè¯­å¥æ˜¯ä¸æ˜¯æ‰§è¡Œç»“æœæ˜¯ç©ºï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547178474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58487,"user_name":"é£è§é›¨ç‘Ÿ","can_delete":false,"product_type":"c1","uid":1317323,"ip_address":"","ucode":"5E832ABE126393","user_header":"https://static001.geekbang.org/account/avatar/00/14/19/cb/70a2b47e.jpg","comment_is_top":false,"comment_ctime":1547089789,"is_pvip":false,"replies":[{"id":"21172","content":"å…ˆçœ‹çœ‹26ç¯‡ï¼Œç„¶åå†ä¸‹é¢ç•™ä¸‹ä½ çš„ç†è§£å’Œæ–°çš„ç–‘é—®å“ˆğŸ˜†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547134379,"ip_address":"","comment_id":58487,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1547089789","product_id":100020801,"comment_content":"è€å¸ˆé—®ä¸€ä¸‹é›†ç¾¤åœ¨å¼€å¯å¹¶è¡Œå¤åˆ¶çš„æƒ…å†µä¸‹ï¼š<br>ä¸»åº“å‚æ•°ï¼šbinlog_group_commit_sync_delay=1000ï¼›binlog_group_commit_sync_no_delay_count=10<br>ä»åº“ï¼šslave_parallel_type=LOGICAL_CLOCKï¼›slave_parallel_workers=8<br>MySQLï¼šç¤¾åŒºç‰ˆ5.7.20<br>åœ¨ä»åº“ä¸ŠæŸ¥çœ‹slave statusçš„æ—¶Seconds_Behind_Masteræ€»æ˜¯æ˜¾ç¤ºè½å10-15ï¼Œåœ¨æœ‰å¤§é‡æ›´æ–°çš„æƒ…å†µä¸‹æ•°æ®ä¼šä¸€ç›´å¢å¤§ï¼Œé€šè¿‡binlogæ¥çœ‹çš„è¯Read_Master_Log_Pos å’ŒExec_Master_Log_Posç›¸å·®æ€»æ˜¯åœ¨1000+ï¼Œç”šè‡³å˜å¤§çš„æ›´å¤§ã€‚ä½†å°†slave_parallel_typeæ›´æ”¹å›é»˜è®¤å€¼DATABASEæ—¶ï¼ŒRead_Master_Log_Pos å’ŒExec_Master_Log_Posç›¸å·®å¾ˆå°ï¼Œç”šè‡³å¯ä»¥ç›¸åŒã€‚<br>åœ¨ä¸åŒçš„é›†ç¾¤ä¸Šå¼€å¯å¹¶è¡Œå¤åˆ¶éƒ½ä¼šå‡ºç°ç›¸åŒçš„æƒ…å†µï¼Œä½†å°†slave_parallel_typeæ›´æ”¹å›é»˜è®¤å€¼DATABASEæ—¶éƒ½è¦æ¯”LOGICAL_CLOCKå»¶è¿Ÿæƒ…å†µè¦å¥½ã€‚<br>æ›´æ¢5.7.24ç‰ˆæœ¬çš„æƒ…å†µä¸‹æœ‰åŒæ ·çš„é—®é¢˜ã€‚<br>å¦‚æœæœ‰ä¸¤å°ä»åº“ï¼Œæœºå™¨é…ç½®ç›¸åŒå…¶å®ƒå‚æ•°ä¸€æ ·ã€‚ä¸€å°è®¾ç½®æˆslave_parallel_type=DATABASEã€‚è€Œå¦ä¸€å°è®¾ç½®æˆLOGICAL_CLOCKï¼Œä¸ç®¡æ˜¯çº¿ä¸Šçš„è¡¨ç°è¿˜æ˜¯é€šè¿‡sysbenchå‹æµ‹æ¥çœ‹ï¼Œè®¾ç½®æˆLOGICAL_CLOCKçš„ä»åº“å»¶è¿Ÿç¡®å®è¦æ¯”DATABASEå¤§ä¸€äº›ã€‚<br>è¿™ä¸ªæƒ…å†µä»å“ªé‡Œæ’æŸ¥ä¸€ä¸‹ï¼Ÿè°¢è°¢ã€‚<br>","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436088,"discussion_content":"å…ˆçœ‹çœ‹26ç¯‡ï¼Œç„¶åå†ä¸‹é¢ç•™ä¸‹ä½ çš„ç†è§£å’Œæ–°çš„ç–‘é—®å“ˆğŸ˜†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547134379,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58485,"user_name":"Chris","can_delete":false,"product_type":"c1","uid":1307745,"ip_address":"","ucode":"59588114490F57","user_header":"https://static001.geekbang.org/account/avatar/00/13/f4/61/cfdd9e55.jpg","comment_is_top":false,"comment_ctime":1547089734,"is_pvip":false,"replies":[{"id":"21185","content":"çœ‹ç€å¥½åƒæ˜¯ç£ç›˜é—®é¢˜äº†ï¼Œä½ è¿™ä¸ªæ˜¯5.7çš„å“ªä¸ªå°ç‰ˆæœ¬ï¼Ÿ<br>è¿˜æœ‰ï¼Œå°½é‡ä¸è¦ç”¨windowsç³»ç»Ÿå“¦ğŸ˜†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547140702,"ip_address":"","comment_id":58485,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1547089734","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå’¨è¯¢ä¸ªé—®é¢˜ï¼Œç°åœ¨é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œmysqlæ•°æ®åº“æ€»æ˜¯crashï¼Œé‡æ–°å¯åŠ¨æœåŠ¡åˆæ­£å¸¸ï¼Œç„¶åè¿è¡Œä¸€æ®µæ—¶é—´åˆä¼šcrashï¼ŒæŠ¥é”™å¦‚ä¸‹InnoDB: Assertion failure in thread 6792 in file fil0fil.cc line 5805<br>InnoDB: Failing assertion: err == DB_SUCCESS<br>InnoDB: We intentionally generate a memory trap.<br>InnoDB: Submit a detailed bug report to http:&#47;&#47;bugs.mysql.com.<br>InnoDB: If you get repeated assertion failures or crashes, even<br>InnoDB: immediately after the mysqld startup, there may be<br>InnoDB: corruption in the InnoDB tablespace. Please refer to<br>InnoDB: http:&#47;&#47;dev.mysql.com&#47;doc&#47;refman&#47;5.7&#47;en&#47;forcing-innodb-recovery.html<br>InnoDB: about forcing recovery.<br>08:52:33 UTC - mysqld got exception 0x80000003 ;<br>This could be because you hit a bug. It is also possible that this binary<br>or one of the libraries it was linked against is corrupt, improperly built,<br>or misconfigured. This error can also be caused by malfunctioning hardware.<br>Attempting to collect some information that could help diagnose the problem.<br>As this is a crash and something is definitely wrong, the information<br>collection process might fail.<br><br>key_buffer_size=8388608<br>read_buffer_size=131072<br>max_used_connections=60<br>max_threads=151<br>thread_count=45<br>connection_count=45<br>It is possible that mysqld could use up to <br>key_buffer_size + (read_buffer_size + sort_buffer_size)*max_threads = 68010 K  bytes of memory<br>Hope that&#39;s ok; if not, decrease some variables in the equation.<br><br>Thread pointer: 0x0<br>Attempting backtrace. You can use the following information to find out<br>where mysqld died. If you see no messages after this, something went<br>terribly wrong...<br>13f9b9812    mysqld.exe!my_sigabrt_handler()[my_thr_init.c:449]<br>13fd5e349    mysqld.exe!raise()[winsig.c:587]<br>13fd5d240    mysqld.exe!abort()[abort.c:82]<br>13fab9b08    mysqld.exe!ut_dbg_assertion_failed()[ut0dbg.cc:67]<br>13fae06da    mysqld.exe!fil_aio_wait()[fil0fil.cc:5807]<br>13fa7eb84    mysqld.exe!io_handler_thread()<br>The manual page at http:&#47;&#47;dev.mysql.com&#47;doc&#47;mysql&#47;en&#47;crashing.","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436086,"discussion_content":"çœ‹ç€å¥½åƒæ˜¯ç£ç›˜é—®é¢˜äº†ï¼Œä½ è¿™ä¸ªæ˜¯5.7çš„å“ªä¸ªå°ç‰ˆæœ¬ï¼Ÿ\nè¿˜æœ‰ï¼Œå°½é‡ä¸è¦ç”¨windowsç³»ç»Ÿå“¦ğŸ˜†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547140702,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58476,"user_name":"è€ƒæ‹‰å‡ºå±±","can_delete":false,"product_type":"c1","uid":1303954,"ip_address":"","ucode":"917E35FD7B2D06","user_header":"https://wx.qlogo.cn/mmopen/vi_32/1mOvT5fApeicXppMP3zADG6XIPicNt5D9dL6y46SF5UUcH0hicG21LM6xSgHJj5oAdzCyeGtLZYHYmlvaFwecrGOA/132","comment_is_top":false,"comment_ctime":1547088295,"is_pvip":false,"replies":[{"id":"21170","content":"1. å› ä¸ºgroupTypeæ²¡æœ‰ç´¢å¼•ï¼Œæ‰€ä»¥å…¨è¡¨æ‰«æï¼Œå¹¶åœ¨primary keyä¸ŠåŠ ä¸Šæ‰€æœ‰next-key lockï¼Œæ‰€ä»¥ä¼šåœ¨é”id=2è¿™ä¸€è¡Œï¼Œè¢«é”ä½ï¼›<br>2. æ˜¯ä¸æ˜¯æ‰“é”™äº†ï¼Ÿdelete from t_my_user where type = 6; èƒ½é€šè¿‡ï¼Œæ˜¯å› ä¸ºè¿™ä¸ªè¯­å¥é”çš„æ˜¯ typeè¿™ä¸ªç´¢å¼•ä¸Š(2, suprenum)ï¼Œè¿™ä¸ªæ²¡æœ‰é”å†²çª<br>3. è¿™æ ·çš„æƒ…å†µä¸‹ä¸¤ä¸ªé”éƒ½è¿˜åœ¨ï¼Œéƒ½åœ¨äº‹åŠ¡æäº¤çš„æ—¶å€™é‡Šæ”¾ã€‚æ˜¯åœ¨â€œduplicate-key error occursâ€æ‰ä¼šå°è¯•æ·»åŠ Sé”ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547134236,"ip_address":"","comment_id":58476,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1547088295","product_id":100020801,"comment_content":"ä½ å¥½ï¼Œæƒ³é—®å‡ ä¸ªä¸æ˜äº†çš„ä¸å¹³æ—¶é‡åˆ°çš„é—®é¢˜ï¼š<br>CREATE TABLE `t_my_user` (<br>  `id` bigint(20) NOT NULL,<br>  `type` int(11) NOT NULL,<br>  `groupType` int(11) NOT NULL,<br>  PRIMARY KEY (`id`),<br>  UNIQUE KEY `unique-type` (`type`) USING BTREE<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8;<br>INSERT INTO t_my_user(`id`, `type`, `groupType`) VALUES (1, 1, 1),(2, 2, 2),(3, 3, 3);<br><br>RCäº‹åŠ¡éš”ç¦»çº§åˆ«<br>(session-A)begin;<br>(session-B)begin;<br>(session-A)update t_my_user set type = 4 where type =2;<br>(session-B) delete from t_my_user where groupType = 6;<br>ç»“æœæ˜¯session-B å¤„äºfetching rows  LOCK WAIT ç­‰å¾…session-A;<br>é—®é¢˜1ï¼šmysql deleteæ˜¯ä¼šæ‰«æè®°å½•åŠ é”ç„¶åè¿‡æ»¤é€‚é…è®°å½•å†é‡Šæ”¾Xé”å—ï¼Ÿæ˜¯ä¸€æ¬¡æ€§å…¨è¡¨å…ˆåŠ Xé”ï¼Œè¿˜æ˜¯ä¸€è¾¹é€è¡Œæ‰«æåŠ é”ï¼Œç„¶åè¿‡æ»¤ï¼Œé‡Šæ”¾ï¼Ÿä¸ºä»€ä¹ˆæ‰«æè¿‡æ»¤ä¸å…ˆåŠ Sé”ï¼Œå‘ç°æ»¡è¶³æ¡ä»¶å†å˜ä¸ºXé”å‘¢ã€‚<br>é—®é¢˜2ï¼šsession-Bæ¢æˆ(delete from t_my_user where groupType = 6;) åˆ™ä¸ä¼šé˜»å¡ï¼Œé™¤éå‘½ä¸­è®°å½•ï¼Œupdateä¸éœ€è¦åŠ é”è¿‡æ»¤ï¼Ÿ<br><br>(session-A)begin;<br>select * from t_my_user where type = 2 lock in SHARE mode;<br>update t_my_user set type = 4 where type =2;<br>ç»“æœæ˜¯é¡ºåˆ©æ‰§è¡Œï¼›<br>é—®é¢˜3ï¼šç¬¬ä¸€æ­¥è·å–äº†Sé”ï¼Œç¬¬äºŒéƒ¨è·å–äº†Xé”ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿ Sé”å‡çº§ä¸ºXé”ï¼Ÿè¿˜æ˜¯å…ˆé‡Šæ”¾Sé”ï¼Œå†è·å–Xé”ï¼Œéš¾é“ä¸ç”¨æäº¤äº‹åŠ¡ä¹Ÿå¯ä»¥é‡Šæ”¾é”å—ï¼Ÿ<br><br>(session-A)begin;<br>(session-B)begin;<br>(session-C)begin;<br>(session-A)INSERT INTO t_my_user(`id`, `type`, `groupType`) VALUES (4, 4, 4);<br>(session-B)INSERT INTO t_my_user(`id`, `type`, `groupType`) VALUES (5, 4, 4);<br>(session-C)INSERT INTO t_my_user(`id`, `type`, `groupType`) VALUES (6, 4, 4);<br>ç»“æœæ˜¯ï¼šsession-A æ‰§è¡Œ  session-B&#47;session-C Lock Mode S  Lock Wait X ,ç­‰å¾…session-Aï¼›<br>å®˜æ–¹æ–‡æ¡£æœ‰å¦‚ä¸‹è§£é‡Šâ€œIf a duplicate-key error occurs, a shared lock on the duplicate index record is set.â€ï¼›<br>ä¸ºä»€ä¹ˆè¦æ·»åŠ Sé”å‘¢ï¼Ÿæ²¡æœ‰æ‰¾åˆ°ç›¸å…³è§£é‡Šã€‚ç½‘ä¸Šæœ‰è§£é‡Šè¯´æ˜¯æ’å…¥è¯­å¥ä¼šå…ˆåœ¨å”¯ä¸€ç´¢å¼•ä¸Šæ·»åŠ Sé”è¿›è¡Œå”¯ä¸€æ€§æ£€æŸ¥ï¼Œå†å˜ä¸ºXé”ï¼Ÿ è¿˜æ˜¯åªæœ‰åœ¨â€œduplicate-key error occursâ€æ‰ä¼šå°è¯•æ·»åŠ Sé”<br>","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436079,"discussion_content":"1. å› ä¸ºgroupTypeæ²¡æœ‰ç´¢å¼•ï¼Œæ‰€ä»¥å…¨è¡¨æ‰«æï¼Œå¹¶åœ¨primary keyä¸ŠåŠ ä¸Šæ‰€æœ‰next-key lockï¼Œæ‰€ä»¥ä¼šåœ¨é”id=2è¿™ä¸€è¡Œï¼Œè¢«é”ä½ï¼›\n2. æ˜¯ä¸æ˜¯æ‰“é”™äº†ï¼Ÿdelete from t_my_user where type = 6; èƒ½é€šè¿‡ï¼Œæ˜¯å› ä¸ºè¿™ä¸ªè¯­å¥é”çš„æ˜¯ typeè¿™ä¸ªç´¢å¼•ä¸Š(2, suprenum)ï¼Œè¿™ä¸ªæ²¡æœ‰é”å†²çª\n3. è¿™æ ·çš„æƒ…å†µä¸‹ä¸¤ä¸ªé”éƒ½è¿˜åœ¨ï¼Œéƒ½åœ¨äº‹åŠ¡æäº¤çš„æ—¶å€™é‡Šæ”¾ã€‚æ˜¯åœ¨â€œduplicate-key error occursâ€æ‰ä¼šå°è¯•æ·»åŠ Sé”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547134236,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58467,"user_name":"nero","can_delete":false,"product_type":"c1","uid":1110627,"ip_address":"","ucode":"BACD4A95B5FA09","user_header":"https://static001.geekbang.org/account/avatar/00/10/f2/63/1f495e51.jpg","comment_is_top":false,"comment_ctime":1547086975,"is_pvip":false,"replies":[{"id":"21137","content":"å•ä½æ˜¯ç§’ï¼Œåº”è¯¥è¿˜å¥½å•¦^_^","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547121091,"ip_address":"","comment_id":58467,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1547086975","product_id":100020801,"comment_content":"è€å¸ˆè¯·æ•™ä¸‹ï¼šå¤‡åº“è¿æ¥åˆ°ä¸»åº“çš„æ—¶å€™ï¼Œä¼šé€šè¿‡æ‰§è¡Œ SELECT UNIX_TIMESTAMP() å‡½æ•°æ¥è·å¾—å½“å‰ä¸»åº“çš„ç³»ç»Ÿæ—¶é—´ã€‚è¿™ä¸ªæ—¶é—´ä¹Ÿä¸æ˜¯å¾ˆå‡†ç¡®å§ï¼Œæ²¡æœ‰ç½‘ç»œå»¶æ—¶å—<br>","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436074,"discussion_content":"å•ä½æ˜¯ç§’ï¼Œåº”è¯¥è¿˜å¥½å•¦^_^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547121091,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58449,"user_name":"æ˜¥å›°ç§‹ä¹å¤æ‰“ç›¹","can_delete":false,"product_type":"c1","uid":1210807,"ip_address":"","ucode":"CCC558EF504F4B","user_header":"https://static001.geekbang.org/account/avatar/00/12/79/b7/989824f7.jpg","comment_is_top":false,"comment_ctime":1547084940,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1547084940","product_id":100020801,"comment_content":"(Master_Log_file, Read_Master_Log_Pos): Coordinates in the master binary log indicating how far the slave I&#47;O thread has read events from that log.\t<br>(Relay_Master_Log_File, Exec_Master_Log_Pos): Coordinates in the master binary log indicating how far the slave SQL thread has executed events received from that log.<br>(Relay_Log_File, Relay_Log_Pos): Coordinates in the slave relay log indicating how far the slave SQL thread has executed the relay log. These correspond to the preceding coordinates, but are<br>expressed in slave relay log coordinates rather than master binary log coordinates.\t<br>æ¸…æ¥šäº†","like_count":0},{"had_liked":false,"id":58371,"user_name":"ProgramGeek","can_delete":false,"product_type":"c1","uid":1008217,"ip_address":"","ucode":"3F0E3963C4FB57","user_header":"https://static001.geekbang.org/account/avatar/00/0f/62/59/a01a5ddd.jpg","comment_is_top":false,"comment_ctime":1547046065,"is_pvip":false,"replies":[{"id":"21037","content":"ä½ æŠŠå¤ç°æ­¥éª¤å†™ä¸‹å“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547064218,"ip_address":"","comment_id":58371,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1547046065","product_id":100020801,"comment_content":"åœ¨åˆ†åŒºè¡¨é‡ŒKEYåˆ†åŒºä¸­ä½¿ç”¨å…³é”®å­—LINEARå…·æœ‰åŒæ ·çš„ä½œç”¨ï¼Œä¹Ÿå°±æ˜¯LINEAR KEYåˆ†åŒºæ—¶ï¼Œåˆ†åŒºçš„ç¼–å·æ˜¯é€šè¿‡2çš„å¹‚ç®—æ³•å¾—åˆ°çš„ï¼Œè€Œä¸æ˜¯é€šè¿‡å–æ¨¡å¾—åˆ°çš„ã€‚ä¸ºä»€ä¹ˆå¥‡æ•°åˆ†åŒºä¸èƒ½æ’å…¥æ•°æ®å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436031,"discussion_content":"ä½ æŠŠå¤ç°æ­¥éª¤å†™ä¸‹å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547064218,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58344,"user_name":"ProgramGeek","can_delete":false,"product_type":"c1","uid":1008217,"ip_address":"","ucode":"3F0E3963C4FB57","user_header":"https://static001.geekbang.org/account/avatar/00/0f/62/59/a01a5ddd.jpg","comment_is_top":false,"comment_ctime":1547041202,"is_pvip":false,"replies":[{"id":"21021","content":"é¢ï¼Œè¿™ä¸ªè¦çœ‹æŠ¥ä»€ä¹ˆé”™å“¦","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547044594,"ip_address":"","comment_id":58344,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1547041202","product_id":100020801,"comment_content":"å’¨è¯¢ä¸ªé—®é¢˜ï¼Œå°±æ˜¯MySQLå¥‡æ•°åˆ†åŒºæ— æ³•æ’å…¥æ•°æ®ï¼Œå¶æ•°åˆ†åŒºèƒ½å¤Ÿæ’å…¥æ•°æ®ï¼Œå¯èƒ½æ˜¯ç”±äºä»€ä¹ˆåŸå› å¯¼è‡´çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436022,"discussion_content":"é¢ï¼Œè¿™ä¸ªè¦çœ‹æŠ¥ä»€ä¹ˆé”™å“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547044594,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58315,"user_name":"å¼ æ°¸å¿—","can_delete":false,"product_type":"c1","uid":1208727,"ip_address":"","ucode":"E54B75EF3F63B3","user_header":"https://static001.geekbang.org/account/avatar/00/12/71/97/f1a3d398.jpg","comment_is_top":false,"comment_ctime":1547035351,"is_pvip":false,"replies":[{"id":"21012","content":"åé¢æœ‰ä¸€ç¯‡ä¼šè®²åˆ°ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547043015,"ip_address":"","comment_id":58315,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1547035351","product_id":100020801,"comment_content":"ä¸»åº“çš„è¯·æ±‚æ˜¯å¤šç”¨æˆ·å¹¶å‘å¤šçº¿ç¨‹æ‰§è¡Œï¼Œå½“ä¸»åº“æ¯”è¾ƒç¹å¿™ï¼Œç”±äºä»åº“æ˜¯å½“çº¿ç¨‹æ‰§è¡Œï¼Œæ•ˆç‡æ²¡æœ‰ä¸»åº“å¤šçº¿ç¨‹é«˜ï¼Œå°±ä¼šå‡ºç°å»¶è¿Ÿã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436008,"discussion_content":"åé¢æœ‰ä¸€ç¯‡ä¼šè®²åˆ°ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547043015,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58239,"user_name":"inh556","can_delete":false,"product_type":"c1","uid":1247111,"ip_address":"","ucode":"D676205E0790D5","user_header":"https://static001.geekbang.org/account/avatar/00/13/07/87/ca681a71.jpg","comment_is_top":false,"comment_ctime":1547016078,"is_pvip":false,"replies":[{"id":"20976","content":"æ˜¯è¯´åŒä¸€ä¸ªè¡¨çš„åŒä¸€ä¸ªå­—æ®µï¼ŸåŒä¸€ä¸ªå­—æ®µåªä¼šæœ‰ä¸€ç§å®šä¹‰å‘€","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547018010,"ip_address":"","comment_id":58239,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1547016078","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå¦‚æœä¸€ä¸ªtableéƒ½æœ‰ä¸€ä¸ªå«åšidçš„å€¼ï¼Œä¼šå‡ºç°å€¼å¾—ç±»å‹ä¸ä¸€è‡´å—ï¼Ÿæ¯”å¦‚æœ‰çš„idæ˜¯æ•´æ•° 1ï¼Œ è€Œæœ‰çš„æ˜¯å­—ç¬¦ä¸²â€˜ 1â€™ã€‚ ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿè¿™ä¸ªé—®é¢˜å¯¹æ•°æ®å­˜å‚¨å’ŒæŸ¥è¯¢ç»“æœæœ‰å“ªäº›å½±å“ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435967,"discussion_content":"æ˜¯è¯´åŒä¸€ä¸ªè¡¨çš„åŒä¸€ä¸ªå­—æ®µï¼ŸåŒä¸€ä¸ªå­—æ®µåªä¼šæœ‰ä¸€ç§å®šä¹‰å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547018010,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}