{"id":416397,"title":"ç‰¹åˆ«æ”¾é€ | Go Modulesä¾èµ–åŒ…ç®¡ç†å…¨è®²","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å­”ä»¤é£ã€‚ä»Šå¤©æˆ‘ä»¬æ›´æ–°ä¸€æœŸç‰¹åˆ«æ”¾é€ä½œä¸ºåŠ é¤ã€‚</p><p>åœ¨Goé¡¹ç›®å¼€å‘ä¸­ï¼Œä¾èµ–åŒ…ç®¡ç†æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„å†…å®¹ï¼Œä¾èµ–åŒ…å¤„ç†ä¸å¥½ï¼Œå°±ä¼šå¯¼è‡´ç¼–è¯‘å¤±è´¥ã€‚è€Œä¸”Goçš„ä¾èµ–åŒ…ç®¡ç†æœ‰ä¸€å®šçš„å¤æ‚åº¦ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬æœ‰å¿…è¦ç³»ç»Ÿå­¦ä¹ ä¸‹Goçš„ä¾èµ–åŒ…ç®¡ç†å·¥å…·ã€‚</p><p>è¿™ä¸€è®²ï¼Œæˆ‘ä¼šé¦–å…ˆä»‹ç»ä¸‹Goä¾èµ–åŒ…ç®¡ç†å·¥å…·çš„å†å²ï¼Œå¹¶è¯¦ç»†ä»‹ç»ä¸‹ç›®å‰å®˜æ–¹æ¨èçš„ä¾èµ–åŒ…ç®¡ç†æ–¹æ¡ˆGo Modulesã€‚Go Modulesä¸»è¦åŒ…æ‹¬äº† <code>go mod</code> å‘½ä»¤è¡Œå·¥å…·ã€æ¨¡å—ä¸‹è½½æœºåˆ¶ï¼Œä»¥åŠä¸¤ä¸ªæ ¸å¿ƒæ–‡ä»¶go.modå’Œgo.sumã€‚å¦å¤–ï¼ŒGo Modulesä¹Ÿæä¾›äº†ä¸€äº›ç¯å¢ƒå˜é‡ï¼Œç”¨æ¥æ§åˆ¶Go Modulesçš„è¡Œä¸ºã€‚è¿™ä¸€è®²ï¼Œæˆ‘ä¼šåˆ†åˆ«ä»‹ç»ä¸‹è¿™äº›å†…å®¹ã€‚</p><p>åœ¨æ­£å¼å¼€å§‹è®²è§£è¿™äº›å†…å®¹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥å¯¹Go Modulesæœ‰ä¸ªåŸºæœ¬çš„äº†è§£ã€‚</p><h2>Go Modulesç®€ä»‹</h2><p>Go Modulesæ˜¯Goå®˜æ–¹æ¨å‡ºçš„ä¸€ä¸ªGoåŒ…ç®¡ç†æ–¹æ¡ˆï¼ŒåŸºäºvgoæ¼”è¿›è€Œæ¥ï¼Œå…·æœ‰ä¸‹é¢è¿™å‡ ä¸ªç‰¹æ€§ï¼š</p><ul>\n<li>å¯ä»¥ä½¿åŒ…çš„ç®¡ç†æ›´åŠ ç®€å•ã€‚</li>\n<li>æ”¯æŒç‰ˆæœ¬ç®¡ç†ã€‚</li>\n<li>å…è®¸åŒä¸€ä¸ªæ¨¡å—å¤šä¸ªç‰ˆæœ¬å…±å­˜ã€‚</li>\n<li>å¯ä»¥æ ¡éªŒä¾èµ–åŒ…çš„å“ˆå¸Œå€¼ï¼Œç¡®ä¿åŒ…çš„ä¸€è‡´æ€§ï¼Œå¢åŠ å®‰å…¨æ€§ã€‚</li>\n<li>å†…ç½®åœ¨å‡ ä¹æ‰€æœ‰çš„goå‘½ä»¤ä¸­ï¼ŒåŒ…æ‹¬<code>go get</code>ã€<code>go build</code>ã€<code>go install</code>ã€<code>go run</code>ã€<code>go test</code>ã€<code>go list</code>ç­‰å‘½ä»¤ã€‚</li>\n<li>å…·æœ‰Global Cachingç‰¹æ€§ï¼Œä¸åŒé¡¹ç›®çš„ç›¸åŒæ¨¡å—ç‰ˆæœ¬ï¼Œåªä¼šåœ¨æœåŠ¡å™¨ä¸Šç¼“å­˜ä¸€ä»½ã€‚</li>\n</ul><!-- [[[read_end]]] --><p>åœ¨Go1.14ç‰ˆæœ¬ä»¥åŠä¹‹åçš„ç‰ˆæœ¬ï¼ŒGoå®˜æ–¹å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨Go Modulesã€‚å› æ­¤ï¼Œä»¥åçš„GoåŒ…ç®¡ç†æ–¹æ¡ˆä¼šé€æ¸ç»Ÿä¸€åˆ°Go Modulesã€‚ä¸Go Modulesç›¸å…³çš„æ¦‚å¿µå¾ˆå¤šï¼Œæˆ‘åœ¨è¿™é‡ŒæŠŠå®ƒä»¬æ€»ç»“ä¸ºâ€œ6-2-2-1-1â€ï¼Œè¿™ä¸€è®²åé¢è¿˜ä¼šè¯¦ç»†ä»‹ç»æ¯ä¸ªæ¦‚å¿µã€‚</p><ul>\n<li>å…­ä¸ªç¯å¢ƒå˜é‡ï¼š<code>GO111MODULE</code>ã€<code>GOPROXY</code>ã€<code>GONOPROXY</code>ã€<code>GOSUMDB</code>ã€<code>GONOSUMDB</code>ã€<code>GOPRIVATE</code>ã€‚</li>\n<li>ä¸¤ä¸ªæ¦‚å¿µï¼šGo module proxyå’ŒGo checksum databaseã€‚</li>\n<li>ä¸¤ä¸ªä¸»è¦æ–‡ä»¶ï¼šgo.modå’Œgo.sumã€‚</li>\n<li>ä¸€ä¸ªä¸»è¦ç®¡ç†å‘½ä»¤ï¼šgo modã€‚</li>\n<li>ä¸€ä¸ªbuild flagã€‚</li>\n</ul><h2>GoåŒ…ç®¡ç†çš„å†å²</h2><p>åœ¨å…·ä½“è®²è§£Go Modulesä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹GoåŒ…ç®¡ç†çš„å†å²ã€‚ä»Goæ¨å‡ºä¹‹åï¼Œå› ä¸ºæ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€çš„å®˜æ–¹æ–¹æ¡ˆï¼Œæ‰€ä»¥å‡ºç°äº†å¾ˆå¤šç§GoåŒ…ç®¡ç†æ–¹æ¡ˆï¼Œæ¯”è¾ƒæ··ä¹±ï¼Œä¹Ÿæ²¡æœ‰å½»åº•è§£å†³GoåŒ…ç®¡ç†çš„ä¸€äº›é—®é¢˜ã€‚GoåŒ…ç®¡ç†çš„å†å²å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/34/e5/348d772b26940f721c6fb907f6833be5.jpg?wh=2248x739\" alt=\"\"></p><p>è¿™å¼ å›¾å±•ç¤ºäº†Goä¾èµ–åŒ…ç®¡ç†å·¥å…·ç»å†çš„å‡ ä¸ªå‘å±•é˜¶æ®µï¼Œæ¥ä¸‹æ¥æˆ‘ä¼šæŒ‰æ—¶é—´é¡ºåºé‡ç‚¹ä»‹ç»ä¸‹å…¶ä¸­çš„äº”ä¸ªé˜¶æ®µã€‚</p><h3><strong>Go1.5ç‰ˆæœ¬å‰ï¼šGOPATH</strong></h3><p>åœ¨Go1.5ç‰ˆæœ¬ä¹‹å‰ï¼Œæ²¡æœ‰ç‰ˆæœ¬æ§åˆ¶ï¼Œæ‰€æœ‰çš„ä¾èµ–åŒ…éƒ½æ”¾åœ¨GOPATHä¸‹ã€‚é‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œæ— æ³•å®ç°åŒ…çš„å¤šç‰ˆæœ¬ç®¡ç†ï¼Œå¹¶ä¸”åŒ…çš„ä½ç½®åªèƒ½å±€é™åœ¨GOPATHç›®å½•ä¸‹ã€‚å¦‚æœAé¡¹ç›®å’ŒBé¡¹ç›®ç”¨åˆ°äº†åŒä¸€ä¸ªGoåŒ…çš„ä¸åŒç‰ˆæœ¬ï¼Œè¿™æ—¶å€™åªèƒ½ç»™æ¯ä¸ªé¡¹ç›®è®¾ç½®ä¸€ä¸ªGOPATHï¼Œå°†å¯¹åº”ç‰ˆæœ¬çš„åŒ…æ”¾åœ¨å„è‡ªçš„GOPATHç›®å½•ä¸‹ï¼Œåˆ‡æ¢é¡¹ç›®ç›®å½•æ—¶ä¹Ÿéœ€è¦åˆ‡æ¢GOPATHã€‚è¿™äº›éƒ½å¢åŠ äº†å¼€å‘å’Œå®ç°çš„å¤æ‚åº¦ã€‚</p><h3><strong>Go1.5ç‰ˆæœ¬ï¼šVendoring</strong></h3><p>Go1.5æ¨å‡ºäº†vendoræœºåˆ¶ï¼Œå¹¶åœ¨Go1.6ä¸­é»˜è®¤å¯ç”¨ã€‚åœ¨è¿™ä¸ªæœºåˆ¶ä¸­ï¼Œæ¯ä¸ªé¡¹ç›®çš„æ ¹ç›®å½•éƒ½å¯ä»¥æœ‰ä¸€ä¸ªvendorç›®å½•ï¼Œé‡Œé¢å­˜æ”¾äº†è¯¥é¡¹ç›®çš„Goä¾èµ–åŒ…ã€‚åœ¨ç¼–è¯‘Goæºç æ—¶ï¼ŒGoä¼˜å…ˆä»é¡¹ç›®æ ¹ç›®å½•çš„vendorç›®å½•æŸ¥æ‰¾ä¾èµ–ï¼›å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå†å»GOPATHä¸‹çš„vendorç›®å½•ä¸‹æ‰¾ï¼›å¦‚æœè¿˜æ²¡æœ‰æ‰¾åˆ°ï¼Œå°±å»GOPATHä¸‹æ‰¾ã€‚</p><p>è¿™ç§æ–¹å¼è§£å†³äº†å¤šGOPATHçš„é—®é¢˜ï¼Œä½†æ˜¯éšç€é¡¹ç›®ä¾èµ–çš„å¢å¤šï¼Œvendorç›®å½•ä¼šè¶Šæ¥è¶Šå¤§ï¼Œé€ æˆæ•´ä¸ªé¡¹ç›®ä»“åº“è¶Šæ¥è¶Šå¤§ã€‚åœ¨vendoræœºåˆ¶ä¸‹ï¼Œä¸€ä¸ªä¸­å‹é¡¹ç›®çš„vendorç›®å½•æœ‰å‡ ç™¾Mçš„å¤§å°ä¸€ç‚¹ä¹Ÿä¸å¥‡æ€ªã€‚</p><h3>â€œç™¾èŠ±é½æ”¾â€ï¼šå¤šç§Goä¾èµ–åŒ…ç®¡ç†å·¥å…·å‡ºç°</h3><p>è¿™ä¸ªé˜¶æ®µï¼Œç¤¾åŒºä¹Ÿå‡ºç°äº†å¾ˆå¤šGoä¾èµ–åŒ…ç®¡ç†çš„å·¥å…·ï¼Œè¿™é‡Œæˆ‘ä»‹ç»ä¸‰ä¸ªæ¯”è¾ƒæœ‰åçš„ã€‚</p><ul>\n<li>Godepï¼šè§£å†³åŒ…ä¾èµ–çš„ç®¡ç†å·¥å…·ï¼ŒDockerã€Kubernetesã€CoreOSç­‰Goé¡¹ç›®éƒ½æ›¾ç”¨è¿‡godepæ¥ç®¡ç†å…¶ä¾èµ–ã€‚</li>\n<li>Govendorï¼šå®ƒçš„åŠŸèƒ½æ¯”Godepå¤šä¸€äº›ï¼Œé€šè¿‡vendorç›®å½•ä¸‹çš„<code>vendor.json</code>æ–‡ä»¶æ¥è®°å½•ä¾èµ–åŒ…çš„ç‰ˆæœ¬ã€‚</li>\n<li>Glideï¼šç›¸å¯¹å®Œå–„çš„åŒ…ç®¡ç†å·¥å…·ï¼Œé€šè¿‡<code>glide.yaml</code>è®°å½•ä¾èµ–ä¿¡æ¯ï¼Œé€šè¿‡<code>glide.lock</code>è¿½è¸ªæ¯ä¸ªåŒ…çš„å…·ä½“ä¿®æ”¹ã€‚</li>\n</ul><p>Govendorã€Glideéƒ½æ˜¯åœ¨Goæ”¯æŒvendorä¹‹åæ¨å‡ºçš„å·¥å…·ï¼ŒGodepåœ¨Goæ”¯æŒvendorä¹‹å‰ä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚Goæ”¯æŒvendorä¹‹åï¼ŒGodepä¹Ÿæ”¹ç”¨äº†vendoræ¨¡å¼ã€‚</p><h3>Go1.9ç‰ˆæœ¬ï¼šDep</h3><p>å¯¹äºä»0æ„å»ºé¡¹ç›®çš„æ–°ç”¨æˆ·æ¥è¯´ï¼ŒGlideåŠŸèƒ½è¶³å¤Ÿï¼Œæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ä¸è¿‡ï¼ŒGolang ä¾èµ–ç®¡ç†å·¥å…·æ··ä¹±çš„å±€é¢æœ€ç»ˆç”±å®˜æ–¹æ¥ç»ˆç»“äº†ï¼šGolangå®˜æ–¹æ¥çº³äº†ç”±ç¤¾åŒºç»„ç»‡åˆä½œå¼€å‘çš„Depï¼Œä½œä¸ºofficial experimentã€‚åœ¨ç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´é‡Œï¼ŒDepä½œä¸ºæ ‡å‡†ï¼Œæˆä¸ºäº†äº‹å®ä¸Šçš„å®˜æ–¹åŒ…ç®¡ç†å·¥å…·ã€‚</p><p>å› ä¸ºDepå·²ç»æˆä¸ºäº†official experimentçš„è¿‡å»æ—¶ï¼Œç°åœ¨æˆ‘ä»¬å°±ä¸å¿…å†å»æ·±ç©¶äº†ï¼Œè®©æˆ‘ä»¬ç›´æ¥å»äº†è§£è°æ‰æ˜¯æœªæ¥çš„official experimentå§ã€‚</p><h3>Go1.11ç‰ˆæœ¬ä¹‹åï¼šGo Modules</h3><p>Go1.11ç‰ˆæœ¬æ¨å‡ºäº†Go Modulesæœºåˆ¶ï¼ŒGo ModulesåŸºäºvgoæ¼”å˜è€Œæ¥ï¼Œæ˜¯Golangå®˜æ–¹çš„åŒ…ç®¡ç†å·¥å…·ã€‚åœ¨Go1.13ç‰ˆæœ¬ï¼ŒGoè¯­è¨€å°†Go Modulesè®¾ç½®ä¸ºé»˜è®¤çš„Goç®¡ç†å·¥å…·ï¼›åœ¨Go1.14ç‰ˆæœ¬ï¼ŒGoè¯­è¨€å®˜æ–¹æ­£å¼æ¨èåœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨Go Modulesï¼Œå¹¶ä¸”é¼“åŠ±æ‰€æœ‰ç”¨æˆ·ä»å…¶ä»–çš„ä¾èµ–ç®¡ç†å·¥å…·è¿ç§»è¿‡æ¥ã€‚è‡³æ­¤ï¼ŒGoç»ˆäºæœ‰äº†ä¸€ä¸ªç¨³å®šçš„ã€å®˜æ–¹çš„GoåŒ…ç®¡ç†å·¥å…·ã€‚</p><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»‹ç»äº†Goä¾èµ–åŒ…ç®¡ç†å·¥å…·çš„å†å²ï¼Œä¸‹é¢å†æ¥ä»‹ç»ä¸‹Go Modulesçš„ä½¿ç”¨æ–¹æ³•ã€‚</p><h2>åŒ…ï¼ˆpackageï¼‰å’Œæ¨¡å—ï¼ˆmoduleï¼‰</h2><p>Goç¨‹åºè¢«ç»„ç»‡åˆ°GoåŒ…ä¸­ï¼ŒGoåŒ…æ˜¯åŒä¸€ç›®å½•ä¸­ä¸€èµ·ç¼–è¯‘çš„Goæºæ–‡ä»¶çš„é›†åˆã€‚åœ¨ä¸€ä¸ªæºæ–‡ä»¶ä¸­å®šä¹‰çš„å‡½æ•°ã€ç±»å‹ã€å˜é‡å’Œå¸¸é‡ï¼Œå¯¹äºåŒä¸€åŒ…ä¸­çš„æ‰€æœ‰å…¶ä»–æºæ–‡ä»¶å¯è§ã€‚</p><p>æ¨¡å—æ˜¯å­˜å‚¨åœ¨æ–‡ä»¶æ ‘ä¸­çš„GoåŒ…çš„é›†åˆï¼Œå¹¶ä¸”æ–‡ä»¶æ ‘æ ¹ç›®å½•æœ‰go.modæ–‡ä»¶ã€‚go.modæ–‡ä»¶å®šä¹‰äº†æ¨¡å—çš„åç§°åŠå…¶ä¾èµ–åŒ…ï¼Œæ¯ä¸ªä¾èµ–åŒ…éƒ½éœ€è¦æŒ‡å®šå¯¼å…¥è·¯å¾„å’Œè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆSemantic Versioningï¼‰ï¼Œé€šè¿‡å¯¼å…¥è·¯å¾„å’Œè¯­ä¹‰åŒ–ç‰ˆæœ¬å‡†ç¡®åœ°æè¿°ä¸€ä¸ªä¾èµ–ã€‚</p><p>è¿™é‡Œè¦æ³¨æ„ï¼Œ<code>\"module\" != \"package\"</code>ï¼Œæ¨¡å—å’ŒåŒ…çš„å…³ç³»æ›´åƒæ˜¯é›†åˆå’Œå…ƒç´ çš„å…³ç³»ï¼ŒåŒ…å±äºæ¨¡å—ï¼Œä¸€ä¸ªæ¨¡å—æ˜¯é›¶ä¸ªæˆ–è€…å¤šä¸ªåŒ…çš„é›†åˆã€‚ä¸‹é¢çš„ä»£ç æ®µï¼Œå¼•ç”¨äº†ä¸€äº›åŒ…ï¼š</p><pre><code class=\"language-go\">import (\n    // Go æ ‡å‡†åŒ…\n    \"fmt\"\n\n    // ç¬¬ä¸‰æ–¹åŒ…\n    \"github.com/spf13/pflag\"\n\n    // åŒ¿ååŒ…\n     _ \"github.com/jinzhu/gorm/dialects/mysql\"\n\n     // å†…éƒ¨åŒ…\n    \"github.com/marmotedu/iam/internal/apiserver\"\n)\n</code></pre><p>è¿™é‡Œçš„<code>fmt</code>ã€<code>github.com/spf13/pflag</code>å’Œ<code>github.com/marmotedu/iam/internal/apiserver</code>éƒ½æ˜¯GoåŒ…ã€‚Goä¸­æœ‰4ç§ç±»å‹çš„åŒ…ï¼Œä¸‹é¢æˆ‘æ¥åˆ†åˆ«ä»‹ç»ä¸‹ã€‚</p><ul>\n<li>Goæ ‡å‡†åŒ…ï¼šåœ¨Goæºç ç›®å½•ä¸‹ï¼ŒéšGoä¸€èµ·å‘å¸ƒçš„åŒ…ã€‚</li>\n<li>ç¬¬ä¸‰æ–¹åŒ…ï¼šç¬¬ä¸‰æ–¹æä¾›çš„åŒ…ï¼Œæ¯”å¦‚æ¥è‡ªäºgithub.comçš„åŒ…ã€‚</li>\n<li>åŒ¿ååŒ…ï¼šåªå¯¼å…¥è€Œä¸ä½¿ç”¨çš„åŒ…ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªæ˜¯æƒ³ä½¿ç”¨å¯¼å…¥åŒ…äº§ç”Ÿçš„å‰¯ä½œç”¨ï¼Œå³å¼•ç”¨åŒ…çº§åˆ«çš„å˜é‡ã€å¸¸é‡ã€ç»“æ„ä½“ã€æ¥å£ç­‰ï¼Œä»¥åŠæ‰§è¡Œå¯¼å…¥åŒ…çš„<code>init()</code>å‡½æ•°ã€‚</li>\n<li>å†…éƒ¨åŒ…ï¼šé¡¹ç›®å†…éƒ¨çš„åŒ…ï¼Œä½äºé¡¹ç›®ç›®å½•ä¸‹ã€‚</li>\n</ul><p>ä¸‹é¢çš„ç›®å½•å®šä¹‰äº†ä¸€ä¸ªæ¨¡å—ï¼š</p><pre><code class=\"language-bash\">$ ls hello/\ngo.mod  go.sum  hello.go  hello_test.go  world\n</code></pre><p>helloç›®å½•ä¸‹æœ‰ä¸€ä¸ªgo.modæ–‡ä»¶ï¼Œè¯´æ˜äº†è¿™æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œè¯¥æ¨¡å—åŒ…å«äº†helloåŒ…å’Œä¸€ä¸ªå­åŒ…worldã€‚è¯¥ç›®å½•ä¸­ä¹ŸåŒ…å«äº†ä¸€ä¸ªgo.sumæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¾›Goå‘½ä»¤åœ¨æ„å»ºæ—¶åˆ¤æ–­ä¾èµ–åŒ…æ˜¯å¦åˆæ³•ã€‚è¿™é‡Œä½ å…ˆç®€å•äº†è§£ä¸‹ï¼Œæˆ‘ä¼šåœ¨ä¸‹é¢è®²go.sumæ–‡ä»¶çš„æ—¶å€™è¯¦ç»†ä»‹ç»ã€‚</p><h2>Go Modules å‘½ä»¤</h2><p>Go Modulesçš„ç®¡ç†å‘½ä»¤ä¸º<code>go mod</code>ï¼Œ<code>go mod</code>æœ‰å¾ˆå¤šå­å‘½ä»¤ï¼Œä½ å¯ä»¥é€šè¿‡<code>go help mod</code>æ¥è·å–æ‰€æœ‰çš„å‘½ä»¤ã€‚ä¸‹é¢æˆ‘æ¥å…·ä½“ä»‹ç»ä¸‹è¿™äº›å‘½ä»¤ã€‚</p><ul>\n<li>downloadï¼šä¸‹è½½go.modæ–‡ä»¶ä¸­è®°å½•çš„æ‰€æœ‰ä¾èµ–åŒ…ã€‚</li>\n<li>editï¼šç¼–è¾‘go.modæ–‡ä»¶ã€‚</li>\n<li>graphï¼šæŸ¥çœ‹ç°æœ‰çš„ä¾èµ–ç»“æ„ã€‚</li>\n<li>initï¼šæŠŠå½“å‰ç›®å½•åˆå§‹åŒ–ä¸ºä¸€ä¸ªæ–°æ¨¡å—ã€‚</li>\n<li>tidyï¼šæ·»åŠ ä¸¢å¤±çš„æ¨¡å—ï¼Œå¹¶ç§»é™¤æ— ç”¨çš„æ¨¡å—ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒGoä¸ä¼šç§»é™¤go.modæ–‡ä»¶ä¸­çš„æ— ç”¨ä¾èµ–ã€‚å½“ä¾èµ–åŒ…ä¸å†ä½¿ç”¨äº†ï¼Œå¯ä»¥ä½¿ç”¨<code>go mod tidy</code>å‘½ä»¤æ¥æ¸…é™¤å®ƒã€‚</li>\n<li>vendorï¼šå°†æ‰€æœ‰ä¾èµ–åŒ…å­˜åˆ°å½“å‰ç›®å½•ä¸‹çš„vendorç›®å½•ä¸‹ã€‚</li>\n<li>verifyï¼šæ£€æŸ¥å½“å‰æ¨¡å—çš„ä¾èµ–æ˜¯å¦å·²ç»å­˜å‚¨åœ¨æœ¬åœ°ä¸‹è½½çš„æºä»£ç ç¼“å­˜ä¸­ï¼Œä»¥åŠæ£€æŸ¥ä¸‹è½½åæ˜¯å¦æœ‰ä¿®æ”¹ã€‚</li>\n<li>whyï¼šæŸ¥çœ‹ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–æŸæ¨¡å—ã€‚</li>\n</ul><h2>Go Moduleså¼€å…³</h2><p>å¦‚æœè¦ä½¿ç”¨Go Modulesï¼Œåœ¨Go1.14ä¸­ä»ç„¶éœ€è¦ç¡®ä¿Go Modulesç‰¹æ€§å¤„åœ¨æ‰“å¼€çŠ¶æ€ã€‚ä½ å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡GO111MODULEæ¥æ‰“å¼€æˆ–è€…å…³é—­ã€‚GO111MODULEæœ‰3ä¸ªå€¼ï¼Œæˆ‘æ¥åˆ†åˆ«ä»‹ç»ä¸‹ã€‚</p><ul>\n<li>autoï¼šåœ¨Go1.14ç‰ˆæœ¬ä¸­æ˜¯é»˜è®¤å€¼ï¼Œåœ¨<code>$GOPATH/src</code>ä¸‹ï¼Œä¸”æ²¡æœ‰åŒ…å«go.modæ—¶åˆ™å…³é—­Go Modulesï¼Œå…¶ä»–æƒ…å†µä¸‹éƒ½å¼€å¯Go Modulesã€‚</li>\n<li>onï¼šå¯ç”¨Go Modulesï¼ŒGo1.14ç‰ˆæœ¬æ¨èæ‰“å¼€ï¼Œæœªæ¥ç‰ˆæœ¬ä¼šè®¾ä¸ºé»˜è®¤å€¼ã€‚</li>\n<li>offï¼šå…³é—­Go Modulesï¼Œä¸æ¨èã€‚</li>\n</ul><p>æ‰€ä»¥ï¼Œå¦‚æœè¦æ‰“å¼€Go Modulesï¼Œå¯ä»¥è®¾ç½®ç¯å¢ƒå˜é‡<code>export GO111MODULE=on</code>æˆ–è€…<code>export GO111MODULE=auto</code>ï¼Œå»ºè®®ç›´æ¥è®¾ç½®<code>export GO111MODULE=on</code>ã€‚</p><p>Go Modulesä½¿ç”¨è¯­ä¹‰åŒ–çš„ç‰ˆæœ¬å·ï¼Œæˆ‘ä»¬å¼€å‘çš„æ¨¡å—åœ¨å‘å¸ƒç‰ˆæœ¬æ‰“tagçš„æ—¶å€™ï¼Œè¦æ³¨æ„éµå¾ªè¯­ä¹‰åŒ–çš„ç‰ˆæœ¬è¦æ±‚ï¼Œä¸éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒçš„ç‰ˆæœ¬å·éƒ½æ˜¯æ— æ³•æ‹‰å–çš„ã€‚</p><h2>æ¨¡å—ä¸‹è½½</h2><p>åœ¨æ‰§è¡Œ <code>go get</code> ç­‰å‘½ä»¤æ—¶ï¼Œä¼šè‡ªåŠ¨ä¸‹è½½æ¨¡å—ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šä»‹ç»ä¸‹goå‘½ä»¤æ˜¯å¦‚ä½•ä¸‹è½½æ¨¡å—çš„ã€‚ä¸»è¦æœ‰ä¸‰ç§ä¸‹è½½æ–¹å¼ï¼š</p><ul>\n<li>é€šè¿‡ä»£ç†ä¸‹è½½ï¼›</li>\n<li>æŒ‡å®šç‰ˆæœ¬å·ä¸‹è½½ï¼›</li>\n<li>æŒ‰æœ€å°ç‰ˆæœ¬ä¸‹è½½ã€‚</li>\n</ul><h3>é€šè¿‡ä»£ç†æ¥ä¸‹è½½æ¨¡å—</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒGoå‘½ä»¤ä»VCSï¼ˆVersion Control Systemï¼Œç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼‰ç›´æ¥ä¸‹è½½æ¨¡å—ï¼Œä¾‹å¦‚ GitHubã€Bitbucketã€Bazaarã€Mercurialæˆ–è€…SVNã€‚</p><p>åœ¨Go 1.13ç‰ˆæœ¬ï¼Œå¼•å…¥äº†ä¸€ä¸ªæ–°çš„ç¯å¢ƒå˜é‡GOPROXYï¼Œç”¨äºè®¾ç½®Goæ¨¡å—ä»£ç†ï¼ˆGo module proxyï¼‰ã€‚æ¨¡å—ä»£ç†å¯ä»¥ä½¿Goå‘½ä»¤ç›´æ¥ä»ä»£ç†æœåŠ¡å™¨ä¸‹è½½æ¨¡å—ã€‚GOPROXYé»˜è®¤å€¼ä¸º<code>https://proxy.golang.org,direct</code>ï¼Œä»£ç†æœåŠ¡å™¨å¯ä»¥æŒ‡å®šå¤šä¸ªï¼Œä¸­é—´ç”¨é€—å·éš”å¼€ï¼Œä¾‹å¦‚<code>GOPROXY=https://proxy.golang.org,https://goproxy.cn,direct</code>ã€‚å½“ä¸‹è½½æ¨¡å—æ—¶ï¼Œä¼šä¼˜å…ˆä»æŒ‡å®šçš„ä»£ç†æœåŠ¡å™¨ä¸Šä¸‹è½½ã€‚å¦‚æœä¸‹è½½å¤±è´¥ï¼Œæ¯”å¦‚ä»£ç†æœåŠ¡å™¨ä¸å¯è®¿é—®ï¼Œæˆ–è€…HTTPè¿”å›ç ä¸º<code>404</code>æˆ–<code>410</code>ï¼ŒGoå‘½ä»¤ä¼šå°è¯•ä»ä¸‹ä¸€ä¸ªä»£ç†æœåŠ¡å™¨ä¸‹è½½ã€‚</p><p>directæ˜¯ä¸€ä¸ªç‰¹æ®ŠæŒ‡ç¤ºç¬¦ï¼Œç”¨æ¥æŒ‡ç¤ºGoå›æºåˆ°æ¨¡å—çš„æºåœ°å€(æ¯”å¦‚GitHubç­‰)å»æŠ“å– ï¼Œå½“å€¼åˆ—è¡¨ä¸­ä¸Šä¸€ä¸ªGo module proxyè¿”å›404æˆ–410ï¼ŒGoä¼šè‡ªåŠ¨å°è¯•åˆ—è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªï¼Œé‡è§directæ—¶å›æºï¼Œé‡è§EOFæ—¶ç»ˆæ­¢ï¼Œå¹¶æŠ›å‡ºç±»ä¼¼<code>invalid version: unknown revision...</code>çš„é”™è¯¯ã€‚ å¦‚æœ<code>GOPROXY=off</code>ï¼Œåˆ™Goå‘½ä»¤ä¸ä¼šå°è¯•ä»ä»£ç†æœåŠ¡å™¨ä¸‹è½½æ¨¡å—ã€‚</p><p>å¼•å…¥Go module proxyä¼šå¸¦æ¥å¾ˆå¤šå¥½å¤„ï¼Œæ¯”å¦‚ï¼š</p><ul>\n<li>å›½å†…å¼€å‘è€…æ— æ³•è®¿é—®åƒgolang.orgã€gopkg.inã€go.uber.orgè¿™ç±»åŸŸåï¼Œå¯ä»¥è®¾ç½®GOPROXYä¸ºå›½å†…å¯ä»¥è®¿é—®çš„ä»£ç†æœåŠ¡å™¨ï¼Œè§£å†³ä¾èµ–åŒ…ä¸‹è½½å¤±è´¥çš„é—®é¢˜ã€‚</li>\n<li>Goæ¨¡å—ä»£ç†ä¼šæ°¸ä¹…ç¼“å­˜å’Œå­˜å‚¨æ‰€æœ‰çš„ä¾èµ–ï¼Œå¹¶ä¸”è¿™äº›ä¾èµ–ä¸€ç»ç¼“å­˜ï¼Œä¸å¯æ›´æ”¹ï¼Œè¿™ä¹Ÿæ„å‘³ç€æˆ‘ä»¬ä¸éœ€è¦å†ç»´æŠ¤ä¸€ä¸ªvendorç›®å½•ï¼Œä¹Ÿå¯ä»¥é¿å…å› ä¸ºç»´æŠ¤vendorç›®å½•æ‰€å¸¦æ¥çš„å­˜å‚¨ç©ºé—´å ç”¨ã€‚</li>\n<li>å› ä¸ºä¾èµ–æ°¸ä¹…å­˜åœ¨äºä»£ç†æœåŠ¡å™¨ï¼Œè¿™æ ·å³ä½¿æ¨¡å—ä»äº’è”ç½‘ä¸Šè¢«åˆ é™¤ï¼Œä¹Ÿä»ç„¶å¯ä»¥é€šè¿‡ä»£ç†æœåŠ¡å™¨è·å–åˆ°ã€‚</li>\n<li>ä¸€æ—¦å°†Goæ¨¡å—å­˜å‚¨åœ¨Goä»£ç†æœåŠ¡å™¨ä¸­ï¼Œå°±æ— æ³•è¦†ç›–æˆ–åˆ é™¤å®ƒï¼Œè¿™å¯ä»¥ä¿æŠ¤å¼€å‘è€…å…å—å¯èƒ½æ³¨å…¥ç›¸åŒç‰ˆæœ¬æ¶æ„ä»£ç æ‰€å¸¦æ¥çš„æ”»å‡»ã€‚</li>\n<li>æˆ‘ä»¬ä¸å†éœ€è¦VCSå·¥å…·æ¥ä¸‹è½½ä¾èµ–ï¼Œå› ä¸ºæ‰€æœ‰çš„ä¾èµ–éƒ½æ˜¯é€šè¿‡HTTPçš„æ–¹å¼ä»ä»£ç†æœåŠ¡å™¨ä¸‹è½½ã€‚</li>\n<li>å› ä¸ºGoä»£ç†é€šè¿‡HTTPç‹¬ç«‹æä¾›äº†æºä»£ç ï¼ˆ.zipå­˜æ¡£ï¼‰å’Œgo.modï¼Œæ‰€ä»¥ä¸‹è½½å’Œæ„å»ºGoæ¨¡å—çš„é€Ÿåº¦æ›´å¿«ã€‚å› ä¸ºå¯ä»¥ç‹¬ç«‹è·å–go.modï¼ˆè€Œä¹‹å‰å¿…é¡»è·å–æ•´ä¸ªä»“åº“ï¼‰ï¼Œæ‰€ä»¥è§£å†³ä¾èµ–ä¹Ÿæ›´å¿«ã€‚</li>\n<li>å½“ç„¶ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥è®¾ç½®è‡ªå·±çš„Goæ¨¡å—ä»£ç†ï¼Œè¿™æ ·å¼€å‘è€…å¯ä»¥å¯¹ä¾èµ–åŒ…æœ‰æ›´å¤šçš„æ§åˆ¶ï¼Œå¹¶å¯ä»¥é¢„é˜²VCSåœæœºæ‰€å¸¦æ¥çš„ä¸‹è½½å¤±è´¥ã€‚</li>\n</ul><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬çš„å¾ˆå¤šæ¨¡å—å¯èƒ½éœ€è¦ä»ç§æœ‰ä»“åº“æ‹‰å–ï¼Œé€šè¿‡ä»£ç†æœåŠ¡å™¨è®¿é—®ä¼šæŠ¥é”™ï¼Œè¿™æ—¶å€™æˆ‘ä»¬éœ€è¦å°†è¿™äº›æ¨¡å—æ·»åŠ åˆ°ç¯å¢ƒå˜é‡GONOPROXYä¸­ï¼Œè¿™äº›ç§æœ‰æ¨¡å—çš„å“ˆå¸Œå€¼ä¹Ÿä¸ä¼šåœ¨checksum databaseä¸­å­˜åœ¨ï¼Œéœ€è¦å°†è¿™äº›æ¨¡å—æ·»åŠ åˆ°GONOSUMDBä¸­ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘å»ºè®®ç›´æ¥è®¾ç½®GOPRIVATEç¯å¢ƒå˜é‡ï¼Œå®ƒçš„å€¼å°†ä½œä¸ºGONOPROXYå’ŒGONOSUMDBçš„é»˜è®¤å€¼ã€‚</p><p>GONOPROXYã€GONOSUMDBå’ŒGOPRIVATEéƒ½æ”¯æŒé€šé…ç¬¦ï¼Œå¤šä¸ªåŸŸåç”¨é€—å·éš”å¼€ï¼Œä¾‹å¦‚<code>*.example.com,github.com</code>ã€‚</p><p>å¯¹äºå›½å†…çš„Goå¼€å‘è€…æ¥è¯´ï¼Œç›®å‰æœ‰3ä¸ªå¸¸ç”¨çš„GOPROXYå¯ä¾›é€‰æ‹©ï¼Œåˆ†åˆ«æ˜¯å®˜æ–¹ã€ä¸ƒç‰›å’Œé˜¿é‡Œäº‘ã€‚</p><p>å®˜æ–¹çš„GOPROXYï¼Œå›½å†…ç”¨æˆ·å¯èƒ½è®¿é—®ä¸åˆ°ï¼Œæ‰€ä»¥æˆ‘æ›´æ¨èä½¿ç”¨ä¸ƒç‰›çš„<code>goproxy.cn</code>ï¼Œ<code>goproxy.cn</code>æ˜¯ä¸ƒç‰›äº‘æ¨å‡ºçš„éè¥åˆ©æ€§é¡¹ç›®ï¼Œå®ƒçš„ç›®æ ‡æ˜¯ä¸ºä¸­å›½å’Œä¸–ç•Œä¸Šå…¶ä»–åœ°æ–¹çš„Goå¼€å‘è€…æä¾›ä¸€ä¸ªå…è´¹ã€å¯é ã€æŒç»­åœ¨çº¿ï¼Œä¸”ç»è¿‡ CDN åŠ é€Ÿçš„æ¨¡å—ä»£ç†ã€‚</p><h3>æŒ‡å®šç‰ˆæœ¬å·ä¸‹è½½</h3><p>é€šå¸¸ï¼Œæˆ‘ä»¬é€šè¿‡<code>go get</code>æ¥ä¸‹è½½æ¨¡å—ï¼Œä¸‹è½½å‘½ä»¤æ ¼å¼ä¸º<code>go get &lt;package[@version]&gt;</code>ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/63/92/63fbbf7cf8b67af85aa4e7ce76a99392.jpg?wh=2248x2048\" alt=\"\"></p><p>ä½ å¯ä»¥ä½¿ç”¨<code>go get -u</code>æ›´æ–°packageåˆ°latestç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>go get -u=patch</code>åªæ›´æ–°å°ç‰ˆæœ¬ï¼Œä¾‹å¦‚ä»<code>v1.2.4</code>åˆ°<code>v1.2.5</code>ã€‚</p><h3>æŒ‰æœ€å°ç‰ˆæœ¬ä¸‹è½½</h3><p>ä¸€ä¸ªæ¨¡å—å¾€å¾€ä¼šä¾èµ–è®¸å¤šå…¶ä»–æ¨¡å—ï¼Œå¹¶ä¸”ä¸åŒçš„æ¨¡å—ä¹Ÿå¯èƒ½ä¼šä¾èµ–åŒä¸€ä¸ªæ¨¡å—çš„ä¸åŒç‰ˆæœ¬ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/00/46/00794e3487e63d9d3302bfe977af6d46.jpg?wh=2248x1212\" alt=\"\"></p><p>åœ¨ä¸Šè¿°ä¾èµ–ä¸­ï¼Œæ¨¡å—Aä¾èµ–äº†æ¨¡å—Bå’Œæ¨¡å—Cï¼Œæ¨¡å—Bä¾èµ–äº†æ¨¡å—Dï¼Œæ¨¡å—Cä¾èµ–äº†æ¨¡å—Då’Œæ¨¡å—Fï¼Œæ¨¡å—Dåˆä¾èµ–äº†æ¨¡å—Eã€‚å¹¶ä¸”ï¼ŒåŒæ¨¡å—çš„ä¸åŒç‰ˆæœ¬è¿˜ä¾èµ–äº†å¯¹åº”æ¨¡å—çš„ä¸åŒç‰ˆæœ¬ã€‚</p><p>é‚£ä¹ˆGo Modulesæ˜¯å¦‚ä½•é€‰æ‹©ç‰ˆæœ¬çš„å‘¢ï¼ŸGo Modules ä¼šæŠŠæ¯ä¸ªæ¨¡å—çš„ä¾èµ–ç‰ˆæœ¬æ¸…å•éƒ½æ•´ç†å‡ºæ¥ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªæ„å»ºæ¸…å•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/4f/f2/4f83ffe8125d75764c5f8069a73966f2.jpg?wh=2248x1148\" alt=\"\"></p><p>ä¸Šå›¾ä¸­ï¼Œrough listå’Œfinal listçš„åŒºåˆ«åœ¨äºé‡å¤å¼•ç”¨çš„æ¨¡å— Dï¼ˆ<code>v1.3</code>ã€<code>v1.4</code>ï¼‰ï¼Œæœ€ç»ˆæ¸…å•é€‰ç”¨äº†Dçš„<code>v1.4</code>ç‰ˆæœ¬ã€‚</p><p>è¿™æ ·åšçš„ä¸»è¦åŸå› æœ‰ä¸¤ä¸ªã€‚ç¬¬ä¸€ä¸ªæ˜¯è¯­ä¹‰åŒ–ç‰ˆæœ¬çš„æ§åˆ¶ã€‚å› ä¸ºæ¨¡å—Dçš„<code>v1.3</code>å’Œ<code>v1.4</code>ç‰ˆæœ¬å˜æ›´éƒ½å±äºæ¬¡ç‰ˆæœ¬å·çš„å˜æ›´ï¼Œè€Œåœ¨è¯­ä¹‰åŒ–ç‰ˆæœ¬çš„çº¦æŸä¸‹ï¼Œ<code>v1.4</code>å¿…é¡»è¦å‘ä¸‹å…¼å®¹<code>v1.3</code>ï¼Œå› æ­¤æˆ‘ä»¬è¦é€‰æ‹©é«˜ç‰ˆæœ¬çš„<code>v1.4</code>ã€‚</p><p>ç¬¬äºŒä¸ªæ˜¯æ¨¡å—å¯¼å…¥è·¯å¾„çš„è§„èŒƒã€‚ä¸»ç‰ˆæœ¬å·ä¸åŒï¼Œæ¨¡å—çš„å¯¼å…¥è·¯å¾„å°±ä¸ä¸€æ ·ã€‚æ‰€ä»¥ï¼Œå¦‚æœå‡ºç°ä¸å…¼å®¹çš„æƒ…å†µï¼Œä¸»ç‰ˆæœ¬å·ä¼šæ”¹å˜ï¼Œä¾‹å¦‚ä»v1å˜ä¸ºv2ï¼Œæ¨¡å—çš„å¯¼å…¥è·¯å¾„ä¹Ÿå°±æ”¹å˜äº†ï¼Œå› æ­¤ä¸ä¼šå½±å“v1ç‰ˆæœ¬ã€‚</p><h2>go.modå’Œgo.sumä»‹ç»</h2><p>åœ¨Go Modulesä¸­ï¼Œgo.modå’Œgo.sumæ˜¯ä¸¤ä¸ªéå¸¸é‡è¦çš„æ–‡ä»¶ï¼Œä¸‹é¢æˆ‘å°±æ¥è¯¦ç»†ä»‹ç»è¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚</p><h3>go.modæ–‡ä»¶ä»‹ç»</h3><p>go.modæ–‡ä»¶æ˜¯Go Modulesçš„æ ¸å¿ƒæ–‡ä»¶ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªgo.modæ–‡ä»¶ç¤ºä¾‹ï¼š</p><pre><code class=\"language-bash\">module github.com/marmotedu/iam\n\ngo 1.14\n\nrequire (\n\tgithub.com/AlekSi/pointer v1.1.0\n\tgithub.com/appleboy/gin-jwt/v2 v2.6.3\n\tgithub.com/asaskevich/govalidator v0.0.0-20200428143746-21a406dcc535\n\tgithub.com/gin-gonic/gin v1.6.3\n\tgithub.com/golangci/golangci-lint v1.30.0 // indirect\n\tgithub.com/google/uuid v1.0.0\n    github.com/blang/semver v3.5.0+incompatible\n    golang.org/x/text v0.3.2\n)\n\nreplace (\n    github.com/gin-gonic/gin =&gt; /home/colin/gin\n    golang.org/x/text v0.3.2 =&gt; github.com/golang/text v0.3.2\n)\n\nexclude (\n    github.com/google/uuid v1.1.0\n)\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šä»go.modè¯­å¥ã€go.modç‰ˆæœ¬å·ã€go.modæ–‡ä»¶ä¿®æ”¹æ–¹æ³•ä¸‰ä¸ªæ–¹é¢æ¥ä»‹ç»go.modã€‚</p><ol>\n<li>go.modè¯­å¥</li>\n</ol><p>go.modæ–‡ä»¶ä¸­åŒ…å«äº†4ä¸ªè¯­å¥ï¼Œåˆ†åˆ«æ˜¯moduleã€requireã€replace å’Œ excludeã€‚ä¸‹é¢æˆ‘æ¥ä»‹ç»ä¸‹å®ƒä»¬çš„åŠŸèƒ½ã€‚</p><ul>\n<li>moduleï¼šç”¨æ¥å®šä¹‰å½“å‰é¡¹ç›®çš„æ¨¡å—è·¯å¾„ã€‚</li>\n<li>goï¼šç”¨æ¥è®¾ç½®é¢„æœŸçš„Goç‰ˆæœ¬ï¼Œç›®å‰åªæ˜¯èµ·æ ‡è¯†ä½œç”¨ã€‚</li>\n<li>requireï¼šç”¨æ¥è®¾ç½®ä¸€ä¸ªç‰¹å®šçš„æ¨¡å—ç‰ˆæœ¬ï¼Œæ ¼å¼ä¸º<code>&lt;å¯¼å…¥åŒ…è·¯å¾„&gt; &lt;ç‰ˆæœ¬&gt; [// indirect]</code>ã€‚</li>\n<li>excludeï¼šç”¨æ¥ä»ä½¿ç”¨ä¸­æ’é™¤ä¸€ä¸ªç‰¹å®šçš„æ¨¡å—ç‰ˆæœ¬ï¼Œå¦‚æœæˆ‘ä»¬çŸ¥é“æ¨¡å—çš„æŸä¸ªç‰ˆæœ¬æœ‰ä¸¥é‡çš„é—®é¢˜ï¼Œå°±å¯ä»¥ä½¿ç”¨excludeå°†è¯¥ç‰ˆæœ¬æ’é™¤æ‰ã€‚</li>\n<li>replaceï¼šç”¨æ¥å°†ä¸€ä¸ªæ¨¡å—ç‰ˆæœ¬æ›¿æ¢ä¸ºå¦å¤–ä¸€ä¸ªæ¨¡å—ç‰ˆæœ¬ã€‚æ ¼å¼ä¸º <code>$module =&gt; $newmodule</code> ï¼Œ<code>$newmodule</code>å¯ä»¥æ˜¯æœ¬åœ°ç£ç›˜çš„ç›¸å¯¹è·¯å¾„ï¼Œä¾‹å¦‚<code>github.com/gin-gonic/gin =&gt; ./gin</code>ã€‚ä¹Ÿå¯ä»¥æ˜¯æœ¬åœ°ç£ç›˜çš„ç»å¯¹è·¯å¾„ï¼Œä¾‹å¦‚<code>github.com/gin-gonic/gin =&gt; /home/lk/gin</code>ã€‚è¿˜å¯ä»¥æ˜¯ç½‘ç»œè·¯å¾„ï¼Œä¾‹å¦‚<code>golang.org/x/text v0.3.2 =&gt; github.com/golang/text v0.3.2</code>ã€‚</li>\n</ul><p>è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œè™½ç„¶æˆ‘ä»¬ç”¨<code>$newmodule</code>æ›¿æ¢äº†<code>$module</code>ï¼Œä½†æ˜¯åœ¨ä»£ç ä¸­çš„å¯¼å…¥è·¯å¾„ä»ç„¶ä¸º<code>$module</code>ã€‚replaceåœ¨å®é™…å¼€å‘ä¸­ç»å¸¸ç”¨åˆ°ï¼Œä¸‹é¢çš„åœºæ™¯å¯èƒ½éœ€è¦ç”¨åˆ°replaceï¼š</p><ul>\n<li>åœ¨å¼€å¯Go Modulesåï¼Œç¼“å­˜çš„ä¾èµ–åŒ…æ˜¯åªè¯»çš„ï¼Œä½†åœ¨æ—¥å¸¸å¼€å‘è°ƒè¯•ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ä¿®æ”¹ä¾èµ–åŒ…çš„ä»£ç æ¥è¿›è¡Œè°ƒè¯•ï¼Œè¿™æ—¶å¯ä»¥å°†ä¾èµ–åŒ…å¦å­˜åˆ°ä¸€ä¸ªæ–°çš„ä½ç½®ï¼Œå¹¶åœ¨go.modä¸­æ›¿æ¢è¿™ä¸ªåŒ…ã€‚</li>\n<li>å¦‚æœä¸€äº›ä¾èµ–åŒ…åœ¨Goå‘½ä»¤è¿è¡Œæ—¶æ— æ³•ä¸‹è½½ï¼Œå°±å¯ä»¥é€šè¿‡å…¶ä»–é€”å¾„ä¸‹è½½è¯¥ä¾èµ–åŒ…ï¼Œä¸Šä¼ åˆ°å¼€å‘æ„å»ºæœºï¼Œå¹¶åœ¨go.modä¸­æ›¿æ¢ä¸ºè¿™ä¸ªåŒ…ã€‚</li>\n<li>åœ¨é¡¹ç›®å¼€å‘åˆæœŸï¼ŒAé¡¹ç›®ä¾èµ–Bé¡¹ç›®çš„åŒ…ï¼Œä½†Bé¡¹ç›®å› ä¸ºç§ç§åŸå› æ²¡æœ‰pushåˆ°ä»“åº“ï¼Œè¿™æ—¶ä¹Ÿå¯ä»¥åœ¨go.modä¸­æŠŠä¾èµ–åŒ…æ›¿æ¢ä¸ºBé¡¹ç›®çš„æœ¬åœ°ç£ç›˜è·¯å¾„ã€‚</li>\n<li>åœ¨å›½å†…è®¿é—®golang.org/xçš„å„ä¸ªåŒ…éƒ½éœ€è¦ç¿»å¢™ï¼Œå¯ä»¥åœ¨go.modä¸­ä½¿ç”¨replaceï¼Œæ›¿æ¢æˆGitHubä¸Šå¯¹åº”çš„åº“ï¼Œä¾‹å¦‚<code>golang.org/x/text v0.3.0 =&gt; github.com/golang/text v0.3.0</code>ã€‚</li>\n</ul><p>æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼Œexcludeå’Œreplaceåªä½œç”¨äºå½“å‰ä¸»æ¨¡å—ï¼Œä¸å½±å“ä¸»æ¨¡å—æ‰€ä¾èµ–çš„å…¶ä»–æ¨¡å—ã€‚</p><ol start=\"2\">\n<li>go.modç‰ˆæœ¬å·</li>\n</ol><p>go.modæ–‡ä»¶ä¸­æœ‰å¾ˆå¤šç‰ˆæœ¬å·æ ¼å¼ï¼Œæˆ‘çŸ¥é“åœ¨å¹³æ—¶ä½¿ç”¨ä¸­ï¼Œæœ‰å¾ˆå¤šå¼€å‘è€…å¯¹æ­¤æ„Ÿåˆ°å›°æƒ‘ã€‚è¿™é‡Œï¼Œæˆ‘æ¥è¯¦ç»†è¯´æ˜ä¸€ä¸‹ã€‚</p><ul>\n<li>å¦‚æœæ¨¡å—å…·æœ‰ç¬¦åˆè¯­ä¹‰åŒ–ç‰ˆæœ¬æ ¼å¼çš„tagï¼Œä¼šç›´æ¥å±•ç¤ºtagçš„å€¼ï¼Œä¾‹å¦‚ <code>github.com/AlekSi/pointer v1.1.0</code> ã€‚</li>\n<li>é™¤äº†v0å’Œv1å¤–ï¼Œä¸»ç‰ˆæœ¬å·å¿…é¡»æ˜¾è¯•åœ°å‡ºç°åœ¨æ¨¡å—è·¯å¾„çš„å°¾éƒ¨ï¼Œä¾‹å¦‚<code>github.com/appleboy/gin-jwt/v2 v2.6.3</code>ã€‚</li>\n<li>å¯¹äºæ²¡æœ‰tagçš„æ¨¡å—ï¼ŒGoå‘½ä»¤ä¼šé€‰æ‹©masteråˆ†æ”¯ä¸Šæœ€æ–°çš„commitï¼Œå¹¶æ ¹æ®commitæ—¶é—´å’Œå“ˆå¸Œå€¼ç”Ÿæˆä¸€ä¸ªç¬¦åˆè¯­ä¹‰åŒ–ç‰ˆæœ¬çš„ç‰ˆæœ¬å·ï¼Œä¾‹å¦‚<code>github.com/asaskevich/govalidator v0.0.0-20200428143746-21a406dcc535</code>ã€‚</li>\n<li>å¦‚æœæ¨¡å—åå­—è·Ÿç‰ˆæœ¬ä¸ç¬¦åˆè§„èŒƒï¼Œä¾‹å¦‚æ¨¡å—çš„åå­—ä¸º<code>github.com/blang/semver</code>ï¼Œä½†æ˜¯ç‰ˆæœ¬ä¸º <code>v3.5.0</code>ï¼ˆæ­£å¸¸åº”è¯¥æ˜¯<code>github.com/blang/semver/v3</code>ï¼‰ï¼Œgoä¼šåœ¨go.modçš„ç‰ˆæœ¬å·ååŠ <code>+incompatible</code>è¡¨ç¤ºã€‚</li>\n<li>å¦‚æœgo.modä¸­çš„åŒ…æ˜¯é—´æ¥ä¾èµ–ï¼Œåˆ™ä¼šæ·»åŠ <code>// indirect</code>æ³¨é‡Šï¼Œä¾‹å¦‚<code>github.com/golangci/golangci-lint v1.30.0 // indirect</code>ã€‚</li>\n</ul><p>è¿™é‡Œè¦æ³¨æ„ï¼ŒGo Modulesè¦æ±‚æ¨¡å—çš„ç‰ˆæœ¬å·æ ¼å¼ä¸º<code>v&lt;major&gt;.&lt;minor&gt;.&lt;patch&gt;</code>ï¼Œå¦‚æœ<code>&lt;major&gt;</code>ç‰ˆæœ¬å·å¤§äº1ï¼Œå®ƒçš„ç‰ˆæœ¬å·è¿˜è¦ä½“ç°åœ¨æ¨¡å—åå­—ä¸­ï¼Œä¾‹å¦‚æ¨¡å—<code>github.com/blang/semver</code>ç‰ˆæœ¬å·å¢é•¿åˆ°<code>v3.x.x</code>ï¼Œåˆ™æ¨¡å—ååº”ä¸º<code>github.com/blang/semver/v3</code>ã€‚</p><p>è¿™é‡Œå†è¯¦ç»†ä»‹ç»ä¸‹å‡ºç°<code>// indirect</code>çš„æƒ…å†µã€‚åŸåˆ™ä¸Šgo.modä¸­å‡ºç°çš„éƒ½æ˜¯ç›´æ¥ä¾èµ–ï¼Œä½†æ˜¯ä¸‹é¢çš„ä¸¤ç§æƒ…å†µåªè¦å‡ºç°ä¸€ç§ï¼Œå°±ä¼šåœ¨go.modä¸­æ·»åŠ é—´æ¥ä¾èµ–ã€‚</p><ul>\n<li>ç›´æ¥ä¾èµ–æœªå¯ç”¨Go Modulesï¼šå¦‚æœæ¨¡å—Aä¾èµ–æ¨¡å—Bï¼Œæ¨¡å—Bä¾èµ–B1å’ŒB2ï¼Œä½†æ˜¯Bæ²¡æœ‰go.modæ–‡ä»¶ï¼Œåˆ™B1å’ŒB2ä¼šè®°å½•åˆ°Açš„go.modæ–‡ä»¶ä¸­ï¼Œå¹¶åœ¨æœ€ååŠ ä¸Š<code>// indirect</code>ã€‚</li>\n<li>ç›´æ¥ä¾èµ–go.modæ–‡ä»¶ä¸­ç¼ºå¤±éƒ¨åˆ†ä¾èµ–ï¼šå¦‚æœæ¨¡å—Aä¾èµ–æ¨¡å—Bï¼Œæ¨¡å—Bä¾èµ–B1å’ŒB2ï¼ŒBæœ‰go.modæ–‡ä»¶ï¼Œä½†æ˜¯åªæœ‰B1è¢«è®°å½•åœ¨Bçš„go.modæ–‡ä»¶ä¸­ï¼Œè¿™æ—¶å€™B2ä¼šè¢«è®°å½•åˆ°Açš„go.modæ–‡ä»¶ä¸­ï¼Œå¹¶åœ¨æœ€ååŠ ä¸Š<code>// indirect</code>ã€‚</li>\n</ul><ol start=\"3\">\n<li>go.modæ–‡ä»¶ä¿®æ”¹æ–¹æ³•</li>\n</ol><p>è¦ä¿®æ”¹go.modæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä¸‹é¢è¿™ä¸‰ç§æ–¹æ³•ï¼š</p><ul>\n<li>Goå‘½ä»¤åœ¨è¿è¡Œæ—¶è‡ªåŠ¨ä¿®æ”¹ã€‚</li>\n<li>æ‰‹åŠ¨ç¼–è¾‘go.modæ–‡ä»¶ï¼Œç¼–è¾‘ä¹‹åå¯ä»¥æ‰§è¡Œ<code>go mod edit -fmt</code>æ ¼å¼åŒ–go.modæ–‡ä»¶ã€‚</li>\n<li>æ‰§è¡Œgo modå­å‘½ä»¤ä¿®æ”¹ã€‚</li>\n</ul><p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œæˆ‘å»ºè®®ä½ é‡‡ç”¨ç¬¬ä¸‰ç§ä¿®æ”¹æ–¹æ³•ï¼Œå’Œå…¶ä»–ä¸¤ç§ç›¸æ¯”ä¸å¤ªå®¹æ˜“å‡ºé”™ã€‚ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p><pre><code class=\"language-bash\">go mod edit -fmt  # go.mod æ ¼å¼åŒ–\ngo mod edit -require=golang.org/x/text@v0.3.3  # æ·»åŠ ä¸€ä¸ªä¾èµ–\ngo mod edit -droprequire=golang.org/x/text # requireçš„åå‘æ“ä½œï¼Œç§»é™¤ä¸€ä¸ªä¾èµ–\ngo mod edit -replace=github.com/gin-gonic/gin=/home/colin/gin # æ›¿æ¢æ¨¡å—ç‰ˆæœ¬\ngo mod edit -dropreplace=github.com/gin-gonic/gin # replaceçš„åå‘æ“ä½œ\ngo mod edit -exclude=golang.org/x/text@v0.3.1 # æ’é™¤ä¸€ä¸ªç‰¹å®šçš„æ¨¡å—ç‰ˆæœ¬\ngo mod edit -dropexclude=golang.org/x/text@v0.3.1 # excludeçš„åå‘æ“ä½œ\n</code></pre><h3>go.sumæ–‡ä»¶ä»‹ç»</h3><p>Goä¼šæ ¹æ®go.modæ–‡ä»¶ä¸­è®°è½½çš„ä¾èµ–åŒ…åŠå…¶ç‰ˆæœ¬ä¸‹è½½åŒ…æºç ï¼Œä½†æ˜¯ä¸‹è½½çš„åŒ…å¯èƒ½è¢«ç¯¡æ”¹ï¼Œç¼“å­˜åœ¨æœ¬åœ°çš„åŒ…ä¹Ÿå¯èƒ½è¢«ç¯¡æ”¹ã€‚å•å•ä¸€ä¸ªgo.modæ–‡ä»¶ï¼Œä¸èƒ½ä¿è¯åŒ…çš„ä¸€è‡´æ€§ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªæ½œåœ¨çš„å®‰å…¨é—®é¢˜ï¼ŒGo Moduleså¼•å…¥äº†go.sumæ–‡ä»¶ã€‚</p><p>go.sumæ–‡ä»¶ç”¨æ¥è®°å½•æ¯ä¸ªä¾èµ–åŒ…çš„hashå€¼ï¼Œåœ¨æ„å»ºæ—¶ï¼Œå¦‚æœæœ¬åœ°çš„ä¾èµ–åŒ…hashå€¼ä¸<code>go.sum</code>æ–‡ä»¶ä¸­è®°å½•çš„ä¸ä¸€è‡´ï¼Œåˆ™ä¼šæ‹’ç»æ„å»ºã€‚go.sumä¸­è®°å½•çš„ä¾èµ–åŒ…æ˜¯æ‰€æœ‰çš„ä¾èµ–åŒ…ï¼ŒåŒ…æ‹¬é—´æ¥å’Œç›´æ¥çš„ä¾èµ–åŒ…ã€‚</p><p>è¿™é‡Œæç¤ºä¸‹ï¼Œä¸ºäº†é¿å…å·²ç¼“å­˜çš„æ¨¡å—è¢«æ›´æ”¹ï¼Œ<code>$GOPATH/pkg/mod</code>ä¸‹ç¼“å­˜çš„åŒ…æ˜¯åªè¯»çš„ï¼Œä¸å…è®¸ä¿®æ”¹ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»go.sumæ–‡ä»¶å†…å®¹ã€go.sumæ–‡ä»¶ç”Ÿæˆã€æ ¡éªŒä¸‰ä¸ªæ–¹é¢æ¥ä»‹ç»go.sumã€‚</p><ol>\n<li>go.sumæ–‡ä»¶å†…å®¹</li>\n</ol><p>ä¸‹é¢æ˜¯ä¸€ä¸ªgo.sumæ–‡ä»¶çš„å†…å®¹ï¼š</p><pre><code class=\"language-bash\">golang.org/x/text v0.0.0-20170915032832-14c0d48ead0c h1:qgOY6WgZOaTkIIMiVjBQcw93ERBE4m30iBm00nkL0i8=\ngolang.org/x/text v0.0.0-20170915032832-14c0d48ead0c/go.mod h1:NqM8EUOU14njkJ3fqMW+pc6Ldnwhi/IjpwHt7yyuwOQ=\nrsc.io/quote v1.5.2 h1:w5fcysjrx7yqtD/aO+QwRjYZOKnaM9Uh2b40tElTs3Y=\nrsc.io/quote v1.5.2/go.mod h1:LzX7hefJvL54yjefDEDHNONDjII0t9xZLPXsUe+TKr0=\nrsc.io/sampler v1.3.0 h1:7uVkIFmeBqHfdjD+gZwtXXI+RODJ2Wc4O7MPEh/QiW4=\nrsc.io/sampler v1.3.0/go.mod h1:T1hPZKmBbMNahiBKFy5HrXp6adAjACjK9JXDnKaTXpA=\n</code></pre><p>go.sumæ–‡ä»¶ä¸­ï¼Œæ¯è¡Œè®°å½•ç”±æ¨¡å—åã€ç‰ˆæœ¬ã€å“ˆå¸Œç®—æ³•å’Œå“ˆå¸Œå€¼ç»„æˆï¼Œå¦‚<code>&lt;module&gt; &lt;version&gt;[/go.mod] &lt;algorithm&gt;:&lt;hash&gt;</code>ã€‚ç›®å‰ï¼Œä»Go1.11åˆ°Go1.14ç‰ˆæœ¬ï¼Œåªæœ‰ä¸€ä¸ªç®—æ³•SHA-256ï¼Œç”¨h1è¡¨ç¤ºã€‚</p><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ¯ä¸ªä¾èµ–åŒ…ä¼šåŒ…å«ä¸¤æ¡è®°å½•ï¼Œåˆ†åˆ«æ˜¯ä¾èµ–åŒ…æ‰€æœ‰æ–‡ä»¶çš„å“ˆå¸Œå€¼å’Œè¯¥ä¾èµ–åŒ…go.modçš„å“ˆå¸Œå€¼ï¼Œä¾‹å¦‚ï¼š</p><pre><code class=\"language-bash\">rsc.io/quote v1.5.2 h1:w5fcysjrx7yqtD/aO+QwRjYZOKnaM9Uh2b40tElTs3Y=\nrsc.io/quote v1.5.2/go.mod h1:LzX7hefJvL54yjefDEDHNONDjII0t9xZLPXsUe+TKr0=\n</code></pre><p>ä½†æ˜¯ï¼Œå¦‚æœä¸€ä¸ªä¾èµ–åŒ…æ²¡æœ‰go.modæ–‡ä»¶ï¼Œå°±åªè®°å½•ä¾èµ–åŒ…æ‰€æœ‰æ–‡ä»¶çš„å“ˆå¸Œå€¼ï¼Œä¹Ÿå°±æ˜¯åªæœ‰ç¬¬ä¸€æ¡è®°å½•ã€‚é¢å¤–è®°å½•go.modçš„å“ˆå¸Œå€¼ï¼Œä¸»è¦æ˜¯ä¸ºäº†åœ¨è®¡ç®—ä¾èµ–æ ‘æ—¶ä¸å¿…ä¸‹è½½å®Œæ•´çš„ä¾èµ–åŒ…ç‰ˆæœ¬ï¼Œåªæ ¹æ®go.modå³å¯è®¡ç®—ä¾èµ–æ ‘ã€‚</p><ol start=\"2\">\n<li>go.sumæ–‡ä»¶ç”Ÿæˆ</li>\n</ol><p>åœ¨Go Moduleså¼€å¯æ—¶ï¼Œå¦‚æœæˆ‘ä»¬çš„é¡¹ç›®éœ€è¦å¼•å…¥ä¸€ä¸ªæ–°çš„åŒ…ï¼Œé€šå¸¸ä¼šæ‰§è¡Œ<code>go get</code>å‘½ä»¤ï¼Œä¾‹å¦‚ï¼š</p><pre><code class=\"language-bash\">$ go get rsc.io/quote\n</code></pre><p>å½“æ‰§è¡Œ<code>go get rsc.io/quote</code>å‘½ä»¤åï¼Œ<code>go get</code>å‘½ä»¤ä¼šå…ˆå°†ä¾èµ–åŒ…ä¸‹è½½åˆ°<code>$GOPATH/pkg/mod/cache/download</code>ï¼Œä¸‹è½½çš„ä¾èµ–åŒ…æ–‡ä»¶åæ ¼å¼ä¸º<code>$version.zip</code>ï¼Œä¾‹å¦‚<code>v1.5.2.zip</code>ã€‚</p><p>ä¸‹è½½å®Œæˆä¹‹åï¼Œ<code>go get</code>ä¼šå¯¹è¯¥zipåŒ…åšå“ˆå¸Œè¿ç®—ï¼Œå¹¶å°†ç»“æœå­˜åœ¨<code>$version.ziphash</code>æ–‡ä»¶ä¸­ï¼Œä¾‹å¦‚<code>v1.5.2.ziphash</code>ã€‚å¦‚æœåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ<code>go get</code>å‘½ä»¤ï¼Œåˆ™<code>go get</code>ä¼šåŒæ—¶æ›´æ–°go.modå’Œgo.sumæ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œgo.modæ–°å¢ä¸€è¡Œ<code>require rsc.io/quote v1.5.2</code>ï¼Œgo.sumæ–°å¢ä¸¤è¡Œï¼š</p><pre><code class=\"language-bash\">rsc.io/quote v1.5.2 h1:w5fcysjrx7yqtD/aO+QwRjYZOKnaM9Uh2b40tElTs3Y=\nrsc.io/quote v1.5.2/go.mod h1:LzX7hefJvL54yjefDEDHNONDjII0t9xZLPXsUe+TKr0=\n</code></pre><ol start=\"3\">\n<li>æ ¡éªŒ</li>\n</ol><p>åœ¨æˆ‘ä»¬æ‰§è¡Œæ„å»ºæ—¶ï¼Œgoå‘½ä»¤ä¼šä»æœ¬åœ°ç¼“å­˜ä¸­æŸ¥æ‰¾æ‰€æœ‰çš„ä¾èµ–åŒ…ï¼Œå¹¶è®¡ç®—è¿™äº›ä¾èµ–åŒ…çš„å“ˆå¸Œå€¼ï¼Œç„¶åä¸go.sumä¸­è®°å½•çš„å“ˆå¸Œå€¼è¿›è¡Œå¯¹æ¯”ã€‚å¦‚æœå“ˆå¸Œå€¼ä¸ä¸€è‡´ï¼Œåˆ™æ ¡éªŒå¤±è´¥ï¼Œåœæ­¢æ„å»ºã€‚</p><p>æ ¡éªŒå¤±è´¥å¯èƒ½æ˜¯å› ä¸ºæœ¬åœ°æŒ‡å®šç‰ˆæœ¬çš„ä¾èµ–åŒ…è¢«ä¿®æ”¹è¿‡ï¼Œä¹Ÿå¯èƒ½æ˜¯go.sumä¸­è®°å½•çš„å“ˆå¸Œå€¼æ˜¯é”™è¯¯çš„ã€‚ä½†æ˜¯Goå‘½ä»¤å€¾å‘äºç›¸ä¿¡ä¾èµ–åŒ…è¢«ä¿®æ”¹è¿‡ï¼Œå› ä¸ºå½“æˆ‘ä»¬åœ¨go getä¾èµ–åŒ…æ—¶ï¼ŒåŒ…çš„å“ˆå¸Œå€¼ä¼šç»è¿‡æ ¡éªŒå’Œæ•°æ®åº“ï¼ˆchecksum databaseï¼‰è¿›è¡Œæ ¡éªŒï¼Œæ ¡éªŒé€šè¿‡æ‰ä¼šè¢«åŠ å…¥åˆ°go.sumæ–‡ä»¶ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œgo.sumæ–‡ä»¶ä¸­è®°å½•çš„å“ˆå¸Œå€¼æ˜¯å¯ä¿¡çš„ã€‚</p><p>æ ¡éªŒå’Œæ•°æ®åº“å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡<code>GOSUMDB</code>æŒ‡å®šï¼Œ<code>GOSUMDB</code>çš„å€¼æ˜¯ä¸€ä¸ªwebæœåŠ¡å™¨ï¼Œé»˜è®¤å€¼æ˜¯<code>sum.golang.org</code>ã€‚è¯¥æœåŠ¡å¯ä»¥ç”¨æ¥æŸ¥è¯¢ä¾èµ–åŒ…æŒ‡å®šç‰ˆæœ¬çš„å“ˆå¸Œå€¼ï¼Œä¿è¯æ‹‰å–åˆ°çš„æ¨¡å—ç‰ˆæœ¬æ•°æ®æ²¡æœ‰ç»è¿‡ç¯¡æ”¹ã€‚</p><p>å¦‚æœè®¾ç½®<code>GOSUMDB</code>ä¸º<code>off</code>ï¼Œæˆ–è€…ä½¿ç”¨<code>go get</code>çš„æ—¶å€™å¯ç”¨äº†<code>-insecure</code>å‚æ•°ï¼ŒGoå°±ä¸ä¼šå»å¯¹ä¸‹è½½çš„ä¾èµ–åŒ…åšå®‰å…¨æ ¡éªŒï¼Œè¿™å­˜åœ¨ä¸€å®šçš„å®‰å…¨éšæ‚£ï¼Œæ‰€ä»¥æˆ‘å»ºè®®ä½ å¼€å¯æ ¡éªŒå’Œæ•°æ®åº“ã€‚å¦‚æœå¯¹å®‰å…¨æ€§è¦æ±‚å¾ˆé«˜ï¼ŒåŒæ—¶åˆè®¿é—®ä¸äº†<code>sum.golang.org</code>ï¼Œä½ ä¹Ÿå¯ä»¥æ­å»ºè‡ªå·±çš„æ ¡éªŒå’Œæ•°æ®åº“ã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒGo checksum databaseå¯ä»¥è¢«Go module proxyä»£ç†ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬è®¾ç½®äº†<code>GOPROXY</code>åï¼Œé€šå¸¸æƒ…å†µä¸‹ä¸ç”¨å†è®¾ç½®<code>GOSUMDB</code>ã€‚è¿˜è¦æ³¨æ„çš„æ˜¯ï¼Œgo.sumæ–‡ä»¶ä¹Ÿåº”è¯¥æäº¤åˆ°ä½ çš„ Git ä»“åº“ä¸­å»ã€‚</p><h2>æ¨¡å—ä¸‹è½½æµç¨‹</h2><p>ä¸Šé¢ï¼Œæˆ‘ä»‹ç»äº†æ¨¡å—ä¸‹è½½çš„æ•´ä½“æµç¨‹ï¼Œè¿˜ä»‹ç»äº†go.modå’Œgo.sumè¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚å› ä¸ºå†…å®¹æ¯”è¾ƒå¤šï¼Œè¿™é‡Œç”¨ä¸€å¼ å›¾ç‰‡æ¥åšä¸ªæ€»ç»“ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/8b/8d/8b92e53cebd4373f8c41fdbe9328ba8d.jpg?wh=2248x1077\" alt=\"\"></p><p>æœ€åè¿˜æƒ³ä»‹ç»ä¸‹Go&nbsp;modulesçš„å…¨å±€ç¼“å­˜ã€‚Go&nbsp;modulesä¸­ï¼Œç›¸åŒç‰ˆæœ¬çš„æ¨¡å—åªä¼šç¼“å­˜ä¸€ä»½ï¼Œå…¶ä»–æ‰€æœ‰æ¨¡å—å…¬ç”¨ã€‚ç›®å‰ï¼Œæ‰€æœ‰æ¨¡å—ç‰ˆæœ¬æ•°æ®éƒ½ç¼“å­˜åœ¨ <code>$GOPATH/pkg/mod</code> å’Œ <code>$GOPATH/pkg/sum</code> ä¸‹ï¼Œæœªæ¥æœ‰å¯èƒ½ç§»åˆ° <code>$GOCACHE/mod</code> å’Œ <code>$GOCACHE/sum</code> ä¸‹ï¼Œæˆ‘è®¤ä¸ºè¿™å¯èƒ½å‘ç”Ÿåœ¨ <code>GOPATH</code> è¢«æ·˜æ±°åã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>go&nbsp;clean&nbsp;-modcache</code> æ¸…é™¤æ‰€æœ‰çš„ç¼“å­˜ã€‚</p><h2>æ€»ç»“</h2><p>Goä¾èµ–åŒ…ç®¡ç†æ˜¯Goè¯­è¨€ä¸­ä¸€ä¸ªé‡ç‚¹çš„åŠŸèƒ½ã€‚åœ¨Go1.11ç‰ˆæœ¬ä¹‹å‰ï¼Œå¹¶æ²¡æœ‰å®˜æ–¹çš„ä¾èµ–åŒ…ç®¡ç†å·¥å…·ï¼Œä¸šç•Œè™½ç„¶å­˜åœ¨å¤šä¸ªGoä¾èµ–åŒ…ç®¡ç†æ–¹æ¡ˆï¼Œä½†æ•ˆæœéƒ½ä¸ç†æƒ³ã€‚ç›´åˆ°Go1.11ç‰ˆæœ¬ï¼ŒGoæ‰æ¨å‡ºäº†å®˜æ–¹çš„ä¾èµ–åŒ…ç®¡ç†å·¥å…·ï¼ŒGo Modulesã€‚è¿™ä¹Ÿæ˜¯æˆ‘å»ºè®®ä½ åœ¨è¿›è¡ŒGoé¡¹ç›®å¼€å‘æ—¶é€‰æ‹©çš„ä¾èµ–åŒ…ç®¡ç†å·¥å…·ã€‚</p><p>Go Modulesæä¾›äº† <code>go mod</code> å‘½ä»¤ï¼Œæ¥ç®¡ç†Goçš„ä¾èµ–åŒ…ã€‚ <code>go mod</code> æœ‰å¾ˆå¤šå­å‘½ä»¤ï¼Œè¿™äº›å­å‘½ä»¤å¯ä»¥å®Œæˆä¸åŒçš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œåˆå§‹åŒ–å½“å‰ç›®å½•ä¸ºä¸€ä¸ªæ–°æ¨¡å—ï¼Œæ·»åŠ ä¸¢å¤±çš„æ¨¡å—ï¼Œç§»é™¤æ— ç”¨çš„æ¨¡å—ï¼Œç­‰ç­‰ã€‚</p><p>åœ¨Go Modulesä¸­ï¼Œæœ‰ä¸¤ä¸ªéå¸¸é‡è¦çš„æ–‡ä»¶ï¼šgo.modå’Œgo.sumã€‚go.modæ–‡ä»¶æ˜¯Go Modulesçš„æ ¸å¿ƒæ–‡ä»¶ï¼ŒGoä¼šæ ¹æ®go.modæ–‡ä»¶ä¸­è®°è½½çš„ä¾èµ–åŒ…åŠå…¶ç‰ˆæœ¬ä¸‹è½½åŒ…æºç ã€‚go.sumæ–‡ä»¶ç”¨æ¥è®°å½•æ¯ä¸ªä¾èµ–åŒ…çš„hashå€¼ï¼Œåœ¨æ„å»ºæ—¶ï¼Œå¦‚æœæœ¬åœ°çš„ä¾èµ–åŒ…hashå€¼ä¸go.sumæ–‡ä»¶ä¸­è®°å½•çš„ä¸ä¸€è‡´ï¼Œå°±ä¼šæ‹’ç»æ„å»ºã€‚</p><p>Goåœ¨ä¸‹è½½ä¾èµ–åŒ…æ—¶ï¼Œå¯ä»¥é€šè¿‡ä»£ç†æ¥ä¸‹è½½ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šç‰ˆæœ¬å·ä¸‹è½½ã€‚å¦‚æœä¸æŒ‡å®šç‰ˆæœ¬å·ï¼ŒGo Modulesä¼šæ ¹æ®è‡ªå®šä¹‰çš„è§„åˆ™ï¼Œé€‰æ‹©æœ€å°ç‰ˆæœ¬æ¥ä¸‹è½½ã€‚</p><h2>è¯¾åç»ƒä¹ </h2><ol>\n<li>æ€è€ƒä¸‹ï¼Œå¦‚æœä¸æäº¤go.sumï¼Œä¼šæœ‰ä»€ä¹ˆé£é™©ï¼Ÿ</li>\n<li>æ‰¾ä¸€ä¸ªæ²¡æœ‰ä½¿ç”¨Go Modulesç®¡ç†ä¾èµ–åŒ…çš„Goé¡¹ç›®ï¼ŒæŠŠå®ƒçš„ä¾èµ–åŒ…ç®¡ç†æ–¹å¼åˆ‡æ¢ä¸ºGo Modulesã€‚</li>\n</ol><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºä¸æˆ‘äº¤æµè®¨è®ºï¼Œæˆ‘ä»¬ä¸‹ä¸€è®²è§ã€‚</p>","neighbors":{"left":{"article_title":"ç‰¹åˆ«æ”¾é€ | ç»™ä½ ä¸€ä»½Goé¡¹ç›®ä¸­æœ€å¸¸ç”¨çš„Makefileæ ¸å¿ƒè¯­æ³•","id":389115},"right":{"article_title":"ç‰¹åˆ«æ”¾é€ | IAMæ’éšœæŒ‡å—","id":419674}},"comments":[{"had_liked":false,"id":311299,"user_name":"josephzxy","can_delete":false,"product_type":"c1","uid":2628969,"ip_address":"","ucode":"71E8006733420D","user_header":"https://static001.geekbang.org/account/avatar/00/28/1d/69/c21d2644.jpg","comment_is_top":true,"comment_ctime":1631160683,"is_pvip":false,"replies":[{"id":"112827","content":"è€å“¥ï¼Œå›ç­”ç»™æ»¡åˆ†~","user_name":"ä½œè€…å›å¤","user_name_real":"CK1.0","uid":"1167883","ctime":1631179011,"ip_address":"","comment_id":311299,"utype":1}],"discussion_count":3,"race_medal":0,"score":"9.2233720728456991e+18","product_id":100079601,"comment_content":"â€œæ€è€ƒä¸‹ï¼Œå¦‚æœä¸æäº¤ go.sumï¼Œä¼šæœ‰ä»€ä¹ˆé£é™©ï¼Ÿâ€<br>å¦‚æœgo getæ—¶ï¼ŒGOSUMDB=offï¼Œå°±æ²¡æœ‰åŠæ³•æ ¡éªŒä¸‹è½½çš„åŒ…æ˜¯å¦è¢«ç¯¡æ”¹ã€‚<br><br>æ¨èä¸¤ç¯‡åšæ–‡å¯åšè¾…åŠ©é˜…è¯»<br>https:&#47;&#47;zaracooper.github.io&#47;blog&#47;posts&#47;go-module-tidbits&#47;<br>https:&#47;&#47;insujang.github.io&#47;2020-04-04&#47;go-modules&#47;","like_count":8,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526552,"discussion_content":"è€å“¥ï¼Œå›ç­”ç»™æ»¡åˆ†~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631179011,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1135528,"avatar":"https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg","nickname":"return","note":"","ucode":"42B8A3380DF04B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553513,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645940433,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":398007,"discussion_content":"ç¬¬ä¸€ä¸ªçš„é“¾æ¥åœ°å€ç°åœ¨åº”è¯¥æ˜¯è¿™ä¸ªäº†å§ï¼š\n\nhttps://dev.to/zaracooper/18-essential-go-module-tidbits-for-a-newbie-4455","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632713564,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311547,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1105161,"ip_address":"","ucode":"1EECCA0F43E278","user_header":"https://static001.geekbang.org/account/avatar/00/10/dd/09/feca820a.jpg","comment_is_top":false,"comment_ctime":1631278601,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10221213193","product_id":100079601,"comment_content":"åˆ†æçš„çœŸç»†è‡´ï¼Œå‰å®³ğŸ‘","like_count":2},{"had_liked":false,"id":327039,"user_name":"å…”å˜Ÿå˜Ÿ","can_delete":false,"product_type":"c1","uid":2028811,"ip_address":"","ucode":"5A9042B4C7670C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f5/0b/73628618.jpg","comment_is_top":false,"comment_ctime":1639879212,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5934846508","product_id":100079601,"comment_content":"è§£æƒ‘äº†ï¼Œæ•´ä¸ªä¸­æ–‡äº’è”ç½‘ä¸Šéƒ½æ²¡è¿™æ ·å¥½å¥½è®²go moduleçš„ï¼Œè‡³å°‘æˆ‘æ²¡æ‰¾åˆ°ã€‚å¯¼è‡´æˆ‘ä¸€å¼€å§‹æé¡¹ç›®çš„æ—¶å€™ï¼Œåœ¨æŸä¸ªåœ°æ–¹çº ç»“äº†å¥½ä¹…","like_count":2},{"had_liked":false,"id":314353,"user_name":"Juniper","can_delete":false,"product_type":"c1","uid":1174794,"ip_address":"","ucode":"1BC24554034BD3","user_header":"https://static001.geekbang.org/account/avatar/00/11/ed/0a/18201290.jpg","comment_is_top":false,"comment_ctime":1632983859,"is_pvip":false,"replies":[{"id":"114085","content":"go getæ˜¯ä¸‹è½½å•ä¸ªåŒ…ã€‚<br><br><br>go mod downloadæ˜¯ä¸‹è½½go.modä¸­è®°å½•çš„åŒ…ï¼ˆ1ä¸ª&#47;å¤šä¸ªï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"CK1.0","uid":"1167883","ctime":1633664989,"ip_address":"","comment_id":314353,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5927951155","product_id":100079601,"comment_content":"é—®ä¸‹è€å¸ˆï¼Œgo getå’Œgo mod downloadçš„åœºæ™¯æœ‰ä»€ä¹ˆä¸ä¸€æ ·å—ï¼Œä¸å¤ªæ˜å¤©go mod downloadè¿™ä¸ªå‘½ä»¤çš„åœºæ™¯<br>","like_count":2,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527657,"discussion_content":"go getæ˜¯ä¸‹è½½å•ä¸ªåŒ…ã€‚\n\n\ngo mod downloadæ˜¯ä¸‹è½½go.modä¸­è®°å½•çš„åŒ…ï¼ˆ1ä¸ª/å¤šä¸ªï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633664989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313422,"user_name":"types","can_delete":false,"product_type":"c1","uid":2449777,"ip_address":"","ucode":"8B50927EF1804F","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDUJyeq54fiaXAgF62tNeocO3lHsKT4mygEcNoZLnibg6ONKicMgCgUHSfgW8hrMUXlwpNSzR8MHZwg/132","comment_is_top":false,"comment_ctime":1632415767,"is_pvip":false,"replies":[{"id":"113660","content":"è¿˜ä¸æ”¯æŒæŒ‡å®šcommit id get","user_name":"ä½œè€…å›å¤","user_name_real":"CK1.0","uid":"1167883","ctime":1632757425,"ip_address":"","comment_id":313422,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5927383063","product_id":100079601,"comment_content":"go getå¦‚ä½•æ‹‰å–æŒ‡å®šåˆ†æ”¯çš„æŒ‡å®šcommit id","like_count":2,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527344,"discussion_content":"è¿˜ä¸æ”¯æŒæŒ‡å®šcommit id get","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632757425,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":340456,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1648821314,"is_pvip":true,"replies":[{"id":"125559","content":"ä¸ä¼šçš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1167883","ctime":1651080216,"ip_address":"","comment_id":340456,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1648821314","product_id":100079601,"comment_content":"æœ€åä¸€ä¸ªæµç¨‹å›¾ä¸­ï¼Œ GOSUMDB=off çš„æ—¶å€™ï¼Œè¿˜ä¼šå’Œ go.sum æ–‡ä»¶ä¸­çš„ hash åšå¯¹æ¯”å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568256,"discussion_content":"ä¸ä¼šçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651080216,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":340342,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1648772238,"is_pvip":true,"replies":[{"id":"125552","content":"åº”è¯¥æ˜¯GO1.11çš„æ„æ€","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1167883","ctime":1651079901,"ip_address":"","comment_id":340342,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1648772238","product_id":100079601,"comment_content":"å¼€å¯ go module çš„ç¯å¢ƒå˜é‡ GO1111MODULE ä¸ºä»€ä¹ˆä¸­é—´æœ‰ 3ä¸ª1ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568249,"discussion_content":"åº”è¯¥æ˜¯GO1.11çš„æ„æ€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651079901,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327016,"user_name":"é™ˆä¸œ","can_delete":false,"product_type":"c1","uid":2213995,"ip_address":"","ucode":"FCDE6D237CC621","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Ge7uhlEVxicQT73YuomDPrVKI8UmhqxKWrhtO5GMNlFjrHWfd3HAjgaSribR4Pzorw8yalYGYqJI4VPvUyPzicSKg/132","comment_is_top":false,"comment_ctime":1639840617,"is_pvip":true,"replies":[{"id":"119698","content":"è¯•è¯•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤é‡æ–°å†æ„å»ºä¸‹ï¼š<br>export CGO_ENABLED=1 <br>export GOOS=linux","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1167883","ctime":1640825070,"ip_address":"","comment_id":327016,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1639840617","product_id":100079601,"comment_content":"golandæ„å»ºmoduleå¹¶å¼•ç”¨æ–¹åŒ…logrusï¼Œèƒ½go runä»£ç ï¼Œä½†æ˜¯logrus.Println ä¸­çš„ï¼ˆPrintln ï¼‰ä¸€ç›´æ˜¾ç¤ºçº¢è‰²æŠ¥é”™ï¼Œå°è¯•å¾ˆå¤šåŠæ³•ï¼Œè§£å†³<br>goæ„å»ºçº¦æŸé—®é¢˜ï¼Œé”™è¯¯æç¤ºæ˜¯Build constraints exclude all Go files in cï¼šä»£ç ç›®å½•æ–‡ä»¶å¤¹ï¼Ÿ<br>å°è¯•ä»¥ä¸‹åŠæ³•è§£å†³ä¸äº†<br>1ã€searcheverything æœç´¢ååˆ é™¤æ‰€æœ‰åŒ…,<br>$GOPATHç›®å½•ä¸‹ï¼ŒæŠŠå¯¹åº”çš„åŒ…åˆ é™¤ï¼Œé‡æ–°go get,è¿˜æ˜¯ä¸è¡Œ.<br>2ã€go get -u -v github.com&#47;karalabe&#47;xgo<br>3ã€Right click -&gt; Mark folder as not excluded.<br>4ã€å¼•ç”¨åŒ…æŠ¥é”™ï¼Œé‡å¯ç”µè„‘ï¼ŒæŸ¥çœ‹goproxyé…ç½®ï¼Œé‡è£…golandç­‰ç­‰éƒ½è§£å†³ä¸äº†ã€‚<br>æ€ä¹ˆè§£å†³ï¼Œå¸Œæœ›å¾—åˆ°è€å¸ˆå¸®åŠ©ï¼Œè°¢è°¢ã€‚","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542641,"discussion_content":"è¯•è¯•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤é‡æ–°å†æ„å»ºä¸‹ï¼š\nexport CGO_ENABLED=1 \nexport GOOS=linux","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640825070,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318661,"user_name":"yss","can_delete":false,"product_type":"c1","uid":1922488,"ip_address":"","ucode":"793E8448355F3F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJkOj8VUxLjDKp6jRWJrABnnsg7U1sMSkM8FO6ULPwrqNpicZvTQ7kwctmu38iaJYHybXrmbusd8trg/132","comment_is_top":false,"comment_ctime":1635384840,"is_pvip":false,"replies":[{"id":"115982","content":"å¯¹çš„ï¼Œæ˜¯è¿™ä¸ªé£é™©ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å­”ä»¤é£","uid":"1167883","ctime":1636005402,"ip_address":"","comment_id":318661,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635384840","product_id":100079601,"comment_content":"å¦‚æœä¸æäº¤ go.sumï¼Œä¼šæœ‰ä»€ä¹ˆé£é™©ï¼Ÿ<br><br>å½“åˆ«äººä½¿ç”¨é¡¹ç›®å¹¶ä¸‹è½½ä¾èµ–æ—¶ï¼Œæ— æ³•éªŒè¯ä»–ä»¬ä½¿ç”¨çš„ä¾èµ–å’Œä½ å¼€å‘æ—¶çš„ä¾èµ–æ˜¯å¦ä¸€è‡´ï¼Œå­˜åœ¨ä¸‹è½½åˆ°è¢«ç¯¡æ”¹ä»£ç çš„é£é™©","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529332,"discussion_content":"å¯¹çš„ï¼Œæ˜¯è¿™ä¸ªé£é™©ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636005402,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313428,"user_name":"types","can_delete":false,"product_type":"c1","uid":2449777,"ip_address":"","ucode":"8B50927EF1804F","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDUJyeq54fiaXAgF62tNeocO3lHsKT4mygEcNoZLnibg6ONKicMgCgUHSfgW8hrMUXlwpNSzR8MHZwg/132","comment_is_top":false,"comment_ctime":1632417697,"is_pvip":false,"replies":[{"id":"113659","content":"ä¸ä¼šæ ¡éªŒçš„ï¼Œç¼“å­˜ä¸­çš„æ–‡ä»¶æ—¶åªè¯»çš„ï¼Œæ‰€ä»¥åªéœ€è¦æ ¡éªŒä¸€æ¬¡","user_name":"ä½œè€…å›å¤","user_name_real":"CK1.0","uid":"1167883","ctime":1632757403,"ip_address":"","comment_id":313428,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1632417697","product_id":100079601,"comment_content":"go buildæˆ–è€…go runçš„æ—¶å€™ï¼Œå¦‚æœä¾èµ–åŒ…éƒ½å·²ç»ä¸‹è½½åˆ° pkg&#47;modä¸‹äº†ï¼Œè¿˜ä¼šè¿›è¡Œæ ¡éªŒå—ï¼Ÿï¼Ÿ<br>è‡ªå·±æµ‹è¯•äº†ä¸‹å·²ç»æ˜¯ä¸ä¼šæ ¡éªŒçš„","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527346,"discussion_content":"ä¸ä¼šæ ¡éªŒçš„ï¼Œç¼“å­˜ä¸­çš„æ–‡ä»¶æ—¶åªè¯»çš„ï¼Œæ‰€ä»¥åªéœ€è¦æ ¡éªŒä¸€æ¬¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632757403,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311549,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1105161,"ip_address":"","ucode":"1EECCA0F43E278","user_header":"https://static001.geekbang.org/account/avatar/00/10/dd/09/feca820a.jpg","comment_is_top":false,"comment_ctime":1631278813,"is_pvip":false,"replies":[{"id":"113696","content":"ä¸æ˜¯ã€‚<br><br>è¯­ä¹‰åŒ–ç‰ˆæœ¬å·ä¹‹é—´æ˜¯å¯ä»¥å¯¹æ¯”çš„ï¼Œæ¯”å¦‚ï¼šv1.1.1 &lt; v1.1.2ã€‚<br><br>æŒ‰è¯­ä¹‰åŒ–ç‰ˆæœ¬å·å¯¹æ¯”è§„åˆ™å¯¹æ¯”åçš„æœ€å°å€¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"CK1.0","uid":"1167883","ctime":1632760671,"ip_address":"","comment_id":311549,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1631278813","product_id":100079601,"comment_content":"â€œå¦‚æœä¸æŒ‡å®šç‰ˆæœ¬å·ï¼ŒGo Modules ä¼šæ ¹æ®è‡ªå®šä¹‰çš„è§„åˆ™ï¼Œé€‰æ‹©æœ€å°ç‰ˆæœ¬æ¥ä¸‹è½½ã€‚â€ï¼Œè¿™é‡Œè¯´çš„æœ€å°ç‰ˆæœ¬æŒ‡çš„æ˜¯latestç‰ˆæœ¬å—","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526656,"discussion_content":"ä¸æ˜¯ã€‚\n\nè¯­ä¹‰åŒ–ç‰ˆæœ¬å·ä¹‹é—´æ˜¯å¯ä»¥å¯¹æ¯”çš„ï¼Œæ¯”å¦‚ï¼šv1.1.1 &amp;lt; v1.1.2ã€‚\n\næŒ‰è¯­ä¹‰åŒ–ç‰ˆæœ¬å·å¯¹æ¯”è§„åˆ™å¯¹æ¯”åçš„æœ€å°å€¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632760671,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2449777,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDUJyeq54fiaXAgF62tNeocO3lHsKT4mygEcNoZLnibg6ONKicMgCgUHSfgW8hrMUXlwpNSzR8MHZwg/132","nickname":"types","note":"","ucode":"8B50927EF1804F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":396398,"discussion_content":"è¿™ä¸ªæœ€å°ä¸æ˜¯å€¼å¤šä¸ªä¸åŒä¾èµ–ä¸­çš„æœ€å°ï¼Œè€Œæ˜¯åªæ‰¾åˆ°ä¸€ä¸ªç›¸å¯¹äºlatestçš„æœ€å°ã€‚ä¾‹å¦‚ä¾èµ–D v1.3 v1.4, æ­¤æ—¶Dçš„æœ€æ–°æ˜¯v1.5ï¼Œ æœ€ç»ˆé€‰æ‹©çš„æ˜¯v1.4, ç›¸å¯¹äºv1.5æ˜¯æœ€å°","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1632417315,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1105161,"avatar":"https://static001.geekbang.org/account/avatar/00/10/dd/09/feca820a.jpg","nickname":"helloworld","note":"","ucode":"1EECCA0F43E278","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2449777,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDUJyeq54fiaXAgF62tNeocO3lHsKT4mygEcNoZLnibg6ONKicMgCgUHSfgW8hrMUXlwpNSzR8MHZwg/132","nickname":"types","note":"","ucode":"8B50927EF1804F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":398391,"discussion_content":"ä½ è¿™ä¸ªè§£é‡Šçš„æœ€æ˜ç™½ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632790092,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":396398,"ip_address":""},"score":398391,"extra":""}]},{"author":{"id":2654999,"avatar":"https://static001.geekbang.org/account/avatar/00/28/83/17/df99b53d.jpg","nickname":"éšé£è€Œè¿‡","note":"","ucode":"FFD17BAA3B2312","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393485,"discussion_content":"æ‰€éœ€çš„æœ€ä½ç‰ˆæœ¬ï¼Œå¹¶ä¸æ˜¯latestç‰ˆæœ¬,go mod graph | grep æ¨¡å—å å¯ä»¥æŸ¥çœ‹ä¾èµ–çš„æ‰€æœ‰ç‰ˆæœ¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631451028,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}