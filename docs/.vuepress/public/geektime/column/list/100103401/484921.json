{"id":484921,"title":"åŠ é¤å›› | ä»€ä¹ˆæ˜¯â€œç©ºå®‰å…¨æ€ç»´â€ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æœ±æ¶›ã€‚è¿™èŠ‚åŠ é¤ï¼Œæˆ‘ä»¬æ¥èŠèŠç©ºå®‰å…¨æ€ç»´ã€‚</p><p>ç©ºï¼ˆnullï¼‰ï¼Œæ˜¯å¾ˆå¤šç¼–ç¨‹è¯­è¨€ä¸­éƒ½æœ‰çš„è®¾è®¡ï¼Œä¸åŒçš„è¯­è¨€ä¸­åå­—ä¹Ÿéƒ½ä¸å¤ªä¸€æ ·ï¼Œæ¯”å¦‚Javaå’ŒKotliné‡Œå«nullï¼Œåœ¨Swifté‡Œå«åšnilï¼Œè€ŒObjective-Cå½“ä¸­ï¼Œæ ¹æ®æƒ…å†µçš„ä¸åŒè¿˜ç»†åˆ†äº†NULLã€nilã€Nilç­‰ç­‰ã€‚</p><p>å¦‚æœä½ æœ‰Javaçš„ç»éªŒï¼Œé‚£ä½ ä¸€å®šä¸ä¼šå¯¹NullPointerExceptionï¼ˆNPEï¼Œä»£ç ä¸­å¸¸è§çš„é€»è¾‘é”™è¯¯ï¼‰æ„Ÿåˆ°é™Œç”Ÿã€‚nullä¼šå¼•èµ·NPEï¼Œä½†æ˜¯åœ¨å¾ˆå¤šåœºæ™¯ä¸‹ï¼Œä½ å´ä¸å¾—ä¸ä½¿ç”¨å®ƒã€‚å› ä¸ºnullç”¨èµ·æ¥å®åœ¨æ˜¯å¤ªæ–¹ä¾¿äº†ã€‚æ¯”å¦‚è¯´ï¼Œå‰é¢<a href=\"https://time.geekbang.org/column/article/473656\">ç¬¬4è®²</a>é‡Œï¼Œæˆ‘æåˆ°çš„è®¡ç®—å™¨ç¨‹åºå½“ä¸­çš„calculate()æ–¹æ³•ï¼Œå®ƒçš„è¿”å›å€¼å°±æ˜¯å¯ä¸ºç©ºçš„ï¼Œå½“æˆ‘ä»¬çš„è¾“å…¥ä¸åˆæ³•çš„æ—¶å€™ï¼Œcalculate()å°±ä¼šè¿”å›nullã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬ä¼šä¹ æƒ¯æ€§åœ°ç”¨nullæ¥è§£å†³ä»¥ä¸‹è¿™äº›åœºæ™¯çš„é—®é¢˜ï¼š</p><ul>\n<li>å½“å˜é‡è¿˜æ²¡åˆå§‹åŒ–çš„æ—¶å€™ï¼Œç”¨nullèµ‹å€¼ï¼›</li>\n<li>å½“å˜é‡çš„å€¼ä¸åˆæ³•çš„æ—¶å€™ï¼Œç”¨nullèµ‹å€¼ï¼›</li>\n<li>å½“å˜é‡çš„å€¼è®¡ç®—é”™è¯¯çš„æ—¶å€™ï¼Œç”¨nullèµ‹å€¼ã€‚</li>\n</ul><p>è™½ç„¶è¿™äº›åœºæ™¯ï¼Œæˆ‘ä»¬ä¸å€ŸåŠ©nullä¹Ÿå¯ä»¥æ¼‚äº®åœ°è§£å†³ï¼Œä½†nullå…¶å®æ‰æ˜¯æœ€æ–¹ä¾¿çš„è§£å†³æ–¹æ¡ˆã€‚å› ä¸ºæ€»çš„æ¥è¯´ï¼Œnullä»£è¡¨äº†ä¸€åˆ‡ä¸æ­£å¸¸çš„å€¼ã€‚å¦‚æœæ²¡æœ‰äº†nullï¼Œæˆ‘ä»¬ç¼–ç¨‹çš„æ—¶å€™å°†ä¼šé¢ä¸´å¾ˆå¤šå›°éš¾ã€‚</p><!-- [[[read_end]]] --><p>æ‰€ä»¥ï¼Œnullå¯¹äºæˆ‘ä»¬å¼€å‘è€…æ¥è¯´ï¼Œæ˜¯ä¸€æŠŠåŒåˆƒå‰‘ï¼Œæˆ‘ä»¬æ—¢éœ€è¦å€ŸåŠ©å®ƒæä¾›çš„ä¾¿åˆ©ï¼Œè¿˜éœ€è¦é¿å¼€å®ƒå¼•å‡ºçš„é—®é¢˜ã€‚è¿™æ˜¯ä¸€ç§å–èˆï¼Œæˆ‘ä»¬è¦åœ¨nullçš„åˆ©ä¸å¼Šå½“ä¸­æ‰¾åˆ°ä¸€ä¸ªå¹³è¡¡ç‚¹ã€‚è€Œä¸”ï¼Œè¿™é‡Œçš„å¹³è¡¡ç‚¹ï¼Œåœ¨ä¸åŒçš„åœºæ™¯ä¸­æ˜¯ä¸ä¸€æ ·çš„ã€‚</p><p>é‚£ä¹ˆï¼Œæ€ä¹ˆæ‰èƒ½æŠŠæ¡å¥½nullçš„å¹³è¡¡ç‚¹å‘¢ï¼Ÿè¿™å°±ä½“ç°å‡º<strong>ç©ºå®‰å…¨æ€ç»´</strong>çš„é‡è¦æ€§äº†ã€‚</p><h2>Javaçš„ç©ºå®‰å…¨æ€ç»´</h2><p>åœ¨æ­£å¼ç ”ç©¶Kotlinçš„ç©ºå®‰å…¨æ€ç»´ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹Javaæ˜¯å¦èƒ½ç»™æˆ‘ä»¬å¸¦æ¥ä¸€äº›çµæ„Ÿã€‚</p><p>åœ¨Javaå½“ä¸­ï¼Œå…¶å®ä¹Ÿæœ‰ä¸€äº›æ‰‹æ®µæ¥è§„é¿NPEï¼Œæœ€å¸¸è§çš„æ‰‹æ®µï¼Œå½“ç„¶å°±æ˜¯<strong>åˆ¤ç©º</strong>ï¼Œè¿™æ˜¯<a href=\"https://zh.wikipedia.org/wiki/%E9%98%B2%E5%BE%A1%E6%80%A7%E7%BC%96%E7%A8%8B\">é˜²å¾¡å¼ç¼–ç¨‹</a>çš„ä¸€ç§ä½“ç°ï¼Œåº”ç”¨èŒƒå›´ä¹Ÿå¾ˆå¹¿æ³›ã€‚</p><p>å¦å¤–ä¸€ç§æ‰‹æ®µæ˜¯@Nullableã€@NotNullä¹‹ç±»çš„<strong>æ³¨è§£</strong>ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨è¿™æ ·çš„æ³¨è§£æ¥å‘Šè¯‰IDEå“ªäº›å˜é‡æ˜¯å¯èƒ½ä¸ºç©ºçš„ï¼Œå“ªäº›æ˜¯ä¸å¯èƒ½ä¸ºç©ºçš„ï¼ŒIDEä¼šå€ŸåŠ©è¿™äº›æ³¨è§£ä¿¡æ¯æ¥å¸®æˆ‘ä»¬è§„é¿NPEã€‚</p><p>ä¸è¿‡ï¼Œæ³¨è§£è¿™æ ·çš„æ–¹å¼ï¼Œå®é™…æ•ˆæœå¹¶ä¸å¥½ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªåŸå› ï¼šä¸€æ–¹é¢æ˜¯æ³¨è§£å¾ˆéš¾åœ¨ä»£ç ä¸­å¤§é¢ç§¯ä½¿ç”¨ï¼Œè¿™å…¨ä¾èµ–äºå¼€å‘è€…çš„ä¹ æƒ¯ï¼Œå¾ˆéš¾åœ¨å¤§å‹å›¢é˜Ÿä¸­æ¨è¡Œï¼Œå³ä½¿æ¨è¡Œäº†ä¹Ÿä¼šå½±å“å¼€å‘æ•ˆç‡ï¼›å¦ä¸€æ–¹é¢ï¼Œå³ä½¿åœ¨å·¥ç¨‹å½“ä¸­å¤§é¢ç§¯æ¨è¡Œå¯ç©ºæ³¨è§£ï¼Œä¹Ÿæ— æ³•å®Œå…¨è§£å†³NPEçš„é—®é¢˜ã€‚</p><p>æƒ³è±¡ä¸€ä¸‹ï¼Œè™½ç„¶æˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°çš„å‚æ•°ä»¥åŠè¿”å›å€¼ä¸Šé¢éƒ½æ ‡æ³¨å¯ç©ºæ€§ï¼Œä½†æ— æ³•ä¸ºæ¯ä¸€ä¸ªå˜é‡ã€æ¯ä¸€ç§ç±»å‹ï¼Œéƒ½æ ‡æ³¨è¿™äº›å¯ç©ºä¿¡æ¯ã€‚å› æ­¤ï¼Œå¯ç©ºæ³¨è§£è¿™æ ·çš„æ–¹å¼ï¼Œå¿…ç„¶æ˜¯ä¼šç•™ä¸‹å¾ˆå¤šæ­»è§’çš„ã€‚</p><p>è¿˜æœ‰ä¸€ç§æ‰‹æ®µï¼Œæ˜¯Java 1.8å½“ä¸­å¼•å…¥çš„Optionalï¼Œè¿™ç§æ‰‹æ®µçš„æ ¸å¿ƒæ€è·¯å°±æ˜¯<strong>å°è£…æ•°æ®</strong>ï¼Œä¸å†ç›´æ¥ä½¿ç”¨nullã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä»å‰æˆ‘ä»¬ç›´æ¥ä½¿ç”¨Stringç±»ï¼Œä½¿ç”¨Optionalä»¥åï¼Œæˆ‘ä»¬å°±å¾—æ”¹æˆ <code>Optional&lt;String&gt;</code>ã€‚å¦‚æœæˆ‘ä»¬è¦åˆ¤æ–­å€¼æ˜¯å¦ä¸ºç©ºï¼Œå°±ç”¨optional.isPresent()ã€‚</p><p>ä½†Optionalæœ‰å‡ ä¸ªç¼ºç‚¹ï¼š</p><ul>\n<li>ç¬¬ä¸€ç‚¹ï¼Œå¢åŠ äº†ä»£ç çš„å¤æ‚åº¦ï¼›</li>\n<li>ç¬¬äºŒç‚¹ï¼Œé™ä½äº†ä»£ç çš„æ‰§è¡Œæ•ˆç‡ï¼ŒOptionalçš„æ•ˆç‡è‚¯å®šæ¯”Stringæ›´ä½ï¼›</li>\n<li>æœ€åï¼Œä¸šç•Œæ™®åŠåº¦ä¸é«˜ã€‚è¿™å…¶å®ä¹Ÿæ˜¯ç”±å‰é¢ä¸¤è€…è€Œå†³å®šçš„ï¼Œå³ä½¿æˆ‘ä»¬åœ¨è‡ªå·±çš„å·¥ç¨‹ä¸­ç”¨äº†Optionalï¼Œè€Œç¬¬ä¸‰æ–¹SDKå½“ä¸­æ²¡æœ‰çš„è¯ï¼Œå®ƒä¹Ÿå¾ˆéš¾ä¸å…¶äº¤äº’ã€‚</li>\n</ul><p>ç”±æ­¤å¯è§ï¼ŒJavaè§£å†³NPEçš„ä¸‰ç§æ€è·¯éƒ½æ— æ³•ä»¤äººæ»¡æ„ã€‚</p><p>é‚£ä¹ˆï¼Œç°åœ¨å‡è®¾ä½ è‡ªå·±å°±æ˜¯Kotlinè¯­è¨€çš„è®¾è®¡è€…ï¼Œåœ¨Javaçš„ä¸‰ç§æ€è·¯çš„åŸºç¡€ä¸Šï¼Œä½ èƒ½æƒ³åˆ°ä»€ä¹ˆæ›´å¥½çš„æ€è·¯å—ï¼Ÿ</p><p>å‰é¢æˆ‘ä»¬æ›¾æåˆ°äº†ï¼Œä½¿ç”¨@NotNullä¹‹ç±»çš„æ³¨è§£ï¼Œæ˜¯å­˜åœ¨æ­»è§’çš„ï¼Œå› ä¸ºæˆ‘ä»¬æ— æ³•ä¸ºæ¯ä¸€ä¸ªå˜é‡ã€æ¯ä¸€ä¸ªç±»å‹éƒ½åŠ ä¸Šå¯ç©ºæ³¨è§£ã€‚ä¸€æ–¹é¢æ˜¯æ³¨è§£çš„Targetå­˜åœ¨é™åˆ¶ï¼Œå¦ä¸€æ–¹é¢æ˜¯å¼€å‘æ•ˆç‡ä¹Ÿä¼šæ€¥å‰§ä¸‹é™ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦çš„å…¶å®æ˜¯ä¸€ç§<strong>ç®€æ´ï¼Œä¸”èƒ½ä¸ºæ¯ä¸€ç§ç±»å‹éƒ½æ ‡æ˜å¯ç©ºæ€§çš„æ–¹å¼ã€‚</strong>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬è‡ªç„¶è€Œç„¶å°±èƒ½æƒ³åˆ°ä¸€ä¸ªæ›´å¥½çš„æ–¹æ¡ˆï¼Œé‚£å°±æ˜¯ï¼š<strong>ä»ç±»å‹ç³»ç»Ÿä¸‹æ‰‹</strong>ã€‚</p><h2>Kotlinçš„ç©ºå®‰å…¨æ€ç»´</h2><p>Kotlinè™½ç„¶æ˜¯ä¸Javaå…¼å®¹çš„ï¼Œä½†æ˜¯å®ƒçš„ç±»å‹ç³»ç»Ÿä¸Javaå´æœ‰å¾ˆå¤§çš„ä¸åŒã€‚åœ¨Javaå½“ä¸­ï¼Œæˆ‘ä»¬ç”¨Stringä»£è¡¨å­—ç¬¦ä¸²ç±»å‹ã€‚è€Œåœ¨Kotlinå½“ä¸­ï¼ŒåŒæ ·æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œå®ƒå´æœ‰ä¸‰ç§è¡¨ç¤ºæ–¹æ³•ã€‚</p><ul>\n<li>Stringï¼Œä¸å¯ä¸ºç©ºçš„å­—ç¬¦ä¸²ï¼›</li>\n<li>String?ï¼Œå¯èƒ½ä¸ºç©ºçš„å­—ç¬¦ä¸²ï¼›</li>\n<li>String!ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯å¯èƒ½ä¸ºç©ºã€‚</li>\n</ul><p>è¿™æœ‰ç‚¹åƒæ˜¯ç”µå½±é‡Œçš„åˆ†èº«æœ¯ï¼ŒJavaå½“ä¸­çš„ä¸€ä¸ªæ¦‚å¿µï¼Œåœ¨Kotlinå½“ä¸­åˆ†åŒ–å‡ºäº†ä¸‰ç§æ¦‚å¿µã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/70/82/706f679056d9074byycc66697a05dd82.jpg?wh=2000x740\" alt=\"\"></p><p>Kotlinçš„å¯ç©ºï¼ˆString?ï¼‰ã€ä¸å¯ç©ºï¼ˆStringï¼‰ï¼Œæˆ‘ä»¬åœ¨<a href=\"https://time.geekbang.org/column/article/472154\">ç¬¬1è®²</a>å°±å·²ç»ä»‹ç»è¿‡äº†ã€‚Kotlinè¿™æ ·çš„ç±»å‹ç³»ç»Ÿï¼Œè®©å¼€å‘è€…å¿…é¡»æ˜ç¡®è§„å®šæ¯ä¸€ä¸ªå˜é‡ç±»å‹æ˜¯å¦å¯èƒ½ä¸ºç©ºï¼Œé€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼ŒKotlinç¼–è¯‘å™¨å°±èƒ½å¸®æˆ‘ä»¬è§„é¿NPEäº†ã€‚</p><p>å¯ä»¥è¯´ï¼Œåœ¨ä¸ä¸Kotlinä»¥å¤–çš„ç¯å¢ƒè¿›è¡Œäº¤äº’çš„æƒ…å†µä¸‹ï¼Œä»…ä»…åªæ˜¯çº¯Kotlinå¼€å‘å½“ä¸­ï¼ŒKotlinç¼–è¯‘å™¨å·²ç»å¯ä»¥å¸®æˆ‘ä»¬æ¶ˆç­NPEäº†ã€‚ä¸è¿‡ï¼Œç°ä»£å•†ä¸šåŒ–çš„è½¯ä»¶å½“ä¸­ï¼Œå…¨æ ˆä½¿ç”¨Kotlinæ˜¯ä¸ç°å®çš„ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œæˆ‘ä»¬å°†ä¸å¾—ä¸ä¸å…¶ä»–è¯­è¨€ç¯å¢ƒæ‰“äº¤é“ï¼Œå…¶ä¸­æœ€å¸¸è§çš„å°±æ˜¯Javaã€‚</p><h3>Kotlinã€Javaæ··åˆç¼–ç¨‹çš„ç©ºå®‰å…¨</h3><p>åœ¨Javaå½“ä¸­ï¼Œæ˜¯ä¸å­˜åœ¨å¯ç©ºç±»å‹è¿™ä¸ªæ¦‚å¿µçš„ã€‚å› æ­¤ï¼Œåœ¨Kotlinå½“ä¸­ï¼Œæˆ‘ä»¬æŠŠJavaæœªçŸ¥å¯ç©ºæ€§çš„ç±»å‹å«åš<strong>å¹³å°ç±»å‹</strong>ï¼Œæ¯”å¦‚ï¼šString!ã€‚æ‰€æœ‰Javaå½“ä¸­çš„ä¸ç¡®å®šå¯ç©ºæ€§çš„ç±»å‹ï¼Œåœ¨Kotlinçœ‹æ¥éƒ½æ˜¯å¹³å°ç±»å‹ï¼Œç”¨â€œ!â€æ¥è¡¨ç¤ºã€‚</p><p>è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼š</p><pre><code class=\"language-java\">// Java ä»£ç \n\npublic class NullJava {\n    public static String getMsg(String s) {\n        return s + \"Kotlin\";\n    }\n\n    @Nullable\n    public static String getNullableString(@Nullable String s) {\n        return s + \"Kotlin\";\n    }\n\n    @NotNull\n    public static String getNotNullString(@NotNull String s) {\n        return \"Hello World.\";\n    }\n}\n</code></pre><p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¸€å…±å®šä¹‰äº†ä¸‰ä¸ªJavaæ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªgetMsg()æˆ‘ä»¬ç›´æ¥è¿”å›äº†ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½†æ˜¯æ²¡æœ‰ç”¨å¯ç©ºæ³¨è§£æ ‡æ³¨ï¼›ç¬¬äºŒä¸ªæ–¹æ³•getNullableString()åˆ™ä½¿ç”¨äº†@Nullableä¿®é¥°äº†ï¼Œä»£è¡¨å®ƒçš„å‚æ•°å’Œè¿”å›å€¼æ˜¯å¯èƒ½ä¸ºç©ºçš„ï¼›ç¬¬ä¸‰ä¸ªæ–¹æ³•getNotNullString()åˆ™æ˜¯ç”¨çš„@NotNullä¿®é¥°çš„ï¼Œä»£è¡¨å®ƒçš„å‚æ•°å’Œè¿”å›å€¼æ˜¯ä¸å¯èƒ½ä¸ºç©ºçš„ã€‚</p><p>è€Œä»¥ä¸Šä¸‰ä¸ªJavaæ–¹æ³•åœ¨Kotlinè°ƒç”¨çš„æ—¶å€™ï¼Œå°±å‡ºç°ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p><pre><code class=\"language-plain\">// Kotlinä»£ç \n\nfun testPlatformType() {\n    val nullableMsg: String? = NullJava.getNullableString(null)\n    val notNullMsg: String = NullJava.getNotNullString(\"Hey,\")\n\n    val platformMsg1: String? = NullJava.getMsg(null)\n    val platformMsg2: String = NullJava.getMsg(\"Hello\")\n}\n</code></pre><p>ä¹Ÿå°±æ˜¯ï¼Œç”±äºJavaå½“ä¸­çš„getNullableString()æ˜¯ç”±@Nullableä¿®é¥°çš„ï¼Œå› æ­¤Kotlinç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å°†å…¶è¯†åˆ«ä¸ºå¯ç©ºç±»å‹â€œString?â€ï¼›è€ŒgetNotNullString()æ˜¯ç”±@NotNullä¿®é¥°çš„ï¼Œå› æ­¤Kotlinç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å°†å…¶è¯†åˆ«ä¸ºä¸å¯ç©ºç±»å‹â€œStringâ€ã€‚</p><p>æœ€åï¼Œæ˜¯getMsg()ï¼Œç”±äºè¿™ä¸ªJavaæ–¹æ³•æ²¡æœ‰ä»»ä½•å¯ç©ºæ³¨è§£ï¼Œå› æ­¤ï¼Œå®ƒåœ¨Kotlinä»£ç ä¸­ä¼šè¢«è®¤ä¸ºæ˜¯å¹³å°ç±»å‹â€œString!â€ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/24/9f/24516bc822c6187ca3be74c26a06859f.png?wh=1208x328\" alt=\"å›¾ç‰‡\"></p><p>å¯¹äºå¹³å°ç±»å‹ï¼ŒKotlinä¼šè®¤ä¸ºï¼Œå®ƒæ—¢èƒ½è¢«å½“ä½œå¯ç©ºç±»å‹â€œString?â€ï¼Œä¹Ÿå¯ä»¥è¢«å½“ä½œä¸å¯ç©ºç±»å‹â€œStringâ€ã€‚Kotlinæ²¡æœ‰å¼ºåˆ¶å¼€å‘è€…ï¼Œè€Œæ˜¯å°†é€‰æ‹©æƒäº¤ç»™äº†å¼€å‘è€…ã€‚æ‰€ä»¥æˆ‘ä»¬å¼€å‘è€…ï¼Œå°±éœ€è¦åœ¨è¿™ä¸­é—´å¯»æ‰¾å¹³è¡¡ç‚¹ã€‚</p><p>æˆ‘ä»¬ä¸èƒ½å°†å¹³å°ç±»å‹ä¸€æ¦‚è®¤ä¸ºæ˜¯ä¸å¯ç©ºçš„ï¼Œå› ä¸ºè¿™ä¼šå¼•å‘NPEï¼›æˆ‘ä»¬ä¹Ÿä¸èƒ½ä¸€æ¦‚è®¤ä¸ºå¹³å°ç±»å‹æ˜¯å¯ç©ºçš„ï¼Œå› ä¸ºè¿™ä¼šå¯¼è‡´æˆ‘ä»¬çš„ä»£ç å‡ºç°è¿‡å¤šçš„ç©ºå®‰å…¨æ£€æŸ¥ã€‚</p><p>åœ¨è¿™é‡Œï¼Œç»“åˆæˆ‘ä¸ªäººçš„ä¸€äº›å®è·µç»éªŒæ¥çœ‹ï¼Œå¯¹äºKotlinä¸Javaæ··åˆç¼–ç¨‹çš„æƒ…å†µï¼Œè¿™å‡ ä¸ªå»ºè®®ä½ å¯ä»¥å‚è€ƒä¸€ä¸‹ï¼š</p><ul>\n<li>å¯¹äºå·¥ç¨‹ä¸­çš„<strong>Javaæºä»£ç </strong>ï¼Œå½“å®ƒä¸Kotlinäº¤äº’çš„æ—¶å€™ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡ä¸ºå®ƒçš„å‚æ•°ä¸è¿”å›å€¼åŠ ä¸Šå¯ç©ºçš„æ³¨è§£ã€‚æ³¨æ„ï¼Œè¿™é‡Œå¹¶ä¸æ˜¯è¯´è¦ä¸€æ¬¡æ€§ä¸ºæ‰€æœ‰Javaä»£ç éƒ½åŠ ä¸Šæ³¨è§£ï¼Œè€Œæ˜¯å½“å®ƒä¸Kotlinäº¤äº’çš„æ—¶å€™ã€‚è¿™ä¸ªéœ€æ±‚å…¶å®å¯ä»¥é€šè¿‡ä¸€äº›é™æ€ä»£ç æ£€æµ‹æ–¹æ¡ˆæ¥å®ç°ã€‚</li>\n<li>å¯¹äºå·¥ç¨‹å½“ä¸­çš„<strong>Java SDK</strong>ï¼Œå½“å®ƒéœ€è¦ä¸Kotlinäº¤äº’çš„æ—¶å€™ï¼Œå¦‚æœSDKæ²¡æœ‰å®Œå–„çš„å¯ç©ºæ³¨è§£ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨SDKä¸ä¸šåŠ¡ä»£ç ä¹‹é—´å»ºç«‹ä¸€ä¸ªæŠ½è±¡å±‚ï¼Œå¯¹Java SDKè¿›è¡Œå°è£…ã€‚</li>\n</ul><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±èƒ½æ€»ç»“å‡ºKotlinç©ºå®‰å…¨çš„ç¬¬ä¸€æ¡å‡†åˆ™ï¼š<strong>è­¦æƒ•Kotlinä»¥å¤–çš„æ•°æ®ç±»å‹ã€‚</strong></p><p>ä»<strong>è¯­è¨€è§’åº¦</strong>ä¸Šçœ‹ï¼ŒKotlinä¸ä»…åªæ˜¯å’ŒJavaäº¤äº’ï¼Œå®ƒè¿˜å¯ä»¥ä¸å…¶ä»–è¯­è¨€äº¤äº’ï¼Œè€Œå¦‚æœå…¶ä»–è¯­è¨€æ²¡æœ‰å¯ç©ºçš„ç±»å‹ç³»ç»Ÿï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¸€å®šè¦è­¦æƒ•èµ·æ¥ã€‚</p><p>å¦å¤–ï¼Œä»<strong>ç¯å¢ƒè§’åº¦</strong>ä¸Šçœ‹ï¼ŒKotlinè¿˜å¯ä»¥ä¸å…¶ä»–å¤–ç•Œç¯å¢ƒäº¤äº’ï¼Œæ¯”å¦‚å‘èµ·ç½‘ç»œè¯·æ±‚ã€è§£æç½‘ç»œè¯·æ±‚ã€è¯»å–æ•°æ®åº“ï¼Œç­‰ç­‰ã€‚è¿™äº›å¤–ç•Œçš„ç¯å¢ƒå½“ä¸­çš„æ•°æ®ï¼Œå¾€å¾€ä¹Ÿæ˜¯æ²¡æœ‰å¯ç©ºç±»å‹ç³»ç»Ÿçš„ï¼Œè¿™æ—¶å€™æˆ‘ä»¬æ›´è¦è­¦æƒ•ã€‚</p><blockquote>\n<p>ä¸¾ä¸ªä¾‹å­ï¼šå¾ˆå¤šKotlinå¼€å‘è€…ä¼šåœ¨JSONè§£æçš„æ—¶å€™ï¼Œé‡åˆ°NPEçš„é—®é¢˜ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªç›¸å½“æ£˜æ‰‹çš„é—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜æˆ‘ä»¬ä¼šåœ¨åé¢çš„å®æˆ˜é¡¹ç›®ä¸­è¿›ä¸€æ­¥åˆ†æã€‚</p>\n</blockquote><p>èŠå®Œäº†Kotlinä¸å¤–ç•Œäº¤äº’çš„ç©ºå®‰å…¨å‡†åˆ™åï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹çº¯Kotlinå¼€å‘çš„å‡†åˆ™ã€‚</p><h3>çº¯Kotlinçš„ç©ºå®‰å…¨</h3><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨çº¯Kotlinå¼€å‘ï¼Œç¼–è¯‘å™¨å·²ç»å¯ä»¥å¸®åŠ©è§£å†³å¤§éƒ¨åˆ†çš„ç©ºå®‰å…¨é—®é¢˜äº†ã€‚ä¸è¿‡ï¼Œçº¯Kotlinå¼€å‘ï¼Œä»ç„¶æœ‰<strong>ä¸‰å¤§å‡†åˆ™</strong>éœ€è¦ä¸¥æ ¼éµå®ˆã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±é€šè¿‡ä¸¤ä¸ªå®é™…åœºæ™¯ï¼Œæ¥å…·ä½“å­¦ä¹ ä¸‹è¿™ä¸‰ä¸ªå‡†åˆ™ã€‚</p><ul>\n<li><strong>éç©ºæ–­è¨€</strong></li>\n</ul><p>åœ¨å‰é¢ï¼Œæˆ‘ä»¬æ›¾ç»å­¦ä¹ è¿‡Kotlinçš„ç©ºå®‰å…¨è°ƒç”¨è¯­æ³•â€œ?.â€ï¼Œå…¶å®ï¼ŒKotlinè¿˜æä¾›äº†ä¸€ä¸ª<strong>éç©ºå®‰å…¨</strong>çš„è°ƒç”¨è¯­æ³•â€œ!!.â€ã€‚è¿™æ ·çš„è¯­æ³•ï¼Œæˆ‘ä»¬ä¹Ÿå«åšéç©ºæ–­è¨€ã€‚è®©æˆ‘ä»¬æ¥çœ‹ä¸ªå…·ä½“çš„ä¾‹å­ï¼š</p><pre><code class=\"language-plain\">fun testNPE(msg: String?) {\n//            éç©ºæ–­è¨€\n//              â†“\n    val i = msg!!.length\n}\n\nfun main() {\n    NullExample.testNPE(null)\n}\n</code></pre><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬è¦è°ƒç”¨â€œString?â€ç±»å‹çš„æˆå‘˜ï¼Œéœ€è¦ä½¿ç”¨ç©ºå®‰å…¨è°ƒç”¨ï¼Œè€Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨éç©ºæ–­è¨€ï¼Œå¼ºè¡Œè°ƒç”¨äº†å®ƒçš„æˆå‘˜ã€‚æ¯«æ— ç–‘é—®ï¼Œä¸Šé¢çš„ä»£ç å°±ä¼šäº§ç”Ÿç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p><p>çœ‹åˆ°è¿™é‡Œï¼Œç›¸ä¿¡ä½ é©¬ä¸Šå°±èƒ½æ€»ç»“å‡ºç¬¬äºŒæ¡ç©ºå®‰å…¨å‡†åˆ™äº†ï¼š<strong>ç»ä¸ä½¿ç”¨éç©ºæ–­è¨€â€œ!!.â€</strong>ã€‚</p><p>çœ‹åˆ°è¿™æ¡å‡†åˆ™ï¼Œä¹Ÿè®¸å¾ˆå¤šäººéƒ½ä¼šè§‰å¾—ï¼šè¿™ä¸æ˜¯åºŸè¯å—ï¼Ÿè°ä¼šå–œæ¬¢ç”¨éç©ºæ–­è¨€å‘¢ï¼Ÿä½†æ˜¯å•Šï¼Œåœ¨æˆ‘è¿‡å»çš„å‡ å¹´ç»éªŒå½“ä¸­ï¼Œç¡®å®è§åˆ°è¿‡ä¸å°‘Kotlinæ–­è¨€ç›¸å…³çš„ä»£ç ï¼Œå®ƒä»¬å¤§è‡´æœ‰ä¸¤ä¸ªåŸå› ã€‚</p><p>ç¬¬ä¸€ä¸ªåŸå› ï¼Œæ˜¯å½“æˆ‘ä»¬å€ŸåŠ©IDEçš„â€œConvert Java File To Kotlin Fileâ€çš„æ—¶å€™ï¼Œè¿™ä¸ªå·¥å…·ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬ç”Ÿæˆå¸¦æœ‰<strong>éç©ºæ–­è¨€</strong>çš„ä»£ç ã€‚è€Œæˆ‘ä»¬åœ¨è½¬æ¢å®Œä»£ç ä»¥åï¼Œå´æ²¡æœ‰reviewï¼Œè¿›è€Œå°†éç©ºæ–­è¨€å¸¦åˆ°äº†ç”Ÿäº§ç¯å¢ƒå½“ä¸­ã€‚</p><p>å°±ä»¥ä¸‹é¢è¿™æ®µä»£ç ä¸ºä¾‹ï¼š</p><pre><code class=\"language-java\">// Java ä»£ç \n\npublic class JavaConvertExample {\n    private String name = null;\n\n    void init() {\n        name = \"\";\n    }\n\n    void test(){\n        if (name != null) {\n            int count = name.length();\n        }\n    }\n}\n</code></pre><p>è¿™æ®µä»£ç æ˜¯éå¸¸å…¸å‹çš„Javaä»£ç ï¼Œå…¶ä¸­æˆ‘ä»¬ä¹Ÿå·²ç»ä½¿ç”¨äº†ifæ¥åˆ¤æ–­nameæ˜¯å¦ä¸ºç©ºï¼Œç„¶åå†è°ƒç”¨å®ƒçš„lengthã€‚</p><p>é‚£ä¹ˆï¼Œå¦‚æœæˆ‘ä»¬å€ŸåŠ©IDEçš„è½¬æ¢å·¥å…·ï¼Œå®ƒä¼šå˜æˆä»€ä¹ˆæ ·å‘¢ï¼Ÿ</p><pre><code class=\"language-plain\">class JavaConvertExample {\n    private var name: String? = null\n    fun init() {\n        name = \"\"\n    }\n\n    fun foo() {\n        name = null;\n    }\n\n    fun test() {\n        if (name != null) {\n//                        éç©ºæ–­è¨€\n//                           â†“\n            val count = name!!.length\n        }\n    }\n}\n</code></pre><p>å¯ä»¥çœ‹åˆ°è½¬æˆKotlinä»£ç ä»¥åï¼Œæˆ‘ä»¬test()æ–¹æ³•å½“ä¸­å‡ºç°äº†<strong>éç©ºæ–­è¨€</strong>ã€‚</p><p>ä½ ä¹Ÿè®¸ä¼šå¥½å¥‡ï¼ŒKotlinä¸æ˜¯æ”¯æŒSmart Castå—ï¼Ÿæ—¢ç„¶æˆ‘ä»¬å·²ç»åœ¨ifå½“ä¸­åˆ¤æ–­äº†nameä¸ç­‰äºç©ºï¼Œé‚£ä¹ˆï¼Œå®ƒä¸æ˜¯ä¼šè¢«Smart Castæˆä¸ºä¸€ä¸ªéç©ºç±»å‹å—ï¼Ÿæ¯•ç«Ÿï¼Œæˆ‘ä»¬ç»å¸¸èƒ½å†™å‡ºè¿™æ ·çš„ä»£ç ï¼š</p><pre><code class=\"language-plain\">val name: String? = getLocalName()\nif (name != null) {\n//   åˆ¤æ–­éç©ºåï¼Œè¢«è½¬æ¢æˆéç©ºç±»å‹äº†\n//      â†“\n    name.length\n}\n</code></pre><p>é‚£ä¹ˆï¼Œå›åˆ°æˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­å½“ä¸­ï¼Œå¦‚æœæˆ‘ä»¬å°†è½¬æ¢å‡ºæ¥çš„éç©ºæ–­è¨€è¯­æ³•åˆ é™¤æ‰ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p><p><img src=\"https://static001.geekbang.org/resource/image/25/ae/253579d865aa407891025b809b8ebbae.gif?wh=1088x722\" alt=\"å›¾ç‰‡\"></p><p>å¯è§ï¼Œå½“æˆ‘ä»¬åˆ é™¤æ‰éç©ºæ–­è¨€ä»¥åï¼ŒIDEæŠ¥é”™äº†ï¼Œå¤§è‡´æ„æ€æ˜¯ï¼Œåœ¨è¿™ç§åœºæ™¯ä¸‹ï¼ŒSmart Castæ˜¯ä¸å¯èƒ½å‘ç”Ÿçš„ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬åˆ¤ç©ºä»¥åçš„ä»£ç æ˜æ˜å°±å¾ˆå®‰å…¨äº†å•Šï¼ä¸ºä»€ä¹ˆä¸èƒ½è‡ªåŠ¨è½¬æ¢æˆéç©ºç±»å‹ï¼Ÿ</p><p>è¿™å°±æ˜¯å¾ˆå¤šKotlinå¼€å‘è€…ä½¿ç”¨éç©ºæ–­è¨€çš„ç¬¬äºŒä¸ªåŸå› ï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹ï¼ŒSmart Castå¤±æ•ˆäº†ï¼Œ<strong>å³ä½¿æˆ‘ä»¬åˆ¤ç©ºäº†ï¼Œä¹Ÿå…ä¸äº†è¿˜æ˜¯è¦ç»§ç»­ä½¿ç”¨éç©ºæ–­è¨€</strong>ã€‚</p><p>æ³¨æ„äº†ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå¹¶ä¸æ˜¯IDEå‡ºç°äº†Bugã€‚å®ƒåœ¨è¿™ç§æƒ…å†µä¸‹ä¸æ”¯æŒSmart Castæ˜¯æœ‰åŸå› çš„ã€‚æˆ‘ç»™ä½ ä¸¾ä¸ªä¾‹å­ï¼š</p><pre><code class=\"language-plain\">class JavaConvertExample {\n    private var name: String? = null\n    fun init() {\n        name = \"\"\n    }\n\n    fun foo() {\n        name = null;\n    }\n\n    fun test() {\n        if (name != null) {\n            // å‡ ç™¾è¡Œä»£ç \n            foo()\n            //å‡ ç™¾è¡Œä»£ç \n            val count = name!!.length\n        }\n    }\n}\n</code></pre><p>å½“æˆ‘ä»¬çš„ç¨‹åºé€»è¾‘å˜å¾—å¤æ‚çš„æ—¶å€™ï¼Œåœ¨åˆ¤ç©ºåï¼Œæˆ‘ä»¬å¯èƒ½åˆä¼šä¸å°å¿ƒæ”¹å˜nameçš„å€¼ï¼Œæ¯”å¦‚ä¸Šé¢çš„foo()å‡½æ•°ï¼Œè¿™æ—¶å€™æˆ‘ä»¬çš„éç©ºæ–­è¨€å°±ä¼šäº§ç”ŸNPEã€‚è¿™ä¹Ÿæ˜¯Kotlinç¼–è¯‘å™¨æ— æ³•å¸®æˆ‘ä»¬åšSmart Castçš„åŸå› ã€‚</p><p>é‚£ä¹ˆï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åˆ°åº•è¯¥å¦‚ä½•é¿å…ä½¿ç”¨éç©ºæ–­è¨€å‘¢ï¼Ÿä¸»è¦æœ‰è¿™ä¹ˆå‡ ç§æ–¹æ³•ã€‚</p><p><strong>ç¬¬ä¸€ç§</strong>ï¼Œé¿å…ç›´æ¥è®¿é—®æˆå‘˜å˜é‡æˆ–è€…å…¨å±€å˜é‡ï¼Œå°†å…¶æ”¹ä¸ºä¼ å‚çš„å½¢å¼ï¼š</p><pre><code class=\"language-plain\">//    æ”¹ä¸ºå‡½æ•°å‚æ•°\n//        â†“\nfun test(name: String?) {\n    if (name != null) {\n//             å‡½æ•°å‚æ•°æ”¯æŒSmart Cast\n//                      â†“\n        val count = name.length\n    }\n}\n</code></pre><p>åœ¨Kotlinå½“ä¸­ï¼Œå‡½æ•°çš„å‚æ•°æ˜¯ä¸å¯å˜çš„ï¼Œå› æ­¤ï¼Œå½“æˆ‘ä»¬å°†å¤–éƒ¨çš„æˆå‘˜å˜é‡æˆ–è€…å…¨å±€å˜é‡ä»¥å‡½æ•°å‚æ•°çš„å½¢å¼ä¼ è¿›æ¥ä»¥åï¼Œå®ƒå¯ä»¥ç”¨äºSmart Castäº†ã€‚</p><p><strong>ç¬¬äºŒç§</strong>ï¼Œé¿å…ä½¿ç”¨å¯å˜å˜é‡varï¼Œæ”¹ä¸ºvalä¸å¯å˜å˜é‡ï¼š</p><pre><code class=\"language-plain\">class JavaConvertExample {\n//       ä¸å¯å˜å˜é‡\n//           â†“\n    private val name: String? = null\n\n    fun test() {\n        if (name != null) {\n//               ä¸å¯å˜å˜é‡æ”¯æŒSmart Cast\n//                          â†“\n            val count = name.length\n        }\n    }\n}\n</code></pre><p>è¿™ç§æ–¹å¼å¾ˆå¥½ç†è§£ï¼Œæ—¢ç„¶å¼•å‘é—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯å¯å˜æ€§å¯¼è‡´çš„ï¼Œæˆ‘ä»¬ç›´æ¥å°†å…¶<strong>æ”¹ä¸ºä¸å¯å˜</strong>çš„å³å¯ã€‚ä»è¿™é‡Œï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°â€œç©ºå®‰å…¨â€ä¸â€œä¸å¯å˜æ€§â€ä¹‹é—´çš„å…³è”ã€‚</p><p><strong>ç¬¬ä¸‰ç§</strong>ï¼Œå€ŸåŠ©ä¸´æ—¶çš„ä¸å¯å˜å˜é‡ï¼š</p><pre><code class=\"language-plain\">class JavaConvertExample {\n    private var name: String? = null\n\n    fun test() {\n//        ä¸å¯å˜å˜é‡\n//            â†“\n        val _name = name\n        if (_name != null) {\n            // åœ¨ifå½“ä¸­ï¼Œåªä½¿ç”¨_nameè¿™ä¸ªä¸´æ—¶å˜é‡\n            val count = _name.length\n        }\n    }\n}\n</code></pre><p>ä»¥ä¸Šä»£ç ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯å€ŸåŠ©äº†ä¸å¯å˜æ€§ã€‚è¿™ç§æ–¹å¼çœ‹èµ·æ¥æœ‰ç‚¹ä¸‘é™‹ï¼Œä½†å¦‚æœç¨å¾®å°è£…ä¸€ä¸‹ä¹Ÿæ˜¯æœ‰ç”¨çš„ï¼Œæ¯”å¦‚æ¥ä¸‹æ¥è¦ç”¨åˆ°çš„letã€‚</p><p><strong>ç¬¬å››ç§</strong>ï¼Œæ˜¯å€ŸåŠ©Kotlinæä¾›çš„æ ‡å‡†å‡½æ•°letï¼š</p><pre><code class=\"language-plain\">class JavaConvertExample {\n    private var name: String? = null\n\n    fun test() {\n//                      æ ‡å‡†å‡½æ•°\n//                         â†“\n        val count = name?.let { it.length }\n    }\n}\n</code></pre><p>è¿™ç§æ–¹å¼å’Œç¬¬ä¸‰ç§æ–¹å¼ï¼Œä»æœ¬è´¨ä¸Šæ¥è®²æ˜¯ç›¸ä¼¼çš„ï¼Œä½†æ˜¯æˆ‘ä»¬é€šè¿‡letå¯ä»¥æ›´åŠ ä¼˜é›…åœ°æ¥å®ç°åŒæ ·çš„éœ€æ±‚ã€‚</p><p><strong>ç¬¬äº”ç§</strong>ï¼Œæ˜¯å€ŸåŠ©Kotlinæä¾›çš„lateinitå…³é”®å­—ï¼š</p><pre><code class=\"language-plain\">class JavaConvertExample {\n//         ç¨ååˆå§‹åŒ–             ä¸å¯ç©º\n//            â†“                   â†“\n    private lateinit var name: String\n\n    fun init() {\n        name = \"Tom\"\n    }\n\n    fun test() {\n        if (this::name.isInitialized) {\n            val count = name.length\n        } else {\n            println(\"Please call init() first!\")\n        }\n    }\n}\n\nfun main() {\n    val example = JavaConvertExample()\n    example.init()\n    example.test()\n}\n</code></pre><p>å¦‚æœä½ è¶³å¤Ÿç»†å¿ƒï¼Œä½ ä¼šå‘ç°è¿™ç§æ€è·¯å…¶å®æ˜¯<strong>å®Œå…¨æŠ›å¼ƒå¯ç©ºæ€§</strong>çš„ã€‚æˆ‘ä»¬ç›´æ¥ç”¨lateinit varå®šä¹‰äº†ä¸å¯èƒ½ä¸ºç©ºçš„Stringç±»å‹ï¼Œç„¶åï¼Œå½“æˆ‘ä»¬è¦ç”¨åˆ°è¿™ä¸ªå˜é‡çš„æ—¶å€™ï¼Œå†å»åˆ¤æ–­è¿™ä¸ªå˜é‡æ˜¯å¦å·²ç»å®Œæˆäº†åˆå§‹åŒ–ã€‚</p><p>ç”±äºå®ƒçš„ç±»å‹æ˜¯ä¸å¯èƒ½ä¸ºç©ºçš„ï¼Œå› æ­¤æˆ‘ä»¬åˆå§‹åŒ–çš„æ—¶å€™ï¼Œå¿…é¡»ä¼ å…¥ä¸€ä¸ªéç©ºçš„å€¼ï¼Œè¿™å°±èƒ½ä¿è¯ï¼šåªè¦nameåˆå§‹åŒ–äº†ï¼Œå®ƒçš„å€¼å°±ä¸€å®šä¸ä¸ºç©ºã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°±å°†åˆ¤ç©ºé—®é¢˜å˜æˆäº†ä¸€ä¸ªåˆ¤æ–­æ˜¯å¦åˆå§‹åŒ–çš„é—®é¢˜ã€‚</p><p><strong>ç¬¬å…­ç§</strong>ï¼Œä½¿ç”¨by lazyå§”æ‰˜ï¼š</p><pre><code class=\"language-plain\">class JavaConvertExample {\n//         ä¸å¯å˜        éç©º   æ‡’åŠ è½½å§”æ‰˜\n//           â†“           â†“        â†“\n    private val name: String by lazy { init() }\n    \n    fun init() = \"Tom\"\n    \n    fun test() {\n        val count = name.length\n    }\n}\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å°†nameè¿™ä¸ªå˜é‡æ”¹ä¸ºäº†<strong>ä¸å¯å˜çš„éç©ºå±æ€§</strong>ï¼Œå¹¶ä¸”ï¼Œå€ŸåŠ©Kotlinçš„æ‡’åŠ è½½å§”æ‰˜æ¥å®Œæˆåˆå§‹åŒ–ã€‚å€ŸåŠ©è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å°½å¯èƒ½åœ°å»¶è¿Ÿåˆå§‹åŒ–ï¼ŒåŒæ—¶ï¼Œä¹Ÿæ¶ˆç­äº†å¯å˜æ€§ã€å¯ç©ºæ€§ã€‚</p><p>åˆ°è¿™é‡Œï¼Œç›¸ä¿¡ä½ å°±å¯ä»¥æ€»ç»“å‡ºç¬¬ä¸‰æ¡å‡†åˆ™äº†ï¼š<strong>å°½å¯èƒ½ä½¿ç”¨éç©ºç±»å‹</strong>ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å†æ¥çœ‹çœ‹å¦ä¸€ä¸ªåœºæ™¯ã€‚</p><ul>\n<li><strong>æ³›å‹å¯ç©ºæ€§</strong></li>\n</ul><p>åœ¨å­¦ä¹ <a href=\"https://time.geekbang.org/column/article/480022\">æ³›å‹</a>çš„æ—¶å€™ï¼Œæˆ‘æ›¾ç»ä»‹ç»è¿‡ï¼šæˆ‘ä»¬å¯ä»¥ç”¨å­—æ¯ï¼ˆæ¯”å¦‚Tï¼‰æ¥ä»£è¡¨æŸç§æœªçŸ¥çš„ç±»å‹ï¼Œä»¥æ­¤æ¥æå‡ç¨‹åºçš„çµæ´»æ€§ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±èƒ½å†™å‡ºä¸‹é¢è¿™æ ·çš„ä»£ç ï¼š</p><pre><code class=\"language-plain\">// æ³›å‹å®šä¹‰å¤„              æ³›å‹ä½¿ç”¨å¤„\n//   â†“                      â†“\nfun &lt;T&gt; saveSomething(data: T) {\n    val set = sortedSetOf&lt;T&gt;() // Java TreeSet\n    set.add(data)\n}\n\nfun main() {\n//                 æ³›å‹å®å‚è‡ªåŠ¨æ¨å¯¼ä¸ºString\n//                        â†“\n    saveSomething(\"Hello world!\")\n}\n</code></pre><p>è¿™æ®µä»£ç æ²¡æœ‰å®é™…åº”ç”¨ä»·å€¼ï¼Œå®ƒä»£è¡¨çš„æ˜¯ä¸€ç§ä»£ç æ¨¡å¼ã€‚æˆ‘ä»¬é‡ç‚¹æ¥çœ‹çœ‹saveSomething()è¿™ä¸ªæ–¹æ³•ï¼Œè¯·é—®ä½ èƒ½æ‰¾å‡ºå®ƒçš„é—®é¢˜åœ¨å“ªå—ï¼Ÿè¯´å®è¯ï¼Œå¦‚æœä¸æ˜¯å®é™…è¸©è¿‡å‘ï¼Œæˆ‘ä»¬æ˜¯å¾ˆéš¾æ„è¯†åˆ°è¿™æ®µä»£ç çš„é—®é¢˜åœ¨ä½•å¤„çš„ã€‚</p><p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™æ®µä»£ç æ˜¯æ€ä¹ˆå‡ºé—®é¢˜çš„ã€‚</p><pre><code class=\"language-plain\">// æ³›å‹å®šä¹‰å¤„              æ³›å‹ä½¿ç”¨å¤„\n//   â†“                      â†“\nfun &lt;T&gt; saveSomething(data: T) {\n    val set = sortedSetOf&lt;T&gt;()\n//    ç©ºæŒ‡é’ˆå¼‚å¸¸              \n//       â†“\n    set.add(data)\n}\n\nfun main() {\n//               ç¼–è¯‘é€šè¿‡\n//                  â†“\n    saveSomething(null)\n}\n</code></pre><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œè™½ç„¶æˆ‘ä»¬å®šä¹‰çš„æ³›å‹å‚æ•°æ˜¯â€œTâ€ï¼Œå‡½æ•°çš„å‚æ•°æ˜¯â€œdata: Tâ€ï¼Œçœ‹èµ·æ¥dataå¥½åƒæ˜¯ä¸å¯ä¸ºç©ºçš„ï¼Œä½†å®é™…ä¸Šï¼Œæˆ‘ä»¬æ˜¯å¯ä»¥å°†nullä½œä¸ºå‚æ•°ä¼ è¿›å»çš„ã€‚è¿™æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¹Ÿä¸ä¼šæŠ¥é”™ã€‚ç´§æ¥ç€ï¼Œç”±äºTreeSetå†…éƒ¨æ— æ³•å­˜å‚¨nullï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ä»£ç åœ¨â€œset.add(data)â€è¿™é‡Œï¼Œä¼šäº§ç”Ÿè¿è¡Œæ—¶çš„ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p><p>å‡ºç°è¿™æ ·çš„é—®é¢˜çš„åŸå› ï¼Œå…¶å®æ˜¯å› ä¸ºæ³›å‹çš„å‚æ•°Tç»™äº†æˆ‘ä»¬ä¸€ç§é”™è§‰ï¼Œè®©æˆ‘ä»¬è§‰å¾—ï¼šTæ˜¯éç©ºçš„ï¼Œè€Œâ€œT?â€æ‰æ˜¯å¯ç©ºçš„ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬çš„Tæ˜¯ç­‰ä»·äº <code>&lt;T: Any?&gt;</code> çš„ï¼Œå› ä¸ºAny?æ‰æ˜¯Kotlinçš„<strong>æ ¹ç±»å‹</strong>ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œæ³›å‹çš„Tæ˜¯å¯ä»¥æ¥æ”¶nullä½œä¸ºå®å‚çš„ã€‚</p><pre><code class=\"language-plain\">\nfun &lt;T&gt; saveSomething(data: T) {}\n//   â†‘ \n//  ç­‰ä»·              \n//   â†“                      \nfun &lt;T: Any?&gt; saveSomething(data: T) {}\n\n</code></pre><p>é‚£ä¹ˆï¼ŒsaveSomething()è¿™ä¸ªæ–¹æ³•ï¼Œæ­£ç¡®çš„å†™æ³•åº”è¯¥æ˜¯æ€æ ·çš„å‘¢ï¼Ÿç­”æ¡ˆå…¶å®ä¹Ÿå¾ˆç®€å•ï¼š</p><pre><code class=\"language-plain\">// å¢åŠ æ³›å‹çš„è¾¹ç•Œé™åˆ¶              \n//       â†“                      \nfun &lt;T: Any&gt; saveSomething(data: T) {\n    val set = sortedSetOf&lt;T&gt;()\n    set.add(data)\n}\n\nfun main() {\n//              ç¼–è¯‘æ— æ³•é€šè¿‡\n//                  â†“\n    saveSomething(null)\n}\n</code></pre><p>ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¸ºæ³›å‹T <strong>å¢åŠ äº†ä¸Šç•Œâ€œAnyâ€</strong>ï¼Œç”±äºAnyæ˜¯æ‰€æœ‰éç©ºç±»å‹çš„â€œæ ¹ç±»å‹â€ï¼Œè¿™æ ·å°±èƒ½ä¿è¯æˆ‘ä»¬çš„dataä¸€å®šæ˜¯éç©ºçš„ã€‚è¿™æ ·ä¸€æ¥ï¼Œå½“æˆ‘ä»¬å°è¯•å¾€saveSomething()è¿™ä¸ªæ–¹æ³•é‡Œä¼ å…¥nullçš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™ï¼Œè®©è¿™ä¸ªé—®é¢˜åœ¨ç¼–è¯‘æœŸå°±èƒ½æš´éœ²å‡ºæ¥ã€‚</p><p>çœ‹åˆ°è¿™é‡Œï¼Œç›¸ä¿¡ä½ ä¹Ÿå¯ä»¥æ€»ç»“å‡ºKotlinç©ºå®‰å…¨çš„ç¬¬å››æ¡å‡†åˆ™äº†ï¼š<strong>æ˜ç¡®æ³›å‹å¯ç©ºæ€§</strong>ã€‚</p><h2>å°ç»“</h2><p>å­¦å®Œäº†è¿™èŠ‚è¯¾ï¼Œç›¸ä¿¡ç°åœ¨ä½ å¯¹Kotlinçš„ç©ºå®‰å…¨æ€ç»´å°±å·²ç»æœ‰äº†ä¸€ä¸ªå…¨é¢çš„è®¤è¯†ã€‚æœ€åï¼Œæˆ‘ä¹Ÿå†ç»™ä½ æ€»ç»“ä¸€ä¸‹ï¼Œä½ éœ€è¦é‡ç‚¹å…³æ³¨Kotlinçš„ç©ºå®‰å…¨æ€ç»´ï¼Œä¸»è¦æœ‰å››å¤§å‡†åˆ™ï¼š</p><ul>\n<li>ç¬¬ä¸€ä¸ªå‡†åˆ™ï¼š<strong>è­¦æƒ•Kotlinä¸å¤–ç•Œçš„äº¤äº’</strong>ã€‚è¿™é‡Œä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œç¬¬ä¸€ç§æ˜¯ï¼šKotlinä¸å…¶ä»–è¯­è¨€çš„äº¤äº’ï¼Œæ¯”å¦‚å’ŒJavaäº¤äº’ï¼›ç¬¬äºŒç§æ˜¯ï¼šKotlinä¸å¤–ç•Œç¯å¢ƒçš„äº¤äº’ï¼Œæ¯”å¦‚JSONè§£æã€‚</li>\n<li>ç¬¬äºŒä¸ªå‡†åˆ™ï¼š<strong>ç»ä¸ä½¿ç”¨éç©ºæ–­è¨€â€œ!!.â€</strong>ã€‚è¿™é‡Œä¸»è¦æ˜¯ä¸¤ä¸ªåœºæ™¯éœ€è¦æ³¨æ„ï¼Œä¸€ä¸ªæ˜¯ï¼šIDEçš„â€œConvert Java File To Kotlin Fileâ€åŠŸèƒ½è½¬æ¢çš„Kotlinä»£ç ï¼Œä¸€å®šè¦reviewï¼Œæ¶ˆç­å…¶ä¸­çš„éç©ºæ–­è¨€ï¼›å¦ä¸€ä¸ªæ˜¯ï¼šå½“Smart Castå¤±æ•ˆçš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦ç”¨å…¶ä»–åŠæ³•æ¥è§£å†³ï¼Œè€Œä¸æ˜¯ä½¿ç”¨éç©ºæ–­è¨€ã€‚</li>\n<li>ç¬¬ä¸‰ä¸ªå‡†åˆ™ï¼š<strong>å°½å¯èƒ½ä½¿ç”¨éç©ºç±»å‹</strong>ã€‚å€ŸåŠ©lateinitã€æ‡’åŠ è½½ï¼Œæˆ‘ä»¬å¯ä»¥åšåˆ°çµæ´»åˆå§‹åŒ–çš„åŒæ—¶ï¼Œè¿˜èƒ½æ¶ˆç­å¯ç©ºç±»å‹ã€‚</li>\n<li>ç¬¬å››ä¸ªå‡†åˆ™ï¼š<strong>æ˜ç¡®æ³›å‹çš„å¯ç©ºæ€§</strong>ã€‚æˆ‘ä»¬ä¸èƒ½è¢«æ³›å‹Tçš„å¤–è¡¨æ‰€è¿·æƒ‘ï¼Œå½“æˆ‘ä»¬å®šä¹‰ <code>&lt;T&gt;</code> çš„æ—¶å€™ï¼Œä¸€å®šè¦è®°ä½ï¼Œå®ƒæ˜¯å¯ç©ºçš„ã€‚åœ¨éç©ºçš„åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬ä¸€å®šè¦æ˜ç¡®å®ƒçš„å¯ç©ºæ€§ï¼Œè¿™ä¸€ç‚¹ï¼Œé€šè¿‡å¢åŠ æ³›å‹çš„è¾¹ç•Œå°±èƒ½åšåˆ° <code>&lt;T: Any&gt;</code>ã€‚</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/39/94/39fc08c17f4a4f9fff42bdb536a4c494.jpg?wh=2000x1050\" alt=\"\"></p><p>å…¶å®ï¼ŒKotlinçš„ç©ºå®‰å…¨æ€ç»´ï¼Œä¹Ÿå¹¶ä¸æ˜¯å››ä¸ªå‡†åˆ™å°±å¯ä»¥å®Œå…¨æ¦‚æ‹¬çš„ï¼Œä¸è¿‡è¿™å››ä¸ªå‡†åˆ™å¯ä»¥ä¸ºæˆ‘ä»¬æŒ‡æ˜æ–¹å‘ï¼Œä¸ºæˆ‘ä»¬åé¢çš„å­¦ä¹ æ‰“ä¸‹åŸºç¡€ã€‚Kotlinçš„ç©ºå®‰å…¨ï¼Œå…¶å®å’ŒKotlinçš„æ¯ä¸€ä¸ªç‰¹æ€§éƒ½æ¯æ¯ç›¸å…³ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬åœ¨å‰é¢è¯¾ç¨‹é‡Œå°±åº”ç”¨äº†ä¸å˜æ€§ã€lateinitã€æ‡’åŠ è½½å§”æ‰˜ã€æ³›å‹è¾¹ç•Œç­‰ç‰¹æ€§ï¼Œæ¥è§£å†³ç©ºå®‰å…¨é—®é¢˜ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>è¿™èŠ‚è¯¾æˆ‘ä»‹ç»äº†ç©ºå®‰å…¨çš„å››å¤§å‡†åˆ™ï¼Œè¯·é—®ä½ è¿˜èƒ½æƒ³åˆ°å…¶ä»–çš„å‡†åˆ™å—ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„æ€è·¯ã€‚</p>","comments":[{"had_liked":false,"id":338858,"user_name":"Paul Shan","can_delete":false,"product_type":"c1","uid":1593140,"ip_address":"","ucode":"32D99989028284","user_header":"","comment_is_top":false,"comment_ctime":1647764632,"is_pvip":false,"replies":[{"id":"124025","content":"ç¡®å®æŒºå‘çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1180670","ctime":1648031731,"ip_address":"","comment_id":338858,"utype":1}],"discussion_count":2,"race_medal":0,"score":"27417568408","product_id":100103401,"comment_content":"ä¸ªäººè§‰å¾—Kotliné»˜è®¤ä¸Šç•Œå®šä¸ºAny?ä¸å¥½ï¼Œä¸ç¬¦åˆKotliné»˜è®¤å®‰å…¨åŸåˆ™ï¼Œé»˜è®¤ä¸Šç•Œåº”è¯¥å®šä¸ºAnyï¼ŒåŒ…å«å¯ç©ºç±»å‹åº”è¯¥æ˜ç¡®å†™ã€‚","like_count":6,"discussions":[{"author":{"id":1180670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/fe/0f43ef35.jpg","nickname":"æœ±æ¶›","note":"","ucode":"5AB5AFE32B8008","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557971,"discussion_content":"ç¡®å®æŒºå‘çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648031731,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1342000,"avatar":"https://static001.geekbang.org/account/avatar/00/14/7a/30/23fc4089.jpg","nickname":"24éš‹å¿ƒæ‰€æ¬²","note":"","ucode":"1B8B2789F68C94","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591952,"discussion_content":"é»˜è®¤å®‰å…¨æ€§è®©æ­¥äºè¯­æ³•é€»è¾‘å®Œæ•´æ€§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666953248,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ²³åŒ—"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333436,"user_name":"A Lonely Cat","can_delete":false,"product_type":"c1","uid":2885349,"ip_address":"","ucode":"382EBFDD8E5115","user_header":"https://static001.geekbang.org/account/avatar/00/2c/06/e5/51ef9735.jpg","comment_is_top":false,"comment_ctime":1644368172,"is_pvip":false,"replies":[{"id":"121875","content":"è¨€ç®€æ„èµ…","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1180670","ctime":1644414868,"ip_address":"","comment_id":333436,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18824237356","product_id":100103401,"comment_content":"æ€»ç»“ï¼šå°½é‡ val ä¸å¯ç©º  ?.  ?.let","like_count":4,"discussions":[{"author":{"id":1180670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/fe/0f43ef35.jpg","nickname":"æœ±æ¶›","note":"","ucode":"5AB5AFE32B8008","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550197,"discussion_content":"è¨€ç®€æ„èµ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644414868,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343668,"user_name":"vox","can_delete":false,"product_type":"c1","uid":2466331,"ip_address":"","ucode":"0A433DF2BC1D5F","user_header":"https://static001.geekbang.org/account/avatar/00/25/a2/1b/0a4f9177.jpg","comment_is_top":false,"comment_ctime":1650976544,"is_pvip":false,"replies":[{"id":"125641","content":"æ˜¯çš„ï¼Œæ„Ÿè°¢è¡¥å……","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1180670","ctime":1651246506,"ip_address":"","comment_id":343668,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14535878432","product_id":100103401,"comment_content":"!!. ä¹Ÿå¯ä»¥ç”¨takeifçš„å½¢å¼æ¥æ›¿æ¢å§","like_count":3,"discussions":[{"author":{"id":1180670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/fe/0f43ef35.jpg","nickname":"æœ±æ¶›","note":"","ucode":"5AB5AFE32B8008","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568890,"discussion_content":"æ˜¯çš„ï¼Œæ„Ÿè°¢è¡¥å……","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651246506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":338855,"user_name":"Paul Shan","can_delete":false,"product_type":"c1","uid":1593140,"ip_address":"","ucode":"32D99989028284","user_header":"","comment_is_top":false,"comment_ctime":1647763918,"is_pvip":false,"replies":[{"id":"124024","content":"æµ‹è¯•ç¯å¢ƒä½¿ç”¨éç©ºæ–­è¨€æ˜¯å¯ä»¥ç†è§£çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1180670","ctime":1648031697,"ip_address":"","comment_id":338855,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14532665806","product_id":100103401,"comment_content":"Androidå¼€å‘ä¸­ï¼Œåœ¨å’ŒServiceäº¤äº’çš„ä»£ç ä¸­å°½é‡ä½¿ç”¨nullableç±»å‹ï¼Œå› ä¸ºä¸èƒ½ç¡®å®šæœåŠ¡ç«¯è¿”å›çš„æ•°æ®æ˜¯å¦çœŸæœ‰ï¼Œä½†æ˜¯è¦æŠŠè¿™ä¸€å±‚éš”ç¦»å¥½ï¼ŒçœŸæ­£çš„ä¸šåŠ¡é€»è¾‘å°½é‡ä½¿ç”¨non-nullableç±»å‹ï¼Œä¿æŒä»£ç çš„ç®€æ´ã€‚<br><br>è¯·é—®è€å¸ˆï¼Œåœ¨æµ‹è¯•ä»£ç ä¸­ï¼Œèƒ½å¦ä½¿ç”¨!!ï¼Ÿæˆ‘ä¼šåœ¨å¾ˆå¤šæµ‹è¯•åœºæ™¯ä¸‹ä½¿ç”¨!!ï¼Œåœ¨ç”Ÿäº§ä»£ç ä¸­ï¼Œä½¿ç”¨æ•°æ®çš„æ—¶å€™ä¼šç”¨?.letç­‰æ–¹æ³•å¤„ç†æ‰ï¼Œä½†æ˜¯æµ‹è¯•åœºæ™¯ä¸­ï¼Œå¦‚æœæµ‹è¯•æ•°æ®å·²ç»å‡†å¤‡åˆ°ä½ï¼Œä¼šç”¨!!ä¿æŒä»£ç çš„ç®€æ´ï¼Œå‡å°‘åˆ¤æ–­ï¼Œè¯·é—®è¿™æ ·çš„ä½¿ç”¨æ˜¯å¦åˆç†?<br><br>Composeçš„previewæƒ…å†µä¸‹ï¼Œä¹Ÿä¼šé‡åˆ°ç±»ä¼¼çš„é—®é¢˜ï¼Œæœ‰äº›æ•°æ®åœ¨ç”Ÿäº§æƒ…å†µä¸‹æ˜¯ä¸ä¼šæ˜¾ç¤ºUIï¼Œä½†æ˜¯ä¸ºäº†è®©previewæ˜¾ç¤ºï¼Œä¹Ÿä¼šåŠ !!ï¼Œè®©ç¼–è¯‘ç³»ç»Ÿä»¥ä¸ºæ•°æ®å·²ç»å‡†å¤‡å¥½ï¼Œè¯·é—®è¿™æ ·çš„ä½¿ç”¨æ˜¯å¦åˆç†?","like_count":3,"discussions":[{"author":{"id":1180670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/fe/0f43ef35.jpg","nickname":"æœ±æ¶›","note":"","ucode":"5AB5AFE32B8008","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557970,"discussion_content":"æµ‹è¯•ç¯å¢ƒä½¿ç”¨éç©ºæ–­è¨€æ˜¯å¯ä»¥ç†è§£çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648031697,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360898,"user_name":"24éš‹å¿ƒæ‰€æ¬²","can_delete":false,"product_type":"c1","uid":1342000,"ip_address":"æ²³åŒ—","ucode":"1B8B2789F68C94","user_header":"https://static001.geekbang.org/account/avatar/00/14/7a/30/23fc4089.jpg","comment_is_top":false,"comment_ctime":1666953513,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1666953513","product_id":100103401,"comment_content":"å‡†åˆ™äºŒï¼šâ€œç»ä¸é€‚ç”¨éç©ºæ–­è¨€â€ï¼Œæ„Ÿè§‰æœ‰ç‚¹ç»å¯¹äº†ã€‚éç©ºæ–­è¨€æ˜¯æœ‰åˆé€‚çš„ä½¿ç”¨åœºæ™¯çš„ï¼Œåªæ˜¯ä¸æ»¥ç”¨å°±è¡Œã€‚å¦‚æœç»å¯¹ä¸ä½¿ç”¨çš„è¯ï¼Œæœ‰æ—¶å€™å¯èƒ½æ˜¯æ©ç›–bugäº†è€Œä¸æ˜¯è§£å†³bug","like_count":0},{"had_liked":false,"id":333677,"user_name":"ç¥ç§˜å˜‰Bin","can_delete":false,"product_type":"c1","uid":2879116,"ip_address":"","ucode":"6045F09320E5F3","user_header":"https://static001.geekbang.org/account/avatar/00/2b/ee/8c/06f3aef0.jpg","comment_is_top":false,"comment_ctime":1644469699,"is_pvip":false,"replies":[{"id":"121944","content":"ä½¿ç”¨é™æ€ä»£ç æ£€æµ‹æ–¹æ¡ˆã€‚ä¸è¿‡ï¼Œç›®å‰æ²¡æœ‰ç°æˆçš„å¼€æºæ–¹æ¡ˆï¼Œè¿™éœ€è¦è‡ªå·±æ¥å®ç°å¯¹åº”çš„æ£€æµ‹è§„åˆ™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1180670","ctime":1644561706,"ip_address":"","comment_id":333677,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1644469699","product_id":100103401,"comment_content":"kotlinå®šä¹‰äº†ä¸å¯ç©ºçš„å…¥å‚çš„æ–¹æ³•ï¼Œjavaä¼ å…¥äº†å¹³å°ç±»å‹ï¼Œè¿™ç§é™¤äº†reviewå¤–ä¸€èˆ¬æ€ä¹ˆé˜²èŒƒï¼Ÿå‡ºç°è¿‡å‡ æ¬¡npeäº†ğŸ™ˆ","like_count":0,"discussions":[{"author":{"id":1180670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/fe/0f43ef35.jpg","nickname":"æœ±æ¶›","note":"","ucode":"5AB5AFE32B8008","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550478,"discussion_content":"ä½¿ç”¨é™æ€ä»£ç æ£€æµ‹æ–¹æ¡ˆã€‚ä¸è¿‡ï¼Œç›®å‰æ²¡æœ‰ç°æˆçš„å¼€æºæ–¹æ¡ˆï¼Œè¿™éœ€è¦è‡ªå·±æ¥å®ç°å¯¹åº”çš„æ£€æµ‹è§„åˆ™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644561706,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1479120,"avatar":"https://static001.geekbang.org/account/avatar/00/16/91/d0/35bc62b1.jpg","nickname":"æ— å’","note":"","ucode":"B9759B5646F3AB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575503,"discussion_content":"æ¶‰åŠåˆ°kotlinè°ƒç”¨javaï¼Œå¦‚æœjavaæ˜¯ä¸‰æ–¹çš„ï¼Œkotlinåº”è¯¥å®šä¹‰ä¸ºå¯ç©ºï¼ˆæˆæœ¬ä¹Ÿè¿˜è¡Œï¼‰ã€‚å¦‚æœæ˜¯å†…éƒ¨çš„ï¼Œè¦æ±‚ownerä¿è¯ä¸ä¸ºç©ºäº†ï¼Œè¯­æ³•åŠç¼–è¯‘å™¨æ— æ³•ä¿è¯ï¼Œåªèƒ½å€ŸåŠ©æ³¨è§£,IDE,é™æ€å·¥å…·ä»¥åŠreviewäº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1654903997,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}