{"id":536477,"title":"11ï½œæ¡ˆä¾‹ï¼šå¦‚ä½•åŸºäºDubboè¿›è¡Œç½‘å…³è®¾è®¡ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ä¸å¨ã€‚</p><p>è¿™èŠ‚è¯¾æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªçœŸå®çš„ä¸šåŠ¡åœºæ™¯æ¥çœ‹çœ‹Dubboç½‘å…³ï¼ˆå¼€æ”¾å¹³å°ï¼‰çš„è®¾è®¡è¦é¢†ã€‚</p><h2>è®¾è®¡èƒŒæ™¯</h2><p>è¦è®¾è®¡ä¸€ä¸ªç½‘å…³ï¼Œæˆ‘ä»¬é¦–å…ˆè¦çŸ¥é“å®ƒçš„è®¾è®¡èƒŒæ™¯ã€‚</p><p>2017å¹´ï¼Œæˆ‘ä»ä¼ ç»Ÿè¡Œä¸šè„±èº«ï¼Œæ­£å¼è¿›å…¥ç‰©æµè¡Œä¸šã€‚è¯´æ¥ä¹Ÿéå¸¸å·§ï¼Œæˆ‘å½“æ—¶åŠ å…¥çš„æ˜¯å…¬å¸çš„ç½‘å…³é¡¹ç›®ç»„ï¼Œä¸»è¦è§£å†³æ³›åŒ–è°ƒç”¨ä¸åè®®è½¬æ¢ä»£ç çš„å¼€å‘é—®é¢˜ã€‚åˆšè¿›å…¬å¸ä¸ä¹…ï¼Œç½‘å…³é¡¹ç›®ç»„å°±é‡åˆ°äº†æŠ€æœ¯éš¾é¢˜ã€‚å¿«é€’ç‰©æµè¡Œä¸šçš„ä¸šåŠ¡é‡å¯ä»¥æ¯”è‚©äº’è”ç½‘ï¼Œä»é‚£æ—¶å€™å¼€å§‹ï¼Œæˆ‘çš„ä¼ ç»ŸæŠ€æœ¯æ€ç»´å¼€å§‹å‘äº’è”ç½‘æŠ€æœ¯æ€ç»´è½¬å˜ã€‚</p><p>å½“æ—¶ç½‘å…³é¡¹ç›®ç»„çš„æ ¸å¿ƒä»»åŠ¡å°±æ˜¯ç¡®ä¿èƒ½å¤Ÿå¿«é€Ÿæ¥å…¥å„ä¸ªç”µå•†å¹³å°ã€‚æˆ‘æ¥ç®€å•è¯´æ˜ä¸€ä¸‹å…·ä½“çš„åœºæ™¯ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/yy/af/yya8c848bc0c0870d5bb5b6bb41268af.jpg?wh=1920x539\" alt=\"å›¾ç‰‡\"></p><p>è§£é‡Šä¸€ä¸‹ä¸Šé¢è¿™ä¸ªå›¾ã€‚</p><p>ç‰©æµå…¬å¸å†…éƒ¨å·²ç»åŸºäºDubboæ„å»ºäº†è®¢å•ä¸­å¿ƒå¾®æœåŠ¡åŸŸï¼Œå…¶ä¸­åˆ›å»ºè®¢å•æ¥å£çš„å®šä¹‰å¦‚ä¸‹ï¼šâ€‹</p><p><img src=\"https://static001.geekbang.org/resource/image/c4/61/c4yy4a46bcb07cbbfb6f0fe750de8861.jpg?wh=1920x936\" alt=\"å›¾ç‰‡\"></p><p>å¤–éƒ¨ç”µå•†å¹³å°ä¼—å¤šï¼Œæ¯ä¸€å®¶ç”µå•†å¹³å°å†…éƒ¨éƒ½æœ‰è‡ªå·±çš„æ ‡å‡†ï¼Œå¹¶ä¸ä¼šéµå¾ªç»Ÿä¸€çš„æ ‡å‡†ã€‚ä¾‹å¦‚åœ¨æ·˜å®ä¸­ï¼Œå½“ç”¨æˆ·è´­ä¹°å•†å“åï¼Œæ·˜å®å†…éƒ¨ä¼šå®šä¹‰ä¸€ä¸ªç»Ÿä¸€çš„è®¢å•å¤–æ´¾æ¥å£ã€‚å®ƒçš„è¯·æ±‚åŒ…å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š</p><pre><code class=\"language-plain\">{\n &nbsp;\"seller_id\":189,\n &nbsp;\"buyer\":\"dingwei\",\n &nbsp;\"order\":[\n &nbsp;  {\n &nbsp; &nbsp; &nbsp;\"goods_name\":\"åä¸ºç¬”è®°æœ¬\",\n &nbsp; &nbsp; &nbsp;\"num\":1,\n &nbsp; &nbsp; &nbsp;\"price\":500000\n &nbsp;  },\n &nbsp;  {\n &nbsp; &nbsp; &nbsp;\"goods_name\":\"åä¸ºæ‰‹è¡¨\",\n &nbsp; &nbsp; &nbsp;\"num\":1,\n &nbsp; &nbsp; &nbsp;\"price\":200000\n &nbsp;  }\n  ]\n}\n</code></pre><!-- [[[read_end]]] --><p>ä½†æ‹¼å¤šå¤šå†…éƒ¨å®šä¹‰çš„è®¢å•å¤–æ´¾æ¥å£ï¼Œå®ƒçš„è¯·æ±‚åŒ…å¯èƒ½æ˜¯ä¸‹é¢è¿™æ ·çš„ï¼š</p><pre><code class=\"language-plain\">&lt;order&gt;\n &nbsp;&lt;seller_uid&gt;189&lt;/seller_uid&gt;\n &nbsp;&lt;buyer_uid&gt;dingwei&lt;/buyer_uid&gt;\n &nbsp;&lt;order_items&gt;\n &nbsp; &nbsp;&lt;order_item&gt;\n &nbsp; &nbsp; &nbsp;&lt;goods_name&gt;åä¸ºç¬”è®°æœ¬&lt;/goods_name&gt;\n &nbsp; &nbsp; &nbsp;&lt;num&gt;1&lt;/num&gt;\n &nbsp; &nbsp; &nbsp;&lt;price&gt;500000&lt;/price&gt;\n &nbsp; &nbsp;&lt;/order_item&gt;\n &nbsp; &nbsp;&lt;order_item&gt;\n &nbsp; &nbsp; &nbsp;&lt;goods_name&gt;åä¸ºæ‰‹è¡¨&lt;/goods_name&gt;\n &nbsp; &nbsp; &nbsp;&lt;num&gt;1&lt;/num&gt;\n &nbsp; &nbsp; &nbsp;&lt;price&gt;200000&lt;/price&gt;\n &nbsp; &nbsp;&lt;/order_item&gt;\n &nbsp;&lt;/order_items&gt;\n&lt;/order&gt;\n</code></pre><p>å½“ç”µå•†çš„å¿«é€’ä»¶å æ®å¿«é€’å…¬å¸æ€»ä¸šåŠ¡é‡çš„å¤§åŠæ—¶ï¼Œç”µå•†å¹³å°çš„è¯è¯­æƒæ˜¯é«˜äºå¿«é€’å…¬å¸çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç”µå•†å¹³å°ä¸ç®¡ä¸‹æ¸¸å¯¹æ¥å“ªå®¶ç‰©æµå…¬å¸ï¼Œéƒ½ä¼šä¸‹å‘è‡ªå·±å…¬å¸å†…éƒ¨å®šä¹‰çš„è®¢å•æ´¾å‘æ¥å£ï¼Œé€‚é…å·¥ä½œéœ€è¦ç”±ç‰©æµå…¬å¸è‡ªå·±æ¥æ‰¿æ‹…ã€‚</p><p>é‚£ç«™åœ¨ç‰©æµå…¬å¸çš„è§’åº¦ï¼Œåº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿæ€»ä¸èƒ½æ¯æ¥å…¥ä¸€ä¸ªç”µå•†å¹³å°å°±ä¸ºå®ƒä»¬å¼€å‘ä¸€å¥—ä¸‹å•æœåŠ¡å§ï¼Ÿé‚£æ ·çš„è¯ï¼Œéšç€è¶Šæ¥è¶Šå¤šçš„ç”µå•†å¹³å°æ¥å…¥ï¼Œç³»ç»Ÿçš„å¤æ‚åº¦ä¼šè¶Šæ¥è¶Šé«˜ï¼Œå¯ç»´æŠ¤æ€§å°†è¶Šæ¥è¶Šå·®ã€‚</p><h2>è®¾è®¡æ–¹æ¡ˆ</h2><p>æ­£æ˜¯åœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹ï¼Œç½‘å…³å¹³å°è¢«ç«‹é¡¹å¼€å‘å‡ºæ¥äº†ã€‚è¿™ä¸ªç½‘å…³å¹³å°æ˜¯æ€ä¹ˆè®¾è®¡çš„å‘¢ï¼Ÿåœ¨è®¾è®¡çš„è¿‡ç¨‹ä¸­éœ€è¦è§£å†³å“ªäº›å¸¸è§çš„é—®é¢˜ï¼Ÿ</p><p>æˆ‘è®¤ä¸ºï¼Œç½‘å…³çš„è®¾è®¡è‡³å°‘éœ€è¦åŒ…æ‹¬ä¸‰ä¸ªæ–¹é¢ï¼Œåˆ†åˆ«æ˜¯ç­¾åéªŒè¯ã€æœåŠ¡é…ç½®å’Œé™æµã€‚</p><p>å…ˆè¯´ç­¾åéªŒè¯ã€‚ä¿è¯è¯·æ±‚çš„å®‰å…¨æ˜¯ç³»ç»Ÿè®¾è®¡éœ€è¦ä¼˜å…ˆè€ƒè™‘çš„ã€‚ä¸šç•Œæœ‰ä¸€ç§éå¸¸ç»å…¸çš„é€šä¿¡å®‰å…¨æ ¡éªŒæœºåˆ¶ï¼š<strong>éªŒè¯ç­¾åã€‚</strong></p><p>è¿™ç§æœºåˆ¶çš„åšæ³•æ˜¯ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä¼šé¦–å…ˆé‡‡ç”¨HTTPSè¿›è¡Œé€šä¿¡ï¼Œç¡®ä¿ä¼ è¾“è¿‡ç¨‹çš„ç§å¯†æ€§ã€‚</p><p>å®¢æˆ·ç«¯åœ¨å‘é€è¯·æ±‚æ—¶ï¼Œå…ˆå°†è¯·æ±‚å‚æ•°æŒ‰å‚æ•°åç§°è¿›è¡Œæ’åºï¼Œç„¶åæŒ‰é¡ºåºæ‹¼æ¥æˆå­—ç¬¦ä¸²ï¼Œæ ¼å¼ä¸ºkey1=a &amp; key2=bã€‚æ¥ä¸‹æ¥ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨ä¸€ä¸ªçº¦å®šçš„å¯†é’¥å¯¹æ‹¼æ¥å‡ºæ¥çš„å‚æ•°å­—ç¬¦ä¸²è¿›è¡Œç­¾åï¼Œç”Ÿæˆç­¾åå­—ç¬¦ä¸²ï¼ˆæˆ‘ä»¬ç”¨signè¡¨ç¤ºç­¾åå­—ç¬¦ä¸²ï¼‰å¹¶è¿½åŠ åˆ°URLã€‚é€šå¸¸ï¼Œè¿˜ä¼šåœ¨URLä¸­è¿½åŠ ä¸€ä¸ªå‘é€æ—¶é—´æˆ³ï¼ˆæ—¶é—´æˆ³ä¸å‚ä¸ç­¾åéªŒè¯ï¼‰ã€‚</p><p>æœåŠ¡ç«¯åœ¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚åï¼Œå…ˆä»è¯·æ±‚ä¸­è§£æå‡ºæ‰€æœ‰çš„å‚æ•°ï¼ŒåŒæ ·æŒ‰ç…§å‚æ•°åå¯¹å‚æ•°è¿›è¡Œæ’åºï¼Œç„¶åä½¿ç”¨åŒæ ·çš„å¯†é’¥å¯¹å‚æ•°è¿›è¡Œç­¾åã€‚å¾—åˆ°çš„ç­¾åå­—ç¬¦ä¸²éœ€è¦ä¸å®¢æˆ·ç«¯è®¡ç®—çš„ç­¾åå­—ç¬¦ä¸²è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœä¸¤è€…ä¸åŒï¼Œåˆ™è¯·æ±‚æ— æ•ˆã€‚ä¸æ­¤åŒæ—¶ï¼Œé€šå¸¸æˆ‘ä»¬è¿˜éœ€è¦å°†æœåŠ¡ç«¯å½“å‰çš„æ—¶é—´æˆ³ä¸å®¢æˆ·ç«¯æ—¶é—´æˆ³è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœç›¸å·®è¶…è¿‡ä¸€å®šçš„æ—¶é—´ï¼ŒåŒæ ·è®¤ä¸ºè¯·æ±‚æ— æ•ˆï¼Œè¿™ä¸ªæ“ä½œä¸»è¦æ˜¯ä¸ºäº†é¿å…ä½¿ç”¨åŒä¸€ä¸ªè¿æ¥å¯¹ç½‘ç»œè¿›è¡Œè¿ç»­æ”»å‡»ã€‚</p><p>è¿™æ•´ä¸ªè¿‡ç¨‹é‡Œæœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„ç‚¹ï¼Œå°±æ˜¯å¯†é’¥è‡ªå§‹è‡³ç»ˆå¹¶æ²¡æœ‰åœ¨ç½‘ç»œä¸Šè¿›è¡Œè¿‡ä¼ æ’­ï¼Œå®ƒçš„å®‰å…¨æ€§å¯ä»¥å¾—åˆ°åè¶³çš„ä¿è¯ã€‚ç­¾åéªŒè¯çš„æµç¨‹å¤§æ¦‚å¯ä»¥ç”¨ä¸‹é¢è¿™å¼ å›¾è¡¨ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/cb/7d/cb6c980fabc1afd0e76c4fe6627ce87d.jpg?wh=1920x1367\" alt=\"å›¾ç‰‡\"></p><p>å¦‚æœè¦å¯¹éªŒè¯ç­¾åè¿›è¡Œäº§å“åŒ–è®¾è®¡ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦ï¼š</p><ol>\n<li>ä¸ºä¸åŒçš„æ¥å…¥ç«¯ï¼ˆç”µå•†å¹³å°ï¼‰åˆ›å»ºä¸åŒçš„å¯†é’¥ï¼Œå¹¶é€šè¿‡å®‰å…¨çš„æ–¹å¼å‘ŠçŸ¥ä»–ä»¬ï¼›</li>\n<li>ä¸ºä¸åŒçš„æ¥å…¥ç«¯ï¼ˆç”µå•†å¹³å°ï¼‰é…ç½®ç­¾åç®—æ³•ã€‚</li>\n</ol><p>åœ¨ç¡®ä¿èƒ½å¤Ÿå®‰å…¨é€šä¿¡åï¼Œæ¥ä¸‹æ¥å°±æ˜¯ç½‘å…³è®¾è®¡æœ€æ ¸å¿ƒçš„éƒ¨åˆ†äº†ï¼š<strong>æœåŠ¡æ¥å£é…ç½®åŒ–ã€‚</strong>å®ƒä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªè¦ç‚¹ï¼šå¾®æœåŠ¡è°ƒç”¨åè®®ï¼ˆDubboæœåŠ¡æè¿°ï¼‰å’Œæ¥å£å®šä¹‰ä¸å‚æ•°æ˜ å°„ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹å¾®æœåŠ¡è°ƒç”¨åè®®çš„é…ç½®ï¼Œè®¾è®¡çš„åŸå‹ç•Œé¢å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/6e/59/6eed0bd5cbe4891082bb3e0678cb7b59.jpg?wh=1920x668\" alt=\"å›¾ç‰‡\"></p><p>å°†æ‰€æœ‰çš„å¾®æœåŠ¡ï¼ˆç»†åŒ–åˆ°æ–¹æ³•çº§åç§°ï¼‰ç»´æŠ¤åˆ°ç½‘å…³ç³»ç»Ÿä¸­ï¼Œç½‘å…³åº”ç”¨å°±å¯ä»¥ä½¿ç”¨Dubboæä¾›çš„ç¼–ç¨‹APIï¼Œæ ¹æ®è¿™äº›å…ƒä¿¡æ¯åŠ¨æ€æ„å»ºä¸€ä¸ªä¸ªæ¶ˆè´¹è€…ï¼ˆæœåŠ¡è°ƒç”¨è€…ï¼‰ï¼Œè¿›è€Œé€šè¿‡åˆ›å»ºçš„æœåŠ¡è°ƒç”¨å®¢æˆ·ç«¯å‘èµ·RPCè¿œç¨‹è°ƒç”¨ï¼Œæœ€ç»ˆå®ç°ç½‘å…³åº”ç”¨çš„DubboæœåŠ¡è°ƒç”¨ã€‚</p><p>åŸºäºè¿™äº›å…ƒä¿¡æ¯æ„å»ºæ¶ˆè´¹è€…å¯¹è±¡çš„å…³é”®ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\">public static GenericService getInvoker(String serviceInterface, String version, List&lt;String&gt; methods, int retry, String registryAddr ) {\n &nbsp; &nbsp; &nbsp; &nbsp;ReferenceConfig referenceConfig = new ReferenceConfig();\n &nbsp; &nbsp; &nbsp; &nbsp;// å…³äºæ¶ˆè´¹è€…é€šç”¨å‚æ•°ï¼Œå¯ä»¥ä»é…ç½®æ–‡ä»¶ä¸­è·å–ï¼Œæœ¬ç¤ºä¾‹å–æ¶ˆ\n &nbsp; &nbsp; &nbsp; &nbsp;ConsumerConfig consumerConfig = new ConsumerConfig();\n &nbsp; &nbsp; &nbsp; &nbsp;consumerConfig.setTimeout(3000);\n &nbsp; &nbsp; &nbsp; &nbsp;consumerConfig.setRetries(2);\n &nbsp; &nbsp; &nbsp; &nbsp;referenceConfig.setConsumer(consumerConfig);\n &nbsp; &nbsp; &nbsp; &nbsp;//åº”ç”¨ç¨‹åºåç§°\n &nbsp; &nbsp; &nbsp; &nbsp;ApplicationConfig applicationConfig = new ApplicationConfig();\n &nbsp; &nbsp; &nbsp; &nbsp;applicationConfig.setName(\"GateWay\");\n &nbsp; &nbsp; &nbsp; &nbsp;referenceConfig.setApplication(applicationConfig);\n &nbsp; &nbsp; &nbsp; &nbsp;// æ³¨å†Œä¸­å¿ƒ\n &nbsp; &nbsp; &nbsp; &nbsp;RegistryConfig registry = new RegistryConfig();\n &nbsp; &nbsp; &nbsp; &nbsp;registry.setAddress(registryAddr);\n &nbsp; &nbsp; &nbsp; &nbsp;registry.setProtocol(\"zookeeper\");\n &nbsp; &nbsp; &nbsp; &nbsp;referenceConfig.setRegistry(registry);\n &nbsp; &nbsp; &nbsp; &nbsp;// è®¾ç½®æœåŠ¡æ¥å£åç§°\n &nbsp; &nbsp; &nbsp; &nbsp;referenceConfig.setInterface(serviceInterface);\n &nbsp; &nbsp; &nbsp; &nbsp;// è®¾ç½®æœåŠ¡ç‰ˆæœ¬\n &nbsp; &nbsp; &nbsp; &nbsp;referenceConfig.setVersion(version);\n &nbsp; &nbsp; &nbsp; &nbsp;referenceConfig.setMethods(new ArrayList&lt;MethodConfig&gt;());\n &nbsp; &nbsp; &nbsp; &nbsp;for(String method : methods) {\n &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MethodConfig methodConfig = new MethodConfig();\n &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;methodConfig.setName(method);\n &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;referenceConfig.getMethods().add(methodConfig);\n &nbsp; &nbsp; &nbsp;  }\n &nbsp; &nbsp; &nbsp; &nbsp;referenceConfig.setGeneric(\"true\");// å¼€å¯dubboçš„æ³›åŒ–è°ƒç”¨\n &nbsp; &nbsp; &nbsp; &nbsp;return (GenericService) referenceConfig.get();\n &nbsp;  }\n</code></pre><p>é€šè¿‡getInvokeræ–¹æ³•å‘èµ·è°ƒç”¨è¿œç¨‹RPCæœåŠ¡ï¼Œè¿™æ ·ï¼Œ<strong>ç½‘å…³åº”ç”¨å°±æˆä¸ºäº†å¯¹åº”æœåŠ¡çš„æ¶ˆè´¹è€…</strong>ã€‚</p><p>å› ä¸ºç½‘å…³åº”ç”¨å¼•å…¥æœåŠ¡è§„çº¦ï¼ˆAPIåŒ…ï¼‰ä¸å¤ªç°å®ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨çš„æ˜¯æ³›åŒ–è°ƒç”¨ï¼Œè¿™æ ·æ–¹ä¾¿ç½‘å…³åº”ç”¨ä¸å—çº¦æŸåœ°æ„å»ºæ¶ˆè´¹è€…å¯¹è±¡ã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒReferenceConfigå®ä¾‹å¾ˆé‡ï¼Œå®ƒå°è£…äº†ä¸æ³¨å†Œä¸­å¿ƒçš„è¿æ¥ä»¥åŠæ‰€æœ‰æœåŠ¡æä¾›è€…çš„è¿æ¥ï¼Œéœ€è¦è¢«ç¼“å­˜èµ·æ¥ã€‚å› æ­¤ï¼Œåœ¨çœŸå®çš„ç”Ÿäº§å®è·µä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†ReferenceConfigå¯¹è±¡å­˜å‚¨åˆ°ç¼“å­˜ä¸­ã€‚å¦åˆ™ï¼Œé‡å¤ç”Ÿæˆçš„ReferenceConfigå¯èƒ½é€ æˆæ€§èƒ½é—®é¢˜å¹¶ä¼´éšç€å†…å­˜å’Œè¿æ¥æ³„æ¼ã€‚</p><p>é™¤äº†ReferenceConfigï¼Œå…¶å®getInvokerç”Ÿæˆå¯¹è±¡ä¹Ÿå¯ä»¥è¿›è¡Œç¼“å­˜ï¼Œç¼“å­˜çš„keyé€šå¸¸ä¸ºæ¥å£åç§°ã€ç‰ˆæœ¬å’Œæ³¨å†Œä¸­å¿ƒã€‚</p><p>é‚£å¦‚æœé…ç½®ä¿¡æ¯åŠ¨æ€å‘ç”Ÿäº†å˜åŒ–ï¼Œä¾‹å¦‚éœ€è¦æ·»åŠ æ–°çš„æœåŠ¡ï¼Œè¿™æ—¶å€™ç½‘å…³åº”ç”¨å¦‚ä½•åšåˆ°åŠ¨æ€æ„ŸçŸ¥å‘¢ï¼Ÿæˆ‘ä»¬é€šå¸¸å¯ä»¥ç”¨åŸºäºMQçš„æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å…·ä½“çš„è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/01/0e/01a98d71ee4b0a1c56a390eb8e338f0e.jpg?wh=1920x619\" alt=\"å›¾ç‰‡\"></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æˆ·å¦‚æœåœ¨ç½‘å…³è¿è¥å¹³å°ä¸Šä¿®æ”¹åŸæœ‰æœåŠ¡åè®®ï¼ˆDubboæœåŠ¡ï¼‰æˆ–è€…æ·»åŠ æ–°çš„æœåŠ¡åè®®ï¼Œå˜åŠ¨åçš„åè®®ä¼šé¦–å…ˆå­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼Œç„¶åè¿è¥å¹³å°å‘é€ä¸€æ¡æ¶ˆæ¯åˆ°MQï¼Œç´§æ¥ç€Gatewayçš„åå°è¿›ç¨‹ä»¥å¹¿æ’­æ¨¡å¼è¿›è¡Œè®¢é˜…ã€‚è¿™æ ·ï¼Œæ‰€æœ‰åå°ç½‘å…³è¿›ç¨‹éƒ½å¯ä»¥æ„ŸçŸ¥ã€‚</p><p>å¦‚æœæ˜¯å¯¹å·²æœ‰æœåŠ¡åè®®è¿›è¡Œä¿®æ”¹ï¼Œåœ¨å…·ä½“å®è·µæ—¶æœ‰ä¸€ä¸ªå°ç»†èŠ‚è¯·ä½ ä¸€å®šæ³¨æ„ã€‚æˆ‘ä»¬å…ˆçœ‹çœ‹è¿™æ®µä»£ç ï¼š</p><pre><code class=\"language-plain\">Map&lt;String /* ç¼“å­˜key */,GenericService&gt; invokerCache;\nGenericService newInvoker = getInvoker(...);//å‚æ•°çœç•¥\nGenericService oldInvoker = invokerCache.get(key);\ninvokerCache.put(newInvoker);//å…ˆç¼“å­˜æ–°çš„invoker\n// ç„¶åå†é”€æ¯æ—§çš„invokerå¯¹è±¡\noldInvoker.destory();\n</code></pre><p>å¦‚æœå·²ç»å­˜åœ¨å¯¹åº”çš„Invokerå¯¹è±¡ï¼Œä¸ºäº†ä¸å½±å“ç°æœ‰è°ƒç”¨ï¼Œåº”è¯¥å…ˆç”¨æ–°çš„Invokerå¯¹è±¡å»æ›´æ–°ç¼“å­˜ï¼Œç„¶åå†é”€æ¯æ—§çš„Invokerå¯¹è±¡ã€‚</p><p>ä¸Šé¢çš„æ–¹æ³•è§£å†³äº†ç½‘å…³è°ƒç”¨å…¬å¸å†…éƒ¨çš„Dubboå¾®æœåŠ¡é—®é¢˜ï¼Œä½†è¿˜æœ‰å¦å¤–ä¸€ä¸ªéå¸¸é‡è¦çš„é—®é¢˜ï¼Œæ€ä¹ˆé…ç½®æœåŠ¡æ¥å£ç›¸å…³å‚æ•°å‘¢ï¼Ÿ</p><p>è”ç³»è¿™èŠ‚è¯¾å‰é¢çš„åœºæ™¯ï¼Œæˆ‘ä»¬éœ€è¦åœ¨é¡µé¢ä¸Šé…ç½®å…¬å¸å†…éƒ¨DubboæœåŠ¡ä¸å¤–éƒ¨ç”µå•†çš„æ¥å£æ˜ å°„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/23/79/233fc90464a70ab461d91766789df579.png?wh=1920x596\" alt=\"å›¾ç‰‡\"></p><p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä¸“é—¨å»ºç«‹äº†ä¸€æ¡å‚æ•°æ˜ å°„åè®®ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/51/af/51f750f5cb40a27a69e49a186b028faf.jpg?wh=1920x774\" alt=\"å›¾ç‰‡\"></p><p>å‚æ•°æ˜ å°„è®¾è®¡çš„è¯´æ˜å¦‚ä¸‹ã€‚</p><ul>\n<li>è¯·æ±‚ç±»å‹ï¼šä¸»è¦åˆ†ä¸ºè¯·æ±‚å‚æ•°ä¸å“åº”å‚æ•°ï¼›</li>\n<li>å­—æ®µåç§°ï¼šDubboæœåŠ¡å¯¹åº”çš„å­—æ®µåç§°ï¼›</li>\n<li>å­—æ®µç±»å‹ï¼šDubboæœåŠ¡å¯¹åº”å­—æ®µçš„å±æ€§ï¼›</li>\n<li>å­—æ®µæ‰€å±ç±»ï¼šDubboæœåŠ¡å¯¹åº”å­—æ®µæ‰€å±ç±»å‹ï¼›</li>\n<li>èŠ‚ç‚¹åç§°ï¼šå¤–éƒ¨è¯·æ±‚æ¥å£å¯¹åº”çš„å­—æ®µåç§°ï¼›</li>\n<li>æ˜¾ç¤ºé¡ºåºï¼šæ’åºå­—æ®µã€‚</li>\n</ul><p>ç”±äºç½‘å…³é‡‡å–äº†æ³›åŒ–è°ƒç”¨ï¼Œåœ¨ç¼–å†™è½¬æ¢ä»£ç æ—¶ï¼Œä¸»è¦æ˜¯éå†ä¼ å…¥çš„å‚æ•°ï¼Œæ ¹æ®æ¯ä¸€ä¸ªå­—æ®µæŸ¥è¯¢å¯¹åº”çš„è½¬æ¢è§„åˆ™ï¼Œç„¶åè½¬æ¢ä¸ºMapï¼Œè¿”å›å€¼åˆ™åˆšå¥½ç›¸åï¼Œæ˜¯å°†Mapè½¬æ¢ä¸ºXMLæˆ–è€…JSONã€‚</p><p>åœ¨çœŸæ­£è¯·æ±‚è°ƒç”¨æ—¶ï¼Œæ ¹æ®æ˜ å°„è§„åˆ™æ„å»ºå‡ºè¯·æ±‚å‚æ•°Mapåï¼Œé€šè¿‡Dubboçš„æ³›åŒ–è°ƒç”¨æ‰§è¡ŒçœŸæ­£çš„è°ƒç”¨ï¼š</p><pre><code class=\"language-plain\">GenericService genericService = (GenericService) invokeBean;\nMap invokerPams;//çœç•¥è½¬æ¢è¿‡ç¨‹\n// å‚æ•°ç±»å‹æ•°ç»„\nString[] paramTypes = new String[1];\nparamTypes[0]=\"java.util.Map\";\n// å‚æ•°å€¼æ•°ç»„\nObject[] paramValues = new Object[1];\nâ€‹\ninvokerPams.put(\"class\", \"net.codingw.oms.vo.OrderItemVo\");\nparamValues[0] = invokerPams;\n//ç”±äºæˆ‘ä»¬å·²ç»è½¬åŒ–ä¸ºjava.util.Mapï¼Œå¹¶ä¸”Mapä¸­ï¼Œéœ€è¦æœ‰ä¸€ä¸ªkeyä¸ºclassçš„ï¼Œè¡¨ç¤ºæœåŠ¡ç«¯éœ€è¦è½¬åŒ–çš„ç±»å‹ï¼Œè¿™ä¸ªä»åè®®è½¬æ¢å™¨ä¸­è·å–\nObject result = genericService.$invoke(this.getInvokeMethod(), paramTypes, paramValues);\n</code></pre><p>è¿™æ ·ï¼Œç½‘å…³å°±å…·å¤‡äº†é«˜æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œå¯ä»¥éå¸¸çµæ´»åœ°æ”¯æ’‘ä¸šåŠ¡çš„æ‰©å±•ï¼Œä¸ºä¸åŒçš„ç”µå•†å¹³å°é…ç½®ä¸åŒçš„å‚æ•°è½¬æ¢ï¼Œä»è€Œåœ¨å†…éƒ¨åªéœ€è¦å¼€å‘ä¸€å¥—æ¥å£å°±å¯ä»¥éå¸¸çµæ´»åœ°æ”¯æ’‘ä¸šåŠ¡çš„æ‰©å±•ï¼ŒåŸºæœ¬åšåˆ°ç½‘å…³ä»£ç é›¶ä¿®æ”¹ã€‚</p><h2>æ€»ç»“</h2><p>è¿™èŠ‚è¯¾ï¼Œæˆ‘é€šè¿‡ä¸€ä¸ªçœŸå®çš„åœºæ™¯ï¼Œè¯¦ç»†ä»‹ç»äº†ç½‘å…³è®¾è®¡çš„éœ€æ±‚èƒŒæ™¯ï¼Œç„¶åé’ˆå¯¹ç½‘å…³è®¾è®¡çš„ç—›ç‚¹ç»™å‡ºäº†è®¾è®¡æ–¹æ¡ˆã€‚é€šè¿‡å¯¹è¿™ä¸ªæ–¹æ¡ˆä¸­å…³é”®ä»£ç çš„è§£è¯»ï¼Œä½ åº”è¯¥èƒ½å¤Ÿæ›´åŠ æ·±åˆ»åœ°ç†è§£Dubboæ³›åŒ–è°ƒç”¨èƒŒåçš„é€»è¾‘ï¼ŒçœŸæ­£åšåˆ°ç†è®ºä¸å®é™…ç›¸ç»“åˆã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬è¿™èŠ‚è¯¾æåˆ°çš„è½¬æ¢åè®®ä¹Ÿæ˜¯ä¸€ç»ï¼Œå®ƒä½¿ç”¨ä¸­æ‹¬å·æ¥å®šä¹‰å¤šå±‚åµŒå¥—ç»“æ„ï¼Œä½¿å¾—è¯¥åè®®å…·æœ‰æ™®é€‚æ€§ã€‚</p><h2>è¯¾åé¢˜</h2><p>æ£€æµ‹å¯¹çŸ¥è¯†çš„æŒæ¡ç¨‹åº¦æœ€å¥½çš„æ–¹å¼æ˜¯è‡ªå·±å†™å‡ºæ¥ã€‚æ‰€ä»¥ï¼Œæˆ‘å»ºè®®ä½ å°†æˆ‘ä»¬è¿™èŠ‚è¯¾æ‰€è®²çš„æ–¹æ¡ˆè½åˆ°å®å¤„ï¼Œå°è¯•è‡ªå·±å®ç°ä¸€ä¸ªdemoçº§çš„ç½‘å…³è®¾è®¡ã€‚</p><p>å¦‚æœä½ æƒ³å¬å¬æˆ‘çš„æ„è§ï¼Œå¯ä»¥æäº¤ä¸€ä¸ª <a href=\"https://github.com/dingwpmz/infoq_question\">GitHub</a>çš„pushè¯·æ±‚æˆ–issuesï¼Œå¹¶æŠŠå¯¹åº”åœ°å€è´´åˆ°ç•™è¨€é‡Œã€‚æˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ï¼</p>","comments":[{"had_liked":false,"id":355527,"user_name":"æ”¾ä¸ä¸‹è£åå¯Œè´µ","can_delete":false,"product_type":"c1","uid":2053679,"ip_address":"ä¸Šæµ·","ucode":"9FE29C22B9ABE3","user_header":"https://static001.geekbang.org/account/avatar/00/1f/56/2f/4518f8e1.jpg","comment_is_top":false,"comment_ctime":1661474664,"is_pvip":false,"replies":[{"id":129388,"content":"å¯¹çš„ï¼Œæ•°å­—ç­¾åä¸»è¦è¿˜æ˜¯è¿›è¡Œèº«ä»½éªŒè¯ä¸é˜²æ­¢æ•°æ®è¢«ç¯¡æ”¹ï¼Œé‡æ”¾æ”»å‡»é€šå¸¸åœ¨æœåŠ¡ç«¯ç»“åˆredisç­‰ç¼“å­˜ç»„ä»¶ï¼Œè¿›è¡Œå¤„ç†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2348391,"ctime":1661525727,"ip_address":"ä¸Šæµ·","comment_id":355527,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100114001,"comment_content":"æ•°å­—ç­¾åéƒ¨åˆ†ï¼š\nè®¡ç®—å®Œsignå†è¿½åŠ æ—¶é—´æˆ³ï¼Œæ—¶é—´æˆ³å°±å¯èƒ½ç¯¡æ”¹ï¼Œé‚£è¿˜æ˜¯é¿å…ä¸äº†é‡æ”¾æ”»å‡»å§ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":2348391,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d5/67/54efabd8.jpg","nickname":"ä¸­é—´ä»¶å…´è¶£åœˆ","note":"","ucode":"EFC2384D08600E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585418,"discussion_content":"å¯¹çš„ï¼Œæ•°å­—ç­¾åä¸»è¦è¿˜æ˜¯è¿›è¡Œèº«ä»½éªŒè¯ä¸é˜²æ­¢æ•°æ®è¢«ç¯¡æ”¹ï¼Œé‡æ”¾æ”»å‡»é€šå¸¸åœ¨æœåŠ¡ç«¯ç»“åˆredisç­‰ç¼“å­˜ç»„ä»¶ï¼Œè¿›è¡Œå¤„ç†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661525727,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1532404,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIvUlicgrWtibbDzwhLw5cQrDSy2JuE1mVvmXq11KQIwpLicgDuWfpp9asE0VCN6HhibPDWn7wBc2lfmA/132","nickname":"aã€","note":"","ucode":"590FE8DB111492","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2348391,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d5/67/54efabd8.jpg","nickname":"ä¸­é—´ä»¶å…´è¶£åœˆ","note":"","ucode":"EFC2384D08600E","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":590905,"discussion_content":"ä½ å¥½ï¼Œæ—¶é—´æˆ³æ–‡ç« è¯´äº†æ˜¯ä¸ºäº†é¿å…å¤šæ¬¡è¯·æ±‚æ”»å‡»ï¼Œå¦‚æœä¸æ”¾å…¥ç­¾åå­—æ®µä¸­ï¼Œå°±å¯èƒ½ä¼šè¢«ç¯¡æ”¹ï¼Œå®Œå…¨èµ·ä¸åˆ°é¿å…å¤šæ¬¡è¯·æ±‚æ”»å‡»æ•ˆæœï¼Œé‚£ä¹ˆä¼ æ—¶é—´æˆ³çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666160173,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":585418,"ip_address":"å¹¿ä¸œ","group_id":0},"score":590905,"extra":""}]},{"author":{"id":2124269,"avatar":"https://static001.geekbang.org/account/avatar/00/20/69/ed/2ea74ecd.jpg","nickname":"è¶Šè¿‡å±±ä¸˜","note":"","ucode":"A0CBF5C8E09CEE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587234,"discussion_content":"ç»“åˆrediså¤„ç†æ—¶ï¼Œæ˜¯ä¸æ˜¯æŠŠç­¾åæ”¾åœ¨redisä¸­ï¼Œè¿™æ ·æˆæœ¬æœ‰ç‚¹é«˜ï¼Œè¯·æ•™ä¸€ä¸‹è¿˜æœ‰å…¶ä»–å¥½åŠæ³•å—\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662890293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350938,"user_name":"é›¨è½ï½ç´«ç«¹","can_delete":false,"product_type":"c1","uid":1666025,"ip_address":"","ucode":"33CED2F34E708F","user_header":"https://static001.geekbang.org/account/avatar/00/19/6b/e9/7620ae7e.jpg","comment_is_top":false,"comment_ctime":1657368091,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100114001,"comment_content":"å…¶å®è¿™ç§é…ç½®è¯å®ä½“ ç”¨èµ·æ¥å¾ˆçµæ´» æ¯”å¦‚æˆ‘ä»¬å¯¹æ¥ç¬¬ä¸‰æ–¹äº‘å‚å•† å°±æ˜¯å°† æ¥å£ä¼ å‚ è¯·æ±‚è·¯å¾„ è¿”å›ç»“æ„ è§£æç»“æ„ é‰´æƒ å…¨éƒ¨åšæˆäº†é…ç½®è¯ ä¹‹åæ¥å…¥å…¶ä»–äº‘å‚å•† ä¹Ÿå°±åªæ˜¯ é…ç½®å’Œè”è°ƒçš„å·¥ä½œ","like_count":1},{"had_liked":false,"id":350909,"user_name":"èµ¤çº¢çƒ­è¡€","can_delete":false,"product_type":"c1","uid":1407161,"ip_address":"","ucode":"3793B01AA7F32A","user_header":"https://static001.geekbang.org/account/avatar/00/15/78/b9/d8bb4c45.jpg","comment_is_top":false,"comment_ctime":1657336009,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":2,"product_id":100114001,"comment_content":"æ ¹æ®è¿™äº›å…ƒä¿¡æ¯åŠ¨æ€æ„å»ºä¸€ä¸ªä¸ªæ¶ˆè´¹è€…ï¼ˆæœåŠ¡è°ƒç”¨è€…ï¼‰ï¼Œè¿›è€Œé€šè¿‡åˆ›å»ºçš„æœåŠ¡è°ƒç”¨å®¢æˆ·ç«¯å‘èµ· RPC è¿œç¨‹è°ƒç”¨ï¼Œæœ€ç»ˆå®ç°ç½‘å…³åº”ç”¨çš„ Dubbo æœåŠ¡è°ƒç”¨ã€‚\n1.è¿™å¥è¯é‡Œé¢ï¼Œæ¶ˆè´¹è€…ä¸ºå•¥æ˜¯æœåŠ¡è°ƒç”¨è€…ï¼Ÿ\n2.å•¥å«â€œåˆ›å»ºçš„æœåŠ¡è°ƒç”¨å®¢æˆ·ç«¯å‘èµ·rpcè¿œç¨‹è°ƒç”¨â€ï¼Ÿè¿™å¥è¯è¯»çš„é€šå—","like_count":1,"discussions":[{"author":{"id":1806700,"avatar":"","nickname":"Geek_460f3a","note":"","ucode":"1B938DA91E86F8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":607882,"discussion_content":"æŒºé€šé¡ºçš„å•Šï¼Œå…¶å®å°±æ˜¯ç½‘å…³ä½œä¸ºæœåŠ¡æ¶ˆè´¹è€…é€šè¿‡æ³›åŒ–è°ƒç”¨è°ƒç”¨å„ä¸ªå¾®æœåŠ¡å•Šï¼Œç”¨åˆ°çš„æŠ€æœ¯å…¶å®ä¹Ÿæ²¡å¤šå°‘ï¼Œå°±dubboï¼ŒéªŒç­¾ï¼Œåè®®è½¬æ¢ï¼Œä¸è¿‡æ€è·¯æŒºå¥½çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678173327,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1120057,"avatar":"https://static001.geekbang.org/account/avatar/00/11/17/39/3274257b.jpg","nickname":"ple","note":"","ucode":"E1C4519C325994","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582147,"discussion_content":"1. åœºæ™¯æ˜¯ä»–ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªæœåŠ¡ï¼Œç°åœ¨è¦æš´éœ²å‡ºå»ï¼Œç»™ä¸Šæ¸¸å•†å“ï¼ˆæ‹¼å¤šå¤šï¼‰è°ƒç”¨\n2. æƒ³è¡¨è¾¾çš„æ„æ€å°±æ˜¯1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659263092,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371451,"user_name":"ğŸ","can_delete":false,"product_type":"c1","uid":1183211,"ip_address":"åŒ—äº¬","ucode":"28B3C527D81DC3","user_header":"https://static001.geekbang.org/account/avatar/00/12/0d/eb/c3ff1e85.jpg","comment_is_top":false,"comment_ctime":1679966029,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100114001,"comment_content":"å¦‚ä½•è¿›è¡Œåè®®è½¬æ¢å‘¢ï¼Œæœ‰ä»€ä¹ˆæ–¹æ¡ˆ","like_count":0},{"had_liked":false,"id":351883,"user_name":"fantasyer","can_delete":false,"product_type":"c1","uid":1014921,"ip_address":"","ucode":"BBF084580F8BA6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/89/93a4019e.jpg","comment_is_top":false,"comment_ctime":1658278385,"is_pvip":false,"replies":null,"discussion_count":3,"race_medal":0,"score":2,"product_id":100114001,"comment_content":"è€å¸ˆï¼Œå…³äºç½‘å…³è¿™å—æœ‰ä¸‰ä¸ªé—®é¢˜æƒ³å’¨è¯¢ä¸€ä¸‹\n1ã€éªŒè¯ç­¾åè¿™å—æåˆ°ï¼Œæ—¶é—´æˆ³ä¸å‚ä¸ç­¾åéªŒè¯ï¼Œä¸ºä»€ä¹ˆæ—¶é—´æˆ³ä¸å‚ä¸ç­¾åéªŒè¯ï¼Œæˆ‘ç†è§£æ—¶é—´æˆ³å‚ä¸ç­¾åå¯ä»¥é˜²æ­¢æ—¶é—´æˆ³è¢«æ¶æ„ç¯¡æ”¹ï¼Œè¿›è€Œå¯ä»¥é˜²æ­¢äº¤æ˜“æ¶æ„é‡å¤æäº¤\n2ã€ä»£ç invokerPams.put(&quot;class&quot;, &quot;net.codingw.oms.vo.OrderItemVo&quot;);ä¸­è¿™é‡Œçš„å¯¹è±¡æ˜¯ä¸æ˜¯åº”è¯¥æ˜¯net.codingw.oms.vo.OrderVoï¼Œæ•´ä¸ªæŠ¥æ–‡æ˜ å°„çš„ç±»ï¼Ÿ\n3ã€ç½‘å…³è¿™éƒ¨åˆ†è®¾è®¡é‡ç‚¹è®²äº†ç½‘å…³å†…éƒ¨å¦‚ä½•é€šè¿‡æ³›åŒ–è°ƒç”¨åç«¯çš„dubboæœåŠ¡ï¼Œæƒ³å’¨è¯¢ä¸‹è€å¸ˆï¼Œè¿™ä¸ªæ¡ˆä¾‹ä¸­ç½‘å…³å¯¹å¤–çš„æ¥å£éƒ¨åˆ†æ˜¯å¦‚ä½•è®¾è®¡çš„ï¼Ÿå³ç»™ä¸åŒçš„ç”µå•†æ˜¯å¦‚ä½•æš´éœ²æ¥å£æœåŠ¡çš„ï¼Œä»è€Œçµæ´»åšåˆ°åŸºæœ¬ä¸ç”¨ä¿®æ”¹ã€å¿«é€Ÿæ‰©å±•æ”¯æŒï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1532404,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIvUlicgrWtibbDzwhLw5cQrDSy2JuE1mVvmXq11KQIwpLicgDuWfpp9asE0VCN6HhibPDWn7wBc2lfmA/132","nickname":"aã€","note":"","ucode":"590FE8DB111492","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590907,"discussion_content":"ç½‘å…³å¯¹å¤–çš„æ¥å£ä¸€èˆ¬æ˜¯httpçš„ï¼Œç„¶ååœ¨ç½‘å…³è¿™é‡Œè½¬æˆdubboå†é€šè¿‡æ³›åŒ–è°ƒç”¨åç«¯æœåŠ¡ï¼Œç»™ä¸åŒçš„ç”µå•†å¯ä»¥æš´éœ²ä¸€ä¸ªæ¥å£æœåŠ¡ï¼Œç„¶åé€šè¿‡headeræ¥è¯†åˆ«ä¸åŒçš„è¯·æ±‚æ–¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666160548,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1120057,"avatar":"https://static001.geekbang.org/account/avatar/00/11/17/39/3274257b.jpg","nickname":"ple","note":"","ucode":"E1C4519C325994","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582148,"discussion_content":"æ—¶é—´æˆ³å‚ä¸å‚äºåº”è¯¥éƒ½è¡Œçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659263161,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1335457,"avatar":"https://static001.geekbang.org/account/avatar/00/14/60/a1/45ffdca3.jpg","nickname":"é™å¿ƒ","note":"","ucode":"EB264FA6519FDA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581981,"discussion_content":"æ—¶é—´ä¸€èˆ¬ä¼šå‚ä¸è®¡ç®—çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659097937,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351166,"user_name":"å…¬å·-æŠ€æœ¯å¤œæœªçœ ","can_delete":false,"product_type":"c1","uid":1013683,"ip_address":"","ucode":"83825B57CBD952","user_header":"https://static001.geekbang.org/account/avatar/00/0f/77/b3/991f3f9b.jpg","comment_is_top":false,"comment_ctime":1657587210,"is_pvip":true,"replies":null,"discussion_count":1,"race_medal":1,"score":2,"product_id":100114001,"comment_content":"å¦‚æœå·²ç»å­˜åœ¨å¯¹åº”çš„ Invoker å¯¹è±¡ï¼Œä¸ºäº†ä¸å½±å“ç°æœ‰è°ƒç”¨ï¼Œåº”è¯¥å…ˆç”¨æ–°çš„ Invoker å¯¹è±¡å»æ›´æ–°ç¼“å­˜ï¼Œç„¶åå†é”€æ¯æ—§çš„ Invoker å¯¹è±¡ã€‚\nå…¶ä¸­ï¼Œä¸å½±å“ç°æœ‰è°ƒç”¨ï¼Œè¯·é—®å¦‚ä½•ç†è§£ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2172620,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/picb3nrC6rX6t4t6pHP8huAyrBa9g4lXCsY0uz2OicZsVsCfyLRg523CTWxX5AfEptxCMEC9DMuLZcia1cwzawhmg/132","nickname":"Mr.Hwang","note":"","ucode":"26EE6BF8EB1611","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589134,"discussion_content":"Invokeræ­£åœ¨è¿›è¡ŒRPCè°ƒç”¨çš„ã€‚ä»–è¿™ä»£ç æœ‰é—®é¢˜ï¼Œåº”è¯¥æ˜¯invokerCache.put(key, newInvoker);","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664439672,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}