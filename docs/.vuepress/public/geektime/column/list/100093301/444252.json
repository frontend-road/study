{"id":444252,"title":"15 | å¯è§†åŒ–å·¥å…·ï¼šå¦‚ä½•å®ç°è®­ç»ƒçš„å¯è§†åŒ–ç›‘æ§ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æ–¹è¿œã€‚æ¬¢è¿æ¥åˆ°ç¬¬15èŠ‚è¯¾çš„å­¦ä¹ ã€‚</p><p>ä¸ŠèŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬ä»¥çº¿æ€§å›å½’æ¨¡å‹ä¸ºä¾‹ï¼Œå­¦ä¹ äº†æ¨¡å‹ä»æ­å»ºåˆ°è®­ç»ƒçš„å…¨éƒ¨è¿‡ç¨‹ã€‚åœ¨æ·±åº¦å­¦ä¹ é¢†åŸŸï¼Œæ¨¡å‹è®­ç»ƒæ˜¯ä¸€ä¸ªå¿…é¡»çš„ç¯èŠ‚ï¼Œè€Œåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦å¯¹æ¨¡å‹çš„å‚æ•°ã€è¯„ä»·æŒ‡æ ‡ç­‰ä¿¡æ¯è¿›è¡Œå¯è§†åŒ–ç›‘æ§ã€‚</p><p>ä»Šå¤©æˆ‘ä»¬ä¸»è¦ä¼šå­¦ä¹ ä¸¤ç§å¯è§†åŒ–å·¥å…·ï¼Œå¹¶åˆ©ç”¨å®ƒä»¬å®ç°è®­ç»ƒè¿‡ç¨‹çš„å¯è§†åŒ–ç›‘æ§ã€‚</p><p>åœ¨TensorFlowä¸­ï¼Œæœ€å¸¸ä½¿ç”¨çš„å¯è§†åŒ–å·¥å…·éTensorboardè«å±ï¼Œè€ŒTensorboardXå·¥å…·ä½¿å¾—PyTorchä¹Ÿäº«å—åˆ°Tensorboardçš„ä¾¿æ·åŠŸèƒ½ã€‚å¦å¤–ï¼ŒFaceBookä¹Ÿä¸ºPyTorchå¼€å‘äº†ä¸€æ¬¾äº¤äº’å¼å¯è§†åŒ–å·¥å…·Visdomï¼Œå®ƒå¯ä»¥å¯¹å®æ—¶æ•°æ®è¿›è¡Œä¸°å¯Œçš„å¯è§†åŒ–ï¼Œå¸®åŠ©æˆ‘ä»¬å®æ—¶ç›‘æ§å®éªŒè¿‡ç¨‹ã€‚</p><p>è®©æˆ‘ä»¬å…ˆä»TensorboardXè¯´èµ·ã€‚</p><h2>TensorboardX</h2><p>Tensorboardæ˜¯TensorFlowçš„ä¸€ä¸ªé™„åŠ å·¥å…·ï¼Œç”¨äºè®°å½•è®­ç»ƒè¿‡ç¨‹çš„æ¨¡å‹çš„å‚æ•°ã€è¯„ä»·æŒ‡æ ‡ä¸å›¾åƒç­‰ç»†èŠ‚å†…å®¹ï¼Œå¹¶é€šè¿‡Webé¡µé¢æä¾›æŸ¥çœ‹ç»†èŠ‚ä¸è¿‡ç¨‹çš„åŠŸèƒ½ï¼Œç”¨æµè§ˆå™¨å¯è§†åŒ–çš„å½¢å¼å±•ç°ï¼Œå¸®åŠ©æˆ‘ä»¬åœ¨å®éªŒæ—¶è§‚å¯Ÿç¥ç»ç½‘ç»œçš„è®­ç»ƒè¿‡ç¨‹ï¼ŒæŠŠæ¡è®­ç»ƒè¶‹åŠ¿ã€‚</p><p>æ—¢ç„¶Tensorboardå·¥å…·è¿™ä¹ˆæ–¹ä¾¿ï¼ŒTensorFlowå¤–çš„å…¶å®ƒæ·±åº¦å­¦ä¹ æ¡†æ¶è‡ªç„¶ä¹Ÿæƒ³è·å–Tensorboardçš„ä¾¿æ·åŠŸèƒ½ï¼Œäºæ˜¯ï¼ŒTensorboardXåº”è¿è€Œç”Ÿã€‚</p><!-- [[[read_end]]] --><h3>å®‰è£…</h3><p>å®‰è£… Tensorboardå¾ˆå®¹æ˜“ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨pipè¿›è¡Œå®‰è£…ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre><code class=\"language-python\">pip install tensorboard\n</code></pre><p>å¦‚æœä½ å·²ç»å®‰è£…è¿‡TensorFlowï¼Œé‚£ä¹ˆå°±æ— éœ€é¢å¤–å®‰è£…Tensorboardäº†ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£… TensorboardXã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒPyTorch 1.8ä¹‹åçš„ç‰ˆæœ¬è‡ªå¸¦TensorboardXï¼Œå®ƒè¢«æ”¾åœ¨<code>torch.utils.tensorboard</code>ä¸­ï¼Œå› æ­¤æ— éœ€å¤šä½™é…ç½®ã€‚</p><p>å¦‚æœä½ ç”¨çš„æ˜¯PyTorch 1.8ä¹‹å‰çš„ç‰ˆæœ¬ï¼ŒTensorboardXå®‰è£…èµ·æ¥ä¹Ÿéå¸¸ç®€å•ã€‚æˆ‘ä»¬ä¾ç„¶ä½¿ç”¨pipå‘½ä»¤å®‰è£…ï¼š</p><pre><code class=\"language-plain\">pip install tensorboardX\n</code></pre><h3>ä½¿ç”¨ä¸å¯åŠ¨</h3><p>ä¸ºäº†ä½¿ç”¨TensorboardXï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªSummaryWriterçš„å®ä¾‹ï¼Œç„¶åå†ä½¿ç”¨<code>add_scalar</code>æ–¹æ³•æˆ–<code>add_image</code>æ–¹æ³•ï¼Œå°†æ•°å­—æˆ–å›¾ç‰‡è®°å½•åˆ°SummaryWriterå®ä¾‹ä¸­ã€‚</p><p>SummaryWriterç±»çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><pre><code class=\"language-python\">torch.utils.tensorboard.writer.SummaryWriter(log_dir=None)\n</code></pre><p>å…¶ä¸­çš„log_dirè¡¨ç¤ºä¿å­˜æ—¥å¿—çš„è·¯å¾„ï¼Œé»˜è®¤ä¼šä¿å­˜åœ¨â€œruns/å½“å‰æ—¶é—´_ä¸»æœºåâ€æ–‡ä»¶å¤¹ä¸­ã€‚</p><p>å®ä¾‹åˆ›å»ºå¥½ä¹‹åï¼Œæˆ‘ä»¬æ¥çœ‹<code>add_scalar</code>æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ç”¨æ¥è®°å½•<strong>æ•°å­—å¸¸é‡</strong>ï¼Œå®ƒçš„å®šä¹‰å¦‚ä¸‹ï¼š</p><pre><code class=\"language-python\">add_scalar(tag, scalar_value, global_step=None, walltime=None)\n</code></pre><p>æ ¹æ®å®šä¹‰ï¼Œæˆ‘ä»¬ä¾æ¬¡è¯´è¯´å…¶ä¸­çš„å‚æ•°ï¼š</p><ul>\n<li>tagï¼šå­—ç¬¦ä¸²ç±»å‹ï¼Œè¡¨ç¤ºæ•°æ®çš„åç§°ï¼Œä¸åŒåç§°çš„æ•°æ®ä¼šä½¿ç”¨ä¸åŒæ›²çº¿å±•ç¤ºï¼›</li>\n<li>scalar_valueï¼šæµ®ç‚¹å‹ï¼Œè¡¨ç¤ºè¦ä¿å­˜çš„æ•°å€¼ï¼›</li>\n<li>global_stepï¼šæ•´å‹ï¼Œè¡¨ç¤ºè®­ç»ƒçš„stepæ•°ï¼›</li>\n<li>walltimeï¼šæµ®ç‚¹å‹ï¼Œè¡¨ç¤ºè®°å½•å‘ç”Ÿçš„æ—¶é—´ï¼Œé»˜è®¤ä¸ºtime.time()ã€‚</li>\n</ul><p>æˆ‘ä»¬ä¸€èˆ¬ä¼šä½¿ç”¨<code>add_scalar</code>æ–¹æ³•æ¥è®°å½•è®­ç»ƒè¿‡ç¨‹çš„lossã€accuracyã€learning rateç­‰æ•°å€¼çš„å˜åŒ–ï¼Œè¿™æ ·å°±èƒ½ç›´è§‚åœ°ç›‘æ§è®­ç»ƒè¿‡ç¨‹ã€‚</p><p><code>add_image</code>æ–¹æ³•ç”¨æ¥è®°å½•å•ä¸ªå›¾åƒæ•°æ®ï¼ˆéœ€è¦Pillowåº“çš„æ”¯æŒï¼‰ï¼Œå®ƒçš„å®šä¹‰å¦‚ä¸‹ï¼š</p><pre><code class=\"language-python\">add_image(tag, img_tensor, global_step=None, walltime=None, dataformats='CHW')\n</code></pre><p>tagã€global_stepå’Œwalltimeçš„å«ä¹‰è·Ÿ<code>add_scalar</code>æ–¹æ³•é‡Œä¸€æ ·ï¼Œæ‰€ä»¥ä¸å†èµ˜è¿°ï¼Œæˆ‘ä»¬çœ‹çœ‹å…¶ä»–æ–°å¢çš„å‚æ•°éƒ½æ˜¯ä»€ä¹ˆå«ä¹‰ã€‚</p><ul>\n<li>img_tensorï¼šPyTorchçš„Tensorç±»å‹æˆ–NumPyçš„arrayç±»å‹ï¼Œè¡¨ç¤ºå›¾åƒæ•°æ®ï¼›</li>\n<li>dataformatsï¼šå­—ç¬¦ä¸²ç±»å‹ï¼Œè¡¨ç¤ºå›¾åƒæ•°æ®çš„æ ¼å¼ï¼Œé»˜è®¤ä¸ºâ€œCHWâ€ï¼Œå³Channel x Height x Widthï¼Œè¿˜å¯ä»¥æ˜¯â€œCHWâ€ã€â€œHWCâ€æˆ–â€œHWâ€ç­‰ã€‚</li>\n</ul><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­åŠ æ·±ç†è§£ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ã€‚</p><pre><code class=\"language-python\">from torch.utils.tensorboard import SummaryWriter\n# PyTorch 1.8ä¹‹å‰çš„ç‰ˆæœ¬è¯·ä½¿ç”¨ï¼š\n# from tensorboardX import SummaryWriter\nimport numpy as np\n\n# åˆ›å»ºä¸€ä¸ªSummaryWriterçš„å®ä¾‹\nwriter = SummaryWriter()\n\nfor n_iter in range(100):\n    writer.add_scalar('Loss/train', np.random.random(), n_iter)\n    writer.add_scalar('Loss/test', np.random.random(), n_iter)\n    writer.add_scalar('Accuracy/train', np.random.random(), n_iter)\n    writer.add_scalar('Accuracy/test', np.random.random(), n_iter)\n    \nimg = np.zeros((3, 100, 100))\nimg[0] = np.arange(0, 10000).reshape(100, 100) / 10000\nimg[1] = 1 - np.arange(0, 10000).reshape(100, 100) / 10000\n\nwriter.add_image('my_image', img, 0)\nwriter.close()\n</code></pre><p>æˆ‘ç»™ä½ æ¢³ç†ä¸€ä¸‹è¿™æ®µä»£ç éƒ½åšäº†ä»€ä¹ˆã€‚</p><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªSummaryWriterçš„å®ä¾‹ï¼Œè¿™é‡Œæ³¨æ„ï¼ŒPyTorch 1.8ä¹‹å‰çš„ç‰ˆæœ¬è¯·ä½¿ç”¨â€œfrom tensorboardX import SummaryWriterâ€ï¼ŒPyTorch 1.8ä¹‹åçš„ç‰ˆæœ¬è¯·ä½¿ç”¨â€œfrom torch.utils.tensorboard import SummaryWriterâ€ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬éšæœºç”Ÿæˆä¸€äº›éšæœºæ•°ï¼Œç”¨æ¥æ¨¡æ‹Ÿè®­ç»ƒä¸é¢„æµ‹è¿‡ç¨‹ä¸­çš„Losså’ŒAccuracyï¼Œå¹¶ä¸”ç”¨<code>add_scalar</code>æ–¹æ³•è¿›è¡Œè®°å½•ã€‚æœ€åç”Ÿæˆäº†ä¸€ä¸ªå›¾åƒï¼Œç”¨<code>add_image</code>æ–¹æ³•æ¥è®°å½•ã€‚</p><p>ä¸Šè¿°ä»£ç è¿è¡Œåï¼Œä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªâ€œrunsâ€æ–‡ä»¶å¤¹ï¼Œé‡Œé¢å­˜å‚¨äº†æˆ‘ä»¬éœ€è¦è®°å½•çš„æ•°æ®ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬åœ¨å½“å‰ç›®å½•ä¸‹æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå³å¯å¯åŠ¨Tensoboardã€‚</p><pre><code class=\"language-python\">tensorboard --logdir=runs\n</code></pre><p>å¯åŠ¨åï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥â€œ<a href=\"http://127.0.0.1:6006/\">http://127.0.0.1:6006/</a>â€ï¼ˆTensorboardçš„é»˜è®¤ç«¯å£ä¸º6006ï¼‰ï¼Œå³å¯å¯¹åˆšæ‰æˆ‘ä»¬è®°å½•çš„æ•°æ®è¿›è¡Œå¯è§†åŒ–ã€‚</p><p>Tensorboardçš„ç•Œé¢å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å›¾ç‰‡ä¸­å³ä¾§éƒ¨åˆ†å°±æ˜¯åˆšåˆšç”¨<code>add_scalar</code>æ–¹æ³•è®°å½•çš„Losså’ŒAccuracyã€‚ä½ çœ‹ï¼ŒTensorboardå·²ç»å¸®æˆ‘ä»¬æŒ‰ç…§è¿­ä»£stepç»˜åˆ¶æˆäº†æ›²çº¿å›¾ï¼Œå¯ä»¥éå¸¸ç›´è§‚åœ°ç›‘æ§è®­ç»ƒè¿‡ç¨‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/33/e8/3393e81d9a34c51cdecd4a99e460dde8.png?wh=1920x1360\" alt=\"å›¾ç‰‡\"></p><p>åœ¨â€œIMAGESâ€çš„æ ‡ç­¾é¡µä¸­ï¼Œå¯ä»¥æ˜¾ç¤ºåˆšåˆšç”¨<code>add_image</code>æ–¹æ³•è®°å½•çš„å›¾åƒæ•°æ®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/86/3a/86bcefa7e732ccceef230a888b3f3a3a.png?wh=1432x1114\" alt=\"å›¾ç‰‡\"></p><h3>è®­ç»ƒè¿‡ç¨‹å¯è§†åŒ–</h3><p>å¥½ï¼Œè¿›è¡Œåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»è£…å¥½äº†TensorboardXå¹¶å¯åŠ¨ï¼Œè¿˜æ¼”ç¤ºäº†è¿™ä¸ªå·¥å…·å¦‚ä½•ä½¿ç”¨ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•åœ¨æˆ‘ä»¬å®é™…çš„è®­ç»ƒè¿‡ç¨‹ä¸­æ¥è¿›è¡Œå¯è§†åŒ–ç›‘æ§å‘¢ï¼Ÿæˆ‘ä»¬ç”¨ä¸ŠèŠ‚è¯¾æ„å»ºå¹¶è®­ç»ƒçš„çº¿æ€§å›å½’æ¨¡å‹ä¸ºä¾‹ï¼Œæ¥è¿›è¡Œå®è·µã€‚</p><p>ä¸‹é¢çš„ä»£ç ä¸ŠèŠ‚è¯¾è®²è¿‡ï¼Œä½œç”¨æ˜¯å®šä¹‰ä¸€ä¸ªçº¿æ€§å›å½’æ¨¡å‹ï¼Œå¹¶éšæœºç”Ÿæˆè®­ç»ƒé›†Xä¸å¯¹åº”çš„æ ‡ç­¾Yã€‚</p><pre><code class=\"language-python\">import random\nimport numpy as np\nimport torch\nfrom torch import nn\n\n# æ¨¡å‹å®šä¹‰\nclass LinearModel(nn.Module):\n&nbsp; def __init__(self):\n&nbsp; &nbsp; super().__init__()\n&nbsp; &nbsp; self.weight = nn.Parameter(torch.randn(1))\n&nbsp; &nbsp; self.bias = nn.Parameter(torch.randn(1))\n\n&nbsp; def forward(self, input):\n&nbsp; &nbsp; return (input * self.weight) + self.bias\n\n# æ•°æ®\nw = 2\nb = 3\nxlim = [-10, 10]\nx_train = np.random.randint(low=xlim[0], high=xlim[1], size=30)\ny_train = [w * x + b + random.randint(0,2) for x in x_train]\n</code></pre><p>ç„¶åæˆ‘ä»¬åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­ï¼ŒåŠ å…¥åˆšæ‰è®²è¿‡çš„SummaryWriterå®ä¾‹ä¸<code>add_scalar</code>æ–¹æ³•ï¼Œå…·ä½“çš„ä»£ç å¦‚ä¸‹ã€‚</p><pre><code class=\"language-python\"># Tensorboard\nfrom torch.utils.tensorboard import SummaryWriter\n\n# è®­ç»ƒ\nmodel = LinearModel()\noptimizer = torch.optim.SGD(model.parameters(), lr=1e-4, weight_decay=1e-2, momentum=0.9)\ny_train = torch.tensor(y_train, dtype=torch.float32)\n\nwriter = SummaryWriter()\n\nfor n_iter in range(500):\n    input = torch.from_numpy(x_train)\n    output = model(input)\n    loss = nn.MSELoss()(output, y_train)\n    model.zero_grad()\n    loss.backward()\n    optimizer.step()\n    writer.add_scalar('Loss/train', loss, n_iter)\n</code></pre><p>é€šè¿‡ä¸Šé¢è¿™æ®µä»£ç ï¼Œæˆ‘ä»¬è®°å½•äº†è®­ç»ƒè¿‡ç¨‹ä¸­çš„Lossçš„å˜æ¢è¿‡ç¨‹ã€‚å…·ä½“çš„è¶‹åŠ¿å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/df/48/df021d742b09180fb267652fca440d48.png?wh=750x656\" alt=\"å›¾ç‰‡\"></p><p>å¯ä»¥çœ‹åˆ°Lossæ˜¯ä¸€ä¸ªä¸‹é™çš„è¶‹åŠ¿ï¼Œè¯´æ˜éšç€è®­ç»ƒè¿‡ç¨‹ï¼Œæ¨¡å‹è¶Šæ¥è¶Šæ‹Ÿåˆæˆ‘ä»¬çš„è®­ç»ƒæ•°æ®äº†ã€‚è¿›è¡Œåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»èµ°å®Œäº†åˆ©ç”¨TensorboardXå·¥å…·ï¼Œå®ç°è®­ç»ƒå¯è§†åŒ–ç›‘æ§çš„æ•´ä¸ªè¿‡ç¨‹ã€‚</p><p>TensorboardXé™¤äº†åŒ…æ‹¬ä¸Šè¿°çš„å¸¸ç”¨æ–¹æ³•ä¹‹å¤–ï¼Œè¿˜æœ‰è®¸å¤šå…¶ä»–æ–¹æ³•å¦‚<code>add_histogram</code>ã€<code>add_graph</code>ã€<code>add_embedding</code>ã€<code>add_audio</code> ç­‰ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥å‚è€ƒ<a href=\"https://pytorch.org/docs/stable/tensorboard.html\">[å®˜æ–¹æ–‡æ¡£]</a>ã€‚ç›¸ä¿¡å‚è€ƒå·²ç»å­¦ä¹ è¿‡çš„ä¸¤ä¸ªaddæ–¹æ³•ï¼Œä½ ä¸€å®šèƒ½å¤Ÿä¸¾ä¸€åä¸‰ï¼Œå¾ˆå¿«ç†Ÿç»ƒè°ƒç”¨å…¶å®ƒçš„æ–¹æ³•ã€‚</p><h2>Visdom</h2><p>Visdomæ˜¯Facebookå¼€æºçš„ä¸€ä¸ªä¸“é—¨ç”¨äºPyTorchçš„äº¤äº’å¼å¯è§†åŒ–å·¥å…·ã€‚å®ƒä¸ºå®æ—¶æ•°æ®æä¾›äº†ä¸°å¯Œçš„å¯è§†åŒ–ç§ç±»ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¿›è¡ŒæŸ¥çœ‹ï¼Œå¹¶ä¸”å¯ä»¥å¾ˆå®¹æ˜“åœ°ä¸å…¶ä»–äººå…±äº«å¯è§†åŒ–ç»“æœï¼Œå¸®åŠ©æˆ‘ä»¬å®æ—¶ç›‘æ§åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šè¿›è¡Œçš„ç§‘å­¦å®éªŒã€‚</p><h3>å®‰è£…ä¸å¯åŠ¨</h3><p>Visdomçš„å®‰è£…éå¸¸ç®€å•ï¼Œå¯ç›´æ¥ä½¿ç”¨pipè¿›è¡Œå®‰è£…ï¼Œå…·ä½“çš„å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre><code class=\"language-python\">pip install visdom\n</code></pre><p>æ‰§è¡Œå®‰è£…å‘½ä»¤åï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨Visdomï¼š</p><pre><code class=\"language-python\">python -m visdom.server\n</code></pre><p>Visdomçš„é»˜è®¤ç«¯å£æ˜¯8097ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹ï¼Œå¯ä»¥ä½¿ç”¨-pé€‰é¡¹ã€‚</p><p>å¯åŠ¨æˆåŠŸåï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥â€œ<a href=\"http://127.0.0.1:8097/\">http://127.0.0.1:8097/</a>â€ï¼Œè¿›å…¥Visdomçš„ä¸»ç•Œé¢ã€‚</p><p>Visdomçš„ä¸»ç•Œé¢å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/99/a8/99d3a7d1ayya17cb625a6f8a567e2aa8.jpg?wh=1920x460\" alt=\"å›¾ç‰‡\"></p><p>è¯·ä½ æ³¨æ„ï¼ŒVisdomçš„ä½¿ç”¨ä¸Tensorboardç¨æœ‰ä¸åŒã€‚Tensorboardæ˜¯åœ¨ç”Ÿæˆè®°å½•æ–‡ä»¶åï¼Œå¯åŠ¨å¯è§†åŒ–ç•Œé¢ã€‚è€ŒVisdomæ˜¯å…ˆå¯åŠ¨å¯è§†åŒ–ç•Œé¢ï¼Œå½“æœ‰æ•°æ®è¿›å…¥Visdomçš„çª—å£æ—¶ï¼Œä¼šå®æ—¶åŠ¨æ€åœ°æ›´æ–°å¹¶ç»˜åˆ¶æ•°æ®ã€‚</p><h3>å¿«é€Ÿä¸Šæ‰‹</h3><p>ä¸‹é¢æˆ‘ä»¬å°±æ¥åŠ¨æ‰‹è¯•ä¸€ä¸‹ï¼Œçœ‹çœ‹Visdomå¦‚ä½•ç»˜åˆ¶æ•°æ®ã€‚</p><p>å…·ä½“è¿‡ç¨‹åˆ†å››æ­¥èµ°ï¼šé¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å°†çª—å£ç±»Visdomå®ä¾‹åŒ–ï¼›ç„¶åï¼Œåˆ©ç”¨line()æ–¹æ³•åˆ›å»ºä¸€ä¸ªçº¿å›¾çª—å£å¹¶åˆå§‹åŒ–ï¼›æ¥ç€ï¼Œåˆ©ç”¨ç”Ÿæˆçš„ä¸€ç»„éšæœºæ•°æ•°æ®æ¥æ›´æ–°çº¿å›¾çª—å£ã€‚æœ€åï¼Œé€šè¿‡image()æ–¹æ³•æ¥ç»˜åˆ¶ä¸€å¼ å›¾ç‰‡ã€‚</p><p>ä¸Šè¿°è¿‡ç¨‹çš„å…·ä½“ä»£ç å¦‚ä¸‹ã€‚</p><pre><code class=\"language-python\">from visdom import Visdom\nimport numpy as np\nimport time\n\n# å°†çª—å£ç±»å®ä¾‹åŒ–\nviz = Visdom()&nbsp;\n# åˆ›å»ºçª—å£å¹¶åˆå§‹åŒ–\nviz.line([0.], [0], win='train_loss', opts=dict(title='train_loss'))\n\nfor n_iter in range(10):\n&nbsp; &nbsp; # éšæœºè·å–losså€¼\n&nbsp; &nbsp; loss = 0.2 * np.random.randn() + 1\n&nbsp; &nbsp; # æ›´æ–°çª—å£å›¾åƒ\n&nbsp; &nbsp; viz.line([loss], [n_iter], win='train_loss', update='append')\n&nbsp; &nbsp; time.sleep(0.5)\n\nimg = np.zeros((3, 100, 100))\nimg[0] = np.arange(0, 10000).reshape(100, 100) / 10000\nimg[1] = 1 - np.arange(0, 10000).reshape(100, 100) / 10000\n# å¯è§†åŒ–å›¾åƒ\nviz.image(img)\n</code></pre><p>å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨è¿‡ç¨‹ä¸TensorboardåŸºæœ¬ä¸€è‡´ï¼Œåªæ˜¯å‡½æ•°è°ƒç”¨ä¸Šçš„ä¸åŒã€‚<br>\nç»˜åˆ¶çº¿å›¾çš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/c0/13/c0057dd5935b0ed2f6606a8c148f4f13.gif?wh=368x336\" alt=\"å›¾ç‰‡\"></p><p>å¯¹åº”çš„ç»˜åˆ¶å›¾ç‰‡ç»“æœå¦‚ä¸‹ã€‚å¯ä»¥çœ‹å‡ºï¼ŒVisodmç»˜åˆ¶æ•°æ®æ—¶ï¼Œæ˜¯åŠ¨æ€æ›´æ–°çš„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a6/88/a66f16a1be56456c009da3873c949888.jpg?wh=676x482\" alt=\"å›¾ç‰‡\"></p><h3>è®­ç»ƒå¯è§†åŒ–ç›‘æ§</h3><p>åŒæ ·åœ°ï¼Œæˆ‘ä»¬å­¦ä¹ å¯è§†åŒ–å·¥å…·çš„ä½¿ç”¨ä¸»è¦æ˜¯ä¸ºäº†ç›‘æ§æˆ‘ä»¬çš„è®­ç»ƒè¿‡ç¨‹ã€‚æˆ‘ä»¬è¿˜æ˜¯ä»¥æ„å»ºå¹¶è®­ç»ƒçš„çº¿æ€§å›å½’æ¨¡å‹ä¸ºä¾‹ï¼Œæ¥è¿›è¡Œå®è·µã€‚</p><p>Visdomç›‘æ§è®­ç»ƒè¿‡ç¨‹å¤§è‡´åˆ†ä¸ºä¸‰æ­¥ï¼š</p><ul>\n<li>å®ä¾‹åŒ–ä¸€ä¸ªçª—å£ï¼›</li>\n<li>åˆå§‹åŒ–çª—å£çš„ä¿¡æ¯ï¼›</li>\n<li>æ›´æ–°ç›‘å¬çš„ä¿¡æ¯ã€‚</li>\n</ul><p>å®šä¹‰æ¨¡å‹ä¸ç”Ÿæˆè®­ç»ƒæ•°æ®çš„è¿‡ç¨‹è·Ÿå‰é¢ä¸€æ ·ï¼Œæˆ‘å°±ä¸å†é‡å¤äº†ã€‚åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å®ä¾‹åŒ–å¹¶åˆå§‹åŒ–Visdomçª—å£ã€å®æ—¶è®°å½•Lossçš„ä»£ç å¦‚ä¸‹ã€‚</p><pre><code class=\"language-python\"># Visdom\nfrom visdom import Visdom\nimport numpy as np\n\n# è®­ç»ƒ\nmodel = LinearModel()\noptimizer = torch.optim.SGD(model.parameters(), lr=1e-4, weight_decay=1e-2, momentum=0.9)\ny_train = torch.tensor(y_train, dtype=torch.float32)\n\n# å®ä¾‹åŒ–ä¸€ä¸ªçª—å£\nviz = Visdom(port=8097)\n# åˆå§‹åŒ–çª—å£çš„ä¿¡æ¯\nviz.line([0.], [0.], win='train_loss', opts=dict(title='train loss'))\n\nfor n_iter in range(500):\n    input = torch.from_numpy(x_train)\n    output = model(input)\n    loss = nn.MSELoss()(output, y_train)\n    model.zero_grad()\n    loss.backward()\n    optimizer.step()\n    # æ›´æ–°ç›‘å¬çš„ä¿¡æ¯\n    viz.line([loss.item()], [n_iter], win='train_loss', update='append')\n</code></pre><p>åœ¨Visdomçš„ç•Œé¢ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°Lossçš„å˜åŒ–è¶‹åŠ¿å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚Visdomä¸ä¼šåƒTensorboardè‡ªåŠ¨å¯¹æ›²çº¿è¿›è¡Œç¼©æ”¾æˆ–å¹³æ»‘ï¼Œå› æ­¤å¯ä»¥çœ‹åˆ°50è½®ä¹‹åï¼Œç”±äºLosså€¼å˜åŒ–èŒƒå›´æ¯”è¾ƒå°ï¼Œå›¾åƒçš„æŠ–åŠ¨è¶‹åŠ¿è¢«å‹ç¼©å¾—éå¸¸ä¸æ˜æ˜¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/54/e0/54665114801a49e36a0211b5b3dbdce0.jpg?wh=1007x763\" alt=\"å›¾ç‰‡\"></p><h2>å°ç»“</h2><p>è¿™èŠ‚è¯¾æˆ‘å¸¦ä½ å­¦ä¹ äº†ä¸¤ç§å¯è§†åŒ–å·¥å…·ï¼šTensorboardXå’ŒVisdomã€‚</p><p>ç›¸ä¿¡é€šè¿‡ä¸€èŠ‚è¯¾çš„è®²è§£å’Œç»ƒä¹ ï¼Œè¿™ä¸¤ç§å¯è§†åŒ–å·¥å…·å¦‚ä½•å®‰è£…ã€å¯åŠ¨ï¼Œè¿˜æœ‰å¦‚ä½•ç”¨å®ƒä»¬ç»˜åˆ¶çº¿å›¾å’Œå›¾ç‰‡è¿™äº›åŸºæœ¬çš„æ“ä½œï¼Œç›¸ä¿¡ä½ éƒ½å·²ç»æŒæ¡äº†ã€‚</p><p>å­¦ä¹ ä½¿ç”¨å¯è§†åŒ–å·¥å…·çš„ä¸»è¦ç›®çš„ï¼Œ<strong>æ˜¯ä¸ºäº†å¸®åŠ©æˆ‘ä»¬åœ¨æ·±åº¦å­¦ä¹ æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œå®æ—¶ç›‘æ§ä¸€äº›æ•°æ®ï¼Œä¾‹å¦‚æŸå¤±å€¼ã€è¯„ä»·æŒ‡æ ‡ç­‰ç­‰</strong>ã€‚å¯¹è¿™äº›æ•°æ®è¿›è¡Œå¯è§†åŒ–ç›‘æ§ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ„ŸçŸ¥å„ä¸ªå‚æ•°ä¸æŒ‡æ ‡çš„å˜åŒ–ï¼Œå®æ—¶æŠŠæ¡è®­ç»ƒè¶‹åŠ¿ã€‚å› æ­¤ï¼Œå¦‚ä½•å°†å¯è§†åŒ–å·¥å…·åº”ç”¨äºæ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæ˜¯æˆ‘ä»¬å­¦ä¹ çš„é‡ç‚¹ã€‚</p><p>TensorboardXå’ŒVisdomè¿˜æœ‰å…¶å®ƒè¯¸å¦‚ç»˜åˆ¶æ•£ç‚¹å›¾ã€æŸ±çŠ¶å›¾ã€çƒ­åŠ›å›¾ç­‰ç­‰å¤šç§å¤šæ ·çš„åŠŸèƒ½ï¼Œå¦‚æœä½ æ„Ÿå…´è¶£ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼Œç±»æ¯”æˆ‘ä»¬ä»Šå¤©å­¦ä¹ çš„æ–¹æ³•åŠ¨æ‰‹è¯•ä¸€è¯•ï¼Œç»è¿‡ç»ƒä¹ ï¼Œä¸€å®šå¯ä»¥ç†Ÿç»ƒä½¿ç”¨å®ƒä»¬ã€‚</p><h2>æ¯è¯¾ä¸€ç»ƒ</h2><p>å‚è€ƒVisdomå¿«é€Ÿä¸Šæ‰‹ä¸­çš„ä¾‹å­ï¼Œç°åœ¨éœ€è¦ç”Ÿæˆä¸¤ç»„éšæœºæ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºLosså’ŒAccuracyã€‚åœ¨è¿­ä»£çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚ä½•ç”¨ä»£ç åŒæ—¶ç»˜åˆ¶å‡ºLosså’ŒAccuracyä¸¤ç»„æ•°æ®å‘¢ï¼Ÿ</p><p>æ¬¢è¿è®°å½•ä½ çš„æ€è€ƒæˆ–ç–‘æƒ‘ï¼Œä¹Ÿæ¨èä½ æŠŠä»Šå¤©å­¦åˆ°çš„å¯è§†åŒ–å·¥å…·åˆ†äº«ç»™æ›´å¤šåŒäº‹ã€æœ‹å‹ã€‚</p>","neighbors":{"left":{"article_title":"14 | æ„å»ºç½‘ç»œï¼šä¸€ç«™å¼å®ç°æ¨¡å‹æ­å»ºä¸è®­ç»ƒ","id":442442},"right":{"article_title":"16ï½œåˆ†å¸ƒå¼è®­ç»ƒï¼šå¦‚ä½•åŠ é€Ÿä½ çš„æ¨¡å‹è®­ç»ƒï¼Ÿ","id":445886}},"comments":[{"had_liked":false,"id":321807,"user_name":"vcjmhg","can_delete":false,"product_type":"c1","uid":1526461,"ip_address":"","ucode":"B508D1E9B3F974","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/j24oyxHcpB5AMR9pMO6fITqnOFVOncnk2T1vdu1rYLfq1cN6Sj7xVrBVbCvHXUad2MpfyBcE4neBguxmjIxyiaQ/132","comment_is_top":false,"comment_ctime":1637050884,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23111887364","product_id":100093301,"comment_content":"# å°†çª—å£ç±»å®ä¾‹åŒ–<br>viz = Visdom()<br># åˆ›å»ºçª—å£å¹¶åˆå§‹åŒ–<br>viz.line([0.], [0], win=&#39;loss and accuracy&#39;, opts=dict(title=&#39;train_loss&#39;))<br><br>for n_iter in range(10):<br>    # éšæœºè·å–losså€¼<br>    loss = 0.2 * np.random.randn() + 1<br>    # éšæœºäº§ç”Ÿaccuracy<br>    accuracy = 0.1 * np.random.randn()<br>    # æ›´æ–°çª—å£å›¾åƒ,åŒæ—¶æ›´æ–°losså’Œaccuracy<br>    viz.line(Y=[loss, accuracy], X=[n_iter], win=&#39;loss and accuracy&#39;, update=&#39;append&#39;)<br>    time.sleep(0.5)","like_count":5},{"had_liked":false,"id":353878,"user_name":"John(æ˜“ç­‹)","can_delete":false,"product_type":"c1","uid":1180202,"ip_address":"åŒ—äº¬","ucode":"BB4E58DD4B8F15","user_header":"https://static001.geekbang.org/account/avatar/00/12/02/2a/90e38b94.jpg","comment_is_top":false,"comment_ctime":1659882736,"is_pvip":true,"replies":[{"id":"128764","content":"ğŸ‘ğŸ»","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"2802608","ctime":1660014401,"ip_address":"åŒ—äº¬","comment_id":353878,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5954850032","product_id":100093301,"comment_content":"è¿è¡Œä¸‹é¢æŒ‡ä»¤æŠ¥é”™: Error while finding module specification for &#39;visdom.server&#39;<br>python -m visdom.server<br><br>è§£å†³æ–¹æ¡ˆï¼š<br>Upgrade pip,<br><br>python -m pip install --upgrade pip<br>They try,<br><br>python -m pip install visdom<br><br>å†æ¬¡è¿è¡Œæœ€å¼€å§‹çš„å‘½ä»¤å³å¯ã€‚ <br>ref: https:&#47;&#47;stackoverflow.com&#47;questions&#47;60623224&#47;modulenotfounderror-no-module-named-visdom-when-importing-visdom","like_count":1,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"æ–¹è¿œ","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583289,"discussion_content":"ğŸ‘ğŸ»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660014401,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321654,"user_name":"å’ªè¥¿å°æ‚ ","can_delete":false,"product_type":"c1","uid":2823411,"ip_address":"","ucode":"732E856780999D","user_header":"https://static001.geekbang.org/account/avatar/00/2b/14/f3/175dc943.jpg","comment_is_top":false,"comment_ctime":1636979053,"is_pvip":false,"replies":[{"id":"116840","content":"helloï¼ŒğŸ‘ğŸ»ğŸ‘ğŸ»ğŸ‘ğŸ»ğŸ‘ğŸ»ğŸ‘ğŸ»ğŸ‘ğŸ»ğŸ‘ğŸ»ğŸ‘ğŸ»ï¼Œå‰å®³ï¼ŒåŠ æ²¹~","user_name":"ä½œè€…å›å¤","user_name_real":"æ–¹è¿œ","uid":"2802608","ctime":1637050636,"ip_address":"","comment_id":321654,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5931946349","product_id":100093301,"comment_content":"viz = Visdom()<br>viz.line([[0., 0.]], [0], win=&#39;train&#39;, opts=dict(title=&#39;loss_accuracy&#39;, legend=[&#39;loss&#39;, &#39;acc&#39;]))<br><br>for n_iter in range(10):<br>    loss = 0.2 * np.random.randn() + 1<br>    accuracy = 0.1 * np.random.randn() + 1<br>    viz.line([[loss, accuracy]], [n_iter], win=&#39;train&#39;, update=&#39;append&#39;)<br>    time.sleep(0.5)","like_count":1,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"æ–¹è¿œ","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530330,"discussion_content":"helloï¼ŒğŸ‘ğŸ»ğŸ‘ğŸ»ğŸ‘ğŸ»ğŸ‘ğŸ»ğŸ‘ğŸ»ğŸ‘ğŸ»ğŸ‘ğŸ»ğŸ‘ğŸ»ï¼Œå‰å®³ï¼ŒåŠ æ²¹~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637050636,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353899,"user_name":"John(æ˜“ç­‹)","can_delete":false,"product_type":"c1","uid":1180202,"ip_address":"åŒ—äº¬","ucode":"BB4E58DD4B8F15","user_header":"https://static001.geekbang.org/account/avatar/00/12/02/2a/90e38b94.jpg","comment_is_top":false,"comment_ctime":1659919122,"is_pvip":true,"replies":[{"id":"128765","content":"ğŸ‘ğŸ»ğŸ‘ğŸ»","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"2802608","ctime":1660014411,"ip_address":"åŒ—äº¬","comment_id":353899,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1659919122","product_id":100093301,"comment_content":"ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼Œå‘ç°Visdom åœ¨chromeä¸Šè¿è¡Œæ­£å¸¸ï¼ŒSafari ä¸åŠ¨ã€‚<br><br>from visdom import Visdom<br>import numpy as np<br>import time<br><br># å°†çª—å£ç±»å®ä¾‹åŒ–<br>viz = Visdom()<br># åˆ›å»ºçª—å£å¹¶åˆå§‹åŒ–<br>viz.line([[0., 0.]], [0], win=&#39;loss and accuracy&#39;, opts=dict(title=&#39;train_loss&#39;))<br><br>for n_iter in range(10):<br>     # éšæœºè·å–losså€¼<br>    loss = 0.2 * np.random.randn() + 1<br>    # éšæœºäº§ç”Ÿaccuracy<br>    accuracy = 0.1 * np.random.randn()<br>    # æ›´æ–°çª—å£å›¾åƒ,åŒæ—¶æ›´æ–°losså’Œaccuracy<br>    viz.line(Y=[[loss, accuracy]], X=[n_iter], win=&#39;loss and accuracy&#39;, update=&#39;append&#39;)<br>    time.sleep(0.5)","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"æ–¹è¿œ","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583290,"discussion_content":"ğŸ‘ğŸ»ğŸ‘ğŸ»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660014412,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350430,"user_name":"ç‘¾ç‘œå®","can_delete":false,"product_type":"c1","uid":3040135,"ip_address":"","ucode":"1559620E18460A","user_header":"https://static001.geekbang.org/account/avatar/00/2e/63/87/d4579be2.jpg","comment_is_top":false,"comment_ctime":1656908121,"is_pvip":false,"replies":[{"id":"127494","content":"åŒå­¦æ‚¨å¥½ï¼Œæ˜¯åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œå‘½ä»¤tensorboard --logdir=logï¼Œè€Œä¸æ˜¯åœ¨pythonçš„ç¼–è¾‘ç¯å¢ƒä¸­æ‰§è¡Œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"2802608","ctime":1656983921,"ip_address":"","comment_id":350430,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1656908121","product_id":100093301,"comment_content":"<br>è€å¸ˆæ‚¨å¥½ï¼Œåœ¨tensorboard --logdir=runs  è¿™ä¸€æ­¥å‡ºç°äº†é—®é¢˜ï¼Œæ±‚è§£<br>File &quot;C:\\Users\\86189\\AppData\\Local\\Temp&#47;ipykernel_82416&#47;59224237.py&quot;, line 1<br>    tensorboard --logdir=runs<br>    ^<br>SyntaxError: cannot assign to operator<br>","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"æ–¹è¿œ","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578705,"discussion_content":"åŒå­¦æ‚¨å¥½ï¼Œæ˜¯åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œå‘½ä»¤tensorboard --logdir=logï¼Œè€Œä¸æ˜¯åœ¨pythonçš„ç¼–è¾‘ç¯å¢ƒä¸­æ‰§è¡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656983921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3169115,"avatar":"https://static001.geekbang.org/account/avatar/00/30/5b/5b/1804b22f.jpg","nickname":"é—®é¼è‹ç©¹","note":"","ucode":"C059352076D92C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588158,"discussion_content":"è€å¸ˆï¼Œæˆ‘åœ¨å‘½ä»¤è¡Œè¾“å…¥å‘½ä»¤åï¼Œè¯´tensorboardä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤ï¼Œä¹Ÿä¸æ˜¯å¯è¿è¡Œçš„ç¨‹åºæˆ–æ‰¹å¤„ç†æ–‡ä»¶\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663580815,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ¹–å—"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":346613,"user_name":"äºšæ—","can_delete":false,"product_type":"c1","uid":1018972,"ip_address":"","ucode":"4A5A6D24314B79","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/5c/3f164f66.jpg","comment_is_top":false,"comment_ctime":1653288485,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1653288485","product_id":100093301,"comment_content":"ä½¿ç”¨visdomï¼Œä¸Šä¸€èŠ‚è®­ç»ƒæ¨¡å‹æ”¶ä¼åœ¨2é™„è¿‘äº†","like_count":0},{"had_liked":false,"id":346612,"user_name":"äºšæ—","can_delete":false,"product_type":"c1","uid":1018972,"ip_address":"","ucode":"4A5A6D24314B79","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/5c/3f164f66.jpg","comment_is_top":false,"comment_ctime":1653288424,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1653288424","product_id":100093301,"comment_content":"def cifar10_go():<br>    # å®ä¾‹åŒ–ä¸€ä¸ªçª—å£<br>    viz = Visdom(port=8097)<br>    # åˆå§‹åŒ–çª—å£çš„ä¿¡æ¯<br>    viz.line([0.], [0.], win=&#39;train_loss&#39;, opts=dict(title=&#39;train loss&#39;))<br><br>    transform = transforms.Compose([<br>        transforms.RandomResizedCrop((224, 224)),<br>        transforms.ToTensor(),<br>        transforms.Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])<br>    ])<br>    cifar10_dataset = torchvision.datasets.CIFAR10(root=&#39;.&#47;data&#39;,<br>                                                   train=False,<br>                                                   transform=transform,<br>                                                   target_transform=None,<br>                                                   download=True)<br>    dataloader = DataLoader(dataset=cifar10_dataset,  # ä¼ å…¥çš„æ•°æ®é›†, å¿…é¡»å‚æ•°<br>                            batch_size=32,  # è¾“å‡ºçš„batchå¤§å°<br>                            shuffle=True,  # æ•°æ®æ˜¯å¦æ‰“ä¹±<br>                            num_workers=4)  # è¿›ç¨‹æ•°, 0è¡¨ç¤ºåªæœ‰ä¸»è¿›ç¨‹<br>    model = MyCNN()<br>    # äº¤å‰ç†µæŸå¤±å‡½æ•°<br>    criterion = nn.CrossEntropyLoss()<br>    # å®šä¹‰ä¼˜åŒ–å™¨<br>    optimizer = torch.optim.SGD(model.parameters(), lr=1e-4, weight_decay=1e-2, momentum=0.9)<br>    # ä¸‹é¢å¼€å§‹è®­ç»ƒ<br>    start = time.time()  # è®°æ—¶å¼€å§‹<br>    for epoch in range(3):  # è®¾ç½®è¦åœ¨å…¨éƒ¨æ•°æ®ä¸Šè®­ç»ƒçš„æ¬¡æ•°<br><br>        for i, data in enumerate(dataloader):<br>            # dataå°±æ˜¯æˆ‘ä»¬è·å–çš„ä¸€ä¸ªbatch sizeå¤§å°çš„æ•°æ®<br><br>            inputs, labels = data<br>            optimizer.zero_grad()<br>            # è·å¾—æ¨¡å‹çš„è¾“å‡ºç»“æœï¼Œä¹Ÿå³æ˜¯å½“å‰æ¨¡å‹å­¦åˆ°çš„æ•ˆæœ<br>            outputs = model(inputs)<br>            # è·å¾—è¾“å‡ºç»“æœå’Œæ•°æ®çœŸæ­£ç±»åˆ«çš„æŸå¤±å‡½æ•°<br>            loss = criterion(outputs, labels)<br>            print(&#39;Epoch {}, Loss {}&#39;.format(epoch + 1, loss))<br>            loss.backward()<br>            optimizer.step()<br>            viz.line([loss.item()], [i], win=&#39;train_loss&#39;, update=&#39;append&#39;)<br>    end = time.time()  # è®¡æ—¶ç»“æŸ<br>    print(&#39;ä½¿ç”¨æ—¶é—´: {:.5f} s&#39;.format(end - start))<br>    torch.save(model, &#39;.&#47;MyCNN_model_23.pth&#39;)","like_count":0},{"had_liked":false,"id":345897,"user_name":"æ©™ç´«è‹±","can_delete":false,"product_type":"c1","uid":2978511,"ip_address":"","ucode":"E1CB7DDD0461C9","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/AhaSicobIfA85ZUYjOZ26AYHr4jejU9y6KwwXnytqWKMehiaWDOo6q6ejyuIs5UGpBial8zj9tTQWcrzDJjHvGTWg/132","comment_is_top":false,"comment_ctime":1652686275,"is_pvip":false,"replies":[{"id":"126280","content":"ä½ è¿™é—®é¢˜å¤ªæŠ½è±¡äº†^^ã€‚å¾ˆéš¾å¯»æ‰¾ç­”æ¡ˆå•Šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"2802608","ctime":1652862954,"ip_address":"","comment_id":345897,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1652686275","product_id":100093301,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œä¸ºä»€ä¹ˆæˆ‘åœ¨å¯åŠ¨tensorboardåï¼Œè¿è¡Œç¨‹åºä»¥åæŠ¥äº†å¦‚ä¸‹é”™è¯¯å‘¢ï¼Œæ˜¯ä»€ä¹ˆåŸå› é€ æˆçš„å‘¢ï¼Ÿ<br>[WinError 10061] ç”±äºç›®æ ‡è®¡ç®—æœºç§¯ææ‹’ç»ï¼Œæ— æ³•è¿æ¥ã€‚<br>on_close() takes 1 positional argument but 3 were given","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"æ–¹è¿œ","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572580,"discussion_content":"ä½ è¿™é—®é¢˜å¤ªæŠ½è±¡äº†^^ã€‚å¾ˆéš¾å¯»æ‰¾ç­”æ¡ˆå•Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652862954,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3040135,"avatar":"https://static001.geekbang.org/account/avatar/00/2e/63/87/d4579be2.jpg","nickname":"ç‘¾ç‘œå®","note":"","ucode":"1559620E18460A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578601,"discussion_content":"æˆ‘å’Œä½ çš„é—®é¢˜ä¸€æ ·ï¼Œè¯·é—®è§£å†³äº†å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656917670,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":345850,"user_name":"ä¹å‘µçš„hehe","can_delete":false,"product_type":"c1","uid":2952223,"ip_address":"","ucode":"E77E102206F038","user_header":"https://static001.geekbang.org/account/avatar/00/2d/0c/1f/fcc777e1.jpg","comment_is_top":false,"comment_ctime":1652631120,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652631120","product_id":100093301,"comment_content":"from visdom import Visdom<br>import numpy as np<br>import time<br><br># å°†çª—å£ç±»å®ä¾‹åŒ–<br>viz = Visdom()<br># åˆ›å»ºçª—å£å¹¶åˆå§‹åŒ–<br>viz.line([0.], [0], win=&#39;loss&#39;, opts=dict(title=&#39;loss&#39;))<br>viz.line([0.], [0], win=&#39;accuracy&#39;, opts=dict(title=&#39;accuracy&#39;))<br><br>for n_iter in range(100):<br>    # éšæœºè·å–losså€¼<br>    loss = 0.2 * np.random.randn() + 1<br>    accuracy = 0.2 * np.random.randn() + 1<br>    # æ›´æ–°çª—å£å›¾åƒ<br>    viz.line([loss], [n_iter], win=&#39;loss&#39;, update=&#39;append&#39;)<br>    viz.line([accuracy], [n_iter], win=&#39;accuracy&#39;, update=&#39;append&#39;)<br>    time.sleep(0.5)","like_count":0},{"had_liked":false,"id":345760,"user_name":"ä¹å‘µçš„hehe","can_delete":false,"product_type":"c1","uid":2952223,"ip_address":"","ucode":"E77E102206F038","user_header":"https://static001.geekbang.org/account/avatar/00/2d/0c/1f/fcc777e1.jpg","comment_is_top":false,"comment_ctime":1652580254,"is_pvip":false,"replies":[{"id":"126213","content":"ä½ å¥½ï¼Œæ„Ÿè°¢ä½ çš„ç•™è¨€ã€‚<br>å¯ä»¥å†çœ‹ä¸‹è¯¾ç¨‹çš„ã€å®‰è£…ã€‘éƒ¨åˆ†ï¼Œé¦–å…ˆéœ€è¦å®‰è£…ã€Tensorboardã€‘ï¼Œæ¥ä¸‹æ¥å®‰è£…ã€TensorboardXã€‘ã€‚<br>ä½ çš„ç¯å¢ƒé‡Œæœ‰ã€TensorboardXã€‘ï¼Œè¿˜ç¼ºå°‘ã€Tensorboardã€‘,å¯ä»¥ä½¿ç”¨pip install tensorboardå‘½ä»¤è¿›è¡Œå®‰è£…ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"2802608","ctime":1652666514,"ip_address":"","comment_id":345760,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1652580254","product_id":100093301,"comment_content":"è€å¸ˆï¼Œæˆ‘çš„ç¯å¢ƒé‡Œæœ‰tensorboardxï¼Œå¯æ˜¯ä¸ºä»€ä¹ˆæ— æ³•å¯¼å…¥å‘¢ï¼ŸæŠ¥é”™å¦‚ä¸‹ï¼š<br><br>ModuleNotFoundError                       Traceback (most recent call last)<br>Input In [7], in &lt;module&gt;<br>----&gt; 1 from torch.utils.tensorboard import SummaryWriter<br>      2 # PyTorch 1.8ä¹‹å‰çš„ç‰ˆæœ¬è¯·ä½¿ç”¨ï¼š<br>      3 # from tensorboardX import SummaryWriter<br>      4 import numpy as np<br><br>File D:\\Anaconda3\\envs\\PythonEnvironment1\\lib\\site-packages\\torch\\utils\\tensorboard\\__init__.py:1, in &lt;module&gt;<br>----&gt; 1 import tensorboard<br>      2 from setuptools import distutils<br>      4 LooseVersion = distutils.version.LooseVersion<br><br>ModuleNotFoundError: No module named &#39;tensorboard&#39;","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"æ–¹è¿œ","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572230,"discussion_content":"ä½ å¥½ï¼Œæ„Ÿè°¢ä½ çš„ç•™è¨€ã€‚\nå¯ä»¥å†çœ‹ä¸‹è¯¾ç¨‹çš„ã€å®‰è£…ã€‘éƒ¨åˆ†ï¼Œé¦–å…ˆéœ€è¦å®‰è£…ã€Tensorboardã€‘ï¼Œæ¥ä¸‹æ¥å®‰è£…ã€TensorboardXã€‘ã€‚\nä½ çš„ç¯å¢ƒé‡Œæœ‰ã€TensorboardXã€‘ï¼Œè¿˜ç¼ºå°‘ã€Tensorboardã€‘,å¯ä»¥ä½¿ç”¨pip install tensorboardå‘½ä»¤è¿›è¡Œå®‰è£…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652666514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":345191,"user_name":"å°æ—å­","can_delete":false,"product_type":"c1","uid":1145383,"ip_address":"","ucode":"058C95ECBFE422","user_header":"https://static001.geekbang.org/account/avatar/00/11/7a/27/77ca2bc2.jpg","comment_is_top":false,"comment_ctime":1652101024,"is_pvip":true,"replies":[{"id":"126082","content":"ä½ å¥½ï¼Œæ„Ÿè°¢ä½ çš„ç•™è¨€ã€‚<br>çœ‹å…·ä½“éœ€æ±‚äº†ï¼Œæˆ‘æ¯”è¾ƒå–œæ¬¢Tensorboardã€‚^^","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"2802608","ctime":1652250033,"ip_address":"","comment_id":345191,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1652101024","product_id":100093301,"comment_content":"è€å¸ˆæ¨èä½¿ç”¨å“ªç§å¯è§†åŒ–å·¥å…·äº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"æ–¹è¿œ","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571510,"discussion_content":"ä½ å¥½ï¼Œæ„Ÿè°¢ä½ çš„ç•™è¨€ã€‚\nçœ‹å…·ä½“éœ€æ±‚äº†ï¼Œæˆ‘æ¯”è¾ƒå–œæ¬¢Tensorboardã€‚^^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652250034,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}