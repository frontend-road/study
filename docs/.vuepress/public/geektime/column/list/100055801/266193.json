{"id":266193,"title":"02｜基本概念和基础命令：应对简单的编辑任务","content":"<p>你好，我是吴咏炜。</p><p>这一讲，我们会讨论 Vim 的基本概念和配置。先强调一下，请务必确保你在学习这一讲之前，已经通过 Vim 教程熟悉了 Vim 的基本用法。</p><h2>Vim 教程的内容概要</h2><p>上节课我给你留的作业，就是花时间学习一下 Vim 教程，下面我们就来检验一下。只有你自己先对照着教程操作了一遍，今天我再带着你过一遍里面的基本概念和配置，你才能查漏补缺，发现自己遇到的问题，明确自己需要多加练习的地方。</p><p>好，现在请查看下面的键盘图。简单说明一下，这张图上展示了一个键盘。图中的“•”表示，单个字母不是完整的命令，必须再有进一步的输入。比如，单个“g”没有意义，而“gg”表示跳转到文件开头。（对于命令后面明确跟一个动作的，如“c”，我们不使用“•”。）一个键最多有三排内容：最底下是直接按键的结果，中间是按下 Shift 的结果（变大写），上面偏右的小字是按下 Ctrl 的结果。我们还用了一些特殊符号来表示操作的位置，如果你已经了解了这些命令的功能，你也自然就明白它们的意义了。</p><p><img src=\"https://static001.geekbang.org/resource/image/76/a1/76910d1a16ed737c42078dd1255124a1.png?wh=1670*570\" alt=\"Fig2.1\" title=\"Vim 命令速查（教程版）\"></p><p>请检查一下有颜色的那些键，看看你是否有任何不熟悉的地方。如果看下来有让你感到陌生的内容，请复习 Vim 教程。</p><p>这张图里没有写出 Vim 的命令行命令。你现在应该已经掌握了以下这些：</p><!-- [[[read_end]]] --><ul>\n<li>“:q!”：退出 Vim</li>\n<li>“:wq”：存盘退出</li>\n<li>“:s”：执行替换</li>\n<li>“:!”：执行外部命令</li>\n<li>“:edit”（一般缩写为 “:e”）：编辑文件</li>\n<li>“:w”：写文件</li>\n<li>“:r”：读文件</li>\n<li>“:help”：查看帮助</li>\n<li>使用键 Ctrl-D 和 Tab 来进行命令行补全</li>\n</ul><p>同样，如果你发现上面列举的命令有你不熟悉的，也请重新打开 Vim 教程复习一下——这些属于 Vim 的最基本功能，一定要能熟练运用才行。</p><h2>Vim 的模式</h2><p>接下来我们进入本讲的正题，讲述 Vim 的四种主要模式、键描述的体例和 Vim 需要的基本配置选项。掌握了这些内容之后，我们就能应对基本的编辑任务了。下面我们一一来看。</p><p>Vim 最特别的地方就是它的模式了。与其他大部分编辑器不同，进入 Vim 后，缺省状态下键入的字符并不会插入到所编辑的文件之中。 Vim 的模式（mode，可以简单地理解为“状态”）是它的麻烦所在，但同时也是它的威力所在。</p><p>我们需要知道，Vim 有以下四种主要模式:</p><ul>\n<li>正常（normal）模式（也称为普通模式），缺省的编辑模式；如果不加特殊说明，一般提到的命令都直接在正常模式下输入；在任何其他模式中，都可以通过键盘上的 Esc 键回到正常模式。</li>\n<li>插入（insert）模式，输入文本时使用；比如在正常模式下键入 i（insert）或 a（append）即可进入插入模式。</li>\n<li>可视（visual）模式，用于选定文本块；教程中已经提到可以用键 v（小写）来按字符选定，Vim 里也提供其他不同的选定方法，包括按行和按列块。</li>\n<li>命令行（command-line）模式，用于执行较长、较复杂的命令；在正常模式下键入冒号（:）即可进入该模式；使用斜杠（/）和问号（?）开始搜索也算作命令行模式。命令行模式下的命令要输入回车键（Enter）才算完成。</li>\n</ul><p>此外，Vim 也有个选择（select）模式，与普通的 Windows 编辑器行为较为接近，选择内容后再输入任何内容，将会替换选择的内容。在以可视模式和选择模式之一选定文本块之后，可以使用 Ctrl-G 切换到另一模式。这个模式主要是为了模拟 Windows 编辑器的行为，并不是 Vim 的主要用法，使用它反而会给 Vim 里的自动化带来麻烦，所以我们也就不多作介绍了。</p><p>关于 Vim 的模式，我们重点掌握正常模式就可以了，刚刚也说过，Vim 里的大部分操作会在正常模式下完成。如果你做编辑工作时有超过几秒的停顿，就应当考虑按下 Esc 键，回到正常模式。记住，正常模式就是正常情况下你应当处于的模式。😄</p><h2>Vim 的键描述体例</h2><p>清楚了 Vim 模式之后，我们来对 Vim 里的按键作一下清晰的体例描述，毕竟，Vim 里的键真的有点多。</p><p>从现在开始，我会使用 Vim 里的标准键描述方式来讲解。根据 Vim 的一般习惯，我们使用尖括号来描述特殊的输入序列。下面我会提供一个列表，给出常用键的表示方式及在动图中的显示方式。这部分内容不需要记住，你用的时候作为参考就行。</p><ul>\n<li><code>&lt;Esc&gt;</code> 表示 Esc 键；显示为“⎋”</li>\n<li><code>&lt;CR&gt;</code> 表示回车键；显示为“↩”</li>\n<li><code>&lt;Space&gt;</code> 表示空格键；显示为“␣”</li>\n<li><code>&lt;Tab&gt;</code> 表示 Tab 键；显示为“⇥”</li>\n<li><code>&lt;BS&gt;</code> 表示退格键；显示为“⌫”</li>\n<li><code>&lt;Del&gt;</code> 表示删除键；显示为“⌦”</li>\n<li><code>&lt;lt&gt;</code> 表示 &lt; 键；显示为“&lt;”</li>\n<li><code>&lt;Up&gt;</code> 表示光标上移键；显示为“⇡”</li>\n<li><code>&lt;Down&gt;</code> 表示光标下移键；显示为“⇣”</li>\n<li><code>&lt;Left&gt;</code> 表示光标左移键；显示为“⇠”</li>\n<li><code>&lt;Right&gt;</code> 表示光标右移键；显示为“⇢”</li>\n<li><code>&lt;PageUp&gt;</code> 表示 Page Up 键；显示为“⇞”</li>\n<li><code>&lt;PageDown&gt;</code> 表示 Page Down 键；显示为“⇟”</li>\n<li><code>&lt;Home&gt;</code> 表示 Home 键；显示为“↖”</li>\n<li><code>&lt;End&gt;</code> 表示 End 键；显示为“↘”</li>\n<li><code>&lt;F1&gt;</code> - <code>&lt;F12&gt;</code> 表示功能键 1 到 12；显示为“F1”到“F12”</li>\n<li><code>&lt;S-…&gt;</code> Shift 组合键；显示为“⇧”（较少使用，因为我们需要写 <code>!</code> 而不是 <code>&lt;S-1&gt;</code>；和特殊键组合时仍然有用）</li>\n<li><code>&lt;C-…&gt;</code> Control 组合键；显示为“⌃”</li>\n<li><code>&lt;M-…&gt;</code> Alt 组合键；显示为“⌥”（对于大部分用户，它的原始键名 Meta 应该只具有历史意义）</li>\n<li><code>&lt;D-…&gt;</code> Command 组合键；显示为“⌘”（Mac 键盘）</li>\n</ul><p>现在回到前面的模式部分，我们提到的 Esc、Enter、v、V 和 Ctrl-V，按我们现在的描述惯例，以后就会写成 <code>&lt;Esc&gt;</code>、<code>&lt;CR&gt;</code>、<code>v</code>、<code>V</code> 和 <code>&lt;C-V&gt;</code>。这也是以后在 Vim 里对键进行重映射的写法——如果你还不了解重映射是什么也没关系，我们很快就会讨论到。</p><p>这里我要强调一下，对“<code>&lt;</code>”的特殊解释仅在描述输入时生效。在描述命令行和代码时，我们写“<code>&lt;CR&gt;</code>”仍表示四个字符，而非回车键。特别是，如果我们描述的命令行首是“:”，表示这是一个输入 <code>:</code> 开始的 Vim 命令行模式命令（以回车键结束）；如果行首是“/”或“?”，表示这是一个输入 <code>/</code> 或 <code>?</code> 开始的搜索命令（以回车键结束）；如果行首是“<code>$</code>”，表示这是一个在 shell 命令行上输入的命令（以回车键结束），“<code>$</code>”（和后面的空格）不是命令的一部分，通常后续行也不是命令的一部分，除非行尾有“\\”或“^”字符，或行首有“<code>$</code>”字符。</p><p>也就是说，下面的命令是在 Vim 里输入“<code>:set ft?&lt;CR&gt;</code>”（用来显示当前编辑文件的文件类型）：</p><pre><code class=\"language-vim\">:set ft?\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/41/81/411b4byyfbd7717f2b52246ccyy5b481.gif?wh=728*457\" alt=\"Fig2.2\" title=\"Vim 命令示例\"></p><p>下面的命令则是在 shell 里输入“<code>which vim&lt;CR&gt;</code>”（用来检查 <code>vim</code> 命令的位置）：</p><pre><code class=\"language-text\">$ which vim\n/usr/bin/vim\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/80/f3/80c1875197457b86f94f1216e334dcf3.gif?wh=728*208\" alt=\"Fig2.3\" title=\"Shell 命令示例\"></p><p>此外，当我用“<a href=\"https://yianwillis.github.io/vimcdoc/doc/help.html\"><code>:help</code></a>”描述帮助命令时，你不仅可以在 Vim 里输入这个命令来得到帮助，也可以点击这个帮助的链接，直接在线查看相应的中文帮助页面。</p><p><img src=\"https://static001.geekbang.org/resource/image/f5/cc/f58469ab7dbf281bb72896a7a7d8e0cc.jpeg?wh=1142*700\" alt=\"Fig2.4\" title=\"Vim 的内置帮助功能\"></p><p>这节内容不需要死记。建议使用“收藏”功能，这样，你可以在以后碰到不认识的符号标记的时候，返回来查看这一节的内容。</p><h2>Vim 的选项和配置</h2><p>了解了 Vim 模式和键描述，我们对 Vim 的认识又多了一些，第一步的学习成就达成。要想更好地使用 Vim，下一个关键点就是配置了，接下来我就带你看看 Vim 配置都有哪些需要注意的点。</p><p>作为一个可以越用越顺手的应用程序，Vim 是需要配置的。我们才刚开始学习，所以目前我们的配置文件是相当简单的，但随着课程的进展和你使用 Vim 越来越多，你的 Vim 配置文件必然会越变越复杂。我们今天就先来做一些初步的讨论，看看能实际使用的一个最基本 Vim 配置文件是什么样子。</p><p>我们上节课已经讨论过，根据 Unix 下的惯例，Vim 的配置文件放在用户的主目录下，文件名通常是 .vimrc；而它在 Windows 下名字是 _vimrc。我们前面给出最基本的配置文件是这个样子的：</p><pre><code class=\"language-vim\">set enc=utf-8\nset nocompatible\nsource $VIMRUNTIME/vimrc_example.vim\n</code></pre><p>如果你熟悉 shell 语法，你肯定能看到不少熟悉的影子在里面。这三行完成了下列功能：</p><ul>\n<li>设置编辑文件的内码是 UTF-8（非所有平台缺省，但为编辑多语言文件所必需）</li>\n<li>设置 Vim 不需要和 vi 兼容（仅为万一起见，目前大部分情况下这是缺省情况）</li>\n<li>导入 Vim 的示例配置（这会打开一些有用的选项，如语法加亮、搜索加亮、命令历史、记住上次的文件位置，等等）</li>\n</ul><p>对于现代 Unix 系统上的 Vim 8，实际上只需要最后一句就足够了。对于现代 Windows 系统上的 Vim 8，中间的这句 <code>set nocompatible</code> 也可以删除。如果你在较老的 Vim 版本上进行配置，那么把这三行全放进去会比较安全。</p><p>接下来，我会讲一些基本的配置项，保证你的日常工作流顺畅。它们是：备份和跨会话撤销、鼠标支持、中文支持及图形界面的字体支持。除了字体支持主要牵涉到美观性，其他三项都是对编辑至关重要的基本功能。我们一一来看。</p><h3>备份和撤销文件</h3><p>上面的基本设置会产生一个有人喜欢、但也有很多人感到困惑的结果：你修改文件时会出现结尾为“~”的文件，有文件名后面直接加“~”的，还有前面加“.”后面加“.un~”的。这是因为在示例配置里，Vim 自动设置了下面两个选项：</p><pre><code class=\"language-vim\">set backup\nset undofile\n</code></pre><p>前一个选项使得我们每次编辑会保留上一次的备份文件，后一个选项使得 Vim 在重新打开一个文件时，仍然能够撤销之前的编辑（undo），这就会产生一个保留编辑历史的“撤销文件”（undofile）了。</p><p><img src=\"https://static001.geekbang.org/resource/image/a2/5e/a2ae45ebdf188cfbe11e9dfd0fb1245e.gif?wh=734*458\" alt=\"Fig2.5\" title=\"有撤销文件时，再次打开文件时仍然可以撤销上次的编辑\"></p><p>我的通常做法是，不产生备份文件，但保留跨会话撤销编辑的能力；因为有了撤销文件，备份其实也就没有必要了。同时，把撤销文件放在用户个人的特定目录下，既保证了安全，又免去了其他目录下出现不必要文件的麻烦。</p><p>要达到这个目的，我在 Linux/macOS 下会这么写：</p><pre><code class=\"language-vim\">set nobackup\nset undodir=~/.vim/undodir\n</code></pre><p>在 Windows 下这么写：</p><pre><code class=\"language-vim\">set nobackup\nset undodir=~\\vimfiles\\undodir\n</code></pre><p>无论哪种环境，你都需要创建这个目录。我们可以用下面的命令来让 Vim 在启动时自动创建这个目录：</p><pre><code class=\"language-vim\">if !isdirectory(&amp;undodir)\n  call mkdir(&amp;undodir, 'p', 0700)\nendif\n</code></pre><p>如果我告诉你， <code>&amp;undodir</code> 代表 <code>undodir</code> 这个选项的值，那么其他代码的基本作用，相信你也一定能看出来了吧？我们暂时就不做进一步分析了。如果你好奇的话，可以提前看一下下面各项的 Vim 帮助文档：</p><ul>\n<li><a href=\"https://yianwillis.github.io/vimcdoc/doc/eval.html#isdirectory%28%29\"><code>:help isdirectory()</code></a></li>\n<li><a href=\"https://yianwillis.github.io/vimcdoc/doc/eval.html#mkdir%28%29\"><code>:help mkdir()</code></a></li>\n<li><a href=\"https://yianwillis.github.io/vimcdoc/doc/eval.html#:call\"><code>:help :call</code></a></li>\n</ul><p>这个跨会话撤销的能力，我还真不知道其他哪个编辑器也有。更妙的是，Vim 还有撤销树的概念，可以帮助你回到任一历史状态。这个我们以后会和相关的插件一起讨论。</p><h3>鼠标支持</h3><p>我不知道你会不会像某些资深 Vim 用户一样，只用键盘不用鼠标。我反正是做不到的，也没有动力去那样做——毕竟，浪费计算机界一项伟大的发明并不那么有必要😂。手一直在键盘上的本位排（home row）打字当然会更快，但一个程序员看代码的时间比写代码的时间要多得多，而在非线性的跳转任务上，鼠标比键盘更加快，也更加有效。</p><p>在 Vim 的终端使用场景下，鼠标的选择有一定的歧义：你希望是使用 Vim 的可视模式选择内容，并且只能在 Vim 里使用呢，还是产生 Vim 外的操作系统的文本选择，用于跟其他应用程序的交互呢？这是一个基本的使用问题，两种情况都可能发生，都需要照顾。</p><p>如果你使用 xterm 兼容终端的话，通常的建议是：</p><ul>\n<li>在不按下修饰键时，鼠标选择产生 Vim 内部的可视选择。</li>\n<li>在按下 Shift 时，鼠标选择产生操作系统的文本选择。</li>\n</ul><p>对于不兼容 xterm、不支持对 Shift 键做这样特殊处理的终端，我们一般会采用一种“绕过”方式，让 Vim 在某种情况下暂时不接管鼠标事件。通常的选择是在命令行模式下不使用鼠标。下面，我们就分这两种情况来配置。</p><p>虽然最新的 Vim 缺省配置文件（示例配置文件会包含缺省配置），在大部分情况下已经可以自动设置合适的鼠标选项了，不过为照顾我们课程的三种不同平台，我们还是手工设置一下：</p><pre><code class=\"language-vim\">if has('mouse')\n  if has('gui_running') || (&amp;term =~ 'xterm' &amp;&amp; !has('mac'))\n    set mouse=a\n  else\n    set mouse=nvi\n  endif\nendif\n</code></pre><p>上面代码说的是，如果 Vim 有鼠标支持的话，那在以下任一条件满足时：</p><ul>\n<li>图形界面正在运行</li>\n<li>终端是 xterm 兼容，并且不是 Mac（Mac 上的终端声称自己是 xterm，但行为并不完全相同）</li>\n</ul><p>我们将启用完全的鼠标支持（mouse=a）。特别是，此时鼠标拖拽就会在 Vim 里使用可视模式选择内容（只能在 Vim 里使用）。而当用户按下 Shift 键时，窗口系统接管鼠标事件，用户可以使用鼠标复制 Vim 窗口里的内容供其他应用程序使用。</p><p>否则（非图形界面的的终端，且终端类型不是 xterm），就只在正常模式（n）、可视模式（v）、插入模式（i）中使用鼠标。这意味着，当用户按下 <code>:</code> 键进入命令行模式时，Vim 将不对鼠标进行响应，这时，用户就可以使用鼠标复制 Vim 窗口里的内容到其他应用程序里去了。</p><p><img src=\"https://static001.geekbang.org/resource/image/e6/df/e6d582405e3c7e4cbf26f3821yy242df.gif?wh=982*678\" alt=\"Fig2.6\" title=\"可视模式的选取和按“:”后的选取\"></p><p>非 xterm 的鼠标支持在 macOS 和 Windows 下都有效。但在 Windows 下需要注意的一点是，如果使用非图形界面的 Vim 的话，应当在命令提示符（Command Prompt）的属性里关闭“快速编辑模式”（QuickEdit Mode），否则 Vim 在运行时将无法对鼠标事件进行响应。</p><p>鉴于命令提示符的行为有很多怪异和不一致之处，强烈建议你在 Windows 下，要么使用图形界面的 Vim，要么使用 Cygwin/MSYS2 里、运行在 mintty 下的 Vim。</p><h3>中文支持</h3><p>接下来我和你讲讲中文支持的问题。如果你一直在 UTF-8 下使用中文的话，那这一小节的内容可以跳过。对于大部分在 Unix 下工作的人员，应该是这样的情况。而如果你在 Windows 上工作，或者有需要跟别人交换 GB2312、GBK、GB18030 编码的文本文件，那这部分的内容还是需要看一下的。</p><p>完整的 Unicode 历史和原理可以讲上整整一讲，但从实用的角度，我们就简化成下面几条吧：</p><ul>\n<li>整个世界基本上在向 UTF-8 编码靠拢。</li>\n<li>微软由于历史原因，内部使用 UTF-16；UTF-16 可以跟 UTF-8 无损转换。</li>\n<li>GB2312、GBK、GB18030 是一系列向后兼容的中文标准编码方式，GB2312 编码的文件是合法的 GBK 文件，GBK 编码的文件是合法的 GB18030 文件。但除了 GB18030，都不能做到跟 UTF-8 无损转换；目前非 UTF-8 的简体中文文本基本上都用 GBK/GB18030 编码（繁体中文文本则以 Big5 居多）。鉴于 GB18030 是国家标准，其他两种编码也和 GB18030 兼容，我们就重点讲如何在 Vim 中支持 GB18030 了。</li>\n</ul><p>举一个具体的例子，“你好😄”这个字符串，在 UTF-8 编码下是下面 10 个字节（我按字符进行了分组）：</p><p><code>e4bda0 e5a5bd f09f9884</code></p><p>如果使用 GB18030 编码（GB2312/GBK 不能支持表情字符）的话，会编码成 8 个字节：</p><p><code>c4e3 bac3 9439fd30</code></p><p>这么看起来，GB18030 处理中文在存储效率上是优势的。但它也有缺点：</p><ul>\n<li>GBK 外的 Unicode 字符一般需要四字节编码（非中文情况会劣化）</li>\n<li>GBK 外的 Unicode 字符跟 Unicode 码点需要查表才能转换（UTF-8 则可以用非常简单的条件判断、移位、与、或操作来转换）</li>\n<li>一旦出现文件中有单字节发生损毁，后续的所有中文字符都可能发生紊乱（而 UTF-8 可以在一个字符之后恢复）</li>\n</ul><p>因此，GB18030 在国际化的软件中不会作为内码来使用，只会是读取/写入文件时使用的转换编码。我们要让 Vim 支持 GB18030 也同样是如此。由于 UTF-8 编码是有明显规律的，并非任意文件都能成功地当成 UTF-8 来解码，我们一般使用的解码顺序是：</p><ul>\n<li>首先，检查文件是不是有 Unicode 的 BOM（字节顺序标记）字符，有的话按照 BOM 字符来转换文件内容。</li>\n<li>其次，检查文件能不能当作 UTF-8 来解码；如果可以，就当作 UTF-8 来解释。</li>\n<li>否则，尝试用 GB18030 来解码；如果能成功，就当作 GB18030 来转换文件内容。</li>\n<li>最后，如果上面的解码都不成功，就按 Latin1 字符集来解码；由于这是单字节的编码，转换必定成功。</li>\n</ul><p>事实上，Vim 缺省差不多就是按这样的顺序，但第三步使用何种编码跟系统配置有关。如果你明确需要处理中文，那在配置文件里最好明确写下下面的选项设定：</p><pre><code class=\"language-vim\">set fileencodings=ucs-bom,utf-8,gb18030,latin1\n</code></pre><h3>图形界面的字体配置</h3><p>图形界面的 Vim 可以自行配置使用的字体，但在大部分环境里，这只是起到美化作用，而非必需项。不过，对于高分辨率屏幕的 Windows，这是一个必需项：Vim 在 Windows 下缺省使用的不是 TrueType 字体，不进行配置的话，字体会小得没法看。</p><p><img src=\"https://static001.geekbang.org/resource/image/0a/98/0a8f9854d5d4ca317b10e9b1753f3c98.png?wh=1238*529\" alt=\"Fig2.7\" title=\"高分辨率屏下的 Windows 图形界面 Vim\"></p><p>在 Windows 的缺省字体里，一般而言，Consolas 和 Courier New 还比较合适。以 Courier New 为例，在 _vimrc 里可以这样配置（Windows 上的基本写法是字体名称加冒号、“h”加字号；用“_”取代空格，否则空格需要用“\\”转义）：</p><pre><code class=\"language-vim\">if has('gui_running')\n  set guifont=Courier_New:h10\nendif\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/b9/82/b9c3a28656a45260a94b4099eab96282.png?wh=1238*954\" alt=\"Fig2.8\" title=\"设置了 10 磅 Consolas 字体的 Vim\"></p><p>字体名称如何写是件平台相关的事（可参见帮助文档“<a href=\"https://yianwillis.github.io/vimcdoc/doc/gui.html#gui-font\"><code>:help gui-font</code></a>”）。如果你不确定怎么写出你需要的字体配置，或者你怎么写都写不对的话，可以先使用图形界面的菜单来选择（通常是“编辑 &gt; 选择字体”；在 MacVim 里是“Edit &gt; Font &gt; Show Fonts”），然后使用命令“<code>:set guifont?</code>”来查看。</p><p>注意，Vim 在设置选项时，空格需要用“\\”进行转义。比如，如果我们要在 Ubuntu 下把字体设成 10 磅的 DejaVu Sans Mono，就需要写：</p><pre><code class=\"language-vim\">  \" Linux 和 Windows 不同，不能用 '_' 取代空格\n  set guifont=DejaVu\\ Sans\\ Mono\\ 10\n</code></pre><p>此外，宽字符字体（对我们来讲，就是中文字体了）是可以单独配置的。这可能就更是一件仁者见仁、智者见智的事了。对于纯中文的操作系统，这一般反而是不需要配置的；但如果你的语言设定里，中文不是第一选择的话，就有可能在显示中文时出现操作系统误用日文字体的情况。这时你会想要手工选择一个中文字体，比如在 Ubuntu 下，可以用：</p><pre><code class=\"language-vim\">  set guifontwide=Noto\\ Sans\\ Mono\\ CJK\\ SC\\ 11\n</code></pre><p>注意，在不同的中英文字体搭配时，并不需要字号相同。事实上，在 Windows 和 Linux 上我通常都是使用不同字号的中英文字体的。</p><p><img src=\"https://static001.geekbang.org/resource/image/07/b5/0794053ac4fa28bf9595bfee8a202cb5.gif?wh=660*472\" alt=\"Fig2.9\" title=\"Ubuntu 下的 gvim 设置中文字体\"></p><p>在上面的动图中，你可以观察到设了中文字体之后，不仅中文字变大，更美观了，“将”、“适”、“关”、“复”、“启”等字的字形也同时发生了变化。</p><p>由于字体在各平台上差异较大，字体配置我就不写到 Vim 的参考配置中去了，只把如何选择和配置的方法写出来供你参考。</p><h2>内容小结</h2><p>好了，这一讲我就讲到这里，我们来做个内容小结。</p><p>今天我给出了一张键盘图，带你复习了 Vim 教程的内容，这里我要再强调一遍，这部分的内容如果你还有不熟悉的，一定要再去学习一下 Vim 教程，这段时间我们一定要多花点时间和精力来练习，把这一步跨过去。</p><p>掌握了 Vim 教程里的基础信息还远远不够，我们还得了解 Vim 的四种主要模式，你只要记住最重要的就是正常模式就可以了。</p><p>最后我带你学习了 Vim 的几个基本配置选项，包括对撤销、鼠标、中文和字体的支持，来满足最基本的编辑需要。最终的 Vim 配置文件可以在 GitHub 上找到：</p><p><a href=\"https://github.com/adah1972/geek_time_vim\">https://github.com/adah1972/geek_time_vim</a></p><p>关于这个配置文件，我这里做个备注说明：主（master）分支可以用在类 Unix 平台上，windows 分支则用在 Windows 上。适用于今天这一讲的内容标签是 <code>l2-unix</code> 和 <code>l2-windows</code>：你可以用 <code>git checkout l2-unix</code> 或 <code>git checkout l2-windows</code> 来得到相应平台对应本讲的配置文件。</p><p>好了，掌握了今天的内容，你就可以用 Vim 做最基本的编辑了。</p><h2>课后练习</h2><p>请使用本讲的配置文件，并尝试以下操作：</p><ul>\n<li>退出 Vim 然后重新打开文件，仍然可以撤销上次的编辑。</li>\n<li>使用终端的 Vim，在终端里用鼠标复制 Vim 里的文本到另外一个文本编辑器中（仅 Unix 下，可选）。</li>\n<li>在 Vim 中使用“<code>:help</code>”命令（大部分环境下也可以使用 <code>&lt;F1&gt;</code> 功能键），尝试查看命令说明，以及使用键盘和鼠标在帮助主题中跳转。</li>\n</ul><p>如果遇到任何问题，欢迎留言和我讨论。我们下一讲见。</p>","neighbors":{"left":{"article_title":"01｜各平台下的 Vim 安装方法：上路前准备好你的宝马","id":262520},"right":{"article_title":"03｜更多常用命令：应对稍复杂的编辑任务","id":266754}},"comments":[{"had_liked":false,"id":237325,"user_name":"我来也","can_delete":false,"product_type":"c1","uid":1205253,"ip_address":"","ucode":"773D6104F56767","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","comment_is_top":false,"comment_ctime":1595780463,"is_pvip":false,"replies":[{"id":"87672","content":"这也是一种用法。跟我的不太一样。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1595809750,"ip_address":"","comment_id":237325,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18775649647","product_id":100055801,"comment_content":"话说一个undo插件是真的厉害，像git一样保存着历史的修改记录，可以随时撤回到指定状态。<br><br>说实话，在使用vim的内置功能时，我极少数会用到鼠标。<br>虽然我设置了一个快捷键，在set mouse=a和n间切换。<br>但除了调整分割窗口的大小时，平常几乎不会用鼠标了。<br><br>平常在vim中使用鼠标最多的场景是：在编辑状态，想插入屏屏幕上其他某个内容时，会借助iTerm2的选取即复制功能，然后按下Cmd+v来粘贴。<br><br>开启鼠标模式下，点击内容，光标会切换到指定地方。<br>但在vim中，有两个方法可以快速的跳转和选取内容。<br>1.使用插件，easymotion。<br>2.使用书签和ctrl-i&#47;o。<br>使用书签可以快速的选中大段的范围。类似鼠标框选的效果。","like_count":4,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502374,"discussion_content":"这也是一种用法。跟我的不太一样。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595809750,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1205253,"avatar":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","nickname":"我来也","note":"","ucode":"773D6104F56767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295098,"discussion_content":"undo插件我用的是这个:\nhttps://github.com/sjl/gundo.vim","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596089102,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286477,"user_name":"愚者","can_delete":false,"product_type":"c1","uid":2435071,"ip_address":"","ucode":"6B1B759E40D948","user_header":"https://static001.geekbang.org/account/avatar/00/25/27/ff/996d942f.jpg","comment_is_top":false,"comment_ctime":1617334731,"is_pvip":false,"replies":[{"id":"104069","content":"你可以手工创建这个目录吗？在终端里使用 “mkdir -p ~&#47;.vim&#47;undodir”。<br><br>脚本创建不行，命令行上估计也玄，但总要试一下。确定不行的话，重点检查 .vim 目录的权限，用 “ls -ld ~&#47;.vim” 看这个目录的所有者和权限，及下面 undodir 的权限。检查当前用户是不是目录的所有者。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1617359859,"ip_address":"","comment_id":286477,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5912302027","product_id":100055801,"comment_content":"我是在 mac 下的，不知道为什么会出现这个问题？<br><br>Error detected while processing &#47;Users&#47;simon&#47;.vimrc:<br>line   14:<br>E739: Cannot create directory: &#47;Users&#47;simon&#47;.vim&#47;undodir<br>Press ENTER or type command to continue<br><br>我的.vimrc 配置如下：<br>set enc=utf-8<br>set nocompatible<br>source $VIMRUNTIME&#47;vimrc_example.vim<br><br>set nobackup<br>set undofile<br>set undodir=~&#47;.vim&#47;undodir<br>  if !isdirectory(&amp;undodir)<br>  call mkdir(&amp;undodir, &#39;p&#39;, 0700)<br>endif","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518000,"discussion_content":"你可以手工创建这个目录吗？在终端里使用 “mkdir -p ~/.vim/undodir”。\n\n脚本创建不行，命令行上估计也玄，但总要试一下。确定不行的话，重点检查 .vim 目录的权限，用 “ls -ld ~/.vim” 看这个目录的所有者和权限，及下面 undodir 的权限。检查当前用户是不是目录的所有者。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617359859,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":267005,"user_name":"Ethan","can_delete":false,"product_type":"c1","uid":1658014,"ip_address":"","ucode":"BAAA75EE713CA6","user_header":"https://static001.geekbang.org/account/avatar/00/19/4c/9e/908c04fe.jpg","comment_is_top":false,"comment_ctime":1607568231,"is_pvip":false,"replies":[{"id":"96946","content":"有问题，顺序问题。我的顺序是这样的：<br><br>  set undofile<br>  set undodir=~&#47;.vim&#47;undodir<br>  if !isdirectory(&amp;undodir)<br>    call mkdir(&amp;undodir, &#39;p&#39;, 0700)<br>  endif<br><br>你在设 undodir 选项前去读取它的数值（&amp;undodir）……读出来当然就是空的了。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1607608010,"ip_address":"","comment_id":267005,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5902535527","product_id":100055801,"comment_content":"老师，我的系统信息是这样的：<br>$ cat &#47;etc&#47;lsb-release <br>DISTRIB_ID=Ubuntu<br>DISTRIB_RELEASE=18.04<br>DISTRIB_CODENAME=bionic<br>DISTRIB_DESCRIPTION=&quot;Ubuntu 18.04.5 LTS&quot;<br><br>vim的信息从下面2个命令获得<br>$apt list --installed | grep vim<br><br>WARNING: apt does not have a stable CLI interface. Use with caution in scripts.<br><br>vim&#47;bionic-security,bionic-updates,now 2:8.0.1453-1ubuntu1.4 amd64 [installed]<br>vim-common&#47;bionic-security,bionic-security,bionic-updates,bionic-updates,now 2:8.0.1453-1ubuntu1.4 all [installed,automatic]<br>vim-gnome&#47;bionic-security,bionic-security,bionic-updates,bionic-updates,now 2:8.0.1453-1ubuntu1.4 all [installed]<br>vim-gtk3&#47;bionic-security,bionic-updates,now 2:8.0.1453-1ubuntu1.4 amd64 [installed,automatic]<br>vim-gui-common&#47;bionic-security,bionic-security,bionic-updates,bionic-updates,now 2:8.0.1453-1ubuntu1.4 all [installed,automatic]<br>vim-runtime&#47;bionic-security,bionic-security,bionic-updates,bionic-updates,now 2:8.0.1453-1ubuntu1.4 all [installed,automatic]<br>vim-tiny&#47;bionic-security,bionic-updates,now 2:8.0.1453-1ubuntu1.4 amd64 [installed,automatic]<br><br><br>$vim --version<br>VIM - Vi IMproved 8.0 (2016 Sep 12, compiled Oct 13 2020 15:49:09)<br>Included patches: 1-1453<br>Modified by pkg-vim-maintainers@lists.alioth.debian.org<br>Compiled by pkg-vim-maintainers@lists.alioth.debian.org<br>Huge version with GTK3 GUI.  Features included (+) or not (-):<br><br>在.vimrc文件中添加如下内容<br>set enc=utf-8<br>set nocompatible<br>source $VIMRUNTIME&#47;vimrc_example.vim<br><br>echo exists(&#39;*mkdir&#39;)<br>if !isdirectory(&amp;undodir)<br>\tcall mkdir(&amp;undodir, &#39;p&#39;,0700)<br>endif<br><br>set nobackup<br>set undofile<br>set undodir=~&#47;.vim&#47;undodir<br><br>现在的情况是，自己手动建立undodir文件夹的话，能跨文件撤销。如果把undodir删除，就不会自动建立这个文件夹。<br>在.vimrc文件中加入echo exists(&#39;*mkdir&#39;) 这句语句后，打开vim会输出一个1.<br>是我的配置哪里有问题吗？<br>","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511479,"discussion_content":"有问题，顺序问题。我的顺序是这样的：\n\n  set undofile\n  set undodir=~/.vim/undodir\n  if !isdirectory(&amp;amp;undodir)\n    call mkdir(&amp;amp;undodir, &amp;#39;p&amp;#39;, 0700)\n  endif\n\n你在设 undodir 选项前去读取它的数值（&amp;amp;undodir）……读出来当然就是空的了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607608010,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":248980,"user_name":"rocedu","can_delete":false,"product_type":"c1","uid":1013097,"ip_address":"","ucode":"E46E29CBBB94A9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/69/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1600394053,"is_pvip":true,"replies":[{"id":"91396","content":"我用的是 GIF Brewery。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1600424469,"ip_address":"","comment_id":248980,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5895361349","product_id":100055801,"comment_content":"Gif怎么做的？","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505791,"discussion_content":"我用的是 GIF Brewery。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600424469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1012816,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/74/50/59d429c9.jpg","nickname":"MiracleWong","note":"","ucode":"05233774710AFE","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370452,"discussion_content":"Gif Brewery 必须好评","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619419545,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":239056,"user_name":"Gin","can_delete":false,"product_type":"c1","uid":1024844,"ip_address":"","ucode":"4BE570597DB661","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a3/4c/192de155.jpg","comment_is_top":false,"comment_ctime":1596423863,"is_pvip":false,"replies":[{"id":"88335","content":"用了我的参考配置吗？默认是不打开的，但我的配置会间接打开，文中有说明。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1596451809,"ip_address":"","comment_id":239056,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5891391159","product_id":100055801,"comment_content":"在mac上用brew安装的命令行vim。不会自动生成undofile，所以设置了undodir之后还需要set undofile打开自动生成undofile。","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502959,"discussion_content":"用了我的参考配置吗？默认是不打开的，但我的配置会间接打开，文中有说明。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596451809,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":237535,"user_name":"一步","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1595857478,"is_pvip":true,"replies":[{"id":"87776","content":"不是让你自己打开的。Vim 会自动用这个文件来做 undo （&lt;u&gt;）和 Redo（&lt;C-r&gt;）。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1595898032,"ip_address":"","comment_id":237535,"utype":1}],"discussion_count":6,"race_medal":0,"score":"5890824774","product_id":100055801,"comment_content":"生成的 undofile 怎么使用的？ 我用 vim打开这个文件 是乱码的 ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502446,"discussion_content":"不是让你自己打开的。Vim 会自动用这个文件来做 undo （&amp;lt;u&amp;gt;）和 Redo（&amp;lt;C-r&amp;gt;）。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595898032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1205253,"avatar":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","nickname":"我来也","note":"","ucode":"773D6104F56767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294391,"discussion_content":"这个插件可以了解一下\nhttps://github.com/mbbill/undotree","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595863986,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1205253,"avatar":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","nickname":"我来也","note":"","ucode":"773D6104F56767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294372,"discussion_content":"一般不需要特意关注这个文件吧。只需要按u可以持续的撤销就行。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595861677,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"一步","note":"","ucode":"73CEA468CE70C3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1205253,"avatar":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","nickname":"我来也","note":"","ucode":"773D6104F56767","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294380,"discussion_content":"那没有设置这个配置的时候(没有生成undofile)，也是可以使用u连续撤销的啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595863218,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":294372,"ip_address":""},"score":294380,"extra":""},{"author":{"id":1205253,"avatar":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","nickname":"我来也","note":"","ucode":"773D6104F56767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"一步","note":"","ucode":"73CEA468CE70C3","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":294385,"discussion_content":"nonono，这个功能是为了跨会话保持undo记录。\n即退出vim后，再次打开某个文件时，还能够继续的undo。\n\n没设置这个的时候，重新打开某个文件，不能接着上次的记录继续undo了吧。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595863550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":294380,"ip_address":""},"score":294385,"extra":""},{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"一步","note":"","ucode":"73CEA468CE70C3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1205253,"avatar":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","nickname":"我来也","note":"","ucode":"773D6104F56767","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294478,"discussion_content":"明白了，是跨回话的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595901102,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":294385,"ip_address":""},"score":294478,"extra":""}]}]},{"had_liked":false,"id":237521,"user_name":"唐龙","can_delete":false,"product_type":"c1","uid":1471657,"ip_address":"","ucode":"87A10AE04F2037","user_header":"https://static001.geekbang.org/account/avatar/00/16/74/a9/5eb3ebc6.jpg","comment_is_top":false,"comment_ctime":1595853019,"is_pvip":false,"replies":[{"id":"87780","content":"你的第一行等价于<br><br>set fileencodings=utf-8,ucs-bom,gb18030<br><br>不可能走到后面几种编码。<br><br>termencoding要跟你的终端编码匹配。Windows上大概率不是 UTF-8。事实上在 Windows 上不需要设。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1595898290,"ip_address":"","comment_id":237521,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5890820315","product_id":100055801,"comment_content":"老师的撤销文件和对于鼠标的处理我都挺喜欢的，后面的中文支持自己之前解决过，有一端时间在gitbash里使用vim，出现过乱码。也顺便了解了vim不同层面对于编码的处理和转换。贴一下自己在Windows里的配置文件：<br>set fileencodings=utf-8,ucs-bom,gb18030,gbk,gb2312,cp936<br>set termencoding=utf-8<br>set encoding=utf-8<br>后两行好像是展示到终端时采用的编码，还有vim内部处理时使用的编码，记不大清了。<br>所以我真的挺不喜欢Windows的。","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502441,"discussion_content":"你的第一行等价于\n\nset fileencodings=utf-8,ucs-bom,gb18030\n\n不可能走到后面几种编码。\n\ntermencoding要跟你的终端编码匹配。Windows上大概率不是 UTF-8。事实上在 Windows 上不需要设。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595898290,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1471657,"avatar":"https://static001.geekbang.org/account/avatar/00/16/74/a9/5eb3ebc6.jpg","nickname":"唐龙","note":"","ucode":"87A10AE04F2037","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294513,"discussion_content":"当时的情况我记不清了，今天百度了一下，GitBash环境下出现乱码，网上的资料都是改成的utf-8，看了一下我的GitBash也确实是设置的utf-8。\n我在Windows里如果不用IDE的话基本上也是使用GitBash，所以我想应该是没问题的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595912488,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1471657,"avatar":"https://static001.geekbang.org/account/avatar/00/16/74/a9/5eb3ebc6.jpg","nickname":"唐龙","note":"","ucode":"87A10AE04F2037","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294909,"discussion_content":"Git Bash 的话，我是不当成 Windows 的������。\n\nMintty 有自己的编码设置。一般确实用 UTF-8，然后 Vim 要和 mintty 的设置一致","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596028254,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":294513,"ip_address":""},"score":294909,"extra":""}]}]},{"had_liked":false,"id":237438,"user_name":"doge","can_delete":false,"product_type":"c1","uid":1593251,"ip_address":"","ucode":"9E2D4C8F9B4CBC","user_header":"https://static001.geekbang.org/account/avatar/00/18/4f/a3/0e56b4e5.jpg","comment_is_top":false,"comment_ctime":1595831803,"is_pvip":false,"replies":[{"id":"87749","content":"如果没存盘的话，还是要靠交换文件，而不是撤销文件。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1595846703,"ip_address":"","comment_id":237438,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5890799099","product_id":100055801,"comment_content":"这个undofile的功能太强大了，以前把backup禁用后，老是碰到远程掉线，然后不记得上次修改的情况，这以后就不用怕了啊。","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502418,"discussion_content":"如果没存盘的话，还是要靠交换文件，而不是撤销文件。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595846703,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":237352,"user_name":"Adoy","can_delete":false,"product_type":"c1","uid":1029966,"ip_address":"","ucode":"6D11EBAD640E6D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b7/4e/d71e8d2f.jpg","comment_is_top":false,"comment_ctime":1595804457,"is_pvip":false,"replies":[{"id":"87671","content":"参见01评论下我的回答。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1595809665,"ip_address":"","comment_id":237352,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5890771753","product_id":100055801,"comment_content":"老师怎么看待新的NeoVim，貌似更多人选择NeoVim来替代Vim因为更加开放和更加现代。同时VSCode也有插件支持NeoVim作为后端，提供vim的便利。","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502384,"discussion_content":"参见01评论下我的回答。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595809665,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":237340,"user_name":"绝尘而去","can_delete":false,"product_type":"c1","uid":1252567,"ip_address":"","ucode":"690E4E6B3E39DD","user_header":"https://static001.geekbang.org/account/avatar/00/13/1c/d7/c176ad9f.jpg","comment_is_top":false,"comment_ctime":1595785418,"is_pvip":true,"replies":[{"id":"87673","content":"还跟个人习惯有关。这个不求大家都有相同的用法。每个人找到最适合自己的方法。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1595809815,"ip_address":"","comment_id":237340,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5890752714","product_id":100055801,"comment_content":"很同意老师的说法，没有必要用了vim后就不用鼠标，任何工具都是为了提高工作效率，在合适的情况使用合适的工具就可以了。","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502379,"discussion_content":"还跟个人习惯有关。这个不求大家都有相同的用法。每个人找到最适合自己的方法。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595809815,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332818,"user_name":"罗耀龙@坐忘","can_delete":false,"product_type":"c1","uid":1917663,"ip_address":"","ucode":"3CEA258DE7F3C7","user_header":"https://static001.geekbang.org/account/avatar/00/1d/42/df/a034455d.jpg","comment_is_top":false,"comment_ctime":1643689884,"is_pvip":true,"discussion_count":0,"race_medal":5,"score":"1643689884","product_id":100055801,"comment_content":"茶艺师学编程：<br><br>突然发现，极客时间的web端的方向键也是：hjkl","like_count":0},{"had_liked":false,"id":266861,"user_name":"Ethan","can_delete":false,"product_type":"c1","uid":1658014,"ip_address":"","ucode":"BAAA75EE713CA6","user_header":"https://static001.geekbang.org/account/avatar/00/19/4c/9e/908c04fe.jpg","comment_is_top":false,"comment_ctime":1607507782,"is_pvip":false,"replies":[{"id":"96920","content":"能贴出相关的完整代码看看吗？并报告你的详细环境信息，包括 Vim 的安装方式。还可以看一下命令 :echo exists(&#39;*mkdir&#39;) 的输出结果。<br>","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1607562542,"ip_address":"","comment_id":266861,"utype":1}],"discussion_count":5,"race_medal":0,"score":"1607507782","product_id":100055801,"comment_content":"老师，我undofile的功能能实现。就是启动vim的时候，自己判断undodir是否存在，自动创建目录的代码有问题。不会自动创建目录。","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511415,"discussion_content":"能贴出相关的完整代码看看吗？并报告你的详细环境信息，包括 Vim 的安装方式。还可以看一下命令 :echo exists(&amp;#39;*mkdir&amp;#39;) 的输出结果。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607562542,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1658014,"avatar":"https://static001.geekbang.org/account/avatar/00/19/4c/9e/908c04fe.jpg","nickname":"Ethan","note":"","ucode":"BAAA75EE713CA6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333582,"discussion_content":"我明白了，创建文件的语句中undodir是前面变量的值，而不是指undodir这个文件夹。谢谢老师","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607568761,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1658014,"avatar":"https://static001.geekbang.org/account/avatar/00/19/4c/9e/908c04fe.jpg","nickname":"Ethan","note":"","ucode":"BAAA75EE713CA6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333579,"discussion_content":"老师，终于可以了。发现创建目录的语句写在 set undodir语句后面就能实现了。原来是写在前面的。但还是不知道为什么不能写在前面？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607568608,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1658014,"avatar":"https://static001.geekbang.org/account/avatar/00/19/4c/9e/908c04fe.jpg","nickname":"Ethan","note":"","ucode":"BAAA75EE713CA6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333746,"discussion_content":"本来希望执行的是 mkdir(&#39;~/.vim/undodir&#39;, &#39;p&#39;, 0700)，结果执行了 mkdir(&#39;.&#39;, &#39;p&#39;, 0700)，效果当然就不一样了……","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607608199,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":333579,"ip_address":""},"score":333746,"extra":""},{"author":{"id":1658014,"avatar":"https://static001.geekbang.org/account/avatar/00/19/4c/9e/908c04fe.jpg","nickname":"Ethan","note":"","ucode":"BAAA75EE713CA6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":333882,"discussion_content":"谢谢老师","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607658988,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":333746,"ip_address":""},"score":333882,"extra":""}]}]},{"had_liked":false,"id":246699,"user_name":"秋云萧雪寒","can_delete":false,"product_type":"c1","uid":1166748,"ip_address":"","ucode":"C48428011AEAC2","user_header":"https://static001.geekbang.org/account/avatar/00/11/cd/9c/286271ed.jpg","comment_is_top":false,"comment_ctime":1599456035,"is_pvip":false,"replies":[{"id":"90688","content":"Vim 负责处理右键事件啊，没什么奇怪的。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1599486936,"ip_address":"","comment_id":246699,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1599456035","product_id":100055801,"comment_content":"在macOS 10.15.6 vim8.2上使用这节git上的配置set mouse=nvi后触摸板右键没反应了，可以实现点击跳转，这行改为空后跳转失效触摸板右键可以出来系统菜单","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505210,"discussion_content":"Vim 负责处理右键事件啊，没什么奇怪的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599486936,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1166748,"avatar":"https://static001.geekbang.org/account/avatar/00/11/cd/9c/286271ed.jpg","nickname":"秋云萧雪寒","note":"","ucode":"C48428011AEAC2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304353,"discussion_content":"已经知道如何复制了，文章中有说明，听音频时没有抓住重点，仔细看了遍文字才发现","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599552097,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":245870,"user_name":"老王","can_delete":false,"product_type":"c1","uid":2147274,"ip_address":"","ucode":"86BE7C68CFFFAF","user_header":"https://static001.geekbang.org/account/avatar/00/20/c3/ca/9ffef865.jpg","comment_is_top":false,"comment_ctime":1599098919,"is_pvip":false,"replies":[{"id":"90414","content":"那就要你自己写个脚本来判断这些路径了，makeprg 本身没有这样的功能，但它可以调用你提供的脚本。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1599112631,"ip_address":"","comment_id":245870,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1599098919","product_id":100055801,"comment_content":"vim配置makeprg选项，是否可以指定在哪个目录下执行make呢？比如：我在 project&#47;kernel&#47;driver&#47;下，打开一个.c文件，如果在vim里直接执行make，就会在project&#47;kernel&#47;driver路径下执行make，但是我需要在project下执行make","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504999,"discussion_content":"那就要你自己写个脚本来判断这些路径了，makeprg 本身没有这样的功能，但它可以调用你提供的脚本。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599112631,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":245125,"user_name":"老王","can_delete":false,"product_type":"c1","uid":2147274,"ip_address":"","ucode":"86BE7C68CFFFAF","user_header":"https://static001.geekbang.org/account/avatar/00/20/c3/ca/9ffef865.jpg","comment_is_top":false,"comment_ctime":1598840956,"is_pvip":false,"replies":[{"id":"90198","content":"是。<br><br>那你得给出详细的环境描述来看一下了。有可能你的终端程序不支持鼠标事件转发。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1598888151,"ip_address":"","comment_id":245125,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1598840956","product_id":100055801,"comment_content":"使用鼠标指的是在vim里鼠标点击哪里，光标就可以跳到哪里吗？  我设置成vin，但是鼠标还是只能在窗口中使用，而不能在vim里使用","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504796,"discussion_content":"是。\n\n那你得给出详细的环境描述来看一下了。有可能你的终端程序不支持鼠标事件转发。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598888151,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244404,"user_name":"老王","can_delete":false,"product_type":"c1","uid":2147274,"ip_address":"","ucode":"86BE7C68CFFFAF","user_header":"https://static001.geekbang.org/account/avatar/00/20/c3/ca/9ffef865.jpg","comment_is_top":false,"comment_ctime":1598508115,"is_pvip":false,"replies":[{"id":"89989","content":"1. 即使完全没有鼠标支持，你仍然可以使用鼠标进行选择的，只是 Vim 看不到你的鼠标使用而已。设置 mouse 选项是让 Vim 在指定的情况下接管鼠标事件。按你目前的设置，你在非可视模式下进行点击，Vim 的光标应该不会跟着移动过去吧？如果是这样的现象的话，行为还是完全正常的。<br><br>2. 看起来你应该是在终端里使用 Vim 吧？字体选项只对图形界面版本的 Vim 有效。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1598524336,"ip_address":"","comment_id":244404,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1598508115","product_id":100055801,"comment_content":"1、我的vimrc配置mouse=v，但是在插入模式、normal、命令行模式都可以用鼠标选中一部分内容，这是怎么回事？我理解只有在可视模式，才能使用鼠标选中一部分内容啊？<br>2、set guifontwide=Noto\\ Sans\\ Mono\\ CJK\\ SC\\ 11使用这个命令，在help文档中执行，没有任何效果呢？","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504574,"discussion_content":"1. 即使完全没有鼠标支持，你仍然可以使用鼠标进行选择的，只是 Vim 看不到你的鼠标使用而已。设置 mouse 选项是让 Vim 在指定的情况下接管鼠标事件。按你目前的设置，你在非可视模式下进行点击，Vim 的光标应该不会跟着移动过去吧？如果是这样的现象的话，行为还是完全正常的。\n\n2. 看起来你应该是在终端里使用 Vim 吧？字体选项只对图形界面版本的 Vim 有效。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598524336,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2147274,"avatar":"https://static001.geekbang.org/account/avatar/00/20/c3/ca/9ffef865.jpg","nickname":"老王","note":"","ucode":"86BE7C68CFFFAF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301642,"discussion_content":"改变完vimrc怎样才能生效呢？\n我在可视模式，光标也不能跳到鼠标点击的位置","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598595534,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240555,"user_name":"范程怡","can_delete":false,"product_type":"c1","uid":1883456,"ip_address":"","ucode":"7BD0B9675142DE","user_header":"https://static001.geekbang.org/account/avatar/00/1c/bd/40/60bfd0a5.jpg","comment_is_top":false,"comment_ctime":1596973277,"is_pvip":false,"replies":[{"id":"88790","content":"目前没看到完美实现这类功能的插件。我试过 jiangmiao&#47;auto-pairs，已经不错了，但仍有我不喜欢的副作用。你需要这类功能也许可以试一下。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1596977968,"ip_address":"","comment_id":240555,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1596973277","product_id":100055801,"comment_content":"老师您好，请在在Vim中代码块的大括号{ }一般是用怎样的输入顺序比较顺手？需要怎么配置括号自动填充吗？填充之后光标能否自动跳转到左右括号之间呢？","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503486,"discussion_content":"目前没看到完美实现这类功能的插件。我试过 jiangmiao/auto-pairs，已经不错了，但仍有我不喜欢的副作用。你需要这类功能也许可以试一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596977968,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1042555,"avatar":"","nickname":"zzuse","note":"","ucode":"4CC849CC70F116","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301913,"discussion_content":"我使用的曾经网上的一段代码，我的配置https://github.com/zzuse/dotfiles/blob/ab04761a5b8d1a89584b1d2d7457d781220149dc/vimrc#L91\n在粘贴文稿情况下可能有副作用，所以我的配置里有快捷键打开/关闭\n 14 :inoremap ( ()<ESC>i\n 13 :inoremap ) <c-r>=ClosePair(&#39;)&#39;)<CR>\n 12 :inoremap { {}<ESC>i\n 11 :inoremap } <c-r>=ClosePair(&#39;}&#39;)<CR>\n 10 :inoremap [ []<ESC>i\n  9 :inoremap ] <c-r>=ClosePair(&#39;]&#39;)<CR>\n  8 :inoremap &#34; &#34;&#34;<ESC>i\n  7 :inoremap &#39; &#39;&#39;<ESC>i\n  6 function! ClosePair(char)\n  5 if getline(&#39;.&#39;)[col(&#39;.&#39;) - 1] == a:char\n  4 return &#34;\\<Right>&#34;\n  3 else\n  2 return a:char\n  1  endif\n  0 endfunction","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598707252,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240351,"user_name":"瀚海星尘","can_delete":false,"product_type":"c1","uid":1024461,"ip_address":"","ucode":"90F418299EA3BF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a1/cd/2c513481.jpg","comment_is_top":false,"comment_ctime":1596874888,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596874888","product_id":100055801,"comment_content":"这一讲真的是干活满满，学到了！已收藏。","like_count":0},{"had_liked":false,"id":240341,"user_name":"瀚海星尘","can_delete":false,"product_type":"c1","uid":1024461,"ip_address":"","ucode":"90F418299EA3BF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a1/cd/2c513481.jpg","comment_is_top":false,"comment_ctime":1596870375,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596870375","product_id":100055801,"comment_content":"跨会话撤销真的好牛逼啊！真的是第一次见到！！","like_count":0},{"had_liked":false,"id":238825,"user_name":"__@948CSheLL","can_delete":false,"product_type":"c1","uid":2091669,"ip_address":"","ucode":"3799653724B8FC","user_header":"https://static001.geekbang.org/account/avatar/00/1f/ea/95/3f2539cc.jpg","comment_is_top":false,"comment_ctime":1596334324,"is_pvip":false,"replies":[{"id":"88247","content":"不清楚你的意思。我试下来，这种情况下右键都是弹出终端的右键菜单。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1596372947,"ip_address":"","comment_id":238825,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1596334324","product_id":100055801,"comment_content":"在设置了set mouse=nui后，切换到命令行模式，不能点击右键，请问老师应该怎么办？","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502865,"discussion_content":"不清楚你的意思。我试下来，这种情况下右键都是弹出终端的右键菜单。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596372947,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1136228,"avatar":"https://static001.geekbang.org/account/avatar/00/11/56/64/b70e50c0.jpg","nickname":"山辣","note":"","ucode":"4EFEF826347809","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388650,"discussion_content":"我也遇到同样的问题，我的环境是MacOS，用鼠标选择后，右键没有菜单跳出来，这样怎样能复制到别的应用程序呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628866633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":238805,"user_name":"Kevin⚡️Zhou","can_delete":false,"product_type":"c1","uid":1440772,"ip_address":"","ucode":"C0FC2673705212","user_header":"https://static001.geekbang.org/account/avatar/00/15/fc/04/d83a555e.jpg","comment_is_top":false,"comment_ctime":1596323174,"is_pvip":false,"replies":[{"id":"88199","content":"这个不清楚，我也没仔细研究 Vim 的源码。比较大的概率，并不是使用异步的线程做的。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1596337873,"ip_address":"","comment_id":238805,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1596323174","product_id":100055801,"comment_content":"老师, 请问vim生成的swp file的保存机制是什么样的, 是每次用户开启编辑模式, vim会同时用另外的线程写入到swp文件中么?","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502858,"discussion_content":"这个不清楚，我也没仔细研究 Vim 的源码。比较大的概率，并不是使用异步的线程做的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596337873,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":238781,"user_name":"何不食夜糜","can_delete":false,"product_type":"c1","uid":1583654,"ip_address":"","ucode":"05E8B28B19ADA8","user_header":"https://static001.geekbang.org/account/avatar/00/18/2a/26/c6e7a158.jpg","comment_is_top":false,"comment_ctime":1596292812,"is_pvip":false,"replies":[{"id":"88202","content":"安装那讲里有专门“中文帮助文档”一节的。看漏了？","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1596338038,"ip_address":"","comment_id":238781,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1596292812","product_id":100055801,"comment_content":"老师请问您的中文帮助文档是怎么设置的 在哪里可以获取","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502849,"discussion_content":"安装那讲里有专门“中文帮助文档”一节的。看漏了？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596338038,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1583654,"avatar":"https://static001.geekbang.org/account/avatar/00/18/2a/26/c6e7a158.jpg","nickname":"何不食夜糜","note":"","ucode":"05E8B28B19ADA8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295895,"discussion_content":"谢谢谢老师 看到了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596377466,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":238354,"user_name":"pyhhou","can_delete":false,"product_type":"c1","uid":1256496,"ip_address":"","ucode":"31EF8D50CF91A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","comment_is_top":false,"comment_ctime":1596131951,"is_pvip":false,"replies":[{"id":"88133","content":"格式不对吧？我试一下来，MacVim上接受的格式是这个样子的：<br><br>set guifont=DejaVu\\ Sans\\ Mono:h32<br><br>或<br><br>set guifont=DejaVu_Sans_Mono:h32<br><br>你是认真地要设 32 磅的大字体吗？","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1596211516,"ip_address":"","comment_id":238354,"utype":1}],"discussion_count":13,"race_medal":0,"score":"1596131951","product_id":100055801,"comment_content":"老师，请教另一个问题，配置字体那里，在 Mac home 下的 .vimrc 文件中添加了<br><br>set guifont=DejaVu\\ Sans\\ Mono\\ 32<br><br>但是用 vim 或是 mvim 启动并没有看到字体大小和样式的改变，但是在 Mac vim 的图形界面中，命令行模式下输入上面的配置项就可以立刻看到字体的改变。不知道是哪里出了问题？","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502717,"discussion_content":"格式不对吧？我试一下来，MacVim上接受的格式是这个样子的：\n\nset guifont=DejaVu\\ Sans\\ Mono:h32\n\n或\n\nset guifont=DejaVu_Sans_Mono:h32\n\n你是认真地要设 32 磅的大字体吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596211516,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1256496,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","nickname":"pyhhou","note":"","ucode":"31EF8D50CF91A5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295732,"discussion_content":"如果加了条件判断，下面的配置：\n\nif has(&#39;gui_running&#39;) \n    set guifont=DejaVu\\ Sans\\ Mono:h32\nendif\n\n那么 :verbose set gfn 后输出就是：\n\nguifont=\n\n但如果没有条件判断，单单如下的配置：\n\nset guifont=DejaVu\\ Sans\\ Mono:h32\n\n这样的话，:verbose set gfn 后输出就是：\nguifont=DejaVu Sans Mono:h32\n         Last set from ~/.vimrc line 25\n\n但问题是，上面两种配置保存后均不能让设置的字体生效\n\n顺便附上我的 ~/.vimrc 文件配置内容：\n\nset enc=utf-8\nset nocompatible\nsource $VIMRUNTIME/vimrc_example.vim\n\nset nobackup\nset fileencodings=ucs-bom,utf-8,gb18030,latin1\nset scrolloff=1\n\nif has(&#39;persistent_undo&#39;)\n  set undofile\n  set undodir=~/.vim/undodir\n  if !isdirectory(&amp;undodir)\n    call mkdir(&amp;undodir, &#39;p&#39;, 0700)\n  endif\nendif\n\nif has(&#39;mouse&#39;)\n  if has(&#39;gui_running&#39;) || (&amp;term =~ &#39;xterm&#39; &amp;&amp; !has(&#39;mac&#39;))\n    set mouse=a\n  else\n    set mouse=nvi\n  endif\nendif\n\nif has(&#39;gui_running&#39;)\n  set guifont=DejaVu\\ Sans\\ Mono:h32\nendif\n\n感谢老师的耐心解答","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596317486,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1256496,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","nickname":"pyhhou","note":"","ucode":"31EF8D50CF91A5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296117,"discussion_content":"我拿了你的这个 vimrc，下载了字体之后测试，直接就是可以的……","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596455492,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":295732,"ip_address":""},"score":296117,"extra":""},{"author":{"id":1256496,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","nickname":"pyhhou","note":"","ucode":"31EF8D50CF91A5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":296237,"discussion_content":"原来字体是要先下载的。我是直接在 macvim 中查看存在的字体，然后就更改 .vimrc。缺少了下载字体这个步骤，不知道这个是不是必须的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596478108,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":296117,"ip_address":""},"score":296237,"extra":""},{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1256496,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","nickname":"pyhhou","note":"","ucode":"31EF8D50CF91A5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296260,"discussion_content":"这个不是。你用的不是系统安装的字体吧，我这儿反正没有。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596499925,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":296237,"ip_address":""},"score":296260,"extra":""}]},{"author":{"id":1256496,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","nickname":"pyhhou","note":"","ucode":"31EF8D50CF91A5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295525,"discussion_content":"试了一下还是没反应，那个 32 是为了测试配置是否生效������\n\n不知道是不是其他地方的某些配置出了问题？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596219940,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":6,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1256496,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","nickname":"pyhhou","note":"","ucode":"31EF8D50CF91A5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295544,"discussion_content":"试试进去之后输入\n\n :verbose set gfn?\n\n看看有没有其他地方设了字体。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596244428,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":295525,"ip_address":""},"score":295544,"extra":""},{"author":{"id":1256496,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","nickname":"pyhhou","note":"","ucode":"31EF8D50CF91A5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":295993,"discussion_content":"不好意思，不知道有级联回复。不知道老师能否看到我上面的评论\n\n我在想会不会是一些环境没有设定好？看了网上的一些说法，说是要在 .gvimrc 里面设置，尝试了，但字体大小一直变不了，怪难受的。。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596422788,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":295544,"ip_address":""},"score":295993,"extra":""},{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1256496,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","nickname":"pyhhou","note":"","ucode":"31EF8D50CF91A5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296119,"discussion_content":"我看得到那个评论，但那样的评论我收不到提醒（可能系统认为你在回复自己而不是我吧）。回复我后面的评论倒是有提醒的……\n\n你是不是同时有 .gvimrc 和 .vimrc 呢？我是只有一个 .vimrc。我测试你的配置是把它存成 vimrc，然后用 vim -u vimrc 来检查。没问题的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596455698,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":295993,"ip_address":""},"score":296119,"extra":""}]}]},{"had_liked":false,"id":238326,"user_name":"前端西瓜哥","can_delete":false,"product_type":"c1","uid":1248576,"ip_address":"","ucode":"150130C34CD1C1","user_header":"https://static001.geekbang.org/account/avatar/00/13/0d/40/f70e5653.jpg","comment_is_top":false,"comment_ctime":1596122041,"is_pvip":false,"replies":[{"id":"88060","content":"还可以。一般编辑功能都有了。如果希望自己安装使用Vim插件，那就不适用了。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1596157021,"ip_address":"","comment_id":238326,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1596122041","product_id":100055801,"comment_content":"老师你觉得 vscode 的 vim 插件怎么样？感觉挺有潜力的。","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502705,"discussion_content":"还可以。一般编辑功能都有了。如果希望自己安装使用Vim插件，那就不适用了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596157021,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":238214,"user_name":"JustDoDT","can_delete":false,"product_type":"c1","uid":1127175,"ip_address":"","ucode":"6AF0B80F00EAEF","user_header":"https://static001.geekbang.org/account/avatar/00/11/33/07/8f351609.jpg","comment_is_top":false,"comment_ctime":1596096555,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596096555","product_id":100055801,"comment_content":"vimtutor学习关键点：<br>注意右下角会显示操作符。","like_count":0},{"had_liked":false,"id":238190,"user_name":"我来也","can_delete":false,"product_type":"c1","uid":1205253,"ip_address":"","ucode":"773D6104F56767","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","comment_is_top":false,"comment_ctime":1596092035,"is_pvip":false,"replies":[{"id":"88035","content":"误删这事就不好说了……不过你这也算一种方法吧。<br><br>我在Mac上，文件系统本身就有快照功能。加上云的年代，重要文件在云端&#47;Git里。Vim的撤销文件很方便，备份文件对我就很鸡肋。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1596125164,"ip_address":"","comment_id":238190,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1596092035","product_id":100055801,"comment_content":"我觉得vim的备份文件还是有必要设置一下的.<br>与undo目录一样,backupdir也可以设置到外面.<br>类似这样:<br>```<br>set backup<br>set writebackup<br>set backupdir=~&#47;.cache&#47;vimbackup&#47;&#47;<br>```<br><br>今天就遇到了一个尴尬的事情.<br>rm错了文件,而vim只保留了undo文件.恰好备份的文件没备份成功.<br>导致文件内容无法恢复.<br><br>讲讲我备份失败的原因:<br>看到上面backupdir路径最后面的两个`&#47;&#47;`了么?<br>之前没备份成功,就是因为只有一个`&#47;`.<br>导致备份时,只保留了文件名,而没有保留完整的路径名.<br>而当我发现我删除了文件时,已经编辑了另外的一个同名文件,导致被我误删的文件无法恢复了.<br><br>我也是找到了这个链接才知道这么配置的:<br>https:&#47;&#47;stackoverflow.com&#47;questions&#47;26742313&#47;why-vim-backup-filenames-are-not-correct-backupdir-option-not-performing-as-expected<br>发现在vim 8.1.0251版本中就修复了该问题<br>https:&#47;&#47;github.com&#47;vim&#47;vim&#47;commit&#47;b782ba475a3f8f2b0be99dda164ba4545347f60f<br><br>---<br>好像也没有什么好办法从undo文件直接恢复文件内容.<br>https:&#47;&#47;stackoverflow.com&#47;questions&#47;18630937&#47;recover-a-vim-file-from-the-un-file-without-the-undo-command","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502670,"discussion_content":"误删这事就不好说了……不过你这也算一种方法吧。\n\n我在Mac上，文件系统本身就有快照功能。加上云的年代，重要文件在云端/Git里。Vim的撤销文件很方便，备份文件对我就很鸡肋。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596125164,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":238058,"user_name":"return","can_delete":false,"product_type":"c1","uid":1135528,"ip_address":"","ucode":"42B8A3380DF04B","user_header":"https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg","comment_is_top":false,"comment_ctime":1596039022,"is_pvip":false,"replies":[{"id":"87947","content":"这个是记录一些历史的。一般不用去动它。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1596069195,"ip_address":"","comment_id":238058,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1596039022","product_id":100055801,"comment_content":"我的 ～&#47;  下面 居然有一个 .viminfo的文件， 进去看 貌似是 vim的编辑记录。<br>","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502635,"discussion_content":"这个是记录一些历史的。一般不用去动它。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596069195,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":237872,"user_name":"諸葛御風","can_delete":false,"product_type":"c1","uid":1075668,"ip_address":"","ucode":"4ADF9B79BED221","user_header":"https://static001.geekbang.org/account/avatar/00/10/69/d4/1b9992d5.jpg","comment_is_top":false,"comment_ctime":1595992483,"is_pvip":false,"replies":[{"id":"87918","content":"KeyCastr 开源，免费<br><br>https:&#47;&#47;github.com&#47;keycastr&#47;keycastr","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1596022949,"ip_address":"","comment_id":237872,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1595992483","product_id":100055801,"comment_content":"这个mac下显示按键的app是？","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502574,"discussion_content":"KeyCastr 开源，免费\n\nhttps://github.com/keycastr/keycastr","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596022949,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":237806,"user_name":"pyhhou","can_delete":false,"product_type":"c1","uid":1256496,"ip_address":"","ucode":"31EF8D50CF91A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","comment_is_top":false,"comment_ctime":1595979290,"is_pvip":false,"replies":[{"id":"87854","content":"我提到的 source 命令都是 Vim 命令，是在 Vim 里面，不是在 Bash 里……<br><br>如果安装了 MacVim，并且 printenv PATH 看到 &#47;usr&#47;local&#47;bin 在 &#47;usr&#47;bin 前面，那 vim 命令启动的就是 MacVim 的版本。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1595984444,"ip_address":"","comment_id":237806,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1595979290","product_id":100055801,"comment_content":"请教老师，和前面几个同学一样的问题，在 Mac 终端下试了很多次没有找到 $VIMRUNTIME。<br><br>尝试 $&gt; echo $VIMRUNTIME，输出为空行<br>另外尝试 $&gt; which vim，输出的路径是 &#47;usr&#47;local&#47;bin&#47;vim<br><br>这种情况下 &gt;$ source $VIMRUNTIME&#47;vimrc_example.vim 输出就是<br>source: no such file or directory: &#47;vimrc_example.vim<br><br>但是在 vim 中，运行 $&gt; echo $VIMRUNTIME 是有结果输出的，结果是：<br>&#47;usr&#47;local&#47;Cellar&#47;macvim&#47;8.2-163_2&#47;MacVim.app&#47;Contents&#47;Resources&#47;vim&#47;runtime<br><br>我尝试着用上面的那个在 vim 终端输出出来的 path 替换 .vimrc 中的 $VIMRUNTIME，但 source .vimrc 文件后还是会报错：(或者说这里我们不需要 source .vimrc？感觉 vim 进去之后颜色变了，说明成功导入 vimrc_example.vim？)<br><br>&#47;usr&#47;local&#47;Cellar&#47;macvim&#47;8.2-163_2&#47;MacVim.app&#47;Contents&#47;Resources&#47;vim&#47;runtime&#47;vimrc_example.vim:1: command not found:  An example for a vimrc file.\\n<br>&#47;usr&#47;local&#47;Cellar&#47;macvim&#47;8.2-163_2&#47;MacVim.app&#47;Contents&#47;Resources&#47;vim&#47;runtime&#47;vimrc_example.vim:3: command not found:  Maintainer:\\tBram Moolenaar &lt;Bram@vim.org&gt;\\n<br>&#47;usr&#47;local&#47;Cellar&#47;macvim&#47;8.2-163_2&#47;MacVim.app&#47;Contents&#47;Resources&#47;vim&#47;runtime&#47;vimrc_example.vim:5: command not found: \\n<br>&#47;usr&#47;local&#47;Cellar&#47;macvim&#47;8.2-163_2&#47;MacVim.app&#47;Contents&#47;Resources&#47;vim&#47;runtime&#47;vimrc_example.vim:7: command not found: \\t       for Unix:  ~&#47;.vimrc\\n<br>&#47;usr&#47;local&#47;Cellar&#47;macvim&#47;8.2-163_2&#47;MacVim.app&#47;Contents&#47;Resources&#47;vim&#47;runtime&#47;vimrc_example.vim:9: command not found: \\t for MS-Windows:  \\_vimrc\\n<br>&#47;usr&#47;local&#47;Cellar&#47;macvim&#47;8.2-163_2&#47;MacVim.app&#47;Contents&#47;Resources&#47;vim&#47;runtime&#47;vimrc_example.vim:11: command not found: \\t    for OpenVMS:  sys:.vimrc\\n\\n<br>&#47;usr&#47;local&#47;Cellar&#47;macvim&#47;8.2-163_2&#47;MacVim.app&#47;Contents&#47;Resources&#47;vim&#47;runtime&#47;vimrc_example.vim:14: command not found:  out.\\nif v:progname =~? evim\\n  finish\\nendif\\n\\n<br>&#47;usr&#47;local&#47;Cellar&#47;macvim&#47;8.2-163_2&#47;MacVim.app&#47;Contents&#47;Resources&#47;vim&#47;runtime&#47;vimrc_example.vim:source:20: no such file or directory: &#47;defaults.vim<br>&#47;usr&#47;local&#47;Cellar&#47;macvim&#47;8.2-163_2&#47;MacVim.app&#47;Contents&#47;Resources&#47;vim&#47;runtime&#47;vimrc_example.vim:53: parse error near `\\n&#39;<br>.vimrc:12: parse error near `)&#39;<br><br>不知道是不是安装了 MacVim，需要改变配置项？按老师之前的安装配置，一般使用 vim 都会默认使用 mvim ？还烦请老师解答","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502548,"discussion_content":"我提到的 source 命令都是 Vim 命令，是在 Vim 里面，不是在 Bash 里……\n\n如果安装了 MacVim，并且 printenv PATH 看到 /usr/local/bin 在 /usr/bin 前面，那 vim 命令启动的就是 MacVim 的版本。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595984444,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":237690,"user_name":"木 易","can_delete":false,"product_type":"c1","uid":1033212,"ip_address":"","ucode":"5C3BBB5958A4B5","user_header":"","comment_is_top":false,"comment_ctime":1595926905,"is_pvip":false,"replies":[{"id":"87832","content":"在Vim课程里，你想得到什么回答？🤪<br><br>第 8、13 讲和拓展 2里，会有相关的讨论。到时候，有具体问题可以提出来。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1595948059,"ip_address":"","comment_id":237690,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1595926905","product_id":100055801,"comment_content":"老师，学习C语言，推荐使用什么IDE工具","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502506,"discussion_content":"在Vim课程里，你想得到什么回答？🤪\n\n第 8、13 讲和拓展 2里，会有相关的讨论。到时候，有具体问题可以提出来。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595948059,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":237683,"user_name":"3.141516","can_delete":false,"product_type":"c1","uid":1013309,"ip_address":"","ucode":"34AF71B02692F3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/76/3d/8120438b.jpg","comment_is_top":false,"comment_ctime":1595925120,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1595925120","product_id":100055801,"comment_content":"macOS 上 set mouse=a 和 set mouse=nvi 在 NORMAL、VISUAL、INSERT 模式操作都是一致的，鼠标选中内容会自动切换 VISUAL 模式，单击会自动切回原来模式，并会改变光标位置；主要区别是在 COMMAND-LINE 模式，set mouse=a 下鼠标选择没有任何反应，set mouse=nvi 可以触发窗口系统接管鼠标事件。","like_count":0},{"had_liked":false,"id":237568,"user_name":"中年男子","can_delete":false,"product_type":"c1","uid":1039204,"ip_address":"","ucode":"027C86B3370150","user_header":"https://static001.geekbang.org/account/avatar/00/0f/db/64/06d54a80.jpg","comment_is_top":false,"comment_ctime":1595865162,"is_pvip":true,"replies":[{"id":"87782","content":"在 Vim 里面运行<br><br>:echo $VIMRUNTIME<br><br>是什么结果？<br><br>另外，确定一下你运行的 Vim 是 MacVim。如果你用 vim 启动，用 which vim 检查一下。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1595898604,"ip_address":"","comment_id":237568,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1595865162","product_id":100055801,"comment_content":".vimrc:source:2: no such file or directory: &#47;vimrc_example.vim<br>.vimrc:10: parse error near `)&#39;<br>用的l2-unix 配置， 报了这两个错， 我这里是mac， home brew 安装的macvim 8.2<br>发现 系统里没有 $VIMRUNTIME  这个变量， 是vim 安装有问题吗？","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502461,"discussion_content":"在 Vim 里面运行\n\n:echo $VIMRUNTIME\n\n是什么结果？\n\n另外，确定一下你运行的 Vim 是 MacVim。如果你用 vim 启动，用 which vim 检查一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595898604,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1039204,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/db/64/06d54a80.jpg","nickname":"中年男子","note":"","ucode":"027C86B3370150","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294905,"discussion_content":"嗯，vim里是能看到这个变量的，了解了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596027789,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1039204,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/db/64/06d54a80.jpg","nickname":"中年男子","note":"","ucode":"027C86B3370150","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":294911,"discussion_content":"好像你和另外一些人看到 source 就认为是 Bash 了……这也是一个我完全没预料到的情况。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596028353,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":294905,"ip_address":""},"score":294911,"extra":""},{"author":{"id":1039204,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/db/64/06d54a80.jpg","nickname":"中年男子","note":"","ucode":"027C86B3370150","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":295513,"discussion_content":"确实是这样，以为是bash了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596212644,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":294911,"ip_address":""},"score":295513,"extra":""}]}]},{"had_liked":false,"id":237555,"user_name":"若离 ","can_delete":false,"product_type":"c1","uid":1061989,"ip_address":"","ucode":"E0BF97ADB65A32","user_header":"https://static001.geekbang.org/account/avatar/00/10/34/65/db068da8.jpg","comment_is_top":false,"comment_ctime":1595862570,"is_pvip":false,"replies":[{"id":"87774","content":"写了 source $VIMRUNTIME&#47;vimrc_example.vim 吗？<br><br>这个文件应当会设置 undofile。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1595897971,"ip_address":"","comment_id":237555,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1595862570","product_id":100055801,"comment_content":"「这是因为在示例配置里，Vim 自动设置了下面两个选项」文中这里指的是「vim 的默认配置」嘛？<br><br>我在配置文件中添加了  <br><br><br>set nobackup<br>set undodir=~&#47;.vim&#47;undodir<br><br>这两行，并没有达到效果，然后搜索了一下，发现还需要设置「set undofile」才能达到老师的效果","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502456,"discussion_content":"写了 source $VIMRUNTIME/vimrc_example.vim 吗？\n\n这个文件应当会设置 undofile。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595897971,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1061989,"avatar":"https://static001.geekbang.org/account/avatar/00/10/34/65/db068da8.jpg","nickname":"若离 ","note":"","ucode":"E0BF97ADB65A32","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294643,"discussion_content":"感谢老师回复，找到了问题������","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595948074,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":237447,"user_name":"韩德田Tivens","can_delete":false,"product_type":"c1","uid":1205299,"ip_address":"","ucode":"57B464C47FDAFA","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/33/f5f5c407.jpg","comment_is_top":false,"comment_ctime":1595833603,"is_pvip":false,"replies":[{"id":"87750","content":"不需要，Vim自己设置的。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1595846720,"ip_address":"","comment_id":237447,"utype":1}],"discussion_count":6,"race_medal":0,"score":"1595833603","product_id":100055801,"comment_content":"咨询个问题，$VIMRUNTIME需要设置成什么？","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502422,"discussion_content":"不需要，Vim自己设置的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595846720,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1609871,"avatar":"https://static001.geekbang.org/account/avatar/00/18/90/8f/9c691a5f.jpg","nickname":"奔跑的码仔","note":"","ucode":"AB3B02B07B8B8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294312,"discussion_content":"老师，同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595853042,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1205299,"avatar":"https://static001.geekbang.org/account/avatar/00/12/64/33/f5f5c407.jpg","nickname":"韩德田Tivens","note":"","ucode":"57B464C47FDAFA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294278,"discussion_content":"如何查看这个值，我在bash中echo $VIMRUNTIME是空的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595846998,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1205299,"avatar":"https://static001.geekbang.org/account/avatar/00/12/64/33/f5f5c407.jpg","nickname":"韩德田Tivens","note":"","ucode":"57B464C47FDAFA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294463,"discussion_content":"试试在Vim里面执行 :echo $VIMRUNTIME。这是 Vim 内部设置的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595898845,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":294278,"ip_address":""},"score":294463,"extra":""},{"author":{"id":1205299,"avatar":"https://static001.geekbang.org/account/avatar/00/12/64/33/f5f5c407.jpg","nickname":"韩德田Tivens","note":"","ucode":"57B464C47FDAFA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":294486,"discussion_content":"GET到了，课件中vimrc_example.vim，需要自己生成这个文件，放到$VIMRUNTIME目录下对吧？在~/.vimrc中配置了参数，是重新打开vim 编辑文件就会生效吧？不需要在source之类的操作？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595904232,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":294463,"ip_address":""},"score":294486,"extra":""},{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1205299,"avatar":"https://static001.geekbang.org/account/avatar/00/12/64/33/f5f5c407.jpg","nickname":"韩德田Tivens","note":"","ucode":"57B464C47FDAFA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294517,"discussion_content":"呃，不是。这个 vimrc_example.vim 是 Vim 自带的。我这儿只是导入运行它而已。我们自己的就只是 .vimrc 或 _vimrc。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595913760,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":294486,"ip_address":""},"score":294517,"extra":""}]}]},{"had_liked":false,"id":237414,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1105161,"ip_address":"","ucode":"1EECCA0F43E278","user_header":"https://static001.geekbang.org/account/avatar/00/10/dd/09/feca820a.jpg","comment_is_top":false,"comment_ctime":1595822637,"is_pvip":false,"replies":[{"id":"87695","content":"没看明白。<br><br>编辑不同目录下的同名文件，撤销文件是不一样的。不会冲突。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1595826483,"ip_address":"","comment_id":237414,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1595822637","product_id":100055801,"comment_content":"建议set undodir=~&#47;.vim&#47;undodir&#47;&#47;, 这个后面加两个&#47;, 为了是防止不同目录相同文件名情况的冲突.","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502408,"discussion_content":"没看明白。\n\n编辑不同目录下的同名文件，撤销文件是不一样的。不会冲突。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595826483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1105161,"avatar":"https://static001.geekbang.org/account/avatar/00/10/dd/09/feca820a.jpg","nickname":"helloworld","note":"","ucode":"1EECCA0F43E278","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294212,"discussion_content":"老师说的对，是我弄错了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595830898,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":237355,"user_name":"时光勿念","can_delete":false,"product_type":"c1","uid":1025003,"ip_address":"","ucode":"72C8EC5A62C700","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a3/eb/d26459ae.jpg","comment_is_top":false,"comment_ctime":1595807236,"is_pvip":false,"replies":[{"id":"87694","content":"我不完全同意。交互这部分没问题，但鼠标可以做到眼到手到，用键盘我很难想象这一点。<br><br>个人意见，非线性的操作鼠标就是有优势的，用键盘去替代不是不可能，但不必要，徒增脑力负担。<br><br>此外，用过有惯性滚轮的鼠标（如罗技的）之后，真的就回不去了。不管是快速浏览网页，还是看代码，滚动的丝滑体验用键盘不可能做到。尤其是看网页和文档（Vim 里做不到），滚动距离是在像素级控制的。","user_name":"作者回复","user_name_real":"吴咏炜","uid":"1645639","ctime":1595826388,"ip_address":"","comment_id":237355,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1595807236","product_id":100055801,"comment_content":"使用鼠标一般都是因为都要与Vim之外的其他软件交互，只要其他软件比如浏览器之类的也变成全键盘操作就好了，通过一些插件软件的辅助，99%的操作都不用鼠标，很爽的","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502385,"discussion_content":"我不完全同意。交互这部分没问题，但鼠标可以做到眼到手到，用键盘我很难想象这一点。\n\n个人意见，非线性的操作鼠标就是有优势的，用键盘去替代不是不可能，但不必要，徒增脑力负担。\n\n此外，用过有惯性滚轮的鼠标（如罗技的）之后，真的就回不去了。不管是快速浏览网页，还是看代码，滚动的丝滑体验用键盘不可能做到。尤其是看网页和文档（Vim 里做不到），滚动距离是在像素级控制的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595826388,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1025003,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a3/eb/d26459ae.jpg","nickname":"时光勿念","note":"","ucode":"72C8EC5A62C700","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294439,"discussion_content":"眼到手到确实是无可匹敌的优势，但是使用鼠标至少要三步，\n第一找到鼠标，手从键盘移到鼠标上，\n第二找到光标，眼到手到\n第三找到键盘，手回到键盘合适的位置，\n两步物理移动可是要了老命了，键盘上下左右定位一番再操作，胳膊不用动 我可太香了 😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595894461,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"吴咏炜","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1025003,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a3/eb/d26459ae.jpg","nickname":"时光勿念","note":"","ucode":"72C8EC5A62C700","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294464,"discussion_content":"所以看你主要是在阅读还是在写代码。写代码用键盘当然有优势了。如果主要就是看（即使程序员，大部分的时间仍然是在看而不是写），那用鼠标没什么不好。进入写代码的状态后，那就脱离鼠标用键盘了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595899027,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":294439,"ip_address":""},"score":294464,"extra":""}]},{"author":{"id":1105161,"avatar":"https://static001.geekbang.org/account/avatar/00/10/dd/09/feca820a.jpg","nickname":"helloworld","note":"","ucode":"1EECCA0F43E278","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294183,"discussion_content":"chrome浏览器用户装一个vimium插件, 基本可以脱离鼠标操作浏览器, 体验很不错.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595821602,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}