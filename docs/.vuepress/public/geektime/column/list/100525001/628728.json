{"id":628728,"title":"02ï½œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼šä»0å¼€å§‹ä¸ºä¸€ä¸ªç‰¹æ€§è¦†ç›–è‡ªåŠ¨åŒ–æµ‹è¯•","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é»„ä¿Šå½¬ã€‚ä»Šå¤©æˆ‘ä»¬ä¸€èµ·æ¥å­¦ä¹ è‡ªåŠ¨åŒ–æµ‹è¯•çš„çŸ¥è¯†ï¼Œæˆ‘å°†é€šè¿‡ä¸€ä¸ªç¤ºä¾‹ç»™ä½ ç³»ç»Ÿä»‹ç»å„ç§è‡ªåŠ¨åŒ–æµ‹è¯•çš„åº”ç”¨åœºæ™¯ã€éœ€è¦ä½¿ç”¨çš„æ¡†æ¶ä»¥åŠå…·ä½“çš„ç”¨ä¾‹è®¾è®¡å’Œç¼–å†™ã€‚</p><p>æˆ‘ç›¸ä¿¡æ­¤æ—¶ä½ ä¼šæœ‰ä¸€äº›ç–‘é—®ï¼šæˆ‘ä¸ºä»€ä¹ˆè¦å­¦è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œå®ƒèƒ½ç»™æˆ‘å¸¦æ¥ä»€ä¹ˆå¸®åŠ©å‘¢ï¼Ÿåœ¨è¿‡å»å¾ˆå¤šçš„å’¨è¯¢é¡¹ç›®ä¸­ï¼Œæˆ‘å‘ç°è‡ªåŠ¨åŒ–æµ‹è¯•æ˜¯ä¸€ä¸ªå¾ˆå®¹æ˜“äº§ç”Ÿâ€œäº‰è®®â€çš„è¯é¢˜ï¼Œæˆ‘ä¹Ÿç»å¸¸ä¼šè¢«é—®åˆ°ä¸€äº›å¾ˆæœ‰æ„æ€çš„é—®é¢˜ã€‚</p><ul>\n<li>è‡ªåŠ¨åŒ–æµ‹è¯•ä¸æ˜¯åº”è¯¥ç”±æµ‹è¯•åŒå­¦æ¥ç¼–å†™å—ï¼Œæˆ‘ä½œä¸ºå¼€å‘æ²¡æœ‰å¿…è¦å­¦å§ï¼Ÿ</li>\n<li>ä¹‹å‰ä¸€ä¸ªè‡ªåŠ¨åŒ–æµ‹è¯•éƒ½æ²¡å†™è¿‡ï¼Œæ€ä¹ˆå¼€å§‹è½åœ°å‘¢ï¼Ÿ</li>\n<li>ç¼–å†™è‡ªåŠ¨åŒ–æµ‹è¯•ä»£ç æ„å‘³ç€è¦å†™æ›´å¤šçš„ä»£ç ï¼Œè¿™èƒ½å¸¦æ¥ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ</li>\n</ul><p>æ ¹æ®æˆ‘è¿‡å¾€çš„ç»éªŒï¼Œå¯¹è‡ªåŠ¨åŒ–æµ‹è¯•å­˜åœ¨ç±»ä¼¼ç–‘é—®çš„äººï¼Œå…¶å®å¾€å¾€æ˜¯é‚£äº›ä¸€ä¸ªæµ‹è¯•éƒ½æ²¡æœ‰å†™è¿‡çš„åŒå­¦ã€‚æ‰€ä»¥æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±é’ˆå¯¹ä¸€ä¸ªç‰¹æ€§ï¼Œä»0å¼€å§‹ä¸€æ­¥ä¸€æ­¥è¦†ç›–è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ å°†æ·±å…¥æ„Ÿå—åˆ°è‡ªåŠ¨åŒ–æµ‹è¯•çš„â€œé­…åŠ›â€ï¼ˆè¯¾ç¨‹çš„é…å¥—ä»£ç ï¼Œä½ å¯ä»¥ä»<a href=\"https://github.com/junbin1011/AutoTest\">è¿™é‡Œ</a>è·å–ï¼‰ã€‚</p><h2>ç¤ºä¾‹ä»‹ç»</h2><p>ä»Šå¤©è¿™ä¸ªç¤ºä¾‹æ˜¯ä¸€ä¸ªç™»å½•çš„åœºæ™¯ã€‚<strong>å½“ç”¨æˆ·åœ¨ç™»å½•é¡µé¢è¾“å…¥æ­£ç¡®çš„è´¦æˆ·å’Œå¯†ç æ—¶ï¼Œèƒ½æ­£å¸¸è·³è½¬åˆ°ç™»å½•ç•Œé¢ï¼Œå¦åˆ™æç¤ºç™»å½•å¤±è´¥çš„ä¿¡æ¯ã€‚</strong>ä¸‹é¢æ˜¯å…³é”®çš„ä»£ç ã€‚</p><ul>\n<li><strong>ç™»å½•é¡µé¢ä»£ç </strong></li>\n</ul><pre><code class=\"language-plain\">public class LoginActivity extends AppCompatActivity {\n    private LoginLogic loginLogic = new LoginLogic();\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_login);\n        final EditText usernameEditText = findViewById(R.id.username);\n        final EditText passwordEditText = findViewById(R.id.password);\n        final Button loginButton = findViewById(R.id.login);\n        loginButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                boolean success = loginLogic.login(LoginActivity.this,usernameEditText.getText().toString(),\n                        passwordEditText.getText().toString());\n                if (success) {\n                    //ç™»å½•æˆåŠŸè·³è½¬ä¸»ç•Œé¢\n                    startActivity(new Intent(LoginActivity.this, MainActivity.class));\n                } else {\n                    //ç™»å½•å¤±è´¥è¿›è¡Œæç¤º\n                    Toast.makeText(LoginActivity.this, \"login failed\", Toast.LENGTH_LONG).show();\n                }\n            }\n        });\n    }\n}\n</code></pre><!-- [[[read_end]]] --><ul>\n<li><strong>ç™»å½•é€»è¾‘ä»£ç </strong></li>\n</ul><pre><code class=\"language-plain\">public class LoginLogic {\n    public boolean login(Context context,String username, String password) {\n        if (!isUserNameValid(username) || !isPasswordValid(password)) {\n            return false;\n        } else {\n            //é€šè¿‡æœåŠ¡å™¨åˆ¤æ–­è´¦æˆ·åŠå¯†ç çš„æœ‰æ•ˆæ€§\n            boolean result = checkFromServer(username, password);\n            if (result) {\n                //ç™»å½•æˆåŠŸä¿æŒæœ¬åœ°çš„ä¿¡æ¯\n                SharedPreferencesUtils.put(context, username, password);\n            }\n            return result;\n        }\n    }\n    // ä¸ºäº†è¿›è¡Œæ¼”ç¤ºï¼Œå»é™¤é€šè¿‡æœåŠ¡å™¨é‰´å®šçš„é€»è¾‘ï¼Œå½“ç”¨æˆ·è¾“å…¥ç‰¹å®šè´¦å·åŠå¯†ç ä¸ºæ—¶åˆ™éªŒè¯æˆåŠŸ\n    private static boolean checkFromServer(String username, String password) {\n        if (username.equals(\"123@163.com\") &amp;&amp; password.equals(\"123456\")) {\n            return true;\n        }\n        return false;\n    }\n    private boolean isUserNameValid(String username) {\n        if (username == null) {\n            return false;\n        }\n        if (username.contains(\"@\")) {\n            return Patterns.EMAIL_ADDRESS.matcher(username).matches();\n        } else {\n            return !username.trim().isEmpty();\n        }\n    }\n    private boolean isPasswordValid(String password) {\n        return password != null &amp;&amp; password.trim().length() &gt; 5;\n    }\n}\n</code></pre><p>æ³¨æ„ï¼Œè¿™é‡Œä¸ºäº†ç®€åŒ–æ¼”ç¤ºï¼Œæˆ‘å°†éªŒè¯çš„é€»è¾‘å†™æ­»åœ¨æœ¬åœ°äº†ã€‚å¦å¤–ï¼Œè´¦æˆ·å¯†ç æœ‰ä¸¤ä¸ªæ ¸å¿ƒçš„éªŒè¯è§„åˆ™ã€‚</p><ul>\n<li>è´¦æˆ·ä¸èƒ½ä¸ºç©ºï¼Œéœ€è¦ç¬¦åˆé‚®ç®±è§„åˆ™ã€‚</li>\n<li>å¯†ç ä¸èƒ½ä¸ºç©ºï¼Œé•¿åº¦éœ€è¦è¶…è¿‡5ä¸ªå­—ç¬¦ã€‚</li>\n</ul><h2>æ­å»ºæµ‹è¯•ç¯å¢ƒ</h2><p>å½“æˆ‘ä»¬é€šè¿‡é»˜è®¤çš„ç¼–è¾‘å™¨åˆ›å»ºæ–°çš„é¡¹ç›®å·¥ç¨‹æ—¶ï¼Œç¼–è¾‘å™¨ä¼šè‡ªåŠ¨åˆ›å»ºå¥½æµ‹è¯•çš„è¿è¡Œé…ç½®ï¼Œä¸€èˆ¬æ— éœ€ä¿®æ”¹ã€‚å¦‚æœè¦å¢åŠ æµ‹è¯•æ¡†æ¶ï¼Œå°±æŠŠæµ‹è¯•æ¡†æ¶çš„Mavenåæ ‡æ·»åŠ åˆ°å¯¹åº”çš„dependenciesä¸­å³å¯ã€‚Gradleä¸­çš„æµ‹è¯•ç›¸å…³é…ç½®ä»£ç æ˜¯åé¢è¿™æ ·ã€‚</p><pre><code class=\"language-plain\">android{\n  defaultConfig {\n    testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n}\ndependencies {\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.3'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'\n}\n}\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨é»˜è®¤çš„/src/testæˆ–/src/androidTestç›®å½•ä¸‹ç¼–å†™ç”¨ä¾‹ã€‚<strong>æ³¨æ„ï¼Œtestç›®å½•çš„ç”¨ä¾‹è¿è¡Œä¸ä¾èµ–äºè®¾å¤‡ï¼ŒandroidTestç›®å½•ä¸‹çš„ç”¨ä¾‹è¿è¡Œéœ€è¦ä¾èµ–è®¾å¤‡ã€‚</strong></p><p><img src=\"https://static001.geekbang.org/resource/image/42/da/4262f51c833b6b65986a983f502b30da.jpg?wh=2989x2518\" alt=\"\"></p><p>ä¸€èˆ¬æ¥è¯´ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•åˆ†ä¸ºå°å‹ã€ä¸­å‹å’Œå¤§å‹ä¸‰ç§ï¼Œæ¥ä¸‹æ¥æˆ‘ä¼šå¸¦ä½ ä»å°å‹è‡ªåŠ¨åŒ–æµ‹è¯•å¼€å§‹ï¼Œé€ä¸ªçœ‹çœ‹è¿™ä¸‰ç§æµ‹è¯•æ€ä¹ˆè½åœ°ã€‚</p><h2>å°å‹è‡ªåŠ¨åŒ–æµ‹è¯•å®è·µ</h2><p>å°å‹æµ‹è¯•æ˜¯æŒ‡å•å…ƒæµ‹è¯•ï¼Œç”¨äºéªŒè¯åº”ç”¨çš„è¡Œä¸ºï¼Œä¸€æ¬¡éªŒè¯ä¸€ä¸ªç±»ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼ŒLoginLogicä¸»è¦æ‰¿æ‹…çš„æ˜¯ç™»å½•é€»è¾‘ï¼Œè¿™é‡Œæˆ‘å°±ä»¥è´¦æˆ·å¯†ç çš„éªŒè¯é€»è¾‘ä¸ºä¾‹ï¼Œç»™ä½ æ¼”ç¤ºä¸€ä¸‹å°å‹æµ‹è¯•çš„ç¼–å†™ï¼Œè¿™ä¸¤ä¸ªé€»è¾‘çš„ä¸»è¦è§„åˆ™æ˜¯è¿™æ ·ã€‚</p><ul>\n<li>è´¦æˆ·ä¸èƒ½ä¸ºç©ºï¼Œéœ€è¦ç¬¦åˆé‚®ç®±è§„åˆ™ã€‚</li>\n<li>å¯†ç ä¸èƒ½ä¸ºç©ºï¼Œé•¿åº¦éœ€è¦è¶…è¿‡5ä¸ªå­—ç¬¦ã€‚</li>\n</ul><p>æ¥ç€ï¼Œæˆ‘ä»¬è®¾è®¡å¯¹åº”çš„æµ‹è¯•ç”¨ä¾‹ã€‚æ³¨æ„ï¼Œç”¨ä¾‹çš„è®¾è®¡åº”è¯¥åŒ…å«æ­£å¸¸å’Œå¼‚å¸¸çš„éªŒè¯åœºæ™¯ï¼Œå…·ä½“çš„æµ‹è¯•åœºæ™¯æ˜¯åé¢è¿™æ ·ã€‚</p><ul>\n<li>è¾“å…¥å¤§äº6ä¸ªå­—ç¬¦é•¿åº¦çš„å¯†ç ï¼ŒéªŒè¯æˆåŠŸã€‚</li>\n<li>è¾“å…¥ä¸ºNullçš„å­—ç¬¦ï¼ŒéªŒè¯å¤±è´¥ã€‚</li>\n<li>è¾“å…¥å°äº5ä¸ªå­—ç¬¦é•¿åº¦çš„å¯†ç ï¼ŒéªŒè¯å¤±è´¥ã€‚</li>\n<li>è¾“å…¥ç­‰äº5ä¸ªå­—ç¬¦é•¿åº¦çš„å¯†ç ï¼ŒéªŒè¯å¤±è´¥ã€‚</li>\n</ul><p>ä¸‹é¢æˆ‘ä»¬æ–°å»ºä¸€ä¸ªLoginLogicTestçš„æµ‹è¯•ç±»ï¼ŒæŒ‰ç…§ä¸Šè¿°çš„æµ‹è¯•åœºæ™¯ç¼–å†™ç”¨ä¾‹ã€‚è¿™é‡Œæˆ‘ä¼šé‡‡ç”¨givenï¼ˆè¾“å…¥ï¼‰ã€whenï¼ˆæ‰§è¡Œï¼‰ã€thenï¼ˆç»“æœï¼‰çš„å½¢å¼ï¼Œè®©ç”¨ä¾‹æ›´åŠ ç»“æ„åŒ–ï¼Œä¾¿äºç†è§£å’Œç»´æŠ¤ã€‚å…·ä½“çš„æµ‹è¯•ç”¨ä¾‹ä»£ç å¦‚ä¸‹ã€‚</p><pre><code class=\"language-plain\">public class LoginLogicTest {\n    @Test\n    public void should_return_false_when_password_is_null() {\n        LoginLogic loginLogic = new LoginLogic();\n        String password = null;\n        boolean result = loginLogic.isPasswordValid(password);\n        Assert.assertFalse(result);\n    }\n    @Test\n    public void should_return_false_when_password_length_is_less_than_5() {\n        LoginLogic loginLogic = new LoginLogic();\n        String password = \"1234\";\n        boolean result = loginLogic.isPasswordValid(password);\n        Assert.assertFalse(result);\n    }\n    @Test\n    public void should_return_false_when_password_length_is_equal_5() {\n        LoginLogic loginLogic = new LoginLogic();\n        String password = \"12345\";\n        boolean result = loginLogic.isPasswordValid(password);\n        Assert.assertFalse(result);\n    }\n    @Test\n    public void should_return_true_when_password_length_greater_than_5() {\n        LoginLogic loginLogic = new LoginLogic();\n        String password = \"123456\";\n        boolean result = loginLogic.isPasswordValid(password);\n        Assert.assertTrue(result);\n    }\n}\n</code></pre><p>é€šè¿‡ç‚¹å‡»ç”¨ä¾‹æ—çš„è¿è¡Œç®­å¤´å¯ä»¥æ‰§è¡Œç”¨ä¾‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/7f/c8/7f7e270f722596962fc5be2a212604c8.jpg?wh=2847x1201\" alt=\"\"></p><p>è¿è¡Œå®Œå°±å¯ä»¥ç›´æ¥æŸ¥çœ‹è¿è¡Œç»“æœäº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ae/a9/ae7a4a5a6f422d9bfa698e022ca50ea9.jpg?wh=2847x1156\" alt=\"\"></p><p>å¯ä»¥çœ‹å‡ºå°å‹æµ‹è¯•çš„æ‰§è¡Œæ—¶é—´è¿˜æ˜¯æ¯”è¾ƒå¿«çš„ï¼Œ<strong>4ä¸ªç”¨ä¾‹æ€»å…±ç”¨äº†7 ms</strong>ã€‚</p><p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨å¦ä¸€ç§æ–¹å¼æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ï¼šä½¿ç”¨å‘½ä»¤è¡Œ./gradlew testï¼Œè¿è¡Œtestç›®å½•ä¸‹çš„æµ‹è¯•ç”¨ä¾‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a1/0e/a15767ca11fc5de1899b390fddyy650e.jpg?wh=2372x1463\" alt=\"\"></p><p>æ‰§è¡Œå®Œæµ‹è¯•åï¼Œæˆ‘ä»¬åœ¨/build/reports/testsä¸‹å¯ä»¥æŸ¥çœ‹åˆ°å¯¹åº”çš„æµ‹è¯•æŠ¥å‘Šï¼ŒæŠ¥å‘Šæˆªå›¾å¦‚ä¸‹æ‰€ç¤ºï¼Œä»ä¸­æˆ‘ä»¬èƒ½å¾—åˆ°æ¯ä¸ªç”¨ä¾‹å…·ä½“çš„æ‰§è¡Œæƒ…å†µå’Œæ‰§è¡Œæ—¶é—´ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/54/12/543336bf7fee5325552ef862ed693012.jpg?wh=2847x1708\" alt=\"\"></p><h2>ä¸­å‹è‡ªåŠ¨åŒ–æµ‹è¯•å®è·µ</h2><p>æ¥ä¸‹æ¥æ˜¯ä¸­å‹æµ‹è¯•ï¼Œ<strong>ä¸­å‹æµ‹è¯•æ˜¯æŒ‡é›†æˆæµ‹è¯•ï¼Œç”¨äºéªŒè¯æ¨¡å—å†…å †æ ˆçº§åˆ«ä¹‹é—´çš„äº’åŠ¨æˆ–ç›¸å…³æ¨¡å—ä¹‹é—´çš„äº’åŠ¨ã€‚</strong>å¸¸ç”¨çš„æµ‹è¯•æ¡†æ¶æœ‰ä¸¤ç§ï¼šRobolectricå’ŒEspressoã€‚</p><p>åœ¨ç™»å½•ç¤ºä¾‹ä¸­ï¼Œå½“LoginLogicçš„loginæ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œç¨‹åºä¸»é€»è¾‘é¦–å…ˆä¼šæ‰§è¡Œå¯¹è´¦æˆ·åå’Œå¯†ç çš„æ ¡éªŒï¼Œæ¥ç€é€šè¿‡æœåŠ¡å™¨å¯¹è´¦æˆ·å¯†ç çš„æœ‰æ•ˆæ€§åšæ ¡éªŒã€‚å½“ç™»å½•æˆåŠŸæ—¶ï¼Œç¨‹åºä¸»é€»è¾‘ä¼šé€šè¿‡SharedPreferencesä¿å­˜ç”¨æˆ·çš„ä¿¡æ¯ï¼Œå¹¶åœ¨æœ€åè¿”å›ç™»å½•çš„çŠ¶æ€ã€‚</p><p>ä»ç¤ºä¾‹ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼ŒLoginActivityç±»ä¸»è¦éƒ½æ˜¯UIçš„æ“ä½œï¼Œæ‰€ä»¥å¯¹è¯¥ç±»ä¸»è¦è¦†ç›–çš„æ˜¯UIç›¸å…³çš„æµ‹è¯•ï¼›å¯¹äºLoginLogicçš„ç±»æ ¸å¿ƒæ–¹æ³•ï¼Œloginä¸»è¦è´Ÿè´£æ•´ä½“çš„ä¸šåŠ¡éªŒè¯é€»è¾‘ã€‚ä¸‹é¢æˆ‘ä¼šä¾æ¬¡ä»‹ç»å¦‚ä½•é€šè¿‡Espressoå’ŒRobolectricå¯¹è¿™ä¸¤ä¸ªç±»è¿›è¡Œä¸­å‹è‡ªåŠ¨åŒ–æµ‹è¯•çš„è¦†ç›–ã€‚</p><h3>1.&nbsp;Espressoçš„ä½¿ç”¨</h3><p><a href=\"https://developer.android.com/training/testing/espresso\">Espresso</a> æ˜¯Googleå®˜æ–¹æä¾›çš„ç•Œé¢æµ‹è¯•æ¡†æ¶ï¼Œä½¿ç”¨ç®€æ´ä¸”å¯é ã€‚å®ƒå¯ä»¥å£°æ˜é¢„æœŸã€äº¤äº’å’Œæ–­è¨€ï¼Œä¸ç”¨ç›´æ¥è®¿é—®åº•å±‚åº”ç”¨çš„ Activity å’Œè§†å›¾ï¼Œå¯ä»¥é˜²æ­¢æµ‹è¯•ä¸ç¨³å®šï¼Œæé«˜æµ‹è¯•è¿è¡Œçš„é€Ÿåº¦ã€‚</p><p>æ ¹æ®ç”¨æˆ·UIä¸Šçš„ä¸»è¦æ“ä½œï¼Œæˆ‘ä»¬å°†è¦†ç›–ä»¥ä¸‹ä¸¤ä¸ªä¸»è¦çš„ä¸šåŠ¡åœºæ™¯ã€‚</p><ul>\n<li>ç”¨æˆ·è¾“å…¥æ­£ç¡®çš„ç”¨æˆ·åï¼ˆ123@163.comï¼‰å’Œå¯†ç ï¼ˆ123456ï¼‰ï¼Œç‚¹å‡»ç™»å½•æŒ‰é’®èƒ½æˆåŠŸè·³è½¬åˆ°ç™»å½•ç•Œé¢ã€‚</li>\n<li>ç”¨æˆ·è¾“å…¥é”™è¯¯çš„ç”¨æˆ·åï¼ˆ123ï¼‰å’Œå¯†ç ï¼ˆ456ï¼‰ï¼Œç‚¹å‡»ç™»å½•æŒ‰é’®æç¤ºç™»å½•å¤±è´¥çš„Toastã€‚</li>\n</ul><p>æ ¹æ®æµ‹è¯•åœºæ™¯ï¼Œæˆ‘ä»¬ä½¿ç”¨Espressoå¯¹LoginActivityè®¾è®¡çš„æµ‹è¯•ç”¨ä¾‹ä»£ç å¦‚ä¸‹ã€‚</p><pre><code class=\"language-plain\">&nbsp;public class LoginActivityTest {\n    @Test\n    public void should_start_main_activity_when_execute_login_given_valid_username_and_password() {\n        ActivityScenario.launch(LoginActivity.class);\n        onView(withId(R.id.username)).perform(typeText(\"123@163.com\"));\n        onView(withId(R.id.password)).perform(typeText(\"123456\"));\n        Intents.init();\n        onView(withId(R.id.login)).perform(click());\n        intended(allOf(\n                toPackage(\"com.jkb.junbin.autotestdemo\"),\n                hasComponent(hasClassName(MainActivity.class.getName()))));\n    }\n    @Test\n    public void should_show_failed_toast_when_execute_login_given_invalid_username_and_password() {\n        ActivityScenario&lt;LoginActivity&gt; launch = ActivityScenario.launch(LoginActivity.class);\n        onView(withId(R.id.username)).perform(typeText(\"123\"));\n        onView(withId(R.id.password)).perform(typeText(\"456\"));\n        onView(withId(R.id.login)).perform(click());\n        View decorView = null;\n        launch.onActivity(activity -&gt; {\n            activity.getWindow().getDecorView();\n        });\n        onView(withText(\"login failed\")).inRoot(withDecorView(not(decorView))).check(matches(isDisplayed()));\n    }\n}\n</code></pre><p>Espressoæä¾›çš„APIèƒ½æ–¹ä¾¿åœ°è¿›è¡Œå…ƒç´ çš„å®šä½ã€æ‰§è¡Œæ“ä½œå’Œæ–­è¨€ã€‚åœ¨ä¸Šè¿°ä¸¤ä¸ªç”¨ä¾‹ä¸­ï¼Œæˆ‘ä»¬ç”¨onViewå®šä½å…ƒç´ ï¼Œç”¨performæ‰§è¡Œæ“ä½œï¼Œç”¨checkè¿›è¡Œæ–­è¨€ã€‚å¦‚æœä½ æƒ³äº†è§£Espressoæ›´å¤šçš„æ“ä½œAPIï¼Œå¯ä»¥å‚è€ƒ<a href=\"https://developer.android.google.cn/training/testing/espresso?hl=zh_cn\">å®˜ç½‘çš„ä»‹ç»</a>ã€‚</p><p>æ‰§è¡Œå®Œä¸Šè¿°ç”¨ä¾‹åï¼Œè¿è¡Œç»“æœæ˜¯ä¸‹å›¾è¿™æ ·ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/5b/2b/5bdd080c31ff5bf8c98fa503fa423e2b.jpg?wh=2847x1477\" alt=\"\"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸¤ä¸ªæµ‹è¯•ç”¨ä¾‹åœ¨æ¨¡æ‹Ÿå™¨ä¸­æ•´ä½“çš„è¿è¡Œæ—¶é—´åœ¨5så·¦å³ã€‚ç›¸æ¯”å°å‹æµ‹è¯•ï¼Œä¸­å‹æµ‹è¯•è€—æ—¶ä¼šæ›´é•¿ã€‚å¹¶ä¸”ç”¨ä¾‹è¿è¡Œéœ€è¦ä¾èµ–è®¾å¤‡ï¼Œè¿™è®©è¿è¡Œæµ‹è¯•çš„æˆæœ¬æ›´é«˜ã€‚ç”¨ä¾‹çš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e5/5a/e5e4d31fc367b44c977263aeba738d5a.gif?wh=1080x2220\" alt=\"å›¾ç‰‡\"></p><h3>2.&nbsp;Robolectricçš„ä½¿ç”¨</h3><p><a href=\"http://robolectric.org/\">Robolectric</a> æ¡†æ¶èƒ½ä¸ºAndroidå¸¦æ¥å¿«é€Ÿå¯é çš„æµ‹è¯•ã€‚å…·ä½“æ¥è¯´ï¼Œä¾èµ–è¯¥æ¡†æ¶çš„æµ‹è¯•ç”¨ä¾‹æ— é¡»åœ¨çœŸæœºæˆ–è€…æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œï¼Œåœ¨æœ¬åœ°å·¥ä½œç«™ä¸Šçš„ JVM å†…å®Œæˆè¿è¡Œå³å¯ï¼Œä¸€èˆ¬åªéœ€è¦å‡ ç§’ã€‚</p><p>ä¸‹é¢ä»¥LoginLogicçš„loginæ–¹æ³•ä¸ºä¾‹ï¼Œæˆ‘ç»™ä½ ä»‹ç»ä¸€ä¸‹Robolectricçš„ä½¿ç”¨ã€‚è¿™é‡Œæˆ‘ä»¬éœ€è¦è¦†ç›–ä¸‹é¢ä¸‰ä¸ªä¸»è¦çš„ä¸šåŠ¡åœºæ™¯ã€‚</p><ul>\n<li>ä¼ å…¥ç©ºçš„å­—ç¬¦ä¸²æˆ–è€…å¯†ç ï¼Œè¿”å›å¤±è´¥ã€‚</li>\n<li>ä¼ å…¥é”™è¯¯çš„è´¦æˆ·åŠå¯†ç ï¼Œè¿”å›å¤±è´¥ã€‚</li>\n<li>ä¼ å…¥æ­£ç¡®çš„è´¦æˆ·åŠå¯†ç ï¼Œè¿”å›æˆåŠŸï¼Œå¹¶ä¸”è¿›è¡Œæ•°æ®ç¼“å­˜ã€‚</li>\n</ul><p>åé¢æ˜¯æµ‹è¯•ç”¨ä¾‹çš„ä»£ç ã€‚</p><pre><code class=\"language-plain\">@RunWith(RobolectricTestRunner.class)\npublic class LoginLoginMediumTest {\n    private final Context mContext = InstrumentationRegistry.getInstrumentation().getContext();\n    @Test\n    public void should_return_false_when_given_invalid_username_or_password() {\n        LoginLogic loginLogic = new LoginLogic();\n        boolean nullUserNameResult = loginLogic.login(mContext, null, \"123\");\n        Assert.assertFalse(nullUserNameResult);\n        boolean nullPasswordResult = loginLogic.login(mContext, \"123\", null);\n        Assert.assertFalse(nullPasswordResult);\n    }\n    @Test\n    public void should_return_false_when_given_error_username_and_password() {\n        //éªŒè¯é”™è¯¯çš„è´¦æˆ·åŠå¯†ç \n        boolean result = new LoginLogic().login(mContext, \"123\", \"456\");\n        Assert.assertFalse(result);\n    }\n    @Test\n    public void should_return_true_when_given_correct_username_and_password() {\n        String username = \"123@163.com\";\n        String password = \"123456\";\n        //éªŒè¯æ­£ç¡®çš„è´¦æˆ·åŠå¯†ç \n        boolean result = new LoginLogic().login(mContext, username, password);\n        Assert.assertTrue(result);\n        //éªŒè¯å­˜åœ¨ç¼“å­˜ä¿¡æ¯\n        String cachePassword = (String) SharedPreferencesUtils.get(mContext, username, \"\");\n        Assert.assertEquals(password, cachePassword);\n    }\n}\n</code></pre><p>å…³äºRobolectricçš„APIï¼Œä½ å¯ä»¥å‚è€ƒ<a href=\"http://robolectric.org/\">å®˜ç½‘çš„ä»‹ç»</a>ï¼Œè¿™é‡Œä½ äº†è§£ä¸€ä¸‹å³å¯ï¼Œæˆ‘ä¼šåœ¨åç»­çš„è§£è€¦é‡æ„ç¯‡ä¸­è¿›ä¸€æ­¥ä»‹ç»Robolectricçš„æ›´å¤šç”¨æ³•ã€‚</p><p>æ‰§è¡Œä¸Šè¿°æµ‹è¯•ç”¨ä¾‹åï¼Œè¿è¡Œç»“æœå¦‚ä¸‹å›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/2f/d0/2f4911cd5f9485582acbb81cdb376cd0.jpg?wh=2847x1508\" alt=\"\"></p><p>ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œç”¨Robolectricæ¡†æ¶è¿›è¡Œæµ‹è¯•ï¼Œç”¨ä¾‹çš„æ‰§è¡Œæ—¶é—´åœ¨æ¯«ç§’åˆ°ç§’ä¹‹é—´ã€‚å…¶ä¸­ç¬¬äºŒä¸ªç”¨ä¾‹çš„æ‰§è¡Œè€—æ—¶è¶…è¿‡2sï¼Œæ˜¯å› ä¸ºå¯åŠ¨Robolectricæ¡†æ¶éœ€è¦ä¸€å®šçš„æ—¶é—´ã€‚åŒæ—¶æˆ‘ä»¬ä¹Ÿèƒ½ä½“ä¼šåˆ°Robolectricçš„æ ¸å¿ƒä¼˜åŠ¿ï¼šæ— é¡»ä¾èµ–è®¾å¤‡ï¼Œå¯ä»¥å¿«é€Ÿåœ¨æœ¬åœ°çš„JVMè¿›è¡ŒéªŒè¯ï¼Œå¾—åˆ°å¿«é€Ÿçš„åé¦ˆã€‚</p><h2>å¤§å‹è‡ªåŠ¨åŒ–æµ‹è¯•å®è·µ</h2><p>æœ€åæˆ‘ä»¬æ¥è¿›è¡Œå¤§å‹æµ‹è¯•ã€‚<strong>å¤§å‹æµ‹è¯•æ˜¯æŒ‡ç«¯åˆ°ç«¯æµ‹è¯•ï¼Œç”¨äºéªŒè¯è·¨è¶Šäº†åº”ç”¨çš„å¤šä¸ªæ¨¡å—çš„ç”¨æˆ·æ“ä½œæµç¨‹ã€‚</strong>å‰é¢ä»‹ç»çš„Espressoå’ŒRobolectricä¸»è¦æ˜¯é’ˆå¯¹å•ä¸ªé¡µé¢çš„æµ‹è¯•åœºæ™¯ï¼Œåœ¨å®é™…çš„åº”ç”¨ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œè¿˜æœ‰æ¶‰åŠè·¨åº”ç”¨å’Œç³»ç»ŸUIäº¤äº’çš„åœºæ™¯ã€‚</p><p>é€šå¸¸æˆ‘ä»¬ä¼šç”¨UI Automatorå®Œæˆå¤§å‹æµ‹è¯•ã€‚<a href=\"https://developer.android.com/training/testing/ui-automator?hl=zh_cn\">UI Automator</a> æ˜¯ä¸€ä¸ªç•Œé¢æµ‹è¯•æ¡†æ¶ï¼Œé€‚ç”¨äºæ•´ä¸ªç³»ç»Ÿå’Œå¤šä¸ªå·²å®‰è£…åº”ç”¨é—´çš„è·¨åº”ç”¨åŠŸèƒ½ç•Œé¢æµ‹è¯•ã€‚å®ƒæä¾›äº†ä¸€ç»„ APIï¼Œç”¨äºæ„å»ºåœ¨ç”¨æˆ·åº”ç”¨å’Œç³»ç»Ÿåº”ç”¨ä¸Šæ‰§è¡Œäº¤äº’çš„ç•Œé¢æµ‹è¯•ã€‚</p><p>é€šè¿‡ UI Automator APIï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æµ‹è¯•è®¾å¤‡ä¸­æ‰§è¡Œæ‰“å¼€â€œè®¾ç½®â€èœå•æˆ–åº”ç”¨å¯åŠ¨å™¨ç­‰æ“ä½œã€‚ç›¸æ¯”Espressoå’ŒRobolectricç¼–å†™çš„ç™½ç›’æµ‹è¯•ç”¨ä¾‹ï¼Œ<strong>UI Automator æµ‹è¯•æ¡†æ¶éå¸¸é€‚åˆç¼–å†™é»‘ç›’å¼è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œæ­¤ç±»æµ‹è¯•çš„æµ‹è¯•ä»£ç ä¸ä¾èµ–äºç›®æ ‡åº”ç”¨çš„å†…éƒ¨å®ç°ç»†èŠ‚ã€‚</strong></p><p>ä¸‹é¢æˆ‘ä»¬ç»§ç»­å¯¹ç™»å½•ç¤ºä¾‹è¿›è¡Œå®Œæ•´çš„åŠŸèƒ½æµ‹è¯•ã€‚å®Œæ•´çš„ç”¨æˆ·æµ‹è¯•åœºæ™¯æ˜¯è¿™æ ·çš„ï¼šç”¨æˆ·åœ¨æ‰‹æœºçš„ä»»æ„ç•Œé¢ï¼Œè¿”å›æ¡Œé¢å¯åŠ¨æµ‹è¯•çš„åº”ç”¨ç™»å½•ç•Œé¢ï¼Œç„¶åè¾“å…¥æ­£ç¡®çš„ç”¨æˆ·åå’Œå¯†ç ï¼ŒæˆåŠŸè·³è½¬åˆ°ä¸»ç•Œé¢ï¼ŒéªŒè¯ä¸»ç•Œé¢ä¸Šæ˜¾ç¤ºçš„ç”¨æˆ·ä¿¡æ¯æ˜¯å¦æ­£ç¡®ã€‚</p><p>è¿™ä¸ªç”¨æˆ·åœºæ™¯ä¼šæ¶‰åŠåˆ°å¤šä¸ªåº”ç”¨ï¼Œå…¶ä¸­åŒ…æ‹¬äº†æ¡Œé¢å’Œç›®æ ‡æµ‹è¯•åº”ç”¨ã€‚å¦å¤–ï¼Œåº”ç”¨å†…è¿˜ä¼šæ¶‰åŠåˆ°å¤šä¸ªé¡µé¢ï¼Œä¸»è¦æ˜¯ç™»å½•ç•Œé¢å’Œä¸»ç•Œé¢ã€‚ç°åœ¨æˆ‘ä»¬ä½¿ç”¨UI Automatoræ¡†æ¶è¿›è¡Œæµ‹è¯•ï¼Œç”¨ä¾‹ä»£ç æ˜¯è¿™æ ·ã€‚</p><pre><code class=\"language-plain\">@RunWith(AndroidJUnit4.class)\npublic class SmellTest {\n    private static final String BASIC_SAMPLE_PACKAGE\n            = \"com.example.sample\";\n    private static final int LAUNCH_TIMEOUT = 5000;\n    private UiDevice mDevice;\n    @Before\n    public void startActivityFromHomeScreen() {\n        // åˆå§‹åŒ–UiDevice\n        mDevice = UiDevice.getInstance(InstrumentationRegistry.getInstrumentation());\n        // å›åˆ°ä¸»ç•Œé¢\n        mDevice.pressHome();\n        // ç­‰å¾…launcher\n        final String launcherPackage = mDevice.getLauncherPackageName();\n        assertThat(launcherPackage, notNullValue());\n        mDevice.wait(Until.hasObject(By.pkg(launcherPackage).depth(0)),\n                LAUNCH_TIMEOUT);\n        // å¯åŠ¨ç›®æ ‡APP\n        Context context = ApplicationProvider.getApplicationContext();\n        final Intent intent = context.getPackageManager()\n                .getLaunchIntentForPackage(BASIC_SAMPLE_PACKAGE);\n        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK);\n        context.startActivity(intent);\n        // ç­‰å¾…åº”ç”¨å¯åŠ¨\n        mDevice.wait(Until.hasObject(By.pkg(BASIC_SAMPLE_PACKAGE).depth(0)),\n                LAUNCH_TIMEOUT);\n    }\n    //è´¦æˆ·å¯†ç ç™»å½•æˆåŠŸåä¸»ç•Œé¢æ˜¾ç¤ºç”¨æˆ·å\n    @Test\n    public void should_show_username_in_main_activity_when_login_success() {\n        //è¾“å…¥è´¦æˆ·å\n        mDevice.findObject(By.res(BASIC_SAMPLE_PACKAGE, \"username\"))\n                .setText(\"123\");\n        //è¾“å…¥å¯†ç \n        mDevice.findObject(By.res(BASIC_SAMPLE_PACKAGE, \"password\"))\n                .setText(\"123\");\n        //ç‚¹å‡»ç™»å½•\n        mDevice.findObject(By.res(BASIC_SAMPLE_PACKAGE, \"login\"))\n                .click();\n        //éªŒè¯ä¸»ç•Œé¢ä¸Šæ˜¾ç¤ºç”¨æˆ·åä¿¡æ¯\n        UiObject2 text = mDevice\n                .wait(Until.findObject(By.res(BASIC_SAMPLE_PACKAGE, \"text\")),\n                        500);\n        assertEquals(text.getText(), \"123\");\n    }\n}\n</code></pre><p>UI Automator æµ‹è¯•æ¡†æ¶æä¾›äº†ä¸€ä¸ª UiDevice ç±»ï¼Œç”¨äºåœ¨è¿è¡Œç›®æ ‡åº”ç”¨çš„è®¾å¤‡ä¸Šè®¿é—®å’Œæ‰§è¡Œæ“ä½œã€‚é€šè¿‡è°ƒç”¨findObjectæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å®šä½åˆ°å…ƒç´ å’Œæ‰§è¡Œæ“ä½œã€‚å…³äº UI Automatoræ›´å¤šçš„APIä½¿ç”¨ï¼Œä½ å¯ä»¥å‚è€ƒ<a href=\"https://developer.android.google.cn/training/testing/ui-automator\">å®˜ç½‘æ–‡æ¡£</a> ã€‚<br>\næ‰§è¡Œä¸Šè¿°æµ‹è¯•ç”¨ä¾‹åï¼Œè¿è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e9/30/e9e699b8299a681f61f0deed28098f30.jpg?wh=2847x1106\" alt=\"\"></p><p>ä¸‹é¢è¿™ä¸ªåŠ¨å›¾å±•ç¤ºäº†ç”¨ä¾‹çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œä½ å¯ä»¥å¯¹æ¯”ä¸€ä¸‹ï¼Œè¿™ä¸ªè¿‡ç¨‹å¦‚æœç”¨æ‰‹å·¥æ‰§è¡Œéœ€è¦å¤šä¹…ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f0/75/f09f45cf7ddf87cc50ccd25bf3f26675.gif?wh=1080x2220\" alt=\"å›¾ç‰‡\"></p><p>é€šè¿‡æ‰§è¡Œç»“æœå¯çŸ¥ï¼Œè¯¥ç”¨ä¾‹çš„æ‰§è¡Œæ—¶é—´å®é™…ä¸º9sï¼Œæ¯”ä¸­å°å‹æµ‹è¯•çš„æ‰§è¡Œæ—¶é—´æ›´é•¿ï¼Œå¹¶ä¸”éœ€è¦ä¾èµ–çœŸæœºæˆ–æ¨¡æ‹Ÿå™¨ã€‚ä¸è¿‡ï¼Œè¯¥ç”¨ä¾‹åŸºæœ¬éƒ½æ˜¯æ¨¡æ‹Ÿç”¨æˆ·å¯¹ç•Œé¢çš„ç‚¹å‡»æ“ä½œï¼Œæ›´è´´è¿‘å®é™…ç”¨æˆ·çš„çœŸå®ä½¿ç”¨åœºæ™¯ã€‚</p><h2>æ€»ç»“</h2><p>ä»Šå¤©æˆ‘å¸¦ä½ å¯¹ä¸€ä¸ªç™»å½•ç¤ºä¾‹è¿›è¡Œäº†å°ã€ä¸­ã€å¤§ä¸‰ç§ç±»å‹çš„è‡ªåŠ¨åŒ–æµ‹è¯•è¦†ç›–ã€‚å°å‹æµ‹è¯•èƒ½å¤Ÿå¿«é€Ÿå¸®æˆ‘ä»¬éªŒè¯ä»£ç ä¸­çš„æ ¸å¿ƒé€»è¾‘å’Œç®—æ³•ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨çš„æ˜¯Junitæˆ–è€…Robolectricç­‰æµ‹è¯•æ¡†æ¶ï¼›ä¸­å‹æµ‹è¯•èƒ½å¤Ÿå¸®æˆ‘ä»¬éªŒè¯ä»£ç ä¸­çš„ä¸€äº›æ ¸å¿ƒç»„ä»¶äº¤äº’æµç¨‹ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šç”¨Espressoæˆ–è€…Robolectricç­‰æ¡†æ¶æ¥å®Œæˆï¼›å¤§å‹æµ‹è¯•åˆ™èƒ½å¸®æˆ‘ä»¬éªŒè¯ç«¯åˆ°ç«¯çš„ç”¨æˆ·ä½¿ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨çš„æ˜¯UIAutomatoræˆ–è€…Appiumç­‰æ¡†æ¶ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/fb/20/fbb4d36d122917ab2301d70962c1aa20.jpg?wh=2847x1508\" alt=\"\"></p><p>ç°åœ¨è®©æˆ‘ä»¬å†é‡æ–°æ€è€ƒä¸€ä¸‹è¿™èŠ‚è¯¾å¼€å¤´çš„ä¸‰ä¸ªé—®é¢˜ã€‚</p><p>ç¬¬ä¸€ä¸ªæ˜¯æµ‹è¯•ç”±è°æ¥å†™çš„é—®é¢˜ã€‚é€šè¿‡è¿™èŠ‚è¯¾çš„æ¼”ç¤ºï¼Œæˆ‘æƒ³ä½ åº”è¯¥å‘ç°äº†ï¼Œä¸­å°å‹çš„æµ‹è¯•å¤§éƒ¨åˆ†éƒ½æ˜¯æ ¹æ®ä»£ç è®¾è®¡æ¥ç¼–å†™çš„ã€‚ç¼–å†™è€…éœ€è¦äº†è§£åŸæ¥ä»£ç çš„è®¾è®¡ï¼Œç²¾ç¡®åˆ°å„ä¸ªæ–¹æ³•ä»¥åŠæ–¹æ³•å†…éƒ¨çš„æ¡ä»¶åˆ†æ”¯å’Œå¼‚å¸¸å¤„ç†ã€‚æ‰€ä»¥ï¼Œä¸­å°å‹æµ‹è¯•åº”è¯¥ç”±å¼€å‘äººå‘˜æ¥ç¼–å†™ã€‚</p><p>å¦å¤–ï¼Œæˆ‘ä¹Ÿé¼“åŠ±å¼€å‘äººå‘˜å‚ä¸åˆ°å¤§å‹ç«¯åˆ°ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„ç¼–å†™ä¸­ã€‚å› ä¸ºåªæœ‰å¼€å‘ä»£ç å’Œæµ‹è¯•ä»£ç ä¸€èµ·å…±åŒç»´æŠ¤ï¼Œæˆæœ¬æ‰æ˜¯æœ€ä½çš„ã€‚</p><p>ç¬¬äºŒä¸ªé—®é¢˜æ˜¯ï¼šä¹‹å‰ä¸€ä¸ªè‡ªåŠ¨åŒ–æµ‹è¯•éƒ½æ²¡å†™è¿‡ï¼Œæ€ä¹ˆå¼€å§‹è½åœ°ï¼Ÿè¿™èŠ‚è¯¾æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç‰¹æ€§ä»‹ç»äº†å¦‚ä½•ä»0å»è¦†ç›–å°ã€ä¸­ã€å¤§å‹çš„è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œç›¸ä¿¡ä½ å·²ç»ä½“ä¼šåˆ°ï¼Œå¯¹äºå¼€å‘äººå‘˜æ¥è¯´ï¼Œç¼–å†™è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹çš„éš¾åº¦å…¶å®æ¯”åŠŸèƒ½å¼€å‘è®¾è®¡è¿˜ç®€å•ã€‚</p><p>ç¬¬ä¸‰ä¸ªé—®é¢˜æ˜¯å…³äºè‡ªåŠ¨åŒ–æµ‹è¯•ä»·å€¼çš„é—®é¢˜ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªå‰æï¼šæˆ‘ä¸è®¤ä¸ºå¼€å‘å®Œä»£ç å°±æ„å‘³ç€ç»“æŸï¼Œç»“æŸåº”è¯¥æ˜¯åœ¨æœ‰è¶³å¤Ÿçš„è´¨é‡ä¿è¯çš„å‰æä¸‹ã€‚æ‰€ä»¥ï¼Œ<strong>è‡ªåŠ¨åŒ–æµ‹è¯•æ˜¯åº”ç”¨å¼€å‘è¿‡ç¨‹ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚é€šè¿‡æŒç»­è¿è¡Œæµ‹è¯•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‘å¸ƒç‰ˆæœ¬ä¹‹å‰éªŒè¯å…¶æ­£ç¡®æ€§ã€åŠŸèƒ½è¡Œä¸ºå’Œæ˜“ç”¨æ€§ã€‚</strong></p><p>å…·ä½“æ¥è®²ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•ç»™å¼€å‘åŒå­¦å¸¦æ¥çš„å¸®åŠ©æœ‰è¿™æ ·ä¸‰ç‚¹ã€‚</p><p>1.è‡ªåŠ¨åŒ–æµ‹è¯•èƒ½æä¾›å¤šæ ·åŒ–çš„ç¼–è¯‘è°ƒè¯•ã€‚é€šå¸¸æµ‹è¯•çš„è¿è¡Œæ—¶é—´åœ¨æ¯«ç§’è‡³ç§’ä¹‹é—´ï¼Œæœ‰åŠ©äºæé«˜æˆ‘ä»¬ç¼–è¯‘è°ƒè¯•çš„æ•ˆç‡ã€‚</p><p>2.è‡ªåŠ¨åŒ–æµ‹è¯•èƒ½åŠ å¼ºå¼€å‘ä»£ç è‡ªæµ‹ï¼Œå¸®æˆ‘ä»¬å¿«é€Ÿè·å¾—æ•…éšœåé¦ˆã€‚é€šå¸¸æˆ‘ä»¬åœ¨æœ¬åœ°ç¼–å†™å®Œä»£ç åï¼Œå°±å¯ä»¥é©¬ä¸Šè¿è¡Œæµ‹è¯•ï¼Œæ£€æŸ¥åŠŸèƒ½æ˜¯å¦æ­£ç¡®ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯èƒ½åœ¨å¼€å‘æ—©æœŸå°½æ—©å‘ç°é—®é¢˜ã€‚</p><p>3.è‡ªåŠ¨åŒ–æµ‹è¯•è¿˜èƒ½æä¾›æ›´å®‰å…¨çš„ä»£ç é‡æ„ï¼Œå½“æœ‰äº†è‡ªåŠ¨åŒ–æµ‹è¯•è¿™ä¸ªå®‰å…¨å®ˆæŠ¤ç½‘ï¼Œæˆ‘ä»¬å¯ä»¥æ”¾å¿ƒåœ°ä¼˜åŒ–ä»£ç ï¼Œä¸å¿…æ‹…å¿ƒå¼•å‘æ–°çš„é—®é¢˜ï¼Œä¹Ÿå¯ä»¥å°½å¯èƒ½é¿å…å…¶ä»–äººä¹±æ”¹ä»£ç ç ´ååŸæœ‰çš„é€»è¾‘ã€‚å› ä¸ºä¸€æ—¦æœ‰ä¿®æ”¹ç ´åäº†ä¹‹å‰çš„è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ï¼ŒCIé—¨ç¦å°±ä¼šç«‹å³æ£€æŸ¥å‡ºæ¥ï¼Œé¿å…ä»£ç åˆå…¥ã€‚</p><p>è™½ç„¶è‡ªåŠ¨åŒ–æµ‹è¯•å¯ä»¥å¸®æˆ‘ä»¬æå‡å¼€å‘çš„æ•ˆç‡å’Œè´¨é‡ï¼Œä½†å¯¹äºé—ç•™ç³»ç»Ÿæ¥è¯´ï¼Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªéå¸¸æ£˜æ‰‹çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯ä»£ç å¯æµ‹è¯•æ€§ä½ã€‚ä¸‹èŠ‚è¯¾æˆ‘å°†ä¸ºä½ æ­æ™“å¦‚ä½•æé«˜é—ç•™ç³»ç»Ÿçš„ä»£ç å¯æµ‹è¯•æ€§ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æ„Ÿè°¢ä½ å­¦å®Œäº†ä»Šå¤©çš„å†…å®¹ï¼Œä»Šå¤©çš„æ€è€ƒé¢˜æ˜¯è¿™æ ·çš„ï¼šåœ¨ç™»å½•ç¤ºä¾‹ä¸­ï¼ŒéªŒè¯é‚®ç®±çš„é€»è¾‘å¹¶æ²¡æœ‰è¦†ç›–è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œå¦‚æœæ˜¯ä½ ï¼Œä½ ä¼šæ€ä¹ˆæ¥è®¾è®¡è¿™ä¸ªæµ‹è¯•ç”¨ä¾‹å‘¢ï¼ŸShow me your codeã€‚</p><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºä¸æˆ‘äº¤æµè®¨è®ºï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠå®ƒåˆ†äº«ç»™ä½ çš„åŒäº‹æˆ–æœ‹å‹ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥é«˜æ•ˆã€é«˜è´¨é‡äº¤ä»˜è½¯ä»¶ï¼</p>","neighbors":{"left":{"article_title":"01ï½œåˆè¯†é‡æ„ï¼šé‡æ„çš„ç±»å‹ã€æ”¶ç›Šå’Œåº¦é‡","id":628675},"right":{"article_title":"03ï½œæµ‹è¯•è½åœ°ï¼šä¸‰æ‹›æé«˜é—ç•™ç³»ç»Ÿä»£ç çš„å¯æµ‹è¯•æ€§","id":629322}},"comments":[{"had_liked":false,"id":368452,"user_name":"peter","can_delete":false,"product_type":"c1","uid":1058183,"ip_address":"åŒ—äº¬","ucode":"261C3FC001DE2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg","comment_is_top":false,"comment_ctime":1676354470,"is_pvip":false,"replies":[{"id":134199,"content":"peterï¼Œä½ å¥½ã€‚éå¸¸å¼€å¿ƒæ”¶åˆ°ä½ çš„ç•™è¨€ï¼Œçœ‹äº†ä½ æ€»ç»“çš„é—®é¢˜ï¼Œå°±çŸ¥é“ä½ éå¸¸è®¤çœŸåœ°å­¦ä¹ å®Œæˆäº†å‰é¢å‡ ç« çš„å†…å®¹ã€‚ä¸‹é¢æˆ‘å°è¯•æ¥å›ç­”ä¸€ä¸‹ä½ æåˆ°çš„6ä¸ªé—®é¢˜å“ˆã€‚ \nQ1ï¼šButterKnifeç°åœ¨æˆ‘ç”¨çš„ä¹Ÿæ¯”è¾ƒå°‘äº†ï¼Œæ˜¯å¦è€ƒè™‘ç›´æ¥ç”¨Kotlinï¼Ÿ\nQ2: è¿™è¾¹çš„ç‰ˆæœ¬ç®¡ç†ä¸»è¦æ˜¯æŒ‡äºŒè¿›åˆ¶çš„ç‰ˆæœ¬ç®¡ç†ã€‚ä¾‹å¦‚jaræˆ–è€…aarçš„ç‰ˆæœ¬ï¼Œä¸åˆ†æ”¯ä¸æ˜¯ä¸€ä¸ªæ¦‚å¿µã€‚\nQ3ï¼šæ•…äº‹ä¸æ˜¯ç¬”è¯¯ï¼Œæ•…äº‹æ˜¯æ•æ·å¼€å‘ä¸­å¸¸ç”¨çš„æœ¯è¯­ï¼Œä¾‹å¦‚ç”¨æˆ·æ•…äº‹ï¼ˆéœ€æ±‚ï¼‰ã€‚\nQ4ï¼šæ˜¯çš„ã€‚\nQ5ï¼šç›®å‰æˆ‘çœ‹åˆ°åŸºæœ¬éƒ½æ˜¯ç”¨ASï¼Œæˆ‘ç°åœ¨ç”¨çš„æ˜¯Android Studio Electric Eel | 2022.1.1\nQ6: AutoTestæ˜¯é¡¹ç›®çš„åç§°ï¼Œè¿›å…¥é¡¹ç›®çš„æ ¹ç›®å½•ç›´æ¥æ‰§è¡Œ.&#47;gradlew test ï¼ˆmacç³»ç»Ÿï¼‰ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥åœ¨gradleçš„çª—å£ä¸­åŒå‡»testçš„taskã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":1179206,"ctime":1676383959,"ip_address":"ä¸Šæµ·","comment_id":368452,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100525001,"comment_content":"ä»Šå¤©åˆšçœ‹åˆ°è¿™ä¸ªè¯¾ç¨‹ï¼Œé©¬ä¸Šè´­ä¹°äº†ï¼Œä¸€å£æ°”è¯»åˆ°äº†è¿™é‡Œï¼Œæ¯ä¸€è¯¾éƒ½æœ‰é—®é¢˜ï¼Œé›†ä¸­åœ¨è¿™é‡Œæé—®ã€‚\nè€å¸ˆçš„è¯¾å¾ˆä¸é”™ã€‚\nQ1ï¼šé«˜ç‰ˆæœ¬ä¸æ”¯æŒButterKnifeå—ï¼Ÿ\næˆ‘ç”¨AS3.5åˆ›å»ºäº†ä¸€ä¸ªé¡¹ç›®ï¼ŒAPIç‰ˆæœ¬æ˜¯32ï¼Œå¼•ç”¨äº†ButterKnifeï¼Œç»“æœæŠ¥é”™ï¼Œç½‘ä¸Šæœç´¢ååœ¨build.gradleä¸­æŒ‡å®šäº†ç”¨Java8æ¥ç¼–è¯‘ï¼Œä½†è¿˜æ˜¯æŠ¥é”™ï¼Œè€Œä¸”é”™è¯¯åŸå› éš¾ä»¥ç†è§£ã€‚åæ¥æŠŠç‰ˆæœ¬é™ä½åˆ°28ï¼Œå°±å¯ä»¥äº†ã€‚è¯·é—®ï¼Œ28ä»¥ä¸Šçš„é«˜ç‰ˆæœ¬ä¸æ”¯æŒButterKnifeäº†å—ï¼Ÿï¼ˆæ³¨ï¼šç¬¬ä¸€æ¬¡åŠ å…¥çš„æ˜¯ï¼šcompileOptions {sourceCompatibility JavaVersion.VERSION_1_8  targetCompatibility JavaVersion.VERSION_1_8}ï¼‰\nQ2ï¼šç‰ˆæœ¬ç®¡ç†å’Œåˆ†æ”¯ç®¡ç†æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\nâ€œå·¥ç¨‹åŒ–â€éƒ¨åˆ†ï¼Œæœ‰ä¸¤ä¸ªå­é¡¹â€œç‰ˆæœ¬ç®¡ç†â€å’Œâ€œåˆ†æ”¯ç®¡ç†â€ï¼Œæˆ‘å°è±¡ä¸­ç‰ˆæœ¬ç®¡ç†åŒ…æ‹¬åˆ†æ”¯ç®¡ç†å•Šï¼Œç°åœ¨åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\nQ3ï¼šâ€œæ•…äº‹â€æ˜¯ç¬”è¯¯å—ï¼Ÿ\nç¬¬01è¯¾ä¸­å¤šæ¬¡ç”¨åˆ°â€œæ•…äº‹â€ï¼Œæ¯”å¦‚ï¼Œâ€œæ•…äº‹å¹³å‡å¼€å‘å‘¨æœŸâ€ç­‰ã€‚æ„Ÿè§‰åº”è¯¥æ˜¯â€œäº‹æ•…â€ï¼Ÿ\nQ4ï¼šandroidTest ç›®å½•ä¸‹çš„ç”¨ä¾‹è¿è¡Œéœ€è¦ä¾èµ–è®¾å¤‡ï¼ŒçœŸæœºæˆ–æ¨¡æ‹Ÿå™¨éƒ½å¯ä»¥å—ï¼Ÿ\nQ5ï¼šIDEåº”è¯¥æ˜¯ç”¨ASå§ã€‚å“ªä¸ªç‰ˆæœ¬ï¼ŸAS2021å—ï¼Ÿ\nQ6ï¼šåœ¨å“ªé‡Œæ‰§è¡Œå‘½ä»¤è¡Œ.&#47;gradlew testï¼Ÿ\næˆ‘åœ¨AS3.5çš„â€œterminalâ€çª—å£ä¸­ï¼Œå½“å‰é¡¹ç›®è·¯å¾„ä¸‹ï¼Œè¾“å…¥â€œAutoTest .&#47;gradlew testâ€å’Œâ€œ.&#47;gradlew testâ€ï¼Œéƒ½ä¸è¡Œï¼Œæç¤ºâ€œ&#39;AutoTest&#39; ä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤ï¼Œâ€ã€‚","like_count":4,"discussions":[{"author":{"id":1179206,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/46/033fccb2.jpg","nickname":"é»„ä¿Šå½¬","note":"","ucode":"0DBE0CE4E7CFC9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":604626,"discussion_content":"peterï¼Œä½ å¥½ã€‚éå¸¸å¼€å¿ƒæ”¶åˆ°ä½ çš„ç•™è¨€ï¼Œçœ‹äº†ä½ æ€»ç»“çš„é—®é¢˜ï¼Œå°±çŸ¥é“ä½ éå¸¸è®¤çœŸåœ°å­¦ä¹ å®Œæˆäº†å‰é¢å‡ ç« çš„å†…å®¹ã€‚ä¸‹é¢æˆ‘å°è¯•æ¥å›ç­”ä¸€ä¸‹ä½ æåˆ°çš„6ä¸ªé—®é¢˜å“ˆã€‚ \nQ1ï¼šButterKnifeç°åœ¨æˆ‘ç”¨çš„ä¹Ÿæ¯”è¾ƒå°‘äº†ï¼Œæ˜¯å¦è€ƒè™‘ç›´æ¥ç”¨Kotlinï¼Ÿ\nQ2: è¿™è¾¹çš„ç‰ˆæœ¬ç®¡ç†ä¸»è¦æ˜¯æŒ‡äºŒè¿›åˆ¶çš„ç‰ˆæœ¬ç®¡ç†ã€‚ä¾‹å¦‚jaræˆ–è€…aarçš„ç‰ˆæœ¬ï¼Œä¸åˆ†æ”¯ä¸æ˜¯ä¸€ä¸ªæ¦‚å¿µã€‚\nQ3ï¼šæ•…äº‹ä¸æ˜¯ç¬”è¯¯ï¼Œæ•…äº‹æ˜¯æ•æ·å¼€å‘ä¸­å¸¸ç”¨çš„æœ¯è¯­ï¼Œä¾‹å¦‚ç”¨æˆ·æ•…äº‹ï¼ˆéœ€æ±‚ï¼‰ã€‚\nQ4ï¼šæ˜¯çš„ã€‚\nQ5ï¼šç›®å‰æˆ‘çœ‹åˆ°åŸºæœ¬éƒ½æ˜¯ç”¨ASï¼Œæˆ‘ç°åœ¨ç”¨çš„æ˜¯Android Studio Electric Eel | 2022.1.1\nQ6: AutoTestæ˜¯é¡¹ç›®çš„åç§°ï¼Œè¿›å…¥é¡¹ç›®çš„æ ¹ç›®å½•ç›´æ¥æ‰§è¡Œ./gradlew test ï¼ˆmacç³»ç»Ÿï¼‰ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥åœ¨gradleçš„çª—å£ä¸­åŒå‡»testçš„taskã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1676383959,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":370687,"user_name":"å¸ƒé­¯æ–¯ï½","can_delete":false,"product_type":"c1","uid":1336309,"ip_address":"æ¾³å¤§åˆ©äºš","ucode":"B2E5D928EF5AA0","user_header":"https://static001.geekbang.org/account/avatar/00/14/63/f5/87e97f3e.jpg","comment_is_top":false,"comment_ctime":1679109267,"is_pvip":false,"replies":[{"id":135283,"content":"Hiï¼Œå¸ƒé­¯æ–¯ã€‚\nåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œé¦–å…ˆå¯¹äºè´¦å·æ¥è¯´å¾—æœ‰å¯¹åº”çš„æµ‹è¯•è´¦å·ï¼Œå¦å¤–å¤§å‹çš„æµ‹è¯•ä¸æ–‡ä¸­ä»‹ç»çš„æ–¹æ³•è¿˜æ˜¯ä¸€è‡´çš„ï¼Œåªä¸è¿‡éœ€è¦åŠ å…¥ä¸€äº›ç­‰å¾…åŠè¶…æ—¶çš„æœºåˆ¶ï¼ˆç½‘ç»œè¯·æ±‚éœ€è¦æ—¶é—´ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1179206,"ctime":1679275339,"ip_address":"å¹¿ä¸œ","comment_id":370687,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100525001,"comment_content":"æ„Ÿè°¢è€å¸ˆçš„è®²è§£ï¼Œæƒ³è¯·é—®ä¸€ä¸‹è€å¸ˆï¼Œåœ¨ç°å®ç”Ÿæ´»ä¸Šï¼Œè®¸å¤šç™»å…¥æ˜¯é€è¿‡OAuth 2.0 å»å®ç°çš„ï¼Œæƒ³è¯·é—®ä¸€ä¸‹è€å¸ˆï¼Œé’ˆå¯¹è¿™ç§åœºæ™¯ï¼Œè¦å¦‚ä½•æ’°å†™è‡ªåŠ¨åŒ–çš„å¤§å‹æµ‹è¯•å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1179206,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/46/033fccb2.jpg","nickname":"é»„ä¿Šå½¬","note":"","ucode":"0DBE0CE4E7CFC9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":609871,"discussion_content":"Hiï¼Œå¸ƒé­¯æ–¯ã€‚\nåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œé¦–å…ˆå¯¹äºè´¦å·æ¥è¯´å¾—æœ‰å¯¹åº”çš„æµ‹è¯•è´¦å·ï¼Œå¦å¤–å¤§å‹çš„æµ‹è¯•ä¸æ–‡ä¸­ä»‹ç»çš„æ–¹æ³•è¿˜æ˜¯ä¸€è‡´çš„ï¼Œåªä¸è¿‡éœ€è¦åŠ å…¥ä¸€äº›ç­‰å¾…åŠè¶…æ—¶çš„æœºåˆ¶ï¼ˆç½‘ç»œè¯·æ±‚éœ€è¦æ—¶é—´ï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679275339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":377582,"user_name":"ä½™ä¸€","can_delete":false,"product_type":"c1","uid":2322380,"ip_address":"å¹¿ä¸œ","ucode":"D66479F0821857","user_header":"https://static001.geekbang.org/account/avatar/00/23/6f/cc/1e15c68f.jpg","comment_is_top":false,"comment_ctime":1688784949,"is_pvip":false,"replies":[{"id":139333,"content":"Hiï¼Œå¯ä»¥æ£€æŸ¥ä¸€ä¸‹æ˜¯ä¸æ˜¯åœ¨åŒä¸ªåŒ…ä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1179206,"ctime":1697597010,"ip_address":"æ²³å—","comment_id":377582,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100525001,"comment_content":"è€å¸ˆï¼Œä¸ºå•¥æˆ‘çš„æµ‹è¯•ç±»æµ‹ä¸äº†protectedä¿®é¥°çš„isPasswordValidæ–¹æ³•ï¼Ÿæ˜æ˜åŠ äº†@VisibleForTestingæ³¨è§£ğŸ˜¢","like_count":0,"discussions":[{"author":{"id":1179206,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/46/033fccb2.jpg","nickname":"é»„ä¿Šå½¬","note":"","ucode":"0DBE0CE4E7CFC9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629746,"discussion_content":"Hiï¼Œå¯ä»¥æ£€æŸ¥ä¸€ä¸‹æ˜¯ä¸æ˜¯åœ¨åŒä¸ªåŒ…ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1697597010,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ²³å—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371515,"user_name":"le bonheur","can_delete":false,"product_type":"c1","uid":1125922,"ip_address":"æ±Ÿè‹","ucode":"7C3D1A9D099306","user_header":"https://static001.geekbang.org/account/avatar/00/11/2e/22/cb5bce0b.jpg","comment_is_top":false,"comment_ctime":1680004967,"is_pvip":false,"replies":[{"id":135607,"content":"Hiï¼ŒæœŸå¾…ä¸€èµ·å®Œæˆä¸“æ çš„å­¦ä¹ ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1179206,"ctime":1680184670,"ip_address":"å¹¿ä¸œ","comment_id":371515,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100525001,"comment_content":"ä»ä¸Šå®¶å…¬å¸å¼€å§‹è¦æ±‚è·Ÿå­¦ä¹ å†™å•å…ƒæµ‹è¯•,å¼€å§‹çˆ±ä¸Šå•å…ƒæµ‹è¯•.ç»ˆäºçœ‹åˆ°äº†ä¸€ç¯‡æ¯”è¾ƒç»¼åˆå†™å•å…ƒæµ‹è¯•çš„æ–‡ç« .å¤ªé«˜å…´äº†","like_count":0,"discussions":[{"author":{"id":1179206,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/46/033fccb2.jpg","nickname":"é»„ä¿Šå½¬","note":"","ucode":"0DBE0CE4E7CFC9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611596,"discussion_content":"Hiï¼ŒæœŸå¾…ä¸€èµ·å®Œæˆä¸“æ çš„å­¦ä¹ ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680184670,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":369496,"user_name":"Geek_6f0f96","can_delete":false,"product_type":"c1","uid":2181363,"ip_address":"ä¸Šæµ·","ucode":"2F909BD25E0D83","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK2LQJJqvGX6OA2jTrYny2l5b9lWcANiaglMsv8FiawS9y0vZ7Mrzt9iaozGVU0KKowscziaUI1XRm6RQ/132","comment_is_top":false,"comment_ctime":1677593068,"is_pvip":false,"replies":[{"id":134684,"content":"Hiï¼Œä½ å¥½ã€‚å›å½’æ˜¯æ”¶ç›Šä¹‹ä¸€ã€‚æ­£æ–‡ä¸­æœ€åçš„ç¬¬ä¸‰ä¸ªé—®é¢˜ä¹Ÿæœ‰ä»‹ç»å…³äºè‡ªåŠ¨åŒ–æµ‹è¯•ä»·å€¼çš„é—®é¢˜ã€‚ä½ å¯ä»¥è·Ÿç€è¯¾ç¨‹ä¸€èµ·æ¥ç»ƒä¹ ä½“éªŒä¸€ä¸‹ï¼ŒæœŸå¾…ä¸€èµ·å®Œæˆä¸“æ çš„å­¦ä¹ ğŸ¤ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1179206,"ctime":1677680323,"ip_address":"å¹¿ä¸œ","comment_id":369496,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100525001,"comment_content":"è¿™æ ·åšä¸»è¦æ”¶ç›Šæ˜¯å›å½’æµç¨‹å˜›ï¼Ÿå› ä¸ºæ„Ÿè§‰å¤§å¤šæ•°éœ€æ±‚å¦‚æœå†™æµ‹è¯•ç”¨ä¾‹ï¼Œå¯èƒ½æ¯”éœ€æ±‚å¼€å‘æ—¶é—´è¿˜å¤š","like_count":0,"discussions":[{"author":{"id":1179206,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/46/033fccb2.jpg","nickname":"é»„ä¿Šå½¬","note":"","ucode":"0DBE0CE4E7CFC9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":607219,"discussion_content":"Hiï¼Œä½ å¥½ã€‚å›å½’æ˜¯æ”¶ç›Šä¹‹ä¸€ã€‚æ­£æ–‡ä¸­æœ€åçš„ç¬¬ä¸‰ä¸ªé—®é¢˜ä¹Ÿæœ‰ä»‹ç»å…³äºè‡ªåŠ¨åŒ–æµ‹è¯•ä»·å€¼çš„é—®é¢˜ã€‚ä½ å¯ä»¥è·Ÿç€è¯¾ç¨‹ä¸€èµ·æ¥ç»ƒä¹ ä½“éªŒä¸€ä¸‹ï¼ŒæœŸå¾…ä¸€èµ·å®Œæˆä¸“æ çš„å­¦ä¹ ğŸ¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677680323,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":368671,"user_name":"æé‘«é‘«","can_delete":false,"product_type":"c1","uid":1169021,"ip_address":"åŒ—äº¬","ucode":"BEC451BFBEFD25","user_header":"https://static001.geekbang.org/account/avatar/00/11/d6/7d/4b09b0bf.jpg","comment_is_top":false,"comment_ctime":1676546267,"is_pvip":false,"replies":[{"id":134266,"content":"Hi é‘«é‘«ï¼Œéå¸¸å¼€å¿ƒæ”¶åˆ°ä½ çš„ç•™è¨€ã€‚\næˆ‘æƒ³è¯´çš„æ˜¯ï¼šæµ‹è¯•çš„å·¥ä½œæ°¸è¿œä¸ä»…ä»…æ˜¯æµ‹è¯•åŒå­¦çš„äº‹æƒ…å“ˆ ğŸ˜Š","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1179206,"ctime":1676550230,"ip_address":"ä¸Šæµ·","comment_id":368671,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100525001,"comment_content":"æŠ¢äº†æµ‹è¯•åŒå­¦çš„å·¥ä½œäº†ï¼","like_count":0,"discussions":[{"author":{"id":1179206,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/46/033fccb2.jpg","nickname":"é»„ä¿Šå½¬","note":"","ucode":"0DBE0CE4E7CFC9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":605015,"discussion_content":"Hi é‘«é‘«ï¼Œéå¸¸å¼€å¿ƒæ”¶åˆ°ä½ çš„ç•™è¨€ã€‚\næˆ‘æƒ³è¯´çš„æ˜¯ï¼šæµ‹è¯•çš„å·¥ä½œæ°¸è¿œä¸ä»…ä»…æ˜¯æµ‹è¯•åŒå­¦çš„äº‹æƒ…å“ˆ ğŸ˜Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1676550230,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":368630,"user_name":"wangzhen666","can_delete":false,"product_type":"c1","uid":1421122,"ip_address":"å¹¿ä¸œ","ucode":"DA228916E48276","user_header":"https://static001.geekbang.org/account/avatar/00/15/af/42/8189f9d1.jpg","comment_is_top":false,"comment_ctime":1676512708,"is_pvip":false,"replies":[{"id":134345,"content":"å¯ä»¥æä¾›ä¸€ä¸‹æ—¥å¿—ä»¥åŠç›¸å…³çš„æ‰§è¡Œè®¾å¤‡ã€‚ä¸­å¤§å‹çš„æµ‹è¯•ç›¸æ¯”å°å‹æµ‹è¯•çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯ä¾èµ–è®¾å¤‡ï¼Œç›¸å¯¹ä¸ç¨³å®šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1179206,"ctime":1676871109,"ip_address":"ä¸Šæµ·","comment_id":368630,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100525001,"comment_content":"LoginActivityTestçš„should_show_failed_toast_when_execute_login_given_invalid_username_and_password()æ²¡æœ‰é€šè¿‡","like_count":0,"discussions":[{"author":{"id":1421122,"avatar":"https://static001.geekbang.org/account/avatar/00/15/af/42/8189f9d1.jpg","nickname":"wangzhen666","note":"","ucode":"DA228916E48276","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606103,"discussion_content":"Toaståœ¨targetSdk30åŠä»¥ä¸Šçš„æ¨¡æ‹Ÿå™¨ä¸Šåˆ¤æ–­æœ‰é—®é¢˜ï¼Œæ”¹ä¸º29å°±å¥½äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1676947862,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1179206,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/46/033fccb2.jpg","nickname":"é»„ä¿Šå½¬","note":"","ucode":"0DBE0CE4E7CFC9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":605805,"discussion_content":"å¯ä»¥æä¾›ä¸€ä¸‹æ—¥å¿—ä»¥åŠç›¸å…³çš„æ‰§è¡Œè®¾å¤‡ã€‚ä¸­å¤§å‹çš„æµ‹è¯•ç›¸æ¯”å°å‹æµ‹è¯•çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯ä¾èµ–è®¾å¤‡ï¼Œç›¸å¯¹ä¸ç¨³å®šã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1676871109,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":368585,"user_name":"wangzhen666","can_delete":false,"product_type":"c1","uid":1421122,"ip_address":"å¹¿ä¸œ","ucode":"DA228916E48276","user_header":"https://static001.geekbang.org/account/avatar/00/15/af/42/8189f9d1.jpg","comment_is_top":false,"comment_ctime":1676461929,"is_pvip":false,"replies":[{"id":134241,"content":"ç¤ºä¾‹çš„ä»£ç é“¾æ¥ï¼šhttps:&#47;&#47;github.com&#47;junbin1011&#47;AutoTest\næœŸå¾…ä¸€èµ·å®Œæˆä¸“æ çš„å­¦ä¹ ğŸ¤","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1179206,"ctime":1676471936,"ip_address":"ä¸Šæµ·","comment_id":368585,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100525001,"comment_content":"è€å¸ˆæ–¹ä¾¿çš„è¯æŠŠä»£ç ä¼ ä¸€ä¸‹å§ï½","like_count":0,"discussions":[{"author":{"id":1179206,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/46/033fccb2.jpg","nickname":"é»„ä¿Šå½¬","note":"","ucode":"0DBE0CE4E7CFC9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":604895,"discussion_content":"ç¤ºä¾‹çš„ä»£ç é“¾æ¥ï¼šhttps://github.com/junbin1011/AutoTest\næœŸå¾…ä¸€èµ·å®Œæˆä¸“æ çš„å­¦ä¹ ğŸ¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1676471937,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":368446,"user_name":"æ™“æ™“","can_delete":false,"product_type":"c1","uid":2872761,"ip_address":"å¹¿ä¸œ","ucode":"E5C4FC6D0E0911","user_header":"https://static001.geekbang.org/account/avatar/00/2b/d5/b9/dc5a6e6a.jpg","comment_is_top":false,"comment_ctime":1676348387,"is_pvip":false,"replies":[{"id":134193,"content":"æœŸå¾…ä¸€èµ·å®Œæˆä¸“æ çš„å­¦ä¹ ğŸ’ª","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1179206,"ctime":1676379185,"ip_address":"ä¸Šæµ·","comment_id":368446,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100525001,"comment_content":"å—ç›ŠåŒªæµ…ï¼ŒæœŸå¾…æ›´æ–°ï¼","like_count":0,"discussions":[{"author":{"id":1179206,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/46/033fccb2.jpg","nickname":"é»„ä¿Šå½¬","note":"","ucode":"0DBE0CE4E7CFC9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":604614,"discussion_content":"æœŸå¾…ä¸€èµ·å®Œæˆä¸“æ çš„å­¦ä¹ ğŸ’ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1676379185,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391992,"user_name":"è“å•¼å„¿","can_delete":false,"product_type":"c1","uid":1116230,"ip_address":"ä¸Šæµ·","ucode":"43D2944B891BAB","user_header":"https://static001.geekbang.org/account/avatar/00/11/08/46/8b244fc3.jpg","comment_is_top":false,"comment_ctime":1719632039,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100525001,"comment_content":"è¿™ç§åŠŸèƒ½æµ‹è¯•ï¼Œå†™ç”¨ä¾‹å°±å¤ªæµªè´¹æ—¶é—´äº†ï¼Œæœ‰è¿™æ—¶é—´ï¼Œäººå·¥éƒ½æµ‹è¯•Néäº†","like_count":0},{"had_liked":false,"id":389338,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"æµ™æ±Ÿ","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1712158102,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100525001,"comment_content":"æ„Ÿè°¢è€å¸ˆåˆ†äº«äº†è¿™ä¹ˆå¤šè‡ªåŠ¨åŒ–æµ‹è¯•çš„å·¥å…·ï¼Œå¯¹æ„å»ºä¸€ä¸ªè‰¯å¥½çš„ App ä¿¡å¿ƒå€å¢ã€‚\næˆ‘åœ¨å®˜ç½‘çš„å…¥é—¨æ•™ç¨‹ä¸­å­¦åˆ°çš„æ˜¯ AndroidJUnitRunner https:&#47;&#47;developer.android.com&#47;training&#47;testing&#47;instrumented-tests&#47;androidx-test-libraries&#47;runnerï¼Œè¿™ä¸ªåº”è¯¥å±äºå¤§å‹æµ‹è¯•å·¥å…·\n\nåˆ†äº«ä¸€é—¨æé«˜æµ‹è¯•æŠ€èƒ½çš„ä¸“æ ã€Œå¾æ˜Š Â· TDDé¡¹ç›®å®æˆ˜70è®²ã€\n\nè·Ÿç€è€å¸ˆå­¦ä¹ ï¼Œè®©æˆ‘çš„å…¥é—¨é¡¹ç›®ã€Œhttps:&#47;&#47;github.com&#47;aoeai&#47;aoeai-qigua-androidã€å˜å¼ºå˜å¤§","like_count":0}]}