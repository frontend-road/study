{"id":326184,"title":"第三季回归 | 我们一起来写好代码！","content":"<p>你好，我是郑晔，我又回来了！</p><p>在《<a href=\"https://time.geekbang.org/column/intro/100022301\">10x 程序员工作法</a>》中，我们讲了工作原则，在《<a href=\"https://time.geekbang.org/column/intro/100052601\">软件设计之美</a>》，我们讲了设计原则。有不少同学通过各种途径和我表示，这两个专栏让他们受益匪浅。但也有人和我提出，虽然觉得有收获，但还不过瘾。</p><p>这些原则虽然很好，但怎么应用到自己的实际工作中，完全取决于个人的理解，经验丰富的人或许可以直接改变自己的行为，而经验少的人，从中的获得就完全取决于个人的悟性了。</p><p>比如，我在两个专栏中都讲到了单一职责原则，最终得出的结论都是要把代码写短小。但什么叫写短小，不同的人理解起来就是有差异的。</p><p>有一次，我在一些人面前演示了如何将一段代码重构成小函数，然后，我问听众，你们可以接受一个函数代码行数的上限是多少？一个听众很认真地说，100 行。我默默地看了看被我重构掉的那个“不好”的函数，好像也没有 100 行，按照他的标准，那个函数根本不需要改。</p><p>还有一次，一个颇有经验的前辈在我面前说自己写代码的要求很高，函数要求写得很短。我不明就里地问了一句，你要求一个函数不得超过多少呢？他说 50 行。</p><p>50 行也好，100 行也罢，在我看来，这简直是一个天文数字。我通常对自己的要求是，像 Java 语言这种表达能力一般的语言尽可能 10 行之内搞定，而像 Python、Ruby 这类动态语言，5 行代码就可以解决大多数问题，而且很多代码一行就够了。</p><!-- [[[read_end]]] --><p>在自己实际的项目中，考虑到团队的协作，我在静态检查中配置的参数是 20 行。换言之，一个函数超过 20 行，连构建都是无法通过的。</p><p>从这些例子中你可以看到，虽然大家都遵循了同样的原则，但具体体现在代码上，却是千差万别的。</p><p>也正是因为理解的差异，造成的结果是，虽然许多人懂得了很多道理，依然不能很好地完成自己的本职工作。许多人日夜辛苦地调试的代码，其实在写出来的那一刻就已经漏洞百出了。</p><p>如果能够知道这些代码是有问题的，在写代码之初就把这些问题消灭在萌芽中，日后的辛苦就可以节省出不少。</p><p>Martin Fowler 在《<a href=\"https://book.douban.com/subject/30468597/\">重构</a>》这本书里给这种有问题的代码起了一个很有特点的名字：代码的坏味道。</p><p>有追求的程序员都希望自己能够写出整洁的代码，而这一切的出发点就是坏味道。只有拥有对于坏味道的嗅觉，才有机会对代码进行重构，也才有机会写出整洁的代码。</p><p>所以我做了第三个专栏，在这个专栏里，我们就从代码的坏味道出发。我会给你提供一些非常直观的坏味道，让你看一眼就知道代码有问题。在这些坏味道中，有一些是你已经深恶痛绝的，比如，长函数和大类；有一些则是在挑战你的编程习惯，比如，else 语句和循环语句。这些坏味道的知识即学即用，对照你的代码，你立刻就能发现很多问题。</p><p>按照我们专栏一贯的风格，我不仅仅会告诉你一段代码是坏味道，也会告诉你这些坏味道之所以为坏味道背后的道理，还会和你讨论如何去重构这段代码。</p><p>有了《<a href=\"https://time.geekbang.org/column/intro/100022301\">10x 程序员工作法</a>》或《<a href=\"https://time.geekbang.org/column/intro/100052601\">软件设计之美</a>》这两个专栏的积淀，当你再去学习新专栏的时候，之前学习的这些原则就实打实地体现在对于代码的改进上，让你修炼的内功有了更好的用武之地。</p><p>来吧，欢迎加入《<a href=\"https://time.geekbang.org/column/intro/100068401\">代码之丑</a>》！请再次和我一起踏上程序员精进之路，我们一起修炼，不断打磨自己编写代码的手艺！</p>","neighbors":{"left":{"article_title":"第二季回归 | 我带着软件设计课回来了！","id":240265},"right":{"article_title":"第四季回归 | 通向高质量代码之路","id":404270}},"comments":[{"had_liked":false,"id":270519,"user_name":"Stephen","can_delete":false,"product_type":"c1","uid":1165201,"ip_address":"","ucode":"0D49223E6CB7B1","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7mAt63VrbLZPHpeZxSc4IlBYswQSnaAB5wGePaGFDehgiaNfIxI1SJ5yIHIlmVk8hsw0RaoaSCPA/132","comment_is_top":false,"comment_ctime":1609149512,"is_pvip":false,"replies":[{"id":98110,"content":"2020年马上就结束了，你加油！","user_name":"作者回复","user_name_real":"郑晔","uid":1258861,"ctime":1609162165,"ip_address":"","comment_id":270519,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100022301,"comment_content":"没想到自己抢了个沙发。我今年目标就是学完郑老师的&lt;10x程序员&gt;，加油！","like_count":3},{"had_liked":false,"id":288220,"user_name":"腾挪","can_delete":false,"product_type":"c1","uid":1003853,"ip_address":"","ucode":"E80661F2235344","user_header":"https://static001.geekbang.org/account/avatar/00/0f/51/4d/0aceadde.jpg","comment_is_top":false,"comment_ctime":1618368309,"is_pvip":false,"replies":[{"id":104637,"content":"多谢支持","user_name":"作者回复","user_name_real":"郑晔","uid":1258861,"ctime":1618393351,"ip_address":"","comment_id":288220,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100022301,"comment_content":"代码之丑专栏非常实用。","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512656,"discussion_content":"2020年马上就结束了，你加油！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609162165,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":270508,"user_name":"哈哈","can_delete":false,"product_type":"c1","uid":1208655,"ip_address":"","ucode":"8D43010FA3DC2C","user_header":"https://static001.geekbang.org/account/avatar/00/12/71/4f/bce0d5bc.jpg","comment_is_top":false,"comment_ctime":1609147879,"is_pvip":false,"replies":[{"id":98111,"content":"欢迎回来！","user_name":"作者回复","user_name_real":"郑晔","uid":1258861,"ctime":1609162176,"ip_address":"","comment_id":270508,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100022301,"comment_content":"郑晔老师的课闭着眼睛买就行了，根本不用怀疑质量","like_count":0,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512652,"discussion_content":"欢迎回来！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609162176,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":393607,"user_name":"ifelse","can_delete":false,"product_type":"c1","uid":2550743,"ip_address":"浙江","ucode":"D0565908C99695","user_header":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","comment_is_top":false,"comment_ctime":1724301915,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":3,"score":2,"product_id":100022301,"comment_content":"学习打卡","like_count":0},{"had_liked":false,"id":344720,"user_name":"ifelse","can_delete":false,"product_type":"c1","uid":2550743,"ip_address":"","ucode":"D0565908C99695","user_header":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","comment_is_top":false,"comment_ctime":1651738426,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":3,"score":2,"product_id":100022301,"comment_content":"冲！","like_count":0},{"had_liked":false,"id":270519,"user_name":"Stephen","can_delete":false,"product_type":"c1","uid":1165201,"ip_address":"","ucode":"0D49223E6CB7B1","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7mAt63VrbLZPHpeZxSc4IlBYswQSnaAB5wGePaGFDehgiaNfIxI1SJ5yIHIlmVk8hsw0RaoaSCPA/132","comment_is_top":false,"comment_ctime":1609149512,"is_pvip":false,"replies":[{"id":98110,"content":"2020年马上就结束了，你加油！","user_name":"作者回复","user_name_real":"郑晔","uid":1258861,"ctime":1609162165,"ip_address":"","comment_id":270519,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100022301,"comment_content":"没想到自己抢了个沙发。我今年目标就是学完郑老师的&lt;10x程序员&gt;，加油！","like_count":3,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512656,"discussion_content":"2020年马上就结束了，你加油！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609162165,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":288220,"user_name":"腾挪","can_delete":false,"product_type":"c1","uid":1003853,"ip_address":"","ucode":"E80661F2235344","user_header":"https://static001.geekbang.org/account/avatar/00/0f/51/4d/0aceadde.jpg","comment_is_top":false,"comment_ctime":1618368309,"is_pvip":false,"replies":[{"id":104637,"content":"多谢支持","user_name":"作者回复","user_name_real":"郑晔","uid":1258861,"ctime":1618393351,"ip_address":"","comment_id":288220,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100022301,"comment_content":"代码之丑专栏非常实用。","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518551,"discussion_content":"多谢支持","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618393351,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":270508,"user_name":"哈哈","can_delete":false,"product_type":"c1","uid":1208655,"ip_address":"","ucode":"8D43010FA3DC2C","user_header":"https://static001.geekbang.org/account/avatar/00/12/71/4f/bce0d5bc.jpg","comment_is_top":false,"comment_ctime":1609147879,"is_pvip":false,"replies":[{"id":98111,"content":"欢迎回来！","user_name":"作者回复","user_name_real":"郑晔","uid":1258861,"ctime":1609162176,"ip_address":"","comment_id":270508,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100022301,"comment_content":"郑晔老师的课闭着眼睛买就行了，根本不用怀疑质量","like_count":0,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518551,"discussion_content":"多谢支持","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618393351,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":393607,"user_name":"ifelse","can_delete":false,"product_type":"c1","uid":2550743,"ip_address":"浙江","ucode":"D0565908C99695","user_header":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","comment_is_top":false,"comment_ctime":1724301915,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":3,"score":2,"product_id":100022301,"comment_content":"学习打卡","like_count":0},{"had_liked":false,"id":344720,"user_name":"ifelse","can_delete":false,"product_type":"c1","uid":2550743,"ip_address":"","ucode":"D0565908C99695","user_header":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","comment_is_top":false,"comment_ctime":1651738426,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":3,"score":2,"product_id":100022301,"comment_content":"冲！","like_count":0,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512652,"discussion_content":"欢迎回来！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609162176,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}