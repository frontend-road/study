{"id":126910,"title":"06 | 编译器前端工具（一）：用Antlr生成词法、语法分析器","content":"<p>前面的课程中，我重点讲解了词法分析和语法分析，在例子中提到的词法和语法规则也是高度简化的。虽然这些内容便于理解原理，也能实现一个简单的原型，在实际应用中却远远不够。实际应用中，一个完善的编译程序还要在词法方面以及语法方面实现很多工作，我这里特意画了一张图，你可以直观地看一下。</p><p><img src=\"https://static001.geekbang.org/resource/image/49/c1/49098ee32e1344550c41312862ec8ec1.jpg?wh=1142*429\" alt=\"\"></p><p>如果让编译程序实现上面这么多工作，完全手写效率会有点儿低，那么我们有什么方法可以提升效率呢？答案是借助工具。</p><p>编译器前端工具有很多，比如Lex（以及GNU的版本Flex）、Yacc（以及GNU的版本Bison）、JavaCC等等。你可能会问了：“那为什么我们这节课只讲Antlr，不选别的工具呢？”主要有两个原因。</p><p>第一个原因是Antlr能支持更广泛的目标语言，包括Java、C#、JavaScript、Python、Go、C++、Swift。无论你用上面哪种语言，都可以用它生成词法和语法分析的功能。而我们就使用它生成了Java语言和C++语言两个版本的代码。</p><p>第二个原因是Antlr的语法更加简单。它能把类似左递归的一些常见难点在工具中解决，对提升工作效率有很大的帮助。这一点，你会在后面的课程中直观地感受到。</p><p>而我们今天的目标就是了解Antlr，然后能够使用Antlr生成词法分析器与语法分析器。在这个过程中，我还会带你借鉴成熟的词法和语法规则，让你快速成长。</p><!-- [[[read_end]]] --><p>接下来，我们先来了解一下Antlr这个工具。</p><h2>初识Antlr</h2><p>Antlr是一个开源的工具，支持根据规则文件生成词法分析器和语法分析器，它自身是用Java实现的。</p><p>你可以<a href=\"https://www.antlr.org/\">下载Antlr工具</a>，并根据说明做好配置。同时，你还需要配置好机器上的Java环境（可以在<a href=\"https://www.oracle.com/index.html\">Oracle官网</a>找到最新版本的JDK）。</p><p>因为我用的是Mac，所以我用macOS平台下的软件包管理工具Homebrew安装了Antlr，它可以自动设置好antlr和grun两个命令（antlr和grun分别是java org.antlr.v4.Tool和java org.antlr.v4.gui.TestRig这两个命令的别名）。这里需要注意的是，你要把Antlr的JAR文件设置到CLASSPATH环境变量中，以便顺利编译所生成的Java源代码。</p><p><a href=\"https://github.com/antlr/grammars-v4\">GitHub</a>上还有很多供参考的语法规则，你可以下载到本地硬盘随时查阅。</p><p>现在你已经对Antlr有了初步的了解，也知道如何安装它了。接下来，我带你实际用一用Antlr，让你用更轻松的方式生成词法分析器和语法分析器。</p><h2>用Antlr生成词法分析器</h2><p>你可能对Antlr还不怎么熟悉，所以我会先带你使用前面课程中，你已经比较熟悉的那些词法规则，让Antlr生成一个新的词法分析器，然后再借鉴一些成熟的规则文件，把词法分析器提升到更加专业、实用的级别。</p><p>Antlr通过解析规则文件来生成编译器。规则文件以.g4结尾，词法规则和语法规则可以放在同一个文件里。不过为了清晰起见，我们还是把它们分成两个文件，先用一个文件编写词法规则。</p><p><strong>为了让你快速进入状态，我们先做一个简单的练习预热一下。</strong>我们创建一个Hello.g4文件，用于保存词法规则，然后把之前用过的一些词法规则写进去。</p><pre><code>lexer grammar Hello;  //lexer关键字意味着这是一个词法规则文件，名称是Hello，要与文件名相同\n\n//关键字\nIf :               'if';\nInt :              'int';\n\n//字面量\nIntLiteral:        [0-9]+;\nStringLiteral:      '&quot;' .*? '&quot;' ;  //字符串字面量\n\n//操作符\nAssignmentOP:       '=' ;    \nRelationalOP:       '&gt;'|'&gt;='|'&lt;' |'&lt;=' ;    \nStar:               '*';\nPlus:               '+';\nSharp:              '#';\nSemiColon:          ';';\nDot:                '.';\nComm:               ',';\nLeftBracket :       '[';\nRightBracket:       ']';\nLeftBrace:          '{';\nRightBrace:         '}';\nLeftParen:          '(';\nRightParen:         ')';\n\n//标识符\nId :                [a-zA-Z_] ([a-zA-Z_] | [0-9])*;\n\n//空白字符，抛弃\nWhitespace:         [ \\t]+ -&gt; skip;\nNewline:            ( '\\r' '\\n'?|'\\n')-&gt; skip;\n</code></pre><p>你能很直观地看到，每个词法规则都是大写字母开头，这是Antlr对词法规则的约定。而语法规则是以小写字母开头的。其中，每个规则都是用我们已经了解的正则表达式编写的。</p><p>接下来，我们来编译词法规则，在终端中输入命令：</p><pre><code>antlr Hello.g4\n</code></pre><p>这个命令是让Antlr编译规则文件，并生成Hello.java文件和其他两个辅助文件。你可以打开看一看文件里面的内容。接着，我用下面的命令编译Hello.java：</p><pre><code>javac *.java\n</code></pre><p>结果会生成Hello.class文件，这就是我们生成的词法分析器。接下来，我们来写个脚本文件，让生成的词法分析器解析一下：</p><pre><code>int age = 45;\nif (age &gt;= 17+8+20){\n  printf(&quot;Hello old man!&quot;);\n}\n</code></pre><p>我们将上面的脚本存成hello.play文件，然后在终端输入下面的命令：</p><pre><code>grun Hello tokens -tokens hello.play\n</code></pre><p>grun命令实际上是调用了我们刚才生成的词法分析器，即Hello类，打印出对hello.play词法分析的结果：</p><p><img src=\"https://static001.geekbang.org/resource/image/dc/e9/dc9f9dcebd4c73eecd05fece12ba38e9.jpg?wh=1142*972\" alt=\"\"></p><p>从结果中看到，我们的词法分析器把每个Token都识别了，还记录了它们在代码中的位置、文本值、类别。上面这些都是Token的属性。</p><p>以第二行[@1, 4:6=‘age’,&lt; Id &gt;,1:4]为例，其中@1是Token的流水编号，表明这是1号Token；4:6是Token在字符流中的开始和结束位置；age是文本值，Id是其Token类别；最后的1:4表示这个Token在源代码中位于第1行、第4列。</p><p>非常好，现在我们已经让Antlr顺利跑起来了！接下来，让词法规则更完善、更严密一些吧！<strong>怎么做呢？当然是参考成熟的规则文件。</strong></p><p>从Antlr的一些示范性的规则文件中，我选了Java的作为参考。先看看我们之前写的字符串字面量的规则：</p><pre><code>StringLiteral:      '&quot;' .*? '&quot;' ;  //字符串字面量\n</code></pre><p>我们的版本相当简化，就是在双引号可以包含任何字符。可这在实际中不大好用，因为连转义功能都没有提供。我们对于一些不可见的字符，比如回车，要提供转义功能，如“\\n”。同时，如果字符串里本身有双引号的话，也要将它转义，如“\\”。Unicode也要转义。最后，转义字符本身也需要转义，如“\\\\”。</p><p>下面这一段内容是Java语言中的字符串字面量的完整规则。你可以看一下文稿，这个规则就很细致了，把各种转义的情况都考虑进去了：</p><pre><code>STRING_LITERAL:     '&quot;' (~[&quot;\\\\\\r\\n] | EscapeSequence)* '&quot;';\n\nfragment EscapeSequence\n    : '\\\\' [btnfr&quot;'\\\\]\n    | '\\\\' ([0-3]? [0-7])? [0-7]\n    | '\\\\' 'u'+ HexDigit HexDigit HexDigit HexDigit\n    ;\n\nfragment HexDigit\n    : [0-9a-fA-F]\n    ;  \n</code></pre><p>在这个规则文件中，fragment指的是一个语法片段，是为了让规则定义更清晰。它本身并不生成Token，只有StringLiteral规则才会生成Token。</p><p>当然了，除了字符串字面量，数字字面量、标识符的规则也可以定义得更严密。不过，因为这些规则文件都很严密，写出来都很长，在这里我就不一一展开了。如果感兴趣，我推荐你在下载的规则文件中找到这些部分看一看。你还可以参考不同作者写的词法规则，体会一下他们的设计思路。和高手过招，会更快地提高你的水平。</p><p>我也拷贝了一些成熟的词法规则，编写了一个CommonLexer.g4的规则文件，这个词法规则是我们后面工作的基础，它基本上已经达到了专业、实用的程度。</p><p>在带你借鉴了成熟的规则文件之后，我想穿插性地讲解一下在词法规则中对Token归类的问题。在设计词法规则时，你经常会遇到这个问题，解决这个问题，词法规则会更加完善。</p><p>在前面练习的规则文件中，我们把&gt;=、&gt;、&lt;都归类为关系运算符，算作同一类Token，而+、*等都单独作为另一类Token。那么，哪些可以归并成一类，哪些又是需要单独列出的呢？</p><p>其实，这主要取决于语法的需要。也就是在语法规则文件里，是否可以出现在同一条规则里。它们在语法层面上没有区别，只是在语义层面上有区别。比如，加法和减法虽然是不同的运算，但它们可以同时出现在同一条语法规则中，它们在运算时的特性完全一致，包括优先级和结合性，乘法和除法可以同时出现在乘法规则中。你把加号和减号合并成一类，把乘号和除号合并成一类是可以的。把这4个运算符每个都单独作为一类，也是可以的。但是，不能把加号和乘号作为同一类，因为它们在算术运算中的优先级不同，肯定出现在不同的语法规则中。</p><p>我们再来回顾一下在“<a href=\"https://time.geekbang.org/column/article/118378\">02 | 正则文法和有限自动机：纯手工打造词法分析器</a>”里做词法分析时遇到的一个问题。当时，我们分析了词法冲突的问题，即标识符和关键字的规则是有重叠的。Antlr是怎么解决这个问题的呢？很简单，它引入了优先级的概念。在Antlr的规则文件中，越是前面声明的规则，优先级越高。所以，我们把关键字的规则放在ID的规则前面。算法在执行的时候，会首先检查是否为关键字，然后才会检查是否为ID，也就是标识符。</p><p>这跟我们当时构造有限自动机做词法分析是一样的。那时，我们先判断是不是关键字，如果不是关键字，才识别为标识符。而在Antlr里，仅仅通过声明的顺序就解决了这个问题，省了很多事儿啊！</p><p>再说个有趣的题外话。之前国内有人提“中文编程语言”的概念，也就是语法中的关键字采用中文，比如“如果”“那么”等。他们似乎觉得这样更容易理解和掌握。我不太提倡这种想法，别的不说，用中文写关键字和变量名，需要输入更多的字符，有点儿麻烦。中国的英语教育很普及，用英语来写代码，其实就够了。</p><p>不过，你大可以试一下，让自己的词法规则支持中文关键字。比如，把“If”的规则改成同时支持英文的“if”，以及中文的“如果”：</p><pre><code>If:                 'if' | '如果';\n</code></pre><p>再把测试用的脚本hello.play中的“if”也改成“如果”，写成：</p><pre><code>如果 (age &gt;= 17+8+20){\n</code></pre><p>重新生成词法分析器并运行，你会发现输出中有这么一行：</p><pre><code>[@5,14:15='如果',&lt;If&gt;,2:0]\n</code></pre><p>这个Token的文本值是“如果”，但类别仍然是“If”。所以，要想实现所谓的“中文编程语言”，把C、Java等语言的词法规则改一改，再把编译器重新编译一下就行了！</p><h2>用Antlr生成语法分析器</h2><p>说回我们的话题。现在，你已经知道如何用Antlr做一个词法分析器，还知道可以借鉴成熟的规则文件，让自己的词法规则文件变得更完善、更专业。接下来，试着用Antlr生成一个语法分析器，替代之前手写的语法分析器吧！</p><p>这一次的文件名叫做PlayScript.g4。playscript是为我们的脚本语言起的名称，文件开头是这样的：</p><pre><code>grammar PlayScript;\nimport CommonLexer;   //导入词法定义\n\n/*下面的内容加到所生成的Java源文件的头部，如包名称，import语句等。*/\n@header {\npackage antlrtest;\n}\n</code></pre><p>然后把之前做过的语法定义放进去。Antlr内部有自动处理左递归的机制，你可以放心大胆地把语法规则写成下面的样子：</p><pre><code>expression\n    :   assignmentExpression\n    |   expression ',' assignmentExpression\n    ;\n\nassignmentExpression\n    :   additiveExpression\n    |   Identifier assignmentOperator additiveExpression\n    ;\n\nassignmentOperator\n    :   '='\n    |   '*='\n    |\t'/='\n    |   '%='\n    |   '+='\n    |   '-='\n    ;\n\nadditiveExpression\n    :   multiplicativeExpression\n    |   additiveExpression '+' multiplicativeExpression\n    |   additiveExpression '-' multiplicativeExpression\n    ;\n\nmultiplicativeExpression\n    :   primaryExpression\n    |   multiplicativeExpression '*' primaryExpression\n    |   multiplicativeExpression '/' primaryExpression\n    |   multiplicativeExpression '%' primaryExpression\n    ;\n</code></pre><p>你可能会问：“既然用Antlr可以不管左递归问题，那之前为什么要费力气解决它呢？”那是因为当你遇到某些问题却没有现成工具时，还是要用纯手工的方法去解决问题。而且，有的工具可能没有这么智能，你需要写出符合这个工具的规则文件，比如说不能有左递归的语法规则。<strong>还是那句话：懂得基础原理，会让你站得更高。</strong></p><p>我们继续运行下面的命令，生成语法分析器：</p><pre><code>antlr PlayScript.g4\njavac antlrtest/*.java\n</code></pre><p>然后测试一下生成的语法分析器：</p><pre><code>grun antlrtest.PlayScript expression -gui\n</code></pre><p>这个命令的意思是：测试PlayScript这个类的expression方法，也就是解析表达式的方法，结果用图形化界面显示。</p><p>我们在控制台界面中输入下面的内容：</p><pre><code>age + 10 * 2  + 10\n^D\n</code></pre><p>其中^D是按下Ctl键的同时按下D，相当于在终端输入一个EOF字符，即文件结束符号（Windows操作系统要使用^Z）。当然，你也可以提前把这些语句放到文件中，把文件名作为命令参数。之后，语法分析器会分析这些语法，并弹出一个窗口来显示AST：</p><p><img src=\"https://static001.geekbang.org/resource/image/96/17/96ef2f2ca1f1465893a70e742b93fd17.jpg?wh=1142*655\" alt=\"\"></p><p>看得出来，AST完全正确，优先级和结合性也都没错。所以，Antlr生成的语法分析器还是很靠谱的。以后，你专注写语法规则就行了，可以把精力放在语言的设计和应用上。</p><h2>课程小结</h2><p>今天，我带你了解了Antlr，并用Antlr生成了词法分析器和语法分析器。有了工具的支持，你可以把主要的精力放在编写词法和语法规则上，提升了工作效率。</p><p>除此之外，我带你借鉴了成熟的词法规则和语法规则。你可以将这些规则用到自己的语言设计中。采用工具和借鉴成熟规则十分重要，站在别人的肩膀上能让自己更快成长。</p><p>在后面的课程中，我会带你快速实现报表工具、SQL解析器这种需要编译功能的应用。那时，你就更能体会到，用编译技术实现一个功能的过程，是非常高效的！与此同时，我也会带你扩展更多的语法规则，并生成一个更强大的脚本语言解释器。这样，你就会实现流程控制语句，接着探索函数、闭包、面向对象功能的实现机制。几节课之后，你的手里就真的有一门不错的脚本语言了！</p><h2>一课一思</h2><p>今天我们介绍了Antlr这个工具，你有没有使用类似工具的经验？在使用过程中又有什么心得或问题呢？欢迎在留言区分享你的心得或问题。</p><p>最后，感谢你的阅读，如果这篇文章让你有所收获，也欢迎你将它分享给更多的朋友。</p><p>本讲的示例代码位于lab/antlrtest，代码链接我放在了文末，供你参考。</p><ul>\n<li>\n<p>Hello.g4（用Antlr重写了前几讲的词法规则）：<a href=\"https://gitee.com/richard-gong/PlayWithCompiler/blob/master/lab/antlrtest/src/antlrtest/Hello.g4\">码云</a> <a href=\"https://github.com/RichardGong/PlayWithCompiler/blob/master/lab/antlrtest/src/antlrtest/Hello.g4\">GitHub</a></p>\n</li>\n<li>\n<p>CommonLexer.g4（比较成熟的词法文件）：<a href=\"https://gitee.com/richard-gong/PlayWithCompiler/blob/master/lab/antlrtest/src/antlrtest/CommonLexer.g4\">码云</a>  <a href=\"https://github.com/RichardGong/PlayWithCompiler/blob/master/lab/antlrtest/src/antlrtest/CommonLexer.g4\">GitHub</a></p>\n</li>\n<li>\n<p>PlayScript.g4（用Antlr重写了前几讲的语法规则）：<a href=\"https://gitee.com/richard-gong/PlayWithCompiler/blob/master/lab/antlrtest/src/antlrtest/PlayScript.g4\">码云</a>  <a href=\"https://github.com/RichardGong/PlayWithCompiler/blob/master/lab/antlrtest/src/antlrtest/PlayScript.g4\">GitHub</a></p>\n</li>\n<li>\n<p>ASTEvaluator.java（对AST遍历，实现整数的算术运算）：<a href=\"https://gitee.com/richard-gong/PlayWithCompiler/blob/master/lab/antlrtest/src/antlrtest/ASTEvaluator.java\">码云</a>  <a href=\"https://github.com/RichardGong/PlayWithCompiler/blob/master/lab/antlrtest/src/antlrtest/ASTEvaluator.java\">GitHub</a></p>\n</li>\n<li>\n<p>PlayScript.java（一个测试程序，实现词法分析、语法分析、公式计算）：<a href=\"https://gitee.com/richard-gong/PlayWithCompiler/blob/master/lab/antlrtest/src/antlrtest/PlayScript.java\">码云</a>  <a href=\"https://github.com/RichardGong/PlayWithCompiler/blob/master/lab/antlrtest/src/antlrtest/PlayScript.java\">GitHub</a></p>\n</li>\n</ul><p></p>","neighbors":{"left":{"article_title":"05 | 语法分析（三）：实现一门简单的脚本语言","id":125926},"right":{"article_title":"07 | 编译器前端工具（二）：用Antlr重构脚本语言","id":127781}},"comments":[{"had_liked":false,"id":132324,"user_name":"京京beaver","can_delete":false,"product_type":"c1","uid":1179056,"ip_address":"","ucode":"C21838D7CA7D6B","user_header":"https://static001.geekbang.org/account/avatar/00/11/fd/b0/e30fd916.jpg","comment_is_top":false,"comment_ctime":1568084639,"is_pvip":false,"replies":[{"id":"50730","content":"非常感谢你的整理！<br>其他同学可以参考你的配置方法！","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1568181957,"ip_address":"","comment_id":132324,"utype":1}],"discussion_count":4,"race_medal":0,"score":"83172463263","product_id":100034101,"comment_content":"1. windows环境下配置<br>可执行文件，放在D:\\tools\\antlr\\antlr-4.7.2-complete.jar下面<br><br>2.配置环境文件<br>CLASSPATH=%CLASSPATH%;D:\\tools\\antlr\\antlr-4.7.2-complete.jar<br>PATH=%PATH%n;D:\\tools\\antlr<br><br>3.手写文件antlr4.bat和grun.bat<br>antlr4.bat<br>java org.antlr.v4.Tool %*<br><br>grun.bat<br>@ECHO OFF<br>SET TEST_CURRENT_DIR=%CLASSPATH:.;=%<br>if &quot;%TEST_CURRENT_DIR%&quot; == &quot;%CLASSPATH%&quot; ( SET CLASSPATH=.;%CLASSPATH% )<br>@ECHO ON<br>java org.antlr.v4.gui.TestRig %*<br><br>4.然后就可以执行antlr4和grun命令了<br>比如antlr4 Hello.g4,  javac Hello*.java, <br>$ grun Hello r -gui<br>hello parrt<br>^Z (windows) <br><br>5.java执行路径要注意事项<br>在命令行执行java命令，记得把目录设置到src&#47;main&#47;java这里，然后输入包名.类名，才能找到。<br>这是java执行的基本规则，一般IDE里面替你做了路径转换，在命令行要自己敲入。切记。<br><br>例如<br>F:\\study_repo\\mygeek_time\\myclang-03-grammar-analysis\\src\\main\\java&gt;<br>grun com.babayetu.myclang03gramm<br>aranalysis.antlrtest.PlayScript expression -gui","like_count":19,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466878,"discussion_content":"非常感谢你的整理！\n其他同学可以参考你的配置方法！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568181957,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1144780,"avatar":"https://static001.geekbang.org/account/avatar/00/11/77/cc/8f532c1a.jpg","nickname":"魔山","note":"","ucode":"F077EAC8840644","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":67840,"discussion_content":"idea有antlr4插件，使用方便，不用花时间配置。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575182952,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1108505,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ea/19/14018371.jpg","nickname":"瓜瓜","note":"","ucode":"F90A5135A9BB4B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1144780,"avatar":"https://static001.geekbang.org/account/avatar/00/11/77/cc/8f532c1a.jpg","nickname":"魔山","note":"","ucode":"F077EAC8840644","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":157819,"discussion_content":"idea中怎样运行grun？？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1580523380,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":67840,"ip_address":""},"score":157819,"extra":""},{"author":{"id":1049513,"avatar":"https://static001.geekbang.org/account/avatar/00/10/03/a9/b0f4fa75.jpg","nickname":"lpear","note":"","ucode":"0F8774A09F16A9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1108505,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ea/19/14018371.jpg","nickname":"瓜瓜","note":"","ucode":"F90A5135A9BB4B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391234,"discussion_content":"你在idea中进行词法分析了吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630364520,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":157819,"ip_address":""},"score":391234,"extra":""}]}]},{"had_liked":false,"id":131276,"user_name":"Smallfly","can_delete":false,"product_type":"c1","uid":1013841,"ip_address":"","ucode":"D388D5E0249A69","user_header":"https://static001.geekbang.org/account/avatar/00/0f/78/51/4790e13e.jpg","comment_is_top":false,"comment_ctime":1567688798,"is_pvip":false,"replies":[{"id":"50772","content":"哇，练习自己写规则，太帮了！<br>自己动手所获得的感觉是难以替代的。<br>中间过程遇到的每个坑，都是自己的积累！<br><br>另外，这里也有几个swift的规则文件可以参考：<br>https:&#47;&#47;github.com&#47;antlr&#47;grammars-v4","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1568185342,"ip_address":"","comment_id":131276,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27337492574","product_id":100034101,"comment_content":"这一讲走的有点艰难，记录一下：<br><br>1、<br>开始执行下面的命令，报找不到 CommonLexer。<br><br>antlr PlayScript.g4<br><br>看了下 Github 才发现有这个文件。<br><br>import CommonLexer, 在语法规则文件 PlayScript.g4 中导入词法规则。<br><br>2、<br><br>antlr PlayScript.g4<br><br>上面的命令后应该先 cd .. 回退一级目录，再执行：<br><br>javac antlrtest&#47;*.java<br><br>或者，直接:<br><br>javac .&#47;*java<br><br>3、<br><br>grun antlrtest.PlayScript expression -gui<br><br>文中说执行这条命令结果会以图形化界面显示，我执行之后什么都没有输出，以为前面步骤有什么问题，重新来了一次，还是这样，往下看才意识到没输出才是正常的。。。<br><br>——<br><br>看到最后弹出的 AST 树还是蛮有意思的。<br><br>我写了一版简单的 Swfit 规则文件：<br><br>https:&#47;&#47;github.com&#47;iostalks&#47;PlayWithCompiler&#47;tree&#47;lecture-6&#47;PlayWithCompiler&#47;Antlr","like_count":6,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466365,"discussion_content":"哇，练习自己写规则，太帮了！\n自己动手所获得的感觉是难以替代的。\n中间过程遇到的每个坑，都是自己的积累！\n\n另外，这里也有几个swift的规则文件可以参考：\nhttps://github.com/antlr/grammars-v4","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568185342,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164929,"user_name":"七月有风","can_delete":false,"product_type":"c1","uid":1439990,"ip_address":"","ucode":"B3F82397347C5B","user_header":"https://static001.geekbang.org/account/avatar/00/15/f8/f6/3e2db176.jpg","comment_is_top":false,"comment_ctime":1577113197,"is_pvip":false,"replies":[{"id":"64922","content":"感谢分享！<br>我这两天整理了Antlr使用的要点，可以参见这里：<br>https:&#47;&#47;github.com&#47;RichardGong&#47;PlayWithCompiler&#47;blob&#47;master&#47;antlr_install.md","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1577711799,"ip_address":"","comment_id":164929,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14462015085","product_id":100034101,"comment_content":"macOS下，需要将把 Antlr 的 JAR 文件设置到 CLASSPATH 环境变量中：<br>如果是用Homebrew 安装的 Antlr，安装路径是：&#47;usr&#47;local&#47;Cellar&#47;antlr&#47;4.7.2&#47;antlr-4.7.2-complete.jar；<br>可以使用vi ~&#47;.bash_profile命令打开bash_profile文件，将export CLASSPATH=&quot;.:&#47;usr&#47;local&#47;Cellar&#47;antlr&#47;4.7.2&#47;antlr-4.7.2-complete.jar:$CLASSPATH&quot;这段代码复制到里面。<br>然后就可以运行javac *.java了","like_count":3,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478954,"discussion_content":"感谢分享！\n我这两天整理了Antlr使用的要点，可以参见这里：\nhttps://github.com/RichardGong/PlayWithCompiler/blob/master/antlr_install.md","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577711799,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127822,"user_name":"kaixiao7","can_delete":false,"product_type":"c1","uid":1242577,"ip_address":"","ucode":"505EC4AFB5E656","user_header":"https://static001.geekbang.org/account/avatar/00/12/f5/d1/cc6f82eb.jpg","comment_is_top":false,"comment_ctime":1566798164,"is_pvip":false,"replies":[{"id":"47390","content":"windows下用^Z？我都没注意到这点。<br>好的，一个有用的知识，应该加到文稿中去。<br>谢谢你的提醒！<br>20年前开始学unix命令的时候，就一直用^D，完全没注意到在windows下的用法:-D<br>","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1566803560,"ip_address":"","comment_id":127822,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14451700052","product_id":100034101,"comment_content":"在Windows下需要用 ^z 即Ctrl+z 来弹出AST窗口<br><br>That ^D means EOF on unix; it&#39;s ^Z in Windows.","like_count":4,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464667,"discussion_content":"windows下用^Z？我都没注意到这点。\n好的，一个有用的知识，应该加到文稿中去。\n谢谢你的提醒！\n20年前开始学unix命令的时候，就一直用^D，完全没注意到在windows下的用法:-D\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566803560,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127749,"user_name":"PythonAI","can_delete":false,"product_type":"c1","uid":1015029,"ip_address":"","ucode":"E07F2E5E357451","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/f5/2c29b0d7.jpg","comment_is_top":false,"comment_ctime":1566788051,"is_pvip":false,"replies":[{"id":"47338","content":"expression前要有空格，前面没有antlr。<br>grun antlrtest.PlayScript expression -gui<br>我请编辑把那个空格加上。","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1566792389,"ip_address":"","comment_id":127749,"utype":1}],"discussion_count":3,"race_medal":0,"score":"14451689939","product_id":100034101,"comment_content":"➜  antlr grun antlrtest.PlayScriptexpression -gui<br><br>Can&#39;t load antlrtest.PlayScriptexpression as lexer or parser","like_count":3,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464635,"discussion_content":"expression前要有空格，前面没有antlr。\ngrun antlrtest.PlayScript expression -gui\n我请编辑把那个空格加上。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566792389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1179056,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fd/b0/e30fd916.jpg","nickname":"京京beaver","note":"","ucode":"C21838D7CA7D6B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8857,"discussion_content":"如果package的包名和老师写的不一样，记住在执行java命令时，把目录指向src\\main\\java\n例如\nF:\\study_repo\\mygeek_time\\myclang-03-grammar-analysis\\src\\main\\java>\ngrun com.babayetu.myclang03gramm\naranalysis.antlrtest.PlayScript expression -gui","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568084255,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015029,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7c/f5/2c29b0d7.jpg","nickname":"PythonAI","note":"","ucode":"E07F2E5E357451","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6221,"discussion_content":"antlr 是我的目录名，可以了，多谢老师。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566793930,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165687,"user_name":"七月有风","can_delete":false,"product_type":"c1","uid":1439990,"ip_address":"","ucode":"B3F82397347C5B","user_header":"https://static001.geekbang.org/account/avatar/00/15/f8/f6/3e2db176.jpg","comment_is_top":false,"comment_ctime":1577282608,"is_pvip":false,"replies":[{"id":"64897","content":"可能是CLASSPATH设置的问题，或者是运行grun命令的目录不对。参见我整理的一篇文字，梳理了antlr使用的要点：<br>https:&#47;&#47;github.com&#47;RichardGong&#47;PlayWithCompiler&#47;blob&#47;master&#47;antlr_install.md<br>","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1577697961,"ip_address":"","comment_id":165687,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10167217200","product_id":100034101,"comment_content":"不知道是什么问题？<br>$ grun Hello tokens -tokens Hello.play<br>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: antlrtest&#47;Hello (wrong name: Hello)<br>        at java.base&#47;java.lang.ClassLoader.defineClass1(Native Method)<br>        at java.base&#47;java.lang.ClassLoader.defineClass(ClassLoader.java:1016)<br>        at java.base&#47;java.security.SecureClassLoader.defineClass(SecureClassLoader.java:174)<br>        at java.base&#47;jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:802)<br>        at java.base&#47;jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:700)<br>        at java.base&#47;jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:623)<br>        at java.base&#47;jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)<br>        at java.base&#47;jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)<br>        at java.base&#47;java.lang.ClassLoader.loadClass(ClassLoader.java:521)<br>        at org.antlr.v4.gui.TestRig.process(TestRig.java:135)<br>        at org.antlr.v4.gui.TestRig.main(TestRig.java:119)","like_count":2,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479258,"discussion_content":"可能是CLASSPATH设置的问题，或者是运行grun命令的目录不对。参见我整理的一篇文字，梳理了antlr使用的要点：\nhttps://github.com/RichardGong/PlayWithCompiler/blob/master/antlr_install.md\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577697961,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2916501,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/80/95/00354621.jpg","nickname":"！","note":"","ucode":"9C90F33B43177C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560528,"discussion_content":"一样的问题。。。。生成token没这个问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649381499,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129872,"user_name":"mudfrog","can_delete":false,"product_type":"c1","uid":1506545,"ip_address":"","ucode":"3789D4C231D113","user_header":"","comment_is_top":false,"comment_ctime":1567309235,"is_pvip":false,"replies":[{"id":"48565","content":"1.grun是用的Class文件，是java类。<br>2.但运行grun的时候，最好就在CLASSPATH的目录下。<br>假设，class和g4文件位于：<br>playscript-java&#47;src&#47;main&#47;play<br><br>其中play是包名，而CLASSPATH设置的是：<br>playscript-java&#47;src&#47;main<br>那么你就在main这个目录下运行grun。<br><br>如果都不带包，就更简单一些，让grun就在带有class和.g4的目录中运行就好。<br><br>如果还有问题的话，请继续再问！","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1567406784,"ip_address":"","comment_id":129872,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10157243827","product_id":100034101,"comment_content":"老师，我的程序能编译通过，也能正常运行，能正常的解析和运算出来，但就是想看看语法树直观一些。我使用grun的时候总是提示Can&#39;t load CalExpr as lexer or parser，这里CalExpr到底是G4文件还是tokens文件呢，我把这两个文件都拷贝到src目录下了。我用的是win7底下的eclipse，","like_count":2,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465687,"discussion_content":"1.grun是用的Class文件，是java类。\n2.但运行grun的时候，最好就在CLASSPATH的目录下。\n假设，class和g4文件位于：\nplayscript-java/src/main/play\n\n其中play是包名，而CLASSPATH设置的是：\nplayscript-java/src/main\n那么你就在main这个目录下运行grun。\n\n如果都不带包，就更简单一些，让grun就在带有class和.g4的目录中运行就好。\n\n如果还有问题的话，请继续再问！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567406784,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1506545,"avatar":"","nickname":"mudfrog","note":"","ucode":"3789D4C231D113","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7046,"discussion_content":"问题已经解决了。是由于我对于步骤不熟悉。使用antlr的步骤有5步：\n1、生成g4文件\n2、antlr编译g4文件，产生一大堆java文件\n3、javac编译java文件，产生class文件\n4、grun运行生成的parser的clase\n5、输入表达式，然后回车，在新行中输入^Z，然后回车，就会弹出图形的语法树","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1567322080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333731,"user_name":"Geek_6304e3","can_delete":false,"product_type":"c1","uid":2905630,"ip_address":"","ucode":"8DD9A6D8E7DC60","user_header":"","comment_is_top":false,"comment_ctime":1644489731,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5939457027","product_id":100034101,"comment_content":"&#39;grun antlrtest.PlayScript expression -gui&#39; 执行的时候提示 &#39;Can&#39;t load antlrtest.PlayScript as lexer or parser&#39;，前面步骤都正常","like_count":1},{"had_liked":false,"id":284005,"user_name":"minghu6","can_delete":false,"product_type":"c1","uid":1050269,"ip_address":"","ucode":"F44058E21B14C9","user_header":"","comment_is_top":false,"comment_ctime":1616035160,"is_pvip":false,"replies":[{"id":"103090","content":"谢谢推荐Antlr4电子书！<br>以及提出的建议！","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1616116562,"ip_address":"","comment_id":284005,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5911002456","product_id":100034101,"comment_content":"ANTLR的使用一定要有 “The Definitive ANTLR 4 Reference”  推荐电子版 https:&#47;&#47;github.com&#47;antlr&#47;antlr4&#47;blob&#47;master&#47;doc&#47;index.md<br><br>可以做关键字搜索，查点儿语法概念性的东西比较方便，用一位网友说的话：<br>If you do not already have &quot;The Definitive ANTLR 4 Reference&quot; book I recommend getting hold of it. Will save you a lot of time. <br>话说极客时间的内容还不错，没有那么多花里胡哨的噱头，但是这个书签笔记和评论的体验太差！<br>书签笔记甚至没有结构，留言也不支持markdown<br><br>一定要ommonLexer.g4","like_count":1,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517202,"discussion_content":"谢谢推荐Antlr4电子书！\n以及提出的建议！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616116562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":230230,"user_name":"江世民","can_delete":false,"product_type":"c1","uid":1966624,"ip_address":"","ucode":"B328FA859E1007","user_header":"","comment_is_top":false,"comment_ctime":1593317963,"is_pvip":false,"replies":[{"id":"85231","content":"感谢分享你的经验！<br>你遇到的坑，会让其他同学少走弯路！","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1593499716,"ip_address":"","comment_id":230230,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5888285259","product_id":100034101,"comment_content":"遇到了一个大坑。<br>Windows环境下，添加jar包到CLASSPATH中时，最好写在前面。如果是追加在后面，系统很可能不识别。","like_count":2,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499807,"discussion_content":"感谢分享你的经验！\n你遇到的坑，会让其他同学少走弯路！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593499716,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":194349,"user_name":"漏网之渔","can_delete":false,"product_type":"c1","uid":1092258,"ip_address":"","ucode":"8D7896E99E784C","user_header":"https://static001.geekbang.org/account/avatar/00/10/aa/a2/c7a3758d.jpg","comment_is_top":false,"comment_ctime":1585053190,"is_pvip":true,"replies":[{"id":"74118","content":"感谢详细的分享！<br>你遇到的某些问题，如GBK问题，我都没遇到过。其他人如果遇到类似的问题，可以从你的分享中受益！","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1585125142,"ip_address":"","comment_id":194349,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5880020486","product_id":100034101,"comment_content":"弄了三个小时，终于好了。老师文档写的很清楚。<br>https:&#47;&#47;github.com&#47;RichardGong&#47;PlayWithCompiler&#47;blob&#47;master&#47;antlr_install.md<br>我遇到的问题有两点：<br>1.执行 grun 的时候 没带package名如grun Hello tokens -tokens hello.play，会提示java.lang.NoClassDefFoundError: Hello (wrong name: antlrtest&#47;Hello)，这是因为老师源码Hello带了pack保命antlrtest<br><br>我的解决方法是在src\\antlrtest\\目录下执行命令grun antlrtest.Hello tokens -tokens hello.play<br><br>2.执行grun命令报错误java.nio.file.NoSuchFileException: hello.play，这是因为我在antlrtest\\src\\目录下运行的grun，而hello.play在antlrtest\\src\\antlrtest\\下，解决方法是在antlrtest\\src\\antlrtest\\下执行grun命令<br>，或者把hello.play文件代码拷贝到src\\目录下再执行grun命令。<br><br>另外如果遇到javac命令遇见GBK错误，是因为编码格式问题，解决方法：javac -encoding utf-8 PlayScript.java<br><br>如果遇到找不到parse lexer问题，Class Path需要添加src目录","like_count":1,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488815,"discussion_content":"感谢详细的分享！\n你遇到的某些问题，如GBK问题，我都没遇到过。其他人如果遇到类似的问题，可以从你的分享中受益！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585125142,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1041669,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/e5/05/b7501f88.jpg","nickname":"Charles","note":"","ucode":"CCA9D998A9DE3F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574764,"discussion_content":"grun antlrtest.Hello tokens -tokens antlrtest/hello.play","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654324007,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156728,"user_name":"火火","can_delete":false,"product_type":"c1","uid":1264223,"ip_address":"","ucode":"7CC7E3B54B6A43","user_header":"https://static001.geekbang.org/account/avatar/00/13/4a/5f/72195e7a.jpg","comment_is_top":false,"comment_ctime":1574942863,"is_pvip":false,"replies":[{"id":"64893","content":"这个问题的原因是antlr的jar包没有放到CLASSPATH中。<br>我这两天整理了antlr安装、配置、使用的一些信息，写了一个说明文件，你可以参考一下：<br>https:&#47;&#47;github.com&#47;RichardGong&#47;PlayWithCompiler&#47;blob&#47;master&#47;antlr_install.md","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1577687364,"ip_address":"","comment_id":156728,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5869910159","product_id":100034101,"comment_content":"Hello.java:2: 错误: 程序包org.antlr.v4.runtime不存在<br>import org.antlr.v4.runtime.Lexer;<br>                           ^<br>Hello.java:3: 错误: 程序包org.antlr.v4.runtime不存在<br>import org.antlr.v4.runtime.CharStream;<br>                           ^<br>Hello.java:4: 错误: 程序包org.antlr.v4.runtime不存在<br>import org.antlr.v4.runtime.Token;<br>                           ^<br>Hello.java:5: 错误: 程序包org.antlr.v4.runtime不存在<br>import org.antlr.v4.runtime.TokenStream;<br>                           ^<br>Hello.java:8: 错误: 程序包org.antlr.v4.runtime.dfa不存在<br>import org.antlr.v4.runtime.dfa.DFA;<br>                               ^<br>Hello.java:12: 错误: 找不到符号","like_count":1,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476215,"discussion_content":"这个问题的原因是antlr的jar包没有放到CLASSPATH中。\n我这两天整理了antlr安装、配置、使用的一些信息，写了一个说明文件，你可以参考一下：\nhttps://github.com/RichardGong/PlayWithCompiler/blob/master/antlr_install.md","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577687364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1475913,"avatar":"https://static001.geekbang.org/account/avatar/00/16/85/49/b29e96ea.jpg","nickname":"Jokky💫","note":"","ucode":"B8E6B913D1E975","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278351,"discussion_content":"请问遇到这个错误，该怎么样解决呢？我也遇到了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591176955,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1115232,"avatar":"https://static001.geekbang.org/account/avatar/00/11/04/60/64d166b6.jpg","nickname":"Fan","note":"","ucode":"3BF28670FD9407","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1475913,"avatar":"https://static001.geekbang.org/account/avatar/00/16/85/49/b29e96ea.jpg","nickname":"Jokky💫","note":"","ucode":"B8E6B913D1E975","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":334151,"discussion_content":"这个问题的原因是antlr的jar包没有放到CLASSPATH中","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607754184,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":278351,"ip_address":""},"score":334151,"extra":""}]}]},{"had_liked":false,"id":129035,"user_name":"沉淀的梦想","can_delete":false,"product_type":"c1","uid":1177315,"ip_address":"","ucode":"BCB7C26F9D214B","user_header":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","comment_is_top":false,"comment_ctime":1567013444,"is_pvip":false,"replies":[{"id":"48273","content":"再检查一下规则文件。<br>你看看你的词法规则里是否给加号和减号起了ADD和SUB这样的名字，就像下面这样。<br>ADD : &#39;+&#39;;<br>SUB : &#39;-&#39;;<br>只要有这样的定义，在语法里无论用ADD还是用&#39;+&#39;，都会生成ADD()这样的方法。<br>","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1567151267,"ip_address":"","comment_id":129035,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5861980740","product_id":100034101,"comment_content":"老师，为什么我用antlr生成的AdditiveExpressionContext就没有示例程序中的ADD() SUB()这些直接以token名字命名的方法呢？","like_count":1,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465236,"discussion_content":"再检查一下规则文件。\n你看看你的词法规则里是否给加号和减号起了ADD和SUB这样的名字，就像下面这样。\nADD : &amp;#39;+&amp;#39;;\nSUB : &amp;#39;-&amp;#39;;\n只要有这样的定义，在语法里无论用ADD还是用&amp;#39;+&amp;#39;，都会生成ADD()这样的方法。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567151267,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1177315,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","nickname":"沉淀的梦想","note":"","ucode":"BCB7C26F9D214B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7160,"discussion_content":"我试了一下，在我的antlr版本(4.7)和环境（用antlr4-mvn-plugin）下，必须要把&#39;+&#39;写作ADD，才有这个ADD()方法，这写字面量&#39;+&#39;的话没有这个方法，只能自己调用ctx.getToken(PlayScriptParser.ADD, 0)来等效","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567409170,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128068,"user_name":"雲至","can_delete":false,"product_type":"c1","uid":1568487,"ip_address":"","ucode":"47E2D099322BB1","user_header":"https://static001.geekbang.org/account/avatar/00/17/ee/e7/4375e97c.jpg","comment_is_top":false,"comment_ctime":1566827123,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5861794419","product_id":100034101,"comment_content":"老师可以讲一下规则文件里主要单词的意义吗？   看的有点懵","like_count":1},{"had_liked":false,"id":346867,"user_name":"Geek_216bc5","can_delete":false,"product_type":"c1","uid":2984811,"ip_address":"","ucode":"FF4DB930A8122E","user_header":"","comment_is_top":false,"comment_ctime":1653480558,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1653480558","product_id":100034101,"comment_content":"我为什么没有生成 PlayScriptBaseVisitor.java文件。","like_count":0},{"had_liked":false,"id":345003,"user_name":"A君","can_delete":false,"product_type":"c1","uid":1940105,"ip_address":"","ucode":"FE96F089C2312C","user_header":"https://static001.geekbang.org/account/avatar/00/1d/9a/89/babe8b52.jpg","comment_is_top":false,"comment_ctime":1651927432,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1651927432","product_id":100034101,"comment_content":"如果源文件有多个且不在同一目录，是要对每个文件都单独做词法语法分析吗，那多个AST树要如何合并？","like_count":0},{"had_liked":false,"id":344810,"user_name":"式溪Chon W. Lam","can_delete":false,"product_type":"c1","uid":1367943,"ip_address":"","ucode":"9FE1A13138DF66","user_header":"https://static001.geekbang.org/account/avatar/00/14/df/87/7dedba22.jpg","comment_is_top":false,"comment_ctime":1651802728,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651802728","product_id":100034101,"comment_content":"我开发了一个vscode插件, 把antlr的功能封装进去, 安装java就可以使用: https:&#47;&#47;marketplace.visualstudio.com&#47;items?itemName=ChonLam.justAntlr<br><br>(暂时只有windows可以使用antlr的测试功能)","like_count":1},{"had_liked":false,"id":341554,"user_name":"gggggggb","can_delete":false,"product_type":"c1","uid":1350738,"ip_address":"","ucode":"4DA862E45C331D","user_header":"https://static001.geekbang.org/account/avatar/00/14/9c/52/8a4902ce.jpg","comment_is_top":false,"comment_ctime":1649688638,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1649688638","product_id":100034101,"comment_content":"D:\\antlr 的目录<br><br>2022&#47;04&#47;11  22:45    &lt;DIR&gt;          .<br>2022&#47;04&#47;11  22:45    &lt;DIR&gt;          ..<br>2021&#47;08&#47;07  12:16         2,100,564 antlr-4.9.2-complete.jar<br>2022&#47;04&#47;11  21:45                63 antlr4.bat<br>2022&#47;04&#47;11  21:45                71 grun.bat<br>2022&#47;04&#47;11  22:45             5,663 Hello.class<br>2022&#47;04&#47;11  21:34               872 Hello.g4<br>2022&#47;04&#47;11  22:45             4,525 Hello.interp<br>2022&#47;04&#47;11  22:45             6,322 Hello.java<br>2022&#47;04&#47;11  22:38                 0 hello.play<br>2022&#47;04&#47;11  22:45               374 Hello.tokens<br>               9 个文件      2,118,454 字节<br>               2 个目录 262,626,590,720 可用字节<br><br>D:\\antlr&gt;grun Hello tokens -tokens hello.play<br><br>D:\\antlr&gt;java  -cp D:\\antlr\\antlr-4.9.2-complete.jar org.antlr.v4.gui.TestRig Hello tokens -tokens hello.play<br>Can&#39;t load Hello as lexer or parser<br><br>这个是什么情况？","like_count":0},{"had_liked":false,"id":338102,"user_name":"文涛💦","can_delete":false,"product_type":"c1","uid":1438651,"ip_address":"","ucode":"EC543C7DE2B26A","user_header":"https://static001.geekbang.org/account/avatar/00/15/f3/bb/3d4633be.jpg","comment_is_top":false,"comment_ctime":1647303330,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1647303330","product_id":100034101,"comment_content":"采坑，文件路径问题导致运行：grun Hello tokens -tokens hello.play <br>报错：Warning: TestRig moved to org.antlr.v4.gui.TestRig; calling automatically<br>Can&#39;t load antlrtest.Hello as lexer or parser<br>需要删除Hello.g4中的@header","like_count":0},{"had_liked":false,"id":335979,"user_name":"迎风的树叶","can_delete":false,"product_type":"c1","uid":2358746,"ip_address":"","ucode":"FE606E6F34CA27","user_header":"https://static001.geekbang.org/account/avatar/00/23/fd/da/ef5532b6.jpg","comment_is_top":false,"comment_ctime":1645802374,"is_pvip":true,"discussion_count":0,"race_medal":4,"score":"1645802374","product_id":100034101,"comment_content":"在VSCode里面测试中文关键字的时候发现用UTF-8编码解析出来的‘如果’是乱码，如下所示<br>[@5,15:17=&#39;濡傛灉&#39;,&lt;If&gt;,2:0]<br>经过调整编码之后，发现GB2312，GB18030好像都可以可以正常输出如下<br>[@5,15:16=&#39;如果&#39;,&lt;If&gt;,2:0]<br>","like_count":0},{"had_liked":false,"id":333760,"user_name":"Geek_6304e3","can_delete":false,"product_type":"c1","uid":2905630,"ip_address":"","ucode":"8DD9A6D8E7DC60","user_header":"","comment_is_top":false,"comment_ctime":1644501310,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1644501310","product_id":100034101,"comment_content":"最后的执行命令&#39;javac antlrtest&#47;*.java&#39;，要先回退到上一级目录，不然&#39;grun antlrtest.PlayScript expression -gui&#39;会执行失败","like_count":0},{"had_liked":false,"id":323901,"user_name":"Geek_d3c05f","can_delete":false,"product_type":"c1","uid":2320414,"ip_address":"","ucode":"B4B06BB2A4BC6C","user_header":"","comment_is_top":false,"comment_ctime":1638200992,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638200992","product_id":100034101,"comment_content":"最近在练内功，练到了编译原理了，这次闭关只需要先快速看完一遍。面试是基本不会考编译原理的，只需要了解原理就行。换工作后再实践。编译原理是学校时的一门专业课，不过学生时代是很难理解这门课程的，也可能大学教授讲课太显摆脱离实际拿一大堆术语吓死你。4年多的工作经验再回过头来看，看到这里觉得这门课程其实也还好，数据结构算法有基础，能看懂常见的正则表达式，遇到不知道的术语搜一下，遇到算法不理解的，可以单步调试一下，然后最主要的就是多实践练习。用antlr工具定义规则来写一些平常用的工具效率应该会高很多，也更灵活","like_count":0},{"had_liked":false,"id":315374,"user_name":"ano","can_delete":false,"product_type":"c1","uid":1783342,"ip_address":"","ucode":"7DE64BDFA78550","user_header":"https://static001.geekbang.org/account/avatar/00/1b/36/2e/376a3551.jpg","comment_is_top":false,"comment_ctime":1633867659,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1633867659","product_id":100034101,"comment_content":"老师，我有一个关于不同语言如何交互的问题，想请教一下.  Tensorflow 的 server 是用 c++ 写的，但是它却支持不同语言的调用，比如 C&#47;C++, Java, Python, Go, JavaScript. 这是如何做到的呢？我猜它可能是用编译技术实战的。","like_count":0,"discussions":[{"author":{"id":2320414,"avatar":"","nickname":"Geek_d3c05f","note":"","ucode":"B4B06BB2A4BC6C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534526,"discussion_content":"这个和编译原理关系不太大，语言只是编程的工具，你说的这个是不同的语言只要实现了Tensorflow server相同的协议，比如rpc或者http或者其他自定义协议就可以交互了。其实协议在这里的作用就是抹平不同语言之间的差异","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638201477,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2835328,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIQz0Micjv7w79LXDXF0cclRm2wnpnXg5BTbuPqC6wn8wnB5fI1SP192OP3tgY1dNhG7hsn832gWicg/132","nickname":"Geek_96c9ed","note":"","ucode":"80A71E3E1A7066","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411685,"discussion_content":"我也一直有这个疑惑，求赐教","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635984683,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313776,"user_name":"hYector","can_delete":false,"product_type":"c1","uid":2173880,"ip_address":"","ucode":"C1DEEB8FAC0B2E","user_header":"https://static001.geekbang.org/account/avatar/00/21/2b/b8/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1632661195,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632661195","product_id":100034101,"comment_content":"老师您好，我用前面的词法，token倒是能解析出来，不过最后都报 mismatched input &#39;&lt;EOF&gt;&#39; expecting {IntLiteral, &#39;(&#39;, &#39;int&#39;, Identifier}，请问如何解决呢？","like_count":0},{"had_liked":false,"id":286351,"user_name":"紫灵斗圣","can_delete":false,"product_type":"c1","uid":2531396,"ip_address":"","ucode":"4B14F3C714C72F","user_header":"","comment_is_top":false,"comment_ctime":1617265047,"is_pvip":false,"replies":[{"id":"105366","content":"对规则的书写顺序是没有要求的。<br>在使用Antlr生成的Parser的时候，你可以指定把那条规则作为根规则。比如，你可以让Parser解析出一个prog节点，那就得到以prog为根的一棵树。你也可以让它只是解析一个Statement，或者一个表达式。","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1619764917,"ip_address":"","comment_id":286351,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1617265047","product_id":100034101,"comment_content":"antlr的语法规则的顺序又要求吗，是否规则1是程序的开头","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517955,"discussion_content":"对规则的书写顺序是没有要求的。\n在使用Antlr生成的Parser的时候，你可以指定把那条规则作为根规则。比如，你可以让Parser解析出一个prog节点，那就得到以prog为根的一棵树。你也可以让它只是解析一个Statement，或者一个表达式。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619764917,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284077,"user_name":"minghu6","can_delete":false,"product_type":"c1","uid":1050269,"ip_address":"","ucode":"F44058E21B14C9","user_header":"","comment_is_top":false,"comment_ctime":1616057790,"is_pvip":false,"replies":[{"id":"105385","content":"Gitment？我记下来，研究一下...","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1619790297,"ip_address":"","comment_id":284077,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1616057790","product_id":100034101,"comment_content":"要是有个gitment 直接和代码仓库的issue关联起来就好了","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517224,"discussion_content":"Gitment？我记下来，研究一下...","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619790297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284072,"user_name":"minghu6","can_delete":false,"product_type":"c1","uid":1050269,"ip_address":"","ucode":"F44058E21B14C9","user_header":"","comment_is_top":false,"comment_ctime":1616057202,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616057202","product_id":100034101,"comment_content":"感觉PlayScript.g4有很多不合理的规则，比如允许在声明（declare）里使用 `=`以外的所有赋值符号<br>还有块里面的条目规则上不用分号来分开看起啦有点儿怪，等等还有其他的。","like_count":0},{"had_liked":false,"id":279944,"user_name":"Gaollard","can_delete":false,"product_type":"c1","uid":1378779,"ip_address":"","ucode":"1B200F5E73C3E1","user_header":"https://static001.geekbang.org/account/avatar/00/15/09/db/78996b11.jpg","comment_is_top":false,"comment_ctime":1614009615,"is_pvip":false,"replies":[{"id":"102109","content":"加油！","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1614649823,"ip_address":"","comment_id":279944,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1614009615","product_id":100034101,"comment_content":"看着好激动，对于我这样非科班出身的码农，简直打开了新世界大门。","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515937,"discussion_content":"加油！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614649823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":261984,"user_name":"金龟","can_delete":false,"product_type":"c1","uid":1228500,"ip_address":"","ucode":"1C7D35C8AE8D9D","user_header":"https://static001.geekbang.org/account/avatar/00/12/be/d4/ff1c1319.jpg","comment_is_top":false,"comment_ctime":1605597910,"is_pvip":false,"replies":[{"id":"98563","content":"用开源项目的时候，遇到这样那样的问题，是常态。<br>接下来可能需要做的是：<br>1.查看别人是否遇到同类型问题；<br>2.自己解决该问题，并分享，从而造福后来者；<br>3.甚至动手提交issue，帮忙修bug，这就成了代码的贡献者。<br>问题驱动，是开源社区协作的方式。","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1609809520,"ip_address":"","comment_id":261984,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1605597910","product_id":100034101,"comment_content":"idea 的antlr插件，好像使用不了，怪了","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509682,"discussion_content":"用开源项目的时候，遇到这样那样的问题，是常态。\n接下来可能需要做的是：\n1.查看别人是否遇到同类型问题；\n2.自己解决该问题，并分享，从而造福后来者；\n3.甚至动手提交issue，帮忙修bug，这就成了代码的贡献者。\n问题驱动，是开源社区协作的方式。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609809520,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243080,"user_name":"柯恩","can_delete":false,"product_type":"c1","uid":1445990,"ip_address":"","ucode":"728F09B46D0982","user_header":"https://static001.geekbang.org/account/avatar/00/16/10/66/e7de2f38.jpg","comment_is_top":false,"comment_ctime":1597940762,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597940762","product_id":100034101,"comment_content":"expression-assignmentExpression{+，*，+} 老师我这里弹出来的是这个","like_count":0},{"had_liked":false,"id":236723,"user_name":"Geek_78eadb","can_delete":false,"product_type":"c1","uid":1712955,"ip_address":"","ucode":"843C6C380D28FA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/OYQh8KlUgMx0sZ35felqqRlboXkcOFib0qGgRHuvFCNIMzxRzxN8SjZpwtDuS0PGV0L0Pneiak7yzcd043f2efbg/132","comment_is_top":false,"comment_ctime":1595511391,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595511391","product_id":100034101,"comment_content":"用 python 跟着操作一遍，结果各种卡壳，好像跟 java 版本的完全不一样<br><br>java org.antlr.v4.gui.TestRig Hello tokens -tokens .\\hello.play<br>Can&#39;t load Hello as lexer or parser","like_count":0},{"had_liked":false,"id":232130,"user_name":"空山新雨后","can_delete":false,"product_type":"c1","uid":1763603,"ip_address":"","ucode":"5F945AFB45AE42","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epDGb8dkicTpmr4ic37dzEngibHQ0BvZyToQhsD0icMy2qxqiaJelYpPqzzkTfXsCibqjwbkK94beYC0N6Q/132","comment_is_top":false,"comment_ctime":1593863676,"is_pvip":false,"replies":[{"id":"86339","content":"肯定是设置CLASSPATH的问题，好好检查一下！","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1594560034,"ip_address":"","comment_id":232130,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1593863676","product_id":100034101,"comment_content":"老师，我执行antlr Hello.g4 没有问题，但执行javac *.java时报错 “程序包org.antlr.v4.runtime不存在”等问题，是我配置环境变量的问题么？","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500525,"discussion_content":"肯定是设置CLASSPATH的问题，好好检查一下！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594560034,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":227040,"user_name":"englefly","can_delete":false,"product_type":"c1","uid":1145907,"ip_address":"","ucode":"E3FCF19E618718","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep2gRIticwS6CiatsCiaU4QRjAODKibQevrhSciatrmd90lNIZFxywE9yyZgAxKTmWiaBSH4zZUcRIV46qQ/132","comment_is_top":false,"comment_ctime":1592271354,"is_pvip":false,"replies":[{"id":"84103","content":"我要了解更多一点信息：你用Antlr生成的是C++代码还是Java代码？这两个不太一样。因为JVM只对热点代码做优化编译。如果只是解释执行或者用C1编译器编译，就会比较慢。详细你可以参考《编译原理实战课》中Java JIT编译器的部分。<br><br>另外，在实战课中，我也介绍了MySQL的编译器。MySQL的语法分析器也是用工具生成的，用的是Bison，生成的是C++代码。我估计，同样都使用C++代码的情况下，性能可能不会差很多。但具体也要测试一下。<br>或者，你就像MySQL一样，用Bison生成就好了，并且可以参考MySQL的源代码。<br><br>另外补充一下，MySQL Workbench这个客户端工具采用了Antlr来生成语法解析器，也是基于C++的，你也可以参考。","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1592554698,"ip_address":"","comment_id":227040,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1592271354","product_id":100034101,"comment_content":"宫老师，Antlr的性能怎样？我们用antlr做了一个sql解析，当遇到比较长的sql语句是，antlr解析花了100ms，而mysql 只用了9ms。不知道是我们用法的问题，还是antlr本身为了使用简单牺牲了一些性能。","like_count":1,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498470,"discussion_content":"我要了解更多一点信息：你用Antlr生成的是C++代码还是Java代码？这两个不太一样。因为JVM只对热点代码做优化编译。如果只是解释执行或者用C1编译器编译，就会比较慢。详细你可以参考《编译原理实战课》中Java JIT编译器的部分。\n\n另外，在实战课中，我也介绍了MySQL的编译器。MySQL的语法分析器也是用工具生成的，用的是Bison，生成的是C++代码。我估计，同样都使用C++代码的情况下，性能可能不会差很多。但具体也要测试一下。\n或者，你就像MySQL一样，用Bison生成就好了，并且可以参考MySQL的源代码。\n\n另外补充一下，MySQL Workbench这个客户端工具采用了Antlr来生成语法解析器，也是基于C++的，你也可以参考。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592554698,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":202916,"user_name":"Geek_8292d8","can_delete":false,"product_type":"c1","uid":1951949,"ip_address":"","ucode":"88628FC6D4F2C0","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/hkzTTpS89YDu3h48blvYUlzAKVEYkBhXiameEdJJHr6c9WUxfzf3sQ5wn0lwJQN2PTf2GJfqtBkNb0Ct35WuBew/132","comment_is_top":false,"comment_ctime":1586085977,"is_pvip":false,"replies":[{"id":"76941","content":"我之前在github上整理过一个antlr使用的说明，应该比较详细了。<br>https:&#47;&#47;github.com&#47;RichardGong&#47;PlayWithCompiler&#47;blob&#47;master&#47;antlr_install.md<br>你看看是否有帮助。<br>多检查一下CLASSPATH、运行命令的当前目录。","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1586765899,"ip_address":"","comment_id":202916,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1586085977","product_id":100034101,"comment_content":"执行下述语句：<br>grun antlrtest.PlayScript expression -gui<br><br>最后并没有swing的可视化窗口弹出，直接就结束了，什么都没输出？<br>请问如何输出，麻烦详细点。","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490714,"discussion_content":"我之前在github上整理过一个antlr使用的说明，应该比较详细了。\nhttps://github.com/RichardGong/PlayWithCompiler/blob/master/antlr_install.md\n你看看是否有帮助。\n多检查一下CLASSPATH、运行命令的当前目录。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586765899,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200348,"user_name":"coder","can_delete":false,"product_type":"c1","uid":1399673,"ip_address":"","ucode":"929E3FFD14EFC8","user_header":"https://static001.geekbang.org/account/avatar/00/15/5b/79/d55044ac.jpg","comment_is_top":false,"comment_ctime":1585575287,"is_pvip":false,"replies":[{"id":"76611","content":"确实如此。antlr的作者蛮勤奋的，在不断地优化升级。特别是antlr4有不少创新。","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1586513787,"ip_address":"","comment_id":200348,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1585575287","product_id":100034101,"comment_content":"用过flex和bison，跟antlr比起来，感觉antlr的模块化功能做得更全，包装出了visitor和listener 两种模式。跟flex和bison相比，antlr需要手写的代码更加少一些，且入门难度比flex和bison低很多","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489999,"discussion_content":"确实如此。antlr的作者蛮勤奋的，在不断地优化升级。特别是antlr4有不少创新。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586513787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":186480,"user_name":"dbo","can_delete":false,"product_type":"c1","uid":1052678,"ip_address":"","ucode":"3C5343589E47C2","user_header":"","comment_is_top":false,"comment_ctime":1583851041,"is_pvip":false,"replies":[{"id":"74142","content":"antlr版本问题？<br>感谢分享。","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1585129346,"ip_address":"","comment_id":186480,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1583851041","product_id":100034101,"comment_content":"grun运行报错的同学可以参考下，按如下方式运行<br><br>➜  src git:(master) ✗ pwd<br>&#47;Users&#47;dbo&#47;workspace&#47;PlayWithCompiler&#47;lab&#47;antlrtest&#47;src<br>➜  src git:(master) ✗ echo $CLASSPATH<br>&#47;usr&#47;local&#47;Cellar&#47;antlr&#47;4.8&#47;antlr-4.8-complete.jar:.<br>➜  src git:(master) ✗ javac antlrtest&#47;Hello.java<br>➜  src git:(master) ✗ grun antlrtest.Hello tokens -tokens antlrtest&#47;hello.play<br>ANTLR Tool version 4.7.2 used for code generation does not match the current runtime version 4.8[@0,0:2=&#39;int&#39;,&lt;&#39;int&#39;&gt;,1:0]<br>[@1,4:6=&#39;age&#39;,&lt;Id&gt;,1:4]<br>[@2,8:8=&#39;=&#39;,&lt;&#39;=&#39;&gt;,1:8]<br>[@3,10:11=&#39;45&#39;,&lt;IntLiteral&gt;,1:10]<br>[@4,12:12=&#39;;&#39;,&lt;&#39;;&#39;&gt;,1:12]<br>[@5,14:15=&#39;如果&#39;,&lt;If&gt;,2:0]<br>[@6,17:17=&#39;(&#39;,&lt;&#39;(&#39;&gt;,2:3]<br>[@7,18:20=&#39;age&#39;,&lt;Id&gt;,2:4]<br>[@8,22:23=&#39;&gt;=&#39;,&lt;RelationalOP&gt;,2:8]<br>[@9,25:26=&#39;17&#39;,&lt;IntLiteral&gt;,2:11]<br>[@10,27:27=&#39;+&#39;,&lt;&#39;+&#39;&gt;,2:13]<br>[@11,28:28=&#39;8&#39;,&lt;IntLiteral&gt;,2:14]<br>[@12,29:29=&#39;+&#39;,&lt;&#39;+&#39;&gt;,2:15]<br>[@13,30:31=&#39;20&#39;,&lt;IntLiteral&gt;,2:16]<br>[@14,32:32=&#39;)&#39;,&lt;&#39;)&#39;&gt;,2:18]<br>[@15,33:33=&#39;{&#39;,&lt;&#39;{&#39;&gt;,2:19]<br>[@16,39:44=&#39;printf&#39;,&lt;Id&gt;,3:4]<br>[@17,45:45=&#39;(&#39;,&lt;&#39;(&#39;&gt;,3:10]<br>[@18,46:61=&#39;&quot;Hello old man!&quot;&#39;,&lt;StringLiteral&gt;,3:11]<br>[@19,62:62=&#39;)&#39;,&lt;&#39;)&#39;&gt;,3:27]<br>[@20,63:63=&#39;;&#39;,&lt;&#39;;&#39;&gt;,3:28]<br>[@21,65:65=&#39;}&#39;,&lt;&#39;}&#39;&gt;,4:0]<br>[@22,66:65=&#39;&lt;EOF&gt;&#39;,&lt;EOF&gt;,4:1]<br>➜  src git:(master) ✗","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486772,"discussion_content":"antlr版本问题？\n感谢分享。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585129346,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":178565,"user_name":"徐炜","can_delete":false,"product_type":"c1","uid":1768310,"ip_address":"","ucode":"701DAD17B7B253","user_header":"https://static001.geekbang.org/account/avatar/00/1a/fb/76/37dccd3d.jpg","comment_is_top":false,"comment_ctime":1581745954,"is_pvip":false,"replies":[{"id":"74211","content":"这几个都挺常用。<br>比如MySQL workbench用的是Antlr。<br>一些用C实现的编译器，倾向于用Lex和Yacc，比如Python的语法分析是基于Yacc的。<br>对于其他语言，比如ML，还有其他的生成器。","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1585146865,"ip_address":"","comment_id":178565,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1581745954","product_id":100034101,"comment_content":"Antlr、Lex&#47;Flex、 Yacc&#47;Bison 在目前市场上哪个会比较常用呢，在时间有限的情况下，哪一种会比较合适去学习。","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483880,"discussion_content":"这几个都挺常用。\n比如MySQL workbench用的是Antlr。\n一些用C实现的编译器，倾向于用Lex和Yacc，比如Python的语法分析是基于Yacc的。\n对于其他语言，比如ML，还有其他的生成器。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585146865,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":175001,"user_name":"瓜瓜","can_delete":false,"product_type":"c1","uid":1108505,"ip_address":"","ucode":"F90A5135A9BB4B","user_header":"https://static001.geekbang.org/account/avatar/00/10/ea/19/14018371.jpg","comment_is_top":false,"comment_ctime":1580523311,"is_pvip":false,"replies":[{"id":"74298","content":"把你的CLASSPATH的设置跟具体使用的Antlr版本一致起来就行。","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1585203849,"ip_address":"","comment_id":175001,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1580523311","product_id":100034101,"comment_content":"ANTLR Tool version 4.8 used for code generation does not match the current runtime version 4.7.2<br>win7的系统 class_path：%TOOL_HOME%\\antlr-4.7.2-complete.jar;<br>path：D:\\antlr;<br><br>D:\\antlr&gt;dir<br> 驱动器 D 中的卷没有标签。<br> 卷的序列号是 BE10-222B<br><br> D:\\antlr 的目录<br><br>2020&#47;02&#47;01  10:04    &lt;DIR&gt;          .<br>2020&#47;02&#47;01  10:04    &lt;DIR&gt;          ..<br>2020&#47;01&#47;29  10:07         2,079,769 antlr-4.7.2-complete.jar<br>2020&#47;01&#47;29  10:20                25 antlr.bat<br>2020&#47;01&#47;29  12:09                32 grun.bat<br>               3 个文件      2,079,826 字节<br>               2 个目录 18,834,886,656 可用字节<br>为什么总是报这个警告，我第一次下载了一个4.8版本的，放在了这个目录下，后来把4.8版本的删除了，望老师帮忙解答下，感谢","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482592,"discussion_content":"把你的CLASSPATH的设置跟具体使用的Antlr版本一致起来就行。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585203849,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":149782,"user_name":"小乙哥","can_delete":false,"product_type":"c1","uid":1063308,"ip_address":"","ucode":"C77E79BEA0C325","user_header":"https://static001.geekbang.org/account/avatar/00/10/39/8c/089525aa.jpg","comment_is_top":false,"comment_ctime":1573376548,"is_pvip":false,"replies":[{"id":"57655","content":"感谢经验分享！<br>还有一个同学建议用maven管理项目，pom里面加上对antlr的依赖就行了，这样开发环境的维护会比较简单。<br>但是要用命令行工具的话，还是要像你一样做一下环境变量的配置。","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1573432089,"ip_address":"","comment_id":149782,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1573376548","product_id":100034101,"comment_content":"mac下面按照antlr的命令：： brew install Antlr<br>按照完成Antlr之后，需要配置一下CLASSPATH，不然使用antlr命令的时候会提示找不到antlr相关类<br><br>export ANTLR_HOME=&#47;usr&#47;local&#47;Cellar&#47;antlr&#47;4.7.2<br>export CLASSPATH=$JAVA_HOME&#47;lib&#47;tools.jar:$JAVA_HOME&#47;jre&#47;lib:$ANTLR_HOME&#47;antlr-4.7.2-com    plete.jar","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473976,"discussion_content":"感谢经验分享！\n还有一个同学建议用maven管理项目，pom里面加上对antlr的依赖就行了，这样开发环境的维护会比较简单。\n但是要用命令行工具的话，还是要像你一样做一下环境变量的配置。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573432089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142486,"user_name":"Sudouble","can_delete":false,"product_type":"c1","uid":1365574,"ip_address":"","ucode":"B369B09DAF8D20","user_header":"https://static001.geekbang.org/account/avatar/00/14/d6/46/5eb5261b.jpg","comment_is_top":false,"comment_ctime":1571378582,"is_pvip":true,"replies":[{"id":"57584","content":"也感谢你留的小Tip!","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1573344192,"ip_address":"","comment_id":142486,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571378582","product_id":100034101,"comment_content":"按着顺序操作下来，词法分析这块的理解清晰很多。中文编程，在词法分析下，和英文编程几乎等价。感谢留言中筒靴的配置指南。<br><br>一个小Tip：windows下配置好环境变量，记得注销或重启，让环境变量生效。<br>","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471144,"discussion_content":"也感谢你留的小Tip!","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573344192,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140151,"user_name":"庆霖","can_delete":false,"product_type":"c1","uid":1644282,"ip_address":"","ucode":"67BA20946FF5EA","user_header":"https://static001.geekbang.org/account/avatar/00/19/16/fa/722d0feb.jpg","comment_is_top":false,"comment_ctime":1570841206,"is_pvip":false,"replies":[{"id":"54365","content":"太好了，其他同学可以参考你这篇文章！<br>分号的问题，原来是输入法导致的....也好，又增长了一个经验！","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1571023597,"ip_address":"","comment_id":140151,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1570841206","product_id":100034101,"comment_content":"哎呀，稀碎一个ANTLR4配了两天超低效率一顿踩坑最后终于在这个教程找到了坑在哪https:&#47;&#47;blog.csdn.net&#47;shine_journey&#47;article&#47;details&#47;17952163，那两个bat要放到C盘的system和system32才会生效(*￣m￣)，我一直以为是我环境变量设置的有问题我寻思着复制粘贴都有问题可咋整。另，宫老师我解决了vscode输出提示的COLON，目测是其中有些字符中文输入法输入了，找其他一样的地方复制粘一下就好了😁 ","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470270,"discussion_content":"太好了，其他同学可以参考你这篇文章！\n分号的问题，原来是输入法导致的....也好，又增长了一个经验！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571023597,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1515923,"avatar":"https://static001.geekbang.org/account/avatar/00/17/21/93/90d0f8c9.jpg","nickname":"Unrestrained","note":"","ucode":"88519C6B5E475F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":57206,"discussion_content":"并不是一定要到system里面吧，只要在path变量里加了安装目录就可以直接在目录里了\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574581431,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139860,"user_name":"庆霖","can_delete":false,"product_type":"c1","uid":1644282,"ip_address":"","ucode":"67BA20946FF5EA","user_header":"https://static001.geekbang.org/account/avatar/00/19/16/fa/722d0feb.jpg","comment_is_top":false,"comment_ctime":1570757270,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570757270","product_id":100034101,"comment_content":"vscode的插件输出是这样的<br>error(50): f:\\antlr4test\\Hello.g4:36:26: syntax error: missing COLON at &#39;[ \\t]&#39; while matching a lexer rule<br>老师请问我是在哪里缺了符号","like_count":0},{"had_liked":false,"id":139595,"user_name":"庆霖","can_delete":false,"product_type":"c1","uid":1644282,"ip_address":"","ucode":"67BA20946FF5EA","user_header":"https://static001.geekbang.org/account/avatar/00/19/16/fa/722d0feb.jpg","comment_is_top":false,"comment_ctime":1570687424,"is_pvip":false,"replies":[{"id":"53860","content":"Antlr语法规则，每行后面都要有分号。是不是有哪句忘了写分号呢？","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1570697383,"ip_address":"","comment_id":139595,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1570687424","product_id":100034101,"comment_content":"宫老师，我在写hello.g4的时候空白字符抛弃里[ \\t]这里vscode的输出说这里缺少COLON这是为什么呢，求解答","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470013,"discussion_content":"Antlr语法规则，每行后面都要有分号。是不是有哪句忘了写分号呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570697383,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":137607,"user_name":"阿尔伯特","can_delete":false,"product_type":"c1","uid":1300012,"ip_address":"","ucode":"70B8EA81FAD7BB","user_header":"https://static001.geekbang.org/account/avatar/00/13/d6/2c/9aa0ae40.jpg","comment_is_top":false,"comment_ctime":1569805718,"is_pvip":false,"replies":[{"id":"53879","content":"看来你真的比较喜欢编译技术:-)","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1570703927,"ip_address":"","comment_id":137607,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569805718","product_id":100034101,"comment_content":"This is really COOL!","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469174,"discussion_content":"看来你真的比较喜欢编译技术:-)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570703927,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134563,"user_name":"wj","can_delete":false,"product_type":"c1","uid":1538547,"ip_address":"","ucode":"919FBD55C01A66","user_header":"https://static001.geekbang.org/account/avatar/00/17/79/f3/2d5ce916.jpg","comment_is_top":false,"comment_ctime":1568865979,"is_pvip":false,"replies":[{"id":"57685","content":"据我所知，Tree Pattern Matching这类问题，从上世纪80年代就有研究，所以有很多这样的算撒。我们后端的指令选择问题，本质上也是树匹配。<br><br>有人用树的匹配去分析源代码。这样的话，源代码会变成结构化的信息，因此能带来额外的优势。<br><br>我相信，把源代码先变成结构化的数据（AST），然后再分析，也会用于人工智能编程领域。","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1573439163,"ip_address":"","comment_id":134563,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568865979","product_id":100034101,"comment_content":"请教老师,  Abstract Tree Matching 有已经实现的算法可以用吗? 网上我只找到相关的论文, 我在想比较两个 java 文件的结构, 可能比较 AST 树会更直接一些?","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467809,"discussion_content":"据我所知，Tree Pattern Matching这类问题，从上世纪80年代就有研究，所以有很多这样的算撒。我们后端的指令选择问题，本质上也是树匹配。\n\n有人用树的匹配去分析源代码。这样的话，源代码会变成结构化的信息，因此能带来额外的优势。\n\n我相信，把源代码先变成结构化的数据（AST），然后再分析，也会用于人工智能编程领域。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573439163,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134260,"user_name":"曾经瘦过","can_delete":false,"product_type":"c1","uid":1240106,"ip_address":"","ucode":"57C32575A1C1FD","user_header":"https://static001.geekbang.org/account/avatar/00/12/ec/2a/b11d5ad8.jpg","comment_is_top":false,"comment_ctime":1568786154,"is_pvip":false,"replies":[{"id":"57547","content":"多动手才会有感觉！","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1573311745,"ip_address":"","comment_id":134260,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568786154","product_id":100034101,"comment_content":"今晚回去后跟着操练操练，感觉很酷","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467681,"discussion_content":"多动手才会有感觉！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573311745,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131958,"user_name":"长方体混凝土移动工程师","can_delete":false,"product_type":"c1","uid":1262728,"ip_address":"","ucode":"00CB4C4AB4D119","user_header":"https://static001.geekbang.org/account/avatar/00/13/44/88/69580101.jpg","comment_is_top":false,"comment_ctime":1567992287,"is_pvip":false,"replies":[{"id":"50740","content":"意思是：第一个字符必须是字母，之后的字符可以是字母或数字。","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1568182737,"ip_address":"","comment_id":131958,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567992287","product_id":100034101,"comment_content":"Letter LetterOrDigit*   这个中间加个空格 是什么意思?","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466694,"discussion_content":"意思是：第一个字符必须是字母，之后的字符可以是字母或数字。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568182737,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129350,"user_name":"夜行观星","can_delete":false,"product_type":"c1","uid":1010389,"ip_address":"","ucode":"C880CB39033929","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6a/d5/73c75eb3.jpg","comment_is_top":false,"comment_ctime":1567093045,"is_pvip":false,"replies":[{"id":"48255","content":"一起努力！","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1567150434,"ip_address":"","comment_id":129350,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567093045","product_id":100034101,"comment_content":"学到很多，期待后续的课程","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465410,"discussion_content":"一起努力！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567150434,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129151,"user_name":"moob","can_delete":false,"product_type":"c1","uid":1242762,"ip_address":"","ucode":"ACC70FA20A9519","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLLOldQf1VmafqYpeDj2RFdWfo3O4KV5jjHIzaSnmuJf4RjyAtibIkbzuYTX1NGyvznm9asmiaHvyVw/132","comment_is_top":false,"comment_ctime":1567050264,"is_pvip":false,"replies":[{"id":"48258","content":":-D","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1567150528,"ip_address":"","comment_id":129151,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567050264","product_id":100034101,"comment_content":"nice ","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465306,"discussion_content":":-D","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567150528,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129139,"user_name":"沉淀的梦想","can_delete":false,"product_type":"c1","uid":1177315,"ip_address":"","ucode":"BCB7C26F9D214B","user_header":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","comment_is_top":false,"comment_ctime":1567048307,"is_pvip":false,"replies":[{"id":"48259","content":"谢谢帮忙！","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1567150583,"ip_address":"","comment_id":129139,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567048307","product_id":100034101,"comment_content":"https:&#47;&#47;github.com&#47;DQinYuan&#47;antlr_maven_plugin_example          将老师本课中的代码整理成了基于maven的antlr4-maven-plugin的形式，需要的可以自取","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465299,"discussion_content":"谢谢帮忙！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567150583,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128882,"user_name":"Change","can_delete":false,"product_type":"c1","uid":1161260,"ip_address":"","ucode":"FB60D2378C9F02","user_header":"https://static001.geekbang.org/account/avatar/00/11/b8/2c/0f7baf3a.jpg","comment_is_top":false,"comment_ctime":1566979869,"is_pvip":false,"replies":[{"id":"48292","content":"可能是homebrew的问题。<br>可以从Antlr官网上下载并做配置，不用homebrew。","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1567153147,"ip_address":"","comment_id":128882,"utype":1}],"discussion_count":1,"race_medal":2,"score":"1566979869","product_id":100034101,"comment_content":"Mac系统版本10.15 Beta。Antlr 好像不支持。提示：<br>You are using macOS 10.15.<br>We do not provide support for this pre-release version.<br>You will encounter build failures with some formulae.<br>Please create pull requests instead of asking for help on Homebrew&#39;s GitHub,<br>Discourse, Twitter or IRC. You are responsible for resolving any issues you<br>experience while you are running this pre-release version.<br>运行 javac *.java ，提示 程序包org.antlr.v4.runtime不存在","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465153,"discussion_content":"可能是homebrew的问题。\n可以从Antlr官网上下载并做配置，不用homebrew。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567153147,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128807,"user_name":"灰灰","can_delete":false,"product_type":"c1","uid":1073775,"ip_address":"","ucode":"36FFFE78140441","user_header":"https://static001.geekbang.org/account/avatar/00/10/62/6f/6c96fa3e.jpg","comment_is_top":false,"comment_ctime":1566966390,"is_pvip":false,"replies":[{"id":"48304","content":"这可能是grun的一个问题。<br>你运行grun的时候，要在CLASSPATH指向的目录里。比如，假设你的.class文件在src&#47;antlrtest下，那你运行antlr的时候，要在src目录下。<br>我们可以把事情搞简单一点，干脆把例子中的包去掉。也就是把规则文件中的<br>@header {<br>package antlrtest;<br>}<br>去掉。这样更简单一些。<br>","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1567154062,"ip_address":"","comment_id":128807,"utype":1}],"discussion_count":6,"race_medal":0,"score":"1566966390","product_id":100034101,"comment_content":"antlrtest (master) $ grun antlrteset.Hello tokens -tokens hello.play<br>Can&#39;t load antlrteset.Hello as lexer or parser<br>把包名去掉<br>antlrtest (master) $ grun Hello tokens -tokens hello.play<br>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: Hello (wrong name: antlrtest&#47;Hello)<br>好像也会出问题，找不到入口","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465112,"discussion_content":"这可能是grun的一个问题。\n你运行grun的时候，要在CLASSPATH指向的目录里。比如，假设你的.class文件在src/antlrtest下，那你运行antlr的时候，要在src目录下。\n我们可以把事情搞简单一点，干脆把例子中的包去掉。也就是把规则文件中的\n@header {\npackage antlrtest;\n}\n去掉。这样更简单一些。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567154062,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2159460,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/dsZ5CFV7mCIKEn7YcVFJXksO201eeqsJXoT4EYNvcibAKNSWSQVZPbbRgPKraWqg6YnaaRlVoywic9MEsflicRDibQ/132","nickname":"潜龙勿用","note":"","ucode":"EEB8A6F3E4A1B8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380106,"discussion_content":"我把antlr PlayScript.g4 改为 antlr -o antlrtest PlayScript.g4 解决了这个问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624344144,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1264305,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/b1/30a218db.jpg","nickname":"张辽儿","note":"","ucode":"73D37D088EA568","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6607,"discussion_content":"我也是这样的问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566989689,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1073775,"avatar":"https://static001.geekbang.org/account/avatar/00/10/62/6f/6c96fa3e.jpg","nickname":"灰灰","note":"","ucode":"36FFFE78140441","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6559,"discussion_content":"classpath的问题已解决，测试表达式的时候出现\nantlrtest (master) $ grun antlrtest.PlayScript expresssion -gui\nage + 10 * 2 + 10\nNo method for rule expresssion or it has arguments","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566971465,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1264305,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/b1/30a218db.jpg","nickname":"张辽儿","note":"","ucode":"73D37D088EA568","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1073775,"avatar":"https://static001.geekbang.org/account/avatar/00/10/62/6f/6c96fa3e.jpg","nickname":"灰灰","note":"","ucode":"36FFFE78140441","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6609,"discussion_content":"请问你第一个问题是怎么解决的呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566990042,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6559,"ip_address":""},"score":6609,"extra":""},{"author":{"id":1073775,"avatar":"https://static001.geekbang.org/account/avatar/00/10/62/6f/6c96fa3e.jpg","nickname":"灰灰","note":"","ucode":"36FFFE78140441","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1264305,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/b1/30a218db.jpg","nickname":"张辽儿","note":"","ucode":"73D37D088EA568","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6683,"discussion_content":"javac -d . Hello.java，后来我用idea配置了antlr，用IDE阅读代码的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567049316,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6609,"ip_address":""},"score":6683,"extra":""}]}]},{"had_liked":false,"id":128456,"user_name":"鱼_XueTr","can_delete":false,"product_type":"c1","uid":1506691,"ip_address":"","ucode":"A164D2540F251D","user_header":"https://static001.geekbang.org/account/avatar/00/16/fd/83/b432b125.jpg","comment_is_top":false,"comment_ctime":1566883266,"is_pvip":false,"replies":[{"id":"47803","content":"好，为动手点赞！<br>我一开始用的是VScode，这一阵用Idea。也有针对Idea的插件。","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1566959041,"ip_address":"","comment_id":128456,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1566883266","product_id":100034101,"comment_content":"使用VScode安装Antlr插件编写*.g4文件感觉还是不错的。","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464952,"discussion_content":"好，为动手点赞！\n我一开始用的是VScode，这一阵用Idea。也有针对Idea的插件。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566959041,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1050269,"avatar":"","nickname":"minghu6","note":"","ucode":"F44058E21B14C9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358701,"discussion_content":"巧了我也打算开始用vscode，等Java代码上来了转成IDEA","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616032755,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1506691,"avatar":"https://static001.geekbang.org/account/avatar/00/16/fd/83/b432b125.jpg","nickname":"鱼_XueTr","note":"","ucode":"A164D2540F251D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1050269,"avatar":"","nickname":"minghu6","note":"","ucode":"F44058E21B14C9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":359967,"discussion_content":"嗯嗯，可以的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616333640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":358701,"ip_address":""},"score":359967,"extra":""}]}]},{"had_liked":false,"id":128065,"user_name":"雲至","can_delete":false,"product_type":"c1","uid":1568487,"ip_address":"","ucode":"47E2D099322BB1","user_header":"https://static001.geekbang.org/account/avatar/00/17/ee/e7/4375e97c.jpg","comment_is_top":false,"comment_ctime":1566827057,"is_pvip":false,"replies":[{"id":"47781","content":"其实没有什么特别的，就是这些英文单词的字面意思：<br>statement：语句<br>expression：表达式<br>additive：加减运算<br>multiplicative：乘除运算等等。<br>跟你日常使用计算机语言的经验结合起来就行了。","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1566957644,"ip_address":"","comment_id":128065,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1566827057","product_id":100034101,"comment_content":"老师可以讲下规则文件里的主要单词的意义吗？   看的有点蒙","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464777,"discussion_content":"其实没有什么特别的，就是这些英文单词的字面意思：\nstatement：语句\nexpression：表达式\nadditive：加减运算\nmultiplicative：乘除运算等等。\n跟你日常使用计算机语言的经验结合起来就行了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566957644,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1568487,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ee/e7/4375e97c.jpg","nickname":"雲至","note":"","ucode":"47E2D099322BB1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6534,"discussion_content":"谢谢老师","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566959609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128001,"user_name":"李懂","can_delete":false,"product_type":"c1","uid":1330436,"ip_address":"","ucode":"539E6639042C88","user_header":"https://static001.geekbang.org/account/avatar/00/14/4d/04/5e0d3713.jpg","comment_is_top":false,"comment_ctime":1566819476,"is_pvip":false,"replies":[{"id":"47565","content":"为你的动手精神点赞！<br>动手的时候，肯定会有各种挫折，但这样学得会更牢！<br>Hello里带了包名吗？那我修改一下，让文稿和代码一致起来。","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1566877355,"ip_address":"","comment_id":128001,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566819476","product_id":100034101,"comment_content":"执行这个grun Hello tokens -tokens hello.play<br>报错Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: Hello (wrong name: antlrtest&#47;Hello)<br><br>添加了.到classPath<br>原来是生成的Hello. java中有包名<br>package  antlrtest；<br>使用<br>javac   -d  Hello. java<br><br>grun antlrtest.Hello tokens -tokens hello.play<br><br>就可以了，终于硬着头皮看完了，对我来说理解有点费劲，希望能坚持下去<br><br>","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464745,"discussion_content":"为你的动手精神点赞！\n动手的时候，肯定会有各种挫折，但这样学得会更牢！\nHello里带了包名吗？那我修改一下，让文稿和代码一致起来。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566877355,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127724,"user_name":"Giacomo","can_delete":false,"product_type":"c1","uid":1478055,"ip_address":"","ucode":"BE5B1E68BCDBB3","user_header":"https://static001.geekbang.org/account/avatar/00/16/8d/a7/2176bbc5.jpg","comment_is_top":false,"comment_ctime":1566784694,"is_pvip":false,"replies":[{"id":"47300","content":"是CLASSPATH的问题。<br>设置CLASSPATH包含当前目录，也就是.<br>到Hello.java的目录下去运行。","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1566786756,"ip_address":"","comment_id":127724,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1566784694","product_id":100034101,"comment_content":"还有就是当我输入<br>$ javac Hello.java<br>$ grun Hello tokens -tokens hello.play<br>后，java会报错为<br>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: Hello (wrong name: antlrtest&#47;Hello)<br><br>文件位置是 `PlayWithCompiler&#47;lab&#47;antlrtest&#47;src&#47;antlrtest`<br>java : openjdk version &quot;1.8.0_222&quot;","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464621,"discussion_content":"是CLASSPATH的问题。\n设置CLASSPATH包含当前目录，也就是.\n到Hello.java的目录下去运行。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566786756,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1070863,"avatar":"https://static001.geekbang.org/account/avatar/00/10/57/0f/1f229bf5.jpg","nickname":"Void_seT","note":"","ucode":"DD55CB0198A5CD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6286,"discussion_content":"找到办法了，包路径与生成的class文件位置不匹配的问题，我在编译Hello.java 文件时，使用：javac -d . Hello.java，指定当前文件夹；再在生成词法分析结果时，使用：grun antlrtest.Hello tokens -tokens hello.play，顺利输出结果。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1566823207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1478055,"avatar":"https://static001.geekbang.org/account/avatar/00/16/8d/a7/2176bbc5.jpg","nickname":"Giacomo","note":"","ucode":"BE5B1E68BCDBB3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6210,"discussion_content":"我已经输入过\n`export CLASSPATH=&#34;.:/usr/local/lib/antlr-4.7.2-complete.jar:$CLASSPATH&#34;`\n到命令行了，可没有什么用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566788475,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1031922,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/be/f2/1e77c46e.jpg","nickname":"ccb","note":"","ucode":"46D1B0403E72CD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6205,"discussion_content":"classpath 配置一下 https://github.com/antlr/antlr4/blob/master/doc/getting-started.md","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566786178,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127721,"user_name":"Giacomo","can_delete":false,"product_type":"c1","uid":1478055,"ip_address":"","ucode":"BE5B1E68BCDBB3","user_header":"https://static001.geekbang.org/account/avatar/00/16/8d/a7/2176bbc5.jpg","comment_is_top":false,"comment_ctime":1566784355,"is_pvip":false,"replies":[{"id":"47299","content":"antlr的安装，请参考官方文档：https:&#47;&#47;github.com&#47;antlr&#47;antlr4&#47;blob&#47;master&#47;doc&#47;getting-started.md<br>基本上就是：<br>1.安装java环境<br>2.下载jar包；<br>3.设置CLASSPATH<br>4.(可选)设置两个shell的别名，这样打命令少敲点字。","user_name":"作者回复","user_name_real":"宫文学Richard","uid":"1543380","ctime":1566786667,"ip_address":"","comment_id":127721,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566784355","product_id":100034101,"comment_content":"老师，我的电脑是win10系统，但我安装了Ubuntu子系统。我想知道直接用<br>`sudo apt remove pccts` 和 `sudo apt install grun` 安装的是我所需要的命令吗？","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"宫文学Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464620,"discussion_content":"antlr的安装，请参考官方文档：https://github.com/antlr/antlr4/blob/master/doc/getting-started.md\n基本上就是：\n1.安装java环境\n2.下载jar包；\n3.设置CLASSPATH\n4.(可选)设置两个shell的别名，这样打命令少敲点字。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566786667,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127706,"user_name":"安排","can_delete":false,"product_type":"c1","uid":1260026,"ip_address":"","ucode":"F78CFA9624CAEF","user_header":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","comment_is_top":false,"comment_ctime":1566782696,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566782696","product_id":100034101,"comment_content":"👍","like_count":0}]}