{"id":6949,"title":"10 |【实验】密码模式授权服务器","content":"无","comments":[{"had_liked":false,"id":30760,"user_name":"paravoice","can_delete":false,"product_type":"c3","uid":1105603,"ip_address":"","ucode":"6A41EA147FC776","user_header":"https://static001.geekbang.org/account/avatar/00/10/de/c3/52f98b19.jpg","comment_is_top":false,"comment_ctime":1538990038,"is_pvip":true,"replies":[{"id":11562,"content":"https:&#47;&#47;tools.ietf.org&#47;html&#47;rfc6749#section-4.3，你看下rfc6749规范，需要Content-Type: application&#47;x-www-form-urlencoded，POST时以body(urlencoded格式)传输","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1539355535,"ip_address":"","comment_id":30760,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"第10讲5:00处content type没有必要吧 因为没有http body","like_count":3,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426084,"discussion_content":"https://tools.ietf.org/html/rfc6749#section-4.3，你看下rfc6749规范，需要Content-Type: application/x-www-form-urlencoded，POST时以body(urlencoded格式)传输","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539355535,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":22584,"user_name":"欧文","can_delete":false,"product_type":"c3","uid":1042023,"ip_address":"","ucode":"C6C6F7262F6108","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e6/67/a5154e36.jpg","comment_is_top":false,"comment_ctime":1535806483,"is_pvip":false,"replies":[{"id":8129,"content":"用户凭证应该是客户凭证（clientId+secret），用来标识这个oauth2客户应用的，user&#47;pass是用户标识用户身份，一个应用可以有很多个用户，他们通过这个客户应用client app去访问他们在资源服务器上的资源。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1535865933,"ip_address":"","comment_id":22584,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"请问授权服务器里面配置在inMemory的用户凭证与application.properties 里的user&#47;pass怎么区别和理解？平时遇到一般采用basic auth的服务里只需要填写一对用户凭证，正式环境一般怎么应用呢？","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423174,"discussion_content":"用户凭证应该是客户凭证（clientId+secret），用来标识这个oauth2客户应用的，user/pass是用户标识用户身份，一个应用可以有很多个用户，他们通过这个客户应用client app去访问他们在资源服务器上的资源。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535865933,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":7946,"user_name":"童飞帆","can_delete":false,"product_type":"c3","uid":1115956,"ip_address":"","ucode":"6F39A98DFE6BDA","user_header":"https://static001.geekbang.org/account/avatar/00/11/07/34/40cf4ecd.jpg","comment_is_top":false,"comment_ctime":1525795420,"is_pvip":false,"replies":[{"id":2760,"content":"谢谢支持🌹","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1526653378,"ip_address":"","comment_id":7946,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"很精彩，期待新课程继续开放","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417524,"discussion_content":"谢谢支持🌹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526653378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":7936,"user_name":"廖先生","can_delete":false,"product_type":"c3","uid":1124566,"ip_address":"","ucode":"F0580A056028FB","user_header":"https://static001.geekbang.org/account/avatar/00/11/28/d6/fda9f53d.jpg","comment_is_top":false,"comment_ctime":1525789376,"is_pvip":false,"replies":[{"id":2761,"content":"好建议谢谢🌹后继考虑增加权限系统模块的视频或文章，敬请关注","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1526653514,"ip_address":"","comment_id":7936,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"已购买了课程，希望老师能详细讲到OAuth2结JWT，来设计一个微服务架构下的权限控制系统","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417522,"discussion_content":"好建议谢谢🌹后继考虑增加权限系统模块的视频或文章，敬请关注","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526653514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225881,"user_name":"平凡之路","can_delete":false,"product_type":"c3","uid":1669273,"ip_address":"","ucode":"96CE12339BD5FD","user_header":"https://static001.geekbang.org/account/avatar/00/19/78/99/6060eb2d.jpg","comment_is_top":false,"comment_ctime":1591882252,"is_pvip":false,"replies":[{"id":83693,"content":"有必要，主要用于防止跨站点脚本XSS攻击，具体网上可查，资料很多。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1592321373,"ip_address":"","comment_id":225881,"utype":1}],"discussion_count":0,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"老师能说说cookie http only有必要设置吗","like_count":0},{"had_liked":false,"id":219533,"user_name":"Lin.","can_delete":false,"product_type":"c3","uid":1308976,"ip_address":"","ucode":"8A792F33EFA304","user_header":"https://static001.geekbang.org/account/avatar/00/13/f9/30/1719a79f.jpg","comment_is_top":false,"comment_ctime":1590037350,"is_pvip":false,"replies":[{"id":81350,"content":"第一个是最安全，但是具体用那个要看使用场景。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1590244384,"ip_address":"","comment_id":219533,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"看了两个模式，感觉第一个更安全。","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495843,"discussion_content":"第一个是最安全，但是具体用那个要看使用场景。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590244384,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161462,"user_name":"Tony🐑","can_delete":false,"product_type":"c3","uid":1108084,"ip_address":"","ucode":"B53491FA20D340","user_header":"https://static001.geekbang.org/account/avatar/00/10/e8/74/ceb084a2.jpg","comment_is_top":false,"comment_ctime":1576209838,"is_pvip":false,"replies":[{"id":61650,"content":"根据oauth2规范，对于用户名密码模式，clientId&#47;secret并非必须，但是对于机密(confidential)应用，是需要的，参考rfc6749的4.3节。\nhttps:&#47;&#47;tools.ietf.org&#47;html&#47;rfc6749#section-4.3\n\n采用客户认证以后有哪些好处，可以参考3.2.1节:\nhttps:&#47;&#47;tools.ietf.org&#47;html&#47;rfc6749#section-3.2.1","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1576407182,"ip_address":"","comment_id":161462,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":" 密码模式里面为什么还需要配置clientId和clientSec呢？作用和目的是什么呢？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477724,"discussion_content":"根据oauth2规范，对于用户名密码模式，clientId/secret并非必须，但是对于机密(confidential)应用，是需要的，参考rfc6749的4.3节。\nhttps://tools.ietf.org/html/rfc6749#section-4.3\n\n采用客户认证以后有哪些好处，可以参考3.2.1节:\nhttps://tools.ietf.org/html/rfc6749#section-3.2.1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576407182,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":99922,"user_name":"大鹏","can_delete":false,"product_type":"c3","uid":1270632,"ip_address":"","ucode":"F4611B80B08A3A","user_header":"https://static001.geekbang.org/account/avatar/00/13/63/68/14b98bbc.jpg","comment_is_top":false,"comment_ctime":1559358810,"is_pvip":false,"replies":[{"id":36221,"content":"这用用法也是可以，Zuul相当于是一个oauth2代理，整个是一个变种的授权吗模式，Zuul就是Client App，好处是安全性会更高。业界也有人这么玩，实际会更复杂一些，可以支持多应用场景，但Zuul上要管理会话状态，有兴趣你可以参考：https:&#47;&#47;github.com&#47;madumalt&#47;oauth-proxy","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1559572936,"ip_address":"","comment_id":99922,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"老师请教个问题，一个前后分离的项目用到了密码模式。前端页面传过来用户名 密码，zuul网关上配置了clientid,clientSecret.转发请求到authorization server的时候带上了。在这种情景下，zuul网关是不是就相当于客户端，可以这么用吗。客户端不就相当于在后端了，应该用授权码模式啊...\n还是我学的太死了，前端是客户端，只不过把clientid secret 存到zuul上了.我理解这样做的好处是clientid secret保存到后端比较安全，坏处就是zuul只能对接当前前端，因为所有经过zuul请求授权服务器的clientid secret 都是一样的。\n但是感觉从架构上让人困惑，到底谁是客户端？前端应用还是zuul网关。\n","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452326,"discussion_content":"这用用法也是可以，Zuul相当于是一个oauth2代理，整个是一个变种的授权吗模式，Zuul就是Client App，好处是安全性会更高。业界也有人这么玩，实际会更复杂一些，可以支持多应用场景，但Zuul上要管理会话状态，有兴趣你可以参考：https://github.com/madumalt/oauth-proxy","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559572936,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83214,"user_name":"Kevin Liao","can_delete":false,"product_type":"c3","uid":1426493,"ip_address":"","ucode":"C95900FE702E40","user_header":"https://static001.geekbang.org/account/avatar/00/15/c4/3d/1a89f1b3.jpg","comment_is_top":false,"comment_ctime":1554468648,"is_pvip":false,"replies":[{"id":30284,"content":"谢谢支持！加油！","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1554727074,"ip_address":"","comment_id":83214,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"波波老师，讲的好棒👍","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445922,"discussion_content":"谢谢支持！加油！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554727074,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75869,"user_name":"正是那朵玫瑰","can_delete":false,"product_type":"c3","uid":1048261,"ip_address":"","ucode":"73D630B654573F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fe/c5/3467cf94.jpg","comment_is_top":false,"comment_ctime":1552485221,"is_pvip":false,"replies":[{"id":28175,"content":"我的案例比较简单，其中的确没有用到scope。scope是oauth2协议支持的一种标准作用域（或权限）机制，现实中有些场景下可以使用scope的，比如读写权限区分，当然资源服务器端要解释scope并做权限判断逻辑。当然，你也可以完全不用scope，而采用其它权限机制，比如根据用户关联的角色进行鉴权等。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1552912486,"ip_address":"","comment_id":75869,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"老师这个scope感觉没有什么用处啊，资源服务并没有对每一个url资源进行分类啊？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443066,"discussion_content":"我的案例比较简单，其中的确没有用到scope。scope是oauth2协议支持的一种标准作用域（或权限）机制，现实中有些场景下可以使用scope的，比如读写权限区分，当然资源服务器端要解释scope并做权限判断逻辑。当然，你也可以完全不用scope，而采用其它权限机制，比如根据用户关联的角色进行鉴权等。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552912486,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63447,"user_name":"yien","can_delete":false,"product_type":"c3","uid":1345013,"ip_address":"","ucode":"37CC1AFAC8B0BC","user_header":"https://static001.geekbang.org/account/avatar/00/14/85/f5/10275c0a.jpg","comment_is_top":false,"comment_ctime":1548376421,"is_pvip":false,"replies":[{"id":22553,"content":"谢谢你的建议，很中肯！课程后续的综合案例部分的实验已经升级到spring boot 2.x版本。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1548506536,"ip_address":"","comment_id":63447,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100007001,"comment_content":"现在很多都用springboot2.x了，希望老师及时更新一下版本。还有建议一下，之前实验相同部分简单带过，多讲一些干货，😁","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437588,"discussion_content":"谢谢你的建议，很中肯！课程后续的综合案例部分的实验已经升级到spring boot 2.x版本。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548506536,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":53773,"user_name":"雾里看花","can_delete":false,"product_type":"c3","uid":1077986,"ip_address":"","ucode":"D88629C727C60A","user_header":"https://wx.qlogo.cn/mmopen/vi_32/VLERzsugntUoTqQ51ONiaCI0I3Gber92QWzdibzPkV8cicUkTicbEe3CsQB6d0ULalnHn4CC5NdZME1HMgo1ukCgkg/0","comment_is_top":false,"comment_ctime":1545722057,"is_pvip":false,"replies":[{"id":19669,"content":"security oauth2可灵活配置，lab04的oauth2用的是一种较简单jdbc方式（使用h2数据库），可参考，另外网上有很多spring security oauth2+jdbc例子，可搜一下。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1545828741,"ip_address":"","comment_id":53773,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100007001,"comment_content":"波波老师，如果把inMemory改成jdbc方式的话，需要怎么做","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434236,"discussion_content":"security oauth2可灵活配置，lab04的oauth2用的是一种较简单jdbc方式（使用h2数据库），可参考，另外网上有很多spring security oauth2+jdbc例子，可搜一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545828741,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49030,"user_name":"王盛武","can_delete":false,"product_type":"c3","uid":1182516,"ip_address":"","ucode":"DE7EF246D3DCE8","user_header":"https://static001.geekbang.org/account/avatar/00/12/0b/34/f41d73a4.jpg","comment_is_top":false,"comment_ctime":1544591559,"is_pvip":false,"replies":[{"id":17796,"content":"如果生产流量大且令牌访问频繁（例如校验），这时仅用DB会有瓶颈，一般需用redis等缓存令牌，加快访问速度。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1544705582,"ip_address":"","comment_id":49030,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100007001,"comment_content":"授权服务器返回token之后， 授权服务器的token一般是保存在类似redis的缓存服务器中的吧？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432462,"discussion_content":"如果生产流量大且令牌访问频繁（例如校验），这时仅用DB会有瓶颈，一般需用redis等缓存令牌，加快访问速度。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544705582,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":48761,"user_name":"Jack","can_delete":false,"product_type":"c3","uid":1239836,"ip_address":"","ucode":"D8C3AB5FF7E103","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epXfH1OVt86Dicrl9h83xXSpbW1kX7Y7s5ibeVPniceAbWynSgcTz8r21e8N595PNPG5WqBI18pVGP7w/132","comment_is_top":false,"comment_ctime":1544531503,"is_pvip":false,"replies":[{"id":17798,"content":"如果是普通令牌，可通过oauth2的令牌校检（introspect）端点校验令牌并获取用户信息，然后可以http header等形式往后传递，本课程第9模块综合案例部分会有单独讲解，采用网关集中令牌校验方式。如果用jwt令牌，则令牌是自包含自校验的，令牌里头就有用户信息。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1544706105,"ip_address":"","comment_id":48761,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100007001,"comment_content":"拿到token后 是可以把user信息写在token 这样后续调用其他api 用户信息就可以传递 希望这个讲一讲","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432340,"discussion_content":"如果是普通令牌，可通过oauth2的令牌校检（introspect）端点校验令牌并获取用户信息，然后可以http header等形式往后传递，本课程第9模块综合案例部分会有单独讲解，采用网关集中令牌校验方式。如果用jwt令牌，则令牌是自包含自校验的，令牌里头就有用户信息。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544706105,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16147,"user_name":"王乐","can_delete":false,"product_type":"c3","uid":1029354,"ip_address":"","ucode":"9261F5F50A8331","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b4/ea/b3dca4dd.jpg","comment_is_top":false,"comment_ctime":1531800628,"is_pvip":false,"replies":[{"id":5713,"content":"CAS支持多种认证授权协议，oauth2也是CAS支持的一种协议","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1531972950,"ip_address":"","comment_id":16147,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100007001,"comment_content":"我们最近在使用CAS做系统单点登录，我发现CAS系统的原理和Oauth2的授权及访问资源过程是一样的，请问老师这么理解对吗？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420688,"discussion_content":"CAS支持多种认证授权协议，oauth2也是CAS支持的一种协议","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531972950,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356341,"user_name":"lyonger","can_delete":false,"product_type":"c3","uid":1313840,"ip_address":"广东","ucode":"E89A75DADEA2A1","user_header":"https://static001.geekbang.org/account/avatar/00/14/0c/30/d4737cd5.jpg","comment_is_top":false,"comment_ctime":1662177915,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100007001,"comment_content":"老师，请问密码模式和简化模式的区别在哪里。 简化模式征询用户是否授权，密码模式好像没有。是使用场景不同吗？","like_count":0}]}