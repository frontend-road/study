{"id":131822,"title":"23 | 实战演练：通过WebRTC实现一个1对1音视频实时直播系统","content":"<p>在前面的 22 篇文章中，我分步骤向你介绍了如何在浏览器上实现一套简单的直播系统。比如，如何采集音视频数据，如何在同一个浏览器上进行音视频通话，如何传输非音视频数据，等等。</p><p>但这些知识点都是一个个独立的，并没有形成一个完整的系统，那么本篇文章我们就将所有这些知识点串联起来，做成一个完整的系统。当这套系统搭建完成之后，你就可以在浏览器上实现从北京到上海这种远距离的实时通信了。</p><p>接下来我们就来详述这套系统的实现步骤（运行环境的搭建，Web 服务器的实现，信令系统的实现，TURN 服务器的搭建，RTCPeerConnection的创建，音视频数据的采集、传输、渲染与播放）。通过这部分内容的讲解，再配合我们之前的文章，相信你一定可以快速搭建出这样一套系统来。</p><h2>运行环境搭建</h2><p>要实现这套系统，运行环境是特别关键的，其中有三个条件是必须要满足的：<strong>云主机、2M以上的带宽</strong>和<strong>HTTPS证书</strong>。</p><p>为什么需要这三个条件呢？下面我们就来详细看一下。</p><p><strong>云主机</strong>就不必多说了，要实现远距离的音视频通信，就得进行信令的交换和数据的中转，这些都需要我们有一台云主机。换句话说，有了云主机后，通信的双方才可以进行信令的交换；在 P2P 不通的情况下，通过服务器中转的方式才能保障端与端之间的连通性。</p><!-- [[[read_end]]] --><p>另外，在实现这套系统时，对云主机的性能要求并不高，2核的 CPU、1G/2G 的内存就够了。但对<strong>带宽</strong>的高求就比较高了，至少要 2M 以上的带宽，而且是越多越好。</p><p>需要 2M 以上带宽的原因我们之前就分析过了，对于一路 720P 的视频，一般情况下需要 1.2M 的带宽，因此在两人通信时，如果都走服务器中转的话就需要 2.4M 的带宽了。所以为了保证双方通信顺畅，带宽是必须要能跟得上的。</p><p>第三个必要条件是HTTPS 证书。那为什么需要这个条件呢？出于安全的原因，浏览器要求我们使用 HTTPS 协议从服务器请求 JavaScript 脚本，只有通过 HTTPS请求的脚本才能访问音视频设备。这是因为通过 HTTPS 访问的服务都是通过安全机构认证过的，这样就保证了音视频设备被访问的安全性。而 HTTP 协议就做不到这一点（因为没有任何安全机构对它们做认证），为了保证用户不会在自己不知情的情况下被偷拍或被录音，<strong>因此在浏览器上通过HTTP 请求下来的 JavaScript 脚本是不允话访问音视频设备的</strong>。</p><p>我曾见过很多同学抱怨使用 HTTP 请求的 JavaScript 脚本不能访问音视频设备的问题，其实这就是因为他们没有理解隐私安全，也没有站在用户的角度去思考问题。</p><p>最后，额外说明一下我个人的一些关于云主机的使用心得吧，云主机的操作系统最好选择使用 <strong>Ubuntu，并且版本越新越好</strong>，这是因为在Ubuntu上边安装依赖库比较方便。另外，在国内申请域名时还要进行备案，而备案时间需要 10 天以上，非常繁琐。所以如果你特别着急的话，可以购买国外的云主机和域名，一般可以免费使用一年，并且在国外购买域名不需要进行备案，这样可以节省不少时间。</p><h2>实现Web服务器</h2><p>对于这部分内容我们在<a href=\"https://time.geekbang.org/column/article/114179\">《11 | 如何通过Node.js实现一套最简单的信令系统？》</a>一文中已经向你做过介绍了，但没有讲 HTTPS 的部分。实际上，在 Node.js 中 HTTPS Server 的实现与 HTTP Server 的实现是类似的，我们来看一下具体的代码：</p><pre><code>var https = require('https');\nvar express = require('express');\nvar serveIndex = require('serve-index');\n...\n//使用express实现WEB服务\nvar app = express(); \napp.use(serveIndex('./public'));\napp.use(express.static('./public'));\n\n//HTTPS 证书和密钥文件\nvar options = {\n  key : fs.readFileSync('./cert/1557605_www.learningrtc.cn.key'),\n  cert: fs.readFileSync('./cert/1557605_www.learningrtc.cn.pem')\n}\n\n//https server\nvar https_server = https.createServer(options, app);\nvar io = socketIo.listen(https_server);\nhttps_server.listen(443, '0.0.0.0');\n...\n</code></pre><p>上面的代码中引入了 express 库，它的功能非常强大，用它来实现 Web 服务器非常方便。上面的代码同时还引入 HTTPS 服务，并让 Web 服务运行于 HTTPS 之上，这样 HTTPS的 Web 服务器就实现好了。</p><p>有了 HTTPS 的 Web 服务器之后，我们就可以将客户端代码（如 HTML、CSS、JavaScript ）放到Web服务的 public 目录下，这样在通过域名访问时，浏览器就将客户端代码下载下来，并渲染到浏览器上，然后我们就可以从浏览器上看到用户界面了。</p><h2>最简单的信令系统</h2><p>信令是系统的“灵魂”。在我们要实现的这个直播系统中，由谁来发起呼叫、什么时间发 SDP 等各种操作都是由信令控制的。</p><p>我们这个直播系统的信令相对还是比较简单的，其客户端和服务端的信令可大致总结为如下几种。</p><p><strong>客户端命令</strong></p><ul>\n<li>join，用户加入房间。</li>\n<li>leave，用户离开房间。</li>\n<li>message，端到端命令（offer、answer、candidate）。</li>\n</ul><p><strong>服务端命令</strong></p><ul>\n<li>joined，用户已加入。</li>\n<li>leaved，用户已离开。</li>\n<li>other_joined，其他用户已加入。</li>\n<li>bye，其他用户已离开。</li>\n<li>full，房间已满。</li>\n</ul><p>那这些信令之间是怎样一种关系呢？在什么情况下该发送怎样的信令呢？要回答这个问题我们就要看一下信令状态机了。</p><h3>信令状态机</h3><p>我们这个系统的信令是由一个信令状态机来管理的，在不同的状态下，需要发送不同的信令。当收到服务端或对端的信令后，状态也会随之发生改变，下面我们来看一下这个状态的变化图吧。</p><p><img src=\"https://static001.geekbang.org/resource/image/92/ed/9242bd0a57710831022a72b080eb52ed.png?wh=715*558\" alt=\"\"></p><center><span class=\"reference\">信令状态机图</span></center><p>在初始时，客户端处于 init/leaved 状态。在 init/leaved 状态下，用户只能发送 join 消息。服务端收到 join 消息后，会返回 joined 消息。此时，客户端会更新为 joined 状态。</p><p>在 joined 状态下，客户端有多种选择，收到不同的消息会切到不同的状态。</p><ul>\n<li>如果用户离开房间，那客户端又回到了初始状态，即 init/leaved 状态。</li>\n<li>如果客户端收到 second user join 消息，则切换到 joined_conn 状态。在这种状态下，两个用户就可以进行通话了。</li>\n<li>如果客户端收到 second user leave 消息，则切换到 joined_unbind 状态。其实 joined_unbind 状态与 joined 状态基本是一致的。</li>\n</ul><p>如果客户端处于 joined_conn 状态，当它收到 second user leave 消息时，会转成 joined_unbind 状态。</p><p>如果客户端是 joined_unbind 状态，当它收到 second user join 消息时，会切到 joined_conn 状态。</p><p>通过上面的状态图，我们就可以清楚地知道在什么状态下应该发什么信令；或者说，发什么样的信令，信令状态就会发生怎样的变化了。</p><h3>信令系统的实现</h3><p>在我们这个系统中，信令的实现还是通过“Node + socket.io”来实现的。上面我们已经详细介绍了信令的状态是如何变化的，再结合<a href=\"https://time.geekbang.org/column/article/114179\">《11 | 如何通过Node.js实现一套最简单的信令系统？》</a>一文中介绍的如何通过 socket.io 实现信令服务器，这样你就可以很轻松地将信令系统实现出来了。</p><p>这里我就不将详细的代码列出来了，在文章的最后我会将本文的示例代码展示出来，你可以参考它来实现。</p><h2>TURN服务器的搭建</h2><p>在之前的文章中，有一个重要的知识点一直没介绍，那就是 TURN 服务。它有两个作用，一是提供 STUN 服务，客户端可以通过 STUN 服务获取自己的外网地址；二是提供数据中继服务。</p><p>当通信的双方无法通过 P2P 进行数据传输时，为了保证数据的连通性，我们就必须使用中继的方式让通信双方的数据可以互通，如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/e3/68/e32cd7ea6aa175c8a64739d9c95a3968.png?wh=1142*686\" alt=\"\"></p><center><span class=\"reference\">WebRTC 处理过程图</span></center><p>目前最著名的 TURN 服务器是由 Google 发起的开源项目 coturn，它的源码和项目描述可以在 GitHub 上找到，地址为：<a href=\"https://github.com/coturn/coturn%E3%80%82\">https://github.com/coturn/coturn。</a></p><p>coturn的编译安装与部署还是比较简单的。首先我们来看看如何编译安装coturn，其步骤如下：</p><ul>\n<li>从 <a href=\"https://github.com/coturn/coturn\">https://github.com/coturn/coturn</a> 下载 coturn 代码；</li>\n<li>执行 <code>./configure --prefix=/usr/local/coturn</code> 生成 Makefile；</li>\n<li>执行 <code>make</code> 来编译 coturn；</li>\n<li>执行 <code>sudo make install</code> 进行安装。</li>\n</ul><p>接下来是布署，coturn 的配置文件中有很多选项，不过这些选项大部分都可以不用，或采用默认值，因此我们只需要修改4项内容就可以将coturn 服务配置好了，这4项配置如下：</p><p><img src=\"https://static001.geekbang.org/resource/image/eb/b3/ebdd9a607e4dee9e7016285281e33ab3.png?wh=1142*251\" alt=\"\"></p><p>这里需要注意的是，在网上能看到很多讲解coturn配置的文章，但其中大部分配置都是有问题的，所以建议你按照本文所讲的步骤进行配置，避免浪费你宝贵的时间。</p><h2>音视频数据的采集</h2><p>音视频数据采集的过程我们已经在<a href=\"https://time.geekbang.org/column/article/107948\">《01 | 原来通过浏览器访问摄像头这么容易》</a>一文中做过详细介绍了，<strong>通过 getUserMedia 就可以获取到</strong>，就不再赘述了。</p><p>不过需要注意的是，我们系统采集音视频数据的时间点与以前不一样了，以前是在浏览器显示页面时就开始采集了，而现在则是在用户点击“Connect Sig Server”按钮时才开始采集音视频数据。</p><h2>创建 RTCPeerConnection</h2><p>信令系统建立好后，后面的逻辑都是围绕着信令系统建立起来的，RTCPeerConnection 对象也不例外。</p><p>在客户端，用户要想与远端通话，首先要发送 join 消息，也就是要先进入房间。此时，如果服务器判定用户是合法的，则会给客户端回 joined 消息。</p><p>客户端收到 joined 消息后，就要创建 RTCPeerConnection 对象了，也就是要建立一条与远端通话的音视频数据传输通道。</p><p>下面，我们就结合示例代码来看一下 RTCPeerConnection 是如何建立的。</p><pre><code>...\nvar pcConfig = {\n  'iceServers': [{ //指定 ICE 服务器信令\n    'urls': 'turn:stun.al.learningrtc.cn:3478', //turn服务器地址\n    'credential': &quot;passwd&quot;, //turn服务器密码，你要用自己的 \n    'username': &quot;username&quot;  //turn服务器用户名，你要用自己的\n  }]\n};\n\n...\n\nfunction createPeerConnection(){\n \n  if(!pc){\n    pc = new RTCPeerConnection(pcConfig); //创建peerconnection对象\n    ...\n    pc.ontrack = getRemoteStream; //当远端的track到来时会触发该事件\n  }else {\n    console.log('the pc have be created!');\n  }\n\n  return;\n}\n\n...\n</code></pre><p>上面这段代码需要注意的是创建 RTCPeerConnection 对象时的 pcConfig 参数，在该参数中我们设置了 TURN 服务器地址、用户名和密码，这样当 RTCPeerConnection 通过 P2P 建立连接失败时，就会使用TURN 服务器进行数据中继。</p><p>RTCPeerConnection 对象创建好后，我们要将前面获取的音视频数据与它绑定到一起，这样才能通过 RTCPeerConnection 对象将音视频数据传输出去。绑定的步骤如下：</p><pre><code>function bindTracks(){\n  ...\n  //add all track into peer connection\n  localStream.getTracks().forEach((track)=&gt;{\n    pc.addTrack(track, localStream); //将track与peerconnection绑定\n  });\n}\n</code></pre><p>在上面的代码中，从 localStream 中遍历所有的track，然后添加到 RTCPeerConnection 对象中就好了。</p><p>以上工作完成后，接下来最重要的一步就是<strong>媒体协商</strong>了，对于媒体协商的过程我们已经在<a href=\"https://time.geekbang.org/column/article/111675\">《08 | 有话好商量，论媒体协商》</a>一文中做过详细分析了。具体的逻辑我就不再重复了，不过需要注意的是，在本文中媒体协商的消息都是通过信令进行交互的，具体的实现可以参考文末的示例代码。</p><h2>音视频的渲染与播放</h2><p>按照上面的步骤，音视频数据就可以被采集到了，RTCPeerConnection 对象也创建好了，通过信令服务器也可以将各端的 Candidate 交换完成了。</p><p>此时在WebRTC 的底层就会进行连通性检测，它首先判断通信的双方是否在同一个局域网内，如果在同一个局域网内，则让双方直接进行连接；如果不在同一局域网内，则尝试用 P2P 连接，如果仍然不成功，则使用 TURN 服务进行数据中继。</p><p>一旦数据连通后，数据就从一端源源不断地传到了远端，此时远端只需要将数据与播放器对接，就可以看到对端的视频、听到对方的声音了。</p><p>在浏览器上实现这一点非常容易，当数据流过来的时候会触发 RTCPeerConnection对象的 ontrack 事件，只要我们侦听该事件，并在回调函数中将收到的 track 与<code>&lt;video&gt;</code>标签绑定到一起就好了，代码如下：</p><pre><code>var remoteVideo = document.querySelector('video#remotevideo');\n...\nfunction getRemoteStream(e){  //事件处理函数\n  remoteStream = e.streams[0]; //保存远端的流\n  remoteVideo.srcObject = e.streams[0]; //与HTML中的视频标签绑定\n}\n...\npc = new RTCPeerConnection(pcConfig);\n...\npc.ontrack = getRemoteStrea //当远端的track过来时触发该事件\n...\n</code></pre><p>通过上面的代码，我们可以看到，当 ontrack 事件触发时，会调用 getRemoteStream 函数，该函数从参数 e 中取出stream 赋值给 remoteVideo（<code>&lt;video&gt;</code>标签）的 srcObject 属性，这就可以了。</p><h2>小结</h2><p>以上就是浏览器端实现1对1实时通话的整体逻辑。在本文中，我通过对运行环境的搭建、Web 服务器的实现、信令系统的实现、TURN 服务器的搭建、RTCPeerConnection的创建、音视频数据的采集、传输、渲染与播放这几个主题的介绍，向你完整地讲解了在浏览器上实现1对1实时音视频通话的过程。</p><p>在这几个主题中，运行环境的搭建、信令系统的实现、TURN 服务器的搭建是之前没有讲过的知识，其他的知识点我在前面的文章中都有向你详细介绍过。如果你不记得或者觉得生疏了，可以再复习一下前面的文章。</p><p>总之，通过本文的“串联”，你就可以实现一个真正的 1 对 1 的实时音视频直播系统了。赶紧操练起来吧！</p><h2>思考时间</h2><p>你是否可以将以前所学的所有功能都集成到一起，形成一套相对完整的直播系统呢？</p><p>欢迎在留言区与我分享你的想法，也欢迎你在留言区记录你的思考过程。感谢阅读，如果你觉得这篇文章对你有帮助的话，也欢迎把它分享给更多的朋友。</p><p><a href=\"https://github.com/avdance/webrtc_web/tree/master/23_living\">所做Demo的GitHub链接（有需要可以点这里）</a></p><p></p>","neighbors":{"left":{"article_title":"22 | 如何保证数据传输的安全（下）？","id":131276},"right":{"article_title":"24 | 多人音视频实时通讯是怎样的架构？","id":132863}},"comments":[{"had_liked":false,"id":146374,"user_name":"dahaowenge","can_delete":false,"product_type":"c1","uid":1677266,"ip_address":"","ucode":"90E104E004F79C","user_header":"https://static001.geekbang.org/account/avatar/00/19/97/d2/daaed7d8.jpg","comment_is_top":false,"comment_ctime":1572509554,"is_pvip":false,"replies":[{"id":"57404","content":"addtrack 和 ontrack 是最新的API， 慢慢 addstream 就不用了。","user_name":"作者回复","comment_id":146374,"uid":"1507837","ip_address":"","utype":1,"ctime":1573192042,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"14457411442","product_id":100031801,"comment_content":"老师你好，前几节加入本地流用的addstream  获取远端流用的是onaddstream。这一节里用的是addtrack和ontrack，这两套写法有什么区别么","like_count":3,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472827,"discussion_content":"addtrack 和 ontrack 是最新的API， 慢慢 addstream 就不用了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573192042,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132516,"user_name":"Geek_leo长沙","can_delete":false,"product_type":"c1","uid":1617384,"ip_address":"","ucode":"2AEEAF499FBDC1","user_header":"","comment_is_top":false,"comment_ctime":1568159915,"is_pvip":false,"replies":[{"id":"50814","content":"是的，你要自己做一个 service 一直侦听着服务端的消息，当有消息呼叫你的时候，你用service将应用拉起来，同时加入到同一个房间里，这样就可以了。","user_name":"作者回复","comment_id":132516,"uid":"1507837","ip_address":"","utype":1,"ctime":1568194949,"user_name_real":"garrylee"}],"discussion_count":2,"race_medal":0,"score":"14453061803","product_id":100031801,"comment_content":"老师，我要在移动端实现点对点呼叫，A呼叫B的时候，B能被动的拉起视频界面(B事先不知道A想和他视频)，我Android移动端是不是要有一个service服务一直在监听socketio的广播消息，例如在socket.on()监听协商好的指令，然后B在主动选择是否加入房间。不知道是否","like_count":3,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466984,"discussion_content":"是的，你要自己做一个 service 一直侦听着服务端的消息，当有消息呼叫你的时候，你用service将应用拉起来，同时加入到同一个房间里，这样就可以了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568194949,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1617384,"avatar":"","nickname":"Geek_leo长沙","note":"","ucode":"2AEEAF499FBDC1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":9805,"discussion_content":"谢谢老师","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568216030,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287099,"user_name":"Geek_ab346c","can_delete":false,"product_type":"c1","uid":2551842,"ip_address":"","ucode":"CC2B6F71CA1761","user_header":"","comment_is_top":false,"comment_ctime":1617777067,"is_pvip":false,"replies":[{"id":"104286","content":"你需要将它部署到web 服务器上","user_name":"作者回复","comment_id":287099,"uid":"1507837","ip_address":"","utype":1,"ctime":1617847191,"user_name_real":"音视频专家-李超"}],"discussion_count":1,"race_medal":0,"score":"5912744363","product_id":100031801,"comment_content":"老师你好，我下载了你的音视频通话那个，但是我运行了报错，http:&#47;&#47;file&#47;socket.io&#47;?EIO=3&amp;transport=polling&amp;t=NYh1GRl net::ERR_NAME_NOT_RESOLVED","like_count":1,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518193,"discussion_content":"你需要将它部署到web 服务器上","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617847191,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284502,"user_name":"微笑","can_delete":false,"product_type":"c1","uid":1678805,"ip_address":"","ucode":"5B204327DA1CE5","user_header":"https://static001.geekbang.org/account/avatar/00/19/9d/d5/1f3bcb2e.jpg","comment_is_top":false,"comment_ctime":1616308668,"is_pvip":false,"replies":[{"id":"103788","content":"在国内基本是对称性NAT","user_name":"作者回复","comment_id":284502,"uid":"1507837","ip_address":"","utype":1,"ctime":1617071404,"user_name_real":"音视频专家-李超"}],"discussion_count":2,"race_medal":0,"score":"5911275964","product_id":100031801,"comment_content":"老师你好,我在局域网能实现1v1直播, 但是不同网络下有小概率能成功，请问是什么原因呢？","like_count":1,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517369,"discussion_content":"在国内基本是对称性NAT","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617071404,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2551842,"avatar":"","nickname":"Geek_ab346c","note":"","ucode":"CC2B6F71CA1761","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":365079,"discussion_content":"微笑，你好请问这个弄出来了吗，可以加一下QQ吗：1303805985","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617702963,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273915,"user_name":"Geek_fe19fe","can_delete":false,"product_type":"c1","uid":2055258,"ip_address":"","ucode":"77080464D31725","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epHNuOTMIO9AmibXQ8ibsbAhYMiaYtBX7yI88zZHiakwc829S6iaerDFlqPvsySleQnm7yPCHCPyTZ1NAA/132","comment_is_top":false,"comment_ctime":1610722061,"is_pvip":false,"replies":[{"id":"103799","content":"可以通过动态获取用户名密码的方式，你可以在网上查一下；","user_name":"作者回复","comment_id":273915,"uid":"1507837","ip_address":"","utype":1,"ctime":1617073002,"user_name_real":"音视频专家-李超"}],"discussion_count":2,"race_medal":0,"score":"5905689357","product_id":100031801,"comment_content":"老师，pcConfig中的主机、用户名、密码不是暴露出去了吗，这样别人也可以用，怎么保证安全呢","like_count":1,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513859,"discussion_content":"可以通过动态获取用户名密码的方式，你可以在网上查一下；","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617073002,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1981915,"avatar":"","nickname":"宇宙之王","note":"","ucode":"5E6C28F8CCFF6D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349889,"discussion_content":"同问这个问题，如何隐藏呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613619321,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":264125,"user_name":"白马","can_delete":false,"product_type":"c1","uid":1103540,"ip_address":"","ucode":"FD4DA715AC5984","user_header":"https://static001.geekbang.org/account/avatar/00/10/d6/b4/0808999d.jpg","comment_is_top":false,"comment_ctime":1606357475,"is_pvip":false,"replies":[{"id":"103816","content":"1，内网就不需要turn 服务了；2. 你可以使用Mesh 方案，并且老师端不调用addtrack ","user_name":"作者回复","comment_id":264125,"uid":"1507837","ip_address":"","utype":1,"ctime":1617074749,"user_name_real":"音视频专家-李超"}],"discussion_count":2,"race_medal":0,"score":"5901324771","product_id":100031801,"comment_content":"李工你好，<br>我想在内网实现每个房间中都是多端（学生）向一端（老师）传输媒体流，只有老师端能看到所有学生的画面，学生只能看到自己的画面。在这种情况下：1. 还需要使用TURN和STUN服务器吗？2. 由于老师端无需传输媒体流数据，在代码实现上是否只需要教师端不向连接addTrack就可以？","like_count":1,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510431,"discussion_content":"1，内网就不需要turn 服务了；2. 你可以使用Mesh 方案，并且老师端不调用addtrack ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617074749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1103540,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d6/b4/0808999d.jpg","nickname":"白马","note":"","ucode":"FD4DA715AC5984","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384172,"discussion_content":"谢谢！我试试！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626410934,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206650,"user_name":"Geek_015508","can_delete":false,"product_type":"c1","uid":1965898,"ip_address":"","ucode":"E13D05B8D52315","user_header":"","comment_is_top":false,"comment_ctime":1586913723,"is_pvip":false,"replies":[{"id":"77609","content":"relay是不需要域名的，真正需要域名的是web(js)的客户端代码，因为它要访问用户的摄像头或mic","user_name":"作者回复","comment_id":206650,"uid":"1507837","ip_address":"","utype":1,"ctime":1587221995,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"5881881019","product_id":100031801,"comment_content":"老师好，麻烦请教一下，我的服务器是没有域名的，在服务器仅仅将turnserver.conf 中的ream设置为一个IP(如1.2.3.4)，在jsWebRTC中的iceServices仅仅配置为turn:1.2.3.4:3478 这样可否实现relay？","like_count":1,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491853,"discussion_content":"relay是不需要域名的，真正需要域名的是web(js)的客户端代码，因为它要访问用户的摄像头或mic","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587221995,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":201212,"user_name":"王皓月","can_delete":false,"product_type":"c1","uid":1154968,"ip_address":"","ucode":"02F05C485968DB","user_header":"https://static001.geekbang.org/account/avatar/00/11/9f/98/b6f20c10.jpg","comment_is_top":false,"comment_ctime":1585733518,"is_pvip":false,"replies":[{"id":"76545","content":"当然，你把采集中的视频关掉就好了呀","user_name":"作者回复","comment_id":201212,"uid":"1507837","ip_address":"","utype":1,"ctime":1586485165,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"5880700814","product_id":100031801,"comment_content":"老师您好，WebRTC是否支持浏览器端1对1语音通话，仅语音，不视频","like_count":1,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490263,"discussion_content":"当然，你把采集中的视频关掉就好了呀","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586485165,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132649,"user_name":"Joseph","can_delete":false,"product_type":"c1","uid":1430073,"ip_address":"","ucode":"B7F6B88AB90679","user_header":"https://static001.geekbang.org/account/avatar/00/15/d2/39/a7edf2b9.jpg","comment_is_top":false,"comment_ctime":1568184934,"is_pvip":false,"replies":[{"id":"50826","content":"现在的candidate都不会在 SDP 中出现了，都是通过事件触发的，看一下媒体协商的那篇文章","user_name":"作者回复","comment_id":132649,"uid":"1507837","ip_address":"","utype":1,"ctime":1568195345,"user_name_real":"garrylee"}],"discussion_count":2,"race_medal":0,"score":"5863152230","product_id":100031801,"comment_content":"老师我遇到了个新问题，就是createAnswer的时候生成的sdp中并没有candidate信息。配置的参数和您给的一样，只是修改为我的stun&#47;turn服务器地址。请问candidate信息的生成和什么参数有关系？","like_count":1,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467052,"discussion_content":"现在的candidate都不会在 SDP 中出现了，都是通过事件触发的，看一下媒体协商的那篇文章","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568195345,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1935262,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/87/9e/e18f55ec.jpg","nickname":"张一画","note":"","ucode":"53209E3BD46FC3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307522,"discussion_content":"懂了！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600675560,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131188,"user_name":"橦魚","can_delete":false,"product_type":"c1","uid":1014544,"ip_address":"","ucode":"356623DFB41032","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7b/10/57653969.jpg","comment_is_top":false,"comment_ctime":1567666465,"is_pvip":false,"replies":[{"id":"49709","content":"系统默认应该是不支持的，你可以用ffmpeg将 avi 转成浏览器支持的格式，一般都是这样做","user_name":"作者回复","comment_id":131188,"uid":"1507837","ip_address":"","utype":1,"ctime":1567698182,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"5862633761","product_id":100031801,"comment_content":"老师，有个问题想请教一下，网页端支持播放avi格式视频，改怎么实现","like_count":1,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466327,"discussion_content":"系统默认应该是不支持的，你可以用ffmpeg将 avi 转成浏览器支持的格式，一般都是这样做","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567698182,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356960,"user_name":"| ~浑蛋~","can_delete":false,"product_type":"c1","uid":3024820,"ip_address":"广东","ucode":"B6904B44DFA805","user_header":"https://static001.geekbang.org/account/avatar/00/2e/27/b4/df65c0f7.jpg","comment_is_top":false,"comment_ctime":1662729375,"is_pvip":true,"discussion_count":0,"race_medal":3,"score":"1662729375","product_id":100031801,"comment_content":"为啥&#47;socket.io&#47;EIO这个接口调用返回400状态码","like_count":0},{"had_liked":false,"id":341518,"user_name":"沃思故我在","can_delete":false,"product_type":"c1","uid":2436823,"ip_address":"","ucode":"D813F4DBD1875E","user_header":"https://static001.geekbang.org/account/avatar/00/25/2e/d7/f1d58093.jpg","comment_is_top":false,"comment_ctime":1649671086,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1649671086","product_id":100031801,"comment_content":"老师，这种问题咋解决呀 error: ENOENT: no such file or directory, open &#39;.&#47;cert&#47;1557605_www.learningrtc.cn.key&#39; ","like_count":0},{"had_liked":false,"id":327383,"user_name":"Cherry","can_delete":false,"product_type":"c1","uid":1607566,"ip_address":"","ucode":"750F89DCB99F2F","user_header":"https://static001.geekbang.org/account/avatar/00/18/87/8e/d155ab63.jpg","comment_is_top":false,"comment_ctime":1640093323,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640093323","product_id":100031801,"comment_content":"老师，你好，配置coturn服务器，必须要设置relam域名吗？relam设置为云服务器外网ip地址可以吗？","like_count":0},{"had_liked":false,"id":315583,"user_name":"no ne","can_delete":false,"product_type":"c1","uid":1768793,"ip_address":"","ucode":"15295B9864D4C7","user_header":"https://static001.geekbang.org/account/avatar/00/1a/fd/59/7f653e69.jpg","comment_is_top":false,"comment_ctime":1633924507,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1633924507","product_id":100031801,"comment_content":"老师,我coturn是在本地直接apt-get install coturn下载并且相关配置指定的公网ip,然后https对应的客户端代码放在服务器的,在不同外网浏览器下是可以打开的,分别进入房间后只能看到自己的视频是什么原因啊,sdp有看到打印","like_count":0,"discussions":[{"author":{"id":1768793,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/fd/59/7f653e69.jpg","nickname":"no ne","note":"","ucode":"15295B9864D4C7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":403599,"discussion_content":"已经解决了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634116071,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273914,"user_name":"bryantwhu","can_delete":false,"product_type":"c1","uid":2413634,"ip_address":"","ucode":"DAC45A9473A879","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLJYD17GibEy7EC1YQwCGlasA9tB3usZHWbW0tnkuCq6Y8bIuSyLWKstB0YZx6xPyUP8XHhKnJTZbw/132","comment_is_top":false,"comment_ctime":1610721436,"is_pvip":false,"replies":[{"id":"103800","content":"可以呀，https 服务器实际上是提供客户端代码的，放在哪里都可以","user_name":"作者回复","comment_id":273914,"uid":"1507837","ip_address":"","utype":1,"ctime":1617073071,"user_name_real":"音视频专家-李超"}],"discussion_count":2,"race_medal":0,"score":"1610721436","product_id":100031801,"comment_content":"coturn服务器与https服务器可以是不同的云服务器吗（都各自有固定的外网IP）","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513858,"discussion_content":"可以呀，https 服务器实际上是提供客户端代码的，放在哪里都可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617073071,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1981915,"avatar":"","nickname":"宇宙之王","note":"","ucode":"5E6C28F8CCFF6D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349888,"discussion_content":"可以的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613619286,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":255020,"user_name":"木瓜777","can_delete":false,"product_type":"c1","uid":1512537,"ip_address":"","ucode":"FC52A499AF6374","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/aFAYPyw7ywC1xE9h1qibnTBwtWn2ClJqlicy5cMomhZVaruMyqSq76wMkS279mUaGhrLGwWo9ZnW0WCWfmMovlXw/132","comment_is_top":false,"comment_ctime":1603251685,"is_pvip":false,"replies":[{"id":"94542","content":"你需要布署的是coturn服务器，利用coturn服务器进行数据中转","user_name":"作者回复","comment_id":255020,"uid":"1507837","ip_address":"","utype":1,"ctime":1605003812,"user_name_real":"音视频专家-李超"}],"discussion_count":1,"race_medal":0,"score":"1603251685","product_id":100031801,"comment_content":"老师，你好。目前我的一端webrtc在内网，另一端浏览器在外网，那我部署的 stun服务器（具有公网ip），是否需要 可以直接访问 内网的机器 ？ 还是说 内网机器 可以 访问 stun服务器 就行？","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":507586,"discussion_content":"你需要布署的是coturn服务器，利用coturn服务器进行数据中转","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605003812,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":238939,"user_name":"Dream","can_delete":false,"product_type":"c1","uid":2103339,"ip_address":"","ucode":"585F3718905676","user_header":"https://static001.geekbang.org/account/avatar/00/20/18/2b/be4a0024.jpg","comment_is_top":false,"comment_ctime":1596376696,"is_pvip":false,"replies":[{"id":"88589","content":"你没有装turn服务的话就会有这个问题","user_name":"作者回复","comment_id":238939,"uid":"1507837","ip_address":"","utype":1,"ctime":1596691391,"user_name_real":"音视频专家-李超"}],"discussion_count":1,"race_medal":0,"score":"1596376696","product_id":100031801,"comment_content":"您好，我测试你的https:&#47;&#47;learningrtc.cn&#47;old_pc&#47;index.html案例没办法，只能做到同一个局域网下的一对一音视频通信，无法做到不同网络下（含手机4G网络）的音视频通讯。不知道你自己是否测试过？？请问下这是什么原因？？？","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502904,"discussion_content":"你没有装turn服务的话就会有这个问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596691391,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":230572,"user_name":"童欧巴","can_delete":false,"product_type":"c1","uid":1569063,"ip_address":"","ucode":"FCCE531C9CE8A0","user_header":"https://static001.geekbang.org/account/avatar/00/17/f1/27/0472f5ff.jpg","comment_is_top":false,"comment_ctime":1593421324,"is_pvip":true,"replies":[{"id":"85439","content":"video标签可以接收流，也可能接收媒体文件。你网上查一下","user_name":"作者回复","comment_id":230572,"uid":"1507837","ip_address":"","utype":1,"ctime":1593662338,"user_name_real":"音视频专家-李超"}],"discussion_count":2,"race_medal":0,"score":"1593421324","product_id":100031801,"comment_content":"老师，video标签只能够通过srcObject接收stream嘛？有什么方式可以通过src 接收？一般开源的播放器都是只支持src引入url。如果只能通过srcObject接收的话，就只能自己封装播放器了。对吧？","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499940,"discussion_content":"video标签可以接收流，也可能接收媒体文件。你网上查一下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593662338,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1569063,"avatar":"https://static001.geekbang.org/account/avatar/00/17/f1/27/0472f5ff.jpg","nickname":"童欧巴","note":"","ucode":"FCCE531C9CE8A0","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288287,"discussion_content":"嗯嗯 srcObject 是可以接收流的 但是开源的播放器插件都是通过src接收url 。以前的浏览器版本中 可以使用url.createUrl 将流变成url 传入src 。现在被浏览器禁止了。所以如果想通过 srcObject 接收流 就只能基于原生js 封装一套播放器插件来用了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593702764,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":229217,"user_name":"gonbcs","can_delete":false,"product_type":"c1","uid":2036634,"ip_address":"","ucode":"DB9897070B25EC","user_header":"https://static001.geekbang.org/account/avatar/00/1f/13/9a/c9125668.jpg","comment_is_top":false,"comment_ctime":1592925464,"is_pvip":false,"replies":[{"id":"84636","content":"如果是商业的话，1对多一定要用流媒体服务器；但如果你是自己学习用，可能用Mesh 方案,  在这个专栏中有介绍！","user_name":"作者回复","comment_id":229217,"uid":"1507837","ip_address":"","utype":1,"ctime":1592974897,"user_name_real":"音视频专家-李超"}],"discussion_count":2,"race_medal":0,"score":"1592925464","product_id":100031801,"comment_content":"老师您好！ 实现一对多可以不是我媒体服务器吗 一个发起端 多个接收端的场景","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499382,"discussion_content":"如果是商业的话，1对多一定要用流媒体服务器；但如果你是自己学习用，可能用Mesh 方案,  在这个专栏中有介绍！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592974897,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1935262,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/87/9e/e18f55ec.jpg","nickname":"张一画","note":"","ucode":"53209E3BD46FC3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307416,"discussion_content":"同问 哥们你实现了吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600643034,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206688,"user_name":"罗志军","can_delete":false,"product_type":"c1","uid":1017386,"ip_address":"","ucode":"1C4D087359D540","user_header":"https://static001.geekbang.org/account/avatar/00/0f/86/2a/b5e76b33.jpg","comment_is_top":false,"comment_ctime":1586917267,"is_pvip":false,"replies":[{"id":"77608","content":"对于 1:1 的场景没有问题，但多对多就不行了。必须使用 webrtc流媒体服务器","user_name":"作者回复","comment_id":206688,"uid":"1507837","ip_address":"","utype":1,"ctime":1587221917,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1586917267","product_id":100031801,"comment_content":"老师，观看局域网的IPC流可以使用coturn这一套吗。<br>场景：公司有几台IPC，手机观看如果是内网就走内网，如果是外网就nat否则就转发。","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491866,"discussion_content":"对于 1:1 的场景没有问题，但多对多就不行了。必须使用 webrtc流媒体服务器","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587221917,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180602,"user_name":"AA-DENNIS","can_delete":false,"product_type":"c1","uid":1180746,"ip_address":"","ucode":"6429DE3C02EFD1","user_header":"https://static001.geekbang.org/account/avatar/00/12/04/4a/356ce5e2.jpg","comment_is_top":false,"comment_ctime":1582347814,"is_pvip":false,"replies":[{"id":"70149","content":"你测试coturn服务可以正常工吗？","user_name":"作者回复","comment_id":180602,"uid":"1507837","ip_address":"","utype":1,"ctime":1582429677,"user_name_real":"garrylee"}],"discussion_count":3,"race_medal":0,"score":"1582347814","product_id":100031801,"comment_content":"老师，我测试的时候，两个浏览器局域网可以一对一音视频，但是不同局域网就没法一对一音视频。有什么原因导致的呢？我做的修改有:1.main.js修改为指向阿里云搭建的coturn服务器。2:server.js配置了自己的key和crt.","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484730,"discussion_content":"你测试coturn服务可以正常工吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582429677,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1180746,"avatar":"https://static001.geekbang.org/account/avatar/00/12/04/4a/356ce5e2.jpg","nickname":"AA-DENNIS","note":"","ucode":"6429DE3C02EFD1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":187314,"discussion_content":"是防火墙的问题，现在已经搞定了。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1582729671,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1935262,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/87/9e/e18f55ec.jpg","nickname":"张一画","note":"","ucode":"53209E3BD46FC3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307415,"discussion_content":"是不是coturn的端口没开","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600642930,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142514,"user_name":"王乐","can_delete":false,"product_type":"c1","uid":1029354,"ip_address":"","ucode":"9261F5F50A8331","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b4/ea/b3dca4dd.jpg","comment_is_top":false,"comment_ctime":1571384883,"is_pvip":false,"replies":[{"id":"55199","content":"看一下你的 node 版本是不是太低了？现然都是 10.0 以上的版本","user_name":"作者回复","comment_id":142514,"uid":"1507837","ip_address":"","utype":1,"ctime":1571586453,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1571384883","product_id":100031801,"comment_content":"启动node server.js，报错误，请老师给看下，错误信息如下：<br>&#47;usr&#47;local&#47;download&#47;node_modules&#47;streamroller&#47;lib&#47;RollingFileWriteStream.js:133<br>  async _shouldRoll() {<br>        ^^^^^^^^^^^<br><br>SyntaxError: Unexpected identifier<br>    at createScript (vm.js:56:10)<br>    at Object.runInThisContext (vm.js:97:10)<br>    at Module._compile (module.js:549:28)<br>    at Object.Module._extensions..js (module.js:586:10)<br>    at Module.load (module.js:494:32)<br>    at tryModuleLoad (module.js:453:12)<br>    at Function.Module._load (module.js:445:3)<br>    at Module.require (module.js:504:17)<br>    at require (internal&#47;module.js:20:19)<br>    at Object.&lt;anonymous&gt; (&#47;usr&#47;local&#47;download&#47;node_modules&#47;streamroller&#47;lib&#47;index.js:2:27)","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471156,"discussion_content":"看一下你的 node 版本是不是太低了？现然都是 10.0 以上的版本","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571586453,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141548,"user_name":"rookie","can_delete":false,"product_type":"c1","uid":1225665,"ip_address":"","ucode":"4428BC9BAC684D","user_header":"https://static001.geekbang.org/account/avatar/00/12/b3/c1/b96b5015.jpg","comment_is_top":false,"comment_ctime":1571189469,"is_pvip":false,"replies":[{"id":"54804","content":"可以，有固定的外网IP地址吗？如果没有的话，你需要在公司做个代理。如果不熟悉的话，找IT&#47;运维人员帮你弄一下。","user_name":"作者回复","comment_id":141548,"uid":"1507837","ip_address":"","utype":1,"ctime":1571282336,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1571189469","product_id":100031801,"comment_content":"必须使用云服务器吗？使用公司的实体服务器不可以吗？","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470794,"discussion_content":"可以，有固定的外网IP地址吗？如果没有的话，你需要在公司做个代理。如果不熟悉的话，找IT/运维人员帮你弄一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571282336,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140481,"user_name":"峰","can_delete":false,"product_type":"c1","uid":1233546,"ip_address":"","ucode":"84925F8DEE79CA","user_header":"https://static001.geekbang.org/account/avatar/00/12/d2/8a/57dcd0c7.jpg","comment_is_top":false,"comment_ctime":1570957070,"is_pvip":false,"replies":[{"id":"54373","content":"可能是你的浏览器有问题，换个浏览器试试。或找别人的浏览器试试","user_name":"作者回复","comment_id":140481,"uid":"1507837","ip_address":"","utype":1,"ctime":1571030717,"user_name_real":"garrylee"}],"discussion_count":2,"race_medal":0,"score":"1570957070","product_id":100031801,"comment_content":"用官网https:&#47;&#47;webrtc.github.io&#47;samples&#47;src&#47;content&#47;peerconnection&#47;trickle-ice&#47;测试报如下错误<br>The server stun:xxx.xxx.x.xx:3478 returned an error with code=701:<br>STUN host lookup received error<br>老师是否知道，这大概率是由什么引起的吗？","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470410,"discussion_content":"可能是你的浏览器有问题，换个浏览器试试。或找别人的浏览器试试","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571030717,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1559047,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ca/07/5836d7ac.jpg","nickname":"花弄影","note":"","ucode":"7F542D09BBEE2A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371544,"discussion_content":"我的turn用你这个方法测试通过了，但是外网不能视频通话，局域网可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619835837,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136765,"user_name":"孤芳浪子","can_delete":false,"product_type":"c1","uid":1428050,"ip_address":"","ucode":"C973D8A0F3EED9","user_header":"https://static001.geekbang.org/account/avatar/00/15/ca/52/b51aeed7.jpg","comment_is_top":false,"comment_ctime":1569504279,"is_pvip":false,"replies":[{"id":"52847","content":"可以的，后面有文章对这几个服务器做比较","user_name":"作者回复","comment_id":136765,"uid":"1507837","ip_address":"","utype":1,"ctime":1569770430,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1569504279","product_id":100031801,"comment_content":"你好，janus这个开源库，能作为server用吗？","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468794,"discussion_content":"可以的，后面有文章对这几个服务器做比较","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569770430,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133433,"user_name":"峰","can_delete":false,"product_type":"c1","uid":1233546,"ip_address":"","ucode":"84925F8DEE79CA","user_header":"https://static001.geekbang.org/account/avatar/00/12/d2/8a/57dcd0c7.jpg","comment_is_top":false,"comment_ctime":1568560748,"is_pvip":false,"replies":[{"id":"51468","content":"用这个测，https:&#47;&#47;webrtc.github.io&#47;samples&#47;src&#47;content&#47;peerconnection&#47;trickle-ice&#47;， 如果这个不通的话，说明你的配置有问题。一定要按照文中的配置进行设置，否则会出现各种问题","user_name":"作者回复","comment_id":133433,"uid":"1507837","ip_address":"","utype":1,"ctime":1568780153,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1568560748","product_id":100031801,"comment_content":"turnserver测试，结果如下<br>0: SQLite DB connection success: &#47;var&#47;lib&#47;turn&#47;turndb<br>179: IPv4. tcp or tls connected to: xxx.30.2xxx.112:57281<br>179: HTTPS connection has been disabled due Vulnerability in the Web interface !!!<br>179: session 001000000000000001: client socket to be closed in client handler: ss=0x7fcb180043a0<br>179: session 001000000000000001: closed (2nd stage), user &lt;&gt; realm &lt;xxxx.xyz&gt; origin &lt;&gt;, local xx.17.xx.9:3478, remote xxx.30.xxx.112:57281, reason: general是什么意思啊？","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467390,"discussion_content":"用这个测，https://webrtc.github.io/samples/src/content/peerconnection/trickle-ice/， 如果这个不通的话，说明你的配置有问题。一定要按照文中的配置进行设置，否则会出现各种问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568780153,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132808,"user_name":"Joseph","can_delete":false,"product_type":"c1","uid":1430073,"ip_address":"","ucode":"B7F6B88AB90679","user_header":"https://static001.geekbang.org/account/avatar/00/15/d2/39/a7edf2b9.jpg","comment_is_top":false,"comment_ctime":1568245017,"is_pvip":false,"replies":[{"id":"50917","content":"不用，webrtc是兼容的。如果你在 SDP中放了candidate，那么它也能识别出来","user_name":"作者回复","comment_id":132808,"uid":"1507837","ip_address":"","utype":1,"ctime":1568278160,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1568245017","product_id":100031801,"comment_content":"老师，是这样的，我现在在对接别人的服务，他们提供的sdp是包含candidate，那我这边是需要降低webrtc的版本吗？","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467130,"discussion_content":"不用，webrtc是兼容的。如果你在 SDP中放了candidate，那么它也能识别出来","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568278160,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131846,"user_name":"初音韶歌","can_delete":false,"product_type":"c1","uid":1585331,"ip_address":"","ucode":"2EA5EDE3693CCB","user_header":"https://static001.geekbang.org/account/avatar/00/18/30/b3/527f84de.jpg","comment_is_top":false,"comment_ctime":1567935446,"is_pvip":false,"replies":[{"id":"50606","content":"有 stop 函数呀。在stream中有 track， track 有stop 函数。","user_name":"作者回复","comment_id":131846,"uid":"1507837","ip_address":"","utype":1,"ctime":1568088686,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1567935446","product_id":100031801,"comment_content":"老师，请问怎么停止获取桌面与音频呢？我不需要将桌面与音频向外发送的时候总不能继续获取吧？","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466643,"discussion_content":"有 stop 函数呀。在stream中有 track， track 有stop 函数。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568088686,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131254,"user_name":"Joseph","can_delete":false,"product_type":"c1","uid":1430073,"ip_address":"","ucode":"B7F6B88AB90679","user_header":"https://static001.geekbang.org/account/avatar/00/15/d2/39/a7edf2b9.jpg","comment_is_top":false,"comment_ctime":1567681082,"is_pvip":false,"replies":[{"id":"49713","content":"turn服务不是http&#47;https服务,你用浏览器访问它是啥意思呢？","user_name":"作者回复","comment_id":131254,"uid":"1507837","ip_address":"","utype":1,"ctime":1567698335,"user_name_real":"garrylee"}],"discussion_count":2,"race_medal":0,"score":"1567681082","product_id":100031801,"comment_content":"老师，现在我通过trickle-ice网站测试可以relay回地址，但通过通过浏览器访问IP：3478端口，显示访问不到网页，但是p2p通信是可以的。请问是什么问题呢？","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466351,"discussion_content":"turn服务不是http/https服务,你用浏览器访问它是啥意思呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567698335,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1430073,"avatar":"https://static001.geekbang.org/account/avatar/00/15/d2/39/a7edf2b9.jpg","nickname":"Joseph","note":"","ucode":"B7F6B88AB90679","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8949,"discussion_content":"是直接输入ip地址加3478端口，我是搜索其他人的安装教程里面说的。确实也有人能在web端看到页面。https://blog.csdn.net/bvngh3247/article/details/80742396","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568111334,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131244,"user_name":"刘丹","can_delete":false,"product_type":"c1","uid":1081922,"ip_address":"","ucode":"66594D1C957E15","user_header":"https://static001.geekbang.org/account/avatar/00/10/82/42/8b04d489.jpg","comment_is_top":false,"comment_ctime":1567677764,"is_pvip":false,"replies":[{"id":"49711","content":"登录turn应该要用turn配置中设置的用户名和密码了。你要想查房间号，需要自己做一个小的管理系统。","user_name":"作者回复","comment_id":131244,"uid":"1507837","ip_address":"","utype":1,"ctime":1567698269,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1567677764","product_id":100031801,"comment_content":"请问怎样查询房间号码或者名称列表？另外登录turn服务器时，客户端能否用自己的用户名和密码呢？","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466349,"discussion_content":"登录turn应该要用turn配置中设置的用户名和密码了。你要想查房间号，需要自己做一个小的管理系统。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567698269,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}