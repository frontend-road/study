{"id":516198,"title":"22ï½œè®¾è®¡å®æˆ˜ï¼ˆäºŒï¼‰: ä¸€ä¸ªå…¨å‘¨æœŸè‡ªåŠ¨åŒ–æµ‹è¯•Pipelineçš„è®¾è®¡","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æŸ³èƒœã€‚</p><p>è¯´èµ·äº¤ä»˜æµæ°´çº¿ï¼Œä½ å¯èƒ½ç«‹é©¬æƒ³åˆ°çš„æ˜¯Jenkinsæˆ–CloudBeesè¿™äº›å·¥å…·ï¼Œå®ƒä»¬å®ç°äº†ä»Code Buildåˆ°æœ€ç»ˆéƒ¨ç½²åˆ°Productionç¯å¢ƒçš„å…¨è¿‡ç¨‹ã€‚</p><p>ä½†Jenkinsåªæ˜¯å·¥å…·ï¼Œä¸€ä¸ªPipelineåˆ°åº•éœ€è¦å¤šå°‘ä¸ªJobï¼Œæ¯ä¸ªJobéƒ½æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œè¿™äº›é—®é¢˜Jenkinsæ˜¯å›ç­”ä¸äº†çš„ï¼Œéœ€è¦ä½¿ç”¨å·¥å…·çš„å·¥ç¨‹å¸ˆå»æ€è€ƒå»è®¾è®¡ã€‚åœ¨å®è·µä¸­ï¼Œé€šå¸¸æ˜¯DevOpså·¥ç¨‹å¸ˆæ¥åšè¿™ä¸ªè®¾è®¡ã€‚</p><p>æ—¢ç„¶æˆ‘ä»¬å­¦ä¹ äº†å¾®æµ‹è¯•Jobæ¨¡å‹ï¼Œä¹ŸçŸ¥é“äº†å®ƒèƒ½å¸®åŠ©æˆ‘ä»¬å»åšè‡ªåŠ¨åŒ–æµ‹è¯•è®¾è®¡ï¼Œé‚£ç”¨è¿™ä¸ªæ¨¡å‹ï¼Œèƒ½ä¸èƒ½å¸®æˆ‘ä»¬åšPipelineè®¾è®¡å‘¢ï¼Ÿ<strong>å…¶å®ï¼ŒPipelineæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–æµ‹è¯•æ–¹æ¡ˆï¼Œåªä¸è¿‡å®ƒè§£å†³çš„åœºæ™¯æ˜¯æŠŠè½¯ä»¶ä»ä»£ç ç«¯åˆ°ç”Ÿäº§ç«¯çš„è‡ªåŠ¨åŒ–ã€‚</strong></p><p>æŒæ¡è®¾è®¡æ€ç»´æ˜¯æµ‹è¯•å·¥ç¨‹å¸ˆå‘æµ‹è¯•æ¶æ„å¸ˆçš„å¿…ç”±ä¹‹è·¯ï¼Œå‡è®¾ä»Šå¤©ä½ éœ€è¦è®¾è®¡ä¸€ä¸ªPipelineï¼ŒæŠŠä¸€ä¸ªExample Serviceçš„ä»£ç ï¼Œæœ€ç»ˆéƒ¨ç½²æˆä¸ºç”Ÿäº§ç¯å¢ƒçš„ä¸€ä¸ªæœåŠ¡è¿›ç¨‹ã€‚å®Œæˆè¿™ä¸ªå·¥ä½œï¼Œä½ ä¸ä»…èƒ½å¼„æ˜ç™½CICDçš„åŸç†å’Œå®ç°ï¼Œè€Œä¸”å¯¹è‡ªåŠ¨åŒ–æµ‹è¯•Jobæ€ä¹ˆé›†æˆåˆ°CICDï¼Œä¹Ÿå°†äº†å¦‚æŒ‡æŒã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/fc/bd/fc734fc77fcac6773de057d5d7437dbd.jpg?wh=1920x791\" alt=\"å›¾ç‰‡\"></p><h2>Example Serviceçš„Pipelineçš„ç›®æ ‡</h2><p>è¿˜æ˜¯æŒ‰ç…§Jobæ¨¡å‹çš„è®¾è®¡åŸåˆ™ï¼Œå…ˆç†å‡ºPiplelineçš„ç¬¬ä¸€ä¸ªæ ¹Jobã€‚</p><!-- [[[read_end]]] --><p>Pipelineçš„èµ·ç‚¹åœ¨å“ªé‡Œå‘¢ï¼Ÿå¾ˆæ˜¾ç„¶ï¼Œå®ƒä»ä¸€ä¸ªGitLabçš„repoå¼€å§‹ï¼Œå‡†ç¡®æ¥è¯´ï¼Œè¦èƒ½è®¿é—®Example Serviceçš„ä»£ç ã€‚æ€ä¹ˆèƒ½è®¿é—®ä»£ç å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦çŸ¥é“ä¸¤ä¸ªä¿¡æ¯ï¼Œä»£ç ä»“åº“çš„URLåœ°å€å’Œè®¿é—®çš„tokenã€‚</p><p>1.GitLabçš„ä»£ç ä»“åº“åœ°å€ï¼š<a href=\"http://81.70.254.64/yuzi/dockerbase.git\">http://gitlab.example.com/sheng/exampleservice.git</a></p><p>2.è®¿é—®tokenï¼štoken-123456</p><p>Pipelineçš„ç»ˆç‚¹åˆ°å“ªé‡Œå‘¢ï¼Ÿå¾ˆç®€å•ï¼Œæœ€åExample Serviceèƒ½å¤Ÿåœ¨ç”Ÿäº§ç¯å¢ƒè¿è¡Œèµ·æ¥ï¼Œè¿è¡Œèµ·æ¥çš„æ ‡å¿—ï¼Œå°±æ˜¯Example Serviceçš„å·¥ä½œURLï¼š<a href=\"http://prod.example.com\">http://prod.example.com</a></p><p><img src=\"https://static001.geekbang.org/resource/image/c0/09/c05f9271d3a8dc72d8e16628d5690f09.jpg?wh=1920x791\" alt=\"å›¾ç‰‡\"></p><h2>åˆ’åˆ†Pipelineçš„é˜¶æ®µ</h2><p>è¿™ä¸ªä»ä»£ç è½¬æˆç”Ÿäº§ç¯å¢ƒæœåŠ¡çš„è¿‡ç¨‹ï¼Œè‡³å°‘è¦å®Œæˆä¸¤æ¬¡è½¬æ¢ã€‚</p><p>ç¬¬ä¸€æ¬¡è½¬æ¢æ˜¯<strong>æŠŠä»£ç è½¬æˆå¯éƒ¨ç½²åŒ…</strong>ï¼Œç¬¬äºŒæ¬¡æ˜¯<strong>æŠŠå¯éƒ¨ç½²åŒ…è½¬æ¢æˆè¿è¡Œæ€æœåŠ¡</strong>ã€‚ä¸ºäº†æŠŠå¥½éªŒè¯å…³çš„å¤§é—¨ï¼Œæˆ‘ä»¬è¿˜è¦åœ¨è¿™ä¸¤æ¬¡è½¬æ¢ä¸­é—´å†åŠ å…¥ä¸€ä¸ªæµ‹è¯•ä»»åŠ¡ï¼Œé‚£ä¹ˆPipelineå°±å¯ä»¥åˆ†è§£æˆ3ä¸ªå­Jobï¼Œåˆ†åˆ«æ˜¯å¼€å‘Jobã€æµ‹è¯•Jobã€éƒ¨ç½²Jobï¼Œå®ƒä»¬ä¾æ¬¡å®Œæˆï¼Œå…¨éƒ¨è¿è¡Œé€šè¿‡ï¼Œæœ€åæ‰èƒ½éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/a6/bb/a698bd4c9cbe0912fe9f970c4de5fabb.jpg?wh=1920x791\" alt=\"å›¾ç‰‡\"></p><p>è¿™ä¸‰ä¸ªJobï¼Œæˆ‘ä»¬ä¾æ¬¡æ¥çœ‹ä¸€ä¸‹å®ƒä»¬éƒ½éœ€è¦å¹²ä»€ä¹ˆæ´»ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹DevJobã€‚å¼€å‘é˜¶æ®µæµ‹è¯•Jobï¼Œä½œä¸ºæ•´ä¸ªPiplelineçš„åˆå§‹Jobï¼ŒPipelineçš„Inputå°±æ˜¯DevJobçš„Inputã€‚</p><p>1.GitLabçš„ä»£ç ä»“åº“åœ°å€ï¼š<a href=\"http://81.70.254.64/yuzi/dockerbase.git\">http://gitlab.example.com/sheng/exampleservice.git</a><br>\n2.è®¿é—®tokenï¼š token-123456</p><p>DevJobè¦åšä»€ä¹ˆå‘¢ï¼Ÿå®ƒå‰é¢è¿æ¥äº†ä»£ç åº“ï¼Œåé¢è¦å¯¹æ¥é›†æˆæµ‹è¯•ï¼Œå®ƒçš„ä¸»è¦èŒè´£å°±æ˜¯æŠŠä»£ç å˜æˆå¯éƒ¨ç½²çš„Packageã€‚</p><p>Inputæœ‰äº†ï¼ŒDevJobè¦è¾“å‡ºä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬è¦çŸ¥é“ï¼ŒDevJobçš„è¾“å‡ºä¼šä½œä¸ºä¸‹ä¸€é˜¶æ®µJobçš„è¾“å…¥ï¼Œè®¾è®¡DevJobçš„è¾“å‡ºå°±è·Ÿæ¥å£è®¾è®¡ä¸€æ ·ï¼Œä¸åŒçš„æ¥å£éƒ½èƒ½è®©ç³»ç»Ÿå·¥ä½œï¼Œä½†æˆ‘ä»¬è¦é€‰æ‹©æœ€åˆé€‚é‚£ä¸€ç§ã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è®©DevJobè¾“å‡ºä¸€ä¸ªExample Packageçš„ä»“åº“åœ°å€ï¼Œä»£è¡¨Packageå·²ç»æ‰“å¥½äº†ï¼Œå¹¶ä¸Šä¼ åˆ°äº†ä»“åº“ï¼Œæˆ–è€…æˆ‘ä»¬è¾“å‡ºå•å…ƒæµ‹è¯•æŠ¥å‘Šï¼›ç”šè‡³ï¼ŒDevJobä¹Ÿå¯ä»¥ä»€ä¹ˆéƒ½ä¸è¾“å‡ºï¼Œè®©ä¸‹ä¸€ä¸ªTestJobè‡ªå·±å»æŒ‰ç…§åŒæ–¹çº¦å®šå¥½çš„FtpæœåŠ¡å™¨ä¸Šå»å–åŒ…ã€‚</p><p>å“ªç§æ–¹æ¡ˆæ›´åˆé€‚å‘¢ï¼Ÿ</p><p>è¿™é‡Œä½ è¦è€ƒè™‘ä¸¤ç‚¹ï¼šç¬¬ä¸€ï¼Œæˆ‘çš„è¾“å‡ºåˆ«äººæ˜¯å¦ç”¨å¾—åˆ°ï¼Ÿåƒå•å…ƒæµ‹è¯•æŠ¥å‘Šè¿™ç§ä¿¡æ¯ï¼Œæ˜¯æˆ‘DevJobå†…éƒ¨çš„å·¥ä½œäº§ç‰©ï¼Œåˆ«äººä¸ä¼šæ„Ÿå…´è¶£ã€‚æŒ‰ç…§é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™ï¼Œè¿™äº›ç»†èŠ‚åº”è¯¥éšè—åœ¨DevJobå†…ï¼Œä¸å‘å¤–å…¬å¸ƒã€‚</p><p>ç¬¬äºŒï¼Œæˆ‘çš„è¾“å‡ºæ˜¯ä¸æ˜¯ä¿¡æ¯æ˜¾å¼è€Œå……åˆ†çš„ï¼Ÿåƒå¤šä¸ªJobéƒ½éµå¾ªä¸€ä¸ªçº¦å®šï¼Œå»æŒ‡å®šçš„FTPæœåŠ¡å™¨ä¸Šå»å–æ”¾Packageï¼Œè¿™ä¸ªä¿¡æ¯äº¤äº’å°±æ˜¯éšå¼çš„ï¼Œæ²¡æœ‰åœ¨æ¥å£ä¸Šä½“ç°å‡ºæ¥ã€‚è¿™æ ·æ˜¯æœ‰éšæ‚£çš„ï¼Œå¦‚æœä¹‹åå„ä¸ªJobå˜æ›´é‡æ„çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºé—®é¢˜ã€‚</p><p>æ ¹æ®è¿™ä¸ªåŸåˆ™ï¼Œæˆ‘ä»¬è®©DevJobè¾“å‡ºä¸€ä¸ªExample Packageçš„ä»“åº“åœ°å€</p><p>DevPackageURL: <a href=\"http://nexus.exmaple.com/content/repositories/exampleservice.jar\">http://nexus.exmaple.com/content/repositories/exampleservice_1.0.1.jar</a></p><p>å¦‚æœDevJobè¾“å‡ºäº†è¿™ä¸ªURLï¼Œå°±ä»£è¡¨DevJobå·²ç»è¿è¡Œé€šè¿‡ï¼ŒæŠŠä»£ç å˜æˆäº†Packageï¼Œè€Œä¸”æŠŠPackageæ”¾åˆ°äº†ç»„ä»¶ç®¡ç†å¹³å°Nexusä¸Šå»ï¼Œåˆ«äººå°±å¯ä»¥ç”¨äº†ã€‚</p><p>ä½ å¯èƒ½ä¼šé—®ï¼Œæ‹¿åˆ°äº†Package URLè¿˜éœ€è¦Nexusçš„ç”¨æˆ·åå¯†ç æ‰èƒ½è®¿é—®ã€‚é‚£ä¸‹ä¸€ä¸ªJobä»å“ªé‡Œè·çŸ¥ç”¨æˆ·åå’Œå¯†ç å‘¢ï¼Ÿè¿™æ—¶ï¼Œå°±å¯ä»¥ç”¨åˆ°æˆ‘ä»¬Jobæµ‹è¯•æ¨¡å‹çš„TestConfigå±æ€§äº†ã€‚ç›´æ¥æŠŠç”¨æˆ·åã€å¯†ç æ”¾åœ¨TestConfigå°±å¯ä»¥äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/d1/82/d170896468d28932a5eb07745fe79482.jpg?wh=1920x755\" alt=\"å›¾ç‰‡\"></p><p>åŒæ ·çš„æ€è·¯ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½æ•´ç†å‡ºTestJobçš„Inputæ˜¯DevPackageUrlï¼ŒOutputæ˜¯ReleasePackageUrlï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/22/b4/22ca2574e08a1622293e08bcfdc250b4.jpg?wh=1920x755\" alt=\"å›¾ç‰‡\"></p><p>DeployJobçš„Inputæ˜¯ReleasePackageUrlï¼Œä½œä¸ºPipelineæœ€æœ«ä¸€ä¸ªJobï¼ŒPipelineçš„è¾“å‡ºå°±æ˜¯DeployJobçš„è¾“å‡ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/85/b2/850eac96f93e65yy59d0124cac813db2.jpg?wh=1920x755\" alt=\"å›¾ç‰‡\"></p><p>æ¨æ¼”åˆ°ç°åœ¨ï¼Œæ•´ä¸ªJobæ ‘å°±æˆäº†åé¢è¿™æ ·ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/d0/35/d08104f939e9ff47096974d761395935.jpg?wh=1920x713\" alt=\"å›¾ç‰‡\"></p><p>æˆ‘ä»¬æŠŠPipelineæ‹†åˆ†æˆDevã€Testå’ŒDeployä¸‰ä¸ªJobåï¼Œå°±å¯ä»¥æŠŠå®ƒä»¬åˆ†åˆ«æŒ‡æ´¾ç»™å¼€å‘äººå‘˜ã€æµ‹è¯•äººå‘˜ã€è¿ç»´äººå‘˜ï¼Œç”±ä»–ä»¬æ¥æ¨è¿›ä¸‹ä¸€é˜¶æ®µçš„è®¾è®¡äº†ã€‚è‡³æ­¤ï¼Œæ¦‚è¦è®¾è®¡å‘Šä¸€æ®µè½ã€‚</p><h2>å„é˜¶æ®µJobçš„è¯¦ç»†è®¾è®¡</h2><p>æˆ‘ä»¬åœ¨ä¸Šé¢çš„è®¾è®¡ä¸­è§„åˆ’äº†3ä¸ªé˜¶æ®µï¼Œæ˜ç¡®äº†ä½œä¸ºPipeline jobçš„ç¬¬ä¸€çº§å­Jobï¼šDevJobã€TestJobã€DeployJobã€‚ä½†æ¯ä¸ªé˜¶æ®µè¦åšä»€ä¹ˆå…·ä½“ä»»åŠ¡ï¼Œè¿˜éœ€è¦è¿›ä¸€æ­¥è¯¦ç»†è®¾è®¡ã€‚</p><h3>DevJob</h3><p>æˆ‘ä»¬å…ˆçœ‹DevJobï¼Œå®ƒçš„Outputæ˜¯ä¸€ä¸ªå¯æ‰§è¡ŒåŒ…ã€‚</p><p>æ€ä¹ˆå®Œæˆä»ä»£ç åˆ°å¯æ‰§è¡ŒåŒ…çš„è½¬æ¢å‘¢ï¼Ÿå½“ç„¶è¦è¿›è¡Œæ„å»ºï¼Œä¹Ÿå°±æ˜¯Buildã€‚</p><p>BuildJobçš„æ¨¡å‹å¾ˆå®¹æ˜“æ¢³ç†ï¼Œå®ƒçš„Inputæ˜¯codeRepoUrlï¼Œè€ŒOutputæ˜¯DevPackageUrlã€‚BuildJobä»ä»£ç åº“é‡ŒæŠ“å–ä»£ç ï¼Œæ„å»ºï¼Œç„¶åæ‰“åŒ…ç”ŸæˆPackageï¼Œä¸Šä¼ åˆ°å¯¹è±¡ä»“åº“ï¼Œå°±å®Œæˆäº†ã€‚</p><p>ä½†buildé€šè¿‡äº†åï¼Œæ˜¯ä¸æ˜¯å¯ä»¥ç›´æ¥äº§ç”ŸDevPackageå‘¢ï¼Ÿè¿™é‡Œæˆ‘åˆ†äº«ä¸€ä¸ªâ€œä¿é™©â€æªæ–½ï¼Œä¸ºäº†ä¿è¯è´¨é‡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨buildä¹‹åï¼ŒåŠ ä¸Šä¸€ä¸ªæµ‹è¯•ä»»åŠ¡ï¼Œä¹Ÿå°±æ˜¯å•å…ƒæµ‹è¯•UnitTestJobã€‚å•å…ƒæµ‹è¯•é€šè¿‡ä¹‹åï¼Œå†è¾“å‡ºDevPackageã€‚</p><p>UnitTestJobå°±æ˜¯è¿è¡Œå•å…ƒæµ‹è¯•ï¼Œå•å…ƒæµ‹è¯•æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œå°±æ˜¯UnitTestJobçš„ç»“æœã€‚æ‰€ä»¥ï¼ŒUnitTestJobçš„Jobæ¨¡å‹é‡Œï¼Œåªè®¾ç½®ä¸€ä¸ªDependencyå°±å¥½äº†ï¼ŒæŒ‡å‘BuildJobã€‚BuildJobæˆåŠŸä¹‹åï¼Œæ‰èƒ½è¿è¡ŒUnitTestJobã€‚è¿™é‡Œçš„UnitTestJobï¼Œæˆ‘ä»¬é€‰ç”¨Junitå¼€å‘æ¡†æ¶å°±èƒ½å®ç°ã€‚</p><p>ç°åœ¨DevJobè¢«ç»†åˆ†æˆäº†ä¸¤ä¸ªå­Jobï¼šBuildJobå’ŒUnitTestJobã€‚</p><p>æŒ‰ç…§Jobæ¨¡å‹çš„è§„åˆ™ï¼Œå­Jobéƒ½è¿è¡ŒæˆåŠŸï¼Œçˆ¶Jobæ‰èƒ½æˆåŠŸã€‚æ‰€ä»¥ï¼ŒBuildJobå’ŒUnitTestJobè¿è¡ŒæˆåŠŸï¼ŒDevJobæ‰ç®—æˆåŠŸï¼Œè€ŒDevJobæˆåŠŸäº†ï¼Œåé¢çš„TestJobæ‰èƒ½è§¦å‘è¿è¡Œã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/26/cd/26d9e9dd80fbc153542b8553b28874cd.jpg?wh=1920x1038\" alt=\"å›¾ç‰‡\"></p><h3>TestJob</h3><p>ç»è¿‡ç¬¬äºŒæ¨¡å—é‡Œç­–ç•¥ç¯‡çš„å­¦ä¹ ï¼Œæˆ‘ä»¬çŸ¥é“äº†æµ‹è¯•çš„ç­–ç•¥æœ‰å•å…ƒæµ‹è¯•ã€æ¥å£æµ‹è¯•å’Œç³»ç»Ÿæµ‹è¯•ã€‚å•å…ƒæµ‹è¯•ä¸€èˆ¬æ˜¯å¼€å‘äººå‘˜æ¥åšï¼Œå·²ç»åŒ…å«åœ¨DevJobé‡Œäº†ã€‚è€Œæ¥å£æµ‹è¯•å’Œç³»ç»Ÿæµ‹è¯•ï¼Œå°±éœ€è¦æ”¾åœ¨TestJobé‡Œã€‚</p><p>å…ˆæ¥çœ‹APITestJobçš„æ¨¡å‹ã€‚APITestJobä½œä¸ºTestJobçš„ç¬¬ä¸€ä¸ªå­Jobï¼ŒAPITestJobçš„Inputå°±æ˜¯å®ƒçš„çˆ¶Job TestJobçš„Inputï¼Œä¹Ÿå°±æ˜¯DevPackageUrlã€‚æœ‰äº†è¿™ä¸ªä¿¡æ¯ï¼ŒAPITestJobå°±å¯ä»¥å¼€å‘å®ç°äº†ï¼Œå®ƒçš„è‡ªåŠ¨åŒ–å·¥å…·å¯ä»¥é€‰ç”¨RestAssureã€‚</p><p>ç„¶åæ˜¯E2ETestJobçš„æ¨¡å‹ï¼Œå®ƒçš„Dependencyæ˜¯APITestJobï¼Œè€ŒOutputæ˜¯ReleasePackageUrlã€‚è‡³äºE2ETestJobçš„è‡ªåŠ¨åŒ–æŠ€æœ¯ï¼Œæˆ‘ä»¬å¯ä»¥é€‰ç”¨Seleniumã€‚</p><p>ç°åœ¨ï¼Œå¯ä»¥æŠŠTestJobåˆ†è§£æˆäº†2ä¸ªå­Jobï¼ŒAPTestJobå’ŒE2ETestJobï¼ŒJobæ ‘å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/de/89/dede1f23e6df7yyfb231e2b5b2702f89.jpg?wh=1920x1038\" alt=\"å›¾ç‰‡\"></p><h3>DeploymentJob</h3><p>åˆä¸‹ä¸€åŸï¼Œå’±ä»¬ä¸€é¼“ä½œæ°”ï¼Œç»§ç»­æ¥çœ‹DeploymentJobã€‚</p><p>å½“Pipelineç§»åŠ¨åˆ°DeploymentJobçš„æ—¶å€™ï¼Œå®ƒä¼šæ£€æŸ¥å‰ç½®ä¾èµ–TestJobçš„çŠ¶æ€ï¼Œåªæœ‰æˆåŠŸäº†ï¼ŒDeploymentJobæ‰ä¼šè¿è¡Œã€‚åœ¨è¿è¡Œçš„æ—¶å€™ï¼ŒDeploymentJobä¼šä»Inputè·å¾—ä¸€ä¸ªReleasePackageUrlï¼Œç„¶åç»è¿‡ä¸€ç³»åˆ—éƒ¨ç½²æ“ä½œï¼ŒæŠŠPackageéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒé‡Œå¼€å§‹è¿è¡Œï¼Œè¾“å‡ºä¸€ä¸ªserviceUrlã€‚</p><p>ä¸ºäº†å®Œæˆè¿™ä¸ªè¿‡ç¨‹ï¼Œç®€å•çš„åšæ³•æ˜¯ï¼ŒDeploymentJobä¸éœ€è¦å†ç»†åˆ†å­Jobï¼Œä½ å¯ä»¥ç›´æ¥æŠŠå®ƒå½“ä½œä¸€ä¸ªå¯æ‰§è¡ŒJobï¼Œç”¨éƒ¨ç½²è„šæœ¬æ¥å®ç°ã€‚</p><h2>è½¬æˆè‡ªåŠ¨åŒ–æµ‹è¯•å¼€å‘è®¡åˆ’</h2><p>æå®šä¸Šé¢çš„è®¾è®¡åï¼Œç°åœ¨Jobæ ‘å˜æˆäº†è¿™æ ·ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/51/8b/51a0de00fc0c6e5e8e76e98a3b1b528b.jpg?wh=1920x1087\" alt=\"å›¾ç‰‡\"></p><p>ç°åœ¨æ¯ä¸€ä¸ªå¶å­ç»“ç‚¹ï¼Œå°±æ˜¯å¯æ‰§è¡Œçš„Jobï¼Œéœ€è¦è‡ªåŠ¨åŒ–å®ç°ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/74/78/741517d2175c0ee8a4e648e811638e78.jpg?wh=1920x693\" alt=\"å›¾ç‰‡\"></p><h2>å˜æ›´å’Œæ‰©å±•</h2><p>åœ¨Pipelineæ­å»ºèµ·æ¥åï¼Œæˆ‘ä»¬è¿˜è¦æŒç»­ç»´æŠ¤ã€‚è¿™é‡Œæœ‰ä¸¤ç§æƒ…å½¢ï¼Œä¸€ç§æ˜¯æ–°å¢Jobï¼Œè¿˜æœ‰ä¸€ç§æ˜¯æ‰©å±•Jobã€‚</p><p>å…ˆçœ‹æ–°å¢Jobçš„åœºæ™¯ï¼Œæˆ‘ç»™ä½ ä¸¾ä¸ªä¾‹å­ã€‚æ¯”å¦‚å¼€å‘äººå‘˜æœ‰ä¸€å¤©è¦å¼•å…¥Sonarï¼Œåšä»£ç è´¨é‡æ£€æµ‹ï¼Œé‚£æˆ‘ä»¬è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p><p>åŠ¨æ‰‹å‰ï¼Œæˆ‘ä»¬è¿˜æ˜¯å…ˆåˆ†æä¸€ä¸‹ã€‚Sonaræ‰«æï¼Œä¹Ÿæ˜¯åŸºäºä»£ç CodeRepoUrlï¼Œè¿™ä¸ªå’ŒDevJobçš„Inputä¸€è‡´ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å»ºç«‹ä¸€ä¸ªSonarJobï¼Œä½œä¸ºDevJobçš„å­Jobï¼Œå¯ä»¥å¤ç”¨DevJobçš„Inputã€‚</p><p>é‚£SonarJobå’ŒBuildJobï¼Œè¿˜æœ‰UnitTestJobæ˜¯ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿè¿™å°±çœ‹æˆ‘ä»¬æƒ³æ€ä¹ˆå®šä¹‰å®ƒä»¬çš„ä¾èµ–å…³ç³»äº†ã€‚ä¹Ÿå°±æ˜¯è°åœ¨å‰ç«¯ï¼Œè°åœ¨æœ«ç«¯ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œä»£ç æ‰«æï¼Œåº”è¯¥å‘ç”Ÿåœ¨ä»£ç å˜æ›´çš„æœ€æ—©æ—¶åˆ»ã€‚ä¸€æ—¦æœ‰ä»£ç æäº¤ï¼Œå°±é¦–å…ˆæ£€æŸ¥ä»£ç çš„è´¨é‡ï¼Œå¦‚æœä»£ç è´¨é‡ä¸ç¬¦åˆé¢„å®šæ ‡å‡†ï¼Œå°±ç»ˆæ­¢Pipelineã€‚å®è·µé‡Œè¿™æ ·é€‰æ‹©ï¼Œæ˜¯ä¸ºäº†ä¼˜å…ˆä¿è¯ä»£ç çš„è´¨é‡ã€‚</p><p>åŸºäºè¿™æ ·çš„ç›®æ ‡ï¼Œæˆ‘ä»¬å°±æŠŠSonarJobæ·»åŠ åˆ°DevJobä¸‹çš„ç¬¬ä¸€ä¸ªå­Jobï¼Œè®©BuildJobä¾èµ–SonarJobï¼Œè€ŒUnitTestJobä¿æŒä¸å˜ï¼Œè¿˜æ˜¯ä¾èµ–BuildJobã€‚</p><p>å¦å¤–è¿˜æœ‰ä¸€ç§æƒ…å½¢ï¼Œå°±æ˜¯æŸä¸€ä¸ªJobå½“æ—¶è®¾è®¡å®ç°æ¯”è¾ƒç®€å•ï¼Œåæ¥éœ€è¦æ‰©å±•ã€‚æ¯”å¦‚DeploymentJobï¼Œåˆšå¼€å§‹æˆ‘ä»¬ç”¨ä¸€æ®µShellè„šæœ¬å°±å¯ä»¥è½»æ¾æ‰§è¡Œå®ƒã€‚ä½†éšç€Deploymentè¦æ±‚æé«˜ï¼Œæˆ‘ä»¬éœ€è¦åœ¨Deploymentç»“æŸåï¼Œè¿˜è¦æ‰§è¡Œæµ‹è¯•ä»»åŠ¡ï¼ŒéªŒè¯è´¨é‡ï¼Œç„¶åå†å‘å¸ƒserviceUrlã€‚é¢å¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆåŠï¼Ÿ</p><p>å…¶å®è¿™ä¸ªåœºæ™¯ï¼Œå°±è·Ÿå¼€å‘ä¸€æ ·ï¼Œä¸€æ—¦ä»£ç è§„æ¨¡æ‰©å¤§äº†ï¼Œå°±éœ€è¦åˆ†æ‹†æ¨¡å—äº†ã€‚</p><p>åœ¨æˆ‘ä»¬çš„Jobæ ‘é‡Œï¼ŒåŸå…ˆçš„DeploymentJobéœ€è¦åˆ†æ‹†äº†ï¼Œæ‹†åˆ†æˆExecuteDeploymentå’ŒTestDeploymentï¼Œè®©TestDeploymentä¾èµ–äºExecuteDeploymentã€‚ä¹‹å‰çš„DeploymentJobå˜æˆä¸€ä¸ªæŠ½è±¡Jobï¼Œå®ƒçš„è„šæœ¬å®ç°æŒªåˆ°ExecuteDeploymentJobé‡Œï¼Œåœ¨æ–°TestDeploymenté‡Œï¼ŒåŠ ä¸Šæµ‹è¯•ä»»åŠ¡å³å¯ã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/8b/96/8bc413d8d91f669927efde462fc77d96.jpg?wh=1920x1268\" alt=\"å›¾ç‰‡\"></p><h2>å°ç»“</h2><p>ä¸ºäº†æ£€éªŒå’±ä»¬çš„Jobæ¨¡å‹å¨åŠ›å‡ ä½•ï¼Œä»Šå¤©æˆ‘ä»¬å†æ¬¡é”»ç‚¼è®¾è®¡æ€ç»´ï¼Œè¿›è¡Œäº†éƒ¨ç½²Pipelineçš„è®¾è®¡ã€‚ç»è¿‡æ¡ˆä¾‹æ¼”ç»ƒï¼Œä½ ç°åœ¨æ˜¯ä¸æ˜¯å¯¹Jobæ¨¡å‹æ›´åŠ ç†Ÿæ‚‰äº†å‘¢ï¼Ÿ</p><p>å’±ä»¬å›é¡¾ä¸€ä¸‹å…³é”®æµç¨‹ã€‚æ¦‚è¦è®¾è®¡é‡Œï¼Œæˆ‘ä»¬å®Œæˆäº†æŠ½è±¡Jobçš„å®šä¹‰ï¼Œå¯¹åº”ç€Pipelineåˆ’åˆ†çš„ä¸‰å¤§é˜¶æ®µï¼šå¼€å‘é˜¶æ®µã€æµ‹è¯•é˜¶æ®µå’Œéƒ¨ç½²é˜¶æ®µï¼Œç„¶åé€å±‚ç»†åŒ–ï¼Œä¸€ç›´åˆ°å®ä¾‹Jobã€‚è€Œåœ¨è¯¦ç»†è®¾è®¡é‡Œï¼Œæˆ‘ä»¬ä¸ä»…è¦ç¡®å®šå®ä¾‹Jobçš„æ¥å£ï¼Œè€Œä¸”è¿˜è¦ç¡®å®šå®ƒä»¬çš„è‡ªåŠ¨åŒ–æµ‹è¯•å®ç°æŠ€æœ¯ã€‚</p><p>åšå®Œè®¾è®¡ï¼Œæ¯ä¸€ä¸ªå¶å­èŠ‚ç‚¹çš„Jobéƒ½æ˜¯è¦å»å¼€å‘å®ç°çš„è‡ªåŠ¨åŒ–æµ‹è¯•ä»»åŠ¡ã€‚æˆ‘ä»¬å°±å¯ä»¥æ•´ç†å‡ºä¸€ä¸ªè‡ªåŠ¨åŒ–æµ‹è¯•å¼€å‘ä»»åŠ¡åˆ—è¡¨äº†ã€‚</p><p>åé¢æ˜¯Jobæ ‘å¶å­å·¥ä½œè¡¨ï¼Œä¾›ä½ å¤ä¹ å›é¡¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/74/78/741517d2175c0ee8a4e648e811638e78.jpg?wh=1920x693\" alt=\"å›¾ç‰‡\"></p><p>ä¸€ä¸ªä¼˜ç§€æ¨¡å‹ï¼Œä¸å…‰ç€çœ¼äºçœ¼å‰çš„éœ€æ±‚ï¼Œè¿˜å…·å¤‡åº”å¯¹æœªæ¥å˜åŒ–çš„èƒ½åŠ›ã€‚é™¤äº†æ¦‚è¦è®¾è®¡å’Œè¯¦ç»†è®¾è®¡ï¼Œæˆ‘ä»¬è¿˜æ¨æ¼”äº†æœªæ¥çš„åº”å˜ç­–ç•¥ã€‚</p><p>å½“è§„æ¨¡æ‰©å¤§æ—¶ï¼ŒåŸå…ˆçš„å¯æ‰§è¡ŒJobçš„é€»è¾‘å˜å¾—å¤æ‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥æ ¹æ®Jobæ¨¡å‹ï¼ŒæŠŠå¯æ‰§è¡ŒJobå†è¿›è¡Œåˆ†è§£æˆå¤šä¸ªå­Jobã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬éµå¾ªçš„åŸåˆ™æ˜¯åªæœ‰å¶å­ç»“ç‚¹Jobæ‰æ˜¯å¯æ‰§è¡ŒJobï¼Œä¸å†è¿›è¡Œåˆ†è§£çš„Jobï¼Œè€Œä¸€æ—¦Jobä¸‹æŒ‚äº†å­Jobï¼Œé‚£è¿™ä¸ªJobå°±å˜æˆäº†æŠ½è±¡Jobï¼Œåªè´Ÿè´£æ¥å£çš„å®šä¹‰ã€‚</p><p>ä»Šå¤©è®²äº†Pipelineè®¾è®¡ï¼Œä¹Ÿæ˜¯å¯¹å‰é¢Jobè®¾è®¡å†…å®¹çš„å¤ä¹ å·©å›ºã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±è¦è¿›é˜¶åˆ°å¦å¤–ä¸€ä¸ªéš¾åº¦çº§åˆ«çš„è®¾è®¡äº†ï¼Œä¸ä»…æœ‰å¤šç«¯åä½œï¼Œè¿˜æœ‰åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œè¿™ç§åœºæ™¯æ€ä¹ˆè®¾è®¡ï¼Ÿæˆ‘ä»¬ä¸‹è®²è§ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>ä½ è´Ÿè´£æˆ–è€…å‚ä¸çš„PipelineåŸå…ˆæ˜¯æ€ä¹ˆè®¾è®¡çš„ï¼Ÿçœ‹å®Œè¿™ä¸€è®²ï¼Œä½ æƒ³åˆ°æ€ä¹ˆä¼˜åŒ–å®ƒäº†ä¹ˆï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºè·Ÿæˆ‘äº¤æµäº’åŠ¨ã€‚å¦‚æœè§‰å¾—è¿™ä¸€è®²å¯¹ä½ æœ‰å¯å‘ï¼Œä¹Ÿæ¨èä½ æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šæœ‹å‹ã€åŒäº‹ã€‚</p>","comments":[{"had_liked":false,"id":354313,"user_name":"Rachel","can_delete":false,"product_type":"c1","uid":1165799,"ip_address":"æ—¥æœ¬","ucode":"B413D50328A268","user_header":"https://static001.geekbang.org/account/avatar/00/11/c9/e7/25f01030.jpg","comment_is_top":false,"comment_ctime":1660276299,"is_pvip":false,"replies":[{"id":"129758","content":"æ˜¯çš„ã€‚é€šè¿‡Jobæ¨¡å‹æ¥æ¢³ç†Pipelineã€‚å®é™…ä¸ŠJobæ¨¡å‹æ˜¯å¯ä»¥æ›¿ä»£jenkinsï¼Œcloudbeeçš„ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1877634","ctime":1662304762,"ip_address":"æ—¥æœ¬","comment_id":354313,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1660276299","product_id":100109201,"comment_content":"ä¸ºå•¥æˆ‘æ„Ÿè§‰è€å¸ˆè¯´çš„è¿™ä¸ªjobæ¨¡å¼çš„piplineå’Œæˆ‘ä»¬å®é™…å®æ–½çš„æŒç»­äº¤ä»˜çš„piplineä¸€æ ·å‘¢ï¼Ÿä½†æ˜¯ç†è®ºå¥½åƒæœ‰å·®åˆ«ï¼Œæ²¡å¤ªåˆ†è¾¨æ¸…æ¥šä»–ä»¬çš„å…³ç³»","like_count":0,"discussions":[{"author":{"id":1877634,"avatar":"","nickname":"sunshinelius","note":"","ucode":"50F35834586E4A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586540,"discussion_content":"æ˜¯çš„ã€‚é€šè¿‡Jobæ¨¡å‹æ¥æ¢³ç†Pipelineã€‚å®é™…ä¸ŠJobæ¨¡å‹æ˜¯å¯ä»¥æ›¿ä»£jenkinsï¼Œcloudbeeçš„ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662304762,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ—¥æœ¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353421,"user_name":"ç¾Šç¾Š","can_delete":false,"product_type":"c1","uid":1162597,"ip_address":"æ—¥æœ¬","ucode":"B220CE8D1CA5DA","user_header":"https://static001.geekbang.org/account/avatar/00/11/bd/65/fbdf4fc1.jpg","comment_is_top":false,"comment_ctime":1659429577,"is_pvip":false,"replies":[{"id":"129752","content":"â€œä¸‹æµjobâ€åº”è¯¥æ˜¯â€œä¸‹æ¸¸jobâ€ï¼Œæ˜¯å§ğŸ˜„<br>å¢å¼ºautomationå¥å£®æ€§çš„ä¸€èˆ¬æ€§åŠæ³•æœ‰<br>1.   åŠ å…¥re runæœºåˆ¶ï¼Œè¿™ä¸ªä½ å¯ä»¥å‚è€ƒjdbc connectionçš„æœºåˆ¶ã€‚ä¸€æ¬¡å‡ºé”™æ²¡å…³ç³»ï¼Œå¯ä»¥retryå¤šæ¬¡ï¼Œç›´åˆ°è¶…è¿‡max number<br>2.  åˆ†æå¸¸è§é”™è¯¯åŸå› ï¼Œè°ƒæ•´å‚æ•°ã€‚æ¯”å¦‚å®ä¾‹æ¯”è¾ƒæ…¢ï¼Œå¯ä»¥è°ƒå¤§time outã€‚å¦‚æœæ˜¯æµ‹è¯•è´¦å·å¤±æ•ˆï¼Œå¯ä»¥run timeåˆ›å»ºæµ‹è¯•è´¦å·ã€‚<br><br>å¦‚æœç¡®å®æ˜¯é—´æ­‡æ€§å¤±è´¥ã€‚ã€‚ã€‚ã€‚ã€‚é‚£å°±æäº¤bugï¼Œè®©å¼€å‘äººå‘˜ä¿®æ”¹å§ã€‚ğŸ˜‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1877634","ctime":1662303623,"ip_address":"æ—¥æœ¬","comment_id":353421,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1659429577","product_id":100109201,"comment_content":"ä»¥å‰å…¬å¸çš„CIæµæ°´çº¿æ˜¯3ä¸ªå›¢é˜Ÿå…±åŒå®Œæˆçš„ï¼Œæ¯ä¸ªå›¢é˜Ÿè´Ÿè´£ä¸€ä¸ªå¤§çš„Jobï¼Œæ¯ä¸ªJobé€šè¿‡rest apiæ¥é€šä¿¡ã€‚ä¸€ä¸ªJobå®Œæˆä¹‹åï¼Œä¼šé€šè¿‡rest apiå‘é€ä¸‹ä¸€ä¸ªjobéœ€è¦çš„ä¿¡æ¯ï¼Œæ¥æ¿€æ´»ä¸‹æµjobã€‚ä½†æ˜¯å®è·µä¸­ï¼Œæ€»æ˜¯ä¼šé‡åˆ°å„ç§é—®é¢˜ï¼Œä½¿pipelineä¸­æ–­ï¼Œå¸Œæœ›è€å¸ˆèƒ½åˆ†äº«ä¸€äº›ï¼Œèƒ½è®©pipelineæ›´åŠ ç¨³å®šçš„ç»éªŒã€‚","like_count":0,"discussions":[{"author":{"id":1877634,"avatar":"","nickname":"sunshinelius","note":"","ucode":"50F35834586E4A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586529,"discussion_content":"â€œä¸‹æµjobâ€åº”è¯¥æ˜¯â€œä¸‹æ¸¸jobâ€ï¼Œæ˜¯å§ğŸ˜„\nå¢å¼ºautomationå¥å£®æ€§çš„ä¸€èˆ¬æ€§åŠæ³•æœ‰\n1.   åŠ å…¥re runæœºåˆ¶ï¼Œè¿™ä¸ªä½ å¯ä»¥å‚è€ƒjdbc connectionçš„æœºåˆ¶ã€‚ä¸€æ¬¡å‡ºé”™æ²¡å…³ç³»ï¼Œå¯ä»¥retryå¤šæ¬¡ï¼Œç›´åˆ°è¶…è¿‡max number\n2.  åˆ†æå¸¸è§é”™è¯¯åŸå› ï¼Œè°ƒæ•´å‚æ•°ã€‚æ¯”å¦‚å®ä¾‹æ¯”è¾ƒæ…¢ï¼Œå¯ä»¥è°ƒå¤§time outã€‚å¦‚æœæ˜¯æµ‹è¯•è´¦å·å¤±æ•ˆï¼Œå¯ä»¥run timeåˆ›å»ºæµ‹è¯•è´¦å·ã€‚\n\nå¦‚æœç¡®å®æ˜¯é—´æ­‡æ€§å¤±è´¥ã€‚ã€‚ã€‚ã€‚ã€‚é‚£å°±æäº¤bugï¼Œè®©å¼€å‘äººå‘˜ä¿®æ”¹å§ã€‚ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662303623,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ—¥æœ¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352704,"user_name":"å­™ä¸­åŸ","can_delete":false,"product_type":"c1","uid":1316674,"ip_address":"æ—¥æœ¬","ucode":"76667FE517D41D","user_header":"https://static001.geekbang.org/account/avatar/00/14/17/42/238dd211.jpg","comment_is_top":false,"comment_ctime":1658891314,"is_pvip":true,"replies":[{"id":"128645","content":"jobæ ‘æ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•è®¾è®¡çš„ä¸€ç§å»ºæ¨¡æ–¹å¼ï¼ŒCI pipelineæœ¬èº«ä¹Ÿæ˜¯è‡ªåŠ¨åŒ–ã€‚å¦‚æœæ˜¯å…¨æ–°çš„pipelineè®¾è®¡ï¼Œä¸å¦¨ç”¨Jobæ¨¡å‹æ¥å®Œæˆï¼›å¦‚æœæ˜¯å’Œå·²å­˜çš„pipelineé›†æˆï¼Œé‚£å°±æ˜¯æ¥å£å¯¹æ¥äº†ã€‚æˆ‘ä»¬å¾®ä¿¡ä¸ŠåŠ äº†ï¼Œæ˜¯å§ï¼Œå¾®ä¿¡ä¸Šç»†èŠä½ çš„åœºæ™¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1877634","ctime":1659877621,"ip_address":"æ—¥æœ¬","comment_id":352704,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1658891314","product_id":100109201,"comment_content":"æ„Ÿè°¢è€å¸ˆçš„åˆ†äº«ã€‚è¿™é‡Œæˆ‘æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œåƒæˆ‘ä»¬è¿™è¾¹è®¾è®¡ci pipelineçš„æ—¶å€™ï¼Œæ˜¯ä»¥åˆ¶å“çš„è§†è§’æ¥è®¾è®¡ï¼Œæè¿°äº†ä¸€ä¸ªåˆ¶å“ä»è¢«å¼€å‘è€…æäº¤åˆ°æœ€ç»ˆä¸Šçº¿ï¼Œè´¨é‡ç­‰çº§ä¸æ–­æå‡çš„è¿‡ç¨‹ã€‚æ‚¨çš„Jobè®¾è®¡ï¼Œæ˜¯ä»¥éœ€æ±‚çš„è§’åº¦æ¥è®¾è®¡çš„ã€‚é‚£ä¹ˆï¼ŒJobæ ‘æ€ä¹ˆä¸CI pipelineç»“åˆå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1877634,"avatar":"","nickname":"sunshinelius","note":"","ucode":"50F35834586E4A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583024,"discussion_content":"jobæ ‘æ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•è®¾è®¡çš„ä¸€ç§å»ºæ¨¡æ–¹å¼ï¼ŒCI pipelineæœ¬èº«ä¹Ÿæ˜¯è‡ªåŠ¨åŒ–ã€‚å¦‚æœæ˜¯å…¨æ–°çš„pipelineè®¾è®¡ï¼Œä¸å¦¨ç”¨Jobæ¨¡å‹æ¥å®Œæˆï¼›å¦‚æœæ˜¯å’Œå·²å­˜çš„pipelineé›†æˆï¼Œé‚£å°±æ˜¯æ¥å£å¯¹æ¥äº†ã€‚æˆ‘ä»¬å¾®ä¿¡ä¸ŠåŠ äº†ï¼Œæ˜¯å§ï¼Œå¾®ä¿¡ä¸Šç»†èŠä½ çš„åœºæ™¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659877621,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ—¥æœ¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":349327,"user_name":"swordman","can_delete":false,"product_type":"c1","uid":1002980,"ip_address":"","ucode":"F6719BD5E20B37","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/e4/94b543c3.jpg","comment_is_top":false,"comment_ctime":1655888179,"is_pvip":false,"replies":[{"id":"127150","content":"è°¢è°¢åˆ†äº«ï¼ Jobæ¨¡å‹å°±æ˜¯ä¸ºäº†å¸®åŠ©ç†æ¸…æ€è·¯ï¼Œåšå¥½è®¾è®¡ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1877634","ctime":1655905839,"ip_address":"","comment_id":349327,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1655888179","product_id":100109201,"comment_content":"åŸå…ˆæˆ‘ä»¬jenkins pipelineçš„è®¾è®¡æ¯”è¾ƒlowï¼Œç›´æ¥åœ¨ç»˜å›¾å·¥å…·æˆ–çº¸ä¸Šï¼Œç»˜åˆ¶stageï¼Œç„¶åå°±å¼€å·¥å†™ä»£ç äº†ã€‚å½“pipelineè„šæœ¬è¶Šæ¥è¶Šå¤šï¼Œå‚ä¸ç¼–å†™çš„äººä¹Ÿè¶Šæ¥è¶Šå¤šæ—¶ï¼Œè„šæœ¬éå¸¸éš¾ç»´æŠ¤ï¼Œä¹Ÿå¾ˆéš¾åšReviewï¼Œè¿™ä¼°è®¡å°±æ˜¯æ²¡æœ‰è®¾è®¡å¸¦æ¥çš„â€œé™„å±å“â€ã€‚<br><br>ä»Šå¤©ç»ˆäºçŸ¥é“pipelineçš„è®¾è®¡æ–¹æ³•äº†ï¼Œå¯ä»¥è§£å†³ä»¥ä¸Šçš„ç—›ç‚¹ï¼Œæ¥ä¸‹æ¥ï¼Œå°±æ˜¯å°†å®ƒç”¨äºå®è·µï¼","like_count":0,"discussions":[{"author":{"id":1877634,"avatar":"","nickname":"sunshinelius","note":"","ucode":"50F35834586E4A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577061,"discussion_content":"è°¢è°¢åˆ†äº«ï¼ Jobæ¨¡å‹å°±æ˜¯ä¸ºäº†å¸®åŠ©ç†æ¸…æ€è·¯ï¼Œåšå¥½è®¾è®¡ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655905840,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":345194,"user_name":"ã€‚ã€‚ã€‚","can_delete":false,"product_type":"c1","uid":1492863,"ip_address":"","ucode":"2888F45C03BE31","user_header":"https://static001.geekbang.org/account/avatar/00/16/c7/7f/c2b5f1f2.jpg","comment_is_top":false,"comment_ctime":1652101835,"is_pvip":false,"replies":[{"id":"126063","content":"å¦‚æœä½ æŒ‡çš„æ˜¯example gitçš„åœ°å€ï¼ŒæŠ±æ­‰ï¼Œå®ƒæ˜¯mockçš„ã€‚<br>æœ¬ä¸“æ å”¯ä¸€Githubåœ°å€<br>https:&#47;&#47;github.com&#47;sheng-geek-zhuanlan","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1877634","ctime":1652233726,"ip_address":"","comment_id":345194,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1652101835","product_id":100109201,"comment_content":"è¿™ä¸ªgitåœ°å€ç™»ä¸è¿›å»å‘€","like_count":0,"discussions":[{"author":{"id":1877634,"avatar":"","nickname":"sunshinelius","note":"","ucode":"50F35834586E4A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571453,"discussion_content":"å¦‚æœä½ æŒ‡çš„æ˜¯example gitçš„åœ°å€ï¼ŒæŠ±æ­‰ï¼Œå®ƒæ˜¯mockçš„ã€‚\næœ¬ä¸“æ å”¯ä¸€Githubåœ°å€\nhttps://github.com/sheng-geek-zhuanlan","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652233726,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}