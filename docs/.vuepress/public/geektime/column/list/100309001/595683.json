{"id":595683,"title":"开篇词｜高并发系统，技术实力的试金石","content":"<p>你好，我是徐长龙，欢迎加入我的高并发实战课。</p><p>我目前在极客时间担任架构师一职，在此之前从事架构已有十几年，曾就职于穷游网、微博、好未来，主要做老系统的高并发迁移与改造，对RPC建设、服务化、框架、分布式链路跟踪监控以及Kubernetes管理平台拥有丰富的经验。</p><p>我个人对计算机技术有浓厚的兴趣，始终在主动学习各种技术，早年曾活跃在Swoole社区、PHP开发者大会。</p><p>作为一名一线技术老兵，回顾我这么多年职业生涯的发展关键节点，总是和“高并发系统改造”密切相关。</p><h2>为什么大厂这么重视高并发？</h2><p>说起高并发系统，你可能<strong>既熟悉又陌生。</strong></p><p>熟悉是因为我们生活中常用的服务都属于高并发系统，比如淘宝、微博、美团、饿了么、12306、滴滴等等。</p><p>说它陌生，则是因为现实中只有少部分研发同学才能真正接触到这类系统，更多同学的刚需可能会局限于大厂面试。比如你是否也刷过这些问题：</p><p><strong>1.为什么百万并发系统不能直接使用MySQL服务？</strong><br>\n<strong>2.为什么Redis内存相比磁盘，需要用更多的空间？</strong><br>\n<strong>3.怎么保证条件查询缓存的数据一致性？</strong><br>\n<strong>4.为什么高级语言不能直接做业务缓存服务？</strong></p><p>那么大厂究竟关注的是什么呢？我们又该怎么看待高并发？</p><p>无论问题多么花哨，归根结底其实就一句话：大厂看重的是你解决问题的思路和方法，而支撑你去完美回应这些的是更深层次的系统设计方向和原理。</p><!-- [[[read_end]]] --><p>比如说，上面我们提到的为什么百万并发不能直接使用MySQL服务，没有足够积累的话，你回答的大概是因为太高的并发查询会导致MySQL缓慢，然后简单地讲讲如何用缓存抵挡流量。</p><p>但是如果你面的是更高级别的岗位，面试官想要的其实是让你讲讲MySQL数据库为什么不能提供这么大的并发服务，同时你需要深入一起讨论下分布式数据库索引、存储、数据分片、存算分离等相关知识。</p><p>我们知道，互联网服务的核心价值就是流量，流量越大，平台的可能性和空间就越大，所以这也是为什么大厂倾向于有高并发经验的研发。2014年后，互联网迈入高并发时代，大厂与创业公司之间的技术壁垒一直在不断加码，高并发相关人才从早几年的趋势已然成为如今的大厂标配。</p><p>近几年云服务厂商的基础建设越来越成熟，他们直接提供了无感的分布式服务支撑，这进一步减少了我们亲自动手实践的机会，这会导致很多架构师的工作只剩下选厂商、选服务、如何快速接入和如何节省成本。</p><p>所以我们需正视，高并发在大厂与小厂之间确实建起了一道墙，想跨越它，系统学习底层知识、实践高并发场景就是必经之路。</p><h2>进阶高并发，最重要的是项目级实战</h2><p>那具体怎么跨越？可以参考我的经历。</p><p>2007年我刚毕业那会儿，国内的技术环境还谈不上什么高并发，我的工作局限在小流量场景，最多就是想想代码的可复用性和业务逻辑的完整性，而市场上最不缺的就是我这个阶段的研发。被套牢在业务逻辑实现里的日子，我开始关注各种技术，但对开源和系统底层的认识还很浅薄，也不知道该怎么去加深这些知识。</p><p>直到我加入穷游网，实际主持老系统高并发改造工作，在RPC建设时，因为RPC性能瓶颈我碰了一鼻子灰，才真正发现了差距。</p><p>之前的一些技巧，不见得适用于更高要求的系统。小流量场景里无伤大雅的问题，系统规模变大后都可能被无限放大，这会给脆弱的系统造成“致命打击”。在高并发场景中，你会发现很多网上开源的自我介绍，跟实践验证的结果大相径庭。</p><p>这段经历，让我看问题的思路和视角有了一个很大的转变。为了弥补自己的不足，我阅读了大量计算机系统著作，恶补底层知识。在相关技术社区与同好激烈地讨论，在项目中我动手实测过大量的开源，也对他们提了很多改进issue建议。</p><p>总之，学习、实践、交流多管齐下，还是非常有成效的，很快我加入了微博广告部，从事基础架构方面的相关工作。</p><p>微博是我的一个黄金成长期，在这里体验了不少“有趣但变态的需求”，这里常常<strong>就给两台服务器。就要你去开发服务微博全网的业务</strong>，还要求你不能崩。期间我还参与建设了很多实用有趣的服务，这让我从三百多人的广告部脱颖而出，得到了珍贵的晋升机会。也是这段经历，让我真正转向基础服务研发，在数据服务和高并发服务方面积累了更多经验。</p><p>后来，我陆陆续续收到很多公司或朋友的邀请，为各种系统提供服务改造优化方面的指导。有的系统迁移改造好比蚂蚁搬家，断断续续花了两年多的时间；有的系统崩溃，公司损失达到千万元，叫我去救火；有的系统谁都拆不动，没有人说得清到底该怎么优化……</p><p><img src=\"https://static001.geekbang.org/resource/image/f8/97/f8d42a70b9ecffcf05b97fde4781c297.jpg?wh=1920x1234\" alt=\"图片\"></p><p>所以你清楚进阶路径了吗？学习、实践、交流会是最实用的方法，最终帮助你建立系统化的思维。</p><p>你可以先从手边的项目开始，比如对你所在企业的现有系统进行高并发改造，注意不要只阅读理论，而是要一边分析实践，一边用压测去验证。风险可控的话，推荐你可以先找一些无关紧要的小系统实践。</p><h2>如何实践高并发？</h2><p>那么具体如何改造呢？后面这四步最关键：识别系统类型、完善监控系统、梳理改造要点、小步改造验证。</p><p>以第一步为例，我们可以按照数据特征给系统归类，分别为<strong>读多写少、强一致性、写多读少、读多写多</strong>这四种类型。确定了系统的类型，就等同于确定了具体的优化方向。</p><p>而这个专栏就会针对这四个优化方向，带你梳理关键改造点。无论你需要构建高并发系统，还是面临业务流量增长或是系统改造升级，都能在这里找到参考。</p><p>这里我梳理了课程的知识结构图，下面结合图解说明一下课程的设计思路：</p><p><img src=\"https://static001.geekbang.org/resource/image/12/49/128854999549e275bc83ddeb41db2d49.jpg?wh=1920x1360\" alt=\"图片\" title=\"高并发系统实战知识地图\"></p><h3>读多写少的系统</h3><p>我会以占比最高的“读多写少”系统带你入门，梳理和改造用户中心项目。这类系统的优化工作会聚焦于如何通过缓存分担数据库查询压力，所以我们的学习重点就是做好缓存，包括但不限于数据梳理、做数据缓存、加缓存后保证数据一致性等等工作。</p><p>另外，为了帮你从单纯的业务实现思想中“跳出来”，我们还会一起拓展下主从同步延迟和多机房同步的相关知识，为后续学习分布式和强一致打好基础。</p><h3>强一致性的电商系统</h3><p>这一章我们会以最典型的电商系统为例，学习要求更高的强一致性系统。</p><p>这类系统的主要挑战是<strong>承接高并发流量的同时，还要做好系统隔离性、事务一致性以及库存高并发争抢不超卖</strong>。我会和你详细讨论拆分实践的要点，让你加深对系统隔离、同步降级和库存锁等相关内容的认识，弄明白分布式事务组件的运作规律。了解这些，你会更容易看透一些基础架构组件的设计初衷。</p><h3>写多读少的系统如何做链路跟踪</h3><p>接下来是高并发写系统，它涉及大量数据如何落盘、如何传输、存储、压缩，还有冷热数据的切换备份、索引查询等多方面问题，我会一一为你展开分析。我还会给你分享一个<strong>全量日志分布式链路跟踪系统的完整案例</strong>，帮你熟悉并发写场景落地的方方面面。</p><p>另外，行业内写高并发的服务通常需要借助一些开源才能实现，我还会介绍一些相关开源实现原理和应用方向，完善你的“兵器库”。</p><h3>读多写多的直播系统</h3><p>读多写多系统是最复杂的系统类型，就像最火热的游戏、直播服务都属于这个类型。其中很多技术都属于行业天花板级别，毕竟线上稍有点问题，都极其影响用户体验。</p><p>这类系统数据基本<strong>都是在内存中直接对外服务</strong>，同时服务都要<strong>拆成很小的单元</strong>，数据是周期落到磁盘或数据库，而不是实时更新到数据库。因此我们的学习重点是如何用内存数据做业务服务、系统无需重启热更新、脚本引擎集成、脚本与服务互动交换数据、直播场景高并发优化、一些关于网络优化CDN和DNS、知识以及业务流量调度、客户端本地缓存等相关知识。</p><h3>第五章 内网建设案例讲解</h3><p>最后一章，我精选了一些案例，也是我特别添加的，这里既有让人眼前一亮的项目方案，也有很多有趣实用的设计，主要目的是帮助你开拓视野，未来能自行实现一些基础服务设计。</p><p>对于流量刚成长起来的业务，这一章很有参考价值，能让你的系统在后续业务流量增长时，扛住需求冲击并能快速解决问题。同时，相信你对头部开源解决方案也会有更深的理解。</p><p>一起到达目的地之后，我希望你已经有了更加宏观的视野，通过多项目实践系统了解了高并发。在面临各类相关问题时，能针对不同类型的系统，实现更匹配业务需求和技术条件的改造优化。</p><p>高并发不会是区别大厂、小厂工程师的标准，却是<strong>检验技术实力的一道关</strong>。课程搭建的学习场景是个良好起点，为你创造机会提高能力，期待看到你未来的成长突破！</p><p>留言区和我聊聊你学习高并发的痛点吧，或许你遇到的困难已经在课程中有了答案，我也可以做针对性的加餐，我们一起交流学习。</p>","neighbors":{"left":[],"right":{"article_title":"01｜结构梳理：大并发下，你的数据库表可能成为性能隐患","id":595679}},"comments":[{"had_liked":false,"id":360525,"user_name":"Gojustforfun","can_delete":false,"product_type":"c1","uid":1187021,"ip_address":"北京","ucode":"7513A40F27344F","user_header":"https://static001.geekbang.org/account/avatar/00/12/1c/cd/8d552516.jpg","comment_is_top":true,"comment_ctime":1666613530,"is_pvip":true,"replies":[{"id":"131185","content":"你好，感谢Gojustforfun你的留言，由于你的问题有点多，我挑主要的问题回答，对于高并发实践这里建议是这样，你可以在工作中对于自己维护的系统进行尝试改造，当然你要注意风险不要改坏了，我碰到过有同学跟老板说：老板你辛苦下，我测试下高并发，笑。<br><br>我们平时用的系统大多数都属于读多写少的服务，所以可以考虑前期先从加缓存入手，注意数据的一致性，在有一定心得体验后，在本地搭建压测环境，进一步论证，多投放在测试环境中使用，待一段多次经过测试验证后，再投入使用，当然这个只是对于缓存，其他方面的服务，我的建议是真实在项目中用起来","user_name":"作者回复","comment_id":360525,"uid":"1004527","ip_address":"北京","utype":1,"ctime":1666687196,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"9.2233720943560008e+18","product_id":100309001,"comment_content":"看到“实战”二字就进，来看看有多“实战”。<br><br>说个大部分人可能会有痛点:<br><br>身在小厂高并发系统设计与实践经验不足，学习高并发知识用不上（因为CURD业务做不完）。面试时一被追问几下就露怯了，就被猜到是看了面经并没有实战经验。进大厂才能有高并发经验，面试时得有高并发经验才能进大厂，怎么办？个人想学编程有个一般的电脑就可以照着书或文档开始动手实践，想提高高并发系统设计与实践能力，个人该如何做？如果愿意付费，租云主机倒是可以解决模拟环境的软硬件问题，但怎么搞还是缺乏经验&#47;指导的，多半只能凭感觉“瞎折腾”。老师您能给一些可行的高并发系统个人实践方面的指导方法和建议吗？<br><br>好不容易碰到极客时间自家的架构师，多要（几）个加餐:<br><br>1.能介绍一下极客时间的技术栈吗？<br>2.今年寒冬有点冷，您那暖和不？要什么样的人？要求是什么？<br>3.学完专栏后，如何过技术面试（面试攻略），最好是能过极客时间的那种的。<br><br>祝大家节日快乐！^_^","like_count":13,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591596,"discussion_content":"你好，感谢Gojustforfun你的留言，由于你的问题有点多，我挑主要的问题回答，对于高并发实践这里建议是这样，你可以在工作中对于自己维护的系统进行尝试改造，当然你要注意风险不要改坏了，我碰到过有同学跟老板说：老板你辛苦下，我测试下高并发，笑。\n\n我们平时用的系统大多数都属于读多写少的服务，所以可以考虑前期先从加缓存入手，注意数据的一致性，在有一定心得体验后，在本地搭建压测环境，进一步论证，多投放在测试环境中使用，待一段多次经过测试验证后，再投入使用，当然这个只是对于缓存，其他方面的服务，我的建议是真实在项目中用起来","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666687196,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360499,"user_name":"每天晒白牙","can_delete":false,"product_type":"c1","uid":1004698,"ip_address":"北京","ucode":"A1B102CD933DEA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/54/9a/76c0af70.jpg","comment_is_top":false,"comment_ctime":1666603619,"is_pvip":false,"replies":[{"id":"131164","content":"每天你好，目前是使用的伪代码，偏GO，也有C++代码，重点是讲思路和设计","user_name":"作者回复","comment_id":360499,"uid":"1004527","ip_address":"北京","utype":1,"ctime":1666606862,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":1,"score":"23141440099","product_id":100309001,"comment_content":"老师，用啥语言讲解","like_count":5,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591510,"discussion_content":"每天你好，目前是使用的伪代码，偏GO，也有C++代码，重点是讲思路和设计","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666606862,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360530,"user_name":"拾掇拾掇","can_delete":false,"product_type":"c1","uid":1051873,"ip_address":"北京","ucode":"D775F374C2A1D3","user_header":"https://static001.geekbang.org/account/avatar/00/10/0c/e1/f663213e.jpg","comment_is_top":false,"comment_ctime":1666616917,"is_pvip":true,"replies":[{"id":"131172","content":"期望我的课能够给你更多视角去思考，在学习过程中，如果碰到问题随时留言～","user_name":"作者回复","comment_id":360530,"uid":"1004527","ip_address":"北京","utype":1,"ctime":1666664231,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"10256551509","product_id":100309001,"comment_content":"期待老师的课，让我这个小厂菜鸡，有架构设计的能力<br>","like_count":2,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591565,"discussion_content":"期望我的课能够给你更多视角去思考，在学习过程中，如果碰到问题随时留言～","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666664231,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360860,"user_name":"一步","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"北京","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1666923458,"is_pvip":true,"replies":[{"id":"131272","content":"你好，一步，很高兴收到你的需求，后续的内容中我会讲一些，但是不会特别提及是那个厂的架构～","user_name":"作者回复","comment_id":360860,"uid":"1004527","ip_address":"北京","utype":1,"ctime":1666927333,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":1,"score":"5961890754","product_id":100309001,"comment_content":"老师方不方便 给我们讲讲 极客时间的高并发架构吗？","like_count":1,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591907,"discussion_content":"你好，一步，很高兴收到你的需求，后续的内容中我会讲一些，但是不会特别提及是那个厂的架构～","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666927334,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360672,"user_name":"行则将至","can_delete":false,"product_type":"c1","uid":1542987,"ip_address":"北京","ucode":"DB972F2DF059C4","user_header":"https://static001.geekbang.org/account/avatar/00/17/8b/4b/fa52d222.jpg","comment_is_top":false,"comment_ctime":1666747571,"is_pvip":false,"replies":[{"id":"131201","content":"你好，行则将至，我的建议是找一个比较活跃的社区，加入他们的群，同时阅读开源的源码，清楚他的思想，但是这个过程是一个长期的过程，所以你找的开源要找用的人多并且一直活跃的，剩下就是在自己的工作中对其进行使用，有自己见解后，尝试提出自己的见解以及提交PR、报issue bug，如果你做的方向不错，社区会很快接纳你","user_name":"作者回复","comment_id":360672,"uid":"1004527","ip_address":"北京","utype":1,"ctime":1666749885,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":1,"score":"5961714867","product_id":100309001,"comment_content":"老师，在开源项目的参与上，能不能帮指点一二。比如：对新手来说，如何选择开源项目进行参与？后面如何持续跟进参与","like_count":1,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591649,"discussion_content":"你好，行则将至，我的建议是找一个比较活跃的社区，加入他们的群，同时阅读开源的源码，清楚他的思想，但是这个过程是一个长期的过程，所以你找的开源要找用的人多并且一直活跃的，剩下就是在自己的工作中对其进行使用，有自己见解后，尝试提出自己的见解以及提交PR、报issue bug，如果你做的方向不错，社区会很快接纳你","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666749885,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360637,"user_name":"骷髅骨头","can_delete":false,"product_type":"c1","uid":1078098,"ip_address":"北京","ucode":"9FCBA47EFD37F6","user_header":"https://static001.geekbang.org/account/avatar/00/10/73/52/8a4cf5e9.jpg","comment_is_top":false,"comment_ctime":1666704088,"is_pvip":true,"replies":[{"id":"131207","content":"你好，骷髅骨头，很高兴收到你的留言，由于高并发是整个互联网都在研究的方向，所以这个范围有些大，个人建议找一些典型的项目先进行了解，特别是缓存、队列、分布式服务，其中典型的是Redis、Kafka、ElasticSearch，建议对他们进行深挖！","user_name":"作者回复","comment_id":360637,"uid":"1004527","ip_address":"北京","utype":1,"ctime":1666751881,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":1,"score":"5961671384","product_id":100309001,"comment_content":"能提供一些可以提前预备知识的书和资料吗","like_count":1,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591657,"discussion_content":"你好，骷髅骨头，很高兴收到你的留言，由于高并发是整个互联网都在研究的方向，所以这个范围有些大，个人建议找一些典型的项目先进行了解，特别是缓存、队列、分布式服务，其中典型的是Redis、Kafka、ElasticSearch，建议对他们进行深挖！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666751881,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360636,"user_name":"天鹏","can_delete":false,"product_type":"c1","uid":1200390,"ip_address":"北京","ucode":"1D8EE8C8409D39","user_header":"https://static001.geekbang.org/account/avatar/00/12/51/06/8caf90be.jpg","comment_is_top":false,"comment_ctime":1666702931,"is_pvip":false,"replies":[{"id":"131194","content":"天鹏，有什么感兴趣的多交流","user_name":"作者回复","comment_id":360636,"uid":"1004527","ip_address":"北京","utype":1,"ctime":1666707674,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"5961670227","product_id":100309001,"comment_content":"我来了，占楼","like_count":1,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591618,"discussion_content":"天鹏，有什么感兴趣的多交流","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666707675,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360568,"user_name":"大布丁","can_delete":false,"product_type":"c1","uid":1389744,"ip_address":"北京","ucode":"3C655AA79A538C","user_header":"https://static001.geekbang.org/account/avatar/00/15/34/b0/8d14a2a1.jpg","comment_is_top":false,"comment_ctime":1666666480,"is_pvip":false,"replies":[{"id":"131182","content":"你好，大布丁，感谢你的留言～在学习过程中有任何问题，多留言交流","user_name":"作者回复","comment_id":360568,"uid":"1004527","ip_address":"北京","utype":1,"ctime":1666674072,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"5961633776","product_id":100309001,"comment_content":"理论实战一起干！","like_count":1,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591582,"discussion_content":"你好，大布丁，感谢你的留言～在学习过程中有任何问题，多留言交流","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666674072,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360819,"user_name":"KK","can_delete":false,"product_type":"c1","uid":1324863,"ip_address":"北京","ucode":"FFC31A3FE3A285","user_header":"https://static001.geekbang.org/account/avatar/00/14/37/3f/a9127a73.jpg","comment_is_top":false,"comment_ctime":1666875431,"is_pvip":false,"replies":[{"id":"131271","content":"你好，KK，很高兴又看到你的留言，多交流心得，一起学习～","user_name":"作者回复","comment_id":360819,"uid":"1004527","ip_address":"北京","utype":1,"ctime":1666927302,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":1,"score":"1666875431","product_id":100309001,"comment_content":"“高并发”目前接触得确实不多，一起学习一下。","like_count":0,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591906,"discussion_content":"你好，KK，很高兴又看到你的留言，多交流心得，一起学习～","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666927302,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360815,"user_name":"KK","can_delete":false,"product_type":"c1","uid":1324863,"ip_address":"北京","ucode":"FFC31A3FE3A285","user_header":"https://static001.geekbang.org/account/avatar/00/14/37/3f/a9127a73.jpg","comment_is_top":false,"comment_ctime":1666872114,"is_pvip":false,"replies":[{"id":"131265","content":"你好，KK，很高兴收到你的留言，有任何有兴趣的地方随时随地交流","user_name":"作者回复","comment_id":360815,"uid":"1004527","ip_address":"北京","utype":1,"ctime":1666873849,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":1,"score":"1666872114","product_id":100309001,"comment_content":"来学习一下！哈哈哈！","like_count":0,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591858,"discussion_content":"你好，KK，很高兴收到你的留言，有任何有兴趣的地方随时随地交流","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666873849,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360764,"user_name":"为了维护世界和平","can_delete":false,"product_type":"c1","uid":2959301,"ip_address":"北京","ucode":"A7254895BA8B68","user_header":"https://static001.geekbang.org/account/avatar/00/2d/27/c5/d4d00da2.jpg","comment_is_top":false,"comment_ctime":1666834182,"is_pvip":true,"replies":[{"id":"131260","content":"你好，很高兴收到你的回复，多多留言交流，也欢迎分享你的经验","user_name":"作者回复","comment_id":360764,"uid":"1004527","ip_address":"北京","utype":1,"ctime":1666836761,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"1666834182","product_id":100309001,"comment_content":"期待更多的实战文章","like_count":0,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591814,"discussion_content":"你好，很高兴收到你的回复，多多留言交流，也欢迎分享你的经验","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666836761,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360667,"user_name":"达芬奇","can_delete":false,"product_type":"c1","uid":2451310,"ip_address":"北京","ucode":"B174F5347557B3","user_header":"https://static001.geekbang.org/account/avatar/00/25/67/6e/ec7299ec.jpg","comment_is_top":false,"comment_ctime":1666745669,"is_pvip":true,"replies":[{"id":"131202","content":"你好，达芬奇，欢迎多交流，如果有什么心得也可以分享出来","user_name":"作者回复","comment_id":360667,"uid":"1004527","ip_address":"北京","utype":1,"ctime":1666749947,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":1,"score":"1666745669","product_id":100309001,"comment_content":"非常期待老师的课！","like_count":0,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591650,"discussion_content":"你好，达芬奇，欢迎多交流，如果有什么心得也可以分享出来","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666749947,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360644,"user_name":"花花大脸猫","can_delete":false,"product_type":"c1","uid":1117318,"ip_address":"北京","ucode":"8ABDB3F7F4FB0F","user_header":"https://static001.geekbang.org/account/avatar/00/11/0c/86/8e52afb8.jpg","comment_is_top":false,"comment_ctime":1666709291,"is_pvip":true,"replies":[{"id":"131197","content":"你好，花花大脸猫，如果是可预测的操作可以考虑做一些数据预加载，如直播互动中的问答题，如果是平时峰值不高，一些互动可以考虑客户端三秒随机提交自动错峰，客户端异步随机时间延迟提交也是个不错的办法，具体还要看哪个能接受","user_name":"作者回复","comment_id":360644,"uid":"1004527","ip_address":"北京","utype":1,"ctime":1666713282,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":1,"score":"1666709291","product_id":100309001,"comment_content":"老师，请教下，由于业务的特殊性，整点会有大批量的请求进入打入到应用中，导致应用在整点的内存以及cpu的占比都比较高，目前其中一部分业务使用了MQ进行了削峰，业务场景中的读写占比在4:6的样子，请问这部分有其余可以优化处理的方式么？","like_count":0,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591626,"discussion_content":"你好，花花大脸猫，如果是可预测的操作可以考虑做一些数据预加载，如直播互动中的问答题，如果是平时峰值不高，一些互动可以考虑客户端三秒随机提交自动错峰，客户端异步随机时间延迟提交也是个不错的办法，具体还要看哪个能接受","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666713282,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360605,"user_name":"一只小皮球","can_delete":false,"product_type":"c1","uid":2114740,"ip_address":"北京","ucode":"6B2BDA4D37B082","user_header":"https://static001.geekbang.org/account/avatar/00/20/44/b4/c9d7bdc8.jpg","comment_is_top":false,"comment_ctime":1666685114,"is_pvip":false,"replies":[{"id":"131195","content":"你好，feed相关需求已经收到，后续如果大家都感兴趣，会追一下内容","user_name":"作者回复","comment_id":360605,"uid":"1004527","ip_address":"北京","utype":1,"ctime":1666707788,"user_name_real":"编辑"}],"discussion_count":2,"race_medal":0,"score":"1666685114","product_id":100309001,"comment_content":"老师 是否可以讲讲 feed流的设计与实现，想知道微博这种亿级系统是如何支撑起来的","like_count":0,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591619,"discussion_content":"你好，feed相关需求已经收到，后续如果大家都感兴趣，会追一下内容","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666707788,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1252598,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1c/f6/b5394713.jpg","nickname":"小杨","note":"","ucode":"C7C07AF005507C","race_medal":3,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591758,"discussion_content":"http://gk.link/a/11MER    阿忠伯介绍过。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666799407,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360583,"user_name":"言十年","can_delete":false,"product_type":"c1","uid":1110039,"ip_address":"北京","ucode":"67B8B49C3A3B17","user_header":"https://static001.geekbang.org/account/avatar/00/10/f0/17/796a3d20.jpg","comment_is_top":false,"comment_ctime":1666671607,"is_pvip":true,"replies":[{"id":"131186","content":"感谢你的捧场，期待多多交流","user_name":"作者回复","comment_id":360583,"uid":"1004527","ip_address":"北京","utype":1,"ctime":1666687303,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"1666671607","product_id":100309001,"comment_content":"坐等更新","like_count":0,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591597,"discussion_content":"感谢你的捧场，期待多多交流","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666687303,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360517,"user_name":"码小呆","can_delete":false,"product_type":"c1","uid":2055809,"ip_address":"北京","ucode":"44532D6ABF9340","user_header":"https://static001.geekbang.org/account/avatar/00/1f/5e/81/82709d6e.jpg","comment_is_top":false,"comment_ctime":1666610246,"is_pvip":true,"replies":[{"id":"131183","content":"你好，码小呆，在学习的时候一定要慢慢看，这章里面看起来有些浅显，但是其实后面很多时候会一直用到","user_name":"作者回复","comment_id":360517,"uid":"1004527","ip_address":"北京","utype":1,"ctime":1666674131,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"1666610246","product_id":100309001,"comment_content":"迫不及待","like_count":0,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591583,"discussion_content":"你好，码小呆，在学习的时候一定要慢慢看，这章里面看起来有些浅显，但是其实后面很多时候会一直用到","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666674131,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}