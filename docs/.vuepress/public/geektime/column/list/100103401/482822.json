{"id":482822,"title":"春节刷题计划（一）| 当Kotlin遇上LeetCode","content":"<p>你好，我是朱涛。</p><p>时光飞逝，不知不觉间，我们就已经完成了基础篇的学习，并且也已经完成了三个实战项目，但这终归是不够过瘾的。想要完全掌握Kotlin的基础语法，我们还需要更多的练习。我相信，你现在的心情就像是一个手握屠龙刀的勇士，热切希望找一些对手来验证自己的学习成果。</p><p>其实，我自己在学习一门新的编程语言的时候，有一个高效的方法，也分享给你。这里我以Kotlin为例，假设我现在是一个新手，想快速掌握Kotlin的话，我会这样做：</p><ul>\n<li>第一步，我会<strong>去Google搜索一些语言特性对比的文章</strong>。比如，我熟悉Java，想学Kotlin，我就会去搜“from Java to Kotlin”，然后去看一些Java、Kotlin语法对比的文章。这时候，我大脑里就会建立起Java与Kotlin的语法联系。</li>\n<li>第二步，我会打开<a href=\"https://kotlinlang.org/docs/basic-syntax.html\">Kotlin官方文档</a>，花几个小时的时间粗略看一遍，对Kotlin的语法有个大致印象。</li>\n<li>最后一步，我会<strong>打开LeetCode之类的网站</strong>，开始用Kotlin刷题。在刷题的过程中，我也会先从模拟类的题目开始，之后再到数组、链表、Map、二叉树之类的数据结构。整个过程由易到难，刚开始的时候，我会选择“简单题”，等熟练以后，再选择“中等题”，心情好的时候，我偶尔会做个“困难题”挑战一下。</li>\n</ul><!-- [[[read_end]]] --><p>当然，对于你来说，第一步和第二步都已经不是问题了，通过前面十几节课程的学习，你已经有了牢固的Kotlin基础。现在欠缺的，只是大量的练习而已。</p><p>说回来，其实我认为，我这种学习编程的方法是个一举多得的，比如它可以让我们：</p><ul>\n<li><strong>快速掌握一门新的编程语言</strong>。</li>\n<li><strong>夯实基本功</strong>。通过刷算法题，可以进一步巩固自己的数据结构与算法知识，这对于以后的工作也会有很大的帮助。所谓软件的架构，其实一定程度上就是在选择不同的数据结构与算法解决问题。而基本功的扎实程度，也决定了一名开发者的能力上限。</li>\n<li><strong>面试加分</strong>。众所周知，顶级的IT公司面试的时候，都是要做算法题的。假如你是一名Android或Java工程师，如果你能用Kotlin写出漂亮的题解，那将会是大大加分项。</li>\n</ul><p>另外，由于语法的简洁性，你会发现，用Kotlin做算法题，<strong>比Java要“爽”很多</strong>。同样的一道题目，用Java你可能要写很多代码，但Kotlin却只需要简单的几行。</p><p>所以接下来的春节假期呢，我就会带你来一起刷题，希望你在假期放松休息、陪伴家人之余，也不要停下学习的脚步。好，那么今天，我们就先来看几个简单的题目，就当作是热身了。</p><h2>热身1：移除字符串当中的“元音字母”</h2><p>这是LeetCode的1119号题。题意大致是这样的：程序的输入是一个字符串s。题目要求我们移除当中的所有元音字母a、e、i、o、u，然后返回。</p><p>这个问题，如果我们用Java来实现的话，大致会是这样的：</p><pre><code class=\"language-java\">public String removeVowels(String s) {\n    StringBuilder builder = new StringBuilder();\n    char[] array = s.toCharArray();\n\n    for(char c: array) {\n        // 不是元音字母，才会拼接\n        if(c != 'a' &amp;&amp; c != 'e' &amp;&amp; c != 'i' &amp;&amp; c !='o' &amp;&amp; c != 'u') {\n            builder.append(c);\n        }\n    }\n\n    return builder.toString();\n}\n</code></pre><p>但如果是用Kotlin，我们一行代码就可以搞定：</p><pre><code class=\"language-plain\">fun removeVowels(s: String): String =\n        s.filter { it !in setOf('a', 'e', 'i', 'o', 'u') }\n</code></pre><p>这里，我们是使用了字符串的扩展函数filter，轻松就实现了前面的功能。这个题目很简单，同时也比较极端，下面我们来看一个更复杂的例子。</p><h2>热身2：最常见的单词</h2><p>这是LeetCode的819号题。题意大致如下：程序的输入是一段英语文本（paragraph），一个禁用单词列表（banned）返回出现次数最多、同时不在禁用列表中的单词。</p><p>这个题目其实跟我们第2次的实战项目“<a href=\"https://time.geekbang.org/column/article/477295\">英语词频统计</a>”有点类似，我们之前实现的是完整的单词频率，并且降序。这个题目只需要我们找到频率最高的单词，不过就是多了一个<strong>单词黑名单</strong>而已。</p><p>那么，这个题目如果我们用Java来实现，肯定是要不少代码的，但如果用Kotlin，简单的几行代码就可以搞定了：</p><pre><code class=\"language-plain\">fun mostCommonWord1(paragraph: String, banned: Array&lt;String&gt;) =\n            paragraph.toLowerCase()\n                .replace(\"[^a-zA-Z ]\".toRegex(), \" \")\n                .split(\"\\\\s+\".toRegex())\n                .filter { it !in banned.toSet() }\n                .groupBy { it }\n                .mapValues { it.value.size }\n                .maxBy { it.value }\n                ?.key?:throw IllegalArgumentException()\n</code></pre><p>可以看到，这段代码我们只需要在原有TextProcessor的基础上，做一点修改，就完成了。</p><p>另外，你可能也发现了，我们前面的两个例子都是用函数式思维来解决的，这其实是因为这两个问题用命令式会更复杂。而对于一些其他的问题，我们其实仍然可以选择命令式来解决。比如：手写排序算法。</p><h2>热身3：用Kotlin实现冒泡排序</h2><p>冒泡排序，是计算机里最基础的一种排序算法。如果你忘了它的实现方式，也没关系，我做了一个动图，让你可以清晰地看到算法的执行过程。</p><p><img src=\"https://static001.geekbang.org/resource/image/89/14/896c2b92f5837fa05aa8e0d17d16e514.gif?wh=1080x608\" alt=\"图片\"></p><p>那么针对冒泡排序法，如果我们用Kotlin来实现，命令式的方式会更加直观一些，就像下面这样：</p><pre><code class=\"language-plain\">fun sort(array: IntArray): IntArray {\n    for (end in (array.size - 1) downTo 1) {\n        for (begin in 1..end) {\n            if (array[begin - 1] &gt; array[begin]) {\n                val temp = array[begin - 1]\n                array[begin - 1] = array[begin]\n                array[begin] = temp\n            }\n        }\n    }\n    return array\n}\n</code></pre><p>这里，我们需要格外注意的是，在逆序遍历数组的时候，我们是使用了<strong>逆序</strong>的Range：“(array.size - 1) downTo 1”，而如果这里是用“1…(array.size - 1)”的话，其实是会出问题的。因为Kotlin当中的Range要求必须是右边不能小于左边，比如“1…3”是可以的，而“3…1”是不行的。</p><p>好了，到这里，相信你对用Kotlin刷算法题已经有了一定认识了。正如Kotlin官方所宣传的那样，Kotlin是一门多范式的编程语言，对于不同的问题，我们完全可以选择不同范式来进行编程。说到底就是：<strong>怎么爽就怎么来</strong>。</p><h2>小作业</h2><p>好，最后也再给你留一个小作业，请你用Kotlin来完成<a href=\"https://leetcode-cn.com/problems/compare-version-numbers/\">LeetCode的165号题《版本号判断》</a>。</p><p><strong>注意：</strong>LeetCode中文站使用的Kotlin版本，仍然停留在1.3.10。如果你是使用Kotlin 1.6解题，代码在IDE当中编译通过了，而LeetCode显示编译出错，那么你就需要修改一下对应的实现。或者，你也可以将新版本的库函数一起拷贝到Solution当中去。</p><p>这道题目我会在下节课给出答案解析，我们下节课再见。</p>","comments":[{"had_liked":false,"id":332696,"user_name":"郑峰","can_delete":false,"product_type":"c1","uid":1112517,"ip_address":"","ucode":"4D4C0C020E507C","user_header":"https://static001.geekbang.org/account/avatar/00/10/f9/c5/95b97dfa.jpg","comment_is_top":false,"comment_ctime":1643501069,"is_pvip":false,"replies":[{"id":"121632","content":"简洁、干净、优雅！","user_name":"作者回复","user_name_real":"编辑","uid":"1180670","ctime":1643591566,"ip_address":"","comment_id":332696,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10233435661","product_id":100103401,"comment_content":"```Kotlin<br>fun compareVersion(version1: String, version2: String): Int {<br>  val v1 = version1.split(&quot;.&quot;).map { it.toInt() }<br>  val v2 = version2.split(&quot;.&quot;).map { it.toInt() }<br><br>  for (i in 0 until maxOf(v1.size, v2.size)) {<br>    val diff = (v1.getOrElse(i) { 0 } - v2.getOrElse(i) { 0 })<br>    if (diff != 0) return if (diff &gt; 0) 1 else -1<br>  }<br>  return 0;<br>}<br><br>```","like_count":3,"discussions":[{"author":{"id":1180670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/fe/0f43ef35.jpg","nickname":"朱涛","note":"","ucode":"5AB5AFE32B8008","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549124,"discussion_content":"简洁、干净、优雅！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643591566,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333281,"user_name":"Geek_Adr","can_delete":false,"product_type":"c1","uid":2876897,"ip_address":"","ucode":"129E17B7D3EB88","user_header":"https://static001.geekbang.org/account/avatar/00/2b/e5/e1/a5064f88.jpg","comment_is_top":false,"comment_ctime":1644244374,"is_pvip":false,"replies":[{"id":"121814","content":"思路很不错，这种方式不必定义额外的函数，大家可以参考。","user_name":"作者回复","user_name_real":"编辑","uid":"1180670","ctime":1644296226,"ip_address":"","comment_id":333281,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5939211670","product_id":100103401,"comment_content":"&#47;&#47; 我能找到的最大程度的函数式<br>    fun compareVersion(version1: String, version2: String): Int {<br>        return (version1.split(&quot;.&quot;).map { it.toInt() }<br>                to version2.split(&quot;.&quot;).map { it.toInt() })<br>            .run {<br>                (0 until maxOf(first.size, second.size))<br>                    .fold(0) { acc, i -&gt;<br>                        if (acc != 0) acc<br>                        else first.getOrElse(i) { 0 }.compareTo(second.getOrElse(i) { 0 })<br>                    }<br>            }<br>    }<br>","like_count":2,"discussions":[{"author":{"id":1180670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/fe/0f43ef35.jpg","nickname":"朱涛","note":"","ucode":"5AB5AFE32B8008","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549925,"discussion_content":"思路很不错，这种方式不必定义额外的函数，大家可以参考。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644296226,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":339010,"user_name":"爱学习的小羊","can_delete":false,"product_type":"c1","uid":2883920,"ip_address":"","ucode":"9984EB84D7715B","user_header":"https://static001.geekbang.org/account/avatar/00/2c/01/50/c1556a25.jpg","comment_is_top":false,"comment_ctime":1647857793,"is_pvip":false,"replies":[{"id":"124007","content":"这样也挺好看的","user_name":"作者回复","user_name_real":"编辑","uid":"1180670","ctime":1648030146,"ip_address":"","comment_id":339010,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1647857793","product_id":100103401,"comment_content":"我这个算是半java半kotlin编程了吧<br>fun compareVersion(version1: String, version2: String): Int {<br>        val nums1 = version1.split(&quot;.&quot;)<br>        val nums2 = version2.split(&quot;.&quot;)<br>        for (i in 0..maxOf(nums1.size,nums2.size)){<br>            var a = 0<br>            var b = 0<br>            if (i &lt; nums1.size) a = nums1[i].toInt()<br>            if (i&lt;nums2.size) b = nums2[i].toInt()<br>            val data = a - b<br>            when {<br>                data &gt; 0 -&gt; return 1<br>                data &lt; 0 -&gt; return -1<br>            }<br><br>        }<br>        return 0<br>    }","like_count":0,"discussions":[{"author":{"id":1180670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/fe/0f43ef35.jpg","nickname":"朱涛","note":"","ucode":"5AB5AFE32B8008","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557953,"discussion_content":"这样也挺好看的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648030146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":338734,"user_name":"梁中华","can_delete":false,"product_type":"c1","uid":1006789,"ip_address":"","ucode":"52FE40242CBAD0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5c/c5/1231d633.jpg","comment_is_top":false,"comment_ctime":1647696078,"is_pvip":true,"replies":[{"id":"124027","content":"嗯，因为新版本里隐藏了，LeetCode 能用。","user_name":"作者回复","user_name_real":"编辑","uid":"1180670","ctime":1648031931,"ip_address":"","comment_id":338734,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1647696078","product_id":100103401,"comment_content":"<br>fun mostCommonWord1(paragraph: String, banned: Array&lt;String&gt;) =<br>            paragraph.toLowerCase()<br>                .replace(&quot;[^a-zA-Z ]&quot;.toRegex(), &quot; &quot;)<br>                .split(&quot;\\\\s+&quot;.toRegex())<br>                .filter { it !in banned.toSet() }<br>                .groupBy { it }<br>                .mapValues { it.value.size }<br>               &#47;&#47; .maxBy { it.value }  &#47;&#47;这里编译不过，我改了下<br>               &#47;&#47; ?.key?:throw IllegalArgumentException()<br>             .toList()   &#47;&#47;先转成List才能用MaxBy<br>            .maxByOrNull { it.second }","like_count":1,"discussions":[{"author":{"id":1180670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/fe/0f43ef35.jpg","nickname":"朱涛","note":"","ucode":"5AB5AFE32B8008","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557973,"discussion_content":"嗯，因为新版本里隐藏了，LeetCode 能用。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648031931,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":336818,"user_name":"PoPlus","can_delete":false,"product_type":"c1","uid":1574765,"ip_address":"","ucode":"5F0927921317F2","user_header":"https://static001.geekbang.org/account/avatar/00/18/07/6d/4c1909be.jpg","comment_is_top":false,"comment_ctime":1646382211,"is_pvip":false,"replies":[{"id":"123155","content":"放心，校招考察的是思维，哪个语言其实没那么重要，语言跟岗位相关会更好，关联不大也不会有太大问题。只要别过渡依赖API即可。<br><br>举个例子，面试官让你实现：“字符串匹配算法”，这时候我们就不能用contains、indexOf之类的API，而是要老老实实去实现KMP之类的算法。让面试官看到你的算法功底、解题思路，这就够了。","user_name":"作者回复","user_name_real":"编辑","uid":"1180670","ctime":1646581440,"ip_address":"","comment_id":336818,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1646382211","product_id":100103401,"comment_content":"涛哥，校招生还推荐用 kotlin 来写算法吗，感觉有些简化的太过了 😅","like_count":1,"discussions":[{"author":{"id":1180670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/fe/0f43ef35.jpg","nickname":"朱涛","note":"","ucode":"5AB5AFE32B8008","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554758,"discussion_content":"放心，校招考察的是思维，哪个语言其实没那么重要，语言跟岗位相关会更好，关联不大也不会有太大问题。只要别过渡依赖API即可。\n\n举个例子，面试官让你实现：“字符串匹配算法”，这时候我们就不能用contains、indexOf之类的API，而是要老老实实去实现KMP之类的算法。让面试官看到你的算法功底、解题思路，这就够了。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1646581440,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":336561,"user_name":"浅色的风","can_delete":false,"product_type":"c1","uid":2879520,"ip_address":"","ucode":"520C6B434FA39A","user_header":"https://static001.geekbang.org/account/avatar/00/2b/f0/20/54253ab7.jpg","comment_is_top":false,"comment_ctime":1646214012,"is_pvip":false,"replies":[{"id":"123027","content":"这思路也不差。","user_name":"作者回复","user_name_real":"编辑","uid":"1180670","ctime":1646275595,"ip_address":"","comment_id":336561,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1646214012","product_id":100103401,"comment_content":"是不是java思维<br>fun compareVersion(version1: String, version2: String): Int {<br>        val listV1 = version1.split(&quot;.&quot;).toList()<br>        val listV2 = version2.split(&quot;.&quot;).toList()<br><br>        val result = if (listV1.size &gt; listV2.size) 1 else -1<br><br>        val maxList = if (listV1.size &gt; listV2.size) listV1 else listV2<br>        val minList = if (listV1.size &lt;= listV2.size) listV1 else listV2<br><br>        for(i in 0..minList.size - 1){<br>            if(listV1[i].toInt() &gt; listV2[i].toInt()){<br>                return 1<br>            }else if(listV1[i].toInt() &lt; listV2[i].toInt()){<br>                return -1<br>            }<br>        }<br><br>        for(j in minList.size..maxList.size - 1){<br>            if(maxList[j].toInt() &gt; 0){<br>                return result<br>            }<br>        }<br><br>        return 0<br><br>    }","like_count":0,"discussions":[{"author":{"id":1180670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/fe/0f43ef35.jpg","nickname":"朱涛","note":"","ucode":"5AB5AFE32B8008","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554231,"discussion_content":"这思路也不差。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646275595,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":336547,"user_name":"白乾涛","can_delete":false,"product_type":"c1","uid":1339841,"ip_address":"","ucode":"0C704B0B90C8D7","user_header":"https://static001.geekbang.org/account/avatar/00/14/71/c1/cbc55e06.jpg","comment_is_top":false,"comment_ctime":1646208245,"is_pvip":false,"replies":[{"id":"123014","content":"是的，有的时候，找不到API了也有可能是废弃了。","user_name":"作者回复","user_name_real":"编辑","uid":"1180670","ctime":1646271169,"ip_address":"","comment_id":336547,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1646208245","product_id":100103401,"comment_content":"我知道为啥找不到 maxBy 了，估计是因为这个方法在 1.6 版本中隐藏了<br><br>@DeprecatedSinceKotlin(warningSince = &quot;1.4&quot;, errorSince = &quot;1.5&quot;, hiddenSince = &quot;1.6&quot;)<br>public inline fun &lt;T, R : Comparable&lt;R&gt;&gt; Sequence&lt;T&gt;.maxBy(selector: (T) -&gt; R): T? {<br>    return maxByOrNull(selector)<br>}","like_count":1,"discussions":[{"author":{"id":1180670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/fe/0f43ef35.jpg","nickname":"朱涛","note":"","ucode":"5AB5AFE32B8008","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554207,"discussion_content":"是的，有的时候，找不到API了也有可能是废弃了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646271169,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1006789,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5c/c5/1231d633.jpg","nickname":"梁中华","note":"","ucode":"52FE40242CBAD0","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557205,"discussion_content":"改成这样：\n            .mapValues { it.value.size }\n            .toList()\n            .maxByOrNull { it.second }\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647696848,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333279,"user_name":"Geek_Adr","can_delete":false,"product_type":"c1","uid":2876897,"ip_address":"","ucode":"129E17B7D3EB88","user_header":"https://static001.geekbang.org/account/avatar/00/2b/e5/e1/a5064f88.jpg","comment_is_top":false,"comment_ctime":1644243658,"is_pvip":false,"replies":[{"id":"121815","content":"这个题解也非常值得参考。<br><br>再次感谢这位同学。","user_name":"作者回复","user_name_real":"编辑","uid":"1180670","ctime":1644296433,"ip_address":"","comment_id":333279,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1644243658","product_id":100103401,"comment_content":"&#47;&#47; 函数式 176ms 击败19%<br>    fun compareVersion(version1: String, version2: String): Int {<br>        return (version1.split(&quot;.&quot;).map { it.toInt() }<br>                to version2.split(&quot;.&quot;).map { it.toInt() })<br>            .run {<br>                (0 until max(first.size, second.size))<br>                    .fold(0) { acc, i -&gt;<br>                        if (acc != 0) acc <br>                        else first.getOrElse(i) { 0 } - second.getOrElse(i) { 0 }<br>                    }<br>            }.let {<br>                when {<br>                    it &gt; 0 -&gt; 1<br>                    it &lt; 0 -&gt; -1<br>                    else -&gt; 0<br>                }<br>            }<br>    }<br><br>&#47;&#47; java  156ms 击败70%<br>    fun compareVersion(version1: String, version2: String): Int {<br>        val v1 = version1.split(&quot;.&quot;).map { it.toInt() }<br>        val v2 = version2.split(&quot;.&quot;).map { it.toInt() }<br>        var idx = 0<br>        while (idx &lt; v1.size &amp;&amp; idx &lt; v2.size) {<br>            if (v1[idx] &gt; v2[idx]) {<br>                return 1<br>            } else if (v1[idx] &lt; v2[idx]) {<br>                return -1<br>            }<br>            idx++<br>        }<br>        while (idx &lt; v1.size) {<br>            if (v1[idx++] &gt; 0) {<br>                return 1<br>            }<br>        }<br>        while (idx &lt; v2.size) {<br>            if (v2[idx++] &gt; 0) {<br>                return -1<br>            }<br>        }<br>        return 0<br>    }<br><br>","like_count":1,"discussions":[{"author":{"id":1180670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/fe/0f43ef35.jpg","nickname":"朱涛","note":"","ucode":"5AB5AFE32B8008","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549927,"discussion_content":"这个题解也非常值得参考。\n\n再次感谢这位同学。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644296433,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332564,"user_name":"$Kotlin","can_delete":false,"product_type":"c1","uid":2148188,"ip_address":"","ucode":"098E9C8F60D865","user_header":"https://static001.geekbang.org/account/avatar/00/20/c7/5c/94cb3a1a.jpg","comment_is_top":false,"comment_ctime":1643343402,"is_pvip":false,"replies":[{"id":"121531","content":"代码写的不错，思路很清晰，能加上一些代码注释就更好了。","user_name":"作者回复","user_name_real":"编辑","uid":"1180670","ctime":1643433455,"ip_address":"","comment_id":332564,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1643343402","product_id":100103401,"comment_content":"    fun compareVersion(version1: String, version2: String): Int {<br>        val versionList1 = version1.split(&quot;.&quot;).toMutableList()<br>        val versionList2 = version2.split(&quot;.&quot;).toMutableList()<br>        if (versionList1.size &gt; versionList2.size) {<br>            repeat(versionList1.size - versionList2.size) {<br>                versionList2.add(&quot;0&quot;)<br>            }<br>        } else {<br>            repeat(versionList2.size - versionList1.size) {<br>                versionList1.add(&quot;0&quot;)<br>            }<br>        }<br>        for (index in 0..versionList1.size-1) {<br>            val v1Int = versionList1[index].toInt()<br>            val v2Int = versionList2[index].toInt()<br>            if (v1Int &gt; v2Int) {<br>                return 1<br>            } else if (v1Int &lt; v2Int) {<br>                return -1<br>            }<br>        }<br>        return 0<br>    }","like_count":0,"discussions":[{"author":{"id":1180670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/fe/0f43ef35.jpg","nickname":"朱涛","note":"","ucode":"5AB5AFE32B8008","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548881,"discussion_content":"代码写的不错，思路很清晰，能加上一些代码注释就更好了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643433455,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332535,"user_name":"jim","can_delete":false,"product_type":"c1","uid":1491946,"ip_address":"","ucode":"C12DB0F2B570F6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Urc67zDC8R6dh9U1ZFTF36icXewM1seehvOUYUs4hyWSsFzS5WQc2RcrE1Mzs8qtgib5SM5wFrVh22QcQd0JUUBw/132","comment_is_top":false,"comment_ctime":1643331516,"is_pvip":false,"replies":[{"id":"121480","content":"春节期间老师会带大家刷题哈，我知道大家都很着急学协程，但是心急吃不了热豆腐嘛，先跟着老师一起练习和复习，把基础夯实好了，春节后协程就到啦，这门课又跑不了~","user_name":"编辑回复","user_name_real":"编辑","uid":"1640700","ctime":1643334500,"ip_address":"","comment_id":332535,"utype":2}],"discussion_count":1,"race_medal":0,"score":"1643331516","product_id":100103401,"comment_content":"春节还更新吗？","like_count":1,"discussions":[{"author":{"id":1640700,"avatar":"https://static001.geekbang.org/account/avatar/00/19/08/fc/9a5fb5c5.jpg","nickname":"小王同学","note":"","ucode":"87C39D384F8991","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548696,"discussion_content":"春节期间老师会带大家刷题哈，我知道大家都很着急学协程，但是心急吃不了热豆腐嘛，先跟着老师一起练习和复习，把基础夯实好了，春节后协程就到啦，这门课又跑不了~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643334500,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]}]}