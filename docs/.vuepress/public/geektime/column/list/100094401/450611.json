{"id":450611,"title":"17 | 实战痛点3：Vue 3中如何集成第三方框架","content":"<p>你好，我是大圣。</p><p>在上一讲中，我给你介绍了如何在Vue 3中实现页面和接口的权限管理。我们把vue-router的动态路由、导航守卫、axios的接口拦截等功能配合到一起使用，实现了页面的权限控制，这也算是Vue中进阶使用vue-router和axios的一个方式。</p><p>今天，我们再来学习另一个进阶玩法，聊一下如何在Vue 3中使用和引入更多的框架。可别小看这里的门道，有的第三方工具框架跟Vue耦合性不高，而有的需要做适配，这一讲我就详细给你说说实操中的注意事项，帮助你在提高开发效率的同时少走弯路。</p><h2>独立的第三方库</h2><p>首先我们要介绍的第三方框架是axios，这是一个完全独立于Vue的框架，我们可以使用axios发送和获取网络接口数据。在Vue、React框架下，axios可以用来获取后端数据。甚至在Node.js环境下，也可以用axios去作为网络接口工具去实现爬虫。</p><p>axios这种相对独立的工具对于我们项目来说，引入的难度非常低。通常来说，使用这种独立的框架需要以下两步。</p><p>以页面进度条工具NProgress为例，第一步是，我们先进入到项目根目录下，使用下面的命令去安装NProgress。</p><pre><code class=\"language-bash\">npm install nprogress -D\n</code></pre><!-- [[[read_end]]] --><p>第二步，就是在需要使用NProgress的地方进行import的相关操作，比如在页面跳转的时候，我们就需要使用NProgress作为进度条。导入NProgress库之后，我们就不需要使用Vue3的插件机制进行注册，只需要通过router.beforeEach来显示进度条，通过afterEach来结束进度条就可以了。</p><pre><code class=\"language-javascript\">import NProgress from 'nprogress' // progress bar\nrouter.beforeEach(async (to, from, next) =&gt; {\n  // start progress bar\n  NProgress.start()\n})\n\nrouter.afterEach(() =&gt; {\n  // finish progress bar\n  NProgress.done()\n})\n</code></pre><p>在项目中，我们之后还会依赖很多和NProgress类似的库，比如处理Excel的xlsx库，处理剪切板的clipboard库等等。</p><h2>组件的封装</h2><p>下面我们以可视化组件为例，来分析复杂组件的封装。之所以选择可视化组件为示例，是因为管理系统中的统计数据、销售额数据等等，都喜欢用饼图或柱状图的方式来展示。</p><p>虽然可视化本身和Vue没有太大关系，但我们需要在页面中以组件的形式显示可视化图表。对此，我们的选择是用可视化框架ECharts去封装Vue的组件，来实现可视化组件。</p><p>我们再简单介绍一下可视化框架的使用方式，不管你选择用百度的ECharts，还是蚂蚁的G2等框架，在框架的使用方法上，都是类似的。首先，你需要完成图表库的配置，并且填入图表数据，然后把这个数据渲染在一个DOM上就可以了。</p><p>下面的代码展示了一个ECharts的入门案例，代码中我们首先使用echarts.init初始化一个DOM标签；然后在options中配置了图表的结构，包括标题、x轴等；并且我们还通过series配置了页面的销量数据；最后使用myChart.setOption的方式渲染图表就可以了。</p><pre><code class=\"language-html\">&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;title&gt;ECharts&lt;/title&gt;\n    &lt;!-- 引入刚刚下载的 ECharts 文件 --&gt;\n    &lt;script src=\"echarts.js\"&gt;&lt;/script&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;!-- 为 ECharts 准备一个定义了宽高的 DOM --&gt;\n    &lt;div id=\"main\" style=\"width: 600px;height:400px;\"&gt;&lt;/div&gt;\n    &lt;script type=\"text/javascript\"&gt;\n      // 基于准备好的dom，初始化echarts实例\n      var myChart = echarts.init(document.getElementById('main'));\n      // 指定图表的配置项和数据\n      var option = {\n        title: {\n          text: 'ECharts 入门示例'\n        },\n        tooltip: {},\n        legend: {\n          data: ['销量']\n        },\n        xAxis: {\n          data: ['衬衫', '羊毛衫', '雪纺衫', '裤子', '高跟鞋', '袜子']\n        },\n        yAxis: {},\n        series: [\n          {\n            name: '销量',\n            type: 'bar',\n            data: [5, 20, 36, 10, 10, 20]\n          }\n        ]\n      };\n      // 使用刚指定的配置项和数据显示图表。\n      myChart.setOption(option);\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>看上面的代码，我们先配置好图表需要的数据，然后使用setOption初始化图表，之后在浏览器中打开项目主页面，就可以看到下图所示的这种可视化结果。在你理解了ECharts的使用方法后，下一个要解决的问题是，我们该如何在Vue 3中集成这个框架呢？答案就是我们自己实现与ECharts对应的Vue组件即可。</p><p><img src=\"https://static001.geekbang.org/resource/image/4b/8c/4b0df7c9e10023fc216530c47c013d8c.png?wh=1662x868\" alt=\"图片\"></p><p>在Vue 3中集成ECharts的最简单的方式，就是封装一个Chart组件，把上面代码中的option配置以参数的形式传递给Chart组件，然后组件内部进行渲染即可。</p><p>我们还是结合代码直观体验一下。在下面的代码中，template设置了一个普通的div作为容器，通过mount和onUnmounted生命周期内部去初始化图表，实现ECharts框架中图表的渲染和清理，然后initChart内部使用echart的API进行渲染，这样就实现了图表的渲染。</p><pre><code class=\"language-html\">&lt;template&gt;\n  &lt;div ref=\"chartRef\" class=\"chart\"&gt;&lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script setup&gt;\nimport * as echarts from 'echarts'\nimport {ref,onMounted,onUnmounted} from 'vue'\n// 通过ref获得DOM\nlet chartRef = ref()\nlet myChart \nonUnmounted(()=&gt;{\n  myChart.dispose()\n  myChart = null\n})\nonMounted(()=&gt;{\n    myChart = echarts.init(chartRef.value)\n     const option = {\n        tooltip: {\n            trigger: 'item'\n        },\n        color: ['#ffd666', '#ffa39e', '#409EFF'],\n        // 饼图数据配置\n        series: [\n            {\n                name: '前端课程',\n                type: 'pie',\n                radius: '70%',\n                data: [\n                    {value: 43340, name: '重学前端'},\n                    {value: 7003, name: 'Javascript核心原理解析'},\n                    {value: 4314, name: '玩转Vue3全家桶'}\n                ]\n            }\n        ]\n    }\n    myChart.setOption(option)\n})\n&lt;/script&gt;\n</code></pre><p>在上面，我们虽然实现了可视化组件的封装，但因为逻辑并不复杂，所以我们的实现还比较简略。</p><p>我们当然可以尝试去实现一下更详细的可视化组件封装，但因为ECharts是一个非常复杂的可视化框架，有饼图，地图等不同的图表类型，如果引入ECharts全部代码的话，项目的体积会变得非常臃肿。所以，如果我们能按照不同的图表类型按需引入ECharts，那么除了能够让组件使用起来更方便之外，整体项目的包的大小也会优化很多。</p><h2>指令的封装</h2><p>接下来，我们再介绍一下指令增强型组件的封装。</p><p>比如我们常见的图片懒加载的需求，这一需求的实现方式就是在img的标签之上，再加上一个v-lazy的属性。而图片懒加载和指令增强型组件的封装的关系在于，v-lazy指令的使用方式是在HTML标签上新增一个属性。Vue内置的指令我们已经很熟悉了，包括v-if、v-model等等。像图片懒加载这种库和DOM绑定，但是又没有单独的组件渲染逻辑的情况，通常在Vue中以指令的形式存在。</p><p>在Vue中注册指令和组件略有不同，下面的代码中我们注册实现了v-focus指令，然后在input标签中加上v-focus指令，在指令加载完毕后，鼠标会自动聚焦到输入框上，这个实现在登录注册窗口中很常见。</p><pre><code class=\"language-javascript\">// 注册一个全局自定义指令 `v-focus`\napp.directive('focus', {\n  // 当被绑定的元素挂载到 DOM 中时……\n  mounted(el) {\n    // 聚焦元素\n    el.focus()\n  }\n})\n</code></pre><p>指令的生命周期和组件类似，首先我们要让指令能够支持Vue的插件机制，所以我们需要在install函数内注册lazy指令。这种实现Vue插件的方式，在vuex和vue-router两讲中已经带你学习过了，这里的代码里我们使用install方法，在install方法的内部去注册lazy指令，并且实现了mounted、updated、unmounted三个钩子函数。</p><pre><code class=\"language-javascript\">const lazyPlugin = {\n  install (app, options) {\n    app.directive('lazy', {\n      mounted: ...,\n      updated: ...,\n      unmounted: ...\n    })\n  }\n}\n</code></pre><p>我们通过lazy指令获取到当前图片的标签，并且计算图片的位置信息，判断图片是否在首页显示。如果不在首页的话，图片就加载一个默认的占位符就可以了，并且在页面发生变化的时候，重新进行计算，这样就实现了页面图片的懒加载。</p><p>与懒加载类似的，还有我们组件库中常用的v-loading指令，它用来显示组件内部的加载状态，我们在Element3中。也有类似的指令效果，下面的代码中，我们注册了loadingDirective指令，并且注册了mounted、updated、unmounted三个钩子函数，通过v-loading的值来对显示效果进行切换，实现了组件内部的loading状态。</p><p>动态切换的Loading组件能够显示一个circle的div标签，通过v-loading指令的注册，在后续表格、表单等组件的提交状态中，加载状态就可以很方便地使用v-loading来实现。</p><pre><code class=\"language-javascript\">const loadingDirective = {\n  mounted: function (el, binding, vnode) {\n    const mask = createComponent(Loading, {\n      ...options,\n      onAfterLeave() {\n        el.domVisible = false\n        const target =\n          binding.modifiers.fullscreen || binding.modifiers.body\n            ? document.body\n            : el\n        removeClass(target, 'el-loading-parent--relative')\n        removeClass(target, 'el-loading-parent--hidden')\n      }\n    })\n    el.options = options\n    el.instance = mask.proxy\n    el.mask = mask.proxy.$el\n    el.maskStyle = {}\n\n    binding.value &amp;&amp; toggleLoading(el, binding)\n  },\n\n  updated: function (el, binding) {\n    el.instance.setText(el.getAttribute('element-loading-text'))\n    if (binding.oldValue !== binding.value) {\n      toggleLoading(el, binding)\n    }\n  },\n\n  unmounted: function () {\n    el.instance &amp;&amp; el.instance.close()\n  }\n}\n\nexport default {\n  install(app) {\n    // if (Vue.prototype.$isServer) return\n    app.directive('loading', loadingDirective)\n  }\n}\n</code></pre><h2>引入第三方库的注意事项</h2><p>我们封装第三方库的目的是实现第三方框架和Vue框架的融合，提高开发效率。这里我跟你聊几个和引入第三方库相关的注意事项。</p><p>首先，无论是引用第三方库还是你自己封装的底层库，在使用它们之初就要考虑到项目的长期可维护性；其次，尽可能不要因为排期等问题，一股脑地把第三方库堆在一起，虽然这样做可以让项目在早期研发进度上走得很快，但这样会导致项目中后期的维护成本远远大于重写一遍代码xxx的成本。</p><p>然后是Vue中的mixin，extends机制能不用就不用，这两个API算是从Vue 2时代继承下来的产物，都是扩展和丰富Vue 2中this关键字，在项目复杂了之后，mixin和extends隐式添加的API无从溯源，一旦多个mixin有了命名冲突，调试起来难度倍增。</p><p>项目中的全局属性也尽可能少用，全局变量是最原始的共享数据的方法，Vue 3中我们使用app.config.globalProperties.x注册全局变量，要少用它的主要原因也是项目中的全局变量会极大的提高维护成本。有些监控场景必须要用到，就要把所有注册的全局变量放在一个独立的文件去管理。</p><p>最后，我们引入第三方框架和库的时候一定要注意按需使用，比如我们只用到了ECharts中的某几种类型的图，也只用到了Element3中的部分组件。现在引入全部代码的方式会让项目体积越来越大，关于代码体积优化的内容，我们在18讲谈性能优化时也会详细介绍。</p><h2>总结</h2><p>今天的这一讲的内容就学完了，我们来复习一下今天学到的知识。首先，我们介绍了Vue中如何封装第三方工具框架，比如axios，NProgress等，这些框架和Vue耦合性不强，直接引入使用即可。然后，我讲到了Vue中封装可视化组件库的方式，也就是把第三方库放在Vue的组件内部执行。</p><p>就像对于ECharts、wangEditor等成熟的框架来说，对这些框架进行Vue 3框架的适配工作，主要适配的载体就是组件。你可以选择直接透传所有option配置来做一个很浅的封装，也可以针对需要用的组件类型逐个封装，比如ECharts可以封装Pie，Bar等不同类型的组件。</p><p>之后我们讲解了指令增强型组件的封装，这种库和DOM绑定，但是又没有单独的组件渲染逻辑，通常在Vue中以指令的形式存在，比较常见的就是图片懒加载指令以及loading指令，我们项目中也会用到这两个指令来增强组件。</p><p>最后，我也给你介绍了一些引入第三方库时，需要你注意的事项，例如<strong>从项目开始之初就要考虑到长期维护的成本，不要一股脑地堆砌代码，要学会全面使用Composition API 组织代码、少用全局变量，以及不要引入第三方库全部代码，这些都是很值得你注意的地方</strong>。</p><h2>思考题</h2><p>最后留一个思考题，你的项目中还有什么第三方框架需要引入呢？大家可以在评论区分享你的答案，也欢迎你把这一讲的内容分享给你的同事、朋友们。</p>","neighbors":{"left":{"article_title":"16 | 实战痛点2：项目开发中的权限系统","id":447579},"right":{"article_title":"18 | 实战痛点4：Vue 3项目中的性能优化","id":455487}},"comments":[{"had_liked":false,"id":323059,"user_name":"南山","can_delete":false,"product_type":"c1","uid":1239362,"ip_address":"","ucode":"1B5EF54A2A56F8","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/42/1de79e71.jpg","comment_is_top":false,"comment_ctime":1637717499,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"53177325051","product_id":100094401,"comment_content":"1. print.js, 打印<br>2. pdfjs, 生成pdf<br>3. html2canvas, 生成海报","like_count":13,"discussions":[{"author":{"id":2279433,"avatar":"https://static001.geekbang.org/account/avatar/00/22/c8/09/b34b1473.jpg","nickname":"鱼腩","note":"","ucode":"54C97E73A75854","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537649,"discussion_content":"刚好有需要实现类似fastreport的需求，感谢","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1639129056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1848314,"avatar":"","nickname":"一块小砖头","note":"","ucode":"4FA84F57FDEC18","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533278,"discussion_content":"分需求吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637830862,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323287,"user_name":"山雨","can_delete":false,"product_type":"c1","uid":1347997,"ip_address":"","ucode":"FDD8F75F130394","user_header":"https://static001.geekbang.org/account/avatar/00/14/91/9d/ff31f7a1.jpg","comment_is_top":false,"comment_ctime":1637820796,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"35997559164","product_id":100094401,"comment_content":"老师的代码库的代码啥时候同步课程更新啊","like_count":8,"discussions":[{"author":{"id":1392788,"avatar":"https://static001.geekbang.org/account/avatar/00/15/40/94/afd0919c.jpg","nickname":"起風了","note":"","ucode":"2B49D13356A1F7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539111,"discussion_content":"同问,上一节课开始有些模糊了,这节课到了指令那里可能有些粗略,也有点不太清楚具体指令那个代码是写到哪个文件夹的哪个文件,怎么使用,效果怎么样","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1639614581,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1321527,"avatar":"https://static001.geekbang.org/account/avatar/00/14/2a/37/10fd1b32.jpg","nickname":"岑忠远","note":"","ucode":"535CBA30464FF9","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560063,"discussion_content":"代码库在哪里啊，找不到","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649151504,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2338500,"avatar":"https://static001.geekbang.org/account/avatar/00/23/ae/c4/eafb9ba1.jpg","nickname":"长寿","note":"","ucode":"5FBDF9E65D2F3F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1321527,"avatar":"https://static001.geekbang.org/account/avatar/00/14/2a/37/10fd1b32.jpg","nickname":"岑忠远","note":"","ucode":"535CBA30464FF9","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":581996,"discussion_content":"在github搜geektime-vue-course应该就能搜到了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659109880,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":560063,"ip_address":"陕西"},"score":581996,"extra":""}]}]},{"had_liked":false,"id":323095,"user_name":"柒月","can_delete":false,"product_type":"c1","uid":1371240,"ip_address":"","ucode":"839A8F88C376A3","user_header":"https://static001.geekbang.org/account/avatar/00/14/ec/68/06d59613.jpg","comment_is_top":false,"comment_ctime":1637726002,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"35997464370","product_id":100094401,"comment_content":"记个坑：<br>&#47;&#47; 通过ref获得DOM<br>let chartRef = ref() &#47;&#47; 这里的名称 必须与 ref=&#39;chartRef&#39; 一致","like_count":9,"discussions":[{"author":{"id":1232529,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ce/91/3675b275.jpg","nickname":"夹克","note":"","ucode":"1E7FE8AA25C3FC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547387,"discussion_content":"这里我理解上是setup 函数做的转换，本身就是 this.$refs.chartRef，如果名称不一致，会导致关联不上，从而变成降级为的ref 响应式。\n具体可以参考https://v3.cn.vuejs.org/guide/composition-api-template-refs.html","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1642654987,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2338500,"avatar":"https://static001.geekbang.org/account/avatar/00/23/ae/c4/eafb9ba1.jpg","nickname":"长寿","note":"","ucode":"5FBDF9E65D2F3F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581997,"discussion_content":"这个在官方文档中template ref的章节应该有说过吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659109955,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"陕西"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1267296,"avatar":"https://static001.geekbang.org/account/avatar/00/13/56/60/17bbbcf3.jpg","nickname":"softbaddog","note":"","ucode":"7030262C82F900","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548255,"discussion_content":"&lt;Chart style=&#34;height: 500px&#34; ref=&#39;chartRef&#39;&gt;&lt;/Chart&gt; 这样设置就能出图了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643101321,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323083,"user_name":"ll","can_delete":false,"product_type":"c1","uid":1296458,"ip_address":"","ucode":"57C5DAC5B51036","user_header":"https://static001.geekbang.org/account/avatar/00/13/c8/4a/3a322856.jpg","comment_is_top":false,"comment_ctime":1637722556,"is_pvip":true,"discussion_count":5,"race_medal":0,"score":"18817591740","product_id":100094401,"comment_content":"很棒，点赞，看完以后说点感受：<br>1. 关于&quot;一股脑的引入第三方库...&quot;这段描述，一看就是有故事的人，哈哈，人间真实。<br>2. mixin，extends 机制这个点，可以结合《14 Typescript...》的思考题。这个机制是 js 作为动态语言 <br>    的优点，但当项目规模复杂后，就成了缺点。<br>    mixin 的实现的原理就是将传入 mixin 和 vue 实例的 options 合并，然后返回 vue 实例。<br>3. 回头看看标题，这几节课确实戳到”痛点“很精彩。","like_count":4,"discussions":[{"author":{"id":2818001,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/ff/d1/7a4a6f4f.jpg","nickname":"风一样","note":"","ucode":"5EA5129D487E43","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536617,"discussion_content":"你是水军吧？每篇文章都说很棒，看不出来呀，代码都不全，完全看不懂，特别是v-loading那一段，把代码扔到那里，没有任何解释，也没有讲详细，提问老师也不回答，真是无语了","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1638837802,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2893706,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/27/8a/d65e34c4.jpg","nickname":"木子初秋","note":"","ucode":"6DDCB55232E1B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549976,"discussion_content":"确实不全 我也是在github找到大圣的代码 但提到的痛点又确实是其它视频难以企及的 越是工作了越是清晰这些问题 个人观点 看自身基础决定自己收获","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1644318073,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2818001,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/ff/d1/7a4a6f4f.jpg","nickname":"风一样","note":"","ucode":"5EA5129D487E43","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536804,"discussion_content":"我只能呵呵了，智商是个好东西，你说的很对","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638871578,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1296458,"avatar":"https://static001.geekbang.org/account/avatar/00/13/c8/4a/3a322856.jpg","nickname":"ll","note":"","ucode":"57C5DAC5B51036","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536649,"discussion_content":"@风一样 这位朋友，关于你的回复，我有几点回复：\n1. 我的评论仅代表个人，欢迎就事论事。你可以跟我讨论，说我的评论太水，纯属混子， \n    我的态度是欢迎的，但仅限于欢迎讨论，讨论，讨论，重要的事说...对吧。\n2. 我也是花钱来的，钱也是自己挣的，不是从天上掉下来的。你的所有质疑都合理，但 \n    是说错对象了。换句俗话，“跟我说不着，懂？“ 你要非跟我说我能说啥？只能回复：” \n    智商是个好东西？“\n3. 不知道你们的学是怎么上的，举个例子，我上学那会，有的同学考清北，有的考不上清 \n    北，怎么？考清北的给钱了？没考上的没给钱？... 后面要说的省略了，有兴趣你可以 \n    猜猜，当然猜不猜由你。\n4. 从我有限而不成熟工作经验来说，文章的有些点，之前我在工作中遇到过但没有深究， \n   也不知道原理。现在文章中看到了，再回头想想，有种想通的感觉，重要的是方向。个 \n   人浅见，对阅课无数的大神来说不足为道。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638841379,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2818001,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/ff/d1/7a4a6f4f.jpg","nickname":"风一样","note":"","ucode":"5EA5129D487E43","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536620,"discussion_content":"我听过很多讲座视频，慕课网的，哔哩哔哩的，都听过，你们算是最次的，不仅讲的不周全，代码也不全，也没有视频，这样糊弄听众，你觉得好吗？而且我们都是花了钱听的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638837996,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323017,"user_name":"费城的二鹏","can_delete":false,"product_type":"c1","uid":1101293,"ip_address":"","ucode":"DE768A0CC3053D","user_header":"https://static001.geekbang.org/account/avatar/00/10/cd/ed/825d84ee.jpg","comment_is_top":false,"comment_ctime":1637709541,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18817578725","product_id":100094401,"comment_content":"看完这节课领悟到一个思路，向项目中添加代码与引入一定要克制，尽可能少的添加，避免项目膨胀，这样能提升可维护行。","like_count":4},{"had_liked":false,"id":323025,"user_name":"molingwen","can_delete":false,"product_type":"c1","uid":1201928,"ip_address":"","ucode":"FF27456FE4AD01","user_header":"https://static001.geekbang.org/account/avatar/00/12/57/08/b5e02978.jpg","comment_is_top":false,"comment_ctime":1637712810,"is_pvip":true,"replies":[{"id":"117372","content":"收到，下次录音一定注意","user_name":"作者回复","comment_id":323025,"uid":"1003715","ip_address":"","utype":1,"ctime":1637932759,"user_name_real":"编辑"}],"discussion_count":3,"race_medal":0,"score":"14522614698","product_id":100094401,"comment_content":"课程知识很精彩，就是语速太快了，完全跟不上节奏。适当有点停顿应该效果更好👌🏻","like_count":3,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533680,"discussion_content":"收到，下次录音一定注意","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637932759,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1501385,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","nickname":"听水的湖","note":"","ucode":"B1759F90165D81","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532914,"discussion_content":"语速可以调0.75的","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1637731854,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":4}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2029732,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/aKhm8wm0kgXI0C2JbicHllLWpjhJhVFLrnZgDCumohPYZTNlUEXLhiaZKZq7QjcXkwBQbOoUaC8vAcWicuJ1crMiaQ/132","nickname":"Geek_5b85ff","note":"","ucode":"6942B7851B5301","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532871,"discussion_content":"可以暂停啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637723653,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323021,"user_name":"海阔天空","can_delete":false,"product_type":"c1","uid":1327016,"ip_address":"","ucode":"16C87A0052A08B","user_header":"https://static001.geekbang.org/account/avatar/00/14/3f/a8/8da58e53.jpg","comment_is_top":false,"comment_ctime":1637711213,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14522613101","product_id":100094401,"comment_content":"引入使用第三方库的原则应该是按需引用，按照项目业务需求合理封装。不要为了图省事，引入很多在项目中没有用的库。<br>","like_count":3},{"had_liked":false,"id":326507,"user_name":"陈豆","can_delete":false,"product_type":"c1","uid":2258618,"ip_address":"","ucode":"7E2A0766B035C7","user_header":"https://static001.geekbang.org/account/avatar/00/22/76/ba/2373075b.jpg","comment_is_top":false,"comment_ctime":1639547141,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10229481733","product_id":100094401,"comment_content":"lodash.js,day.js","like_count":2},{"had_liked":false,"id":323020,"user_name":"Kevin","can_delete":false,"product_type":"c1","uid":1129186,"ip_address":"","ucode":"8FE9CE88EA0C57","user_header":"https://static001.geekbang.org/account/avatar/00/11/3a/e2/c48bd3b7.jpg","comment_is_top":false,"comment_ctime":1637711085,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10227645677","product_id":100094401,"comment_content":"统计打点服务：友盟等；<br>业务方刷：网易易盾等；<br>视觉ui：element ant 等；<br>…","like_count":2},{"had_liked":false,"id":323615,"user_name":"Geek_908201","can_delete":false,"product_type":"c1","uid":2671119,"ip_address":"","ucode":"13E3C324944863","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJY65kJ94nUMoCeYkibrl8y5j6UiclGAGgVxYGW1ibP9j3sWS1B1QibW89sIeAEYOia50zqTGYXO6kwmSQ/132","comment_is_top":false,"comment_ctime":1638022056,"is_pvip":false,"replies":[{"id":"118377","content":"createComponent其实是element3的工具函数，代码链接在这里，<br>https:&#47;&#47;github.com&#47;hug-sun&#47;element3&#47;blob&#47;master&#47;packages&#47;element3&#47;src&#47;composables&#47;component.js#L11<br>其实就是使用h包裹了一下组件","user_name":"作者回复","comment_id":323615,"uid":"1003715","ip_address":"","utype":1,"ctime":1639401586,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"5932989352","product_id":100094401,"comment_content":"这个  createComponent  API  具体是怎么使用的啊？有相关的文档连接吗","like_count":1,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538377,"discussion_content":"createComponent其实是element3的工具函数，代码链接在这里，\nhttps://github.com/hug-sun/element3/blob/master/packages/element3/src/composables/component.js#L11\n其实就是使用h包裹了一下组件","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639401586,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354254,"user_name":"张兴平","can_delete":false,"product_type":"c1","uid":3071869,"ip_address":"四川","ucode":"6934CC48BB06CA","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqicvexTjMIicW0PKicib0KPFgYR59TYp07H5QXkjvzCP1RwPhOAicoWOymvbZjvSQYYDDwjgu2Or2iaMMw/132","comment_is_top":false,"comment_ctime":1660217632,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1660217632","product_id":100094401,"comment_content":"<br>npm install nprogress -D<br>请问这条命令将包安装在开发依赖里，这样打包时，能打进去吗","like_count":0},{"had_liked":false,"id":326634,"user_name":"起風了","can_delete":false,"product_type":"c1","uid":1392788,"ip_address":"","ucode":"2B49D13356A1F7","user_header":"https://static001.geekbang.org/account/avatar/00/15/40/94/afd0919c.jpg","comment_is_top":false,"comment_ctime":1639614559,"is_pvip":false,"replies":[{"id":"118691","content":"这几天我把手写vue源码的稿子写完后会把实战篇的代码更新一版 ","user_name":"作者回复","comment_id":326634,"uid":"1003715","ip_address":"","utype":1,"ctime":1639644354,"user_name_real":"编辑"}],"discussion_count":3,"race_medal":0,"score":"1639614559","product_id":100094401,"comment_content":"大圣老师好,代码库可以更新一下吗,上一节课开始有些模糊了,这节课到了指令那里可能有些粗略,也有点不太清楚具体指令那个代码是写到哪个文件夹的哪个文件,怎么使用,效果怎么样","like_count":0,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539222,"discussion_content":"这几天我把手写vue源码的稿子写完后会把实战篇的代码更新一版 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639644355,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2151835,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Elbia32dDicdKWV6VsLicxILVzYbIBCbgx388wibF5GsZjlx7nB3JibE67jKVyThLS82dia5JXial0b24oRe48fd9V7lA/132","nickname":"鹑尾","note":"","ucode":"5BD41404904616","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":544812,"discussion_content":"大圣老师好，请问实战篇代码的仓库地址是?好像geektime-vue-course这个仓库里没有实战篇的代码","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641721770,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":539222,"ip_address":""},"score":544812,"extra":""}]},{"author":{"id":1387735,"avatar":"https://static001.geekbang.org/account/avatar/00/15/2c/d7/5b1b09fd.jpg","nickname":"Jacky","note":"","ucode":"B259184BC9E7B7","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578088,"discussion_content":"你好，《玩转vue3全家桶》的代码库的地址能发一下吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656502724,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323414,"user_name":"台灯下的我","can_delete":false,"product_type":"c1","uid":2328879,"ip_address":"","ucode":"3FA066692FC55C","user_header":"https://static001.geekbang.org/account/avatar/00/23/89/2f/6211e738.jpg","comment_is_top":false,"comment_ctime":1637894284,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637894284","product_id":100094401,"comment_content":"1：引入库的目的：提高开发效率，但不要为了图快，一股脑堆第三方引入，尽量做到按需引入<br><br>2：尽量不要用mixins、extend等方法，不利于维护<br><br>3：尽量不要使用全局变量，可以用单独js文件配置常量<br>","like_count":0},{"had_liked":false,"id":323071,"user_name":"InfoQ_e521a4ce8a54","can_delete":false,"product_type":"c1","uid":2128328,"ip_address":"","ucode":"6D8988948DD291","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIkBhCDbibPDmDTEW6Uia1LAEOcFf75QxA897gcL4oXFMOwgsqFwf7rhPoUoJWgICl0xFT8Iz2cuWRg/132","comment_is_top":false,"comment_ctime":1637719595,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1637719595","product_id":100094401,"comment_content":"Loading 组件git地址：https:&#47;&#47;github.com&#47;hug-sun&#47;element3&#47;blob&#47;master&#47;packages&#47;element3&#47;packages&#47;loading&#47;directive.js#L36","like_count":1,"discussions":[{"author":{"id":2338500,"avatar":"https://static001.geekbang.org/account/avatar/00/23/ae/c4/eafb9ba1.jpg","nickname":"长寿","note":"","ucode":"5FBDF9E65D2F3F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581998,"discussion_content":"感觉实战篇里的挺多代码都是element3-admin里的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659110116,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}