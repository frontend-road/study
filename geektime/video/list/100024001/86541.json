{"id":86541,"title":"30 | åªè¿è¡Œä¸€æ¬¡","content":"<h1>è¯¾ä»¶åŠæºä»£ç åœ°å€</h1><p><a href=\"https://gitee.com/geektime-geekbang/go_learning\">https://gitee.com/geektime-geekbang/go_learning</a></p><h2>ä¹¦ç›®æ¨è</h2><p><a href=\"time://mall?url=https%3A%2F%2Fh5.youzan.com%2Fv2%2Fgoods%2F1ycmk3uob0ryw\">ã€Šè®¡ç®—æœºç¨‹åºçš„æ„é€ å’Œè§£é‡Šã€‹</a></p>","comments":[{"had_liked":false,"id":117757,"user_name":"æˆ‘è¿˜æ˜¯ä¸æ‡‚","can_delete":false,"product_type":"c3","uid":1145651,"ip_address":"","ucode":"995DCA35151140","user_header":"https://wx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLCSARGdN0NI90E7VKY7B3GibjeINk8wpQRp3C7qQuRCtrtWLxxcKtAGDaZMutyiauzWvR7pwEm1oUaw/132","comment_is_top":false,"comment_ctime":1564125085,"is_pvip":false,"replies":[{"id":43157,"content":"å…¶å®objå·²ç»æ˜¯ä¸€ä¸ªæŒ‡é’ˆå˜é‡äº†ï¼Œä½ å¯ä»¥çœ‹çœ‹GetSingleObjçš„è¿”å›å€¼å®šä¹‰ï¼Œæ‰€ä»¥&amp;objå°±ä¸å¯¹äº†ï¼Œå˜æˆäº†æŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1564148001,"ip_address":"","comment_id":117757,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"ä¸ºä»€ä¹ˆä¸èƒ½è¿™æ ·å†™ä¸æ˜¯å–åœ°å€ä¹ˆï¼Œåœ°å€è¿˜ä¸åŒ\nfunc TestSingle(t *testing.T) {\n\tvar wg sync.WaitGroup\n\tfor i := 0; i &lt; 10; i++ {\n\t\twg.Add(1)\n\t\tgo func() {\n\t\t\tobj := GetSingleObj()\n\t\t\t&#47;&#47;fmt.Printf(&quot;%x\\n&quot;, unsafe.Pointer(obj))\n\t\t\tfmt.Println(&amp;obj)\n\t\t\twg.Done()\n\t\t}()\n\t}\n\twg.Wait()\n}\n\n=== RUN   TestSingle\ncreate obj\n0xc0000b2000\n0xc000006040\n0xc000006048\n0xc000006050\n0xc000006058\n0xc000006060\n0xc000006068\n0xc000006080\n0xc000006070\n0xc000006078\n--- PASS: TestSingle (0.00s)\nPASS\n","like_count":7,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460105,"discussion_content":"å…¶å®objå·²ç»æ˜¯ä¸€ä¸ªæŒ‡é’ˆå˜é‡äº†ï¼Œä½ å¯ä»¥çœ‹çœ‹GetSingleObjçš„è¿”å›å€¼å®šä¹‰ï¼Œæ‰€ä»¥&amp;amp;objå°±ä¸å¯¹äº†ï¼Œå˜æˆäº†æŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564148001,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205623,"user_name":"çœŸåä¸å«é»„é‡‘","can_delete":false,"product_type":"c3","uid":1174066,"ip_address":"","ucode":"FB611FC98F5BA7","user_header":"https://static001.geekbang.org/account/avatar/00/11/ea/32/1fd102ec.jpg","comment_is_top":false,"comment_ctime":1586689629,"is_pvip":false,"replies":[{"id":78405,"content":"ä¸ä¼šçš„ã€‚ ç¬¬äºŒæ¬¡çš„è°ƒç”¨ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°åˆå§‹åŒ–è¿‡ç¨‹å®Œæˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1587777430,"ip_address":"","comment_id":205623,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"æ„Ÿè°¢è€å¸ˆï¼Œè®²å¾—å¾ˆå¥½~\næœ‰ä¸€ä¸ªå°é—®é¢˜æƒ³è¯·æ•™ï¼š\nè¿™ä¸ªå•ä¾‹çš„ä¾‹å­ï¼Œåº”è¯¥æ˜¯å­˜åœ¨returnçš„objä¸ºæœªåˆå§‹åŒ–çš„æƒ…å†µå¯¹å—ï¼Ÿå› ä¸ºonce.Doä¸­å¦‚æœæ‰§è¡Œè€—æ—¶æ“ä½œï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªfunctionè¢«ç¬¬äºŒæ¬¡è°ƒç”¨æ—¶ï¼Œå¯èƒ½åˆå§‹åŒ–è¿˜æœªå®Œæˆï¼Œä½†æ˜¯å¹¶ä¸ä¼šè¿è¡Œç¬¬äºŒæ¬¡Onceä¸­çš„ä»£ç ï¼Œé‚£ä¹ˆè¿”å›çš„å°±æ˜¯æœªåˆå§‹åŒ–çš„objectã€‚å› æ­¤å®é™…ç”Ÿäº§ä¸­åº”è¯¥ä¸èƒ½å¤Ÿè¿™æ ·ä½¿ç”¨æ˜¯å—","like_count":2,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491532,"discussion_content":"ä¸ä¼šçš„ã€‚ ç¬¬äºŒæ¬¡çš„è°ƒç”¨ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°åˆå§‹åŒ–è¿‡ç¨‹å®Œæˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587777430,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1890825,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/da/09/5fc3b526.jpg","nickname":"éƒ­æ³½é‘«ğŸ¤","note":"","ucode":"40B9981EEC524F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":652058,"discussion_content":"sync.Once æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œå†…éƒ¨æœ‰ä¸€ä¸ªå¸ƒå°”å€¼å’Œä¸€ä¸ªäº’æ–¥é”ï¼Œç”¨äºç¡®ä¿åˆå§‹åŒ–æ“ä½œåªæœ‰ä¸€æ¬¡","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1728179754,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":272026,"user_name":"å°å¯å­ã€‚(â‰¥3â‰¤)","can_delete":false,"product_type":"c3","uid":1206545,"ip_address":"","ucode":"6D978BDCBB2862","user_header":"https://static001.geekbang.org/account/avatar/00/12/69/11/831cec7d.jpg","comment_is_top":false,"comment_ctime":1609913098,"is_pvip":false,"replies":[{"id":99521,"content":"ç²˜è´´ä¸€ä¸‹ä½ çš„ä»£ç çœ‹çœ‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è”¡è¶…","uid":1008262,"ctime":1610891381,"ip_address":"","comment_id":272026,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"æˆ‘æŠŠsingleton ä¼ å€¼ç»™å¦ä¸€ä¸ª func, ç„¶åé‡Œé¢ä¿®æ”¹singleton ä½†æ˜¯åœ¨å¤–é¢å´å¹¶æ²¡ä½“ç°å‡ºæ–°å€¼ã€‚ è€Œä¸”åœ°å€ä¹Ÿå˜äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513124,"discussion_content":"ç²˜è´´ä¸€ä¸‹ä½ çš„ä»£ç çœ‹çœ‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610891381,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187804,"user_name":"å¼ sir","can_delete":false,"product_type":"c3","uid":1209431,"ip_address":"","ucode":"52958DF6705208","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJSmAhbvPia1msvk91m5rQLTpicY85f2moFMCcAibictL3OeiaaVREadpHN2O3FwicmylwiclTUJJa1peS1Q/132","comment_is_top":false,"comment_ctime":1584246976,"is_pvip":false,"replies":[{"id":74521,"content":"å¯ä»¥ç”¨åœ¨ç±»ä¼¼äºå•ä¾‹æ¨¡å¼çš„åœºæ™¯ã€‚é¿å…èµ„æºçš„åå¤åˆå§‹åŒ–ç­‰","user_name":"ä½œè€…å›å¤","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1585358345,"ip_address":"","comment_id":187804,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"æ‚¨å¥½ï¼Œæˆ‘æƒ³é—®ä¸‹ï¼Œsync.onceéƒ½ç”¨åœ¨å“ªäº›åœºæ™¯ä¸‹ï¼Œèƒ½ä¸¾ä¸ªä¾‹å­å—","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487247,"discussion_content":"å¯ä»¥ç”¨åœ¨ç±»ä¼¼äºå•ä¾‹æ¨¡å¼çš„åœºæ™¯ã€‚é¿å…èµ„æºçš„åå¤åˆå§‹åŒ–ç­‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585358345,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82453,"user_name":"manatee","can_delete":false,"product_type":"c3","uid":1041112,"ip_address":"","ucode":"708D90E7A265BD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e2/d8/f0562ede.jpg","comment_is_top":false,"comment_ctime":1554216498,"is_pvip":false,"replies":[{"id":30000,"content":"å‰æœŸä»£ç çš„ç« èŠ‚åˆ’åˆ†å’Œè§†é¢‘æœ‰æ‰€ä¸ä¸€è‡´ã€‚ä½ è¦ä»¥ä»£ç ç« èŠ‚é‡Œçš„å­ç›®å½•çš„åç§°æ¥æ‰¾ä¸€ä¸‹ã€‚ä»£ç ä¼šå°½å¿«è”ç³»å¹³å°ä¸Šä¼ ","user_name":"ä½œè€…å›å¤","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1554421875,"ip_address":"","comment_id":82453,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"éº»çƒ¦è€å¸ˆæŠŠ20è¯¾åçš„ä»£ç ä¸Šä¼ ä¸€ä¸‹github,å¦å¤–æƒ³è¯·é—®ä¸‹è§†é¢‘ä¸­fmt.Printf(&quot;%x\\n&quot;, unsafe.Pointer(obj))unsafe.Pointerçš„ç”¨æ³•æ˜¯æ€ä¹ˆæ ·çš„å‘¢","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445596,"discussion_content":"å‰æœŸä»£ç çš„ç« èŠ‚åˆ’åˆ†å’Œè§†é¢‘æœ‰æ‰€ä¸ä¸€è‡´ã€‚ä½ è¦ä»¥ä»£ç ç« èŠ‚é‡Œçš„å­ç›®å½•çš„åç§°æ¥æ‰¾ä¸€ä¸‹ã€‚ä»£ç ä¼šå°½å¿«è”ç³»å¹³å°ä¸Šä¼ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554421875,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1020525,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","nickname":"escray","note":"","ucode":"1F4204930E47C4","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366317,"discussion_content":"æˆ‘çš„ç†è§£ unsafe.Pointer å°±æ˜¯å–å¯¹è±¡çš„åœ°å€\nå®˜æ–¹æ–‡æ¡£æœ‰æ›´è¯¦ç»†çš„è§£é‡Š\nhttps://golang.org/pkg/unsafe/#Pointer","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618027689,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82347,"user_name":"Vincent","can_delete":false,"product_type":"c3","uid":1437404,"ip_address":"","ucode":"EC72C58FE32369","user_header":"https://static001.geekbang.org/account/avatar/00/15/ee/dc/67838c05.jpg","comment_is_top":false,"comment_ctime":1554188726,"is_pvip":false,"replies":null,"discussion_count":6,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"å°±Griffinå’ŒPlaNï½›Znï½çš„ç•™è¨€ï¼Œåšäº†ä¸‹å®éªŒï¼Œç»“æœæ˜¯è¿™æ ·ï¼š\nå¦‚æœtype Singleton struct {} å®šä¹‰çš„æ˜¯ç©ºç»“æ„ä½“ï¼Œé‚£ä¹ˆæ— è®ºç”¨ä¸ç”¨once.Do()ï¼Œæœ€åå¾—åˆ°çš„objåœ°å€éƒ½æ˜¯ä¸€æ ·çš„ã€‚å½“ç„¶ä¸ç”¨once.Do()æ—¶ï¼Œé™¤äº†è¾“å‡º10ä¸ªç›¸åŒçš„åœ°å€ï¼Œè¿˜ä¼šè¾“å‡º10æ¬¡â€œCreate objâ€œã€‚\nå°†Singletonç»“æ„ä½“é‡Œæ·»åŠ å†…å®¹åï¼Œæ¯”å¦‚type Singleton struct {a bool}ï¼Œå†åšå®éªŒï¼Œæ¯æ¬¡è¿è¡Œå°±ä¼šå¾—åˆ°ä¸åŒçš„åœ°å€äº†ã€‚","like_count":12,"discussions":[{"author":{"id":1664296,"avatar":"https://static001.geekbang.org/account/avatar/00/19/65/28/1da308e3.jpg","nickname":"Kai","note":"","ucode":"84BABA6845AA13","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":152265,"discussion_content":"https://www.golangtc.com/t/575442b8b09ecc02f7000057","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1579955735,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1210890,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7a/0a/0ce5c232.jpg","nickname":"å•","note":"","ucode":"8F08E2CB81C4C3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583696,"discussion_content":"å¯¹ï¼Œè¿™ä¸ªåœ°æ–¹ä¸èƒ½ç”¨ç©ºç»“æ„ä½“æ¥åšæµ‹è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660295951,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1073236,"avatar":"https://static001.geekbang.org/account/avatar/00/10/60/54/b3eb605b.jpg","nickname":"é˜¿ç‰›","note":"","ucode":"DC8C189FCF3289","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":232999,"discussion_content":"æˆ‘çš„ä»£ç ä¸ºä»€ä¹ˆéƒ½æ˜¯ä¸€ä¸ªåœ°å€å‘€ @Vincent","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586883306,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1614014,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/1ZcgbSZ1Q0eARic4sFq9PRO0rT55MAYUAcBVNK3dE6ficOQViblBlzUTnMJyK2bZbU3IsewnDxKD5Wtrq01DeHnWQ/132","nickname":"Geek_338030","note":"","ucode":"6F2ACB3C528BAA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":12437,"discussion_content":"åˆšå‘ç°singleinstanceæ˜¯å…¨å±€å˜é‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568529836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1614014,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/1ZcgbSZ1Q0eARic4sFq9PRO0rT55MAYUAcBVNK3dE6ficOQViblBlzUTnMJyK2bZbU3IsewnDxKD5Wtrq01DeHnWQ/132","nickname":"Geek_338030","note":"","ucode":"6F2ACB3C528BAA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":12432,"discussion_content":"ç©ºç»“æ„ä½“å’Œä¸æ˜¯ç©ºç»“æ„ä½“ä¸ºä»€ä¹ˆä¼šæœ‰åŒºåˆ«å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568529445,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1027507,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epS4BWsMOb1Bq28XGZkwmrKiczb5QgRor6kjXRUaDqF10pqomriazaheFCZjaXe8aOPibItU4EeTep9g/132","nickname":"å°æ¬¢å­","note":"","ucode":"387DEBAAAF414A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1614014,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/1ZcgbSZ1Q0eARic4sFq9PRO0rT55MAYUAcBVNK3dE6ficOQViblBlzUTnMJyK2bZbU3IsewnDxKD5Wtrq01DeHnWQ/132","nickname":"Geek_338030","note":"","ucode":"6F2ACB3C528BAA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":268218,"discussion_content":"ç©ºç»“æ„ä¸å ç©ºé—´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589731478,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":12432,"ip_address":"","group_id":0},"score":268218,"extra":""}]}]},{"had_liked":false,"id":83461,"user_name":"å¼ºå“¥","can_delete":false,"product_type":"c3","uid":1206726,"ip_address":"","ucode":"3B8DC780FE4EF9","user_header":"https://static001.geekbang.org/account/avatar/00/12/69/c6/513df085.jpg","comment_is_top":false,"comment_ctime":1554609302,"is_pvip":false,"replies":null,"discussion_count":5,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"è¿™ä¸ªè§†é¢‘é‡Œï¼Œä¾‹å­ä¸­çš„javaå•ä¾‹ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œç¼ºå°‘volatileä¿®é¥°å…±äº«å˜é‡çš„ã€‚éœ€è¦ç¦æ­¢é‡æ’åºã€‚","like_count":11,"discussions":[{"author":{"id":1811277,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a3/4d/59390ba9.jpg","nickname":"æ’éª¨","note":"","ucode":"A413CF46211E1F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":598202,"discussion_content":"java8å·²ç»å¯ä»¥ä¿è¯newçš„æ—¶å€™çº¿ç¨‹å®‰å…¨ä¸ä¼šå‡ºç°æŒ‡ä»¤é‡æ’çš„æƒ…å†µäº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1672665404,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1876823,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/X4ib36ADEvj76XaKD4OUY9k15KqWCAVCwibPicBxz6BBUfDrVolpYInn8zFOw3JBPtVw3L4Lkibaf2eLPemwGKzAXA/132","nickname":"Geek_427d0c","note":"","ucode":"D7A04138C4B8CB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":309576,"discussion_content":"ibmæ–‡ä¸­çš„è§‚ç‚¹ï¼Œä¼¼ä¹æ˜¯è¯´åœ¨Java5ä»¥å‰çš„å†…å­˜æ¨¡å‹æœ‰ä½ è¯´çš„è¿™ä¸ªé—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601352196,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1876823,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/X4ib36ADEvj76XaKD4OUY9k15KqWCAVCwibPicBxz6BBUfDrVolpYInn8zFOw3JBPtVw3L4Lkibaf2eLPemwGKzAXA/132","nickname":"Geek_427d0c","note":"","ucode":"D7A04138C4B8CB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":309575,"discussion_content":"https://www.ibm.com/developerworks/java/library/j-dcl/index.html    ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601352032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1354850,"avatar":"https://static001.geekbang.org/account/avatar/00/14/ac/62/37912d51.jpg","nickname":"ä¸œæ–¹å¥‡éª¥","note":"","ucode":"DEE7085F7E55A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":163569,"discussion_content":"å¦ä¸€ä¸ªè®¾è®¡æ¨¡å¼ä¸“æ é‡Œï¼Œäº‰å“¥è®²äº†ï¼Œé«˜ç‰ˆæœ¬çš„Javaä¸éœ€è¦åŠ volatileå…³é”®å­—æ˜¯å¯ä»¥çš„ï¼ŒJVMåšäº†ä¼˜åŒ–ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1581085699,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1082190,"avatar":"https://static001.geekbang.org/account/avatar/00/10/83/4e/17e23752.jpg","nickname":"kkkkkk","note":"","ucode":"70E5CCF8525F08","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1354850,"avatar":"https://static001.geekbang.org/account/avatar/00/14/ac/62/37912d51.jpg","nickname":"ä¸œæ–¹å¥‡éª¥","note":"","ucode":"DEE7085F7E55A4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306538,"discussion_content":"å¤§éƒ¨åˆ†å…¬å¸è¿˜æ˜¯åœ¨ç”¨Java 8ï¼Œä¹Ÿæ²¡æœ‰éƒ½æœ‰Java 15","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600313492,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":163569,"ip_address":"","group_id":0},"score":306538,"extra":""}]}]},{"had_liked":false,"id":124418,"user_name":"è™¢åœ‹æŠ€é†¬","can_delete":false,"product_type":"c3","uid":1056807,"ip_address":"","ucode":"5A192262AA037E","user_header":"https://static001.geekbang.org/account/avatar/00/10/20/27/a6932fbe.jpg","comment_is_top":false,"comment_ctime":1565880766,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"fmt.Printf(&quot;%p\\n&quot;, obj) ä¹Ÿå¯ä»¥è¾“å‡ºåœ°å€\n","like_count":9},{"had_liked":false,"id":80105,"user_name":"Griffin","can_delete":false,"product_type":"c3","uid":1087329,"ip_address":"","ucode":"CF766B92A65261","user_header":"https://static001.geekbang.org/account/avatar/00/10/97/61/34a0da09.jpg","comment_is_top":false,"comment_ctime":1553606147,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"æ„Ÿè§‰å–åœ°å€æœ‰ç‚¹é—®é¢˜ï¼Œå¤šæ¬¡è¿è¡Œå¾—åˆ°çš„åœ°å€æ¯æ¬¡éƒ½ä¸€æ ·ã€‚","like_count":6},{"had_liked":false,"id":80539,"user_name":"PlaNï½›Znï½","can_delete":false,"product_type":"c3","uid":1058941,"ip_address":"","ucode":"DCE554A2B2CDC2","user_header":"https://static001.geekbang.org/account/avatar/00/10/28/7d/2681da13.jpg","comment_is_top":false,"comment_ctime":1553677917,"is_pvip":false,"replies":null,"discussion_count":3,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"æŠŠonce.doæ³¨é‡Šæ‰ä¹‹åï¼Œâ€œCreate objâ€æ˜¯è¾“å‡ºäº†å¤šæ¬¡ï¼Œä½†æ˜¯singleInstanceçš„åœ°å€ä¾ç„¶éƒ½æ˜¯ä¸€æ ·çš„","like_count":2,"discussions":[{"author":{"id":1216486,"avatar":"https://static001.geekbang.org/account/avatar/00/12/8f/e6/932e8a90.jpg","nickname":"Jake","note":"","ucode":"DA16FA2ADA9EAC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342846,"discussion_content":"\nfunc TestSingleton(t *testing.T) {\n\tvar wg sync.WaitGroup\n\tfor i := 0; i < 10; i++ {\n\t\twg.Add(1)\n\t\tgo func() {\n\t\t\tobj := GetSingletonObj()\n\t\t\tfmt.Printf(&#34;%x\\n&#34;, unsafe.Pointer(obj))\n\t\t\t// fmt.Printf(&#34;%p\\n&#34;, obj)\n\t\t\twg.Done()\n\t\t}()\n\t}\n\n\twg.Wait()\n}\n\ntype Singleton struct {\n}\n\nvar singleInstance *Singleton\nvar once sync.Once\n\nfunc GetSingletonObj() *Singleton {\n\t// once.Do(func() {\n\tfmt.Println(&#34;Create Obj&#34;)\n\tsingleInstance = new(Singleton)\n\t// })\n\treturn singleInstance\n}\n\n\nè¾“å‡º\nCreate Obj\nCreate Obj\n1255790\n1255790\nCreate Obj\nCreate Obj\n1255790\nCreate Obj\n1255790\nCreate Obj\nCreate Obj\nCreate Obj\n1255790\n1255790\n1255790\n1255790\nCreate Obj\n1255790\nCreate Obj\n1255790\n\nç¡®å®ä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610848580,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2640817,"avatar":"","nickname":"ç½—ä¿Šèª","note":"","ucode":"1B0E51A8AC8A70","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1216486,"avatar":"https://static001.geekbang.org/account/avatar/00/12/8f/e6/932e8a90.jpg","nickname":"Jake","note":"","ucode":"DA16FA2ADA9EAC","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389416,"discussion_content":"è·Ÿä½ å®šä¹‰çš„ç»“æ„ä½“Singletonæ˜¯ç©ºçš„æœ‰å…³ï¼Œå‚è€ƒ @Vincentç•™è¨€ï¼Œå¦‚æœç»“æ„ä½“ä¸æ˜¯ç©ºçš„ï¼Œè¾“å‡ºçš„æ˜¯10ä¸ªä¸ç›¸åŒçš„åœ°å€","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1629271829,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":342846,"ip_address":"","group_id":0},"score":389416,"extra":""}]},{"author":{"id":1082190,"avatar":"https://static001.geekbang.org/account/avatar/00/10/83/4e/17e23752.jpg","nickname":"kkkkkk","note":"","ucode":"70E5CCF8525F08","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306544,"discussion_content":"    25singleInstance_test.go:31: address:  0xc0000a61b8\nCreate single instance...\nCreate single instance...\n    25singleInstance_test.go:31: address:  0xc0000160e0\n    25singleInstance_test.go:31: address:  0xc00010c000\n    25singleInstance_test.go:31: address:  0xc0000160e1\n    25singleInstance_test.go:31: address:  0xc00010c001\n    25singleInstance_test.go:31: address:  0xc00010c002\n    25singleInstance_test.go:31: address:  0xc0000a61d8\n    25singleInstance_test.go:31: address:  0xc000192000\n    25singleInstance_test.go:31: address:  0xc000192001\n    25singleInstance_test.go:31: address:  0xc000214000\n--- PASS: TestSingleton (0.00s)\n\n\n\nå¹¶æ²¡æœ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600314531,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287559,"user_name":"escray","can_delete":false,"product_type":"c3","uid":1020525,"ip_address":"","ucode":"1F4204930E47C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","comment_is_top":false,"comment_ctime":1618028227,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"åœ¨ @Vincent çš„ç•™è¨€åŠå…¶å›å¤é‡Œé¢ï¼Œå­¦åˆ°äº†æœ‰å…³çš„ç©ºç»“æ„ä½“ empty struct çš„æ¦‚å¿µ\n\nhttps:&#47;&#47;dave.cheney.net&#47;2014&#47;03&#47;25&#47;the-empty-struct\nhttps:&#47;&#47;www.golangtc.com&#47;t&#47;575442b8b09ecc02f7000057\n\nå¦å¤–å…³äº unsafe.Pointer\n\nhttps:&#47;&#47;golang.org&#47;pkg&#47;unsafe&#47;#Pointer\nhttps:&#47;&#47;go101.org&#47;article&#47;unsafe.html","like_count":1},{"had_liked":false,"id":353763,"user_name":"jqshang","can_delete":false,"product_type":"c3","uid":1987031,"ip_address":"å¹¿ä¸œ","ucode":"7435E482BBF9A7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKgGCPd19I41yruZyvppnQJk8I1rHGiaUj54z3ibGXQnGJicJMwhZ2vJKxpmEvpyL8Ut7YOpIZlwEndg/132","comment_is_top":false,"comment_ctime":1659755936,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"è¿™ä¸ªé‡Œé¢çš„DCLæœ‰bugï¼ŒINSTANCEå˜é‡éœ€è¦volatileä¿®é¥°æ‰è¡Œã€‚","like_count":0},{"had_liked":false,"id":338921,"user_name":"æ¶›","can_delete":false,"product_type":"c3","uid":1174992,"ip_address":"","ucode":"0839908E458151","user_header":"https://static001.geekbang.org/account/avatar/00/11/ed/d0/2f18a78b.jpg","comment_is_top":false,"comment_ctime":1647788478,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"è€å¸ˆçš„ä¾‹å­éƒ½éå¸¸ç»å…¸ï¼Œå¸Œæœ›èƒ½å‡ºé«˜çº§ç‰ˆæœ¬çš„goè¯¾ç¨‹.","like_count":0},{"had_liked":false,"id":291747,"user_name":"å¹»å½±éœ¸è€…","can_delete":false,"product_type":"c3","uid":1033534,"ip_address":"","ucode":"09850FD9E61A63","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c5/3e/41339003.jpg","comment_is_top":false,"comment_ctime":1620460491,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"Javaå•ä¾‹æ²¡åŠ volatile","like_count":0},{"had_liked":false,"id":234197,"user_name":"Damo","can_delete":false,"product_type":"c3","uid":1599197,"ip_address":"","ucode":"F332EA67F5A40C","user_header":"https://static001.geekbang.org/account/avatar/00/18/66/dd/c9f17139.jpg","comment_is_top":false,"comment_ctime":1594617471,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"type Singleton struct{}\n\nvar singleton *Singleton\nvar once sync.Once\n\nfunc GetSingleton() *Singleton {\n\tonce.Do(func() {\n\t\tfmt.Println(&quot;once&quot;)\n\t\tsingleton = new(Singleton)\n\t})\n\treturn singleton\n}\n\nfunc TestRunByOnce(t *testing.T) {\n\tvar wg sync.WaitGroup\n\tfor i := 0; i &lt; 10; i++ {\n\t\twg.Add(1)\n\t\tgo func(i int) {\n\t\t\tdefer wg.Done()\n\t\t\tsingleton := GetSingleton()\n\t\t\tfmt.Printf(&quot;%v %p \\n&quot;, i, singleton)\n\t\t}(i)\n\t}\n\twg.Wait()\n}","like_count":0},{"had_liked":false,"id":93444,"user_name":"å¤","can_delete":false,"product_type":"c3","uid":1010922,"ip_address":"","ucode":"74E6838226A405","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6c/ea/ce9854a5.jpg","comment_is_top":false,"comment_ctime":1557472116,"is_pvip":false,"replies":null,"discussion_count":3,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"å¦‚æœåªæ˜¯è¿è¡Œä¸€æ¬¡ï¼Œå…¶ä»–åç¨‹ä¸­åº”è¯¥ä¸èƒ½åˆ›å»ºæ–°çš„å®ä¾‹æ‰å¯¹ã€‚å¦‚æœå¯ä»¥æ‰“å°å‡ºå¤šä¸ªç›¸åŒåœ°å€çš„å®ä¾‹ï¼Œæ˜¯å› ä¸ºåç¨‹ä¸­å…±äº«å†…å­˜å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1073236,"avatar":"https://static001.geekbang.org/account/avatar/00/10/60/54/b3eb605b.jpg","nickname":"é˜¿ç‰›","note":"","ucode":"DC8C189FCF3289","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":233004,"discussion_content":"æˆ‘ä¸ªäººè®¤ä¸ºï¼ŒMPGä¸­çš„Mæ˜¯çº¿ç¨‹çš„ï¼Œå†…å­˜å…±äº«çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586883683,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1442588,"avatar":"https://static001.geekbang.org/account/avatar/00/16/03/1c/c9fe6738.jpg","nickname":"Kvicii.Y","note":"","ucode":"446BFA633569EA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":203974,"discussion_content":"å®ä¾‹æ˜¯åªè¢«åˆ›å»ºäº†ä¸€æ¬¡ï¼ŒçŒœæµ‹åº”è¯¥æ˜¯ç”±äºå…±äº«å†…å­˜å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584107408,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1614014,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/1ZcgbSZ1Q0eARic4sFq9PRO0rT55MAYUAcBVNK3dE6ficOQViblBlzUTnMJyK2bZbU3IsewnDxKD5Wtrq01DeHnWQ/132","nickname":"Geek_338030","note":"","ucode":"6F2ACB3C528BAA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":12427,"discussion_content":"åŒé—®ï¼Œæœ›è§£ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568528932,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}