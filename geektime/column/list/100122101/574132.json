{"id":574132,"title":"03 | å¦‚ä½•é€šè¿‡éƒ¨åˆ†åº”ç”¨å’ŒæŸ¯é‡ŒåŒ–è®©å‡½æ•°å…·è±¡åŒ–ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯çŸ³å·ã€‚</p><p>åœ¨å‰é¢ä¸¤èŠ‚è¯¾é‡Œï¼Œæˆ‘è¯´è¿‡å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒå°±æ˜¯æŠŠæ•°æ®ä½œä¸ºè¾“å…¥ï¼Œé€šè¿‡ç®—æ³•è¿›è¡Œè®¡ç®—ï¼Œæœ€åè¾“å‡ºç»“æœã€‚åŒæ—¶æˆ‘ä¹Ÿæåˆ°ï¼Œåœ¨å‡½æ•°å¼+å“åº”å¼ç¼–ç¨‹ä¸­ï¼Œé¢å¯¹æœªçŸ¥ã€åŠ¨æ€å’Œä¸å¯æ§æ—¶ï¼Œå¯ä»¥é€šè¿‡çº¯å‡½æ•°å’Œä¸å¯å˜ç­‰æ‰‹æ®µå‡å°‘å‰¯ä½œç”¨ã€å¢åŠ ç¡®å®šæ€§ï¼ŒåŠæ—¶åœ°é€‚åº”å’Œè°ƒæ•´ã€‚</p><p>é‚£ä¹ˆç°åœ¨ä½ æ¥æƒ³æƒ³ï¼Œ<strong>åœ¨è¾“å…¥ã€è®¡ç®—å’Œè¾“å‡ºè¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä»€ä¹ˆåœ°æ–¹æ˜¯æœ€éš¾æ§åˆ¶çš„å‘¢ï¼Ÿ</strong>å¯¹ï¼Œå°±æ˜¯è¾“å…¥ã€‚å› ä¸ºå®ƒæ¥è‡ªå¤–ç•Œï¼Œè€Œè®¡ç®—æ˜¯åœ¨ç›¸å¯¹å°é—­çš„ç¯å¢ƒä¸­ï¼Œè‡³äºè¾“å‡ºåªæ˜¯ä¸€ä¸ªç»“æœã€‚</p><p>æ‰€ä»¥ä»Šå¤©è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬å°±æ¥è¯´è¯´è¾“å…¥çš„æ§åˆ¶ã€‚</p><h2>éƒ¨åˆ†åº”ç”¨å’ŒæŸ¯é‡ŒåŒ–</h2><p>åœ¨å‰é¢è¯¾ç¨‹é‡Œä¹Ÿè®²è¿‡ï¼Œå‡½æ•°çš„è¾“å…¥æ¥è‡ªå‚æ•°ï¼Œå…¶ä¸­åŒ…æ‹¬äº†å‡½æ•°å®šä¹‰æ—¶çš„<strong>å½¢å‚</strong>å’Œå®é™…æ‰§è¡Œæ—¶çš„<strong>å®å‚</strong>ã€‚å¦å¤–ï¼Œæˆ‘ä»¬ä¹Ÿé€šè¿‡React.jsä¸­çš„propså’Œstateä»¥åŠJavaScriptä¸­çš„å¯¹è±¡å’Œé—­åŒ…ï¼Œå…·ä½“äº†è§£äº†å¦‚ä½•é€šè¿‡ä¸å¯å˜ï¼Œåšåˆ°å¯¹<strong>è¿è¡Œæ—¶çš„æœªçŸ¥</strong>çŠ¶æ€å˜åŒ–çš„ç®¡ç†ã€‚</p><p>é‚£ä»Šå¤©ï¼Œæˆ‘ä»¬å°±ä»å¦å¤–ä¸€ä¸ªè§’åº¦ç†è§£ä¸‹å¯¹ç¼–ç¨‹æ—¶â€œæœªçŸ¥â€çš„å¤„ç†ï¼Œå³å¦‚æœæˆ‘ä»¬åœ¨ç¼–å†™ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œéœ€è¦ä¼ å…¥å¤šä¸ªå®å‚ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†å®å‚æ˜¯å…ˆæ˜ç¡®çš„ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯åæ˜ç¡®çš„ï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ</p><p>å…¶å®å°±æ˜¯<strong>éƒ¨åˆ†åº”ç”¨ï¼ˆpartial applicationï¼‰å’ŒæŸ¯é‡ŒåŒ–ï¼ˆcurryingï¼‰</strong>ã€‚ä¸‹é¢æˆ‘ä»¬å°±ä¸€èµ·æ¥çœ‹çœ‹å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œå¦‚ä½•çªç ´åœ¨è°ƒç”¨ç‚¹ï¼ˆcall-siteï¼‰ä¼ å‚çš„é™åˆ¶ï¼Œåšåˆ°éƒ¨åˆ†ä¼ å‚å’Œåç»­æ‰§è¡Œã€‚</p><!-- [[[read_end]]] --><h3>é€šè¿‡éƒ¨åˆ†åº”ç”¨å»¶è¿Ÿå®å‚ä¼ å…¥</h3><p>æˆ‘ä»¬çŸ¥é“ï¼Œå‡½æ•°å¼ç¼–ç¨‹é‡åœ¨å£°æ˜å¼å’Œå¯è¯»æ€§ï¼Œè€Œä¸”å¼ºè°ƒæ¯ä¸ªå‡½æ•°å°½é‡è§£å†³ä¸€ä¸ªå•ä¸€é—®é¢˜ã€‚å‡è®¾æœ‰ä¸€ä¸ªorderEventHandlerå‡½æ•°ï¼Œå®ƒæ¯”è¾ƒæŠ½è±¡ï¼Œå› æ­¤ç¼ºå°‘å¯è¯»æ€§ï¼›åˆæˆ–è€…å‡è®¾ä¸‹é¢è¿™ä¸ªå‡½æ•°éœ€è¦urlã€dataå’Œcallbackä¸‰ä¸ªå‚æ•°çš„è¾“å…¥ï¼Œæ‰èƒ½æ‰§è¡Œï¼Œæˆ‘ä»¬é¢„å…ˆçŸ¥é“å®ƒçš„urlï¼Œå´ä¸çŸ¥é“å®ƒçš„dataå’Œcallbackã€‚è¿™æ—¶è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><pre><code class=\"language-javascript\">function orderEventHandler(url,data,callback) {\n&nbsp; &nbsp; // ..\n}\n</code></pre><p>è¦è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡éƒ¨åˆ†åº”ç”¨ã€‚ä¸‹é¢æ˜¯å®ƒçš„ä¸€ä¸ªæ‰§è¡Œæµç¨‹å›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/9c/21/9ce5cf8b2fca3c234e1f5e7cb0b20221.jpg?wh=1920x1106\" alt=\"å›¾ç‰‡\"></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡orderEventHandlerå‡½æ•°ï¼Œå…·è±¡å‡ºä¸€ä¸ªä¸“é—¨çš„fetchOrderå‡½æ•°ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å°±æå‰é¢„ç½®äº†å·²çŸ¥å‚æ•°urlï¼Œå‡å°‘äº†åé¢éœ€è¦ä¼ å…¥çš„å‚æ•°æ•°é‡ï¼ŒåŒæ—¶ä¹Ÿå¢åŠ äº†ä»£ç çš„å¯è¯»æ€§ã€‚</p><pre><code class=\"language-javascript\">function fetchOrder(data,cb) {\n&nbsp; &nbsp; orderEventHandler( \"http://some.api/order\", data, cb );\n}\n</code></pre><p>å¯æ˜¯å¦‚æœæˆ‘ä»¬æƒ³è¿›ä¸€æ­¥å…·è±¡åŒ–ï¼Œé¢„åˆ¶ä¸€äº›å‚æ•°æ€ä¹ˆåŠï¼Ÿæ¯”å¦‚ä¸‹é¢çš„getCurrentOrderï¼Œå¦‚æœæˆ‘ä»¬æƒ³æŠŠå‰é¢fetchOrderé‡Œçš„dataï¼Œä¹Ÿå†…ç½®æˆorder: CURRENT_ORDER_IDï¼Œè¿™æ ·ä¼šå¤§é‡å¢åŠ ä»£ç ç»“æ„çš„å¤æ‚æ€§ã€‚</p><pre><code class=\"language-javascript\">function getCurrentOrder(cb) {\n&nbsp; &nbsp; getCurrentOrder( { order: CURRENT_ORDER_ID }, cb );\n}\n</code></pre><p>æ‰€ä»¥åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨éƒ¨åˆ†åº”ç”¨ã€‚å®ƒæ‰€åšçš„å°±æ˜¯<strong>æŠ½è±¡ä¸€ä¸ªpartialå·¥å…·</strong>ï¼Œåœ¨å…ˆé¢„åˆ¶éƒ¨åˆ†å‚æ•°çš„æƒ…å†µä¸‹ï¼Œåç»­å†ä¼ å…¥å‰©ä½™çš„å‚æ•°å€¼ã€‚å¦‚ä»¥ä¸‹ä»£ç æ‰€ç¤ºï¼š</p><pre><code class=\"language-javascript\">var fetchOrder = partial( orderEventHandler, \"http://some.api/order\" );\nvar getCurrentOrder = partial( fetchOrder, { order: CURRENT_ORDER_ID } );\n</code></pre><p>partialå·¥å…·å¯ä»¥å€ŸåŠ©æˆ‘ä»¬åœ¨ä¸ŠèŠ‚è¯¾æåˆ°è¿‡çš„<strong>é—­åŒ…</strong>ï¼Œä»¥åŠES6ä¸­å¼•å…¥çš„<strong>â€¦å»¶å±•æ“ä½œç¬¦</strong>ï¼ˆspread operatorï¼‰è¿™ä¸¤ä¸ªå‡½æ•°å¼ç¼–ç¨‹ä¸­çš„åˆ©å™¨æ¥å®ç°ã€‚</p><p>æˆ‘å…ˆæ¥è¯´ä¸€ä¸‹å»¶å±•æ“ä½œç¬¦ï¼Œå®ƒçš„å¼ºå¤§ä¹‹å¤„å°±æ˜¯å¯ä»¥åœ¨å‡½æ•°è°ƒç”¨æˆ–æ•°ç»„æ„é€ æ—¶ï¼Œå°†æ•°ç»„è¡¨è¾¾å¼æˆ–è€…stringåœ¨è¯­æ³•å±‚é¢å±•å¼€ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥å¤„ç†é¢„ç½®çš„å’Œåç½®çš„å®å‚ã€‚è€Œé—­åŒ…åœ¨è¿™é‡Œå†æ¬¡å‘æŒ¥äº†è®°å¿†çš„åŠŸèƒ½ï¼Œå®ƒä¼šè®°ä½å‰ç½®çš„å‚æ•°ï¼Œå¹¶åœ¨ä¸‹ä¸€æ¬¡æ”¶åˆ°åç½®çš„å‚æ•°æ—¶ï¼Œå¯ä»¥å’Œå‰é¢è®°ä½çš„å‰ç½®å‚æ•°ä¸€èµ·æ‰§è¡Œã€‚</p><pre><code class=\"language-javascript\">var partial =\n    (fn,...presetArgs) =&gt;\n        (...laterArgs) =&gt;\n            fn( ...presetArgs, ...laterArgs );\n</code></pre><p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬åœ¨ä¸Šä¸€è®²é‡Œæåˆ°çš„bindä¹Ÿå¯ä»¥èµ·åˆ°ç±»ä¼¼çš„ä½œç”¨ã€‚ä½† <strong>bindé€šå¸¸æ˜¯åœ¨é¢å‘å¯¹è±¡ä¸­ç”¨æ¥ç»‘å®šthisçš„</strong>ï¼Œç”¨ä½œéƒ¨åˆ†åº”ç”¨çš„è¯ä¼šç›¸å¯¹æ¯”è¾ƒå¥‡æ€ªï¼Œå› ä¸ºè¿™é‡Œæˆ‘ä»¬ä¸ç»‘å®šthisï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªå‚æ•°æˆ‘ä»¬ä¼šè®¾ç½®ä¸ºnullã€‚</p><p>å½“ç„¶ï¼Œè¿™ä¹ˆç”¨ç¡®å®ä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯ä¸€èˆ¬æ¥è¯´ï¼Œä¸ºäº†ä¸æ··æ·†bindçš„ä½¿ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬æœ€å¥½è¿˜æ˜¯ç”¨è‡ªå·±å®šä¹‰çš„partialå·¥å…·ã€‚</p><pre><code class=\"language-javascript\">var fetchOrder = httpEvntHandler.bind( null, \"http://some.api/order\" );\n</code></pre><h3>é€šè¿‡æŸ¯é‡ŒåŒ–æ¯æ¬¡ä¼ ä¸€ä¸ªå‚æ•°</h3><p>æˆ‘ä»¬æ¥ç€æ¥çœ‹çœ‹æŸ¯é‡ŒåŒ–ã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æŠŠä¹‹å‰çš„httpEventHandleråšäº†æŸ¯é‡ŒåŒ–å¤„ç†ä¹‹åï¼Œå°±ä¸éœ€è¦ä¸€æ¬¡è¾“å…¥3ä¸ªå‚æ•°äº†ï¼Œè€Œæ˜¯æ¯æ¬¡åªä¼ å…¥ä¸€ä¸ªå‚æ•°ã€‚ç¬¬ä¸€æ¬¡ï¼Œæˆ‘ä»¬ä¼ å…¥äº†urlæ¥è·å–è®¢å•ï¼›ä¹‹åï¼Œæˆ‘ä»¬ä¼ å…¥äº†å½“å‰è®¢å•çš„idï¼›æœ€åï¼Œæˆ‘ä»¬è·å¾—äº†å½“å‰è®¢å•åï¼Œä¼ å…¥ä¸€ä¸ªè®¢å•ä¿®æ”¹çš„å‚æ•°æ¥åšç›¸å…³ä¿®æ”¹ã€‚</p><pre><code class=\"language-javascript\">var curriedOrderEvntHandler = curry( orderEventHandler );\n\nvar fetchOrder = curriedHttpEvntHandler( \"http://some.api/order\" );\n\nvar getCurrentOrder = fetchOrder( { order: CURRENT_ORDER_ID } );\n\ngetCurrentOrder( function editOrder(order){ /* .. */ } );\n</code></pre><p>ä½ åŒæ ·å¯ä»¥æ¥çœ‹ä¸€ä¸‹å®ƒçš„ä¸€ä¸ªæ‰§è¡Œæµç¨‹å›¾ï¼Œçœ‹çœ‹æŸ¯é‡ŒåŒ–æ˜¯å¦‚ä½•å®ç°çš„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/35/93/354314fbf00495bbbd02b04b2bacf693.jpg?wh=1920x665\" alt=\"å›¾ç‰‡\"></p><p>å®é™…ä¸Šï¼Œå’Œéƒ¨åˆ†åº”ç”¨ç±»ä¼¼ï¼Œè¿™é‡Œæˆ‘ä»¬<strong>ä¹Ÿç”¨åˆ°äº†é—­åŒ…å’Œâ€¦å»¶å±•æ“ä½œç¬¦</strong>ã€‚</p><p>åœ¨æŸ¯é‡ŒåŒ–ä¸­ï¼Œå»¶å±•æ“ä½œç¬¦å¯ä»¥åœ¨å‡½æ•°è°ƒç”¨é“¾ä¸­èµ·åˆ°æ‰¿ä¸Šå¯ä¸‹çš„ä½œç”¨ã€‚å½“ç„¶ï¼Œå¸‚é¢ä¸Šå®ç°éƒ¨åˆ†åº”ç”¨å’ŒæŸ¯é‡ŒåŒ–çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œè¿™é‡Œæˆ‘é€‰äº†ä¸€ä¸ªâ€œå¯è¯»æ€§â€æ¯”è¾ƒé«˜çš„ã€‚å› ä¸ºå’Œéƒ¨åˆ†åº”ç”¨ä¸€æ ·ï¼Œå®ƒæœ‰æ•ˆè¯´æ˜äº†å‚æ•°å‰åçš„å…³ç³»ã€‚</p><pre><code class=\"language-javascript\">function curry(fn,arity = fn.length) {\n    return (function nextCurried(prevArgs){\n        return function curried(nextArg){\n            var args = [ ...prevArgs, nextArg ];\n            if (args.length &gt;= arity) {\n                return fn( ...args );\n            }\n            else {\n                return nextCurried( args );\n            }\n        };\n    })( [] );\n}\n</code></pre><p>å¥½äº†ï¼Œé€šè¿‡éƒ¨åˆ†åº”ç”¨å’ŒæŸ¯é‡ŒåŒ–çš„ä¾‹å­ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå‘ç°<strong>å‡½æ•°å¼ç¼–ç¨‹å¤„ç†æœªçŸ¥</strong>çš„èƒ½åŠ›ã€‚ä½†è¿™é‡Œæˆ‘è¿˜æƒ³å¼ºè°ƒä¸€ç‚¹ï¼Œè¿™ä¸ªæœªçŸ¥ï¼Œè·Ÿæˆ‘ä»¬è¯´çš„åº”ç”¨åœ¨è¿è¡Œæ—¶çš„æœªçŸ¥æ˜¯ä¸åŒçš„ã€‚è¿™é‡Œçš„æœªçŸ¥æŒ‡çš„æ˜¯ç¼–ç¨‹æ—¶çš„æœªçŸ¥ï¼Œæ¯”å¦‚æœ‰äº›å‚æ•°æ˜¯æˆ‘ä»¬æå‰çŸ¥é“çš„ï¼Œè€Œæœ‰ä¸€äº›æ˜¯åé¢åŠ å…¥çš„ã€‚</p><p>è¦çŸ¥é“ï¼Œä¸€ä¸ªæ™®é€šçš„å‡½æ•°é€šå¸¸æ˜¯åœ¨è°ƒç”¨ç‚¹æ‰§è¡Œæ—¶ä¼ å…¥å‚æ•°çš„ï¼Œè€Œé€šè¿‡éƒ¨åˆ†åº”ç”¨å’ŒæŸ¯é‡ŒåŒ–ï¼Œæˆ‘ä»¬åšåˆ°äº†å¯ä»¥å…ˆä¼ å…¥éƒ¨åˆ†å·²çŸ¥å‚æ•°ï¼Œå†åœ¨ä¹‹åçš„æŸä¸ªæ—¶é—´ä¼ å…¥éƒ¨åˆ†å‚æ•°ï¼Œè¿™æ ·ä»æ—¶é—´å’Œç©ºé—´ä¸Šï¼Œå°±å°†ä¸€ä¸ªå‡½æ•°åˆ†å¼€äº†ã€‚</p><p>è€Œè¿™æ ·åšé™¤äº†ä¸€äº›å®é™…çš„å¥½å¤„ï¼Œæ¯”å¦‚å¤„ç†æœªçŸ¥ï¼Œè®©å‡½æ•°ä»æŠ½è±¡å˜å…·ä½“ã€è®©å…·ä½“çš„å‡½æ•°æ¯æ¬¡åªä¸“å¿ƒåšå¥½ä¸€ä»¶äº‹ã€å‡å°‘å‚æ•°æ•°é‡ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªæ›´æŠ½è±¡çš„å¥½å¤„ï¼Œå°±æ˜¯<strong>ä½“ç°äº†å‡½æ•°å¼åº•å±‚çš„å£°æ˜å¼æ€æƒ³</strong>ã€‚</p><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬è®©ä»£ç å˜å¾—æ›´å¯è¯»ã€‚</p><h2>è¿˜æœ‰å“ªäº›å¸¸ç”¨çš„å‚æ•°å¤„ç†å·¥å…·ï¼Ÿ</h2><p>åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬æŠŠå‚æ•°çš„æ•°é‡å«åš <strong>arity</strong>ã€‚ä»ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œéƒ¨åˆ†åº”ç”¨å¯ä»¥å‡å°‘æ¯æ¬¡å‡½æ•°è°ƒç”¨æ—¶éœ€è¦ä¼ å…¥çš„å‚æ•°ï¼Œè€ŒæŸ¯é‡ŒåŒ–æ›´æ˜¯æŠŠå‡½æ•°è°ƒç”¨æ—¶éœ€è¦ä¼ å…¥çš„å‚æ•°æ•°é‡ï¼Œé™åˆ°äº†1ã€‚å®ƒä»¬å®é™…ä¸Šéƒ½èµ·åˆ°äº†<strong>æ§åˆ¶å‚æ•°æ•°é‡</strong>çš„ä½œç”¨ã€‚</p><p>è€Œåœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œå…¶å®è¿˜æœ‰å¾ˆå¤šå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¤„ç†å‚æ•°è¾“å…¥çš„å·¥å…·ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°±é€šè¿‡unaryã€constantå’Œidentityè¿™å‡ ä¸ªç®€å•çš„ä¾‹å­æ¥ä¸€èµ·çœ‹çœ‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e7/5c/e70e2bbb764b2934d6b4ea379fc8465c.jpg?wh=1920x596\" alt=\"å›¾ç‰‡\"></p><h3>æ”¹é€ æ¥å£unary</h3><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æ”¹é€ å‡½æ•°çš„å·¥å…·ã€‚å…¶ä¸­ï¼Œæœ€ç®€å•çš„å·¥å…·å°±æ˜¯ä¸€å…ƒå‚æ•°ï¼ˆunaryï¼‰äº†ï¼Œå®ƒçš„ä½œç”¨æ˜¯æŠŠä¸€ä¸ªæ¥æ”¶å¤šä¸ªå‚æ•°çš„å‡½æ•°ï¼Œå˜æˆä¸€ä¸ªåªæ¥æ”¶ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ã€‚å…¶å®ç°ä¹Ÿå¾ˆç®€å•ï¼š</p><pre><code class=\"language-javascript\">function unary(fn) {\n&nbsp; &nbsp; return function oneArg(arg){\n&nbsp; &nbsp; &nbsp; &nbsp; return fn( arg );\n&nbsp; &nbsp; };\n}\n</code></pre><p>ä½ å¯èƒ½ä¼šé—®å®ƒæœ‰ä»€ä¹ˆç”¨ï¼Ÿæˆ‘æ¥ä¸¾ä¸ªä¾‹å­ã€‚</p><p>å½“ä½ æƒ³é€šè¿‡parseIntï¼ŒæŠŠä¸€ç»„å­—ç¬¦ä¸²é€šè¿‡mapæ¥æ˜ å°„æˆæ•´æ•°ï¼Œä½†æ˜¯parseIntä¼šæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œè€Œå¦‚æœä½ ç›´æ¥è¾“å…¥parseIntçš„è¯ï¼Œé‚£ä¹ˆâ€œ2â€å°±ä¼šæˆä¸ºå®ƒçš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¿™è‚¯å®šä¸æ˜¯ä½ æœŸå¾…çš„ç»“æœå§ã€‚</p><p>æ‰€ä»¥è¿™æ—¶å€™ï¼Œunaryå°±æ´¾ä¸Šç”¨åœºäº†ï¼Œå®ƒå¯ä»¥è®©parseIntåªæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œä»è€Œå°±å¯ä»¥æ­£ç¡®åœ°æ‰“å‡ºä½ æƒ³è¦çš„ç»“æœã€‚</p><pre><code class=\"language-javascript\">[\"1\",\"2\",\"3\",\"4\",\"5\"].map( unary( parseInt ) ); // [1,2,3,4,5]\n</code></pre><p>çœ‹åˆ°è¿™é‡Œï¼Œèªæ˜çš„ä½ å¯èƒ½ä¼šé—®ï¼šé™¤äº†ä¸€å…ƒï¼Œä¼šä¸ä¼šæœ‰äºŒå…ƒã€ä¸‰å…ƒï¼Ÿç­”æ¡ˆæ˜¯æœ‰çš„ã€‚äºŒå…ƒå°±æ˜¯binaryï¼Œæˆ–æ˜¯å‡½æ•°å¼ä¸­çš„â€œé»‘è¯â€dyadicï¼›ä¸‰å…ƒå°±æ˜¯tenaryã€‚é¡¾åæ€ä¹‰ï¼Œå®ƒä»¬åˆ†åˆ«ä»£è¡¨çš„å°±æ˜¯æŠŠä¸€ä¸ªå‡½æ•°çš„å‚æ•°æ•°é‡æ§åˆ¶åœ¨2ä¸ªå’Œ3ä¸ªã€‚</p><h3>æ”¹é€ å‚æ•°constant</h3><p>å¦‚æœä½ ç”¨è¿‡JavaScript promiseçš„è¯ï¼Œåº”è¯¥å¯¹thenä¸é™Œç”Ÿã€‚ä»å‡½æ•°ç­¾åçš„è§’åº¦æ¥çœ‹ï¼Œå®ƒåªæ¥æ”¶å‡½æ•°ï¼Œè€Œä¸æ¥æ”¶å…¶ä»–å€¼ç±»å‹ä½œä¸ºå‚æ•°ã€‚æ¯”å¦‚ä¸‹é¢ä¾‹å­ä¸­ï¼Œ34è¿™ä¸ªå€¼å°±æ˜¯ä¸èƒ½è¢«æ¥æ”¶çš„ã€‚</p><pre><code class=\"language-javascript\">promise1.then( action1 ).then( 34 ).then( action3 );\n</code></pre><p>è¿™é‡Œä½ å¯èƒ½ä¼šé—®ï¼Œ<strong>ä»€ä¹ˆæ˜¯å‡½æ•°ç­¾åï¼Ÿ</strong>å‡½æ•°ç­¾åä¸€èˆ¬åŒ…å«äº†å‚æ•°åŠå…¶ç±»å‹è¿”å›å€¼ï¼Œè¿˜æœ‰ç±»å‹å¯èƒ½å¼•å‘æˆ–ä¼ å›çš„å¼‚å¸¸ï¼Œä»¥åŠç›¸å…³çš„æ–¹æ³•åœ¨é¢å‘å¯¹è±¡ä¸­çš„å¯ç”¨æ€§ä¿¡æ¯ï¼ˆå¦‚å…³é”®å­—publicã€staticæˆ–prototypeï¼‰ã€‚ä½ å¯ä»¥çœ‹åˆ°åœ¨Cæˆ–C++ä¸­ï¼Œä¼šæœ‰ç±»ä¼¼è¿™æ ·çš„ç­¾åï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code class=\"language-c++\">// C\nint main (int arga, char *argb[]) {}\n\n// C++\nint main (int argc, char **argv) {/** ... **/ }\n</code></pre><p>è€Œåœ¨JavaScriptå½“ä¸­ï¼ŒåŸºäºå®ƒâ€œæ”¾è¡ä¸ç¾â€çš„ç‰¹æ€§ï¼Œå°±æ²¡æœ‰é‚£ä¹ˆå¤šæ¡æ¡æ¡†æ¡†äº†ï¼Œç”šè‡³è¿å‘½åå‡½æ•°æœ¬èº«éƒ½ä¸æ˜¯å¿…é¡»çš„ï¼Œå°±æ›´ä¸ç”¨è¯´ç­¾åäº†ã€‚é‚£ä¹ˆé‡åˆ°thenè¿™ç§æƒ…å†µæ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å…¶å®å¯ä»¥ç¼–å†™ä¸€ä¸ªåªè¿”å›å€¼çš„constantå‡½æ•°ï¼Œè¿™æ ·å°±è§£å†³äº†æ¥æ”¶çš„é—®é¢˜ã€‚ç”±æ­¤ä¹Ÿèƒ½çœ‹å‡ºï¼ŒJavaScriptåœ¨é¢å¯¹å„ç§æ¡æ¡æ¡†æ¡†çš„æ—¶å€™ï¼Œæ€»æ˜¯ä¸Šæœ‰æ”¿ç­–ä¸‹æœ‰å¯¹ç­–ã€‚</p><pre><code class=\"language-javascript\">function constant(v) {\n&nbsp; &nbsp; return function value(){\n&nbsp; &nbsp; &nbsp; &nbsp; return v;\n&nbsp; &nbsp; };\n}\n</code></pre><p>ç„¶åï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠå€¼åŒ…è£…åœ¨constantå‡½æ•°é‡Œï¼Œé€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼Œå°±å¯ä»¥æŠŠå€¼ä½œä¸ºå‡½æ•°å‚æ•°ä¼ å…¥äº†ã€‚</p><pre><code class=\"language-javascript\">promise1.then( action1 ).then( constant( 34 ) ).then( action3 );\n</code></pre><h3>ä¸åšæ”¹é€ identity</h3><p>è¿˜æœ‰ä¸€ä¸ªå‡½æ•°å¼ç¼–ç¨‹ä¸­å¸¸ç”¨çš„å·¥å…·ï¼Œä¹Ÿå°±æ˜¯identityï¼Œå®ƒæ—¢ä¸æ”¹å˜å‡½æ•°ï¼Œä¹Ÿä¸æ”¹å˜å‚æ•°ã€‚å®ƒçš„åŠŸèƒ½å°±æ˜¯è¾“å…¥ä¸€ä¸ªå€¼ï¼Œè¿”å›ä¸€ä¸ªåŒæ ·çš„å€¼ã€‚ä½ å¯èƒ½ä¼šè§‰ç€ï¼Œè¿™æœ‰å•¥ç”¨ï¼Ÿ</p><pre><code class=\"language-javascript\">function identity(v) {\n&nbsp; &nbsp; return v;\n}\n</code></pre><p>å…¶å®å®ƒçš„ä½œç”¨ä¹Ÿå¾ˆå¤šã€‚æ¯”å¦‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œå®ƒå¯ä»¥ä½œä¸º<strong>æ–­è¨€</strong>ï¼ˆpredicateï¼‰ï¼Œ æ¥è¿‡æ»¤æ‰ç©ºå€¼ã€‚åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œæ–­è¨€æ˜¯ä¸€ä¸ªå¯ä»¥ç”¨æ¥åšåˆ¤æ–­æ¡ä»¶çš„å‡½æ•°ï¼Œåœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œidentityå°±ä½œä¸ºåˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºç©ºçš„æ–­è¨€ã€‚</p><pre><code class=\"language-javascript\">var words = \"&nbsp; &nbsp;hello world&nbsp; \".split( /\\s|\\b/ );\nwords; // ['', '', '', 'hello', 'world', '', '']\n\nwords.filter( identity ); // ['hello', 'world']\n</code></pre><p>å½“ç„¶ï¼Œidentityçš„åŠŸèƒ½ä¹Ÿä¸æ­¢äºæ­¤ï¼Œå®ƒä¹Ÿå¯ä»¥ç”¨æ¥<strong>åšé»˜è®¤çš„è½¬åŒ–å·¥å…·</strong>ã€‚æ¯”å¦‚ä»¥ä¸‹ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªtransLoggerå‡½æ•°ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªå®é™…çš„æ•°æ®å’Œç›¸å…³çš„loweråŠŸèƒ½å‡½æ•°ï¼Œæ¥å°†æ–‡å­—è½¬åŒ–æˆå°å†™ã€‚</p><pre><code class=\"language-javascript\">function transLogger (msg,formatFn = identity) {\n&nbsp; &nbsp; msg = formatFn( msg );\n&nbsp; &nbsp; console.log( msg );\n}\n\nfunction lower(txt) {\n&nbsp; &nbsp; return txt.toLowerCase();\n}\n\ntransLogger( \"Hello World\" );&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Hello World\ntransLogger( \"Hello World\", lower );&nbsp; &nbsp; &nbsp;// hello world\n</code></pre><p>é™¤äº†ä»¥ä¸Šè¿™äº›å·¥å…·ä»¥å¤–ï¼Œè¿˜æœ‰æ›´å¤æ‚ä¸€äº›çš„å·¥å…·æ¥è§£å†³å‚æ•°é—®é¢˜ã€‚æ¯”å¦‚åœ¨è®²éƒ¨åˆ†åº”ç”¨å’ŒæŸ¯é‡ŒåŒ–çš„æ—¶å€™ï¼Œæåˆ°å®ƒåœ¨ç»™æˆ‘ä»¬å¸¦æ¥ä¸€äº›çµæ´»æ€§çš„åŒæ—¶ï¼Œä¹Ÿä»ç„¶ä¼šæœ‰ä¸€äº›é™åˆ¶ï¼Œå³<strong>å‚æ•°çš„é¡ºåºé—®é¢˜</strong>ï¼Œæˆ‘ä»¬å¿…é¡»æŒ‰ç…§ä¸€ä¸ªé¡ºåºæ¥æ‰§è¡Œã€‚è€Œæœ‰äº›ä¸‰æ–¹åº“æä¾›çš„ä¸€äº›å·¥å…·ï¼Œå°±å¯ä»¥å°†å‚æ•°å€’æ’æˆ–é‡æ–°æ’åºã€‚</p><p>é‡æ–°æ’åºçš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œå¯ä»¥é€šè¿‡è§£æ„ï¼ˆdestructureï¼‰ï¼Œä»æ•°ç»„å’Œå¯¹è±¡å‚æ•°ä¸­æå–å€¼ï¼Œå¯¹å˜é‡è¿›è¡Œèµ‹å€¼æ—¶é‡æ–°æ’åºï¼›æˆ–é€šè¿‡å»¶å±•æ“ä½œç¬¦æŠŠä¸€ä¸ªå¯¹è±¡ä¸­çš„ä¸€ç»„å€¼ï¼Œâ€œå»¶å±•â€æˆå•ç‹¬çš„å‚æ•°æ¥å¤„ç†ï¼›åˆæˆ–è€…é€šè¿‡ .toString() å’Œæ­£åˆ™è¡¨è¾¾å¼è§£æå‡½æ•°ä¸­çš„å‚æ•°åšå¤„ç†ã€‚</p><p>ä½†æ˜¯ï¼Œæœ‰æ—¶æˆ‘ä»¬<strong>åœ¨çµæ´»å˜é€šä¸­ä¹Ÿè¦é€‚åº¦</strong>ï¼Œä¸èƒ½è®©å®ƒä¸€ä¸å°å¿ƒå˜æˆäº†â€œå¥‡æŠ€æ·«å·§â€ï¼Œæ‰€ä»¥å¯¹äºç±»ä¼¼â€œé‡æ–°æ’åºâ€è¿™æ ·çš„æŠ€å·§ï¼Œåœ¨è¯¾ç¨‹ä¸­æˆ‘å°±ä¸å±•å¼€äº†ï¼Œæ„Ÿå…´è¶£çš„è¯ä½ å¯ä»¥åœ¨å»¶ä¼¸é˜…è¯»éƒ¨åˆ†å»æ·±å…¥äº†è§£ã€‚</p><h2>æ€»ç»“</h2><p>é€šè¿‡ä»Šå¤©è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°åœ¨é¢å¯¹æœªçŸ¥ã€åŠ¨æ€å’Œä¸å¯æ§æ—¶ï¼Œå‡½æ•°å¼ç¼–ç¨‹å¾ˆé‡è¦çš„ä¸€ç‚¹å°±æ˜¯<strong>æ§åˆ¶å¥½è¾“å…¥</strong>ã€‚</p><p>åœ¨è¯¾ç¨‹é‡Œï¼Œæˆ‘ä»¬ä¸€èµ·é‡ç‚¹äº†è§£äº†å‡½æ•°çš„è¾“å…¥ä¸­çš„å‚æ•°ï¼ŒçŸ¥é“éƒ¨åˆ†åº”ç”¨å’ŒæŸ¯é‡ŒåŒ–ï¼Œå¯ä»¥è®©ä»£ç æ›´å¥½åœ°å¤„ç†ç¼–ç¨‹ä¸­çš„æœªçŸ¥ï¼Œè®©å‡½æ•°ä»æŠ½è±¡å˜å…·ä½“ï¼Œè®©å…·ä½“çš„å‡½æ•°æ¯æ¬¡åªä¸“å¿ƒåšå¥½ä¸€ä»¶äº‹ï¼Œä»¥åŠå¯ä»¥åœ¨å‡å°‘å‚æ•°çš„æ•°é‡ä¹‹å¤–ï¼Œè¿˜èƒ½å¤Ÿå¢åŠ å¯è¯»æ€§ã€‚</p><p>å¦å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå­¦ä¹ äº†æ›´å¤šâ€œä¸ªå­å°ï¼ŒåŠŸèƒ½å¤§â€çš„å·¥å…·ï¼Œæˆ‘ä»¬ä¸ä»…å¯ä»¥é€šè¿‡è¿™äº›å·¥å…·ï¼Œæ¯”å¦‚unaryå’Œconstantæ¥æ”¹é€ å‡½æ•°å’Œå‚æ•°ï¼Œä»è€Œè§£å†³é€‚é…é—®é¢˜ï¼›åŒæ—¶ï¼Œå“ªæ€•æ˜¯çœ‹ä¸Šå»ä¼¼ä¹åªæ˜¯åœ¨â€œé€ä¼ â€å€¼çš„identityï¼Œå®é™…ä¸Šéƒ½å¯ä»¥ç”¨äºæ–­è¨€å’Œè½¬åŒ–ã€‚è€Œè¿™æ ·åšçš„å¥½å¤„ï¼Œå°±æ˜¯å¯ä»¥å°½é‡æé«˜æ¥å£çš„é€‚åº”æ€§å’Œé€‚é…æ€§ï¼Œå¢åŠ è¿‡æ»¤å’Œè½¬åŒ–çš„èƒ½åŠ›ï¼Œä»¥åŠå¢åŠ ä»£ç çš„å¯è¯»æ€§ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>ä»Šå¤©æˆ‘ä»¬ä¸»è¦å­¦ä¹ äº†æŸ¯é‡ŒåŒ–ï¼Œè€Œä¸å®ƒç›¸åçš„å°±æ˜¯åæŸ¯é‡ŒåŒ–ï¼ˆuncurryï¼‰ï¼Œé‚£ä¹ˆä½ çŸ¥é“åæŸ¯é‡ŒåŒ–çš„ç”¨é€”å’Œå®ç°å—ï¼Ÿ</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„ç­”æ¡ˆï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p><h2>å»¶ä¼¸é˜…è¯»</h2><ul>\n<li><a href=\"https://www.csdn.net/tags/Mtjakg2sMTMxMjctYmxvZwO0O0OO0O0O.html\">JS å‡½æ•°ç­¾å</a></li>\n<li><a href=\"https://blog.csdn.net/helena1993/article/details/124149052\">C/C++ å‡½æ•°ç­¾åä¸åå­—ä¿®é¥°ï¼ˆç¬¦å·ä¿®é¥°ï¼‰</a></li>\n<li><a href=\"https://blog.csdn.net/zyh2525246/article/details/116799638\">JS ä¸­çš„è§£æ„</a></li>\n<li><a href=\"https://github.com/getify/Functional-Light-JS/blob/master/manuscript/README.md/#table-of-contents\">Functional Light JS</a></li>\n<li><a href=\"https://learning.oreilly.com/library/view/javascript-patterns/9781449399115/\">JavaScript Patterns - Chapter 4 Functions</a></li>\n</ul>","comments":[{"had_liked":false,"id":362479,"user_name":"lugusliu","can_delete":false,"product_type":"c1","uid":1378530,"ip_address":"åŒ—äº¬","ucode":"B2D6A2F4122055","user_header":"https://static001.geekbang.org/account/avatar/00/15/08/e2/138689a8.jpg","comment_is_top":false,"comment_ctime":1668565746,"is_pvip":false,"replies":[{"id":132383,"content":"å¾ˆç®€æ´ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2785919,"ctime":1670657375,"ip_address":"åŒ—äº¬","comment_id":362479,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100122101,"comment_content":"æŸ¯é‡ŒåŒ–æ¯æ¬¡ä¼ ä¸€ä¸ªå‚æ•°è¿™æ ·å†™æ˜¯ä¸æ˜¯æ›´ç®€æ´\nfunction partial(fn){\n    let receivedArgs = []\n    return function recursionFn(args){\n        receivedArgs = receivedArgs.concat([...arguments])\n        if(receivedArgs.length &gt;= fn.length){\n            return fn(...receivedArgs)\n        }else{\n            return recursionFn\n        }\n    }\n}","like_count":5,"discussions":[{"author":{"id":2785919,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/82/7f/c22de3a3.jpg","nickname":"çŸ³å·","note":"","ucode":"99E480A265E25F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596100,"discussion_content":"å¾ˆç®€æ´ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670657375,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358443,"user_name":"L","can_delete":false,"product_type":"c1","uid":3139235,"ip_address":"åŒ—äº¬","ucode":"ED355151EA9FF8","user_header":"https://static001.geekbang.org/account/avatar/00/2f/e6/a3/e7e97896.jpg","comment_is_top":false,"comment_ctime":1664328357,"is_pvip":false,"replies":[{"id":130491,"content":"æ˜¯çš„ï¼Œè°¢è°¢ä½ çš„ç»†å¿ƒï¼Œè¿™é‡Œæœ‰ä¸ªå‹˜è¯¯ï¼ŒgetOrderåº”è¯¥éƒ½ç»Ÿä¸€æˆfetchOrderã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2785919,"ctime":1664682601,"ip_address":"åŒ—äº¬","comment_id":358443,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100122101,"comment_content":"\nfunction getCurrentOrder(cb) {\n    getCurrentOrder( { order: CURRENT_ORDER_ID }, cb );\n    (fetchOrder)\n}\nå¯æ˜¯å¦‚æœæˆ‘ä»¬æƒ³è¿›ä¸€æ­¥å…·è±¡åŒ–ï¼Œé¢„åˆ¶ä¸€äº›å‚æ•°æ€ä¹ˆåŠï¼Ÿæ¯”å¦‚ä¸‹é¢çš„ getCurrentOrderï¼Œå¦‚æœæˆ‘ä»¬æƒ³æŠŠå‰é¢ getOrder  (fetchOrder)    é‡Œçš„ dataï¼Œä¹Ÿå†…ç½®æˆ order: CURRENT_ORDER_IDï¼Œè¿™æ ·ä¼šå¤§é‡å¢åŠ ä»£ç ç»“æ„çš„å¤æ‚æ€§ã€‚\nè¿™ä¸¤ä¸ªåœ°æ–¹æ˜¯ä¸æ˜¯é”™äº†  åº”è¯¥éƒ½æ˜¯fetchOrder\n","like_count":3,"discussions":[{"author":{"id":2785919,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/82/7f/c22de3a3.jpg","nickname":"çŸ³å·","note":"","ucode":"99E480A265E25F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589306,"discussion_content":"æ˜¯çš„ï¼Œè°¢è°¢ä½ çš„ç»†å¿ƒï¼Œè¿™é‡Œæœ‰ä¸ªå‹˜è¯¯ï¼ŒgetOrderåº”è¯¥éƒ½ç»Ÿä¸€æˆfetchOrderã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664682601,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358444,"user_name":"L","can_delete":false,"product_type":"c1","uid":3139235,"ip_address":"åŒ—äº¬","ucode":"ED355151EA9FF8","user_header":"https://static001.geekbang.org/account/avatar/00/2f/e6/a3/e7e97896.jpg","comment_is_top":false,"comment_ctime":1664328687,"is_pvip":false,"replies":[{"id":130490,"content":"æ˜¯çš„ï¼Œè°¢è°¢ä½ çš„ç»†å¿ƒï¼Œè¿™é‡Œæœ‰ä¸ªå‹˜è¯¯ï¼ŒgetOrderåº”è¯¥éƒ½ç»Ÿä¸€æˆfetchOrderã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2785919,"ctime":1664682597,"ip_address":"åŒ—äº¬","comment_id":358444,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100122101,"comment_content":"\nvar curriedOrderEvntHandler = curry( orderEventHandler );\n\nvar fetchOrder = curriedHttpEvntHandler( &quot;http:&#47;&#47;some.api&#47;order&quot; );\n\nvar getCurrentOrder = getOrder( { order: CURRENT_ORDER_ID } );\n\ngetCurrentOrder( function editOrder(order){ &#47;* .. *&#47; } );\nè¿™é‡Œæ˜¯å¦ä¹Ÿæœ‰é—®é¢˜ ä¸ºä»€ä¹ˆå‰åçš„å‡½æ•°å¯¹ä¸ä¸Šå‘¢","like_count":2,"discussions":[{"author":{"id":2785919,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/82/7f/c22de3a3.jpg","nickname":"çŸ³å·","note":"","ucode":"99E480A265E25F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589305,"discussion_content":"æ˜¯çš„ï¼Œè°¢è°¢ä½ çš„ç»†å¿ƒï¼Œè¿™é‡Œæœ‰ä¸ªå‹˜è¯¯ï¼ŒgetOrderåº”è¯¥éƒ½ç»Ÿä¸€æˆfetchOrderã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664682597,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":362611,"user_name":"è¡Œäº‘æµæ°´","can_delete":false,"product_type":"c1","uid":1374414,"ip_address":"æµ·å—","ucode":"3CCE8B9902005A","user_header":"https://static001.geekbang.org/account/avatar/00/14/f8/ce/495dfc91.jpg","comment_is_top":false,"comment_ctime":1668676175,"is_pvip":false,"replies":[{"id":132989,"content":"æŸ¯é‡ŒåŒ–å’Œéƒ¨åˆ†åº”ç”¨æœ€å¤§çš„åº”ç”¨åœºæ™¯å°±æ˜¯å½“ä¸€æ¬¡åªä¼ å…¥ä¸€ä¸ªæˆ–éƒ¨åˆ†å‚æ•°çš„æ—¶å€™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2785919,"ctime":1672226967,"ip_address":"æµ·å—","comment_id":362611,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100122101,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³äº†è§£ä¸‹ï¼ŒçŸ¥é“è¿™äº›æ¦‚å¿µï¼Œæ€ä¹ˆå®é™…åº”ç”¨å‘¢ï¼Ÿæ¯•ç«Ÿæˆ‘ä»¬ä¹Ÿæ˜¯jsè¿›é˜¶å®æˆ˜è¯¾ç¨‹ã€‚ ","like_count":1,"discussions":[{"author":{"id":2785919,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/82/7f/c22de3a3.jpg","nickname":"çŸ³å·","note":"","ucode":"99E480A265E25F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597778,"discussion_content":"æŸ¯é‡ŒåŒ–å’Œéƒ¨åˆ†åº”ç”¨æœ€å¤§çš„åº”ç”¨åœºæ™¯å°±æ˜¯å½“ä¸€æ¬¡åªä¼ å…¥ä¸€ä¸ªæˆ–éƒ¨åˆ†å‚æ•°çš„æ—¶å€™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1672226967,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æµ·å—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358533,"user_name":"Sunny","can_delete":false,"product_type":"c1","uid":1667101,"ip_address":"åŒ—äº¬","ucode":"EED137B5B96EA3","user_header":"https://static001.geekbang.org/account/avatar/00/19/70/1d/c59e0b59.jpg","comment_is_top":false,"comment_ctime":1664415284,"is_pvip":false,"replies":[{"id":130621,"content":"è°¢è°¢æŒ‡æ­£ï¼Œæˆ‘æŸ¥äº†ä¸€ä¸‹ï¼Œä½ çš„æ‹¼å†™æ˜¯æ­£ç¡®çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2785919,"ctime":1665308652,"ip_address":"åŒ—äº¬","comment_id":358533,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100122101,"comment_content":"çœ‹ä¸‹è¿™ä¸ªå•è¯ tenary æ˜¯å¦å°‘äº†ä¸€ä¸ª &quot;r&quot;ï¼Œæ­£ç¡®çš„æ˜¯ ternary? ","like_count":1,"discussions":[{"author":{"id":2785919,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/82/7f/c22de3a3.jpg","nickname":"çŸ³å·","note":"","ucode":"99E480A265E25F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589783,"discussion_content":"è°¢è°¢æŒ‡æ­£ï¼Œæˆ‘æŸ¥äº†ä¸€ä¸‹ï¼Œä½ çš„æ‹¼å†™æ˜¯æ­£ç¡®çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665308653,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358399,"user_name":"Saul","can_delete":false,"product_type":"c1","uid":3183916,"ip_address":"åŒ—äº¬","ucode":"E1CC134F8A2138","user_header":"https://static001.geekbang.org/account/avatar/00/30/95/2c/b2ebf34d.jpg","comment_is_top":false,"comment_ctime":1664270385,"is_pvip":false,"replies":[{"id":130635,"content":"åŸå…ˆçš„orderEventHandlerå‡½æ•°æœ‰3ä¸ªå‚æ•°ï¼Œurl, data å’Œ callbackã€‚\nfunction orderEventHandler(url,data,callback) {}\n\nç¬¬ä¸€è¡ŒæŠŠorderEventHandleråšäº†æŸ¯é‡ŒåŒ–ï¼Œä¹‹åå¯ä»¥æ¯æ¬¡åªä¼ ä¸€ä¸ªå‚æ•°ã€‚\nç¬¬äºŒè¡Œæ˜¯åœ¨æŸ¯é‡ŒåŒ–åçš„curriedHttpEvntHandlerä¸­ä¼ å…¥äº†ç¬¬ä¸€ä¸ªurlå®å‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2785919,"ctime":1665324142,"ip_address":"åŒ—äº¬","comment_id":358399,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100122101,"comment_content":"\nvar curriedOrderEvntHandler = curry( orderEventHandler );\n\nvar fetchOrder = curriedHttpEvntHandler( &quot;http:&#47;&#47;some.api&#47;order&quot; );\n\nvar getCurrentOrder = getOrder( { order: CURRENT_ORDER_ID } );\n\ngetCurrentOrder( function editOrder(order){ &#47;* .. *&#47; } );\n\n--------------------------------------------------------------------------\nç¬¬äºŒè¡Œæˆ‘æ€ä¹ˆçœ‹ä¸æ‡‚","like_count":1,"discussions":[{"author":{"id":2785919,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/82/7f/c22de3a3.jpg","nickname":"çŸ³å·","note":"","ucode":"99E480A265E25F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589815,"discussion_content":"åŸå…ˆçš„orderEventHandlerå‡½æ•°æœ‰3ä¸ªå‚æ•°ï¼Œurl, data å’Œ callbackã€‚\nfunction orderEventHandler(url,data,callback) {}\n\nç¬¬ä¸€è¡ŒæŠŠorderEventHandleråšäº†æŸ¯é‡ŒåŒ–ï¼Œä¹‹åå¯ä»¥æ¯æ¬¡åªä¼ ä¸€ä¸ªå‚æ•°ã€‚\nç¬¬äºŒè¡Œæ˜¯åœ¨æŸ¯é‡ŒåŒ–åçš„curriedHttpEvntHandlerä¸­ä¼ å…¥äº†ç¬¬ä¸€ä¸ªurlå®å‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665324143,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364699,"user_name":"æµ·æ˜¯è“å¤©çš„å€’å½±","can_delete":false,"product_type":"c1","uid":2300783,"ip_address":"æµ·å—","ucode":"18355BB7DC364D","user_header":"https://static001.geekbang.org/account/avatar/00/23/1b/6f/ee41e363.jpg","comment_is_top":false,"comment_ctime":1671349812,"is_pvip":false,"replies":[{"id":133014,"content":"æœ‰äº›æ¦‚å¿µç¡®å®éœ€è¦åå¤æ€è€ƒæ¥ç†è§£","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2785919,"ctime":1672232926,"ip_address":"æµ·å—","comment_id":364699,"utype":1}],"discussion_count":1,"race_medal":1,"score":2,"product_id":100122101,"comment_content":"è¦å¤šçœ‹å‡ éæ‰èƒ½ç†è§£","like_count":0,"discussions":[{"author":{"id":2785919,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/82/7f/c22de3a3.jpg","nickname":"çŸ³å·","note":"","ucode":"99E480A265E25F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597808,"discussion_content":"æœ‰äº›æ¦‚å¿µç¡®å®éœ€è¦åå¤æ€è€ƒæ¥ç†è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1672232926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æµ·å—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359786,"user_name":"Geek_fcdf7b","can_delete":false,"product_type":"c1","uid":2115742,"ip_address":"åŒ—äº¬","ucode":"55A2DBA5C6DF79","user_header":"https://static001.geekbang.org/account/avatar/00/20/48/9e/9bbaa97d.jpg","comment_is_top":false,"comment_ctime":1665898091,"is_pvip":false,"replies":[{"id":131020,"content":"å› ä¸ºåµŒå¥—å°è£…å¯ä»¥å‡å°‘æ¥è‡ªå¤–éƒ¨å€¼çš„å‰¯ä½œç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2785919,"ctime":1666321046,"ip_address":"åŒ—äº¬","comment_id":359786,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100122101,"comment_content":"\nfunction constant(v) {\n    return function value(){\n        return v;\n    };\n}\nè¿™ä¸ªå‡½æ•°ä¸ºå•¥ä¸ç›´æ¥è¿”å›vï¼Œè€Œè¦åœ¨é‡Œé¢è¿˜è¦å¤šåŒ…ä¸€å±‚å‘¢ã€‚ä¸ºå•¥ä¸æ˜¯åƒè¿™æ ·ï¼š\n\nfunction constant(v) {\n    return v;\n}","like_count":0,"discussions":[{"author":{"id":2785919,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/82/7f/c22de3a3.jpg","nickname":"çŸ³å·","note":"","ucode":"99E480A265E25F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591139,"discussion_content":"å› ä¸ºåµŒå¥—å°è£…å¯ä»¥å‡å°‘æ¥è‡ªå¤–éƒ¨å€¼çš„å‰¯ä½œç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666321046,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1026492,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a9/bc/abb7bfe3.jpg","nickname":"ä¼±æ˜¯é£ãƒ«","note":"","ucode":"E350293437E1B2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":603150,"discussion_content":"è€å¸ˆè¿™é‡Œçš„å‰¯ä½œç”¨æ˜¯å•¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1675989529,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1862271,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/nvWeOicPyIbAVkQnt4omOibkzZpG3AxSKy5CH1LicumpucX8hp4gZVSicKm1wnua6uuCRbHdXibh4FQLqLskqtoKiagg/132","nickname":"hsiang271828","note":"","ucode":"5453512A953D0A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591613,"discussion_content":"è¿™é‡Œæ˜¯æŠŠå€¼å˜ä¸ºå‡½æ•°ï¼Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666704771,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2336708,"avatar":"https://static001.geekbang.org/account/avatar/00/23/a7/c4/bedc49d3.jpg","nickname":"å“å‘¦ï¼Œä¸é”™å“¦","note":"","ucode":"DC599711D2CC69","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590879,"discussion_content":"è¿™æ ·è¿”å›çš„å°±æ˜¯ä¸€ä¸ªå€¼è€Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666148391,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358582,"user_name":"Guit","can_delete":false,"product_type":"c1","uid":2115605,"ip_address":"åŒ—äº¬","ucode":"70012D16C9117D","user_header":"https://static001.geekbang.org/account/avatar/00/20/48/15/63cc2633.jpg","comment_is_top":false,"comment_ctime":1664442726,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100122101,"comment_content":"const currying = (fn) =&gt; {\n  const l = fn.length\n  return function curried(...prevArgs) {\n    if (l === prevArgs.length) {\n      return fn(...prevArgs)\n    }\n    return (...nextArg) =&gt; curried(...nextArg, ...prevArgs)\n  }\n}\n\n","like_count":2},{"had_liked":false,"id":390220,"user_name":"jack123","can_delete":false,"product_type":"c1","uid":2718510,"ip_address":"æµ™æ±Ÿ","ucode":"873D0046EF39D6","user_header":"","comment_is_top":false,"comment_ctime":1714789009,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100122101,"comment_content":"function getCurrentOrder(cb) { getCurrentOrder( { order: CURRENT_ORDER_ID }, cb );}æ–‡ä¸­è´´çš„è¿™æ®µä»£ç æ˜¯ä¸æ˜¯å†™é”™äº†ï¼Œåº”è¯¥æ˜¯function getCurrentOrder(cb) { fetchOrder( { order: CURRENT_ORDER_ID }, cb );}","like_count":0},{"had_liked":false,"id":378773,"user_name":"Long","can_delete":false,"product_type":"c1","uid":1580358,"ip_address":"æ—¥æœ¬","ucode":"D85B99FD0C4B76","user_header":"https://wx.qlogo.cn/mmopen/vi_32/ZMALpD4bKCVdsx8ymCC5Oo0oxibxIFGQzT6fP2B8MEgLGLktQRX4ictobkbcNBDTQibjoQNKBmWCKomNibWqHZ5kpg/132","comment_is_top":false,"comment_ctime":1690768776,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100122101,"comment_content":"var words = &quot;   hello world  &quot;.split( &#47;\\s|\\b&#47; );\nconsole.log(words.filter( (v) =&gt; {return v} ))\n\nfilterå‡½æ•°é‡Œé¢å¯ä»¥å†™ä¸ªå‡½æ•°ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥è¿™æ ·ç†è§£ï¼Œè¿™ä¸ªå‡½æ•°å°±æ˜¯ç”¨åˆ°äº†æŸ¯é‡ŒåŒ–çš„æ¦‚å¿µï¼Ÿ","like_count":0},{"had_liked":false,"id":371108,"user_name":"Nuvole Bianche","can_delete":false,"product_type":"c1","uid":2100301,"ip_address":"ä¸Šæµ·","ucode":"3C059A454C16C7","user_header":"https://static001.geekbang.org/account/avatar/00/20/0c/4d/90ab20d8.jpg","comment_is_top":false,"comment_ctime":1679552759,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100122101,"comment_content":"```js\n\nfunction curry(fn,len=fn.length){\n  const arrArgs = []\n  function curried(...args){\n    arrArgs.push(args)\n    if(arrArgs.length&gt;=len){\n      return fn(...arrArgs)\n    }else{\n      return curried\n    }\n  }\n  return curried\n}\n\n```","like_count":0},{"had_liked":false,"id":358442,"user_name":"L","can_delete":false,"product_type":"c1","uid":3139235,"ip_address":"é™•è¥¿","ucode":"ED355151EA9FF8","user_header":"https://static001.geekbang.org/account/avatar/00/2f/e6/a3/e7e97896.jpg","comment_is_top":false,"comment_ctime":1664328264,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100122101,"comment_content":"\nå¯æ˜¯å¦‚æœæˆ‘ä»¬æƒ³è¿›ä¸€æ­¥å…·è±¡åŒ–ï¼Œé¢„åˆ¶ä¸€äº›å‚æ•°æ€ä¹ˆåŠï¼Ÿæ¯”å¦‚ä¸‹é¢çš„ getCurrentOrderï¼Œå¦‚æœæˆ‘ä»¬æƒ³æŠŠå‰é¢ getOrder é‡Œçš„ dataï¼Œä¹Ÿå†…ç½®æˆ order: CURRENT_ORDER_IDï¼Œè¿™æ ·ä¼šå¤§é‡å¢åŠ ä»£ç ç»“æ„çš„å¤æ‚æ€§ã€‚","like_count":0},{"had_liked":false,"id":358279,"user_name":"ç¯ç«é˜‘çŠ","can_delete":false,"product_type":"c1","uid":1289991,"ip_address":"æ¹–åŒ—","ucode":"D07A1D2101B9A9","user_header":"https://static001.geekbang.org/account/avatar/00/13/af/07/a32e3f4e.jpg","comment_is_top":false,"comment_ctime":1664165435,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100122101,"comment_content":"equational reasoning","like_count":0}]}