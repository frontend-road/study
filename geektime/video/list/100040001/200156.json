{"id":200156,"title":"46 | Oracle迁移实战","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geektime-mongodb-course\">https://gitee.com/geektime-geekbang/geektime-mongodb-course</a></p>","comments":[{"had_liked":false,"id":179751,"user_name":"比PP还懒","can_delete":false,"product_type":"c3","uid":1595172,"ip_address":"","ucode":"B7F17E27008088","user_header":"https://static001.geekbang.org/account/avatar/00/18/57/24/975f8aa2.jpg","comment_is_top":false,"comment_ctime":1582091217,"is_pvip":false,"replies":[{"id":70077,"content":"可以联系team@tapdata.io 获取线下版本。","user_name":"作者回复","user_name_real":"远航的TJ 唐建法","uid":1260017,"ctime":1582344466,"ip_address":"","comment_id":179751,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"老师，在内网没有互联网的情况下，有没有实时同步的工具推荐呀？","like_count":4,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"远航的TJ 唐建法","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484379,"discussion_content":"可以联系team@tapdata.io 获取线下版本。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582344466,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1133947,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIaOAxRlZjFkGfRBn420LuAcyWkMrpq5iafGdqthX5icJPjql0ibZOAdafaqbfvw4ZpVzDmsaYglVXDw/132","nickname":"唐朝农民","note":"","ucode":"6F8F43C6652225","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":179849,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582256486,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":190284,"user_name":"早早凡","can_delete":false,"product_type":"c3","uid":1161584,"ip_address":"","ucode":"4AA7CAB2CAF20D","user_header":"https://static001.geekbang.org/account/avatar/00/11/b9/70/c454312c.jpg","comment_is_top":false,"comment_ctime":1584626706,"is_pvip":false,"replies":[{"id":73548,"content":"可以的，支持mongo到mongo","user_name":"作者回复","user_name_real":"远航的TJ 唐建法","uid":1260017,"ctime":1584866715,"ip_address":"","comment_id":190284,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"可以做mongodb之间库粒度的实时迁移吗? ","like_count":2,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"远航的TJ 唐建法","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487938,"discussion_content":"可以的，支持mongo到mongo","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584866715,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225229,"user_name":"周佳艺","can_delete":false,"product_type":"c3","uid":2010286,"ip_address":"","ucode":"6BBA7D7994B228","user_header":"","comment_is_top":false,"comment_ctime":1591688292,"is_pvip":false,"replies":[{"id":88703,"content":"可以联系team@tapdata.io使用线下版本","user_name":"作者回复","user_name_real":"远航的TJ 唐建法","uid":1260017,"ctime":1596805185,"ip_address":"","comment_id":225229,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"比较敏感的数据，不适合云端迁移。有没有比较好的方式呢？","like_count":1,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"远航的TJ 唐建法","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497779,"discussion_content":"可以联系team@tapdata.io使用线下版本","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596805185,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":183432,"user_name":"甘陵笑笑生","can_delete":false,"product_type":"c3","uid":1028570,"ip_address":"","ucode":"9F9D60CFEB73DD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b1/da/88197585.jpg","comment_is_top":false,"comment_ctime":1583038366,"is_pvip":false,"replies":[{"id":74389,"content":"免费版本的管理端只能在云端。数据同步节点可以在线下（你自己的环境内）。","user_name":"作者回复","user_name_real":"远航的TJ 唐建法","uid":1260017,"ctime":1585265366,"ip_address":"","comment_id":183432,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"tapdata很不错，不过不知道如何收费，免费版本和线下版本有什么限制","like_count":1,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"远航的TJ 唐建法","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485686,"discussion_content":"免费版本的管理端只能在云端。数据同步节点可以在线下（你自己的环境内）。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585265366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":235427,"user_name":"秦歌","can_delete":false,"product_type":"c3","uid":1461320,"ip_address":"","ucode":"0C6A3861BF6AFE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/vE94VZiawHoIxqWbPZOGDnl34vXEhhYTRWxiaUaRB1GbaOOQ6tjWib3icYQf9iaQvVJswUkY2wg2PR4FmrzIzmqTibHA/132","comment_is_top":false,"comment_ctime":1595032173,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"这个不符合国情，免费云端同步公司不可能用，付费获取线下版本不是国内公司的风格，o(╥﹏╥)o","like_count":2},{"had_liked":false,"id":216773,"user_name":"Hoboson!","can_delete":false,"product_type":"c3","uid":1341692,"ip_address":"","ucode":"D593C3EB90E136","user_header":"https://static001.geekbang.org/account/avatar/00/14/78/fc/f7d59501.jpg","comment_is_top":false,"comment_ctime":1589340238,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"老师 我们是副本集，连接mongodb:&#47;&#47;DB:Passwd@主ip:27017,从ip:27017,仲裁:27017&#47;库名?connect=direct;slaveOk=true 应用用这个URL连接Mongodb，但是所有的查询都落在从库了，主库很少，从库压力很大cpu50%,主库20%，怎么做个均衡","like_count":1},{"had_liked":false,"id":363371,"user_name":"wljs","can_delete":false,"product_type":"c3","uid":1306543,"ip_address":"广东","ucode":"6B88A664972AD2","user_header":"https://static001.geekbang.org/account/avatar/00/13/ef/af/adce8c49.jpg","comment_is_top":false,"comment_ctime":1669602111,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"出错了。\nOPError: invalid_grant (授权码无效或已过期)\n    at processResponse (&#47;opt&#47;gateway&#47;node_modules&#47;openid-client&#47;lib&#47;helpers&#47;process_response.js:45:13)\n    at Client.grant (&#47;opt&#47;gateway&#47;node_modules&#47;openid-client&#47;lib&#47;client.js:1237:26)\n    at runMicrotasks (&lt;anonymous&gt;)\n    at processTicksAndRejections (internal&#47;process&#47;task_queues.js:93:5)\n    at async Client.callback (&#47;opt&#47;gateway&#47;node_modules&#47;openid-client&#47;lib&#47;client.js:460:24)\n    at async &#47;opt&#47;gateway&#47;node_modules&#47;openid-client&#47;lib&#47;passport_strategy.js:152:22","like_count":0},{"had_liked":false,"id":360696,"user_name":"走路顺拐","can_delete":false,"product_type":"c3","uid":1987040,"ip_address":"北京","ucode":"82D19A53DCB14E","user_header":"","comment_is_top":false,"comment_ctime":1666765763,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"请问10gb数据也是这样迁移吗？初始化的时候是不是时间会很长","like_count":0},{"had_liked":false,"id":287279,"user_name":"Mr.zhou","can_delete":false,"product_type":"c3","uid":1461488,"ip_address":"","ucode":"F7B2365D183788","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep0Cb1HGLBTD57I53ZLsIBnvN3YkJOTkibWyibPoCUM5cbnhqDicm1aKWTUFeI7SEd8REnibfZVWeM3BQ/132","comment_is_top":false,"comment_ctime":1617866915,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"在我们的生产环境的mongod集群服务器的数据目录下，有几个文件特别大：index-4-281553685572406263.wt，比如这个文件已经100G了。\n请问老师：\n1、index-4-281553685572406263.wt这种文件如何进行瘦身？\n2、以index头的wt文件是什么文件？有什么作用？\n3、在数据目录下还有以 collection开头的wt文件，比如collection-0--3466976885418097302.wt，这里面存储的是mongo数据库中集合中的数据吗？","like_count":0}]}