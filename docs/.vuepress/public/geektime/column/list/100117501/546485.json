{"id":546485,"title":"05ï½œå¦‚ä½•ä½¿ç”¨ FFmpeg ä¸ OBS è¿›è¡Œç›´æ’­æ¨æµï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯åˆ˜æ­§ã€‚</p><p>å‰é¢å››èŠ‚è¯¾ï¼Œæˆ‘ä»¬ä»‹ç»äº†éŸ³è§†é¢‘ä¸ç›´æ’­ç›¸å…³çš„åŸºç¡€çŸ¥è¯†ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å°±è¦è¿›å…¥å®æˆ˜é˜¶æ®µäº†ã€‚å­¦å®Œè¿™ä¸ªéƒ¨åˆ†ï¼ŒéŸ³è§†é¢‘å¤„ç†çš„å¸¸ç”¨å·¥å…·æ€ä¹ˆç”¨ï¼Œä½ å°±èƒ½å¿ƒä¸­æœ‰æ•°äº†ã€‚</p><p>å‰é¢æˆ‘ä»¬è™½ç„¶äº†è§£äº†ä»€ä¹ˆæ˜¯ç›´æ’­ï¼Œç›´æ’­æœåŠ¡å™¨å¯ä»¥ç”¨åˆ°å“ªäº›å¼€æºé¡¹ç›®ã€‚ä½†ç›´æ’­æ¨æµåˆ°åº•æ€ä¹ˆå®ç°å¹¶æ²¡æœ‰è¯¦ç»†å±•å¼€ï¼Œæ‰€ä»¥è¿™èŠ‚è¯¾æˆ‘ä»¬é‡ç‚¹è®²è®²æ€ä¹ˆåŸºäºFFmpegæ¨ç›´æ’­æµã€‚å¦‚æœä½ çš„ä¸šåŠ¡åœºæ™¯ç”¨FFmpegä¸å¤ªæ–¹ä¾¿ï¼Œæˆ‘è¿˜æä¾›äº†å¦ä¸€ä¸ªæ–¹æ³•â€”â€”æ¡Œé¢å·¥å…·OBSæ¨æµã€‚ç›¸ä¿¡å­¦å®Œä¹‹åï¼Œä½ å°±èƒ½è½»æ¾æå®šæ¨æµã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬åšç›´æ’­æ¨æµçš„å‰ææ˜¯è¦æœ‰ç›´æ’­æœåŠ¡å™¨æ¥æ”¶ç›´æ’­æµï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬è‡ªå·±å»ºè®¾ä¸€ä¸ªæµåª’ä½“æœåŠ¡å™¨ã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸Šä¸€èŠ‚è¯¾æåˆ°çš„å¼€æºç›´æ’­æœåŠ¡å™¨çš„<a href=\"https://github.com/ossrs/srs/wiki/v5_CN_Home\">å®˜æ–¹æ–‡æ¡£</a>éƒ¨ç½²ç›´æ’­æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥æŒ–æ˜è‡ªå·±å½“å‰ä½¿ç”¨çš„ç›´æ’­æœåŠ¡å¹³å°çš„æœåŠ¡å™¨æ¥æ”¶ç›´æ’­æµã€‚ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºï¼Œæˆ‘ä½¿ç”¨å¿«æ‰‹çš„ç›´æ’­äº‘æœåŠ¡æ¥æ¥æ”¶æˆ‘æ¨çš„ç›´æ’­æµã€‚ç•Œé¢å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/d4/0f/d478c987355cff9dc4f1a7fc849b930f.png?wh=2634x1616\" alt=\"å›¾ç‰‡\"></p><h2>FFmpegæ¨æµ</h2><p>é€šå¸¸ï¼Œæ¨æµæœåŠ¡å™¨çš„ç®¡ç†ç•Œé¢ä¼šæä¾›ä¸€ä¸ªæ”¶æµçš„RTMPæœåŠ¡å™¨åœ°å€ï¼Œè¿˜ä¼šæä¾›ä¸€ä¸ªç›´æ’­æµçš„æµåç§°ï¼Œä¹Ÿå«ä¸²æµå¯†é’¥ã€‚ä¾‹å¦‚æ¨æµçš„RTMPæœåŠ¡å™¨åœ°å€æ˜¯rtmp://publish.x.com/liveï¼Œä¸²æµå¯†é’¥æ˜¯streamï¼Œé‚£ä¹ˆæœ€åç»„æˆçš„æ¨æµåœ°å€å°±æ˜¯rtmp://publish.x.com/live/streamã€‚</p><!-- [[[read_end]]] --><p>å¦‚æœä½¿ç”¨FFmpegæ¨RTMPæµçš„è¯ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨çš„è¾“å‡ºæ ¼å¼ä¸ºFLVï¼Œé‚£ä¹ˆFFmpegçš„è¾“å…¥å°±æ˜¯-f flv rtmp://publish.x.com/live/streamã€‚ä¸ºäº†ä¾¿äºç†è§£ï¼Œæˆ‘ä»¬è‡ªå·±æ¨¡æ‹Ÿä¸€ä¸ªç›´æ’­ç”»é¢ï¼Œç„¶åæ¨RTMPç›´æ’­æµï¼Œä¸‹é¢æ˜¯å®Œæ•´çš„å‘½ä»¤è¡Œã€‚</p><pre><code class=\"language-plain\">ffmpeg -re -f lavfi -i testsrc=s=1280x720:r=25 -pix_fmt yuv420p -vcodec libx264 -f flv rtmp://publish.x.com/live/stream\n</code></pre><p>è¿™æ¡å‘½ä»¤è¡Œç†è§£èµ·æ¥æ¯”è¾ƒç®€å•ï¼ŒFFmpegåˆ†ä¸¤å¤§éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯è¾“å…¥éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯-iä¸-içš„å‚æ•°ä»¥åŠå®ƒä¹‹å‰çš„éƒ¨åˆ†ï¼Œå¦ä¸€éƒ¨åˆ†å°±æ˜¯-iä¸-iå‚æ•°åé¢çš„éƒ¨åˆ†ï¼Œä¸ºè¾“å‡ºéƒ¨åˆ†ã€‚ä»”ç»†åˆ’åˆ†ä¸€ä¸‹ï¼Œè¿™æ¡å‘½ä»¤è¡Œçš„è¾“å…¥éƒ¨åˆ†æ˜¯-re -f lavfi -i testsrc=s=1280x720:r=25ï¼Œè¾“å‡ºéƒ¨åˆ†æ˜¯-pix_fmt yuv420p -vcodec libx264 -f flv rtmp://publish.x.com/live/streamã€‚</p><h3>å‘½ä»¤è¡Œå‚æ•°</h3><p>è¾“å…¥éƒ¨åˆ†çš„æ„æ€æ˜¯ä½¿ç”¨FFmpegçš„lavfiè¾“å…¥æ ¼å¼ï¼Œä¹Ÿå¯ä»¥è¯´è¾“å…¥çš„æ˜¯lavfiè®¾å¤‡ã€‚è¾“å…¥å†…å®¹æ˜¯testsrcï¼Œè¿™ä¸ªtestsrcæ˜¯è¾“å…¥lavfiæ ¼å¼çš„å†…å®¹ï¼Œlavfiçš„æ ¼å¼æœ‰å¾ˆå¤šå†…å®¹ï¼Œè¿™äº›å†…å®¹ä¸æ˜¯æ—¢æœ‰çš„å†…å®¹ï¼Œä¹Ÿä¸æ˜¯æŸä¸ªæ–‡ä»¶ï¼Œè€Œæ˜¯FFmpegé€šè¿‡filterè‡ªå·±åˆ›å»ºå‡ºæ¥çš„ã€‚é™¤äº†testsrcï¼Œè¿˜å¯ä»¥åˆ›å»ºtestsrc2ã€colorã€yuvallç­‰å›¾åƒå†…å®¹ï¼ˆæ›´å¤šå¯åˆ›å»ºçš„å†…å®¹ä½ å¯ä»¥æŸ¥çœ‹<a href=\"https://ffmpeg.org/ffmpeg-filters.html#Video-Sources\">FFmpegå®˜æ–¹æ–‡æ¡£</a>ï¼‰ã€‚è¾“å…¥çš„å›¾åƒæ˜¯25fpsï¼Œä¹Ÿå°±æ˜¯æ¯ç§’é’Ÿä¼šå¾—åˆ°25å¸§å›¾åƒï¼Œå›¾åƒçš„å®½æ˜¯1280åƒç´ ï¼Œé«˜æ˜¯720åƒç´ ã€‚</p><p>å¦‚æœä½ è¶³å¤Ÿç»†å¿ƒçš„è¯ï¼Œå°±ä¼šå‘ç°æˆ‘è¿˜æ²¡æœ‰è®²-reè¿™ä¸ªå‚æ•°ã€‚å®ƒå…¶å®æ˜¯æ§åˆ¶è·å¾—å›¾åƒé¢‘ç‡çš„å‚æ•°ï¼Œç”¨æ¥æ§åˆ¶è¾“å…¥åŒ…çš„è¯»å–é€Ÿåº¦ï¼Œæ¯”å¦‚æˆ‘ä»¬è§„å®šä¸€ç§’é’Ÿè¾“å…¥25å¸§ï¼Œå®ƒä¼šæŠŠé€Ÿåº¦æ§åˆ¶åœ¨25å¸§ã€‚å› ä¸ºåœ¨FFmpegä¸­æ•°æ®æ˜¯ä»¥æœ€å¿«çš„é€Ÿåº¦è¯»å®Œçš„ï¼Œä¸€èˆ¬åœ¨é«˜é…çš„æœºå™¨ä¸Šè¯»å–é€Ÿåº¦ä¼šéå¸¸å¿«ã€‚æˆ‘ä»¬ç”¨FFmpegè‡ªä¸»ç”Ÿæˆçš„æ•°æ®æ¥æ¨¡æ‹Ÿç›´æ’­ï¼Œå°±éœ€è¦ç”¨-reæ¥æ§åˆ¶ä¸€ä¸‹é€Ÿåº¦ã€‚ä½†å¦‚æœæˆ‘ä»¬æ˜¯è¯»å–æ‘„åƒå¤´è¿˜æœ‰RTSPç­‰ç›´æ’­åè®®è¾“å…¥çš„æ•°æ®ï¼Œå°±å¯ä»¥ä¸æ§åˆ¶ï¼Œå› ä¸ºå¯¹æ–¹è¾“å‡ºä¹Ÿæ˜¯æ§åˆ¶é¢‘ç‡çš„ã€‚</p><p>è¾“å‡ºéƒ¨åˆ†çš„æ„æ€æ˜¯å…ˆæŠŠè¯»å–çš„å›¾åƒåƒç´ ç‚¹çš„é¢œè‰²æ ¼å¼è½¬æˆyuv420pæ ¼å¼ï¼Œå…³äºyuv420pæ ¼å¼ï¼Œæˆ‘ä»¬åœ¨å‰é¢çš„è¯¾ç¨‹ä¸­æ˜¯è®²è¿‡çš„ï¼Œè¿™é‡Œä¸ºä»€ä¹ˆä½¿ç”¨yuv420på‘¢ï¼Ÿå› ä¸ºyuv420påœ¨è§†é¢‘å›¾åƒæ ¼å¼ä¸­æ˜¯å…¼å®¹æ€§æœ€å¥½çš„ï¼Œä½¿ç”¨èµ·æ¥ä¼šæ¯”è¾ƒç¨³å®šã€‚</p><p>æ¥ä¸‹æ¥ç¼–ç å™¨éƒ¨åˆ†ä½¿ç”¨çš„è§†é¢‘ç¼–ç å™¨ä¸ºlibx264ã€‚libx264æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹ç¼–ç å™¨ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯libx264çš„FFmpegéœ€è¦ä½¿ç”¨è‡ªç”±è½¯ä»¶åŸºé‡‘ä¼šçš„é€šç”¨å…¬å…±åè®®çš„Licenseï¼Œä¹Ÿå°±æ˜¯å¸¸è¯´çš„GPLåè®®ã€‚ä½œä¸ºå¼€æºè½¯ä»¶å‘è¡Œç‰ˆä½¿ç”¨é—®é¢˜ä¸å¤§ï¼Œå¦‚æœå•†ç”¨çš„è¯å¯èƒ½éœ€è¦è€ƒè™‘æ³•å¾‹é£é™©ã€‚</p><p>æˆ‘ä»¬ç»§ç»­çœ‹è¾“å‡ºéƒ¨åˆ†ï¼Œ-f flvè§„å®šæˆ‘ä»¬è¾“å‡ºçš„å°è£…æ ¼å¼ä¸ºFLVï¼Œç”¨-fæŒ‡å®šå°è£…æ ¼å¼ä»¥åï¼Œè¾“å‡ºæ–‡ä»¶çš„æ–‡ä»¶åå…¶å®ä¹Ÿä¸ä¼šæœ‰ä½œç”¨ï¼Œå› ä¸ºFFmpegä¼šå¼ºåˆ¶è¾“å‡º-fæŒ‡å®šçš„è¾“å‡ºæ ¼å¼ã€‚æœ€åè¾“å‡ºçš„æ–‡ä»¶æ˜¯ä¸€ä¸ªRTMPåè®®ç‰¹å¾å­—ç¬¦å¼€å¤´çš„URLï¼Œæ‰€ä»¥æœ€ç»ˆä¼šå°†FLVæ ¼å¼çš„å†…å®¹è¾“å‡ºåˆ°FFmpeg RTMPåè®®å†…å®¹ä¸­ã€‚</p><p>åˆ°è¿™é‡Œï¼Œä½¿ç”¨FFmpegæ¨æµåˆ°RTMPæœåŠ¡å™¨å°±å¯ä»¥æ‰§è¡Œäº†ã€‚æˆ‘ä»¬ç‚¹å¼€å¿«æ‰‹ï¼Œåˆ°æˆ‘ä»¬è‡ªå·±çš„ç›´æ’­é—´çœ‹ä¸€ä¸‹æ•ˆæœï¼Œä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ç›´æ’­å·²ç»å¼€å§‹äº†ï¼Œtestsrcçš„ç”»é¢å·²ç»å‡ºæ¥äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ee/42/ee0c74eda1fd5c8846ed041166b1ee42.png?wh=4449x3057\" alt=\"å›¾ç‰‡\"></p><p>æœ‰äº›äººè§‰å¾—å®‰è£…FFmpegå¤ªéº»çƒ¦äº†ï¼Œå¹¶ä¸”ä½¿ç”¨å‘½ä»¤è¡Œä¹Ÿæ¯”è¾ƒç¹çï¼Œè®°ä¸ä½å‚æ•°ã€‚åˆšå…¥é—¨çš„æ—¶å€™ä½¿ç”¨FFmpegå¯èƒ½ç¡®å®æœ‰äº›éº»çƒ¦ï¼Œä¼šè§‰å¾—å‚æ•°å¤ªå¤šã€‚å…¶å®ç”¨ç€ç”¨ç€æ‰¾åˆ°çªé—¨åï¼Œä½ å°±ä¼šå‘ç°<strong>FFmpegå‚æ•°å¹¶ä¸å¤šï¼Œå°¤å…¶æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„èƒ½åŠ›éƒ¨åˆ†ï¼Œæ¨¡å—åŒ–åšå¾—å¾ˆå¥½</strong>ï¼Œä¸åŒçš„ç¼–ç å™¨éƒ½æœ‰è‡ªå·±çš„å‚æ•°å¯ä»¥é…ç½®ï¼Œå¦‚æœæˆ‘ä»¬é›†ä¸­ç²¾åŠ›åªå…³æ³¨æˆ‘ä»¬è‡ªå·±ä½¿ç”¨çš„æ¨¡å—éƒ¨åˆ†ï¼Œå‚æ•°å¹¶ä¸å¤šä¹Ÿå¾ˆå®¹æ˜“è®°ä½ã€‚</p><p>å½“ç„¶æœ‰äº›äººå¯èƒ½æƒ³è¦é‡‡é›†è‡ªå·±çš„æ‘„åƒå¤´ã€æ¡Œé¢ç­‰å¤–è®¾ï¼Œè¿™äº›é€šè¿‡FFmpegçš„-deviceså‚æ•°å¯ä»¥å¾—åˆ°ç›¸å…³çš„è®¾å¤‡ä¿¡æ¯ã€‚é€šè¿‡<a href=\"https://ffmpeg.org/ffmpeg-devices.html\">FFmpegçš„è®¾å¤‡ç›¸å…³çš„æ“ä½œæ–‡æ¡£</a>æŒ‡å¼•ä¿¡æ¯ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±ç”¨FFmpegè·å¾—æ‘„åƒå¤´ã€æ¡Œé¢ç­‰å¤–è®¾å›¾åƒï¼Œé€šè¿‡ç¼–ç æ¨æµåˆ°ç›´æ’­æœåŠ¡å™¨ä¸Šã€‚æ”¯æŒçš„å¤–è®¾æ¯”è¾ƒå¤šï¼Œè¿™é‡Œå°±ä¸å±•å¼€è¯´äº†ï¼Œå…·ä½“å†…å®¹ä½ å¯ä»¥å‚è€ƒæ–‡æ¡£è‡ªå·±æŒ–æ˜ä¸€ä¸‹ã€‚</p><h2>å¸¦ç•Œé¢çš„æ¨æµç¥å™¨OBS</h2><p>å¦‚æœä½ ç¡®å®è§‰å¾—FFmpegå¤ªéš¾ã€å¤ªéº»çƒ¦ï¼Œè¿˜æœ‰ä¸€ç§æ–¹å¼ä¹Ÿèƒ½å¸®åŠ©ä½ å®Œæˆæ¨æµã€‚é‚£å°±æ˜¯<strong>ä½¿ç”¨ç•Œé¢ç›´æ’­æ¨æµç¥å™¨OBSï¼Œè¿™ç§å·¥å…·ä¸ç”¨å‘½ä»¤è¡Œï¼Œä¹Ÿå¯ä»¥å¸®ä½ è½»æ¾æå®šæ¨æµ</strong>ã€‚</p><p>OBSæ˜¯ä¸ªæ¡Œé¢åº”ç”¨ç¨‹åºï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦ä»OBSå®˜æ–¹ç½‘ç«™ä¸‹è½½OBSå¹¶å®‰è£…ä¸Šï¼Œå®‰è£…åæ‰“å¼€çš„ç•Œé¢æ¯”è¾ƒç›´è§‚ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/df/b7/df5ca1ced76500a1yy4aef10ce768fb7.png?wh=1079x751\" alt=\"å›¾ç‰‡\"></p><p>OBSçš„åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸»è¦ä»‹ç»æŠ“å–æœ¬åœ°çª—å£çš„åœºæ™¯ã€‚é¦–å…ˆæˆ‘ä»¬åŸºäºåœºæ™¯æ·»åŠ ä¸€ä¸ªæ¥æºï¼Œæ¥æºå¯ä»¥é€‰æ‹©çª—å£é‡‡é›†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/02/9a/024b2354a6f205283573140c6f10919a.png?wh=1432x874\" alt=\"å›¾ç‰‡\"></p><p>ç„¶åé€‰æ‹©ä¸€ä¸ªçª—å£ï¼Œæ¯”å¦‚æˆ‘æ­£åœ¨æœ¬åœ°ç”¨æ’­æ”¾å™¨æ’­æ”¾ä¸€ä¸ªMP4çš„è§†é¢‘ï¼Œæˆ‘å¯ä»¥é€šè¿‡OBSæŠ“å–è¿™ä¸ªæ’­æ”¾MP4è§†é¢‘çš„æ’­æ”¾å™¨çª—å£ï¼Œæˆ‘ä»¬é¢„è®¡å°†è¿™ä¸ªæ’­æ”¾å™¨æ­£åœ¨æ’­æ”¾çš„å†…å®¹ä»¥ç›´æ’­çš„æ–¹å¼æ¨æµåˆ°RTMPæœåŠ¡å™¨ä¸Šã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/5b/2d/5b65e7fc7cf66f3aa0e9767bf346102d.png?wh=819x912\" alt=\"å›¾ç‰‡\"></p><p>ç„¶åæˆ‘ä»¬è®¾ç½®ä¸€ä¸‹æ¨æµå’Œç¼–ç å™¨ï¼Œç‚¹è®¾ç½®æŒ‰é’®ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e0/c1/e071438ce009c8a90d44e198b0c95dc1.png?wh=1077x749\" alt=\"å›¾ç‰‡\"></p><p>è¿›å…¥è®¾ç½®çª—å£åé€‰æ¨æµé€‰é¡¹ï¼Œå¡«å…¥RTMPæœåŠ¡å™¨åœ°å€ï¼Œæ¨æµå¯†é’¥ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/26/5d/26d5a553231fca1a849930b788b0a05d.png?wh=981x748\" alt=\"å›¾ç‰‡\"></p><p>ä¸ºäº†è®©æ¨æµæ›´æµç•…ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è¿›å…¥è§†é¢‘é€‰é¡¹é‡Œé¢ï¼Œè®¾ç½®ä¸€ä¸‹è§†é¢‘çš„ç¼–ç å‚æ•°ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e2/ea/e2850d4ae8c2aa03ef309510d8f4deea.png?wh=981x748\" alt=\"å›¾ç‰‡\"></p><p>ä¸»è¦æ˜¯åˆ†è¾¨ç‡å’Œå¸§ç‡ï¼Œéœ€è¦æˆ‘ä»¬ç¨å¾®è°ƒæ•´ä¸€ä¸‹ï¼Œæ¯”å¦‚æˆ‘çš„æ’­æ”¾å™¨æ’­æ”¾çš„è§†é¢‘æ˜¯720pï¼Œé‚£æˆ‘å°±å¯ä»¥é€‰æ‹©720på¯¹åº”çš„åˆ†è¾¨ç‡ï¼Œå…³äºåˆ†è¾¨ç‡æˆ‘ä»¬åœ¨<a href=\"https://time.geekbang.org/column/article/543605\">ç¬¬ä¸€èŠ‚è¯¾</a>å·²ç»ä»‹ç»è¿‡äº†ï¼Œä½ å¯ä»¥ä¸€è¾¹å›é¡¾ä¸€è¾¹æ“ä½œã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬è®¾ç½®ä¸€ä¸‹éŸ³é¢‘ç¼–ç å‚æ•°ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/c7/8b/c792edf5536cd244fyycb9146fd4b88b.png?wh=981x748\" alt=\"å›¾ç‰‡\"></p><p>éŸ³é¢‘ç¼–ç æˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦è¿›è¡Œè®¾ç½®ï¼Œæ¯”å¦‚æ˜¯å¦é‡‡é›†æ¡Œé¢å£°éŸ³ï¼Œæ˜¯å¦é‡‡é›†éº¦å…‹é£å£°éŸ³ç­‰ï¼Œæˆ‘ä»¬è¿™é‡Œé€‰æ‹©é»˜è®¤çš„éº¦å…‹é£è¾“å…¥å£°éŸ³å³å¯ã€‚</p><p>å½“ç„¶ï¼Œå¦‚æœæˆ‘ä»¬æ¨æµçš„PCæœºæœ‰GPUå¡ï¼Œæˆ–è€…æˆ‘ä»¬æƒ³ç›´æ¥ç”¨CPUè½¯ç¼–ç çš„è¯ï¼Œå¯ä»¥è¿›å…¥é«˜çº§è®¾ç½®é¡¹è®¾ç½®è¯¦ç»†å‚æ•°ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/39/a1/391c7e0de8e59813fcf3b0079c197ea1.png?wh=977x744\" alt=\"å›¾ç‰‡\"></p><p>å¯¹åº”çš„å¯ä»¥è®¾ç½®çš„å‚æ•°è¿˜æ˜¯æŒºå¤šçš„ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œé»˜è®¤ç”¨çš„æ˜¯x264ç¼–ç å™¨ï¼Œé‚£ä¹ˆå¯ä»¥è®¾ç½®ç ç‡æ˜¯å¦ä¸ºCBRï¼ŒCBRä¸»è¦æ˜¯æ’å®šç ç‡ï¼Œä¹Ÿå°±æ˜¯åœ¨ç”»é¢å’Œè§†é¢‘å›¾åƒè¿åŠ¨åœºæ™¯æ¯”è¾ƒå¤æ‚çš„æ—¶å€™ï¼Œç”»è´¨ä¼šæ˜¾å¾—æ¨¡ç³Šä¸€äº›ï¼Œå¦‚æœç”¨VBRçš„åŠ¨æ€ç ç‡çš„è¯ï¼Œåœ¨ç”»è´¨æ–¹é¢ä¼šæ ¹æ®å›¾åƒè¿åŠ¨åœºæ™¯ç­‰å› ç´ å­˜å‚¨æ›´å¤šçš„å‚è€ƒå¸§ç›¸å…³çš„ä¿¡æ¯ï¼Œç ç‡ä¼šåŠ¨æ€åœ°æ‹‰å‡ã€‚</p><p>ä¹‹åå°±éœ€è¦è®¾ç½®å…³é”®å¸§é—´éš”ï¼Œè¿™é‡Œæˆ‘è®¾ç½®çš„1å…¶å®ä¸å¤ªåˆç†ï¼Œä¸€èˆ¬æˆ‘ä»¬è®¾ç½®2åˆ°5ç§’é’Ÿæ¯”è¾ƒåˆç†ã€‚å…³é”®å¸§é—´éš”è®¾ç½®å¾—åˆç†çš„è¯ï¼Œå¯ä»¥ç¡®ä¿ç›´æ’­å»¶è¿Ÿä½çš„åŒæ—¶ç”»è´¨æ›´é«˜ï¼Œè¿™ä¸ªéƒ¨åˆ†æˆ‘ä»¬å®Œå…¨å¯ä»¥æ ¹æ®è‡ªå·±çš„è€ƒæ ¸æ ‡å‡†æ“ä½œã€‚å†å¾€ä¸‹çœ‹å°±æ˜¯H.264ç¼–ç æ ‡å‡†é‡Œé¢çš„è®¾ç½®ï¼Œä¾‹å¦‚å¿«é€Ÿç¼–ç ï¼Œç¼–ç çš„profileè®¾ç½®ï¼Œæ˜¯å¦ç”¨ä½å»¶è¿Ÿæ¨¡å¼ç­‰ã€‚</p><p>å¦‚æœè¿™äº›å‚æ•°è®¾ç½®å¾—ä¸å°½å…´çš„è¯ï¼Œäº†è§£äº†x264çš„æ›´å¤šè¯¦ç»†å‚æ•°åï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±é€‰å¡«æ›´ç»†èŠ‚çš„å‚æ•°ã€‚å½“ç„¶ï¼Œå¦‚æœæƒ³ç”¨GPUç¼–ç çš„è¯ï¼Œä¹Ÿå¯ä»¥è‡ªç”±é€‰æ‹©ï¼Œæ¯”å¦‚æˆ‘æ˜¯è‹¹æœç”µè„‘ï¼Œé‚£ä¹ˆæˆ‘å¯ä»¥é€‰æ‹©ä½¿ç”¨videotoolboxè¿›è¡Œè§†é¢‘ç¼–ç ï¼Œè¿™æ ·ä¹Ÿå¯ä»¥èŠ‚çœä¸€äº›æˆ‘çš„CPUèµ„æºï¼Œç”µè„‘çš„é£æ‰‡ä¹Ÿä¼šç›¸å¯¹å®‰é™ä¸€äº›ï¼Œç¼–ç æ€§èƒ½å¤§å¤šæ•°æƒ…å†µä¸‹ä¼šæ¯”CPUç¼–ç è¦é«˜å¾ˆå¤šã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/8f/00/8f7ba8247fd55bac74c86f98668a4200.png?wh=1076x747\" alt=\"å›¾ç‰‡\"></p><p>æ¨æµä¹‹åï¼Œæˆ‘ä»¬å°±èƒ½åœ¨ç›´æ’­é—´é‡Œçœ‹åˆ°è‡ªå·±çš„ç›´æ’­æµå†…å®¹äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/b3/3a/b3571d654785b39b74f1c7d9baa9c93a.png?wh=4421x3219\" alt=\"å›¾ç‰‡\"></p><h2>å°ç»“</h2><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é›¶åŸºç¡€çš„æƒ…å†µä¸‹åšç›´æ’­æ¨æµï¼Œæ¨ä¸€äº›æˆ‘ä»¬è‡ªå·±çš„å†…å®¹åˆ°ç›´æ’­æœåŠ¡å™¨ä¸Šé¢äº†ã€‚æ— è®ºæ˜¯ä½¿ç”¨FFmpegè¿˜æ˜¯OBSï¼Œéƒ½èƒ½å¤Ÿå¾ˆå¥½åœ°ä½œä¸ºæ¨æµå®¢æˆ·ç«¯è¿›è¡Œæ¨æµï¼Œä½¿ç”¨FFmpegæ¨æµçš„è¯ä¸€æ¡å‘½ä»¤è¡Œå°±å¯ä»¥æå®šã€‚å¦‚æœä½ ä¸å–œæ¬¢ç”¨é¼ æ ‡ç‚¹æ¥ç‚¹å»çš„è¯ï¼Œæ¨èä½ ä½¿ç”¨FFmpegæ¨æµï¼›è€Œç”¨OBSçš„è¯ï¼Œä¸éœ€è¦ä¸‹è½½å®‰è£…FFmpegï¼Œä¸éœ€è¦ç‚¹å¼€ç»ˆç«¯è‡ªå·±è¾“å…¥å„ç§å‚æ•°ï¼Œä¹Ÿä¸ç”¨ç‰¹æ„å»è®°è¿™äº›å‚æ•°å°±èƒ½è½»æ¾æå®šæ¨æµï¼Œæ·±åº¦æŒ–æ˜çš„è¯ï¼Œç”šè‡³è¿˜å¯ä»¥å®ç°å¯¼æ’­ç­‰åŠŸèƒ½ã€‚</p><p>æ›´å¤šOBSçš„é«˜çº§åŠŸèƒ½å’Œé»‘ç§‘æŠ€ï¼Œè¿˜æ˜¯éœ€è¦æˆ‘ä»¬è‡ªå·±è€å¿ƒåœ°å»ä¸€ç‚¹ç‚¹æŒ–æ˜ã€‚åœ¨è¿™é‡Œæˆ‘é€šè¿‡ç®€å•çš„ä»‹ç»å¼•é¢†ä½ å…¥é—¨ï¼Œç›®çš„æ˜¯<strong>è®©ä½ å…·å¤‡åŸºç¡€çš„ç›´æ’­æ¨æµèƒ½åŠ›</strong>ã€‚ä½†å¸ˆçˆ¶é¢†è¿›é—¨ï¼Œä¿®è¡Œåœ¨ä¸ªäººï¼Œè¿˜æ˜¯éœ€è¦ä½ è‡ªå·±åŠ¨æ‰‹å®é™…æ“ä½œèµ·æ¥ï¼Œç›¸ä¿¡ä½ ä¼šæœ‰ä¸å°çš„æ”¶è·ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>é€šè¿‡åˆšåˆšçš„æ“ä½œï¼Œæˆ‘ä»¬æ¨æµæˆåŠŸäº†ï¼Œè€Œä¸”ä¹Ÿèƒ½åœ¨æ’­æ”¾å™¨ç«¯çœ‹åˆ°æ¨æµæˆåŠŸåçš„ç›´æ’­æµäº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆç¡®è®¤è¿™ä¸ªç›´æ’­æµæ˜¯ä¸æ˜¯æˆ‘ä»¬è®¾ç½®å¥½çš„1280x720çš„åˆ†è¾¨ç‡ï¼Œå¸§ç‡æ˜¯ä¸æ˜¯25fpså‘¢ï¼ŸæœŸå¾…åœ¨è¯„è®ºåŒºçœ‹åˆ°ä½ çš„ç­”æ¡ˆï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™èŠ‚è¯¾åˆ†äº«ç»™éœ€è¦çš„æœ‹å‹ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼</p>","comments":[{"had_liked":false,"id":355039,"user_name":"Geek_e2e4e9","can_delete":false,"product_type":"c1","uid":1585508,"ip_address":"åŒ—äº¬","ucode":"4FA7B065226823","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/HWfgYFkH80yh2yCWEAK430aZ1e9BbvQI4DN9q8ib4Czc8DTHeWmmIuep74wBIRGARhJd6eY6Tpt3QUSpAicDIHNw/132","comment_is_top":false,"comment_ctime":1660993564,"is_pvip":false,"replies":[{"id":129219,"content":"å®‰è£…çš„è¯æœ€å¥½çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œæ¯•ç«Ÿç‰ˆæœ¬æ¯”è¾ƒå¤šï¼Œjianshuåªæ˜¯æŸä¸ªäººåœ¨æŸä¸ªåœºæ™¯çš„æ“ä½œï¼Œå®˜æ–¹æ–‡æ¡£çš„å†…å®¹æ›´è¯¦ç»†ä¸€äº›ï¼Œå†µä¸”ffmpegå¾ˆæ³¨é‡æ–‡æ¡£ä¸ä»£ç ç‰ˆæœ¬ä¸€è‡´æ€§","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1287929,"ctime":1661136382,"ip_address":"åŒ—äº¬","comment_id":355039,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100117501,"comment_content":"ffmpegå®‰è£…å¤ªè´¹åŠ²äº†ï¼Œåˆ†äº«ä¸ªé è°±çš„æ–‡æ¡£ï¼šhttps:&#47;&#47;www.jianshu.com&#47;p&#47;663267e13769","like_count":3,"discussions":[{"author":{"id":1287929,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a6/f9/79cad962.jpg","nickname":"æ‚Ÿç©º@OnVideo","note":"","ucode":"C320167A9A17B8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584793,"discussion_content":"å®‰è£…çš„è¯æœ€å¥½çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œæ¯•ç«Ÿç‰ˆæœ¬æ¯”è¾ƒå¤šï¼Œjianshuåªæ˜¯æŸä¸ªäººåœ¨æŸä¸ªåœºæ™¯çš„æ“ä½œï¼Œå®˜æ–¹æ–‡æ¡£çš„å†…å®¹æ›´è¯¦ç»†ä¸€äº›ï¼Œå†µä¸”ffmpegå¾ˆæ³¨é‡æ–‡æ¡£ä¸ä»£ç ç‰ˆæœ¬ä¸€è‡´æ€§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661136383,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2615209,"avatar":"https://static001.geekbang.org/account/avatar/00/27/e7/a9/b09e3701.jpg","nickname":"æ‘å£å¤§å‘","note":"","ucode":"F616B90C78008B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1287929,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a6/f9/79cad962.jpg","nickname":"æ‚Ÿç©º@OnVideo","note":"","ucode":"C320167A9A17B8","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":585308,"discussion_content":"è¯·æ•™ä¸€ä¸‹å¤§å¸ˆå…„ï¼Œè¿™é‡Œè¯´å®˜æ–¹æ–‡æ¡£çš„å†…å®¹æ›´è¯¦ç»†ä¸€ç‚¹ï¼Œæˆ‘æ‰¾äº†ä¸€ä¸‹å®˜æ–¹å…³äºç¼–è¯‘çš„æ–‡æ¡£ï¼Œä¸Šé¢åªæ˜¯å¾ˆç®€å•çš„è¯´äº†ä¸‰ä¸ªæ­¥éª¤ï¼š\n1 ./configure \n2 make\n3 mak install\nä½†æ˜¯æˆ‘æœäº†ä¸€ä¸‹ç½‘ä¸Šçš„åšå®¢å´å‘ç°ä¼šè¯¦ç»†å¾ˆå¤šï¼Œæ¯”å¦‚ä¸Šé¢æ–‡æ¡£çš„configureå°±å¤šäº†å¾ˆå¤šå‚æ•°ï¼Œå¦‚ä¸‹ï¼š\n./configure --prefix=/usr/local/ffmpeg --enable-gpl --enable-nonfree --enable-libfdk-aac --enable-libx264 --enable-libx265 --enable-filter=delogo --enable-debug --disable-optimizations --enable-libspeex --enable-videotoolbox --enable-shared --enable-pthreads --enable-version3 --enable-ffplay --enable-hardcoded-tables --cc=clang --host-cflags= --host-ldflags= --disable-x86asm\nè«éæ˜¯æˆ‘æ‰¾é”™äº†å®˜æ–¹æ–‡æ¡£ï¼Ÿ\nè¿™é‡Œèƒ½å¦è¡¥å……ä¸€ä¸‹å…³äºFFmpegæºç ç¼–è¯‘çš„ä¸€äº›å†…å®¹å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661477477,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":584793,"ip_address":"å¹¿ä¸œ","group_id":0},"score":585308,"extra":""}]}]},{"had_liked":false,"id":355693,"user_name":"æ‘å£å¤§å‘","can_delete":false,"product_type":"c1","uid":2615209,"ip_address":"åŒ—äº¬","ucode":"F616B90C78008B","user_header":"https://static001.geekbang.org/account/avatar/00/27/e7/a9/b09e3701.jpg","comment_is_top":false,"comment_ctime":1661660027,"is_pvip":false,"replies":[{"id":129430,"content":"rtmpé‚£ä¸ªurlç”¨åŒå¼•å·æ‰©èµ·æ¥","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1287929,"ctime":1661669359,"ip_address":"åŒ—äº¬","comment_id":355693,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100117501,"comment_content":"è¯·æ•™ä¸€ä¸‹è€å¸ˆï¼ŒæŒ‰ç…§ä¸Šé¢è¯´çš„ï¼Œè¯•äº†ä¸€ä¸‹ffmpegæ¨æµï¼Œä¸è¿‡ä¸€ç›´é”™è¯¯ï¼Œéš¾é“æ˜¯æˆ‘å‚æ•°æœ‰è¯¯ï¼Ÿä¿¡æ¯å¦‚ä¸‹ï¼šxxx@xxx-MB4 FFmpeg % ffmpeg -re -f  -i &#47;Users&#47;allenchen&#47;workspace&#47;FFmpeg&#47;output.flv lavfi -i testsrc=s=1280x720:r=25 -pix_fmt yuv420p -vcodec libx264 -f flv rtmp:&#47;&#47;open-push.voip.yximgs.com&#47;gifshow&#47;kwai_actL_ol_act_9934790925_strL_origin?sign=633d0143-c210c0d7d91c2c1849c18bbeeac98244&amp;ks_fix_ts\nè¾“å‡ºå†…å®¹ï¼š\n[4] 32198\nzsh: no matches found: rtmp:&#47;&#47;open-push.voip.yximgs.com&#47;gifshow&#47;kwai_actL_ol_act_9934790925_strL_origin?sign=633d0143-c210c0d7d91c2c1849c18bbeeac98244\n[4]    exit 1     ffmpeg -re -f -i &#47;Users&#47;allenchen&#47;workspace&#47;FFmpeg&#47;output.flv lavfi -i      -\nzsh: command not found: ks_fix_ts","like_count":1,"discussions":[{"author":{"id":1287929,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a6/f9/79cad962.jpg","nickname":"æ‚Ÿç©º@OnVideo","note":"","ucode":"C320167A9A17B8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585536,"discussion_content":"rtmpé‚£ä¸ªurlç”¨åŒå¼•å·æ‰©èµ·æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661669360,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":385765,"user_name":"ifelse","can_delete":false,"product_type":"c1","uid":2550743,"ip_address":"æµ™æ±Ÿ","ucode":"D0565908C99695","user_header":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","comment_is_top":false,"comment_ctime":1703305954,"is_pvip":false,"replies":[{"id":140666,"content":"ç®—æ˜¯","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1287929,"ctime":1703816375,"ip_address":"åŒ—äº¬","comment_id":385765,"utype":1}],"discussion_count":1,"race_medal":3,"score":2,"product_id":100117501,"comment_content":"è€å¸ˆï¼Œè¯·é—®æŠ–éŸ³ï¼ŒBç«™ç­‰å¹³å°æä¾›çš„Pcç›´æ’­å·¥å…·ï¼Œç®—æ˜¯ç±»ä¼¼OBSçš„æ¨æµå·¥å…·å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1287929,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a6/f9/79cad962.jpg","nickname":"æ‚Ÿç©º@OnVideo","note":"","ucode":"C320167A9A17B8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":634688,"discussion_content":"ç®—æ˜¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1703816375,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":362250,"user_name":"åŒ…ç¾ä¸½","can_delete":false,"product_type":"c1","uid":1159509,"ip_address":"åŒ—äº¬","ucode":"EE9C9EFC495257","user_header":"https://static001.geekbang.org/account/avatar/00/11/b1/55/249c3abd.jpg","comment_is_top":false,"comment_ctime":1668343612,"is_pvip":false,"replies":[{"id":131821,"content":"æ£’ï¼","user_name":"ç¼–è¾‘å›å¤","user_name_real":"ç¼–è¾‘","uid":2843479,"ctime":1668529676,"ip_address":"åŒ—äº¬","comment_id":362250,"utype":2}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100117501,"comment_content":"æˆåŠŸäº†ï¼","like_count":0,"discussions":[{"author":{"id":2843479,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/63/57/cba4c68b.jpg","nickname":"å°è™å­ğŸ¯","note":"","ucode":"4C9530B3FB407B","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593795,"discussion_content":"æ£’ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668529676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":8}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355878,"user_name":"Geek_3b601e","can_delete":false,"product_type":"c1","uid":1425508,"ip_address":"åŒ—äº¬","ucode":"D52E462272BD9E","user_header":"https://static001.geekbang.org/account/avatar/00/15/c0/64/e6539baf.jpg","comment_is_top":false,"comment_ctime":1661824033,"is_pvip":false,"replies":[{"id":129522,"content":"ä¸‹ä¸€å ‚è¯¾æœ‰è®²å“¦ ğŸ˜","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1287929,"ctime":1661831501,"ip_address":"åŒ—äº¬","comment_id":355878,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100117501,"comment_content":"å¤§å¸ˆå…„ ç­”æ¡ˆæ˜¯ä»€ä¹ˆï¼Œç›´æ’­çš„è¿‡ç¨‹ä¸­æ€ä¹ˆçœ‹åˆ†è¾¨ç‡å’Œå¸§ç‡","like_count":0,"discussions":[{"author":{"id":1287929,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a6/f9/79cad962.jpg","nickname":"æ‚Ÿç©º@OnVideo","note":"","ucode":"C320167A9A17B8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585799,"discussion_content":"ä¸‹ä¸€å ‚è¯¾æœ‰è®²å“¦ ğŸ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661831501,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354344,"user_name":"æ™“é£æ®‹æœˆ","can_delete":false,"product_type":"c1","uid":1168707,"ip_address":"åŒ—äº¬","ucode":"9B654623576EB0","user_header":"https://static001.geekbang.org/account/avatar/00/11/d5/43/2af09681.jpg","comment_is_top":false,"comment_ctime":1660292727,"is_pvip":false,"replies":[{"id":128879,"content":"è¿œç¨‹æ§åˆ¶çš„è¯ å¤§å¤šæ•°å¥½åƒé€‰æ‹©çš„æ˜¯RTC","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1287929,"ctime":1660299570,"ip_address":"åŒ—äº¬","comment_id":354344,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100117501,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³åšä¸ªè¿œç¨‹æ§åˆ¶Androidå¹³æ¿ï¼ŒAndroidå½•å±ç”¨H264ç¼–ç ï¼ŒæœåŠ¡å™¨åšè½¬å‘ï¼ˆNATç©¿è¶Šå±€é™å¤ªå¤§ï¼‰ï¼Œä½†æœåŠ¡å™¨åªæœ‰5Må¸¦å®½ï¼Œè¿˜è·‘ç€åˆ«çš„é¡¹ç›®ï¼ŒåŒä¸€æ—¶åˆ»æœ€å¤šæœ‰ä¸€ä¸ªè®¾å¤‡è¿œç¨‹è¿æ¥,æ‚¨è§‰å¾—æˆ‘ç”¨ä»€ä¹ˆä¼ è¾“åè®®å¥½ä¸€äº›ï¼ŸRTMPè¿˜æ˜¯RTSPæˆ–è€…æ˜¯å…¶ä»–ï¼Ÿéº»çƒ¦å‘ŠçŸ¥ä¸€ä¸‹","like_count":0,"discussions":[{"author":{"id":1287929,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a6/f9/79cad962.jpg","nickname":"æ‚Ÿç©º@OnVideo","note":"","ucode":"C320167A9A17B8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583702,"discussion_content":"è¿œç¨‹æ§åˆ¶çš„è¯ å¤§å¤šæ•°å¥½åƒé€‰æ‹©çš„æ˜¯RTC","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660299570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353925,"user_name":"peter","can_delete":false,"product_type":"c1","uid":1058183,"ip_address":"åŒ—äº¬","ucode":"261C3FC001DE2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg","comment_is_top":false,"comment_ctime":1659928953,"is_pvip":false,"replies":[{"id":128712,"content":"æ­£ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1287929,"ctime":1659931524,"ip_address":"åŒ—äº¬","comment_id":353925,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100117501,"comment_content":"è¯·æ•™è€å¸ˆä¸€ä¸ªé—®é¢˜ï¼š\nQ1ï¼šæˆ‘å¯¹äºâ€œFFmpegæ¨æµæ“ä½œæ­¥éª¤â€çš„ç†è§£æ˜¯ï¼š Step1ï¼šæ‰‹æœºä¸Šå®‰è£…å¿«æ‰‹APPï¼Œåˆ›å»ºä¸€ä¸ªç›´æ’­é—´ï¼Œè¯¥ç›´æ’­é—´ä¼šæœ‰æ–‡ä¸­æåˆ°çš„æ”¶æµåœ°å€ï¼ŒStep2ï¼šåœ¨PCæœºä¸Šå®‰è£…FFmpegï¼Œå®‰è£…åé‡‡ç”¨å‘½ä»¤è¡Œæ¥æ¨é€è§†é¢‘åˆ°ç›´æ’­é—´çš„æ”¶æµåœ°å€ã€‚ æˆ‘çš„ç†è§£æ˜¯å¦å¯¹ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1287929,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a6/f9/79cad962.jpg","nickname":"æ‚Ÿç©º@OnVideo","note":"","ucode":"C320167A9A17B8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583148,"discussion_content":"æ­£ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659931524,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355721,"user_name":"æ‘å£å¤§å‘","can_delete":false,"product_type":"c1","uid":2615209,"ip_address":"å¹¿ä¸œ","ucode":"F616B90C78008B","user_header":"https://static001.geekbang.org/account/avatar/00/27/e7/a9/b09e3701.jpg","comment_is_top":false,"comment_ctime":1661690686,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100117501,"comment_content":"è¡¥å……ä¸‹ä¸Šé¢æ¨æµå¤±è´¥çš„åç»­ï¼Œç»è€å¸ˆçš„æŒ‡å‡ºï¼Œå¯¹æ¨æµå‘½ä»¤ä¸­çš„ç›®æ ‡åœ°å€urlå¿…é¡»åŠ ä¸ŠåŒå¼•å·ï¼ŒåŠ ä¸ŠåŒå¼•å·ä¹‹åè¿˜æ˜¯æŠ¥é”™ï¼Œåæ¥å‘ç°æœ‰å‚æ•°çš„é¡ºåºé”™äº†ï¼Œæœ€ç»ˆæ‰§è¡ŒOKçš„å‘½ä»¤å¦‚ä¸‹ï¼š\n\nffmpeg -re -i &#47;Users&#47;allenchen&#47;workspace&#47;FFmpeg&#47;output.flv -f lavfi -i testsrc=s=1280x720:r=25 -pix_fmt yuv420p -vcodec libx264 -f flv &quot;rtmp:&#47;&#47;open-push.voip.yximgs.com&#47;gifshow&#47;kwai_actL_ol_act_9934790925_strL_origin?sign=633d0143-c210c0d7d91c2c1849c18bbeeac98244&amp;ks_fix_tsb&quot;\n\nå¸Œæœ›å¯¹å…¶ä»–åŒå­¦æœ‰å¸®åŠ©","like_count":1},{"had_liked":false,"id":353527,"user_name":"dog_brother","can_delete":false,"product_type":"c1","uid":1619597,"ip_address":"æ²³åŒ—","ucode":"9F64D3C6D815FB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er6OV33jHia3U9LYlZEx2HrpsELeh3KMlqFiaKpSAaaZeBttXRAVvDXUgcufpqJ60bJWGYGNpT7752w/132","comment_is_top":false,"comment_ctime":1659519482,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100117501,"comment_content":"ä¹‹å‰åŸºäºnginxæ­å»ºè¿‡ç›´æ’­æœåŠ¡å™¨","like_count":1},{"had_liked":false,"id":384971,"user_name":"å•Šè‰¯æ¢“æ˜¯æˆ‘","can_delete":false,"product_type":"c1","uid":1655117,"ip_address":"å¹¿ä¸œ","ucode":"E42FC1A60D331C","user_header":"https://static001.geekbang.org/account/avatar/00/19/41/4d/f6d6d13a.jpg","comment_is_top":false,"comment_ctime":1701861188,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":2,"product_id":100117501,"comment_content":"äº‘ç›´æ’­ä»…å¯¹åª’ä½“æ”¿åŠ¡å·å’Œä¼ä¸šè®¤è¯è´¦å·å¼€æ”¾ï¼Œå…¶ä»–è´¦å·è¯·ä½¿ç”¨ç›´æ’­ä¼´ä¾£æˆ–å¿«æ‰‹Appå¼€æ’­ï¼Œå¹¶éµå®ˆå¿«æ‰‹ç›´æ’­è§„èŒƒ","like_count":0,"discussions":[{"author":{"id":1655117,"avatar":"https://static001.geekbang.org/account/avatar/00/19/41/4d/f6d6d13a.jpg","nickname":"å•Šè‰¯æ¢“æ˜¯æˆ‘","note":"","ucode":"E42FC1A60D331C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":633243,"discussion_content":"ç”¨å“”å“©å“”å“©å¯ä»¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1701929654,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2977417,"avatar":"","nickname":"é‚“è¥¿","note":"","ucode":"DC84CD4CDF4021","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1655117,"avatar":"https://static001.geekbang.org/account/avatar/00/19/41/4d/f6d6d13a.jpg","nickname":"å•Šè‰¯æ¢“æ˜¯æˆ‘","note":"","ucode":"E42FC1A60D331C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":636237,"discussion_content":"bilibiliæ¨æµError opening output files: I/O error","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1705890000,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":633243,"ip_address":"å››å·","group_id":0},"score":636237,"extra":""}]}]},{"had_liked":false,"id":355122,"user_name":"å¾æºªè¶Š","can_delete":false,"product_type":"c1","uid":1000800,"ip_address":"åŒ—äº¬","ucode":"2732D5EF038EE4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/45/60/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1661094670,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100117501,"comment_content":"ffplay -i\n","like_count":0}]}