{"id":224521,"title":"13 | åŠ¨æ€è·¯ç”±ï¼šç”¨Virtual Serviceå’ŒDestination Ruleè®¾ç½®è·¯ç”±è§„åˆ™","content":"<p><strong>è¯¾ä»¶å’ŒDemoåœ°å€</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geektime-servicemesh\">https://gitee.com/geektime-geekbang/geektime-servicemesh</a></p>","comments":[{"had_liked":false,"id":255871,"user_name":"å†™ç»™ä¸‰æœˆ","can_delete":false,"product_type":"c3","uid":1214026,"ip_address":"","ucode":"F9DCF7C9B76AC5","user_header":"https://static001.geekbang.org/account/avatar/00/12/86/4a/0370f832.jpg","comment_is_top":false,"comment_ctime":1603447457,"is_pvip":false,"replies":[{"id":93495,"content":"å¯ä»¥æŠŠè¿™ä¸ªhostså­—æ®µç†è§£ä¸ºæ˜¯ä¸€ä¸ªå¤–é”®ï¼Œå®ƒè´Ÿè´£æŠŠgatewayå’Œvsã€vså’Œdrè¿æ¥èµ·æ¥ã€‚\næ¯”å¦‚ä½ åœ¨gatewayé‡Œhosté…ç½®ä¸º www.example.com, é‚£ä¹ˆå½“ä½ è®¿é—®è¿™ä¸ªurlæ—¶è¯·æ±‚å°±ä¼šæ‰¾é…ç½®äº†åŒæ ·hostçš„vsï¼Œæ ¹æ®å®ƒçš„è·¯ç”±ä¿¡æ¯å»åˆ†å‘è¯·æ±‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é©¬è‹¥é£","uid":1046394,"ctime":1603781137,"ip_address":"","comment_id":255871,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"è€å¸ˆï¼Œæˆ‘ç°åœ¨å¡åœ¨ gatewayä¸­ hosts  VSä¸­çš„hosts  host   DR çš„host ä¹±å¥—äº†ï¼Œè®©æˆ‘å½»åº•è¿·ç³Šäº†ï¼Œèƒ½ç‰¹æ„å»è®²è®²è¿™å‡ ä¸ªhostå¹²ä»€ä¹ˆç”¨çš„å—ï¼Ÿæœ‰ç‚¹æ™•","like_count":5,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":507857,"discussion_content":"å¯ä»¥æŠŠè¿™ä¸ªhostså­—æ®µç†è§£ä¸ºæ˜¯ä¸€ä¸ªå¤–é”®ï¼Œå®ƒè´Ÿè´£æŠŠgatewayå’Œvsã€vså’Œdrè¿æ¥èµ·æ¥ã€‚\næ¯”å¦‚ä½ åœ¨gatewayé‡Œhosté…ç½®ä¸º www.example.com, é‚£ä¹ˆå½“ä½ è®¿é—®è¿™ä¸ªurlæ—¶è¯·æ±‚å°±ä¼šæ‰¾é…ç½®äº†åŒæ ·hostçš„vsï¼Œæ ¹æ®å®ƒçš„è·¯ç”±ä¿¡æ¯å»åˆ†å‘è¯·æ±‚ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1603781137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1214026,"avatar":"https://static001.geekbang.org/account/avatar/00/12/86/4a/0370f832.jpg","nickname":"å†™ç»™ä¸‰æœˆ","note":"","ucode":"F9DCF7C9B76AC5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":323581,"discussion_content":"å’Œä¸‹é¢åŒå­¦çš„é—®é¢˜ä¸²èµ·æ¥ï¼Œæˆ‘æ‡‚äº†ï¼Œè°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604970645,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":213543,"user_name":"V V","can_delete":false,"product_type":"c3","uid":1220390,"ip_address":"","ucode":"9494330A6AA770","user_header":"https://static001.geekbang.org/account/avatar/00/12/9f/26/89eda2c8.jpg","comment_is_top":false,"comment_ctime":1588469983,"is_pvip":false,"replies":[{"id":79331,"content":"è¿™æ˜¯ VirtualService hostsçš„å®˜æ–¹è¯´æ˜ï¼šThe destination hosts to which traffic is being sent. Could be a DNS name with wildcard prefix or an IP address. \n\nè¿™æ˜¯ DestinationRule hostçš„è¯´æ˜ï¼šThe name of a service from the service registry. Service names are looked up from the platformâ€™s service registry (e.g., Kubernetes services, Consul services, etc.) \n\nç®€å•æ¥è¯´å°±æ˜¯ï¼ŒVSé‡Œçš„hostsæŒ‡å‘çš„å°±æ˜¯DRçš„hostï¼›DRçš„hostè®¾ç½®çš„æ˜¯åº•å±‚å¹³å°ï¼ˆå¦‚k8sï¼‰çš„serviceåç§°ï¼Œå› ä¸ºæœ€ç»ˆæ˜¯éœ€è¦åˆ©ç”¨å¹³å°çš„dnsæ¥æŠŠè¯·æ±‚å¯¼å‘ç›®çš„åœ°çš„ã€‚\nè¿™ç§ç”¨2ä¸ªapièµ„æºè®¾è®¡çš„ç›®çš„ä¹‹ä¸€å°±æ˜¯å„å¸å…¶èŒï¼ŒVSè´Ÿè´£é…ç½®è·¯ç”±ä¿¡æ¯ï¼ŒDRè´Ÿè´£é…ç½®ç›®æ ‡å’Œç­–ç•¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é©¬è‹¥é£","uid":1046394,"ctime":1588694990,"ip_address":"","comment_id":213543,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"è€å¸ˆï¼Œä½ è®²åˆ°â€œè™šæ‹ŸæœåŠ¡ä¸­ hostsæ˜¯ç”¨æ¥è®¾ç½®ç›®æ ‡åœ°å€â€ï¼Ÿæ‹¿å®ƒå’Œç›®æ ‡è§„åˆ™ä¸­çš„host çš„ä½œç”¨æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493808,"discussion_content":"è¿™æ˜¯ VirtualService hostsçš„å®˜æ–¹è¯´æ˜ï¼šThe destination hosts to which traffic is being sent. Could be a DNS name with wildcard prefix or an IP address. \n\nè¿™æ˜¯ DestinationRule hostçš„è¯´æ˜ï¼šThe name of a service from the service registry. Service names are looked up from the platformâ€™s service registry (e.g., Kubernetes services, Consul services, etc.) \n\nç®€å•æ¥è¯´å°±æ˜¯ï¼ŒVSé‡Œçš„hostsæŒ‡å‘çš„å°±æ˜¯DRçš„hostï¼›DRçš„hostè®¾ç½®çš„æ˜¯åº•å±‚å¹³å°ï¼ˆå¦‚k8sï¼‰çš„serviceåç§°ï¼Œå› ä¸ºæœ€ç»ˆæ˜¯éœ€è¦åˆ©ç”¨å¹³å°çš„dnsæ¥æŠŠè¯·æ±‚å¯¼å‘ç›®çš„åœ°çš„ã€‚\nè¿™ç§ç”¨2ä¸ªapièµ„æºè®¾è®¡çš„ç›®çš„ä¹‹ä¸€å°±æ˜¯å„å¸å…¶èŒï¼ŒVSè´Ÿè´£é…ç½®è·¯ç”±ä¿¡æ¯ï¼ŒDRè´Ÿè´£é…ç½®ç›®æ ‡å’Œç­–ç•¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588694990,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":3,"child_discussions":[{"author":{"id":1567014,"avatar":"https://static001.geekbang.org/account/avatar/00/17/e9/26/472e16e4.jpg","nickname":"Amosãƒ¾","note":"","ucode":"833F6FCB4042AD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":552916,"discussion_content":"è€å¸ˆï¼Œå¦‚æœvsä¸­routeçš„hosté…ç½®äº†reviewsï¼Œä½†æ˜¯æ²¡æœ‰åä¸ºreviewsçš„drï¼Œä¼šç›´æ¥å»æ‰¾k8sçš„svcå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645632538,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":493808,"ip_address":"","group_id":0},"score":552916,"extra":""},{"author":{"id":1195278,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3d/0e/92176eaa.jpg","nickname":"å·¦æ°§ä½›æ²™æ˜Ÿäºº","note":"","ucode":"0D8295E1DABA8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":575123,"discussion_content":"éš¾é“ç­–ç•¥ä¸æ˜¯åœ¨vsè®¾ç½®çš„å—ï¼Ÿ  http:\n  - match:\n    - headers:\n        end-user:\n          regex: .*","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654603439,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":493808,"ip_address":"","group_id":0},"score":575123,"extra":""},{"author":{"id":1195278,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3d/0e/92176eaa.jpg","nickname":"å·¦æ°§ä½›æ²™æ˜Ÿäºº","note":"","ucode":"0D8295E1DABA8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1567014,"avatar":"https://static001.geekbang.org/account/avatar/00/17/e9/26/472e16e4.jpg","nickname":"Amosãƒ¾","note":"","ucode":"833F6FCB4042AD","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":575125,"discussion_content":"æˆ‘ç†è§£ä¸ä¼šï¼Œå¦‚æœé…ç½®äº†vsï¼Œæ²¡æœ‰é…ç½®drï¼Œvsæ˜¯ç”Ÿæ•ˆçš„ï¼Œä¼šç»§ç»­æ‰¾drçš„hostï¼Œåˆ™ä¼šå‘ç”Ÿ404æˆ–è€…502/504ç­‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654603679,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":552916,"ip_address":"","group_id":0},"score":575125,"extra":""}]}]},{"had_liked":false,"id":270113,"user_name":"æ— æ•Œå°è´å¡”","can_delete":false,"product_type":"c3","uid":1177175,"ip_address":"","ucode":"5F12AA01DDCBB1","user_header":"https://static001.geekbang.org/account/avatar/00/11/f6/57/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1608913081,"is_pvip":false,"replies":[{"id":98234,"content":"1. å¯¹\n2. å¦‚æœæˆ‘ä»¬æ²¡æœ‰å¯¹reviewsæœåŠ¡æ·»åŠ è·¯ç”±é…ç½®ï¼ˆVirtualserviceï¼‰ï¼Œé‚£å®ƒå°±ä½¿ç”¨k8sé»˜è®¤çš„è´Ÿè½½å‡è¡¡è½®è¯¢é€‰æ‹©ç‰ˆæœ¬ï¼ˆæœ¬è´¨ä¸Šæ˜¯é€‰æ‹©åŒä¸€ä¸ªæœåŠ¡çš„ä¸åŒçš„podï¼Œå› ä¸ºproductpageæ˜¯é€šè¿‡service nameçš„æ–¹å¼ï¼Œå³reviews.default.svc.cluster.localè®¿é—®çš„)ï¼Œå¦‚æœä½ æ·»åŠ äº†VSï¼Œå¹¶æŒ‡å®šäº†subsetï¼Œé‚£å®ƒå°±ä¼šæ ¹æ®ä½ å®šä¹‰çš„è·¯ç”±å»é€‰æ‹©å¯¹åº”ç‰ˆæœ¬çš„podï¼Œè¿™ä¹Ÿå°±æ˜¯Istioæ§åˆ¶æµé‡çš„ä¸»è¦æ–¹å¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é©¬è‹¥é£","uid":1046394,"ctime":1609249290,"ip_address":"","comment_id":270113,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘æœ‰ä¸€ä¸ªæ¦‚å¿µæœ‰ç‚¹æ²¡å¤ªç†è§£ï¼š\nåœ¨è¯¾ç¨‹12ä¸­è®²åˆ°è¿™ä¸ªbook demoæ­å»ºå®Œæ¯•åï¼Œæ¯ä¸€ä¸ªdeploymentçš„Podé‡Œä¼šè‡ªåŠ¨ç”Ÿæˆç›¸å¯¹åº”çš„istio proxyï¼ˆenvoyï¼‰ï¼Œæ‰€ä»¥ç›¸å¯¹åº”çš„è§„åˆ™æœ€åéƒ½åº”è¯¥è½åœ¨è¿™äº›proxyä¸Šå»æ‰§è¡Œç„¶ååœ¨å‘ç»™å¯¹åº”çš„å®é™…æœåŠ¡ï¼›\nåœ¨è¯¾ç¨‹13ä¸­æˆ‘ä»¬åœ¨åˆ›å»º VirtualServiceå’Œ DestinationRuleç­‰è¿™äº›å¯¹è±¡åï¼Œæˆ‘çš„ç†è§£istiodåº”è¯¥æŠŠè¿™äº›é…ç½®è‡ªåŠ¨ä¸‹å‘åˆ°å„è‡ªå¯¹åº”çš„istio proxyä¸­å»ï¼Œåœ¨demoçš„å±•ç¤ºä¸­æˆ‘ç†è§£çš„æ˜¯ç³»ç»Ÿå°±è‡ªåŠ¨æŠŠè¿™äº›å†…å®¹é€šè¿‡APIä¸‹å‘ç»™å¯¹åº”çš„review V1 podä¸­çš„istio proxy(é—®é¢˜1ï¼šä¸çŸ¥é“æˆ‘è¿™ä¹ˆç†è§£æ˜¯å¦æ­£ç¡®ï¼‰\né—®é¢˜2ï¼šåœ¨reviewè¿™ä¸ªæœåŠ¡ä¸Šï¼Œæœ‰ä¸‰ä¸ªä¸åŒç‰ˆæœ¬çš„pod,è¿™äº›podé‡Œé¢å„è‡ªæœ‰ä¸€ä¸ªistio proxyï¼Œå‰ç«¯productpageæ€ä¹ˆçŸ¥é“å®ƒè®¿é—®çš„æ˜¯V1ç‰ˆæœ¬çš„istio proxyå‘¢ï¼Ÿ\næœŸç›¼è€å¸ˆçš„å›å¤ï¼Œæ„Ÿè°¢ã€‚","like_count":4,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512523,"discussion_content":"1. å¯¹\n2. å¦‚æœæˆ‘ä»¬æ²¡æœ‰å¯¹reviewsæœåŠ¡æ·»åŠ è·¯ç”±é…ç½®ï¼ˆVirtualserviceï¼‰ï¼Œé‚£å®ƒå°±ä½¿ç”¨k8sé»˜è®¤çš„è´Ÿè½½å‡è¡¡è½®è¯¢é€‰æ‹©ç‰ˆæœ¬ï¼ˆæœ¬è´¨ä¸Šæ˜¯é€‰æ‹©åŒä¸€ä¸ªæœåŠ¡çš„ä¸åŒçš„podï¼Œå› ä¸ºproductpageæ˜¯é€šè¿‡service nameçš„æ–¹å¼ï¼Œå³reviews.default.svc.cluster.localè®¿é—®çš„)ï¼Œå¦‚æœä½ æ·»åŠ äº†VSï¼Œå¹¶æŒ‡å®šäº†subsetï¼Œé‚£å®ƒå°±ä¼šæ ¹æ®ä½ å®šä¹‰çš„è·¯ç”±å»é€‰æ‹©å¯¹åº”ç‰ˆæœ¬çš„podï¼Œè¿™ä¹Ÿå°±æ˜¯Istioæ§åˆ¶æµé‡çš„ä¸»è¦æ–¹å¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609249290,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1177175,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f6/57/abb7bfe3.jpg","nickname":"æ— æ•Œå°è´å¡”","note":"","ucode":"5F12AA01DDCBB1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338587,"discussion_content":"è°¢è°¢è€å¸ˆï¼Œâ€œå¦‚æœä½ æ·»åŠ äº†VSï¼Œå¹¶æŒ‡å®šäº†subsetï¼Œé‚£å®ƒå°±ä¼šæ ¹æ®ä½ å®šä¹‰çš„è·¯ç”±å»é€‰æ‹©å¯¹åº”ç‰ˆæœ¬çš„podâ€è¿™ä¸ªå¯¹åº”çš„é…ç½®ä¼šä¸‹å‘åˆ°reviewsæœåŠ¡çš„3ä¸ªpodä¸­å¯¹åº”çš„envoyä»£ç†é‡Œï¼Œproductpageå‘èµ·å¯¹reviewsçš„è®¿é—®å…¶å®æ˜¯è®¿é—®çš„reviewsçš„serviceåœ°å€ï¼Œé€šè¿‡reviewsçš„serviceåœ°å€è¯·æ±‚æœ€ç»ˆä¼šåˆ°è¾¾ä»»æ„ä¸€ä¸ªpodå‰ç«¯çš„envoyä»£ç†ä¸Šï¼Œå› ä¸ºè¿™ä¸‰ä¸ªä»£ç†éƒ½çŸ¥é“åº”è¯¥å°†è¯·æ±‚å‘é€ç»™V1ç‰ˆæœ¬å¯¹åº”çš„PODï¼Œæ‰€ä»¥å®ç°äº†è·¯ç”±æ§åˆ¶ï¼Œæˆ‘è¿™æ ·çš„ç†è§£å¯¹å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609318877,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":271299,"user_name":"æ— æ•Œå°è´å¡”","can_delete":false,"product_type":"c3","uid":1177175,"ip_address":"","ucode":"5F12AA01DDCBB1","user_header":"https://static001.geekbang.org/account/avatar/00/11/f6/57/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1609518242,"is_pvip":false,"replies":[{"id":98470,"content":"1. æ˜¯çš„ï¼Œå…¨é‡ä¸‹å‘ã€‚å› ä¸ºenvoyå½¼æ­¤ä¹‹é—´å¹¶ä¸çŸ¥é“ä¸šåŠ¡ä¸Šçš„è°ƒç”¨å…³ç³»ï¼Œæ‰€ä»¥éœ€è¦è·å–åˆ°æ‰€æœ‰é…ç½®ï¼›\n2. envoyçš„è½¬å‘æ¯”è¾ƒå¤æ‚ï¼Œç‰µæ‰¯listenerã€clusterã€routeç­‰æ ¸å¿ƒæ¦‚å¿µï¼Œä½ å¯ä»¥ç®€å•çš„ç†è§£ä¸ºï¼šenvoyé€šè¿‡æ”¹å†™iptablesè§„åˆ™åšäº†æµé‡åŠ«æŒï¼Œproductpageçš„å‡ºæµé‡å¯ä»¥é€šè¿‡é…ç½®çŸ¥é“è¦å‘åˆ°å“ªä¸ªreview podã€‚\ntipsï¼š\nå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« çš„åˆ†æ\nhttps:&#47;&#47;www.servicemesher.com&#47;blog&#47;istio-traffic-management-impl-intro&#47;\nå‚è€ƒenvoyé…ç½®å¯ä»¥é€šè¿‡ istioctl d envoy podname æŸ¥çœ‹config dump","user_name":"ä½œè€…å›å¤","user_name_real":"é©¬è‹¥é£","uid":1046394,"ctime":1609731865,"ip_address":"","comment_id":271299,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæœ‰ä¸€ä¸ªé€»è¾‘ç‚¹æˆ‘è§‰å¾—æ‚¨æ²¡è®²æ·±ï¼Œåˆæˆ–è€…æˆ‘ä¸€ç›´æ²¡getåˆ°è¿™ä¸ªç‚¹ï¼Œæ¯”å¦‚ä½ è¯¾ç¨‹ä¸­demoé‡Œåˆ›å»ºçš„4ä¸ªVSå’ŒDRï¼ˆé…ç½®æˆ‘éƒ½æ˜¯ç†è§£çš„ï¼‰ï¼Œæˆ‘çš„é—®é¢˜1ï¼šè¿™4ä¸ªVSä¼šè¢«ä¸‹å‘åˆ°æ‰€æœ‰ä¸åŒåº”ç”¨podä¸Šçš„envoyä»£ç†ï¼ˆæ¯”å¦‚productpageçš„envoyä»£ç†ï¼Œä¸‰ä¸ªreviws podçš„envoyä»£ç†ï¼Œratingçš„envoyä»£ç†ï¼‰è¿˜æ˜¯åªä¸‹å‘åˆ°å…¶å¯¹åº” Podä¸Šçš„envoyä»£ç†ä¸Šå‘¢ï¼ˆæ¯”å¦‚åˆ›å»ºçš„productpageçš„VSåªä¸‹å‘åˆ°productpageçš„envoyä¸Šï¼Œreviewå’Œratingçš„ä¹Ÿæ˜¯åŒç†ï¼‰ï¼Œæˆ‘çš„ç†è§£æ˜¯ä¸‹å‘åˆ°æ‰€æœ‰podä¸Šçš„envoyä»£ç†ä¸­ï¼Œä¸çŸ¥é“è¯¥æ˜¯æ€ä¹ˆç†è§£å‘¢ï¼Ÿæˆ‘çš„ç†è§£æ˜¯ç¬¬ä¸€ç§å…¨éƒ¨envoyä»£ç†ä¸Šæœ‰æ‰€æœ‰çš„é…ç½®ç­–ç•¥ã€‚å¦‚æœæˆ‘æ€•ç†è§£é”™äº†æ˜¯ç¬¬äºŒä¸­çš„è¯é‚£ä¹ˆä¹‹é—´æ˜¯æ€ä¹ˆå…³è”èµ·æ¥å¯¹åº”çš„å‘¢ï¼Ÿè°¢è°¢ã€‚\n2 æˆ‘ç†è§£çš„è®¿é—®æ•°æ®æµæ˜¯step1:productpageè¿™ä¸ªå®¹å™¨åº”ç”¨é€šè¿‡å…¶å¯¹åº”çš„envoyä»£ç†å»è®¿é—®k8sä¸‹reviewså¯¹åº”å‘å¸ƒçš„service cluster IP, step2:è¯¥ serviceIPé€šè¿‡kubeproxyï¼ˆè´Ÿè½½å‡è¡¡ï¼‰éšæœºå°†è¯·æ±‚å‘é€è‡³ä»»æ„ä¸€ä¸ªç‰ˆæœ¬çš„reviewçš„podï¼ˆæ¯”å¦‚åˆ°è¾¾V3ï¼‰, å› ä¸ºåœ¨å®é™…åˆ°è¾¾V3 reviewåº”ç”¨å®¹å™¨ä¹‹å‰ä¼šå…ˆç»è¿‡å…¶å¯¹åº”çš„envoyå®¹å™¨ä»£ç†,æ­¤æ—¶envoyå®¹å™¨ä»£ç†è¯†åˆ«å‡ºå¯¹åº”çš„é…ç½®æ¯”å¦‚é€šè¿‡end-userå­—æ®µ:æ˜¯è¦å‘é€ç»™V2çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªreview v3 envoy ä»£ç†å°±ä¼šæŠŠè¯·æ±‚è½¬ç»™V2å¯¹åº”çš„review podï¼Œè¿™ä¸ªè¯·æ±‚æœ€ç»ˆç»è¿‡review 2 ä¸šåŠ¡å®¹å™¨å‰ç«¯çš„envoyä»£ç†åˆ°è¾¾review2å®¹å™¨ï¼Œè¿™æ ·ç†è§£å¯¹å—ï¼Ÿ\næˆ‘å’Œå‡ ä¸ªæœ‹å‹ä¹Ÿåšäº†è®¨è®ºï¼Œå¤§å®¶å¥½åƒéƒ½æœ‰ä¸€äº›å›°æƒ‘ï¼Œæ‰€ä»¥æƒ³è¯·è€å¸ˆé’ˆå¯¹ä¸Šè¿°é—®é¢˜åšä¸€ä¸ªè¯¦ç»†çš„ç­”å¤ï¼Œéå¸¸æ„Ÿè°¢æ‚¨çš„å¸®åŠ©ã€‚\napiVersion: networking.istio.io&#47;v1alpha3\nkind: VirtualService\nmetadata:\n  name: reviews\nspec:\n  hosts:\n  - reviews\n  http:\n  - match:\n    - headers:\n        end-user:\n          regex: .*\n    route:\n    - destination:\n        host: reviews\n        subset: v2\n  - route:\n    - destination:\n        host: reviews\n        subset: v1","like_count":2,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512893,"discussion_content":"1. æ˜¯çš„ï¼Œå…¨é‡ä¸‹å‘ã€‚å› ä¸ºenvoyå½¼æ­¤ä¹‹é—´å¹¶ä¸çŸ¥é“ä¸šåŠ¡ä¸Šçš„è°ƒç”¨å…³ç³»ï¼Œæ‰€ä»¥éœ€è¦è·å–åˆ°æ‰€æœ‰é…ç½®ï¼›\n2. envoyçš„è½¬å‘æ¯”è¾ƒå¤æ‚ï¼Œç‰µæ‰¯listenerã€clusterã€routeç­‰æ ¸å¿ƒæ¦‚å¿µï¼Œä½ å¯ä»¥ç®€å•çš„ç†è§£ä¸ºï¼šenvoyé€šè¿‡æ”¹å†™iptablesè§„åˆ™åšäº†æµé‡åŠ«æŒï¼Œproductpageçš„å‡ºæµé‡å¯ä»¥é€šè¿‡é…ç½®çŸ¥é“è¦å‘åˆ°å“ªä¸ªreview podã€‚\ntipsï¼š\nå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« çš„åˆ†æ\nhttps://www.servicemesher.com/blog/istio-traffic-management-impl-intro/\nå‚è€ƒenvoyé…ç½®å¯ä»¥é€šè¿‡ istioctl d envoy podname æŸ¥çœ‹config dump","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609731865,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1177175,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f6/57/abb7bfe3.jpg","nickname":"æ— æ•Œå°è´å¡”","note":"","ucode":"5F12AA01DDCBB1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339316,"discussion_content":"ç»è¿‡çœ‹åé¢çš„logçš„è¯¾ç¨‹ï¼Œé’ˆå¯¹ï¼ˆ2 æˆ‘ç†è§£çš„è®¿é—®æ•°æ®æµæ˜¯step1:productpageè¿™ä¸ªå®¹å™¨åº”ç”¨é€šè¿‡å…¶å¯¹åº”çš„envoyä»£ç†å»è®¿é—®k8sä¸‹reviewså¯¹åº”å‘å¸ƒçš„service cluster IP, step2:è¯¥ serviceIPé€šè¿‡kubeproxyï¼ˆè´Ÿè½½å‡è¡¡ï¼‰éšæœºå°†è¯·æ±‚å‘é€è‡³ä»»æ„ä¸€ä¸ªç‰ˆæœ¬çš„reviewçš„podï¼ˆæ¯”å¦‚åˆ°è¾¾V3ï¼‰, å› ä¸ºåœ¨å®é™…åˆ°è¾¾V3 reviewåº”ç”¨å®¹å™¨ä¹‹å‰ä¼šå…ˆç»è¿‡å…¶å¯¹åº”çš„envoyå®¹å™¨ä»£ç†,æ­¤æ—¶envoyå®¹å™¨ä»£ç†è¯†åˆ«å‡ºå¯¹åº”çš„é…ç½®æ¯”å¦‚é€šè¿‡end-userå­—æ®µ:æ˜¯è¦å‘é€ç»™V2çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªreview v3 envoy ä»£ç†å°±ä¼šæŠŠè¯·æ±‚è½¬ç»™V2å¯¹åº”çš„review podï¼Œè¿™ä¸ªè¯·æ±‚æœ€ç»ˆç»è¿‡review 2 ä¸šåŠ¡å®¹å™¨å‰ç«¯çš„envoyä»£ç†åˆ°è¾¾review2å®¹å™¨ï¼Œè¿™æ ·ç†è§£å¯¹å—ï¼Ÿï¼‰æˆ‘çš„ç†è§£åº”è¯¥æ˜¯é”™äº†ï¼Œä¸ä¼šå‡ºç°è¿™æ ·çš„æ•°æ®æµç¨‹ã€‚åº”è¯¥æ˜¯åœ¨productpageçš„envoyä»£ç†ä¸Šç›´æ¥è¿›è¡Œåˆ¤æ–­åå‘é€ç»™ç›¸å¯¹åº”çš„review podã€‚é‚£è¿™æ ·çš„è¯reviewsçš„VSå’ŒDRçš„ç­–ç•¥åº”è¯¥æ˜¯åœ¨productpageçš„envoyä¸Šæ‰§è¡Œäº†ï¼Œé‚£é’ˆå¯¹é—®é¢˜1ä¹Ÿå°±æœ‰äº†ç­”æ¡ˆï¼Œï¼ˆæˆ‘çš„ç†è§£æ˜¯ä¸‹å‘åˆ°æ‰€æœ‰podä¸Šçš„envoyä»£ç†ä¸­ï¼‰\n\nè¯·è€å¸ˆæŒ‡æ­£ä¸€ä¸‹æˆ‘è¿™æ¬¡ç†è§£æ˜¯å¦æ­£ç¡®äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1609601054,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1177175,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f6/57/abb7bfe3.jpg","nickname":"æ— æ•Œå°è´å¡”","note":"","ucode":"5F12AA01DDCBB1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339997,"discussion_content":"è°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609857614,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":211011,"user_name":"MrPolo","can_delete":false,"product_type":"c3","uid":1449101,"ip_address":"","ucode":"1B08F61A7099F8","user_header":"","comment_is_top":false,"comment_ctime":1587880977,"is_pvip":false,"replies":[{"id":78505,"content":"ä¼˜ç§€ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"é©¬è‹¥é£","uid":1046394,"ctime":1587895069,"ip_address":"","comment_id":211011,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"ç›´æ¥åŠ ä¸Šregex match æœ‰end-user headerçš„requeståˆ°rule v2\n\napiVersion: networking.istio.io&#47;v1alpha3\nkind: VirtualService\nmetadata:\n  name: reviews\nspec:\n  hosts:\n  - reviews\n  http:\n  - match:\n    - headers:\n        end-user:\n          regex: .*\n    route:\n    - destination:\n        host: reviews\n        subset: v2\n  - route:\n    - destination:\n        host: reviews\n        subset: v1","like_count":2,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493168,"discussion_content":"ä¼˜ç§€ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587895069,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":304041,"user_name":"ileruza","can_delete":false,"product_type":"c3","uid":1336951,"ip_address":"","ucode":"C3D83DF4230109","user_header":"https://static001.geekbang.org/account/avatar/00/14/66/77/194ba21d.jpg","comment_is_top":false,"comment_ctime":1627204344,"is_pvip":false,"replies":[{"id":110117,"content":"Istioæ˜¯åŸºäºæœåŠ¡ï¼ˆk8s serviceï¼‰å±‚é¢è¿›è¡Œæµé‡ç®¡ç†çš„ï¼Œæ‰€ä»¥vs å’Œdrçš„hostéœ€è¦å’Œpodå¯¹åº”çš„serviceä¸€è‡´ã€‚å’Œcontainer nameæ²¡å…³ç³»","user_name":"ä½œè€…å›å¤","user_name_real":"é©¬è‹¥é£","uid":1046394,"ctime":1627353678,"ip_address":"","comment_id":304041,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"è€å¸ˆï¼Œæˆ‘æ„Ÿè§‰VSçš„hostsã€hostã€å’ŒDRçš„hostè¿˜æœ‰podsçš„container nameï¼Œæ˜¯ä¸æ˜¯éƒ½è¦ç›¸åŒçš„å•Šï¼Œå› ä¸ºè¦æŠŠå®ƒä»¬â€œä¸²èµ·æ¥â€ï¼Œå°±å› ä¸ºistioæ˜¯podsçš„sidecarï¼Œæ‰€ä»¥å°±è¦ç›¸åŒï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523911,"discussion_content":"Istioæ˜¯åŸºäºæœåŠ¡ï¼ˆk8s serviceï¼‰å±‚é¢è¿›è¡Œæµé‡ç®¡ç†çš„ï¼Œæ‰€ä»¥vs å’Œdrçš„hostéœ€è¦å’Œpodå¯¹åº”çš„serviceä¸€è‡´ã€‚å’Œcontainer nameæ²¡å…³ç³»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627353678,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":277298,"user_name":"æ—æ ‘ç…Œ","can_delete":false,"product_type":"c3","uid":1960405,"ip_address":"","ucode":"048CB18DA26257","user_header":"https://static001.geekbang.org/account/avatar/00/1d/e9/d5/6c0edfb9.jpg","comment_is_top":false,"comment_ctime":1612348876,"is_pvip":false,"replies":[{"id":100654,"content":"å¯ä»¥","user_name":"ä½œè€…å›å¤","user_name_real":"é©¬è‹¥é£","uid":1046394,"ctime":1612429201,"ip_address":"","comment_id":277298,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œèƒ½å¦ä½¿ç”¨nginx ingress controller ä»£æ›¿ istioçš„gatewayï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514991,"discussion_content":"å¯ä»¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612429201,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1960405,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/e9/d5/6c0edfb9.jpg","nickname":"æ—æ ‘ç…Œ","note":"","ucode":"048CB18DA26257","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371464,"discussion_content":"è€å¸ˆï¼Œæ›¿æ¢äº†ä¹‹åï¼Œå‘ç°virtualserviceä¸ç”Ÿæ•ˆäº†ï¼Œæœ‰è§£å†³æ–¹æ³•å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619776197,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":230094,"user_name":"å…‰","can_delete":false,"product_type":"c3","uid":1284618,"ip_address":"","ucode":"BDA7F41566E4FE","user_header":"https://static001.geekbang.org/account/avatar/00/13/9a/0a/6c74e932.jpg","comment_is_top":false,"comment_ctime":1593257954,"is_pvip":false,"replies":[{"id":85006,"content":"æ˜¯çš„ï¼Œè¿˜ä¸æ”¯æŒendpointçº§åˆ«","user_name":"ä½œè€…å›å¤","user_name_real":"é©¬è‹¥é£","uid":1046394,"ctime":1593333610,"ip_address":"","comment_id":230094,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"è€å¸ˆé—®ä¸‹ ç›®å‰istio ç†”æ–­åªèƒ½é’ˆå¯¹æœåŠ¡çº§åˆ«å¾—æŠŠã€‚å¯ä»¥æ”¯æŒæ¥å£çº§åˆ«å¾—ä¹ˆ\n","like_count":1,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499761,"discussion_content":"æ˜¯çš„ï¼Œè¿˜ä¸æ”¯æŒendpointçº§åˆ«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593333610,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1248534,"avatar":"https://static001.geekbang.org/account/avatar/00/13/0d/16/92209491.jpg","nickname":"æµæµªè®°","note":"","ucode":"972679A33765D6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":633212,"discussion_content":"è€å¸ˆï¼Œè¿™å—æœ‰ç‚¹ä¸å¤ªæ‡‚ï¼Œæ¯”å¦‚æˆ‘ä¸ºæœåŠ¡é…ç½®äº†gatewayã€vså’Œdrï¼ŒåŒæ—¶drä¸‹é¢é…ç½®äº†subsetçš„å­é›†ï¼Œç„¶ååœ¨å­é›†ä¸Šé…ç½®çš„ç†”æ–­ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä½¿ç”¨servicenameè®¿é—®æˆ–è€…gatewayçš„åœ°å€è®¿é—®éƒ½ä¸ä¼šè§¦å‘ç†”æ–­ï¼Œè¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1701912859,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å®‰å¾½","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":374902,"user_name":"Geek_7d539e","can_delete":false,"product_type":"c3","uid":2037654,"ip_address":"ç¦å»º","ucode":"0D116E904D616E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIVvyFCLRcfoWfiaJt99K0wiabvicWtQaJdSseVA6QqWyxcvN5nd2TgZqiaUACc94bBvPHZTibnfnZfdtQ/132","comment_is_top":false,"comment_ctime":1684633938,"is_pvip":false,"replies":[{"id":137528,"content":"åªä»æœåŠ¡å‘ç°è§’åº¦è®²æ²¡æœ‰å¿…è¦å¹¶å­˜ã€‚å¦‚æœéœ€è¦ä¸€èˆ¬æ˜¯æ—¢æƒ³æ¼”è¿›åˆ°service meshæ¶æ„ï¼Œä½¿ç”¨Istioçš„ç‰¹æ€§ï¼Œåˆæƒ³ä¿ç•™åŸæœ‰æœåŠ¡çš„å…¼å®¹æ€§ç­‰ã€‚ä»–ä»¬çš„å…³ç³»ä¼šå˜æˆä¸Šä¸‹æ¸¸å…³ç³»ï¼Œdubboçš„æ³¨å†Œä¿¡æ¯éœ€è¦è½¬æ¢æˆIstioçš„é…ç½®å¹¶ä¸‹å‘ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1046394,"ctime":1688461527,"ip_address":"åŒ—äº¬","comment_id":374902,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"è¯·æ•™ä¸‹é©¬è€å¸ˆï¼Œæœ‰äº† istio è¿˜éœ€è¦å‘ dubbo è¿™ç§æœåŠ¡æ³¨å†Œå‘ç°è·¯ç”±çš„æ¡†æ¶å—ï¼Ÿå¦‚æœéœ€è¦ä»–ä»¬æ˜¯ä»€ä¹ˆæ ·çš„å…³ç³»ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":622602,"discussion_content":"åªä»æœåŠ¡å‘ç°è§’åº¦è®²æ²¡æœ‰å¿…è¦å¹¶å­˜ã€‚å¦‚æœéœ€è¦ä¸€èˆ¬æ˜¯æ—¢æƒ³æ¼”è¿›åˆ°service meshæ¶æ„ï¼Œä½¿ç”¨Istioçš„ç‰¹æ€§ï¼Œåˆæƒ³ä¿ç•™åŸæœ‰æœåŠ¡çš„å…¼å®¹æ€§ç­‰ã€‚ä»–ä»¬çš„å…³ç³»ä¼šå˜æˆä¸Šä¸‹æ¸¸å…³ç³»ï¼Œdubboçš„æ³¨å†Œä¿¡æ¯éœ€è¦è½¬æ¢æˆIstioçš„é…ç½®å¹¶ä¸‹å‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1688461527,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313449,"user_name":"èŠ’æœå°‘ä¾ ","can_delete":false,"product_type":"c3","uid":1350159,"ip_address":"","ucode":"98D0BBB52BB80F","user_header":"https://static001.geekbang.org/account/avatar/00/14/9a/0f/da7ed75a.jpg","comment_is_top":false,"comment_ctime":1632447871,"is_pvip":false,"replies":[{"id":113849,"content":"ä¸æ¥ç®¡","user_name":"ä½œè€…å›å¤","user_name_real":"é©¬è‹¥é£","uid":1046394,"ctime":1632982775,"ip_address":"","comment_id":313449,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸‹udpè¯·æ±‚èƒ½å¤Ÿè¢«istioæ¥ç®¡ä¹ˆ","like_count":0,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527357,"discussion_content":"ä¸æ¥ç®¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632982775,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":309873,"user_name":"æ¸ºå°deå°˜åŸƒ","can_delete":false,"product_type":"c3","uid":1101319,"ip_address":"","ucode":"05AE183A736FD6","user_header":"https://static001.geekbang.org/account/avatar/00/10/ce/07/15a91f75.jpg","comment_is_top":false,"comment_ctime":1630377984,"is_pvip":false,"replies":[{"id":112249,"content":"ä»¥æœ€æ–°ç‰ˆæœ¬ä¸ºå‡†","user_name":"ä½œè€…å›å¤","user_name_real":"é©¬è‹¥é£","uid":1046394,"ctime":1630381758,"ip_address":"","comment_id":309873,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100049401,"comment_content":"apiVersion: networking.istio.io&#47;v1alpha3 è¿™ä¸ªæ˜¯æ€ä¹ˆå®šçš„ï¼Ÿ\næˆ‘æŸ¥çœ‹ kubectl api-resources | grep VirtualService\nvirtualservices                    vs                                         networking.istio.io&#47;v1beta1                       true         VirtualService\nistioç‰ˆæœ¬æ˜¯1.7 æ˜¯ä¸æ˜¯æˆ‘è¿™é‡Œå°±å¾—å†™v1beta1äº†","like_count":0,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526048,"discussion_content":"ä»¥æœ€æ–°ç‰ˆæœ¬ä¸ºå‡†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630381758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":303231,"user_name":"Geek__Phoenix","can_delete":false,"product_type":"c3","uid":1453358,"ip_address":"","ucode":"EEA694C7DBB4A3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erGficovWwKUXs0zBEb87TtibFg8CC3icvXpPPicia4fkep5540LVfUAjCPWYhrCR8xQxuU97icS9HSfkzw/132","comment_is_top":false,"comment_ctime":1626678362,"is_pvip":false,"replies":[{"id":110120,"content":"è²Œä¼¼æ ¼å¼é”™è¯¯ï¼Œæ²¡ç¼©è¿›ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"é©¬è‹¥é£","uid":1046394,"ctime":1627353861,"ip_address":"","comment_id":303231,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100049401,"comment_content":"ä½ å¥½ï¼é…ç½®æ–‡ä»¶æˆ‘æ˜¯è¿™æ ·å†™çš„ï¼š\napiVersion: networking.istio.io&#47;v1alpha3\nkind: VirtualService\nmetadata:\n  name: reviews\nspec:\n  hosts:\n  - reviews\n  http:\n  - match:\n    - headers:\n        end-user:\n          regex: .*\n      - route:\n        - destination:\n            host: reviews\n            subset: v2\n  - route:\n    - destination:\n        host: reviews\n        subset: v1\nä½†æ˜¯æ‰§è¡Œä¹‹åæŠ¥é”™ï¼šâ€œerror: error parsing virtual-service-all-v1.yaml: error converting YAML to JSON: yaml: line 12: did not find expected keyâ€\né—®é¢˜æ˜¯12è¡Œæ ¹æœ¬å°±ä¸åœ¨è¿™éƒ¨åˆ†é…ç½®æ–‡ä»¶é‡Œï¼š\n 11         host: productpage\n 12         subset: v1\n 13 ---\nè¿™æ‰æ˜¯12è¡ŒåŠä¸Šä¸‹è¡Œçš„å†…å®¹ï¼Œè¯·é—®è¿™é…ç½®æœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ\n","like_count":0,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523599,"discussion_content":"è²Œä¼¼æ ¼å¼é”™è¯¯ï¼Œæ²¡ç¼©è¿›ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627353861,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":290042,"user_name":"Geek_b1592e","can_delete":false,"product_type":"c3","uid":2165248,"ip_address":"","ucode":"5614547DED1877","user_header":"","comment_is_top":false,"comment_ctime":1619336182,"is_pvip":false,"replies":[{"id":106170,"content":"åé¢æˆæƒå’Œè®¤è¯ç›¸å…³çš„è¯¾ç¨‹æœ‰ä»‹ç»","user_name":"ä½œè€…å›å¤","user_name_real":"é©¬è‹¥é£","uid":1046394,"ctime":1621343366,"ip_address":"","comment_id":290042,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100049401,"comment_content":"æƒ³è¯·æ•™ä¸€ä¸‹, å…³äºistioçš„åŠ¨æ€è·¯ç”±æˆ–è€…gateway, æ€ä¹ˆé…åˆè‡ªå·±çš„ä¸šåŠ¡ç³»ç»Ÿè¿›è¡ŒåŠ¨æ€é‰´æƒå’Œè·¯ç”±\næ¯”å¦‚: å®šä¹‰äº†æ¥å£ &#47;api&#47;product&#47;view   æˆæƒçš„è®¿é—®è§’è‰²æ˜¯ROLE_VIEW   åªè¦æœ‰æ­¤è§’è‰²çš„éƒ½å¯ä»¥è®¿é—®æ­¤é“¾æ¥\næŒ‰ç…§æ­£å¸¸çš„é€»è¾‘ éœ€è¦åˆ›å»ºyaml, ç„¶åé…ç½®ç›¸å…³çš„è§„åˆ™å  å°±å¯ä»¥ä½¿ç”¨äº†\nç°åœ¨çš„é—®é¢˜æ˜¯:  å¦‚æœæˆ‘æƒ³å¯¹æ¥å£å¢åŠ ä¸€ä¸ªè®¿é—®è§’è‰² ROLE_CHECK ä¹Ÿèƒ½è®¿é—®æ­¤é“¾æ¥, ç°æœ‰çš„åšæ³•æ˜¯æ›´æ–°ç›¸å…³çš„yamlé…ç½®,\nç„¶ååº”ç”¨ä¹‹åæ‰ä¼šç”Ÿæ•ˆ,  é‚£ä¹ˆistioæœ‰æ²¡æœ‰æä¾›ç›¸å…³çš„æ¥å£  å¯ä»¥è®©ç”¨æˆ·é€šè¿‡ç¨‹åºçš„æ–¹å¼æ¥åŠ¨æ€çš„å®ç°è¿™ä¸ªåŠŸèƒ½å‘¢?","like_count":0,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519093,"discussion_content":"åé¢æˆæƒå’Œè®¤è¯ç›¸å…³çš„è¯¾ç¨‹æœ‰ä»‹ç»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621343366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228431,"user_name":"å…‰","can_delete":false,"product_type":"c3","uid":1284618,"ip_address":"","ucode":"BDA7F41566E4FE","user_header":"https://static001.geekbang.org/account/avatar/00/13/9a/0a/6c74e932.jpg","comment_is_top":false,"comment_ctime":1592668951,"is_pvip":false,"replies":[{"id":84649,"content":"istioçš„gatewayåªæ˜¯å®šä¹‰æ²¡æœ‰è·¯ç”±é…ç½®ï¼Œå’Œk8sçš„ingressä¸ä¸€æ ·ã€‚è¿™æ ·å¯ä»¥è§£è€¦ä¸”å¤ç”¨Virtualserviceçš„è·¯ç”±é…ç½®","user_name":"ä½œè€…å›å¤","user_name_real":"é©¬è‹¥é£","uid":1046394,"ctime":1592985190,"ip_address":"","comment_id":228431,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100049401,"comment_content":"istio gateway é€šè¿‡å°† l4-l6 é…ç½®ä¸ l7 é…ç½®åˆ†ç¦»  è¿™å¥è¯æ€ä¹ˆç†è§£å‘¢ã€‚å’Œä»¥å‰ingress é™¤äº†æ§åˆ¶ç²’åº¦ä¸åŒå¤–è¿˜æœ‰å•¥ä¸ä¸€æ ·çš„ç—›ç‚¹ã€‚","like_count":0,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499031,"discussion_content":"istioçš„gatewayåªæ˜¯å®šä¹‰æ²¡æœ‰è·¯ç”±é…ç½®ï¼Œå’Œk8sçš„ingressä¸ä¸€æ ·ã€‚è¿™æ ·å¯ä»¥è§£è€¦ä¸”å¤ç”¨Virtualserviceçš„è·¯ç”±é…ç½®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592985190,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":216034,"user_name":"Jepsenwan","can_delete":false,"product_type":"c3","uid":1220569,"ip_address":"","ucode":"FEED052E0C10F5","user_header":"","comment_is_top":false,"comment_ctime":1589172642,"is_pvip":false,"replies":[{"id":80126,"content":"matchæ²¡ç”Ÿæ•ˆå§ï¼Ÿ ä½ è¿™ä¸ªend-user: ä¸­é—´æœ‰ç©ºæ ¼ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"é©¬è‹¥é£","uid":1046394,"ctime":1589292644,"ip_address":"","comment_id":216034,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100049401,"comment_content":"æ‚¨å¥½ï¼ ä¸çŸ¥é“å•¥æƒ…å†µï¼Œæˆ‘çš„ virtualservice description å¦‚ä¸‹ï¼Œè¿˜æ˜¯ä¸ç™»å½•ä¹Ÿèƒ½è¿›å…¥åˆ°v2, è¯·æŒ‡ç‚¹ã€‚\nHosts:\n    reviews\n  Http:\n    Match:\n      End - User:\n        Regex:  new*\n    Route:\n      Destination:\n        Host:    reviews\n        Subset:  v2\n    Route:\n      Destination:\n        Host:    reviews\n        Subset:  v1 \n\nè°¢è°¢ï¼","like_count":0,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494647,"discussion_content":"matchæ²¡ç”Ÿæ•ˆå§ï¼Ÿ ä½ è¿™ä¸ªend-user: ä¸­é—´æœ‰ç©ºæ ¼ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589292644,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":210209,"user_name":"Charles","can_delete":false,"product_type":"c3","uid":1201560,"ip_address":"","ucode":"C8C8A4F2B6C20F","user_header":"https://static001.geekbang.org/account/avatar/00/12/55/98/a49061ab.jpg","comment_is_top":false,"comment_ctime":1587697843,"is_pvip":false,"replies":[{"id":78420,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"é©¬è‹¥é£","uid":1046394,"ctime":1587805464,"ip_address":"","comment_id":210209,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100049401,"comment_content":"å®šä¹‰å¦‚ä¸‹çš„VirtualService, å‡è®¾ç™»å½•ç”¨æˆ·ä¸ºxxx\napiVersion: networking.istio.io&#47;v1alpha3\nkind: VirtualService\nmetadata:\n  name: reviews-login\nspec:\n  hosts:\n  - reviews\n  http:\n  - match:\n    - headers:\n        end-user:\n          exact: &#39;xxx&#39;\n  - route:\n    - destination:\n        host: reviews\n        subset: v2","like_count":0,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492971,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587805464,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":260500,"user_name":"lidashuang","can_delete":false,"product_type":"c3","uid":1104850,"ip_address":"","ucode":"560ABE8032760E","user_header":"https://static001.geekbang.org/account/avatar/00/10/db/d2/e29f8834.jpg","comment_is_top":false,"comment_ctime":1605027416,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":2,"score":3,"product_id":100049401,"comment_content":"æˆ‘å‘ä¸€ä¸ªå®Œæ•´çš„ï¼Œæœ‰æ ¼å¼çš„\nhttps:&#47;&#47;gist.github.com&#47;defp&#47;58add4519206bab5b23a71ecdef617d3","like_count":1,"discussions":[{"author":{"id":1004948,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/55/94/cfde237f.jpg","nickname":"ç¬¨ç¬¨ï½é¾™","note":"","ucode":"19D49EBB516648","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":341309,"discussion_content":"å¯¹æ¯”äº†ä¸‹å‘ç°ç¼©è¿›å†™é”™äº†â€¦â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610374740,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":335527,"user_name":"Amosãƒ¾","can_delete":false,"product_type":"c3","uid":1567014,"ip_address":"","ucode":"833F6FCB4042AD","user_header":"https://static001.geekbang.org/account/avatar/00/17/e9/26/472e16e4.jpg","comment_is_top":false,"comment_ctime":1645576412,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100049401,"comment_content":"è€å¸ˆï¼Œå¦‚æœæˆ‘ä»¬ä¸ç”¨gatewayè€Œæ˜¯ä½¿ç”¨äº†ingressï¼Œä¹Ÿå¯¹ç›¸å…³æœåŠ¡åˆ›å»ºäº†vså’Œdrï¼Œé‚£ä¹ˆingressä¸­æŒ‡å®šçš„svcæ˜¯vsè¿˜æ˜¯svcï¼Ÿ","like_count":0},{"had_liked":false,"id":333361,"user_name":"è‹¥æ˜Ÿ","can_delete":false,"product_type":"c3","uid":1247442,"ip_address":"","ucode":"D92DC0D777724E","user_header":"https://static001.geekbang.org/account/avatar/00/13/08/d2/83bdc5dd.jpg","comment_is_top":false,"comment_ctime":1644310883,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100049401,"comment_content":"è€å¸ˆï¼Œloadbalanceæ€ä¹ˆé…ç½®å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":331589,"user_name":"Wisdom","can_delete":false,"product_type":"c3","uid":1098980,"ip_address":"","ucode":"0787F954B66E93","user_header":"https://static001.geekbang.org/account/avatar/00/10/c4/e4/81ee2d8f.jpg","comment_is_top":false,"comment_ctime":1642665181,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100049401,"comment_content":"è€å¸ˆï¼Œä½ è¿™ä¸ªæ˜¯åœ¨katacoda å®éªŒå—ï¼Ÿæ€ä¹ˆçœ‹èµ·æ¥åƒæ˜¯åœ¨æœ¬æœºç¯å¢ƒã€‚å› ä¸ºæˆ‘åœ¨katacodaç¯å¢ƒå®‰è£…å¥½è¿™äº›æ—¶ï¼Œé‡åˆ°é€šè¿‡æœ¬æœºæµè§ˆå™¨æ— æ³•è®¿é—®åˆ°æœåŠ¡çš„é—®é¢˜","like_count":0},{"had_liked":false,"id":330627,"user_name":"Hello  World","can_delete":false,"product_type":"c3","uid":1685908,"ip_address":"","ucode":"90DFEA2D041E1E","user_header":"https://static001.geekbang.org/account/avatar/00/19/b9/94/25bfa1ac.jpg","comment_is_top":false,"comment_ctime":1642074724,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100049401,"comment_content":"grafana çš„è·¯ç”±æ€ä¹ˆé…\n","like_count":0}]}