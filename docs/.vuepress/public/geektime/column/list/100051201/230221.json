{"id":230221,"title":"02 | å†…å­˜æ± ï¼šå¦‚ä½•æå‡å†…å­˜åˆ†é…çš„æ•ˆç‡ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é™¶è¾‰ã€‚</p><p>ä¸Šä¸€è®²æˆ‘ä»¬æåˆ°ï¼Œé«˜é¢‘åœ°å‘½ä¸­CPUç¼“å­˜å¯ä»¥æå‡æ€§èƒ½ã€‚è¿™ä¸€è®²æˆ‘ä»¬æŠŠå…³æ³¨ç‚¹ä»CPUè½¬ç§»åˆ°å†…å­˜ï¼Œçœ‹çœ‹å¦‚ä½•æå‡å†…å­˜åˆ†é…çš„æ•ˆç‡ã€‚</p><p>æˆ–è®¸æœ‰åŒå­¦ä¼šè®¤ä¸ºï¼Œæˆ‘åˆä¸å†™åº•å±‚æ¡†æ¶ï¼Œå†…å­˜åˆ†é…ä¹Ÿä¾èµ–è™šæ‹Ÿæœºï¼Œå¹¶ä¸éœ€è¦åº”ç”¨å¼€å‘è€…äº†è§£ã€‚å¦‚æœä½ ä¹Ÿè¿™ä¹ˆè®¤ä¸ºï¼Œæˆ‘ä»¬ä¸å¦¨çœ‹çœ‹è¿™ä¸ªä¾‹å­ï¼šåœ¨Linuxç³»ç»Ÿä¸­ï¼Œç”¨Xmxè®¾ç½®JVMçš„æœ€å¤§å †å†…å­˜ä¸º8GBï¼Œä½†åœ¨è¿‘ç™¾ä¸ªå¹¶å‘çº¿ç¨‹ä¸‹ï¼Œè§‚å¯Ÿåˆ°Javaè¿›ç¨‹å ç”¨äº†14GBçš„å†…å­˜ã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿ</p><p>è¿™æ˜¯å› ä¸ºï¼Œç»å¤§éƒ¨åˆ†é«˜çº§è¯­è¨€éƒ½æ˜¯ç”¨Cè¯­è¨€ç¼–å†™çš„ï¼ŒåŒ…æ‹¬Javaï¼Œç”³è¯·å†…å­˜å¿…é¡»ç»è¿‡Cåº“ï¼Œè€ŒCåº“é€šè¿‡é¢„åˆ†é…æ›´å¤§çš„ç©ºé—´ä½œä¸ºå†…å­˜æ± ï¼Œæ¥åŠ å¿«åç»­ç”³è¯·å†…å­˜çš„é€Ÿåº¦ã€‚è¿™æ ·ï¼Œé¢„åˆ†é…çš„6GBçš„Cåº“å†…å­˜æ± å°±ä¸JVMä¸­é¢„åˆ†é…çš„8Gå†…å­˜æ± å åŠ åœ¨ä¸€èµ·ï¼Œé€ æˆäº†Javaè¿›ç¨‹çš„å†…å­˜å ç”¨è¶…å‡ºäº†é¢„æœŸã€‚</p><p>æŒæ¡å†…å­˜æ± çš„ç‰¹æ€§ï¼Œæ—¢å¯ä»¥é¿å…å†™ç¨‹åºæ—¶å†…å­˜å ç”¨è¿‡å¤§ï¼Œå¯¼è‡´æœåŠ¡å™¨æ€§èƒ½ä¸‹é™æˆ–è€…è¿›ç¨‹OOMï¼ˆOut Of Memoryï¼Œå†…å­˜æº¢å‡ºï¼‰è¢«ç³»ç»Ÿæ€æ­»ï¼Œè¿˜å¯ä»¥åŠ å¿«å†…å­˜åˆ†é…çš„é€Ÿåº¦ã€‚åœ¨ç³»ç»Ÿç©ºé—²æ—¶ç”³è¯·å†…å­˜èŠ±è´¹ä¸äº†å¤šå°‘æ—¶é—´ï¼Œä½†æ˜¯å¯¹äºåˆ†å¸ƒå¼ç¯å¢ƒä¸‹ç¹å¿™çš„å¤šçº¿ç¨‹æœåŠ¡ï¼Œè·å–å†…å­˜çš„æ—¶é—´ä¼šä¸Šå‡å‡ åå€ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œå†…å­˜æ± æ˜¯éå¸¸åº•å±‚çš„æŠ€æœ¯ï¼Œå½“æˆ‘ä»¬ç†è§£å®ƒåï¼Œå¯ä»¥æ›´æ¢é€‚åˆåº”ç”¨åœºæ™¯çš„å†…å­˜æ± ã€‚åœ¨å¤šç§ç¼–ç¨‹è¯­è¨€å…±å­˜çš„åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå†…å­˜æ± æœ‰å¾ˆå¹¿æ³›çš„åº”ç”¨ï¼Œä¼˜åŒ–å†…å­˜æ± å¸¦æ¥çš„ä»»ä½•å¾®å°çš„æ€§èƒ½æå‡ï¼Œéƒ½å°†è¢«åˆ†å¸ƒå¼é›†ç¾¤å·¨å¤§çš„ä¸»æœºè§„æ¨¡æ”¾å¤§ï¼Œä»è€Œå¸¦æ¥æ•´ä½“ä¸Šéå¸¸å¯è§‚çš„æ”¶ç›Šã€‚</p><!-- [[[read_end]]] --><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±é€šè¿‡å¯¹å†…å­˜æ± çš„å­¦ä¹ ï¼Œçœ‹çœ‹å¦‚ä½•æå‡å†…å­˜åˆ†é…çš„æ•ˆç‡ã€‚</p><h2>éšè—çš„å†…å­˜æ± </h2><p>å®é™…ä¸Šï¼Œåœ¨ä½ çš„ä¸šåŠ¡ä»£ç ä¸ç³»ç»Ÿå†…æ ¸é—´ï¼Œå¾€å¾€æœ‰ä¸¤å±‚å†…å­˜æ± å®¹æ˜“è¢«å¿½ç•¥ï¼Œå°¤å…¶æ˜¯å…¶ä¸­çš„Cåº“å†…å­˜æ± ã€‚</p><p>å½“ä»£ç ç”³è¯·å†…å­˜æ—¶ï¼Œé¦–å…ˆä¼šåˆ°è¾¾åº”ç”¨å±‚å†…å­˜æ± ï¼Œå¦‚æœåº”ç”¨å±‚å†…å­˜æ± æœ‰è¶³å¤Ÿçš„å¯ç”¨å†…å­˜ï¼Œå°±ä¼šç›´æ¥è¿”å›ç»™ä¸šåŠ¡ä»£ç ï¼Œå¦åˆ™ï¼Œå®ƒä¼šå‘æ›´åº•å±‚çš„Cåº“å†…å­˜æ± ç”³è¯·å†…å­˜ã€‚æ¯”å¦‚ï¼Œå¦‚æœä½ åœ¨Apacheã€Nginxç­‰æœåŠ¡ä¹‹ä¸Šåšæ¨¡å—å¼€å‘ï¼Œè¿™äº›æœåŠ¡ä¸­å°±æœ‰ç‹¬ç«‹çš„å†…å­˜æ± ã€‚å½“ç„¶ï¼ŒJavaä¸­ä¹Ÿæœ‰å†…å­˜æ± ï¼Œå½“é€šè¿‡å¯åŠ¨å‚æ•°XmxæŒ‡å®šJVMçš„å †å†…å­˜ä¸º8GBæ—¶ï¼Œå°±è®¾å®šäº†JVMå †å†…å­˜æ± çš„å¤§å°ã€‚</p><p>ä½ å¯èƒ½å¬è¯´è¿‡Googleçš„TCMallocå’ŒFaceBookçš„JEMallocï¼Œå®ƒä»¬ä¹Ÿæ˜¯Cåº“å†…å­˜æ± ã€‚å½“Cåº“å†…å­˜æ± æ— æ³•æ»¡è¶³å†…å­˜ç”³è¯·æ—¶ï¼Œæ‰ä¼šå‘æ“ä½œç³»ç»Ÿå†…æ ¸ç”³è¯·åˆ†é…å†…å­˜ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/89/6a/893edd82d03c628fae83b95bd4fbba6a.jpg?wh=2089*1745\" alt=\"\"></p><p>å›åˆ°æ–‡ç« å¼€å¤´çš„é—®é¢˜ï¼ŒJavaå·²ç»æœ‰äº†åº”ç”¨å±‚å†…å­˜æ± ï¼Œä¸ºä»€ä¹ˆè¿˜ä¼šå—åˆ°Cåº“å†…å­˜æ± çš„å½±å“å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºï¼Œé™¤äº†JVMè´Ÿè´£ç®¡ç†çš„å †å†…å­˜å¤–ï¼ŒJavaè¿˜æ‹¥æœ‰ä¸€äº›å †å¤–å†…å­˜ï¼Œç”±äºå®ƒä¸ä½¿ç”¨JVMçš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œæ‰€ä»¥æ›´ç¨³å®šã€æŒä¹…ï¼Œå¤„ç†IOçš„é€Ÿåº¦ä¹Ÿæ›´å¿«ã€‚è¿™äº›å †å¤–å†…å­˜å°±ä¼šç”±Cåº“å†…å­˜æ± è´Ÿè´£åˆ†é…ï¼Œè¿™æ˜¯Javaå—åˆ°Cåº“å†…å­˜æ± å½±å“çš„åŸå› ã€‚</p><p>å…¶å®ä¸åªæ˜¯Javaï¼Œå‡ ä¹æ‰€æœ‰ç¨‹åºéƒ½åœ¨ä½¿ç”¨Cåº“å†…å­˜æ± åˆ†é…å‡ºçš„å†…å­˜ã€‚Cåº“å†…å­˜æ± å½±å“ç€ç³»ç»Ÿä¸‹ä¾èµ–å®ƒçš„æ‰€æœ‰è¿›ç¨‹ã€‚æˆ‘ä»¬å°±ä»¥Linuxç³»ç»Ÿçš„é»˜è®¤Cåº“å†…å­˜æ± Ptmalloc2æ¥å…·ä½“åˆ†æï¼Œçœ‹çœ‹å®ƒåˆ°åº•å¯¹æ€§èƒ½å‘æŒ¥ç€æ€æ ·çš„ä½œç”¨ã€‚</p><p>Cåº“å†…å­˜æ± å·¥ä½œæ—¶ï¼Œä¼šé¢„åˆ†é…æ¯”ä½ ç”³è¯·çš„å­—èŠ‚æ•°æ›´å¤§çš„ç©ºé—´ä½œä¸ºå†…å­˜æ± ã€‚æ¯”å¦‚è¯´ï¼Œå½“ä¸»è¿›ç¨‹ä¸‹ç”³è¯·1å­—èŠ‚çš„å†…å­˜æ—¶ï¼ŒPtmalloc2ä¼šé¢„åˆ†é…132Kå­—èŠ‚çš„å†…å­˜ï¼ˆPtmalloc2ä¸­å«Main Arenaï¼‰ï¼Œåº”ç”¨ä»£ç å†ç”³è¯·å†…å­˜æ—¶ï¼Œä¼šä»è¿™å·²ç»ç”³è¯·åˆ°çš„132KBä¸­ç»§ç»­åˆ†é…ã€‚</p><p>å¦‚ä¸‹æ‰€ç¤ºï¼ˆä½ å¯ä»¥åœ¨<a href=\"https://github.com/russelltao/geektime_distrib_perf/tree/master/2-memory/alloc_address\">è¿™é‡Œ</a>æ‰¾åˆ°ç¤ºä¾‹ç¨‹åºï¼Œæ³¨æ„åœ°å€çš„å•ä½æ˜¯16è¿›åˆ¶ï¼‰ï¼š</p><pre><code># cat /proc/2891/maps | grep heap\n01643000-01664000 rw-p 00000000 00:00 0     [heap]\n</code></pre><p>å½“æˆ‘ä»¬é‡Šæ”¾è¿™1å­—èŠ‚æ—¶ï¼ŒPtmalloc2ä¹Ÿä¸ä¼šæŠŠå†…å­˜å½’è¿˜ç»™æ“ä½œç³»ç»Ÿã€‚Ptmalloc2è®¤ä¸ºï¼Œä¸å…¶æŠŠè¿™1å­—èŠ‚é‡Šæ”¾ç»™æ“ä½œç³»ç»Ÿï¼Œä¸å¦‚å…ˆç¼“å­˜ç€æ”¾è¿›å†…å­˜æ± é‡Œï¼Œä»ç„¶å½“ä½œç”¨æˆ·æ€å†…å­˜ç•™ä¸‹æ¥ï¼Œè¿›ç¨‹å†æ¬¡ç”³è¯·1å­—èŠ‚çš„å†…å­˜æ—¶å°±å¯ä»¥ç›´æ¥å¤ç”¨ï¼Œè¿™æ ·é€Ÿåº¦å¿«äº†å¾ˆå¤šã€‚</p><p>ä½ å¯èƒ½ä¼šæƒ³ï¼Œ132KBä¸å¤šå‘€ï¼Ÿä¸ºä»€ä¹ˆè¿™ä¸€è®²å¼€å¤´æåˆ°çš„Javaè¿›ç¨‹ï¼Œä¼šè¢«åˆ†é…äº†å‡ ä¸ªGBçš„å†…å­˜æ± å‘¢ï¼Ÿè¿™æ˜¯å› ä¸º<strong>å¤šçº¿ç¨‹ä¸å•çº¿ç¨‹çš„é¢„åˆ†é…ç­–ç•¥å¹¶ä¸ç›¸åŒ</strong>ã€‚</p><p>æ¯ä¸ª<strong>å­çº¿ç¨‹é¢„åˆ†é…çš„å†…å­˜æ˜¯64MB</strong>ï¼ˆPtmalloc2ä¸­è¢«ç§°ä¸ºThread Arenaï¼Œ32ä½ç³»ç»Ÿä¸‹ä¸º1MBï¼Œ64ä½ç³»ç»Ÿä¸‹ä¸º64MBï¼‰ã€‚å¦‚æœæœ‰100ä¸ªçº¿ç¨‹ï¼Œå°±å°†æœ‰6GBçš„å†…å­˜éƒ½ä¼šè¢«å†…å­˜æ± å ç”¨ã€‚å½“ç„¶ï¼Œå¹¶ä¸æ˜¯è®¾ç½®äº†1000ä¸ªçº¿ç¨‹ï¼Œå°±ä¼šé¢„åˆ†é…60GBçš„å†…å­˜ï¼Œå­çº¿ç¨‹å†…å­˜æ± æœ€å¤šåªèƒ½åˆ°8å€çš„CPUæ ¸æ•°ï¼Œæ¯”å¦‚åœ¨32æ ¸çš„æœåŠ¡å™¨ä¸Šï¼Œæœ€å¤šåªä¼šæœ‰256ä¸ªå­çº¿ç¨‹å†…å­˜æ± ï¼Œä½†è¿™ä¹Ÿéå¸¸å¤¸å¼ äº†ï¼Œ16GBï¼ˆ64MB * 256 = 16GBï¼‰çš„å†…å­˜å°†ä¸€ç›´è¢«Ptmalloc2å ç”¨ã€‚</p><p>å›åˆ°æœ¬æ–‡å¼€å¤´çš„é—®é¢˜ï¼ŒLinuxä¸‹çš„JVMç¼–è¯‘æ—¶é»˜è®¤ä½¿ç”¨äº†Ptmalloc2å†…å­˜æ± ï¼Œå› æ­¤æ¯ä¸ªçº¿ç¨‹éƒ½é¢„åˆ†é…äº†64MBçš„å†…å­˜ï¼Œè¿™é€ æˆå«æœ‰ä¸Šç™¾ä¸ªJavaçº¿ç¨‹çš„JVMå¤šä½¿ç”¨äº†6GBçš„å†…å­˜ã€‚åœ¨å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™äº›é¢„åˆ†é…å‡ºæ¥çš„å†…å­˜æ± ï¼Œå¯ä»¥æå‡åç»­å†…å­˜åˆ†é…çš„æ€§èƒ½ã€‚</p><p>ç„¶è€Œï¼ŒJavaä¸­çš„JVMå†…å­˜æ± å·²ç»ç®¡ç†äº†ç»å¤§éƒ¨åˆ†å†…å­˜ï¼Œç¡®å®ä¸èƒ½æ¥å—è«åå¤šå‡ºæ¥6GBçš„å†…å­˜ï¼Œé‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿæ—¢ç„¶æˆ‘ä»¬çŸ¥é“äº†Ptmalloc2å†…å­˜æ± çš„å­˜åœ¨ï¼Œå°±æœ‰ä¸¤ç§è§£å†³åŠæ³•ã€‚</p><p>é¦–å…ˆå¯ä»¥è°ƒæ•´Ptmalloc2çš„å·¥ä½œæ–¹å¼ã€‚<strong>é€šè¿‡è®¾ç½®MALLOC_ARENA_MAXç¯å¢ƒå˜é‡ï¼Œå¯ä»¥é™åˆ¶çº¿ç¨‹å†…å­˜æ± çš„æœ€å¤§æ•°é‡</strong>ï¼Œå½“ç„¶ï¼Œçº¿ç¨‹å†…å­˜æ± çš„æ•°é‡å‡å°‘åï¼Œä¼šå½±å“Ptmalloc2åˆ†é…å†…å­˜çš„é€Ÿåº¦ã€‚ä¸è¿‡ç”±äºJavaä¸»è¦ä½¿ç”¨JVMå†…å­˜æ± æ¥ç®¡ç†å¯¹è±¡ï¼Œè¿™ç‚¹å½±å“å¹¶ä¸é‡è¦ã€‚</p><p>å…¶æ¬¡å¯ä»¥æ›´æ¢æ‰Ptmalloc2å†…å­˜æ± ï¼Œé€‰æ‹©ä¸€ä¸ªé¢„åˆ†é…å†…å­˜æ›´å°‘çš„å†…å­˜æ± ï¼Œæ¯”å¦‚Googleçš„TCMallocã€‚</p><p>è¿™å¹¶ä¸æ˜¯è¯´Googleå‡ºå“çš„TCMallocæ€§èƒ½æ›´å¥½ï¼Œè€Œæ˜¯åœ¨ç‰¹å®šçš„åœºæ™¯ä¸­çš„é€‰æ‹©ä¸åŒã€‚è€Œä¸”ï¼Œç›²ç›®åœ°é€‰æ‹©TCMallocå¾ˆå¯èƒ½ä¼šé™ä½æ€§èƒ½ï¼Œå¦åˆ™Linuxç³»ç»Ÿæ—©æŠŠé»˜è®¤çš„å†…å­˜æ± æ”¹ä¸ºTCMallocäº†ã€‚</p><p>TCMallocå’ŒPtmalloc2æ˜¯ç›®å‰æœ€ä¸»æµçš„ä¸¤ä¸ªå†…å­˜æ± ï¼Œæ¥ä¸‹æ¥æˆ‘å¸¦ä½ é€šè¿‡å¯¹æ¯”TCMallocä¸Ptmalloc2å†…å­˜æ± ï¼Œçœ‹çœ‹åˆ°åº•è¯¥å¦‚ä½•é€‰æ‹©å†…å­˜æ± ã€‚</p><h2>é€‰æ‹©Ptmalloc2è¿˜æ˜¯TCMallocï¼Ÿ</h2><p>å…ˆæ¥çœ‹TCMallocé€‚ç”¨çš„åœºæ™¯ï¼Œ<strong>å®ƒå¯¹å¤šçº¿ç¨‹ä¸‹å°å†…å­˜çš„åˆ†é…ç‰¹åˆ«å‹å¥½ã€‚</strong></p><p>æ¯”å¦‚ï¼Œåœ¨2GHzçš„CPUä¸Šåˆ†é…ã€é‡Šæ”¾256Kå­—èŠ‚çš„å†…å­˜ï¼ŒPtmalloc2è€—æ—¶32çº³ç§’ï¼Œè€ŒTCMallocä»…è€—æ—¶10çº³ç§’ï¼ˆæµ‹è¯•ä»£ç å‚è§<a href=\"https://github.com/russelltao/geektime_distrib_perf/tree/master/2-memory/benchmark\">è¿™é‡Œ</a>ï¼‰ã€‚<strong>å·®è·è¶…è¿‡äº†3å€ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</strong>è¿™æ˜¯å› ä¸ºï¼ŒPtmalloc2å‡å®šï¼Œå¦‚æœçº¿ç¨‹Aç”³è¯·å¹¶é‡Šæ”¾äº†çš„å†…å­˜ï¼Œçº¿ç¨‹Bå¯èƒ½ä¹Ÿä¼šç”³è¯·ç±»ä¼¼çš„å†…å­˜ï¼Œæ‰€ä»¥å®ƒå…è®¸å†…å­˜æ± åœ¨çº¿ç¨‹é—´å¤ç”¨ä»¥æå‡æ€§èƒ½ã€‚</p><p>å› æ­¤ï¼Œæ¯æ¬¡åˆ†é…å†…å­˜ï¼ŒPtmalloc2ä¸€å®šè¦åŠ é”ï¼Œæ‰èƒ½è§£å†³å…±äº«èµ„æºçš„äº’æ–¥é—®é¢˜ã€‚ç„¶è€Œï¼ŒåŠ é”çš„æ¶ˆè€—å¹¶ä¸å°ã€‚å¦‚æœä½ ç›‘æ§åˆ†é…é€Ÿåº¦çš„è¯ï¼Œä¼šå‘ç°å•çº¿ç¨‹æœåŠ¡è°ƒæ•´ä¸º100ä¸ªçº¿ç¨‹ï¼ŒPtmalloc2ç”³è¯·å†…å­˜çš„é€Ÿåº¦ä¼šå˜æ…¢10å€ã€‚TCMallocé’ˆå¯¹å°å†…å­˜åšäº†å¾ˆå¤šä¼˜åŒ–ï¼Œæ¯ä¸ªçº¿ç¨‹ç‹¬ç«‹åˆ†é…å†…å­˜ï¼Œæ— é¡»åŠ é”ï¼Œæ‰€ä»¥é€Ÿåº¦æ›´å¿«ï¼</p><p>è€Œä¸”ï¼Œ<strong>çº¿ç¨‹æ•°è¶Šå¤šï¼ŒPtmalloc2å‡ºç°é”ç«äº‰çš„æ¦‚ç‡å°±è¶Šé«˜ã€‚</strong>æ¯”å¦‚æˆ‘ä»¬ç”¨40ä¸ªçº¿ç¨‹åšåŒæ ·çš„æµ‹è¯•ï¼ŒTCMallocåªæ˜¯ä»10çº³ç§’ä¸Šå‡åˆ°25çº³ç§’ï¼Œåªå¢é•¿äº†1.5å€ï¼Œè€ŒPtmalloc2åˆ™ä»32çº³ç§’ä¸Šå‡åˆ°137çº³ç§’ï¼Œå¢é•¿äº†3å€ä»¥ä¸Šã€‚</p><p>ä¸‹å›¾æ˜¯TCMallocä½œè€…ç»™å‡ºçš„æ€§èƒ½æµ‹è¯•æ•°æ®ï¼Œå¯ä»¥çœ‹åˆ°çº¿ç¨‹æ•°è¶Šå¤šï¼ŒäºŒè€…çš„é€Ÿåº¦å·®è·è¶Šå¤§ã€‚æ‰€ä»¥ï¼Œ<strong>å½“åº”ç”¨åœºæ™¯æ¶‰åŠå¤§é‡çš„å¹¶å‘çº¿ç¨‹æ—¶ï¼Œæ¢æˆTCMallocåº“ä¹Ÿæ›´æœ‰ä¼˜åŠ¿ï¼</strong></p><p><img src=\"https://static001.geekbang.org/resource/image/56/37/56c77fdf3a130fce4c98943f494c9237.png?wh=448*336\" alt=\"\" title=\"å›¾ç‰‡æ¥æºï¼šTCMalloc : Thread-Caching Malloc\"></p><p>é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆGlibCä¸æŠŠé»˜è®¤çš„Ptmalloc2å†…å­˜æ± æ¢æˆTCMallocå‘¢ï¼Ÿ<strong>å› ä¸ºPtmalloc2æ›´æ“…é•¿å¤§å†…å­˜çš„åˆ†é…ã€‚</strong></p><p>æ¯”å¦‚ï¼Œå•çº¿ç¨‹ä¸‹åˆ†é…257Kå­—èŠ‚çš„å†…å­˜ï¼ŒPtmalloc2çš„è€—æ—¶ä¸å˜ä»ç„¶æ˜¯32çº³ç§’ï¼Œä½†TCMallocå°±ç”±10çº³ç§’ä¸Šå‡åˆ°64çº³ç§’ï¼Œå¢é•¿äº†5å€ä»¥ä¸Šï¼<strong>ç°åœ¨TCMallocåè¿‡æ¥æ¯”Ptmalloc2æ…¢äº†1å€ï¼</strong>è¿™æ˜¯å› ä¸ºTCMallocç‰¹æ„é’ˆå¯¹å°å†…å­˜åšäº†ä¼˜åŒ–ã€‚</p><p>å¤šå°‘å­—èŠ‚å«å°å†…å­˜å‘¢ï¼ŸTCMallocæŠŠå†…å­˜åˆ†ä¸º3ä¸ªæ¡£æ¬¡ï¼Œå°äºç­‰äº256KBçš„ç§°ä¸ºå°å†…å­˜ï¼Œä»256KBåˆ°1Mç§°ä¸ºä¸­ç­‰å†…å­˜ï¼Œå¤§äº1MBçš„å«åšå¤§å†…å­˜ã€‚TCMallocå¯¹ä¸­ç­‰å†…å­˜ã€å¤§å†…å­˜çš„åˆ†é…é€Ÿåº¦å¾ˆæ…¢ï¼Œæ¯”å¦‚æˆ‘ä»¬ç”¨å•çº¿ç¨‹åˆ†é…2Mçš„å†…å­˜ï¼ŒPtmalloc2è€—æ—¶ä»ç„¶ç¨³å®šåœ¨32çº³ç§’ï¼Œä½†TCMallocå·²ç»ä¸Šå‡åˆ°86çº³ç§’ï¼Œå¢é•¿äº†7å€ä»¥ä¸Šã€‚</p><p>æ‰€ä»¥ï¼Œ<strong>å¦‚æœä¸»è¦åˆ†é…256KBä»¥ä¸‹çš„å†…å­˜ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œåº”å½“é€‰æ‹©TCMallocï¼›å¦åˆ™åº”ä½¿ç”¨Ptmalloc2ï¼Œå®ƒçš„é€šç”¨æ€§æ›´å¥½ã€‚</strong></p><h2>ä»å †è¿˜æ˜¯æ ˆä¸Šåˆ†é…å†…å­˜ï¼Ÿ</h2><p>ä¸çŸ¥é“ä½ å‘ç°æ²¡æœ‰ï¼Œåˆšåˆšè®¨è®ºçš„å†…å­˜æ± ä¸­åˆ†é…å‡ºçš„éƒ½æ˜¯å †å†…å­˜ï¼Œå¦‚æœä½ æŠŠåœ¨å †ä¸­åˆ†é…çš„å¯¹è±¡æ”¹ä¸ºåœ¨æ ˆä¸Šåˆ†é…ï¼Œé€Ÿåº¦è¿˜ä¼šå†å¿«ä¸Š1å€ï¼ˆå…·ä½“æµ‹è¯•ä»£ç å¯ä»¥åœ¨<a href=\"https://github.com/russelltao/geektime_distrib_perf/tree/master/2-memory/benchmark\">è¿™é‡Œ</a>æ‰¾åˆ°ï¼‰ï¼ä¸ºä»€ä¹ˆï¼Ÿ</p><p>å¯èƒ½æœ‰åŒå­¦è¿˜ä¸æ¸…æ¥šå †å’Œæ ˆå†…å­˜æ˜¯å¦‚ä½•åˆ†é…çš„ï¼Œæˆ‘å…ˆç®€å•ä»‹ç»ä¸€ä¸‹ã€‚</p><p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯é™æ€ç±»å‹è¯­è¨€ï¼Œé‚£ä¹ˆï¼Œä¸ä½¿ç”¨newå…³é”®å­—åˆ†é…çš„å¯¹è±¡å¤§éƒ½æ˜¯åœ¨æ ˆä¸­çš„ã€‚æ¯”å¦‚ï¼š</p><pre><code>C/C++/Javaè¯­è¨€ï¼šint a = 10;\n</code></pre><p>å¦åˆ™ï¼Œé€šè¿‡newæˆ–è€…mallocå…³é”®å­—åˆ†é…çš„å¯¹è±¡åˆ™æ˜¯åœ¨å †ä¸­çš„ï¼š</p><pre><code>Cè¯­è¨€ï¼šint * a = (int*) malloc(sizeof(int));\nC++è¯­è¨€ï¼šint * a = new int;\nJavaè¯­è¨€ï¼šint a = new Integer(10);\n</code></pre><p>å¦å¤–ï¼Œå¯¹äºåŠ¨æ€ç±»å‹è¯­è¨€ï¼Œæ— è®ºæ˜¯å¦ä½¿ç”¨newå…³é”®å­—ï¼Œå†…å­˜éƒ½æ˜¯ä»å †ä¸­åˆ†é…çš„ã€‚</p><p>äº†è§£äº†è¿™ä¸€ç‚¹ä¹‹åï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹ï¼Œä¸ºä»€ä¹ˆä»æ ˆä¸­åˆ†é…å†…å­˜ä¼šæ›´å¿«ã€‚</p><p>è¿™æ˜¯å› ä¸ºï¼Œç”±äºæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ç‹¬ç«‹çš„æ ˆï¼Œæ‰€ä»¥åˆ†é…å†…å­˜æ—¶ä¸éœ€è¦åŠ é”ä¿æŠ¤ï¼Œè€Œä¸”æ ˆä¸Šå¯¹è±¡çš„å°ºå¯¸åœ¨ç¼–è¯‘é˜¶æ®µå°±å·²ç»å†™å…¥å¯æ‰§è¡Œæ–‡ä»¶äº†ï¼Œæ‰§è¡Œæ•ˆç‡æ›´é«˜ï¼æ€§èƒ½è‡³ä¸Šçš„Golangè¯­è¨€å°±æ˜¯æŒ‰ç…§è¿™ä¸ªé€»è¾‘è®¾è®¡çš„ï¼Œå³ä½¿ä½ ç”¨newå…³é”®å­—åˆ†é…äº†å †å†…å­˜ï¼Œä½†ç¼–è¯‘å™¨å¦‚æœè®¤ä¸ºåœ¨æ ˆä¸­åˆ†é…ä¸å½±å“åŠŸèƒ½è¯­ä¹‰æ—¶ï¼Œä¼šè‡ªåŠ¨æ”¹ä¸ºåœ¨æ ˆä¸­åˆ†é…ã€‚</p><p>å½“ç„¶ï¼Œåœ¨æ ˆä¸­åˆ†é…å†…å­˜ä¹Ÿæœ‰ç¼ºç‚¹ï¼Œå®ƒæœ‰åŠŸèƒ½ä¸Šçš„é™åˆ¶ã€‚ä¸€æ˜¯ï¼Œ æ ˆå†…å­˜ç”Ÿå‘½å‘¨æœŸæœ‰é™ï¼Œå®ƒä¼šéšç€å‡½æ•°è°ƒç”¨ç»“æŸåè‡ªåŠ¨é‡Šæ”¾ï¼Œåœ¨å †ä¸­åˆ†é…çš„å†…å­˜ï¼Œå¹¶ä¸éšç€åˆ†é…æ—¶æ‰€åœ¨å‡½æ•°è°ƒç”¨çš„ç»“æŸè€Œé‡Šæ”¾ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸè¶³å¤Ÿä½¿ç”¨ã€‚äºŒæ˜¯ï¼Œæ ˆçš„å®¹é‡æœ‰é™ï¼Œå¦‚CentOS 7ä¸­æ˜¯8MBå­—èŠ‚ï¼Œå¦‚æœä½ ç”³è¯·çš„å†…å­˜è¶…è¿‡é™åˆ¶ä¼šé€ æˆæ ˆæº¢å‡ºé”™è¯¯ï¼ˆæ¯”å¦‚ï¼Œé€’å½’å‡½æ•°è°ƒç”¨å¾ˆå®¹æ˜“é€ æˆè¿™ç§é—®é¢˜ï¼‰ï¼Œè€Œå †åˆ™æ²¡æœ‰å®¹é‡é™åˆ¶ã€‚</p><p><strong>æ‰€ä»¥ï¼Œå½“æˆ‘ä»¬åˆ†é…å†…å­˜æ—¶ï¼Œå¦‚æœåœ¨æ»¡è¶³åŠŸèƒ½çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥åœ¨æ ˆä¸­åˆ†é…çš„è¯ï¼Œå°±é€‰æ‹©æ ˆã€‚</strong></p><h2>å°ç»“</h2><p>æœ€åæˆ‘ä»¬å¯¹è¿™ä¸€è®²åšä¸ªå°ç»“ã€‚</p><p>è¿›ç¨‹ç”³è¯·å†…å­˜çš„é€Ÿåº¦ï¼Œä»¥åŠæ€»å†…å­˜ç©ºé—´éƒ½å—åˆ°å†…å­˜æ± çš„å½±å“ã€‚çŸ¥é“è¿™äº›éšè—å†…å­˜æ± çš„å­˜åœ¨ï¼Œæ˜¯æå‡åˆ†é…å†…å­˜æ•ˆç‡çš„å‰æã€‚</p><p>éšè—ç€çš„Cåº“å†…å­˜æ± ï¼Œå¯¹è¿›ç¨‹çš„å†…å­˜å¼€é”€æœ‰å¾ˆå¤§çš„å½±å“ã€‚å½“è¿›ç¨‹çš„å ç”¨ç©ºé—´è¶…å‡ºé¢„æœŸæ—¶ï¼Œä½ éœ€è¦æ¸…æ¥šä½ æ­£åœ¨ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆå†…å­˜æ± ï¼Œå®ƒå¯¹æ¯ä¸ªçº¿ç¨‹é¢„åˆ†é…äº†å¤šå¤§çš„ç©ºé—´ã€‚</p><p>ä¸åŒçš„Cåº“å†…å­˜æ± ï¼Œéƒ½æœ‰å®ƒä»¬æœ€é€‚åˆçš„åº”ç”¨åœºæ™¯ï¼Œä¾‹å¦‚TCMallocå¯¹å¤šçº¿ç¨‹ä¸‹çš„å°å†…å­˜åˆ†é…ç‰¹åˆ«å‹å¥½ï¼Œè€ŒPtmalloc2åˆ™å¯¹å„ç±»å°ºå¯¸çš„å†…å­˜ç”³è¯·éƒ½æœ‰ç¨³å®šçš„è¡¨ç°ï¼Œæ›´åŠ é€šç”¨ã€‚</p><p>å†…å­˜æ± ç®¡ç†ç€å †å†…å­˜ï¼Œå®ƒçš„åˆ†é…é€Ÿåº¦æ¯”ä¸ä¸Šåœ¨æ ˆä¸­åˆ†é…å†…å­˜ã€‚åªæ˜¯æ ˆä¸­åˆ†é…çš„å†…å­˜å—åˆ°ç”Ÿå‘½å‘¨æœŸå’Œå®¹é‡å¤§å°çš„é™åˆ¶ï¼Œåº”ç”¨åœºæ™¯æ›´ä¸ºæœ‰é™ã€‚ç„¶è€Œï¼Œå¦‚æœæœ‰å¯èƒ½çš„è¯ï¼Œå°½é‡åœ¨æ ˆä¸­åˆ†é…å†…å­˜ï¼Œå®ƒæ¯”å†…å­˜æ± ä¸­çš„å †å†…å­˜åˆ†é…é€Ÿåº¦å¿«å¾ˆå¤šï¼</p><p>OKï¼Œä»Šå¤©æˆ‘ä»¬ä»å†…å­˜åˆ†é…çš„è§’åº¦èŠäº†åˆ†å¸ƒå¼ç³»ç»Ÿæ€§èƒ½æå‡çš„å†…å®¹ï¼Œå¸Œæœ›å­¦ä¹ è¿‡ä»Šå¤©çš„å†…å®¹åï¼Œä½ çŸ¥é“å¦‚ä½•æœ€å¿«é€Ÿåœ°ç”³è¯·åˆ°å†…å­˜ï¼Œäº†è§£ä½ æ­£åœ¨ä½¿ç”¨çš„å†…å­˜æ± ï¼Œå¹¶æ¸…æ¥šå®ƒå¯¹è¿›ç¨‹æœ€ç»ˆå†…å­˜å¤§å°çš„å½±å“ã€‚å³ä½¿å¯¹ç¬¬ä¸‰æ–¹ç»„ä»¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡LD_PRELOADç¯å¢ƒå˜é‡ï¼Œåœ¨ç¨‹åºå¯åŠ¨æ—¶æ›´æ¢æœ€é€‚åˆçš„Cåº“å†…å­˜æ± ï¼ˆLinuxä¸­é€šè¿‡LD_PRELOADä¿®æ”¹åŠ¨æ€åº“æ¥æ›´æ¢å†…å­˜æ± ï¼Œå‚è§<a href=\"https://github.com/russelltao/geektime_distrib_perf/tree/master/2-memory/benchmark\">ç¤ºä¾‹ä»£ç </a>ï¼‰ã€‚</p><p>å†…å­˜åˆ†é…æ—¶é—´è™½ç„¶ä¸èµ·çœ¼ï¼Œä½†æ—¶åˆ»ç”¨æœ€å¿«çš„æ–¹æ³•ç”³è¯·å†…å­˜ï¼Œæ­£æ˜¯é«˜æ‰‹ä¸åˆå­¦è€…çš„åŒºåˆ«ï¼Œç›¸ä¼¼ç®—æ³•çš„æ€§èƒ½å·®è·å°±ä½“ç°åœ¨è¿™äº›ç¼–ç ç»†èŠ‚ä¸Šï¼Œå¸Œæœ›ä½ èƒ½å¤Ÿé‡è§†å®ƒã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æœ€åï¼Œç•™ç»™ä½ ä¸€ä¸ªæ€è€ƒé¢˜ã€‚åˆ†é…å¯¹è±¡æ—¶ï¼Œé™¤äº†åˆ†é…å†…å­˜ï¼Œè¿˜éœ€è¦åˆå§‹åŒ–å¯¹è±¡çš„æ•°æ®ç»“æ„ã€‚å†…å­˜æ± å¯¹äºåˆå§‹åŒ–å¯¹è±¡æœ‰ä»€ä¹ˆå¸®åŠ©å—ï¼Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºä¸å¤§å®¶ä¸€èµ·æ¢è®¨ã€‚</p><p>æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™èŠ‚è¯¾å¯¹ä½ æœ‰ä¸€äº›å¯å‘ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p>","neighbors":{"left":{"article_title":"01 | CPUç¼“å­˜ï¼šæ€æ ·å†™ä»£ç èƒ½å¤Ÿè®©CPUæ‰§è¡Œå¾—æ›´å¿«ï¼Ÿ","id":230194},"right":{"article_title":"03 | ç´¢å¼•ï¼šå¦‚ä½•ç”¨å“ˆå¸Œè¡¨ç®¡ç†äº¿çº§å¯¹è±¡ï¼Ÿ","id":232351}},"comments":[{"had_liked":false,"id":211596,"user_name":"å¿†æ°´å¯’","can_delete":false,"product_type":"c1","uid":1147453,"ip_address":"","ucode":"E3F86BD8AA8903","user_header":"https://static001.geekbang.org/account/avatar/00/11/82/3d/356fc3d6.jpg","comment_is_top":false,"comment_ctime":1587987340,"is_pvip":false,"replies":[{"id":"78662","content":"å¿†æ°´å¯’åŒå­¦è¯´å¾—å¯¹ï¼Œäº«å…ƒæ¨¡å¼è¿™ä¸ªè¯ç”¨å¾—ä¹Ÿå¾ˆå¥½ï¼äº«å…ƒæ¨¡å¼æœ‰å¹¿æ³›çš„åº”ç”¨ï¼Œä¸åªåœ¨åº”ç”¨å±‚ï¼Œåœ¨å†…æ ¸ä¸­ä¹Ÿè¢«å¹¿æ³›ä½¿ç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1587996146,"ip_address":"","comment_id":211596,"utype":1}],"discussion_count":6,"race_medal":0,"score":"177681646476","product_id":100051201,"comment_content":"1ã€æ€è€ƒé¢˜ï¼šå†…å­˜æ± ä¸­å¯ä»¥åˆ©ç”¨äº«å…ƒæ¨¡å¼å°†å¸¸ç”¨çš„å¯¹è±¡ä¸€ç›´ä¿ç•™ç€ï¼Œå‡å°‘é‡å¤ç”³è¯·å¯¼è‡´çš„æ€§èƒ½çš„é¡ºè€—ã€‚<br>2ã€æœ€åä¸€æ®µè¯â€œå†…å­˜åˆ†é…æ—¶é—´è™½ç„¶ä¸èµ·çœ¼ï¼Œä½†æ—¶åˆ»ç”¨æœ€å¿«çš„æ–¹æ³•ç”³è¯·å†…å­˜ï¼Œæ­£æ˜¯é«˜æ‰‹ä¸åˆå­¦è€…çš„åŒºåˆ«ã€‚â€è¯´çš„å¾ˆå¥½ï¼Œæ˜¯çš„ï¼ŒçœŸæ­£çš„é«˜æ‰‹åº”è¯¥èƒ½å¤Ÿä»ç®—æ³•åˆ°åº•å±‚éƒ½èƒ½ä¼˜åŒ–ã€‚","like_count":42,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493309,"discussion_content":"å¿†æ°´å¯’åŒå­¦è¯´å¾—å¯¹ï¼Œäº«å…ƒæ¨¡å¼è¿™ä¸ªè¯ç”¨å¾—ä¹Ÿå¾ˆå¥½ï¼äº«å…ƒæ¨¡å¼æœ‰å¹¿æ³›çš„åº”ç”¨ï¼Œä¸åªåœ¨åº”ç”¨å±‚ï¼Œåœ¨å†…æ ¸ä¸­ä¹Ÿè¢«å¹¿æ³›ä½¿ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587996146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1240465,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ed/91/1d332031.jpg","nickname":"æˆ‘èƒ½èµ°å¤šè¿œ","note":"","ucode":"07DF5D5DADFA3C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":251329,"discussion_content":"ç±»ä¼¼äºå†…å­˜æ± ï¼›ç¼“å­˜çš„æ„Ÿå¿µã€‚æˆ‘ç°åœ¨æsdnï¼Œdpdk+vppç›¸å…³ã€‚åŸºæœ¬ä¸Šéƒ½æ˜¯å†…å­˜æ± çš„åº”ç”¨ã€‚ç©ºé—´æ¢æ—¶é—´ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1588080579,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1064732,"avatar":"https://static001.geekbang.org/account/avatar/00/10/3f/1c/1e4dfbc9.jpg","nickname":"è¿œæ–¹","note":"","ucode":"244C74F9857196","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351814,"discussion_content":"java çš„Stringå’ŒLå°±æ˜¯ç”¨äº«å…ƒæ¨¡å¼å®ç°çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614475105,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1083600,"avatar":"https://static001.geekbang.org/account/avatar/00/10/88/d0/6e75f766.jpg","nickname":"æœ‰æœ‹è‡ªè¿œæ–¹æ¥","note":"","ucode":"23A12829DEB119","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":261664,"discussion_content":"äº«å…ƒæ¨¡å¼ã€‚åªçŸ¥æœ‰è¿™ä¸ªæ¨¡å¼ï¼Œå´æ²¡æœ‰ç”¨è¿‡ã€‚æƒ­æ„§\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588990559,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1240465,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ed/91/1d332031.jpg","nickname":"æˆ‘èƒ½èµ°å¤šè¿œ","note":"","ucode":"07DF5D5DADFA3C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":251204,"discussion_content":"äº«å…ƒæ¨¡å¼ï¼Œè¿™è¯éƒ½æ²¡å¬è¿‡ã€‚å—æ•™äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588073356,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1147453,"avatar":"https://static001.geekbang.org/account/avatar/00/11/82/3d/356fc3d6.jpg","nickname":"å¿†æ°´å¯’","note":"","ucode":"E3F86BD8AA8903","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1240465,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ed/91/1d332031.jpg","nickname":"æˆ‘èƒ½èµ°å¤šè¿œ","note":"","ucode":"07DF5D5DADFA3C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":251294,"discussion_content":"ä¸€èµ·äº¤æµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588078926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":251204,"ip_address":""},"score":251294,"extra":""}]}]},{"had_liked":false,"id":211555,"user_name":"ermaot","can_delete":false,"product_type":"c1","uid":1304459,"ip_address":"","ucode":"DD5AC5FFEAA9CC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/1PyKtnO7QRIP8mlcGNu4wpYVjOo6ZZ7pNIxbmRSYK0KvbcXPVcsiba4ibo1GTjQrRYibiaPxrrTPtlGnzoDEP7tDBQ/132","comment_is_top":false,"comment_ctime":1587982788,"is_pvip":false,"replies":[{"id":"78666","content":"å¾ˆé«˜å…´èƒ½å¸®åˆ°ä½ ï¼Œæˆ‘è·Ÿç¼–è¾‘ä¸€ç›´æ‹…å¿ƒè¿™ä¸ªä¼šä¸ä¼šè®²å¾—å¤ªæ·±äº†å‘¢ï¼Œå…¶å®å¾ˆå¤šæ€§èƒ½ä¼˜å…ˆçš„ç»„ä»¶éƒ½å¯ä»¥ç”¨å¾—ä¸Š","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1587996527,"ip_address":"","comment_id":211555,"utype":1}],"discussion_count":3,"race_medal":0,"score":"139026936260","product_id":100051201,"comment_content":"è§£å†³äº†æˆ‘å¾ˆå¤šç–‘æƒ‘ã€‚æ¯”å¦‚mysqlå¾ˆå¤šäººå»ºè®®æŠŠå†…å­˜åˆ†é…æ¢æˆtcmallocï¼Œå°±æ˜¯å› ä¸ºmysqlè¦æ”¯æŒå¤§é‡å¹¶å‘ï¼Œé€‚åˆtcmallocçš„åº”ç”¨åœºæ™¯ã€‚æ²¡æœ‰å¯¹æ¯”å°±æ²¡æœ‰å‘ç°ï¼Œä¸¤åº“ä¸€æ¯”ï¼ŒçŸ¥è¯†ç‚¹å°±å‡ºæ¥äº†","like_count":33,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493297,"discussion_content":"å¾ˆé«˜å…´èƒ½å¸®åˆ°ä½ ï¼Œæˆ‘è·Ÿç¼–è¾‘ä¸€ç›´æ‹…å¿ƒè¿™ä¸ªä¼šä¸ä¼šè®²å¾—å¤ªæ·±äº†å‘¢ï¼Œå…¶å®å¾ˆå¤šæ€§èƒ½ä¼˜å…ˆçš„ç»„ä»¶éƒ½å¯ä»¥ç”¨å¾—ä¸Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587996527,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1304459,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/1PyKtnO7QRIP8mlcGNu4wpYVjOo6ZZ7pNIxbmRSYK0KvbcXPVcsiba4ibo1GTjQrRYibiaPxrrTPtlGnzoDEP7tDBQ/132","nickname":"ermaot","note":"","ucode":"DD5AC5FFEAA9CC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":252309,"discussion_content":"ä½ é—®è€å¸ˆçš„é—®é¢˜ï¼Œæˆ‘æƒ³äº†ä¸€ä¸‹ï¼Œä¸çŸ¥é“è‡ªå·±æ˜¯å¦ç†è§£å¯¹äº†ï¼Œä½ è¯•è¯•bccçš„xfsslowerå’Œext4slowerå·¥å…·ã€‚å¯ä»¥è·Ÿè¸ªå¤§äºç‰¹å®šæ—¶é•¿çš„å»¶æ—¶ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1588151810,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1198281,"avatar":"https://static001.geekbang.org/account/avatar/00/12/48/c9/f4807e6e.jpg","nickname":"lily","note":"","ucode":"EF9E81B81C21E5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":251863,"discussion_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘ç°åœ¨æœ‰ä¸ªioçš„é—®é¢˜ï¼Œä¹‹å‰é‡åˆ°æœåŠ¡åœ¨ç‰¹å®šæ—¶é—´ä¸‹ä¼šå¶å‘æŠ–åŠ¨çš„æƒ…å†µï¼Œä½†æ˜¯é€šè¿‡è°ƒç”¨é“¾æŸ¥çœ‹ï¼Œæ–¹æ³•çœŸæ­£æ‰§è¡Œæ—¶é—´å¾ˆå¿«ï¼Œæ•´ä¸ªé“¾è·¯ä¸Šå¯èƒ½è€—æ—¶çš„ä¹Ÿå°±æ˜¯æ—¥å¿—å…¥ç›˜äº†ï¼Œé€šè¿‡è§‚å¯Ÿioï¼Œå‘ç°åœ¨ç‰¹å®šæ—¶é—´ä¸‹iowaitä¼šæœ‰å¾®é‡æŠ–åŠ¨ï¼ŒiotopæŠ“åˆ°çš„è¿›ç¨‹ä¹Ÿæ²¡çœ‹å‡ºæœ‰ä»€ä¹ˆå¼‚å¸¸ï¼Œåæ¥å‘ç°æ‰€æœ‰æŠ–åŠ¨çš„èŠ‚ç‚¹æ“ä½œç³»ç»Ÿç‰ˆæœ¬éƒ½æ˜¯centos7ï¼Œæ–‡ä»¶ç³»ç»Ÿæ˜¯ext4ï¼Œè€Œå…¶ä»–æ­£å¸¸çš„æœºå™¨éƒ½æ˜¯xfsçš„ï¼Œä¸çŸ¥é“å’Œè¿™ä¸ªæœ‰æ²¡æœ‰å…³ç³»ï¼Œçœ‹è€å¸ˆåé¢ä¹Ÿæœ‰ioæ–¹é¢çš„ä¼˜åŒ–è¯¾ç¨‹ï¼Œåœ¨è¿™é‡Œæå‰å’¨è¯¢ä¸‹ï¼Œæ˜¯å¦æœ‰ä¸€äº›æ€è·¯ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588122822,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":211797,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1588007942,"is_pvip":false,"replies":[{"id":"78733","content":"åˆæ·»aoeå¤§æ‹›äº†^_^","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1588040057,"ip_address":"","comment_id":211797,"utype":1}],"discussion_count":3,"race_medal":0,"score":"96077288454","product_id":100051201,"comment_content":"1. åŸæ¥Javaå †çš„å†…å­˜ç©ºé—´æ˜¯é€šè¿‡Cåº“å†…å­˜æ± ç”³è¯·ï¼<br>2. ç¬¬ä¸€æ¬¡çŸ¥é“å†…å­˜åˆ†é…å™¨çš„å­˜åœ¨ï¼šPtmalloc2ã€TCMalloc<br>3. åœ¨æ ˆä¸­ç”³è¯·å†…å­˜æ¯”å †ä¸­å¿«æ˜¯å› ä¸ºä¸éœ€è¦åŠ é”ã€‚<br>æ”¶è·æƒŠå‘†äº†ï¼","like_count":23,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493368,"discussion_content":"åˆæ·»aoeå¤§æ‹›äº†^_^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588040057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1625689,"avatar":"","nickname":"ç¬¦å·","note":"","ucode":"004DA7A96A2DD8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588085,"discussion_content":"ç¬¬ä¸€ç‚¹æœ‰é—®é¢˜å§ï¼Œä½œè€…æ„æ€æ˜¯è¯´JVMå †å¤–å†…å­˜æ˜¯é€šè¿‡cåº“å†…å­˜æ± ç”³è¯·çš„ï¼Œæ²¡æœ‰è¯´å †å†…å­˜æ˜¯é€šè¿‡cåº“å†…å­˜æ± ç”³è¯·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663549712,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1625689,"avatar":"","nickname":"ç¬¦å·","note":"","ucode":"004DA7A96A2DD8","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":588092,"discussion_content":"è°¢è°¢çº æ­£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663551298,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":588085,"ip_address":"æµ™æ±Ÿ"},"score":588092,"extra":""}]}]},{"had_liked":false,"id":212861,"user_name":"å­ä¸è¯­","can_delete":false,"product_type":"c1","uid":1123186,"ip_address":"","ucode":"907AB44706467B","user_header":"https://static001.geekbang.org/account/avatar/00/11/23/72/70190bc1.jpg","comment_is_top":false,"comment_ctime":1588227072,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"74602671104","product_id":100051201,"comment_content":"è€å¸ˆå¥½ï¼Œä¸€ç›´åœ¨å­¦ä¹ è€å¸ˆçš„è¯¾ç¨‹ï¼Œå‘ç°å‡ºäº†æ€§èƒ½çš„ï¼Œèµ¶ç´§æ¥å­¦ä¹ ã€‚å­¦ä¹ è¿™ç¯‡é‡åˆ°å‡ ä¸ªé—®é¢˜ï¼Œéº»çƒ¦è€å¸ˆèƒ½è§£æƒ‘ã€‚<br>ç¬¬ä¸€ä¸ªé—®é¢˜:<br>æ–‡ä¸­æåˆ°: é¢„åˆ†é…çš„ 6GB çš„ C åº“å†…å­˜æ± å°±ä¸ JVM ä¸­é¢„åˆ†é…çš„ 8G å†…å­˜æ± å åŠ åœ¨ä¸€èµ·ï¼Œé€ æˆäº† Java è¿›ç¨‹çš„å†…å­˜å ç”¨è¶…å‡ºäº†é¢„æœŸã€‚<br><br>è¿™é‡Œé¢„åˆ†é…çš„6gå†…å­˜æ± æ˜¯è™šæ‹Ÿåœ°å€ç©ºé—´å—ï¼Ÿ<br><br>ç¬¬äºŒä¸ªé—®é¢˜ï¼Œå¦‚æœæˆ‘çš„è™šæ‹Ÿæœºæ€»å…±10gï¼Œjvmé¢„åˆ†é…äº†6gå †å†…å­˜ï¼Œé‚£è¿™6gå†…å­˜æ˜¯ä¸æ˜¯ä¸èƒ½ç”¨ä½œå…¶ä»–çš„åœ°æ–¹äº†ï¼Ÿ","like_count":17,"discussions":[{"author":{"id":1123186,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/72/70190bc1.jpg","nickname":"å­ä¸è¯­","note":"","ucode":"907AB44706467B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":262729,"discussion_content":"è¿™ä¹ˆå¤šå°ä¼™ä¼´ç‚¹èµï¼Œè‚¯å®šæœ‰å’Œæˆ‘ä¸€æ ·çš„ç–‘é—®ï¼Œè¿™äº›å¤©æŸ¥äº†äº›èµ„æ–™ï¼Œå¤§å®¶ä¸€èµ·è®¨è®ºä¸‹ã€‚\nç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œåˆ†é…çš„æ˜¯è™šæ‹Ÿå†…å­˜ï¼ŒåŸå› æ˜¯: Java åº”ç”¨è¿è¡Œåœ¨ JVM ä¸Šï¼ŒJVM æœ‰è‡ªå·±çš„ä¸€å¥—å†…å­˜è°ƒç”¨æ–¹å¼ï¼Œä¸€èˆ¬ä¸ä¼šä½¿ç”¨åˆ° glibcï¼Œä½†æŸäº›å¯¹è±¡è¿˜æ˜¯ä¼šè°ƒç”¨ mallocï¼Œå°±æ˜¯æˆ‘ä»¬è¯´çš„å †å¤–å†…å­˜ï¼Œä»è€Œä½¿ç”¨ä½¿ç”¨åˆ° per thread  arenas è¿™ä¸ªç‰¹æ€§ï¼Œç¼ºçœé…ç½®åœ¨64bitä¸‹é¢æ˜¯æ¯ä¸€ä¸ªarenaä¸º64Mï¼Œå½“ç„¶ä¸ä¼šæ— é™åˆ†é…ï¼Œæ–‡ä¸­è€å¸ˆä¹Ÿæåˆ°äº†ï¼Œä¸€ä¸ªè¿›ç¨‹æœ€å¤šæœ‰ cores * 8ä¸ªarenaã€‚å‡è®¾ä½ çš„æœºå™¨æ˜¯4æ ¸çš„ï¼Œé‚£ä¹ˆæœ€å¤šå¯ä»¥æœ‰4 * 8 = 32ä¸ªarenaï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨32 * 64 = 2048Mè™šæ‹Ÿå†…å­˜ã€‚\nç¬¬äºŒä¸ªé—®é¢˜: åˆ†é…6Gå†…å­˜ç»™jvmï¼Œä½†æ˜¯å¦‚æœæœåŠ¡åˆšå¯åŠ¨ï¼Œä½¿ç”¨çœŸå®å†…å­˜å¾ˆå°‘ï¼ŒåŒæ—¶æœåŠ¡å™¨ä¸Šè¿˜è¿è¡Œåˆ«çš„æœåŠ¡ï¼Œéå¸¸åƒå†…å­˜çš„æƒ…å†µï¼Œä¼šå‡ºç°æŠ¢å å†…å­˜çš„æƒ…å†µã€‚","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1589122715,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1038574,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/d8/ee/6e7c2264.jpg","nickname":"Only now","note":"","ucode":"C617473A03AE27","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1123186,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/72/70190bc1.jpg","nickname":"å­ä¸è¯­","note":"","ucode":"907AB44706467B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":325334,"discussion_content":"è¯·æ•™ä¸€ä¸‹ï¼Œä¸åˆ†é…çš„åº”è¯¥æ˜¯æœ¬åœ°å€ç©ºé—´çš„é¢„ç•™å§ï¼Œæ˜¯ä¸æ˜¯ä¸ä¼šå®é™…å ç”¨äº†ç‰©ç†å†…å­˜ï¼ŸæŒ‰ç…§ä¸€èˆ¬èµ„æ–™çš„è¯´æ³•ï¼Œè¿›ç¨‹åœ°å€ç©ºé—´æ˜¯éš”ç¦»çš„ã€‚å¯åŠ¨æ—¶ä¸éœ€è¦çš„å†…å­˜åˆ†é…æ˜¯å¦‚ä½•å½±å“åˆ°å…¶ä»–çš„è¿›ç¨‹çš„å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605274173,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":262729,"ip_address":""},"score":325334,"extra":""}]},{"author":{"id":1989922,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/5d/22/2b41b7bf.jpg","nickname":"AlexğŸ’","note":"","ucode":"FE24192C56A176","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":265166,"discussion_content":"æ‰€ä»¥Javaä½¿ç”¨å †å¤–å†…å­˜çš„æ—¶å€™æ‰æœ‰å½±å“æ˜¯å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589378068,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1123186,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/72/70190bc1.jpg","nickname":"å­ä¸è¯­","note":"","ucode":"907AB44706467B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1989922,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/5d/22/2b41b7bf.jpg","nickname":"AlexğŸ’","note":"","ucode":"FE24192C56A176","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":265310,"discussion_content":"å¯¹ï¼Œå †å†…å­˜æ˜¯ç”±jvmç®¡ç†çš„ï¼Œä¸ä¼šè°ƒç”¨malloc","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589383371,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":265166,"ip_address":""},"score":265310,"extra":""}]}]},{"had_liked":false,"id":225534,"user_name":"æ¢ç´¢æ— æ­¢å¢ƒ","can_delete":false,"product_type":"c1","uid":1044178,"ip_address":"","ucode":"91D2A9907DFA79","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ee/d2/7024431c.jpg","comment_is_top":false,"comment_ctime":1591780325,"is_pvip":false,"replies":[{"id":"83139","content":"å¯¹å°å†…å­˜åšä¼˜åŒ–ï¼Œå…¶å®æ˜¯ä¼šé€ æˆå†…å­˜åˆ©ç”¨ç‡ä¸‹é™çš„ï¼Œç‰¹åˆ«æ˜¯æ¯ä¸ªçº¿ç¨‹ç‹¬ç«‹ç»´æŠ¤å†…å­˜æ± ï¼Œå°±æ‹’ç»çº¿ç¨‹ä¹‹é—´å…±äº«å†…å­˜æ± äº†ã€‚ç”±äºå°å†…å­˜çš„ä½¿ç”¨æœ€ä¸ºé¢‘ç¹ï¼Œæ‰€ä»¥åˆ©ç”¨ç‡çš„ä¸‹é™è¡¨ç°ä¸æ˜æ˜¾ã€‚ä½†å¯¹å¤§å†…å­˜åšä¸Šè¿°ä¼˜åŒ–ï¼Œå°±ä¼šé€ æˆåˆ©ç”¨ç‡ä¸‹é™è¿‡å¤šï¼Œæ€§ä»·æ¯”ä¸åˆ’ç®—ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1591837279,"ip_address":"","comment_id":225534,"utype":1}],"discussion_count":2,"race_medal":0,"score":"53131387877","product_id":100051201,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘æœ‰ä¸€ä¸ªç–‘é—®<br>TCMallocæ—¢ç„¶å¯ä»¥é’ˆå¯¹å°å†…å­˜åšä¼˜åŒ–ï¼Œä¸ºä½•ä¸å¯¹ä¸­ç­‰å†…å­˜å’Œå¤§å†…å­˜ä¸€èµ·åšä¼˜åŒ–ï¼Ÿæ˜¯æŠ€æœ¯ä¸Šå®ç°æœ‰å›°éš¾å—ï¼Ÿèƒ½å¦ä»æŠ€æœ¯å®ç°çš„è§’åº¦æ¥èŠèŠï¼Œä¸ºä½•å®ƒåªä¼˜åŒ–äº†å°å†…å­˜çš„åœºæ™¯","like_count":12,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497883,"discussion_content":"å¯¹å°å†…å­˜åšä¼˜åŒ–ï¼Œå…¶å®æ˜¯ä¼šé€ æˆå†…å­˜åˆ©ç”¨ç‡ä¸‹é™çš„ï¼Œç‰¹åˆ«æ˜¯æ¯ä¸ªçº¿ç¨‹ç‹¬ç«‹ç»´æŠ¤å†…å­˜æ± ï¼Œå°±æ‹’ç»çº¿ç¨‹ä¹‹é—´å…±äº«å†…å­˜æ± äº†ã€‚ç”±äºå°å†…å­˜çš„ä½¿ç”¨æœ€ä¸ºé¢‘ç¹ï¼Œæ‰€ä»¥åˆ©ç”¨ç‡çš„ä¸‹é™è¡¨ç°ä¸æ˜æ˜¾ã€‚ä½†å¯¹å¤§å†…å­˜åšä¸Šè¿°ä¼˜åŒ–ï¼Œå°±ä¼šé€ æˆåˆ©ç”¨ç‡ä¸‹é™è¿‡å¤šï¼Œæ€§ä»·æ¯”ä¸åˆ’ç®—ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591837279,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2085553,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/d2/b1/c819fd7d.jpg","nickname":"å‘é£™çš„èœ—ç‰›","note":"","ucode":"C807F5E6A9E46C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371104,"discussion_content":"æˆ‘ä¹Ÿæœ‰ç–‘é—®ï¼Œæ—¢ç„¶æ˜ç¡®äº†å¤§å°ä¸­ï¼Œä¸ºä½•ä¸å¹²è„†å°å†…å­˜åšå°ä¼˜åŒ–ï¼Œå¤§å†…å­˜æŠ„è¢­ptmalloc2ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619656426,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244326,"user_name":"ä¸‡å†åäº”å¹´","can_delete":false,"product_type":"c1","uid":1122150,"ip_address":"","ucode":"3D8CF5DF847AE8","user_header":"https://static001.geekbang.org/account/avatar/00/11/1f/66/59e0647a.jpg","comment_is_top":false,"comment_ctime":1598485140,"is_pvip":false,"replies":[{"id":"90257","content":"å¯¹çš„ï¼Œâ€œåŠ ä¸€å±‚â€ç¼“å­˜ï¼š-ï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1598942977,"ip_address":"","comment_id":244326,"utype":1}],"discussion_count":2,"race_medal":0,"score":"27368288916","product_id":100051201,"comment_content":"è®¡ç®—æœºé¢†åŸŸè§£å†³è¿ç®—é€Ÿåº¦çš„ä¸¤å¤§æ³•å®ï¼š1.åŠ ä¸€å±‚ 2.åŒ–æ•´ä¸ºé›¶ã€‚æ— è®ºæ˜¯cpu å¯„å­˜å™¨ï¼Œ L1&#47;2&#47;3 cacheï¼Œä»¥åŠæœ¬èŠ‚è®²çš„glibc å†…å­˜æ± ï¼Œéƒ½æ˜¯é€šè¿‡â€œåŠ ä¸€å±‚â€çš„æ–¹æ³•ï¼Œé¢„å…ˆå–å¾—å¯èƒ½ç”¨åˆ°çš„èµ„æºï¼Œé€šè¿‡ç©ºé—´çš„ä»£ä»·æ¥æ¢å¾—æ—¶é—´çš„æ•ˆç›Šã€‚","like_count":7,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504552,"discussion_content":"å¯¹çš„ï¼Œâ€œåŠ ä¸€å±‚â€ç¼“å­˜ï¼š-ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598942977,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1538677,"avatar":"https://static001.geekbang.org/account/avatar/00/17/7a/75/69128049.jpg","nickname":"apdoer","note":"","ucode":"B9496BFE0B9F84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378035,"discussion_content":"åŒ–æ•´ä¸ºé›¶æ€ä¹ˆç†è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623028131,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244323,"user_name":"ä¸‡å†åäº”å¹´","can_delete":false,"product_type":"c1","uid":1122150,"ip_address":"","ucode":"3D8CF5DF847AE8","user_header":"https://static001.geekbang.org/account/avatar/00/11/1f/66/59e0647a.jpg","comment_is_top":false,"comment_ctime":1598483862,"is_pvip":false,"replies":[{"id":"90259","content":"è°¢è°¢ä¸‡å†åäº”å¹´åŒå­¦çš„åˆ†äº«ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1598943278,"ip_address":"","comment_id":244323,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27368287638","product_id":100051201,"comment_content":"è§£å†³ptmalloc2å†…å­˜è¿‡å¤§çš„ä¸‰ç§æ–¹æ¡ˆï¼ˆè½¬è‡ªhttp:&#47;&#47;fengfu.ioï¼‰ï¼š<br><br>ç¬¬ä¸€ç§ï¼šæ§åˆ¶åˆ†é…åŒºçš„æ€»æ•°ä¸Šé™ã€‚é»˜è®¤64ä½ç³»ç»Ÿåˆ†é…åŒºæ•°ä¸ºï¼šcpuæ ¸æ•°*8ï¼Œå¦‚å½“å‰ç¯å¢ƒ16æ ¸ç³»ç»Ÿåˆ†é…åŒºæ•°ä¸º128ä¸ªï¼Œæ¯ä¸ª64Mä¸Šé™çš„è¯æœ€å¤šå¯è¾¾8Gï¼Œé™åˆ¶ä¸Šé™åï¼Œåç»­ä¸å¤Ÿçš„ç”³è¯·ä¼šç›´æ¥èµ°mmapåˆ†é…å’Œmunmapå›æ”¶ï¼Œä¸ä¼šè¿›å…¥ptmalloc2çš„bufferæ± ã€‚<br>æ‰€ä»¥ç¬¬ä¸€ç§æ–¹æ¡ˆè°ƒæ•´ä¸€ä¸‹åˆ†é…æ± ä¸Šé™ä¸ªæ•°åˆ°4ï¼š<br>export MALLOC_ARENA_MAX=4<br><br>ç¬¬äºŒç§ï¼šä¹‹å‰è®²åˆ°ptmalloc2é»˜è®¤ä¼šåŠ¨æ€è°ƒæ•´mmapåˆ†é…é˜ˆå€¼ï¼Œå› æ­¤å¯¹äºè¾ƒå¤§çš„å†…å­˜è¯·æ±‚ä¹Ÿä¼šè¿›å…¥ptmalloc2çš„å†…å­˜bufferæ± é‡Œï¼Œè¿™é‡Œå¯ä»¥å»æ‰ptmallocçš„åŠ¨æ€è°ƒæ•´åŠŸèƒ½ã€‚å¯ä»¥è®¾ç½® M_TRIM_THRESHOLDï¼ŒM_MMAP_THRESHOLDï¼ŒM_TOP_PAD å’Œ M_MMAP_MAX ä¸­çš„ä»»æ„ä¸€ä¸ªã€‚è¿™é‡Œå¯ä»¥å›ºå®šåˆ†é…é˜ˆå€¼ä¸º128Kï¼Œè¿™æ ·è¶…è¿‡128Kçš„å†…å­˜åˆ†é…è¯·æ±‚éƒ½ä¸ä¼šè¿›å…¥ptmallocçš„bufferæ± è€Œæ˜¯ç›´æ¥èµ°mmapåˆ†é…å’Œmunmapå›æ”¶ï¼ˆæ€§èƒ½ä¸Šä¼šæœ‰æŸè€—ï¼Œå½“å‰ç¯å¢ƒå¤§æ¦‚10%ï¼‰ã€‚ï¼š<br>export MALLOC_MMAP_THRESHOLD_=131072<br>export MALLOC_TRIM_THRESHOLD_=131072<br>export MALLOC_TOP_PAD_=131072<br>export MALLOC_MMAP_MAX_=65536   <br><br>ç¬¬ä¸‰ç§ï¼šä½¿ç”¨tcmallocæ¥æ›¿ä»£é»˜è®¤çš„ptmalloc2ã€‚googleçš„tcmallocæä¾›æ›´ä¼˜çš„å†…å­˜åˆ†é…æ•ˆç‡ï¼Œæ€§èƒ½æ›´å¥½ï¼ŒThreadCacheä¼šé˜¶æ®µæ€§çš„å›æ”¶å†…å­˜åˆ°CentralCacheé‡Œã€‚ è§£å†³äº†ptmalloc2ä¸­arenaä¹‹é—´ä¸èƒ½è¿ç§»å¯¼è‡´å†…å­˜æµªè´¹çš„é—®é¢˜ã€‚","like_count":6,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504549,"discussion_content":"è°¢è°¢ä¸‡å†åäº”å¹´åŒå­¦çš„åˆ†äº«ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598943278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215366,"user_name":"å”æœé¦–éƒ½","can_delete":false,"product_type":"c1","uid":1081233,"ip_address":"","ucode":"F72655AE0AE4CA","user_header":"https://static001.geekbang.org/account/avatar/00/10/7f/91/962eba1a.jpg","comment_is_top":false,"comment_ctime":1588982682,"is_pvip":true,"replies":[{"id":"79764","content":"1ã€æ˜¯çš„ã€‚<br>2ã€ä¸ä½¿ç”¨å †å¤–å†…å­˜å³å¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1589008547,"ip_address":"","comment_id":215366,"utype":1}],"discussion_count":2,"race_medal":0,"score":"27358786458","product_id":100051201,"comment_content":"ä»Šå¤©è¯¾ç¨‹å­¦ä¹ åˆ°äº†å¾ˆå¤šï¼Œæ„Ÿè§‰ä¸€æ•´ç¯‡ çš„çŸ¥è¯†ç›²ç‚¹ï¼Œå­¦å®Œå¾ˆå—å¯å‘ã€‚å¦å¤–æœ‰ä¸ªé—®é¢˜ï¼šæ–‡ä¸­æåˆ°â€œé¢„åˆ†é…çš„ 6GB çš„ C åº“å†…å­˜æ± å°±ä¸ JVM ä¸­é¢„åˆ†é…çš„ 8G å†…å­˜æ± å åŠ åœ¨ä¸€èµ·ï¼Œé€ æˆäº† Java è¿›ç¨‹çš„å†…å­˜å ç”¨è¶…å‡ºäº†é¢„æœŸã€‚â€ä¸­â€œé¢„åˆ†é…çš„6GBçš„Cåº“å†…å­˜æ± â€ä¸ºå †å¤–å†…å­˜ä¹ˆï¼Ÿå¦‚æœä»£ç ä¸­ä¸é€‚ç”¨å †å¤–å†…å­˜æ˜¯ä¸æ˜¯å°±ä¸ä¼šé¢„åˆ†é…6GBçš„Cåº“å†…å­˜æ± ï¼Œè¿˜æ˜¯è¯´æœ‰é‚£ä¹ˆå¤šçš„çº¿ç¨‹å°±ä¸€å®šä¼šä½¿ç”¨åˆ°6GBçš„Cåº“å†…å­˜æ± ï¼Ÿï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494404,"discussion_content":"1ã€æ˜¯çš„ã€‚\n2ã€ä¸ä½¿ç”¨å †å¤–å†…å­˜å³å¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589008547,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1623409,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c5/71/f7c43b49.jpg","nickname":"é£å‘åŒ—å¹","note":"","ucode":"2FD0BC5159E1C1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":404181,"discussion_content":"JVMé¢„åˆ†é…çš„8Gå†…å­˜ä¹Ÿæ˜¯ä»Cåº“å†…å­˜æ± åˆ†é…ï¼Œä¹Ÿå°±æ˜¯Cåº“å†…å­˜æ± æ€»å…±åˆ†é…äº†14G","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634255181,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214523,"user_name":"eason2017","can_delete":false,"product_type":"c1","uid":1009422,"ip_address":"","ucode":"E070BA624FA490","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/0e/c77ad9b1.jpg","comment_is_top":false,"comment_ctime":1588761387,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27358565163","product_id":100051201,"comment_content":"ç¢°å·§ä»Šå¤©çœ‹ä¸€ä¸ªCMS GCçš„é—®é¢˜ï¼Œå°±ç‚¹å‡»åˆ°äº†ä¸€ä¸ªä½œè€…çš„ç½‘ç«™ï¼Œå…¶ä¸­ä¸€ç¯‡ä¹Ÿæ˜¯åˆ†æå †å¤–å†…å­˜çš„æ–‡ç« ï¼Œæ›´å…·ä½“çš„è§£é‡Šäº†å¦‚ä½•æ›¿æ¢ptåˆ°tc ,åœ°å€å¦‚ä¸‹ï¼š<br>http:&#47;&#47;fengfu.io&#47;2019&#47;01&#47;22&#47;%E8%BD%AC-Java%E5%A0%86%E5%A4%96%E5%86%85%E5%AD%98%E5%A2%9E%E9%95%BF%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5Case&#47;<br>åªæ˜¯åˆ†äº«å“ˆï¼Œå’Œä½œè€…æ— ä»»ä½•å…³ç³»~~","like_count":6},{"had_liked":false,"id":212124,"user_name":"å¥¥ç‰¹æ›¼","can_delete":false,"product_type":"c1","uid":1766145,"ip_address":"","ucode":"76BAC701319542","user_header":"https://static001.geekbang.org/account/avatar/00/1a/f3/01/5a1416bc.jpg","comment_is_top":false,"comment_ctime":1588063574,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23062900054","product_id":100051201,"comment_content":" è€å¸ˆå¥½ï¼Œæˆ‘æœ‰3ä¸ªé—®é¢˜ï¼š<br>------------------é—®é¢˜1--------------------<br>è®²ä¹‰é‡Œé¢æåˆ°64ä½çš„ç¯å¢ƒä¸‹ï¼Œä¸€ä¸ªå­çº¿ç¨‹åˆ›å»ºä¼šæœ‰64Mçš„å†…å­˜ç”³è¯·ï¼Œæˆ‘æœ€å¼€å§‹ç†è§£çš„è¿™64Mæ˜¯è¿™ä¸ªå­çº¿ç¨‹ç‹¬æœ‰çš„ã€‚<br>åœ¨åé¢åˆæåˆ°â€œPtmalloc2 å‡å®šï¼Œå¦‚æœçº¿ç¨‹ A ç”³è¯·å¹¶é‡Šæ”¾äº†çš„å†…å­˜ï¼Œçº¿ç¨‹ B å¯èƒ½ä¹Ÿä¼šç”³è¯·ç±»ä¼¼çš„å†…å­˜ï¼Œæ‰€ä»¥å®ƒå…è®¸å†…å­˜æ± åœ¨çº¿ç¨‹é—´å¤ç”¨ä»¥æå‡æ€§èƒ½ã€‚â€ï¼Œé‚£æ˜¯ä¸æ˜¯ç†è§£æˆæ¯ä¸ªå­çº¿ç¨‹åœ¨åˆ›å»ºçš„æ—¶å€™ä¼šæœ‰å¯¹åº”64Mçš„å†…å­˜ç”³è¯·ç»™å®ƒï¼Œä½†æ˜¯è¿™64Mçš„å†…å­˜æ˜¯æ‰€æœ‰å­çº¿ç¨‹ä¹‹é—´å…±äº«ä½¿ç”¨çš„ï¼Ÿ<br><br>------------------é—®é¢˜2--------------------<br>å…³äºå †å¤–å†…å­˜ï¼šè€å¸ˆè¿™é‡Œè¯´åˆ°çš„å †å¤–å†…å­˜ä¸å•å•æ˜¯ç›¸å¯¹JVMæ¥è¯´çš„å§ï¼Ÿè¿™é‡ŒæŒ‡çš„å †å¤–å†…å­˜å†å…·ä½“ä¸€ç‚¹ï¼Œæ˜¯æŒ‡ä½¿ç”¨äº†Ptmalloc2ï¼Œåœ¨åˆ›å»ºè¿›ç¨‹&#47;çº¿ç¨‹æ—¶é»˜è®¤çš„åˆ†äº«çš„å†…å­˜å—ï¼Ÿ<br><br>------------------é—®é¢˜3--------------------<br>è®²ä¹‰é‡Œé¢æåˆ°å †å¤–å†…å­˜â€œæ›´ç¨³å®šã€æŒä¹…ï¼Œå¤„ç† IO çš„é€Ÿåº¦ä¹Ÿæ›´å¿«â€ã€‚èƒ½ç†è§£æ›´ç¨³å®šã€æŒä¹…ï¼Œæ˜¯å› ä¸ºå †å¤–å†…å­˜æ˜¯ç”±Ptmalloc2å»ç»´æŠ¤ï¼ŒåŸºæœ¬å’Œè¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸä¸€æ ·ã€‚ä½†æ˜¯æ²¡ç†è§£ä¸ºä»€ä¹ˆå †å¤–å†…å­˜åœ¨å¤„ç†IOä¸Šçš„é€Ÿåº¦ä¼šæ›´å¿«ï¼Ÿè¿™é‡Œé¢çš„IOæ˜¯æŒ‡å…·ä½“çš„ç£ç›˜IOï¼Ÿè¿˜æ˜¯ç½‘ç»œIOï¼Ÿ<br><br>------------------é—®é¢˜4--------------------<br>è€å¸ˆæåˆ°è¿‡ï¼Œè¿›ç¨‹é‡Œé¢çš„çº¿ç¨‹æ•°è¦å’ŒCPUçš„æ ¸æ•°å¯¹åº”ä¸Šï¼Œä¸çŸ¥é“è€å¸ˆè¿™é‡Œè¯´çš„CPUæ ¸æ•°æ˜¯ç‰©ç†æ ¸ï¼Œè¿˜æ˜¯é€»è¾‘æ ¸ï¼Ÿ<br><br><br>åˆ†äº«ä¸€ä¸‹å­¦ä¹ åˆ°çš„å†…å®¹ï¼š<br>1ã€ä¹‹å‰åªæ˜¯çŸ¥é“åˆ›å»º&#47;é”€æ¯çº¿ç¨‹ï¼Œä¼šé€ æˆèµ„æºçš„æµªè´¹ã€‚è€Œå…·ä½“é€ æˆäº†é‚£äº›èµ„æºçš„æµªè´¹å…¶å®æ˜¯æ²¡æœ‰æ·±ç©¶çš„ã€‚å…¶å®ä¸­å¾ˆå¤§ä¸€éƒ¨åˆ†èµ„æºï¼Œåº”è¯¥å°±æ˜¯è€å¸ˆæåˆ°çš„æ¯ä¸ªçº¿ç¨‹é»˜è®¤çš„Cåº“å†…å­˜æ± ã€‚<br>2ã€å †å†…å­˜æ¯”æ ˆå†…å­˜æ›´å¿«ï¼Œå…¶å®æ˜¯å¿«åœ¨ç®¡ç†ï¼Œè€Œä¸æ˜¯å¿«åœ¨ä½¿ç”¨ã€‚malloc&#47;newæ—¶ä¼šæœ‰å…±äº«çš„Cåº“å†…å­˜æ± å†…åŠ é”ç”³è¯·ï¼Œè€Œé‡Šæ”¾çš„æ—¶å€™ï¼Œä¹Ÿä¼šåŠ é”é‡Šæ”¾ï¼Œå¹¶ä¼´éšç€å†…å­˜ç¢ç‰‡çš„æ•´ç†","like_count":5},{"had_liked":false,"id":213432,"user_name":"ç‹¬å­¤é­‚","can_delete":false,"product_type":"c1","uid":1495951,"ip_address":"","ucode":"8EED2E8C474575","user_header":"https://static001.geekbang.org/account/avatar/00/16/d3/8f/c429c837.jpg","comment_is_top":false,"comment_ctime":1588412306,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18768281490","product_id":100051201,"comment_content":"1ã€â€œæ¯ä¸ªå­çº¿ç¨‹é¢„åˆ†é…çš„å†…å­˜æ˜¯ 64MBâ€ è¿™ä¸ªè®©æˆ‘æœ‰ç‚¹å´©æºƒå•Šï¼Œ<br>2ã€ä¹Ÿæœ‰äº›æ–‡ç« ä¹Ÿè¯´â€œèŠ‚çº¦çº¿ç¨‹ï¼Œå› ä¸ºå¯åŠ¨ä¸€ä¸ªæ¶ˆè€—2MBå†…å­˜â€œã€‚  <br>3ã€ä½†æ˜¯äº²æµ‹å¯åŠ¨200ä¸ªçº¿ç¨‹ï¼Œå®é™…å†…å­˜RESæ²¡æœ‰å¤šå¤§å˜åŒ–ï¼ŒVIRT ä¹Ÿåªå¢é•¿äº†1.4Gï¼Œå¹¶æ²¡æœ‰12Gå•Šï¼Ÿ æ±‚è§£","like_count":4,"discussions":[{"author":{"id":1112955,"avatar":"https://static001.geekbang.org/account/avatar/00/10/fb/7b/2d4b38fb.jpg","nickname":"Jialin","note":"","ucode":"12583269732A75","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":345174,"discussion_content":"è€å¸ˆåœ¨æ–‡ç« ä¸­è¯´äº†ï¼Œå†…å­˜æ± çš„areaæ•°å’ŒCPUæ ¸æ•°ç›¸å…³ï¼Œæ¯”å¦‚è¯´64ä½æœºå™¨ä¸Šï¼Œareaæ•°=8*CPUæ ¸æ•°ã€‚æ‰€ä»¥å¯ä»¥åˆ†é…çš„è™šæ‹Ÿå†…å­˜å¤§å°ä¸º64MB*areaæ•°ï¼Œå¹¶ä¸ä¼šéšç€çº¿ç¨‹æ•°å¢åŠ è€Œæ— é™å¢åŠ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611675695,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":211859,"user_name":"ç å†œæ¡ƒèŠ±æº","can_delete":false,"product_type":"c1","uid":1070008,"ip_address":"","ucode":"55455290871D54","user_header":"https://static001.geekbang.org/account/avatar/00/10/53/b8/63ffa8f4.jpg","comment_is_top":false,"comment_ctime":1588032233,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18767901417","product_id":100051201,"comment_content":"TCMalloc å¯¹ä¸­ç­‰å†…å­˜ã€å¤§å†…å­˜çš„åˆ†é…é€Ÿåº¦å¾ˆæ…¢ï¼Œæ¯”å¦‚æˆ‘ä»¬ç”¨å•çº¿ç¨‹åˆ†é… 2M çš„å†…å­˜ï¼ŒPtmalloc2 è€—æ—¶ä»ç„¶ç¨³å®šåœ¨ 32 çº³ç§’ï¼Œä½† TCMalloc å·²ç»ä¸Šå‡åˆ° 86 çº³ç§’ï¼Œå¢é•¿äº† 7 å€ä»¥ä¸Šã€‚<br><br>è€å¸ˆä½ å¥½ï¼Œè¿™å—èƒ½å±•å¼€è¯´ä¸€ä¸‹å—ï¼Ÿå¯¹ä¸­ç­‰å†…å­˜ã€å¤§å†…å­˜ï¼Œä¸ºä»€ä¹ˆ TCMalloc æ…¢ï¼Œè€Œ Ptmalloc2 å¿«å‘¢ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1009422,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/0e/c77ad9b1.jpg","nickname":"eason2017","note":"","ucode":"E070BA624FA490","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":260930,"discussion_content":"å¯èƒ½éœ€è¦çœ‹æºç äº†ï¼Œç°åœ¨å¯¹C/C++çš„ä»£ç è¿˜æ˜¯æ¯”è¾ƒè§¦ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588914072,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":213481,"user_name":"Ken","can_delete":false,"product_type":"c1","uid":1120761,"ip_address":"","ucode":"9F829156E855C8","user_header":"https://static001.geekbang.org/account/avatar/00/11/19/f9/62ae32d7.jpg","comment_is_top":false,"comment_ctime":1588429675,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14473331563","product_id":100051201,"comment_content":"å†…å­˜æ± å¯ä»¥ä½¿ç”¨äº«å…ƒæ¨¡å¼åŠ é€Ÿå¯¹è±¡çš„åˆå§‹åŒ–é€Ÿåº¦","like_count":3},{"had_liked":false,"id":228994,"user_name":"Geek3340","can_delete":false,"product_type":"c1","uid":2028953,"ip_address":"","ucode":"C64D302CD53513","user_header":"","comment_is_top":false,"comment_ctime":1592876797,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10182811389","product_id":100051201,"comment_content":"æœ‰Javaå®ä¾‹å—ï¼ŸJavaåœ¨å“ªäº›åœºæ™¯ä¸‹ï¼Œä¼šè§¦å‘ptmallocè¿›è¡Œåˆ†é…ï¼Œç„¶åä¸é‡Šæ”¾å‘¢ï¼Ÿ","like_count":2},{"had_liked":false,"id":222425,"user_name":"æå¿—å","can_delete":false,"product_type":"c1","uid":2003154,"ip_address":"","ucode":"FE6D9D4D1900DE","user_header":"","comment_is_top":false,"comment_ctime":1590804408,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10180739000","product_id":100051201,"comment_content":"å…³äº&quot;æ¯ä¸ªå­çº¿ç¨‹é¢„åˆ†é…çš„å†…å­˜æ˜¯ 64MBï¼ˆPtmalloc2 ä¸­è¢«ç§°ä¸º Thread Arenaï¼Œ32 ä½ç³»ç»Ÿä¸‹ä¸º 1MBï¼Œ64 ä½ç³»ç»Ÿä¸‹ä¸º 64MBï¼‰&quot;, <br>å‡è®¾è¯­è¨€æ˜¯java,  <br>è¿™é‡Œé¢„åˆ†é…çš„å†…å­˜æ˜¯javaå †å†…å­˜, javaæ ˆå†…å­˜(è¿™å¯ä»¥é€šè¿‡-xssé™åˆ¶çš„), è¿˜æ˜¯Cåº“å†…å­˜, æ“ä½œç³»ç»Ÿå†…å­˜? ","like_count":2},{"had_liked":false,"id":236395,"user_name":"Run","can_delete":false,"product_type":"c1","uid":1371941,"ip_address":"","ucode":"6738D2F36ACFF6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLMDBq7lqg9ZasC4f21R0axKJRVCBImPKlQF8yOicLLXIsNgsZxsVyN1mbvFOL6eVPluTNgJofwZeA/132","comment_is_top":false,"comment_ctime":1595406347,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5890373643","product_id":100051201,"comment_content":"ä¸æ„§æ˜¯æœ‰å¤šé—¨è¯¾çš„äºº","like_count":1},{"had_liked":false,"id":235762,"user_name":"ä¸€å‡¡","can_delete":false,"product_type":"c1","uid":1897395,"ip_address":"","ucode":"5E9BE33452AF3B","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f3/b3/0ba7a760.jpg","comment_is_top":false,"comment_ctime":1595174886,"is_pvip":false,"replies":[{"id":"88396","content":"é¦–æ¬¡ç”³è¯·å†…å­˜æ—¶åˆ†é…çš„","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1596503043,"ip_address":"","comment_id":235762,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5890142182","product_id":100051201,"comment_content":"æ¯ä¸ªå­çº¿ç¨‹é¢„åˆ†é…çš„å†…å­˜æ˜¯ 64MB<br>é¢„åˆ†é…ä»€ä¹ˆæ„æ€ï¼Œå°±æ˜¯çº¿ç¨‹ç”Ÿæˆæ—¶å€™å°±åˆ†é…çš„ä¹ˆï¼Ÿ<br>","like_count":1,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501825,"discussion_content":"é¦–æ¬¡ç”³è¯·å†…å­˜æ—¶åˆ†é…çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596503043,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219635,"user_name":"Wienbc","can_delete":false,"product_type":"c1","uid":1273712,"ip_address":"","ucode":"BF4E736B3551F3","user_header":"https://static001.geekbang.org/account/avatar/00/13/6f/70/db94799a.jpg","comment_is_top":false,"comment_ctime":1590053923,"is_pvip":false,"replies":[{"id":"81150","content":"ä½ å¥½Wienblï¼Œä¸¤ä¸ªåŸå› ï¼Œ1ã€æœ¬è´¨ä¸Šå°±æ˜¯è·¯ç¨‹è¶ŠçŸ­ï¼Œé€Ÿåº¦è¶Šå¿«ã€‚æ¯”å¦‚A-&gt;B-&gt;Cï¼Œè‚¯å®šæ²¡æœ‰A-&gt;Cå—ã€‚è€ŒBå°±æ˜¯JVMçš„å†…å­˜ï¼Œä½¿ç”¨å®ƒå¤„ç†IOä¼šå¤šå‡ºä¸€æ¬¡æ‹·è´ã€‚2ã€JVMå†…å­˜è¦GCï¼Œç®¡ç†æˆæœ¬è¦æ¯”å †å¤–å†…å­˜é«˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1590103399,"ip_address":"","comment_id":219635,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5885021219","product_id":100051201,"comment_content":"è€å¸ˆå¥½ï¼Œè®¤çœŸçœ‹å®Œåˆæ¶¨å§¿åŠ¿äº†ï¼Œæœ‰ä¸ªé—®é¢˜ä¸å¤ªæ˜ç™½æ±‚è§£ï¼šä¸ºä»€ä¹ˆä¸å—JVMç®¡ç†çš„å †å¤–å†…å­˜çš„IOé€Ÿåº¦æ›´å¿«å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495883,"discussion_content":"ä½ å¥½Wienblï¼Œä¸¤ä¸ªåŸå› ï¼Œ1ã€æœ¬è´¨ä¸Šå°±æ˜¯è·¯ç¨‹è¶ŠçŸ­ï¼Œé€Ÿåº¦è¶Šå¿«ã€‚æ¯”å¦‚A-&amp;gt;B-&amp;gt;Cï¼Œè‚¯å®šæ²¡æœ‰A-&amp;gt;Cå—ã€‚è€ŒBå°±æ˜¯JVMçš„å†…å­˜ï¼Œä½¿ç”¨å®ƒå¤„ç†IOä¼šå¤šå‡ºä¸€æ¬¡æ‹·è´ã€‚2ã€JVMå†…å­˜è¦GCï¼Œç®¡ç†æˆæœ¬è¦æ¯”å †å¤–å†…å­˜é«˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590103399,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1273712,"avatar":"https://static001.geekbang.org/account/avatar/00/13/6f/70/db94799a.jpg","nickname":"Wienbc","note":"","ucode":"BF4E736B3551F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":271325,"discussion_content":"è°¢è°¢è€å¸ˆï¼Œæ˜ç™½äº†o(*ï¿£â–½ï¿£*)ãƒ–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590116701,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":213521,"user_name":"å­ä¸è¯­","can_delete":false,"product_type":"c1","uid":1123186,"ip_address":"","ucode":"907AB44706467B","user_header":"https://static001.geekbang.org/account/avatar/00/11/23/72/70190bc1.jpg","comment_is_top":false,"comment_ctime":1588447863,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5883415159","product_id":100051201,"comment_content":"è€å¸ˆå¥½ï¼Œåœ¨jvmé‡Œé¢æœ‰ä¸ªé™åˆ¶çº¿ç¨‹æ ˆå¤§å°çš„ï¼Œ-XX:ThreadStackSizeã€‚æ‚¨æ–‡ä¸­è®²çš„æ¯ä¸ªå­çº¿ç¨‹é¢„åˆ†é…çš„å†…å­˜æ˜¯ 64MBï¼ˆPtmalloc2 ä¸­è¢«ç§°ä¸º Thread Arenaï¼Œ32 ä½ç³»ç»Ÿä¸‹ä¸º 1MBï¼Œ64 ä½ç³»ç»Ÿä¸‹ä¸º 64MBï¼‰ï¼Œå¦‚æœjavaå¯åŠ¨å‚æ•°è®¾ç½®äº†é™åˆ¶çº¿ç¨‹æ ˆå¤§å°ï¼Œcåº“è¿˜ä¼šç»™æ¯ä¸ªå­çº¿ç¨‹åˆ†é…64må†…å­˜å—ã€‚","like_count":1,"discussions":[{"author":{"id":1140792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/68/38/62dad61c.jpg","nickname":"çƒŸé›¨ç™»","note":"","ucode":"8F5E1AEE46273C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":321868,"discussion_content":"ç†è§£ä¸‹æ¥åº”è¯¥æ˜¯ä¸ä¼šçš„ï¼Œcå†…å­˜æ± åº”è¯¥æ˜¯åœ¨ä½¿ç”¨å †å¤–å†…å­˜æ—¶æ‰æœ‰ç”¨ï¼›-XX:ThreadStackSize æ˜¯é…ç½®çº¿ç¨‹æ ˆçš„å¤§å°ï¼Œé»˜è®¤1Mï¼Œä¸€èˆ¬ä½¿ç”¨ä¸äº†è¿™ä¹ˆå¤šï¼Œå»ºè®®è°ƒå°ç‚¹256Kå·®ä¸å¤šäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604642951,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1123043,"avatar":"https://static001.geekbang.org/account/avatar/00/11/22/e3/510b69f9.jpg","nickname":"benny","note":"","ucode":"E2F30AF0C808D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282908,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592115951,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":212606,"user_name":"Geek_f9c246","can_delete":false,"product_type":"c1","uid":1951950,"ip_address":"","ucode":"822D9547A6AC2D","user_header":"","comment_is_top":false,"comment_ctime":1588162421,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5883129717","product_id":100051201,"comment_content":"å¯¹è±¡åˆå§‹åŒ–å…¶å®åœ¨ç¨‹åºä¸­æ˜¯å¾ˆå¸¸è§çš„æ“ä½œï¼Œå¦‚æœæ²¡æœ‰å†…å­˜æ± ï¼Œé‚£ä¹ˆæ•´ä¸ªä»£ç è¿è¡Œæ•ˆç‡ä¼šå¾ˆä½ã€‚æ­£å› ä¸ºè¿™æ ·jvmæ‰ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬ç®¡ç†å†…å­˜æ± ï¼Œæ—¢è§£å†³ç”³è¯·å†…å­˜æ•ˆç‡é—®é¢˜ï¼Œä¹Ÿè§£å†³å†…å­˜ç”³è¯·é‡Šæ”¾ç®¡ç†é—®é¢˜","like_count":1},{"had_liked":false,"id":212078,"user_name":"weing","can_delete":false,"product_type":"c1","uid":1984655,"ip_address":"","ucode":"95701BDA31F6F6","user_header":"","comment_is_top":false,"comment_ctime":1588058039,"is_pvip":false,"replies":[{"id":"78847","content":"ä¸å¥½æ„æ€ï¼Œå› ä¸ºæœ€åˆæˆ‘ç”¨8MBæµ‹è¯•ï¼Œåé¢æ”¹å›1MBï¼Œä½†å¿˜äº†æ”¹printfæç¤ºè¯­å¥äº†ã€‚æˆ‘ç°åœ¨å·²ç»æŠŠå®ƒæ›´æ–°è¿‡æ¥äº†","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1588062847,"ip_address":"","comment_id":212078,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5883025335","product_id":100051201,"comment_content":"alloc_address.cpp ä»£ç ä¸­ï¼Œåˆ†é…çš„æ˜¯1MBï¼Œè¿˜æ˜¯8MBï¼Ÿ æ„Ÿè§‰åº”è¯¥æ˜¯1MBæ‰å¯¹å‘¢<br>\tprintf(&quot;æ¥ä¸‹æ¥åˆ†é…8MBå†…å­˜\\n&quot;);<br>\tgetchar();<br>\taddr = (char*) malloc(1*1024*1024);<br>\tprintf(&quot;åˆ†é…äº†8MBå†…å­˜\\n&quot;);","like_count":1,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493426,"discussion_content":"ä¸å¥½æ„æ€ï¼Œå› ä¸ºæœ€åˆæˆ‘ç”¨8MBæµ‹è¯•ï¼Œåé¢æ”¹å›1MBï¼Œä½†å¿˜äº†æ”¹printfæç¤ºè¯­å¥äº†ã€‚æˆ‘ç°åœ¨å·²ç»æŠŠå®ƒæ›´æ–°è¿‡æ¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588062847,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":211751,"user_name":"kofssl","can_delete":false,"product_type":"c1","uid":1475919,"ip_address":"","ucode":"714FEE8F8DA172","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLCrSITpN0Dzic0Ao4rYjV8ULicYWCo8I6ROnwt6bk0VibX8ibJicnUo1JkYRPPlpVc1uqf7XaXicDwqpUPw/132","comment_is_top":false,"comment_ctime":1588001094,"is_pvip":false,"replies":[{"id":"78707","content":"å‘µå‘µï¼Œè°¢è°¢kofsslçš„å¤¸å¥–ã€‚åœ¨ä½ æ„å»ºå‡ºåˆ†å¸ƒå¼ç³»ç»Ÿçš„å®Œæ•´æ‰§è¡Œè·¯å¾„åï¼Œç›¸ä¿¡é¢ä¸´å…¶ä»–ç–‘éš¾æ‚ç—‡æ—¶éƒ½ä¼šæœ‰æ˜ç¡®çš„æ–¹å‘ï¼Œå¯ä»¥googleä¸Šè‡ªè¡Œæ‰¾ç­”æ¡ˆï¼","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1588037049,"ip_address":"","comment_id":211751,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5882968390","product_id":100051201,"comment_content":"ç¡®å®å†™çš„å¾ˆæ¸…æ™°ï¼Œå‰é¢å¤„ç†ä¸‰æ–¹ç»„ä»¶å†…å­˜é—®é¢˜æ—¶ï¼Œå¼€å§‹ä»¥ä¸ºå†…å­˜æ³„æ¼äº†ï¼Œå ç”¨å†…å­˜ä¸€ç‚¹ä¸€ç‚¹ä¸Šå»ï¼Œå°±ä¸é‡Šæ”¾ï¼Œåæ¥æŸ¥ä»£ç ä¹Ÿéƒ½æ²¡æœ‰æ˜æ˜¾çš„é”™è¯¯ï¼Œæœ€åæ˜¯é€šè¿‡åŒäº‹æåˆ°çš„å†…å­˜ç¢ç‰‡è§£å†³çš„ï¼Œå°±ç”¨åˆ°äº†jemallocçš„æ›¿æ¢æ–¹å¼ï¼ŒåŒäº‹æ˜¯é«˜æ‰‹ï¼Œä½ ä¹Ÿæ˜¯ï¼Œå“ˆå“ˆ","like_count":1,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493354,"discussion_content":"å‘µå‘µï¼Œè°¢è°¢kofsslçš„å¤¸å¥–ã€‚åœ¨ä½ æ„å»ºå‡ºåˆ†å¸ƒå¼ç³»ç»Ÿçš„å®Œæ•´æ‰§è¡Œè·¯å¾„åï¼Œç›¸ä¿¡é¢ä¸´å…¶ä»–ç–‘éš¾æ‚ç—‡æ—¶éƒ½ä¼šæœ‰æ˜ç¡®çš„æ–¹å‘ï¼Œå¯ä»¥googleä¸Šè‡ªè¡Œæ‰¾ç­”æ¡ˆï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588037049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353542,"user_name":"hillcat","can_delete":false,"product_type":"c1","uid":1633032,"ip_address":"å¾·å›½","ucode":"A4BA5255C53DD6","user_header":"https://static001.geekbang.org/account/avatar/00/18/eb/08/68386ded.jpg","comment_is_top":false,"comment_ctime":1659530199,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1659530199","product_id":100051201,"comment_content":"è¿™ä¸€ç« è®²çš„éå¸¸é€å•Šã€‚ç”±æ­¤æˆ‘æƒ³ä»¥PostgreSQLçš„IOæ“ä½œï¼Œä¸æ˜ç™½ä¸ºä½•PGåˆ°ç°åœ¨ä»ç„¶ä¸æ”¯æŒDirectIO. å¯¼è‡´å®ƒç°åœ¨ä»ç„¶åœ¨ç”¨BufferCache(åº”ç”¨çš„cache)å’Œpagecache, åŒç¼“å­˜ï¼Œç›¸å½“äºæ˜¯ã€‚è¿™å¯¹äºå†…å­˜çš„åˆ©ç”¨æ¥è®²ï¼Œå¹¶ä¸å ä¼˜åŠ¿ã€‚<br>ä¹Ÿè®¸å°†æ¥çš„ç‰ˆæœ¬å®ç°å¯ä»¥å°†DirectIOåšä¸ºå¯é€‰é¡¹ã€‚<br>","like_count":0},{"had_liked":false,"id":339995,"user_name":"äº‘æµ·","can_delete":false,"product_type":"c1","uid":1365206,"ip_address":"","ucode":"0C6CA0BE58EA21","user_header":"https://static001.geekbang.org/account/avatar/00/14/d4/d6/1d4543ac.jpg","comment_is_top":false,"comment_ctime":1648530160,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1648530160","product_id":100051201,"comment_content":"å¯ä»¥ç»™é£è¡Œä¸­çš„é£æœºæ¢å‘åŠ¨æœºå—ï¼Ÿ ç”Ÿäº§ç¯å¢ƒ ä¸åœæœºæ›´æ¢ å†…å­˜åˆ†é…æ–¹å¼ã€‚","like_count":0},{"had_liked":false,"id":303564,"user_name":"OM","can_delete":false,"product_type":"c1","uid":1302746,"ip_address":"","ucode":"E33C66A70802A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoWfXendN7czHpsyaWKLPK6Na9P5czquJ7Wdre4TibZQ5SQib88edyuib3LpCVFkp0gII2wyvvR8tEIA/132","comment_is_top":false,"comment_ctime":1626856588,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626856588","product_id":100051201,"comment_content":"é™¶è€å¸ˆå¦‚æœç”¨Javaå¼€å‘ç¨‹åºé‚£ä¹ˆé‡Œé¢ä½¿ç”¨å †æˆ–æ ˆä½¿ç”¨é¢‘ç‡ä¸å¥½ç¡®å®šçš„å§ï¼Œé‚£æ€ä¹ˆè®©å †é‡Œé¢çš„åˆ°æ ˆä¸­ï¼Ÿ","like_count":0},{"had_liked":false,"id":290503,"user_name":"Bravery168","can_delete":false,"product_type":"c1","uid":1232973,"ip_address":"","ucode":"DB08AEFBD6DF2B","user_header":"https://static001.geekbang.org/account/avatar/00/12/d0/4d/2116c1a4.jpg","comment_is_top":false,"comment_ctime":1619593486,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1619593486","product_id":100051201,"comment_content":"èµ,æœ‰æ·±åº¦ã€‚TCMalloc å’Œ Ptmalloc2åœ¨åˆ†é…å¤§å†…å­˜ä¸Šçš„æ€§èƒ½å·®å¼‚ï¼ŒåŸå› èƒ½å†æ·±å…¥å‰–æä¸€ä¸‹å°±æ›´å¥½äº†ã€‚","like_count":0},{"had_liked":false,"id":259155,"user_name":"çƒŸé›¨ç™»","can_delete":false,"product_type":"c1","uid":1140792,"ip_address":"","ucode":"8F5E1AEE46273C","user_header":"https://static001.geekbang.org/account/avatar/00/11/68/38/62dad61c.jpg","comment_is_top":false,"comment_ctime":1604642082,"is_pvip":false,"replies":[{"id":"94436","content":"ä¸åŒçš„åº”ç”¨å†…å­˜æ± ç­–ç•¥æ˜¯ä¸åŒçš„ã€‚æ¯”å¦‚JVMå¹¶ä¸æ˜¯é€æ˜çš„å†…å­˜æ± ï¼Œå®ƒä¸¥æ ¼å®šä¹‰äº†å †å†…å­˜å¤§å°ã€‚å¦‚æœå†…å­˜æ± åªæ˜¯ç”¨äºåŠ å¿«åˆ†é… é€Ÿåº¦ï¼Œåˆ™ä¼šç»§ç»­å‘ä¸‹ç”³è¯·å†…å­˜ï¼Œæœ€ç»ˆå¦‚æœå†…æ ¸æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œæ‰ä¼šæŠ¥OOMé”™è¯¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1604908627,"ip_address":"","comment_id":259155,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1604642082","product_id":100051201,"comment_content":"â€œå½“ä»£ç ç”³è¯·å†…å­˜æ—¶ï¼Œé¦–å…ˆä¼šåˆ°è¾¾åº”ç”¨å±‚å†…å­˜æ± ï¼Œå¦‚æœåº”ç”¨å±‚å†…å­˜æ± æœ‰è¶³å¤Ÿçš„å¯ç”¨å†…å­˜ï¼Œå°±ä¼šç›´æ¥è¿”å›ç»™ä¸šåŠ¡ä»£ç ï¼Œå¦åˆ™ï¼Œå®ƒä¼šå‘æ›´åº•å±‚çš„ C åº“å†…å­˜æ± ç”³è¯·å†…å­˜â€œ<br>å¦‚æœåº”ç”¨æ²¡æœ‰è¶³å¤Ÿçš„å¯ç”¨å†…å­˜ï¼Œè¿™æ—¶å€™ä¸åº”è¯¥ç›´æ¥æº¢å‡ºäº†å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508863,"discussion_content":"ä¸åŒçš„åº”ç”¨å†…å­˜æ± ç­–ç•¥æ˜¯ä¸åŒçš„ã€‚æ¯”å¦‚JVMå¹¶ä¸æ˜¯é€æ˜çš„å†…å­˜æ± ï¼Œå®ƒä¸¥æ ¼å®šä¹‰äº†å †å†…å­˜å¤§å°ã€‚å¦‚æœå†…å­˜æ± åªæ˜¯ç”¨äºåŠ å¿«åˆ†é… é€Ÿåº¦ï¼Œåˆ™ä¼šç»§ç»­å‘ä¸‹ç”³è¯·å†…å­˜ï¼Œæœ€ç»ˆå¦‚æœå†…æ ¸æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œæ‰ä¼šæŠ¥OOMé”™è¯¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604908627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":259103,"user_name":"çƒŸé›¨ç™»","can_delete":false,"product_type":"c1","uid":1140792,"ip_address":"","ucode":"8F5E1AEE46273C","user_header":"https://static001.geekbang.org/account/avatar/00/11/68/38/62dad61c.jpg","comment_is_top":false,"comment_ctime":1604631261,"is_pvip":false,"replies":[{"id":"94437","content":"å¯¹javaæ¥è¯´æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1604908761,"ip_address":"","comment_id":259103,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1604631261","product_id":100051201,"comment_content":"â€œè¿›ç¨‹ç”³è¯·å†…å­˜çš„é€Ÿåº¦ï¼Œä»¥åŠæ€»å†…å­˜ç©ºé—´éƒ½å—åˆ°å†…å­˜æ± çš„å½±å“ã€‚çŸ¥é“è¿™äº›éšè—å†…å­˜æ± çš„å­˜åœ¨ï¼Œæ˜¯æå‡åˆ†é…å†…å­˜æ•ˆç‡çš„å‰æâ€œ<br>è€å¸ˆå¥½ï¼Œè¿™é‡Œçš„å†…å­˜ï¼Œåœ¨javaåº”ç”¨ä¸­ç‰¹æŒ‡çš„æ˜¯å †å¤–å†…å­˜å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508847,"discussion_content":"å¯¹javaæ¥è¯´æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604908761,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":259091,"user_name":"çƒŸé›¨ç™»","can_delete":false,"product_type":"c1","uid":1140792,"ip_address":"","ucode":"8F5E1AEE46273C","user_header":"https://static001.geekbang.org/account/avatar/00/11/68/38/62dad61c.jpg","comment_is_top":false,"comment_ctime":1604629152,"is_pvip":false,"replies":[{"id":"94438","content":"è°¢è°¢çƒŸé›¨ç™»çš„åˆ†äº«","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1604908779,"ip_address":"","comment_id":259091,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1604629152","product_id":100051201,"comment_content":"http:&#47;&#47;goog-perftools.sourceforge.net&#47;doc&#47;tcmalloc.htmlï¼Œæœ‰è¯¦ç»†çš„æ€§èƒ½å¯¹æ¯”æµ‹è¯•","like_count":0,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508846,"discussion_content":"è°¢è°¢çƒŸé›¨ç™»çš„åˆ†äº«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604908779,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244350,"user_name":"çŸ¥è¡Œåˆä¸€","can_delete":false,"product_type":"c1","uid":1090784,"ip_address":"","ucode":"563C4A71D80DA1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJwQvLGE4dMsF4JU0svW3DtGbodpjskbY65FdwF13JdtBYZfgL2IXHlHrdejWzHdjT0RibEIfib4QYA/132","comment_is_top":false,"comment_ctime":1598490598,"is_pvip":false,"replies":[{"id":"90256","content":"GoLangå°±åœ¨ä½¿ç”¨TCMallocï¼Œè®¸å¤šå¤§å‚çš„äº‘ç«¯æœåŠ¡ä¹Ÿåœ¨ä½¿ç”¨å®ƒ","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1598942930,"ip_address":"","comment_id":244350,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1598490598","product_id":100051201,"comment_content":"è€å¸ˆï¼Œæœ‰å…·ä½“çš„TCMallocä½¿ç”¨åœºæ™¯å—","like_count":0,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504561,"discussion_content":"GoLangå°±åœ¨ä½¿ç”¨TCMallocï¼Œè®¸å¤šå¤§å‚çš„äº‘ç«¯æœåŠ¡ä¹Ÿåœ¨ä½¿ç”¨å®ƒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598942930,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241731,"user_name":"hello world","can_delete":false,"product_type":"c1","uid":1080180,"ip_address":"","ucode":"DC5A5FF4B15F91","user_header":"https://static001.geekbang.org/account/avatar/00/10/7b/74/a4c4838f.jpg","comment_is_top":false,"comment_ctime":1597404084,"is_pvip":false,"replies":[{"id":"89650","content":"ä½ æ˜¯è¯´ptmalloc2é»˜è®¤é¢„åˆ†é…çš„64MBå—ï¼Ÿå·²ç»åœ¨ä»£ç ä¸­å†™æ­»äº†ã€‚ä»¥ä¸‹æ˜¯glibc2.17çš„æºä»£ç ï¼Œä¾›ä½ å‚è€ƒï¼š<br># if __WORDSIZE == 32<br>#  define DEFAULT_MMAP_THRESHOLD_MAX (512 * 1024)<br># else<br>#  define DEFAULT_MMAP_THRESHOLD_MAX (4 * 1024 * 1024 * sizeof(long))<br># endif<br>DEFAULT_MMAP_THRESHOLD_MAX åœ¨64ä½ç³»ç»Ÿä¸­å°±æ˜¯32MBã€‚<br><br>#ifndef HEAP_MAX_SIZE<br># ifdef DEFAULT_MMAP_THRESHOLD_MAX<br>#  define HEAP_MAX_SIZE (2 * DEFAULT_MMAP_THRESHOLD_MAX)<br># else<br>#  define HEAP_MAX_SIZE (1024*1024) &#47;* must be a power of two *&#47;<br># endif<br>#endif<br>HEAP_MAX_SIZE å°±æ˜¯é¢„åˆ†é…çš„64MBå†…å­˜","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1597992763,"ip_address":"","comment_id":241731,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1597404084","product_id":100051201,"comment_content":"é¢„åˆ†é…å†…å­˜å¤§å°å¯ä»¥é€šè¿‡å‚æ•°è°ƒæ•´ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503828,"discussion_content":"ä½ æ˜¯è¯´ptmalloc2é»˜è®¤é¢„åˆ†é…çš„64MBå—ï¼Ÿå·²ç»åœ¨ä»£ç ä¸­å†™æ­»äº†ã€‚ä»¥ä¸‹æ˜¯glibc2.17çš„æºä»£ç ï¼Œä¾›ä½ å‚è€ƒï¼š\n# if __WORDSIZE == 32\n#  define DEFAULT_MMAP_THRESHOLD_MAX (512 * 1024)\n# else\n#  define DEFAULT_MMAP_THRESHOLD_MAX (4 * 1024 * 1024 * sizeof(long))\n# endif\nDEFAULT_MMAP_THRESHOLD_MAX åœ¨64ä½ç³»ç»Ÿä¸­å°±æ˜¯32MBã€‚\n\n#ifndef HEAP_MAX_SIZE\n# ifdef DEFAULT_MMAP_THRESHOLD_MAX\n#  define HEAP_MAX_SIZE (2 * DEFAULT_MMAP_THRESHOLD_MAX)\n# else\n#  define HEAP_MAX_SIZE (1024*1024) /* must be a power of two */\n# endif\n#endif\nHEAP_MAX_SIZE å°±æ˜¯é¢„åˆ†é…çš„64MBå†…å­˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597992763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":234854,"user_name":"è“é­”ä¸¶","can_delete":false,"product_type":"c1","uid":1219438,"ip_address":"","ucode":"2AE4359E263558","user_header":"https://static001.geekbang.org/account/avatar/00/12/9b/6e/edd2da0c.jpg","comment_is_top":false,"comment_ctime":1594813170,"is_pvip":false,"replies":[{"id":"90750","content":"1ã€â€œå›åˆ°æ–‡ç« å¼€å¤´çš„é—®é¢˜ï¼ŒJava å·²ç»æœ‰äº†åº”ç”¨å±‚å†…å­˜æ± ï¼Œä¸ºä»€ä¹ˆè¿˜ä¼šå—åˆ° C åº“å†…å­˜æ± çš„å½±å“å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºï¼Œé™¤äº† JVM è´Ÿè´£ç®¡ç†çš„å †å†…å­˜å¤–ï¼ŒJava è¿˜æ‹¥æœ‰ä¸€äº›å †å¤–å†…å­˜ï¼Œç”±äºå®ƒä¸ä½¿ç”¨ JVM çš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œæ‰€ä»¥æ›´ç¨³å®šã€æŒä¹…ï¼Œå¤„ç† IO çš„é€Ÿåº¦ä¹Ÿæ›´å¿«ã€‚è¿™äº›å †å¤–å†…å­˜å°±ä¼šç”± C åº“å†…å­˜æ± è´Ÿè´£åˆ†é…ï¼Œè¿™æ˜¯ Java å—åˆ° C åº“å†…å­˜æ± å½±å“çš„åŸå› ã€‚â€<br>2ã€æœ‰ä¸Šé™çš„ï¼Œâ€œå¹¶ä¸æ˜¯è®¾ç½®äº† 1000 ä¸ªçº¿ç¨‹ï¼Œå°±ä¼šé¢„åˆ†é… 60GB çš„å†…å­˜ï¼Œå­çº¿ç¨‹å†…å­˜æ± æœ€å¤šåªèƒ½åˆ° 8 å€çš„ CPU æ ¸æ•°ï¼Œæ¯”å¦‚åœ¨ 32 æ ¸çš„æœåŠ¡å™¨ä¸Šï¼Œæœ€å¤šåªä¼šæœ‰ 256 ä¸ªå­çº¿ç¨‹å†…å­˜æ± â€<br>3ã€â€œç„¶è€Œï¼ŒJava ä¸­çš„ JVM å†…å­˜æ± å·²ç»ç®¡ç†äº†ç»å¤§éƒ¨åˆ†å†…å­˜ï¼Œç¡®å®ä¸èƒ½æ¥å—è«åå¤šå‡ºæ¥ 6GB çš„å†…å­˜ï¼Œé‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿæ—¢ç„¶æˆ‘ä»¬çŸ¥é“äº† Ptmalloc2 å†…å­˜æ± çš„å­˜åœ¨ï¼Œå°±æœ‰ä¸¤ç§è§£å†³åŠæ³•ã€‚â€","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1599616346,"ip_address":"","comment_id":234854,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1594813170","product_id":100051201,"comment_content":"è€å¸ˆï¼Œè¿™é‡Œçš„6gå†…å­˜æ± æ˜¯å †åœ¨å†…å­˜å§ï¼Œæ˜¯ä¸º100å¹¶å‘çº¿ç¨‹åˆ†é…çš„å§ï¼Ÿjvmæ¨¡å‹ä¸­æœ‰ä¸ªçº¿ç¨‹æ ˆï¼Œä¸åº”è¯¥åªä¼šç”¨åˆ°jvmåˆ†é…çš„å†…å­˜å—ï¼Ÿè¿˜éœ€è¦åˆ†é…cåº“å†…å­˜æ± ä¸ºäº†ä»€ä¹ˆç›®çš„ï¼Ÿè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæ˜¯å¦åªè¦ä½¿ç”¨çº¿ç¨‹å°±ä¼šæœ‰cåº“å†…å­˜æ± åˆ†é…ï¼Œé‚£ä¸æ˜¯å¹¶å‘çº¿ç¨‹ä¸€å¤šäº†å°±ä¼šå ç”¨å¤§é‡å†…å­˜ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501527,"discussion_content":"1ã€â€œå›åˆ°æ–‡ç« å¼€å¤´çš„é—®é¢˜ï¼ŒJava å·²ç»æœ‰äº†åº”ç”¨å±‚å†…å­˜æ± ï¼Œä¸ºä»€ä¹ˆè¿˜ä¼šå—åˆ° C åº“å†…å­˜æ± çš„å½±å“å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºï¼Œé™¤äº† JVM è´Ÿè´£ç®¡ç†çš„å †å†…å­˜å¤–ï¼ŒJava è¿˜æ‹¥æœ‰ä¸€äº›å †å¤–å†…å­˜ï¼Œç”±äºå®ƒä¸ä½¿ç”¨ JVM çš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œæ‰€ä»¥æ›´ç¨³å®šã€æŒä¹…ï¼Œå¤„ç† IO çš„é€Ÿåº¦ä¹Ÿæ›´å¿«ã€‚è¿™äº›å †å¤–å†…å­˜å°±ä¼šç”± C åº“å†…å­˜æ± è´Ÿè´£åˆ†é…ï¼Œè¿™æ˜¯ Java å—åˆ° C åº“å†…å­˜æ± å½±å“çš„åŸå› ã€‚â€\n2ã€æœ‰ä¸Šé™çš„ï¼Œâ€œå¹¶ä¸æ˜¯è®¾ç½®äº† 1000 ä¸ªçº¿ç¨‹ï¼Œå°±ä¼šé¢„åˆ†é… 60GB çš„å†…å­˜ï¼Œå­çº¿ç¨‹å†…å­˜æ± æœ€å¤šåªèƒ½åˆ° 8 å€çš„ CPU æ ¸æ•°ï¼Œæ¯”å¦‚åœ¨ 32 æ ¸çš„æœåŠ¡å™¨ä¸Šï¼Œæœ€å¤šåªä¼šæœ‰ 256 ä¸ªå­çº¿ç¨‹å†…å­˜æ± â€\n3ã€â€œç„¶è€Œï¼ŒJava ä¸­çš„ JVM å†…å­˜æ± å·²ç»ç®¡ç†äº†ç»å¤§éƒ¨åˆ†å†…å­˜ï¼Œç¡®å®ä¸èƒ½æ¥å—è«åå¤šå‡ºæ¥ 6GB çš„å†…å­˜ï¼Œé‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿæ—¢ç„¶æˆ‘ä»¬çŸ¥é“äº† Ptmalloc2 å†…å­˜æ± çš„å­˜åœ¨ï¼Œå°±æœ‰ä¸¤ç§è§£å†³åŠæ³•ã€‚â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599616346,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":232159,"user_name":"kingstar","can_delete":false,"product_type":"c1","uid":2015037,"ip_address":"","ucode":"54D8F9182B2785","user_header":"","comment_is_top":false,"comment_ctime":1593876857,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593876857","product_id":100051201,"comment_content":"è€å¸ˆï¼ŒTCMallocéœ€è¦g++ç‰ˆæœ¬å¤ªé«˜äº†ï¼Œæ˜¯å¦è¿˜æœ‰å…¶ä»–ï¼ˆæ¯”å¦‚c++11ï¼‰å¥½çš„å†…å­˜æ± å¼€æºé¡¹ç›®æ¨èï¼Ÿ","like_count":0},{"had_liked":false,"id":232119,"user_name":"å¤å“¥","can_delete":false,"product_type":"c1","uid":2053749,"ip_address":"","ucode":"E0B2C6F35EB0FD","user_header":"https://static001.geekbang.org/account/avatar/00/1f/56/75/6bf38a1e.jpg","comment_is_top":false,"comment_ctime":1593859647,"is_pvip":false,"replies":[{"id":"85908","content":"^_^","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1594100857,"ip_address":"","comment_id":232119,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1593859647","product_id":100051201,"comment_content":"é™¶å“¥ï¼è°¢è°¢ä½ ï¼Œæ”¶è·æ»¡æ»¡çš„","like_count":0,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500518,"discussion_content":"^_^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594100857,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":229552,"user_name":"Carey","can_delete":false,"product_type":"c1","uid":1295041,"ip_address":"","ucode":"D31D1ECFAE0027","user_header":"https://static001.geekbang.org/account/avatar/00/13/c2/c1/48785057.jpg","comment_is_top":false,"comment_ctime":1593056018,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593056018","product_id":100051201,"comment_content":"è€å¸ˆè¯´ï¼Œæ ˆå®¹é‡æœ‰é™ï¼Œcentos7é»˜è®¤8Mï¼Œè¿™ä¸ªå¤§å°ä¸è®¡ç®—æœºæ˜¯32ä½è¿˜æ˜¯64ä½æ— å…³å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":228900,"user_name":"è€¿é•¿å­¦","can_delete":false,"product_type":"c1","uid":1309948,"ip_address":"","ucode":"C7A262812854D4","user_header":"https://static001.geekbang.org/account/avatar/00/13/fc/fc/1e235814.jpg","comment_is_top":false,"comment_ctime":1592835801,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592835801","product_id":100051201,"comment_content":"è€å¸ˆï¼Œä¹°äº†ä½ å¥½å‡ é—¨è¯¾ç¨‹ï¼Œå’¨è¯¢ä¸€ä¸ªé—®é¢˜ï¼Œfree -mçœ‹åˆ°çš„usedå’Œfreeåˆ—åªå’Œä¸ºå•¥å°äºtotalï¼Œé‚£ä¸å¤Ÿçš„éƒ¨åˆ†å†…å­˜æ˜¯åœ¨å“ªé‡Œï¼Œé€æ˜å¤§é¡µå±äºusedè¿˜æ˜¯cache","like_count":0},{"had_liked":false,"id":219826,"user_name":"æ·¡æ¼ è½å¯","can_delete":false,"product_type":"c1","uid":1049550,"ip_address":"","ucode":"17FF0A02D13098","user_header":"https://static001.geekbang.org/account/avatar/00/10/03/ce/ec3b8de9.jpg","comment_is_top":false,"comment_ctime":1590108169,"is_pvip":false,"replies":[{"id":"81198","content":"ä½ å¥½æ·¡æ¼ è½å¯ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šç‹¬ç«‹çš„8MBçš„æ ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1590131449,"ip_address":"","comment_id":219826,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1590108169","product_id":100051201,"comment_content":"æ ˆçš„å®¹é‡æœ‰é™ï¼Œå¦‚ CentOS 7 ä¸­æ˜¯ 8MB å­—èŠ‚<br>è¯·é—®è€å¸ˆï¼Œè¿™8MBæ˜¯æŒ‡ä¸€ä¸ªçº¿ç¨‹8MBè¿˜æ˜¯æ‰€æœ‰çº¿ç¨‹å…±ç”¨8MBå‘€ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495950,"discussion_content":"ä½ å¥½æ·¡æ¼ è½å¯ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šç‹¬ç«‹çš„8MBçš„æ ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590131449,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":218834,"user_name":"ä¸­å¹´ç”·å­","can_delete":false,"product_type":"c1","uid":1039204,"ip_address":"","ucode":"027C86B3370150","user_header":"https://static001.geekbang.org/account/avatar/00/0f/db/64/06d54a80.jpg","comment_is_top":false,"comment_ctime":1589883375,"is_pvip":true,"replies":[{"id":"90923","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1599786346,"ip_address":"","comment_id":218834,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1589883375","product_id":100051201,"comment_content":"ç”¨å¯¹è±¡æ±  æ¥èŠ‚çœ é¢‘ç¹åˆ›å»ºã€åˆå§‹åŒ–å¯¹è±¡é€ æˆçš„æ—¶é—´å¼€é”€ï¼Œ<br>å¿†æ°´å¯’æåˆ°çš„äº«å…ƒæ¨¡å¼æ€æƒ³æ˜¯å¯¹ç»†ç²’åº¦å¯¹è±¡çš„å…±äº«å’Œå¤ç”¨ï¼Œ <br>å¯¹è±¡æ± æ˜¯å¯¹äº«å…ƒæ¨¡å¼çš„å‡çº§ï¼Œ ç»´æŠ¤è£…è½½å¯¹è±¡çš„æ± å­ï¼Œ æä¾›è·å–ã€é‡Šæ”¾èµ„æºçš„æ–¹æ³•ã€‚<br>æ„Ÿè§‰æ€è€ƒé¢˜çš„åœºæ™¯ç”¨å¯¹è±¡æ± æ›´ä¸ºåˆé€‚ã€‚","like_count":0,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495591,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599786346,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":218424,"user_name":"èŒƒé—²","can_delete":false,"product_type":"c1","uid":1073125,"ip_address":"","ucode":"F21FD7DF6BA53C","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/e5/54325854.jpg","comment_is_top":false,"comment_ctime":1589800646,"is_pvip":false,"replies":[{"id":"80915","content":"wikié‡Œè§£é‡Šå¾—å¾ˆå…¨é¢ï¼Œå¯ä»¥å‚è€ƒä¸‹ï¼šhttps:&#47;&#47;zh.wikipedia.org&#47;wiki&#47;%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1589935711,"ip_address":"","comment_id":218424,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1589800646","product_id":100051201,"comment_content":"æˆ‘çœ‹å¾ˆå¤šåŒå­¦éƒ½æåˆ°äº†äº«å…ƒæ¨¡å¼ï¼Ÿè¿™ä¸ªåˆ°åº•æ˜¯å•¥å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495454,"discussion_content":"wikié‡Œè§£é‡Šå¾—å¾ˆå…¨é¢ï¼Œå¯ä»¥å‚è€ƒä¸‹ï¼šhttps://zh.wikipedia.org/wiki/%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589935711,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":216367,"user_name":"OlafOO","can_delete":false,"product_type":"c1","uid":1019254,"ip_address":"","ucode":"105F8B194ED37B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/76/994a9929.jpg","comment_is_top":false,"comment_ctime":1589247197,"is_pvip":true,"replies":[{"id":"90961","content":"ä½ å¥½ï¼Œè¿™èŠ‚è¯¾è®²çš„ä¸œè¥¿æœ‰ç‚¹å¤šï¼ŒJAVAè¿™ä¸ªä¾‹å­ä¸æ ˆæ— å…³ï¼Œåªä¸å †å†…å­˜æœ‰å…³ã€‚JVMä¸­æœ‰æ—¶ä¼šä¸ä½¿ç”¨GCç®¡ç†çš„å†…å­˜ï¼Œè€Œç›´æ¥ä»æ“ä½œç³»ç»Ÿé‡Œç”³è¯·å†…å­˜ï¼Œè¿™ç§å†…å­˜å°±æ˜¯å †å¤–å†…å­˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1599811746,"ip_address":"","comment_id":216367,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1589247197","product_id":100051201,"comment_content":"å›åˆ°æ–‡ç« å¼€å¤´çš„é—®é¢˜ï¼ŒJava å·²ç»æœ‰äº†åº”ç”¨å±‚å†…å­˜æ± ï¼Œä¸ºä»€ä¹ˆè¿˜ä¼šå—åˆ° C åº“å†…å­˜æ± çš„å½±å“å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºï¼Œé™¤äº† JVM è´Ÿè´£ç®¡ç†çš„å †å†…å­˜å¤–ï¼ŒJava è¿˜æ‹¥æœ‰ä¸€äº›å †å¤–å†…å­˜ï¼Œç”±äºå®ƒä¸ä½¿ç”¨ JVM çš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œæ‰€ä»¥æ›´ç¨³å®šã€æŒä¹…ï¼Œå¤„ç† IO çš„é€Ÿåº¦ä¹Ÿæ›´å¿«ã€‚è¿™äº›å †å¤–å†…å­˜å°±ä¼šç”± C åº“å†…å­˜æ± è´Ÿè´£åˆ†é…ï¼Œè¿™æ˜¯ Java å—åˆ° C åº“å†…å­˜æ± å½±å“çš„åŸå› ã€‚<br>â€”â€”<br>8+6ï¼Œå¦‚æœæ˜¯åˆ†é…åœ¨6Gå†…å­˜æ± åŒºåŸŸçš„å¯¹è±¡å°±ä¸å—Java gcç®¡ç†äº†ä¹ˆã€‚è€å¸ˆæˆ‘è¿™å¿«æœ‰ç‚¹è¿·æƒ‘ï¼Œè¿™é‡Œè¯´å †å¤–å†…å­˜ï¼Œåé¢åˆåœ¨è®²åˆ†é…å †ä¸Šå’Œæ ˆä¸Šçš„åŒºåˆ«ã€‚","like_count":0,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494791,"discussion_content":"ä½ å¥½ï¼Œè¿™èŠ‚è¯¾è®²çš„ä¸œè¥¿æœ‰ç‚¹å¤šï¼ŒJAVAè¿™ä¸ªä¾‹å­ä¸æ ˆæ— å…³ï¼Œåªä¸å †å†…å­˜æœ‰å…³ã€‚JVMä¸­æœ‰æ—¶ä¼šä¸ä½¿ç”¨GCç®¡ç†çš„å†…å­˜ï¼Œè€Œç›´æ¥ä»æ“ä½œç³»ç»Ÿé‡Œç”³è¯·å†…å­˜ï¼Œè¿™ç§å†…å­˜å°±æ˜¯å †å¤–å†…å­˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599811746,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1123043,"avatar":"https://static001.geekbang.org/account/avatar/00/11/22/e3/510b69f9.jpg","nickname":"benny","note":"","ucode":"E2F30AF0C808D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282901,"discussion_content":"æ ˆæ˜¯å †å¤–å†…å­˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592115106,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":216301,"user_name":"å°æ–¯","can_delete":false,"product_type":"c1","uid":1120328,"ip_address":"","ucode":"DD18726396FA66","user_header":"https://static001.geekbang.org/account/avatar/00/11/18/48/5121c471.jpg","comment_is_top":false,"comment_ctime":1589237136,"is_pvip":false,"replies":[{"id":"90959","content":"^_^","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1599811239,"ip_address":"","comment_id":216301,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1589237136","product_id":100051201,"comment_content":"æ€è€ƒé¢˜ï¼šä¸€å¼€å§‹çš„å›ç­”ï¼Œæ˜¯æƒ³è¯´å†…å­˜æ± å¯ä»¥ç»™å¯¹è±¡åˆå§‹åŒ–å†…å­˜ï¼Œé¿å…åç»­ç”³è¯·ä¼šæœ‰é”çš„å½±å“ã€‚<br>çœ‹äº†ç•™è¨€ä¹‹åï¼Œå‘ç°ä¸“ä¸šçš„å›ç­”åº”è¯¥æ˜¯ï¼šå†…å­˜æ± ä¸­å¯ä»¥åˆ©ç”¨äº«å…ƒæ¨¡å¼å°†å¸¸ç”¨çš„å¯¹è±¡ä¸€ç›´ä¿ç•™ç€ï¼Œå‡å°‘é‡å¤ç”³è¯·å¯¼è‡´çš„æ€§èƒ½çš„é¡ºè€—ã€‚ã€‚<br><br>å­¦åˆ°äº†ã€‚<br>","like_count":0,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494760,"discussion_content":"^_^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599811239,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":216021,"user_name":"Edison","can_delete":false,"product_type":"c1","uid":1675930,"ip_address":"","ucode":"BFA073D7CDD3FD","user_header":"https://static001.geekbang.org/account/avatar/00/19/92/9a/a3ff95cc.jpg","comment_is_top":false,"comment_ctime":1589168904,"is_pvip":false,"replies":[{"id":"90970","content":"ä½ æ˜¯è¯´Java off-heap memoryçš„ç”³è¯·æ–¹å¼å§ï¼Ÿhttps:&#47;&#47;juejin.im&#47;post&#47;6844903710766661639è¿™ç¯‡æ–‡ç« ä»‹ç»äº†å¥½å‡ ç§ï¼Œä½ å¯ä»¥è¯•ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1599814491,"ip_address":"","comment_id":216021,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1589168904","product_id":100051201,"comment_content":"Javaé€šè¿‡Cåº“ç”³è¯·å†…å­˜çš„é€»è¾‘æ˜¯æ€æ ·çš„å•Šï¼ŒCåº“6GBçš„å†…å­˜ç©ºé—´éƒ½ä¼šè¢«Javaå ç”¨å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494641,"discussion_content":"ä½ æ˜¯è¯´Java off-heap memoryçš„ç”³è¯·æ–¹å¼å§ï¼Ÿhttps://juejin.im/post/6844903710766661639è¿™ç¯‡æ–‡ç« ä»‹ç»äº†å¥½å‡ ç§ï¼Œä½ å¯ä»¥è¯•ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599814491,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215268,"user_name":"è°­ä¿Šæ°","can_delete":false,"product_type":"c1","uid":1625510,"ip_address":"","ucode":"FA93EAAF5926F2","user_header":"https://static001.geekbang.org/account/avatar/00/18/cd/a6/420da5c9.jpg","comment_is_top":false,"comment_ctime":1588944319,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588944319","product_id":100051201,"comment_content":"ç‰›ç‰›ç‰›ğŸ®","like_count":0},{"had_liked":false,"id":215144,"user_name":"eason2017","can_delete":false,"product_type":"c1","uid":1009422,"ip_address":"","ucode":"E070BA624FA490","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/0e/c77ad9b1.jpg","comment_is_top":false,"comment_ctime":1588915118,"is_pvip":false,"replies":[{"id":"79623","content":"æ˜¯çš„ï¼Œæœ‰äº›éš¾ï¼Œå…¶å®èƒ½å¼•èµ·ä½ çš„æ€è€ƒï¼Œæˆ‘å°±å¾ˆæ»¡æ„äº†^_^ï¼Œè¯¾ç¨‹å¤–çš„çŸ¥è¯†æ›´å¤šï¼Œéœ€è¦ä¸åœæ¢ç´¢","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1588926259,"ip_address":"","comment_id":215144,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1588915118","product_id":100051201,"comment_content":"æ±‚è§£è€å¸ˆçš„é—®é¢˜çš„ç­”æ¡ˆï¼Œå¯¹javaç¨‹åºå‘˜æ¥è¯´çœŸæ˜¯éœ€è¦ä¸‹å¾ˆæ·±çš„åŠŸå¤«æ‰èƒ½çœ‹åˆ°ä¸åŒå±‚é¢çš„ä¸œè¥¿ã€‚","like_count":0,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494331,"discussion_content":"æ˜¯çš„ï¼Œæœ‰äº›éš¾ï¼Œå…¶å®èƒ½å¼•èµ·ä½ çš„æ€è€ƒï¼Œæˆ‘å°±å¾ˆæ»¡æ„äº†^_^ï¼Œè¯¾ç¨‹å¤–çš„çŸ¥è¯†æ›´å¤šï¼Œéœ€è¦ä¸åœæ¢ç´¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588926259,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1009422,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/0e/c77ad9b1.jpg","nickname":"eason2017","note":"","ucode":"E070BA624FA490","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":261000,"discussion_content":"å‰å››ç¯‡æ–‡ç« å·²ç»åå¤çš„å­¦ä¹ è®°å¿†äº†å¥½å¤šæ¬¡ï¼Œæ„Ÿè§‰è¿™æ ·åªæ˜¯å­¦ä¹ äº†ä¸€äº›æ‹›å¼ï¼Œå…¶å®è¿™æ ·å·²ç»å¾ˆå¥½ï¼Œæ‰“å¼€äº†ä¸€ç‰‡å¤©äº†ï¼Œè°¢è°¢è€å¸ˆï¼Œå°±æ˜¯æƒ³ç³»ç»Ÿå­¦ä¹ ï¼Œåˆè¦ä»ä½•å¼€å§‹å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588926376,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214775,"user_name":"siupan","can_delete":false,"product_type":"c1","uid":1808630,"ip_address":"","ucode":"8C5DC5702507ED","user_header":"https://static001.geekbang.org/account/avatar/00/1b/98/f6/aa7ce80c.jpg","comment_is_top":false,"comment_ctime":1588817367,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588817367","product_id":100051201,"comment_content":"è€å¸ˆï¼ŒC#.dotnet ä¹Ÿæ˜¯ç”¨çš„ Ptmalloc2 å†…å­˜æ± å—ï¼Ÿæœ‰ä»€ä¹ˆå¥½çš„æ–¹å¼è¿›è¡ŒéªŒè¯ï¼Ÿ","like_count":0},{"had_liked":false,"id":213482,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1588429991,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1588429991","product_id":100051201,"comment_content":"è¿™ä¸‹çŸ¥é“ node.js ä¸­å¸¸è¯´çš„å †å¤–å†…å­˜æ˜¯ä»€ä¹ˆæ„æ€äº†ï¼Œä¸å—v8å†…å­˜çš„ç®¡ç†ï¼ŒåŸæ¥æ˜¯æŒ‡åº•å±‚çš„ c &#47; c++ åº“å†…å­˜æ± ","like_count":0},{"had_liked":false,"id":213408,"user_name":"é»„éª","can_delete":false,"product_type":"c1","uid":1849733,"ip_address":"","ucode":"3C41D02F4F712C","user_header":"https://static001.geekbang.org/account/avatar/00/1c/39/85/c6110f83.jpg","comment_is_top":false,"comment_ctime":1588406134,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1588406134","product_id":100051201,"comment_content":"å†…å­˜æ± ï¼Œæˆ‘ä»¬åœ¨å®é™…å·¥ä½œä¸­ï¼Œå¥½åƒæœ‰ä¸ªåˆ«ç§°ï¼Œå¯¹è±¡æ± ï¼Œæ ¸å¿ƒå°±æ˜¯é¢„åˆ†é…æŒ‡å®šæ•°é‡çš„æŸç§æ•°æ®ç»“æ„çš„å†…å­˜ï¼Œåº”ç”¨ç”¨å®Œäº†ä¹Ÿä¸é‡Šæ”¾åˆ°ç³»ç»Ÿï¼Œæ¥ä¸‹æ¥çš„è¯·æ±‚ç»§ç»­ç”¨ï¼Œåœ¨ç”¨ä¹‹å‰åˆå§‹åŒ–ä¸‹ï¼Œè¿™æ ·å°±é¿å…å†…å­˜åˆ†é…äº†ã€‚è¿™ä¸ªç¡®å®æ˜¯é«˜æ€§èƒ½ç¼–ç¨‹çš„ä¸€ç§æ–¹æ³•å§ã€‚","like_count":0},{"had_liked":false,"id":213313,"user_name":"æ˜ç¿¼","can_delete":false,"product_type":"c1","uid":1068361,"ip_address":"","ucode":"E77F86BEB3D5C1","user_header":"https://static001.geekbang.org/account/avatar/00/10/4d/49/28e73b9c.jpg","comment_is_top":false,"comment_ctime":1588383590,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588383590","product_id":100051201,"comment_content":"è€å¸ˆæƒ³è¯·æ•™ä¸‹ï¼Œå¦‚æœjavaå¤šçº¿ç¨‹ç¨‹åºæ²¡æœ‰ç”³è¯·å †å¤–å†…å­˜ï¼Œä¹Ÿè¦é¢„åˆ†é…64MBé¢„ç•™å†…å­˜å—ï¼Ÿå¦å¤–å¦‚æœæˆ‘ä»¬é€šè¿‡-XX:MaxDirectMemorySize=40M æ¥é™å®šå †å¤–å†…å­˜çš„å¤§å°ï¼Œè¿˜ä¼šæœ‰é¢„ç•™å†…å­˜å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":213167,"user_name":"å¼ åä¸­-Blackc","can_delete":false,"product_type":"c1","uid":1392338,"ip_address":"","ucode":"CFDE6E945466A0","user_header":"https://static001.geekbang.org/account/avatar/00/15/3e/d2/624a3d59.jpg","comment_is_top":false,"comment_ctime":1588319992,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588319992","product_id":100051201,"comment_content":"64ä½æœºå­é“¾æ¥libtcmalloc.soæ—¶ï¼Œéœ€è¦libunwind<br>æˆ‘è™šæ‹ŸæœºptMallocå’ŒTcMallocæ•°æ®å¯¹æ¯”<br>çº¿ç¨‹æ•°      å­—èŠ‚æ•°      PtMalloc t&#47;ns  TcMalloc t&#47;ns<br>    1           262144        26.71                8.41<br>    2           262144        43.91               10.24<br>    40         262144        425.20             86.92<br>    1            262145        27.10                52.13<br>    10           262145       106.46              3795.66(å¾ªç¯åˆ†é…å†…å­˜10æ¬¡)<br><br>ç•™è¨€è¯´ç”¨åˆ°äº†äº«å…ƒæ¨¡å¼ï¼Œé˜²æ­¢é‡å¤åˆ†é…ï¼Œè®©æˆ‘æƒ³åˆ°ä¸šåŠ¡å±‚çš„å†…å­˜æ± å’Œå¯¹è±¡æ± ï¼Œä¸šåŠ¡å±‚å¯¹è±¡æ± æ˜¯çŸ¥é“æˆ‘è¦åˆ†é…è¯¥å¯¹è±¡ï¼Œç³»ç»Ÿè¿™é‡Œæ€ä¹ˆçŸ¥é“åˆ†é…çš„å¯¹è±¡æ˜¯æˆ‘è¦çš„å‘¢ï¼Ÿä»€ä¹ˆåŸç†æ¥è¿›è¡Œæ ‡è¯†çš„ï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":212851,"user_name":"è€Œç«‹æ–‹","can_delete":false,"product_type":"c1","uid":1087258,"ip_address":"","ucode":"5FED6E9E148195","user_header":"https://static001.geekbang.org/account/avatar/00/10/97/1a/389eab84.jpg","comment_is_top":false,"comment_ctime":1588224909,"is_pvip":false,"replies":[{"id":"79142","content":"æ˜¯çš„ï¼Œæ¯”å¦‚ç¬¬17è®²æåˆ°çš„protobufå†…å­˜æ± å°±æ˜¯ç”¨äº†è¿™ä¸ªåŸç†","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1588408265,"ip_address":"","comment_id":212851,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1588224909","product_id":100051201,"comment_content":"æ¶¨å§¿åŠ¿æ¶¨å§¿åŠ¿ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰ç‚¹æ‡µé€¼ã€‚è€å¸ˆæŠŠç­–ç•¥éƒ½è®²äº†ï¼Œè¿˜æ˜¯æ„Ÿè§‰æ„çŠ¹æœªå°½ã€‚æ‰€ä»¥æ˜¯å¦å¯ä»¥ç†è§£ä¸ºï¼Œå¦‚æœæƒ³æå‡å†…å­˜ç©ºé—´åˆ†é…æ•ˆç‡çš„è¯ï¼Œæ ¹æ®å®é™…åœºæ™¯å»é€‰æ‹©åˆé€‚çš„å†…å­˜æ± å°±è¡Œäº†ï¼Ÿ<br><br>çœ‹æ¥å¯è¯¾ä¸‹è¿˜å¾—å†è¡¥å……ä¸€ä¸‹èƒ½é‡ï¼ŒåŠ¨æ‰‹æŸ¥æŸ¥çœ‹ï¼Œé…ä¸€ä¸‹è¯•è¯•","like_count":0,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493626,"discussion_content":"æ˜¯çš„ï¼Œæ¯”å¦‚ç¬¬17è®²æåˆ°çš„protobufå†…å­˜æ± å°±æ˜¯ç”¨äº†è¿™ä¸ªåŸç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588408265,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":212161,"user_name":"alan","can_delete":false,"product_type":"c1","uid":1083425,"ip_address":"","ucode":"2CA8D0B6B7D5A9","user_header":"https://static001.geekbang.org/account/avatar/00/10/88/21/50b2418a.jpg","comment_is_top":false,"comment_ctime":1588068910,"is_pvip":false,"replies":[{"id":"78953","content":"ä½ å¥½ alanï¼Œæ¯ç§javaè™šæ‹Ÿæœºéƒ½æœ‰è‡ªå·±ç‹¬ç‰¹çš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œæœ‰æ—¶ä¸ºäº†æ—¶é—´æ›´å¿«å°±ä¼šç‰ºç‰²æ›´å¤šçš„å†…å­˜ç©ºé—´ï¼Œè¿™æ˜¯æ­£å¸¸çš„ï¼Œæˆ‘å»ºè®®åœ¨æœåŠ¡å™¨ä¸Šé•¿æ—¶é—´è¿è¡Œçš„javaè¿›ç¨‹ï¼Œä¸€å®šè¦é€šè¿‡Xmxå»æ˜ç¡®å†…å­˜å ç”¨ï¼Œå†…å­˜ä¸å¯æ§å¾ˆéº»çƒ¦.","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1588145616,"ip_address":"","comment_id":212161,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1588068910","product_id":100051201,"comment_content":"è€å¸ˆå¥½ï¼Œè¿™èŠ‚è¯¾çœŸå¥½ï¼Œç¬¬ä¸€æ¬¡äº†è§£åˆ°å†…å­˜æ± ä¹Ÿæ˜¯æœ‰å±‚æ¬¡çš„ã€‚æˆ‘é‡åˆ°ä¸€ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸€ä¸‹ï¼šæˆ‘æœ‰ä¸€ä¸ªå’Œæ•°æ®åº“äº¤äº’çš„groovyç¨‹åºï¼Œè¿è¡Œèµ·æ¥åä¼šå ç”¨å¾ˆå¤§å†…å­˜ï¼Œå¯åŠ¨æ—¶ï¼Œå°†Xmxè®¾ç½®ä¸ºå¤šå°‘ï¼Œè¯¥ç¨‹åºçš„å†…å­˜å ç”¨å°±ä¸ä¼šè¶…è¿‡XmxæŒ‡å®šçš„ä¸Šé™ã€‚æ¯”å¦‚ï¼ŒXmx=10gï¼Œç¨‹åºå°±ç¨³å®šå 10gå†…å­˜ï¼Œä½†å¦‚æœä¸é™åˆ¶çš„è¯ï¼Œæœ€é«˜è§è¿‡å ç”¨30Gå·¦å³ã€‚è¿™ä¸ªæ‚¨è§‰å¾—æœ‰ä»€ä¹ˆå¯èƒ½çš„åŸå› å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493445,"discussion_content":"ä½ å¥½ alanï¼Œæ¯ç§javaè™šæ‹Ÿæœºéƒ½æœ‰è‡ªå·±ç‹¬ç‰¹çš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œæœ‰æ—¶ä¸ºäº†æ—¶é—´æ›´å¿«å°±ä¼šç‰ºç‰²æ›´å¤šçš„å†…å­˜ç©ºé—´ï¼Œè¿™æ˜¯æ­£å¸¸çš„ï¼Œæˆ‘å»ºè®®åœ¨æœåŠ¡å™¨ä¸Šé•¿æ—¶é—´è¿è¡Œçš„javaè¿›ç¨‹ï¼Œä¸€å®šè¦é€šè¿‡Xmxå»æ˜ç¡®å†…å­˜å ç”¨ï¼Œå†…å­˜ä¸å¯æ§å¾ˆéº»çƒ¦.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588145616,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1101718,"avatar":"https://static001.geekbang.org/account/avatar/00/10/cf/96/251c0cee.jpg","nickname":"xindoo","note":"","ucode":"AEAF3208E644BC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":251543,"discussion_content":"xmxæ˜¯é™åˆ¶jvmå †æœ€å¤§å¤§å°ï¼Œå¦‚æœä¸é™åˆ¶ï¼Œjvmä¼šåœ¨ä¸€å®šæ¡ä»¶ä¸‹è‡ªåŠ¨æ‰©å¤§jvmå †å¤§å°ï¼Œå†…å­˜å ç”¨è‡ªç„¶è€Œç„¶å°±å¤§äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1588087529,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":211953,"user_name":"bookå°¾æ±","can_delete":false,"product_type":"c1","uid":1446375,"ip_address":"","ucode":"AE2B8DFC643ACC","user_header":"https://static001.geekbang.org/account/avatar/00/16/11/e7/044a9a6c.jpg","comment_is_top":false,"comment_ctime":1588040385,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1588040385","product_id":100051201,"comment_content":"å­¦åˆ°äº†ä¸€ä¸ªæ–°çš„åè¯äº«å…ƒæ¨¡å¼ï¼Œå†…å­˜æ± æ˜¯å †ä¸Šåˆ†é…çš„å†…å­˜ï¼Œå¯ä»¥åœ¨å†…å­˜æ± é‡Œç»´æŠ¤å¸¸ç”¨å¯¹è±¡çš„cacheï¼Œè¿™æ ·æ–°ç”Ÿæˆå¯¹è±¡æ—¶å°±å¯ä»¥ç›´æ¥æ‹¿æ¥å¤ç”¨ï¼Œåˆå§‹åŒ–æ—¶å¯ä»¥å‡å°‘åˆå§‹åŒ–çš„æˆå‘˜å˜é‡","like_count":0},{"had_liked":false,"id":211761,"user_name":"æˆ‘æ¥ä¹Ÿ","can_delete":false,"product_type":"c1","uid":1205253,"ip_address":"","ucode":"773D6104F56767","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","comment_is_top":false,"comment_ctime":1588001920,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588001920","product_id":100051201,"comment_content":"ä»¥å‰å†™cç¨‹åºï¼Œä¼šä¹ æƒ¯æ€§çš„ä½¿ç”¨bzeroæˆ–memsetåˆå§‹åŒ–ç»“æ„ä½“æ•°æ®ã€‚å› ä¸ºç”³è¯·çš„é‡Œé¢å¯èƒ½æœ‰å†å²æ•°æ®ï¼Œä½¿ç”¨ä¸å½“ä¼šæœ‰è«åå…¶å¦™çš„é—®é¢˜ã€‚<br>ç°åœ¨çš„golangæ‰€æœ‰æœªèµ‹å€¼çš„å˜é‡éƒ½ä¼šæ˜¯é»˜è®¤å€¼ã€‚<br>ï¼ˆä¹Ÿè®¸æœ‰äººä¼šè§‰å¾—goè¿™ä¸ªæ“ä½œæœ‰ç‚¹å¤šä½™ã€‚ï¼‰<br><br>åœ¨golangä¸­ï¼Œå†…å­˜æ± å¯¹äºåˆå§‹åŒ–å¯¹è±¡æœ‰æ²¡æœ‰ä»€ä¹ˆå¸®åŠ©å°±ä¸çŸ¥é“äº†ã€‚","like_count":0}]}