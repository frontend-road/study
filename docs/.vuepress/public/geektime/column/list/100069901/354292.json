{"id":354292,"title":"结束语 | 搞懂etcd，掌握通往分布式存储系统之门的钥匙","content":"<p>你好，我是唐聪。</p><p>时间过得真快，这就到了我们的定期更新的最后一节课了。从筹备、上线到今天专栏完结，过去了将近7个多月的时间。</p><p>说句实在话，刚开始筹备专栏的时候，我没想过战线会拉得如此之长。当时就是简单地觉得，我的经验也比较丰富了，输出应该很简单。但是其实做专栏耗费的心力远超我的预期：每一节课的构思写作都会花费我大量的时间，而且写完后还得考虑文章逻辑是否有优化的空间，怎样加配图、加一个什么样的配图可以更加形象，甚至部分文章写完自己不满意我还会重写一遍。</p><p>细心的你应该能发现，其实这个专栏每一节课的内容都是比较多的。一开始的筹划是每篇文章3500字左右，但最后为了讲清楚、讲明白，每一节课大部分都是到了6000字到7000字的内容（有的文章字数是破万了）。在此特别感谢我的“好基友”王超凡非常用心地和我一块深度review每一篇文章，因为平时工作也很忙，还经常得封闭式开发，所以录音只能放在凌晨。</p><p>在这里和你分享一件有意思的小事，专栏上线的前一天凌晨，我们和编辑正霖都激动得睡不着，在群里预览文章，聊上线后会是怎么样的一番景象。我们甚至想，会不会上线后被各位疯狂吐槽，以至于不得不录一个“负荆请罪”视频。</p><p><img src=\"https://static001.geekbang.org/resource/image/45/c8/452c5eeed7d79d3cba7a145ae67f57c8.jpg?wh=1080*1642\" alt=\"\"></p><p>现在回想起来，真的是做好了被大家吐槽的准备。但你们给我的是超出预期的热情。不少同学从上线到结束，都在时刻关注、学习每一节课，并留下优质的提问以及鼓励、认可。</p><!-- [[[read_end]]] --><ul>\n<li>有的同学是比较资深的etcd使用者，会独立分析源码，撰写高质量的技术博客，并给出精彩的回答；</li>\n<li>有的同学是刨根问底的etcd兴趣用户，会细致思考每一个异常场景，给出精彩的提问；</li>\n<li>有的同学刚刚入门etcd用户，正因为你们的提问，让我意识到需要在基础篇中多去增加一些特性初体验的案例；</li>\n<li>还有的同学着急说面试要用，所以春节期间我们没有筹划春节特别活动，而是正常更新课程正文；</li>\n<li>……</li>\n</ul><p>当然在这过程中，我也收获满满。为了解答你们的疑问，我必须得更加深入地阅读etcd源码，也是倒逼着我去进一步成长。</p><p>编辑正霖半开玩笑地和我说，我们是以百米冲刺的速度去跑马拉松。这段经历真的很难忘，你们的评论和收藏证明了我们的付出是值得的。</p><p>在这最后一节课里，我想最后和你再分享下我个人的etcd学习经验，以及这整个专栏设计和写作思路。</p><p><strong>如果要用一个核心词来总结这个专栏，那我希望是问题及任务式驱动。</strong></p><p>从我的个人经验上来看，我每次进一步学习etcd的动力，其实都是源于某个棘手的问题。数据不一致、死锁等一系列棘手问题，它们会倒逼我走出舒适区，实现更进一步成长。</p><p>从专栏目录中你也可以看到，每讲都是围绕着一个<strong>问题</strong>深入展开。在具体写作思路上，我会先从整体上给你介绍整体架构、解决方案，让你有个全局的认识。随后围绕每个点，按照由浅入深的思路给你分析各种解决方案。</p><p>另外，<strong>任务式驱动</strong>也是激励你不断学习的一个非常好的手段，通过任务实践你可以获得满满的成就感，建立正向反馈。你在学习etcd专栏的过程中，可结合自己的实际情况，为自己设立几个进阶任务，下面我给你列举了部分：</p><ul>\n<li>从0到1搭建一个etcd集群（可以先从单节点再到多节点，并进行节点的增删操作）；</li>\n<li>业务应用中使用etcd的核心API；</li>\n<li>自己动手实现一个分布式锁的包；</li>\n<li>阅读etcd的源码，写篇源码分析博客 （可从早期的etcd v2开始）；</li>\n<li>基于raftexample实现一个支持多存储引擎的KV服务；</li>\n<li>基于Kubernetes的Operator机制，实现一个etcd operator，创建一个CRD资源就可新建一个集群；</li>\n<li>……</li>\n</ul><p>我希望带给你的不仅仅是etcd原理与实践案例，更希望你收获的是一系列分布式核心问题解决方案，它们不仅能帮助你搞懂etcd背后的设计思想与实现，更像是一把通往分布式存储系统之门的钥匙，让你更轻松地学习、理解其他存储系统。</p><p>那你可能会问了，为什么搞懂etcd就能更深入理解分布式存储系统呢？</p><p>因为etcd相比其他分布式系统如HBase等，它足够简洁、轻量级，又涵盖了分布式系统常见的问题和核心概念，如API、数据模型、共识算法、存储引擎、事务、快照、WAL等，非常适合新人去学习。</p><p><img src=\"https://static001.geekbang.org/resource/image/7b/28/7b54b6ca9134c130bf3940c7db497928.png?wh=1920*1177\" alt=\"\"></p><p>上图我为你总结了etcd以及其他分布式系统的核心技术点，下面我再和你简要分析一下几个分布式核心问题及解决方案，并以Redis Cluster集群模式作为对比案例，希望能够帮助你触类旁通。</p><p>首先是服务可用性问题。分布式存储系统的解决方案是共识算法、复制模型。etcd使用的是Raft共识算法，一个写请求至少要一半以上节点确认才能成功，可容忍少数节点故障，具备高可用、强一致的目标。<a href=\"https://redis.io/topics/cluster-spec\">Redis Cluster</a>则使用的是主备异步复制和Gossip协议，基于主备异步复制协议，可将数据同步到多个节点，实现高可用。同时，通过Gossip协议发现集群中的其他节点、传递集群分片等元数据信息等操作，不依赖于元数据存储组件，实现了去中心化，降低了集群运维的复杂度。</p><p>然后是数据如何存取的问题。分布式存储系统的解决方案是存储引擎。除了etcd使用的boltdb，常见的存储引擎还有我们实践篇<a href=\"https://time.geekbang.org/column/article/347136\">18</a>中所介绍bitcask、leveldb、rocksdb（leveldb优化版）等。不同的分布式存储系统在面对不同业务痛点时（读写频率、是否支持事务等），所选择的解决方案不一样。etcd v2使用的是内存tree，etcd v3则使用的是boltdb，而Redis Cluster则使用的是基于内存实现的各类数据结构。</p><p>最后是如何存储大量数据的问题。分布式存储系统的解决方案是一系列的分片算法。etcd定位是个小型的分布式协调服务、元数据存储服务，因此etcd v2和etcd v3都不支持分片，每个节点含有全量的key-value数据。而Redis Cluster定位是个分布式、大容量的分布式缓存解决方案，因此它必须要使用分片机制，将数据打散在各个节点上。目前Redis Cluster使用的分片算法是哈希槽，它根据你请求的key，基于crc16哈希算法计算slot值，每个slot分配给对应的node节点处理。</p><pre><code>HASH_SLOT = CRC16(key) mod 16384\n</code></pre><p>etcd 作为最热门的云原生存储之一，在腾讯、阿里、Google、AWS、美团、字节跳动、拼多多、Shopee、明源云等公司都有大量的应用，覆盖的业务不仅仅是 Kubernetes 相关的各类容器产品，更有视频、推荐、安全、游戏、存储、集群调度等核心业务。</p><p>更快、更稳是etcd未来继续追求的方向，etcd社区将紧密围绕Kubernetes社区做一系列的优化工作，提供集群降级、自动将Non-Voting的Learner节点提升为Voting Member等特性，彻底解决饱受开发者诟病的版本管理等问题。</p><p>希望这个专栏一方面能帮助你遵循最佳实践，高效解决核心业务中各类痛点问题，另一方面能轻松帮你搞定面试过程中常见etcd问题，拿到满意的offer。</p><p>当然，我发现很多同学只是默默地收藏，一直在“潜水”。我希望在这最后一课里，大家一块来“灌灌水”，分享一下你自己的etcd学习方法以及你对这门课的感受。我为你准备了一份<a href=\"https://jinshuju.net/f/sz6QOc\">问卷</a>，希望你花两分钟填一下，说不定你就是我们这门课的“小锦鲤”~</p><p>最后，再次感谢，我们留言区和加餐见！</p>","neighbors":{"left":{"article_title":"结课测试题｜这些相关etcd知识你都掌握了吗？","id":353418},"right":[]},"comments":[{"had_liked":false,"id":284580,"user_name":"jeffery","can_delete":false,"product_type":"c1","uid":1219972,"ip_address":"","ucode":"35E2DAA386FB86","user_header":"https://static001.geekbang.org/account/avatar/00/12/9d/84/171b2221.jpg","comment_is_top":false,"comment_ctime":1616371467,"is_pvip":false,"replies":[{"id":"103293","content":"感谢jeffery同学认可，短暂休息下，近期先推出答疑文章，随后再来加餐，查漏补缺，兼顾各个层次的同学，帮助大家更好学习专栏内容","user_name":"作者回复","user_name_real":"唐聪","uid":"1009582","ctime":1616464280,"ip_address":"","comment_id":284580,"utype":1}],"discussion_count":2,"race_medal":0,"score":"61745913611","product_id":100069901,"comment_content":"真不舍！太清爽了！希望加餐！😀要求是不是太过分了😀多谢唐老师三个月份的付出分享！确实牛","like_count":14,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"唐聪","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517394,"discussion_content":"感谢jeffery同学认可，短暂休息下，近期先推出答疑文章，随后再来加餐，查漏补缺，兼顾各个层次的同学，帮助大家更好学习专栏内容","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616464280,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2132933,"avatar":"https://static001.geekbang.org/account/avatar/00/20/8b/c5/6e06e49c.jpg","nickname":"愁脾气的愁妖精","note":"","ucode":"81778A821819FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534622,"discussion_content":"想问一下小伙伴，思考题解答在哪里啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638243162,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":290450,"user_name":"江山未","can_delete":false,"product_type":"c1","uid":1090196,"ip_address":"","ucode":"5293DD9482717F","user_header":"https://static001.geekbang.org/account/avatar/00/10/a2/94/ae0a60d8.jpg","comment_is_top":false,"comment_ctime":1619572018,"is_pvip":false,"replies":[{"id":"112709","content":"感谢江山未同学的支持与认可！","user_name":"作者回复","user_name_real":"唐聪","uid":"1009582","ctime":1631029123,"ip_address":"","comment_id":290450,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31684343090","product_id":100069901,"comment_content":"感谢老师的精彩讲解，在地铁上刷完了课程。师傅领进门，修行在个人。对我来说还有很多有待深挖的点和不清楚的地方，下一步开始慢慢看源码。希望和大家共同进步！","like_count":7,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"唐聪","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519206,"discussion_content":"感谢江山未同学的支持与认可！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631029123,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284578,"user_name":"Geek_daf51a","can_delete":false,"product_type":"c1","uid":2436607,"ip_address":"","ucode":"6FDC93EA6D6369","user_header":"","comment_is_top":false,"comment_ctime":1616371142,"is_pvip":false,"replies":[{"id":"103452","content":"感谢支持！","user_name":"作者回复","user_name_real":"唐聪","uid":"1009582","ctime":1616652603,"ip_address":"","comment_id":284578,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27386174918","product_id":100069901,"comment_content":"辛苦老师，从专栏中学到了很多，有etcd历史、有原理、有重点问题案例、有定位延时、内存等问题方法以及最佳实践、还有有kubernetes、配置服务发现、分布式锁等剖析，过程中大量配图总结，覆盖了etcd方方面面，能感受到老师的用心与认真，值了，期待后面的加餐","like_count":6,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"唐聪","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517393,"discussion_content":"感谢支持！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616652603,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":298071,"user_name":"赵先生","can_delete":false,"product_type":"c1","uid":1027152,"ip_address":"","ucode":"A8E7EE3D400698","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ac/50/71c25e34.jpg","comment_is_top":false,"comment_ctime":1623900082,"is_pvip":true,"replies":[{"id":"108179","content":"感谢支持，昨天我第一时间在公众号上详细解读了etcd 3.5, https:&#47;&#47;mp.weixin.qq.com&#47;s&#47;mhHPyCAmdbT5wXF0vBiGzQ，后面将继续优化下加餐到专栏中。","user_name":"作者回复","user_name_real":"唐聪","uid":"1009582","ctime":1623904625,"ip_address":"","comment_id":298071,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23098736562","product_id":100069901,"comment_content":"唐老师，etcd 3.5来了，希望加餐！","like_count":5,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"唐聪","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522004,"discussion_content":"感谢支持，昨天我第一时间在公众号上详细解读了etcd 3.5, https://mp.weixin.qq.com/s/mhHPyCAmdbT5wXF0vBiGzQ，后面将继续优化下加餐到专栏中。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623904625,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":304327,"user_name":"小鱼儿吐泡泡","can_delete":false,"product_type":"c1","uid":1031710,"ip_address":"","ucode":"2B4AA532B2B066","user_header":"https://static001.geekbang.org/account/avatar/00/0f/be/1e/94886200.jpg","comment_is_top":false,"comment_ctime":1627354991,"is_pvip":true,"replies":[{"id":"110130","content":"好的，感谢支持，最近项目和家庭事情比较多，课后答案我将尽快补充（预计9月份）。","user_name":"作者回复","user_name_real":"唐聪","uid":"1009582","ctime":1627365869,"ip_address":"","comment_id":304327,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18807224175","product_id":100069901,"comment_content":"专栏质量确实很高，从整体到细节 读起来很舒服；非常符合学习一个新知识得过程； 结合实践案例，收货颇深； 同时，想问下，唐老师，可以把课后问题得答案补充下吗？","like_count":4,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"唐聪","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524015,"discussion_content":"好的，感谢支持，最近项目和家庭事情比较多，课后答案我将尽快补充（预计9月份）。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627365869,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":290231,"user_name":"程序员历小冰","can_delete":false,"product_type":"c1","uid":1110055,"ip_address":"","ucode":"DBC9D44082D9D3","user_header":"https://static001.geekbang.org/account/avatar/00/10/f0/27/6679da14.jpg","comment_is_top":false,"comment_ctime":1619442675,"is_pvip":false,"replies":[{"id":"112706","content":"感谢你的认可与支持","user_name":"作者回复","user_name_real":"唐聪","uid":"1009582","ctime":1631028701,"ip_address":"","comment_id":290231,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10209377267","product_id":100069901,"comment_content":"老师学习和讲解etcd的思路很赞，可以用在大多数中间件的学习上.","like_count":2,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"唐聪","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519141,"discussion_content":"感谢你的认可与支持","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631028701,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284921,"user_name":"liudu_ec","can_delete":false,"product_type":"c1","uid":2041994,"ip_address":"","ucode":"E299071BD1DFA8","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJiaeTzf4V8ib4xKcYjWEIflBSqkjbpkscoaedppgnBAD9ZAibjYSz0DNSJQw8icz7xljEgbNQ5hrzPAA/132","comment_is_top":false,"comment_ctime":1616547509,"is_pvip":true,"replies":[{"id":"103450","content":"赞，能坚持这么快看完，了不起","user_name":"作者回复","user_name_real":"唐聪","uid":"1009582","ctime":1616652511,"ip_address":"","comment_id":284921,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10206482101","product_id":100069901,"comment_content":"终于看完了，意犹未尽","like_count":2,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"唐聪","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517511,"discussion_content":"赞，能坚持这么快看完，了不起","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616652511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284723,"user_name":"mmm","can_delete":false,"product_type":"c1","uid":1204710,"ip_address":"","ucode":"D825372FBC8297","user_header":"https://static001.geekbang.org/account/avatar/00/12/61/e6/fedd20dc.jpg","comment_is_top":false,"comment_ctime":1616427661,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"10206362253","product_id":100069901,"comment_content":"感谢老师 期待加餐","like_count":2},{"had_liked":false,"id":326575,"user_name":"杰sir","can_delete":false,"product_type":"c1","uid":1098505,"ip_address":"","ucode":"80BB56B3BFB71A","user_header":"https://static001.geekbang.org/account/avatar/00/10/c3/09/dc368335.jpg","comment_is_top":false,"comment_ctime":1639569106,"is_pvip":false,"replies":[{"id":"119291","content":"感谢支持，最近在忙arch summit&#47;kubecon&#47;kstone开源各种事情耽误了答疑加餐篇更新，不过这些事情也都是对外的，相信能给大家工作带来帮助，尤其是我们的开源项目kstone, 它是业界首个etcd治理项目，后面我也会在加餐篇中详细介绍，这里先给你一些资料。<br>kstone开源项目，一站式etcd治理平台, 开源项目地址如下<br>https:&#47;&#47;github.com&#47;tkestack&#47;kstone<br>kubecon分享，如何管理数以万计的etcd集群, 分享pdf如下<br>https:&#47;&#47;static.sched.com&#47;hosted_files&#47;kccncosschn21&#47;9e&#47;KubeCon-China-2021-How-to-Efficiently-Manage-Tens-of-Thousands-of-etcd-Clusters.pdf<br>arch summit架构师大会腾讯大规模云原生平台稳定性实践, pdf如下<br>https:&#47;&#47;static001.geekbang.org&#47;con&#47;85&#47;pdf&#47;1890348645&#47;file&#47;%E8%85%BE%E8%AE%AF%E5%A4%A7%E8%A7%84%E6%A8%A1%E4%BA%91%E5%8E%9F%E7%94%9F%E5%B9%B3%E5%8F%B0%E7%A8%B3%E5%AE%9A%E6%80%A7%E5%AE%9E%E8%B7%B5-%E5%94%90%E8%81%AA.pdf","user_name":"作者回复","user_name_real":"编辑","uid":"1009582","ctime":1640240204,"ip_address":"","comment_id":326575,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5934536402","product_id":100069901,"comment_content":"两周看看这个系列的文章，收获很大。包括etcd读写流程的梳理，各个模块的分析，尤其是boltd的剖析，我再其他etcd相关的文章里几乎没有看到有这块的解读，还有运维层面的总结，使用过程碰到的问题和相关的优化，以及对“一致性”这个中文词语在计算里领域里不同场景的解读（这个也是我到目前为止让我觉得解释的最清楚的）都让我读的大呼过瘾，后面自己有问题看看源码基本都可以搞定了。<br><br>然后感觉老师写技术文章的能力也可以多学学，其中的思路，框架也可以在自己向别人输出自己所学的时候用到。<br><br>最后催更一下思考题的答疑，啥时候更新啊。","like_count":1,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"唐聪","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541035,"discussion_content":"感谢支持，最近在忙arch summit/kubecon/kstone开源各种事情耽误了答疑加餐篇更新，不过这些事情也都是对外的，相信能给大家工作带来帮助，尤其是我们的开源项目kstone, 它是业界首个etcd治理项目，后面我也会在加餐篇中详细介绍，这里先给你一些资料。\nkstone开源项目，一站式etcd治理平台, 开源项目地址如下\nhttps://github.com/tkestack/kstone\nkubecon分享，如何管理数以万计的etcd集群, 分享pdf如下\nhttps://static.sched.com/hosted_files/kccncosschn21/9e/KubeCon-China-2021-How-to-Efficiently-Manage-Tens-of-Thousands-of-etcd-Clusters.pdf\narch summit架构师大会腾讯大规模云原生平台稳定性实践, pdf如下\nhttps://static001.geekbang.org/con/85/pdf/1890348645/file/%E8%85%BE%E8%AE%AF%E5%A4%A7%E8%A7%84%E6%A8%A1%E4%BA%91%E5%8E%9F%E7%94%9F%E5%B9%B3%E5%8F%B0%E7%A8%B3%E5%AE%9A%E6%80%A7%E5%AE%9E%E8%B7%B5-%E5%94%90%E8%81%AA.pdf","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640240204,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321532,"user_name":"追风筝的人","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1636941441,"is_pvip":false,"replies":[{"id":"119292","content":"etcd metrics自带了这些指标，推荐体验下我们开源的一站式etcd治理平台kstone,https:&#47;&#47;github.com&#47;tkestack&#47;kstone, 它含有丰富的功能","user_name":"作者回复","user_name_real":"编辑","uid":"1009582","ctime":1640240703,"ip_address":"","comment_id":321532,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5931908737","product_id":100069901,"comment_content":"老师 什么工具或命令 可以 查看etcd server   RPC调用速率  和磁盘平均延时？","like_count":1,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"唐聪","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541038,"discussion_content":"etcd metrics自带了这些指标，推荐体验下我们开源的一站式etcd治理平台kstone,https://github.com/tkestack/kstone,  它含有丰富的功能","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1640240600,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1488020,"avatar":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","nickname":"追风筝的人","note":"","ucode":"2993D60F94C396","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"唐聪","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":541424,"discussion_content":"好的  谢谢老师啦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640359812,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":541038,"ip_address":""},"score":541424,"extra":""},{"author":{"id":1488020,"avatar":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","nickname":"追风筝的人","note":"","ucode":"2993D60F94C396","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"唐聪","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":541428,"discussion_content":"祝老师冬日一切愉快  近安 。谢谢老师解惑，  我去github研究下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640360045,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":541038,"ip_address":""},"score":541428,"extra":""}]}]},{"had_liked":false,"id":318883,"user_name":"八台上","can_delete":false,"product_type":"c1","uid":1391143,"ip_address":"","ucode":"FB3D74B522C720","user_header":"https://static001.geekbang.org/account/avatar/00/15/3a/27/5d218272.jpg","comment_is_top":false,"comment_ctime":1635473570,"is_pvip":false,"replies":[{"id":"119295","content":"抱歉，最近忙各种事情耽误了，其中最大的一个事情就是推出了首个开源的etcd治理项目kstone<br>https:&#47;&#47;github.com&#47;tkestack&#47;kstone","user_name":"作者回复","user_name_real":"编辑","uid":"1009582","ctime":1640241430,"ip_address":"","comment_id":318883,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5930440866","product_id":100069901,"comment_content":"坐等思考题答案","like_count":1,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"唐聪","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541045,"discussion_content":"抱歉，最近忙各种事情耽误了，其中最大的一个事情就是推出了首个开源的etcd治理项目kstone\nhttps://github.com/tkestack/kstone","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640241430,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":314863,"user_name":"小丢👣","can_delete":false,"product_type":"c1","uid":1031711,"ip_address":"","ucode":"A7699F00418FC4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/be/1f/57c88dd1.jpg","comment_is_top":false,"comment_ctime":1633510551,"is_pvip":false,"replies":[{"id":"114050","content":"感谢小丢同学的支持与认可! 一起加油!","user_name":"作者回复","user_name_real":"唐聪","uid":"1009582","ctime":1633604891,"ip_address":"","comment_id":314863,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5928477847","product_id":100069901,"comment_content":"对etcd的应用实践，我几乎为零，看了一遍专栏过后，我觉得我了解的差不多了。在准备给部门小伙伴做一次系列分享时，我发现我懂得太少了，然后我把几篇基础篇至少来回看了5遍，才有勇气分享给小伙伴。当然也仅仅是入门，只是想说一下这就是任务式驱动吧，没有分享的任务，可能就不会去思考各种细节 ，也不会在短时间内对etcd认知有一个较大的提升。感谢老师的精彩讲解，这个专栏我还是会反复看的，太值了！","like_count":1,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"唐聪","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527817,"discussion_content":"感谢小丢同学的支持与认可! 一起加油!","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633604891,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":292757,"user_name":"Geek_7154d8","can_delete":false,"product_type":"c1","uid":2412914,"ip_address":"","ucode":"AF1AF3171BF744","user_header":"","comment_is_top":false,"comment_ctime":1620963454,"is_pvip":false,"replies":[{"id":"106157","content":"感谢支持!","user_name":"作者回复","user_name_real":"唐聪","uid":"1009582","ctime":1621336561,"ip_address":"","comment_id":292757,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5915930750","product_id":100069901,"comment_content":"老师讲的太精彩了，比如分布式锁那一章，令我对分布式锁的技术要点顿时茅塞大开。","like_count":1,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"唐聪","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519947,"discussion_content":"感谢支持!","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621336561,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287843,"user_name":"石小","can_delete":false,"product_type":"c1","uid":1781893,"ip_address":"","ucode":"4258C686F289A6","user_header":"https://static001.geekbang.org/account/avatar/00/1b/30/85/14c2f16c.jpg","comment_is_top":false,"comment_ctime":1618193958,"is_pvip":false,"replies":[{"id":"104900","content":"嗯，etcd WAL一定要刷盘的，因为etcd定位是高可靠的元数据存储、关键协调服务，它需要保证数据一致性、可靠性","user_name":"作者回复","user_name_real":"唐聪","uid":"1009582","ctime":1618886769,"ip_address":"","comment_id":287843,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5913161254","product_id":100069901,"comment_content":"我问的不太明白哈😄，是这样的：mysql可以控制刷日志（通过innodb_flush_log_at_trx_commit），通过这个日志能控制刷磁盘，也会影响到事务提交成败。etcd有类似这样控制日志刷新的控制吗？还是说etcd每次提交必须刷磁盘（写wal日志），保证了事务一定会提交成功（即使boltdb写入失败）,如果是这样的，问什么etcd要这样设计？","like_count":1,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"唐聪","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518438,"discussion_content":"嗯，etcd WAL一定要刷盘的，因为etcd定位是高可靠的元数据存储、关键协调服务，它需要保证数据一致性、可靠性","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618886769,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284596,"user_name":"Coder","can_delete":false,"product_type":"c1","uid":2243398,"ip_address":"","ucode":"170190542A5A9C","user_header":"https://static001.geekbang.org/account/avatar/00/22/3b/46/3701e908.jpg","comment_is_top":false,"comment_ctime":1616380111,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5911347407","product_id":100069901,"comment_content":"辛苦唐老师，收获满满！","like_count":1},{"had_liked":false,"id":361154,"user_name":"幽幽夜","can_delete":false,"product_type":"c1","uid":1181805,"ip_address":"北京","ucode":"8ADFF64ED3793C","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/L19sKxTMAPrPpHibMribicRB2o9LVknHc4GI6icyialvickFsuakY1dlF9SzLnUW4qu4sT6KlVWtZJUYGYYE6fqaBsyA/132","comment_is_top":false,"comment_ctime":1667282906,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1667282906","product_id":100069901,"comment_content":"期待加餐，催更思考题...","like_count":0},{"had_liked":false,"id":333592,"user_name":"愤叔","can_delete":false,"product_type":"c1","uid":2753519,"ip_address":"","ucode":"C79D0D52C320F1","user_header":"https://static001.geekbang.org/account/avatar/00/2a/03/ef/d2fd9d36.jpg","comment_is_top":false,"comment_ctime":1644414314,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1644414314","product_id":100069901,"comment_content":"这些课 ，有没有pdf 数据或者文档可以下载下来 ","like_count":0},{"had_liked":false,"id":286153,"user_name":"吃完了饭的人","can_delete":false,"product_type":"c1","uid":2041530,"ip_address":"","ucode":"3919E48D97C278","user_header":"https://static001.geekbang.org/account/avatar/00/1f/26/ba/92f91744.jpg","comment_is_top":false,"comment_ctime":1617171976,"is_pvip":false,"replies":[{"id":"104094","content":"赞，若有时间，最好结合结束语中给的一些任务，多实践，理解更深","user_name":"作者回复","user_name_real":"唐聪","uid":"1009582","ctime":1617437425,"ip_address":"","comment_id":286153,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1617171976","product_id":100069901,"comment_content":"潜水完，冒个泡，反反复复看了两三遍","like_count":0,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"唐聪","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517884,"discussion_content":"赞，若有时间，最好结合结束语中给的一些任务，多实践，理解更深","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617437425,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284741,"user_name":"云原生工程师","can_delete":false,"product_type":"c1","uid":2243294,"ip_address":"","ucode":"40CB692F21D3BC","user_header":"https://static001.geekbang.org/account/avatar/00/22/3a/de/e5c30589.jpg","comment_is_top":false,"comment_ctime":1616457657,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616457657","product_id":100069901,"comment_content":"感谢老师，期待加餐","like_count":0}]}