{"id":100726,"title":"05 | 聊聊Kafka的版本号","content":"<p>你好，我是胡夕。今天我想和你聊聊如何选择Kafka版本号这个话题。今天要讨论的内容实在是太重要了，我觉得它甚至是你日后能否用好Kafka的关键。</p><p>上一期我介绍了目前流行的几种Kafka发行版，其实不论是哪种Kafka，本质上都内嵌了最核心的Apache Kafka，也就是社区版Kafka，那今天我们就来说说Apache Kafka版本号的问题。在开始之前，我想强调一下后面出现的所有“版本”这个词均表示Kafka具体的版本号，而非上一篇中的Kafka种类，这一点切记切记！</p><p>那么现在你可能会有这样的疑问：我为什么需要关心版本号的问题呢？直接使用最新版本不就好了吗？当然了，这的确是一种有效的选择版本的策略，但我想强调的是这种策略并非在任何场景下都适用。如果你不了解各个版本之间的差异和功能变化，你怎么能够准确地评判某Kafka版本是不是满足你的业务需求呢？因此在深入学习Kafka之前，花些时间搞明白版本演进，实际上是非常划算的一件事。</p><h2>Kafka版本命名</h2><p>当前Apache Kafka已经迭代到2.2版本，社区正在为2.3.0发版日期进行投票，相信2.3.0也会马上发布。但是稍微有些令人吃惊的是，很多人对于Kafka的版本命名理解存在歧义。比如我们在官网上下载Kafka时，会看到这样的版本：</p><!-- [[[read_end]]] --><p><img src=\"https://static001.geekbang.org/resource/image/c1/23/c10df9e6f72126e9c721fba38e27ac23.png?wh=784*208\" alt=\"\"></p><p>于是有些同学就会纳闷，难道Kafka版本号不是2.11或2.12吗？其实不然，前面的版本号是编译Kafka源代码的Scala编译器版本。Kafka服务器端的代码完全由Scala语言编写，Scala同时支持面向对象编程和函数式编程，用Scala写成的源代码编译之后也是普通的“.class”文件，因此我们说Scala是JVM系的语言，它的很多设计思想都是为人称道的。</p><p>事实上目前Java新推出的很多功能都是在不断向Scala语言靠近罢了，比如Lambda表达式、函数式接口、val变量等。一个有意思的事情是，Kafka新版客户端代码完全由Java语言编写，于是有些人展开了“Java VS Scala”的大讨论，并从语言特性的角度尝试分析Kafka社区为什么放弃Scala转而使用Java重写客户端代码。其实事情远没有那么复杂，仅仅是因为社区来了一批Java程序员而已，而以前老的Scala程序员隐退罢了。可能有点跑题了，但不管怎样我依然建议你有空去学学Scala语言。</p><p>回到刚才的版本号讨论。现在你应该知道了对于kafka-2.11-2.1.1的提法，真正的Kafka版本号实际上是2.1.1。那么这个2.1.1又表示什么呢？前面的2表示大版本号，即Major Version；中间的1表示小版本号或次版本号，即Minor Version；最后的1表示修订版本号，也就是Patch号。Kafka社区在发布1.0.0版本后特意写过一篇文章，宣布Kafka版本命名规则正式从4位演进到3位，比如0.11.0.0版本就是4位版本号。</p><p>坦率说，这里我和社区的意见是有点不同的。在我看来像0.11.0.0这样的版本虽然有4位版本号，但其实它的大版本是0.11，而不是0，所以如果这样来看的话Kafka版本号从来都是由3个部分构成，即“大版本号 - 小版本号 - Patch号”。这种视角可以统一所有的Kafka版本命名，也方便我们日后的讨论。我们来复习一下，假设碰到的Kafka版本是0.10.2.2，你现在就知道了它的大版本是0.10，小版本是2，总共打了两个大的补丁，Patch号是2。</p><h2>Kafka版本演进</h2><p>Kafka目前总共演进了7个大版本，分别是0.7、0.8、0.9、0.10、0.11、1.0和2.0，其中的小版本和Patch版本很多。哪些版本引入了哪些重大的功能改进？关于这个问题，我建议你最好能做到如数家珍，因为这样不仅令你在和别人交谈Kafka时显得很酷，而且如果你要向架构师转型或者已然是架构师，那么这些都是能够帮助你进行技术选型、架构评估的重要依据。</p><p>我们先从0.7版本说起，实际上也没什么可说的，这是最早开源时的“上古”版本了，以至于我也从来都没有接触过。这个版本只提供了最基础的消息队列功能，甚至连副本机制都没有，我实在想不出有什么理由你要使用这个版本，因此一旦有人向你推荐这个版本，果断走开就好了。</p><p>Kafka从0.7时代演进到0.8之后正式引入了<strong>副本机制</strong>，至此Kafka成为了一个真正意义上完备的分布式高可靠消息队列解决方案。有了副本备份机制，Kafka就能够比较好地做到消息无丢失。那时候生产和消费消息使用的还是老版本的客户端API，所谓的老版本是指当你用它们的API开发生产者和消费者应用时，你需要指定ZooKeeper的地址而非Broker的地址。</p><p>如果你现在尚不能理解这两者的区别也没关系，我会在专栏的后续文章中详细介绍它们。老版本客户端有很多的问题，特别是生产者API，它默认使用同步方式发送消息，可以想见其吞吐量一定不会太高。虽然它也支持异步的方式，但实际场景中可能会造成消息的丢失，因此0.8.2.0版本社区引入了<strong>新版本Producer API</strong>，即需要指定Broker地址的Producer。</p><p>据我所知，国内依然有少部分用户在使用0.8.1.1、0.8.2版本。<strong>我的建议是尽量使用比较新的版本。如果你不能升级大版本，我也建议你至少要升级到0.8.2.2这个版本，因为该版本中老版本消费者API是比较稳定的。另外即使你升到了0.8.2.2，也不要使用新版本Producer API，此时它的Bug还非常多。</strong></p><p>时间来到了2015年11月，社区正式发布了0.9.0.0版本。在我看来这是一个重量级的大版本更迭，0.9大版本增加了基础的安全认证/权限功能，同时使用Java重写了新版本消费者API，另外还引入了Kafka Connect组件用于实现高性能的数据抽取。如果这么多眼花缭乱的功能你一时无暇顾及，那么我希望你记住这个版本的另一个好处，那就是<strong>新版本Producer API在这个版本中算比较稳定了</strong>。如果你使用0.9作为线上环境不妨切换到新版本Producer，这是此版本一个不太为人所知的优势。但和0.8.2引入新API问题类似，不要使用新版本Consumer API，因为Bug超多的，绝对用到你崩溃。即使你反馈问题到社区，社区也不会管的，它会无脑地推荐你升级到新版本再试试，因此千万别用0.9的新版本Consumer API。对于国内一些使用比较老的CDH的创业公司，鉴于其内嵌的就是0.9版本，所以要格外注意这些问题。</p><p>0.10.0.0是里程碑式的大版本，因为该版本<strong>引入了Kafka Streams</strong>。从这个版本起，Kafka正式升级成分布式流处理平台，虽然此时的Kafka Streams还基本不能线上部署使用。0.10大版本包含两个小版本：0.10.1和0.10.2，它们的主要功能变更都是在Kafka Streams组件上。如果你把Kafka用作消息引擎，实际上该版本并没有太多的功能提升。不过在我的印象中自0.10.2.2版本起，新版本Consumer API算是比较稳定了。<strong>如果你依然在使用0.10大版本，我强烈建议你至少升级到0.10.2.2然后使用新版本Consumer API。还有个事情不得不提，0.10.2.2修复了一个可能导致Producer性能降低的Bug。基于性能的缘故你也应该升级到0.10.2.2。</strong></p><p>在2017年6月，社区发布了0.11.0.0版本，引入了两个重量级的功能变更：一个是提供幂等性Producer API以及事务（Transaction） API；另一个是对Kafka消息格式做了重构。</p><p>前一个好像更加吸引眼球一些，毕竟Producer实现幂等性以及支持事务都是Kafka实现流处理结果正确性的基石。没有它们，Kafka Streams在做流处理时无法向批处理那样保证结果的正确性。当然同样是由于刚推出，此时的事务API有一些Bug，不算十分稳定。另外事务API主要是为Kafka Streams应用服务的，实际使用场景中用户利用事务API自行编写程序的成功案例并不多见。</p><p>第二个重磅改进是消息格式的变化。虽然它对用户是透明的，但是它带来的深远影响将一直持续。因为格式变更引起消息格式转换而导致的性能问题在生产环境中屡见不鲜，所以你一定要谨慎对待0.11版本的这个变化。不得不说的是，这个版本中各个大功能组件都变得非常稳定了，国内该版本的用户也很多，应该算是目前最主流的版本之一了。也正是因为这个缘故，社区为0.11大版本特意推出了3个Patch版本，足见它的受欢迎程度。我的建议是，如果你对1.0版本是否适用于线上环境依然感到困惑，那么至少将你的环境升级到0.11.0.3，因为这个版本的消息引擎功能已经非常完善了。</p><p>最后我合并说下1.0和2.0版本吧，因为在我看来这两个大版本主要还是Kafka Streams的各种改进，在消息引擎方面并未引入太多的重大功能特性。Kafka Streams的确在这两个版本有着非常大的变化，也必须承认Kafka Streams目前依然还在积极地发展着。如果你是Kafka Streams的用户，至少选择2.0.0版本吧。</p><p>去年8月国外出了一本书叫Kafka Streams in Action（中文版：《Kafka Streams实战》），它是基于Kafka Streams 1.0版本撰写的。最近我用2.0版本去运行书中的例子，居然很多都已经无法编译了，足见两个版本变化之大。不过如果你在意的依然是消息引擎，那么这两个大版本都是适合于生产环境的。</p><p>最后还有个建议，不论你用的是哪个版本，都请尽量保持服务器端版本和客户端版本一致，否则你将损失很多Kafka为你提供的性能优化收益。</p><h2>小结</h2><p>我希望现在你对如何选择合适的Kafka版本能做到心中有数了。每个Kafka版本都有它恰当的使用场景和独特的优缺点，切记不要一味追求最新版本。事实上我周围的很多工程师都秉承这样的观念：不要成为最新版本的“小白鼠”。了解了各个版本的差异之后，我相信你一定能够根据自己的实际情况做出最正确的选择。</p><p><img src=\"https://static001.geekbang.org/resource/image/9b/d1/9be3f8c5c2930f6482fb43d8bca507d1.jpg?wh=2069*2560\" alt=\"\"></p><h2>开放讨论</h2><p>如何评估Kafka版本升级这件事呢？你和你所在的团队有什么独特的见解？</p><p>欢迎你写下自己的思考或疑问，我们一起讨论 。如果你觉得有所收获，也欢迎把文章分享给你的朋友。</p>","comments":[{"had_liked":false,"id":103794,"user_name":"木卫六","can_delete":false,"product_type":"c1","uid":1199495,"ip_address":"","ucode":"D113DF578C5BF5","user_header":"https://static001.geekbang.org/account/avatar/00/12/4d/87/57236a2d.jpg","comment_is_top":false,"comment_ctime":1560514101,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"499776720437","product_id":100029201,"comment_content":"版本号：<br>大 + 小 + patch<br><br>0.7版本:<br>只有基础消息队列功能，无副本；打死也不使用<br><br>0.8版本:<br>增加了副本机制，新的producer API；建议使用0.8.2.2版本；不建议使用0.8.2.0之后的producer API<br><br>0.9版本:<br>增加权限和认证，新的consumer API，Kafka Connect功能；不建议使用consumer API；<br><br>0.10版本:<br>引入Kafka Streams功能，bug修复；建议版本0.10.2.2；建议使用新版consumer API<br><br>0.11版本:<br>producer API幂等，事物API，消息格式重构；建议版本0.11.0.3；谨慎对待消息格式变化<br><br>1.0和2.0版本:<br>Kafka Streams改进；建议版本2.0；<br><br>江湖经验：不要成为最新版本的小白鼠<br><br>谢谢老师的讲解，收工。","like_count":117,"discussions":[{"author":{"id":2550743,"avatar":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","nickname":"if...else...","note":"","ucode":"D0565908C99695","race_medal":4,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385677,"discussion_content":"很好","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627203715,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103442,"user_name":"小头针","can_delete":false,"product_type":"c1","uid":1422920,"ip_address":"","ucode":"21EB7CDE48EC9B","user_header":"https://static001.geekbang.org/account/avatar/00/15/b6/48/1275e0ce.jpg","comment_is_top":false,"comment_ctime":1560436011,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"422467231019","product_id":100029201,"comment_content":"胡老师讲的这个版本，一下戳到我的痛处。讲一下我在生产环境中遇到的Kafka版本带来的坑。我参与到项目中一年，运行的版本是0.10.0.1，前半年还算稳定，偶尔出现进程假死问题。但是慢慢的生产环境数据量增加，假死频发，导致客户数据丢失，问题很严重。但是一直又没有证据证明这个版本确实存在问题，虽然官网上有提到，但是我们老大的意思还是要找到根本原因。妥所以开始对生产环境的进程进程监控，确实监控出此版本存在线程死锁问题。（妥从一个开发转变为现场运维人员）然后研究官网bug列表，选出0.11.0.3这个版本，至今稳定运行。<br><br>再顺便讲一下选择这门课的原因，虽然项目已经高一段落，但是在整个项目过程中，一直处于哪里不会点哪里的状态，感觉一直还是没有真正的掀开Kafka的面纱。所以想系统的学习一下，听了几节课，之前有些知其然而不知其所以然的内容，似乎开始有点茅塞顿开了。","like_count":99,"discussions":[{"author":{"id":1799983,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/77/2f/6796cde2.jpg","nickname":"大维","note":"","ucode":"3EEEBEB92764AB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297509,"discussion_content":"谢谢分享你的经验。请问假死是什么情况？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596954796,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103591,"user_name":"Chloe","can_delete":false,"product_type":"c1","uid":1004953,"ip_address":"","ucode":"C4848ED5B35752","user_header":"https://static001.geekbang.org/account/avatar/00/0f/55/99/4bdadfd3.jpg","comment_is_top":false,"comment_ctime":1560475521,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"83164854145","product_id":100029201,"comment_content":"只想简单点赞👍，看了标题觉得版本号没有什么好聊了，看到才知道Kaka一路走来充满荆棘啊。感谢感谢！","like_count":20},{"had_liked":false,"id":103101,"user_name":"QQ怪","can_delete":false,"product_type":"c1","uid":1211223,"ip_address":"","ucode":"1A39B8433D9208","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","comment_is_top":false,"comment_ctime":1560385296,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"78869796624","product_id":100029201,"comment_content":"的确在工作中遇到了kafka版本不同导致消息格式不兼容问题，后来服务端和客户端统一版本号才解决，👍👍👍","like_count":19},{"had_liked":false,"id":104476,"user_name":"风中花","can_delete":false,"product_type":"c1","uid":1085237,"ip_address":"","ucode":"067E0A1E116844","user_header":"https://static001.geekbang.org/account/avatar/00/10/8f/35/f1839bb2.jpg","comment_is_top":false,"comment_ctime":1560762627,"is_pvip":false,"replies":[{"id":"37843","content":"嗯嗯，之前在做咨询的时候发现过两个问题：1. 很多人碰到的问题实际上已经是新版本解决的bug；2. 客户端&#47;服务器端版本不一致导致的性能问题<br><br>因此觉得写一篇版本的文章还是有点必要的。","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1560818907,"ip_address":"","comment_id":104476,"utype":1}],"discussion_count":2,"race_medal":0,"score":"61690304771","product_id":100029201,"comment_content":"每次看完就想打卡，以表示我还在坚持学习，如此看来，这个版本真不能忽视","like_count":15,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454284,"discussion_content":"嗯嗯，之前在做咨询的时候发现过两个问题：1. 很多人碰到的问题实际上已经是新版本解决的bug；2. 客户端/服务器端版本不一致导致的性能问题\n\n因此觉得写一篇版本的文章还是有点必要的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560818907,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1799983,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/77/2f/6796cde2.jpg","nickname":"大维","note":"","ucode":"3EEEBEB92764AB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297511,"discussion_content":"从生产一线得来的经验和总结就是让人受益匪浅。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596954963,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103115,"user_name":"开水","can_delete":false,"product_type":"c1","uid":1528555,"ip_address":"","ucode":"651491C38B925B","user_header":"https://static001.geekbang.org/account/avatar/00/17/52/eb/eec719f3.jpg","comment_is_top":false,"comment_ctime":1560386116,"is_pvip":false,"replies":[{"id":"37306","content":"嗯嗯，可以查一下ZooKeeper中是否存在大量session超时的情况。不过还是建议升级吧，听着很像是一个已知的bug。如果暂时不能升级，可以尝试调低replica.fetch.max.bytes的值试试。","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1560387602,"ip_address":"","comment_id":103115,"utype":1}],"discussion_count":1,"race_medal":0,"score":"48805026372","product_id":100029201,"comment_content":"目前用的是hdp2.4.2内嵌版本。应该是apache版本的0.8.2.0。遇到很多问题都很难找到解决方法。比如前几天遇到了replicaFetcherThread oom的问题，网上根本找不到什么正经的解释。但又不能一味的调高jvm参数。老大说现在生产稳定就行了，暂时不要升级了，改代码耗时切面对的问题未知。期待老大能看到这篇文章，升级到0.11.0.3。","like_count":11,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453738,"discussion_content":"嗯嗯，可以查一下ZooKeeper中是否存在大量session超时的情况。不过还是建议升级吧，听着很像是一个已知的bug。如果暂时不能升级，可以尝试调低replica.fetch.max.bytes的值试试。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560387602,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103459,"user_name":"King Yao","can_delete":false,"product_type":"c1","uid":1026946,"ip_address":"","ucode":"B431FD02175B96","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ab/82/b6af9f94.jpg","comment_is_top":false,"comment_ctime":1560440124,"is_pvip":false,"replies":[{"id":"37569","content":"1. Kafka提供了命令行脚本可以执行producer和consumer的性能测试，主要指标还是TPS，延时<br>2. 增加broker很简单，也不会对现有业务有影响。关键是做好迁移计划——比如避开业务高峰时刻，如果迁移对业务影响最小","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1560557990,"ip_address":"","comment_id":103459,"utype":1}],"discussion_count":3,"race_medal":0,"score":"44510113084","product_id":100029201,"comment_content":"我是一名运维，在维护工作环境维护几十台Kafka。最近打算扩容。我有三个问题请教：<br>1.kafka如何做压力测试，它的参考主要指标是什么，比如QPS,最大连接数，延迟等等。<br>2.扩容如何做到平滑扩容，不影响原业务<br>3.kafka有什么好的监控软件。","like_count":11,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453883,"discussion_content":"1. Kafka提供了命令行脚本可以执行producer和consumer的性能测试，主要指标还是TPS，延时\n2. 增加broker很简单，也不会对现有业务有影响。关键是做好迁移计划——比如避开业务高峰时刻，如果迁移对业务影响最小","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560557990,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1132315,"avatar":"https://static001.geekbang.org/account/avatar/00/11/47/1b/64262861.jpg","nickname":"胡小禾","note":"","ucode":"1C23B7492C0C9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":162073,"discussion_content":"增加broker很简单，也不会对现有业务有影响。关键是做好迁移计划——比如避开业务高峰时刻，如果迁移对业务影响最小\n\n只是简单加broker，集群整体的分区分布不均匀，需要手动执行 reassgin版本重新分布分区，从2.4.0 版本开始，使用 admin client 的API也可以做到","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1580956954,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":46788,"discussion_content":"马克","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573208566,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135298,"user_name":"平叔叔","can_delete":false,"product_type":"c1","uid":1477999,"ip_address":"","ucode":"E521DFF752C89B","user_header":"https://static001.geekbang.org/account/avatar/00/16/8d/6f/c21eff20.jpg","comment_is_top":false,"comment_ctime":1569120589,"is_pvip":false,"replies":[{"id":"51950","content":"不矛盾。保持版本一致是任何时候都要尽力保持的。如果你依然使用0.8.x版本，那么最好使用Scala producer，而不是java producer","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1569200667,"ip_address":"","comment_id":135298,"utype":1}],"discussion_count":2,"race_medal":0,"score":"31633891661","product_id":100029201,"comment_content":"不论你用的是哪个版本，都请尽量保持服务器端版本和客户端版本一致  另外即使你升到了 0.8.2.2，也不要使用新版本 Producer api 不是互相矛盾吗？<br><br>","like_count":7,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468131,"discussion_content":"不矛盾。保持版本一致是任何时候都要尽力保持的。如果你依然使用0.8.x版本，那么最好使用Scala producer，而不是java producer","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569200667,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1119133,"avatar":"https://static001.geekbang.org/account/avatar/00/11/13/9d/0ff43179.jpg","nickname":"Andy","note":"","ucode":"4BCA899B8E4E85","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580932,"discussion_content":"这问题问的好，老师回答解决了我的误解，我误解为需要用上一版本。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658406731,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103174,"user_name":"南辕北辙","can_delete":false,"product_type":"c1","uid":1214502,"ip_address":"","ucode":"03EC406AE0D591","user_header":"https://static001.geekbang.org/account/avatar/00/12/88/26/b8c53cee.jpg","comment_is_top":false,"comment_ctime":1560390726,"is_pvip":false,"replies":[{"id":"37386","content":"嗯嗯，请求版本号偏底层的设计了，一般用户用不到。其实客户端和服务器端版本的差异很大一部分也是请求版本号的差异","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1560425032,"ip_address":"","comment_id":103174,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27330194502","product_id":100029201,"comment_content":"记得在刚开始学kafka写demo时，找到了kafka.producer.Producer,以及apache.kafka...KafkaProducer，还以为只是2种不同的实现方式，后来在老师的书上才得知这完全是2个版本。针对今天讨论的版本差异，书上也做了很好了总结。<br>现在看来比较难理解的就是客户端的版本与服务端版本的兼容问题，与之前的各种技术还是有点差异的，并不是一味的较新客户端就完事，kafka中还有一种请求版本号的存在。<br>图片为书中版本对比<br>https:&#47;&#47;raw.githubusercontent.com&#47;DarkerPWQ&#47;picgo&#47;master&#47;img&#47;Kafka%E7%89%88%E6%9C%AC%E5%8F%98%E8%BF%81.png","like_count":6,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453772,"discussion_content":"嗯嗯，请求版本号偏底层的设计了，一般用户用不到。其实客户端和服务器端版本的差异很大一部分也是请求版本号的差异","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560425032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103073,"user_name":"少林寺三毛","can_delete":false,"product_type":"c1","uid":1117623,"ip_address":"","ucode":"90277543E7D2F7","user_header":"https://static001.geekbang.org/account/avatar/00/11/0d/b7/86d4f621.jpg","comment_is_top":false,"comment_ctime":1560381593,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27330185369","product_id":100029201,"comment_content":"👍","like_count":6},{"had_liked":false,"id":103133,"user_name":"莫问流年","can_delete":false,"product_type":"c1","uid":1249663,"ip_address":"","ucode":"23140E031AED4B","user_header":"https://static001.geekbang.org/account/avatar/00/13/11/7f/80d56c1c.jpg","comment_is_top":false,"comment_ctime":1560387044,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23035223524","product_id":100029201,"comment_content":"目前公司kafka都是由运维团队统一维护的，开发人员需要时向运维人员申请kafka服务器端实例。加上Spring Boot项目对Kafka客户端的自动配置机制，导致大部分开发人员对Kfka的版本缺乏足够的了解。这种对开发人员完全透明的方式，虽然一定程度上减轻了开发人员的负担，但是也为开发人员深入理解Kafka设置了一定障碍。作为开发团的一员，我希望结合老师的课程和Kafka在公司项目的实践，更深入的理解Kafka的核心原理和设计思想。","like_count":6},{"had_liked":false,"id":103105,"user_name":"疯琴","can_delete":false,"product_type":"c1","uid":1099379,"ip_address":"","ucode":"82ACAA4A27753D","user_header":"https://static001.geekbang.org/account/avatar/00/10/c6/73/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1560385379,"is_pvip":false,"replies":[{"id":"37301","content":"1. 其实我也没太明白您的意思：） “旧版本的服务端不适用新版本的客户端 所以建议保持一致”，不是挺自然的结论吗。。。。 <br><br>2. 客户端也有版本号，和broker端是一样的。比如Java客户端，如果我们使用Gradle的话，就类似于这样：<br><br>compile group: &#39;org.apache.kafka&#39;, name: &#39;kafka-clients&#39;, version: &#39;2.2.1&#39;<br>","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1560387266,"ip_address":"","comment_id":103105,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23035221859","product_id":100029201,"comment_content":"美音最正的老师没有之一。有两个问题：1 文章前面说某些旧版本的服务端不适用新版本的客户端，文末又说二者应该保持一致，感觉是矛盾的，应该是我没理解清楚，还请说明 2 服务端版本靠编号就可以识别，而客户端是怎么定义新旧版本的呢？谢谢。","like_count":5,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453734,"discussion_content":"1. 其实我也没太明白您的意思：） “旧版本的服务端不适用新版本的客户端 所以建议保持一致”，不是挺自然的结论吗。。。。 \n\n2. 客户端也有版本号，和broker端是一样的。比如Java客户端，如果我们使用Gradle的话，就类似于这样：\n\ncompile group: &amp;#39;org.apache.kafka&amp;#39;, name: &amp;#39;kafka-clients&amp;#39;, version: &amp;#39;2.2.1&amp;#39;\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560387266,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1153078,"avatar":"https://static001.geekbang.org/account/avatar/00/11/98/36/7431e82e.jpg","nickname":"potterhe","note":"","ucode":"18DE6D46BE4216","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342402,"discussion_content":"从对文章的理解：“新版本/旧版本”、“kafka版本”是两个维度的。文章有描述“所谓的老版本是指当你用它们的 API 开发生产者和消费者应用时，你需要指定 ZooKeeper 的地址而非 Broker 的地址”，“因此 0.8.2.0 版本社区引入了新版本 Producer API，即需要指定 Broker 地址的 Producer”。从这些描述来理解，某一个具体的kafka版本(比如0.8.2.2)里会包含“新/旧版本”两种生产者库和消费者库，两者都是可以工作的，由开发者选择使用哪一种。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610674736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109920,"user_name":"木偶人King","can_delete":false,"product_type":"c1","uid":1028805,"ip_address":"","ucode":"0BDCA51E6F0B76","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b2/c5/6ae0be56.jpg","comment_is_top":false,"comment_ctime":1562133963,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14447035851","product_id":100029201,"comment_content":"找到0.10.2.2 和0.11.0.3<br>http:&#47;&#47;mirrors.hust.edu.cn&#47;apache&#47;kafka&#47;","like_count":3},{"had_liked":false,"id":103373,"user_name":"bee","can_delete":false,"product_type":"c1","uid":1181106,"ip_address":"","ucode":"5D9820E5C36F1F","user_header":"https://static001.geekbang.org/account/avatar/00/12/05/b2/2ff81f75.jpg","comment_is_top":false,"comment_ctime":1560422991,"is_pvip":false,"replies":[{"id":"37568","content":"这里的幂等性也没有你所谓的更改资源。当producer发送了一条重复消息时Broker端会拒绝接收，而不是在后面自己做去重","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1560557839,"ip_address":"","comment_id":103373,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14445324879","product_id":100029201,"comment_content":"请问胡老师， RESTful的幂等性是无论调用多少次都不会有不同结果的HTTP 方法。也就是说不会去改变资源。这里的幂等性虽然是确保了单个partition的数据不会重复，但是更改了资源。这样说会有冲突吗？","like_count":3,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453846,"discussion_content":"这里的幂等性也没有你所谓的更改资源。当producer发送了一条重复消息时Broker端会拒绝接收，而不是在后面自己做去重","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560557839,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1008348,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/dc/8876c73b.jpg","nickname":"moooofly","note":"","ucode":"4A20795C281B6F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":57982,"discussion_content":"所以结论是，RESTful 的幂等性对应“每次都执行但不会产生 side effect”；kafka producer 的幂等性对应“重复消息会呗直接拒绝，故无法产生 side effect”；","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574648261,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":178355,"user_name":"火力全开","can_delete":false,"product_type":"c1","uid":1412220,"ip_address":"","ucode":"8CE1733A2F618C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIaTvOKvUt4WnuSjkBp0tjd6O6vvVyw5fcib3UgZibE8tz2ICbTfkwbzs8MHNMJjV6W2mLjywLsvBibg/132","comment_is_top":false,"comment_ctime":1581668470,"is_pvip":false,"replies":[{"id":"69232","content":"兼容性是一方面。因版本差异导致消息格式转换会丧失Zero Copy","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1581728849,"ip_address":"","comment_id":178355,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10171603062","product_id":100029201,"comment_content":"“最后还有个建议，不论你用的是哪个版本，都请尽量保持服务器端版本和客户端版本一致，否则你将损失很多 Kafka 为你提供的性能优化收益。”  ——  KIP-35 - Retrieving protocol version 这个特性不是可以让支持的client适配多个不同版本的broker吗？","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483771,"discussion_content":"兼容性是一方面。因版本差异导致消息格式转换会丧失Zero Copy","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581728849,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1412220,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIaTvOKvUt4WnuSjkBp0tjd6O6vvVyw5fcib3UgZibE8tz2ICbTfkwbzs8MHNMJjV6W2mLjywLsvBibg/132","nickname":"火力全开","note":"","ucode":"8CE1733A2F618C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":183867,"discussion_content":"这里说的版本是v0-v2三个版本吗？那是不是说客户端选择最新的且与服务端保持消息版本一致的版本是最好选择？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582527256,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133186,"user_name":"miwucc","can_delete":false,"product_type":"c1","uid":1326429,"ip_address":"","ucode":"7935BD907119AE","user_header":"https://static001.geekbang.org/account/avatar/00/14/3d/5d/ac666969.jpg","comment_is_top":false,"comment_ctime":1568436955,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10158371547","product_id":100029201,"comment_content":"版本号坑多的很啊，比如心跳是否采用业务线程，是否支持发送者ack机制啊等等，坑了我很多当时。。","like_count":2},{"had_liked":false,"id":106129,"user_name":"jacke","can_delete":false,"product_type":"c1","uid":1161209,"ip_address":"","ucode":"05F355E1FF88C5","user_header":"https://static001.geekbang.org/account/avatar/00/11/b7/f9/a8f26b10.jpg","comment_is_top":false,"comment_ctime":1561184104,"is_pvip":false,"replies":[{"id":"38494","content":"如果使用0.8.2.2，那么使用老版本的consumer和producer，不要使用新版本的客户端。它们此时还有很多bug。我是这个意思。。。。","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1561338798,"ip_address":"","comment_id":106129,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10151118696","product_id":100029201,"comment_content":"胡老师，问下：<br>&quot;如果你不能升级大版本，我也建议你至少要升级到0.8.2.2+这个版本，因为该版本中老版本消费者API是比较稳定的。另外即使你升到了0.8.2.2，也不要使用新版本+Producer+API，此时它的Bug还非常多&quot; == 不是很明白<br>这段话的意思升级到0.8.2.2，使用0.8.2.2的consumer api, 但是不要0.8.2.2的 producer api? 使用0.8大版本号下的producer api 是这个意思吗","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454967,"discussion_content":"如果使用0.8.2.2，那么使用老版本的consumer和producer，不要使用新版本的客户端。它们此时还有很多bug。我是这个意思。。。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561338798,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103138,"user_name":"刘朋","can_delete":false,"product_type":"c1","uid":1075141,"ip_address":"","ucode":"7B7B8E4776C22E","user_header":"https://static001.geekbang.org/account/avatar/00/10/67/c5/63b09189.jpg","comment_is_top":false,"comment_ctime":1560387407,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10150321999","product_id":100029201,"comment_content":"升级Kafka版本,<br>首先，看业务在使用当前Kafka版本是否有问题,是否有性能问题,<br>其次，当前版本特性是否满足业务需求,是否需要新的Kafka特性<br>然后，查看该当前版本是否还在迭代更新,以及迭代周期<br>最后，升级Kafka版开发人员所付出的人工成本和时间成本<br><br>在升级版本时,不是一味的追求最新版本,而是在满足业务需求为前提条件下的还在社区维护更新的稳定版本.","like_count":2},{"had_liked":false,"id":103085,"user_name":"云＆龙","can_delete":false,"product_type":"c1","uid":1363885,"ip_address":"","ucode":"F2F8CBF78AA594","user_header":"https://static001.geekbang.org/account/avatar/00/14/cf/ad/c639270f.jpg","comment_is_top":false,"comment_ctime":1560383503,"is_pvip":false,"replies":[{"id":"37299","content":"如果是新环境，也许可以采用最新版本。但如果是要升级的话就要考虑这些问题了","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1560386504,"ip_address":"","comment_id":103085,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10150318095","product_id":100029201,"comment_content":"既然新版本的老功能更加完善，而老版本又没有新版本的新功能，那为什么不无脑用最新的版本呢？？？反正用老版本也没有新功能。","like_count":3,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453722,"discussion_content":"如果是新环境，也许可以采用最新版本。但如果是要升级的话就要考虑这些问题了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560386504,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":245392,"user_name":"布兰特","can_delete":false,"product_type":"c1","uid":1526892,"ip_address":"","ucode":"EE3316C188EC3C","user_header":"https://static001.geekbang.org/account/avatar/00/17/4c/6c/11fb0f1d.jpg","comment_is_top":false,"comment_ctime":1598930753,"is_pvip":true,"replies":[{"id":"90400","content":"Flink -&gt; Kafka Streams? 一般没有这样的通路吧，另外Kafka Streams也没法到HBase","user_name":"作者回复","user_name_real":"胡夕","uid":"1288090","ctime":1599096712,"ip_address":"","comment_id":245392,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5893898049","product_id":100029201,"comment_content":"胡老师，如果使用kafka 0.11, Flink 1.10版本的前提下， kafka -&gt; Flink -&gt; kafka stream -&gt; HBase 这样的一个数据流向，是不是可以实现 exactly once ??","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504869,"discussion_content":"Flink -&amp;gt; Kafka Streams? 一般没有这样的通路吧，另外Kafka Streams也没法到HBase","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599096712,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":195134,"user_name":"顾君","can_delete":false,"product_type":"c1","uid":1934589,"ip_address":"","ucode":"44DC22D1BACED1","user_header":"","comment_is_top":false,"comment_ctime":1585139620,"is_pvip":false,"replies":[{"id":"74241","content":"嗯嗯，现在版本越来越多了，确实有点不知道怎么选","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1585183727,"ip_address":"","comment_id":195134,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5880106916","product_id":100029201,"comment_content":"以前觉得软件哪个版本不都一样的么？就算选jar包的时候 偶尔也只看看使用数的情况，经过讲解之后，发现版本的选择确实相当重要，不要盲目的去选择版本，盲目的选择只会给以后的开发埋下祸根。","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488985,"discussion_content":"嗯嗯，现在版本越来越多了，确实有点不知道怎么选","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585183727,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":195074,"user_name":"Evan","can_delete":false,"product_type":"c1","uid":1344281,"ip_address":"","ucode":"B877ABD0CF4661","user_header":"https://static001.geekbang.org/account/avatar/00/14/83/19/0a3fe8c1.jpg","comment_is_top":false,"comment_ctime":1585133391,"is_pvip":false,"replies":[{"id":"74243","content":"同意！","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1585183927,"ip_address":"","comment_id":195074,"utype":1}],"discussion_count":1,"race_medal":1,"score":"5880100687","product_id":100029201,"comment_content":"不要成为最新版本的小白鼠， 如果确实想升级，也建议小范围可控制之内再升级。","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488965,"discussion_content":"同意！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585183927,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123264,"user_name":"Geek_sky","can_delete":false,"product_type":"c1","uid":1117551,"ip_address":"","ucode":"F72C02C081790D","user_header":"https://static001.geekbang.org/account/avatar/00/11/0d/6f/6af1d734.jpg","comment_is_top":false,"comment_ctime":1565655978,"is_pvip":false,"replies":[{"id":"45264","content":"嗯嗯，差不多：）","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1565656742,"ip_address":"","comment_id":123264,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5860623274","product_id":100029201,"comment_content":"看到版本号命名这，有一个问题想问一下，小版本号和修订版本号有什么区别呢？小版本号是新增小的功能，而修订版本号是修改发现的bug，是这个区别吗？","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462601,"discussion_content":"嗯嗯，差不多：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565656742,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1547667,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9d/93/4159edaa.jpg","nickname":"朴素柠檬c","note":"","ucode":"2D4CBB70D801B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327449,"discussion_content":"跟产品规划有关，产品说这是个大版本就第一个+1，产品说小版本那就第二个+1，如果上线有bug，那么发一个补丁第三个就+1。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605840008,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":111711,"user_name":"一天到晚游泳的鱼","can_delete":false,"product_type":"c1","uid":1433982,"ip_address":"","ucode":"1F40AF478D85B9","user_header":"","comment_is_top":false,"comment_ctime":1562588372,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5857555668","product_id":100029201,"comment_content":"清晰透彻的讲解","like_count":1},{"had_liked":false,"id":104478,"user_name":"yellowcloud","can_delete":false,"product_type":"c1","uid":1397597,"ip_address":"","ucode":"508967ED4BBEFC","user_header":"https://static001.geekbang.org/account/avatar/00/15/53/5d/46d369e5.jpg","comment_is_top":false,"comment_ctime":1560763225,"is_pvip":false,"replies":[{"id":"37839","content":"不需要啊。可以按照官网的步骤逐步进行rollIng upgrade就可以。我们平时也是这么干的的。当然要和公司内的使用方约定好升级方案和时间，至少避开业务高峰时段吧。","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1560818386,"ip_address":"","comment_id":104478,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5855730521","product_id":100029201,"comment_content":"老师，请教一下，有没有好的kafka版本升级的方案呢，现在kafka已经部署到生产环境了，升级的话，需要直接推倒重做吗？","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454286,"discussion_content":"不需要啊。可以按照官网的步骤逐步进行rollIng upgrade就可以。我们平时也是这么干的的。当然要和公司内的使用方约定好升级方案和时间，至少避开业务高峰时段吧。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560818386,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103799,"user_name":"focusOn","can_delete":false,"product_type":"c1","uid":1000419,"ip_address":"","ucode":"35B80F9F7C316C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/43/e3/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1560514887,"is_pvip":true,"replies":[{"id":"37571","content":"最好多给一些信息，比如OOM是哪部分内存溢出了。另外是否启用了Kafka Security等，还有就是是否频繁地创建KafkaProducer实例？","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1560558344,"ip_address":"","comment_id":103799,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5855482183","product_id":100029201,"comment_content":"使用 kafka 2.0.0版本   在整个应用中只创建了一个 Kafka Producer   , 每次调用 包装过的同步静态方法插入消息，其中插入静态方法调用了 Kafka Producer 的 send  方法，应用 OOM 情况下，Kafka 的 Producer  发送消息的  IoThread 线程被关闭，导致消息不能正常写入，这个是一个 bug 吗？老师？","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454006,"discussion_content":"最好多给一些信息，比如OOM是哪部分内存溢出了。另外是否启用了Kafka Security等，还有就是是否频繁地创建KafkaProducer实例？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560558344,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103692,"user_name":"清晨吼于林","can_delete":false,"product_type":"c1","uid":1112920,"ip_address":"","ucode":"6ADCB9B9FB8330","user_header":"https://static001.geekbang.org/account/avatar/00/10/fb/58/6c422e70.jpg","comment_is_top":false,"comment_ctime":1560491575,"is_pvip":false,"replies":[{"id":"37578","content":"嗯嗯，这就是一个经验值。目前Kafka延时任务的超时多是以秒级，或至少是压秒级别的。如果按照第一层时间轮的间隔驱动会有一点低效。","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1560560028,"ip_address":"","comment_id":103692,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5855458871","product_id":100029201,"comment_content":"老师您好，打扰您了，不过还是想问一下您：<br>kafka的时间轮里面，第一层的时间轮，默认tick一次是1ms，轮长度为20，一个轮子转下来也就20ms，那为什么ExpiredOperationReaper的时间间隔是200ms啊？","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453967,"discussion_content":"嗯嗯，这就是一个经验值。目前Kafka延时任务的超时多是以秒级，或至少是压秒级别的。如果按照第一层时间轮的间隔驱动会有一点低效。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560560028,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103478,"user_name":"燕子上","can_delete":false,"product_type":"c1","uid":1102811,"ip_address":"","ucode":"E82C78BE7D312A","user_header":"https://static001.geekbang.org/account/avatar/00/10/d3/db/5ce5bb26.jpg","comment_is_top":false,"comment_ctime":1560444820,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5855412116","product_id":100029201,"comment_content":"一般的，版本都会选择比最新低一个minor   version的版本。除非团队有人精通最新版(解决了旧版本的哪些痛点，没有增加其他新问题)，才会使用。当然我说的是所有的版本选择。","like_count":1},{"had_liked":false,"id":103222,"user_name":"Geek_89bbab","can_delete":false,"product_type":"c1","uid":1156607,"ip_address":"","ucode":"B3110D5B3C9500","user_header":"https://static001.geekbang.org/account/avatar/00/11/a5/ff/6201122c.jpg","comment_is_top":false,"comment_ctime":1560399032,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5855366328","product_id":100029201,"comment_content":"原来kafka在演进过程中这么坑啊","like_count":1},{"had_liked":false,"id":103144,"user_name":"cricket1981","can_delete":false,"product_type":"c1","uid":1001715,"ip_address":"","ucode":"758262F5958DA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/f3/f1034ffd.jpg","comment_is_top":false,"comment_ctime":1560387798,"is_pvip":false,"replies":[{"id":"37310","content":"我个人觉得目前社区的发展有点缓慢，特别是Confluent公司将很多社区的主力开发人员都招致麾下，着力开发Confluent Kafka。不过我还是希望Kafka未来能向流处理的方向演进：）","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1560388580,"ip_address":"","comment_id":103144,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5855355094","product_id":100029201,"comment_content":"老师觉得kafka发展方向是什么？继续完善流处理还是消息引擎？","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453754,"discussion_content":"我个人觉得目前社区的发展有点缓慢，特别是Confluent公司将很多社区的主力开发人员都招致麾下，着力开发Confluent Kafka。不过我还是希望Kafka未来能向流处理的方向演进：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560388580,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351915,"user_name":"杰杰","can_delete":false,"product_type":"c1","uid":1197829,"ip_address":"","ucode":"9A43E5A9934E8A","user_header":"https://static001.geekbang.org/account/avatar/00/12/47/05/b3ce65fe.jpg","comment_is_top":false,"comment_ctime":1658289328,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1658289328","product_id":100029201,"comment_content":"老师，能不能再介绍一下kafka3.0及之后的版本？","like_count":0},{"had_liked":false,"id":344715,"user_name":"Geek_9b7d86","can_delete":false,"product_type":"c1","uid":2387395,"ip_address":"","ucode":"A1C56CD6859E85","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/z2eIjB1sQW9sliapTAh6BaOMe94N4q8SGdLMWZENdFfQgxiaRIFuSRJBFIHvXdpicV73shAkgynTrm9uib3M7cWibLg/132","comment_is_top":false,"comment_ctime":1651737656,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1651737656","product_id":100029201,"comment_content":"老师能说说 3 版本的变化么","like_count":0},{"had_liked":false,"id":342197,"user_name":"Geek_d68bf9","can_delete":false,"product_type":"c1","uid":2173090,"ip_address":"","ucode":"D88E117B6A18B3","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIstR9CfEytdeJyicODHOe6cYGt4icg8cNVam9mE0s7picUsInZvwvia1hEtKsyHETfic0jrAddjt0wXdA/132","comment_is_top":false,"comment_ctime":1650098398,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1650098398","product_id":100029201,"comment_content":"看下来就是一句话：有bug就升级","like_count":0},{"had_liked":false,"id":339092,"user_name":"nil","can_delete":false,"product_type":"c1","uid":1198808,"ip_address":"","ucode":"52E48324112210","user_header":"https://static001.geekbang.org/account/avatar/00/12/4a/d8/21cf3642.jpg","comment_is_top":false,"comment_ctime":1647914440,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1647914440","product_id":100029201,"comment_content":"我司生产环境用的是 0.10.2.1 ，客户端只用到消息引擎的功能（未用到 Kafka Steams），准备按官网的升级说明更新到 3.1 版本（因为后续想尝试使用 Kafka Steams 功能），我看因为消息格式改动升级到 2.1 以上版本是单向不可逆的，直接升级到最新的合适吗？还有什么需要注意的吗？请老师给些建议。","like_count":0},{"had_liked":false,"id":337654,"user_name":"ABC","can_delete":false,"product_type":"c1","uid":1054958,"ip_address":"","ucode":"7501AD9C0C4A70","user_header":"https://static001.geekbang.org/account/avatar/00/10/18/ee/a1ed60d1.jpg","comment_is_top":false,"comment_ctime":1646958690,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1646958690","product_id":100029201,"comment_content":"现在Kafka到3.x了，但云服务商还停留在2.x，一定程度上延缓了升级新版本的期望。","like_count":0},{"had_liked":false,"id":336306,"user_name":"黑bai照","can_delete":false,"product_type":"c1","uid":2001720,"ip_address":"","ucode":"C61508005933B7","user_header":"https://static001.geekbang.org/account/avatar/00/1e/8b/38/9992f7bb.jpg","comment_is_top":false,"comment_ctime":1646059778,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1646059778","product_id":100029201,"comment_content":"老师咱这个课程还会更新吗","like_count":0},{"had_liked":false,"id":332264,"user_name":"达叔灬","can_delete":false,"product_type":"c1","uid":2404887,"ip_address":"","ucode":"5CCBAF13548F02","user_header":"https://static001.geekbang.org/account/avatar/00/24/b2/17/3161b49c.jpg","comment_is_top":false,"comment_ctime":1643126113,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1643126113","product_id":100029201,"comment_content":"2022年1月25日 最新版本为3.1 😄","like_count":0},{"had_liked":false,"id":326518,"user_name":"Geek_055d77","can_delete":false,"product_type":"c1","uid":2806409,"ip_address":"","ucode":"A376E2271FECE3","user_header":"","comment_is_top":false,"comment_ctime":1639551115,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1639551115","product_id":100029201,"comment_content":"kafka版本:kafka_2.11-0.10.1.0.jar  0.10.1.0<br>zookeeper 版本：3.4.8  <br>升级kafka 版本到0.10.2.2,对应的zookeeper版本需要升级吗","like_count":0},{"had_liked":false,"id":326202,"user_name":"钟洋洋","can_delete":false,"product_type":"c1","uid":2015837,"ip_address":"","ucode":"8D8119921F2A70","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/eLco0zzPFg7oyiaia1uoMJ1gQKB6QVn69Nlvc07UD7ltpIVfsamMR4ExejkYlicxcue6Ft9Mo4Kumb6BUTtvWiaejQ/132","comment_is_top":false,"comment_ctime":1639416316,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1639416316","product_id":100029201,"comment_content":"我们用2.4版的client好像无法消费0.9的kafka","like_count":0},{"had_liked":false,"id":310534,"user_name":"柯察金","can_delete":false,"product_type":"c1","uid":1115149,"ip_address":"","ucode":"F722BF8FCD2C47","user_header":"https://static001.geekbang.org/account/avatar/00/11/04/0d/3dc5683a.jpg","comment_is_top":false,"comment_ctime":1630727641,"is_pvip":false,"replies":[{"id":"112521","content":"通常来说客户端尽量保持和server端一致","user_name":"作者回复","user_name_real":"胡夕","uid":"1288090","ctime":1630809909,"ip_address":"","comment_id":310534,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1630727641","product_id":100029201,"comment_content":"老师只是提到 server 端的版本，那 client 端的版本呢。。。","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526266,"discussion_content":"通常来说客户端尽量保持和server端一致","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630809909,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":310236,"user_name":"shuifa","can_delete":false,"product_type":"c1","uid":1040063,"ip_address":"","ucode":"636733F5C88A7B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/de/bf/4df4224d.jpg","comment_is_top":false,"comment_ctime":1630565608,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1630565608","product_id":100029201,"comment_content":"0.7: 原始版本，绝对不用了<br>0.8: 加入副本机制，完备的分布式高可靠消息队列解决方案<br>0.9: 安全认证&#47;权限；新消费API，引入Kafka Connect组件<br>0.10: 分布式流处理平台，Kafka Streams<br>0.11: 幂等的Producer API，事务API，Kafka消息格式重构<br>1.0与2.0: 主要是对流处理平台的更新优化，如果只是作消息队列的话，用0.11就够了","like_count":0},{"had_liked":false,"id":285840,"user_name":"陌兮","can_delete":false,"product_type":"c1","uid":1415619,"ip_address":"","ucode":"00CE47CAECD5CD","user_header":"https://static001.geekbang.org/account/avatar/00/15/99/c3/e4f408d4.jpg","comment_is_top":false,"comment_ctime":1617028138,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1617028138","product_id":100029201,"comment_content":"感觉老师讲的很有意思，看的真是津津有味。","like_count":0},{"had_liked":false,"id":280624,"user_name":"建华","can_delete":false,"product_type":"c1","uid":2381065,"ip_address":"","ucode":"668977F598DA01","user_header":"https://static001.geekbang.org/account/avatar/00/24/55/09/73f24874.jpg","comment_is_top":false,"comment_ctime":1614295835,"is_pvip":false,"replies":[{"id":"102235","content":"kafka server和client端的版本","user_name":"作者回复","user_name_real":"胡夕","uid":"1288090","ctime":1614822242,"ip_address":"","comment_id":280624,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1614295835","product_id":100029201,"comment_content":"老师好，您说的服务器端版本号与客户端版本号要保持一致，是说kafka集群和开发的应用程序中两者的版本一致吗","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516156,"discussion_content":"kafka server和client端的版本","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614822242,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":262917,"user_name":"Coding小先","can_delete":false,"product_type":"c1","uid":1051563,"ip_address":"","ucode":"965B1CC757E026","user_header":"https://static001.geekbang.org/account/avatar/00/10/0b/ab/0e2857e5.jpg","comment_is_top":false,"comment_ctime":1605883079,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605883079","product_id":100029201,"comment_content":"一般基础组件能不升级就不升级。呼呼呼","like_count":0},{"had_liked":false,"id":232531,"user_name":"桃梦依然","can_delete":false,"product_type":"c1","uid":1932709,"ip_address":"","ucode":"FE376BB7BB785E","user_header":"https://static001.geekbang.org/account/avatar/00/1d/7d/a5/84662e0e.jpg","comment_is_top":false,"comment_ctime":1594029244,"is_pvip":false,"replies":[{"id":"85889","content":"不是，这是CDH的版本","user_name":"作者回复","user_name_real":"胡夕","uid":"1288090","ctime":1594083878,"ip_address":"","comment_id":232531,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1594029244","product_id":100029201,"comment_content":"hi，胡老师，请问一个kafka的版本问题，我cdh集群，下载了一个kafka的parcel包，kafka-4.1.0-1.4.1.0.p0.4。<br>这个kafka是什么版本来的，是1.4.1.0版本吗","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500680,"discussion_content":"不是，这是CDH的版本","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594083878,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228582,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","comment_is_top":false,"comment_ctime":1592744158,"is_pvip":false,"replies":[{"id":"84321","content":"👍","user_name":"作者回复","user_name_real":"胡夕","uid":"1288090","ctime":1592789337,"ip_address":"","comment_id":228582,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1592744158","product_id":100029201,"comment_content":"版本列表整理:<br>0.7 基础消息队列功能<br>0.8 引入副本功能<br>0.8.2.0 引入新版本 Producer API<br>0.9.0.0 增加了基础的安全认证 &#47; 权限功能，同时使用 Java 重写了新版本消费者 API，另外还引入了 Kafka Connect 组件用于实现高性能的数据抽取.<br>0.10.0.0 引入了 Kafka Streams。<br>0.10.1 和 0.10.2  主要功能变更都是在 Kafka Streams 组件上.<br>0.11.0.0 引入了两个重量级的功能变更：<br>一.提供幂等性 Producer API 以及事务（Transaction） API；<br>0.11.0.3  这个版本的消息引擎功能已经非常完善了。<br>二.对 Kafka 消息格式做了重构。<br> 1.0 和 2.0 这两个大版本主要还是 Kafka Streams 的各种改进，在消息引擎方面并未引入太多的重大功能特性。","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499088,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592789337,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215766,"user_name":"James","can_delete":false,"product_type":"c1","uid":1134861,"ip_address":"","ucode":"48B0F2A334D1C1","user_header":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","comment_is_top":false,"comment_ctime":1589099849,"is_pvip":false,"replies":[{"id":"79865","content":"嗯，其实推荐客户端至少使用0.11版本，之前的版本bug比较多","user_name":"作者回复","user_name_real":"胡夕","uid":"1288090","ctime":1589120527,"ip_address":"","comment_id":215766,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1589099849","product_id":100029201,"comment_content":"请问下老师:<br>客户端服务端保持一致<br>服务端kafka为0.9版本,又因为0.8producer API不稳定,0.9consumer API不稳定;<br>那是不是客户端得使用0.10版本得api是吧?","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494548,"discussion_content":"嗯，其实推荐客户端至少使用0.11版本，之前的版本bug比较多","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589120527,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1547667,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9d/93/4159edaa.jpg","nickname":"朴素柠檬c","note":"","ucode":"2D4CBB70D801B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327450,"discussion_content":"0.11的幂等和事务他不香吗！ 省去程序处理了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605840330,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215686,"user_name":"柳晓峰","can_delete":false,"product_type":"c1","uid":1104217,"ip_address":"","ucode":"F148C6C0957CF5","user_header":"https://static001.geekbang.org/account/avatar/00/10/d9/59/54692189.jpg","comment_is_top":false,"comment_ctime":1589078149,"is_pvip":false,"replies":[{"id":"79866","content":"是的~<br>","user_name":"作者回复","user_name_real":"胡夕","uid":"1288090","ctime":1589120679,"ip_address":"","comment_id":215686,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1589078149","product_id":100029201,"comment_content":"如果是消息队列服务 就用0.11.0.3<br>如果是流处理 至少使用kafka 2.0这个版本<br>客户端和服务端统一版本号，规避格式不统一，不好处理等问题","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494528,"discussion_content":"是的~\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589120679,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159406,"user_name":"高志强","can_delete":false,"product_type":"c1","uid":1276563,"ip_address":"","ucode":"68737002043752","user_header":"https://static001.geekbang.org/account/avatar/00/13/7a/93/c9302518.jpg","comment_is_top":false,"comment_ctime":1575616276,"is_pvip":false,"replies":[{"id":"61049","content":"目前使用clients端API无法获取。。。。","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1575851905,"ip_address":"","comment_id":159406,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1575616276","product_id":100029201,"comment_content":"老师kafka的版本号，可以用程序代码输出么？怎么写的呢","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477041,"discussion_content":"目前使用clients端API无法获取。。。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575851905,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144645,"user_name":"Pixar","can_delete":false,"product_type":"c1","uid":1197659,"ip_address":"","ucode":"E653387BA8EA16","user_header":"https://static001.geekbang.org/account/avatar/00/12/46/5b/07858c33.jpg","comment_is_top":false,"comment_ctime":1571989428,"is_pvip":false,"replies":[{"id":"55953","content":"golang的客户端到底使用的是新版本consumer还是老版本的consumer需要去到对应的官网上确定：）","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1572224819,"ip_address":"","comment_id":144645,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571989428","product_id":100029201,"comment_content":"&quot;如果你依然在使用 0.10 大版本，我强烈建议你至少升级到 0.10.2.2 然后使用新版本 Consumer API。&quot;, 关于这句话有点疑问，如何使用新版本 consumer api呢？ 比如 golang版的kafka 客户端库， 是我只需要更改一下调用方式就好了？ 还是说我需要 更新这个golang 客户端库使其里面支持 新版consumer api呢？","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472050,"discussion_content":"golang的客户端到底使用的是新版本consumer还是老版本的consumer需要去到对应的官网上确定：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572224819,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123296,"user_name":"尘枫","can_delete":false,"product_type":"c1","uid":1093372,"ip_address":"","ucode":"79698689EDD97A","user_header":"https://static001.geekbang.org/account/avatar/00/10/ae/fc/d647a3e4.jpg","comment_is_top":false,"comment_ctime":1565657533,"is_pvip":false,"replies":[{"id":"45326","content":"应该还是版本兼容的问题。主要看一下客户端版本和Broker端版本吧。Broker版本最好是0.10.2之后的","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1565742451,"ip_address":"","comment_id":123296,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565657533","product_id":100029201,"comment_content":"胡老师，我们最近在使用命令行查询消费组消费信息时，报Scheme 异常，说是SchemaException Error read field &#39;user_data&#39;怀疑是版本兼容性问题，请问胡老师这个怎样排查， 有验证方法或者思路吗？","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462615,"discussion_content":"应该还是版本兼容的问题。主要看一下客户端版本和Broker端版本吧。Broker版本最好是0.10.2之后的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565742451,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122811,"user_name":"钱","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1565532042,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565532042","product_id":100029201,"comment_content":" 课前思考<br>但凡是软件几乎必有各种版本，通常高版本兼容低版本，并且高版本会提供更多更好的特性或者解决之前版本的问题，kafka应该也类似，不过各个版本的特点我是一概不知且听老师分享吧😄<br>课后思考<br>果然如此，每个版本都有其特点，使用原则如下<br>1：不建议使用最新版本，因为不稳定，有坑<br>2：客户端和服务器端版本最好一致<br>3：根据自身的情况选择合适的稳定版本——如果是新应用，可使用最新的稳定版。如果是升级，这需要谨慎对待，可升级下小版本至稳定版的<br>4：根据版本发布历史，应该可知各个版本的情况","like_count":0},{"had_liked":false,"id":109914,"user_name":"木偶人King","can_delete":false,"product_type":"c1","uid":1028805,"ip_address":"","ucode":"0BDCA51E6F0B76","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b2/c5/6ae0be56.jpg","comment_is_top":false,"comment_ctime":1562132857,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562132857","product_id":100029201,"comment_content":"老师有没有比较全的个版本的下载地址。官网上旧版本基本上都无法下载了。","like_count":0},{"had_liked":false,"id":104068,"user_name":"mayunyong","can_delete":false,"product_type":"c1","uid":1063494,"ip_address":"","ucode":"42E63F5630F8CD","user_header":"https://static001.geekbang.org/account/avatar/00/10/3a/46/82ce02f1.jpg","comment_is_top":false,"comment_ctime":1560609936,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560609936","product_id":100029201,"comment_content":"棒","like_count":0},{"had_liked":false,"id":103924,"user_name":"focusOn","can_delete":false,"product_type":"c1","uid":1000419,"ip_address":"","ucode":"35B80F9F7C316C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/43/e3/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1560566628,"is_pvip":true,"replies":[{"id":"37604","content":"哦哦，那可以从优化业务代码入手：）","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1560572173,"ip_address":"","comment_id":103924,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1560566628","product_id":100029201,"comment_content":"未开启Kafka  Security ，  全局一个 Producer实例， OOM 是业务代码导致非 Kafka 插入消息导致 ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454058,"discussion_content":"哦哦，那可以从优化业务代码入手：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560572173,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103922,"user_name":"focusOn","can_delete":false,"product_type":"c1","uid":1000419,"ip_address":"","ucode":"35B80F9F7C316C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/43/e3/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1560566498,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1560566498","product_id":100029201,"comment_content":"应用中只存在一个 Kafka  Producer","like_count":0},{"had_liked":false,"id":103392,"user_name":"闭门造车","can_delete":false,"product_type":"c1","uid":1125278,"ip_address":"","ucode":"8EBB8083D2A6CB","user_header":"https://static001.geekbang.org/account/avatar/00/11/2b/9e/821c75f9.jpg","comment_is_top":false,"comment_ctime":1560428031,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560428031","product_id":100029201,"comment_content":"升级的话考虑的无非就是新版本的稳定性比线上的版本好或者有需要的新功能，在升级前需要进行测试，评估风险，保证线上稳定这是关键","like_count":0},{"had_liked":false,"id":103186,"user_name":"永光","can_delete":false,"product_type":"c1","uid":1102702,"ip_address":"","ucode":"0C54531ABED1B0","user_header":"https://static001.geekbang.org/account/avatar/00/10/d3/6e/281b85aa.jpg","comment_is_top":false,"comment_ctime":1560393156,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560393156","product_id":100029201,"comment_content":"我理解，对于学习或者新环境使用直接用最新就好了（用于生产就用最新的稳定版本），至于生产上已经再用的，升级到对应大版本的最新Patch版本就好了。貌似对于所有软件使用都是这样，哈哈哈","like_count":0},{"had_liked":false,"id":103163,"user_name":"黑色","can_delete":false,"product_type":"c1","uid":1502459,"ip_address":"","ucode":"91FBE4E0E64C2C","user_header":"https://static001.geekbang.org/account/avatar/00/16/ec/fb/019b8b31.jpg","comment_is_top":false,"comment_ctime":1560389210,"is_pvip":false,"replies":[{"id":"37322","content":"是的，而且是相差很大的版本。建议关注broker端CPU使用率：）","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1560390436,"ip_address":"","comment_id":103163,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1560389210","product_id":100029201,"comment_content":"我们目前用的是kafka1.0x, 用的spark版本号是2.1.3,spark-kafka依赖jar目前最新的是0.10.x,这样是不是服务端与客户端的版本不一样了？","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453764,"discussion_content":"是的，而且是相差很大的版本。建议关注broker端CPU使用率：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560390436,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103157,"user_name":"jeffery","can_delete":false,"product_type":"c1","uid":1219972,"ip_address":"","ucode":"35E2DAA386FB86","user_header":"https://static001.geekbang.org/account/avatar/00/12/9d/84/171b2221.jpg","comment_is_top":false,"comment_ctime":1560388743,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560388743","product_id":100029201,"comment_content":"选择新版本2.0功能强大优化更好、社区讨论活跃","like_count":0},{"had_liked":false,"id":103146,"user_name":"cricket1981","can_delete":false,"product_type":"c1","uid":1001715,"ip_address":"","ucode":"758262F5958DA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/f3/f1034ffd.jpg","comment_is_top":false,"comment_ctime":1560387898,"is_pvip":false,"replies":[{"id":"37311","content":"如果使用的是Confluent，那么建议遵循Confluent文档来查看具体的升级建议，感觉那是另外一套玩法了：）","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1560388649,"ip_address":"","comment_id":103146,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1560387898","product_id":100029201,"comment_content":"我们用的是confluent 5.0，使用了ksql，若要升级大版本的话要注意哪些？","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453756,"discussion_content":"如果使用的是Confluent，那么建议遵循Confluent文档来查看具体的升级建议，感觉那是另外一套玩法了：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560388649,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103121,"user_name":"秋","can_delete":false,"product_type":"c1","uid":1398322,"ip_address":"","ucode":"68A2544787E339","user_header":"https://static001.geekbang.org/account/avatar/00/15/56/32/c8b3256c.jpg","comment_is_top":false,"comment_ctime":1560386564,"is_pvip":false,"replies":[{"id":"37307","content":"您指的消息回放机制是什么意思？重新读取之前已消费的消息吗？版本的选择目前没有涉及这么细粒度的场景，还主要集中在新旧版本的讨论上。","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1560387666,"ip_address":"","comment_id":103121,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1560386564","product_id":100029201,"comment_content":"对于consumer的消息回放机制，有不同版本选择推荐么？","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453741,"discussion_content":"您指的消息回放机制是什么意思？重新读取之前已消费的消息吗？版本的选择目前没有涉及这么细粒度的场景，还主要集中在新旧版本的讨论上。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560387666,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103100,"user_name":"小猪","can_delete":false,"product_type":"c1","uid":1201662,"ip_address":"","ucode":"EAD6A4876CEF3B","user_header":"https://static001.geekbang.org/account/avatar/00/12/55/fe/ab541300.jpg","comment_is_top":false,"comment_ctime":1560385283,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560385283","product_id":100029201,"comment_content":"我们小团队的开发一般倾向于使用老版本或者使用量大的版本！因为大多数人不了解kafka，只是能够使用而已！希望通过学习能够把知识用于实践","like_count":0},{"had_liked":false,"id":103093,"user_name":"化作春泥","can_delete":false,"product_type":"c1","uid":1193641,"ip_address":"","ucode":"9320EAA8F33E6B","user_header":"https://static001.geekbang.org/account/avatar/00/12/36/a9/2437b1d9.jpg","comment_is_top":false,"comment_ctime":1560384130,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560384130","product_id":100029201,"comment_content":"现在终于了解这些版本的差异了！","like_count":0}]}