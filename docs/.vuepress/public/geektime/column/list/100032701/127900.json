{"id":127900,"title":"12 | è¿æ¥æ— æ•ˆï¼šä½¿ç”¨Keep-Aliveè¿˜æ˜¯åº”ç”¨å¿ƒè·³æ¥æ£€æµ‹ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ç››å»¶æ•ï¼Œè¿™é‡Œæ˜¯ç½‘ç»œç¼–ç¨‹å®æˆ˜ç¬¬12è®²ï¼Œæ¬¢è¿å›æ¥ã€‚</p><p>ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬è®²åˆ°äº†å¦‚ä½•ä½¿ç”¨closeå’Œshutdownæ¥å®Œæˆè¿æ¥çš„å…³é—­ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šä¼˜é€‰shutdownæ¥å®Œæˆå¯¹è¿æ¥ä¸€ä¸ªæ–¹å‘çš„å…³é—­ï¼Œå¾…å¯¹ç«¯å¤„ç†å®Œä¹‹åï¼Œå†å®Œæˆå¦å¤–ä¸€ä¸ªæ–¹å‘çš„å…³é—­ã€‚</p><p>åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œè¿æ¥çš„ä¸€ç«¯éœ€è¦ä¸€ç›´æ„ŸçŸ¥è¿æ¥çš„çŠ¶æ€ï¼Œå¦‚æœè¿æ¥æ— æ•ˆäº†ï¼Œåº”ç”¨ç¨‹åºå¯èƒ½éœ€è¦æŠ¥é”™ï¼Œæˆ–è€…é‡æ–°å‘èµ·è¿æ¥ç­‰ã€‚</p><p>åœ¨è¿™ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†å¸¦ä½ ä½“éªŒä¸€ä¸‹å¯¹è¿æ¥çŠ¶æ€çš„æ£€æµ‹ï¼Œå¹¶æä¾›æ£€æµ‹è¿æ¥çŠ¶æ€çš„æœ€ä½³å®è·µã€‚</p><h2>ä»ä¸€ä¸ªä¾‹å­å¼€å§‹</h2><p>è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªä¾‹å­å¼€å§‹ä»Šå¤©çš„è¯é¢˜ã€‚</p><p>æˆ‘ä¹‹å‰åšè¿‡ä¸€ä¸ªåŸºäºNATSæ¶ˆæ¯ç³»ç»Ÿçš„é¡¹ç›®ï¼Œå¤šä¸ªæ¶ˆæ¯çš„æä¾›è€… ï¼ˆpubï¼‰å’Œè®¢é˜…è€…ï¼ˆsubï¼‰éƒ½è¿åˆ°NATSæ¶ˆæ¯ç³»ç»Ÿï¼Œé€šè¿‡è¿™ä¸ªç³»ç»Ÿæ¥å®Œæˆæ¶ˆæ¯çš„æŠ•é€’å’Œè®¢é˜…å¤„ç†ã€‚</p><p>çªç„¶æœ‰ä¸€å¤©ï¼Œçº¿ä¸ŠæŠ¥äº†ä¸€ä¸ªæ•…éšœï¼Œä¸€ä¸ªæµç¨‹ä¸èƒ½æ­£å¸¸å¤„ç†ã€‚ç»æ’æŸ¥ï¼Œå‘ç°æ¶ˆæ¯æ­£ç¡®åœ°æŠ•é€’åˆ°äº†NATSæœåŠ¡ç«¯ï¼Œä½†æ˜¯æ¶ˆæ¯è®¢é˜…è€…æ²¡æœ‰æ”¶åˆ°è¯¥æ¶ˆæ¯ï¼Œä¹Ÿæ²¡èƒ½åšå‡ºå¤„ç†ï¼Œå¯¼è‡´æµç¨‹æ²¡èƒ½è¿›è¡Œä¸‹å»ã€‚</p><p>é€šè¿‡è§‚å¯Ÿæ¶ˆæ¯è®¢é˜…è€…åå‘ç°ï¼Œæ¶ˆæ¯è®¢é˜…è€…åˆ°NATSæœåŠ¡ç«¯çš„è¿æ¥è™½ç„¶æ˜¾ç¤ºæ˜¯â€œæ­£å¸¸â€çš„ï¼Œä½†å®é™…ä¸Šï¼Œè¿™ä¸ªè¿æ¥å·²ç»æ˜¯æ— æ•ˆçš„äº†ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºNATSæœåŠ¡å™¨å´©æºƒè¿‡ï¼ŒNATSæœåŠ¡å™¨å’Œæ¶ˆæ¯è®¢é˜…è€…ä¹‹é—´çš„è¿æ¥ä¸­æ–­FINåŒ…ï¼Œç”±äºå¼‚å¸¸æƒ…å†µï¼Œæ²¡èƒ½å¤Ÿæ­£å¸¸åˆ°è¾¾æ¶ˆæ¯è®¢é˜…è€…ï¼Œè¿™æ ·é€ æˆçš„ç»“æœå°±æ˜¯æ¶ˆæ¯è®¢é˜…è€…ä¸€ç›´ç»´æŠ¤ç€ä¸€ä¸ªâ€œè¿‡æ—¶çš„â€è¿æ¥ï¼Œä¸ä¼šæ”¶åˆ°NATSæœåŠ¡å™¨å‘é€æ¥çš„æ¶ˆæ¯ã€‚</p><!-- [[[read_end]]] --><p>è¿™ä¸ªæ•…éšœçš„æ ¹æœ¬åŸå› åœ¨äºï¼Œä½œä¸ºNATSæœåŠ¡å™¨çš„å®¢æˆ·ç«¯ï¼Œæ¶ˆæ¯è®¢é˜…è€…æ²¡æœ‰åŠæ—¶å¯¹è¿æ¥çš„æœ‰æ•ˆæ€§è¿›è¡Œæ£€æµ‹ï¼Œè¿™æ ·å°±é€ æˆäº†é—®é¢˜ã€‚</p><p>ä¿æŒå¯¹è¿æ¥æœ‰æ•ˆæ€§çš„æ£€æµ‹ï¼Œæ˜¯æˆ‘ä»¬åœ¨å®æˆ˜ä¸­å¿…é¡»è¦æ³¨æ„çš„ä¸€ä¸ªç‚¹ã€‚</p><h2>TCP Keep-Aliveé€‰é¡¹</h2><p>å¾ˆå¤šåˆšæ¥è§¦TCPç¼–ç¨‹çš„äººä¼šæƒŠè®¶åœ°å‘ç°ï¼Œåœ¨æ²¡æœ‰æ•°æ®è¯»å†™çš„â€œé™é»˜â€çš„è¿æ¥ä¸Šï¼Œæ˜¯æ²¡æœ‰åŠæ³•å‘ç°TCPè¿æ¥æ˜¯æœ‰æ•ˆè¿˜æ˜¯æ— æ•ˆçš„ã€‚æ¯”å¦‚å®¢æˆ·ç«¯çªç„¶å´©æºƒï¼ŒæœåŠ¡å™¨ç«¯å¯èƒ½åœ¨å‡ å¤©å†…éƒ½ç»´æŠ¤ç€ä¸€ä¸ªæ— ç”¨çš„ TCPè¿æ¥ã€‚å‰é¢æåˆ°çš„ä¾‹å­å°±æ˜¯è¿™æ ·çš„ä¸€ä¸ªåœºæ™¯ã€‚</p><p>é‚£ä¹ˆæœ‰æ²¡æœ‰åŠæ³•å¼€å¯ç±»ä¼¼çš„â€œè½®è¯¢â€æœºåˆ¶ï¼Œè®©TCPå‘Šè¯‰æˆ‘ä»¬ï¼Œè¿æ¥æ˜¯ä¸æ˜¯â€œæ´»ç€â€çš„å‘¢ï¼Ÿ</p><p>è¿™å°±æ˜¯TCPä¿æŒæ´»è·ƒæœºåˆ¶æ‰€è¦è§£å†³çš„é—®é¢˜ã€‚å®é™…ä¸Šï¼ŒTCPæœ‰ä¸€ä¸ªä¿æŒæ´»è·ƒçš„æœºåˆ¶å«åšKeep-Aliveã€‚</p><p>è¿™ä¸ªæœºåˆ¶çš„åŸç†æ˜¯è¿™æ ·çš„ï¼š</p><p>å®šä¹‰ä¸€ä¸ªæ—¶é—´æ®µï¼Œåœ¨è¿™ä¸ªæ—¶é—´æ®µå†…ï¼Œå¦‚æœæ²¡æœ‰ä»»ä½•è¿æ¥ç›¸å…³çš„æ´»åŠ¨ï¼ŒTCPä¿æ´»æœºåˆ¶ä¼šå¼€å§‹ä½œç”¨ï¼Œæ¯éš”ä¸€ä¸ªæ—¶é—´é—´éš”ï¼Œå‘é€ä¸€ä¸ªæ¢æµ‹æŠ¥æ–‡ï¼Œè¯¥æ¢æµ‹æŠ¥æ–‡åŒ…å«çš„æ•°æ®éå¸¸å°‘ï¼Œå¦‚æœè¿ç»­å‡ ä¸ªæ¢æµ‹æŠ¥æ–‡éƒ½æ²¡æœ‰å¾—åˆ°å“åº”ï¼Œåˆ™è®¤ä¸ºå½“å‰çš„TCPè¿æ¥å·²ç»æ­»äº¡ï¼Œç³»ç»Ÿå†…æ ¸å°†é”™è¯¯ä¿¡æ¯é€šçŸ¥ç»™ä¸Šå±‚åº”ç”¨ç¨‹åºã€‚</p><p>ä¸Šè¿°çš„å¯å®šä¹‰å˜é‡ï¼Œåˆ†åˆ«è¢«ç§°ä¸ºä¿æ´»æ—¶é—´ã€ä¿æ´»æ—¶é—´é—´éš”å’Œä¿æ´»æ¢æµ‹æ¬¡æ•°ã€‚åœ¨Linuxç³»ç»Ÿä¸­ï¼Œè¿™äº›å˜é‡åˆ†åˆ«å¯¹åº”sysctlå˜é‡<code>net.ipv4.tcp_keepalive_time</code>ã€<code>net.ipv4.tcp_keepalive_intvl</code>ã€ <code>net.ipv4.tcp_keepalve_probes</code>ï¼Œé»˜è®¤è®¾ç½®æ˜¯7200ç§’ï¼ˆ2å°æ—¶ï¼‰ã€75ç§’å’Œ9æ¬¡æ¢æµ‹ã€‚</p><p>å¦‚æœå¼€å¯äº†TCPä¿æ´»ï¼Œéœ€è¦è€ƒè™‘ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p><p>ç¬¬ä¸€ç§ï¼Œå¯¹ç«¯ç¨‹åºæ˜¯æ­£å¸¸å·¥ä½œçš„ã€‚å½“TCPä¿æ´»çš„æ¢æµ‹æŠ¥æ–‡å‘é€ç»™å¯¹ç«¯, å¯¹ç«¯ä¼šæ­£å¸¸å“åº”ï¼Œè¿™æ ·TCPä¿æ´»æ—¶é—´ä¼šè¢«é‡ç½®ï¼Œç­‰å¾…ä¸‹ä¸€ä¸ªTCPä¿æ´»æ—¶é—´çš„åˆ°æ¥ã€‚</p><p>ç¬¬äºŒç§ï¼Œå¯¹ç«¯ç¨‹åºå´©æºƒå¹¶é‡å¯ã€‚å½“TCPä¿æ´»çš„æ¢æµ‹æŠ¥æ–‡å‘é€ç»™å¯¹ç«¯åï¼Œå¯¹ç«¯æ˜¯å¯ä»¥å“åº”çš„ï¼Œä½†ç”±äºæ²¡æœ‰è¯¥è¿æ¥çš„æœ‰æ•ˆä¿¡æ¯ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªRSTæŠ¥æ–‡ï¼Œè¿™æ ·å¾ˆå¿«å°±ä¼šå‘ç°TCPè¿æ¥å·²ç»è¢«é‡ç½®ã€‚</p><p>ç¬¬ä¸‰ç§ï¼Œæ˜¯å¯¹ç«¯ç¨‹åºå´©æºƒï¼Œæˆ–å¯¹ç«¯ç”±äºå…¶ä»–åŸå› å¯¼è‡´æŠ¥æ–‡ä¸å¯è¾¾ã€‚å½“TCPä¿æ´»çš„æ¢æµ‹æŠ¥æ–‡å‘é€ç»™å¯¹ç«¯åï¼ŒçŸ³æ²‰å¤§æµ·ï¼Œæ²¡æœ‰å“åº”ï¼Œè¿ç»­å‡ æ¬¡ï¼Œè¾¾åˆ°ä¿æ´»æ¢æµ‹æ¬¡æ•°åï¼ŒTCPä¼šæŠ¥å‘Šè¯¥TCPè¿æ¥å·²ç»æ­»äº¡ã€‚</p><p>TCPä¿æ´»æœºåˆ¶é»˜è®¤æ˜¯å…³é—­çš„ï¼Œå½“æˆ‘ä»¬é€‰æ‹©æ‰“å¼€æ—¶ï¼Œå¯ä»¥åˆ†åˆ«åœ¨è¿æ¥çš„ä¸¤ä¸ªæ–¹å‘ä¸Šå¼€å¯ï¼Œä¹Ÿå¯ä»¥å•ç‹¬åœ¨ä¸€ä¸ªæ–¹å‘ä¸Šå¼€å¯ã€‚å¦‚æœå¼€å¯æœåŠ¡å™¨ç«¯åˆ°å®¢æˆ·ç«¯çš„æ£€æµ‹ï¼Œå°±å¯ä»¥åœ¨å®¢æˆ·ç«¯éæ­£å¸¸æ–­è¿çš„æƒ…å†µä¸‹æ¸…é™¤åœ¨æœåŠ¡å™¨ç«¯ä¿ç•™çš„â€œè„æ•°æ®â€ï¼›è€Œå¼€å¯å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨ç«¯çš„æ£€æµ‹ï¼Œå°±å¯ä»¥åœ¨æœåŠ¡å™¨æ— å“åº”çš„æƒ…å†µä¸‹ï¼Œé‡æ–°å‘èµ·è¿æ¥ã€‚</p><p>ä¸ºä»€ä¹ˆTCPä¸æä¾›ä¸€ä¸ªé¢‘ç‡å¾ˆå¥½çš„ä¿æ´»æœºåˆ¶å‘¢ï¼Ÿæˆ‘çš„ç†è§£æ˜¯æ—©æœŸçš„ç½‘ç»œå¸¦å®½éå¸¸æœ‰é™ï¼Œå¦‚æœæä¾›ä¸€ä¸ªé¢‘ç‡å¾ˆé«˜çš„ä¿æ´»æœºåˆ¶ï¼Œå¯¹æœ‰é™çš„å¸¦å®½æ˜¯ä¸€ä¸ªæ¯”è¾ƒä¸¥é‡çš„æµªè´¹ã€‚</p><h2>åº”ç”¨å±‚æ¢æ´»</h2><p>å¦‚æœä½¿ç”¨TCPè‡ªèº«çš„keep-Aliveæœºåˆ¶ï¼Œåœ¨Linuxç³»ç»Ÿä¸­ï¼Œæœ€å°‘éœ€è¦ç»è¿‡2å°æ—¶11åˆ†15ç§’æ‰å¯ä»¥å‘ç°ä¸€ä¸ªâ€œæ­»äº¡â€è¿æ¥ã€‚è¿™ä¸ªæ—¶é—´æ˜¯æ€ä¹ˆè®¡ç®—å‡ºæ¥çš„å‘¢ï¼Ÿå…¶å®æ˜¯é€šè¿‡2å°æ—¶ï¼ŒåŠ ä¸Š75ç§’ä¹˜ä»¥9çš„æ€»å’Œã€‚å®é™…ä¸Šï¼Œå¯¹å¾ˆå¤šå¯¹æ—¶å»¶è¦æ±‚æ•æ„Ÿçš„ç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªæ—¶é—´é—´éš”æ˜¯ä¸å¯æ¥å—çš„ã€‚</p><p>æ‰€ä»¥ï¼Œå¿…é¡»åœ¨åº”ç”¨ç¨‹åºè¿™ä¸€å±‚æ¥å¯»æ‰¾æ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨åº”ç”¨ç¨‹åºä¸­æ¨¡æ‹ŸTCP Keep-Aliveæœºåˆ¶ï¼Œæ¥å®Œæˆåœ¨åº”ç”¨å±‚çš„è¿æ¥æ¢æ´»ã€‚</p><p>æˆ‘ä»¬å¯ä»¥è®¾è®¡ä¸€ä¸ªPING-PONGçš„æœºåˆ¶ï¼Œéœ€è¦ä¿æ´»çš„ä¸€æ–¹ï¼Œæ¯”å¦‚å®¢æˆ·ç«¯ï¼Œåœ¨ä¿æ´»æ—¶é—´è¾¾åˆ°åï¼Œå‘èµ·å¯¹è¿æ¥çš„PINGæ“ä½œï¼Œå¦‚æœæœåŠ¡å™¨ç«¯å¯¹PINGæ“ä½œæœ‰å›åº”ï¼Œåˆ™é‡æ–°è®¾ç½®ä¿æ´»æ—¶é—´ï¼Œå¦åˆ™å¯¹æ¢æµ‹æ¬¡æ•°è¿›è¡Œè®¡æ•°ï¼Œå¦‚æœæœ€ç»ˆæ¢æµ‹æ¬¡æ•°è¾¾åˆ°äº†ä¿æ´»æ¢æµ‹æ¬¡æ•°é¢„å…ˆè®¾ç½®çš„å€¼ä¹‹åï¼Œåˆ™è®¤ä¸ºè¿æ¥å·²ç»æ— æ•ˆã€‚</p><p>è¿™é‡Œæœ‰ä¸¤ä¸ªæ¯”è¾ƒå…³é”®çš„ç‚¹ï¼š</p><p>ç¬¬ä¸€ä¸ªæ˜¯éœ€è¦ä½¿ç”¨å®šæ—¶å™¨ï¼Œè¿™å¯ä»¥é€šè¿‡ä½¿ç”¨I/Oå¤ç”¨è‡ªèº«çš„æœºåˆ¶æ¥å®ç°ï¼›ç¬¬äºŒä¸ªæ˜¯éœ€è¦è®¾è®¡ä¸€ä¸ªPING-PONGçš„åè®®ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å°è¯•æ¥å®Œæˆè¿™æ ·çš„ä¸€ä¸ªè®¾è®¡ã€‚</p><h3>æ¶ˆæ¯æ ¼å¼è®¾è®¡</h3><p>æˆ‘ä»¬çš„ç¨‹åºæ˜¯å®¢æˆ·ç«¯æ¥å‘èµ·ä¿æ´»ï¼Œä¸ºæ­¤å®šä¹‰äº†ä¸€ä¸ªæ¶ˆæ¯å¯¹è±¡ã€‚ä½ å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ¶ˆæ¯å¯¹è±¡ï¼Œè¿™ä¸ªæ¶ˆæ¯å¯¹è±¡æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œå‰4ä¸ªå­—èŠ‚æ ‡è¯†äº†æ¶ˆæ¯ç±»å‹ï¼Œä¸ºäº†ç®€å•ï¼Œè¿™é‡Œè®¾è®¡äº†<code>MSG_PING</code>ã€<code>MSG_PONG</code>ã€<code>MSG_TYPE 1</code>å’Œ<code>MSG_TYPE 2</code>å››ç§æ¶ˆæ¯ç±»å‹ã€‚</p><pre><code>typedef struct {\n    u_int32_t type;\n    char data[1024];\n} messageObject;\n\n#define MSG_PING          1\n#define MSG_PONG          2\n#define MSG_TYPE1        11\n#define MSG_TYPE2        21\n</code></pre><h3>å®¢æˆ·ç«¯ç¨‹åºè®¾è®¡</h3><p>å®¢æˆ·ç«¯å®Œå…¨æ¨¡æ‹ŸTCP Keep-Aliveçš„æœºåˆ¶ï¼Œåœ¨ä¿æ´»æ—¶é—´è¾¾åˆ°åï¼Œæ¢æ´»æ¬¡æ•°å¢åŠ 1ï¼ŒåŒæ—¶å‘æœåŠ¡å™¨ç«¯å‘é€PINGæ ¼å¼çš„æ¶ˆæ¯ï¼Œæ­¤åä»¥é¢„è®¾çš„ä¿æ´»æ—¶é—´é—´éš”ï¼Œä¸æ–­åœ°å‘æœåŠ¡å™¨ç«¯å‘é€PINGæ ¼å¼çš„æ¶ˆæ¯ã€‚å¦‚æœèƒ½æ”¶åˆ°æœåŠ¡å™¨ç«¯çš„åº”ç­”ï¼Œåˆ™ç»“æŸä¿æ´»ï¼Œå°†ä¿æ´»æ—¶é—´ç½®ä¸º0ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨select I/Oå¤ç”¨å‡½æ•°è‡ªå¸¦çš„å®šæ—¶å™¨ï¼Œselectå‡½æ•°å°†åœ¨åé¢è¯¦ç»†ä»‹ç»ã€‚</p><pre><code>#include &quot;lib/common.h&quot;\n#include &quot;message_objecte.h&quot;\n\n#define    MAXLINE     4096\n#define    KEEP_ALIVE_TIME  10\n#define    KEEP_ALIVE_INTERVAL  3\n#define    KEEP_ALIVE_PROBETIMES  3\n\n\nint main(int argc, char **argv) {\n    if (argc != 2) {\n        error(1, 0, &quot;usage: tcpclient &lt;IPaddress&gt;&quot;);\n    }\n\n    int socket_fd;\n    socket_fd = socket(AF_INET, SOCK_STREAM, 0);\n\n    struct sockaddr_in server_addr;\n    bzero(&amp;server_addr, sizeof(server_addr));\n    server_addr.sin_family = AF_INET;\n    server_addr.sin_port = htons(SERV_PORT);\n    inet_pton(AF_INET, argv[1], &amp;server_addr.sin_addr);\n\n    socklen_t server_len = sizeof(server_addr);\n    int connect_rt = connect(socket_fd, (struct sockaddr *) &amp;server_addr, server_len);\n    if (connect_rt &lt; 0) {\n        error(1, errno, &quot;connect failed &quot;);\n    }\n\n    char recv_line[MAXLINE + 1];\n    int n;\n\n    fd_set readmask;\n    fd_set allreads;\n\n    struct timeval tv;\n    int heartbeats = 0;\n\n    tv.tv_sec = KEEP_ALIVE_TIME;\n    tv.tv_usec = 0;\n\n    messageObject messageObject;\n\n    FD_ZERO(&amp;allreads);\n    FD_SET(socket_fd, &amp;allreads);\n    for (;;) {\n        readmask = allreads;\n        int rc = select(socket_fd + 1, &amp;readmask, NULL, NULL, &amp;tv);\n        if (rc &lt; 0) {\n            error(1, errno, &quot;select failed&quot;);\n        }\n        if (rc == 0) {\n            if (++heartbeats &gt; KEEP_ALIVE_PROBETIMES) {\n                error(1, 0, &quot;connection dead\\n&quot;);\n            }\n            printf(&quot;sending heartbeat #%d\\n&quot;, heartbeats);\n            messageObject.type = htonl(MSG_PING);\n            rc = send(socket_fd, (char *) &amp;messageObject, sizeof(messageObject), 0);\n            if (rc &lt; 0) {\n                error(1, errno, &quot;send failure&quot;);\n            }\n            tv.tv_sec = KEEP_ALIVE_INTERVAL;\n            continue;\n        }\n        if (FD_ISSET(socket_fd, &amp;readmask)) {\n            n = read(socket_fd, recv_line, MAXLINE);\n            if (n &lt; 0) {\n                error(1, errno, &quot;read error&quot;);\n            } else if (n == 0) {\n                error(1, 0, &quot;server terminated \\n&quot;);\n            }\n            printf(&quot;received heartbeat, make heartbeats to 0 \\n&quot;);\n            heartbeats = 0;\n            tv.tv_sec = KEEP_ALIVE_TIME;\n        }\n    }\n}\n</code></pre><p>è¿™ä¸ªç¨‹åºä¸»è¦åˆ†æˆä¸‰å¤§éƒ¨åˆ†ï¼š</p><p>ç¬¬ä¸€éƒ¨åˆ†ä¸ºå¥—æ¥å­—çš„åˆ›å»ºå’Œè¿æ¥å»ºç«‹ï¼š</p><ul>\n<li>15-16è¡Œï¼Œåˆ›å»ºäº†TCPå¥—æ¥å­—ï¼›</li>\n<li>18-22è¡Œï¼Œåˆ›å»ºäº†IPv4ç›®æ ‡åœ°å€ï¼Œå…¶å®å°±æ˜¯æœåŠ¡å™¨ç«¯åœ°å€ï¼Œæ³¨æ„è¿™é‡Œä½¿ç”¨çš„æ˜¯ä¼ å…¥å‚æ•°ä½œä¸ºæœåŠ¡å™¨åœ°å€ï¼›</li>\n<li>24-28è¡Œï¼Œå‘æœåŠ¡å™¨ç«¯å‘èµ·è¿æ¥ã€‚</li>\n</ul><p>ç¬¬äºŒéƒ¨åˆ†ä¸ºselectå®šæ—¶å™¨å‡†å¤‡ï¼š</p><ul>\n<li>39-40è¡Œï¼Œè®¾ç½®äº†è¶…æ—¶æ—¶é—´ä¸ºKEEP_ALIVE_TIMEï¼Œè¿™ç›¸å½“äºä¿æ´»æ—¶é—´ï¼›</li>\n<li>44-45è¡Œï¼Œåˆå§‹åŒ–selectå‡½æ•°çš„å¥—æ¥å­—ã€‚</li>\n</ul><p>æœ€é‡è¦çš„ä¸ºç¬¬ä¸‰éƒ¨åˆ†ï¼Œè¿™ä¸€éƒ¨åˆ†éœ€è¦å¤„ç†å¿ƒè·³æŠ¥æ–‡ï¼š</p><ul>\n<li>48è¡Œè°ƒç”¨selectå‡½æ•°ï¼Œæ„ŸçŸ¥I/Oäº‹ä»¶ã€‚è¿™é‡Œçš„I/Oäº‹ä»¶ï¼Œé™¤äº†å¥—æ¥å­—ä¸Šçš„è¯»æ“ä½œä¹‹å¤–ï¼Œè¿˜æœ‰åœ¨39-40è¡Œè®¾ç½®çš„è¶…æ—¶äº‹ä»¶ã€‚å½“KEEP_ALIVE_TIMEè¿™æ®µæ—¶é—´åˆ°è¾¾ä¹‹åï¼Œselectå‡½æ•°ä¼šè¿”å›0ï¼Œäºæ˜¯è¿›å…¥53-63è¡Œçš„å¤„ç†ï¼›</li>\n<li>åœ¨53-63è¡Œï¼Œå®¢æˆ·ç«¯å·²ç»åœ¨KEEP_ALIVE_TIMEè¿™æ®µæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°ä»»ä½•å¯¹å½“å‰è¿æ¥çš„åé¦ˆï¼Œäºæ˜¯å‘èµ·PINGæ¶ˆæ¯ï¼Œå°è¯•é—®æœåŠ¡å™¨ç«¯ï¼šâ€œå–‚ï¼Œä½ è¿˜æ´»ç€å—ï¼Ÿâ€è¿™é‡Œæˆ‘ä»¬é€šè¿‡ä¼ é€ä¸€ä¸ªç±»å‹ä¸ºMSG_PINGçš„æ¶ˆæ¯å¯¹è±¡æ¥å®ŒæˆPINGæ“ä½œï¼Œä¹‹åæˆ‘ä»¬ä¼šçœ‹åˆ°æœåŠ¡å™¨ç«¯ç¨‹åºå¦‚ä½•å“åº”è¿™ä¸ªPINGæ“ä½œï¼›</li>\n<li>ç¬¬65-74è¡Œæ˜¯å®¢æˆ·ç«¯åœ¨æ¥æ”¶åˆ°æœåŠ¡å™¨ç«¯ç¨‹åºä¹‹åçš„å¤„ç†ã€‚ä¸ºäº†ç®€å•ï¼Œè¿™é‡Œå°±æ²¡æœ‰å†è¿›è¡ŒæŠ¥æ–‡æ ¼å¼çš„è½¬æ¢å’Œåˆ†æã€‚åœ¨å®é™…çš„å·¥ä½œä¸­ï¼Œè¿™é‡Œå…¶å®æ˜¯éœ€è¦å¯¹æŠ¥æ–‡è¿›è¡Œè§£æåå¤„ç†çš„ï¼Œåªæœ‰æ˜¯PONGç±»å‹çš„å›åº”ï¼Œæˆ‘ä»¬æ‰è®¤ä¸ºæ˜¯PINGæ¢æ´»çš„ç»“æœã€‚è¿™é‡Œè®¤ä¸ºæ—¢ç„¶æ”¶åˆ°æœåŠ¡å™¨ç«¯çš„æŠ¥æ–‡ï¼Œé‚£ä¹ˆè¿æ¥å°±æ˜¯æ­£å¸¸çš„ï¼Œæ‰€ä»¥ä¼šå¯¹æ¢æ´»è®¡æ•°å™¨å’Œæ¢æ´»æ—¶é—´éƒ½ç½®é›¶ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡æ¢æ´»æ—¶é—´çš„æ¥ä¸´ã€‚</li>\n</ul><h3>æœåŠ¡å™¨ç«¯ç¨‹åºè®¾è®¡</h3><p>æœåŠ¡å™¨ç«¯çš„ç¨‹åºæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°è®¾ç½®çš„æ¯”è¾ƒå¤§ï¼Œå¯ä»¥æ¨¡æ‹Ÿè¿æ¥æ²¡æœ‰å“åº”çš„æƒ…å†µã€‚æœåŠ¡å™¨ç«¯ç¨‹åºåœ¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘é€æ¥çš„å„ç§æ¶ˆæ¯åï¼Œè¿›è¡Œå¤„ç†ï¼Œå…¶ä¸­å¦‚æœå‘ç°æ˜¯PINGç±»å‹çš„æ¶ˆæ¯ï¼Œåœ¨ä¼‘çœ ä¸€æ®µæ—¶é—´åå›å¤ä¸€ä¸ªPONGæ¶ˆæ¯ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯ï¼šâ€œå—¯ï¼Œæˆ‘è¿˜æ´»ç€ã€‚â€å½“ç„¶ï¼Œå¦‚æœè¿™ä¸ªä¼‘çœ æ—¶é—´å¾ˆé•¿çš„è¯ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯å°±æ— æ³•å¿«é€ŸçŸ¥é“æœåŠ¡å™¨ç«¯æ˜¯å¦å­˜æ´»ï¼Œè¿™æ˜¯æˆ‘ä»¬æ¨¡æ‹Ÿè¿æ¥æ— å“åº”çš„ä¸€ä¸ªæ‰‹æ®µè€Œå·²ï¼Œå®é™…æƒ…å†µä¸‹ï¼Œåº”è¯¥æ˜¯ç³»ç»Ÿå´©æºƒï¼Œæˆ–è€…ç½‘ç»œå¼‚å¸¸ã€‚</p><pre><code>#include &quot;lib/common.h&quot;\n#include &quot;message_objecte.h&quot;\n\nstatic int count;\n\nint main(int argc, char **argv) {\n    if (argc != 2) {\n        error(1, 0, &quot;usage: tcpsever &lt;sleepingtime&gt;&quot;);\n    }\n\n    int sleepingTime = atoi(argv[1]);\n\n    int listenfd;\n    listenfd = socket(AF_INET, SOCK_STREAM, 0);\n\n    struct sockaddr_in server_addr;\n    bzero(&amp;server_addr, sizeof(server_addr));\n    server_addr.sin_family = AF_INET;\n    server_addr.sin_addr.s_addr = htonl(INADDR_ANY);\n    server_addr.sin_port = htons(SERV_PORT);\n\n    int rt1 = bind(listenfd, (struct sockaddr *) &amp;server_addr, sizeof(server_addr));\n    if (rt1 &lt; 0) {\n        error(1, errno, &quot;bind failed &quot;);\n    }\n\n    int rt2 = listen(listenfd, LISTENQ);\n    if (rt2 &lt; 0) {\n        error(1, errno, &quot;listen failed &quot;);\n    }\n\n    int connfd;\n    struct sockaddr_in client_addr;\n    socklen_t client_len = sizeof(client_addr);\n\n    if ((connfd = accept(listenfd, (struct sockaddr *) &amp;client_addr, &amp;client_len)) &lt; 0) {\n        error(1, errno, &quot;bind failed &quot;);\n    }\n\n    messageObject message;\n    count = 0;\n\n    for (;;) {\n        int n = read(connfd, (char *) &amp;message, sizeof(messageObject));\n        if (n &lt; 0) {\n            error(1, errno, &quot;error read&quot;);\n        } else if (n == 0) {\n            error(1, 0, &quot;client closed \\n&quot;);\n        }\n\n        printf(&quot;received %d bytes\\n&quot;, n);\n        count++;\n\n        switch (ntohl(message.type)) {\n            case MSG_TYPE1 :\n                printf(&quot;process  MSG_TYPE1 \\n&quot;);\n                break;\n\n            case MSG_TYPE2 :\n                printf(&quot;process  MSG_TYPE2 \\n&quot;);\n                break;\n\n            case MSG_PING: {\n                messageObject pong_message;\n                pong_message.type = MSG_PONG;\n                sleep(sleepingTime);\n                ssize_t rc = send(connfd, (char *) &amp;pong_message, sizeof(pong_message), 0);\n                if (rc &lt; 0)\n                    error(1, errno, &quot;send failure&quot;);\n                break;\n            }\n\n            default :\n                error(1, 0, &quot;unknown message type (%d)\\n&quot;, ntohl(message.type));\n        }\n\n    }\n\n}\n</code></pre><p>æœåŠ¡å™¨ç«¯ç¨‹åºä¸»è¦åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ã€‚</p><p>ç¬¬ä¸€éƒ¨åˆ†ä¸ºç›‘å¬è¿‡ç¨‹çš„å»ºç«‹ï¼ŒåŒ…æ‹¬7-38è¡Œï¼› ç¬¬13-14è¡Œå…ˆåˆ›å»ºä¸€ä¸ªæœ¬åœ°TCPç›‘å¬å¥—æ¥å­—ï¼›16-20è¡Œç»‘å®šè¯¥å¥—æ¥å­—åˆ°æœ¬åœ°ç«¯å£å’ŒANYåœ°å€ä¸Šï¼›ç¬¬27-38è¡Œåˆ†åˆ«è°ƒç”¨listenå’Œacceptå®Œæˆè¢«åŠ¨å¥—æ¥å­—è½¬æ¢å’Œç›‘å¬ã€‚</p><p>ç¬¬äºŒéƒ¨åˆ†ä¸º43è¡Œåˆ°77è¡Œï¼Œä»å»ºç«‹çš„è¿æ¥å¥—æ¥å­—ä¸Šè¯»å–æ•°æ®ï¼Œè§£ææŠ¥æ–‡ï¼Œæ ¹æ®æ¶ˆæ¯ç±»å‹è¿›è¡Œä¸åŒçš„å¤„ç†ã€‚</p><ul>\n<li>55-57è¡Œä¸ºå¤„ç†MSG_TYPE1çš„æ¶ˆæ¯ï¼›</li>\n<li>59-61è¡Œä¸ºå¤„ç†MSG_TYPE2çš„æ¶ˆæ¯ï¼›</li>\n<li>é‡ç‚¹æ˜¯64-72è¡Œå¤„ç†MSG_PINGç±»å‹çš„æ¶ˆæ¯ã€‚é€šè¿‡ä¼‘çœ æ¥æ¨¡æ‹Ÿå“åº”æ˜¯å¦åŠæ—¶ï¼Œç„¶åè°ƒç”¨sendå‡½æ•°å‘é€ä¸€ä¸ªPONGæŠ¥æ–‡ï¼Œå‘å®¢æˆ·ç«¯è¡¨ç¤ºâ€œè¿˜æ´»ç€â€çš„æ„æ€ï¼›</li>\n<li>74è¡Œä¸ºå¼‚å¸¸å¤„ç†ï¼Œå› ä¸ºæ¶ˆæ¯æ ¼å¼ä¸è®¤è¯†ï¼Œæ‰€ä»¥ç¨‹åºå‡ºé”™é€€å‡ºã€‚</li>\n</ul><h2>å®éªŒ</h2><p>åŸºäºä¸Šé¢çš„ç¨‹åºè®¾è®¡ï¼Œè®©æˆ‘ä»¬åˆ†åˆ«åšä¸¤ä¸ªä¸åŒçš„å®éªŒï¼š</p><p>ç¬¬ä¸€æ¬¡å®éªŒï¼ŒæœåŠ¡å™¨ç«¯ä¼‘çœ æ—¶é—´ä¸º60ç§’ã€‚</p><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œå®¢æˆ·ç«¯åœ¨å‘é€äº†ä¸‰æ¬¡å¿ƒè·³æ£€æµ‹æŠ¥æ–‡PINGæŠ¥æ–‡åï¼Œåˆ¤æ–­å‡ºè¿æ¥æ— æ•ˆï¼Œç›´æ¥é€€å‡ºäº†ã€‚ä¹‹æ‰€ä»¥é€ æˆè¿™æ ·çš„ç»“æœï¼Œæ˜¯å› ä¸ºåœ¨è¿™æ®µæ—¶é—´å†…æ²¡æœ‰æ¥æ”¶åˆ°æ¥è‡ªæœåŠ¡å™¨ç«¯çš„ä»»ä½•PONGæŠ¥æ–‡ã€‚å½“ç„¶ï¼Œå®é™…å·¥ä½œçš„ç¨‹åºï¼Œå¯èƒ½éœ€è¦ä¸ä¸€æ ·çš„å¤„ç†ï¼Œæ¯”å¦‚é‡æ–°å‘èµ·è¿æ¥ã€‚</p><pre><code>$./pingclient 127.0.0.1\nsending heartbeat #1\nsending heartbeat #2\nsending heartbeat #3\nconnection dead\n</code></pre><pre><code>$./pingserver 60\nreceived 1028 bytes\nreceived 1028 bytes\n</code></pre><p>ç¬¬äºŒæ¬¡å®éªŒï¼Œæˆ‘ä»¬è®©æœåŠ¡å™¨ç«¯ä¼‘çœ æ—¶é—´ä¸º5ç§’ã€‚</p><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œç”±äºè¿™ä¸€æ¬¡æœåŠ¡å™¨ç«¯åœ¨å¿ƒè·³æ£€æµ‹è¿‡ç¨‹ä¸­ï¼ŒåŠæ—¶åœ°è¿›è¡Œäº†å“åº”ï¼Œå®¢æˆ·ç«¯ä¸€ç›´éƒ½ä¼šè®¤ä¸ºè¿æ¥æ˜¯æ­£å¸¸çš„ã€‚</p><pre><code>$./pingclient 127.0.0.1\nsending heartbeat #1\nsending heartbeat #2\nreceived heartbeat, make heartbeats to 0\nreceived heartbeat, make heartbeats to 0\nsending heartbeat #1\nsending heartbeat #2\nreceived heartbeat, make heartbeats to 0\nreceived heartbeat, make heartbeats to 0\n</code></pre><pre><code>$./pingserver 5\nreceived 1028 bytes\nreceived 1028 bytes\nreceived 1028 bytes\nreceived 1028 bytes\n</code></pre><h2>æ€»ç»“</h2><p>é€šè¿‡ä»Šå¤©çš„æ–‡ç« ï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°è™½ç„¶TCPæ²¡æœ‰æä¾›ç³»ç»Ÿçš„ä¿æ´»èƒ½åŠ›ï¼Œè®©åº”ç”¨ç¨‹åºå¯ä»¥æ–¹ä¾¿åœ°æ„ŸçŸ¥è¿æ¥çš„å­˜æ´»ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åº”ç”¨ç¨‹åºé‡Œçµæ´»åœ°å»ºç«‹è¿™ç§æœºåˆ¶ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ç§æœºåˆ¶çš„å»ºç«‹ä¾èµ–äºç³»ç»Ÿå®šæ—¶å™¨ï¼Œä»¥åŠæ°å½“çš„åº”ç”¨å±‚æŠ¥æ–‡åè®®ã€‚æ¯”å¦‚ï¼Œä½¿ç”¨å¿ƒè·³åŒ…å°±æ˜¯è¿™æ ·ä¸€ç§ä¿æŒKeep Aliveçš„æœºåˆ¶ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>å’Œå¾€å¸¸ä¸€æ ·ï¼Œæˆ‘ç•™ä¸¤é“æ€è€ƒé¢˜ï¼š</p><p>ä½ å¯ä»¥çœ‹åˆ°ä»Šå¤©çš„å†…å®¹ä¸»è¦æ˜¯é’ˆå¯¹TCPçš„æ¢æ´»ï¼Œé‚£ä¹ˆä½ è§‰å¾—è¿™æ ·çš„æ–¹æ³•æ˜¯å¦åŒæ ·é€‚ç”¨äºUDPå‘¢ï¼Ÿ</p><p>ç¬¬äºŒé“é¢˜æ˜¯ï¼Œæœ‰äººè¯´é¢å¤–çš„æ¢æ´»æŠ¥æ–‡å ç”¨äº†æœ‰é™çš„å¸¦å®½ï¼Œå¯¹æ­¤ä½ æ˜¯æ€ä¹ˆæƒ³çš„å‘¢ï¼Ÿè€Œä¸”ï¼Œä¸ºä»€ä¹ˆéœ€è¦å¤šæ¬¡æ¢æ´»æ‰èƒ½å†³å®šä¸€ä¸ªTCPè¿æ¥æ˜¯å¦å·²ç»æ­»äº¡å‘¢ï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨è¯„è®ºåŒºå†™ä¸‹ä½ çš„æ€è€ƒï¼Œæˆ‘ä¼šå’Œä½ ä¸€èµ·äº¤æµã€‚ä¹Ÿæ¬¢è¿æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–è€…åŒäº‹ï¼Œä¸ä»–ä»¬ä¸€èµ·è®¨è®ºä¸€ä¸‹è¿™ä¸¤ä¸ªé—®é¢˜å§ã€‚</p>","comments":[{"had_liked":false,"id":128858,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":true,"comment_ctime":1566977647,"is_pvip":false,"replies":[{"id":"47913","content":"2æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1567004470,"ip_address":"","comment_id":128858,"utype":1}],"discussion_count":5,"race_medal":0,"score":"9.2233721071411999e+18","product_id":100032701,"comment_content":"æ€è€ƒé¢˜<br>1. udpä¸éœ€è¦è¿æ¥ æ‰€ä»¥æ²¡æœ‰å¿…è¦å¿ƒè·³åŒ…<br>2. æˆ‘è§‰å¾—è¿˜æ˜¯å¾ˆæœ‰å¿…è¦åˆ¤å®šå­˜æ´» åƒä»¥å‰ç½‘å§æ‰“æ¸¸æˆ æœ‹å‹çš„ç”µè„‘çªç„¶è“å±æ­»æœº æœ‹å‹çš„è§’è‰²è¿˜æ®‹ç•™äºæ¸¸æˆä¸­,æ‰€ä»¥æœåŠ¡å™¨ä¸ºäº†åˆ¤å®šä»–æ˜¯å¦çœŸçš„å­˜æ´»è¿˜æ˜¯éœ€è¦ä¸€ä¸ªå¿ƒè·³åŒ… éš”äº†ä¸€æ®µæ—¶é—´è¿‡åæŠŠæœ‹å‹è§’è‰²è¸¢ä¸‹çº¿","like_count":17,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465138,"discussion_content":"2æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567004470,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2184325,"avatar":"https://static001.geekbang.org/account/avatar/00/21/54/85/ab5148ce.jpg","nickname":"duckman","note":"","ucode":"0184C26C4B6C1B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332635,"discussion_content":"æ€»ç»“ï¼šå¿ƒè·³åŒ…æ˜¯ç”¨æ¥æŸ¥çœ‹å½“å‰è¿æ¥çš„çŠ¶æ€çš„ï¼Œè€Œä¸æ˜¯ç½‘ç»œçŠ¶æ€ï¼ŒUDPéé¢å‘è¿æ¥ï¼Œä¹Ÿå°±å¹¶ä¸å­˜åœ¨ç”¨å¿ƒè·³åŒ…æ¢æµ‹è¿æ¥çš„é—®é¢˜äº†ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1607272781,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2184325,"avatar":"https://static001.geekbang.org/account/avatar/00/21/54/85/ab5148ce.jpg","nickname":"duckman","note":"","ucode":"0184C26C4B6C1B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336805,"discussion_content":"å®é™…ä¸Šå¤šæ¬¡æ¢æ´»å¹¶ä¸èƒ½ç¡®å®šä¸€ä¸ªè¿æ¥å½“å‰æ˜¯å¦å·²ç»æ­»äº¡äº†ã€‚ä½†æ˜¯å¯ä»¥åˆ¶å®šè¿™æ ·çš„ç­–ç•¥ï¼Œæ ¹æ®è¿™ä¸ªç­–ç•¥ï¼Œnæ¬¡æ¢æ´»å¤±è´¥ä¾¿æ ‡è®°ä¸ºå¤±è´¥ã€‚\n\nç±»ä¼¼äºï¼šâ€œæˆ‘è§‚å¯Ÿä¸åˆ°ä½ ï¼Œå°±å½“åšä½ ä¸å­˜åœ¨â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608706432,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2075086,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/a9/ce/23f2e185.jpg","nickname":"Running man","note":"","ucode":"F3357D6696A5C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":325744,"discussion_content":"æœ‰æ—¶å€™ä¼šä½¿ç”¨UDPæ¨¡æ‹Ÿtcpå®ç°ç›¸å¯¹å¯é çš„è¿æ¥ï¼Œéœ€è¦è€ƒè™‘ä¿æ´»å¿ƒè·³æœºåˆ¶ï¼Œä¹Ÿç®—ä¸€ç§éå¸¸è§„åº”ç”¨æ–¹å¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605420951,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111870,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK2Az5uTh9ZGVA7yQCj1BXtXuicPRkvJicA97AoN9xX3bnPcUYglTMXJeZeoVbPQeJA7ICvQhR3KQ0w/132","nickname":"æ—¥ä¸è½å¸å›½","note":"","ucode":"6A11ABBD8AC438","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":25600,"discussion_content":"å­¦ä¹ å­¦ä¹ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570541887,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128822,"user_name":"fjpcode","can_delete":false,"product_type":"c1","uid":1306092,"ip_address":"","ucode":"C32C5E3ECB9A90","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ61zTDmLk7IhLJn6seBPOwsVaKIWUWaxk5YmsdYBZUOYMQCsyl9iaQVSg9U5qJVLLOCFUoLUuYnRA/132","comment_is_top":false,"comment_ctime":1566967883,"is_pvip":false,"replies":[{"id":"47915","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1567004511,"ip_address":"","comment_id":128822,"utype":1}],"discussion_count":2,"race_medal":0,"score":"177660627019","product_id":100032701,"comment_content":"1.UDPé‡Œé¢å„æ–¹å¹¶ä¸ä¼šç»´æŠ¤ä¸€ä¸ªsocketä¸Šä¸‹æ–‡çŠ¶æ€æ˜¯æ— è¿æ¥çš„ï¼Œå¦‚æœä¸ºäº†è¿æ¥è€Œä¿æ´»æ˜¯ä¸å¿…è¦çš„ï¼Œå¦‚æœä¸ºäº†æ¢æµ‹å¯¹ç«¯æ˜¯å¦æ­£å¸¸å·¥ä½œè€Œåšping-pongä¹Ÿæ˜¯å¯è¡Œçš„ã€‚<br>2.é¢å¤–çš„æ¢æ´»æŠ¥æ–‡æ˜¯ä¼šå ç”¨ä¸€äº›å¸¦å®½èµ„æºï¼Œå¯æ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯ï¼Œé€‚å½“å¢åŠ ä¿æ´»æ—¶é—´ï¼Œé™ä½æ¢æ´»é¢‘ç‡ï¼Œç®€åŒ–ping-pongåè®®ã€‚ <br>3.å¤šæ¬¡æ¢æ´»æ˜¯ä¸ºäº†é˜²æ­¢è¯¯ä¼¤ï¼Œé¿å…pingåŒ…åœ¨ç½‘ç»œä¸­ä¸¢å¤±æ‰äº†ï¼Œè€Œè¯¯è®¤ä¸ºå¯¹ç«¯æ­»äº¡ã€‚","like_count":41,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465119,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567004511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1009652,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","nickname":"é’±","note":"","ucode":"2C92A243A463D4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":56532,"discussion_content":"å›ç­”çš„å¥½ï¼Œæˆ‘ä¹Ÿè§‰å¾—æ˜¯è¿™æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574495393,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207628,"user_name":"æ‰©æ•£æ€§ç™¾ä¸‡å’¸é¢åŒ…","can_delete":false,"product_type":"c1","uid":1905171,"ip_address":"","ucode":"6D703D51553B42","user_header":"https://static001.geekbang.org/account/avatar/00/1d/12/13/e103a6e3.jpg","comment_is_top":false,"comment_ctime":1587122890,"is_pvip":false,"replies":[{"id":"77716","content":"HTTPçš„ keep-aliveæ˜¯ä¸ºäº†ä½¿httpå˜æˆé•¿è¿æ¥ï¼Œåœ¨æ­¤å‰çš„http 1.0ä¸­ï¼Œæ¯æ¬¡httpçš„è¯·æ±‚-å“åº”ä¹‹åï¼Œtcpè¿æ¥å°±ä¼šè¢«é‡Šæ”¾æ‰ï¼Œè¿™æ˜¾ç„¶æ˜¯éå¸¸æµªè´¹çš„ï¼Œäºæ˜¯é€šè¿‡åŠ å…¥keep-aliveï¼Œä½¿å¾—httpè¿æ¥ä¸ä¼šè¢«ç«‹å³é‡Šæ”¾ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1587303973,"ip_address":"","comment_id":207628,"utype":1}],"discussion_count":1,"race_medal":0,"score":"61716665034","product_id":100032701,"comment_content":"æƒ³åˆ°HTTP Headerä¹Ÿèƒ½è®¾ç½®Connection: Keep-Aliveï¼Œä¹Ÿæ˜¯åº”ç”¨å±‚åè®®ï¼Œæ˜¯ä¸æ˜¯åº•å±‚å®ç°ä¹Ÿç±»ä¼¼äºå®šæ—¶å™¨+Ping Pongçš„æ€è·¯ï¼Ÿ","like_count":14,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492187,"discussion_content":"HTTPçš„ keep-aliveæ˜¯ä¸ºäº†ä½¿httpå˜æˆé•¿è¿æ¥ï¼Œåœ¨æ­¤å‰çš„http 1.0ä¸­ï¼Œæ¯æ¬¡httpçš„è¯·æ±‚-å“åº”ä¹‹åï¼Œtcpè¿æ¥å°±ä¼šè¢«é‡Šæ”¾æ‰ï¼Œè¿™æ˜¾ç„¶æ˜¯éå¸¸æµªè´¹çš„ï¼Œäºæ˜¯é€šè¿‡åŠ å…¥keep-aliveï¼Œä½¿å¾—httpè¿æ¥ä¸ä¼šè¢«ç«‹å³é‡Šæ”¾ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587303973,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":162494,"user_name":"äº‘å¸ˆå…„","can_delete":false,"product_type":"c1","uid":1010459,"ip_address":"","ucode":"4475AF1598FBFD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6b/1b/4b397b80.jpg","comment_is_top":false,"comment_ctime":1576545850,"is_pvip":false,"replies":[{"id":"63912","content":"å½“ç„¶æœ‰ã€‚æœåŠ¡å™¨ç«¯è¦æ¢æ´»clientæ¥ä¿è¯è‡ªå·±ä¸ä¼šç»´æŠ¤æ— æ•ˆè¿æ¥ï¼Œå®¢æˆ·ç«¯æ¥æ¢æ´»ä¿æŒè‡ªå·±æ˜¯ä¸æ˜¯å¯ä»¥æŒç»­ç”³è¯·èµ„æºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1577604607,"ip_address":"","comment_id":162494,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35936284218","product_id":100032701,"comment_content":"æ–‡ç« ä¸­æåˆ°ä¿æ´»æœ‰ä¸¤ä¸ªæ–¹å‘ï¼Œå®é™…åº”ç”¨ä¸­ï¼Œä¼šæœ‰ä¸¤ä¸ªæ–¹å‘åŒæ—¶æ¢æµ‹çš„åœºæ™¯å—","like_count":8,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478067,"discussion_content":"å½“ç„¶æœ‰ã€‚æœåŠ¡å™¨ç«¯è¦æ¢æ´»clientæ¥ä¿è¯è‡ªå·±ä¸ä¼šç»´æŠ¤æ— æ•ˆè¿æ¥ï¼Œå®¢æˆ·ç«¯æ¥æ¢æ´»ä¿æŒè‡ªå·±æ˜¯ä¸æ˜¯å¯ä»¥æŒç»­ç”³è¯·èµ„æºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577604607,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163994,"user_name":"æ»¡æ€€","can_delete":false,"product_type":"c1","uid":1483113,"ip_address":"","ucode":"EFAC662A37D684","user_header":"https://static001.geekbang.org/account/avatar/00/16/a1/69/0ddda908.jpg","comment_is_top":false,"comment_ctime":1576842046,"is_pvip":false,"replies":[{"id":"63900","content":"æ˜¯çš„ï¼Œå¤§éƒ¨åˆ†çš„åº”ç”¨ç¨‹åºå¼€å‘è€…éƒ½ä¼šé€‰æ‹©è‡ªå·±åœ¨åº”ç”¨å±‚å¤„ç†è¿æ¥æœ‰æ•ˆæ€§çš„æ£€æµ‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1577604074,"ip_address":"","comment_id":163994,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27346645822","product_id":100032701,"comment_content":"è€å¸ˆ æˆ‘æƒ³é—®ä¸€ä¸‹ çœ‹æ‚¨åœ¨å›å¤å½“ä¸­æœ‰è¯´ è™½ç„¶TCPæœ¬èº«çš„keep-aliveæœºåˆ¶å¯ä»¥è®¾ç½®ä¿æ´»æ—¶é—´ï¼Œä¿æ´»æ¢æµ‹æ—¶é—´é—´éš”ä»¥åŠæ¢æµ‹æ¬¡æ•°ï¼Œä½†æ˜¯åº”ç”¨å±‚ä¼šæ— æ³•æ„ŸçŸ¥ï¼Œé‚£ä¹ˆè¿™ç§æƒ…å†µä¸‹ä¼šæ€ä¹ˆå¤„ç†å‘¢ å°±æ˜¯æ–‡ä¸­æ‰€ç»™å‡ºçš„ä¸‰ç§æƒ…å†µå—","like_count":6,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478608,"discussion_content":"æ˜¯çš„ï¼Œå¤§éƒ¨åˆ†çš„åº”ç”¨ç¨‹åºå¼€å‘è€…éƒ½ä¼šé€‰æ‹©è‡ªå·±åœ¨åº”ç”¨å±‚å¤„ç†è¿æ¥æœ‰æ•ˆæ€§çš„æ£€æµ‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577604074,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131377,"user_name":"å¾å‡¯","can_delete":false,"product_type":"c1","uid":1244991,"ip_address":"","ucode":"12F82BA3649CD5","user_header":"https://static001.geekbang.org/account/avatar/00/12/ff/3f/bbb8a88c.jpg","comment_is_top":false,"comment_ctime":1567733875,"is_pvip":false,"replies":[{"id":"50812","content":"é¦–å…ˆï¼Œå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºå´©æºƒæ˜¯å¯ä»¥æœ‰FINåŒ…çš„ï¼Œå¦‚æœæœ‰çš„è¯ï¼Œreadé˜»å¡å°±å¯ä»¥è¿”å›äº†ï¼›å…¶æ¬¡ï¼Œå¦‚æœçœŸçš„æ˜¯å®¢æˆ·ç«¯æœºå™¨è·ªäº†ï¼Œé‚£ä¹ˆæ˜¯æ²¡æœ‰FINåŒ…å‘å‡ºçš„ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬åªå¥½ä¸€ç›´åœ¨é‚£é‡Œå‚»ç­‰ã€‚<br><br>ä¸”æ…¢ï¼Œè¿˜æœ‰åˆ«çš„è¾™ï¼Œé‚£å°±æ˜¯ä¸è¦ç”¨é˜»å¡I&#47;Oï¼Œä¸è¦åœ¨å“ªé‡Œå‚»å‚»ç­‰å¾…ã€‚ä½¿ç”¨I&#47;Oå¤ç”¨å°±å¯ä»¥åŠåˆ°çš„ï¼Œå¾€åçœ‹å°±ä¼šæ˜ç™½äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1568194771,"ip_address":"","comment_id":131377,"utype":1}],"discussion_count":3,"race_medal":0,"score":"23042570355","product_id":100032701,"comment_content":"è€å¸ˆ  åŒæ­¥è¿æ¥å¯ä»¥å®ç°å¿ƒè·³åŒ…ä¹ˆ å¦‚æœä¸èƒ½çš„è¯  é‚£åŒæ­¥è¿æ¥å¦‚æœå› ä¸ºå®¢æˆ·ç«¯å´©æºƒ æ²¡æœ‰é€šè¿‡å››æ¬¡æŒ¥æ‰‹ç»“æŸè¿æ¥  æœåŠ¡ç«¯è¿˜å µå¡åœ¨æ¥æ”¶æ•°æ®  é‚£ä¹ˆè¿™æ ·å¦‚ä½•åˆ¤æ–­å¯¹æ–¹å·²ç»ç¦»å¼€å‘¢","like_count":5,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466422,"discussion_content":"é¦–å…ˆï¼Œå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºå´©æºƒæ˜¯å¯ä»¥æœ‰FINåŒ…çš„ï¼Œå¦‚æœæœ‰çš„è¯ï¼Œreadé˜»å¡å°±å¯ä»¥è¿”å›äº†ï¼›å…¶æ¬¡ï¼Œå¦‚æœçœŸçš„æ˜¯å®¢æˆ·ç«¯æœºå™¨è·ªäº†ï¼Œé‚£ä¹ˆæ˜¯æ²¡æœ‰FINåŒ…å‘å‡ºçš„ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬åªå¥½ä¸€ç›´åœ¨é‚£é‡Œå‚»ç­‰ã€‚\n\nä¸”æ…¢ï¼Œè¿˜æœ‰åˆ«çš„è¾™ï¼Œé‚£å°±æ˜¯ä¸è¦ç”¨é˜»å¡I/Oï¼Œä¸è¦åœ¨å“ªé‡Œå‚»å‚»ç­‰å¾…ã€‚ä½¿ç”¨I/Oå¤ç”¨å°±å¯ä»¥åŠåˆ°çš„ï¼Œå¾€åçœ‹å°±ä¼šæ˜ç™½äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568194771,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1244991,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ff/3f/bbb8a88c.jpg","nickname":"å¾å‡¯","note":"","ucode":"12F82BA3649CD5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":9632,"discussion_content":"æ‰€ä»¥è¯´è¿™ä¸ªFINåŒ…æ˜¯ä¸ä¸€å®šæœ‰çš„  æœåŠ¡ç«¯ä¸èƒ½ä¾èµ–äºç­‰å¾…è¿™ä¸ªFINåŒ…æ˜¯ä¹ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568197889,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1220130,"avatar":"https://static001.geekbang.org/account/avatar/00/12/9e/22/b820e079.jpg","nickname":"æ‹–é‹æ±‰","note":"","ucode":"4A258AD458A623","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1244991,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ff/3f/bbb8a88c.jpg","nickname":"å¾å‡¯","note":"","ucode":"12F82BA3649CD5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":224578,"discussion_content":"é™¤éæ˜¯kernelå´©æºƒï¼Œè¦ä¸ç„¶FINåŒ…ä¸€å®šæœ‰ã€‚kernelå´©æºƒäº†ï¼Œå¯ä»¥é€šè¿‡å¿ƒè·³æˆ–è€…å¤šè·¯å¤ç”¨çš„timeoutæœºåˆ¶æ¥é¿å…å‚»ç­‰ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1586316506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":9632,"ip_address":""},"score":224578,"extra":""}]}]},{"had_liked":false,"id":218485,"user_name":"rongyefeng","can_delete":false,"product_type":"c1","uid":1959482,"ip_address":"","ucode":"9A15D947E9D645","user_header":"https://static001.geekbang.org/account/avatar/00/1d/e6/3a/382cf024.jpg","comment_is_top":false,"comment_ctime":1589807918,"is_pvip":false,"replies":[{"id":"80985","content":"Bingoã€‚ç¡®å®æ˜¯æˆ‘å¿˜è®°äº†:)","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1589977789,"ip_address":"","comment_id":218485,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14474709806","product_id":100032701,"comment_content":"æœåŠ¡å™¨ç«¯æ¢å¤å¿ƒè·³åŒ…è¿™æ®µ   <br>case MSG_PING:   <br>{  <br>    messageObject pong_message;     <br>    pong_message.type = MSG_PONG;  <br>    sleep(sleepingTime);      <br>     ssize_t rc = send(connfd, (char *) &amp;pong_message, sizeof(pong_message), 0);     <br>è€å¸ˆï¼Œè¿™ä¸ªtypeæ˜¯intç±»å‹ï¼Œåº”è¯¥å°†å…¶è½¬ä¸ºç½‘ç»œåºæ‰å¯¹å§ï¼Ÿ pong_message.type = htonl(MSG_PONG);     <br>è€Œä¸”ä½ çš„å®¢æˆ·ç«¯ç¨‹åºä¹Ÿæ˜¯æœ‰è½¬æ¢çš„ï¼Œæ˜¯ä¸æ˜¯æœåŠ¡å™¨ç«¯è¿™é‡Œå¿˜è®°äº†ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495478,"discussion_content":"Bingoã€‚ç¡®å®æ˜¯æˆ‘å¿˜è®°äº†:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589977789,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":162486,"user_name":"HunterYuan","can_delete":false,"product_type":"c1","uid":1015256,"ip_address":"","ucode":"F8900C33D29AA7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7d/d8/d7c77764.jpg","comment_is_top":false,"comment_ctime":1576545173,"is_pvip":false,"replies":[{"id":"63913","content":"å­¦ä¹ äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1577604632,"ip_address":"","comment_id":162486,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14461447061","product_id":100032701,"comment_content":"å¯¹äºåè®®æ ˆä¸­çš„TCPçš„keep-aliveæ˜¯å¯ä»¥æ‰‹åŠ¨é…ç½®çš„ï¼Œå…¨å±€é…ç½®é€šè¿‡ä¿®æ”¹net.ipv4ä¸‹çš„ç­‰å‚æ•°ï¼›å±€éƒ¨é…ç½®å¯ä»¥é€šè¿‡setsockoptä¿®æ”¹socketé€‰é¡¹ã€‚åœ¨å·¥ä½œä¸­é‡åˆ°è¿‡ä¸€ä¸ªoracle,windowsæœåŠ¡å™¨çš„ä¿æ´»æ—¶é—´å¤§äºï¼Œæˆ‘ä»¬è®¾å¤‡çŠ¶æ€è¿æ¥è¡¨çš„ä¿æ´»æ—¶é—´ï¼Œå¯¼è‡´ï¼Œä¸€æ®µæ—¶é—´åé‡è¿ï¼Œå¯¼è‡´æœåŠ¡å™¨æŠ¥é”™é—®é¢˜ã€‚å½“æ—¶æœ€æœ€å¿«çš„å¤„ç†åŠæ³•æ˜¯ï¼Œä¿®æ”¹windowé»˜è®¤çš„ä¿æ´»æ—¶é—´å°äºçŠ¶æ€è¿æ¥å¤±æ•ˆæ—¶é—´ã€‚","like_count":3,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478064,"discussion_content":"å­¦ä¹ äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577604632,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129024,"user_name":"çŸ³å°†ä»","can_delete":false,"product_type":"c1","uid":1375617,"ip_address":"","ucode":"12F43E643D1D58","user_header":"https://static001.geekbang.org/account/avatar/00/14/fd/81/1864f266.jpg","comment_is_top":false,"comment_ctime":1567010041,"is_pvip":false,"replies":[{"id":"48204","content":"è¿™æ˜¯å› ä¸ºï¼Œå—¯ï¼Œè·Ÿselectå®ç°æœ‰å…³ï¼Œæˆ‘å†åé¢è®²selectæ—¶è¯¦ç»†å‰–æï¼Œç°åœ¨å…ˆè®°ä½å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1567131818,"ip_address":"","comment_id":129024,"utype":1}],"discussion_count":4,"race_medal":0,"score":"14451911929","product_id":100032701,"comment_content":"ä¸ºå•¥è¿™å¥å¥—æ¥å­—è¦åŠ 1å‘¢ï¼Ÿint rc = select(socket_fd + 1, &amp;readmask, NULL, NULL, &amp;tv);","like_count":3,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465228,"discussion_content":"è¿™æ˜¯å› ä¸ºï¼Œå—¯ï¼Œè·Ÿselectå®ç°æœ‰å…³ï¼Œæˆ‘å†åé¢è®²selectæ—¶è¯¦ç»†å‰–æï¼Œç°åœ¨å…ˆè®°ä½å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567131818,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1622329,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c1/39/11904266.jpg","nickname":"Steiner","note":"","ucode":"232C1C75207A1E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":10143,"discussion_content":"æ ‡å‡†è¾“å…¥ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡ä»¶å¥æŸ„ï¼Œå®ƒçš„æè¿°ç¬¦æ˜¯0ï¼Œæ‰€ä»¥è¿™ä¸ªè½®è¯¢èŒƒå›´è¦åŠ 1","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1568267081,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2184325,"avatar":"https://static001.geekbang.org/account/avatar/00/21/54/85/ab5148ce.jpg","nickname":"duckman","note":"","ucode":"0184C26C4B6C1B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332620,"discussion_content":"https://linux.die.net/man/2/select\n\n\nint select(int nfds, fd_set *readfds, fd_set *writefds,\n           fd_set *exceptfds, struct timeval *timeout);&#39;\n\n\nnfds is the highest-numbered file descriptor in any of the three sets, plus 1.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607269654,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1260026,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","nickname":"å®‰æ’","note":"","ucode":"F78CFA9624CAEF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6767,"discussion_content":"selectå·¥ä½œæœºåˆ¶å†³å®šçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567090598,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":231381,"user_name":"éƒ‘ç¥–ç…Œ","can_delete":false,"product_type":"c1","uid":1469608,"ip_address":"","ucode":"49A0D2E3279826","user_header":"https://static001.geekbang.org/account/avatar/00/16/6c/a8/1922a0f5.jpg","comment_is_top":false,"comment_ctime":1593660492,"is_pvip":false,"replies":[{"id":"85730","content":"æ²¡æœ‰æœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯çš„åå‘è¿æ¥æ£€æµ‹ä¹ˆï¼ŸM+10ç§’æœ‰ç‚¹ç‹ å•Šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1593954512,"ip_address":"","comment_id":231381,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5888627788","product_id":100032701,"comment_content":"è¿™ä¸ªæ˜¯å®¢æˆ·ç«¯æ¢æ´»æœåŠ¡å™¨æ˜¯å¦è¿˜å­˜æ´»ï¼Œè¿˜å¯ä»¥ç”¨æœåŠ¡å™¨æ¥æ¢æ´»å®¢æˆ·ç«¯æ˜¯å¦è¿˜å­˜æ´»ã€‚æˆ‘åŸå…ˆä¹Ÿæœ‰æ¥è§¦è¿‡è¿™ä¸ªå¿ƒè·³ï¼Œä¸è¿‡å®ç°çš„æœºåˆ¶æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯å®¢æˆ·ç«¯è¿ä¸ŠæœåŠ¡å™¨äº†ï¼Œå®¢æˆ·ç«¯è¦æ¯ä¸ªMç§’å‘æœåŠ¡å™¨å‘åŒ…ï¼ŒæœåŠ¡å™¨å¦‚æœåœ¨M+10ç§’å†…æ²¡æ”¶åˆ°è¿™ä¸ªå¿ƒè·³åŒ…å°±åˆ¤å®šå®¢æˆ·ç«¯å·²ç»æ­»äº¡ã€‚å°±ä¼šåœ¨åº”ç”¨å±‚æ–¹é¢åˆ¤å®šå®¢æˆ·ç«¯å·²ç»å¤±å»è¿æ¥ã€‚","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500278,"discussion_content":"æ²¡æœ‰æœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯çš„åå‘è¿æ¥æ£€æµ‹ä¹ˆï¼ŸM+10ç§’æœ‰ç‚¹ç‹ å•Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593954512,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":190110,"user_name":"åˆ˜å£«æ¶›","can_delete":false,"product_type":"c1","uid":1192218,"ip_address":"","ucode":"6D83F766D189E5","user_header":"https://static001.geekbang.org/account/avatar/00/12/31/1a/fd82b2d5.jpg","comment_is_top":false,"comment_ctime":1584603574,"is_pvip":false,"replies":[{"id":"73535","content":"åº”ç”¨å±‚è®¾ç½®ping-pangçš„æ“ä½œï¼Œå¦‚æœåœ¨ä¸€æ®µæ—¶é—´å†…æ²¡æœ‰åº”ç”¨å±‚å¿ƒè·³æŠ¥æ–‡ï¼Œè®¤ä¸ºtcpå·²ç»æ–­å¼€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1584863601,"ip_address":"","comment_id":190110,"utype":1}],"discussion_count":4,"race_medal":0,"score":"5879570870","product_id":100032701,"comment_content":"è¯·é—®è€å¸ˆä¸€ä¸ªtcpé•¿è¿æ¥ï¼Œç½‘ç»œå‘ç”Ÿæ•…éšœï¼Œ clientå’Œserveréƒ½è¿˜æ²¡æœ‰æ–­å¼€è¿™ä¸ªè¿æ¥ï¼Œ è¿™æ—¶å€™clientè°ƒç”¨sendå‘é€æ•°æ®æ˜¯ä¸ªä»€ä¹ˆè¡Œä¸ºï¼Ÿæˆ‘ç†è§£sendè¿›ç¼“å†²åŒºæ˜¯ä¸€ç›´æˆåŠŸçš„ï¼Œ ä½†æ˜¯ç”±äºç½‘ç»œä¸é€šï¼Œ æ•°æ®ä¸ä¼šå‘å‡ºå»ã€‚è¿™æ—¶å€™å¦‚æœæƒ³è¦å‘ç°è¿™ä¸ªtcpæ–­å¼€å°±åªèƒ½clientåº”ç”¨å±‚è®¾ç½®ä¸€ä¸ªè¶…æ—¶ï¼Œ è¶…æ—¶åè°ƒç”¨shutdownï¼Œ æœ‰å…¶ä»–çš„æ–¹å¼å¯ä»¥æ„ŸçŸ¥åˆ°è¿™ä¸ªtcpæ–­å¼€ä¹ˆ","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487889,"discussion_content":"åº”ç”¨å±‚è®¾ç½®ping-pangçš„æ“ä½œï¼Œå¦‚æœåœ¨ä¸€æ®µæ—¶é—´å†…æ²¡æœ‰åº”ç”¨å±‚å¿ƒè·³æŠ¥æ–‡ï¼Œè®¤ä¸ºtcpå·²ç»æ–­å¼€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584863601,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2403622,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ad/26/d46f4394.jpg","nickname":"Owen","note":"","ucode":"FDE0D574B8ED5A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549947,"discussion_content":"é©¬å£«å…µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644308424,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1993133,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/69/ad/0ba9f9f0.jpg","nickname":"ging_96","note":"","ucode":"F8936FC04BBFFC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290528,"discussion_content":"å¦‚æœæ²¡æœ‰å¿ƒè·³æ£€æµ‹ï¼Œå¹¶ä¸”ç½‘ç»œä¸€ç›´å¼‚å¸¸ã€‚å…¶å®å¯¹å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ˜¯å®Œå…¨å‘ç°ä¸äº†çš„å§ã€‚å‡å¦‚æ•°æ®ä¸€ç›´æ˜¯å•å‘ä¼ é€’ï¼Œå¹¶ä¸”ä¸éœ€è¦å¯¹ç«¯å›å¤ã€‚æ¯”å¦‚åªèƒ½ä»æœåŠ¡ç«¯åˆ°å®¢æˆ·ç«¯ï¼Œå½“æœ‰æ•°æ®éœ€è¦å‘é€ï¼ŒæœåŠ¡ç«¯æ‰¾åˆ°å¯¹åº”çš„socketï¼Œç„¶åå†™å…¥å‘é€ç¼“å†²åŒºï¼Œè¢«é€åˆ°ç½‘ç»œä¸­ã€‚å®¢æˆ·ç«¯æ°¸è¿œä¹Ÿæ”¶ä¸åˆ°ï¼ŒæœåŠ¡ç«¯è¿˜ä»¥ä¸ºè‡ªå·±å‘é€æˆåŠŸäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594524441,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2224386,"avatar":"https://static001.geekbang.org/account/avatar/00/21/f1/02/96082034.jpg","nickname":"Guchen","note":"","ucode":"9BD34F616F167A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1993133,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/69/ad/0ba9f9f0.jpg","nickname":"ging_96","note":"","ucode":"F8936FC04BBFFC","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":316112,"discussion_content":"TCPåº”è¯¥ä¸ä¼šé‚£ä¹ˆè ¢ï¼Œå¦‚æœç½‘ç»œä¸€ç›´å¼‚å¸¸ï¼ŒæœåŠ¡ç«¯å‘é€åˆ°ç½‘ç»œä¸Šçš„æ•°æ®åŒ…è¿Ÿè¿Ÿåˆ°è¾¾ä¸äº†å®¢æˆ·ç«¯ï¼Œä¹Ÿå°±æ— æ³•æ¥æ”¶åˆ°ACKï¼Œè¶…æ—¶é‡ä¼ åº”è¯¥æœ‰ä¸Šé™å§ï¼Œå¦‚æœæŸä¸ªåŒ…é‡ä¼ äº†å¾ˆå¤šæ¬¡è¿˜æ˜¯å¾—ä¸åˆ°ç¡®è®¤ï¼Œåº”è¯¥å°±ä¼šé»˜è®¤é“¾è·¯ä¸é€šå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603361118,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":290528,"ip_address":""},"score":316112,"extra":""}]}]},{"had_liked":false,"id":168981,"user_name":"Geek_d6f50f","can_delete":false,"product_type":"c1","uid":1793213,"ip_address":"","ucode":"4AA490453CF4FB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/wwM75BhyU43UYOJ6fZCZgY6pfNPGHHRlooPLQEtDGUNic4aLRHWmBRTpIiblBAFheUVm9Sw8HWAChcFsnVM2sd5Q/132","comment_is_top":false,"comment_ctime":1578232147,"is_pvip":true,"replies":[{"id":"68086","content":"æ˜¯è¿™æ ·çš„ï¼Œ<br><br>å½“å®¢æˆ·ç«¯10ç§’é’Ÿselectè¶…æ—¶æ—¶é—´åˆ°è¾¾ï¼Œç¬¬ä¸€æ¬¡è¿›å…¥heartbeatï¼Œå‘é€æŠ¥æ–‡ç»™æœåŠ¡å™¨ç«¯ï¼ŒåŒæ—¶å®¢æˆ·ç«¯æŠŠä¸‹ä¸€æ¬¡selectè¶…æ—¶æ—¶é—´è®¾ç½®ä¸º3ç§’(KEEP_ALIVE_INTERVAL)ï¼›<br><br>ç”±äºæœåŠ¡å™¨ç«¯æ˜¯5ç§’ä¹‹åæ‰å›å¤ï¼Œ3ç§’ä¹‹åï¼Œç¬¬äºŒæ¬¡heartbeatæ—¶é—´åˆ°ï¼Œå®¢æˆ·ç«¯å‘é€ç¬¬äºŒä¸ªheartbeatã€‚<br><br>5ç§’ä¹‹åï¼Œç¬¬ä¸€æ¬¡çš„heartbeatå›å¤åˆ°ï¼Œå®¢æˆ·ç«¯æŠŠè¶…æ—¶æ—¶é—´åˆé‡æ–°è®¾ç½®ä¸º10ç§’ã€‚<br><br>å†è¿‡5ç§’ä¹‹åï¼Œç¬¬äºŒæ¬¡çš„heartbeatå›å¤åˆ°ï¼Œå®¢æˆ·ç«¯æŠŠè¶…æ—¶æ—¶é—´å†æ¬¡è®¾ç½®ä¸º10ç§’ã€‚<br><br>å¦‚æ­¤åå¤ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1580632415,"ip_address":"","comment_id":168981,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5873199443","product_id":100032701,"comment_content":"è€å¸ˆï¼Œç¬¬äºŒæ¬¡è¿è¡Œç¨‹åºï¼Œå®¢æˆ·ç«¯çš„å®šæ—¶å™¨è®¾å®šä¸ºæ¯10ç§’é’Ÿè¿›è¡Œä¸€æ¬¡selectè¿”å›0ï¼Œæ­¤æ—¶è¿›è¡Œæ¢æµ‹åŒ…å‘é€ã€‚è€ŒæœåŠ¡å™¨ç«¯å»¶è¿Ÿ5ç§’è¿›è¡Œåº”ç­”ï¼Œä¸ºä»€ä¹ˆå®¢æˆ·ç«¯æ¯æ¬¡éƒ½èƒ½å‘é€ä¸¤ä¸ªåŒ…åæ‰æ¸…é›¶ï¼Ÿä¸åº”è¯¥æ˜¯åªè¿›è¡Œä¸€ä¸ªåŒ…çš„å‘é€ï¼ŒæœåŠ¡å™¨ç«¯å»¶è¿Ÿ5ç§’å°±ç»™å‡ºåº”ç­”ï¼Œç„¶åæ¸…é›¶å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480393,"discussion_content":"æ˜¯è¿™æ ·çš„ï¼Œ\n\nå½“å®¢æˆ·ç«¯10ç§’é’Ÿselectè¶…æ—¶æ—¶é—´åˆ°è¾¾ï¼Œç¬¬ä¸€æ¬¡è¿›å…¥heartbeatï¼Œå‘é€æŠ¥æ–‡ç»™æœåŠ¡å™¨ç«¯ï¼ŒåŒæ—¶å®¢æˆ·ç«¯æŠŠä¸‹ä¸€æ¬¡selectè¶…æ—¶æ—¶é—´è®¾ç½®ä¸º3ç§’(KEEP_ALIVE_INTERVAL)ï¼›\n\nç”±äºæœåŠ¡å™¨ç«¯æ˜¯5ç§’ä¹‹åæ‰å›å¤ï¼Œ3ç§’ä¹‹åï¼Œç¬¬äºŒæ¬¡heartbeatæ—¶é—´åˆ°ï¼Œå®¢æˆ·ç«¯å‘é€ç¬¬äºŒä¸ªheartbeatã€‚\n\n5ç§’ä¹‹åï¼Œç¬¬ä¸€æ¬¡çš„heartbeatå›å¤åˆ°ï¼Œå®¢æˆ·ç«¯æŠŠè¶…æ—¶æ—¶é—´åˆé‡æ–°è®¾ç½®ä¸º10ç§’ã€‚\n\nå†è¿‡5ç§’ä¹‹åï¼Œç¬¬äºŒæ¬¡çš„heartbeatå›å¤åˆ°ï¼Œå®¢æˆ·ç«¯æŠŠè¶…æ—¶æ—¶é—´å†æ¬¡è®¾ç½®ä¸º10ç§’ã€‚\n\nå¦‚æ­¤åå¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580632415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":138365,"user_name":"è¡¬è¡«çš„ä»·æ ¼æ˜¯19ç¾å…ƒ","can_delete":false,"product_type":"c1","uid":1397631,"ip_address":"","ucode":"655F925451F772","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKVUskibDnhMt5MCIJ8227HWkeg2wEEyewps8GuWhWaY5fy7Ya56bu2ktMlxdla3K29Wqia9efCkWaQ/132","comment_is_top":false,"comment_ctime":1570179336,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5865146632","product_id":100032701,"comment_content":"tcpæ¢æ´»çš„ç›®çš„ä¹‹ä¸€æ˜¯åˆ¤æ–­è¯¥è¿æ¥æ˜¯å¦è¿˜éœ€è¦ï¼Œä»¥æ­¤å†³å®šæ˜¯ç»´æŒè¿˜æ˜¯é‡Šæ”¾è¯¥è¿æ¥èµ„æºã€‚udpæ— è¿æ¥ï¼Œä¹Ÿä¸å ç”¨æœåŠ¡å™¨æˆ–è€…å®¢æˆ·ç«¯çš„èµ„æºï¼Œå› æ­¤ä¸šåŠ¡æ— éœ€æ¢æ´»","like_count":1},{"had_liked":false,"id":129225,"user_name":"å¾å‡¯","can_delete":false,"product_type":"c1","uid":1244991,"ip_address":"","ucode":"12F82BA3649CD5","user_header":"https://static001.geekbang.org/account/avatar/00/12/ff/3f/bbb8a88c.jpg","comment_is_top":false,"comment_ctime":1567065847,"is_pvip":false,"replies":[{"id":"48197","content":"æ¢æ´»åŒ…çš„å¤šæ¬¡å‘é€ï¼Œè¿˜æ˜¯ä¸ºäº†å‡å°‘è¯¯åˆ¤çš„æ¦‚ç‡ï¼Œä½ è¯´çš„æ˜¯ä¸€ç§æƒ…å†µï¼Œä½†æˆ‘è§‰å¾—å¤šæ­¤æ¢æ´»è‚¯å®šä¼šæ‹‰é•¿å¯¹ä¸€ä¸ª&quot;æ— æ•ˆ&quot;è¿æ¥çš„åˆ¤æ–­æ—¶é—´çš„ã€‚è¿™ä¸ªæ˜¯ä¸€ä¸ªtradeoffï¼Œæ‰€ä»¥å¤§å¤šæ•°ç¨‹åºéƒ½æŠŠè¿™ä¸ªä½œä¸ºé€‰é¡¹è®©ä½¿ç”¨è€…è‡ªå·±é…ç½®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1567131047,"ip_address":"","comment_id":129225,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5862033143","product_id":100032701,"comment_content":"æˆ‘çœ‹åˆ°å¤§å®¶å¯¹äºç¬¬äºŒä¸ªé—®é¢˜çš„ç­”æ¡ˆéƒ½æåˆ°äº†ä¸ºäº†é¿å…æ¢æ´»åŒ…ä¸¢åŒ… æ‰€ä»¥è¦å‘å¤šä¸ªæ¢æ´»åŒ…ã€‚ä½†æ˜¯æˆ‘è§‰å¾—åªè¦å‘äº†æ¢æ´»åŒ…å¯¹æ–¹å°±ä¸€å®šèƒ½æ”¶åˆ°ï¼Œå°±ç®—ä¸¢äº† å‘é€ç«¯ä¹Ÿä¼šé‡ä¼ ã€‚è€Œå¤§å®¶è¯´çš„å‘é€å¤šä¸ªæ¢æ´»åŒ…çš„åŸå›  æ˜¯å› ä¸ºé‡ä¼ éœ€è¦ç­‰åˆ°è®¡æ—¶å™¨è¶…æ—¶æ‰ä¼ ï¼Œè€Œå¦‚æœç½‘ç»œå µå¡çš„è¯å¯èƒ½ä¼šå‡ºç°é¢‘ç¹ä¸¢åŒ… é‚£ä¹ˆæœåŠ¡ç«¯å¯èƒ½éœ€è¦å¾ˆä¹…æ‰èƒ½çŸ¥é“å¯¹æ–¹å·²ç»ç¦»å¼€ å‘å¤šä¸ªæ¢æ´»åŒ…çš„è¯ å°±å‡å°‘äº†è¿™ä¸ªç­‰å¾…çš„æ—¶é—´ è¿™æ ·ç†è§£å¯¹ä¹ˆ","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465344,"discussion_content":"æ¢æ´»åŒ…çš„å¤šæ¬¡å‘é€ï¼Œè¿˜æ˜¯ä¸ºäº†å‡å°‘è¯¯åˆ¤çš„æ¦‚ç‡ï¼Œä½ è¯´çš„æ˜¯ä¸€ç§æƒ…å†µï¼Œä½†æˆ‘è§‰å¾—å¤šæ­¤æ¢æ´»è‚¯å®šä¼šæ‹‰é•¿å¯¹ä¸€ä¸ª&amp;quot;æ— æ•ˆ&amp;quot;è¿æ¥çš„åˆ¤æ–­æ—¶é—´çš„ã€‚è¿™ä¸ªæ˜¯ä¸€ä¸ªtradeoffï¼Œæ‰€ä»¥å¤§å¤šæ•°ç¨‹åºéƒ½æŠŠè¿™ä¸ªä½œä¸ºé€‰é¡¹è®©ä½¿ç”¨è€…è‡ªå·±é…ç½®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567131047,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1993133,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/69/ad/0ba9f9f0.jpg","nickname":"ging_96","note":"","ucode":"F8936FC04BBFFC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291124,"discussion_content":"åœ¨tcp ipå±‚é¢ï¼Œå¦‚æœå‘é€ä¸€ä¸ªå¿ƒè·³åŒ…ï¼Œç»è¿‡tcpçš„å¯é åè®®ï¼Œä¸€å®šèƒ½ä¼ é€’åˆ°å¯¹æ–¹æˆ–è€…Tcpè¶…æ—¶ï¼Œä½†æ˜¯ç­‰å¾…tcpæŠ¥è¶…æ—¶å¤ªæ…¢ï¼Œæ‰€ä»¥åœ¨åº”ç”¨å±‚é¢ä¸ŠåŠ äº†è‡ªå·±çš„è¶…æ—¶åˆ¤æ–­ï¼Œç”¨äº â€œå¿«é€Ÿâ€ æ£€æµ‹ã€‚è¿™ä¸ªè§£é‡Šé’ˆå¯¹çš„æ˜¯ä¸ºä»€ä¹ˆéœ€è¦åº”ç”¨å±‚å®ç°è¶…æ—¶ï¼Œè€Œä¸æ˜¯é Tcpå‘é€å¿ƒè·³åŒ…è¶…æ—¶ï¼›\nä½†æ˜¯åº”ç”¨å±‚åˆ¤æ–­ï¼Œå¯èƒ½å­˜åœ¨è¯¯åˆ¤ï¼Œå¦‚æœç½‘ç»œå»¶è¿Ÿè¾ƒå¤§ï¼Œæˆ–è€…å¯¹ç«¯æ­£åœ¨å¿™äºå¤„ç†å…¶ä»–äº‹åŠ¡ï¼Œé‚£ä¹ˆè¿™ä¸ªå¿ƒè·³å›å¤åŒ…æœ€åæ˜¯ä¼šå›å¤çš„ï¼Œä½†æ˜¯ä¼šè¶…æ—¶ï¼ˆè¶…è¿‡æˆ‘ä»¬çš„è®¾ç½®æ—¶é—´ï¼‰ï¼›æ‰€ä»¥éœ€è¦å¤šæ­¤å‘é€å¿ƒè·³åŒ…ï¼Œä¸€æ—¦è‡³å°‘ä¸€ä¸ªå›å¤äº†ï¼Œå°±è¡¨æ˜å…¶å®å¯¹ç«¯æ˜¯æ´»ç€çš„ã€‚ æ‰€ä»¥è¿™ç§æœºåˆ¶æ˜¯åœ¨tcpå±‚é¢è¶…æ—¶å’Œè¯¯åˆ¤ä¹‹é—´å¯»æ±‚ä¸€ä¸ªå¹³è¡¡ï¼Œæ—¢å¯ä»¥å¿«é€Ÿå‘ç°é—®é¢˜ï¼Œåˆä¸è‡³äºè¯¯åˆ¤ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1594712667,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128694,"user_name":"LDxy","can_delete":false,"product_type":"c1","uid":1188710,"ip_address":"","ucode":"956432CE7B7761","user_header":"https://static001.geekbang.org/account/avatar/00/12/23/66/413c0bb5.jpg","comment_is_top":false,"comment_ctime":1566952479,"is_pvip":false,"replies":[{"id":"47917","content":"å¯ä»¥è®¾ç½®çš„ï¼Œä½†æ˜¯æœ‰æ—¶å€™åº”ç”¨å±‚éœ€è¦æ„ŸçŸ¥å¤„ç†è¿™æ ·çš„å¼‚å¸¸","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1567004786,"ip_address":"","comment_id":128694,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5861919775","product_id":100032701,"comment_content":"TCPæœ¬èº«çš„keep-aliveçš„æ—¶é—´æ˜¯å¯ä»¥è‡ªå·±è®¾ç½®çš„å—ï¼Ÿå¦‚æœæ˜¯å¯ä»¥è‡ªå·±è®¾ç½®çš„ï¼Œä¸ºä½•è¿˜éœ€è¦è‡ªå·±å®ç°è¿™ä¸ªæœºåˆ¶ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465060,"discussion_content":"å¯ä»¥è®¾ç½®çš„ï¼Œä½†æ˜¯æœ‰æ—¶å€™åº”ç”¨å±‚éœ€è¦æ„ŸçŸ¥å¤„ç†è¿™æ ·çš„å¼‚å¸¸","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567004786,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357655,"user_name":"å¼ è´ºé¾™","can_delete":false,"product_type":"c1","uid":1862219,"ip_address":"ä¸Šæµ·","ucode":"209B08E3E7075A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKSjC36vSdPiaibQqrVicXYk7pvia1JKpY8aib9DBNMBHIPVxPE19wP9MTm63akRp6uYBjFibEk6XytrgNg/132","comment_is_top":false,"comment_ctime":1663544645,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1663544645","product_id":100032701,"comment_content":"ä¿æ´»æ˜¯åº”ç”¨å±‚çš„åŠ¨ä½œå¯ä»¥ç”¨äºudpï¼Œåœ¨æ•°æ®ä¸­å¿ƒé›†ç¾¤ä¸­å¤šä¸ªä¸»æœºçš„é€šè®¯ä¹Ÿæœ‰ä½¿ç”¨udpé€šè®¯çš„åœºæ™¯ï¼Œä¿æ´»çš„ä½œç”¨è¿˜æ˜¯ç›¸å½“å¤§çš„ï¼›ä¿æ´»ä¼šå ç”¨é¢å¤–å¸¦å®½ï¼Œä½†ç”±äºåªåœ¨æ— ä¸šåŠ¡æ¶ˆæ¯æ—¶ä¼ é€ï¼Œå› æ­¤ä¸ä¼šå½±å“æ­£å¸¸ä¸šåŠ¡ä¿¡æ¯çš„ä¼ é€ï¼›å¤šæ¬¡ç¡®è®¤æ˜¯ä¸ºäº†é¿å…å¶ç„¶ç½‘ç»œæŠ–åŠ¨é€ æˆçš„æ¶ˆæ¯ä¼ é€è¶…æ—¶","like_count":0},{"had_liked":false,"id":321035,"user_name":"Mandone","can_delete":false,"product_type":"c1","uid":1116017,"ip_address":"","ucode":"FE236389CEF200","user_header":"https://static001.geekbang.org/account/avatar/00/11/07/71/d3049207.jpg","comment_is_top":false,"comment_ctime":1636626546,"is_pvip":true,"replies":[{"id":"116707","content":"httpçš„keep-aliveä¸æ˜¯æˆ‘è¿™é‡Œçš„å¿ƒè·³ã€‚<br>æˆ‘è¿™é‡Œçš„æ„æ€æ˜¯æŒ‡ï¼Œé€šè¿‡åœ¨å®¢æˆ·ç«¯-æœåŠ¡å™¨ä¹‹é—´å‘é€å®šæœŸçš„æŠ¥æ–‡ï¼Œç”¨æ¥æ£€æŸ¥è¿æ¥çš„æœ‰æ•ˆæ€§ã€‚ä¸ä¸€å®šæ˜¯å®¢æˆ·ç«¯å‘ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ç«¯ä¹Ÿå¯ä»¥å‘é€ç»™å®¢æˆ·ç«¯ã€‚åœ¨å¾ˆå¤šç¨‹åºé‡Œéƒ½å«åš&quot;ping-pang&quot;æŠ¥æ–‡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1636874978,"ip_address":"","comment_id":321035,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1636626546","product_id":100032701,"comment_content":"è€å¸ˆä½ åœ¨ç•™è¨€é‡Œé¢å›å¤ï¼Œå¾ˆå¤šå®é™…çš„åœºæ™¯éƒ½æ˜¯è‡ªå·±åœ¨åº”ç”¨å±‚åŠ å¿ƒè·³ï¼Œè¿™ä¸ªæ˜¯æŒ‡httpçš„keep-aliveä¹ˆï¼Ÿå¦‚æœæ˜¯åœ¨javaå¼€å‘çš„åº”ç”¨ï¼Œè¿™ä¸ªå¿ƒè·³æ˜¯æŒ‡å®¢æˆ·ç«¯å®šæ—¶å‘æœåŠ¡ç«¯å‘èµ·è¯·æ±‚ä¹ˆï¼Ÿå¯ä¸å¯ä»¥ç»“åˆä¸€ä¸‹javaåº”ç”¨ä¸¾ä¸€ä¸ªä¾‹å­","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530194,"discussion_content":"httpçš„keep-aliveä¸æ˜¯æˆ‘è¿™é‡Œçš„å¿ƒè·³ã€‚\næˆ‘è¿™é‡Œçš„æ„æ€æ˜¯æŒ‡ï¼Œé€šè¿‡åœ¨å®¢æˆ·ç«¯-æœåŠ¡å™¨ä¹‹é—´å‘é€å®šæœŸçš„æŠ¥æ–‡ï¼Œç”¨æ¥æ£€æŸ¥è¿æ¥çš„æœ‰æ•ˆæ€§ã€‚ä¸ä¸€å®šæ˜¯å®¢æˆ·ç«¯å‘ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ç«¯ä¹Ÿå¯ä»¥å‘é€ç»™å®¢æˆ·ç«¯ã€‚åœ¨å¾ˆå¤šç¨‹åºé‡Œéƒ½å«åš&amp;quot;ping-pang&amp;quot;æŠ¥æ–‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636874978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":293459,"user_name":"å‡Œç©ºé£èµ·çš„å‰ªåˆ€è…¿","can_delete":false,"product_type":"c1","uid":1243680,"ip_address":"","ucode":"16FBBF4A3B54C6","user_header":"https://static001.geekbang.org/account/avatar/00/12/fa/20/0f06b080.jpg","comment_is_top":false,"comment_ctime":1621394271,"is_pvip":false,"replies":[{"id":"106718","content":"åªèƒ½è¯´ï¼Œå¾ˆå¤šå®é™…çš„åœºæ™¯éƒ½æ˜¯è‡ªå·±åœ¨åº”ç”¨å±‚åŠ å¿ƒè·³æ¥è§£çš„ã€‚æ²¡æœ‰å¥½ä¸å¥½ï¼Œæ˜¯å¤§å®¶æ€»ç»“å‡ºæ¥çš„è¡Œä¹‹æœ‰æ•ˆçš„æ–¹æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1621778779,"ip_address":"","comment_id":293459,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1621394271","product_id":100032701,"comment_content":"è€å¸ˆæˆ‘æƒ³é—®ä¸€ä¸‹ï¼Œ è¿æ¥æ— æ•ˆï¼šä½¿ç”¨Keep-Aliveè¿˜æ˜¯åº”ç”¨å¿ƒè·³æ¥æ£€æµ‹ï¼Ÿ<br>æ˜¯ä¸æ˜¯åº”è¯¥ä½¿ç”¨åº”ç”¨å¿ƒè·³æ¥æ£€æµ‹ï¼Œæ¯”ä½¿ç”¨Keep-Aliveæ›´å¥½å•Šï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520220,"discussion_content":"åªèƒ½è¯´ï¼Œå¾ˆå¤šå®é™…çš„åœºæ™¯éƒ½æ˜¯è‡ªå·±åœ¨åº”ç”¨å±‚åŠ å¿ƒè·³æ¥è§£çš„ã€‚æ²¡æœ‰å¥½ä¸å¥½ï¼Œæ˜¯å¤§å®¶æ€»ç»“å‡ºæ¥çš„è¡Œä¹‹æœ‰æ•ˆçš„æ–¹æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621778779,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240867,"user_name":"å®ˆæœ›","can_delete":false,"product_type":"c1","uid":1437287,"ip_address":"","ucode":"8EAF6C1921B08D","user_header":"https://static001.geekbang.org/account/avatar/00/15/ee/67/03c95ec2.jpg","comment_is_top":false,"comment_ctime":1597106676,"is_pvip":false,"replies":[{"id":"89397","content":"ä½ è¯´çš„è¿™ç§æƒ…å†µï¼Œè¿æ¥æ˜¯éœ€è¦é‡å»ºå»ºç«‹çš„ï¼Œå¿ƒè·³æ£€æµ‹å¦‚æœè§‰å¾—æ…¢ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ä¸åŒçš„å¤„ç†é€»è¾‘æ¥åŠ é€Ÿï¼Œæ¯”å¦‚ä¸€æ—¦å‘ç°è¿æ¥å¼‚å¸¸ï¼Œå°±ç«‹å³å¯åŠ¨ä¸€ä¸ªè¡¥å¿æœºåˆ¶ï¼ŒçŸ­æ—¶é—´å†…è¿›è¡Œé‡è¿ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1597640813,"ip_address":"","comment_id":240867,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1597106676","product_id":100032701,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæœ‰ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸€ä¸‹ï¼Œå‡è®¾æœåŠ¡ç«¯é‡å¯äº†ï¼Œèµ·æ¥åè¿˜æ˜¯ç»‘å®šåŒæ ·çš„ipå’Œç«¯å£ï¼Œè€Œå®¢æˆ·ç«¯ä»ç„¶å‘é€ï¼Œå¦‚ä½•æœ€å¤§ç¨‹åº¦çš„é¿å…å®¢æˆ·ç«¯å‘é€æ•°æ®ä¸¢å¤±å‘¢ï¼Ÿè¿™ç§å¿ƒè·³æ£€æµ‹è²Œä¼¼å‘ç°è¿‡æ…¢ã€‚","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503581,"discussion_content":"ä½ è¯´çš„è¿™ç§æƒ…å†µï¼Œè¿æ¥æ˜¯éœ€è¦é‡å»ºå»ºç«‹çš„ï¼Œå¿ƒè·³æ£€æµ‹å¦‚æœè§‰å¾—æ…¢ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ä¸åŒçš„å¤„ç†é€»è¾‘æ¥åŠ é€Ÿï¼Œæ¯”å¦‚ä¸€æ—¦å‘ç°è¿æ¥å¼‚å¸¸ï¼Œå°±ç«‹å³å¯åŠ¨ä¸€ä¸ªè¡¥å¿æœºåˆ¶ï¼ŒçŸ­æ—¶é—´å†…è¿›è¡Œé‡è¿ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597640813,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1437287,"avatar":"https://static001.geekbang.org/account/avatar/00/15/ee/67/03c95ec2.jpg","nickname":"å®ˆæœ›","note":"","ucode":"8EAF6C1921B08D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299310,"discussion_content":"æ„Ÿè°¢ä½œè€…å›å¤ï¼Œç¡®å®ï¼Œé å¿ƒè·³å¤ªæ…¢ï¼Œè€Œæ‰€è°“çš„é‡å‘æœºåˆ¶ï¼Œåº”è¯¥åŸºäºæœ‰åº”ç­”çš„ï¼Œå‡ºäºæ•ˆç‡è€ƒè™‘ï¼Œæ²¡æœ‰åšåº”ç”¨å±‚çš„è‡ªé—®è‡ªç­”ï¼Œæ‰€ä»¥ä¸€æ—¦è¿æ¥å¼‚å¸¸ï¼Œå…¶å®ä¸å¤ªå¥½åˆ¤æ–­ä¹‹å‰å‘é€çš„æ¶ˆæ¯åˆ°åº•åˆ°è¾¾äº†æ²¡æœ‰ã€‚æœ€åå†æ¬¡æ„Ÿè°¢ä½œè€…çš„å›å¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597652266,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":230270,"user_name":"é¥­","can_delete":false,"product_type":"c1","uid":1610573,"ip_address":"","ucode":"B3F1702D4DE604","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJKj3GbvevFibxwJibTqm16NaE8MXibwDUlnt5tt73KF9WS2uypha2m1Myxic6Q47Zaj2DZOwia3AgicO7Q/132","comment_is_top":false,"comment_ctime":1593331893,"is_pvip":false,"replies":[{"id":"85719","content":"ä½ çš„ç»“è®ºæ˜¯æ¥è‡ªç«¯å£å·çš„é™åˆ¶ä¹ˆï¼Ÿå¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œæˆ‘è§‰å¾—æ˜¯ä¸€ä¸ªé”™è¯¯çš„ç»“è®ºã€‚åé¢ç« èŠ‚è®²åˆ°çš„C10K&#47;C10Mé—®é¢˜ï¼Œå°±æ˜¯åœ¨ç ”ç©¶å•æœºä¸Šçš„è¿æ¥è¾¾åˆ°10Kã€10Mçš„æŠ€æœ¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1593953283,"ip_address":"","comment_id":230270,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1593331893","product_id":100032701,"comment_content":"è€å¸ˆï¼Œä¸€å°æœåŠ¡å™¨åŒæ—¶åœ¨çº¿çš„tcp&#47;ipè¿æ¥æ•°ï¼Œç†è®ºä¸Šæ˜¯ä¸æ˜¯æœ€å¤šåªæœ‰65535ä¸ª?","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499822,"discussion_content":"ä½ çš„ç»“è®ºæ˜¯æ¥è‡ªç«¯å£å·çš„é™åˆ¶ä¹ˆï¼Ÿå¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œæˆ‘è§‰å¾—æ˜¯ä¸€ä¸ªé”™è¯¯çš„ç»“è®ºã€‚åé¢ç« èŠ‚è®²åˆ°çš„C10K/C10Mé—®é¢˜ï¼Œå°±æ˜¯åœ¨ç ”ç©¶å•æœºä¸Šçš„è¿æ¥è¾¾åˆ°10Kã€10Mçš„æŠ€æœ¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593953283,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1610573,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJKj3GbvevFibxwJibTqm16NaE8MXibwDUlnt5tt73KF9WS2uypha2m1Myxic6Q47Zaj2DZOwia3AgicO7Q/132","nickname":"é¥­","note":"","ucode":"B3F1702D4DE604","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288996,"discussion_content":"æ˜¯çš„ï¼Œæˆ‘çœ‹ç«¯å£å·ç æœ€å¤§æ˜¯65535ï¼Œä¸€ä¸ªç«¯å£å¯¹åº”ä¸€ä¸ªè¿æ¥ï¼Œæ‰€ä»¥è¿™ä¹ˆè®¤ä¸ºï¼Œåé¢ç« èŠ‚è¿˜æ²¡å¼€å§‹çœ‹ã€‚è°¢è°¢è€å¸ˆã€‚å¦å¤–æˆ‘æ˜¯åš.netå¼€å‘çš„ï¼Œç°åœ¨åŸºäº.netå®ç°è¯¾å ‚ä¸­çš„æ¡ˆä¾‹ï¼Œå¾ˆå¤šç»†èŠ‚å‚æ•°æ²¡æ³•ç¿»è¯‘äº†ï¼Œç±»åº“å°è£…å¾—å¤ªå¥½äº†ã€‚åˆ·ä¸‹ä¸€éæ—¶ï¼Œæˆ‘æƒ³å­¦ç‚¹C++ï¼Œç„¶åæ¥å®ç°è¯¾å ‚Cè¯­è¨€æ¡ˆä¾‹ï¼Œä¸çŸ¥é“é‡Œé¢çš„ç»†èŠ‚è®¾ç½®ï¼Œc++æ˜¯ä¸æ˜¯éƒ½åŒ…å«äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593954429,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1336951,"avatar":"https://static001.geekbang.org/account/avatar/00/14/66/77/194ba21d.jpg","nickname":"lzh","note":"","ucode":"C3D83DF4230109","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1610573,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJKj3GbvevFibxwJibTqm16NaE8MXibwDUlnt5tt73KF9WS2uypha2m1Myxic6Q47Zaj2DZOwia3AgicO7Q/132","nickname":"é¥­","note":"","ucode":"B3F1702D4DE604","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381217,"discussion_content":"æ˜¯ä½ çš„å¤´å•Šï¼Œnginxåˆ†åˆ†é’Ÿä¸Šåä¸‡å¹¶å‘è¿æ¥ã€‚è‡ªå·±ä¸»åŠ¨è¿åˆ«äººéœ€è¦å ç”¨ç«¯å£ï¼Œè¿™æ—¶å€™å—ç«¯å£æ•°é‡é™åˆ¶ï¼Œåˆ«äººä¸»åŠ¨è¿è‡ªå·±ï¼Œæ²¡æœ‰ç«¯å£é™åˆ¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624956383,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":288996,"ip_address":""},"score":381217,"extra":""}]}]},{"had_liked":false,"id":227065,"user_name":"éƒ‘ç¥–ç…Œ","can_delete":false,"product_type":"c1","uid":1469608,"ip_address":"","ucode":"49A0D2E3279826","user_header":"https://static001.geekbang.org/account/avatar/00/16/6c/a8/1922a0f5.jpg","comment_is_top":false,"comment_ctime":1592274037,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592274037","product_id":100032701,"comment_content":"1. udpä¸éœ€è¦è¿æ¥ï¼Œæ‰€ä»¥æ²¡æœ‰ä¸ºäº†åˆ¤æ–­è¿æ¥æ˜¯å¦å¯è¡Œè€Œç”¨æ•°æ®åŒ…æ¢æ´»çš„å¿…è¦ã€‚ä¸è¿‡ä¹Ÿå¯ä»¥åŒæ ·é€šè¿‡è¿™ä¸ªæ–¹å¼å»åˆ¤æ–­å¯¹ç«¯æ˜¯å¦æ­£å¸¸çš„å­˜åœ¨ç€ã€‚<br>2. è§‰å¾—æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚ å¦‚æœä¸åˆ¤æ–­æ˜¯å¦å­˜åœ¨ï¼Œåˆ™æœ‰å¯èƒ½è¦è€—è´¹é¢å¤–çš„èµ„æºå»ç»´æŠ¤ä¸€ä¸ªå·²ç»æ¶ˆäº¡çš„é“¾æ¥ï¼ŒåŒæ—¶è¿˜ä¼šè®©æœ¬æ¥æ­£å¸¸çš„è¿è¡Œé€»è¾‘è¿è¡Œçš„ä¸æ­£å¸¸ã€‚å¤šæ¬¡æ¢æ´»æ˜¯ä¸ºäº†é¿å…å…³é—­é‡å¯æˆ–è€…å½“å‰å¯¹ç«¯æ­£åœ¨æ‰§è¡Œå…¶ä»–ä»£ç æ²¡åŠæ³•åŠæ—¶å›å¤çš„æƒ…å†µã€‚","like_count":0},{"had_liked":false,"id":205699,"user_name":"ä¸€å‡¡","can_delete":false,"product_type":"c1","uid":1897395,"ip_address":"","ucode":"5E9BE33452AF3B","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f3/b3/0ba7a760.jpg","comment_is_top":false,"comment_ctime":1586704319,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586704319","product_id":100032701,"comment_content":"1ã€UDPé¢å‘æ— è¿æ¥ ä¸éœ€è¦å¿ƒè·³æ£€æµ‹<br>2ã€å å¸¦å®½æ˜¯æ­£å¸¸å•¦ï¼Œæ¶ˆè€—èµ„æºå¯æ¥å—ï¼Œå¤šæ¬¡æ¢æ´»æ˜¯æ’é™¤ä¸¢åŒ…å¯¼è‡´çš„é—®é¢˜ï¼ˆç”µè„‘Pingçš„æ—¶å€™éƒ½æ˜¯å‘å‡ ä¸ªåŒ…è¯æ˜è¿æ¥ï¼‰","like_count":0},{"had_liked":false,"id":204007,"user_name":"æ‹–é‹æ±‰","can_delete":false,"product_type":"c1","uid":1220130,"ip_address":"","ucode":"4A258AD458A623","user_header":"https://static001.geekbang.org/account/avatar/00/12/9e/22/b820e079.jpg","comment_is_top":false,"comment_ctime":1586318193,"is_pvip":false,"replies":[{"id":"76795","content":"å¦‚æœæ˜¯æœåŠ¡ç«¯æ¢æ´»ï¼Œæˆ‘å¯èƒ½å°±ä¸ä¼šä½¿ç”¨selectæ¥å®Œæˆè®¡æ—¶å™¨äº†ï¼Œè¿™é‡Œçš„å®¢æˆ·ç«¯ä¾‹å­åªæ˜¯ä¸€ä¸ªå‚è€ƒå®ç°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1586680444,"ip_address":"","comment_id":204007,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1586318193","product_id":100032701,"comment_content":"selectç›‘å¬socket_fdï¼Œé‚£ä¹ˆå¦‚æœæœåŠ¡ç«¯æ¢æ´»å‘¢ï¼Œä¸€ä¸ªsocket_fdä¸Šå¯èƒ½æœ‰å¤šä¸ªconnection_fdï¼Œè¿™é‡Œé¢åªè¦æœ‰ä¸€ä¸ªè§¦å‘äº†äº‹ä»¶ï¼Œselectè¿”å›çš„å€¼ä¸å°±å¤§äº0äº†å—ï¼Œå¿ƒè·³é€»è¾‘ä¸å°±æ— æ³•è§¦å‘äº†ï¼Ÿè¿˜æ˜¯è¯´å¿ƒè·³é’ˆå¯¹çš„æ˜¯socket_fdï¼Œè€Œä¸æ˜¯connection_fd?","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491038,"discussion_content":"å¦‚æœæ˜¯æœåŠ¡ç«¯æ¢æ´»ï¼Œæˆ‘å¯èƒ½å°±ä¸ä¼šä½¿ç”¨selectæ¥å®Œæˆè®¡æ—¶å™¨äº†ï¼Œè¿™é‡Œçš„å®¢æˆ·ç«¯ä¾‹å­åªæ˜¯ä¸€ä¸ªå‚è€ƒå®ç°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586680444,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167911,"user_name":"A.Windy","can_delete":false,"product_type":"c1","uid":1128146,"ip_address":"","ucode":"254868B270F26D","user_header":"https://static001.geekbang.org/account/avatar/00/11/36/d2/32d3545a.jpg","comment_is_top":false,"comment_ctime":1577961418,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1577961418","product_id":100032701,"comment_content":"çœ‹åˆ°åé¢å°±çŸ¥é“äº†ï¼Œ å˜¿å˜¿ https:&#47;&#47;github.com&#47;froghui&#47;yolanda","like_count":0},{"had_liked":false,"id":167909,"user_name":"A.Windy","can_delete":false,"product_type":"c1","uid":1128146,"ip_address":"","ucode":"254868B270F26D","user_header":"https://static001.geekbang.org/account/avatar/00/11/36/d2/32d3545a.jpg","comment_is_top":false,"comment_ctime":1577961167,"is_pvip":true,"replies":[{"id":"65476","content":"åº”è¯¥æå®šäº†å§","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1578213167,"ip_address":"","comment_id":167909,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1577961167","product_id":100032701,"comment_content":"ç¨‹åºç¼–è¯‘ä¸è¿‡ï¼Œ è¯´lib&#47;common.h æ‰¾ä¸åˆ°ï¼Œ æ€ä¹ˆæå•Š","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480052,"discussion_content":"åº”è¯¥æå®šäº†å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578213167,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1128146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/36/d2/32d3545a.jpg","nickname":"A.Windy","note":"","ucode":"254868B270F26D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":119145,"discussion_content":"æå®šäº†https://github.com/froghui/yolanda","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578218180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157520,"user_name":"bbbi","can_delete":false,"product_type":"c1","uid":1682175,"ip_address":"","ucode":"9A539AEF791428","user_header":"https://static001.geekbang.org/account/avatar/00/19/aa/ff/e2c331e0.jpg","comment_is_top":false,"comment_ctime":1575184883,"is_pvip":false,"replies":[{"id":"60391","content":"åŸºæœ¬æ˜¯è¿™æ ·ã€‚è€Œä¸”åº”ç”¨å±‚å¤„ç†çš„æ—¶å€™ï¼Œè¿˜æœ‰å„ç§å¼‚å¸¸å¤„ç†ï¼Œä¾¿äºæš´éœ²å’Œå‘ç°é—®é¢˜ï¼Œå¦‚æœæ˜¯ä½¿ç”¨tcpåè®®çš„keepaliveï¼Œä¸æ˜¯å¾ˆå®¹æ˜“å¤„ç†è¿™äº›ç»†èŠ‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1575189597,"ip_address":"","comment_id":157520,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1575184883","product_id":100032701,"comment_content":"æˆ‘çš„ç†è§£æ˜¯è¿™æ ·çš„ï¼š<br>TCPåè®®å¹¶æ²¡æœ‰æä¾›ä¸€ä¸ªä¿æ´»çš„æªæ–½ï¼Œå¦‚æœå‡ºç°TCPå·²ç»è¿æ¥åï¼Œä¸¤ç«¯å¼‚å¸¸å´©æºƒæˆ–è€…æ˜¯ç¼–ç é—®é¢˜æ²¡æœ‰åŠæ—¶çš„å…³é—­è¿æ¥(æ¯”å¦‚å®¢æˆ·ç«¯å‘é€--&gt;æœåŠ¡ç«¯æ”¶åˆ°æ¶ˆæ¯è¿”å›æ•°æ®--&gt;å®¢æˆ·ç«¯æ”¶åˆ°åç›´æ¥é€€å‡ºï¼Œæ²¡æœ‰è°ƒç”¨close)ï¼Œé‚£ä¹ˆæœåŠ¡å™¨ä¼šä¸€ç›´ç»´æŠ¤ç€è¿™ä¸ªé€šé“ï¼Œé€ æˆèµ„æºæµªè´¹ã€‚æ‰€ä»¥åŠ å…¥keepaliveï¼Œç³»ç»Ÿæä¾›ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œåœ¨çº¦å®šçš„æ—¶é—´ä¸‹å‘é€æ£€æµ‹åŒ…ã€‚ä½†æ˜¯è¿™ä¸ªè®¡æ—¶å™¨æ£€æµ‹æ—¶é—´é»˜è®¤æ˜¯2å°æ—¶å¼€å§‹æ£€æµ‹æ—¶é—´å¤ªé•¿ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨åº”ç”¨å±‚ï¼Œæ‰‹åŠ¨å‘é€æ£€æµ‹åŒ…","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476454,"discussion_content":"åŸºæœ¬æ˜¯è¿™æ ·ã€‚è€Œä¸”åº”ç”¨å±‚å¤„ç†çš„æ—¶å€™ï¼Œè¿˜æœ‰å„ç§å¼‚å¸¸å¤„ç†ï¼Œä¾¿äºæš´éœ²å’Œå‘ç°é—®é¢˜ï¼Œå¦‚æœæ˜¯ä½¿ç”¨tcpåè®®çš„keepaliveï¼Œä¸æ˜¯å¾ˆå®¹æ˜“å¤„ç†è¿™äº›ç»†èŠ‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575189597,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1682175,"avatar":"https://static001.geekbang.org/account/avatar/00/19/aa/ff/e2c331e0.jpg","nickname":"bbbi","note":"","ucode":"9A539AEF791428","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":68056,"discussion_content":"è€å¸ˆï¼Œå¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œé‚£tcpæ²¡æœ‰é•¿é“¾æ¥ï¼Œè·ŸçŸ­é“¾æ¥ä¹‹åˆ†äº†å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575198692,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":154629,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1574496082,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574496082","product_id":100032701,"comment_content":"æ¢æµ‹TCPè¿æ¥æ˜¯å¦æœ‰æ•ˆï¼ŒKEEP-ALIVEå¯ä»¥å®ç°ï¼Œä¸è¿‡æ—¶é—´å¤ªé•¿å•¦ï¼æ‰€ä»¥ï¼Œé€šå¸¸ä¼šåœ¨åº”ç”¨å±‚ï¼Œè‡ªå·±ä»¿ç…§KEEP-ALIVEçš„åŸç†å¼„ä¸€ä¸ªè‡ªå·±æ›´åŠ å¯ä»¥çµæ´»å¯æ§çš„ã€‚","like_count":0},{"had_liked":false,"id":144854,"user_name":"zhanyd","can_delete":false,"product_type":"c1","uid":1073845,"ip_address":"","ucode":"4C994EE512A3C4","user_header":"https://static001.geekbang.org/account/avatar/00/10/62/b5/4159fa05.jpg","comment_is_top":false,"comment_ctime":1572076203,"is_pvip":false,"replies":[{"id":"55888","content":"å“ªé‡Œæ²¡çœ‹æ‡‚ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1572099174,"ip_address":"","comment_id":144854,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1572076203","product_id":100032701,"comment_content":"è¿™ç¨‹åºï¼Œæ²¡çœ‹æ‡‚ã€‚ã€‚ã€‚","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472138,"discussion_content":"å“ªé‡Œæ²¡çœ‹æ‡‚ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572099174,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139114,"user_name":"15652790052","can_delete":false,"product_type":"c1","uid":1274615,"ip_address":"","ucode":"8A15D673C16A8F","user_header":"","comment_is_top":false,"comment_ctime":1570547969,"is_pvip":false,"replies":[{"id":"54317","content":"è¿™ç§æƒ…å†µä¸‹ç¡®å®ä¸ä¼šå‚»ç­‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1570972969,"ip_address":"","comment_id":139114,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1570547969","product_id":100032701,"comment_content":"è¯·æ•™ä¸€ä¸ªé—®é¢˜: å®¢æˆ·ç«¯å¦‚æœå¥”æºƒäº†-&gt;è¿›ç¨‹é€€å‡ºäº†-&gt;å†…æ ¸ä¼šæ”¶åˆ°å…³äºæ­¤è¿›ç¨‹çš„æ‰€æœ‰èµ„æº,åŒ…æ‹¬socketæ–‡ä»¶-&gt;æ„å‘³è¿™ä¸ªsocketçš„ä¸¤ä¸ªæ–¹å‘éƒ½å…³é—­äº†,æ€ä¹ˆä¼šæ„ŸçŸ¥ä¸åˆ°è€Œå‚»ç­‰å‘¢","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469797,"discussion_content":"è¿™ç§æƒ…å†µä¸‹ç¡®å®ä¸ä¼šå‚»ç­‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570972969,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":137220,"user_name":"é™ˆè¯š","can_delete":false,"product_type":"c1","uid":1338751,"ip_address":"","ucode":"138DD00D245FEE","user_header":"https://static001.geekbang.org/account/avatar/00/14/6d/7f/e1c189c7.jpg","comment_is_top":false,"comment_ctime":1569658537,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1569658537","product_id":100032701,"comment_content":"å¦‚æœèƒ½æ”¶åˆ°æœåŠ¡å™¨ç«¯çš„åº”ç­”ï¼Œåˆ™ç»“æŸä¿æ´»ï¼Œå°†ä¿æ´»æ—¶é—´ç½®ä¸º 0ã€‚<br><br>---&gt;<br>å¦‚æœèƒ½æ”¶åˆ°æœåŠ¡å™¨ç«¯çš„åº”ç­”ï¼Œåˆ™ç»“æŸä¿æ´»ï¼Œå°†ä¿æ´»æ—¶é—´ç½®ä¸ºKEEP_ALIVE_TIMEï¼Œå³æ¢å¤åˆå€¼","like_count":0,"discussions":[{"author":{"id":1851730,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/ooYDTtTQHL9CZQmonDOQSC4Af9S4uqicXzUicOqEJqSOtHyOZ81PTpxcTqK5ibNHsaNWJIuHiaVcxB8gIo9RNXsshA/132","nickname":"å°å¶","note":"","ucode":"EFD624AD6B2686","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387959,"discussion_content":"æˆ‘ä¹Ÿæ˜¯è¿™ä¹ˆè®¤ä¸ºï¼ŒåŸæ–‡æ˜¯ä¸æ˜¯é”™äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628509174,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136303,"user_name":"æœ‰ç‚¹æ„æ€","can_delete":false,"product_type":"c1","uid":1399454,"ip_address":"","ucode":"67F55604E8A548","user_header":"https://static001.geekbang.org/account/avatar/00/15/5a/9e/8f2ccc1d.jpg","comment_is_top":false,"comment_ctime":1569405561,"is_pvip":true,"replies":[{"id":"52207","content":"æ¯ç§’ä¸€æ¬¡ä¼šä¸ä¼šå¤ªå¿«äº†ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1569408068,"ip_address":"","comment_id":136303,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1569405561","product_id":100032701,"comment_content":"è€å¸ˆ ä½ å¥½<br>ç°åœ¨åšçš„é¡¹ç›®ä¸­è¦ç”¨åˆ°å¿ƒè·³ï¼Œå…·ä½“æ˜¯è¿™æ ·çš„<br>æœåŠ¡ç«¯ä¸€ä¸ª å®¢æˆ·ç«¯å¤šä¸ª<br>æ¯ä¸ªå®¢æˆ·ç«¯ä¼šæŒç»­çš„å¾€æœåŠ¡ç«¯å‘é€ä»ç½‘å¡æŠ“å–çš„æµé‡ï¼Œå¦‚æœæŸæ®µæ—¶é—´ç½‘å¡æ²¡æœ‰æµé‡å°±ä¸å‘ ä½†æ˜¯è¿æ¥è¿˜éœ€è¦ç»´æŒ ä¹‹å‰ç”¨çš„keepalive ç°åœ¨æƒ³æ¢æˆåº”ç”¨å±‚å¿ƒè·³<br>æƒ³åˆ°çš„æ–¹æ¡ˆå¦‚ä¸‹:<br>å®¢æˆ·ç«¯å¼€å¯çº¿ç¨‹1æ¥å‘é€æŠ“åˆ°çš„æµé‡ å¹¶ä¸”æ¯é—´éš”1ç§’å°±å‘é€ä¸€æ¬¡å¿ƒè·³ç»™æœåŠ¡ç«¯ æœåŠ¡ç«¯æ”¶åˆ°å¿ƒè·³ä¼šå›å¤ä¸€ä¸‹<br>åŒæ—¶å¼€å¯å¦å¤–ä¸€ä¸ªçº¿ç¨‹2å¯ç”¨selectå’Œrecvæ¥æ¥æ”¶å¿ƒè·³å“åº” å¦‚æœåœ¨ 3ç§’å†…æ²¡æ¥å—åˆ°å¿ƒè·³ é‚£ä¹ˆå°±åˆ¤æ–­è¿æ¥æ–­å¼€<br><br>è€å¸ˆä½ è§‰å¾—è¿™ç§æ–¹æ¡ˆå¯ä»¥ä¹ˆ æœ‰ä»€ä¹ˆç¼ºç‚¹ä¹ˆ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468556,"discussion_content":"æ¯ç§’ä¸€æ¬¡ä¼šä¸ä¼šå¤ªå¿«äº†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569408068,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1306092,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ61zTDmLk7IhLJn6seBPOwsVaKIWUWaxk5YmsdYBZUOYMQCsyl9iaQVSg9U5qJVLLOCFUoLUuYnRA/132","nickname":"fjpcode","note":"","ucode":"C32C5E3ECB9A90","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":66547,"discussion_content":"æˆ‘è§‰å¾—æ²¡å¿…è¦é«˜ä¸¤ä¸ªçº¿ç¨‹å§ï¼Œæ—¢ç„¶ç”¨åˆ°äº†select, å¯ä»¥åˆ©ç”¨selectçš„timeoutæœºåˆ¶æ¥åšå¿ƒè·³ä¿æ´»ï¼Œåªéœ€è¦è®°å½•ä¸€ä¸‹ä¸Šä¸€æ¬¡å‘é€å¿ƒè·³çš„æ—¶é—´å°±å¯ä»¥äº†ï¼Œä¾‹å¦‚selectè¶…æ—¶æ—¶é—´è®¾ç½®æˆ500msã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575083729,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1399454,"avatar":"https://static001.geekbang.org/account/avatar/00/15/5a/9e/8f2ccc1d.jpg","nickname":"æœ‰ç‚¹æ„æ€","note":"","ucode":"67F55604E8A548","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21127,"discussion_content":"å¦‚æœå°†é—´éš”æ—¶é—´æ”¹å¤§ä¸€ç‚¹æ¯”å¦‚3ç§’ é‚£selectçš„æ—¶å€™æˆ‘å°±å°†è¶…æ—¶æ—¶é—´è®¾æˆ9ç§’\nè¶…æ—¶æ—¶é—´æ˜¯é—´éš”æ—¶é—´çš„3å€ ç±»ä¼¼äºä½ çš„å®ä¾‹ä»£ç é‡Œé¢é€šè¿‡å‘é€ä¸‰æ¬¡æ¥åˆ¤æ–­è¿æ¥è¿˜åœ¨ä¸åœ¨\nä½ çœ‹è¿™æ ·å¯ä»¥ä¹ˆ\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569422857,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132647,"user_name":"å†·é›¨","can_delete":false,"product_type":"c1","uid":1082022,"ip_address":"","ucode":"2ED2978575862F","user_header":"https://static001.geekbang.org/account/avatar/00/10/82/a6/01ee14d5.jpg","comment_is_top":false,"comment_ctime":1568184702,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568184702","product_id":100032701,"comment_content":"ç¬¬ä¸€é¢˜:udpå¯ä»¥ä½¿ç”¨åŒæ ·çš„æ–¹å¼<br>ç¬¬äºŒé¢˜:ç¡®å®å ç”¨å¸¦å®½ï¼Œä½†ä¸€æ–¹é¢ping-pongæŠ¥æ–‡å¤§å°æ¯”è¾ƒå°ï¼Œå¸¦å®½å ç”¨æœ‰é™ï¼Œå¦ä¸€æ–¹é¢åŠæ—¶ç¡®è®¤è¿æ¥æ˜¯å¦å¯ç”¨æ¯”å¸¦å®½çš„æŸè€—è¦é‡è¦çš„å¤šã€‚ä¸ºä»€ä¹ˆè¦å¤šæ¬¡æ‰èƒ½ç¡®è®¤å‘¢ï¼Œå› ä¸ºç½‘ç»œæŠ–åŠ¨å¯èƒ½å¯¼è‡´pingæ¶ˆæ¯æ²¡æœ‰æ”¶åˆ°æˆ–è€…pongæ¶ˆæ¯æ²¡æœ‰è¿”å›ï¼Œå¦‚æœä¸€æ¬¡å°±å…³é—­ï¼Œå¾ˆå®¹æ˜“å¯¼è‡´è¯¯æ€ï¼Œè€Œä¸”socketå»ºç«‹çš„æˆæœ¬ä¹Ÿæ¯”è¾ƒé«˜ï¼Œå¤šæ¬¡ç¡®è®¤å¯¹åº”ç”¨ç¨‹åºæ¥è¯´ä¹Ÿæ˜¯å¯ä»¥æ¥å—çš„ã€‚","like_count":0},{"had_liked":false,"id":132447,"user_name":"Rancood","can_delete":false,"product_type":"c1","uid":1204333,"ip_address":"","ucode":"052BDF2221F480","user_header":"https://static001.geekbang.org/account/avatar/00/12/60/6d/e2576fda.jpg","comment_is_top":false,"comment_ctime":1568124164,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568124164","product_id":100032701,"comment_content":"UDPæœ¬èº«å°±æ˜¯æ— è¿æ¥çš„ï¼Œä¸éœ€è¦æ¢æ´»ï¼›ç°åœ¨å¸¦å®½å¯ä»¥å¿½ç•¥ä¸è®¡äº†ï¼Œæœ‰æ—¶å€™å¯èƒ½å› ä¸ºç½‘ç»œåŸå› æŠ¥æ–‡ä¸å¯è¾¾ï¼Œæ‰€ä»¥éœ€è¦å¤šè¯•å‡ æ¬¡","like_count":0},{"had_liked":false,"id":131975,"user_name":"å¦ä¸€åŠæ£‰èŠ±ç³–","can_delete":false,"product_type":"c1","uid":1593363,"ip_address":"","ucode":"C11266794FBA5B","user_header":"https://static001.geekbang.org/account/avatar/00/18/50/13/104d9501.jpg","comment_is_top":false,"comment_ctime":1567997551,"is_pvip":false,"replies":[{"id":"50783","content":"è¿™ä¸ªæ˜¯ä½ å·¥ä½œä¸­ç¢°åˆ°è¿‡çš„ï¼Œè¿˜æ˜¯ä½ è‡ªå·±æ„æƒ³å‡ºæ¥çš„æ¡ˆä¾‹ï¼Ÿ<br><br>æœ¬è´¨ä¸Šï¼Œä½ é—®çš„é—®é¢˜æ˜¯ç½‘ç»œæœ‰å»¶è¿Ÿï¼Œå¯¼è‡´æ£€æµ‹æ—¶é—´ä¹Ÿæœ‰å»¶è¿Ÿï¼Œæˆ‘è§‰å¾—è¿™ä¸ªæ˜¯å®Œå…¨æ­£å¸¸çš„ï¼Œå› ä¸ºæˆ‘ä»¬çš„ç¨‹åºæ˜¯&quot;ä¼å›¾&quot;å‘ç°å¯¹ç«¯æ˜¯å¦downæ‰äº†ï¼Œæ˜¯ä¸€ä¸ªåçŸ¥åè§‰å‹çš„ï¼Œè‚¯å®šæ˜¯éœ€è¦æ—¶é—´åˆ¤æ–­çš„ã€‚ä¸€èˆ¬æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®è¿™ä¸ªNçš„å€¼æ¥è¿›è¡Œè°ƒæ•´ã€‚æ¯”å¦‚N=3ï¼Œä¸‰ä¸ªåŒ…ä¸å›å°±è®¤ä¸ºdownæ‰äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1568189435,"ip_address":"","comment_id":131975,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567997551","product_id":100032701,"comment_content":"åœ¨å¯¹ç«¯è®¡ç®—èƒ½åŠ›ç´§å¼ ã€æˆ–è€…ç½‘ç»œå»¶è¿Ÿæ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œä»ç„¶ä¼šå¯¹æ¯ä¸€ä¸ªpingåŒ…éƒ½åšå›å¤ï¼Œä½†æ˜¯æœ¬ç«¯å¯èƒ½åœ¨å‘äº†ç¬¬KEEP_ALIVE_PROBETIMES-1ä¸ªåŒ…ä¹‹åæ‰æ”¶åˆ°å¯¹ç«¯é’ˆå¯¹ç¬¬ä¸€ä¸ªpingåšçš„å›å¤ã€‚è¿™æ ·è™½ç„¶æœ¬ç«¯å°±ä¼šè®¤ä¸ºè¿™ä¸ªè¿æ¥æ˜¯æœ‰æ•ˆçš„ï¼Œä½†ä¼šåœ¨æ¥ä¸‹æ¥æ¥æ”¶åˆ°å¥½å‡ ä¸ªpongåŒ…ï¼›å¦‚æœè¿™ä¸€æ‰¹çš„æŸä¸€ä¸ªpongåŒ…çš„åˆ°æ¥æ—¶é—´æ­£å¥½è½åœ¨æœ¬ç«¯ç¬¬äºŒæ¬¡ç”±äºselectè¶…æ—¶è€Œè¿›è¡Œé“¾è·¯æ¢æµ‹çš„æ—¶é—´æ®µå†…çš„è¯ï¼Œåˆ™å¯èƒ½äº§ç”Ÿâ€œå¯¹ç«¯å®é™…å·²ç»downäº†ï¼Œä½†æ˜¯æœ¬ç«¯è¿‡å¾ˆä¹…æ‰èƒ½æ£€æµ‹åˆ°ï¼ˆå¯èƒ½è¦è¾¾åˆ°Nä¸ªselectè¶…æ—¶æ—¶é—´ï¼‰â€çš„é—®é¢˜ã€‚è¿™ä¸ªé—®é¢˜è¯¥æ€ä¹ˆè§£å†³ï¼Ÿè¦ç»™pingå’ŒpongåŠ åºåˆ—å·ä»¥ç”¨äºåŒ¹é…ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466706,"discussion_content":"è¿™ä¸ªæ˜¯ä½ å·¥ä½œä¸­ç¢°åˆ°è¿‡çš„ï¼Œè¿˜æ˜¯ä½ è‡ªå·±æ„æƒ³å‡ºæ¥çš„æ¡ˆä¾‹ï¼Ÿ\n\næœ¬è´¨ä¸Šï¼Œä½ é—®çš„é—®é¢˜æ˜¯ç½‘ç»œæœ‰å»¶è¿Ÿï¼Œå¯¼è‡´æ£€æµ‹æ—¶é—´ä¹Ÿæœ‰å»¶è¿Ÿï¼Œæˆ‘è§‰å¾—è¿™ä¸ªæ˜¯å®Œå…¨æ­£å¸¸çš„ï¼Œå› ä¸ºæˆ‘ä»¬çš„ç¨‹åºæ˜¯&amp;quot;ä¼å›¾&amp;quot;å‘ç°å¯¹ç«¯æ˜¯å¦downæ‰äº†ï¼Œæ˜¯ä¸€ä¸ªåçŸ¥åè§‰å‹çš„ï¼Œè‚¯å®šæ˜¯éœ€è¦æ—¶é—´åˆ¤æ–­çš„ã€‚ä¸€èˆ¬æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®è¿™ä¸ªNçš„å€¼æ¥è¿›è¡Œè°ƒæ•´ã€‚æ¯”å¦‚N=3ï¼Œä¸‰ä¸ªåŒ…ä¸å›å°±è®¤ä¸ºdownæ‰äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568189435,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131928,"user_name":"Smirk","can_delete":false,"product_type":"c1","uid":1230263,"ip_address":"","ucode":"F677072767F0A4","user_header":"https://static001.geekbang.org/account/avatar/00/12/c5/b7/87e7e865.jpg","comment_is_top":false,"comment_ctime":1567984208,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1567984208","product_id":100032701,"comment_content":"å å¸¦å®½é‚£ä¸ªé—®é¢˜å¿™æ—¶ä¸ç”¨æ¢æ´»åŒ…ï¼Œæ­£å¸¸é€šè®¯æœ¬èº«å¯ä»¥åˆ¤æ˜¯ä¸æ˜¯æ´»ï¼Œé—²æ—¶æ¢æ´»åŒ…æ•°æ®é‡æ¯”æ­£å¸¸é€šè®¯åŒ…å°å¾ˆå¤šã€‚","like_count":0},{"had_liked":false,"id":131278,"user_name":"wyf2317","can_delete":false,"product_type":"c1","uid":1236837,"ip_address":"","ucode":"7F3E61A6188B39","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ub4icibeRLzff8Nf6ORsolib9KHtmeu3d4cCCAFd3Xgah3v78WfDYQB7WKq9iaIPXPwHBxw7mkBP9wYxDGMT9m1Rbw/132","comment_is_top":false,"comment_ctime":1567689121,"is_pvip":true,"replies":[{"id":"50821","content":"å“ˆå“ˆï¼Œ9102å¹´ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1568195219,"ip_address":"","comment_id":131278,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567689121","product_id":100032701,"comment_content":"1 udpä¸éœ€è¦<br>2 9102å¹´äº†ï¼Œè¿™ç‚¹å¸¦å®½ä¸æˆé—®é¢˜ã€‚åå€’æ˜¯ä¿æŒè¿æ¥å¸¦æ¥çš„ä¸€ç³»åˆ—èµ„æºæ¶ˆè€—æ‰æ˜¯é‡ç‚¹ã€‚å¢åŠ å¿ƒè·³æ£€æŸ¥å¯ä»¥å¿«é€Ÿç¡®è®¤å®¢æˆ·ç«¯æ˜¯å¦å­˜æ´»æˆ–è€…å®¢æˆ·ç«¯å¿«é€Ÿé‡è¿ã€‚å‡å°‘èµ„æºæ¶ˆè€—ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466367,"discussion_content":"å“ˆå“ˆï¼Œ9102å¹´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568195219,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130073,"user_name":"è‹¦è¡Œåƒ§","can_delete":false,"product_type":"c1","uid":1055334,"ip_address":"","ucode":"726024A9A9CF44","user_header":"https://static001.geekbang.org/account/avatar/00/10/1a/66/2d9db9ed.jpg","comment_is_top":false,"comment_ctime":1567383660,"is_pvip":false,"replies":[{"id":"50840","content":"å¥½å§ï¼Œæˆ‘åº”è¯¥åŠ ä¸Šä½ è¯´çš„&quot;ç‚¹é¢˜&quot;çš„ã€‚æˆ‘åœ¨æ€»ç»“é‡ŒåŠ äº†ä¸€ç‚¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1568196415,"ip_address":"","comment_id":130073,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567383660","product_id":100032701,"comment_content":"ä½¿ç”¨å¿ƒè·³åŒ…ä¸å°±æ˜¯ä¸ºäº†ä¿æŒkeep aliveå—ï¼Ÿæ–‡ç« å†…å®¹åˆ°æœ€åä¹Ÿæ²¡æœ‰ç‚¹é¢˜ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465788,"discussion_content":"å¥½å§ï¼Œæˆ‘åº”è¯¥åŠ ä¸Šä½ è¯´çš„&amp;quot;ç‚¹é¢˜&amp;quot;çš„ã€‚æˆ‘åœ¨æ€»ç»“é‡ŒåŠ äº†ä¸€ç‚¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568196415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129826,"user_name":"æ²‰æ·€çš„æ¢¦æƒ³","can_delete":false,"product_type":"c1","uid":1177315,"ip_address":"","ucode":"BCB7C26F9D214B","user_header":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","comment_is_top":false,"comment_ctime":1567277930,"is_pvip":false,"replies":[{"id":"50842","content":"æˆ‘åº”è¯¥è¿˜æŠŠheatbeatsç½®ä¸º0äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1568196684,"ip_address":"","comment_id":129826,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1567277930","product_id":100032701,"comment_content":"è€å¸ˆåœ¨pingclientçš„å®ç°ä¸­ï¼Œä¸ºä»€ä¹ˆåªè¦è¯¥ä¸€ä¸‹ç»“æ„ä½“çš„å­—æ®µå€¼å°±èƒ½é‡ç½®æ¢æ´»æ—¶é—´äº†ï¼Ÿ<br><br>        if (FD_ISSET(socket_fd, &amp;readmask)) {<br>            &#47;&#47;......<br>            &#47;&#47; é‡ç½®æ¢æ´»æ—¶é—´<br>            tv.tv_sec = KEEP_ALIVE_TIME;<br>        }","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465668,"discussion_content":"æˆ‘åº”è¯¥è¿˜æŠŠheatbeatsç½®ä¸º0äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568196684,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1593363,"avatar":"https://static001.geekbang.org/account/avatar/00/18/50/13/104d9501.jpg","nickname":"å¦ä¸€åŠæ£‰èŠ±ç³–","note":"","ucode":"C11266794FBA5B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8406,"discussion_content":"çœ‹ä¸€ä¸‹selectè°ƒç”¨çš„æœ€åä¸€ä¸ªå‚æ•°çš„æ„ä¹‰å§ã€‚ã€‚ä»£ç é‡Œï¼Œæ”¹å®Œè¿™ä¸ªæ—¶é—´ä¹‹åï¼Œå°±åˆè¿›selectäº†ï¼Œç”¨tvä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567997789,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128864,"user_name":"å¼ ç«‹å","can_delete":false,"product_type":"c1","uid":1231713,"ip_address":"","ucode":"173B938DD9478A","user_header":"https://static001.geekbang.org/account/avatar/00/12/cb/61/b62d8a3b.jpg","comment_is_top":false,"comment_ctime":1566978142,"is_pvip":false,"replies":[{"id":"47911","content":"å¾ˆè€çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¤§æ¦‚åœ¨2014-1015å¹´çš„java-nats clientç‰ˆæœ¬å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1567004399,"ip_address":"","comment_id":128864,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566978142","product_id":100032701,"comment_content":"è¯·é—®ä¸‹ä½œè€…ï¼Œä½ æåˆ°çš„natså®¢æˆ·ç«¯çš„é—®é¢˜ï¼Œæ˜¯natså®¢æˆ·ç«¯çš„é‚£ä¸ªç‰ˆæœ¬çš„bug","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465142,"discussion_content":"å¾ˆè€çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¤§æ¦‚åœ¨2014-1015å¹´çš„java-nats clientç‰ˆæœ¬å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567004399,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128860,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1566977840,"is_pvip":false,"replies":[{"id":"47912","content":"é‚£æ˜¯ä¸€ä¸ªè¿‡æ—¶çš„è¿æ¥ï¼Œæ˜¾ç„¶åº”è¯¥è¢«æœåŠ¡å™¨ç«¯æ£€æµ‹åˆ°ï¼Œå¹¶æ‘˜æ‰è¿™ä¸ªè¿‡æ—¶çš„å ç”¨ç³»ç»Ÿèµ„æºçš„è¿æ¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1567004447,"ip_address":"","comment_id":128860,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566977840","product_id":100032701,"comment_content":"å…¶å®æˆ‘ä¹Ÿåœ¨æƒ³æ¯”å¦‚å®¢æˆ·ç«¯å´©æºƒé‡å¯è¿‡å ç„¶åé‡æ–°å»ºç«‹è¿æ¥ åˆ›å»ºsocket é‚£ä¹‹å‰é‚£ä¸ªè¿æ¥æ˜¯æ€ä¹ˆå¤„ç†çš„ï¼Ÿå› ä¸ºä¹‹å‰é‚£ä¸ªæœåŠ¡å™¨é‚£ä¸ªè¿æ¥å‘å¾€çš„è¿˜æ˜¯æˆ‘ æ‰€ä»¥å°±æƒ³çŸ¥é“è¿™ä¸ªæ—¶å€™æ˜¯æ€ä¹ˆå¤„ç†çš„","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465140,"discussion_content":"é‚£æ˜¯ä¸€ä¸ªè¿‡æ—¶çš„è¿æ¥ï¼Œæ˜¾ç„¶åº”è¯¥è¢«æœåŠ¡å™¨ç«¯æ£€æµ‹åˆ°ï¼Œå¹¶æ‘˜æ‰è¿™ä¸ªè¿‡æ—¶çš„å ç”¨ç³»ç»Ÿèµ„æºçš„è¿æ¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567004447,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128818,"user_name":"QQæ€ª","can_delete":false,"product_type":"c1","uid":1211223,"ip_address":"","ucode":"1A39B8433D9208","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","comment_is_top":false,"comment_ctime":1566967307,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566967307","product_id":100032701,"comment_content":"1.udpæœ¬æ¥æ— è¿æ¥ï¼Œä¸éœ€è¦æ¢æ´»<br>2.å¤šæ¬¡æ¢æ´»çš„åŸå› å¯èƒ½ä¼šå‘ç”Ÿæ¢æ´»ä¸¢åŒ…","like_count":0},{"had_liked":false,"id":128789,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1566963258,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566963258","product_id":100032701,"comment_content":"æ€è€ƒé¢˜:<br>1.é€‚ç”¨ä¹Ÿä¸é€‚ç”¨ï¼Œå…·ä½“çœ‹åº”ç”¨åœºæ™¯ï¼ŒUDPæœ¬èº«æ— è¿æ¥ï¼Œæ ¹æœ¬æ²¡æœ‰å¿…è¦ä¿æ´»ï¼Œå¦‚æœæ˜¯åŸºäºUDPåšä¸€äº›å…¶å®ƒåè®®å¦‚HTTP&#47;3ï¼Œå°±æ˜¯åœ¨UDPå±‚åšçš„æ¢æ´»ã€‚<br>2.æ¢æ´»æŠ¥æ–‡å¾ˆå°ï¼Œä½†å¦‚æœæ¯å°æœºå™¨ï¼Œæ¯ä¸ªåº”ç”¨ï¼Œæ¯ä¸ªè¿æ¥éƒ½å¤§é‡å­˜åœ¨æ¢æ´»ï¼Œé‚£æ•´ä¸ªç½‘ç»œç¯å¢ƒå°±éƒ½æ˜¯æ¢æ´»æŠ¥æ–‡äº†ï¼Œå¸¦å®½ç¡®å®ä¼šè¢«å¤§é‡å ç”¨ã€‚ä¸ºä»€ä¹ˆè¦å¤šæ¬¡æ¢æ´»ï¼Œå› ä¸ºæ¢æ´»æŠ¥æ–‡ä¹Ÿå¯èƒ½å‘ç”Ÿä¸¢åŒ…ã€‚","like_count":0},{"had_liked":false,"id":128742,"user_name":"é”¦","can_delete":false,"product_type":"c1","uid":1468298,"ip_address":"","ucode":"CB0EB4B68C468B","user_header":"https://static001.geekbang.org/account/avatar/00/16/67/8a/babd74dc.jpg","comment_is_top":false,"comment_ctime":1566955775,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566955775","product_id":100032701,"comment_content":"1,æˆ‘è§‰å¾—åŒæ ·é€‚åˆudpåè®®ï¼Œè™½ç„¶udpæ˜¯æ— è¿æ¥çš„ï¼Œä½†æ˜¯ä¸ºäº†æ›´å¥½çš„åˆ©ç”¨ç½‘ç»œèµ„æºï¼Œè¿˜æ˜¯éœ€è¦æ¢æ´»æœºåˆ¶<br>2,æ¢æ´»æœºåˆ¶è®¾ç½®åˆç†çš„æƒ…å†µä¸‹å¯¹å¸¦å®½å½±å“ä¸å¤§ï¼Œèµ„æºæ¶ˆè€—ä¸å¤šï¼Œåˆ°ä½œç”¨å¾ˆå¤§ï¼Œæ€§ä»·æ¯”å¾ˆé«˜<br>éœ€è¦å¤šæ¬¡æ¢æ´»æ˜¯ä¸ºäº†double checkï¼Œå¯èƒ½æœ‰äº›å›åŒ…è¿˜æ²¡æ‰¾åˆ°å›å®¶çš„è·¯ï¼Œä¹Ÿæœ‰å¯èƒ½å¯¹ç«¯æ­£åœ¨æ•…éšœæ¢å¤ï¼Œéœ€è¦ä¸€äº›æ—¶é—´ã€‚","like_count":0},{"had_liked":false,"id":128705,"user_name":"webmin","can_delete":false,"product_type":"c1","uid":1047014,"ip_address":"","ucode":"98B0CA882454E8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f9/e6/47742988.jpg","comment_is_top":false,"comment_ctime":1566953076,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1566953076","product_id":100032701,"comment_content":"é•¿è¿æ¥çš„æƒ…å†µä¸‹ï¼Œæœ€å¥½è¦åšåŒå‘æ¢æµ‹ã€‚<br>UDPä¹Ÿé€‚ç”¨ï¼ŒUPDä¸‹çš„æ¢æµ‹å¯ä»¥çŸ¥é“æ˜¯å¦ç½‘ç»œå‘ç”Ÿæ•…éšœã€‚<br>å•æ¬¡çœ‹æ¯”è¾ƒå°ï¼Œè¿æ¥æ•°çš„é‡çº§å¾ˆå¤§çš„è¯ï¼ŒåŠ èµ·æ¥æ¢æµ‹å ç”¨çš„å¸¦å®½å°±ä¼šå¾ˆå¤§ã€‚<br>ä¸€æ¬¡é€šä¿¡åœ¨ç½‘ç»œä¸­æœ‰å¯èƒ½è¦ç»è¿‡å¤šä¸ªè®¾å¤‡ï¼Œå…¶ä¸­æœ‰è®¾å¤‡å¯èƒ½å‡ºç°ç¬æ—¶æ•…éšœï¼Œä¹Ÿå¯èƒ½ä¼šå¤šæ¡é€šè·¯ï¼Œå…¶ä¸­ä¸€æ¡è·¯æœ‰é—®é¢˜ã€‚","like_count":0},{"had_liked":false,"id":128689,"user_name":"æ¨é¢†well","can_delete":false,"product_type":"c1","uid":1145650,"ip_address":"","ucode":"3974A03855168C","user_header":"https://static001.geekbang.org/account/avatar/00/11/7b/32/60089a62.jpg","comment_is_top":false,"comment_ctime":1566951325,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566951325","product_id":100032701,"comment_content":"èƒ½å¤šæ¬¡æ¢æµ‹ï¼Œè¯´æ˜å¯¹ç«¯ææœ‰å¯èƒ½è¿˜å­˜åœ¨ï¼Œåªæ˜¯å› ä¸ºå„ç§åŸå› å¯¼è‡´æ²¡æ”¶åˆ°å›å¤çš„åŒ…ã€‚å› ä¸ºå¦‚æœå¯¹ç«¯ä¸å­˜åœ¨äº†ï¼Œåº”è¯¥ä¼šæ”¶åˆ° RSTï¼Œå¯¼è‡´é“¾æ¥å…³é—­ã€‚","like_count":0},{"had_liked":false,"id":128684,"user_name":"xindoo","can_delete":false,"product_type":"c1","uid":1101718,"ip_address":"","ucode":"AEAF3208E644BC","user_header":"https://static001.geekbang.org/account/avatar/00/10/cf/96/251c0cee.jpg","comment_is_top":false,"comment_ctime":1566950520,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"1566950520","product_id":100032701,"comment_content":"ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘è§‰å¾—ä¸é€‚åˆudpï¼Œudpæœ¬èº«æ˜¯æ— è¿æ¥çš„ï¼Œæ‰€ä»¥å°±æ²¡å¿…è¦æ¢æ´»æ¥ä¿æŒè¿æ¥ã€‚ <br>ç¬¬äºŒä¸ªé—®é¢˜ï¼Œä»¥ç°ä»Šç½‘ç»œä¼ è¾“æ•°æ®é‡çœ‹ï¼Œæ¢æ´»æŠ¥æ–‡åªä¼šå æ‰€æœ‰ä¼ è¾“æ•°æ®é‡æå°éƒ¨åˆ†ï¼Œç”šè‡³å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œæ‰€ä»¥å æœ‰é™è´·æ¬¾ä¸€è¯´å°±æ˜¯ä¼ªå‘½é¢˜ã€‚ è‡³äºéœ€è¦å¤šæ¬¡æ¢æ´»ï¼Œè¿˜æ˜¯ä¸ºäº†é¿å…å› ä¸ºç½‘ç»œä¸¢åŒ…çš„é—®é¢˜å¯¼è‡´çš„è¯¯åˆ¤ã€‚","like_count":0,"discussions":[{"author":{"id":1081922,"avatar":"https://static001.geekbang.org/account/avatar/00/10/82/42/8b04d489.jpg","nickname":"åˆ˜ä¸¹","note":"","ucode":"66594D1C957E15","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6515,"discussion_content":"UDPåº”ç”¨ä¹Ÿåº”è¯¥åœ¨ä¸šåŠ¡ä¸Šåšæ¢æ´»ï¼Œå¦‚æœé•¿æ—¶é—´æ²¡é€šä¿¡ï¼Œå°±æ— æ³•åˆ¤æ–­å¯¹ç«¯çŠ¶æ€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566954721,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1236766,"avatar":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","nickname":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","note":"","ucode":"103543D6E706BF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1081922,"avatar":"https://static001.geekbang.org/account/avatar/00/10/82/42/8b04d489.jpg","nickname":"åˆ˜ä¸¹","note":"","ucode":"66594D1C957E15","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6740,"discussion_content":"dupæœ¬æ¥å°±ä¸å…³å¿ƒçŠ¶æ€å•Š æƒ³å‘å°±å‘ä¹Ÿä¸å…³å¿ƒä½ æ”¶ä¸æ”¶å¾—åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567078510,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6515,"ip_address":""},"score":6740,"extra":""}]}]}]}