{"id":615020,"title":"64｜init 方法：如何为对象传递参数？","content":"<p><strong>课后习题</strong><br>\n请参考字典数据类型，实现自己的字典数据类型，要求当有重复的 key 被修改时，提示用户该 key 重复，不允许修改。如：</p><pre><code>dict1 = MyDict()\ndict1[ 'a' ] = 100\ndict1[ 'a' ] = 200 # 报错，已有名为 'a' 的 key\n</code></pre><p><strong>课程代码、课件及其他相关资料地址</strong><br>\n<a href=\"https://gitee.com/wilsonyin/zero-basics-python\">https://gitee.com/wilsonyin/zero-basics-python</a></p>","comments":[{"had_liked":false,"id":365135,"user_name":"Matthew","can_delete":false,"product_type":"c3","uid":2843865,"ip_address":"广东","ucode":"96093089773740","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKSVuNarJuDhBSvHY0giaq6yriceEBKiaKuc04wCYWOuso50noqDexaPJJibJN7PHwvcQppnzsDia1icZkw/132","comment_is_top":false,"comment_ctime":1672147431,"is_pvip":false,"replies":[{"id":133095,"content":"__setitem__(self,key,value)\n\n它是和设置字典key的魔术方法","user_name":"作者回复","user_name_real":"编辑","uid":1056235,"ctime":1672485181,"ip_address":"广东","comment_id":365135,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"应该重构dict类型里面的哪个方法？麻烦提示下。","like_count":2,"discussions":[{"author":{"id":1056235,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1d/eb/b2123759.jpg","nickname":"尹会生","note":"","ucode":"D1093DBD093617","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":598063,"discussion_content":"__setitem__(self,key,value)\n\n它是和设置字典key的魔术方法","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1672485181,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":385117,"user_name":"蓝定月","can_delete":false,"product_type":"c3","uid":1497795,"ip_address":"上海","ucode":"3765E44A958022","user_header":"https://static001.geekbang.org/account/avatar/00/16/da/c3/4133a67a.jpg","comment_is_top":false,"comment_ctime":1702115788,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"class MyDict(dict):\n    def __setitem__(self, key, value):\n        if key in self.keys():\n            print(&quot;This key already exists!&quot;)\n        else:\n            dict.__setitem__(self, key, value)\n\n\nmy_dict = MyDict()\nmy_dict[&#39;a&#39;] = 100\nmy_dict[&#39;a&#39;] = 200","like_count":2},{"had_liked":false,"id":370659,"user_name":"BoringLei","can_delete":false,"product_type":"c3","uid":2894339,"ip_address":"广东","ucode":"EE1C48FDE9A9E2","user_header":"https://static001.geekbang.org/account/avatar/00/2c/2a/03/6442d0bf.jpg","comment_is_top":false,"comment_ctime":1679059720,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"class MyDict(dict):\n    def __setitem__(self, key, value):\n        if self.__contains__(key):\n            print(f&quot;已有名为 &#39;{key}&#39; 的 key&quot;)\n        else:\n            super().__setitem__(key, value)","like_count":1},{"had_liked":false,"id":395838,"user_name":"尹长拟","can_delete":false,"product_type":"c3","uid":3074007,"ip_address":"北京","ucode":"1EBD42B5BBD934","user_header":"","comment_is_top":false,"comment_ctime":1732205992,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"class Mydict(dict):\n    def __init__(self):\n        super().__init__()\n    \n    def __setitem__(self,key,value):\n        if key in self.keys():\n            print(f&quot;{key}已存在一个值{self[key]}，不允许修改&quot;)\n        \n        else:\n            super().__setitem__(key,value)\n\n    \ndict1 = Mydict()\ndict1[&#39;a&#39;] = 100\ndict1[&#39;b&#39;] = 200\nprint(dict1)\ndict1[&#39;b&#39;] = 300","like_count":0},{"had_liked":false,"id":389048,"user_name":"Geek_c131f7","can_delete":false,"product_type":"c3","uid":3828103,"ip_address":"美国","ucode":"88BB639931161E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/icniaGmw8xiboyC25ic8l7Vf62AOJ9ysHeAZSxPYMAnL8TticuELVSpnZcexwicbyaeVSCdtnN0MNWawrdBcgeLwmhdg/132","comment_is_top":false,"comment_ctime":1711442262,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"class Noupgrate(dict):\n    def __init__(self):\n        self.a = []\n    def __setitem__(self,key,value):\n        self.key = key\n        self.value = value\n        if self.key in self.a:\n            print(f&#39;Error:The key {self.key} has already existed.&#39;)\n        else:\n            super().__setitem__(key,value)\n            self.a.append(self.key)","like_count":0},{"had_liked":false,"id":385060,"user_name":"Geek_631607","can_delete":false,"product_type":"c3","uid":3789991,"ip_address":"广东","ucode":"EAF874838F0BE4","user_header":"","comment_is_top":false,"comment_ctime":1702003538,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"class MyDict(dict):\n\n    def __setitem__(self, key, value):\n        if self.__contains__(key):\n            print(f&quot;{key} 已存在，不允许修改&quot;)\n        else:\n            super().__setitem__(key, value)\n\n\nmydict = MyDict()\nmydict[&#39;a&#39;] = 10\nmydict[&#39;a&#39;] = 11\nprint(mydict)","like_count":0},{"had_liked":false,"id":381311,"user_name":"William","can_delete":false,"product_type":"c3","uid":1346215,"ip_address":"吉林","ucode":"55F5D9DEE485B1","user_header":"https://static001.geekbang.org/account/avatar/00/14/8a/a7/674c1864.jpg","comment_is_top":false,"comment_ctime":1695021632,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"class MyDict(dict):\n\n    def __setitem__(self, key, value):\n        if self.__contains__(key):\n            print(f&quot;已经包含此key:{key}, 不允许重复修改哦～&quot;)\n        else:\n            super().__setitem__(key, value)\n\nmyDict = MyDict()\n\nmyDict.__setitem__(&quot;k1&quot;, &quot;v1&quot;)\n\nprint(myDict)\n\nmyDict.__setitem__(&quot;k1&quot;, &quot;v2&quot;)\n\nprint(myDict)\n\n----\n\n{&#39;k1&#39;: &#39;v1&#39;}\n已经包含此key:k1, 不允许重复修改哦～\n{&#39;k1&#39;: &#39;v1&#39;}","like_count":0},{"had_liked":false,"id":378963,"user_name":"Geek_Mike","can_delete":false,"product_type":"c3","uid":3196376,"ip_address":"云南","ucode":"CFA942192C3B74","user_header":"https://static001.geekbang.org/account/avatar/00/30/c5/d8/c5509b9c.jpg","comment_is_top":false,"comment_ctime":1691052978,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"# 请参考字典数据类型，实现自己的字典数据类型，要求当有重复的 key 被修改时，提示用户该 key 重复，不允许修改。\n\nclass Mydict(dict):\n    def __setitem__(self, key, value):\n        if key in self:\n            print(f&quot;&#39;{key}&#39; has already existed, its value can&#39;t be modifiered.&quot;)\n            print(f&#39;{dic1}\\n&#39;)\n\n        elif key == &#39;class&#39;:\n            key = key.upper()\n            value = value.upper()\n            super().__setitem__(key, value)\n            print(f&quot;{value} has been written into {self}.\\n&quot;)\n        \n        else:\n            super().__setitem__(key, value)\n            print(f&#39;{dic1}\\n&#39;)\n\n        \ndic1 = Mydict({&#39;name&#39;:&#39;Mike&#39;, &#39;age&#39;:18, &#39;city&#39;:&#39;Yuxi&#39;})\ndic1.__setitem__(&#39;name&#39;, &#39;Jerry&#39;)\ndic1.__setitem__(&#39;class&#39;, &#39;mvp&#39;)\ndic1.__setitem__(&#39;gender&#39;, &#39;male&#39;)","like_count":0},{"had_liked":false,"id":368807,"user_name":"yanyu-xin","can_delete":false,"product_type":"c3","uid":1899757,"ip_address":"广东","ucode":"3AA389F9E4C236","user_header":"","comment_is_top":false,"comment_ctime":1676731655,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"class MyDict(dict):\n    def __setitem__(self, key,value):\n        if key in self :\n            print(f&#39;!! 报错，已有名为 &quot; {key} &quot; 的 key,不允许修改&#39;)\n            return &#39;err&#39;\n        else:\n            self.setdefault(key, value) \n        return self\n\n\ndict1 = MyDict({&#39;de&#39;: &#39;Germany&#39;,&#39;sk&#39;:12})\ndict1[&#39;a&#39;] = 100\nprint(&#39;1-- &#39;, dict1)\ndict1[&#39;a&#39;] = 200\nprint(&#39;2-- &#39;, dict1)\ndict1[&#39;b&#39;] = 300\nprint(&#39;3-- &#39;, dict1)","like_count":0},{"had_liked":false,"id":366326,"user_name":"江江儿嘛哩哄","can_delete":false,"product_type":"c3","uid":1928117,"ip_address":"浙江","ucode":"E7D6E59551B7F1","user_header":"https://static001.geekbang.org/account/avatar/00/1d/6b/b5/14586a78.jpg","comment_is_top":false,"comment_ctime":1673584151,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"from collections import UserDict\n\n\nclass MyDict(UserDict):\n    def __setitem__(self, key, value):\n        if key in self.data.keys():\n            print(f&quot;该{key}已存在，不允许修改！&quot;)\n        else:\n            self.data[key] = value\n\n\ndict1 = MyDict()\ndict1[&#39;a&#39;] = 100\ndict1[&#39;a&#39;] = 200","like_count":0},{"had_liked":false,"id":366128,"user_name":"Matthew","can_delete":false,"product_type":"c3","uid":2843865,"ip_address":"江苏","ucode":"96093089773740","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKSVuNarJuDhBSvHY0giaq6yriceEBKiaKuc04wCYWOuso50noqDexaPJJibJN7PHwvcQppnzsDia1icZkw/132","comment_is_top":false,"comment_ctime":1673414741,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100310001,"comment_content":"from collections import UserDict\n\nclass MyDict(UserDict):\n    def __setitem__(self, key, value):\n        if key in self.data.keys():\n            print(f&quot;字典里已经有key {key} ,不能覆盖&quot;)\n        else:\n            self.data[str(key)] = value\n            print(f&#39;字典里没有key {key} ,增加字典元素 “{key}”:{value}&#39;)\n\n# 测试\ndict1 = MyDict()\ndict1[ &#39;a&#39; ] = 100\ndict1[ &#39;a&#39; ] = 200 # 报错，已有名为 &#39;a&#39; 的 key\nprint(dict1[&#39;a&#39;])","like_count":0},{"had_liked":false,"id":366127,"user_name":"PatrickL","can_delete":false,"product_type":"c3","uid":1341431,"ip_address":"上海","ucode":"EF0EC18639B9B2","user_header":"https://static001.geekbang.org/account/avatar/00/14/77/f7/11548247.jpg","comment_is_top":false,"comment_ctime":1673414450,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100310001,"comment_content":"from collections import UserDict\nclass MyDict(UserDict):\n    def __setitem__(self, key, value):\n        if key in self.data.keys():\n            print(f&#39;字典里已有名为{key}的key，不能覆盖。&#39;)\n        else:\n            self.data[key] = value\n\ndict1 = MyDict()\ndict1[&#39;a&#39;] = 100\ndict1[&#39;a&#39;] = 200","like_count":0},{"had_liked":false,"id":366063,"user_name":"月姣","can_delete":false,"product_type":"c3","uid":3228357,"ip_address":"江苏","ucode":"3EB6240054A24A","user_header":"https://static001.geekbang.org/account/avatar/00/31/42/c5/45c93ea8.jpg","comment_is_top":false,"comment_ctime":1673353287,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100310001,"comment_content":"# 搜了下，https:&#47;&#47;blog.csdn.net&#47;lijiachang8&#47;article&#47;details&#47;116034225\n# UserDict有个data的属性，是dict的实例，是用于存储数据的地方\nfrom collections import UserDict\n\nclass MyDict(UserDict):\n    def __setitem__(self,key,value):\n        if key in self.data:\n            print(f&quot;{key} 已存在，无法修改&quot;)\n        else:\n            self.data[key]=value\n            print(f&quot;{key} 不存在，修改为值{value}&quot;)\n\n\ndict1 = MyDict()\ndict1[ &#39;a&#39; ] = 100\ndict1[ &#39;a&#39; ] = 200 # 报错，已有名为 &#39;a&#39; 的 key\nprint(dict1[&#39;a&#39;])","like_count":0}]}