{"id":449798,"title":"05 | ç±»å‹åŒ¹é…ï¼šæ€ä¹ˆåˆ‡é™¤è‡ƒè‚¿çš„å¼ºåˆ¶è½¬æ¢ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯èŒƒå­¦é›·ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬èŠä¸€èŠJavaæ¨¡å¼åŒ¹é…ï¼Œä¸»è¦æ˜¯ç±»å‹åŒ¹é…ã€‚</p><p>Javaçš„æ¨¡å¼åŒ¹é…æ˜¯ä¸€ä¸ªæ–°å‹çš„ã€è€Œä¸”è¿˜åœ¨æŒç»­å¿«é€Ÿæ¼”è¿›çš„é¢†åŸŸã€‚ç±»å‹åŒ¹é…æ˜¯æ¨¡å¼åŒ¹é…çš„ä¸€ä¸ªè§„èŒƒã€‚ç±»å‹åŒ¹é…è¿™ä¸ªç‰¹æ€§ï¼Œé¦–å…ˆåœ¨JDK 14ä¸­ä»¥é¢„è§ˆç‰ˆçš„å½¢å¼å‘å¸ƒã€‚åœ¨JDK 15ä¸­ï¼Œæ”¹è¿›çš„ç±»å‹åŒ¹é…å†æ¬¡ä»¥é¢„è§ˆç‰ˆçš„å½¢å¼å‘å¸ƒã€‚æœ€åï¼Œç±»å‹åŒ¹é…åœ¨JDK 16æ­£å¼å‘å¸ƒã€‚</p><p>é‚£ä¹ˆï¼Œä»€ä¹ˆæ˜¯æ¨¡å¼åŒ¹é…ï¼Œä»€ä¹ˆåˆæ˜¯ç±»å‹åŒ¹é…å‘¢ï¼Ÿè¿™å°±è¦è¯´åˆ°æ¨¡å¼çš„ç»„æˆã€‚é€šå¸¸ï¼Œä¸€ä¸ªæ¨¡å¼æ˜¯åŒ¹é…è°“è¯å’ŒåŒ¹é…å˜é‡çš„ç»„åˆã€‚å…¶ä¸­ï¼ŒåŒ¹é…è°“è¯ç”¨æ¥ç¡®å®šæ¨¡å¼å’Œç›®æ ‡æ˜¯å¦åŒ¹é…ã€‚åœ¨æ¨¡å¼å’Œç›®æ ‡åŒ¹é…çš„æƒ…å†µä¸‹ï¼ŒåŒ¹é…å˜é‡æ˜¯ä»åŒ¹é…ç›®æ ‡é‡Œæå–å‡ºæ¥çš„ä¸€ä¸ªæˆ–è€…å¤šä¸ªå˜é‡ã€‚</p><p>å¯¹äºç±»å‹åŒ¹é…æ¥è¯´ï¼ŒåŒ¹é…è°“è¯ç”¨æ¥æŒ‡å®šæ¨¡å¼çš„æ•°æ®ç±»å‹ï¼Œè€ŒåŒ¹é…å˜é‡å°±æ˜¯ä¸€ä¸ªå±äºè¯¥ç±»å‹çš„æ•°æ®å˜é‡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºç±»å‹åŒ¹é…æ¥è¯´ï¼ŒåŒ¹é…å˜é‡åªæœ‰ä¸€ä¸ªã€‚</p><p>è¿™æ ·çš„æè¿°è¿˜æ˜¯å¤ªæŠ½è±¡ï¼Œå¤ªéš¾ç†è§£ã€‚æˆ‘ä»¬è¿˜æ˜¯é€šè¿‡æ¡ˆä¾‹å’Œä»£ç ï¼Œä¸€ç‚¹ä¸€ç‚¹åœ°æ¥ç†è§£ç±»å‹åŒ¹é…å§ã€‚</p><h2>é˜…è¯»æ¡ˆä¾‹</h2><p>åœ¨ç¨‹åºå‘˜çš„æ—¥å¸¸å·¥ä½œä¸­ï¼Œä¸€ä¸ªé‡è¦çš„äº‹æƒ…ï¼Œå°±æ˜¯æŠŠç›¸ä¼¼çš„ä¸œè¥¿æŠ½è±¡å‡ºæ¥ï¼Œè®¾è®¡æˆä¸€ä¸ªé€šç”¨çš„ã€å¯ä»¥å¤ç”¨çš„æ¥å£ã€‚</p><p>æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬ä»æ­£æ–¹å½¢ã€é•¿æ–¹å½¢ã€åœ†å½¢è¿™äº›çœ‹èµ·æ¥å·®å¼‚å·¨å¤§çš„ä¸œè¥¿å‡ºå‘ï¼ŒæŠ½è±¡å‡ºäº†å½¢çŠ¶è¿™ä¸ªæ¥å£ã€‚æˆ‘ä»¬å¸Œæœ›ä½¿ç”¨ä¸€ä¸ªå®ä¾‹æ—¶ï¼Œå¦‚æœæˆ‘ä»¬ä¸èƒ½ç¡®å®šå®ƒæ˜¯æ­£æ–¹å½¢è¿˜æ˜¯é•¿æ–¹å½¢ï¼Œæˆ‘ä»¬è‡³å°‘è¿˜èƒ½ç¡®å®šå®ƒæ˜¯ä¸€ä¸ªå½¢çŠ¶ã€‚è¿™ç§æ¨¡æ¨¡ç³Šç³Šçš„ç¡®å®šæ€§ï¼ˆå…¶å®ä¹Ÿæ˜¯ä¸ç¡®å®šæ€§ï¼‰ï¼Œå…¶å®å¯¹æˆ‘ä»¬ç¼–å†™ä»£ç æœ‰å·¨å¤§çš„å¸®åŠ©ï¼ŒåŒ…æ‹¬ä½†æ˜¯ä¸é™äºç®€åŒ–ä»£ç é€»è¾‘ï¼Œå‡å°‘ä»£ç é”™è¯¯ã€‚</p><!-- [[[read_end]]] --><p>ä½†è¦æ³¨æ„çš„æ˜¯ï¼Œæ¯ä¸€ä¸ªå®ä¾‹éƒ½æ˜¯å…·ä½“çš„å½¢çŠ¶ã€‚å®ƒå¯ä»¥æ˜¯æ­£æ–¹å½¢çš„å¯¹è±¡ï¼Œå¯ä»¥æ˜¯é•¿æ–¹å½¢çš„å¯¹è±¡ï¼Œå°±æ˜¯ä¸èƒ½æ˜¯ä¸€ä¸ªæŠ½è±¡çš„å½¢çŠ¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŠ½è±¡çš„ç±»å’Œæ¥å£ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ã€‚</p><p>ä¸€ä¸ªæ–¹æ³•çš„è§„èŒƒï¼Œå®ƒçš„è¾“å…¥å‚æ•°å¯èƒ½æ˜¯ä¸€ä¸ªè¡¨ç¤ºå½¢çŠ¶çš„å¯¹è±¡ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªæ›´ä¸€èˆ¬åŒ–çš„å¯¹è±¡ã€‚æ¯”å¦‚è¯´å§ï¼Œæˆ‘ä»¬è¦è®¾è®¡ä¸€ä¸ªæ–¹æ³•ï¼Œæ¥åˆ¤æ–­ä¸€ä¸ªå½¢çŠ¶æ˜¯ä¸æ˜¯æ­£æ–¹å½¢ã€‚é‚£ä¹ˆï¼Œå°±éœ€è¦ä¸€ä¸ªè¡¨ç¤ºå½¢çŠ¶çš„å¯¹è±¡ï¼Œä½œä¸ºè¿™ä¸ªæ–¹æ³•çš„è¾“å…¥å‚æ•°ã€‚è€Œå®ç°è¿™ä¸ªæ–¹æ³•çš„ä»£ç ï¼Œä»…ä»…çŸ¥é“å½¢çŠ¶è¿™ä¸ªä¸€èˆ¬åŒ–çš„å¯¹è±¡æ˜¯è¿œè¿œä¸å¤Ÿçš„ã€‚ä¸‹é¢çš„ä»£ç ï¼Œå°±æ˜¯ä¸€ä¸ªè¿™ç§æ–¹æ³•çš„å®ç°ä»£ç ã€‚</p><pre><code class=\"language-java\">static boolean isSquare(Shape shape) {\n    if (shape instanceof Rectangle) {\n        Rectangle rect = (Rectangle) shape;\n        return (rect.length == rect.width);\n    }\n\n    return (shape instanceof Square);\n}\n</code></pre><p>åœ¨è¿™ä¸ªisSquareæ–¹æ³•çš„å®ç°ä»£ç é‡Œï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨instanceofè¿ç®—ç¬¦ï¼Œæ¥åˆ¤æ–­è¾“å…¥å‚æ•°æ˜¯ä¸æ˜¯ä¸€ä¸ªé•¿æ–¹å½¢çš„å®ä¾‹ï¼›å¦‚æœåˆ¤æ–­æˆç«‹ï¼Œå†ä½¿ç”¨ç±»å‹è½¬æ¢è¿ç®—ç¬¦ï¼ŒæŠŠè¿™ä¸ªå®ä¾‹æŠ•å°„æˆé•¿æ–¹å½¢çš„å®ä¾‹ï¼›æœ€åï¼Œæˆ‘ä»¬å¼€å§‹ä½¿ç”¨è¿™ä¸ªé•¿æ–¹å½¢çš„å®ä¾‹ï¼Œè¿›è¡Œæ›´å¤šçš„è¿ç®—ã€‚</p><p>å…¶å®ï¼Œè¿™æ ·çš„æ“ä½œæ˜¯ä¸€ä¸ªæ¨¡å¼åŒ–çš„è¿‡ç¨‹ã€‚å¦‚æœæˆ‘ä»¬æŠŠå®ƒæ‰ç¢äº†æ¥çœ‹ï¼Œè¿™ä¸ªæ¨¡å¼æœ‰ä¸‰ä¸ªéƒ¨åˆ†ã€‚</p><p>ç¬¬ä¸€ä¸ªéƒ¨åˆ†æ˜¯ç±»å‹åˆ¤æ–­è¯­å¥ï¼Œä¹Ÿå°±æ˜¯åŒ¹é…è°“è¯ï¼Œä½¿ç”¨çš„ä»£ç æ˜¯â€œinstanceof Rectangleâ€ã€‚ç¬¬äºŒä¸ªéƒ¨åˆ†æ˜¯ç±»å‹è½¬æ¢è¯­å¥ï¼Œä½¿ç”¨çš„æ˜¯ç±»å‹è½¬æ¢è¿ç®—ç¬¦ï¼ˆ(Rectangle) shapeï¼‰ã€‚ç¬¬ä¸‰ä¸ªéƒ¨åˆ†æ˜¯å£°æ˜ä¸€ä¸ªæ–°çš„æœ¬åœ°å˜é‡ï¼Œä¹Ÿå°±æ˜¯åŒ¹é…å˜é‡ï¼Œæ¥æ‰¿è½½è½¬æ¢åçš„æ•°æ®ï¼Œä½¿ç”¨çš„æ˜¯å˜é‡å£°æ˜å’Œèµ‹å€¼è¿ç®—ç¬¦ï¼ˆRectangle rect =ï¼‰ã€‚ç¬¬äºŒä¸ªéƒ¨åˆ†å’Œç¬¬ä¸‰ä¸ªéƒ¨åˆ†ï¼Œåªæœ‰åœ¨ç±»å‹åˆ¤æ–­æˆç«‹çš„æƒ…å†µä¸‹ï¼Œæ‰èƒ½å¤Ÿæ‰§è¡Œã€‚</p><p>ä½¿ç”¨è¿™æ ·çš„æ¨¡å¼åŒ–æ“ä½œï¼Œæ˜¯ä¸€ä¸ªJavaç¨‹åºå‘˜çš„åŸºæœ¬åŠŸã€‚è¿™ä¸ªæ¨¡å¼ç›´è§‚è€Œä¸”ä¾¿äºç†è§£ã€‚å¯æ˜¯ï¼Œè¿™ä¸ªæ¨¡å¼å¾ˆä¹å‘³ï¼Œä¹Ÿå¾ˆè‡ƒè‚¿ã€‚è°ƒç”¨äº†instanceofä¹‹åï¼Œé™¤äº†ç±»å‹è½¬æ¢ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åšä»€ä¹ˆå‘¢ï¼Ÿä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨ç±»å‹åˆ¤æ–­ä¹‹åï¼Œæˆ‘ä»¬æ€»æ˜¯ç´§è·Ÿç€å°±è¿›è¡Œç±»å‹è½¬æ¢ã€‚</p><p>æŠŠç±»å‹åˆ¤æ–­å’Œç±»å‹è½¬æ¢åˆ‡å‰²æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œå¢åŠ äº†é”™è¯¯æ½œå…¥çš„æœºä¼šï¼Œå¹³æ·»äº†è®¸å¤šçƒ¦æ¼ã€‚æ¯”å¦‚è¯´ï¼Œä¸€ä¸ªæ´»ç”Ÿç”Ÿçš„ç¨‹åºå‘˜æˆ–è€…å†·å†°å†°çš„æœºå™¨ï¼Œæœ‰å¯èƒ½æ— æ„åœ°ä½¿ç”¨äº†é”™è¯¯çš„ç±»å‹ã€‚ä¸‹é¢ä¾‹å­ä¸­çš„ä¸¤æ®µä»£ç ï¼Œå°±æ˜¯ä¸¤ä¸ªå¸¸è§çš„ç±»å‹è½¬æ¢é”™è¯¯ã€‚ç¬¬ä¸€æ®µä»£ç è¯¯ç”¨äº†å˜é‡ç±»å‹ï¼Œç¬¬äºŒæ®µä»£ç è¯¯ç”¨äº†åˆ¤æ–­ç»“æœã€‚</p><pre><code class=\"language-java\">if (shape instanceof Rectangle) {\n    Rectangle rect = (Rectangle) shape;\n        return (rect.length == rect.width);\n}\n</code></pre><pre><code class=\"language-java\">if (!(shape instanceof Rectangle) {\n    Rectangle rect = (Rectangle) shape;\n        return (rect.length == rect.width);\n}\n</code></pre><p>ç±»å‹åˆ¤æ–­ä¹‹åï¼Œæˆ‘ä»¬åŸæœ¬å°±å¯ä»¥å¼€å§‹å…³æ³¨æ›´é‡è¦çš„åç»­ä»£ç é€»è¾‘äº†ï¼Œä½†ç°åœ¨ä¸å¾—ä¸åœä¸‹æ¥ç¼–å†™ç±»å‹è½¬åŒ–ä»£ç ï¼Œæˆ–è€…å®¡è§†ç±»å‹è½¬æ¢ä»£ç æ˜¯å¦æ°å½“ã€‚è¿™å½“ç„¶å½±å“åŠ›äº†ç”Ÿäº§æ•ˆç‡ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç”¨ä»€ä¹ˆæ–¹æ³•æ”¹è¿›è¿™ä¸ªæ¨¡å¼ï¼Œæé«˜ç”Ÿäº§æ•ˆç‡å‘¢ï¼Ÿ è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆå°±æ˜¯ç±»å‹åŒ¹é…ã€‚</p><h2>ç±»å‹åŒ¹é…</h2><p>é‚£ä¹ˆï¼Œç±»å‹åŒ¹é…æ˜¯æ€ä¹ˆæ”¹è¿›è¿™ä¸ªæ¨¡å¼çš„å‘¢ï¼Ÿæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä½¿ç”¨äº†ç±»å‹åŒ¹é…çš„ä»£ç çš„æ ·å­ã€‚ä¸‹é¢çš„ä¾‹å­ï¼Œå°±æ˜¯ä½¿ç”¨ç±»å‹åŒ¹é…çš„ä¸€æ®µä»£ç ã€‚</p><pre><code class=\"language-java\">if (shape instanceof Rectangle rect) {\n    return (rect.length == rect.width);\n}\n</code></pre><p>ä¸ºäº†ä¾¿äºæ›´ç›´è§‚åœ°æ¯”è¾ƒï¼Œæˆ‘æŠŠä¼ ç»Ÿçš„å®ç°ä»£ç å’Œä½¿ç”¨äº†ç±»å‹åŒ¹é…çš„å®ç°ä»£ç åˆ—åœ¨äº†ä¸‹é¢çš„è¡¨æ ¼é‡Œã€‚ä½ å¯ä»¥æ‰¾æ‰¾å…¶ä¸­çš„å·®å¼‚ï¼Œä½“ä¼šä¸‹ç±»å‹åŒ¹é…å¸¦æ¥çš„æ”¹è¿›ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/cd/18/cd2bd3314d8efdf8887a2ebde87de818.jpg?wh=1920x729\" alt=\"å›¾ç‰‡\"></p><p>å°±åƒæˆ‘ä»¬å‰é¢æ‹†è§£çš„ä¸€æ ·ï¼Œä¼ ç»Ÿçš„å®ç°ä»£ç æœ‰ä¸‰ä¸ªéƒ¨åˆ†ï¼›è€Œä½¿ç”¨ç±»å‹åŒ¹é…çš„ä»£ç ï¼Œåªæœ‰åŒ¹é…è°“è¯å’Œæœ¬åœ°å˜é‡ä¸¤ä¸ªéƒ¨åˆ†ï¼Œè€Œä¸”æ˜¯åœ¨åŒä¸€ä¸ªè¯­å¥é‡Œã€‚ä¸ºäº†å¸®åŠ©ä½ ç†è§£è¿™äº›æ¦‚å¿µï¼Œæˆ‘ç”»äº†ä¸‹é¢çš„è¿™å¼ å›¾ï¼Œæ ‡è®°å‡ºäº†ç±»å‹åŒ¹é…çš„ç»„æˆéƒ¨åˆ†å’Œå…³é”®æ¦‚å¿µã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/d9/d1/d9882c077deb68b2675f68c5794840d1.jpg?wh=1920x1085\" alt=\"å›¾ç‰‡\"></p><p>ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†ï¼Œä½¿ç”¨ç±»å‹è½¬æ¢è¿ç®—ç¬¦çš„è¯­å¥ï¼Œæ²¡æœ‰å‡ºç°åœ¨ä½¿ç”¨ç±»å‹åŒ¹é…çš„ä»£ç é‡Œã€‚ä½†æ˜¯ï¼Œè¿™å¹¶ä¸å½±å“ç±»å‹åŒ¹é…ä»£ç æ‰€è¦è¡¨è¾¾çš„åŸºæœ¬é€»è¾‘ã€‚</p><p>è¿™ä¸ªåŸºæœ¬é€»è¾‘å°±æ˜¯ï¼šå¦‚æœç›®æ ‡å˜é‡æ˜¯ä¸€ä¸ªé•¿æ–¹å½¢çš„å®ä¾‹ï¼Œé‚£ä¹ˆè¿™ä¸ªç›®æ ‡å˜é‡å°±ä¼šè¢«èµ‹å€¼ç»™ä¸€ä¸ªæœ¬åœ°çš„é•¿æ–¹å½¢å˜é‡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„åŒ¹é…å˜é‡ï¼›ç›¸åï¼Œå¦‚æœç›®æ ‡å˜é‡ä¸æ˜¯ä¸€ä¸ªé•¿æ–¹å½¢çš„å®ä¾‹ï¼Œé‚£ä¹ˆè¿™ä¸ªåŒ¹é…å˜é‡å°±ä¸ä¼šè¢«èµ‹å€¼ã€‚</p><p>å‰é¢ï¼Œæˆ‘ä»¬è®¨è®ºäº†ä¸¤ä¸ªå¸¸è§çš„ç±»å‹è½¬æ¢é”™è¯¯ï¼šè¯¯ç”¨å˜é‡ç±»å‹å’Œè¯¯ç”¨åˆ¤æ–­ç»“æœã€‚åœ¨ä½¿ç”¨ç±»å‹åŒ¹é…çš„ä»£ç é‡Œï¼Œä¸å†éœ€è¦é‡å¤ä½¿ç”¨åŒ¹é…ç±»å‹ï¼Œä¹Ÿä¸å†éœ€è¦ä½¿ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢ç¬¦ã€‚æ‰€ä»¥ï¼Œä½¿ç”¨ç±»å‹åŒ¹é…çš„ä»£ç ï¼Œä¸ç”¨å†æ‹…å¿ƒè¯¯ç”¨å˜é‡ç±»å‹çš„é”™è¯¯äº†ã€‚</p><p>è¯¯ç”¨åˆ¤æ–­ç»“æœçš„é”™è¯¯ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿè¢«è§£å†³äº†å‘¢ï¼Ÿ ä¼¼ä¹ï¼Œæˆ‘ä»¬è¿˜èƒ½å†™å‡ºä¸‹é¢çš„ä»£ç ã€‚åœ¨è¿™æ ·çš„ä»£ç é‡Œï¼Œå¦‚æœç›®æ ‡å˜é‡ä¸æ˜¯ä¸€ä¸ªé•¿æ–¹å½¢çš„å®ä¾‹ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯ä¹Ÿæœ‰å¯èƒ½ä½¿ç”¨åŒ¹é…çš„å˜é‡å‘¢ï¼Ÿ</p><pre><code class=\"language-java\">if (!(shape instanceof Rectangle rect)) {\n    return (rect.length == rect.width);\n}\n</code></pre><p>å¹¸è¿çš„æ˜¯ï¼Œç±»å‹åŒ¹é…å·²ç»è€ƒè™‘åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼ŒJavaç¼–è¯‘å™¨èƒ½å¤Ÿæ£€æµ‹å‡ºä¸Šé¢çš„é”™è¯¯ï¼Œä¸ä¼šå…è®¸ä½¿ç”¨æ²¡æœ‰èµ‹å€¼çš„åŒ¹é…å˜é‡ã€‚è¿™æ ·ï¼Œåœ¨ä»£ç ç¼–è¯‘æœŸé—´ï¼Œå°±æœ‰æœºä¼šçº æ­£ä»£ç çš„é”™è¯¯ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ä¿®æ”¹æˆä¸‹é¢çš„é€»è¾‘ï¼šå¦‚æœç›®æ ‡å˜é‡ä¸æ˜¯ä¸€ä¸ªé•¿æ–¹å½¢çš„å®ä¾‹ï¼Œæˆ‘ä»¬å°±ä¸ä½¿ç”¨åŒ¹é…å˜é‡ï¼›å¦åˆ™ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨åŒ¹é…å˜é‡ã€‚æŠŠè¿™ä¸ªé€»è¾‘æ˜ å°„åˆ°ä»£ç ï¼Œå¤§è‡´æ˜¯ä¸‹é¢çš„æ ·å­ã€‚</p><pre><code class=\"language-java\">if (!(shape instanceof Rectangle rect)) {\n    return false;\n} else {\n    return (rect.length == rect.width);\n}\n</code></pre><p>åœ¨ä¸Šé¢çš„ä»£ç é‡Œï¼Œä½¿ç”¨åŒ¹é…å˜é‡çš„æ¡ä»¶è¯­å¥elseåˆ†æ”¯å¹¶æ²¡æœ‰å£°æ˜è¿™ä¸ªåŒ¹é…å˜é‡ã€‚ä¸ºä»€ä¹ˆifè¯­å¥å£°æ˜çš„å˜é‡ï¼Œå¯ä»¥åœ¨elseè¯­å¥é‡Œä½¿ç”¨å‘¢ï¼Ÿè¦å¼„æ¸…æ¥šè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬è¿˜è¦äº†è§£åŒ¹é…å˜é‡çš„ä½œç”¨åŸŸã€‚æŒæ¡åŒ¹é…å˜é‡çš„ä½œç”¨åŸŸï¼Œæ˜¯å­¦ä¼šä½¿ç”¨ç±»å‹åŒ¹é…çš„å…³é”®ã€‚</p><h2>åŒ¹é…å˜é‡çš„ä½œç”¨åŸŸ</h2><p>åŒ¹é…å˜é‡çš„ä½œç”¨åŸŸï¼Œå°±æ˜¯ç›®æ ‡å˜é‡å¯ä»¥è¢«ç¡®è®¤åŒ¹é…çš„èŒƒå›´ã€‚å¦‚æœåœ¨ä¸€ä¸ªèŒƒå›´å†…ï¼Œæ— æ³•ç¡®è®¤ç›®æ ‡å˜é‡æ˜¯å¦è¢«åŒ¹é…ï¼Œæˆ–è€…ç›®æ ‡å˜é‡ä¸èƒ½è¢«åŒ¹é…ï¼Œéƒ½ä¸èƒ½ä½¿ç”¨åŒ¹é…å˜é‡ã€‚ å¦‚æœæˆ‘ä»¬ä»ç¼–è¯‘å™¨çš„è§’åº¦å»ç†è§£ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸€ä¸ªèŒƒå›´é‡Œï¼Œå¦‚æœç¼–è¯‘å™¨èƒ½å¤Ÿç¡®å®šåŒ¹é…å˜é‡å·²ç»è¢«èµ‹å€¼äº†ï¼Œé‚£ä¹ˆå®ƒå°±å¯ä»¥åœ¨è¿™ä¸ªèŒƒå›´å†…ä½¿ç”¨ï¼›å¦‚æœç¼–è¯‘å™¨ä¸èƒ½å¤Ÿç¡®å®šåŒ¹é…å˜é‡æ˜¯å¦è¢«èµ‹å€¼ï¼Œæˆ–è€…ç¡®å®šæ²¡æœ‰è¢«èµ‹å€¼ï¼Œé‚£ä¹ˆä»–å°±ä¸èƒ½åœ¨è¿™ä¸ªèŒƒå›´å†…ä½¿ç”¨ã€‚</p><p>æˆ‘ä»¬è¿˜æ˜¯é€šè¿‡ä»£ç æ¥ç†è§£è¿™ä¸ªæœ‰ç‚¹æŠ½è±¡çš„æ¦‚å¿µå§ã€‚</p><p>ç¬¬ä¸€æ®µä»£ç ï¼Œæˆ‘ä»¬çœ‹çœ‹æœ€å¸¸è§„çš„ä½¿ç”¨ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ç¡®è®¤ç±»å‹åŒ¹é…çš„æ¡ä»¶è¯­å¥ä¹‹å†…ä½¿ç”¨åŒ¹é…å˜é‡ã€‚è¿™ä¸ªæ¡ä»¶è¯­å¥ä¹‹å¤–ï¼Œä¸æ˜¯åŒ¹é…å˜é‡çš„ä½œç”¨åŸŸã€‚</p><pre><code class=\"language-java\">public static boolean isSquareImplA(Shape shape) {\n    if (shape instanceof Rectangle rect) {\n        // rect is in scope\n        return rect.length() == rect.width();\n    }\n    // rect is not in scope here\n    return shape instanceof Square;\n}\n</code></pre><p>ç¬¬äºŒæ®µä»£ç ï¼Œæˆ‘ä»¬çœ‹çœ‹æœ‰ç‚¹æ„å¤–çš„ä½¿ç”¨ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ç¡®è®¤ç±»å‹ä¸åŒ¹é…çš„æ¡ä»¶è¯­å¥ä¹‹åä½¿ç”¨åŒ¹é…å˜é‡ã€‚è¿™ä¸ªæ¡ä»¶è¯­å¥ä¹‹å†…ï¼Œä¸æ˜¯åŒ¹é…å˜é‡çš„ä½œç”¨åŸŸã€‚</p><pre><code class=\"language-java\">public static boolean isSquareImplB(Shape shape) {\n    if (!(shape instanceof Rectangle rect)) {\n        // rect is not in scope here\n        return shape instanceof Square;\n    }\n\n    // rect is in scope\n    return rect.length() == rect.width();\n}\n</code></pre><p>ç¬¬ä¸‰æ®µä»£ç ï¼Œæˆ‘ä»¬çœ‹çœ‹ç´§å‡‘çš„æ–¹å¼ã€‚è¿™ä¸€æ®µä»£ç çš„é€»è¾‘ï¼Œå’Œç¬¬ä¸€æ®µä»£ç ä¸€æ ·ï¼Œæˆ‘ä»¬åªæ˜¯æ¢æˆäº†ä¸€ç§æ›´ç´§å‡‘çš„è¡¨ç¤ºæ–¹æ³•ã€‚</p><p>åœ¨è¿™ä¸€æ®µä»£ç é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨é€»è¾‘ä¸è¿ç®—ç¬¦è¡¨ç¤ºç¬¬ä¸€æ®µé‡Œçš„æ¡ä»¶è¯­å¥ï¼šç±»å‹åŒ¹é…å¹¶ä¸”åŒ¹é…å˜é‡æ»¡è¶³æŸä¸€ä¸ªæ¡ä»¶ã€‚è¿™æ ·çš„è¡¨ç¤ºæ˜¯ç¬¦åˆåŒ¹é…å˜é‡çš„ä½œç”¨åŸŸè§„åˆ™çš„ã€‚é€»è¾‘ä¸è¿ç®—ç¬¦ä»å·¦åˆ°å³è®¡ç®—ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªè¿ç®—æˆç«‹ï¼Œä¹Ÿå°±æ˜¯ç±»å‹åŒ¹é…ï¼Œæ‰èƒ½è¿›è¡Œä¸‹ä¸€ä¸ªè¿ç®—ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é€»è¾‘ä¸è¿ç®—çš„ç¬¬äºŒéƒ¨åˆ†ï¼Œä½¿ç”¨åŒ¹é…å˜é‡ã€‚</p><pre><code class=\"language-java\">public static boolean isSquareImplC(Shape shape) {\n    return shape instanceof Square ||  // rect is not in scope here\n          (shape instanceof Rectangle rect &amp;&amp;\n           rect.length() == rect.width());   // rect is in scope here\n}\n</code></pre><p>ç¬¬å››æ®µä»£ç ï¼Œæˆ‘ä»¬çœ‹çœ‹é€»è¾‘æˆ–è¿ç®—ã€‚å®ƒç±»ä¼¼äºç¬¬ä¸‰æ®µä»£ç ï¼Œåªæ˜¯æˆ‘ä»¬æŠŠé€»è¾‘ä¸è¿ç®—ç¬¦æ›¿æ¢æˆäº†é€»è¾‘æˆ–è¿ç®—ç¬¦ã€‚è¿™æ—¶å€™çš„é€»è¾‘ï¼Œå°±å˜æˆäº†â€œç±»å‹åŒ¹é…æˆ–è€…åŒ¹é…å˜é‡æ»¡è¶³æŸä¸€ä¸ªæ¡ä»¶â€ã€‚é€»è¾‘æˆ–è¿ç®—ç¬¦ä¹Ÿæ˜¯ä»å·¦åˆ°å³è®¡ç®—ã€‚</p><p>ä¸è¿‡å’Œé€»è¾‘ä¸è¿ç®—ç¬¦ä¸åŒçš„æ˜¯ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªè¿ç®—ä¸æˆç«‹ï¼Œä¹Ÿå°±æ˜¯è¯´ç±»å‹ä¸åŒ¹é…æ—¶ï¼Œæ‰èƒ½è¿›è¡Œä¸‹ä¸€æ­¥çš„è¿ç®—ã€‚ä¸‹ä¸€æ­¥çš„è¿ç®—ï¼ŒåŒ¹é…å˜é‡å¹¶æ²¡æœ‰è¢«èµ‹å€¼ï¼Œæˆ‘ä»¬ä¸èƒ½å¤Ÿåœ¨è¿™ä¸€éƒ¨åˆ†ä½¿ç”¨åŒ¹é…å˜é‡ã€‚æ‰€ä»¥ï¼Œè¿™ä¸€æ®µä»£ç å¹¶ä¸èƒ½é€šè¿‡ç¼–è¯‘å™¨çš„å®¡æŸ¥ã€‚</p><pre><code class=\"language-java\">public static boolean isSquareImplD(Shape shape) {\n    return shape instanceof Square ||  // rect is not in scope here\n          (shape instanceof Rectangle rect ||\n           rect.length() == rect.width());   // rect is not in scope here\n}\n</code></pre><p>ç¬¬äº”æ®µä»£ç ï¼Œæˆ‘ä»¬çœ‹çœ‹ä½ä¸è¿ç®—ã€‚</p><p>è¿™æ®µä»£ç å’Œç¬¬ä¸‰æ®µä»£ç ç±»ä¼¼ï¼Œåªæ˜¯æˆ‘ä»¬æŠŠé€»è¾‘ä¸è¿ç®—ç¬¦ï¼ˆ&amp;&amp;ï¼‰æ›¿æ¢æˆäº†ä½ä¸è¿ç®—ç¬¦ï¼ˆ&amp;ï¼‰ã€‚</p><p>å’Œç¬¬ä¸‰æ®µä»£ç ç›¸æ¯”ï¼Œè¿™ä¸€æ®µä»£ç çš„é€»è¾‘å…¶å®å¹¶æ²¡æœ‰å˜åŒ–ã€‚åªä¸è¿‡ï¼Œä½ä¸è¿ç®—ç¬¦ä¸¤ä¾§çš„è¡¨è¾¾å¼éƒ½è¦å‚ä¸è®¡ç®—ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ç®¡ä½ä¸è¿ç®—ç¬¦å·¦ä¾§çš„è¿ç®—æ˜¯å¦æˆç«‹ï¼Œä½ä¸è¿ç®—ç¬¦å³ä¾§çš„è¿ç®—éƒ½è¦è®¡ç®—å‡ºæ¥ã€‚æ¢å¥è¯è¯´ï¼Œæ— è®ºå·¦ä¾§çš„ç±»å‹åŒ¹é…ä¸åŒ¹é…ï¼Œå³ä¾§çš„åŒ¹é…å˜é‡éƒ½è¦ä½¿ç”¨ã€‚è¿™å°±è¿åäº†åŒ¹é…å˜é‡çš„ä½œç”¨åŸŸåŸåˆ™ï¼Œç¼–è¯‘å™¨ä¸èƒ½å¤Ÿç¡®å®šåŒ¹é…å˜é‡æ˜¯å¦è¢«èµ‹å€¼ã€‚æ‰€ä»¥ï¼Œè¿™ä¸€æ®µä»£ç ï¼Œä¹Ÿä¸èƒ½é€šè¿‡ç¼–è¯‘å™¨çš„å®¡æŸ¥ã€‚</p><pre><code class=\"language-java\">public static boolean isSquareImplE(Shape shape) {\n    return shape instanceof Square |  // rect is not in scope here\n          (shape instanceof Rectangle rect &amp;\n           rect.length() == rect.width());   // rect is in scope here\n}\n</code></pre><p>ç¬¬å…­æ®µä»£ç ï¼Œæˆ‘ä»¬æŠŠåŒ¹é…å˜é‡çš„ä½œç”¨åŸŸçš„å½±å“å»¶å±•ä¸€ä¸‹ï¼Œçœ‹çœ‹å®ƒå¯¹å½±å­å˜é‡ï¼ˆShadowed Variableï¼‰çš„å½±å“ã€‚</p><p>æ—¢ç„¶æˆ‘ä»¬è®¨è®ºå˜é‡çš„ä½œç”¨åŸŸï¼Œæˆ‘ä»¬å°±ä¸èƒ½ä¸çœ‹çœ‹å½±å­å˜é‡ã€‚å‡è®¾æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªé™æ€å˜é‡ï¼Œå®ƒå’ŒåŒ¹é…å˜é‡ä½¿ç”¨ç›¸åŒçš„åå­—ã€‚åœ¨åŒ¹é…å˜é‡çš„ä½œç”¨åŸŸå†…ï¼Œé™¤éç‰¹æ®Šå¤„ç†ï¼Œè¿™ä¸ªé™æ€å˜é‡å°±è¢«é®æ©ä½äº†ã€‚è¿™æ—¶å€™ï¼Œè¿™ä¸ªå˜é‡åå­—ä»£è¡¨çš„å°±æ˜¯åŒ¹é…å˜é‡ï¼›è€Œä¸æ˜¯é™æ€å˜é‡ã€‚ç±»ä¼¼åœ°ï¼Œåœ¨åŒ¹é…å˜é‡çš„ä½œç”¨åŸŸä¹‹å¤–ï¼Œè¿™ä¸ªå˜é‡åå­—ä»£è¡¨çš„å°±æ˜¯è¿™ä¸ªé™æ€å˜é‡ã€‚</p><p>åœ¨è¿™æ®µä»£ç é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨ç±»ä¼¼äºç¬¬ä¸€æ®µä»£ç çš„ä»£ç ç»„ç»‡æ–¹å¼ï¼Œæ¥è¡¨è¿°ç±»å‹åŒ¹é…éƒ¨åˆ†çš„é€»è¾‘ã€‚å¦å¤–ï¼Œæˆ‘åœ¨ä»£ç é‡Œæ ‡æ³¨äº†å˜é‡çš„ä½œç”¨åŸŸã€‚ä½ å¯ä»¥çœ‹çœ‹ï¼Œè¿™ä¸¤ä¸ªå˜é‡çš„ä½œç”¨åŸŸï¼Œå’Œä½ æƒ³è±¡çš„ä½œç”¨åŸŸæ˜¯ä¸æ˜¯ä¸€æ ·çš„ï¼Ÿ</p><pre><code class=\"language-java\">public final class Shadow {\n    private static final Rectangle rect = null;\n\n    public static boolean isSquare(Shape shape) {\n        if (shape instanceof Rectangle rect) {\n            // Field rect is shadowed, local rect is in scope\n            System.out.println(\"This should be the local rect: \" + rect);\n            return rect.length() == rect.width();\n        }\n\n        // Field rect is in scope, local rect is not in scope here\n        System.out.println(\"This should be the field rect: \" + rect);\n        return shape instanceof Shape.Square;\n    }\n}\n</code></pre><p>ç¬¬ä¸ƒæ®µä»£ç ï¼Œæˆ‘ä»¬è¿˜æ˜¯æ¥çœ‹ä¸€çœ‹å½±å­å˜é‡ã€‚åªä¸è¿‡ï¼Œè¿™ä¸€æ¬¡ï¼Œæˆ‘ä»¬ä½¿ç”¨ç±»ä¼¼äºç¬¬äºŒæ®µä»£ç çš„ä»£ç ç»„ç»‡æ–¹å¼ï¼Œæ¥è¡¨è¿°ç±»å‹åŒ¹é…éƒ¨åˆ†çš„é€»è¾‘ã€‚æˆ‘åœ¨ä»£ç é‡Œæ ‡å‡ºçš„è¿™ä¸¤ä¸ªå˜é‡çš„ä½œç”¨åŸŸï¼Œå’Œä½ æƒ³è±¡çš„ä½œç”¨åŸŸæ˜¯ä¸€æ ·çš„å—ï¼Ÿ</p><pre><code class=\"language-java\">public final class Shadow {\n    private static final Rectangle rect = null;\n\n    public static boolean isSquare(Shape shape) {\n        if (!(shape instanceof Rectangle rect)) {\n            // Field rect is in scope, local rect is not in scope here\n            System.out.println(\"This should be the field rect: \" + rect);\n            return shape instanceof Shape.Square;\n        }\n\n        // Field rect is shadowed, local rect is in scope\n        System.out.println(\"This should be the local rect: \" + rect);\n        return rect.length() == rect.width();\n    }\n}\n</code></pre><p>å¦‚æœå›å¤´çœ‹çœ‹è¿™ä¸ƒæ®µä»£ç ï¼Œä½ ä¼šå€¾å‘äºå“ªä¸€ç§ç¼–ç çš„é£æ ¼ï¼Ÿæˆ‘ä»¬æŠŠè¿™äº›ä»£ç æ”¾åœ¨ä¸€èµ·ï¼Œåˆ†æä¸€ä¸‹å®ƒä»¬çš„ç‰¹ç‚¹ã€‚</p><p>ç¬¬å››æ®µå’Œç¬¬äº”æ®µä»£ç ï¼Œä¸èƒ½é€šè¿‡ç¼–è¯‘å™¨çš„å®¡æŸ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ä½¿ç”¨è¿™ä¸¤ç§ç¼–ç æ–¹å¼ã€‚</p><p>ç¬¬äºŒæ®µå’Œç¬¬ä¸ƒæ®µä»£ç ï¼ŒåŒ¹é…å˜é‡çš„ä½œç”¨åŸŸï¼Œè¿œç¦»äº†ç±»å‹åŒ¹é…è¯­å¥ã€‚è¿™ç§è·ç¦»ä¸Šçš„ç–è¿œï¼Œæ— è®ºåœ¨è§†è§‰ä¸Šè¿˜æ˜¯å¿ƒç†ä¸Šï¼Œéƒ½ä¸æ˜¯å¾ˆèˆ’é€‚çš„é€‰æ‹©ã€‚ä¸èˆ’é€‚ï¼Œå°±ç»™é”™è¯¯ç•™ä¸‹äº†ç©ºé—´ï¼Œä¸å®¹æ˜“ç¼–ç ï¼Œä¹Ÿä¸å®¹æ˜“æ’é”™ã€‚è¿™ç§ä»£ç é€»è¾‘å’Œè¯­æ³•ä¸Šéƒ½æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ä¸å¤ªå®¹æ˜“é˜…è¯»ã€‚</p><p>ç¬¬ä¸€æ®µå’Œç¬¬å…­æ®µä»£ç ï¼ŒåŒ¹é…å˜é‡çš„ä½œç”¨åŸŸï¼Œç´§è·Ÿç€ç±»å‹åŒ¹é…è¯­å¥ã€‚è¿™æ˜¯æˆ‘ä»¬æ„Ÿè§‰èˆ’é€‚çš„ä»£ç å¸ƒå±€ï¼Œä¹Ÿæ˜¯æœ€å®‰å…¨çš„ä»£ç å¸ƒå±€ï¼Œä¸å®¹æ˜“å‡ºé”™ï¼Œä¹Ÿå®¹æ˜“é˜…è¯»ã€‚</p><p>ç¬¬ä¸‰æ®µä»£ç ï¼Œå®ƒçš„åŒ¹é…å˜é‡çš„ä½œç”¨åŸŸä¹Ÿæ˜¯ç´§è·Ÿç€ç±»å‹åŒ¹é…è¯­å¥ã€‚åªä¸è¿‡ï¼Œè¿™ç§ä»£ç çš„ç¼–æ’æ–¹å¼ä¸å¤ªå®¹æ˜“é˜…è¯»ï¼Œé˜…è¯»è€…éœ€è¦è®¤çœŸæ‹†è§£æ¯ä¸€ä¸ªæ¡ä»¶ï¼Œæ‰èƒ½ç¡®è®¤é€»è¾‘æ˜¯æ­£ç¡®çš„ã€‚ç›¸å¯¹äºç¬¬ä¸€æ®µå’Œç¬¬å…­æ®µä»£ç ï¼Œç¬¬ä¸‰æ®µä»£ç çš„ç»„ç»‡æ–¹å¼ï¼Œæ˜¯ä¸€ä¸ªæ¬¡ä¼˜çš„é€‰æ‹©ã€‚</p><p>å¦‚æœä½ å­¦ä¹ è¿‡ã€Šä»£ç ç²¾è¿›ä¹‹è·¯ã€‹ä¸“æ ï¼Œæˆ‘æƒ³ä½ ä¼šç†è§£ä»£ç ç»„ç»‡æ–¹å¼çš„é‡è¦æ€§ï¼Œå¹¶ä¸”èƒ½å¤Ÿæœ‰æ„è¯†åœ°é€‰æ‹©ç®€å•ã€å®‰å…¨çš„ç»„ç»‡æ–¹å¼ã€‚å¯¹äºç±»å‹åŒ¹é…æ¥è¯´ï¼Œç¬¬ä¸€æ®µå’Œç¬¬å…­æ®µä»£ç çš„ç»„ç»‡æ–¹å¼ï¼Œæ˜¯æˆ‘ä»¬å–œæ¬¢çš„æ–¹å¼ã€‚</p><h2>å®ä¾‹åŒ¹é…çš„çº¢åˆ©</h2><p>åœ¨å¿«è¦ç»“æŸæœ¬æ–‡å†™ä½œçš„æ—¶å€™ï¼Œæˆ‘è¿˜æ˜¯å¿ä¸ä½æµ‹è¯•äº†ä¸€ä¸‹å®ä¾‹åŒ¹é…çš„æ€§èƒ½ã€‚åœ¨æˆ‘è‡ªå·±çš„ç¬”è®°æœ¬ç”µè„‘ä¸Šï¼Œå’Œä½¿ç”¨ç±»å‹è½¬æ¢è¿ç®—ç¬¦çš„ä»£ç ç›¸æ¯”ï¼Œä½¿ç”¨å®ä¾‹åŒ¹é…ä»£ç çš„ååé‡æé«˜äº†å°†è¿‘20%ã€‚è¿™æ˜¯ä¸€ä¸ªå·¨å¤§çš„æ€§èƒ½æå‡ã€‚æˆ‘çŸ¥é“ä½¿ç”¨å®ä¾‹åŒ¹é…ä¼šæé«˜æ€§èƒ½ï¼Œä½†æ˜¯æ²¡æƒ³åˆ°æœ‰è¿™ä¹ˆå¤§çš„æå‡ã€‚é™¤äº†ä¸»è¦ç›®æ ‡ä¹‹å¤–ï¼Œè¿™ä¹Ÿç®—æ˜¯ä½¿ç”¨å®ä¾‹åŒ¹é…çš„ä¸€ä¸ªçº¢åˆ©å§ã€‚</p><pre><code class=\"language-plain\">Benchmark&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Mode&nbsp; Cnt&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Score&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Error&nbsp; Units\nPatternBench.useCast&nbsp; &nbsp; &nbsp;thrpt&nbsp; &nbsp;15&nbsp; 263559326.599 Â± 78815341.366&nbsp; ops/s\nPatternBench.usePattern&nbsp; thrpt&nbsp; &nbsp;15&nbsp; 313458467.044 Â±&nbsp; 2666412.767&nbsp; ops/s\n</code></pre><h2>æ€»ç»“</h2><p>å¥½ï¼Œè¿™èŠ‚è¯¾çš„å†…å®¹åˆ°è¿™é‡Œå°±è¦ç»“æŸäº†ï¼Œæˆ‘æ¥åšä¸ªå°ç»“ã€‚ä»å‰é¢çš„è®¨è®ºä¸­ï¼Œæˆ‘ä»¬äº†è§£äº†Javaçš„æ¨¡å¼åŒ¹é…å’ŒJavaçš„ç±»å‹åŒ¹é…ï¼Œè®¨è®ºäº†Javaç±»å‹åŒ¹é…è¦è§£å†³çš„é—®é¢˜ã€è¡¨ç°çš„å½¢å¼ï¼Œä»¥åŠåŒ¹é…å˜é‡çš„ä½œç”¨åŸŸã€‚é¡ºä¾¿ï¼Œæˆ‘ä»¬è¿˜è®¨è®ºäº†æˆ‘ä»¬å–œæ¬¢çš„ç±»å‹åŒ¹é…ä»£ç çš„ç»„ç»‡æ–¹å¼ã€‚</p><p>åœ¨æˆ‘ä»¬æ—¥å¸¸çš„ç¼–ç å®è·µä¸­ï¼Œä¸ºäº†ç®€åŒ–ä»£ç é€»è¾‘ï¼Œå‡å°‘ä»£ç é”™è¯¯ï¼Œæé«˜ç”Ÿäº§æ•ˆç‡ï¼Œæˆ‘ä»¬åº”è¯¥ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨ç±»å‹åŒ¹é…ï¼Œè€Œä¸æ˜¯ä¼ ç»Ÿçš„å¼ºåˆ¶ç±»å‹è½¬æ¢è¿ç®—ç¬¦ã€‚</p><p>å¦‚æœä½ æƒ³è¦ä¸°å¯Œä½ çš„ä»£ç è¯„å®¡æ¸…å•ï¼Œæœ‰äº†Javaç±»å‹åŒ¹é…åï¼Œä½ å¯ä»¥åŠ å…¥ä¸‹é¢è¿™ä¸€æ¡ï¼š</p><blockquote>\n<p>å¦‚æœéœ€è¦ç±»å‹è½¬æ¢ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥ä½¿ç”¨ç±»å‹åŒ¹é…ï¼Ÿ</p>\n</blockquote><p>å¦å¤–ï¼Œæˆ‘åœ¨ä»Šå¤©çš„è®¨è®ºä¸­æ‹å‡ºäº†å‡ ä¸ªæŠ€æœ¯è¦ç‚¹ï¼Œè¿™äº›éƒ½å¯èƒ½åœ¨ä½ ä»¬é¢è¯•ä¸­å‡ºç°å“¦ã€‚é€šè¿‡è¿™ä¸€æ¬¡å­¦ä¹ ï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š</p><ul>\n<li>çŸ¥é“Javaæ”¯æŒç±»å‹åŒ¹é…ï¼Œå¹¶ä¸”èƒ½å¤Ÿä½¿ç”¨ç±»å‹åŒ¹é…ï¼Œæ›¿æ¢æ‰ä¼ ç»Ÿçš„å¼ºåˆ¶ç±»å‹è½¬æ¢è¿ç®—ã€‚\n<ul>\n<li>é¢è¯•é—®é¢˜ï¼šä½ çŸ¥é“ç±»å‹åŒ¹é…å—ï¼Ÿä¼šä¸ä¼šä½¿ç”¨å®ƒï¼Ÿ</li>\n</ul>\n</li>\n<li>äº†è§£ç±»å‹åŒ¹é…çš„åŸç†å’Œå®ƒè¦è§£å†³çš„é—®é¢˜ï¼ŒçŸ¥é“åŒ¹é…å˜é‡çš„ä½œç”¨åŸŸã€‚\n<ul>\n<li>é¢è¯•é—®é¢˜ï¼šä½¿ç”¨ç±»å‹åŒ¹é…æœ‰å“ªäº›å¥½å¤„ï¼ŸåŒ¹é…å˜é‡ä»€ä¹ˆæ—¶å€™å¯ä»¥ä½¿ç”¨ï¼Ÿ</li>\n</ul>\n</li>\n<li>äº†è§£ç±»å‹åŒ¹é…çš„ä»£ç ç»„ç»‡æ–¹å¼ï¼Œèƒ½å¤Ÿæœ‰æ„è¯†åœ°ä½¿ç”¨ç®€å•ã€å®‰å…¨çš„ä»£ç ç»„ç»‡æ–¹å¼ã€‚\n<ul>\n<li>é¢è¯•é—®é¢˜ï¼šä½ å†™çš„è¿™æ®µä»£ç ï¼ˆå¦‚æœä½¿ç”¨äº†ç±»å‹åŒ¹é…ï¼‰ï¼Œè¿˜æœ‰æ›´å¥½çš„è¡¨è¾¾æ–¹å¼å—ï¼Ÿ</li>\n</ul>\n</li>\n</ul><p>å¦‚æœä½ èƒ½å¤Ÿæœ‰æ„è¯†åœ°ä½¿ç”¨Javaçš„ç±»å‹åŒ¹é…ï¼Œå¹¶ä¸”æœ‰èƒ½åŠ›é€‰æ‹©ç®€å•ã€å®‰å…¨çš„ä»£ç ç»„ç»‡æ–¹å¼ï¼Œä½ åº”è¯¥èƒ½å¤Ÿå¤§å¹…åº¦æé«˜ç¼–ç çš„æ•ˆç‡å’Œè´¨é‡ï¼Œæé«˜ä»£ç çš„æ€§èƒ½ã€‚æ¯«æ— ç–‘é—®ï¼Œåœ¨é¢è¯•çš„æ—¶å€™ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªèƒ½å¤Ÿè®©ä½ ä¸ä¼—ä¸åŒçš„çŸ¥è¯†ç‚¹ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>åœ¨â€œåŒ¹é…å˜é‡çš„ä½œç”¨åŸŸâ€è¿™ä¸€å°èŠ‚é‡Œï¼Œæˆ‘ä»¬åˆ—ä¸¾äº†7ç§å®ä¾‹åŒ¹é…çš„ä»£ç ç»„ç»‡æ–¹å¼ã€‚é™¤äº†ç¬¬å››æ®µä»£ç å’Œç¬¬äº”æ®µä»£ç ï¼Œå…¶ä»–çš„äº”ç§ä»£ç éƒ½å¯ä»¥é€šè¿‡ç¼–è¯‘ã€‚ä¸ºäº†åŠ æ·±ä½ çš„å°è±¡ï¼Œæˆ‘ä»¬è¦åŠ¨åŠ¨æ‰‹ï¼ŒéªŒè¯ä¸€ä¸‹æ¯ä¸€ç§ä»£ç ç»„ç»‡æ–¹å¼ä¸‹ï¼ŒåŒ¹é…å˜é‡çš„ä½œç”¨åŸŸã€‚</p><p>æˆ‘åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­å†™äº†ä¸€ä¸ªä»£ç å°æ ·ï¼Œä½¿ç”¨æ‰“å°è¯­å¥è¾“å‡ºæ¥éªŒè¯ç»“æœã€‚ä½ å¯ä»¥è¯•ç€ä¿®æ”¹æˆä½ å–œæ¬¢çš„æ ·å­ï¼Œæ·»åŠ æ›´å¤šçš„ä»£ç ç»„ç»‡æ–¹å¼ã€‚</p><pre><code class=\"language-java\">/*\n * Copyright (c) 2021, Xuelei Fan. All rights reserved.\n * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n */\n\npackage co.ivi.jus.instance.review.xuelei;\n\npublic sealed interface Shape\n        permits Shape.Circle, Shape.Rectangle, Shape.Square {\n    Shape.Rectangle rect = null;    // field variable\n\n    record Circle(double radius) implements Shape {\n        // blank\n    }\n\n    record Square(double side) implements Shape {\n        // blank\n    }\n\n    record Rectangle(double length, double width) implements Shape {\n        // blank\n    }\n\n    static void main(String[] args) {\n        Shape shape = new Shape.Rectangle(10, 10);\n        System.out.println(\"It should be ture that \" + shape +\n                \" is a square: \" + isSquare(shape));\n\n        System.out.println();\n\n        shape = new Shape.Circle(10);\n        System.out.println(\"It cannot be ture that \" + shape +\n                \" is a square: \" + (!isSquare(shape)));\n    }\n\n    static boolean isSquare(Shape shape) {\n        if (shape instanceof Rectangle rect) {\n            // Field rect is shadowed, local rect is in scope\n            System.out.println(\n                    \"This should be the local rect: \" +\n                     rect.equals(shape));\n            return (rect.length == rect.width);\n        }\n\n        // Field rect is in scope, local rect is not in scope here\n        System.out.println(\n                \"This should be the field rect: \" + (rect == null));\n        return (shape instanceof Square);\n    }\n}\n</code></pre><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºç•™è¨€ã€è®¨è®ºï¼Œåˆ†äº«ä½ çš„é˜…è¯»ä½“éªŒä»¥åŠéªŒè¯çš„ä»£ç å’Œç»“æœã€‚</p><p>æ³¨ï¼šæœ¬æ–‡ä½¿ç”¨çš„å®Œæ•´çš„ä»£ç å¯ä»¥ä»<a href=\"https://github.com/XueleiFan/java-up/tree/main/src/main/java/co/ivi/jus/instance\">GitHub</a>ä¸‹è½½ï¼Œä½ å¯ä»¥é€šè¿‡ä¿®æ”¹<a href=\"https://github.com/XueleiFan/java-up/tree/main/src/main/java/co/ivi/jus/instance\">GitHub</a>ä¸Š<a href=\"https://github.com/XueleiFan/java-up/blob/main/src/main/java/co/ivi/jus/instance/review/xuelei/Shape.java\">review template</a>ä»£ç ï¼Œå®Œæˆè¿™æ¬¡çš„æ€è€ƒé¢˜ã€‚å¦‚æœä½ æƒ³è¦åˆ†äº«ä½ çš„ä¿®æ”¹æˆ–è€…æƒ³å¬å¬è¯„å®¡çš„æ„è§ï¼Œè¯·æäº¤ä¸€ä¸ª GitHubçš„æ‹‰å–è¯·æ±‚ï¼ˆPull Requestï¼‰ï¼Œå¹¶æŠŠæ‹‰å–è¯·æ±‚çš„åœ°å€è´´åˆ°ç•™è¨€é‡Œã€‚è¿™ä¸€å°èŠ‚çš„æ‹‰å–è¯·æ±‚ä»£ç ï¼Œè¯·åœ¨<a href=\"https://github.com/XueleiFan/java-up/blob/main/src/main/java/co/ivi/jus/instance/review\">å®ä¾‹åŒ¹é…ä¸“ç”¨çš„ä»£ç è¯„å®¡ç›®å½•</a>ä¸‹ï¼Œå»ºä¸€ä¸ªä»¥ä½ çš„åå­—å‘½åçš„å­ç›®å½•ï¼Œä»£ç æ”¾åˆ°ä½ ä¸“æœ‰çš„å­ç›®å½•é‡Œã€‚æ¯”å¦‚ï¼Œæˆ‘çš„ä»£ç ï¼Œå°±æ”¾åœ¨instance/review/xueleiçš„ç›®å½•ä¸‹é¢ã€‚</p><p>æ³¨ï¼šæœ¬æ–‡ä½¿ç”¨çš„åŸºå‡†æ€§èƒ½æµ‹è¯•ä»£ç ï¼Œä½ ä¹Ÿå¯ä»¥ä»<a href=\"https://github.com/XueleiFan/code-bench/blob/main/src/main/java/code/bench/PatternBench.java\">GitHub</a>ä¸Šä¸‹è½½ï¼Œè¯•è¯•ä½ çš„æœºå™¨æ˜¯ä¸æ˜¯ä¹Ÿæœ‰ç›¸ä¼¼çš„æ€§èƒ½è¡¨ç°ã€‚</p>","neighbors":{"left":{"article_title":"04 | å°é—­ç±»ï¼šæ€ä¹ˆåˆ¹ä½å¤±æ§çš„æ‰©å±•æ€§ï¼Ÿ","id":447486},"right":{"article_title":"06 | switchè¡¨è¾¾å¼ï¼šæ€ä¹ˆç®€åŒ–å¤šæƒ…æ™¯æ“ä½œï¼Ÿ","id":454523}},"comments":[{"had_liked":false,"id":323411,"user_name":"è®¸çµ","can_delete":false,"product_type":"c1","uid":1059926,"ip_address":"","ucode":"0296EC9929B570","user_header":"https://static001.geekbang.org/account/avatar/00/10/2c/56/ff7a9730.jpg","comment_is_top":true,"comment_ctime":1637893847,"is_pvip":true,"replies":[{"id":"117339","content":"è¿™ä¸ªå‘ç°å¾ˆå¥½ã€‚å°ä¼™ä¼´ä»¬ï¼Œå’±ä»¬ç‚¹èµæŠŠå®ƒç½®é¡¶å¥½å—ï¼Ÿè¿™æ ·ï¼Œæ›´å¤šçš„å°ä¼™ä¼´èƒ½å¤Ÿçœ‹å¾—åˆ°è¿™ç§æƒ…å†µã€‚","user_name":"ä½œè€…å›å¤","comment_id":323411,"uid":"1111315","ip_address":"","utype":1,"ctime":1637905916,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"9.2233720943271997e+18","product_id":100097301,"comment_content":"https:&#47;&#47;github.com&#47;XueleiFan&#47;java-up&#47;pull&#47;11<br>è€å¸ˆä½ å¥½ï¼åŒ¹é…å˜é‡çš„ä½œç”¨åŸŸæœ‰ä¸€ç§æƒ…å†µï¼Œåœ¨æ–‡ç« ä¸­æ²¡æœ‰æåˆ°ã€‚<br>if (!(shape instanceof Rectangle rect)) { <br>&#47;&#47; Field rect is in scope, local rect is not in scope here <br> }<br>else {<br>&#47;&#47; Field rect is shadowed, local rect is in scope<br>}<br><br>&#47;&#47; Field rect is in scope, local rect is not in scope here ","like_count":13,"discussions":[{"author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533562,"discussion_content":"è¿™ä¸ªå‘ç°å¾ˆå¥½ã€‚å°ä¼™ä¼´ä»¬ï¼Œå’±ä»¬ç‚¹èµæŠŠå®ƒç½®é¡¶å¥½å—ï¼Ÿè¿™æ ·ï¼Œæ›´å¤šçš„å°ä¼™ä¼´èƒ½å¤Ÿçœ‹å¾—åˆ°è¿™ç§æƒ…å†µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637905916,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323209,"user_name":"ABC","can_delete":false,"product_type":"c1","uid":1054958,"ip_address":"","ucode":"7501AD9C0C4A70","user_header":"https://static001.geekbang.org/account/avatar/00/10/18/ee/a1ed60d1.jpg","comment_is_top":false,"comment_ctime":1637762806,"is_pvip":false,"replies":[{"id":"117297","content":"å—¯ï¼Œ æˆ‘è¿˜æ²¡è”ç³»åˆ°try-with-resourceã€‚ ä½ è¿™ä¹ˆä¸€è¯´ï¼Œè¿˜çœŸæ˜¯æœ‰é‚£ä¹ˆç‚¹æ„æ€ã€‚","user_name":"ä½œè€…å›å¤","comment_id":323209,"uid":"1111315","ip_address":"","utype":1,"ctime":1637822519,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"14522664694","product_id":100097301,"comment_content":"ä¹‹å‰ç¬¬ä¸€çœ¼çœ‹åˆ°å°±è§‰å¾—å’Œtry-with-resourceæœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™,å‡å°‘æ¨¡æ¿ä»£ç ,ä¼˜åŒ–æ€§èƒ½.","like_count":3,"discussions":[{"author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533238,"discussion_content":"å—¯ï¼Œ æˆ‘è¿˜æ²¡è”ç³»åˆ°try-with-resourceã€‚ ä½ è¿™ä¹ˆä¸€è¯´ï¼Œè¿˜çœŸæ˜¯æœ‰é‚£ä¹ˆç‚¹æ„æ€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637822519,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323101,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1637727858,"is_pvip":false,"replies":[{"id":"117278","content":"æœ‰åŠæ³•åšåˆ°JVMé‡Œï¼Œå°±ä¸ä»…ä»…æ˜¯è¯­æ³•ç³–äº†ã€‚è¿™ä¹Ÿæ˜¯JDKèƒ½å¤Ÿç»™åŸºäºJVMçš„å…¶ä»–ç¼–ç¨‹è¯­è¨€å¸¦æ¥çš„å¥½å¤„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":323101,"uid":"1111315","ip_address":"","utype":1,"ctime":1637771233,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"14522629746","product_id":100097301,"comment_content":"ç±»å‹åŒ¹é…è¯­æ³•ç³–çœŸç”œï¼Œè¿˜èƒ½æå‡æ€§èƒ½ï¼Œå¾ˆæ„å¤–å¾ˆæƒŠå–œï¼","like_count":3,"discussions":[{"author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533110,"discussion_content":"æœ‰åŠæ³•åšåˆ°JVMé‡Œï¼Œå°±ä¸ä»…ä»…æ˜¯è¯­æ³•ç³–äº†ã€‚è¿™ä¹Ÿæ˜¯JDKèƒ½å¤Ÿç»™åŸºäºJVMçš„å…¶ä»–ç¼–ç¨‹è¯­è¨€å¸¦æ¥çš„å¥½å¤„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1637771233,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323035,"user_name":"ç å†œKevinäº®","can_delete":false,"product_type":"c1","uid":1116630,"ip_address":"","ucode":"D34562461CA0A1","user_header":"https://static001.geekbang.org/account/avatar/00/11/09/d6/5f366427.jpg","comment_is_top":false,"comment_ctime":1637714110,"is_pvip":false,"replies":[{"id":"117255","content":"è¯·å‚è€ƒè¿™é‡Œï¼Œhttps:&amp;#47;&amp;#47;github.com&amp;#47;openjdk&amp;#47;jmhã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„å·¥å…·ï¼Œå»ºè®®çœ‹ä¸€çœ‹ï¼Œå†™å†™æ€§èƒ½æµ‹è¯•ã€‚ç”¨ç†Ÿäº†ï¼Œä½ å¯èƒ½ä¹Ÿä¼šåƒæˆ‘ä¸€æ ·ï¼Œå–œæ¬¢ä¸Šè¿™ä¸ªå°å·¥å…·ã€‚ä¸“æ çš„ä»£ç åº“é‡Œï¼Œä¹Ÿæœ‰æ€§èƒ½æµ‹è¯•çš„ä»£ç ã€‚","user_name":"ä½œè€…å›å¤","comment_id":323035,"uid":"1111315","ip_address":"","utype":1,"ctime":1637724174,"user_name_real":"ç¼–è¾‘"}],"discussion_count":3,"race_medal":0,"score":"14522615998","product_id":100097301,"comment_content":"è¯·é—®è€å¸ˆè¿™ä¸ªæ€§èƒ½æµ‹è¯•æ˜¯ç”¨ä»€ä¹ˆå·¥å…·ä¸æ–¹æ³•åšçš„ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532898,"discussion_content":"å°è¯•ä¿®å¤ä¹±ç  https://github.com/openjdk/jmh","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1637728102,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":1,"child_discussions":[{"author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533172,"discussion_content":"è°¢è°¢ï¼webé¡µé¢å›å¤çš„ä¹±ç çœŸå®å¤´ç–¼ã€‚ åº”è¯¥åœ¨æå®¢æ—¶é—´å¼€å‘å·¥ç¨‹å¸ˆçš„è®¡åˆ’é‡Œäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637807564,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":532898,"ip_address":""},"score":533172,"extra":"{\"user_type\":2}"}]},{"author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532877,"discussion_content":"è¯·å‚è€ƒè¿™é‡Œï¼Œhttps:&amp;#47;&amp;#47;github.com&amp;#47;openjdk&amp;#47;jmhã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„å·¥å…·ï¼Œå»ºè®®çœ‹ä¸€çœ‹ï¼Œå†™å†™æ€§èƒ½æµ‹è¯•ã€‚ç”¨ç†Ÿäº†ï¼Œä½ å¯èƒ½ä¹Ÿä¼šåƒæˆ‘ä¸€æ ·ï¼Œå–œæ¬¢ä¸Šè¿™ä¸ªå°å·¥å…·ã€‚ä¸“æ çš„ä»£ç åº“é‡Œï¼Œä¹Ÿæœ‰æ€§èƒ½æµ‹è¯•çš„ä»£ç ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1637724174,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342630,"user_name":"yihang","can_delete":false,"product_type":"c1","uid":1012361,"ip_address":"","ucode":"A5506F085D1793","user_header":"https://static001.geekbang.org/account/avatar/00/0f/72/89/1a83120a.jpg","comment_is_top":false,"comment_ctime":1650371657,"is_pvip":false,"replies":[{"id":"125299","content":"å“¦ï¼Œä½ å¿«æ¥å¸®æˆ‘çœ‹çœ‹ï¼Œæ˜¯ä¸æ˜¯æ€§èƒ½æµ‹è¯•çš„ç”¨ä¾‹å†™é”™äº†ï¼Ÿhttps:&#47;&#47;github.com&#47;XueleiFan&#47;code-bench&#47;blob&#47;main&#47;src&#47;main&#47;java&#47;code&#47;bench&#47;PatternBench.","user_name":"ä½œè€…å›å¤","comment_id":342630,"uid":"1111315","ip_address":"","utype":1,"ctime":1650607592,"user_name_real":"ä½œè€…"}],"discussion_count":1,"race_medal":0,"score":"5945338953","product_id":100097301,"comment_content":"è€å¸ˆä½ å¥½ï¼Œã€æˆ‘çŸ¥é“ä½¿ç”¨å®ä¾‹åŒ¹é…ä¼šæé«˜æ€§èƒ½ï¼Œä½†æ˜¯æ²¡æƒ³åˆ°æœ‰è¿™ä¹ˆå¤§çš„æå‡ã€‘ä½†åç¼–è¯‘åçš„å­—èŠ‚ç éƒ½ä¸€æ ·å•Šï¼š<br>if (obj instanceof Student stu) {<br>            System.out.println(stu);<br>        }<br>        if (obj instanceof Student) {<br>            Student stu = (Student) obj;<br>            System.out.println(stu);<br>        }<br>ä¸ºä»€ä¹ˆä¼šæœ‰æ€§èƒ½æå‡ï¼Œèƒ½çœ‹åˆ°ä½ æµ‹è¯•ç”¨ä¾‹ä»£ç å—","like_count":1,"discussions":[{"author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566126,"discussion_content":"å“¦ï¼Œä½ å¿«æ¥å¸®æˆ‘çœ‹çœ‹ï¼Œæ˜¯ä¸æ˜¯æ€§èƒ½æµ‹è¯•çš„ç”¨ä¾‹å†™é”™äº†ï¼Ÿhttps://github.com/XueleiFan/code-bench/blob/main/src/main/java/code/bench/PatternBench.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650607592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323003,"user_name":"Clark","can_delete":false,"product_type":"c1","uid":1393121,"ip_address":"","ucode":"3026E8EDDA2AC9","user_header":"https://static001.geekbang.org/account/avatar/00/15/41/e1/91bf4837.jpg","comment_is_top":false,"comment_ctime":1637683875,"is_pvip":false,"replies":[{"id":"117254","content":"è¿™å°±ç‰µæ‰¯åˆ°å¦å¤–ä¸€ä¸ªé—®é¢˜äº†ï¼Œå°±æ˜¯å¼ºç±»å‹è¿˜æ˜¯å¼±ç±»å‹çš„ç¼–ç¨‹è¯­è¨€ã€‚tsè¿™é‡Œå¯ä»¥åšåˆ°æ›´ä¼˜é›…ã€‚","user_name":"ä½œè€…å›å¤","comment_id":323003,"uid":"1111315","ip_address":"","utype":1,"ctime":1637723997,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"5932651171","product_id":100097301,"comment_content":"ä¸typescriptåœ¨instanceofç›´æ¥æŠŠç±»å‹ç¡®å®šäº†æ¯”ï¼ŒJavaè¿™ä¸ªæ–°è¯­æ³•è¿˜æ˜¯ä¸å¤Ÿä¼˜é›…ã€‚<br>typescriptï¼š<br>if (a instanceof Rect) {<br> a.area(); &#47;&#47; a is Rect<br>}<br>æ˜¯ä¸æ˜¯è§‰å¾—tsè¿™æ ·æŒºä¼˜é›…çš„","like_count":1,"discussions":[{"author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532876,"discussion_content":"è¿™å°±ç‰µæ‰¯åˆ°å¦å¤–ä¸€ä¸ªé—®é¢˜äº†ï¼Œå°±æ˜¯å¼ºç±»å‹è¿˜æ˜¯å¼±ç±»å‹çš„ç¼–ç¨‹è¯­è¨€ã€‚tsè¿™é‡Œå¯ä»¥åšåˆ°æ›´ä¼˜é›…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637723997,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361282,"user_name":"I    PYJ","can_delete":false,"product_type":"c1","uid":1235727,"ip_address":"å››å·","ucode":"19699EF09D23AF","user_header":"https://static001.geekbang.org/account/avatar/00/12/db/0f/20edf7a6.jpg","comment_is_top":false,"comment_ctime":1667381589,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1667381589","product_id":100097301,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ã€‚æ–‡ç« ä¸­çš„è¿™ä¸€æ®µï¼šä¸‹é¢ä¾‹å­ä¸­çš„ä¸¤æ®µä»£ç ï¼Œå°±æ˜¯ä¸¤ä¸ªå¸¸è§çš„ç±»å‹è½¬æ¢é”™è¯¯ã€‚ç¬¬ä¸€æ®µä»£ç è¯¯ç”¨äº†å˜é‡ç±»å‹ï¼Œç¬¬äºŒæ®µä»£ç è¯¯ç”¨äº†åˆ¤æ–­ç»“æœã€‚<br>æˆ‘çœ‹äº†ä¸¾ä¾‹çš„ç¬¬ä¸€æ®µä»£ç ä¸å­˜åœ¨è¯¯ç”¨æ¥å˜é‡ç±»å‹å‘€ï¼Œæ‚¨è¿™è¾¹åº”è¯¥æ˜¯æƒ³å±•ç¤ºä¸€ä¸ªé”™è¯¯çš„ä¾‹å­ï¼Œä½†æ˜¯æ²¡æœ‰æ”¹åˆ°å§","like_count":0},{"had_liked":false,"id":359069,"user_name":"if...else...","can_delete":false,"product_type":"c1","uid":2550743,"ip_address":"æµ™æ±Ÿ","ucode":"D0565908C99695","user_header":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","comment_is_top":false,"comment_ctime":1665220336,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1665220336","product_id":100097301,"comment_content":"å­¦ä¹ æ‰“å¡","like_count":0},{"had_liked":false,"id":358793,"user_name":"xueerfei007","can_delete":false,"product_type":"c1","uid":1155062,"ip_address":"æµ™æ±Ÿ","ucode":"EF3FE821E5B54A","user_header":"https://static001.geekbang.org/account/avatar/00/11/9f/f6/7431e82e.jpg","comment_is_top":false,"comment_ctime":1664781490,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1664781490","product_id":100097301,"comment_content":"å…³äºç±»å‹è½¬æ¢è¿™å—ï¼Œæˆ‘è‡ªå·±åšäº†ä¸‹å®éªŒï¼Œå¯¹æ¯”äº†ç”¨JDD1.8ç¼–è¯‘æ™®é€šç±»å‹è½¬æ¢ä»£ç ï¼Œç”¨JDK17ç¼–è¯‘æ–°çš„ç±»å‹è½¬æ¢ä»£ç ï¼Œç”Ÿæˆçš„å­—èŠ‚ç å‡ ä¹æ˜¯ä¸€æ ·çš„ï¼Œé€šè¿‡javapæŸ¥çœ‹ï¼Œç”¨JDK17ç¼–è¯‘å‡ºæ¥çš„å­—èŠ‚ç ä¸­ï¼Œæ–¹æ³•çš„ä»£ç é‡Œæ²¡æœ‰äº†å±€éƒ¨å˜é‡è¡¨ï¼Œéš¾é“è¯´æ€§èƒ½æå‡æ˜¯å› ä¸ºä¼˜åŒ–äº†å±€éƒ¨å˜é‡è¡¨? <br><br>å¯¹æ¯”å‡ºæ¥ï¼Œ1.8ç¼–è¯‘çš„æœ‰å±€éƒ¨å˜é‡è¡¨<br>      LocalVariableTable:<br>        Start  Length  Slot  Name   Signature<br>           12      17     1  rect   LShadow$Rectangle;<br>            0      34     0 shape   LShadow$Shape;","like_count":0},{"had_liked":false,"id":339620,"user_name":"rocedu","can_delete":false,"product_type":"c1","uid":1013097,"ip_address":"","ucode":"E46E29CBBB94A9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/69/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1648243742,"is_pvip":true,"replies":[{"id":"124154","content":"è°¢è°¢ã€‚é“¾æ¥åº”è¯¥æ˜¯ï¼š https:&#47;&#47;github.com&#47;XueleiFan&#47;code-bench&#47;blob&#47;main&#47;src&#47;main&#47;java&#47;code&#47;bench&#47;PatternBench.javaã€‚ç¼–è¾‘èƒ½æŠŠé“¾æ¥ä¿®æ”¹æˆä¸€ä¸‹å—ï¼Ÿ","user_name":"ä½œè€…å›å¤","comment_id":339620,"uid":"1111315","ip_address":"","utype":1,"ctime":1648331038,"user_name_real":"ä½œè€…"}],"discussion_count":1,"race_medal":0,"score":"1648243742","product_id":100097301,"comment_content":"https:&#47;&#47;github.com&#47;XueleiFan&#47;code-bench&#47;blob&#47;main&#47;src&#47;main&#47;java&#47;crypto&#47;bench&#47;PatternBench.java æœ€åä¸€ä¸ªé“¾æ¥404äº†","like_count":0,"discussions":[{"author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558472,"discussion_content":"è°¢è°¢ã€‚é“¾æ¥åº”è¯¥æ˜¯ï¼š https://github.com/XueleiFan/code-bench/blob/main/src/main/java/code/bench/PatternBench.javaã€‚ç¼–è¾‘èƒ½æŠŠé“¾æ¥ä¿®æ”¹æˆä¸€ä¸‹å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648331038,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":324003,"user_name":"ç‹ç¡•ğŸ¤–","can_delete":false,"product_type":"c1","uid":2850134,"ip_address":"","ucode":"FA5F66CC1D0442","user_header":"https://static001.geekbang.org/account/avatar/00/2b/7d/56/10e92ae9.jpg","comment_is_top":false,"comment_ctime":1638254383,"is_pvip":false,"replies":[{"id":"117611","content":"æœ‰æ²¡æœ‰elseè¯­å¥ï¼Œé€»è¾‘ä¼¼ä¹éƒ½æ˜¯ä¸€æ ·çš„ã€‚ä½ æœ‰æ²¡æœ‰ç¢°åˆ°ç¼–è¯‘é”™è¯¯ï¼Œæˆ–è€…è¿è¡Œé”™è¯¯ï¼Ÿ é”™è¯¯ä¿¡æ¯æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ","user_name":"ä½œè€…å›å¤","comment_id":324003,"uid":"1111315","ip_address":"","utype":1,"ctime":1638291202,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1638254383","product_id":100097301,"comment_content":"åŒ¹é…å˜é‡ä½œç”¨åŸŸçš„ç¬¬äºŒæ®µä»£ç æ˜¯æœ‰é—®é¢˜çš„ï¼Œåªæœ‰ä¸‹é¢è·Ÿ else çš„æ—¶å€™ï¼Œæ‰èƒ½åœ¨ else çš„ä»£ç å—èŒƒå›´å†…ä½¿ç”¨ rectã€‚<br>```<br>public static boolean isSquareImplB(Shape shape) {<br>    if (!(shape instanceof Rectangle rect)) {<br>        &#47;&#47; rect is not in scope here<br>        return shape instanceof Square;<br>    } else {<br>        &#47;&#47; rect is in scope<br>        return rect.length() == rect.width();<br>    }<br>}<br>```","like_count":0,"discussions":[{"author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534892,"discussion_content":"æœ‰æ²¡æœ‰elseè¯­å¥ï¼Œé€»è¾‘ä¼¼ä¹éƒ½æ˜¯ä¸€æ ·çš„ã€‚ä½ æœ‰æ²¡æœ‰ç¢°åˆ°ç¼–è¯‘é”™è¯¯ï¼Œæˆ–è€…è¿è¡Œé”™è¯¯ï¼Ÿ é”™è¯¯ä¿¡æ¯æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638291202,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323316,"user_name":"Jxin","can_delete":false,"product_type":"c1","uid":1251111,"ip_address":"","ucode":"4C03928388C413","user_header":"https://static001.geekbang.org/account/avatar/00/13/17/27/ec30d30a.jpg","comment_is_top":false,"comment_ctime":1637830215,"is_pvip":false,"replies":[{"id":"117312","content":"1. ç±»åº“ä½¿ç”¨æ–°ç‰¹æ€§ï¼Œ è¦æ»åä¸€æ®µæ—¶é—´ï¼Œ ç”šè‡³å¾ˆå¤šå¹´ã€‚ å¸Œæœ›æœ‰æœ‹å‹è´¡çŒ®ä»£ç ã€‚<br><br>2. è¿™ä¸ªçš„æ„æ€æ˜¯ä½¿ç”¨CPUæŒ‡ä»¤åŠ é€Ÿï¼Œ éœ€è¦åœ¨JVMé‡ŒåµŒå…¥ç‰¹æ®Šçš„ä»£ç ã€‚ ç­‰åˆ°ç¬¬11è®²ï¼Œ æˆ‘ä»¬è®¨è®ºçŸ¢é‡è®¡ç®—çš„æ—¶å€™ï¼Œ åº”ç”¨ç¨‹åºçš„ä»£ç å°±ä¹Ÿèƒ½ä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿäº†ï¼Œä¸å†éœ€è¦JVMçš„ç‰¹æ®Šä»£ç äº†ã€‚","user_name":"ä½œè€…å›å¤","comment_id":323316,"uid":"1111315","ip_address":"","utype":1,"ctime":1637855436,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1637830215","product_id":100097301,"comment_content":"æˆ‘çš„è½¬æ¢ä¸€èˆ¬æ˜¯map(Class::cast)ã€‚æ‰€ä»¥å»ç¿»äº†ä¸‹17çš„Classç±»ã€‚<br>1.Classç±»è¿˜æ˜¯ï¼ˆTï¼‰objå¼ºè½¬ï¼Œçœ‹æ¥æ–°ç‰¹æ€§å‡ºäº†ï¼Œå´æ²¡æœ‰å»æ›¿æ¢ã€‚æ¯•ç«Ÿæœ‰æ€§èƒ½æå‡ï¼Œè¿˜æ˜¯å¯ä»¥æ¢ä¸‹çš„ã€‚<br>2.@IntrinsicCandidate å¤šäº†è¿™ä¸ªæ³¨è§£ï¼Œè¯·é—®æ˜¯åšå•¥ç”¨çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533442,"discussion_content":"1. ç±»åº“ä½¿ç”¨æ–°ç‰¹æ€§ï¼Œ è¦æ»åä¸€æ®µæ—¶é—´ï¼Œ ç”šè‡³å¾ˆå¤šå¹´ã€‚ å¸Œæœ›æœ‰æœ‹å‹è´¡çŒ®ä»£ç ã€‚\n\n2. è¿™ä¸ªçš„æ„æ€æ˜¯ä½¿ç”¨CPUæŒ‡ä»¤åŠ é€Ÿï¼Œ éœ€è¦åœ¨JVMé‡ŒåµŒå…¥ç‰¹æ®Šçš„ä»£ç ã€‚ ç­‰åˆ°ç¬¬11è®²ï¼Œ æˆ‘ä»¬è®¨è®ºçŸ¢é‡è®¡ç®—çš„æ—¶å€™ï¼Œ åº”ç”¨ç¨‹åºçš„ä»£ç å°±ä¹Ÿèƒ½ä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿäº†ï¼Œä¸å†éœ€è¦JVMçš„ç‰¹æ®Šä»£ç äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637855436,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323278,"user_name":"fatme","can_delete":false,"product_type":"c1","uid":1034451,"ip_address":"","ucode":"75A805D2BB2AD1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c8/d3/3020ae46.jpg","comment_is_top":false,"comment_ctime":1637813391,"is_pvip":false,"replies":[{"id":"117296","content":"ç†è®ºä¸Šåº”è¯¥å¯ä»¥è¿™æ ·ï¼Œ ä½†æ˜¯ä¸ä¸€å®šæ›´æœ‰åˆ©äºä»£ç é˜…è¯»ã€‚","user_name":"ä½œè€…å›å¤","comment_id":323278,"uid":"1111315","ip_address":"","utype":1,"ctime":1637822442,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1637813391","product_id":100097301,"comment_content":"èƒ½ä¸èƒ½æä¾›éšå«çš„åŒ¹é…å˜é‡å‘¢ï¼Œç±»ä¼¼ groovy é—­åŒ…çš„ it éšå«å‚æ•°(https:&#47;&#47;groovy-lang.org&#47;closures.html#implicit-it)ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å†™ä¸‹é¢çš„ä»£ç ï¼š<br><br>if (shape instanceof Rectangle) {     <br>    return it.length() == it.width();<br>}","like_count":0,"discussions":[{"author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533237,"discussion_content":"ç†è®ºä¸Šåº”è¯¥å¯ä»¥è¿™æ ·ï¼Œ ä½†æ˜¯ä¸ä¸€å®šæ›´æœ‰åˆ©äºä»£ç é˜…è¯»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637822442,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323216,"user_name":"ABC","can_delete":false,"product_type":"c1","uid":1054958,"ip_address":"","ucode":"7501AD9C0C4A70","user_header":"https://static001.geekbang.org/account/avatar/00/10/18/ee/a1ed60d1.jpg","comment_is_top":false,"comment_ctime":1637764864,"is_pvip":false,"replies":[{"id":"117301","content":"å“¦ï¼Œæˆ‘æƒ³ä½ æœ‰å¯èƒ½ä¼šæƒ³å»çœ‹çœ‹æˆ‘çš„å¦å¤–ä¸€ä¸ªä¸“æ â€œä»£ç ç²¾è¿›ä¹‹è·¯â€ã€‚ æˆ‘åœ¨PRç•™è¨€äº†ï¼Œä¸ºä»€ä¹ˆè¿™æ ·çš„æ ¼å¼æ„Ÿè§‰å¥½ï¼Œä½†æ˜¯å®é™…ä¸å¥½ï¼Œè¯´èµ·æ¥è¯é•¿ã€‚ ä½ çœ‹çœ‹æœ‰æ²¡æœ‰â€œä»£ç ç²¾è¿›ä¹‹è·¯â€çš„è¯•è¯»æƒé™ï¼Œçœ‹çœ‹ç¬¬ä¸€ä¸ªæ¨¡å—çš„ç›¸å…³ç« èŠ‚ã€‚","user_name":"ä½œè€…å›å¤","comment_id":323216,"uid":"1111315","ip_address":"","utype":1,"ctime":1637823480,"user_name_real":"ç¼–è¾‘"}],"discussion_count":2,"race_medal":0,"score":"1637764864","product_id":100097301,"comment_content":"https:&#47;&#47;github.com&#47;XueleiFan&#47;java-up&#47;pull&#47;12<br><br>åœ¨æ–¹æ³•3(isSquare)åŸºç¡€ä¸Šå»é™¤äº†å¤šä½™çš„æ‹¬å·,æ„Ÿè§‰è¿™ç§æ–¹å¼æ›´å¥½,æ›´ç®€æ´.å½“ç„¶ä¸ºäº†ç»´æŠ¤,éœ€è¦åœ¨æ–¹æ³•ä¸­åšå¥½æ³¨é‡Š.<br><br>å¦å¤–ç§»é™¤äº†æ–¹æ³•1(isSquareA)å’Œæ–¹æ³•6(isSquareF)å¤šä½™çš„æ‹¬å·,æ–¹æ³•1å’Œæ–¹æ³•6åªæ˜¯åˆ¤æ–­é¡ºåºæœ‰æ‰€å·®å¼‚.ä½†ç•¥æ¯”æ–¹æ³•3æ˜¾å¾—å†—é•¿äº†ä¸€äº›.","like_count":0,"discussions":[{"author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533243,"discussion_content":"å“¦ï¼Œæˆ‘æƒ³ä½ æœ‰å¯èƒ½ä¼šæƒ³å»çœ‹çœ‹æˆ‘çš„å¦å¤–ä¸€ä¸ªä¸“æ â€œä»£ç ç²¾è¿›ä¹‹è·¯â€ã€‚ æˆ‘åœ¨PRç•™è¨€äº†ï¼Œä¸ºä»€ä¹ˆè¿™æ ·çš„æ ¼å¼æ„Ÿè§‰å¥½ï¼Œä½†æ˜¯å®é™…ä¸å¥½ï¼Œè¯´èµ·æ¥è¯é•¿ã€‚ ä½ çœ‹çœ‹æœ‰æ²¡æœ‰â€œä»£ç ç²¾è¿›ä¹‹è·¯â€çš„è¯•è¯»æƒé™ï¼Œçœ‹çœ‹ç¬¬ä¸€ä¸ªæ¨¡å—çš„ç›¸å…³ç« èŠ‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637823480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1054958,"avatar":"https://static001.geekbang.org/account/avatar/00/10/18/ee/a1ed60d1.jpg","nickname":"ABC","note":"","ucode":"7501AD9C0C4A70","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533376,"discussion_content":"å¥½çš„,è°¢è°¢è€å¸ˆ.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637848777,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]}]}