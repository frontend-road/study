{"id":10673,"title":"11 | by关键字的使用","content":"<h1>源代码及 PDF 课件地址：</h1><p><strong><a href=\"https://gitee.com/geektime-geekbang/KotlinPrimer\">https://gitee.com/geektime-geekbang/KotlinPrimer</a></strong></p>","comments":[{"had_liked":false,"id":19868,"user_name":"刘建","can_delete":false,"product_type":"c3","uid":1184348,"ip_address":"","ucode":"8FAA03E146B16F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/RRyBNDRiaQ1rfDf2es0Gw8kWMUtFrITmIIfPBjYUtKNcOVBgO85AsdGlibPdoicBibsIoiatOM2QKKzbjD51kLKPObA/132","comment_is_top":false,"comment_ctime":1534127420,"is_pvip":false,"replies":[{"id":6940,"content":"kotlin的动态代理最终会编译成静态代理","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1534202278,"ip_address":"","comment_id":19868,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"应该是静态代理吧","like_count":5,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422007,"discussion_content":"kotlin的动态代理最终会编译成静态代理","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1534202278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":44932,"user_name":"书生依旧","can_delete":false,"product_type":"c3","uid":1069827,"ip_address":"","ucode":"4B2181160AD303","user_header":"https://static001.geekbang.org/account/avatar/00/10/53/03/24a892b7.jpg","comment_is_top":false,"comment_ctime":1543510713,"is_pvip":false,"replies":[{"id":17296,"content":"嗯，是的","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1544437994,"ip_address":"","comment_id":44932,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"这个肯定不是动态代理吧，应该叫做「委托模式」。\n\n和 Activity onCreate 中的源码一样，先创建一个 Delegate，然后都用这个 Delegate 操作。","like_count":3,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430863,"discussion_content":"嗯，是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544437994,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":111118,"user_name":"ForzaJuve","can_delete":false,"product_type":"c3","uid":1047302,"ip_address":"","ucode":"E090D83AE78EE6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fb/06/0e6b6365.jpg","comment_is_top":false,"comment_ctime":1562480311,"is_pvip":false,"replies":[{"id":58062,"content":"data可以继承别的类的，如果你是一个可能被继承的javabean，那么至少证明他可以不是一个独立的数据字段吧。","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1573636938,"ip_address":"","comment_id":111118,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"KOTLIN 中的data类不可以被继承，为什么这样设计呢？感觉javabean继承父类这种场景还是很多的吧","like_count":2,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457237,"discussion_content":"data可以继承别的类的，如果你是一个可能被继承的javabean，那么至少证明他可以不是一个独立的数据字段吧。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573636938,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":26445,"user_name":"涛","can_delete":false,"product_type":"c3","uid":1085100,"ip_address":"","ucode":"92263D02C543E1","user_header":"https://static001.geekbang.org/account/avatar/00/10/8e/ac/24fc311b.jpg","comment_is_top":false,"comment_ctime":1537603105,"is_pvip":false,"replies":[{"id":10506,"content":"很对👍","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1538306906,"ip_address":"","comment_id":26445,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"JAVA里的动态代理是这样的，上善若水 同学的问题是要这么解决的。在HalCtrlProxyHandler中的invoke方法里添加日志即可。这是Java在native层支持的动态代理。\n&#47;&#47;创建一个与代理对象相关联的InvocationHandler\n        InvocationHandler stuHandler = new HalCtrlProxyHandler&lt;&gt;(ctrl);\n\n        &#47;&#47;创建一个代理对象stuProxy来代理，代理对象的每个执行方法都会替换执行Invocation中的invoke方法\n        return (IPrinter) Proxy.newProxyInstance(IPrinter.class.getClassLoader()\n                , new Class&lt;?&gt;[]{IPrinter.class}, stuHandler);","like_count":2,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424636,"discussion_content":"很对👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538306906,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":20373,"user_name":"上善若水","can_delete":false,"product_type":"c3","uid":1174366,"ip_address":"","ucode":"15A3DF0DB60E4F","user_header":"https://static001.geekbang.org/account/avatar/00/11/eb/5e/8813f94e.jpg","comment_is_top":false,"comment_ctime":1534398296,"is_pvip":false,"replies":[{"id":7258,"content":"这个确实没办法","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1534685778,"ip_address":"","comment_id":20373,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"请问一下，这个感觉就是静态代理啊？假如有个需求，需要在方法调用前后加上日志，按视频里那么写的话，如果接口增加多几个方法，那这个动态代理类怎么做到不用重写所有的方法就能做到统一前后加上了日志呢？","like_count":1,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422224,"discussion_content":"这个确实没办法","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1534685778,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1334878,"avatar":"https://static001.geekbang.org/account/avatar/00/14/5e/5e/71b0d580.jpg","nickname":"崔小波","note":"","ucode":"BA76B623AF196D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":209657,"discussion_content":"说的有道理，感觉视频中这里就像是静态代理的简便写法。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584664593,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":291714,"user_name":"朱俊文","can_delete":false,"product_type":"c3","uid":2423457,"ip_address":"","ucode":"A4B888CE6A29A0","user_header":"https://static001.geekbang.org/account/avatar/00/24/fa/a1/f841d13a.jpg","comment_is_top":false,"comment_ctime":1620445115,"is_pvip":false,"replies":[{"id":109142,"content":"反编译一下看看代码","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1625700778,"ip_address":"","comment_id":291714,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"data class 有自动生成getter setter吗？怎么我在ide写的时候没有","like_count":0,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519547,"discussion_content":"反编译一下看看代码","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625700778,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":22675,"user_name":"Geek_5y9106","can_delete":false,"product_type":"c3","uid":1172641,"ip_address":"","ucode":"BF6B80E82A29BD","user_header":"https://static001.geekbang.org/account/avatar/00/11/e4/a1/18c083dd.jpg","comment_is_top":false,"comment_ctime":1535934058,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"这叫动态代理？","like_count":8},{"had_liked":false,"id":73147,"user_name":"风吹旧夏","can_delete":false,"product_type":"c3","uid":1425671,"ip_address":"","ucode":"79E127F2E1ECEE","user_header":"https://static001.geekbang.org/account/avatar/00/15/c1/07/7905e043.jpg","comment_is_top":false,"comment_ctime":1551832231,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"这节课的精髓在于通过by这个关键字实现的代理 节省了很多的代码，而老师在讲课的时候一直说动态代理，以至于不注意都忽略了by这个关键字","like_count":1},{"had_liked":false,"id":362031,"user_name":"yalda","can_delete":false,"product_type":"c3","uid":1057332,"ip_address":"江苏","ucode":"1F782AB65DC0AA","user_header":"https://static001.geekbang.org/account/avatar/00/10/22/34/580cdde0.jpg","comment_is_top":false,"comment_ctime":1668077989,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"UP 主这个英文真的要好好校对一下；连看了很多集；好多单词要么读错了，要么读不准；这要是开语言。。。","like_count":0},{"had_liked":false,"id":252462,"user_name":"Jennifer Huang","can_delete":false,"product_type":"c3","uid":1523012,"ip_address":"","ucode":"8A014DC72D38CB","user_header":"https://static001.geekbang.org/account/avatar/00/17/3d/44/115a332e.jpg","comment_is_top":false,"comment_ctime":1602311083,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"by是对应 java里静态代理 模板代码的语法糖吧， 这不是静态代理吗？ 为啥提的是动态代理。","like_count":0},{"had_liked":false,"id":16415,"user_name":"null","can_delete":false,"product_type":"c3","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1531930635,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100009801,"comment_content":"1. data 数据类关键字，有点像 Lombok 的@Data\n2. sealed 密闭类，提高了可扩展性","like_count":0}]}